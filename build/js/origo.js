(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.origo = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports = {
  crossDomain: true,
  target: '#app-wrapper',
  svgSpritePath: 'css/svg/',
  svgSprites: ['fa-icons.svg', 'material-icons.svg', 'miscellaneous.svg', 'custom.svg'],
  breakPoints: {
    xs: [240, 320],
    s: [320, 320],
    m: [500, 500],
    l: [768, 500]
  },
  breakPointsPrefix: 'o-media',
  defaultControls: [
    {
      "name": "scaleline"
    },
    {
      "name": "zoom"
    },
    {
      "name": "rotate"
    },
    {
      "name": "attribution"
    }
  ]
}

},{}],2:[function(require,module,exports){
var controls = {};
controls.geoposition = require('../src/geoposition');
controls.mapmenu = require('../src/mapmenu');
controls.print = require('../src/print');
controls.sharemap = require('../src/sharemap');
controls.legend = require('../src/legend');
controls.search = require('../src/search');
controls.editor = require('../src/editor');
controls.home = require('../src/home');
controls.measure = require('../src/measure');
controls.about = require('../src/about');
controls.scale = require('../src/scale');
controls.offline = require('../src/offline');
controls.link = require('../src/link');
controls.scaleline = require('../src/scaleline');
controls.zoom = require('../src/zoom');
controls.rotate = require('../src/rotate');
controls.attribution = require('../src/attribution');
controls.fullscreen = require('../src/fullscreen');

module.exports = controls;

},{"../src/about":101,"../src/attribution":102,"../src/editor":106,"../src/fullscreen":123,"../src/geoposition":127,"../src/home":131,"../src/legend":146,"../src/link":147,"../src/mapmenu":149,"../src/measure":151,"../src/offline":153,"../src/print":169,"../src/rotate":170,"../src/scale":171,"../src/scaleline":172,"../src/search":173,"../src/sharemap":174,"../src/zoom":202}],3:[function(require,module,exports){
"function"!==typeof Object.create&&(Object.create=function(f){function g(){}g.prototype=f;return new g});
(function(f,g,k){var l={init:function(a,b){this.$elem=f(b);this.options=f.extend({},f.fn.owlCarousel.options,this.$elem.data(),a);this.userOptions=a;this.loadContent()},loadContent:function(){function a(a){var d,e="";if("function"===typeof b.options.jsonSuccess)b.options.jsonSuccess.apply(this,[a]);else{for(d in a.owl)a.owl.hasOwnProperty(d)&&(e+=a.owl[d].item);b.$elem.html(e)}b.logIn()}var b=this,e;"function"===typeof b.options.beforeInit&&b.options.beforeInit.apply(this,[b.$elem]);"string"===typeof b.options.jsonPath?
(e=b.options.jsonPath,f.getJSON(e,a)):b.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style"));this.$elem.data("owl-originalClasses",this.$elem.attr("class"));this.$elem.css({opacity:0});this.orignalItems=this.options.items;this.checkBrowser();this.wrapperWidth=0;this.checkVisible=null;this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass();this.eventTypes();this.$userItems=this.$elem.children();this.itemsAmount=this.$userItems.length;
this.wrapItems();this.$owlItems=this.$elem.find(".owl-item");this.$owlWrapper=this.$elem.find(".owl-wrapper");this.playDirection="next";this.prevItem=0;this.prevArr=[0];this.currentItem=0;this.customEvents();this.onStartup()},onStartup:function(){this.updateItems();this.calculateAll();this.buildControls();this.updateControls();this.response();this.moveEvents();this.stopOnHover();this.owlStatus();!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle);!0===this.options.autoPlay&&
(this.options.autoPlay=5E3);this.play();this.$elem.find(".owl-wrapper").css("display","block");this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility();this.onstartup=!1;this.eachMoveUpdate();"function"===typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad();!0===this.options.autoHeight&&this.autoHeight();this.onVisibleItems();"function"===typeof this.options.afterAction&&this.options.afterAction.apply(this,
[this.$elem])},updateVars:function(){"function"===typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]);this.watchVisibility();this.updateItems();this.calculateAll();this.updatePosition();this.updateControls();this.eachMoveUpdate();"function"===typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var a=this;g.setTimeout(function(){a.updateVars()},0)},watchVisibility:function(){var a=this;if(!1===a.$elem.is(":visible"))a.$elem.css({opacity:0}),
g.clearInterval(a.autoPlayInterval),g.clearInterval(a.checkVisible);else return!1;a.checkVisible=g.setInterval(function(){a.$elem.is(":visible")&&(a.reload(),a.$elem.animate({opacity:1},200),g.clearInterval(a.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>');this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">');this.wrapperOuter=this.$elem.find(".owl-wrapper-outer");this.$elem.css("display","block")},
baseClass:function(){var a=this.$elem.hasClass(this.options.baseClass),b=this.$elem.hasClass(this.options.theme);a||this.$elem.addClass(this.options.baseClass);b||this.$elem.addClass(this.options.theme)},updateItems:function(){var a,b;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=
!1,this.options.itemsMobile=!1;a=f(this.options.responsiveBaseWidth).width();a>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems);if(!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(a,b){return a[0]-b[0]}),b=0;b<this.options.itemsCustom.length;b+=1)this.options.itemsCustom[b][0]<=a&&(this.options.items=this.options.itemsCustom[b][1]);else a<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),
a<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),a<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),a<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),a<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&
!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var a=this,b,e;if(!0!==a.options.responsive)return!1;e=f(g).width();a.resizer=function(){f(g).width()!==e&&(!1!==a.options.autoPlay&&g.clearInterval(a.autoPlayInterval),g.clearTimeout(b),b=g.setTimeout(function(){e=f(g).width();a.updateVars()},a.options.responsiveRefreshRate))};f(g).resize(a.resizer)},updatePosition:function(){this.jumpTo(this.currentItem);!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var a=
this,b=0,e=a.itemsAmount-a.options.items;a.$owlItems.each(function(c){var d=f(this);d.css({width:a.itemWidth}).data("owl-item",Number(c));if(0===c%a.options.items||c===e)c>e||(b+=1);d.data("owl-roundPages",b)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0});this.appendItemsSizes()},calculateAll:function(){this.calculateWidth();this.appendWrapperSizes();this.loops();this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/
this.options.items)},max:function(){var a=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);this.options.items>this.itemsAmount?this.maximumPixels=a=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=a);return a},min:function(){return 0},loops:function(){var a=0,b=0,e,c;this.positionsInArray=[0];this.pagesInArray=[];for(e=0;e<this.itemsAmount;e+=1)b+=this.itemWidth,this.positionsInArray.push(-b),!0===this.options.scrollPerPage&&(c=f(this.$owlItems[e]),
c=c.data("owl-roundPages"),c!==a&&(this.pagesInArray[a]=this.positionsInArray[e],a=c))},buildControls:function(){if(!0===this.options.navigation||!0===this.options.pagination)this.owlControls=f('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem);!0===this.options.pagination&&this.buildPagination();!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var a=this,b=f('<div class="owl-buttons"/>');a.owlControls.append(b);a.buttonPrev=
f("<div/>",{"class":"owl-prev",html:a.options.navigationText[0]||""});a.buttonNext=f("<div/>",{"class":"owl-next",html:a.options.navigationText[1]||""});b.append(a.buttonPrev).append(a.buttonNext);b.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(a){a.preventDefault()});b.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(b){b.preventDefault();f(this).hasClass("owl-next")?a.next():a.prev()})},buildPagination:function(){var a=this;a.paginationWrapper=
f('<div class="owl-pagination"/>');a.owlControls.append(a.paginationWrapper);a.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(b){b.preventDefault();Number(f(this).data("owl-page"))!==a.currentItem&&a.goTo(Number(f(this).data("owl-page")),!0)})},updatePagination:function(){var a,b,e,c,d,g;if(!1===this.options.pagination)return!1;this.paginationWrapper.html("");a=0;b=this.itemsAmount-this.itemsAmount%this.options.items;for(c=0;c<this.itemsAmount;c+=1)0===c%this.options.items&&
(a+=1,b===c&&(e=this.itemsAmount-this.options.items),d=f("<div/>",{"class":"owl-page"}),g=f("<span></span>",{text:!0===this.options.paginationNumbers?a:"","class":!0===this.options.paginationNumbers?"owl-numbers":""}),d.append(g),d.data("owl-page",b===c?e:c),d.data("owl-roundPages",a),this.paginationWrapper.append(d));this.checkPagination()},checkPagination:function(){var a=this;if(!1===a.options.pagination)return!1;a.paginationWrapper.find(".owl-page").each(function(){f(this).data("owl-roundPages")===
f(a.$owlItems[a.currentItem]).data("owl-roundPages")&&(a.paginationWrapper.find(".owl-page").removeClass("active"),f(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===
this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination();this.checkNavigation();this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(a){if(this.isTransition)return!1;
this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1;if(this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0))if(!0===this.options.rewindNav)this.currentItem=0,a="rewind";else return this.currentItem=this.maximumItem,!1;this.goTo(this.currentItem,a)},prev:function(a){if(this.isTransition)return!1;this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?
this.options.items:1);if(0>this.currentItem)if(!0===this.options.rewindNav)this.currentItem=this.maximumItem,a="rewind";else return this.currentItem=0,!1;this.goTo(this.currentItem,a)},goTo:function(a,b,e){var c=this;if(c.isTransition)return!1;"function"===typeof c.options.beforeMove&&c.options.beforeMove.apply(this,[c.$elem]);a>=c.maximumItem?a=c.maximumItem:0>=a&&(a=0);c.currentItem=c.owl.currentItem=a;if(!1!==c.options.transitionStyle&&"drag"!==e&&1===c.options.items&&!0===c.browser.support3d)return c.swapSpeed(0),
!0===c.browser.support3d?c.transition3d(c.positionsInArray[a]):c.css2slide(c.positionsInArray[a],1),c.afterGo(),c.singleItemTransition(),!1;a=c.positionsInArray[a];!0===c.browser.support3d?(c.isCss3Finish=!1,!0===b?(c.swapSpeed("paginationSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.paginationSpeed)):"rewind"===b?(c.swapSpeed(c.options.rewindSpeed),g.setTimeout(function(){c.isCss3Finish=!0},c.options.rewindSpeed)):(c.swapSpeed("slideSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},
c.options.slideSpeed)),c.transition3d(a)):!0===b?c.css2slide(a,c.options.paginationSpeed):"rewind"===b?c.css2slide(a,c.options.rewindSpeed):c.css2slide(a,c.options.slideSpeed);c.afterGo()},jumpTo:function(a){"function"===typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]);a>=this.maximumItem||-1===a?a=this.maximumItem:0>=a&&(a=0);this.swapSpeed(0);!0===this.browser.support3d?this.transition3d(this.positionsInArray[a]):this.css2slide(this.positionsInArray[a],1);this.currentItem=
this.owl.currentItem=a;this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem);this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2];this.prevArr.shift(0);this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp());"function"===typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop";g.clearInterval(this.autoPlayInterval)},
checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var a=this;a.apStatus="play";if(!1===a.options.autoPlay)return!1;g.clearInterval(a.autoPlayInterval);a.autoPlayInterval=g.setInterval(function(){a.next(!0)},a.options.autoPlay)},swapSpeed:function(a){"slideSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!==typeof a&&this.$owlWrapper.css(this.addCssSpeed(a))},
addCssSpeed:function(a){return{"-webkit-transition":"all "+a+"ms ease","-moz-transition":"all "+a+"ms ease","-o-transition":"all "+a+"ms ease",transition:"all "+a+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(a){return{"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-moz-transform":"translate3d("+a+"px, 0px, 0px)","-o-transform":"translate3d("+a+"px, 0px, 0px)","-ms-transform":"translate3d("+
a+"px, 0px, 0px)",transform:"translate3d("+a+"px, 0px,0px)"}},transition3d:function(a){this.$owlWrapper.css(this.doTranslate(a))},css2move:function(a){this.$owlWrapper.css({left:a})},css2slide:function(a,b){var e=this;e.isCssFinish=!1;e.$owlWrapper.stop(!0,!0).animate({left:a},{duration:b||e.options.slideSpeed,complete:function(){e.isCssFinish=!0}})},checkBrowser:function(){var a=k.createElement("div");a.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)";
a=a.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g);this.browser={support3d:null!==a&&1===a.length,isTouch:"ontouchstart"in g||g.navigator.msMaxTouchPoints}},moveEvents:function(){if(!1!==this.options.mouseDrag||!1!==this.options.touchDrag)this.gestures(),this.disabledEvents()},eventTypes:function(){var a=["s","e","x"];this.ev_types={};!0===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:
!1===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(a=["mousedown.owl","mousemove.owl","mouseup.owl"]);this.ev_types.start=a[0];this.ev_types.move=a[1];this.ev_types.end=a[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(a){a.preventDefault()});this.$elem.on("mousedown.disableTextSelect",function(a){return f(a.target).is("input, textarea, select, option")})},
gestures:function(){function a(a){if(void 0!==a.touches)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(void 0===a.touches){if(void 0!==a.pageX)return{x:a.pageX,y:a.pageY};if(void 0===a.pageX)return{x:a.clientX,y:a.clientY}}}function b(a){"on"===a?(f(k).on(d.ev_types.move,e),f(k).on(d.ev_types.end,c)):"off"===a&&(f(k).off(d.ev_types.move),f(k).off(d.ev_types.end))}function e(b){b=b.originalEvent||b||g.event;d.newPosX=a(b).x-h.offsetX;d.newPosY=a(b).y-h.offsetY;d.newRelativeX=d.newPosX-h.relativePos;
"function"===typeof d.options.startDragging&&!0!==h.dragging&&0!==d.newRelativeX&&(h.dragging=!0,d.options.startDragging.apply(d,[d.$elem]));(8<d.newRelativeX||-8>d.newRelativeX)&&!0===d.browser.isTouch&&(void 0!==b.preventDefault?b.preventDefault():b.returnValue=!1,h.sliding=!0);(10<d.newPosY||-10>d.newPosY)&&!1===h.sliding&&f(k).off("touchmove.owl");d.newPosX=Math.max(Math.min(d.newPosX,d.newRelativeX/5),d.maximumPixels+d.newRelativeX/5);!0===d.browser.support3d?d.transition3d(d.newPosX):d.css2move(d.newPosX)}
function c(a){a=a.originalEvent||a||g.event;var c;a.target=a.target||a.srcElement;h.dragging=!1;!0!==d.browser.isTouch&&d.$owlWrapper.removeClass("grabbing");d.dragDirection=0>d.newRelativeX?d.owl.dragDirection="left":d.owl.dragDirection="right";0!==d.newRelativeX&&(c=d.getNewPosition(),d.goTo(c,!1,"drag"),h.targetElement===a.target&&!0!==d.browser.isTouch&&(f(a.target).on("click.disable",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();f(a.target).off("click.disable")}),
a=f._data(a.target,"events").click,c=a.pop(),a.splice(0,0,c)));b("off")}var d=this,h={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};d.isCssFinish=!0;d.$elem.on(d.ev_types.start,".owl-wrapper",function(c){c=c.originalEvent||c||g.event;var e;if(3===c.which)return!1;if(!(d.itemsAmount<=d.options.items)){if(!1===d.isCssFinish&&!d.options.dragBeforeAnimFinish||!1===d.isCss3Finish&&!d.options.dragBeforeAnimFinish)return!1;
!1!==d.options.autoPlay&&g.clearInterval(d.autoPlayInterval);!0===d.browser.isTouch||d.$owlWrapper.hasClass("grabbing")||d.$owlWrapper.addClass("grabbing");d.newPosX=0;d.newRelativeX=0;f(this).css(d.removeTransition());e=f(this).position();h.relativePos=e.left;h.offsetX=a(c).x-e.left;h.offsetY=a(c).y-e.top;b("on");h.sliding=!1;h.targetElement=c.target||c.srcElement}})},getNewPosition:function(){var a=this.closestItem();a>this.maximumItem?a=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=
a=0);return a},closestItem:function(){var a=this,b=!0===a.options.scrollPerPage?a.pagesInArray:a.positionsInArray,e=a.newPosX,c=null;f.each(b,function(d,g){e-a.itemWidth/20>b[d+1]&&e-a.itemWidth/20<g&&"left"===a.moveDirection()?(c=g,a.currentItem=!0===a.options.scrollPerPage?f.inArray(c,a.positionsInArray):d):e+a.itemWidth/20<g&&e+a.itemWidth/20>(b[d+1]||b[d]-a.itemWidth)&&"right"===a.moveDirection()&&(!0===a.options.scrollPerPage?(c=b[d+1]||b[b.length-1],a.currentItem=f.inArray(c,a.positionsInArray)):
(c=b[d+1],a.currentItem=d+1))});return a.currentItem},moveDirection:function(){var a;0>this.newRelativeX?(a="right",this.playDirection="next"):(a="left",this.playDirection="prev");return a},customEvents:function(){var a=this;a.$elem.on("owl.next",function(){a.next()});a.$elem.on("owl.prev",function(){a.prev()});a.$elem.on("owl.play",function(b,e){a.options.autoPlay=e;a.play();a.hoverStatus="play"});a.$elem.on("owl.stop",function(){a.stop();a.hoverStatus="stop"});a.$elem.on("owl.goTo",function(b,e){a.goTo(e)});
a.$elem.on("owl.jumpTo",function(b,e){a.jumpTo(e)})},stopOnHover:function(){var a=this;!0===a.options.stopOnHover&&!0!==a.browser.isTouch&&!1!==a.options.autoPlay&&(a.$elem.on("mouseover",function(){a.stop()}),a.$elem.on("mouseout",function(){"stop"!==a.hoverStatus&&a.play()}))},lazyLoad:function(){var a,b,e,c,d;if(!1===this.options.lazyLoad)return!1;for(a=0;a<this.itemsAmount;a+=1)b=f(this.$owlItems[a]),"loaded"!==b.data("owl-loaded")&&(e=b.data("owl-item"),c=b.find(".lazyOwl"),"string"!==typeof c.data("src")?
b.data("owl-loaded","loaded"):(void 0===b.data("owl-loaded")&&(c.hide(),b.addClass("loading").data("owl-loaded","checked")),(d=!0===this.options.lazyFollow?e>=this.currentItem:!0)&&e<this.currentItem+this.options.items&&c.length&&this.lazyPreload(b,c)))},lazyPreload:function(a,b){function e(){a.data("owl-loaded","loaded").removeClass("loading");b.removeAttr("data-src");"fade"===d.options.lazyEffect?b.fadeIn(400):b.show();"function"===typeof d.options.afterLazyLoad&&d.options.afterLazyLoad.apply(this,
[d.$elem])}function c(){f+=1;d.completeImg(b.get(0))||!0===k?e():100>=f?g.setTimeout(c,100):e()}var d=this,f=0,k;"DIV"===b.prop("tagName")?(b.css("background-image","url("+b.data("src")+")"),k=!0):b[0].src=b.data("src");c()},autoHeight:function(){function a(){var a=f(e.$owlItems[e.currentItem]).height();e.wrapperOuter.css("height",a+"px");e.wrapperOuter.hasClass("autoHeight")||g.setTimeout(function(){e.wrapperOuter.addClass("autoHeight")},0)}function b(){d+=1;e.completeImg(c.get(0))?a():100>=d?g.setTimeout(b,
100):e.wrapperOuter.css("height","")}var e=this,c=f(e.$owlItems[e.currentItem]).find("img"),d;void 0!==c.get(0)?(d=0,b()):a()},completeImg:function(a){return!a.complete||"undefined"!==typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},onVisibleItems:function(){var a;!0===this.options.addClassActive&&this.$owlItems.removeClass("active");this.visibleItems=[];for(a=this.currentItem;a<this.currentItem+this.options.items;a+=1)this.visibleItems.push(a),!0===this.options.addClassActive&&f(this.$owlItems[a]).addClass("active");
this.owl.visibleItems=this.visibleItems},transitionTypes:function(a){this.outClass="owl-"+a+"-out";this.inClass="owl-"+a+"-in"},singleItemTransition:function(){var a=this,b=a.outClass,e=a.inClass,c=a.$owlItems.eq(a.currentItem),d=a.$owlItems.eq(a.prevItem),f=Math.abs(a.positionsInArray[a.currentItem])+a.positionsInArray[a.prevItem],g=Math.abs(a.positionsInArray[a.currentItem])+a.itemWidth/2;a.isTransition=!0;a.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":g+"px","-moz-perspective-origin":g+
"px","perspective-origin":g+"px"});d.css({position:"relative",left:f+"px"}).addClass(b).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endPrev=!0;d.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(d,b)});c.addClass(e).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endCurrent=!0;c.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(c,e)})},clearTransStyle:function(a,
b){a.css({position:"",left:""}).removeClass(b);this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect");
f(k).off(".owl owl");f(g).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove());this.clearEvents();this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop();g.clearInterval(this.checkVisible);this.unWrap();this.$elem.removeData()},reinit:function(a){a=f.extend({},this.userOptions,
a);this.unWrap();this.init(a,this.$elem)},addItem:function(a,b){var e;if(!a)return!1;if(0===this.$elem.children().length)return this.$elem.append(a),this.setVars(),!1;this.unWrap();e=void 0===b||-1===b?-1:b;e>=this.$userItems.length||-1===e?this.$userItems.eq(-1).after(a):this.$userItems.eq(e).before(a);this.setVars()},removeItem:function(a){if(0===this.$elem.children().length)return!1;a=void 0===a||-1===a?-1:a;this.unWrap();this.$userItems.eq(a).remove();this.setVars()}};f.fn.owlCarousel=function(a){return this.each(function(){if(!0===
f(this).data("owl-init"))return!1;f(this).data("owl-init",!0);var b=Object.create(l);b.init(a,this);f.data(this,"owlCarousel",b)})};f.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1E3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,
responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:g,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}})(jQuery,window,document);

},{}],4:[function(require,module,exports){
module.exports = {
    "loadjQueryPlugin": function() {require("./owl.carousel.min.js");}
};

},{"./owl.carousel.min.js":3}],5:[function(require,module,exports){
'use strict';

exports.__esModule = true;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

// istanbul ignore next

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }

var _handlebarsBase = require('./handlebars/base');

var base = _interopRequireWildcard(_handlebarsBase);

// Each of these augment the Handlebars object. No need to setup here.
// (This is done to easily share code between commonjs and browse envs)

var _handlebarsSafeString = require('./handlebars/safe-string');

var _handlebarsSafeString2 = _interopRequireDefault(_handlebarsSafeString);

var _handlebarsException = require('./handlebars/exception');

var _handlebarsException2 = _interopRequireDefault(_handlebarsException);

var _handlebarsUtils = require('./handlebars/utils');

var Utils = _interopRequireWildcard(_handlebarsUtils);

var _handlebarsRuntime = require('./handlebars/runtime');

var runtime = _interopRequireWildcard(_handlebarsRuntime);

var _handlebarsNoConflict = require('./handlebars/no-conflict');

var _handlebarsNoConflict2 = _interopRequireDefault(_handlebarsNoConflict);

// For compatibility and usage outside of module systems, make the Handlebars object a namespace
function create() {
  var hb = new base.HandlebarsEnvironment();

  Utils.extend(hb, base);
  hb.SafeString = _handlebarsSafeString2['default'];
  hb.Exception = _handlebarsException2['default'];
  hb.Utils = Utils;
  hb.escapeExpression = Utils.escapeExpression;

  hb.VM = runtime;
  hb.template = function (spec) {
    return runtime.template(spec, hb);
  };

  return hb;
}

var inst = create();
inst.create = create;

_handlebarsNoConflict2['default'](inst);

inst['default'] = inst;

exports['default'] = inst;
module.exports = exports['default'];


},{"./handlebars/base":6,"./handlebars/exception":9,"./handlebars/no-conflict":19,"./handlebars/runtime":20,"./handlebars/safe-string":21,"./handlebars/utils":22}],6:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.HandlebarsEnvironment = HandlebarsEnvironment;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _utils = require('./utils');

var _exception = require('./exception');

var _exception2 = _interopRequireDefault(_exception);

var _helpers = require('./helpers');

var _decorators = require('./decorators');

var _logger = require('./logger');

var _logger2 = _interopRequireDefault(_logger);

var VERSION = '4.0.5';
exports.VERSION = VERSION;
var COMPILER_REVISION = 7;

exports.COMPILER_REVISION = COMPILER_REVISION;
var REVISION_CHANGES = {
  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it
  2: '== 1.0.0-rc.3',
  3: '== 1.0.0-rc.4',
  4: '== 1.x.x',
  5: '== 2.0.0-alpha.x',
  6: '>= 2.0.0-beta.1',
  7: '>= 4.0.0'
};

exports.REVISION_CHANGES = REVISION_CHANGES;
var objectType = '[object Object]';

function HandlebarsEnvironment(helpers, partials, decorators) {
  this.helpers = helpers || {};
  this.partials = partials || {};
  this.decorators = decorators || {};

  _helpers.registerDefaultHelpers(this);
  _decorators.registerDefaultDecorators(this);
}

HandlebarsEnvironment.prototype = {
  constructor: HandlebarsEnvironment,

  logger: _logger2['default'],
  log: _logger2['default'].log,

  registerHelper: function registerHelper(name, fn) {
    if (_utils.toString.call(name) === objectType) {
      if (fn) {
        throw new _exception2['default']('Arg not supported with multiple helpers');
      }
      _utils.extend(this.helpers, name);
    } else {
      this.helpers[name] = fn;
    }
  },
  unregisterHelper: function unregisterHelper(name) {
    delete this.helpers[name];
  },

  registerPartial: function registerPartial(name, partial) {
    if (_utils.toString.call(name) === objectType) {
      _utils.extend(this.partials, name);
    } else {
      if (typeof partial === 'undefined') {
        throw new _exception2['default']('Attempting to register a partial called "' + name + '" as undefined');
      }
      this.partials[name] = partial;
    }
  },
  unregisterPartial: function unregisterPartial(name) {
    delete this.partials[name];
  },

  registerDecorator: function registerDecorator(name, fn) {
    if (_utils.toString.call(name) === objectType) {
      if (fn) {
        throw new _exception2['default']('Arg not supported with multiple decorators');
      }
      _utils.extend(this.decorators, name);
    } else {
      this.decorators[name] = fn;
    }
  },
  unregisterDecorator: function unregisterDecorator(name) {
    delete this.decorators[name];
  }
};

var log = _logger2['default'].log;

exports.log = log;
exports.createFrame = _utils.createFrame;
exports.logger = _logger2['default'];


},{"./decorators":7,"./exception":9,"./helpers":10,"./logger":18,"./utils":22}],7:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.registerDefaultDecorators = registerDefaultDecorators;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _decoratorsInline = require('./decorators/inline');

var _decoratorsInline2 = _interopRequireDefault(_decoratorsInline);

function registerDefaultDecorators(instance) {
  _decoratorsInline2['default'](instance);
}


},{"./decorators/inline":8}],8:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerDecorator('inline', function (fn, props, container, options) {
    var ret = fn;
    if (!props.partials) {
      props.partials = {};
      ret = function (context, options) {
        // Create a new partials stack frame prior to exec.
        var original = container.partials;
        container.partials = _utils.extend({}, original, props.partials);
        var ret = fn(context, options);
        container.partials = original;
        return ret;
      };
    }

    props.partials[options.args[0]] = options.fn;

    return ret;
  });
};

module.exports = exports['default'];


},{"../utils":22}],9:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];

function Exception(message, node) {
  var loc = node && node.loc,
      line = undefined,
      column = undefined;
  if (loc) {
    line = loc.start.line;
    column = loc.start.column;

    message += ' - ' + line + ':' + column;
  }

  var tmp = Error.prototype.constructor.call(this, message);

  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.
  for (var idx = 0; idx < errorProps.length; idx++) {
    this[errorProps[idx]] = tmp[errorProps[idx]];
  }

  /* istanbul ignore else */
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, Exception);
  }

  if (loc) {
    this.lineNumber = line;
    this.column = column;
  }
}

Exception.prototype = new Error();

exports['default'] = Exception;
module.exports = exports['default'];


},{}],10:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.registerDefaultHelpers = registerDefaultHelpers;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _helpersBlockHelperMissing = require('./helpers/block-helper-missing');

var _helpersBlockHelperMissing2 = _interopRequireDefault(_helpersBlockHelperMissing);

var _helpersEach = require('./helpers/each');

var _helpersEach2 = _interopRequireDefault(_helpersEach);

var _helpersHelperMissing = require('./helpers/helper-missing');

var _helpersHelperMissing2 = _interopRequireDefault(_helpersHelperMissing);

var _helpersIf = require('./helpers/if');

var _helpersIf2 = _interopRequireDefault(_helpersIf);

var _helpersLog = require('./helpers/log');

var _helpersLog2 = _interopRequireDefault(_helpersLog);

var _helpersLookup = require('./helpers/lookup');

var _helpersLookup2 = _interopRequireDefault(_helpersLookup);

var _helpersWith = require('./helpers/with');

var _helpersWith2 = _interopRequireDefault(_helpersWith);

function registerDefaultHelpers(instance) {
  _helpersBlockHelperMissing2['default'](instance);
  _helpersEach2['default'](instance);
  _helpersHelperMissing2['default'](instance);
  _helpersIf2['default'](instance);
  _helpersLog2['default'](instance);
  _helpersLookup2['default'](instance);
  _helpersWith2['default'](instance);
}


},{"./helpers/block-helper-missing":11,"./helpers/each":12,"./helpers/helper-missing":13,"./helpers/if":14,"./helpers/log":15,"./helpers/lookup":16,"./helpers/with":17}],11:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerHelper('blockHelperMissing', function (context, options) {
    var inverse = options.inverse,
        fn = options.fn;

    if (context === true) {
      return fn(this);
    } else if (context === false || context == null) {
      return inverse(this);
    } else if (_utils.isArray(context)) {
      if (context.length > 0) {
        if (options.ids) {
          options.ids = [options.name];
        }

        return instance.helpers.each(context, options);
      } else {
        return inverse(this);
      }
    } else {
      if (options.data && options.ids) {
        var data = _utils.createFrame(options.data);
        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.name);
        options = { data: data };
      }

      return fn(context, options);
    }
  });
};

module.exports = exports['default'];


},{"../utils":22}],12:[function(require,module,exports){
'use strict';

exports.__esModule = true;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _utils = require('../utils');

var _exception = require('../exception');

var _exception2 = _interopRequireDefault(_exception);

exports['default'] = function (instance) {
  instance.registerHelper('each', function (context, options) {
    if (!options) {
      throw new _exception2['default']('Must pass iterator to #each');
    }

    var fn = options.fn,
        inverse = options.inverse,
        i = 0,
        ret = '',
        data = undefined,
        contextPath = undefined;

    if (options.data && options.ids) {
      contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';
    }

    if (_utils.isFunction(context)) {
      context = context.call(this);
    }

    if (options.data) {
      data = _utils.createFrame(options.data);
    }

    function execIteration(field, index, last) {
      if (data) {
        data.key = field;
        data.index = index;
        data.first = index === 0;
        data.last = !!last;

        if (contextPath) {
          data.contextPath = contextPath + field;
        }
      }

      ret = ret + fn(context[field], {
        data: data,
        blockParams: _utils.blockParams([context[field], field], [contextPath + field, null])
      });
    }

    if (context && typeof context === 'object') {
      if (_utils.isArray(context)) {
        for (var j = context.length; i < j; i++) {
          if (i in context) {
            execIteration(i, i, i === context.length - 1);
          }
        }
      } else {
        var priorKey = undefined;

        for (var key in context) {
          if (context.hasOwnProperty(key)) {
            // We're running the iterations one step out of sync so we can detect
            // the last iteration without have to scan the object twice and create
            // an itermediate keys array.
            if (priorKey !== undefined) {
              execIteration(priorKey, i - 1);
            }
            priorKey = key;
            i++;
          }
        }
        if (priorKey !== undefined) {
          execIteration(priorKey, i - 1, true);
        }
      }
    }

    if (i === 0) {
      ret = inverse(this);
    }

    return ret;
  });
};

module.exports = exports['default'];


},{"../exception":9,"../utils":22}],13:[function(require,module,exports){
'use strict';

exports.__esModule = true;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _exception = require('../exception');

var _exception2 = _interopRequireDefault(_exception);

exports['default'] = function (instance) {
  instance.registerHelper('helperMissing', function () /* [args, ]options */{
    if (arguments.length === 1) {
      // A missing field in a {{foo}} construct.
      return undefined;
    } else {
      // Someone is actually trying to call something, blow up.
      throw new _exception2['default']('Missing helper: "' + arguments[arguments.length - 1].name + '"');
    }
  });
};

module.exports = exports['default'];


},{"../exception":9}],14:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerHelper('if', function (conditional, options) {
    if (_utils.isFunction(conditional)) {
      conditional = conditional.call(this);
    }

    // Default behavior is to render the positive path if the value is truthy and not empty.
    // The `includeZero` option may be set to treat the condtional as purely not empty based on the
    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.
    if (!options.hash.includeZero && !conditional || _utils.isEmpty(conditional)) {
      return options.inverse(this);
    } else {
      return options.fn(this);
    }
  });

  instance.registerHelper('unless', function (conditional, options) {
    return instance.helpers['if'].call(this, conditional, { fn: options.inverse, inverse: options.fn, hash: options.hash });
  });
};

module.exports = exports['default'];


},{"../utils":22}],15:[function(require,module,exports){
'use strict';

exports.__esModule = true;

exports['default'] = function (instance) {
  instance.registerHelper('log', function () /* message, options */{
    var args = [undefined],
        options = arguments[arguments.length - 1];
    for (var i = 0; i < arguments.length - 1; i++) {
      args.push(arguments[i]);
    }

    var level = 1;
    if (options.hash.level != null) {
      level = options.hash.level;
    } else if (options.data && options.data.level != null) {
      level = options.data.level;
    }
    args[0] = level;

    instance.log.apply(instance, args);
  });
};

module.exports = exports['default'];


},{}],16:[function(require,module,exports){
'use strict';

exports.__esModule = true;

exports['default'] = function (instance) {
  instance.registerHelper('lookup', function (obj, field) {
    return obj && obj[field];
  });
};

module.exports = exports['default'];


},{}],17:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerHelper('with', function (context, options) {
    if (_utils.isFunction(context)) {
      context = context.call(this);
    }

    var fn = options.fn;

    if (!_utils.isEmpty(context)) {
      var data = options.data;
      if (options.data && options.ids) {
        data = _utils.createFrame(options.data);
        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]);
      }

      return fn(context, {
        data: data,
        blockParams: _utils.blockParams([context], [data && data.contextPath])
      });
    } else {
      return options.inverse(this);
    }
  });
};

module.exports = exports['default'];


},{"../utils":22}],18:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('./utils');

var logger = {
  methodMap: ['debug', 'info', 'warn', 'error'],
  level: 'info',

  // Maps a given level value to the `methodMap` indexes above.
  lookupLevel: function lookupLevel(level) {
    if (typeof level === 'string') {
      var levelMap = _utils.indexOf(logger.methodMap, level.toLowerCase());
      if (levelMap >= 0) {
        level = levelMap;
      } else {
        level = parseInt(level, 10);
      }
    }

    return level;
  },

  // Can be overridden in the host environment
  log: function log(level) {
    level = logger.lookupLevel(level);

    if (typeof console !== 'undefined' && logger.lookupLevel(logger.level) <= level) {
      var method = logger.methodMap[level];
      if (!console[method]) {
        // eslint-disable-line no-console
        method = 'log';
      }

      for (var _len = arguments.length, message = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        message[_key - 1] = arguments[_key];
      }

      console[method].apply(console, message); // eslint-disable-line no-console
    }
  }
};

exports['default'] = logger;
module.exports = exports['default'];


},{"./utils":22}],19:[function(require,module,exports){
(function (global){
/* global window */
'use strict';

exports.__esModule = true;

exports['default'] = function (Handlebars) {
  /* istanbul ignore next */
  var root = typeof global !== 'undefined' ? global : window,
      $Handlebars = root.Handlebars;
  /* istanbul ignore next */
  Handlebars.noConflict = function () {
    if (root.Handlebars === Handlebars) {
      root.Handlebars = $Handlebars;
    }
    return Handlebars;
  };
};

module.exports = exports['default'];


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],20:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.checkRevision = checkRevision;
exports.template = template;
exports.wrapProgram = wrapProgram;
exports.resolvePartial = resolvePartial;
exports.invokePartial = invokePartial;
exports.noop = noop;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

// istanbul ignore next

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }

var _utils = require('./utils');

var Utils = _interopRequireWildcard(_utils);

var _exception = require('./exception');

var _exception2 = _interopRequireDefault(_exception);

var _base = require('./base');

function checkRevision(compilerInfo) {
  var compilerRevision = compilerInfo && compilerInfo[0] || 1,
      currentRevision = _base.COMPILER_REVISION;

  if (compilerRevision !== currentRevision) {
    if (compilerRevision < currentRevision) {
      var runtimeVersions = _base.REVISION_CHANGES[currentRevision],
          compilerVersions = _base.REVISION_CHANGES[compilerRevision];
      throw new _exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. ' + 'Please update your precompiler to a newer version (' + runtimeVersions + ') or downgrade your runtime to an older version (' + compilerVersions + ').');
    } else {
      // Use the embedded version info since the runtime doesn't know about this revision yet
      throw new _exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. ' + 'Please update your runtime to a newer version (' + compilerInfo[1] + ').');
    }
  }
}

function template(templateSpec, env) {
  /* istanbul ignore next */
  if (!env) {
    throw new _exception2['default']('No environment passed to template');
  }
  if (!templateSpec || !templateSpec.main) {
    throw new _exception2['default']('Unknown template object: ' + typeof templateSpec);
  }

  templateSpec.main.decorator = templateSpec.main_d;

  // Note: Using env.VM references rather than local var references throughout this section to allow
  // for external users to override these as psuedo-supported APIs.
  env.VM.checkRevision(templateSpec.compiler);

  function invokePartialWrapper(partial, context, options) {
    if (options.hash) {
      context = Utils.extend({}, context, options.hash);
      if (options.ids) {
        options.ids[0] = true;
      }
    }

    partial = env.VM.resolvePartial.call(this, partial, context, options);
    var result = env.VM.invokePartial.call(this, partial, context, options);

    if (result == null && env.compile) {
      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);
      result = options.partials[options.name](context, options);
    }
    if (result != null) {
      if (options.indent) {
        var lines = result.split('\n');
        for (var i = 0, l = lines.length; i < l; i++) {
          if (!lines[i] && i + 1 === l) {
            break;
          }

          lines[i] = options.indent + lines[i];
        }
        result = lines.join('\n');
      }
      return result;
    } else {
      throw new _exception2['default']('The partial ' + options.name + ' could not be compiled when running in runtime-only mode');
    }
  }

  // Just add water
  var container = {
    strict: function strict(obj, name) {
      if (!(name in obj)) {
        throw new _exception2['default']('"' + name + '" not defined in ' + obj);
      }
      return obj[name];
    },
    lookup: function lookup(depths, name) {
      var len = depths.length;
      for (var i = 0; i < len; i++) {
        if (depths[i] && depths[i][name] != null) {
          return depths[i][name];
        }
      }
    },
    lambda: function lambda(current, context) {
      return typeof current === 'function' ? current.call(context) : current;
    },

    escapeExpression: Utils.escapeExpression,
    invokePartial: invokePartialWrapper,

    fn: function fn(i) {
      var ret = templateSpec[i];
      ret.decorator = templateSpec[i + '_d'];
      return ret;
    },

    programs: [],
    program: function program(i, data, declaredBlockParams, blockParams, depths) {
      var programWrapper = this.programs[i],
          fn = this.fn(i);
      if (data || depths || blockParams || declaredBlockParams) {
        programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);
      } else if (!programWrapper) {
        programWrapper = this.programs[i] = wrapProgram(this, i, fn);
      }
      return programWrapper;
    },

    data: function data(value, depth) {
      while (value && depth--) {
        value = value._parent;
      }
      return value;
    },
    merge: function merge(param, common) {
      var obj = param || common;

      if (param && common && param !== common) {
        obj = Utils.extend({}, common, param);
      }

      return obj;
    },

    noop: env.VM.noop,
    compilerInfo: templateSpec.compiler
  };

  function ret(context) {
    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    var data = options.data;

    ret._setup(options);
    if (!options.partial && templateSpec.useData) {
      data = initData(context, data);
    }
    var depths = undefined,
        blockParams = templateSpec.useBlockParams ? [] : undefined;
    if (templateSpec.useDepths) {
      if (options.depths) {
        depths = context !== options.depths[0] ? [context].concat(options.depths) : options.depths;
      } else {
        depths = [context];
      }
    }

    function main(context /*, options*/) {
      return '' + templateSpec.main(container, context, container.helpers, container.partials, data, blockParams, depths);
    }
    main = executeDecorators(templateSpec.main, main, container, options.depths || [], data, blockParams);
    return main(context, options);
  }
  ret.isTop = true;

  ret._setup = function (options) {
    if (!options.partial) {
      container.helpers = container.merge(options.helpers, env.helpers);

      if (templateSpec.usePartial) {
        container.partials = container.merge(options.partials, env.partials);
      }
      if (templateSpec.usePartial || templateSpec.useDecorators) {
        container.decorators = container.merge(options.decorators, env.decorators);
      }
    } else {
      container.helpers = options.helpers;
      container.partials = options.partials;
      container.decorators = options.decorators;
    }
  };

  ret._child = function (i, data, blockParams, depths) {
    if (templateSpec.useBlockParams && !blockParams) {
      throw new _exception2['default']('must pass block params');
    }
    if (templateSpec.useDepths && !depths) {
      throw new _exception2['default']('must pass parent depths');
    }

    return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);
  };
  return ret;
}

function wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {
  function prog(context) {
    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    var currentDepths = depths;
    if (depths && context !== depths[0]) {
      currentDepths = [context].concat(depths);
    }

    return fn(container, context, container.helpers, container.partials, options.data || data, blockParams && [options.blockParams].concat(blockParams), currentDepths);
  }

  prog = executeDecorators(fn, prog, container, depths, data, blockParams);

  prog.program = i;
  prog.depth = depths ? depths.length : 0;
  prog.blockParams = declaredBlockParams || 0;
  return prog;
}

function resolvePartial(partial, context, options) {
  if (!partial) {
    if (options.name === '@partial-block') {
      partial = options.data['partial-block'];
    } else {
      partial = options.partials[options.name];
    }
  } else if (!partial.call && !options.name) {
    // This is a dynamic partial that returned a string
    options.name = partial;
    partial = options.partials[partial];
  }
  return partial;
}

function invokePartial(partial, context, options) {
  options.partial = true;
  if (options.ids) {
    options.data.contextPath = options.ids[0] || options.data.contextPath;
  }

  var partialBlock = undefined;
  if (options.fn && options.fn !== noop) {
    options.data = _base.createFrame(options.data);
    partialBlock = options.data['partial-block'] = options.fn;

    if (partialBlock.partials) {
      options.partials = Utils.extend({}, options.partials, partialBlock.partials);
    }
  }

  if (partial === undefined && partialBlock) {
    partial = partialBlock;
  }

  if (partial === undefined) {
    throw new _exception2['default']('The partial ' + options.name + ' could not be found');
  } else if (partial instanceof Function) {
    return partial(context, options);
  }
}

function noop() {
  return '';
}

function initData(context, data) {
  if (!data || !('root' in data)) {
    data = data ? _base.createFrame(data) : {};
    data.root = context;
  }
  return data;
}

function executeDecorators(fn, prog, container, depths, data, blockParams) {
  if (fn.decorator) {
    var props = {};
    prog = fn.decorator(prog, props, container, depths && depths[0], data, blockParams, depths);
    Utils.extend(prog, props);
  }
  return prog;
}


},{"./base":6,"./exception":9,"./utils":22}],21:[function(require,module,exports){
// Build out our basic SafeString type
'use strict';

exports.__esModule = true;
function SafeString(string) {
  this.string = string;
}

SafeString.prototype.toString = SafeString.prototype.toHTML = function () {
  return '' + this.string;
};

exports['default'] = SafeString;
module.exports = exports['default'];


},{}],22:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.extend = extend;
exports.indexOf = indexOf;
exports.escapeExpression = escapeExpression;
exports.isEmpty = isEmpty;
exports.createFrame = createFrame;
exports.blockParams = blockParams;
exports.appendContextPath = appendContextPath;
var escape = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#x27;',
  '`': '&#x60;',
  '=': '&#x3D;'
};

var badChars = /[&<>"'`=]/g,
    possible = /[&<>"'`=]/;

function escapeChar(chr) {
  return escape[chr];
}

function extend(obj /* , ...source */) {
  for (var i = 1; i < arguments.length; i++) {
    for (var key in arguments[i]) {
      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {
        obj[key] = arguments[i][key];
      }
    }
  }

  return obj;
}

var toString = Object.prototype.toString;

exports.toString = toString;
// Sourced from lodash
// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt
/* eslint-disable func-style */
var isFunction = function isFunction(value) {
  return typeof value === 'function';
};
// fallback for older versions of Chrome and Safari
/* istanbul ignore next */
if (isFunction(/x/)) {
  exports.isFunction = isFunction = function (value) {
    return typeof value === 'function' && toString.call(value) === '[object Function]';
  };
}
exports.isFunction = isFunction;

/* eslint-enable func-style */

/* istanbul ignore next */
var isArray = Array.isArray || function (value) {
  return value && typeof value === 'object' ? toString.call(value) === '[object Array]' : false;
};

exports.isArray = isArray;
// Older IE versions do not directly support indexOf so we must implement our own, sadly.

function indexOf(array, value) {
  for (var i = 0, len = array.length; i < len; i++) {
    if (array[i] === value) {
      return i;
    }
  }
  return -1;
}

function escapeExpression(string) {
  if (typeof string !== 'string') {
    // don't escape SafeStrings, since they're already safe
    if (string && string.toHTML) {
      return string.toHTML();
    } else if (string == null) {
      return '';
    } else if (!string) {
      return string + '';
    }

    // Force a string conversion as this will be done by the append regardless and
    // the regex test will do this transparently behind the scenes, causing issues if
    // an object's to string has escaped characters in it.
    string = '' + string;
  }

  if (!possible.test(string)) {
    return string;
  }
  return string.replace(badChars, escapeChar);
}

function isEmpty(value) {
  if (!value && value !== 0) {
    return true;
  } else if (isArray(value) && value.length === 0) {
    return true;
  } else {
    return false;
  }
}

function createFrame(object) {
  var frame = extend({}, object);
  frame._parent = object;
  return frame;
}

function blockParams(params, ids) {
  params.path = ids;
  return params;
}

function appendContextPath(contextPath, id) {
  return (contextPath ? contextPath + '.' : '') + id;
}


},{}],23:[function(require,module,exports){
// Create a simple path alias to allow browserify to resolve
// the runtime on a supported path.
module.exports = require('./dist/cjs/handlebars.runtime')['default'];

},{"./dist/cjs/handlebars.runtime":5}],24:[function(require,module,exports){
module.exports = require("handlebars/runtime")["default"];

},{"handlebars/runtime":23}],25:[function(require,module,exports){
/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */

(function( global, factory ) {

	if ( typeof module === "object" && typeof module.exports === "object" ) {
		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
}(typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Support: Firefox 18+
// Can't be in strict mode, several libs including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
//

var arr = [];

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var support = {};



var
	// Use the correct document accordingly with window argument (sandbox)
	document = window.document,

	version = "2.1.4",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {
		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android<4.1
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

	// Matches dashed string for camelizing
	rmsPrefix = /^-ms-/,
	rdashAlpha = /-([\da-z])/gi,

	// Used by jQuery.camelCase as callback to replace()
	fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	};

jQuery.fn = jQuery.prototype = {
	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// Start with an empty selector
	selector: "",

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {
		return num != null ?

			// Return just the one element from the set
			( num < 0 ? this[ num + this.length ] : this[ num ] ) :

			// Return all the elements in a clean array
			slice.call( this );
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;
		ret.context = this.context;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	// (You can seed the arguments with an array of args, but this is
	// only used internally.)
	each: function( callback, args ) {
		return jQuery.each( this, callback, args );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map(this, function( elem, i ) {
			return callback.call( elem, i, elem );
		}));
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor(null);
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && jQuery.isArray(src) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend({
	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isFunction: function( obj ) {
		return jQuery.type(obj) === "function";
	},

	isArray: Array.isArray,

	isWindow: function( obj ) {
		return obj != null && obj === obj.window;
	},

	isNumeric: function( obj ) {
		// parseFloat NaNs numeric-cast false positives (null|true|false|"")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		// adding 1 corrects loss of precision from parseFloat (#15100)
		return !jQuery.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;
	},

	isPlainObject: function( obj ) {
		// Not plain objects:
		// - Any object or value whose internal [[Class]] property is not "[object Object]"
		// - DOM nodes
		// - window
		if ( jQuery.type( obj ) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
			return false;
		}

		if ( obj.constructor &&
				!hasOwn.call( obj.constructor.prototype, "isPrototypeOf" ) ) {
			return false;
		}

		// If the function hasn't returned already, we're confident that
		// |obj| is a plain object, created by {} or constructed with new Object
		return true;
	},

	isEmptyObject: function( obj ) {
		var name;
		for ( name in obj ) {
			return false;
		}
		return true;
	},

	type: function( obj ) {
		if ( obj == null ) {
			return obj + "";
		}
		// Support: Android<4.0, iOS<6 (functionish RegExp)
		return typeof obj === "object" || typeof obj === "function" ?
			class2type[ toString.call(obj) ] || "object" :
			typeof obj;
	},

	// Evaluates a script in a global context
	globalEval: function( code ) {
		var script,
			indirect = eval;

		code = jQuery.trim( code );

		if ( code ) {
			// If the code includes a valid, prologue position
			// strict mode pragma, execute code by injecting a
			// script tag into the document.
			if ( code.indexOf("use strict") === 1 ) {
				script = document.createElement("script");
				script.text = code;
				document.head.appendChild( script ).parentNode.removeChild( script );
			} else {
			// Otherwise, avoid the DOM node creation, insertion
			// and removal by using an indirect global eval
				indirect( code );
			}
		}
	},

	// Convert dashed to camelCase; used by the css and data modules
	// Support: IE9-11+
	// Microsoft forgot to hump their vendor prefix (#9572)
	camelCase: function( string ) {
		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	},

	nodeName: function( elem, name ) {
		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	},

	// args is for internal usage only
	each: function( obj, callback, args ) {
		var value,
			i = 0,
			length = obj.length,
			isArray = isArraylike( obj );

		if ( args ) {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			}

		// A special, fast, case for the most common use of each
		} else {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			}
		}

		return obj;
	},

	// Support: Android<4.1
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArraylike( Object(arr) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var value,
			i = 0,
			length = elems.length,
			isArray = isArraylike( elems ),
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArray ) {
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// Bind a function to a context, optionally partially applying any
	// arguments.
	proxy: function( fn, context ) {
		var tmp, args, proxy;

		if ( typeof context === "string" ) {
			tmp = fn[ context ];
			context = fn;
			fn = tmp;
		}

		// Quick check to determine if target is callable, in the spec
		// this throws a TypeError, but we will just return undefined.
		if ( !jQuery.isFunction( fn ) ) {
			return undefined;
		}

		// Simulated bind
		args = slice.call( arguments, 2 );
		proxy = function() {
			return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
		};

		// Set the guid of unique handler to the same of original handler, so it can be removed
		proxy.guid = fn.guid = fn.guid || jQuery.guid++;

		return proxy;
	},

	now: Date.now,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
});

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
});

function isArraylike( obj ) {

	// Support: iOS 8.2 (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = "length" in obj && obj.length,
		type = jQuery.type( obj );

	if ( type === "function" || jQuery.isWindow( obj ) ) {
		return false;
	}

	if ( obj.nodeType === 1 && length ) {
		return true;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// General-purpose constants
	MAX_NEGATIVE = 1 << 31,

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// http://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",
	// http://www.w3.org/TR/css3-syntax/#characters
	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	// Loosely modeled on CSS identifier characters
	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = characterEncoding.replace( "w", "w#" ),

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + characterEncoding + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,
	rescape = /'|\\/g,

	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	};

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var match, elem, m, nodeType,
		// QSA vars
		i, groups, old, nid, newContext, newSelector;

	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
		setDocument( context );
	}

	context = context || document;
	results = results || [];
	nodeType = context.nodeType;

	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	if ( !seed && documentIsHTML ) {

		// Try to shortcut find operations when possible (e.g., not under DocumentFragment)
		if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {
			// Speed-up: Sizzle("#ID")
			if ( (m = match[1]) ) {
				if ( nodeType === 9 ) {
					elem = context.getElementById( m );
					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document (jQuery #6963)
					if ( elem && elem.parentNode ) {
						// Handle the case where IE, Opera, and Webkit return items
						// by name instead of ID
						if ( elem.id === m ) {
							results.push( elem );
							return results;
						}
					} else {
						return results;
					}
				} else {
					// Context is not a document
					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
						contains( context, elem ) && elem.id === m ) {
						results.push( elem );
						return results;
					}
				}

			// Speed-up: Sizzle("TAG")
			} else if ( match[2] ) {
				push.apply( results, context.getElementsByTagName( selector ) );
				return results;

			// Speed-up: Sizzle(".CLASS")
			} else if ( (m = match[3]) && support.getElementsByClassName ) {
				push.apply( results, context.getElementsByClassName( m ) );
				return results;
			}
		}

		// QSA path
		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
			nid = old = expando;
			newContext = context;
			newSelector = nodeType !== 1 && selector;

			// qSA works strangely on Element-rooted queries
			// We can work around this by specifying an extra ID on the root
			// and working up from there (Thanks to Andrew Dupont for the technique)
			// IE 8 doesn't work on object elements
			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
				groups = tokenize( selector );

				if ( (old = context.getAttribute("id")) ) {
					nid = old.replace( rescape, "\\$&" );
				} else {
					context.setAttribute( "id", nid );
				}
				nid = "[id='" + nid + "'] ";

				i = groups.length;
				while ( i-- ) {
					groups[i] = nid + toSelector( groups[i] );
				}
				newContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;
				newSelector = groups.join(",");
			}

			if ( newSelector ) {
				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch(qsaError) {
				} finally {
					if ( !old ) {
						context.removeAttribute("id");
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return !!fn( div );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( div.parentNode ) {
			div.parentNode.removeChild( div );
		}
		// release memory in IE
		div = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = attrs.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			( ~b.sourceIndex || MAX_NEGATIVE ) -
			( ~a.sourceIndex || MAX_NEGATIVE );

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, parent,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// If no document and documentElement is available, return
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Set our document
	document = doc;
	docElem = doc.documentElement;
	parent = doc.defaultView;

	// Support: IE>8
	// If iframe document is assigned to "document" variable and if iframe has been reloaded,
	// IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
	// IE6-8 do not support the defaultView property so parent will be undefined
	if ( parent && parent !== parent.top ) {
		// IE11 does not have attachEvent, so all must suffer
		if ( parent.addEventListener ) {
			parent.addEventListener( "unload", unloadHandler, false );
		} else if ( parent.attachEvent ) {
			parent.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Support tests
	---------------------------------------------------------------------- */
	documentIsHTML = !isXML( doc );

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( div ) {
		div.className = "i";
		return !div.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( div ) {
		div.appendChild( doc.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( doc.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( div ) {
		docElem.appendChild( div ).id = expando;
		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
	});

	// ID find and filter
	if ( support.getById ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var m = context.getElementById( id );
				// Check parentNode to catch when Blackberry 4.6 returns
				// nodes that are no longer in the document #6963
				return m && m.parentNode ? [ m ] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		// Support: IE6/7
		// getElementById is not reliable as a find shortcut
		delete Expr.find["ID"];

		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See http://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( div ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// http://bugs.jquery.com/ticket/12359
			docElem.appendChild( div ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\f]' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( div.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+
			if ( !div.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibing-combinator selector` fails
			if ( !div.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( div ) {
			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = doc.createElement("input");
			input.setAttribute( "type", "hidden" );
			div.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( div.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( div, "div" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully does not implement inclusive descendent
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === doc ? -1 :
				b === doc ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return doc;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, outerCache, node, diff, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {
							// Seek `elem` from a previously-cached index
							outerCache = parent[ expando ] || (parent[ expando ] = {});
							cache = outerCache[ type ] || [];
							nodeIndex = cache[0] === dirruns && cache[1];
							diff = cache[0] === dirruns && cache[2];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						// Use previously-cached element index if available
						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
							diff = cache[1];

						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
						} else {
							// Use the same loop as above to seek `elem` from the start
							while ( (node = ++nodeIndex && node && node[ dir ] ||
								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
									// Cache the index of each encountered element
									if ( useCache ) {
										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
									}

									if ( node === elem ) {
										break;
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});
						if ( (oldCache = outerCache[ dir ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							outerCache[ dir ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context !== document && context;
			}

			// Add elements passing elementMatchers directly to results
			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// Apply set filters to unmatched elements
			matchedCount += i;
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is no seed and only one group
	if ( match.length === 1 ) {

		// Take a shortcut and set the context if the root selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				support.getById && context.nodeType === 9 && documentIsHTML &&
				Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( div1 ) {
	// Should return 1, but returns 4 (following)
	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( div ) {
	div.innerHTML = "<a href='#'></a>";
	return div.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( div ) {
	div.innerHTML = "<input/>";
	div.firstChild.setAttribute( "value", "" );
	return div.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( div ) {
	return div.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos;
jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;



var rneedsContext = jQuery.expr.match.needsContext;

var rsingleTag = (/^<(\w+)\s*\/?>(?:<\/\1>|)$/);



var risSimple = /^.[^:#\[\.,]*$/;

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( jQuery.isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			/* jshint -W018 */
			return !!qualifier.call( elem, i, elem ) !== not;
		});

	}

	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		});

	}

	if ( typeof qualifier === "string" ) {
		if ( risSimple.test( qualifier ) ) {
			return jQuery.filter( qualifier, elements, not );
		}

		qualifier = jQuery.filter( qualifier, elements );
	}

	return jQuery.grep( elements, function( elem ) {
		return ( indexOf.call( qualifier, elem ) >= 0 ) !== not;
	});
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	return elems.length === 1 && elem.nodeType === 1 ?
		jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
		jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
			return elem.nodeType === 1;
		}));
};

jQuery.fn.extend({
	find: function( selector ) {
		var i,
			len = this.length,
			ret = [],
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter(function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			}) );
		}

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		// Needed because $( selector, context ) becomes $( context ).find( selector )
		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
		ret.selector = this.selector ? this.selector + " " + selector : selector;
		return ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow(this, selector || [], false) );
	},
	not: function( selector ) {
		return this.pushStack( winnow(this, selector || [], true) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
});


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,

	init = jQuery.fn.init = function( selector, context ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[0] === "<" && selector[ selector.length - 1 ] === ">" && selector.length >= 3 ) {
				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && (match[1] || !context) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[1] ) {
					context = context instanceof jQuery ? context[0] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[1],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {
							// Properties of context are called as methods if possible
							if ( jQuery.isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[2] );

					// Support: Blackberry 4.6
					// gEBID returns nodes no longer in the document (#6963)
					if ( elem && elem.parentNode ) {
						// Inject the element directly into the jQuery object
						this.length = 1;
						this[0] = elem;
					}

					this.context = document;
					this.selector = selector;
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || rootjQuery ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this.context = this[0] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( jQuery.isFunction( selector ) ) {
			return typeof rootjQuery.ready !== "undefined" ?
				rootjQuery.ready( selector ) :
				// Execute immediately if ready is not present
				selector( jQuery );
		}

		if ( selector.selector !== undefined ) {
			this.selector = selector.selector;
			this.context = selector.context;
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,
	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.extend({
	dir: function( elem, dir, until ) {
		var matched = [],
			truncate = until !== undefined;

		while ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {
			if ( elem.nodeType === 1 ) {
				if ( truncate && jQuery( elem ).is( until ) ) {
					break;
				}
				matched.push( elem );
			}
		}
		return matched;
	},

	sibling: function( n, elem ) {
		var matched = [];

		for ( ; n; n = n.nextSibling ) {
			if ( n.nodeType === 1 && n !== elem ) {
				matched.push( n );
			}
		}

		return matched;
	}
});

jQuery.fn.extend({
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter(function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[i] ) ) {
					return true;
				}
			}
		});
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
				jQuery( selectors, context || this.context ) :
				0;

		for ( ; i < l; i++ ) {
			for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
				// Always skip document fragments
				if ( cur.nodeType < 11 && (pos ?
					pos.index(cur) > -1 :

					// Don't pass non-elements to Sizzle
					cur.nodeType === 1 &&
						jQuery.find.matchesSelector(cur, selectors)) ) {

					matched.push( cur );
					break;
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.unique(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter(selector)
		);
	}
});

function sibling( cur, dir ) {
	while ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each({
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return jQuery.dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return jQuery.dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return jQuery.dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return jQuery.sibling( elem.firstChild );
	},
	contents: function( elem ) {
		return elem.contentDocument || jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {
			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.unique( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
});
var rnotwhite = (/\S+/g);



// String to Object options format cache
var optionsCache = {};

// Convert String-formatted options into Object-formatted ones and store in cache
function createOptions( options ) {
	var object = optionsCache[ options ] = {};
	jQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	});
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		( optionsCache[ options ] || createOptions( options ) ) :
		jQuery.extend( {}, options );

	var // Last fire value (for non-forgettable lists)
		memory,
		// Flag to know if list was already fired
		fired,
		// Flag to know if list is currently firing
		firing,
		// First callback to fire (used internally by add and fireWith)
		firingStart,
		// End of the loop when firing
		firingLength,
		// Index of currently firing callback (modified by remove if needed)
		firingIndex,
		// Actual callback list
		list = [],
		// Stack of fire calls for repeatable lists
		stack = !options.once && [],
		// Fire callbacks
		fire = function( data ) {
			memory = options.memory && data;
			fired = true;
			firingIndex = firingStart || 0;
			firingStart = 0;
			firingLength = list.length;
			firing = true;
			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
					memory = false; // To prevent further calls using add
					break;
				}
			}
			firing = false;
			if ( list ) {
				if ( stack ) {
					if ( stack.length ) {
						fire( stack.shift() );
					}
				} else if ( memory ) {
					list = [];
				} else {
					self.disable();
				}
			}
		},
		// Actual Callbacks object
		self = {
			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {
					// First, we save the current length
					var start = list.length;
					(function add( args ) {
						jQuery.each( args, function( _, arg ) {
							var type = jQuery.type( arg );
							if ( type === "function" ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && type !== "string" ) {
								// Inspect recursively
								add( arg );
							}
						});
					})( arguments );
					// Do we need to add the callbacks to the
					// current firing batch?
					if ( firing ) {
						firingLength = list.length;
					// With memory, if we're not firing then
					// we should call right away
					} else if ( memory ) {
						firingStart = start;
						fire( memory );
					}
				}
				return this;
			},
			// Remove a callback from the list
			remove: function() {
				if ( list ) {
					jQuery.each( arguments, function( _, arg ) {
						var index;
						while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
							list.splice( index, 1 );
							// Handle firing indexes
							if ( firing ) {
								if ( index <= firingLength ) {
									firingLength--;
								}
								if ( index <= firingIndex ) {
									firingIndex--;
								}
							}
						}
					});
				}
				return this;
			},
			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
			},
			// Remove all callbacks from the list
			empty: function() {
				list = [];
				firingLength = 0;
				return this;
			},
			// Have the list do nothing anymore
			disable: function() {
				list = stack = memory = undefined;
				return this;
			},
			// Is it disabled?
			disabled: function() {
				return !list;
			},
			// Lock the list in its current state
			lock: function() {
				stack = undefined;
				if ( !memory ) {
					self.disable();
				}
				return this;
			},
			// Is it locked?
			locked: function() {
				return !stack;
			},
			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( list && ( !fired || stack ) ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					if ( firing ) {
						stack.push( args );
					} else {
						fire( args );
					}
				}
				return this;
			},
			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},
			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


jQuery.extend({

	Deferred: function( func ) {
		var tuples = [
				// action, add listener, listener list, final state
				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
				[ "notify", "progress", jQuery.Callbacks("memory") ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				then: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;
					return jQuery.Deferred(function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {
							var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
							// deferred[ done | fail | progress ] for forwarding actions to newDefer
							deferred[ tuple[1] ](function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && jQuery.isFunction( returned.promise ) ) {
									returned.promise()
										.done( newDefer.resolve )
										.fail( newDefer.reject )
										.progress( newDefer.notify );
								} else {
									newDefer[ tuple[ 0 ] + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
								}
							});
						});
						fns = null;
					}).promise();
				},
				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Keep pipe for back-compat
		promise.pipe = promise.then;

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 3 ];

			// promise[ done | fail | progress ] = list.add
			promise[ tuple[1] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(function() {
					// state = [ resolved | rejected ]
					state = stateString;

				// [ reject_list | resolve_list ].disable; progress_list.lock
				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
			}

			// deferred[ resolve | reject | notify ]
			deferred[ tuple[0] ] = function() {
				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
				return this;
			};
			deferred[ tuple[0] + "With" ] = list.fireWith;
		});

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( subordinate /* , ..., subordinateN */ ) {
		var i = 0,
			resolveValues = slice.call( arguments ),
			length = resolveValues.length,

			// the count of uncompleted subordinates
			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

			// Update function for both resolve and progress values
			updateFunc = function( i, contexts, values ) {
				return function( value ) {
					contexts[ i ] = this;
					values[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( values === progressValues ) {
						deferred.notifyWith( contexts, values );
					} else if ( !( --remaining ) ) {
						deferred.resolveWith( contexts, values );
					}
				};
			},

			progressValues, progressContexts, resolveContexts;

		// Add listeners to Deferred subordinates; treat others as resolved
		if ( length > 1 ) {
			progressValues = new Array( length );
			progressContexts = new Array( length );
			resolveContexts = new Array( length );
			for ( ; i < length; i++ ) {
				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
					resolveValues[ i ].promise()
						.done( updateFunc( i, resolveContexts, resolveValues ) )
						.fail( deferred.reject )
						.progress( updateFunc( i, progressContexts, progressValues ) );
				} else {
					--remaining;
				}
			}
		}

		// If we're not waiting on anything, resolve the master
		if ( !remaining ) {
			deferred.resolveWith( resolveContexts, resolveValues );
		}

		return deferred.promise();
	}
});


// The deferred used on DOM ready
var readyList;

jQuery.fn.ready = function( fn ) {
	// Add the callback
	jQuery.ready.promise().done( fn );

	return this;
};

jQuery.extend({
	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Hold (or release) the ready event
	holdReady: function( hold ) {
		if ( hold ) {
			jQuery.readyWait++;
		} else {
			jQuery.ready( true );
		}
	},

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );

		// Trigger any bound ready events
		if ( jQuery.fn.triggerHandler ) {
			jQuery( document ).triggerHandler( "ready" );
			jQuery( document ).off( "ready" );
		}
	}
});

/**
 * The ready event handler and self cleanup method
 */
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed, false );
	window.removeEventListener( "load", completed, false );
	jQuery.ready();
}

jQuery.ready.promise = function( obj ) {
	if ( !readyList ) {

		readyList = jQuery.Deferred();

		// Catch cases where $(document).ready() is called after the browser event has already occurred.
		// We once tried to use readyState "interactive" here, but it caused issues like the one
		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
		if ( document.readyState === "complete" ) {
			// Handle it asynchronously to allow scripts the opportunity to delay ready
			setTimeout( jQuery.ready );

		} else {

			// Use the handy event callback
			document.addEventListener( "DOMContentLoaded", completed, false );

			// A fallback to window.onload, that will always work
			window.addEventListener( "load", completed, false );
		}
	}
	return readyList.promise( obj );
};

// Kick off the DOM ready check even if the user does not
jQuery.ready.promise();




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( jQuery.type( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !jQuery.isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {
			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
			}
		}
	}

	return chainable ?
		elems :

		// Gets
		bulk ?
			fn.call( elems ) :
			len ? fn( elems[0], key ) : emptyGet;
};


/**
 * Determines whether an object can have data
 */
jQuery.acceptData = function( owner ) {
	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	/* jshint -W018 */
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};


function Data() {
	// Support: Android<4,
	// Old WebKit does not have Object.preventExtensions/freeze method,
	// return new empty object instead with no [[set]] accessor
	Object.defineProperty( this.cache = {}, 0, {
		get: function() {
			return {};
		}
	});

	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;
Data.accepts = jQuery.acceptData;

Data.prototype = {
	key: function( owner ) {
		// We can accept data for non-element nodes in modern browsers,
		// but we should not, see #8335.
		// Always return the key for a frozen object.
		if ( !Data.accepts( owner ) ) {
			return 0;
		}

		var descriptor = {},
			// Check if the owner object already has a cache key
			unlock = owner[ this.expando ];

		// If not, create one
		if ( !unlock ) {
			unlock = Data.uid++;

			// Secure it in a non-enumerable, non-writable property
			try {
				descriptor[ this.expando ] = { value: unlock };
				Object.defineProperties( owner, descriptor );

			// Support: Android<4
			// Fallback to a less secure definition
			} catch ( e ) {
				descriptor[ this.expando ] = unlock;
				jQuery.extend( owner, descriptor );
			}
		}

		// Ensure the cache object
		if ( !this.cache[ unlock ] ) {
			this.cache[ unlock ] = {};
		}

		return unlock;
	},
	set: function( owner, data, value ) {
		var prop,
			// There may be an unlock assigned to this node,
			// if there is no entry for this "owner", create one inline
			// and set the unlock as though an owner entry had always existed
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		// Handle: [ owner, key, value ] args
		if ( typeof data === "string" ) {
			cache[ data ] = value;

		// Handle: [ owner, { properties } ] args
		} else {
			// Fresh assignments by object are shallow copied
			if ( jQuery.isEmptyObject( cache ) ) {
				jQuery.extend( this.cache[ unlock ], data );
			// Otherwise, copy the properties one-by-one to the cache object
			} else {
				for ( prop in data ) {
					cache[ prop ] = data[ prop ];
				}
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		// Either a valid cache is found, or will be created.
		// New caches will be created and the unlock returned,
		// allowing direct access to the newly created
		// empty data object. A valid owner object must be provided.
		var cache = this.cache[ this.key( owner ) ];

		return key === undefined ?
			cache : cache[ key ];
	},
	access: function( owner, key, value ) {
		var stored;
		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				((key && typeof key === "string") && value === undefined) ) {

			stored = this.get( owner, key );

			return stored !== undefined ?
				stored : this.get( owner, jQuery.camelCase(key) );
		}

		// [*]When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i, name, camel,
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		if ( key === undefined ) {
			this.cache[ unlock ] = {};

		} else {
			// Support array or space separated string of keys
			if ( jQuery.isArray( key ) ) {
				// If "name" is an array of keys...
				// When data is initially created, via ("key", "val") signature,
				// keys will be converted to camelCase.
				// Since there is no way to tell _how_ a key was added, remove
				// both plain key and camelCase key. #12786
				// This will only penalize the array argument path.
				name = key.concat( key.map( jQuery.camelCase ) );
			} else {
				camel = jQuery.camelCase( key );
				// Try the string as a key before any manipulation
				if ( key in cache ) {
					name = [ key, camel ];
				} else {
					// If a key with the spaces exists, use it.
					// Otherwise, create an array by matching non-whitespace
					name = camel;
					name = name in cache ?
						[ name ] : ( name.match( rnotwhite ) || [] );
				}
			}

			i = name.length;
			while ( i-- ) {
				delete cache[ name[ i ] ];
			}
		}
	},
	hasData: function( owner ) {
		return !jQuery.isEmptyObject(
			this.cache[ owner[ this.expando ] ] || {}
		);
	},
	discard: function( owner ) {
		if ( owner[ this.expando ] ) {
			delete this.cache[ owner[ this.expando ] ];
		}
	}
};
var data_priv = new Data();

var data_user = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /([A-Z])/g;

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = data === "true" ? true :
					data === "false" ? false :
					data === "null" ? null :
					// Only convert to a number if it doesn't change the string
					+data + "" === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
					data;
			} catch( e ) {}

			// Make sure we set the data so it isn't changed later
			data_user.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend({
	hasData: function( elem ) {
		return data_user.hasData( elem ) || data_priv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return data_user.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		data_user.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to data_priv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return data_priv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		data_priv.remove( elem, name );
	}
});

jQuery.fn.extend({
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = data_user.get( elem );

				if ( elem.nodeType === 1 && !data_priv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE11+
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = jQuery.camelCase( name.slice(5) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					data_priv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each(function() {
				data_user.set( this, key );
			});
		}

		return access( this, function( value ) {
			var data,
				camelKey = jQuery.camelCase( key );

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {
				// Attempt to get data from the cache
				// with the key as-is
				data = data_user.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to get data from the cache
				// with the key camelized
				data = data_user.get( elem, camelKey );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, camelKey, undefined );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each(function() {
				// First, attempt to store a copy or reference of any
				// data that might've been store with a camelCased key.
				var data = data_user.get( this, camelKey );

				// For HTML5 data-* attribute interop, we have to
				// store property names with dashes in a camelCase form.
				// This might not apply to all properties...*
				data_user.set( this, camelKey, value );

				// *... In the case of properties that might _actually_
				// have dashes, we need to also store a copy of that
				// unchanged property.
				if ( key.indexOf("-") !== -1 && data !== undefined ) {
					data_user.set( this, key, value );
				}
			});
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each(function() {
			data_user.remove( this, key );
		});
	}
});


jQuery.extend({
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = data_priv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || jQuery.isArray( data ) ) {
					queue = data_priv.access( elem, type, jQuery.makeArray(data) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return data_priv.get( elem, key ) || data_priv.access( elem, key, {
			empty: jQuery.Callbacks("once memory").add(function() {
				data_priv.remove( elem, [ type + "queue", key ] );
			})
		});
	}
});

jQuery.fn.extend({
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[0], type );
		}

		return data === undefined ?
			this :
			this.each(function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[0] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			});
	},
	dequeue: function( type ) {
		return this.each(function() {
			jQuery.dequeue( this, type );
		});
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},
	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = data_priv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
});
var pnum = (/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;

var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var isHidden = function( elem, el ) {
		// isHidden might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;
		return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
	};

var rcheckableType = (/^(?:checkbox|radio)$/i);



(function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Safari<=5.1
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Safari<=5.1, Android<4.2
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE<=11+
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
})();
var strundefined = typeof undefined;



support.focusinBubbles = "onfocusin" in window;


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,
	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !(events = elemData.events) ) {
			events = elemData.events = {};
		}
		if ( !(eventHandle = elemData.handle) ) {
			eventHandle = elemData.handle = function( e ) {
				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend({
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join(".")
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !(handlers = events[ type ]) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.hasData( elem ) && data_priv.get( elem );

		if ( !elemData || !(events = elemData.events) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			delete elemData.handle;
			data_priv.remove( elem, "events" );
		}
	},

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

		cur = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf(".") >= 0 ) {
			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split(".");
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf(":") < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join(".");
		event.namespace_re = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === (elem.ownerDocument || document) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( data_priv.get( cur, "events" ) || {} )[ event.type ] && data_priv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && jQuery.acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
				jQuery.acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;
					elem[ type ]();
					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	dispatch: function( event ) {

		// Make a writable jQuery.Event from the native event object
		event = jQuery.event.fix( event );

		var i, j, ret, matched, handleObj,
			handlerQueue = [],
			args = slice.call( arguments ),
			handlers = ( data_priv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[0] = event;
		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or 2) have namespace(s)
				// a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
							.apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( (event.result = ret) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, matches, sel, handleObj,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		// Black-hole SVG <use> instance trees (#13180)
		// Avoid non-left-click bubbling in Firefox (#3861)
		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.disabled !== true || event.type !== "click" ) {
					matches = [];
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matches[ sel ] === undefined ) {
							matches[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) >= 0 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matches[ sel ] ) {
							matches.push( handleObj );
						}
					}
					if ( matches.length ) {
						handlerQueue.push({ elem: cur, handlers: matches });
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		if ( delegateCount < handlers.length ) {
			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
		}

		return handlerQueue;
	},

	// Includes some event props shared by KeyEvent and MouseEvent
	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),

	fixHooks: {},

	keyHooks: {
		props: "char charCode key keyCode".split(" "),
		filter: function( event, original ) {

			// Add which for key events
			if ( event.which == null ) {
				event.which = original.charCode != null ? original.charCode : original.keyCode;
			}

			return event;
		}
	},

	mouseHooks: {
		props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
		filter: function( event, original ) {
			var eventDoc, doc, body,
				button = original.button;

			// Calculate pageX/Y if missing and clientX/Y available
			if ( event.pageX == null && original.clientX != null ) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			// Note: button is not normalized, so don't use it
			if ( !event.which && button !== undefined ) {
				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
			}

			return event;
		}
	},

	fix: function( event ) {
		if ( event[ jQuery.expando ] ) {
			return event;
		}

		// Create a writable copy of the event object and normalize some properties
		var i, prop, copy,
			type = event.type,
			originalEvent = event,
			fixHook = this.fixHooks[ type ];

		if ( !fixHook ) {
			this.fixHooks[ type ] = fixHook =
				rmouseEvent.test( type ) ? this.mouseHooks :
				rkeyEvent.test( type ) ? this.keyHooks :
				{};
		}
		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

		event = new jQuery.Event( originalEvent );

		i = copy.length;
		while ( i-- ) {
			prop = copy[ i ];
			event[ prop ] = originalEvent[ prop ];
		}

		// Support: Cordova 2.5 (WebKit) (#13255)
		// All events should have a target; Cordova deviceready doesn't
		if ( !event.target ) {
			event.target = document;
		}

		// Support: Safari 6.0+, Chrome<28
		// Target should not be a text node (#504, #13143)
		if ( event.target.nodeType === 3 ) {
			event.target = event.target.parentNode;
		}

		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	},

	special: {
		load: {
			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		focus: {
			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== safeActiveElement() && this.focus ) {
					this.focus();
					return false;
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === safeActiveElement() && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},
		click: {
			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( this.type === "checkbox" && this.click && jQuery.nodeName( this, "input" ) ) {
					this.click();
					return false;
				}
			},

			// For cross-browser consistency, don't fire native .click() on links
			_default: function( event ) {
				return jQuery.nodeName( event.target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	},

	simulate: function( type, elem, event, bubble ) {
		// Piggyback on a donor event to simulate a different one.
		// Fake originalEvent to avoid donor's stopPropagation, but if the
		// simulated event prevents default then we do the same on the donor.
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true,
				originalEvent: {}
			}
		);
		if ( bubble ) {
			jQuery.event.trigger( e, null, elem );
		} else {
			jQuery.event.dispatch.call( elem, e );
		}
		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}
};

jQuery.removeEvent = function( elem, type, handle ) {
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle, false );
	}
};

jQuery.Event = function( src, props ) {
	// Allow instantiation without the 'new' keyword
	if ( !(this instanceof jQuery.Event) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&
				// Support: Android<4.0
				src.returnValue === false ?
			returnTrue :
			returnFalse;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || jQuery.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && e.preventDefault ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && e.stopPropagation ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && e.stopImmediatePropagation ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Create mouseenter/leave events using mouseover/out and event-time checks
// Support: Chrome 15+
jQuery.each({
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mousenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
});

// Support: Firefox, Chrome, Safari
// Create "bubbling" focus and blur events
if ( !support.focusinBubbles ) {
	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
			};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				data_priv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					data_priv.remove( doc, fix );

				} else {
					data_priv.access( doc, fix, attaches );
				}
			}
		};
	});
}

jQuery.fn.extend({

	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
		var origFn, type;

		// Types can be a map of types/handlers
		if ( typeof types === "object" ) {
			// ( types-Object, selector, data )
			if ( typeof selector !== "string" ) {
				// ( types-Object, data )
				data = data || selector;
				selector = undefined;
			}
			for ( type in types ) {
				this.on( type, selector, data, types[ type ], one );
			}
			return this;
		}

		if ( data == null && fn == null ) {
			// ( types, fn )
			fn = selector;
			data = selector = undefined;
		} else if ( fn == null ) {
			if ( typeof selector === "string" ) {
				// ( types, selector, fn )
				fn = data;
				data = undefined;
			} else {
				// ( types, data, fn )
				fn = data;
				data = selector;
				selector = undefined;
			}
		}
		if ( fn === false ) {
			fn = returnFalse;
		} else if ( !fn ) {
			return this;
		}

		if ( one === 1 ) {
			origFn = fn;
			fn = function( event ) {
				// Can use an empty set, since event contains the info
				jQuery().off( event );
				return origFn.apply( this, arguments );
			};
			// Use same guid so caller can remove using origFn
			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
		}
		return this.each( function() {
			jQuery.event.add( this, types, fn, data, selector );
		});
	},
	one: function( types, selector, data, fn ) {
		return this.on( types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {
			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {
			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {
			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each(function() {
			jQuery.event.remove( this, types, fn, selector );
		});
	},

	trigger: function( type, data ) {
		return this.each(function() {
			jQuery.event.trigger( type, data, this );
		});
	},
	triggerHandler: function( type, data ) {
		var elem = this[0];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
});


var
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	rtagName = /<([\w:]+)/,
	rhtml = /<|&#?\w+;/,
	rnoInnerhtml = /<(?:script|style|link)/i,
	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rscriptType = /^$|\/(?:java|ecma)script/i,
	rscriptTypeMasked = /^true\/(.*)/,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,

	// We have to close these tags to support XHTML (#13200)
	wrapMap = {

		// Support: IE9
		option: [ 1, "<select multiple='multiple'>", "</select>" ],

		thead: [ 1, "<table>", "</table>" ],
		col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

		_default: [ 0, "", "" ]
	};

// Support: IE9
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

// Support: 1.x compatibility
// Manipulating tables requires a tbody
function manipulationTarget( elem, content ) {
	return jQuery.nodeName( elem, "table" ) &&
		jQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ?

		elem.getElementsByTagName("tbody")[0] ||
			elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
		elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = (elem.getAttribute("type") !== null) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	var match = rscriptTypeMasked.exec( elem.type );

	if ( match ) {
		elem.type = match[ 1 ];
	} else {
		elem.removeAttribute("type");
	}

	return elem;
}

// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		data_priv.set(
			elems[ i ], "globalEval", !refElements || data_priv.get( refElements[ i ], "globalEval" )
		);
	}
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( data_priv.hasData( src ) ) {
		pdataOld = data_priv.access( src );
		pdataCur = data_priv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( data_user.hasData( src ) ) {
		udataOld = data_user.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		data_user.set( dest, udataCur );
	}
}

function getAll( context, tag ) {
	var ret = context.getElementsByTagName ? context.getElementsByTagName( tag || "*" ) :
			context.querySelectorAll ? context.querySelectorAll( tag || "*" ) :
			[];

	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
		jQuery.merge( [ context ], ret ) :
		ret;
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

jQuery.extend({
	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = jQuery.contains( elem.ownerDocument, elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	buildFragment: function( elems, context, scripts, selection ) {
		var elem, tmp, tag, wrap, contains, j,
			fragment = context.createDocumentFragment(),
			nodes = [],
			i = 0,
			l = elems.length;

		for ( ; i < l; i++ ) {
			elem = elems[ i ];

			if ( elem || elem === 0 ) {

				// Add nodes directly
				if ( jQuery.type( elem ) === "object" ) {
					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

				// Convert non-html into a text node
				} else if ( !rhtml.test( elem ) ) {
					nodes.push( context.createTextNode( elem ) );

				// Convert html into DOM nodes
				} else {
					tmp = tmp || fragment.appendChild( context.createElement("div") );

					// Deserialize a standard representation
					tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
					wrap = wrapMap[ tag ] || wrapMap._default;
					tmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[ 2 ];

					// Descend through wrappers to the right content
					j = wrap[ 0 ];
					while ( j-- ) {
						tmp = tmp.lastChild;
					}

					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, tmp.childNodes );

					// Remember the top-level container
					tmp = fragment.firstChild;

					// Ensure the created nodes are orphaned (#12392)
					tmp.textContent = "";
				}
			}
		}

		// Remove wrapper from fragment
		fragment.textContent = "";

		i = 0;
		while ( (elem = nodes[ i++ ]) ) {

			// #4087 - If origin and destination elements are the same, and this is
			// that element, do not do anything
			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
				continue;
			}

			contains = jQuery.contains( elem.ownerDocument, elem );

			// Append to fragment
			tmp = getAll( fragment.appendChild( elem ), "script" );

			// Preserve script evaluation history
			if ( contains ) {
				setGlobalEval( tmp );
			}

			// Capture executables
			if ( scripts ) {
				j = 0;
				while ( (elem = tmp[ j++ ]) ) {
					if ( rscriptType.test( elem.type || "" ) ) {
						scripts.push( elem );
					}
				}
			}
		}

		return fragment;
	},

	cleanData: function( elems ) {
		var data, elem, type, key,
			special = jQuery.event.special,
			i = 0;

		for ( ; (elem = elems[ i ]) !== undefined; i++ ) {
			if ( jQuery.acceptData( elem ) ) {
				key = elem[ data_priv.expando ];

				if ( key && (data = data_priv.cache[ key ]) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}
					if ( data_priv.cache[ key ] ) {
						// Discard any remaining `private` data
						delete data_priv.cache[ key ];
					}
				}
			}
			// Discard any remaining `user` data
			delete data_user.cache[ elem[ data_user.expando ] ];
		}
	}
});

jQuery.fn.extend({
	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each(function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				});
		}, null, value, arguments.length );
	},

	append: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		});
	},

	prepend: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		});
	},

	before: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		});
	},

	after: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		});
	},

	remove: function( selector, keepData /* Internal Use Only */ ) {
		var elem,
			elems = selector ? jQuery.filter( selector, this ) : this,
			i = 0;

		for ( ; (elem = elems[i]) != null; i++ ) {
			if ( !keepData && elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem ) );
			}

			if ( elem.parentNode ) {
				if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
					setGlobalEval( getAll( elem, "script" ) );
				}
				elem.parentNode.removeChild( elem );
			}
		}

		return this;
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; (elem = this[i]) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map(function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		});
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = value.replace( rxhtmlTag, "<$1></$2>" );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var arg = arguments[ 0 ];

		// Make the changes, replacing each context element with the new content
		this.domManip( arguments, function( elem ) {
			arg = this.parentNode;

			jQuery.cleanData( getAll( this ) );

			if ( arg ) {
				arg.replaceChild( elem, this );
			}
		});

		// Force removal if there was no new content (e.g., from empty arguments)
		return arg && (arg.length || arg.nodeType) ? this : this.remove();
	},

	detach: function( selector ) {
		return this.remove( selector, true );
	},

	domManip: function( args, callback ) {

		// Flatten any nested arrays
		args = concat.apply( [], args );

		var fragment, first, scripts, hasScripts, node, doc,
			i = 0,
			l = this.length,
			set = this,
			iNoClone = l - 1,
			value = args[ 0 ],
			isFunction = jQuery.isFunction( value );

		// We can't cloneNode fragments that contain checked, in WebKit
		if ( isFunction ||
				( l > 1 && typeof value === "string" &&
					!support.checkClone && rchecked.test( value ) ) ) {
			return this.each(function( index ) {
				var self = set.eq( index );
				if ( isFunction ) {
					args[ 0 ] = value.call( this, index, self.html() );
				}
				self.domManip( args, callback );
			});
		}

		if ( l ) {
			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );
			first = fragment.firstChild;

			if ( fragment.childNodes.length === 1 ) {
				fragment = first;
			}

			if ( first ) {
				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
				hasScripts = scripts.length;

				// Use the original fragment for the last item instead of the first because it can end up
				// being emptied incorrectly in certain situations (#8070).
				for ( ; i < l; i++ ) {
					node = fragment;

					if ( i !== iNoClone ) {
						node = jQuery.clone( node, true, true );

						// Keep references to cloned scripts for later restoration
						if ( hasScripts ) {
							// Support: QtWebKit
							// jQuery.merge because push.apply(_, arraylike) throws
							jQuery.merge( scripts, getAll( node, "script" ) );
						}
					}

					callback.call( this[ i ], node, i );
				}

				if ( hasScripts ) {
					doc = scripts[ scripts.length - 1 ].ownerDocument;

					// Reenable scripts
					jQuery.map( scripts, restoreScript );

					// Evaluate executable scripts on first document insertion
					for ( i = 0; i < hasScripts; i++ ) {
						node = scripts[ i ];
						if ( rscriptType.test( node.type || "" ) &&
							!data_priv.access( node, "globalEval" ) && jQuery.contains( doc, node ) ) {

							if ( node.src ) {
								// Optional AJAX dependency, but won't run scripts if not present
								if ( jQuery._evalUrl ) {
									jQuery._evalUrl( node.src );
								}
							} else {
								jQuery.globalEval( node.textContent.replace( rcleanScript, "" ) );
							}
						}
					}
				}
			}
		}

		return this;
	}
});

jQuery.each({
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: QtWebKit
			// .get() because push.apply(_, arraylike) throws
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
});


var iframe,
	elemdisplay = {};

/**
 * Retrieve the actual display of a element
 * @param {String} name nodeName of the element
 * @param {Object} doc Document object
 */
// Called only from within defaultDisplay
function actualDisplay( name, doc ) {
	var style,
		elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),

		// getDefaultComputedStyle might be reliably used only on attached element
		display = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?

			// Use of this method is a temporary fix (more like optimization) until something better comes along,
			// since it was removed from specification and supported only in FF
			style.display : jQuery.css( elem[ 0 ], "display" );

	// We don't have any data stored on the element,
	// so use "detach" method as fast way to get rid of the element
	elem.detach();

	return display;
}

/**
 * Try to determine the default display value of an element
 * @param {String} nodeName
 */
function defaultDisplay( nodeName ) {
	var doc = document,
		display = elemdisplay[ nodeName ];

	if ( !display ) {
		display = actualDisplay( nodeName, doc );

		// If the simple way fails, read from inside an iframe
		if ( display === "none" || !display ) {

			// Use the already-created iframe if possible
			iframe = (iframe || jQuery( "<iframe frameborder='0' width='0' height='0'/>" )).appendTo( doc.documentElement );

			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
			doc = iframe[ 0 ].contentDocument;

			// Support: IE
			doc.write();
			doc.close();

			display = actualDisplay( nodeName, doc );
			iframe.detach();
		}

		// Store the correct default display
		elemdisplay[ nodeName ] = display;
	}

	return display;
}
var rmargin = (/^margin/);

var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {
		// Support: IE<=11+, Firefox<=30+ (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		if ( elem.ownerDocument.defaultView.opener ) {
			return elem.ownerDocument.defaultView.getComputedStyle( elem, null );
		}

		return window.getComputedStyle( elem, null );
	};



function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,
		style = elem.style;

	computed = computed || getStyles( elem );

	// Support: IE9
	// getPropertyValue is only needed for .css('filter') (#12537)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];
	}

	if ( computed ) {

		if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// Support: iOS < 6
		// A tribute to the "awesome hack by Dean Edwards"
		// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
		// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
		if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?
		// Support: IE
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {
	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {
				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return (this.get = hookFn).apply( this, arguments );
		}
	};
}


(function() {
	var pixelPositionVal, boxSizingReliableVal,
		docElem = document.documentElement,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	if ( !div.style ) {
		return;
	}

	// Support: IE9-11+
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	container.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;" +
		"position:absolute";
	container.appendChild( div );

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computePixelPositionAndBoxSizingReliable() {
		div.style.cssText =
			// Support: Firefox<29, Android 2.3
			// Vendor-prefix box-sizing
			"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;" +
			"box-sizing:border-box;display:block;margin-top:1%;top:1%;" +
			"border:1px;padding:1px;width:4px;position:absolute";
		div.innerHTML = "";
		docElem.appendChild( container );

		var divStyle = window.getComputedStyle( div, null );
		pixelPositionVal = divStyle.top !== "1%";
		boxSizingReliableVal = divStyle.width === "4px";

		docElem.removeChild( container );
	}

	// Support: node.js jsdom
	// Don't assume that getComputedStyle is a property of the global object
	if ( window.getComputedStyle ) {
		jQuery.extend( support, {
			pixelPosition: function() {

				// This test is executed only once but we still do memoizing
				// since we can use the boxSizingReliable pre-computing.
				// No need to check if the test was already performed, though.
				computePixelPositionAndBoxSizingReliable();
				return pixelPositionVal;
			},
			boxSizingReliable: function() {
				if ( boxSizingReliableVal == null ) {
					computePixelPositionAndBoxSizingReliable();
				}
				return boxSizingReliableVal;
			},
			reliableMarginRight: function() {

				// Support: Android 2.3
				// Check if div with explicit width and no margin-right incorrectly
				// gets computed margin-right based on width of container. (#3333)
				// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
				// This support function is only executed once so no memoizing is needed.
				var ret,
					marginDiv = div.appendChild( document.createElement( "div" ) );

				// Reset CSS: box-sizing; display; margin; border; padding
				marginDiv.style.cssText = div.style.cssText =
					// Support: Firefox<29, Android 2.3
					// Vendor-prefix box-sizing
					"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
					"box-sizing:content-box;display:block;margin:0;border:0;padding:0";
				marginDiv.style.marginRight = marginDiv.style.width = "0";
				div.style.width = "1px";
				docElem.appendChild( container );

				ret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );

				docElem.removeChild( container );
				div.removeChild( marginDiv );

				return ret;
			}
		});
	}
})();


// A method for quickly swapping in/out CSS properties to get correct calculations.
jQuery.swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};


var
	// Swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rnumsplit = new RegExp( "^(" + pnum + ")(.*)$", "i" ),
	rrelNum = new RegExp( "^([+-])=(" + pnum + ")", "i" ),

	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	},

	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];

// Return a css property mapped to a potentially vendor prefixed property
function vendorPropName( style, name ) {

	// Shortcut for names that are not vendor prefixed
	if ( name in style ) {
		return name;
	}

	// Check for vendor prefixed names
	var capName = name[0].toUpperCase() + name.slice(1),
		origName = name,
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in style ) {
			return name;
		}
	}

	return origName;
}

function setPositiveNumber( elem, value, subtract ) {
	var matches = rnumsplit.exec( value );
	return matches ?
		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
		value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	var i = extra === ( isBorderBox ? "border" : "content" ) ?
		// If we already have the right measurement, avoid augmentation
		4 :
		// Otherwise initialize for horizontal or vertical properties
		name === "width" ? 1 : 0,

		val = 0;

	for ( ; i < 4; i += 2 ) {
		// Both box models exclude margin, so add it if we want it
		if ( extra === "margin" ) {
			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
		}

		if ( isBorderBox ) {
			// border-box includes padding, so remove it if we want content
			if ( extra === "content" ) {
				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// At this point, extra isn't border nor margin, so remove border
			if ( extra !== "margin" ) {
				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		} else {
			// At this point, extra isn't content, so add padding
			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// At this point, extra isn't content nor padding, so add border
			if ( extra !== "padding" ) {
				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	return val;
}

function getWidthOrHeight( elem, name, extra ) {

	// Start with offset property, which is equivalent to the border-box value
	var valueIsBorderBox = true,
		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
		styles = getStyles( elem ),
		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

	// Some non-html elements return undefined for offsetWidth, so check for null/undefined
	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	if ( val <= 0 || val == null ) {
		// Fall back to computed then uncomputed css if necessary
		val = curCSS( elem, name, styles );
		if ( val < 0 || val == null ) {
			val = elem.style[ name ];
		}

		// Computed unit is not pixels. Stop here and return.
		if ( rnumnonpx.test(val) ) {
			return val;
		}

		// Check for style in case a browser which returns unreliable values
		// for getComputedStyle silently falls back to the reliable elem.style
		valueIsBorderBox = isBorderBox &&
			( support.boxSizingReliable() || val === elem.style[ name ] );

		// Normalize "", auto, and prepare for extra
		val = parseFloat( val ) || 0;
	}

	// Use the active box-sizing model to add/subtract irrelevant styles
	return ( val +
		augmentWidthOrHeight(
			elem,
			name,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles
		)
	) + "px";
}

function showHide( elements, show ) {
	var display, elem, hidden,
		values = [],
		index = 0,
		length = elements.length;

	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		values[ index ] = data_priv.get( elem, "olddisplay" );
		display = elem.style.display;
		if ( show ) {
			// Reset the inline display of this element to learn if it is
			// being hidden by cascaded rules or not
			if ( !values[ index ] && display === "none" ) {
				elem.style.display = "";
			}

			// Set elements which have been overridden with display: none
			// in a stylesheet to whatever the default browser style is
			// for such an element
			if ( elem.style.display === "" && isHidden( elem ) ) {
				values[ index ] = data_priv.access( elem, "olddisplay", defaultDisplay(elem.nodeName) );
			}
		} else {
			hidden = isHidden( elem );

			if ( display !== "none" || !hidden ) {
				data_priv.set( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
			}
		}
	}

	// Set the display of most of the elements in a second loop
	// to avoid the constant reflow
	for ( index = 0; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}
		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
			elem.style.display = show ? values[ index ] || "" : "none";
		}
	}

	return elements;
}

jQuery.extend({

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {
		"float": "cssFloat"
	},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = jQuery.camelCase( name ),
			style = elem.style;

		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number, add 'px' to the (except for certain CSS properties)
			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
				value += "px";
			}

			// Support: IE9-11+
			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {
				style[ name ] = value;
			}

		} else {
			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = jQuery.camelCase( name );

		// Make sure that we're working with the right name
		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
		}
		return val;
	}
});

jQuery.each([ "height", "width" ], function( i, name ) {
	jQuery.cssHooks[ name ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) && elem.offsetWidth === 0 ?
					jQuery.swap( elem, cssShow, function() {
						return getWidthOrHeight( elem, name, extra );
					}) :
					getWidthOrHeight( elem, name, extra );
			}
		},

		set: function( elem, value, extra ) {
			var styles = extra && getStyles( elem );
			return setPositiveNumber( elem, value, extra ?
				augmentWidthOrHeight(
					elem,
					name,
					extra,
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
					styles
				) : 0
			);
		}
	};
});

// Support: Android 2.3
jQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,
	function( elem, computed ) {
		if ( computed ) {
			return jQuery.swap( elem, { "display": "inline-block" },
				curCSS, [ elem, "marginRight" ] );
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each({
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split(" ") : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( !rmargin.test( prefix ) ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
});

jQuery.fn.extend({
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( jQuery.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	},
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each(function() {
			if ( isHidden( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		});
	}
});


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || "swing";
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			if ( tween.elem[ tween.prop ] != null &&
				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );
			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {
			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE9
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	}
};

jQuery.fx = Tween.prototype.init;

// Back Compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, timerId,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rfxnum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" ),
	rrun = /queueHooks$/,
	animationPrefilters = [ defaultPrefilter ],
	tweeners = {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value ),
				target = tween.cur(),
				parts = rfxnum.exec( value ),
				unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

				// Starting value computation is required for potential unit mismatches
				start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
					rfxnum.exec( jQuery.css( tween.elem, prop ) ),
				scale = 1,
				maxIterations = 20;

			if ( start && start[ 3 ] !== unit ) {
				// Trust units reported by jQuery.css
				unit = unit || start[ 3 ];

				// Make sure we update the tween properties later on
				parts = parts || [];

				// Iteratively approximate from a nonzero starting point
				start = +target || 1;

				do {
					// If previous iteration zeroed out, double until we get *something*.
					// Use string for doubling so we don't accidentally see scale as unchanged below
					scale = scale || ".5";

					// Adjust and apply
					start = start / scale;
					jQuery.style( tween.elem, prop, start + unit );

				// Update scale, tolerating zero or NaN from tween.cur(),
				// break the loop if scale is unchanged or perfect, or if we've just had enough
				} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
			}

			// Update tween properties
			if ( parts ) {
				start = tween.start = +start || +target || 0;
				tween.unit = unit;
				// If a +=/-= token was provided, we're doing a relative animation
				tween.end = parts[ 1 ] ?
					start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
					+parts[ 2 ];
			}

			return tween;
		} ]
	};

// Animations created synchronously will run synchronously
function createFxNow() {
	setTimeout(function() {
		fxNow = undefined;
	});
	return ( fxNow = jQuery.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4 ; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( (tween = collection[ index ].call( animation, prop, value )) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	/* jshint validthis: true */
	var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHidden( elem ),
		dataShow = data_priv.get( elem, "fxshow" );

	// Handle queue: false promises
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always(function() {
			// Ensure the complete handler is called before this completes
			anim.always(function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			});
		});
	}

	// Height/width overflow pass
	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
		// Make sure that nothing sneaks out
		// Record all 3 overflow attributes because IE9-10 do not
		// change the overflow attribute when overflowX and
		// overflowY are set to the same value
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Set display property to inline-block for height/width
		// animations on inline elements that are having width/height animated
		display = jQuery.css( elem, "display" );

		// Test default display if display is currently "none"
		checkDisplay = display === "none" ?
			data_priv.get( elem, "olddisplay" ) || defaultDisplay( elem.nodeName ) : display;

		if ( checkDisplay === "inline" && jQuery.css( elem, "float" ) === "none" ) {
			style.display = "inline-block";
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always(function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		});
	}

	// show/hide pass
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.exec( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );

		// Any non-fx value stops us from restoring the original display value
		} else {
			display = undefined;
		}
	}

	if ( !jQuery.isEmptyObject( orig ) ) {
		if ( dataShow ) {
			if ( "hidden" in dataShow ) {
				hidden = dataShow.hidden;
			}
		} else {
			dataShow = data_priv.access( elem, "fxshow", {} );
		}

		// Store state if its toggle - enables .stop().toggle() to "reverse"
		if ( toggle ) {
			dataShow.hidden = !hidden;
		}
		if ( hidden ) {
			jQuery( elem ).show();
		} else {
			anim.done(function() {
				jQuery( elem ).hide();
			});
		}
		anim.done(function() {
			var prop;

			data_priv.remove( elem, "fxshow" );
			for ( prop in orig ) {
				jQuery.style( elem, prop, orig[ prop ] );
			}
		});
		for ( prop in orig ) {
			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );

			if ( !( prop in dataShow ) ) {
				dataShow[ prop ] = tween.start;
				if ( hidden ) {
					tween.end = tween.start;
					tween.start = prop === "width" || prop === "height" ? 1 : 0;
				}
			}
		}

	// If this is a noop like .hide().hide(), restore an overwritten display value
	} else if ( (display === "none" ? defaultDisplay( elem.nodeName ) : display) === "inline" ) {
		style.display = display;
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = jQuery.camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( jQuery.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = animationPrefilters.length,
		deferred = jQuery.Deferred().always( function() {
			// Don't match elem in the :animated selector
			delete tick.elem;
		}),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
				// Support: Android 2.3
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length ; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ]);

			if ( percent < 1 && length ) {
				return remaining;
			} else {
				deferred.resolveWith( elem, [ animation ] );
				return false;
			}
		},
		animation = deferred.promise({
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, { specialEasing: {} }, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,
					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length ; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		}),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length ; index++ ) {
		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( jQuery.isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		})
	);

	// attach callbacks from options
	return animation.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );
}

jQuery.Animation = jQuery.extend( Animation, {

	tweener: function( props, callback ) {
		if ( jQuery.isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.split(" ");
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length ; index++ ) {
			prop = props[ index ];
			tweeners[ prop ] = tweeners[ prop ] || [];
			tweeners[ prop ].unshift( callback );
		}
	},

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			animationPrefilters.unshift( callback );
		} else {
			animationPrefilters.push( callback );
		}
	}
});

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			jQuery.isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	};

	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( jQuery.isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend({
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHidden ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate({ opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {
				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || data_priv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each(function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = data_priv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		});
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each(function() {
			var index,
				data = data_priv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		});
	}
});

jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
});

// Generate shortcuts for custom animations
jQuery.each({
	slideDown: genFx("show"),
	slideUp: genFx("hide"),
	slideToggle: genFx("toggle"),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
});

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = jQuery.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];
		// Checks the timer has not already been removed
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	if ( timer() ) {
		jQuery.fx.start();
	} else {
		jQuery.timers.pop();
	}
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
	if ( !timerId ) {
		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
	}
};

jQuery.fx.stop = function() {
	clearInterval( timerId );
	timerId = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,
	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = setTimeout( next, time );
		hooks.stop = function() {
			clearTimeout( timeout );
		};
	});
};


(function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: iOS<=5.1, Android<=4.2+
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE<=11+
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: Android<=2.3
	// Options inside disabled selects are incorrectly marked as disabled
	select.disabled = true;
	support.optDisabled = !opt.disabled;

	// Support: IE<=11+
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
})();


var nodeHook, boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend({
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each(function() {
			jQuery.removeAttr( this, name );
		});
	}
});

jQuery.extend({
	attr: function( elem, name, value ) {
		var hooks, ret,
			nType = elem.nodeType;

		// don't get/set attributes on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === strundefined ) {
			return jQuery.prop( elem, name, value );
		}

		// All attributes are lowercase
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			name = name.toLowerCase();
			hooks = jQuery.attrHooks[ name ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
		}

		if ( value !== undefined ) {

			if ( value === null ) {
				jQuery.removeAttr( elem, name );

			} else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
				return ret;

			} else {
				elem.setAttribute( name, value + "" );
				return value;
			}

		} else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
			return ret;

		} else {
			ret = jQuery.find.attr( elem, name );

			// Non-existent attributes return null, we normalize to undefined
			return ret == null ?
				undefined :
				ret;
		}
	},

	removeAttr: function( elem, value ) {
		var name, propName,
			i = 0,
			attrNames = value && value.match( rnotwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( (name = attrNames[i++]) ) {
				propName = jQuery.propFix[ name ] || name;

				// Boolean attributes get special treatment (#10870)
				if ( jQuery.expr.match.bool.test( name ) ) {
					// Set corresponding property to false
					elem[ propName ] = false;
				}

				elem.removeAttribute( name );
			}
		}
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					jQuery.nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	}
});

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {
			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};
jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle;
		if ( !isXML ) {
			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ name ];
			attrHandle[ name ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				name.toLowerCase() :
				null;
			attrHandle[ name ] = handle;
		}
		return ret;
	};
});




var rfocusable = /^(?:input|select|textarea|button)$/i;

jQuery.fn.extend({
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each(function() {
			delete this[ jQuery.propFix[ name ] || name ];
		});
	}
});

jQuery.extend({
	propFix: {
		"for": "htmlFor",
		"class": "className"
	},

	prop: function( elem, name, value ) {
		var ret, hooks, notxml,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

		if ( notxml ) {
			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
				ret :
				( elem[ name ] = value );

		} else {
			return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
				ret :
				elem[ name ];
		}
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {
				return elem.hasAttribute( "tabindex" ) || rfocusable.test( elem.nodeName ) || elem.href ?
					elem.tabIndex :
					-1;
			}
		}
	}
});

if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {
			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		}
	};
}

jQuery.each([
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
});




var rclass = /[\t\r\n\f]/g;

jQuery.fn.extend({
	addClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).addClass( value.call( this, j, this.className ) );
			});
		}

		if ( proceed ) {
			// The disjunction here is for better compressibility (see removeClass)
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					" "
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// only assign if different to avoid unneeded rendering.
					finalValue = jQuery.trim( cur );
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = arguments.length === 0 || typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).removeClass( value.call( this, j, this.className ) );
			});
		}
		if ( proceed ) {
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					""
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = value ? jQuery.trim( cur ) : "";
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value;

		if ( typeof stateVal === "boolean" && type === "string" ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( i ) {
				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
			});
		}

		return this.each(function() {
			if ( type === "string" ) {
				// Toggle individual class names
				var className,
					i = 0,
					self = jQuery( this ),
					classNames = value.match( rnotwhite ) || [];

				while ( (className = classNames[ i++ ]) ) {
					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( type === strundefined || type === "boolean" ) {
				if ( this.className ) {
					// store className if set
					data_priv.set( this, "__className__", this.className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				this.className = this.className || value === false ? "" : data_priv.get( this, "__className__" ) || "";
			}
		});
	},

	hasClass: function( selector ) {
		var className = " " + selector + " ",
			i = 0,
			l = this.length;
		for ( ; i < l; i++ ) {
			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
				return true;
			}
		}

		return false;
	}
});




var rreturn = /\r/g;

jQuery.fn.extend({
	val: function( value ) {
		var hooks, ret, isFunction,
			elem = this[0];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
					return ret;
				}

				ret = elem.value;

				return typeof ret === "string" ?
					// Handle most common string cases
					ret.replace(rreturn, "") :
					// Handle cases where value is null/undef or number
					ret == null ? "" : ret;
			}

			return;
		}

		isFunction = jQuery.isFunction( value );

		return this.each(function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( isFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( jQuery.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				});
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		});
	}
});

jQuery.extend({
	valHooks: {
		option: {
			get: function( elem ) {
				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :
					// Support: IE10-11+
					// option.text throws exceptions (#14686, #14858)
					jQuery.trim( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one" || index < 0,
					values = one ? null : [],
					max = one ? index + 1 : options.length,
					i = index < 0 ?
						max :
						one ? index : 0;

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// IE6-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&
							// Don't return options that are disabled or in a disabled optgroup
							( support.optDisabled ? !option.disabled : option.getAttribute( "disabled" ) === null ) &&
							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];
					if ( (option.selected = jQuery.inArray( option.value, values ) >= 0) ) {
						optionSet = true;
					}
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
});

// Radios and checkboxes getter/setter
jQuery.each([ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( jQuery.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute("value") === null ? "on" : elem.value;
		};
	}
});




// Return jQuery for attributes-only inclusion


jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
});

jQuery.fn.extend({
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	},

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {
		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
	}
});


var nonce = jQuery.now();

var rquery = (/\?/);



// Support: Android 2.3
// Workaround failure to string-cast null input
jQuery.parseJSON = function( data ) {
	return JSON.parse( data + "" );
};


// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml, tmp;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE9
	try {
		tmp = new DOMParser();
		xml = tmp.parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rhash = /#.*$/,
	rts = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,
	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,
	rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Document location
	ajaxLocation = window.location.href,

	// Segment location into parts
	ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];

		if ( jQuery.isFunction( func ) ) {
			// For each dataType in the dataTypeExpression
			while ( (dataType = dataTypes[i++]) ) {
				// Prepend if requested
				if ( dataType[0] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );

				// Otherwise append
				} else {
					(structure[ dataType ] = structure[ dataType ] || []).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		});
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {
		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}
		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},
		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

		// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {
								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s[ "throws" ] ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend({

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: ajaxLocation,
		type: "GET",
		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /xml/,
			html: /html/,
			json: /json/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": jQuery.parseJSON,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,
			// URL without anti-cache param
			cacheURL,
			// Response headers
			responseHeadersString,
			responseHeaders,
			// timeout handle
			timeoutTimer,
			// Cross-domain detection vars
			parts,
			// To know if global events are to be dispatched
			fireGlobals,
			// Loop variable
			i,
			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),
			// Callbacks context
			callbackContext = s.context || s,
			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
				jQuery( callbackContext ) :
				jQuery.event,
			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks("once memory"),
			// Status-dependent callbacks
			statusCode = s.statusCode || {},
			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},
			// The jqXHR state
			state = 0,
			// Default abort message
			strAbort = "canceled",
			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( state === 2 ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( (match = rheaders.exec( responseHeadersString )) ) {
								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return state === 2 ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					var lname = name.toLowerCase();
					if ( !state ) {
						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( !state ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( state < 2 ) {
							for ( code in map ) {
								// Lazy-add the new callback in a way that preserves old ones
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						} else {
							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR ).complete = completeDeferred.add;
		jqXHR.success = jqXHR.done;
		jqXHR.error = jqXHR.fail;

		// Remove hash character (#7531: and string promotion)
		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" )
			.replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( rnotwhite ) || [ "" ];

		// A cross-domain request is in order when we have a protocol:host:port mismatch
		if ( s.crossDomain == null ) {
			parts = rurl.exec( s.url.toLowerCase() );
			s.crossDomain = !!( parts &&
				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
			);
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( state === 2 ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger("ajaxStart");
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		cacheURL = s.url;

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// If data is available, append data to url
			if ( s.data ) {
				cacheURL = ( s.url += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add anti-cache in url if needed
			if ( s.cache === false ) {
				s.url = rts.test( cacheURL ) ?

					// If there is already a '_' parameter, set its value
					cacheURL.replace( rts, "$1_=" + nonce++ ) :

					// Otherwise add one to the end
					cacheURL + ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + nonce++;
			}
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		for ( i in { success: 1, error: 1, complete: 1 } ) {
			jqXHR[ i ]( s[ i ] );
		}

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}
			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = setTimeout(function() {
					jqXHR.abort("timeout");
				}, s.timeout );
			}

			try {
				state = 1;
				transport.send( requestHeaders, done );
			} catch ( e ) {
				// Propagate exception as error if not done
				if ( state < 2 ) {
					done( -1, e );
				// Simply rethrow otherwise
				} else {
					throw e;
				}
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Called once
			if ( state === 2 ) {
				return;
			}

			// State is "done" now
			state = 2;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader("Last-Modified");
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader("etag");
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {
				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger("ajaxStop");
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
});

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {
		// Shift arguments if data argument was omitted
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		return jQuery.ajax({
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		});
	};
});


jQuery._evalUrl = function( url ) {
	return jQuery.ajax({
		url: url,
		type: "GET",
		dataType: "script",
		async: false,
		global: false,
		"throws": true
	});
};


jQuery.fn.extend({
	wrapAll: function( html ) {
		var wrap;

		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapAll( html.call(this, i) );
			});
		}

		if ( this[ 0 ] ) {

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map(function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			}).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapInner( html.call(this, i) );
			});
		}

		return this.each(function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		});
	},

	wrap: function( html ) {
		var isFunction = jQuery.isFunction( html );

		return this.each(function( i ) {
			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
		});
	},

	unwrap: function() {
		return this.parent().each(function() {
			if ( !jQuery.nodeName( this, "body" ) ) {
				jQuery( this ).replaceWith( this.childNodes );
			}
		}).end();
	}
});


jQuery.expr.filters.hidden = function( elem ) {
	// Support: Opera <= 12.12
	// Opera reports offsetWidths and offsetHeights less than zero on some elements
	return elem.offsetWidth <= 0 && elem.offsetHeight <= 0;
};
jQuery.expr.filters.visible = function( elem ) {
	return !jQuery.expr.filters.hidden( elem );
};




var r20 = /%20/g,
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( jQuery.isArray( obj ) ) {
		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {
				// Treat each array item as a scalar.
				add( prefix, v );

			} else {
				// Item is non-scalar (array or object), encode its numeric index.
				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
			}
		});

	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {
		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, value ) {
			// If value is a function, invoke it and return its value
			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
		};

	// Set traditional to true for jQuery <= 1.3.2 behavior.
	if ( traditional === undefined ) {
		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		});

	} else {
		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" ).replace( r20, "+" );
};

jQuery.fn.extend({
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map(function() {
			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		})
		.filter(function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		})
		.map(function( i, elem ) {
			var val = jQuery( this ).val();

			return val == null ?
				null :
				jQuery.isArray( val ) ?
					jQuery.map( val, function( val ) {
						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
					}) :
					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		}).get();
	}
});


jQuery.ajaxSettings.xhr = function() {
	try {
		return new XMLHttpRequest();
	} catch( e ) {}
};

var xhrId = 0,
	xhrCallbacks = {},
	xhrSuccessStatus = {
		// file protocol always yields status code 0, assume 200
		0: 200,
		// Support: IE9
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

// Support: IE9
// Open requests must be manually aborted on unload (#5280)
// See https://support.microsoft.com/kb/2856746 for more info
if ( window.attachEvent ) {
	window.attachEvent( "onunload", function() {
		for ( var key in xhrCallbacks ) {
			xhrCallbacks[ key ]();
		}
	});
}

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport(function( options ) {
	var callback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr(),
					id = ++xhrId;

				xhr.open( options.type, options.url, options.async, options.username, options.password );

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers["X-Requested-With"] ) {
					headers["X-Requested-With"] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							delete xhrCallbacks[ id ];
							callback = xhr.onload = xhr.onerror = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {
								complete(
									// file: protocol always yields status 0; see #8605, #14207
									xhr.status,
									xhr.statusText
								);
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,
									// Support: IE9
									// Accessing binary-data responseText throws an exception
									// (#11426)
									typeof xhr.responseText === "string" ? {
										text: xhr.responseText
									} : undefined,
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				xhr.onerror = callback("error");

				// Create the abort callback
				callback = xhrCallbacks[ id ] = callback("abort");

				try {
					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {
					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




// Install script dataType
jQuery.ajaxSetup({
	accepts: {
		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /(?:java|ecma)script/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
});

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
});

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {
	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery("<script>").prop({
					async: true,
					charset: s.scriptCharset,
					src: s.url
				}).on(
					"load error",
					callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					}
				);
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup({
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
});

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters["script json"] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always(function() {
			// Restore preexisting value
			window[ callbackName ] = overwritten;

			// Save back as free
			if ( s[ callbackName ] ) {
				// make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		});

		// Delegate to script
		return "script";
	}
});




// data: string of html
// context (optional): If specified, the fragment will be created in this context, defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( !data || typeof data !== "string" ) {
		return null;
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}
	context = context || document;

	var parsed = rsingleTag.exec( data ),
		scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[1] ) ];
	}

	parsed = jQuery.buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


// Keep a copy of the old load method
var _load = jQuery.fn.load;

/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	if ( typeof url !== "string" && _load ) {
		return _load.apply( this, arguments );
	}

	var selector, type, response,
		self = this,
		off = url.indexOf(" ");

	if ( off >= 0 ) {
		selector = jQuery.trim( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( jQuery.isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax({
			url: url,

			// if "type" variable is undefined, then "GET" method will be used
			type: type,
			dataType: "html",
			data: params
		}).done(function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		}).complete( callback && function( jqXHR, status ) {
			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
		});
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
});




jQuery.expr.filters.animated = function( elem ) {
	return jQuery.grep(jQuery.timers, function( fn ) {
		return elem === fn.elem;
	}).length;
};




var docElem = window.document.documentElement;

/**
 * Gets a window from an element
 */
function getWindow( elem ) {
	return jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;
}

jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf("auto") > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( jQuery.isFunction( options ) ) {
			options = options.call( elem, i, curOffset );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend({
	offset: function( options ) {
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each(function( i ) {
					jQuery.offset.setOffset( this, options, i );
				});
		}

		var docElem, win,
			elem = this[ 0 ],
			box = { top: 0, left: 0 },
			doc = elem && elem.ownerDocument;

		if ( !doc ) {
			return;
		}

		docElem = doc.documentElement;

		// Make sure it's not a disconnected DOM node
		if ( !jQuery.contains( docElem, elem ) ) {
			return box;
		}

		// Support: BlackBerry 5, iOS 3 (original iPhone)
		// If we don't have gBCR, just use 0,0 rather than error
		if ( typeof elem.getBoundingClientRect !== strundefined ) {
			box = elem.getBoundingClientRect();
		}
		win = getWindow( doc );
		return {
			top: box.top + win.pageYOffset - docElem.clientTop,
			left: box.left + win.pageXOffset - docElem.clientLeft
		};
	},

	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent
		if ( jQuery.css( elem, "position" ) === "fixed" ) {
			// Assume getBoundingClientRect is there when computed position is fixed
			offset = elem.getBoundingClientRect();

		} else {
			// Get *real* offsetParent
			offsetParent = this.offsetParent();

			// Get correct offsets
			offset = this.offset();
			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
				parentOffset = offsetParent.offset();
			}

			// Add offsetParent borders
			parentOffset.top += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	offsetParent: function() {
		return this.map(function() {
			var offsetParent = this.offsetParent || docElem;

			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position" ) === "static" ) ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || docElem;
		});
	}
});

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {
			var win = getWindow( elem );

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : window.pageXOffset,
					top ? val : window.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length, null );
	};
});

// Support: Safari<7+, Chrome<37+
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );
				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
});


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( jQuery.isWindow( elem ) ) {
					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
					// isn't a whole lot we can do. See pull request at this URL for discussion:
					// https://github.com/jquery/jquery/pull/764
					return elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?
					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable, null );
		};
	});
});


// The number of elements contained in the matched element set
jQuery.fn.size = function() {
	return this.length;
};

jQuery.fn.andSelf = jQuery.fn.addBack;




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
	define( "jquery", [], function() {
		return jQuery;
	});
}




var
	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( typeof noGlobal === strundefined ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;

}));

},{}],26:[function(require,module,exports){
(function (global){
/*!
    localForage -- Offline Storage, Improved
    Version 1.5.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.localforage = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw (f.code="MODULE_NOT_FOUND", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
'use strict';
var Mutation = global.MutationObserver || global.WebKitMutationObserver;

var scheduleDrain;

{
  if (Mutation) {
    var called = 0;
    var observer = new Mutation(nextTick);
    var element = global.document.createTextNode('');
    observer.observe(element, {
      characterData: true
    });
    scheduleDrain = function () {
      element.data = (called = ++called % 2);
    };
  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {
    var channel = new global.MessageChannel();
    channel.port1.onmessage = nextTick;
    scheduleDrain = function () {
      channel.port2.postMessage(0);
    };
  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {
    scheduleDrain = function () {

      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
      var scriptEl = global.document.createElement('script');
      scriptEl.onreadystatechange = function () {
        nextTick();

        scriptEl.onreadystatechange = null;
        scriptEl.parentNode.removeChild(scriptEl);
        scriptEl = null;
      };
      global.document.documentElement.appendChild(scriptEl);
    };
  } else {
    scheduleDrain = function () {
      setTimeout(nextTick, 0);
    };
  }
}

var draining;
var queue = [];
//named nextTick for less confusing stack traces
function nextTick() {
  draining = true;
  var i, oldQueue;
  var len = queue.length;
  while (len) {
    oldQueue = queue;
    queue = [];
    i = -1;
    while (++i < len) {
      oldQueue[i]();
    }
    len = queue.length;
  }
  draining = false;
}

module.exports = immediate;
function immediate(task) {
  if (queue.push(task) === 1 && !draining) {
    scheduleDrain();
  }
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],2:[function(_dereq_,module,exports){
'use strict';
var immediate = _dereq_(1);

/* istanbul ignore next */
function INTERNAL() {}

var handlers = {};

var REJECTED = ['REJECTED'];
var FULFILLED = ['FULFILLED'];
var PENDING = ['PENDING'];

module.exports = exports = Promise;

function Promise(resolver) {
  if (typeof resolver !== 'function') {
    throw new TypeError('resolver must be a function');
  }
  this.state = PENDING;
  this.queue = [];
  this.outcome = void 0;
  if (resolver !== INTERNAL) {
    safelyResolveThenable(this, resolver);
  }
}

Promise.prototype["catch"] = function (onRejected) {
  return this.then(null, onRejected);
};
Promise.prototype.then = function (onFulfilled, onRejected) {
  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||
    typeof onRejected !== 'function' && this.state === REJECTED) {
    return this;
  }
  var promise = new this.constructor(INTERNAL);
  if (this.state !== PENDING) {
    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;
    unwrap(promise, resolver, this.outcome);
  } else {
    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));
  }

  return promise;
};
function QueueItem(promise, onFulfilled, onRejected) {
  this.promise = promise;
  if (typeof onFulfilled === 'function') {
    this.onFulfilled = onFulfilled;
    this.callFulfilled = this.otherCallFulfilled;
  }
  if (typeof onRejected === 'function') {
    this.onRejected = onRejected;
    this.callRejected = this.otherCallRejected;
  }
}
QueueItem.prototype.callFulfilled = function (value) {
  handlers.resolve(this.promise, value);
};
QueueItem.prototype.otherCallFulfilled = function (value) {
  unwrap(this.promise, this.onFulfilled, value);
};
QueueItem.prototype.callRejected = function (value) {
  handlers.reject(this.promise, value);
};
QueueItem.prototype.otherCallRejected = function (value) {
  unwrap(this.promise, this.onRejected, value);
};

function unwrap(promise, func, value) {
  immediate(function () {
    var returnValue;
    try {
      returnValue = func(value);
    } catch (e) {
      return handlers.reject(promise, e);
    }
    if (returnValue === promise) {
      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));
    } else {
      handlers.resolve(promise, returnValue);
    }
  });
}

handlers.resolve = function (self, value) {
  var result = tryCatch(getThen, value);
  if (result.status === 'error') {
    return handlers.reject(self, result.value);
  }
  var thenable = result.value;

  if (thenable) {
    safelyResolveThenable(self, thenable);
  } else {
    self.state = FULFILLED;
    self.outcome = value;
    var i = -1;
    var len = self.queue.length;
    while (++i < len) {
      self.queue[i].callFulfilled(value);
    }
  }
  return self;
};
handlers.reject = function (self, error) {
  self.state = REJECTED;
  self.outcome = error;
  var i = -1;
  var len = self.queue.length;
  while (++i < len) {
    self.queue[i].callRejected(error);
  }
  return self;
};

function getThen(obj) {
  // Make sure we only access the accessor once as required by the spec
  var then = obj && obj.then;
  if (obj && typeof obj === 'object' && typeof then === 'function') {
    return function appyThen() {
      then.apply(obj, arguments);
    };
  }
}

function safelyResolveThenable(self, thenable) {
  // Either fulfill, reject or reject with error
  var called = false;
  function onError(value) {
    if (called) {
      return;
    }
    called = true;
    handlers.reject(self, value);
  }

  function onSuccess(value) {
    if (called) {
      return;
    }
    called = true;
    handlers.resolve(self, value);
  }

  function tryToUnwrap() {
    thenable(onSuccess, onError);
  }

  var result = tryCatch(tryToUnwrap);
  if (result.status === 'error') {
    onError(result.value);
  }
}

function tryCatch(func, value) {
  var out = {};
  try {
    out.value = func(value);
    out.status = 'success';
  } catch (e) {
    out.status = 'error';
    out.value = e;
  }
  return out;
}

exports.resolve = resolve;
function resolve(value) {
  if (value instanceof this) {
    return value;
  }
  return handlers.resolve(new this(INTERNAL), value);
}

exports.reject = reject;
function reject(reason) {
  var promise = new this(INTERNAL);
  return handlers.reject(promise, reason);
}

exports.all = all;
function all(iterable) {
  var self = this;
  if (Object.prototype.toString.call(iterable) !== '[object Array]') {
    return this.reject(new TypeError('must be an array'));
  }

  var len = iterable.length;
  var called = false;
  if (!len) {
    return this.resolve([]);
  }

  var values = new Array(len);
  var resolved = 0;
  var i = -1;
  var promise = new this(INTERNAL);

  while (++i < len) {
    allResolver(iterable[i], i);
  }
  return promise;
  function allResolver(value, i) {
    self.resolve(value).then(resolveFromAll, function (error) {
      if (!called) {
        called = true;
        handlers.reject(promise, error);
      }
    });
    function resolveFromAll(outValue) {
      values[i] = outValue;
      if (++resolved === len && !called) {
        called = true;
        handlers.resolve(promise, values);
      }
    }
  }
}

exports.race = race;
function race(iterable) {
  var self = this;
  if (Object.prototype.toString.call(iterable) !== '[object Array]') {
    return this.reject(new TypeError('must be an array'));
  }

  var len = iterable.length;
  var called = false;
  if (!len) {
    return this.resolve([]);
  }

  var i = -1;
  var promise = new this(INTERNAL);

  while (++i < len) {
    resolver(iterable[i]);
  }
  return promise;
  function resolver(value) {
    self.resolve(value).then(function (response) {
      if (!called) {
        called = true;
        handlers.resolve(promise, response);
      }
    }, function (error) {
      if (!called) {
        called = true;
        handlers.reject(promise, error);
      }
    });
  }
}

},{"1":1}],3:[function(_dereq_,module,exports){
(function (global){
'use strict';
if (typeof global.Promise !== 'function') {
  global.Promise = _dereq_(2);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"2":2}],4:[function(_dereq_,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function getIDB() {
    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */
    try {
        if (typeof indexedDB !== 'undefined') {
            return indexedDB;
        }
        if (typeof webkitIndexedDB !== 'undefined') {
            return webkitIndexedDB;
        }
        if (typeof mozIndexedDB !== 'undefined') {
            return mozIndexedDB;
        }
        if (typeof OIndexedDB !== 'undefined') {
            return OIndexedDB;
        }
        if (typeof msIndexedDB !== 'undefined') {
            return msIndexedDB;
        }
    } catch (e) {}
}

var idb = getIDB();

function isIndexedDBValid() {
    try {
        // Initialize IndexedDB; fall back to vendor-prefixed versions
        // if needed.
        if (!idb) {
            return false;
        }
        // We mimic PouchDB here;
        //
        // We test for openDatabase because IE Mobile identifies itself
        // as Safari. Oh the lulz...
        var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);

        var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;

        // Safari <10.1 does not meet our requirements for IDB support (#5572)
        // since Safari 10.1 shipped with fetch, we can use that to detect it
        return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' &&
        // some outdated implementations of IDB that appear on Samsung
        // and HTC Android devices <4.4 are missing IDBKeyRange
        typeof IDBKeyRange !== 'undefined';
    } catch (e) {
        return false;
    }
}

function isWebSQLValid() {
    return typeof openDatabase === 'function';
}

function isLocalStorageValid() {
    try {
        return typeof localStorage !== 'undefined' && 'setItem' in localStorage && localStorage.setItem;
    } catch (e) {
        return false;
    }
}

// Abstracts constructing a Blob object, so it also works in older
// browsers that don't support the native Blob constructor. (i.e.
// old QtWebKit versions, at least).
// Abstracts constructing a Blob object, so it also works in older
// browsers that don't support the native Blob constructor. (i.e.
// old QtWebKit versions, at least).
function createBlob(parts, properties) {
    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */
    parts = parts || [];
    properties = properties || {};
    try {
        return new Blob(parts, properties);
    } catch (e) {
        if (e.name !== 'TypeError') {
            throw e;
        }
        var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : WebKitBlobBuilder;
        var builder = new Builder();
        for (var i = 0; i < parts.length; i += 1) {
            builder.append(parts[i]);
        }
        return builder.getBlob(properties.type);
    }
}

// This is CommonJS because lie is an external dependency, so Rollup
// can just ignore it.
if (typeof Promise === 'undefined') {
    // In the "nopromises" build this will just throw if you don't have
    // a global promise object, but it would throw anyway later.
    _dereq_(3);
}
var Promise$1 = Promise;

function executeCallback(promise, callback) {
    if (callback) {
        promise.then(function (result) {
            callback(null, result);
        }, function (error) {
            callback(error);
        });
    }
}

function executeTwoCallbacks(promise, callback, errorCallback) {
    if (typeof callback === 'function') {
        promise.then(callback);
    }

    if (typeof errorCallback === 'function') {
        promise["catch"](errorCallback);
    }
}

// Some code originally from async_storage.js in
// [Gaia](https://github.com/mozilla-b2g/gaia).

var DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';
var supportsBlobs;
var dbContexts;
var toString = Object.prototype.toString;

// Transform a binary string to an array buffer, because otherwise
// weird stuff happens when you try to work with the binary string directly.
// It is known.
// From http://stackoverflow.com/questions/14967647/ (continues on next line)
// encode-decode-image-with-base64-breaks-image (2013-04-21)
function _binStringToArrayBuffer(bin) {
    var length = bin.length;
    var buf = new ArrayBuffer(length);
    var arr = new Uint8Array(buf);
    for (var i = 0; i < length; i++) {
        arr[i] = bin.charCodeAt(i);
    }
    return buf;
}

//
// Blobs are not supported in all versions of IndexedDB, notably
// Chrome <37 and Android <5. In those versions, storing a blob will throw.
//
// Various other blob bugs exist in Chrome v37-42 (inclusive).
// Detecting them is expensive and confusing to users, and Chrome 37-42
// is at very low usage worldwide, so we do a hacky userAgent check instead.
//
// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120
// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916
// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836
//
// Code borrowed from PouchDB. See:
// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js
//
function _checkBlobSupportWithoutCaching(idb) {
    return new Promise$1(function (resolve) {
        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, 'readwrite');
        var blob = createBlob(['']);
        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');

        txn.onabort = function (e) {
            // If the transaction aborts now its due to not being able to
            // write to the database, likely due to the disk being full
            e.preventDefault();
            e.stopPropagation();
            resolve(false);
        };

        txn.oncomplete = function () {
            var matchedChrome = navigator.userAgent.match(/Chrome\/(\d+)/);
            var matchedEdge = navigator.userAgent.match(/Edge\//);
            // MS Edge pretends to be Chrome 42:
            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx
            resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);
        };
    })["catch"](function () {
        return false; // error, so assume unsupported
    });
}

function _checkBlobSupport(idb) {
    if (typeof supportsBlobs === 'boolean') {
        return Promise$1.resolve(supportsBlobs);
    }
    return _checkBlobSupportWithoutCaching(idb).then(function (value) {
        supportsBlobs = value;
        return supportsBlobs;
    });
}

function _deferReadiness(dbInfo) {
    var dbContext = dbContexts[dbInfo.name];

    // Create a deferred object representing the current database operation.
    var deferredOperation = {};

    deferredOperation.promise = new Promise$1(function (resolve) {
        deferredOperation.resolve = resolve;
    });

    // Enqueue the deferred operation.
    dbContext.deferredOperations.push(deferredOperation);

    // Chain its promise to the database readiness.
    if (!dbContext.dbReady) {
        dbContext.dbReady = deferredOperation.promise;
    } else {
        dbContext.dbReady = dbContext.dbReady.then(function () {
            return deferredOperation.promise;
        });
    }
}

function _advanceReadiness(dbInfo) {
    var dbContext = dbContexts[dbInfo.name];

    // Dequeue a deferred operation.
    var deferredOperation = dbContext.deferredOperations.pop();

    // Resolve its promise (which is part of the database readiness
    // chain of promises).
    if (deferredOperation) {
        deferredOperation.resolve();
    }
}

function _getConnection(dbInfo, upgradeNeeded) {
    return new Promise$1(function (resolve, reject) {

        if (dbInfo.db) {
            if (upgradeNeeded) {
                _deferReadiness(dbInfo);
                dbInfo.db.close();
            } else {
                return resolve(dbInfo.db);
            }
        }

        var dbArgs = [dbInfo.name];

        if (upgradeNeeded) {
            dbArgs.push(dbInfo.version);
        }

        var openreq = idb.open.apply(idb, dbArgs);

        if (upgradeNeeded) {
            openreq.onupgradeneeded = function (e) {
                var db = openreq.result;
                try {
                    db.createObjectStore(dbInfo.storeName);
                    if (e.oldVersion <= 1) {
                        // Added when support for blob shims was added
                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);
                    }
                } catch (ex) {
                    if (ex.name === 'ConstraintError') {
                        console.warn('The database "' + dbInfo.name + '"' + ' has been upgraded from version ' + e.oldVersion + ' to version ' + e.newVersion + ', but the storage "' + dbInfo.storeName + '" already exists.');
                    } else {
                        throw ex;
                    }
                }
            };
        }

        openreq.onerror = function (e) {
            e.preventDefault();
            reject(openreq.error);
        };

        openreq.onsuccess = function () {
            resolve(openreq.result);
            _advanceReadiness(dbInfo);
        };
    });
}

function _getOriginalConnection(dbInfo) {
    return _getConnection(dbInfo, false);
}

function _getUpgradedConnection(dbInfo) {
    return _getConnection(dbInfo, true);
}

function _isUpgradeNeeded(dbInfo, defaultVersion) {
    if (!dbInfo.db) {
        return true;
    }

    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);
    var isDowngrade = dbInfo.version < dbInfo.db.version;
    var isUpgrade = dbInfo.version > dbInfo.db.version;

    if (isDowngrade) {
        // If the version is not the default one
        // then warn for impossible downgrade.
        if (dbInfo.version !== defaultVersion) {
            console.warn('The database "' + dbInfo.name + '"' + ' can\'t be downgraded from version ' + dbInfo.db.version + ' to version ' + dbInfo.version + '.');
        }
        // Align the versions to prevent errors.
        dbInfo.version = dbInfo.db.version;
    }

    if (isUpgrade || isNewStore) {
        // If the store is new then increment the version (if needed).
        // This will trigger an "upgradeneeded" event which is required
        // for creating a store.
        if (isNewStore) {
            var incVersion = dbInfo.db.version + 1;
            if (incVersion > dbInfo.version) {
                dbInfo.version = incVersion;
            }
        }

        return true;
    }

    return false;
}

// encode a blob for indexeddb engines that don't support blobs
function _encodeBlob(blob) {
    return new Promise$1(function (resolve, reject) {
        var reader = new FileReader();
        reader.onerror = reject;
        reader.onloadend = function (e) {
            var base64 = btoa(e.target.result || '');
            resolve({
                __local_forage_encoded_blob: true,
                data: base64,
                type: blob.type
            });
        };
        reader.readAsBinaryString(blob);
    });
}

// decode an encoded blob
function _decodeBlob(encodedBlob) {
    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));
    return createBlob([arrayBuff], { type: encodedBlob.type });
}

// is this one of our fancy encoded blobs?
function _isEncodedBlob(value) {
    return value && value.__local_forage_encoded_blob;
}

// Specialize the default `ready()` function by making it dependent
// on the current database operations. Thus, the driver will be actually
// ready when it's been initialized (default) *and* there are no pending
// operations on the database (initiated by some other instances).
function _fullyReady(callback) {
    var self = this;

    var promise = self._initReady().then(function () {
        var dbContext = dbContexts[self._dbInfo.name];

        if (dbContext && dbContext.dbReady) {
            return dbContext.dbReady;
        }
    });

    executeTwoCallbacks(promise, callback, callback);
    return promise;
}

// Open the IndexedDB database (automatically creates one if one didn't
// previously exist), using any options set in the config.
function _initStorage(options) {
    var self = this;
    var dbInfo = {
        db: null
    };

    if (options) {
        for (var i in options) {
            dbInfo[i] = options[i];
        }
    }

    // Initialize a singleton container for all running localForages.
    if (!dbContexts) {
        dbContexts = {};
    }

    // Get the current context of the database;
    var dbContext = dbContexts[dbInfo.name];

    // ...or create a new context.
    if (!dbContext) {
        dbContext = {
            // Running localForages sharing a database.
            forages: [],
            // Shared database.
            db: null,
            // Database readiness (promise).
            dbReady: null,
            // Deferred operations on the database.
            deferredOperations: []
        };
        // Register the new context in the global container.
        dbContexts[dbInfo.name] = dbContext;
    }

    // Register itself as a running localForage in the current context.
    dbContext.forages.push(self);

    // Replace the default `ready()` function with the specialized one.
    if (!self._initReady) {
        self._initReady = self.ready;
        self.ready = _fullyReady;
    }

    // Create an array of initialization states of the related localForages.
    var initPromises = [];

    function ignoreErrors() {
        // Don't handle errors here,
        // just makes sure related localForages aren't pending.
        return Promise$1.resolve();
    }

    for (var j = 0; j < dbContext.forages.length; j++) {
        var forage = dbContext.forages[j];
        if (forage !== self) {
            // Don't wait for itself...
            initPromises.push(forage._initReady()["catch"](ignoreErrors));
        }
    }

    // Take a snapshot of the related localForages.
    var forages = dbContext.forages.slice(0);

    // Initialize the connection process only when
    // all the related localForages aren't pending.
    return Promise$1.all(initPromises).then(function () {
        dbInfo.db = dbContext.db;
        // Get the connection or open a new one without upgrade.
        return _getOriginalConnection(dbInfo);
    }).then(function (db) {
        dbInfo.db = db;
        if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {
            // Reopen the database for upgrading.
            return _getUpgradedConnection(dbInfo);
        }
        return db;
    }).then(function (db) {
        dbInfo.db = dbContext.db = db;
        self._dbInfo = dbInfo;
        // Share the final connection amongst related localForages.
        for (var k = 0; k < forages.length; k++) {
            var forage = forages[k];
            if (forage !== self) {
                // Self is already up-to-date.
                forage._dbInfo.db = dbInfo.db;
                forage._dbInfo.version = dbInfo.version;
            }
        }
    });
}

function getItem(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);
            var req = store.get(key);

            req.onsuccess = function () {
                var value = req.result;
                if (value === undefined) {
                    value = null;
                }
                if (_isEncodedBlob(value)) {
                    value = _decodeBlob(value);
                }
                resolve(value);
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Iterate over all items stored in database.
function iterate(iterator, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);

            var req = store.openCursor();
            var iterationNumber = 1;

            req.onsuccess = function () {
                var cursor = req.result;

                if (cursor) {
                    var value = cursor.value;
                    if (_isEncodedBlob(value)) {
                        value = _decodeBlob(value);
                    }
                    var result = iterator(value, cursor.key, iterationNumber++);

                    if (result !== void 0) {
                        resolve(result);
                    } else {
                        cursor["continue"]();
                    }
                } else {
                    resolve();
                }
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);

    return promise;
}

function setItem(key, value, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        var dbInfo;
        self.ready().then(function () {
            dbInfo = self._dbInfo;
            if (toString.call(value) === '[object Blob]') {
                return _checkBlobSupport(dbInfo.db).then(function (blobSupport) {
                    if (blobSupport) {
                        return value;
                    }
                    return _encodeBlob(value);
                });
            }
            return value;
        }).then(function (value) {
            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');
            var store = transaction.objectStore(dbInfo.storeName);
            var req = store.put(value, key);

            // The reason we don't _save_ null is because IE 10 does
            // not support saving the `null` type in IndexedDB. How
            // ironic, given the bug below!
            // See: https://github.com/mozilla/localForage/issues/161
            if (value === null) {
                value = undefined;
            }

            transaction.oncomplete = function () {
                // Cast to undefined so the value passed to
                // callback/promise is the same as what one would get out
                // of `getItem()` later. This leads to some weirdness
                // (setItem('foo', undefined) will return `null`), but
                // it's not my fault localStorage is our baseline and that
                // it's weird.
                if (value === undefined) {
                    value = null;
                }

                resolve(value);
            };
            transaction.onabort = transaction.onerror = function () {
                var err = req.error ? req.error : req.transaction.error;
                reject(err);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function removeItem(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');
            var store = transaction.objectStore(dbInfo.storeName);

            // We use a Grunt task to make this safe for IE and some
            // versions of Android (including those used by Cordova).
            // Normally IE won't like `.delete()` and will insist on
            // using `['delete']()`, but we have a build step that
            // fixes this for us now.
            var req = store["delete"](key);
            transaction.oncomplete = function () {
                resolve();
            };

            transaction.onerror = function () {
                reject(req.error);
            };

            // The request will be also be aborted if we've exceeded our storage
            // space.
            transaction.onabort = function () {
                var err = req.error ? req.error : req.transaction.error;
                reject(err);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function clear(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');
            var store = transaction.objectStore(dbInfo.storeName);
            var req = store.clear();

            transaction.oncomplete = function () {
                resolve();
            };

            transaction.onabort = transaction.onerror = function () {
                var err = req.error ? req.error : req.transaction.error;
                reject(err);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function length(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);
            var req = store.count();

            req.onsuccess = function () {
                resolve(req.result);
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function key(n, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        if (n < 0) {
            resolve(null);

            return;
        }

        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);

            var advanced = false;
            var req = store.openCursor();
            req.onsuccess = function () {
                var cursor = req.result;
                if (!cursor) {
                    // this means there weren't enough keys
                    resolve(null);

                    return;
                }

                if (n === 0) {
                    // We have the first key, return it if that's what they
                    // wanted.
                    resolve(cursor.key);
                } else {
                    if (!advanced) {
                        // Otherwise, ask the cursor to skip ahead n
                        // records.
                        advanced = true;
                        cursor.advance(n);
                    } else {
                        // When we get here, we've got the nth key.
                        resolve(cursor.key);
                    }
                }
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function keys(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);

            var req = store.openCursor();
            var keys = [];

            req.onsuccess = function () {
                var cursor = req.result;

                if (!cursor) {
                    resolve(keys);
                    return;
                }

                keys.push(cursor.key);
                cursor["continue"]();
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

var asyncStorage = {
    _driver: 'asyncStorage',
    _initStorage: _initStorage,
    iterate: iterate,
    getItem: getItem,
    setItem: setItem,
    removeItem: removeItem,
    clear: clear,
    length: length,
    key: key,
    keys: keys
};

// Sadly, the best way to save binary data in WebSQL/localStorage is serializing
// it to Base64, so this is how we store it to prevent very strange errors with less
// verbose ways of binary <-> string data storage.
var BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

var BLOB_TYPE_PREFIX = '~~local_forage_type~';
var BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;

var SERIALIZED_MARKER = '__lfsc__:';
var SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;

// OMG the serializations!
var TYPE_ARRAYBUFFER = 'arbf';
var TYPE_BLOB = 'blob';
var TYPE_INT8ARRAY = 'si08';
var TYPE_UINT8ARRAY = 'ui08';
var TYPE_UINT8CLAMPEDARRAY = 'uic8';
var TYPE_INT16ARRAY = 'si16';
var TYPE_INT32ARRAY = 'si32';
var TYPE_UINT16ARRAY = 'ur16';
var TYPE_UINT32ARRAY = 'ui32';
var TYPE_FLOAT32ARRAY = 'fl32';
var TYPE_FLOAT64ARRAY = 'fl64';
var TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;

var toString$1 = Object.prototype.toString;

function stringToBuffer(serializedString) {
    // Fill the string into a ArrayBuffer.
    var bufferLength = serializedString.length * 0.75;
    var len = serializedString.length;
    var i;
    var p = 0;
    var encoded1, encoded2, encoded3, encoded4;

    if (serializedString[serializedString.length - 1] === '=') {
        bufferLength--;
        if (serializedString[serializedString.length - 2] === '=') {
            bufferLength--;
        }
    }

    var buffer = new ArrayBuffer(bufferLength);
    var bytes = new Uint8Array(buffer);

    for (i = 0; i < len; i += 4) {
        encoded1 = BASE_CHARS.indexOf(serializedString[i]);
        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);
        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);
        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);

        /*jslint bitwise: true */
        bytes[p++] = encoded1 << 2 | encoded2 >> 4;
        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;
        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
    }
    return buffer;
}

// Converts a buffer to a string to store, serialized, in the backend
// storage library.
function bufferToString(buffer) {
    // base64-arraybuffer
    var bytes = new Uint8Array(buffer);
    var base64String = '';
    var i;

    for (i = 0; i < bytes.length; i += 3) {
        /*jslint bitwise: true */
        base64String += BASE_CHARS[bytes[i] >> 2];
        base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];
        base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];
        base64String += BASE_CHARS[bytes[i + 2] & 63];
    }

    if (bytes.length % 3 === 2) {
        base64String = base64String.substring(0, base64String.length - 1) + '=';
    } else if (bytes.length % 3 === 1) {
        base64String = base64String.substring(0, base64String.length - 2) + '==';
    }

    return base64String;
}

// Serialize a value, afterwards executing a callback (which usually
// instructs the `setItem()` callback/promise to be executed). This is how
// we store binary data with localStorage.
function serialize(value, callback) {
    var valueType = '';
    if (value) {
        valueType = toString$1.call(value);
    }

    // Cannot use `value instanceof ArrayBuffer` or such here, as these
    // checks fail when running the tests using casper.js...
    //
    // TODO: See why those tests fail and use a better solution.
    if (value && (valueType === '[object ArrayBuffer]' || value.buffer && toString$1.call(value.buffer) === '[object ArrayBuffer]')) {
        // Convert binary arrays to a string and prefix the string with
        // a special marker.
        var buffer;
        var marker = SERIALIZED_MARKER;

        if (value instanceof ArrayBuffer) {
            buffer = value;
            marker += TYPE_ARRAYBUFFER;
        } else {
            buffer = value.buffer;

            if (valueType === '[object Int8Array]') {
                marker += TYPE_INT8ARRAY;
            } else if (valueType === '[object Uint8Array]') {
                marker += TYPE_UINT8ARRAY;
            } else if (valueType === '[object Uint8ClampedArray]') {
                marker += TYPE_UINT8CLAMPEDARRAY;
            } else if (valueType === '[object Int16Array]') {
                marker += TYPE_INT16ARRAY;
            } else if (valueType === '[object Uint16Array]') {
                marker += TYPE_UINT16ARRAY;
            } else if (valueType === '[object Int32Array]') {
                marker += TYPE_INT32ARRAY;
            } else if (valueType === '[object Uint32Array]') {
                marker += TYPE_UINT32ARRAY;
            } else if (valueType === '[object Float32Array]') {
                marker += TYPE_FLOAT32ARRAY;
            } else if (valueType === '[object Float64Array]') {
                marker += TYPE_FLOAT64ARRAY;
            } else {
                callback(new Error('Failed to get type for BinaryArray'));
            }
        }

        callback(marker + bufferToString(buffer));
    } else if (valueType === '[object Blob]') {
        // Conver the blob to a binaryArray and then to a string.
        var fileReader = new FileReader();

        fileReader.onload = function () {
            // Backwards-compatible prefix for the blob type.
            var str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);

            callback(SERIALIZED_MARKER + TYPE_BLOB + str);
        };

        fileReader.readAsArrayBuffer(value);
    } else {
        try {
            callback(JSON.stringify(value));
        } catch (e) {
            console.error("Couldn't convert value into a JSON string: ", value);

            callback(null, e);
        }
    }
}

// Deserialize data we've inserted into a value column/field. We place
// special markers into our strings to mark them as encoded; this isn't
// as nice as a meta field, but it's the only sane thing we can do whilst
// keeping localStorage support intact.
//
// Oftentimes this will just deserialize JSON content, but if we have a
// special marker (SERIALIZED_MARKER, defined above), we will extract
// some kind of arraybuffer/binary data/typed array out of the string.
function deserialize(value) {
    // If we haven't marked this string as being specially serialized (i.e.
    // something other than serialized JSON), we can just return it and be
    // done with it.
    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {
        return JSON.parse(value);
    }

    // The following code deals with deserializing some kind of Blob or
    // TypedArray. First we separate out the type of data we're dealing
    // with from the data itself.
    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);
    var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);

    var blobType;
    // Backwards-compatible blob type serialization strategy.
    // DBs created with older versions of localForage will simply not have the blob type.
    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {
        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);
        blobType = matcher[1];
        serializedString = serializedString.substring(matcher[0].length);
    }
    var buffer = stringToBuffer(serializedString);

    // Return the right type based on the code/type set during
    // serialization.
    switch (type) {
        case TYPE_ARRAYBUFFER:
            return buffer;
        case TYPE_BLOB:
            return createBlob([buffer], { type: blobType });
        case TYPE_INT8ARRAY:
            return new Int8Array(buffer);
        case TYPE_UINT8ARRAY:
            return new Uint8Array(buffer);
        case TYPE_UINT8CLAMPEDARRAY:
            return new Uint8ClampedArray(buffer);
        case TYPE_INT16ARRAY:
            return new Int16Array(buffer);
        case TYPE_UINT16ARRAY:
            return new Uint16Array(buffer);
        case TYPE_INT32ARRAY:
            return new Int32Array(buffer);
        case TYPE_UINT32ARRAY:
            return new Uint32Array(buffer);
        case TYPE_FLOAT32ARRAY:
            return new Float32Array(buffer);
        case TYPE_FLOAT64ARRAY:
            return new Float64Array(buffer);
        default:
            throw new Error('Unkown type: ' + type);
    }
}

var localforageSerializer = {
    serialize: serialize,
    deserialize: deserialize,
    stringToBuffer: stringToBuffer,
    bufferToString: bufferToString
};

/*
 * Includes code from:
 *
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
// Open the WebSQL database (automatically creates one if one didn't
// previously exist), using any options set in the config.
function _initStorage$1(options) {
    var self = this;
    var dbInfo = {
        db: null
    };

    if (options) {
        for (var i in options) {
            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];
        }
    }

    var dbInfoPromise = new Promise$1(function (resolve, reject) {
        // Open the database; the openDatabase API will automatically
        // create it for us if it doesn't exist.
        try {
            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);
        } catch (e) {
            return reject(e);
        }

        // Create our key/value table if it doesn't exist.
        dbInfo.db.transaction(function (t) {
            t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.storeName + ' (id INTEGER PRIMARY KEY, key unique, value)', [], function () {
                self._dbInfo = dbInfo;
                resolve();
            }, function (t, error) {
                reject(error);
            });
        });
    });

    dbInfo.serializer = localforageSerializer;
    return dbInfoPromise;
}

function getItem$1(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT * FROM ' + dbInfo.storeName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {
                    var result = results.rows.length ? results.rows.item(0).value : null;

                    // Check to see if this is serialized content we need to
                    // unpack.
                    if (result) {
                        result = dbInfo.serializer.deserialize(result);
                    }

                    resolve(result);
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function iterate$1(iterator, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;

            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT * FROM ' + dbInfo.storeName, [], function (t, results) {
                    var rows = results.rows;
                    var length = rows.length;

                    for (var i = 0; i < length; i++) {
                        var item = rows.item(i);
                        var result = item.value;

                        // Check to see if this is serialized content
                        // we need to unpack.
                        if (result) {
                            result = dbInfo.serializer.deserialize(result);
                        }

                        result = iterator(result, item.key, i + 1);

                        // void(0) prevents problems with redefinition
                        // of `undefined`.
                        if (result !== void 0) {
                            resolve(result);
                            return;
                        }
                    }

                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function _setItem(key, value, callback, retriesLeft) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            // The localStorage API doesn't return undefined values in an
            // "expected" way, so undefined is always cast to null in all
            // drivers. See: https://github.com/mozilla/localForage/pull/42
            if (value === undefined) {
                value = null;
            }

            // Save the original value to pass to the callback.
            var originalValue = value;

            var dbInfo = self._dbInfo;
            dbInfo.serializer.serialize(value, function (value, error) {
                if (error) {
                    reject(error);
                } else {
                    dbInfo.db.transaction(function (t) {
                        t.executeSql('INSERT OR REPLACE INTO ' + dbInfo.storeName + ' (key, value) VALUES (?, ?)', [key, value], function () {
                            resolve(originalValue);
                        }, function (t, error) {
                            reject(error);
                        });
                    }, function (sqlError) {
                        // The transaction failed; check
                        // to see if it's a quota error.
                        if (sqlError.code === sqlError.QUOTA_ERR) {
                            // We reject the callback outright for now, but
                            // it's worth trying to re-run the transaction.
                            // Even if the user accepts the prompt to use
                            // more storage on Safari, this error will
                            // be called.
                            //
                            // Try to re-run the transaction.
                            if (retriesLeft > 0) {
                                resolve(_setItem.apply(self, [key, originalValue, callback, retriesLeft - 1]));
                                return;
                            }
                            reject(sqlError);
                        }
                    });
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function setItem$1(key, value, callback) {
    return _setItem.apply(this, [key, value, callback, 1]);
}

function removeItem$1(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('DELETE FROM ' + dbInfo.storeName + ' WHERE key = ?', [key], function () {
                    resolve();
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Deletes every item in the table.
// TODO: Find out if this resets the AUTO_INCREMENT number.
function clear$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('DELETE FROM ' + dbInfo.storeName, [], function () {
                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Does a simple `COUNT(key)` to get the number of items stored in
// localForage.
function length$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                // Ahhh, SQL makes this one soooooo easy.
                t.executeSql('SELECT COUNT(key) as c FROM ' + dbInfo.storeName, [], function (t, results) {
                    var result = results.rows.item(0).c;

                    resolve(result);
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Return the key located at key index X; essentially gets the key from a
// `WHERE id = ?`. This is the most efficient way I can think to implement
// this rarely-used (in my experience) part of the API, but it can seem
// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so
// the ID of each key will change every time it's updated. Perhaps a stored
// procedure for the `setItem()` SQL would solve this problem?
// TODO: Don't change ID on `setItem()`.
function key$1(n, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT key FROM ' + dbInfo.storeName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {
                    var result = results.rows.length ? results.rows.item(0).key : null;
                    resolve(result);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function keys$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT key FROM ' + dbInfo.storeName, [], function (t, results) {
                    var keys = [];

                    for (var i = 0; i < results.rows.length; i++) {
                        keys.push(results.rows.item(i).key);
                    }

                    resolve(keys);
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

var webSQLStorage = {
    _driver: 'webSQLStorage',
    _initStorage: _initStorage$1,
    iterate: iterate$1,
    getItem: getItem$1,
    setItem: setItem$1,
    removeItem: removeItem$1,
    clear: clear$1,
    length: length$1,
    key: key$1,
    keys: keys$1
};

// Config the localStorage backend, using options set in the config.
function _initStorage$2(options) {
    var self = this;
    var dbInfo = {};
    if (options) {
        for (var i in options) {
            dbInfo[i] = options[i];
        }
    }

    dbInfo.keyPrefix = dbInfo.name + '/';

    if (dbInfo.storeName !== self._defaultConfig.storeName) {
        dbInfo.keyPrefix += dbInfo.storeName + '/';
    }

    self._dbInfo = dbInfo;
    dbInfo.serializer = localforageSerializer;

    return Promise$1.resolve();
}

// Remove all keys from the datastore, effectively destroying all data in
// the app's key/value store!
function clear$2(callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var keyPrefix = self._dbInfo.keyPrefix;

        for (var i = localStorage.length - 1; i >= 0; i--) {
            var key = localStorage.key(i);

            if (key.indexOf(keyPrefix) === 0) {
                localStorage.removeItem(key);
            }
        }
    });

    executeCallback(promise, callback);
    return promise;
}

// Retrieve an item from the store. Unlike the original async_storage
// library in Gaia, we don't modify return values at all. If a key's value
// is `undefined`, we pass that value to the callback function.
function getItem$2(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var result = localStorage.getItem(dbInfo.keyPrefix + key);

        // If a result was found, parse it from the serialized
        // string into a JS object. If result isn't truthy, the key
        // is likely undefined and we'll pass it straight to the
        // callback.
        if (result) {
            result = dbInfo.serializer.deserialize(result);
        }

        return result;
    });

    executeCallback(promise, callback);
    return promise;
}

// Iterate over all items in the store.
function iterate$2(iterator, callback) {
    var self = this;

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var keyPrefix = dbInfo.keyPrefix;
        var keyPrefixLength = keyPrefix.length;
        var length = localStorage.length;

        // We use a dedicated iterator instead of the `i` variable below
        // so other keys we fetch in localStorage aren't counted in
        // the `iterationNumber` argument passed to the `iterate()`
        // callback.
        //
        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530
        var iterationNumber = 1;

        for (var i = 0; i < length; i++) {
            var key = localStorage.key(i);
            if (key.indexOf(keyPrefix) !== 0) {
                continue;
            }
            var value = localStorage.getItem(key);

            // If a result was found, parse it from the serialized
            // string into a JS object. If result isn't truthy, the
            // key is likely undefined and we'll pass it straight
            // to the iterator.
            if (value) {
                value = dbInfo.serializer.deserialize(value);
            }

            value = iterator(value, key.substring(keyPrefixLength), iterationNumber++);

            if (value !== void 0) {
                return value;
            }
        }
    });

    executeCallback(promise, callback);
    return promise;
}

// Same as localStorage's key() method, except takes a callback.
function key$2(n, callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var result;
        try {
            result = localStorage.key(n);
        } catch (error) {
            result = null;
        }

        // Remove the prefix from the key, if a key is found.
        if (result) {
            result = result.substring(dbInfo.keyPrefix.length);
        }

        return result;
    });

    executeCallback(promise, callback);
    return promise;
}

function keys$2(callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var length = localStorage.length;
        var keys = [];

        for (var i = 0; i < length; i++) {
            if (localStorage.key(i).indexOf(dbInfo.keyPrefix) === 0) {
                keys.push(localStorage.key(i).substring(dbInfo.keyPrefix.length));
            }
        }

        return keys;
    });

    executeCallback(promise, callback);
    return promise;
}

// Supply the number of keys in the datastore to the callback function.
function length$2(callback) {
    var self = this;
    var promise = self.keys().then(function (keys) {
        return keys.length;
    });

    executeCallback(promise, callback);
    return promise;
}

// Remove an item from the store, nice and simple.
function removeItem$2(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        localStorage.removeItem(dbInfo.keyPrefix + key);
    });

    executeCallback(promise, callback);
    return promise;
}

// Set a key's value and run an optional callback once the value is set.
// Unlike Gaia's implementation, the callback function is passed the value,
// in case you want to operate on that value only after you're sure it
// saved, or something like that.
function setItem$2(key, value, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = self.ready().then(function () {
        // Convert undefined values to null.
        // https://github.com/mozilla/localForage/pull/42
        if (value === undefined) {
            value = null;
        }

        // Save the original value to pass to the callback.
        var originalValue = value;

        return new Promise$1(function (resolve, reject) {
            var dbInfo = self._dbInfo;
            dbInfo.serializer.serialize(value, function (value, error) {
                if (error) {
                    reject(error);
                } else {
                    try {
                        localStorage.setItem(dbInfo.keyPrefix + key, value);
                        resolve(originalValue);
                    } catch (e) {
                        // localStorage capacity exceeded.
                        // TODO: Make this a specific error/event.
                        if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {
                            reject(e);
                        }
                        reject(e);
                    }
                }
            });
        });
    });

    executeCallback(promise, callback);
    return promise;
}

var localStorageWrapper = {
    _driver: 'localStorageWrapper',
    _initStorage: _initStorage$2,
    // Default API, from Gaia/localStorage.
    iterate: iterate$2,
    getItem: getItem$2,
    setItem: setItem$2,
    removeItem: removeItem$2,
    clear: clear$2,
    length: length$2,
    key: key$2,
    keys: keys$2
};

// Custom drivers are stored here when `defineDriver()` is called.
// They are shared across all instances of localForage.
var CustomDrivers = {};

var DriverType = {
    INDEXEDDB: 'asyncStorage',
    LOCALSTORAGE: 'localStorageWrapper',
    WEBSQL: 'webSQLStorage'
};

var DefaultDriverOrder = [DriverType.INDEXEDDB, DriverType.WEBSQL, DriverType.LOCALSTORAGE];

var LibraryMethods = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'];

var DefaultConfig = {
    description: '',
    driver: DefaultDriverOrder.slice(),
    name: 'localforage',
    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size
    // we can use without a prompt.
    size: 4980736,
    storeName: 'keyvaluepairs',
    version: 1.0
};

var driverSupport = {};
// Check to see if IndexedDB is available and if it is the latest
// implementation; it's our preferred backend library. We use "_spec_test"
// as the name of the database because it's not the one we'll operate on,
// but it's useful to make sure its using the right spec.
// See: https://github.com/mozilla/localForage/issues/128
driverSupport[DriverType.INDEXEDDB] = isIndexedDBValid();

driverSupport[DriverType.WEBSQL] = isWebSQLValid();

driverSupport[DriverType.LOCALSTORAGE] = isLocalStorageValid();

var isArray = Array.isArray || function (arg) {
    return Object.prototype.toString.call(arg) === '[object Array]';
};

function callWhenReady(localForageInstance, libraryMethod) {
    localForageInstance[libraryMethod] = function () {
        var _args = arguments;
        return localForageInstance.ready().then(function () {
            return localForageInstance[libraryMethod].apply(localForageInstance, _args);
        });
    };
}

function extend() {
    for (var i = 1; i < arguments.length; i++) {
        var arg = arguments[i];

        if (arg) {
            for (var key in arg) {
                if (arg.hasOwnProperty(key)) {
                    if (isArray(arg[key])) {
                        arguments[0][key] = arg[key].slice();
                    } else {
                        arguments[0][key] = arg[key];
                    }
                }
            }
        }
    }

    return arguments[0];
}

function isLibraryDriver(driverName) {
    for (var driver in DriverType) {
        if (DriverType.hasOwnProperty(driver) && DriverType[driver] === driverName) {
            return true;
        }
    }

    return false;
}

var LocalForage = function () {
    function LocalForage(options) {
        _classCallCheck(this, LocalForage);

        this.INDEXEDDB = DriverType.INDEXEDDB;
        this.LOCALSTORAGE = DriverType.LOCALSTORAGE;
        this.WEBSQL = DriverType.WEBSQL;

        this._defaultConfig = extend({}, DefaultConfig);
        this._config = extend({}, this._defaultConfig, options);
        this._driverSet = null;
        this._initDriver = null;
        this._ready = false;
        this._dbInfo = null;

        this._wrapLibraryMethodsWithReady();
        this.setDriver(this._config.driver)["catch"](function () {});
    }

    // Set any config values for localForage; can be called anytime before
    // the first API call (e.g. `getItem`, `setItem`).
    // We loop through options so we don't overwrite existing config
    // values.


    LocalForage.prototype.config = function config(options) {
        // If the options argument is an object, we use it to set values.
        // Otherwise, we return either a specified config value or all
        // config values.
        if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {
            // If localforage is ready and fully initialized, we can't set
            // any new configuration values. Instead, we return an error.
            if (this._ready) {
                return new Error("Can't call config() after localforage " + 'has been used.');
            }

            for (var i in options) {
                if (i === 'storeName') {
                    options[i] = options[i].replace(/\W/g, '_');
                }

                if (i === 'version' && typeof options[i] !== 'number') {
                    return new Error('Database version must be a number.');
                }

                this._config[i] = options[i];
            }

            // after all config options are set and
            // the driver option is used, try setting it
            if ('driver' in options && options.driver) {
                return this.setDriver(this._config.driver);
            }

            return true;
        } else if (typeof options === 'string') {
            return this._config[options];
        } else {
            return this._config;
        }
    };

    // Used to define a custom driver, shared across all instances of
    // localForage.


    LocalForage.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {
        var promise = new Promise$1(function (resolve, reject) {
            try {
                var driverName = driverObject._driver;
                var complianceError = new Error('Custom driver not compliant; see ' + 'https://mozilla.github.io/localForage/#definedriver');
                var namingError = new Error('Custom driver name already in use: ' + driverObject._driver);

                // A driver name should be defined and not overlap with the
                // library-defined, default drivers.
                if (!driverObject._driver) {
                    reject(complianceError);
                    return;
                }
                if (isLibraryDriver(driverObject._driver)) {
                    reject(namingError);
                    return;
                }

                var customDriverMethods = LibraryMethods.concat('_initStorage');
                for (var i = 0; i < customDriverMethods.length; i++) {
                    var customDriverMethod = customDriverMethods[i];
                    if (!customDriverMethod || !driverObject[customDriverMethod] || typeof driverObject[customDriverMethod] !== 'function') {
                        reject(complianceError);
                        return;
                    }
                }

                var supportPromise = Promise$1.resolve(true);
                if ('_support' in driverObject) {
                    if (driverObject._support && typeof driverObject._support === 'function') {
                        supportPromise = driverObject._support();
                    } else {
                        supportPromise = Promise$1.resolve(!!driverObject._support);
                    }
                }

                supportPromise.then(function (supportResult) {
                    driverSupport[driverName] = supportResult;
                    CustomDrivers[driverName] = driverObject;
                    resolve();
                }, reject);
            } catch (e) {
                reject(e);
            }
        });

        executeTwoCallbacks(promise, callback, errorCallback);
        return promise;
    };

    LocalForage.prototype.driver = function driver() {
        return this._driver || null;
    };

    LocalForage.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {
        var self = this;
        var getDriverPromise = Promise$1.resolve().then(function () {
            if (isLibraryDriver(driverName)) {
                switch (driverName) {
                    case self.INDEXEDDB:
                        return asyncStorage;
                    case self.LOCALSTORAGE:
                        return localStorageWrapper;
                    case self.WEBSQL:
                        return webSQLStorage;
                }
            } else if (CustomDrivers[driverName]) {
                return CustomDrivers[driverName];
            } else {
                throw new Error('Driver not found.');
            }
        });
        executeTwoCallbacks(getDriverPromise, callback, errorCallback);
        return getDriverPromise;
    };

    LocalForage.prototype.getSerializer = function getSerializer(callback) {
        var serializerPromise = Promise$1.resolve(localforageSerializer);
        executeTwoCallbacks(serializerPromise, callback);
        return serializerPromise;
    };

    LocalForage.prototype.ready = function ready(callback) {
        var self = this;

        var promise = self._driverSet.then(function () {
            if (self._ready === null) {
                self._ready = self._initDriver();
            }

            return self._ready;
        });

        executeTwoCallbacks(promise, callback, callback);
        return promise;
    };

    LocalForage.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {
        var self = this;

        if (!isArray(drivers)) {
            drivers = [drivers];
        }

        var supportedDrivers = this._getSupportedDrivers(drivers);

        function setDriverToConfig() {
            self._config.driver = self.driver();
        }

        function extendSelfWithDriver(driver) {
            self._extend(driver);
            setDriverToConfig();

            self._ready = self._initStorage(self._config);
            return self._ready;
        }

        function initDriver(supportedDrivers) {
            return function () {
                var currentDriverIndex = 0;

                function driverPromiseLoop() {
                    while (currentDriverIndex < supportedDrivers.length) {
                        var driverName = supportedDrivers[currentDriverIndex];
                        currentDriverIndex++;

                        self._dbInfo = null;
                        self._ready = null;

                        return self.getDriver(driverName).then(extendSelfWithDriver)["catch"](driverPromiseLoop);
                    }

                    setDriverToConfig();
                    var error = new Error('No available storage method found.');
                    self._driverSet = Promise$1.reject(error);
                    return self._driverSet;
                }

                return driverPromiseLoop();
            };
        }

        // There might be a driver initialization in progress
        // so wait for it to finish in order to avoid a possible
        // race condition to set _dbInfo
        var oldDriverSetDone = this._driverSet !== null ? this._driverSet["catch"](function () {
            return Promise$1.resolve();
        }) : Promise$1.resolve();

        this._driverSet = oldDriverSetDone.then(function () {
            var driverName = supportedDrivers[0];
            self._dbInfo = null;
            self._ready = null;

            return self.getDriver(driverName).then(function (driver) {
                self._driver = driver._driver;
                setDriverToConfig();
                self._wrapLibraryMethodsWithReady();
                self._initDriver = initDriver(supportedDrivers);
            });
        })["catch"](function () {
            setDriverToConfig();
            var error = new Error('No available storage method found.');
            self._driverSet = Promise$1.reject(error);
            return self._driverSet;
        });

        executeTwoCallbacks(this._driverSet, callback, errorCallback);
        return this._driverSet;
    };

    LocalForage.prototype.supports = function supports(driverName) {
        return !!driverSupport[driverName];
    };

    LocalForage.prototype._extend = function _extend(libraryMethodsAndProperties) {
        extend(this, libraryMethodsAndProperties);
    };

    LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {
        var supportedDrivers = [];
        for (var i = 0, len = drivers.length; i < len; i++) {
            var driverName = drivers[i];
            if (this.supports(driverName)) {
                supportedDrivers.push(driverName);
            }
        }
        return supportedDrivers;
    };

    LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {
        // Add a stub for each driver API method that delays the call to the
        // corresponding driver method until localForage is ready. These stubs
        // will be replaced by the driver methods as soon as the driver is
        // loaded, so there is no performance impact.
        for (var i = 0; i < LibraryMethods.length; i++) {
            callWhenReady(this, LibraryMethods[i]);
        }
    };

    LocalForage.prototype.createInstance = function createInstance(options) {
        return new LocalForage(options);
    };

    return LocalForage;
}();

// The actual localForage object that we expose as a module or via a
// global. It's extended by pulling in one of our other libraries.


var localforage_js = new LocalForage();

module.exports = localforage_js;

},{"3":3}]},{},[4])(4)
});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],27:[function(require,module,exports){
(function (global){
// OpenLayers. See https://openlayers.org/
// License: https://raw.githubusercontent.com/openlayers/openlayers/master/LICENSE.md
;(function (root, factory) {
  if (typeof exports === "object") {
    module.exports = factory();
  } else if (typeof define === "function" && define.amd) {
    define([], factory);
  } else {
    root.ol = factory();
  }
}(this, function () {
  var OPENLAYERS = {};
  for(var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ca="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,da=["Math","cosh"],ea=0;ea<da.length-1;ea++){var ha=da[ea];ha in ca||(ca[ha]={});ca=ca[ha]}
var ia=da[da.length-1],ja=ca[ia],ka=function(){if(ja)return ja;var a=Math.exp;return function(b){b=Number(b);return(a(b)+a(-b))/2}}();ka!=ja&&null!=ka&&aa(ca,ia,{configurable:!0,writable:!0,value:ka});var la=this;function r(a,b){var c=OPENLAYERS,d=a.split("."),c=c||la;d[0]in c||!c.execScript||c.execScript("var "+d[0]);for(var e;d.length&&(e=d.shift());)d.length||void 0===b?c[e]&&Object.prototype.hasOwnProperty.call(c,e)?c=c[e]:c=c[e]={}:c[e]=b};function ma(a,b){return a>b?1:a<b?-1:0}function na(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(0<c)for(c=1;c<d;++c){if(a[c]<b)return c-1}else if(0>c)for(c=1;c<d;++c){if(a[c]<=b)return c}else for(c=1;c<d;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1}function oa(a,b){var c,d=Array.isArray(b)?b:[b],e=d.length;for(c=0;c<e;c++)a[a.length]=d[c]}function pa(a,b){var c=a.length;if(c!==b.length)return!1;for(var d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}
function qa(a){var b=ra,c=a.length,d=Array(a.length),e;for(e=0;e<c;e++)d[e]={index:e,value:a[e]};d.sort(function(a,c){return b(a.value,c.value)||a.index-c.index});for(e=0;e<a.length;e++)a[e]=d[e].value}function sa(a,b){var c=b||ma;return a.every(function(b,e){if(!e)return!0;var d=c(a[e-1],b);return!(0<d||0===d)})};function t(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function ta(){}function w(a){return a.Fh||(a.Fh=++ua)}var ua=0;function wa(a){this.message="Assertion failed. See https://openlayers.org/en/latest/doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}t(wa,Error);function x(a,b){if(!a)throw new wa(b);};function xa(a,b,c,d){this.M=a;this.O=b;this.P=c;this.S=d}function ya(a,b,c){return a.M<=b&&b<=a.O&&a.P<=c&&c<=a.S}function za(a,b){return a.M<=b.O&&a.O>=b.M&&a.P<=b.S&&a.S>=b.P};function Aa(a,b,c){return Math.min(Math.max(a,b),c)}var Ba=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();function Ca(a,b,c,d){a=c-a;b=d-b;return a*a+b*b}function Da(a){return a*Math.PI/180}function Fa(a,b){var c=a%b;return 0>c*b?c+b:c}function Ga(a,b,c){return a+c*(b-a)};function Ha(a,b,c){void 0===c&&(c=[0,0]);c[0]=a[0]+2*b;c[1]=a[1]+2*b;return c}function Ia(a,b,c){void 0===c&&(c=[0,0]);c[0]=a[0]*b+.5|0;c[1]=a[1]*b+.5|0;return c}function Ja(a,b){if(Array.isArray(a))return a;void 0===b?b=[a,a]:b[0]=b[1]=a;return b};function Ka(a){for(var b=La(),c=0,d=a.length;c<d;++c)Ma(b,a[c]);return b}function Na(a,b,c){return c?(c[0]=a[0]-b,c[1]=a[1]-b,c[2]=a[2]+b,c[3]=a[3]+b,c):[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}function Oa(a,b){return b?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):a.slice()}function Pa(a,b,c){b=b<a[0]?a[0]-b:a[2]<b?b-a[2]:0;a=c<a[1]?a[1]-c:a[3]<c?c-a[3]:0;return b*b+a*a}function Qa(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]}function La(){return[Infinity,Infinity,-Infinity,-Infinity]}
function Ra(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function Sa(a){return Ra(Infinity,Infinity,-Infinity,-Infinity,a)}function Ta(a,b){var c=a[0],d=a[1];return Ra(c,d,c,d,b)}function Ua(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]}function Ma(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])}
function Va(a,b,c,d,e){for(;c<d;c+=e){var f=a,g=b[c],h=b[c+1];f[0]=Math.min(f[0],g);f[1]=Math.min(f[1],h);f[2]=Math.max(f[2],g);f[3]=Math.max(f[3],h)}return a}function Wa(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function Xa(a,b,c,d,e){var f=b*d[0]/2;d=b*d[1]/2;b=Math.cos(c);var g=Math.sin(c);c=f*b;f*=g;b*=d;var h=d*g,k=a[0],m=a[1];a=k-c+h;d=k-c-h;g=k+c-h;c=k+c+h;var h=m-f-b,k=m-f+b,n=m+f+b,f=m+f-b;return Ra(Math.min(a,d,g,c),Math.min(h,k,n,f),Math.max(a,d,g,c),Math.max(h,k,n,f),e)}
function Ya(a,b){var c=La();Za(a,b)&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]);return c}function $a(a){return[a[0],a[3]]}function ab(a){return a[2]-a[0]}function Za(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]};var bb="function"===typeof Object.assign?Object.assign:function(a,b){if(!a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;d<e;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c};function cb(a){for(var b in a)delete a[b]}function db(a){var b=[],c;for(c in a)b.push(a[c]);return b}function eb(a){for(var b in a)return!1;return!b};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function fb(a){this.radius=a}fb.prototype.f=function(a){for(var b=0,c=a.length,d=a[c-1][0],e=a[c-1][1],f=0;f<c;f++)var g=a[f][0],h=a[f][1],b=b+Da(g-d)*(2+Math.sin(Da(e))+Math.sin(Da(h))),d=g,e=h;return b*this.radius*this.radius/2};fb.prototype.b=function(a,b){var c=Da(a[1]),d=Da(b[1]),e=(d-c)/2,f=Da(b[0]-a[0])/2,c=Math.sin(e)*Math.sin(e)+Math.sin(f)*Math.sin(f)*Math.cos(c)*Math.cos(d);return 2*this.radius*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))};
fb.prototype.offset=function(a,b,c){var d=Da(a[1]);b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(Da(a[0])+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};var gb=new fb(6370997);var hb={};hb.degrees=2*Math.PI*gb.radius/360;hb.ft=.3048;hb.m=1;hb["us-ft"]=1200/3937;function ib(a){this.Ia=a.code;this.a=a.units;this.j=void 0!==a.extent?a.extent:null;this.b=void 0!==a.axisOrientation?a.axisOrientation:"enu";this.i=void 0!==a.global?a.global:!1;this.c=!(!this.i||!this.j);this.o=a.getPointResolution;this.g=null;this.u=a.metersPerUnit;var b=a.code,c=window.proj4;"function"==typeof c&&(b=c.defs(b),void 0!==b&&(void 0!==b.axis&&void 0===a.axisOrientation&&(this.b=b.axis),void 0===a.metersPerUnit&&(this.u=b.to_meter),void 0===a.units&&(this.a=b.units)))}
ib.prototype.J=function(){return this.j};ib.prototype.f=function(){return this.u||hb[this.a]};function jb(a){ib.call(this,{code:a,units:"m",extent:kb,global:!0,worldExtent:lb,getPointResolution:function(a,c){return a/Ba(c[1]/6378137)}})}t(jb,ib);var mb=6378137*Math.PI,kb=[-mb,-mb,mb,mb],lb=[-180,-85,180,85],nb="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(a){return new jb(a)});
function ob(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c){b[e]=mb*a[e]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));f>mb?f=mb:f<-mb&&(f=-mb);b[e+1]=f}return b}function rb(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/mb,b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b};var sb=new fb(6378137);function tb(a,b){ib.call(this,{code:a,units:"degrees",extent:vb,axisOrientation:b,global:!0,metersPerUnit:wb,worldExtent:vb})}t(tb,ib);var vb=[-180,-90,180,90],wb=Math.PI*sb.radius/180,xb=[new tb("CRS:84"),new tb("EPSG:4326","neu"),new tb("urn:ogc:def:crs:EPSG::4326","neu"),new tb("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new tb("urn:ogc:def:crs:OGC:1.3:CRS84"),new tb("urn:ogc:def:crs:OGC:2:84"),new tb("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new tb("urn:x-ogc:def:crs:EPSG:4326","neu")];var yb={};var zb={};function Ab(a,b,c){a=a.Ia;b=b.Ia;a in zb||(zb[a]={});zb[a][b]=c}function Bb(a,b){var c;a in zb&&b in zb[a]&&(c=zb[a][b]);return c};function Cb(a){Db(a);a.forEach(function(b){a.forEach(function(a){b!==a&&Ab(b,a,Eb)})})}function Fb(a){yb[a.Ia]=a;Ab(a,a,Eb)}function Db(a){var b=[];a.forEach(function(a){b.push(Fb(a))})}function Gb(a){return a?"string"===typeof a?Hb(a):a:Hb("EPSG:3857")}function Ib(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2;c=void 0!==c?c:Array(e);var f,g;for(g=0;g<e;g+=d)for(f=a([b[g],b[g+1]]),c[g]=f[0],c[g+1]=f[1],f=d-1;2<=f;--f)c[g+f]=b[g+f];return c}}
function Hb(a){var b=null;if(a instanceof ib)b=a;else if("string"===typeof a){var b=yb[a]||null,c=window.proj4;b||"function"!=typeof c||void 0===c.defs(a)||(b=new ib({code:a}),Fb(b))}return b}function Jb(a,b){if(a===b)return!0;var c=a.a===b.a;return a.Ia===b.Ia?c:Kb(a,b)===Eb&&c}function Nb(a,b){var c=Hb(a),d=Hb(b);return Kb(c,d)}
function Kb(a,b){var c=a.Ia,d=b.Ia,e=Bb(c,d);if(!e){var f=window.proj4;if("function"==typeof f){var g=f.defs(c),h=f.defs(d);void 0!==g&&void 0!==h&&(g===h?Cb([b,a]):(f=f(d,c),e=f.forward,f=f.inverse,g=Hb(b),h=Hb(a),Ab(g,h,Ib(e)),Ab(h,g,Ib(f))),e=Bb(c,d))}}e||(e=Ob);return e}function Ob(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}function Eb(a,b){var c;if(void 0!==b){c=0;for(var d=a.length;c<d;++c)b[c]=a[c];c=b}else c=a.slice();return c}
function Pb(a,b,c){b=Nb(b,c);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);c=[a[0],a[2],a[4],a[6]];var d=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,c);b=Math.min.apply(null,d);c=Math.max.apply(null,c);d=Math.max.apply(null,d);return Ra(a,b,c,d,void 0)}Cb(nb);Cb(xb);xb.forEach(function(a){nb.forEach(function(b){Ab(a,b,ob);Ab(b,a,rb)})});function Qb(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0;this.b=a.resolutions;x(sa(this.b,function(a,b){return b-a}),17);this.maxZoom=this.b.length-1;this.f=void 0!==a.origin?a.origin:null;this.a=null;void 0!==a.origins&&(this.a=a.origins,x(this.a.length==this.b.length,20));var b=a.extent;void 0===b||this.f||this.a||(this.f=$a(b));x(!this.f&&this.a||this.f&&!this.a,18);this.g=null;void 0!==a.tileSizes&&(this.g=a.tileSizes,x(this.g.length==this.b.length,19));this.i=void 0!==a.tileSize?a.tileSize:
this.g?null:256;x(!this.i&&this.g||this.i&&!this.g,22);this.o=void 0!==b?b:null;this.c=null;this.u=[0,0];void 0!==a.sizes?this.c=a.sizes.map(function(a){return new xa(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):b&&Rb(this,b)}var Sb=[0,0,0];Qb.prototype.J=function(){return this.o};function Tb(a,b,c,d){Ub(a,b[0],b[1],c,!1,Sb);var e=Sb[1],f=Sb[2];Ub(a,b[2],b[3],c,!0,Sb);a=Sb[1];b=Sb[2];void 0!==d?(d.M=e,d.O=a,d.P=f,d.S=b):d=new xa(e,a,f,b);return d}
function Vb(a,b,c,d){return Tb(a,b,a.b[c],d)}function Wb(a,b){var c=a.f?a.f:a.a[b[0]],d=a.b[b[0]],e=Ja(Xb(a,b[0]),a.u);return[c[0]+(b[1]+.5)*e[0]*d,c[1]+(b[2]+.5)*e[1]*d]}function Yb(a,b,c){var d=a.f?a.f:a.a[b[0]],e=a.b[b[0]];a=Ja(Xb(a,b[0]),a.u);var f=d[0]+b[1]*a[0]*e;b=d[1]+b[2]*a[1]*e;return Ra(f,b,f+a[0]*e,b+a[1]*e,c)}
function Ub(a,b,c,d,e,f){var g=Zb(a,d),h=d/a.b[g],k=a.f?a.f:a.a[g];a=Ja(Xb(a,g),a.u);b=h*Math.floor((b-k[0])/d+(e?.5:0))/a[0];c=h*Math.floor((c-k[1])/d+(e?0:.5))/a[1];e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));e=b;void 0!==f?(f[0]=g,f[1]=e,f[2]=c):f=[g,e,c];return f}function Xb(a,b){return a.i?a.i:a.g[b]}function Zb(a,b,c){return Aa(na(a.b,b,c||0),a.minZoom,a.maxZoom)}function Rb(a,b){for(var c=a.b.length,d=Array(c),e=a.minZoom;e<c;++e)d[e]=Vb(a,b,e);a.c=d};function $b(a){var b={};bb(b,a?a:{});void 0===b.extent&&(b.extent=Hb("EPSG:3857").J());b.resolutions=ac(b.extent,b.maxZoom,b.tileSize);delete b.maxZoom;return new Qb(b)}function ac(a,b,c){b=void 0!==b?b:42;var d=a[3]-a[1];a=ab(a);c=Ja(void 0!==c?c:256);c=Math.max(a/c[0],d/c[1]);b+=1;d=Array(b);for(a=0;a<b;++a)d[a]=c/Math.pow(2,a);return d}function bc(a){a=Hb(a);var b=a.J();b||(a=180*hb.degrees/a.f(),b=Ra(-a,-a,a,a));return b};function ec(a){this.f=a.html;this.b=a.tileRanges?a.tileRanges:null};function fc(a){return function(b){if(b)return[Aa(b[0],a[0],a[2]),Aa(b[1],a[1],a[3])]}}function gc(a){return a};function hc(a){function b(b){var c=a.listener,e=a.Jd||a.target;a.Md&&ic(a);return c.call(e,b)}return a.Kd=b}function jc(a,b,c,d){for(var e,f=0,g=a.length;f<g;++f)if(e=a[f],e.listener===b&&e.Jd===c)return d&&(e.deleteIndex=f),e}function kc(a,b){var c=a.La;return c?c[b]:void 0}function lc(a){var b=a.La;b||(b=a.La={});return b}
function mc(a,b){var c=kc(a,b);if(c){for(var d=0,e=c.length;d<e;++d)a.removeEventListener(b,c[d].Kd),cb(c[d]);c.length=0;if(c=a.La)delete c[b],Object.keys(c).length||delete a.La}}function y(a,b,c,d,e){var f=lc(a),g=f[b];g||(g=f[b]=[]);(f=jc(g,c,d,!1))?e||(f.Md=!1):(f={Jd:d,Md:!!e,listener:c,target:a,type:b},a.addEventListener(b,hc(f)),g.push(f));return f}function nc(a,b,c,d){(a=kc(a,b))&&(c=jc(a,c,d,!0))&&ic(c)}
function ic(a){if(a&&a.target){a.target.removeEventListener(a.type,a.Kd);var b=kc(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);b.length||mc(a.target,a.type)}cb(a)}};function oc(){}oc.prototype.tb=!1;function pc(a){a.tb||(a.tb=!0,a.ka())}oc.prototype.ka=ta;function qc(a){this.type=a;this.target=null}qc.prototype.preventDefault=qc.prototype.stopPropagation=function(){this.Th=!0};function rc(a){a.stopPropagation()};function sc(){this.Aa={};this.ga={};this.aa={}}t(sc,oc);sc.prototype.addEventListener=function(a,b){var c=this.aa[a];c||(c=this.aa[a]=[]);-1===c.indexOf(b)&&c.push(b)};function A(a,b){var c="string"===typeof b?new qc(b):b,d=c.type;c.target=a;var e=a.aa[d],f;if(e){d in a.ga||(a.ga[d]=0,a.Aa[d]=0);++a.ga[d];for(var g=0,h=e.length;g<h;++g)if(!1===e[g].call(a,c)||c.Th){f=!1;break}--a.ga[d];if(!a.ga[d]){c=a.Aa[d];for(delete a.Aa[d];c--;)a.removeEventListener(d,ta);delete a.ga[d]}return f}}
sc.prototype.ka=function(){var a=lc(this),b;for(b in a)mc(this,b)};function tc(a,b){return b?b in a.aa:0<Object.keys(a.aa).length}sc.prototype.removeEventListener=function(a,b){var c=this.aa[a];if(c){var d=c.indexOf(b);a in this.Aa?(c[d]=ta,++this.Aa[a]):(c.splice(d,1),c.length||delete this.aa[a])}};function uc(){sc.call(this);this.f=0}t(uc,sc);uc.prototype.b=function(){++this.f;A(this,"change")};uc.prototype.u=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=y(this,a[f],b,c);return e}return y(this,a,b,c)};uc.prototype.once=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=y(this,a[f],b,c,!0);return e}return y(this,a,b,c,!0)};
uc.prototype.fa=function(a,b,c){if(Array.isArray(a))for(var d=0,e=a.length;d<e;++d)nc(this,a[d],b,c);else nc(this,a,b,c)};function vc(a){uc.call(this);w(this);this.K={};void 0!==a&&this.oa(a)}t(vc,uc);var wc={};function xc(a){return wc.hasOwnProperty(a)?wc[a]:wc[a]="change:"+a}l=vc.prototype;l.get=function(a){var b;this.K.hasOwnProperty(a)&&(b=this.K[a]);return b};l.Fa=function(){return bb({},this.K)};function yc(a,b,c){var d;d=xc(b);A(a,new zc(d,b,c));A(a,new zc("propertychange",b,c))}l.set=function(a,b,c){c?this.K[a]=b:(c=this.K[a],this.K[a]=b,c!==b&&yc(this,a,c))};
l.oa=function(a,b){for(var c in a)this.set(c,a[c],b)};l.vi=function(a,b){if(a in this.K){var c=this.K[a];delete this.K[a];b||yc(this,a,c)}};function zc(a,b,c){qc.call(this,a);this.key=b;this.oldValue=c}t(zc,qc);function Ac(a,b){vc.call(this);this.c=!!(b||{}).unique;this.a=a?a:[];if(this.c)for(var c=0,d=this.a.length;c<d;++c)Bc(this,this.a[c],c);Cc(this)}t(Ac,vc);l=Ac.prototype;l.clear=function(){for(;0<this.Wa();)this.pop()};function Dc(a,b){var c,d;c=0;for(d=b.length;c<d;++c)a.push(b[c])}l.forEach=function(a,b){this.a.forEach(a,b)};l.Tf=function(){return this.a};l.be=function(a){return this.a[a]};l.Wa=function(){return this.get(Ec)};l.pop=function(){return Fc(this,this.Wa()-1)};
l.push=function(a){this.c&&Bc(this,a);var b=this.Wa();this.c&&Bc(this,a);this.a.splice(b,0,a);Cc(this);A(this,new Gc("add",a));return this.Wa()};l.remove=function(a){var b=this.a,c,d;c=0;for(d=b.length;c<d;++c)if(b[c]===a)return Fc(this,c)};function Fc(a,b){var c=a.a[b];a.a.splice(b,1);Cc(a);A(a,new Gc("remove",c));return c}function Cc(a){a.set(Ec,a.a.length)}function Bc(a,b,c){for(var d=0,e=a.a.length;d<e;++d)if(a.a[d]===b&&d!==c)throw new wa(58);}var Ec="length";
function Gc(a,b){qc.call(this,a);this.element=b}t(Gc,qc);var Hc=/^#(?:[0-9a-f]{3}){1,2}$/i,Ic=/^([a-z]*)$/i;function Jc(a){if("string"!==typeof a){var b=a[0];b!=(b|0)&&(b=b+.5|0);var c=a[1];c!=(c|0)&&(c=c+.5|0);var d=a[2];d!=(d|0)&&(d=d+.5|0);a="rgba("+b+","+c+","+d+","+(void 0===a[3]?1:a[3])+")"}return a}
var Lc=function(){var a={},b=0;return function(c){var d;if(a.hasOwnProperty(c))d=a[c];else{if(1024<=b){d=0;for(var e in a)d++&3||(delete a[e],--b)}d=c;var f;Ic.exec(d)&&(e=document.createElement("div"),e.style.color=d,document.body.appendChild(e),d=getComputedStyle(e).color,document.body.removeChild(e));if(Hc.exec(d)){f=d.length-1;x(3==f||6==f,54);var g=3==f?1:2;f=parseInt(d.substr(1+0*g,g),16);e=parseInt(d.substr(1+1*g,g),16);d=parseInt(d.substr(1+2*g,g),16);1==g&&(f=(f<<4)+f,e=(e<<4)+e,d=(d<<4)+
d);f=[f,e,d,1]}else d.indexOf("rgba(")?d.indexOf("rgb(")?x(!1,14):(d=d.slice(4,-1).split(",").map(Number),d.push(1),f=Kc(d)):(d=d.slice(5,-1).split(",").map(Number),f=Kc(d));d=f;a[c]=d;++b}return d}}();function Kc(a){var b=[];b[0]=Aa(a[0]+.5|0,0,255);b[1]=Aa(a[1]+.5|0,0,255);b[2]=Aa(a[2]+.5|0,0,255);b[3]=Aa(a[3],0,1);return b};function Mc(a){return"string"===typeof a||a instanceof CanvasPattern||a instanceof CanvasGradient?a:Jc(a)};function Nc(a,b,c){this.center=a;this.resolution=b;this.rotation=c};function Oc(a,b){var c=document.createElement("CANVAS");a&&(c.width=a);b&&(c.height=b);return c.getContext("2d")}function Pc(a){a&&a.parentNode&&a.parentNode.removeChild(a)};function Qc(a){vc.call(this);this.element=a.element?a.element:null;this.v=this.I=null;this.s=[];this.render=a.render?a.render:ta;a.target&&(a=a.target,this.I="string"===typeof a?document.getElementById(a):a)}t(Qc,vc);Qc.prototype.ka=function(){Pc(this.element);vc.prototype.ka.call(this)};
Qc.prototype.setMap=function(a){this.v&&Pc(this.element);for(var b=0,c=this.s.length;b<c;++b)ic(this.s[b]);this.s.length=0;if(this.v=a)(this.I?this.I:a.v).appendChild(this.element),this.render!==ta&&this.s.push(y(a,"postrender",this.render,this)),a.render()};function Rc(a){a=a?a:{};this.G=document.createElement("UL");this.o=document.createElement("LI");this.G.appendChild(this.o);this.o.style.display="none";this.c=void 0!==a.collapsed?a.collapsed:!0;this.i=void 0!==a.collapsible?a.collapsible:!0;this.i||(this.c=!1);var b=void 0!==a.className?a.className:"ol-attribution",c=void 0!==a.tipLabel?a.tipLabel:"Attributions",d=void 0!==a.collapseLabel?a.collapseLabel:"\u00bb";"string"===typeof d?(this.j=document.createElement("span"),this.j.textContent=d):this.j=
d;d=void 0!==a.label?a.label:"i";"string"===typeof d?(this.B=document.createElement("span"),this.B.textContent=d):this.B=d;var e=this.i&&!this.c?this.j:this.B,d=document.createElement("button");d.setAttribute("type","button");d.title=c;d.appendChild(e);y(d,"click",this.W,this);c=document.createElement("div");c.className=b+" ol-unselectable ol-control"+(this.c&&this.i?" ol-collapsed":"")+(this.i?"":" ol-uncollapsible");c.appendChild(this.G);c.appendChild(d);Qc.call(this,{element:c,render:a.render?
a.render:Sc,target:a.target});this.C=!0;this.g={};this.a={};this.V={}}t(Rc,Qc);
function Sc(a){if(a=a.frameState){var b,c,d,e,f,g,h,k,m,n,p,q=a.layerStatesArray,u=bb({},a.attributions),F={},z={},C=a.viewState.projection;c=0;for(b=q.length;c<b;c++)if(g=q[c].layer.da())if(n=w(g).toString(),m=g.V)for(d=0,e=m.length;d<e;d++)if(h=m[d],k=w(h).toString(),!(k in u)){if(f=a.usedTiles[n]){var D=g.Ma(C);a:{p=void 0;var E,Q,fa=h,ga=D,X=C;if(fa.b){for(p in f)if(p in fa.b){var D=f[p],v;Q=0;for(E=fa.b[p].length;Q<E;++Q){v=fa.b[p][Q];if(za(v,D)){p=!0;break a}var T=Vb(ga,bc(X),parseInt(p,10)),
ba=T.O-T.M+1;if(D.M<T.M||D.O>T.O)if(za(v,new xa(Fa(D.M,ba),Fa(D.O,ba),D.P,D.S))||D.O-D.M+1>ba&&za(v,T)){p=!0;break a}}}p=!1}else p=!0}}else p=!1;p?(k in F&&delete F[k],p=h.f,p in z||(z[p]=!0,u[k]=h)):F[k]=h}b=[u,F];c=b[0];b=b[1];for(var H in this.g)H in c?(this.a[H]||(this.g[H].style.display="",this.a[H]=!0),delete c[H]):H in b?(this.a[H]&&(this.g[H].style.display="none",delete this.a[H]),delete b[H]):(Pc(this.g[H]),delete this.g[H],delete this.a[H]);for(H in c)d=document.createElement("LI"),d.innerHTML=
c[H].f,this.G.appendChild(d),this.g[H]=d,this.a[H]=!0;for(H in b)d=document.createElement("LI"),d.innerHTML=b[H].f,d.style.display="none",this.G.appendChild(d),this.g[H]=d;H=!eb(this.a)||!eb(a.logos);this.C!=H&&(this.element.style.display=H?"":"none",this.C=H);H&&eb(this.a)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var N;a=a.logos;H=this.V;for(N in H)N in a||(Pc(H[N]),delete H[N]);for(var Ea in a)b=a[Ea],b instanceof HTMLElement&&(this.o.appendChild(b),
H[Ea]=b),Ea in H||(N=new Image,N.src=Ea,""===b?c=N:(c=document.createElement("a"),c.href=b,c.appendChild(N)),this.o.appendChild(c),H[Ea]=c);this.o.style.display=eb(a)?"none":""}else this.C&&(this.element.style.display="none",this.C=!1)}Rc.prototype.W=function(a){a.preventDefault();Tc(this)};function Tc(a){a.element.classList.toggle("ol-collapsed");if(a.c){var b=a.B,c=b.parentNode;c&&c.replaceChild(a.j,b)}else b=a.j,(c=b.parentNode)&&c.replaceChild(a.B,b);a.c=!a.c}
Rc.prototype.ca=function(a){this.i!==a&&(this.i=a,this.element.classList.toggle("ol-uncollapsible"),!a&&this.c&&Tc(this))};Rc.prototype.$=function(a){this.i&&this.c!==a&&Tc(this)};function Uc(a){return 1-Math.pow(1-a,3)}function Vc(a){return 3*a*a-2*a*a*a}function Wc(a){return a};function Xc(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-rotate",c=void 0!==a.label?a.label:"\u21e7";this.a=null;"string"===typeof c?(this.a=document.createElement("span"),this.a.className="ol-compass",this.a.textContent=c):(this.a=c,this.a.classList.add("ol-compass"));var d=a.tipLabel?a.tipLabel:"Reset rotation",c=document.createElement("button");c.className=b+"-reset";c.setAttribute("type","button");c.title=d;c.appendChild(this.a);y(c,"click",Xc.prototype.o,this);d=document.createElement("div");
d.className=b+" ol-unselectable ol-control";d.appendChild(c);b=a.render?a.render:Yc;this.g=a.resetNorth?a.resetNorth:void 0;Qc.call(this,{element:d,render:b,target:a.target});this.i=void 0!==a.duration?a.duration:250;this.c=void 0!==a.autoHide?a.autoHide:!0;this.j=void 0;this.c&&this.element.classList.add("ol-hidden")}t(Xc,Qc);
Xc.prototype.o=function(a){a.preventDefault();this.g?this.g():(a=this.v.Z())&&void 0!==Zc(a)&&(0<this.i?a.animate({rotation:0,duration:this.i,easing:Uc}):(a.set("rotation",0),0<$c(a)[0]&&ad(a)))};
function Yc(a){if(a=a.frameState){a=a.viewState.rotation;if(a!=this.j){var b="rotate("+a+"rad)";if(this.c){var c=this.element.classList.contains("ol-hidden");c||a?c&&a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.a.style.msTransform=b;this.a.style.webkitTransform=b;this.a.style.transform=b}this.j=a}};function bd(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-zoom",c=void 0!==a.delta?a.delta:1,d=void 0!==a.zoomInLabel?a.zoomInLabel:"+",e=void 0!==a.zoomOutLabel?a.zoomOutLabel:"\u2212",f=void 0!==a.zoomInTipLabel?a.zoomInTipLabel:"Zoom in",g=void 0!==a.zoomOutTipLabel?a.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=b+"-in";h.setAttribute("type","button");h.title=f;h.appendChild("string"===typeof d?document.createTextNode(d):d);y(h,"click",bd.prototype.c.bind(this,
c));d=document.createElement("button");d.className=b+"-out";d.setAttribute("type","button");d.title=g;d.appendChild("string"===typeof e?document.createTextNode(e):e);y(d,"click",bd.prototype.c.bind(this,-c));c=document.createElement("div");c.className=b+" ol-unselectable ol-control";c.appendChild(h);c.appendChild(d);Qc.call(this,{element:c,target:a.target});this.a=void 0!==a.duration?a.duration:250}t(bd,Qc);
bd.prototype.c=function(a,b){b.preventDefault();var c=this.v.Z();if(c){var d=c.va();d&&(d=c.constrainResolution(d,a),0<this.a?(0<$c(c)[0]&&ad(c),c.animate({resolution:d,duration:this.a,easing:Uc})):cd(c,d))}};function dd(a){a=a?a:{};var b=new Ac;(void 0!==a.zoom?a.zoom:1)&&b.push(new bd(a.zoomOptions));(void 0!==a.rotate?a.rotate:1)&&b.push(new Xc(a.rotateOptions));(void 0!==a.attribution?a.attribution:1)&&b.push(new Rc(a.attributionOptions));return b};function ed(a,b,c){qc.call(this,a);this.map=b;this.frameState=void 0!==c?c:null}t(ed,qc);function fd(a,b,c,d,e){ed.call(this,a,b,e);this.originalEvent=c;a=b.a.getBoundingClientRect();c=c.changedTouches?c.changedTouches[0]:c;this.pixel=[c.clientX-a.left,c.clientY-a.top];this.coordinate=b.Ea(this.pixel);this.dragging=void 0!==d?d:!1}t(fd,ed);fd.prototype.preventDefault=function(){ed.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};fd.prototype.stopPropagation=function(){ed.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};var gd={Mi:"singleclick",Ai:"click",Bi:"dblclick",Ei:"pointerdrag",Hi:"pointermove",Di:"pointerdown",Ki:"pointerup",Ji:"pointerover",Ii:"pointerout",Fi:"pointerenter",Gi:"pointerleave",Ci:"pointercancel"};function hd(a,b,c,d,e){fd.call(this,a,b,c.b,d,e);this.b=c}t(hd,fd);var id="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",jd=-1!==id.indexOf("firefox"),kd=-1!==id.indexOf("safari")&&-1==id.indexOf("chrom"),ld=-1!==id.indexOf("webkit")&&-1==id.indexOf("edge"),md=-1!==id.indexOf("macintosh"),nd=window.devicePixelRatio||1,od=!1,pd=function(){if(!("HTMLCanvasElement"in window))return!1;try{var a=document.createElement("CANVAS").getContext("2d");return a?(void 0!==a.setLineDash&&(od=!0),!0):!1}catch(b){return!1}}(),qd="geolocation"in navigator,rd=
"ontouchstart"in window,sd="PointerEvent"in window,td=!!navigator.msPointerEnabled;function ud(a,b){this.b=a;this.g=b};function vd(a){ud.call(this,a,{mousedown:this.Eg,mousemove:this.Fg,mouseup:this.Ig,mouseover:this.Hg,mouseout:this.Gg});this.f=a.f;this.a=[]}t(vd,ud);function wd(a,b){for(var c=a.a,d=b.clientX,e=b.clientY,f=0,g=c.length,h;f<g&&(h=c[f]);f++){var k=Math.abs(e-h[1]);if(25>=Math.abs(d-h[0])&&25>=k)return!0}return!1}function xd(a){var b=yd(a,a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=1;b.isPrimary=!0;b.pointerType="mouse";return b}l=vd.prototype;
l.Eg=function(a){if(!wd(this,a)){(1).toString()in this.f&&this.cancel(a);var b=xd(a);this.f[(1).toString()]=a;zd(this.b,"pointerdown",b,a)}};l.Fg=function(a){if(!wd(this,a)){var b=xd(a);zd(this.b,"pointermove",b,a)}};l.Ig=function(a){if(!wd(this,a)){var b=this.f[(1).toString()];b&&b.button===a.button&&(b=xd(a),zd(this.b,"pointerup",b,a),delete this.f[(1).toString()])}};l.Hg=function(a){if(!wd(this,a)){var b=xd(a);Ad(this.b,b,a)}};l.Gg=function(a){if(!wd(this,a)){var b=xd(a);Bd(this.b,b,a)}};
l.cancel=function(a){var b=xd(a);this.b.cancel(b,a);delete this.f[(1).toString()]};function Cd(a){ud.call(this,a,{MSPointerDown:this.Ng,MSPointerMove:this.Og,MSPointerUp:this.Rg,MSPointerOut:this.Pg,MSPointerOver:this.Qg,MSPointerCancel:this.Mg,MSGotPointerCapture:this.Kg,MSLostPointerCapture:this.Lg});this.f=a.f;this.a=["","unavailable","touch","pen","mouse"]}t(Cd,ud);function Dd(a,b){var c=b;"number"===typeof b.pointerType&&(c=yd(b,b),c.pointerType=a.a[b.pointerType]);return c}l=Cd.prototype;
l.Ng=function(a){this.f[a.pointerId.toString()]=a;var b=Dd(this,a);zd(this.b,"pointerdown",b,a)};l.Og=function(a){var b=Dd(this,a);zd(this.b,"pointermove",b,a)};l.Rg=function(a){var b=Dd(this,a);zd(this.b,"pointerup",b,a);delete this.f[a.pointerId.toString()]};l.Pg=function(a){var b=Dd(this,a);Bd(this.b,b,a)};l.Qg=function(a){var b=Dd(this,a);Ad(this.b,b,a)};l.Mg=function(a){var b=Dd(this,a);this.b.cancel(b,a);delete this.f[a.pointerId.toString()]};
l.Lg=function(a){A(this.b,new Ed("lostpointercapture",a,a))};l.Kg=function(a){A(this.b,new Ed("gotpointercapture",a,a))};function Fd(a){ud.call(this,a,{pointerdown:this.Mh,pointermove:this.Nh,pointerup:this.Qh,pointerout:this.Oh,pointerover:this.Ph,pointercancel:this.Lh,gotpointercapture:this.eg,lostpointercapture:this.Cg})}t(Fd,ud);l=Fd.prototype;l.Mh=function(a){Gd(this.b,a)};l.Nh=function(a){Gd(this.b,a)};l.Qh=function(a){Gd(this.b,a)};l.Oh=function(a){Gd(this.b,a)};l.Ph=function(a){Gd(this.b,a)};l.Lh=function(a){Gd(this.b,a)};l.Cg=function(a){Gd(this.b,a)};l.eg=function(a){Gd(this.b,a)};function Ed(a,b,c){qc.call(this,a);this.b=b;a=c?c:{};this.buttons=Hd(a);this.pressure=Id(a,this.buttons);this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:
null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.pointerType="pointerType"in a?a.pointerType:"";this.isPrimary="isPrimary"in a?a.isPrimary:!1;b.preventDefault&&(this.preventDefault=function(){b.preventDefault()})}t(Ed,qc);function Hd(a){if(a.buttons||Jd)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}
function Id(a,b){var c=0;a.pressure?c=a.pressure:c=b?.5:0;return c}var Jd=!1;try{Jd=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){};function Kd(a,b){ud.call(this,a,{touchstart:this.ui,touchmove:this.ti,touchend:this.si,touchcancel:this.ri});this.f=a.f;this.u=b;this.a=void 0;this.i=0;this.c=void 0}t(Kd,ud);l=Kd.prototype;l.Pe=function(){this.i=0;this.c=void 0};
function Ld(a,b,c){b=yd(b,c);b.pointerId=c.identifier+2;b.bubbles=!0;b.cancelable=!0;b.detail=a.i;b.button=0;b.buttons=1;b.width=c.webkitRadiusX||c.radiusX||0;b.height=c.webkitRadiusY||c.radiusY||0;b.pressure=c.webkitForce||c.force||.5;b.isPrimary=a.a===c.identifier;b.pointerType="touch";b.clientX=c.clientX;b.clientY=c.clientY;b.screenX=c.screenX;b.screenY=c.screenY;return b}
function Md(a,b,c){function d(){b.preventDefault()}var e=Array.prototype.slice.call(b.changedTouches),f=e.length,g,h;for(g=0;g<f;++g)h=Ld(a,b,e[g]),h.preventDefault=d,c.call(a,b,h)}
l.ui=function(a){var b=a.touches,c=Object.keys(this.f),d=c.length;if(d>=b.length){var e=[],f,g,h;for(f=0;f<d;++f){g=c[f];h=this.f[g];var k;if(!(k=1==g))a:{for(var m=b.length,n=0;n<m;n++)if(k=b[n],k.identifier===g-2){k=!0;break a}k=!1}k||e.push(h.out)}for(f=0;f<e.length;++f)this.Bc(a,e[f])}b=a.changedTouches[0];c=Object.keys(this.f).length;if(!c||1===c&&(1).toString()in this.f)this.a=b.identifier,void 0!==this.c&&clearTimeout(this.c);Nd(this,a);this.i++;Md(this,a,this.Hh)};
l.Hh=function(a,b){this.f[b.pointerId]={target:b.target,out:b,Ce:b.target};var c=this.b;b.bubbles=!0;zd(c,"pointerover",b,a);c=this.b;b.bubbles=!1;zd(c,"pointerenter",b,a);zd(this.b,"pointerdown",b,a)};l.ti=function(a){a.preventDefault();Md(this,a,this.Jg)};
l.Jg=function(a,b){var c=this.f[b.pointerId];if(c){var d=c.out,e=c.Ce;zd(this.b,"pointermove",b,a);d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(Bd(this.b,d,a),Ad(this.b,b,a)):(b.target=e,b.relatedTarget=null,this.Bc(a,b)));c.out=b;c.Ce=b.target}};l.si=function(a){Nd(this,a);Md(this,a,this.wi)};
l.wi=function(a,b){zd(this.b,"pointerup",b,a);this.b.out(b,a);Od(this.b,b,a);delete this.f[b.pointerId];b.isPrimary&&(this.a=void 0,this.c=setTimeout(this.Pe.bind(this),200))};l.ri=function(a){Md(this,a,this.Bc)};l.Bc=function(a,b){this.b.cancel(b,a);this.b.out(b,a);Od(this.b,b,a);delete this.f[b.pointerId];b.isPrimary&&(this.a=void 0,this.c=setTimeout(this.Pe.bind(this),200))};
function Nd(a,b){var c=a.u.a,d=b.changedTouches[0];if(a.a===d.identifier){var e=[d.clientX,d.clientY];c.push(e);setTimeout(function(){var a=c.indexOf(e);-1<a&&c.splice(a,1)},2500)}};function Pd(a){sc.call(this);this.g=a;this.f={};this.c={};this.b=[];sd?Qd(this,new Fd(this)):td?Qd(this,new Cd(this)):(a=new vd(this),Qd(this,a),rd&&Qd(this,new Kd(this,a)));a=this.b.length;for(var b,c=0;c<a;c++)b=this.b[c],Rd(this,Object.keys(b.g))}t(Pd,sc);function Qd(a,b){var c=Object.keys(b.g);c&&(c.forEach(function(a){var c=b.g[a];c&&(this.c[a]=c.bind(b))},a),a.b.push(b))}Pd.prototype.a=function(a){var b=this.c[a.type];b&&b(a)};
function Rd(a,b){b.forEach(function(a){y(this.g,a,this.a,this)},a)}function Sd(a,b){b.forEach(function(a){nc(this.g,a,this.a,this)},a)}function yd(a,b){for(var c={},d,e=0,f=Td.length;e<f;e++)d=Td[e][0],c[d]=a[d]||b[d]||Td[e][1];return c}function Od(a,b,c){b.bubbles=!1;zd(a,"pointerleave",b,c)}Pd.prototype.out=function(a,b){a.bubbles=!0;zd(this,"pointerout",a,b)};Pd.prototype.cancel=function(a,b){zd(this,"pointercancel",a,b)};
function Bd(a,b,c){a.out(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||Od(a,b,c)}function Ad(a,b,c){b.bubbles=!0;zd(a,"pointerover",b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||(b.bubbles=!1,zd(a,"pointerenter",b,c))}function zd(a,b,c,d){A(a,new Ed(b,d,c))}function Gd(a,b){A(a,new Ed(b.type,b,b))}Pd.prototype.ka=function(){for(var a=this.b.length,b,c=0;c<a;c++)b=this.b[c],Sd(this,Object.keys(b.g));sc.prototype.ka.call(this)};
var Td=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function Ud(a){sc.call(this);this.a=a;this.i=0;this.u=!1;this.c=[];this.f=null;a=this.a.a;this.B=0;this.K={};this.g=new Pd(a);this.b=null;this.j=y(this.g,"pointerdown",this.ng,this);this.o=y(this.g,"pointermove",this.hi,this)}t(Ud,sc);function Vd(a,b){var c=new hd("click",a.a,b);A(a,c);a.i?(clearTimeout(a.i),a.i=0,c=new hd("dblclick",a.a,b),A(a,c)):a.i=setTimeout(function(){this.i=0;var a=new hd("singleclick",this.a,b);A(this,a)}.bind(a),250)}
function Wd(a,b){"pointerup"==b.type||"pointercancel"==b.type?delete a.K[b.pointerId]:"pointerdown"==b.type&&(a.K[b.pointerId]=!0);a.B=Object.keys(a.K).length}l=Ud.prototype;l.Yd=function(a){Wd(this,a);var b=new hd("pointerup",this.a,a);A(this,b);this.u||a.button||Vd(this,this.f);this.B||(this.c.forEach(ic),this.c.length=0,this.u=!1,this.f=null,pc(this.b),this.b=null)};
l.ng=function(a){Wd(this,a);var b=new hd("pointerdown",this.a,a);A(this,b);this.f=a;this.c.length||(this.b=new Pd(document),this.c.push(y(this.b,"pointermove",this.Zg,this),y(this.b,"pointerup",this.Yd,this),y(this.g,"pointercancel",this.Yd,this)))};l.Zg=function(a){if(a.clientX!=this.f.clientX||a.clientY!=this.f.clientY){this.u=!0;var b=new hd("pointerdrag",this.a,a,this.u);A(this,b)}a.preventDefault()};
l.hi=function(a){A(this,new hd(a.type,this.a,a,!(!this.f||a.clientX==this.f.clientX&&a.clientY==this.f.clientY)))};l.ka=function(){this.o&&(ic(this.o),this.o=null);this.j&&(ic(this.j),this.j=null);this.c.forEach(ic);this.c.length=0;this.b&&(pc(this.b),this.b=null);this.g&&(pc(this.g),this.g=null);sc.prototype.ka.call(this)};function Xd(a,b){this.o=a;this.c=b;this.b=[];this.f=[];this.a={}}Xd.prototype.clear=function(){this.b.length=0;this.f.length=0;cb(this.a)};Xd.prototype.u=function(a){x(!(this.c(a)in this.a),31);var b=this.o(a);return Infinity!=b?(this.b.push(a),this.f.push(b),this.a[this.c(a)]=!0,Yd(this,0,this.b.length-1),!0):!1};function Zd(a,b){for(var c=a.b,d=a.f,e=c.length,f=c[b],g=d[b],h=b;b<e>>1;){var k=2*b+1,m=2*b+2,k=m<e&&d[m]<d[k]?m:k;c[b]=c[k];d[b]=d[k];b=k}c[b]=f;d[b]=g;Yd(a,h,b)}
function Yd(a,b,c){var d=a.b;a=a.f;for(var e=d[c],f=a[c];c>b;){var g=c-1>>1;if(a[g]>f)d[c]=d[g],a[c]=a[g],c=g;else break}d[c]=e;a[c]=f};function $d(a,b){Xd.call(this,function(b){return a.apply(null,b)},function(a){return a[0].Xa()});this.K=b;this.i=0;this.g={}}t($d,Xd);$d.prototype.u=function(a){var b=Xd.prototype.u.call(this,a);b&&y(a[0],"change",this.j,this);return b};$d.prototype.j=function(a){a=a.target;var b=a.state;if(2===b||3===b||4===b||5===b)nc(a,"change",this.j,this),a=a.Xa(),a in this.g&&(delete this.g[a],--this.i),this.K()};function ae(a){return function(b,c,d){if(void 0!==b)return b=na(a,b,d),b=Aa(b+c,0,a.length-1),c=Math.floor(b),b!=c&&c<a.length-1?a[c]/Math.pow(a[c]/a[c+1],b-c):a[c]}}function be(a,b,c){return function(d,e,f){if(void 0!==d)return d=Math.max(Math.floor(Math.log(b/d)/Math.log(a)+(-f/2+.5))+e,0),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};function ce(a){if(void 0!==a)return 0}function de(a,b){if(void 0!==a)return a+b}function ee(a){var b=2*Math.PI/a;return function(a,d){if(void 0!==a)return a=Math.floor((a+d)/b+.5)*b}}function fe(){var a=Da(5);return function(b,c){if(void 0!==b)return Math.abs(b+c)<=a?0:b+c}};function ge(a){a=""+a;var b=a.indexOf("."),b=-1===b?a.length:b;return 2<b?a:Array(3-b).join("0")+a};function he(a,b){a[0]+=b[0];a[1]+=b[1]}function ie(a,b){var c=a[0],d=a[1],e=b[0],f=b[1],g=e[0],e=e[1],h=f[0],f=f[1],k=h-g,m=f-e,c=k||m?(k*(c-g)+m*(d-e))/(k*k+m*m||0):0;0>=c||(1<=c?(g=h,e=f):(g+=c*k,e+=c*m));return[g,e]}function je(a,b){for(var c=!0,d=a.length-1;0<=d;--d)if(a[d]!=b[d]){c=!1;break}return c}function ke(a,b){var c=Math.cos(b),d=Math.sin(b),e=a[1]*c+a[0]*d;a[0]=a[0]*c-a[1]*d;a[1]=e}function le(a,b){a[0]*=b;a[1]*=b}function me(a,b){var c=a[0]-b[0],d=a[1]-b[1];return c*c+d*d}
function ne(a,b){return Math.sqrt(me(a,b))}function oe(a,b){return me(a,ie(a,b))};function pe(){return!0}function qe(){return!1};function re(){vc.call(this);this.o=La();this.B=-1;this.c={};this.j=this.g=0}t(re,vc);re.prototype.J=function(a){this.B!=this.f&&(this.o=this.Rb(this.o),this.B=this.f);var b=this.o;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};re.prototype.C=function(a,b){this.vb(Nb(a,b));return this};function se(a,b,c,d,e,f){for(var g=f?f:[],h=0;b<c;b+=d){var k=a[b],m=a[b+1];g[h++]=e[0]*k+e[2]*m+e[4];g[h++]=e[1]*k+e[3]*m+e[5]}f&&g.length!=h&&(g.length=h);return g};function te(){re.call(this);this.X="XY";this.A=2;this.l=null}t(te,re);function ue(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}l=te.prototype;l.Rb=function(a){var b=this.l,c=this.l.length,d=this.A;a=Sa(a);return Va(a,b,0,c,d)};l.Eb=function(){return this.l.slice(0,this.A)};l.$f=function(){return this.l.slice(this.l.length-this.A)};
l.Rc=function(a){this.j!=this.f&&(cb(this.c),this.g=0,this.j=this.f);if(0>a||this.g&&a<=this.g)return this;var b=a.toString();if(this.c.hasOwnProperty(b))return this.c[b];var c=this.ib(a);if(c.l.length<this.l.length)return this.c[b]=c;this.g=a;return this};l.ib=function(){return this};function ve(a,b,c){a.A=ue(b);a.X=b;a.l=c}
function we(a,b,c,d){if(b)c=ue(b);else{for(b=0;b<d;++b)if(c.length)c=c[0];else{a.X="XY";a.A=2;return}c=c.length;var e;2==c?e="XY":3==c?e="XYZ":4==c&&(e="XYZM");b=e}a.X=b;a.A=c}l.vb=function(a){this.l&&(a(this.l,this.l,this.A),this.b())};l.rotate=function(a,b){var c=this.l;if(c){for(var d=c.length,e=this.A,f=c?c:[],g=Math.cos(a),h=Math.sin(a),k=b[0],m=b[1],n=0,p=0;p<d;p+=e){var q=c[p]-k,u=c[p+1]-m;f[n++]=k+q*g-u*h;f[n++]=m+q*h+u*g;for(q=p+2;q<p+e;++q)f[n++]=c[q]}c&&f.length!=n&&(f.length=n);this.b()}};
l.scale=function(a,b,c){var d=b;void 0===d&&(d=a);var e=c;e||(e=Wa(this.J()));if(c=this.l){b=c.length;for(var f=this.A,g=c?c:[],h=e[0],e=e[1],k=0,m=0;m<b;m+=f){var n=c[m]-h,p=c[m+1]-e;g[k++]=h+a*n;g[k++]=e+d*p;for(n=m+2;n<m+f;++n)g[k++]=c[n]}c&&g.length!=k&&(g.length=k);this.b()}};function xe(a,b,c,d){var e=0,f,g;f=0;for(g=c.length;f<g;++f){for(var h=c[f],k=0,m=a[h-d],n=a[h-d+1];b<h;b+=d)var p=a[b],q=a[b+1],k=k+(n*p-m*q),m=p,n=q;e+=k/2;b=h}return e};function ye(a,b,c,d,e,f,g){var h=a[b],k=a[b+1],m=a[c]-h,n=a[c+1]-k;if(m||n)if(f=((e-h)*m+(f-k)*n)/(m*m+n*n),1<f)b=c;else if(0<f){for(e=0;e<d;++e)g[e]=Ga(a[b+e],a[c+e],f);g.length=d;return}for(e=0;e<d;++e)g[e]=a[b+e];g.length=d}function ze(a,b,c,d,e){var f=a[b],g=a[b+1];for(b+=d;b<c;b+=d){var h=a[b],k=a[b+1],f=Ca(f,g,h,k);f>e&&(e=f);f=h;g=k}return e}function Ae(a,b,c,d,e){var f,g;f=0;for(g=c.length;f<g;++f){var h=c[f];e=ze(a,b,h,d,e);b=h}return e}
function Be(a,b,c,d,e,f,g,h,k,m,n){if(b==c)return m;var p;if(!e){p=Ca(g,h,a[b],a[b+1]);if(p<m){for(n=0;n<d;++n)k[n]=a[b+n];k.length=d;return p}return m}for(var q=n?n:[NaN,NaN],u=b+d;u<c;)if(ye(a,u-d,u,d,g,h,q),p=Ca(g,h,q[0],q[1]),p<m){m=p;for(n=0;n<d;++n)k[n]=q[n];k.length=d;u+=d}else u+=d*Math.max((Math.sqrt(p)-Math.sqrt(m))/e|0,1);if(f&&(ye(a,c-d,b,d,g,h,q),p=Ca(g,h,q[0],q[1]),p<m)){m=p;for(n=0;n<d;++n)k[n]=q[n];k.length=d}return m}
function Ce(a,b,c,d,e,f,g,h,k,m,n){n=n?n:[NaN,NaN];var p,q;p=0;for(q=c.length;p<q;++p){var u=c[p];m=Be(a,b,u,d,e,f,g,h,k,m,n);b=u}return m};function De(a,b){var c=0,d,e;d=0;for(e=b.length;d<e;++d)a[c++]=b[d];return c}function Ee(a,b,c,d){var e,f;e=0;for(f=c.length;e<f;++e){var g=c[e],h;for(h=0;h<d;++h)a[b++]=g[h]}return b}function Fe(a,b,c,d,e){e=e?e:[];var f=0,g,h;g=0;for(h=c.length;g<h;++g)b=Ee(a,b,c[g],d),e[f++]=b;e.length=f;return e};function Ge(a,b,c,d,e){e=void 0!==e?e:[];for(var f=0;b<c;b+=d)e[f++]=a.slice(b,b+d);e.length=f;return e}function He(a,b,c,d,e){e=void 0!==e?e:[];var f=0,g,h;g=0;for(h=c.length;g<h;++g){var k=c[g];e[f++]=Ge(a,b,k,d,e[f]);b=k}e.length=f;return e};function Ie(a,b,c,d,e,f,g){var h=(c-b)/d;if(3>h){for(;b<c;b+=d)f[g++]=a[b],f[g++]=a[b+1];return g}var k=Array(h);k[0]=1;k[h-1]=1;c=[b,c-d];for(var m=0,n;0<c.length;){var p=c.pop(),q=c.pop(),u=0,F=a[q],z=a[q+1],C=a[p],D=a[p+1];for(n=q+d;n<p;n+=d){var E;E=a[n];var Q=a[n+1],fa=F,ga=z,X=C-fa,v=D-ga;if(X||v){var T=((E-fa)*X+(Q-ga)*v)/(X*X+v*v);1<T?(fa=C,ga=D):0<T&&(fa+=X*T,ga+=v*T)}E=Ca(E,Q,fa,ga);E>u&&(m=n,u=E)}u>e&&(k[(m-b)/d]=1,q+d<m&&c.push(q,m),m+d<p&&c.push(m,p))}for(n=0;n<h;++n)k[n]&&(f[g++]=a[b+
n*d],f[g++]=a[b+n*d+1]);return g}
function Je(a,b,c,d,e,f,g,h){var k,m;k=0;for(m=c.length;k<m;++k){var n=c[k];a:{var p,q=a,u=n,F=d,z=e,C=f,D=g;if(b!=u){var E=z*Math.round(q[b]/z),Q=z*Math.round(q[b+1]/z);b+=F;C[D++]=E;C[D++]=Q;do if(p=z*Math.round(q[b]/z),g=z*Math.round(q[b+1]/z),b+=F,b==u){C[D++]=p;C[D++]=g;g=D;break a}while(p==E&&g==Q);for(;b<u;){var fa,ga;fa=z*Math.round(q[b]/z);ga=z*Math.round(q[b+1]/z);b+=F;if(fa!=p||ga!=g){var X=p-E,v=g-Q,T=fa-E,ba=ga-Q;X*ba==v*T&&(0>X&&T<X||X==T||0<X&&T>X)&&(0>v&&ba<v||v==ba||0<v&&ba>v)||(C[D++]=
p,C[D++]=g,E=p,Q=g);p=fa;g=ga}}C[D++]=p;C[D++]=g}g=D}h.push(g);b=n}return g};function Ke(a,b){te.call(this);this.a=this.i=-1;this.Y(a,b)}t(Ke,te);l=Ke.prototype;l.clone=function(){var a=new Ke(null);Le(a,this.X,this.l.slice());return a};l.Ha=function(a,b,c,d){if(d<Pa(this.J(),a,b))return d;this.a!=this.f&&(this.i=Math.sqrt(ze(this.l,0,this.l.length,this.A,0)),this.a=this.f);return Be(this.l,0,this.l.length,this.A,this.i,!0,a,b,c,d)};l.D=function(){return Ge(this.l,0,this.l.length,this.A)};
l.ib=function(a){var b=[];b.length=Ie(this.l,0,this.l.length,this.A,a,b,0);a=new Ke(null);Le(a,"XY",b);return a};l.H=function(){return"LinearRing"};l.Y=function(a,b){a?(we(this,b,a,1),this.l||(this.l=[]),this.l.length=Ee(this.l,0,a,this.A),this.b()):Le(this,"XY",null)};function Le(a,b,c){ve(a,b,c);a.b()};function Me(a,b){te.call(this);this.Y(a,b)}t(Me,te);l=Me.prototype;l.clone=function(){var a=new Me(null);ve(a,this.X,this.l.slice());a.b();return a};l.Ha=function(a,b,c,d){var e=this.l;a=Ca(a,b,e[0],e[1]);if(a<d){d=this.A;for(b=0;b<d;++b)c[b]=e[b];c.length=d;return a}return d};l.D=function(){return this.l?this.l.slice():[]};l.Rb=function(a){return Ta(this.l,a)};l.H=function(){return"Point"};l.Y=function(a,b){a?(we(this,b,a,0),this.l||(this.l=[]),this.l.length=De(this.l,a)):ve(this,"XY",null);this.b()};function Ne(a,b,c,d,e,f){for(var g=0,h=a[c-d],k=a[c-d+1];b<c;b+=d){var m=a[b],n=a[b+1];k<=f?n>f&&0<(m-h)*(f-k)-(e-h)*(n-k)&&g++:n<=f&&0>(m-h)*(f-k)-(e-h)*(n-k)&&g--;h=m;k=n}return!!g};function Oe(a,b,c,d,e,f,g){var h,k,m,n,p,q=e[f+1],u=[],F=c[0];m=a[F-d];p=a[F-d+1];for(h=b;h<F;h+=d){n=a[h];k=a[h+1];if(q<=p&&k<=q||p<=q&&q<=k)m=(q-p)/(k-p)*(n-m)+m,u.push(m);m=n;p=k}F=NaN;p=-Infinity;u.sort(ma);m=u[0];h=1;for(k=u.length;h<k;++h){n=u[h];var z=Math.abs(n-m);if(z>p){m=(m+n)/2;var C;a:{var D;if(c.length&&Ne(a,b,c[0],d,m,q)){D=1;for(C=c.length;D<C;++D)if(Ne(a,c[D-1],c[D],d,m,q)){C=!1;break a}C=!0}else C=!1}C&&(F=m,p=z)}m=n}isNaN(F)&&(F=e[f]);return g?(g.push(F,q),g):[F,q]};function Pe(a,b,c,d){for(var e=0,f=a[c-d],g=a[c-d+1];b<c;b+=d)var h=a[b],k=a[b+1],e=e+(h-f)*(k+g),f=h,g=k;return 0<e}function Qe(a,b,c,d){var e=0;d=void 0!==d?d:!1;var f,g;f=0;for(g=b.length;f<g;++f){var h=b[f],e=Pe(a,e,h,c);if(!f){if(d&&e||!d&&!e)return!1}else if(d&&!e||!d&&e)return!1;e=h}return!0}
function Re(a,b,c,d,e){e=void 0!==e?e:!1;var f,g;f=0;for(g=c.length;f<g;++f){var h=c[f],k=Pe(a,b,h,d);if(f?e&&!k||!e&&k:e&&k||!e&&!k)for(var k=a,m=h,n=d;b<m-n;){var p;for(p=0;p<n;++p){var q=k[b+p];k[b+p]=k[m-n+p];k[m-n+p]=q}b+=n;m-=n}b=h}return b}function Se(a,b,c,d){var e=0,f,g;f=0;for(g=b.length;f<g;++f)e=Re(a,e,b[f],c,d);return e};function B(a,b){te.call(this);this.a=[];this.v=-1;this.s=null;this.V=this.G=this.I=-1;this.i=null;this.Y(a,b)}t(B,te);l=B.prototype;l.clone=function(){var a=new B(null);Te(a,this.X,this.l.slice(),this.a.slice());return a};l.Ha=function(a,b,c,d){if(d<Pa(this.J(),a,b))return d;this.G!=this.f&&(this.I=Math.sqrt(Ae(this.l,0,this.a,this.A,0)),this.G=this.f);return Ce(this.l,0,this.a,this.A,this.I,!0,a,b,c,d)};l.oh=function(){return xe(Ue(this),0,this.a,this.A)};
l.D=function(a){var b;void 0!==a?(b=Ue(this).slice(),Re(b,0,this.a,this.A,a)):b=this.l;return He(b,0,this.a,this.A)};l.gb=function(){return this.a};function Ve(a){if(a.v!=a.f){var b=Wa(a.J());a.s=Oe(Ue(a),0,a.a,a.A,b,0);a.v=a.f}return a.s}l.Yf=function(){return new Me(Ve(this))};l.Vd=function(a){if(0>a||this.a.length<=a)return null;var b=new Ke(null);Le(b,this.X,this.l.slice(a?this.a[a-1]:0,this.a[a]));return b};
function We(a){var b=a.X,c=a.l;a=a.a;var d=[],e=0,f,g;f=0;for(g=a.length;f<g;++f){var h=a[f],k=new Ke(null);Le(k,b,c.slice(e,h));d.push(k);e=h}return d}function Ue(a){if(a.V!=a.f){var b=a.l;Qe(b,a.a,a.A)?a.i=b:(a.i=b.slice(),a.i.length=Re(a.i,0,a.a,a.A));a.V=a.f}return a.i}l.ib=function(a){var b=[],c=[];b.length=Je(this.l,0,this.a,this.A,Math.sqrt(a),b,0,c);a=new B(null);Te(a,"XY",b,c);return a};l.H=function(){return"Polygon"};
l.Y=function(a,b){if(a){we(this,b,a,2);this.l||(this.l=[]);var c=Fe(this.l,0,a,this.A,this.a);this.l.length=c.length?c[c.length-1]:0;this.b()}else Te(this,"XY",null,this.a)};function Te(a,b,c,d){ve(a,b,c);a.a=d;a.b()}function Xe(a){var b=a[0],c=a[1],d=a[2];a=a[3];b=[b,c,b,a,d,a,d,c,b,c];c=new B(null);Te(c,"XY",b,[b.length]);return c};function Ye(a){vc.call(this);a=bb({},a);this.j=[0,0];this.a=[];this.qc=this.qc.bind(this);this.s=Gb(a.projection);var b={};b.center=void 0!==a.center?a.center:null;var c,d,e,f=void 0!==a.minZoom?a.minZoom:0;c=void 0!==a.maxZoom?a.maxZoom:28;var g=void 0!==a.zoomFactor?a.zoomFactor:2;if(void 0!==a.resolutions)c=a.resolutions,d=c[0],e=c[c.length-1],c=ae(c);else{d=Gb(a.projection);e=d.J();var h=(e?Math.max(ab(e),e[3]-e[1]):360*hb.degrees/d.f())/256/Math.pow(2,0),k=h/Math.pow(2,28);d=a.maxResolution;
void 0!==d?f=0:d=h/Math.pow(g,f);e=a.minResolution;void 0===e&&(e=void 0!==a.maxZoom?void 0!==a.maxResolution?d/Math.pow(g,c):h/Math.pow(g,c):k);c=f+Math.floor(Math.log(d/e)/Math.log(g));e=d/Math.pow(g,c-f);c=be(g,d,c-f)}this.c=d;this.B=e;this.C=g;this.i=a.resolutions;this.o=f;(void 0!==a.enableRotation?a.enableRotation:1)?(f=a.constrainRotation,f=void 0===f||!0===f?fe():!1===f?de:"number"===typeof f?ee(f):de):f=ce;this.g=new Nc(void 0!==a.extent?fc(a.extent):gc,c,f);void 0!==a.resolution?b.resolution=
a.resolution:void 0!==a.zoom&&(b.resolution=this.constrainResolution(this.c,a.zoom-this.o));b.rotation=void 0!==a.rotation?a.rotation:0;this.oa(b)}t(Ye,vc);l=Ye.prototype;
l.animate=function(a){var b=Date.now(),c=this.ha().slice(),d=this.va(),e=Zc(this),f=arguments.length,g;1<f&&"function"===typeof arguments[f-1]&&(g=arguments[f-1],--f);for(var h=[],k=0;k<f;++k){var m=arguments[k],n={start:b,complete:!1,anchor:m.anchor,duration:void 0!==m.duration?m.duration:1E3,easing:m.easing||Vc};m.center&&(n.rd=c,n.td=m.center,c=n.td);void 0!==m.zoom?(n.nc=d,n.qb=this.constrainResolution(this.c,m.zoom-this.o,0),d=n.qb):m.resolution&&(n.nc=d,n.qb=m.resolution,d=n.qb);void 0!==m.rotation&&
(n.sd=e,n.oc=m.rotation,e=n.oc);n.Qb=g;b+=n.duration;h.push(n)}this.a.push(h);Ze(this,0,1);this.qc()};function ad(a){Ze(a,0,-$c(a)[0]);for(var b=0,c=a.a.length;b<c;++b){var d=a.a[b];d[0].Qb&&d[0].Qb(!1)}a.a.length=0}
l.qc=function(){void 0!==this.v&&(cancelAnimationFrame(this.v),this.v=void 0);if(0<$c(this)[0]){for(var a=Date.now(),b=!1,c=this.a.length-1;0<=c;--c){for(var d=this.a[c],e=!0,f=0,g=d.length;f<g;++f){var h=d[f];if(!h.complete){b=a-h.start;b=0<h.duration?b/h.duration:1;1<=b?(h.complete=!0,b=1):e=!1;b=h.easing(b);if(h.rd){var k=h.rd[0],m=h.rd[1];this.set("center",[k+b*(h.td[0]-k),m+b*(h.td[1]-m)])}h.nc&&h.qb&&(k=1===b?h.qb:h.nc+b*(h.qb-h.nc),h.anchor&&this.set("center",$e(this,k,h.anchor)),this.set("resolution",
k));void 0!==h.sd&&void 0!==h.oc&&(b=1===b?h.oc:h.sd+b*(h.oc-h.sd),h.anchor&&this.set("center",af(this,b,h.anchor)),this.set("rotation",b));b=!0;if(!h.complete)break}}e&&(this.a[c]=null,Ze(this,0,-1),(d=d[0].Qb)&&d(!0))}this.a=this.a.filter(Boolean);b&&void 0===this.v&&(this.v=requestAnimationFrame(this.qc))}};function af(a,b,c){var d,e=a.ha();void 0!==e&&(d=[e[0]-c[0],e[1]-c[1]],ke(d,b-Zc(a)),he(d,c));return d}
function $e(a,b,c){var d,e=a.ha();a=a.va();void 0!==e&&void 0!==a&&(d=[c[0]-b*(c[0]-e[0])/a,c[1]-b*(c[1]-e[1])/a]);return d}function bf(a){var b=[100,100];a='.ol-viewport[data-view="'+w(a)+'"]';if(a=document.querySelector(a))a=getComputedStyle(a),b[0]=parseInt(a.width,10),b[1]=parseInt(a.height,10);return b}l.constrainResolution=function(a,b,c){return this.g.resolution(a,b||0,c||0)};l.constrainRotation=function(a,b){return this.g.rotation(a,b||0)};l.ha=function(){return this.get("center")};
function $c(a,b){return void 0!==b?(b[0]=a.j[0],b[1]=a.j[1],b):a.j.slice()}l.Ld=function(a){a=a||bf(this);var b=this.ha();x(b,1);var c=this.va();x(void 0!==c,2);var d=Zc(this);x(void 0!==d,3);return Xa(b,c,d,a)};l.bh=function(){return this.s};l.va=function(){return this.get("resolution")};l.dh=function(){return this.i};function cf(a,b){return Math.max(ab(a)/b[0],(a[3]-a[1])/b[1])}function Zc(a){return a.get("rotation")}
function df(a){var b=a.ha(),c=a.s,d=a.va();a=Zc(a);return{center:b.slice(),projection:void 0!==c?c:null,resolution:d,rotation:a}}l.dg=function(){var a,b=this.va();if(void 0!==b)a:{var c;if(b>=this.B&&b<=this.c){a=this.o||0;var d;if(this.i){d=na(this.i,b,1);a+=d;if(d==this.i.length-1)break a;c=this.i[d];d=c/this.i[d+1]}else c=this.c,d=this.C;c=a+Math.log(c/b)/Math.log(d)}a=c}return a};
l.Pf=function(a,b){var c=b||{},d=c.size;d||(d=bf(this));var e;a instanceof te?"Circle"===a.H()?(a=a.J(),e=Xe(a),e.rotate(Zc(this),Wa(a))):e=a:(x(Array.isArray(a),24),x(!(a[2]<a[0]||a[3]<a[1]),25),e=Xe(a));var f=c.padding?c.padding:[0,0,0,0],g=void 0!==c.constrainResolution?c.constrainResolution:!0,h=void 0!==c.nearest?c.nearest:!1,k;void 0!==c.minResolution?k=c.minResolution:void 0!==c.maxZoom?k=this.constrainResolution(this.c,c.maxZoom-this.o,0):k=0;var m=e.l,n=Zc(this),p=Math.cos(-n),n=Math.sin(-n),
q=Infinity,u=Infinity,F=-Infinity,z=-Infinity;e=e.A;for(var C=0,D=m.length;C<D;C+=e)var E=m[C]*p-m[C+1]*n,Q=m[C]*n+m[C+1]*p,q=Math.min(q,E),u=Math.min(u,Q),F=Math.max(F,E),z=Math.max(z,Q);d=cf([q,u,F,z],[d[0]-f[1]-f[3],d[1]-f[0]-f[2]]);d=isNaN(d)?k:Math.max(d,k);g&&(g=this.constrainResolution(d,0,0),!h&&g<d&&(g=this.constrainResolution(g,-1,0)),d=g);n=-n;h=(q+F)/2+(f[1]-f[3])/2*d;f=(u+z)/2+(f[0]-f[2])/2*d;p=[h*p-f*n,f*p+h*n];void 0!==c.duration?this.animate({resolution:d,center:p,duration:c.duration,
easing:c.easing}):(cd(this,d),this.Ka(p))};l.rotate=function(a,b){if(void 0!==b){var c=af(this,a,b);this.Ka(c)}this.set("rotation",a);0<$c(this)[0]&&ad(this)};l.Ka=function(a){this.set("center",a);0<$c(this)[0]&&ad(this)};function Ze(a,b,c){a.j[b]+=c;a.b()}function cd(a,b){a.set("resolution",b);0<$c(a)[0]&&ad(a)}l.ni=function(a){a=this.constrainResolution(this.c,a-this.o,0);cd(this,a)};function ef(){this.b=[];this.f=this.a=0}function ff(a){a.b.length=0;a.a=0;a.f=0};function gf(a){vc.call(this);this.B=null;this.Ya(!0);this.handleEvent=a.handleEvent}t(gf,vc);gf.prototype.Ya=function(a){this.set("active",a)};gf.prototype.setMap=function(a){this.B=a};function hf(a,b,c,d){if(void 0!==b){var e=Zc(a),f=a.ha();void 0!==e&&f&&0<d?a.animate({rotation:b,anchor:c,duration:d,easing:Uc}):a.rotate(b,c)}}
function jf(a,b,c,d){var e=a.va();b=a.constrainResolution(e,b,0);if(c&&void 0!==b&&b!==e){var f=a.ha();c=$e(a,b,c);c=a.g.center(c);c=[(b*f[0]-e*c[0])/(b-e),(b*f[1]-e*c[1])/(b-e)]}kf(a,b,c,d)}function kf(a,b,c,d){if(b){var e=a.va(),f=a.ha();void 0!==e&&f&&b!==e&&d?a.animate({resolution:b,anchor:c,duration:d,easing:Uc}):(c&&(c=$e(a,b,c),a.Ka(c)),cd(a,b))}};function lf(a){a=a?a:{};this.a=a.delta?a.delta:1;gf.call(this,{handleEvent:mf});this.c=void 0!==a.duration?a.duration:250}t(lf,gf);function mf(a){var b=!1,c=a.originalEvent;if("dblclick"==a.type){var b=a.coordinate,c=c.shiftKey?-this.a:this.a,d=a.map.Z();jf(d,c,b,this.c);a.preventDefault();b=!0}return!b};function nf(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function of(a){a=a.originalEvent;return!a.button&&!(ld&&md&&a.ctrlKey)}function pf(a){return"singleclick"==a.type}function qf(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function rf(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function sf(a){a=a.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}
function tf(a){x(a.b,56);return"mouse"==a.b.pointerType}function uf(a){a=a.b;return a.isPrimary&&0===a.button};function vf(a){a=a?a:{};gf.call(this,{handleEvent:a.handleEvent?a.handleEvent:wf});this.rc=a.handleDownEvent?a.handleDownEvent:qe;this.yc=a.handleDragEvent?a.handleDragEvent:ta;this.zc=a.handleMoveEvent?a.handleMoveEvent:ta;this.Ac=a.handleUpEvent?a.handleUpEvent:qe;this.v=!1;this.V={};this.g=[]}t(vf,gf);function xf(a){for(var b=a.length,c=0,d=0,e=0;e<b;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}
function wf(a){if(!(a instanceof hd))return!0;var b=!1,c=a.type;if("pointerdown"===c||"pointerdrag"===c||"pointerup"===c)c=a.b,"pointerup"==a.type?delete this.V[c.pointerId]:"pointerdown"==a.type?this.V[c.pointerId]=c:c.pointerId in this.V&&(this.V[c.pointerId]=c),this.g=db(this.V);this.v?"pointerdrag"==a.type?this.yc(a):"pointerup"==a.type&&(this.v=this.Ac(a)&&0<this.g.length):"pointerdown"==a.type?(this.v=a=this.rc(a),b=this.ab(a)):"pointermove"==a.type&&this.zc(a);return!b}vf.prototype.ab=function(a){return a};function yf(a){vf.call(this,{handleDownEvent:zf,handleDragEvent:Af,handleUpEvent:Bf});a=a?a:{};this.a=a.kinetic;this.c=null;this.o=a.condition?a.condition:qf;this.i=!1}t(yf,vf);function Af(a){var b=this.g,c=xf(b);if(b.length==this.j){if(this.a&&this.a.b.push(c[0],c[1],Date.now()),this.c){var d=this.c[0]-c[0],e=c[1]-this.c[1];a=a.map.Z();var f=df(a),d=[d,e];le(d,f.resolution);ke(d,f.rotation);he(d,f.center);d=a.g.center(d);a.Ka(d)}}else this.a&&ff(this.a);this.c=c;this.j=b.length}
function Bf(a){var b=a.map;a=b.Z();if(this.g.length)return this.a&&ff(this.a),this.c=null,!0;var c;if(c=!this.i&&this.a)if(c=this.a,6>c.b.length)c=!1;else{var d=Date.now()-100,e=c.b.length-3;if(c.b[e+2]<d)c=!1;else{for(var f=e-3;0<f&&c.b[f+2]>d;)f-=3;var d=c.b[e+2]-c.b[f+2],g=c.b[e]-c.b[f],e=c.b[e+1]-c.b[f+1];c.a=Math.atan2(e,g);c.f=Math.sqrt(g*g+e*e)/d;c=.05<c.f}}c&&(c=(.05-this.a.f)/-.005,e=this.a.a,f=a.ha(),f=Cf(b,f),b=b.Ea([f[0]-c*Math.cos(e),f[1]-c*Math.sin(e)]),a.animate({center:a.g.center(b),
duration:500,easing:Uc}));Ze(a,1,-1);return!1}function zf(a){if(0<this.g.length&&this.o(a)){var b=a.map.Z();this.c=null;this.v||Ze(b,1,1);$c(b)[0]&&b.Ka(a.frameState.viewState.center);this.a&&ff(this.a);this.i=1<this.g.length;return!0}return!1}yf.prototype.ab=qe;function Df(a){a=a?a:{};vf.call(this,{handleDownEvent:Ef,handleDragEvent:Ff,handleUpEvent:Gf});this.c=a.condition?a.condition:nf;this.a=void 0;this.i=void 0!==a.duration?a.duration:250}t(Df,vf);function Ff(a){if(tf(a)){var b=a.map,c=b.mb();a=a.pixel;c=Math.atan2(c[1]/2-a[1],a[0]-c[0]/2);if(void 0!==this.a){a=c-this.a;var b=b.Z(),d=Zc(b);hf(b,d-a)}this.a=c}}function Gf(a){if(!tf(a))return!0;a=a.map.Z();Ze(a,1,-1);var b=Zc(a),c=this.i,b=a.constrainRotation(b,0);hf(a,b,void 0,c);return!1}
function Ef(a){return tf(a)&&of(a)&&this.c(a)?(Ze(a.map.Z(),1,1),this.a=void 0,!0):!1}Df.prototype.ab=qe;function Hf(a){this.Va=null;this.f=document.createElement("div");this.f.style.position="absolute";this.f.className="ol-box "+a;this.a=this.c=this.b=null}t(Hf,oc);Hf.prototype.ka=function(){this.setMap(null)};function If(a){var b=a.c,c=a.a;a=a.f.style;a.left=Math.min(b[0],c[0])+"px";a.top=Math.min(b[1],c[1])+"px";a.width=Math.abs(c[0]-b[0])+"px";a.height=Math.abs(c[1]-b[1])+"px"}
Hf.prototype.setMap=function(a){if(this.b){this.b.s.removeChild(this.f);var b=this.f.style;b.left=b.top=b.width=b.height="inherit"}(this.b=a)&&this.b.s.appendChild(this.f)};function Jf(a){var b=a.c,c=a.a,b=[b,[b[0],c[1]],c,[c[0],b[1]]].map(a.b.Ea,a.b);b[4]=b[0].slice();a.Va?a.Va.Y([b]):a.Va=new B([b])}Hf.prototype.R=function(){return this.Va};function Kf(a){vf.call(this,{handleDownEvent:Lf,handleDragEvent:Mf,handleUpEvent:Nf});a=a?a:{};this.a=new Hf(a.className||"ol-dragbox");this.o=void 0!==a.minArea?a.minArea:64;this.c=null;this.s=a.condition?a.condition:pe;this.j=a.boxEndCondition?a.boxEndCondition:Of}t(Kf,vf);function Of(a,b,c){a=c[0]-b[0];b=c[1]-b[1];return a*a+b*b>=this.o}function Mf(a){if(tf(a)){var b=this.a,c=a.pixel;b.c=this.c;b.a=c;Jf(b);If(b);A(this,new Pf(Qf,a.coordinate,a))}}Kf.prototype.R=function(){return this.a.R()};
Kf.prototype.i=ta;function Nf(a){if(!tf(a))return!0;this.a.setMap(null);this.j(a,this.c,a.pixel)&&(this.i(a),A(this,new Pf(Rf,a.coordinate,a)));return!1}function Lf(a){if(tf(a)&&of(a)&&this.s(a)){this.c=a.pixel;this.a.setMap(a.map);var b=this.a,c=this.c;b.c=this.c;b.a=c;Jf(b);If(b);A(this,new Pf(Sf,a.coordinate,a));return!0}return!1}var Sf="boxstart",Qf="boxdrag",Rf="boxend";function Pf(a,b,c){qc.call(this,a);this.coordinate=b;this.mapBrowserEvent=c}t(Pf,qc);function Tf(a){a=a?a:{};var b=a.condition?a.condition:rf;this.C=void 0!==a.duration?a.duration:200;this.G=void 0!==a.out?a.out:!1;Kf.call(this,{condition:b,className:a.className||"ol-dragzoom"})}t(Tf,Kf);
Tf.prototype.i=function(){var a=this.B,b=a.Z(),c=a.mb(),d=this.R().J();if(this.G){var e=b.Ld(c),d=[Cf(a,[d[0],d[1]]),Cf(a,[d[2],d[3]])],a=Sa(void 0),f,g;f=0;for(g=d.length;f<g;++f)Ma(a,d[f]);a=1/cf(a,c);d=(e[2]-e[0])/2*(a-1);a=(e[3]-e[1])/2*(a-1);e[0]-=d;e[2]+=d;e[1]-=a;e[3]+=a;d=e}c=b.constrainResolution(cf(d,c));e=Wa(d);e=b.g.center(e);b.animate({resolution:c,center:e,duration:this.C,easing:Uc})};function Uf(a){gf.call(this,{handleEvent:Vf});a=a||{};this.a=function(a){return qf(a)&&sf(a)};this.c=a.condition?a.condition:this.a;this.g=void 0!==a.duration?a.duration:100;this.i=void 0!==a.pixelDelta?a.pixelDelta:128}t(Uf,gf);
function Vf(a){var b=!1;if("keydown"==a.type){var c=a.originalEvent.keyCode;if(this.c(a)&&(40==c||37==c||39==c||38==c)){var b=a.map.Z(),d=b.va()*this.i,e=0,f=0;40==c?f=-d:37==c?e=-d:39==c?e=d:f=d;d=[e,f];ke(d,Zc(b));c=this.g;if(e=b.ha())d=b.g.center([e[0]+d[0],e[1]+d[1]]),c?b.animate({duration:c,easing:Wc,center:d}):b.Ka(d);a.preventDefault();b=!0}}return!b};function Wf(a){gf.call(this,{handleEvent:Xf});a=a?a:{};this.c=a.condition?a.condition:sf;this.a=a.delta?a.delta:1;this.g=void 0!==a.duration?a.duration:100}t(Wf,gf);function Xf(a){var b=!1;if("keydown"==a.type||"keypress"==a.type){var c=a.originalEvent.charCode;!this.c(a)||43!=c&&45!=c||(b=43==c?this.a:-this.a,c=a.map.Z(),jf(c,b,void 0,this.g),a.preventDefault(),b=!0)}return!b};function Yf(a){gf.call(this,{handleEvent:Zf});a=a||{};this.g=0;this.v=void 0!==a.duration?a.duration:250;this.I=void 0!==a.timeout?a.timeout:80;this.V=void 0!==a.useAnchor?a.useAnchor:!0;this.G=a.constrainResolution||!1;this.a=null;this.j=this.i=this.o=this.c=void 0}t(Yf,gf);
function Zf(a){var b=a.type;if("wheel"!==b&&"mousewheel"!==b)return!0;a.preventDefault();var b=a.map,c=a.originalEvent;this.V&&(this.a=a.coordinate);var d;"wheel"==a.type?(d=c.deltaY,jd&&c.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(d/=nd),c.deltaMode===WheelEvent.DOM_DELTA_LINE&&(d*=40)):"mousewheel"==a.type&&(d=-c.wheelDeltaY,kd&&(d/=3));if(0===d)return!1;a=Date.now();void 0===this.c&&(this.c=a);if(!this.i||400<a-this.c)this.i=4>Math.abs(d)?$f:ag;if(this.i===$f){b=b.Z();this.j?clearTimeout(this.j):
Ze(b,1,1);this.j=setTimeout(this.s.bind(this),400);var c=b.va()*Math.pow(2,d/300),e=b.B,f=b.c,g=0;c<e?(c=Math.max(c,e/1.5),g=1):c>f&&(c=Math.min(c,1.5*f),g=-1);if(this.a){var h=$e(b,c,this.a);b.Ka(b.g.center(h))}cd(b,c);!g&&this.G&&b.animate({resolution:b.constrainResolution(c,0<d?-1:1),easing:Uc,anchor:this.a,duration:this.v});0<g?b.animate({resolution:e,easing:Uc,anchor:this.a,duration:500}):0>g&&b.animate({resolution:f,easing:Uc,anchor:this.a,duration:500});this.c=a;return!1}this.g+=d;d=Math.max(this.I-
(a-this.c),0);clearTimeout(this.o);this.o=setTimeout(this.C.bind(this,b),d);return!1}Yf.prototype.s=function(){this.j=void 0;Ze(this.B.Z(),1,-1)};Yf.prototype.C=function(a){a=a.Z();0<$c(a)[0]&&ad(a);jf(a,-Aa(this.g,-1,1),this.a,this.v);this.i=void 0;this.g=0;this.a=null;this.o=this.c=void 0};var $f="trackpad",ag="wheel";function bg(a){vf.call(this,{handleDownEvent:cg,handleDragEvent:dg,handleUpEvent:eg});a=a||{};this.c=null;this.i=void 0;this.a=!1;this.j=0;this.s=void 0!==a.threshold?a.threshold:.3;this.o=void 0!==a.duration?a.duration:250}t(bg,vf);
function dg(a){var b=0,c=this.g[0],d=this.g[1],c=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);void 0!==this.i&&(b=c-this.i,this.j+=b,!this.a&&Math.abs(this.j)>this.s&&(this.a=!0));this.i=c;a=a.map;c=a.a.getBoundingClientRect();d=xf(this.g);d[0]-=c.left;d[1]-=c.top;this.c=a.Ea(d);this.a&&(c=a.Z(),d=Zc(c),a.render(),hf(c,d+b,this.c))}function eg(a){if(2>this.g.length){a=a.map.Z();Ze(a,1,-1);if(this.a){var b=Zc(a),c=this.c,d=this.o,b=a.constrainRotation(b,0);hf(a,b,c,d)}return!1}return!0}
function cg(a){return 2<=this.g.length?(a=a.map,this.c=null,this.i=void 0,this.a=!1,this.j=0,this.v||Ze(a.Z(),1,1),!0):!1}bg.prototype.ab=qe;function fg(a){vf.call(this,{handleDownEvent:gg,handleDragEvent:hg,handleUpEvent:ig});a=a?a:{};this.j=a.constrainResolution||!1;this.c=null;this.o=void 0!==a.duration?a.duration:400;this.a=void 0;this.i=1}t(fg,vf);
function hg(a){var b=1,c=this.g[0],d=this.g[1],e=c.clientX-d.clientX,c=c.clientY-d.clientY,e=Math.sqrt(e*e+c*c);void 0!==this.a&&(b=this.a/e);this.a=e;a=a.map;var e=a.Z(),d=e.va(),f=e.c,g=e.B,c=d*b;c>f?(b=f/d,c=f):c<g&&(b=g/d,c=g);1!=b&&(this.i=b);b=a.a.getBoundingClientRect();d=xf(this.g);d[0]-=b.left;d[1]-=b.top;this.c=a.Ea(d);a.render();kf(e,c,this.c)}
function ig(a){if(2>this.g.length){a=a.map.Z();Ze(a,1,-1);var b=a.va();if(this.j||b<a.B||b>a.c){var c=this.c,d=this.o,b=a.constrainResolution(b,0,this.i-1);kf(a,b,c,d)}return!1}return!0}function gg(a){return 2<=this.g.length?(a=a.map,this.c=null,this.a=void 0,this.i=1,this.v||Ze(a.Z(),1,1),!0):!1}fg.prototype.ab=qe;function jg(a){vc.call(this);var b=bb({},a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.maxResolution?a.maxResolution:Infinity;b.minResolution=void 0!==a.minResolution?a.minResolution:0;this.oa(b);this.a={layer:this,Xc:!0}}t(jg,vc);
function kg(a){a.a.opacity=Aa(a.get("opacity"),0,1);a.a.pi=a.Sc();a.a.visible=a.g();a.a.extent=a.J();a.a.zIndex=a.ra();a.a.maxResolution=a.get("maxResolution");a.a.minResolution=Math.max(a.get("minResolution"),0);return a.a}jg.prototype.J=function(){return this.get("extent")};jg.prototype.g=function(){return this.get("visible")};jg.prototype.ra=function(){return this.get("zIndex")};jg.prototype.C=function(a){this.set("visible",a)};function lg(a){var b=a||{};a=bb({},b);delete a.layers;b=b.layers;jg.call(this,a);this.i=[];this.c={};y(this,xc(mg),this.jg,this);b?Array.isArray(b)?b=new Ac(b.slice(),{unique:!0}):x(b instanceof Ac,43):b=new Ac(void 0,{unique:!0});this.set(mg,b)}t(lg,jg);l=lg.prototype;l.Ec=function(){};l.Wb=function(){this.g()&&this.b()};
l.jg=function(){this.i.forEach(ic);this.i.length=0;var a=this.get(mg);this.i.push(y(a,"add",this.ig,this),y(a,"remove",this.kg,this));for(var b in this.c)this.c[b].forEach(ic);cb(this.c);var a=a.a,c,d;b=0;for(c=a.length;b<c;b++)d=a[b],this.c[w(d).toString()]=[y(d,"propertychange",this.Wb,this),y(d,"change",this.Wb,this)];this.b()};l.ig=function(a){a=a.element;var b=w(a).toString();this.c[b]=[y(a,"propertychange",this.Wb,this),y(a,"change",this.Wb,this)];this.b()};
l.kg=function(a){a=w(a.element).toString();this.c[a].forEach(ic);delete this.c[a];this.b()};l.Pc=function(a){var b=void 0!==a?a:[],c=b.length;this.get(mg).forEach(function(a){a.Pc(b)});a=kg(this);var d,e;for(d=b.length;c<d;c++)e=b[c],e.opacity*=a.opacity,e.visible=e.visible&&a.visible,e.maxResolution=Math.min(e.maxResolution,a.maxResolution),e.minResolution=Math.max(e.minResolution,a.minResolution),void 0!==a.extent&&(e.extent=void 0!==e.extent?Ya(e.extent,a.extent):a.extent);return b};l.Sc=function(){return"ready"};
var mg="layers";function ng(a){var b=bb({},a);delete b.source;jg.call(this,b);this.j=this.i=this.c=null;a.map&&this.setMap(a.map);y(this,xc("source"),this.ug,this);this.Se(a.source?a.source:null)}t(ng,jg);l=ng.prototype;l.Pc=function(a){a=a?a:[];a.push(kg(this));return a};l.da=function(){return this.get("source")||null};l.Sc=function(){var a=this.da();return a?a.Ca:"undefined"};l.tg=function(){this.b()};l.ug=function(){this.j&&(ic(this.j),this.j=null);var a=this.da();a&&(this.j=y(a,"change",this.tg,this));this.b()};
l.setMap=function(a){this.c&&(ic(this.c),this.c=null);a||this.b();this.i&&(ic(this.i),this.i=null);a&&(this.c=y(a,"precompose",function(a){var b=kg(this);b.Xc=!1;b.zIndex=Infinity;a.frameState.layerStatesArray.push(b);a.frameState.layerStates[w(this)]=b},this),this.i=y(this,"change",a.render,a),this.b())};l.Se=function(a){this.set("source",a)};function og(){this.b={};this.f=0}og.prototype.clear=function(){this.b={};this.f=0};og.prototype.get=function(a,b,c){a=b+":"+a+":"+(c?Jc(c):"null");return a in this.b?this.b[a]:null};og.prototype.set=function(a,b,c,d){this.b[b+":"+a+":"+(c?Jc(c):"null")]=d;++this.f};var pg=new og;function qg(){return[1,0,0,1,0,0]}function rg(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function sg(a,b){var c=b[0],d=b[1];b[0]=a[0]*c+a[2]*d+a[4];b[1]=a[1]*c+a[3]*d+a[5];return b}function tg(a,b,c,d,e,f,g,h){var k=Math.sin(f);f=Math.cos(f);a[0]=d*f;a[1]=e*k;a[2]=-d*k;a[3]=e*f;a[4]=g*d*f-h*d*k+b;a[5]=g*e*k+h*e*f+c;return a};function ug(a,b){this.i=b;this.f={};this.c={}}t(ug,oc);ug.prototype.ka=function(){for(var a in this.f)pc(this.f[a])};function vg(){if(32<pg.f){var a=0,b,c;for(b in pg.b)c=pg.b[b],a++&3||tc(c)||(delete pg.b[b],--pg.f)}}
function wg(a,b,c,d,e,f){function g(a,b){var d=w(a).toString(),f=c.layerStates[w(b)].Xc;if(!(d in c.skippedFeatureUids)||f)return e.call(null,a,f?b:null)}var h,k=c.viewState,m=k.resolution,n=k.projection,k=b;if(n.c){var n=n.J(),p=ab(n),q=b[0];if(q<n[0]||q>n[2])k=[q+p*Math.ceil((n[0]-q)/p),b[1]]}n=c.layerStatesArray;for(p=n.length-1;0<=p;--p){var u=n[p],q=u.layer;if(u.visible&&m>=u.minResolution&&m<u.maxResolution&&f.call(null,q)&&(u=xg(a,q),q.da()&&(h=u.o(q.da().C?k:b,c,d,g,null)),h))return h}}
function xg(a,b){var c=w(b).toString();if(c in a.f)return a.f[c];var d=b.Ec(a);a.f[c]=d;a.c[c]=y(d,"change",a.j,a);return d}ug.prototype.j=function(){this.i.render()};ug.prototype.u=ta;ug.prototype.K=function(a,b){for(var c in this.f)if(!(b&&c in b.layerStates)){var d=c,e=this.f[d];delete this.f[d];ic(this.c[d]);delete this.c[d];pc(e)}};function ra(a,b){return a.zIndex-b.zIndex};function yg(a,b,c,d,e){qc.call(this,a);this.vectorContext=b;this.frameState=c;this.context=d;this.glContext=e}t(yg,qc);var zg=[0,0,0,1],Ag=[],Bg=[0,0,0,1];function Cg(a,b,c,d){b&&(a.translate(c,d),a.rotate(b),a.translate(-c,-d))};function Dg(){}l=Dg.prototype;l.Fc=function(){};l.Gc=function(){};l.Hc=function(){};l.Ic=function(){};l.Jc=function(){};l.Kc=function(){};l.Lc=function(){};l.Qa=function(){};l.Sa=function(){};l.lc=function(){};l.Na=function(){};function Eg(a,b,c,d,e){this.a=a;this.B=b;this.g=c;this.v=d;this.Da=e;this.N=this.b=this.f=this.I=this.Aa=this.G=null;this.W=this.V=this.o=this.aa=this.C=this.s=0;this.$=!1;this.c=this.La=0;this.ca=!1;this.fa=0;this.ea="";this.sa=this.tb=0;this.ya=!1;this.u=this.Ba=0;this.ga=this.j=this.i=null;this.K=[];this.Ca=qg()}t(Eg,Dg);
function Fg(a,b,c){if(a.N){b=se(b,0,c,2,a.v,a.K);c=a.a;var d=a.Ca,e=c.globalAlpha;1!=a.o&&(c.globalAlpha=e*a.o);var f=a.La;a.$&&(f+=a.Da);var g,h;g=0;for(h=b.length;g<h;g+=2){var k=b[g]-a.s,m=b[g+1]-a.C;a.ca&&(k=Math.round(k),m=Math.round(m));if(f||1!=a.c){var n=k+a.s,p=m+a.C;tg(d,n,p,a.c,a.c,f,-n,-p);c.setTransform.apply(c,d)}c.drawImage(a.N,a.V,a.W,a.fa,a.aa,k,m,a.fa,a.aa)}(f||1!=a.c)&&c.setTransform(1,0,0,1,0,0);1!=a.o&&(c.globalAlpha=e)}}
function Gg(a,b,c,d){var e=0;if(a.ga&&""!==a.ea){a.i&&Hg(a,a.i);a.j&&Ig(a,a.j);var f=a.ga,g=a.a,h=a.I;h?(h.font!=f.font&&(h.font=g.font=f.font),h.textAlign!=f.textAlign&&(h.textAlign=g.textAlign=f.textAlign),h.textBaseline!=f.textBaseline&&(h.textBaseline=g.textBaseline=f.textBaseline)):(g.font=f.font,g.textAlign=f.textAlign,g.textBaseline=f.textBaseline,a.I={font:f.font,textAlign:f.textAlign,textBaseline:f.textBaseline});b=se(b,e,c,d,a.v,a.K);f=a.a;g=a.Ba;for(a.ya&&(g+=a.Da);e<c;e+=d){var h=b[e]+
a.tb,k=b[e+1]+a.sa;if(g||1!=a.u){var m=tg(a.Ca,h,k,a.u,a.u,g,-h,-k);f.setTransform.apply(f,m)}a.j&&f.strokeText(a.ea,h,k);a.i&&f.fillText(a.ea,h,k)}(g||1!=a.u)&&f.setTransform(1,0,0,1,0,0)}}function Jg(a,b,c,d,e,f){var g=a.a;a=se(b,c,d,e,a.v,a.K);g.moveTo(a[0],a[1]);b=a.length;f&&(b-=2);for(c=2;c<b;c+=2)g.lineTo(a[c],a[c+1]);f&&g.closePath();return d}function Kg(a,b,c,d,e){var f,g;f=0;for(g=d.length;f<g;++f)c=Jg(a,b,c,d[f],e,!0);return c}l=Eg.prototype;
l.Fc=function(a){if(Za(this.g,a.J())){if(this.f||this.b){this.f&&Hg(this,this.f);this.b&&Ig(this,this.b);var b;b=(b=a.l)?se(b,0,b.length,a.A,this.v,this.K):null;var c=b[2]-b[0],d=b[3]-b[1],c=Math.sqrt(c*c+d*d),d=this.a;d.beginPath();d.arc(b[0],b[1],c,0,2*Math.PI);this.f&&d.fill();this.b&&d.stroke()}""!==this.ea&&Gg(this,a.ha(),2,2)}};l.Kc=function(a){var b=a.l;a=a.A;this.N&&Fg(this,b,b.length);""!==this.ea&&Gg(this,b,b.length,a)};
l.Ic=function(a){var b=a.l;a=a.A;this.N&&Fg(this,b,b.length);""!==this.ea&&Gg(this,b,b.length,a)};l.Gc=function(a){if(Za(this.g,a.J())){if(this.b){Ig(this,this.b);var b=this.a,c=a.l;b.beginPath();Jg(this,c,0,c.length,a.A,!1);b.stroke()}""!==this.ea&&(a=Lg(a),Gg(this,a,2,2))}};
l.Hc=function(a){var b=a.J();if(Za(this.g,b)){if(this.b){Ig(this,this.b);var b=this.a,c=a.l,d=0,e=a.gb(),f=a.A;b.beginPath();var g,h;g=0;for(h=e.length;g<h;++g)d=Jg(this,c,d,e[g],f,!1);b.stroke()}""!==this.ea&&(a=Mg(a),Gg(this,a,a.length,2))}};l.Lc=function(a){if(Za(this.g,a.J())){if(this.b||this.f){this.f&&Hg(this,this.f);this.b&&Ig(this,this.b);var b=this.a;b.beginPath();Kg(this,Ue(a),0,a.gb(),a.A);this.f&&b.fill();this.b&&b.stroke()}""!==this.ea&&(a=Ve(a),Gg(this,a,2,2))}};
l.Jc=function(a){if(Za(this.g,a.J())){if(this.b||this.f){this.f&&Hg(this,this.f);this.b&&Ig(this,this.b);var b=this.a,c=Ng(a),d=0,e=a.a,f=a.A,g,h;b.beginPath();g=0;for(h=e.length;g<h;++g)d=Kg(this,c,d,e[g],f);this.f&&b.fill();this.b&&b.stroke()}""!==this.ea&&(a=Og(a),Gg(this,a,a.length,2))}};function Hg(a,b){var c=a.a,d=a.G;d?d.fillStyle!=b.fillStyle&&(d.fillStyle=c.fillStyle=b.fillStyle):(c.fillStyle=b.fillStyle,a.G={fillStyle:b.fillStyle})}
function Ig(a,b){var c=a.a,d=a.Aa;d?(d.lineCap!=b.lineCap&&(d.lineCap=c.lineCap=b.lineCap),od&&!pa(d.lineDash,b.lineDash)&&c.setLineDash(d.lineDash=b.lineDash),d.lineJoin!=b.lineJoin&&(d.lineJoin=c.lineJoin=b.lineJoin),d.lineWidth!=b.lineWidth&&(d.lineWidth=c.lineWidth=b.lineWidth),d.miterLimit!=b.miterLimit&&(d.miterLimit=c.miterLimit=b.miterLimit),d.strokeStyle!=b.strokeStyle&&(d.strokeStyle=c.strokeStyle=b.strokeStyle)):(c.lineCap=b.lineCap,od&&c.setLineDash(b.lineDash),c.lineJoin=b.lineJoin,c.lineWidth=
b.lineWidth,c.miterLimit=b.miterLimit,c.strokeStyle=b.strokeStyle,a.Aa={lineCap:b.lineCap,lineDash:b.lineDash,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle})}
l.Sa=function(a,b){if(a){var c=a.b;this.f={fillStyle:Mc(c?c:zg)}}else this.f=null;if(b){var c=b.b,d=b.g,e=b.f,f=b.j,g=b.i,h=b.c,k=b.u;this.b={lineCap:void 0!==d?d:"round",lineDash:e?e:Ag,lineDashOffset:f?f:0,lineJoin:void 0!==g?g:"round",lineWidth:this.B*(void 0!==h?h:1),miterLimit:void 0!==k?k:10,strokeStyle:Mc(c?c:Bg)}}else this.b=null};
l.lc=function(a){if(a){var b=a.Sb(),c=a.ia(1),d=a.dc(),e=a.nb();this.s=b[0];this.C=b[1];this.aa=e[1];this.N=c;this.o=a.i;this.V=d[0];this.W=d[1];this.$=a.s;this.La=a.o;this.c=a.g;this.ca=a.K;this.fa=e[0]}else this.N=null};
l.Na=function(a){if(a){var b=a.qa();b?(b=b.b,this.i={fillStyle:Mc(b?b:zg)}):this.i=null;var c=a.ma();if(c){var b=c.b,d=c.g,e=c.f,f=c.j,g=c.i,h=c.c,c=c.u;this.j={lineCap:void 0!==d?d:"round",lineDash:e?e:Ag,lineDashOffset:f?f:0,lineJoin:void 0!==g?g:"round",lineWidth:void 0!==h?h:1,miterLimit:void 0!==c?c:10,strokeStyle:Mc(b?b:Bg)}}else this.j=null;var b=a.f,d=a.a,e=a.c,f=a.g,g=a.i,h=a.b,c=a.na(),k=a.u;a=a.j;this.ga={font:void 0!==b?b:"10px sans-serif",textAlign:void 0!==k?k:"center",textBaseline:void 0!==
a?a:"middle"};this.ea=void 0!==c?c:"";this.tb=void 0!==d?this.B*d:0;this.sa=void 0!==e?this.B*e:0;this.ya=void 0!==f?f:!1;this.Ba=void 0!==g?g:0;this.u=this.B*(void 0!==h?h:1)}else this.ea=""};function Pg(a,b){ug.call(this,0,b);this.g=Oc();this.b=this.g.canvas;this.b.style.width="100%";this.b.style.height="100%";this.b.style.display="block";this.b.className="ol-unselectable";a.insertBefore(this.b,a.childNodes[0]||null);this.a=!0;this.o=qg()}t(Pg,ug);
function Qg(a,b,c){var d=a.i,e=a.g;if(tc(d,b)){var f=c.extent,g=c.pixelRatio,h=c.viewState.rotation,k=c.viewState,m=c.pixelRatio/k.resolution;a=tg(a.o,a.b.width/2,a.b.height/2,m,-m,-k.rotation,-k.center[0],-k.center[1]);A(d,new yg(b,new Eg(e,g,f,a,h),c,e,null))}}Pg.prototype.H=function(){return"canvas"};
Pg.prototype.u=function(a){if(a){var b=this.g,c=a.pixelRatio,d=Math.round(a.size[0]*c),e=Math.round(a.size[1]*c);this.b.width!=d||this.b.height!=e?(this.b.width=d,this.b.height=e):b.clearRect(0,0,d,e);var c=a.viewState.rotation,f=a.viewState,g=a.coordinateToPixelTransform,h=a.pixelToCoordinateTransform;tg(g,a.size[0]/2,a.size[1]/2,1/f.resolution,-1/f.resolution,-f.rotation,-f.center[0],-f.center[1]);f=rg(h,g);g=f[0]*f[3]-f[1]*f[2];x(!!g,32);var h=f[0],k=f[1],m=f[2],n=f[3],p=f[4],q=f[5];f[0]=n/g;f[1]=
-k/g;f[2]=-m/g;f[3]=h/g;f[4]=(m*q-n*p)/g;f[5]=-(h*q-k*p)/g;Qg(this,"precompose",a);f=a.layerStatesArray;qa(f);c&&(b.save(),Cg(b,c,d/2,e/2));d=a.viewState.resolution;e=0;for(g=f.length;e<g;++e)h=f[e],k=h.layer,k=xg(this,k),h.visible&&d>=h.minResolution&&d<h.maxResolution&&"ready"==h.pi&&k.I(a,h)&&k.v(a,h,b);c&&b.restore();Qg(this,"postcompose",a);this.a||(this.b.style.display="",this.a=!0);for(var u in this.f)if(!(u in a.layerStates)){a.postRenderFunctions.push(this.K.bind(this));break}a.postRenderFunctions.push(vg)}else this.a&&
(this.b.style.display="none",this.a=!1)};var Rg=["Polygon","Circle","LineString","Image","Text"];function Sg(){};function Tg(a){a=a||{};this.b=void 0!==a.color?a.color:null;this.g=a.lineCap;this.f=void 0!==a.lineDash?a.lineDash:null;this.j=a.lineDashOffset;this.i=a.lineJoin;this.u=a.miterLimit;this.c=a.width;this.a=void 0}Tg.prototype.clone=function(){var a=this.b;return new Tg({color:a&&a.slice?a.slice():a||void 0,lineCap:this.g,lineDash:this.f?this.f.slice():void 0,lineDashOffset:this.j,lineJoin:this.i,miterLimit:this.u,width:this.c})};Tg.prototype.setLineDash=function(a){this.f=a;this.a=void 0};var Ug;
(function(){var a={},b={U:a};(function(c){if("object"===typeof a&&"undefined"!==typeof b)b.U=c();else{var d;"undefined"!==typeof window?d=window:"undefined"!==typeof global?d=global:"undefined"!==typeof self?d=self:d=this;d.Ui=c()}})(function(){return function d(a,b,g){function e(h,k){if(!b[h]){if(!a[h]){var m="function"==typeof require&&require;if(!k&&m)return m(h,!0);if(f)return f(h,!0);m=Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m;}m=b[h]={U:{}};a[h][0].call(m.U,function(b){var d=
a[h][1][b];return e(d?d:b)},m,m.U,d,a,b,g)}return b[h].U}for(var f="function"==typeof require&&require,m=0;m<g.length;m++)e(g[m]);return e}({1:[function(a,b){function d(a,b){if(!(this instanceof d))return new d(a,b);this.xc=Math.max(4,a||9);this.Ed=Math.max(2,Math.ceil(.4*this.xc));b&&this.Cf(b);this.clear()}function e(a,b){h(a,0,a.children.length,b,a)}function h(a,b,d,e,f){f||(f=z(null));f.M=Infinity;f.P=Infinity;f.O=-Infinity;f.S=-Infinity;for(var g;b<d;b++)g=a.children[b],k(f,a.ua?e(g):g);return f}
function k(a,b){a.M=Math.min(a.M,b.M);a.P=Math.min(a.P,b.P);a.O=Math.max(a.O,b.O);a.S=Math.max(a.S,b.S)}function m(a,b){return a.M-b.M}function n(a,b){return a.P-b.P}function p(a){return(a.O-a.M)*(a.S-a.P)}function q(a){return a.O-a.M+(a.S-a.P)}function u(a,b){return a.M<=b.M&&a.P<=b.P&&b.O<=a.O&&b.S<=a.S}function F(a,b){return b.M<=a.O&&b.P<=a.S&&b.O>=a.M&&b.S>=a.P}function z(a){return{children:a,height:1,ua:!0,M:Infinity,P:Infinity,O:-Infinity,S:-Infinity}}function C(a,b,d,e,f){for(var g=[b,d],
h;g.length;)d=g.pop(),b=g.pop(),d-b<=e||(h=b+Math.ceil((d-b)/e/2)*e,D(a,h,b,d,f),g.push(b,h,h,d))}b.U=d;var D=a("quickselect");d.prototype={all:function(){return this.zd(this.data,[])},search:function(a){var b=this.data,d=[],e=this.za;if(!F(a,b))return d;for(var f=[],g,h,k,m;b;){g=0;for(h=b.children.length;g<h;g++)k=b.children[g],m=b.ua?e(k):k,F(a,m)&&(b.ua?d.push(k):u(a,m)?this.zd(k,d):f.push(k));b=f.pop()}return d},load:function(a){if(!a||!a.length)return this;if(a.length<this.Ed){for(var b=0,d=
a.length;b<d;b++)this.ba(a[b]);return this}a=this.Bd(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.Hd(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.Dd(a,this.data.height-a.height-1,!0)):this.data=a;return this},ba:function(a){a&&this.Dd(a,this.data.height-1);return this},clear:function(){this.data=z([]);return this},remove:function(a,b){if(!a)return this;for(var d=this.data,e=this.za(a),f=[],g=[],h,k,m,n;d||f.length;){d||(d=f.pop(),
k=f[f.length-1],h=g.pop(),n=!0);if(d.ua){a:{m=a;var q=d.children,p=b;if(p){for(var F=0;F<q.length;F++)if(p(m,q[F])){m=F;break a}m=-1}else m=q.indexOf(m)}if(-1!==m){d.children.splice(m,1);f.push(d);this.Af(f);break}}n||d.ua||!u(d,e)?k?(h++,d=k.children[h],n=!1):d=null:(f.push(d),g.push(h),h=0,k=d,d=d.children[0])}return this},za:function(a){return a},Cc:m,Dc:n,toJSON:function(){return this.data},zd:function(a,b){for(var d=[];a;)a.ua?b.push.apply(b,a.children):d.push.apply(d,a.children),a=d.pop();return b},
Bd:function(a,b,d,f){var g=d-b+1,h=this.xc,k;if(g<=h)return k=z(a.slice(b,d+1)),e(k,this.za),k;f||(f=Math.ceil(Math.log(g)/Math.log(h)),h=Math.ceil(g/Math.pow(h,f-1)));k=z([]);k.ua=!1;k.height=f;var g=Math.ceil(g/h),h=g*Math.ceil(Math.sqrt(h)),m,n,q;for(C(a,b,d,h,this.Cc);b<=d;b+=h)for(n=Math.min(b+h-1,d),C(a,b,n,g,this.Dc),m=b;m<=n;m+=g)q=Math.min(m+g-1,n),k.children.push(this.Bd(a,m,q,f-1));e(k,this.za);return k},zf:function(a,b,d,e){for(var f,g,h,k,m,n,q,u;;){e.push(b);if(b.ua||e.length-1===d)break;
q=u=Infinity;f=0;for(g=b.children.length;f<g;f++)h=b.children[f],m=p(h),n=(Math.max(h.O,a.O)-Math.min(h.M,a.M))*(Math.max(h.S,a.S)-Math.min(h.P,a.P))-m,n<u?(u=n,q=m<q?m:q,k=h):n===u&&m<q&&(q=m,k=h);b=k||b.children[0]}return b},Dd:function(a,b,d){var e=this.za;d=d?a:e(a);var e=[],f=this.zf(d,this.data,b,e);f.children.push(a);for(k(f,d);0<=b;)if(e[b].children.length>this.xc)this.Gf(e,b),b--;else break;this.wf(d,e,b)},Gf:function(a,b){var d=a[b],f=d.children.length,g=this.Ed;this.xf(d,g,f);f=this.yf(d,
g,f);f=z(d.children.splice(f,d.children.length-f));f.height=d.height;f.ua=d.ua;e(d,this.za);e(f,this.za);b?a[b-1].children.push(f):this.Hd(d,f)},Hd:function(a,b){this.data=z([a,b]);this.data.height=a.height+1;this.data.ua=!1;e(this.data,this.za)},yf:function(a,b,d){var e,f,g,k,m,n,q;m=n=Infinity;for(e=b;e<=d-b;e++)f=h(a,0,e,this.za),g=h(a,e,d,this.za),k=Math.max(0,Math.min(f.O,g.O)-Math.max(f.M,g.M))*Math.max(0,Math.min(f.S,g.S)-Math.max(f.P,g.P)),f=p(f)+p(g),k<m?(m=k,q=e,n=f<n?f:n):k===m&&f<n&&(n=
f,q=e);return q},xf:function(a,b,d){var e=a.ua?this.Cc:m,f=a.ua?this.Dc:n,g=this.Ad(a,b,d,e);b=this.Ad(a,b,d,f);g<b&&a.children.sort(e)},Ad:function(a,b,d,e){a.children.sort(e);e=this.za;var f=h(a,0,b,e),g=h(a,d-b,d,e),m=q(f)+q(g),n,p;for(n=b;n<d-b;n++)p=a.children[n],k(f,a.ua?e(p):p),m+=q(f);for(n=d-b-1;n>=b;n--)p=a.children[n],k(g,a.ua?e(p):p),m+=q(g);return m},wf:function(a,b,d){for(;0<=d;d--)k(b[d],a)},Af:function(a){for(var b=a.length-1,d;0<=b;b--)0===a[b].children.length?0<b?(d=a[b-1].children,
d.splice(d.indexOf(a[b]),1)):this.clear():e(a[b],this.za)},Cf:function(a){var b=["return a"," - b",";"];this.Cc=new Function("a","b",b.join(a[0]));this.Dc=new Function("a","b",b.join(a[1]));this.za=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}}},{quickselect:2}],2:[function(a,b){function d(a,b,f,g,q){f=f||0;g=g||a.length-1;for(q=q||h;g>f;){if(600<g-f){var k=g-f+1,m=b-f+1,n=Math.log(k),p=.5*Math.exp(2*n/3),n=.5*Math.sqrt(n*p*(k-p)/k)*(0>m-k/2?-1:
1);d(a,b,Math.max(f,Math.floor(b-m*p/k+n)),Math.min(g,Math.floor(b+(k-m)*p/k+n)),q)}k=a[b];m=f;p=g;e(a,f,b);for(0<q(a[g],k)&&e(a,f,g);m<p;){e(a,m,p);m++;for(p--;0>q(a[m],k);)m++;for(;0<q(a[p],k);)p--}0===q(a[f],k)?e(a,f,p):(p++,e(a,p,g));p<=b&&(f=p+1);b<=p&&(g=p-1)}}function e(a,b,d){var e=a[b];a[b]=a[d];a[d]=e}function h(a,b){return a<b?-1:a>b?1:0}b.U=d},{}]},{},[1])(1)});Ug=b.U})();function Vg(a){this.b=Ug(a);this.f={}}l=Vg.prototype;l.ba=function(a,b){var c={M:a[0],P:a[1],O:a[2],S:a[3],value:b};this.b.ba(c);this.f[w(b)]=c};l.load=function(a,b){for(var c=Array(b.length),d=0,e=b.length;d<e;d++){var f=a[d],g=b[d],f={M:f[0],P:f[1],O:f[2],S:f[3],value:g};c[d]=f;this.f[w(g)]=f}this.b.load(c)};l.remove=function(a){a=w(a);var b=this.f[a];delete this.f[a];return null!==this.b.remove(b)};function Wg(a,b,c){var d=a.f[w(c)];Ua([d.M,d.P,d.O,d.S],b)||(a.remove(c),a.ba(b,c))}
function Xg(a){return a.b.all().map(function(a){return a.value})}function Yg(a,b){return a.b.search({M:b[0],P:b[1],O:b[2],S:b[3]}).map(function(a){return a.value})}l.forEach=function(a,b){return Zg(Xg(this),a,b)};function $g(a,b,c,d){return Zg(Yg(a,b),c,d)}function Zg(a,b,c){for(var d,e=0,f=a.length;e<f&&!(d=b.call(c,a[e]));e++);return d}l.clear=function(){this.b.clear();this.f={}};l.J=function(a){var b=this.b.data;return Ra(b.M,b.P,b.O,b.S,a)};function ah(){this.c=0;this.a={};this.f=this.b=null}l=ah.prototype;l.clear=function(){this.c=0;this.a={};this.f=this.b=null};l.forEach=function(a,b){for(var c=this.b;c;)a.call(b,c.rb,c.kb,this),c=c.Ga};l.get=function(a){a=this.a[a];x(!!a,15);if(a===this.f)return a.rb;a===this.b?(this.b=this.b.Ga,this.b.ob=null):(a.Ga.ob=a.ob,a.ob.Ga=a.Ga);a.Ga=null;a.ob=this.f;this.f=this.f.Ga=a;return a.rb};
l.pop=function(){var a=this.b;delete this.a[a.kb];a.Ga&&(a.Ga.ob=null);this.b=a.Ga;this.b||(this.f=null);--this.c;return a.rb};l.replace=function(a,b){this.get(a);this.a[a].rb=b};l.set=function(a,b){x(!(a in this.a),16);var c={kb:a,Ga:null,ob:this.f,rb:b};this.f?this.f.Ga=c:this.b=c;this.f=c;this.a[a]=c;++this.c};var bh=["canvas","webgl"];
function G(a){vc.call(this);var b=ch(a);this.uc=void 0!==a.loadTilesWhileAnimating?a.loadTilesWhileAnimating:!1;this.rc=void 0!==a.loadTilesWhileInteracting?a.loadTilesWhileInteracting:!1;this.zc=void 0!==a.pixelRatio?a.pixelRatio:nd;this.yc=b.logos;this.bb=function(){this.o=void 0;this.ki.call(this,Date.now())}.bind(this);this.cb=qg();this.Ac=qg();this.tc=0;this.c=null;this.Ca=La();this.G=this.V=this.W=null;this.a=document.createElement("DIV");this.a.className="ol-viewport"+(rd?" ol-touch":"");this.a.style.position=
"relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";this.a.style.msTouchAction="none";this.a.style.touchAction="none";this.s=document.createElement("DIV");this.s.className="ol-overlaycontainer";this.a.appendChild(this.s);this.v=document.createElement("DIV");this.v.className="ol-overlaycontainer-stopevent";a="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" ");for(var c=0,d=a.length;c<d;++c)y(this.v,a[c],rc);this.a.appendChild(this.v);
this.ya=new Ud(this);for(var e in gd)y(this.ya,gd[e],this.Xd,this);this.sa=b.keyboardEventTarget;this.B=null;y(this.a,"wheel",this.jb,this);y(this.a,"mousewheel",this.jb,this);this.C=b.controls;this.i=b.interactions;this.j=b.overlays;this.De={};this.I=new b.li(this.a,this);this.$=null;this.Ba=[];this.Da=new $d(this.cg.bind(this),this.wg.bind(this));this.ca={};y(this,xc("layergroup"),this.hg,this);y(this,xc("view"),this.yg,this);y(this,xc("size"),this.sg,this);y(this,xc("target"),this.vg,this);this.oa(b.values);
this.C.forEach(function(a){a.setMap(this)},this);y(this.C,"add",function(a){a.element.setMap(this)},this);y(this.C,"remove",function(a){a.element.setMap(null)},this);this.i.forEach(function(a){a.setMap(this)},this);y(this.i,"add",function(a){a.element.setMap(this)},this);y(this.i,"remove",function(a){a.element.setMap(null)},this);this.j.forEach(this.Id,this);y(this.j,"add",function(a){this.Id(a.element)},this);y(this.j,"remove",function(a){var b=a.element.j;void 0!==b&&delete this.De[b.toString()];
a.element.setMap(null)},this)}t(G,vc);l=G.prototype;l.Hf=function(a){this.C.push(a)};l.If=function(a){this.i.push(a)};l.Jf=function(a){dh(this).get(mg).push(a)};l.Kf=function(a){this.j.push(a)};l.Id=function(a){var b=a.j;void 0!==b&&(this.De[b.toString()]=a);a.setMap(this)};
l.ka=function(){pc(this.ya);pc(this.I);nc(this.a,"wheel",this.jb,this);nc(this.a,"mousewheel",this.jb,this);this.g&&(window.removeEventListener("resize",this.g,!1),this.g=void 0);this.o&&(cancelAnimationFrame(this.o),this.o=void 0);this.set("target",null);vc.prototype.ka.call(this)};l.Nc=function(a,b,c){if(this.c)return a=this.Ea(a),c=c?c:{},wg(this.I,a,this.c,void 0!==c.hitTolerance?c.hitTolerance*this.c.pixelRatio:0,b,c.layerFilter?c.layerFilter:pe)};
l.$g=function(a,b,c,d,e){if(this.c){a:{var f=this.I,g=this.c;c=void 0!==c?c:null;d=d?d:pe;e=void 0!==e?e:null;var h,k=g.viewState.resolution,m=g.layerStatesArray,n=m.length;a=sg(g.pixelToCoordinateTransform,a.slice());for(--n;0<=n;--n){h=m[n];var p=h.layer;if(h.visible&&k>=h.minResolution&&k<h.maxResolution&&d.call(e,p)&&(h=xg(f,p).B(a,g,b,c))){b=h;break a}}b=void 0}return b}};l.Tc=function(){return this.get("target")};
function eh(a){a=a.Tc();return void 0!==a?"string"===typeof a?document.getElementById(a):a:null}l.Ea=function(a){var b=this.c;return b?sg(b.pixelToCoordinateTransform,a.slice()):null};l.ag=function(){return this.j};function dh(a){return a.get("layergroup")}l.ah=function(){return dh(this).get(mg)};function Cf(a,b){var c=a.c;return c?sg(c.coordinateToPixelTransform,b.slice(0,2)):null}l.mb=function(){return this.get("size")};l.Z=function(){return this.get("view")};
l.cg=function(a,b,c,d){var e=this.c;if(!(e&&b in e.wantedTiles&&e.wantedTiles[b][a.Xa()]))return Infinity;a=c[0]-e.focus[0];c=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(a*a+c*c)/d};l.jb=function(a,b){var c=new fd(b||a.type,this,a);this.Xd(c)};l.Xd=function(a){if(this.c){this.$=a.coordinate;a.frameState=this.c;var b=this.i.a,c;if(!1!==A(this,a))for(c=b.length-1;0<=c;c--){var d=b[c];if(d.get("active")&&!d.handleEvent(a))break}}};
l.qg=function(){var a=this.c,b=this.Da;if(b.b.length){var c=16,d=c;if(a){var e=a.viewHints;e[0]&&(c=this.uc?8:0,d=2);e[1]&&(c=this.rc?8:0,d=2)}if(b.i<c){var e=b.o,f=b.b,g=b.f,h=0,k=f.length,m,n,p;for(n=0;n<k;++n)m=f[n],p=e(m),Infinity==p?delete b.a[b.c(m)]:(g[h]=p,f[h++]=m);f.length=h;g.length=h;for(e=(b.b.length>>1)-1;0<=e;e--)Zd(b,e);for(e=0;b.i<c&&e<d&&0<b.b.length;)f=b,h=f.b,k=f.f,g=h[0],1==h.length?(h.length=0,k.length=0):(h[0]=h.pop(),k[0]=k.pop(),Zd(f,0)),h=f.c(g),delete f.a[h],f=g[0],g=f.Xa(),
0!==f.state||g in b.g||(b.g[g]=!0,++b.i,++e,f.load())}}b=this.Ba;d=0;for(c=b.length;d<c;++d)b[d](this,a);b.length=0};l.sg=function(){this.render()};
l.vg=function(){var a;this.Tc()&&(a=eh(this));if(this.B){for(var b=0,c=this.B.length;b<c;++b)ic(this.B[b]);this.B=null}a?(a.appendChild(this.a),a=this.sa?this.sa:a,this.B=[y(a,"keydown",this.jb,this),y(a,"keypress",this.jb,this)],this.g||(this.g=this.af.bind(this),window.addEventListener("resize",this.g,!1))):(Pc(this.a),this.g&&(window.removeEventListener("resize",this.g,!1),this.g=void 0));this.af()};l.wg=function(){this.render()};l.Zd=function(){this.render()};
l.yg=function(){this.W&&(ic(this.W),this.W=null);this.V&&(ic(this.V),this.V=null);var a=this.Z();a&&(this.a.setAttribute("data-view",w(a)),this.W=y(a,"propertychange",this.Zd,this),this.V=y(a,"change",this.Zd,this));this.render()};l.hg=function(){this.G&&(this.G.forEach(ic),this.G=null);var a=dh(this);a&&(this.G=[y(a,"propertychange",this.render,this),y(a,"change",this.render,this)]);this.render()};l.render=function(){void 0===this.o&&(this.o=requestAnimationFrame(this.bb))};l.ii=function(a){return this.i.remove(a)};
l.ji=function(a){return this.j.remove(a)};
l.ki=function(a){var b,c,d=this.mb(),e=this.Z(),f=La(),g=null,h;if(h=void 0!==d&&0<d[0]&&0<d[1]&&e)h=!!e.ha()&&void 0!==e.va();if(h){g=$c(e,this.c?this.c.viewHints:void 0);h=dh(this).Pc();var k={};b=0;for(c=h.length;b<c;++b)k[w(h[b].layer)]=h[b];b=df(e);g={animate:!1,attributions:{},coordinateToPixelTransform:this.cb,extent:f,focus:this.$?this.$:b.center,index:this.tc++,layerStates:k,layerStatesArray:h,logos:bb({},this.yc),pixelRatio:this.zc,pixelToCoordinateTransform:this.Ac,postRenderFunctions:[],
size:d,skippedFeatureUids:this.ca,tileQueue:this.Da,time:a,usedTiles:{},viewState:b,viewHints:g,wantedTiles:{}}}g&&(g.extent=Xa(b.center,b.resolution,b.rotation,g.size,f));this.c=g;this.I.u(g);g&&(g.animate&&this.render(),Array.prototype.push.apply(this.Ba,g.postRenderFunctions),g.viewHints[0]||g.viewHints[1]||Ua(g.extent,this.Ca)||(A(this,new ed("moveend",this,g)),Oa(g.extent,this.Ca)));A(this,new ed("postrender",this,g));setTimeout(this.qg.bind(this),0)};
l.Ve=function(a){a=w(a).toString();this.ca[a]=!0;this.render()};l.af=function(){var a=eh(this);if(a){var b=getComputedStyle(a);this.set("size",[a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)])}else this.set("size",void 0)};l.Ze=function(a){a=w(a).toString();delete this.ca[a];this.render()};
function ch(a){var b=null;void 0!==a.keyboardEventTarget&&(b="string"===typeof a.keyboardEventTarget?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);var c={},d={};if(void 0===a.logo||"boolean"===typeof a.logo&&a.logo)d["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"https://openlayers.org/";else{var e=a.logo;"string"===typeof e?d[e]="":e instanceof HTMLElement?d[w(e).toString()]=e:e&&(x("string"==typeof e.href,44),x("string"==typeof e.src,45),d[e.src]=e.href)}e=a.layers instanceof lg?a.layers:new lg({layers:a.layers});c.layergroup=e;c.target=a.target;c.view=void 0!==a.view?a.view:new Ye;var e=ug,f;void 0!==a.renderer?(Array.isArray(a.renderer)?f=a.renderer:"string"===typeof a.renderer?f=[a.renderer]:x(!1,46),0<=f.indexOf("dom")&&(f=f.concat(bh))):f=bh;var g,
h;g=0;for(h=f.length;g<h;++g)if("canvas"==f[g]&&pd){e=Pg;break}void 0!==a.controls?Array.isArray(a.controls)?f=new Ac(a.controls.slice()):(x(a.controls instanceof Ac,47),f=a.controls):f=dd();if(void 0!==a.interactions)Array.isArray(a.interactions)?g=new Ac(a.interactions.slice()):(x(a.interactions instanceof Ac,48),g=a.interactions);else{g={};h=new Ac;var k=new ef;(void 0!==g.altShiftDragRotate?g.altShiftDragRotate:1)&&h.push(new Df);(void 0!==g.doubleClickZoom?g.doubleClickZoom:1)&&h.push(new lf({delta:g.zoomDelta,
duration:g.zoomDuration}));(void 0!==g.dragPan?g.dragPan:1)&&h.push(new yf({kinetic:k}));(void 0!==g.pinchRotate?g.pinchRotate:1)&&h.push(new bg);(void 0!==g.pinchZoom?g.pinchZoom:1)&&h.push(new fg({constrainResolution:g.constrainResolution,duration:g.zoomDuration}));if(void 0!==g.keyboard?g.keyboard:1)h.push(new Uf),h.push(new Wf({delta:g.zoomDelta,duration:g.zoomDuration}));(void 0!==g.mouseWheelZoom?g.mouseWheelZoom:1)&&h.push(new Yf({constrainResolution:g.constrainResolution,duration:g.zoomDuration}));
(void 0!==g.shiftDragZoom?g.shiftDragZoom:1)&&h.push(new Tf({duration:g.zoomDuration}));g=h}void 0!==a.overlays?Array.isArray(a.overlays)?a=new Ac(a.overlays.slice()):(x(a.overlays instanceof Ac,49),a=a.overlays):a=new Ac;return{controls:f,interactions:g,keyboardEventTarget:b,logos:d,overlays:a,li:e,values:c}};function fh(a){vc.call(this);this.j=a.id;this.B=void 0!==a.insertFirst?a.insertFirst:!0;this.v=void 0!==a.stopEvent?a.stopEvent:!0;this.c=document.createElement("DIV");this.c.className="ol-overlay-container ol-selectable";this.c.style.position="absolute";this.autoPan=void 0!==a.autoPan?a.autoPan:!1;this.i=a.autoPanAnimation||{};this.o=void 0!==a.autoPanMargin?a.autoPanMargin:20;this.a={Pb:"",Xb:"",kc:"",pc:"",visible:!0};this.g=null;y(this,xc(gh),this.fg,this);y(this,xc(ih),this.lg,this);y(this,xc(jh),
this.mg,this);y(this,xc(kh),this.og,this);y(this,xc(lh),this.pg,this);void 0!==a.element&&this.set(gh,a.element);this.set(jh,void 0!==a.offset?a.offset:[0,0]);this.set(lh,void 0!==a.positioning?a.positioning:"top-left");void 0!==a.position&&this.de(a.position)}t(fh,vc);l=fh.prototype;l.fg=function(){for(var a=this.c;a.lastChild;)a.removeChild(a.lastChild);(a=this.get(gh))&&this.c.appendChild(a)};
l.lg=function(){this.g&&(Pc(this.c),ic(this.g),this.g=null);var a=this.get(ih);a&&(this.g=y(a,"postrender",this.render,this),mh(this),a=this.v?a.v:a.s,this.B?a.insertBefore(this.c,a.childNodes[0]||null):a.appendChild(this.c))};l.render=function(){mh(this)};l.mg=function(){mh(this)};
l.og=function(){mh(this);if(this.get(kh)&&this.autoPan){var a=this.get(ih);if(a&&eh(a)){var b=nh(eh(a),a.mb()),c=this.get(gh),d=c.offsetWidth,e=getComputedStyle(c),d=d+(parseInt(e.marginLeft,10)+parseInt(e.marginRight,10)),e=c.offsetHeight,f=getComputedStyle(c),e=e+(parseInt(f.marginTop,10)+parseInt(f.marginBottom,10)),g=nh(c,[d,e]),c=this.o;Qa(b,g)||(d=g[0]-b[0],e=b[2]-g[2],f=g[1]-b[1],g=b[3]-g[3],b=[0,0],0>d?b[0]=d-c:0>e&&(b[0]=Math.abs(e)+c),0>f?b[1]=f-c:0>g&&(b[1]=Math.abs(g)+c),0===b[0]&&0===
b[1])||(c=a.Z().ha(),c=Cf(a,c),b=[c[0]+b[0],c[1]+b[1]],a.Z().animate({center:a.Ea(b),duration:this.i.duration,easing:this.i.easing}))}}};l.pg=function(){mh(this)};l.setMap=function(a){this.set(ih,a)};l.de=function(a){this.set(kh,a)};function nh(a,b){var c=a.getBoundingClientRect(),d=c.left+window.pageXOffset,c=c.top+window.pageYOffset;return[d,c,d+b[0],c+b[1]]}function oh(a,b){a.a.visible!==b&&(a.c.style.display=b?"":"none",a.a.visible=b)}
function mh(a){var b=a.get(ih),c=a.get(kh);if(b&&b.c&&c){var c=Cf(b,c),d=b.mb(),b=a.c.style,e=a.get(jh),f=a.get(lh);oh(a,!0);var g=e[0],e=e[1];if("bottom-right"==f||"center-right"==f||"top-right"==f)""!==a.a.Xb&&(a.a.Xb=b.left=""),g=Math.round(d[0]-c[0]-g)+"px",a.a.kc!=g&&(a.a.kc=b.right=g);else{""!==a.a.kc&&(a.a.kc=b.right="");if("bottom-center"==f||"center-center"==f||"top-center"==f)g-=a.c.offsetWidth/2;g=Math.round(c[0]+g)+"px";a.a.Xb!=g&&(a.a.Xb=b.left=g)}if("bottom-left"==f||"bottom-center"==
f||"bottom-right"==f)""!==a.a.pc&&(a.a.pc=b.top=""),c=Math.round(d[1]-c[1]-e)+"px",a.a.Pb!=c&&(a.a.Pb=b.bottom=c);else{""!==a.a.Pb&&(a.a.Pb=b.bottom="");if("center-left"==f||"center-center"==f||"center-right"==f)e-=a.c.offsetHeight/2;c=Math.round(c[1]+e)+"px";a.a.pc!=c&&(a.a.pc=b.top=c)}}else oh(a,!1)}var gh="element",ih="map",jh="offset",kh="position",lh="positioning";function ph(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-scale-line";this.g=document.createElement("DIV");this.g.className=b+"-inner";this.a=document.createElement("DIV");this.a.className=b+" ol-unselectable";this.a.appendChild(this.g);this.j=null;this.i=void 0!==a.minWidth?a.minWidth:64;this.c=!1;this.B=void 0;this.o="";Qc.call(this,{element:this.a,render:a.render?a.render:qh,target:a.target});y(this,xc(rh),this.C,this);this.set(rh,a.units||"metric")}t(ph,Qc);var sh=[1,2,5];
function qh(a){(a=a.frameState)?this.j=a.viewState:this.j=null;th(this)}ph.prototype.C=function(){th(this)};
function th(a){var b=a.j;if(b){var c=b.projection,d=c.f(),e=b.resolution,b=b.center,f=c.o;f?e=f(e,b):"degrees"!=c.a&&(f=Kb(c,Hb("EPSG:4326")),e=[b[0]-e/2,b[1],b[0]+e/2,b[1],b[0],b[1]-e/2,b[0],b[1]+e/2],e=f(e,e,2),e=(gb.b(e.slice(0,2),e.slice(2,4))+gb.b(e.slice(4,6),e.slice(6,8)))/2,c=c.f(),void 0!==c&&(e/=c));d=e*d;e=a.i*d;c="";b=a.get(rh);"degrees"==b?(c=hb.degrees,d/=c,e<c/60?(c="\u2033",d*=3600):e<c?(c="\u2032",d*=60):c="\u00b0"):"imperial"==b?.9144>e?(c="in",d/=.0254):1609.344>e?(c="ft",d/=.3048):
(c="mi",d/=1609.344):"nautical"==b?(d/=1852,c="nm"):"metric"==b?.001>e?(c="\u03bcm",d*=1E6):1>e?(c="mm",d*=1E3):1E3>e?c="m":(c="km",d/=1E3):"us"==b?.9144>e?(c="in",d*=39.37):1609.344>e?(c="ft",d/=.30480061):(c="mi",d/=1609.3472):x(!1,33);for(b=3*Math.floor(Math.log(a.i*d)/Math.log(10));;){f=sh[(b%3+3)%3]*Math.pow(10,Math.floor(b/3));e=Math.round(f/d);if(isNaN(e)){a.a.style.display="none";a.c=!1;return}if(e>=a.i)break;++b}d=f+" "+c;a.o!=d&&(a.g.innerHTML=d,a.o=d);a.B!=e&&(a.g.style.width=e+"px",a.B=
e);a.c||(a.a.style.display="",a.c=!0)}else a.c&&(a.a.style.display="none",a.c=!1)}var rh="units";function uh(a){this.i=a.opacity;this.s=a.rotateWithView;this.o=a.rotation;this.g=a.scale;this.K=a.snapToPixel};function vh(a){this.v=this.j=this.c=null;this.la=void 0!==a.fill?a.fill:null;this.fa=[0,0];this.b=a.points;this.f=void 0!==a.radius?a.radius:a.radius1;this.a=void 0!==a.radius2?a.radius2:this.f;this.u=void 0!==a.angle?a.angle:0;this.pa=void 0!==a.stroke?a.stroke:null;this.C=this.ga=this.aa=null;this.B=a.atlasManager;wh(this,this.B);uh.call(this,{opacity:1,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1,rotation:void 0!==a.rotation?a.rotation:0,scale:1,snapToPixel:void 0!==a.snapToPixel?
a.snapToPixel:!0})}t(vh,uh);l=vh.prototype;l.clone=function(){var a=new vh({fill:this.qa()?this.qa().clone():void 0,points:this.a!==this.f?this.b/2:this.b,radius:this.f,radius2:this.a,angle:this.u,snapToPixel:this.K,stroke:this.ma()?this.ma().clone():void 0,rotation:this.o,rotateWithView:this.s,atlasManager:this.B});a.i=this.i;a.g=this.g;return a};l.Sb=function(){return this.aa};l.qa=function(){return this.la};l.Be=function(){return this.v};l.ia=function(){return this.j};l.Ud=function(){return this.C};
l.cc=function(){return 2};l.dc=function(){return this.fa};l.nb=function(){return this.ga};l.ma=function(){return this.pa};l.ae=function(){};l.load=function(){};l.Ye=function(){};
function wh(a,b){var c,d="",e="",f=0,g=null,h,k=0;a.pa&&(h=a.pa.b,null===h&&(h=Bg),h=Mc(h),k=a.pa.c,void 0===k&&(k=1),g=a.pa.f,od||(g=null),e=a.pa.i,void 0===e&&(e="round"),d=a.pa.g,void 0===d&&(d="round"),f=a.pa.u,void 0===f&&(f=10));var m=2*(a.f+k)+1,d={strokeStyle:h,We:k,size:m,lineCap:d,lineDash:g,lineJoin:e,miterLimit:f};void 0===b?(e=Oc(m,m),a.j=e.canvas,c=m=a.j.width,a.Qd(d,e,0,0),a.la?a.v=a.j:(e=Oc(d.size,d.size),a.v=e.canvas,a.Pd(d,e,0,0))):(m=Math.round(m),(e=!a.la)&&(c=a.Pd.bind(a,d)),
a.pa?(f=a.pa,void 0===f.a&&(f.a="s",f.a=f.b?"string"===typeof f.b?f.a+f.b:f.a+w(f.b).toString():f.a+"-",f.a+=","+(void 0!==f.g?f.g.toString():"-")+","+(f.f?f.f.toString():"-")+","+(void 0!==f.j?f.j:"-")+","+(void 0!==f.i?f.i:"-")+","+(void 0!==f.u?f.u.toString():"-")+","+(void 0!==f.c?f.c.toString():"-")),f=f.a):f="-",a.la?(g=a.la,void 0===g.f&&(g.f=g.b instanceof CanvasPattern||g.b instanceof CanvasGradient?w(g.b).toString():"f"+(g.b?Jc(g.b):"-")),g=g.f):g="-",a.c&&f==a.c[1]&&g==a.c[2]&&a.f==a.c[3]&&
a.a==a.c[4]&&a.u==a.c[5]&&a.b==a.c[6]||(a.c=["r"+f+g+(void 0!==a.f?a.f.toString():"-")+(void 0!==a.a?a.a.toString():"-")+(void 0!==a.u?a.u.toString():"-")+(void 0!==a.b?a.b.toString():"-"),f,g,a.f,a.a,a.u,a.b]),d=b.add(a.c[0],m,m,a.Qd.bind(a,d),c),a.j=d.image,a.fa=[d.offsetX,d.offsetY],c=d.image.width,a.v=e?d.b:a.j);a.aa=[m/2,m/2];a.ga=[m,m];a.C=[c,c]}
l.Qd=function(a,b,c,d){var e;b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();if(Infinity===this.b)b.arc(a.size/2,a.size/2,this.f,0,2*Math.PI,!0);else for(this.a!==this.f&&(this.b*=2),c=0;c<=this.b;c++)d=2*c*Math.PI/this.b-Math.PI/2+this.u,e=c%2?this.a:this.f,b.lineTo(a.size/2+e*Math.cos(d),a.size/2+e*Math.sin(d));this.la&&(c=this.la.b,null===c&&(c=zg),b.fillStyle=Mc(c),b.fill());this.pa&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.We,a.lineDash&&b.setLineDash(a.lineDash),b.lineCap=a.lineCap,
b.lineJoin=a.lineJoin,b.miterLimit=a.miterLimit,b.stroke());b.closePath()};
l.Pd=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();if(Infinity===this.b)b.arc(a.size/2,a.size/2,this.f,0,2*Math.PI,!0);else{this.a!==this.f&&(this.b*=2);var e;for(c=0;c<=this.b;c++)e=2*c*Math.PI/this.b-Math.PI/2+this.u,d=c%2?this.a:this.f,b.lineTo(a.size/2+d*Math.cos(e),a.size/2+d*Math.sin(e))}b.fillStyle=zg;b.fill();this.pa&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.We,a.lineDash&&b.setLineDash(a.lineDash),b.stroke());b.closePath()};function xh(a){a=a||{};vh.call(this,{points:Infinity,fill:a.fill,radius:a.radius,snapToPixel:a.snapToPixel,stroke:a.stroke,atlasManager:a.atlasManager})}t(xh,vh);xh.prototype.clone=function(){var a=new xh({fill:this.qa()?this.qa().clone():void 0,stroke:this.ma()?this.ma().clone():void 0,radius:this.f,snapToPixel:this.K,atlasManager:this.B});a.i=this.i;a.g=this.g;return a};xh.prototype.Re=function(a){this.f=a;wh(this,this.B)};function yh(a){a=a||{};this.b=void 0!==a.color?a.color:null;this.f=void 0}yh.prototype.clone=function(){var a=this.b;return new yh({color:a&&a.slice?a.slice():a||void 0})};function zh(a){a=a||{};this.Va=null;this.ta=Ah;void 0!==a.geometry&&this.xa(a.geometry);this.la=void 0!==a.fill?a.fill:null;this.N=void 0!==a.image?a.image:null;this.pa=void 0!==a.stroke?a.stroke:null;this.ea=void 0!==a.text?a.text:null;this.zi=a.zIndex}l=zh.prototype;
l.clone=function(){var a=this.R();a&&a.clone&&(a=a.clone());return new zh({geometry:a,fill:this.qa()?this.qa().clone():void 0,image:this.ia()?this.ia().clone():void 0,stroke:this.ma()?this.ma().clone():void 0,text:this.na()?this.na().clone():void 0,zIndex:this.ra()})};l.R=function(){return this.Va};l.qa=function(){return this.la};l.Qe=function(a){this.la=a};l.ia=function(){return this.N};l.ma=function(){return this.pa};l.Te=function(a){this.pa=a};l.na=function(){return this.ea};
l.Ue=function(a){this.ea=a};l.ra=function(){return this.zi};l.xa=function(a){"function"===typeof a?this.ta=a:"string"===typeof a?this.ta=function(b){return b.get(a)}:a?a&&(this.ta=function(){return a}):this.ta=Ah;this.Va=a};function Bh(a){if("function"!==typeof a){var b;Array.isArray(a)?b=a:(x(a instanceof zh,41),b=[a]);a=function(){return b}}return a}var Ch=null;
function Dh(){if(!Ch){var a=new yh({color:"rgba(255,255,255,0.4)"}),b=new Tg({color:"#3399CC",width:1.25});Ch=[new zh({image:new xh({fill:a,stroke:b,radius:5}),fill:a,stroke:b})]}return Ch}
function Eh(){var a={},b=[255,255,255,1],c=[0,153,255,1];a.Polygon=[new zh({fill:new yh({color:[255,255,255,.5]})})];a.MultiPolygon=a.Polygon;a.LineString=[new zh({stroke:new Tg({color:b,width:5})}),new zh({stroke:new Tg({color:c,width:3})})];a.MultiLineString=a.LineString;a.Circle=a.Polygon.concat(a.LineString);a.Point=[new zh({image:new xh({radius:6,fill:new yh({color:c}),stroke:new Tg({color:b,width:1.5})}),zIndex:Infinity})];a.MultiPoint=a.Point;a.GeometryCollection=a.Polygon.concat(a.LineString,
a.Point);return a}function Ah(a){return a.R()};function I(a){vc.call(this);this.a=void 0;this.c="geometry";this.j=null;this.i=void 0;this.g=null;y(this,xc(this.c),this.Vb,this);void 0!==a&&(a instanceof re||!a?this.xa(a):this.oa(a))}t(I,vc);l=I.prototype;l.clone=function(){var a=new I(this.Fa());a.pb(this.c);var b=this.R();b&&a.xa(b.clone());(b=this.j)&&a.ce(b);return a};l.R=function(){return this.get(this.c)};l.Ug=function(){return this.a};l.Vf=function(){return this.c};l.Vg=function(){return this.j};l.gg=function(){this.b()};
l.Vb=function(){this.g&&(ic(this.g),this.g=null);var a=this.R();a&&(this.g=y(a,"change",this.gg,this));this.b()};l.xa=function(a){this.set(this.c,a)};l.ce=function(a){this.i=(this.j=a)?Fh(a):void 0;this.b()};l.$a=function(a){this.a=a;this.b()};l.pb=function(a){nc(this,xc(this.c),this.Vb,this);this.c=a;y(this,xc(this.c),this.Vb,this);this.Vb()};
function Fh(a){var b;if("function"===typeof a)2==a.length?b=function(b){return a(this,b)}:b=a;else{var c;Array.isArray(a)?c=a:(x(a instanceof zh,41),c=[a]);b=function(){return c}}return b};var Gh=document.implementation.createDocument("","",null);function Hh(a,b){return Gh.createElementNS(a,b)}function Ih(a){return Jh(a,!1,[]).join("")}function Jh(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)Jh(a,b,c);return c}function Kh(a){return(new DOMParser).parseFromString(a,"application/xml")}
function J(a,b){return function(c,d){var e=a.call(void 0!==b?b:this,c,d);void 0!==e&&d[d.length-1].push(e)}}function K(a,b){return function(c,d){var e=a.call(void 0!==b?b:this,c,d);void 0!==e&&(d[d.length-1]=e)}}function Lh(a){return function(b,c){var d=a.call(this,b,c);if(void 0!==d){var e=c[c.length-1],f=b.localName,g;f in e?g=e[f]:g=e[f]=[];g.push(d)}}}function L(a,b){return function(c,d){var e=a.call(this,c,d);void 0!==e&&(d[d.length-1][void 0!==b?b:c.localName]=e)}}
function M(a,b){return function(c,d,e){a.call(void 0!==b?b:this,c,d,e);e[e.length-1].node.appendChild(c)}}function Mh(a){var b,c;return function(d,e,f){if(!b){b={};var g={};g[d.localName]=a;b[d.namespaceURI]=g;c=Nh(d.localName)}Oh(b,c,e,f)}}function Nh(a,b){return function(c,d,e){c=d[d.length-1].node;d=a;void 0===d&&(d=e);e=b;void 0===b&&(e=c.namespaceURI);return Hh(e,d)}}var Ph=Nh();function Qh(a,b){for(var c=b.length,d=Array(c),e=0;e<c;++e)d[e]=a[b[e]];return d}
function O(a,b,c){c=void 0!==c?c:{};var d,e;d=0;for(e=a.length;d<e;++d)c[a[d]]=b;return c}function Rh(a,b,c,d){for(b=b.firstElementChild;b;b=b.nextElementSibling){var e=a[b.namespaceURI];void 0!==e&&(e=e[b.localName])&&e.call(d,b,c)}}function P(a,b,c,d,e){d.push(a);Rh(b,c,d,e);return d.pop()}function Oh(a,b,c,d,e,f){for(var g=(void 0!==e?e:c).length,h,k,m=0;m<g;++m)h=c[m],void 0!==h&&(k=b.call(f,h,d,void 0!==e?e[m]:void 0),void 0!==k&&a[k.namespaceURI][k.localName].call(f,k,h,d))}
function R(a,b,c,d,e,f,g){e.push(a);Oh(b,c,d,e,f,g);e.pop()};function Sh(a,b,c){return function(d,e,f){var g=new XMLHttpRequest;g.open("GET","function"===typeof a?a(d,e,f):a,!0);"arraybuffer"==b.H()&&(g.responseType="arraybuffer");g.onload=function(){if(!g.status||200<=g.status&&300>g.status){var a=b.H(),d;"json"==a||"text"==a?d=g.responseText:"xml"==a?(d=g.responseXML)||(d=Kh(g.responseText)):"arraybuffer"==a&&(d=g.response);d&&c.call(this,b.Ra(d,{featureProjection:f}),b.ic(d))}}.bind(this);g.onerror=function(){}.bind(this);g.send()}}
function Th(a,b){return Sh(a,b,function(a){this.ub(a)})};function Uh(){this.a=this.defaultDataProjection=null}function Vh(a,b,c){var d;c&&(d={dataProjection:c.dataProjection?c.dataProjection:a.ic(b),featureProjection:c.featureProjection});return Wh(a,d)}function Wh(a,b){return bb({dataProjection:a.defaultDataProjection,featureProjection:a.a},b)}
function Xh(a,b,c){var d=c?Hb(c.featureProjection):null,e=c?Hb(c.dataProjection):null,f;d&&e&&!Jb(d,e)?a instanceof re?f=(b?a.clone():a).C(b?d:e,b?e:d):f=Pb(b?a.slice():a,b?d:e,b?e:d):f=a;if(b&&c&&c.decimals){var g=Math.pow(10,c.decimals);a=function(a){for(var b=0,c=a.length;b<c;++b)a[b]=Math.round(a[b]*g)/g;return a};Array.isArray(f)?a(f):f.vb(a)}return f};function Yh(){Uh.call(this)}t(Yh,Uh);function Zh(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null}l=Yh.prototype;l.H=function(){return"json"};l.ec=function(a,b){return this.Za(Zh(a),Vh(this,a,b))};l.Ra=function(a,b){return this.gd(Zh(a),Vh(this,a,b))};l.ic=function(a){return this.ld(Zh(a))};l.ud=function(a,b){return JSON.stringify(this.sb(a,b))};function $h(a,b,c,d,e,f){var g=NaN,h=NaN,k=(c-b)/d;if(1===k)g=a[b],h=a[b+1];else if(2==k)g=(1-e)*a[b]+e*a[b+d],h=(1-e)*a[b+1]+e*a[b+d+1];else if(k){var h=a[b],k=a[b+1],m=0,g=[0],n;for(n=b+d;n<c;n+=d){var p=a[n],q=a[n+1],m=m+Math.sqrt((p-h)*(p-h)+(q-k)*(q-k));g.push(m);h=p;k=q}c=e*m;k=0;m=g.length;for(n=!1;k<m;)e=k+(m-k>>1),h=+ma(g[e],c),0>h?k=e+1:(m=e,n=!h);e=n?k:~k;0>e?(c=(c-g[-e-2])/(g[-e-1]-g[-e-2]),b+=(-e-2)*d,g=Ga(a[b],a[b+d],c),h=Ga(a[b+1],a[b+d+1],c)):(g=a[b+e*d],h=a[b+e*d+1])}return f?(f[0]=
g,f[1]=h,f):[g,h]}function ai(a,b,c,d,e){if(!b)return null;if(d<a[0+c-1])return e?(b=a.slice(0,0+c),b[c-1]=d,b):null;if(a[b-1]<d)return e?(b=a.slice(b-c,b),b[c-1]=d,b):null;if(d==a[0+c-1])return a.slice(0,0+c);e=0/c;for(b/=c;e<b;){var f=e+b>>1;d<a[(f+1)*c-1]?b=f:e=f+1}b=a[e*c-1];if(d==b)return a.slice((e-1)*c,(e-1)*c+c);f=(d-b)/(a[(e+1)*c-1]-b);b=[];var g;for(g=0;g<c-1;++g)b.push(Ga(a[(e-1)*c+g],a[e*c+g],f));b.push(d);return b};function S(a,b){te.call(this);this.a=null;this.v=this.s=this.i=-1;this.Y(a,b)}t(S,te);l=S.prototype;l.Lf=function(a){this.l?oa(this.l,a):this.l=a.slice();this.b()};l.clone=function(){var a=new S(null);bi(a,this.X,this.l.slice());return a};l.Ha=function(a,b,c,d){if(d<Pa(this.J(),a,b))return d;this.v!=this.f&&(this.s=Math.sqrt(ze(this.l,0,this.l.length,this.A,0)),this.v=this.f);return Be(this.l,0,this.l.length,this.A,this.s,!1,a,b,c,d)};
l.ue=function(a,b){return"XYM"!=this.X&&"XYZM"!=this.X?null:ai(this.l,this.l.length,this.A,a,void 0!==b?b:!1)};l.D=function(){return Ge(this.l,0,this.l.length,this.A)};l.Rd=function(a,b){return $h(this.l,0,this.l.length,this.A,a,b)};l.mh=function(){var a=this.l,b=this.A,c=a[0],d=a[1],e=0,f;for(f=0+b;f<this.l.length;f+=b)var g=a[f],h=a[f+1],e=e+Math.sqrt((g-c)*(g-c)+(h-d)*(h-d)),c=g,d=h;return e};function Lg(a){a.i!=a.f&&(a.a=a.Rd(.5,a.a),a.i=a.f);return a.a}
l.ib=function(a){var b=[];b.length=Ie(this.l,0,this.l.length,this.A,a,b,0);a=new S(null);bi(a,"XY",b);return a};l.H=function(){return"LineString"};l.Y=function(a,b){a?(we(this,b,a,1),this.l||(this.l=[]),this.l.length=Ee(this.l,0,a,this.A),this.b()):bi(this,"XY",null)};function bi(a,b,c){ve(a,b,c);a.b()};function ci(a,b){te.call(this);this.a=[];this.i=this.v=-1;this.Y(a,b)}t(ci,te);l=ci.prototype;l.clone=function(){var a=new ci(null);di(a,this.X,this.l.slice(),this.a.slice());return a};l.Ha=function(a,b,c,d){if(d<Pa(this.J(),a,b))return d;this.i!=this.f&&(this.v=Math.sqrt(Ae(this.l,0,this.a,this.A,0)),this.i=this.f);return Ce(this.l,0,this.a,this.A,this.v,!1,a,b,c,d)};l.D=function(){return He(this.l,0,this.a,this.A)};l.gb=function(){return this.a};
l.hb=function(){var a=this.l,b=this.a,c=this.X,d=[],e=0,f,g;f=0;for(g=b.length;f<g;++f){var h=b[f],k=new S(null);bi(k,c,a.slice(e,h));d.push(k);e=h}return d};function Mg(a){var b=[],c=a.l,d=0,e=a.a;a=a.A;var f,g;f=0;for(g=e.length;f<g;++f){var h=e[f],d=$h(c,d,h,a,.5);oa(b,d);d=h}return b}l.ib=function(a){var b=[],c=[],d=this.l,e=this.a,f=this.A,g=0,h=0,k,m;k=0;for(m=e.length;k<m;++k){var n=e[k],h=Ie(d,g,n,f,a,b,h);c.push(h);g=n}b.length=h;a=new ci(null);di(a,"XY",b,c);return a};l.H=function(){return"MultiLineString"};
l.Y=function(a,b){if(a){we(this,b,a,2);this.l||(this.l=[]);var c=Fe(this.l,0,a,this.A,this.a);this.l.length=c.length?c[c.length-1]:0;this.b()}else di(this,"XY",null,this.a)};function di(a,b,c,d){ve(a,b,c);a.a=d;a.b()}function ei(a,b){var c=a.X,d=[],e=[],f,g;f=0;for(g=b.length;f<g;++f){var h=b[f];f||(c=h.X);oa(d,h.l);e.push(d.length)}di(a,c,d,e)};function fi(a,b){te.call(this);this.Y(a,b)}t(fi,te);l=fi.prototype;l.clone=function(){var a=new fi(null);ve(a,this.X,this.l.slice());a.b();return a};l.Ha=function(a,b,c,d){if(d<Pa(this.J(),a,b))return d;var e=this.l,f=this.A,g,h,k;g=0;for(h=e.length;g<h;g+=f)if(k=Ca(a,b,e[g],e[g+1]),k<d){d=k;for(k=0;k<f;++k)c[k]=e[g+k];c.length=f}return d};l.D=function(){return Ge(this.l,0,this.l.length,this.A)};
function gi(a){var b=a.l,c=a.X;a=a.A;var d=[],e,f;e=0;for(f=b.length;e<f;e+=a){var g=new Me(null),h=g;ve(h,c,b.slice(e,e+a));h.b();d.push(g)}return d}l.H=function(){return"MultiPoint"};l.Y=function(a,b){a?(we(this,b,a,1),this.l||(this.l=[]),this.l.length=Ee(this.l,0,a,this.A)):ve(this,"XY",null);this.b()};function hi(a,b){te.call(this);this.a=[];this.v=-1;this.s=null;this.V=this.G=this.I=-1;this.i=null;this.Y(a,b)}t(hi,te);l=hi.prototype;l.clone=function(){for(var a=new hi(null),b=this.a.length,c=Array(b),d=0;d<b;++d)c[d]=this.a[d].slice();ii(a,this.X,this.l.slice(),c);return a};
l.Ha=function(a,b,c,d){if(d<Pa(this.J(),a,b))return d;if(this.G!=this.f){var e=this.a,f=0,g=0,h,k;h=0;for(k=e.length;h<k;++h)var m=e[h],g=Ae(this.l,f,m,this.A,g),f=m[m.length-1];this.I=Math.sqrt(g);this.G=this.f}e=Ng(this);f=this.a;g=this.A;h=this.I;k=0;var m=[NaN,NaN],n,p;n=0;for(p=f.length;n<p;++n){var q=f[n];d=Ce(e,k,q,g,h,!0,a,b,c,d,m);k=q[q.length-1]}return d};l.nh=function(){var a=Ng(this),b=this.a,c=0,d=0,e,f;e=0;for(f=b.length;e<f;++e)var g=b[e],d=d+xe(a,c,g,this.A),c=g[g.length-1];return d};
l.D=function(a){var b;void 0!==a?(b=Ng(this).slice(),Se(b,this.a,this.A,a)):b=this.l;a=b;b=this.a;var c=this.A,d=0,e=[],f=0,g,h;g=0;for(h=b.length;g<h;++g){var k=b[g];e[f++]=He(a,d,k,c,e[f]);d=k[k.length-1]}e.length=f;return e};
function Og(a){if(a.v!=a.f){var b=a.l,c=a.a,d=a.A,e=0,f=[],g,h,k;g=0;for(h=c.length;g<h;++g){var m=c[g];k=b;var n=m[0],p=d,q=Sa(void 0);k=Va(q,k,e,n,p);f.push((k[0]+k[2])/2,(k[1]+k[3])/2);e=m[m.length-1]}b=Ng(a);c=a.a;d=a.A;g=0;h=[];m=0;for(k=c.length;m<k;++m)e=c[m],h=Oe(b,g,e,d,f,2*m,h),g=e[e.length-1];a.s=h;a.v=a.f}return a.s}l.Zf=function(){var a=new fi(null),b=Og(this).slice();ve(a,"XY",b);a.b();return a};
function Ng(a){if(a.V!=a.f){var b=a.l,c;a:{c=a.a;var d,e;d=0;for(e=c.length;d<e;++d)if(!Qe(b,c[d],a.A,void 0)){c=!1;break a}c=!0}c?a.i=b:(a.i=b.slice(),a.i.length=Se(a.i,a.a,a.A));a.V=a.f}return a.i}l.ib=function(a){var b=[],c=[],d=this.l,e=this.a,f=this.A;a=Math.sqrt(a);var g=0,h=0,k,m;k=0;for(m=e.length;k<m;++k){var n=e[k],p=[],h=Je(d,g,n,f,a,b,h,p);c.push(p);g=n[n.length-1]}b.length=h;d=new hi(null);ii(d,"XY",b,c);return d};
function ji(a){var b=a.X,c=a.l;a=a.a;var d=[],e=0,f,g,h,k;f=0;for(g=a.length;f<g;++f){var m=a[f].slice(),n=m[m.length-1];if(e)for(h=0,k=m.length;h<k;++h)m[h]-=e;h=new B(null);Te(h,b,c.slice(e,n),m);d.push(h);e=n}return d}l.H=function(){return"MultiPolygon"};
l.Y=function(a,b){if(a){we(this,b,a,3);this.l||(this.l=[]);var c=this.l,d=this.A,e=this.a,f=0,e=e?e:[],g=0,h,k;h=0;for(k=a.length;h<k;++h)f=Fe(c,f,a[h],d,e[g]),e[g++]=f,f=f[f.length-1];e.length=g;e.length?(c=e[e.length-1],this.l.length=c.length?c[c.length-1]:0):this.l.length=0;this.b()}else ii(this,"XY",null,this.a)};function ii(a,b,c,d){ve(a,b,c);a.a=d;a.b()}
function ki(a,b){var c=a.X,d=[],e=[],f,g,h;f=0;for(g=b.length;f<g;++f){var k=b[f];f||(c=k.X);var m=d.length;h=k.gb();var n,p;n=0;for(p=h.length;n<p;++n)h[n]+=m;oa(d,k.l);e.push(h)}ii(a,c,d,e)};function li(a){a=a?a:{};Uh.call(this);this.b=a.geometryName}t(li,Yh);function mi(a){var b="XY";!0===a.hasZ&&!0===a.hasM?b="XYZM":!0===a.hasZ?b="XYZ":!0===a.hasM&&(b="XYM");return b}function ni(a){a=a.X;return{hasZ:"XYZ"===a||"XYZM"===a,hasM:"XYM"===a||"XYZM"===a}}
var oi={Point:function(a){return void 0!==a.m&&void 0!==a.z?new Me([a.x,a.y,a.z,a.m],"XYZM"):void 0!==a.z?new Me([a.x,a.y,a.z],"XYZ"):void 0!==a.m?new Me([a.x,a.y,a.m],"XYM"):new Me([a.x,a.y])},LineString:function(a){return new S(a.paths[0],mi(a))},Polygon:function(a){return new B(a.rings,mi(a))},MultiPoint:function(a){return new fi(a.points,mi(a))},MultiLineString:function(a){return new ci(a.paths,mi(a))},MultiPolygon:function(a){return new hi(a.rings,mi(a))}},pi={Point:function(a){var b=a.D(),c;
a=a.X;"XYZ"===a?c={x:b[0],y:b[1],z:b[2]}:"XYM"===a?c={x:b[0],y:b[1],m:b[2]}:"XYZM"===a?c={x:b[0],y:b[1],z:b[2],m:b[3]}:"XY"===a?c={x:b[0],y:b[1]}:x(!1,34);return c},LineString:function(a){var b=ni(a);return{hasZ:b.hasZ,hasM:b.hasM,paths:[a.D()]}},Polygon:function(a){var b=ni(a);return{hasZ:b.hasZ,hasM:b.hasM,rings:a.D(!1)}},MultiPoint:function(a){var b=ni(a);return{hasZ:b.hasZ,hasM:b.hasM,points:a.D()}},MultiLineString:function(a){var b=ni(a);return{hasZ:b.hasZ,hasM:b.hasM,paths:a.D()}},MultiPolygon:function(a){var b=
ni(a);a=a.D(!1);for(var c=[],d=0;d<a.length;d++)for(var e=a[d].length-1;0<=e;e--)c.push(a[d][e]);return{hasZ:b.hasZ,hasM:b.hasM,rings:c}}};l=li.prototype;
l.Za=function(a,b){var c;if(c=a.geometry){var d;if("number"===typeof c.x&&"number"===typeof c.y)d="Point";else if(c.points)d="MultiPoint";else if(c.paths)d=1===c.paths.length?"LineString":"MultiLineString";else if(c.rings){var e=c.rings,f=mi(c),g=[],h=[];d=[];var k,m;k=0;for(m=e.length;k<m;++k)g.length=0,Ee(g,0,e[k],f.length),Pe(g,0,g.length,f.length)?h.push([e[k]]):d.push(e[k]);for(;d.length;){e=d.shift();f=!1;for(k=h.length-1;0<=k;k--)if(Qa((new Ke(h[k][0])).J(),(new Ke(e)).J())){h[k].push(e);f=
!0;break}f||h.push([e.reverse()])}c=bb({},c);1===h.length?(d="Polygon",c.rings=h[0]):(d="MultiPolygon",c.rings=h)}c=Xh((0,oi[d])(c),!1,b)}else c=null;h=new I;this.b&&h.pb(this.b);h.xa(c);b&&b.Uc&&a.attributes[b.Uc]&&h.$a(a.attributes[b.Uc]);a.attributes&&h.oa(a.attributes);return h};l.gd=function(a,b){var c=b?b:{};if(a.features){var d=[],e=a.features,f,g;c.Uc=a.objectIdFieldName;f=0;for(g=e.length;f<g;++f)d.push(this.Za(e[f],c));return d}return[this.Za(a,c)]};
l.ld=function(a){return a.spatialReference&&a.spatialReference.wkid?Hb("EPSG:"+a.spatialReference.wkid):null};l.sb=function(a,b){b=Wh(this,b);var c={},d=a.R();if(d){var e=b,d=(0,pi[d.H()])(Xh(d,!0,e),e);c.geometry=d}d=a.Fa();delete d[a.c];c.attributes=eb(d)?{}:d;b&&b.featureProjection&&(c.spatialReference={wkid:Hb(b.featureProjection).Ia.split(":").pop()});return c};l.vd=function(a,b){b=Wh(this,b);var c=[],d,e;d=0;for(e=a.length;d<e;++d)c.push(this.sb(a[d],b));return{features:c}};function qi(a){re.call(this);this.a=a?a:null;ri(this)}t(qi,re);function si(a){var b=[],c,d;c=0;for(d=a.length;c<d;++c)b.push(a[c].clone());return b}function ti(a){var b,c;if(a.a)for(b=0,c=a.a.length;b<c;++b)nc(a.a[b],"change",a.b,a)}function ri(a){var b,c;if(a.a)for(b=0,c=a.a.length;b<c;++b)y(a.a[b],"change",a.b,a)}l=qi.prototype;l.clone=function(){var a=new qi(null),b=si(this.a);ti(a);a.a=b;ri(a);a.b();return a};
l.Ha=function(a,b,c,d){if(d<Pa(this.J(),a,b))return d;var e=this.a,f,g;f=0;for(g=e.length;f<g;++f)d=e[f].Ha(a,b,c,d);return d};l.Rb=function(a){Sa(a);for(var b=this.a,c=0,d=b.length;c<d;++c){var e=a,f=b[c].J();f[0]<e[0]&&(e[0]=f[0]);f[2]>e[2]&&(e[2]=f[2]);f[1]<e[1]&&(e[1]=f[1]);f[3]>e[3]&&(e[3]=f[3])}return a};
l.Rc=function(a){this.j!=this.f&&(cb(this.c),this.g=0,this.j=this.f);if(0>a||this.g&&a<this.g)return this;var b=a.toString();if(this.c.hasOwnProperty(b))return this.c[b];var c=[],d=this.a,e=!1,f,g;f=0;for(g=d.length;f<g;++f){var h=d[f],k=h.Rc(a);c.push(k);k!==h&&(e=!0)}if(e)return a=new qi(null),ti(a),a.a=c,ri(a),a.b(),this.c[b]=a;this.g=a;return this};l.H=function(){return"GeometryCollection"};l.rotate=function(a,b){for(var c=this.a,d=0,e=c.length;d<e;++d)c[d].rotate(a,b);this.b()};
l.scale=function(a,b,c){c||(c=Wa(this.J()));for(var d=this.a,e=0,f=d.length;e<f;++e)d[e].scale(a,b,c);this.b()};l.vb=function(a){var b=this.a,c,d;c=0;for(d=b.length;c<d;++c)b[c].vb(a);this.b()};l.ka=function(){ti(this);re.prototype.ka.call(this)};function ui(a){a=a?a:{};Uh.call(this);this.defaultDataProjection=Hb(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326");a.featureProjection&&(this.a=Hb(a.featureProjection));this.b=a.geometryName}t(ui,Yh);function vi(a,b){return a?Xh((0,wi[a.type])(a),!1,b):null}function xi(a,b){return(0,yi[a.H()])(Xh(a,!0,b),b)}
var wi={Point:function(a){return new Me(a.coordinates)},LineString:function(a){return new S(a.coordinates)},Polygon:function(a){return new B(a.coordinates)},MultiPoint:function(a){return new fi(a.coordinates)},MultiLineString:function(a){return new ci(a.coordinates)},MultiPolygon:function(a){return new hi(a.coordinates)},GeometryCollection:function(a,b){var c=a.geometries.map(function(a){return vi(a,b)});return new qi(c)}},yi={Point:function(a){return{type:"Point",coordinates:a.D()}},LineString:function(a){return{type:"LineString",
coordinates:a.D()}},Polygon:function(a,b){var c;b&&(c=b.rightHanded);return{type:"Polygon",coordinates:a.D(c)}},MultiPoint:function(a){return{type:"MultiPoint",coordinates:a.D()}},MultiLineString:function(a){return{type:"MultiLineString",coordinates:a.D()}},MultiPolygon:function(a,b){var c;b&&(c=b.rightHanded);return{type:"MultiPolygon",coordinates:a.D(c)}},GeometryCollection:function(a,b){return{type:"GeometryCollection",geometries:a.a.map(function(a){var c=bb({},b);delete c.featureProjection;return xi(a,
c)})}},Circle:function(){return{type:"GeometryCollection",geometries:[]}}};l=ui.prototype;l.Za=function(a,b){var c;c="Feature"===a.type?a:{type:"Feature",geometry:a};var d=vi(c.geometry,b),e=new I;this.b&&e.pb(this.b);e.xa(d);void 0!==c.id&&e.$a(c.id);c.properties&&e.oa(c.properties);return e};l.gd=function(a,b){var c;if("FeatureCollection"===a.type){c=[];var d=a.features,e,f;e=0;for(f=d.length;e<f;++e)c.push(this.Za(d[e],b))}else c=[this.Za(a,b)];return c};
l.ld=function(a){a=a.crs;var b;a?"name"==a.type?b=Hb(a.properties.name):"EPSG"==a.type?b=Hb("EPSG:"+a.properties.code):x(!1,36):b=this.defaultDataProjection;return b};l.sb=function(a,b){b=Wh(this,b);var c={type:"Feature"},d=a.a;void 0!==d&&(c.id=d);(d=a.R())?c.geometry=xi(d,b):c.geometry=null;d=a.Fa();delete d[a.c];eb(d)?c.properties=null:c.properties=d;return c};l.vd=function(a,b){b=Wh(this,b);var c=[],d,e;d=0;for(e=a.length;d<e;++d)c.push(this.sb(a[d],b));return{type:"FeatureCollection",features:c}};function zi(){this.u=new XMLSerializer;Uh.call(this)}t(zi,Uh);l=zi.prototype;l.H=function(){return"xml"};l.ec=function(a,b){if(a instanceof Document)return Ai(this,a,b);if(a instanceof Node)return null;if("string"===typeof a){var c=Kh(a);return Ai(this,c,b)}return null};function Ai(a,b,c){a=Bi(a,b,c);return 0<a.length?a[0]:null}l.Ra=function(a,b){if(a instanceof Document)return Bi(this,a,b);if(a instanceof Node)return this.fd(a,b);if("string"===typeof a){var c=Kh(a);return Bi(this,c,b)}return[]};
function Bi(a,b,c){var d=[];for(b=b.firstChild;b;b=b.nextSibling)b.nodeType==Node.ELEMENT_NODE&&oa(d,a.fd(b,c));return d}l.ic=function(a){return a instanceof Document?this.kd(a):a instanceof Node?this.jc(a):"string"===typeof a?(a=Kh(a),this.kd(a)):null};l.kd=function(){return this.defaultDataProjection};l.jc=function(){return this.defaultDataProjection};l.ud=function(){return this.u.serializeToString(null)};function U(a){a=a?a:{};this.featureType=a.featureType;this.featureNS=a.featureNS;this.srsName=a.srsName;this.schemaLocation="";this.b={};this.b["http://www.opengis.net/gml"]={featureMember:K(U.prototype.Gb),featureMembers:K(U.prototype.Gb)};zi.call(this)}t(U,zi);var Ci=/^[\s\xa0]*$/;l=U.prototype;
l.Gb=function(a,b){var c=a.localName,d=null;if("FeatureCollection"==c)"http://www.opengis.net/wfs"===a.namespaceURI?d=P([],this.b,a,b,this):d=P(null,this.b,a,b,this);else if("featureMembers"==c||"featureMember"==c){var e=b[0],f=e.featureType,g=e.featureNS,h,k;if(!f&&a.childNodes){f=[];g={};h=0;for(k=a.childNodes.length;h<k;++h){var m=a.childNodes[h];if(1===m.nodeType){var n=m.nodeName.split(":").pop();if(-1===f.indexOf(n)){var p="",q=0,m=m.namespaceURI,u;for(u in g){if(g[u]===m){p=u;break}++q}p||
(p="p"+q,g[p]=m);f.push(p+":"+n)}}}"featureMember"!=c&&(e.featureType=f,e.featureNS=g)}"string"===typeof g&&(h=g,g={},g.p0=h);var e={},f=Array.isArray(f)?f:[f],F;for(F in g){n={};h=0;for(k=f.length;h<k;++h)(-1===f[h].indexOf(":")?"p0":f[h].split(":")[0])===F&&(n[f[h].split(":").pop()]="featureMembers"==c?J(this.He,this):K(this.He,this));e[g[F]]=n}"featureMember"==c?d=P(void 0,e,a,b):d=P([],e,a,b)}null===d&&(d=[]);return d};
function Di(a,b,c){var d=c[0];d.srsName=b.firstElementChild.getAttribute("srsName");if(a=P(null,a.yd,b,c,a))return Xh(a,!1,d)}
l.He=function(a,b){var c,d;(d=a.getAttribute("fid"))||(d=a.getAttributeNS("http://www.opengis.net/gml","id")||"");var e={},f;for(c=a.firstElementChild;c;c=c.nextElementSibling){var g=c.localName;if(0===c.childNodes.length||1===c.childNodes.length&&(3===c.firstChild.nodeType||4===c.firstChild.nodeType)){var h=Ih(c);Ci.test(h)&&(h=void 0);e[g]=h}else"boundedBy"!==g&&(f=g),e[g]=Di(this,c,b)}c=new I(e);f&&c.pb(f);d&&c.$a(d);return c};
l.Ne=function(a,b){var c=this.fc(a,b);if(c){var d=new Me(null);ve(d,"XYZ",c);d.b();return d}};l.Le=function(a,b){var c=P([],this.lf,a,b,this);if(c)return new fi(c)};l.Ke=function(a,b){var c=P([],this.kf,a,b,this);if(c){var d=new ci(null);ei(d,c);return d}};l.Me=function(a,b){var c=P([],this.mf,a,b,this);if(c){var d=new hi(null);ki(d,c);return d}};l.Ee=function(a,b){Rh(this.qf,a,b,this)};l.$d=function(a,b){Rh(this.hf,a,b,this)};l.Fe=function(a,b){Rh(this.rf,a,b,this)};
l.gc=function(a,b){var c=this.fc(a,b);if(c){var d=new S(null);bi(d,"XYZ",c);return d}};l.Yh=function(a,b){var c=P(null,this.Ib,a,b,this);if(c)return c};l.Je=function(a,b){var c=this.fc(a,b);if(c){var d=new Ke(null);Le(d,"XYZ",c);return d}};l.hc=function(a,b){var c=P([null],this.sc,a,b,this);if(c&&c[0]){var d=new B(null),e=c[0],f=[e.length],g,h;g=1;for(h=c.length;g<h;++g)oa(e,c[g]),f.push(e.length);Te(d,"XYZ",e,f);return d}};l.fc=function(a,b){return P(null,this.Ib,a,b,this)};
l.lf={"http://www.opengis.net/gml":{pointMember:J(U.prototype.Ee),pointMembers:J(U.prototype.Ee)}};l.kf={"http://www.opengis.net/gml":{lineStringMember:J(U.prototype.$d),lineStringMembers:J(U.prototype.$d)}};l.mf={"http://www.opengis.net/gml":{polygonMember:J(U.prototype.Fe),polygonMembers:J(U.prototype.Fe)}};l.qf={"http://www.opengis.net/gml":{Point:J(U.prototype.fc)}};l.hf={"http://www.opengis.net/gml":{LineString:J(U.prototype.gc)}};l.rf={"http://www.opengis.net/gml":{Polygon:J(U.prototype.hc)}};
l.Jb={"http://www.opengis.net/gml":{LinearRing:K(U.prototype.Yh)}};l.fd=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};b&&bb(c,Vh(this,a,b));return this.Gb(a,[c])||[]};l.jc=function(a){return Hb(this.srsName?this.srsName:a.firstElementChild.getAttribute("srsName"))};function Ei(a){a=Ih(a);return Fi(a)}function Fi(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function Gi(a){a=Ih(a);a=Date.parse(a);return isNaN(a)?void 0:a/1E3}function Hi(a){a=Ih(a);return Ii(a)}function Ii(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function Ji(a){a=Ih(a);return Ki(a)}function Ki(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function V(a){return Ih(a).trim()}function Li(a,b){W(a,b?"1":"0")}
function Mi(a,b){a.appendChild(Gh.createTextNode(b.toPrecision()))}function Ni(a,b){a.appendChild(Gh.createTextNode(b.toString()))}function W(a,b){a.appendChild(Gh.createTextNode(b))};function Y(a){a=a?a:{};U.call(this,a);this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd"}t(Y,U);l=Y.prototype;l.bi=function(a,b){var c=P([],this.jf,a,b,this);if(c){var d=new ci(null);ei(d,c);return d}};l.ci=function(a,b){var c=P([],this.nf,a,b,this);if(c){var d=new hi(null);ki(d,c);return d}};l.Od=function(a,b){Rh(this.ef,a,b,this)};l.Xe=function(a,b){Rh(this.tf,a,b,this)};
l.di=function(a,b){return P([null],this.pf,a,b,this)};l.fi=function(a,b){return P([null],this.sf,a,b,this)};l.ei=function(a,b){return P([null],this.sc,a,b,this)};l.ai=function(a,b){return P([null],this.Ib,a,b,this)};l.Bg=function(a,b){var c=P(void 0,this.Jb,a,b,this);c&&b[b.length-1].push(c)};l.Of=function(a,b){var c=P(void 0,this.Jb,a,b,this);c&&(b[b.length-1][0]=c)};
l.Oe=function(a,b){var c=P([null],this.uf,a,b,this);if(c&&c[0]){var d=new B(null),e=c[0],f=[e.length],g,h;g=1;for(h=c.length;g<h;++g)oa(e,c[g]),f.push(e.length);Te(d,"XYZ",e,f);return d}};l.Ge=function(a,b){var c=P([null],this.ff,a,b,this);if(c){var d=new S(null);bi(d,"XYZ",c);return d}};l.Xh=function(a,b){var c=P([null],this.gf,a,b,this);return Ra(c[1][0],c[1][1],c[2][0],c[2][1])};
l.Zh=function(a,b){for(var c=Ih(a),d=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,e=[],f;f=d.exec(c);)e.push(parseFloat(f[1])),c=c.substr(f[0].length);if(""===c){c=b[0].srsName;d="enu";c&&(d=Hb(c).b);if("neu"===d)for(c=0,d=e.length;c<d;c+=3)f=e[c],e[c]=e[c+1],e[c+1]=f;c=e.length;2==c&&e.push(0);if(c)return e}};
l.jd=function(a,b){var c=Ih(a).replace(/^\s*|\s*$/g,""),d=b[0].srsName,e=a.parentNode.getAttribute("srsDimension"),f="enu";d&&(f=Hb(d).b);c=c.split(/\s+/);d=2;a.getAttribute("srsDimension")?d=Ki(a.getAttribute("srsDimension")):a.getAttribute("dimension")?d=Ki(a.getAttribute("dimension")):e&&(d=Ki(e));for(var g,h,k=[],m=0,n=c.length;m<n;m+=d)e=parseFloat(c[m]),g=parseFloat(c[m+1]),h=3===d?parseFloat(c[m+2]):0,"en"===f.substr(0,2)?k.push(e,g,h):k.push(g,e,h);return k};
l.Ib={"http://www.opengis.net/gml":{pos:K(Y.prototype.Zh),posList:K(Y.prototype.jd)}};l.sc={"http://www.opengis.net/gml":{interior:Y.prototype.Bg,exterior:Y.prototype.Of}};
l.yd={"http://www.opengis.net/gml":{Point:K(U.prototype.Ne),MultiPoint:K(U.prototype.Le),LineString:K(U.prototype.gc),MultiLineString:K(U.prototype.Ke),LinearRing:K(U.prototype.Je),Polygon:K(U.prototype.hc),MultiPolygon:K(U.prototype.Me),Surface:K(Y.prototype.Oe),MultiSurface:K(Y.prototype.ci),Curve:K(Y.prototype.Ge),MultiCurve:K(Y.prototype.bi),Envelope:K(Y.prototype.Xh)}};l.jf={"http://www.opengis.net/gml":{curveMember:J(Y.prototype.Od),curveMembers:J(Y.prototype.Od)}};
l.nf={"http://www.opengis.net/gml":{surfaceMember:J(Y.prototype.Xe),surfaceMembers:J(Y.prototype.Xe)}};l.ef={"http://www.opengis.net/gml":{LineString:J(U.prototype.gc),Curve:J(Y.prototype.Ge)}};l.tf={"http://www.opengis.net/gml":{Polygon:J(U.prototype.hc),Surface:J(Y.prototype.Oe)}};l.uf={"http://www.opengis.net/gml":{patches:K(Y.prototype.di)}};l.ff={"http://www.opengis.net/gml":{segments:K(Y.prototype.fi)}};l.gf={"http://www.opengis.net/gml":{lowerCorner:J(Y.prototype.jd),upperCorner:J(Y.prototype.jd)}};
l.pf={"http://www.opengis.net/gml":{PolygonPatch:K(Y.prototype.ei)}};l.sf={"http://www.opengis.net/gml":{LineStringSegment:K(Y.prototype.ai)}};function Oi(a,b,c){c=c[c.length-1].srsName;b=b.D();for(var d=b.length,e=Array(d),f,g=0;g<d;++g){f=b[g];var h=g,k="enu";c&&(k=Hb(c).b);e[h]="en"===k.substr(0,2)?f[0]+" "+f[1]:f[1]+" "+f[0]}W(a,e.join(" "))}
l.re=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=Hh(a.namespaceURI,"pos");a.appendChild(d);c=c[c.length-1].srsName;a="enu";c&&(a=Hb(c).b);b=b.D();W(d,"en"===a.substr(0,2)?b[0]+" "+b[1]:b[1]+" "+b[0])};var Pi={"http://www.opengis.net/gml":{lowerCorner:M(W),upperCorner:M(W)}};l=Y.prototype;l.jh=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);R({node:a},Pi,Ph,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)};
l.oe=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=Hh(a.namespaceURI,"posList");a.appendChild(d);Oi(d,b,c)};l.ih=function(a,b){var c=b[b.length-1],d=c.node,e=c.exteriorWritten;void 0===e&&(c.exteriorWritten=!0);return Hh(d.namespaceURI,void 0!==e?"interior":"exterior")};
l.ac=function(a,b,c){var d=c[c.length-1].srsName;"PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=We(b),R({node:a,srsName:d},Qi,this.ih,b,c,void 0,this)):"Surface"===a.nodeName&&(d=Hh(a.namespaceURI,"patches"),a.appendChild(d),a=Hh(d.namespaceURI,"PolygonPatch"),d.appendChild(a),this.ac(a,b,c))};
l.$b=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=Hh(a.namespaceURI,"posList"),a.appendChild(d),Oi(d,b,c)):"Curve"===a.nodeName&&(d=Hh(a.namespaceURI,"segments"),a.appendChild(d),a=Hh(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.$b(a,b,c))};
l.qe=function(a,b,c){var d=c[c.length-1],e=d.srsName,d=d.surface;e&&a.setAttribute("srsName",e);b=ji(b);R({node:a,srsName:e,surface:d},Ri,this.c,b,c,void 0,this)};l.kh=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);b=gi(b);R({node:a,srsName:d},Si,Nh("pointMember"),b,c,void 0,this)};l.pe=function(a,b,c){var d=c[c.length-1],e=d.srsName,d=d.curve;e&&a.setAttribute("srsName",e);b=b.hb();R({node:a,srsName:e,curve:d},Ti,this.c,b,c,void 0,this)};
l.se=function(a,b,c){var d=Hh(a.namespaceURI,"LinearRing");a.appendChild(d);this.oe(d,b,c)};l.te=function(a,b,c){var d=this.f(b,c);d&&(a.appendChild(d),this.ac(d,b,c))};l.lh=function(a,b,c){var d=Hh(a.namespaceURI,"Point");a.appendChild(d);this.re(d,b,c)};l.ne=function(a,b,c){var d=this.f(b,c);d&&(a.appendChild(d),this.$b(d,b,c))};
l.me=function(a,b,c){var d=c[c.length-1],e=bb({},d);e.node=a;var f;Array.isArray(b)?d.dataProjection?f=Pb(b,d.featureProjection,d.dataProjection):f=b:f=Xh(b,!0,d);R(e,Ui,this.f,[f],c,void 0,this)};
var Ri={"http://www.opengis.net/gml":{surfaceMember:M(Y.prototype.te),polygonMember:M(Y.prototype.te)}},Si={"http://www.opengis.net/gml":{pointMember:M(Y.prototype.lh)}},Ti={"http://www.opengis.net/gml":{lineStringMember:M(Y.prototype.ne),curveMember:M(Y.prototype.ne)}},Qi={"http://www.opengis.net/gml":{exterior:M(Y.prototype.se),interior:M(Y.prototype.se)}},Ui={"http://www.opengis.net/gml":{Curve:M(Y.prototype.$b),MultiCurve:M(Y.prototype.pe),Point:M(Y.prototype.re),MultiPoint:M(Y.prototype.kh),
LineString:M(Y.prototype.$b),MultiLineString:M(Y.prototype.pe),LinearRing:M(Y.prototype.oe),Polygon:M(Y.prototype.ac),MultiPolygon:M(Y.prototype.qe),Surface:M(Y.prototype.ac),MultiSurface:M(Y.prototype.qe),Envelope:M(Y.prototype.jh)}},Vi={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};Y.prototype.c=function(a,b){return Hh("http://www.opengis.net/gml",Vi[b[b.length-1].node.nodeName])};
Y.prototype.f=function(a,b){var c=b[b.length-1],d=c.multiSurface,e=c.surface,f=c.curve,c=c.multiCurve,g;Array.isArray(a)?g="Envelope":(g=a.H(),"MultiPolygon"===g&&!0===d?g="MultiSurface":"Polygon"===g&&!0===e?g="Surface":"LineString"===g&&!0===f?g="Curve":"MultiLineString"===g&&!0===c&&(g="MultiCurve"));return Hh("http://www.opengis.net/gml",g)};function Wi(a){a=a?a:{};U.call(this,a);this.b["http://www.opengis.net/gml"].featureMember=J(U.prototype.Gb);this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}t(Wi,U);l=Wi.prototype;
l.Ie=function(a,b){var c=Ih(a).replace(/^\s*|\s*$/g,""),d=b[0].srsName,e="enu";d&&(d=Hb(d))&&(e=d.b);for(var c=c.trim().split(/\s+/),f,g,h=[],k=0,m=c.length;k<m;k++)g=c[k].split(/,+/),d=parseFloat(g[0]),f=parseFloat(g[1]),g=3===g.length?parseFloat(g[2]):0,"en"===e.substr(0,2)?h.push(d,f,g):h.push(f,d,g);return h};l.Vh=function(a,b){var c=P([null],this.df,a,b,this);return Ra(c[1][0],c[1][1],c[1][3],c[1][4])};l.zg=function(a,b){var c=P(void 0,this.Jb,a,b,this);c&&b[b.length-1].push(c)};
l.Gh=function(a,b){var c=P(void 0,this.Jb,a,b,this);c&&(b[b.length-1][0]=c)};l.Ib={"http://www.opengis.net/gml":{coordinates:K(Wi.prototype.Ie)}};l.sc={"http://www.opengis.net/gml":{innerBoundaryIs:Wi.prototype.zg,outerBoundaryIs:Wi.prototype.Gh}};l.df={"http://www.opengis.net/gml":{coordinates:J(Wi.prototype.Ie)}};
l.yd={"http://www.opengis.net/gml":{Point:K(U.prototype.Ne),MultiPoint:K(U.prototype.Le),LineString:K(U.prototype.gc),MultiLineString:K(U.prototype.Ke),LinearRing:K(U.prototype.Je),Polygon:K(U.prototype.hc),MultiPolygon:K(U.prototype.Me),Box:K(Wi.prototype.Vh)}};
l.Yc=function(a,b){var c=b[b.length-1],d=c.multiSurface,e=c.surface,c=c.multiCurve,f;Array.isArray(a)?f="Envelope":(f=a.H(),"MultiPolygon"===f&&!0===d?f="MultiSurface":"Polygon"===f&&!0===e?f="Surface":"MultiLineString"===f&&!0===c&&(f="MultiCurve"));return Hh("http://www.opengis.net/gml",f)};l.ee=function(a,b,c){var d=c[c.length-1],e=bb({},d);e.node=a;var f;Array.isArray(b)?d.dataProjection?f=Pb(b,d.featureProjection,d.dataProjection):f=b:f=Xh(b,!0,d);R(e,Xi,this.Yc,[f],c,void 0,this)};
l.Yb=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=Yi(a.namespaceURI),a.appendChild(d),Zi(d,b,c)):"Curve"===a.nodeName&&(d=Hh(a.namespaceURI,"segments"),a.appendChild(d),a=Hh(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.Yb(a,b,c))};function Yi(a){a=Hh(a,"coordinates");a.setAttribute("decimal",".");a.setAttribute("cs",",");a.setAttribute("ts"," ");return a}
function Zi(a,b,c){c=c[c.length-1].srsName;b=b.D();for(var d=b.length,e=Array(d),f,g=0;g<d;++g)f=b[g],e[g]=$i(f,c);W(a,e.join(" "))}l.Zb=function(a,b,c){var d=c[c.length-1].srsName;"PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=We(b),R({node:a,srsName:d},aj,this.eh,b,c,void 0,this)):"Surface"===a.nodeName&&(d=Hh(a.namespaceURI,"patches"),a.appendChild(d),a=Hh(d.namespaceURI,"PolygonPatch"),d.appendChild(a),this.Zb(a,b,c))};
l.eh=function(a,b){var c=b[b.length-1],d=c.node,e=c.exteriorWritten;void 0===e&&(c.exteriorWritten=!0);return Hh(d.namespaceURI,void 0!==e?"innerBoundaryIs":"outerBoundaryIs")};l.ke=function(a,b,c){var d=Hh(a.namespaceURI,"LinearRing");a.appendChild(d);this.ge(d,b,c)};function $i(a,b){var c="enu";b&&(c=Hb(b).b);return"en"===c.substr(0,2)?a[0]+","+a[1]:a[1]+","+a[0]}
l.he=function(a,b,c){var d=c[c.length-1],e=d.srsName,d=d.curve;e&&a.setAttribute("srsName",e);b=b.hb();R({node:a,srsName:e,curve:d},bj,this.f,b,c,void 0,this)};l.je=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);c=Yi(a.namespaceURI);a.appendChild(c);a=b.D();a=$i(a,d);W(c,a)};l.gh=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);b=gi(b);R({node:a,srsName:d},cj,Nh("pointMember"),b,c,void 0,this)};
l.hh=function(a,b,c){var d=Hh(a.namespaceURI,"Point");a.appendChild(d);this.je(d,b,c)};l.fe=function(a,b,c){var d=this.Yc(b,c);d&&(a.appendChild(d),this.Yb(d,b,c))};l.ge=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=Yi(a.namespaceURI);a.appendChild(d);Zi(d,b,c)};l.ie=function(a,b,c){var d=c[c.length-1],e=d.srsName,d=d.surface;e&&a.setAttribute("srsName",e);b=ji(b);R({node:a,srsName:e,surface:d},dj,this.f,b,c,void 0,this)};
l.le=function(a,b,c){var d=this.Yc(b,c);d&&(a.appendChild(d),this.Zb(d,b,c))};l.fh=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);R({node:a},ej,Ph,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)};
var Xi={"http://www.opengis.net/gml":{Curve:M(Wi.prototype.Yb),MultiCurve:M(Wi.prototype.he),Point:M(Wi.prototype.je),MultiPoint:M(Wi.prototype.gh),LineString:M(Wi.prototype.Yb),MultiLineString:M(Wi.prototype.he),LinearRing:M(Wi.prototype.ge),Polygon:M(Wi.prototype.Zb),MultiPolygon:M(Wi.prototype.ie),Surface:M(Wi.prototype.Zb),MultiSurface:M(Wi.prototype.ie),Envelope:M(Wi.prototype.fh)}},aj={"http://www.opengis.net/gml":{outerBoundaryIs:M(Wi.prototype.ke),innerBoundaryIs:M(Wi.prototype.ke)}},cj={"http://www.opengis.net/gml":{pointMember:M(Wi.prototype.hh)}},
bj={"http://www.opengis.net/gml":{lineStringMember:M(Wi.prototype.fe),curveMember:M(Wi.prototype.fe)}};Wi.prototype.f=function(a,b){return Hh("http://www.opengis.net/gml",fj[b[b.length-1].node.nodeName])};var fj={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},dj={"http://www.opengis.net/gml":{surfaceMember:M(Wi.prototype.le),polygonMember:M(Wi.prototype.le)}},ej={"http://www.opengis.net/gml":{lowerCorner:M(W),upperCorner:M(W)}};var gj=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function hj(a,b,c,d){a.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(a.push(d.ele),delete d.ele,b.hasZ=!0):a.push(0);"time"in d?(a.push(d.time),delete d.time,b.hasM=!0):a.push(0);return a}
function ij(a,b,c){var d="XY",e=2;a.hasZ&&a.hasM?(d="XYZM",e=4):a.hasZ?(d="XYZ",e=3):a.hasM&&(d="XYM",e=3);if(4!==e){var f,g;f=0;for(g=b.length/4;f<g;f++)b[f*e]=b[4*f],b[f*e+1]=b[4*f+1],a.hasZ&&(b[f*e+2]=b[4*f+2]),a.hasM&&(b[f*e+2]=b[4*f+3]);b.length=b.length/4*e;if(c)for(f=0,g=c.length;f<g;f++)c[f]=c[f]/4*e}return d}function jj(a,b){var c=b[b.length-1],d=a.getAttribute("href");null!==d&&(c.link=d);Rh(kj,a,b)}function lj(a,b){b[b.length-1].extensionsNode_=a}
O(gj,{rte:J(function(a,b){var c=b[0],d=P({flatCoordinates:[],layoutOptions:{}},mj,a,b);if(d){var e=d.flatCoordinates;delete d.flatCoordinates;var f=d.layoutOptions;delete d.layoutOptions;var f=ij(f,e),g=new S(null);bi(g,f,e);Xh(g,!1,c);c=new I(g);c.oa(d);return c}}),trk:J(function(a,b){var c=b[0],d=P({flatCoordinates:[],ends:[],layoutOptions:{}},nj,a,b);if(d){var e=d.flatCoordinates;delete d.flatCoordinates;var f=d.ends;delete d.ends;var g=d.layoutOptions;delete d.layoutOptions;var g=ij(g,e,f),h=
new ci(null);di(h,g,e,f);Xh(h,!1,c);c=new I(h);c.oa(d);return c}}),wpt:J(function(a,b){var c=b[0],d=P({},oj,a,b);if(d){var e={},f=hj([],e,a,d),e=ij(e,f),f=new Me(f,e);Xh(f,!1,c);c=new I(f);c.oa(d);return c}})});
var kj=O(gj,{text:L(V,"linkText"),type:L(V,"linkType")}),mj=O(gj,{name:L(V),cmt:L(V),desc:L(V),src:L(V),link:jj,number:L(Ji),extensions:lj,type:L(V),rtept:function(a,b){var c=P({},pj,a,b);if(c){var d=b[b.length-1];hj(d.flatCoordinates,d.layoutOptions,a,c)}}}),pj=O(gj,{ele:L(Hi),time:L(Gi)}),nj=O(gj,{name:L(V),cmt:L(V),desc:L(V),src:L(V),link:jj,number:L(Ji),type:L(V),extensions:lj,trkseg:function(a,b){var c=b[b.length-1];Rh(qj,a,b);c.ends.push(c.flatCoordinates.length)}}),qj=O(gj,{trkpt:function(a,
b){var c=P({},rj,a,b);if(c){var d=b[b.length-1];hj(d.flatCoordinates,d.layoutOptions,a,c)}}}),rj=O(gj,{ele:L(Hi),time:L(Gi)}),oj=O(gj,{ele:L(Hi),time:L(Gi),magvar:L(Hi),geoidheight:L(Hi),name:L(V),cmt:L(V),desc:L(V),src:L(V),link:jj,sym:L(V),type:L(V),fix:L(V),sat:L(Ji),hdop:L(Hi),vdop:L(Hi),pdop:L(Hi),ageofdgpsdata:L(Hi),dgpsid:L(Ji),extensions:lj});function sj(a,b,c){a.setAttribute("href",b);b=c[c.length-1].properties;R({node:a},tj,Ph,[b.linkText,b.linkType],c,uj)}
function vj(a,b,c){var d=c[c.length-1],e=d.node.namespaceURI,f=d.properties;a.setAttributeNS(null,"lat",b[1]);a.setAttributeNS(null,"lon",b[0]);switch(d.geometryLayout){case "XYZM":b[3]&&(f.time=b[3]);case "XYZ":b[2]&&(f.ele=b[2]);break;case "XYM":b[2]&&(f.time=b[2])}b="rtept"==a.nodeName?wj[e]:xj[e];d=Qh(f,b);R({node:a,properties:f},yj,Ph,d,c,b)}
var uj=["text","type"],tj=O(gj,{text:M(W),type:M(W)}),zj=O(gj,"name cmt desc src link number type rtept".split(" ")),Aj=O(gj,{name:M(W),cmt:M(W),desc:M(W),src:M(W),link:M(sj),number:M(Ni),type:M(W),rtept:Mh(M(vj))}),wj=O(gj,["ele","time"]),Bj=O(gj,"name cmt desc src link number type trkseg".split(" ")),Ej=O(gj,{name:M(W),cmt:M(W),desc:M(W),src:M(W),link:M(sj),number:M(Ni),type:M(W),trkseg:Mh(M(function(a,b,c){R({node:a,geometryLayout:b.X,properties:{}},Cj,Dj,b.D(),c)}))}),Dj=Nh("trkpt"),Cj=O(gj,{trkpt:M(vj)}),
xj=O(gj,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),yj=O(gj,{ele:M(Mi),time:M(function(a,b){var c=new Date(1E3*b);a.appendChild(Gh.createTextNode(c.getUTCFullYear()+"-"+ge(c.getUTCMonth()+1)+"-"+ge(c.getUTCDate())+"T"+ge(c.getUTCHours())+":"+ge(c.getUTCMinutes())+":"+ge(c.getUTCSeconds())+"Z"))}),magvar:M(Mi),geoidheight:M(Mi),name:M(W),cmt:M(W),desc:M(W),src:M(W),link:M(sj),sym:M(W),type:M(W),fix:M(W),sat:M(Ni),hdop:M(Mi),
vdop:M(Mi),pdop:M(Mi),ageofdgpsdata:M(Mi),dgpsid:M(Ni)});
O(gj,{rte:M(function(a,b,c){var d=c[0],e=b.Fa();a={node:a,properties:e};if(b=b.R())b=Xh(b,!0,d),a.geometryLayout=b.X,e.rtept=b.D();d=zj[c[c.length-1].node.namespaceURI];e=Qh(e,d);R(a,Aj,Ph,e,c,d)}),trk:M(function(a,b,c){var d=c[0],e=b.Fa();a={node:a,properties:e};if(b=b.R())b=Xh(b,!0,d),e.trkseg=b.hb();d=Bj[c[c.length-1].node.namespaceURI];e=Qh(e,d);R(a,Ej,Ph,e,c,d)}),wpt:M(function(a,b,c){var d=c[0],e=c[c.length-1];e.properties=b.Fa();if(b=b.R())b=Xh(b,!0,d),e.geometryLayout=b.X,vj(a,b.D(),c)})});function Fj(){Uh.call(this)}t(Fj,Uh);l=Fj.prototype;l.H=function(){return"text"};l.ec=function(a,b){var c;c=Wh(this,b);if(c=Gj("string"===typeof a?a:"",c)){var d=new I;d.xa(c);c=d}else c=null;return c};l.Ra=function(a,b){var c=Wh(this,b),d=[],c=Gj("string"===typeof a?a:"",c);this.b&&"GeometryCollection"==c.H()?d=c.a:d=[c];for(var e=[],f=0,g=d.length;f<g;++f)c=new I,c.xa(d[f]),e.push(c);return e};l.ic=function(){return this.defaultDataProjection};
l.ud=function(a,b){var c=Wh(this,b),d=a.R();return d?Hj(Xh(d,!0,c)):""};function Ij(a,b,c,d,e,f){sc.call(this);this.i=null;this.N=a?a:new Image;null!==d&&(this.N.crossOrigin=d);this.a=f?document.createElement("CANVAS"):null;this.g=f;this.c=null;this.f=e;this.b=c;this.u=b;this.j=!1;2==this.f&&Jj(this)}t(Ij,sc);function Jj(a){var b=Oc(1,1);try{b.drawImage(a.N,0,0),b.getImageData(0,0,1,1)}catch(c){a.j=!0}}Ij.prototype.o=function(){this.f=3;this.c.forEach(ic);this.c=null;A(this,"change")};
Ij.prototype.K=function(){this.f=2;this.b&&(this.N.width=this.b[0],this.N.height=this.b[1]);this.b=[this.N.width,this.N.height];this.c.forEach(ic);this.c=null;Jj(this);if(!this.j&&null!==this.g){this.a.width=this.N.width;this.a.height=this.N.height;var a=this.a.getContext("2d");a.drawImage(this.N,0,0);for(var b=a.getImageData(0,0,this.N.width,this.N.height),c=b.data,d=this.g[0]/255,e=this.g[1]/255,f=this.g[2]/255,g=0,h=c.length;g<h;g+=4)c[g]*=d,c[g+1]*=e,c[g+2]*=f;a.putImageData(b,0,0)}A(this,"change")};
Ij.prototype.ia=function(){return this.a?this.a:this.N};Ij.prototype.load=function(){if(0==this.f){this.f=1;this.c=[y(this.N,"error",this.o,this,!0),y(this.N,"load",this.K,this,!0)];try{this.N.src=this.u}catch(a){this.o()}}};function Kj(a){a=a||{};this.c=void 0!==a.anchor?a.anchor:[.5,.5];this.j=null;this.f=void 0!==a.anchorOrigin?a.anchorOrigin:"top-left";this.C=void 0!==a.anchorXUnits?a.anchorXUnits:"fraction";this.aa=void 0!==a.anchorYUnits?a.anchorYUnits:"fraction";this.fa=void 0!==a.crossOrigin?a.crossOrigin:null;var b=void 0!==a.img?a.img:null,c=void 0!==a.imgSize?a.imgSize:null,d=a.src;x(!(void 0!==d&&b),4);x(!b||b&&c,5);void 0!==d&&d.length||!b||(d=b.src||w(b).toString());x(void 0!==d&&0<d.length,6);var e=void 0!==
a.src?0:2,f;void 0!==a.color?(f=a.color,f=Array.isArray(f)?f:Lc(f)):f=null;this.u=f;f=this.fa;var g=this.u,h=pg.get(d,f,g);h||(h=new Ij(b,d,c,f,e,g),pg.set(d,f,g,h));this.b=h;this.ga=void 0!==a.offset?a.offset:[0,0];this.a=void 0!==a.offsetOrigin?a.offsetOrigin:"top-left";this.B=null;this.v=void 0!==a.size?a.size:null;uh.call(this,{opacity:void 0!==a.opacity?a.opacity:1,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:!0,rotateWithView:void 0!==
a.rotateWithView?a.rotateWithView:!1})}t(Kj,uh);l=Kj.prototype;
l.clone=function(){var a=this.ia(1),b;if(2===this.b.f)if("IMG"===a.tagName.toUpperCase())b=a.cloneNode(!0);else{b=document.createElement("canvas");var c=b.getContext("2d");b.width=a.width;b.height=a.height;c.drawImage(a,0,0)}return new Kj({anchor:this.c.slice(),anchorOrigin:this.f,anchorXUnits:this.C,anchorYUnits:this.aa,crossOrigin:this.fa,color:this.u&&this.u.slice?this.u.slice():this.u||void 0,img:b?b:void 0,imgSize:b?this.b.b.slice():void 0,src:b?void 0:this.b.u,offset:this.ga.slice(),offsetOrigin:this.a,
size:null!==this.v?this.v.slice():void 0,opacity:this.i,scale:this.g,snapToPixel:this.K,rotation:this.o,rotateWithView:this.s})};
l.Sb=function(){if(this.j)return this.j;var a=this.c,b=this.nb();if("fraction"==this.C||"fraction"==this.aa){if(!b)return null;a=this.c.slice();"fraction"==this.C&&(a[0]*=b[0]);"fraction"==this.aa&&(a[1]*=b[1])}if("top-left"!=this.f){if(!b)return null;a===this.c&&(a=this.c.slice());if("top-right"==this.f||"bottom-right"==this.f)a[0]=-a[0]+b[0];if("bottom-left"==this.f||"bottom-right"==this.f)a[1]=-a[1]+b[1]}return this.j=a};l.ia=function(a){return this.b.ia(a)};l.Ud=function(){return this.b.b};
l.cc=function(){return this.b.f};l.Be=function(){var a=this.b;if(!a.i)if(a.j){var b=a.b[0],c=a.b[1],d=Oc(b,c);d.fillRect(0,0,b,c);a.i=d.canvas}else a.i=a.N;return a.i};l.dc=function(){if(this.B)return this.B;var a=this.ga;if("top-left"!=this.a){var b=this.nb(),c=this.b.b;if(!b||!c)return null;a=a.slice();if("top-right"==this.a||"bottom-right"==this.a)a[0]=c[0]-b[0]-a[0];if("bottom-left"==this.a||"bottom-right"==this.a)a[1]=c[1]-b[1]-a[1]}return this.B=a};l.nb=function(){return this.v?this.v:this.b.b};
l.ae=function(a,b){return y(this.b,"change",a,b)};l.load=function(){this.b.load()};l.Ye=function(a,b){nc(this.b,"change",a,b)};function Lj(a){a=a||{};this.f=a.font;this.i=a.rotation;this.g=a.rotateWithView;this.b=a.scale;this.ea=a.text;this.u=a.textAlign;this.j=a.textBaseline;this.la=void 0!==a.fill?a.fill:new yh({color:"#333"});this.pa=void 0!==a.stroke?a.stroke:null;this.a=void 0!==a.offsetX?a.offsetX:0;this.c=void 0!==a.offsetY?a.offsetY:0}l=Lj.prototype;
l.clone=function(){return new Lj({font:this.f,rotation:this.i,rotateWithView:this.g,scale:this.b,text:this.na(),textAlign:this.u,textBaseline:this.j,fill:this.qa()?this.qa().clone():void 0,stroke:this.ma()?this.ma().clone():void 0,offsetX:this.a,offsetY:this.c})};l.qa=function(){return this.la};l.ma=function(){return this.pa};l.na=function(){return this.ea};l.Qe=function(a){this.la=a};l.Te=function(a){this.pa=a};l.Ue=function(a){this.ea=a};var Mj=["http://www.google.com/kml/ext/2.2"],Z=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Nj={fraction:"fraction",pixels:"pixels"};function Oj(a){a=Ih(a);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]}
function Pj(a){a=Ih(a);for(var b=[],c=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,d;d=c.exec(a);)b.push(parseFloat(d[1]),parseFloat(d[2]),d[3]?parseFloat(d[3]):0),a=a.substr(d[0].length);if(""===a)return b}function Qj(a){var b=Ih(a).trim();return a.baseURI?(new URL(b,a.baseURI)).href:b}function Rj(a){return Hi(a)}function Sj(a,b){return P(null,Tj,a,b)}
function Uj(a,b){var c=P({l:[],cf:[]},Vj,a,b);if(c){var d=c.l,c=c.cf,e,f;e=0;for(f=Math.min(d.length,c.length);e<f;++e)d[4*e+3]=c[e];c=new S(null);bi(c,"XYZM",d);return c}}function Wj(a,b){var c=P({},Xj,a,b),d=P(null,Yj,a,b);if(d){var e=new S(null);bi(e,"XYZ",d);e.oa(c);return e}}function Zj(a,b){var c=P({},Xj,a,b),d=P(null,Yj,a,b);if(d){var e=new B(null);Te(e,"XYZ",d,[d.length]);e.oa(c);return e}}
function ak(a,b){var c=P([],bk,a,b);if(!c)return null;if(!c.length)return new qi(c);var d,e=!0,f=c[0].H(),g,h,k;h=1;for(k=c.length;h<k;++h)if(g=c[h],g.H()!=f){e=!1;break}if(e)if("Point"==f){d=c[0];e=d.X;f=d.l;h=1;for(k=c.length;h<k;++h)g=c[h],oa(f,g.l);g=d=new fi(null);ve(g,e,f);g.b();ck(d,c)}else"LineString"==f?(d=new ci(null),ei(d,c),ck(d,c)):"Polygon"==f?(d=new hi(null),ki(d,c),ck(d,c)):"GeometryCollection"==f?d=new qi(c):x(!1,37);else d=new qi(c);return d}
function dk(a,b){var c=P({},Xj,a,b),d=P(null,Yj,a,b);if(d){var e=new Me(null);ve(e,"XYZ",d);e.b();e.oa(c);return e}}function ek(a,b){var c=P({},Xj,a,b),d=P([null],fk,a,b);if(d&&d[0]){var e=new B(null),f=d[0],g=[f.length],h,k;h=1;for(k=d.length;h<k;++h)oa(f,d[h]),g.push(f.length);Te(e,"XYZ",f,g);e.oa(c);return e}}
function gk(a,b){var c=P({},hk,a,b);if(!c)return null;var d="fillStyle"in c?c.fillStyle:void 0,e=c.fill;void 0===e||e||(d=null);(e="imageStyle"in c?c.imageStyle:void 0)||(e=void 0);var f="textStyle"in c?c.textStyle:void 0,g="strokeStyle"in c?c.strokeStyle:void 0,c=c.outline;void 0===c||c||(g=null);return[new zh({fill:d,image:e,stroke:g,text:f,zIndex:void 0})]}
function ck(a,b){var c=b.length,d=Array(b.length),e=Array(b.length),f,g,h,k;h=k=!1;for(g=0;g<c;++g)f=b[g],d[g]=f.get("extrude"),e[g]=f.get("altitudeMode"),h=h||void 0!==d[g],k=k||e[g];h&&a.set("extrude",d);k&&a.set("altitudeMode",e)}function ik(a,b){Rh(jk,a,b)}function kk(a,b){Rh(lk,a,b)}
var mk=O(Z,{displayName:L(V),value:L(V)}),jk=O(Z,{Data:function(a,b){var c=a.getAttribute("name");Rh(mk,a,b);var d=b[b.length-1];null!==c?d[c]=d.value:null!==d.displayName&&(d[d.displayName]=d.value)},SchemaData:function(a,b){Rh(nk,a,b)}}),lk=O(Z,{LatLonAltBox:function(a,b){var c=P({},ok,a,b);if(c){var d=b[b.length-1];d.extent=[parseFloat(c.west),parseFloat(c.south),parseFloat(c.east),parseFloat(c.north)];d.altitudeMode=c.altitudeMode;d.minAltitude=parseFloat(c.minAltitude);d.maxAltitude=parseFloat(c.maxAltitude)}},
Lod:function(a,b){var c=P({},pk,a,b);if(c){var d=b[b.length-1];d.minLodPixels=parseFloat(c.minLodPixels);d.maxLodPixels=parseFloat(c.maxLodPixels);d.minFadeExtent=parseFloat(c.minFadeExtent);d.maxFadeExtent=parseFloat(c.maxFadeExtent)}}}),ok=O(Z,{altitudeMode:L(V),minAltitude:L(Hi),maxAltitude:L(Hi),north:L(Hi),south:L(Hi),east:L(Hi),west:L(Hi)}),pk=O(Z,{minLodPixels:L(Hi),maxLodPixels:L(Hi),minFadeExtent:L(Hi),maxFadeExtent:L(Hi)}),Xj=O(Z,{extrude:L(Ei),altitudeMode:L(V)}),Tj=O(Z,{coordinates:K(Pj)}),
fk=O(Z,{innerBoundaryIs:function(a,b){var c=P(void 0,qk,a,b);c&&b[b.length-1].push(c)},outerBoundaryIs:function(a,b){var c=P(void 0,rk,a,b);c&&(b[b.length-1][0]=c)}}),Vj=O(Z,{when:function(a,b){var c=b[b.length-1].cf,d=Ih(a),d=Date.parse(d);c.push(isNaN(d)?0:d)}},O(Mj,{coord:function(a,b){var c=b[b.length-1].l,d=Ih(a);(d=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(d))?c.push(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]),
0):c.push(0,0,0,0)}})),Yj=O(Z,{coordinates:K(Pj)}),sk=O(Z,{href:L(Qj)},O(Mj,{x:L(Hi),y:L(Hi),w:L(Hi),h:L(Hi)})),tk=O(Z,{Icon:L(function(a,b){var c=P({},sk,a,b);return c?c:null}),heading:L(Hi),hotSpot:L(function(a){var b=a.getAttribute("xunits"),c=a.getAttribute("yunits");return{x:parseFloat(a.getAttribute("x")),wd:Nj[b],y:parseFloat(a.getAttribute("y")),xd:Nj[c]}}),scale:L(Rj)}),qk=O(Z,{LinearRing:K(Sj)}),uk=O(Z,{color:L(Oj),scale:L(Rj)}),vk=O(Z,{color:L(Oj),width:L(Hi)}),bk=O(Z,{LineString:J(Wj),
LinearRing:J(Zj),MultiGeometry:J(ak),Point:J(dk),Polygon:J(ek)}),wk=O(Mj,{Track:J(Uj)});O(Z,{ExtendedData:ik,Region:kk,Link:function(a,b){Rh(xk,a,b)},address:L(V),description:L(V),name:L(V),open:L(Ei),phoneNumber:L(V),visibility:L(Ei)});var xk=O(Z,{href:L(Qj)}),rk=O(Z,{LinearRing:K(Sj)}),yk=O(Z,{Style:L(gk),key:L(V),styleUrl:L(Qj)});
O(Z,{ExtendedData:ik,Region:kk,MultiGeometry:L(ak,"geometry"),LineString:L(Wj,"geometry"),LinearRing:L(Zj,"geometry"),Point:L(dk,"geometry"),Polygon:L(ek,"geometry"),Style:L(gk),StyleMap:function(a,b){var c=P(void 0,zk,a,b);if(c){var d=b[b.length-1];Array.isArray(c)?d.Style=c:"string"===typeof c?d.styleUrl=c:x(!1,38)}},address:L(V),description:L(V),name:L(V),open:L(Ei),phoneNumber:L(V),styleUrl:L(Qj),visibility:L(Ei)},O(Mj,{MultiTrack:L(function(a,b){var c=P([],wk,a,b);if(c){var d=new ci(null);ei(d,
c);return d}},"geometry"),Track:L(Uj,"geometry")}));
var Ak=O(Z,{color:L(Oj),fill:L(Ei),outline:L(Ei)}),nk=O(Z,{SimpleData:function(a,b){var c=a.getAttribute("name");if(null!==c){var d=V(a);b[b.length-1][c]=d}}}),hk=O(Z,{IconStyle:function(a,b){var c=P({},tk,a,b);if(c){var d=b[b.length-1],e="Icon"in c?c.Icon:{},f=!("Icon"in c)||0<Object.keys(e).length,g,h=e.href;h?g=h:f&&(g=void 0);var k,m,n;(h=c.hotSpot)?(k=[h.x,h.y],m=h.wd,n=h.xd):void 0===g?n=m=k=void 0:/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(g)&&(k=[.5,0],n=m="fraction");var p,h=e.x,q=
e.y;void 0!==h&&void 0!==q&&(p=[h,q]);var u,h=e.w,e=e.h;void 0!==h&&void 0!==e&&(u=[h,e]);var F,e=c.heading;void 0!==e&&(F=Da(e));c=c.scale;f?(void 0==g&&(u=void 0,void 0===c&&(c=void 0)),f=new Kj({anchor:k,anchorOrigin:"bottom-left",anchorXUnits:m,anchorYUnits:n,crossOrigin:"anonymous",offset:p,offsetOrigin:"bottom-left",rotation:F,scale:c,size:u,src:g}),d.imageStyle=f):d.imageStyle=void 0}},LabelStyle:function(a,b){var c=P({},uk,a,b);c&&(b[b.length-1].textStyle=new Lj({fill:new yh({color:"color"in
c?c.color:void 0}),scale:c.scale}))},LineStyle:function(a,b){var c=P({},vk,a,b);c&&(b[b.length-1].strokeStyle=new Tg({color:"color"in c?c.color:void 0,width:"width"in c?c.width:1}))},PolyStyle:function(a,b){var c=P({},Ak,a,b);if(c){var d=b[b.length-1];d.fillStyle=new yh({color:"color"in c?c.color:void 0});var e=c.fill;void 0!==e&&(d.fill=e);c=c.outline;void 0!==c&&(d.outline=c)}}}),zk=O(Z,{Pair:function(a,b){var c=P({},yk,a,b);if(c){var d=c.key;d&&"normal"==d&&((d=c.styleUrl)&&(b[b.length-1]=d),(c=
c.Style)&&(b[b.length-1]=c))}}});function Bk(a,b){var c=Array.isArray(b)?b:Lc(b),c=[255*(4==c.length?c[3]:1),c[2],c[1],c[0]],d;for(d=0;4>d;++d){var e=parseInt(c[d],10).toString(16);c[d]=1==e.length?"0"+e:e}W(a,c.join(""))}function Ck(a,b,c){a={node:a};var d=b.H(),e,f;"GeometryCollection"==d?(e=si(b.a),f=Dk):"MultiPoint"==d?(e=gi(b),f=Ek):"MultiLineString"==d?(e=b.hb(),f=Fk):"MultiPolygon"==d?(e=ji(b),f=Gk):x(!1,39);R(a,Hk,f,e,c)}function Ik(a,b,c){R({node:a},Jk,Kk,[b],c)}
function Lk(a,b,c){var d={node:a};b.a&&a.setAttribute("id",b.a);a=b.Fa();var e={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};e[b.c]=1;var f=Object.keys(a||{}).sort().filter(function(a){return!e[a]});if(0<f.length){var g=Qh(a,f);R(d,Mk,Nk,[{names:f,values:g}],c)}if(f=b.i)if(f=f.call(b,0))f=Array.isArray(f)?f[0]:f,this.b&&(a.Style=f),(f=f.na())&&(a.name=f.na());f=Ok[c[c.length-1].node.namespaceURI];a=Qh(a,f);R(d,Mk,Ph,a,c,f);a=c[0];(b=b.R())&&(b=Xh(b,!0,a));R(d,Mk,Dk,
[b],c)}function Pk(a,b,c){var d=b.l;a={node:a};a.layout=b.X;a.stride=b.A;R(a,Qk,Rk,[d],c)}function Sk(a,b,c){b=We(b);var d=b.shift();a={node:a};R(a,Tk,Uk,b,c);R(a,Tk,Vk,[d],c)}function Wk(a,b){Mi(a,Math.round(1E6*b)/1E6)}O(Z,["Document","Placemark"]);O(Z,{Document:M(function(a,b,c){R({node:a},Xk,Yk,b,c,void 0,this)}),Placemark:M(Lk)});
var Xk=O(Z,{Placemark:M(Lk)}),Zk=O(Z,{Data:M(function(a,b,c){a.setAttribute("name",b.name);a={node:a};b=b.value;"object"==typeof b?(null!==b&&b.displayName&&R(a,Zk,Ph,[b.displayName],c,["displayName"]),null!==b&&b.value&&R(a,Zk,Ph,[b.value],c,["value"])):R(a,Zk,Ph,[b],c,["value"])}),value:M(function(a,b){W(a,b)}),displayName:M(function(a,b){a.appendChild(Gh.createCDATASection(b))})}),$k={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",
MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},al=O(Z,["href"],O(Mj,["x","y","w","h"])),bl=O(Z,{href:M(W)},O(Mj,{x:M(Mi),y:M(Mi),w:M(Mi),h:M(Mi)})),cl=O(Z,["scale","heading","Icon","hotSpot"]),el=O(Z,{Icon:M(function(a,b,c){a={node:a};var d=al[c[c.length-1].node.namespaceURI],e=Qh(b,d);R(a,bl,Ph,e,c,d);d=al[Mj[0]];e=Qh(b,d);R(a,bl,dl,e,c,d)}),heading:M(Mi),hotSpot:M(function(a,b){a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("xunits",b.wd);a.setAttribute("yunits",
b.xd)}),scale:M(Wk)}),fl=O(Z,["color","scale"]),gl=O(Z,{color:M(Bk),scale:M(Wk)}),hl=O(Z,["color","width"]),il=O(Z,{color:M(Bk),width:M(Mi)}),Jk=O(Z,{LinearRing:M(Pk)}),Hk=O(Z,{LineString:M(Pk),Point:M(Pk),Polygon:M(Sk),GeometryCollection:M(Ck)}),Ok=O(Z,"name open visibility address phoneNumber description styleUrl Style".split(" ")),Mk=O(Z,{ExtendedData:M(function(a,b,c){a={node:a};var d=b.names;b=b.values;for(var e=d.length,f=0;f<e;f++)R(a,Zk,jl,[{name:d[f],value:b[f]}],c)}),MultiGeometry:M(Ck),
LineString:M(Pk),LinearRing:M(Pk),Point:M(Pk),Polygon:M(Sk),Style:M(function(a,b,c){a={node:a};var d={},e=b.qa(),f=b.ma(),g=b.ia();b=b.na();g instanceof Kj&&(d.IconStyle=g);b&&(d.LabelStyle=b);f&&(d.LineStyle=f);e&&(d.PolyStyle=e);b=kl[c[c.length-1].node.namespaceURI];d=Qh(d,b);R(a,ll,Ph,d,c,b)}),address:M(W),description:M(W),name:M(W),open:M(Li),phoneNumber:M(W),styleUrl:M(W),visibility:M(Li)}),Qk=O(Z,{coordinates:M(function(a,b,c){c=c[c.length-1];var d=c.layout;c=c.stride;var e;"XY"==d||"XYM"==
d?e=2:"XYZ"==d||"XYZM"==d?e=3:x(!1,34);var f,g=b.length,h="";if(0<g){h+=b[0];for(d=1;d<e;++d)h+=","+b[d];for(f=c;f<g;f+=c)for(h+=" "+b[f],d=1;d<e;++d)h+=","+b[f+d]}W(a,h)})}),Tk=O(Z,{outerBoundaryIs:M(Ik),innerBoundaryIs:M(Ik)}),ml=O(Z,{color:M(Bk)}),kl=O(Z,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),ll=O(Z,{IconStyle:M(function(a,b,c){a={node:a};var d={},e=b.nb(),f=b.Ud(),g={href:b.b.u};if(e){g.w=e[0];g.h=e[1];var h=b.Sb(),k=b.dc();k&&f&&k[0]&&k[1]!==e[1]&&(g.x=k[0],g.y=f[1]-(k[1]+e[1]));
h&&h[0]&&h[1]!==e[1]&&(d.hotSpot={x:h[0],wd:"pixels",y:e[1]-h[1],xd:"pixels"})}d.Icon=g;e=b.g;1!==e&&(d.scale=e);(b=b.o)&&(d.heading=b);b=cl[c[c.length-1].node.namespaceURI];d=Qh(d,b);R(a,el,Ph,d,c,b)}),LabelStyle:M(function(a,b,c){a={node:a};var d={},e=b.qa();e&&(d.color=e.b);(b=b.b)&&1!==b&&(d.scale=b);b=fl[c[c.length-1].node.namespaceURI];d=Qh(d,b);R(a,gl,Ph,d,c,b)}),LineStyle:M(function(a,b,c){a={node:a};var d=hl[c[c.length-1].node.namespaceURI];b=Qh({color:b.b,width:b.c},d);R(a,il,Ph,b,c,d)}),
PolyStyle:M(function(a,b,c){R({node:a},ml,nl,[b.b],c)})});function dl(a,b,c){return Hh(Mj[0],"gx:"+c)}function Yk(a,b){return Hh(b[b.length-1].node.namespaceURI,"Placemark")}function Dk(a,b){if(a)return Hh(b[b.length-1].node.namespaceURI,$k[a.H()])}var nl=Nh("color"),Rk=Nh("coordinates"),jl=Nh("Data"),Nk=Nh("ExtendedData"),Uk=Nh("innerBoundaryIs"),Ek=Nh("Point"),Fk=Nh("LineString"),Kk=Nh("LinearRing"),Gk=Nh("Polygon"),Vk=Nh("outerBoundaryIs");(function(){var a={},b={U:a};(function(c){if("object"===typeof a&&"undefined"!==typeof b)b.U=c();else{var d;"undefined"!==typeof window?d=window:"undefined"!==typeof global?d=global:"undefined"!==typeof self?d=self:d=this;d.Si=c()}})(function(){return function d(a,b,g){function e(h,k){if(!b[h]){if(!a[h]){var m="function"==typeof require&&require;if(!k&&m)return m(h,!0);if(f)return f(h,!0);m=Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m;}m=b[h]={U:{}};a[h][0].call(m.U,function(b){var d=
a[h][1][b];return e(d?d:b)},m,m.U,d,a,b,g)}return b[h].U}for(var f="function"==typeof require&&require,m=0;m<g.length;m++)e(g[m]);return e}({1:[function(a,b){function d(a){this.Ta=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0);this.type=this.L=0;this.length=this.Ta.length}function e(a,b,d){var e=d.Ta,f,g;g=e[d.L++];f=(g&112)>>4;if(128>g)return h(a,f,b);g=e[d.L++];f|=(g&127)<<3;if(128>g)return h(a,f,b);g=e[d.L++];f|=(g&127)<<10;if(128>g)return h(a,f,b);g=e[d.L++];f|=(g&127)<<17;if(128>
g)return h(a,f,b);g=e[d.L++];f|=(g&127)<<24;if(128>g)return h(a,f,b);g=e[d.L++];if(128>g)return h(a,f|(g&1)<<31,b);throw Error("Expected varint not more than 10 bytes");}function h(a,b,d){return d?4294967296*b+(a>>>0):4294967296*(b>>>0)+(a>>>0)}b.U=d;var k=a("ieee754");d.c=0;d.a=1;d.b=2;d.f=5;d.prototype={hd:function(a,b,d){for(d=d||this.length;this.L<d;){var e=this.ja(),f=e>>3,g=this.L;this.type=e&7;a(f,b,this);this.L===g&&this.oi(e)}return b},$h:function(){var a=k.read(this.Ta,this.L,!0,23,4);this.L+=
4;return a},Wh:function(){var a=k.read(this.Ta,this.L,!0,52,8);this.L+=8;return a},ja:function(a){var b=this.Ta,d,f;f=b[this.L++];d=f&127;if(128>f)return d;f=b[this.L++];d|=(f&127)<<7;if(128>f)return d;f=b[this.L++];d|=(f&127)<<14;if(128>f)return d;f=b[this.L++];d|=(f&127)<<21;if(128>f)return d;f=b[this.L];return e(d|(f&15)<<28,a,this)},gi:function(){return this.ja(!0)},md:function(){var a=this.ja();return 1===a%2?(a+1)/-2:a/2},Uh:function(){return!!this.ja()},od:function(){for(var a=this.ja()+this.L,
b=this.Ta,d="",e=this.L;e<a;){var f=b[e],g=null,h=239<f?4:223<f?3:191<f?2:1;if(e+h>a)break;var k,D,E;if(1===h)128>f&&(g=f);else if(2===h)k=b[e+1],128===(k&192)&&(g=(f&31)<<6|k&63,127>=g&&(g=null));else if(3===h){if(k=b[e+1],D=b[e+2],128===(k&192)&&128===(D&192)&&(g=(f&15)<<12|(k&63)<<6|D&63,2047>=g||55296<=g&&57343>=g))g=null}else 4===h&&(k=b[e+1],D=b[e+2],E=b[e+3],128===(k&192)&&128===(D&192)&&128===(E&192)&&(g=(f&15)<<18|(k&63)<<12|(D&63)<<6|E&63,65535>=g||1114112<=g))&&(g=null);null===g?(g=65533,
h=1):65535<g&&(g-=65536,d+=String.fromCharCode(g>>>10&1023|55296),g=56320|g&1023);d+=String.fromCharCode(g);e+=h}this.L=a;return d},oi:function(a){a&=7;if(a===d.c)for(;127<this.Ta[this.L++];);else if(a===d.b)this.L=this.ja()+this.L;else if(a===d.f)this.L+=4;else if(a===d.a)this.L+=8;else throw Error("Unimplemented type: "+a);}}},{ieee754:2}],2:[function(a,b,f){f.read=function(a,b,d,e,f){var g;g=8*f-e-1;var h=(1<<g)-1,k=h>>1,m=-7;f=d?f-1:0;var n=d?-1:1,C=a[b+f];f+=n;d=C&(1<<-m)-1;C>>=-m;for(m+=g;0<
m;d=256*d+a[b+f],f+=n,m-=8);g=d&(1<<-m)-1;d>>=-m;for(m+=e;0<m;g=256*g+a[b+f],f+=n,m-=8);if(0===d)d=1-k;else{if(d===h)return g?NaN:Infinity*(C?-1:1);g+=Math.pow(2,e);d-=k}return(C?-1:1)*g*Math.pow(2,d-e)};f.write=function(a,b,d,e,f,p){var g,h=8*p-f-1,k=(1<<h)-1,m=k>>1,n=23===f?Math.pow(2,-24)-Math.pow(2,-77):0;p=e?0:p-1;var D=e?1:-1,E=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,e=k):(e=Math.floor(Math.log(b)/Math.LN2),1>b*(g=Math.pow(2,-e))&&(e--,g*=2),b=1<=e+m?b+n/g:
b+n*Math.pow(2,1-m),2<=b*g&&(e++,g/=2),e+m>=k?(b=0,e=k):1<=e+m?(b=(b*g-1)*Math.pow(2,f),e+=m):(b=b*Math.pow(2,m-1)*Math.pow(2,f),e=0));for(;8<=f;a[d+p]=b&255,p+=D,b/=256,f-=8);e=e<<f|b;for(h+=f;0<h;a[d+p]=e&255,p+=D,e/=256,h-=8);a[d+p-D]|=128*E}},{}]},{},[1])(1)})})();(function(){var a={},b={U:a};(function(c){if("object"===typeof a&&"undefined"!==typeof b)b.U=c();else{var d;"undefined"!==typeof window?d=window:"undefined"!==typeof global?d=global:"undefined"!==typeof self?d=self:d=this;d.Vi=c()}})(function(){return function d(a,b,g){function e(h,k){if(!b[h]){if(!a[h]){var m="function"==typeof require&&require;if(!k&&m)return m(h,!0);if(f)return f(h,!0);m=Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m;}m=b[h]={U:{}};a[h][0].call(m.U,function(b){var d=
a[h][1][b];return e(d?d:b)},m,m.U,d,a,b,g)}return b[h].U}for(var f="function"==typeof require&&require,m=0;m<g.length;m++)e(g[m]);return e}({1:[function(a,b){b.U.Ni=a("./lib/vectortile.js");b.U.Oi=a("./lib/vectortilefeature.js");b.U.Pi=a("./lib/vectortilelayer.js")},{"./lib/vectortile.js":2,"./lib/vectortilefeature.js":3,"./lib/vectortilelayer.js":4}],2:[function(a,b){function d(a,b,d){3===a&&(a=new e(d,d.ja()+d.L),a.length&&(b[a.name]=a))}var e=a("./vectortilelayer");b.U=function(a,b){this.layers=
a.hd(d,{},b)}},{"./vectortilelayer":4}],3:[function(a,b){function d(a,b,d,f,g){this.properties={};this.extent=d;this.type=0;this.fb=a;this.Cd=-1;this.Lb=f;this.Nb=g;a.hd(e,this,b)}function e(a,b,d){if(1==a)b.id=d.ja();else if(2==a)for(a=d.ja()+d.L;d.L<a;){var e=b.Lb[d.ja()],f=b.Nb[d.ja()];b.properties[e]=f}else 3==a?b.type=d.ja():4==a&&(b.Cd=d.L)}a("point-geometry");b.U=d;d.b=["Unknown","Point","LineString","Polygon"];d.prototype.bbox=function(){var a=this.fb;a.L=this.Cd;for(var b=a.ja()+a.L,d=1,
e=0,f=0,g=0,u=Infinity,F=-Infinity,z=Infinity,C=-Infinity;a.L<b;)if(e||(e=a.ja(),d=e&7,e>>=3),e--,1===d||2===d)f+=a.md(),g+=a.md(),f<u&&(u=f),f>F&&(F=f),g<z&&(z=g),g>C&&(C=g);else if(7!==d)throw Error("unknown command "+d);return[u,z,F,C]}},{"point-geometry":5}],4:[function(a,b){function d(a,b){this.version=1;this.name=null;this.extent=4096;this.length=0;this.fb=a;this.Lb=[];this.Nb=[];this.Kb=[];a.hd(e,this,b);this.length=this.Kb.length}function e(a,b,d){15===a?b.version=d.ja():1===a?b.name=d.od():
5===a?b.extent=d.ja():2===a?b.Kb.push(d.L):3===a?b.Lb.push(d.od()):4===a&&b.Nb.push(h(d))}function h(a){for(var b=null,d=a.ja()+a.L;a.L<d;)b=a.ja()>>3,b=1===b?a.od():2===b?a.$h():3===b?a.Wh():4===b?a.gi():5===b?a.ja():6===b?a.md():7===b?a.Uh():null;return b}var k=a("./vectortilefeature.js");b.U=d;d.prototype.feature=function(a){if(0>a||a>=this.Kb.length)throw Error("feature index out of bounds");this.fb.L=this.Kb[a];a=this.fb.ja()+this.fb.L;return new k(this.fb,a,this.extent,this.Lb,this.Nb)}},{"./vectortilefeature.js":3}],
5:[function(a,b){function d(a,b){this.x=a;this.y=b}b.U=d;d.prototype={clone:function(){return new d(this.x,this.y)},add:function(a){return this.clone().vf(a)},rotate:function(a){return this.clone().Ef(a)},round:function(){return this.clone().Ff()},angle:function(){return Math.atan2(this.y,this.x)},vf:function(a){this.x+=a.x;this.y+=a.y;return this},Ef:function(a){var b=Math.cos(a);a=Math.sin(a);var d=a*this.x+b*this.y;this.x=b*this.x-a*this.y;this.y=d;return this},Ff:function(){this.x=Math.round(this.x);
this.y=Math.round(this.y);return this}};d.b=function(a){return a instanceof d?a:Array.isArray(a)?new d(a[0],a[1]):a}},{}]},{},[1])(1)})})();function pl(a,b){b[b.length-1].Hb[a.getAttribute("k")]=a.getAttribute("v")}var ql=[null],rl=O(ql,{nd:function(a,b){b[b.length-1].lb.push(a.getAttribute("ref"))},tag:pl});
O(ql,{node:function(a,b){var c=b[0],d=b[b.length-1],e=a.getAttribute("id"),f=[parseFloat(a.getAttribute("lon")),parseFloat(a.getAttribute("lat"))];d.Tg[e]=f;var g=P({Hb:{}},sl,a,b);eb(g.Hb)||(f=new Me(f),Xh(f,!1,c),c=new I(f),c.$a(e),c.oa(g.Hb),d.features.push(c))},way:function(a,b){for(var c=b[0],d=a.getAttribute("id"),e=P({lb:[],Hb:{}},rl,a,b),f=b[b.length-1],g=[],h=0,k=e.lb.length;h<k;h++)oa(g,f.Tg[e.lb[h]]);e.lb[0]==e.lb[e.lb.length-1]?(h=new B(null),Te(h,"XY",g,[g.length])):(h=new S(null),bi(h,
"XY",g));Xh(h,!1,c);c=new I(h);c.$a(d);c.oa(e.Hb);f.features.push(c)}});var sl=O(ql,{tag:pl});function tl(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};var ul=[null,"http://www.opengis.net/ows/1.1"];O(ul,{ServiceIdentification:L(function(a,b){return P({},vl,a,b)}),ServiceProvider:L(function(a,b){return P({},wl,a,b)}),OperationsMetadata:L(function(a,b){return P({},xl,a,b)})});
var yl=O(ul,{DeliveryPoint:L(V),City:L(V),AdministrativeArea:L(V),PostalCode:L(V),Country:L(V),ElectronicMailAddress:L(V)}),zl=O(ul,{Value:Lh(function(a){return V(a)})}),Al=O(ul,{AllowedValues:L(function(a,b){return P({},zl,a,b)})}),Cl=O(ul,{Phone:L(function(a,b){return P({},Bl,a,b)}),Address:L(function(a,b){return P({},yl,a,b)})}),El=O(ul,{HTTP:L(function(a,b){return P({},Dl,a,b)})}),Dl=O(ul,{Get:Lh(function(a,b){var c=tl(a);if(c)return P({href:c},Fl,a,b)}),Post:void 0}),Gl=O(ul,{DCP:L(function(a,
b){return P({},El,a,b)})}),xl=O(ul,{Operation:function(a,b){var c=a.getAttribute("name"),d=P({},Gl,a,b);d&&(b[b.length-1][c]=d)}}),Bl=O(ul,{Voice:L(V),Facsimile:L(V)}),Fl=O(ul,{Constraint:Lh(function(a,b){var c=a.getAttribute("name");if(c)return P({name:c},Al,a,b)})}),Hl=O(ul,{IndividualName:L(V),PositionName:L(V),ContactInfo:L(function(a,b){return P({},Cl,a,b)})}),vl=O(ul,{Title:L(V),ServiceTypeVersion:L(V),ServiceType:L(V)}),wl=O(ul,{ProviderName:L(V),ProviderSite:L(tl),ServiceContact:L(function(a,
b){return P({},Hl,a,b)})});function Il(a){a=a?a:{};Uh.call(this);this.defaultDataProjection=Hb(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326")}t(Il,Yh);function Jl(a,b){var c=[],d,e,f,g;f=0;for(g=a.length;f<g;++f)d=a[f],0<f&&c.pop(),0<=d?e=b[d]:e=b[~d].slice().reverse(),c.push.apply(c,e);d=0;for(e=c.length;d<e;++d)c[d]=c[d].slice();return c}function Kl(a,b,c,d,e){a=a.geometries;var f=[],g,h;g=0;for(h=a.length;g<h;++g)f[g]=Ll(a[g],b,c,d,e);return f}
function Ll(a,b,c,d,e){var f=a.type,g=Ml[f];b="Point"===f||"MultiPoint"===f?g(a,c,d):g(a,b);c=new I;c.xa(Xh(b,!1,e));void 0!==a.id&&c.$a(a.id);a.properties&&c.oa(a.properties);return c}
Il.prototype.gd=function(a,b){if("Topology"==a.type){var c,d=null,e=null;a.transform&&(c=a.transform,d=c.scale,e=c.translate);var f=a.arcs;if(c){c=d;var g=e,h,k;h=0;for(k=f.length;h<k;++h){var m,n,p,q=f[h],u=c,F=g,z=0,C=0;n=0;for(m=q.length;n<m;++n)p=q[n],z+=p[0],C+=p[1],p[0]=z,p[1]=C,Nl(p,u,F)}}c=[];g=db(a.objects);h=0;for(k=g.length;h<k;++h)"GeometryCollection"===g[h].type?(m=g[h],c.push.apply(c,Kl(m,f,d,e,b))):(m=g[h],c.push(Ll(m,f,d,e,b)));return c}return[]};
function Nl(a,b,c){a[0]=a[0]*b[0]+c[0];a[1]=a[1]*b[1]+c[1]}Il.prototype.ld=function(){return this.defaultDataProjection};
var Ml={Point:function(a,b,c){a=a.coordinates;b&&c&&Nl(a,b,c);return new Me(a)},LineString:function(a,b){var c=Jl(a.arcs,b);return new S(c)},Polygon:function(a,b){var c=[],d,e;d=0;for(e=a.arcs.length;d<e;++d)c[d]=Jl(a.arcs[d],b);return new B(c)},MultiPoint:function(a,b,c){a=a.coordinates;var d,e;if(b&&c)for(d=0,e=a.length;d<e;++d)Nl(a[d],b,c);return new fi(a)},MultiLineString:function(a,b){var c=[],d,e;d=0;for(e=a.arcs.length;d<e;++d)c[d]=Jl(a.arcs[d],b);return new ci(c)},MultiPolygon:function(a,
b){var c=[],d,e,f,g,h,k;h=0;for(k=a.arcs.length;h<k;++h){d=a.arcs[h];e=[];f=0;for(g=d.length;f<g;++f)e[f]=Jl(d[f],b);c[h]=e}return new hi(c)}};Il.prototype.sb=function(){};Il.prototype.vd=function(){};Il.prototype.Za=function(){};function Ol(a){a=a?a:{};this.c=a.featureType;this.f=a.featureNS;this.b=a.gmlFormat?a.gmlFormat:new Y;zi.call(this)}t(Ol,zi);var Pl={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"};
Ol.prototype.fd=function(a,b){var c={featureType:this.c,featureNS:this.f};bb(c,Vh(this,a,b?b:{}));c=[c];this.b.b["http://www.opengis.net/gml"].featureMember=J(U.prototype.Gb);(c=P([],this.b.b,a,c,this.b))||(c=[]);return c};Ol.prototype.g=function(a){if(a instanceof Document)return Ql(a);if(a instanceof Node)return P({},Rl,a,[]);if("string"===typeof a)return a=Kh(a),Ql(a)};
var Sl={"http://www.opengis.net/wfs":{totalInserted:L(Ji),totalUpdated:L(Ji),totalDeleted:L(Ji)}},Tl={"http://www.opengis.net/ogc":{FeatureId:J(function(a){return a.getAttribute("fid")})}},Ul={"http://www.opengis.net/wfs":{Feature:function(a,b){Rh(Tl,a,b)}}},Rl={"http://www.opengis.net/wfs":{TransactionSummary:L(function(a,b){return P({},Sl,a,b)},"transactionSummary"),InsertResults:L(function(a,b){return P([],Ul,a,b)},"insertIds")}};
function Ql(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return P({},Rl,a,[])}function Vl(a,b){var c=Hh("http://www.opengis.net/ogc","Filter"),d=Hh("http://www.opengis.net/ogc","FeatureId");c.appendChild(d);d.setAttribute("fid",b);a.appendChild(c)}
var Wl={"http://www.opengis.net/wfs":{Insert:M(function(a,b,c){var d=c[c.length-1],e=d.gmlVersion,d=Hh(d.featureNS,d.featureType);a.appendChild(d);if(2===e){var f=Wi.prototype;(a=b.a)&&d.setAttribute("fid",a);a=c[c.length-1];var e=a.featureNS,g=b.c;a.wa||(a.wa={},a.wa[e]={});var h=b.Fa();b=[];var k=[],m;for(m in h){var n=h[m];null!==n&&(b.push(m),k.push(n),m==g||n instanceof re?m in a.wa[e]||(a.wa[e][m]=M(f.ee,f)):m in a.wa[e]||(a.wa[e][m]=M(W)))}m=bb({},a)}else{m=Y.prototype;(a=b.a)&&d.setAttribute("fid",
a);a=c[c.length-1];e=a.featureNS;g=b.c;a.wa||(a.wa={},a.wa[e]={});h=b.Fa();b=[];k=[];for(f in h)n=h[f],null!==n&&(b.push(f),k.push(n),f==g||n instanceof re?f in a.wa[e]||(a.wa[e][f]=M(m.me,m)):f in a.wa[e]||(a.wa[e][f]=M(W)));m=bb({},a)}m.node=d;R(m,a.wa,Nh(void 0,e),k,c,b)}),Update:M(function(a,b,c){var d=c[c.length-1];x(void 0!==b.a,27);var e=d.featureType,f=d.featurePrefix,f=f?f:"feature",g=d.featureNS;a.setAttribute("typeName",f+":"+e);a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+
f,g);e=b.a;if(void 0!==e){for(var f=Object.keys(b.K),g=[],h=0,k=f.length;h<k;h++){var m=b.get(f[h]);void 0!==m&&g.push({name:f[h],value:m})}R({gmlVersion:d.gmlVersion,node:a,srsName:d.srsName},Wl,Nh("Property"),g,c);Vl(a,e)}}),Delete:M(function(a,b,c){var d=c[c.length-1];x(void 0!==b.a,26);c=d.featureType;var e=d.featurePrefix,e=e?e:"feature",d=d.featureNS;a.setAttribute("typeName",e+":"+c);a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+e,d);b=b.a;void 0!==b&&Vl(a,b)}),Property:M(function(a,
b,c){var d=Hh("http://www.opengis.net/wfs","Name"),e=c[c.length-1].gmlVersion;a.appendChild(d);W(d,b.name);void 0!==b.value&&null!==b.value&&(d=Hh("http://www.opengis.net/wfs","Value"),a.appendChild(d),b.value instanceof re?2===e?Wi.prototype.ee(d,b.value,c):Y.prototype.me(d,b.value,c):W(d,b.value))}),Native:M(function(a,b){b.xi&&a.setAttribute("vendorId",b.xi);void 0!==b.mi&&a.setAttribute("safeToIgnore",b.mi);void 0!==b.value&&W(a,b.value)})}};
Ol.prototype.i=function(a,b,c,d){var e=[],f=Hh("http://www.opengis.net/wfs","Transaction"),g=d.version?d.version:"1.1.0",h="1.0.0"===g?2:3;f.setAttribute("service","WFS");f.setAttribute("version",g);var k;d&&(k=d.gmlOptions?d.gmlOptions:{},d.handle&&f.setAttribute("handle",d.handle));f.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",Pl[g]);a&&(g={node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix,gmlVersion:h,srsName:d.srsName},bb(g,
k),R(g,Wl,Nh("Insert"),a,e));b&&(g={node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix,gmlVersion:h,srsName:d.srsName},bb(g,k),R(g,Wl,Nh("Update"),b,e));c&&R({node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix,gmlVersion:h,srsName:d.srsName},Wl,Nh("Delete"),c,e);d.nativeElements&&R({node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix,gmlVersion:h,srsName:d.srsName},Wl,Nh("Native"),d.nativeElements,
e);return f};Ol.prototype.kd=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.jc(a);return null};Ol.prototype.jc=function(a){if(a.firstElementChild&&a.firstElementChild.firstElementChild)for(a=a.firstElementChild.firstElementChild,a=a.firstElementChild;a;a=a.nextElementSibling)if(0!==a.childNodes.length&&(1!==a.childNodes.length||3!==a.firstChild.nodeType)){var b=[{}];Di(this.b,a,b);return Hb(b.pop().srsName)}return null};function Xl(a){a=a?a:{};Uh.call(this);this.b=void 0!==a.splitCollection?a.splitCollection:!1}t(Xl,Fj);function Yl(a){a=a.D();return a.length?a.join(" "):""}function Zl(a){a=a.D();for(var b=[],c=0,d=a.length;c<d;++c)b.push(a[c].join(" "));return b.join(",")}function $l(a){var b=[];a=We(a);for(var c=0,d=a.length;c<d;++c)b.push("("+Zl(a[c])+")");return b.join(",")}
function Hj(a){var b=a.H(),c=(0,am[b])(a),b=b.toUpperCase();if(a instanceof te){a=a.X;var d="";if("XYZ"===a||"XYZM"===a)d+="Z";if("XYM"===a||"XYZM"===a)d+="M";a=d;0<a.length&&(b+=" "+a)}return c.length?b+"("+c+")":b+" EMPTY"}
var am={Point:Yl,LineString:Zl,Polygon:$l,MultiPoint:function(a){var b=[];a=gi(a);for(var c=0,d=a.length;c<d;++c)b.push("("+Yl(a[c])+")");return b.join(",")},MultiLineString:function(a){var b=[];a=a.hb();for(var c=0,d=a.length;c<d;++c)b.push("("+Zl(a[c])+")");return b.join(",")},MultiPolygon:function(a){var b=[];a=ji(a);for(var c=0,d=a.length;c<d;++c)b.push("("+$l(a[c])+")");return b.join(",")},GeometryCollection:function(a){var b=[];a=si(a.a);for(var c=0,d=a.length;c<d;++c)b.push(Hj(a[c]));return b.join(",")}};
function Gj(a,b){var c;c=new bm(new cm(a));dm(c);return(c=em(c))?Xh(c,!1,b):null}function cm(a){this.f=a;this.b=-1}
function fm(a){var b=a.f.charAt(++a.b),c={position:a.b,value:b};if("("==b)c.type=2;else if(","==b)c.type=5;else if(")"==b)c.type=3;else if("0"<=b&&"9">=b||"."==b||"-"==b){c.type=4;var d,b=a.b,e=!1,f=!1;do{if("."==d)e=!0;else if("e"==d||"E"==d)f=!0;d=a.f.charAt(++a.b)}while("0"<=d&&"9">=d||"."==d&&(void 0===e||!e)||!f&&("e"==d||"E"==d)||f&&("-"==d||"+"==d));a=parseFloat(a.f.substring(b,a.b--));c.value=a}else if("a"<=b&&"z">=b||"A"<=b&&"Z">=b){c.type=1;b=a.b;do d=a.f.charAt(++a.b);while("a"<=d&&"z">=
d||"A"<=d&&"Z">=d);a=a.f.substring(b,a.b--).toUpperCase();c.value=a}else{if(" "==b||"\t"==b||"\r"==b||"\n"==b)return fm(a);if(""===b)c.type=6;else throw Error("Unexpected character: "+b);}return c}function bm(a){this.a=a;this.f="XY"}function dm(a){a.b=fm(a.a)}function gm(a,b){var c=a.b.type==b;c&&dm(a);return c}
function em(a){var b=a.b;if(gm(a,1)){var b=b.value,c="XY",d=a.b;1==a.b.type&&(d=d.value,"Z"===d?c="XYZ":"M"===d?c="XYM":"ZM"===d&&(c="XYZM"),"XY"!==c&&dm(a));a.f=c;if("GEOMETRYCOLLECTION"==b){a:{if(gm(a,2)){b=[];do b.push(em(a));while(gm(a,5));if(gm(a,3)){a=b;break a}}else if(hm(a)){a=[];break a}throw Error(im(a));}return new qi(a)}d=jm[b];c=km[b];if(!d||!c)throw Error("Invalid geometry type: "+b);b=d.call(a);return new c(b,a.f)}throw Error(im(a));}l=bm.prototype;
l.dd=function(){if(gm(this,2)){var a=lm(this);if(gm(this,3))return a}else if(hm(this))return null;throw Error(im(this));};l.cd=function(){if(gm(this,2)){var a=mm(this);if(gm(this,3))return a}else if(hm(this))return[];throw Error(im(this));};l.ed=function(){if(gm(this,2)){var a=nm(this);if(gm(this,3))return a}else if(hm(this))return[];throw Error(im(this));};
l.Jh=function(){if(gm(this,2)){var a;if(2==this.b.type)for(a=[this.dd()];gm(this,5);)a.push(this.dd());else a=mm(this);if(gm(this,3))return a}else if(hm(this))return[];throw Error(im(this));};l.Ih=function(){if(gm(this,2)){var a=nm(this);if(gm(this,3))return a}else if(hm(this))return[];throw Error(im(this));};l.Kh=function(){if(gm(this,2)){for(var a=[this.ed()];gm(this,5);)a.push(this.ed());if(gm(this,3))return a}else if(hm(this))return[];throw Error(im(this));};
function lm(a){for(var b=[],c=a.f.length,d=0;d<c;++d){var e=a.b;if(gm(a,4))b.push(e.value);else break}if(b.length==c)return b;throw Error(im(a));}function mm(a){for(var b=[lm(a)];gm(a,5);)b.push(lm(a));return b}function nm(a){for(var b=[a.cd()];gm(a,5);)b.push(a.cd());return b}function hm(a){var b=1==a.b.type&&"EMPTY"==a.b.value;b&&dm(a);return b}function im(a){return"Unexpected `"+a.b.value+"` at position "+a.b.position+" in `"+a.a.f+"`"}
var km={POINT:Me,LINESTRING:S,POLYGON:B,MULTIPOINT:fi,MULTILINESTRING:ci,MULTIPOLYGON:hi},jm={POINT:bm.prototype.dd,LINESTRING:bm.prototype.cd,POLYGON:bm.prototype.ed,MULTIPOINT:bm.prototype.Jh,MULTILINESTRING:bm.prototype.Ih,MULTIPOLYGON:bm.prototype.Kh};function om(a,b){return P({},pm,a,b)}function qm(a,b){return P({},rm,a,b)}function sm(a,b){var c=om(a,b);if(c){var d=[Ki(a.getAttribute("width")),Ki(a.getAttribute("height"))];c.size=d;return c}}function tm(a,b){return P([],um,a,b)}var vm=[null,"http://www.opengis.net/wms"];O(vm,{Service:L(function(a,b){return P({},wm,a,b)}),Capability:L(function(a,b){return P({},xm,a,b)})});
var xm=O(vm,{Request:L(function(a,b){return P({},ym,a,b)}),Exception:L(function(a,b){return P([],zm,a,b)}),Layer:L(function(a,b){return P({},Am,a,b)})}),wm=O(vm,{Name:L(V),Title:L(V),Abstract:L(V),KeywordList:L(tm),OnlineResource:L(tl),ContactInformation:L(function(a,b){return P({},Bm,a,b)}),Fees:L(V),AccessConstraints:L(V),LayerLimit:L(Ji),MaxWidth:L(Ji),MaxHeight:L(Ji)}),Bm=O(vm,{ContactPersonPrimary:L(function(a,b){return P({},Cm,a,b)}),ContactPosition:L(V),ContactAddress:L(function(a,b){return P({},
Dm,a,b)}),ContactVoiceTelephone:L(V),ContactFacsimileTelephone:L(V),ContactElectronicMailAddress:L(V)}),Cm=O(vm,{ContactPerson:L(V),ContactOrganization:L(V)}),Dm=O(vm,{AddressType:L(V),Address:L(V),City:L(V),StateOrProvince:L(V),PostCode:L(V),Country:L(V)}),zm=O(vm,{Format:J(V)}),Am=O(vm,{Name:L(V),Title:L(V),Abstract:L(V),KeywordList:L(tm),CRS:Lh(V),EX_GeographicBoundingBox:L(function(a,b){var c=P({},Em,a,b);if(c){var d=c.westBoundLongitude,e=c.southBoundLatitude,f=c.eastBoundLongitude,c=c.northBoundLatitude;
if(void 0!==d&&void 0!==e&&void 0!==f&&void 0!==c)return[d,e,f,c]}}),BoundingBox:Lh(function(a){var b=[Ii(a.getAttribute("minx")),Ii(a.getAttribute("miny")),Ii(a.getAttribute("maxx")),Ii(a.getAttribute("maxy"))],c=[Ii(a.getAttribute("resx")),Ii(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:c}}),Dimension:Lh(function(a){return{name:a.getAttribute("name"),units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:Fi(a.getAttribute("multipleValues")),
nearestValue:Fi(a.getAttribute("nearestValue")),current:Fi(a.getAttribute("current")),values:V(a)}}),Attribution:L(function(a,b){return P({},Fm,a,b)}),AuthorityURL:Lh(function(a,b){var c=om(a,b);if(c)return c.name=a.getAttribute("name"),c}),Identifier:Lh(V),MetadataURL:Lh(function(a,b){var c=om(a,b);if(c)return c.type=a.getAttribute("type"),c}),DataURL:Lh(om),FeatureListURL:Lh(om),Style:Lh(function(a,b){return P({},Gm,a,b)}),MinScaleDenominator:L(Hi),MaxScaleDenominator:L(Hi),Layer:Lh(function(a,
b){var c=b[b.length-1],d=P({},Am,a,b);if(d){var e=Fi(a.getAttribute("queryable"));void 0===e&&(e=c.queryable);d.queryable=void 0!==e?e:!1;e=Ki(a.getAttribute("cascaded"));void 0===e&&(e=c.cascaded);d.cascaded=e;e=Fi(a.getAttribute("opaque"));void 0===e&&(e=c.opaque);d.opaque=void 0!==e?e:!1;e=Fi(a.getAttribute("noSubsets"));void 0===e&&(e=c.noSubsets);d.noSubsets=void 0!==e?e:!1;(e=Ii(a.getAttribute("fixedWidth")))||(e=c.fixedWidth);d.fixedWidth=e;(e=Ii(a.getAttribute("fixedHeight")))||(e=c.fixedHeight);
d.fixedHeight=e;["Style","CRS","AuthorityURL"].forEach(function(a){a in c&&(d[a]=(d[a]||[]).concat(c[a]))});"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in d||(d[a]=c[a])});return d}})}),Fm=O(vm,{Title:L(V),OnlineResource:L(tl),LogoURL:L(sm)}),Em=O(vm,{westBoundLongitude:L(Hi),eastBoundLongitude:L(Hi),southBoundLatitude:L(Hi),northBoundLatitude:L(Hi)}),ym=O(vm,{GetCapabilities:L(qm),GetMap:L(qm),GetFeatureInfo:L(qm)}),
rm=O(vm,{Format:Lh(V),DCPType:Lh(function(a,b){return P({},Hm,a,b)})}),Hm=O(vm,{HTTP:L(function(a,b){return P({},Im,a,b)})}),Im=O(vm,{Get:L(om),Post:L(om)}),Gm=O(vm,{Name:L(V),Title:L(V),Abstract:L(V),LegendURL:Lh(sm),StyleSheetURL:L(om),StyleURL:L(om)}),pm=O(vm,{Format:L(V),OnlineResource:L(tl)}),um=O(vm,{Keyword:J(V)});function Jm(a){var b=V(a).split(" ");if(b&&2==b.length&&(a=+b[0],b=+b[1],!isNaN(a)&&!isNaN(b)))return[a,b]}var Km=[null,"http://www.opengis.net/wmts/1.0"],Lm=[null,"http://www.opengis.net/ows/1.1"];O(Km,{Contents:L(function(a,b){return P({},Mm,a,b)})});
var Mm=O(Km,{Layer:Lh(function(a,b){return P({},Nm,a,b)}),TileMatrixSet:Lh(function(a,b){return P({},Om,a,b)})}),Nm=O(Km,{Style:Lh(function(a,b){var c=P({},Pm,a,b);if(c){var d="true"===a.getAttribute("isDefault");c.isDefault=d;return c}}),Format:Lh(V),TileMatrixSetLink:Lh(function(a,b){return P({},Qm,a,b)}),Dimension:Lh(function(a,b){return P({},Rm,a,b)}),ResourceURL:Lh(function(a){var b=a.getAttribute("format"),c=a.getAttribute("template");a=a.getAttribute("resourceType");var d={};b&&(d.format=b);
c&&(d.template=c);a&&(d.resourceType=a);return d})},O(Lm,{Title:L(V),Abstract:L(V),WGS84BoundingBox:L(function(a,b){var c=P([],Sm,a,b);if(2==c.length)return Ka(c)}),Identifier:L(V)})),Pm=O(Km,{LegendURL:Lh(function(a){var b={};b.format=a.getAttribute("format");b.href=tl(a);return b})},O(Lm,{Title:L(V),Identifier:L(V)})),Qm=O(Km,{TileMatrixSet:L(V),TileMatrixSetLimits:L(function(a,b){return P([],Tm,a,b)})}),Tm=O(Km,{TileMatrixLimits:J(function(a,b){return P({},Um,a,b)})}),Um=O(Km,{TileMatrix:L(V),
MinTileRow:L(Ji),MaxTileRow:L(Ji),MinTileCol:L(Ji),MaxTileCol:L(Ji)}),Rm=O(Km,{Default:L(V),Value:Lh(V)},O(Lm,{Identifier:L(V)})),Sm=O(Lm,{LowerCorner:J(Jm),UpperCorner:J(Jm)}),Om=O(Km,{WellKnownScaleSet:L(V),TileMatrix:Lh(function(a,b){return P({},Vm,a,b)})},O(Lm,{SupportedCRS:L(V),Identifier:L(V)})),Vm=O(Km,{TopLeftCorner:L(Jm),ScaleDenominator:L(Hi),TileWidth:L(Ji),TileHeight:L(Ji),MatrixWidth:L(Ji),MatrixHeight:L(Ji)},O(Lm,{Identifier:L(V)}));function Wm(a){vc.call(this);a=a||{};this.a=null;this.g=Ob;this.c=void 0;y(this,xc("projection"),this.rg,this);y(this,xc("tracking"),this.xg,this);if(void 0!==a.projection){var b=Hb(a.projection);this.set("projection",b)}void 0!==a.trackingOptions&&this.set("trackingOptions",a.trackingOptions);this.mc(void 0!==a.tracking?a.tracking:!1)}t(Wm,vc);l=Wm.prototype;l.ka=function(){this.mc(!1);vc.prototype.ka.call(this)};
l.rg=function(){var a=this.get("projection");a&&(this.g=Kb(Hb("EPSG:4326"),a),this.a&&this.set("position",this.g(this.a)))};l.xg=function(){if(qd){var a=this.Wd();a&&void 0===this.c?this.c=navigator.geolocation.watchPosition(this.Rh.bind(this),this.Sh.bind(this),this.get("trackingOptions")):a||void 0===this.c||(navigator.geolocation.clearWatch(this.c),this.c=void 0)}};
l.Rh=function(a){var b=a.coords;this.set("accuracy",b.accuracy);this.set("altitude",null===b.altitude?void 0:b.altitude);this.set("altitudeAccuracy",null===b.altitudeAccuracy?void 0:b.altitudeAccuracy);this.set("heading",null===b.heading?void 0:Da(b.heading));this.a?(this.a[0]=b.longitude,this.a[1]=b.latitude):this.a=[b.longitude,b.latitude];a=this.g(this.a);this.set("position",a);this.set("speed",null===b.speed?void 0:b.speed);a=this.a;var c=b.accuracy,b=[],d;for(d=0;32>d;++d)oa(b,sb.offset(a,c,
2*Math.PI*d/32));b.push(b[0],b[1]);a=new B(null);Te(a,"XY",b,[b.length]);a.vb(this.g);this.set("accuracyGeometry",a);this.b()};l.Sh=function(a){a.type="error";this.mc(!1);A(this,a)};l.Sf=function(){return this.get("accuracy")};l.Xf=function(){return this.get("heading")};l.Wg=function(){return this.get("position")};l.bg=function(){return this.get("speed")};l.Wd=function(){return this.get("tracking")};l.mc=function(a){this.set("tracking",a)};function Xm(a,b,c){te.call(this);Ym(this,a,b?b:0,c)}t(Xm,te);l=Xm.prototype;l.clone=function(){var a=new Xm(null);ve(a,this.X,this.l.slice());a.b();return a};l.Ha=function(a,b,c,d){var e=this.l;a-=e[0];var f=b-e[1];b=a*a+f*f;if(b<d){if(b)for(d=this.Zc()/Math.sqrt(b),c[0]=e[0]+d*a,c[1]=e[1]+d*f,d=2;d<this.A;++d)c[d]=e[d];else for(d=0;d<this.A;++d)c[d]=e[d];c.length=this.A;return b}return d};l.ha=function(){return this.l.slice(0,this.A)};
l.Rb=function(a){var b=this.l,c=b[this.A]-b[0];return Ra(b[0]-c,b[1]-c,b[0]+c,b[1]+c,a)};l.Zc=function(){var a=this.l[this.A]-this.l[0],b=this.l[this.A+1]-this.l[1];return Math.sqrt(a*a+b*b)};l.H=function(){return"Circle"};l.Ka=function(a){var b=this.A,c=a.slice();c[b]=c[0]+(this.l[b]-this.l[0]);var d;for(d=1;d<b;++d)c[b+d]=a[d];ve(this,this.X,c);this.b()};
function Ym(a,b,c,d){if(b){we(a,d,b,0);a.l||(a.l=[]);d=a.l;b=De(d,b);d[b++]=d[0]+c;var e;c=1;for(e=a.A;c<e;++c)d[b++]=d[c];d.length=b}else ve(a,"XY",null);a.b()}l.D=function(){};l.Y=function(){};l.Re=function(a){this.l[this.A]=this.l[0]+a;this.b()};function Zm(a,b){sc.call(this);this.Oa=a;this.state=b;this.b=null;this.key=""}t(Zm,sc);function $m(a){A(a,"change")}Zm.prototype.Xa=function(){return this.key+"/"+this.Oa};function an(a,b,c,d,e){Zm.call(this,a,b);this.a=c;this.N=new Image;null!==d&&(this.N.crossOrigin=d);this.f=null;this.c=e}t(an,Zm);l=an.prototype;l.ka=function(){1==this.state&&bn(this);this.b&&pc(this.b);this.state=5;$m(this);Zm.prototype.ka.call(this)};l.ia=function(){return this.N};l.Xa=function(){return this.a};l.Xg=function(){this.state=3;bn(this);$m(this)};l.Yg=function(){this.state=this.N.naturalWidth&&this.N.naturalHeight?2:4;bn(this);$m(this)};
l.load=function(){if(0==this.state||3==this.state)this.state=1,$m(this),this.f=[y(this.N,"error",this.Xg,this,!0),y(this.N,"load",this.Yg,this,!0)],this.c(this,this.a)};function bn(a){a.f.forEach(ic);a.f=null};function cn(a,b,c,d){this.La=a;this.I=b;this.overlaps=d;this.c=0;this.resolution=c;this.ga=this.fa=null;this.f=[];this.coordinates=[];this.V=qg();this.b=[];this.aa=null;this.$=qg();this.W=qg()}t(cn,Dg);
function dn(a,b,c,d,e,f,g){var h=a.coordinates.length,k=a.Oc();g&&(c+=e);g=[b[c],b[c+1]];var m=[NaN,NaN],n=!0,p,q,u;for(p=c+e;p<d;p+=e){m[0]=b[p];m[1]=b[p+1];u=k[1];var F=k[2],z=k[3],C=m[0],D=m[1],E=0;C<k[0]?E|=16:C>F&&(E|=4);D<u?E|=8:D>z&&(E|=2);E||(E=1);u=E;u!==q?(n&&(a.coordinates[h++]=g[0],a.coordinates[h++]=g[1]),a.coordinates[h++]=m[0],a.coordinates[h++]=m[1],n=!1):1===u?(a.coordinates[h++]=m[0],a.coordinates[h++]=m[1],n=!1):n=!0;g[0]=m[0];g[1]=m[1];q=u}if(f&&n||p===c+e)a.coordinates[h++]=g[0],
a.coordinates[h++]=g[1];return h}function en(a,b){a.fa=[0,b,0];a.f.push(a.fa);a.ga=[0,b,0];a.b.push(a.ga)}cn.prototype.la=function(a,b){if(this.Aa){var c=sg(this.V,this.Aa.slice());a.translate(c[0],c[1]);a.rotate(b)}a.fill();this.Aa&&a.setTransform.apply(a,this.W)};
function fn(a,b,c,d,e,f,g,h,k){var m;a.aa&&pa(d,a.V)?m=a.aa:(a.aa||(a.aa=[]),m=se(a.coordinates,0,a.coordinates.length,2,d,a.aa),rg(a.V,d));d=!eb(f);for(var n=0,p=g.length,q=0,u,F=a.$,z=a.W,C,D,E,Q,fa=0,ga=0,X=a.f!=g||a.overlaps?0:200;n<p;){var v=g[n],T,ba,H,N;switch(v[0]){case 0:q=v[1];d&&f[w(q).toString()]||!q.R()?n=v[2]:void 0===k||Za(k,q.R().J())?++n:n=v[2]+1;break;case 1:fa>X&&(a.la(b,e),fa=0);ga>X&&(b.stroke(),ga=0);fa||ga||(b.beginPath(),C=D=NaN);++n;break;case 2:q=v[1];u=m[q];v=m[q+1];E=m[q+
2]-u;q=m[q+3]-v;q=Math.sqrt(E*E+q*q);b.moveTo(u+q,v);b.arc(u,v,q,0,2*Math.PI,!0);++n;break;case 3:b.closePath();++n;break;case 4:q=v[1];u=v[2];T=v[3];ba=v[4]*c;H=v[5]*c;var Ea=v[6],pb=v[7],qb=v[8],ub=v[9];N=v[10];E=v[11];Q=v[12];var cc=v[13],va=v[14];for(N&&(E+=e);q<u;q+=2){v=m[q]-ba;N=m[q+1]-H;cc&&(v=Math.round(v),N=Math.round(N));if(1!=Q||E){var Lb=v+ba,Mb=N+H;tg(F,Lb,Mb,Q,Q,E,-Lb,-Mb);b.setTransform.apply(b,F)}Lb=b.globalAlpha;1!=pb&&(b.globalAlpha=Lb*pb);var Mb=va+qb>T.width?T.width-qb:va,dc=
Ea+ub>T.height?T.height-ub:Ea;b.drawImage(T,qb,ub,Mb,dc,v,N,Mb*c,dc*c);1!=pb&&(b.globalAlpha=Lb);(1!=Q||E)&&b.setTransform.apply(b,z)}++n;break;case 5:q=v[1];u=v[2];H=v[3];Ea=v[4]*c;pb=v[5]*c;E=v[6];Q=v[7]*c;T=v[8];ba=v[9];for((N=v[10])&&(E+=e);q<u;q+=2){v=m[q]+Ea;N=m[q+1]+pb;if(1!=Q||E)tg(F,v,N,Q,Q,E,-v,-N),b.setTransform.apply(b,F);qb=H.split("\n");ub=qb.length;1<ub?(cc=Math.round(1.5*b.measureText("M").width),N-=(ub-1)/2*cc):cc=0;for(va=0;va<ub;va++)Lb=qb[va],ba&&b.strokeText(Lb,v,N),T&&b.fillText(Lb,
v,N),N+=cc;(1!=Q||E)&&b.setTransform.apply(b,z)}++n;break;case 6:if(h&&(q=v[1],q=h(q)))return q;++n;break;case 7:X?fa++:a.la(b,e);++n;break;case 8:q=v[1];u=v[2];v=m[q];N=m[q+1];E=v+.5|0;Q=N+.5|0;if(E!==C||Q!==D)b.moveTo(v,N),C=E,D=Q;for(q+=2;q<u;q+=2)if(v=m[q],N=m[q+1],E=v+.5|0,Q=N+.5|0,q==u-2||E!==C||Q!==D)b.lineTo(v,N),C=E,D=Q;++n;break;case 9:a.Aa=v[2];fa&&(a.la(b,e),fa=0,ga&&(b.stroke(),ga=0));b.fillStyle=v[1];++n;break;case 10:var q=void 0!==v[8]?v[8]:!0,hh=v[9];u=v[2];ga&&(b.stroke(),ga=0);
b.strokeStyle=v[1];b.lineWidth=q?u*c:u;b.lineCap=v[3];b.lineJoin=v[4];b.miterLimit=v[5];od&&(u=v[6],E=v[7],q&&c!==hh&&(u=u.map(function(a){return a*c/hh}),E*=c/hh,v[6]=u,v[7]=E,v[9]=c),b.lineDashOffset=E,b.setLineDash(u));++n;break;case 11:b.font=v[1];b.textAlign=v[2];b.textBaseline=v[3];++n;break;case 12:X?ga++:b.stroke();++n;break;default:++n}}fa&&a.la(b,e);ga&&b.stroke()}
function gn(a){var b=a.b;b.reverse();var c,d=b.length,e,f,g=-1;for(c=0;c<d;++c)if(e=b[c],f=e[0],6==f)g=c;else if(0==f){e[2]=c;e=a.b;for(f=c;g<f;){var h=e[g];e[g]=e[f];e[f]=h;++g;--f}g=-1}}function hn(a,b){a.fa[2]=a.f.length;a.fa=null;a.ga[2]=a.b.length;a.ga=null;var c=[6,b];a.f.push(c);a.b.push(c)}cn.prototype.bc=ta;cn.prototype.Oc=function(){return this.I};function jn(a,b,c,d){cn.call(this,a,b,c,d);this.N=this.G=null;this.v=this.B=this.K=this.o=this.j=this.C=this.s=this.u=this.i=this.g=this.a=void 0}t(jn,cn);jn.prototype.Kc=function(a,b){if(this.N){en(this,b);var c=a.l,d=this.coordinates.length,c=dn(this,c,0,c.length,a.A,!1,!1);this.f.push([4,d,c,this.N,this.a,this.g,this.i,this.u,this.s,this.C,this.j,this.o,this.K,this.B,this.v]);this.b.push([4,d,c,this.G,this.a,this.g,this.i,this.u,this.s,this.C,this.j,this.o,this.K,this.B,this.v]);hn(this,b)}};
jn.prototype.Ic=function(a,b){if(this.N){en(this,b);var c=a.l,d=this.coordinates.length,c=dn(this,c,0,c.length,a.A,!1,!1);this.f.push([4,d,c,this.N,this.a,this.g,this.i,this.u,this.s,this.C,this.j,this.o,this.K,this.B,this.v]);this.b.push([4,d,c,this.G,this.a,this.g,this.i,this.u,this.s,this.C,this.j,this.o,this.K,this.B,this.v]);hn(this,b)}};jn.prototype.bc=function(){gn(this);this.g=this.a=void 0;this.N=this.G=null;this.v=this.B=this.o=this.j=this.C=this.s=this.u=this.K=this.i=void 0};
jn.prototype.lc=function(a){var b=a.Sb(),c=a.nb(),d=a.Be(1),e=a.ia(1),f=a.dc();this.a=b[0];this.g=b[1];this.G=d;this.N=e;this.i=c[1];this.u=a.i;this.s=f[0];this.C=f[1];this.j=a.s;this.o=a.o;this.K=a.g;this.B=a.K;this.v=c[0]};function kn(a,b,c,d){cn.call(this,a,b,c,d);this.g=null;this.a={Cb:void 0,wb:void 0,xb:null,yb:void 0,zb:void 0,Ab:void 0,Bb:void 0,Vc:0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}t(kn,cn);function ln(a,b,c,d,e){var f=a.coordinates.length;b=dn(a,b,c,d,e,!1,!1);f=[8,f,b];a.f.push(f);a.b.push(f);return d}l=kn.prototype;l.Oc=function(){this.g||(this.g=Oa(this.I),0<this.c&&Na(this.g,this.resolution*(this.c+1)/2,this.g));return this.g};
function mn(a){var b=a.a,c=b.strokeStyle,d=b.lineCap,e=b.lineDash,f=b.lineDashOffset,g=b.lineJoin,h=b.lineWidth,k=b.miterLimit;b.Cb==c&&b.wb==d&&pa(b.xb,e)&&b.yb==f&&b.zb==g&&b.Ab==h&&b.Bb==k||(b.Vc!=a.coordinates.length&&(a.f.push([12]),b.Vc=a.coordinates.length),a.f.push([10,c,h,d,g,k,e,f,!0,1],[1]),b.Cb=c,b.wb=d,b.xb=e,b.yb=f,b.zb=g,b.Ab=h,b.Bb=k)}
l.Gc=function(a,b){var c=this.a,d=c.lineWidth;void 0!==c.strokeStyle&&void 0!==d&&(mn(this),en(this,b),this.b.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset,!0,1],[1]),c=a.l,ln(this,c,0,c.length,a.A),this.b.push([12]),hn(this,b))};
l.Hc=function(a,b){var c=this.a,d=c.lineWidth;if(void 0!==c.strokeStyle&&void 0!==d){mn(this);en(this,b);this.b.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset,!0,1],[1]);var c=a.gb(),d=a.l,e=a.A,f=0,g,h;g=0;for(h=c.length;g<h;++g)f=ln(this,d,f,c[g],e);this.b.push([12]);hn(this,b)}};l.bc=function(){this.a.Vc!=this.coordinates.length&&this.f.push([12]);gn(this);this.a=null};
l.Sa=function(a,b){var c=b.b;this.a.strokeStyle=Mc(c?c:Bg);c=b.g;this.a.lineCap=void 0!==c?c:"round";c=b.f;this.a.lineDash=c?c:Ag;c=b.j;this.a.lineDashOffset=c?c:0;c=b.i;this.a.lineJoin=void 0!==c?c:"round";c=b.c;this.a.lineWidth=void 0!==c?c:1;c=b.u;this.a.miterLimit=void 0!==c?c:10;this.a.lineWidth>this.c&&(this.c=this.a.lineWidth,this.g=null)};function nn(a,b,c,d){cn.call(this,a,b,c,d);this.g=null;this.a={Nd:void 0,Cb:void 0,wb:void 0,xb:null,yb:void 0,zb:void 0,Ab:void 0,Bb:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}t(nn,cn);
function on(a,b,c,d,e){var f=a.a,g=void 0!==f.fillStyle,f=void 0!=f.strokeStyle,h=d.length,k=[1];a.f.push(k);a.b.push(k);for(k=0;k<h;++k){var m=d[k],n=a.coordinates.length;c=dn(a,b,c,m,e,!0,!f);c=[8,n,c];a.f.push(c);a.b.push(c);f&&(c=[3],a.f.push(c),a.b.push(c));c=m}b=[7];a.b.push(b);g&&a.f.push(b);f&&(g=[12],a.f.push(g),a.b.push(g));return c}l=nn.prototype;
l.Fc=function(a,b){var c=this.a,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){pn(this,a);en(this,b);this.b.push([9,Jc(zg)]);void 0!==c.strokeStyle&&this.b.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset,!0,1]);var e=a.l,d=this.coordinates.length;dn(this,e,0,e.length,a.A,!1,!1);e=[1];d=[2,d];this.f.push(e,d);this.b.push(e,d);d=[7];this.b.push(d);void 0!==c.fillStyle&&this.f.push(d);void 0!==c.strokeStyle&&(c=[12],this.f.push(c),this.b.push(c));
hn(this,b)}};l.Lc=function(a,b){var c=this.a;pn(this,a);en(this,b);this.b.push([9,Jc(zg)]);void 0!==c.strokeStyle&&this.b.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset,!0,1]);var c=a.gb(),d=Ue(a);on(this,d,0,c,a.A);hn(this,b)};
l.Jc=function(a,b){var c=this.a,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){pn(this,a);en(this,b);this.b.push([9,Jc(zg)]);void 0!==c.strokeStyle&&this.b.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset,!0,1]);var c=a.a,d=Ng(a),e=a.A,f=0,g,h;g=0;for(h=c.length;g<h;++g)f=on(this,d,f,c[g],e);hn(this,b)}};l.bc=function(){gn(this);this.a=null;var a=this.La;if(a){var b=this.coordinates,c,d;c=0;for(d=b.length;c<d;++c)b[c]=a*Math.round(b[c]/a)}};
l.Oc=function(){this.g||(this.g=Oa(this.I),0<this.c&&Na(this.g,this.resolution*(this.c+1)/2,this.g));return this.g};
l.Sa=function(a,b){var c=this.a;if(a){var d=a.b;c.fillStyle=Mc(d?d:zg)}else c.fillStyle=void 0;b?(d=b.b,c.strokeStyle=Mc(d?d:Bg),d=b.g,c.lineCap=void 0!==d?d:"round",d=b.f,c.lineDash=d?d.slice():Ag,d=b.j,c.lineDashOffset=d?d:0,d=b.i,c.lineJoin=void 0!==d?d:"round",d=b.c,c.lineWidth=void 0!==d?d:1,d=b.u,c.miterLimit=void 0!==d?d:10,c.lineWidth>this.c&&(this.c=c.lineWidth,this.g=null)):(c.strokeStyle=void 0,c.lineCap=void 0,c.lineDash=null,c.lineDashOffset=void 0,c.lineJoin=void 0,c.lineWidth=void 0,
c.miterLimit=void 0)};function pn(a,b){var c=a.a,d=c.fillStyle,e=c.strokeStyle,f=c.lineCap,g=c.lineDash,h=c.lineDashOffset,k=c.lineJoin,m=c.lineWidth,n=c.miterLimit;if(void 0!==d&&("string"!==typeof d||c.Nd!=d)){var p=[9,d];"string"!==typeof d&&(d=b.J(),p.push([d[0],d[3]]));a.f.push(p);c.Nd=c.fillStyle}void 0===e||c.Cb==e&&c.wb==f&&pa(c.xb,g)&&c.yb==h&&c.zb==k&&c.Ab==m&&c.Bb==n||(a.f.push([10,e,m,f,k,n,g,h,!0,1]),c.Cb=e,c.wb=f,c.xb=g,c.yb=h,c.zb=k,c.Ab=m,c.Bb=n)};function qn(a,b,c,d){cn.call(this,a,b,c,d);this.C=this.s=this.v=null;this.ea="";this.j=this.u=0;this.o=void 0;this.B=this.K=0;this.i=this.g=this.a=null}t(qn,cn);
qn.prototype.Qa=function(a,b,c,d,e,f){if(""!==this.ea&&this.i&&(this.a||this.g)){if(this.a){e=this.a;var g=this.v;if(!g||g.fillStyle!=e.fillStyle){var h=[9,e.fillStyle];this.f.push(h);this.b.push(h);g?g.fillStyle=e.fillStyle:this.v={fillStyle:e.fillStyle}}}this.g&&(e=this.g,g=this.s,g&&g.lineCap==e.lineCap&&g.lineDash==e.lineDash&&g.lineDashOffset==e.lineDashOffset&&g.lineJoin==e.lineJoin&&g.lineWidth==e.lineWidth&&g.miterLimit==e.miterLimit&&g.strokeStyle==e.strokeStyle||(h=[10,e.strokeStyle,e.lineWidth,
e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset,!1,1],this.f.push(h),this.b.push(h),g?(g.lineCap=e.lineCap,g.lineDash=e.lineDash,g.lineDashOffset=e.lineDashOffset,g.lineJoin=e.lineJoin,g.lineWidth=e.lineWidth,g.miterLimit=e.miterLimit,g.strokeStyle=e.strokeStyle):this.s={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle}));e=this.i;g=this.C;g&&g.font==e.font&&g.textAlign==
e.textAlign&&g.textBaseline==e.textBaseline||(h=[11,e.font,e.textAlign,e.textBaseline],this.f.push(h),this.b.push(h),g?(g.font=e.font,g.textAlign=e.textAlign,g.textBaseline=e.textBaseline):this.C={font:e.font,textAlign:e.textAlign,textBaseline:e.textBaseline});en(this,f);e=this.coordinates.length;a=dn(this,a,b,c,d,!1,!1);a=[5,e,a,this.ea,this.u,this.j,this.K,this.B,!!this.a,!!this.g,this.o];this.f.push(a);this.b.push(a);hn(this,f)}};
qn.prototype.Na=function(a){if(a){var b=a.qa();b?(b=b.b,b=Mc(b?b:zg),this.a?this.a.fillStyle=b:this.a={fillStyle:b}):this.a=null;var c=a.ma();if(c){var b=c.b,d=c.g,e=c.f,f=c.j,g=c.i,h=c.c,c=c.u,d=void 0!==d?d:"round",e=e?e.slice():Ag,f=void 0!==f?f:0,g=void 0!==g?g:"round",h=void 0!==h?h:1,c=void 0!==c?c:10,b=Mc(b?b:Bg);if(this.g){var k=this.g;k.lineCap=d;k.lineDash=e;k.lineDashOffset=f;k.lineJoin=g;k.lineWidth=h;k.miterLimit=c;k.strokeStyle=b}else this.g={lineCap:d,lineDash:e,lineDashOffset:f,lineJoin:g,
lineWidth:h,miterLimit:c,strokeStyle:b}}else this.g=null;var m=a.f,b=a.a,d=a.c,e=a.g,h=a.i,c=a.b,f=a.na(),g=a.u,k=a.j;a=void 0!==m?m:"10px sans-serif";g=void 0!==g?g:"center";k=void 0!==k?k:"middle";this.i?(m=this.i,m.font=a,m.textAlign=g,m.textBaseline=k):this.i={font:a,textAlign:g,textBaseline:k};this.ea=void 0!==f?f:"";this.u=void 0!==b?b:0;this.j=void 0!==d?d:0;this.o=void 0!==e?e:!1;this.K=void 0!==h?h:0;this.B=void 0!==c?c:1}else this.ea=""};function rn(a,b,c,d,e){this.j=a;this.f=b;this.i=d;this.u=c;this.a=e;this.b={};this.c=Oc(1,1);this.g=qg()}t(rn,Sg);var sn={0:[[!0]]};function tn(a,b,c){var d,e=Math.floor(a.length/2);if(b>=e)for(d=e;d<b;d++)a[d][c]=!0;else if(b<e)for(d=b+1;d<e;d++)a[d][c]=!0}
function un(a){if(void 0!==sn[a])return sn[a];for(var b=2*a+1,c=Array(b),d=0;d<b;d++)c[d]=Array(b);for(var b=a,e=d=0;b>=d;)tn(c,a+b,a+d),tn(c,a+d,a+b),tn(c,a-d,a+b),tn(c,a-b,a+d),tn(c,a-b,a-d),tn(c,a-d,a-b),tn(c,a+d,a-b),tn(c,a+b,a-d),d++,e+=1+2*d,0<2*(e-b)+1&&(--b,e+=1-2*b);return sn[a]=c}function vn(a){for(var b in a.b){var c=a.b[b],d;for(d in c)c[d].bc()}}
function wn(a,b,c,d,e,f){e=Math.round(e);var g=2*e+1,h=tg(a.g,e+.5,e+.5,1/c,-1/c,-d,-b[0],-b[1]),k=a.c;k.canvas.width!==g||k.canvas.height!==g?(k.canvas.width=g,k.canvas.height=g):k.clearRect(0,0,g,g);var m;void 0!==a.a&&(m=La(),Ma(m,b),Na(m,c*(a.a+e),m));var n=un(e);return xn(a,k,h,d,function(a){for(var b=k.getImageData(0,0,g,g).data,c=0;c<g;c++)for(var d=0;d<g;d++)if(n[c][d]&&0<b[4*(d*g+c)+3]){if(a=f(a))return a;k.clearRect(0,0,g,g);return}},m)}
function yn(a,b,c){var d=void 0!==b?b.toString():"0";b=a.b[d];void 0===b&&(b={},a.b[d]=b);d=b[c];void 0===d&&(d=new zn[c](a.j,a.f,a.u,a.i),b[c]=d);return d}
function An(a,b,c,d,e,f){var g=Object.keys(a.b).map(Number);g.sort(ma);var h=a.f,k=h[0],m=h[1],n=h[2],h=h[3],k=[k,m,k,h,n,h,n,m];se(k,0,8,2,d,k);b.save();b.beginPath();b.moveTo(k[0],k[1]);b.lineTo(k[2],k[3]);b.lineTo(k[4],k[5]);b.lineTo(k[6],k[7]);b.clip();for(var p,q,k=0,m=g.length;k<m;++k)for(p=a.b[g[k].toString()],n=0,h=Rg.length;n<h;++n)q=p[Rg[n]],void 0!==q&&fn(q,b,c,d,e,f,q.f,void 0,void 0);b.restore()}
function xn(a,b,c,d,e,f){var g={},h=Object.keys(a.b).map(Number);h.sort(function(a,b){return b-a});var k,m,n,p,q;k=0;for(m=h.length;k<m;++k)for(p=a.b[h[k].toString()],n=Rg.length-1;0<=n;--n)if(q=p[Rg[n]],void 0!==q&&(q=fn(q,b,1,c,d,g,q.b,e,f)))return q}var zn={Circle:nn,Image:jn,LineString:kn,Polygon:nn,Text:qn};function Bn(a){uc.call(this);this.a=a}t(Bn,uc);Bn.prototype.o=ta;function Cn(a,b,c){return function(d,e){return Dn(a,b,d,e,function(a){c[d]||(c[d]={});c[d][a.Oa.toString()]=a})}}function En(a,b){b.ad()&&a.postRenderFunctions.push(function(a,b,e){b=w(a).toString();a.Db(e.viewState.projection,e.usedTiles[b])}.bind(null,b))}function Fn(a,b){if(b){var c,d,e;d=0;for(e=b.length;d<e;++d)c=b[d],a[w(c).toString()]=c}}
function Gn(a,b){var c=b.Ba;void 0!==c&&("string"===typeof c?a.logos[c]="":c&&(x("string"==typeof c.href,44),x("string"==typeof c.src,45),a.logos[c.src]=c.href))};function Hn(a){Bn.call(this,a);this.V=qg()}t(Hn,Bn);function In(a,b,c){var d=b.pixelRatio,e=b.size[0]*d,f=b.size[1]*d,g=b.viewState.rotation,h=$a(c),k=[c[2],c[3]],m=[c[2],c[1]];c=[c[0],c[1]];sg(b.coordinateToPixelTransform,h);sg(b.coordinateToPixelTransform,k);sg(b.coordinateToPixelTransform,m);sg(b.coordinateToPixelTransform,c);a.save();Cg(a,-g,e/2,f/2);a.beginPath();a.moveTo(h[0]*d,h[1]*d);a.lineTo(k[0]*d,k[1]*d);a.lineTo(m[0]*d,m[1]*d);a.lineTo(c[0]*d,c[1]*d);a.clip();Cg(a,g,e/2,f/2)}
function Jn(a,b,c,d,e){var f=a.a;if(tc(f,b)){var g=d.size[0]*d.pixelRatio,h=d.size[1]*d.pixelRatio,k=d.viewState.rotation;Cg(c,-k,g/2,h/2);a=e?e:Kn(a,d,0);A(f,new yg(b,new Eg(c,d.pixelRatio,d.extent,a,d.viewState.rotation),d,c,null));Cg(c,k,g/2,h/2)}}Hn.prototype.B=function(a,b,c,d){if(this.o(a,b,0,pe,this))return c.call(d,this.a,null)};function Kn(a,b,c){var d=b.viewState,e=b.pixelRatio,f=e/d.resolution;return tg(a.V,e*b.size[0]/2,e*b.size[1]/2,f,-f,-d.rotation,-d.center[0]+c,-d.center[1])};function Ln(a,b){return w(a)-w(b)}function Mn(a,b){var c=.5*a/b;return c*c}function Nn(a,b,c,d,e,f){var g=!1,h,k;if(h=c.ia())k=h.cc(),2==k||3==k?h.Ye(e,f):(0==k&&h.load(),h.ae(e,f),g=!0);if(e=(0,c.ta)(b))d=e.Rc(d),(0,On[d.H()])(a,d,c,b);return g}
var On={Point:function(a,b,c,d){var e=c.ia();if(e){if(2!=e.cc())return;var f=yn(a,c.ra(),"Image");f.lc(e);f.Kc(b,d)}if(e=c.na())a=yn(a,c.ra(),"Text"),a.Na(e),a.Qa(b.l,0,2,2,b,d)},LineString:function(a,b,c,d){var e=c.ma();if(e){var f=yn(a,c.ra(),"LineString");f.Sa(null,e);f.Gc(b,d)}if(e=c.na())a=yn(a,c.ra(),"Text"),a.Na(e),a.Qa(Lg(b),0,2,2,b,d)},Polygon:function(a,b,c,d){var e=c.qa(),f=c.ma();if(e||f){var g=yn(a,c.ra(),"Polygon");g.Sa(e,f);g.Lc(b,d)}if(e=c.na())a=yn(a,c.ra(),"Text"),a.Na(e),a.Qa(Ve(b),
0,2,2,b,d)},MultiPoint:function(a,b,c,d){var e=c.ia();if(e){if(2!=e.cc())return;var f=yn(a,c.ra(),"Image");f.lc(e);f.Ic(b,d)}if(e=c.na())a=yn(a,c.ra(),"Text"),a.Na(e),c=b.l,a.Qa(c,0,c.length,b.A,b,d)},MultiLineString:function(a,b,c,d){var e=c.ma();if(e){var f=yn(a,c.ra(),"LineString");f.Sa(null,e);f.Hc(b,d)}if(e=c.na())a=yn(a,c.ra(),"Text"),a.Na(e),c=Mg(b),a.Qa(c,0,c.length,2,b,d)},MultiPolygon:function(a,b,c,d){var e=c.qa(),f=c.ma();if(f||e){var g=yn(a,c.ra(),"Polygon");g.Sa(e,f);g.Jc(b,d)}if(e=
c.na())a=yn(a,c.ra(),"Text"),a.Na(e),c=Og(b),a.Qa(c,0,c.length,2,b,d)},GeometryCollection:function(a,b,c,d){b=b.a;var e,f;e=0;for(f=b.length;e<f;++e)(0,On[b[e].H()])(a,b[e],c,d)},Circle:function(a,b,c,d){var e=c.qa(),f=c.ma();if(e||f){var g=yn(a,c.ra(),"Circle");g.Sa(e,f);g.Fc(b,d)}if(e=c.na())a=yn(a,c.ra(),"Text"),a.Na(e),a.Qa(b.ha(),0,2,2,b,d)}};function Pn(a){Hn.call(this,a);this.c=!1;this.G=-1;this.C=NaN;this.K=La();this.g=this.s=null;this.i=Oc()}t(Pn,Hn);
Pn.prototype.v=function(a,b,c){var d=a.extent,e=a.pixelRatio,f=b.Xc?a.skippedFeatureUids:{},g=a.viewState,h=g.projection,g=g.rotation,k=h.J(),m=this.a.da(),n=Kn(this,a,0);Jn(this,"precompose",c,a,n);var p=b.extent,q=void 0!==p;q&&In(c,a,p);if((p=this.g)&&!eb(p.b)){var u=0,F=0,z;if(tc(this.a,"render")){z=c.canvas.width;var C=c.canvas.height;if(g){var D=Math.round(Math.sqrt(z*z+C*C)),u=(D-z)/2,F=(D-C)/2;z=C=D}this.i.canvas.width=z;this.i.canvas.height=C;z=this.i}else z=c;C=z.globalAlpha;z.globalAlpha=
b.opacity;z!=c&&z.translate(u,F);b=a.size[0]*e;D=a.size[1]*e;Cg(z,-g,b/2,D/2);An(p,z,e,n,g,f);if(m.C&&h.c&&!Qa(k,d)){for(var h=d[0],m=ab(k),E=0;h<k[0];)--E,n=m*E,n=Kn(this,a,n),An(p,z,e,n,g,f),h+=m;E=0;for(h=d[2];h>k[2];)++E,n=m*E,n=Kn(this,a,n),An(p,z,e,n,g,f),h-=m;n=Kn(this,a,0)}Cg(z,g,b/2,D/2);z!=c&&(Jn(this,"render",z,a,n),c.drawImage(z.canvas,-u,-F),z.translate(-u,-F));z.globalAlpha=C}q&&c.restore();Jn(this,"postcompose",c,a,n)};
Pn.prototype.o=function(a,b,c,d,e){if(this.g){var f=this.a,g={};return wn(this.g,a,b.viewState.resolution,b.viewState.rotation,c,function(a){var b=w(a).toString();if(!(b in g))return g[b]=!0,d.call(e,a,f)})}};Pn.prototype.j=function(){var a=this.a;a.g()&&"ready"==a.Sc()&&this.b()};
Pn.prototype.I=function(a){function b(a){var b,d=a.i;d?b=d.call(a,m):(d=c.B)&&(b=d(a,m));if(b){if(b){d=!1;if(Array.isArray(b))for(var e=0,f=b.length;e<f;++e)d=Nn(q,a,b[e],Mn(m,n),this.j,this)||d;else d=Nn(q,a,b,Mn(m,n),this.j,this)||d;a=d}else a=!1;this.c=this.c||a}}var c=this.a,d=c.da();Fn(a.attributions,d.V);Gn(a,d);var e=a.viewHints[0],f=a.viewHints[1],g=c.G,h=c.I;if(!this.c&&!g&&e||!h&&f)return!0;var k=a.extent,h=a.viewState,e=h.projection,m=h.resolution,n=a.pixelRatio,f=c.f,p=c.o,g=c.get(Qn);
void 0===g&&(g=Ln);k=Na(k,p*m);p=h.projection.J();d.C&&h.projection.c&&!Qa(p,a.extent)&&(a=Math.max(ab(k)/2,ab(p)),k[0]=p[0]-a,k[2]=p[2]+a);if(!this.c&&this.C==m&&this.G==f&&this.s==g&&Qa(this.K,k))return!0;this.g=null;this.c=!1;var q=new rn(.5*m/n,k,m,d.Da,c.o);d.Wc(k,m,e);if(g){var u=[];Rn(d,k,function(a){u.push(a)},this);u.sort(g);u.forEach(b,this)}else Rn(d,k,b,this);vn(q);this.C=m;this.G=f;this.s=g;this.K=k;this.g=q;return!0};function Sn(a){a=a?a:{};var b=bb({},a);delete b.style;delete b.renderBuffer;delete b.updateWhileAnimating;delete b.updateWhileInteracting;ng.call(this,b);this.o=void 0!==a.renderBuffer?a.renderBuffer:100;this.v=null;this.B=void 0;this.s(a.style);this.G=void 0!==a.updateWhileAnimating?a.updateWhileAnimating:!1;this.I=void 0!==a.updateWhileInteracting?a.updateWhileInteracting:!1}t(Sn,ng);Sn.prototype.Ec=function(a){var b=null;"canvas"===a.H()&&(b=new Pn(this));return b};
Sn.prototype.s=function(a){this.v=void 0!==a?a:Dh;this.B=null===a?void 0:Bh(this.v);this.b()};var Qn="renderOrder";function Tn(){return[[-Infinity,-Infinity,Infinity,Infinity]]};function Un(a){vc.call(this);this.$=Hb(a.projection);this.V=Vn(a.attributions);this.Ba=a.logo;this.Ca=void 0!==a.state?a.state:"ready";this.C=void 0!==a.wrapX?a.wrapX:!1}t(Un,vc);function Vn(a){if("string"===typeof a)return[new ec({html:a})];if(a instanceof ec)return[a];if(Array.isArray(a)){for(var b=a.length,c=Array(b),d=0;d<b;d++){var e=a[d];c[d]="string"===typeof e?new ec({html:e}):e}return c}return null}Un.prototype.ca=ta;function Wn(a){a=a||{};Un.call(this,{attributions:a.attributions,logo:a.logo,projection:void 0,state:"ready",wrapX:void 0!==a.wrapX?a.wrapX:!0});this.G=ta;this.I=a.format;this.Da=void 0==a.overlaps?!0:a.overlaps;this.sa=a.url;a.loader?this.G=a.loader:void 0!==this.sa&&(x(this.I,7),this.G=Th(this.sa,this.I));this.cb=a.strategy?a.strategy:Tn;var b=void 0!==a.useSpatialIndex?a.useSpatialIndex:!0;this.a=b?new Vg:null;this.W=new Vg;this.c={};this.i={};this.j={};this.o={};this.g=null;var c,d;a.features instanceof
Ac?(c=a.features,d=c.a):Array.isArray(a.features)&&(d=a.features);b||c||(c=new Ac(d));d&&Xn(this,d);c&&Yn(this,c)}t(Wn,Un);l=Wn.prototype;l.Pa=function(a){var b=w(a).toString();if(Zn(this,b,a)){$n(this,b,a);var c=a.R();c?(b=c.J(),this.a&&this.a.ba(b,a)):this.c[b]=a;A(this,new ao("addfeature",a))}this.b()};function $n(a,b,c){a.o[b]=[y(c,"change",a.Ae,a),y(c,"propertychange",a.Ae,a)]}
function Zn(a,b,c){var d=!0,e=c.a;void 0!==e?e.toString()in a.i?d=!1:a.i[e.toString()]=c:(x(!(b in a.j),30),a.j[b]=c);return d}l.ub=function(a){Xn(this,a);this.b()};function Xn(a,b){var c,d,e,f,g=[],h=[],k=[];d=0;for(e=b.length;d<e;d++)f=b[d],c=w(f).toString(),Zn(a,c,f)&&h.push(f);d=0;for(e=h.length;d<e;d++){f=h[d];c=w(f).toString();$n(a,c,f);var m=f.R();m?(c=m.J(),g.push(c),k.push(f)):a.c[c]=f}a.a&&a.a.load(g,k);d=0;for(e=h.length;d<e;d++)A(a,new ao("addfeature",h[d]))}
function Yn(a,b){var c=!1;y(a,"addfeature",function(a){c||(c=!0,b.push(a.feature),c=!1)});y(a,"removefeature",function(a){c||(c=!0,b.remove(a.feature),c=!1)});y(b,"add",function(a){c||(c=!0,this.Pa(a.element),c=!1)},a);y(b,"remove",function(a){c||(c=!0,this.Ja(a.element),c=!1)},a);a.g=b}
l.clear=function(a){if(a){for(var b in this.o)this.o[b].forEach(ic);this.g||(this.o={},this.i={},this.j={})}else if(this.a){this.a.forEach(this.pd,this);for(var c in this.c)this.pd(this.c[c])}this.g&&this.g.clear();this.a&&this.a.clear();this.W.clear();this.c={};A(this,new ao("clear"));this.b()};function Rn(a,b,c,d){a.a?$g(a.a,b,c,d):a.g&&a.g.forEach(c,d)}l.bd=function(){var a;this.g?a=this.g.a:this.a&&(a=Xg(this.a),eb(this.c)||oa(a,db(this.c)));return a};l.J=function(a){return this.a.J(a)};
l.Uf=function(a){a=this.i[a.toString()];return void 0!==a?a:null};l.Eh=function(){return this.I};l.Ae=function(a){a=a.target;var b=w(a).toString(),c=a.R();c?(c=c.J(),b in this.c?(delete this.c[b],this.a&&this.a.ba(c,a)):this.a&&Wg(this.a,c,a)):b in this.c||(this.a&&this.a.remove(a),this.c[b]=a);c=a.a;void 0!==c?(c=c.toString(),b in this.j?(delete this.j[b],this.i[c]=a):this.i[c]!==a&&(bo(this,a),this.i[c]=a)):b in this.j||(bo(this,a),this.j[b]=a);this.b();A(this,new ao("changefeature",a))};
l.Wc=function(a,b,c){var d=this.W;a=this.cb(a,b);var e,f;e=0;for(f=a.length;e<f;++e){var g=a[e];$g(d,g,function(a){return Qa(a.extent,g)})||(this.G.call(this,g,b,c),d.ba(g,{extent:g.slice()}))}};l.Ja=function(a){var b=w(a).toString();b in this.c?delete this.c[b]:this.a&&this.a.remove(a);this.pd(a);this.b()};l.pd=function(a){var b=w(a).toString();this.o[b].forEach(ic);delete this.o[b];var c=a.a;void 0!==c?delete this.i[c.toString()]:delete this.j[b];A(this,new ao("removefeature",a))};
function bo(a,b){for(var c in a.i)if(a.i[c]===b){delete a.i[c];break}}function ao(a,b){qc.call(this,a);this.feature=b}t(ao,qc);function co(a){vf.call(this,{handleDownEvent:eo,handleEvent:fo,handleUpEvent:go});this.I=!1;this.$=null;this.i=!1;this.Da=a.source?a.source:null;this.Ba=a.features?a.features:null;this.Nf=a.snapTolerance?a.snapTolerance:12;this.W=a.type;this.c=ho(this.W);this.ya=a.minPoints?a.minPoints:this.c===io?3:2;this.sa=a.maxPoints?a.maxPoints:Infinity;this.tc=a.finishCondition?a.finishCondition:pe;var b=a.geometryFunction;if(!b)if("Circle"===this.W)b=function(a,b){var c=b?b:new Xm([NaN,NaN]);Ym(c,a[0],Math.sqrt(me(a[0],
a[1])));return c};else{var c,d=this.c;d===jo?c=Me:d===ko?c=S:d===io&&(c=B);b=function(a,b){var e=b;e?d===io?e.Y([a[0].concat([a[0][0]])]):e.Y(a):e=new c(a);return e}}this.ta=b;this.G=this.s=this.a=this.C=this.j=this.o=null;this.bb=a.clickTolerance?a.clickTolerance*a.clickTolerance:36;this.ca=new Sn({source:new Wn({useSpatialIndex:!1,wrapX:a.wrapX?a.wrapX:!1}),style:a.style?a.style:lo()});this.Ca=a.geometryName;this.Mf=a.condition?a.condition:qf;this.uc=a.freehand?pe:a.freehandCondition?a.freehandCondition:
rf;y(this,xc("active"),this.cb,this)}t(co,vf);function lo(){var a=Eh();return function(b){return a[b.R().H()]}}co.prototype.setMap=function(a){vf.prototype.setMap.call(this,a);this.cb()};function fo(a){this.i=this.c!==jo&&this.uc(a);var b=!this.i;this.i&&"pointerdrag"===a.type&&null!==this.j?(mo(this,a),b=!1):"pointermove"===a.type?b=no(this,a):"dblclick"===a.type&&(b=!1);return wf.call(this,a)&&b}
function eo(a){this.I=!this.i;return this.i?(this.$=a.pixel,this.o||oo(this,a),!0):this.Mf(a)?(this.$=a.pixel,!0):!1}function go(a){var b=!0;no(this,a);var c=this.c===po;this.I?(this.o?this.i||c?qo(this):ro(this,a)?this.tc(a)&&qo(this):mo(this,a):(oo(this,a),this.c===jo&&qo(this)),b=!1):this.i&&(this.o=null,so(this));return b}
function no(a,b){if(a.$&&(!a.i&&a.I||a.i&&!a.I)){var c=a.$,d=b.pixel,e=c[0]-d[0],c=c[1]-d[1],e=e*e+c*c;a.I=a.i?e>a.bb:e<=a.bb}a.o?(e=b.coordinate,c=a.j.R(),a.c===jo?d=a.a:a.c===io?(d=a.a[0],d=d[d.length-1],ro(a,b)&&(e=a.o.slice())):(d=a.a,d=d[d.length-1]),d[0]=e[0],d[1]=e[1],a.ta(a.a,c),a.C&&a.C.R().Y(e),c instanceof B&&a.c!==io?(a.s||(a.s=new I(new S(null))),c=c.Vd(0),e=a.s.R(),bi(e,c.X,c.l)):a.G&&(e=a.s.R(),e.Y(a.G)),to(a)):(e=b.coordinate.slice(),a.C?a.C.R().Y(e):(a.C=new I(new Me(e)),to(a)));
return!0}function ro(a,b){var c=!1;if(a.j){var d=!1,e=[a.o];a.c===ko?d=a.a.length>a.ya:a.c===io&&(d=a.a[0].length>a.ya,e=[a.a[0][0],a.a[0][a.a[0].length-2]]);if(d)for(var d=b.map,f=0,g=e.length;f<g;f++){var h=e[f],k=Cf(d,h),m=b.pixel,c=m[0]-k[0],k=m[1]-k[1];if(c=Math.sqrt(c*c+k*k)<=(a.i?1:a.Nf)){a.o=h;break}}}return c}
function oo(a,b){var c=b.coordinate;a.o=c;a.c===jo?a.a=c.slice():a.c===io?(a.a=[[c.slice(),c.slice()]],a.G=a.a[0]):(a.a=[c.slice(),c.slice()],a.c===po&&(a.G=a.a));a.G&&(a.s=new I(new S(a.G)));c=a.ta(a.a);a.j=new I;a.Ca&&a.j.pb(a.Ca);a.j.xa(c);to(a);A(a,new uo("drawstart",a.j))}
function mo(a,b){var c=b.coordinate,d=a.j.R(),e,f;a.c===ko?(a.o=c.slice(),f=a.a,f.length>=a.sa&&(a.i?f.pop():e=!0),f.push(c.slice()),a.ta(f,d)):a.c===io&&(f=a.a[0],f.length>=a.sa&&(a.i?f.pop():e=!0),f.push(c.slice()),e&&(a.o=f[0]),a.ta(a.a,d));to(a);e&&qo(a)}
function qo(a){var b=so(a),c=a.a,d=b.R();a.c===ko?(c.pop(),a.ta(c,d)):a.c===io&&(c[0].pop(),a.ta(c,d),c=d.D());"MultiPoint"===a.W?b.xa(new fi([c])):"MultiLineString"===a.W?b.xa(new ci([c])):"MultiPolygon"===a.W&&b.xa(new hi([c]));A(a,new uo("drawend",b));a.Ba&&a.Ba.push(b);a.Da&&a.Da.Pa(b)}function so(a){a.o=null;var b=a.j;b&&(a.j=null,a.C=null,a.s=null,a.ca.da().clear(!0));return b}co.prototype.ab=qe;
function to(a){var b=[];a.j&&b.push(a.j);a.s&&b.push(a.s);a.C&&b.push(a.C);a=a.ca.da();a.clear(!0);a.ub(b)}co.prototype.cb=function(){var a=this.B,b=this.get("active");a&&b||so(this);this.ca.setMap(b?a:null)};function ho(a){var b;"Point"===a||"MultiPoint"===a?b=jo:"LineString"===a||"MultiLineString"===a?b=ko:"Polygon"===a||"MultiPolygon"===a?b=io:"Circle"===a&&(b=po);return b}var jo="Point",ko="LineString",io="Polygon",po="Circle";function uo(a,b){qc.call(this,a);this.feature=b}t(uo,qc);function vo(a){vf.call(this,{handleDownEvent:wo,handleDragEvent:xo,handleEvent:yo,handleUpEvent:zo});this.Da=a.condition?a.condition:uf;this.Ba=function(a){return qf(a)&&pf(a)};this.Ca=a.deleteCondition?a.deleteCondition:this.Ba;this.ya=this.c=null;this.sa=[0,0];this.s=this.G=!1;this.a=new Vg;this.$=void 0!==a.pixelTolerance?a.pixelTolerance:10;this.j=this.ca=!1;this.i=[];this.C=new Sn({source:new Wn({useSpatialIndex:!1,wrapX:!!a.wrapX}),style:a.style?a.style:Ao(),updateWhileAnimating:!0,updateWhileInteracting:!0});
this.W={Point:this.vh,LineString:this.we,LinearRing:this.we,Polygon:this.wh,MultiPoint:this.th,MultiLineString:this.sh,MultiPolygon:this.uh,Circle:this.yi,GeometryCollection:this.rh};this.o=a.features;this.o.forEach(this.$c,this);y(this.o,"add",this.ph,this);y(this.o,"remove",this.qh,this);this.I=null}t(vo,vf);l=vo.prototype;l.$c=function(a){var b=a.R();b&&b.H()in this.W&&this.W[b.H()].call(this,a,b);(b=this.B)&&b.c&&this.get("active")&&Bo(this,this.sa,b);y(a,"change",this.ve,this)};
function Co(a,b){a.s||(a.s=!0,A(a,new Do("modifystart",a.o,b)))}function Eo(a,b){Fo(a,b);a.c&&!a.o.Wa()&&(a.C.da().Ja(a.c),a.c=null);nc(b,"change",a.ve,a)}function Fo(a,b){var c=a.a,d=[];c.forEach(function(a){b===a.feature&&d.push(a)});for(var e=d.length-1;0<=e;--e)c.remove(d[e])}l.Ya=function(a){this.c&&!a&&(this.C.da().Ja(this.c),this.c=null);vf.prototype.Ya.call(this,a)};l.setMap=function(a){this.C.setMap(a);vf.prototype.setMap.call(this,a)};l.ph=function(a){this.$c(a.element)};
l.ve=function(a){this.j||(a=a.target,Eo(this,a),this.$c(a))};l.qh=function(a){Eo(this,a.element)};l.vh=function(a,b){var c=b.D(),c={feature:a,geometry:b,T:[c,c]};this.a.ba(b.J(),c)};l.th=function(a,b){var c=b.D(),d,e,f;e=0;for(f=c.length;e<f;++e)d=c[e],d={feature:a,geometry:b,depth:[e],index:e,T:[d,d]},this.a.ba(b.J(),d)};l.we=function(a,b){var c=b.D(),d,e,f,g;d=0;for(e=c.length-1;d<e;++d)f=c.slice(d,d+2),g={feature:a,geometry:b,index:d,T:f},this.a.ba(Ka(f),g)};
l.sh=function(a,b){var c=b.D(),d,e,f,g,h,k,m;g=0;for(h=c.length;g<h;++g)for(d=c[g],e=0,f=d.length-1;e<f;++e)k=d.slice(e,e+2),m={feature:a,geometry:b,depth:[g],index:e,T:k},this.a.ba(Ka(k),m)};l.wh=function(a,b){var c=b.D(),d,e,f,g,h,k,m;g=0;for(h=c.length;g<h;++g)for(d=c[g],e=0,f=d.length-1;e<f;++e)k=d.slice(e,e+2),m={feature:a,geometry:b,depth:[g],index:e,T:k},this.a.ba(Ka(k),m)};
l.uh=function(a,b){var c=b.D(),d,e,f,g,h,k,m,n,p,q;k=0;for(m=c.length;k<m;++k)for(n=c[k],g=0,h=n.length;g<h;++g)for(d=n[g],e=0,f=d.length-1;e<f;++e)p=d.slice(e,e+2),q={feature:a,geometry:b,depth:[g,k],index:e,T:p},this.a.ba(Ka(p),q)};l.yi=function(a,b){var c=b.ha(),d={feature:a,geometry:b,index:0,T:[c,c]},e={feature:a,geometry:b,index:1,T:[c,c]};d.Mc=e.Mc=[d,e];this.a.ba(Ta(c),d);this.a.ba(b.J(),e)};l.rh=function(a,b){var c,d=b.a;for(c=0;c<d.length;++c)this.W[d[c].H()].call(this,a,d[c])};
function Go(a,b){var c=a.c;c?c.R().Y(b):(c=new I(new Me(b)),a.c=c,a.C.da().Pa(c))}function Ho(a,b){return a.index-b.index}
function wo(a){if(!this.Da(a))return!1;Bo(this,a.pixel,a.map);var b=a.map.Ea(a.pixel);this.i.length=0;this.s=!1;var c=this.c;if(c){var d=[],c=c.R().D(),e=Ka([c]),e=Yg(this.a,e),f={};e.sort(Ho);for(var g=0,h=e.length;g<h;++g){var k=e[g],m=k.T,n=w(k.feature),p=k.depth;p&&(n+="-"+p.join("-"));f[n]||(f[n]=Array(2));if("Circle"===k.geometry.H()&&1===k.index)m=Io(b,k),je(m,c)&&!f[n][0]&&(this.i.push([k,0]),f[n][0]=k);else if(je(m[0],c)&&!f[n][0])this.i.push([k,0]),f[n][0]=k;else if(je(m[1],c)&&!f[n][1]){if("LineString"!==
k.geometry.H()&&"MultiLineString"!==k.geometry.H()||!f[n][0]||0!==f[n][0].index)this.i.push([k,1]),f[n][1]=k}else w(m)in this.ya&&!f[n][0]&&!f[n][1]&&d.push([k,c])}d.length&&Co(this,a);for(a=d.length-1;0<=a;--a)this.Ag.apply(this,d[a])}return!!this.c}
function xo(a){this.G=!1;Co(this,a);a=a.coordinate;for(var b=0,c=this.i.length;b<c;++b){for(var d=this.i[b],e=d[0],f=e.depth,g=e.geometry,h,k=e.T,d=d[1];a.length<g.A;)a.push(k[d][a.length]);switch(g.H()){case "Point":h=a;k[0]=k[1]=a;break;case "MultiPoint":h=g.D();h[e.index]=a;k[0]=k[1]=a;break;case "LineString":h=g.D();h[e.index+d]=a;k[d]=a;break;case "MultiLineString":h=g.D();h[f[0]][e.index+d]=a;k[d]=a;break;case "Polygon":h=g.D();h[f[0]][e.index+d]=a;k[d]=a;break;case "MultiPolygon":h=g.D();h[f[1]][f[0]][e.index+
d]=a;k[d]=a;break;case "Circle":k[0]=k[1]=a,0===e.index?(this.j=!0,g.Ka(a)):(this.j=!0,g.Re(ne(g.ha(),a))),this.j=!1}h&&(e=g,f=h,this.j=!0,e.Y(f),this.j=!1)}Go(this,a)}function zo(a){for(var b,c,d=this.i.length-1;0<=d;--d)if(b=this.i[d][0],c=b.geometry,"Circle"===c.H()){var e=c.ha(),f=b.Mc[0];b=b.Mc[1];f.T[0]=f.T[1]=e;b.T[0]=b.T[1]=e;Wg(this.a,Ta(e),f);Wg(this.a,c.J(),b)}else Wg(this.a,Ka(b.T),b);this.s&&(A(this,new Do("modifyend",this.o,a)),this.s=!1);return!1}
function yo(a){if(!(a instanceof hd))return!0;this.I=a;var b;$c(a.map.Z())[1]||"pointermove"!=a.type||this.v||(this.sa=a.pixel,Bo(this,a.pixel,a.map));if(this.c&&this.Ca(a)){var c;if("singleclick"==a.type&&this.G)c=!0;else if(this.I&&"pointerdrag"!=this.I.type){b=this.I;Co(this,b);var d=this.i,e={},f,g,h,k,m,n,p,q,u;for(m=d.length-1;0<=m;--m)k=d[m],u=k[0],c=w(u.feature),u.depth&&(c+="-"+u.depth.join("-")),c in e||(e[c]={}),0===k[1]?(e[c].right=u,e[c].index=u.index):1==k[1]&&(e[c].left=u,e[c].index=
u.index+1);for(c in e){q=e[c].right;n=e[c].left;m=e[c].index;p=m-1;u=void 0!==n?n:q;0>p&&(p=0);k=u.geometry;g=h=k.D();f=!1;switch(k.H()){case "MultiLineString":2<h[u.depth[0]].length&&(h[u.depth[0]].splice(m,1),f=!0);break;case "LineString":2<h.length&&(h.splice(m,1),f=!0);break;case "MultiPolygon":g=g[u.depth[1]];case "Polygon":g=g[u.depth[0]],4<g.length&&(m==g.length-1&&(m=0),g.splice(m,1),f=!0,0===m&&(g.pop(),g.push(g[0]),p=g.length-1))}f&&(f=k,this.j=!0,f.Y(h),this.j=!1,h=[],void 0!==n&&(this.a.remove(n),
h.push(n.T[0])),void 0!==q&&(this.a.remove(q),h.push(q.T[1])),void 0!==n&&void 0!==q&&(n={depth:u.depth,feature:u.feature,geometry:u.geometry,index:p,T:h},this.a.ba(Ka(n.T),n)),Jo(this,k,m,u.depth,-1),this.c&&(this.C.da().Ja(this.c),this.c=null),d.length=0)}A(this,new Do("modifyend",this.o,b));this.s=!1;c=!0}else c=!1;b=c}"singleclick"==a.type&&(this.G=!1);return wf.call(this,a)&&!b}
function Bo(a,b,c){function d(a,b){return Ko(e,a)-Ko(e,b)}var e=c.Ea(b),f=Na(Ta(e),c.Z().va()*a.$),f=Yg(a.a,f);if(0<f.length){f.sort(d);var g=f[0],h=g.T,k=Io(e,g),m=Cf(c,k),n=ne(b,m);if(n<=a.$){b={};if("Circle"===g.geometry.H()&&1===g.index)a.ca=!0,Go(a,k);else for(n=Cf(c,h[0]),g=Cf(c,h[1]),c=me(m,n),m=me(m,g),n=Math.sqrt(Math.min(c,m)),a.ca=n<=a.$,a.ca&&(k=c>m?h[1]:h[0]),Go(a,k),m=1,c=f.length;m<c;++m)if(k=f[m].T,je(h[0],k[0])&&je(h[1],k[1])||je(h[0],k[1])&&je(h[1],k[0]))b[w(k)]=!0;else break;b[w(h)]=
!0;a.ya=b;return}}a.c&&(a.C.da().Ja(a.c),a.c=null)}function Ko(a,b){var c=b.geometry;if("Circle"===c.H()&&1===b.index){var d=me(c.ha(),a),c=Math.sqrt(d)-c.Zc();return c*c}return oe(a,b.T)}function Io(a,b){var c=b.geometry;if("Circle"===c.H()&&1===b.index){var d=[NaN,NaN];c.Ha(a[0],a[1],d,Infinity);c=d}else c=ie(a,b.T);return c}
l.Ag=function(a,b){for(var c=a.T,d=a.feature,e=a.geometry,f=a.depth,g=a.index,h;b.length<e.A;)b.push(0);switch(e.H()){case "MultiLineString":h=e.D();h[f[0]].splice(g+1,0,b);break;case "Polygon":h=e.D();h[f[0]].splice(g+1,0,b);break;case "MultiPolygon":h=e.D();h[f[1]][f[0]].splice(g+1,0,b);break;case "LineString":h=e.D();h.splice(g+1,0,b);break;default:return}this.j=!0;e.Y(h);this.j=!1;h=this.a;h.remove(a);Jo(this,e,g,f,1);var k={T:[c[0],b],feature:d,geometry:e,depth:f,index:g};h.ba(Ka(k.T),k);this.i.push([k,
1]);c={T:[b,c[1]],feature:d,geometry:e,depth:f,index:g+1};h.ba(Ka(c.T),c);this.i.push([c,0]);this.G=!0};function Jo(a,b,c,d,e){$g(a.a,b.J(),function(a){a.geometry===b&&(void 0===d||void 0===a.depth||pa(a.depth,d))&&a.index>c&&(a.index+=e)})}function Ao(){var a=Eh();return function(){return a.Point}}function Do(a,b,c){qc.call(this,a);this.features=b;this.mapBrowserEvent=c}t(Do,qc);function Lo(a){gf.call(this,{handleEvent:Mo});a=a?a:{};this.s=a.condition?a.condition:pf;this.v=a.addCondition?a.addCondition:qe;this.V=a.removeCondition?a.removeCondition:qe;this.W=a.toggleCondition?a.toggleCondition:rf;this.o=a.multi?a.multi:!1;this.g=a.filter?a.filter:pe;this.i=a.hitTolerance?a.hitTolerance:0;this.a=new Sn({source:new Wn({useSpatialIndex:!1,features:a.features,wrapX:a.wrapX}),style:a.style?a.style:No(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(a.layers)if("function"===
typeof a.layers)a=a.layers;else{var b=a.layers;a=function(a){return 0<=b.indexOf(a)}}else a=pe;this.j=a;this.c={};a=this.a.da().g;y(a,"add",this.C,this);y(a,"remove",this.I,this)}t(Lo,gf);Lo.prototype.G=function(){return this.a.da().g};
function Mo(a){if(!this.s(a))return!0;var b=this.v(a),c=this.V(a),d=this.W(a),e=!b&&!c&&!d,f=a.map,g=this.a.da().g,h=[],k=[];if(e){cb(this.c);f.Nc(a.pixel,function(a,b){if(this.g(a,b)){k.push(a);var c=w(a);this.c[c]=b;return!this.o}}.bind(this),{layerFilter:this.j,hitTolerance:this.i});for(e=g.Wa()-1;0<=e;--e){var f=g.be(e),m=k.indexOf(f);-1<m?k.splice(m,1):(g.remove(f),h.push(f))}k.length&&Dc(g,k)}else{f.Nc(a.pixel,function(a,e){if(this.g(a,e)){if(!b&&!d||0<=g.a.indexOf(a))(c||d)&&0<=g.a.indexOf(a)&&
(h.push(a),f=w(a),delete this.c[f]);else{k.push(a);var f=w(a);this.c[f]=e}return!this.o}}.bind(this),{layerFilter:this.j,hitTolerance:this.i});for(e=h.length-1;0<=e;--e)g.remove(h[e]);Dc(g,k)}(0<k.length||0<h.length)&&A(this,new Oo(Po,k,h,a));return"pointermove"==a.type}Lo.prototype.setMap=function(a){var b=this.B,c=this.a.da().g;b&&c.forEach(b.Ze,b);gf.prototype.setMap.call(this,a);this.a.setMap(a);a&&c.forEach(a.Ve,a)};
function No(){var a=Eh();oa(a.Polygon,a.LineString);oa(a.GeometryCollection,a.LineString);return function(b){return b.R()?a[b.R().H()]:null}}Lo.prototype.C=function(a){var b=this.B;b&&b.Ve(a.element)};Lo.prototype.I=function(a){var b=this.B;b&&b.Ze(a.element)};function Oo(a,b,c,d){qc.call(this,a);this.selected=b;this.deselected=c;this.mapBrowserEvent=d}t(Oo,qc);var Po="select";function Qo(a){vf.call(this,{handleEvent:Ro,handleDownEvent:pe,handleUpEvent:So});a=a?a:{};this.j=a.source?a.source:null;this.$=void 0!==a.vertex?a.vertex:!0;this.G=void 0!==a.edge?a.edge:!0;this.i=a.features?a.features:null;this.ca=[];this.s={};this.I={};this.o={};this.C=null;this.c=void 0!==a.pixelTolerance?a.pixelTolerance:10;this.sa=To.bind(this);this.a=new Vg;this.W={Point:this.Ch,LineString:this.ze,LinearRing:this.ze,Polygon:this.Dh,MultiPoint:this.Ah,MultiLineString:this.zh,MultiPolygon:this.Bh,
GeometryCollection:this.yh}}t(Qo,vf);l=Qo.prototype;l.Pa=function(a,b){var c=void 0!==b?b:!0,d=w(a),e=a.R();if(e){var f=this.W[e.H()];f&&(this.I[d]=e.J(La()),f.call(this,a,e))}c&&(this.s[d]=y(a,"change",this.xh,this))};l.Qf=function(a){this.Pa(a)};l.Rf=function(a){this.Ja(a)};l.xe=function(a){var b;a instanceof ao?b=a.feature:a instanceof Gc&&(b=a.element);this.Pa(b)};l.ye=function(a){var b;a instanceof ao?b=a.feature:a instanceof Gc&&(b=a.element);this.Ja(b)};
l.xh=function(a){a=a.target;if(this.v){var b=w(a);b in this.o||(this.o[b]=a)}else this.$e(a)};l.Ja=function(a,b){var c=void 0!==b?b:!0,d=w(a),e=this.I[d];if(e){var f=this.a,g=[];$g(f,e,function(b){a===b.feature&&g.push(b)});for(e=g.length-1;0<=e;--e)f.remove(g[e])}c&&(ic(this.s[d]),delete this.s[d])};
l.setMap=function(a){var b=this.B,c=this.ca,d;this.i?d=this.i:this.j&&(d=this.j.bd());b&&(c.forEach(ic),c.length=0,d.forEach(this.Rf,this));vf.prototype.setMap.call(this,a);a&&(this.i?c.push(y(this.i,"add",this.xe,this),y(this.i,"remove",this.ye,this)):this.j&&c.push(y(this.j,"addfeature",this.xe,this),y(this.j,"removefeature",this.ye,this)),d.forEach(this.Qf,this))};l.ab=qe;l.$e=function(a){this.Ja(a,!1);this.Pa(a,!1)};
l.yh=function(a,b){var c,d=b.a;for(c=0;c<d.length;++c)this.W[d[c].H()].call(this,a,d[c])};l.ze=function(a,b){var c=b.D(),d,e,f,g;d=0;for(e=c.length-1;d<e;++d)f=c.slice(d,d+2),g={feature:a,T:f},this.a.ba(Ka(f),g)};l.zh=function(a,b){var c=b.D(),d,e,f,g,h,k,m;g=0;for(h=c.length;g<h;++g)for(d=c[g],e=0,f=d.length-1;e<f;++e)k=d.slice(e,e+2),m={feature:a,T:k},this.a.ba(Ka(k),m)};l.Ah=function(a,b){var c=b.D(),d,e,f;e=0;for(f=c.length;e<f;++e)d=c[e],d={feature:a,T:[d,d]},this.a.ba(b.J(),d)};
l.Bh=function(a,b){var c=b.D(),d,e,f,g,h,k,m,n,p,q;k=0;for(m=c.length;k<m;++k)for(n=c[k],g=0,h=n.length;g<h;++g)for(d=n[g],e=0,f=d.length-1;e<f;++e)p=d.slice(e,e+2),q={feature:a,T:p},this.a.ba(Ka(p),q)};l.Ch=function(a,b){var c=b.D(),c={feature:a,T:[c,c]};this.a.ba(b.J(),c)};l.Dh=function(a,b){var c=b.D(),d,e,f,g,h,k,m;g=0;for(h=c.length;g<h;++g)for(d=c[g],e=0,f=d.length-1;e<f;++e)k=d.slice(e,e+2),m={feature:a,T:k},this.a.ba(Ka(k),m)};
function Ro(a){var b,c,d=a.pixel,e=a.coordinate;b=a.map;var f=b.Ea([d[0]-this.c,d[1]+this.c]);c=b.Ea([d[0]+this.c,d[1]-this.c]);var f=Ka([f,c]),g=Yg(this.a,f),h,f=!1,k=null;c=null;if(0<g.length){this.C=e;g.sort(this.sa);g=g[0].T;if(this.$&&!this.G){if(e=Cf(b,g[0]),h=Cf(b,g[1]),e=me(d,e),d=me(d,h),h=Math.sqrt(Math.min(e,d)),h=h<=this.c)f=!0,k=e>d?g[1]:g[0],c=Cf(b,k)}else this.G&&(k=ie(e,g),c=Cf(b,k),ne(d,c)<=this.c&&(f=!0,this.$&&(e=Cf(b,g[0]),h=Cf(b,g[1]),e=me(c,e),d=me(c,h),h=Math.sqrt(Math.min(e,
d)),h=h<=this.c)))&&(k=e>d?g[1]:g[0],c=Cf(b,k));f&&(c=[Math.round(c[0]),Math.round(c[1])])}b=k;f&&(a.coordinate=b.slice(0,2),a.pixel=c);return wf.call(this,a)}function So(){var a=db(this.o);a.length&&(a.forEach(this.$e,this),this.o={});return!1}function To(a,b){return oe(this.C,a.T)-oe(this.C,b.T)};function Uo(a){Hn.call(this,a);this.s=qg();this.c=null}t(Uo,Hn);Uo.prototype.v=function(a,b,c){Jn(this,"precompose",c,a,void 0);var d=this.ia();if(d){var e=b.extent,f=void 0!==e&&!Qa(e,a.extent)&&Za(e,a.extent);f&&In(c,a,e);var e=this.C,g=c.globalAlpha;c.globalAlpha=b.opacity;c.drawImage(d,0,0,+d.width,+d.height,Math.round(e[4]),Math.round(e[5]),Math.round(d.width*e[0]),Math.round(d.height*e[3]));c.globalAlpha=g;f&&c.restore()}Jn(this,"postcompose",c,a,void 0)};
Uo.prototype.o=function(a,b,c,d,e){var f=this.a;return f.da().ca(a,b.viewState.resolution,b.viewState.rotation,c,b.skippedFeatureUids,function(a){return d.call(e,a,f)})};
Uo.prototype.B=function(a,b,c,d){if(this.ia()){if(this.a.da().ca!==ta)return Hn.prototype.B.apply(this,arguments);var e=sg(this.s,a.slice());le(e,b.viewState.resolution/this.j);this.c||(this.c=Oc(1,1));this.c.clearRect(0,0,1,1);this.c.drawImage(this.ia(),e[0],e[1],1,1,0,0,1,1);e=this.c.getImageData(0,0,1,1).data;if(0<e[3])return c.call(d,this.a,e)}};function Vo(a){Uo.call(this,a);this.g=null===this.g?null:Oc();this.i=null;this.K=[];this.$=La();this.ca=new xa(0,0,0,0);this.C=qg()}t(Vo,Uo);function Wo(a,b){var c=b.state,d=a.a.get("useInterimTilesOnError");return 2==c||4==c||3==c&&!d}
Vo.prototype.I=function(a,b){var c=a.pixelRatio,d=a.size,e=a.viewState,f=e.projection,g=e.resolution,h=e.center,k=this.a,e=k.da(),m=e.f,n=e.Ma(f),p=Zb(n,g,0),q=n.b[p],u=Math.round(g/q)||1,F=a.extent;void 0!==b.extent&&(F=Ya(F,b.extent));if(F[2]<F[0]||F[3]<F[1])return!1;var z=Tb(n,F,q),C;C=n.f?n.f:n.a[p];var D=n.b[p],E=Ja(Xb(n,p),n.u);C=Ra(C[0]+z.M*E[0]*D,C[1]+z.P*E[1]*D,C[0]+(z.O+1)*E[0]*D,C[1]+(z.S+1)*E[1]*D,void 0);D=e.Ub(c);E={};E[p]={};var Q=Cn(e,f,E),fa=this.$,ga=this.ca,X=!1,v,T,ba;for(T=z.M;T<=
z.O;++T)for(ba=z.P;ba<=z.S;++ba){v=Xo(e,p,T,ba,c,f);if(!Wo(this,v))a:if(v.b){var H=v.b;do{if(2==H.state){v=H;break a}H=H.b}while(H)}if(Wo(this,v))2==v.state&&(E[p][v.Oa.toString()]=v,X||-1!=this.K.indexOf(v)||(X=!0));else{a:{for(var H=n,N=v.Oa,Ea=Q,pb=ga,qb=Yb(H,N,fa),N=N[0]-1;N>=H.minZoom;){if(Ea.call(null,N,Vb(H,qb,N,pb))){H=!0;break a}--N}H=!1}H||(H=n,v=v.Oa,Ea=ga,v[0]<H.maxZoom?(pb=Yb(H,v,fa),v=Vb(H,pb,v[0]+1,Ea)):v=null,v&&Q(p+1,v))}}v=a.viewHints;if(!(this.j&&16<Date.now()-a.time&&(v[0]||v[1])||
!X&&this.i&&Qa(this.i,F)&&this.W==m)||u!=this.G){if(v=this.g)ba=Yo(e,p,c,f),T=Math.round((z.O-z.M+1)*ba[0]/u),ba=Math.round((z.S-z.P+1)*ba[1]/u),X=v.canvas,X.width!=T||X.height!=ba?(this.G=u,X.width=T,X.height=ba):(v.clearRect(0,0,T,ba),u=this.G);this.K.length=0;X=Object.keys(E).map(Number);X.sort(ma);for(var ub,cc,ga=0,H=X.length;ga<H;++ga){v=X[ga];Q=Yo(e,v,c,f);T=n.b[v];var Ea=T/q,pb=D*e.Sd(f),qb=E[v],va;for(va in qb){v=qb[va];ba=Yb(n,v.Oa,fa);T=(ba[0]-C[0])/q*D/u;ba=(C[3]-ba[3])/q*D/u;ub=Q[0]*
Ea/u;cc=Q[1]*Ea/u;var N=v,Lb=a,Mb=pb;this.a.da().Qc(Lb.viewState.projection)||this.g.clearRect(T,ba,ub,cc);(N=N.ia())&&this.g.drawImage(N,Mb,Mb,N.width-2*Mb,N.height-2*Mb,T,ba,ub,cc);this.K.push(v)}}this.W=m;this.j=q*c/D*u;this.i=C}va=this.j/g;va=tg(this.C,c*d[0]/2,c*d[1]/2,va,va,0,(this.i[0]-h[0])/this.j*c,(h[1]-this.i[3])/this.j*c);tg(this.s,c*d[0]/2-va[4],c*d[1]/2-va[5],c/g,-c/g,0,-h[0],-h[1]);d=a.usedTiles;g=w(e).toString();h=p.toString();g in d?h in d[g]?(d=d[g][h],z.M<d.M&&(d.M=z.M),z.O>d.O&&
(d.O=z.O),z.P<d.P&&(d.P=z.P),z.S>d.S&&(d.S=z.S)):d[g][h]=z:(d[g]={},d[g][h]=z);k=k.get("preload");z=w(e).toString();z in a.wantedTiles||(a.wantedTiles[z]={});var d=a.wantedTiles[z],g=a.tileQueue,h=n.minZoom,dc;for(C=p;C>=h;--C)for(dc=Vb(n,F,C,dc),m=n.b[C],q=dc.M;q<=dc.O;++q)for(u=dc.P;u<=dc.S;++u)p-C<=k?(va=Xo(e,C,q,u,c,f),0==va.state&&(d[va.Xa()]=!0,va.Xa()in g.a||g.u([va,z,Wb(n,va.Oa),m]))):e.bf(C,q,u,f);En(a,e);Gn(a,e);return 0<this.K.length};
Vo.prototype.ia=function(){var a=this.g;return a?a.canvas:null};function Zo(a){a=a?a:{};var b=bb({},a);delete b.preload;delete b.useInterimTilesOnError;ng.call(this,b);this.set("preload",void 0!==a.preload?a.preload:0);this.set("useInterimTilesOnError",void 0!==a.useInterimTilesOnError?a.useInterimTilesOnError:!0)}t(Zo,ng);Zo.prototype.Ec=function(a){var b=null;"canvas"===a.H()&&(b=new Vo(this));return b};function $o(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(g){if(g)return a.replace(c,g[0].toString()).replace(d,g[1].toString()).replace(e,function(){return(-g[2]-1).toString()}).replace(f,function(){var a=b.c?b.c[g[0]]:null;x(a,55);return(a.S-a.P+1+g[2]).toString()})}}function ap(a,b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=$o(a[e],b);return bp(d)}function bp(a){return 1===a.length?a[0]:function(b,c,d){if(b)return a[Fa((b[1]<<b[0])+b[2],a.length)](b,c,d)}}
function cp(){}function dp(a){var b=[],c=/\{([a-z])-([a-z])\}/.exec(a);if(c){var d=c[2].charCodeAt(0),e;for(e=c[1].charCodeAt(0);e<=d;++e)b.push(a.replace(c[0],String.fromCharCode(e)));return b}if(c=c=/\{(\d+)-(\d+)\}/.exec(a)){d=parseInt(c[2],10);for(e=parseInt(c[1],10);e<=d;e++)b.push(a.replace(c[0],e.toString()));return b}b.push(a);return b};function ep(a){ah.call(this);this.highWaterMark=void 0!==a?a:2048}t(ep,ah);ep.prototype.Db=function(a){for(var b,c;this.c>this.highWaterMark;){b=this.b.rb;c=b.Oa[0].toString();var d;if(d=c in a)b=b.Oa,d=ya(a[c],b[1],b[2]);if(d)break;else pc(this.pop())}};function fp(a){Un.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state,wrapX:a.wrapX});this.I=void 0!==a.opaque?a.opaque:!1;this.W=void 0!==a.tilePixelRatio?a.tilePixelRatio:1;this.tileGrid=void 0!==a.tileGrid?a.tileGrid:null;this.c=new ep(a.cacheSize);this.a=[0,0];this.kb=""}t(fp,Un);l=fp.prototype;l.ad=function(){var a=this.c;return a.c>a.highWaterMark};l.Db=function(a,b){var c=this.Tb(a);c&&c.Db(b)};
function Dn(a,b,c,d,e){b=a.Tb(b);if(!b)return!1;for(var f=!0,g,h,k=d.M;k<=d.O;++k)for(var m=d.P;m<=d.S;++m)g=a.Fb(c,k,m),h=!1,b.a.hasOwnProperty(g)&&(g=b.get(g),(h=2===g.state)&&(h=!1!==e(g))),h||(f=!1);return f}l.Sd=function(){return 0};function gp(a,b){a.kb!==b&&(a.kb=b,a.b())}l.Fb=function(a,b,c){return a+"/"+b+"/"+c};l.Qc=function(){return this.I};
l.Ma=function(a){if(this.tileGrid)a=this.tileGrid;else{var b=a.g;if(!b){var b=bc(a),c=ac(b,void 0,void 0),b=new Qb({extent:b,origin:$a(b),resolutions:c,tileSize:void 0});a.g=b}a=b}return a};l.Tb=function(a){var b=this.$;return b&&!Jb(b,a)?null:this.c};l.Ub=function(){return this.W};function Yo(a,b,c,d){d=a.Ma(d);c=a.Ub(c);b=Ja(Xb(d,b),a.a);return 1==c?b:Ia(b,c,a.a)}l.bf=ta;function hp(a,b){qc.call(this,a);this.tile=b}t(hp,qc);function ip(a){fp.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX});this.tileLoadFunction=a.tileLoadFunction;this.tileUrlFunction=this.Ua?this.Ua.bind(this):cp;this.urls=null;if(a.urls)this.qd(a.urls);else if(a.url){var b=a.url,c=this.urls=dp(b);jp(this,this.Ua?this.Ua.bind(this):ap(c,this.tileGrid),b)}a.tileUrlFunction&&jp(this,a.tileUrlFunction)}
t(ip,fp);ip.prototype.G=function(a){a=a.target;switch(a.state){case 1:A(this,new hp("tileloadstart",a));break;case 2:A(this,new hp("tileloadend",a));break;case 3:A(this,new hp("tileloaderror",a))}};function jp(a,b,c){a.tileUrlFunction=b;"undefined"!==typeof c?gp(a,c):a.b()}ip.prototype.qd=function(a){this.urls=a;var b=a.join("\n");jp(this,this.Ua?this.Ua.bind(this):ap(a,this.tileGrid),b)};ip.prototype.bf=function(a,b,c){a=this.Fb(a,b,c);this.c.a.hasOwnProperty(a)&&this.c.get(a)};function kp(a){ip.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:lp,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.tileClass=a.tileClass?a.tileClass:an}t(kp,ip);l=kp.prototype;l.ad=function(){return ip.prototype.ad.call(this)};
l.Db=function(a,b){ip.prototype.Db.call(this,a,b)};l.Sd=function(){return this.Td()};l.Td=function(){return 0};l.Qc=function(a){return ip.prototype.Qc.call(this,a)};l.Ma=function(a){return ip.prototype.Ma.call(this,a)};l.Tb=function(a){return ip.prototype.Tb.call(this,a)};
function mp(a,b,c,d,e,f,g){d=b=[b,c,d];var h=void 0!==f?f:a.$;c=a.Ma(h);if(a.C&&h.i){var k=d;d=k[0];var m=Wb(c,k),h=bc(h),n=m[0],p=m[1];h[0]<=n&&n<=h[2]&&h[1]<=p&&p<=h[3]?d=k:(k=ab(h),m[0]+=k*Math.ceil((h[0]-m[0])/k),d=Ub(c,m[0],m[1],c.b[d],!1,void 0))}h=d[0];m=d[1];k=d[2];c=c.minZoom>h||h>c.maxZoom?!1:(c=(n=c.J())?Vb(c,n,h):c.c?c.c[h]:null)?ya(c,m,k):!0;e=(c=c?d:null)?a.tileUrlFunction(c,e,f):void 0;e=new a.tileClass(b,void 0!==e?0:4,void 0!==e?e:"",a.crossOrigin,a.tileLoadFunction);e.key=g;y(e,
"change",a.G,a);return e}function Xo(a,b,c,d,e,f){var g,h=a.Fb(b,c,d),k=a.kb;if(a.c.a.hasOwnProperty(h)){if(g=a.c.get(h),g.key!=k){var m=g;g=mp(a,b,c,d,e,f,k);0==m.state?g.b=m.b:g.b=m;if(g.b){b=g.b;c=g;do{if(2==b.state){b.b=null;break}else 1==b.state?c=b:0==b.state?c.b=b.b:c=b;b=c.b}while(b)}a.c.replace(h,g)}}else g=mp(a,b,c,d,e,f,k),a.c.set(h,g);return g}function lp(a,b){a.ia().src=b};function np(a){a=a||{};var b=void 0!==a.projection?a.projection:"EPSG:3857",c=void 0!==a.tileGrid?a.tileGrid:$b({extent:bc(b),maxZoom:a.maxZoom,minZoom:a.minZoom,tileSize:a.tileSize});kp.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:a.opaque,projection:b,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:c,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,
wrapX:void 0!==a.wrapX?a.wrapX:!0})}t(np,kp);function op(a){Wn.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,wrapX:a.wrapX});this.v=void 0;this.ya=void 0!==a.distance?a.distance:20;this.B=[];this.ta=a.geometryFunction||function(a){a=a.R();x(a instanceof Me,10);return a};this.s=a.source;this.s.u("change",op.prototype.bb,this)}t(op,Wn);op.prototype.Wc=function(a,b,c){this.s.Wc(a,b,c);b!==this.v&&(this.clear(),this.v=b,pp(this),this.ub(this.B))};
op.prototype.bb=function(){this.clear();pp(this);this.ub(this.B);this.b()};function pp(a){if(void 0!==a.v){a.B.length=0;for(var b=La(),c=a.ya*a.v,d=a.s.bd(),e={},f=0,g=d.length;f<g;f++){var h=d[f];w(h).toString()in e||!(h=a.ta(h))||(h=h.D(),Ta(h,b),Na(b,c,b),h=Yg(a.s.a,b),h=h.filter(function(a){a=w(a).toString();return a in e?!1:e[a]=!0}),a.B.push(qp(a,h)))}}}
function qp(a,b){for(var c=[0,0],d=b.length-1;0<=d;--d){var e=a.ta(b[d]);e?he(c,e.D()):b.splice(d,1)}le(c,1/b.length);c=new I(new Me(c));c.set("features",b);return c};function rp(a,b){var c=[];Object.keys(b).forEach(function(a){null!==b[a]&&void 0!==b[a]&&c.push(a+"="+encodeURIComponent(b[a]))});var d=c.join("&");a=a.replace(/[?&]$/,"");a=-1===a.indexOf("?")?a+"?":a+"&";return a+d};function sp(a){a=a||{};var b;void 0!==a.attributions?b=a.attributions:b=[tp];np.call(this,{attributions:b,cacheSize:a.cacheSize,crossOrigin:void 0!==a.crossOrigin?a.crossOrigin:"anonymous",opaque:void 0!==a.opaque?a.opaque:!0,maxZoom:void 0!==a.maxZoom?a.maxZoom:19,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileLoadFunction:a.tileLoadFunction,url:void 0!==a.url?a.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:a.wrapX})}t(sp,np);var tp=new ec({html:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'});(function(){var a={},b={U:a};(function(c){if("object"===typeof a&&"undefined"!==typeof b)b.U=c();else{var d;"undefined"!==typeof window?d=window:"undefined"!==typeof global?d=global:"undefined"!==typeof self?d=self:d=this;d.Ti=c()}})(function(){return function d(a,b,g){function e(h,k){if(!b[h]){if(!a[h]){var m="function"==typeof require&&require;if(!k&&m)return m(h,!0);if(f)return f(h,!0);m=Error("Cannot find module '"+h+"'");throw m.code="MODULE_NOT_FOUND",m;}m=b[h]={U:{}};a[h][0].call(m.U,function(b){var d=
a[h][1][b];return e(d?d:b)},m,m.U,d,a,b,g)}return b[h].U}for(var f="function"==typeof require&&require,m=0;m<g.length;m++)e(g[m]);return e}({1:[function(a,b,f){a=a("./processor");f.Li=a},{"./processor":2}],2:[function(a,b){function d(a){var b=!0;try{new ImageData(10,10)}catch(q){b=!1}return function(d){var e=d.buffers,f=d.meta,g=d.width,h=d.height,k=e.length,m=e[0].byteLength;if(d.imageOps){m=Array(k);for(d=0;d<k;++d){var n=m,p=d,q;q=new Uint8ClampedArray(e[d]);var X=g,v=h;q=b?new ImageData(q,X,v):
{data:q,width:X,height:v};n[p]=q}g=a(m,f).data}else{g=new Uint8ClampedArray(m);h=Array(k);n=Array(k);for(d=0;d<k;++d)h[d]=new Uint8ClampedArray(e[d]),n[d]=[0,0,0,0];for(e=0;e<m;e+=4){for(d=0;d<k;++d)p=h[d],n[d][0]=p[e],n[d][1]=p[e+1],n[d][2]=p[e+2],n[d][3]=p[e+3];d=a(n,f);g[e]=d[0];g[e+1]=d[1];g[e+2]=d[2];g[e+3]=d[3]}}return g.buffer}}function e(a,b){var e=Object.keys(a.lib||{}).map(function(b){return"var "+b+" = "+a.lib[b].toString()+";"}).concat(["var __minion__ = ("+d.toString()+")(",a.operation.toString(),
");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),e=URL.createObjectURL(new Blob(e,{type:"text/javascript"})),e=new Worker(e);e.addEventListener("message",b);return e}function h(a,b){var e=d(a.operation);return{postMessage:function(a){setTimeout(function(){b({data:{buffer:e(a),meta:a.meta}})},0)}}}function k(a){this.vc=!!a.Ri;var b;0===a.threads?b=0:this.vc?b=1:b=a.threads||
1;var d=[];if(b)for(var f=0;f<b;++f)d[f]=e(a,this.Fd.bind(this,f));else d[0]=h(a,this.Fd.bind(this,0));this.Ob=d;this.Gd=[];this.Mb=0;this.eb={};this.wc=null}var m=a("./util").Sg;k.prototype.Bf=function(){if(0===this.Mb&&0<this.Gd.length){var a=this.wc=this.Gd.shift(),b=a.inputs[0].width,d=a.inputs[0].height,e=a.inputs.map(function(a){return a.data.buffer}),f=this.Ob.length;this.Mb=f;if(1===f)this.Ob[0].postMessage({buffers:e,meta:a.Dg,imageOps:this.vc,width:b,height:d},e);else for(var g=4*Math.ceil(a.inputs[0].data.length/
4/f),h=0;h<f;++h){for(var k=h*g,m=[],Q=0,fa=e.length;Q<fa;++Q)m.push(e[h].slice(k,k+g));this.Ob[h].postMessage({buffers:m,meta:a.Dg,imageOps:this.vc,width:b,height:d},m)}}};k.prototype.Fd=function(a,b){this.Qi||(this.eb[a]=b.data,--this.Mb,0===this.Mb&&this.Df())};k.prototype.Df=function(){var a=this.wc,b=this.Ob.length,d,e;if(1===b)d=new Uint8ClampedArray(this.eb[0].buffer),e=this.eb[0].meta;else{var f=a.inputs[0].data.length;d=new Uint8ClampedArray(f);e=Array(f);for(var f=4*Math.ceil(f/4/b),g=0;g<
b;++g){var h=g*f;d.set(new Uint8ClampedArray(this.eb[g].buffer),h);e[g]=this.eb[g].meta}}this.wc=null;this.eb={};a.Qb(null,m(d,a.inputs[0].width,a.inputs[0].height),e);this.Bf()};b.U=k},{"./util":3}],3:[function(a,b,f){var d=!0;try{new ImageData(10,10)}catch(k){d=!1}var e=document.createElement("canvas").getContext("2d");f.Sg=function(a,b,f){if(d)return new ImageData(a,b,f);b=e.createImageData(b,f);b.data.set(a);return b}},{}]},{},[1])(1)})})();function up(a){a=a||{};kp.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0});this.g=a.params||{};this.i=La();a=0;var b=[],c;for(c in this.g)b[a++]=c+"-"+this.g[c];gp(this,b.join("/"))}t(up,kp);up.prototype.Ub=function(a){return a};
up.prototype.Ua=function(a,b,c){var d=this.tileGrid;d||(d=this.Ma(c));if(!(d.b.length<=a[0])){var e=Yb(d,a,this.i),f=Ja(Xb(d,a[0]),this.a);1!=b&&(f=Ia(f,b,this.a));d={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};bb(d,this.g);var g=this.urls;g?(c=c.Ia.split(":").pop(),d.SIZE=f[0]+","+f[1],d.BBOX=e.join(","),d.BBOXSR=c,d.IMAGESR=c,d.DPI=Math.round(d.DPI?d.DPI*b:90*b),a=(1==g.length?g[0]:g[Fa((a[1]<<a[0])+a[2],g.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),
a=rp(a,d)):a=void 0;return a}};function vp(a){a=a||{};var b=a.params||{};kp.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:!("TRANSPARENT"in b?b.TRANSPARENT:1),projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0});this.j=void 0!==a.gutter?a.gutter:0;this.g=b;this.i=!0;this.o=a.serverType;this.v=void 0!==a.hidpi?a.hidpi:!0;this.B="";
wp(this);this.s=La();a:{a=(""+(this.g.VERSION||"1.3.0")).split(".");for(var b=["1","3"],c=0;c<Math.max(a.length,b.length);c++){var d=parseInt(a[c]||"0",10),e=parseInt(b[c]||"0",10);if(d>e){a=1;break a}if(e>d){a=-1;break a}}a=0}this.i=0<=a;a=0;var b=[],f;for(f in this.g)b[a++]=f+"-"+this.g[f];gp(this,b.join("/"))}t(vp,kp);l=vp.prototype;
l.Wf=function(a,b,c,d){c=Hb(c);var e=this.tileGrid;e||(e=this.Ma(c));b=Ub(e,a[0],a[1],b,!1,void 0);if(!(e.b.length<=b[0])){var f=e.b[b[0]],g=Yb(e,b,this.s),e=Ja(Xb(e,b[0]),this.a),h=this.j;h&&(e=Ha(e,h,this.a),g=Na(g,f*h,g));h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.g.LAYERS};bb(h,this.g,d);d=Math.floor((g[3]-a[1])/f);h[this.i?"I":"X"]=Math.floor((a[0]-g[0])/f);h[this.i?"J":"Y"]=d;return xp(this,b,e,g,1,c,h)}};l.Td=function(){return this.j};
l.Fb=function(a,b,c){return this.B+kp.prototype.Fb.call(this,a,b,c)};
function xp(a,b,c,d,e,f,g){var h=a.urls;if(h){g.WIDTH=c[0];g.HEIGHT=c[1];g[a.i?"CRS":"SRS"]=f.Ia;"STYLES"in a.g||(g.STYLES="");if(1!=e)switch(a.o){case "geoserver":c=90*e+.5|0;g.FORMAT_OPTIONS="FORMAT_OPTIONS"in g?g.FORMAT_OPTIONS+(";dpi:"+c):"dpi:"+c;break;case "mapserver":g.MAP_RESOLUTION=90*e;break;case "carmentaserver":case "qgis":g.DPI=90*e;break;default:x(!1,52)}f=f.b;a.i&&"ne"==f.substr(0,2)&&(a=d[0],d[0]=d[1],d[1]=a,a=d[2],d[2]=d[3],d[3]=a);g.BBOX=d.join(",");return rp(1==h.length?h[0]:h[Fa((b[1]<<
b[0])+b[2],h.length)],g)}}l.Ub=function(a){return this.v&&void 0!==this.o?a:1};function wp(a){var b=0,c=[];if(a.urls){var d,e;d=0;for(e=a.urls.length;d<e;++d)c[b++]=a.urls[d]}a.B=c.join("#")}
l.Ua=function(a,b,c){var d=this.tileGrid;d||(d=this.Ma(c));if(!(d.b.length<=a[0])){1==b||this.v&&void 0!==this.o||(b=1);var e=d.b[a[0]],f=Yb(d,a,this.s),d=Ja(Xb(d,a[0]),this.a),g=this.j;g&&(d=Ha(d,g,this.a),f=Na(f,e*g,f));1!=b&&(d=Ia(d,b,this.a));e={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};bb(e,this.g);return xp(this,a,d,f,b,c,e)}};l.qd=function(a){kp.prototype.qd.call(this,a);wp(this)};function yp(a){this.j=a.matrixIds;Qb.call(this,{extent:a.extent,origin:a.origin,origins:a.origins,resolutions:a.resolutions,tileSize:a.tileSize,tileSizes:a.tileSizes,sizes:a.sizes})}t(yp,Qb);function zp(a){function b(a){a="KVP"==d?rp(a,f):a.replace(/\{(\w+?)\}/g,function(a,b){return b.toLowerCase()in f?f[b.toLowerCase()]:a});return function(b){if(b){var c={TileMatrix:e.j[b[0]],TileCol:b[1],TileRow:-b[2]-1};bb(c,g);b=a;return b="KVP"==d?rp(b,c):b.replace(/\{(\w+?)\}/g,function(a,b){return c[b]})}}}this.s=void 0!==a.version?a.version:"1.0.0";this.j=void 0!==a.format?a.format:"image/jpeg";this.g=a.dimensions?a.dimensions:{};this.o=a.layer;this.i=a.matrixSet;this.B=a.style;var c=a.urls;void 0===
c&&void 0!==a.url&&(c=dp(a.url));var d=this.v=void 0!==a.requestEncoding?a.requestEncoding:"KVP",e=a.tileGrid,f={layer:this.o,style:this.B,tilematrixset:this.i};"KVP"==d&&bb(f,{Service:"WMTS",Request:"GetTile",Version:this.s,Format:this.j});var g=this.g,h=c&&0<c.length?bp(c.map(b)):cp;kp.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:e,
tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:h,urls:c,wrapX:void 0!==a.wrapX?a.wrapX:!1});gp(this,Ap(this))}t(zp,kp);function Ap(a){var b=0,c=[],d;for(d in a.g)c[b++]=d+"-"+a.g[d];return c.join("/")};r("ol.Map",G);G.prototype.addInteraction=G.prototype.If;G.prototype.addLayer=G.prototype.Jf;G.prototype.addControl=G.prototype.Hf;G.prototype.addOverlay=G.prototype.Kf;G.prototype.forEachFeatureAtPixel=G.prototype.Nc;G.prototype.forEachLayerAtPixel=G.prototype.$g;G.prototype.getLayers=G.prototype.ah;G.prototype.getSize=G.prototype.mb;G.prototype.getTarget=G.prototype.Tc;G.prototype.getOverlays=G.prototype.ag;G.prototype.getView=G.prototype.Z;G.prototype.removeInteraction=G.prototype.ii;
G.prototype.removeOverlay=G.prototype.ji;G.prototype.on=G.prototype.u;G.prototype.un=G.prototype.fa;r("ol.proj.Projection",ib);ib.prototype.getExtent=ib.prototype.J;ib.prototype.getMetersPerUnit=ib.prototype.f;r("ol.proj.transform",function(a,b,c){return Nb(b,c)(a,void 0,a.length)});r("ol.View",Ye);Ye.prototype.calculateExtent=Ye.prototype.Ld;Ye.prototype.getCenter=Ye.prototype.ha;Ye.prototype.getProjection=Ye.prototype.bh;Ye.prototype.getResolution=Ye.prototype.va;Ye.prototype.getResolutions=Ye.prototype.dh;
Ye.prototype.getZoom=Ye.prototype.dg;Ye.prototype.on=Ye.prototype.u;Ye.prototype.setCenter=Ye.prototype.Ka;Ye.prototype.setZoom=Ye.prototype.ni;Ye.prototype.fit=Ye.prototype.Pf;Ye.prototype.un=Ye.prototype.fa;r("ol.extent.getTopLeft",$a);r("ol.tilegrid.TileGrid",Qb);r("ol.tilegrid.WMTS",yp);r("ol.tilegrid.createXYZ",$b);r("ol.style.Style",zh);zh.prototype.getText=zh.prototype.na;r("ol.style.Circle",xh);r("ol.style.Fill",yh);r("ol.style.Icon",Kj);r("ol.style.Image",uh);r("ol.style.Stroke",Tg);
r("ol.style.Text",Lj);Lj.prototype.getText=Lj.prototype.na;Lj.prototype.setFill=Lj.prototype.Qe;Lj.prototype.setStroke=Lj.prototype.Te;Lj.prototype.setText=Lj.prototype.Ue;r("ol.Attribution",ec);r("ol.Geolocation",Wm);Wm.prototype.on=Wm.prototype.u;Wm.prototype.un=Wm.prototype.fa;Wm.prototype.getAccuracy=Wm.prototype.Sf;Wm.prototype.getHeading=Wm.prototype.Xf;Wm.prototype.getPosition=Wm.prototype.Wg;Wm.prototype.getSpeed=Wm.prototype.bg;Wm.prototype.getTracking=Wm.prototype.Wd;
Wm.prototype.setTracking=Wm.prototype.mc;r("ol.Overlay",fh);fh.prototype.setPosition=fh.prototype.de;r("ol.control.Attribution",Rc);Rc.prototype.setCollapsed=Rc.prototype.$;Rc.prototype.setCollapsible=Rc.prototype.ca;r("ol.control.Zoom",bd);r("ol.control.Rotate",Xc);r("ol.control.ScaleLine",ph);r("ol.control.defaults",dd);r("ol.interaction.Draw",co);
r("ol.interaction.Draw.createBox",function(){return function(a,b){var c=Ka(a),d=b||new B(null);d.Y([[[c[0],c[1]],[c[2],c[1]],[c[2],c[3]],$a(c),[c[0],c[1]]]]);return d}});co.prototype.on=co.prototype.u;co.prototype.setActive=co.prototype.Ya;co.prototype.un=co.prototype.fa;r("ol.interaction.Modify",vo);vo.prototype.on=vo.prototype.u;vo.prototype.setActive=vo.prototype.Ya;vo.prototype.un=vo.prototype.fa;r("ol.interaction.Select",Lo);Lo.prototype.on=Lo.prototype.u;Lo.prototype.setActive=Lo.prototype.Ya;
Lo.prototype.un=Lo.prototype.fa;Lo.prototype.getFeatures=Lo.prototype.G;r("ol.interaction.Snap",Qo);Qo.prototype.setActive=Qo.prototype.Ya;r("ol.source.Source",Un);Un.prototype.on=Un.prototype.u;Lo.prototype.on=Lo.prototype.u;Un.prototype.once=Un.prototype.once;r("ol.source.OSM",sp);r("ol.source.Tile",fp);r("ol.source.TileArcGISRest",up);r("ol.source.TileWMS",vp);vp.prototype.getGetFeatureInfoUrl=vp.prototype.Wf;r("ol.source.Vector",Wn);Wn.prototype.addFeature=Wn.prototype.Pa;
Wn.prototype.addFeatures=Wn.prototype.ub;Wn.prototype.getFeatureById=Wn.prototype.Uf;Wn.prototype.getFeatures=Wn.prototype.bd;Wn.prototype.getFormat=Wn.prototype.Eh;Wn.prototype.removeFeature=Wn.prototype.Ja;r("ol.source.WMTS",zp);r("ol.source.XYZ",np);r("ol.source.Cluster",op);ng.prototype.getSource=ng.prototype.da;ng.prototype.getProperties=ng.prototype.Fa;ng.prototype.setSource=ng.prototype.Se;ng.prototype.un=ng.prototype.fa;jg.prototype.getVisible=jg.prototype.g;jg.prototype.setVisible=jg.prototype.C;
jg.prototype.on=jg.prototype.u;jg.prototype.once=jg.prototype.once;r("ol.layer.Tile",Zo);r("ol.layer.Vector",Sn);Sn.prototype.set=Sn.prototype.set;Sn.prototype.setStyle=Sn.prototype.s;r("ol.layer.Group",lg);r("ol.Feature",I);I.prototype.getGeometry=I.prototype.R;I.prototype.getGeometryName=I.prototype.Vf;I.prototype.getId=I.prototype.Ug;I.prototype.getProperties=I.prototype.Fa;I.prototype.getStyle=I.prototype.Vg;I.prototype.setId=I.prototype.$a;I.prototype.setProperties=I.prototype.oa;
I.prototype.setStyle=I.prototype.ce;I.prototype.setGeometry=I.prototype.xa;I.prototype.setGeometryName=I.prototype.pb;I.prototype.on=I.prototype.u;I.prototype.unset=I.prototype.vi;r("ol.Collection",Ac);Ac.prototype.getArray=Ac.prototype.Tf;Ac.prototype.getLength=Ac.prototype.Wa;Ac.prototype.item=Ac.prototype.be;Ac.prototype.on=Ac.prototype.u;r("ol.format.EsriJSON",li);li.prototype.readFeatures=li.prototype.Ra;li.prototype.writeFeature=li.prototype.ud;r("ol.format.GeoJSON",ui);
ui.prototype.readFeature=ui.prototype.ec;ui.prototype.readFeatures=ui.prototype.Ra;ui.prototype.writeFeatureObject=ui.prototype.sb;ui.prototype.writeFeaturesObject=ui.prototype.vd;r("ol.format.TopoJSON",Il);Il.prototype.readFeatures=Il.prototype.Ra;r("ol.format.WKT",Xl);Xl.prototype.readFeature=Xl.prototype.ec;Xl.prototype.readFeatures=Xl.prototype.Ra;r("ol.format.WFS",Ol);Ol.prototype.readFeatures=Ol.prototype.Ra;Ol.prototype.readTransactionResponse=Ol.prototype.g;Ol.prototype.writeTransaction=Ol.prototype.i;
r("ol.geom.Circle",Xm);Xm.prototype.clone=Xm.prototype.clone;Xm.prototype.getCenter=Xm.prototype.ha;Xm.prototype.getRadius=Xm.prototype.Zc;Xm.prototype.getType=Xm.prototype.H;r("ol.geom.Geometry",re);re.prototype.getExtent=re.prototype.J;re.prototype.on=re.prototype.u;re.prototype.transform=re.prototype.C;r("ol.geom.GeometryCollection",qi);qi.prototype.getType=qi.prototype.H;r("ol.geom.LineString",S);S.prototype.appendCoordinate=S.prototype.Lf;S.prototype.clone=S.prototype.clone;
S.prototype.getCoordinateAt=S.prototype.Rd;S.prototype.getCoordinateAtM=S.prototype.ue;S.prototype.getCoordinates=S.prototype.D;S.prototype.getFirstCoordinate=S.prototype.Eb;S.prototype.getLastCoordinate=S.prototype.$f;S.prototype.getLength=S.prototype.mh;S.prototype.getType=S.prototype.H;S.prototype.setCoordinates=S.prototype.Y;Ke.prototype.getCoordinates=Ke.prototype.D;r("ol.geom.MultiLineString",ci);ci.prototype.clone=ci.prototype.clone;S.prototype.getCoordinateAtM=S.prototype.ue;
ci.prototype.getCoordinates=ci.prototype.D;ci.prototype.getFirstCoordinate=ci.prototype.Eb;ci.prototype.getLineStrings=ci.prototype.hb;ci.prototype.getType=ci.prototype.H;ci.prototype.setCoordinates=ci.prototype.Y;r("ol.geom.MultiPoint",fi);fi.prototype.clone=fi.prototype.clone;fi.prototype.getCoordinates=fi.prototype.D;fi.prototype.getFirstCoordinate=fi.prototype.Eb;fi.prototype.getType=fi.prototype.H;fi.prototype.setCoordinates=fi.prototype.Y;r("ol.geom.MultiPolygon",hi);hi.prototype.clone=hi.prototype.clone;
hi.prototype.getCoordinates=hi.prototype.D;hi.prototype.getArea=hi.prototype.nh;hi.prototype.getFirstCoordinate=hi.prototype.Eb;hi.prototype.getInteriorPoints=hi.prototype.Zf;hi.prototype.getType=hi.prototype.H;hi.prototype.setCoordinates=hi.prototype.Y;r("ol.geom.Point",Me);Me.prototype.clone=Me.prototype.clone;Me.prototype.getCoordinates=Me.prototype.D;Me.prototype.getType=Me.prototype.H;Me.prototype.setCoordinates=Me.prototype.Y;r("ol.geom.Polygon",B);B.prototype.clone=B.prototype.clone;
B.prototype.getArea=B.prototype.oh;B.prototype.getCoordinates=B.prototype.D;B.prototype.getFirstCoordinate=B.prototype.Eb;B.prototype.getInteriorPoint=B.prototype.Yf;B.prototype.getLinearRing=B.prototype.Vd;B.prototype.getType=B.prototype.H;B.prototype.setCoordinates=B.prototype.Y;r("ol.Sphere",fb);fb.prototype.geodesicArea=fb.prototype.f;fb.prototype.haversineDistance=fb.prototype.b;r("ol.loadingstrategy.all",Tn);r("ol.loadingstrategy.bbox",function(a){return[a]});
r("ol.loadingstrategy.tile",function(a){return function(b,c){var d=Zb(a,c),e=Vb(a,b,d),f=[],d=[d,0,0];for(d[1]=e.M;d[1]<=e.O;++d[1])for(d[2]=e.P;d[2]<=e.S;++d[2])f.push(Yb(a,d));return f}});
  return OPENLAYERS.ol;
}));


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],28:[function(require,module,exports){
var mgrs = require('mgrs');

function Point(x, y, z) {
  if (!(this instanceof Point)) {
    return new Point(x, y, z);
  }
  if (Array.isArray(x)) {
    this.x = x[0];
    this.y = x[1];
    this.z = x[2] || 0.0;
  }else if(typeof x === 'object'){
    this.x = x.x;
    this.y = x.y;
    this.z = x.z || 0.0;
  } else if (typeof x === 'string' && typeof y === 'undefined') {
    var coords = x.split(',');
    this.x = parseFloat(coords[0], 10);
    this.y = parseFloat(coords[1], 10);
    this.z = parseFloat(coords[2], 10) || 0.0;
  }
  else {
    this.x = x;
    this.y = y;
    this.z = z || 0.0;
  }
  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');
}

Point.fromMGRS = function(mgrsStr) {
  return new Point(mgrs.toPoint(mgrsStr));
};
Point.prototype.toMGRS = function(accuracy) {
  return mgrs.forward([this.x, this.y], accuracy);
};
module.exports = Point;
},{"mgrs":95}],29:[function(require,module,exports){
var parseCode = require("./parseCode");
var extend = require('./extend');
var projections = require('./projections');
var deriveConstants = require('./deriveConstants');

function Projection(srsCode,callback) {
  if (!(this instanceof Projection)) {
    return new Projection(srsCode);
  }
  callback = callback || function(error){
    if(error){
      throw error;
    }
  };
  var json = parseCode(srsCode);
  if(typeof json !== 'object'){
    callback(srsCode);
    return;
  }
  var modifiedJSON = deriveConstants(json);
  var ourProj = Projection.projections.get(modifiedJSON.projName);
  if(ourProj){
    extend(this, modifiedJSON);
    extend(this, ourProj);
    this.init();
    callback(null, this);
  }else{
    callback(srsCode);
  }
}
Projection.projections = projections;
Projection.projections.start();
module.exports = Projection;

},{"./deriveConstants":60,"./extend":61,"./parseCode":65,"./projections":67}],30:[function(require,module,exports){
module.exports = function(crs, denorm, point) {
  var xin = point.x,
    yin = point.y,
    zin = point.z || 0.0;
  var v, t, i;
  for (i = 0; i < 3; i++) {
    if (denorm && i === 2 && point.z === undefined) {
      continue;
    }
    if (i === 0) {
      v = xin;
      t = 'x';
    }
    else if (i === 1) {
      v = yin;
      t = 'y';
    }
    else {
      v = zin;
      t = 'z';
    }
    switch (crs.axis[i]) {
    case 'e':
      point[t] = v;
      break;
    case 'w':
      point[t] = -v;
      break;
    case 'n':
      point[t] = v;
      break;
    case 's':
      point[t] = -v;
      break;
    case 'u':
      if (point[t] !== undefined) {
        point.z = v;
      }
      break;
    case 'd':
      if (point[t] !== undefined) {
        point.z = -v;
      }
      break;
    default:
      //console.log("ERROR: unknow axis ("+crs.axis[i]+") - check definition of "+crs.projName);
      return null;
    }
  }
  return point;
};

},{}],31:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var sign = require('./sign');

module.exports = function(x) {
  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));
};
},{"./sign":48}],32:[function(require,module,exports){
var TWO_PI = Math.PI * 2;
// SPI is slightly greater than Math.PI, so values that exceed the -180..180
// degree range by a tiny amount don't get wrapped. This prevents points that
// have drifted from their original location along the 180th meridian (due to
// floating point error) from changing their sign.
var SPI = 3.14159265359;
var sign = require('./sign');

module.exports = function(x) {
  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));
};
},{"./sign":48}],33:[function(require,module,exports){
module.exports = function(x) {
  if (Math.abs(x) > 1) {
    x = (x > 1) ? 1 : -1;
  }
  return Math.asin(x);
};
},{}],34:[function(require,module,exports){
module.exports = function(x) {
  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));
};
},{}],35:[function(require,module,exports){
module.exports = function(x) {
  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));
};
},{}],36:[function(require,module,exports){
module.exports = function(x) {
  return (0.05859375 * x * x * (1 + 0.75 * x));
};
},{}],37:[function(require,module,exports){
module.exports = function(x) {
  return (x * x * x * (35 / 3072));
};
},{}],38:[function(require,module,exports){
module.exports = function(a, e, sinphi) {
  var temp = e * sinphi;
  return a / Math.sqrt(1 - temp * temp);
};
},{}],39:[function(require,module,exports){
module.exports = function(ml, e0, e1, e2, e3) {
  var phi;
  var dphi;

  phi = ml / e0;
  for (var i = 0; i < 15; i++) {
    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));
    phi += dphi;
    if (Math.abs(dphi) <= 0.0000000001) {
      return phi;
    }
  }

  //..reportError("IMLFN-CONV:Latitude failed to converge after 15 iterations");
  return NaN;
};
},{}],40:[function(require,module,exports){
var HALF_PI = Math.PI/2;

module.exports = function(eccent, q) {
  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));
  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {
    if (q < 0) {
      return (-1 * HALF_PI);
    }
    else {
      return HALF_PI;
    }
  }
  //var phi = 0.5* q/(1-eccent*eccent);
  var phi = Math.asin(0.5 * q);
  var dphi;
  var sin_phi;
  var cos_phi;
  var con;
  for (var i = 0; i < 30; i++) {
    sin_phi = Math.sin(phi);
    cos_phi = Math.cos(phi);
    con = eccent * sin_phi;
    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));
    phi += dphi;
    if (Math.abs(dphi) <= 0.0000000001) {
      return phi;
    }
  }

  //console.log("IQSFN-CONV:Latitude failed to converge after 30 iterations");
  return NaN;
};
},{}],41:[function(require,module,exports){
module.exports = function(e0, e1, e2, e3, phi) {
  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));
};
},{}],42:[function(require,module,exports){
module.exports = function(eccent, sinphi, cosphi) {
  var con = eccent * sinphi;
  return cosphi / (Math.sqrt(1 - con * con));
};
},{}],43:[function(require,module,exports){
var HALF_PI = Math.PI/2;
module.exports = function(eccent, ts) {
  var eccnth = 0.5 * eccent;
  var con, dphi;
  var phi = HALF_PI - 2 * Math.atan(ts);
  for (var i = 0; i <= 15; i++) {
    con = eccent * Math.sin(phi);
    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;
    phi += dphi;
    if (Math.abs(dphi) <= 0.0000000001) {
      return phi;
    }
  }
  //console.log("phi2z has NoConvergence");
  return -9999;
};
},{}],44:[function(require,module,exports){
var C00 = 1;
var C02 = 0.25;
var C04 = 0.046875;
var C06 = 0.01953125;
var C08 = 0.01068115234375;
var C22 = 0.75;
var C44 = 0.46875;
var C46 = 0.01302083333333333333;
var C48 = 0.00712076822916666666;
var C66 = 0.36458333333333333333;
var C68 = 0.00569661458333333333;
var C88 = 0.3076171875;

module.exports = function(es) {
  var en = [];
  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));
  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));
  var t = es * es;
  en[2] = t * (C44 - es * (C46 + es * C48));
  t *= es;
  en[3] = t * (C66 - es * C68);
  en[4] = t * es * C88;
  return en;
};
},{}],45:[function(require,module,exports){
var pj_mlfn = require("./pj_mlfn");
var EPSLN = 1.0e-10;
var MAX_ITER = 20;
module.exports = function(arg, es, en) {
  var k = 1 / (1 - es);
  var phi = arg;
  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */
    var s = Math.sin(phi);
    var t = 1 - es * s * s;
    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;
    //phi -= t * (t * Math.sqrt(t)) * k;
    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;
    phi -= t;
    if (Math.abs(t) < EPSLN) {
      return phi;
    }
  }
  //..reportError("cass:pj_inv_mlfn: Convergence error");
  return phi;
};
},{"./pj_mlfn":46}],46:[function(require,module,exports){
module.exports = function(phi, sphi, cphi, en) {
  cphi *= sphi;
  sphi *= sphi;
  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));
};
},{}],47:[function(require,module,exports){
module.exports = function(eccent, sinphi) {
  var con;
  if (eccent > 1.0e-7) {
    con = eccent * sinphi;
    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));
  }
  else {
    return (2 * sinphi);
  }
};
},{}],48:[function(require,module,exports){
module.exports = function(x) {
  return x<0 ? -1 : 1;
};
},{}],49:[function(require,module,exports){
module.exports = function(esinp, exp) {
  return (Math.pow((1 - esinp) / (1 + esinp), exp));
};
},{}],50:[function(require,module,exports){
module.exports = function (array){
  var out = {
    x: array[0],
    y: array[1]
  };
  if (array.length>2) {
    out.z = array[2];
  }
  if (array.length>3) {
    out.m = array[3];
  }
  return out;
};
},{}],51:[function(require,module,exports){
var HALF_PI = Math.PI/2;

module.exports = function(eccent, phi, sinphi) {
  var con = eccent * sinphi;
  var com = 0.5 * eccent;
  con = Math.pow(((1 - con) / (1 + con)), com);
  return (Math.tan(0.5 * (HALF_PI - phi)) / con);
};
},{}],52:[function(require,module,exports){
exports.wgs84 = {
  towgs84: "0,0,0",
  ellipse: "WGS84",
  datumName: "WGS84"
};
exports.ch1903 = {
  towgs84: "674.374,15.056,405.346",
  ellipse: "bessel",
  datumName: "swiss"
};
exports.ggrs87 = {
  towgs84: "-199.87,74.79,246.62",
  ellipse: "GRS80",
  datumName: "Greek_Geodetic_Reference_System_1987"
};
exports.nad83 = {
  towgs84: "0,0,0",
  ellipse: "GRS80",
  datumName: "North_American_Datum_1983"
};
exports.nad27 = {
  nadgrids: "@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",
  ellipse: "clrk66",
  datumName: "North_American_Datum_1927"
};
exports.potsdam = {
  towgs84: "606.0,23.0,413.0",
  ellipse: "bessel",
  datumName: "Potsdam Rauenberg 1950 DHDN"
};
exports.carthage = {
  towgs84: "-263.0,6.0,431.0",
  ellipse: "clark80",
  datumName: "Carthage 1934 Tunisia"
};
exports.hermannskogel = {
  towgs84: "653.0,-212.0,449.0",
  ellipse: "bessel",
  datumName: "Hermannskogel"
};
exports.ire65 = {
  towgs84: "482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",
  ellipse: "mod_airy",
  datumName: "Ireland 1965"
};
exports.rassadiran = {
  towgs84: "-133.63,-157.5,-158.62",
  ellipse: "intl",
  datumName: "Rassadiran"
};
exports.nzgd49 = {
  towgs84: "59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",
  ellipse: "intl",
  datumName: "New Zealand Geodetic Datum 1949"
};
exports.osgb36 = {
  towgs84: "446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",
  ellipse: "airy",
  datumName: "Airy 1830"
};
exports.s_jtsk = {
  towgs84: "589,76,480",
  ellipse: 'bessel',
  datumName: 'S-JTSK (Ferro)'
};
exports.beduaram = {
  towgs84: '-106,-87,188',
  ellipse: 'clrk80',
  datumName: 'Beduaram'
};
exports.gunung_segara = {
  towgs84: '-403,684,41',
  ellipse: 'bessel',
  datumName: 'Gunung Segara Jakarta'
};
exports.rnb72 = {
  towgs84: "106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",
  ellipse: "intl",
  datumName: "Reseau National Belge 1972"
};
},{}],53:[function(require,module,exports){
exports.MERIT = {
  a: 6378137.0,
  rf: 298.257,
  ellipseName: "MERIT 1983"
};
exports.SGS85 = {
  a: 6378136.0,
  rf: 298.257,
  ellipseName: "Soviet Geodetic System 85"
};
exports.GRS80 = {
  a: 6378137.0,
  rf: 298.257222101,
  ellipseName: "GRS 1980(IUGG, 1980)"
};
exports.IAU76 = {
  a: 6378140.0,
  rf: 298.257,
  ellipseName: "IAU 1976"
};
exports.airy = {
  a: 6377563.396,
  b: 6356256.910,
  ellipseName: "Airy 1830"
};
exports.APL4 = {
  a: 6378137,
  rf: 298.25,
  ellipseName: "Appl. Physics. 1965"
};
exports.NWL9D = {
  a: 6378145.0,
  rf: 298.25,
  ellipseName: "Naval Weapons Lab., 1965"
};
exports.mod_airy = {
  a: 6377340.189,
  b: 6356034.446,
  ellipseName: "Modified Airy"
};
exports.andrae = {
  a: 6377104.43,
  rf: 300.0,
  ellipseName: "Andrae 1876 (Den., Iclnd.)"
};
exports.aust_SA = {
  a: 6378160.0,
  rf: 298.25,
  ellipseName: "Australian Natl & S. Amer. 1969"
};
exports.GRS67 = {
  a: 6378160.0,
  rf: 298.2471674270,
  ellipseName: "GRS 67(IUGG 1967)"
};
exports.bessel = {
  a: 6377397.155,
  rf: 299.1528128,
  ellipseName: "Bessel 1841"
};
exports.bess_nam = {
  a: 6377483.865,
  rf: 299.1528128,
  ellipseName: "Bessel 1841 (Namibia)"
};
exports.clrk66 = {
  a: 6378206.4,
  b: 6356583.8,
  ellipseName: "Clarke 1866"
};
exports.clrk80 = {
  a: 6378249.145,
  rf: 293.4663,
  ellipseName: "Clarke 1880 mod."
};
exports.clrk58 = {
  a: 6378293.645208759,
  rf: 294.2606763692654,
  ellipseName: "Clarke 1858"
};
exports.CPM = {
  a: 6375738.7,
  rf: 334.29,
  ellipseName: "Comm. des Poids et Mesures 1799"
};
exports.delmbr = {
  a: 6376428.0,
  rf: 311.5,
  ellipseName: "Delambre 1810 (Belgium)"
};
exports.engelis = {
  a: 6378136.05,
  rf: 298.2566,
  ellipseName: "Engelis 1985"
};
exports.evrst30 = {
  a: 6377276.345,
  rf: 300.8017,
  ellipseName: "Everest 1830"
};
exports.evrst48 = {
  a: 6377304.063,
  rf: 300.8017,
  ellipseName: "Everest 1948"
};
exports.evrst56 = {
  a: 6377301.243,
  rf: 300.8017,
  ellipseName: "Everest 1956"
};
exports.evrst69 = {
  a: 6377295.664,
  rf: 300.8017,
  ellipseName: "Everest 1969"
};
exports.evrstSS = {
  a: 6377298.556,
  rf: 300.8017,
  ellipseName: "Everest (Sabah & Sarawak)"
};
exports.fschr60 = {
  a: 6378166.0,
  rf: 298.3,
  ellipseName: "Fischer (Mercury Datum) 1960"
};
exports.fschr60m = {
  a: 6378155.0,
  rf: 298.3,
  ellipseName: "Fischer 1960"
};
exports.fschr68 = {
  a: 6378150.0,
  rf: 298.3,
  ellipseName: "Fischer 1968"
};
exports.helmert = {
  a: 6378200.0,
  rf: 298.3,
  ellipseName: "Helmert 1906"
};
exports.hough = {
  a: 6378270.0,
  rf: 297.0,
  ellipseName: "Hough"
};
exports.intl = {
  a: 6378388.0,
  rf: 297.0,
  ellipseName: "International 1909 (Hayford)"
};
exports.kaula = {
  a: 6378163.0,
  rf: 298.24,
  ellipseName: "Kaula 1961"
};
exports.lerch = {
  a: 6378139.0,
  rf: 298.257,
  ellipseName: "Lerch 1979"
};
exports.mprts = {
  a: 6397300.0,
  rf: 191.0,
  ellipseName: "Maupertius 1738"
};
exports.new_intl = {
  a: 6378157.5,
  b: 6356772.2,
  ellipseName: "New International 1967"
};
exports.plessis = {
  a: 6376523.0,
  rf: 6355863.0,
  ellipseName: "Plessis 1817 (France)"
};
exports.krass = {
  a: 6378245.0,
  rf: 298.3,
  ellipseName: "Krassovsky, 1942"
};
exports.SEasia = {
  a: 6378155.0,
  b: 6356773.3205,
  ellipseName: "Southeast Asia"
};
exports.walbeck = {
  a: 6376896.0,
  b: 6355834.8467,
  ellipseName: "Walbeck"
};
exports.WGS60 = {
  a: 6378165.0,
  rf: 298.3,
  ellipseName: "WGS 60"
};
exports.WGS66 = {
  a: 6378145.0,
  rf: 298.25,
  ellipseName: "WGS 66"
};
exports.WGS7 = {
  a: 6378135.0,
  rf: 298.26,
  ellipseName: "WGS 72"
};
exports.WGS84 = {
  a: 6378137.0,
  rf: 298.257223563,
  ellipseName: "WGS 84"
};
exports.sphere = {
  a: 6370997.0,
  b: 6370997.0,
  ellipseName: "Normal Sphere (r=6370997)"
};
},{}],54:[function(require,module,exports){
exports.greenwich = 0.0; //"0dE",
exports.lisbon = -9.131906111111; //"9d07'54.862\"W",
exports.paris = 2.337229166667; //"2d20'14.025\"E",
exports.bogota = -74.080916666667; //"74d04'51.3\"W",
exports.madrid = -3.687938888889; //"3d41'16.58\"W",
exports.rome = 12.452333333333; //"12d27'8.4\"E",
exports.bern = 7.439583333333; //"7d26'22.5\"E",
exports.jakarta = 106.807719444444; //"106d48'27.79\"E",
exports.ferro = -17.666666666667; //"17d40'W",
exports.brussels = 4.367975; //"4d22'4.71\"E",
exports.stockholm = 18.058277777778; //"18d3'29.8\"E",
exports.athens = 23.7163375; //"23d42'58.815\"E",
exports.oslo = 10.722916666667; //"10d43'22.5\"E"
},{}],55:[function(require,module,exports){
exports.ft = {to_meter: 0.3048};
exports['us-ft'] = {to_meter: 1200 / 3937};

},{}],56:[function(require,module,exports){
var proj = require('./Proj');
var transform = require('./transform');
var wgs84 = proj('WGS84');

function transformer(from, to, coords) {
  var transformedArray;
  if (Array.isArray(coords)) {
    transformedArray = transform(from, to, coords);
    if (coords.length === 3) {
      return [transformedArray.x, transformedArray.y, transformedArray.z];
    }
    else {
      return [transformedArray.x, transformedArray.y];
    }
  }
  else {
    return transform(from, to, coords);
  }
}

function checkProj(item) {
  if (item instanceof proj) {
    return item;
  }
  if (item.oProj) {
    return item.oProj;
  }
  return proj(item);
}
function proj4(fromProj, toProj, coord) {
  fromProj = checkProj(fromProj);
  var single = false;
  var obj;
  if (typeof toProj === 'undefined') {
    toProj = fromProj;
    fromProj = wgs84;
    single = true;
  }
  else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {
    coord = toProj;
    toProj = fromProj;
    fromProj = wgs84;
    single = true;
  }
  toProj = checkProj(toProj);
  if (coord) {
    return transformer(fromProj, toProj, coord);
  }
  else {
    obj = {
      forward: function(coords) {
        return transformer(fromProj, toProj, coords);
      },
      inverse: function(coords) {
        return transformer(toProj, fromProj, coords);
      }
    };
    if (single) {
      obj.oProj = toProj;
    }
    return obj;
  }
}
module.exports = proj4;
},{"./Proj":29,"./transform":93}],57:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var PJD_3PARAM = 1;
var PJD_7PARAM = 2;
var PJD_GRIDSHIFT = 3;
var PJD_WGS84 = 4; // WGS84 or equivalent
var PJD_NODATUM = 5; // WGS84 or equivalent
var SEC_TO_RAD = 4.84813681109535993589914102357e-6;
var AD_C = 1.0026000;
var COS_67P5 = 0.38268343236508977;
var datum = function(proj) {
  if (!(this instanceof datum)) {
    return new datum(proj);
  }
  this.datum_type = PJD_WGS84; //default setting
  if (!proj) {
    return;
  }
  if (proj.datumCode && proj.datumCode === 'none') {
    this.datum_type = PJD_NODATUM;
  }
  if (proj.datum_params) {
    for (var i = 0; i < proj.datum_params.length; i++) {
      proj.datum_params[i] = parseFloat(proj.datum_params[i]);
    }
    if (proj.datum_params[0] !== 0 || proj.datum_params[1] !== 0 || proj.datum_params[2] !== 0) {
      this.datum_type = PJD_3PARAM;
    }
    if (proj.datum_params.length > 3) {
      if (proj.datum_params[3] !== 0 || proj.datum_params[4] !== 0 || proj.datum_params[5] !== 0 || proj.datum_params[6] !== 0) {
        this.datum_type = PJD_7PARAM;
        proj.datum_params[3] *= SEC_TO_RAD;
        proj.datum_params[4] *= SEC_TO_RAD;
        proj.datum_params[5] *= SEC_TO_RAD;
        proj.datum_params[6] = (proj.datum_params[6] / 1000000.0) + 1.0;
      }
    }
  }
  // DGR 2011-03-21 : nadgrids support
  this.datum_type = proj.grids ? PJD_GRIDSHIFT : this.datum_type;

  this.a = proj.a; //datum object also uses these values
  this.b = proj.b;
  this.es = proj.es;
  this.ep2 = proj.ep2;
  this.datum_params = proj.datum_params;
  if (this.datum_type === PJD_GRIDSHIFT) {
    this.grids = proj.grids;
  }
};
datum.prototype = {


  /****************************************************************/
  // cs_compare_datums()
  //   Returns TRUE if the two datums match, otherwise FALSE.
  compare_datums: function(dest) {
    if (this.datum_type !== dest.datum_type) {
      return false; // false, datums are not equal
    }
    else if (this.a !== dest.a || Math.abs(this.es - dest.es) > 0.000000000050) {
      // the tolerence for es is to ensure that GRS80 and WGS84
      // are considered identical
      return false;
    }
    else if (this.datum_type === PJD_3PARAM) {
      return (this.datum_params[0] === dest.datum_params[0] && this.datum_params[1] === dest.datum_params[1] && this.datum_params[2] === dest.datum_params[2]);
    }
    else if (this.datum_type === PJD_7PARAM) {
      return (this.datum_params[0] === dest.datum_params[0] && this.datum_params[1] === dest.datum_params[1] && this.datum_params[2] === dest.datum_params[2] && this.datum_params[3] === dest.datum_params[3] && this.datum_params[4] === dest.datum_params[4] && this.datum_params[5] === dest.datum_params[5] && this.datum_params[6] === dest.datum_params[6]);
    }
    else if (this.datum_type === PJD_GRIDSHIFT || dest.datum_type === PJD_GRIDSHIFT) {
      //alert("ERROR: Grid shift transformations are not implemented.");
      //return false
      //DGR 2012-07-29 lazy ...
      return this.nadgrids === dest.nadgrids;
    }
    else {
      return true; // datums are equal
    }
  }, // cs_compare_datums()

  /*
   * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates
   * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),
   * according to the current ellipsoid parameters.
   *
   *    Latitude  : Geodetic latitude in radians                     (input)
   *    Longitude : Geodetic longitude in radians                    (input)
   *    Height    : Geodetic height, in meters                       (input)
   *    X         : Calculated Geocentric X coordinate, in meters    (output)
   *    Y         : Calculated Geocentric Y coordinate, in meters    (output)
   *    Z         : Calculated Geocentric Z coordinate, in meters    (output)
   *
   */
  geodetic_to_geocentric: function(p) {
    var Longitude = p.x;
    var Latitude = p.y;
    var Height = p.z ? p.z : 0; //Z value not always supplied
    var X; // output
    var Y;
    var Z;

    var Error_Code = 0; //  GEOCENT_NO_ERROR;
    var Rn; /*  Earth radius at location  */
    var Sin_Lat; /*  Math.sin(Latitude)  */
    var Sin2_Lat; /*  Square of Math.sin(Latitude)  */
    var Cos_Lat; /*  Math.cos(Latitude)  */

    /*
     ** Don't blow up if Latitude is just a little out of the value
     ** range as it may just be a rounding issue.  Also removed longitude
     ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.
     */
    if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {
      Latitude = -HALF_PI;
    }
    else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {
      Latitude = HALF_PI;
    }
    else if ((Latitude < -HALF_PI) || (Latitude > HALF_PI)) {
      /* Latitude out of range */
      //..reportError('geocent:lat out of range:' + Latitude);
      return null;
    }

    if (Longitude > Math.PI) {
      Longitude -= (2 * Math.PI);
    }
    Sin_Lat = Math.sin(Latitude);
    Cos_Lat = Math.cos(Latitude);
    Sin2_Lat = Sin_Lat * Sin_Lat;
    Rn = this.a / (Math.sqrt(1.0e0 - this.es * Sin2_Lat));
    X = (Rn + Height) * Cos_Lat * Math.cos(Longitude);
    Y = (Rn + Height) * Cos_Lat * Math.sin(Longitude);
    Z = ((Rn * (1 - this.es)) + Height) * Sin_Lat;

    p.x = X;
    p.y = Y;
    p.z = Z;
    return Error_Code;
  }, // cs_geodetic_to_geocentric()


  geocentric_to_geodetic: function(p) {
    /* local defintions and variables */
    /* end-criterium of loop, accuracy of sin(Latitude) */
    var genau = 1e-12;
    var genau2 = (genau * genau);
    var maxiter = 30;

    var P; /* distance between semi-minor axis and location */
    var RR; /* distance between center and location */
    var CT; /* sin of geocentric latitude */
    var ST; /* cos of geocentric latitude */
    var RX;
    var RK;
    var RN; /* Earth radius at location */
    var CPHI0; /* cos of start or old geodetic latitude in iterations */
    var SPHI0; /* sin of start or old geodetic latitude in iterations */
    var CPHI; /* cos of searched geodetic latitude */
    var SPHI; /* sin of searched geodetic latitude */
    var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */
    var At_Pole; /* indicates location is in polar region */
    var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */

    var X = p.x;
    var Y = p.y;
    var Z = p.z ? p.z : 0.0; //Z value not always supplied
    var Longitude;
    var Latitude;
    var Height;

    At_Pole = false;
    P = Math.sqrt(X * X + Y * Y);
    RR = Math.sqrt(X * X + Y * Y + Z * Z);

    /*      special cases for latitude and longitude */
    if (P / this.a < genau) {

      /*  special case, if P=0. (X=0., Y=0.) */
      At_Pole = true;
      Longitude = 0.0;

      /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis
       *  of ellipsoid (=center of mass), Latitude becomes PI/2 */
      if (RR / this.a < genau) {
        Latitude = HALF_PI;
        Height = -this.b;
        return;
      }
    }
    else {
      /*  ellipsoidal (geodetic) longitude
       *  interval: -PI < Longitude <= +PI */
      Longitude = Math.atan2(Y, X);
    }

    /* --------------------------------------------------------------
     * Following iterative algorithm was developped by
     * "Institut for Erdmessung", University of Hannover, July 1988.
     * Internet: www.ife.uni-hannover.de
     * Iterative computation of CPHI,SPHI and Height.
     * Iteration of CPHI and SPHI to 10**-12 radian resp.
     * 2*10**-7 arcsec.
     * --------------------------------------------------------------
     */
    CT = Z / RR;
    ST = P / RR;
    RX = 1.0 / Math.sqrt(1.0 - this.es * (2.0 - this.es) * ST * ST);
    CPHI0 = ST * (1.0 - this.es) * RX;
    SPHI0 = CT * RX;
    iter = 0;

    /* loop to find sin(Latitude) resp. Latitude
     * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */
    do {
      iter++;
      RN = this.a / Math.sqrt(1.0 - this.es * SPHI0 * SPHI0);

      /*  ellipsoidal (geodetic) height */
      Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - this.es * SPHI0 * SPHI0);

      RK = this.es * RN / (RN + Height);
      RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);
      CPHI = ST * (1.0 - RK) * RX;
      SPHI = CT * RX;
      SDPHI = SPHI * CPHI0 - CPHI * SPHI0;
      CPHI0 = CPHI;
      SPHI0 = SPHI;
    }
    while (SDPHI * SDPHI > genau2 && iter < maxiter);

    /*      ellipsoidal (geodetic) latitude */
    Latitude = Math.atan(SPHI / Math.abs(CPHI));

    p.x = Longitude;
    p.y = Latitude;
    p.z = Height;
    return p;
  }, // cs_geocentric_to_geodetic()

  /** Convert_Geocentric_To_Geodetic
   * The method used here is derived from 'An Improved Algorithm for
   * Geocentric to Geodetic Coordinate Conversion', by Ralph Toms, Feb 1996
   */
  geocentric_to_geodetic_noniter: function(p) {
    var X = p.x;
    var Y = p.y;
    var Z = p.z ? p.z : 0; //Z value not always supplied
    var Longitude;
    var Latitude;
    var Height;

    var W; /* distance from Z axis */
    var W2; /* square of distance from Z axis */
    var T0; /* initial estimate of vertical component */
    var T1; /* corrected estimate of vertical component */
    var S0; /* initial estimate of horizontal component */
    var S1; /* corrected estimate of horizontal component */
    var Sin_B0; /* Math.sin(B0), B0 is estimate of Bowring aux variable */
    var Sin3_B0; /* cube of Math.sin(B0) */
    var Cos_B0; /* Math.cos(B0) */
    var Sin_p1; /* Math.sin(phi1), phi1 is estimated latitude */
    var Cos_p1; /* Math.cos(phi1) */
    var Rn; /* Earth radius at location */
    var Sum; /* numerator of Math.cos(phi1) */
    var At_Pole; /* indicates location is in polar region */

    X = parseFloat(X); // cast from string to float
    Y = parseFloat(Y);
    Z = parseFloat(Z);

    At_Pole = false;
    if (X !== 0.0) {
      Longitude = Math.atan2(Y, X);
    }
    else {
      if (Y > 0) {
        Longitude = HALF_PI;
      }
      else if (Y < 0) {
        Longitude = -HALF_PI;
      }
      else {
        At_Pole = true;
        Longitude = 0.0;
        if (Z > 0.0) { /* north pole */
          Latitude = HALF_PI;
        }
        else if (Z < 0.0) { /* south pole */
          Latitude = -HALF_PI;
        }
        else { /* center of earth */
          Latitude = HALF_PI;
          Height = -this.b;
          return;
        }
      }
    }
    W2 = X * X + Y * Y;
    W = Math.sqrt(W2);
    T0 = Z * AD_C;
    S0 = Math.sqrt(T0 * T0 + W2);
    Sin_B0 = T0 / S0;
    Cos_B0 = W / S0;
    Sin3_B0 = Sin_B0 * Sin_B0 * Sin_B0;
    T1 = Z + this.b * this.ep2 * Sin3_B0;
    Sum = W - this.a * this.es * Cos_B0 * Cos_B0 * Cos_B0;
    S1 = Math.sqrt(T1 * T1 + Sum * Sum);
    Sin_p1 = T1 / S1;
    Cos_p1 = Sum / S1;
    Rn = this.a / Math.sqrt(1.0 - this.es * Sin_p1 * Sin_p1);
    if (Cos_p1 >= COS_67P5) {
      Height = W / Cos_p1 - Rn;
    }
    else if (Cos_p1 <= -COS_67P5) {
      Height = W / -Cos_p1 - Rn;
    }
    else {
      Height = Z / Sin_p1 + Rn * (this.es - 1.0);
    }
    if (At_Pole === false) {
      Latitude = Math.atan(Sin_p1 / Cos_p1);
    }

    p.x = Longitude;
    p.y = Latitude;
    p.z = Height;
    return p;
  }, // geocentric_to_geodetic_noniter()

  /****************************************************************/
  // pj_geocentic_to_wgs84( p )
  //  p = point to transform in geocentric coordinates (x,y,z)
  geocentric_to_wgs84: function(p) {

    if (this.datum_type === PJD_3PARAM) {
      // if( x[io] === HUGE_VAL )
      //    continue;
      p.x += this.datum_params[0];
      p.y += this.datum_params[1];
      p.z += this.datum_params[2];

    }
    else if (this.datum_type === PJD_7PARAM) {
      var Dx_BF = this.datum_params[0];
      var Dy_BF = this.datum_params[1];
      var Dz_BF = this.datum_params[2];
      var Rx_BF = this.datum_params[3];
      var Ry_BF = this.datum_params[4];
      var Rz_BF = this.datum_params[5];
      var M_BF = this.datum_params[6];
      // if( x[io] === HUGE_VAL )
      //    continue;
      var x_out = M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF;
      var y_out = M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF;
      var z_out = M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF;
      p.x = x_out;
      p.y = y_out;
      p.z = z_out;
    }
  }, // cs_geocentric_to_wgs84

  /****************************************************************/
  // pj_geocentic_from_wgs84()
  //  coordinate system definition,
  //  point to transform in geocentric coordinates (x,y,z)
  geocentric_from_wgs84: function(p) {

    if (this.datum_type === PJD_3PARAM) {
      //if( x[io] === HUGE_VAL )
      //    continue;
      p.x -= this.datum_params[0];
      p.y -= this.datum_params[1];
      p.z -= this.datum_params[2];

    }
    else if (this.datum_type === PJD_7PARAM) {
      var Dx_BF = this.datum_params[0];
      var Dy_BF = this.datum_params[1];
      var Dz_BF = this.datum_params[2];
      var Rx_BF = this.datum_params[3];
      var Ry_BF = this.datum_params[4];
      var Rz_BF = this.datum_params[5];
      var M_BF = this.datum_params[6];
      var x_tmp = (p.x - Dx_BF) / M_BF;
      var y_tmp = (p.y - Dy_BF) / M_BF;
      var z_tmp = (p.z - Dz_BF) / M_BF;
      //if( x[io] === HUGE_VAL )
      //    continue;

      p.x = x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp;
      p.y = -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp;
      p.z = Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp;
    } //cs_geocentric_from_wgs84()
  }
};

/** point object, nothing fancy, just allows values to be
    passed back and forth by reference rather than by value.
    Other point classes may be used as long as they have
    x and y properties, which will get modified in the transform method.
*/
module.exports = datum;

},{}],58:[function(require,module,exports){
var PJD_3PARAM = 1;
var PJD_7PARAM = 2;
var PJD_GRIDSHIFT = 3;
var PJD_NODATUM = 5; // WGS84 or equivalent
var SRS_WGS84_SEMIMAJOR = 6378137; // only used in grid shift transforms
var SRS_WGS84_ESQUARED = 0.006694379990141316; //DGR: 2012-07-29
module.exports = function(source, dest, point) {
  var wp, i, l;

  function checkParams(fallback) {
    return (fallback === PJD_3PARAM || fallback === PJD_7PARAM);
  }
  // Short cut if the datums are identical.
  if (source.compare_datums(dest)) {
    return point; // in this case, zero is sucess,
    // whereas cs_compare_datums returns 1 to indicate TRUE
    // confusing, should fix this
  }

  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest
  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {
    return point;
  }

  //DGR: 2012-07-29 : add nadgrids support (begin)
  var src_a = source.a;
  var src_es = source.es;

  var dst_a = dest.a;
  var dst_es = dest.es;

  var fallback = source.datum_type;
  // If this datum requires grid shifts, then apply it to geodetic coordinates.
  if (fallback === PJD_GRIDSHIFT) {
    if (this.apply_gridshift(source, 0, point) === 0) {
      source.a = SRS_WGS84_SEMIMAJOR;
      source.es = SRS_WGS84_ESQUARED;
    }
    else {
      // try 3 or 7 params transformation or nothing ?
      if (!source.datum_params) {
        source.a = src_a;
        source.es = source.es;
        return point;
      }
      wp = 1;
      for (i = 0, l = source.datum_params.length; i < l; i++) {
        wp *= source.datum_params[i];
      }
      if (wp === 0) {
        source.a = src_a;
        source.es = source.es;
        return point;
      }
      if (source.datum_params.length > 3) {
        fallback = PJD_7PARAM;
      }
      else {
        fallback = PJD_3PARAM;
      }
    }
  }
  if (dest.datum_type === PJD_GRIDSHIFT) {
    dest.a = SRS_WGS84_SEMIMAJOR;
    dest.es = SRS_WGS84_ESQUARED;
  }
  // Do we need to go through geocentric coordinates?
  if (source.es !== dest.es || source.a !== dest.a || checkParams(fallback) || checkParams(dest.datum_type)) {
    //DGR: 2012-07-29 : add nadgrids support (end)
    // Convert to geocentric coordinates.
    source.geodetic_to_geocentric(point);
    // CHECK_RETURN;
    // Convert between datums
    if (checkParams(source.datum_type)) {
      source.geocentric_to_wgs84(point);
      // CHECK_RETURN;
    }
    if (checkParams(dest.datum_type)) {
      dest.geocentric_from_wgs84(point);
      // CHECK_RETURN;
    }
    // Convert back to geodetic coordinates
    dest.geocentric_to_geodetic(point);
    // CHECK_RETURN;
  }
  // Apply grid shift to destination if required
  if (dest.datum_type === PJD_GRIDSHIFT) {
    this.apply_gridshift(dest, 1, point);
    // CHECK_RETURN;
  }

  source.a = src_a;
  source.es = src_es;
  dest.a = dst_a;
  dest.es = dst_es;

  return point;
};


},{}],59:[function(require,module,exports){
var globals = require('./global');
var parseProj = require('./projString');
var wkt = require('./wkt');

function defs(name) {
  /*global console*/
  var that = this;
  if (arguments.length === 2) {
    var def = arguments[1];
    if (typeof def === 'string') {
      if (def.charAt(0) === '+') {
        defs[name] = parseProj(arguments[1]);
      }
      else {
        defs[name] = wkt(arguments[1]);
      }
    } else {
      defs[name] = def;
    }
  }
  else if (arguments.length === 1) {
    if (Array.isArray(name)) {
      return name.map(function(v) {
        if (Array.isArray(v)) {
          defs.apply(that, v);
        }
        else {
          defs(v);
        }
      });
    }
    else if (typeof name === 'string') {
      if (name in defs) {
        return defs[name];
      }
    }
    else if ('EPSG' in name) {
      defs['EPSG:' + name.EPSG] = name;
    }
    else if ('ESRI' in name) {
      defs['ESRI:' + name.ESRI] = name;
    }
    else if ('IAU2000' in name) {
      defs['IAU2000:' + name.IAU2000] = name;
    }
    else {
      console.log(name);
    }
    return;
  }


}
globals(defs);
module.exports = defs;

},{"./global":62,"./projString":66,"./wkt":94}],60:[function(require,module,exports){
var Datum = require('./constants/Datum');
var Ellipsoid = require('./constants/Ellipsoid');
var extend = require('./extend');
var datum = require('./datum');
var EPSLN = 1.0e-10;
// ellipoid pj_set_ell.c
var SIXTH = 0.1666666666666666667;
/* 1/6 */
var RA4 = 0.04722222222222222222;
/* 17/360 */
var RA6 = 0.02215608465608465608;
module.exports = function(json) {
  // DGR 2011-03-20 : nagrids -> nadgrids
  if (json.datumCode && json.datumCode !== 'none') {
    var datumDef = Datum[json.datumCode];
    if (datumDef) {
      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;
      json.ellps = datumDef.ellipse;
      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;
    }
  }
  if (!json.a) { // do we have an ellipsoid?
    var ellipse = Ellipsoid[json.ellps] ? Ellipsoid[json.ellps] : Ellipsoid.WGS84;
    extend(json, ellipse);
  }
  if (json.rf && !json.b) {
    json.b = (1.0 - 1.0 / json.rf) * json.a;
  }
  if (json.rf === 0 || Math.abs(json.a - json.b) < EPSLN) {
    json.sphere = true;
    json.b = json.a;
  }
  json.a2 = json.a * json.a; // used in geocentric
  json.b2 = json.b * json.b; // used in geocentric
  json.es = (json.a2 - json.b2) / json.a2; // e ^ 2
  json.e = Math.sqrt(json.es); // eccentricity
  if (json.R_A) {
    json.a *= 1 - json.es * (SIXTH + json.es * (RA4 + json.es * RA6));
    json.a2 = json.a * json.a;
    json.b2 = json.b * json.b;
    json.es = 0;
  }
  json.ep2 = (json.a2 - json.b2) / json.b2; // used in geocentric
  if (!json.k0) {
    json.k0 = 1.0; //default value
  }
  //DGR 2010-11-12: axis
  if (!json.axis) {
    json.axis = "enu";
  }

  if (!json.datum) {
    json.datum = datum(json);
  }
  return json;
};

},{"./constants/Datum":52,"./constants/Ellipsoid":53,"./datum":57,"./extend":61}],61:[function(require,module,exports){
module.exports = function(destination, source) {
  destination = destination || {};
  var value, property;
  if (!source) {
    return destination;
  }
  for (property in source) {
    value = source[property];
    if (value !== undefined) {
      destination[property] = value;
    }
  }
  return destination;
};

},{}],62:[function(require,module,exports){
module.exports = function(defs) {
  defs('EPSG:4326', "+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");
  defs('EPSG:4269', "+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");
  defs('EPSG:3857', "+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");

  defs.WGS84 = defs['EPSG:4326'];
  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857
  defs.GOOGLE = defs['EPSG:3857'];
  defs['EPSG:900913'] = defs['EPSG:3857'];
  defs['EPSG:102113'] = defs['EPSG:3857'];
};

},{}],63:[function(require,module,exports){
var projs = [
  require('./projections/tmerc'),
  require('./projections/utm'),
  require('./projections/sterea'),
  require('./projections/stere'),
  require('./projections/somerc'),
  require('./projections/omerc'),
  require('./projections/lcc'),
  require('./projections/krovak'),
  require('./projections/cass'),
  require('./projections/laea'),
  require('./projections/aea'),
  require('./projections/gnom'),
  require('./projections/cea'),
  require('./projections/eqc'),
  require('./projections/poly'),
  require('./projections/nzmg'),
  require('./projections/mill'),
  require('./projections/sinu'),
  require('./projections/moll'),
  require('./projections/eqdc'),
  require('./projections/vandg'),
  require('./projections/aeqd')
];
module.exports = function(proj4){
  projs.forEach(function(proj){
    proj4.Proj.projections.add(proj);
  });
};
},{"./projections/aea":68,"./projections/aeqd":69,"./projections/cass":70,"./projections/cea":71,"./projections/eqc":72,"./projections/eqdc":73,"./projections/gnom":75,"./projections/krovak":76,"./projections/laea":77,"./projections/lcc":78,"./projections/mill":81,"./projections/moll":82,"./projections/nzmg":83,"./projections/omerc":84,"./projections/poly":85,"./projections/sinu":86,"./projections/somerc":87,"./projections/stere":88,"./projections/sterea":89,"./projections/tmerc":90,"./projections/utm":91,"./projections/vandg":92}],64:[function(require,module,exports){
var proj4 = require('./core');
proj4.defaultDatum = 'WGS84'; //default datum
proj4.Proj = require('./Proj');
proj4.WGS84 = new proj4.Proj('WGS84');
proj4.Point = require('./Point');
proj4.toPoint = require("./common/toPoint");
proj4.defs = require('./defs');
proj4.transform = require('./transform');
proj4.mgrs = require('mgrs');
proj4.version = require('../package.json').version;
require('./includedProjections')(proj4);
module.exports = proj4;
},{"../package.json":96,"./Point":28,"./Proj":29,"./common/toPoint":50,"./core":56,"./defs":59,"./includedProjections":63,"./transform":93,"mgrs":95}],65:[function(require,module,exports){
var defs = require('./defs');
var wkt = require('./wkt');
var projStr = require('./projString');
function testObj(code){
  return typeof code === 'string';
}
function testDef(code){
  return code in defs;
}
function testWKT(code){
  var codeWords = ['GEOGCS','GEOCCS','PROJCS','LOCAL_CS'];
  return codeWords.reduce(function(a,b){
    return a+1+code.indexOf(b);
  },0);
}
function testProj(code){
  return code[0] === '+';
}
function parse(code){
  if (testObj(code)) {
    //check to see if this is a WKT string
    if (testDef(code)) {
      return defs[code];
    }
    else if (testWKT(code)) {
      return wkt(code);
    }
    else if (testProj(code)) {
      return projStr(code);
    }
  }else{
    return code;
  }
}

module.exports = parse;
},{"./defs":59,"./projString":66,"./wkt":94}],66:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var PrimeMeridian = require('./constants/PrimeMeridian');
var units = require('./constants/units');

module.exports = function(defData) {
  var self = {};
  var paramObj = {};
  defData.split("+").map(function(v) {
    return v.trim();
  }).filter(function(a) {
    return a;
  }).forEach(function(a) {
    var split = a.split("=");
    split.push(true);
    paramObj[split[0].toLowerCase()] = split[1];
  });
  var paramName, paramVal, paramOutname;
  var params = {
    proj: 'projName',
    datum: 'datumCode',
    rf: function(v) {
      self.rf = parseFloat(v);
    },
    lat_0: function(v) {
      self.lat0 = v * D2R;
    },
    lat_1: function(v) {
      self.lat1 = v * D2R;
    },
    lat_2: function(v) {
      self.lat2 = v * D2R;
    },
    lat_ts: function(v) {
      self.lat_ts = v * D2R;
    },
    lon_0: function(v) {
      self.long0 = v * D2R;
    },
    lon_1: function(v) {
      self.long1 = v * D2R;
    },
    lon_2: function(v) {
      self.long2 = v * D2R;
    },
    alpha: function(v) {
      self.alpha = parseFloat(v) * D2R;
    },
    lonc: function(v) {
      self.longc = v * D2R;
    },
    x_0: function(v) {
      self.x0 = parseFloat(v);
    },
    y_0: function(v) {
      self.y0 = parseFloat(v);
    },
    k_0: function(v) {
      self.k0 = parseFloat(v);
    },
    k: function(v) {
      self.k0 = parseFloat(v);
    },
    a: function(v) {
      self.a = parseFloat(v);
    },
    b: function(v) {
      self.b = parseFloat(v);
    },
    r_a: function() {
      self.R_A = true;
    },
    zone: function(v) {
      self.zone = parseInt(v, 10);
    },
    south: function() {
      self.utmSouth = true;
    },
    towgs84: function(v) {
      self.datum_params = v.split(",").map(function(a) {
        return parseFloat(a);
      });
    },
    to_meter: function(v) {
      self.to_meter = parseFloat(v);
    },
    units: function(v) {
      self.units = v;
      if (units[v]) {
        self.to_meter = units[v].to_meter;
      }
    },
    from_greenwich: function(v) {
      self.from_greenwich = v * D2R;
    },
    pm: function(v) {
      self.from_greenwich = (PrimeMeridian[v] ? PrimeMeridian[v] : parseFloat(v)) * D2R;
    },
    nadgrids: function(v) {
      if (v === '@null') {
        self.datumCode = 'none';
      }
      else {
        self.nadgrids = v;
      }
    },
    axis: function(v) {
      var legalAxis = "ewnsud";
      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {
        self.axis = v;
      }
    }
  };
  for (paramName in paramObj) {
    paramVal = paramObj[paramName];
    if (paramName in params) {
      paramOutname = params[paramName];
      if (typeof paramOutname === 'function') {
        paramOutname(paramVal);
      }
      else {
        self[paramOutname] = paramVal;
      }
    }
    else {
      self[paramName] = paramVal;
    }
  }
  if(typeof self.datumCode === 'string' && self.datumCode !== "WGS84"){
    self.datumCode = self.datumCode.toLowerCase();
  }
  return self;
};

},{"./constants/PrimeMeridian":54,"./constants/units":55}],67:[function(require,module,exports){
var projs = [
  require('./projections/merc'),
  require('./projections/longlat')
];
var names = {};
var projStore = [];

function add(proj, i) {
  var len = projStore.length;
  if (!proj.names) {
    console.log(i);
    return true;
  }
  projStore[len] = proj;
  proj.names.forEach(function(n) {
    names[n.toLowerCase()] = len;
  });
  return this;
}

exports.add = add;

exports.get = function(name) {
  if (!name) {
    return false;
  }
  var n = name.toLowerCase();
  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {
    return projStore[names[n]];
  }
};
exports.start = function() {
  projs.forEach(add);
};

},{"./projections/longlat":79,"./projections/merc":80}],68:[function(require,module,exports){
var EPSLN = 1.0e-10;
var msfnz = require('../common/msfnz');
var qsfnz = require('../common/qsfnz');
var adjust_lon = require('../common/adjust_lon');
var asinz = require('../common/asinz');
exports.init = function() {

  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {
    return;
  }
  this.temp = this.b / this.a;
  this.es = 1 - Math.pow(this.temp, 2);
  this.e3 = Math.sqrt(this.es);

  this.sin_po = Math.sin(this.lat1);
  this.cos_po = Math.cos(this.lat1);
  this.t1 = this.sin_po;
  this.con = this.sin_po;
  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);
  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);

  this.sin_po = Math.sin(this.lat2);
  this.cos_po = Math.cos(this.lat2);
  this.t2 = this.sin_po;
  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);
  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);

  this.sin_po = Math.sin(this.lat0);
  this.cos_po = Math.cos(this.lat0);
  this.t3 = this.sin_po;
  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);

  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {
    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);
  }
  else {
    this.ns0 = this.con;
  }
  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;
  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;
};

/* Albers Conical Equal Area forward equations--mapping lat,long to x,y
  -------------------------------------------------------------------*/
exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  this.sin_phi = Math.sin(lat);
  this.cos_phi = Math.cos(lat);

  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);
  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;
  var theta = this.ns0 * adjust_lon(lon - this.long0);
  var x = rh1 * Math.sin(theta) + this.x0;
  var y = this.rh - rh1 * Math.cos(theta) + this.y0;

  p.x = x;
  p.y = y;
  return p;
};


exports.inverse = function(p) {
  var rh1, qs, con, theta, lon, lat;

  p.x -= this.x0;
  p.y = this.rh - p.y + this.y0;
  if (this.ns0 >= 0) {
    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);
    con = 1;
  }
  else {
    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);
    con = -1;
  }
  theta = 0;
  if (rh1 !== 0) {
    theta = Math.atan2(con * p.x, con * p.y);
  }
  con = rh1 * this.ns0 / this.a;
  if (this.sphere) {
    lat = Math.asin((this.c - con * con) / (2 * this.ns0));
  }
  else {
    qs = (this.c - con * con) / this.ns0;
    lat = this.phi1z(this.e3, qs);
  }

  lon = adjust_lon(theta / this.ns0 + this.long0);
  p.x = lon;
  p.y = lat;
  return p;
};

/* Function to compute phi1, the latitude for the inverse of the
   Albers Conical Equal-Area projection.
-------------------------------------------*/
exports.phi1z = function(eccent, qs) {
  var sinphi, cosphi, con, com, dphi;
  var phi = asinz(0.5 * qs);
  if (eccent < EPSLN) {
    return phi;
  }

  var eccnts = eccent * eccent;
  for (var i = 1; i <= 25; i++) {
    sinphi = Math.sin(phi);
    cosphi = Math.cos(phi);
    con = eccent * sinphi;
    com = 1 - con * con;
    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));
    phi = phi + dphi;
    if (Math.abs(dphi) <= 1e-7) {
      return phi;
    }
  }
  return null;
};
exports.names = ["Albers_Conic_Equal_Area", "Albers", "aea"];

},{"../common/adjust_lon":32,"../common/asinz":33,"../common/msfnz":42,"../common/qsfnz":47}],69:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var mlfn = require('../common/mlfn');
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var gN = require('../common/gN');
var asinz = require('../common/asinz');
var imlfn = require('../common/imlfn');
exports.init = function() {
  this.sin_p12 = Math.sin(this.lat0);
  this.cos_p12 = Math.cos(this.lat0);
};

exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var sinphi = Math.sin(p.y);
  var cosphi = Math.cos(p.y);
  var dlon = adjust_lon(lon - this.long0);
  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;
  if (this.sphere) {
    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {
      //North Pole case
      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);
      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);
      return p;
    }
    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {
      //South Pole case
      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);
      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);
      return p;
    }
    else {
      //default case
      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);
      c = Math.acos(cos_c);
      kp = c / Math.sin(c);
      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);
      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));
      return p;
    }
  }
  else {
    e0 = e0fn(this.es);
    e1 = e1fn(this.es);
    e2 = e2fn(this.es);
    e3 = e3fn(this.es);
    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {
      //North Pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      Ml = this.a * mlfn(e0, e1, e2, e3, lat);
      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);
      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);
      return p;
    }
    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {
      //South Pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      Ml = this.a * mlfn(e0, e1, e2, e3, lat);
      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);
      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);
      return p;
    }
    else {
      //Default case
      tanphi = sinphi / cosphi;
      Nl1 = gN(this.a, this.e, this.sin_p12);
      Nl = gN(this.a, this.e, sinphi);
      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));
      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));
      if (Az === 0) {
        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));
      }
      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {
        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));
      }
      else {
        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));
      }
      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);
      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);
      GH = G * H;
      Hs = H * H;
      s2 = s * s;
      s3 = s2 * s;
      s4 = s3 * s;
      s5 = s4 * s;
      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);
      p.x = this.x0 + c * Math.sin(Az);
      p.y = this.y0 + c * Math.cos(Az);
      return p;
    }
  }


};

exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;
  if (this.sphere) {
    rh = Math.sqrt(p.x * p.x + p.y * p.y);
    if (rh > (2 * HALF_PI * this.a)) {
      return;
    }
    z = rh / this.a;

    sinz = Math.sin(z);
    cosz = Math.cos(z);

    lon = this.long0;
    if (Math.abs(rh) <= EPSLN) {
      lat = this.lat0;
    }
    else {
      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);
      con = Math.abs(this.lat0) - HALF_PI;
      if (Math.abs(con) <= EPSLN) {
        if (this.lat0 >= 0) {
          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));
        }
        else {
          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));
        }
      }
      else {
        /*con = cosz - this.sin_p12 * Math.sin(lat);
        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {
          //no-op, just keep the lon value as is
        } else {
          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));
          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));
        }*/
        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));
      }
    }

    p.x = lon;
    p.y = lat;
    return p;
  }
  else {
    e0 = e0fn(this.es);
    e1 = e1fn(this.es);
    e2 = e2fn(this.es);
    e3 = e3fn(this.es);
    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {
      //North pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      rh = Math.sqrt(p.x * p.x + p.y * p.y);
      M = Mlp - rh;
      lat = imlfn(M / this.a, e0, e1, e2, e3);
      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));
      p.x = lon;
      p.y = lat;
      return p;
    }
    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {
      //South pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      rh = Math.sqrt(p.x * p.x + p.y * p.y);
      M = rh - Mlp;

      lat = imlfn(M / this.a, e0, e1, e2, e3);
      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));
      p.x = lon;
      p.y = lat;
      return p;
    }
    else {
      //default case
      rh = Math.sqrt(p.x * p.x + p.y * p.y);
      Az = Math.atan2(p.x, p.y);
      N1 = gN(this.a, this.e, this.sin_p12);
      cosAz = Math.cos(Az);
      tmp = this.e * this.cos_p12 * cosAz;
      A = -tmp * tmp / (1 - this.es);
      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);
      D = rh / N1;
      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;
      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;
      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);
      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));
      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));
      p.x = lon;
      p.y = lat;
      return p;
    }
  }

};
exports.names = ["Azimuthal_Equidistant", "aeqd"];

},{"../common/adjust_lon":32,"../common/asinz":33,"../common/e0fn":34,"../common/e1fn":35,"../common/e2fn":36,"../common/e3fn":37,"../common/gN":38,"../common/imlfn":39,"../common/mlfn":41}],70:[function(require,module,exports){
var mlfn = require('../common/mlfn');
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var gN = require('../common/gN');
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var imlfn = require('../common/imlfn');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
exports.init = function() {
  if (!this.sphere) {
    this.e0 = e0fn(this.es);
    this.e1 = e1fn(this.es);
    this.e2 = e2fn(this.es);
    this.e3 = e3fn(this.es);
    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);
  }
};



/* Cassini forward equations--mapping lat,long to x,y
  -----------------------------------------------------------------------*/
exports.forward = function(p) {

  /* Forward equations
      -----------------*/
  var x, y;
  var lam = p.x;
  var phi = p.y;
  lam = adjust_lon(lam - this.long0);

  if (this.sphere) {
    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));
    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);
  }
  else {
    //ellipsoid
    var sinphi = Math.sin(phi);
    var cosphi = Math.cos(phi);
    var nl = gN(this.a, this.e, sinphi);
    var tl = Math.tan(phi) * Math.tan(phi);
    var al = lam * Math.cos(phi);
    var asq = al * al;
    var cl = this.es * cosphi * cosphi / (1 - this.es);
    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);

    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));
    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);


  }

  p.x = x + this.x0;
  p.y = y + this.y0;
  return p;
};

/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var x = p.x / this.a;
  var y = p.y / this.a;
  var phi, lam;

  if (this.sphere) {
    var dd = y + this.lat0;
    phi = Math.asin(Math.sin(dd) * Math.cos(x));
    lam = Math.atan2(Math.tan(x), Math.cos(dd));
  }
  else {
    /* ellipsoid */
    var ml1 = this.ml0 / this.a + y;
    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);
    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {
      p.x = this.long0;
      p.y = HALF_PI;
      if (y < 0) {
        p.y *= -1;
      }
      return p;
    }
    var nl1 = gN(this.a, this.e, Math.sin(phi1));

    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);
    var tl1 = Math.pow(Math.tan(phi1), 2);
    var dl = x * this.a / nl1;
    var dsq = dl * dl;
    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);
    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);

  }

  p.x = adjust_lon(lam + this.long0);
  p.y = adjust_lat(phi);
  return p;

};
exports.names = ["Cassini", "Cassini_Soldner", "cass"];
},{"../common/adjust_lat":31,"../common/adjust_lon":32,"../common/e0fn":34,"../common/e1fn":35,"../common/e2fn":36,"../common/e3fn":37,"../common/gN":38,"../common/imlfn":39,"../common/mlfn":41}],71:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var qsfnz = require('../common/qsfnz');
var msfnz = require('../common/msfnz');
var iqsfnz = require('../common/iqsfnz');
/*
  reference:  
    "Cartographic Projection Procedures for the UNIX Environment-
    A User's Manual" by Gerald I. Evenden,
    USGS Open File Report 90-284and Release 4 Interim Reports (2003)
*/
exports.init = function() {
  //no-op
  if (!this.sphere) {
    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));
  }
};


/* Cylindrical Equal Area forward equations--mapping lat,long to x,y
    ------------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var x, y;
  /* Forward equations
      -----------------*/
  var dlon = adjust_lon(lon - this.long0);
  if (this.sphere) {
    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);
    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);
  }
  else {
    var qs = qsfnz(this.e, Math.sin(lat));
    x = this.x0 + this.a * this.k0 * dlon;
    y = this.y0 + this.a * qs * 0.5 / this.k0;
  }

  p.x = x;
  p.y = y;
  return p;
};

/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long
    ------------------------------------------------------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var lon, lat;

  if (this.sphere) {
    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));
    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));
  }
  else {
    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);
    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["cea"];

},{"../common/adjust_lon":32,"../common/iqsfnz":40,"../common/msfnz":42,"../common/qsfnz":47}],72:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
exports.init = function() {

  this.x0 = this.x0 || 0;
  this.y0 = this.y0 || 0;
  this.lat0 = this.lat0 || 0;
  this.long0 = this.long0 || 0;
  this.lat_ts = this.lat_ts || 0;
  this.title = this.title || "Equidistant Cylindrical (Plate Carre)";

  this.rc = Math.cos(this.lat_ts);
};


// forward equations--mapping lat,long to x,y
// -----------------------------------------------------------------
exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  var dlon = adjust_lon(lon - this.long0);
  var dlat = adjust_lat(lat - this.lat0);
  p.x = this.x0 + (this.a * dlon * this.rc);
  p.y = this.y0 + (this.a * dlat);
  return p;
};

// inverse equations--mapping x,y to lat/long
// -----------------------------------------------------------------
exports.inverse = function(p) {

  var x = p.x;
  var y = p.y;

  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));
  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));
  return p;
};
exports.names = ["Equirectangular", "Equidistant_Cylindrical", "eqc"];

},{"../common/adjust_lat":31,"../common/adjust_lon":32}],73:[function(require,module,exports){
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var msfnz = require('../common/msfnz');
var mlfn = require('../common/mlfn');
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var imlfn = require('../common/imlfn');
var EPSLN = 1.0e-10;
exports.init = function() {

  /* Place parameters in static storage for common use
      -------------------------------------------------*/
  // Standard Parallels cannot be equal and on opposite sides of the equator
  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {
    return;
  }
  this.lat2 = this.lat2 || this.lat1;
  this.temp = this.b / this.a;
  this.es = 1 - Math.pow(this.temp, 2);
  this.e = Math.sqrt(this.es);
  this.e0 = e0fn(this.es);
  this.e1 = e1fn(this.es);
  this.e2 = e2fn(this.es);
  this.e3 = e3fn(this.es);

  this.sinphi = Math.sin(this.lat1);
  this.cosphi = Math.cos(this.lat1);

  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);
  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);

  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {
    this.ns = this.sinphi;
  }
  else {
    this.sinphi = Math.sin(this.lat2);
    this.cosphi = Math.cos(this.lat2);
    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);
    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);
    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);
  }
  this.g = this.ml1 + this.ms1 / this.ns;
  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);
  this.rh = this.a * (this.g - this.ml0);
};


/* Equidistant Conic forward equations--mapping lat,long to x,y
  -----------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var rh1;

  /* Forward equations
      -----------------*/
  if (this.sphere) {
    rh1 = this.a * (this.g - lat);
  }
  else {
    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);
    rh1 = this.a * (this.g - ml);
  }
  var theta = this.ns * adjust_lon(lon - this.long0);
  var x = this.x0 + rh1 * Math.sin(theta);
  var y = this.y0 + this.rh - rh1 * Math.cos(theta);
  p.x = x;
  p.y = y;
  return p;
};

/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y = this.rh - p.y + this.y0;
  var con, rh1, lat, lon;
  if (this.ns >= 0) {
    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);
    con = 1;
  }
  else {
    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);
    con = -1;
  }
  var theta = 0;
  if (rh1 !== 0) {
    theta = Math.atan2(con * p.x, con * p.y);
  }

  if (this.sphere) {
    lon = adjust_lon(this.long0 + theta / this.ns);
    lat = adjust_lat(this.g - rh1 / this.a);
    p.x = lon;
    p.y = lat;
    return p;
  }
  else {
    var ml = this.g - rh1 / this.a;
    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);
    lon = adjust_lon(this.long0 + theta / this.ns);
    p.x = lon;
    p.y = lat;
    return p;
  }

};
exports.names = ["Equidistant_Conic", "eqdc"];

},{"../common/adjust_lat":31,"../common/adjust_lon":32,"../common/e0fn":34,"../common/e1fn":35,"../common/e2fn":36,"../common/e3fn":37,"../common/imlfn":39,"../common/mlfn":41,"../common/msfnz":42}],74:[function(require,module,exports){
var FORTPI = Math.PI/4;
var srat = require('../common/srat');
var HALF_PI = Math.PI/2;
var MAX_ITER = 20;
exports.init = function() {
  var sphi = Math.sin(this.lat0);
  var cphi = Math.cos(this.lat0);
  cphi *= cphi;
  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);
  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));
  this.phic0 = Math.asin(sphi / this.C);
  this.ratexp = 0.5 * this.C * this.e;
  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));
};

exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;

  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;
  p.x = this.C * lon;
  return p;
};

exports.inverse = function(p) {
  var DEL_TOL = 1e-14;
  var lon = p.x / this.C;
  var lat = p.y;
  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);
  for (var i = MAX_ITER; i > 0; --i) {
    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;
    if (Math.abs(lat - p.y) < DEL_TOL) {
      break;
    }
    p.y = lat;
  }
  /* convergence failed */
  if (!i) {
    return null;
  }
  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["gauss"];

},{"../common/srat":49}],75:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var EPSLN = 1.0e-10;
var asinz = require('../common/asinz');

/*
  reference:
    Wolfram Mathworld "Gnomonic Projection"
    http://mathworld.wolfram.com/GnomonicProjection.html
    Accessed: 12th November 2009
  */
exports.init = function() {

  /* Place parameters in static storage for common use
      -------------------------------------------------*/
  this.sin_p14 = Math.sin(this.lat0);
  this.cos_p14 = Math.cos(this.lat0);
  // Approximation for projecting points to the horizon (infinity)
  this.infinity_dist = 1000 * this.a;
  this.rc = 1;
};


/* Gnomonic forward equations--mapping lat,long to x,y
    ---------------------------------------------------*/
exports.forward = function(p) {
  var sinphi, cosphi; /* sin and cos value        */
  var dlon; /* delta longitude value      */
  var coslon; /* cos of longitude        */
  var ksp; /* scale factor          */
  var g;
  var x, y;
  var lon = p.x;
  var lat = p.y;
  /* Forward equations
      -----------------*/
  dlon = adjust_lon(lon - this.long0);

  sinphi = Math.sin(lat);
  cosphi = Math.cos(lat);

  coslon = Math.cos(dlon);
  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;
  ksp = 1;
  if ((g > 0) || (Math.abs(g) <= EPSLN)) {
    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;
    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;
  }
  else {

    // Point is in the opposing hemisphere and is unprojectable
    // We still need to return a reasonable point, so we project 
    // to infinity, on a bearing 
    // equivalent to the northern hemisphere equivalent
    // This is a reasonable approximation for short shapes and lines that 
    // straddle the horizon.

    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);
    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);

  }
  p.x = x;
  p.y = y;
  return p;
};


exports.inverse = function(p) {
  var rh; /* Rho */
  var sinc, cosc;
  var c;
  var lon, lat;

  /* Inverse equations
      -----------------*/
  p.x = (p.x - this.x0) / this.a;
  p.y = (p.y - this.y0) / this.a;

  p.x /= this.k0;
  p.y /= this.k0;

  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {
    c = Math.atan2(rh, this.rc);
    sinc = Math.sin(c);
    cosc = Math.cos(c);

    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);
    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);
    lon = adjust_lon(this.long0 + lon);
  }
  else {
    lat = this.phic0;
    lon = 0;
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["gnom"];

},{"../common/adjust_lon":32,"../common/asinz":33}],76:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
exports.init = function() {
  this.a = 6377397.155;
  this.es = 0.006674372230614;
  this.e = Math.sqrt(this.es);
  if (!this.lat0) {
    this.lat0 = 0.863937979737193;
  }
  if (!this.long0) {
    this.long0 = 0.7417649320975901 - 0.308341501185665;
  }
  /* if scale not set default to 0.9999 */
  if (!this.k0) {
    this.k0 = 0.9999;
  }
  this.s45 = 0.785398163397448; /* 45 */
  this.s90 = 2 * this.s45;
  this.fi0 = this.lat0;
  this.e2 = this.es;
  this.e = Math.sqrt(this.e2);
  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));
  this.uq = 1.04216856380474;
  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);
  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);
  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;
  this.k1 = this.k0;
  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));
  this.s0 = 1.37008346281555;
  this.n = Math.sin(this.s0);
  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);
  this.ad = this.s90 - this.uq;
};

/* ellipsoid */
/* calculate xy from lat/lon */
/* Constants, identical to inverse transform function */
exports.forward = function(p) {
  var gfi, u, deltav, s, d, eps, ro;
  var lon = p.x;
  var lat = p.y;
  var delta_lon = adjust_lon(lon - this.long0);
  /* Transformation */
  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));
  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);
  deltav = -delta_lon * this.alfa;
  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));
  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));
  eps = this.n * d;
  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);
  p.y = ro * Math.cos(eps) / 1;
  p.x = ro * Math.sin(eps) / 1;

  if (!this.czech) {
    p.y *= -1;
    p.x *= -1;
  }
  return (p);
};

/* calculate lat/lon from xy */
exports.inverse = function(p) {
  var u, deltav, s, d, eps, ro, fi1;
  var ok;

  /* Transformation */
  /* revert y, x*/
  var tmp = p.x;
  p.x = p.y;
  p.y = tmp;
  if (!this.czech) {
    p.y *= -1;
    p.x *= -1;
  }
  ro = Math.sqrt(p.x * p.x + p.y * p.y);
  eps = Math.atan2(p.y, p.x);
  d = eps / Math.sin(this.s0);
  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);
  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));
  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));
  p.x = this.long0 - deltav / this.alfa;
  fi1 = u;
  ok = 0;
  var iter = 0;
  do {
    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);
    if (Math.abs(fi1 - p.y) < 0.0000000001) {
      ok = 1;
    }
    fi1 = p.y;
    iter += 1;
  } while (ok === 0 && iter < 15);
  if (iter >= 15) {
    return null;
  }

  return (p);
};
exports.names = ["Krovak", "krovak"];

},{"../common/adjust_lon":32}],77:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var FORTPI = Math.PI/4;
var EPSLN = 1.0e-10;
var qsfnz = require('../common/qsfnz');
var adjust_lon = require('../common/adjust_lon');
/*
  reference
    "New Equal-Area Map Projections for Noncircular Regions", John P. Snyder,
    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.
  */

exports.S_POLE = 1;
exports.N_POLE = 2;
exports.EQUIT = 3;
exports.OBLIQ = 4;


/* Initialize the Lambert Azimuthal Equal Area projection
  ------------------------------------------------------*/
exports.init = function() {
  var t = Math.abs(this.lat0);
  if (Math.abs(t - HALF_PI) < EPSLN) {
    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;
  }
  else if (Math.abs(t) < EPSLN) {
    this.mode = this.EQUIT;
  }
  else {
    this.mode = this.OBLIQ;
  }
  if (this.es > 0) {
    var sinphi;

    this.qp = qsfnz(this.e, 1);
    this.mmf = 0.5 / (1 - this.es);
    this.apa = this.authset(this.es);
    switch (this.mode) {
    case this.N_POLE:
      this.dd = 1;
      break;
    case this.S_POLE:
      this.dd = 1;
      break;
    case this.EQUIT:
      this.rq = Math.sqrt(0.5 * this.qp);
      this.dd = 1 / this.rq;
      this.xmf = 1;
      this.ymf = 0.5 * this.qp;
      break;
    case this.OBLIQ:
      this.rq = Math.sqrt(0.5 * this.qp);
      sinphi = Math.sin(this.lat0);
      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;
      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);
      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);
      this.ymf = (this.xmf = this.rq) / this.dd;
      this.xmf *= this.dd;
      break;
    }
  }
  else {
    if (this.mode === this.OBLIQ) {
      this.sinph0 = Math.sin(this.lat0);
      this.cosph0 = Math.cos(this.lat0);
    }
  }
};

/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y
  -----------------------------------------------------------------------*/
exports.forward = function(p) {

  /* Forward equations
      -----------------*/
  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;
  var lam = p.x;
  var phi = p.y;

  lam = adjust_lon(lam - this.long0);

  if (this.sphere) {
    sinphi = Math.sin(phi);
    cosphi = Math.cos(phi);
    coslam = Math.cos(lam);
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;
      if (y <= EPSLN) {
        return null;
      }
      y = Math.sqrt(2 / y);
      x = y * cosphi * Math.sin(lam);
      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;
    }
    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {
      if (this.mode === this.N_POLE) {
        coslam = -coslam;
      }
      if (Math.abs(phi + this.phi0) < EPSLN) {
        return null;
      }
      y = FORTPI - phi * 0.5;
      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));
      x = y * Math.sin(lam);
      y *= coslam;
    }
  }
  else {
    sinb = 0;
    cosb = 0;
    b = 0;
    coslam = Math.cos(lam);
    sinlam = Math.sin(lam);
    sinphi = Math.sin(phi);
    q = qsfnz(this.e, sinphi);
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      sinb = q / this.qp;
      cosb = Math.sqrt(1 - sinb * sinb);
    }
    switch (this.mode) {
    case this.OBLIQ:
      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;
      break;
    case this.EQUIT:
      b = 1 + cosb * coslam;
      break;
    case this.N_POLE:
      b = HALF_PI + phi;
      q = this.qp - q;
      break;
    case this.S_POLE:
      b = phi - HALF_PI;
      q = this.qp + q;
      break;
    }
    if (Math.abs(b) < EPSLN) {
      return null;
    }
    switch (this.mode) {
    case this.OBLIQ:
    case this.EQUIT:
      b = Math.sqrt(2 / b);
      if (this.mode === this.OBLIQ) {
        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);
      }
      else {
        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;
      }
      x = this.xmf * b * cosb * sinlam;
      break;
    case this.N_POLE:
    case this.S_POLE:
      if (q >= 0) {
        x = (b = Math.sqrt(q)) * sinlam;
        y = coslam * ((this.mode === this.S_POLE) ? b : -b);
      }
      else {
        x = y = 0;
      }
      break;
    }
  }

  p.x = this.a * x + this.x0;
  p.y = this.a * y + this.y0;
  return p;
};

/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var x = p.x / this.a;
  var y = p.y / this.a;
  var lam, phi, cCe, sCe, q, rho, ab;

  if (this.sphere) {
    var cosz = 0,
      rh, sinz = 0;

    rh = Math.sqrt(x * x + y * y);
    phi = rh * 0.5;
    if (phi > 1) {
      return null;
    }
    phi = 2 * Math.asin(phi);
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      sinz = Math.sin(phi);
      cosz = Math.cos(phi);
    }
    switch (this.mode) {
    case this.EQUIT:
      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);
      x *= sinz;
      y = cosz * rh;
      break;
    case this.OBLIQ:
      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);
      x *= sinz * this.cosph0;
      y = (cosz - Math.sin(phi) * this.sinph0) * rh;
      break;
    case this.N_POLE:
      y = -y;
      phi = HALF_PI - phi;
      break;
    case this.S_POLE:
      phi -= HALF_PI;
      break;
    }
    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);
  }
  else {
    ab = 0;
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      x /= this.dd;
      y *= this.dd;
      rho = Math.sqrt(x * x + y * y);
      if (rho < EPSLN) {
        p.x = 0;
        p.y = this.phi0;
        return p;
      }
      sCe = 2 * Math.asin(0.5 * rho / this.rq);
      cCe = Math.cos(sCe);
      x *= (sCe = Math.sin(sCe));
      if (this.mode === this.OBLIQ) {
        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;
        q = this.qp * ab;
        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;
      }
      else {
        ab = y * sCe / rho;
        q = this.qp * ab;
        y = rho * cCe;
      }
    }
    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {
      if (this.mode === this.N_POLE) {
        y = -y;
      }
      q = (x * x + y * y);
      if (!q) {
        p.x = 0;
        p.y = this.phi0;
        return p;
      }
      ab = 1 - q / this.qp;
      if (this.mode === this.S_POLE) {
        ab = -ab;
      }
    }
    lam = Math.atan2(x, y);
    phi = this.authlat(Math.asin(ab), this.apa);
  }


  p.x = adjust_lon(this.long0 + lam);
  p.y = phi;
  return p;
};

/* determine latitude from authalic latitude */
exports.P00 = 0.33333333333333333333;
exports.P01 = 0.17222222222222222222;
exports.P02 = 0.10257936507936507936;
exports.P10 = 0.06388888888888888888;
exports.P11 = 0.06640211640211640211;
exports.P20 = 0.01641501294219154443;

exports.authset = function(es) {
  var t;
  var APA = [];
  APA[0] = es * this.P00;
  t = es * es;
  APA[0] += t * this.P01;
  APA[1] = t * this.P10;
  t *= es;
  APA[0] += t * this.P02;
  APA[1] += t * this.P11;
  APA[2] = t * this.P20;
  return APA;
};

exports.authlat = function(beta, APA) {
  var t = beta + beta;
  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));
};
exports.names = ["Lambert Azimuthal Equal Area", "Lambert_Azimuthal_Equal_Area", "laea"];

},{"../common/adjust_lon":32,"../common/qsfnz":47}],78:[function(require,module,exports){
var EPSLN = 1.0e-10;
var msfnz = require('../common/msfnz');
var tsfnz = require('../common/tsfnz');
var HALF_PI = Math.PI/2;
var sign = require('../common/sign');
var adjust_lon = require('../common/adjust_lon');
var phi2z = require('../common/phi2z');
exports.init = function() {

  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north
  //double c_lat;                   /* center latitude                      */
  //double c_lon;                   /* center longitude                     */
  //double lat1;                    /* first standard parallel              */
  //double lat2;                    /* second standard parallel             */
  //double r_maj;                   /* major axis                           */
  //double r_min;                   /* minor axis                           */
  //double false_east;              /* x offset in meters                   */
  //double false_north;             /* y offset in meters                   */

  if (!this.lat2) {
    this.lat2 = this.lat1;
  } //if lat2 is not defined
  if (!this.k0) {
    this.k0 = 1;
  }
  this.x0 = this.x0 || 0;
  this.y0 = this.y0 || 0;
  // Standard Parallels cannot be equal and on opposite sides of the equator
  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {
    return;
  }

  var temp = this.b / this.a;
  this.e = Math.sqrt(1 - temp * temp);

  var sin1 = Math.sin(this.lat1);
  var cos1 = Math.cos(this.lat1);
  var ms1 = msfnz(this.e, sin1, cos1);
  var ts1 = tsfnz(this.e, this.lat1, sin1);

  var sin2 = Math.sin(this.lat2);
  var cos2 = Math.cos(this.lat2);
  var ms2 = msfnz(this.e, sin2, cos2);
  var ts2 = tsfnz(this.e, this.lat2, sin2);

  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));

  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {
    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);
  }
  else {
    this.ns = sin1;
  }
  if (isNaN(this.ns)) {
    this.ns = sin1;
  }
  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));
  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);
  if (!this.title) {
    this.title = "Lambert Conformal Conic";
  }
};


// Lambert Conformal conic forward equations--mapping lat,long to x,y
// -----------------------------------------------------------------
exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  // singular cases :
  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {
    lat = sign(lat) * (HALF_PI - 2 * EPSLN);
  }

  var con = Math.abs(Math.abs(lat) - HALF_PI);
  var ts, rh1;
  if (con > EPSLN) {
    ts = tsfnz(this.e, lat, Math.sin(lat));
    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);
  }
  else {
    con = lat * this.ns;
    if (con <= 0) {
      return null;
    }
    rh1 = 0;
  }
  var theta = this.ns * adjust_lon(lon - this.long0);
  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;
  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;

  return p;
};

// Lambert Conformal Conic inverse equations--mapping x,y to lat/long
// -----------------------------------------------------------------
exports.inverse = function(p) {

  var rh1, con, ts;
  var lat, lon;
  var x = (p.x - this.x0) / this.k0;
  var y = (this.rh - (p.y - this.y0) / this.k0);
  if (this.ns > 0) {
    rh1 = Math.sqrt(x * x + y * y);
    con = 1;
  }
  else {
    rh1 = -Math.sqrt(x * x + y * y);
    con = -1;
  }
  var theta = 0;
  if (rh1 !== 0) {
    theta = Math.atan2((con * x), (con * y));
  }
  if ((rh1 !== 0) || (this.ns > 0)) {
    con = 1 / this.ns;
    ts = Math.pow((rh1 / (this.a * this.f0)), con);
    lat = phi2z(this.e, ts);
    if (lat === -9999) {
      return null;
    }
  }
  else {
    lat = -HALF_PI;
  }
  lon = adjust_lon(theta / this.ns + this.long0);

  p.x = lon;
  p.y = lat;
  return p;
};

exports.names = ["Lambert Tangential Conformal Conic Projection", "Lambert_Conformal_Conic", "Lambert_Conformal_Conic_2SP", "lcc"];

},{"../common/adjust_lon":32,"../common/msfnz":42,"../common/phi2z":43,"../common/sign":48,"../common/tsfnz":51}],79:[function(require,module,exports){
exports.init = function() {
  //no-op for longlat
};

function identity(pt) {
  return pt;
}
exports.forward = identity;
exports.inverse = identity;
exports.names = ["longlat", "identity"];

},{}],80:[function(require,module,exports){
var msfnz = require('../common/msfnz');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var R2D = 57.29577951308232088;
var adjust_lon = require('../common/adjust_lon');
var FORTPI = Math.PI/4;
var tsfnz = require('../common/tsfnz');
var phi2z = require('../common/phi2z');
exports.init = function() {
  var con = this.b / this.a;
  this.es = 1 - con * con;
  if(!('x0' in this)){
    this.x0 = 0;
  }
  if(!('y0' in this)){
    this.y0 = 0;
  }
  this.e = Math.sqrt(this.es);
  if (this.lat_ts) {
    if (this.sphere) {
      this.k0 = Math.cos(this.lat_ts);
    }
    else {
      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));
    }
  }
  else {
    if (!this.k0) {
      if (this.k) {
        this.k0 = this.k;
      }
      else {
        this.k0 = 1;
      }
    }
  }
};

/* Mercator forward equations--mapping lat,long to x,y
  --------------------------------------------------*/

exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  // convert to radians
  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {
    return null;
  }

  var x, y;
  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {
    return null;
  }
  else {
    if (this.sphere) {
      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);
      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));
    }
    else {
      var sinphi = Math.sin(lat);
      var ts = tsfnz(this.e, lat, sinphi);
      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);
      y = this.y0 - this.a * this.k0 * Math.log(ts);
    }
    p.x = x;
    p.y = y;
    return p;
  }
};


/* Mercator inverse equations--mapping x,y to lat/long
  --------------------------------------------------*/
exports.inverse = function(p) {

  var x = p.x - this.x0;
  var y = p.y - this.y0;
  var lon, lat;

  if (this.sphere) {
    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));
  }
  else {
    var ts = Math.exp(-y / (this.a * this.k0));
    lat = phi2z(this.e, ts);
    if (lat === -9999) {
      return null;
    }
  }
  lon = adjust_lon(this.long0 + x / (this.a * this.k0));

  p.x = lon;
  p.y = lat;
  return p;
};

exports.names = ["Mercator", "Popular Visualisation Pseudo Mercator", "Mercator_1SP", "Mercator_Auxiliary_Sphere", "merc"];

},{"../common/adjust_lon":32,"../common/msfnz":42,"../common/phi2z":43,"../common/tsfnz":51}],81:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
/*
  reference
    "New Equal-Area Map Projections for Noncircular Regions", John P. Snyder,
    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.
  */


/* Initialize the Miller Cylindrical projection
  -------------------------------------------*/
exports.init = function() {
  //no-op
};


/* Miller Cylindrical forward equations--mapping lat,long to x,y
    ------------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  /* Forward equations
      -----------------*/
  var dlon = adjust_lon(lon - this.long0);
  var x = this.x0 + this.a * dlon;
  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;

  p.x = x;
  p.y = y;
  return p;
};

/* Miller Cylindrical inverse equations--mapping x,y to lat/long
    ------------------------------------------------------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;

  var lon = adjust_lon(this.long0 + p.x / this.a);
  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Miller_Cylindrical", "mill"];

},{"../common/adjust_lon":32}],82:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var EPSLN = 1.0e-10;
exports.init = function() {};

/* Mollweide forward equations--mapping lat,long to x,y
    ----------------------------------------------------*/
exports.forward = function(p) {

  /* Forward equations
      -----------------*/
  var lon = p.x;
  var lat = p.y;

  var delta_lon = adjust_lon(lon - this.long0);
  var theta = lat;
  var con = Math.PI * Math.sin(lat);

  /* Iterate using the Newton-Raphson method to find theta
      -----------------------------------------------------*/
  for (var i = 0; true; i++) {
    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));
    theta += delta_theta;
    if (Math.abs(delta_theta) < EPSLN) {
      break;
    }
  }
  theta /= 2;

  /* If the latitude is 90 deg, force the x coordinate to be "0 + false easting"
       this is done here because of precision problems with "cos(theta)"
       --------------------------------------------------------------------------*/
  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {
    delta_lon = 0;
  }
  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;
  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;

  p.x = x;
  p.y = y;
  return p;
};

exports.inverse = function(p) {
  var theta;
  var arg;

  /* Inverse equations
      -----------------*/
  p.x -= this.x0;
  p.y -= this.y0;
  arg = p.y / (1.4142135623731 * this.a);

  /* Because of division by zero problems, 'arg' can not be 1.  Therefore
       a number very close to one is used instead.
       -------------------------------------------------------------------*/
  if (Math.abs(arg) > 0.999999999999) {
    arg = 0.999999999999;
  }
  theta = Math.asin(arg);
  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));
  if (lon < (-Math.PI)) {
    lon = -Math.PI;
  }
  if (lon > Math.PI) {
    lon = Math.PI;
  }
  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;
  if (Math.abs(arg) > 1) {
    arg = 1;
  }
  var lat = Math.asin(arg);

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Mollweide", "moll"];

},{"../common/adjust_lon":32}],83:[function(require,module,exports){
var SEC_TO_RAD = 4.84813681109535993589914102357e-6;
/*
  reference
    Department of Land and Survey Technical Circular 1973/32
      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf
    OSG Technical Report 4.1
      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf
  */

/**
 * iterations: Number of iterations to refine inverse transform.
 *     0 -> km accuracy
 *     1 -> m accuracy -- suitable for most mapping applications
 *     2 -> mm accuracy
 */
exports.iterations = 1;

exports.init = function() {
  this.A = [];
  this.A[1] = 0.6399175073;
  this.A[2] = -0.1358797613;
  this.A[3] = 0.063294409;
  this.A[4] = -0.02526853;
  this.A[5] = 0.0117879;
  this.A[6] = -0.0055161;
  this.A[7] = 0.0026906;
  this.A[8] = -0.001333;
  this.A[9] = 0.00067;
  this.A[10] = -0.00034;

  this.B_re = [];
  this.B_im = [];
  this.B_re[1] = 0.7557853228;
  this.B_im[1] = 0;
  this.B_re[2] = 0.249204646;
  this.B_im[2] = 0.003371507;
  this.B_re[3] = -0.001541739;
  this.B_im[3] = 0.041058560;
  this.B_re[4] = -0.10162907;
  this.B_im[4] = 0.01727609;
  this.B_re[5] = -0.26623489;
  this.B_im[5] = -0.36249218;
  this.B_re[6] = -0.6870983;
  this.B_im[6] = -1.1651967;

  this.C_re = [];
  this.C_im = [];
  this.C_re[1] = 1.3231270439;
  this.C_im[1] = 0;
  this.C_re[2] = -0.577245789;
  this.C_im[2] = -0.007809598;
  this.C_re[3] = 0.508307513;
  this.C_im[3] = -0.112208952;
  this.C_re[4] = -0.15094762;
  this.C_im[4] = 0.18200602;
  this.C_re[5] = 1.01418179;
  this.C_im[5] = 1.64497696;
  this.C_re[6] = 1.9660549;
  this.C_im[6] = 2.5127645;

  this.D = [];
  this.D[1] = 1.5627014243;
  this.D[2] = 0.5185406398;
  this.D[3] = -0.03333098;
  this.D[4] = -0.1052906;
  this.D[5] = -0.0368594;
  this.D[6] = 0.007317;
  this.D[7] = 0.01220;
  this.D[8] = 0.00394;
  this.D[9] = -0.0013;
};

/**
    New Zealand Map Grid Forward  - long/lat to x/y
    long/lat in radians
  */
exports.forward = function(p) {
  var n;
  var lon = p.x;
  var lat = p.y;

  var delta_lat = lat - this.lat0;
  var delta_lon = lon - this.long0;

  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda
  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.
  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;
  var d_lambda = delta_lon;
  var d_phi_n = 1; // d_phi^0

  var d_psi = 0;
  for (n = 1; n <= 10; n++) {
    d_phi_n = d_phi_n * d_phi;
    d_psi = d_psi + this.A[n] * d_phi_n;
  }

  // 2. Calculate theta
  var th_re = d_psi;
  var th_im = d_lambda;

  // 3. Calculate z
  var th_n_re = 1;
  var th_n_im = 0; // theta^0
  var th_n_re1;
  var th_n_im1;

  var z_re = 0;
  var z_im = 0;
  for (n = 1; n <= 6; n++) {
    th_n_re1 = th_n_re * th_re - th_n_im * th_im;
    th_n_im1 = th_n_im * th_re + th_n_re * th_im;
    th_n_re = th_n_re1;
    th_n_im = th_n_im1;
    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;
    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;
  }

  // 4. Calculate easting and northing
  p.x = (z_im * this.a) + this.x0;
  p.y = (z_re * this.a) + this.y0;

  return p;
};


/**
    New Zealand Map Grid Inverse  -  x/y to long/lat
  */
exports.inverse = function(p) {
  var n;
  var x = p.x;
  var y = p.y;

  var delta_x = x - this.x0;
  var delta_y = y - this.y0;

  // 1. Calculate z
  var z_re = delta_y / this.a;
  var z_im = delta_x / this.a;

  // 2a. Calculate theta - first approximation gives km accuracy
  var z_n_re = 1;
  var z_n_im = 0; // z^0
  var z_n_re1;
  var z_n_im1;

  var th_re = 0;
  var th_im = 0;
  for (n = 1; n <= 6; n++) {
    z_n_re1 = z_n_re * z_re - z_n_im * z_im;
    z_n_im1 = z_n_im * z_re + z_n_re * z_im;
    z_n_re = z_n_re1;
    z_n_im = z_n_im1;
    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;
    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;
  }

  // 2b. Iterate to refine the accuracy of the calculation
  //        0 iterations gives km accuracy
  //        1 iteration gives m accuracy -- good enough for most mapping applications
  //        2 iterations bives mm accuracy
  for (var i = 0; i < this.iterations; i++) {
    var th_n_re = th_re;
    var th_n_im = th_im;
    var th_n_re1;
    var th_n_im1;

    var num_re = z_re;
    var num_im = z_im;
    for (n = 2; n <= 6; n++) {
      th_n_re1 = th_n_re * th_re - th_n_im * th_im;
      th_n_im1 = th_n_im * th_re + th_n_re * th_im;
      th_n_re = th_n_re1;
      th_n_im = th_n_im1;
      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);
      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);
    }

    th_n_re = 1;
    th_n_im = 0;
    var den_re = this.B_re[1];
    var den_im = this.B_im[1];
    for (n = 2; n <= 6; n++) {
      th_n_re1 = th_n_re * th_re - th_n_im * th_im;
      th_n_im1 = th_n_im * th_re + th_n_re * th_im;
      th_n_re = th_n_re1;
      th_n_im = th_n_im1;
      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);
      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);
    }

    // Complex division
    var den2 = den_re * den_re + den_im * den_im;
    th_re = (num_re * den_re + num_im * den_im) / den2;
    th_im = (num_im * den_re - num_re * den_im) / den2;
  }

  // 3. Calculate d_phi              ...                                    // and d_lambda
  var d_psi = th_re;
  var d_lambda = th_im;
  var d_psi_n = 1; // d_psi^0

  var d_phi = 0;
  for (n = 1; n <= 9; n++) {
    d_psi_n = d_psi_n * d_psi;
    d_phi = d_phi + this.D[n] * d_psi_n;
  }

  // 4. Calculate latitude and longitude
  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.
  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);
  var lon = this.long0 + d_lambda;

  p.x = lon;
  p.y = lat;

  return p;
};
exports.names = ["New_Zealand_Map_Grid", "nzmg"];
},{}],84:[function(require,module,exports){
var tsfnz = require('../common/tsfnz');
var adjust_lon = require('../common/adjust_lon');
var phi2z = require('../common/phi2z');
var HALF_PI = Math.PI/2;
var FORTPI = Math.PI/4;
var EPSLN = 1.0e-10;

/* Initialize the Oblique Mercator  projection
    ------------------------------------------*/
exports.init = function() {
  this.no_off = this.no_off || false;
  this.no_rot = this.no_rot || false;

  if (isNaN(this.k0)) {
    this.k0 = 1;
  }
  var sinlat = Math.sin(this.lat0);
  var coslat = Math.cos(this.lat0);
  var con = this.e * sinlat;

  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));
  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);
  var t0 = tsfnz(this.e, this.lat0, sinlat);
  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));
  if (dl * dl < 1) {
    dl = 1;
  }
  var fl;
  var gl;
  if (!isNaN(this.longc)) {
    //Central point and azimuth method

    if (this.lat0 >= 0) {
      fl = dl + Math.sqrt(dl * dl - 1);
    }
    else {
      fl = dl - Math.sqrt(dl * dl - 1);
    }
    this.el = fl * Math.pow(t0, this.bl);
    gl = 0.5 * (fl - 1 / fl);
    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);
    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;

  }
  else {
    //2 points method
    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));
    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));
    if (this.lat0 >= 0) {
      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);
    }
    else {
      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);
    }
    var hl = Math.pow(t1, this.bl);
    var ll = Math.pow(t2, this.bl);
    fl = this.el / hl;
    gl = 0.5 * (fl - 1 / fl);
    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);
    var pl = (ll - hl) / (ll + hl);
    var dlon12 = adjust_lon(this.long1 - this.long2);
    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;
    this.long0 = adjust_lon(this.long0);
    var dlon10 = adjust_lon(this.long1 - this.long0);
    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);
    this.alpha = Math.asin(dl * Math.sin(this.gamma0));
  }

  if (this.no_off) {
    this.uc = 0;
  }
  else {
    if (this.lat0 >= 0) {
      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));
    }
    else {
      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));
    }
  }

};


/* Oblique Mercator forward equations--mapping lat,long to x,y
    ----------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var dlon = adjust_lon(lon - this.long0);
  var us, vs;
  var con;
  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {
    if (lat > 0) {
      con = -1;
    }
    else {
      con = 1;
    }
    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));
    us = -1 * con * HALF_PI * this.al / this.bl;
  }
  else {
    var t = tsfnz(this.e, lat, Math.sin(lat));
    var ql = this.el / Math.pow(t, this.bl);
    var sl = 0.5 * (ql - 1 / ql);
    var tl = 0.5 * (ql + 1 / ql);
    var vl = Math.sin(this.bl * (dlon));
    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;
    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {
      vs = Number.POSITIVE_INFINITY;
    }
    else {
      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;
    }
    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {
      us = this.al * this.bl * (dlon);
    }
    else {
      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;
    }
  }

  if (this.no_rot) {
    p.x = this.x0 + us;
    p.y = this.y0 + vs;
  }
  else {

    us -= this.uc;
    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);
    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);
  }
  return p;
};

exports.inverse = function(p) {
  var us, vs;
  if (this.no_rot) {
    vs = p.y - this.y0;
    us = p.x - this.x0;
  }
  else {
    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);
    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);
    us += this.uc;
  }
  var qp = Math.exp(-1 * this.bl * vs / this.al);
  var sp = 0.5 * (qp - 1 / qp);
  var tp = 0.5 * (qp + 1 / qp);
  var vp = Math.sin(this.bl * us / this.al);
  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;
  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);
  if (Math.abs(up - 1) < EPSLN) {
    p.x = this.long0;
    p.y = HALF_PI;
  }
  else if (Math.abs(up + 1) < EPSLN) {
    p.x = this.long0;
    p.y = -1 * HALF_PI;
  }
  else {
    p.y = phi2z(this.e, ts);
    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);
  }
  return p;
};

exports.names = ["Hotine_Oblique_Mercator", "Hotine Oblique Mercator", "Hotine_Oblique_Mercator_Azimuth_Natural_Origin", "Hotine_Oblique_Mercator_Azimuth_Center", "omerc"];
},{"../common/adjust_lon":32,"../common/phi2z":43,"../common/tsfnz":51}],85:[function(require,module,exports){
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var mlfn = require('../common/mlfn');
var EPSLN = 1.0e-10;
var gN = require('../common/gN');
var MAX_ITER = 20;
exports.init = function() {
  /* Place parameters in static storage for common use
      -------------------------------------------------*/
  this.temp = this.b / this.a;
  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles
  this.e = Math.sqrt(this.es);
  this.e0 = e0fn(this.es);
  this.e1 = e1fn(this.es);
  this.e2 = e2fn(this.es);
  this.e3 = e3fn(this.es);
  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas
};


/* Polyconic forward equations--mapping lat,long to x,y
    ---------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var x, y, el;
  var dlon = adjust_lon(lon - this.long0);
  el = dlon * Math.sin(lat);
  if (this.sphere) {
    if (Math.abs(lat) <= EPSLN) {
      x = this.a * dlon;
      y = -1 * this.a * this.lat0;
    }
    else {
      x = this.a * Math.sin(el) / Math.tan(lat);
      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));
    }
  }
  else {
    if (Math.abs(lat) <= EPSLN) {
      x = this.a * dlon;
      y = -1 * this.ml0;
    }
    else {
      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);
      x = nl * Math.sin(el);
      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));
    }

  }
  p.x = x + this.x0;
  p.y = y + this.y0;
  return p;
};


/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  var lon, lat, x, y, i;
  var al, bl;
  var phi, dphi;
  x = p.x - this.x0;
  y = p.y - this.y0;

  if (this.sphere) {
    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {
      lon = adjust_lon(x / this.a + this.long0);
      lat = 0;
    }
    else {
      al = this.lat0 + y / this.a;
      bl = x * x / this.a / this.a + al * al;
      phi = al;
      var tanphi;
      for (i = MAX_ITER; i; --i) {
        tanphi = Math.tan(phi);
        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);
        phi += dphi;
        if (Math.abs(dphi) <= EPSLN) {
          lat = phi;
          break;
        }
      }
      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));
    }
  }
  else {
    if (Math.abs(y + this.ml0) <= EPSLN) {
      lat = 0;
      lon = adjust_lon(this.long0 + x / this.a);
    }
    else {

      al = (this.ml0 + y) / this.a;
      bl = x * x / this.a / this.a + al * al;
      phi = al;
      var cl, mln, mlnp, ma;
      var con;
      for (i = MAX_ITER; i; --i) {
        con = this.e * Math.sin(phi);
        cl = Math.sqrt(1 - con * con) * Math.tan(phi);
        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);
        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);
        ma = mln / this.a;
        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);
        phi -= dphi;
        if (Math.abs(dphi) <= EPSLN) {
          lat = phi;
          break;
        }
      }

      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);
      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);
      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));
    }
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Polyconic", "poly"];
},{"../common/adjust_lat":31,"../common/adjust_lon":32,"../common/e0fn":34,"../common/e1fn":35,"../common/e2fn":36,"../common/e3fn":37,"../common/gN":38,"../common/mlfn":41}],86:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var pj_enfn = require('../common/pj_enfn');
var MAX_ITER = 20;
var pj_mlfn = require('../common/pj_mlfn');
var pj_inv_mlfn = require('../common/pj_inv_mlfn');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var asinz = require('../common/asinz');
exports.init = function() {
  /* Place parameters in static storage for common use
    -------------------------------------------------*/


  if (!this.sphere) {
    this.en = pj_enfn(this.es);
  }
  else {
    this.n = 1;
    this.m = 0;
    this.es = 0;
    this.C_y = Math.sqrt((this.m + 1) / this.n);
    this.C_x = this.C_y / (this.m + 1);
  }

};

/* Sinusoidal forward equations--mapping lat,long to x,y
  -----------------------------------------------------*/
exports.forward = function(p) {
  var x, y;
  var lon = p.x;
  var lat = p.y;
  /* Forward equations
    -----------------*/
  lon = adjust_lon(lon - this.long0);

  if (this.sphere) {
    if (!this.m) {
      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;
    }
    else {
      var k = this.n * Math.sin(lat);
      for (var i = MAX_ITER; i; --i) {
        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));
        lat -= V;
        if (Math.abs(V) < EPSLN) {
          break;
        }
      }
    }
    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));
    y = this.a * this.C_y * lat;

  }
  else {

    var s = Math.sin(lat);
    var c = Math.cos(lat);
    y = this.a * pj_mlfn(lat, s, c, this.en);
    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);
  }

  p.x = x;
  p.y = y;
  return p;
};

exports.inverse = function(p) {
  var lat, temp, lon, s;

  p.x -= this.x0;
  lon = p.x / this.a;
  p.y -= this.y0;
  lat = p.y / this.a;

  if (this.sphere) {
    lat /= this.C_y;
    lon = lon / (this.C_x * (this.m + Math.cos(lat)));
    if (this.m) {
      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);
    }
    else if (this.n !== 1) {
      lat = asinz(Math.sin(lat) / this.n);
    }
    lon = adjust_lon(lon + this.long0);
    lat = adjust_lat(lat);
  }
  else {
    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);
    s = Math.abs(lat);
    if (s < HALF_PI) {
      s = Math.sin(lat);
      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));
      //temp = this.long0 + p.x / (this.a * Math.cos(lat));
      lon = adjust_lon(temp);
    }
    else if ((s - EPSLN) < HALF_PI) {
      lon = this.long0;
    }
  }
  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Sinusoidal", "sinu"];
},{"../common/adjust_lat":31,"../common/adjust_lon":32,"../common/asinz":33,"../common/pj_enfn":44,"../common/pj_inv_mlfn":45,"../common/pj_mlfn":46}],87:[function(require,module,exports){
/*
  references:
    Formules et constantes pour le Calcul pour la
    projection cylindrique conforme à axe oblique et pour la transformation entre
    des systèmes de référence.
    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf
  */
exports.init = function() {
  var phy0 = this.lat0;
  this.lambda0 = this.long0;
  var sinPhy0 = Math.sin(phy0);
  var semiMajorAxis = this.a;
  var invF = this.rf;
  var flattening = 1 / invF;
  var e2 = 2 * flattening - Math.pow(flattening, 2);
  var e = this.e = Math.sqrt(e2);
  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));
  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));
  this.b0 = Math.asin(sinPhy0 / this.alpha);
  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));
  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));
  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));
  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;
};


exports.forward = function(p) {
  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));
  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));
  var S = -this.alpha * (Sa1 + Sa2) + this.K;

  // spheric latitude
  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);

  // spheric longitude
  var I = this.alpha * (p.x - this.lambda0);

  // psoeudo equatorial rotation
  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));

  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));

  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;
  p.x = this.R * rotI + this.x0;
  return p;
};

exports.inverse = function(p) {
  var Y = p.x - this.x0;
  var X = p.y - this.y0;

  var rotI = Y / this.R;
  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);

  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));
  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));

  var lambda = this.lambda0 + I / this.alpha;

  var S = 0;
  var phy = b;
  var prevPhy = -1000;
  var iteration = 0;
  while (Math.abs(phy - prevPhy) > 0.0000001) {
    if (++iteration > 20) {
      //...reportError("omercFwdInfinity");
      return;
    }
    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));
    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));
    prevPhy = phy;
    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;
  }

  p.x = lambda;
  p.y = phy;
  return p;
};

exports.names = ["somerc"];

},{}],88:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var sign = require('../common/sign');
var msfnz = require('../common/msfnz');
var tsfnz = require('../common/tsfnz');
var phi2z = require('../common/phi2z');
var adjust_lon = require('../common/adjust_lon');
exports.ssfn_ = function(phit, sinphi, eccen) {
  sinphi *= eccen;
  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));
};

exports.init = function() {
  this.coslat0 = Math.cos(this.lat0);
  this.sinlat0 = Math.sin(this.lat0);
  if (this.sphere) {
    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {
      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));
    }
  }
  else {
    if (Math.abs(this.coslat0) <= EPSLN) {
      if (this.lat0 > 0) {
        //North pole
        //trace('stere:north pole');
        this.con = 1;
      }
      else {
        //South pole
        //trace('stere:south pole');
        this.con = -1;
      }
    }
    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));
    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {
      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));
    }
    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);
    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;
    this.cosX0 = Math.cos(this.X0);
    this.sinX0 = Math.sin(this.X0);
  }
};

// Stereographic forward equations--mapping lat,long to x,y
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var sinlat = Math.sin(lat);
  var coslat = Math.cos(lat);
  var A, X, sinX, cosX, ts, rh;
  var dlon = adjust_lon(lon - this.long0);

  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {
    //case of the origine point
    //trace('stere:this is the origin point');
    p.x = NaN;
    p.y = NaN;
    return p;
  }
  if (this.sphere) {
    //trace('stere:sphere case');
    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));
    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;
    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;
    return p;
  }
  else {
    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;
    cosX = Math.cos(X);
    sinX = Math.sin(X);
    if (Math.abs(this.coslat0) <= EPSLN) {
      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);
      rh = 2 * this.a * this.k0 * ts / this.cons;
      p.x = this.x0 + rh * Math.sin(lon - this.long0);
      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);
      //trace(p.toString());
      return p;
    }
    else if (Math.abs(this.sinlat0) < EPSLN) {
      //Eq
      //trace('stere:equateur');
      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));
      p.y = A * sinX;
    }
    else {
      //other case
      //trace('stere:normal case');
      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));
      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;
    }
    p.x = A * cosX * Math.sin(dlon) + this.x0;
  }
  //trace(p.toString());
  return p;
};


//* Stereographic inverse equations--mapping x,y to lat/long
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var lon, lat, ts, ce, Chi;
  var rh = Math.sqrt(p.x * p.x + p.y * p.y);
  if (this.sphere) {
    var c = 2 * Math.atan(rh / (0.5 * this.a * this.k0));
    lon = this.long0;
    lat = this.lat0;
    if (rh <= EPSLN) {
      p.x = lon;
      p.y = lat;
      return p;
    }
    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);
    if (Math.abs(this.coslat0) < EPSLN) {
      if (this.lat0 > 0) {
        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));
      }
      else {
        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));
      }
    }
    else {
      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));
    }
    p.x = lon;
    p.y = lat;
    return p;
  }
  else {
    if (Math.abs(this.coslat0) <= EPSLN) {
      if (rh <= EPSLN) {
        lat = this.lat0;
        lon = this.long0;
        p.x = lon;
        p.y = lat;
        //trace(p.toString());
        return p;
      }
      p.x *= this.con;
      p.y *= this.con;
      ts = rh * this.cons / (2 * this.a * this.k0);
      lat = this.con * phi2z(this.e, ts);
      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));
    }
    else {
      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));
      lon = this.long0;
      if (rh <= EPSLN) {
        Chi = this.X0;
      }
      else {
        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);
        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));
      }
      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));
    }
  }
  p.x = lon;
  p.y = lat;

  //trace(p.toString());
  return p;

};
exports.names = ["stere", "Stereographic_South_Pole", "Polar Stereographic (variant B)"];

},{"../common/adjust_lon":32,"../common/msfnz":42,"../common/phi2z":43,"../common/sign":48,"../common/tsfnz":51}],89:[function(require,module,exports){
var gauss = require('./gauss');
var adjust_lon = require('../common/adjust_lon');
exports.init = function() {
  gauss.init.apply(this);
  if (!this.rc) {
    return;
  }
  this.sinc0 = Math.sin(this.phic0);
  this.cosc0 = Math.cos(this.phic0);
  this.R2 = 2 * this.rc;
  if (!this.title) {
    this.title = "Oblique Stereographic Alternative";
  }
};

exports.forward = function(p) {
  var sinc, cosc, cosl, k;
  p.x = adjust_lon(p.x - this.long0);
  gauss.forward.apply(this, [p]);
  sinc = Math.sin(p.y);
  cosc = Math.cos(p.y);
  cosl = Math.cos(p.x);
  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);
  p.x = k * cosc * Math.sin(p.x);
  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);
  p.x = this.a * p.x + this.x0;
  p.y = this.a * p.y + this.y0;
  return p;
};

exports.inverse = function(p) {
  var sinc, cosc, lon, lat, rho;
  p.x = (p.x - this.x0) / this.a;
  p.y = (p.y - this.y0) / this.a;

  p.x /= this.k0;
  p.y /= this.k0;
  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {
    var c = 2 * Math.atan2(rho, this.R2);
    sinc = Math.sin(c);
    cosc = Math.cos(c);
    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);
    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);
  }
  else {
    lat = this.phic0;
    lon = 0;
  }

  p.x = lon;
  p.y = lat;
  gauss.inverse.apply(this, [p]);
  p.x = adjust_lon(p.x + this.long0);
  return p;
};

exports.names = ["Stereographic_North_Pole", "Oblique_Stereographic", "Polar_Stereographic", "sterea","Oblique Stereographic Alternative"];

},{"../common/adjust_lon":32,"./gauss":74}],90:[function(require,module,exports){
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var mlfn = require('../common/mlfn');
var adjust_lon = require('../common/adjust_lon');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var sign = require('../common/sign');
var asinz = require('../common/asinz');

exports.init = function() {
  this.e0 = e0fn(this.es);
  this.e1 = e1fn(this.es);
  this.e2 = e2fn(this.es);
  this.e3 = e3fn(this.es);
  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);
};

/**
    Transverse Mercator Forward  - long/lat to x/y
    long/lat in radians
  */
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;

  var delta_lon = adjust_lon(lon - this.long0);
  var con;
  var x, y;
  var sin_phi = Math.sin(lat);
  var cos_phi = Math.cos(lat);

  if (this.sphere) {
    var b = cos_phi * Math.sin(delta_lon);
    if ((Math.abs(Math.abs(b) - 1)) < 0.0000000001) {
      return (93);
    }
    else {
      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b));
      con = Math.acos(cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - b * b));
      if (lat < 0) {
        con = -con;
      }
      y = this.a * this.k0 * (con - this.lat0);
    }
  }
  else {
    var al = cos_phi * delta_lon;
    var als = Math.pow(al, 2);
    var c = this.ep2 * Math.pow(cos_phi, 2);
    var tq = Math.tan(lat);
    var t = Math.pow(tq, 2);
    con = 1 - this.es * Math.pow(sin_phi, 2);
    var n = this.a / Math.sqrt(con);
    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat);

    x = this.k0 * n * al * (1 + als / 6 * (1 - t + c + als / 20 * (5 - 18 * t + Math.pow(t, 2) + 72 * c - 58 * this.ep2))) + this.x0;
    y = this.k0 * (ml - this.ml0 + n * tq * (als * (0.5 + als / 24 * (5 - t + 9 * c + 4 * Math.pow(c, 2) + als / 30 * (61 - 58 * t + Math.pow(t, 2) + 600 * c - 330 * this.ep2))))) + this.y0;

  }
  p.x = x;
  p.y = y;
  return p;
};

/**
    Transverse Mercator Inverse  -  x/y to long/lat
  */
exports.inverse = function(p) {
  var con, phi;
  var delta_phi;
  var i;
  var max_iter = 6;
  var lat, lon;

  if (this.sphere) {
    var f = Math.exp(p.x / (this.a * this.k0));
    var g = 0.5 * (f - 1 / f);
    var temp = this.lat0 + p.y / (this.a * this.k0);
    var h = Math.cos(temp);
    con = Math.sqrt((1 - h * h) / (1 + g * g));
    lat = asinz(con);
    if (temp < 0) {
      lat = -lat;
    }
    if ((g === 0) && (h === 0)) {
      lon = this.long0;
    }
    else {
      lon = adjust_lon(Math.atan2(g, h) + this.long0);
    }
  }
  else { // ellipsoidal form
    var x = p.x - this.x0;
    var y = p.y - this.y0;

    con = (this.ml0 + y / this.k0) / this.a;
    phi = con;
    for (i = 0; true; i++) {
      delta_phi = ((con + this.e1 * Math.sin(2 * phi) - this.e2 * Math.sin(4 * phi) + this.e3 * Math.sin(6 * phi)) / this.e0) - phi;
      phi += delta_phi;
      if (Math.abs(delta_phi) <= EPSLN) {
        break;
      }
      if (i >= max_iter) {
        return (95);
      }
    } // for()
    if (Math.abs(phi) < HALF_PI) {
      var sin_phi = Math.sin(phi);
      var cos_phi = Math.cos(phi);
      var tan_phi = Math.tan(phi);
      var c = this.ep2 * Math.pow(cos_phi, 2);
      var cs = Math.pow(c, 2);
      var t = Math.pow(tan_phi, 2);
      var ts = Math.pow(t, 2);
      con = 1 - this.es * Math.pow(sin_phi, 2);
      var n = this.a / Math.sqrt(con);
      var r = n * (1 - this.es) / con;
      var d = x / (n * this.k0);
      var ds = Math.pow(d, 2);
      lat = phi - (n * tan_phi * ds / r) * (0.5 - ds / 24 * (5 + 3 * t + 10 * c - 4 * cs - 9 * this.ep2 - ds / 30 * (61 + 90 * t + 298 * c + 45 * ts - 252 * this.ep2 - 3 * cs)));
      lon = adjust_lon(this.long0 + (d * (1 - ds / 6 * (1 + 2 * t + c - ds / 20 * (5 - 2 * c + 28 * t - 3 * cs + 8 * this.ep2 + 24 * ts))) / cos_phi));
    }
    else {
      lat = HALF_PI * sign(y);
      lon = this.long0;
    }
  }
  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Transverse_Mercator", "Transverse Mercator", "tmerc"];

},{"../common/adjust_lon":32,"../common/asinz":33,"../common/e0fn":34,"../common/e1fn":35,"../common/e2fn":36,"../common/e3fn":37,"../common/mlfn":41,"../common/sign":48}],91:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var tmerc = require('./tmerc');
exports.dependsOn = 'tmerc';
exports.init = function() {
  if (!this.zone) {
    return;
  }
  this.lat0 = 0;
  this.long0 = ((6 * Math.abs(this.zone)) - 183) * D2R;
  this.x0 = 500000;
  this.y0 = this.utmSouth ? 10000000 : 0;
  this.k0 = 0.9996;

  tmerc.init.apply(this);
  this.forward = tmerc.forward;
  this.inverse = tmerc.inverse;
};
exports.names = ["Universal Transverse Mercator System", "utm"];

},{"./tmerc":90}],92:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var asinz = require('../common/asinz');
/* Initialize the Van Der Grinten projection
  ----------------------------------------*/
exports.init = function() {
  //this.R = 6370997; //Radius of earth
  this.R = this.a;
};

exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  /* Forward equations
    -----------------*/
  var dlon = adjust_lon(lon - this.long0);
  var x, y;

  if (Math.abs(lat) <= EPSLN) {
    x = this.x0 + this.R * dlon;
    y = this.y0;
  }
  var theta = asinz(2 * Math.abs(lat / Math.PI));
  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {
    x = this.x0;
    if (lat >= 0) {
      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);
    }
    else {
      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);
    }
    //  return(OK);
  }
  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));
  var asq = al * al;
  var sinth = Math.sin(theta);
  var costh = Math.cos(theta);

  var g = costh / (sinth + costh - 1);
  var gsq = g * g;
  var m = g * (2 / sinth - 1);
  var msq = m * m;
  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);
  if (dlon < 0) {
    con = -con;
  }
  x = this.x0 + con;
  //con = Math.abs(con / (Math.PI * this.R));
  var q = asq + g;
  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);
  if (lat >= 0) {
    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);
    y = this.y0 + con;
  }
  else {
    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);
    y = this.y0 - con;
  }
  p.x = x;
  p.y = y;
  return p;
};

/* Van Der Grinten inverse equations--mapping x,y to lat/long
  ---------------------------------------------------------*/
exports.inverse = function(p) {
  var lon, lat;
  var xx, yy, xys, c1, c2, c3;
  var a1;
  var m1;
  var con;
  var th1;
  var d;

  /* inverse equations
    -----------------*/
  p.x -= this.x0;
  p.y -= this.y0;
  con = Math.PI * this.R;
  xx = p.x / con;
  yy = p.y / con;
  xys = xx * xx + yy * yy;
  c1 = -Math.abs(yy) * (1 + xys);
  c2 = c1 - 2 * yy * yy + xx * xx;
  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;
  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;
  a1 = (c1 - c2 * c2 / 3 / c3) / c3;
  m1 = 2 * Math.sqrt(-a1 / 3);
  con = ((3 * d) / a1) / m1;
  if (Math.abs(con) > 1) {
    if (con >= 0) {
      con = 1;
    }
    else {
      con = -1;
    }
  }
  th1 = Math.acos(con) / 3;
  if (p.y >= 0) {
    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;
  }
  else {
    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;
  }

  if (Math.abs(xx) < EPSLN) {
    lon = this.long0;
  }
  else {
    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Van_der_Grinten_I", "VanDerGrinten", "vandg"];
},{"../common/adjust_lon":32,"../common/asinz":33}],93:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var R2D = 57.29577951308232088;
var PJD_3PARAM = 1;
var PJD_7PARAM = 2;
var datum_transform = require('./datum_transform');
var adjust_axis = require('./adjust_axis');
var proj = require('./Proj');
var toPoint = require('./common/toPoint');
module.exports = function transform(source, dest, point) {
  var wgs84;
  if (Array.isArray(point)) {
    point = toPoint(point);
  }
  function checkNotWGS(source, dest) {
    return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== "WGS84");
  }

  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84
  if (source.datum && dest.datum && (checkNotWGS(source, dest) || checkNotWGS(dest, source))) {
    wgs84 = new proj('WGS84');
    transform(source, wgs84, point);
    source = wgs84;
  }
  // DGR, 2010/11/12
  if (source.axis !== "enu") {
    adjust_axis(source, false, point);
  }
  // Transform source points to long/lat, if they aren't already.
  if (source.projName === "longlat") {
    point.x *= D2R; // convert degrees to radians
    point.y *= D2R;
  }
  else {
    if (source.to_meter) {
      point.x *= source.to_meter;
      point.y *= source.to_meter;
    }
    source.inverse(point); // Convert Cartesian to longlat
  }
  // Adjust for the prime meridian if necessary
  if (source.from_greenwich) {
    point.x += source.from_greenwich;
  }

  // Convert datums if needed, and if possible.
  point = datum_transform(source.datum, dest.datum, point);

  // Adjust for the prime meridian if necessary
  if (dest.from_greenwich) {
    point.x -= dest.from_greenwich;
  }

  if (dest.projName === "longlat") {
    // convert radians to decimal degrees
    point.x *= R2D;
    point.y *= R2D;
  }
  else { // else project
    dest.forward(point);
    if (dest.to_meter) {
      point.x /= dest.to_meter;
      point.y /= dest.to_meter;
    }
  }

  // DGR, 2010/11/12
  if (dest.axis !== "enu") {
    adjust_axis(dest, true, point);
  }

  return point;
};
},{"./Proj":29,"./adjust_axis":30,"./common/toPoint":50,"./datum_transform":58}],94:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var extend = require('./extend');

function mapit(obj, key, v) {
  obj[key] = v.map(function(aa) {
    var o = {};
    sExpr(aa, o);
    return o;
  }).reduce(function(a, b) {
    return extend(a, b);
  }, {});
}

function sExpr(v, obj) {
  var key;
  if (!Array.isArray(v)) {
    obj[v] = true;
    return;
  }
  else {
    key = v.shift();
    if (key === 'PARAMETER') {
      key = v.shift();
    }
    if (v.length === 1) {
      if (Array.isArray(v[0])) {
        obj[key] = {};
        sExpr(v[0], obj[key]);
      }
      else {
        obj[key] = v[0];
      }
    }
    else if (!v.length) {
      obj[key] = true;
    }
    else if (key === 'TOWGS84') {
      obj[key] = v;
    }
    else {
      obj[key] = {};
      if (['UNIT', 'PRIMEM', 'VERT_DATUM'].indexOf(key) > -1) {
        obj[key] = {
          name: v[0].toLowerCase(),
          convert: v[1]
        };
        if (v.length === 3) {
          obj[key].auth = v[2];
        }
      }
      else if (key === 'SPHEROID') {
        obj[key] = {
          name: v[0],
          a: v[1],
          rf: v[2]
        };
        if (v.length === 4) {
          obj[key].auth = v[3];
        }
      }
      else if (['GEOGCS', 'GEOCCS', 'DATUM', 'VERT_CS', 'COMPD_CS', 'LOCAL_CS', 'FITTED_CS', 'LOCAL_DATUM'].indexOf(key) > -1) {
        v[0] = ['name', v[0]];
        mapit(obj, key, v);
      }
      else if (v.every(function(aa) {
        return Array.isArray(aa);
      })) {
        mapit(obj, key, v);
      }
      else {
        sExpr(v, obj[key]);
      }
    }
  }
}

function rename(obj, params) {
  var outName = params[0];
  var inName = params[1];
  if (!(outName in obj) && (inName in obj)) {
    obj[outName] = obj[inName];
    if (params.length === 3) {
      obj[outName] = params[2](obj[outName]);
    }
  }
}

function d2r(input) {
  return input * D2R;
}

function cleanWKT(wkt) {
  if (wkt.type === 'GEOGCS') {
    wkt.projName = 'longlat';
  }
  else if (wkt.type === 'LOCAL_CS') {
    wkt.projName = 'identity';
    wkt.local = true;
  }
  else {
    if (typeof wkt.PROJECTION === "object") {
      wkt.projName = Object.keys(wkt.PROJECTION)[0];
    }
    else {
      wkt.projName = wkt.PROJECTION;
    }
  }
  if (wkt.UNIT) {
    wkt.units = wkt.UNIT.name.toLowerCase();
    if (wkt.units === 'metre') {
      wkt.units = 'meter';
    }
    if (wkt.UNIT.convert) {
      wkt.to_meter = parseFloat(wkt.UNIT.convert, 10);
    }
  }

  if (wkt.GEOGCS) {
    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){
    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;
    //}
    if (wkt.GEOGCS.DATUM) {
      wkt.datumCode = wkt.GEOGCS.DATUM.name.toLowerCase();
    }
    else {
      wkt.datumCode = wkt.GEOGCS.name.toLowerCase();
    }
    if (wkt.datumCode.slice(0, 2) === 'd_') {
      wkt.datumCode = wkt.datumCode.slice(2);
    }
    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {
      wkt.datumCode = 'nzgd49';
    }
    if (wkt.datumCode === "wgs_1984") {
      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {
        wkt.sphere = true;
      }
      wkt.datumCode = 'wgs84';
    }
    if (wkt.datumCode.slice(-6) === '_ferro') {
      wkt.datumCode = wkt.datumCode.slice(0, - 6);
    }
    if (wkt.datumCode.slice(-8) === '_jakarta') {
      wkt.datumCode = wkt.datumCode.slice(0, - 8);
    }
    if (~wkt.datumCode.indexOf('belge')) {
      wkt.datumCode = "rnb72";
    }
    if (wkt.GEOGCS.DATUM && wkt.GEOGCS.DATUM.SPHEROID) {
      wkt.ellps = wkt.GEOGCS.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\_18/, 'clrk');
      if (wkt.ellps.toLowerCase().slice(0, 13) === "international") {
        wkt.ellps = 'intl';
      }

      wkt.a = wkt.GEOGCS.DATUM.SPHEROID.a;
      wkt.rf = parseFloat(wkt.GEOGCS.DATUM.SPHEROID.rf, 10);
    }
    if (~wkt.datumCode.indexOf('osgb_1936')) {
      wkt.datumCode = "osgb36";
    }
  }
  if (wkt.b && !isFinite(wkt.b)) {
    wkt.b = wkt.a;
  }

  function toMeter(input) {
    var ratio = wkt.to_meter || 1;
    return parseFloat(input, 10) * ratio;
  }
  var renamer = function(a) {
    return rename(wkt, a);
  };
  var list = [
    ['standard_parallel_1', 'Standard_Parallel_1'],
    ['standard_parallel_2', 'Standard_Parallel_2'],
    ['false_easting', 'False_Easting'],
    ['false_northing', 'False_Northing'],
    ['central_meridian', 'Central_Meridian'],
    ['latitude_of_origin', 'Latitude_Of_Origin'],
    ['latitude_of_origin', 'Central_Parallel'],
    ['scale_factor', 'Scale_Factor'],
    ['k0', 'scale_factor'],
    ['latitude_of_center', 'Latitude_of_center'],
    ['lat0', 'latitude_of_center', d2r],
    ['longitude_of_center', 'Longitude_Of_Center'],
    ['longc', 'longitude_of_center', d2r],
    ['x0', 'false_easting', toMeter],
    ['y0', 'false_northing', toMeter],
    ['long0', 'central_meridian', d2r],
    ['lat0', 'latitude_of_origin', d2r],
    ['lat0', 'standard_parallel_1', d2r],
    ['lat1', 'standard_parallel_1', d2r],
    ['lat2', 'standard_parallel_2', d2r],
    ['alpha', 'azimuth', d2r],
    ['srsCode', 'name']
  ];
  list.forEach(renamer);
  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === "Lambert_Azimuthal_Equal_Area")) {
    wkt.long0 = wkt.longc;
  }
  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {
    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);
    wkt.lat_ts = wkt.lat1;
  }
}
module.exports = function(wkt, self) {
  var lisp = JSON.parse(("," + wkt).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g, ',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g, ',"$1"]').replace(/,\["VERTCS".+/,''));
  var type = lisp.shift();
  var name = lisp.shift();
  lisp.unshift(['name', name]);
  lisp.unshift(['type', type]);
  lisp.unshift('output');
  var obj = {};
  sExpr(lisp, obj);
  cleanWKT(obj.output);
  return extend(self, obj.output);
};

},{"./extend":61}],95:[function(require,module,exports){



/**
 * UTM zones are grouped, and assigned to one of a group of 6
 * sets.
 *
 * {int} @private
 */
var NUM_100K_SETS = 6;

/**
 * The column letters (for easting) of the lower left value, per
 * set.
 *
 * {string} @private
 */
var SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';

/**
 * The row letters (for northing) of the lower left value, per
 * set.
 *
 * {string} @private
 */
var SET_ORIGIN_ROW_LETTERS = 'AFAFAF';

var A = 65; // A
var I = 73; // I
var O = 79; // O
var V = 86; // V
var Z = 90; // Z

/**
 * Conversion of lat/lon to MGRS.
 *
 * @param {object} ll Object literal with lat and lon properties on a
 *     WGS84 ellipsoid.
 * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for
 *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.
 * @return {string} the MGRS string for the given location and accuracy.
 */
exports.forward = function(ll, accuracy) {
  accuracy = accuracy || 5; // default accuracy 1m
  return encode(LLtoUTM({
    lat: ll[1],
    lon: ll[0]
  }), accuracy);
};

/**
 * Conversion of MGRS to lat/lon.
 *
 * @param {string} mgrs MGRS string.
 * @return {array} An array with left (longitude), bottom (latitude), right
 *     (longitude) and top (latitude) values in WGS84, representing the
 *     bounding box for the provided MGRS reference.
 */
exports.inverse = function(mgrs) {
  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));
  if (bbox.lat && bbox.lon) {
    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];
  }
  return [bbox.left, bbox.bottom, bbox.right, bbox.top];
};

exports.toPoint = function(mgrs) {
  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));
  if (bbox.lat && bbox.lon) {
    return [bbox.lon, bbox.lat];
  }
  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];
};
/**
 * Conversion from degrees to radians.
 *
 * @private
 * @param {number} deg the angle in degrees.
 * @return {number} the angle in radians.
 */
function degToRad(deg) {
  return (deg * (Math.PI / 180.0));
}

/**
 * Conversion from radians to degrees.
 *
 * @private
 * @param {number} rad the angle in radians.
 * @return {number} the angle in degrees.
 */
function radToDeg(rad) {
  return (180.0 * (rad / Math.PI));
}

/**
 * Converts a set of Longitude and Latitude co-ordinates to UTM
 * using the WGS84 ellipsoid.
 *
 * @private
 * @param {object} ll Object literal with lat and lon properties
 *     representing the WGS84 coordinate to be converted.
 * @return {object} Object literal containing the UTM value with easting,
 *     northing, zoneNumber and zoneLetter properties, and an optional
 *     accuracy property in digits. Returns null if the conversion failed.
 */
function LLtoUTM(ll) {
  var Lat = ll.lat;
  var Long = ll.lon;
  var a = 6378137.0; //ellip.radius;
  var eccSquared = 0.00669438; //ellip.eccsq;
  var k0 = 0.9996;
  var LongOrigin;
  var eccPrimeSquared;
  var N, T, C, A, M;
  var LatRad = degToRad(Lat);
  var LongRad = degToRad(Long);
  var LongOriginRad;
  var ZoneNumber;
  // (int)
  ZoneNumber = Math.floor((Long + 180) / 6) + 1;

  //Make sure the longitude 180.00 is in Zone 60
  if (Long === 180) {
    ZoneNumber = 60;
  }

  // Special zone for Norway
  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {
    ZoneNumber = 32;
  }

  // Special zones for Svalbard
  if (Lat >= 72.0 && Lat < 84.0) {
    if (Long >= 0.0 && Long < 9.0) {
      ZoneNumber = 31;
    }
    else if (Long >= 9.0 && Long < 21.0) {
      ZoneNumber = 33;
    }
    else if (Long >= 21.0 && Long < 33.0) {
      ZoneNumber = 35;
    }
    else if (Long >= 33.0 && Long < 42.0) {
      ZoneNumber = 37;
    }
  }

  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin
  // in middle of
  // zone
  LongOriginRad = degToRad(LongOrigin);

  eccPrimeSquared = (eccSquared) / (1 - eccSquared);

  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));
  T = Math.tan(LatRad) * Math.tan(LatRad);
  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);
  A = Math.cos(LatRad) * (LongRad - LongOriginRad);

  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));

  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);

  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));
  if (Lat < 0.0) {
    UTMNorthing += 10000000.0; //10000000 meter offset for
    // southern hemisphere
  }

  return {
    northing: Math.round(UTMNorthing),
    easting: Math.round(UTMEasting),
    zoneNumber: ZoneNumber,
    zoneLetter: getLetterDesignator(Lat)
  };
}

/**
 * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience
 * class where the Zone can be specified as a single string eg."60N" which
 * is then broken down into the ZoneNumber and ZoneLetter.
 *
 * @private
 * @param {object} utm An object literal with northing, easting, zoneNumber
 *     and zoneLetter properties. If an optional accuracy property is
 *     provided (in meters), a bounding box will be returned instead of
 *     latitude and longitude.
 * @return {object} An object literal containing either lat and lon values
 *     (if no accuracy was provided), or top, right, bottom and left values
 *     for the bounding box calculated according to the provided accuracy.
 *     Returns null if the conversion failed.
 */
function UTMtoLL(utm) {

  var UTMNorthing = utm.northing;
  var UTMEasting = utm.easting;
  var zoneLetter = utm.zoneLetter;
  var zoneNumber = utm.zoneNumber;
  // check the ZoneNummber is valid
  if (zoneNumber < 0 || zoneNumber > 60) {
    return null;
  }

  var k0 = 0.9996;
  var a = 6378137.0; //ellip.radius;
  var eccSquared = 0.00669438; //ellip.eccsq;
  var eccPrimeSquared;
  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));
  var N1, T1, C1, R1, D, M;
  var LongOrigin;
  var mu, phi1Rad;

  // remove 500,000 meter offset for longitude
  var x = UTMEasting - 500000.0;
  var y = UTMNorthing;

  // We must know somehow if we are in the Northern or Southern
  // hemisphere, this is the only time we use the letter So even
  // if the Zone letter isn't exactly correct it should indicate
  // the hemisphere correctly
  if (zoneLetter < 'N') {
    y -= 10000000.0; // remove 10,000,000 meter offset used
    // for southern hemisphere
  }

  // There are 60 zones with zone 1 being at West -180 to -174
  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin
  // in middle of
  // zone

  eccPrimeSquared = (eccSquared) / (1 - eccSquared);

  M = y / k0;
  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));

  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);
  // double phi1 = ProjMath.radToDeg(phi1Rad);

  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));
  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);
  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);
  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);
  D = x / (N1 * k0);

  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);
  lat = radToDeg(lat);

  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);
  lon = LongOrigin + radToDeg(lon);

  var result;
  if (utm.accuracy) {
    var topRight = UTMtoLL({
      northing: utm.northing + utm.accuracy,
      easting: utm.easting + utm.accuracy,
      zoneLetter: utm.zoneLetter,
      zoneNumber: utm.zoneNumber
    });
    result = {
      top: topRight.lat,
      right: topRight.lon,
      bottom: lat,
      left: lon
    };
  }
  else {
    result = {
      lat: lat,
      lon: lon
    };
  }
  return result;
}

/**
 * Calculates the MGRS letter designator for the given latitude.
 *
 * @private
 * @param {number} lat The latitude in WGS84 to get the letter designator
 *     for.
 * @return {char} The letter designator.
 */
function getLetterDesignator(lat) {
  //This is here as an error flag to show that the Latitude is
  //outside MGRS limits
  var LetterDesignator = 'Z';

  if ((84 >= lat) && (lat >= 72)) {
    LetterDesignator = 'X';
  }
  else if ((72 > lat) && (lat >= 64)) {
    LetterDesignator = 'W';
  }
  else if ((64 > lat) && (lat >= 56)) {
    LetterDesignator = 'V';
  }
  else if ((56 > lat) && (lat >= 48)) {
    LetterDesignator = 'U';
  }
  else if ((48 > lat) && (lat >= 40)) {
    LetterDesignator = 'T';
  }
  else if ((40 > lat) && (lat >= 32)) {
    LetterDesignator = 'S';
  }
  else if ((32 > lat) && (lat >= 24)) {
    LetterDesignator = 'R';
  }
  else if ((24 > lat) && (lat >= 16)) {
    LetterDesignator = 'Q';
  }
  else if ((16 > lat) && (lat >= 8)) {
    LetterDesignator = 'P';
  }
  else if ((8 > lat) && (lat >= 0)) {
    LetterDesignator = 'N';
  }
  else if ((0 > lat) && (lat >= -8)) {
    LetterDesignator = 'M';
  }
  else if ((-8 > lat) && (lat >= -16)) {
    LetterDesignator = 'L';
  }
  else if ((-16 > lat) && (lat >= -24)) {
    LetterDesignator = 'K';
  }
  else if ((-24 > lat) && (lat >= -32)) {
    LetterDesignator = 'J';
  }
  else if ((-32 > lat) && (lat >= -40)) {
    LetterDesignator = 'H';
  }
  else if ((-40 > lat) && (lat >= -48)) {
    LetterDesignator = 'G';
  }
  else if ((-48 > lat) && (lat >= -56)) {
    LetterDesignator = 'F';
  }
  else if ((-56 > lat) && (lat >= -64)) {
    LetterDesignator = 'E';
  }
  else if ((-64 > lat) && (lat >= -72)) {
    LetterDesignator = 'D';
  }
  else if ((-72 > lat) && (lat >= -80)) {
    LetterDesignator = 'C';
  }
  return LetterDesignator;
}

/**
 * Encodes a UTM location as MGRS string.
 *
 * @private
 * @param {object} utm An object literal with easting, northing,
 *     zoneLetter, zoneNumber
 * @param {number} accuracy Accuracy in digits (1-5).
 * @return {string} MGRS string for the given UTM location.
 */
function encode(utm, accuracy) {
  // prepend with leading zeroes
  var seasting = "00000" + utm.easting,
    snorthing = "00000" + utm.northing;

  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);
}

/**
 * Get the two letter 100k designator for a given UTM easting,
 * northing and zone number value.
 *
 * @private
 * @param {number} easting
 * @param {number} northing
 * @param {number} zoneNumber
 * @return the two letter 100k designator for the given UTM location.
 */
function get100kID(easting, northing, zoneNumber) {
  var setParm = get100kSetForZone(zoneNumber);
  var setColumn = Math.floor(easting / 100000);
  var setRow = Math.floor(northing / 100000) % 20;
  return getLetter100kID(setColumn, setRow, setParm);
}

/**
 * Given a UTM zone number, figure out the MGRS 100K set it is in.
 *
 * @private
 * @param {number} i An UTM zone number.
 * @return {number} the 100k set the UTM zone is in.
 */
function get100kSetForZone(i) {
  var setParm = i % NUM_100K_SETS;
  if (setParm === 0) {
    setParm = NUM_100K_SETS;
  }

  return setParm;
}

/**
 * Get the two-letter MGRS 100k designator given information
 * translated from the UTM northing, easting and zone number.
 *
 * @private
 * @param {number} column the column index as it relates to the MGRS
 *        100k set spreadsheet, created from the UTM easting.
 *        Values are 1-8.
 * @param {number} row the row index as it relates to the MGRS 100k set
 *        spreadsheet, created from the UTM northing value. Values
 *        are from 0-19.
 * @param {number} parm the set block, as it relates to the MGRS 100k set
 *        spreadsheet, created from the UTM zone. Values are from
 *        1-60.
 * @return two letter MGRS 100k code.
 */
function getLetter100kID(column, row, parm) {
  // colOrigin and rowOrigin are the letters at the origin of the set
  var index = parm - 1;
  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);
  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);

  // colInt and rowInt are the letters to build to return
  var colInt = colOrigin + column - 1;
  var rowInt = rowOrigin + row;
  var rollover = false;

  if (colInt > Z) {
    colInt = colInt - Z + A - 1;
    rollover = true;
  }

  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {
    colInt++;
  }

  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {
    colInt++;

    if (colInt === I) {
      colInt++;
    }
  }

  if (colInt > Z) {
    colInt = colInt - Z + A - 1;
  }

  if (rowInt > V) {
    rowInt = rowInt - V + A - 1;
    rollover = true;
  }
  else {
    rollover = false;
  }

  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {
    rowInt++;
  }

  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {
    rowInt++;

    if (rowInt === I) {
      rowInt++;
    }
  }

  if (rowInt > V) {
    rowInt = rowInt - V + A - 1;
  }

  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);
  return twoLetter;
}

/**
 * Decode the UTM parameters from a MGRS string.
 *
 * @private
 * @param {string} mgrsString an UPPERCASE coordinate string is expected.
 * @return {object} An object literal with easting, northing, zoneLetter,
 *     zoneNumber and accuracy (in meters) properties.
 */
function decode(mgrsString) {

  if (mgrsString && mgrsString.length === 0) {
    throw ("MGRSPoint coverting from nothing");
  }

  var length = mgrsString.length;

  var hunK = null;
  var sb = "";
  var testChar;
  var i = 0;

  // get Zone number
  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {
    if (i >= 2) {
      throw ("MGRSPoint bad conversion from: " + mgrsString);
    }
    sb += testChar;
    i++;
  }

  var zoneNumber = parseInt(sb, 10);

  if (i === 0 || i + 3 > length) {
    // A good MGRS string has to be 4-5 digits long,
    // ##AAA/#AAA at least.
    throw ("MGRSPoint bad conversion from: " + mgrsString);
  }

  var zoneLetter = mgrsString.charAt(i++);

  // Should we check the zone letter here? Why not.
  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {
    throw ("MGRSPoint zone letter " + zoneLetter + " not handled: " + mgrsString);
  }

  hunK = mgrsString.substring(i, i += 2);

  var set = get100kSetForZone(zoneNumber);

  var east100k = getEastingFromChar(hunK.charAt(0), set);
  var north100k = getNorthingFromChar(hunK.charAt(1), set);

  // We have a bug where the northing may be 2000000 too low.
  // How
  // do we know when to roll over?

  while (north100k < getMinNorthing(zoneLetter)) {
    north100k += 2000000;
  }

  // calculate the char index for easting/northing separator
  var remainder = length - i;

  if (remainder % 2 !== 0) {
    throw ("MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters" + mgrsString);
  }

  var sep = remainder / 2;

  var sepEasting = 0.0;
  var sepNorthing = 0.0;
  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;
  if (sep > 0) {
    accuracyBonus = 100000.0 / Math.pow(10, sep);
    sepEastingString = mgrsString.substring(i, i + sep);
    sepEasting = parseFloat(sepEastingString) * accuracyBonus;
    sepNorthingString = mgrsString.substring(i + sep);
    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;
  }

  easting = sepEasting + east100k;
  northing = sepNorthing + north100k;

  return {
    easting: easting,
    northing: northing,
    zoneLetter: zoneLetter,
    zoneNumber: zoneNumber,
    accuracy: accuracyBonus
  };
}

/**
 * Given the first letter from a two-letter MGRS 100k zone, and given the
 * MGRS table set for the zone number, figure out the easting value that
 * should be added to the other, secondary easting value.
 *
 * @private
 * @param {char} e The first letter from a two-letter MGRS 100´k zone.
 * @param {number} set The MGRS table set for the zone number.
 * @return {number} The easting value for the given letter and set.
 */
function getEastingFromChar(e, set) {
  // colOrigin is the letter at the origin of the set for the
  // column
  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);
  var eastingValue = 100000.0;
  var rewindMarker = false;

  while (curCol !== e.charCodeAt(0)) {
    curCol++;
    if (curCol === I) {
      curCol++;
    }
    if (curCol === O) {
      curCol++;
    }
    if (curCol > Z) {
      if (rewindMarker) {
        throw ("Bad character: " + e);
      }
      curCol = A;
      rewindMarker = true;
    }
    eastingValue += 100000.0;
  }

  return eastingValue;
}

/**
 * Given the second letter from a two-letter MGRS 100k zone, and given the
 * MGRS table set for the zone number, figure out the northing value that
 * should be added to the other, secondary northing value. You have to
 * remember that Northings are determined from the equator, and the vertical
 * cycle of letters mean a 2000000 additional northing meters. This happens
 * approx. every 18 degrees of latitude. This method does *NOT* count any
 * additional northings. You have to figure out how many 2000000 meters need
 * to be added for the zone letter of the MGRS coordinate.
 *
 * @private
 * @param {char} n Second letter of the MGRS 100k zone
 * @param {number} set The MGRS table set number, which is dependent on the
 *     UTM zone number.
 * @return {number} The northing value for the given letter and set.
 */
function getNorthingFromChar(n, set) {

  if (n > 'V') {
    throw ("MGRSPoint given invalid Northing " + n);
  }

  // rowOrigin is the letter at the origin of the set for the
  // column
  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);
  var northingValue = 0.0;
  var rewindMarker = false;

  while (curRow !== n.charCodeAt(0)) {
    curRow++;
    if (curRow === I) {
      curRow++;
    }
    if (curRow === O) {
      curRow++;
    }
    // fixing a bug making whole application hang in this loop
    // when 'n' is a wrong character
    if (curRow > V) {
      if (rewindMarker) { // making sure that this loop ends
        throw ("Bad character: " + n);
      }
      curRow = A;
      rewindMarker = true;
    }
    northingValue += 100000.0;
  }

  return northingValue;
}

/**
 * The function getMinNorthing returns the minimum northing value of a MGRS
 * zone.
 *
 * Ported from Geotrans' c Lattitude_Band_Value structure table.
 *
 * @private
 * @param {char} zoneLetter The MGRS zone to get the min northing for.
 * @return {number}
 */
function getMinNorthing(zoneLetter) {
  var northing;
  switch (zoneLetter) {
  case 'C':
    northing = 1100000.0;
    break;
  case 'D':
    northing = 2000000.0;
    break;
  case 'E':
    northing = 2800000.0;
    break;
  case 'F':
    northing = 3700000.0;
    break;
  case 'G':
    northing = 4600000.0;
    break;
  case 'H':
    northing = 5500000.0;
    break;
  case 'J':
    northing = 6400000.0;
    break;
  case 'K':
    northing = 7300000.0;
    break;
  case 'L':
    northing = 8200000.0;
    break;
  case 'M':
    northing = 9100000.0;
    break;
  case 'N':
    northing = 0.0;
    break;
  case 'P':
    northing = 800000.0;
    break;
  case 'Q':
    northing = 1700000.0;
    break;
  case 'R':
    northing = 2600000.0;
    break;
  case 'S':
    northing = 3500000.0;
    break;
  case 'T':
    northing = 4400000.0;
    break;
  case 'U':
    northing = 5300000.0;
    break;
  case 'V':
    northing = 6200000.0;
    break;
  case 'W':
    northing = 7000000.0;
    break;
  case 'X':
    northing = 7900000.0;
    break;
  default:
    northing = -1.0;
  }
  if (northing >= 0.0) {
    return northing;
  }
  else {
    throw ("Invalid zone letter: " + zoneLetter);
  }

}

},{}],96:[function(require,module,exports){
module.exports={
  "name": "proj4",
  "version": "2.3.10",
  "description": "Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",
  "main": "lib/index.js",
  "directories": {
    "test": "test",
    "doc": "docs"
  },
  "scripts": {
    "test": "./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/proj4js/proj4js.git"
  },
  "author": "",
  "license": "MIT",
  "jam": {
    "main": "dist/proj4.js",
    "include": [
      "dist/proj4.js",
      "README.md",
      "AUTHORS",
      "LICENSE.md"
    ]
  },
  "devDependencies": {
    "grunt-cli": "~0.1.13",
    "grunt": "~0.4.2",
    "grunt-contrib-connect": "~0.6.0",
    "grunt-contrib-jshint": "~0.8.0",
    "chai": "~1.8.1",
    "mocha": "~1.17.1",
    "grunt-mocha-phantomjs": "~0.4.0",
    "browserify": "~3.24.5",
    "grunt-browserify": "~1.3.0",
    "grunt-contrib-uglify": "~0.3.2",
    "curl": "git://github.com/cujojs/curl.git",
    "istanbul": "~0.2.4",
    "tin": "~0.4.0"
  },
  "dependencies": {
    "mgrs": "~0.0.2"
  },
  "contributors": [
    {
      "name": "Mike Adair",
      "email": "madair@dmsolutions.ca"
    },
    {
      "name": "Richard Greenwood",
      "email": "rich@greenwoodmap.com"
    },
    {
      "name": "Calvin Metcalf",
      "email": "calvin.metcalf@gmail.com"
    },
    {
      "name": "Richard Marsden",
      "url": "http://www.winwaed.com"
    },
    {
      "name": "T. Mittan"
    },
    {
      "name": "D. Steinwand"
    },
    {
      "name": "S. Nelson"
    }
  ],
  "gitHead": "ac03d1439491dc313da80985193f702ca471b3d0",
  "bugs": {
    "url": "https://github.com/proj4js/proj4js/issues"
  },
  "homepage": "https://github.com/proj4js/proj4js#readme",
  "_id": "proj4@2.3.10",
  "_shasum": "f6e66bdcca332c25a5e3d8ef265cfc9d7b60fd0c",
  "_from": "proj4@2.3.10",
  "_npmVersion": "2.11.2",
  "_nodeVersion": "0.12.5",
  "_npmUser": {
    "name": "ahocevar",
    "email": "andreas.hocevar@gmail.com"
  },
  "maintainers": [
    {
      "name": "cwmma",
      "email": "calvin.metcalf@gmail.com"
    },
    {
      "name": "ahocevar",
      "email": "andreas.hocevar@gmail.com"
    }
  ],
  "dist": {
    "shasum": "f6e66bdcca332c25a5e3d8ef265cfc9d7b60fd0c",
    "tarball": "https://registry.npmjs.org/proj4/-/proj4-2.3.10.tgz"
  },
  "_resolved": "https://registry.npmjs.org/proj4/-/proj4-2.3.10.tgz"
}

},{}],97:[function(require,module,exports){
module.exports = {
    "Bloodhound": require("typeahead.js/dist/bloodhound.js"),
    "loadjQueryPlugin": function() {require("typeahead.js");}
};

},{"typeahead.js":99,"typeahead.js/dist/bloodhound.js":98}],98:[function(require,module,exports){
/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */

(function(root, factory) {
    if (typeof define === "function" && define.amd) {
        define("bloodhound", [ "jquery" ], function(a0) {
            return root["Bloodhound"] = factory(a0);
        });
    } else if (typeof exports === "object") {
        module.exports = factory(require("jquery"));
    } else {
        root["Bloodhound"] = factory(jQuery);
    }
})(this, function($) {
    var _ = function() {
        "use strict";
        return {
            isMsie: function() {
                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
            },
            isBlankString: function(str) {
                return !str || /^\s*$/.test(str);
            },
            escapeRegExChars: function(str) {
                return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
            },
            isString: function(obj) {
                return typeof obj === "string";
            },
            isNumber: function(obj) {
                return typeof obj === "number";
            },
            isArray: $.isArray,
            isFunction: $.isFunction,
            isObject: $.isPlainObject,
            isUndefined: function(obj) {
                return typeof obj === "undefined";
            },
            isElement: function(obj) {
                return !!(obj && obj.nodeType === 1);
            },
            isJQuery: function(obj) {
                return obj instanceof $;
            },
            toStr: function toStr(s) {
                return _.isUndefined(s) || s === null ? "" : s + "";
            },
            bind: $.proxy,
            each: function(collection, cb) {
                $.each(collection, reverseArgs);
                function reverseArgs(index, value) {
                    return cb(value, index);
                }
            },
            map: $.map,
            filter: $.grep,
            every: function(obj, test) {
                var result = true;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (!(result = test.call(null, val, key, obj))) {
                        return false;
                    }
                });
                return !!result;
            },
            some: function(obj, test) {
                var result = false;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (result = test.call(null, val, key, obj)) {
                        return false;
                    }
                });
                return !!result;
            },
            mixin: $.extend,
            identity: function(x) {
                return x;
            },
            clone: function(obj) {
                return $.extend(true, {}, obj);
            },
            getIdGenerator: function() {
                var counter = 0;
                return function() {
                    return counter++;
                };
            },
            templatify: function templatify(obj) {
                return $.isFunction(obj) ? obj : template;
                function template() {
                    return String(obj);
                }
            },
            defer: function(fn) {
                setTimeout(fn, 0);
            },
            debounce: function(func, wait, immediate) {
                var timeout, result;
                return function() {
                    var context = this, args = arguments, later, callNow;
                    later = function() {
                        timeout = null;
                        if (!immediate) {
                            result = func.apply(context, args);
                        }
                    };
                    callNow = immediate && !timeout;
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                    if (callNow) {
                        result = func.apply(context, args);
                    }
                    return result;
                };
            },
            throttle: function(func, wait) {
                var context, args, timeout, result, previous, later;
                previous = 0;
                later = function() {
                    previous = new Date();
                    timeout = null;
                    result = func.apply(context, args);
                };
                return function() {
                    var now = new Date(), remaining = wait - (now - previous);
                    context = this;
                    args = arguments;
                    if (remaining <= 0) {
                        clearTimeout(timeout);
                        timeout = null;
                        previous = now;
                        result = func.apply(context, args);
                    } else if (!timeout) {
                        timeout = setTimeout(later, remaining);
                    }
                    return result;
                };
            },
            stringify: function(val) {
                return _.isString(val) ? val : JSON.stringify(val);
            },
            noop: function() {}
        };
    }();
    var VERSION = "0.11.1";
    var tokenizers = function() {
        "use strict";
        return {
            nonword: nonword,
            whitespace: whitespace,
            obj: {
                nonword: getObjTokenizer(nonword),
                whitespace: getObjTokenizer(whitespace)
            }
        };
        function whitespace(str) {
            str = _.toStr(str);
            return str ? str.split(/\s+/) : [];
        }
        function nonword(str) {
            str = _.toStr(str);
            return str ? str.split(/\W+/) : [];
        }
        function getObjTokenizer(tokenizer) {
            return function setKey(keys) {
                keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);
                return function tokenize(o) {
                    var tokens = [];
                    _.each(keys, function(k) {
                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));
                    });
                    return tokens;
                };
            };
        }
    }();
    var LruCache = function() {
        "use strict";
        function LruCache(maxSize) {
            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;
            this.reset();
            if (this.maxSize <= 0) {
                this.set = this.get = $.noop;
            }
        }
        _.mixin(LruCache.prototype, {
            set: function set(key, val) {
                var tailItem = this.list.tail, node;
                if (this.size >= this.maxSize) {
                    this.list.remove(tailItem);
                    delete this.hash[tailItem.key];
                    this.size--;
                }
                if (node = this.hash[key]) {
                    node.val = val;
                    this.list.moveToFront(node);
                } else {
                    node = new Node(key, val);
                    this.list.add(node);
                    this.hash[key] = node;
                    this.size++;
                }
            },
            get: function get(key) {
                var node = this.hash[key];
                if (node) {
                    this.list.moveToFront(node);
                    return node.val;
                }
            },
            reset: function reset() {
                this.size = 0;
                this.hash = {};
                this.list = new List();
            }
        });
        function List() {
            this.head = this.tail = null;
        }
        _.mixin(List.prototype, {
            add: function add(node) {
                if (this.head) {
                    node.next = this.head;
                    this.head.prev = node;
                }
                this.head = node;
                this.tail = this.tail || node;
            },
            remove: function remove(node) {
                node.prev ? node.prev.next = node.next : this.head = node.next;
                node.next ? node.next.prev = node.prev : this.tail = node.prev;
            },
            moveToFront: function(node) {
                this.remove(node);
                this.add(node);
            }
        });
        function Node(key, val) {
            this.key = key;
            this.val = val;
            this.prev = this.next = null;
        }
        return LruCache;
    }();
    var PersistentStorage = function() {
        "use strict";
        var LOCAL_STORAGE;
        try {
            LOCAL_STORAGE = window.localStorage;
            LOCAL_STORAGE.setItem("~~~", "!");
            LOCAL_STORAGE.removeItem("~~~");
        } catch (err) {
            LOCAL_STORAGE = null;
        }
        function PersistentStorage(namespace, override) {
            this.prefix = [ "__", namespace, "__" ].join("");
            this.ttlKey = "__ttl__";
            this.keyMatcher = new RegExp("^" + _.escapeRegExChars(this.prefix));
            this.ls = override || LOCAL_STORAGE;
            !this.ls && this._noop();
        }
        _.mixin(PersistentStorage.prototype, {
            _prefix: function(key) {
                return this.prefix + key;
            },
            _ttlKey: function(key) {
                return this._prefix(key) + this.ttlKey;
            },
            _noop: function() {
                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;
            },
            _safeSet: function(key, val) {
                try {
                    this.ls.setItem(key, val);
                } catch (err) {
                    if (err.name === "QuotaExceededError") {
                        this.clear();
                        this._noop();
                    }
                }
            },
            get: function(key) {
                if (this.isExpired(key)) {
                    this.remove(key);
                }
                return decode(this.ls.getItem(this._prefix(key)));
            },
            set: function(key, val, ttl) {
                if (_.isNumber(ttl)) {
                    this._safeSet(this._ttlKey(key), encode(now() + ttl));
                } else {
                    this.ls.removeItem(this._ttlKey(key));
                }
                return this._safeSet(this._prefix(key), encode(val));
            },
            remove: function(key) {
                this.ls.removeItem(this._ttlKey(key));
                this.ls.removeItem(this._prefix(key));
                return this;
            },
            clear: function() {
                var i, keys = gatherMatchingKeys(this.keyMatcher);
                for (i = keys.length; i--; ) {
                    this.remove(keys[i]);
                }
                return this;
            },
            isExpired: function(key) {
                var ttl = decode(this.ls.getItem(this._ttlKey(key)));
                return _.isNumber(ttl) && now() > ttl ? true : false;
            }
        });
        return PersistentStorage;
        function now() {
            return new Date().getTime();
        }
        function encode(val) {
            return JSON.stringify(_.isUndefined(val) ? null : val);
        }
        function decode(val) {
            return $.parseJSON(val);
        }
        function gatherMatchingKeys(keyMatcher) {
            var i, key, keys = [], len = LOCAL_STORAGE.length;
            for (i = 0; i < len; i++) {
                if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {
                    keys.push(key.replace(keyMatcher, ""));
                }
            }
            return keys;
        }
    }();
    var Transport = function() {
        "use strict";
        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);
        function Transport(o) {
            o = o || {};
            this.cancelled = false;
            this.lastReq = null;
            this._send = o.transport;
            this._get = o.limiter ? o.limiter(this._get) : this._get;
            this._cache = o.cache === false ? new LruCache(0) : sharedCache;
        }
        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {
            maxPendingRequests = num;
        };
        Transport.resetCache = function resetCache() {
            sharedCache.reset();
        };
        _.mixin(Transport.prototype, {
            _fingerprint: function fingerprint(o) {
                o = o || {};
                return o.url + o.type + $.param(o.data || {});
            },
            _get: function(o, cb) {
                var that = this, fingerprint, jqXhr;
                fingerprint = this._fingerprint(o);
                if (this.cancelled || fingerprint !== this.lastReq) {
                    return;
                }
                if (jqXhr = pendingRequests[fingerprint]) {
                    jqXhr.done(done).fail(fail);
                } else if (pendingRequestsCount < maxPendingRequests) {
                    pendingRequestsCount++;
                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);
                } else {
                    this.onDeckRequestArgs = [].slice.call(arguments, 0);
                }
                function done(resp) {
                    cb(null, resp);
                    that._cache.set(fingerprint, resp);
                }
                function fail() {
                    cb(true);
                }
                function always() {
                    pendingRequestsCount--;
                    delete pendingRequests[fingerprint];
                    if (that.onDeckRequestArgs) {
                        that._get.apply(that, that.onDeckRequestArgs);
                        that.onDeckRequestArgs = null;
                    }
                }
            },
            get: function(o, cb) {
                var resp, fingerprint;
                cb = cb || $.noop;
                o = _.isString(o) ? {
                    url: o
                } : o || {};
                fingerprint = this._fingerprint(o);
                this.cancelled = false;
                this.lastReq = fingerprint;
                if (resp = this._cache.get(fingerprint)) {
                    cb(null, resp);
                } else {
                    this._get(o, cb);
                }
            },
            cancel: function() {
                this.cancelled = true;
            }
        });
        return Transport;
    }();
    var SearchIndex = window.SearchIndex = function() {
        "use strict";
        var CHILDREN = "c", IDS = "i";
        function SearchIndex(o) {
            o = o || {};
            if (!o.datumTokenizer || !o.queryTokenizer) {
                $.error("datumTokenizer and queryTokenizer are both required");
            }
            this.identify = o.identify || _.stringify;
            this.datumTokenizer = o.datumTokenizer;
            this.queryTokenizer = o.queryTokenizer;
            this.reset();
        }
        _.mixin(SearchIndex.prototype, {
            bootstrap: function bootstrap(o) {
                this.datums = o.datums;
                this.trie = o.trie;
            },
            add: function(data) {
                var that = this;
                data = _.isArray(data) ? data : [ data ];
                _.each(data, function(datum) {
                    var id, tokens;
                    that.datums[id = that.identify(datum)] = datum;
                    tokens = normalizeTokens(that.datumTokenizer(datum));
                    _.each(tokens, function(token) {
                        var node, chars, ch;
                        node = that.trie;
                        chars = token.split("");
                        while (ch = chars.shift()) {
                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());
                            node[IDS].push(id);
                        }
                    });
                });
            },
            get: function get(ids) {
                var that = this;
                return _.map(ids, function(id) {
                    return that.datums[id];
                });
            },
            search: function search(query) {
                var that = this, tokens, matches;
                tokens = normalizeTokens(this.queryTokenizer(query));
                _.each(tokens, function(token) {
                    var node, chars, ch, ids;
                    if (matches && matches.length === 0) {
                        return false;
                    }
                    node = that.trie;
                    chars = token.split("");
                    while (node && (ch = chars.shift())) {
                        node = node[CHILDREN][ch];
                    }
                    if (node && chars.length === 0) {
                        ids = node[IDS].slice(0);
                        matches = matches ? getIntersection(matches, ids) : ids;
                    } else {
                        matches = [];
                        return false;
                    }
                });
                return matches ? _.map(unique(matches), function(id) {
                    return that.datums[id];
                }) : [];
            },
            all: function all() {
                var values = [];
                for (var key in this.datums) {
                    values.push(this.datums[key]);
                }
                return values;
            },
            reset: function reset() {
                this.datums = {};
                this.trie = newNode();
            },
            serialize: function serialize() {
                return {
                    datums: this.datums,
                    trie: this.trie
                };
            }
        });
        return SearchIndex;
        function normalizeTokens(tokens) {
            tokens = _.filter(tokens, function(token) {
                return !!token;
            });
            tokens = _.map(tokens, function(token) {
                return token.toLowerCase();
            });
            return tokens;
        }
        function newNode() {
            var node = {};
            node[IDS] = [];
            node[CHILDREN] = {};
            return node;
        }
        function unique(array) {
            var seen = {}, uniques = [];
            for (var i = 0, len = array.length; i < len; i++) {
                if (!seen[array[i]]) {
                    seen[array[i]] = true;
                    uniques.push(array[i]);
                }
            }
            return uniques;
        }
        function getIntersection(arrayA, arrayB) {
            var ai = 0, bi = 0, intersection = [];
            arrayA = arrayA.sort();
            arrayB = arrayB.sort();
            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;
            while (ai < lenArrayA && bi < lenArrayB) {
                if (arrayA[ai] < arrayB[bi]) {
                    ai++;
                } else if (arrayA[ai] > arrayB[bi]) {
                    bi++;
                } else {
                    intersection.push(arrayA[ai]);
                    ai++;
                    bi++;
                }
            }
            return intersection;
        }
    }();
    var Prefetch = function() {
        "use strict";
        var keys;
        keys = {
            data: "data",
            protocol: "protocol",
            thumbprint: "thumbprint"
        };
        function Prefetch(o) {
            this.url = o.url;
            this.ttl = o.ttl;
            this.cache = o.cache;
            this.prepare = o.prepare;
            this.transform = o.transform;
            this.transport = o.transport;
            this.thumbprint = o.thumbprint;
            this.storage = new PersistentStorage(o.cacheKey);
        }
        _.mixin(Prefetch.prototype, {
            _settings: function settings() {
                return {
                    url: this.url,
                    type: "GET",
                    dataType: "json"
                };
            },
            store: function store(data) {
                if (!this.cache) {
                    return;
                }
                this.storage.set(keys.data, data, this.ttl);
                this.storage.set(keys.protocol, location.protocol, this.ttl);
                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);
            },
            fromCache: function fromCache() {
                var stored = {}, isExpired;
                if (!this.cache) {
                    return null;
                }
                stored.data = this.storage.get(keys.data);
                stored.protocol = this.storage.get(keys.protocol);
                stored.thumbprint = this.storage.get(keys.thumbprint);
                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;
                return stored.data && !isExpired ? stored.data : null;
            },
            fromNetwork: function(cb) {
                var that = this, settings;
                if (!cb) {
                    return;
                }
                settings = this.prepare(this._settings());
                this.transport(settings).fail(onError).done(onResponse);
                function onError() {
                    cb(true);
                }
                function onResponse(resp) {
                    cb(null, that.transform(resp));
                }
            },
            clear: function clear() {
                this.storage.clear();
                return this;
            }
        });
        return Prefetch;
    }();
    var Remote = function() {
        "use strict";
        function Remote(o) {
            this.url = o.url;
            this.prepare = o.prepare;
            this.transform = o.transform;
            this.transport = new Transport({
                cache: o.cache,
                limiter: o.limiter,
                transport: o.transport
            });
        }
        _.mixin(Remote.prototype, {
            _settings: function settings() {
                return {
                    url: this.url,
                    type: "GET",
                    dataType: "json"
                };
            },
            get: function get(query, cb) {
                var that = this, settings;
                if (!cb) {
                    return;
                }
                query = query || "";
                settings = this.prepare(query, this._settings());
                return this.transport.get(settings, onResponse);
                function onResponse(err, resp) {
                    err ? cb([]) : cb(that.transform(resp));
                }
            },
            cancelLastRequest: function cancelLastRequest() {
                this.transport.cancel();
            }
        });
        return Remote;
    }();
    var oParser = function() {
        "use strict";
        return function parse(o) {
            var defaults, sorter;
            defaults = {
                initialize: true,
                identify: _.stringify,
                datumTokenizer: null,
                queryTokenizer: null,
                sufficient: 5,
                sorter: null,
                local: [],
                prefetch: null,
                remote: null
            };
            o = _.mixin(defaults, o || {});
            !o.datumTokenizer && $.error("datumTokenizer is required");
            !o.queryTokenizer && $.error("queryTokenizer is required");
            sorter = o.sorter;
            o.sorter = sorter ? function(x) {
                return x.sort(sorter);
            } : _.identity;
            o.local = _.isFunction(o.local) ? o.local() : o.local;
            o.prefetch = parsePrefetch(o.prefetch);
            o.remote = parseRemote(o.remote);
            return o;
        };
        function parsePrefetch(o) {
            var defaults;
            if (!o) {
                return null;
            }
            defaults = {
                url: null,
                ttl: 24 * 60 * 60 * 1e3,
                cache: true,
                cacheKey: null,
                thumbprint: "",
                prepare: _.identity,
                transform: _.identity,
                transport: null
            };
            o = _.isString(o) ? {
                url: o
            } : o;
            o = _.mixin(defaults, o);
            !o.url && $.error("prefetch requires url to be set");
            o.transform = o.filter || o.transform;
            o.cacheKey = o.cacheKey || o.url;
            o.thumbprint = VERSION + o.thumbprint;
            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
            return o;
        }
        function parseRemote(o) {
            var defaults;
            if (!o) {
                return;
            }
            defaults = {
                url: null,
                cache: true,
                prepare: null,
                replace: null,
                wildcard: null,
                limiter: null,
                rateLimitBy: "debounce",
                rateLimitWait: 300,
                transform: _.identity,
                transport: null
            };
            o = _.isString(o) ? {
                url: o
            } : o;
            o = _.mixin(defaults, o);
            !o.url && $.error("remote requires url to be set");
            o.transform = o.filter || o.transform;
            o.prepare = toRemotePrepare(o);
            o.limiter = toLimiter(o);
            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
            delete o.replace;
            delete o.wildcard;
            delete o.rateLimitBy;
            delete o.rateLimitWait;
            return o;
        }
        function toRemotePrepare(o) {
            var prepare, replace, wildcard;
            prepare = o.prepare;
            replace = o.replace;
            wildcard = o.wildcard;
            if (prepare) {
                return prepare;
            }
            if (replace) {
                prepare = prepareByReplace;
            } else if (o.wildcard) {
                prepare = prepareByWildcard;
            } else {
                prepare = idenityPrepare;
            }
            return prepare;
            function prepareByReplace(query, settings) {
                settings.url = replace(settings.url, query);
                return settings;
            }
            function prepareByWildcard(query, settings) {
                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));
                return settings;
            }
            function idenityPrepare(query, settings) {
                return settings;
            }
        }
        function toLimiter(o) {
            var limiter, method, wait;
            limiter = o.limiter;
            method = o.rateLimitBy;
            wait = o.rateLimitWait;
            if (!limiter) {
                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);
            }
            return limiter;
            function debounce(wait) {
                return function debounce(fn) {
                    return _.debounce(fn, wait);
                };
            }
            function throttle(wait) {
                return function throttle(fn) {
                    return _.throttle(fn, wait);
                };
            }
        }
        function callbackToDeferred(fn) {
            return function wrapper(o) {
                var deferred = $.Deferred();
                fn(o, onSuccess, onError);
                return deferred;
                function onSuccess(resp) {
                    _.defer(function() {
                        deferred.resolve(resp);
                    });
                }
                function onError(err) {
                    _.defer(function() {
                        deferred.reject(err);
                    });
                }
            };
        }
    }();
    var Bloodhound = function() {
        "use strict";
        var old;
        old = window && window.Bloodhound;
        function Bloodhound(o) {
            o = oParser(o);
            this.sorter = o.sorter;
            this.identify = o.identify;
            this.sufficient = o.sufficient;
            this.local = o.local;
            this.remote = o.remote ? new Remote(o.remote) : null;
            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;
            this.index = new SearchIndex({
                identify: this.identify,
                datumTokenizer: o.datumTokenizer,
                queryTokenizer: o.queryTokenizer
            });
            o.initialize !== false && this.initialize();
        }
        Bloodhound.noConflict = function noConflict() {
            window && (window.Bloodhound = old);
            return Bloodhound;
        };
        Bloodhound.tokenizers = tokenizers;
        _.mixin(Bloodhound.prototype, {
            __ttAdapter: function ttAdapter() {
                var that = this;
                return this.remote ? withAsync : withoutAsync;
                function withAsync(query, sync, async) {
                    return that.search(query, sync, async);
                }
                function withoutAsync(query, sync) {
                    return that.search(query, sync);
                }
            },
            _loadPrefetch: function loadPrefetch() {
                var that = this, deferred, serialized;
                deferred = $.Deferred();
                if (!this.prefetch) {
                    deferred.resolve();
                } else if (serialized = this.prefetch.fromCache()) {
                    this.index.bootstrap(serialized);
                    deferred.resolve();
                } else {
                    this.prefetch.fromNetwork(done);
                }
                return deferred.promise();
                function done(err, data) {
                    if (err) {
                        return deferred.reject();
                    }
                    that.add(data);
                    that.prefetch.store(that.index.serialize());
                    deferred.resolve();
                }
            },
            _initialize: function initialize() {
                var that = this, deferred;
                this.clear();
                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);
                return this.initPromise;
                function addLocalToIndex() {
                    that.add(that.local);
                }
            },
            initialize: function initialize(force) {
                return !this.initPromise || force ? this._initialize() : this.initPromise;
            },
            add: function add(data) {
                this.index.add(data);
                return this;
            },
            get: function get(ids) {
                ids = _.isArray(ids) ? ids : [].slice.call(arguments);
                return this.index.get(ids);
            },
            search: function search(query, sync, async) {
                var that = this, local;
                local = this.sorter(this.index.search(query));
                sync(this.remote ? local.slice() : local);
                if (this.remote && local.length < this.sufficient) {
                    this.remote.get(query, processRemote);
                } else if (this.remote) {
                    this.remote.cancelLastRequest();
                }
                return this;
                function processRemote(remote) {
                    var nonDuplicates = [];
                    _.each(remote, function(r) {
                        !_.some(local, function(l) {
                            return that.identify(r) === that.identify(l);
                        }) && nonDuplicates.push(r);
                    });
                    async && async(nonDuplicates);
                }
            },
            all: function all() {
                return this.index.all();
            },
            clear: function clear() {
                this.index.reset();
                return this;
            },
            clearPrefetchCache: function clearPrefetchCache() {
                this.prefetch && this.prefetch.clear();
                return this;
            },
            clearRemoteCache: function clearRemoteCache() {
                Transport.resetCache();
                return this;
            },
            ttAdapter: function ttAdapter() {
                return this.__ttAdapter();
            }
        });
        return Bloodhound;
    }();
    return Bloodhound;
});
},{"jquery":25}],99:[function(require,module,exports){
/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */

(function(root, factory) {
    if (typeof define === "function" && define.amd) {
        define("bloodhound", [ "jquery" ], function(a0) {
            return root["Bloodhound"] = factory(a0);
        });
    } else if (typeof exports === "object") {
        module.exports = factory(require("jquery"));
    } else {
        root["Bloodhound"] = factory(jQuery);
    }
})(this, function($) {
    var _ = function() {
        "use strict";
        return {
            isMsie: function() {
                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
            },
            isBlankString: function(str) {
                return !str || /^\s*$/.test(str);
            },
            escapeRegExChars: function(str) {
                return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
            },
            isString: function(obj) {
                return typeof obj === "string";
            },
            isNumber: function(obj) {
                return typeof obj === "number";
            },
            isArray: $.isArray,
            isFunction: $.isFunction,
            isObject: $.isPlainObject,
            isUndefined: function(obj) {
                return typeof obj === "undefined";
            },
            isElement: function(obj) {
                return !!(obj && obj.nodeType === 1);
            },
            isJQuery: function(obj) {
                return obj instanceof $;
            },
            toStr: function toStr(s) {
                return _.isUndefined(s) || s === null ? "" : s + "";
            },
            bind: $.proxy,
            each: function(collection, cb) {
                $.each(collection, reverseArgs);
                function reverseArgs(index, value) {
                    return cb(value, index);
                }
            },
            map: $.map,
            filter: $.grep,
            every: function(obj, test) {
                var result = true;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (!(result = test.call(null, val, key, obj))) {
                        return false;
                    }
                });
                return !!result;
            },
            some: function(obj, test) {
                var result = false;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (result = test.call(null, val, key, obj)) {
                        return false;
                    }
                });
                return !!result;
            },
            mixin: $.extend,
            identity: function(x) {
                return x;
            },
            clone: function(obj) {
                return $.extend(true, {}, obj);
            },
            getIdGenerator: function() {
                var counter = 0;
                return function() {
                    return counter++;
                };
            },
            templatify: function templatify(obj) {
                return $.isFunction(obj) ? obj : template;
                function template() {
                    return String(obj);
                }
            },
            defer: function(fn) {
                setTimeout(fn, 0);
            },
            debounce: function(func, wait, immediate) {
                var timeout, result;
                return function() {
                    var context = this, args = arguments, later, callNow;
                    later = function() {
                        timeout = null;
                        if (!immediate) {
                            result = func.apply(context, args);
                        }
                    };
                    callNow = immediate && !timeout;
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                    if (callNow) {
                        result = func.apply(context, args);
                    }
                    return result;
                };
            },
            throttle: function(func, wait) {
                var context, args, timeout, result, previous, later;
                previous = 0;
                later = function() {
                    previous = new Date();
                    timeout = null;
                    result = func.apply(context, args);
                };
                return function() {
                    var now = new Date(), remaining = wait - (now - previous);
                    context = this;
                    args = arguments;
                    if (remaining <= 0) {
                        clearTimeout(timeout);
                        timeout = null;
                        previous = now;
                        result = func.apply(context, args);
                    } else if (!timeout) {
                        timeout = setTimeout(later, remaining);
                    }
                    return result;
                };
            },
            stringify: function(val) {
                return _.isString(val) ? val : JSON.stringify(val);
            },
            noop: function() {}
        };
    }();
    var VERSION = "0.11.1";
    var tokenizers = function() {
        "use strict";
        return {
            nonword: nonword,
            whitespace: whitespace,
            obj: {
                nonword: getObjTokenizer(nonword),
                whitespace: getObjTokenizer(whitespace)
            }
        };
        function whitespace(str) {
            str = _.toStr(str);
            return str ? str.split(/\s+/) : [];
        }
        function nonword(str) {
            str = _.toStr(str);
            return str ? str.split(/\W+/) : [];
        }
        function getObjTokenizer(tokenizer) {
            return function setKey(keys) {
                keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);
                return function tokenize(o) {
                    var tokens = [];
                    _.each(keys, function(k) {
                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));
                    });
                    return tokens;
                };
            };
        }
    }();
    var LruCache = function() {
        "use strict";
        function LruCache(maxSize) {
            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;
            this.reset();
            if (this.maxSize <= 0) {
                this.set = this.get = $.noop;
            }
        }
        _.mixin(LruCache.prototype, {
            set: function set(key, val) {
                var tailItem = this.list.tail, node;
                if (this.size >= this.maxSize) {
                    this.list.remove(tailItem);
                    delete this.hash[tailItem.key];
                    this.size--;
                }
                if (node = this.hash[key]) {
                    node.val = val;
                    this.list.moveToFront(node);
                } else {
                    node = new Node(key, val);
                    this.list.add(node);
                    this.hash[key] = node;
                    this.size++;
                }
            },
            get: function get(key) {
                var node = this.hash[key];
                if (node) {
                    this.list.moveToFront(node);
                    return node.val;
                }
            },
            reset: function reset() {
                this.size = 0;
                this.hash = {};
                this.list = new List();
            }
        });
        function List() {
            this.head = this.tail = null;
        }
        _.mixin(List.prototype, {
            add: function add(node) {
                if (this.head) {
                    node.next = this.head;
                    this.head.prev = node;
                }
                this.head = node;
                this.tail = this.tail || node;
            },
            remove: function remove(node) {
                node.prev ? node.prev.next = node.next : this.head = node.next;
                node.next ? node.next.prev = node.prev : this.tail = node.prev;
            },
            moveToFront: function(node) {
                this.remove(node);
                this.add(node);
            }
        });
        function Node(key, val) {
            this.key = key;
            this.val = val;
            this.prev = this.next = null;
        }
        return LruCache;
    }();
    var PersistentStorage = function() {
        "use strict";
        var LOCAL_STORAGE;
        try {
            LOCAL_STORAGE = window.localStorage;
            LOCAL_STORAGE.setItem("~~~", "!");
            LOCAL_STORAGE.removeItem("~~~");
        } catch (err) {
            LOCAL_STORAGE = null;
        }
        function PersistentStorage(namespace, override) {
            this.prefix = [ "__", namespace, "__" ].join("");
            this.ttlKey = "__ttl__";
            this.keyMatcher = new RegExp("^" + _.escapeRegExChars(this.prefix));
            this.ls = override || LOCAL_STORAGE;
            !this.ls && this._noop();
        }
        _.mixin(PersistentStorage.prototype, {
            _prefix: function(key) {
                return this.prefix + key;
            },
            _ttlKey: function(key) {
                return this._prefix(key) + this.ttlKey;
            },
            _noop: function() {
                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;
            },
            _safeSet: function(key, val) {
                try {
                    this.ls.setItem(key, val);
                } catch (err) {
                    if (err.name === "QuotaExceededError") {
                        this.clear();
                        this._noop();
                    }
                }
            },
            get: function(key) {
                if (this.isExpired(key)) {
                    this.remove(key);
                }
                return decode(this.ls.getItem(this._prefix(key)));
            },
            set: function(key, val, ttl) {
                if (_.isNumber(ttl)) {
                    this._safeSet(this._ttlKey(key), encode(now() + ttl));
                } else {
                    this.ls.removeItem(this._ttlKey(key));
                }
                return this._safeSet(this._prefix(key), encode(val));
            },
            remove: function(key) {
                this.ls.removeItem(this._ttlKey(key));
                this.ls.removeItem(this._prefix(key));
                return this;
            },
            clear: function() {
                var i, keys = gatherMatchingKeys(this.keyMatcher);
                for (i = keys.length; i--; ) {
                    this.remove(keys[i]);
                }
                return this;
            },
            isExpired: function(key) {
                var ttl = decode(this.ls.getItem(this._ttlKey(key)));
                return _.isNumber(ttl) && now() > ttl ? true : false;
            }
        });
        return PersistentStorage;
        function now() {
            return new Date().getTime();
        }
        function encode(val) {
            return JSON.stringify(_.isUndefined(val) ? null : val);
        }
        function decode(val) {
            return $.parseJSON(val);
        }
        function gatherMatchingKeys(keyMatcher) {
            var i, key, keys = [], len = LOCAL_STORAGE.length;
            for (i = 0; i < len; i++) {
                if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {
                    keys.push(key.replace(keyMatcher, ""));
                }
            }
            return keys;
        }
    }();
    var Transport = function() {
        "use strict";
        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);
        function Transport(o) {
            o = o || {};
            this.cancelled = false;
            this.lastReq = null;
            this._send = o.transport;
            this._get = o.limiter ? o.limiter(this._get) : this._get;
            this._cache = o.cache === false ? new LruCache(0) : sharedCache;
        }
        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {
            maxPendingRequests = num;
        };
        Transport.resetCache = function resetCache() {
            sharedCache.reset();
        };
        _.mixin(Transport.prototype, {
            _fingerprint: function fingerprint(o) {
                o = o || {};
                return o.url + o.type + $.param(o.data || {});
            },
            _get: function(o, cb) {
                var that = this, fingerprint, jqXhr;
                fingerprint = this._fingerprint(o);
                if (this.cancelled || fingerprint !== this.lastReq) {
                    return;
                }
                if (jqXhr = pendingRequests[fingerprint]) {
                    jqXhr.done(done).fail(fail);
                } else if (pendingRequestsCount < maxPendingRequests) {
                    pendingRequestsCount++;
                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);
                } else {
                    this.onDeckRequestArgs = [].slice.call(arguments, 0);
                }
                function done(resp) {
                    cb(null, resp);
                    that._cache.set(fingerprint, resp);
                }
                function fail() {
                    cb(true);
                }
                function always() {
                    pendingRequestsCount--;
                    delete pendingRequests[fingerprint];
                    if (that.onDeckRequestArgs) {
                        that._get.apply(that, that.onDeckRequestArgs);
                        that.onDeckRequestArgs = null;
                    }
                }
            },
            get: function(o, cb) {
                var resp, fingerprint;
                cb = cb || $.noop;
                o = _.isString(o) ? {
                    url: o
                } : o || {};
                fingerprint = this._fingerprint(o);
                this.cancelled = false;
                this.lastReq = fingerprint;
                if (resp = this._cache.get(fingerprint)) {
                    cb(null, resp);
                } else {
                    this._get(o, cb);
                }
            },
            cancel: function() {
                this.cancelled = true;
            }
        });
        return Transport;
    }();
    var SearchIndex = window.SearchIndex = function() {
        "use strict";
        var CHILDREN = "c", IDS = "i";
        function SearchIndex(o) {
            o = o || {};
            if (!o.datumTokenizer || !o.queryTokenizer) {
                $.error("datumTokenizer and queryTokenizer are both required");
            }
            this.identify = o.identify || _.stringify;
            this.datumTokenizer = o.datumTokenizer;
            this.queryTokenizer = o.queryTokenizer;
            this.reset();
        }
        _.mixin(SearchIndex.prototype, {
            bootstrap: function bootstrap(o) {
                this.datums = o.datums;
                this.trie = o.trie;
            },
            add: function(data) {
                var that = this;
                data = _.isArray(data) ? data : [ data ];
                _.each(data, function(datum) {
                    var id, tokens;
                    that.datums[id = that.identify(datum)] = datum;
                    tokens = normalizeTokens(that.datumTokenizer(datum));
                    _.each(tokens, function(token) {
                        var node, chars, ch;
                        node = that.trie;
                        chars = token.split("");
                        while (ch = chars.shift()) {
                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());
                            node[IDS].push(id);
                        }
                    });
                });
            },
            get: function get(ids) {
                var that = this;
                return _.map(ids, function(id) {
                    return that.datums[id];
                });
            },
            search: function search(query) {
                var that = this, tokens, matches;
                tokens = normalizeTokens(this.queryTokenizer(query));
                _.each(tokens, function(token) {
                    var node, chars, ch, ids;
                    if (matches && matches.length === 0) {
                        return false;
                    }
                    node = that.trie;
                    chars = token.split("");
                    while (node && (ch = chars.shift())) {
                        node = node[CHILDREN][ch];
                    }
                    if (node && chars.length === 0) {
                        ids = node[IDS].slice(0);
                        matches = matches ? getIntersection(matches, ids) : ids;
                    } else {
                        matches = [];
                        return false;
                    }
                });
                return matches ? _.map(unique(matches), function(id) {
                    return that.datums[id];
                }) : [];
            },
            all: function all() {
                var values = [];
                for (var key in this.datums) {
                    values.push(this.datums[key]);
                }
                return values;
            },
            reset: function reset() {
                this.datums = {};
                this.trie = newNode();
            },
            serialize: function serialize() {
                return {
                    datums: this.datums,
                    trie: this.trie
                };
            }
        });
        return SearchIndex;
        function normalizeTokens(tokens) {
            tokens = _.filter(tokens, function(token) {
                return !!token;
            });
            tokens = _.map(tokens, function(token) {
                return token.toLowerCase();
            });
            return tokens;
        }
        function newNode() {
            var node = {};
            node[IDS] = [];
            node[CHILDREN] = {};
            return node;
        }
        function unique(array) {
            var seen = {}, uniques = [];
            for (var i = 0, len = array.length; i < len; i++) {
                if (!seen[array[i]]) {
                    seen[array[i]] = true;
                    uniques.push(array[i]);
                }
            }
            return uniques;
        }
        function getIntersection(arrayA, arrayB) {
            var ai = 0, bi = 0, intersection = [];
            arrayA = arrayA.sort();
            arrayB = arrayB.sort();
            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;
            while (ai < lenArrayA && bi < lenArrayB) {
                if (arrayA[ai] < arrayB[bi]) {
                    ai++;
                } else if (arrayA[ai] > arrayB[bi]) {
                    bi++;
                } else {
                    intersection.push(arrayA[ai]);
                    ai++;
                    bi++;
                }
            }
            return intersection;
        }
    }();
    var Prefetch = function() {
        "use strict";
        var keys;
        keys = {
            data: "data",
            protocol: "protocol",
            thumbprint: "thumbprint"
        };
        function Prefetch(o) {
            this.url = o.url;
            this.ttl = o.ttl;
            this.cache = o.cache;
            this.prepare = o.prepare;
            this.transform = o.transform;
            this.transport = o.transport;
            this.thumbprint = o.thumbprint;
            this.storage = new PersistentStorage(o.cacheKey);
        }
        _.mixin(Prefetch.prototype, {
            _settings: function settings() {
                return {
                    url: this.url,
                    type: "GET",
                    dataType: "json"
                };
            },
            store: function store(data) {
                if (!this.cache) {
                    return;
                }
                this.storage.set(keys.data, data, this.ttl);
                this.storage.set(keys.protocol, location.protocol, this.ttl);
                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);
            },
            fromCache: function fromCache() {
                var stored = {}, isExpired;
                if (!this.cache) {
                    return null;
                }
                stored.data = this.storage.get(keys.data);
                stored.protocol = this.storage.get(keys.protocol);
                stored.thumbprint = this.storage.get(keys.thumbprint);
                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;
                return stored.data && !isExpired ? stored.data : null;
            },
            fromNetwork: function(cb) {
                var that = this, settings;
                if (!cb) {
                    return;
                }
                settings = this.prepare(this._settings());
                this.transport(settings).fail(onError).done(onResponse);
                function onError() {
                    cb(true);
                }
                function onResponse(resp) {
                    cb(null, that.transform(resp));
                }
            },
            clear: function clear() {
                this.storage.clear();
                return this;
            }
        });
        return Prefetch;
    }();
    var Remote = function() {
        "use strict";
        function Remote(o) {
            this.url = o.url;
            this.prepare = o.prepare;
            this.transform = o.transform;
            this.transport = new Transport({
                cache: o.cache,
                limiter: o.limiter,
                transport: o.transport
            });
        }
        _.mixin(Remote.prototype, {
            _settings: function settings() {
                return {
                    url: this.url,
                    type: "GET",
                    dataType: "json"
                };
            },
            get: function get(query, cb) {
                var that = this, settings;
                if (!cb) {
                    return;
                }
                query = query || "";
                settings = this.prepare(query, this._settings());
                return this.transport.get(settings, onResponse);
                function onResponse(err, resp) {
                    err ? cb([]) : cb(that.transform(resp));
                }
            },
            cancelLastRequest: function cancelLastRequest() {
                this.transport.cancel();
            }
        });
        return Remote;
    }();
    var oParser = function() {
        "use strict";
        return function parse(o) {
            var defaults, sorter;
            defaults = {
                initialize: true,
                identify: _.stringify,
                datumTokenizer: null,
                queryTokenizer: null,
                sufficient: 5,
                sorter: null,
                local: [],
                prefetch: null,
                remote: null
            };
            o = _.mixin(defaults, o || {});
            !o.datumTokenizer && $.error("datumTokenizer is required");
            !o.queryTokenizer && $.error("queryTokenizer is required");
            sorter = o.sorter;
            o.sorter = sorter ? function(x) {
                return x.sort(sorter);
            } : _.identity;
            o.local = _.isFunction(o.local) ? o.local() : o.local;
            o.prefetch = parsePrefetch(o.prefetch);
            o.remote = parseRemote(o.remote);
            return o;
        };
        function parsePrefetch(o) {
            var defaults;
            if (!o) {
                return null;
            }
            defaults = {
                url: null,
                ttl: 24 * 60 * 60 * 1e3,
                cache: true,
                cacheKey: null,
                thumbprint: "",
                prepare: _.identity,
                transform: _.identity,
                transport: null
            };
            o = _.isString(o) ? {
                url: o
            } : o;
            o = _.mixin(defaults, o);
            !o.url && $.error("prefetch requires url to be set");
            o.transform = o.filter || o.transform;
            o.cacheKey = o.cacheKey || o.url;
            o.thumbprint = VERSION + o.thumbprint;
            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
            return o;
        }
        function parseRemote(o) {
            var defaults;
            if (!o) {
                return;
            }
            defaults = {
                url: null,
                cache: true,
                prepare: null,
                replace: null,
                wildcard: null,
                limiter: null,
                rateLimitBy: "debounce",
                rateLimitWait: 300,
                transform: _.identity,
                transport: null
            };
            o = _.isString(o) ? {
                url: o
            } : o;
            o = _.mixin(defaults, o);
            !o.url && $.error("remote requires url to be set");
            o.transform = o.filter || o.transform;
            o.prepare = toRemotePrepare(o);
            o.limiter = toLimiter(o);
            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
            delete o.replace;
            delete o.wildcard;
            delete o.rateLimitBy;
            delete o.rateLimitWait;
            return o;
        }
        function toRemotePrepare(o) {
            var prepare, replace, wildcard;
            prepare = o.prepare;
            replace = o.replace;
            wildcard = o.wildcard;
            if (prepare) {
                return prepare;
            }
            if (replace) {
                prepare = prepareByReplace;
            } else if (o.wildcard) {
                prepare = prepareByWildcard;
            } else {
                prepare = idenityPrepare;
            }
            return prepare;
            function prepareByReplace(query, settings) {
                settings.url = replace(settings.url, query);
                return settings;
            }
            function prepareByWildcard(query, settings) {
                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));
                return settings;
            }
            function idenityPrepare(query, settings) {
                return settings;
            }
        }
        function toLimiter(o) {
            var limiter, method, wait;
            limiter = o.limiter;
            method = o.rateLimitBy;
            wait = o.rateLimitWait;
            if (!limiter) {
                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);
            }
            return limiter;
            function debounce(wait) {
                return function debounce(fn) {
                    return _.debounce(fn, wait);
                };
            }
            function throttle(wait) {
                return function throttle(fn) {
                    return _.throttle(fn, wait);
                };
            }
        }
        function callbackToDeferred(fn) {
            return function wrapper(o) {
                var deferred = $.Deferred();
                fn(o, onSuccess, onError);
                return deferred;
                function onSuccess(resp) {
                    _.defer(function() {
                        deferred.resolve(resp);
                    });
                }
                function onError(err) {
                    _.defer(function() {
                        deferred.reject(err);
                    });
                }
            };
        }
    }();
    var Bloodhound = function() {
        "use strict";
        var old;
        old = window && window.Bloodhound;
        function Bloodhound(o) {
            o = oParser(o);
            this.sorter = o.sorter;
            this.identify = o.identify;
            this.sufficient = o.sufficient;
            this.local = o.local;
            this.remote = o.remote ? new Remote(o.remote) : null;
            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;
            this.index = new SearchIndex({
                identify: this.identify,
                datumTokenizer: o.datumTokenizer,
                queryTokenizer: o.queryTokenizer
            });
            o.initialize !== false && this.initialize();
        }
        Bloodhound.noConflict = function noConflict() {
            window && (window.Bloodhound = old);
            return Bloodhound;
        };
        Bloodhound.tokenizers = tokenizers;
        _.mixin(Bloodhound.prototype, {
            __ttAdapter: function ttAdapter() {
                var that = this;
                return this.remote ? withAsync : withoutAsync;
                function withAsync(query, sync, async) {
                    return that.search(query, sync, async);
                }
                function withoutAsync(query, sync) {
                    return that.search(query, sync);
                }
            },
            _loadPrefetch: function loadPrefetch() {
                var that = this, deferred, serialized;
                deferred = $.Deferred();
                if (!this.prefetch) {
                    deferred.resolve();
                } else if (serialized = this.prefetch.fromCache()) {
                    this.index.bootstrap(serialized);
                    deferred.resolve();
                } else {
                    this.prefetch.fromNetwork(done);
                }
                return deferred.promise();
                function done(err, data) {
                    if (err) {
                        return deferred.reject();
                    }
                    that.add(data);
                    that.prefetch.store(that.index.serialize());
                    deferred.resolve();
                }
            },
            _initialize: function initialize() {
                var that = this, deferred;
                this.clear();
                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);
                return this.initPromise;
                function addLocalToIndex() {
                    that.add(that.local);
                }
            },
            initialize: function initialize(force) {
                return !this.initPromise || force ? this._initialize() : this.initPromise;
            },
            add: function add(data) {
                this.index.add(data);
                return this;
            },
            get: function get(ids) {
                ids = _.isArray(ids) ? ids : [].slice.call(arguments);
                return this.index.get(ids);
            },
            search: function search(query, sync, async) {
                var that = this, local;
                local = this.sorter(this.index.search(query));
                sync(this.remote ? local.slice() : local);
                if (this.remote && local.length < this.sufficient) {
                    this.remote.get(query, processRemote);
                } else if (this.remote) {
                    this.remote.cancelLastRequest();
                }
                return this;
                function processRemote(remote) {
                    var nonDuplicates = [];
                    _.each(remote, function(r) {
                        !_.some(local, function(l) {
                            return that.identify(r) === that.identify(l);
                        }) && nonDuplicates.push(r);
                    });
                    async && async(nonDuplicates);
                }
            },
            all: function all() {
                return this.index.all();
            },
            clear: function clear() {
                this.index.reset();
                return this;
            },
            clearPrefetchCache: function clearPrefetchCache() {
                this.prefetch && this.prefetch.clear();
                return this;
            },
            clearRemoteCache: function clearRemoteCache() {
                Transport.resetCache();
                return this;
            },
            ttAdapter: function ttAdapter() {
                return this.__ttAdapter();
            }
        });
        return Bloodhound;
    }();
    return Bloodhound;
});

(function(root, factory) {
    if (typeof define === "function" && define.amd) {
        define("typeahead.js", [ "jquery" ], function(a0) {
            return factory(a0);
        });
    } else if (typeof exports === "object") {
        module.exports = factory(require("jquery"));
    } else {
        factory(jQuery);
    }
})(this, function($) {
    var _ = function() {
        "use strict";
        return {
            isMsie: function() {
                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
            },
            isBlankString: function(str) {
                return !str || /^\s*$/.test(str);
            },
            escapeRegExChars: function(str) {
                return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
            },
            isString: function(obj) {
                return typeof obj === "string";
            },
            isNumber: function(obj) {
                return typeof obj === "number";
            },
            isArray: $.isArray,
            isFunction: $.isFunction,
            isObject: $.isPlainObject,
            isUndefined: function(obj) {
                return typeof obj === "undefined";
            },
            isElement: function(obj) {
                return !!(obj && obj.nodeType === 1);
            },
            isJQuery: function(obj) {
                return obj instanceof $;
            },
            toStr: function toStr(s) {
                return _.isUndefined(s) || s === null ? "" : s + "";
            },
            bind: $.proxy,
            each: function(collection, cb) {
                $.each(collection, reverseArgs);
                function reverseArgs(index, value) {
                    return cb(value, index);
                }
            },
            map: $.map,
            filter: $.grep,
            every: function(obj, test) {
                var result = true;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (!(result = test.call(null, val, key, obj))) {
                        return false;
                    }
                });
                return !!result;
            },
            some: function(obj, test) {
                var result = false;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (result = test.call(null, val, key, obj)) {
                        return false;
                    }
                });
                return !!result;
            },
            mixin: $.extend,
            identity: function(x) {
                return x;
            },
            clone: function(obj) {
                return $.extend(true, {}, obj);
            },
            getIdGenerator: function() {
                var counter = 0;
                return function() {
                    return counter++;
                };
            },
            templatify: function templatify(obj) {
                return $.isFunction(obj) ? obj : template;
                function template() {
                    return String(obj);
                }
            },
            defer: function(fn) {
                setTimeout(fn, 0);
            },
            debounce: function(func, wait, immediate) {
                var timeout, result;
                return function() {
                    var context = this, args = arguments, later, callNow;
                    later = function() {
                        timeout = null;
                        if (!immediate) {
                            result = func.apply(context, args);
                        }
                    };
                    callNow = immediate && !timeout;
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                    if (callNow) {
                        result = func.apply(context, args);
                    }
                    return result;
                };
            },
            throttle: function(func, wait) {
                var context, args, timeout, result, previous, later;
                previous = 0;
                later = function() {
                    previous = new Date();
                    timeout = null;
                    result = func.apply(context, args);
                };
                return function() {
                    var now = new Date(), remaining = wait - (now - previous);
                    context = this;
                    args = arguments;
                    if (remaining <= 0) {
                        clearTimeout(timeout);
                        timeout = null;
                        previous = now;
                        result = func.apply(context, args);
                    } else if (!timeout) {
                        timeout = setTimeout(later, remaining);
                    }
                    return result;
                };
            },
            stringify: function(val) {
                return _.isString(val) ? val : JSON.stringify(val);
            },
            noop: function() {}
        };
    }();
    var WWW = function() {
        "use strict";
        var defaultClassNames = {
            wrapper: "twitter-typeahead",
            input: "tt-input",
            hint: "tt-hint",
            menu: "tt-menu",
            dataset: "tt-dataset",
            suggestion: "tt-suggestion",
            selectable: "tt-selectable",
            empty: "tt-empty",
            open: "tt-open",
            cursor: "tt-cursor",
            highlight: "tt-highlight"
        };
        return build;
        function build(o) {
            var www, classes;
            classes = _.mixin({}, defaultClassNames, o);
            www = {
                css: buildCss(),
                classes: classes,
                html: buildHtml(classes),
                selectors: buildSelectors(classes)
            };
            return {
                css: www.css,
                html: www.html,
                classes: www.classes,
                selectors: www.selectors,
                mixin: function(o) {
                    _.mixin(o, www);
                }
            };
        }
        function buildHtml(c) {
            return {
                wrapper: '<span class="' + c.wrapper + '"></span>',
                menu: '<div class="' + c.menu + '"></div>'
            };
        }
        function buildSelectors(classes) {
            var selectors = {};
            _.each(classes, function(v, k) {
                selectors[k] = "." + v;
            });
            return selectors;
        }
        function buildCss() {
            var css = {
                wrapper: {
                    position: "relative",
                    display: "inline-block"
                },
                hint: {
                    position: "absolute",
                    top: "0",
                    left: "0",
                    borderColor: "transparent",
                    boxShadow: "none",
                    opacity: "1"
                },
                input: {
                    position: "relative",
                    verticalAlign: "top",
                    backgroundColor: "transparent"
                },
                inputWithNoHint: {
                    position: "relative",
                    verticalAlign: "top"
                },
                menu: {
                    position: "absolute",
                    top: "100%",
                    left: "0",
                    zIndex: "100",
                    display: "none"
                },
                ltr: {
                    left: "0",
                    right: "auto"
                },
                rtl: {
                    left: "auto",
                    right: " 0"
                }
            };
            if (_.isMsie()) {
                _.mixin(css.input, {
                    backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"
                });
            }
            return css;
        }
    }();
    var EventBus = function() {
        "use strict";
        var namespace, deprecationMap;
        namespace = "typeahead:";
        deprecationMap = {
            render: "rendered",
            cursorchange: "cursorchanged",
            select: "selected",
            autocomplete: "autocompleted"
        };
        function EventBus(o) {
            if (!o || !o.el) {
                $.error("EventBus initialized without el");
            }
            this.$el = $(o.el);
        }
        _.mixin(EventBus.prototype, {
            _trigger: function(type, args) {
                var $e;
                $e = $.Event(namespace + type);
                (args = args || []).unshift($e);
                this.$el.trigger.apply(this.$el, args);
                return $e;
            },
            before: function(type) {
                var args, $e;
                args = [].slice.call(arguments, 1);
                $e = this._trigger("before" + type, args);
                return $e.isDefaultPrevented();
            },
            trigger: function(type) {
                var deprecatedType;
                this._trigger(type, [].slice.call(arguments, 1));
                if (deprecatedType = deprecationMap[type]) {
                    this._trigger(deprecatedType, [].slice.call(arguments, 1));
                }
            }
        });
        return EventBus;
    }();
    var EventEmitter = function() {
        "use strict";
        var splitter = /\s+/, nextTick = getNextTick();
        return {
            onSync: onSync,
            onAsync: onAsync,
            off: off,
            trigger: trigger
        };
        function on(method, types, cb, context) {
            var type;
            if (!cb) {
                return this;
            }
            types = types.split(splitter);
            cb = context ? bindContext(cb, context) : cb;
            this._callbacks = this._callbacks || {};
            while (type = types.shift()) {
                this._callbacks[type] = this._callbacks[type] || {
                    sync: [],
                    async: []
                };
                this._callbacks[type][method].push(cb);
            }
            return this;
        }
        function onAsync(types, cb, context) {
            return on.call(this, "async", types, cb, context);
        }
        function onSync(types, cb, context) {
            return on.call(this, "sync", types, cb, context);
        }
        function off(types) {
            var type;
            if (!this._callbacks) {
                return this;
            }
            types = types.split(splitter);
            while (type = types.shift()) {
                delete this._callbacks[type];
            }
            return this;
        }
        function trigger(types) {
            var type, callbacks, args, syncFlush, asyncFlush;
            if (!this._callbacks) {
                return this;
            }
            types = types.split(splitter);
            args = [].slice.call(arguments, 1);
            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {
                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));
                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));
                syncFlush() && nextTick(asyncFlush);
            }
            return this;
        }
        function getFlush(callbacks, context, args) {
            return flush;
            function flush() {
                var cancelled;
                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {
                    cancelled = callbacks[i].apply(context, args) === false;
                }
                return !cancelled;
            }
        }
        function getNextTick() {
            var nextTickFn;
            if (window.setImmediate) {
                nextTickFn = function nextTickSetImmediate(fn) {
                    setImmediate(function() {
                        fn();
                    });
                };
            } else {
                nextTickFn = function nextTickSetTimeout(fn) {
                    setTimeout(function() {
                        fn();
                    }, 0);
                };
            }
            return nextTickFn;
        }
        function bindContext(fn, context) {
            return fn.bind ? fn.bind(context) : function() {
                fn.apply(context, [].slice.call(arguments, 0));
            };
        }
    }();
    var highlight = function(doc) {
        "use strict";
        var defaults = {
            node: null,
            pattern: null,
            tagName: "strong",
            className: null,
            wordsOnly: false,
            caseSensitive: false
        };
        return function hightlight(o) {
            var regex;
            o = _.mixin({}, defaults, o);
            if (!o.node || !o.pattern) {
                return;
            }
            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];
            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);
            traverse(o.node, hightlightTextNode);
            function hightlightTextNode(textNode) {
                var match, patternNode, wrapperNode;
                if (match = regex.exec(textNode.data)) {
                    wrapperNode = doc.createElement(o.tagName);
                    o.className && (wrapperNode.className = o.className);
                    patternNode = textNode.splitText(match.index);
                    patternNode.splitText(match[0].length);
                    wrapperNode.appendChild(patternNode.cloneNode(true));
                    textNode.parentNode.replaceChild(wrapperNode, patternNode);
                }
                return !!match;
            }
            function traverse(el, hightlightTextNode) {
                var childNode, TEXT_NODE_TYPE = 3;
                for (var i = 0; i < el.childNodes.length; i++) {
                    childNode = el.childNodes[i];
                    if (childNode.nodeType === TEXT_NODE_TYPE) {
                        i += hightlightTextNode(childNode) ? 1 : 0;
                    } else {
                        traverse(childNode, hightlightTextNode);
                    }
                }
            }
        };
        function getRegex(patterns, caseSensitive, wordsOnly) {
            var escapedPatterns = [], regexStr;
            for (var i = 0, len = patterns.length; i < len; i++) {
                escapedPatterns.push(_.escapeRegExChars(patterns[i]));
            }
            regexStr = wordsOnly ? "\\b(" + escapedPatterns.join("|") + ")\\b" : "(" + escapedPatterns.join("|") + ")";
            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, "i");
        }
    }(window.document);
    var Input = function() {
        "use strict";
        var specialKeyCodeMap;
        specialKeyCodeMap = {
            9: "tab",
            27: "esc",
            37: "left",
            39: "right",
            13: "enter",
            38: "up",
            40: "down"
        };
        function Input(o, www) {
            o = o || {};
            if (!o.input) {
                $.error("input is missing");
            }
            www.mixin(this);
            this.$hint = $(o.hint);
            this.$input = $(o.input);
            this.query = this.$input.val();
            this.queryWhenFocused = this.hasFocus() ? this.query : null;
            this.$overflowHelper = buildOverflowHelper(this.$input);
            this._checkLanguageDirection();
            if (this.$hint.length === 0) {
                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;
            }
        }
        Input.normalizeQuery = function(str) {
            return _.toStr(str).replace(/^\s*/g, "").replace(/\s{2,}/g, " ");
        };
        _.mixin(Input.prototype, EventEmitter, {
            _onBlur: function onBlur() {
                this.resetInputValue();
                this.trigger("blurred");
            },
            _onFocus: function onFocus() {
                this.queryWhenFocused = this.query;
                this.trigger("focused");
            },
            _onKeydown: function onKeydown($e) {
                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];
                this._managePreventDefault(keyName, $e);
                if (keyName && this._shouldTrigger(keyName, $e)) {
                    this.trigger(keyName + "Keyed", $e);
                }
            },
            _onInput: function onInput() {
                this._setQuery(this.getInputValue());
                this.clearHintIfInvalid();
                this._checkLanguageDirection();
            },
            _managePreventDefault: function managePreventDefault(keyName, $e) {
                var preventDefault;
                switch (keyName) {
                  case "up":
                  case "down":
                    preventDefault = !withModifier($e);
                    break;

                  default:
                    preventDefault = false;
                }
                preventDefault && $e.preventDefault();
            },
            _shouldTrigger: function shouldTrigger(keyName, $e) {
                var trigger;
                switch (keyName) {
                  case "tab":
                    trigger = !withModifier($e);
                    break;

                  default:
                    trigger = true;
                }
                return trigger;
            },
            _checkLanguageDirection: function checkLanguageDirection() {
                var dir = (this.$input.css("direction") || "ltr").toLowerCase();
                if (this.dir !== dir) {
                    this.dir = dir;
                    this.$hint.attr("dir", dir);
                    this.trigger("langDirChanged", dir);
                }
            },
            _setQuery: function setQuery(val, silent) {
                var areEquivalent, hasDifferentWhitespace;
                areEquivalent = areQueriesEquivalent(val, this.query);
                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;
                this.query = val;
                if (!silent && !areEquivalent) {
                    this.trigger("queryChanged", this.query);
                } else if (!silent && hasDifferentWhitespace) {
                    this.trigger("whitespaceChanged", this.query);
                }
            },
            bind: function() {
                var that = this, onBlur, onFocus, onKeydown, onInput;
                onBlur = _.bind(this._onBlur, this);
                onFocus = _.bind(this._onFocus, this);
                onKeydown = _.bind(this._onKeydown, this);
                onInput = _.bind(this._onInput, this);
                this.$input.on("blur.tt", onBlur).on("focus.tt", onFocus).on("keydown.tt", onKeydown);
                if (!_.isMsie() || _.isMsie() > 9) {
                    this.$input.on("input.tt", onInput);
                } else {
                    this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function($e) {
                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {
                            return;
                        }
                        _.defer(_.bind(that._onInput, that, $e));
                    });
                }
                return this;
            },
            focus: function focus() {
                this.$input.focus();
            },
            blur: function blur() {
                this.$input.blur();
            },
            getLangDir: function getLangDir() {
                return this.dir;
            },
            getQuery: function getQuery() {
                return this.query || "";
            },
            setQuery: function setQuery(val, silent) {
                this.setInputValue(val);
                this._setQuery(val, silent);
            },
            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {
                return this.query !== this.queryWhenFocused;
            },
            getInputValue: function getInputValue() {
                return this.$input.val();
            },
            setInputValue: function setInputValue(value) {
                this.$input.val(value);
                this.clearHintIfInvalid();
                this._checkLanguageDirection();
            },
            resetInputValue: function resetInputValue() {
                this.setInputValue(this.query);
            },
            getHint: function getHint() {
                return this.$hint.val();
            },
            setHint: function setHint(value) {
                this.$hint.val(value);
            },
            clearHint: function clearHint() {
                this.setHint("");
            },
            clearHintIfInvalid: function clearHintIfInvalid() {
                var val, hint, valIsPrefixOfHint, isValid;
                val = this.getInputValue();
                hint = this.getHint();
                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;
                isValid = val !== "" && valIsPrefixOfHint && !this.hasOverflow();
                !isValid && this.clearHint();
            },
            hasFocus: function hasFocus() {
                return this.$input.is(":focus");
            },
            hasOverflow: function hasOverflow() {
                var constraint = this.$input.width() - 2;
                this.$overflowHelper.text(this.getInputValue());
                return this.$overflowHelper.width() >= constraint;
            },
            isCursorAtEnd: function() {
                var valueLength, selectionStart, range;
                valueLength = this.$input.val().length;
                selectionStart = this.$input[0].selectionStart;
                if (_.isNumber(selectionStart)) {
                    return selectionStart === valueLength;
                } else if (document.selection) {
                    range = document.selection.createRange();
                    range.moveStart("character", -valueLength);
                    return valueLength === range.text.length;
                }
                return true;
            },
            destroy: function destroy() {
                this.$hint.off(".tt");
                this.$input.off(".tt");
                this.$overflowHelper.remove();
                this.$hint = this.$input = this.$overflowHelper = $("<div>");
            }
        });
        return Input;
        function buildOverflowHelper($input) {
            return $('<pre aria-hidden="true"></pre>').css({
                position: "absolute",
                visibility: "hidden",
                whiteSpace: "pre",
                fontFamily: $input.css("font-family"),
                fontSize: $input.css("font-size"),
                fontStyle: $input.css("font-style"),
                fontVariant: $input.css("font-variant"),
                fontWeight: $input.css("font-weight"),
                wordSpacing: $input.css("word-spacing"),
                letterSpacing: $input.css("letter-spacing"),
                textIndent: $input.css("text-indent"),
                textRendering: $input.css("text-rendering"),
                textTransform: $input.css("text-transform")
            }).insertAfter($input);
        }
        function areQueriesEquivalent(a, b) {
            return Input.normalizeQuery(a) === Input.normalizeQuery(b);
        }
        function withModifier($e) {
            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;
        }
    }();
    var Dataset = function() {
        "use strict";
        var keys, nameGenerator;
        keys = {
            val: "tt-selectable-display",
            obj: "tt-selectable-object"
        };
        nameGenerator = _.getIdGenerator();
        function Dataset(o, www) {
            o = o || {};
            o.templates = o.templates || {};
            o.templates.notFound = o.templates.notFound || o.templates.empty;
            if (!o.source) {
                $.error("missing source");
            }
            if (!o.node) {
                $.error("missing node");
            }
            if (o.name && !isValidName(o.name)) {
                $.error("invalid dataset name: " + o.name);
            }
            www.mixin(this);
            this.highlight = !!o.highlight;
            this.name = o.name || nameGenerator();
            this.limit = o.limit || 5;
            this.displayFn = getDisplayFn(o.display || o.displayKey);
            this.templates = getTemplates(o.templates, this.displayFn);
            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;
            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;
            this._resetLastSuggestion();
            this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + "-" + this.name);
        }
        Dataset.extractData = function extractData(el) {
            var $el = $(el);
            if ($el.data(keys.obj)) {
                return {
                    val: $el.data(keys.val) || "",
                    obj: $el.data(keys.obj) || null
                };
            }
            return null;
        };
        _.mixin(Dataset.prototype, EventEmitter, {
            _overwrite: function overwrite(query, suggestions) {
                suggestions = suggestions || [];
                if (suggestions.length) {
                    this._renderSuggestions(query, suggestions);
                } else if (this.async && this.templates.pending) {
                    this._renderPending(query);
                } else if (!this.async && this.templates.notFound) {
                    this._renderNotFound(query);
                } else {
                    this._empty();
                }
                this.trigger("rendered", this.name, suggestions, false);
            },
            _append: function append(query, suggestions) {
                suggestions = suggestions || [];
                if (suggestions.length && this.$lastSuggestion.length) {
                    this._appendSuggestions(query, suggestions);
                } else if (suggestions.length) {
                    this._renderSuggestions(query, suggestions);
                } else if (!this.$lastSuggestion.length && this.templates.notFound) {
                    this._renderNotFound(query);
                }
                this.trigger("rendered", this.name, suggestions, true);
            },
            _renderSuggestions: function renderSuggestions(query, suggestions) {
                var $fragment;
                $fragment = this._getSuggestionsFragment(query, suggestions);
                this.$lastSuggestion = $fragment.children().last();
                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));
            },
            _appendSuggestions: function appendSuggestions(query, suggestions) {
                var $fragment, $lastSuggestion;
                $fragment = this._getSuggestionsFragment(query, suggestions);
                $lastSuggestion = $fragment.children().last();
                this.$lastSuggestion.after($fragment);
                this.$lastSuggestion = $lastSuggestion;
            },
            _renderPending: function renderPending(query) {
                var template = this.templates.pending;
                this._resetLastSuggestion();
                template && this.$el.html(template({
                    query: query,
                    dataset: this.name
                }));
            },
            _renderNotFound: function renderNotFound(query) {
                var template = this.templates.notFound;
                this._resetLastSuggestion();
                template && this.$el.html(template({
                    query: query,
                    dataset: this.name
                }));
            },
            _empty: function empty() {
                this.$el.empty();
                this._resetLastSuggestion();
            },
            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {
                var that = this, fragment;
                fragment = document.createDocumentFragment();
                _.each(suggestions, function getSuggestionNode(suggestion) {
                    var $el, context;
                    context = that._injectQuery(query, suggestion);
                    $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + " " + that.classes.selectable);
                    fragment.appendChild($el[0]);
                });
                this.highlight && highlight({
                    className: this.classes.highlight,
                    node: fragment,
                    pattern: query
                });
                return $(fragment);
            },
            _getFooter: function getFooter(query, suggestions) {
                return this.templates.footer ? this.templates.footer({
                    query: query,
                    suggestions: suggestions,
                    dataset: this.name
                }) : null;
            },
            _getHeader: function getHeader(query, suggestions) {
                return this.templates.header ? this.templates.header({
                    query: query,
                    suggestions: suggestions,
                    dataset: this.name
                }) : null;
            },
            _resetLastSuggestion: function resetLastSuggestion() {
                this.$lastSuggestion = $();
            },
            _injectQuery: function injectQuery(query, obj) {
                return _.isObject(obj) ? _.mixin({
                    _query: query
                }, obj) : obj;
            },
            update: function update(query) {
                var that = this, canceled = false, syncCalled = false, rendered = 0;
                this.cancel();
                this.cancel = function cancel() {
                    canceled = true;
                    that.cancel = $.noop;
                    that.async && that.trigger("asyncCanceled", query);
                };
                this.source(query, sync, async);
                !syncCalled && sync([]);
                function sync(suggestions) {
                    if (syncCalled) {
                        return;
                    }
                    syncCalled = true;
                    suggestions = (suggestions || []).slice(0, that.limit);
                    rendered = suggestions.length;
                    that._overwrite(query, suggestions);
                    if (rendered < that.limit && that.async) {
                        that.trigger("asyncRequested", query);
                    }
                }
                function async(suggestions) {
                    suggestions = suggestions || [];
                    if (!canceled && rendered < that.limit) {
                        that.cancel = $.noop;
                        rendered += suggestions.length;
                        that._append(query, suggestions.slice(0, that.limit - rendered));
                        that.async && that.trigger("asyncReceived", query);
                    }
                }
            },
            cancel: $.noop,
            clear: function clear() {
                this._empty();
                this.cancel();
                this.trigger("cleared");
            },
            isEmpty: function isEmpty() {
                return this.$el.is(":empty");
            },
            destroy: function destroy() {
                this.$el = $("<div>");
            }
        });
        return Dataset;
        function getDisplayFn(display) {
            display = display || _.stringify;
            return _.isFunction(display) ? display : displayFn;
            function displayFn(obj) {
                return obj[display];
            }
        }
        function getTemplates(templates, displayFn) {
            return {
                notFound: templates.notFound && _.templatify(templates.notFound),
                pending: templates.pending && _.templatify(templates.pending),
                header: templates.header && _.templatify(templates.header),
                footer: templates.footer && _.templatify(templates.footer),
                suggestion: templates.suggestion || suggestionTemplate
            };
            function suggestionTemplate(context) {
                return $("<div>").text(displayFn(context));
            }
        }
        function isValidName(str) {
            return /^[_a-zA-Z0-9-]+$/.test(str);
        }
    }();
    var Menu = function() {
        "use strict";
        function Menu(o, www) {
            var that = this;
            o = o || {};
            if (!o.node) {
                $.error("node is required");
            }
            www.mixin(this);
            this.$node = $(o.node);
            this.query = null;
            this.datasets = _.map(o.datasets, initializeDataset);
            function initializeDataset(oDataset) {
                var node = that.$node.find(oDataset.node).first();
                oDataset.node = node.length ? node : $("<div>").appendTo(that.$node);
                return new Dataset(oDataset, www);
            }
        }
        _.mixin(Menu.prototype, EventEmitter, {
            _onSelectableClick: function onSelectableClick($e) {
                this.trigger("selectableClicked", $($e.currentTarget));
            },
            _onRendered: function onRendered(type, dataset, suggestions, async) {
                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());
                this.trigger("datasetRendered", dataset, suggestions, async);
            },
            _onCleared: function onCleared() {
                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());
                this.trigger("datasetCleared");
            },
            _propagate: function propagate() {
                this.trigger.apply(this, arguments);
            },
            _allDatasetsEmpty: function allDatasetsEmpty() {
                return _.every(this.datasets, isDatasetEmpty);
                function isDatasetEmpty(dataset) {
                    return dataset.isEmpty();
                }
            },
            _getSelectables: function getSelectables() {
                return this.$node.find(this.selectors.selectable);
            },
            _removeCursor: function _removeCursor() {
                var $selectable = this.getActiveSelectable();
                $selectable && $selectable.removeClass(this.classes.cursor);
            },
            _ensureVisible: function ensureVisible($el) {
                var elTop, elBottom, nodeScrollTop, nodeHeight;
                elTop = $el.position().top;
                elBottom = elTop + $el.outerHeight(true);
                nodeScrollTop = this.$node.scrollTop();
                nodeHeight = this.$node.height() + parseInt(this.$node.css("paddingTop"), 10) + parseInt(this.$node.css("paddingBottom"), 10);
                if (elTop < 0) {
                    this.$node.scrollTop(nodeScrollTop + elTop);
                } else if (nodeHeight < elBottom) {
                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));
                }
            },
            bind: function() {
                var that = this, onSelectableClick;
                onSelectableClick = _.bind(this._onSelectableClick, this);
                this.$node.on("click.tt", this.selectors.selectable, onSelectableClick);
                _.each(this.datasets, function(dataset) {
                    dataset.onSync("asyncRequested", that._propagate, that).onSync("asyncCanceled", that._propagate, that).onSync("asyncReceived", that._propagate, that).onSync("rendered", that._onRendered, that).onSync("cleared", that._onCleared, that);
                });
                return this;
            },
            isOpen: function isOpen() {
                return this.$node.hasClass(this.classes.open);
            },
            open: function open() {
                this.$node.addClass(this.classes.open);
            },
            close: function close() {
                this.$node.removeClass(this.classes.open);
                this._removeCursor();
            },
            setLanguageDirection: function setLanguageDirection(dir) {
                this.$node.attr("dir", dir);
            },
            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {
                var $selectables, $oldCursor, oldIndex, newIndex;
                $oldCursor = this.getActiveSelectable();
                $selectables = this._getSelectables();
                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;
                newIndex = oldIndex + delta;
                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;
                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;
                return newIndex === -1 ? null : $selectables.eq(newIndex);
            },
            setCursor: function setCursor($selectable) {
                this._removeCursor();
                if ($selectable = $selectable && $selectable.first()) {
                    $selectable.addClass(this.classes.cursor);
                    this._ensureVisible($selectable);
                }
            },
            getSelectableData: function getSelectableData($el) {
                return $el && $el.length ? Dataset.extractData($el) : null;
            },
            getActiveSelectable: function getActiveSelectable() {
                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();
                return $selectable.length ? $selectable : null;
            },
            getTopSelectable: function getTopSelectable() {
                var $selectable = this._getSelectables().first();
                return $selectable.length ? $selectable : null;
            },
            update: function update(query) {
                var isValidUpdate = query !== this.query;
                if (isValidUpdate) {
                    this.query = query;
                    _.each(this.datasets, updateDataset);
                }
                return isValidUpdate;
                function updateDataset(dataset) {
                    dataset.update(query);
                }
            },
            empty: function empty() {
                _.each(this.datasets, clearDataset);
                this.query = null;
                this.$node.addClass(this.classes.empty);
                function clearDataset(dataset) {
                    dataset.clear();
                }
            },
            destroy: function destroy() {
                this.$node.off(".tt");
                this.$node = $("<div>");
                _.each(this.datasets, destroyDataset);
                function destroyDataset(dataset) {
                    dataset.destroy();
                }
            }
        });
        return Menu;
    }();
    var DefaultMenu = function() {
        "use strict";
        var s = Menu.prototype;
        function DefaultMenu() {
            Menu.apply(this, [].slice.call(arguments, 0));
        }
        _.mixin(DefaultMenu.prototype, Menu.prototype, {
            open: function open() {
                !this._allDatasetsEmpty() && this._show();
                return s.open.apply(this, [].slice.call(arguments, 0));
            },
            close: function close() {
                this._hide();
                return s.close.apply(this, [].slice.call(arguments, 0));
            },
            _onRendered: function onRendered() {
                if (this._allDatasetsEmpty()) {
                    this._hide();
                } else {
                    this.isOpen() && this._show();
                }
                return s._onRendered.apply(this, [].slice.call(arguments, 0));
            },
            _onCleared: function onCleared() {
                if (this._allDatasetsEmpty()) {
                    this._hide();
                } else {
                    this.isOpen() && this._show();
                }
                return s._onCleared.apply(this, [].slice.call(arguments, 0));
            },
            setLanguageDirection: function setLanguageDirection(dir) {
                this.$node.css(dir === "ltr" ? this.css.ltr : this.css.rtl);
                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));
            },
            _hide: function hide() {
                this.$node.hide();
            },
            _show: function show() {
                this.$node.css("display", "block");
            }
        });
        return DefaultMenu;
    }();
    var Typeahead = function() {
        "use strict";
        function Typeahead(o, www) {
            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;
            o = o || {};
            if (!o.input) {
                $.error("missing input");
            }
            if (!o.menu) {
                $.error("missing menu");
            }
            if (!o.eventBus) {
                $.error("missing event bus");
            }
            www.mixin(this);
            this.eventBus = o.eventBus;
            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;
            this.input = o.input;
            this.menu = o.menu;
            this.enabled = true;
            this.active = false;
            this.input.hasFocus() && this.activate();
            this.dir = this.input.getLangDir();
            this._hacks();
            this.menu.bind().onSync("selectableClicked", this._onSelectableClicked, this).onSync("asyncRequested", this._onAsyncRequested, this).onSync("asyncCanceled", this._onAsyncCanceled, this).onSync("asyncReceived", this._onAsyncReceived, this).onSync("datasetRendered", this._onDatasetRendered, this).onSync("datasetCleared", this._onDatasetCleared, this);
            onFocused = c(this, "activate", "open", "_onFocused");
            onBlurred = c(this, "deactivate", "_onBlurred");
            onEnterKeyed = c(this, "isActive", "isOpen", "_onEnterKeyed");
            onTabKeyed = c(this, "isActive", "isOpen", "_onTabKeyed");
            onEscKeyed = c(this, "isActive", "_onEscKeyed");
            onUpKeyed = c(this, "isActive", "open", "_onUpKeyed");
            onDownKeyed = c(this, "isActive", "open", "_onDownKeyed");
            onLeftKeyed = c(this, "isActive", "isOpen", "_onLeftKeyed");
            onRightKeyed = c(this, "isActive", "isOpen", "_onRightKeyed");
            onQueryChanged = c(this, "_openIfActive", "_onQueryChanged");
            onWhitespaceChanged = c(this, "_openIfActive", "_onWhitespaceChanged");
            this.input.bind().onSync("focused", onFocused, this).onSync("blurred", onBlurred, this).onSync("enterKeyed", onEnterKeyed, this).onSync("tabKeyed", onTabKeyed, this).onSync("escKeyed", onEscKeyed, this).onSync("upKeyed", onUpKeyed, this).onSync("downKeyed", onDownKeyed, this).onSync("leftKeyed", onLeftKeyed, this).onSync("rightKeyed", onRightKeyed, this).onSync("queryChanged", onQueryChanged, this).onSync("whitespaceChanged", onWhitespaceChanged, this).onSync("langDirChanged", this._onLangDirChanged, this);
        }
        _.mixin(Typeahead.prototype, {
            _hacks: function hacks() {
                var $input, $menu;
                $input = this.input.$input || $("<div>");
                $menu = this.menu.$node || $("<div>");
                $input.on("blur.tt", function($e) {
                    var active, isActive, hasActive;
                    active = document.activeElement;
                    isActive = $menu.is(active);
                    hasActive = $menu.has(active).length > 0;
                    if (_.isMsie() && (isActive || hasActive)) {
                        $e.preventDefault();
                        $e.stopImmediatePropagation();
                        _.defer(function() {
                            $input.focus();
                        });
                    }
                });
                $menu.on("mousedown.tt", function($e) {
                    $e.preventDefault();
                });
            },
            _onSelectableClicked: function onSelectableClicked(type, $el) {
                this.select($el);
            },
            _onDatasetCleared: function onDatasetCleared() {
                this._updateHint();
            },
            _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {
                this._updateHint();
                this.eventBus.trigger("render", suggestions, async, dataset);
            },
            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {
                this.eventBus.trigger("asyncrequest", query, dataset);
            },
            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {
                this.eventBus.trigger("asynccancel", query, dataset);
            },
            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {
                this.eventBus.trigger("asyncreceive", query, dataset);
            },
            _onFocused: function onFocused() {
                this._minLengthMet() && this.menu.update(this.input.getQuery());
            },
            _onBlurred: function onBlurred() {
                if (this.input.hasQueryChangedSinceLastFocus()) {
                    this.eventBus.trigger("change", this.input.getQuery());
                }
            },
            _onEnterKeyed: function onEnterKeyed(type, $e) {
                var $selectable;
                if ($selectable = this.menu.getActiveSelectable()) {
                    this.select($selectable) && $e.preventDefault();
                }
            },
            _onTabKeyed: function onTabKeyed(type, $e) {
                var $selectable;
                if ($selectable = this.menu.getActiveSelectable()) {
                    this.select($selectable) && $e.preventDefault();
                } else if ($selectable = this.menu.getTopSelectable()) {
                    this.autocomplete($selectable) && $e.preventDefault();
                }
            },
            _onEscKeyed: function onEscKeyed() {
                this.close();
            },
            _onUpKeyed: function onUpKeyed() {
                this.moveCursor(-1);
            },
            _onDownKeyed: function onDownKeyed() {
                this.moveCursor(+1);
            },
            _onLeftKeyed: function onLeftKeyed() {
                if (this.dir === "rtl" && this.input.isCursorAtEnd()) {
                    this.autocomplete(this.menu.getTopSelectable());
                }
            },
            _onRightKeyed: function onRightKeyed() {
                if (this.dir === "ltr" && this.input.isCursorAtEnd()) {
                    this.autocomplete(this.menu.getTopSelectable());
                }
            },
            _onQueryChanged: function onQueryChanged(e, query) {
                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();
            },
            _onWhitespaceChanged: function onWhitespaceChanged() {
                this._updateHint();
            },
            _onLangDirChanged: function onLangDirChanged(e, dir) {
                if (this.dir !== dir) {
                    this.dir = dir;
                    this.menu.setLanguageDirection(dir);
                }
            },
            _openIfActive: function openIfActive() {
                this.isActive() && this.open();
            },
            _minLengthMet: function minLengthMet(query) {
                query = _.isString(query) ? query : this.input.getQuery() || "";
                return query.length >= this.minLength;
            },
            _updateHint: function updateHint() {
                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;
                $selectable = this.menu.getTopSelectable();
                data = this.menu.getSelectableData($selectable);
                val = this.input.getInputValue();
                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {
                    query = Input.normalizeQuery(val);
                    escapedQuery = _.escapeRegExChars(query);
                    frontMatchRegEx = new RegExp("^(?:" + escapedQuery + ")(.+$)", "i");
                    match = frontMatchRegEx.exec(data.val);
                    match && this.input.setHint(val + match[1]);
                } else {
                    this.input.clearHint();
                }
            },
            isEnabled: function isEnabled() {
                return this.enabled;
            },
            enable: function enable() {
                this.enabled = true;
            },
            disable: function disable() {
                this.enabled = false;
            },
            isActive: function isActive() {
                return this.active;
            },
            activate: function activate() {
                if (this.isActive()) {
                    return true;
                } else if (!this.isEnabled() || this.eventBus.before("active")) {
                    return false;
                } else {
                    this.active = true;
                    this.eventBus.trigger("active");
                    return true;
                }
            },
            deactivate: function deactivate() {
                if (!this.isActive()) {
                    return true;
                } else if (this.eventBus.before("idle")) {
                    return false;
                } else {
                    this.active = false;
                    this.close();
                    this.eventBus.trigger("idle");
                    return true;
                }
            },
            isOpen: function isOpen() {
                return this.menu.isOpen();
            },
            open: function open() {
                if (!this.isOpen() && !this.eventBus.before("open")) {
                    this.menu.open();
                    this._updateHint();
                    this.eventBus.trigger("open");
                }
                return this.isOpen();
            },
            close: function close() {
                if (this.isOpen() && !this.eventBus.before("close")) {
                    this.menu.close();
                    this.input.clearHint();
                    this.input.resetInputValue();
                    this.eventBus.trigger("close");
                }
                return !this.isOpen();
            },
            setVal: function setVal(val) {
                this.input.setQuery(_.toStr(val));
            },
            getVal: function getVal() {
                return this.input.getQuery();
            },
            select: function select($selectable) {
                var data = this.menu.getSelectableData($selectable);
                if (data && !this.eventBus.before("select", data.obj)) {
                    this.input.setQuery(data.val, true);
                    this.eventBus.trigger("select", data.obj);
                    this.close();
                    return true;
                }
                return false;
            },
            autocomplete: function autocomplete($selectable) {
                var query, data, isValid;
                query = this.input.getQuery();
                data = this.menu.getSelectableData($selectable);
                isValid = data && query !== data.val;
                if (isValid && !this.eventBus.before("autocomplete", data.obj)) {
                    this.input.setQuery(data.val);
                    this.eventBus.trigger("autocomplete", data.obj);
                    return true;
                }
                return false;
            },
            moveCursor: function moveCursor(delta) {
                var query, $candidate, data, payload, cancelMove;
                query = this.input.getQuery();
                $candidate = this.menu.selectableRelativeToCursor(delta);
                data = this.menu.getSelectableData($candidate);
                payload = data ? data.obj : null;
                cancelMove = this._minLengthMet() && this.menu.update(query);
                if (!cancelMove && !this.eventBus.before("cursorchange", payload)) {
                    this.menu.setCursor($candidate);
                    if (data) {
                        this.input.setInputValue(data.val);
                    } else {
                        this.input.resetInputValue();
                        this._updateHint();
                    }
                    this.eventBus.trigger("cursorchange", payload);
                    return true;
                }
                return false;
            },
            destroy: function destroy() {
                this.input.destroy();
                this.menu.destroy();
            }
        });
        return Typeahead;
        function c(ctx) {
            var methods = [].slice.call(arguments, 1);
            return function() {
                var args = [].slice.call(arguments);
                _.each(methods, function(method) {
                    return ctx[method].apply(ctx, args);
                });
            };
        }
    }();
    (function() {
        "use strict";
        var old, keys, methods;
        old = $.fn.typeahead;
        keys = {
            www: "tt-www",
            attrs: "tt-attrs",
            typeahead: "tt-typeahead"
        };
        methods = {
            initialize: function initialize(o, datasets) {
                var www;
                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);
                o = o || {};
                www = WWW(o.classNames);
                return this.each(attach);
                function attach() {
                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;
                    _.each(datasets, function(d) {
                        d.highlight = !!o.highlight;
                    });
                    $input = $(this);
                    $wrapper = $(www.html.wrapper);
                    $hint = $elOrNull(o.hint);
                    $menu = $elOrNull(o.menu);
                    defaultHint = o.hint !== false && !$hint;
                    defaultMenu = o.menu !== false && !$menu;
                    defaultHint && ($hint = buildHintFromInput($input, www));
                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));
                    $hint && $hint.val("");
                    $input = prepInput($input, www);
                    if (defaultHint || defaultMenu) {
                        $wrapper.css(www.css.wrapper);
                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);
                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);
                    }
                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;
                    eventBus = new EventBus({
                        el: $input
                    });
                    input = new Input({
                        hint: $hint,
                        input: $input
                    }, www);
                    menu = new MenuConstructor({
                        node: $menu,
                        datasets: datasets
                    }, www);
                    typeahead = new Typeahead({
                        input: input,
                        menu: menu,
                        eventBus: eventBus,
                        minLength: o.minLength
                    }, www);
                    $input.data(keys.www, www);
                    $input.data(keys.typeahead, typeahead);
                }
            },
            isEnabled: function isEnabled() {
                var enabled;
                ttEach(this.first(), function(t) {
                    enabled = t.isEnabled();
                });
                return enabled;
            },
            enable: function enable() {
                ttEach(this, function(t) {
                    t.enable();
                });
                return this;
            },
            disable: function disable() {
                ttEach(this, function(t) {
                    t.disable();
                });
                return this;
            },
            isActive: function isActive() {
                var active;
                ttEach(this.first(), function(t) {
                    active = t.isActive();
                });
                return active;
            },
            activate: function activate() {
                ttEach(this, function(t) {
                    t.activate();
                });
                return this;
            },
            deactivate: function deactivate() {
                ttEach(this, function(t) {
                    t.deactivate();
                });
                return this;
            },
            isOpen: function isOpen() {
                var open;
                ttEach(this.first(), function(t) {
                    open = t.isOpen();
                });
                return open;
            },
            open: function open() {
                ttEach(this, function(t) {
                    t.open();
                });
                return this;
            },
            close: function close() {
                ttEach(this, function(t) {
                    t.close();
                });
                return this;
            },
            select: function select(el) {
                var success = false, $el = $(el);
                ttEach(this.first(), function(t) {
                    success = t.select($el);
                });
                return success;
            },
            autocomplete: function autocomplete(el) {
                var success = false, $el = $(el);
                ttEach(this.first(), function(t) {
                    success = t.autocomplete($el);
                });
                return success;
            },
            moveCursor: function moveCursoe(delta) {
                var success = false;
                ttEach(this.first(), function(t) {
                    success = t.moveCursor(delta);
                });
                return success;
            },
            val: function val(newVal) {
                var query;
                if (!arguments.length) {
                    ttEach(this.first(), function(t) {
                        query = t.getVal();
                    });
                    return query;
                } else {
                    ttEach(this, function(t) {
                        t.setVal(newVal);
                    });
                    return this;
                }
            },
            destroy: function destroy() {
                ttEach(this, function(typeahead, $input) {
                    revert($input);
                    typeahead.destroy();
                });
                return this;
            }
        };
        $.fn.typeahead = function(method) {
            if (methods[method]) {
                return methods[method].apply(this, [].slice.call(arguments, 1));
            } else {
                return methods.initialize.apply(this, arguments);
            }
        };
        $.fn.typeahead.noConflict = function noConflict() {
            $.fn.typeahead = old;
            return this;
        };
        function ttEach($els, fn) {
            $els.each(function() {
                var $input = $(this), typeahead;
                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);
            });
        }
        function buildHintFromInput($input, www) {
            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop("readonly", true).removeAttr("id name placeholder required").attr({
                autocomplete: "off",
                spellcheck: "false",
                tabindex: -1
            });
        }
        function prepInput($input, www) {
            $input.data(keys.attrs, {
                dir: $input.attr("dir"),
                autocomplete: $input.attr("autocomplete"),
                spellcheck: $input.attr("spellcheck"),
                style: $input.attr("style")
            });
            $input.addClass(www.classes.input).attr({
                autocomplete: "off",
                spellcheck: false
            });
            try {
                !$input.attr("dir") && $input.attr("dir", "auto");
            } catch (e) {}
            return $input;
        }
        function getBackgroundStyles($el) {
            return {
                backgroundAttachment: $el.css("background-attachment"),
                backgroundClip: $el.css("background-clip"),
                backgroundColor: $el.css("background-color"),
                backgroundImage: $el.css("background-image"),
                backgroundOrigin: $el.css("background-origin"),
                backgroundPosition: $el.css("background-position"),
                backgroundRepeat: $el.css("background-repeat"),
                backgroundSize: $el.css("background-size")
            };
        }
        function revert($input) {
            var www, $wrapper;
            www = $input.data(keys.www);
            $wrapper = $input.parent().filter(www.selectors.wrapper);
            _.each($input.data(keys.attrs), function(val, key) {
                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);
            });
            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);
            if ($wrapper.length) {
                $input.detach().insertAfter($wrapper);
                $wrapper.remove();
            }
        }
        function $elOrNull(obj) {
            var isValid, $el;
            isValid = _.isJQuery(obj) || _.isElement(obj);
            $el = isValid ? $(obj).first() : [];
            return $el.length ? $el : null;
        }
    })();
});
},{"jquery":25}],100:[function(require,module,exports){
(function (global){
"use strict";

window.proj4 = require('proj4');
global.jQuery = require("jquery");

var $ = require('jquery');
var Viewer = require('./src/viewer');
var mapLoader = require('./src/maploader');
var controlInitialiser = require('./src/controlinitialiser');

var origo = {};
origo.map = {};
origo.config = require('./conf/origoConfig');
origo.controls = require('./conf/origoControls');

origo.map.init = function(options, opt_config) {
  var config = opt_config ? $.extend(origo.config, opt_config) : origo.config;

  var map = mapLoader(options, config);
  if (map) {
    map.then(function(config) {
      init(config);
    })
    return Viewer;
  } else {
    return undefined;
  }
}

function init(config) {
  Viewer.init(config.el, config.options);

  //Init controls
  controlInitialiser(config.options.controls);
}

module.exports = origo;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./conf/origoConfig":1,"./conf/origoControls":2,"./src/controlinitialiser":104,"./src/maploader":148,"./src/viewer":201,"jquery":25,"proj4":64}],101:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Utils = require('./utils');
var Modal = require('./modal');

var $aboutButton;
var buttonText;
var title;
var content;

function init(opt_options) {
  var options = opt_options || {};
  buttonText = options.buttontext || 'Om kartan';
  title = options.title || 'Om kartan';
  content = options.content || '<p></p>';

  render();
  bindUIActions();
}

function render() {
  var el = Utils.createListButton({
    id: 'o-about',
    iconCls: 'o-icon-fa-info-circle',
    src: 'css/svg/fa-icons.svg#fa-info-circle',
    text: buttonText
  });
  $('#o-menutools').append(el);
  $aboutButton = $('#o-about-button');
}

function bindUIActions() {
  $aboutButton.on('click', function(e) {
    Modal.createModal('#o-map', {
      title: title,
      content: content
    });

    Modal.showModal();
    e.preventDefault();
  });
}

module.exports.init = init;

},{"./modal":152,"./utils":185,"jquery":25}],102:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var breakPoint = options.breakPoint || [768, 500];
  var attribution;
  map = Viewer.getMap();

  attribution = new ol.control.Attribution({
    collapsible: false
  });

  map.addControl(attribution);

  $(window).on('resize', checkSize);
  checkSize();

  function checkSize() {
    var mapSize = map.getSize();
    var collapsed = (mapSize[0] <= breakPoint[0] || mapSize[1] <= breakPoint[1]);
    attribution.setCollapsible(collapsed);
    attribution.setCollapsed(collapsed);
  }
}

module.exports.init = Init;

},{"./viewer":201,"jquery":25,"openlayers":27}],103:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<svg width='32px' height='32px' xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\" class=\"uil-ripple\">\r\n  <rect x=\"0\" y=\"0\" width=\"100\" height=\"100\" fill=\"none\" class=\"bk\"></rect>\r\n  <g>\r\n    <animate attributeName=\"opacity\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"0s\" keyTimes=\"0;0.33;1\" values=\"1;1;0\"></animate>\r\n      <circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"#000000\" fill=\"none\" stroke-width=\"6\" stroke-linecap=\"round\">\r\n        <animate attributeName=\"r\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"0s\" keyTimes=\"0;0.33;1\" values=\"0;22;44\"></animate>\r\n      </circle>\r\n  </g>\r\n      <g>\r\n        <animate attributeName=\"opacity\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"1s\" keyTimes=\"0;0.33;1\" values=\"1;1;0\"></animate>\r\n        <circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"#000\" fill=\"none\" stroke-width=\"6\" stroke-linecap=\"round\">\r\n          <animate attributeName=\"r\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"1s\" keyTimes=\"0;0.33;1\" values=\"0;22;44\"></animate>\r\n        </circle>\r\n      </g>\r\n</svg>\r\n";
},"useData":true});

},{"hbsfy/runtime":24}],104:[function(require,module,exports){
"use strict";

var controlInitialiser = function(controls) {
    var controlName, controlOptions;
    controls.forEach(function(control) {
        controlName = control.name;
        controlOptions = control.options || undefined;
        if (origo.controls.hasOwnProperty(controlName)) {
            controlOptions ? origo.controls[controlName].init(controlOptions) : origo.controls[controlName].init();
        }
    });
}


module.exports = controlInitialiser;

},{}],105:[function(require,module,exports){
 "use strict";

var $ = require('jquery');
var utils = require('./utils');

module.exports = function(target, items, options) {
  var dataAttribute = 'data-' + options.dataAttribute || 'default';
  var $target = $('#' + target);
  var activeItem = options.active || undefined;
  var activeCls = 'o-active';
  var ul;
  var li = [];
  var cls = 'o-dropdown-li';
  var icon = utils.createSvg({
    href: '#ic_check_24px',
    cls: 'o-icon-24'
  });
  render();
  addListener();

  function render() {
    items.forEach(function(item, index) {
      var obj = {
        cls: cls
      };
      var active = utils.createElement('span', icon, {
        cls: 'o-icon'
      });
      obj[dataAttribute] = item.value;
      if (item.value === activeItem) {
        obj.cls = activeCls;
      }
      li[index] = utils.createElement('li', item.name + active, obj);
    });
    ul = utils.createElement('ul', li.join(''), {
      cls: 'o-dropdown'
    });
    $target.append(ul);
  }

  function addListener() {
    $target.on('click', 'ul', function(e) {
      var $active = $(e.target);
      $target.trigger({
        type: 'changeDropdown',
        dataAttribute: $(e.target).data(options.dataAttribute)
      });
      toggleActive($active);
    });
  }

  function toggleActive($active) {
    $target.find('li').removeClass(activeCls);
    $active.addClass(activeCls);
  }
};

},{"./utils":185,"jquery":25}],106:[function(require,module,exports){
 "use strict";

var $ = require('jquery');
var utils = require('./utils');
var editorToolbar = require('./editor/editortoolbar');

var $editorButton;

module.exports = function() {

  return {
    init: Init
  };
}();

function Init(opt_options) {
  var options = opt_options || {};
  options.autoSave = options.hasOwnProperty('autoSave') ? options.autoSave : true;
  options.autoForm = options.hasOwnProperty('autoForm') ? options.autoForm : false;
  options.currentLayer = options.defaultLayer || options.editableLayers[0];
  editorToolbar.init(options);
  render();
  $editorButton = $('#o-editor-button');
  bindUIActions();
}

function bindUIActions() {
  $editorButton.on('click', function(e) {
    $('.o-map').first().trigger({
      type: 'enableInteraction',
      interaction: 'editor'
    });
    this.blur();
    e.stopPropagation();
    e.preventDefault();
  });
}

function render() {
  var el = utils.createListButton({
    id: 'o-editor',
    iconCls: 'o-icon-fa-pencil',
    src: '#fa-pencil',
    text: 'Redigera'
  });
  $('#o-menutools').append(el);
}

},{"./editor/editortoolbar":114,"./utils":185,"jquery":25}],107:[function(require,module,exports){
/* ========================================================================
 * Copyright 2016 Origo
 * Licensed under BSD 2-Clause (https://github.com/origo-map/origo/blob/master/LICENSE.txt)
 * ======================================================================== */
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var editsStore = require('./editsstore')();
var dispatcher = require('./editDispatcher');

var format = new ol.format.EsriJSON();
var urlSuffix = {
  update: 'updateFeatures',
  insert: 'addFeatures',
  delete: 'deleteFeatures'
};

module.exports = function(transObj, layerName) {
  agsTransaction(transObj, layerName);
}

function writeAgsTransaction(features, options) {
  var data = {};

  if (options.type === 'delete') {
    var objectIds = features.map(function(feature) {
      return feature.getId();
    });
    data.objectIds = objectIds.join(',');
  } else {
    var agsFeatures = features.map(function(feature) {
      return format.writeFeature(feature, {
        featureProjection: options.projection
      });
    });
    data.features = '[' + agsFeatures + ']';
  }
  data.f = 'json';
  return data;
}

function agsTransaction(transObj, layerName) {
  var projection = viewer.getProjection();
  var layer = viewer.getLayer(layerName);
  var id = layer.get('id');
  var source = viewer.getMapSource()[layer.get('sourceName')];
  var types = Object.getOwnPropertyNames(transObj);
  var cb = {
    update: updateSuccess,
    insert: insertSuccess,
    delete: deleteSuccess
  };
  types.forEach(function(type) {
    if (transObj[type]) {
      var url = source.url  + '/' + id + '/' + urlSuffix[type];
      var datat = writeAgsTransaction(transObj[type], {
        projection: projection,
        type: type
      });
      $.ajax({
        type: "POST",
        url: url,
        data: datat,
        success: cb[type],
        error: error,
        context: this
      });
    }
  });

  function updateSuccess(data) {
    var feature = transObj.update;
    var result = JSON.parse(data);
    if (result) {
      if (result.updateResults.length > 0) {
        result.updateResults.forEach(function(update, index) {
          if (update.success !== true) {
            throwServerError(update.error);
          } else {
            dispatcher.emitChangeFeature({
              feature: [feature[index]],
              layerName: layerName,
              status: 'finished',
              action: 'update'
            });
          }
        });
      }
    } else {
      error();
    }
  }

  function insertSuccess(data) {
    var feature = transObj.insert;
    var result = JSON.parse(data);
    if (result) {
      if (result.addResults.length > 0) {
        result.addResults.forEach(function(insert, index) {
          if (insert.success !== true) {
            throwServerError(insert.error);
          } else {
            dispatcher.emitChangeFeature({
              feature: [feature[index]],
              layerName: layerName,
              status: 'finished',
              action: 'insert'
            });
            feature[index].set('objectId',insert.objectId);
            feature[index].setId(insert.objectId);
          }
        });
      }
    } else {
      error();
    }
  }

  function deleteSuccess(data) {
    var feature = transObj.delete;
    var result = JSON.parse(data);
    if (result) {
      if (result.deleteResults.length > 0) {
        result.deleteResults.forEach(function(deleted, index) {
          if (deleted.success !== true) {
            throwServerError(deleted.error);
          } else {
            dispatcher.emitChangeFeature({
              feature: [feature[index]],
              layerName: layerName,
              status: 'finished',
              action: 'delete'
            });
          }
        });
      }
    } else {
      error();
    }
  }

  function error(e) {
    var errorMsg = e ? (e.status + ' ' + e.statusText) : "";
    alert('Det inträffade ett fel när ändringarna skulle sparas till servern...<br><br>' +
      errorMsg);
  }

  function throwServerError(error) {
    alert(error.description + ' (' + error.code + ')');
  }
}

},{"../viewer":201,"./editDispatcher":109,"./editsstore":115,"jquery":25,"openlayers":27}],108:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('../viewer');
var dropDown = require('../dropdown');
var dispatcher = require('./editdispatcher');
var createElement = require('../utils').createElement;

module.exports = function drawTools(tools, defaultLayer) {
  var toolNames = {
    Polygon: 'Polygon',
    Point: 'Punkt',
    Line: 'Linje',
    box: 'Rektangel'
  };
  var defaultTools = tools || {};
  var drawTools = undefined;
  var currentLayer = defaultLayer;
  var map = viewer.getMap();
  var active = false;
  var activeCls = 'o-active';
  var target = 'editor-toolbar-draw-dropdown';
  render();
  addListener();

  function render() {
    var popover = createElement('div', '', {
      id: target,
      cls: 'o-popover'
    });
    $('#' + 'o-editor-draw').after(popover);
    setActive(false);
  }

  function addDropDown(options) {
    dropDown(options.target, options.selectOptions, {
      dataAttribute: 'shape',
      active: options.activeTool
    });
    $('#' + target).on('changeDropdown', function(e) {
      e.stopImmediatePropagation(e);
      dispatcher.emitChangeEditorShapes(e.dataAttribute);
      close();
    });
  }

  function addListener() {
    $(document).on('changeEdit', onChangeEdit);
    $(document).on('toggleEdit', onToggleEdit);
  }

  function setActive(state) {
    if (state) {
      if (drawTools.length > 1) {
        active = true;
        $('#' + target + ' ul').remove();
        addDropDown(createDropDownOptions());
        $('#' + target).addClass(activeCls);
        map.once('click', close);
      }
    } else {
      active = false;
      $('#' + target).removeClass(activeCls);
      map.un('click', close);
    }
  }

  function close() {
    if (active) {
      setActive(false);
    }
  }

  function onChangeEdit(e) {
    if (e.tool === 'draw' && e.active === true) {
      setDrawTools(currentLayer);
      setActive(true);
    } else if (e.tool === 'draw' && e.active === false) {
      setActive(false);
    }
    e.stopPropagation();
  }

  function onToggleEdit(e) {
    if (e.tool === 'edit' && e.currentLayer) {
      currentLayer = e.currentLayer;
    }
    e.stopPropagation();
  }

  function setDrawTools(layerName) {
    var layer = viewer.getLayer(layerName);
    var geometryType;
    drawTools = layer.get('drawTools') || [];
    if (layer.get('drawTools')) {
      drawTools = layer.get('drawTools');
    } else {
      geometryType = layer.get('geometryType');
      drawTools = defaultTools[geometryType] ? defaultTools[geometryType].slice(0) : [];
      drawTools.unshift(geometryType);
    }
  }

  function createDropDownOptions() {
    return {
      target: target,
      selectOptions: selectionModel(drawTools),
      activeTool: drawTools[0]
    };
  }

  function selectionModel(drawTools) {
    var selectOptions = drawTools.map(function(drawTool) {
      var obj = {};
      obj.name = toolNames[drawTool];
      obj.value = drawTool;
      return obj;
    });
    return selectOptions;
  }
}

},{"../dropdown":105,"../utils":185,"../viewer":201,"./editdispatcher":110,"jquery":25}],109:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = {
  emitChangeEdit: emitChangeEdit,
  emitChangeFeature: emitChangeFeature,
  emitToggleEdit: emitToggleEdit,
  emitEnableInteraction: emitEnableInteraction,
  emitEditsChange: emitEditsChange,
  emitChangeEditorShapes: emitChangeEditorShapes,
  emitChangeOfflineEdits: emitChangeOfflineEdits
}

function emitChangeEdit(tool, state) {
  $.event.trigger({
    type: 'changeEdit',
    tool: tool,
    active: state
  });
}

function emitChangeFeature(change) {
  $.event.trigger({
    type: 'changeFeature',
    feature: change.feature,
    layerName: change.layerName,
    action: change.action,
    status: change.status || 'pending'
  });
}

function emitToggleEdit(tool, opt_options) {
  var options = opt_options || {};
  var e = {
    type: 'toggleEdit',
    tool: tool
  };
  $.extend(e, options);
  $.event.trigger(e);
}

function emitEnableInteraction() {
  $.event.trigger({
    type: 'enableInteraction',
    interaction: 'editor'
  });
}

function emitEditsChange(edits) {
  $.event.trigger({
    type: 'editsChange',
    edits: edits
  });
}

function emitChangeEditorShapes(shape) {
  $.event.trigger({
    type: 'editorShapes',
    shape: shape
  });
}

function emitChangeOfflineEdits(edits, layerName) {
  $.event.trigger({
    type: 'changeOfflineEdits',
    edits: edits,
    layerName: layerName
  });
}

},{"jquery":25}],110:[function(require,module,exports){
arguments[4][109][0].apply(exports,arguments)
},{"dup":109,"jquery":25}],111:[function(require,module,exports){
"use strict";

module.exports = function createForm(obj) {
  var id = obj.elId.slice(1);
  var cls = obj.cls || '';
  cls += id;
  cls += obj.isVisible ? "" : " o-hidden";
  var label = obj.title;
  var val = obj.isVisible ? obj.val : '';
  var type = obj.type;
  var maxLength = obj.maxLength ? ' maxlength="' + obj.maxLength + '" ' : '';
  var dropdownOptions = obj.options || [];
  var el;
  var checked;
  var firstOption;
  switch (type) {
    case 'text':
      el = '<div><label>' + label + '</label><br><input type="text" id="' + id + '" value="' + val + '"' + maxLength + '></div>';
      break;
    case 'textarea':
      el = '<div><label>' + label + '</label><br><textarea id="' + id + '"' + maxLength + 'rows="3">' + val + '</textarea></div>';
      break;
    case 'checkbox':
      checked = val ? ' checked' : '';
      el = '<div class="o-form-checkbox"><label>' + label + '</label><input type="checkbox" id="' + id + '" value="' + val + '"' + checked + '></div>';
      break;
    case 'dropdown':
      firstOption;
      if (val) {
        firstOption = '<option value="' + val + '" selected>' + val + '</option>';
      } else {
        firstOption = '<option value="" selected>Välj</option>';
      }
      el = '<div class="' + cls + '"><label>' + label + '</label><br><select id=' + id + '>' + firstOption;
      for (var i = 0; i < dropdownOptions.length; i++) {
        el += '<option value="' + dropdownOptions[i] + '">' + dropdownOptions[i] + '</option>';
      }
      el += '</select></div>';
      break;
    case 'image':
      var imageClass = val ? '' : 'o-hidden';
      el = '<div class="' + cls + '"><label>' + label + '</label><br>';
      el += '<img src="' + val + '" id="image-upload" class="' + imageClass + '"/>';
      el += '<input type="file" id="' + id + '" value="' + val + '" accept="image/*">';
      el += '<input id="o-delete-image-button" class="' + imageClass + '" type="button" value="Ta bort bild">';
      el += '</div>';
      break;
  }
  return el;
}

},{}],112:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var modal = require('../modal');
var featureInfo = require('../featureinfo');
var editsStore = require('./editsstore')();
var generateUUID = require('../utils/generateuuid');
var transactionHandler = require('./transactionhandler');
var dispatcher = require('./editdispatcher');
var editForm = require('./editform');
var imageresizer = require('../utils/imageresizer');
var getImageOrientation = require('../utils/getimageorientation');
var shapes = require('./shapes');

var editLayers = {};
var autoSave = undefined;
var autoForm = undefined;
var editSource = undefined;
var geometryType = undefined;
var geometryName = undefined;
var map = undefined;
var currentLayer = undefined;
var editableLayers = undefined;
var attributes = undefined;
var title = undefined;
var draw = undefined;
var hasDraw = undefined;
var hasAttribute = undefined;
var hasSnap = undefined;
var select = undefined;
var modify = undefined;
var snap = undefined;
var tools = undefined;

module.exports = function(options) {
  map = viewer.getMap();
  currentLayer = options.currentLayer;
  editableLayers = options.editableLayers;
  tools = options.drawTools || [];

  //set edit properties for editable layers
  editLayers = setEditProps(options);
  editableLayers.forEach(function(layerName) {
    var layer = viewer.getLayer(layerName);
    verifyLayer(layerName);
    if (layerName === currentLayer && options.isActive) {
      dispatcher.emitEnableInteraction();
      setEditLayer(layerName);
    }
  });

  autoSave = options.autoSave;
  autoForm = options.autoForm;
  $(document).on('toggleEdit', onToggleEdit);
  $(document).on('changeEdit', onChangeEdit);
  $(document).on('editorShapes', onChangeShape);
}

function setEditLayer(layerName) {
  currentLayer = layerName;
  setInteractions();
}

function setInteractions(drawType) {
  var editLayer = editLayers[currentLayer];
  var drawOptions;
  editSource = editLayer.getSource();
  attributes = editLayer.get('attributes');
  title = editLayer.get('title') || 'Information';
  drawOptions = {
    source: editSource,
    type: editLayer.get('geometryType'),
    geometryName: editLayer.get('geometryName')
  };
  if (drawType) {
    $.extend(drawOptions, shapes(drawType));
  }
  removeInteractions();
  draw = new ol.interaction.Draw(drawOptions);
  hasDraw = false;
  hasAttribute = false;
  select = new ol.interaction.Select({
    layers: [editLayer]
  });
  modify = new ol.interaction.Modify({
    features: select.getFeatures()
  });
  map.addInteraction(select);
  map.addInteraction(modify);
  map.addInteraction(draw);
  modify.on('modifyend', onModifyEnd, this);
  draw.on('drawend', onDrawEnd, this);
  setActive();

  //If snap should be active then add snap internactions for all snap layers
  hasSnap = editLayer.get('snap');
  if (hasSnap) {
    var selectionSource = featureInfo.getSelectionLayer().getSource();
    var snapSources = editLayer.get('snapLayers') ? getSnapSources(editLayer.get('snapLayers')) : [editLayer.get('source')];
    snapSources.push(selectionSource);
    snap = addSnapInteraction(snapSources);
  }
}

function verifyLayer(layerName) {
  if (!(editLayers[layerName].get('geometryType'))) {
    addFeatureAddListener(layerName);
  }
}

function setGeometryProps(layer) {
  var layerName = layer.get('name');
  editLayers[layerName].set('geometryType', layer.getSource().getFeatures()[0].getGeometry().getType());
  if (layerName === currentLayer) {
    setEditLayer(layerName);
  }
}

function addFeatureAddListener(layerName) {
  var layer = viewer.getLayer(layerName);
  layer.getSource().once('addfeature', function(e) {
    setGeometryProps(layer);
  });
}

function setEditProps(options) {
  var initialValue = {};
  var result = editableLayers.reduce(function(layerProps, layerName) {
    var layer = viewer.getLayer(layerName);
    var snap = options.hasOwnProperty('snap') ? options.snap : true;
    var snapLayers = options.snapLayers || editableLayers;
    layer.set('snap', snap);
    layer.set('snapLayers', snapLayers);
    layerProps[layerName] = layer;
    return layerProps;
  }, initialValue);
  return result;
}

function isActive() {
  if (modify === undefined || select === undefined) {
    return false;
  } else {
    return true;
  }
}

function onDeleteSelected() {
  var features = select.getFeatures();

  // Make sure all features are loaded in the source
  editSource = editLayers[currentLayer].getSource();
  if (features.getLength() === 1) {
    var feature = features.item(0);
    var r = confirm('Är du säker på att du vill ta bort det här objektet?');
    if (r === true) {
      saveFeature({
        feature: feature,
        layerName: currentLayer,
        action: 'delete'
      });
      select.getFeatures().clear();
      editSource.removeFeature(editSource.getFeatureById(feature.getId()));
    }
  }
}

function onModifyEnd(evt) {
  var feature = evt.features.item(0);
  saveFeature({
    feature: feature,
    layerName: currentLayer,
    action: 'update'
  });
}

function onDrawEnd(evt) {
  var feature = evt.feature;
  var layer = viewer.getLayer(currentLayer);
  var attributes = getDefaultValues(layer.get('attributes'));
  feature.setProperties(attributes);
  feature.setId(generateUUID());
  editSource.addFeature(feature);
  setActive();
  hasDraw = false;
  saveFeature({
    feature: feature,
    layerName: currentLayer,
    action: 'insert'
  });
  dispatcher.emitChangeEdit('draw', false);
  if (autoForm) {
    editAttributes(feature);
  }
}

function cancelDraw() {
  setActive();
  hasDraw = false;
  dispatcher.emitChangeEdit('draw', false);
}

function onChangeShape(e) {
  setInteractions(e.shape);
  startDraw();
}

function cancelAttribute() {
  modal.closeModal();
  dispatcher.emitChangeEdit('attribute', false);
}

function onAttributesSave(feature, attributes) {
  $('#o-save-button').on('click', function(e) {
    var editEl = {};
    var fileReader;
    var imageData;
    var input;
    var file;
    var orientation;

    //Read values from form
    attributes.forEach(function(attribute) {

      //Get the input container class
      var containerClass = '.' + attribute.elId.slice(1);

      // If hidden element it should be excluded
      if ($(containerClass).hasClass('o-hidden') === false) {

        //Check if checkbox. If checkbox read state.
        if ($(attribute.elId).attr('type') === 'checkbox') {
          editEl[attribute.name] = $(attribute.elId).is(':checked') ? 1 : 0;
        }

        //Read value from input text, textarea or select
        else {
          editEl[attribute.name] = $(attribute.elId).val();
        }
      }

      //Check if file. If file, read and trigger resize
      if ($(attribute.elId).attr('type') === 'file') {
        input = $(attribute.elId)[0];
        file = input.files[0];

        if (file) {
          fileReader = new FileReader();
          fileReader.onload = function() {
            getImageOrientation(file, function(orientation) {
              imageresizer(fileReader.result, attribute, orientation, function(resized) {
                editEl[attribute.name] = resized;
                $(document).trigger('imageresized');
              });
            });
          }

          fileReader.readAsDataURL(file);
        } else {
          editEl[attribute.name] = $(attributes[0].elId).attr('value');
        }
      }
    });

    if (fileReader && fileReader.readyState == 1) {
      $(document).on('imageresized', function() {
        attributesSaveHandler(feature, editEl);
      });
    } else {
      attributesSaveHandler(feature, editEl);
    }

    modal.closeModal();
    $('#o-save-button').blur();
    e.preventDefault();
  });
}

function attributesSaveHandler(feature, formEl) {

  //get DOM values and set attribute values to feature
  attributes.forEach(function(attribute) {
    if (formEl.hasOwnProperty(attribute.name)) {
      feature.set(attribute.name, formEl[attribute.name]);
    }
  });
  saveFeature({
    feature: feature,
    layerName: currentLayer,
    action: 'update'
  });
}

function removeInteractions() {
  if (isActive()) {
    map.removeInteraction(modify);
    map.removeInteraction(select);
    map.removeInteraction(draw);
    if (snap) {
      snap.forEach(function(snapInteraction) {
        map.removeInteraction(snapInteraction);
      });
    }

    modify = undefined;
    select = undefined;
    draw = undefined;
    snap = undefined;
  }
}

function startDraw() {
  if (hasDraw !== true && isActive()) {
    setActive('draw');
    hasDraw = true;
    dispatcher.emitChangeEdit('draw', true);
  }
}

function addListener() {
  var fn = function(obj) {
    $(obj.elDependencyId).on(obj.eventType, function(e) {
      var containerClass = '.' + obj.elId.slice(1);
      if ($(obj.elDependencyId + (' option:selected')).text() === obj.requiredVal) {
        $(containerClass).removeClass('o-hidden');
      } else {
        $(containerClass).addClass('o-hidden');
      }
    });
  }

  return fn;
}

function addImageListener() {
  var fn = function(obj) {
    var fileReader = new FileReader();
    var containerClass = '.' + obj.elId.slice(1);
    $(obj.elId).on('change', function(e) {
      $(containerClass + ' img').removeClass('o-hidden');
      $(containerClass + ' input[type=button]').removeClass('o-hidden');

      if (this.files && this.files[0]) {
        fileReader.onload = function (e) {
          $(containerClass + ' img').attr('src', e.target.result);
        };

        fileReader.readAsDataURL(this.files[0]);
      }
    });

    $(containerClass + ' input[type=button]').on('click', function(e) {
      $(obj.elId).attr('value', '');
      $(containerClass + ' img').addClass('o-hidden');
      $(this).addClass('o-hidden');
    });
  }

  return fn;
}

function onToggleEdit(e) {
  e.stopPropagation();
  if (e.tool === 'draw') {
    if (hasDraw === false) {
      setInteractions();
      startDraw();
    } else {
      cancelDraw();
    }
  } else if (e.tool === 'attribute') {
    if (hasAttribute === false) {
      editAttributes();
    } else {
      cancelAttribute();
    }
  } else if (e.tool === 'delete') {
      onDeleteSelected();
  } else if (e.tool === 'edit') {
      setEditLayer(e.currentLayer);
  } else if (e.tool === 'cancel') {
      removeInteractions();
  } else if (e.tool === 'save') {
      saveFeatures();
  }
}

function onChangeEdit(e) {
  if (e.tool!== 'draw' && e.active) {
    cancelDraw();
  }
}

function getSnapSources(layers) {
  var sources = layers.map(function(layer) {
    return viewer.getLayer(layer).getSource();
  });

  return sources;
}

function addSnapInteraction(sources) {
  var snapInteractions = [];
  sources.forEach(function(source) {
    var interaction = new ol.interaction.Snap({
      source: source
    });
    snapInteractions.push(interaction);
    map.addInteraction(interaction);
  });
  return snapInteractions;
}

function setActive(editType) {
  switch (editType) {
    case 'modify':
      draw.setActive(false);
      modify.setActive(true);
      select.setActive(true);
      break;
    case 'draw':
      draw.setActive(true);
      modify.setActive(true);
      select.setActive(false);
      break;
    default:
      draw.setActive(false);
      hasDraw = false;
      modify.setActive(true);
      select.setActive(true);
      break;
  }
}

function editAttributes(feature) {
  var attributeObjects;
  var features;

  //Get attributes from the created, or the selected, feature and fill DOM elements with the values
  if (feature) {
    features = new ol.Collection();
    features.push(feature);
  } else {
    features = select.getFeatures();
  }
  if (features.getLength() === 1) {
    dispatcher.emitChangeEdit('attribute', true);
    var feature = features.item(0);
    if (attributes.length > 0) {

      //Create an array of defined attributes and corresponding values from selected feature
      attributeObjects = attributes.map(function(attributeObject) {
        var obj = {};
        $.extend(obj, attributeObject);
        obj.val = feature.get(obj.name) || '';
        if (obj.hasOwnProperty('constraint')) {
          var constraintProps = obj.constraint.split(':');
          if (constraintProps.length === 3) {
            obj.eventType = constraintProps[0];
            obj.dependencyVal = feature.get(constraintProps[1]);
            obj.requiredVal = constraintProps[2];
            obj.dependencyVal === obj.requiredVal ? obj.isVisible = true : obj.isVisible = false;
            obj.addListener = addListener();
            obj.elId = '#input-' + obj.name + '-' + obj.requiredVal;
            obj.elDependencyId = '#input-' + constraintProps[1];
          } else {
            alert('Villkor verkar inte vara rätt formulerat. Villkor formuleras enligt principen change:attribute:value');
          }
        } else if (obj.type === 'image') {
          obj.isVisible = true;
          obj.elId = '#input-' + obj.name;
          obj.addListener = addImageListener();
        } else {
          obj.isVisible = true;
          obj.elId = '#input-' + obj.name;
        }

        obj.formElement = editForm(obj);
        return obj;
      });

    }
    var formElement = attributeObjects.reduce(function(prev, next) {
      return prev + next.formElement;
    }, '');
    var form = '<form>' + formElement + '<br><div class="o-form-save"><input id="o-save-button" type="button" value="Ok"></input></div></form>';
    modal.createModal('#o-map', {
      title: title,
      content: form,
      static: true
    });
    modal.showModal();

    attributeObjects.forEach(function(obj) {
      if (obj.hasOwnProperty('addListener')) {
        obj.addListener(obj);
      }
    });

    onAttributesSave(feature, attributeObjects);
  }
}

function saveFeature(change) {
  dispatcher.emitChangeFeature(change);
  if (autoSave) {
    saveFeatures(change);
  }
}

function saveFeatures() {
  var edits = editsStore.getEdits();
  var layerNames = Object.getOwnPropertyNames(edits);
  layerNames.forEach(function(layerName) {
    var transaction = {
      insert: null,
      delete: null,
      update: null
    };
    var editTypes = Object.getOwnPropertyNames(edits[layerName]);
    editTypes.forEach(function(editType) {
      var layer = viewer.getLayer(layerName);
      var ids = edits[layerName][editType];
      var features;
      features = getFeaturesByIds(editType, layer, ids);
      if (features.length) {
        transaction[editType] = features;
      }
    });

    transactionHandler(transaction, layerName);
  });
}

function getFeaturesByIds(type, layer, ids) {
  var source = layer.getSource();
  var features = [];
  if (type === 'delete') {
    ids.forEach(function(id) {
      var dummy = new ol.Feature();
      dummy.setId(id);
      features.push(dummy);
    });
  } else {
    ids.forEach(function(id) {
      if (source.getFeatureById(id)) {
        /*** REMOVE ***/
        var feature = source.getFeatureById(id);
        feature.unset('bbox');
        features.push(feature);
        /*** *** ***/

        //features.push(source.getFeatureById(id));
      }
    });
  }

  return features;
}

function getDefaultValues(attributes) {
  return attributes.filter(function(attribute) {
      if (attribute.name && attribute.defaultValue) {
        return attribute;
      }
    })
    .reduce(function(prev, curr) {
      prev[curr.name] = curr.defaultValue
      return prev;
    },{});
}

},{"../featureinfo":120,"../modal":152,"../utils/generateuuid":187,"../utils/getimageorientation":188,"../utils/imageresizer":190,"../viewer":201,"./editdispatcher":110,"./editform":111,"./editsstore":115,"./shapes":117,"./transactionhandler":118,"jquery":25,"openlayers":27}],113:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('../viewer');
var dropDown = require('../dropdown');
var dispatcher = require('./editdispatcher');
var createElement = require('../utils').createElement;

module.exports = function editorLayers(editableLayers, opt_options) {
  var active = false;
  var activeCls = 'o-active';
  var target = 'editor-toolbar-layers-dropdown';
  var defaultOptions = {
    target: target,
    selectOptions: selectionModel(editableLayers),
    activeLayer: editableLayers[0]
  };
  var renderOptions = $.extend(defaultOptions, opt_options);

  render(renderOptions);
  addListener(target);

  function render(options) {
    var popover = createElement('div', '', {
      id: options.target,
      cls: 'o-popover'
    });
    $('#' + 'o-editor-layers').after(popover);
    dropDown(options.target, options.selectOptions, {
      dataAttribute: 'layer',
      active: options.activeLayer
    });
  }

  function addListener() {
    $('#' + target).on('changeDropdown', function(e) {
      e.stopImmediatePropagation(e);
      setActive(false);
      dispatcher.emitToggleEdit('edit', {
        currentLayer: e.dataAttribute
      });
    });
    $(document).on('toggleEdit', onToggleEdit);
    $(document).on('changeEdit', onChangeEdit);
  }

  function onToggleEdit(e) {
    if (e.tool === 'layers') {
      if (active) {
        setActive(false);
      } else {
        setActive(true);
      }
    }
    e.stopPropagation();
  }

  function onChangeEdit(e) {
    if (e.tool !== 'layers' && e.active === true) {
      setActive(false);
    }
    e.stopPropagation();
  }

  function setActive(state) {
    if (state) {
      active = true;
      $('#' + target).addClass(activeCls);
    } else {
      active = false;
      $('#' + target).removeClass(activeCls);
    }
    dispatcher.emitChangeEdit('layers', active);
  }

  function close() {
    if (active) {
      setActive(false);
    }
  }

  function selectionModel(layerNames) {
    var selectOptions = layerNames.map(function(layerName) {
      var obj = {};
      obj.name = viewer.getLayer(layerName).get('title');
      obj.value = layerName;
      return obj;
    });
    return selectOptions;
  }
}

},{"../dropdown":105,"../utils":185,"../viewer":201,"./editdispatcher":110,"jquery":25}],114:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var editortemplate = require("../templates/editortoolbar.template.handlebars");
var dispatcher = require('./editdispatcher');
var editHandler = require('./edithandler');
var editorLayers = require('./editorlayers');
var drawTools = require('./drawtools');

var activeClass = 'o-control-active';
var disableClass = 'o-disabled';
var currentLayer = undefined;
var editableLayers = undefined;
var $editAttribute = undefined;
var $editDraw = undefined;
var $editDelete = undefined;
var $editLayers = undefined;
var $editSave = undefined;
var $editClose = undefined;

module.exports = function() {

  return {
    init: Init
  };
}()

function Init(options) {
  currentLayer = options.currentLayer;
  editableLayers = options.editableLayers;

  editHandler(options);
  render();
  editorLayers(editableLayers, {
    activeLayer: currentLayer
  });
  drawTools(options.drawTools, currentLayer);

  $(document).on('enableInteraction', onEnableInteraction);
  $(document).on('changeEdit', onChangeEdit);
  $(document).on('editsChange', toggleSave);

  bindUIActions();

  if (options.isActive) {
    setActive(true);
  }
}

function render() {
  $("#o-tools-bottom").append(editortemplate());
  $editAttribute = $('#o-editor-attribute');
  $editDraw = $('#o-editor-draw');
  $editDelete = $('#o-editor-delete');
  $editLayers = $('#o-editor-layers');
  $editSave = $('#o-editor-save');
  $editClose = $('#o-editor-close');
}

function bindUIActions() {
  var self = this;
  $editDraw.on('click', function(e) {
    dispatcher.emitToggleEdit('draw');
    $editDraw.blur();
    e.preventDefault();
    return false;
  });
  $editAttribute.on('click', function(e) {
    dispatcher.emitToggleEdit('attribute');
    $editAttribute.blur();
    e.preventDefault();
  });
  $editDelete.on('click', function(e) {
    dispatcher.emitToggleEdit('delete');
    $editDelete.blur();
    e.preventDefault();
  });
  $editLayers.on('click', function(e) {
    dispatcher.emitToggleEdit('layers');
    $editLayers.blur();
    e.preventDefault();
  });
  $editSave.on('click', function(e) {
    dispatcher.emitToggleEdit('save');
    $editSave.blur();
    e.preventDefault();
  });
  $editClose.on('click', function(e) {
    $('.o-map').first().trigger({
      type: 'enableInteraction',
      interaction: 'featureInfo'
    });
    $editClose.blur();
    e.stopPropagation();
    e.preventDefault();
  });
}

function onEnableInteraction(e) {
  e.stopPropagation();
  if (e.interaction === 'editor') {
    setActive(true);
    dispatcher.emitToggleEdit('edit', {
      currentLayer: currentLayer
    });
  } else {
    setActive(false);
    dispatcher.emitToggleEdit('cancel');
  }
}

function setActive(state) {
  if (state === true) {
    $('#o-editor-toolbar').removeClass('o-hidden');
  } else {
    $('#o-editor-toolbar').addClass('o-hidden');
  }
}

function onChangeEdit(e) {
  if (e.tool === 'draw') {
    if (e.active === false) {
      $editDraw.removeClass(activeClass);
    } else {
      $editDraw.addClass(activeClass);
    }
  }
  if (e.tool === 'layers') {
    if (e.active === false) {
      $editLayers.removeClass(activeClass);
    } else {
      $editLayers.addClass(activeClass);
    }
  } else if (e.active) {
    $editLayers.removeClass(activeClass);
  }
}

function toggleSave(e) {
  if (e.edits) {
    if ($editSave.hasClass(disableClass)) {
      $editSave.removeClass(disableClass);
    }
  } else {
    $editSave.addClass(disableClass);
  }
}

},{"../templates/editortoolbar.template.handlebars":180,"../viewer":201,"./drawtools":108,"./editdispatcher":110,"./edithandler":112,"./editorlayers":113,"jquery":25,"openlayers":27}],115:[function(require,module,exports){
var $ = require('jquery');
var ol = require('openlayers');
var viewer = require('../viewer');
var dispatcher = require('./editdispatcher');

var editsStore = function featureStore() {
  var edits = {};

  $(document).on('changeFeature', featureChange);

  return {
    getEdits: getEdits,
    hasFeature: hasFeature
  };

  function addEdit(e) {
    if (e.action === 'insert') {
      addFeature('insert', e.feature, e.layerName);
    } else if (e.action === 'update') {
      if (hasFeature('insert', e.feature, e.layerName) === false) {
        addFeature('update', e.feature, e.layerName);
      }
    } else if (e.action === 'delete') {
      if (removeFeature('insert', e.feature, e.layerName) === false) {
        removeFeature('update', e.feature, e.layerName);
        addFeature('delete', e.feature, e.layerName);
      }
    }
    if (hasEdits() === true) {
      dispatcher.emitEditsChange(1);
    } else {
      dispatcher.emitEditsChange(0);
    }
  }

  function removeEdit(e) {
    if (e.feature.length) {
      e.feature.forEach(function(feature) {
        removeFeature(e.action, feature, e.layerName)
      });
    }
    if (hasEdits() === false) {
      dispatcher.emitEditsChange(0);
    }
  }

  function getEdits() {
    return edits;
  }

  function featureChange(e) {
    if (e.status === 'pending') {
      addEdit(e);
    } else if (e.status === 'finished') {
      removeEdit(e);
    }
  }

  function hasFeature(type, feature, layerName) {
    if (edits.hasOwnProperty(layerName)) {
      if (edits[layerName][type].indexOf(feature.getId()) > -1) {
        return true;
      }
    }
    return false;
  }

  function addFeature(type, feature, layerName) {
    if (edits.hasOwnProperty(layerName) === false) {
      edits[layerName] = createEditsObj();
    }
    if (hasFeature(type, feature, layerName) === false) {
      edits[layerName][type].push(feature.getId());
    }
  }

  function removeFeature(type, feature, layerName) {
    var index = 0;
    if (edits.hasOwnProperty(layerName)) {
      index = edits[layerName][type].indexOf(feature.getId());
      if (index > -1) {
        edits[layerName][type].splice(index, 1);
        isFinished(layerName);
        return true;
      }
    }
    return false;
  }

  function isFinished(layerName) {
    var editTypes;
    var finished = true;
    if (edits.hasOwnProperty(layerName)) {
      editTypes = Object.getOwnPropertyNames(edits[layerName]);
      editTypes.forEach(function(editType) {
        if (edits[layerName][editType].length) {
          finished = false;
          return finished;
        }
      });
      if (finished) {
        delete edits[layerName];
        return finished;
      }
    } else {
      return finished;
    }
  }

  function createEditsObj() {
    return {
      update: [],
      insert: [],
      delete: []
    }
  }

  function hasEdits() {
    if (Object.getOwnPropertyNames(edits).length) {
      return true;
    } else {
      return false;
    }
  }
}

module.exports = editsStore;

},{"../viewer":201,"./editdispatcher":110,"jquery":25,"openlayers":27}],116:[function(require,module,exports){
var dispatcher = require('./editdispatcher');

module.exports = function(transObj, layerName) {
  dispatcher.emitChangeOfflineEdits(transObj, layerName);
}

},{"./editdispatcher":110}],117:[function(require,module,exports){
"use strict";

var ol = require('openlayers');

module.exports = function(drawType) {
  var types = {
    box: {
      type: 'Circle',
      geometryFunction: ol.interaction.Draw.createBox()
    }
  };

  if (types.hasOwnProperty(drawType)) {
    return types[drawType];
  } else {
    return {};
  }
}

},{"openlayers":27}],118:[function(require,module,exports){
"use strict";

var viewer = require('../viewer');
var wfsTransaction = require('./wfstransaction');
var agsTransaction = require('./agstransaction');
var indexedDb = require('./indexeddb');
var transactions = {
  WFS: wfsTransaction,
  AGS_FEATURE: agsTransaction,
  OFFLINE: indexedDb
};

module.exports = function(transaction, layerName) {
  var type = viewer.getLayer(layerName).get('type');
  if (transactions.hasOwnProperty(type)) {
    transactions[type](transaction, layerName);
  }
}

},{"../viewer":201,"./agstransaction":107,"./indexeddb":116,"./wfstransaction":119}],119:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var editsStore = require('./editsstore')();
var dispatcher = require('./editdispatcher');

var format = new ol.format.WFS();
var serializer = new XMLSerializer();

module.exports = function(transObj, layerName) {
  return wfsTransaction(transObj, layerName);
}

function writeWfsTransaction(transObj, options) {
  var node = format.writeTransaction(transObj.insert, transObj.update, transObj.delete, options);
  return node;
}

function wfsTransaction(transObj, layerName) {
  var srsName = viewer.getProjectionCode();
  var layer = viewer.getLayer(layerName);
  var featureType = layer.get('featureType');
  var source = viewer.getMapSource()[layer.get('sourceName')];
  var options = {
    gmlOptions: {
      srsName: srsName
    },
    featureNS: source.workspace,
    featurePrefix: source.prefix || source.workspace,
    featureType: featureType
  };
  var node = writeWfsTransaction(transObj, options);
  return $.ajax({
    type: "POST",
    url: source.url,
    data: serializer.serializeToString(node),
    contentType: 'text/xml',
    success: success,
    error: error,
    context: this
  })
    .then(function(data) {
      var result = readResponse(data);
      var nr = 0;
      if (result) {
        nr += result.transactionSummary.totalUpdated;
        nr += result.transactionSummary.totalDeleted;
        nr += result.transactionSummary.totalInserted;
      }
      return nr;
    });

  function success(data) {
    var result = readResponse(data);
    var feature;
    if (result) {
      if (result.transactionSummary.totalUpdated > 0) {
        dispatcher.emitChangeFeature({
          feature: transObj.update,
          layerName: layerName,
          status: 'finished',
          action: 'update'
        });
      }

      if (result.transactionSummary.totalDeleted > 0) {
        dispatcher.emitChangeFeature({
          feature: transObj.delete,
          layerName: layerName,
          status: 'finished',
          action: 'delete'
        });
      }

      if (result.transactionSummary.totalInserted > 0) {
        feature = transObj.insert;
        dispatcher.emitChangeFeature({
          feature: transObj.insert,
          layerName: layerName,
          status: 'finished',
          action: 'insert'
        });
        var insertIds = result.insertIds;
        insertIds.forEach(function(insertId, index) {
          feature[index].setId(insertId);
        });
      }
    } else {
      error();
    }
  }

  function error(e) {
    var errorMsg = e ? (e.status + ' ' + e.statusText) : "";
    alert('Det inträffade ett fel när ändringarna skulle sparas till servern...\n' +
      errorMsg);
  }
}

function readResponse(data) {
  var result;
  if (window.Document && data instanceof Document && data.documentElement &&
    data.documentElement.localName === 'ExceptionReport') {
    alert(data.getElementsByTagNameNS(
      'http://www.opengis.net/ows', 'ExceptionText').item(0).textContent);
  } else {
    result = format.readTransactionResponse(data);
  }

  return result;
}

},{"../viewer":201,"./editdispatcher":110,"./editsstore":115,"jquery":25,"openlayers":27}],120:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var Popup = require('./popup');
var sidebar = require('./sidebar');
var maputils = require('./maputils');
var featurelayer = require('./featurelayer');
var style = require('./style')();
var styleTypes = require('./style/styletypes');
var getFeatureInfo = require('./getfeatureinfo');
var owlCarousel = require('../externs/owlcarousel-browserify');
owlCarousel.loadjQueryPlugin();

var selectionLayer = undefined;
var savedPin = undefined;
var options;
var map;
var pinning;
var pinStyle;
var selectionStyles;
var showOverlay;
var identifyTarget;
var clusterFeatureinfoLevel;
var overlay;
var hitTolerance;

function init(opt_options) {
  map = Viewer.getMap();

  options = opt_options || {};

  pinning = options.hasOwnProperty('pinning') ? options.pinning : true;
  var pinStyleOptions = options.hasOwnProperty('pinStyle') ? options.pinStyle : styleTypes.getStyle('pin');
  pinStyle = style.createStyleRule(pinStyleOptions)[0];
  savedPin = options.savedPin ? maputils.createPointFeature(opt_options.savedPin, pinStyle) : undefined;

  selectionStyles = style.createEditStyle();

  var savedSelection = options.savedSelection || undefined;
  var savedFeature = savedPin || savedSelection || undefined;
  selectionLayer = featurelayer(savedFeature, map);

  showOverlay = options.hasOwnProperty('overlay') ? options.overlay : true;

  if(showOverlay) {
    identifyTarget = 'overlay';
  }
  else {
    sidebar.init();
    identifyTarget = 'sidebar';
  }

  clusterFeatureinfoLevel = options.hasOwnProperty('clusterFeatureinfoLevel') ? options.clusterFeatureinfoLevel : 1;

  hitTolerance = options.hasOwnProperty('hitTolerance') ? options.hitTolerance : 0;

  map.on('click', onClick);
  $(document).on('enableInteraction', onEnableInteraction);

}

function getSelectionLayer() {
  return selectionLayer.getFeatureLayer();
}

function getSelection() {
  var selection = {};
  selection.geometryType = selectionLayer.getFeatures()[0].getGeometry().getType();
  selection.coordinates = selectionLayer.getFeatures()[0].getGeometry().getCoordinates();
  return selection;
}
function getPin() {
  return savedPin;
}
function getHitTolerance() {
  return hitTolerance;
}
function identify(items, target, coordinate) {
  clear();
  var content = items.map(function(i){
    return i.content;
  }).join('');
  content = '<div id="o-identify"><div id="o-identify-carousel" class="owl-carousel owl-theme">' + content + '</div></div>';
  switch (target) {
    case 'overlay':
      var popup = Popup('#o-map');
      overlay = new ol.Overlay({
        element: popup.getEl()
      });
      map.addOverlay(overlay);
      var geometry = items[0].feature.getGeometry();
      var coord;
      geometry.getType() == 'Point' ? coord = geometry.getCoordinates() : coord = coordinate;
      overlay.setPosition(coord);
      popup.setContent({content: content, title: items[0].title});
      popup.setVisibility(true);
      var owl = initCarousel('#o-identify-carousel', undefined, function(){
        var currentItem = this.owl.currentItem;
        selectionLayer.clearAndAdd(items[currentItem].feature.clone(), selectionStyles[items[currentItem].feature.getGeometry().getType()]);
        popup.setTitle(items[currentItem].title);
      });
      Viewer.autoPan();
      break;
    case 'sidebar':
      sidebar.setContent({content: content, title: items[0].title});
      sidebar.setVisibility(true);
      var owl = initCarousel('#o-identify-carousel', undefined, function(){
        var currentItem = this.owl.currentItem;
        selectionLayer.clearAndAdd(items[currentItem].feature.clone(), selectionStyles[items[currentItem].feature.getGeometry().getType()]);
        sidebar.setTitle(items[currentItem].title);
      });
      break;
  }
}
function onClick(evt) {
  savedPin = undefined;
  //Featurinfo in two steps. Concat serverside and clientside when serverside is finished
  var clientResult = getFeatureInfo.getFeaturesAtPixel(evt, clusterFeatureinfoLevel);
  //Abort if clientResult is false
  if(clientResult !== false) {
    getFeatureInfo.getFeaturesFromRemote(evt)
      .done(function(data) {
        var serverResult = data || [];
        var result = serverResult.concat(clientResult);
        if (result.length > 0) {
          selectionLayer.clear();
          identify(result, identifyTarget, evt.coordinate)
        }
        else if(selectionLayer.getFeatures().length > 0) {
          clear();
        }
        else if(pinning){
          sidebar.setVisibility(false);
          var resolution = map.getView().getResolution();
          setTimeout(function() {
            if(!maputils.checkZoomChange(resolution, map.getView().getResolution())) {
              savedPin = maputils.createPointFeature(evt.coordinate, pinStyle);
              selectionLayer.addFeature(savedPin);
            }
          }, 250);
        }
        else {
          console.log('No features identified');
        }
      });
  }
}
function setActive(state) {
  if(state === true) {
    map.on('click', onClick);
  }
  else {
    clear();
    map.un('click', onClick);
  }
}
function clear() {
  selectionLayer.clear();
  sidebar.setVisibility(false);
  if (overlay) {
    Viewer.removeOverlays(overlay);      
  }
  console.log("Clearing selection");
}
function onEnableInteraction(e) {
  if(e.interaction === 'featureInfo') {
    setActive(true);
  }
  else {
    setActive(false);
  }
}
function initCarousel(id, options, cb) {
  var carouselOptions = options || {
    navigation : true, // Show next and prev buttons
    slideSpeed : 300,
    paginationSpeed : 400,
    singleItem:true,
    rewindSpeed:200,
    navigationText: ['<svg class="o-icon-fa-chevron-left"><use xlink:href="#fa-chevron-left"></use></svg>', '<svg class="o-icon-fa-chevron-right"><use xlink:href="#fa-chevron-right"></use></svg>'],
    afterAction: cb
  };
  return $(id).owlCarousel(carouselOptions);
}

module.exports.init = init;
module.exports.clear = clear;
module.exports.getSelectionLayer = getSelectionLayer;
module.exports.getSelection = getSelection;
module.exports.getPin = getPin;
module.exports.getHitTolerance = getHitTolerance;
module.exports.identify = identify;

},{"../externs/owlcarousel-browserify":4,"./featurelayer":122,"./getfeatureinfo":130,"./maputils":150,"./popup":168,"./sidebar":175,"./style":176,"./style/styletypes":179,"./viewer":201,"jquery":25,"openlayers":27}],121:[function(require,module,exports){
"use strict";
var templates = {};
templates.default = require("./templates/featureinfotemplates/default");

function featureinfotemplates(template, attributes) {
    return templates[template](attributes);
}
module.exports = featureinfotemplates;

},{"./templates/featureinfotemplates/default":182}],122:[function(require,module,exports){
"use strict";

var ol = require('openlayers');

//create unmanaged layer
module.exports = function(features, map) {
  var collection = features ? [features] : [];
  var featureLayerStore = new ol.source.Vector({
      features: collection
  });
  var featureLayer = new ol.layer.Vector({
    source: featureLayerStore,
    map: map
  });
  return {
      addFeature: function addFeature(feature) {
          featureLayerStore.addFeature(feature);
      },
      getFeatures: function getFeatures() {
          return featureLayerStore.getFeatures();
      },
      getFeatureLayer: function getFeatureLayer() {
          return featureLayer;
      },
      getFeatureStore: function getFeatureStore() {
          return featureLayerStore;
      },
      clear: function clear() {
          featureLayerStore.clear();
      },
      clearAndAdd: function clearAndAdd(feature, style) {
          featureLayerStore.clear();
          featureLayer.setStyle(style);
          featureLayerStore.addFeature(feature);
      }
  }
}

},{"openlayers":27}],123:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var utils = require('./utils');
var permalink = require('./permalink/permalink');
var isEmbedded = require('./utils/isembedded');
var viewer = require('./viewer');

var tooltip;
var mapTarget;

function Init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-navigation';
  mapTarget = viewer.getTarget();
  tooltip = options.tooltipText || 'Visa stor karta';

  render(target);
  bindUIActions();
}

function render(target) {
  var el = utils.createButton({
    id: 'o-fullscreen-button',
    cls: 'o-fullscreen-button',
    iconCls: 'o-icon-fa-expand',
    src: '#fa-expand',
    tooltipText: tooltip,
    tooltipPlacement: 'east'
  });
  if (isEmbedded(mapTarget)) {
    $(target).append(el);
  }
}

function bindUIActions() {
  $('#o-fullscreen-button button').click(function(e) {
    goFullScreen();
    $('#o-fullscreen-button button').blur();
    e.preventDefault();
  })
}

function goFullScreen() {
  var url = permalink.getPermalink();
  window.open(url);
}

module.exports.init = Init;

},{"./permalink/permalink":165,"./utils":185,"./utils/isembedded":191,"./viewer":201,"jquery":25}],124:[function(require,module,exports){
var getcenter = require('./geometry/getcenter');
var getarea = require('./geometry/getarea');

var geom = {};
geom.center = getcenter;
geom.area = getarea;

module.exports = geom;

},{"./geometry/getarea":125,"./geometry/getcenter":126}],125:[function(require,module,exports){
"use strict";

var round = require('../utils/round');

var getArea = function getArea(geometry_in, decimals) {
  var area = geometry_in.getArea ? geometry_in.getArea() : 0;
  if (decimals) {
    area = round(area, decimals);
  } else {
    area = round(area, '2');
  }
  return area;
}

module.exports = getArea;

},{"../utils/round":196}],126:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var Viewer = require('../viewer');

var getCenter = function getCenter(geometry_in, destination, axisOrientation) {
    var geometry = geometry_in.clone();

    if (destination) {
      geometry.transform(Viewer.getMap().getView().getProjection(), destination);
    }

    var type = geometry.getType();
    var center;
    switch (type) {
        case "Polygon":
            center = geometry.getInteriorPoint().getCoordinates();
            break;
        case "MultiPolygon":
            center = geometry.getInteriorPoints().getCoordinates()[0];
            break;
        case "Point":
            center = geometry.getCoordinates();
            break;
        case "MultiPoint":
            center = geometry[0].getCoordinates();
            break;
        case "LineString":
            center = geometry.getCoordinateAt(0.5);
            break;
        case "MultiLineString":
            center = geometry.getLineStrings()[0].getCoordinateAt(0.5);
            break;
        case "Circle":
            center = geometry.getCenter();
            break;
    }

    if (axisOrientation) {
      if (axisOrientation === 'reverse') {
        center.reverse();
      }
    }

    return center;
}

module.exports = getCenter;

},{"../viewer":201,"openlayers":27}],127:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var $geolocateButtonId = undefined;
var $geolocateButton = undefined;
var enabled = false;
var map = undefined;
var geolocation = undefined;
var marker = undefined;
var markerEl = undefined;
var baseUrl = undefined;
var zoomLevel;

function init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-navigation';
  map = viewer.getMap();
  baseUrl = viewer.getBaseUrl();
  zoomLevel = options.zoomLevel || viewer.getResolutions().length - 3 || 0;

  render(target);

  $geolocateButtonId = $('#o-geolocation-button');
  $geolocateButton = $('#o-geolocation-button button');

  markerEl = $('#o-geolocation_marker').get(0);
  marker = new ol.Overlay({
    positioning: 'center-center',
    element: markerEl,
    stopEvent: false
  });

  geolocation = new ol.Geolocation(({
    projection: map.getView().getProjection(),
    trackingOptions: {
      maximumAge: 10000,
      enableHighAccuracy: true,
      timeout: 600000
    }
  }));

  bindUIActions();
}

function render(target) {
  var tooltipText = 'Visa nuvarande position i kartan';
  var src = baseUrl + 'img/geolocation_marker.png';
  var markerImg = '<img id="o-geolocation_marker" src="' + src + '"/>';

  //Element for control
  var el = utils.createButton({
    id: 'o-geolocation-button',
    cls: 'o-geolocation-button',
    iconCls: 'o-icon-fa-location-arrow',
    src: '#fa-location-arrow',
    tooltipText: tooltipText,
    tooltipPlacement: 'east'
  });
  $(target).append(el);
  $('#o-map').prepend(markerImg);
}

function bindUIActions() {
  $geolocateButtonId.on('click', function(e) {
    enabled = false;
    toggle();
    $geolocateButton.blur();
    e.preventDefault();
  });
}

function toggle() {
  if ($geolocateButton.hasClass('o-geolocation-button-true')) {
    $geolocateButton.removeClass('o-geolocation-button-true');
    geolocation.setTracking(false);

    geolocation.un('change', updatePosition);
    map.removeOverlay(marker);
  } else {
    $geolocateButton.addClass('o-geolocation-button-true');
    map.addOverlay(marker);

    // Listen to position changes
    geolocation.on('change', updatePosition);
    geolocation.setTracking(true); // Start position tracking
  }
}

function updatePosition() {
  addPosition(getPositionVal());
}

function getPositionVal() {
  var current = {};
  current.position = geolocation.getPosition();
  current.accuracy = geolocation.getAccuracy();
  current.heading = geolocation.getHeading() || 0;
  current.speed = geolocation.getSpeed() || 0;
  current.m = Date.now();
  return current;
}

function addPosition(current) {
  var position = current.position;

  if (enabled === false && geolocation.getTracking()) {
    marker.setPosition(position);
    map.getView().animate({
      center: position,
      zoom: zoomLevel
    });
    enabled = true;
  } else if (geolocation.getTracking()) {
    marker.setPosition(position);
  }
}

module.exports.init = init;

},{"./utils":185,"./viewer":201,"jquery":25,"openlayers":27}],128:[function(require,module,exports){
"use strict";
var featureinfotemplates = require('./featureinfotemplates');
var replacer = require('../src/utils/replacer');
var geom = require('./geom');

module.exports = function(feature, layer) {
    var content = '<div><ul>';
    var attribute, li = '', title, val;
    //If layer is configured with attributes
    if(layer.get('attributes')) {
          //If attributes is string then use template named with the string
          if(typeof layer.get('attributes') === 'string') {
              //Use attributes with the template
              li = featureinfotemplates(layer.get('attributes'),feature.getProperties());
          }
          else {
              for(var i=0; i<layer.get('attributes').length; i++) {
                attribute = layer.get('attributes')[i];
                title = '';
                val = '';
                if (attribute['name']) {
                  if(feature.get(attribute['name'])) {
                      val = feature.get(attribute['name']);
                      if (attribute['title']) {
                        title = '<b>' + attribute['title'] + '</b>';
                      }
                      if (attribute['url']) {
                        if(feature.get(attribute['url'])) {
                        var url = createUrl(attribute['urlPrefix'], attribute['urlSuffix'], replacer.replace(feature.get(attribute['url']), feature.getProperties()));
                        val = '<a href="' + url + '" target="_blank">' +
                              feature.get(attribute['name']) +
                              '</a>';
                        }
                      }
                  }
                }
                else if (attribute['url']) {
                    if(feature.get(attribute['url'])) {
                        var text = attribute['html'] || attribute['url'];
                        var url = createUrl(attribute['urlPrefix'], attribute['urlSuffix'], replacer.replace(feature.get(attribute['url']), feature.getProperties()));
                        val = '<a href="' + url + '" target="_blank">' +
                              text +
                              '</a>';
                    }
                }
                else if (attribute['img']) {
                    if(feature.get(attribute['img'])) {
                        var url = createUrl(attribute['urlPrefix'], attribute['urlSuffix'], replacer.replace(feature.get(attribute['img']), feature.getProperties()));
                        var attribution = attribute['attribution'] ? '<div class="o-image-attribution">' + attribute['attribution'] + '</div>' : '';
                        val = '<div class="o-image-container">' +
                                  '<img src="' + url + '">' + attribution +
                              '</div>';
                    }
                }
                else if (attribute['html']) {
                  val = replacer.replace(attribute['html'], feature.getProperties(), {
                    helper: geom,
                    helperArg: feature.getGeometry()
                  });
                }

                var cls = ' class="' + attribute['cls'] + '" ' || '';

                li += '<li' + cls +'>' + title + val + '</li>';
              }
        }
    }
    else {
      //Clean feature attributes from non-wanted properties
      var attributes = filterObject(feature.getProperties(), ['FID_', 'geometry']);
      //Use attributes with the template
      li = featureinfotemplates('default',attributes);
    }
    content += li + '</ul></div>';
    return content;
}
function filterObject(obj, excludedKeys) {
    var result = {}, key;
    for (key in obj) {
        if(excludedKeys.indexOf(key) === -1) {
            result[key] = obj[key];
        }
    }
    return result;
}
function createUrl(prefix, suffix, url) {
    var p = prefix || '';
    var s = suffix || '';
    return p + url + s;
}

},{"../src/utils/replacer":195,"./featureinfotemplates":121,"./geom":124}],129:[function(require,module,exports){
var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');

var sourceType = {};
var projectionCode;
var source;

module.exports = function(id, layer) {
    projectionCode = viewer.getProjectionCode();
    source = viewer.getMapSource();
    var serverUrl = source[layer.get('sourceName')].url;
    var type = layer.get('type');
    //returns a promise with features as result
    return sourceType[type](id, layer, serverUrl);
}

sourceType.AGS_FEATURE = function agsFeature(id, layer, serverUrl) {
  var esriSrs = projectionCode.split(':').pop();
  var layerId = layer.get('id');
  var esrijsonFormat = new ol.format.EsriJSON();

  var url = serverUrl + '/' + layerId +
      '/query?f=json&' +
      'returnGeometry=true' +
      '&objectIds=' + id +
      '&geometryType=esriGeometryEnvelope'+
      '&inSR=' + esriSrs +
      '&outFields=*' +
      '&returnIdsOnly=false' +
      '&returnCountOnly=false' +
      '&geometryPrecision=2' +
      '&outSR=' + esriSrs;

  return $.ajax({
        url: url,
        dataType: 'jsonp'
  })
    .then(function(response) {
        if(response.error) {
            fail(response);
            return [];
        }
        else {
            var features = esrijsonFormat.readFeatures(response, {
                    featureProjection: viewer.getProjection()
            });
            return features;
        }
    }, fail
    );
}

sourceType.WFS = function(id, layer, serverUrl) {
  var geometryName = layer.get('geometryName');
  var format = new ol.format.GeoJSON({geometryName: geometryName});
  var url = serverUrl +'?';
  var data = 'service=WFS' +
      '&version=1.0.0' +
      '&request=GetFeature&typeName=' + layer.get('name') +
      '&outputFormat=json' +
      '&featureId=' + id;
  return $.ajax({
    url: url,
    data: data,
    type: 'POST',
    dataType: 'json'
  })
    .then(function(response) {
        return format.readFeatures(response);
    });
}

function fail(response) {
    if(response.error) {
        console.log(response.error.message + '\n' +
            response.error.details.join('\n'));
    }
}

},{"./viewer":201,"jquery":25,"openlayers":27}],130:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var maputils = require('./maputils');
var getAttributes = require('./getattributes');
var featureInfo = require('./featureinfo');

var map;

function getFeaturesFromRemote(evt) {
        map = Viewer.getMap();
        var requestResult = [];
        var requestPromises = getFeatureInfoRequests(evt).map(function(request) {
            return request.fn.then(function(feature) {
                var layer = Viewer.getLayer(request.layer);
                if(feature) {
                    requestResult.push({
                        title: layer.get('title'),
                        feature: feature,
                        content: getAttributes(feature, layer)
                    });
                    return requestResult;
                }
            });
        });
        return $.when.apply($, requestPromises).then(function(data) {
            return requestResult;
        });
}
function getFeatureInfoRequests(evt) {
    var requests = [];
    //Check for support of crossOrigin in image, absent in IE 8 and 9
    if('crossOrigin' in new(Image)) {
        map.forEachLayerAtPixel(evt.pixel, function(layer) {
            if (layer.get('queryable')) {
              var item = getGetFeatureInfoRequest(layer, evt.coordinate);
              if(item) {requests.push(item)};
            }
        });
    }
    //If canvas is tainted
    else if(isTainted(evt.pixel)) {
        var layers = Viewer.getQueryableLayers();
        layers.forEach(function(layer) {
            if (layer.get('queryable')) {

              //If layer is tainted, then create request for layer
              if(isTainted(evt.pixel, layer)) {
                  var item = getGetFeatureInfoRequest(layer, evt.coordinate);
                  if(item) {requests.push(item)};
              }

              //If layer is not tainted, test if layer hit at pixel
              else if(layerAtPixel(evt.pixel, layer)){
                  var item = getGetFeatureInfoRequest(layer, evt.coordinate);
                  if(item) {requests.push(item)};
              }
            }
        });
    }
    //If crossOrigin is not supported and canvas not tainted
    else {
        map.forEachLayerAtPixel(evt.pixel, function(layer) {
            if (layer.get('queryable') === true) {
              var item = getGetFeatureInfoRequest(layer, evt.coordinate);
              if (item) {
                requests.push(item)
              };
            }
        });
    }
    return requests;
}
function getGetFeatureInfoRequest(layer, coordinate) {
    var layerType = layer.get('type'),
    obj = {};
    obj.layer = layer.get('name');

    switch (layerType) {
      case 'WMTS':
        if(layer.get('featureinfoLayer')) {
            var featureinfoLayerName = layer.get('featureinfoLayer'),
            featureinfoLayer = Viewer.getLayer(featureinfoLayerName);
            return getGetFeatureInfoRequest(featureinfoLayer, coordinate);
        }
        else {
            return undefined;
        }
        break;
      case 'WMS':
        if(layer.get('featureinfoLayer')) {
            var featureinfoLayerName = layer.get('featureinfoLayer'),
            featureinfoLayer = Viewer.getLayer(featureinfoLayerName);
            return getGetFeatureInfoRequest(featureinfoLayer, coordinate);
        }
        else {
            obj.cb = "GEOJSON";
            obj.fn = getGetFeatureInfoUrl(layer, coordinate);
            return obj;
        }
        case 'AGS_TILE':
            if(layer.get('featureinfoLayer')) {
                var featureinfoLayerName = layer.get('featureinfoLayer'),
                featureinfoLayer = Viewer.getLayer(featureinfoLayerName);
                return getGetFeatureInfoRequest(featureinfoLayer, coordinate);
            }
            else {
                obj.fn = getAGSIdentifyUrl(layer, coordinate);
                return obj;
            }
      default:
        return undefined;
    }
}
function isTainted(pixel, layerFilter) {
    try {
        if(layerFilter) {
            map.forEachLayerAtPixel(pixel, function(layer) {
                return layerFilter === layer;
            });
        }
        else {
            map.forEachLayerAtPixel(pixel, function(layer) {});
        }
        return false;
    }
    catch(e) {
        console.log(e);
        return true;
    }
}
function layerAtPixel(pixel, matchLayer) {
    map.forEachLayerAtPixel(pixel, function(layer) {
        return matchLayer === layer;
    })
}
function getFeaturesAtPixel(evt, clusterFeatureinfoLevel) {
    map = Viewer.getMap();
    var result = [],
    cluster = false;
    map.forEachFeatureAtPixel(evt.pixel,
        function(feature, layer) {
          var l = layer;
          var queryable = false;
          if(layer) {
              queryable = layer.get('queryable');
          }
          if(feature.get('features')) {
              //If cluster
              var collection = feature.get('features');
              if (collection.length > 1) {
                var zoom = map.getView().getZoom();
                var zoomLimit = clusterFeatureinfoLevel === -1 ? Viewer.getResolutions().length : zoom + clusterFeatureinfoLevel;
                if(zoomLimit < Viewer.getResolutions().length) {
                    map.getView().setCenter(evt.coordinate);
                    map.getView().setZoom(zoom + 1);
                    cluster = true;
                    return true;
                }
                else {
                    collection.forEach(function(f) {
                          var item = {};
                          item.title = l.get('title');
                          item.feature = f;
                          item.content =  getAttributes(f,l);
                          result.push(item);
                    });
                }
              }
              else if(collection.length == 1 && queryable) {
                  var item = {};
                  item.title = l.get('title');
                  item.feature = collection[0];
                  item.content = getAttributes(collection[0],l);
                  result.push(item);
              }
          }
          else if(queryable) {
              var item = {};
              item.title = l.get('title');
              item.feature = feature;
              item.content = getAttributes(feature,l)
              result.push(item);
          }
        }, 
        {
          hitTolerance: featureInfo.getHitTolerance()
        });

    if(cluster) {
        return false;
    }
    else {
        return result;
    }
}
function getGetFeatureInfoUrl(layer, coordinate) {
    var url = layer.getSource().getGetFeatureInfoUrl(
    coordinate, map.getView().getResolution(), Viewer.getProjection(),
    {'INFO_FORMAT': 'application/json'});

    return $.ajax(url, {
      type: 'post'
    })
    .then(function(response) {
        if(response.error) {
            return [];
        }
        else {
            return maputils.geojsonToFeature(response);
        }
    }
    );
}
function getAGSIdentifyUrl(layer, coordinate) {
  var projectionCode = Viewer.getProjectionCode();
  var esriSrs = projectionCode.split(':').pop();
  var layerId = layer.get('id');
  var source = Viewer.getMapSource()[layer.get('sourceName')];
  var serverUrl = source.url;
  var esrijsonFormat = new ol.format.EsriJSON();
  var size = map.getSize();
  var tolerance = source.hasOwnProperty('tolerance') ? source.tolerance.toString() : 5;
  var extent = map.getView().calculateExtent(size);

  var url = serverUrl +
      '/identify?f=json&' +
      'returnGeometry=true' +
      '&geometryType=esriGeometryPoint'+
      '&sr=' + esriSrs +
      '&geometry=' + coordinate +
      '&outFields=*' +
      '&geometryPrecision=2' +
      '&tolerance=' + tolerance +
      '&layers=all:' + layerId +
      '&mapExtent=' + extent +
      '&imageDisplay=' + size + ',' + '96';

  return $.ajax({
        url: url,
        dataType: 'jsonp'
  })
    .then(function(response) {
        if(response.error) {
            return [];
        }
        else {
            var obj = {};
            obj.features = response.results;
            var features = esrijsonFormat.readFeatures(obj, {
                    featureProjection: Viewer.getProjection()
            });
            return features[0];
        }
    }
    );
}

module.exports.getFeaturesFromRemote = getFeaturesFromRemote;
module.exports.getFeaturesAtPixel = getFeaturesAtPixel;

},{"./featureinfo":120,"./getattributes":128,"./maputils":150,"./viewer":201,"jquery":25,"openlayers":27}],131:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');

var map;
var tooltip;
var extent;

function Init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-navigation';
  map = Viewer.getMap();
  tooltip = options.tooltipText || 'Zooma till hela kartan';
  extent = options.extent || map.getView().calculateExtent(map.getSize());
  render(target);
  bindUIActions();
}

function render(target) {
  var el = utils.createButton({
    id: 'o-home-button',
    iconCls: 'o-icon-fa-home',
    src: '#fa-home',
    tooltipText: tooltip
  });
  $(target).append(el);
}

function bindUIActions() {
  $('#o-home-button').on('click', function(e) {
    map.getView().fit(extent);
    $('#o-home-button button').blur();
    e.preventDefault();
  });
}

module.exports.init = Init;

},{"./utils":185,"./viewer":201,"jquery":25,"openlayers":27}],132:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');

var agsFeature = function agsFeature(layerOptions) {
  var agsDefault = {
    layerType: 'vector'
  };
  var sourceDefault = {};
  var agsOptions = $.extend(agsDefault, layerOptions);
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.sourceName]);
  sourceOptions.geometryName = agsOptions.geometryName;
  sourceOptions.filter = agsOptions.filter;
  sourceOptions.attribution = agsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.id = agsOptions.id;

  var agsSource = createSource(sourceOptions);
  return vector(agsOptions, agsSource);

  function createSource(options) {
    var vectorSource = null;
    var esriSrs = options.projectionCode.split(':').pop();
    var queryFilter = options.filter ? '&where=' + options.filter : '';
    var esrijsonFormat = new ol.format.EsriJSON();
    vectorSource = new ol.source.Vector({
      attributions: options.attribution,
      loader: function(extent, resolution, projection) {
        var that = this;
        var url = options.url + options.id +
          encodeURI('/query?f=json&' +
            'returnGeometry=true' +
            '&spatialRel=esriSpatialRelIntersects' +
            '&geometry=' + '{"xmin":' + extent[0] + ',"ymin":' +
              extent[1] + ',"xmax":' + extent[2] + ',"ymax":' + extent[3] +
              ',"spatialReference":{"wkid":' + esriSrs + '}}' +
            '&geometryType=esriGeometryEnvelope' +
            '&inSR=' + esriSrs + '&outFields=*' + '' +
            '&returnIdsOnly=false&returnCountOnly=false' +
            '&geometryPrecision=2' +
            '&outSR=' + esriSrs + queryFilter);
        $.ajax({
          url: url,
          dataType: 'jsonp',
          success: function(response) {
            if (response.error) {
              alert(response.error.message + '\n' +
                response.error.details.join('\n'));
            } else {

              // dataProjection will be read from document
              var features = esrijsonFormat.readFeatures(response, {
                featureProjection: projection
              });
              if (features.length > 0) {
                that.addFeatures(features);
              }
            }
          }
        });
      },
      strategy: ol.loadingstrategy.bbox
    });
    return vectorSource;
  }
}

module.exports = agsFeature;

},{"../viewer":201,"./vector":140,"jquery":25,"openlayers":27}],133:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var agsTile = function agsTile(layerOptions) {
  var agsDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {};
  var agsOptions = $.extend(agsDefault, layerOptions);
  agsOptions.sourceName = agsOptions.name;
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  sourceOptions.attribution = agsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.params = agsOptions.params || {};
  sourceOptions.params.layers = "show:" + agsOptions.id;

  var agsSource = createSource(sourceOptions);
  return tile(agsOptions, agsSource);

  function createSource(options) {
    return new ol.source.TileArcGISRest({
      attributions: options.attribution,
      projection: options.projectionCode,
      crossOrigin: 'anonymous',
      params: options.params,
      url: options.url
    });
  }
}

module.exports = agsTile;

},{"../viewer":201,"./tile":138,"jquery":25,"openlayers":27}],134:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var vector = require('./vector');

var featureLayer = function featureLayer(layerOptions) {
  var options = layerOptions;
  var sourceOptions = {};
  var vectorSource;
  sourceOptions.attribution = layerOptions.attribution;
  sourceOptions.features = layerOptions.features;

  vectorSource = createSource(sourceOptions);
  return vector(options, vectorSource);

  function createSource(options) {
    return new ol.source.Vector({
      attributions: options.attribution,
      features: options.features
    });
  }
}

module.exports = featureLayer;

},{"./vector":140,"openlayers":27}],135:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');
var isUrl = require('../utils/isurl');

var geojson = function geojson(layerOptions) {
  var baseUrl = viewer.getBaseUrl();
  var geojsonDefault = {
    layerType: 'vector'
  };
  var geojsonOptions = $.extend(geojsonDefault, layerOptions);
  var geojsonSource;
  var sourceOptions = {};
  sourceOptions.attribution = geojsonOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.sourceName = layerOptions.source;
  if (isUrl(geojsonOptions.source)) {
    sourceOptions.url = geojsonOptions.source;
  } else {
    geojsonOptions.sourceName = baseUrl + geojsonOptions.source;
    sourceOptions.url = geojsonOptions.source;
  }

  geojsonSource = createSource(sourceOptions);
  return vector(geojsonOptions, geojsonSource);

  function createSource(options) {
    return new ol.source.Vector({
      attributions: options.attribution,
      url: options.url,
      format: new ol.format.GeoJSON()
    });
  }
}

module.exports = geojson;

},{"../utils/isurl":192,"../viewer":201,"./vector":140,"jquery":25,"openlayers":27}],136:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');

var group = function group(layerOptions) {
  var groupDefault = {
    layerType: 'group',
    styleName: 'default'
  };
  var groupOptions = $.extend(groupDefault, layerOptions);
  return new ol.layer.Group(groupOptions);
}

module.exports = group;

},{"jquery":25,"openlayers":27}],137:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var tile = require('./tile');

var osm = function osm(layerOptions) {
  var osmDefault = {};
  var osmOptions = $.extend(osmDefault, layerOptions);

  var osmSource = createSource();
  return tile(osmOptions, osmSource);

  function createSource() {
    return new ol.source.OSM()
  }
}

module.exports = osm;

},{"./tile":138,"jquery":25,"openlayers":27}],138:[function(require,module,exports){
"use strict";

var ol = require('openlayers');

module.exports = function tile(options, source) {
  options.source = source;
  return new ol.layer.Tile(options);
}

},{"openlayers":27}],139:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');
var isUrl = require('../utils/isurl');

var topojson = function topojson(layerOptions) {
  var baseUrl = viewer.getBaseUrl();
  var topojsonDefault = {
    layerType: 'vector'
  };
  var topojsonOptions = $.extend(topojsonDefault, layerOptions);
  var topojsonSource;
  var sourceOptions = {};
  sourceOptions.attribution = topojsonOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.sourceName = layerOptions.source;
  if (isUrl(topojsonOptions.source)) {
    sourceOptions.url = topojsonOptions.source;
  } else {
    topojsonOptions.sourceName = baseUrl + topojsonOptions.source;
    sourceOptions.url = topojsonOptions.source;
  }

  topojsonSource = createSource(sourceOptions);
  return vector(topojsonOptions, topojsonSource);

  function createSource(options) {
    return new ol.source.Vector({
      attributions: options.attribution,
      url: options.url,
      format: new ol.format.TopoJSON({
        defaultDataProjection: options.projectionCode
      })
    });
  }
}

module.exports = topojson;

},{"../utils/isurl":192,"../viewer":201,"./vector":140,"jquery":25,"openlayers":27}],140:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var style = require('../style')();

module.exports = function vector(options, source) {
  var vectorLayer;
  switch (options.layerType) {
    case 'vector':
      options.source = source;
      options.style = style.createStyle(options.style);
      vectorLayer = new ol.layer.Vector(options);
      break;
    case 'cluster':
      options.source = new ol.source.Cluster({
        attributions: options.attribution,
        source: source,
        distance: 60
      });
      options.style = style.createStyle(options.style, options.clusterStyle);
      vectorLayer = new ol.layer.Vector(options);
      break;
    case 'image':
      options.source = new ol.source.ImageVector({
        source: source,
        style: style.createStyle(options.style)
      });
      vectorLayer = new ol.layer.Image(options);
      break;
  }
  return vectorLayer;
}

},{"../style":176,"openlayers":27}],141:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');

var wfs = function wfs(layerOptions) {
  var wfsDefault = {
    layerType: 'vector'
  };
  var sourceDefault = {};
  var wfsOptions = $.extend(wfsDefault, layerOptions);
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.sourceName]);
  wfsOptions.featureType = sourceOptions.featureType = wfsOptions.id;
  sourceOptions.geometryName = wfsOptions.geometryName;
  sourceOptions.filter = wfsOptions.filter;
  sourceOptions.attribution = wfsOptions.attribution;
  sourceOptions.resolutions = viewer.getResolutions();
  sourceOptions.projectionCode = viewer.getProjectionCode();

  var wfsSource = createSource(sourceOptions);
  return vector(wfsOptions, wfsSource);

  function createSource(options) {
    var vectorSource = null;
    var serverUrl = options.url;

    //If cql filter then bbox must be used in the filter.
    var queryFilter = options.filter ? '&CQL_FILTER=' + options.filter + ' AND BBOX(' + options.geometryName + ',' : '&BBOX=';
    var bboxProjectionCode = options.filter ? "'" + options.projectionCode + "')" : options.projectionCode;
    vectorSource = new ol.source.Vector({
      attributions: options.attribution,
      format: new ol.format.GeoJSON({
        geometryName: options.geometryName
      }),
      loader: function(extent, resolution, projection) {
        var url = serverUrl +
          '?service=WFS&' +
          'version=1.1.0&request=GetFeature&typeName=' + options.featureType +
          '&outputFormat=application/json' +
          '&srsname=' + options.projectionCode +
          queryFilter + extent.join(',') + ',' + bboxProjectionCode;
        $.ajax({
            url: url,
            cache: false
          })
          .done(function(response) {
            vectorSource.addFeatures(vectorSource.getFormat().readFeatures(response));
          });
      },
      strategy: ol.loadingstrategy.tile(ol.tilegrid.createXYZ({
        maxZoom: options.resolutions.length
      }))
    });
    return vectorSource;
  }
}

module.exports = wfs;

},{"../viewer":201,"./vector":140,"jquery":25,"openlayers":27}],142:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var wms = function wms(layerOptions) {
  var wmsDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {
    version: '1.1.1',
    gutter: 0
  };
  var wmsOptions = $.extend(wmsDefault, layerOptions);
  wmsOptions.name.split(':').pop();
  wmsOptions.sourceName = wmsOptions.name;
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  sourceOptions.attribution = wmsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.id = wmsOptions.id;

  var wmsSource = createSource(sourceOptions);
  return tile(wmsOptions, wmsSource);

  function createSource(options) {
    return new ol.source.TileWMS(({
      attributions: options.attribution,
      url: options.url,
      gutter: options.gutter,
      crossOrigin: 'anonymous',
      projection: options.projectionCode,
      params: {
        'LAYERS': options.id,
        'TILED': true,
        VERSION: options.version
      }
    }))
  }
}

module.exports = wms;

},{"../viewer":201,"./tile":138,"jquery":25,"openlayers":27}],143:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var wmts = function wmts(layerOptions) {
  var wmtsDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {
    matrixSet: viewer.getProjectionCode(),
    matrixIdsPrefix: viewer.getProjectionCode() + ':',
    format: 'image/png',
    resolutions: viewer.getResolutions(),
    tileSize: [256, 256]
  };
  var wmtsOptions = $.extend(wmtsDefault, layerOptions);
  wmtsOptions.name.split(':').pop();
  wmtsOptions.sourceName = wmtsOptions.name;
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  if (wmtsOptions.hasOwnProperty('format')) {
    sourceOptions.format = wmtsOptions.format;
  }
  sourceOptions.attribution = wmtsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.matrixIds = [];
  sourceOptions.resolutions.forEach(function(resolution, i) {
    sourceOptions.matrixIds[i] = sourceOptions.matrixIdsPrefix + i;
  });
  sourceOptions.projectionExtent = viewer.getProjection().getExtent();
  sourceOptions.id = wmtsOptions.id;

  var wmtsSource = createSource(sourceOptions);
  return tile(wmtsOptions, wmtsSource);

  function createSource(options) {
    return new ol.source.WMTS({
      crossOrigin: 'anonymous',
      attributions: options.attribution,
      url: options.url,
      projection: options.projectionCode,
      layer: options.id,
      matrixSet: options.matrixSet,
      format: options.format,
      tileGrid: new ol.tilegrid.WMTS({
        origin: options.origin || ol.extent.getTopLeft(options.projectionExtent),
        resolutions: options.resolutions,
        matrixIds: options.matrixIds,
        tileSize: options.tileSize
      }),
      style: 'default'
    })
  }
}

module.exports = wmts;

},{"../viewer":201,"./tile":138,"jquery":25,"openlayers":27}],144:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var xyz = function xyz(layerOptions) {
  var xyzDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {};
  var xyzOptions = $.extend(xyzDefault, layerOptions);
  xyzOptions.sourceName = xyzOptions.id;
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  sourceOptions.attributions = xyzOptions.attribution;
  sourceOptions.projection = viewer.getProjectionCode() || 'EPSG:3857';
  sourceOptions.tileGrid = viewer.getTileGrid();

  var xyzSource = createSource(sourceOptions);
  return tile(xyzOptions, xyzSource);

  function createSource(options) {
    var format = options.sourceName.split('.')[1],
      url = options.sourceName.split('.')[0] + '/{z}/{x}/{y}.';
    url += format;
    options.url = format;
    return new ol.source.XYZ(options);
  }
}

module.exports = xyz;

},{"../viewer":201,"./tile":138,"jquery":25,"openlayers":27}],145:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var mapUtils = require('./maputils');
var group = require('./layer/group');
var type = {};
var layerCreator;
type.WFS = require('./layer/wfs');
type.AGS_FEATURE = require('./layer/agsfeature');
type.TOPOJSON = require('./layer/topojson');
type.GEOJSON = require('./layer/geojson');
type.WMS = require('./layer/wms');
type.WMTS = require('./layer/wmts');
type.AGS_TILE = require('./layer/agstile');
type.XYZ = require('./layer/xyz');
type.OSM = require('./layer/osm');
type.FEATURE = require('./layer/featurelayer');;
type.GROUP = groupLayer;

layerCreator = function layerCreator(opt_options) {
  var defaultOptions = {
    name: undefined,
    id: undefined,
    title: undefined,
    group: 'none',
    opacity: 1,
    geometryName: 'geom',
    geometryType: undefined,
    filter: undefined,
    layerType: undefined,
    legend: false,
    sourceName: undefined,
    attribution: undefined,
    style: 'default',
    styleName: undefined,
    queryable: true,
    minResolution: undefined,
    maxResolution: undefined,
    visible: false,
    type: undefined,
    extent: undefined,
    attributes: undefined
  };
  var projection = viewer.getProjection();
  var options = opt_options || {};
  var layerOptions = $.extend(defaultOptions, options);
  var name = layerOptions.name;
  layerOptions.minResolution = layerOptions.hasOwnProperty('minScale') ? mapUtils.scaleToResolution(layerOptions.minScale, projection): undefined;
  layerOptions.maxResolution = layerOptions.hasOwnProperty('maxScale') ? mapUtils.scaleToResolution(layerOptions.maxScale, projection): undefined;
  layerOptions.extent = layerOptions.extent || viewer.getExtent();
  layerOptions.sourceName = layerOptions.source;
  layerOptions.styleName = layerOptions.style;
  if (layerOptions.id === undefined) {
    layerOptions.id = name.split('__').shift();
  }

  layerOptions.name = name.split(':').pop();

  if (type.hasOwnProperty(layerOptions.type)) {
    return type[layerOptions.type](layerOptions, layerCreator);
  } else {
    console.log('Layer type is missing or layer type is not correct. Check your layer definition: ');
    console.log(layerOptions);
  }
}

function groupLayer(options) {
  var layers;
  var layerOptions;
  if (options.hasOwnProperty('layers')) {
    layers = options.layers.map(function(layer) {
      return layerCreator(layer);
    });

    layerOptions = {};
    layerOptions.layers = layers;
    return group($.extend(options, layerOptions));
  } else {
    console.log('Group layer has no layers');
  }
}

module.exports = layerCreator;

},{"./layer/agsfeature":132,"./layer/agstile":133,"./layer/featurelayer":134,"./layer/geojson":135,"./layer/group":136,"./layer/osm":137,"./layer/topojson":139,"./layer/wfs":141,"./layer/wms":142,"./layer/wmts":143,"./layer/xyz":144,"./maputils":150,"./viewer":201,"jquery":25}],146:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');
var modal = require('./modal');
var validateUrl = require('./utils/validateurl');

var symbolSize = 20;
var styleSettings;
var baseUrl;
var hasMapLegend;

function init(opt_options) {
  var options = opt_options || {};

  baseUrl = viewer.getBaseUrl();
  hasMapLegend = options.hasOwnProperty('hasMapLegend') ? options.hasMapLegend : true;
  styleSettings = viewer.getStyleSettings();

  render();
  addLegend(viewer.getGroups('top'));
}

function render() {
  $('#o-menutools').append('<li class="o-menu-item"><div class="o-menu-item-divider"></div><li>');
}

function getSymbol(style) {
  var symbol='';
  var s = style[0];
  if (s[0].hasOwnProperty('icon')) {
    var src = validateUrl(s[0].icon.src, baseUrl);
    // var scale = style.icon.scale || undefined;
    var format = s[0].format || 'png';
    if (format == 'png') {
      symbol = '<div class="o-legend-item-img"><img style="width: auto; height: 20px;" src="' + src + '"></div>'
    }
    else if (format == 'svg') {
      var o = '<object type="image/svg+xml" data="' + src + '" style="width: 20px;"></object>';
      var inlineStyle = 'background: url(' + src + ') no-repeat;width: 20px; height: 20px;background-size: 20px;';
      symbol = '<div class="o-legend-item-img">' + o + '</div>';
    }
  }
  else if (s[0].hasOwnProperty('fill')) {
    var fill = '';
    for(var i=0; i<s.length; i++) {
      fill += createFill(s[i]);
    }
    symbol += '<div class="o-legend-item-img"><svg height="' + symbolSize + '" width="' + symbolSize + '">';
    symbol += fill;
    symbol += '</svg></div>';
  }
  else if (s[0].hasOwnProperty('stroke')) {
    var stroke = '';
    for(var i=0; i<s.length; i++) {
      stroke += createStroke(s[i]);
    }
    symbol += '<div class="o-legend-item-img"><svg height="' + symbolSize + '" width="' + symbolSize + '">';
    symbol += stroke;
    symbol += '</svg></div>';
  }
  else if (s[0].hasOwnProperty('circle')) {
    var circle = '';
    for(var i=0; i<s.length; i++) {
      circle += createCircle(s[i]);
    }
    symbol += '<div class="o-legend-item-img"><svg height="' + symbolSize + '" width="' + symbolSize + '">';
    symbol += circle;
    symbol += '</svg></div>';
  }
  else if (s[0].hasOwnProperty('image')) {
    var src = validateUrl(s[0].image.src, baseUrl);
    var inlineStyle = 'background: url(' + src + ') no-repeat;width: 30px; height: 30px;background-size: 30px;';
    symbol = '<div class="o-legend-item-img" style="' + inlineStyle +'"></div>';
  }

  return symbol;
}

function createFill(fillProperties) {
  var f = fillProperties;
  var strokeWidth = 0;

  if(f.hasOwnProperty('stroke')) {
    strokeWidth = f.stroke.width >=3 ? 3 : f.stroke.width;
    var stroke = 'stroke:' + f.stroke.color + ';' || 'stroke:none;';
    stroke += 'stroke-width:' + strokeWidth + ';' || '';
    stroke += 'stroke-dasharray:' + f.stroke.lineDash + ';' || '';
  }

  var fillSize = symbolSize - 4; //-2-2
  var fill = '<rect x="2" y="2" rx="2" ry="2" width="' + fillSize + '" height="' + fillSize + '" ';
  fill += f.hasOwnProperty('fill') ? 'style="fill:' + f.fill.color + ';' : 'style="fill:none;';
  fill += stroke;
  fill += '"></rect>';

  return fill;
}

function createCircle(circleProperties) {
  var c = circleProperties.circle;
  var strokeWidth = 0;

  if(c.hasOwnProperty('stroke')) {
    strokeWidth = c.stroke.width >=3 ? 3 : c.stroke.width;
    var stroke = 'stroke:' + c.stroke.color + ';' || 'stroke:none;';
    stroke += 'stroke-width:' + strokeWidth + ';' || '';
  }

  var size = symbolSize/2;
  var fill = '<circle cx="' + size + '" cy="' + size + '" r="' + c.radius + '" ';
  fill += c.hasOwnProperty('fill') ? 'style="fill:' + c.fill.color + ';' : 'style="fill:none;';
  fill += stroke;
  fill += '"></circle>';

  return fill;
}

function createStroke(strokeProperties) {
  var s = strokeProperties;
  var strokeWidth = s.stroke.width > 4 ? 4 : s.stroke.width;
  strokeWidth = s.stroke.width < 2 ? 2 : strokeWidth;
  var stroke = '<line x1 = "2" y1= "' + (symbolSize-4).toString() + '" x2="' + (symbolSize-4).toString() + '" y2="2" ';
  stroke += 'style="';
  stroke += 'stroke:' + s.stroke.color + ';' || 'stroke:none;';
  stroke += 'stroke-width:' + strokeWidth + ';' || '';
  stroke += 'stroke-dasharray:' + s.stroke.lineDash + ';' || '';
  stroke += '"/>';

  return stroke;
}

function addAbstractButton(item) {
  var infoTextButton =  '<div class="o-legend-item-info o-abstract" id="o-legend-item-info-' + item + '">' +
                          '<svg class="o-icon-fa-info-circle"><use xlink:href="#fa-info-circle"></use></svg>' +
                        '</div>';
  return infoTextButton;
}

function createLegendItem(layerid, layerStyle, inSubgroup) {
  var layername = layerid.split('o-legend-').pop();
  var layer = viewer.getLayer(layername);
  var subClass = inSubgroup ? ' o-legend-subitem' : '';
  var legendItem = '';

  if (layerStyle && layerStyle[0][0].hasOwnProperty('filter')) {

    if (layerStyle[0][0].hasOwnProperty('legend')) {
      legendItem += '<li class="o-legend ' + layername + '">';
      legendItem += '<ul id="o-group-' + layername + '" class="o-legend-group o-ul-expand-false"><li class="' + layername + '" id="' + layerid + '">';
    } else {
      legendItem += '<li class="o-legend ' + layername + '" id="' + layerid + '">';
    }

    legendItem += '<div class ="o-legend-item' + subClass + '"><div class="o-checkbox">' +
                    '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                    '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                  '</div>';
    legendItem += '<div class="o-legend-item-title o-truncate">' + layer.get('title') + '</div>';

    if(layer.get('abstract')){
      legendItem += addAbstractButton(layername);
    }

    if (layerStyle[0][0].hasOwnProperty('legend')) {
      legendItem += '<div class="o-icon-expand o-icon-expand-false">' +
                      '<svg class="o-icon-fa-chevron-right">' +
                        '<use xlink:href="#fa-angle-double-right"></use>' +
                      '</svg>' +
                      '<svg class="o-icon-fa-chevron-down">' +
                        '<use xlink:href="#fa-angle-double-down"></use>' +
                      '</svg>' +
                    '</div>';
      legendItem += '</div></li>';

      layerStyle.forEach(function (styleArray) {
        legendItem += '<li class="o-legend ' + layername + '" id="' + layername + '"><div class ="o-legend-subitem">';
        legendItem += '<div class="o-checkbox o-checkbox-false"></div>';
        legendItem += layer.get('styleName') ? getSymbol([styleArray]) : '';
        legendItem += '<div class="o-legend-subitem-title">' + styleArray[0].legend + '</div></div></li>';
      });

      legendItem += '</ul></li>'
    }
  } else {
    legendItem += '<li class="o-legend ' + layername + '" id="' + layerid + '"><div class ="o-legend-item' + subClass + '"><div class="o-checkbox">' +
                    '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                    '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                  '</div>';
    legendItem +=  layer.get('styleName') ? getSymbol(styleSettings[layer.get('styleName')]) : '';
    legendItem += '<div class="o-legend-item-title o-truncate">' + layer.get('title') + '</div>';

    if(layer.get('abstract')){
      legendItem += addAbstractButton(layername);
    }

    legendItem += '</div></li>';
  }

  return legendItem;
}

function createGroup(group, parentGroup) {
  var legendGroup;
  var overlayGroup;
  var abstract = '';

  if (group.hasOwnProperty('overlayGroup')) {
    overlayGroup = group.name;
  }

  if (group.abstract) {
    abstract += addAbstractButton(group.name);
  }

  if (parentGroup) {
    var indent = $(parentGroup).parent().closest('ul').hasClass('o-legend-group') ? 'o-legend-indent' : '';

    legendGroup = '<li class="o-legend ' + group.name + ' o-top-item" id="' + group.name + '">' +
                    '<ul id="o-group-' + group.name + '" class="o-legend-group o-legend-subgroup ' + indent +'">' +
                      '<li class="o-legend-header o-legend-subheader ' + group.name + '" id="' + group.name + '"><div class="o-legend-item">' +
                        '<div class="o-checkbox">' +
                          '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                          '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                        '</div>' +
                        '<div class="o-legend-subgroup-title o-truncate">' +
                          group.title +
                        '</div>' +
                        '<div class="o-icon-expand">' +
                          '<svg class="o-icon-fa-chevron-right"><use xlink:href="#fa-angle-double-right"></use></svg>' +
                          '<svg class="o-icon-fa-chevron-down"><use xlink:href="#fa-angle-double-down"></use></svg>' +
                        '</div>' + abstract +
                      '</div></li>' +
                    '</ul>' +
                  '</li>';
    parentGroup.append(legendGroup);
  } else {
    legendGroup = '<li>' +
                    '<ul id="o-group-' + group.name + '" class="o-legend-group">' +
                      '<li class="o-legend-header"><div class="o-legend-item">' + group.title +
                        '<div class="o-icon-expand">' +
                          '<svg class="o-icon-fa-chevron-right"><use xlink:href="#fa-chevron-right"></use></svg>' +
                          '<svg class="o-icon-fa-chevron-down"><use xlink:href="#fa-chevron-down"></use></svg>' +
                        '</div>' + abstract +
                      '</div></li>' +
                    '</ul>' +
                  '</li>';
    $('#o-legendlist .o-legendlist').append(legendGroup);
  }

  if (group.expanded == true) {
    $('#o-group-' + group.name +' .o-icon-expand').addClass('o-icon-expand-true');
    $('#o-group-' + group.name +' .o-checkbox').addClass('o-checkbox-false');
  } else {
    $('#o-group-' + group.name +' .o-icon-expand').addClass('o-icon-expand-false');
    $('#o-group-' + group.name +' .o-checkbox').addClass('o-checkbox-false');
    $('#o-group-' + group.name).addClass('o-ul-expand-false');
  }

  $('#o-group-' + group.name + ' .o-legend-header').on('click', function(evt) {

    if ($(evt.target).closest('div').hasClass('o-checkbox')) {
      toggleSubGroupCheck($(this).parent(), true);
    } else if ($(evt.target).closest('div').hasClass('o-abstract')) {

    } else {
      toggleGroup($(this));
    }

    evt.preventDefault();
  });

  if (group.hasOwnProperty('groups')) {
    group.groups.forEach(function(subgroup) {
      createGroup(subgroup, $('#o-group-' + group.name));
    });
  }
}

function addLegend(groups) {
  var layers = viewer.getMap().getLayers().getArray();
  var overlayGroup;
  var item = '';

  //Add legend groups
  var legend = '<div id="o-legendlist"><ul class="o-legendlist"></ul></div>';
  $('#o-mapmenu').append(legend);

  groups.forEach(function(group) {
    createGroup(group);
  });

  //Add map legend unless set to false
  if(hasMapLegend) {
    var mapLegend = '<div id="o-map-legend"><ul id="o-legend-overlay"><li class="o-legend o-hidden"><div class ="o-toggle-button o-toggle-button-max">' +
                        '<svg class="o-icon-fa-angle-double-down"><use xlink:href="#fa-angle-double-down"></use></svg>' +
                        '<svg class="o-icon-fa-angle-double-up"><use xlink:href="#fa-angle-double-up"></use></svg>' +
                    '</div></li><li><ul id="o-overlay-list"></li></ul></ul><ul id="o-map-legend-background"></ul></div>';
    $('#o-map').append(mapLegend);

    //Add divider to map legend if not only background
    if(overlayGroup) {
      $('#o-map-legend-background').prepend('<div class="o-legend-item-divider"></div>');
    };
  }

  //Add layers to legend
  layers.forEach(function(layer) {

    var name = (layer.get('name'));
    var layerStyle = styleSettings[layer.get('styleName')];
    //Check if layer belongs to subgroup
    var inSubgroup = $('#o-group-' + layer.get('group')).closest('ul').parent().closest('ul').hasClass('o-legend-group');
    var title = '<div class="o-legend-item-title o-truncate">' + layer.get('title') + '</div>';

    //Add abstract button
    if(layer.get('abstract')){
      title += addAbstractButton(name);
    }
    title += '</div></li>';

    //Append layer to group in legend. Add to default group if not defined.
    if(layer.get('group') == 'background') {

      //Append background layers to menu
      item = '<li class="o-legend ' + name + '" id="' + name + '"><div class ="o-legend-item"><div class="o-checkbox"><svg class="o-icon-fa-check"><use xlink:href="#fa-check"></use></svg></div>';
      item += title;
      $('#o-group-background .o-legend-header').after(item);

      //Append background layers to map legend
      item = '<li class="o-legend ' + name + '" id="o-legend-' + name + '"><div class ="o-legend-item">'
      item += layer.get('styleName') ? getSymbol(styleSettings[layer.get('styleName')]) : '';
      item += '</div>';
      $('#o-map-legend-background').prepend(item);

    } else if(layer.get('group') && ((layer.get('group') != 'none'))) {

      //Append layer to group
      item = createLegendItem(name, layerStyle, inSubgroup);
      if ($('#o-group-' + layer.get('group')).find('li.o-top-item:last').length) {
        $('#o-group-' + layer.get('group')).find('li.o-top-item:last').after(item);
      } else {
        $('#o-group-' + layer.get('group') + ' .o-legend-header').after(item);
      }

      if(layer.get('legend') == true || layer.getVisible(true)) {
        //Append to map legend
        item = '<li class="o-legend ' + name + '" id="o-legend-' + name + '"><div class ="o-legend-item"><div class="o-checkbox">' +
                  '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                  '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                '</div>';
        item += layer.get('styleName') ? getSymbol(styleSettings[layer.get('styleName')]) : '';
        item += title;
        $('#o-overlay-list').append(item);
      }
    }

    //Check map legend to make sure minimize button appears
    checkToggleOverlay();

    //Append class according to visiblity and if group is background
    if (layer.get('group') == 'background') {
      if (layer.getVisible()==true) {
        $('#' + name + ' .o-checkbox').addClass('o-check-true');
        $('#o-legend-' + name).addClass('o-check-true-img');
      } else {
        $('#' + name + ' .o-checkbox').addClass('o-check-false');
        $('#o-legend-' + name).addClass('o-check-false-img');
      }
    } else {
      if (layer.getVisible()==true) {
        $('.' + name + ' .o-checkbox').addClass('o-checkbox-true');

        if (inSubgroup) {
          var parentGroups = $('#' + name).parents('ul [id^=o-group-]');
          [].forEach.call(parentGroups, function(el) {
            toggleGroup($(el).find('li:first'));
          });

          toggleSubGroupCheck($('#' + name).parents('ul').has('.o-legend-header').first(), false);
        } else {
          $('#o-group-' + layer.get('group') +' .o-icon-expand').removeClass('o-icon-expand-false');
          $('#o-group-' + layer.get('group') +' .o-icon-expand').addClass('o-icon-expand-true');
          $('#o-group-' + layer.get('group')).removeClass('o-ul-expand-false');
        }

      } else {
        $('.' + name + ' .o-checkbox').addClass('o-checkbox-false');
      }
    }

    //Event listener for tick layer
    $('#' + name).on('click', function(evt) {
      if ($(evt.target).closest('div').hasClass('o-icon-expand')) {
        toggleGroup($(this));
      } else {
        $(this).each(function() {
          var that = this;
          toggleCheck($(that).attr("id"));
        });

        evt.preventDefault();
      }
    });

    $('#o-legend-' + name).on('click', function(evt) {
      $(this).each(function() {
        var that = this;
        toggleCheck($(that).attr("id"));
      });

      evt.preventDefault();
    });
  });

  $('.o-abstract').on('click', function(evt) {
    $(this).each(function() {
      var that = this;
      showAbstract($(that));
    });

    evt.preventDefault();
  });

  //Toggle map legend
  $('#o-legend-overlay .o-toggle-button').on('click', function(evt) {
    toggleOverlay();
    evt.preventDefault();
  });
}

function onToggleCheck(layername) {
  //Event listener for tick layer
  $('#' + layername).on('click', function(evt) {
    $(this).each(function() {
      var that = this;
      toggleCheck($(that).attr("id"));
    });
    evt.preventDefault();
  });
}

function offToggleCheck(layername) {
  //Event listener for tick layer
  $('#' + layername).off('click', function(evt) {
    $(this).each(function() {
      var that = this;
      toggleCheck($(that).attr("id"));
    });

    evt.preventDefault();
  });
}

//Expand and minimize group
function toggleGroup(groupheader) {
  var group = groupheader.parent('.o-legend-group');
  var groupicon = $('#' + group.attr('id') + ' .o-icon-expand:first');

  if (groupicon.hasClass('o-icon-expand-false')) {
    groupicon.removeClass('o-icon-expand-false');
    groupicon.addClass('o-icon-expand-true');
    group.removeClass('o-ul-expand-false');
  } else {
    groupicon.removeClass('o-icon-expand-true');
    groupicon.addClass('o-icon-expand-false');
    group.addClass('o-ul-expand-false');
  }
}

//Toggle subgroups
function toggleSubGroupCheck(subgroup, toggleAll) {
  var subGroup = $(subgroup);
  var subLayers = subGroup.find('.o-legend-item.o-legend-subitem');
  var groupList = $('.o-legend-group');

  if (toggleAll) {

    subLayers.each(function() {
      var layername = $(this).parent().attr('id');
      var layer = viewer.getLayer(layername);
      var layerid = $(this).parent().attr('class');
      var inMapLegend = layerid.split('o-legend-').length > 1 ? true : false;

      if (subGroup.children().first().find('.o-checkbox').hasClass('o-checkbox-true')) {
        $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-true');
        $('.' + layername + ' .o-checkbox').addClass('o-checkbox-false');

        if (inMapLegend == false) {
          offToggleCheck('o-legend-' + layername);
          $('#o-legend-' + layername).remove();
          layer.set('legend', false);
          checkToggleOverlay();
        }

        layer.setVisible(false);
      } else {

        if (inMapLegend == false && $('#o-legend-' + layername).length == 0) {
          $('#o-overlay-list').append(createLegendItem('o-legend-' + layername));
          onToggleCheck('o-legend-' + layername);
          checkToggleOverlay();
        }

        $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-false');
        $('.' + layername + ' .o-checkbox').addClass('o-checkbox-true');
        layer.setVisible(true);
        layer.set('legend', true);
      }
    });
  }

  groupList.each(function() {
    var subList = $(this).find('.o-legend-item.o-legend-subitem').has('.o-checkbox');
    var subListChecked = $(this).find('.o-legend-item.o-legend-subitem').has('.o-checkbox.o-checkbox-true');

    if (subListChecked.length) {
      $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-false');
      $(this).children().first().find('.o-checkbox').addClass('o-checkbox-true');

      if (subList.length != subListChecked.length) {
        $(this).children().first().find('.o-checkbox').addClass('o-checkbox-semi');
      } else {
        $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-semi');
      }

    } else {
      $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-true');
      $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-semi');
      $(this).children().first().find('.o-checkbox').addClass('o-checkbox-false');
    }
  });
}

//Toggle layers
function toggleCheck(layerid) {
  var layername = layerid.split('o-legend-').pop();
  var inMapLegend = layerid.split('o-legend-').length > 1 ? true : false;
  var layer = viewer.getLayer(layername);

  //Radio toggle for background
  if (layer.get('group') == 'background') {
    var groups = viewer.getGroup('background');

    groups.forEach(function(group) {
      group.setVisible(false);
      $('#' + group.get('name') + ' .o-checkbox').removeClass('o-check-true');
      $('#' + group.get('name') + ' .o-checkbox').addClass('o-check-false');
      //map legend
      $('#o-legend-' + group.get('name')).removeClass('o-check-true-img');
      $('#o-legend-' + group.get('name')).addClass('o-check-false-img');
    });

    layer.setVisible(true);
    $('#' + layername + ' .o-checkbox').removeClass('o-check-false');
    $('#' + layername + ' .o-checkbox').addClass('o-check-true');
    //map legend
    $('#o-legend-' + layername).removeClass('o-check-false-img');
    $('#o-legend-' + layername).addClass('o-check-true-img');
  } else { //Toggle check for all groups except background

    if ($('.' + layername + ' .o-checkbox').hasClass('o-checkbox-true')) {
      $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-true');
      $('.' + layername + ' .o-checkbox').addClass('o-checkbox-false');

      if (inMapLegend == false) {
        offToggleCheck('o-legend-' + layername);
        $('#o-legend-' + layername).remove();
        layer.set('legend', false);
        checkToggleOverlay();
      }

      layer.setVisible(false);
    } else {

      if (inMapLegend == false && $('#o-legend-' + layername).length == 0) {
        $('#o-overlay-list').append(createLegendItem('o-legend-' + layername));
        onToggleCheck('o-legend-' + layername);
        checkToggleOverlay();
      }

      $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-false');
      $('.' + layername + ' .o-checkbox').addClass('o-checkbox-true');
      layer.setVisible(true);
      layer.set('legend', true);
    }

    if ($('#' + layername).find('.o-legend-subitem').length > 0) {
      toggleSubGroupCheck($('#' + layername).parents('ul').has('.o-legend-header').first(), false);
    }
  }
}

function checkToggleOverlay() {
  if($('#o-overlay-list li').length > 1 && $('#o-legend-overlay >li:first-child').hasClass('o-hidden')) {
    $('#o-legend-overlay > li:first-child').removeClass('o-hidden');
  } else if($('#o-overlay-list li').length < 2) {
    $('#o-legend-overlay > li:first-child').addClass('o-hidden');

    if($('#o-overlay-list').length == 1 && $('#o-overlay-list').hasClass('o-hidden')) {
      $('#o-overlay-list').removeClass('o-hidden');
      toggleOverlay();
    }
  }
}

function toggleOverlay() {
  if($('#o-legend-overlay .o-toggle-button').hasClass('o-toggle-button-max')) {
    $('#o-legend-overlay .o-toggle-button').removeClass('o-toggle-button-max');
    $('#o-legend-overlay .o-toggle-button').addClass('o-toggle-button-min');
    $('#o-overlay-list').addClass('o-hidden');
  } else {
    $('#o-legend-overlay .o-toggle-button').removeClass('o-toggle-button-min');
    $('#o-legend-overlay .o-toggle-button').addClass('o-toggle-button-max');
    $('#o-overlay-list').removeClass('o-hidden');
  }
}

//Set content for info button popup
function showAbstract($abstractButton) {
  var layer;
  var $item = $abstractButton.closest('li');
  var layername = $abstractButton.attr('id').split('o-legend-item-info-').pop();
  var abstract = {
    title: '',
    content: ''
  };

  //If info button is connected group
  if ($item.hasClass('o-legend-header')) {
    var groups = viewer.getGroups();

    var group = $.grep(groups, function(obj) {
      return (obj.name == layername);
    });

    abstract.title = group[0].title;
    abstract.content = group[0].abstract
  } else { // If info button is connected to layer
    layer = viewer.getLayer(layername);
    abstract.title = layer.get('title');
    abstract.content = layer.get('abstract');
  }

  modal.createModal('#o-map', {title: abstract.title, content: abstract.content});
  modal.showModal();
}

module.exports.init = init;

},{"./modal":152,"./utils":185,"./utils/validateurl":200,"./viewer":201,"jquery":25}],147:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var utils = require('./utils');

var url;
var title;
var $linkButton;

function init(opt_options) {
  var options = opt_options || {};
  url = options.url;
  title = options.title;

  render();
  bindUIActions();
}

function render() {
  var el = utils.createListButton({
    id: 'o-link',
    iconCls: 'o-icon-fa-external-link',
    src: '#fa-external-link',
    text: title

  });
  $('#o-menutools').append(el);
  $linkButton = $('#o-link-button');
}

function bindUIActions() {
  $linkButton.on('click', function() {
    window.open(url);
  });
}

module.exports.init = init;

},{"./utils":185,"jquery":25}],148:[function(require,module,exports){
"use strict";
var $ = require('jquery');
var supports = require('./utils/supports');
var permalink = require('./permalink/permalink');
var getUrl = require('./utils/geturl');
var isUrl = require('./utils/isurl');
var trimUrl = require('./utils/trimurl');

var mapLoader = function(mapOptions, config) {

  var map = {};
  var mapEl = config.target;
  var format = 'json';
  var cors = config.crossOrigin;

  var urlParams = undefined;

  if (mapEl.substring(0, 1) !== '#') {
    mapEl = '#' + mapEl;
  }
  map.el = mapEl;

  // Check browser support
  if (supports('browser', mapEl) === false) {
    return undefined;
  }

  // Check if authorization is required before map options is loaded
  if (config.authorizationUrl) {
    return $.ajax({
        url: config.authorizationUrl
      })
      .then(function(data) {
        return loadMapOptions();
      });
  } else {
    return loadMapOptions();
  }

  function loadMapOptions() {
    if (typeof(mapOptions) === 'object') {
      if (window.location.hash) {
        urlParams = permalink.parsePermalink(window.location.href);
      }
      var baseUrl = config.baseUrl || '';
      map.options = $.extend(config, mapOptions);
      if (mapOptions.controls) {
        map.options.controls = config.defaultControls.concat(mapOptions.controls);
      } else {
        map.options.controls = config.defaultControls;
      }
      map.options.url = getUrl();
      map.options.map = undefined;
      map.options.params = urlParams;
      map.options.baseUrl = baseUrl;

      return $.when.apply($, loadSvgSprites(baseUrl, config))
        .then(function(sprites) {
          return map;
        });

    } else if (typeof(mapOptions) === 'string') {
      if (isUrl(mapOptions)) {
        urlParams = permalink.parsePermalink(mapOptions);
        var url = mapOptions.split('#')[0];

        //remov file name if included in
        url = trimUrl(url);

        var baseUrl = config.baseUrl || url;
        var json = urlParams.map + '.json';
        var mapUrl = url;
        url += json;
      } else {
        if (window.location.hash) {
          urlParams = permalink.parsePermalink(window.location.href);
        }
        var baseUrl = config.baseUrl || '';
        var json = mapOptions;
        var url = baseUrl + json;
        var mapUrl = getUrl();
      }

      return $.when.apply($, loadSvgSprites(baseUrl, config))
        .then(function(sprites) {
          return $.ajax({
              url: url,
              dataType: format
            })
            .then(function(data) {
              map.options = $.extend(config, data);
              if (data.controls) {
                map.options.controls = config.defaultControls.concat(data.controls);
              } else {
                map.options.controls = config.defaultControls;
              }
              map.options.url = mapUrl;
              map.options.map = json;
              map.options.params = urlParams;
              map.options.baseUrl = baseUrl;
              return map;
            });
        });
    }
  }
}

function loadSvgSprites(baseUrl, config) {
  var svgSprites = config.svgSprites;
  var svgPath = config.svgSpritePath;
  var svgPromises = [];
  svgSprites.forEach(function(sprite) {
    var promise = $.get(baseUrl + svgPath + sprite, function(data) {
        var div = document.createElement("div");
        div.innerHTML = new XMLSerializer().serializeToString(data.documentElement);
        document.body.insertBefore(div, document.body.childNodes[0]);
      });
    svgPromises.push(promise);
    return svgPromises;
  });
}

module.exports = mapLoader;

},{"./permalink/permalink":165,"./utils/geturl":189,"./utils/isurl":192,"./utils/supports":197,"./utils/trimurl":198,"jquery":25}],149:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var $menuButton, $closeButton, $mapMenu;

var symbolSize = 20;
var styleSettings;

function init() {
    styleSettings = viewer.getStyleSettings();
    var el = utils.createButton({
        text: 'Meny',
        id: 'o-mapmenu-button',
        cls: 'o-mapmenu-button-true',
        iconCls: 'o-icon-fa-bars',
        src: '#fa-bars',
        tooltipText: 'Meny',
        tooltipPlacement: 'west'
    });
    $('#o-map').append(el);
    $menuButton = $('#o-mapmenu-button button');

    var menuEl = '<div id="o-mapmenu" class="o-mapmenu">' +
                    '<div class="o-block">' +
                      '<ul id="o-menutools">' +
                        '<li></li>' +
                      '</ul>'
                    '</div>' +
                  '</div>';
    $('#o-map').append(menuEl);
    $mapMenu = $('#o-mapmenu');

    var closeButton = utils.createButton({
        id: 'o-mapmenu-button-close',
        cls: 'o-no-boxshadow',
        iconCls: 'o-icon-menu-fa-times',
        src: '#fa-times',
        tooltipText: 'Stäng meny',
        tooltipPlacement: 'west'
    });
    $('#o-menutools').append(closeButton);
    $closeButton = $('#o-mapmenu-button-close');

    bindUIActions();
}
function bindUIActions() {
    $menuButton.on('click', function(e) {
      	toggleMenu();
        $menuButton.blur();
        e.preventDefault();
    });
    $closeButton.on('click', function(e) {
      	toggleMenu();
        $closeButton.blur();
        e.preventDefault();
    });
}
function toggleMenu() {
    if($mapMenu.hasClass('o-mapmenu-show')){
      $mapMenu.removeClass('o-mapmenu-show');
    }
    else {
      $mapMenu.addClass('o-mapmenu-show');
    }
}
function getTarget() {
    return $mapMenu;
}

module.exports.init = init;
module.exports.toggleMenu = toggleMenu;
module.exports.getTarget = getTarget;

},{"./utils":185,"./viewer":201,"jquery":25}],150:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');

module.exports = {
  customProjection: function(projectionCode, extent) {
      return new ol.proj.Projection({
          code: projectionCode,
          extent: extent
      });
  },
  tileGrid: function(extent, resolutions) {
      var origin = ol.extent.getTopLeft(extent);
      return new ol.tilegrid.TileGrid({
          extent: extent,
          origin: origin,
          resolutions: resolutions
      });
  },
  checkZoomChange: function checkZoomChange(resolution, currentResolution) {
      if(resolution !== currentResolution) {
        return true;
      }
      else {
        return false;
      }
  },
  createPointFeature: function createPointFeature(coordinate, style) {
      var feature = new ol.Feature({
          geometry: new ol.geom.Point(coordinate)
      });
      feature.setStyle(style);
      return feature;
  },
  geojsonToFeature: function geojsonToFeature(obj) {
      var vectorSource = new ol.source.Vector({
        features: (new ol.format.GeoJSON()).readFeatures(obj)
      });
      return vectorSource.getFeatures()[0];
  },
  wktToFeature: function wktToFeature(wkt, srsName) {
      var format = new ol.format.WKT();
      var feature = format.readFeature(wkt, {
        dataProjection: srsName,
        featureProjection: srsName
      });
      return feature;
  },
  zoomToExent: function zoomToExent(geometry, level) {
      var map = viewer.getMap();
      var view = map.getView();
      var maxZoom = level;
      var extent = geometry.getExtent();
      if(extent) {
          view.fit(extent, {maxZoom: maxZoom});
          return extent;
      }
      else {
        return undefined;
      }
  },
  getCenter: function getCenter(geometry) {
      var type = geometry.getType();
      var center;
      switch (type) {
          case "Polygon":
              center = geometry.getInteriorPoint().getCoordinates();
              break;
          case "MultiPolygon":
              center = geometry.getInteriorPoints()[0].getCoordinates();
              break;
          case "Point":
              center = geometry.getCoordinates();
              break;
          case "MultiPoint":
              center = geometry[0].getCoordinates();
              break;
          case "LineString":
              center = geometry.getCoordinateAt(0.5);
              break;
          case "MultiLineString":
              center = geometry.getLineStrings()[0].getCoordinateAt(0.5);
              break;
          case "Circle":
              center = geometry.getCenter();
              break;
      }
      return center;
  },
  scaleToResolution: function scaleToResolution(scale, projection) {
    var dpi = 25.4 / 0.28;
    var mpu = projection.getMetersPerUnit();
    var resolution = scale / (mpu * 39.37 * dpi);
    return resolution;
  }
}

},{"./viewer":201,"jquery":25,"openlayers":27}],151:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var style = require('./style')();
var styleTypes = require('./style/styletypes');

var map;
var activeButton;
var defaultButton;
var measure;
var type;
var sketch;
var measureTooltip;
var measureTooltipElement;
var measureStyleOptions;
var helpTooltip;
var helpTooltipElement;
var vector;
var source;
var label;
var overlayArray = [];
var drawStart = false;
var isActive = false;
var wgs84Sphere = new ol.Sphere(6378137);

function init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-maptools';
  map = Viewer.getMap();
  source = new ol.source.Vector();
  measureStyleOptions = styleTypes.getStyle('measure');

  //Drawn features
  vector = new ol.layer.Vector({
    source: source,
    name: 'measure',
    visible: false,
    zIndex: 6
  });

  map.addLayer(vector);

  $('.o-map').on('enableInteraction', onEnableInteraction);

  render(target);
  bindUIActions();

  defaultButton = $('#o-measure-line-button button');
}

function onEnableInteraction(e) {
  if(e.interaction === 'measure') {
    $('#o-measure-button button').addClass('o-measure-button-true');
    $('#o-measure-line-button').removeClass('o-hidden');
    $('#o-measure-polygon-button').removeClass('o-hidden');
    $('#o-measure-button').removeClass('tooltip');
    setActive(true);
    defaultButton.trigger('click');
  } else {
    if (activeButton) {
      activeButton.removeClass('o-measure-button-true');
    };

    $('#o-measure-button button').removeClass('o-measure-button-true');
    $('#o-measure-line-button').addClass('o-hidden');
    $('#o-measure-polygon-button').addClass('o-hidden');
    $('#o-measure-button').addClass('tooltip');

    map.un('pointermove', pointerMoveHandler);
    map.un('click', pointerMoveHandler);
    map.removeInteraction(measure);
    vector.setVisible(false);
    Viewer.removeOverlays(overlayArray);
    vector.getSource().clear();
    setActive(false);
  }

}

function setActive(state) {
  if(state === true) {
    isActive = true;
  } else {
    isActive = false;
  }

}

function render(target) {

  var toolbar = utils.createElement('div', '', {
    id: 'o-measure-toolbar',
    cls: 'o-toolbar-horizontal'
  });

  $(target).append(toolbar);

  var mb = utils.createButton({
    id: 'o-measure-button',
    cls: 'o-measure-button',
    iconCls: 'o-icon-steady-measure',
    src: '#steady-measure',
    tooltipText: 'Mät i kartan'
  });
  $('#' + 'o-measure-toolbar').append(mb);

  var lb = utils.createButton({
    id: 'o-measure-line-button',
    cls: 'o-measure-type-button',
    iconCls: 'o-icon-minicons-line-vector',
    src: '#minicons-line-vector',
    tooltipText: 'Linje',
    tooltipPlacement: 'north'
  });
  $('#' + 'o-measure-toolbar').append(lb);

  $('#o-measure-line-button').addClass('o-hidden');

  var pb = utils.createButton({
    id: 'o-measure-polygon-button',
    cls: 'o-measure-type-button',
    iconCls: 'o-icon-minicons-square-vector',
    src: '#minicons-square-vector',
    tooltipText: 'Yta',
    tooltipPlacement: 'north'
  });

  $('#' + 'o-measure-toolbar').append(pb);
  $('#o-measure-polygon-button').addClass('o-hidden');
}

function bindUIActions() {
  $('#o-measure-button').on('click', function(e) {
    toggleMeasure();
    $('#o-measure-button button').blur();
    e.preventDefault();
  });

  $('#o-measure-line-button').on('click', function(e) {
    type = 'LineString';
    toggleType($('#o-measure-line-button button'));
    $('#o-measure-line-button button').blur();
    e.preventDefault();
  });

  $('#o-measure-polygon-button').on('click', function(e) {
    type = 'Polygon';
    toggleType($('#o-measure-polygon-button button'));
    $('#o-measure-polygon-button button').blur();
    e.preventDefault();
  });

}

function createStyle(feature, labelText) {
  var featureType = feature.getGeometry().getType();
  var measureStyle = featureType == 'LineString' ? style.createStyleRule(measureStyleOptions.linestring) : style.createStyleRule(measureStyleOptions.polygon);

  return measureStyle;
}

//Display and move tooltips with pointer
function pointerMoveHandler(evt) {
  if (evt.dragging) {
    return;
  }

  var helpMsg = 'Klicka för att börja mäta';
  var tooltipCoord = evt.coordinate;

  if (sketch) {
    var output;
    var geom = (sketch.getGeometry());

    if (geom instanceof ol.geom.Polygon) {
      output = formatArea(/** @type {ol.geom.Polygon} */ (geom));
      tooltipCoord = geom.getInteriorPoint().getCoordinates();
    } else if (geom instanceof ol.geom.LineString) {
      output = formatLength( /** @type {ol.geom.LineString} */ (geom));
      tooltipCoord = geom.getLastCoordinate();
    }

    measureTooltipElement.innerHTML = output;
    label = output;
    measureTooltip.setPosition(tooltipCoord);
  }

  if (evt.type == 'pointermove') {
    helpTooltipElement.innerHTML = helpMsg;
    helpTooltip.setPosition(evt.coordinate);
  }

};

function addInteraction() {
  vector.setVisible(true);

  measure = new ol.interaction.Draw({
    source: source,
    type: type,
    style: style.createStyleRule(measureStyleOptions.interaction)
  });

  map.addInteraction(measure);

  createMeasureTooltip();
  createHelpTooltip();

  map.on('pointermove', pointerMoveHandler);
  map.on('click', pointerMoveHandler);

  measure.on('drawstart', function(evt) {
    // set sketch
    drawStart = true;
    sketch = evt.feature;
    $(helpTooltipElement).addClass('o-hidden');
  }, this);

  measure.on('drawend', function(evt) {
    var feature = evt.feature;
    feature.setStyle(createStyle(feature));
    feature.getStyle()[0].getText().setText(label);
    $(measureTooltipElement).remove();
    // unset sketch
    sketch = null;
    // unset tooltip so that a new one can be created
    measureTooltipElement = null;
    createMeasureTooltip();
    $(helpTooltipElement).removeClass('o-hidden');
  }, this);

};

function createHelpTooltip() {
  if (helpTooltipElement) {
    helpTooltipElement.parentNode.removeChild(helpTooltipElement);
  }

  helpTooltipElement = document.createElement('div');
  helpTooltipElement.className = 'o-tooltip o-tooltip-measure';

  helpTooltip = new ol.Overlay({
    element: helpTooltipElement,
    offset: [15, 0],
    positioning: 'center-left',
  });

  overlayArray.push(helpTooltip);
  map.addOverlay(helpTooltip);
};

function createMeasureTooltip() {
  if (measureTooltipElement) {
    measureTooltipElement.parentNode.removeChild(measureTooltipElement);
  }

  measureTooltipElement = document.createElement('div');
  measureTooltipElement.className = 'o-tooltip o-tooltip-measure';

  measureTooltip = new ol.Overlay({
    element: measureTooltipElement,
    offset: [0, -15],
    positioning: 'bottom-center',
    stopEvent: false
  });

  overlayArray.push(measureTooltip);
  map.addOverlay(measureTooltip);
};

function formatLength(line) {
  var length, output;
  var coordinates = line.getCoordinates();
  length = coordinates.reduce(getLength,0);

  if (length > 100) {
    output = (Math.round(length / 1000 * 100) / 100) +
      ' ' + 'km';
  } else {
    output = (Math.round(length * 100) / 100) +
      ' ' + 'm';
  }
  return output;
};

function getLength(total, value, index, arr){
  if(index<arr.length-1){
    var sourceProj = map.getView().getProjection();
    var c1 = ol.proj.transform(arr[index], sourceProj, 'EPSG:4326');
    var c2 = ol.proj.transform(arr[index + 1], sourceProj, 'EPSG:4326');
    total += wgs84Sphere.haversineDistance(c1, c2);
  }
  return total;
}

function formatArea(polygon) {
  var area;
  var sourceProj = map.getView().getProjection();
  var geom = /** @type {ol.geom.Polygon} */(polygon.clone().transform(sourceProj, 'EPSG:4326'));
  var coordinates = geom.getLinearRing(0).getCoordinates();
  area = Math.abs(wgs84Sphere.geodesicArea(coordinates));
  var output;

  if (area > 10000000) {
    output = (Math.round(area / 1000000 * 100) / 100) +
      ' ' + 'km<sup>2</sup>';
  } else if (area > 10000) {
    output = (Math.round(area / 10000 * 100) / 100) +
      ' ' + 'ha';
  } else {
    output = (Math.round(area * 100) / 100) +
      ' ' + 'm<sup>2</sup>';
  }

  var htmlElem = document.createElement('span');
  htmlElem.innerHTML = output;

  [].forEach.call(htmlElem.children, function(element) {
    if (element.tagName === 'SUP') {
      element.textContent = String.fromCharCode(element.textContent.charCodeAt(0) + 128);
    }
  })

  return htmlElem.textContent;
};

function toggleMeasure () {
  if (isActive) {
    $('.o-map').trigger({
      type: 'enableInteraction',
      interaction: 'featureInfo'
    });
  } else {
    $('.o-map').trigger({
      type: 'enableInteraction',
      interaction: 'measure'
    });
  }

};

function toggleType(button) {
  if (activeButton) {
    activeButton.removeClass('o-measure-button-true');
  }

  button.addClass('o-measure-button-true');
  activeButton = button;
  map.removeInteraction(measure);
  addInteraction();
};

module.exports.init = init;

},{"./style":176,"./style/styletypes":179,"./utils":185,"./viewer":201,"jquery":25,"openlayers":27}],152:[function(require,module,exports){
"use strict";
var $ = require('jquery');

var modal = function() {

  var isStatic = undefined;
  var $target = undefined;
  var modalEl = undefined;

  return {
    createModal: createModal,
    showModal: showModal,
    closeModal: closeModal
  };

  function render(title, content) {
    modalEl = '<div id="o-modal">' +
      '<div class="o-modal-screen"></div>' +
      '<div class="o-modal">' +
      '<div class="o-close-button"><svg class="o-icon-fa-times"><use xlink:href="#fa-times"></use></svg></div>' +
      '<div class="o-modal-title">' + title + '</div>' +
      '<div class="o-modal-content">' + content + '</div>' +
      '</div>' +
      '</div>';
  }

  function bindUIActions() {
    if (isStatic === false) {
      $('.o-modal-screen, .o-close-button').click(function() {
        closeModal();
      });
    } else {
      $('.o-close-button').click(function() {
        closeModal();
      });
    }
  }

  function createModal(modalTarget, options) {
    var title = options.title || '';
    var content = options.content || '';
    if (options.hasOwnProperty('static')) {
      isStatic = options.static;
    } else {
      isStatic = false;
    }
    render(title, content);
    $target = $(modalTarget);

  }

  function showModal() {
    $target.prepend(modalEl);
    bindUIActions();
  }

  function closeModal() {
    $('#o-modal').remove();
  }
}

module.exports = modal();

},{"jquery":25}],153:[function(require,module,exports){
/* ========================================================================
 * Copyright 2016 Origo
 * Licensed under BSD 2-Clause (https://github.com/origo-map/origo/blob/master/LICENSE.txt)
 * ======================================================================== */
"use strict";

var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var downloader = require('./offline/downloader');
var downloadHandler = require('./offline/downloadhandler');
var offlineStore = require('./offline/offlinestore')();

var map = undefined;
var baseUrl = undefined;
var $offlineButton = undefined;

function Init(opt_options) {
  var options = opt_options || {};
  map = Viewer.getMap();
  baseUrl = Viewer.getBaseUrl();

  downloadHandler();

  render();
  bindUIActions();
}

function render() {
  var el = utils.createListButton({
    id: 'o-offline',
    iconCls: 'o-icon-fa-download',
    src: '#fa-download',
    text: 'Nedladdningar'
  });
  $('#o-menutools').append(el);
  $offlineButton = $('#o-offline-button');
}

function bindUIActions() {
  $offlineButton.on('click', function(e) {
    downloader(offlineStore.getOfflineLayers());
    e.preventDefault();
  });
}

module.exports.init = Init;

},{"./offline/downloader":154,"./offline/downloadhandler":156,"./offline/offlinestore":161,"./utils":185,"./viewer":201,"jquery":25}],154:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Viewer = require('../viewer');
var template = require("./downloader.template.handlebars");
var spinner = require("../components/spinner.handlebars");
var utils = require('../utils');
var dispatcher = require('./offlinedispatcher');

var toolbarPrefix = 'o-downloader-td-toolbar-';

var Downloader = function Downloader(layersObj) {
  render(layersObj);
  addListeners();

  function render(layersObj) {
    $('#o-map').prepend(template);
    renderRows(layersObj);

    bindUIActions();
  }

  function addListeners() {
    $(document).on('changeOfflineStart', onChangeOfflineStart);
    $(document).on('changeOfflineEnd', onChangeOfflineEnd);
  }

  function onChangeOfflineStart(e) {
    renderButtons('#' + toolbarPrefix + e.layerName, 'pending', e.layerName);
  }

  function onChangeOfflineEnd(e) {
    renderButtons('#' + toolbarPrefix + e.layerName, e.state, e.layerName);
  }

  function bindUIActions() {
    $('.o-downloader .o-close-button').on('click', function(evt) {
        closeDownloader();
        evt.preventDefault();
    });
  }

  function renderRows(layersObj) {
    var layerNames = Object.getOwnPropertyNames(layersObj);
    layerNames.forEach(function(layerName) {
      renderRow(layerName, layersObj);
    });
  }

  function renderRow(layerName, layersObj) {
    var layer = Viewer.getLayer(layerName);
    var tdTitle = utils.createElement('td', layer.get('title'),{});
    var toolbarId = toolbarPrefix + layerName;
    var toolbar = utils.createElement('div', '', {
      cls: 'o-toolbar-horizontal',
      style: 'text-align: right; float: right;',
      id: toolbarId
    });
    var tdToolbar = utils.createElement('td', toolbar, {});
    var row = tdTitle + tdToolbar;
    var cls = 'o-downloader-tr-' + layerName;
    var tr = utils.createElement('tr', row, {
      cls: cls
    });
    var state;
    $('.o-downloader .o-table').append(tr);
    state =  layersObj[layerName].downloaded === true ? 'offline' : 'download';
    renderButtons('#' + toolbarId, state, layerName);
  }

  function renderButtons(target, state, layerName) {
    $(target).empty();
    if (state === 'offline') {
      renderSync(target, layerName);
      renderRemove(target, layerName);
    } else if (state === 'download') {
      renderDownload(target, layerName);
    } else if (state === 'pending') {
      renderPending(target);
    }
  }

  function renderSync(target, layerName) {
    var id = 'o-downloader-refresh-' + layerName;
    var refresh = createButton({
      href: '#fa-refresh',
      cls: 'o-icon-fa-refresh',
      id: id
    });
    $(target).append(refresh);
    bindAction('#' + id, layerName, 'sync');
  }

  function renderRemove(target, layerName) {
    var id = 'o-downloader-trash-' + layerName;
    var trash = createButton({
      href: '#fa-trash',
      cls: 'o-icon-fa-trash',
      id: id
    });
    $(target).append(trash);
    bindAction('#' + id, layerName, 'remove');
  }

  function renderDownload(target, layerName) {
    var id = 'o-downloader-download-' + layerName;
    var download = createButton({
      href: '#fa-download',
      cls: 'o-icon-fa-download',
      id: id
    });
    $(target).append(download);
    bindAction('#' + id, layerName, 'download');
  }

  function renderPending(target) {
    var spinnerButton = utils.createElement('button', '', {
      cls: 'o-spinner'
    });
    $(target).append(spinnerButton);
    $('.o-spinner').append(spinner);
  }

  function createButton(obj) {
    var icon = utils.createSvg({
      href: obj.href,
      cls: obj.cls
    });
    return utils.createElement('button', icon, {
      id: obj.id
    });
  }

  function closeDownloader() {
    $('.o-downloader').remove();
  }

  function bindAction(target, layerName, type) {
    $(target).on('click', function(evt) {
      dispatcher.emitChangeDownload(layerName, type);
      evt.preventDefault();
      evt.stopPropagation();
    });
  }

}

module.exports = Downloader;

},{"../components/spinner.handlebars":103,"../utils":185,"../viewer":201,"./downloader.template.handlebars":155,"./offlinedispatcher":159,"jquery":25}],155:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<div class=\"o-container-fluid o-downloader\">\r\n  <div class=\"o-card\">\r\n    <div class=\"o-card-header o-text-center\">\r\n      <h6 class=\"o-card-heading\">Nedladdningar</h6>\r\n      <div class=\"o-close-button\">\r\n        <svg class=\"o-icon-fa-times\"><use xlink:href=\"#fa-times\"></use></svg>\r\n      </div>\r\n    </div>\r\n    <div class=\"o-card-content\">\r\n      <table class =\"o-table\">\r\n\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n";
},"useData":true});

},{"hbsfy/runtime":24}],156:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var layerCreator = require('../layercreator');
var offlineLayer = require('./offlinelayer')();
var downloadSources = require('./downloadsources');
var dispatcher = require('./offlinedispatcher');
var offlineStore = require('./offlinestore')();

var downloadErrorMsg = 'Det inträffade ett fel när lagret skulle hämtas. Är du ansluten till internet?'
var saveErrorMsg = 'Det inträffade ett fel när förändringarna skulle sparas. Försök igen senare.';
var invalidFormatMsg = 'Invalid format: ';

var downloadHandler = function downloadHandler() {
  $(document).on('changeDownload', onChangeDownload);
  offlineStore.init();

  function onChangeDownload(e) {
    e.stopImmediatePropagation();
    if (e.action === 'download') {
      download(e.layerName);
    } else if (e.action === 'sync') {
      sync(e.layerName);
    } else if (e.action === 'remove') {
      removeDownloaded(e.layerName);
    }
  }

  function removeDownloaded(layerName) {
    var layer = viewer.getLayer(layerName);
    var props = layer.getProperties();
    var source;
    dispatcher.emitChangeOfflineStart(layerName);
    props.style = props.styleName;
    props.source = props.sourceName;
    props.type = props.onlineType;
    source = layerCreator(props).getSource();
    layer.setSource(source);
    dispatcher.emitChangeOffline(layer.get('name'), 'remove');
  }

  function sync(layerName) {
    var offlineEdits = offlineStore.getOfflineEdits(layerName);
    dispatcher.emitChangeOfflineStart(layerName);
    if (offlineEdits) {
      offlineEdits
        .then(function(editItems) {
          saveToRemote(editItems, layerName)
            .then(function() {
              download(layerName);
            })
            .fail(function(err) {
              abort(layerName, saveErrorMsg, 'alert');
            });
        });
    } else {
      download(layerName);
    }
  }

  function saveToRemote(editItems, layerName) {
    var layer = viewer.getLayer(layerName);
    var transObj = {
      delete: [],
      insert: [],
      update: []
    };
    var ids = [];
    editItems.forEach(function(item) {
      var id = Object.getOwnPropertyNames(item)[0];
      var feature = layer.getSource().getFeatureById(id);
      var dummy;
      if (feature) {
        transObj[item[id]].push(feature);
        ids.push(id);
      } else if (item[id] === 'delete') {
        dummy = new ol.Feature();
        dummy.setId(id);
        transObj[item[id]].push(dummy);
        ids.push(id);
      }
    });

    return downloadSources[layer.get('onlineType')].transaction(transObj, layerName)
      .then(function(result) {
        if (result > 0) {
          dispatcher.emitChangeOffline(layer.get('name'), 'edits', ids);
        }
      });
  }

  function download(layerName) {
    var layer = viewer.getLayer(layerName);
    var type = layer.get('onlineType');
    dispatcher.emitChangeOfflineStart(layerName);
    if (downloadSources.hasOwnProperty(type)) {
      downloadSources[type].request(layer)
        .then(function(result) {
          offlineLayer.setOfflineSource(layerName, result);
          dispatcher.emitChangeOffline(layer.get('name'), 'download');
        })
        .fail(function(error) {
          abort(layerName, downloadErrorMsg, 'alert');
        });
    } else {
      error = 'Sorry, ' + type + ' is not available as on offline format';
      abort(layerName, invalidFormatMsg + type);
    }
  }

  function abort(layerName, error, isAlert) {
    var action;
    if (offlineStore.getOfflineLayer(layerName).downloaded) {
      action = 'offline';
    } else {
      action = 'download';
    }

    if (isAlert) {
      alert(error);
    } else {
      console.log(error);
    }

    dispatcher.emitChangeOfflineEnd(layerName, action);
  }
}

module.exports = downloadHandler;

},{"../layercreator":145,"../viewer":201,"./downloadsources":157,"./offlinedispatcher":159,"./offlinelayer":160,"./offlinestore":161,"jquery":25,"openlayers":27}],157:[function(require,module,exports){
"use strict";

var sources = {};
sources.WFS = require('./wfs');
sources.GEOJSON = require('./geojson');
sources.TOPOJSON = require('./topojson');

module.exports = sources;

},{"./geojson":158,"./topojson":162,"./wfs":164}],158:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var verifyFeatureIds = require('./verifyfeatureids');

var geojson = {};
geojson.request = function request(layer) {
  var source = layer.get('sourceName');
  var request = createRequest(source);
  return request;

  function createRequest(source) {
    var format = new ol.format.GeoJSON();
    var url = source;

    return $.ajax({
        url: url,
        cache: false
      })
      .then(function(response) {
        var features = format.readFeatures(response);
        features = verifyFeatureIds(features);
        return features;
      });
  }
}

module.exports = geojson;

},{"./verifyfeatureids":163,"jquery":25,"openlayers":27}],159:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = {
  emitChangeOffline: emitChangeOffline,
  emitChangeDownload: emitChangeDownload,
  emitChangeOfflineStart: emitChangeOfflineStart,
  emitChangeOfflineEnd: emitChangeOfflineEnd
}

function emitChangeOffline(layerName, action, ids) {
  $.event.trigger({
    type: 'changeOffline',
    layerName: layerName,
    action: action,
    ids: ids || undefined
  });
}

function emitChangeDownload(layerName, action) {
  $.event.trigger({
    type: 'changeDownload',
    layerName: layerName,
    action: action
  });
}

function emitChangeOfflineStart(layerName) {
  $.event.trigger({
    type: 'changeOfflineStart',
    layerName: layerName
  });
}

function emitChangeOfflineEnd(layerName, state) {
  $.event.trigger({
    type: 'changeOfflineEnd',
    layerName: layerName,
    state: state
  });
}

},{"jquery":25}],160:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('../viewer');
var layerCreator = require('../layercreator');

var offlineLayer = function offlineLayer() {

  return {
    setOfflineSource: setOfflineSource,
    setOnlineSource: setOnlineSource
  }

  function setOfflineSource(layerName, features) {
    var layer = viewer.getLayer(layerName);
    var source;
    var options;
    layer.set('type', 'OFFLINE');

    // Create a feature layer and get the source
    options = layer.getProperties();
    options.type = 'FEATURE';
    options.features = features;
    options.style = options.styleName;
    source = layerCreator(options).getSource();
    layer.setSource(source);
    return layer;
  }

  function setOnlineSource(layerName) {
    var layer = viewer.getLayer(layerName);
    var source;
    var options;

    // Create a layer with the online source and get the source
    layer.set('type', layer.get('onlineType'));
    options = layer.getProperties();
    options.source = options.sourceName;
    options.style = options.styleName;
    source = layerCreator(options).getSource();
    layer.setSource(source);
    return layer;
  }
}

module.exports = offlineLayer;

},{"../layercreator":145,"../viewer":201,"jquery":25}],161:[function(require,module,exports){
var $ = require('jquery');
var ol = require('openlayers');
var viewer = require('../viewer');
var localforage = require('localforage');
var offlineLayer = require('./offlinelayer')();
var dispatcher = require('./offlinedispatcher');
var editorDispatcher = require('../editor/editdispatcher');
var format = new ol.format.GeoJSON();
var storage = {};
var editsStorage = {};
var offlineLayers = {};
var storageName;
var editsStorageName;
var map;

function offlineStore() {

  return {
    getOfflineLayers: getOfflineLayers,
    getOfflineLayer: getOfflineLayer,
    getOfflineEdits: getOfflineEdits,
    getEditsItems: getEditsItems,
    init: Init
  };

  function Init(opt_options) {
    var options = opt_options || {};
    var layerNames;
    map = viewer.getMap();
    storageName = options.name || 'origo-layers';
    editsStorageName = options.editsName || 'origo-layers-edits';
    layerNames = viewer.getLayersByProperty('offline', true, true);
    setOfflineLayers(layerNames);
    storage = createInstances(layerNames, storageName);
    editsStorage = createInstances(layerNames, editsStorageName);
    initLayers();

    $(document).on('changeOffline', onChangeOffline);
    $(document).on('changeOfflineEdits', onChangeOfflineEdits);
  }

  function createInstances(layerNames, name) {
    var instances = {};
    layerNames.forEach(function(layerName) {
      instances[layerName] = localforage.createInstance({
        name: name,
        storeName: layerName
      });
    });

    return instances;
  }

  function getOfflineLayers() {
    return offlineLayers;
  }

  function getOfflineLayer(layerName) {
    return offlineLayers[layerName];
  }

  function getOfflineEdits(layerName) {
    if (offlineLayers[layerName].edits) {
      return getEditsItems(layerName);
    } else {
      return undefined;
    }
  }

  function setOfflineLayers(layerNames) {
    layerNames.forEach(function(layerName) {
      var layer = viewer.getLayer(layerName);
      layer.set('onlineType', layer.get('type'));
      offlineLayers[layerName] = createOfflineObj();
      offlineLayer.setOfflineSource(layerName, []);
    });
  }

  function onChangeOffline(e) {
    e.stopImmediatePropagation();
    if (e.action === 'download') {
      onDownload(e.layerName)
    } else if (e.action === 'edits') {
      ondEdits(e.layerName, e.ids);
    } else if (e.action === 'remove') {
      onRemove(e.layerName);
    }
  }

  function onChangeOfflineEdits(e) {
    e.stopImmediatePropagation();
    if (editsStorage[e.layerName]) {

    } else {
      editsStorage[e.layerName] = localforage.createInstance({
        name: editsStorageName,
        storeName: e.layerName
      });
    }
    if (e.edits.update) {
      saveUpdate(e.edits.update, e.layerName);
    }
    if (e.edits.insert) {
      saveInsert(e.edits.insert, e.layerName);
    }
    if (e.edits.delete) {
      saveDelete(e.edits.delete, e.layerName);
    }
  }

  function onDownload(layerName) {
    if (offlineLayers[layerName].downloaded) {
      storage[layerName].clear()
        .then(function() {
          saveFeaturesToStorage(layerName);
        });
    } else {
      saveFeaturesToStorage(layerName);
    }
  }

  function ondEdits(layerName, ids) {
    var promises = ids.map(function(id) {
      return removeFromEditsStorage(id, layerName);
    });
    return Promise.all(promises).then(function() {
      return true;
    });
  }

  function onRemove(layerName) {
    if (offlineLayers[layerName].edits) {
      var proceed = confirm('Du har fortfarande offline-ändringar som inte är sparade. Om du fortsätter kommer dessa att försvinna.');
      if (proceed) {
        removeDownloaded(layerName);
      }
    } else {
      removeDownloaded(layerName);
    }
  }

  function removeDownloaded(layerName) {
    if (offlineLayers[layerName]) {
      return storage[layerName].clear()
        .then(function() {
          setLayerOnline(layerName);
          dispatcher.emitChangeOfflineEnd(layerName, 'download');
        });
    }
  }

  function createOfflineObj() {
    return {
      downloaded: false,
      edits: false
    }
  }

  function setDownloaded(layerName, downloaded) {
    if (downloaded) {
      offlineLayers[layerName].downloaded = true;
    } else {
      offlineLayers[layerName].downloaded = false;
    }
  }

  function setEdits(layerName, edits) {
    if (edits) {
      offlineLayers[layerName].edits = true;
    } else {
      offlineLayers[layerName].edits = false;
    }
  }

  function saveFeaturesToStorage(layerName) {
    var features;
    if (storage[layerName]) {
      features = viewer.getLayer(layerName).getSource().getFeatures();
      setItems(layerName, features);
    } else {
      console.log(layerName + ' is missing in storage');
    }
  }

  function setItems(layerName, features) {
    var promises = features.map(function(feature) {
      var id = feature.getId();
      var obj = format.writeFeatureObject(feature);
      return storage[layerName].setItem(id, obj);
    });
    Promise.all(promises).then(function(results) {
      setLayerOffline(layerName, features);
      dispatcher.emitChangeOfflineEnd(layerName, 'offline');
    });
  }

  function getItems(layerName) {
    var layer = viewer.getLayer(layerName);
    var geometryName = layer.get('geometryName');
    var features = [];
    return storage[layerName].iterate(function(value, key, index) {
        var storedFeature = format.readFeature(value);
        var feature = restoreGeometryName(storedFeature, geometryName);
        features.push(feature);
      })
      .then(function() {
        return features;
      });
  }

  function getEditsItems(layerName) {
    var layer = viewer.getLayer(layerName);
    var items = [];
    return editsStorage[layerName].iterate(function(value, key, index) {
        var obj = {};
        obj[key] = value;
        items.push(obj);
      })
      .then(function() {
        return items;
      });
  }

  function initLayers() {
    var layerNames = Object.getOwnPropertyNames(storage);
    layerNames.forEach(function(layerName) {
      getItems(layerName).then(function(features) {
        var layer;
        if (features.length) {
          setLayerOffline(layerName, features);
        } else {
          setLayerOnline(layerName, features);
        }
      });
      getEditsItems(layerName).then(function(items) {
        var layer;
        if (items.length) {
          setEdits(layerName, true);
        } else {
          setEdits(layerName, false);
        }
      });
    });
  }

  function setLayerOffline(layerName, features) {
    offlineLayer.setOfflineSource(layerName, features);
    setDownloaded(layerName, true);
  }

  function setLayerOnline(layerName) {
    offlineLayer.setOnlineSource(layerName);
    setDownloaded(layerName, false);
  }

  function saveUpdate(updates, layerName) {
    updates.forEach(function(feature) {
      var id = feature.getId();
      var action = 'update';
      editsStorage[layerName].getItem(id)
        .then(function(result) {
          if (result === null) {
            saveToEditsStorage(feature, layerName, action);
          } else {
            saveFeatureToStorage(feature, layerName, action);
          }
        });
    });
  }

  function saveInsert(inserts, layerName) {
    inserts.forEach(function(feature) {
      var action = 'insert';
      saveToEditsStorage(feature, layerName, action);
    });
  }

  function saveDelete(deletes, layerName) {
    deletes.forEach(function(feature) {
      var id = feature.getId();
      var action = 'delete';
      editsStorage[layerName].getItem(id)
        .then(function(result) {
          if (result === null) {
            saveToEditsStorage(feature, layerName, action);
          } else if (result === 'insert') {
            removeFromEditsStorage(feature.getId(), layerName)
              .then(function() {
                emitChangeFeature(feature, layerName, action);
              });
          } else {
            saveFeatureToStorage(feature, layerName, action);
          }
        });
    });
  }

  function saveToEditsStorage(feature, layerName, action) {
    var id = feature.getId();
    editsStorage[layerName].setItem(id, action)
      .then(function() {
        setEdits(layerName, true);
        saveFeatureToStorage(feature, layerName, action);
      });
  }

  function removeFromEditsStorage(id, layerName) {
    return editsStorage[layerName].removeItem(id)
      .then(function() {
        editsStorage[layerName].length()
          .then(function(nr) {
            if (nr > 0) {
              setEdits(layerName, true);
            } else {
              setEdits(layerName, false);
            }
          });
      });
  }

  function saveFeatureToStorage(feature, layerName, action) {
    var id = feature.getId();
    storage[layerName].setItem(id, format.writeFeatureObject(feature))
      .then(function() {
        emitChangeFeature(feature, layerName, action);
      });
  }

  function emitChangeFeature(feature, layerName, action) {
    editorDispatcher.emitChangeFeature({
      feature: [feature],
      layerName: layerName,
      status: 'finished',
      action: action
    });
  }

  function restoreGeometryName(feature, geometryName) {
    var geometry = feature.getGeometry();
    feature.unset(feature.getGeometryName());
    feature.setGeometryName(geometryName);
    feature.setGeometry(geometry);
    return feature;
  }

}

module.exports = offlineStore;

},{"../editor/editdispatcher":110,"../viewer":201,"./offlinedispatcher":159,"./offlinelayer":160,"jquery":25,"localforage":26,"openlayers":27}],162:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var verifyFeatureIds = require('./verifyfeatureids');

var topoJson = {};
topoJson.request = function request(layer) {
  var source = layer.get('sourceName');
  var request = createRequest(source);
  return request;

  function createRequest(source) {
    var format = new ol.format.TopoJSON();
    var url = source;

    return $.ajax({
        url: url,
        cache: false
      })
      .then(function(response) {
        var features = format.readFeatures(response);
        features = verifyFeatureIds(features);
        return features;
      });
  }
}

module.exports = topoJson;

},{"./verifyfeatureids":163,"jquery":25,"openlayers":27}],163:[function(require,module,exports){
"use strict";
var generateUUID = require('../utils/generateuuid');

module.exports = function verifyFeatureIds(features) {
  if (features[0]) {
    if (features[0].getId() === undefined) {
      features.forEach(function(feature) {
        feature.setId(generateUUID());
      })
    }
  }

  return features;
}

},{"../utils/generateuuid":187}],164:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var wfsTransaction = require('../editor/wfstransaction');

var wfs = {};
wfs.request = function request(layer) {
  var sourceOptions = viewer.getMapSource()[layer.get('sourceName')];
  sourceOptions.featureType = layer.get('name').split('__').shift();
  sourceOptions.geometryName = layer.get('geometryName');
  sourceOptions.filter = layer.get('filter');
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.extent = layer.get('extent');
  sourceOptions.projectionCode = viewer.getProjectionCode();

  var request = createRequest(sourceOptions);
  return request;

  function createRequest(options) {
    var format = new ol.format.GeoJSON({
      geometryName: options.geometryName
    });

    var serverUrl = options.url;
    var queryFilter;
    var url;

    //If cql filter then bbox must be used in the filter.
    if (options.filter) {
      queryFilter = '&CQL_FILTER=' + options.filter +
        ' AND BBOX(' + options.geometryName + ',' +
        options.extent.join(',') + ',' +
        "'" + options.projectionCode + "')";
    } else {
      queryFilter = '&BBOX=' +
        options.extent.join(',') + ',' + options.projectionCode;
    }

    url = serverUrl +
      '?service=WFS&' +
      'version=1.1.0&request=GetFeature&typeName=' + options.featureType +
      '&outputFormat=application/json' +
      '&srsname=' + options.projectionCode +
      queryFilter;

    return $.ajax({
        url: url,
        cache: false
      })
      .then(function(response) {
        return format.readFeatures(response);
      });
  }
}

wfs.transaction = function(transObj, layerName) {
  return wfsTransaction(transObj, layerName);
}

module.exports = wfs;

},{"../editor/wfstransaction":119,"../viewer":201,"jquery":25,"openlayers":27}],165:[function(require,module,exports){
/*requires Modal.js*/
"use strict";

var permalinkParser = require('./permalinkparser');
var permalinkStore = require('./permalinkstore');
var urlparser =require('../utils/urlparser');

module.exports = function() {

return {
    getPermalink: function getPermalink(options) {
        var hash = urlparser.formatUrl(permalinkStore.getState());
        var url = permalinkStore.getUrl() + "#" + hash;
        return(url);
    },
    parsePermalink: function parsePermalink(url) {
        if(url.indexOf('#') > -1) {
            var urlSearch = url.split('#')[1];
            var urlParts = urlSearch.split('&');
            var urlAsObj = {};
            urlParts.forEach(function(part) {
                var key = part.split('=')[0];
                var val = part.split('=')[1];
                if(permalinkParser.hasOwnProperty(key)) {
                    urlAsObj[key] = permalinkParser[key](val);
                }
            });
            return urlAsObj;
        }
        else {
            return false;
        }
    }
};
}();

},{"../utils/urlparser":199,"./permalinkparser":166,"./permalinkstore":167}],166:[function(require,module,exports){
"use strict";
var urlparser = require('../utils/urlparser');

var layerModel = {
    v: {
      name: "visible",
      dataType: "boolean"
    },
    s: {
      name: "legend",
      dataType: "boolean"
    },
}

module.exports = {
  layers: function(layersStr) {
      var layers = layersStr.split(',');
      var layerObjects = {};
      layers.forEach(function(layer) {
          var obj = {};
          var layerObject = urlparser.objectify(layer,{topmost: "name"});
          Object.getOwnPropertyNames(layerObject).forEach(function(prop) {
              var val = layerObject[prop];
              if(layerModel.hasOwnProperty(prop)) {
                  var attribute = layerModel[prop];
                  obj[attribute.name] = urlparser.strBoolean(val);
              }
              else {
                  obj[prop] = val;
              }
          });
          layerObjects[obj.name] = obj;

      });
      return layerObjects;
  },
  zoom: function(zoomStr) {
      return parseInt(zoomStr);
  },
  center: function(centerStr) {
      var center = centerStr.split(",").map(function(coord) {
          return parseInt(coord);
      });
      return center;
  },
  selection: function(selectionStr) {
      return urlparser.strArrayify(selectionStr, {
        topmostName: "geometryType",
        arrName: "coordinates"}
      );
  },
  pin: function(pinStr) {
      return urlparser.strIntify(pinStr);
  },
  map: function(mapStr) {
      return mapStr;
  }
}

},{"../utils/urlparser":199}],167:[function(require,module,exports){
"use strict";

var viewer = require('../viewer');
var selection = require('../featureinfo')['getSelection'];
var getPin = require('../featureinfo')['getPin'];
var urlparser =require('../utils/urlparser');

var permalinkStore = {};
var state;
var url;

permalinkStore.getState = function getState() {
    state = {};
    var view = viewer.getMap().getView();
    var layers = viewer.getLayers();
    state.layers = getSaveLayers(layers);
    state.center = view.getCenter().map(function(coord) {
        return Math.round(coord);
    }).join();
    state.zoom = view.getZoom().toString();
    // state.selection = getSaveSelection(selection());
    if (getPin()) {
        state.pin = getPin().getGeometry().getCoordinates().map(function(coord) {
          return Math.round(coord);
        }).join();
    }
    if (viewer.getMapName()) {
        state.map = viewer.getMapName().split('.')[0];
    }
    return state;
}
permalinkStore.getUrl = function() {
    url = viewer.getUrl();
    return url;
}

function getSaveLayers(layers) {
    var saveLayers = [];
    layers.forEach(function(layer) {
        var saveLayer = {};
        saveLayer.v = layer.getVisible() === true ? 1 : 0;
        saveLayer.s = layer.get('legend') === true ? 1 : 0;
        if (saveLayer.s || saveLayer.v) {
            saveLayer.name = layer.get('name');
            saveLayers.push(urlparser.stringify(saveLayer, {topmost: 'name'}));
        }
    });
    return saveLayers;
}
function getSaveSelection(selection) {
    return urlparser.arrStringify(selection.coordinates, {topmost: selection.geometryType});
}

module.exports = permalinkStore;

},{"../featureinfo":120,"../utils/urlparser":199,"../viewer":201}],168:[function(require,module,exports){
"use strict";
var $ = require('jquery');

module.exports = function(target) {
    render(target);
    bindUIActions();
    return {
        getEl: getEl,
        setVisibility: setVisibility,
        setTitle: setTitle,
        setContent: setContent,
        closePopup: closePopup
    }
}
function render(target) {
  var pop = '<div id="o-popup">' +
      '<div class="o-popup o-card">' +
        '<div class="o-close-button"><svg class="o-icon-fa-times"><use xlink:href="#fa-times"></use></svg></div>' +
        '<div class="o-card-title"></div>' +
        '<div class="o-card-content"></div>' +
      '</div>' +
    '</div>';
  $(target).append(pop);
}
function bindUIActions() {
    $('#o-popup .o-popup .o-close-button').on('click', function(evt) {
        closePopup();
        evt.preventDefault();
    });
}
function getEl() {
    return $("#o-popup").get(0);
}
function setVisibility(visible) {
    visible == true ? $('#o-popup .o-popup').css('display', 'block') : $('#o-popup .o-popup').css('display', 'none');
}
function setTitle(title) {
    $('#o-popup .o-card-title').html(title);
}
function setContent(config) {
    config.title ? $('#o-popup .o-popup .o-card-title').html(config.title): $('#o-popup .o-popup .o-card-title').html('');
    config.content ? $('#o-popup .o-popup .o-card-content').html(config.content): $('#o-popup .o-popup .o-card-content').html('');
}
function closePopup() {
    setVisibility(false);
}

},{"jquery":25}],169:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var template = require("./templates/print.handlebars");

var printWith = 800;
var $printButton;
var attribution;
var map;
var baseUrl;

function Init(opt_options) {
  var options = opt_options || {};
  attribution = options.attribution || '© Lantmäteriet Geodatasamverkan';
  map = Viewer.getMap();
  baseUrl = Viewer.getBaseUrl();

  render();
  bindUIActions();
}

function render() {
  var el = utils.createListButton({
    id: 'o-print',
    iconCls: 'o-icon-fa-print',
    src: '#fa-print',
    text: 'Skriv ut'
  });
  $('#o-menutools').append(el);
  $printButton = $('#o-print-button');
}

function bindUIActions() {
  $printButton.on('click', function(e) {
    $('#app-wrapper').append('<canvas id="o-print" style="display: none"></canvas>');
    createImage();
    e.preventDefault();
  });
}

function imageToPrint($printCanvas) {
  var imageCrop = new Image();
  try {
    imageCrop.src = $printCanvas.get(0).toDataURL("image/png");
  } catch (e) {
    console.log(e);
  } finally {
    var templateOptions = {};
    templateOptions.src = imageCrop.src;
    templateOptions.attribution = attribution;
    templateOptions.logoSrc = baseUrl + 'css/png/logo_print.png';
    var pw = template(templateOptions);
    var printWindow = window.open('', '', 'width=800,height=820');
    printWindow.document.write(pw);
    printWindow.document.close();
    setTimeout(function() {
      printWindow.print();
      setTimeout(function() {
        printWindow.close();
        $('#o-print').remove();
      }, 10);
    }, 200);
  }
}

function createImage() {
  var $canvas = $('canvas');
  var image = new Image();

  try {
    var imageUrl = $canvas.get(0).toDataURL("image/png");
  } catch (e) {
    console.log(e);
  } finally {

    // $printCanvas = copy of original map canvas
    var $printCanvas = $('#o-print');
    image.onload = function() {
      var ctxCanvas = $printCanvas[0].getContext('2d');

       //width of map canvas
      var sourceWidth = $canvas[0].width;

      //height of map canvas
      var sourceHeight = $canvas[0].height;

      //set the width of print canvas
      if (sourceWidth < printWith) {
        $printCanvas[0].width = sourceWidth;
      } else if (sourceWidth >= printWith) {
        $printCanvas[0].width = printWith;
      }

      //set the height of print canvas
      if (sourceHeight < printWith) {
        $printCanvas[0].height = sourceHeight;
      } else if (sourceWidth >= printWith) {
        $printCanvas[0].height = printWith;
      }

      ctxCanvas.drawImage(image, (sourceWidth / 2 - $printCanvas[0].width / 2), 0, $printCanvas[0].width, $printCanvas[0].height, 0, 0, $printCanvas[0].width, $printCanvas[0].height);
      imageToPrint($printCanvas);
    };
    image.src = imageUrl;
  }
}

module.exports.init = Init;

},{"./templates/print.handlebars":183,"./utils":185,"./viewer":201,"jquery":25}],170:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var rotateControl;
  var icon = utils.createSvg({
    href: '#origo-compass',
    cls: 'o-icon-compass'
  });
  map = Viewer.getMap();

  rotateControl = new ol.control.Rotate({
    label: $.parseHTML('<span>' + icon + '</span>')[0],
    tipLabel: ' ',
    target: 'o-toolbar-misc'
  });
  map.addControl(rotateControl);
}

module.exports.init = Init;

},{"./utils":185,"./viewer":201,"jquery":25,"openlayers":27}],171:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Viewer = require('./viewer');
var numberFormatter = require('./utils/numberformatter');

var map;
var $console;
var isActive;
var scaleText;

function Init(opt_options) {
  var options = opt_options || {};
  map = Viewer.getMap();
  $console = $('#' + Viewer.getConsoleId());
  scaleText = options.scaleText || '1:';
  var initialState = options.hasOwnProperty('isActive') ? options.isActive : true;

  setActive(initialState);

  return {
    setActive: setActive
  }
}

function setActive(state) {
  if (state === true) {
    map.getView().on('change:resolution', onZoomChange);
    onZoomChange();
    isActive = true;
  } else if (state === false) {
    map.getView().un('change:resolution', onZoomChange);
    isActive = false;
  }
}

function onZoomChange(e) {
  var resolution = e ? e.target.get(e.key) : map.getView().getResolution();
  var scale = Viewer.getScale(resolution);
  $console.text(scaleText + numberFormatter(scale));
}

module.exports.init = Init;

},{"./utils/numberformatter":193,"./viewer":201,"jquery":25}],172:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var Viewer = require('./viewer');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var target = options.target || 'o-tools-bottom';
  map = Viewer.getMap();

  var scaleLine = new ol.control.ScaleLine({
    target: target
  });
  map.addControl(scaleLine);
}

module.exports.init = Init;

},{"./viewer":201,"openlayers":27}],173:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var wktToFeature = require('./maputils').wktToFeature;
var Popup = require('./popup');
var typeahead = require('typeahead.js-browserify');
var getFeature = require('./getfeature');
var getAttributes = require('./getattributes');
var featureInfo = require('./featureinfo');
var mapUtils = require('./maputils');
var getCenter = require('./geometry/getcenter');
var utils = require('./utils');
var map;
var name;
var northing;
var easting;
var geometryAttribute;
var idAttribute;
var layerNameAttribute;
var layerName;
var titleAttribute;
var contentAttribute;
var maxZoomLevel;
var url;
var title;
var hintText;
var hint;
var highlight;
var projectionCode;
var overlay;

typeahead.loadjQueryPlugin();

function init(options) {
  var el;
  name = options.searchAttribute;
  northing = options.northing || undefined;
  easting = options.easting || undefined;
  geometryAttribute = options.geometryAttribute;

  /** idAttribute in combination with layerNameAttribute
  must be defined if search result should be selected */
  idAttribute = options.idAttribute;
  layerNameAttribute = options.layerNameAttribute || undefined;
  layerName = options.layerName || undefined;
  url = options.url;
  title = options.title || '';
  titleAttribute = options.titleAttribute || undefined;
  contentAttribute = options.contentAttribute || undefined;
  maxZoomLevel: options.maxZoomLevel || 2;
  hintText = options.hintText || 'Sök...';
  hint = options.hasOwnProperty('hint') ? options.hint : true;
  highlight = options.hasOwnProperty('highlight') ? options.highlight : true;
  projectionCode = Viewer.getProjectionCode();

  map = Viewer.getMap();

  el = '<div id="o-search-wrapper">' +
                '<div id="o-search" class="o-search o-search-false">' +
                    '<input class="o-search-field typeahead form-control" type="text" placeholder="' + hintText + '">' +
                    '<button id="o-search-button">' +
                        '<svg class="o-icon-fa-search">' +
                            '<use xlink:href="#fa-search"></use>' +
                        '</svg>' +
                    '</button>' +
                    '<button id="o-search-button-close">' +
                        '<svg class="o-icon-search-fa-times">' +
                            '<use xlink:href="#fa-times"></use>' +
                        '</svg>' +
                    '</button>' +
                '</div>' +
              '</div>';
  $('#o-map').append(el);

  // fix for internet explorer
  $.support.cors = true;

  $('.typeahead').typeahead({
    autoSelect: true,
    hint: hint,
    highlight: highlight,
    minLength: 4
  },
    {
      name: 'adress',
      limit: 9,
      displayKey: name,
      source: function (query, syncResults, asyncResults) {
        $.get(url + '?q=' + encodeURI(query), function (data) {
          asyncResults(data);
        });
      }
    });

  bindUIActions();
}

function bindUIActions() {
  $('.typeahead').on('typeahead:selected', selectHandler);

  $('#o-search .o-search-field').on('input', function() {
          if ($('#o-search .o-search-field.tt-input').val() && $('#o-search').hasClass('o-search-false')) {
            $('#o-search').removeClass('o-search-false');
            $('#o-search').addClass('o-search-true');
            onClearSearch();
          } else if (!($('#o-search .o-search-field.tt-input').val()) && $('#o-search').hasClass('o-search-true')) {
            $('#o-search').removeClass('o-search-true');
            $('#o-search').addClass('o-search-false');
          }
        });
}

function onClearSearch() {
  $('#o-search-button-close').on('click', function (e) {
      $('.typeahead').typeahead('val', '');
      featureInfo.clear();
      $('#o-search').removeClass('o-search-true');
      $('#o-search').addClass('o-search-false');
      $('#o-search .o-search-field.tt-input').val('');
      $('#o-search-button').blur();
      e.preventDefault();
    });
}

function showOverlay(data, coord) {
  var popup;
  var content;
  featureInfo.clear();
  clear();
  popup = Popup('#o-map');
  overlay = new ol.Overlay({
      element: popup.getEl()
    });

  map.addOverlay(overlay);

  overlay.setPosition(coord);
  content = data[name];
  popup.setContent({
      content: content,
      title: title
    });
  popup.setVisibility(true);
  mapUtils.zoomToExent(new ol.geom.Point(coord), maxZoomLevel);
}

function showFeatureInfo(features, title, content) {
  var obj = {};
  obj.feature = features[0];
  obj.title = title;
  obj.content = content;
  featureInfo.identify([obj], 'overlay', getCenter(features[0].getGeometry()));
  mapUtils.zoomToExent(features[0].getGeometry(), maxZoomLevel);
}

function clear() {
  Viewer.removeOverlays(overlay);
}

/** There are several different ways to handle selected search result.
 * Option 1. Feature info is requested from a map service.
 * In this case idAttribute and layerNameAttribute must be provided.
 * A map service is used to get the geometry and attributes. The layer is defined
 * as an ordinary layer in the layer config section.
 * Option 2. Same as option 1 but for single layer search. layerName is defined
 * as an option and is not included in the search response.
 * In this case geometryAttribute and layerName must be provided.
 * Option 3. Complete feature info is included in the search result.
 * In this case titleAttribute, contentAttribute and geometryAttribute must be provided.
 * Option 4. This is a single table search. No layer is defined.
 * In this case geometryAttribute and title must be defined.
 * Option 5. Feature info is shown without selection in the map.
 * This is a simple single table search. In this case title, northing and easting
 * must be defined. */

function selectHandler(evt, data) {
  var layer;
  var id;
  var feature;
  var content;
  var coord;
  if (layerNameAttribute && idAttribute) {
    layer = Viewer.getLayer(data[layerNameAttribute]);
    id = data[idAttribute];
    getFeature(id, layer)
      .done(function (res) {
              var featureWkt;
              var coordWkt;
              if (res.length > 0) {
                showFeatureInfo(res, layer.get('title'), getAttributes(res[0], layer));
              }

              // Fallback if no geometry in response
              else if (geometryAttribute) {
                featureWkt = wktToFeature(data[geometryAttribute], projectionCode);
                coordWkt = featureWkt.getGeometry().getCoordinates();
                showOverlay(data, coordWkt);
              }
            });
  } else if (geometryAttribute && layerName) {
    feature = wktToFeature(data[geometryAttribute], projectionCode);
    layer = Viewer.getLayer(data[layerName]);
    showFeatureInfo([feature], layer.get('title'), getAttributes(feature, layer));
  } else if (titleAttribute && contentAttribute && geometryAttribute) {
    feature = wktToFeature(data[geometryAttribute], projectionCode);

    // Make sure the response is wrapped in a html element
    content = utils.createElement('div', data[contentAttribute]);
    showFeatureInfo([feature], data[titleAttribute], content);
  } else if (geometryAttribute && title) {
    feature = wktToFeature(data[geometryAttribute], projectionCode);
    content = utils.createElement('div', data[name]);
    showFeatureInfo([feature], title, content);
  } else if (easting && northing && title) {
    coord = [data[easting], data[northing]];
    showOverlay(data, coord);
  } else {
    console.log('Search options are missing');
  }
}

module.exports.init = init;

},{"./featureinfo":120,"./geometry/getcenter":126,"./getattributes":128,"./getfeature":129,"./maputils":150,"./popup":168,"./utils":185,"./viewer":201,"jquery":25,"openlayers":27,"typeahead.js-browserify":97}],174:[function(require,module,exports){
/*requires Modal.js*/
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var modal = require('./modal');
var mapmenu = require('./mapmenu');
var utils = require('./utils');
var permalink = require('./permalink/permalink');

var shareButton;

function init(){
    var el = utils.createListButton({
        id: 'o-share',
        iconCls: 'o-icon-fa-share-square-o',
        src: '#fa-share-square-o',
        text: 'Dela karta'
    });
    $('#o-menutools').append(el);
    shareButton = $('#o-share-button');
    bindUIActions();
}
function bindUIActions() {
    shareButton.on('click', function(e) {
        modal.createModal('#o-map', {title: 'Länk till karta', content: createContent()});
        modal.showModal();
        createLink(); //Add link to input
        mapmenu.toggleMenu();
        e.preventDefault();
    });
}
function createContent() {
    return '<div class="o-share-link"><input type="text"></div>' +
           '<i>Kopiera och klistra in länken för att dela kartan.</i>';
}
function createLink() {
    var url = permalink.getPermalink();
    $('.o-share-link input').val(url).select();
}

module.exports.init = init;

},{"./mapmenu":149,"./modal":152,"./permalink/permalink":165,"./utils":185,"./viewer":201,"jquery":25}],175:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var sidebar;

function init() {
    var el = '<div id="o-sidebar">' +
                '<div class="o-sidebar o-card">' +
                  '<div class="o-close-button"><svg class="o-icon-fa-times"><use xlink:href="#fa-times"></use></svg></div>' +
                  '<div class="o-card-title"></div>' +
                  '<div class="o-card-content"></div>' +
                '</div>' +
              '</div>';
    $('#o-map').append(el);
    sidebar = $('#o-sidebar');

    bindUIActions();
}
function bindUIActions() {
    $('#o-sidebar .o-sidebar .o-close-button').on('click', function(evt) {
        closeSidebar();
        evt.preventDefault();
    });
}
function setVisibility(visible) {
    visible == true ? $('#o-sidebar').addClass('o-sidebar-show') : $('#o-sidebar').removeClass('o-sidebar-show');
}
function setTitle(title) {
    $('#o-sidebar .o-card-title').html(title);
}
function setContent(config) {
    config.title ? $('#o-sidebar .o-sidebar .o-card-title').html(config.title): $('#o-sidebar .o-sidebar .o-card-title').html('');
    config.content ? $('#o-sidebar .o-sidebar .o-card-content').html(config.content): $('#o-sidebar .o-sidebar .o-card-content').html('');
}
function closeSidebar() {
    setVisibility(false);
}

module.exports.init = init;
module.exports.setVisibility = setVisibility;
module.exports.setTitle = setTitle;
module.exports.setContent = setContent;
module.exports.closeSidebar = closeSidebar;

},{"./utils":185,"./viewer":201,"jquery":25}],176:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var validateUrl = require('./utils/validateurl');

var baseUrl;

var white = [255, 255, 255, 1];
var blue = [0, 153, 255, 1];
var width = 3;

//default edit style options
var editStyleOptions = {
    'Point': [
        {
            "circle": {
                "radius": 1,
                "stroke": {
                    "color": blue,
                    "width": 0
                },
                "fill": {
                    "color": blue
                }
            }
        }
    ],
    'LineString': [
        {
            'stroke': {
                color: white,
                width: width + 2
            }
        },
        {
            'stroke': {
                color: blue,
                width: width
            }
        }
    ],
    'Polygon': [
        {
            'stroke': {
                color: white,
                width: width + 2
            }
        },
        {
            'stroke': {
                color: blue,
                width: width
            }
        }
    ]
};

module.exports = function() {

    return {
        init: Init,
        createStyleOptions: createStyleOptions,
        createStyleList: createStyleList,
        createStyleRule: createStyleRule,
        createStyle: createStyle,
        styleFunction: styleFunction,
        createEditStyle: createEditStyle
    }
};

function Init() {
  baseUrl = Viewer.getBaseUrl();
}

function createStyleOptions(styleParams) {
    var styleOptions = {};
    if(styleParams.hasOwnProperty('geometry')) {
        switch (styleParams.geometry) {
            case 'centerPoint':
                styleOptions.geometry = function(feature) {
                    var coordinates = feature.getGeometry().getInteriorPoints().getFirstCoordinate();
                    return new ol.geom.Point(coordinates);
                }
            case 'endPoint':
                styleOptions.geometry = function(feature) {
                    var coordinates = feature.getGeometry().getLastCoordinate();
                    return new ol.geom.Point(coordinates);
                }
            break;
        }
    }
    if(styleParams.hasOwnProperty('zIndex')) {
        styleOptions.zIndex = styleParams.zIndex;
    }
    if(styleParams.hasOwnProperty('fill')) {
        styleOptions.fill = new ol.style.Fill(styleParams.fill);
    }
    if(styleParams.hasOwnProperty('stroke')) {
        styleOptions.stroke = new ol.style.Stroke(styleParams.stroke);
    }
    if(styleParams.hasOwnProperty('text')) {
        styleOptions.text = new ol.style.Text(styleParams.text);
        if(styleParams.text.hasOwnProperty('fill')) {
            styleOptions.text.setFill(new ol.style.Fill(styleParams.text.fill));
        }
        if(styleParams.text.hasOwnProperty('stroke')) {
            styleOptions.text.setStroke(new ol.style.Stroke(styleParams.text.stroke));
        }
    }
    if(styleParams.hasOwnProperty('icon')) {
        if (styleParams.icon.hasOwnProperty('src')) {
          styleParams.icon.src = validateUrl(styleParams.icon.src, baseUrl);
        }
        styleOptions.image = new ol.style.Icon(styleParams.icon);
    }
    if(styleParams.hasOwnProperty('circle')) {
        styleOptions.image = new ol.style.Circle({
            radius: styleParams.circle.radius,
            fill: new ol.style.Fill(styleParams.circle.fill) || undefined,
            stroke: new ol.style.Stroke(styleParams.circle.stroke) || undefined
        });
    }
    return styleOptions;
}

function createStyleList(styleOptions) {
    var styleList=[];
    //Create style for each rule
    for (var i = 0; i < styleOptions.length; i++) {
        var styleRule = [];
        var styleOption;
        //Check if rule is array, ie multiple styles for the rule
        if(styleOptions[i].constructor === Array) {
            for(var j=0; j < styleOptions[i].length; j++) {
                styleOption = createStyleOptions(styleOptions[i][j]);
                styleRule.push(new ol.style.Style(styleOption));
            }
        }
        //If single style for rule
        else {
            styleOption = createStyleOptions(styleOptions[i]);
            styleRule = [new ol.style.Style(styleOption)];
        }

        styleList.push(styleRule);
    }
    return styleList;
}

function createStyle(styleName, clusterStyleName) {
      var styleSettings = Viewer.getStyleSettings()[styleName];
      if($.isEmptyObject(styleSettings)) {
          alert('Style ' + styleName + ' is not defined');
      }
      var clusterStyleSettings = Viewer.getStyleSettings()[clusterStyleName];
      var style = (function() {
        //Create style for each rule
        var styleList = createStyleList(styleSettings);
        if(clusterStyleSettings) {
            var clusterStyleList = createStyleList(clusterStyleSettings);
            return styleFunction(styleSettings, styleList, clusterStyleSettings, clusterStyleList);
        }
        else {
            return styleFunction(styleSettings,styleList);
        }

      })()
      return style;
}

function createStyleRule(options) {
    var styleRule = [],
    styleOption;
    if(options.constructor === Array) {
        for(var i=0; i < options.length; i++) {
            var styleOption = createStyleOptions(options[i]);
            styleRule.push(new ol.style.Style(styleOption));
        }
    }
    //If single style for rule
    else {
        styleOption = createStyleOptions(options);
        styleRule = [new ol.style.Style(styleOption)];
    }
    return styleRule;
}

function styleFunction(styleSettings, styleList, clusterStyleSettings, clusterStyleList) {
    var s = styleSettings;
    var resolutions = Viewer.getResolutions();
    var fn = function(feature,resolution) {
        var scale = Viewer.getScale(resolution);
        var styleL;
        //If size is larger than, it is a cluster
        var size = clusterStyleList ? feature.get('features').length : 1;
        if(size > 1 && resolution!= resolutions[resolutions.length+1]) {
            styleL = checkOptions(feature, scale, clusterStyleSettings, clusterStyleList, size.toString());
            // clusterStyleList[0].setText(size);
        }
        else {
            styleL = checkOptions(feature, scale, styleSettings, styleList);
        }
        return styleL;
    }
    return fn;
}

function createEditStyle() {
    return {
        'Point': createStyleRule(editStyleOptions['Point']),
        'MultiPoint': createStyleRule(editStyleOptions['Point']),
        'LineString': createStyleRule(editStyleOptions['LineString']),
        'MultiLineString': createStyleRule(editStyleOptions['LineString']),
        'Polygon': createStyleRule(editStyleOptions['Polygon']),
        'MultiPolygon': createStyleRule(editStyleOptions['Polygon'])
    };
}

function checkOptions(feature, scale, styleSettings, styleList, size) {
    var s = styleSettings;
    for (var j=0; j<s.length; j++) {
      var styleL;
      if(Viewer.checkScale(scale, s[j][0].maxScale, s[j][0].minScale)) {
        s[j].some(function(element, index, array) {
            if (element.hasOwnProperty('text') && size) {
                styleList[j][index].getText().setText(size);
            }
        });
        if (s[j][0].hasOwnProperty('filter')) {
          //find attribute vale between [] defined in styles
          var featAttr, expr, featMatch;
          var matches = s[j][0].filter.match(/\[(.*?)\]/);
          if (matches) {
              featAttr = matches[1];
              expr = s[j][0].filter.split(']')[1];
              featMatch = feature.get(featAttr);
              expr = typeof featMatch == 'number' ? featMatch + expr : '"' + featMatch + '"' + expr ;
          }
          if(eval(expr)) {
            styleL = styleList[j];
            return styleL;
          }
        }
        else {
          styleL = styleList[j];
          return styleL;
        }
      }
    }
}

},{"./utils/validateurl":200,"./viewer":201,"jquery":25,"openlayers":27}],177:[function(require,module,exports){
"use strict";

var measure = {
  linestring: [
    {
      'geometry': 'endPoint',
      'circle': {
        fill: {
          color: [0, 153, 255, 1]
        },
        stroke: {
          color: [0, 153, 255, 1],
          width: 1
        },
        radius: 3
      },
      'text': {
        font: 'bold 13px "Helvetica Neue", Helvetica, Arial, sans-serif',
        textBaseline: 'bottom',
        textAlign: 'center',
        offsetY: -4,
        fill: {color: [0, 153, 255, 1]},
        stroke: {color: [255, 255, 255, 0.8], width: 4}
      }
    },
    {
      'stroke': {
        color: [0, 153, 255, 1],
        width: 2
      }
    }
  ],
  polygon: [
    {
      'fill': {
        color: [255, 255, 255, 0.4]
      },
      'stroke': {
        color: [0, 153, 255, 1],
        width: 2
      },
      'text': {
        font: 'bold 13px "Helvetica Neue", Helvetica, Arial, sans-serif',
        textBaseline: 'middle',
        textAlign: 'center',
        fill: {color: [0, 153, 255, 1]},
        stroke: {color: [255, 255, 255, 0.8], width: 4}
      }
    }
  ],
  interaction: [
    {
      'fill': {
        color: [255, 255, 255, 0.2]
      },
      'stroke': {
        'color': [0, 0, 0, 0.5],
        'lineDash': [10, 10],
        'width': 2
      },
      'circle': {
        'radius': 5,
        'stroke': {
          'color': [0, 0, 0, 0.7]
        },
        'fill': {
          color: [255, 255, 255, 0.2]
        }
      }
    }
  ]
};

module.exports = measure;

},{}],178:[function(require,module,exports){
"use strict";

var pin = [
    {
      'icon': {
          anchor: [0.5, 32],
          anchorXUnits: 'fraction',
          anchorYUnits: 'pixels',
          src: 'img/png/drop_blue.png'
      }
    }
];

module.exports = pin;

},{}],179:[function(require,module,exports){
"use strict";

var pin = require('./pin');
var measure = require('./measure');

module.exports = function() {

  var styleTypes = {};

  styleTypes.pin = pin;
  styleTypes.measure = measure;

  return {
    getStyle: function getStyle(type) {
      if(type) {
        return styleTypes[type];
      } else {
        console.log(type + ' is not a default style');
      }
    }
  }
}();

},{"./measure":177,"./pin":178}],180:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<div id=\"o-editor-toolbar\" class=\"o-editor-toolbar o-toolbar o-toolbar-horizontal o-padding-horizontal-8 o-rounded-top o-hidden\">\r\n    <div id=\"o-editor-toolbar-drawtools\" class=\"o-toolbar-horizontal\">\r\n      <div class=\"o-popover-container\">\r\n        <button id=\"o-editor-draw\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n          <svg class=\"o-icon-24\">\r\n              <use xlink:href=\"#ic_mode_edit_24px\"></use>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <button id=\"o-editor-attribute\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n      <svg class=\"o-icon-24\">\r\n          <use xlink:href=\"#ic_title_24px\"></use>\r\n      </svg>\r\n    </button>\r\n    <button id=\"o-editor-delete\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n      <svg class=\"o-icon-24\">\r\n          <use xlink:href=\"#ic_delete_24px\"></use>\r\n      </svg>\r\n    </button>\r\n    <div class=\"o-popover-container\">\r\n      <button id=\"o-editor-layers\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n        <svg class=\"o-icon-24\">\r\n            <use xlink:href=\"#ic_layers_24px\"></use>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n    <button id=\"o-editor-save\" class=\"o-button-lg o-disabled\" type=\"button\" name=\"button\">\r\n      <svg class=\"o-icon-24\">\r\n          <use xlink:href=\"#ic_save_24px\"></use>\r\n      </svg>\r\n    </button>\r\n    <button id=\"o-editor-close\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n        <svg class=\"o-icon-24\">\r\n            <use xlink:href=\"#ic_close_24px\"></use>\r\n        </svg>\r\n    </button>\r\n</div>\r\n";
},"useData":true});

},{"hbsfy/runtime":24}],181:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"1":function(container,depth0,helpers,partials,data) {
    var helper, alias1=container.escapeExpression;

  return "      <li><b>"
    + alias1(((helper = (helper = helpers.key || (data && data.key)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"key","hash":{},"data":data}) : helper)))
    + "</b> : "
    + alias1(container.lambda(depth0, depth0))
    + "</li>\r\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1;

  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : {},depth0,{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "");
},"useData":true});

},{"hbsfy/runtime":24}],182:[function(require,module,exports){
"use strict";

var defaultTemplate = require("./default.handlebars");

module.exports = function(attributes) {
  return defaultTemplate(attributes);
}

},{"./default.handlebars":181}],183:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=container.lambda, alias2=container.escapeExpression;

  return "<html>\r\n  <head>\r\n    <link href=\"css/print.css\" rel=\"stylesheet\">\r\n  </head>\r\n  <body>\r\n    <div class=\"o-print-logo\"><img src=\""
    + alias2(alias1((depth0 != null ? depth0.logoSrc : depth0), depth0))
    + "\"></div>\r\n    <div class=\"o-map-canvas\"><img src=\""
    + alias2(alias1((depth0 != null ? depth0.src : depth0), depth0))
    + "\"/></div>\r\n    <div class=\"o-print-attribution\">"
    + alias2(alias1((depth0 != null ? depth0.attribution : depth0), depth0))
    + "</div>\r\n  </body>\r\n</html>\r\n";
},"useData":true});

},{"hbsfy/runtime":24}],184:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"1":function(container,depth0,helpers,partials,data) {
    return "        <img src=\""
    + container.escapeExpression(container.lambda((depth0 != null ? depth0.img : depth0), depth0))
    + "\">\r\n";
},"3":function(container,depth0,helpers,partials,data) {
    var alias1=container.lambda, alias2=container.escapeExpression;

  return "        <a href=\""
    + alias2(alias1((depth0 != null ? depth0.url : depth0), depth0))
    + "\">"
    + alias2(alias1((depth0 != null ? depth0.urlText : depth0), depth0))
    + "</a>\r\n";
},"5":function(container,depth0,helpers,partials,data) {
    return "        <p>"
    + container.escapeExpression(container.lambda((depth0 != null ? depth0.text : depth0), depth0))
    + "</p>\r\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {};

  return "<div id=\"o-map\" class=\"o-map o-map-grid\">\r\n  <div id=\"o-tools-left\" class=\"o-container-absolute o-tools-left\">\r\n    <div id=\"o-toolbar-navigation\" class=\"o-toolbar-vertical o-toolbar-navigation\"></div>\r\n    <div id=\"o-toolbar-maptools\" class=\"o-toolbar-vertical o-toolbar-maptools\"></div>\r\n    <div id=\"o-toolbar-misc\" class=\"o-toolbar-vertical o-toolbar-misc\"></div>\r\n  </div>\r\n  <div id=\"o-tools-bottom\" class=\"o-tools-bottom\"></div>\r\n  <div id=\"o-footer\" class=\"o-footer\">\r\n    <div id=\"o-console\" class=\"o-footer-left\">&nbsp;</div>\r\n    <div class=\"o-footer-middle\">\r\n      <div class=\"o-footer-middle-content\">\r\n"
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.img : depth0),{"name":"if","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.url : depth0),{"name":"if","hash":{},"fn":container.program(3, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.text : depth0),{"name":"if","hash":{},"fn":container.program(5, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "      </div>\r\n    </div>\r\n    <div class=\"o-footer-right\">\r\n    </div>\r\n</div>\r\n";
},"useData":true});

},{"hbsfy/runtime":24}],185:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = {
    createButton: function(options) {
        var tooltip ='';
        var text ='';
        var cls = options.cls || '';
        var iconCls = options.iconCls || '';
        var placement = options.tooltipPlacement || 'east';
        if(options.text) {
            text = '<span class="o-button-text">' + options.text + '</span>';
        }
        if(options.tooltipText) {
            tooltip = '<span data-tooltip="' + options.tooltipText + '" data-placement="' + placement + '"></span>';
        }
        var el = '<div id="' + options.id + '" class="o-button-container o-tooltip">' +
                 '<button class="o-button ' + cls + '">' + text +
                    '<svg class="' + iconCls + '">' +
                        '<use xlink:href="' + options.src + '"></use>' +
                    '</svg>' +
                 '</button>' +
                 tooltip +
                 '</div>';
        return el;
    },
    createListButton: function(options) {
        var el = '<li>' +
                    '<div id="' + options.id + '-button" class="o-menu-button"' + '>' +
                        '<div class="o-button-icon">' +
                          '<svg class="' + options.iconCls + '">' +
                              '<use xlink:href="' + options.src + '"></use>' +
                          '</svg>' +
                        '</div>' +
                            options.text +
                        // '</div>' +
                    '</div>' +
                  '</li>';
        return el;
    },
    createElement: function(el, val, attributes) {
        var prefix = '<' + el;
        var suffix = '</' + el  + '>';
        var attributeNames = attributes ? Object.getOwnPropertyNames(attributes) : [];
        var attributeList = attributeNames.map(function(name) {
            var res = '';
            if (name === "cls") {
                res = ' ' + 'class'.concat('=', '"', attributes[name], '"');
            } else {
                res = ' ' + name.concat('=', '"', attributes[name],'"');
            }
            return res;
        });
        var element = prefix.concat(attributeList.join(' '), '>', val, suffix);
        return element;
    },
    createSvg: function(props) {
        var use = this.createElement('use', '', {
            'xlink:href': props.href
        });
        return this.createElement('svg', use, {
            cls: props.cls
        });
    }
}

},{"jquery":25}],186:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = function elQuery(targetObj, options) {
  var target = '.o-map';
  var prefix = options.breakPointsPrefix;
  var breakPoints = options.breakPoints;
  var breakNames = Object.getOwnPropertyNames(breakPoints);
  var breakCls = arrToObj(breakNames, prefix);
  var breakClsNames = breakNames.map(function(breakSize) {
    return breakCls[breakSize];
  });

  $(window).on('resize', onSizeChange);
  onSizeChange();

  function onSizeChange() {
    var mapSize = targetObj.getSize();
    var val = breakNames.reduce(function(prev, curr) {
      var height = breakPoints[curr][1];
      var width = breakPoints[curr][0];
      if (mapSize[0] <= width || mapSize[1] <= height) {
        if (!prev) {
          return curr;
        } else {
          return prev;
        }
      } else {
        return prev;
      }
    }, undefined);
    $(target).removeClass(breakClsNames.join(' '));
    if (val) {
      $(target).addClass(breakCls[val]);
    }
  }

  function arrToObj(arr, start) {
    var obj = {};
    var val = start;
    arr.slice().reverse().forEach(function(curr) {
      val += '-' + curr;
      obj[curr] = val;
    });
    return obj;
  }
}

},{"jquery":25}],187:[function(require,module,exports){
"use strict";


/**
Function to generate a unique id.
From Briguy37 http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript
*/
var generateUUID = function generateUUID() {
  var d = new Date().getTime();
  if (window.performance && typeof window.performance.now === "function") {
    d += performance.now(); //use high-precision timer if available
  }
  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = (d + Math.random() * 16) % 16 | 0;
    d = Math.floor(d / 16);
    return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);
  });
  return uuid;
}

module.exports = generateUUID;

},{}],188:[function(require,module,exports){
"use strict";

module.exports = function getimageorientation(file, callback) {
  var reader = new FileReader();
  reader.onload = function(e) {
    var view = new DataView(e.target.result);
    var length;
    var offset;
    var marker;
    var little;
    var tags;

    if (view.getUint16(0, false) != 0xFFD8) {
      return callback(-2);
    }

    length = view.byteLength;
    offset = 2;
    while (offset < length) {
      marker = view.getUint16(offset, false);
      offset += 2;
      if (marker == 0xFFE1) {
        if (view.getUint32(offset += 2, false) != 0x45786966) {
          return callback(-1);
        }

        little = view.getUint16(offset += 6, false) == 0x4949;
        offset += view.getUint32(offset + 4, little);
        tags = view.getUint16(offset, little);
        offset += 2;
        for (var i = 0; i < tags; i++) {
          if (view.getUint16(offset + (i * 12), little) == 0x0112) {
            return callback(view.getUint16(offset + (i * 12) + 8, little));
          }
        }

      } else if ((marker & 0xFF00) != 0xFF00) {
        break;
      } else {
        offset += view.getUint16(offset, false);
      }
    }

    return callback(-1);
  };
  reader.readAsArrayBuffer(file);
}

},{}],189:[function(require,module,exports){
"use strict";

module.exports = function getUrl() {
    return location.protocol +'//'+
            location.hostname +
            (location.port?":"+location.port:"") +
            location.pathname;
}

},{}],190:[function(require,module,exports){
"use strict";

module.exports = function imageresizer(imageData, opt_options, orientation, callback) {
  var fileType = imageData.split(';')[0].split('/')[1];
  var options = opt_options;
  var image = new Image();

  image.onload = function(imageEvent) {
    var canvas = document.createElement('canvas');
    var context = canvas.getContext('2d');
    var max_size = options.maxSize || 600;
    var width = image.width;
    var height = image.height;
    var translateWidth;
    var translateHeight;
    var rotation;
    var dataUrl;

    if (width > height) {
      if (width > max_size) {
        height *= max_size / width;
        width = max_size;
      }
    } else {
      if (height > max_size) {
        width *= max_size / height;
        height = max_size;
      }
    }

    canvas.width = width;
    canvas.height = height;

    if (orientation%2 === 0) {
      canvas.width = height;
      canvas.height = width;
    }

    switch (orientation) {
      case 1:
        translateWidth = 0;
        translateHeight = 0;
        rotation = 0;
        break;
      case 3:
        translateWidth = canvas.width;
        translateHeight = canvas.height;
        rotation = 180;
        break;
      case 6:
        translateWidth = canvas.width;
        translateHeight = 0;
        rotation = 90;
        break;
      case 8:
        translateWidth = 0;
        translateHeight = canvas.height;
        rotation = 270;
        break;
      default:
        translateWidth = 0;
        translateHeight = 0;
        rotation = 0;
        break;
    }

    context.translate(translateWidth,translateHeight);
    context.rotate(rotation*Math.PI/180);
    context.drawImage(image, 0, 0, width, height);
    dataUrl = canvas.toDataURL('image/' + fileType);
    callback(dataUrl);
  }

  image.src = imageData;
}

},{}],191:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = function isEmbedded(target) {
  if (window.top !== window.self || $(target).parent().is('BODY') === false) {
    return true;
  } else {
    return false;
  }
}

},{"jquery":25}],192:[function(require,module,exports){
"use strict";

module.exports = function isUrl(s) {
   var regexp = new RegExp('^(?:[a-z]+:)?//', 'i');
   return regexp.test(s);
}

},{}],193:[function(require,module,exports){
"use strict";

module.exports = function numberFormatter(numberToFormat) {
  var nr = numberToFormat;
  var length = nr.toString().length;
  if (length > 3) {
    var delimiter = ' '; //white space as delimiter

    //Round by factor
    if (nr >= 1000) {
      var factor = Math.pow(10, length) / 10000;
      nr = Math.round(nr / factor) * factor;
    }

    var nrStr = nr.toString();
    var a = [];
    while (nrStr.length > 3) {
      var n = nrStr.substr(nrStr.length - 3);
      a.unshift(n);
      nrStr = nrStr.substr(0, nrStr.length - 3);
    }
    if (nrStr.length > 0) {
      a.unshift(nrStr);
    }
    nrStr = a.join(delimiter);
    return nrStr;
  } else {
    return nr.toString();
  }
}

},{}],194:[function(require,module,exports){
"use strict";
var $ = require('jquery');
var utils = require('../utils');

module.exports = function renderError(type, el) {
  if (type === 'browser') {
    renderBrowserError(el);
  }

  function renderBrowserError(el) {
    var message = 'Det ser ut som att du använder en föråldrad webbläsare. Prova att uppgradera din webbläsare för att visa kartan.'
    var elMessage = utils.createElement('div', message, {
      cls: 'o-no-map-message'
    });
    var container = utils.createElement('div', elMessage, {
      cls: 'o-no-map'
    });
    $(function() {
      $(el).append(container);
    });
  }
}

},{"../utils":185,"jquery":25}],195:[function(require,module,exports){
"use strict";

var Replacer = function() {

  var start = undefined;
  var end = undefined;
  var helper = undefined;
  var helperNS = undefined;
  var helperArg = undefined;

  function replace(name, obj, options) {
      start = options.start || '{{';
      end = options.end || '}}';
      helper = options.helper || {};
      helperNS = options.helperNS || '@';
      helperArg = [options.helperArg] || [];

      var result = searchAndReplace(name, obj);
      return result;
  }

  function searchAndReplace(name, obj) {
      var regex = new RegExp(start + '(.*?)' +  end, "g");
      var matches = regex.exec(name);
      if(matches) {
          var val = obj.hasOwnProperty(matches[1]) ? obj[matches[1]] : '';
          if (!val) {
            var nsIndex = matches[0].indexOf(helperNS);
            if (nsIndex) {
              var helperParts = getArgs(matches[1]);
              var helperName = helperParts[1].substring(nsIndex - 1);
              var args = helperArg.concat(helperParts[0]);
              val = helper.hasOwnProperty(helperName) ? helper[helperName].apply(null, args).toString() : '';
            }
          }
          return searchAndReplace(name.replace(matches[0], val), obj);
      }
      else {
          return name;
      }
  }

  function getArgs(str) {
    var args = str.match(/\((.*?)\)/);
    if (args) {
      return [args[1].split(','), str.substring(0, args.index)];
    } else {
      return ['',str];
    }
  }

	return {
  		replace: function(name, obj, options) {
          var opt = options || {};
          return (replace(name, obj, opt));
  		}
	};

}

module.exports = Replacer();

},{}],196:[function(require,module,exports){
"use strict";

var round = function round(value, decimals) {
  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);
}

module.exports = round;

},{}],197:[function(require,module,exports){
"use strict";
var renderError = require('./rendererror');

module.exports = function supports(type, el) {
  var canvas = document.createElement('canvas').getContext;
  var requestAnimationFrame = window.requestAnimationFrame;
  if (!!canvas && !!requestAnimationFrame) {
    return true;
  } else {
    renderError('browser', el);
    return false;
  }
}

},{"./rendererror":194}],198:[function(require,module,exports){
"use strict";

module.exports = function trimUrl(url) {
  var trimmed;
  if (url.substring(url.lastIndexOf('/')).indexOf('.htm') !== -1) {
    trimmed = url.substring(0, url.lastIndexOf('/') + 1);
  } else if (url.substr(url.length - 1) !== '/') {
    trimmed = url + '/';
  } else {
    trimmed = url;
  }
  return trimmed;
}

},{}],199:[function(require,module,exports){
"use strict";

var urlparser = {};

urlparser.objectify = function(objString, opt_options) {
    var options = opt_options || {};
    var delimeter = options.delimeter || '/';
    var topmost = options.topmost || 'name';
    var parts = objString.split(delimeter);
    var obj = {};
    if(options.topmost) {
        if(parts[0]  === '') {
            console.log('Topmost value is missing');
        }
        else {
            obj[topmost] = parts[0];
        }
    }
    if(parts.length > 1) {
        for (var i = 1, ii = parts.length; i < ii; i += 2) {
            obj[parts[i]] = parts[i + 1];
        }
    }
    return obj;
}
urlparser.stringify = function(obj, opt_options) {
    var options = opt_options || {};
    var delimeter = options.delimeter || '/';
    var topmost = options.topmost || undefined;
    var objString = topmost ? obj[topmost] : '';
    for (var key in obj) {
        if(key !== topmost)
        objString += delimeter + key + delimeter + obj[key];
    }
    return objString;
}
urlparser.arrStringify = function(arr, opt_options) {
   var options = opt_options || {};
   var delimeter = options.delimeter || '/';
   var topmost = options.topmost || '';
   var arrString = topmost ? topmost + delimeter : '';
   if(typeof arr[0][0] === 'undefined') {
      arrString += arr.join(',');
   }
   else {
      var outer = arr.map(function(inner) {
          var res = inner.map(function(innerpart) {
              return innerpart.join('!');
          })
          return res.join(',');
      });
      arrString += outer.join(options.delimeter);
   }
   return arrString;
}
urlparser.strArrayify = function(str, opt_options) {
   var options = opt_options || {};
   var delimeter = options.delimeter || '/';
   var topmostName = opt_options.topmostName || 'topmost';
   var arrName = opt_options.arrName || 'arr';
   var topmost = str.substring(0, str.indexOf(delimeter));
   var arrStr = str.substring(str.indexOf(delimeter) + 1);
   var arr = arrStr.split(delimeter).map(function(el) {
        return el.split('!');
   });
   var obj = {};
   obj[topmostName] = topmost;
   obj[arrName] = arr;
   return obj;
}
urlparser.strIntify = function(str, opt_options) {
    var options = opt_options || {};
    var delimiter = options.delimiter || ',';
    var arr = str.split(delimiter);
    var strToInt = arr.map(function(el) {
        return parseInt(el);
    });
    return strToInt;
}
urlparser.strBoolean = function(str) {
    if(str === "1") {
        return true;
    }
    else if(str === "0") {
        return false;
    }
    else {
        console.log("String is not 1 or 0");
        return false;
    }
}
urlparser.formatUrl = function(obj) {
    var url = Object.getOwnPropertyNames(obj).reduce(function(prev, current) {
        current = prev ? "&" + current + "=" + obj[current] : current + "=" + obj[current];
        return prev + current;
    }, "");
    return url;
}

module.exports = urlparser;

},{}],200:[function(require,module,exports){
"use strict";
var isUrl = require('./isurl');

//Checks if str is a valid url. If not append str to baseUrl
module.exports = function validateUrl(str, baseUrl) {
   var url = isUrl(str) ? str : baseUrl + str;
   return url;
}

},{"./isurl":192}],201:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var template = require("./templates/viewer.handlebars");
var Modal = require('./modal');
var utils = require('./utils');
var isUrl = require('./utils/isurl');
var elQuery = require('./utils/elquery');
var featureinfo = require('./featureinfo');
var maputils = require('./maputils');
var style = require('./style')();
var layerCreator = require('./layercreator');

var map;
var template;
var settings = {
  projection: '',
  projectionCode: '',
  projectionExtent: '',
  extent: [],
  center: [0, 0],
  zoom: 0,
  resolutions: null,
  source: {},
  group: [],
  layers: [],
  styles: {},
  controls: [],
  featureInfoOverlay: undefined,
  editLayer: null
};
var urlParams;
var footerTemplate = {};

function init(el, mapOptions) {
  render(el, mapOptions);

  // Read and set projection
  if (mapOptions.hasOwnProperty('proj4Defs') && window.proj4) {
    var proj = mapOptions['proj4Defs'];

    //Register proj4 projection definitions
    for (var i = 0; i < proj.length; i++) {
      proj4.defs(proj[i].code, proj[i].projection);
      if (proj[i].hasOwnProperty('alias')) {
        proj4.defs(proj[i].alias, proj4.defs(proj[i].code));
      }
    }
  }
  settings.params = urlParams = mapOptions.params || {};
  settings.map = mapOptions.map;
  settings.url = mapOptions.url;
  settings.target = mapOptions.target;
  settings.baseUrl = mapOptions.baseUrl;
  if (mapOptions.hasOwnProperty('proj4Defs') || mapOptions.projectionCode=="EPSG:3857" || mapOptions.projectionCode=="EPSG:4326") {
    // Projection to be used in map
    settings.projectionCode = mapOptions.projectionCode || undefined;
    settings.projectionExtent = mapOptions.projectionExtent;
    settings.projection = new ol.proj.Projection({
      code: settings.projectionCode,
      extent: settings.projectionExtent,
      units: getUnits(settings.projectionCode)
    });
    settings.resolutions = mapOptions.resolutions || undefined;
    settings.tileGrid = maputils.tileGrid(settings.projectionExtent, settings.resolutions);
  }

  settings.extent = mapOptions.extent || undefined;
  settings.center = urlParams.center || mapOptions.center;
  settings.zoom = urlParams.zoom || mapOptions.zoom;
  settings.source = mapOptions.source;
  settings.groups = mapOptions.groups;
  settings.editLayer = mapOptions.editLayer;
  settings.styles = mapOptions.styles;
  style.init();
  settings.layers = createLayers(mapOptions.layers, urlParams.layers);
  settings.controls = mapOptions.controls;
  settings.consoleId = mapOptions.consoleId || 'o-console';
  settings.featureinfoOptions = mapOptions.featureinfoOptions || {};

  //If url arguments, parse this settings
  if (window.location.search) {
    parseArg();
  }

  loadMap();

  elQuery(map, {
    breakPoints: mapOptions.breakPoints,
    breakPointsPrefix: mapOptions.breakPointsPrefix,
  });

  if (urlParams.pin) {
    settings.featureinfoOptions.savedPin = urlParams.pin;
  }

  //This needs further development for proper handling in permalink
  else if (urlParams.selection) {
    settings.featureinfoOptions.savedSelection = new ol.Feature({
      geometry: new ol.geom[urlParams.selection.geometryType](urlParams.selection.coordinates)
    });
  }
  featureinfo.init(settings.featureinfoOptions);

}

function createLayers(layerlist, savedLayers) {
  var layers = [];
  for (var i = layerlist.length - 1; i >= 0; i--) {
    var savedLayer = {};
    if (savedLayers) {
      savedLayer = savedLayers[layerlist[i].name.split(':').pop()] || {
        visible: false,
        legend: false
      };
      savedLayer.name = layerlist[i].name;
    }
    var layer = $.extend(layerlist[i], savedLayer);
    layers.push(layerCreator(layer));
  }
  return layers;
}

function loadMap() {
  map = new ol.Map({
    target: 'o-map',
    layers: settings.layers,
    controls: [],
    view: new ol.View({
      extent: settings.extent || undefined,
      projection: settings.projection || undefined,
      center: settings.center,
      resolutions: settings.resolutions || undefined,
      zoom: settings.zoom
    })
  });
}

function parseArg() {
  var str = window.location.search.substring(1);
  var elements = str.split("&");

  for (var i = 0; i < elements.length; i++) {

    //center coordinates
    if (i == 0) {
      var z = elements[i].split(",");
      settings.center[0] = parseInt(z[0]);
      settings.center[1] = parseInt(z[1]);
    } else if (i == 1) {
      settings.zoom = parseInt(elements[i]);
    } else if (i == 2) {
      var l = elements[i].split(";");
      var layers = settings.layers;
      var la, match;
      for (var j = 0; j < layers.length; j++) {
        match = 0;
        $.each(l, function(index, el) {
          la = el.split(",");
          if (layers[j].get('group')) {
            if ((layers[j].get('group') == 'background') && (la[0] == layers[j].get('name'))) {
              layers[j].setVisible(true);
              match = 1;
            } else if ((layers[j].get('group') == 'background') && (match == 0)) {
              layers[j].setVisible(false);
            } else if (la[0] == layers[j].get('name')) {
              if (la[1] == 1) {
                layers[j].set('legend', true);
                layers[j].setVisible(false);
              } else {
                layers[j].set('legend', true);
                layers[j].setVisible(true);
              }
            }
          }
        })
      }
    }
  }

}

function getSettings() {
  return settings;
}

function getExtent() {
  return settings.extent;
}

function getBaseUrl() {
  return settings.baseUrl;
}

function getMapName() {
  return settings.map;
}

function getTileGrid() {
  return settings.tileGrid;
}

function getUrl() {
  return settings.url;
}

function getStyleSettings() {
  return settings.styles;
}

function getResolutions() {
  return settings.resolutions;
}

function getMapUrl() {
  var layerNames = '';
  var url;

  //delete search arguments if present
  if (window.location.search) {
    url = window.location.href.replace(window.location.search, '?');
  } else {
    url = window.location.href + '?';
  }
  var mapView = map.getView();
  var center = mapView.getCenter();
  for (var i = 0; i < 2; i++) {
    center[i] = parseInt(center[i]); //coordinates in integers
  }
  var zoom = mapView.getZoom();
  var layers = map.getLayers();

  //add layer if visible
  layers.forEach(function(el) {
    if (el.getVisible() == true) {
      layerNames += el.get('name') + ';';
    } else if (el.get('legend') == true) {
      layerNames += el.get('name') + ',1;';
    }
  })
  return url + center + '&' + zoom + '&' + layerNames.slice(0, layerNames.lastIndexOf(";"));
}

function getMap() {
  return map;
}

function getLayers() {
  return settings.layers;
}

function getLayersByProperty(key, val, byName) {
  var layers = map.getLayers().getArray().filter(function(layer) {
    if (layer.get(key)) {
      if (layer.get(key) === val) {
        return layer;
      }
    }
  });

  if (byName) {
    return layers.map(function(layer) {
      return layer.get('name');
    });
  } else {
    return layers;
  }
}

function getLayer(layername) {
  var layer = $.grep(settings.layers, function(obj) {
    return (obj.get('name') == layername);
  });
  return layer[0];
}

function getQueryableLayers() {
  var queryableLayers = settings.layers.filter(function(layer) {
    if (layer.get('queryable') && layer.getVisible()) {
      return layer;
    }
  });
  return queryableLayers;
}

function getGroup(group) {
  var group = $.grep(settings.layers, function(obj) {
    return (obj.get('group') == group);
  });
  return group;
}

function getGroups(opt) {
  if(opt == 'top') {
    return settings.groups;
  } else if (opt == 'sub') {
    return getSubgroups();
  } else {
    return settings.groups.concat(getSubgroups());
  }
}

function getSubgroups() {
  var subgroups = [];

  function findSubgroups(groups, n) {
    if (n >= groups.length) {
      return;
    }

    if (groups[n].groups) {
      groups[n].groups.forEach(function(subgroup) {
        subgroups.push(subgroup);
      });

      findSubgroups(groups[n].groups, 0);
    }

    findSubgroups(groups, n+1);
  }

  findSubgroups(settings.groups, 0);
  return subgroups;
}

function getProjectionCode() {
  return settings.projectionCode;
}

function getProjection() {
  return settings.projection;
}

function getMapSource() {
  return settings.source;
}

function getControlNames() {
  var controlNames = settings.controls.map(function(obj) {
    return obj.name;
  });
  return controlNames;
}

function getTarget() {
  return settings.target;
}

function checkScale(scale, maxScale, minScale) {
  if (maxScale || minScale) {

    // Alter 1: maxscale and minscale
    if (maxScale && minScale) {
      if ((scale > maxScale) && (scale < minScale)) {
        return true;
      }
    }

    // Alter 2: only maxscale
    else if (maxScale) {
      if (scale > maxScale) {
        return true;
      }
    }

    // Alter 3: only minscale
    else if (minScale) {
      if (scale < minScale) {
        return true;
      }
    }
  }

  // Alter 4: no scale limit
  else {
    return true;
  }
}

function getConsoleId() {
  return settings.consoleId;
}

function getScale(resolution) {
  var dpi = 25.4 / 0.28;
  var mpu = settings.projection.getMetersPerUnit();
  var scale = resolution * mpu * 39.37 * dpi;
  scale = Math.round(scale);
  return scale;
}

function getUnits(proj) {
  var units;
  switch(proj) {
    case 'EPSG:3857':
      units = 'm';
      break;
    case 'EPSG:4326':
      units = 'degrees';
      break;
    default:
      units = proj4.defs(proj) ? proj4.defs(proj).units : undefined;
  }
  return units;
}

function autoPan() {
  /*Workaround to remove when autopan implemented for overlays */
  var el = $('.o-popup');
  var center = map.getView().getCenter();
  var popupOffset = $(el).offset();
  var mapOffset = $('#' + map.getTarget()).offset();
  var offsetY = popupOffset.top - mapOffset.top;
  var mapSize = map.getSize();
  var offsetX = (mapOffset.left + mapSize[0]) - (popupOffset.left + $(el).outerWidth(true));

  // Check if mapmenu widget is used and opened
  var menuSize = 0;
  if (settings.controls.hasOwnProperty('mapmenu')) {
    menuSize = settings.controls.mapmenu.getTarget().offset().left > 0 ? mapSize[0] - settings.controls.mapmenu.getTarget().offset().left : menuSize = 0;
  }
  if (offsetY < 0 || offsetX < 0 + menuSize || offsetX > (mapSize[0] - $(el).outerWidth(true))) {
    var dx = 0,
      dy = 0;
    if (offsetX < 0 + menuSize) {
      dx = (-offsetX + menuSize) * map.getView().getResolution();
    }
    if (offsetX > (mapSize[0] - $(el).outerWidth(true))) {
      dx = -($(el).outerWidth(true) - (mapSize[0] - offsetX)) * map.getView().getResolution();
    }
    if (offsetY < 0) {
      dy = (-offsetY) * map.getView().getResolution();
    }
    map.getView().animate({
      center: ([center[0] + dx, center[1] + dy]),
	  duration:300
    });
  }
  /*End workaround*/
}

function removeOverlays(overlays) {
  if (overlays) {
    if (overlays.constructor === Array || overlays instanceof ol.Collection) {
      overlays.forEach(function(overlay) {
        map.removeOverlay(overlay);
      })
    } else {
      map.removeOverlay(overlays);
    }
  } else {
    map.getOverlays().clear();
  }
}

function render(el, mapOptions) {
    if (mapOptions.hasOwnProperty('footer')) {
      if (mapOptions.footer[0].hasOwnProperty('img')) {
        footerTemplate.img = mapOptions.footer[0].img;
      }
      if (mapOptions.footer[0].hasOwnProperty('text')) {
        footerTemplate.text = mapOptions.footer[0].text;
      }
      if (mapOptions.footer[0].hasOwnProperty('url')) {
        footerTemplate.url = mapOptions.footer[0].url;
      }
      if (mapOptions.footer[0].hasOwnProperty('urlText')) {
        footerTemplate.urlText = mapOptions.footer[0].urlText;
      }
    }

    $(el).html(template(footerTemplate));
  }

module.exports.init = init;
module.exports.createLayers = createLayers;
module.exports.getBaseUrl = getBaseUrl;
module.exports.getExtent = getExtent;
module.exports.getSettings = getSettings;
module.exports.getStyleSettings = getStyleSettings;
module.exports.getMapUrl = getMapUrl;
module.exports.getMap = getMap;
module.exports.getLayers = getLayers;
module.exports.getLayersByProperty = getLayersByProperty;
module.exports.getLayer = getLayer;
module.exports.getControlNames = getControlNames;
module.exports.getQueryableLayers = getQueryableLayers;
module.exports.getGroup = getGroup;
module.exports.getGroups = getGroups;
module.exports.getProjectionCode = getProjectionCode;
module.exports.getProjection = getProjection;
module.exports.getMapSource = getMapSource;
module.exports.getResolutions = getResolutions;
module.exports.getScale = getScale;
module.exports.getTarget = getTarget;
module.exports.getTileGrid = getTileGrid;
module.exports.autoPan = autoPan;
module.exports.removeOverlays = removeOverlays;
module.exports.checkScale= checkScale;
module.exports.getMapName = getMapName;
module.exports.getConsoleId = getConsoleId;
module.exports.getUrl = getUrl;

},{"./featureinfo":120,"./layercreator":145,"./maputils":150,"./modal":152,"./style":176,"./templates/viewer.handlebars":184,"./utils":185,"./utils/elquery":186,"./utils/isurl":192,"jquery":25,"openlayers":27}],202:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var zoomControl;
  var target = options.target || 'o-toolbar-navigation';
  map = Viewer.getMap();

  zoomControl = new ol.control.Zoom({
    zoomInTipLabel: ' ',
    zoomOutTipLabel: ' ',
    zoomInLabel: $.parseHTML('<svg class="o-icon-fa-plus"><use xlink:href="#fa-plus"></use></svg>')[0],
    zoomOutLabel: $.parseHTML('<svg class="o-icon-fa-minus"><use xlink:href="#fa-minus"></use></svg>')[0],
    target: target
  });
  map.addControl(zoomControl);
}

module.exports.init = Init;

},{"./viewer":201,"jquery":25,"openlayers":27}]},{},[100])(100)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb25mL29yaWdvQ29uZmlnLmpzIiwiY29uZi9vcmlnb0NvbnRyb2xzLmpzIiwiZXh0ZXJucy9vd2wuY2Fyb3VzZWwubWluLmpzIiwiZXh0ZXJucy9vd2xjYXJvdXNlbC1icm93c2VyaWZ5LmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnMucnVudGltZS5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxiYXNlLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGRlY29yYXRvcnMuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcZGVjb3JhdG9yc1xcaW5saW5lLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGV4Y2VwdGlvbi5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxoZWxwZXJzLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGhlbHBlcnNcXGJsb2NrLWhlbHBlci1taXNzaW5nLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGhlbHBlcnNcXGVhY2guanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcaGVscGVyc1xcaGVscGVyLW1pc3NpbmcuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcaGVscGVyc1xcaWYuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcaGVscGVyc1xcbG9nLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGhlbHBlcnNcXGxvb2t1cC5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxoZWxwZXJzXFx3aXRoLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGxvZ2dlci5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcZGlzdFxcY2pzXFxoYW5kbGViYXJzXFxub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcbm8tY29uZmxpY3QuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xccnVudGltZS5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxzYWZlLXN0cmluZy5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFx1dGlscy5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL3J1bnRpbWUuanMiLCJub2RlX21vZHVsZXMvaGJzZnkvcnVudGltZS5qcyIsIm5vZGVfbW9kdWxlcy9qcXVlcnkvZGlzdC9qcXVlcnkuanMiLCJub2RlX21vZHVsZXMvbG9jYWxmb3JhZ2UvZGlzdC9sb2NhbGZvcmFnZS5qcyIsIm5vZGVfbW9kdWxlcy9vcGVubGF5ZXJzL2Rpc3Qvb2wuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL1BvaW50LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9Qcm9qLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9hZGp1c3RfYXhpcy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL2FkanVzdF9sYXQuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9hZGp1c3RfbG9uLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vYXNpbnouanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9lMGZuLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vZTFmbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL2UyZm4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9lM2ZuLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vZ04uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9pbWxmbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL2lxc2Zuei5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL21sZm4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9tc2Zuei5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3BoaTJ6LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vcGpfZW5mbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3BqX2ludl9tbGZuLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vcGpfbWxmbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3FzZm56LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3NyYXQuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi90b1BvaW50LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vdHNmbnouanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbnN0YW50cy9EYXR1bS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29uc3RhbnRzL0VsbGlwc29pZC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29uc3RhbnRzL1ByaW1lTWVyaWRpYW4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbnN0YW50cy91bml0cy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29yZS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvZGF0dW0uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2RhdHVtX3RyYW5zZm9ybS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvZGVmcy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvZGVyaXZlQ29uc3RhbnRzLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9leHRlbmQuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2dsb2JhbC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvaW5jbHVkZWRQcm9qZWN0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3BhcnNlQ29kZS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvalN0cmluZy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2FlYS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvYWVxZC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvY2Fzcy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvY2VhLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9lcWMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2VxZGMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2dhdXNzLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9nbm9tLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9rcm92YWsuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2xhZWEuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2xjYy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvbG9uZ2xhdC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvbWVyYy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvbWlsbC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvbW9sbC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvbnptZy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvb21lcmMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3BvbHkuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3NpbnUuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3NvbWVyYy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvc3RlcmUuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3N0ZXJlYS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvdG1lcmMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3V0bS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvdmFuZGcuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3RyYW5zZm9ybS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvd2t0LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L25vZGVfbW9kdWxlcy9tZ3JzL21ncnMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvcGFja2FnZS5qc29uIiwibm9kZV9tb2R1bGVzL3R5cGVhaGVhZC5qcy1icm93c2VyaWZ5L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3R5cGVhaGVhZC5qcy9kaXN0L2Jsb29kaG91bmQuanMiLCJub2RlX21vZHVsZXMvdHlwZWFoZWFkLmpzL2Rpc3QvdHlwZWFoZWFkLmJ1bmRsZS5qcyIsIm9yaWdvLmpzIiwic3JjL2Fib3V0LmpzIiwic3JjL2F0dHJpYnV0aW9uLmpzIiwic3JjL2NvbXBvbmVudHMvc3Bpbm5lci5oYW5kbGViYXJzIiwic3JjL2NvbnRyb2xpbml0aWFsaXNlci5qcyIsInNyYy9kcm9wZG93bi5qcyIsInNyYy9lZGl0b3IuanMiLCJzcmMvZWRpdG9yL2Fnc3RyYW5zYWN0aW9uLmpzIiwic3JjL2VkaXRvci9kcmF3dG9vbHMuanMiLCJzcmMvZWRpdG9yL2VkaXREaXNwYXRjaGVyLmpzIiwic3JjL2VkaXRvci9lZGl0Zm9ybS5qcyIsInNyYy9lZGl0b3IvZWRpdGhhbmRsZXIuanMiLCJzcmMvZWRpdG9yL2VkaXRvcmxheWVycy5qcyIsInNyYy9lZGl0b3IvZWRpdG9ydG9vbGJhci5qcyIsInNyYy9lZGl0b3IvZWRpdHNzdG9yZS5qcyIsInNyYy9lZGl0b3IvaW5kZXhlZGRiLmpzIiwic3JjL2VkaXRvci9zaGFwZXMuanMiLCJzcmMvZWRpdG9yL3RyYW5zYWN0aW9uaGFuZGxlci5qcyIsInNyYy9lZGl0b3Ivd2ZzdHJhbnNhY3Rpb24uanMiLCJzcmMvZmVhdHVyZWluZm8uanMiLCJzcmMvZmVhdHVyZWluZm90ZW1wbGF0ZXMuanMiLCJzcmMvZmVhdHVyZWxheWVyLmpzIiwic3JjL2Z1bGxzY3JlZW4uanMiLCJzcmMvZ2VvbS5qcyIsInNyYy9nZW9tZXRyeS9nZXRhcmVhLmpzIiwic3JjL2dlb21ldHJ5L2dldGNlbnRlci5qcyIsInNyYy9nZW9wb3NpdGlvbi5qcyIsInNyYy9nZXRhdHRyaWJ1dGVzLmpzIiwic3JjL2dldGZlYXR1cmUuanMiLCJzcmMvZ2V0ZmVhdHVyZWluZm8uanMiLCJzcmMvaG9tZS5qcyIsInNyYy9sYXllci9hZ3NmZWF0dXJlLmpzIiwic3JjL2xheWVyL2Fnc3RpbGUuanMiLCJzcmMvbGF5ZXIvZmVhdHVyZWxheWVyLmpzIiwic3JjL2xheWVyL2dlb2pzb24uanMiLCJzcmMvbGF5ZXIvZ3JvdXAuanMiLCJzcmMvbGF5ZXIvb3NtLmpzIiwic3JjL2xheWVyL3RpbGUuanMiLCJzcmMvbGF5ZXIvdG9wb2pzb24uanMiLCJzcmMvbGF5ZXIvdmVjdG9yLmpzIiwic3JjL2xheWVyL3dmcy5qcyIsInNyYy9sYXllci93bXMuanMiLCJzcmMvbGF5ZXIvd210cy5qcyIsInNyYy9sYXllci94eXouanMiLCJzcmMvbGF5ZXJjcmVhdG9yLmpzIiwic3JjL2xlZ2VuZC5qcyIsInNyYy9saW5rLmpzIiwic3JjL21hcGxvYWRlci5qcyIsInNyYy9tYXBtZW51LmpzIiwic3JjL21hcHV0aWxzLmpzIiwic3JjL21lYXN1cmUuanMiLCJzcmMvbW9kYWwuanMiLCJzcmMvb2ZmbGluZS5qcyIsInNyYy9vZmZsaW5lL2Rvd25sb2FkZXIuanMiLCJzcmMvb2ZmbGluZS9kb3dubG9hZGVyLnRlbXBsYXRlLmhhbmRsZWJhcnMiLCJzcmMvb2ZmbGluZS9kb3dubG9hZGhhbmRsZXIuanMiLCJzcmMvb2ZmbGluZS9kb3dubG9hZHNvdXJjZXMuanMiLCJzcmMvb2ZmbGluZS9nZW9qc29uLmpzIiwic3JjL29mZmxpbmUvb2ZmbGluZWRpc3BhdGNoZXIuanMiLCJzcmMvb2ZmbGluZS9vZmZsaW5lbGF5ZXIuanMiLCJzcmMvb2ZmbGluZS9vZmZsaW5lc3RvcmUuanMiLCJzcmMvb2ZmbGluZS90b3BvanNvbi5qcyIsInNyYy9vZmZsaW5lL3ZlcmlmeWZlYXR1cmVpZHMuanMiLCJzcmMvb2ZmbGluZS93ZnMuanMiLCJzcmMvcGVybWFsaW5rL3Blcm1hbGluay5qcyIsInNyYy9wZXJtYWxpbmsvcGVybWFsaW5rcGFyc2VyLmpzIiwic3JjL3Blcm1hbGluay9wZXJtYWxpbmtzdG9yZS5qcyIsInNyYy9wb3B1cC5qcyIsInNyYy9wcmludC5qcyIsInNyYy9yb3RhdGUuanMiLCJzcmMvc2NhbGUuanMiLCJzcmMvc2NhbGVsaW5lLmpzIiwic3JjL3NlYXJjaC5qcyIsInNyYy9zaGFyZW1hcC5qcyIsInNyYy9zaWRlYmFyLmpzIiwic3JjL3N0eWxlLmpzIiwic3JjL3N0eWxlL21lYXN1cmUuanMiLCJzcmMvc3R5bGUvcGluLmpzIiwic3JjL3N0eWxlL3N0eWxldHlwZXMuanMiLCJzcmMvdGVtcGxhdGVzL2VkaXRvcnRvb2xiYXIudGVtcGxhdGUuaGFuZGxlYmFycyIsInNyYy90ZW1wbGF0ZXMvZmVhdHVyZWluZm90ZW1wbGF0ZXMvZGVmYXVsdC5oYW5kbGViYXJzIiwic3JjL3RlbXBsYXRlcy9mZWF0dXJlaW5mb3RlbXBsYXRlcy9kZWZhdWx0LmpzIiwic3JjL3RlbXBsYXRlcy9wcmludC5oYW5kbGViYXJzIiwic3JjL3RlbXBsYXRlcy92aWV3ZXIuaGFuZGxlYmFycyIsInNyYy91dGlscy5qcyIsInNyYy91dGlscy9lbHF1ZXJ5LmpzIiwic3JjL3V0aWxzL2dlbmVyYXRldXVpZC5qcyIsInNyYy91dGlscy9nZXRpbWFnZW9yaWVudGF0aW9uLmpzIiwic3JjL3V0aWxzL2dldHVybC5qcyIsInNyYy91dGlscy9pbWFnZXJlc2l6ZXIuanMiLCJzcmMvdXRpbHMvaXNlbWJlZGRlZC5qcyIsInNyYy91dGlscy9pc3VybC5qcyIsInNyYy91dGlscy9udW1iZXJmb3JtYXR0ZXIuanMiLCJzcmMvdXRpbHMvcmVuZGVyZXJyb3IuanMiLCJzcmMvdXRpbHMvcmVwbGFjZXIuanMiLCJzcmMvdXRpbHMvcm91bmQuanMiLCJzcmMvdXRpbHMvc3VwcG9ydHMuanMiLCJzcmMvdXRpbHMvdHJpbXVybC5qcyIsInNyYy91dGlscy91cmxwYXJzZXIuanMiLCJzcmMvdXRpbHMvdmFsaWRhdGV1cmwuanMiLCJzcmMvdmlld2VyLmpzIiwic3JjL3pvb20uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OEJDSHNCLG1CQUFtQjs7SUFBN0IsSUFBSTs7Ozs7b0NBSU8sMEJBQTBCOzs7O21DQUMzQix3QkFBd0I7Ozs7K0JBQ3ZCLG9CQUFvQjs7SUFBL0IsS0FBSzs7aUNBQ1Esc0JBQXNCOztJQUFuQyxPQUFPOztvQ0FFSSwwQkFBMEI7Ozs7O0FBR2pELFNBQVMsTUFBTSxHQUFHO0FBQ2hCLE1BQUksRUFBRSxHQUFHLElBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7O0FBRTFDLE9BQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLElBQUUsQ0FBQyxVQUFVLG9DQUFhLENBQUM7QUFDM0IsSUFBRSxDQUFDLFNBQVMsbUNBQVksQ0FBQztBQUN6QixJQUFFLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNqQixJQUFFLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLGdCQUFnQixDQUFDOztBQUU3QyxJQUFFLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQztBQUNoQixJQUFFLENBQUMsUUFBUSxHQUFHLFVBQVMsSUFBSSxFQUFFO0FBQzNCLFdBQU8sT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7R0FDbkMsQ0FBQzs7QUFFRixTQUFPLEVBQUUsQ0FBQztDQUNYOztBQUVELElBQUksSUFBSSxHQUFHLE1BQU0sRUFBRSxDQUFDO0FBQ3BCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDOztBQUVyQixrQ0FBVyxJQUFJLENBQUMsQ0FBQzs7QUFFakIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQzs7cUJBRVIsSUFBSTs7Ozs7Ozs7Ozs7OztxQkNwQ3lCLFNBQVM7O3lCQUMvQixhQUFhOzs7O3VCQUNFLFdBQVc7OzBCQUNSLGNBQWM7O3NCQUNuQyxVQUFVOzs7O0FBRXRCLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQzs7QUFDeEIsSUFBTSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7OztBQUU1QixJQUFNLGdCQUFnQixHQUFHO0FBQzlCLEdBQUMsRUFBRSxhQUFhO0FBQ2hCLEdBQUMsRUFBRSxlQUFlO0FBQ2xCLEdBQUMsRUFBRSxlQUFlO0FBQ2xCLEdBQUMsRUFBRSxVQUFVO0FBQ2IsR0FBQyxFQUFFLGtCQUFrQjtBQUNyQixHQUFDLEVBQUUsaUJBQWlCO0FBQ3BCLEdBQUMsRUFBRSxVQUFVO0NBQ2QsQ0FBQzs7O0FBRUYsSUFBTSxVQUFVLEdBQUcsaUJBQWlCLENBQUM7O0FBRTlCLFNBQVMscUJBQXFCLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUU7QUFDbkUsTUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLElBQUksRUFBRSxDQUFDO0FBQzdCLE1BQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxJQUFJLEVBQUUsQ0FBQztBQUMvQixNQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsSUFBSSxFQUFFLENBQUM7O0FBRW5DLGtDQUF1QixJQUFJLENBQUMsQ0FBQztBQUM3Qix3Q0FBMEIsSUFBSSxDQUFDLENBQUM7Q0FDakM7O0FBRUQscUJBQXFCLENBQUMsU0FBUyxHQUFHO0FBQ2hDLGFBQVcsRUFBRSxxQkFBcUI7O0FBRWxDLFFBQU0scUJBQVE7QUFDZCxLQUFHLEVBQUUsb0JBQU8sR0FBRzs7QUFFZixnQkFBYyxFQUFFLHdCQUFTLElBQUksRUFBRSxFQUFFLEVBQUU7QUFDakMsUUFBSSxnQkFBUyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssVUFBVSxFQUFFO0FBQ3RDLFVBQUksRUFBRSxFQUFFO0FBQUUsY0FBTSwyQkFBYyx5Q0FBeUMsQ0FBQyxDQUFDO09BQUU7QUFDM0Usb0JBQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztLQUM1QixNQUFNO0FBQ0wsVUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7S0FDekI7R0FDRjtBQUNELGtCQUFnQixFQUFFLDBCQUFTLElBQUksRUFBRTtBQUMvQixXQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDM0I7O0FBRUQsaUJBQWUsRUFBRSx5QkFBUyxJQUFJLEVBQUUsT0FBTyxFQUFFO0FBQ3ZDLFFBQUksZ0JBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLFVBQVUsRUFBRTtBQUN0QyxvQkFBTyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzdCLE1BQU07QUFDTCxVQUFJLE9BQU8sT0FBTyxLQUFLLFdBQVcsRUFBRTtBQUNsQyxjQUFNLHlFQUEwRCxJQUFJLG9CQUFpQixDQUFDO09BQ3ZGO0FBQ0QsVUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUM7S0FDL0I7R0FDRjtBQUNELG1CQUFpQixFQUFFLDJCQUFTLElBQUksRUFBRTtBQUNoQyxXQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDNUI7O0FBRUQsbUJBQWlCLEVBQUUsMkJBQVMsSUFBSSxFQUFFLEVBQUUsRUFBRTtBQUNwQyxRQUFJLGdCQUFTLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxVQUFVLEVBQUU7QUFDdEMsVUFBSSxFQUFFLEVBQUU7QUFBRSxjQUFNLDJCQUFjLDRDQUE0QyxDQUFDLENBQUM7T0FBRTtBQUM5RSxvQkFBTyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQy9CLE1BQU07QUFDTCxVQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztLQUM1QjtHQUNGO0FBQ0QscUJBQW1CLEVBQUUsNkJBQVMsSUFBSSxFQUFFO0FBQ2xDLFdBQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUM5QjtDQUNGLENBQUM7O0FBRUssSUFBSSxHQUFHLEdBQUcsb0JBQU8sR0FBRyxDQUFDOzs7UUFFcEIsV0FBVztRQUFFLE1BQU07Ozs7Ozs7Ozs7OztnQ0M3RUEscUJBQXFCOzs7O0FBRXpDLFNBQVMseUJBQXlCLENBQUMsUUFBUSxFQUFFO0FBQ2xELGdDQUFlLFFBQVEsQ0FBQyxDQUFDO0NBQzFCOzs7Ozs7OztxQkNKb0IsVUFBVTs7cUJBRWhCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsVUFBUyxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUU7QUFDM0UsUUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO0FBQ2IsUUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7QUFDbkIsV0FBSyxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7QUFDcEIsU0FBRyxHQUFHLFVBQVMsT0FBTyxFQUFFLE9BQU8sRUFBRTs7QUFFL0IsWUFBSSxRQUFRLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQztBQUNsQyxpQkFBUyxDQUFDLFFBQVEsR0FBRyxjQUFPLEVBQUUsRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFELFlBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDL0IsaUJBQVMsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0FBQzlCLGVBQU8sR0FBRyxDQUFDO09BQ1osQ0FBQztLQUNIOztBQUVELFNBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUM7O0FBRTdDLFdBQU8sR0FBRyxDQUFDO0dBQ1osQ0FBQyxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7QUNwQkQsSUFBTSxVQUFVLEdBQUcsQ0FBQyxhQUFhLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQzs7QUFFbkcsU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNoQyxNQUFJLEdBQUcsR0FBRyxJQUFJLElBQUksSUFBSSxDQUFDLEdBQUc7TUFDdEIsSUFBSSxZQUFBO01BQ0osTUFBTSxZQUFBLENBQUM7QUFDWCxNQUFJLEdBQUcsRUFBRTtBQUNQLFFBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztBQUN0QixVQUFNLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7O0FBRTFCLFdBQU8sSUFBSSxLQUFLLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUM7R0FDeEM7O0FBRUQsTUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQzs7O0FBRzFELE9BQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxFQUFFO0FBQ2hELFFBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7R0FDOUM7OztBQUdELE1BQUksS0FBSyxDQUFDLGlCQUFpQixFQUFFO0FBQzNCLFNBQUssQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7R0FDMUM7O0FBRUQsTUFBSSxHQUFHLEVBQUU7QUFDUCxRQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUN2QixRQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztHQUN0QjtDQUNGOztBQUVELFNBQVMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQzs7cUJBRW5CLFNBQVM7Ozs7Ozs7Ozs7Ozs7eUNDbENlLGdDQUFnQzs7OzsyQkFDOUMsZ0JBQWdCOzs7O29DQUNQLDBCQUEwQjs7Ozt5QkFDckMsY0FBYzs7OzswQkFDYixlQUFlOzs7OzZCQUNaLGtCQUFrQjs7OzsyQkFDcEIsZ0JBQWdCOzs7O0FBRWxDLFNBQVMsc0JBQXNCLENBQUMsUUFBUSxFQUFFO0FBQy9DLHlDQUEyQixRQUFRLENBQUMsQ0FBQztBQUNyQywyQkFBYSxRQUFRLENBQUMsQ0FBQztBQUN2QixvQ0FBc0IsUUFBUSxDQUFDLENBQUM7QUFDaEMseUJBQVcsUUFBUSxDQUFDLENBQUM7QUFDckIsMEJBQVksUUFBUSxDQUFDLENBQUM7QUFDdEIsNkJBQWUsUUFBUSxDQUFDLENBQUM7QUFDekIsMkJBQWEsUUFBUSxDQUFDLENBQUM7Q0FDeEI7Ozs7Ozs7O3FCQ2hCcUQsVUFBVTs7cUJBRWpELFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3ZFLFFBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPO1FBQ3pCLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUVwQixRQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7QUFDcEIsYUFBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDakIsTUFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLElBQUksT0FBTyxJQUFJLElBQUksRUFBRTtBQUMvQyxhQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUN0QixNQUFNLElBQUksZUFBUSxPQUFPLENBQUMsRUFBRTtBQUMzQixVQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3RCLFlBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNmLGlCQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlCOztBQUVELGVBQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO09BQ2hELE1BQU07QUFDTCxlQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN0QjtLQUNGLE1BQU07QUFDTCxVQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUMvQixZQUFJLElBQUksR0FBRyxtQkFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDckMsWUFBSSxDQUFDLFdBQVcsR0FBRyx5QkFBa0IsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzdFLGVBQU8sR0FBRyxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQztPQUN4Qjs7QUFFRCxhQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7S0FDN0I7R0FDRixDQUFDLENBQUM7Q0FDSjs7Ozs7Ozs7Ozs7OztxQkMvQjhFLFVBQVU7O3lCQUNuRSxjQUFjOzs7O3FCQUVyQixVQUFTLFFBQVEsRUFBRTtBQUNoQyxVQUFRLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxVQUFTLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDekQsUUFBSSxDQUFDLE9BQU8sRUFBRTtBQUNaLFlBQU0sMkJBQWMsNkJBQTZCLENBQUMsQ0FBQztLQUNwRDs7QUFFRCxRQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRTtRQUNmLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTztRQUN6QixDQUFDLEdBQUcsQ0FBQztRQUNMLEdBQUcsR0FBRyxFQUFFO1FBQ1IsSUFBSSxZQUFBO1FBQ0osV0FBVyxZQUFBLENBQUM7O0FBRWhCLFFBQUksT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFO0FBQy9CLGlCQUFXLEdBQUcseUJBQWtCLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDakY7O0FBRUQsUUFBSSxrQkFBVyxPQUFPLENBQUMsRUFBRTtBQUFFLGFBQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQUU7O0FBRTFELFFBQUksT0FBTyxDQUFDLElBQUksRUFBRTtBQUNoQixVQUFJLEdBQUcsbUJBQVksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ2xDOztBQUVELGFBQVMsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFO0FBQ3pDLFVBQUksSUFBSSxFQUFFO0FBQ1IsWUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUM7QUFDakIsWUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7QUFDbkIsWUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLEtBQUssQ0FBQyxDQUFDO0FBQ3pCLFlBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQzs7QUFFbkIsWUFBSSxXQUFXLEVBQUU7QUFDZixjQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsR0FBRyxLQUFLLENBQUM7U0FDeEM7T0FDRjs7QUFFRCxTQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDN0IsWUFBSSxFQUFFLElBQUk7QUFDVixtQkFBVyxFQUFFLG1CQUFZLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsV0FBVyxHQUFHLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztPQUMvRSxDQUFDLENBQUM7S0FDSjs7QUFFRCxRQUFJLE9BQU8sSUFBSSxPQUFPLE9BQU8sS0FBSyxRQUFRLEVBQUU7QUFDMUMsVUFBSSxlQUFRLE9BQU8sQ0FBQyxFQUFFO0FBQ3BCLGFBQUssSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3ZDLGNBQUksQ0FBQyxJQUFJLE9BQU8sRUFBRTtBQUNoQix5QkFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7V0FDL0M7U0FDRjtPQUNGLE1BQU07QUFDTCxZQUFJLFFBQVEsWUFBQSxDQUFDOztBQUViLGFBQUssSUFBSSxHQUFHLElBQUksT0FBTyxFQUFFO0FBQ3ZCLGNBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRTs7OztBQUkvQixnQkFBSSxRQUFRLEtBQUssU0FBUyxFQUFFO0FBQzFCLDJCQUFhLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzthQUNoQztBQUNELG9CQUFRLEdBQUcsR0FBRyxDQUFDO0FBQ2YsYUFBQyxFQUFFLENBQUM7V0FDTDtTQUNGO0FBQ0QsWUFBSSxRQUFRLEtBQUssU0FBUyxFQUFFO0FBQzFCLHVCQUFhLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDdEM7T0FDRjtLQUNGOztBQUVELFFBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUNYLFNBQUcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDckI7O0FBRUQsV0FBTyxHQUFHLENBQUM7R0FDWixDQUFDLENBQUM7Q0FDSjs7Ozs7Ozs7Ozs7Ozt5QkM5RXFCLGNBQWM7Ozs7cUJBRXJCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsZUFBZSxFQUFFLGlDQUFnQztBQUN2RSxRQUFJLFNBQVMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFOztBQUUxQixhQUFPLFNBQVMsQ0FBQztLQUNsQixNQUFNOztBQUVMLFlBQU0sMkJBQWMsbUJBQW1CLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0tBQ3ZGO0dBQ0YsQ0FBQyxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7cUJDWmlDLFVBQVU7O3FCQUU3QixVQUFTLFFBQVEsRUFBRTtBQUNoQyxVQUFRLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFTLFdBQVcsRUFBRSxPQUFPLEVBQUU7QUFDM0QsUUFBSSxrQkFBVyxXQUFXLENBQUMsRUFBRTtBQUFFLGlCQUFXLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUFFOzs7OztBQUt0RSxRQUFJLEFBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsSUFBSSxDQUFDLFdBQVcsSUFBSyxlQUFRLFdBQVcsQ0FBQyxFQUFFO0FBQ3ZFLGFBQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUM5QixNQUFNO0FBQ0wsYUFBTyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3pCO0dBQ0YsQ0FBQyxDQUFDOztBQUVILFVBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFLFVBQVMsV0FBVyxFQUFFLE9BQU8sRUFBRTtBQUMvRCxXQUFPLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsRUFBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUksRUFBQyxDQUFDLENBQUM7R0FDdkgsQ0FBQyxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7cUJDbkJjLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLGtDQUFpQztBQUM5RCxRQUFJLElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQztRQUNsQixPQUFPLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDOUMsU0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzdDLFVBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDekI7O0FBRUQsUUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQ2QsUUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLEVBQUU7QUFDOUIsV0FBSyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0tBQzVCLE1BQU0sSUFBSSxPQUFPLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksRUFBRTtBQUNyRCxXQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7S0FDNUI7QUFDRCxRQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDOztBQUVoQixZQUFRLENBQUMsR0FBRyxNQUFBLENBQVosUUFBUSxFQUFTLElBQUksQ0FBQyxDQUFDO0dBQ3hCLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7O3FCQ2xCYyxVQUFTLFFBQVEsRUFBRTtBQUNoQyxVQUFRLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxVQUFTLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDckQsV0FBTyxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0dBQzFCLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7O3FCQ0o4RSxVQUFVOztxQkFFMUUsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3pELFFBQUksa0JBQVcsT0FBTyxDQUFDLEVBQUU7QUFBRSxhQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUFFOztBQUUxRCxRQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUVwQixRQUFJLENBQUMsZUFBUSxPQUFPLENBQUMsRUFBRTtBQUNyQixVQUFJLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ3hCLFVBQUksT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFO0FBQy9CLFlBQUksR0FBRyxtQkFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDakMsWUFBSSxDQUFDLFdBQVcsR0FBRyx5QkFBa0IsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQ2hGOztBQUVELGFBQU8sRUFBRSxDQUFDLE9BQU8sRUFBRTtBQUNqQixZQUFJLEVBQUUsSUFBSTtBQUNWLG1CQUFXLEVBQUUsbUJBQVksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7T0FDaEUsQ0FBQyxDQUFDO0tBQ0osTUFBTTtBQUNMLGFBQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUM5QjtHQUNGLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7O3FCQ3ZCcUIsU0FBUzs7QUFFL0IsSUFBSSxNQUFNLEdBQUc7QUFDWCxXQUFTLEVBQUUsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUM7QUFDN0MsT0FBSyxFQUFFLE1BQU07OztBQUdiLGFBQVcsRUFBRSxxQkFBUyxLQUFLLEVBQUU7QUFDM0IsUUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEVBQUU7QUFDN0IsVUFBSSxRQUFRLEdBQUcsZUFBUSxNQUFNLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0FBQzlELFVBQUksUUFBUSxJQUFJLENBQUMsRUFBRTtBQUNqQixhQUFLLEdBQUcsUUFBUSxDQUFDO09BQ2xCLE1BQU07QUFDTCxhQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztPQUM3QjtLQUNGOztBQUVELFdBQU8sS0FBSyxDQUFDO0dBQ2Q7OztBQUdELEtBQUcsRUFBRSxhQUFTLEtBQUssRUFBYztBQUMvQixTQUFLLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQzs7QUFFbEMsUUFBSSxPQUFPLE9BQU8sS0FBSyxXQUFXLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxFQUFFO0FBQy9FLFVBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDckMsVUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTs7QUFDcEIsY0FBTSxHQUFHLEtBQUssQ0FBQztPQUNoQjs7d0NBUG1CLE9BQU87QUFBUCxlQUFPOzs7QUFRM0IsYUFBTyxDQUFDLE1BQU0sT0FBQyxDQUFmLE9BQU8sRUFBWSxPQUFPLENBQUMsQ0FBQztLQUM3QjtHQUNGO0NBQ0YsQ0FBQzs7cUJBRWEsTUFBTTs7Ozs7Ozs7Ozs7cUJDakNOLFVBQVMsVUFBVSxFQUFFOztBQUVsQyxNQUFJLElBQUksR0FBRyxPQUFPLE1BQU0sS0FBSyxXQUFXLEdBQUcsTUFBTSxHQUFHLE1BQU07TUFDdEQsV0FBVyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7O0FBRWxDLFlBQVUsQ0FBQyxVQUFVLEdBQUcsWUFBVztBQUNqQyxRQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssVUFBVSxFQUFFO0FBQ2xDLFVBQUksQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO0tBQy9CO0FBQ0QsV0FBTyxVQUFVLENBQUM7R0FDbkIsQ0FBQztDQUNIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3FCQ1pzQixTQUFTOztJQUFwQixLQUFLOzt5QkFDSyxhQUFhOzs7O29CQUM4QixRQUFROztBQUVsRSxTQUFTLGFBQWEsQ0FBQyxZQUFZLEVBQUU7QUFDMUMsTUFBTSxnQkFBZ0IsR0FBRyxZQUFZLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7TUFDdkQsZUFBZSwwQkFBb0IsQ0FBQzs7QUFFMUMsTUFBSSxnQkFBZ0IsS0FBSyxlQUFlLEVBQUU7QUFDeEMsUUFBSSxnQkFBZ0IsR0FBRyxlQUFlLEVBQUU7QUFDdEMsVUFBTSxlQUFlLEdBQUcsdUJBQWlCLGVBQWUsQ0FBQztVQUNuRCxnQkFBZ0IsR0FBRyx1QkFBaUIsZ0JBQWdCLENBQUMsQ0FBQztBQUM1RCxZQUFNLDJCQUFjLHlGQUF5RixHQUN2RyxxREFBcUQsR0FBRyxlQUFlLEdBQUcsbURBQW1ELEdBQUcsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDaEssTUFBTTs7QUFFTCxZQUFNLDJCQUFjLHdGQUF3RixHQUN0RyxpREFBaUQsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDbkY7R0FDRjtDQUNGOztBQUVNLFNBQVMsUUFBUSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7O0FBRTFDLE1BQUksQ0FBQyxHQUFHLEVBQUU7QUFDUixVQUFNLDJCQUFjLG1DQUFtQyxDQUFDLENBQUM7R0FDMUQ7QUFDRCxNQUFJLENBQUMsWUFBWSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRTtBQUN2QyxVQUFNLDJCQUFjLDJCQUEyQixHQUFHLE9BQU8sWUFBWSxDQUFDLENBQUM7R0FDeEU7O0FBRUQsY0FBWSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQzs7OztBQUlsRCxLQUFHLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRTVDLFdBQVMsb0JBQW9CLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDdkQsUUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFO0FBQ2hCLGFBQU8sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2xELFVBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNmLGVBQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO09BQ3ZCO0tBQ0Y7O0FBRUQsV0FBTyxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN0RSxRQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7O0FBRXhFLFFBQUksTUFBTSxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsT0FBTyxFQUFFO0FBQ2pDLGFBQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxlQUFlLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDekYsWUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztLQUMzRDtBQUNELFFBQUksTUFBTSxJQUFJLElBQUksRUFBRTtBQUNsQixVQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUU7QUFDbEIsWUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQixhQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzVDLGNBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDNUIsa0JBQU07V0FDUDs7QUFFRCxlQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdEM7QUFDRCxjQUFNLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUMzQjtBQUNELGFBQU8sTUFBTSxDQUFDO0tBQ2YsTUFBTTtBQUNMLFlBQU0sMkJBQWMsY0FBYyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEdBQUcsMERBQTBELENBQUMsQ0FBQztLQUNqSDtHQUNGOzs7QUFHRCxNQUFJLFNBQVMsR0FBRztBQUNkLFVBQU0sRUFBRSxnQkFBUyxHQUFHLEVBQUUsSUFBSSxFQUFFO0FBQzFCLFVBQUksRUFBRSxJQUFJLElBQUksR0FBRyxDQUFBLEFBQUMsRUFBRTtBQUNsQixjQUFNLDJCQUFjLEdBQUcsR0FBRyxJQUFJLEdBQUcsbUJBQW1CLEdBQUcsR0FBRyxDQUFDLENBQUM7T0FDN0Q7QUFDRCxhQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNsQjtBQUNELFVBQU0sRUFBRSxnQkFBUyxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQzdCLFVBQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDMUIsV0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUM1QixZQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxFQUFFO0FBQ3hDLGlCQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUN4QjtPQUNGO0tBQ0Y7QUFDRCxVQUFNLEVBQUUsZ0JBQVMsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUNqQyxhQUFPLE9BQU8sT0FBTyxLQUFLLFVBQVUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLE9BQU8sQ0FBQztLQUN4RTs7QUFFRCxvQkFBZ0IsRUFBRSxLQUFLLENBQUMsZ0JBQWdCO0FBQ3hDLGlCQUFhLEVBQUUsb0JBQW9COztBQUVuQyxNQUFFLEVBQUUsWUFBUyxDQUFDLEVBQUU7QUFDZCxVQUFJLEdBQUcsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUIsU0FBRyxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ3ZDLGFBQU8sR0FBRyxDQUFDO0tBQ1o7O0FBRUQsWUFBUSxFQUFFLEVBQUU7QUFDWixXQUFPLEVBQUUsaUJBQVMsQ0FBQyxFQUFFLElBQUksRUFBRSxtQkFBbUIsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFO0FBQ25FLFVBQUksY0FBYyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1VBQ2pDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BCLFVBQUksSUFBSSxJQUFJLE1BQU0sSUFBSSxXQUFXLElBQUksbUJBQW1CLEVBQUU7QUFDeEQsc0JBQWMsR0FBRyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLG1CQUFtQixFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztPQUMzRixNQUFNLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDMUIsc0JBQWMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO09BQzlEO0FBQ0QsYUFBTyxjQUFjLENBQUM7S0FDdkI7O0FBRUQsUUFBSSxFQUFFLGNBQVMsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUMzQixhQUFPLEtBQUssSUFBSSxLQUFLLEVBQUUsRUFBRTtBQUN2QixhQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQztPQUN2QjtBQUNELGFBQU8sS0FBSyxDQUFDO0tBQ2Q7QUFDRCxTQUFLLEVBQUUsZUFBUyxLQUFLLEVBQUUsTUFBTSxFQUFFO0FBQzdCLFVBQUksR0FBRyxHQUFHLEtBQUssSUFBSSxNQUFNLENBQUM7O0FBRTFCLFVBQUksS0FBSyxJQUFJLE1BQU0sSUFBSyxLQUFLLEtBQUssTUFBTSxBQUFDLEVBQUU7QUFDekMsV0FBRyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztPQUN2Qzs7QUFFRCxhQUFPLEdBQUcsQ0FBQztLQUNaOztBQUVELFFBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUk7QUFDakIsZ0JBQVksRUFBRSxZQUFZLENBQUMsUUFBUTtHQUNwQyxDQUFDOztBQUVGLFdBQVMsR0FBRyxDQUFDLE9BQU8sRUFBZ0I7UUFBZCxPQUFPLHlEQUFHLEVBQUU7O0FBQ2hDLFFBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7O0FBRXhCLE9BQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDcEIsUUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLElBQUksWUFBWSxDQUFDLE9BQU8sRUFBRTtBQUM1QyxVQUFJLEdBQUcsUUFBUSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztLQUNoQztBQUNELFFBQUksTUFBTSxZQUFBO1FBQ04sV0FBVyxHQUFHLFlBQVksQ0FBQyxjQUFjLEdBQUcsRUFBRSxHQUFHLFNBQVMsQ0FBQztBQUMvRCxRQUFJLFlBQVksQ0FBQyxTQUFTLEVBQUU7QUFDMUIsVUFBSSxPQUFPLENBQUMsTUFBTSxFQUFFO0FBQ2xCLGNBQU0sR0FBRyxPQUFPLEtBQUssT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztPQUM1RixNQUFNO0FBQ0wsY0FBTSxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7T0FDcEI7S0FDRjs7QUFFRCxhQUFTLElBQUksQ0FBQyxPQUFPLGdCQUFlO0FBQ2xDLGFBQU8sRUFBRSxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztLQUNySDtBQUNELFFBQUksR0FBRyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxDQUFDLE1BQU0sSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3RHLFdBQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztHQUMvQjtBQUNELEtBQUcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDOztBQUVqQixLQUFHLENBQUMsTUFBTSxHQUFHLFVBQVMsT0FBTyxFQUFFO0FBQzdCLFFBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFO0FBQ3BCLGVBQVMsQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFbEUsVUFBSSxZQUFZLENBQUMsVUFBVSxFQUFFO0FBQzNCLGlCQUFTLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7T0FDdEU7QUFDRCxVQUFJLFlBQVksQ0FBQyxVQUFVLElBQUksWUFBWSxDQUFDLGFBQWEsRUFBRTtBQUN6RCxpQkFBUyxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO09BQzVFO0tBQ0YsTUFBTTtBQUNMLGVBQVMsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUNwQyxlQUFTLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDdEMsZUFBUyxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDO0tBQzNDO0dBQ0YsQ0FBQzs7QUFFRixLQUFHLENBQUMsTUFBTSxHQUFHLFVBQVMsQ0FBQyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFO0FBQ2xELFFBQUksWUFBWSxDQUFDLGNBQWMsSUFBSSxDQUFDLFdBQVcsRUFBRTtBQUMvQyxZQUFNLDJCQUFjLHdCQUF3QixDQUFDLENBQUM7S0FDL0M7QUFDRCxRQUFJLFlBQVksQ0FBQyxTQUFTLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDckMsWUFBTSwyQkFBYyx5QkFBeUIsQ0FBQyxDQUFDO0tBQ2hEOztBQUVELFdBQU8sV0FBVyxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0dBQ2pGLENBQUM7QUFDRixTQUFPLEdBQUcsQ0FBQztDQUNaOztBQUVNLFNBQVMsV0FBVyxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxtQkFBbUIsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFO0FBQzVGLFdBQVMsSUFBSSxDQUFDLE9BQU8sRUFBZ0I7UUFBZCxPQUFPLHlEQUFHLEVBQUU7O0FBQ2pDLFFBQUksYUFBYSxHQUFHLE1BQU0sQ0FBQztBQUMzQixRQUFJLE1BQU0sSUFBSSxPQUFPLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQ25DLG1CQUFhLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDMUM7O0FBRUQsV0FBTyxFQUFFLENBQUMsU0FBUyxFQUNmLE9BQU8sRUFDUCxTQUFTLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxRQUFRLEVBQ3JDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxFQUNwQixXQUFXLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUN4RCxhQUFhLENBQUMsQ0FBQztHQUNwQjs7QUFFRCxNQUFJLEdBQUcsaUJBQWlCLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQzs7QUFFekUsTUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7QUFDakIsTUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDeEMsTUFBSSxDQUFDLFdBQVcsR0FBRyxtQkFBbUIsSUFBSSxDQUFDLENBQUM7QUFDNUMsU0FBTyxJQUFJLENBQUM7Q0FDYjs7QUFFTSxTQUFTLGNBQWMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUN4RCxNQUFJLENBQUMsT0FBTyxFQUFFO0FBQ1osUUFBSSxPQUFPLENBQUMsSUFBSSxLQUFLLGdCQUFnQixFQUFFO0FBQ3JDLGFBQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0tBQ3pDLE1BQU07QUFDTCxhQUFPLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDMUM7R0FDRixNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRTs7QUFFekMsV0FBTyxDQUFDLElBQUksR0FBRyxPQUFPLENBQUM7QUFDdkIsV0FBTyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7R0FDckM7QUFDRCxTQUFPLE9BQU8sQ0FBQztDQUNoQjs7QUFFTSxTQUFTLGFBQWEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUN2RCxTQUFPLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztBQUN2QixNQUFJLE9BQU8sQ0FBQyxHQUFHLEVBQUU7QUFDZixXQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO0dBQ3ZFOztBQUVELE1BQUksWUFBWSxZQUFBLENBQUM7QUFDakIsTUFBSSxPQUFPLENBQUMsRUFBRSxJQUFJLE9BQU8sQ0FBQyxFQUFFLEtBQUssSUFBSSxFQUFFO0FBQ3JDLFdBQU8sQ0FBQyxJQUFJLEdBQUcsa0JBQVksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pDLGdCQUFZLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUUxRCxRQUFJLFlBQVksQ0FBQyxRQUFRLEVBQUU7QUFDekIsYUFBTyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUM5RTtHQUNGOztBQUVELE1BQUksT0FBTyxLQUFLLFNBQVMsSUFBSSxZQUFZLEVBQUU7QUFDekMsV0FBTyxHQUFHLFlBQVksQ0FBQztHQUN4Qjs7QUFFRCxNQUFJLE9BQU8sS0FBSyxTQUFTLEVBQUU7QUFDekIsVUFBTSwyQkFBYyxjQUFjLEdBQUcsT0FBTyxDQUFDLElBQUksR0FBRyxxQkFBcUIsQ0FBQyxDQUFDO0dBQzVFLE1BQU0sSUFBSSxPQUFPLFlBQVksUUFBUSxFQUFFO0FBQ3RDLFdBQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztHQUNsQztDQUNGOztBQUVNLFNBQVMsSUFBSSxHQUFHO0FBQUUsU0FBTyxFQUFFLENBQUM7Q0FBRTs7QUFFckMsU0FBUyxRQUFRLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRTtBQUMvQixNQUFJLENBQUMsSUFBSSxJQUFJLEVBQUUsTUFBTSxJQUFJLElBQUksQ0FBQSxBQUFDLEVBQUU7QUFDOUIsUUFBSSxHQUFHLElBQUksR0FBRyxrQkFBWSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDckMsUUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUM7R0FDckI7QUFDRCxTQUFPLElBQUksQ0FBQztDQUNiOztBQUVELFNBQVMsaUJBQWlCLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7QUFDekUsTUFBSSxFQUFFLENBQUMsU0FBUyxFQUFFO0FBQ2hCLFFBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNmLFFBQUksR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUM1RixTQUFLLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztHQUMzQjtBQUNELFNBQU8sSUFBSSxDQUFDO0NBQ2I7Ozs7Ozs7O0FDM1FELFNBQVMsVUFBVSxDQUFDLE1BQU0sRUFBRTtBQUMxQixNQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztDQUN0Qjs7QUFFRCxVQUFVLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxZQUFXO0FBQ3ZFLFNBQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7Q0FDekIsQ0FBQzs7cUJBRWEsVUFBVTs7Ozs7Ozs7Ozs7Ozs7O0FDVHpCLElBQU0sTUFBTSxHQUFHO0FBQ2IsS0FBRyxFQUFFLE9BQU87QUFDWixLQUFHLEVBQUUsTUFBTTtBQUNYLEtBQUcsRUFBRSxNQUFNO0FBQ1gsS0FBRyxFQUFFLFFBQVE7QUFDYixLQUFHLEVBQUUsUUFBUTtBQUNiLEtBQUcsRUFBRSxRQUFRO0FBQ2IsS0FBRyxFQUFFLFFBQVE7Q0FDZCxDQUFDOztBQUVGLElBQU0sUUFBUSxHQUFHLFlBQVk7SUFDdkIsUUFBUSxHQUFHLFdBQVcsQ0FBQzs7QUFFN0IsU0FBUyxVQUFVLENBQUMsR0FBRyxFQUFFO0FBQ3ZCLFNBQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQ3BCOztBQUVNLFNBQVMsTUFBTSxDQUFDLEdBQUcsb0JBQW1CO0FBQzNDLE9BQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3pDLFNBQUssSUFBSSxHQUFHLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQzVCLFVBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRTtBQUMzRCxXQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO09BQzlCO0tBQ0Y7R0FDRjs7QUFFRCxTQUFPLEdBQUcsQ0FBQztDQUNaOztBQUVNLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDOzs7Ozs7QUFLaEQsSUFBSSxVQUFVLEdBQUcsb0JBQVMsS0FBSyxFQUFFO0FBQy9CLFNBQU8sT0FBTyxLQUFLLEtBQUssVUFBVSxDQUFDO0NBQ3BDLENBQUM7OztBQUdGLElBQUksVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0FBQ25CLFVBSU0sVUFBVSxHQUpoQixVQUFVLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDM0IsV0FBTyxPQUFPLEtBQUssS0FBSyxVQUFVLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxtQkFBbUIsQ0FBQztHQUNwRixDQUFDO0NBQ0g7UUFDTyxVQUFVLEdBQVYsVUFBVTs7Ozs7QUFJWCxJQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxJQUFJLFVBQVMsS0FBSyxFQUFFO0FBQ3RELFNBQU8sQUFBQyxLQUFLLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxHQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO0NBQ2pHLENBQUM7Ozs7O0FBR0ssU0FBUyxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNwQyxPQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ2hELFFBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssRUFBRTtBQUN0QixhQUFPLENBQUMsQ0FBQztLQUNWO0dBQ0Y7QUFDRCxTQUFPLENBQUMsQ0FBQyxDQUFDO0NBQ1g7O0FBR00sU0FBUyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7QUFDdkMsTUFBSSxPQUFPLE1BQU0sS0FBSyxRQUFRLEVBQUU7O0FBRTlCLFFBQUksTUFBTSxJQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7QUFDM0IsYUFBTyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7S0FDeEIsTUFBTSxJQUFJLE1BQU0sSUFBSSxJQUFJLEVBQUU7QUFDekIsYUFBTyxFQUFFLENBQUM7S0FDWCxNQUFNLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDbEIsYUFBTyxNQUFNLEdBQUcsRUFBRSxDQUFDO0tBQ3BCOzs7OztBQUtELFVBQU0sR0FBRyxFQUFFLEdBQUcsTUFBTSxDQUFDO0dBQ3RCOztBQUVELE1BQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQUUsV0FBTyxNQUFNLENBQUM7R0FBRTtBQUM5QyxTQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0NBQzdDOztBQUVNLFNBQVMsT0FBTyxDQUFDLEtBQUssRUFBRTtBQUM3QixNQUFJLENBQUMsS0FBSyxJQUFJLEtBQUssS0FBSyxDQUFDLEVBQUU7QUFDekIsV0FBTyxJQUFJLENBQUM7R0FDYixNQUFNLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQy9DLFdBQU8sSUFBSSxDQUFDO0dBQ2IsTUFBTTtBQUNMLFdBQU8sS0FBSyxDQUFDO0dBQ2Q7Q0FDRjs7QUFFTSxTQUFTLFdBQVcsQ0FBQyxNQUFNLEVBQUU7QUFDbEMsTUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUMvQixPQUFLLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztBQUN2QixTQUFPLEtBQUssQ0FBQztDQUNkOztBQUVNLFNBQVMsV0FBVyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUU7QUFDdkMsUUFBTSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7QUFDbEIsU0FBTyxNQUFNLENBQUM7Q0FDZjs7QUFFTSxTQUFTLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxFQUFFLEVBQUU7QUFDakQsU0FBTyxDQUFDLFdBQVcsR0FBRyxXQUFXLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQSxHQUFJLEVBQUUsQ0FBQztDQUNwRDs7OztBQzNHRDtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxL1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN4d0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3pnQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0JBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdE5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1pBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BaQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDck1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdktBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3R1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3I1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNsNUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3RFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdqQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDclFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcFdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25JQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNVBBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdmZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwibW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgY3Jvc3NEb21haW46IHRydWUsXHJcbiAgdGFyZ2V0OiAnI2FwcC13cmFwcGVyJyxcclxuICBzdmdTcHJpdGVQYXRoOiAnY3NzL3N2Zy8nLFxyXG4gIHN2Z1Nwcml0ZXM6IFsnZmEtaWNvbnMuc3ZnJywgJ21hdGVyaWFsLWljb25zLnN2ZycsICdtaXNjZWxsYW5lb3VzLnN2ZycsICdjdXN0b20uc3ZnJ10sXHJcbiAgYnJlYWtQb2ludHM6IHtcclxuICAgIHhzOiBbMjQwLCAzMjBdLFxyXG4gICAgczogWzMyMCwgMzIwXSxcclxuICAgIG06IFs1MDAsIDUwMF0sXHJcbiAgICBsOiBbNzY4LCA1MDBdXHJcbiAgfSxcclxuICBicmVha1BvaW50c1ByZWZpeDogJ28tbWVkaWEnLFxyXG4gIGRlZmF1bHRDb250cm9sczogW1xyXG4gICAge1xyXG4gICAgICBcIm5hbWVcIjogXCJzY2FsZWxpbmVcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJuYW1lXCI6IFwiem9vbVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcIm5hbWVcIjogXCJyb3RhdGVcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJuYW1lXCI6IFwiYXR0cmlidXRpb25cIlxyXG4gICAgfVxyXG4gIF1cclxufVxyXG4iLCJ2YXIgY29udHJvbHMgPSB7fTtcclxuY29udHJvbHMuZ2VvcG9zaXRpb24gPSByZXF1aXJlKCcuLi9zcmMvZ2VvcG9zaXRpb24nKTtcclxuY29udHJvbHMubWFwbWVudSA9IHJlcXVpcmUoJy4uL3NyYy9tYXBtZW51Jyk7XHJcbmNvbnRyb2xzLnByaW50ID0gcmVxdWlyZSgnLi4vc3JjL3ByaW50Jyk7XHJcbmNvbnRyb2xzLnNoYXJlbWFwID0gcmVxdWlyZSgnLi4vc3JjL3NoYXJlbWFwJyk7XHJcbmNvbnRyb2xzLmxlZ2VuZCA9IHJlcXVpcmUoJy4uL3NyYy9sZWdlbmQnKTtcclxuY29udHJvbHMuc2VhcmNoID0gcmVxdWlyZSgnLi4vc3JjL3NlYXJjaCcpO1xyXG5jb250cm9scy5lZGl0b3IgPSByZXF1aXJlKCcuLi9zcmMvZWRpdG9yJyk7XHJcbmNvbnRyb2xzLmhvbWUgPSByZXF1aXJlKCcuLi9zcmMvaG9tZScpO1xyXG5jb250cm9scy5tZWFzdXJlID0gcmVxdWlyZSgnLi4vc3JjL21lYXN1cmUnKTtcclxuY29udHJvbHMuYWJvdXQgPSByZXF1aXJlKCcuLi9zcmMvYWJvdXQnKTtcclxuY29udHJvbHMuc2NhbGUgPSByZXF1aXJlKCcuLi9zcmMvc2NhbGUnKTtcclxuY29udHJvbHMub2ZmbGluZSA9IHJlcXVpcmUoJy4uL3NyYy9vZmZsaW5lJyk7XHJcbmNvbnRyb2xzLmxpbmsgPSByZXF1aXJlKCcuLi9zcmMvbGluaycpO1xyXG5jb250cm9scy5zY2FsZWxpbmUgPSByZXF1aXJlKCcuLi9zcmMvc2NhbGVsaW5lJyk7XHJcbmNvbnRyb2xzLnpvb20gPSByZXF1aXJlKCcuLi9zcmMvem9vbScpO1xyXG5jb250cm9scy5yb3RhdGUgPSByZXF1aXJlKCcuLi9zcmMvcm90YXRlJyk7XHJcbmNvbnRyb2xzLmF0dHJpYnV0aW9uID0gcmVxdWlyZSgnLi4vc3JjL2F0dHJpYnV0aW9uJyk7XHJcbmNvbnRyb2xzLmZ1bGxzY3JlZW4gPSByZXF1aXJlKCcuLi9zcmMvZnVsbHNjcmVlbicpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBjb250cm9scztcclxuIiwiXCJmdW5jdGlvblwiIT09dHlwZW9mIE9iamVjdC5jcmVhdGUmJihPYmplY3QuY3JlYXRlPWZ1bmN0aW9uKGYpe2Z1bmN0aW9uIGcoKXt9Zy5wcm90b3R5cGU9ZjtyZXR1cm4gbmV3IGd9KTtcclxuKGZ1bmN0aW9uKGYsZyxrKXt2YXIgbD17aW5pdDpmdW5jdGlvbihhLGIpe3RoaXMuJGVsZW09ZihiKTt0aGlzLm9wdGlvbnM9Zi5leHRlbmQoe30sZi5mbi5vd2xDYXJvdXNlbC5vcHRpb25zLHRoaXMuJGVsZW0uZGF0YSgpLGEpO3RoaXMudXNlck9wdGlvbnM9YTt0aGlzLmxvYWRDb250ZW50KCl9LGxvYWRDb250ZW50OmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXt2YXIgZCxlPVwiXCI7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGIub3B0aW9ucy5qc29uU3VjY2VzcyliLm9wdGlvbnMuanNvblN1Y2Nlc3MuYXBwbHkodGhpcyxbYV0pO2Vsc2V7Zm9yKGQgaW4gYS5vd2wpYS5vd2wuaGFzT3duUHJvcGVydHkoZCkmJihlKz1hLm93bFtkXS5pdGVtKTtiLiRlbGVtLmh0bWwoZSl9Yi5sb2dJbigpfXZhciBiPXRoaXMsZTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgYi5vcHRpb25zLmJlZm9yZUluaXQmJmIub3B0aW9ucy5iZWZvcmVJbml0LmFwcGx5KHRoaXMsW2IuJGVsZW1dKTtcInN0cmluZ1wiPT09dHlwZW9mIGIub3B0aW9ucy5qc29uUGF0aD9cclxuKGU9Yi5vcHRpb25zLmpzb25QYXRoLGYuZ2V0SlNPTihlLGEpKTpiLmxvZ0luKCl9LGxvZ0luOmZ1bmN0aW9uKCl7dGhpcy4kZWxlbS5kYXRhKFwib3dsLW9yaWdpbmFsU3R5bGVzXCIsdGhpcy4kZWxlbS5hdHRyKFwic3R5bGVcIikpO3RoaXMuJGVsZW0uZGF0YShcIm93bC1vcmlnaW5hbENsYXNzZXNcIix0aGlzLiRlbGVtLmF0dHIoXCJjbGFzc1wiKSk7dGhpcy4kZWxlbS5jc3Moe29wYWNpdHk6MH0pO3RoaXMub3JpZ25hbEl0ZW1zPXRoaXMub3B0aW9ucy5pdGVtczt0aGlzLmNoZWNrQnJvd3NlcigpO3RoaXMud3JhcHBlcldpZHRoPTA7dGhpcy5jaGVja1Zpc2libGU9bnVsbDt0aGlzLnNldFZhcnMoKX0sc2V0VmFyczpmdW5jdGlvbigpe2lmKDA9PT10aGlzLiRlbGVtLmNoaWxkcmVuKCkubGVuZ3RoKXJldHVybiExO3RoaXMuYmFzZUNsYXNzKCk7dGhpcy5ldmVudFR5cGVzKCk7dGhpcy4kdXNlckl0ZW1zPXRoaXMuJGVsZW0uY2hpbGRyZW4oKTt0aGlzLml0ZW1zQW1vdW50PXRoaXMuJHVzZXJJdGVtcy5sZW5ndGg7XHJcbnRoaXMud3JhcEl0ZW1zKCk7dGhpcy4kb3dsSXRlbXM9dGhpcy4kZWxlbS5maW5kKFwiLm93bC1pdGVtXCIpO3RoaXMuJG93bFdyYXBwZXI9dGhpcy4kZWxlbS5maW5kKFwiLm93bC13cmFwcGVyXCIpO3RoaXMucGxheURpcmVjdGlvbj1cIm5leHRcIjt0aGlzLnByZXZJdGVtPTA7dGhpcy5wcmV2QXJyPVswXTt0aGlzLmN1cnJlbnRJdGVtPTA7dGhpcy5jdXN0b21FdmVudHMoKTt0aGlzLm9uU3RhcnR1cCgpfSxvblN0YXJ0dXA6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZUl0ZW1zKCk7dGhpcy5jYWxjdWxhdGVBbGwoKTt0aGlzLmJ1aWxkQ29udHJvbHMoKTt0aGlzLnVwZGF0ZUNvbnRyb2xzKCk7dGhpcy5yZXNwb25zZSgpO3RoaXMubW92ZUV2ZW50cygpO3RoaXMuc3RvcE9uSG92ZXIoKTt0aGlzLm93bFN0YXR1cygpOyExIT09dGhpcy5vcHRpb25zLnRyYW5zaXRpb25TdHlsZSYmdGhpcy50cmFuc2l0aW9uVHlwZXModGhpcy5vcHRpb25zLnRyYW5zaXRpb25TdHlsZSk7ITA9PT10aGlzLm9wdGlvbnMuYXV0b1BsYXkmJlxyXG4odGhpcy5vcHRpb25zLmF1dG9QbGF5PTVFMyk7dGhpcy5wbGF5KCk7dGhpcy4kZWxlbS5maW5kKFwiLm93bC13cmFwcGVyXCIpLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpO3RoaXMuJGVsZW0uaXMoXCI6dmlzaWJsZVwiKT90aGlzLiRlbGVtLmNzcyhcIm9wYWNpdHlcIiwxKTp0aGlzLndhdGNoVmlzaWJpbGl0eSgpO3RoaXMub25zdGFydHVwPSExO3RoaXMuZWFjaE1vdmVVcGRhdGUoKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgdGhpcy5vcHRpb25zLmFmdGVySW5pdCYmdGhpcy5vcHRpb25zLmFmdGVySW5pdC5hcHBseSh0aGlzLFt0aGlzLiRlbGVtXSl9LGVhY2hNb3ZlVXBkYXRlOmZ1bmN0aW9uKCl7ITA9PT10aGlzLm9wdGlvbnMubGF6eUxvYWQmJnRoaXMubGF6eUxvYWQoKTshMD09PXRoaXMub3B0aW9ucy5hdXRvSGVpZ2h0JiZ0aGlzLmF1dG9IZWlnaHQoKTt0aGlzLm9uVmlzaWJsZUl0ZW1zKCk7XCJmdW5jdGlvblwiPT09dHlwZW9mIHRoaXMub3B0aW9ucy5hZnRlckFjdGlvbiYmdGhpcy5vcHRpb25zLmFmdGVyQWN0aW9uLmFwcGx5KHRoaXMsXHJcblt0aGlzLiRlbGVtXSl9LHVwZGF0ZVZhcnM6ZnVuY3Rpb24oKXtcImZ1bmN0aW9uXCI9PT10eXBlb2YgdGhpcy5vcHRpb25zLmJlZm9yZVVwZGF0ZSYmdGhpcy5vcHRpb25zLmJlZm9yZVVwZGF0ZS5hcHBseSh0aGlzLFt0aGlzLiRlbGVtXSk7dGhpcy53YXRjaFZpc2liaWxpdHkoKTt0aGlzLnVwZGF0ZUl0ZW1zKCk7dGhpcy5jYWxjdWxhdGVBbGwoKTt0aGlzLnVwZGF0ZVBvc2l0aW9uKCk7dGhpcy51cGRhdGVDb250cm9scygpO3RoaXMuZWFjaE1vdmVVcGRhdGUoKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgdGhpcy5vcHRpb25zLmFmdGVyVXBkYXRlJiZ0aGlzLm9wdGlvbnMuYWZ0ZXJVcGRhdGUuYXBwbHkodGhpcyxbdGhpcy4kZWxlbV0pfSxyZWxvYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2cuc2V0VGltZW91dChmdW5jdGlvbigpe2EudXBkYXRlVmFycygpfSwwKX0sd2F0Y2hWaXNpYmlsaXR5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighMT09PWEuJGVsZW0uaXMoXCI6dmlzaWJsZVwiKSlhLiRlbGVtLmNzcyh7b3BhY2l0eTowfSksXHJcbmcuY2xlYXJJbnRlcnZhbChhLmF1dG9QbGF5SW50ZXJ2YWwpLGcuY2xlYXJJbnRlcnZhbChhLmNoZWNrVmlzaWJsZSk7ZWxzZSByZXR1cm4hMTthLmNoZWNrVmlzaWJsZT1nLnNldEludGVydmFsKGZ1bmN0aW9uKCl7YS4kZWxlbS5pcyhcIjp2aXNpYmxlXCIpJiYoYS5yZWxvYWQoKSxhLiRlbGVtLmFuaW1hdGUoe29wYWNpdHk6MX0sMjAwKSxnLmNsZWFySW50ZXJ2YWwoYS5jaGVja1Zpc2libGUpKX0sNTAwKX0sd3JhcEl0ZW1zOmZ1bmN0aW9uKCl7dGhpcy4kdXNlckl0ZW1zLndyYXBBbGwoJzxkaXYgY2xhc3M9XCJvd2wtd3JhcHBlclwiPicpLndyYXAoJzxkaXYgY2xhc3M9XCJvd2wtaXRlbVwiPjwvZGl2PicpO3RoaXMuJGVsZW0uZmluZChcIi5vd2wtd3JhcHBlclwiKS53cmFwKCc8ZGl2IGNsYXNzPVwib3dsLXdyYXBwZXItb3V0ZXJcIj4nKTt0aGlzLndyYXBwZXJPdXRlcj10aGlzLiRlbGVtLmZpbmQoXCIub3dsLXdyYXBwZXItb3V0ZXJcIik7dGhpcy4kZWxlbS5jc3MoXCJkaXNwbGF5XCIsXCJibG9ja1wiKX0sXHJcbmJhc2VDbGFzczpmdW5jdGlvbigpe3ZhciBhPXRoaXMuJGVsZW0uaGFzQ2xhc3ModGhpcy5vcHRpb25zLmJhc2VDbGFzcyksYj10aGlzLiRlbGVtLmhhc0NsYXNzKHRoaXMub3B0aW9ucy50aGVtZSk7YXx8dGhpcy4kZWxlbS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuYmFzZUNsYXNzKTtifHx0aGlzLiRlbGVtLmFkZENsYXNzKHRoaXMub3B0aW9ucy50aGVtZSl9LHVwZGF0ZUl0ZW1zOmZ1bmN0aW9uKCl7dmFyIGEsYjtpZighMT09PXRoaXMub3B0aW9ucy5yZXNwb25zaXZlKXJldHVybiExO2lmKCEwPT09dGhpcy5vcHRpb25zLnNpbmdsZUl0ZW0pcmV0dXJuIHRoaXMub3B0aW9ucy5pdGVtcz10aGlzLm9yaWduYWxJdGVtcz0xLHRoaXMub3B0aW9ucy5pdGVtc0N1c3RvbT0hMSx0aGlzLm9wdGlvbnMuaXRlbXNEZXNrdG9wPSExLHRoaXMub3B0aW9ucy5pdGVtc0Rlc2t0b3BTbWFsbD0hMSx0aGlzLm9wdGlvbnMuaXRlbXNUYWJsZXQ9ITEsdGhpcy5vcHRpb25zLml0ZW1zVGFibGV0U21hbGw9XHJcbiExLHRoaXMub3B0aW9ucy5pdGVtc01vYmlsZT0hMTthPWYodGhpcy5vcHRpb25zLnJlc3BvbnNpdmVCYXNlV2lkdGgpLndpZHRoKCk7YT4odGhpcy5vcHRpb25zLml0ZW1zRGVza3RvcFswXXx8dGhpcy5vcmlnbmFsSXRlbXMpJiYodGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3JpZ25hbEl0ZW1zKTtpZighMSE9PXRoaXMub3B0aW9ucy5pdGVtc0N1c3RvbSlmb3IodGhpcy5vcHRpb25zLml0ZW1zQ3VzdG9tLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYVswXS1iWzBdfSksYj0wO2I8dGhpcy5vcHRpb25zLml0ZW1zQ3VzdG9tLmxlbmd0aDtiKz0xKXRoaXMub3B0aW9ucy5pdGVtc0N1c3RvbVtiXVswXTw9YSYmKHRoaXMub3B0aW9ucy5pdGVtcz10aGlzLm9wdGlvbnMuaXRlbXNDdXN0b21bYl1bMV0pO2Vsc2UgYTw9dGhpcy5vcHRpb25zLml0ZW1zRGVza3RvcFswXSYmITEhPT10aGlzLm9wdGlvbnMuaXRlbXNEZXNrdG9wJiYodGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3B0aW9ucy5pdGVtc0Rlc2t0b3BbMV0pLFxyXG5hPD10aGlzLm9wdGlvbnMuaXRlbXNEZXNrdG9wU21hbGxbMF0mJiExIT09dGhpcy5vcHRpb25zLml0ZW1zRGVza3RvcFNtYWxsJiYodGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3B0aW9ucy5pdGVtc0Rlc2t0b3BTbWFsbFsxXSksYTw9dGhpcy5vcHRpb25zLml0ZW1zVGFibGV0WzBdJiYhMSE9PXRoaXMub3B0aW9ucy5pdGVtc1RhYmxldCYmKHRoaXMub3B0aW9ucy5pdGVtcz10aGlzLm9wdGlvbnMuaXRlbXNUYWJsZXRbMV0pLGE8PXRoaXMub3B0aW9ucy5pdGVtc1RhYmxldFNtYWxsWzBdJiYhMSE9PXRoaXMub3B0aW9ucy5pdGVtc1RhYmxldFNtYWxsJiYodGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3B0aW9ucy5pdGVtc1RhYmxldFNtYWxsWzFdKSxhPD10aGlzLm9wdGlvbnMuaXRlbXNNb2JpbGVbMF0mJiExIT09dGhpcy5vcHRpb25zLml0ZW1zTW9iaWxlJiYodGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3B0aW9ucy5pdGVtc01vYmlsZVsxXSk7dGhpcy5vcHRpb25zLml0ZW1zPnRoaXMuaXRlbXNBbW91bnQmJlxyXG4hMD09PXRoaXMub3B0aW9ucy5pdGVtc1NjYWxlVXAmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5pdGVtc0Ftb3VudCl9LHJlc3BvbnNlOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiLGU7aWYoITAhPT1hLm9wdGlvbnMucmVzcG9uc2l2ZSlyZXR1cm4hMTtlPWYoZykud2lkdGgoKTthLnJlc2l6ZXI9ZnVuY3Rpb24oKXtmKGcpLndpZHRoKCkhPT1lJiYoITEhPT1hLm9wdGlvbnMuYXV0b1BsYXkmJmcuY2xlYXJJbnRlcnZhbChhLmF1dG9QbGF5SW50ZXJ2YWwpLGcuY2xlYXJUaW1lb3V0KGIpLGI9Zy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZT1mKGcpLndpZHRoKCk7YS51cGRhdGVWYXJzKCl9LGEub3B0aW9ucy5yZXNwb25zaXZlUmVmcmVzaFJhdGUpKX07ZihnKS5yZXNpemUoYS5yZXNpemVyKX0sdXBkYXRlUG9zaXRpb246ZnVuY3Rpb24oKXt0aGlzLmp1bXBUbyh0aGlzLmN1cnJlbnRJdGVtKTshMSE9PXRoaXMub3B0aW9ucy5hdXRvUGxheSYmdGhpcy5jaGVja0FwKCl9LGFwcGVuZEl0ZW1zU2l6ZXM6ZnVuY3Rpb24oKXt2YXIgYT1cclxudGhpcyxiPTAsZT1hLml0ZW1zQW1vdW50LWEub3B0aW9ucy5pdGVtczthLiRvd2xJdGVtcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPWYodGhpcyk7ZC5jc3Moe3dpZHRoOmEuaXRlbVdpZHRofSkuZGF0YShcIm93bC1pdGVtXCIsTnVtYmVyKGMpKTtpZigwPT09YyVhLm9wdGlvbnMuaXRlbXN8fGM9PT1lKWM+ZXx8KGIrPTEpO2QuZGF0YShcIm93bC1yb3VuZFBhZ2VzXCIsYil9KX0sYXBwZW5kV3JhcHBlclNpemVzOmZ1bmN0aW9uKCl7dGhpcy4kb3dsV3JhcHBlci5jc3Moe3dpZHRoOnRoaXMuJG93bEl0ZW1zLmxlbmd0aCp0aGlzLml0ZW1XaWR0aCoyLGxlZnQ6MH0pO3RoaXMuYXBwZW5kSXRlbXNTaXplcygpfSxjYWxjdWxhdGVBbGw6ZnVuY3Rpb24oKXt0aGlzLmNhbGN1bGF0ZVdpZHRoKCk7dGhpcy5hcHBlbmRXcmFwcGVyU2l6ZXMoKTt0aGlzLmxvb3BzKCk7dGhpcy5tYXgoKX0sY2FsY3VsYXRlV2lkdGg6ZnVuY3Rpb24oKXt0aGlzLml0ZW1XaWR0aD1NYXRoLnJvdW5kKHRoaXMuJGVsZW0ud2lkdGgoKS9cclxudGhpcy5vcHRpb25zLml0ZW1zKX0sbWF4OmZ1bmN0aW9uKCl7dmFyIGE9LTEqKHRoaXMuaXRlbXNBbW91bnQqdGhpcy5pdGVtV2lkdGgtdGhpcy5vcHRpb25zLml0ZW1zKnRoaXMuaXRlbVdpZHRoKTt0aGlzLm9wdGlvbnMuaXRlbXM+dGhpcy5pdGVtc0Ftb3VudD90aGlzLm1heGltdW1QaXhlbHM9YT10aGlzLm1heGltdW1JdGVtPTA6KHRoaXMubWF4aW11bUl0ZW09dGhpcy5pdGVtc0Ftb3VudC10aGlzLm9wdGlvbnMuaXRlbXMsdGhpcy5tYXhpbXVtUGl4ZWxzPWEpO3JldHVybiBhfSxtaW46ZnVuY3Rpb24oKXtyZXR1cm4gMH0sbG9vcHM6ZnVuY3Rpb24oKXt2YXIgYT0wLGI9MCxlLGM7dGhpcy5wb3NpdGlvbnNJbkFycmF5PVswXTt0aGlzLnBhZ2VzSW5BcnJheT1bXTtmb3IoZT0wO2U8dGhpcy5pdGVtc0Ftb3VudDtlKz0xKWIrPXRoaXMuaXRlbVdpZHRoLHRoaXMucG9zaXRpb25zSW5BcnJheS5wdXNoKC1iKSwhMD09PXRoaXMub3B0aW9ucy5zY3JvbGxQZXJQYWdlJiYoYz1mKHRoaXMuJG93bEl0ZW1zW2VdKSxcclxuYz1jLmRhdGEoXCJvd2wtcm91bmRQYWdlc1wiKSxjIT09YSYmKHRoaXMucGFnZXNJbkFycmF5W2FdPXRoaXMucG9zaXRpb25zSW5BcnJheVtlXSxhPWMpKX0sYnVpbGRDb250cm9sczpmdW5jdGlvbigpe2lmKCEwPT09dGhpcy5vcHRpb25zLm5hdmlnYXRpb258fCEwPT09dGhpcy5vcHRpb25zLnBhZ2luYXRpb24pdGhpcy5vd2xDb250cm9scz1mKCc8ZGl2IGNsYXNzPVwib3dsLWNvbnRyb2xzXCIvPicpLnRvZ2dsZUNsYXNzKFwiY2xpY2thYmxlXCIsIXRoaXMuYnJvd3Nlci5pc1RvdWNoKS5hcHBlbmRUbyh0aGlzLiRlbGVtKTshMD09PXRoaXMub3B0aW9ucy5wYWdpbmF0aW9uJiZ0aGlzLmJ1aWxkUGFnaW5hdGlvbigpOyEwPT09dGhpcy5vcHRpb25zLm5hdmlnYXRpb24mJnRoaXMuYnVpbGRCdXR0b25zKCl9LGJ1aWxkQnV0dG9uczpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1mKCc8ZGl2IGNsYXNzPVwib3dsLWJ1dHRvbnNcIi8+Jyk7YS5vd2xDb250cm9scy5hcHBlbmQoYik7YS5idXR0b25QcmV2PVxyXG5mKFwiPGRpdi8+XCIse1wiY2xhc3NcIjpcIm93bC1wcmV2XCIsaHRtbDphLm9wdGlvbnMubmF2aWdhdGlvblRleHRbMF18fFwiXCJ9KTthLmJ1dHRvbk5leHQ9ZihcIjxkaXYvPlwiLHtcImNsYXNzXCI6XCJvd2wtbmV4dFwiLGh0bWw6YS5vcHRpb25zLm5hdmlnYXRpb25UZXh0WzFdfHxcIlwifSk7Yi5hcHBlbmQoYS5idXR0b25QcmV2KS5hcHBlbmQoYS5idXR0b25OZXh0KTtiLm9uKFwidG91Y2hzdGFydC5vd2xDb250cm9scyBtb3VzZWRvd24ub3dsQ29udHJvbHNcIiwnZGl2W2NsYXNzXj1cIm93bFwiXScsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSk7Yi5vbihcInRvdWNoZW5kLm93bENvbnRyb2xzIG1vdXNldXAub3dsQ29udHJvbHNcIiwnZGl2W2NsYXNzXj1cIm93bFwiXScsZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpO2YodGhpcykuaGFzQ2xhc3MoXCJvd2wtbmV4dFwiKT9hLm5leHQoKTphLnByZXYoKX0pfSxidWlsZFBhZ2luYXRpb246ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EucGFnaW5hdGlvbldyYXBwZXI9XHJcbmYoJzxkaXYgY2xhc3M9XCJvd2wtcGFnaW5hdGlvblwiLz4nKTthLm93bENvbnRyb2xzLmFwcGVuZChhLnBhZ2luYXRpb25XcmFwcGVyKTthLnBhZ2luYXRpb25XcmFwcGVyLm9uKFwidG91Y2hlbmQub3dsQ29udHJvbHMgbW91c2V1cC5vd2xDb250cm9sc1wiLFwiLm93bC1wYWdlXCIsZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpO051bWJlcihmKHRoaXMpLmRhdGEoXCJvd2wtcGFnZVwiKSkhPT1hLmN1cnJlbnRJdGVtJiZhLmdvVG8oTnVtYmVyKGYodGhpcykuZGF0YShcIm93bC1wYWdlXCIpKSwhMCl9KX0sdXBkYXRlUGFnaW5hdGlvbjpmdW5jdGlvbigpe3ZhciBhLGIsZSxjLGQsZztpZighMT09PXRoaXMub3B0aW9ucy5wYWdpbmF0aW9uKXJldHVybiExO3RoaXMucGFnaW5hdGlvbldyYXBwZXIuaHRtbChcIlwiKTthPTA7Yj10aGlzLml0ZW1zQW1vdW50LXRoaXMuaXRlbXNBbW91bnQldGhpcy5vcHRpb25zLml0ZW1zO2ZvcihjPTA7Yzx0aGlzLml0ZW1zQW1vdW50O2MrPTEpMD09PWMldGhpcy5vcHRpb25zLml0ZW1zJiZcclxuKGErPTEsYj09PWMmJihlPXRoaXMuaXRlbXNBbW91bnQtdGhpcy5vcHRpb25zLml0ZW1zKSxkPWYoXCI8ZGl2Lz5cIix7XCJjbGFzc1wiOlwib3dsLXBhZ2VcIn0pLGc9ZihcIjxzcGFuPjwvc3Bhbj5cIix7dGV4dDohMD09PXRoaXMub3B0aW9ucy5wYWdpbmF0aW9uTnVtYmVycz9hOlwiXCIsXCJjbGFzc1wiOiEwPT09dGhpcy5vcHRpb25zLnBhZ2luYXRpb25OdW1iZXJzP1wib3dsLW51bWJlcnNcIjpcIlwifSksZC5hcHBlbmQoZyksZC5kYXRhKFwib3dsLXBhZ2VcIixiPT09Yz9lOmMpLGQuZGF0YShcIm93bC1yb3VuZFBhZ2VzXCIsYSksdGhpcy5wYWdpbmF0aW9uV3JhcHBlci5hcHBlbmQoZCkpO3RoaXMuY2hlY2tQYWdpbmF0aW9uKCl9LGNoZWNrUGFnaW5hdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7aWYoITE9PT1hLm9wdGlvbnMucGFnaW5hdGlvbilyZXR1cm4hMTthLnBhZ2luYXRpb25XcmFwcGVyLmZpbmQoXCIub3dsLXBhZ2VcIikuZWFjaChmdW5jdGlvbigpe2YodGhpcykuZGF0YShcIm93bC1yb3VuZFBhZ2VzXCIpPT09XHJcbmYoYS4kb3dsSXRlbXNbYS5jdXJyZW50SXRlbV0pLmRhdGEoXCJvd2wtcm91bmRQYWdlc1wiKSYmKGEucGFnaW5hdGlvbldyYXBwZXIuZmluZChcIi5vd2wtcGFnZVwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKSxmKHRoaXMpLmFkZENsYXNzKFwiYWN0aXZlXCIpKX0pfSxjaGVja05hdmlnYXRpb246ZnVuY3Rpb24oKXtpZighMT09PXRoaXMub3B0aW9ucy5uYXZpZ2F0aW9uKXJldHVybiExOyExPT09dGhpcy5vcHRpb25zLnJld2luZE5hdiYmKDA9PT10aGlzLmN1cnJlbnRJdGVtJiYwPT09dGhpcy5tYXhpbXVtSXRlbT8odGhpcy5idXR0b25QcmV2LmFkZENsYXNzKFwiZGlzYWJsZWRcIiksdGhpcy5idXR0b25OZXh0LmFkZENsYXNzKFwiZGlzYWJsZWRcIikpOjA9PT10aGlzLmN1cnJlbnRJdGVtJiYwIT09dGhpcy5tYXhpbXVtSXRlbT8odGhpcy5idXR0b25QcmV2LmFkZENsYXNzKFwiZGlzYWJsZWRcIiksdGhpcy5idXR0b25OZXh0LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIikpOnRoaXMuY3VycmVudEl0ZW09PT1cclxudGhpcy5tYXhpbXVtSXRlbT8odGhpcy5idXR0b25QcmV2LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIiksdGhpcy5idXR0b25OZXh0LmFkZENsYXNzKFwiZGlzYWJsZWRcIikpOjAhPT10aGlzLmN1cnJlbnRJdGVtJiZ0aGlzLmN1cnJlbnRJdGVtIT09dGhpcy5tYXhpbXVtSXRlbSYmKHRoaXMuYnV0dG9uUHJldi5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpLHRoaXMuYnV0dG9uTmV4dC5yZW1vdmVDbGFzcyhcImRpc2FibGVkXCIpKSl9LHVwZGF0ZUNvbnRyb2xzOmZ1bmN0aW9uKCl7dGhpcy51cGRhdGVQYWdpbmF0aW9uKCk7dGhpcy5jaGVja05hdmlnYXRpb24oKTt0aGlzLm93bENvbnRyb2xzJiYodGhpcy5vcHRpb25zLml0ZW1zPj10aGlzLml0ZW1zQW1vdW50P3RoaXMub3dsQ29udHJvbHMuaGlkZSgpOnRoaXMub3dsQ29udHJvbHMuc2hvdygpKX0sZGVzdHJveUNvbnRyb2xzOmZ1bmN0aW9uKCl7dGhpcy5vd2xDb250cm9scyYmdGhpcy5vd2xDb250cm9scy5yZW1vdmUoKX0sbmV4dDpmdW5jdGlvbihhKXtpZih0aGlzLmlzVHJhbnNpdGlvbilyZXR1cm4hMTtcclxudGhpcy5jdXJyZW50SXRlbSs9ITA9PT10aGlzLm9wdGlvbnMuc2Nyb2xsUGVyUGFnZT90aGlzLm9wdGlvbnMuaXRlbXM6MTtpZih0aGlzLmN1cnJlbnRJdGVtPnRoaXMubWF4aW11bUl0ZW0rKCEwPT09dGhpcy5vcHRpb25zLnNjcm9sbFBlclBhZ2U/dGhpcy5vcHRpb25zLml0ZW1zLTE6MCkpaWYoITA9PT10aGlzLm9wdGlvbnMucmV3aW5kTmF2KXRoaXMuY3VycmVudEl0ZW09MCxhPVwicmV3aW5kXCI7ZWxzZSByZXR1cm4gdGhpcy5jdXJyZW50SXRlbT10aGlzLm1heGltdW1JdGVtLCExO3RoaXMuZ29Ubyh0aGlzLmN1cnJlbnRJdGVtLGEpfSxwcmV2OmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNUcmFuc2l0aW9uKXJldHVybiExO3RoaXMuY3VycmVudEl0ZW09ITA9PT10aGlzLm9wdGlvbnMuc2Nyb2xsUGVyUGFnZSYmMDx0aGlzLmN1cnJlbnRJdGVtJiZ0aGlzLmN1cnJlbnRJdGVtPHRoaXMub3B0aW9ucy5pdGVtcz8wOnRoaXMuY3VycmVudEl0ZW0tKCEwPT09dGhpcy5vcHRpb25zLnNjcm9sbFBlclBhZ2U/XHJcbnRoaXMub3B0aW9ucy5pdGVtczoxKTtpZigwPnRoaXMuY3VycmVudEl0ZW0paWYoITA9PT10aGlzLm9wdGlvbnMucmV3aW5kTmF2KXRoaXMuY3VycmVudEl0ZW09dGhpcy5tYXhpbXVtSXRlbSxhPVwicmV3aW5kXCI7ZWxzZSByZXR1cm4gdGhpcy5jdXJyZW50SXRlbT0wLCExO3RoaXMuZ29Ubyh0aGlzLmN1cnJlbnRJdGVtLGEpfSxnb1RvOmZ1bmN0aW9uKGEsYixlKXt2YXIgYz10aGlzO2lmKGMuaXNUcmFuc2l0aW9uKXJldHVybiExO1wiZnVuY3Rpb25cIj09PXR5cGVvZiBjLm9wdGlvbnMuYmVmb3JlTW92ZSYmYy5vcHRpb25zLmJlZm9yZU1vdmUuYXBwbHkodGhpcyxbYy4kZWxlbV0pO2E+PWMubWF4aW11bUl0ZW0/YT1jLm1heGltdW1JdGVtOjA+PWEmJihhPTApO2MuY3VycmVudEl0ZW09Yy5vd2wuY3VycmVudEl0ZW09YTtpZighMSE9PWMub3B0aW9ucy50cmFuc2l0aW9uU3R5bGUmJlwiZHJhZ1wiIT09ZSYmMT09PWMub3B0aW9ucy5pdGVtcyYmITA9PT1jLmJyb3dzZXIuc3VwcG9ydDNkKXJldHVybiBjLnN3YXBTcGVlZCgwKSxcclxuITA9PT1jLmJyb3dzZXIuc3VwcG9ydDNkP2MudHJhbnNpdGlvbjNkKGMucG9zaXRpb25zSW5BcnJheVthXSk6Yy5jc3Myc2xpZGUoYy5wb3NpdGlvbnNJbkFycmF5W2FdLDEpLGMuYWZ0ZXJHbygpLGMuc2luZ2xlSXRlbVRyYW5zaXRpb24oKSwhMTthPWMucG9zaXRpb25zSW5BcnJheVthXTshMD09PWMuYnJvd3Nlci5zdXBwb3J0M2Q/KGMuaXNDc3MzRmluaXNoPSExLCEwPT09Yj8oYy5zd2FwU3BlZWQoXCJwYWdpbmF0aW9uU3BlZWRcIiksZy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5pc0NzczNGaW5pc2g9ITB9LGMub3B0aW9ucy5wYWdpbmF0aW9uU3BlZWQpKTpcInJld2luZFwiPT09Yj8oYy5zd2FwU3BlZWQoYy5vcHRpb25zLnJld2luZFNwZWVkKSxnLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmlzQ3NzM0ZpbmlzaD0hMH0sYy5vcHRpb25zLnJld2luZFNwZWVkKSk6KGMuc3dhcFNwZWVkKFwic2xpZGVTcGVlZFwiKSxnLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmlzQ3NzM0ZpbmlzaD0hMH0sXHJcbmMub3B0aW9ucy5zbGlkZVNwZWVkKSksYy50cmFuc2l0aW9uM2QoYSkpOiEwPT09Yj9jLmNzczJzbGlkZShhLGMub3B0aW9ucy5wYWdpbmF0aW9uU3BlZWQpOlwicmV3aW5kXCI9PT1iP2MuY3NzMnNsaWRlKGEsYy5vcHRpb25zLnJld2luZFNwZWVkKTpjLmNzczJzbGlkZShhLGMub3B0aW9ucy5zbGlkZVNwZWVkKTtjLmFmdGVyR28oKX0sanVtcFRvOmZ1bmN0aW9uKGEpe1wiZnVuY3Rpb25cIj09PXR5cGVvZiB0aGlzLm9wdGlvbnMuYmVmb3JlTW92ZSYmdGhpcy5vcHRpb25zLmJlZm9yZU1vdmUuYXBwbHkodGhpcyxbdGhpcy4kZWxlbV0pO2E+PXRoaXMubWF4aW11bUl0ZW18fC0xPT09YT9hPXRoaXMubWF4aW11bUl0ZW06MD49YSYmKGE9MCk7dGhpcy5zd2FwU3BlZWQoMCk7ITA9PT10aGlzLmJyb3dzZXIuc3VwcG9ydDNkP3RoaXMudHJhbnNpdGlvbjNkKHRoaXMucG9zaXRpb25zSW5BcnJheVthXSk6dGhpcy5jc3Myc2xpZGUodGhpcy5wb3NpdGlvbnNJbkFycmF5W2FdLDEpO3RoaXMuY3VycmVudEl0ZW09XHJcbnRoaXMub3dsLmN1cnJlbnRJdGVtPWE7dGhpcy5hZnRlckdvKCl9LGFmdGVyR286ZnVuY3Rpb24oKXt0aGlzLnByZXZBcnIucHVzaCh0aGlzLmN1cnJlbnRJdGVtKTt0aGlzLnByZXZJdGVtPXRoaXMub3dsLnByZXZJdGVtPXRoaXMucHJldkFyclt0aGlzLnByZXZBcnIubGVuZ3RoLTJdO3RoaXMucHJldkFyci5zaGlmdCgwKTt0aGlzLnByZXZJdGVtIT09dGhpcy5jdXJyZW50SXRlbSYmKHRoaXMuY2hlY2tQYWdpbmF0aW9uKCksdGhpcy5jaGVja05hdmlnYXRpb24oKSx0aGlzLmVhY2hNb3ZlVXBkYXRlKCksITEhPT10aGlzLm9wdGlvbnMuYXV0b1BsYXkmJnRoaXMuY2hlY2tBcCgpKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgdGhpcy5vcHRpb25zLmFmdGVyTW92ZSYmdGhpcy5wcmV2SXRlbSE9PXRoaXMuY3VycmVudEl0ZW0mJnRoaXMub3B0aW9ucy5hZnRlck1vdmUuYXBwbHkodGhpcyxbdGhpcy4kZWxlbV0pfSxzdG9wOmZ1bmN0aW9uKCl7dGhpcy5hcFN0YXR1cz1cInN0b3BcIjtnLmNsZWFySW50ZXJ2YWwodGhpcy5hdXRvUGxheUludGVydmFsKX0sXHJcbmNoZWNrQXA6ZnVuY3Rpb24oKXtcInN0b3BcIiE9PXRoaXMuYXBTdGF0dXMmJnRoaXMucGxheSgpfSxwbGF5OmZ1bmN0aW9uKCl7dmFyIGE9dGhpczthLmFwU3RhdHVzPVwicGxheVwiO2lmKCExPT09YS5vcHRpb25zLmF1dG9QbGF5KXJldHVybiExO2cuY2xlYXJJbnRlcnZhbChhLmF1dG9QbGF5SW50ZXJ2YWwpO2EuYXV0b1BsYXlJbnRlcnZhbD1nLnNldEludGVydmFsKGZ1bmN0aW9uKCl7YS5uZXh0KCEwKX0sYS5vcHRpb25zLmF1dG9QbGF5KX0sc3dhcFNwZWVkOmZ1bmN0aW9uKGEpe1wic2xpZGVTcGVlZFwiPT09YT90aGlzLiRvd2xXcmFwcGVyLmNzcyh0aGlzLmFkZENzc1NwZWVkKHRoaXMub3B0aW9ucy5zbGlkZVNwZWVkKSk6XCJwYWdpbmF0aW9uU3BlZWRcIj09PWE/dGhpcy4kb3dsV3JhcHBlci5jc3ModGhpcy5hZGRDc3NTcGVlZCh0aGlzLm9wdGlvbnMucGFnaW5hdGlvblNwZWVkKSk6XCJzdHJpbmdcIiE9PXR5cGVvZiBhJiZ0aGlzLiRvd2xXcmFwcGVyLmNzcyh0aGlzLmFkZENzc1NwZWVkKGEpKX0sXHJcbmFkZENzc1NwZWVkOmZ1bmN0aW9uKGEpe3JldHVybntcIi13ZWJraXQtdHJhbnNpdGlvblwiOlwiYWxsIFwiK2ErXCJtcyBlYXNlXCIsXCItbW96LXRyYW5zaXRpb25cIjpcImFsbCBcIithK1wibXMgZWFzZVwiLFwiLW8tdHJhbnNpdGlvblwiOlwiYWxsIFwiK2ErXCJtcyBlYXNlXCIsdHJhbnNpdGlvbjpcImFsbCBcIithK1wibXMgZWFzZVwifX0scmVtb3ZlVHJhbnNpdGlvbjpmdW5jdGlvbigpe3JldHVybntcIi13ZWJraXQtdHJhbnNpdGlvblwiOlwiXCIsXCItbW96LXRyYW5zaXRpb25cIjpcIlwiLFwiLW8tdHJhbnNpdGlvblwiOlwiXCIsdHJhbnNpdGlvbjpcIlwifX0sZG9UcmFuc2xhdGU6ZnVuY3Rpb24oYSl7cmV0dXJue1wiLXdlYmtpdC10cmFuc2Zvcm1cIjpcInRyYW5zbGF0ZTNkKFwiK2ErXCJweCwgMHB4LCAwcHgpXCIsXCItbW96LXRyYW5zZm9ybVwiOlwidHJhbnNsYXRlM2QoXCIrYStcInB4LCAwcHgsIDBweClcIixcIi1vLXRyYW5zZm9ybVwiOlwidHJhbnNsYXRlM2QoXCIrYStcInB4LCAwcHgsIDBweClcIixcIi1tcy10cmFuc2Zvcm1cIjpcInRyYW5zbGF0ZTNkKFwiK1xyXG5hK1wicHgsIDBweCwgMHB4KVwiLHRyYW5zZm9ybTpcInRyYW5zbGF0ZTNkKFwiK2ErXCJweCwgMHB4LDBweClcIn19LHRyYW5zaXRpb24zZDpmdW5jdGlvbihhKXt0aGlzLiRvd2xXcmFwcGVyLmNzcyh0aGlzLmRvVHJhbnNsYXRlKGEpKX0sY3NzMm1vdmU6ZnVuY3Rpb24oYSl7dGhpcy4kb3dsV3JhcHBlci5jc3Moe2xlZnQ6YX0pfSxjc3Myc2xpZGU6ZnVuY3Rpb24oYSxiKXt2YXIgZT10aGlzO2UuaXNDc3NGaW5pc2g9ITE7ZS4kb3dsV3JhcHBlci5zdG9wKCEwLCEwKS5hbmltYXRlKHtsZWZ0OmF9LHtkdXJhdGlvbjpifHxlLm9wdGlvbnMuc2xpZGVTcGVlZCxjb21wbGV0ZTpmdW5jdGlvbigpe2UuaXNDc3NGaW5pc2g9ITB9fSl9LGNoZWNrQnJvd3NlcjpmdW5jdGlvbigpe3ZhciBhPWsuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLnN0eWxlLmNzc1RleHQ9XCIgIC1tb3otdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDBweCwgMHB4LCAwcHgpOyAtbXMtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDBweCwgMHB4LCAwcHgpOyAtby10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCk7IC13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDBweCwgMHB4LCAwcHgpOyB0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweClcIjtcclxuYT1hLnN0eWxlLmNzc1RleHQubWF0Y2goL3RyYW5zbGF0ZTNkXFwoMHB4LCAwcHgsIDBweFxcKS9nKTt0aGlzLmJyb3dzZXI9e3N1cHBvcnQzZDpudWxsIT09YSYmMT09PWEubGVuZ3RoLGlzVG91Y2g6XCJvbnRvdWNoc3RhcnRcImluIGd8fGcubmF2aWdhdG9yLm1zTWF4VG91Y2hQb2ludHN9fSxtb3ZlRXZlbnRzOmZ1bmN0aW9uKCl7aWYoITEhPT10aGlzLm9wdGlvbnMubW91c2VEcmFnfHwhMSE9PXRoaXMub3B0aW9ucy50b3VjaERyYWcpdGhpcy5nZXN0dXJlcygpLHRoaXMuZGlzYWJsZWRFdmVudHMoKX0sZXZlbnRUeXBlczpmdW5jdGlvbigpe3ZhciBhPVtcInNcIixcImVcIixcInhcIl07dGhpcy5ldl90eXBlcz17fTshMD09PXRoaXMub3B0aW9ucy5tb3VzZURyYWcmJiEwPT09dGhpcy5vcHRpb25zLnRvdWNoRHJhZz9hPVtcInRvdWNoc3RhcnQub3dsIG1vdXNlZG93bi5vd2xcIixcInRvdWNobW92ZS5vd2wgbW91c2Vtb3ZlLm93bFwiLFwidG91Y2hlbmQub3dsIHRvdWNoY2FuY2VsLm93bCBtb3VzZXVwLm93bFwiXTpcclxuITE9PT10aGlzLm9wdGlvbnMubW91c2VEcmFnJiYhMD09PXRoaXMub3B0aW9ucy50b3VjaERyYWc/YT1bXCJ0b3VjaHN0YXJ0Lm93bFwiLFwidG91Y2htb3ZlLm93bFwiLFwidG91Y2hlbmQub3dsIHRvdWNoY2FuY2VsLm93bFwiXTohMD09PXRoaXMub3B0aW9ucy5tb3VzZURyYWcmJiExPT09dGhpcy5vcHRpb25zLnRvdWNoRHJhZyYmKGE9W1wibW91c2Vkb3duLm93bFwiLFwibW91c2Vtb3ZlLm93bFwiLFwibW91c2V1cC5vd2xcIl0pO3RoaXMuZXZfdHlwZXMuc3RhcnQ9YVswXTt0aGlzLmV2X3R5cGVzLm1vdmU9YVsxXTt0aGlzLmV2X3R5cGVzLmVuZD1hWzJdfSxkaXNhYmxlZEV2ZW50czpmdW5jdGlvbigpe3RoaXMuJGVsZW0ub24oXCJkcmFnc3RhcnQub3dsXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSk7dGhpcy4kZWxlbS5vbihcIm1vdXNlZG93bi5kaXNhYmxlVGV4dFNlbGVjdFwiLGZ1bmN0aW9uKGEpe3JldHVybiBmKGEudGFyZ2V0KS5pcyhcImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0LCBvcHRpb25cIil9KX0sXHJcbmdlc3R1cmVzOmZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtpZih2b2lkIDAhPT1hLnRvdWNoZXMpcmV0dXJue3g6YS50b3VjaGVzWzBdLnBhZ2VYLHk6YS50b3VjaGVzWzBdLnBhZ2VZfTtpZih2b2lkIDA9PT1hLnRvdWNoZXMpe2lmKHZvaWQgMCE9PWEucGFnZVgpcmV0dXJue3g6YS5wYWdlWCx5OmEucGFnZVl9O2lmKHZvaWQgMD09PWEucGFnZVgpcmV0dXJue3g6YS5jbGllbnRYLHk6YS5jbGllbnRZfX19ZnVuY3Rpb24gYihhKXtcIm9uXCI9PT1hPyhmKGspLm9uKGQuZXZfdHlwZXMubW92ZSxlKSxmKGspLm9uKGQuZXZfdHlwZXMuZW5kLGMpKTpcIm9mZlwiPT09YSYmKGYoaykub2ZmKGQuZXZfdHlwZXMubW92ZSksZihrKS5vZmYoZC5ldl90eXBlcy5lbmQpKX1mdW5jdGlvbiBlKGIpe2I9Yi5vcmlnaW5hbEV2ZW50fHxifHxnLmV2ZW50O2QubmV3UG9zWD1hKGIpLngtaC5vZmZzZXRYO2QubmV3UG9zWT1hKGIpLnktaC5vZmZzZXRZO2QubmV3UmVsYXRpdmVYPWQubmV3UG9zWC1oLnJlbGF0aXZlUG9zO1xyXG5cImZ1bmN0aW9uXCI9PT10eXBlb2YgZC5vcHRpb25zLnN0YXJ0RHJhZ2dpbmcmJiEwIT09aC5kcmFnZ2luZyYmMCE9PWQubmV3UmVsYXRpdmVYJiYoaC5kcmFnZ2luZz0hMCxkLm9wdGlvbnMuc3RhcnREcmFnZ2luZy5hcHBseShkLFtkLiRlbGVtXSkpOyg4PGQubmV3UmVsYXRpdmVYfHwtOD5kLm5ld1JlbGF0aXZlWCkmJiEwPT09ZC5icm93c2VyLmlzVG91Y2gmJih2b2lkIDAhPT1iLnByZXZlbnREZWZhdWx0P2IucHJldmVudERlZmF1bHQoKTpiLnJldHVyblZhbHVlPSExLGguc2xpZGluZz0hMCk7KDEwPGQubmV3UG9zWXx8LTEwPmQubmV3UG9zWSkmJiExPT09aC5zbGlkaW5nJiZmKGspLm9mZihcInRvdWNobW92ZS5vd2xcIik7ZC5uZXdQb3NYPU1hdGgubWF4KE1hdGgubWluKGQubmV3UG9zWCxkLm5ld1JlbGF0aXZlWC81KSxkLm1heGltdW1QaXhlbHMrZC5uZXdSZWxhdGl2ZVgvNSk7ITA9PT1kLmJyb3dzZXIuc3VwcG9ydDNkP2QudHJhbnNpdGlvbjNkKGQubmV3UG9zWCk6ZC5jc3MybW92ZShkLm5ld1Bvc1gpfVxyXG5mdW5jdGlvbiBjKGEpe2E9YS5vcmlnaW5hbEV2ZW50fHxhfHxnLmV2ZW50O3ZhciBjO2EudGFyZ2V0PWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7aC5kcmFnZ2luZz0hMTshMCE9PWQuYnJvd3Nlci5pc1RvdWNoJiZkLiRvd2xXcmFwcGVyLnJlbW92ZUNsYXNzKFwiZ3JhYmJpbmdcIik7ZC5kcmFnRGlyZWN0aW9uPTA+ZC5uZXdSZWxhdGl2ZVg/ZC5vd2wuZHJhZ0RpcmVjdGlvbj1cImxlZnRcIjpkLm93bC5kcmFnRGlyZWN0aW9uPVwicmlnaHRcIjswIT09ZC5uZXdSZWxhdGl2ZVgmJihjPWQuZ2V0TmV3UG9zaXRpb24oKSxkLmdvVG8oYywhMSxcImRyYWdcIiksaC50YXJnZXRFbGVtZW50PT09YS50YXJnZXQmJiEwIT09ZC5icm93c2VyLmlzVG91Y2gmJihmKGEudGFyZ2V0KS5vbihcImNsaWNrLmRpc2FibGVcIixmdW5jdGlvbihhKXthLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO2Euc3RvcFByb3BhZ2F0aW9uKCk7YS5wcmV2ZW50RGVmYXVsdCgpO2YoYS50YXJnZXQpLm9mZihcImNsaWNrLmRpc2FibGVcIil9KSxcclxuYT1mLl9kYXRhKGEudGFyZ2V0LFwiZXZlbnRzXCIpLmNsaWNrLGM9YS5wb3AoKSxhLnNwbGljZSgwLDAsYykpKTtiKFwib2ZmXCIpfXZhciBkPXRoaXMsaD17b2Zmc2V0WDowLG9mZnNldFk6MCxiYXNlRWxXaWR0aDowLHJlbGF0aXZlUG9zOjAscG9zaXRpb246bnVsbCxtaW5Td2lwZTpudWxsLG1heFN3aXBlOm51bGwsc2xpZGluZzpudWxsLGRhcmdnaW5nOm51bGwsdGFyZ2V0RWxlbWVudDpudWxsfTtkLmlzQ3NzRmluaXNoPSEwO2QuJGVsZW0ub24oZC5ldl90eXBlcy5zdGFydCxcIi5vd2wtd3JhcHBlclwiLGZ1bmN0aW9uKGMpe2M9Yy5vcmlnaW5hbEV2ZW50fHxjfHxnLmV2ZW50O3ZhciBlO2lmKDM9PT1jLndoaWNoKXJldHVybiExO2lmKCEoZC5pdGVtc0Ftb3VudDw9ZC5vcHRpb25zLml0ZW1zKSl7aWYoITE9PT1kLmlzQ3NzRmluaXNoJiYhZC5vcHRpb25zLmRyYWdCZWZvcmVBbmltRmluaXNofHwhMT09PWQuaXNDc3MzRmluaXNoJiYhZC5vcHRpb25zLmRyYWdCZWZvcmVBbmltRmluaXNoKXJldHVybiExO1xyXG4hMSE9PWQub3B0aW9ucy5hdXRvUGxheSYmZy5jbGVhckludGVydmFsKGQuYXV0b1BsYXlJbnRlcnZhbCk7ITA9PT1kLmJyb3dzZXIuaXNUb3VjaHx8ZC4kb3dsV3JhcHBlci5oYXNDbGFzcyhcImdyYWJiaW5nXCIpfHxkLiRvd2xXcmFwcGVyLmFkZENsYXNzKFwiZ3JhYmJpbmdcIik7ZC5uZXdQb3NYPTA7ZC5uZXdSZWxhdGl2ZVg9MDtmKHRoaXMpLmNzcyhkLnJlbW92ZVRyYW5zaXRpb24oKSk7ZT1mKHRoaXMpLnBvc2l0aW9uKCk7aC5yZWxhdGl2ZVBvcz1lLmxlZnQ7aC5vZmZzZXRYPWEoYykueC1lLmxlZnQ7aC5vZmZzZXRZPWEoYykueS1lLnRvcDtiKFwib25cIik7aC5zbGlkaW5nPSExO2gudGFyZ2V0RWxlbWVudD1jLnRhcmdldHx8Yy5zcmNFbGVtZW50fX0pfSxnZXROZXdQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMuY2xvc2VzdEl0ZW0oKTthPnRoaXMubWF4aW11bUl0ZW0/YT10aGlzLmN1cnJlbnRJdGVtPXRoaXMubWF4aW11bUl0ZW06MDw9dGhpcy5uZXdQb3NYJiYodGhpcy5jdXJyZW50SXRlbT1cclxuYT0wKTtyZXR1cm4gYX0sY2xvc2VzdEl0ZW06ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9ITA9PT1hLm9wdGlvbnMuc2Nyb2xsUGVyUGFnZT9hLnBhZ2VzSW5BcnJheTphLnBvc2l0aW9uc0luQXJyYXksZT1hLm5ld1Bvc1gsYz1udWxsO2YuZWFjaChiLGZ1bmN0aW9uKGQsZyl7ZS1hLml0ZW1XaWR0aC8yMD5iW2QrMV0mJmUtYS5pdGVtV2lkdGgvMjA8ZyYmXCJsZWZ0XCI9PT1hLm1vdmVEaXJlY3Rpb24oKT8oYz1nLGEuY3VycmVudEl0ZW09ITA9PT1hLm9wdGlvbnMuc2Nyb2xsUGVyUGFnZT9mLmluQXJyYXkoYyxhLnBvc2l0aW9uc0luQXJyYXkpOmQpOmUrYS5pdGVtV2lkdGgvMjA8ZyYmZSthLml0ZW1XaWR0aC8yMD4oYltkKzFdfHxiW2RdLWEuaXRlbVdpZHRoKSYmXCJyaWdodFwiPT09YS5tb3ZlRGlyZWN0aW9uKCkmJighMD09PWEub3B0aW9ucy5zY3JvbGxQZXJQYWdlPyhjPWJbZCsxXXx8YltiLmxlbmd0aC0xXSxhLmN1cnJlbnRJdGVtPWYuaW5BcnJheShjLGEucG9zaXRpb25zSW5BcnJheSkpOlxyXG4oYz1iW2QrMV0sYS5jdXJyZW50SXRlbT1kKzEpKX0pO3JldHVybiBhLmN1cnJlbnRJdGVtfSxtb3ZlRGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGE7MD50aGlzLm5ld1JlbGF0aXZlWD8oYT1cInJpZ2h0XCIsdGhpcy5wbGF5RGlyZWN0aW9uPVwibmV4dFwiKTooYT1cImxlZnRcIix0aGlzLnBsYXlEaXJlY3Rpb249XCJwcmV2XCIpO3JldHVybiBhfSxjdXN0b21FdmVudHM6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuJGVsZW0ub24oXCJvd2wubmV4dFwiLGZ1bmN0aW9uKCl7YS5uZXh0KCl9KTthLiRlbGVtLm9uKFwib3dsLnByZXZcIixmdW5jdGlvbigpe2EucHJldigpfSk7YS4kZWxlbS5vbihcIm93bC5wbGF5XCIsZnVuY3Rpb24oYixlKXthLm9wdGlvbnMuYXV0b1BsYXk9ZTthLnBsYXkoKTthLmhvdmVyU3RhdHVzPVwicGxheVwifSk7YS4kZWxlbS5vbihcIm93bC5zdG9wXCIsZnVuY3Rpb24oKXthLnN0b3AoKTthLmhvdmVyU3RhdHVzPVwic3RvcFwifSk7YS4kZWxlbS5vbihcIm93bC5nb1RvXCIsZnVuY3Rpb24oYixlKXthLmdvVG8oZSl9KTtcclxuYS4kZWxlbS5vbihcIm93bC5qdW1wVG9cIixmdW5jdGlvbihiLGUpe2EuanVtcFRvKGUpfSl9LHN0b3BPbkhvdmVyOmZ1bmN0aW9uKCl7dmFyIGE9dGhpczshMD09PWEub3B0aW9ucy5zdG9wT25Ib3ZlciYmITAhPT1hLmJyb3dzZXIuaXNUb3VjaCYmITEhPT1hLm9wdGlvbnMuYXV0b1BsYXkmJihhLiRlbGVtLm9uKFwibW91c2VvdmVyXCIsZnVuY3Rpb24oKXthLnN0b3AoKX0pLGEuJGVsZW0ub24oXCJtb3VzZW91dFwiLGZ1bmN0aW9uKCl7XCJzdG9wXCIhPT1hLmhvdmVyU3RhdHVzJiZhLnBsYXkoKX0pKX0sbGF6eUxvYWQ6ZnVuY3Rpb24oKXt2YXIgYSxiLGUsYyxkO2lmKCExPT09dGhpcy5vcHRpb25zLmxhenlMb2FkKXJldHVybiExO2ZvcihhPTA7YTx0aGlzLml0ZW1zQW1vdW50O2ErPTEpYj1mKHRoaXMuJG93bEl0ZW1zW2FdKSxcImxvYWRlZFwiIT09Yi5kYXRhKFwib3dsLWxvYWRlZFwiKSYmKGU9Yi5kYXRhKFwib3dsLWl0ZW1cIiksYz1iLmZpbmQoXCIubGF6eU93bFwiKSxcInN0cmluZ1wiIT09dHlwZW9mIGMuZGF0YShcInNyY1wiKT9cclxuYi5kYXRhKFwib3dsLWxvYWRlZFwiLFwibG9hZGVkXCIpOih2b2lkIDA9PT1iLmRhdGEoXCJvd2wtbG9hZGVkXCIpJiYoYy5oaWRlKCksYi5hZGRDbGFzcyhcImxvYWRpbmdcIikuZGF0YShcIm93bC1sb2FkZWRcIixcImNoZWNrZWRcIikpLChkPSEwPT09dGhpcy5vcHRpb25zLmxhenlGb2xsb3c/ZT49dGhpcy5jdXJyZW50SXRlbTohMCkmJmU8dGhpcy5jdXJyZW50SXRlbSt0aGlzLm9wdGlvbnMuaXRlbXMmJmMubGVuZ3RoJiZ0aGlzLmxhenlQcmVsb2FkKGIsYykpKX0sbGF6eVByZWxvYWQ6ZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBlKCl7YS5kYXRhKFwib3dsLWxvYWRlZFwiLFwibG9hZGVkXCIpLnJlbW92ZUNsYXNzKFwibG9hZGluZ1wiKTtiLnJlbW92ZUF0dHIoXCJkYXRhLXNyY1wiKTtcImZhZGVcIj09PWQub3B0aW9ucy5sYXp5RWZmZWN0P2IuZmFkZUluKDQwMCk6Yi5zaG93KCk7XCJmdW5jdGlvblwiPT09dHlwZW9mIGQub3B0aW9ucy5hZnRlckxhenlMb2FkJiZkLm9wdGlvbnMuYWZ0ZXJMYXp5TG9hZC5hcHBseSh0aGlzLFxyXG5bZC4kZWxlbV0pfWZ1bmN0aW9uIGMoKXtmKz0xO2QuY29tcGxldGVJbWcoYi5nZXQoMCkpfHwhMD09PWs/ZSgpOjEwMD49Zj9nLnNldFRpbWVvdXQoYywxMDApOmUoKX12YXIgZD10aGlzLGY9MCxrO1wiRElWXCI9PT1iLnByb3AoXCJ0YWdOYW1lXCIpPyhiLmNzcyhcImJhY2tncm91bmQtaW1hZ2VcIixcInVybChcIitiLmRhdGEoXCJzcmNcIikrXCIpXCIpLGs9ITApOmJbMF0uc3JjPWIuZGF0YShcInNyY1wiKTtjKCl9LGF1dG9IZWlnaHQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKCl7dmFyIGE9ZihlLiRvd2xJdGVtc1tlLmN1cnJlbnRJdGVtXSkuaGVpZ2h0KCk7ZS53cmFwcGVyT3V0ZXIuY3NzKFwiaGVpZ2h0XCIsYStcInB4XCIpO2Uud3JhcHBlck91dGVyLmhhc0NsYXNzKFwiYXV0b0hlaWdodFwiKXx8Zy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS53cmFwcGVyT3V0ZXIuYWRkQ2xhc3MoXCJhdXRvSGVpZ2h0XCIpfSwwKX1mdW5jdGlvbiBiKCl7ZCs9MTtlLmNvbXBsZXRlSW1nKGMuZ2V0KDApKT9hKCk6MTAwPj1kP2cuc2V0VGltZW91dChiLFxyXG4xMDApOmUud3JhcHBlck91dGVyLmNzcyhcImhlaWdodFwiLFwiXCIpfXZhciBlPXRoaXMsYz1mKGUuJG93bEl0ZW1zW2UuY3VycmVudEl0ZW1dKS5maW5kKFwiaW1nXCIpLGQ7dm9pZCAwIT09Yy5nZXQoMCk/KGQ9MCxiKCkpOmEoKX0sY29tcGxldGVJbWc6ZnVuY3Rpb24oYSl7cmV0dXJuIWEuY29tcGxldGV8fFwidW5kZWZpbmVkXCIhPT10eXBlb2YgYS5uYXR1cmFsV2lkdGgmJjA9PT1hLm5hdHVyYWxXaWR0aD8hMTohMH0sb25WaXNpYmxlSXRlbXM6ZnVuY3Rpb24oKXt2YXIgYTshMD09PXRoaXMub3B0aW9ucy5hZGRDbGFzc0FjdGl2ZSYmdGhpcy4kb3dsSXRlbXMucmVtb3ZlQ2xhc3MoXCJhY3RpdmVcIik7dGhpcy52aXNpYmxlSXRlbXM9W107Zm9yKGE9dGhpcy5jdXJyZW50SXRlbTthPHRoaXMuY3VycmVudEl0ZW0rdGhpcy5vcHRpb25zLml0ZW1zO2ErPTEpdGhpcy52aXNpYmxlSXRlbXMucHVzaChhKSwhMD09PXRoaXMub3B0aW9ucy5hZGRDbGFzc0FjdGl2ZSYmZih0aGlzLiRvd2xJdGVtc1thXSkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbnRoaXMub3dsLnZpc2libGVJdGVtcz10aGlzLnZpc2libGVJdGVtc30sdHJhbnNpdGlvblR5cGVzOmZ1bmN0aW9uKGEpe3RoaXMub3V0Q2xhc3M9XCJvd2wtXCIrYStcIi1vdXRcIjt0aGlzLmluQ2xhc3M9XCJvd2wtXCIrYStcIi1pblwifSxzaW5nbGVJdGVtVHJhbnNpdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj1hLm91dENsYXNzLGU9YS5pbkNsYXNzLGM9YS4kb3dsSXRlbXMuZXEoYS5jdXJyZW50SXRlbSksZD1hLiRvd2xJdGVtcy5lcShhLnByZXZJdGVtKSxmPU1hdGguYWJzKGEucG9zaXRpb25zSW5BcnJheVthLmN1cnJlbnRJdGVtXSkrYS5wb3NpdGlvbnNJbkFycmF5W2EucHJldkl0ZW1dLGc9TWF0aC5hYnMoYS5wb3NpdGlvbnNJbkFycmF5W2EuY3VycmVudEl0ZW1dKSthLml0ZW1XaWR0aC8yO2EuaXNUcmFuc2l0aW9uPSEwO2EuJG93bFdyYXBwZXIuYWRkQ2xhc3MoXCJvd2wtb3JpZ2luXCIpLmNzcyh7XCItd2Via2l0LXRyYW5zZm9ybS1vcmlnaW5cIjpnK1wicHhcIixcIi1tb3otcGVyc3BlY3RpdmUtb3JpZ2luXCI6ZytcclxuXCJweFwiLFwicGVyc3BlY3RpdmUtb3JpZ2luXCI6ZytcInB4XCJ9KTtkLmNzcyh7cG9zaXRpb246XCJyZWxhdGl2ZVwiLGxlZnQ6ZitcInB4XCJ9KS5hZGRDbGFzcyhiKS5vbihcIndlYmtpdEFuaW1hdGlvbkVuZCBvQW5pbWF0aW9uRW5kIE1TQW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZFwiLGZ1bmN0aW9uKCl7YS5lbmRQcmV2PSEwO2Qub2ZmKFwid2Via2l0QW5pbWF0aW9uRW5kIG9BbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kXCIpO2EuY2xlYXJUcmFuc1N0eWxlKGQsYil9KTtjLmFkZENsYXNzKGUpLm9uKFwid2Via2l0QW5pbWF0aW9uRW5kIG9BbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kXCIsZnVuY3Rpb24oKXthLmVuZEN1cnJlbnQ9ITA7Yy5vZmYoXCJ3ZWJraXRBbmltYXRpb25FbmQgb0FuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmRcIik7YS5jbGVhclRyYW5zU3R5bGUoYyxlKX0pfSxjbGVhclRyYW5zU3R5bGU6ZnVuY3Rpb24oYSxcclxuYil7YS5jc3Moe3Bvc2l0aW9uOlwiXCIsbGVmdDpcIlwifSkucmVtb3ZlQ2xhc3MoYik7dGhpcy5lbmRQcmV2JiZ0aGlzLmVuZEN1cnJlbnQmJih0aGlzLiRvd2xXcmFwcGVyLnJlbW92ZUNsYXNzKFwib3dsLW9yaWdpblwiKSx0aGlzLmlzVHJhbnNpdGlvbj10aGlzLmVuZEN1cnJlbnQ9dGhpcy5lbmRQcmV2PSExKX0sb3dsU3RhdHVzOmZ1bmN0aW9uKCl7dGhpcy5vd2w9e3VzZXJPcHRpb25zOnRoaXMudXNlck9wdGlvbnMsYmFzZUVsZW1lbnQ6dGhpcy4kZWxlbSx1c2VySXRlbXM6dGhpcy4kdXNlckl0ZW1zLG93bEl0ZW1zOnRoaXMuJG93bEl0ZW1zLGN1cnJlbnRJdGVtOnRoaXMuY3VycmVudEl0ZW0scHJldkl0ZW06dGhpcy5wcmV2SXRlbSx2aXNpYmxlSXRlbXM6dGhpcy52aXNpYmxlSXRlbXMsaXNUb3VjaDp0aGlzLmJyb3dzZXIuaXNUb3VjaCxicm93c2VyOnRoaXMuYnJvd3NlcixkcmFnRGlyZWN0aW9uOnRoaXMuZHJhZ0RpcmVjdGlvbn19LGNsZWFyRXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy4kZWxlbS5vZmYoXCIub3dsIG93bCBtb3VzZWRvd24uZGlzYWJsZVRleHRTZWxlY3RcIik7XHJcbmYoaykub2ZmKFwiLm93bCBvd2xcIik7ZihnKS5vZmYoXCJyZXNpemVcIix0aGlzLnJlc2l6ZXIpfSx1bldyYXA6ZnVuY3Rpb24oKXswIT09dGhpcy4kZWxlbS5jaGlsZHJlbigpLmxlbmd0aCYmKHRoaXMuJG93bFdyYXBwZXIudW53cmFwKCksdGhpcy4kdXNlckl0ZW1zLnVud3JhcCgpLnVud3JhcCgpLHRoaXMub3dsQ29udHJvbHMmJnRoaXMub3dsQ29udHJvbHMucmVtb3ZlKCkpO3RoaXMuY2xlYXJFdmVudHMoKTt0aGlzLiRlbGVtLmF0dHIoXCJzdHlsZVwiLHRoaXMuJGVsZW0uZGF0YShcIm93bC1vcmlnaW5hbFN0eWxlc1wiKXx8XCJcIikuYXR0cihcImNsYXNzXCIsdGhpcy4kZWxlbS5kYXRhKFwib3dsLW9yaWdpbmFsQ2xhc3Nlc1wiKSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXt0aGlzLnN0b3AoKTtnLmNsZWFySW50ZXJ2YWwodGhpcy5jaGVja1Zpc2libGUpO3RoaXMudW5XcmFwKCk7dGhpcy4kZWxlbS5yZW1vdmVEYXRhKCl9LHJlaW5pdDpmdW5jdGlvbihhKXthPWYuZXh0ZW5kKHt9LHRoaXMudXNlck9wdGlvbnMsXHJcbmEpO3RoaXMudW5XcmFwKCk7dGhpcy5pbml0KGEsdGhpcy4kZWxlbSl9LGFkZEl0ZW06ZnVuY3Rpb24oYSxiKXt2YXIgZTtpZighYSlyZXR1cm4hMTtpZigwPT09dGhpcy4kZWxlbS5jaGlsZHJlbigpLmxlbmd0aClyZXR1cm4gdGhpcy4kZWxlbS5hcHBlbmQoYSksdGhpcy5zZXRWYXJzKCksITE7dGhpcy51bldyYXAoKTtlPXZvaWQgMD09PWJ8fC0xPT09Yj8tMTpiO2U+PXRoaXMuJHVzZXJJdGVtcy5sZW5ndGh8fC0xPT09ZT90aGlzLiR1c2VySXRlbXMuZXEoLTEpLmFmdGVyKGEpOnRoaXMuJHVzZXJJdGVtcy5lcShlKS5iZWZvcmUoYSk7dGhpcy5zZXRWYXJzKCl9LHJlbW92ZUl0ZW06ZnVuY3Rpb24oYSl7aWYoMD09PXRoaXMuJGVsZW0uY2hpbGRyZW4oKS5sZW5ndGgpcmV0dXJuITE7YT12b2lkIDA9PT1hfHwtMT09PWE/LTE6YTt0aGlzLnVuV3JhcCgpO3RoaXMuJHVzZXJJdGVtcy5lcShhKS5yZW1vdmUoKTt0aGlzLnNldFZhcnMoKX19O2YuZm4ub3dsQ2Fyb3VzZWw9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKCEwPT09XHJcbmYodGhpcykuZGF0YShcIm93bC1pbml0XCIpKXJldHVybiExO2YodGhpcykuZGF0YShcIm93bC1pbml0XCIsITApO3ZhciBiPU9iamVjdC5jcmVhdGUobCk7Yi5pbml0KGEsdGhpcyk7Zi5kYXRhKHRoaXMsXCJvd2xDYXJvdXNlbFwiLGIpfSl9O2YuZm4ub3dsQ2Fyb3VzZWwub3B0aW9ucz17aXRlbXM6NSxpdGVtc0N1c3RvbTohMSxpdGVtc0Rlc2t0b3A6WzExOTksNF0saXRlbXNEZXNrdG9wU21hbGw6Wzk3OSwzXSxpdGVtc1RhYmxldDpbNzY4LDJdLGl0ZW1zVGFibGV0U21hbGw6ITEsaXRlbXNNb2JpbGU6WzQ3OSwxXSxzaW5nbGVJdGVtOiExLGl0ZW1zU2NhbGVVcDohMSxzbGlkZVNwZWVkOjIwMCxwYWdpbmF0aW9uU3BlZWQ6ODAwLHJld2luZFNwZWVkOjFFMyxhdXRvUGxheTohMSxzdG9wT25Ib3ZlcjohMSxuYXZpZ2F0aW9uOiExLG5hdmlnYXRpb25UZXh0OltcInByZXZcIixcIm5leHRcIl0scmV3aW5kTmF2OiEwLHNjcm9sbFBlclBhZ2U6ITEscGFnaW5hdGlvbjohMCxwYWdpbmF0aW9uTnVtYmVyczohMSxcclxucmVzcG9uc2l2ZTohMCxyZXNwb25zaXZlUmVmcmVzaFJhdGU6MjAwLHJlc3BvbnNpdmVCYXNlV2lkdGg6ZyxiYXNlQ2xhc3M6XCJvd2wtY2Fyb3VzZWxcIix0aGVtZTpcIm93bC10aGVtZVwiLGxhenlMb2FkOiExLGxhenlGb2xsb3c6ITAsbGF6eUVmZmVjdDpcImZhZGVcIixhdXRvSGVpZ2h0OiExLGpzb25QYXRoOiExLGpzb25TdWNjZXNzOiExLGRyYWdCZWZvcmVBbmltRmluaXNoOiEwLG1vdXNlRHJhZzohMCx0b3VjaERyYWc6ITAsYWRkQ2xhc3NBY3RpdmU6ITEsdHJhbnNpdGlvblN0eWxlOiExLGJlZm9yZVVwZGF0ZTohMSxhZnRlclVwZGF0ZTohMSxiZWZvcmVJbml0OiExLGFmdGVySW5pdDohMSxiZWZvcmVNb3ZlOiExLGFmdGVyTW92ZTohMSxhZnRlckFjdGlvbjohMSxzdGFydERyYWdnaW5nOiExLGFmdGVyTGF6eUxvYWQ6ITF9fSkoalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCk7XHJcbiIsIm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgXCJsb2FkalF1ZXJ5UGx1Z2luXCI6IGZ1bmN0aW9uKCkge3JlcXVpcmUoXCIuL293bC5jYXJvdXNlbC5taW4uanNcIik7fVxyXG59O1xyXG4iLCJpbXBvcnQgKiBhcyBiYXNlIGZyb20gJy4vaGFuZGxlYmFycy9iYXNlJztcblxuLy8gRWFjaCBvZiB0aGVzZSBhdWdtZW50IHRoZSBIYW5kbGViYXJzIG9iamVjdC4gTm8gbmVlZCB0byBzZXR1cCBoZXJlLlxuLy8gKFRoaXMgaXMgZG9uZSB0byBlYXNpbHkgc2hhcmUgY29kZSBiZXR3ZWVuIGNvbW1vbmpzIGFuZCBicm93c2UgZW52cylcbmltcG9ydCBTYWZlU3RyaW5nIGZyb20gJy4vaGFuZGxlYmFycy9zYWZlLXN0cmluZyc7XG5pbXBvcnQgRXhjZXB0aW9uIGZyb20gJy4vaGFuZGxlYmFycy9leGNlcHRpb24nO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi9oYW5kbGViYXJzL3V0aWxzJztcbmltcG9ydCAqIGFzIHJ1bnRpbWUgZnJvbSAnLi9oYW5kbGViYXJzL3J1bnRpbWUnO1xuXG5pbXBvcnQgbm9Db25mbGljdCBmcm9tICcuL2hhbmRsZWJhcnMvbm8tY29uZmxpY3QnO1xuXG4vLyBGb3IgY29tcGF0aWJpbGl0eSBhbmQgdXNhZ2Ugb3V0c2lkZSBvZiBtb2R1bGUgc3lzdGVtcywgbWFrZSB0aGUgSGFuZGxlYmFycyBvYmplY3QgYSBuYW1lc3BhY2VcbmZ1bmN0aW9uIGNyZWF0ZSgpIHtcbiAgbGV0IGhiID0gbmV3IGJhc2UuSGFuZGxlYmFyc0Vudmlyb25tZW50KCk7XG5cbiAgVXRpbHMuZXh0ZW5kKGhiLCBiYXNlKTtcbiAgaGIuU2FmZVN0cmluZyA9IFNhZmVTdHJpbmc7XG4gIGhiLkV4Y2VwdGlvbiA9IEV4Y2VwdGlvbjtcbiAgaGIuVXRpbHMgPSBVdGlscztcbiAgaGIuZXNjYXBlRXhwcmVzc2lvbiA9IFV0aWxzLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgaGIuVk0gPSBydW50aW1lO1xuICBoYi50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHNwZWMpIHtcbiAgICByZXR1cm4gcnVudGltZS50ZW1wbGF0ZShzcGVjLCBoYik7XG4gIH07XG5cbiAgcmV0dXJuIGhiO1xufVxuXG5sZXQgaW5zdCA9IGNyZWF0ZSgpO1xuaW5zdC5jcmVhdGUgPSBjcmVhdGU7XG5cbm5vQ29uZmxpY3QoaW5zdCk7XG5cbmluc3RbJ2RlZmF1bHQnXSA9IGluc3Q7XG5cbmV4cG9ydCBkZWZhdWx0IGluc3Q7XG4iLCJpbXBvcnQge2NyZWF0ZUZyYW1lLCBleHRlbmQsIHRvU3RyaW5nfSBmcm9tICcuL3V0aWxzJztcbmltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi9leGNlcHRpb24nO1xuaW1wb3J0IHtyZWdpc3RlckRlZmF1bHRIZWxwZXJzfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHtyZWdpc3RlckRlZmF1bHREZWNvcmF0b3JzfSBmcm9tICcuL2RlY29yYXRvcnMnO1xuaW1wb3J0IGxvZ2dlciBmcm9tICcuL2xvZ2dlcic7XG5cbmV4cG9ydCBjb25zdCBWRVJTSU9OID0gJzQuMC41JztcbmV4cG9ydCBjb25zdCBDT01QSUxFUl9SRVZJU0lPTiA9IDc7XG5cbmV4cG9ydCBjb25zdCBSRVZJU0lPTl9DSEFOR0VTID0ge1xuICAxOiAnPD0gMS4wLnJjLjInLCAvLyAxLjAucmMuMiBpcyBhY3R1YWxseSByZXYyIGJ1dCBkb2Vzbid0IHJlcG9ydCBpdFxuICAyOiAnPT0gMS4wLjAtcmMuMycsXG4gIDM6ICc9PSAxLjAuMC1yYy40JyxcbiAgNDogJz09IDEueC54JyxcbiAgNTogJz09IDIuMC4wLWFscGhhLngnLFxuICA2OiAnPj0gMi4wLjAtYmV0YS4xJyxcbiAgNzogJz49IDQuMC4wJ1xufTtcblxuY29uc3Qgb2JqZWN0VHlwZSA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG5leHBvcnQgZnVuY3Rpb24gSGFuZGxlYmFyc0Vudmlyb25tZW50KGhlbHBlcnMsIHBhcnRpYWxzLCBkZWNvcmF0b3JzKSB7XG4gIHRoaXMuaGVscGVycyA9IGhlbHBlcnMgfHwge307XG4gIHRoaXMucGFydGlhbHMgPSBwYXJ0aWFscyB8fCB7fTtcbiAgdGhpcy5kZWNvcmF0b3JzID0gZGVjb3JhdG9ycyB8fCB7fTtcblxuICByZWdpc3RlckRlZmF1bHRIZWxwZXJzKHRoaXMpO1xuICByZWdpc3RlckRlZmF1bHREZWNvcmF0b3JzKHRoaXMpO1xufVxuXG5IYW5kbGViYXJzRW52aXJvbm1lbnQucHJvdG90eXBlID0ge1xuICBjb25zdHJ1Y3RvcjogSGFuZGxlYmFyc0Vudmlyb25tZW50LFxuXG4gIGxvZ2dlcjogbG9nZ2VyLFxuICBsb2c6IGxvZ2dlci5sb2csXG5cbiAgcmVnaXN0ZXJIZWxwZXI6IGZ1bmN0aW9uKG5hbWUsIGZuKSB7XG4gICAgaWYgKHRvU3RyaW5nLmNhbGwobmFtZSkgPT09IG9iamVjdFR5cGUpIHtcbiAgICAgIGlmIChmbikgeyB0aHJvdyBuZXcgRXhjZXB0aW9uKCdBcmcgbm90IHN1cHBvcnRlZCB3aXRoIG11bHRpcGxlIGhlbHBlcnMnKTsgfVxuICAgICAgZXh0ZW5kKHRoaXMuaGVscGVycywgbmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGVscGVyc1tuYW1lXSA9IGZuO1xuICAgIH1cbiAgfSxcbiAgdW5yZWdpc3RlckhlbHBlcjogZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLmhlbHBlcnNbbmFtZV07XG4gIH0sXG5cbiAgcmVnaXN0ZXJQYXJ0aWFsOiBmdW5jdGlvbihuYW1lLCBwYXJ0aWFsKSB7XG4gICAgaWYgKHRvU3RyaW5nLmNhbGwobmFtZSkgPT09IG9iamVjdFR5cGUpIHtcbiAgICAgIGV4dGVuZCh0aGlzLnBhcnRpYWxzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiBwYXJ0aWFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKGBBdHRlbXB0aW5nIHRvIHJlZ2lzdGVyIGEgcGFydGlhbCBjYWxsZWQgXCIke25hbWV9XCIgYXMgdW5kZWZpbmVkYCk7XG4gICAgICB9XG4gICAgICB0aGlzLnBhcnRpYWxzW25hbWVdID0gcGFydGlhbDtcbiAgICB9XG4gIH0sXG4gIHVucmVnaXN0ZXJQYXJ0aWFsOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMucGFydGlhbHNbbmFtZV07XG4gIH0sXG5cbiAgcmVnaXN0ZXJEZWNvcmF0b3I6IGZ1bmN0aW9uKG5hbWUsIGZuKSB7XG4gICAgaWYgKHRvU3RyaW5nLmNhbGwobmFtZSkgPT09IG9iamVjdFR5cGUpIHtcbiAgICAgIGlmIChmbikgeyB0aHJvdyBuZXcgRXhjZXB0aW9uKCdBcmcgbm90IHN1cHBvcnRlZCB3aXRoIG11bHRpcGxlIGRlY29yYXRvcnMnKTsgfVxuICAgICAgZXh0ZW5kKHRoaXMuZGVjb3JhdG9ycywgbmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZGVjb3JhdG9yc1tuYW1lXSA9IGZuO1xuICAgIH1cbiAgfSxcbiAgdW5yZWdpc3RlckRlY29yYXRvcjogZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLmRlY29yYXRvcnNbbmFtZV07XG4gIH1cbn07XG5cbmV4cG9ydCBsZXQgbG9nID0gbG9nZ2VyLmxvZztcblxuZXhwb3J0IHtjcmVhdGVGcmFtZSwgbG9nZ2VyfTtcbiIsImltcG9ydCByZWdpc3RlcklubGluZSBmcm9tICcuL2RlY29yYXRvcnMvaW5saW5lJztcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnMoaW5zdGFuY2UpIHtcbiAgcmVnaXN0ZXJJbmxpbmUoaW5zdGFuY2UpO1xufVxuXG4iLCJpbXBvcnQge2V4dGVuZH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckRlY29yYXRvcignaW5saW5lJywgZnVuY3Rpb24oZm4sIHByb3BzLCBjb250YWluZXIsIG9wdGlvbnMpIHtcbiAgICBsZXQgcmV0ID0gZm47XG4gICAgaWYgKCFwcm9wcy5wYXJ0aWFscykge1xuICAgICAgcHJvcHMucGFydGlhbHMgPSB7fTtcbiAgICAgIHJldCA9IGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IHBhcnRpYWxzIHN0YWNrIGZyYW1lIHByaW9yIHRvIGV4ZWMuXG4gICAgICAgIGxldCBvcmlnaW5hbCA9IGNvbnRhaW5lci5wYXJ0aWFscztcbiAgICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gZXh0ZW5kKHt9LCBvcmlnaW5hbCwgcHJvcHMucGFydGlhbHMpO1xuICAgICAgICBsZXQgcmV0ID0gZm4oY29udGV4dCwgb3B0aW9ucyk7XG4gICAgICAgIGNvbnRhaW5lci5wYXJ0aWFscyA9IG9yaWdpbmFsO1xuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBwcm9wcy5wYXJ0aWFsc1tvcHRpb25zLmFyZ3NbMF1dID0gb3B0aW9ucy5mbjtcblxuICAgIHJldHVybiByZXQ7XG4gIH0pO1xufVxuIiwiXG5jb25zdCBlcnJvclByb3BzID0gWydkZXNjcmlwdGlvbicsICdmaWxlTmFtZScsICdsaW5lTnVtYmVyJywgJ21lc3NhZ2UnLCAnbmFtZScsICdudW1iZXInLCAnc3RhY2snXTtcblxuZnVuY3Rpb24gRXhjZXB0aW9uKG1lc3NhZ2UsIG5vZGUpIHtcbiAgbGV0IGxvYyA9IG5vZGUgJiYgbm9kZS5sb2MsXG4gICAgICBsaW5lLFxuICAgICAgY29sdW1uO1xuICBpZiAobG9jKSB7XG4gICAgbGluZSA9IGxvYy5zdGFydC5saW5lO1xuICAgIGNvbHVtbiA9IGxvYy5zdGFydC5jb2x1bW47XG5cbiAgICBtZXNzYWdlICs9ICcgLSAnICsgbGluZSArICc6JyArIGNvbHVtbjtcbiAgfVxuXG4gIGxldCB0bXAgPSBFcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3IuY2FsbCh0aGlzLCBtZXNzYWdlKTtcblxuICAvLyBVbmZvcnR1bmF0ZWx5IGVycm9ycyBhcmUgbm90IGVudW1lcmFibGUgaW4gQ2hyb21lIChhdCBsZWFzdCksIHNvIGBmb3IgcHJvcCBpbiB0bXBgIGRvZXNuJ3Qgd29yay5cbiAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZXJyb3JQcm9wcy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgdGhpc1tlcnJvclByb3BzW2lkeF1dID0gdG1wW2Vycm9yUHJvcHNbaWR4XV07XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UpIHtcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFeGNlcHRpb24pO1xuICB9XG5cbiAgaWYgKGxvYykge1xuICAgIHRoaXMubGluZU51bWJlciA9IGxpbmU7XG4gICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XG4gIH1cbn1cblxuRXhjZXB0aW9uLnByb3RvdHlwZSA9IG5ldyBFcnJvcigpO1xuXG5leHBvcnQgZGVmYXVsdCBFeGNlcHRpb247XG4iLCJpbXBvcnQgcmVnaXN0ZXJCbG9ja0hlbHBlck1pc3NpbmcgZnJvbSAnLi9oZWxwZXJzL2Jsb2NrLWhlbHBlci1taXNzaW5nJztcbmltcG9ydCByZWdpc3RlckVhY2ggZnJvbSAnLi9oZWxwZXJzL2VhY2gnO1xuaW1wb3J0IHJlZ2lzdGVySGVscGVyTWlzc2luZyBmcm9tICcuL2hlbHBlcnMvaGVscGVyLW1pc3NpbmcnO1xuaW1wb3J0IHJlZ2lzdGVySWYgZnJvbSAnLi9oZWxwZXJzL2lmJztcbmltcG9ydCByZWdpc3RlckxvZyBmcm9tICcuL2hlbHBlcnMvbG9nJztcbmltcG9ydCByZWdpc3Rlckxvb2t1cCBmcm9tICcuL2hlbHBlcnMvbG9va3VwJztcbmltcG9ydCByZWdpc3RlcldpdGggZnJvbSAnLi9oZWxwZXJzL3dpdGgnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJEZWZhdWx0SGVscGVycyhpbnN0YW5jZSkge1xuICByZWdpc3RlckJsb2NrSGVscGVyTWlzc2luZyhpbnN0YW5jZSk7XG4gIHJlZ2lzdGVyRWFjaChpbnN0YW5jZSk7XG4gIHJlZ2lzdGVySGVscGVyTWlzc2luZyhpbnN0YW5jZSk7XG4gIHJlZ2lzdGVySWYoaW5zdGFuY2UpO1xuICByZWdpc3RlckxvZyhpbnN0YW5jZSk7XG4gIHJlZ2lzdGVyTG9va3VwKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJXaXRoKGluc3RhbmNlKTtcbn1cbiIsImltcG9ydCB7YXBwZW5kQ29udGV4dFBhdGgsIGNyZWF0ZUZyYW1lLCBpc0FycmF5fSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdibG9ja0hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgbGV0IGludmVyc2UgPSBvcHRpb25zLmludmVyc2UsXG4gICAgICAgIGZuID0gb3B0aW9ucy5mbjtcblxuICAgIGlmIChjb250ZXh0ID09PSB0cnVlKSB7XG4gICAgICByZXR1cm4gZm4odGhpcyk7XG4gICAgfSBlbHNlIGlmIChjb250ZXh0ID09PSBmYWxzZSB8fCBjb250ZXh0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBpbnZlcnNlKHRoaXMpO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheShjb250ZXh0KSkge1xuICAgICAgaWYgKGNvbnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAob3B0aW9ucy5pZHMpIHtcbiAgICAgICAgICBvcHRpb25zLmlkcyA9IFtvcHRpb25zLm5hbWVdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGluc3RhbmNlLmhlbHBlcnMuZWFjaChjb250ZXh0LCBvcHRpb25zKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBpbnZlcnNlKHRoaXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7XG4gICAgICAgIGxldCBkYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICAgICAgZGF0YS5jb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5uYW1lKTtcbiAgICAgICAgb3B0aW9ucyA9IHtkYXRhOiBkYXRhfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZuKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgIH1cbiAgfSk7XG59XG4iLCJpbXBvcnQge2FwcGVuZENvbnRleHRQYXRoLCBibG9ja1BhcmFtcywgY3JlYXRlRnJhbWUsIGlzQXJyYXksIGlzRnVuY3Rpb259IGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi4vZXhjZXB0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2VhY2gnLCBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdNdXN0IHBhc3MgaXRlcmF0b3IgdG8gI2VhY2gnKTtcbiAgICB9XG5cbiAgICBsZXQgZm4gPSBvcHRpb25zLmZuLFxuICAgICAgICBpbnZlcnNlID0gb3B0aW9ucy5pbnZlcnNlLFxuICAgICAgICBpID0gMCxcbiAgICAgICAgcmV0ID0gJycsXG4gICAgICAgIGRhdGEsXG4gICAgICAgIGNvbnRleHRQYXRoO1xuXG4gICAgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmlkcykge1xuICAgICAgY29udGV4dFBhdGggPSBhcHBlbmRDb250ZXh0UGF0aChvcHRpb25zLmRhdGEuY29udGV4dFBhdGgsIG9wdGlvbnMuaWRzWzBdKSArICcuJztcbiAgICB9XG5cbiAgICBpZiAoaXNGdW5jdGlvbihjb250ZXh0KSkgeyBjb250ZXh0ID0gY29udGV4dC5jYWxsKHRoaXMpOyB9XG5cbiAgICBpZiAob3B0aW9ucy5kYXRhKSB7XG4gICAgICBkYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBleGVjSXRlcmF0aW9uKGZpZWxkLCBpbmRleCwgbGFzdCkge1xuICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgZGF0YS5rZXkgPSBmaWVsZDtcbiAgICAgICAgZGF0YS5pbmRleCA9IGluZGV4O1xuICAgICAgICBkYXRhLmZpcnN0ID0gaW5kZXggPT09IDA7XG4gICAgICAgIGRhdGEubGFzdCA9ICEhbGFzdDtcblxuICAgICAgICBpZiAoY29udGV4dFBhdGgpIHtcbiAgICAgICAgICBkYXRhLmNvbnRleHRQYXRoID0gY29udGV4dFBhdGggKyBmaWVsZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXQgPSByZXQgKyBmbihjb250ZXh0W2ZpZWxkXSwge1xuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBibG9ja1BhcmFtczogYmxvY2tQYXJhbXMoW2NvbnRleHRbZmllbGRdLCBmaWVsZF0sIFtjb250ZXh0UGF0aCArIGZpZWxkLCBudWxsXSlcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmIChjb250ZXh0ICYmIHR5cGVvZiBjb250ZXh0ID09PSAnb2JqZWN0Jykge1xuICAgICAgaWYgKGlzQXJyYXkoY29udGV4dCkpIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IGNvbnRleHQubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgaWYgKGkgaW4gY29udGV4dCkge1xuICAgICAgICAgICAgZXhlY0l0ZXJhdGlvbihpLCBpLCBpID09PSBjb250ZXh0Lmxlbmd0aCAtIDEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHByaW9yS2V5O1xuXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBjb250ZXh0KSB7XG4gICAgICAgICAgaWYgKGNvbnRleHQuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgLy8gV2UncmUgcnVubmluZyB0aGUgaXRlcmF0aW9ucyBvbmUgc3RlcCBvdXQgb2Ygc3luYyBzbyB3ZSBjYW4gZGV0ZWN0XG4gICAgICAgICAgICAvLyB0aGUgbGFzdCBpdGVyYXRpb24gd2l0aG91dCBoYXZlIHRvIHNjYW4gdGhlIG9iamVjdCB0d2ljZSBhbmQgY3JlYXRlXG4gICAgICAgICAgICAvLyBhbiBpdGVybWVkaWF0ZSBrZXlzIGFycmF5LlxuICAgICAgICAgICAgaWYgKHByaW9yS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgZXhlY0l0ZXJhdGlvbihwcmlvcktleSwgaSAtIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJpb3JLZXkgPSBrZXk7XG4gICAgICAgICAgICBpKys7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChwcmlvcktleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgZXhlY0l0ZXJhdGlvbihwcmlvcktleSwgaSAtIDEsIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGkgPT09IDApIHtcbiAgICAgIHJldCA9IGludmVyc2UodGhpcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbiAgfSk7XG59XG4iLCJpbXBvcnQgRXhjZXB0aW9uIGZyb20gJy4uL2V4Y2VwdGlvbic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdoZWxwZXJNaXNzaW5nJywgZnVuY3Rpb24oLyogW2FyZ3MsIF1vcHRpb25zICovKSB7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIC8vIEEgbWlzc2luZyBmaWVsZCBpbiBhIHt7Zm9vfX0gY29uc3RydWN0LlxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU29tZW9uZSBpcyBhY3R1YWxseSB0cnlpbmcgdG8gY2FsbCBzb21ldGhpbmcsIGJsb3cgdXAuXG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdNaXNzaW5nIGhlbHBlcjogXCInICsgYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXS5uYW1lICsgJ1wiJyk7XG4gICAgfVxuICB9KTtcbn1cbiIsImltcG9ydCB7aXNFbXB0eSwgaXNGdW5jdGlvbn0gZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignaWYnLCBmdW5jdGlvbihjb25kaXRpb25hbCwgb3B0aW9ucykge1xuICAgIGlmIChpc0Z1bmN0aW9uKGNvbmRpdGlvbmFsKSkgeyBjb25kaXRpb25hbCA9IGNvbmRpdGlvbmFsLmNhbGwodGhpcyk7IH1cblxuICAgIC8vIERlZmF1bHQgYmVoYXZpb3IgaXMgdG8gcmVuZGVyIHRoZSBwb3NpdGl2ZSBwYXRoIGlmIHRoZSB2YWx1ZSBpcyB0cnV0aHkgYW5kIG5vdCBlbXB0eS5cbiAgICAvLyBUaGUgYGluY2x1ZGVaZXJvYCBvcHRpb24gbWF5IGJlIHNldCB0byB0cmVhdCB0aGUgY29uZHRpb25hbCBhcyBwdXJlbHkgbm90IGVtcHR5IGJhc2VkIG9uIHRoZVxuICAgIC8vIGJlaGF2aW9yIG9mIGlzRW1wdHkuIEVmZmVjdGl2ZWx5IHRoaXMgZGV0ZXJtaW5lcyBpZiAwIGlzIGhhbmRsZWQgYnkgdGhlIHBvc2l0aXZlIHBhdGggb3IgbmVnYXRpdmUuXG4gICAgaWYgKCghb3B0aW9ucy5oYXNoLmluY2x1ZGVaZXJvICYmICFjb25kaXRpb25hbCkgfHwgaXNFbXB0eShjb25kaXRpb25hbCkpIHtcbiAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xuICAgIH1cbiAgfSk7XG5cbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ3VubGVzcycsIGZ1bmN0aW9uKGNvbmRpdGlvbmFsLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIGluc3RhbmNlLmhlbHBlcnNbJ2lmJ10uY2FsbCh0aGlzLCBjb25kaXRpb25hbCwge2ZuOiBvcHRpb25zLmludmVyc2UsIGludmVyc2U6IG9wdGlvbnMuZm4sIGhhc2g6IG9wdGlvbnMuaGFzaH0pO1xuICB9KTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdsb2cnLCBmdW5jdGlvbigvKiBtZXNzYWdlLCBvcHRpb25zICovKSB7XG4gICAgbGV0IGFyZ3MgPSBbdW5kZWZpbmVkXSxcbiAgICAgICAgb3B0aW9ucyA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBhcmdzLnB1c2goYXJndW1lbnRzW2ldKTtcbiAgICB9XG5cbiAgICBsZXQgbGV2ZWwgPSAxO1xuICAgIGlmIChvcHRpb25zLmhhc2gubGV2ZWwgIT0gbnVsbCkge1xuICAgICAgbGV2ZWwgPSBvcHRpb25zLmhhc2gubGV2ZWw7XG4gICAgfSBlbHNlIGlmIChvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5kYXRhLmxldmVsICE9IG51bGwpIHtcbiAgICAgIGxldmVsID0gb3B0aW9ucy5kYXRhLmxldmVsO1xuICAgIH1cbiAgICBhcmdzWzBdID0gbGV2ZWw7XG5cbiAgICBpbnN0YW5jZS5sb2coLi4uIGFyZ3MpO1xuICB9KTtcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdsb29rdXAnLCBmdW5jdGlvbihvYmosIGZpZWxkKSB7XG4gICAgcmV0dXJuIG9iaiAmJiBvYmpbZmllbGRdO1xuICB9KTtcbn1cbiIsImltcG9ydCB7YXBwZW5kQ29udGV4dFBhdGgsIGJsb2NrUGFyYW1zLCBjcmVhdGVGcmFtZSwgaXNFbXB0eSwgaXNGdW5jdGlvbn0gZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignd2l0aCcsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihjb250ZXh0KSkgeyBjb250ZXh0ID0gY29udGV4dC5jYWxsKHRoaXMpOyB9XG5cbiAgICBsZXQgZm4gPSBvcHRpb25zLmZuO1xuXG4gICAgaWYgKCFpc0VtcHR5KGNvbnRleHQpKSB7XG4gICAgICBsZXQgZGF0YSA9IG9wdGlvbnMuZGF0YTtcbiAgICAgIGlmIChvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5pZHMpIHtcbiAgICAgICAgZGF0YSA9IGNyZWF0ZUZyYW1lKG9wdGlvbnMuZGF0YSk7XG4gICAgICAgIGRhdGEuY29udGV4dFBhdGggPSBhcHBlbmRDb250ZXh0UGF0aChvcHRpb25zLmRhdGEuY29udGV4dFBhdGgsIG9wdGlvbnMuaWRzWzBdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZuKGNvbnRleHQsIHtcbiAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgYmxvY2tQYXJhbXM6IGJsb2NrUGFyYW1zKFtjb250ZXh0XSwgW2RhdGEgJiYgZGF0YS5jb250ZXh0UGF0aF0pXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcbiAgICB9XG4gIH0pO1xufVxuIiwiaW1wb3J0IHtpbmRleE9mfSBmcm9tICcuL3V0aWxzJztcblxubGV0IGxvZ2dlciA9IHtcbiAgbWV0aG9kTWFwOiBbJ2RlYnVnJywgJ2luZm8nLCAnd2FybicsICdlcnJvciddLFxuICBsZXZlbDogJ2luZm8nLFxuXG4gIC8vIE1hcHMgYSBnaXZlbiBsZXZlbCB2YWx1ZSB0byB0aGUgYG1ldGhvZE1hcGAgaW5kZXhlcyBhYm92ZS5cbiAgbG9va3VwTGV2ZWw6IGZ1bmN0aW9uKGxldmVsKSB7XG4gICAgaWYgKHR5cGVvZiBsZXZlbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGxldCBsZXZlbE1hcCA9IGluZGV4T2YobG9nZ2VyLm1ldGhvZE1hcCwgbGV2ZWwudG9Mb3dlckNhc2UoKSk7XG4gICAgICBpZiAobGV2ZWxNYXAgPj0gMCkge1xuICAgICAgICBsZXZlbCA9IGxldmVsTWFwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV2ZWwgPSBwYXJzZUludChsZXZlbCwgMTApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBsZXZlbDtcbiAgfSxcblxuICAvLyBDYW4gYmUgb3ZlcnJpZGRlbiBpbiB0aGUgaG9zdCBlbnZpcm9ubWVudFxuICBsb2c6IGZ1bmN0aW9uKGxldmVsLCAuLi5tZXNzYWdlKSB7XG4gICAgbGV2ZWwgPSBsb2dnZXIubG9va3VwTGV2ZWwobGV2ZWwpO1xuXG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBsb2dnZXIubG9va3VwTGV2ZWwobG9nZ2VyLmxldmVsKSA8PSBsZXZlbCkge1xuICAgICAgbGV0IG1ldGhvZCA9IGxvZ2dlci5tZXRob2RNYXBbbGV2ZWxdO1xuICAgICAgaWYgKCFjb25zb2xlW21ldGhvZF0pIHsgICAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgbWV0aG9kID0gJ2xvZyc7XG4gICAgICB9XG4gICAgICBjb25zb2xlW21ldGhvZF0oLi4ubWVzc2FnZSk7ICAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nZ2VyO1xuIiwiLyogZ2xvYmFsIHdpbmRvdyAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oSGFuZGxlYmFycykge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICBsZXQgcm9vdCA9IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogd2luZG93LFxuICAgICAgJEhhbmRsZWJhcnMgPSByb290LkhhbmRsZWJhcnM7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIEhhbmRsZWJhcnMubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChyb290LkhhbmRsZWJhcnMgPT09IEhhbmRsZWJhcnMpIHtcbiAgICAgIHJvb3QuSGFuZGxlYmFycyA9ICRIYW5kbGViYXJzO1xuICAgIH1cbiAgICByZXR1cm4gSGFuZGxlYmFycztcbiAgfTtcbn1cbiIsImltcG9ydCAqIGFzIFV0aWxzIGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuL2V4Y2VwdGlvbic7XG5pbXBvcnQgeyBDT01QSUxFUl9SRVZJU0lPTiwgUkVWSVNJT05fQ0hBTkdFUywgY3JlYXRlRnJhbWUgfSBmcm9tICcuL2Jhc2UnO1xuXG5leHBvcnQgZnVuY3Rpb24gY2hlY2tSZXZpc2lvbihjb21waWxlckluZm8pIHtcbiAgY29uc3QgY29tcGlsZXJSZXZpc2lvbiA9IGNvbXBpbGVySW5mbyAmJiBjb21waWxlckluZm9bMF0gfHwgMSxcbiAgICAgICAgY3VycmVudFJldmlzaW9uID0gQ09NUElMRVJfUkVWSVNJT047XG5cbiAgaWYgKGNvbXBpbGVyUmV2aXNpb24gIT09IGN1cnJlbnRSZXZpc2lvbikge1xuICAgIGlmIChjb21waWxlclJldmlzaW9uIDwgY3VycmVudFJldmlzaW9uKSB7XG4gICAgICBjb25zdCBydW50aW1lVmVyc2lvbnMgPSBSRVZJU0lPTl9DSEFOR0VTW2N1cnJlbnRSZXZpc2lvbl0sXG4gICAgICAgICAgICBjb21waWxlclZlcnNpb25zID0gUkVWSVNJT05fQ0hBTkdFU1tjb21waWxlclJldmlzaW9uXTtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1RlbXBsYXRlIHdhcyBwcmVjb21waWxlZCB3aXRoIGFuIG9sZGVyIHZlcnNpb24gb2YgSGFuZGxlYmFycyB0aGFuIHRoZSBjdXJyZW50IHJ1bnRpbWUuICcgK1xuICAgICAgICAgICAgJ1BsZWFzZSB1cGRhdGUgeW91ciBwcmVjb21waWxlciB0byBhIG5ld2VyIHZlcnNpb24gKCcgKyBydW50aW1lVmVyc2lvbnMgKyAnKSBvciBkb3duZ3JhZGUgeW91ciBydW50aW1lIHRvIGFuIG9sZGVyIHZlcnNpb24gKCcgKyBjb21waWxlclZlcnNpb25zICsgJykuJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVzZSB0aGUgZW1iZWRkZWQgdmVyc2lvbiBpbmZvIHNpbmNlIHRoZSBydW50aW1lIGRvZXNuJ3Qga25vdyBhYm91dCB0aGlzIHJldmlzaW9uIHlldFxuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGVtcGxhdGUgd2FzIHByZWNvbXBpbGVkIHdpdGggYSBuZXdlciB2ZXJzaW9uIG9mIEhhbmRsZWJhcnMgdGhhbiB0aGUgY3VycmVudCBydW50aW1lLiAnICtcbiAgICAgICAgICAgICdQbGVhc2UgdXBkYXRlIHlvdXIgcnVudGltZSB0byBhIG5ld2VyIHZlcnNpb24gKCcgKyBjb21waWxlckluZm9bMV0gKyAnKS4nKTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRlKHRlbXBsYXRlU3BlYywgZW52KSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGlmICghZW52KSB7XG4gICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignTm8gZW52aXJvbm1lbnQgcGFzc2VkIHRvIHRlbXBsYXRlJyk7XG4gIH1cbiAgaWYgKCF0ZW1wbGF0ZVNwZWMgfHwgIXRlbXBsYXRlU3BlYy5tYWluKSB7XG4gICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVW5rbm93biB0ZW1wbGF0ZSBvYmplY3Q6ICcgKyB0eXBlb2YgdGVtcGxhdGVTcGVjKTtcbiAgfVxuXG4gIHRlbXBsYXRlU3BlYy5tYWluLmRlY29yYXRvciA9IHRlbXBsYXRlU3BlYy5tYWluX2Q7XG5cbiAgLy8gTm90ZTogVXNpbmcgZW52LlZNIHJlZmVyZW5jZXMgcmF0aGVyIHRoYW4gbG9jYWwgdmFyIHJlZmVyZW5jZXMgdGhyb3VnaG91dCB0aGlzIHNlY3Rpb24gdG8gYWxsb3dcbiAgLy8gZm9yIGV4dGVybmFsIHVzZXJzIHRvIG92ZXJyaWRlIHRoZXNlIGFzIHBzdWVkby1zdXBwb3J0ZWQgQVBJcy5cbiAgZW52LlZNLmNoZWNrUmV2aXNpb24odGVtcGxhdGVTcGVjLmNvbXBpbGVyKTtcblxuICBmdW5jdGlvbiBpbnZva2VQYXJ0aWFsV3JhcHBlcihwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuaGFzaCkge1xuICAgICAgY29udGV4dCA9IFV0aWxzLmV4dGVuZCh7fSwgY29udGV4dCwgb3B0aW9ucy5oYXNoKTtcbiAgICAgIGlmIChvcHRpb25zLmlkcykge1xuICAgICAgICBvcHRpb25zLmlkc1swXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGFydGlhbCA9IGVudi5WTS5yZXNvbHZlUGFydGlhbC5jYWxsKHRoaXMsIHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpO1xuICAgIGxldCByZXN1bHQgPSBlbnYuVk0uaW52b2tlUGFydGlhbC5jYWxsKHRoaXMsIHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpO1xuXG4gICAgaWYgKHJlc3VsdCA9PSBudWxsICYmIGVudi5jb21waWxlKSB7XG4gICAgICBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV0gPSBlbnYuY29tcGlsZShwYXJ0aWFsLCB0ZW1wbGF0ZVNwZWMuY29tcGlsZXJPcHRpb25zLCBlbnYpO1xuICAgICAgcmVzdWx0ID0gb3B0aW9ucy5wYXJ0aWFsc1tvcHRpb25zLm5hbWVdKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgIH1cbiAgICBpZiAocmVzdWx0ICE9IG51bGwpIHtcbiAgICAgIGlmIChvcHRpb25zLmluZGVudCkge1xuICAgICAgICBsZXQgbGluZXMgPSByZXN1bHQuc3BsaXQoJ1xcbicpO1xuICAgICAgICBmb3IgKGxldCBpID0gMCwgbCA9IGxpbmVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGlmICghbGluZXNbaV0gJiYgaSArIDEgPT09IGwpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGxpbmVzW2ldID0gb3B0aW9ucy5pbmRlbnQgKyBsaW5lc1tpXTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgPSBsaW5lcy5qb2luKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ1RoZSBwYXJ0aWFsICcgKyBvcHRpb25zLm5hbWUgKyAnIGNvdWxkIG5vdCBiZSBjb21waWxlZCB3aGVuIHJ1bm5pbmcgaW4gcnVudGltZS1vbmx5IG1vZGUnKTtcbiAgICB9XG4gIH1cblxuICAvLyBKdXN0IGFkZCB3YXRlclxuICBsZXQgY29udGFpbmVyID0ge1xuICAgIHN0cmljdDogZnVuY3Rpb24ob2JqLCBuYW1lKSB7XG4gICAgICBpZiAoIShuYW1lIGluIG9iaikpIHtcbiAgICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignXCInICsgbmFtZSArICdcIiBub3QgZGVmaW5lZCBpbiAnICsgb2JqKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYmpbbmFtZV07XG4gICAgfSxcbiAgICBsb29rdXA6IGZ1bmN0aW9uKGRlcHRocywgbmFtZSkge1xuICAgICAgY29uc3QgbGVuID0gZGVwdGhzLmxlbmd0aDtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKGRlcHRoc1tpXSAmJiBkZXB0aHNbaV1bbmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBkZXB0aHNbaV1bbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuICAgIGxhbWJkYTogZnVuY3Rpb24oY3VycmVudCwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiBjdXJyZW50ID09PSAnZnVuY3Rpb24nID8gY3VycmVudC5jYWxsKGNvbnRleHQpIDogY3VycmVudDtcbiAgICB9LFxuXG4gICAgZXNjYXBlRXhwcmVzc2lvbjogVXRpbHMuZXNjYXBlRXhwcmVzc2lvbixcbiAgICBpbnZva2VQYXJ0aWFsOiBpbnZva2VQYXJ0aWFsV3JhcHBlcixcblxuICAgIGZuOiBmdW5jdGlvbihpKSB7XG4gICAgICBsZXQgcmV0ID0gdGVtcGxhdGVTcGVjW2ldO1xuICAgICAgcmV0LmRlY29yYXRvciA9IHRlbXBsYXRlU3BlY1tpICsgJ19kJ107XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH0sXG5cbiAgICBwcm9ncmFtczogW10sXG4gICAgcHJvZ3JhbTogZnVuY3Rpb24oaSwgZGF0YSwgZGVjbGFyZWRCbG9ja1BhcmFtcywgYmxvY2tQYXJhbXMsIGRlcHRocykge1xuICAgICAgbGV0IHByb2dyYW1XcmFwcGVyID0gdGhpcy5wcm9ncmFtc1tpXSxcbiAgICAgICAgICBmbiA9IHRoaXMuZm4oaSk7XG4gICAgICBpZiAoZGF0YSB8fCBkZXB0aHMgfHwgYmxvY2tQYXJhbXMgfHwgZGVjbGFyZWRCbG9ja1BhcmFtcykge1xuICAgICAgICBwcm9ncmFtV3JhcHBlciA9IHdyYXBQcm9ncmFtKHRoaXMsIGksIGZuLCBkYXRhLCBkZWNsYXJlZEJsb2NrUGFyYW1zLCBibG9ja1BhcmFtcywgZGVwdGhzKTtcbiAgICAgIH0gZWxzZSBpZiAoIXByb2dyYW1XcmFwcGVyKSB7XG4gICAgICAgIHByb2dyYW1XcmFwcGVyID0gdGhpcy5wcm9ncmFtc1tpXSA9IHdyYXBQcm9ncmFtKHRoaXMsIGksIGZuKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwcm9ncmFtV3JhcHBlcjtcbiAgICB9LFxuXG4gICAgZGF0YTogZnVuY3Rpb24odmFsdWUsIGRlcHRoKSB7XG4gICAgICB3aGlsZSAodmFsdWUgJiYgZGVwdGgtLSkge1xuICAgICAgICB2YWx1ZSA9IHZhbHVlLl9wYXJlbnQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBtZXJnZTogZnVuY3Rpb24ocGFyYW0sIGNvbW1vbikge1xuICAgICAgbGV0IG9iaiA9IHBhcmFtIHx8IGNvbW1vbjtcblxuICAgICAgaWYgKHBhcmFtICYmIGNvbW1vbiAmJiAocGFyYW0gIT09IGNvbW1vbikpIHtcbiAgICAgICAgb2JqID0gVXRpbHMuZXh0ZW5kKHt9LCBjb21tb24sIHBhcmFtKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9LFxuXG4gICAgbm9vcDogZW52LlZNLm5vb3AsXG4gICAgY29tcGlsZXJJbmZvOiB0ZW1wbGF0ZVNwZWMuY29tcGlsZXJcbiAgfTtcblxuICBmdW5jdGlvbiByZXQoY29udGV4dCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGRhdGEgPSBvcHRpb25zLmRhdGE7XG5cbiAgICByZXQuX3NldHVwKG9wdGlvbnMpO1xuICAgIGlmICghb3B0aW9ucy5wYXJ0aWFsICYmIHRlbXBsYXRlU3BlYy51c2VEYXRhKSB7XG4gICAgICBkYXRhID0gaW5pdERhdGEoY29udGV4dCwgZGF0YSk7XG4gICAgfVxuICAgIGxldCBkZXB0aHMsXG4gICAgICAgIGJsb2NrUGFyYW1zID0gdGVtcGxhdGVTcGVjLnVzZUJsb2NrUGFyYW1zID8gW10gOiB1bmRlZmluZWQ7XG4gICAgaWYgKHRlbXBsYXRlU3BlYy51c2VEZXB0aHMpIHtcbiAgICAgIGlmIChvcHRpb25zLmRlcHRocykge1xuICAgICAgICBkZXB0aHMgPSBjb250ZXh0ICE9PSBvcHRpb25zLmRlcHRoc1swXSA/IFtjb250ZXh0XS5jb25jYXQob3B0aW9ucy5kZXB0aHMpIDogb3B0aW9ucy5kZXB0aHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZXB0aHMgPSBbY29udGV4dF07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFpbihjb250ZXh0LyosIG9wdGlvbnMqLykge1xuICAgICAgcmV0dXJuICcnICsgdGVtcGxhdGVTcGVjLm1haW4oY29udGFpbmVyLCBjb250ZXh0LCBjb250YWluZXIuaGVscGVycywgY29udGFpbmVyLnBhcnRpYWxzLCBkYXRhLCBibG9ja1BhcmFtcywgZGVwdGhzKTtcbiAgICB9XG4gICAgbWFpbiA9IGV4ZWN1dGVEZWNvcmF0b3JzKHRlbXBsYXRlU3BlYy5tYWluLCBtYWluLCBjb250YWluZXIsIG9wdGlvbnMuZGVwdGhzIHx8IFtdLCBkYXRhLCBibG9ja1BhcmFtcyk7XG4gICAgcmV0dXJuIG1haW4oY29udGV4dCwgb3B0aW9ucyk7XG4gIH1cbiAgcmV0LmlzVG9wID0gdHJ1ZTtcblxuICByZXQuX3NldHVwID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucy5wYXJ0aWFsKSB7XG4gICAgICBjb250YWluZXIuaGVscGVycyA9IGNvbnRhaW5lci5tZXJnZShvcHRpb25zLmhlbHBlcnMsIGVudi5oZWxwZXJzKTtcblxuICAgICAgaWYgKHRlbXBsYXRlU3BlYy51c2VQYXJ0aWFsKSB7XG4gICAgICAgIGNvbnRhaW5lci5wYXJ0aWFscyA9IGNvbnRhaW5lci5tZXJnZShvcHRpb25zLnBhcnRpYWxzLCBlbnYucGFydGlhbHMpO1xuICAgICAgfVxuICAgICAgaWYgKHRlbXBsYXRlU3BlYy51c2VQYXJ0aWFsIHx8IHRlbXBsYXRlU3BlYy51c2VEZWNvcmF0b3JzKSB7XG4gICAgICAgIGNvbnRhaW5lci5kZWNvcmF0b3JzID0gY29udGFpbmVyLm1lcmdlKG9wdGlvbnMuZGVjb3JhdG9ycywgZW52LmRlY29yYXRvcnMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb250YWluZXIuaGVscGVycyA9IG9wdGlvbnMuaGVscGVycztcbiAgICAgIGNvbnRhaW5lci5wYXJ0aWFscyA9IG9wdGlvbnMucGFydGlhbHM7XG4gICAgICBjb250YWluZXIuZGVjb3JhdG9ycyA9IG9wdGlvbnMuZGVjb3JhdG9ycztcbiAgICB9XG4gIH07XG5cbiAgcmV0Ll9jaGlsZCA9IGZ1bmN0aW9uKGksIGRhdGEsIGJsb2NrUGFyYW1zLCBkZXB0aHMpIHtcbiAgICBpZiAodGVtcGxhdGVTcGVjLnVzZUJsb2NrUGFyYW1zICYmICFibG9ja1BhcmFtcykge1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignbXVzdCBwYXNzIGJsb2NrIHBhcmFtcycpO1xuICAgIH1cbiAgICBpZiAodGVtcGxhdGVTcGVjLnVzZURlcHRocyAmJiAhZGVwdGhzKSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdtdXN0IHBhc3MgcGFyZW50IGRlcHRocycpO1xuICAgIH1cblxuICAgIHJldHVybiB3cmFwUHJvZ3JhbShjb250YWluZXIsIGksIHRlbXBsYXRlU3BlY1tpXSwgZGF0YSwgMCwgYmxvY2tQYXJhbXMsIGRlcHRocyk7XG4gIH07XG4gIHJldHVybiByZXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3cmFwUHJvZ3JhbShjb250YWluZXIsIGksIGZuLCBkYXRhLCBkZWNsYXJlZEJsb2NrUGFyYW1zLCBibG9ja1BhcmFtcywgZGVwdGhzKSB7XG4gIGZ1bmN0aW9uIHByb2coY29udGV4dCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgbGV0IGN1cnJlbnREZXB0aHMgPSBkZXB0aHM7XG4gICAgaWYgKGRlcHRocyAmJiBjb250ZXh0ICE9PSBkZXB0aHNbMF0pIHtcbiAgICAgIGN1cnJlbnREZXB0aHMgPSBbY29udGV4dF0uY29uY2F0KGRlcHRocyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZuKGNvbnRhaW5lcixcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgY29udGFpbmVyLmhlbHBlcnMsIGNvbnRhaW5lci5wYXJ0aWFscyxcbiAgICAgICAgb3B0aW9ucy5kYXRhIHx8IGRhdGEsXG4gICAgICAgIGJsb2NrUGFyYW1zICYmIFtvcHRpb25zLmJsb2NrUGFyYW1zXS5jb25jYXQoYmxvY2tQYXJhbXMpLFxuICAgICAgICBjdXJyZW50RGVwdGhzKTtcbiAgfVxuXG4gIHByb2cgPSBleGVjdXRlRGVjb3JhdG9ycyhmbiwgcHJvZywgY29udGFpbmVyLCBkZXB0aHMsIGRhdGEsIGJsb2NrUGFyYW1zKTtcblxuICBwcm9nLnByb2dyYW0gPSBpO1xuICBwcm9nLmRlcHRoID0gZGVwdGhzID8gZGVwdGhzLmxlbmd0aCA6IDA7XG4gIHByb2cuYmxvY2tQYXJhbXMgPSBkZWNsYXJlZEJsb2NrUGFyYW1zIHx8IDA7XG4gIHJldHVybiBwcm9nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVBhcnRpYWwocGFydGlhbCwgY29udGV4dCwgb3B0aW9ucykge1xuICBpZiAoIXBhcnRpYWwpIHtcbiAgICBpZiAob3B0aW9ucy5uYW1lID09PSAnQHBhcnRpYWwtYmxvY2snKSB7XG4gICAgICBwYXJ0aWFsID0gb3B0aW9ucy5kYXRhWydwYXJ0aWFsLWJsb2NrJ107XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcnRpYWwgPSBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV07XG4gICAgfVxuICB9IGVsc2UgaWYgKCFwYXJ0aWFsLmNhbGwgJiYgIW9wdGlvbnMubmFtZSkge1xuICAgIC8vIFRoaXMgaXMgYSBkeW5hbWljIHBhcnRpYWwgdGhhdCByZXR1cm5lZCBhIHN0cmluZ1xuICAgIG9wdGlvbnMubmFtZSA9IHBhcnRpYWw7XG4gICAgcGFydGlhbCA9IG9wdGlvbnMucGFydGlhbHNbcGFydGlhbF07XG4gIH1cbiAgcmV0dXJuIHBhcnRpYWw7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpbnZva2VQYXJ0aWFsKHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucy5wYXJ0aWFsID0gdHJ1ZTtcbiAgaWYgKG9wdGlvbnMuaWRzKSB7XG4gICAgb3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoID0gb3B0aW9ucy5pZHNbMF0gfHwgb3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoO1xuICB9XG5cbiAgbGV0IHBhcnRpYWxCbG9jaztcbiAgaWYgKG9wdGlvbnMuZm4gJiYgb3B0aW9ucy5mbiAhPT0gbm9vcCkge1xuICAgIG9wdGlvbnMuZGF0YSA9IGNyZWF0ZUZyYW1lKG9wdGlvbnMuZGF0YSk7XG4gICAgcGFydGlhbEJsb2NrID0gb3B0aW9ucy5kYXRhWydwYXJ0aWFsLWJsb2NrJ10gPSBvcHRpb25zLmZuO1xuXG4gICAgaWYgKHBhcnRpYWxCbG9jay5wYXJ0aWFscykge1xuICAgICAgb3B0aW9ucy5wYXJ0aWFscyA9IFV0aWxzLmV4dGVuZCh7fSwgb3B0aW9ucy5wYXJ0aWFscywgcGFydGlhbEJsb2NrLnBhcnRpYWxzKTtcbiAgICB9XG4gIH1cblxuICBpZiAocGFydGlhbCA9PT0gdW5kZWZpbmVkICYmIHBhcnRpYWxCbG9jaykge1xuICAgIHBhcnRpYWwgPSBwYXJ0aWFsQmxvY2s7XG4gIH1cblxuICBpZiAocGFydGlhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGhlIHBhcnRpYWwgJyArIG9wdGlvbnMubmFtZSArICcgY291bGQgbm90IGJlIGZvdW5kJyk7XG4gIH0gZWxzZSBpZiAocGFydGlhbCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgcmV0dXJuIHBhcnRpYWwoY29udGV4dCwgb3B0aW9ucyk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG5vb3AoKSB7IHJldHVybiAnJzsgfVxuXG5mdW5jdGlvbiBpbml0RGF0YShjb250ZXh0LCBkYXRhKSB7XG4gIGlmICghZGF0YSB8fCAhKCdyb290JyBpbiBkYXRhKSkge1xuICAgIGRhdGEgPSBkYXRhID8gY3JlYXRlRnJhbWUoZGF0YSkgOiB7fTtcbiAgICBkYXRhLnJvb3QgPSBjb250ZXh0O1xuICB9XG4gIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBleGVjdXRlRGVjb3JhdG9ycyhmbiwgcHJvZywgY29udGFpbmVyLCBkZXB0aHMsIGRhdGEsIGJsb2NrUGFyYW1zKSB7XG4gIGlmIChmbi5kZWNvcmF0b3IpIHtcbiAgICBsZXQgcHJvcHMgPSB7fTtcbiAgICBwcm9nID0gZm4uZGVjb3JhdG9yKHByb2csIHByb3BzLCBjb250YWluZXIsIGRlcHRocyAmJiBkZXB0aHNbMF0sIGRhdGEsIGJsb2NrUGFyYW1zLCBkZXB0aHMpO1xuICAgIFV0aWxzLmV4dGVuZChwcm9nLCBwcm9wcyk7XG4gIH1cbiAgcmV0dXJuIHByb2c7XG59XG4iLCIvLyBCdWlsZCBvdXQgb3VyIGJhc2ljIFNhZmVTdHJpbmcgdHlwZVxuZnVuY3Rpb24gU2FmZVN0cmluZyhzdHJpbmcpIHtcbiAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG59XG5cblNhZmVTdHJpbmcucHJvdG90eXBlLnRvU3RyaW5nID0gU2FmZVN0cmluZy5wcm90b3R5cGUudG9IVE1MID0gZnVuY3Rpb24oKSB7XG4gIHJldHVybiAnJyArIHRoaXMuc3RyaW5nO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2FmZVN0cmluZztcbiIsImNvbnN0IGVzY2FwZSA9IHtcbiAgJyYnOiAnJmFtcDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJz4nOiAnJmd0OycsXG4gICdcIic6ICcmcXVvdDsnLFxuICBcIidcIjogJyYjeDI3OycsXG4gICdgJzogJyYjeDYwOycsXG4gICc9JzogJyYjeDNEOydcbn07XG5cbmNvbnN0IGJhZENoYXJzID0gL1smPD5cIidgPV0vZyxcbiAgICAgIHBvc3NpYmxlID0gL1smPD5cIidgPV0vO1xuXG5mdW5jdGlvbiBlc2NhcGVDaGFyKGNocikge1xuICByZXR1cm4gZXNjYXBlW2Nocl07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRlbmQob2JqLyogLCAuLi5zb3VyY2UgKi8pIHtcbiAgZm9yIChsZXQgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBmb3IgKGxldCBrZXkgaW4gYXJndW1lbnRzW2ldKSB7XG4gICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGFyZ3VtZW50c1tpXSwga2V5KSkge1xuICAgICAgICBvYmpba2V5XSA9IGFyZ3VtZW50c1tpXVtrZXldO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59XG5cbmV4cG9ydCBsZXQgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vLyBTb3VyY2VkIGZyb20gbG9kYXNoXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYmVzdGllanMvbG9kYXNoL2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0XG4vKiBlc2xpbnQtZGlzYWJsZSBmdW5jLXN0eWxlICovXG5sZXQgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG59O1xuLy8gZmFsbGJhY2sgZm9yIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBhbmQgU2FmYXJpXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuaWYgKGlzRnVuY3Rpb24oL3gvKSkge1xuICBpc0Z1bmN0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nICYmIHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBGdW5jdGlvbl0nO1xuICB9O1xufVxuZXhwb3J0IHtpc0Z1bmN0aW9ufTtcbi8qIGVzbGludC1lbmFibGUgZnVuYy1zdHlsZSAqL1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuZXhwb3J0IGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JykgPyB0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgQXJyYXldJyA6IGZhbHNlO1xufTtcblxuLy8gT2xkZXIgSUUgdmVyc2lvbnMgZG8gbm90IGRpcmVjdGx5IHN1cHBvcnQgaW5kZXhPZiBzbyB3ZSBtdXN0IGltcGxlbWVudCBvdXIgb3duLCBzYWRseS5cbmV4cG9ydCBmdW5jdGlvbiBpbmRleE9mKGFycmF5LCB2YWx1ZSkge1xuICBmb3IgKGxldCBpID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBpZiAoYXJyYXlbaV0gPT09IHZhbHVlKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVFeHByZXNzaW9uKHN0cmluZykge1xuICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcbiAgICAvLyBkb24ndCBlc2NhcGUgU2FmZVN0cmluZ3MsIHNpbmNlIHRoZXkncmUgYWxyZWFkeSBzYWZlXG4gICAgaWYgKHN0cmluZyAmJiBzdHJpbmcudG9IVE1MKSB7XG4gICAgICByZXR1cm4gc3RyaW5nLnRvSFRNTCgpO1xuICAgIH0gZWxzZSBpZiAoc3RyaW5nID09IG51bGwpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9IGVsc2UgaWYgKCFzdHJpbmcpIHtcbiAgICAgIHJldHVybiBzdHJpbmcgKyAnJztcbiAgICB9XG5cbiAgICAvLyBGb3JjZSBhIHN0cmluZyBjb252ZXJzaW9uIGFzIHRoaXMgd2lsbCBiZSBkb25lIGJ5IHRoZSBhcHBlbmQgcmVnYXJkbGVzcyBhbmRcbiAgICAvLyB0aGUgcmVnZXggdGVzdCB3aWxsIGRvIHRoaXMgdHJhbnNwYXJlbnRseSBiZWhpbmQgdGhlIHNjZW5lcywgY2F1c2luZyBpc3N1ZXMgaWZcbiAgICAvLyBhbiBvYmplY3QncyB0byBzdHJpbmcgaGFzIGVzY2FwZWQgY2hhcmFjdGVycyBpbiBpdC5cbiAgICBzdHJpbmcgPSAnJyArIHN0cmluZztcbiAgfVxuXG4gIGlmICghcG9zc2libGUudGVzdChzdHJpbmcpKSB7IHJldHVybiBzdHJpbmc7IH1cbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKGJhZENoYXJzLCBlc2NhcGVDaGFyKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkodmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpICYmIHZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlRnJhbWUob2JqZWN0KSB7XG4gIGxldCBmcmFtZSA9IGV4dGVuZCh7fSwgb2JqZWN0KTtcbiAgZnJhbWUuX3BhcmVudCA9IG9iamVjdDtcbiAgcmV0dXJuIGZyYW1lO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYmxvY2tQYXJhbXMocGFyYW1zLCBpZHMpIHtcbiAgcGFyYW1zLnBhdGggPSBpZHM7XG4gIHJldHVybiBwYXJhbXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBlbmRDb250ZXh0UGF0aChjb250ZXh0UGF0aCwgaWQpIHtcbiAgcmV0dXJuIChjb250ZXh0UGF0aCA/IGNvbnRleHRQYXRoICsgJy4nIDogJycpICsgaWQ7XG59XG4iLCIvLyBDcmVhdGUgYSBzaW1wbGUgcGF0aCBhbGlhcyB0byBhbGxvdyBicm93c2VyaWZ5IHRvIHJlc29sdmVcbi8vIHRoZSBydW50aW1lIG9uIGEgc3VwcG9ydGVkIHBhdGguXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZGlzdC9janMvaGFuZGxlYmFycy5ydW50aW1lJylbJ2RlZmF1bHQnXTtcbiIsIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImhhbmRsZWJhcnMvcnVudGltZVwiKVtcImRlZmF1bHRcIl07XG4iLCIvKiFcbiAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjIuMS40XG4gKiBodHRwOi8vanF1ZXJ5LmNvbS9cbiAqXG4gKiBJbmNsdWRlcyBTaXp6bGUuanNcbiAqIGh0dHA6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IDIwMDUsIDIwMTQgalF1ZXJ5IEZvdW5kYXRpb24sIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogMjAxNS0wNC0yOFQxNjowMVpcbiAqL1xuXG4oZnVuY3Rpb24oIGdsb2JhbCwgZmFjdG9yeSApIHtcblxuXHRpZiAoIHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiICkge1xuXHRcdC8vIEZvciBDb21tb25KUyBhbmQgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgd2hlcmUgYSBwcm9wZXIgYHdpbmRvd2Bcblx0XHQvLyBpcyBwcmVzZW50LCBleGVjdXRlIHRoZSBmYWN0b3J5IGFuZCBnZXQgalF1ZXJ5LlxuXHRcdC8vIEZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3QgaGF2ZSBhIGB3aW5kb3dgIHdpdGggYSBgZG9jdW1lbnRgXG5cdFx0Ly8gKHN1Y2ggYXMgTm9kZS5qcyksIGV4cG9zZSBhIGZhY3RvcnkgYXMgbW9kdWxlLmV4cG9ydHMuXG5cdFx0Ly8gVGhpcyBhY2NlbnR1YXRlcyB0aGUgbmVlZCBmb3IgdGhlIGNyZWF0aW9uIG9mIGEgcmVhbCBgd2luZG93YC5cblx0XHQvLyBlLmcuIHZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpKHdpbmRvdyk7XG5cdFx0Ly8gU2VlIHRpY2tldCAjMTQ1NDkgZm9yIG1vcmUgaW5mby5cblx0XHRtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5kb2N1bWVudCA/XG5cdFx0XHRmYWN0b3J5KCBnbG9iYWwsIHRydWUgKSA6XG5cdFx0XHRmdW5jdGlvbiggdyApIHtcblx0XHRcdFx0aWYgKCAhdy5kb2N1bWVudCApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhY3RvcnkoIHcgKTtcblx0XHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0ZmFjdG9yeSggZ2xvYmFsICk7XG5cdH1cblxuLy8gUGFzcyB0aGlzIGlmIHdpbmRvdyBpcyBub3QgZGVmaW5lZCB5ZXRcbn0odHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCB3aW5kb3csIG5vR2xvYmFsICkge1xuXG4vLyBTdXBwb3J0OiBGaXJlZm94IDE4K1xuLy8gQ2FuJ3QgYmUgaW4gc3RyaWN0IG1vZGUsIHNldmVyYWwgbGlicyBpbmNsdWRpbmcgQVNQLk5FVCB0cmFjZVxuLy8gdGhlIHN0YWNrIHZpYSBhcmd1bWVudHMuY2FsbGVyLmNhbGxlZSBhbmQgRmlyZWZveCBkaWVzIGlmXG4vLyB5b3UgdHJ5IHRvIHRyYWNlIHRocm91Z2ggXCJ1c2Ugc3RyaWN0XCIgY2FsbCBjaGFpbnMuICgjMTMzMzUpXG4vL1xuXG52YXIgYXJyID0gW107XG5cbnZhciBzbGljZSA9IGFyci5zbGljZTtcblxudmFyIGNvbmNhdCA9IGFyci5jb25jYXQ7XG5cbnZhciBwdXNoID0gYXJyLnB1c2g7XG5cbnZhciBpbmRleE9mID0gYXJyLmluZGV4T2Y7XG5cbnZhciBjbGFzczJ0eXBlID0ge307XG5cbnZhciB0b1N0cmluZyA9IGNsYXNzMnR5cGUudG9TdHJpbmc7XG5cbnZhciBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5O1xuXG52YXIgc3VwcG9ydCA9IHt9O1xuXG5cblxudmFyXG5cdC8vIFVzZSB0aGUgY29ycmVjdCBkb2N1bWVudCBhY2NvcmRpbmdseSB3aXRoIHdpbmRvdyBhcmd1bWVudCAoc2FuZGJveClcblx0ZG9jdW1lbnQgPSB3aW5kb3cuZG9jdW1lbnQsXG5cblx0dmVyc2lvbiA9IFwiMi4xLjRcIixcblxuXHQvLyBEZWZpbmUgYSBsb2NhbCBjb3B5IG9mIGpRdWVyeVxuXHRqUXVlcnkgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cdFx0Ly8gVGhlIGpRdWVyeSBvYmplY3QgaXMgYWN0dWFsbHkganVzdCB0aGUgaW5pdCBjb25zdHJ1Y3RvciAnZW5oYW5jZWQnXG5cdFx0Ly8gTmVlZCBpbml0IGlmIGpRdWVyeSBpcyBjYWxsZWQgKGp1c3QgYWxsb3cgZXJyb3IgdG8gYmUgdGhyb3duIGlmIG5vdCBpbmNsdWRlZClcblx0XHRyZXR1cm4gbmV3IGpRdWVyeS5mbi5pbml0KCBzZWxlY3RvciwgY29udGV4dCApO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xXG5cdC8vIE1ha2Ugc3VyZSB3ZSB0cmltIEJPTSBhbmQgTkJTUFxuXHRydHJpbSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcblxuXHQvLyBNYXRjaGVzIGRhc2hlZCBzdHJpbmcgZm9yIGNhbWVsaXppbmdcblx0cm1zUHJlZml4ID0gL14tbXMtLyxcblx0cmRhc2hBbHBoYSA9IC8tKFtcXGRhLXpdKS9naSxcblxuXHQvLyBVc2VkIGJ5IGpRdWVyeS5jYW1lbENhc2UgYXMgY2FsbGJhY2sgdG8gcmVwbGFjZSgpXG5cdGZjYW1lbENhc2UgPSBmdW5jdGlvbiggYWxsLCBsZXR0ZXIgKSB7XG5cdFx0cmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xuXHR9O1xuXG5qUXVlcnkuZm4gPSBqUXVlcnkucHJvdG90eXBlID0ge1xuXHQvLyBUaGUgY3VycmVudCB2ZXJzaW9uIG9mIGpRdWVyeSBiZWluZyB1c2VkXG5cdGpxdWVyeTogdmVyc2lvbixcblxuXHRjb25zdHJ1Y3RvcjogalF1ZXJ5LFxuXG5cdC8vIFN0YXJ0IHdpdGggYW4gZW1wdHkgc2VsZWN0b3Jcblx0c2VsZWN0b3I6IFwiXCIsXG5cblx0Ly8gVGhlIGRlZmF1bHQgbGVuZ3RoIG9mIGEgalF1ZXJ5IG9iamVjdCBpcyAwXG5cdGxlbmd0aDogMCxcblxuXHR0b0FycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHR9LFxuXG5cdC8vIEdldCB0aGUgTnRoIGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXQgT1Jcblx0Ly8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXlcblx0Z2V0OiBmdW5jdGlvbiggbnVtICkge1xuXHRcdHJldHVybiBudW0gIT0gbnVsbCA/XG5cblx0XHRcdC8vIFJldHVybiBqdXN0IHRoZSBvbmUgZWxlbWVudCBmcm9tIHRoZSBzZXRcblx0XHRcdCggbnVtIDwgMCA/IHRoaXNbIG51bSArIHRoaXMubGVuZ3RoIF0gOiB0aGlzWyBudW0gXSApIDpcblxuXHRcdFx0Ly8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgaW4gYSBjbGVhbiBhcnJheVxuXHRcdFx0c2xpY2UuY2FsbCggdGhpcyApO1xuXHR9LFxuXG5cdC8vIFRha2UgYW4gYXJyYXkgb2YgZWxlbWVudHMgYW5kIHB1c2ggaXQgb250byB0aGUgc3RhY2tcblx0Ly8gKHJldHVybmluZyB0aGUgbmV3IG1hdGNoZWQgZWxlbWVudCBzZXQpXG5cdHB1c2hTdGFjazogZnVuY3Rpb24oIGVsZW1zICkge1xuXG5cdFx0Ly8gQnVpbGQgYSBuZXcgalF1ZXJ5IG1hdGNoZWQgZWxlbWVudCBzZXRcblx0XHR2YXIgcmV0ID0galF1ZXJ5Lm1lcmdlKCB0aGlzLmNvbnN0cnVjdG9yKCksIGVsZW1zICk7XG5cblx0XHQvLyBBZGQgdGhlIG9sZCBvYmplY3Qgb250byB0aGUgc3RhY2sgKGFzIGEgcmVmZXJlbmNlKVxuXHRcdHJldC5wcmV2T2JqZWN0ID0gdGhpcztcblx0XHRyZXQuY29udGV4dCA9IHRoaXMuY29udGV4dDtcblxuXHRcdC8vIFJldHVybiB0aGUgbmV3bHktZm9ybWVkIGVsZW1lbnQgc2V0XG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHQvLyBFeGVjdXRlIGEgY2FsbGJhY2sgZm9yIGV2ZXJ5IGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgc2V0LlxuXHQvLyAoWW91IGNhbiBzZWVkIHRoZSBhcmd1bWVudHMgd2l0aCBhbiBhcnJheSBvZiBhcmdzLCBidXQgdGhpcyBpc1xuXHQvLyBvbmx5IHVzZWQgaW50ZXJuYWxseS4pXG5cdGVhY2g6IGZ1bmN0aW9uKCBjYWxsYmFjaywgYXJncyApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmVhY2goIHRoaXMsIGNhbGxiYWNrLCBhcmdzICk7XG5cdH0sXG5cblx0bWFwOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkubWFwKHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwoIGVsZW0sIGksIGVsZW0gKTtcblx0XHR9KSk7XG5cdH0sXG5cblx0c2xpY2U6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggc2xpY2UuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApICk7XG5cdH0sXG5cblx0Zmlyc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmVxKCAwICk7XG5cdH0sXG5cblx0bGFzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIC0xICk7XG5cdH0sXG5cblx0ZXE6IGZ1bmN0aW9uKCBpICkge1xuXHRcdHZhciBsZW4gPSB0aGlzLmxlbmd0aCxcblx0XHRcdGogPSAraSArICggaSA8IDAgPyBsZW4gOiAwICk7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqID49IDAgJiYgaiA8IGxlbiA/IFsgdGhpc1tqXSBdIDogW10gKTtcblx0fSxcblxuXHRlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnByZXZPYmplY3QgfHwgdGhpcy5jb25zdHJ1Y3RvcihudWxsKTtcblx0fSxcblxuXHQvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG5cdC8vIEJlaGF2ZXMgbGlrZSBhbiBBcnJheSdzIG1ldGhvZCwgbm90IGxpa2UgYSBqUXVlcnkgbWV0aG9kLlxuXHRwdXNoOiBwdXNoLFxuXHRzb3J0OiBhcnIuc29ydCxcblx0c3BsaWNlOiBhcnIuc3BsaWNlXG59O1xuXG5qUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmUsXG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWzBdIHx8IHt9LFxuXHRcdGkgPSAxLFxuXHRcdGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cdFx0ZGVlcCA9IGZhbHNlO1xuXG5cdC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cblx0aWYgKCB0eXBlb2YgdGFyZ2V0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRkZWVwID0gdGFyZ2V0O1xuXG5cdFx0Ly8gU2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuXHRcdHRhcmdldCA9IGFyZ3VtZW50c1sgaSBdIHx8IHt9O1xuXHRcdGkrKztcblx0fVxuXG5cdC8vIEhhbmRsZSBjYXNlIHdoZW4gdGFyZ2V0IGlzIGEgc3RyaW5nIG9yIHNvbWV0aGluZyAocG9zc2libGUgaW4gZGVlcCBjb3B5KVxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgIT09IFwib2JqZWN0XCIgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKHRhcmdldCkgKSB7XG5cdFx0dGFyZ2V0ID0ge307XG5cdH1cblxuXHQvLyBFeHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWRcblx0aWYgKCBpID09PSBsZW5ndGggKSB7XG5cdFx0dGFyZ2V0ID0gdGhpcztcblx0XHRpLS07XG5cdH1cblxuXHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHQvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzXG5cdFx0aWYgKCAob3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdKSAhPSBudWxsICkge1xuXHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRzcmMgPSB0YXJnZXRbIG5hbWUgXTtcblx0XHRcdFx0Y29weSA9IG9wdGlvbnNbIG5hbWUgXTtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wXG5cdFx0XHRcdGlmICggdGFyZ2V0ID09PSBjb3B5ICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdGlmICggZGVlcCAmJiBjb3B5ICYmICggalF1ZXJ5LmlzUGxhaW5PYmplY3QoY29weSkgfHwgKGNvcHlJc0FycmF5ID0galF1ZXJ5LmlzQXJyYXkoY29weSkpICkgKSB7XG5cdFx0XHRcdFx0aWYgKCBjb3B5SXNBcnJheSApIHtcblx0XHRcdFx0XHRcdGNvcHlJc0FycmF5ID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNBcnJheShzcmMpID8gc3JjIDogW107XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmMgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3Qoc3JjKSA/IHNyYyA6IHt9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE5ldmVyIG1vdmUgb3JpZ2luYWwgb2JqZWN0cywgY2xvbmUgdGhlbVxuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0galF1ZXJ5LmV4dGVuZCggZGVlcCwgY2xvbmUsIGNvcHkgKTtcblxuXHRcdFx0XHQvLyBEb24ndCBicmluZyBpbiB1bmRlZmluZWQgdmFsdWVzXG5cdFx0XHRcdH0gZWxzZSBpZiAoIGNvcHkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGNvcHk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIG1vZGlmaWVkIG9iamVjdFxuXHRyZXR1cm4gdGFyZ2V0O1xufTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdC8vIFVuaXF1ZSBmb3IgZWFjaCBjb3B5IG9mIGpRdWVyeSBvbiB0aGUgcGFnZVxuXHRleHBhbmRvOiBcImpRdWVyeVwiICsgKCB2ZXJzaW9uICsgTWF0aC5yYW5kb20oKSApLnJlcGxhY2UoIC9cXEQvZywgXCJcIiApLFxuXG5cdC8vIEFzc3VtZSBqUXVlcnkgaXMgcmVhZHkgd2l0aG91dCB0aGUgcmVhZHkgbW9kdWxlXG5cdGlzUmVhZHk6IHRydWUsXG5cblx0ZXJyb3I6IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKCBtc2cgKTtcblx0fSxcblxuXHRub29wOiBmdW5jdGlvbigpIHt9LFxuXG5cdGlzRnVuY3Rpb246IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS50eXBlKG9iaikgPT09IFwiZnVuY3Rpb25cIjtcblx0fSxcblxuXHRpc0FycmF5OiBBcnJheS5pc0FycmF5LFxuXG5cdGlzV2luZG93OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG5cdH0sXG5cblx0aXNOdW1lcmljOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdC8vIHBhcnNlRmxvYXQgTmFOcyBudW1lcmljLWNhc3QgZmFsc2UgcG9zaXRpdmVzIChudWxsfHRydWV8ZmFsc2V8XCJcIilcblx0XHQvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzIChcIjB4Li4uXCIpXG5cdFx0Ly8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOXG5cdFx0Ly8gYWRkaW5nIDEgY29ycmVjdHMgbG9zcyBvZiBwcmVjaXNpb24gZnJvbSBwYXJzZUZsb2F0ICgjMTUxMDApXG5cdFx0cmV0dXJuICFqUXVlcnkuaXNBcnJheSggb2JqICkgJiYgKG9iaiAtIHBhcnNlRmxvYXQoIG9iaiApICsgMSkgPj0gMDtcblx0fSxcblxuXHRpc1BsYWluT2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdC8vIE5vdCBwbGFpbiBvYmplY3RzOlxuXHRcdC8vIC0gQW55IG9iamVjdCBvciB2YWx1ZSB3aG9zZSBpbnRlcm5hbCBbW0NsYXNzXV0gcHJvcGVydHkgaXMgbm90IFwiW29iamVjdCBPYmplY3RdXCJcblx0XHQvLyAtIERPTSBub2Rlc1xuXHRcdC8vIC0gd2luZG93XG5cdFx0aWYgKCBqUXVlcnkudHlwZSggb2JqICkgIT09IFwib2JqZWN0XCIgfHwgb2JqLm5vZGVUeXBlIHx8IGpRdWVyeS5pc1dpbmRvdyggb2JqICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0aWYgKCBvYmouY29uc3RydWN0b3IgJiZcblx0XHRcdFx0IWhhc093bi5jYWxsKCBvYmouY29uc3RydWN0b3IucHJvdG90eXBlLCBcImlzUHJvdG90eXBlT2ZcIiApICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdC8vIElmIHRoZSBmdW5jdGlvbiBoYXNuJ3QgcmV0dXJuZWQgYWxyZWFkeSwgd2UncmUgY29uZmlkZW50IHRoYXRcblx0XHQvLyB8b2JqfCBpcyBhIHBsYWluIG9iamVjdCwgY3JlYXRlZCBieSB7fSBvciBjb25zdHJ1Y3RlZCB3aXRoIG5ldyBPYmplY3Rcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHRpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHZhciBuYW1lO1xuXHRcdGZvciAoIG5hbWUgaW4gb2JqICkge1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fSxcblxuXHR0eXBlOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdGlmICggb2JqID09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gb2JqICsgXCJcIjtcblx0XHR9XG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjAsIGlPUzw2IChmdW5jdGlvbmlzaCBSZWdFeHApXG5cdFx0cmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiID9cblx0XHRcdGNsYXNzMnR5cGVbIHRvU3RyaW5nLmNhbGwob2JqKSBdIHx8IFwib2JqZWN0XCIgOlxuXHRcdFx0dHlwZW9mIG9iajtcblx0fSxcblxuXHQvLyBFdmFsdWF0ZXMgYSBzY3JpcHQgaW4gYSBnbG9iYWwgY29udGV4dFxuXHRnbG9iYWxFdmFsOiBmdW5jdGlvbiggY29kZSApIHtcblx0XHR2YXIgc2NyaXB0LFxuXHRcdFx0aW5kaXJlY3QgPSBldmFsO1xuXG5cdFx0Y29kZSA9IGpRdWVyeS50cmltKCBjb2RlICk7XG5cblx0XHRpZiAoIGNvZGUgKSB7XG5cdFx0XHQvLyBJZiB0aGUgY29kZSBpbmNsdWRlcyBhIHZhbGlkLCBwcm9sb2d1ZSBwb3NpdGlvblxuXHRcdFx0Ly8gc3RyaWN0IG1vZGUgcHJhZ21hLCBleGVjdXRlIGNvZGUgYnkgaW5qZWN0aW5nIGFcblx0XHRcdC8vIHNjcmlwdCB0YWcgaW50byB0aGUgZG9jdW1lbnQuXG5cdFx0XHRpZiAoIGNvZGUuaW5kZXhPZihcInVzZSBzdHJpY3RcIikgPT09IDEgKSB7XG5cdFx0XHRcdHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG5cdFx0XHRcdHNjcmlwdC50ZXh0ID0gY29kZTtcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0ICkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggc2NyaXB0ICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBhdm9pZCB0aGUgRE9NIG5vZGUgY3JlYXRpb24sIGluc2VydGlvblxuXHRcdFx0Ly8gYW5kIHJlbW92YWwgYnkgdXNpbmcgYW4gaW5kaXJlY3QgZ2xvYmFsIGV2YWxcblx0XHRcdFx0aW5kaXJlY3QoIGNvZGUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ly8gQ29udmVydCBkYXNoZWQgdG8gY2FtZWxDYXNlOyB1c2VkIGJ5IHRoZSBjc3MgYW5kIGRhdGEgbW9kdWxlc1xuXHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdC8vIE1pY3Jvc29mdCBmb3Jnb3QgdG8gaHVtcCB0aGVpciB2ZW5kb3IgcHJlZml4ICgjOTU3Milcblx0Y2FtZWxDYXNlOiBmdW5jdGlvbiggc3RyaW5nICkge1xuXHRcdHJldHVybiBzdHJpbmcucmVwbGFjZSggcm1zUHJlZml4LCBcIm1zLVwiICkucmVwbGFjZSggcmRhc2hBbHBoYSwgZmNhbWVsQ2FzZSApO1xuXHR9LFxuXG5cdG5vZGVOYW1lOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTtcblx0fSxcblxuXHQvLyBhcmdzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdGVhY2g6IGZ1bmN0aW9uKCBvYmosIGNhbGxiYWNrLCBhcmdzICkge1xuXHRcdHZhciB2YWx1ZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuZ3RoID0gb2JqLmxlbmd0aCxcblx0XHRcdGlzQXJyYXkgPSBpc0FycmF5bGlrZSggb2JqICk7XG5cblx0XHRpZiAoIGFyZ3MgKSB7XG5cdFx0XHRpZiAoIGlzQXJyYXkgKSB7XG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRcdHZhbHVlID0gY2FsbGJhY2suYXBwbHkoIG9ialsgaSBdLCBhcmdzICk7XG5cblx0XHRcdFx0XHRpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaSBpbiBvYmogKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5hcHBseSggb2JqWyBpIF0sIGFyZ3MgKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBBIHNwZWNpYWwsIGZhc3QsIGNhc2UgZm9yIHRoZSBtb3N0IGNvbW1vbiB1c2Ugb2YgZWFjaFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAoIGlzQXJyYXkgKSB7XG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRcdHZhbHVlID0gY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICk7XG5cblx0XHRcdFx0XHRpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaSBpbiBvYmogKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG9iajtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMVxuXHR0cmltOiBmdW5jdGlvbiggdGV4dCApIHtcblx0XHRyZXR1cm4gdGV4dCA9PSBudWxsID9cblx0XHRcdFwiXCIgOlxuXHRcdFx0KCB0ZXh0ICsgXCJcIiApLnJlcGxhY2UoIHJ0cmltLCBcIlwiICk7XG5cdH0sXG5cblx0Ly8gcmVzdWx0cyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuXHRtYWtlQXJyYXk6IGZ1bmN0aW9uKCBhcnIsIHJlc3VsdHMgKSB7XG5cdFx0dmFyIHJldCA9IHJlc3VsdHMgfHwgW107XG5cblx0XHRpZiAoIGFyciAhPSBudWxsICkge1xuXHRcdFx0aWYgKCBpc0FycmF5bGlrZSggT2JqZWN0KGFycikgKSApIHtcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCByZXQsXG5cdFx0XHRcdFx0dHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0WyBhcnIgXSA6IGFyclxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5jYWxsKCByZXQsIGFyciApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0aW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHtcblx0XHRyZXR1cm4gYXJyID09IG51bGwgPyAtMSA6IGluZGV4T2YuY2FsbCggYXJyLCBlbGVtLCBpICk7XG5cdH0sXG5cblx0bWVyZ2U6IGZ1bmN0aW9uKCBmaXJzdCwgc2Vjb25kICkge1xuXHRcdHZhciBsZW4gPSArc2Vjb25kLmxlbmd0aCxcblx0XHRcdGogPSAwLFxuXHRcdFx0aSA9IGZpcnN0Lmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0Zmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqIF07XG5cdFx0fVxuXG5cdFx0Zmlyc3QubGVuZ3RoID0gaTtcblxuXHRcdHJldHVybiBmaXJzdDtcblx0fSxcblxuXHRncmVwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBpbnZlcnQgKSB7XG5cdFx0dmFyIGNhbGxiYWNrSW52ZXJzZSxcblx0XHRcdG1hdGNoZXMgPSBbXSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0Y2FsbGJhY2tFeHBlY3QgPSAhaW52ZXJ0O1xuXG5cdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtc1xuXHRcdC8vIHRoYXQgcGFzcyB0aGUgdmFsaWRhdG9yIGZ1bmN0aW9uXG5cdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRjYWxsYmFja0ludmVyc2UgPSAhY2FsbGJhY2soIGVsZW1zWyBpIF0sIGkgKTtcblx0XHRcdGlmICggY2FsbGJhY2tJbnZlcnNlICE9PSBjYWxsYmFja0V4cGVjdCApIHtcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKCBlbGVtc1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoZXM7XG5cdH0sXG5cblx0Ly8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1hcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgYXJnICkge1xuXHRcdHZhciB2YWx1ZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0aXNBcnJheSA9IGlzQXJyYXlsaWtlKCBlbGVtcyApLFxuXHRcdFx0cmV0ID0gW107XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgdHJhbnNsYXRpbmcgZWFjaCBvZiB0aGUgaXRlbXMgdG8gdGhlaXIgbmV3IHZhbHVlc1xuXHRcdGlmICggaXNBcnJheSApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEdvIHRocm91Z2ggZXZlcnkga2V5IG9uIHRoZSBvYmplY3QsXG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gZWxlbXMgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0XHRyZXR1cm4gY29uY2F0LmFwcGx5KCBbXSwgcmV0ICk7XG5cdH0sXG5cblx0Ly8gQSBnbG9iYWwgR1VJRCBjb3VudGVyIGZvciBvYmplY3RzXG5cdGd1aWQ6IDEsXG5cblx0Ly8gQmluZCBhIGZ1bmN0aW9uIHRvIGEgY29udGV4dCwgb3B0aW9uYWxseSBwYXJ0aWFsbHkgYXBwbHlpbmcgYW55XG5cdC8vIGFyZ3VtZW50cy5cblx0cHJveHk6IGZ1bmN0aW9uKCBmbiwgY29udGV4dCApIHtcblx0XHR2YXIgdG1wLCBhcmdzLCBwcm94eTtcblxuXHRcdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHR0bXAgPSBmblsgY29udGV4dCBdO1xuXHRcdFx0Y29udGV4dCA9IGZuO1xuXHRcdFx0Zm4gPSB0bXA7XG5cdFx0fVxuXG5cdFx0Ly8gUXVpY2sgY2hlY2sgdG8gZGV0ZXJtaW5lIGlmIHRhcmdldCBpcyBjYWxsYWJsZSwgaW4gdGhlIHNwZWNcblx0XHQvLyB0aGlzIHRocm93cyBhIFR5cGVFcnJvciwgYnV0IHdlIHdpbGwganVzdCByZXR1cm4gdW5kZWZpbmVkLlxuXHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCBmbiApICkge1xuXHRcdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvLyBTaW11bGF0ZWQgYmluZFxuXHRcdGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDIgKTtcblx0XHRwcm94eSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGZuLmFwcGx5KCBjb250ZXh0IHx8IHRoaXMsIGFyZ3MuY29uY2F0KCBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSApICk7XG5cdFx0fTtcblxuXHRcdC8vIFNldCB0aGUgZ3VpZCBvZiB1bmlxdWUgaGFuZGxlciB0byB0aGUgc2FtZSBvZiBvcmlnaW5hbCBoYW5kbGVyLCBzbyBpdCBjYW4gYmUgcmVtb3ZlZFxuXHRcdHByb3h5Lmd1aWQgPSBmbi5ndWlkID0gZm4uZ3VpZCB8fCBqUXVlcnkuZ3VpZCsrO1xuXG5cdFx0cmV0dXJuIHByb3h5O1xuXHR9LFxuXG5cdG5vdzogRGF0ZS5ub3csXG5cblx0Ly8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyXG5cdC8vIHByb3BlcnRpZXMgdG8gaXQgc28gaXQgbmVlZHMgdG8gZXhpc3QuXG5cdHN1cHBvcnQ6IHN1cHBvcnRcbn0pO1xuXG4vLyBQb3B1bGF0ZSB0aGUgY2xhc3MydHlwZSBtYXBcbmpRdWVyeS5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSwgZnVuY3Rpb24oaSwgbmFtZSkge1xuXHRjbGFzczJ0eXBlWyBcIltvYmplY3QgXCIgKyBuYW1lICsgXCJdXCIgXSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbn0pO1xuXG5mdW5jdGlvbiBpc0FycmF5bGlrZSggb2JqICkge1xuXG5cdC8vIFN1cHBvcnQ6IGlPUyA4LjIgKG5vdCByZXByb2R1Y2libGUgaW4gc2ltdWxhdG9yKVxuXHQvLyBgaW5gIGNoZWNrIHVzZWQgdG8gcHJldmVudCBKSVQgZXJyb3IgKGdoLTIxNDUpXG5cdC8vIGhhc093biBpc24ndCB1c2VkIGhlcmUgZHVlIHRvIGZhbHNlIG5lZ2F0aXZlc1xuXHQvLyByZWdhcmRpbmcgTm9kZWxpc3QgbGVuZ3RoIGluIElFXG5cdHZhciBsZW5ndGggPSBcImxlbmd0aFwiIGluIG9iaiAmJiBvYmoubGVuZ3RoLFxuXHRcdHR5cGUgPSBqUXVlcnkudHlwZSggb2JqICk7XG5cblx0aWYgKCB0eXBlID09PSBcImZ1bmN0aW9uXCIgfHwgalF1ZXJ5LmlzV2luZG93KCBvYmogKSApIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHRpZiAoIG9iai5ub2RlVHlwZSA9PT0gMSAmJiBsZW5ndGggKSB7XG5cdFx0cmV0dXJuIHRydWU7XG5cdH1cblxuXHRyZXR1cm4gdHlwZSA9PT0gXCJhcnJheVwiIHx8IGxlbmd0aCA9PT0gMCB8fFxuXHRcdHR5cGVvZiBsZW5ndGggPT09IFwibnVtYmVyXCIgJiYgbGVuZ3RoID4gMCAmJiAoIGxlbmd0aCAtIDEgKSBpbiBvYmo7XG59XG52YXIgU2l6emxlID1cbi8qIVxuICogU2l6emxlIENTUyBTZWxlY3RvciBFbmdpbmUgdjIuMi4wLXByZVxuICogaHR0cDovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgMjAwOCwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiAyMDE0LTEyLTE2XG4gKi9cbihmdW5jdGlvbiggd2luZG93ICkge1xuXG52YXIgaSxcblx0c3VwcG9ydCxcblx0RXhwcixcblx0Z2V0VGV4dCxcblx0aXNYTUwsXG5cdHRva2VuaXplLFxuXHRjb21waWxlLFxuXHRzZWxlY3QsXG5cdG91dGVybW9zdENvbnRleHQsXG5cdHNvcnRJbnB1dCxcblx0aGFzRHVwbGljYXRlLFxuXG5cdC8vIExvY2FsIGRvY3VtZW50IHZhcnNcblx0c2V0RG9jdW1lbnQsXG5cdGRvY3VtZW50LFxuXHRkb2NFbGVtLFxuXHRkb2N1bWVudElzSFRNTCxcblx0cmJ1Z2d5UVNBLFxuXHRyYnVnZ3lNYXRjaGVzLFxuXHRtYXRjaGVzLFxuXHRjb250YWlucyxcblxuXHQvLyBJbnN0YW5jZS1zcGVjaWZpYyBkYXRhXG5cdGV4cGFuZG8gPSBcInNpenpsZVwiICsgMSAqIG5ldyBEYXRlKCksXG5cdHByZWZlcnJlZERvYyA9IHdpbmRvdy5kb2N1bWVudCxcblx0ZGlycnVucyA9IDAsXG5cdGRvbmUgPSAwLFxuXHRjbGFzc0NhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0dG9rZW5DYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdGNvbXBpbGVyQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRzb3J0T3JkZXIgPSBmdW5jdGlvbiggYSwgYiApIHtcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gMDtcblx0fSxcblxuXHQvLyBHZW5lcmFsLXB1cnBvc2UgY29uc3RhbnRzXG5cdE1BWF9ORUdBVElWRSA9IDEgPDwgMzEsXG5cblx0Ly8gSW5zdGFuY2UgbWV0aG9kc1xuXHRoYXNPd24gPSAoe30pLmhhc093blByb3BlcnR5LFxuXHRhcnIgPSBbXSxcblx0cG9wID0gYXJyLnBvcCxcblx0cHVzaF9uYXRpdmUgPSBhcnIucHVzaCxcblx0cHVzaCA9IGFyci5wdXNoLFxuXHRzbGljZSA9IGFyci5zbGljZSxcblx0Ly8gVXNlIGEgc3RyaXBwZWQtZG93biBpbmRleE9mIGFzIGl0J3MgZmFzdGVyIHRoYW4gbmF0aXZlXG5cdC8vIGh0dHA6Ly9qc3BlcmYuY29tL3Rob3ItaW5kZXhvZi12cy1mb3IvNVxuXHRpbmRleE9mID0gZnVuY3Rpb24oIGxpc3QsIGVsZW0gKSB7XG5cdFx0dmFyIGkgPSAwLFxuXHRcdFx0bGVuID0gbGlzdC5sZW5ndGg7XG5cdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRpZiAoIGxpc3RbaV0gPT09IGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gLTE7XG5cdH0sXG5cblx0Ym9vbGVhbnMgPSBcImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsXG5cblx0Ly8gUmVndWxhciBleHByZXNzaW9uc1xuXG5cdC8vIFdoaXRlc3BhY2UgY2hhcmFjdGVycyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jd2hpdGVzcGFjZVxuXHR3aGl0ZXNwYWNlID0gXCJbXFxcXHgyMFxcXFx0XFxcXHJcXFxcblxcXFxmXVwiLFxuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXN5bnRheC8jY2hhcmFjdGVyc1xuXHRjaGFyYWN0ZXJFbmNvZGluZyA9IFwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFxcXHgwMC1cXFxceGEwXSkrXCIsXG5cblx0Ly8gTG9vc2VseSBtb2RlbGVkIG9uIENTUyBpZGVudGlmaWVyIGNoYXJhY3RlcnNcblx0Ly8gQW4gdW5xdW90ZWQgdmFsdWUgc2hvdWxkIGJlIGEgQ1NTIGlkZW50aWZpZXIgaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcblx0Ly8gUHJvcGVyIHN5bnRheDogaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI3ZhbHVlLWRlZi1pZGVudGlmaWVyXG5cdGlkZW50aWZpZXIgPSBjaGFyYWN0ZXJFbmNvZGluZy5yZXBsYWNlKCBcIndcIiwgXCJ3I1wiICksXG5cblx0Ly8gQXR0cmlidXRlIHNlbGVjdG9yczogaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNhdHRyaWJ1dGUtc2VsZWN0b3JzXG5cdGF0dHJpYnV0ZXMgPSBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFwiICsgY2hhcmFjdGVyRW5jb2RpbmcgKyBcIikoPzpcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIE9wZXJhdG9yIChjYXB0dXJlIDIpXG5cdFx0XCIqKFsqXiR8IX5dPz0pXCIgKyB3aGl0ZXNwYWNlICtcblx0XHQvLyBcIkF0dHJpYnV0ZSB2YWx1ZXMgbXVzdCBiZSBDU1MgaWRlbnRpZmllcnMgW2NhcHR1cmUgNV0gb3Igc3RyaW5ncyBbY2FwdHVyZSAzIG9yIGNhcHR1cmUgNF1cIlxuXHRcdFwiKig/OicoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcInwoXCIgKyBpZGVudGlmaWVyICsgXCIpKXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcIipcXFxcXVwiLFxuXG5cdHBzZXVkb3MgPSBcIjooXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKSg/OlxcXFwoKFwiICtcblx0XHQvLyBUbyByZWR1Y2UgdGhlIG51bWJlciBvZiBzZWxlY3RvcnMgbmVlZGluZyB0b2tlbml6ZSBpbiB0aGUgcHJlRmlsdGVyLCBwcmVmZXIgYXJndW1lbnRzOlxuXHRcdC8vIDEuIHF1b3RlZCAoY2FwdHVyZSAzOyBjYXB0dXJlIDQgb3IgY2FwdHVyZSA1KVxuXHRcdFwiKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8XCIgK1xuXHRcdC8vIDIuIHNpbXBsZSAoY2FwdHVyZSA2KVxuXHRcdFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiICsgYXR0cmlidXRlcyArIFwiKSopfFwiICtcblx0XHQvLyAzLiBhbnl0aGluZyBlbHNlIChjYXB0dXJlIDIpXG5cdFx0XCIuKlwiICtcblx0XHRcIilcXFxcKXwpXCIsXG5cblx0Ly8gTGVhZGluZyBhbmQgbm9uLWVzY2FwZWQgdHJhaWxpbmcgd2hpdGVzcGFjZSwgY2FwdHVyaW5nIHNvbWUgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVycyBwcmVjZWRpbmcgdGhlIGxhdHRlclxuXHRyd2hpdGVzcGFjZSA9IG5ldyBSZWdFeHAoIHdoaXRlc3BhY2UgKyBcIitcIiwgXCJnXCIgKSxcblx0cnRyaW0gPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIgKyB3aGl0ZXNwYWNlICsgXCIrJFwiLCBcImdcIiApLFxuXG5cdHJjb21tYSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKixcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXHRyY29tYmluYXRvcnMgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiooWz4rfl18XCIgKyB3aGl0ZXNwYWNlICsgXCIpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblxuXHRyYXR0cmlidXRlUXVvdGVzID0gbmV3IFJlZ0V4cCggXCI9XCIgKyB3aGl0ZXNwYWNlICsgXCIqKFteXFxcXF0nXFxcIl0qPylcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcXVwiLCBcImdcIiApLFxuXG5cdHJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksXG5cdHJpZGVudGlmaWVyID0gbmV3IFJlZ0V4cCggXCJeXCIgKyBpZGVudGlmaWVyICsgXCIkXCIgKSxcblxuXHRtYXRjaEV4cHIgPSB7XG5cdFx0XCJJRFwiOiBuZXcgUmVnRXhwKCBcIl4jKFwiICsgY2hhcmFjdGVyRW5jb2RpbmcgKyBcIilcIiApLFxuXHRcdFwiQ0xBU1NcIjogbmV3IFJlZ0V4cCggXCJeXFxcXC4oXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKVwiICksXG5cdFx0XCJUQUdcIjogbmV3IFJlZ0V4cCggXCJeKFwiICsgY2hhcmFjdGVyRW5jb2RpbmcucmVwbGFjZSggXCJ3XCIsIFwidypcIiApICsgXCIpXCIgKSxcblx0XHRcIkFUVFJcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyBhdHRyaWJ1dGVzICksXG5cdFx0XCJQU0VVRE9cIjogbmV3IFJlZ0V4cCggXCJeXCIgKyBwc2V1ZG9zICksXG5cdFx0XCJDSElMRFwiOiBuZXcgUmVnRXhwKCBcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86KFsrLV18KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHRcIiooXFxcXGQrKXwpKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfClcIiwgXCJpXCIgKSxcblx0XHRcImJvb2xcIjogbmV3IFJlZ0V4cCggXCJeKD86XCIgKyBib29sZWFucyArIFwiKSRcIiwgXCJpXCIgKSxcblx0XHQvLyBGb3IgdXNlIGluIGxpYnJhcmllcyBpbXBsZW1lbnRpbmcgLmlzKClcblx0XHQvLyBXZSB1c2UgdGhpcyBmb3IgUE9TIG1hdGNoaW5nIGluIGBzZWxlY3RgXG5cdFx0XCJuZWVkc0NvbnRleHRcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiICtcblx0XHRcdHdoaXRlc3BhY2UgKyBcIiooKD86LVxcXFxkKT9cXFxcZCopXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KSg/PVteLV18JClcIiwgXCJpXCIgKVxuXHR9LFxuXG5cdHJpbnB1dHMgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFxuXHRyaGVhZGVyID0gL15oXFxkJC9pLFxuXG5cdHJuYXRpdmUgPSAvXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLFxuXG5cdC8vIEVhc2lseS1wYXJzZWFibGUvcmV0cmlldmFibGUgSUQgb3IgVEFHIG9yIENMQVNTIHNlbGVjdG9yc1xuXHRycXVpY2tFeHByID0gL14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sXG5cblx0cnNpYmxpbmcgPSAvWyt+XS8sXG5cdHJlc2NhcGUgPSAvJ3xcXFxcL2csXG5cblx0Ly8gQ1NTIGVzY2FwZXMgaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI2VzY2FwZWQtY2hhcmFjdGVyc1xuXHRydW5lc2NhcGUgPSBuZXcgUmVnRXhwKCBcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiICsgd2hpdGVzcGFjZSArIFwiP3woXCIgKyB3aGl0ZXNwYWNlICsgXCIpfC4pXCIsIFwiaWdcIiApLFxuXHRmdW5lc2NhcGUgPSBmdW5jdGlvbiggXywgZXNjYXBlZCwgZXNjYXBlZFdoaXRlc3BhY2UgKSB7XG5cdFx0dmFyIGhpZ2ggPSBcIjB4XCIgKyBlc2NhcGVkIC0gMHgxMDAwMDtcblx0XHQvLyBOYU4gbWVhbnMgbm9uLWNvZGVwb2ludFxuXHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjRcblx0XHQvLyBXb3JrYXJvdW5kIGVycm9uZW91cyBudW1lcmljIGludGVycHJldGF0aW9uIG9mICtcIjB4XCJcblx0XHRyZXR1cm4gaGlnaCAhPT0gaGlnaCB8fCBlc2NhcGVkV2hpdGVzcGFjZSA/XG5cdFx0XHRlc2NhcGVkIDpcblx0XHRcdGhpZ2ggPCAwID9cblx0XHRcdFx0Ly8gQk1QIGNvZGVwb2ludFxuXHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoICsgMHgxMDAwMCApIDpcblx0XHRcdFx0Ly8gU3VwcGxlbWVudGFsIFBsYW5lIGNvZGVwb2ludCAoc3Vycm9nYXRlIHBhaXIpXG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggPj4gMTAgfCAweEQ4MDAsIGhpZ2ggJiAweDNGRiB8IDB4REMwMCApO1xuXHR9LFxuXG5cdC8vIFVzZWQgZm9yIGlmcmFtZXNcblx0Ly8gU2VlIHNldERvY3VtZW50KClcblx0Ly8gUmVtb3ZpbmcgdGhlIGZ1bmN0aW9uIHdyYXBwZXIgY2F1c2VzIGEgXCJQZXJtaXNzaW9uIERlbmllZFwiXG5cdC8vIGVycm9yIGluIElFXG5cdHVubG9hZEhhbmRsZXIgPSBmdW5jdGlvbigpIHtcblx0XHRzZXREb2N1bWVudCgpO1xuXHR9O1xuXG4vLyBPcHRpbWl6ZSBmb3IgcHVzaC5hcHBseSggXywgTm9kZUxpc3QgKVxudHJ5IHtcblx0cHVzaC5hcHBseShcblx0XHQoYXJyID0gc2xpY2UuY2FsbCggcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMgKSksXG5cdFx0cHJlZmVycmVkRG9jLmNoaWxkTm9kZXNcblx0KTtcblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0Ly8gRGV0ZWN0IHNpbGVudGx5IGZhaWxpbmcgcHVzaC5hcHBseVxuXHRhcnJbIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzLmxlbmd0aCBdLm5vZGVUeXBlO1xufSBjYXRjaCAoIGUgKSB7XG5cdHB1c2ggPSB7IGFwcGx5OiBhcnIubGVuZ3RoID9cblxuXHRcdC8vIExldmVyYWdlIHNsaWNlIGlmIHBvc3NpYmxlXG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0cHVzaF9uYXRpdmUuYXBwbHkoIHRhcmdldCwgc2xpY2UuY2FsbChlbHMpICk7XG5cdFx0fSA6XG5cblx0XHQvLyBTdXBwb3J0OiBJRTw5XG5cdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZCBkaXJlY3RseVxuXHRcdGZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHtcblx0XHRcdHZhciBqID0gdGFyZ2V0Lmxlbmd0aCxcblx0XHRcdFx0aSA9IDA7XG5cdFx0XHQvLyBDYW4ndCB0cnVzdCBOb2RlTGlzdC5sZW5ndGhcblx0XHRcdHdoaWxlICggKHRhcmdldFtqKytdID0gZWxzW2krK10pICkge31cblx0XHRcdHRhcmdldC5sZW5ndGggPSBqIC0gMTtcblx0XHR9XG5cdH07XG59XG5cbmZ1bmN0aW9uIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdHZhciBtYXRjaCwgZWxlbSwgbSwgbm9kZVR5cGUsXG5cdFx0Ly8gUVNBIHZhcnNcblx0XHRpLCBncm91cHMsIG9sZCwgbmlkLCBuZXdDb250ZXh0LCBuZXdTZWxlY3RvcjtcblxuXHRpZiAoICggY29udGV4dCA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogcHJlZmVycmVkRG9jICkgIT09IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBjb250ZXh0ICk7XG5cdH1cblxuXHRjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDtcblx0cmVzdWx0cyA9IHJlc3VsdHMgfHwgW107XG5cdG5vZGVUeXBlID0gY29udGV4dC5ub2RlVHlwZTtcblxuXHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiB8fCAhc2VsZWN0b3IgfHxcblx0XHRub2RlVHlwZSAhPT0gMSAmJiBub2RlVHlwZSAhPT0gOSAmJiBub2RlVHlwZSAhPT0gMTEgKSB7XG5cblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fVxuXG5cdGlmICggIXNlZWQgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cblx0XHQvLyBUcnkgdG8gc2hvcnRjdXQgZmluZCBvcGVyYXRpb25zIHdoZW4gcG9zc2libGUgKGUuZy4sIG5vdCB1bmRlciBEb2N1bWVudEZyYWdtZW50KVxuXHRcdGlmICggbm9kZVR5cGUgIT09IDExICYmIChtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKSkgKSB7XG5cdFx0XHQvLyBTcGVlZC11cDogU2l6emxlKFwiI0lEXCIpXG5cdFx0XHRpZiAoIChtID0gbWF0Y2hbMV0pICkge1xuXHRcdFx0XHRpZiAoIG5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICk7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgcGFyZW50Tm9kZSB0byBjYXRjaCB3aGVuIEJsYWNrYmVycnkgNC42IHJldHVybnNcblx0XHRcdFx0XHQvLyBub2RlcyB0aGF0IGFyZSBubyBsb25nZXIgaW4gdGhlIGRvY3VtZW50IChqUXVlcnkgIzY5NjMpXG5cdFx0XHRcdFx0aWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRcdC8vIEhhbmRsZSB0aGUgY2FzZSB3aGVyZSBJRSwgT3BlcmEsIGFuZCBXZWJraXQgcmV0dXJuIGl0ZW1zXG5cdFx0XHRcdFx0XHQvLyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdGlmICggZWxlbS5pZCA9PT0gbSApIHtcblx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gQ29udGV4dCBpcyBub3QgYSBkb2N1bWVudFxuXHRcdFx0XHRcdGlmICggY29udGV4dC5vd25lckRvY3VtZW50ICYmIChlbGVtID0gY29udGV4dC5vd25lckRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBtICkpICYmXG5cdFx0XHRcdFx0XHRjb250YWlucyggY29udGV4dCwgZWxlbSApICYmIGVsZW0uaWQgPT09IG0gKSB7XG5cdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBTcGVlZC11cDogU2l6emxlKFwiVEFHXCIpXG5cdFx0XHR9IGVsc2UgaWYgKCBtYXRjaFsyXSApIHtcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggc2VsZWN0b3IgKSApO1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblxuXHRcdFx0Ly8gU3BlZWQtdXA6IFNpenpsZShcIi5DTEFTU1wiKVxuXHRcdFx0fSBlbHNlIGlmICggKG0gPSBtYXRjaFszXSkgJiYgc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICkge1xuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIG0gKSApO1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBRU0EgcGF0aFxuXHRcdGlmICggc3VwcG9ydC5xc2EgJiYgKCFyYnVnZ3lRU0EgfHwgIXJidWdneVFTQS50ZXN0KCBzZWxlY3RvciApKSApIHtcblx0XHRcdG5pZCA9IG9sZCA9IGV4cGFuZG87XG5cdFx0XHRuZXdDb250ZXh0ID0gY29udGV4dDtcblx0XHRcdG5ld1NlbGVjdG9yID0gbm9kZVR5cGUgIT09IDEgJiYgc2VsZWN0b3I7XG5cblx0XHRcdC8vIHFTQSB3b3JrcyBzdHJhbmdlbHkgb24gRWxlbWVudC1yb290ZWQgcXVlcmllc1xuXHRcdFx0Ly8gV2UgY2FuIHdvcmsgYXJvdW5kIHRoaXMgYnkgc3BlY2lmeWluZyBhbiBleHRyYSBJRCBvbiB0aGUgcm9vdFxuXHRcdFx0Ly8gYW5kIHdvcmtpbmcgdXAgZnJvbSB0aGVyZSAoVGhhbmtzIHRvIEFuZHJldyBEdXBvbnQgZm9yIHRoZSB0ZWNobmlxdWUpXG5cdFx0XHQvLyBJRSA4IGRvZXNuJ3Qgd29yayBvbiBvYmplY3QgZWxlbWVudHNcblx0XHRcdGlmICggbm9kZVR5cGUgPT09IDEgJiYgY29udGV4dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcIm9iamVjdFwiICkge1xuXHRcdFx0XHRncm91cHMgPSB0b2tlbml6ZSggc2VsZWN0b3IgKTtcblxuXHRcdFx0XHRpZiAoIChvbGQgPSBjb250ZXh0LmdldEF0dHJpYnV0ZShcImlkXCIpKSApIHtcblx0XHRcdFx0XHRuaWQgPSBvbGQucmVwbGFjZSggcmVzY2FwZSwgXCJcXFxcJCZcIiApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnRleHQuc2V0QXR0cmlidXRlKCBcImlkXCIsIG5pZCApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5pZCA9IFwiW2lkPSdcIiArIG5pZCArIFwiJ10gXCI7XG5cblx0XHRcdFx0aSA9IGdyb3Vwcy5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGdyb3Vwc1tpXSA9IG5pZCArIHRvU2VsZWN0b3IoIGdyb3Vwc1tpXSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5ld0NvbnRleHQgPSByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0O1xuXHRcdFx0XHRuZXdTZWxlY3RvciA9IGdyb3Vwcy5qb2luKFwiLFwiKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBuZXdTZWxlY3RvciApIHtcblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLFxuXHRcdFx0XHRcdFx0bmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCBuZXdTZWxlY3RvciApXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0fSBjYXRjaChxc2FFcnJvcikge1xuXHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdGlmICggIW9sZCApIHtcblx0XHRcdFx0XHRcdGNvbnRleHQucmVtb3ZlQXR0cmlidXRlKFwiaWRcIik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWxsIG90aGVyc1xuXHRyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemVcbiAqIEByZXR1cm5zIHtGdW5jdGlvbihzdHJpbmcsIE9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGhcbiAqXHRwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKVxuICpcdGRlbGV0aW5nIHRoZSBvbGRlc3QgZW50cnlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7XG5cdHZhciBrZXlzID0gW107XG5cblx0ZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7XG5cdFx0Ly8gVXNlIChrZXkgKyBcIiBcIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1Nylcblx0XHRpZiAoIGtleXMucHVzaCgga2V5ICsgXCIgXCIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7XG5cdFx0XHQvLyBPbmx5IGtlZXAgdGhlIG1vc3QgcmVjZW50IGVudHJpZXNcblx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07XG5cdFx0fVxuXHRcdHJldHVybiAoY2FjaGVbIGtleSArIFwiIFwiIF0gPSB2YWx1ZSk7XG5cdH1cblx0cmV0dXJuIGNhY2hlO1xufVxuXG4vKipcbiAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gbWFya1xuICovXG5mdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkge1xuXHRmblsgZXhwYW5kbyBdID0gdHJ1ZTtcblx0cmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZGl2IGFuZCBleHBlY3RzIGEgYm9vbGVhbiByZXN1bHRcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0KCBmbiApIHtcblx0dmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5cblx0dHJ5IHtcblx0XHRyZXR1cm4gISFmbiggZGl2ICk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH0gZmluYWxseSB7XG5cdFx0Ly8gUmVtb3ZlIGZyb20gaXRzIHBhcmVudCBieSBkZWZhdWx0XG5cdFx0aWYgKCBkaXYucGFyZW50Tm9kZSApIHtcblx0XHRcdGRpdi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBkaXYgKTtcblx0XHR9XG5cdFx0Ly8gcmVsZWFzZSBtZW1vcnkgaW4gSUVcblx0XHRkaXYgPSBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRyc1xuICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkXG4gKi9cbmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7XG5cdHZhciBhcnIgPSBhdHRycy5zcGxpdChcInxcIiksXG5cdFx0aSA9IGF0dHJzLmxlbmd0aDtcblxuXHR3aGlsZSAoIGktLSApIHtcblx0XHRFeHByLmF0dHJIYW5kbGVbIGFycltpXSBdID0gaGFuZGxlcjtcblx0fVxufVxuXG4vKipcbiAqIENoZWNrcyBkb2N1bWVudCBvcmRlciBvZiB0d28gc2libGluZ3NcbiAqIEBwYXJhbSB7RWxlbWVudH0gYVxuICogQHBhcmFtIHtFbGVtZW50fSBiXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBSZXR1cm5zIGxlc3MgdGhhbiAwIGlmIGEgcHJlY2VkZXMgYiwgZ3JlYXRlciB0aGFuIDAgaWYgYSBmb2xsb3dzIGJcbiAqL1xuZnVuY3Rpb24gc2libGluZ0NoZWNrKCBhLCBiICkge1xuXHR2YXIgY3VyID0gYiAmJiBhLFxuXHRcdGRpZmYgPSBjdXIgJiYgYS5ub2RlVHlwZSA9PT0gMSAmJiBiLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHQoIH5iLnNvdXJjZUluZGV4IHx8IE1BWF9ORUdBVElWRSApIC1cblx0XHRcdCggfmEuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICk7XG5cblx0Ly8gVXNlIElFIHNvdXJjZUluZGV4IGlmIGF2YWlsYWJsZSBvbiBib3RoIG5vZGVzXG5cdGlmICggZGlmZiApIHtcblx0XHRyZXR1cm4gZGlmZjtcblx0fVxuXG5cdC8vIENoZWNrIGlmIGIgZm9sbG93cyBhXG5cdGlmICggY3VyICkge1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5uZXh0U2libGluZykgKSB7XG5cdFx0XHRpZiAoIGN1ciA9PT0gYiApIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhID8gMSA6IC0xO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgaW5wdXQgdHlwZXNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKCB0eXBlICkge1xuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5mdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gKG5hbWUgPT09IFwiaW5wdXRcIiB8fCBuYW1lID09PSBcImJ1dHRvblwiKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBwb3NpdGlvbmFsc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUG9zaXRpb25hbFBzZXVkbyggZm4gKSB7XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIGFyZ3VtZW50ICkge1xuXHRcdGFyZ3VtZW50ID0gK2FyZ3VtZW50O1xuXHRcdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7XG5cdFx0XHR2YXIgaixcblx0XHRcdFx0bWF0Y2hJbmRleGVzID0gZm4oIFtdLCBzZWVkLmxlbmd0aCwgYXJndW1lbnQgKSxcblx0XHRcdFx0aSA9IG1hdGNoSW5kZXhlcy5sZW5ndGg7XG5cblx0XHRcdC8vIE1hdGNoIGVsZW1lbnRzIGZvdW5kIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXhlc1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggc2VlZFsgKGogPSBtYXRjaEluZGV4ZXNbaV0pIF0gKSB7XG5cdFx0XHRcdFx0c2VlZFtqXSA9ICEobWF0Y2hlc1tqXSA9IHNlZWRbal0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0pO1xufVxuXG4vKipcbiAqIENoZWNrcyBhIG5vZGUgZm9yIHZhbGlkaXR5IGFzIGEgU2l6emxlIGNvbnRleHRcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3Q9fSBjb250ZXh0XG4gKiBAcmV0dXJucyB7RWxlbWVudHxPYmplY3R8Qm9vbGVhbn0gVGhlIGlucHV0IG5vZGUgaWYgYWNjZXB0YWJsZSwgb3RoZXJ3aXNlIGEgZmFsc3kgdmFsdWVcbiAqL1xuZnVuY3Rpb24gdGVzdENvbnRleHQoIGNvbnRleHQgKSB7XG5cdHJldHVybiBjb250ZXh0ICYmIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnRleHQ7XG59XG5cbi8vIEV4cG9zZSBzdXBwb3J0IHZhcnMgZm9yIGNvbnZlbmllbmNlXG5zdXBwb3J0ID0gU2l6emxlLnN1cHBvcnQgPSB7fTtcblxuLyoqXG4gKiBEZXRlY3RzIFhNTCBub2Rlc1xuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gZWxlbSBBbiBlbGVtZW50IG9yIGEgZG9jdW1lbnRcbiAqIEByZXR1cm5zIHtCb29sZWFufSBUcnVlIGlmZiBlbGVtIGlzIGEgbm9uLUhUTUwgWE1MIG5vZGVcbiAqL1xuaXNYTUwgPSBTaXp6bGUuaXNYTUwgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0Ly8gZG9jdW1lbnRFbGVtZW50IGlzIHZlcmlmaWVkIGZvciBjYXNlcyB3aGVyZSBpdCBkb2Vzbid0IHlldCBleGlzdFxuXHQvLyAoc3VjaCBhcyBsb2FkaW5nIGlmcmFtZXMgaW4gSUUgLSAjNDgzMylcblx0dmFyIGRvY3VtZW50RWxlbWVudCA9IGVsZW0gJiYgKGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtKS5kb2N1bWVudEVsZW1lbnQ7XG5cdHJldHVybiBkb2N1bWVudEVsZW1lbnQgPyBkb2N1bWVudEVsZW1lbnQubm9kZU5hbWUgIT09IFwiSFRNTFwiIDogZmFsc2U7XG59O1xuXG4vKipcbiAqIFNldHMgZG9jdW1lbnQtcmVsYXRlZCB2YXJpYWJsZXMgb25jZSBiYXNlZCBvbiB0aGUgY3VycmVudCBkb2N1bWVudFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gW2RvY10gQW4gZWxlbWVudCBvciBkb2N1bWVudCBvYmplY3QgdG8gdXNlIHRvIHNldCB0aGUgZG9jdW1lbnRcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGN1cnJlbnQgZG9jdW1lbnRcbiAqL1xuc2V0RG9jdW1lbnQgPSBTaXp6bGUuc2V0RG9jdW1lbnQgPSBmdW5jdGlvbiggbm9kZSApIHtcblx0dmFyIGhhc0NvbXBhcmUsIHBhcmVudCxcblx0XHRkb2MgPSBub2RlID8gbm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGUgOiBwcmVmZXJyZWREb2M7XG5cblx0Ly8gSWYgbm8gZG9jdW1lbnQgYW5kIGRvY3VtZW50RWxlbWVudCBpcyBhdmFpbGFibGUsIHJldHVyblxuXHRpZiAoIGRvYyA9PT0gZG9jdW1lbnQgfHwgZG9jLm5vZGVUeXBlICE9PSA5IHx8ICFkb2MuZG9jdW1lbnRFbGVtZW50ICkge1xuXHRcdHJldHVybiBkb2N1bWVudDtcblx0fVxuXG5cdC8vIFNldCBvdXIgZG9jdW1lbnRcblx0ZG9jdW1lbnQgPSBkb2M7XG5cdGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRwYXJlbnQgPSBkb2MuZGVmYXVsdFZpZXc7XG5cblx0Ly8gU3VwcG9ydDogSUU+OFxuXHQvLyBJZiBpZnJhbWUgZG9jdW1lbnQgaXMgYXNzaWduZWQgdG8gXCJkb2N1bWVudFwiIHZhcmlhYmxlIGFuZCBpZiBpZnJhbWUgaGFzIGJlZW4gcmVsb2FkZWQsXG5cdC8vIElFIHdpbGwgdGhyb3cgXCJwZXJtaXNzaW9uIGRlbmllZFwiIGVycm9yIHdoZW4gYWNjZXNzaW5nIFwiZG9jdW1lbnRcIiB2YXJpYWJsZSwgc2VlIGpRdWVyeSAjMTM5MzZcblx0Ly8gSUU2LTggZG8gbm90IHN1cHBvcnQgdGhlIGRlZmF1bHRWaWV3IHByb3BlcnR5IHNvIHBhcmVudCB3aWxsIGJlIHVuZGVmaW5lZFxuXHRpZiAoIHBhcmVudCAmJiBwYXJlbnQgIT09IHBhcmVudC50b3AgKSB7XG5cdFx0Ly8gSUUxMSBkb2VzIG5vdCBoYXZlIGF0dGFjaEV2ZW50LCBzbyBhbGwgbXVzdCBzdWZmZXJcblx0XHRpZiAoIHBhcmVudC5hZGRFdmVudExpc3RlbmVyICkge1xuXHRcdFx0cGFyZW50LmFkZEV2ZW50TGlzdGVuZXIoIFwidW5sb2FkXCIsIHVubG9hZEhhbmRsZXIsIGZhbHNlICk7XG5cdFx0fSBlbHNlIGlmICggcGFyZW50LmF0dGFjaEV2ZW50ICkge1xuXHRcdFx0cGFyZW50LmF0dGFjaEV2ZW50KCBcIm9udW5sb2FkXCIsIHVubG9hZEhhbmRsZXIgKTtcblx0XHR9XG5cdH1cblxuXHQvKiBTdXBwb3J0IHRlc3RzXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0ZG9jdW1lbnRJc0hUTUwgPSAhaXNYTUwoIGRvYyApO1xuXG5cdC8qIEF0dHJpYnV0ZXNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIFN1cHBvcnQ6IElFPDhcblx0Ly8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzXG5cdC8vIChleGNlcHRpbmcgSUU4IGJvb2xlYW5zKVxuXHRzdXBwb3J0LmF0dHJpYnV0ZXMgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRkaXYuY2xhc3NOYW1lID0gXCJpXCI7XG5cdFx0cmV0dXJuICFkaXYuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpO1xuXHR9KTtcblxuXHQvKiBnZXRFbGVtZW50KHMpQnkqXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikgcmV0dXJucyBvbmx5IGVsZW1lbnRzXG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRkaXYuYXBwZW5kQ2hpbGQoIGRvYy5jcmVhdGVDb21tZW50KFwiXCIpICk7XG5cdFx0cmV0dXJuICFkaXYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLmxlbmd0aDtcblx0fSk7XG5cblx0Ly8gU3VwcG9ydDogSUU8OVxuXHRzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgPSBybmF0aXZlLnRlc3QoIGRvYy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICk7XG5cblx0Ly8gU3VwcG9ydDogSUU8MTBcblx0Ly8gQ2hlY2sgaWYgZ2V0RWxlbWVudEJ5SWQgcmV0dXJucyBlbGVtZW50cyBieSBuYW1lXG5cdC8vIFRoZSBicm9rZW4gZ2V0RWxlbWVudEJ5SWQgbWV0aG9kcyBkb24ndCBwaWNrIHVwIHByb2dyYW1hdGljYWxseS1zZXQgbmFtZXMsXG5cdC8vIHNvIHVzZSBhIHJvdW5kYWJvdXQgZ2V0RWxlbWVudHNCeU5hbWUgdGVzdFxuXHRzdXBwb3J0LmdldEJ5SWQgPSBhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBkaXYgKS5pZCA9IGV4cGFuZG87XG5cdFx0cmV0dXJuICFkb2MuZ2V0RWxlbWVudHNCeU5hbWUgfHwgIWRvYy5nZXRFbGVtZW50c0J5TmFtZSggZXhwYW5kbyApLmxlbmd0aDtcblx0fSk7XG5cblx0Ly8gSUQgZmluZCBhbmQgZmlsdGVyXG5cdGlmICggc3VwcG9ydC5nZXRCeUlkICkge1xuXHRcdEV4cHIuZmluZFtcIklEXCJdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdFx0dmFyIG0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBpZCApO1xuXHRcdFx0XHQvLyBDaGVjayBwYXJlbnROb2RlIHRvIGNhdGNoIHdoZW4gQmxhY2tiZXJyeSA0LjYgcmV0dXJuc1xuXHRcdFx0XHQvLyBub2RlcyB0aGF0IGFyZSBubyBsb25nZXIgaW4gdGhlIGRvY3VtZW50ICM2OTYzXG5cdFx0XHRcdHJldHVybiBtICYmIG0ucGFyZW50Tm9kZSA/IFsgbSBdIDogW107XG5cdFx0XHR9XG5cdFx0fTtcblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBhdHRySWQ7XG5cdFx0XHR9O1xuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0Ly8gU3VwcG9ydDogSUU2Lzdcblx0XHQvLyBnZXRFbGVtZW50QnlJZCBpcyBub3QgcmVsaWFibGUgYXMgYSBmaW5kIHNob3J0Y3V0XG5cdFx0ZGVsZXRlIEV4cHIuZmluZFtcIklEXCJdO1xuXG5cdFx0RXhwci5maWx0ZXJbXCJJRFwiXSA9ICBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIG5vZGUgPSB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlICE9PSBcInVuZGVmaW5lZFwiICYmIGVsZW0uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO1xuXHRcdFx0XHRyZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlID09PSBhdHRySWQ7XG5cdFx0XHR9O1xuXHRcdH07XG5cdH1cblxuXHQvLyBUYWdcblx0RXhwci5maW5kW1wiVEFHXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/XG5cdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRG9jdW1lbnRGcmFnbWVudCBub2RlcyBkb24ndCBoYXZlIGdFQlROXG5cdFx0XHR9IGVsc2UgaWYgKCBzdXBwb3J0LnFzYSApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnICk7XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdHRtcCA9IFtdLFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0Ly8gQnkgaGFwcHkgY29pbmNpZGVuY2UsIGEgKGJyb2tlbikgZ0VCVE4gYXBwZWFycyBvbiBEb2N1bWVudEZyYWdtZW50IG5vZGVzIHRvb1xuXHRcdFx0XHRyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cblx0XHRcdC8vIEZpbHRlciBvdXQgcG9zc2libGUgY29tbWVudHNcblx0XHRcdGlmICggdGFnID09PSBcIipcIiApIHtcblx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRcdFx0dG1wLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdG1wO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0fTtcblxuXHQvLyBDbGFzc1xuXHRFeHByLmZpbmRbXCJDTEFTU1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBmdW5jdGlvbiggY2xhc3NOYW1lLCBjb250ZXh0ICkge1xuXHRcdGlmICggZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBjbGFzc05hbWUgKTtcblx0XHR9XG5cdH07XG5cblx0LyogUVNBL21hdGNoZXNTZWxlY3RvclxuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gUVNBIGFuZCBtYXRjaGVzU2VsZWN0b3Igc3VwcG9ydFxuXG5cdC8vIG1hdGNoZXNTZWxlY3Rvcig6YWN0aXZlKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoSUU5L09wZXJhIDExLjUpXG5cdHJidWdneU1hdGNoZXMgPSBbXTtcblxuXHQvLyBxU2EoOmZvY3VzKSByZXBvcnRzIGZhbHNlIHdoZW4gdHJ1ZSAoQ2hyb21lIDIxKVxuXHQvLyBXZSBhbGxvdyB0aGlzIGJlY2F1c2Ugb2YgYSBidWcgaW4gSUU4LzkgdGhhdCB0aHJvd3MgYW4gZXJyb3Jcblx0Ly8gd2hlbmV2ZXIgYGRvY3VtZW50LmFjdGl2ZUVsZW1lbnRgIGlzIGFjY2Vzc2VkIG9uIGFuIGlmcmFtZVxuXHQvLyBTbywgd2UgYWxsb3cgOmZvY3VzIHRvIHBhc3MgdGhyb3VnaCBRU0EgYWxsIHRoZSB0aW1lIHRvIGF2b2lkIHRoZSBJRSBlcnJvclxuXHQvLyBTZWUgaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTMzNzhcblx0cmJ1Z2d5UVNBID0gW107XG5cblx0aWYgKCAoc3VwcG9ydC5xc2EgPSBybmF0aXZlLnRlc3QoIGRvYy5xdWVyeVNlbGVjdG9yQWxsICkpICkge1xuXHRcdC8vIEJ1aWxkIFFTQSByZWdleFxuXHRcdC8vIFJlZ2V4IHN0cmF0ZWd5IGFkb3B0ZWQgZnJvbSBEaWVnbyBQZXJpbmlcblx0XHRhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRcdC8vIFNlbGVjdCBpcyBzZXQgdG8gZW1wdHkgc3RyaW5nIG9uIHB1cnBvc2Vcblx0XHRcdC8vIFRoaXMgaXMgdG8gdGVzdCBJRSdzIHRyZWF0bWVudCBvZiBub3QgZXhwbGljaXRseVxuXHRcdFx0Ly8gc2V0dGluZyBhIGJvb2xlYW4gY29udGVudCBhdHRyaWJ1dGUsXG5cdFx0XHQvLyBzaW5jZSBpdHMgcHJlc2VuY2Ugc2hvdWxkIGJlIGVub3VnaFxuXHRcdFx0Ly8gaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzNTlcblx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlubmVySFRNTCA9IFwiPGEgaWQ9J1wiICsgZXhwYW5kbyArIFwiJz48L2E+XCIgK1xuXHRcdFx0XHRcIjxzZWxlY3QgaWQ9J1wiICsgZXhwYW5kbyArIFwiLVxcZl0nIG1zYWxsb3djYXB0dXJlPScnPlwiICtcblx0XHRcdFx0XCI8b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRTgsIE9wZXJhIDExLTEyLjE2XG5cdFx0XHQvLyBOb3RoaW5nIHNob3VsZCBiZSBzZWxlY3RlZCB3aGVuIGVtcHR5IHN0cmluZ3MgZm9sbG93IF49IG9yICQ9IG9yICo9XG5cdFx0XHQvLyBUaGUgdGVzdCBhdHRyaWJ1dGUgbXVzdCBiZSB1bmtub3duIGluIE9wZXJhIGJ1dCBcInNhZmVcIiBmb3IgV2luUlRcblx0XHRcdC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9pZS9oaDQ2NTM4OC5hc3B4I2F0dHJpYnV0ZV9zZWN0aW9uXG5cdFx0XHRpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJbKl4kXT1cIiArIHdoaXRlc3BhY2UgKyBcIiooPzonJ3xcXFwiXFxcIilcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRThcblx0XHRcdC8vIEJvb2xlYW4gYXR0cmlidXRlcyBhbmQgXCJ2YWx1ZVwiIGFyZSBub3QgdHJlYXRlZCBjb3JyZWN0bHlcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86dmFsdWV8XCIgKyBib29sZWFucyArIFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZTwyOSwgQW5kcm9pZDw0LjIrLCBTYWZhcmk8Ny4wKywgaU9TPDcuMCssIFBoYW50b21KUzwxLjkuNytcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKCBcIltpZH49XCIgKyBleHBhbmRvICsgXCItXVwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIn49XCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBXZWJraXQvT3BlcmEgLSA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIHNlbGVjdGVkIG9wdGlvbiBlbGVtZW50c1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCI6Y2hlY2tlZFwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDgrLCBpT1MgOCtcblx0XHRcdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzY4NTFcblx0XHRcdC8vIEluLXBhZ2UgYHNlbGVjdG9yI2lkIHNpYmluZy1jb21iaW5hdG9yIHNlbGVjdG9yYCBmYWlsc1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIFwiYSNcIiArIGV4cGFuZG8gKyBcIisqXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwiLiMuK1srfl1cIik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0XHRcdC8vIFN1cHBvcnQ6IFdpbmRvd3MgOCBOYXRpdmUgQXBwc1xuXHRcdFx0Ly8gVGhlIHR5cGUgYW5kIG5hbWUgYXR0cmlidXRlcyBhcmUgcmVzdHJpY3RlZCBkdXJpbmcgLmlubmVySFRNTCBhc3NpZ25tZW50XG5cdFx0XHR2YXIgaW5wdXQgPSBkb2MuY3JlYXRlRWxlbWVudChcImlucHV0XCIpO1xuXHRcdFx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJoaWRkZW5cIiApO1xuXHRcdFx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApLnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwiRFwiICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gRW5mb3JjZSBjYXNlLXNlbnNpdGl2aXR5IG9mIG5hbWUgYXR0cmlidXRlXG5cdFx0XHRpZiAoIGRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJuYW1lXCIgKyB3aGl0ZXNwYWNlICsgXCIqWypeJHwhfl0/PVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT3BlcmEgMTAtMTEgZG9lcyBub3QgdGhyb3cgb24gcG9zdC1jb21tYSBpbnZhbGlkIHBzZXVkb3Ncblx0XHRcdGRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKTtcblx0XHRcdHJidWdneVFTQS5wdXNoKFwiLC4qOlwiKTtcblx0XHR9KTtcblx0fVxuXG5cdGlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ubWF0Y2hlcyB8fFxuXHRcdGRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSApKSApIHtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gQ2hlY2sgdG8gc2VlIGlmIGl0J3MgcG9zc2libGUgdG8gZG8gbWF0Y2hlc1NlbGVjdG9yXG5cdFx0XHQvLyBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlIChJRSA5KVxuXHRcdFx0c3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCA9IG1hdGNoZXMuY2FsbCggZGl2LCBcImRpdlwiICk7XG5cblx0XHRcdC8vIFRoaXMgc2hvdWxkIGZhaWwgd2l0aCBhbiBleGNlcHRpb25cblx0XHRcdC8vIEdlY2tvIGRvZXMgbm90IGVycm9yLCByZXR1cm5zIGZhbHNlIGluc3RlYWRcblx0XHRcdG1hdGNoZXMuY2FsbCggZGl2LCBcIltzIT0nJ106eFwiICk7XG5cdFx0XHRyYnVnZ3lNYXRjaGVzLnB1c2goIFwiIT1cIiwgcHNldWRvcyApO1xuXHRcdH0pO1xuXHR9XG5cblx0cmJ1Z2d5UVNBID0gcmJ1Z2d5UVNBLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lRU0Euam9pbihcInxcIikgKTtcblx0cmJ1Z2d5TWF0Y2hlcyA9IHJidWdneU1hdGNoZXMubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneU1hdGNoZXMuam9pbihcInxcIikgKTtcblxuXHQvKiBDb250YWluc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdGhhc0NvbXBhcmUgPSBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29tcGFyZURvY3VtZW50UG9zaXRpb24gKTtcblxuXHQvLyBFbGVtZW50IGNvbnRhaW5zIGFub3RoZXJcblx0Ly8gUHVycG9zZWZ1bGx5IGRvZXMgbm90IGltcGxlbWVudCBpbmNsdXNpdmUgZGVzY2VuZGVudFxuXHQvLyBBcyBpbiwgYW4gZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGl0c2VsZlxuXHRjb250YWlucyA9IGhhc0NvbXBhcmUgfHwgcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbnRhaW5zICkgP1xuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0dmFyIGFkb3duID0gYS5ub2RlVHlwZSA9PT0gOSA/IGEuZG9jdW1lbnRFbGVtZW50IDogYSxcblx0XHRcdFx0YnVwID0gYiAmJiBiLnBhcmVudE5vZGU7XG5cdFx0XHRyZXR1cm4gYSA9PT0gYnVwIHx8ICEhKCBidXAgJiYgYnVwLm5vZGVUeXBlID09PSAxICYmIChcblx0XHRcdFx0YWRvd24uY29udGFpbnMgP1xuXHRcdFx0XHRcdGFkb3duLmNvbnRhaW5zKCBidXAgKSA6XG5cdFx0XHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBidXAgKSAmIDE2XG5cdFx0XHQpKTtcblx0XHR9IDpcblx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdGlmICggYiApIHtcblx0XHRcdFx0d2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBiID09PSBhICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHQvKiBTb3J0aW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nXG5cdHNvcnRPcmRlciA9IGhhc0NvbXBhcmUgP1xuXHRmdW5jdGlvbiggYSwgYiApIHtcblxuXHRcdC8vIEZsYWcgZm9yIGR1cGxpY2F0ZSByZW1vdmFsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdC8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb25cblx0XHR2YXIgY29tcGFyZSA9ICFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIC0gIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247XG5cdFx0aWYgKCBjb21wYXJlICkge1xuXHRcdFx0cmV0dXJuIGNvbXBhcmU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsY3VsYXRlIHBvc2l0aW9uIGlmIGJvdGggaW5wdXRzIGJlbG9uZyB0byB0aGUgc2FtZSBkb2N1bWVudFxuXHRcdGNvbXBhcmUgPSAoIGEub3duZXJEb2N1bWVudCB8fCBhICkgPT09ICggYi5vd25lckRvY3VtZW50IHx8IGIgKSA/XG5cdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugd2Uga25vdyB0aGV5IGFyZSBkaXNjb25uZWN0ZWRcblx0XHRcdDE7XG5cblx0XHQvLyBEaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRpZiAoIGNvbXBhcmUgJiAxIHx8XG5cdFx0XHQoIXN1cHBvcnQuc29ydERldGFjaGVkICYmIGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGEgKSA9PT0gY29tcGFyZSkgKSB7XG5cblx0XHRcdC8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudFxuXHRcdFx0aWYgKCBhID09PSBkb2MgfHwgYS5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBhKSApIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBiID09PSBkb2MgfHwgYi5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBiKSApIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1haW50YWluIG9yaWdpbmFsIG9yZGVyXG5cdFx0XHRyZXR1cm4gc29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXHRcdH1cblxuXHRcdHJldHVybiBjb21wYXJlICYgNCA/IC0xIDogMTtcblx0fSA6XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdC8vIEV4aXQgZWFybHkgaWYgdGhlIG5vZGVzIGFyZSBpZGVudGljYWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dmFyIGN1cixcblx0XHRcdGkgPSAwLFxuXHRcdFx0YXVwID0gYS5wYXJlbnROb2RlLFxuXHRcdFx0YnVwID0gYi5wYXJlbnROb2RlLFxuXHRcdFx0YXAgPSBbIGEgXSxcblx0XHRcdGJwID0gWyBiIF07XG5cblx0XHQvLyBQYXJlbnRsZXNzIG5vZGVzIGFyZSBlaXRoZXIgZG9jdW1lbnRzIG9yIGRpc2Nvbm5lY3RlZFxuXHRcdGlmICggIWF1cCB8fCAhYnVwICkge1xuXHRcdFx0cmV0dXJuIGEgPT09IGRvYyA/IC0xIDpcblx0XHRcdFx0YiA9PT0gZG9jID8gMSA6XG5cdFx0XHRcdGF1cCA/IC0xIDpcblx0XHRcdFx0YnVwID8gMSA6XG5cdFx0XHRcdHNvcnRJbnB1dCA/XG5cdFx0XHRcdCggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDpcblx0XHRcdFx0MDtcblxuXHRcdC8vIElmIHRoZSBub2RlcyBhcmUgc2libGluZ3MsIHdlIGNhbiBkbyBhIHF1aWNrIGNoZWNrXG5cdFx0fSBlbHNlIGlmICggYXVwID09PSBidXAgKSB7XG5cdFx0XHRyZXR1cm4gc2libGluZ0NoZWNrKCBhLCBiICk7XG5cdFx0fVxuXG5cdFx0Ly8gT3RoZXJ3aXNlIHdlIG5lZWQgZnVsbCBsaXN0cyBvZiB0aGVpciBhbmNlc3RvcnMgZm9yIGNvbXBhcmlzb25cblx0XHRjdXIgPSBhO1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHtcblx0XHRcdGFwLnVuc2hpZnQoIGN1ciApO1xuXHRcdH1cblx0XHRjdXIgPSBiO1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5wYXJlbnROb2RlKSApIHtcblx0XHRcdGJwLnVuc2hpZnQoIGN1ciApO1xuXHRcdH1cblxuXHRcdC8vIFdhbGsgZG93biB0aGUgdHJlZSBsb29raW5nIGZvciBhIGRpc2NyZXBhbmN5XG5cdFx0d2hpbGUgKCBhcFtpXSA9PT0gYnBbaV0gKSB7XG5cdFx0XHRpKys7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGkgP1xuXHRcdFx0Ly8gRG8gYSBzaWJsaW5nIGNoZWNrIGlmIHRoZSBub2RlcyBoYXZlIGEgY29tbW9uIGFuY2VzdG9yXG5cdFx0XHRzaWJsaW5nQ2hlY2soIGFwW2ldLCBicFtpXSApIDpcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlIG5vZGVzIGluIG91ciBkb2N1bWVudCBzb3J0IGZpcnN0XG5cdFx0XHRhcFtpXSA9PT0gcHJlZmVycmVkRG9jID8gLTEgOlxuXHRcdFx0YnBbaV0gPT09IHByZWZlcnJlZERvYyA/IDEgOlxuXHRcdFx0MDtcblx0fTtcblxuXHRyZXR1cm4gZG9jO1xufTtcblxuU2l6emxlLm1hdGNoZXMgPSBmdW5jdGlvbiggZXhwciwgZWxlbWVudHMgKSB7XG5cdHJldHVybiBTaXp6bGUoIGV4cHIsIG51bGwsIG51bGwsIGVsZW1lbnRzICk7XG59O1xuXG5TaXp6bGUubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24oIGVsZW0sIGV4cHIgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdC8vIE1ha2Ugc3VyZSB0aGF0IGF0dHJpYnV0ZSBzZWxlY3RvcnMgYXJlIHF1b3RlZFxuXHRleHByID0gZXhwci5yZXBsYWNlKCByYXR0cmlidXRlUXVvdGVzLCBcIj0nJDEnXVwiICk7XG5cblx0aWYgKCBzdXBwb3J0Lm1hdGNoZXNTZWxlY3RvciAmJiBkb2N1bWVudElzSFRNTCAmJlxuXHRcdCggIXJidWdneU1hdGNoZXMgfHwgIXJidWdneU1hdGNoZXMudGVzdCggZXhwciApICkgJiZcblx0XHQoICFyYnVnZ3lRU0EgICAgIHx8ICFyYnVnZ3lRU0EudGVzdCggZXhwciApICkgKSB7XG5cblx0XHR0cnkge1xuXHRcdFx0dmFyIHJldCA9IG1hdGNoZXMuY2FsbCggZWxlbSwgZXhwciApO1xuXG5cdFx0XHQvLyBJRSA5J3MgbWF0Y2hlc1NlbGVjdG9yIHJldHVybnMgZmFsc2Ugb24gZGlzY29ubmVjdGVkIG5vZGVzXG5cdFx0XHRpZiAoIHJldCB8fCBzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoIHx8XG5cdFx0XHRcdFx0Ly8gQXMgd2VsbCwgZGlzY29ubmVjdGVkIG5vZGVzIGFyZSBzYWlkIHRvIGJlIGluIGEgZG9jdW1lbnRcblx0XHRcdFx0XHQvLyBmcmFnbWVudCBpbiBJRSA5XG5cdFx0XHRcdFx0ZWxlbS5kb2N1bWVudCAmJiBlbGVtLmRvY3VtZW50Lm5vZGVUeXBlICE9PSAxMSApIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7fVxuXHR9XG5cblx0cmV0dXJuIFNpenpsZSggZXhwciwgZG9jdW1lbnQsIG51bGwsIFsgZWxlbSBdICkubGVuZ3RoID4gMDtcbn07XG5cblNpenpsZS5jb250YWlucyA9IGZ1bmN0aW9uKCBjb250ZXh0LCBlbGVtICkge1xuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0aWYgKCAoIGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0ICkgIT09IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBjb250ZXh0ICk7XG5cdH1cblx0cmV0dXJuIGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICk7XG59O1xuXG5TaXp6bGUuYXR0ciA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0aWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdH1cblxuXHR2YXIgZm4gPSBFeHByLmF0dHJIYW5kbGVbIG5hbWUudG9Mb3dlckNhc2UoKSBdLFxuXHRcdC8vIERvbid0IGdldCBmb29sZWQgYnkgT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzIChqUXVlcnkgIzEzODA3KVxuXHRcdHZhbCA9IGZuICYmIGhhc093bi5jYWxsKCBFeHByLmF0dHJIYW5kbGUsIG5hbWUudG9Mb3dlckNhc2UoKSApID9cblx0XHRcdGZuKCBlbGVtLCBuYW1lLCAhZG9jdW1lbnRJc0hUTUwgKSA6XG5cdFx0XHR1bmRlZmluZWQ7XG5cblx0cmV0dXJuIHZhbCAhPT0gdW5kZWZpbmVkID9cblx0XHR2YWwgOlxuXHRcdHN1cHBvcnQuYXR0cmlidXRlcyB8fCAhZG9jdW1lbnRJc0hUTUwgP1xuXHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKSA6XG5cdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKG5hbWUpKSAmJiB2YWwuc3BlY2lmaWVkID9cblx0XHRcdFx0dmFsLnZhbHVlIDpcblx0XHRcdFx0bnVsbDtcbn07XG5cblNpenpsZS5lcnJvciA9IGZ1bmN0aW9uKCBtc2cgKSB7XG5cdHRocm93IG5ldyBFcnJvciggXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIiArIG1zZyApO1xufTtcblxuLyoqXG4gKiBEb2N1bWVudCBzb3J0aW5nIGFuZCByZW1vdmluZyBkdXBsaWNhdGVzXG4gKiBAcGFyYW0ge0FycmF5TGlrZX0gcmVzdWx0c1xuICovXG5TaXp6bGUudW5pcXVlU29ydCA9IGZ1bmN0aW9uKCByZXN1bHRzICkge1xuXHR2YXIgZWxlbSxcblx0XHRkdXBsaWNhdGVzID0gW10sXG5cdFx0aiA9IDAsXG5cdFx0aSA9IDA7XG5cblx0Ly8gVW5sZXNzIHdlICprbm93KiB3ZSBjYW4gZGV0ZWN0IGR1cGxpY2F0ZXMsIGFzc3VtZSB0aGVpciBwcmVzZW5jZVxuXHRoYXNEdXBsaWNhdGUgPSAhc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzO1xuXHRzb3J0SW5wdXQgPSAhc3VwcG9ydC5zb3J0U3RhYmxlICYmIHJlc3VsdHMuc2xpY2UoIDAgKTtcblx0cmVzdWx0cy5zb3J0KCBzb3J0T3JkZXIgKTtcblxuXHRpZiAoIGhhc0R1cGxpY2F0ZSApIHtcblx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdGlmICggZWxlbSA9PT0gcmVzdWx0c1sgaSBdICkge1xuXHRcdFx0XHRqID0gZHVwbGljYXRlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0cmVzdWx0cy5zcGxpY2UoIGR1cGxpY2F0ZXNbIGogXSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdC8vIENsZWFyIGlucHV0IGFmdGVyIHNvcnRpbmcgdG8gcmVsZWFzZSBvYmplY3RzXG5cdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L3NpenpsZS9wdWxsLzIyNVxuXHRzb3J0SW5wdXQgPSBudWxsO1xuXG5cdHJldHVybiByZXN1bHRzO1xufTtcblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9uIGZvciByZXRyaWV2aW5nIHRoZSB0ZXh0IHZhbHVlIG9mIGFuIGFycmF5IG9mIERPTSBub2Rlc1xuICogQHBhcmFtIHtBcnJheXxFbGVtZW50fSBlbGVtXG4gKi9cbmdldFRleHQgPSBTaXp6bGUuZ2V0VGV4dCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHR2YXIgbm9kZSxcblx0XHRyZXQgPSBcIlwiLFxuXHRcdGkgPSAwLFxuXHRcdG5vZGVUeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRpZiAoICFub2RlVHlwZSApIHtcblx0XHQvLyBJZiBubyBub2RlVHlwZSwgdGhpcyBpcyBleHBlY3RlZCB0byBiZSBhbiBhcnJheVxuXHRcdHdoaWxlICggKG5vZGUgPSBlbGVtW2krK10pICkge1xuXHRcdFx0Ly8gRG8gbm90IHRyYXZlcnNlIGNvbW1lbnQgbm9kZXNcblx0XHRcdHJldCArPSBnZXRUZXh0KCBub2RlICk7XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMSB8fCBub2RlVHlwZSA9PT0gOSB8fCBub2RlVHlwZSA9PT0gMTEgKSB7XG5cdFx0Ly8gVXNlIHRleHRDb250ZW50IGZvciBlbGVtZW50c1xuXHRcdC8vIGlubmVyVGV4dCB1c2FnZSByZW1vdmVkIGZvciBjb25zaXN0ZW5jeSBvZiBuZXcgbGluZXMgKGpRdWVyeSAjMTExNTMpXG5cdFx0aWYgKCB0eXBlb2YgZWxlbS50ZXh0Q29udGVudCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiBlbGVtLnRleHRDb250ZW50O1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBUcmF2ZXJzZSBpdHMgY2hpbGRyZW5cblx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRyZXQgKz0gZ2V0VGV4dCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDMgfHwgbm9kZVR5cGUgPT09IDQgKSB7XG5cdFx0cmV0dXJuIGVsZW0ubm9kZVZhbHVlO1xuXHR9XG5cdC8vIERvIG5vdCBpbmNsdWRlIGNvbW1lbnQgb3IgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbiBub2Rlc1xuXG5cdHJldHVybiByZXQ7XG59O1xuXG5FeHByID0gU2l6emxlLnNlbGVjdG9ycyA9IHtcblxuXHQvLyBDYW4gYmUgYWRqdXN0ZWQgYnkgdGhlIHVzZXJcblx0Y2FjaGVMZW5ndGg6IDUwLFxuXG5cdGNyZWF0ZVBzZXVkbzogbWFya0Z1bmN0aW9uLFxuXG5cdG1hdGNoOiBtYXRjaEV4cHIsXG5cblx0YXR0ckhhbmRsZToge30sXG5cblx0ZmluZDoge30sXG5cblx0cmVsYXRpdmU6IHtcblx0XHRcIj5cIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiLCBmaXJzdDogdHJ1ZSB9LFxuXHRcdFwiIFwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIgfSxcblx0XHRcIitcIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCJ+XCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiIH1cblx0fSxcblxuXHRwcmVGaWx0ZXI6IHtcblx0XHRcIkFUVFJcIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0bWF0Y2hbMV0gPSBtYXRjaFsxXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXG5cdFx0XHQvLyBNb3ZlIHRoZSBnaXZlbiB2YWx1ZSB0byBtYXRjaFszXSB3aGV0aGVyIHF1b3RlZCBvciB1bnF1b3RlZFxuXHRcdFx0bWF0Y2hbM10gPSAoIG1hdGNoWzNdIHx8IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCIgKS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXG5cdFx0XHRpZiAoIG1hdGNoWzJdID09PSBcIn49XCIgKSB7XG5cdFx0XHRcdG1hdGNoWzNdID0gXCIgXCIgKyBtYXRjaFszXSArIFwiIFwiO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDQgKTtcblx0XHR9LFxuXG5cdFx0XCJDSElMRFwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHQvKiBtYXRjaGVzIGZyb20gbWF0Y2hFeHByW1wiQ0hJTERcIl1cblx0XHRcdFx0MSB0eXBlIChvbmx5fG50aHwuLi4pXG5cdFx0XHRcdDIgd2hhdCAoY2hpbGR8b2YtdHlwZSlcblx0XHRcdFx0MyBhcmd1bWVudCAoZXZlbnxvZGR8XFxkKnxcXGQqbihbKy1dXFxkKyk/fC4uLilcblx0XHRcdFx0NCB4bi1jb21wb25lbnQgb2YgeG4reSBhcmd1bWVudCAoWystXT9cXGQqbnwpXG5cdFx0XHRcdDUgc2lnbiBvZiB4bi1jb21wb25lbnRcblx0XHRcdFx0NiB4IG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ3IHNpZ24gb2YgeS1jb21wb25lbnRcblx0XHRcdFx0OCB5IG9mIHktY29tcG9uZW50XG5cdFx0XHQqL1xuXHRcdFx0bWF0Y2hbMV0gPSBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0XHRpZiAoIG1hdGNoWzFdLnNsaWNlKCAwLCAzICkgPT09IFwibnRoXCIgKSB7XG5cdFx0XHRcdC8vIG50aC0qIHJlcXVpcmVzIGFyZ3VtZW50XG5cdFx0XHRcdGlmICggIW1hdGNoWzNdICkge1xuXHRcdFx0XHRcdFNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIG51bWVyaWMgeCBhbmQgeSBwYXJhbWV0ZXJzIGZvciBFeHByLmZpbHRlci5DSElMRFxuXHRcdFx0XHQvLyByZW1lbWJlciB0aGF0IGZhbHNlL3RydWUgY2FzdCByZXNwZWN0aXZlbHkgdG8gMC8xXG5cdFx0XHRcdG1hdGNoWzRdID0gKyggbWF0Y2hbNF0gPyBtYXRjaFs1XSArIChtYXRjaFs2XSB8fCAxKSA6IDIgKiAoIG1hdGNoWzNdID09PSBcImV2ZW5cIiB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApICk7XG5cdFx0XHRcdG1hdGNoWzVdID0gKyggKCBtYXRjaFs3XSArIG1hdGNoWzhdICkgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKTtcblxuXHRcdFx0Ly8gb3RoZXIgdHlwZXMgcHJvaGliaXQgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCBtYXRjaFszXSApIHtcblx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbWF0Y2g7XG5cdFx0fSxcblxuXHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdHZhciBleGNlc3MsXG5cdFx0XHRcdHVucXVvdGVkID0gIW1hdGNoWzZdICYmIG1hdGNoWzJdO1xuXG5cdFx0XHRpZiAoIG1hdGNoRXhwcltcIkNISUxEXCJdLnRlc3QoIG1hdGNoWzBdICkgKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBY2NlcHQgcXVvdGVkIGFyZ3VtZW50cyBhcy1pc1xuXHRcdFx0aWYgKCBtYXRjaFszXSApIHtcblx0XHRcdFx0bWF0Y2hbMl0gPSBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBcIlwiO1xuXG5cdFx0XHQvLyBTdHJpcCBleGNlc3MgY2hhcmFjdGVycyBmcm9tIHVucXVvdGVkIGFyZ3VtZW50c1xuXHRcdFx0fSBlbHNlIGlmICggdW5xdW90ZWQgJiYgcnBzZXVkby50ZXN0KCB1bnF1b3RlZCApICYmXG5cdFx0XHRcdC8vIEdldCBleGNlc3MgZnJvbSB0b2tlbml6ZSAocmVjdXJzaXZlbHkpXG5cdFx0XHRcdChleGNlc3MgPSB0b2tlbml6ZSggdW5xdW90ZWQsIHRydWUgKSkgJiZcblx0XHRcdFx0Ly8gYWR2YW5jZSB0byB0aGUgbmV4dCBjbG9zaW5nIHBhcmVudGhlc2lzXG5cdFx0XHRcdChleGNlc3MgPSB1bnF1b3RlZC5pbmRleE9mKCBcIilcIiwgdW5xdW90ZWQubGVuZ3RoIC0gZXhjZXNzICkgLSB1bnF1b3RlZC5sZW5ndGgpICkge1xuXG5cdFx0XHRcdC8vIGV4Y2VzcyBpcyBhIG5lZ2F0aXZlIGluZGV4XG5cdFx0XHRcdG1hdGNoWzBdID0gbWF0Y2hbMF0uc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0XHRtYXRjaFsyXSA9IHVucXVvdGVkLnNsaWNlKCAwLCBleGNlc3MgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV0dXJuIG9ubHkgY2FwdHVyZXMgbmVlZGVkIGJ5IHRoZSBwc2V1ZG8gZmlsdGVyIG1ldGhvZCAodHlwZSBhbmQgYXJndW1lbnQpXG5cdFx0XHRyZXR1cm4gbWF0Y2guc2xpY2UoIDAsIDMgKTtcblx0XHR9XG5cdH0sXG5cblx0ZmlsdGVyOiB7XG5cblx0XHRcIlRBR1wiOiBmdW5jdGlvbiggbm9kZU5hbWVTZWxlY3RvciApIHtcblx0XHRcdHZhciBub2RlTmFtZSA9IG5vZGVOYW1lU2VsZWN0b3IucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIG5vZGVOYW1lU2VsZWN0b3IgPT09IFwiKlwiID9cblx0XHRcdFx0ZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9IDpcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBub2RlTmFtZTtcblx0XHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJDTEFTU1wiOiBmdW5jdGlvbiggY2xhc3NOYW1lICkge1xuXHRcdFx0dmFyIHBhdHRlcm4gPSBjbGFzc0NhY2hlWyBjbGFzc05hbWUgKyBcIiBcIiBdO1xuXG5cdFx0XHRyZXR1cm4gcGF0dGVybiB8fFxuXHRcdFx0XHQocGF0dGVybiA9IG5ldyBSZWdFeHAoIFwiKF58XCIgKyB3aGl0ZXNwYWNlICsgXCIpXCIgKyBjbGFzc05hbWUgKyBcIihcIiArIHdoaXRlc3BhY2UgKyBcInwkKVwiICkpICYmXG5cdFx0XHRcdGNsYXNzQ2FjaGUoIGNsYXNzTmFtZSwgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhdHRlcm4udGVzdCggdHlwZW9mIGVsZW0uY2xhc3NOYW1lID09PSBcInN0cmluZ1wiICYmIGVsZW0uY2xhc3NOYW1lIHx8IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBlbGVtLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpIHx8IFwiXCIgKTtcblx0XHRcdFx0fSk7XG5cdFx0fSxcblxuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbmFtZSwgb3BlcmF0b3IsIGNoZWNrICkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgcmVzdWx0ID0gU2l6emxlLmF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdFx0XHRpZiAoIHJlc3VsdCA9PSBudWxsICkge1xuXHRcdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCIhPVwiO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICggIW9wZXJhdG9yICkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmVzdWx0ICs9IFwiXCI7XG5cblx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIj1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiE9XCIgPyByZXN1bHQgIT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJePVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPT09IDAgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIio9XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIkPVwiID8gY2hlY2sgJiYgcmVzdWx0LnNsaWNlKCAtY2hlY2subGVuZ3RoICkgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJ+PVwiID8gKCBcIiBcIiArIHJlc3VsdC5yZXBsYWNlKCByd2hpdGVzcGFjZSwgXCIgXCIgKSArIFwiIFwiICkuaW5kZXhPZiggY2hlY2sgKSA+IC0xIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCJ8PVwiID8gcmVzdWx0ID09PSBjaGVjayB8fCByZXN1bHQuc2xpY2UoIDAsIGNoZWNrLmxlbmd0aCArIDEgKSA9PT0gY2hlY2sgKyBcIi1cIiA6XG5cdFx0XHRcdFx0ZmFsc2U7XG5cdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCB0eXBlLCB3aGF0LCBhcmd1bWVudCwgZmlyc3QsIGxhc3QgKSB7XG5cdFx0XHR2YXIgc2ltcGxlID0gdHlwZS5zbGljZSggMCwgMyApICE9PSBcIm50aFwiLFxuXHRcdFx0XHRmb3J3YXJkID0gdHlwZS5zbGljZSggLTQgKSAhPT0gXCJsYXN0XCIsXG5cdFx0XHRcdG9mVHlwZSA9IHdoYXQgPT09IFwib2YtdHlwZVwiO1xuXG5cdFx0XHRyZXR1cm4gZmlyc3QgPT09IDEgJiYgbGFzdCA9PT0gMCA/XG5cblx0XHRcdFx0Ly8gU2hvcnRjdXQgZm9yIDpudGgtKihuKVxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gISFlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRcdH0gOlxuXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0dmFyIGNhY2hlLCBvdXRlckNhY2hlLCBub2RlLCBkaWZmLCBub2RlSW5kZXgsIHN0YXJ0LFxuXHRcdFx0XHRcdFx0ZGlyID0gc2ltcGxlICE9PSBmb3J3YXJkID8gXCJuZXh0U2libGluZ1wiIDogXCJwcmV2aW91c1NpYmxpbmdcIixcblx0XHRcdFx0XHRcdHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZSxcblx0XHRcdFx0XHRcdG5hbWUgPSBvZlR5cGUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdFx0dXNlQ2FjaGUgPSAheG1sICYmICFvZlR5cGU7XG5cblx0XHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gOihmaXJzdHxsYXN0fG9ubHkpLShjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHRcdFx0aWYgKCBzaW1wbGUgKSB7XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggZGlyICkge1xuXHRcdFx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtO1xuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSBub2RlWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG9mVHlwZSA/IG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6IG5vZGUubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmV2ZXJzZSBkaXJlY3Rpb24gZm9yIDpvbmx5LSogKGlmIHdlIGhhdmVuJ3QgeWV0IGRvbmUgc28pXG5cdFx0XHRcdFx0XHRcdFx0c3RhcnQgPSBkaXIgPSB0eXBlID09PSBcIm9ubHlcIiAmJiAhc3RhcnQgJiYgXCJuZXh0U2libGluZ1wiO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRzdGFydCA9IFsgZm9yd2FyZCA/IHBhcmVudC5maXJzdENoaWxkIDogcGFyZW50Lmxhc3RDaGlsZCBdO1xuXG5cdFx0XHRcdFx0XHQvLyBub24teG1sIDpudGgtY2hpbGQoLi4uKSBzdG9yZXMgY2FjaGUgZGF0YSBvbiBgcGFyZW50YFxuXHRcdFx0XHRcdFx0aWYgKCBmb3J3YXJkICYmIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHQvLyBTZWVrIGBlbGVtYCBmcm9tIGEgcHJldmlvdXNseS1jYWNoZWQgaW5kZXhcblx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IHBhcmVudFsgZXhwYW5kbyBdIHx8IChwYXJlbnRbIGV4cGFuZG8gXSA9IHt9KTtcblx0XHRcdFx0XHRcdFx0Y2FjaGUgPSBvdXRlckNhY2hlWyB0eXBlIF0gfHwgW107XG5cdFx0XHRcdFx0XHRcdG5vZGVJbmRleCA9IGNhY2hlWzBdID09PSBkaXJydW5zICYmIGNhY2hlWzFdO1xuXHRcdFx0XHRcdFx0XHRkaWZmID0gY2FjaGVbMF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbMl07XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBub2RlSW5kZXggJiYgcGFyZW50LmNoaWxkTm9kZXNbIG5vZGVJbmRleCBdO1xuXG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjayB0byBzZWVraW5nIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdChkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gV2hlbiBmb3VuZCwgY2FjaGUgaW5kZXhlcyBvbiBgcGFyZW50YCBhbmQgYnJlYWtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgJiYgKytkaWZmICYmIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIG5vZGVJbmRleCwgZGlmZiBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIFVzZSBwcmV2aW91c2x5LWNhY2hlZCBlbGVtZW50IGluZGV4IGlmIGF2YWlsYWJsZVxuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICggdXNlQ2FjaGUgJiYgKGNhY2hlID0gKGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pKVsgdHlwZSBdKSAmJiBjYWNoZVswXSA9PT0gZGlycnVucyApIHtcblx0XHRcdFx0XHRcdFx0ZGlmZiA9IGNhY2hlWzFdO1xuXG5cdFx0XHRcdFx0XHQvLyB4bWwgOm50aC1jaGlsZCguLi4pIG9yIDpudGgtbGFzdC1jaGlsZCguLi4pIG9yIDpudGgoLWxhc3QpPy1vZi10eXBlKC4uLilcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFVzZSB0aGUgc2FtZSBsb29wIGFzIGFib3ZlIHRvIHNlZWsgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRpZiAoICggb2ZUeXBlID8gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDogbm9kZS5ub2RlVHlwZSA9PT0gMSApICYmICsrZGlmZiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIENhY2hlIHRoZSBpbmRleCBvZiBlYWNoIGVuY291bnRlcmVkIGVsZW1lbnRcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggdXNlQ2FjaGUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdChub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KSlbIHR5cGUgXSA9IFsgZGlycnVucywgZGlmZiBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZVxuXHRcdFx0XHRcdFx0ZGlmZiAtPSBsYXN0O1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggcHNldWRvLCBhcmd1bWVudCApIHtcblx0XHRcdC8vIHBzZXVkby1jbGFzcyBuYW1lcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZVxuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNwc2V1ZG8tY2xhc3Nlc1xuXHRcdFx0Ly8gUHJpb3JpdGl6ZSBieSBjYXNlIHNlbnNpdGl2aXR5IGluIGNhc2UgY3VzdG9tIHBzZXVkb3MgYXJlIGFkZGVkIHdpdGggdXBwZXJjYXNlIGxldHRlcnNcblx0XHRcdC8vIFJlbWVtYmVyIHRoYXQgc2V0RmlsdGVycyBpbmhlcml0cyBmcm9tIHBzZXVkb3Ncblx0XHRcdHZhciBhcmdzLFxuXHRcdFx0XHRmbiA9IEV4cHIucHNldWRvc1sgcHNldWRvIF0gfHwgRXhwci5zZXRGaWx0ZXJzWyBwc2V1ZG8udG9Mb3dlckNhc2UoKSBdIHx8XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIgKyBwc2V1ZG8gKTtcblxuXHRcdFx0Ly8gVGhlIHVzZXIgbWF5IHVzZSBjcmVhdGVQc2V1ZG8gdG8gaW5kaWNhdGUgdGhhdFxuXHRcdFx0Ly8gYXJndW1lbnRzIGFyZSBuZWVkZWQgdG8gY3JlYXRlIHRoZSBmaWx0ZXIgZnVuY3Rpb25cblx0XHRcdC8vIGp1c3QgYXMgU2l6emxlIGRvZXNcblx0XHRcdGlmICggZm5bIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0cmV0dXJuIGZuKCBhcmd1bWVudCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBCdXQgbWFpbnRhaW4gc3VwcG9ydCBmb3Igb2xkIHNpZ25hdHVyZXNcblx0XHRcdGlmICggZm4ubGVuZ3RoID4gMSApIHtcblx0XHRcdFx0YXJncyA9IFsgcHNldWRvLCBwc2V1ZG8sIFwiXCIsIGFyZ3VtZW50IF07XG5cdFx0XHRcdHJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdFx0XHRcdHZhciBpZHgsXG5cdFx0XHRcdFx0XHRcdG1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSxcblx0XHRcdFx0XHRcdFx0aSA9IG1hdGNoZWQubGVuZ3RoO1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRcdGlkeCA9IGluZGV4T2YoIHNlZWQsIG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdFx0c2VlZFsgaWR4IF0gPSAhKCBtYXRjaGVzWyBpZHggXSA9IG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZm4oIGVsZW0sIDAsIGFyZ3MgKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZm47XG5cdFx0fVxuXHR9LFxuXG5cdHBzZXVkb3M6IHtcblx0XHQvLyBQb3RlbnRpYWxseSBjb21wbGV4IHBzZXVkb3Ncblx0XHRcIm5vdFwiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0Ly8gVHJpbSB0aGUgc2VsZWN0b3IgcGFzc2VkIHRvIGNvbXBpbGVcblx0XHRcdC8vIHRvIGF2b2lkIHRyZWF0aW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nXG5cdFx0XHQvLyBzcGFjZXMgYXMgY29tYmluYXRvcnNcblx0XHRcdHZhciBpbnB1dCA9IFtdLFxuXHRcdFx0XHRyZXN1bHRzID0gW10sXG5cdFx0XHRcdG1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICkgKTtcblxuXHRcdFx0cmV0dXJuIG1hdGNoZXJbIGV4cGFuZG8gXSA/XG5cdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcywgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHRcdFx0dW5tYXRjaGVkID0gbWF0Y2hlciggc2VlZCwgbnVsbCwgeG1sLCBbXSApLFxuXHRcdFx0XHRcdFx0aSA9IHNlZWQubGVuZ3RoO1xuXG5cdFx0XHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgdW5tYXRjaGVkIGJ5IGBtYXRjaGVyYFxuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRcdFx0XHRcdHNlZWRbaV0gPSAhKG1hdGNoZXNbaV0gPSBlbGVtKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pIDpcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHRpbnB1dFswXSA9IGVsZW07XG5cdFx0XHRcdFx0bWF0Y2hlciggaW5wdXQsIG51bGwsIHhtbCwgcmVzdWx0cyApO1xuXHRcdFx0XHRcdC8vIERvbid0IGtlZXAgdGhlIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRcdFx0aW5wdXRbMF0gPSBudWxsO1xuXHRcdFx0XHRcdHJldHVybiAhcmVzdWx0cy5wb3AoKTtcblx0XHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiaGFzXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBTaXp6bGUoIHNlbGVjdG9yLCBlbGVtICkubGVuZ3RoID4gMDtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHRcImNvbnRhaW5zXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0udGV4dENvbnRlbnQgfHwgZWxlbS5pbm5lclRleHQgfHwgZ2V0VGV4dCggZWxlbSApICkuaW5kZXhPZiggdGV4dCApID4gLTE7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0Ly8gXCJXaGV0aGVyIGFuIGVsZW1lbnQgaXMgcmVwcmVzZW50ZWQgYnkgYSA6bGFuZygpIHNlbGVjdG9yXG5cdFx0Ly8gaXMgYmFzZWQgc29sZWx5IG9uIHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWVcblx0XHQvLyBiZWluZyBlcXVhbCB0byB0aGUgaWRlbnRpZmllciBDLFxuXHRcdC8vIG9yIGJlZ2lubmluZyB3aXRoIHRoZSBpZGVudGlmaWVyIEMgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgXCItXCIuXG5cdFx0Ly8gVGhlIG1hdGNoaW5nIG9mIEMgYWdhaW5zdCB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlIGlzIHBlcmZvcm1lZCBjYXNlLWluc2Vuc2l0aXZlbHkuXG5cdFx0Ly8gVGhlIGlkZW50aWZpZXIgQyBkb2VzIG5vdCBoYXZlIHRvIGJlIGEgdmFsaWQgbGFuZ3VhZ2UgbmFtZS5cIlxuXHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jbGFuZy1wc2V1ZG9cblx0XHRcImxhbmdcIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggbGFuZyApIHtcblx0XHRcdC8vIGxhbmcgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcblx0XHRcdGlmICggIXJpZGVudGlmaWVyLnRlc3QobGFuZyB8fCBcIlwiKSApIHtcblx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIGxhbmc6IFwiICsgbGFuZyApO1xuXHRcdFx0fVxuXHRcdFx0bGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgZWxlbUxhbmc7XG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtTGFuZyA9IGRvY3VtZW50SXNIVE1MID9cblx0XHRcdFx0XHRcdGVsZW0ubGFuZyA6XG5cdFx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSkgKSB7XG5cblx0XHRcdFx0XHRcdGVsZW1MYW5nID0gZWxlbUxhbmcudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtTGFuZyA9PT0gbGFuZyB8fCBlbGVtTGFuZy5pbmRleE9mKCBsYW5nICsgXCItXCIgKSA9PT0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0Ly8gTWlzY2VsbGFuZW91c1xuXHRcdFwidGFyZ2V0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyZXR1cm4gaGFzaCAmJiBoYXNoLnNsaWNlKCAxICkgPT09IGVsZW0uaWQ7XG5cdFx0fSxcblxuXHRcdFwicm9vdFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBkb2NFbGVtO1xuXHRcdH0sXG5cblx0XHRcImZvY3VzXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgKCFkb2N1bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSAmJiAhIShlbGVtLnR5cGUgfHwgZWxlbS5ocmVmIHx8IH5lbGVtLnRhYkluZGV4KTtcblx0XHR9LFxuXG5cdFx0Ly8gQm9vbGVhbiBwcm9wZXJ0aWVzXG5cdFx0XCJlbmFibGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlO1xuXHRcdH0sXG5cblx0XHRcImRpc2FibGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IHRydWU7XG5cdFx0fSxcblxuXHRcdFwiY2hlY2tlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEluIENTUzMsIDpjaGVja2VkIHNob3VsZCByZXR1cm4gYm90aCBjaGVja2VkIGFuZCBzZWxlY3RlZCBlbGVtZW50c1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdHZhciBub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiAobm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiAhIWVsZW0uY2hlY2tlZCkgfHwgKG5vZGVOYW1lID09PSBcIm9wdGlvblwiICYmICEhZWxlbS5zZWxlY3RlZCk7XG5cdFx0fSxcblxuXHRcdFwic2VsZWN0ZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0XG5cdFx0XHQvLyBvcHRpb25zIGluIFNhZmFyaSB3b3JrIHByb3Blcmx5XG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlO1xuXHRcdH0sXG5cblx0XHQvLyBDb250ZW50c1xuXHRcdFwiZW1wdHlcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2VtcHR5LXBzZXVkb1xuXHRcdFx0Ly8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLFxuXHRcdFx0Ly8gICBidXQgbm90IGJ5IG90aGVycyAoY29tbWVudDogODsgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbjogNzsgZXRjLilcblx0XHRcdC8vIG5vZGVUeXBlIDwgNiB3b3JrcyBiZWNhdXNlIGF0dHJpYnV0ZXMgKDIpIGRvIG5vdCBhcHBlYXIgYXMgY2hpbGRyZW5cblx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPCA2ICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblxuXHRcdFwicGFyZW50XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICFFeHByLnBzZXVkb3NbXCJlbXB0eVwiXSggZWxlbSApO1xuXHRcdH0sXG5cblx0XHQvLyBFbGVtZW50L2lucHV0IHR5cGVzXG5cdFx0XCJoZWFkZXJcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmhlYWRlci50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiaW5wdXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiYnV0dG9uXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gXCJidXR0b25cIiB8fCBuYW1lID09PSBcImJ1dHRvblwiO1xuXHRcdH0sXG5cblx0XHRcInRleHRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgYXR0cjtcblx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIiAmJlxuXHRcdFx0XHRlbGVtLnR5cGUgPT09IFwidGV4dFwiICYmXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU8OFxuXHRcdFx0XHQvLyBOZXcgSFRNTDUgYXR0cmlidXRlIHZhbHVlcyAoZS5nLiwgXCJzZWFyY2hcIikgYXBwZWFyIHdpdGggZWxlbS50eXBlID09PSBcInRleHRcIlxuXHRcdFx0XHQoIChhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKSA9PSBudWxsIHx8IGF0dHIudG9Mb3dlckNhc2UoKSA9PT0gXCJ0ZXh0XCIgKTtcblx0XHR9LFxuXG5cdFx0Ly8gUG9zaXRpb24taW4tY29sbGVjdGlvblxuXHRcdFwiZmlyc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBbIDAgXTtcblx0XHR9KSxcblxuXHRcdFwibGFzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHJldHVybiBbIGxlbmd0aCAtIDEgXTtcblx0XHR9KSxcblxuXHRcdFwiZXFcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0cmV0dXJuIFsgYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJldmVuXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJvZGRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDE7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcImx0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdGZvciAoIDsgLS1pID49IDA7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwiZ3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyArK2kgPCBsZW5ndGg7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KVxuXHR9XG59O1xuXG5FeHByLnBzZXVkb3NbXCJudGhcIl0gPSBFeHByLnBzZXVkb3NbXCJlcVwiXTtcblxuLy8gQWRkIGJ1dHRvbi9pbnB1dCB0eXBlIHBzZXVkb3NcbmZvciAoIGkgaW4geyByYWRpbzogdHJ1ZSwgY2hlY2tib3g6IHRydWUsIGZpbGU6IHRydWUsIHBhc3N3b3JkOiB0cnVlLCBpbWFnZTogdHJ1ZSB9ICkge1xuXHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUlucHV0UHNldWRvKCBpICk7XG59XG5mb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCByZXNldDogdHJ1ZSB9ICkge1xuXHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUJ1dHRvblBzZXVkbyggaSApO1xufVxuXG4vLyBFYXN5IEFQSSBmb3IgY3JlYXRpbmcgbmV3IHNldEZpbHRlcnNcbmZ1bmN0aW9uIHNldEZpbHRlcnMoKSB7fVxuc2V0RmlsdGVycy5wcm90b3R5cGUgPSBFeHByLmZpbHRlcnMgPSBFeHByLnBzZXVkb3M7XG5FeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpO1xuXG50b2tlbml6ZSA9IFNpenpsZS50b2tlbml6ZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgcGFyc2VPbmx5ICkge1xuXHR2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSxcblx0XHRzb0ZhciwgZ3JvdXBzLCBwcmVGaWx0ZXJzLFxuXHRcdGNhY2hlZCA9IHRva2VuQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoIGNhY2hlZCApIHtcblx0XHRyZXR1cm4gcGFyc2VPbmx5ID8gMCA6IGNhY2hlZC5zbGljZSggMCApO1xuXHR9XG5cblx0c29GYXIgPSBzZWxlY3Rvcjtcblx0Z3JvdXBzID0gW107XG5cdHByZUZpbHRlcnMgPSBFeHByLnByZUZpbHRlcjtcblxuXHR3aGlsZSAoIHNvRmFyICkge1xuXG5cdFx0Ly8gQ29tbWEgYW5kIGZpcnN0IHJ1blxuXHRcdGlmICggIW1hdGNoZWQgfHwgKG1hdGNoID0gcmNvbW1hLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0aWYgKCBtYXRjaCApIHtcblx0XHRcdFx0Ly8gRG9uJ3QgY29uc3VtZSB0cmFpbGluZyBjb21tYXMgYXMgdmFsaWRcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbMF0ubGVuZ3RoICkgfHwgc29GYXI7XG5cdFx0XHR9XG5cdFx0XHRncm91cHMucHVzaCggKHRva2VucyA9IFtdKSApO1xuXHRcdH1cblxuXHRcdG1hdGNoZWQgPSBmYWxzZTtcblxuXHRcdC8vIENvbWJpbmF0b3JzXG5cdFx0aWYgKCAobWF0Y2ggPSByY29tYmluYXRvcnMuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cdFx0XHRcdC8vIENhc3QgZGVzY2VuZGFudCBjb21iaW5hdG9ycyB0byBzcGFjZVxuXHRcdFx0XHR0eXBlOiBtYXRjaFswXS5yZXBsYWNlKCBydHJpbSwgXCIgXCIgKVxuXHRcdFx0fSk7XG5cdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZpbHRlcnNcblx0XHRmb3IgKCB0eXBlIGluIEV4cHIuZmlsdGVyICkge1xuXHRcdFx0aWYgKCAobWF0Y2ggPSBtYXRjaEV4cHJbIHR5cGUgXS5leGVjKCBzb0ZhciApKSAmJiAoIXByZUZpbHRlcnNbIHR5cGUgXSB8fFxuXHRcdFx0XHQobWF0Y2ggPSBwcmVGaWx0ZXJzWyB0eXBlIF0oIG1hdGNoICkpKSApIHtcblx0XHRcdFx0bWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG5cdFx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRcdG1hdGNoZXM6IG1hdGNoXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggIW1hdGNoZWQgKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgaW52YWxpZCBleGNlc3Ncblx0Ly8gaWYgd2UncmUganVzdCBwYXJzaW5nXG5cdC8vIE90aGVyd2lzZSwgdGhyb3cgYW4gZXJyb3Igb3IgcmV0dXJuIHRva2Vuc1xuXHRyZXR1cm4gcGFyc2VPbmx5ID9cblx0XHRzb0Zhci5sZW5ndGggOlxuXHRcdHNvRmFyID9cblx0XHRcdFNpenpsZS5lcnJvciggc2VsZWN0b3IgKSA6XG5cdFx0XHQvLyBDYWNoZSB0aGUgdG9rZW5zXG5cdFx0XHR0b2tlbkNhY2hlKCBzZWxlY3RvciwgZ3JvdXBzICkuc2xpY2UoIDAgKTtcbn07XG5cbmZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0c2VsZWN0b3IgPSBcIlwiO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRzZWxlY3RvciArPSB0b2tlbnNbaV0udmFsdWU7XG5cdH1cblx0cmV0dXJuIHNlbGVjdG9yO1xufVxuXG5mdW5jdGlvbiBhZGRDb21iaW5hdG9yKCBtYXRjaGVyLCBjb21iaW5hdG9yLCBiYXNlICkge1xuXHR2YXIgZGlyID0gY29tYmluYXRvci5kaXIsXG5cdFx0Y2hlY2tOb25FbGVtZW50cyA9IGJhc2UgJiYgZGlyID09PSBcInBhcmVudE5vZGVcIixcblx0XHRkb25lTmFtZSA9IGRvbmUrKztcblxuXHRyZXR1cm4gY29tYmluYXRvci5maXJzdCA/XG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBjbG9zZXN0IGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdHJldHVybiBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gOlxuXG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBhbGwgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRzXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBvbGRDYWNoZSwgb3V0ZXJDYWNoZSxcblx0XHRcdFx0bmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07XG5cblx0XHRcdC8vIFdlIGNhbid0IHNldCBhcmJpdHJhcnkgZGF0YSBvbiBYTUwgbm9kZXMsIHNvIHRoZXkgZG9uJ3QgYmVuZWZpdCBmcm9tIGRpciBjYWNoaW5nXG5cdFx0XHRpZiAoIHhtbCApIHtcblx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHtcblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgY2hlY2tOb25FbGVtZW50cyApIHtcblx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBlbGVtWyBleHBhbmRvIF0gfHwgKGVsZW1bIGV4cGFuZG8gXSA9IHt9KTtcblx0XHRcdFx0XHRcdGlmICggKG9sZENhY2hlID0gb3V0ZXJDYWNoZVsgZGlyIF0pICYmXG5cdFx0XHRcdFx0XHRcdG9sZENhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgb2xkQ2FjaGVbIDEgXSA9PT0gZG9uZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQXNzaWduIHRvIG5ld0NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0cmV0dXJuIChuZXdDYWNoZVsgMiBdID0gb2xkQ2FjaGVbIDIgXSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXVzZSBuZXdjYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGVbIGRpciBdID0gbmV3Q2FjaGU7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQSBtYXRjaCBtZWFucyB3ZSdyZSBkb25lOyBhIGZhaWwgbWVhbnMgd2UgaGF2ZSB0byBrZWVwIGNoZWNraW5nXG5cdFx0XHRcdFx0XHRcdGlmICggKG5ld0NhY2hlWyAyIF0gPSBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xufVxuXG5mdW5jdGlvbiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSB7XG5cdHJldHVybiBtYXRjaGVycy5sZW5ndGggPiAxID9cblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIGkgPSBtYXRjaGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCAhbWF0Y2hlcnNbaV0oIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSA6XG5cdFx0bWF0Y2hlcnNbMF07XG59XG5cbmZ1bmN0aW9uIG11bHRpcGxlQ29udGV4dHMoIHNlbGVjdG9yLCBjb250ZXh0cywgcmVzdWx0cyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IGNvbnRleHRzLmxlbmd0aDtcblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0U2l6emxlKCBzZWxlY3RvciwgY29udGV4dHNbaV0sIHJlc3VsdHMgKTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0cztcbn1cblxuZnVuY3Rpb24gY29uZGVuc2UoIHVubWF0Y2hlZCwgbWFwLCBmaWx0ZXIsIGNvbnRleHQsIHhtbCApIHtcblx0dmFyIGVsZW0sXG5cdFx0bmV3VW5tYXRjaGVkID0gW10sXG5cdFx0aSA9IDAsXG5cdFx0bGVuID0gdW5tYXRjaGVkLmxlbmd0aCxcblx0XHRtYXBwZWQgPSBtYXAgIT0gbnVsbDtcblxuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcblx0XHRcdGlmICggIWZpbHRlciB8fCBmaWx0ZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRuZXdVbm1hdGNoZWQucHVzaCggZWxlbSApO1xuXHRcdFx0XHRpZiAoIG1hcHBlZCApIHtcblx0XHRcdFx0XHRtYXAucHVzaCggaSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG5ld1VubWF0Y2hlZDtcbn1cblxuZnVuY3Rpb24gc2V0TWF0Y2hlciggcHJlRmlsdGVyLCBzZWxlY3RvciwgbWF0Y2hlciwgcG9zdEZpbHRlciwgcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICkge1xuXHRpZiAoIHBvc3RGaWx0ZXIgJiYgIXBvc3RGaWx0ZXJbIGV4cGFuZG8gXSApIHtcblx0XHRwb3N0RmlsdGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbHRlciApO1xuXHR9XG5cdGlmICggcG9zdEZpbmRlciAmJiAhcG9zdEZpbmRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaW5kZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKTtcblx0fVxuXHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCByZXN1bHRzLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0dmFyIHRlbXAsIGksIGVsZW0sXG5cdFx0XHRwcmVNYXAgPSBbXSxcblx0XHRcdHBvc3RNYXAgPSBbXSxcblx0XHRcdHByZWV4aXN0aW5nID0gcmVzdWx0cy5sZW5ndGgsXG5cblx0XHRcdC8vIEdldCBpbml0aWFsIGVsZW1lbnRzIGZyb20gc2VlZCBvciBjb250ZXh0XG5cdFx0XHRlbGVtcyA9IHNlZWQgfHwgbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IgfHwgXCIqXCIsIGNvbnRleHQubm9kZVR5cGUgPyBbIGNvbnRleHQgXSA6IGNvbnRleHQsIFtdICksXG5cblx0XHRcdC8vIFByZWZpbHRlciB0byBnZXQgbWF0Y2hlciBpbnB1dCwgcHJlc2VydmluZyBhIG1hcCBmb3Igc2VlZC1yZXN1bHRzIHN5bmNocm9uaXphdGlvblxuXHRcdFx0bWF0Y2hlckluID0gcHJlRmlsdGVyICYmICggc2VlZCB8fCAhc2VsZWN0b3IgKSA/XG5cdFx0XHRcdGNvbmRlbnNlKCBlbGVtcywgcHJlTWFwLCBwcmVGaWx0ZXIsIGNvbnRleHQsIHhtbCApIDpcblx0XHRcdFx0ZWxlbXMsXG5cblx0XHRcdG1hdGNoZXJPdXQgPSBtYXRjaGVyID9cblx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBhIHBvc3RGaW5kZXIsIG9yIGZpbHRlcmVkIHNlZWQsIG9yIG5vbi1zZWVkIHBvc3RGaWx0ZXIgb3IgcHJlZXhpc3RpbmcgcmVzdWx0cyxcblx0XHRcdFx0cG9zdEZpbmRlciB8fCAoIHNlZWQgPyBwcmVGaWx0ZXIgOiBwcmVleGlzdGluZyB8fCBwb3N0RmlsdGVyICkgP1xuXG5cdFx0XHRcdFx0Ly8gLi4uaW50ZXJtZWRpYXRlIHByb2Nlc3NpbmcgaXMgbmVjZXNzYXJ5XG5cdFx0XHRcdFx0W10gOlxuXG5cdFx0XHRcdFx0Ly8gLi4ub3RoZXJ3aXNlIHVzZSByZXN1bHRzIGRpcmVjdGx5XG5cdFx0XHRcdFx0cmVzdWx0cyA6XG5cdFx0XHRcdG1hdGNoZXJJbjtcblxuXHRcdC8vIEZpbmQgcHJpbWFyeSBtYXRjaGVzXG5cdFx0aWYgKCBtYXRjaGVyICkge1xuXHRcdFx0bWF0Y2hlciggbWF0Y2hlckluLCBtYXRjaGVyT3V0LCBjb250ZXh0LCB4bWwgKTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSBwb3N0RmlsdGVyXG5cdFx0aWYgKCBwb3N0RmlsdGVyICkge1xuXHRcdFx0dGVtcCA9IGNvbmRlbnNlKCBtYXRjaGVyT3V0LCBwb3N0TWFwICk7XG5cdFx0XHRwb3N0RmlsdGVyKCB0ZW1wLCBbXSwgY29udGV4dCwgeG1sICk7XG5cblx0XHRcdC8vIFVuLW1hdGNoIGZhaWxpbmcgZWxlbWVudHMgYnkgbW92aW5nIHRoZW0gYmFjayB0byBtYXRjaGVySW5cblx0XHRcdGkgPSB0ZW1wLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoIChlbGVtID0gdGVtcFtpXSkgKSB7XG5cdFx0XHRcdFx0bWF0Y2hlck91dFsgcG9zdE1hcFtpXSBdID0gIShtYXRjaGVySW5bIHBvc3RNYXBbaV0gXSA9IGVsZW0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyIHx8IHByZUZpbHRlciApIHtcblx0XHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRcdC8vIEdldCB0aGUgZmluYWwgbWF0Y2hlck91dCBieSBjb25kZW5zaW5nIHRoaXMgaW50ZXJtZWRpYXRlIGludG8gcG9zdEZpbmRlciBjb250ZXh0c1xuXHRcdFx0XHRcdHRlbXAgPSBbXTtcblx0XHRcdFx0XHRpID0gbWF0Y2hlck91dC5sZW5ndGg7XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgbWF0Y2hlckluIHNpbmNlIGVsZW0gaXMgbm90IHlldCBhIGZpbmFsIG1hdGNoXG5cdFx0XHRcdFx0XHRcdHRlbXAucHVzaCggKG1hdGNoZXJJbltpXSA9IGVsZW0pICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBvc3RGaW5kZXIoIG51bGwsIChtYXRjaGVyT3V0ID0gW10pLCB0ZW1wLCB4bWwgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIE1vdmUgbWF0Y2hlZCBlbGVtZW50cyBmcm9tIHNlZWQgdG8gcmVzdWx0cyB0byBrZWVwIHRoZW0gc3luY2hyb25pemVkXG5cdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0aWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICYmXG5cdFx0XHRcdFx0XHQodGVtcCA9IHBvc3RGaW5kZXIgPyBpbmRleE9mKCBzZWVkLCBlbGVtICkgOiBwcmVNYXBbaV0pID4gLTEgKSB7XG5cblx0XHRcdFx0XHRcdHNlZWRbdGVtcF0gPSAhKHJlc3VsdHNbdGVtcF0gPSBlbGVtKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEFkZCBlbGVtZW50cyB0byByZXN1bHRzLCB0aHJvdWdoIHBvc3RGaW5kZXIgaWYgZGVmaW5lZFxuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyT3V0ID0gY29uZGVuc2UoXG5cdFx0XHRcdG1hdGNoZXJPdXQgPT09IHJlc3VsdHMgP1xuXHRcdFx0XHRcdG1hdGNoZXJPdXQuc3BsaWNlKCBwcmVleGlzdGluZywgbWF0Y2hlck91dC5sZW5ndGggKSA6XG5cdFx0XHRcdFx0bWF0Y2hlck91dFxuXHRcdFx0KTtcblx0XHRcdGlmICggcG9zdEZpbmRlciApIHtcblx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgcmVzdWx0cywgbWF0Y2hlck91dCwgeG1sICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBtYXRjaGVyT3V0ICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Ub2tlbnMoIHRva2VucyApIHtcblx0dmFyIGNoZWNrQ29udGV4dCwgbWF0Y2hlciwgaixcblx0XHRsZW4gPSB0b2tlbnMubGVuZ3RoLFxuXHRcdGxlYWRpbmdSZWxhdGl2ZSA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1swXS50eXBlIF0sXG5cdFx0aW1wbGljaXRSZWxhdGl2ZSA9IGxlYWRpbmdSZWxhdGl2ZSB8fCBFeHByLnJlbGF0aXZlW1wiIFwiXSxcblx0XHRpID0gbGVhZGluZ1JlbGF0aXZlID8gMSA6IDAsXG5cblx0XHQvLyBUaGUgZm91bmRhdGlvbmFsIG1hdGNoZXIgZW5zdXJlcyB0aGF0IGVsZW1lbnRzIGFyZSByZWFjaGFibGUgZnJvbSB0b3AtbGV2ZWwgY29udGV4dChzKVxuXHRcdG1hdGNoQ29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGNoZWNrQ29udGV4dDtcblx0XHR9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksXG5cdFx0bWF0Y2hBbnlDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXhPZiggY2hlY2tDb250ZXh0LCBlbGVtICkgPiAtMTtcblx0XHR9LCBpbXBsaWNpdFJlbGF0aXZlLCB0cnVlICksXG5cdFx0bWF0Y2hlcnMgPSBbIGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgcmV0ID0gKCAhbGVhZGluZ1JlbGF0aXZlICYmICggeG1sIHx8IGNvbnRleHQgIT09IG91dGVybW9zdENvbnRleHQgKSApIHx8IChcblx0XHRcdFx0KGNoZWNrQ29udGV4dCA9IGNvbnRleHQpLm5vZGVUeXBlID9cblx0XHRcdFx0XHRtYXRjaENvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApIDpcblx0XHRcdFx0XHRtYXRjaEFueUNvbnRleHQoIGVsZW0sIGNvbnRleHQsIHhtbCApICk7XG5cdFx0XHQvLyBBdm9pZCBoYW5naW5nIG9udG8gZWxlbWVudCAoaXNzdWUgIzI5OSlcblx0XHRcdGNoZWNrQ29udGV4dCA9IG51bGw7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH0gXTtcblxuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRpZiAoIChtYXRjaGVyID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2ldLnR5cGUgXSkgKSB7XG5cdFx0XHRtYXRjaGVycyA9IFsgYWRkQ29tYmluYXRvcihlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSwgbWF0Y2hlcikgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWF0Y2hlciA9IEV4cHIuZmlsdGVyWyB0b2tlbnNbaV0udHlwZSBdLmFwcGx5KCBudWxsLCB0b2tlbnNbaV0ubWF0Y2hlcyApO1xuXG5cdFx0XHQvLyBSZXR1cm4gc3BlY2lhbCB1cG9uIHNlZWluZyBhIHBvc2l0aW9uYWwgbWF0Y2hlclxuXHRcdFx0aWYgKCBtYXRjaGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdC8vIEZpbmQgdGhlIG5leHQgcmVsYXRpdmUgb3BlcmF0b3IgKGlmIGFueSkgZm9yIHByb3BlciBoYW5kbGluZ1xuXHRcdFx0XHRqID0gKytpO1xuXHRcdFx0XHRmb3IgKCA7IGogPCBsZW47IGorKyApIHtcblx0XHRcdFx0XHRpZiAoIEV4cHIucmVsYXRpdmVbIHRva2Vuc1tqXS50eXBlIF0gKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHNldE1hdGNoZXIoXG5cdFx0XHRcdFx0aSA+IDEgJiYgZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksXG5cdFx0XHRcdFx0aSA+IDEgJiYgdG9TZWxlY3Rvcihcblx0XHRcdFx0XHRcdC8vIElmIHRoZSBwcmVjZWRpbmcgdG9rZW4gd2FzIGEgZGVzY2VuZGFudCBjb21iaW5hdG9yLCBpbnNlcnQgYW4gaW1wbGljaXQgYW55LWVsZW1lbnQgYCpgXG5cdFx0XHRcdFx0XHR0b2tlbnMuc2xpY2UoIDAsIGkgLSAxICkuY29uY2F0KHsgdmFsdWU6IHRva2Vuc1sgaSAtIDIgXS50eXBlID09PSBcIiBcIiA/IFwiKlwiIDogXCJcIiB9KVxuXHRcdFx0XHRcdCkucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApLFxuXHRcdFx0XHRcdG1hdGNoZXIsXG5cdFx0XHRcdFx0aSA8IGogJiYgbWF0Y2hlckZyb21Ub2tlbnMoIHRva2Vucy5zbGljZSggaSwgaiApICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiBtYXRjaGVyRnJvbVRva2VucyggKHRva2VucyA9IHRva2Vucy5zbGljZSggaiApKSApLFxuXHRcdFx0XHRcdGogPCBsZW4gJiYgdG9TZWxlY3RvciggdG9rZW5zIClcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHRcdG1hdGNoZXJzLnB1c2goIG1hdGNoZXIgKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXJGcm9tR3JvdXBNYXRjaGVycyggZWxlbWVudE1hdGNoZXJzLCBzZXRNYXRjaGVycyApIHtcblx0dmFyIGJ5U2V0ID0gc2V0TWF0Y2hlcnMubGVuZ3RoID4gMCxcblx0XHRieUVsZW1lbnQgPSBlbGVtZW50TWF0Y2hlcnMubGVuZ3RoID4gMCxcblx0XHRzdXBlck1hdGNoZXIgPSBmdW5jdGlvbiggc2VlZCwgY29udGV4dCwgeG1sLCByZXN1bHRzLCBvdXRlcm1vc3QgKSB7XG5cdFx0XHR2YXIgZWxlbSwgaiwgbWF0Y2hlcixcblx0XHRcdFx0bWF0Y2hlZENvdW50ID0gMCxcblx0XHRcdFx0aSA9IFwiMFwiLFxuXHRcdFx0XHR1bm1hdGNoZWQgPSBzZWVkICYmIFtdLFxuXHRcdFx0XHRzZXRNYXRjaGVkID0gW10sXG5cdFx0XHRcdGNvbnRleHRCYWNrdXAgPSBvdXRlcm1vc3RDb250ZXh0LFxuXHRcdFx0XHQvLyBXZSBtdXN0IGFsd2F5cyBoYXZlIGVpdGhlciBzZWVkIGVsZW1lbnRzIG9yIG91dGVybW9zdCBjb250ZXh0XG5cdFx0XHRcdGVsZW1zID0gc2VlZCB8fCBieUVsZW1lbnQgJiYgRXhwci5maW5kW1wiVEFHXCJdKCBcIipcIiwgb3V0ZXJtb3N0ICksXG5cdFx0XHRcdC8vIFVzZSBpbnRlZ2VyIGRpcnJ1bnMgaWZmIHRoaXMgaXMgdGhlIG91dGVybW9zdCBtYXRjaGVyXG5cdFx0XHRcdGRpcnJ1bnNVbmlxdWUgPSAoZGlycnVucyArPSBjb250ZXh0QmFja3VwID09IG51bGwgPyAxIDogTWF0aC5yYW5kb20oKSB8fCAwLjEpLFxuXHRcdFx0XHRsZW4gPSBlbGVtcy5sZW5ndGg7XG5cblx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dCAhPT0gZG9jdW1lbnQgJiYgY29udGV4dDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGVsZW1lbnRzIHBhc3NpbmcgZWxlbWVudE1hdGNoZXJzIGRpcmVjdGx5IHRvIHJlc3VsdHNcblx0XHRcdC8vIEtlZXAgYGlgIGEgc3RyaW5nIGlmIHRoZXJlIGFyZSBubyBlbGVtZW50cyBzbyBgbWF0Y2hlZENvdW50YCB3aWxsIGJlIFwiMDBcIiBiZWxvd1xuXHRcdFx0Ly8gU3VwcG9ydDogSUU8OSwgU2FmYXJpXG5cdFx0XHQvLyBUb2xlcmF0ZSBOb2RlTGlzdCBwcm9wZXJ0aWVzIChJRTogXCJsZW5ndGhcIjsgU2FmYXJpOiA8bnVtYmVyPikgbWF0Y2hpbmcgZWxlbWVudHMgYnkgaWRcblx0XHRcdGZvciAoIDsgaSAhPT0gbGVuICYmIChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFRyYWNrIHVubWF0Y2hlZCBlbGVtZW50cyBmb3Igc2V0IGZpbHRlcnNcblx0XHRcdFx0aWYgKCBieVNldCApIHtcblx0XHRcdFx0XHQvLyBUaGV5IHdpbGwgaGF2ZSBnb25lIHRocm91Z2ggYWxsIHBvc3NpYmxlIG1hdGNoZXJzXG5cdFx0XHRcdFx0aWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkge1xuXHRcdFx0XHRcdFx0bWF0Y2hlZENvdW50LS07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTGVuZ3RoZW4gdGhlIGFycmF5IGZvciBldmVyeSBlbGVtZW50LCBtYXRjaGVkIG9yIG5vdFxuXHRcdFx0XHRcdGlmICggc2VlZCApIHtcblx0XHRcdFx0XHRcdHVubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFwcGx5IHNldCBmaWx0ZXJzIHRvIHVubWF0Y2hlZCBlbGVtZW50c1xuXHRcdFx0bWF0Y2hlZENvdW50ICs9IGk7XG5cdFx0XHRpZiAoIGJ5U2V0ICYmIGkgIT09IG1hdGNoZWRDb3VudCApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBzZXRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyKCB1bm1hdGNoZWQsIHNldE1hdGNoZWQsIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdC8vIFJlaW50ZWdyYXRlIGVsZW1lbnQgbWF0Y2hlcyB0byBlbGltaW5hdGUgdGhlIG5lZWQgZm9yIHNvcnRpbmdcblx0XHRcdFx0XHRpZiAoIG1hdGNoZWRDb3VudCA+IDAgKSB7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCAhKHVubWF0Y2hlZFtpXSB8fCBzZXRNYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0XHRzZXRNYXRjaGVkW2ldID0gcG9wLmNhbGwoIHJlc3VsdHMgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIERpc2NhcmQgaW5kZXggcGxhY2Vob2xkZXIgdmFsdWVzIHRvIGdldCBvbmx5IGFjdHVhbCBtYXRjaGVzXG5cdFx0XHRcdFx0c2V0TWF0Y2hlZCA9IGNvbmRlbnNlKCBzZXRNYXRjaGVkICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBZGQgbWF0Y2hlcyB0byByZXN1bHRzXG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNldE1hdGNoZWQgKTtcblxuXHRcdFx0XHQvLyBTZWVkbGVzcyBzZXQgbWF0Y2hlcyBzdWNjZWVkaW5nIG11bHRpcGxlIHN1Y2Nlc3NmdWwgbWF0Y2hlcnMgc3RpcHVsYXRlIHNvcnRpbmdcblx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmXG5cdFx0XHRcdFx0KCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7XG5cblx0XHRcdFx0XHRTaXp6bGUudW5pcXVlU29ydCggcmVzdWx0cyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE92ZXJyaWRlIG1hbmlwdWxhdGlvbiBvZiBnbG9iYWxzIGJ5IG5lc3RlZCBtYXRjaGVyc1xuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHVubWF0Y2hlZDtcblx0XHR9O1xuXG5cdHJldHVybiBieVNldCA/XG5cdFx0bWFya0Z1bmN0aW9uKCBzdXBlck1hdGNoZXIgKSA6XG5cdFx0c3VwZXJNYXRjaGVyO1xufVxuXG5jb21waWxlID0gU2l6emxlLmNvbXBpbGUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIG1hdGNoIC8qIEludGVybmFsIFVzZSBPbmx5ICovICkge1xuXHR2YXIgaSxcblx0XHRzZXRNYXRjaGVycyA9IFtdLFxuXHRcdGVsZW1lbnRNYXRjaGVycyA9IFtdLFxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoICFjYWNoZWQgKSB7XG5cdFx0Ly8gR2VuZXJhdGUgYSBmdW5jdGlvbiBvZiByZWN1cnNpdmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2hlY2sgZWFjaCBlbGVtZW50XG5cdFx0aWYgKCAhbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaCA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXHRcdH1cblx0XHRpID0gbWF0Y2gubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0Y2FjaGVkID0gbWF0Y2hlckZyb21Ub2tlbnMoIG1hdGNoW2ldICk7XG5cdFx0XHRpZiAoIGNhY2hlZFsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRzZXRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWNoZSB0aGUgY29tcGlsZWQgZnVuY3Rpb25cblx0XHRjYWNoZWQgPSBjb21waWxlckNhY2hlKCBzZWxlY3RvciwgbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkgKTtcblxuXHRcdC8vIFNhdmUgc2VsZWN0b3IgYW5kIHRva2VuaXphdGlvblxuXHRcdGNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHR9XG5cdHJldHVybiBjYWNoZWQ7XG59O1xuXG4vKipcbiAqIEEgbG93LWxldmVsIHNlbGVjdGlvbiBmdW5jdGlvbiB0aGF0IHdvcmtzIHdpdGggU2l6emxlJ3MgY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBzZWxlY3RvciBBIHNlbGVjdG9yIG9yIGEgcHJlLWNvbXBpbGVkXG4gKiAgc2VsZWN0b3IgZnVuY3Rpb24gYnVpbHQgd2l0aCBTaXp6bGUuY29tcGlsZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0XG4gKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0c11cbiAqIEBwYXJhbSB7QXJyYXl9IFtzZWVkXSBBIHNldCBvZiBlbGVtZW50cyB0byBtYXRjaCBhZ2FpbnN0XG4gKi9cbnNlbGVjdCA9IFNpenpsZS5zZWxlY3QgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdHZhciBpLCB0b2tlbnMsIHRva2VuLCB0eXBlLCBmaW5kLFxuXHRcdGNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgJiYgc2VsZWN0b3IsXG5cdFx0bWF0Y2ggPSAhc2VlZCAmJiB0b2tlbml6ZSggKHNlbGVjdG9yID0gY29tcGlsZWQuc2VsZWN0b3IgfHwgc2VsZWN0b3IpICk7XG5cblx0cmVzdWx0cyA9IHJlc3VsdHMgfHwgW107XG5cblx0Ly8gVHJ5IHRvIG1pbmltaXplIG9wZXJhdGlvbnMgaWYgdGhlcmUgaXMgbm8gc2VlZCBhbmQgb25seSBvbmUgZ3JvdXBcblx0aWYgKCBtYXRjaC5sZW5ndGggPT09IDEgKSB7XG5cblx0XHQvLyBUYWtlIGEgc2hvcnRjdXQgYW5kIHNldCB0aGUgY29udGV4dCBpZiB0aGUgcm9vdCBzZWxlY3RvciBpcyBhbiBJRFxuXHRcdHRva2VucyA9IG1hdGNoWzBdID0gbWF0Y2hbMF0uc2xpY2UoIDAgKTtcblx0XHRpZiAoIHRva2Vucy5sZW5ndGggPiAyICYmICh0b2tlbiA9IHRva2Vuc1swXSkudHlwZSA9PT0gXCJJRFwiICYmXG5cdFx0XHRcdHN1cHBvcnQuZ2V0QnlJZCAmJiBjb250ZXh0Lm5vZGVUeXBlID09PSA5ICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0XHRcdEV4cHIucmVsYXRpdmVbIHRva2Vuc1sxXS50eXBlIF0gKSB7XG5cblx0XHRcdGNvbnRleHQgPSAoIEV4cHIuZmluZFtcIklEXCJdKCB0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLCBmdW5lc2NhcGUpLCBjb250ZXh0ICkgfHwgW10gKVswXTtcblx0XHRcdGlmICggIWNvbnRleHQgKSB7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHQvLyBQcmVjb21waWxlZCBtYXRjaGVycyB3aWxsIHN0aWxsIHZlcmlmeSBhbmNlc3RyeSwgc28gc3RlcCB1cCBhIGxldmVsXG5cdFx0XHR9IGVsc2UgaWYgKCBjb21waWxlZCApIHtcblx0XHRcdFx0Y29udGV4dCA9IGNvbnRleHQucGFyZW50Tm9kZTtcblx0XHRcdH1cblxuXHRcdFx0c2VsZWN0b3IgPSBzZWxlY3Rvci5zbGljZSggdG9rZW5zLnNoaWZ0KCkudmFsdWUubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0Ly8gRmV0Y2ggYSBzZWVkIHNldCBmb3IgcmlnaHQtdG8tbGVmdCBtYXRjaGluZ1xuXHRcdGkgPSBtYXRjaEV4cHJbXCJuZWVkc0NvbnRleHRcIl0udGVzdCggc2VsZWN0b3IgKSA/IDAgOiB0b2tlbnMubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0dG9rZW4gPSB0b2tlbnNbaV07XG5cblx0XHRcdC8vIEFib3J0IGlmIHdlIGhpdCBhIGNvbWJpbmF0b3Jcblx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgKHR5cGUgPSB0b2tlbi50eXBlKSBdICkge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmICggKGZpbmQgPSBFeHByLmZpbmRbIHR5cGUgXSkgKSB7XG5cdFx0XHRcdC8vIFNlYXJjaCwgZXhwYW5kaW5nIGNvbnRleHQgZm9yIGxlYWRpbmcgc2libGluZyBjb21iaW5hdG9yc1xuXHRcdFx0XHRpZiAoIChzZWVkID0gZmluZChcblx0XHRcdFx0XHR0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICksXG5cdFx0XHRcdFx0cnNpYmxpbmcudGVzdCggdG9rZW5zWzBdLnR5cGUgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dFxuXHRcdFx0XHQpKSApIHtcblxuXHRcdFx0XHRcdC8vIElmIHNlZWQgaXMgZW1wdHkgb3Igbm8gdG9rZW5zIHJlbWFpbiwgd2UgY2FuIHJldHVybiBlYXJseVxuXHRcdFx0XHRcdHRva2Vucy5zcGxpY2UoIGksIDEgKTtcblx0XHRcdFx0XHRzZWxlY3RvciA9IHNlZWQubGVuZ3RoICYmIHRvU2VsZWN0b3IoIHRva2VucyApO1xuXHRcdFx0XHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2VlZCApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDb21waWxlIGFuZCBleGVjdXRlIGEgZmlsdGVyaW5nIGZ1bmN0aW9uIGlmIG9uZSBpcyBub3QgcHJvdmlkZWRcblx0Ly8gUHJvdmlkZSBgbWF0Y2hgIHRvIGF2b2lkIHJldG9rZW5pemF0aW9uIGlmIHdlIG1vZGlmaWVkIHRoZSBzZWxlY3RvciBhYm92ZVxuXHQoIGNvbXBpbGVkIHx8IGNvbXBpbGUoIHNlbGVjdG9yLCBtYXRjaCApICkoXG5cdFx0c2VlZCxcblx0XHRjb250ZXh0LFxuXHRcdCFkb2N1bWVudElzSFRNTCxcblx0XHRyZXN1bHRzLFxuXHRcdHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0KTtcblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vLyBPbmUtdGltZSBhc3NpZ25tZW50c1xuXG4vLyBTb3J0IHN0YWJpbGl0eVxuc3VwcG9ydC5zb3J0U3RhYmxlID0gZXhwYW5kby5zcGxpdChcIlwiKS5zb3J0KCBzb3J0T3JkZXIgKS5qb2luKFwiXCIpID09PSBleHBhbmRvO1xuXG4vLyBTdXBwb3J0OiBDaHJvbWUgMTQtMzUrXG4vLyBBbHdheXMgYXNzdW1lIGR1cGxpY2F0ZXMgaWYgdGhleSBhcmVuJ3QgcGFzc2VkIHRvIHRoZSBjb21wYXJpc29uIGZ1bmN0aW9uXG5zdXBwb3J0LmRldGVjdER1cGxpY2F0ZXMgPSAhIWhhc0R1cGxpY2F0ZTtcblxuLy8gSW5pdGlhbGl6ZSBhZ2FpbnN0IHRoZSBkZWZhdWx0IGRvY3VtZW50XG5zZXREb2N1bWVudCgpO1xuXG4vLyBTdXBwb3J0OiBXZWJraXQ8NTM3LjMyIC0gU2FmYXJpIDYuMC4zL0Nocm9tZSAyNSAoZml4ZWQgaW4gQ2hyb21lIDI3KVxuLy8gRGV0YWNoZWQgbm9kZXMgY29uZm91bmRpbmdseSBmb2xsb3cgKmVhY2ggb3RoZXIqXG5zdXBwb3J0LnNvcnREZXRhY2hlZCA9IGFzc2VydChmdW5jdGlvbiggZGl2MSApIHtcblx0Ly8gU2hvdWxkIHJldHVybiAxLCBidXQgcmV0dXJucyA0IChmb2xsb3dpbmcpXG5cdHJldHVybiBkaXYxLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpICkgJiAxO1xufSk7XG5cbi8vIFN1cHBvcnQ6IElFPDhcbi8vIFByZXZlbnQgYXR0cmlidXRlL3Byb3BlcnR5IFwiaW50ZXJwb2xhdGlvblwiXG4vLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4XG5pZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0ZGl2LmlubmVySFRNTCA9IFwiPGEgaHJlZj0nIyc+PC9hPlwiO1xuXHRyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIgO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInR5cGVcIiA/IDEgOiAyICk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGRlZmF1bHRWYWx1ZSBpbiBwbGFjZSBvZiBnZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKVxuaWYgKCAhc3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0ZGl2LmlubmVySFRNTCA9IFwiPGlucHV0Lz5cIjtcblx0ZGl2LmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCBcInZhbHVlXCIsIFwiXCIgKTtcblx0cmV0dXJuIGRpdi5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiICkgPT09IFwiXCI7XG59KSApIHtcblx0YWRkSGFuZGxlKCBcInZhbHVlXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRpZiAoICFpc1hNTCAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIiApIHtcblx0XHRcdHJldHVybiBlbGVtLmRlZmF1bHRWYWx1ZTtcblx0XHR9XG5cdH0pO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZ2V0QXR0cmlidXRlTm9kZSB0byBmZXRjaCBib29sZWFucyB3aGVuIGdldEF0dHJpYnV0ZSBsaWVzXG5pZiAoICFhc3NlcnQoZnVuY3Rpb24oIGRpdiApIHtcblx0cmV0dXJuIGRpdi5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSA9PSBudWxsO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgdmFsO1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdFx0KHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiB2YWwuc3BlY2lmaWVkID9cblx0XHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xuXHRcdH1cblx0fSk7XG59XG5cbnJldHVybiBTaXp6bGU7XG5cbn0pKCB3aW5kb3cgKTtcblxuXG5cbmpRdWVyeS5maW5kID0gU2l6emxlO1xualF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzO1xualF1ZXJ5LmV4cHJbXCI6XCJdID0galF1ZXJ5LmV4cHIucHNldWRvcztcbmpRdWVyeS51bmlxdWUgPSBTaXp6bGUudW5pcXVlU29ydDtcbmpRdWVyeS50ZXh0ID0gU2l6emxlLmdldFRleHQ7XG5qUXVlcnkuaXNYTUxEb2MgPSBTaXp6bGUuaXNYTUw7XG5qUXVlcnkuY29udGFpbnMgPSBTaXp6bGUuY29udGFpbnM7XG5cblxuXG52YXIgcm5lZWRzQ29udGV4dCA9IGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtcblxudmFyIHJzaW5nbGVUYWcgPSAoL148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvKTtcblxuXG5cbnZhciByaXNTaW1wbGUgPSAvXi5bXjojXFxbXFwuLF0qJC87XG5cbi8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90XG5mdW5jdGlvbiB3aW5ub3coIGVsZW1lbnRzLCBxdWFsaWZpZXIsIG5vdCApIHtcblx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcXVhbGlmaWVyICkgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHQvKiBqc2hpbnQgLVcwMTggKi9cblx0XHRcdHJldHVybiAhIXF1YWxpZmllci5jYWxsKCBlbGVtLCBpLCBlbGVtICkgIT09IG5vdDtcblx0XHR9KTtcblxuXHR9XG5cblx0aWYgKCBxdWFsaWZpZXIubm9kZVR5cGUgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gKCBlbGVtID09PSBxdWFsaWZpZXIgKSAhPT0gbm90O1xuXHRcdH0pO1xuXG5cdH1cblxuXHRpZiAoIHR5cGVvZiBxdWFsaWZpZXIgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0aWYgKCByaXNTaW1wbGUudGVzdCggcXVhbGlmaWVyICkgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cywgbm90ICk7XG5cdFx0fVxuXG5cdFx0cXVhbGlmaWVyID0galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cyApO1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeS5ncmVwKCBlbGVtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuICggaW5kZXhPZi5jYWxsKCBxdWFsaWZpZXIsIGVsZW0gKSA+PSAwICkgIT09IG5vdDtcblx0fSk7XG59XG5cbmpRdWVyeS5maWx0ZXIgPSBmdW5jdGlvbiggZXhwciwgZWxlbXMsIG5vdCApIHtcblx0dmFyIGVsZW0gPSBlbGVtc1sgMCBdO1xuXG5cdGlmICggbm90ICkge1xuXHRcdGV4cHIgPSBcIjpub3QoXCIgKyBleHByICsgXCIpXCI7XG5cdH1cblxuXHRyZXR1cm4gZWxlbXMubGVuZ3RoID09PSAxICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgP1xuXHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZWxlbSwgZXhwciApID8gWyBlbGVtIF0gOiBbXSA6XG5cdFx0alF1ZXJ5LmZpbmQubWF0Y2hlcyggZXhwciwgalF1ZXJ5LmdyZXAoIGVsZW1zLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxO1xuXHRcdH0pKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRmaW5kOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGksXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0c2VsZiA9IHRoaXM7XG5cblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggalF1ZXJ5KCBzZWxlY3RvciApLmZpbHRlcihmdW5jdGlvbigpIHtcblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0XHRpZiAoIGpRdWVyeS5jb250YWlucyggc2VsZlsgaSBdLCB0aGlzICkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pICk7XG5cdFx0fVxuXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGpRdWVyeS5maW5kKCBzZWxlY3Rvciwgc2VsZlsgaSBdLCByZXQgKTtcblx0XHR9XG5cblx0XHQvLyBOZWVkZWQgYmVjYXVzZSAkKCBzZWxlY3RvciwgY29udGV4dCApIGJlY29tZXMgJCggY29udGV4dCApLmZpbmQoIHNlbGVjdG9yIClcblx0XHRyZXQgPSB0aGlzLnB1c2hTdGFjayggbGVuID4gMSA/IGpRdWVyeS51bmlxdWUoIHJldCApIDogcmV0ICk7XG5cdFx0cmV0LnNlbGVjdG9yID0gdGhpcy5zZWxlY3RvciA/IHRoaXMuc2VsZWN0b3IgKyBcIiBcIiArIHNlbGVjdG9yIDogc2VsZWN0b3I7XG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblx0ZmlsdGVyOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3codGhpcywgc2VsZWN0b3IgfHwgW10sIGZhbHNlKSApO1xuXHR9LFxuXHRub3Q6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyh0aGlzLCBzZWxlY3RvciB8fCBbXSwgdHJ1ZSkgKTtcblx0fSxcblx0aXM6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gISF3aW5ub3coXG5cdFx0XHR0aGlzLFxuXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgcG9zaXRpb25hbC9yZWxhdGl2ZSBzZWxlY3RvciwgY2hlY2sgbWVtYmVyc2hpcCBpbiB0aGUgcmV0dXJuZWQgc2V0XG5cdFx0XHQvLyBzbyAkKFwicDpmaXJzdFwiKS5pcyhcInA6bGFzdFwiKSB3b24ndCByZXR1cm4gdHJ1ZSBmb3IgYSBkb2Mgd2l0aCB0d28gXCJwXCIuXG5cdFx0XHR0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgJiYgcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApID9cblx0XHRcdFx0alF1ZXJ5KCBzZWxlY3RvciApIDpcblx0XHRcdFx0c2VsZWN0b3IgfHwgW10sXG5cdFx0XHRmYWxzZVxuXHRcdCkubGVuZ3RoO1xuXHR9XG59KTtcblxuXG4vLyBJbml0aWFsaXplIGEgalF1ZXJ5IG9iamVjdFxuXG5cbi8vIEEgY2VudHJhbCByZWZlcmVuY2UgdG8gdGhlIHJvb3QgalF1ZXJ5KGRvY3VtZW50KVxudmFyIHJvb3RqUXVlcnksXG5cblx0Ly8gQSBzaW1wbGUgd2F5IHRvIGNoZWNrIGZvciBIVE1MIHN0cmluZ3Ncblx0Ly8gUHJpb3JpdGl6ZSAjaWQgb3ZlciA8dGFnPiB0byBhdm9pZCBYU1MgdmlhIGxvY2F0aW9uLmhhc2ggKCM5NTIxKVxuXHQvLyBTdHJpY3QgSFRNTCByZWNvZ25pdGlvbiAoIzExMjkwOiBtdXN0IHN0YXJ0IHdpdGggPClcblx0cnF1aWNrRXhwciA9IC9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSopKSQvLFxuXG5cdGluaXQgPSBqUXVlcnkuZm4uaW5pdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHR2YXIgbWF0Y2gsIGVsZW07XG5cblx0XHQvLyBIQU5ETEU6ICQoXCJcIiksICQobnVsbCksICQodW5kZWZpbmVkKSwgJChmYWxzZSlcblx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBIVE1MIHN0cmluZ3Ncblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGlmICggc2VsZWN0b3JbMF0gPT09IFwiPFwiICYmIHNlbGVjdG9yWyBzZWxlY3Rvci5sZW5ndGggLSAxIF0gPT09IFwiPlwiICYmIHNlbGVjdG9yLmxlbmd0aCA+PSAzICkge1xuXHRcdFx0XHQvLyBBc3N1bWUgdGhhdCBzdHJpbmdzIHRoYXQgc3RhcnQgYW5kIGVuZCB3aXRoIDw+IGFyZSBIVE1MIGFuZCBza2lwIHRoZSByZWdleCBjaGVja1xuXHRcdFx0XHRtYXRjaCA9IFsgbnVsbCwgc2VsZWN0b3IsIG51bGwgXTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1hdGNoIGh0bWwgb3IgbWFrZSBzdXJlIG5vIGNvbnRleHQgaXMgc3BlY2lmaWVkIGZvciAjaWRcblx0XHRcdGlmICggbWF0Y2ggJiYgKG1hdGNoWzFdIHx8ICFjb250ZXh0KSApIHtcblxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCkgLT4gJChhcnJheSlcblx0XHRcdFx0aWYgKCBtYXRjaFsxXSApIHtcblx0XHRcdFx0XHRjb250ZXh0ID0gY29udGV4dCBpbnN0YW5jZW9mIGpRdWVyeSA/IGNvbnRleHRbMF0gOiBjb250ZXh0O1xuXG5cdFx0XHRcdFx0Ly8gT3B0aW9uIHRvIHJ1biBzY3JpcHRzIGlzIHRydWUgZm9yIGJhY2stY29tcGF0XG5cdFx0XHRcdFx0Ly8gSW50ZW50aW9uYWxseSBsZXQgdGhlIGVycm9yIGJlIHRocm93biBpZiBwYXJzZUhUTUwgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMsIGpRdWVyeS5wYXJzZUhUTUwoXG5cdFx0XHRcdFx0XHRtYXRjaFsxXSxcblx0XHRcdFx0XHRcdGNvbnRleHQgJiYgY29udGV4dC5ub2RlVHlwZSA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogZG9jdW1lbnQsXG5cdFx0XHRcdFx0XHR0cnVlXG5cdFx0XHRcdFx0KSApO1xuXG5cdFx0XHRcdFx0Ly8gSEFORExFOiAkKGh0bWwsIHByb3BzKVxuXHRcdFx0XHRcdGlmICggcnNpbmdsZVRhZy50ZXN0KCBtYXRjaFsxXSApICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb250ZXh0ICkgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCBtYXRjaCBpbiBjb250ZXh0ICkge1xuXHRcdFx0XHRcdFx0XHQvLyBQcm9wZXJ0aWVzIG9mIGNvbnRleHQgYXJlIGNhbGxlZCBhcyBtZXRob2RzIGlmIHBvc3NpYmxlXG5cdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHRoaXNbIG1hdGNoIF0gKSApIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzWyBtYXRjaCBdKCBjb250ZXh0WyBtYXRjaCBdICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gLi4uYW5kIG90aGVyd2lzZSBzZXQgYXMgYXR0cmlidXRlc1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuYXR0ciggbWF0Y2gsIGNvbnRleHRbIG1hdGNoIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJCgjaWQpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCBtYXRjaFsyXSApO1xuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogQmxhY2tiZXJyeSA0LjZcblx0XHRcdFx0XHQvLyBnRUJJRCByZXR1cm5zIG5vZGVzIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgKCM2OTYzKVxuXHRcdFx0XHRcdGlmICggZWxlbSAmJiBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0XHQvLyBJbmplY3QgdGhlIGVsZW1lbnQgZGlyZWN0bHkgaW50byB0aGUgalF1ZXJ5IG9iamVjdFxuXHRcdFx0XHRcdFx0dGhpcy5sZW5ndGggPSAxO1xuXHRcdFx0XHRcdFx0dGhpc1swXSA9IGVsZW07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dGhpcy5jb250ZXh0ID0gZG9jdW1lbnQ7XG5cdFx0XHRcdFx0dGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cblx0XHRcdC8vIEhBTkRMRTogJChleHByLCAkKC4uLikpXG5cdFx0XHR9IGVsc2UgaWYgKCAhY29udGV4dCB8fCBjb250ZXh0LmpxdWVyeSApIHtcblx0XHRcdFx0cmV0dXJuICggY29udGV4dCB8fCByb290alF1ZXJ5ICkuZmluZCggc2VsZWN0b3IgKTtcblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsIGNvbnRleHQpXG5cdFx0XHQvLyAod2hpY2ggaXMganVzdCBlcXVpdmFsZW50IHRvOiAkKGNvbnRleHQpLmZpbmQoZXhwcilcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdC8vIEhBTkRMRTogJChET01FbGVtZW50KVxuXHRcdH0gZWxzZSBpZiAoIHNlbGVjdG9yLm5vZGVUeXBlICkge1xuXHRcdFx0dGhpcy5jb250ZXh0ID0gdGhpc1swXSA9IHNlbGVjdG9yO1xuXHRcdFx0dGhpcy5sZW5ndGggPSAxO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHQvLyBIQU5ETEU6ICQoZnVuY3Rpb24pXG5cdFx0Ly8gU2hvcnRjdXQgZm9yIGRvY3VtZW50IHJlYWR5XG5cdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHNlbGVjdG9yICkgKSB7XG5cdFx0XHRyZXR1cm4gdHlwZW9mIHJvb3RqUXVlcnkucmVhZHkgIT09IFwidW5kZWZpbmVkXCIgP1xuXHRcdFx0XHRyb290alF1ZXJ5LnJlYWR5KCBzZWxlY3RvciApIDpcblx0XHRcdFx0Ly8gRXhlY3V0ZSBpbW1lZGlhdGVseSBpZiByZWFkeSBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRzZWxlY3RvciggalF1ZXJ5ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBzZWxlY3Rvci5zZWxlY3RvciAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dGhpcy5zZWxlY3RvciA9IHNlbGVjdG9yLnNlbGVjdG9yO1xuXHRcdFx0dGhpcy5jb250ZXh0ID0gc2VsZWN0b3IuY29udGV4dDtcblx0XHR9XG5cblx0XHRyZXR1cm4galF1ZXJ5Lm1ha2VBcnJheSggc2VsZWN0b3IsIHRoaXMgKTtcblx0fTtcblxuLy8gR2l2ZSB0aGUgaW5pdCBmdW5jdGlvbiB0aGUgalF1ZXJ5IHByb3RvdHlwZSBmb3IgbGF0ZXIgaW5zdGFudGlhdGlvblxuaW5pdC5wcm90b3R5cGUgPSBqUXVlcnkuZm47XG5cbi8vIEluaXRpYWxpemUgY2VudHJhbCByZWZlcmVuY2VcbnJvb3RqUXVlcnkgPSBqUXVlcnkoIGRvY3VtZW50ICk7XG5cblxudmFyIHJwYXJlbnRzcHJldiA9IC9eKD86cGFyZW50c3xwcmV2KD86VW50aWx8QWxsKSkvLFxuXHQvLyBNZXRob2RzIGd1YXJhbnRlZWQgdG8gcHJvZHVjZSBhIHVuaXF1ZSBzZXQgd2hlbiBzdGFydGluZyBmcm9tIGEgdW5pcXVlIHNldFxuXHRndWFyYW50ZWVkVW5pcXVlID0ge1xuXHRcdGNoaWxkcmVuOiB0cnVlLFxuXHRcdGNvbnRlbnRzOiB0cnVlLFxuXHRcdG5leHQ6IHRydWUsXG5cdFx0cHJldjogdHJ1ZVxuXHR9O1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0ZGlyOiBmdW5jdGlvbiggZWxlbSwgZGlyLCB1bnRpbCApIHtcblx0XHR2YXIgbWF0Y2hlZCA9IFtdLFxuXHRcdFx0dHJ1bmNhdGUgPSB1bnRpbCAhPT0gdW5kZWZpbmVkO1xuXG5cdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSAmJiBlbGVtLm5vZGVUeXBlICE9PSA5ICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRpZiAoIHRydW5jYXRlICYmIGpRdWVyeSggZWxlbSApLmlzKCB1bnRpbCApICkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG1hdGNoZWQucHVzaCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gbWF0Y2hlZDtcblx0fSxcblxuXHRzaWJsaW5nOiBmdW5jdGlvbiggbiwgZWxlbSApIHtcblx0XHR2YXIgbWF0Y2hlZCA9IFtdO1xuXG5cdFx0Zm9yICggOyBuOyBuID0gbi5uZXh0U2libGluZyApIHtcblx0XHRcdGlmICggbi5ub2RlVHlwZSA9PT0gMSAmJiBuICE9PSBlbGVtICkge1xuXHRcdFx0XHRtYXRjaGVkLnB1c2goIG4gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbWF0Y2hlZDtcblx0fVxufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRoYXM6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XG5cdFx0dmFyIHRhcmdldHMgPSBqUXVlcnkoIHRhcmdldCwgdGhpcyApLFxuXHRcdFx0bCA9IHRhcmdldHMubGVuZ3RoO1xuXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGpRdWVyeS5jb250YWlucyggdGhpcywgdGFyZ2V0c1tpXSApICkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0Y2xvc2VzdDogZnVuY3Rpb24oIHNlbGVjdG9ycywgY29udGV4dCApIHtcblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRtYXRjaGVkID0gW10sXG5cdFx0XHRwb3MgPSBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9ycyApIHx8IHR5cGVvZiBzZWxlY3RvcnMgIT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRqUXVlcnkoIHNlbGVjdG9ycywgY29udGV4dCB8fCB0aGlzLmNvbnRleHQgKSA6XG5cdFx0XHRcdDA7XG5cblx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRmb3IgKCBjdXIgPSB0aGlzW2ldOyBjdXIgJiYgY3VyICE9PSBjb250ZXh0OyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0Ly8gQWx3YXlzIHNraXAgZG9jdW1lbnQgZnJhZ21lbnRzXG5cdFx0XHRcdGlmICggY3VyLm5vZGVUeXBlIDwgMTEgJiYgKHBvcyA/XG5cdFx0XHRcdFx0cG9zLmluZGV4KGN1cikgPiAtMSA6XG5cblx0XHRcdFx0XHQvLyBEb24ndCBwYXNzIG5vbi1lbGVtZW50cyB0byBTaXp6bGVcblx0XHRcdFx0XHRjdXIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvcihjdXIsIHNlbGVjdG9ycykpICkge1xuXG5cdFx0XHRcdFx0bWF0Y2hlZC5wdXNoKCBjdXIgKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZC5sZW5ndGggPiAxID8galF1ZXJ5LnVuaXF1ZSggbWF0Y2hlZCApIDogbWF0Y2hlZCApO1xuXHR9LFxuXG5cdC8vIERldGVybWluZSB0aGUgcG9zaXRpb24gb2YgYW4gZWxlbWVudCB3aXRoaW4gdGhlIHNldFxuXHRpbmRleDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHQvLyBObyBhcmd1bWVudCwgcmV0dXJuIGluZGV4IGluIHBhcmVudFxuXHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gKCB0aGlzWyAwIF0gJiYgdGhpc1sgMCBdLnBhcmVudE5vZGUgKSA/IHRoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoIDogLTE7XG5cdFx0fVxuXG5cdFx0Ly8gSW5kZXggaW4gc2VsZWN0b3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggalF1ZXJ5KCBlbGVtICksIHRoaXNbIDAgXSApO1xuXHRcdH1cblxuXHRcdC8vIExvY2F0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGRlc2lyZWQgZWxlbWVudFxuXHRcdHJldHVybiBpbmRleE9mLmNhbGwoIHRoaXMsXG5cblx0XHRcdC8vIElmIGl0IHJlY2VpdmVzIGEgalF1ZXJ5IG9iamVjdCwgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdXNlZFxuXHRcdFx0ZWxlbS5qcXVlcnkgPyBlbGVtWyAwIF0gOiBlbGVtXG5cdFx0KTtcblx0fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soXG5cdFx0XHRqUXVlcnkudW5pcXVlKFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMuZ2V0KCksIGpRdWVyeSggc2VsZWN0b3IsIGNvbnRleHQgKSApXG5cdFx0XHQpXG5cdFx0KTtcblx0fSxcblxuXHRhZGRCYWNrOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMuYWRkKCBzZWxlY3RvciA9PSBudWxsID9cblx0XHRcdHRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIoc2VsZWN0b3IpXG5cdFx0KTtcblx0fVxufSk7XG5cbmZ1bmN0aW9uIHNpYmxpbmcoIGN1ciwgZGlyICkge1xuXHR3aGlsZSAoIChjdXIgPSBjdXJbZGlyXSkgJiYgY3VyLm5vZGVUeXBlICE9PSAxICkge31cblx0cmV0dXJuIGN1cjtcbn1cblxualF1ZXJ5LmVhY2goe1xuXHRwYXJlbnQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0cmV0dXJuIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgIT09IDExID8gcGFyZW50IDogbnVsbDtcblx0fSxcblx0cGFyZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicGFyZW50Tm9kZVwiICk7XG5cdH0sXG5cdHBhcmVudHNVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkge1xuXHRcdHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiwgdW50aWwgKTtcblx0fSxcblx0bmV4dDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiApO1xuXHR9LFxuXHRwcmV2OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuXHR9LFxuXHRuZXh0QWxsOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXZBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiICk7XG5cdH0sXG5cdG5leHRVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkge1xuXHRcdHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHByZXZVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkge1xuXHRcdHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRzaWJsaW5nczogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5zaWJsaW5nKCAoIGVsZW0ucGFyZW50Tm9kZSB8fCB7fSApLmZpcnN0Q2hpbGQsIGVsZW0gKTtcblx0fSxcblx0Y2hpbGRyZW46IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuc2libGluZyggZWxlbS5maXJzdENoaWxkICk7XG5cdH0sXG5cdGNvbnRlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZWxlbS5jb250ZW50RG9jdW1lbnQgfHwgalF1ZXJ5Lm1lcmdlKCBbXSwgZWxlbS5jaGlsZE5vZGVzICk7XG5cdH1cbn0sIGZ1bmN0aW9uKCBuYW1lLCBmbiApIHtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggdW50aWwsIHNlbGVjdG9yICkge1xuXHRcdHZhciBtYXRjaGVkID0galF1ZXJ5Lm1hcCggdGhpcywgZm4sIHVudGlsICk7XG5cblx0XHRpZiAoIG5hbWUuc2xpY2UoIC01ICkgIT09IFwiVW50aWxcIiApIHtcblx0XHRcdHNlbGVjdG9yID0gdW50aWw7XG5cdFx0fVxuXG5cdFx0aWYgKCBzZWxlY3RvciAmJiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRtYXRjaGVkID0galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIG1hdGNoZWQgKTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXMubGVuZ3RoID4gMSApIHtcblx0XHRcdC8vIFJlbW92ZSBkdXBsaWNhdGVzXG5cdFx0XHRpZiAoICFndWFyYW50ZWVkVW5pcXVlWyBuYW1lIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS51bmlxdWUoIG1hdGNoZWQgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmV2ZXJzZSBvcmRlciBmb3IgcGFyZW50cyogYW5kIHByZXYtZGVyaXZhdGl2ZXNcblx0XHRcdGlmICggcnBhcmVudHNwcmV2LnRlc3QoIG5hbWUgKSApIHtcblx0XHRcdFx0bWF0Y2hlZC5yZXZlcnNlKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkICk7XG5cdH07XG59KTtcbnZhciBybm90d2hpdGUgPSAoL1xcUysvZyk7XG5cblxuXG4vLyBTdHJpbmcgdG8gT2JqZWN0IG9wdGlvbnMgZm9ybWF0IGNhY2hlXG52YXIgb3B0aW9uc0NhY2hlID0ge307XG5cbi8vIENvbnZlcnQgU3RyaW5nLWZvcm1hdHRlZCBvcHRpb25zIGludG8gT2JqZWN0LWZvcm1hdHRlZCBvbmVzIGFuZCBzdG9yZSBpbiBjYWNoZVxuZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIHtcblx0dmFyIG9iamVjdCA9IG9wdGlvbnNDYWNoZVsgb3B0aW9ucyBdID0ge307XG5cdGpRdWVyeS5lYWNoKCBvcHRpb25zLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSwgZnVuY3Rpb24oIF8sIGZsYWcgKSB7XG5cdFx0b2JqZWN0WyBmbGFnIF0gPSB0cnVlO1xuXHR9KTtcblx0cmV0dXJuIG9iamVjdDtcbn1cblxuLypcbiAqIENyZWF0ZSBhIGNhbGxiYWNrIGxpc3QgdXNpbmcgdGhlIGZvbGxvd2luZyBwYXJhbWV0ZXJzOlxuICpcbiAqXHRvcHRpb25zOiBhbiBvcHRpb25hbCBsaXN0IG9mIHNwYWNlLXNlcGFyYXRlZCBvcHRpb25zIHRoYXQgd2lsbCBjaGFuZ2UgaG93XG4gKlx0XHRcdHRoZSBjYWxsYmFjayBsaXN0IGJlaGF2ZXMgb3IgYSBtb3JlIHRyYWRpdGlvbmFsIG9wdGlvbiBvYmplY3RcbiAqXG4gKiBCeSBkZWZhdWx0IGEgY2FsbGJhY2sgbGlzdCB3aWxsIGFjdCBsaWtlIGFuIGV2ZW50IGNhbGxiYWNrIGxpc3QgYW5kIGNhbiBiZVxuICogXCJmaXJlZFwiIG11bHRpcGxlIHRpbWVzLlxuICpcbiAqIFBvc3NpYmxlIG9wdGlvbnM6XG4gKlxuICpcdG9uY2U6XHRcdFx0d2lsbCBlbnN1cmUgdGhlIGNhbGxiYWNrIGxpc3QgY2FuIG9ubHkgYmUgZmlyZWQgb25jZSAobGlrZSBhIERlZmVycmVkKVxuICpcbiAqXHRtZW1vcnk6XHRcdFx0d2lsbCBrZWVwIHRyYWNrIG9mIHByZXZpb3VzIHZhbHVlcyBhbmQgd2lsbCBjYWxsIGFueSBjYWxsYmFjayBhZGRlZFxuICpcdFx0XHRcdFx0YWZ0ZXIgdGhlIGxpc3QgaGFzIGJlZW4gZmlyZWQgcmlnaHQgYXdheSB3aXRoIHRoZSBsYXRlc3QgXCJtZW1vcml6ZWRcIlxuICpcdFx0XHRcdFx0dmFsdWVzIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdHVuaXF1ZTpcdFx0XHR3aWxsIGVuc3VyZSBhIGNhbGxiYWNrIGNhbiBvbmx5IGJlIGFkZGVkIG9uY2UgKG5vIGR1cGxpY2F0ZSBpbiB0aGUgbGlzdClcbiAqXG4gKlx0c3RvcE9uRmFsc2U6XHRpbnRlcnJ1cHQgY2FsbGluZ3Mgd2hlbiBhIGNhbGxiYWNrIHJldHVybnMgZmFsc2VcbiAqXG4gKi9cbmpRdWVyeS5DYWxsYmFja3MgPSBmdW5jdGlvbiggb3B0aW9ucyApIHtcblxuXHQvLyBDb252ZXJ0IG9wdGlvbnMgZnJvbSBTdHJpbmctZm9ybWF0dGVkIHRvIE9iamVjdC1mb3JtYXR0ZWQgaWYgbmVlZGVkXG5cdC8vICh3ZSBjaGVjayBpbiBjYWNoZSBmaXJzdClcblx0b3B0aW9ucyA9IHR5cGVvZiBvcHRpb25zID09PSBcInN0cmluZ1wiID9cblx0XHQoIG9wdGlvbnNDYWNoZVsgb3B0aW9ucyBdIHx8IGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSApIDpcblx0XHRqUXVlcnkuZXh0ZW5kKCB7fSwgb3B0aW9ucyApO1xuXG5cdHZhciAvLyBMYXN0IGZpcmUgdmFsdWUgKGZvciBub24tZm9yZ2V0dGFibGUgbGlzdHMpXG5cdFx0bWVtb3J5LFxuXHRcdC8vIEZsYWcgdG8ga25vdyBpZiBsaXN0IHdhcyBhbHJlYWR5IGZpcmVkXG5cdFx0ZmlyZWQsXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3QgaXMgY3VycmVudGx5IGZpcmluZ1xuXHRcdGZpcmluZyxcblx0XHQvLyBGaXJzdCBjYWxsYmFjayB0byBmaXJlICh1c2VkIGludGVybmFsbHkgYnkgYWRkIGFuZCBmaXJlV2l0aClcblx0XHRmaXJpbmdTdGFydCxcblx0XHQvLyBFbmQgb2YgdGhlIGxvb3Agd2hlbiBmaXJpbmdcblx0XHRmaXJpbmdMZW5ndGgsXG5cdFx0Ly8gSW5kZXggb2YgY3VycmVudGx5IGZpcmluZyBjYWxsYmFjayAobW9kaWZpZWQgYnkgcmVtb3ZlIGlmIG5lZWRlZClcblx0XHRmaXJpbmdJbmRleCxcblx0XHQvLyBBY3R1YWwgY2FsbGJhY2sgbGlzdFxuXHRcdGxpc3QgPSBbXSxcblx0XHQvLyBTdGFjayBvZiBmaXJlIGNhbGxzIGZvciByZXBlYXRhYmxlIGxpc3RzXG5cdFx0c3RhY2sgPSAhb3B0aW9ucy5vbmNlICYmIFtdLFxuXHRcdC8vIEZpcmUgY2FsbGJhY2tzXG5cdFx0ZmlyZSA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHRcdFx0bWVtb3J5ID0gb3B0aW9ucy5tZW1vcnkgJiYgZGF0YTtcblx0XHRcdGZpcmVkID0gdHJ1ZTtcblx0XHRcdGZpcmluZ0luZGV4ID0gZmlyaW5nU3RhcnQgfHwgMDtcblx0XHRcdGZpcmluZ1N0YXJ0ID0gMDtcblx0XHRcdGZpcmluZ0xlbmd0aCA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0ZmlyaW5nID0gdHJ1ZTtcblx0XHRcdGZvciAoIDsgbGlzdCAmJiBmaXJpbmdJbmRleCA8IGZpcmluZ0xlbmd0aDsgZmlyaW5nSW5kZXgrKyApIHtcblx0XHRcdFx0aWYgKCBsaXN0WyBmaXJpbmdJbmRleCBdLmFwcGx5KCBkYXRhWyAwIF0sIGRhdGFbIDEgXSApID09PSBmYWxzZSAmJiBvcHRpb25zLnN0b3BPbkZhbHNlICkge1xuXHRcdFx0XHRcdG1lbW9yeSA9IGZhbHNlOyAvLyBUbyBwcmV2ZW50IGZ1cnRoZXIgY2FsbHMgdXNpbmcgYWRkXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGZpcmluZyA9IGZhbHNlO1xuXHRcdFx0aWYgKCBsaXN0ICkge1xuXHRcdFx0XHRpZiAoIHN0YWNrICkge1xuXHRcdFx0XHRcdGlmICggc3RhY2subGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0ZmlyZSggc3RhY2suc2hpZnQoKSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmICggbWVtb3J5ICkge1xuXHRcdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZWxmLmRpc2FibGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cdFx0Ly8gQWN0dWFsIENhbGxiYWNrcyBvYmplY3Rcblx0XHRzZWxmID0ge1xuXHRcdFx0Ly8gQWRkIGEgY2FsbGJhY2sgb3IgYSBjb2xsZWN0aW9uIG9mIGNhbGxiYWNrcyB0byB0aGUgbGlzdFxuXHRcdFx0YWRkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXHRcdFx0XHRcdC8vIEZpcnN0LCB3ZSBzYXZlIHRoZSBjdXJyZW50IGxlbmd0aFxuXHRcdFx0XHRcdHZhciBzdGFydCA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0XHRcdChmdW5jdGlvbiBhZGQoIGFyZ3MgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggYXJncywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdFx0dmFyIHR5cGUgPSBqUXVlcnkudHlwZSggYXJnICk7XG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggIW9wdGlvbnMudW5pcXVlIHx8ICFzZWxmLmhhcyggYXJnICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRsaXN0LnB1c2goIGFyZyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggYXJnICYmIGFyZy5sZW5ndGggJiYgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBJbnNwZWN0IHJlY3Vyc2l2ZWx5XG5cdFx0XHRcdFx0XHRcdFx0YWRkKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSkoIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdC8vIERvIHdlIG5lZWQgdG8gYWRkIHRoZSBjYWxsYmFja3MgdG8gdGhlXG5cdFx0XHRcdFx0Ly8gY3VycmVudCBmaXJpbmcgYmF0Y2g/XG5cdFx0XHRcdFx0aWYgKCBmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRmaXJpbmdMZW5ndGggPSBsaXN0Lmxlbmd0aDtcblx0XHRcdFx0XHQvLyBXaXRoIG1lbW9yeSwgaWYgd2UncmUgbm90IGZpcmluZyB0aGVuXG5cdFx0XHRcdFx0Ly8gd2Ugc2hvdWxkIGNhbGwgcmlnaHQgYXdheVxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIG1lbW9yeSApIHtcblx0XHRcdFx0XHRcdGZpcmluZ1N0YXJ0ID0gc3RhcnQ7XG5cdFx0XHRcdFx0XHRmaXJlKCBtZW1vcnkgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gUmVtb3ZlIGEgY2FsbGJhY2sgZnJvbSB0aGUgbGlzdFxuXHRcdFx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG5cdFx0XHRcdFx0XHR2YXIgaW5kZXg7XG5cdFx0XHRcdFx0XHR3aGlsZSAoICggaW5kZXggPSBqUXVlcnkuaW5BcnJheSggYXJnLCBsaXN0LCBpbmRleCApICkgPiAtMSApIHtcblx0XHRcdFx0XHRcdFx0bGlzdC5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBmaXJpbmcgaW5kZXhlc1xuXHRcdFx0XHRcdFx0XHRpZiAoIGZpcmluZyApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGluZGV4IDw9IGZpcmluZ0xlbmd0aCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGZpcmluZ0xlbmd0aC0tO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRpZiAoIGluZGV4IDw9IGZpcmluZ0luZGV4ICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXgtLTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBDaGVjayBpZiBhIGdpdmVuIGNhbGxiYWNrIGlzIGluIHRoZSBsaXN0LlxuXHRcdFx0Ly8gSWYgbm8gYXJndW1lbnQgaXMgZ2l2ZW4sIHJldHVybiB3aGV0aGVyIG9yIG5vdCBsaXN0IGhhcyBjYWxsYmFja3MgYXR0YWNoZWQuXG5cdFx0XHRoYXM6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0cmV0dXJuIGZuID8galF1ZXJ5LmluQXJyYXkoIGZuLCBsaXN0ICkgPiAtMSA6ICEhKCBsaXN0ICYmIGxpc3QubGVuZ3RoICk7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gUmVtb3ZlIGFsbCBjYWxsYmFja3MgZnJvbSB0aGUgbGlzdFxuXHRcdFx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsaXN0ID0gW107XG5cdFx0XHRcdGZpcmluZ0xlbmd0aCA9IDA7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIEhhdmUgdGhlIGxpc3QgZG8gbm90aGluZyBhbnltb3JlXG5cdFx0XHRkaXNhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bGlzdCA9IHN0YWNrID0gbWVtb3J5ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBJcyBpdCBkaXNhYmxlZD9cblx0XHRcdGRpc2FibGVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICFsaXN0O1xuXHRcdFx0fSxcblx0XHRcdC8vIExvY2sgdGhlIGxpc3QgaW4gaXRzIGN1cnJlbnQgc3RhdGVcblx0XHRcdGxvY2s6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzdGFjayA9IHVuZGVmaW5lZDtcblx0XHRcdFx0aWYgKCAhbWVtb3J5ICkge1xuXHRcdFx0XHRcdHNlbGYuZGlzYWJsZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIElzIGl0IGxvY2tlZD9cblx0XHRcdGxvY2tlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhc3RhY2s7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gQ2FsbCBhbGwgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGNvbnRleHQgYW5kIGFyZ3VtZW50c1xuXHRcdFx0ZmlyZVdpdGg6IGZ1bmN0aW9uKCBjb250ZXh0LCBhcmdzICkge1xuXHRcdFx0XHRpZiAoIGxpc3QgJiYgKCAhZmlyZWQgfHwgc3RhY2sgKSApIHtcblx0XHRcdFx0XHRhcmdzID0gYXJncyB8fCBbXTtcblx0XHRcdFx0XHRhcmdzID0gWyBjb250ZXh0LCBhcmdzLnNsaWNlID8gYXJncy5zbGljZSgpIDogYXJncyBdO1xuXHRcdFx0XHRcdGlmICggZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0c3RhY2sucHVzaCggYXJncyApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRmaXJlKCBhcmdzICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIENhbGwgYWxsIHRoZSBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzXG5cdFx0XHRmaXJlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5maXJlV2l0aCggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIFRvIGtub3cgaWYgdGhlIGNhbGxiYWNrcyBoYXZlIGFscmVhZHkgYmVlbiBjYWxsZWQgYXQgbGVhc3Qgb25jZVxuXHRcdFx0ZmlyZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gISFmaXJlZDtcblx0XHRcdH1cblx0XHR9O1xuXG5cdHJldHVybiBzZWxmO1xufTtcblxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHREZWZlcnJlZDogZnVuY3Rpb24oIGZ1bmMgKSB7XG5cdFx0dmFyIHR1cGxlcyA9IFtcblx0XHRcdFx0Ly8gYWN0aW9uLCBhZGQgbGlzdGVuZXIsIGxpc3RlbmVyIGxpc3QsIGZpbmFsIHN0YXRlXG5cdFx0XHRcdFsgXCJyZXNvbHZlXCIsIFwiZG9uZVwiLCBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksIFwicmVzb2x2ZWRcIiBdLFxuXHRcdFx0XHRbIFwicmVqZWN0XCIsIFwiZmFpbFwiLCBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksIFwicmVqZWN0ZWRcIiBdLFxuXHRcdFx0XHRbIFwibm90aWZ5XCIsIFwicHJvZ3Jlc3NcIiwgalF1ZXJ5LkNhbGxiYWNrcyhcIm1lbW9yeVwiKSBdXG5cdFx0XHRdLFxuXHRcdFx0c3RhdGUgPSBcInBlbmRpbmdcIixcblx0XHRcdHByb21pc2UgPSB7XG5cdFx0XHRcdHN0YXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gc3RhdGU7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFsd2F5czogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQuZG9uZSggYXJndW1lbnRzICkuZmFpbCggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdHRoZW46IGZ1bmN0aW9uKCAvKiBmbkRvbmUsIGZuRmFpbCwgZm5Qcm9ncmVzcyAqLyApIHtcblx0XHRcdFx0XHR2YXIgZm5zID0gYXJndW1lbnRzO1xuXHRcdFx0XHRcdHJldHVybiBqUXVlcnkuRGVmZXJyZWQoZnVuY3Rpb24oIG5ld0RlZmVyICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcdFx0XHRcdFx0XHR2YXIgZm4gPSBqUXVlcnkuaXNGdW5jdGlvbiggZm5zWyBpIF0gKSAmJiBmbnNbIGkgXTtcblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWRbIGRvbmUgfCBmYWlsIHwgcHJvZ3Jlc3MgXSBmb3IgZm9yd2FyZGluZyBhY3Rpb25zIHRvIG5ld0RlZmVyXG5cdFx0XHRcdFx0XHRcdGRlZmVycmVkWyB0dXBsZVsxXSBdKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHJldHVybmVkICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCByZXR1cm5lZC5wcm9taXNlICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZC5wcm9taXNlKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmRvbmUoIG5ld0RlZmVyLnJlc29sdmUgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZmFpbCggbmV3RGVmZXIucmVqZWN0IClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LnByb2dyZXNzKCBuZXdEZWZlci5ub3RpZnkgKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXJbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBwcm9taXNlID8gbmV3RGVmZXIucHJvbWlzZSgpIDogdGhpcywgZm4gPyBbIHJldHVybmVkIF0gOiBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRmbnMgPSBudWxsO1xuXHRcdFx0XHRcdH0pLnByb21pc2UoKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0Ly8gR2V0IGEgcHJvbWlzZSBmb3IgdGhpcyBkZWZlcnJlZFxuXHRcdFx0XHQvLyBJZiBvYmogaXMgcHJvdmlkZWQsIHRoZSBwcm9taXNlIGFzcGVjdCBpcyBhZGRlZCB0byB0aGUgb2JqZWN0XG5cdFx0XHRcdHByb21pc2U6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9iaiAhPSBudWxsID8galF1ZXJ5LmV4dGVuZCggb2JqLCBwcm9taXNlICkgOiBwcm9taXNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0ZGVmZXJyZWQgPSB7fTtcblxuXHRcdC8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXRcblx0XHRwcm9taXNlLnBpcGUgPSBwcm9taXNlLnRoZW47XG5cblx0XHQvLyBBZGQgbGlzdC1zcGVjaWZpYyBtZXRob2RzXG5cdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcdFx0dmFyIGxpc3QgPSB0dXBsZVsgMiBdLFxuXHRcdFx0XHRzdGF0ZVN0cmluZyA9IHR1cGxlWyAzIF07XG5cblx0XHRcdC8vIHByb21pc2VbIGRvbmUgfCBmYWlsIHwgcHJvZ3Jlc3MgXSA9IGxpc3QuYWRkXG5cdFx0XHRwcm9taXNlWyB0dXBsZVsxXSBdID0gbGlzdC5hZGQ7XG5cblx0XHRcdC8vIEhhbmRsZSBzdGF0ZVxuXHRcdFx0aWYgKCBzdGF0ZVN0cmluZyApIHtcblx0XHRcdFx0bGlzdC5hZGQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0Ly8gc3RhdGUgPSBbIHJlc29sdmVkIHwgcmVqZWN0ZWQgXVxuXHRcdFx0XHRcdHN0YXRlID0gc3RhdGVTdHJpbmc7XG5cblx0XHRcdFx0Ly8gWyByZWplY3RfbGlzdCB8IHJlc29sdmVfbGlzdCBdLmRpc2FibGU7IHByb2dyZXNzX2xpc3QubG9ja1xuXHRcdFx0XHR9LCB0dXBsZXNbIGkgXiAxIF1bIDIgXS5kaXNhYmxlLCB0dXBsZXNbIDIgXVsgMiBdLmxvY2sgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gZGVmZXJyZWRbIHJlc29sdmUgfCByZWplY3QgfCBub3RpZnkgXVxuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzBdIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzBdICsgXCJXaXRoXCIgXSggdGhpcyA9PT0gZGVmZXJyZWQgPyBwcm9taXNlIDogdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fTtcblx0XHRcdGRlZmVycmVkWyB0dXBsZVswXSArIFwiV2l0aFwiIF0gPSBsaXN0LmZpcmVXaXRoO1xuXHRcdH0pO1xuXG5cdFx0Ly8gTWFrZSB0aGUgZGVmZXJyZWQgYSBwcm9taXNlXG5cdFx0cHJvbWlzZS5wcm9taXNlKCBkZWZlcnJlZCApO1xuXG5cdFx0Ly8gQ2FsbCBnaXZlbiBmdW5jIGlmIGFueVxuXHRcdGlmICggZnVuYyApIHtcblx0XHRcdGZ1bmMuY2FsbCggZGVmZXJyZWQsIGRlZmVycmVkICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGRvbmUhXG5cdFx0cmV0dXJuIGRlZmVycmVkO1xuXHR9LFxuXG5cdC8vIERlZmVycmVkIGhlbHBlclxuXHR3aGVuOiBmdW5jdGlvbiggc3Vib3JkaW5hdGUgLyogLCAuLi4sIHN1Ym9yZGluYXRlTiAqLyApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRyZXNvbHZlVmFsdWVzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cdFx0XHRsZW5ndGggPSByZXNvbHZlVmFsdWVzLmxlbmd0aCxcblxuXHRcdFx0Ly8gdGhlIGNvdW50IG9mIHVuY29tcGxldGVkIHN1Ym9yZGluYXRlc1xuXHRcdFx0cmVtYWluaW5nID0gbGVuZ3RoICE9PSAxIHx8ICggc3Vib3JkaW5hdGUgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHN1Ym9yZGluYXRlLnByb21pc2UgKSApID8gbGVuZ3RoIDogMCxcblxuXHRcdFx0Ly8gdGhlIG1hc3RlciBEZWZlcnJlZC4gSWYgcmVzb2x2ZVZhbHVlcyBjb25zaXN0IG9mIG9ubHkgYSBzaW5nbGUgRGVmZXJyZWQsIGp1c3QgdXNlIHRoYXQuXG5cdFx0XHRkZWZlcnJlZCA9IHJlbWFpbmluZyA9PT0gMSA/IHN1Ym9yZGluYXRlIDogalF1ZXJ5LkRlZmVycmVkKCksXG5cblx0XHRcdC8vIFVwZGF0ZSBmdW5jdGlvbiBmb3IgYm90aCByZXNvbHZlIGFuZCBwcm9ncmVzcyB2YWx1ZXNcblx0XHRcdHVwZGF0ZUZ1bmMgPSBmdW5jdGlvbiggaSwgY29udGV4dHMsIHZhbHVlcyApIHtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRjb250ZXh0c1sgaSBdID0gdGhpcztcblx0XHRcdFx0XHR2YWx1ZXNbIGkgXSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxID8gc2xpY2UuY2FsbCggYXJndW1lbnRzICkgOiB2YWx1ZTtcblx0XHRcdFx0XHRpZiAoIHZhbHVlcyA9PT0gcHJvZ3Jlc3NWYWx1ZXMgKSB7XG5cdFx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBjb250ZXh0cywgdmFsdWVzICk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggISggLS1yZW1haW5pbmcgKSApIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBjb250ZXh0cywgdmFsdWVzICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0fSxcblxuXHRcdFx0cHJvZ3Jlc3NWYWx1ZXMsIHByb2dyZXNzQ29udGV4dHMsIHJlc29sdmVDb250ZXh0cztcblxuXHRcdC8vIEFkZCBsaXN0ZW5lcnMgdG8gRGVmZXJyZWQgc3Vib3JkaW5hdGVzOyB0cmVhdCBvdGhlcnMgYXMgcmVzb2x2ZWRcblx0XHRpZiAoIGxlbmd0aCA+IDEgKSB7XG5cdFx0XHRwcm9ncmVzc1ZhbHVlcyA9IG5ldyBBcnJheSggbGVuZ3RoICk7XG5cdFx0XHRwcm9ncmVzc0NvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdHJlc29sdmVDb250ZXh0cyA9IG5ldyBBcnJheSggbGVuZ3RoICk7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0aWYgKCByZXNvbHZlVmFsdWVzWyBpIF0gJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJlc29sdmVWYWx1ZXNbIGkgXS5wcm9taXNlICkgKSB7XG5cdFx0XHRcdFx0cmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0LmRvbmUoIHVwZGF0ZUZ1bmMoIGksIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcyApIClcblx0XHRcdFx0XHRcdC5mYWlsKCBkZWZlcnJlZC5yZWplY3QgKVxuXHRcdFx0XHRcdFx0LnByb2dyZXNzKCB1cGRhdGVGdW5jKCBpLCBwcm9ncmVzc0NvbnRleHRzLCBwcm9ncmVzc1ZhbHVlcyApICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0LS1yZW1haW5pbmc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJZiB3ZSdyZSBub3Qgd2FpdGluZyBvbiBhbnl0aGluZywgcmVzb2x2ZSB0aGUgbWFzdGVyXG5cdFx0aWYgKCAhcmVtYWluaW5nICkge1xuXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIHJlc29sdmVDb250ZXh0cywgcmVzb2x2ZVZhbHVlcyApO1xuXHRcdH1cblxuXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG5cdH1cbn0pO1xuXG5cbi8vIFRoZSBkZWZlcnJlZCB1c2VkIG9uIERPTSByZWFkeVxudmFyIHJlYWR5TGlzdDtcblxualF1ZXJ5LmZuLnJlYWR5ID0gZnVuY3Rpb24oIGZuICkge1xuXHQvLyBBZGQgdGhlIGNhbGxiYWNrXG5cdGpRdWVyeS5yZWFkeS5wcm9taXNlKCkuZG9uZSggZm4gKTtcblxuXHRyZXR1cm4gdGhpcztcbn07XG5cbmpRdWVyeS5leHRlbmQoe1xuXHQvLyBJcyB0aGUgRE9NIHJlYWR5IHRvIGJlIHVzZWQ/IFNldCB0byB0cnVlIG9uY2UgaXQgb2NjdXJzLlxuXHRpc1JlYWR5OiBmYWxzZSxcblxuXHQvLyBBIGNvdW50ZXIgdG8gdHJhY2sgaG93IG1hbnkgaXRlbXMgdG8gd2FpdCBmb3IgYmVmb3JlXG5cdC8vIHRoZSByZWFkeSBldmVudCBmaXJlcy4gU2VlICM2NzgxXG5cdHJlYWR5V2FpdDogMSxcblxuXHQvLyBIb2xkIChvciByZWxlYXNlKSB0aGUgcmVhZHkgZXZlbnRcblx0aG9sZFJlYWR5OiBmdW5jdGlvbiggaG9sZCApIHtcblx0XHRpZiAoIGhvbGQgKSB7XG5cdFx0XHRqUXVlcnkucmVhZHlXYWl0Kys7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGpRdWVyeS5yZWFkeSggdHJ1ZSApO1xuXHRcdH1cblx0fSxcblxuXHQvLyBIYW5kbGUgd2hlbiB0aGUgRE9NIGlzIHJlYWR5XG5cdHJlYWR5OiBmdW5jdGlvbiggd2FpdCApIHtcblxuXHRcdC8vIEFib3J0IGlmIHRoZXJlIGFyZSBwZW5kaW5nIGhvbGRzIG9yIHdlJ3JlIGFscmVhZHkgcmVhZHlcblx0XHRpZiAoIHdhaXQgPT09IHRydWUgPyAtLWpRdWVyeS5yZWFkeVdhaXQgOiBqUXVlcnkuaXNSZWFkeSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZW1lbWJlciB0aGF0IHRoZSBET00gaXMgcmVhZHlcblx0XHRqUXVlcnkuaXNSZWFkeSA9IHRydWU7XG5cblx0XHQvLyBJZiBhIG5vcm1hbCBET00gUmVhZHkgZXZlbnQgZmlyZWQsIGRlY3JlbWVudCwgYW5kIHdhaXQgaWYgbmVlZCBiZVxuXHRcdGlmICggd2FpdCAhPT0gdHJ1ZSAmJiAtLWpRdWVyeS5yZWFkeVdhaXQgPiAwICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIElmIHRoZXJlIGFyZSBmdW5jdGlvbnMgYm91bmQsIHRvIGV4ZWN1dGVcblx0XHRyZWFkeUxpc3QucmVzb2x2ZVdpdGgoIGRvY3VtZW50LCBbIGpRdWVyeSBdICk7XG5cblx0XHQvLyBUcmlnZ2VyIGFueSBib3VuZCByZWFkeSBldmVudHNcblx0XHRpZiAoIGpRdWVyeS5mbi50cmlnZ2VySGFuZGxlciApIHtcblx0XHRcdGpRdWVyeSggZG9jdW1lbnQgKS50cmlnZ2VySGFuZGxlciggXCJyZWFkeVwiICk7XG5cdFx0XHRqUXVlcnkoIGRvY3VtZW50ICkub2ZmKCBcInJlYWR5XCIgKTtcblx0XHR9XG5cdH1cbn0pO1xuXG4vKipcbiAqIFRoZSByZWFkeSBldmVudCBoYW5kbGVyIGFuZCBzZWxmIGNsZWFudXAgbWV0aG9kXG4gKi9cbmZ1bmN0aW9uIGNvbXBsZXRlZCgpIHtcblx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQsIGZhbHNlICk7XG5cdGpRdWVyeS5yZWFkeSgpO1xufVxuXG5qUXVlcnkucmVhZHkucHJvbWlzZSA9IGZ1bmN0aW9uKCBvYmogKSB7XG5cdGlmICggIXJlYWR5TGlzdCApIHtcblxuXHRcdHJlYWR5TGlzdCA9IGpRdWVyeS5EZWZlcnJlZCgpO1xuXG5cdFx0Ly8gQ2F0Y2ggY2FzZXMgd2hlcmUgJChkb2N1bWVudCkucmVhZHkoKSBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGJyb3dzZXIgZXZlbnQgaGFzIGFscmVhZHkgb2NjdXJyZWQuXG5cdFx0Ly8gV2Ugb25jZSB0cmllZCB0byB1c2UgcmVhZHlTdGF0ZSBcImludGVyYWN0aXZlXCIgaGVyZSwgYnV0IGl0IGNhdXNlZCBpc3N1ZXMgbGlrZSB0aGUgb25lXG5cdFx0Ly8gZGlzY292ZXJlZCBieSBDaHJpc1MgaGVyZTogaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIyODIjY29tbWVudDoxNVxuXHRcdGlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiICkge1xuXHRcdFx0Ly8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG5cdFx0XHRzZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIFVzZSB0aGUgaGFuZHkgZXZlbnQgY2FsbGJhY2tcblx0XHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQsIGZhbHNlICk7XG5cblx0XHRcdC8vIEEgZmFsbGJhY2sgdG8gd2luZG93Lm9ubG9hZCwgdGhhdCB3aWxsIGFsd2F5cyB3b3JrXG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHJlYWR5TGlzdC5wcm9taXNlKCBvYmogKTtcbn07XG5cbi8vIEtpY2sgb2ZmIHRoZSBET00gcmVhZHkgY2hlY2sgZXZlbiBpZiB0aGUgdXNlciBkb2VzIG5vdFxualF1ZXJ5LnJlYWR5LnByb21pc2UoKTtcblxuXG5cblxuLy8gTXVsdGlmdW5jdGlvbmFsIG1ldGhvZCB0byBnZXQgYW5kIHNldCB2YWx1ZXMgb2YgYSBjb2xsZWN0aW9uXG4vLyBUaGUgdmFsdWUvcyBjYW4gb3B0aW9uYWxseSBiZSBleGVjdXRlZCBpZiBpdCdzIGEgZnVuY3Rpb25cbnZhciBhY2Nlc3MgPSBqUXVlcnkuYWNjZXNzID0gZnVuY3Rpb24oIGVsZW1zLCBmbiwga2V5LCB2YWx1ZSwgY2hhaW5hYmxlLCBlbXB0eUdldCwgcmF3ICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gZWxlbXMubGVuZ3RoLFxuXHRcdGJ1bGsgPSBrZXkgPT0gbnVsbDtcblxuXHQvLyBTZXRzIG1hbnkgdmFsdWVzXG5cdGlmICggalF1ZXJ5LnR5cGUoIGtleSApID09PSBcIm9iamVjdFwiICkge1xuXHRcdGNoYWluYWJsZSA9IHRydWU7XG5cdFx0Zm9yICggaSBpbiBrZXkgKSB7XG5cdFx0XHRqUXVlcnkuYWNjZXNzKCBlbGVtcywgZm4sIGksIGtleVtpXSwgdHJ1ZSwgZW1wdHlHZXQsIHJhdyApO1xuXHRcdH1cblxuXHQvLyBTZXRzIG9uZSB2YWx1ZVxuXHR9IGVsc2UgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdGNoYWluYWJsZSA9IHRydWU7XG5cblx0XHRpZiAoICFqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJhdyA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKCBidWxrICkge1xuXHRcdFx0Ly8gQnVsayBvcGVyYXRpb25zIHJ1biBhZ2FpbnN0IHRoZSBlbnRpcmUgc2V0XG5cdFx0XHRpZiAoIHJhdyApIHtcblx0XHRcdFx0Zm4uY2FsbCggZWxlbXMsIHZhbHVlICk7XG5cdFx0XHRcdGZuID0gbnVsbDtcblxuXHRcdFx0Ly8gLi4uZXhjZXB0IHdoZW4gZXhlY3V0aW5nIGZ1bmN0aW9uIHZhbHVlc1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YnVsayA9IGZuO1xuXHRcdFx0XHRmbiA9IGZ1bmN0aW9uKCBlbGVtLCBrZXksIHZhbHVlICkge1xuXHRcdFx0XHRcdHJldHVybiBidWxrLmNhbGwoIGpRdWVyeSggZWxlbSApLCB2YWx1ZSApO1xuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggZm4gKSB7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0Zm4oIGVsZW1zW2ldLCBrZXksIHJhdyA/IHZhbHVlIDogdmFsdWUuY2FsbCggZWxlbXNbaV0sIGksIGZuKCBlbGVtc1tpXSwga2V5ICkgKSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBjaGFpbmFibGUgP1xuXHRcdGVsZW1zIDpcblxuXHRcdC8vIEdldHNcblx0XHRidWxrID9cblx0XHRcdGZuLmNhbGwoIGVsZW1zICkgOlxuXHRcdFx0bGVuID8gZm4oIGVsZW1zWzBdLCBrZXkgKSA6IGVtcHR5R2V0O1xufTtcblxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBvYmplY3QgY2FuIGhhdmUgZGF0YVxuICovXG5qUXVlcnkuYWNjZXB0RGF0YSA9IGZ1bmN0aW9uKCBvd25lciApIHtcblx0Ly8gQWNjZXB0cyBvbmx5OlxuXHQvLyAgLSBOb2RlXG5cdC8vICAgIC0gTm9kZS5FTEVNRU5UX05PREVcblx0Ly8gICAgLSBOb2RlLkRPQ1VNRU5UX05PREVcblx0Ly8gIC0gT2JqZWN0XG5cdC8vICAgIC0gQW55XG5cdC8qIGpzaGludCAtVzAxOCAqL1xuXHRyZXR1cm4gb3duZXIubm9kZVR5cGUgPT09IDEgfHwgb3duZXIubm9kZVR5cGUgPT09IDkgfHwgISggK293bmVyLm5vZGVUeXBlICk7XG59O1xuXG5cbmZ1bmN0aW9uIERhdGEoKSB7XG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NCxcblx0Ly8gT2xkIFdlYktpdCBkb2VzIG5vdCBoYXZlIE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucy9mcmVlemUgbWV0aG9kLFxuXHQvLyByZXR1cm4gbmV3IGVtcHR5IG9iamVjdCBpbnN0ZWFkIHdpdGggbm8gW1tzZXRdXSBhY2Nlc3NvclxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIHRoaXMuY2FjaGUgPSB7fSwgMCwge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4ge307XG5cdFx0fVxuXHR9KTtcblxuXHR0aGlzLmV4cGFuZG8gPSBqUXVlcnkuZXhwYW5kbyArIERhdGEudWlkKys7XG59XG5cbkRhdGEudWlkID0gMTtcbkRhdGEuYWNjZXB0cyA9IGpRdWVyeS5hY2NlcHREYXRhO1xuXG5EYXRhLnByb3RvdHlwZSA9IHtcblx0a2V5OiBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFx0Ly8gV2UgY2FuIGFjY2VwdCBkYXRhIGZvciBub24tZWxlbWVudCBub2RlcyBpbiBtb2Rlcm4gYnJvd3NlcnMsXG5cdFx0Ly8gYnV0IHdlIHNob3VsZCBub3QsIHNlZSAjODMzNS5cblx0XHQvLyBBbHdheXMgcmV0dXJuIHRoZSBrZXkgZm9yIGEgZnJvemVuIG9iamVjdC5cblx0XHRpZiAoICFEYXRhLmFjY2VwdHMoIG93bmVyICkgKSB7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2YXIgZGVzY3JpcHRvciA9IHt9LFxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhlIG93bmVyIG9iamVjdCBhbHJlYWR5IGhhcyBhIGNhY2hlIGtleVxuXHRcdFx0dW5sb2NrID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXG5cdFx0Ly8gSWYgbm90LCBjcmVhdGUgb25lXG5cdFx0aWYgKCAhdW5sb2NrICkge1xuXHRcdFx0dW5sb2NrID0gRGF0YS51aWQrKztcblxuXHRcdFx0Ly8gU2VjdXJlIGl0IGluIGEgbm9uLWVudW1lcmFibGUsIG5vbi13cml0YWJsZSBwcm9wZXJ0eVxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGVzY3JpcHRvclsgdGhpcy5leHBhbmRvIF0gPSB7IHZhbHVlOiB1bmxvY2sgfTtcblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXMoIG93bmVyLCBkZXNjcmlwdG9yICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NFxuXHRcdFx0Ly8gRmFsbGJhY2sgdG8gYSBsZXNzIHNlY3VyZSBkZWZpbml0aW9uXG5cdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0ZGVzY3JpcHRvclsgdGhpcy5leHBhbmRvIF0gPSB1bmxvY2s7XG5cdFx0XHRcdGpRdWVyeS5leHRlbmQoIG93bmVyLCBkZXNjcmlwdG9yICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRW5zdXJlIHRoZSBjYWNoZSBvYmplY3Rcblx0XHRpZiAoICF0aGlzLmNhY2hlWyB1bmxvY2sgXSApIHtcblx0XHRcdHRoaXMuY2FjaGVbIHVubG9jayBdID0ge307XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHVubG9jaztcblx0fSxcblx0c2V0OiBmdW5jdGlvbiggb3duZXIsIGRhdGEsIHZhbHVlICkge1xuXHRcdHZhciBwcm9wLFxuXHRcdFx0Ly8gVGhlcmUgbWF5IGJlIGFuIHVubG9jayBhc3NpZ25lZCB0byB0aGlzIG5vZGUsXG5cdFx0XHQvLyBpZiB0aGVyZSBpcyBubyBlbnRyeSBmb3IgdGhpcyBcIm93bmVyXCIsIGNyZWF0ZSBvbmUgaW5saW5lXG5cdFx0XHQvLyBhbmQgc2V0IHRoZSB1bmxvY2sgYXMgdGhvdWdoIGFuIG93bmVyIGVudHJ5IGhhZCBhbHdheXMgZXhpc3RlZFxuXHRcdFx0dW5sb2NrID0gdGhpcy5rZXkoIG93bmVyICksXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGVbIHVubG9jayBdO1xuXG5cdFx0Ly8gSGFuZGxlOiBbIG93bmVyLCBrZXksIHZhbHVlIF0gYXJnc1xuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRjYWNoZVsgZGF0YSBdID0gdmFsdWU7XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIHsgcHJvcGVydGllcyB9IF0gYXJnc1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBGcmVzaCBhc3NpZ25tZW50cyBieSBvYmplY3QgYXJlIHNoYWxsb3cgY29waWVkXG5cdFx0XHRpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBjYWNoZSApICkge1xuXHRcdFx0XHRqUXVlcnkuZXh0ZW5kKCB0aGlzLmNhY2hlWyB1bmxvY2sgXSwgZGF0YSApO1xuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBjb3B5IHRoZSBwcm9wZXJ0aWVzIG9uZS1ieS1vbmUgdG8gdGhlIGNhY2hlIG9iamVjdFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggcHJvcCBpbiBkYXRhICkge1xuXHRcdFx0XHRcdGNhY2hlWyBwcm9wIF0gPSBkYXRhWyBwcm9wIF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNhY2hlO1xuXHR9LFxuXHRnZXQ6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdC8vIEVpdGhlciBhIHZhbGlkIGNhY2hlIGlzIGZvdW5kLCBvciB3aWxsIGJlIGNyZWF0ZWQuXG5cdFx0Ly8gTmV3IGNhY2hlcyB3aWxsIGJlIGNyZWF0ZWQgYW5kIHRoZSB1bmxvY2sgcmV0dXJuZWQsXG5cdFx0Ly8gYWxsb3dpbmcgZGlyZWN0IGFjY2VzcyB0byB0aGUgbmV3bHkgY3JlYXRlZFxuXHRcdC8vIGVtcHR5IGRhdGEgb2JqZWN0LiBBIHZhbGlkIG93bmVyIG9iamVjdCBtdXN0IGJlIHByb3ZpZGVkLlxuXHRcdHZhciBjYWNoZSA9IHRoaXMuY2FjaGVbIHRoaXMua2V5KCBvd25lciApIF07XG5cblx0XHRyZXR1cm4ga2V5ID09PSB1bmRlZmluZWQgP1xuXHRcdFx0Y2FjaGUgOiBjYWNoZVsga2V5IF07XG5cdH0sXG5cdGFjY2VzczogZnVuY3Rpb24oIG93bmVyLCBrZXksIHZhbHVlICkge1xuXHRcdHZhciBzdG9yZWQ7XG5cdFx0Ly8gSW4gY2FzZXMgd2hlcmUgZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBObyBrZXkgd2FzIHNwZWNpZmllZFxuXHRcdC8vICAgMi4gQSBzdHJpbmcga2V5IHdhcyBzcGVjaWZpZWQsIGJ1dCBubyB2YWx1ZSBwcm92aWRlZFxuXHRcdC8vXG5cdFx0Ly8gVGFrZSB0aGUgXCJyZWFkXCIgcGF0aCBhbmQgYWxsb3cgdGhlIGdldCBtZXRob2QgdG8gZGV0ZXJtaW5lXG5cdFx0Ly8gd2hpY2ggdmFsdWUgdG8gcmV0dXJuLCByZXNwZWN0aXZlbHkgZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBUaGUgZW50aXJlIGNhY2hlIG9iamVjdFxuXHRcdC8vICAgMi4gVGhlIGRhdGEgc3RvcmVkIGF0IHRoZSBrZXlcblx0XHQvL1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0KChrZXkgJiYgdHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIikgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgKSB7XG5cblx0XHRcdHN0b3JlZCA9IHRoaXMuZ2V0KCBvd25lciwga2V5ICk7XG5cblx0XHRcdHJldHVybiBzdG9yZWQgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHN0b3JlZCA6IHRoaXMuZ2V0KCBvd25lciwgalF1ZXJ5LmNhbWVsQ2FzZShrZXkpICk7XG5cdFx0fVxuXG5cdFx0Ly8gWypdV2hlbiB0aGUga2V5IGlzIG5vdCBhIHN0cmluZywgb3IgYm90aCBhIGtleSBhbmQgdmFsdWVcblx0XHQvLyBhcmUgc3BlY2lmaWVkLCBzZXQgb3IgZXh0ZW5kIChleGlzdGluZyBvYmplY3RzKSB3aXRoIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gQW4gb2JqZWN0IG9mIHByb3BlcnRpZXNcblx0XHQvLyAgIDIuIEEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vXG5cdFx0dGhpcy5zZXQoIG93bmVyLCBrZXksIHZhbHVlICk7XG5cblx0XHQvLyBTaW5jZSB0aGUgXCJzZXRcIiBwYXRoIGNhbiBoYXZlIHR3byBwb3NzaWJsZSBlbnRyeSBwb2ludHNcblx0XHQvLyByZXR1cm4gdGhlIGV4cGVjdGVkIGRhdGEgYmFzZWQgb24gd2hpY2ggcGF0aCB3YXMgdGFrZW5bKl1cblx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoga2V5O1xuXHR9LFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHZhciBpLCBuYW1lLCBjYW1lbCxcblx0XHRcdHVubG9jayA9IHRoaXMua2V5KCBvd25lciApLFxuXHRcdFx0Y2FjaGUgPSB0aGlzLmNhY2hlWyB1bmxvY2sgXTtcblxuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0aGlzLmNhY2hlWyB1bmxvY2sgXSA9IHt9O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFN1cHBvcnQgYXJyYXkgb3Igc3BhY2Ugc2VwYXJhdGVkIHN0cmluZyBvZiBrZXlzXG5cdFx0XHRpZiAoIGpRdWVyeS5pc0FycmF5KCBrZXkgKSApIHtcblx0XHRcdFx0Ly8gSWYgXCJuYW1lXCIgaXMgYW4gYXJyYXkgb2Yga2V5cy4uLlxuXHRcdFx0XHQvLyBXaGVuIGRhdGEgaXMgaW5pdGlhbGx5IGNyZWF0ZWQsIHZpYSAoXCJrZXlcIiwgXCJ2YWxcIikgc2lnbmF0dXJlLFxuXHRcdFx0XHQvLyBrZXlzIHdpbGwgYmUgY29udmVydGVkIHRvIGNhbWVsQ2FzZS5cblx0XHRcdFx0Ly8gU2luY2UgdGhlcmUgaXMgbm8gd2F5IHRvIHRlbGwgX2hvd18gYSBrZXkgd2FzIGFkZGVkLCByZW1vdmVcblx0XHRcdFx0Ly8gYm90aCBwbGFpbiBrZXkgYW5kIGNhbWVsQ2FzZSBrZXkuICMxMjc4NlxuXHRcdFx0XHQvLyBUaGlzIHdpbGwgb25seSBwZW5hbGl6ZSB0aGUgYXJyYXkgYXJndW1lbnQgcGF0aC5cblx0XHRcdFx0bmFtZSA9IGtleS5jb25jYXQoIGtleS5tYXAoIGpRdWVyeS5jYW1lbENhc2UgKSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2FtZWwgPSBqUXVlcnkuY2FtZWxDYXNlKCBrZXkgKTtcblx0XHRcdFx0Ly8gVHJ5IHRoZSBzdHJpbmcgYXMgYSBrZXkgYmVmb3JlIGFueSBtYW5pcHVsYXRpb25cblx0XHRcdFx0aWYgKCBrZXkgaW4gY2FjaGUgKSB7XG5cdFx0XHRcdFx0bmFtZSA9IFsga2V5LCBjYW1lbCBdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIElmIGEga2V5IHdpdGggdGhlIHNwYWNlcyBleGlzdHMsIHVzZSBpdC5cblx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGNyZWF0ZSBhbiBhcnJheSBieSBtYXRjaGluZyBub24td2hpdGVzcGFjZVxuXHRcdFx0XHRcdG5hbWUgPSBjYW1lbDtcblx0XHRcdFx0XHRuYW1lID0gbmFtZSBpbiBjYWNoZSA/XG5cdFx0XHRcdFx0XHRbIG5hbWUgXSA6ICggbmFtZS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW10gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpID0gbmFtZS5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0ZGVsZXRlIGNhY2hlWyBuYW1lWyBpIF0gXTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGhhc0RhdGE6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHRyZXR1cm4gIWpRdWVyeS5pc0VtcHR5T2JqZWN0KFxuXHRcdFx0dGhpcy5jYWNoZVsgb3duZXJbIHRoaXMuZXhwYW5kbyBdIF0gfHwge31cblx0XHQpO1xuXHR9LFxuXHRkaXNjYXJkOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFx0aWYgKCBvd25lclsgdGhpcy5leHBhbmRvIF0gKSB7XG5cdFx0XHRkZWxldGUgdGhpcy5jYWNoZVsgb3duZXJbIHRoaXMuZXhwYW5kbyBdIF07XG5cdFx0fVxuXHR9XG59O1xudmFyIGRhdGFfcHJpdiA9IG5ldyBEYXRhKCk7XG5cbnZhciBkYXRhX3VzZXIgPSBuZXcgRGF0YSgpO1xuXG5cblxuLy9cdEltcGxlbWVudGF0aW9uIFN1bW1hcnlcbi8vXG4vL1x0MS4gRW5mb3JjZSBBUEkgc3VyZmFjZSBhbmQgc2VtYW50aWMgY29tcGF0aWJpbGl0eSB3aXRoIDEuOS54IGJyYW5jaFxuLy9cdDIuIEltcHJvdmUgdGhlIG1vZHVsZSdzIG1haW50YWluYWJpbGl0eSBieSByZWR1Y2luZyB0aGUgc3RvcmFnZVxuLy9cdFx0cGF0aHMgdG8gYSBzaW5nbGUgbWVjaGFuaXNtLlxuLy9cdDMuIFVzZSB0aGUgc2FtZSBzaW5nbGUgbWVjaGFuaXNtIHRvIHN1cHBvcnQgXCJwcml2YXRlXCIgYW5kIFwidXNlclwiIGRhdGEuXG4vL1x0NC4gX05ldmVyXyBleHBvc2UgXCJwcml2YXRlXCIgZGF0YSB0byB1c2VyIGNvZGUgKFRPRE86IERyb3AgX2RhdGEsIF9yZW1vdmVEYXRhKVxuLy9cdDUuIEF2b2lkIGV4cG9zaW5nIGltcGxlbWVudGF0aW9uIGRldGFpbHMgb24gdXNlciBvYmplY3RzIChlZy4gZXhwYW5kbyBwcm9wZXJ0aWVzKVxuLy9cdDYuIFByb3ZpZGUgYSBjbGVhciBwYXRoIGZvciBpbXBsZW1lbnRhdGlvbiB1cGdyYWRlIHRvIFdlYWtNYXAgaW4gMjAxNFxuXG52YXIgcmJyYWNlID0gL14oPzpcXHtbXFx3XFxXXSpcXH18XFxbW1xcd1xcV10qXFxdKSQvLFxuXHRybXVsdGlEYXNoID0gLyhbQS1aXSkvZztcblxuZnVuY3Rpb24gZGF0YUF0dHIoIGVsZW0sIGtleSwgZGF0YSApIHtcblx0dmFyIG5hbWU7XG5cblx0Ly8gSWYgbm90aGluZyB3YXMgZm91bmQgaW50ZXJuYWxseSwgdHJ5IHRvIGZldGNoIGFueVxuXHQvLyBkYXRhIGZyb20gdGhlIEhUTUw1IGRhdGEtKiBhdHRyaWJ1dGVcblx0aWYgKCBkYXRhID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRuYW1lID0gXCJkYXRhLVwiICsga2V5LnJlcGxhY2UoIHJtdWx0aURhc2gsIFwiLSQxXCIgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdGRhdGEgPSBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApO1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGRhdGEgPSBkYXRhID09PSBcInRydWVcIiA/IHRydWUgOlxuXHRcdFx0XHRcdGRhdGEgPT09IFwiZmFsc2VcIiA/IGZhbHNlIDpcblx0XHRcdFx0XHRkYXRhID09PSBcIm51bGxcIiA/IG51bGwgOlxuXHRcdFx0XHRcdC8vIE9ubHkgY29udmVydCB0byBhIG51bWJlciBpZiBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgc3RyaW5nXG5cdFx0XHRcdFx0K2RhdGEgKyBcIlwiID09PSBkYXRhID8gK2RhdGEgOlxuXHRcdFx0XHRcdHJicmFjZS50ZXN0KCBkYXRhICkgPyBqUXVlcnkucGFyc2VKU09OKCBkYXRhICkgOlxuXHRcdFx0XHRcdGRhdGE7XG5cdFx0XHR9IGNhdGNoKCBlICkge31cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIHNldCB0aGUgZGF0YSBzbyBpdCBpc24ndCBjaGFuZ2VkIGxhdGVyXG5cdFx0XHRkYXRhX3VzZXIuc2V0KCBlbGVtLCBrZXksIGRhdGEgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGRhdGE7XG59XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRoYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGF0YV91c2VyLmhhc0RhdGEoIGVsZW0gKSB8fCBkYXRhX3ByaXYuaGFzRGF0YSggZWxlbSApO1xuXHR9LFxuXG5cdGRhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkge1xuXHRcdHJldHVybiBkYXRhX3VzZXIuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YV91c2VyLnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9LFxuXG5cdC8vIFRPRE86IE5vdyB0aGF0IGFsbCBjYWxscyB0byBfZGF0YSBhbmQgX3JlbW92ZURhdGEgaGF2ZSBiZWVuIHJlcGxhY2VkXG5cdC8vIHdpdGggZGlyZWN0IGNhbGxzIHRvIGRhdGFfcHJpdiBtZXRob2RzLCB0aGVzZSBjYW4gYmUgZGVwcmVjYXRlZC5cblx0X2RhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkge1xuXHRcdHJldHVybiBkYXRhX3ByaXYuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0X3JlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdGRhdGFfcHJpdi5yZW1vdmUoIGVsZW0sIG5hbWUgKTtcblx0fVxufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRkYXRhOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHR2YXIgaSwgbmFtZSwgZGF0YSxcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRhdHRycyA9IGVsZW0gJiYgZWxlbS5hdHRyaWJ1dGVzO1xuXG5cdFx0Ly8gR2V0cyBhbGwgdmFsdWVzXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGlmICggdGhpcy5sZW5ndGggKSB7XG5cdFx0XHRcdGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCBlbGVtICk7XG5cblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICFkYXRhX3ByaXYuZ2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiICkgKSB7XG5cdFx0XHRcdFx0aSA9IGF0dHJzLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUxMStcblx0XHRcdFx0XHRcdC8vIFRoZSBhdHRycyBlbGVtZW50cyBjYW4gYmUgbnVsbCAoIzE0ODk0KVxuXHRcdFx0XHRcdFx0aWYgKCBhdHRyc1sgaSBdICkge1xuXHRcdFx0XHRcdFx0XHRuYW1lID0gYXR0cnNbIGkgXS5uYW1lO1xuXHRcdFx0XHRcdFx0XHRpZiAoIG5hbWUuaW5kZXhPZiggXCJkYXRhLVwiICkgPT09IDAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUuc2xpY2UoNSkgKTtcblx0XHRcdFx0XHRcdFx0XHRkYXRhQXR0ciggZWxlbSwgbmFtZSwgZGF0YVsgbmFtZSBdICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZGF0YV9wcml2LnNldCggZWxlbSwgXCJoYXNEYXRhQXR0cnNcIiwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH1cblxuXHRcdC8vIFNldHMgbXVsdGlwbGUgdmFsdWVzXG5cdFx0aWYgKCB0eXBlb2Yga2V5ID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF0YV91c2VyLnNldCggdGhpcywga2V5ICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZGF0YSxcblx0XHRcdFx0Y2FtZWxLZXkgPSBqUXVlcnkuY2FtZWxDYXNlKCBrZXkgKTtcblxuXHRcdFx0Ly8gVGhlIGNhbGxpbmcgalF1ZXJ5IG9iamVjdCAoZWxlbWVudCBtYXRjaGVzKSBpcyBub3QgZW1wdHlcblx0XHRcdC8vIChhbmQgdGhlcmVmb3JlIGhhcyBhbiBlbGVtZW50IGFwcGVhcnMgYXQgdGhpc1sgMCBdKSBhbmQgdGhlXG5cdFx0XHQvLyBgdmFsdWVgIHBhcmFtZXRlciB3YXMgbm90IHVuZGVmaW5lZC4gQW4gZW1wdHkgalF1ZXJ5IG9iamVjdFxuXHRcdFx0Ly8gd2lsbCByZXN1bHQgaW4gYHVuZGVmaW5lZGAgZm9yIGVsZW0gPSB0aGlzWyAwIF0gd2hpY2ggd2lsbFxuXHRcdFx0Ly8gdGhyb3cgYW4gZXhjZXB0aW9uIGlmIGFuIGF0dGVtcHQgdG8gcmVhZCBhIGRhdGEgY2FjaGUgaXMgbWFkZS5cblx0XHRcdGlmICggZWxlbSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlXG5cdFx0XHRcdC8vIHdpdGggdGhlIGtleSBhcy1pc1xuXHRcdFx0XHRkYXRhID0gZGF0YV91c2VyLmdldCggZWxlbSwga2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHQvLyB3aXRoIHRoZSBrZXkgY2FtZWxpemVkXG5cdFx0XHRcdGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCBlbGVtLCBjYW1lbEtleSApO1xuXHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gXCJkaXNjb3ZlclwiIHRoZSBkYXRhIGluXG5cdFx0XHRcdC8vIEhUTUw1IGN1c3RvbSBkYXRhLSogYXR0cnNcblx0XHRcdFx0ZGF0YSA9IGRhdGFBdHRyKCBlbGVtLCBjYW1lbEtleSwgdW5kZWZpbmVkICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gV2UgdHJpZWQgcmVhbGx5IGhhcmQsIGJ1dCB0aGUgZGF0YSBkb2Vzbid0IGV4aXN0LlxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCB0aGUgZGF0YS4uLlxuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHQvLyBGaXJzdCwgYXR0ZW1wdCB0byBzdG9yZSBhIGNvcHkgb3IgcmVmZXJlbmNlIG9mIGFueVxuXHRcdFx0XHQvLyBkYXRhIHRoYXQgbWlnaHQndmUgYmVlbiBzdG9yZSB3aXRoIGEgY2FtZWxDYXNlZCBrZXkuXG5cdFx0XHRcdHZhciBkYXRhID0gZGF0YV91c2VyLmdldCggdGhpcywgY2FtZWxLZXkgKTtcblxuXHRcdFx0XHQvLyBGb3IgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZSBpbnRlcm9wLCB3ZSBoYXZlIHRvXG5cdFx0XHRcdC8vIHN0b3JlIHByb3BlcnR5IG5hbWVzIHdpdGggZGFzaGVzIGluIGEgY2FtZWxDYXNlIGZvcm0uXG5cdFx0XHRcdC8vIFRoaXMgbWlnaHQgbm90IGFwcGx5IHRvIGFsbCBwcm9wZXJ0aWVzLi4uKlxuXHRcdFx0XHRkYXRhX3VzZXIuc2V0KCB0aGlzLCBjYW1lbEtleSwgdmFsdWUgKTtcblxuXHRcdFx0XHQvLyAqLi4uIEluIHRoZSBjYXNlIG9mIHByb3BlcnRpZXMgdGhhdCBtaWdodCBfYWN0dWFsbHlfXG5cdFx0XHRcdC8vIGhhdmUgZGFzaGVzLCB3ZSBuZWVkIHRvIGFsc28gc3RvcmUgYSBjb3B5IG9mIHRoYXRcblx0XHRcdFx0Ly8gdW5jaGFuZ2VkIHByb3BlcnR5LlxuXHRcdFx0XHRpZiAoIGtleS5pbmRleE9mKFwiLVwiKSAhPT0gLTEgJiYgZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdGRhdGFfdXNlci5zZXQoIHRoaXMsIGtleSwgdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxLCBudWxsLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGtleSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0ZGF0YV91c2VyLnJlbW92ZSggdGhpcywga2V5ICk7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5cbmpRdWVyeS5leHRlbmQoe1xuXHRxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHF1ZXVlO1xuXG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0dHlwZSA9ICggdHlwZSB8fCBcImZ4XCIgKSArIFwicXVldWVcIjtcblx0XHRcdHF1ZXVlID0gZGF0YV9wcml2LmdldCggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHQvLyBTcGVlZCB1cCBkZXF1ZXVlIGJ5IGdldHRpbmcgb3V0IHF1aWNrbHkgaWYgdGhpcyBpcyBqdXN0IGEgbG9va3VwXG5cdFx0XHRpZiAoIGRhdGEgKSB7XG5cdFx0XHRcdGlmICggIXF1ZXVlIHx8IGpRdWVyeS5pc0FycmF5KCBkYXRhICkgKSB7XG5cdFx0XHRcdFx0cXVldWUgPSBkYXRhX3ByaXYuYWNjZXNzKCBlbGVtLCB0eXBlLCBqUXVlcnkubWFrZUFycmF5KGRhdGEpICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cXVldWUucHVzaCggZGF0YSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcXVldWUgfHwgW107XG5cdFx0fVxuXHR9LFxuXG5cdGRlcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggZWxlbSwgdHlwZSApLFxuXHRcdFx0c3RhcnRMZW5ndGggPSBxdWV1ZS5sZW5ndGgsXG5cdFx0XHRmbiA9IHF1ZXVlLnNoaWZ0KCksXG5cdFx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgdHlwZSApLFxuXHRcdFx0bmV4dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApO1xuXHRcdFx0fTtcblxuXHRcdC8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWxcblx0XHRpZiAoIGZuID09PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKTtcblx0XHRcdHN0YXJ0TGVuZ3RoLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblxuXHRcdFx0Ly8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZ1xuXHRcdFx0Ly8gYXV0b21hdGljYWxseSBkZXF1ZXVlZFxuXHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgKSB7XG5cdFx0XHRcdHF1ZXVlLnVuc2hpZnQoIFwiaW5wcm9ncmVzc1wiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENsZWFyIHVwIHRoZSBsYXN0IHF1ZXVlIHN0b3AgZnVuY3Rpb25cblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0Zm4uY2FsbCggZWxlbSwgbmV4dCwgaG9va3MgKTtcblx0XHR9XG5cblx0XHRpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gTm90IHB1YmxpYyAtIGdlbmVyYXRlIGEgcXVldWVIb29rcyBvYmplY3QsIG9yIHJldHVybiB0aGUgY3VycmVudCBvbmVcblx0X3F1ZXVlSG9va3M6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHZhciBrZXkgPSB0eXBlICsgXCJxdWV1ZUhvb2tzXCI7XG5cdFx0cmV0dXJuIGRhdGFfcHJpdi5nZXQoIGVsZW0sIGtleSApIHx8IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIGtleSwge1xuXHRcdFx0ZW1wdHk6IGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKS5hZGQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRhdGFfcHJpdi5yZW1vdmUoIGVsZW0sIFsgdHlwZSArIFwicXVldWVcIiwga2V5IF0gKTtcblx0XHRcdH0pXG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0cXVldWU6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBzZXR0ZXIgPSAyO1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGRhdGEgPSB0eXBlO1xuXHRcdFx0dHlwZSA9IFwiZnhcIjtcblx0XHRcdHNldHRlci0tO1xuXHRcdH1cblxuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCA8IHNldHRlciApIHtcblx0XHRcdHJldHVybiBqUXVlcnkucXVldWUoIHRoaXNbMF0sIHR5cGUgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdHRoaXMgOlxuXHRcdFx0dGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIGRhdGEgKTtcblxuXHRcdFx0XHQvLyBFbnN1cmUgYSBob29rcyBmb3IgdGhpcyBxdWV1ZVxuXHRcdFx0XHRqUXVlcnkuX3F1ZXVlSG9va3MoIHRoaXMsIHR5cGUgKTtcblxuXHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiAmJiBxdWV1ZVswXSAhPT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdH0sXG5cdGRlcXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdH0pO1xuXHR9LFxuXHRjbGVhclF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdH0sXG5cdC8vIEdldCBhIHByb21pc2UgcmVzb2x2ZWQgd2hlbiBxdWV1ZXMgb2YgYSBjZXJ0YWluIHR5cGVcblx0Ly8gYXJlIGVtcHRpZWQgKGZ4IGlzIHRoZSB0eXBlIGJ5IGRlZmF1bHQpXG5cdHByb21pc2U6IGZ1bmN0aW9uKCB0eXBlLCBvYmogKSB7XG5cdFx0dmFyIHRtcCxcblx0XHRcdGNvdW50ID0gMSxcblx0XHRcdGRlZmVyID0galF1ZXJ5LkRlZmVycmVkKCksXG5cdFx0XHRlbGVtZW50cyA9IHRoaXMsXG5cdFx0XHRpID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRyZXNvbHZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggISggLS1jb3VudCApICkge1xuXHRcdFx0XHRcdGRlZmVyLnJlc29sdmVXaXRoKCBlbGVtZW50cywgWyBlbGVtZW50cyBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0b2JqID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0dG1wID0gZGF0YV9wcml2LmdldCggZWxlbWVudHNbIGkgXSwgdHlwZSArIFwicXVldWVIb29rc1wiICk7XG5cdFx0XHRpZiAoIHRtcCAmJiB0bXAuZW1wdHkgKSB7XG5cdFx0XHRcdGNvdW50Kys7XG5cdFx0XHRcdHRtcC5lbXB0eS5hZGQoIHJlc29sdmUgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmVzb2x2ZSgpO1xuXHRcdHJldHVybiBkZWZlci5wcm9taXNlKCBvYmogKTtcblx0fVxufSk7XG52YXIgcG51bSA9ICgvWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLykuc291cmNlO1xuXG52YXIgY3NzRXhwYW5kID0gWyBcIlRvcFwiLCBcIlJpZ2h0XCIsIFwiQm90dG9tXCIsIFwiTGVmdFwiIF07XG5cbnZhciBpc0hpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtLCBlbCApIHtcblx0XHQvLyBpc0hpZGRlbiBtaWdodCBiZSBjYWxsZWQgZnJvbSBqUXVlcnkjZmlsdGVyIGZ1bmN0aW9uO1xuXHRcdC8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudFxuXHRcdGVsZW0gPSBlbCB8fCBlbGVtO1xuXHRcdHJldHVybiBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApID09PSBcIm5vbmVcIiB8fCAhalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblx0fTtcblxudmFyIHJjaGVja2FibGVUeXBlID0gKC9eKD86Y2hlY2tib3h8cmFkaW8pJC9pKTtcblxuXG5cbihmdW5jdGlvbigpIHtcblx0dmFyIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuXHRcdGRpdiA9IGZyYWdtZW50LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKSxcblx0XHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXG5cdC8vIFN1cHBvcnQ6IFNhZmFyaTw9NS4xXG5cdC8vIENoZWNrIHN0YXRlIGxvc3QgaWYgdGhlIG5hbWUgaXMgc2V0ICgjMTEyMTcpXG5cdC8vIFN1cHBvcnQ6IFdpbmRvd3MgV2ViIEFwcHMgKFdXQSlcblx0Ly8gYG5hbWVgIGFuZCBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpXG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwicmFkaW9cIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwiY2hlY2tlZFwiLCBcImNoZWNrZWRcIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcInRcIiApO1xuXG5cdGRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKTtcblxuXHQvLyBTdXBwb3J0OiBTYWZhcmk8PTUuMSwgQW5kcm9pZDw0LjJcblx0Ly8gT2xkZXIgV2ViS2l0IGRvZXNuJ3QgY2xvbmUgY2hlY2tlZCBzdGF0ZSBjb3JyZWN0bHkgaW4gZnJhZ21lbnRzXG5cdHN1cHBvcnQuY2hlY2tDbG9uZSA9IGRpdi5jbG9uZU5vZGUoIHRydWUgKS5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuY2hlY2tlZDtcblxuXHQvLyBTdXBwb3J0OiBJRTw9MTErXG5cdC8vIE1ha2Ugc3VyZSB0ZXh0YXJlYSAoYW5kIGNoZWNrYm94KSBkZWZhdWx0VmFsdWUgaXMgcHJvcGVybHkgY2xvbmVkXG5cdGRpdi5pbm5lckhUTUwgPSBcIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIjtcblx0c3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCA9ICEhZGl2LmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7XG59KSgpO1xudmFyIHN0cnVuZGVmaW5lZCA9IHR5cGVvZiB1bmRlZmluZWQ7XG5cblxuXG5zdXBwb3J0LmZvY3VzaW5CdWJibGVzID0gXCJvbmZvY3VzaW5cIiBpbiB3aW5kb3c7XG5cblxudmFyXG5cdHJrZXlFdmVudCA9IC9ea2V5Lyxcblx0cm1vdXNlRXZlbnQgPSAvXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLyxcblx0cmZvY3VzTW9ycGggPSAvXig/OmZvY3VzaW5mb2N1c3xmb2N1c291dGJsdXIpJC8sXG5cdHJ0eXBlbmFtZXNwYWNlID0gL14oW14uXSopKD86XFwuKC4rKXwpJC87XG5cbmZ1bmN0aW9uIHJldHVyblRydWUoKSB7XG5cdHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZXR1cm5GYWxzZSgpIHtcblx0cmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBzYWZlQWN0aXZlRWxlbWVudCgpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0fSBjYXRjaCAoIGVyciApIHsgfVxufVxuXG4vKlxuICogSGVscGVyIGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZXZlbnRzIC0tIG5vdCBwYXJ0IG9mIHRoZSBwdWJsaWMgaW50ZXJmYWNlLlxuICogUHJvcHMgdG8gRGVhbiBFZHdhcmRzJyBhZGRFdmVudCBsaWJyYXJ5IGZvciBtYW55IG9mIHRoZSBpZGVhcy5cbiAqL1xualF1ZXJ5LmV2ZW50ID0ge1xuXG5cdGdsb2JhbDoge30sXG5cblx0YWRkOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIGRhdGEsIHNlbGVjdG9yICkge1xuXG5cdFx0dmFyIGhhbmRsZU9iakluLCBldmVudEhhbmRsZSwgdG1wLFxuXHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRlbGVtRGF0YSA9IGRhdGFfcHJpdi5nZXQoIGVsZW0gKTtcblxuXHRcdC8vIERvbid0IGF0dGFjaCBldmVudHMgdG8gbm9EYXRhIG9yIHRleHQvY29tbWVudCBub2RlcyAoYnV0IGFsbG93IHBsYWluIG9iamVjdHMpXG5cdFx0aWYgKCAhZWxlbURhdGEgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGVyIGNhbiBwYXNzIGluIGFuIG9iamVjdCBvZiBjdXN0b20gZGF0YSBpbiBsaWV1IG9mIHRoZSBoYW5kbGVyXG5cdFx0aWYgKCBoYW5kbGVyLmhhbmRsZXIgKSB7XG5cdFx0XHRoYW5kbGVPYmpJbiA9IGhhbmRsZXI7XG5cdFx0XHRoYW5kbGVyID0gaGFuZGxlT2JqSW4uaGFuZGxlcjtcblx0XHRcdHNlbGVjdG9yID0gaGFuZGxlT2JqSW4uc2VsZWN0b3I7XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgdGhlIGhhbmRsZXIgaGFzIGEgdW5pcXVlIElELCB1c2VkIHRvIGZpbmQvcmVtb3ZlIGl0IGxhdGVyXG5cdFx0aWYgKCAhaGFuZGxlci5ndWlkICkge1xuXHRcdFx0aGFuZGxlci5ndWlkID0galF1ZXJ5Lmd1aWQrKztcblx0XHR9XG5cblx0XHQvLyBJbml0IHRoZSBlbGVtZW50J3MgZXZlbnQgc3RydWN0dXJlIGFuZCBtYWluIGhhbmRsZXIsIGlmIHRoaXMgaXMgdGhlIGZpcnN0XG5cdFx0aWYgKCAhKGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cykgKSB7XG5cdFx0XHRldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgPSB7fTtcblx0XHR9XG5cdFx0aWYgKCAhKGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlKSApIHtcblx0XHRcdGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlID0gZnVuY3Rpb24oIGUgKSB7XG5cdFx0XHRcdC8vIERpc2NhcmQgdGhlIHNlY29uZCBldmVudCBvZiBhIGpRdWVyeS5ldmVudC50cmlnZ2VyKCkgYW5kXG5cdFx0XHRcdC8vIHdoZW4gYW4gZXZlbnQgaXMgY2FsbGVkIGFmdGVyIGEgcGFnZSBoYXMgdW5sb2FkZWRcblx0XHRcdFx0cmV0dXJuIHR5cGVvZiBqUXVlcnkgIT09IHN0cnVuZGVmaW5lZCAmJiBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUgP1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5kaXNwYXRjaC5hcHBseSggZWxlbSwgYXJndW1lbnRzICkgOiB1bmRlZmluZWQ7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2Vcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbdF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsxXTtcblx0XHRcdG5hbWVzcGFjZXMgPSAoIHRtcFsyXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG5cdFx0XHQvLyBUaGVyZSAqbXVzdCogYmUgYSB0eXBlLCBubyBhdHRhY2hpbmcgbmFtZXNwYWNlLW9ubHkgaGFuZGxlcnNcblx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGVcblx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblxuXHRcdFx0Ly8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzXG5cdFx0XHRoYW5kbGVPYmogPSBqUXVlcnkuZXh0ZW5kKHtcblx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0b3JpZ1R5cGU6IG9yaWdUeXBlLFxuXHRcdFx0XHRkYXRhOiBkYXRhLFxuXHRcdFx0XHRoYW5kbGVyOiBoYW5kbGVyLFxuXHRcdFx0XHRndWlkOiBoYW5kbGVyLmd1aWQsXG5cdFx0XHRcdHNlbGVjdG9yOiBzZWxlY3Rvcixcblx0XHRcdFx0bmVlZHNDb250ZXh0OiBzZWxlY3RvciAmJiBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3IgKSxcblx0XHRcdFx0bmFtZXNwYWNlOiBuYW1lc3BhY2VzLmpvaW4oXCIuXCIpXG5cdFx0XHR9LCBoYW5kbGVPYmpJbiApO1xuXG5cdFx0XHQvLyBJbml0IHRoZSBldmVudCBoYW5kbGVyIHF1ZXVlIGlmIHdlJ3JlIHRoZSBmaXJzdFxuXHRcdFx0aWYgKCAhKGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0pICkge1xuXHRcdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdID0gW107XG5cdFx0XHRcdGhhbmRsZXJzLmRlbGVnYXRlQ291bnQgPSAwO1xuXG5cdFx0XHRcdC8vIE9ubHkgdXNlIGFkZEV2ZW50TGlzdGVuZXIgaWYgdGhlIHNwZWNpYWwgZXZlbnRzIGhhbmRsZXIgcmV0dXJucyBmYWxzZVxuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnNldHVwIHx8IHNwZWNpYWwuc2V0dXAuY2FsbCggZWxlbSwgZGF0YSwgbmFtZXNwYWNlcywgZXZlbnRIYW5kbGUgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIGV2ZW50SGFuZGxlLCBmYWxzZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHNwZWNpYWwuYWRkICkge1xuXHRcdFx0XHRzcGVjaWFsLmFkZC5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblxuXHRcdFx0XHRpZiAoICFoYW5kbGVPYmouaGFuZGxlci5ndWlkICkge1xuXHRcdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyLmd1aWQgPSBoYW5kbGVyLmd1aWQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHRvIHRoZSBlbGVtZW50J3MgaGFuZGxlciBsaXN0LCBkZWxlZ2F0ZXMgaW4gZnJvbnRcblx0XHRcdGlmICggc2VsZWN0b3IgKSB7XG5cdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaGFuZGxlcnMuZGVsZWdhdGVDb3VudCsrLCAwLCBoYW5kbGVPYmogKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhhbmRsZXJzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBLZWVwIHRyYWNrIG9mIHdoaWNoIGV2ZW50cyBoYXZlIGV2ZXIgYmVlbiB1c2VkLCBmb3IgZXZlbnQgb3B0aW1pemF0aW9uXG5cdFx0XHRqUXVlcnkuZXZlbnQuZ2xvYmFsWyB0eXBlIF0gPSB0cnVlO1xuXHRcdH1cblxuXHR9LFxuXG5cdC8vIERldGFjaCBhbiBldmVudCBvciBzZXQgb2YgZXZlbnRzIGZyb20gYW4gZWxlbWVudFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgc2VsZWN0b3IsIG1hcHBlZFR5cGVzICkge1xuXG5cdFx0dmFyIGosIG9yaWdDb3VudCwgdG1wLFxuXHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRlbGVtRGF0YSA9IGRhdGFfcHJpdi5oYXNEYXRhKCBlbGVtICkgJiYgZGF0YV9wcml2LmdldCggZWxlbSApO1xuXG5cdFx0aWYgKCAhZWxlbURhdGEgfHwgIShldmVudHMgPSBlbGVtRGF0YS5ldmVudHMpICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE9uY2UgZm9yIGVhY2ggdHlwZS5uYW1lc3BhY2UgaW4gdHlwZXM7IHR5cGUgbWF5IGJlIG9taXR0ZWRcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbdF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsxXTtcblx0XHRcdG5hbWVzcGFjZXMgPSAoIHRtcFsyXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG5cdFx0XHQvLyBVbmJpbmQgYWxsIGV2ZW50cyAob24gdGhpcyBuYW1lc3BhY2UsIGlmIHByb3ZpZGVkKSBmb3IgdGhlIGVsZW1lbnRcblx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKyB0eXBlc1sgdCBdLCBoYW5kbGVyLCBzZWxlY3RvciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gfHwgW107XG5cdFx0XHR0bXAgPSB0bXBbMl0gJiYgbmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpICsgXCIoXFxcXC58JClcIiApO1xuXG5cdFx0XHQvLyBSZW1vdmUgbWF0Y2hpbmcgZXZlbnRzXG5cdFx0XHRvcmlnQ291bnQgPSBqID0gaGFuZGxlcnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBqIF07XG5cblx0XHRcdFx0aWYgKCAoIG1hcHBlZFR5cGVzIHx8IG9yaWdUeXBlID09PSBoYW5kbGVPYmoub3JpZ1R5cGUgKSAmJlxuXHRcdFx0XHRcdCggIWhhbmRsZXIgfHwgaGFuZGxlci5ndWlkID09PSBoYW5kbGVPYmouZ3VpZCApICYmXG5cdFx0XHRcdFx0KCAhdG1wIHx8IHRtcC50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSAmJlxuXHRcdFx0XHRcdCggIXNlbGVjdG9yIHx8IHNlbGVjdG9yID09PSBoYW5kbGVPYmouc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IFwiKipcIiAmJiBoYW5kbGVPYmouc2VsZWN0b3IgKSApIHtcblx0XHRcdFx0XHRoYW5kbGVycy5zcGxpY2UoIGosIDEgKTtcblxuXHRcdFx0XHRcdGlmICggaGFuZGxlT2JqLnNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudC0tO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIHNwZWNpYWwucmVtb3ZlICkge1xuXHRcdFx0XHRcdFx0c3BlY2lhbC5yZW1vdmUuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlbW92ZSBnZW5lcmljIGV2ZW50IGhhbmRsZXIgaWYgd2UgcmVtb3ZlZCBzb21ldGhpbmcgYW5kIG5vIG1vcmUgaGFuZGxlcnMgZXhpc3Rcblx0XHRcdC8vIChhdm9pZHMgcG90ZW50aWFsIGZvciBlbmRsZXNzIHJlY3Vyc2lvbiBkdXJpbmcgcmVtb3ZhbCBvZiBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzKVxuXHRcdFx0aWYgKCBvcmlnQ291bnQgJiYgIWhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0aWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fCBzcGVjaWFsLnRlYXJkb3duLmNhbGwoIGVsZW0sIG5hbWVzcGFjZXMsIGVsZW1EYXRhLmhhbmRsZSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGVsZW1EYXRhLmhhbmRsZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGVsZXRlIGV2ZW50c1sgdHlwZSBdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSB0aGUgZXhwYW5kbyBpZiBpdCdzIG5vIGxvbmdlciB1c2VkXG5cdFx0aWYgKCBqUXVlcnkuaXNFbXB0eU9iamVjdCggZXZlbnRzICkgKSB7XG5cdFx0XHRkZWxldGUgZWxlbURhdGEuaGFuZGxlO1xuXHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgXCJldmVudHNcIiApO1xuXHRcdH1cblx0fSxcblxuXHR0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQsIGRhdGEsIGVsZW0sIG9ubHlIYW5kbGVycyApIHtcblxuXHRcdHZhciBpLCBjdXIsIHRtcCwgYnViYmxlVHlwZSwgb250eXBlLCBoYW5kbGUsIHNwZWNpYWwsXG5cdFx0XHRldmVudFBhdGggPSBbIGVsZW0gfHwgZG9jdW1lbnQgXSxcblx0XHRcdHR5cGUgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwidHlwZVwiICkgPyBldmVudC50eXBlIDogZXZlbnQsXG5cdFx0XHRuYW1lc3BhY2VzID0gaGFzT3duLmNhbGwoIGV2ZW50LCBcIm5hbWVzcGFjZVwiICkgPyBldmVudC5uYW1lc3BhY2Uuc3BsaXQoXCIuXCIpIDogW107XG5cblx0XHRjdXIgPSB0bXAgPSBlbGVtID0gZWxlbSB8fCBkb2N1bWVudDtcblxuXHRcdC8vIERvbid0IGRvIGV2ZW50cyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gZm9jdXMvYmx1ciBtb3JwaHMgdG8gZm9jdXNpbi9vdXQ7IGVuc3VyZSB3ZSdyZSBub3QgZmlyaW5nIHRoZW0gcmlnaHQgbm93XG5cdFx0aWYgKCByZm9jdXNNb3JwaC50ZXN0KCB0eXBlICsgalF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggdHlwZS5pbmRleE9mKFwiLlwiKSA+PSAwICkge1xuXHRcdFx0Ly8gTmFtZXNwYWNlZCB0cmlnZ2VyOyBjcmVhdGUgYSByZWdleHAgdG8gbWF0Y2ggZXZlbnQgdHlwZSBpbiBoYW5kbGUoKVxuXHRcdFx0bmFtZXNwYWNlcyA9IHR5cGUuc3BsaXQoXCIuXCIpO1xuXHRcdFx0dHlwZSA9IG5hbWVzcGFjZXMuc2hpZnQoKTtcblx0XHRcdG5hbWVzcGFjZXMuc29ydCgpO1xuXHRcdH1cblx0XHRvbnR5cGUgPSB0eXBlLmluZGV4T2YoXCI6XCIpIDwgMCAmJiBcIm9uXCIgKyB0eXBlO1xuXG5cdFx0Ly8gQ2FsbGVyIGNhbiBwYXNzIGluIGEgalF1ZXJ5LkV2ZW50IG9iamVjdCwgT2JqZWN0LCBvciBqdXN0IGFuIGV2ZW50IHR5cGUgc3RyaW5nXG5cdFx0ZXZlbnQgPSBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/XG5cdFx0XHRldmVudCA6XG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCB0eXBlLCB0eXBlb2YgZXZlbnQgPT09IFwib2JqZWN0XCIgJiYgZXZlbnQgKTtcblxuXHRcdC8vIFRyaWdnZXIgYml0bWFzazogJiAxIGZvciBuYXRpdmUgaGFuZGxlcnM7ICYgMiBmb3IgalF1ZXJ5IChhbHdheXMgdHJ1ZSlcblx0XHRldmVudC5pc1RyaWdnZXIgPSBvbmx5SGFuZGxlcnMgPyAyIDogMztcblx0XHRldmVudC5uYW1lc3BhY2UgPSBuYW1lc3BhY2VzLmpvaW4oXCIuXCIpO1xuXHRcdGV2ZW50Lm5hbWVzcGFjZV9yZSA9IGV2ZW50Lm5hbWVzcGFjZSA/XG5cdFx0XHRuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikgKyBcIihcXFxcLnwkKVwiICkgOlxuXHRcdFx0bnVsbDtcblxuXHRcdC8vIENsZWFuIHVwIHRoZSBldmVudCBpbiBjYXNlIGl0IGlzIGJlaW5nIHJldXNlZFxuXHRcdGV2ZW50LnJlc3VsdCA9IHVuZGVmaW5lZDtcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBlbGVtO1xuXHRcdH1cblxuXHRcdC8vIENsb25lIGFueSBpbmNvbWluZyBkYXRhIGFuZCBwcmVwZW5kIHRoZSBldmVudCwgY3JlYXRpbmcgdGhlIGhhbmRsZXIgYXJnIGxpc3Rcblx0XHRkYXRhID0gZGF0YSA9PSBudWxsID9cblx0XHRcdFsgZXZlbnQgXSA6XG5cdFx0XHRqUXVlcnkubWFrZUFycmF5KCBkYXRhLCBbIGV2ZW50IF0gKTtcblxuXHRcdC8vIEFsbG93IHNwZWNpYWwgZXZlbnRzIHRvIGRyYXcgb3V0c2lkZSB0aGUgbGluZXNcblx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgc3BlY2lhbC50cmlnZ2VyICYmIHNwZWNpYWwudHJpZ2dlci5hcHBseSggZWxlbSwgZGF0YSApID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgZXZlbnQgcHJvcGFnYXRpb24gcGF0aCBpbiBhZHZhbmNlLCBwZXIgVzNDIGV2ZW50cyBzcGVjICgjOTk1MSlcblx0XHQvLyBCdWJibGUgdXAgdG8gZG9jdW1lbnQsIHRoZW4gdG8gd2luZG93OyB3YXRjaCBmb3IgYSBnbG9iYWwgb3duZXJEb2N1bWVudCB2YXIgKCM5NzI0KVxuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhc3BlY2lhbC5ub0J1YmJsZSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdGJ1YmJsZVR5cGUgPSBzcGVjaWFsLmRlbGVnYXRlVHlwZSB8fCB0eXBlO1xuXHRcdFx0aWYgKCAhcmZvY3VzTW9ycGgudGVzdCggYnViYmxlVHlwZSArIHR5cGUgKSApIHtcblx0XHRcdFx0Y3VyID0gY3VyLnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFx0XHRmb3IgKCA7IGN1cjsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCBjdXIgKTtcblx0XHRcdFx0dG1wID0gY3VyO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPbmx5IGFkZCB3aW5kb3cgaWYgd2UgZ290IHRvIGRvY3VtZW50IChlLmcuLCBub3QgcGxhaW4gb2JqIG9yIGRldGFjaGVkIERPTSlcblx0XHRcdGlmICggdG1wID09PSAoZWxlbS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50KSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIHRtcC5kZWZhdWx0VmlldyB8fCB0bXAucGFyZW50V2luZG93IHx8IHdpbmRvdyApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZpcmUgaGFuZGxlcnMgb24gdGhlIGV2ZW50IHBhdGhcblx0XHRpID0gMDtcblx0XHR3aGlsZSAoIChjdXIgPSBldmVudFBhdGhbaSsrXSkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdGV2ZW50LnR5cGUgPSBpID4gMSA/XG5cdFx0XHRcdGJ1YmJsZVR5cGUgOlxuXHRcdFx0XHRzcGVjaWFsLmJpbmRUeXBlIHx8IHR5cGU7XG5cblx0XHRcdC8vIGpRdWVyeSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSAoIGRhdGFfcHJpdi5nZXQoIGN1ciwgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSAmJiBkYXRhX3ByaXYuZ2V0KCBjdXIsIFwiaGFuZGxlXCIgKTtcblx0XHRcdGlmICggaGFuZGxlICkge1xuXHRcdFx0XHRoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBOYXRpdmUgaGFuZGxlclxuXHRcdFx0aGFuZGxlID0gb250eXBlICYmIGN1clsgb250eXBlIF07XG5cdFx0XHRpZiAoIGhhbmRsZSAmJiBoYW5kbGUuYXBwbHkgJiYgalF1ZXJ5LmFjY2VwdERhdGEoIGN1ciApICkge1xuXHRcdFx0XHRldmVudC5yZXN1bHQgPSBoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0XHRpZiAoIGV2ZW50LnJlc3VsdCA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRldmVudC50eXBlID0gdHlwZTtcblxuXHRcdC8vIElmIG5vYm9keSBwcmV2ZW50ZWQgdGhlIGRlZmF1bHQgYWN0aW9uLCBkbyBpdCBub3dcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgIWV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuXG5cdFx0XHRpZiAoICghc3BlY2lhbC5fZGVmYXVsdCB8fCBzcGVjaWFsLl9kZWZhdWx0LmFwcGx5KCBldmVudFBhdGgucG9wKCksIGRhdGEgKSA9PT0gZmFsc2UpICYmXG5cdFx0XHRcdGpRdWVyeS5hY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cblx0XHRcdFx0Ly8gQ2FsbCBhIG5hdGl2ZSBET00gbWV0aG9kIG9uIHRoZSB0YXJnZXQgd2l0aCB0aGUgc2FtZSBuYW1lIG5hbWUgYXMgdGhlIGV2ZW50LlxuXHRcdFx0XHQvLyBEb24ndCBkbyBkZWZhdWx0IGFjdGlvbnMgb24gd2luZG93LCB0aGF0J3Mgd2hlcmUgZ2xvYmFsIHZhcmlhYmxlcyBiZSAoIzYxNzApXG5cdFx0XHRcdGlmICggb250eXBlICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBlbGVtWyB0eXBlIF0gKSAmJiAhalF1ZXJ5LmlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdFx0XHQvLyBEb24ndCByZS10cmlnZ2VyIGFuIG9uRk9PIGV2ZW50IHdoZW4gd2UgY2FsbCBpdHMgRk9PKCkgbWV0aG9kXG5cdFx0XHRcdFx0dG1wID0gZWxlbVsgb250eXBlIF07XG5cblx0XHRcdFx0XHRpZiAoIHRtcCApIHtcblx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gbnVsbDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBQcmV2ZW50IHJlLXRyaWdnZXJpbmcgb2YgdGhlIHNhbWUgZXZlbnQsIHNpbmNlIHdlIGFscmVhZHkgYnViYmxlZCBpdCBhYm92ZVxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB0eXBlO1xuXHRcdFx0XHRcdGVsZW1bIHR5cGUgXSgpO1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdFx0XHRpZiAoIHRtcCApIHtcblx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gdG1wO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdH0sXG5cblx0ZGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdC8vIE1ha2UgYSB3cml0YWJsZSBqUXVlcnkuRXZlbnQgZnJvbSB0aGUgbmF0aXZlIGV2ZW50IG9iamVjdFxuXHRcdGV2ZW50ID0galF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKTtcblxuXHRcdHZhciBpLCBqLCByZXQsIG1hdGNoZWQsIGhhbmRsZU9iaixcblx0XHRcdGhhbmRsZXJRdWV1ZSA9IFtdLFxuXHRcdFx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLFxuXHRcdFx0aGFuZGxlcnMgPSAoIGRhdGFfcHJpdi5nZXQoIHRoaXMsIFwiZXZlbnRzXCIgKSB8fCB7fSApWyBldmVudC50eXBlIF0gfHwgW10sXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGV2ZW50LnR5cGUgXSB8fCB7fTtcblxuXHRcdC8vIFVzZSB0aGUgZml4LWVkIGpRdWVyeS5FdmVudCByYXRoZXIgdGhhbiB0aGUgKHJlYWQtb25seSkgbmF0aXZlIGV2ZW50XG5cdFx0YXJnc1swXSA9IGV2ZW50O1xuXHRcdGV2ZW50LmRlbGVnYXRlVGFyZ2V0ID0gdGhpcztcblxuXHRcdC8vIENhbGwgdGhlIHByZURpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZSwgYW5kIGxldCBpdCBiYWlsIGlmIGRlc2lyZWRcblx0XHRpZiAoIHNwZWNpYWwucHJlRGlzcGF0Y2ggJiYgc3BlY2lhbC5wcmVEaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgaGFuZGxlcnNcblx0XHRoYW5kbGVyUXVldWUgPSBqUXVlcnkuZXZlbnQuaGFuZGxlcnMuY2FsbCggdGhpcywgZXZlbnQsIGhhbmRsZXJzICk7XG5cblx0XHQvLyBSdW4gZGVsZWdhdGVzIGZpcnN0OyB0aGV5IG1heSB3YW50IHRvIHN0b3AgcHJvcGFnYXRpb24gYmVuZWF0aCB1c1xuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKG1hdGNoZWQgPSBoYW5kbGVyUXVldWVbIGkrKyBdKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBtYXRjaGVkLmVsZW07XG5cblx0XHRcdGogPSAwO1xuXHRcdFx0d2hpbGUgKCAoaGFuZGxlT2JqID0gbWF0Y2hlZC5oYW5kbGVyc1sgaisrIF0pICYmICFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXG5cdFx0XHRcdC8vIFRyaWdnZXJlZCBldmVudCBtdXN0IGVpdGhlciAxKSBoYXZlIG5vIG5hbWVzcGFjZSwgb3IgMikgaGF2ZSBuYW1lc3BhY2Uocylcblx0XHRcdFx0Ly8gYSBzdWJzZXQgb3IgZXF1YWwgdG8gdGhvc2UgaW4gdGhlIGJvdW5kIGV2ZW50IChib3RoIGNhbiBoYXZlIG5vIG5hbWVzcGFjZSkuXG5cdFx0XHRcdGlmICggIWV2ZW50Lm5hbWVzcGFjZV9yZSB8fCBldmVudC5uYW1lc3BhY2VfcmUudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkge1xuXG5cdFx0XHRcdFx0ZXZlbnQuaGFuZGxlT2JqID0gaGFuZGxlT2JqO1xuXHRcdFx0XHRcdGV2ZW50LmRhdGEgPSBoYW5kbGVPYmouZGF0YTtcblxuXHRcdFx0XHRcdHJldCA9ICggKGpRdWVyeS5ldmVudC5zcGVjaWFsWyBoYW5kbGVPYmoub3JpZ1R5cGUgXSB8fCB7fSkuaGFuZGxlIHx8IGhhbmRsZU9iai5oYW5kbGVyIClcblx0XHRcdFx0XHRcdFx0LmFwcGx5KCBtYXRjaGVkLmVsZW0sIGFyZ3MgKTtcblxuXHRcdFx0XHRcdGlmICggcmV0ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChldmVudC5yZXN1bHQgPSByZXQpID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbCB0aGUgcG9zdERpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZVxuXHRcdGlmICggc3BlY2lhbC5wb3N0RGlzcGF0Y2ggKSB7XG5cdFx0XHRzcGVjaWFsLnBvc3REaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApO1xuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdH0sXG5cblx0aGFuZGxlcnM6IGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlcnMgKSB7XG5cdFx0dmFyIGksIG1hdGNoZXMsIHNlbCwgaGFuZGxlT2JqLFxuXHRcdFx0aGFuZGxlclF1ZXVlID0gW10sXG5cdFx0XHRkZWxlZ2F0ZUNvdW50ID0gaGFuZGxlcnMuZGVsZWdhdGVDb3VudCxcblx0XHRcdGN1ciA9IGV2ZW50LnRhcmdldDtcblxuXHRcdC8vIEZpbmQgZGVsZWdhdGUgaGFuZGxlcnNcblx0XHQvLyBCbGFjay1ob2xlIFNWRyA8dXNlPiBpbnN0YW5jZSB0cmVlcyAoIzEzMTgwKVxuXHRcdC8vIEF2b2lkIG5vbi1sZWZ0LWNsaWNrIGJ1YmJsaW5nIGluIEZpcmVmb3ggKCMzODYxKVxuXHRcdGlmICggZGVsZWdhdGVDb3VudCAmJiBjdXIubm9kZVR5cGUgJiYgKCFldmVudC5idXR0b24gfHwgZXZlbnQudHlwZSAhPT0gXCJjbGlja1wiKSApIHtcblxuXHRcdFx0Zm9yICggOyBjdXIgIT09IHRoaXM7IGN1ciA9IGN1ci5wYXJlbnROb2RlIHx8IHRoaXMgKSB7XG5cblx0XHRcdFx0Ly8gRG9uJ3QgcHJvY2VzcyBjbGlja3Mgb24gZGlzYWJsZWQgZWxlbWVudHMgKCM2OTExLCAjODE2NSwgIzExMzgyLCAjMTE3NjQpXG5cdFx0XHRcdGlmICggY3VyLmRpc2FibGVkICE9PSB0cnVlIHx8IGV2ZW50LnR5cGUgIT09IFwiY2xpY2tcIiApIHtcblx0XHRcdFx0XHRtYXRjaGVzID0gW107XG5cdFx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBkZWxlZ2F0ZUNvdW50OyBpKysgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVPYmogPSBoYW5kbGVyc1sgaSBdO1xuXG5cdFx0XHRcdFx0XHQvLyBEb24ndCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoIzEzMjAzKVxuXHRcdFx0XHRcdFx0c2VsID0gaGFuZGxlT2JqLnNlbGVjdG9yICsgXCIgXCI7XG5cblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlc1sgc2VsIF0gPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdFx0bWF0Y2hlc1sgc2VsIF0gPSBoYW5kbGVPYmoubmVlZHNDb250ZXh0ID9cblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkoIHNlbCwgdGhpcyApLmluZGV4KCBjdXIgKSA+PSAwIDpcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZmluZCggc2VsLCB0aGlzLCBudWxsLCBbIGN1ciBdICkubGVuZ3RoO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVzWyBzZWwgXSApIHtcblx0XHRcdFx0XHRcdFx0bWF0Y2hlcy5wdXNoKCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBtYXRjaGVzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRcdGhhbmRsZXJRdWV1ZS5wdXNoKHsgZWxlbTogY3VyLCBoYW5kbGVyczogbWF0Y2hlcyB9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBZGQgdGhlIHJlbWFpbmluZyAoZGlyZWN0bHktYm91bmQpIGhhbmRsZXJzXG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50IDwgaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goeyBlbGVtOiB0aGlzLCBoYW5kbGVyczogaGFuZGxlcnMuc2xpY2UoIGRlbGVnYXRlQ291bnQgKSB9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gaGFuZGxlclF1ZXVlO1xuXHR9LFxuXG5cdC8vIEluY2x1ZGVzIHNvbWUgZXZlbnQgcHJvcHMgc2hhcmVkIGJ5IEtleUV2ZW50IGFuZCBNb3VzZUV2ZW50XG5cdHByb3BzOiBcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxcblxuXHRmaXhIb29rczoge30sXG5cblx0a2V5SG9va3M6IHtcblx0XHRwcm9wczogXCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLFxuXHRcdGZpbHRlcjogZnVuY3Rpb24oIGV2ZW50LCBvcmlnaW5hbCApIHtcblxuXHRcdFx0Ly8gQWRkIHdoaWNoIGZvciBrZXkgZXZlbnRzXG5cdFx0XHRpZiAoIGV2ZW50LndoaWNoID09IG51bGwgKSB7XG5cdFx0XHRcdGV2ZW50LndoaWNoID0gb3JpZ2luYWwuY2hhckNvZGUgIT0gbnVsbCA/IG9yaWdpbmFsLmNoYXJDb2RlIDogb3JpZ2luYWwua2V5Q29kZTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV2ZW50O1xuXHRcdH1cblx0fSxcblxuXHRtb3VzZUhvb2tzOiB7XG5cdFx0cHJvcHM6IFwiYnV0dG9uIGJ1dHRvbnMgY2xpZW50WCBjbGllbnRZIG9mZnNldFggb2Zmc2V0WSBwYWdlWCBwYWdlWSBzY3JlZW5YIHNjcmVlblkgdG9FbGVtZW50XCIuc3BsaXQoXCIgXCIpLFxuXHRcdGZpbHRlcjogZnVuY3Rpb24oIGV2ZW50LCBvcmlnaW5hbCApIHtcblx0XHRcdHZhciBldmVudERvYywgZG9jLCBib2R5LFxuXHRcdFx0XHRidXR0b24gPSBvcmlnaW5hbC5idXR0b247XG5cblx0XHRcdC8vIENhbGN1bGF0ZSBwYWdlWC9ZIGlmIG1pc3NpbmcgYW5kIGNsaWVudFgvWSBhdmFpbGFibGVcblx0XHRcdGlmICggZXZlbnQucGFnZVggPT0gbnVsbCAmJiBvcmlnaW5hbC5jbGllbnRYICE9IG51bGwgKSB7XG5cdFx0XHRcdGV2ZW50RG9jID0gZXZlbnQudGFyZ2V0Lm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG5cdFx0XHRcdGRvYyA9IGV2ZW50RG9jLmRvY3VtZW50RWxlbWVudDtcblx0XHRcdFx0Ym9keSA9IGV2ZW50RG9jLmJvZHk7XG5cblx0XHRcdFx0ZXZlbnQucGFnZVggPSBvcmlnaW5hbC5jbGllbnRYICsgKCBkb2MgJiYgZG9jLnNjcm9sbExlZnQgfHwgYm9keSAmJiBib2R5LnNjcm9sbExlZnQgfHwgMCApIC0gKCBkb2MgJiYgZG9jLmNsaWVudExlZnQgfHwgYm9keSAmJiBib2R5LmNsaWVudExlZnQgfHwgMCApO1xuXHRcdFx0XHRldmVudC5wYWdlWSA9IG9yaWdpbmFsLmNsaWVudFkgKyAoIGRvYyAmJiBkb2Muc2Nyb2xsVG9wICB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsVG9wICB8fCAwICkgLSAoIGRvYyAmJiBkb2MuY2xpZW50VG9wICB8fCBib2R5ICYmIGJvZHkuY2xpZW50VG9wICB8fCAwICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCB3aGljaCBmb3IgY2xpY2s6IDEgPT09IGxlZnQ7IDIgPT09IG1pZGRsZTsgMyA9PT0gcmlnaHRcblx0XHRcdC8vIE5vdGU6IGJ1dHRvbiBpcyBub3Qgbm9ybWFsaXplZCwgc28gZG9uJ3QgdXNlIGl0XG5cdFx0XHRpZiAoICFldmVudC53aGljaCAmJiBidXR0b24gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0ZXZlbnQud2hpY2ggPSAoIGJ1dHRvbiAmIDEgPyAxIDogKCBidXR0b24gJiAyID8gMyA6ICggYnV0dG9uICYgNCA/IDIgOiAwICkgKSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZXZlbnQ7XG5cdFx0fVxuXHR9LFxuXG5cdGZpeDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdGlmICggZXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gKSB7XG5cdFx0XHRyZXR1cm4gZXZlbnQ7XG5cdFx0fVxuXG5cdFx0Ly8gQ3JlYXRlIGEgd3JpdGFibGUgY29weSBvZiB0aGUgZXZlbnQgb2JqZWN0IGFuZCBub3JtYWxpemUgc29tZSBwcm9wZXJ0aWVzXG5cdFx0dmFyIGksIHByb3AsIGNvcHksXG5cdFx0XHR0eXBlID0gZXZlbnQudHlwZSxcblx0XHRcdG9yaWdpbmFsRXZlbnQgPSBldmVudCxcblx0XHRcdGZpeEhvb2sgPSB0aGlzLmZpeEhvb2tzWyB0eXBlIF07XG5cblx0XHRpZiAoICFmaXhIb29rICkge1xuXHRcdFx0dGhpcy5maXhIb29rc1sgdHlwZSBdID0gZml4SG9vayA9XG5cdFx0XHRcdHJtb3VzZUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMubW91c2VIb29rcyA6XG5cdFx0XHRcdHJrZXlFdmVudC50ZXN0KCB0eXBlICkgPyB0aGlzLmtleUhvb2tzIDpcblx0XHRcdFx0e307XG5cdFx0fVxuXHRcdGNvcHkgPSBmaXhIb29rLnByb3BzID8gdGhpcy5wcm9wcy5jb25jYXQoIGZpeEhvb2sucHJvcHMgKSA6IHRoaXMucHJvcHM7XG5cblx0XHRldmVudCA9IG5ldyBqUXVlcnkuRXZlbnQoIG9yaWdpbmFsRXZlbnQgKTtcblxuXHRcdGkgPSBjb3B5Lmxlbmd0aDtcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHByb3AgPSBjb3B5WyBpIF07XG5cdFx0XHRldmVudFsgcHJvcCBdID0gb3JpZ2luYWxFdmVudFsgcHJvcCBdO1xuXHRcdH1cblxuXHRcdC8vIFN1cHBvcnQ6IENvcmRvdmEgMi41IChXZWJLaXQpICgjMTMyNTUpXG5cdFx0Ly8gQWxsIGV2ZW50cyBzaG91bGQgaGF2ZSBhIHRhcmdldDsgQ29yZG92YSBkZXZpY2VyZWFkeSBkb2Vzbid0XG5cdFx0aWYgKCAhZXZlbnQudGFyZ2V0ICkge1xuXHRcdFx0ZXZlbnQudGFyZ2V0ID0gZG9jdW1lbnQ7XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDYuMCssIENocm9tZTwyOFxuXHRcdC8vIFRhcmdldCBzaG91bGQgbm90IGJlIGEgdGV4dCBub2RlICgjNTA0LCAjMTMxNDMpXG5cdFx0aWYgKCBldmVudC50YXJnZXQubm9kZVR5cGUgPT09IDMgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZml4SG9vay5maWx0ZXIgPyBmaXhIb29rLmZpbHRlciggZXZlbnQsIG9yaWdpbmFsRXZlbnQgKSA6IGV2ZW50O1xuXHR9LFxuXG5cdHNwZWNpYWw6IHtcblx0XHRsb2FkOiB7XG5cdFx0XHQvLyBQcmV2ZW50IHRyaWdnZXJlZCBpbWFnZS5sb2FkIGV2ZW50cyBmcm9tIGJ1YmJsaW5nIHRvIHdpbmRvdy5sb2FkXG5cdFx0XHRub0J1YmJsZTogdHJ1ZVxuXHRcdH0sXG5cdFx0Zm9jdXM6IHtcblx0XHRcdC8vIEZpcmUgbmF0aXZlIGV2ZW50IGlmIHBvc3NpYmxlIHNvIGJsdXIvZm9jdXMgc2VxdWVuY2UgaXMgY29ycmVjdFxuXHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggdGhpcyAhPT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSAmJiB0aGlzLmZvY3VzICkge1xuXHRcdFx0XHRcdHRoaXMuZm9jdXMoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNpblwiXG5cdFx0fSxcblx0XHRibHVyOiB7XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzID09PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuYmx1ciApIHtcblx0XHRcdFx0XHR0aGlzLmJsdXIoKTtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWxlZ2F0ZVR5cGU6IFwiZm9jdXNvdXRcIlxuXHRcdH0sXG5cdFx0Y2xpY2s6IHtcblx0XHRcdC8vIEZvciBjaGVja2JveCwgZmlyZSBuYXRpdmUgZXZlbnQgc28gY2hlY2tlZCBzdGF0ZSB3aWxsIGJlIHJpZ2h0XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzLnR5cGUgPT09IFwiY2hlY2tib3hcIiAmJiB0aGlzLmNsaWNrICYmIGpRdWVyeS5ub2RlTmFtZSggdGhpcywgXCJpbnB1dFwiICkgKSB7XG5cdFx0XHRcdFx0dGhpcy5jbGljaygpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblxuXHRcdFx0Ly8gRm9yIGNyb3NzLWJyb3dzZXIgY29uc2lzdGVuY3ksIGRvbid0IGZpcmUgbmF0aXZlIC5jbGljaygpIG9uIGxpbmtzXG5cdFx0XHRfZGVmYXVsdDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBldmVudC50YXJnZXQsIFwiYVwiICk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdGJlZm9yZXVubG9hZDoge1xuXHRcdFx0cG9zdERpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveCAyMCtcblx0XHRcdFx0Ly8gRmlyZWZveCBkb2Vzbid0IGFsZXJ0IGlmIHRoZSByZXR1cm5WYWx1ZSBmaWVsZCBpcyBub3Qgc2V0LlxuXHRcdFx0XHRpZiAoIGV2ZW50LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0ZXZlbnQub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZSA9IGV2ZW50LnJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRzaW11bGF0ZTogZnVuY3Rpb24oIHR5cGUsIGVsZW0sIGV2ZW50LCBidWJibGUgKSB7XG5cdFx0Ly8gUGlnZ3liYWNrIG9uIGEgZG9ub3IgZXZlbnQgdG8gc2ltdWxhdGUgYSBkaWZmZXJlbnQgb25lLlxuXHRcdC8vIEZha2Ugb3JpZ2luYWxFdmVudCB0byBhdm9pZCBkb25vcidzIHN0b3BQcm9wYWdhdGlvbiwgYnV0IGlmIHRoZVxuXHRcdC8vIHNpbXVsYXRlZCBldmVudCBwcmV2ZW50cyBkZWZhdWx0IHRoZW4gd2UgZG8gdGhlIHNhbWUgb24gdGhlIGRvbm9yLlxuXHRcdHZhciBlID0galF1ZXJ5LmV4dGVuZChcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoKSxcblx0XHRcdGV2ZW50LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRpc1NpbXVsYXRlZDogdHJ1ZSxcblx0XHRcdFx0b3JpZ2luYWxFdmVudDoge31cblx0XHRcdH1cblx0XHQpO1xuXHRcdGlmICggYnViYmxlICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIGUsIG51bGwsIGVsZW0gKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmNhbGwoIGVsZW0sIGUgKTtcblx0XHR9XG5cdFx0aWYgKCBlLmlzRGVmYXVsdFByZXZlbnRlZCgpICkge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5yZW1vdmVFdmVudCA9IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBoYW5kbGUgKSB7XG5cdGlmICggZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyICkge1xuXHRcdGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgaGFuZGxlLCBmYWxzZSApO1xuXHR9XG59O1xuXG5qUXVlcnkuRXZlbnQgPSBmdW5jdGlvbiggc3JjLCBwcm9wcyApIHtcblx0Ly8gQWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IHRoZSAnbmV3JyBrZXl3b3JkXG5cdGlmICggISh0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50KSApIHtcblx0XHRyZXR1cm4gbmV3IGpRdWVyeS5FdmVudCggc3JjLCBwcm9wcyApO1xuXHR9XG5cblx0Ly8gRXZlbnQgb2JqZWN0XG5cdGlmICggc3JjICYmIHNyYy50eXBlICkge1xuXHRcdHRoaXMub3JpZ2luYWxFdmVudCA9IHNyYztcblx0XHR0aGlzLnR5cGUgPSBzcmMudHlwZTtcblxuXHRcdC8vIEV2ZW50cyBidWJibGluZyB1cCB0aGUgZG9jdW1lbnQgbWF5IGhhdmUgYmVlbiBtYXJrZWQgYXMgcHJldmVudGVkXG5cdFx0Ly8gYnkgYSBoYW5kbGVyIGxvd2VyIGRvd24gdGhlIHRyZWU7IHJlZmxlY3QgdGhlIGNvcnJlY3QgdmFsdWUuXG5cdFx0dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSBzcmMuZGVmYXVsdFByZXZlbnRlZCB8fFxuXHRcdFx0XHRzcmMuZGVmYXVsdFByZXZlbnRlZCA9PT0gdW5kZWZpbmVkICYmXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wXG5cdFx0XHRcdHNyYy5yZXR1cm5WYWx1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0cmV0dXJuVHJ1ZSA6XG5cdFx0XHRyZXR1cm5GYWxzZTtcblxuXHQvLyBFdmVudCB0eXBlXG5cdH0gZWxzZSB7XG5cdFx0dGhpcy50eXBlID0gc3JjO1xuXHR9XG5cblx0Ly8gUHV0IGV4cGxpY2l0bHkgcHJvdmlkZWQgcHJvcGVydGllcyBvbnRvIHRoZSBldmVudCBvYmplY3Rcblx0aWYgKCBwcm9wcyApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCB0aGlzLCBwcm9wcyApO1xuXHR9XG5cblx0Ly8gQ3JlYXRlIGEgdGltZXN0YW1wIGlmIGluY29taW5nIGV2ZW50IGRvZXNuJ3QgaGF2ZSBvbmVcblx0dGhpcy50aW1lU3RhbXAgPSBzcmMgJiYgc3JjLnRpbWVTdGFtcCB8fCBqUXVlcnkubm93KCk7XG5cblx0Ly8gTWFyayBpdCBhcyBmaXhlZFxuXHR0aGlzWyBqUXVlcnkuZXhwYW5kbyBdID0gdHJ1ZTtcbn07XG5cbi8vIGpRdWVyeS5FdmVudCBpcyBiYXNlZCBvbiBET00zIEV2ZW50cyBhcyBzcGVjaWZpZWQgYnkgdGhlIEVDTUFTY3JpcHQgTGFuZ3VhZ2UgQmluZGluZ1xuLy8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAwMy9XRC1ET00tTGV2ZWwtMy1FdmVudHMtMjAwMzAzMzEvZWNtYS1zY3JpcHQtYmluZGluZy5odG1sXG5qUXVlcnkuRXZlbnQucHJvdG90eXBlID0ge1xuXHRpc0RlZmF1bHRQcmV2ZW50ZWQ6IHJldHVybkZhbHNlLFxuXHRpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsXG5cdGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblxuXHRwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHJldHVyblRydWU7XG5cblx0XHRpZiAoIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCApIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnN0b3BQcm9wYWdhdGlvbiApIHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9LFxuXHRzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG5cblx0XHRpZiAoIGUgJiYgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gKSB7XG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdH1cblxuXHRcdHRoaXMuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH1cbn07XG5cbi8vIENyZWF0ZSBtb3VzZWVudGVyL2xlYXZlIGV2ZW50cyB1c2luZyBtb3VzZW92ZXIvb3V0IGFuZCBldmVudC10aW1lIGNoZWNrc1xuLy8gU3VwcG9ydDogQ2hyb21lIDE1K1xualF1ZXJ5LmVhY2goe1xuXHRtb3VzZWVudGVyOiBcIm1vdXNlb3ZlclwiLFxuXHRtb3VzZWxlYXZlOiBcIm1vdXNlb3V0XCIsXG5cdHBvaW50ZXJlbnRlcjogXCJwb2ludGVyb3ZlclwiLFxuXHRwb2ludGVybGVhdmU6IFwicG9pbnRlcm91dFwiXG59LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgb3JpZyBdID0ge1xuXHRcdGRlbGVnYXRlVHlwZTogZml4LFxuXHRcdGJpbmRUeXBlOiBmaXgsXG5cblx0XHRoYW5kbGU6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciByZXQsXG5cdFx0XHRcdHRhcmdldCA9IHRoaXMsXG5cdFx0XHRcdHJlbGF0ZWQgPSBldmVudC5yZWxhdGVkVGFyZ2V0LFxuXHRcdFx0XHRoYW5kbGVPYmogPSBldmVudC5oYW5kbGVPYmo7XG5cblx0XHRcdC8vIEZvciBtb3VzZW50ZXIvbGVhdmUgY2FsbCB0aGUgaGFuZGxlciBpZiByZWxhdGVkIGlzIG91dHNpZGUgdGhlIHRhcmdldC5cblx0XHRcdC8vIE5COiBObyByZWxhdGVkVGFyZ2V0IGlmIHRoZSBtb3VzZSBsZWZ0L2VudGVyZWQgdGhlIGJyb3dzZXIgd2luZG93XG5cdFx0XHRpZiAoICFyZWxhdGVkIHx8IChyZWxhdGVkICE9PSB0YXJnZXQgJiYgIWpRdWVyeS5jb250YWlucyggdGFyZ2V0LCByZWxhdGVkICkpICkge1xuXHRcdFx0XHRldmVudC50eXBlID0gaGFuZGxlT2JqLm9yaWdUeXBlO1xuXHRcdFx0XHRyZXQgPSBoYW5kbGVPYmouaGFuZGxlci5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBmaXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmV0O1xuXHRcdH1cblx0fTtcbn0pO1xuXG4vLyBTdXBwb3J0OiBGaXJlZm94LCBDaHJvbWUsIFNhZmFyaVxuLy8gQ3JlYXRlIFwiYnViYmxpbmdcIiBmb2N1cyBhbmQgYmx1ciBldmVudHNcbmlmICggIXN1cHBvcnQuZm9jdXNpbkJ1YmJsZXMgKSB7XG5cdGpRdWVyeS5lYWNoKHsgZm9jdXM6IFwiZm9jdXNpblwiLCBibHVyOiBcImZvY3Vzb3V0XCIgfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblxuXHRcdC8vIEF0dGFjaCBhIHNpbmdsZSBjYXB0dXJpbmcgaGFuZGxlciBvbiB0aGUgZG9jdW1lbnQgd2hpbGUgc29tZW9uZSB3YW50cyBmb2N1c2luL2ZvY3Vzb3V0XG5cdFx0dmFyIGhhbmRsZXIgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdGpRdWVyeS5ldmVudC5zaW11bGF0ZSggZml4LCBldmVudC50YXJnZXQsIGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICksIHRydWUgKTtcblx0XHRcdH07XG5cblx0XHRqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZml4IF0gPSB7XG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4ICk7XG5cblx0XHRcdFx0aWYgKCAhYXR0YWNoZXMgKSB7XG5cdFx0XHRcdFx0ZG9jLmFkZEV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkYXRhX3ByaXYuYWNjZXNzKCBkb2MsIGZpeCwgKCBhdHRhY2hlcyB8fCAwICkgKyAxICk7XG5cdFx0XHR9LFxuXHRcdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsXG5cdFx0XHRcdFx0YXR0YWNoZXMgPSBkYXRhX3ByaXYuYWNjZXNzKCBkb2MsIGZpeCApIC0gMTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHRcdGRhdGFfcHJpdi5yZW1vdmUoIGRvYywgZml4ICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkYXRhX3ByaXYuYWNjZXNzKCBkb2MsIGZpeCwgYXR0YWNoZXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH0pO1xufVxuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblxuXHRvbjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIC8qSU5URVJOQUwqLyBvbmUgKSB7XG5cdFx0dmFyIG9yaWdGbiwgdHlwZTtcblxuXHRcdC8vIFR5cGVzIGNhbiBiZSBhIG1hcCBvZiB0eXBlcy9oYW5kbGVyc1xuXHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhIClcblx0XHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyAoIHR5cGVzLU9iamVjdCwgZGF0YSApXG5cdFx0XHRcdGRhdGEgPSBkYXRhIHx8IHNlbGVjdG9yO1xuXHRcdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRcdHRoaXMub24oIHR5cGUsIHNlbGVjdG9yLCBkYXRhLCB0eXBlc1sgdHlwZSBdLCBvbmUgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdGlmICggZGF0YSA9PSBudWxsICYmIGZuID09IG51bGwgKSB7XG5cdFx0XHQvLyAoIHR5cGVzLCBmbiApXG5cdFx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdFx0ZGF0YSA9IHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH0gZWxzZSBpZiAoIGZuID09IG51bGwgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0Ly8gKCB0eXBlcywgc2VsZWN0b3IsIGZuIClcblx0XHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gKCB0eXBlcywgZGF0YSwgZm4gKVxuXHRcdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRcdGRhdGEgPSBzZWxlY3Rvcjtcblx0XHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdFx0Zm4gPSByZXR1cm5GYWxzZTtcblx0XHR9IGVsc2UgaWYgKCAhZm4gKSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHRpZiAoIG9uZSA9PT0gMSApIHtcblx0XHRcdG9yaWdGbiA9IGZuO1xuXHRcdFx0Zm4gPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdC8vIENhbiB1c2UgYW4gZW1wdHkgc2V0LCBzaW5jZSBldmVudCBjb250YWlucyB0aGUgaW5mb1xuXHRcdFx0XHRqUXVlcnkoKS5vZmYoIGV2ZW50ICk7XG5cdFx0XHRcdHJldHVybiBvcmlnRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0fTtcblx0XHRcdC8vIFVzZSBzYW1lIGd1aWQgc28gY2FsbGVyIGNhbiByZW1vdmUgdXNpbmcgb3JpZ0ZuXG5cdFx0XHRmbi5ndWlkID0gb3JpZ0ZuLmd1aWQgfHwgKCBvcmlnRm4uZ3VpZCA9IGpRdWVyeS5ndWlkKysgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCB0eXBlcywgZm4sIGRhdGEsIHNlbGVjdG9yICk7XG5cdFx0fSk7XG5cdH0sXG5cdG9uZTogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4sIDEgKTtcblx0fSxcblx0b2ZmOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBmbiApIHtcblx0XHR2YXIgaGFuZGxlT2JqLCB0eXBlO1xuXHRcdGlmICggdHlwZXMgJiYgdHlwZXMucHJldmVudERlZmF1bHQgJiYgdHlwZXMuaGFuZGxlT2JqICkge1xuXHRcdFx0Ly8gKCBldmVudCApICBkaXNwYXRjaGVkIGpRdWVyeS5FdmVudFxuXHRcdFx0aGFuZGxlT2JqID0gdHlwZXMuaGFuZGxlT2JqO1xuXHRcdFx0alF1ZXJ5KCB0eXBlcy5kZWxlZ2F0ZVRhcmdldCApLm9mZihcblx0XHRcdFx0aGFuZGxlT2JqLm5hbWVzcGFjZSA/IGhhbmRsZU9iai5vcmlnVHlwZSArIFwiLlwiICsgaGFuZGxlT2JqLm5hbWVzcGFjZSA6IGhhbmRsZU9iai5vcmlnVHlwZSxcblx0XHRcdFx0aGFuZGxlT2JqLnNlbGVjdG9yLFxuXHRcdFx0XHRoYW5kbGVPYmouaGFuZGxlclxuXHRcdFx0KTtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdC8vICggdHlwZXMtb2JqZWN0IFssIHNlbGVjdG9yXSApXG5cdFx0XHRmb3IgKCB0eXBlIGluIHR5cGVzICkge1xuXHRcdFx0XHR0aGlzLm9mZiggdHlwZSwgc2VsZWN0b3IsIHR5cGVzWyB0eXBlIF0gKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRpZiAoIHNlbGVjdG9yID09PSBmYWxzZSB8fCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiApIHtcblx0XHRcdC8vICggdHlwZXMgWywgZm5dIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggdGhpcywgdHlwZXMsIGZuLCBzZWxlY3RvciApO1xuXHRcdH0pO1xuXHR9LFxuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgdGhpcyApO1xuXHRcdH0pO1xuXHR9LFxuXHR0cmlnZ2VySGFuZGxlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIGVsZW0gPSB0aGlzWzBdO1xuXHRcdGlmICggZWxlbSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgZWxlbSwgdHJ1ZSApO1xuXHRcdH1cblx0fVxufSk7XG5cblxudmFyXG5cdHJ4aHRtbFRhZyA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxcblx0cnRhZ05hbWUgPSAvPChbXFx3Ol0rKS8sXG5cdHJodG1sID0gLzx8JiM/XFx3KzsvLFxuXHRybm9Jbm5lcmh0bWwgPSAvPCg/OnNjcmlwdHxzdHlsZXxsaW5rKS9pLFxuXHQvLyBjaGVja2VkPVwiY2hlY2tlZFwiIG9yIGNoZWNrZWRcblx0cmNoZWNrZWQgPSAvY2hlY2tlZFxccyooPzpbXj1dfD1cXHMqLmNoZWNrZWQuKS9pLFxuXHRyc2NyaXB0VHlwZSA9IC9eJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2ksXG5cdHJzY3JpcHRUeXBlTWFza2VkID0gL150cnVlXFwvKC4qKS8sXG5cdHJjbGVhblNjcmlwdCA9IC9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZyxcblxuXHQvLyBXZSBoYXZlIHRvIGNsb3NlIHRoZXNlIHRhZ3MgdG8gc3VwcG9ydCBYSFRNTCAoIzEzMjAwKVxuXHR3cmFwTWFwID0ge1xuXG5cdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0b3B0aW9uOiBbIDEsIFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLCBcIjwvc2VsZWN0PlwiIF0sXG5cblx0XHR0aGVhZDogWyAxLCBcIjx0YWJsZT5cIiwgXCI8L3RhYmxlPlwiIF0sXG5cdFx0Y29sOiBbIDIsIFwiPHRhYmxlPjxjb2xncm91cD5cIiwgXCI8L2NvbGdyb3VwPjwvdGFibGU+XCIgXSxcblx0XHR0cjogWyAyLCBcIjx0YWJsZT48dGJvZHk+XCIsIFwiPC90Ym9keT48L3RhYmxlPlwiIF0sXG5cdFx0dGQ6IFsgMywgXCI8dGFibGU+PHRib2R5Pjx0cj5cIiwgXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIiBdLFxuXG5cdFx0X2RlZmF1bHQ6IFsgMCwgXCJcIiwgXCJcIiBdXG5cdH07XG5cbi8vIFN1cHBvcnQ6IElFOVxud3JhcE1hcC5vcHRncm91cCA9IHdyYXBNYXAub3B0aW9uO1xuXG53cmFwTWFwLnRib2R5ID0gd3JhcE1hcC50Zm9vdCA9IHdyYXBNYXAuY29sZ3JvdXAgPSB3cmFwTWFwLmNhcHRpb24gPSB3cmFwTWFwLnRoZWFkO1xud3JhcE1hcC50aCA9IHdyYXBNYXAudGQ7XG5cbi8vIFN1cHBvcnQ6IDEueCBjb21wYXRpYmlsaXR5XG4vLyBNYW5pcHVsYXRpbmcgdGFibGVzIHJlcXVpcmVzIGEgdGJvZHlcbmZ1bmN0aW9uIG1hbmlwdWxhdGlvblRhcmdldCggZWxlbSwgY29udGVudCApIHtcblx0cmV0dXJuIGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgXCJ0YWJsZVwiICkgJiZcblx0XHRqUXVlcnkubm9kZU5hbWUoIGNvbnRlbnQubm9kZVR5cGUgIT09IDExID8gY29udGVudCA6IGNvbnRlbnQuZmlyc3RDaGlsZCwgXCJ0clwiICkgP1xuXG5cdFx0ZWxlbS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRib2R5XCIpWzBdIHx8XG5cdFx0XHRlbGVtLmFwcGVuZENoaWxkKCBlbGVtLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRib2R5XCIpICkgOlxuXHRcdGVsZW07XG59XG5cbi8vIFJlcGxhY2UvcmVzdG9yZSB0aGUgdHlwZSBhdHRyaWJ1dGUgb2Ygc2NyaXB0IGVsZW1lbnRzIGZvciBzYWZlIERPTSBtYW5pcHVsYXRpb25cbmZ1bmN0aW9uIGRpc2FibGVTY3JpcHQoIGVsZW0gKSB7XG5cdGVsZW0udHlwZSA9IChlbGVtLmdldEF0dHJpYnV0ZShcInR5cGVcIikgIT09IG51bGwpICsgXCIvXCIgKyBlbGVtLnR5cGU7XG5cdHJldHVybiBlbGVtO1xufVxuZnVuY3Rpb24gcmVzdG9yZVNjcmlwdCggZWxlbSApIHtcblx0dmFyIG1hdGNoID0gcnNjcmlwdFR5cGVNYXNrZWQuZXhlYyggZWxlbS50eXBlICk7XG5cblx0aWYgKCBtYXRjaCApIHtcblx0XHRlbGVtLnR5cGUgPSBtYXRjaFsgMSBdO1xuXHR9IGVsc2Uge1xuXHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKFwidHlwZVwiKTtcblx0fVxuXG5cdHJldHVybiBlbGVtO1xufVxuXG4vLyBNYXJrIHNjcmlwdHMgYXMgaGF2aW5nIGFscmVhZHkgYmVlbiBldmFsdWF0ZWRcbmZ1bmN0aW9uIHNldEdsb2JhbEV2YWwoIGVsZW1zLCByZWZFbGVtZW50cyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdGRhdGFfcHJpdi5zZXQoXG5cdFx0XHRlbGVtc1sgaSBdLCBcImdsb2JhbEV2YWxcIiwgIXJlZkVsZW1lbnRzIHx8IGRhdGFfcHJpdi5nZXQoIHJlZkVsZW1lbnRzWyBpIF0sIFwiZ2xvYmFsRXZhbFwiIClcblx0XHQpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNsb25lQ29weUV2ZW50KCBzcmMsIGRlc3QgKSB7XG5cdHZhciBpLCBsLCB0eXBlLCBwZGF0YU9sZCwgcGRhdGFDdXIsIHVkYXRhT2xkLCB1ZGF0YUN1ciwgZXZlbnRzO1xuXG5cdGlmICggZGVzdC5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyAxLiBDb3B5IHByaXZhdGUgZGF0YTogZXZlbnRzLCBoYW5kbGVycywgZXRjLlxuXHRpZiAoIGRhdGFfcHJpdi5oYXNEYXRhKCBzcmMgKSApIHtcblx0XHRwZGF0YU9sZCA9IGRhdGFfcHJpdi5hY2Nlc3MoIHNyYyApO1xuXHRcdHBkYXRhQ3VyID0gZGF0YV9wcml2LnNldCggZGVzdCwgcGRhdGFPbGQgKTtcblx0XHRldmVudHMgPSBwZGF0YU9sZC5ldmVudHM7XG5cblx0XHRpZiAoIGV2ZW50cyApIHtcblx0XHRcdGRlbGV0ZSBwZGF0YUN1ci5oYW5kbGU7XG5cdFx0XHRwZGF0YUN1ci5ldmVudHMgPSB7fTtcblxuXHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdGZvciAoIGkgPSAwLCBsID0gZXZlbnRzWyB0eXBlIF0ubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIGRlc3QsIHR5cGUsIGV2ZW50c1sgdHlwZSBdWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIDIuIENvcHkgdXNlciBkYXRhXG5cdGlmICggZGF0YV91c2VyLmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHVkYXRhT2xkID0gZGF0YV91c2VyLmFjY2Vzcyggc3JjICk7XG5cdFx0dWRhdGFDdXIgPSBqUXVlcnkuZXh0ZW5kKCB7fSwgdWRhdGFPbGQgKTtcblxuXHRcdGRhdGFfdXNlci5zZXQoIGRlc3QsIHVkYXRhQ3VyICk7XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2V0QWxsKCBjb250ZXh0LCB0YWcgKSB7XG5cdHZhciByZXQgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lID8gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnIHx8IFwiKlwiICkgOlxuXHRcdFx0Y29udGV4dC5xdWVyeVNlbGVjdG9yQWxsID8gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgfHwgXCIqXCIgKSA6XG5cdFx0XHRbXTtcblxuXHRyZXR1cm4gdGFnID09PSB1bmRlZmluZWQgfHwgdGFnICYmIGpRdWVyeS5ub2RlTmFtZSggY29udGV4dCwgdGFnICkgP1xuXHRcdGpRdWVyeS5tZXJnZSggWyBjb250ZXh0IF0sIHJldCApIDpcblx0XHRyZXQ7XG59XG5cbi8vIEZpeCBJRSBidWdzLCBzZWUgc3VwcG9ydCB0ZXN0c1xuZnVuY3Rpb24gZml4SW5wdXQoIHNyYywgZGVzdCApIHtcblx0dmFyIG5vZGVOYW1lID0gZGVzdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG5cdC8vIEZhaWxzIHRvIHBlcnNpc3QgdGhlIGNoZWNrZWQgc3RhdGUgb2YgYSBjbG9uZWQgY2hlY2tib3ggb3IgcmFkaW8gYnV0dG9uLlxuXHRpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgcmNoZWNrYWJsZVR5cGUudGVzdCggc3JjLnR5cGUgKSApIHtcblx0XHRkZXN0LmNoZWNrZWQgPSBzcmMuY2hlY2tlZDtcblxuXHQvLyBGYWlscyB0byByZXR1cm4gdGhlIHNlbGVjdGVkIG9wdGlvbiB0byB0aGUgZGVmYXVsdCBzZWxlY3RlZCBzdGF0ZSB3aGVuIGNsb25pbmcgb3B0aW9uc1xuXHR9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5vZGVOYW1lID09PSBcInRleHRhcmVhXCIgKSB7XG5cdFx0ZGVzdC5kZWZhdWx0VmFsdWUgPSBzcmMuZGVmYXVsdFZhbHVlO1xuXHR9XG59XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRjbG9uZTogZnVuY3Rpb24oIGVsZW0sIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdHZhciBpLCBsLCBzcmNFbGVtZW50cywgZGVzdEVsZW1lbnRzLFxuXHRcdFx0Y2xvbmUgPSBlbGVtLmNsb25lTm9kZSggdHJ1ZSApLFxuXHRcdFx0aW5QYWdlID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdC8vIEZpeCBJRSBjbG9uaW5nIGlzc3Vlc1xuXHRcdGlmICggIXN1cHBvcnQubm9DbG9uZUNoZWNrZWQgJiYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGVsZW0ubm9kZVR5cGUgPT09IDExICkgJiZcblx0XHRcdFx0IWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXG5cdFx0XHQvLyBXZSBlc2NoZXcgU2l6emxlIGhlcmUgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnM6IGh0dHA6Ly9qc3BlcmYuY29tL2dldGFsbC12cy1zaXp6bGUvMlxuXHRcdFx0ZGVzdEVsZW1lbnRzID0gZ2V0QWxsKCBjbG9uZSApO1xuXHRcdFx0c3JjRWxlbWVudHMgPSBnZXRBbGwoIGVsZW0gKTtcblxuXHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGZpeElucHV0KCBzcmNFbGVtZW50c1sgaSBdLCBkZXN0RWxlbWVudHNbIGkgXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENvcHkgdGhlIGV2ZW50cyBmcm9tIHRoZSBvcmlnaW5hbCB0byB0aGUgY2xvbmVcblx0XHRpZiAoIGRhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRpZiAoIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdFx0XHRzcmNFbGVtZW50cyA9IHNyY0VsZW1lbnRzIHx8IGdldEFsbCggZWxlbSApO1xuXHRcdFx0XHRkZXN0RWxlbWVudHMgPSBkZXN0RWxlbWVudHMgfHwgZ2V0QWxsKCBjbG9uZSApO1xuXG5cdFx0XHRcdGZvciAoIGkgPSAwLCBsID0gc3JjRWxlbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdGNsb25lQ29weUV2ZW50KCBzcmNFbGVtZW50c1sgaSBdLCBkZXN0RWxlbWVudHNbIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjbG9uZUNvcHlFdmVudCggZWxlbSwgY2xvbmUgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBQcmVzZXJ2ZSBzY3JpcHQgZXZhbHVhdGlvbiBoaXN0b3J5XG5cdFx0ZGVzdEVsZW1lbnRzID0gZ2V0QWxsKCBjbG9uZSwgXCJzY3JpcHRcIiApO1xuXHRcdGlmICggZGVzdEVsZW1lbnRzLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHRzZXRHbG9iYWxFdmFsKCBkZXN0RWxlbWVudHMsICFpblBhZ2UgJiYgZ2V0QWxsKCBlbGVtLCBcInNjcmlwdFwiICkgKTtcblx0XHR9XG5cblx0XHQvLyBSZXR1cm4gdGhlIGNsb25lZCBzZXRcblx0XHRyZXR1cm4gY2xvbmU7XG5cdH0sXG5cblx0YnVpbGRGcmFnbWVudDogZnVuY3Rpb24oIGVsZW1zLCBjb250ZXh0LCBzY3JpcHRzLCBzZWxlY3Rpb24gKSB7XG5cdFx0dmFyIGVsZW0sIHRtcCwgdGFnLCB3cmFwLCBjb250YWlucywgaixcblx0XHRcdGZyYWdtZW50ID0gY29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0XHRub2RlcyA9IFtdLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gZWxlbXMubGVuZ3RoO1xuXG5cdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0ZWxlbSA9IGVsZW1zWyBpIF07XG5cblx0XHRcdGlmICggZWxlbSB8fCBlbGVtID09PSAwICkge1xuXG5cdFx0XHRcdC8vIEFkZCBub2RlcyBkaXJlY3RseVxuXHRcdFx0XHRpZiAoIGpRdWVyeS50eXBlKCBlbGVtICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXQsIFBoYW50b21KU1xuXHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCBlbGVtLm5vZGVUeXBlID8gWyBlbGVtIF0gOiBlbGVtICk7XG5cblx0XHRcdFx0Ly8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXG5cdFx0XHRcdH0gZWxzZSBpZiAoICFyaHRtbC50ZXN0KCBlbGVtICkgKSB7XG5cdFx0XHRcdFx0bm9kZXMucHVzaCggY29udGV4dC5jcmVhdGVUZXh0Tm9kZSggZWxlbSApICk7XG5cblx0XHRcdFx0Ly8gQ29udmVydCBodG1sIGludG8gRE9NIG5vZGVzXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dG1wID0gdG1wIHx8IGZyYWdtZW50LmFwcGVuZENoaWxkKCBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgKTtcblxuXHRcdFx0XHRcdC8vIERlc2VyaWFsaXplIGEgc3RhbmRhcmQgcmVwcmVzZW50YXRpb25cblx0XHRcdFx0XHR0YWcgPSAoIHJ0YWdOYW1lLmV4ZWMoIGVsZW0gKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHR3cmFwID0gd3JhcE1hcFsgdGFnIF0gfHwgd3JhcE1hcC5fZGVmYXVsdDtcblx0XHRcdFx0XHR0bXAuaW5uZXJIVE1MID0gd3JhcFsgMSBdICsgZWxlbS5yZXBsYWNlKCByeGh0bWxUYWcsIFwiPCQxPjwvJDI+XCIgKSArIHdyYXBbIDIgXTtcblxuXHRcdFx0XHRcdC8vIERlc2NlbmQgdGhyb3VnaCB3cmFwcGVycyB0byB0aGUgcmlnaHQgY29udGVudFxuXHRcdFx0XHRcdGogPSB3cmFwWyAwIF07XG5cdFx0XHRcdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRcdFx0XHR0bXAgPSB0bXAubGFzdENoaWxkO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFF0V2ViS2l0LCBQaGFudG9tSlNcblx0XHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBub2RlcywgdG1wLmNoaWxkTm9kZXMgKTtcblxuXHRcdFx0XHRcdC8vIFJlbWVtYmVyIHRoZSB0b3AtbGV2ZWwgY29udGFpbmVyXG5cdFx0XHRcdFx0dG1wID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuXHRcdFx0XHRcdC8vIEVuc3VyZSB0aGUgY3JlYXRlZCBub2RlcyBhcmUgb3JwaGFuZWQgKCMxMjM5Milcblx0XHRcdFx0XHR0bXAudGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHdyYXBwZXIgZnJvbSBmcmFnbWVudFxuXHRcdGZyYWdtZW50LnRleHRDb250ZW50ID0gXCJcIjtcblxuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKGVsZW0gPSBub2Rlc1sgaSsrIF0pICkge1xuXG5cdFx0XHQvLyAjNDA4NyAtIElmIG9yaWdpbiBhbmQgZGVzdGluYXRpb24gZWxlbWVudHMgYXJlIHRoZSBzYW1lLCBhbmQgdGhpcyBpc1xuXHRcdFx0Ly8gdGhhdCBlbGVtZW50LCBkbyBub3QgZG8gYW55dGhpbmdcblx0XHRcdGlmICggc2VsZWN0aW9uICYmIGpRdWVyeS5pbkFycmF5KCBlbGVtLCBzZWxlY3Rpb24gKSAhPT0gLTEgKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRjb250YWlucyA9IGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cblx0XHRcdC8vIEFwcGVuZCB0byBmcmFnbWVudFxuXHRcdFx0dG1wID0gZ2V0QWxsKCBmcmFnbWVudC5hcHBlbmRDaGlsZCggZWxlbSApLCBcInNjcmlwdFwiICk7XG5cblx0XHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRcdGlmICggY29udGFpbnMgKSB7XG5cdFx0XHRcdHNldEdsb2JhbEV2YWwoIHRtcCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYXB0dXJlIGV4ZWN1dGFibGVzXG5cdFx0XHRpZiAoIHNjcmlwdHMgKSB7XG5cdFx0XHRcdGogPSAwO1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gdG1wWyBqKysgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBlbGVtLnR5cGUgfHwgXCJcIiApICkge1xuXHRcdFx0XHRcdFx0c2NyaXB0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZyYWdtZW50O1xuXHR9LFxuXG5cdGNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zICkge1xuXHRcdHZhciBkYXRhLCBlbGVtLCB0eXBlLCBrZXksXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWwsXG5cdFx0XHRpID0gMDtcblxuXHRcdGZvciAoIDsgKGVsZW0gPSBlbGVtc1sgaSBdKSAhPT0gdW5kZWZpbmVkOyBpKysgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5hY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cdFx0XHRcdGtleSA9IGVsZW1bIGRhdGFfcHJpdi5leHBhbmRvIF07XG5cblx0XHRcdFx0aWYgKCBrZXkgJiYgKGRhdGEgPSBkYXRhX3ByaXYuY2FjaGVbIGtleSBdKSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0Zm9yICggdHlwZSBpbiBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBzcGVjaWFsWyB0eXBlIF0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFRoaXMgaXMgYSBzaG9ydGN1dCB0byBhdm9pZCBqUXVlcnkuZXZlbnQucmVtb3ZlJ3Mgb3ZlcmhlYWRcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGRhdGEuaGFuZGxlICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBkYXRhX3ByaXYuY2FjaGVbIGtleSBdICkge1xuXHRcdFx0XHRcdFx0Ly8gRGlzY2FyZCBhbnkgcmVtYWluaW5nIGBwcml2YXRlYCBkYXRhXG5cdFx0XHRcdFx0XHRkZWxldGUgZGF0YV9wcml2LmNhY2hlWyBrZXkgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIERpc2NhcmQgYW55IHJlbWFpbmluZyBgdXNlcmAgZGF0YVxuXHRcdFx0ZGVsZXRlIGRhdGFfdXNlci5jYWNoZVsgZWxlbVsgZGF0YV91c2VyLmV4cGFuZG8gXSBdO1xuXHRcdH1cblx0fVxufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHR0ZXh0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkudGV4dCggdGhpcyApIDpcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9LFxuXG5cdGFwcGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRwcmVwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG5cdFx0XHRcdHRhcmdldC5pbnNlcnRCZWZvcmUoIGVsZW0sIHRhcmdldC5maXJzdENoaWxkICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0YmVmb3JlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0YWZ0ZXI6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMubmV4dFNpYmxpbmcgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBzZWxlY3Rvciwga2VlcERhdGEgLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdFx0dmFyIGVsZW0sXG5cdFx0XHRlbGVtcyA9IHNlbGVjdG9yID8galF1ZXJ5LmZpbHRlciggc2VsZWN0b3IsIHRoaXMgKSA6IHRoaXMsXG5cdFx0XHRpID0gMDtcblxuXHRcdGZvciAoIDsgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCAha2VlcERhdGEgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtICkgKTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdGlmICgga2VlcERhdGEgJiYgalF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSApIHtcblx0XHRcdFx0XHRzZXRHbG9iYWxFdmFsKCBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGVtcHR5OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZWxlbSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IHRoaXNbaV0pICE9IG51bGw7IGkrKyApIHtcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG1lbW9yeSBsZWFrc1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblxuXHRcdFx0XHQvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2Rlc1xuXHRcdFx0XHRlbGVtLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRjbG9uZTogZnVuY3Rpb24oIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdGRhdGFBbmRFdmVudHMgPSBkYXRhQW5kRXZlbnRzID09IG51bGwgPyBmYWxzZSA6IGRhdGFBbmRFdmVudHM7XG5cdFx0ZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzO1xuXG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5jbG9uZSggdGhpcywgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKTtcblx0XHR9KTtcblx0fSxcblxuXHRodG1sOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGVsZW0gPSB0aGlzWyAwIF0gfHwge30sXG5cdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHRsID0gdGhpcy5sZW5ndGg7XG5cblx0XHRcdGlmICggdmFsdWUgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5pbm5lckhUTUw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNlZSBpZiB3ZSBjYW4gdGFrZSBhIHNob3J0Y3V0IGFuZCBqdXN0IHVzZSBpbm5lckhUTUxcblx0XHRcdGlmICggdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmICFybm9Jbm5lcmh0bWwudGVzdCggdmFsdWUgKSAmJlxuXHRcdFx0XHQhd3JhcE1hcFsgKCBydGFnTmFtZS5leGVjKCB2YWx1ZSApIHx8IFsgXCJcIiwgXCJcIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpIF0gKSB7XG5cblx0XHRcdFx0dmFsdWUgPSB2YWx1ZS5yZXBsYWNlKCByeGh0bWxUYWcsIFwiPCQxPjwvJDI+XCIgKTtcblxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRcdGVsZW0gPSB0aGlzWyBpIF0gfHwge307XG5cblx0XHRcdFx0XHRcdC8vIFJlbW92ZSBlbGVtZW50IG5vZGVzIGFuZCBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuXHRcdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblx0XHRcdFx0XHRcdFx0ZWxlbS5pbm5lckhUTUwgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRlbGVtID0gMDtcblxuXHRcdFx0XHQvLyBJZiB1c2luZyBpbm5lckhUTUwgdGhyb3dzIGFuIGV4Y2VwdGlvbiwgdXNlIHRoZSBmYWxsYmFjayBtZXRob2Rcblx0XHRcdFx0fSBjYXRjaCggZSApIHt9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmFwcGVuZCggdmFsdWUgKTtcblx0XHRcdH1cblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9LFxuXG5cdHJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgYXJnID0gYXJndW1lbnRzWyAwIF07XG5cblx0XHQvLyBNYWtlIHRoZSBjaGFuZ2VzLCByZXBsYWNpbmcgZWFjaCBjb250ZXh0IGVsZW1lbnQgd2l0aCB0aGUgbmV3IGNvbnRlbnRcblx0XHR0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0YXJnID0gdGhpcy5wYXJlbnROb2RlO1xuXG5cdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIHRoaXMgKSApO1xuXG5cdFx0XHRpZiAoIGFyZyApIHtcblx0XHRcdFx0YXJnLnJlcGxhY2VDaGlsZCggZWxlbSwgdGhpcyApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gRm9yY2UgcmVtb3ZhbCBpZiB0aGVyZSB3YXMgbm8gbmV3IGNvbnRlbnQgKGUuZy4sIGZyb20gZW1wdHkgYXJndW1lbnRzKVxuXHRcdHJldHVybiBhcmcgJiYgKGFyZy5sZW5ndGggfHwgYXJnLm5vZGVUeXBlKSA/IHRoaXMgOiB0aGlzLnJlbW92ZSgpO1xuXHR9LFxuXG5cdGRldGFjaDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnJlbW92ZSggc2VsZWN0b3IsIHRydWUgKTtcblx0fSxcblxuXHRkb21NYW5pcDogZnVuY3Rpb24oIGFyZ3MsIGNhbGxiYWNrICkge1xuXG5cdFx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRcdGFyZ3MgPSBjb25jYXQuYXBwbHkoIFtdLCBhcmdzICk7XG5cblx0XHR2YXIgZnJhZ21lbnQsIGZpcnN0LCBzY3JpcHRzLCBoYXNTY3JpcHRzLCBub2RlLCBkb2MsXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHNldCA9IHRoaXMsXG5cdFx0XHRpTm9DbG9uZSA9IGwgLSAxLFxuXHRcdFx0dmFsdWUgPSBhcmdzWyAwIF0sXG5cdFx0XHRpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cblx0XHQvLyBXZSBjYW4ndCBjbG9uZU5vZGUgZnJhZ21lbnRzIHRoYXQgY29udGFpbiBjaGVja2VkLCBpbiBXZWJLaXRcblx0XHRpZiAoIGlzRnVuY3Rpb24gfHxcblx0XHRcdFx0KCBsID4gMSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0XHQhc3VwcG9ydC5jaGVja0Nsb25lICYmIHJjaGVja2VkLnRlc3QoIHZhbHVlICkgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdFx0XHR2YXIgc2VsZiA9IHNldC5lcSggaW5kZXggKTtcblx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uICkge1xuXHRcdFx0XHRcdGFyZ3NbIDAgXSA9IHZhbHVlLmNhbGwoIHRoaXMsIGluZGV4LCBzZWxmLmh0bWwoKSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNlbGYuZG9tTWFuaXAoIGFyZ3MsIGNhbGxiYWNrICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIGwgKSB7XG5cdFx0XHRmcmFnbWVudCA9IGpRdWVyeS5idWlsZEZyYWdtZW50KCBhcmdzLCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCwgZmFsc2UsIHRoaXMgKTtcblx0XHRcdGZpcnN0ID0gZnJhZ21lbnQuZmlyc3RDaGlsZDtcblxuXHRcdFx0aWYgKCBmcmFnbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSApIHtcblx0XHRcdFx0ZnJhZ21lbnQgPSBmaXJzdDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBmaXJzdCApIHtcblx0XHRcdFx0c2NyaXB0cyA9IGpRdWVyeS5tYXAoIGdldEFsbCggZnJhZ21lbnQsIFwic2NyaXB0XCIgKSwgZGlzYWJsZVNjcmlwdCApO1xuXHRcdFx0XHRoYXNTY3JpcHRzID0gc2NyaXB0cy5sZW5ndGg7XG5cblx0XHRcdFx0Ly8gVXNlIHRoZSBvcmlnaW5hbCBmcmFnbWVudCBmb3IgdGhlIGxhc3QgaXRlbSBpbnN0ZWFkIG9mIHRoZSBmaXJzdCBiZWNhdXNlIGl0IGNhbiBlbmQgdXBcblx0XHRcdFx0Ly8gYmVpbmcgZW1wdGllZCBpbmNvcnJlY3RseSBpbiBjZXJ0YWluIHNpdHVhdGlvbnMgKCM4MDcwKS5cblx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdG5vZGUgPSBmcmFnbWVudDtcblxuXHRcdFx0XHRcdGlmICggaSAhPT0gaU5vQ2xvbmUgKSB7XG5cdFx0XHRcdFx0XHRub2RlID0galF1ZXJ5LmNsb25lKCBub2RlLCB0cnVlLCB0cnVlICk7XG5cblx0XHRcdFx0XHRcdC8vIEtlZXAgcmVmZXJlbmNlcyB0byBjbG9uZWQgc2NyaXB0cyBmb3IgbGF0ZXIgcmVzdG9yYXRpb25cblx0XHRcdFx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXRcblx0XHRcdFx0XHRcdFx0Ly8galF1ZXJ5Lm1lcmdlIGJlY2F1c2UgcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93c1xuXHRcdFx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHNjcmlwdHMsIGdldEFsbCggbm9kZSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Y2FsbGJhY2suY2FsbCggdGhpc1sgaSBdLCBub2RlLCBpICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cdFx0XHRcdFx0ZG9jID0gc2NyaXB0c1sgc2NyaXB0cy5sZW5ndGggLSAxIF0ub3duZXJEb2N1bWVudDtcblxuXHRcdFx0XHRcdC8vIFJlZW5hYmxlIHNjcmlwdHNcblx0XHRcdFx0XHRqUXVlcnkubWFwKCBzY3JpcHRzLCByZXN0b3JlU2NyaXB0ICk7XG5cblx0XHRcdFx0XHQvLyBFdmFsdWF0ZSBleGVjdXRhYmxlIHNjcmlwdHMgb24gZmlyc3QgZG9jdW1lbnQgaW5zZXJ0aW9uXG5cdFx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBoYXNTY3JpcHRzOyBpKysgKSB7XG5cdFx0XHRcdFx0XHRub2RlID0gc2NyaXB0c1sgaSBdO1xuXHRcdFx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBub2RlLnR5cGUgfHwgXCJcIiApICYmXG5cdFx0XHRcdFx0XHRcdCFkYXRhX3ByaXYuYWNjZXNzKCBub2RlLCBcImdsb2JhbEV2YWxcIiApICYmIGpRdWVyeS5jb250YWlucyggZG9jLCBub2RlICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0aWYgKCBub2RlLnNyYyApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBPcHRpb25hbCBBSkFYIGRlcGVuZGVuY3ksIGJ1dCB3b24ndCBydW4gc2NyaXB0cyBpZiBub3QgcHJlc2VudFxuXHRcdFx0XHRcdFx0XHRcdGlmICggalF1ZXJ5Ll9ldmFsVXJsICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0alF1ZXJ5Ll9ldmFsVXJsKCBub2RlLnNyYyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggbm9kZS50ZXh0Q29udGVudC5yZXBsYWNlKCByY2xlYW5TY3JpcHQsIFwiXCIgKSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZWFjaCh7XG5cdGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuXHRwcmVwZW5kVG86IFwicHJlcGVuZFwiLFxuXHRpbnNlcnRCZWZvcmU6IFwiYmVmb3JlXCIsXG5cdGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG5cdHJlcGxhY2VBbGw6IFwicmVwbGFjZVdpdGhcIlxufSwgZnVuY3Rpb24oIG5hbWUsIG9yaWdpbmFsICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgZWxlbXMsXG5cdFx0XHRyZXQgPSBbXSxcblx0XHRcdGluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSxcblx0XHRcdGxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyBpIDw9IGxhc3Q7IGkrKyApIHtcblx0XHRcdGVsZW1zID0gaSA9PT0gbGFzdCA/IHRoaXMgOiB0aGlzLmNsb25lKCB0cnVlICk7XG5cdFx0XHRqUXVlcnkoIGluc2VydFsgaSBdIClbIG9yaWdpbmFsIF0oIGVsZW1zICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFF0V2ViS2l0XG5cdFx0XHQvLyAuZ2V0KCkgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzXG5cdFx0XHRwdXNoLmFwcGx5KCByZXQsIGVsZW1zLmdldCgpICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCByZXQgKTtcblx0fTtcbn0pO1xuXG5cbnZhciBpZnJhbWUsXG5cdGVsZW1kaXNwbGF5ID0ge307XG5cbi8qKlxuICogUmV0cmlldmUgdGhlIGFjdHVhbCBkaXNwbGF5IG9mIGEgZWxlbWVudFxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgbm9kZU5hbWUgb2YgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBkb2MgRG9jdW1lbnQgb2JqZWN0XG4gKi9cbi8vIENhbGxlZCBvbmx5IGZyb20gd2l0aGluIGRlZmF1bHREaXNwbGF5XG5mdW5jdGlvbiBhY3R1YWxEaXNwbGF5KCBuYW1lLCBkb2MgKSB7XG5cdHZhciBzdHlsZSxcblx0XHRlbGVtID0galF1ZXJ5KCBkb2MuY3JlYXRlRWxlbWVudCggbmFtZSApICkuYXBwZW5kVG8oIGRvYy5ib2R5ICksXG5cblx0XHQvLyBnZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSBtaWdodCBiZSByZWxpYWJseSB1c2VkIG9ubHkgb24gYXR0YWNoZWQgZWxlbWVudFxuXHRcdGRpc3BsYXkgPSB3aW5kb3cuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUgJiYgKCBzdHlsZSA9IHdpbmRvdy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSggZWxlbVsgMCBdICkgKSA/XG5cblx0XHRcdC8vIFVzZSBvZiB0aGlzIG1ldGhvZCBpcyBhIHRlbXBvcmFyeSBmaXggKG1vcmUgbGlrZSBvcHRpbWl6YXRpb24pIHVudGlsIHNvbWV0aGluZyBiZXR0ZXIgY29tZXMgYWxvbmcsXG5cdFx0XHQvLyBzaW5jZSBpdCB3YXMgcmVtb3ZlZCBmcm9tIHNwZWNpZmljYXRpb24gYW5kIHN1cHBvcnRlZCBvbmx5IGluIEZGXG5cdFx0XHRzdHlsZS5kaXNwbGF5IDogalF1ZXJ5LmNzcyggZWxlbVsgMCBdLCBcImRpc3BsYXlcIiApO1xuXG5cdC8vIFdlIGRvbid0IGhhdmUgYW55IGRhdGEgc3RvcmVkIG9uIHRoZSBlbGVtZW50LFxuXHQvLyBzbyB1c2UgXCJkZXRhY2hcIiBtZXRob2QgYXMgZmFzdCB3YXkgdG8gZ2V0IHJpZCBvZiB0aGUgZWxlbWVudFxuXHRlbGVtLmRldGFjaCgpO1xuXG5cdHJldHVybiBkaXNwbGF5O1xufVxuXG4vKipcbiAqIFRyeSB0byBkZXRlcm1pbmUgdGhlIGRlZmF1bHQgZGlzcGxheSB2YWx1ZSBvZiBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gbm9kZU5hbWVcbiAqL1xuZnVuY3Rpb24gZGVmYXVsdERpc3BsYXkoIG5vZGVOYW1lICkge1xuXHR2YXIgZG9jID0gZG9jdW1lbnQsXG5cdFx0ZGlzcGxheSA9IGVsZW1kaXNwbGF5WyBub2RlTmFtZSBdO1xuXG5cdGlmICggIWRpc3BsYXkgKSB7XG5cdFx0ZGlzcGxheSA9IGFjdHVhbERpc3BsYXkoIG5vZGVOYW1lLCBkb2MgKTtcblxuXHRcdC8vIElmIHRoZSBzaW1wbGUgd2F5IGZhaWxzLCByZWFkIGZyb20gaW5zaWRlIGFuIGlmcmFtZVxuXHRcdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgfHwgIWRpc3BsYXkgKSB7XG5cblx0XHRcdC8vIFVzZSB0aGUgYWxyZWFkeS1jcmVhdGVkIGlmcmFtZSBpZiBwb3NzaWJsZVxuXHRcdFx0aWZyYW1lID0gKGlmcmFtZSB8fCBqUXVlcnkoIFwiPGlmcmFtZSBmcmFtZWJvcmRlcj0nMCcgd2lkdGg9JzAnIGhlaWdodD0nMCcvPlwiICkpLmFwcGVuZFRvKCBkb2MuZG9jdW1lbnRFbGVtZW50ICk7XG5cblx0XHRcdC8vIEFsd2F5cyB3cml0ZSBhIG5ldyBIVE1MIHNrZWxldG9uIHNvIFdlYmtpdCBhbmQgRmlyZWZveCBkb24ndCBjaG9rZSBvbiByZXVzZVxuXHRcdFx0ZG9jID0gaWZyYW1lWyAwIF0uY29udGVudERvY3VtZW50O1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRVxuXHRcdFx0ZG9jLndyaXRlKCk7XG5cdFx0XHRkb2MuY2xvc2UoKTtcblxuXHRcdFx0ZGlzcGxheSA9IGFjdHVhbERpc3BsYXkoIG5vZGVOYW1lLCBkb2MgKTtcblx0XHRcdGlmcmFtZS5kZXRhY2goKTtcblx0XHR9XG5cblx0XHQvLyBTdG9yZSB0aGUgY29ycmVjdCBkZWZhdWx0IGRpc3BsYXlcblx0XHRlbGVtZGlzcGxheVsgbm9kZU5hbWUgXSA9IGRpc3BsYXk7XG5cdH1cblxuXHRyZXR1cm4gZGlzcGxheTtcbn1cbnZhciBybWFyZ2luID0gKC9ebWFyZ2luLyk7XG5cbnZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKD8hcHgpW2EteiVdKyRcIiwgXCJpXCIgKTtcblxudmFyIGdldFN0eWxlcyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdC8vIFN1cHBvcnQ6IElFPD0xMSssIEZpcmVmb3g8PTMwKyAoIzE1MDk4LCAjMTQxNTApXG5cdFx0Ly8gSUUgdGhyb3dzIG9uIGVsZW1lbnRzIGNyZWF0ZWQgaW4gcG9wdXBzXG5cdFx0Ly8gRkYgbWVhbndoaWxlIHRocm93cyBvbiBmcmFtZSBlbGVtZW50cyB0aHJvdWdoIFwiZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZVwiXG5cdFx0aWYgKCBlbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcub3BlbmVyICkge1xuXHRcdFx0cmV0dXJuIGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtLCBudWxsICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtLCBudWxsICk7XG5cdH07XG5cblxuXG5mdW5jdGlvbiBjdXJDU1MoIGVsZW0sIG5hbWUsIGNvbXB1dGVkICkge1xuXHR2YXIgd2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCwgcmV0LFxuXHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRjb21wdXRlZCA9IGNvbXB1dGVkIHx8IGdldFN0eWxlcyggZWxlbSApO1xuXG5cdC8vIFN1cHBvcnQ6IElFOVxuXHQvLyBnZXRQcm9wZXJ0eVZhbHVlIGlzIG9ubHkgbmVlZGVkIGZvciAuY3NzKCdmaWx0ZXInKSAoIzEyNTM3KVxuXHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdHJldCA9IGNvbXB1dGVkLmdldFByb3BlcnR5VmFsdWUoIG5hbWUgKSB8fCBjb21wdXRlZFsgbmFtZSBdO1xuXHR9XG5cblx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdGlmICggcmV0ID09PSBcIlwiICYmICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkge1xuXHRcdFx0cmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogaU9TIDwgNlxuXHRcdC8vIEEgdHJpYnV0ZSB0byB0aGUgXCJhd2Vzb21lIGhhY2sgYnkgRGVhbiBFZHdhcmRzXCJcblx0XHQvLyBpT1MgPCA2IChhdCBsZWFzdCkgcmV0dXJucyBwZXJjZW50YWdlIGZvciBhIGxhcmdlciBzZXQgb2YgdmFsdWVzLCBidXQgd2lkdGggc2VlbXMgdG8gYmUgcmVsaWFibHkgcGl4ZWxzXG5cdFx0Ly8gdGhpcyBpcyBhZ2FpbnN0IHRoZSBDU1NPTSBkcmFmdCBzcGVjOiBodHRwOi8vZGV2LnczLm9yZy9jc3N3Zy9jc3NvbS8jcmVzb2x2ZWQtdmFsdWVzXG5cdFx0aWYgKCBybnVtbm9ucHgudGVzdCggcmV0ICkgJiYgcm1hcmdpbi50ZXN0KCBuYW1lICkgKSB7XG5cblx0XHRcdC8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXNcblx0XHRcdHdpZHRoID0gc3R5bGUud2lkdGg7XG5cdFx0XHRtaW5XaWR0aCA9IHN0eWxlLm1pbldpZHRoO1xuXHRcdFx0bWF4V2lkdGggPSBzdHlsZS5tYXhXaWR0aDtcblxuXHRcdFx0Ly8gUHV0IGluIHRoZSBuZXcgdmFsdWVzIHRvIGdldCBhIGNvbXB1dGVkIHZhbHVlIG91dFxuXHRcdFx0c3R5bGUubWluV2lkdGggPSBzdHlsZS5tYXhXaWR0aCA9IHN0eWxlLndpZHRoID0gcmV0O1xuXHRcdFx0cmV0ID0gY29tcHV0ZWQud2lkdGg7XG5cblx0XHRcdC8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXNcblx0XHRcdHN0eWxlLndpZHRoID0gd2lkdGg7XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IG1pbldpZHRoO1xuXHRcdFx0c3R5bGUubWF4V2lkdGggPSBtYXhXaWR0aDtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcmV0ICE9PSB1bmRlZmluZWQgP1xuXHRcdC8vIFN1cHBvcnQ6IElFXG5cdFx0Ly8gSUUgcmV0dXJucyB6SW5kZXggdmFsdWUgYXMgYW4gaW50ZWdlci5cblx0XHRyZXQgKyBcIlwiIDpcblx0XHRyZXQ7XG59XG5cblxuZnVuY3Rpb24gYWRkR2V0SG9va0lmKCBjb25kaXRpb25GbiwgaG9va0ZuICkge1xuXHQvLyBEZWZpbmUgdGhlIGhvb2ssIHdlJ2xsIGNoZWNrIG9uIHRoZSBmaXJzdCBydW4gaWYgaXQncyByZWFsbHkgbmVlZGVkLlxuXHRyZXR1cm4ge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIGNvbmRpdGlvbkZuKCkgKSB7XG5cdFx0XHRcdC8vIEhvb2sgbm90IG5lZWRlZCAob3IgaXQncyBub3QgcG9zc2libGUgdG8gdXNlIGl0IGR1ZVxuXHRcdFx0XHQvLyB0byBtaXNzaW5nIGRlcGVuZGVuY3kpLCByZW1vdmUgaXQuXG5cdFx0XHRcdGRlbGV0ZSB0aGlzLmdldDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBIb29rIG5lZWRlZDsgcmVkZWZpbmUgaXQgc28gdGhhdCB0aGUgc3VwcG9ydCB0ZXN0IGlzIG5vdCBleGVjdXRlZCBhZ2Fpbi5cblx0XHRcdHJldHVybiAodGhpcy5nZXQgPSBob29rRm4pLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9XG5cdH07XG59XG5cblxuKGZ1bmN0aW9uKCkge1xuXHR2YXIgcGl4ZWxQb3NpdGlvblZhbCwgYm94U2l6aW5nUmVsaWFibGVWYWwsXG5cdFx0ZG9jRWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCxcblx0XHRjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXG5cdFx0ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuXG5cdGlmICggIWRpdi5zdHlsZSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRTktMTErXG5cdC8vIFN0eWxlIG9mIGNsb25lZCBlbGVtZW50IGFmZmVjdHMgc291cmNlIGVsZW1lbnQgY2xvbmVkICgjODkwOClcblx0ZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJjb250ZW50LWJveFwiO1xuXHRkaXYuY2xvbmVOb2RlKCB0cnVlICkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcIlwiO1xuXHRzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSA9IGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9PT0gXCJjb250ZW50LWJveFwiO1xuXG5cdGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gXCJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweDtcIiArXG5cdFx0XCJwb3NpdGlvbjphYnNvbHV0ZVwiO1xuXHRjb250YWluZXIuYXBwZW5kQ2hpbGQoIGRpdiApO1xuXG5cdC8vIEV4ZWN1dGluZyBib3RoIHBpeGVsUG9zaXRpb24gJiBib3hTaXppbmdSZWxpYWJsZSB0ZXN0cyByZXF1aXJlIG9ubHkgb25lIGxheW91dFxuXHQvLyBzbyB0aGV5J3JlIGV4ZWN1dGVkIGF0IHRoZSBzYW1lIHRpbWUgdG8gc2F2ZSB0aGUgc2Vjb25kIGNvbXB1dGF0aW9uLlxuXHRmdW5jdGlvbiBjb21wdXRlUGl4ZWxQb3NpdGlvbkFuZEJveFNpemluZ1JlbGlhYmxlKCkge1xuXHRcdGRpdi5zdHlsZS5jc3NUZXh0ID1cblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjksIEFuZHJvaWQgMi4zXG5cdFx0XHQvLyBWZW5kb3ItcHJlZml4IGJveC1zaXppbmdcblx0XHRcdFwiLXdlYmtpdC1ib3gtc2l6aW5nOmJvcmRlci1ib3g7LW1vei1ib3gtc2l6aW5nOmJvcmRlci1ib3g7XCIgK1xuXHRcdFx0XCJib3gtc2l6aW5nOmJvcmRlci1ib3g7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOjElO3RvcDoxJTtcIiArXG5cdFx0XHRcImJvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlXCI7XG5cdFx0ZGl2LmlubmVySFRNTCA9IFwiXCI7XG5cdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggY29udGFpbmVyICk7XG5cblx0XHR2YXIgZGl2U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZGl2LCBudWxsICk7XG5cdFx0cGl4ZWxQb3NpdGlvblZhbCA9IGRpdlN0eWxlLnRvcCAhPT0gXCIxJVwiO1xuXHRcdGJveFNpemluZ1JlbGlhYmxlVmFsID0gZGl2U3R5bGUud2lkdGggPT09IFwiNHB4XCI7XG5cblx0XHRkb2NFbGVtLnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IG5vZGUuanMganNkb21cblx0Ly8gRG9uJ3QgYXNzdW1lIHRoYXQgZ2V0Q29tcHV0ZWRTdHlsZSBpcyBhIHByb3BlcnR5IG9mIHRoZSBnbG9iYWwgb2JqZWN0XG5cdGlmICggd2luZG93LmdldENvbXB1dGVkU3R5bGUgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggc3VwcG9ydCwge1xuXHRcdFx0cGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Ly8gVGhpcyB0ZXN0IGlzIGV4ZWN1dGVkIG9ubHkgb25jZSBidXQgd2Ugc3RpbGwgZG8gbWVtb2l6aW5nXG5cdFx0XHRcdC8vIHNpbmNlIHdlIGNhbiB1c2UgdGhlIGJveFNpemluZ1JlbGlhYmxlIHByZS1jb21wdXRpbmcuXG5cdFx0XHRcdC8vIE5vIG5lZWQgdG8gY2hlY2sgaWYgdGhlIHRlc3Qgd2FzIGFscmVhZHkgcGVyZm9ybWVkLCB0aG91Z2guXG5cdFx0XHRcdGNvbXB1dGVQaXhlbFBvc2l0aW9uQW5kQm94U2l6aW5nUmVsaWFibGUoKTtcblx0XHRcdFx0cmV0dXJuIHBpeGVsUG9zaXRpb25WYWw7XG5cdFx0XHR9LFxuXHRcdFx0Ym94U2l6aW5nUmVsaWFibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGJveFNpemluZ1JlbGlhYmxlVmFsID09IG51bGwgKSB7XG5cdFx0XHRcdFx0Y29tcHV0ZVBpeGVsUG9zaXRpb25BbmRCb3hTaXppbmdSZWxpYWJsZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBib3hTaXppbmdSZWxpYWJsZVZhbDtcblx0XHRcdH0sXG5cdFx0XHRyZWxpYWJsZU1hcmdpblJpZ2h0OiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuXHRcdFx0XHQvLyBDaGVjayBpZiBkaXYgd2l0aCBleHBsaWNpdCB3aWR0aCBhbmQgbm8gbWFyZ2luLXJpZ2h0IGluY29ycmVjdGx5XG5cdFx0XHRcdC8vIGdldHMgY29tcHV0ZWQgbWFyZ2luLXJpZ2h0IGJhc2VkIG9uIHdpZHRoIG9mIGNvbnRhaW5lci4gKCMzMzMzKVxuXHRcdFx0XHQvLyBXZWJLaXQgQnVnIDEzMzQzIC0gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHdyb25nIHZhbHVlIGZvciBtYXJnaW4tcmlnaHRcblx0XHRcdFx0Ly8gVGhpcyBzdXBwb3J0IGZ1bmN0aW9uIGlzIG9ubHkgZXhlY3V0ZWQgb25jZSBzbyBubyBtZW1vaXppbmcgaXMgbmVlZGVkLlxuXHRcdFx0XHR2YXIgcmV0LFxuXHRcdFx0XHRcdG1hcmdpbkRpdiA9IGRpdi5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICk7XG5cblx0XHRcdFx0Ly8gUmVzZXQgQ1NTOiBib3gtc2l6aW5nOyBkaXNwbGF5OyBtYXJnaW47IGJvcmRlcjsgcGFkZGluZ1xuXHRcdFx0XHRtYXJnaW5EaXYuc3R5bGUuY3NzVGV4dCA9IGRpdi5zdHlsZS5jc3NUZXh0ID1cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94PDI5LCBBbmRyb2lkIDIuM1xuXHRcdFx0XHRcdC8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZ1xuXHRcdFx0XHRcdFwiLXdlYmtpdC1ib3gtc2l6aW5nOmNvbnRlbnQtYm94Oy1tb3otYm94LXNpemluZzpjb250ZW50LWJveDtcIiArXG5cdFx0XHRcdFx0XCJib3gtc2l6aW5nOmNvbnRlbnQtYm94O2Rpc3BsYXk6YmxvY2s7bWFyZ2luOjA7Ym9yZGVyOjA7cGFkZGluZzowXCI7XG5cdFx0XHRcdG1hcmdpbkRpdi5zdHlsZS5tYXJnaW5SaWdodCA9IG1hcmdpbkRpdi5zdHlsZS53aWR0aCA9IFwiMFwiO1xuXHRcdFx0XHRkaXYuc3R5bGUud2lkdGggPSBcIjFweFwiO1xuXHRcdFx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdFx0XHRyZXQgPSAhcGFyc2VGbG9hdCggd2luZG93LmdldENvbXB1dGVkU3R5bGUoIG1hcmdpbkRpdiwgbnVsbCApLm1hcmdpblJpZ2h0ICk7XG5cblx0XHRcdFx0ZG9jRWxlbS5yZW1vdmVDaGlsZCggY29udGFpbmVyICk7XG5cdFx0XHRcdGRpdi5yZW1vdmVDaGlsZCggbWFyZ2luRGl2ICk7XG5cblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufSkoKTtcblxuXG4vLyBBIG1ldGhvZCBmb3IgcXVpY2tseSBzd2FwcGluZyBpbi9vdXQgQ1NTIHByb3BlcnRpZXMgdG8gZ2V0IGNvcnJlY3QgY2FsY3VsYXRpb25zLlxualF1ZXJ5LnN3YXAgPSBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgY2FsbGJhY2ssIGFyZ3MgKSB7XG5cdHZhciByZXQsIG5hbWUsXG5cdFx0b2xkID0ge307XG5cblx0Ly8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvcHRpb25zWyBuYW1lIF07XG5cdH1cblxuXHRyZXQgPSBjYWxsYmFjay5hcHBseSggZWxlbSwgYXJncyB8fCBbXSApO1xuXG5cdC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb2xkWyBuYW1lIF07XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufTtcblxuXG52YXJcblx0Ly8gU3dhcHBhYmxlIGlmIGRpc3BsYXkgaXMgbm9uZSBvciBzdGFydHMgd2l0aCB0YWJsZSBleGNlcHQgXCJ0YWJsZVwiLCBcInRhYmxlLWNlbGxcIiwgb3IgXCJ0YWJsZS1jYXB0aW9uXCJcblx0Ly8gU2VlIGhlcmUgZm9yIGRpc3BsYXkgdmFsdWVzOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0NTUy9kaXNwbGF5XG5cdHJkaXNwbGF5c3dhcCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxcblx0cm51bXNwbGl0ID0gbmV3IFJlZ0V4cCggXCJeKFwiICsgcG51bSArIFwiKSguKikkXCIsIFwiaVwiICksXG5cdHJyZWxOdW0gPSBuZXcgUmVnRXhwKCBcIl4oWystXSk9KFwiICsgcG51bSArIFwiKVwiLCBcImlcIiApLFxuXG5cdGNzc1Nob3cgPSB7IHBvc2l0aW9uOiBcImFic29sdXRlXCIsIHZpc2liaWxpdHk6IFwiaGlkZGVuXCIsIGRpc3BsYXk6IFwiYmxvY2tcIiB9LFxuXHRjc3NOb3JtYWxUcmFuc2Zvcm0gPSB7XG5cdFx0bGV0dGVyU3BhY2luZzogXCIwXCIsXG5cdFx0Zm9udFdlaWdodDogXCI0MDBcIlxuXHR9LFxuXG5cdGNzc1ByZWZpeGVzID0gWyBcIldlYmtpdFwiLCBcIk9cIiwgXCJNb3pcIiwgXCJtc1wiIF07XG5cbi8vIFJldHVybiBhIGNzcyBwcm9wZXJ0eSBtYXBwZWQgdG8gYSBwb3RlbnRpYWxseSB2ZW5kb3IgcHJlZml4ZWQgcHJvcGVydHlcbmZ1bmN0aW9uIHZlbmRvclByb3BOYW1lKCBzdHlsZSwgbmFtZSApIHtcblxuXHQvLyBTaG9ydGN1dCBmb3IgbmFtZXMgdGhhdCBhcmUgbm90IHZlbmRvciBwcmVmaXhlZFxuXHRpZiAoIG5hbWUgaW4gc3R5bGUgKSB7XG5cdFx0cmV0dXJuIG5hbWU7XG5cdH1cblxuXHQvLyBDaGVjayBmb3IgdmVuZG9yIHByZWZpeGVkIG5hbWVzXG5cdHZhciBjYXBOYW1lID0gbmFtZVswXS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zbGljZSgxKSxcblx0XHRvcmlnTmFtZSA9IG5hbWUsXG5cdFx0aSA9IGNzc1ByZWZpeGVzLmxlbmd0aDtcblxuXHR3aGlsZSAoIGktLSApIHtcblx0XHRuYW1lID0gY3NzUHJlZml4ZXNbIGkgXSArIGNhcE5hbWU7XG5cdFx0aWYgKCBuYW1lIGluIHN0eWxlICkge1xuXHRcdFx0cmV0dXJuIG5hbWU7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG9yaWdOYW1lO1xufVxuXG5mdW5jdGlvbiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIHN1YnRyYWN0ICkge1xuXHR2YXIgbWF0Y2hlcyA9IHJudW1zcGxpdC5leGVjKCB2YWx1ZSApO1xuXHRyZXR1cm4gbWF0Y2hlcyA/XG5cdFx0Ly8gR3VhcmQgYWdhaW5zdCB1bmRlZmluZWQgXCJzdWJ0cmFjdFwiLCBlLmcuLCB3aGVuIHVzZWQgYXMgaW4gY3NzSG9va3Ncblx0XHRNYXRoLm1heCggMCwgbWF0Y2hlc1sgMSBdIC0gKCBzdWJ0cmFjdCB8fCAwICkgKSArICggbWF0Y2hlc1sgMiBdIHx8IFwicHhcIiApIDpcblx0XHR2YWx1ZTtcbn1cblxuZnVuY3Rpb24gYXVnbWVudFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhLCBpc0JvcmRlckJveCwgc3R5bGVzICkge1xuXHR2YXIgaSA9IGV4dHJhID09PSAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICkgP1xuXHRcdC8vIElmIHdlIGFscmVhZHkgaGF2ZSB0aGUgcmlnaHQgbWVhc3VyZW1lbnQsIGF2b2lkIGF1Z21lbnRhdGlvblxuXHRcdDQgOlxuXHRcdC8vIE90aGVyd2lzZSBpbml0aWFsaXplIGZvciBob3Jpem9udGFsIG9yIHZlcnRpY2FsIHByb3BlcnRpZXNcblx0XHRuYW1lID09PSBcIndpZHRoXCIgPyAxIDogMCxcblxuXHRcdHZhbCA9IDA7XG5cblx0Zm9yICggOyBpIDwgNDsgaSArPSAyICkge1xuXHRcdC8vIEJvdGggYm94IG1vZGVscyBleGNsdWRlIG1hcmdpbiwgc28gYWRkIGl0IGlmIHdlIHdhbnQgaXRcblx0XHRpZiAoIGV4dHJhID09PSBcIm1hcmdpblwiICkge1xuXHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIGV4dHJhICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXHRcdH1cblxuXHRcdGlmICggaXNCb3JkZXJCb3ggKSB7XG5cdFx0XHQvLyBib3JkZXItYm94IGluY2x1ZGVzIHBhZGRpbmcsIHNvIHJlbW92ZSBpdCBpZiB3ZSB3YW50IGNvbnRlbnRcblx0XHRcdGlmICggZXh0cmEgPT09IFwiY29udGVudFwiICkge1xuXHRcdFx0XHR2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJwYWRkaW5nXCIgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEF0IHRoaXMgcG9pbnQsIGV4dHJhIGlzbid0IGJvcmRlciBub3IgbWFyZ2luLCBzbyByZW1vdmUgYm9yZGVyXG5cdFx0XHRpZiAoIGV4dHJhICE9PSBcIm1hcmdpblwiICkge1xuXHRcdFx0XHR2YWwgLT0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgY29udGVudCwgc28gYWRkIHBhZGRpbmdcblx0XHRcdHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblxuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgY29udGVudCBub3IgcGFkZGluZywgc28gYWRkIGJvcmRlclxuXHRcdFx0aWYgKCBleHRyYSAhPT0gXCJwYWRkaW5nXCIgKSB7XG5cdFx0XHRcdHZhbCArPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB2YWw7XG59XG5cbmZ1bmN0aW9uIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICkge1xuXG5cdC8vIFN0YXJ0IHdpdGggb2Zmc2V0IHByb3BlcnR5LCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIHRoZSBib3JkZXItYm94IHZhbHVlXG5cdHZhciB2YWx1ZUlzQm9yZGVyQm94ID0gdHJ1ZSxcblx0XHR2YWwgPSBuYW1lID09PSBcIndpZHRoXCIgPyBlbGVtLm9mZnNldFdpZHRoIDogZWxlbS5vZmZzZXRIZWlnaHQsXG5cdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICksXG5cdFx0aXNCb3JkZXJCb3ggPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiO1xuXG5cdC8vIFNvbWUgbm9uLWh0bWwgZWxlbWVudHMgcmV0dXJuIHVuZGVmaW5lZCBmb3Igb2Zmc2V0V2lkdGgsIHNvIGNoZWNrIGZvciBudWxsL3VuZGVmaW5lZFxuXHQvLyBzdmcgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02NDkyODVcblx0Ly8gTWF0aE1MIC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDkxNjY4XG5cdGlmICggdmFsIDw9IDAgfHwgdmFsID09IG51bGwgKSB7XG5cdFx0Ly8gRmFsbCBiYWNrIHRvIGNvbXB1dGVkIHRoZW4gdW5jb21wdXRlZCBjc3MgaWYgbmVjZXNzYXJ5XG5cdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBuYW1lLCBzdHlsZXMgKTtcblx0XHRpZiAoIHZhbCA8IDAgfHwgdmFsID09IG51bGwgKSB7XG5cdFx0XHR2YWwgPSBlbGVtLnN0eWxlWyBuYW1lIF07XG5cdFx0fVxuXG5cdFx0Ly8gQ29tcHV0ZWQgdW5pdCBpcyBub3QgcGl4ZWxzLiBTdG9wIGhlcmUgYW5kIHJldHVybi5cblx0XHRpZiAoIHJudW1ub25weC50ZXN0KHZhbCkgKSB7XG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH1cblxuXHRcdC8vIENoZWNrIGZvciBzdHlsZSBpbiBjYXNlIGEgYnJvd3NlciB3aGljaCByZXR1cm5zIHVucmVsaWFibGUgdmFsdWVzXG5cdFx0Ly8gZm9yIGdldENvbXB1dGVkU3R5bGUgc2lsZW50bHkgZmFsbHMgYmFjayB0byB0aGUgcmVsaWFibGUgZWxlbS5zdHlsZVxuXHRcdHZhbHVlSXNCb3JkZXJCb3ggPSBpc0JvcmRlckJveCAmJlxuXHRcdFx0KCBzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCkgfHwgdmFsID09PSBlbGVtLnN0eWxlWyBuYW1lIF0gKTtcblxuXHRcdC8vIE5vcm1hbGl6ZSBcIlwiLCBhdXRvLCBhbmQgcHJlcGFyZSBmb3IgZXh0cmFcblx0XHR2YWwgPSBwYXJzZUZsb2F0KCB2YWwgKSB8fCAwO1xuXHR9XG5cblx0Ly8gVXNlIHRoZSBhY3RpdmUgYm94LXNpemluZyBtb2RlbCB0byBhZGQvc3VidHJhY3QgaXJyZWxldmFudCBzdHlsZXNcblx0cmV0dXJuICggdmFsICtcblx0XHRhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdGVsZW0sXG5cdFx0XHRuYW1lLFxuXHRcdFx0ZXh0cmEgfHwgKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApLFxuXHRcdFx0dmFsdWVJc0JvcmRlckJveCxcblx0XHRcdHN0eWxlc1xuXHRcdClcblx0KSArIFwicHhcIjtcbn1cblxuZnVuY3Rpb24gc2hvd0hpZGUoIGVsZW1lbnRzLCBzaG93ICkge1xuXHR2YXIgZGlzcGxheSwgZWxlbSwgaGlkZGVuLFxuXHRcdHZhbHVlcyA9IFtdLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBlbGVtZW50cy5sZW5ndGg7XG5cblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0aWYgKCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFfcHJpdi5nZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiICk7XG5cdFx0ZGlzcGxheSA9IGVsZW0uc3R5bGUuZGlzcGxheTtcblx0XHRpZiAoIHNob3cgKSB7XG5cdFx0XHQvLyBSZXNldCB0aGUgaW5saW5lIGRpc3BsYXkgb2YgdGhpcyBlbGVtZW50IHRvIGxlYXJuIGlmIGl0IGlzXG5cdFx0XHQvLyBiZWluZyBoaWRkZW4gYnkgY2FzY2FkZWQgcnVsZXMgb3Igbm90XG5cdFx0XHRpZiAoICF2YWx1ZXNbIGluZGV4IF0gJiYgZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9IFwiXCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCBlbGVtZW50cyB3aGljaCBoYXZlIGJlZW4gb3ZlcnJpZGRlbiB3aXRoIGRpc3BsYXk6IG5vbmVcblx0XHRcdC8vIGluIGEgc3R5bGVzaGVldCB0byB3aGF0ZXZlciB0aGUgZGVmYXVsdCBicm93c2VyIHN0eWxlIGlzXG5cdFx0XHQvLyBmb3Igc3VjaCBhbiBlbGVtZW50XG5cdFx0XHRpZiAoIGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJcIiAmJiBpc0hpZGRlbiggZWxlbSApICkge1xuXHRcdFx0XHR2YWx1ZXNbIGluZGV4IF0gPSBkYXRhX3ByaXYuYWNjZXNzKCBlbGVtLCBcIm9sZGRpc3BsYXlcIiwgZGVmYXVsdERpc3BsYXkoZWxlbS5ub2RlTmFtZSkgKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aGlkZGVuID0gaXNIaWRkZW4oIGVsZW0gKTtcblxuXHRcdFx0aWYgKCBkaXNwbGF5ICE9PSBcIm5vbmVcIiB8fCAhaGlkZGVuICkge1xuXHRcdFx0XHRkYXRhX3ByaXYuc2V0KCBlbGVtLCBcIm9sZGRpc3BsYXlcIiwgaGlkZGVuID8gZGlzcGxheSA6IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBTZXQgdGhlIGRpc3BsYXkgb2YgbW9zdCBvZiB0aGUgZWxlbWVudHMgaW4gYSBzZWNvbmQgbG9vcFxuXHQvLyB0byBhdm9pZCB0aGUgY29uc3RhbnQgcmVmbG93XG5cdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0ZWxlbSA9IGVsZW1lbnRzWyBpbmRleCBdO1xuXHRcdGlmICggIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0aWYgKCAhc2hvdyB8fCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiIHx8IGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJcIiApIHtcblx0XHRcdGVsZW0uc3R5bGUuZGlzcGxheSA9IHNob3cgPyB2YWx1ZXNbIGluZGV4IF0gfHwgXCJcIiA6IFwibm9uZVwiO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50cztcbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cblx0Ly8gQWRkIGluIHN0eWxlIHByb3BlcnR5IGhvb2tzIGZvciBvdmVycmlkaW5nIHRoZSBkZWZhdWx0XG5cdC8vIGJlaGF2aW9yIG9mIGdldHRpbmcgYW5kIHNldHRpbmcgYSBzdHlsZSBwcm9wZXJ0eVxuXHRjc3NIb29rczoge1xuXHRcdG9wYWNpdHk6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0XHRcdFx0Ly8gV2Ugc2hvdWxkIGFsd2F5cyBnZXQgYSBudW1iZXIgYmFjayBmcm9tIG9wYWNpdHlcblx0XHRcdFx0XHR2YXIgcmV0ID0gY3VyQ1NTKCBlbGVtLCBcIm9wYWNpdHlcIiApO1xuXHRcdFx0XHRcdHJldHVybiByZXQgPT09IFwiXCIgPyBcIjFcIiA6IHJldDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvLyBEb24ndCBhdXRvbWF0aWNhbGx5IGFkZCBcInB4XCIgdG8gdGhlc2UgcG9zc2libHktdW5pdGxlc3MgcHJvcGVydGllc1xuXHRjc3NOdW1iZXI6IHtcblx0XHRcImNvbHVtbkNvdW50XCI6IHRydWUsXG5cdFx0XCJmaWxsT3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwiZmxleEdyb3dcIjogdHJ1ZSxcblx0XHRcImZsZXhTaHJpbmtcIjogdHJ1ZSxcblx0XHRcImZvbnRXZWlnaHRcIjogdHJ1ZSxcblx0XHRcImxpbmVIZWlnaHRcIjogdHJ1ZSxcblx0XHRcIm9wYWNpdHlcIjogdHJ1ZSxcblx0XHRcIm9yZGVyXCI6IHRydWUsXG5cdFx0XCJvcnBoYW5zXCI6IHRydWUsXG5cdFx0XCJ3aWRvd3NcIjogdHJ1ZSxcblx0XHRcInpJbmRleFwiOiB0cnVlLFxuXHRcdFwiem9vbVwiOiB0cnVlXG5cdH0sXG5cblx0Ly8gQWRkIGluIHByb3BlcnRpZXMgd2hvc2UgbmFtZXMgeW91IHdpc2ggdG8gZml4IGJlZm9yZVxuXHQvLyBzZXR0aW5nIG9yIGdldHRpbmcgdGhlIHZhbHVlXG5cdGNzc1Byb3BzOiB7XG5cdFx0XCJmbG9hdFwiOiBcImNzc0Zsb2F0XCJcblx0fSxcblxuXHQvLyBHZXQgYW5kIHNldCB0aGUgc3R5bGUgcHJvcGVydHkgb24gYSBET00gTm9kZVxuXHRzdHlsZTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlLCBleHRyYSApIHtcblxuXHRcdC8vIERvbid0IHNldCBzdHlsZXMgb24gdGV4dCBhbmQgY29tbWVudCBub2Rlc1xuXHRcdGlmICggIWVsZW0gfHwgZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4IHx8ICFlbGVtLnN0eWxlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZVxuXHRcdHZhciByZXQsIHR5cGUsIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICksXG5cdFx0XHRzdHlsZSA9IGVsZW0uc3R5bGU7XG5cblx0XHRuYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8ICggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIHN0eWxlLCBvcmlnTmFtZSApICk7XG5cblx0XHQvLyBHZXRzIGhvb2sgZm9yIHRoZSBwcmVmaXhlZCB2ZXJzaW9uLCB0aGVuIHVucHJlZml4ZWQgdmVyc2lvblxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gfHwgalF1ZXJ5LmNzc0hvb2tzWyBvcmlnTmFtZSBdO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgd2UncmUgc2V0dGluZyBhIHZhbHVlXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0dHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuXHRcdFx0Ly8gQ29udmVydCBcIis9XCIgb3IgXCItPVwiIHRvIHJlbGF0aXZlIG51bWJlcnMgKCM3MzQ1KVxuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICYmIChyZXQgPSBycmVsTnVtLmV4ZWMoIHZhbHVlICkpICkge1xuXHRcdFx0XHR2YWx1ZSA9ICggcmV0WzFdICsgMSApICogcmV0WzJdICsgcGFyc2VGbG9hdCggalF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApICk7XG5cdFx0XHRcdC8vIEZpeGVzIGJ1ZyAjOTIzN1xuXHRcdFx0XHR0eXBlID0gXCJudW1iZXJcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgbnVsbCBhbmQgTmFOIHZhbHVlcyBhcmVuJ3Qgc2V0ICgjNzExNilcblx0XHRcdGlmICggdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWUgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBudW1iZXIsIGFkZCAncHgnIHRvIHRoZSAoZXhjZXB0IGZvciBjZXJ0YWluIENTUyBwcm9wZXJ0aWVzKVxuXHRcdFx0aWYgKCB0eXBlID09PSBcIm51bWJlclwiICYmICFqUXVlcnkuY3NzTnVtYmVyWyBvcmlnTmFtZSBdICkge1xuXHRcdFx0XHR2YWx1ZSArPSBcInB4XCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0XHRcdC8vIGJhY2tncm91bmQtKiBwcm9wcyBhZmZlY3Qgb3JpZ2luYWwgY2xvbmUncyB2YWx1ZXNcblx0XHRcdGlmICggIXN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlICYmIHZhbHVlID09PSBcIlwiICYmIG5hbWUuaW5kZXhPZiggXCJiYWNrZ3JvdW5kXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0c3R5bGVbIG5hbWUgXSA9IFwiaW5oZXJpdFwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkLCB1c2UgdGhhdCB2YWx1ZSwgb3RoZXJ3aXNlIGp1c3Qgc2V0IHRoZSBzcGVjaWZpZWQgdmFsdWVcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoXCJzZXRcIiBpbiBob29rcykgfHwgKHZhbHVlID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0c3R5bGVbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBub24tY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5nZXQoIGVsZW0sIGZhbHNlLCBleHRyYSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdGhlcndpc2UganVzdCBnZXQgdGhlIHZhbHVlIGZyb20gdGhlIHN0eWxlIG9iamVjdFxuXHRcdFx0cmV0dXJuIHN0eWxlWyBuYW1lIF07XG5cdFx0fVxuXHR9LFxuXG5cdGNzczogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGV4dHJhLCBzdHlsZXMgKSB7XG5cdFx0dmFyIHZhbCwgbnVtLCBob29rcyxcblx0XHRcdG9yaWdOYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZSApO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0bmFtZSA9IGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSB8fCAoIGpRdWVyeS5jc3NQcm9wc1sgb3JpZ05hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBlbGVtLnN0eWxlLCBvcmlnTmFtZSApICk7XG5cblx0XHQvLyBUcnkgcHJlZml4ZWQgbmFtZSBmb2xsb3dlZCBieSB0aGUgdW5wcmVmaXhlZCBuYW1lXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbCA9IGhvb2tzLmdldCggZWxlbSwgdHJ1ZSwgZXh0cmEgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2UsIGlmIGEgd2F5IHRvIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZXhpc3RzLCB1c2UgdGhhdFxuXHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdH1cblxuXHRcdC8vIENvbnZlcnQgXCJub3JtYWxcIiB0byBjb21wdXRlZCB2YWx1ZVxuXHRcdGlmICggdmFsID09PSBcIm5vcm1hbFwiICYmIG5hbWUgaW4gY3NzTm9ybWFsVHJhbnNmb3JtICkge1xuXHRcdFx0dmFsID0gY3NzTm9ybWFsVHJhbnNmb3JtWyBuYW1lIF07XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBudW1lcmljIGlmIGZvcmNlZCBvciBhIHF1YWxpZmllciB3YXMgcHJvdmlkZWQgYW5kIHZhbCBsb29rcyBudW1lcmljXG5cdFx0aWYgKCBleHRyYSA9PT0gXCJcIiB8fCBleHRyYSApIHtcblx0XHRcdG51bSA9IHBhcnNlRmxvYXQoIHZhbCApO1xuXHRcdFx0cmV0dXJuIGV4dHJhID09PSB0cnVlIHx8IGpRdWVyeS5pc051bWVyaWMoIG51bSApID8gbnVtIHx8IDAgOiB2YWw7XG5cdFx0fVxuXHRcdHJldHVybiB2YWw7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZWFjaChbIFwiaGVpZ2h0XCIsIFwid2lkdGhcIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF0gPSB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQsIGV4dHJhICkge1xuXHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdFx0XHQvLyBDZXJ0YWluIGVsZW1lbnRzIGNhbiBoYXZlIGRpbWVuc2lvbiBpbmZvIGlmIHdlIGludmlzaWJseSBzaG93IHRoZW1cblx0XHRcdFx0Ly8gYnV0IGl0IG11c3QgaGF2ZSBhIGN1cnJlbnQgZGlzcGxheSBzdHlsZSB0aGF0IHdvdWxkIGJlbmVmaXRcblx0XHRcdFx0cmV0dXJuIHJkaXNwbGF5c3dhcC50ZXN0KCBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApICkgJiYgZWxlbS5vZmZzZXRXaWR0aCA9PT0gMCA/XG5cdFx0XHRcdFx0alF1ZXJ5LnN3YXAoIGVsZW0sIGNzc1Nob3csIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICk7XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIG5hbWUsIGV4dHJhICk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHtcblx0XHRcdHZhciBzdHlsZXMgPSBleHRyYSAmJiBnZXRTdHlsZXMoIGVsZW0gKTtcblx0XHRcdHJldHVybiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIGV4dHJhID9cblx0XHRcdFx0YXVnbWVudFdpZHRoT3JIZWlnaHQoXG5cdFx0XHRcdFx0ZWxlbSxcblx0XHRcdFx0XHRuYW1lLFxuXHRcdFx0XHRcdGV4dHJhLFxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCIsXG5cdFx0XHRcdFx0c3R5bGVzXG5cdFx0XHRcdCkgOiAwXG5cdFx0XHQpO1xuXHRcdH1cblx0fTtcbn0pO1xuXG4vLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xualF1ZXJ5LmNzc0hvb2tzLm1hcmdpblJpZ2h0ID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnJlbGlhYmxlTWFyZ2luUmlnaHQsXG5cdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5zd2FwKCBlbGVtLCB7IFwiZGlzcGxheVwiOiBcImlubGluZS1ibG9ja1wiIH0sXG5cdFx0XHRcdGN1ckNTUywgWyBlbGVtLCBcIm1hcmdpblJpZ2h0XCIgXSApO1xuXHRcdH1cblx0fVxuKTtcblxuLy8gVGhlc2UgaG9va3MgYXJlIHVzZWQgYnkgYW5pbWF0ZSB0byBleHBhbmQgcHJvcGVydGllc1xualF1ZXJ5LmVhY2goe1xuXHRtYXJnaW46IFwiXCIsXG5cdHBhZGRpbmc6IFwiXCIsXG5cdGJvcmRlcjogXCJXaWR0aFwiXG59LCBmdW5jdGlvbiggcHJlZml4LCBzdWZmaXggKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0gPSB7XG5cdFx0ZXhwYW5kOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgaSA9IDAsXG5cdFx0XHRcdGV4cGFuZGVkID0ge30sXG5cblx0XHRcdFx0Ly8gQXNzdW1lcyBhIHNpbmdsZSBudW1iZXIgaWYgbm90IGEgc3RyaW5nXG5cdFx0XHRcdHBhcnRzID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gdmFsdWUuc3BsaXQoXCIgXCIpIDogWyB2YWx1ZSBdO1xuXG5cdFx0XHRmb3IgKCA7IGkgPCA0OyBpKysgKSB7XG5cdFx0XHRcdGV4cGFuZGVkWyBwcmVmaXggKyBjc3NFeHBhbmRbIGkgXSArIHN1ZmZpeCBdID1cblx0XHRcdFx0XHRwYXJ0c1sgaSBdIHx8IHBhcnRzWyBpIC0gMiBdIHx8IHBhcnRzWyAwIF07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBleHBhbmRlZDtcblx0XHR9XG5cdH07XG5cblx0aWYgKCAhcm1hcmdpbi50ZXN0KCBwcmVmaXggKSApIHtcblx0XHRqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdLnNldCA9IHNldFBvc2l0aXZlTnVtYmVyO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGNzczogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcblx0XHRcdHZhciBzdHlsZXMsIGxlbixcblx0XHRcdFx0bWFwID0ge30sXG5cdFx0XHRcdGkgPSAwO1xuXG5cdFx0XHRpZiAoIGpRdWVyeS5pc0FycmF5KCBuYW1lICkgKSB7XG5cdFx0XHRcdHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApO1xuXHRcdFx0XHRsZW4gPSBuYW1lLmxlbmd0aDtcblxuXHRcdFx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0XHRtYXBbIG5hbWVbIGkgXSBdID0galF1ZXJ5LmNzcyggZWxlbSwgbmFtZVsgaSBdLCBmYWxzZSwgc3R5bGVzICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbWFwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgbmFtZSwgdmFsdWUgKSA6XG5cdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIG5hbWUgKTtcblx0XHR9LCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblx0c2hvdzogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzLCB0cnVlICk7XG5cdH0sXG5cdGhpZGU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93SGlkZSggdGhpcyApO1xuXHR9LFxuXHR0b2dnbGU6IGZ1bmN0aW9uKCBzdGF0ZSApIHtcblx0XHRpZiAoIHR5cGVvZiBzdGF0ZSA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRyZXR1cm4gc3RhdGUgPyB0aGlzLnNob3coKSA6IHRoaXMuaGlkZSgpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIGlzSGlkZGVuKCB0aGlzICkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnNob3coKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmhpZGUoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxufSk7XG5cblxuZnVuY3Rpb24gVHdlZW4oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICkge1xuXHRyZXR1cm4gbmV3IFR3ZWVuLnByb3RvdHlwZS5pbml0KCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApO1xufVxualF1ZXJ5LlR3ZWVuID0gVHdlZW47XG5cblR3ZWVuLnByb3RvdHlwZSA9IHtcblx0Y29uc3RydWN0b3I6IFR3ZWVuLFxuXHRpbml0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcsIHVuaXQgKSB7XG5cdFx0dGhpcy5lbGVtID0gZWxlbTtcblx0XHR0aGlzLnByb3AgPSBwcm9wO1xuXHRcdHRoaXMuZWFzaW5nID0gZWFzaW5nIHx8IFwic3dpbmdcIjtcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHRcdHRoaXMuc3RhcnQgPSB0aGlzLm5vdyA9IHRoaXMuY3VyKCk7XG5cdFx0dGhpcy5lbmQgPSBlbmQ7XG5cdFx0dGhpcy51bml0ID0gdW5pdCB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKTtcblx0fSxcblx0Y3VyOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdO1xuXG5cdFx0cmV0dXJuIGhvb2tzICYmIGhvb2tzLmdldCA/XG5cdFx0XHRob29rcy5nZXQoIHRoaXMgKSA6XG5cdFx0XHRUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KCB0aGlzICk7XG5cdH0sXG5cdHJ1bjogZnVuY3Rpb24oIHBlcmNlbnQgKSB7XG5cdFx0dmFyIGVhc2VkLFxuXHRcdFx0aG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdO1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKSB7XG5cdFx0XHR0aGlzLnBvcyA9IGVhc2VkID0galF1ZXJ5LmVhc2luZ1sgdGhpcy5lYXNpbmcgXShcblx0XHRcdFx0cGVyY2VudCwgdGhpcy5vcHRpb25zLmR1cmF0aW9uICogcGVyY2VudCwgMCwgMSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uXG5cdFx0XHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnBvcyA9IGVhc2VkID0gcGVyY2VudDtcblx0XHR9XG5cdFx0dGhpcy5ub3cgPSAoIHRoaXMuZW5kIC0gdGhpcy5zdGFydCApICogZWFzZWQgKyB0aGlzLnN0YXJ0O1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuc3RlcCApIHtcblx0XHRcdHRoaXMub3B0aW9ucy5zdGVwLmNhbGwoIHRoaXMuZWxlbSwgdGhpcy5ub3csIHRoaXMgKTtcblx0XHR9XG5cblx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnNldCApIHtcblx0XHRcdGhvb2tzLnNldCggdGhpcyApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KCB0aGlzICk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59O1xuXG5Ud2Vlbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGUgPSBUd2Vlbi5wcm90b3R5cGU7XG5cblR3ZWVuLnByb3BIb29rcyA9IHtcblx0X2RlZmF1bHQ6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XHRcdHZhciByZXN1bHQ7XG5cblx0XHRcdGlmICggdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdICE9IG51bGwgJiZcblx0XHRcdFx0KCF0d2Vlbi5lbGVtLnN0eWxlIHx8IHR3ZWVuLmVsZW0uc3R5bGVbIHR3ZWVuLnByb3AgXSA9PSBudWxsKSApIHtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUGFzc2luZyBhbiBlbXB0eSBzdHJpbmcgYXMgYSAzcmQgcGFyYW1ldGVyIHRvIC5jc3Mgd2lsbCBhdXRvbWF0aWNhbGx5XG5cdFx0XHQvLyBhdHRlbXB0IGEgcGFyc2VGbG9hdCBhbmQgZmFsbGJhY2sgdG8gYSBzdHJpbmcgaWYgdGhlIHBhcnNlIGZhaWxzLlxuXHRcdFx0Ly8gU2ltcGxlIHZhbHVlcyBzdWNoIGFzIFwiMTBweFwiIGFyZSBwYXJzZWQgdG8gRmxvYXQ7XG5cdFx0XHQvLyBjb21wbGV4IHZhbHVlcyBzdWNoIGFzIFwicm90YXRlKDFyYWQpXCIgYXJlIHJldHVybmVkIGFzLWlzLlxuXHRcdFx0cmVzdWx0ID0galF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgXCJcIiApO1xuXHRcdFx0Ly8gRW1wdHkgc3RyaW5ncywgbnVsbCwgdW5kZWZpbmVkIGFuZCBcImF1dG9cIiBhcmUgY29udmVydGVkIHRvIDAuXG5cdFx0XHRyZXR1cm4gIXJlc3VsdCB8fCByZXN1bHQgPT09IFwiYXV0b1wiID8gMCA6IHJlc3VsdDtcblx0XHR9LFxuXHRcdHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0Ly8gVXNlIHN0ZXAgaG9vayBmb3IgYmFjayBjb21wYXQuXG5cdFx0XHQvLyBVc2UgY3NzSG9vayBpZiBpdHMgdGhlcmUuXG5cdFx0XHQvLyBVc2UgLnN0eWxlIGlmIGF2YWlsYWJsZSBhbmQgdXNlIHBsYWluIHByb3BlcnRpZXMgd2hlcmUgYXZhaWxhYmxlLlxuXHRcdFx0aWYgKCBqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdICkge1xuXHRcdFx0XHRqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdKCB0d2VlbiApO1xuXHRcdFx0fSBlbHNlIGlmICggdHdlZW4uZWxlbS5zdHlsZSAmJiAoIHR3ZWVuLmVsZW0uc3R5bGVbIGpRdWVyeS5jc3NQcm9wc1sgdHdlZW4ucHJvcCBdIF0gIT0gbnVsbCB8fCBqUXVlcnkuY3NzSG9va3NbIHR3ZWVuLnByb3AgXSApICkge1xuXHRcdFx0XHRqUXVlcnkuc3R5bGUoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIHR3ZWVuLm5vdyArIHR3ZWVuLnVuaXQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbi8vIFN1cHBvcnQ6IElFOVxuLy8gUGFuaWMgYmFzZWQgYXBwcm9hY2ggdG8gc2V0dGluZyB0aGluZ3Mgb24gZGlzY29ubmVjdGVkIG5vZGVzXG5Ud2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wID0gVHdlZW4ucHJvcEhvb2tzLnNjcm9sbExlZnQgPSB7XG5cdHNldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAmJiB0d2Vlbi5lbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gPSB0d2Vlbi5ub3c7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZWFzaW5nID0ge1xuXHRsaW5lYXI6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiBwO1xuXHR9LFxuXHRzd2luZzogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIDAuNSAtIE1hdGguY29zKCBwICogTWF0aC5QSSApIC8gMjtcblx0fVxufTtcblxualF1ZXJ5LmZ4ID0gVHdlZW4ucHJvdG90eXBlLmluaXQ7XG5cbi8vIEJhY2sgQ29tcGF0IDwxLjggZXh0ZW5zaW9uIHBvaW50XG5qUXVlcnkuZnguc3RlcCA9IHt9O1xuXG5cblxuXG52YXJcblx0ZnhOb3csIHRpbWVySWQsXG5cdHJmeHR5cGVzID0gL14oPzp0b2dnbGV8c2hvd3xoaWRlKSQvLFxuXHRyZnhudW0gPSBuZXcgUmVnRXhwKCBcIl4oPzooWystXSk9fCkoXCIgKyBwbnVtICsgXCIpKFthLXolXSopJFwiLCBcImlcIiApLFxuXHRycnVuID0gL3F1ZXVlSG9va3MkLyxcblx0YW5pbWF0aW9uUHJlZmlsdGVycyA9IFsgZGVmYXVsdFByZWZpbHRlciBdLFxuXHR0d2VlbmVycyA9IHtcblx0XHRcIipcIjogWyBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgdHdlZW4gPSB0aGlzLmNyZWF0ZVR3ZWVuKCBwcm9wLCB2YWx1ZSApLFxuXHRcdFx0XHR0YXJnZXQgPSB0d2Vlbi5jdXIoKSxcblx0XHRcdFx0cGFydHMgPSByZnhudW0uZXhlYyggdmFsdWUgKSxcblx0XHRcdFx0dW5pdCA9IHBhcnRzICYmIHBhcnRzWyAzIF0gfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gPyBcIlwiIDogXCJweFwiICksXG5cblx0XHRcdFx0Ly8gU3RhcnRpbmcgdmFsdWUgY29tcHV0YXRpb24gaXMgcmVxdWlyZWQgZm9yIHBvdGVudGlhbCB1bml0IG1pc21hdGNoZXNcblx0XHRcdFx0c3RhcnQgPSAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSB8fCB1bml0ICE9PSBcInB4XCIgJiYgK3RhcmdldCApICYmXG5cdFx0XHRcdFx0cmZ4bnVtLmV4ZWMoIGpRdWVyeS5jc3MoIHR3ZWVuLmVsZW0sIHByb3AgKSApLFxuXHRcdFx0XHRzY2FsZSA9IDEsXG5cdFx0XHRcdG1heEl0ZXJhdGlvbnMgPSAyMDtcblxuXHRcdFx0aWYgKCBzdGFydCAmJiBzdGFydFsgMyBdICE9PSB1bml0ICkge1xuXHRcdFx0XHQvLyBUcnVzdCB1bml0cyByZXBvcnRlZCBieSBqUXVlcnkuY3NzXG5cdFx0XHRcdHVuaXQgPSB1bml0IHx8IHN0YXJ0WyAzIF07XG5cblx0XHRcdFx0Ly8gTWFrZSBzdXJlIHdlIHVwZGF0ZSB0aGUgdHdlZW4gcHJvcGVydGllcyBsYXRlciBvblxuXHRcdFx0XHRwYXJ0cyA9IHBhcnRzIHx8IFtdO1xuXG5cdFx0XHRcdC8vIEl0ZXJhdGl2ZWx5IGFwcHJveGltYXRlIGZyb20gYSBub256ZXJvIHN0YXJ0aW5nIHBvaW50XG5cdFx0XHRcdHN0YXJ0ID0gK3RhcmdldCB8fCAxO1xuXG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHQvLyBJZiBwcmV2aW91cyBpdGVyYXRpb24gemVyb2VkIG91dCwgZG91YmxlIHVudGlsIHdlIGdldCAqc29tZXRoaW5nKi5cblx0XHRcdFx0XHQvLyBVc2Ugc3RyaW5nIGZvciBkb3VibGluZyBzbyB3ZSBkb24ndCBhY2NpZGVudGFsbHkgc2VlIHNjYWxlIGFzIHVuY2hhbmdlZCBiZWxvd1xuXHRcdFx0XHRcdHNjYWxlID0gc2NhbGUgfHwgXCIuNVwiO1xuXG5cdFx0XHRcdFx0Ly8gQWRqdXN0IGFuZCBhcHBseVxuXHRcdFx0XHRcdHN0YXJ0ID0gc3RhcnQgLyBzY2FsZTtcblx0XHRcdFx0XHRqUXVlcnkuc3R5bGUoIHR3ZWVuLmVsZW0sIHByb3AsIHN0YXJ0ICsgdW5pdCApO1xuXG5cdFx0XHRcdC8vIFVwZGF0ZSBzY2FsZSwgdG9sZXJhdGluZyB6ZXJvIG9yIE5hTiBmcm9tIHR3ZWVuLmN1cigpLFxuXHRcdFx0XHQvLyBicmVhayB0aGUgbG9vcCBpZiBzY2FsZSBpcyB1bmNoYW5nZWQgb3IgcGVyZmVjdCwgb3IgaWYgd2UndmUganVzdCBoYWQgZW5vdWdoXG5cdFx0XHRcdH0gd2hpbGUgKCBzY2FsZSAhPT0gKHNjYWxlID0gdHdlZW4uY3VyKCkgLyB0YXJnZXQpICYmIHNjYWxlICE9PSAxICYmIC0tbWF4SXRlcmF0aW9ucyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBVcGRhdGUgdHdlZW4gcHJvcGVydGllc1xuXHRcdFx0aWYgKCBwYXJ0cyApIHtcblx0XHRcdFx0c3RhcnQgPSB0d2Vlbi5zdGFydCA9ICtzdGFydCB8fCArdGFyZ2V0IHx8IDA7XG5cdFx0XHRcdHR3ZWVuLnVuaXQgPSB1bml0O1xuXHRcdFx0XHQvLyBJZiBhICs9Ly09IHRva2VuIHdhcyBwcm92aWRlZCwgd2UncmUgZG9pbmcgYSByZWxhdGl2ZSBhbmltYXRpb25cblx0XHRcdFx0dHdlZW4uZW5kID0gcGFydHNbIDEgXSA/XG5cdFx0XHRcdFx0c3RhcnQgKyAoIHBhcnRzWyAxIF0gKyAxICkgKiBwYXJ0c1sgMiBdIDpcblx0XHRcdFx0XHQrcGFydHNbIDIgXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdH0gXVxuXHR9O1xuXG4vLyBBbmltYXRpb25zIGNyZWF0ZWQgc3luY2hyb25vdXNseSB3aWxsIHJ1biBzeW5jaHJvbm91c2x5XG5mdW5jdGlvbiBjcmVhdGVGeE5vdygpIHtcblx0c2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRmeE5vdyA9IHVuZGVmaW5lZDtcblx0fSk7XG5cdHJldHVybiAoIGZ4Tm93ID0galF1ZXJ5Lm5vdygpICk7XG59XG5cbi8vIEdlbmVyYXRlIHBhcmFtZXRlcnMgdG8gY3JlYXRlIGEgc3RhbmRhcmQgYW5pbWF0aW9uXG5mdW5jdGlvbiBnZW5GeCggdHlwZSwgaW5jbHVkZVdpZHRoICkge1xuXHR2YXIgd2hpY2gsXG5cdFx0aSA9IDAsXG5cdFx0YXR0cnMgPSB7IGhlaWdodDogdHlwZSB9O1xuXG5cdC8vIElmIHdlIGluY2x1ZGUgd2lkdGgsIHN0ZXAgdmFsdWUgaXMgMSB0byBkbyBhbGwgY3NzRXhwYW5kIHZhbHVlcyxcblx0Ly8gb3RoZXJ3aXNlIHN0ZXAgdmFsdWUgaXMgMiB0byBza2lwIG92ZXIgTGVmdCBhbmQgUmlnaHRcblx0aW5jbHVkZVdpZHRoID0gaW5jbHVkZVdpZHRoID8gMSA6IDA7XG5cdGZvciAoIDsgaSA8IDQgOyBpICs9IDIgLSBpbmNsdWRlV2lkdGggKSB7XG5cdFx0d2hpY2ggPSBjc3NFeHBhbmRbIGkgXTtcblx0XHRhdHRyc1sgXCJtYXJnaW5cIiArIHdoaWNoIF0gPSBhdHRyc1sgXCJwYWRkaW5nXCIgKyB3aGljaCBdID0gdHlwZTtcblx0fVxuXG5cdGlmICggaW5jbHVkZVdpZHRoICkge1xuXHRcdGF0dHJzLm9wYWNpdHkgPSBhdHRycy53aWR0aCA9IHR5cGU7XG5cdH1cblxuXHRyZXR1cm4gYXR0cnM7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVR3ZWVuKCB2YWx1ZSwgcHJvcCwgYW5pbWF0aW9uICkge1xuXHR2YXIgdHdlZW4sXG5cdFx0Y29sbGVjdGlvbiA9ICggdHdlZW5lcnNbIHByb3AgXSB8fCBbXSApLmNvbmNhdCggdHdlZW5lcnNbIFwiKlwiIF0gKSxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0aWYgKCAodHdlZW4gPSBjb2xsZWN0aW9uWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgcHJvcCwgdmFsdWUgKSkgKSB7XG5cblx0XHRcdC8vIFdlJ3JlIGRvbmUgd2l0aCB0aGlzIHByb3BlcnR5XG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRQcmVmaWx0ZXIoIGVsZW0sIHByb3BzLCBvcHRzICkge1xuXHQvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXG5cdHZhciBwcm9wLCB2YWx1ZSwgdG9nZ2xlLCB0d2VlbiwgaG9va3MsIG9sZGZpcmUsIGRpc3BsYXksIGNoZWNrRGlzcGxheSxcblx0XHRhbmltID0gdGhpcyxcblx0XHRvcmlnID0ge30sXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlLFxuXHRcdGhpZGRlbiA9IGVsZW0ubm9kZVR5cGUgJiYgaXNIaWRkZW4oIGVsZW0gKSxcblx0XHRkYXRhU2hvdyA9IGRhdGFfcHJpdi5nZXQoIGVsZW0sIFwiZnhzaG93XCIgKTtcblxuXHQvLyBIYW5kbGUgcXVldWU6IGZhbHNlIHByb21pc2VzXG5cdGlmICggIW9wdHMucXVldWUgKSB7XG5cdFx0aG9va3MgPSBqUXVlcnkuX3F1ZXVlSG9va3MoIGVsZW0sIFwiZnhcIiApO1xuXHRcdGlmICggaG9va3MudW5xdWV1ZWQgPT0gbnVsbCApIHtcblx0XHRcdGhvb2tzLnVucXVldWVkID0gMDtcblx0XHRcdG9sZGZpcmUgPSBob29rcy5lbXB0eS5maXJlO1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICFob29rcy51bnF1ZXVlZCApIHtcblx0XHRcdFx0XHRvbGRmaXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0fVxuXHRcdGhvb2tzLnVucXVldWVkKys7XG5cblx0XHRhbmltLmFsd2F5cyhmdW5jdGlvbigpIHtcblx0XHRcdC8vIEVuc3VyZSB0aGUgY29tcGxldGUgaGFuZGxlciBpcyBjYWxsZWQgYmVmb3JlIHRoaXMgY29tcGxldGVzXG5cdFx0XHRhbmltLmFsd2F5cyhmdW5jdGlvbigpIHtcblx0XHRcdFx0aG9va3MudW5xdWV1ZWQtLTtcblx0XHRcdFx0aWYgKCAhalF1ZXJ5LnF1ZXVlKCBlbGVtLCBcImZ4XCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9KTtcblx0fVxuXG5cdC8vIEhlaWdodC93aWR0aCBvdmVyZmxvdyBwYXNzXG5cdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIFwiaGVpZ2h0XCIgaW4gcHJvcHMgfHwgXCJ3aWR0aFwiIGluIHByb3BzICkgKSB7XG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgbm90aGluZyBzbmVha3Mgb3V0XG5cdFx0Ly8gUmVjb3JkIGFsbCAzIG92ZXJmbG93IGF0dHJpYnV0ZXMgYmVjYXVzZSBJRTktMTAgZG8gbm90XG5cdFx0Ly8gY2hhbmdlIHRoZSBvdmVyZmxvdyBhdHRyaWJ1dGUgd2hlbiBvdmVyZmxvd1ggYW5kXG5cdFx0Ly8gb3ZlcmZsb3dZIGFyZSBzZXQgdG8gdGhlIHNhbWUgdmFsdWVcblx0XHRvcHRzLm92ZXJmbG93ID0gWyBzdHlsZS5vdmVyZmxvdywgc3R5bGUub3ZlcmZsb3dYLCBzdHlsZS5vdmVyZmxvd1kgXTtcblxuXHRcdC8vIFNldCBkaXNwbGF5IHByb3BlcnR5IHRvIGlubGluZS1ibG9jayBmb3IgaGVpZ2h0L3dpZHRoXG5cdFx0Ly8gYW5pbWF0aW9ucyBvbiBpbmxpbmUgZWxlbWVudHMgdGhhdCBhcmUgaGF2aW5nIHdpZHRoL2hlaWdodCBhbmltYXRlZFxuXHRcdGRpc3BsYXkgPSBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApO1xuXG5cdFx0Ly8gVGVzdCBkZWZhdWx0IGRpc3BsYXkgaWYgZGlzcGxheSBpcyBjdXJyZW50bHkgXCJub25lXCJcblx0XHRjaGVja0Rpc3BsYXkgPSBkaXNwbGF5ID09PSBcIm5vbmVcIiA/XG5cdFx0XHRkYXRhX3ByaXYuZ2V0KCBlbGVtLCBcIm9sZGRpc3BsYXlcIiApIHx8IGRlZmF1bHREaXNwbGF5KCBlbGVtLm5vZGVOYW1lICkgOiBkaXNwbGF5O1xuXG5cdFx0aWYgKCBjaGVja0Rpc3BsYXkgPT09IFwiaW5saW5lXCIgJiYgalF1ZXJ5LmNzcyggZWxlbSwgXCJmbG9hdFwiICkgPT09IFwibm9uZVwiICkge1xuXHRcdFx0c3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCBvcHRzLm92ZXJmbG93ICkge1xuXHRcdHN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblx0XHRhbmltLmFsd2F5cyhmdW5jdGlvbigpIHtcblx0XHRcdHN0eWxlLm92ZXJmbG93ID0gb3B0cy5vdmVyZmxvd1sgMCBdO1xuXHRcdFx0c3R5bGUub3ZlcmZsb3dYID0gb3B0cy5vdmVyZmxvd1sgMSBdO1xuXHRcdFx0c3R5bGUub3ZlcmZsb3dZID0gb3B0cy5vdmVyZmxvd1sgMiBdO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gc2hvdy9oaWRlIHBhc3Ncblx0Zm9yICggcHJvcCBpbiBwcm9wcyApIHtcblx0XHR2YWx1ZSA9IHByb3BzWyBwcm9wIF07XG5cdFx0aWYgKCByZnh0eXBlcy5leGVjKCB2YWx1ZSApICkge1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBwcm9wIF07XG5cdFx0XHR0b2dnbGUgPSB0b2dnbGUgfHwgdmFsdWUgPT09IFwidG9nZ2xlXCI7XG5cdFx0XHRpZiAoIHZhbHVlID09PSAoIGhpZGRlbiA/IFwiaGlkZVwiIDogXCJzaG93XCIgKSApIHtcblxuXHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBkYXRhU2hvdyBsZWZ0IG92ZXIgZnJvbSBhIHN0b3BwZWQgaGlkZSBvciBzaG93IGFuZCB3ZSBhcmUgZ29pbmcgdG8gcHJvY2VlZCB3aXRoIHNob3csIHdlIHNob3VsZCBwcmV0ZW5kIHRvIGJlIGhpZGRlblxuXHRcdFx0XHRpZiAoIHZhbHVlID09PSBcInNob3dcIiAmJiBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0aGlkZGVuID0gdHJ1ZTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0b3JpZ1sgcHJvcCBdID0gZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSB8fCBqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AgKTtcblxuXHRcdC8vIEFueSBub24tZnggdmFsdWUgc3RvcHMgdXMgZnJvbSByZXN0b3JpbmcgdGhlIG9yaWdpbmFsIGRpc3BsYXkgdmFsdWVcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGlzcGxheSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdH1cblxuXHRpZiAoICFqUXVlcnkuaXNFbXB0eU9iamVjdCggb3JpZyApICkge1xuXHRcdGlmICggZGF0YVNob3cgKSB7XG5cdFx0XHRpZiAoIFwiaGlkZGVuXCIgaW4gZGF0YVNob3cgKSB7XG5cdFx0XHRcdGhpZGRlbiA9IGRhdGFTaG93LmhpZGRlbjtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0ZGF0YVNob3cgPSBkYXRhX3ByaXYuYWNjZXNzKCBlbGVtLCBcImZ4c2hvd1wiLCB7fSApO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHN0YXRlIGlmIGl0cyB0b2dnbGUgLSBlbmFibGVzIC5zdG9wKCkudG9nZ2xlKCkgdG8gXCJyZXZlcnNlXCJcblx0XHRpZiAoIHRvZ2dsZSApIHtcblx0XHRcdGRhdGFTaG93LmhpZGRlbiA9ICFoaWRkZW47XG5cdFx0fVxuXHRcdGlmICggaGlkZGVuICkge1xuXHRcdFx0alF1ZXJ5KCBlbGVtICkuc2hvdygpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhbmltLmRvbmUoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeSggZWxlbSApLmhpZGUoKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRhbmltLmRvbmUoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgcHJvcDtcblxuXHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgXCJmeHNob3dcIiApO1xuXHRcdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIG9yaWdbIHByb3AgXSApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGZvciAoIHByb3AgaW4gb3JpZyApIHtcblx0XHRcdHR3ZWVuID0gY3JlYXRlVHdlZW4oIGhpZGRlbiA/IGRhdGFTaG93WyBwcm9wIF0gOiAwLCBwcm9wLCBhbmltICk7XG5cblx0XHRcdGlmICggISggcHJvcCBpbiBkYXRhU2hvdyApICkge1xuXHRcdFx0XHRkYXRhU2hvd1sgcHJvcCBdID0gdHdlZW4uc3RhcnQ7XG5cdFx0XHRcdGlmICggaGlkZGVuICkge1xuXHRcdFx0XHRcdHR3ZWVuLmVuZCA9IHR3ZWVuLnN0YXJ0O1xuXHRcdFx0XHRcdHR3ZWVuLnN0YXJ0ID0gcHJvcCA9PT0gXCJ3aWR0aFwiIHx8IHByb3AgPT09IFwiaGVpZ2h0XCIgPyAxIDogMDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHQvLyBJZiB0aGlzIGlzIGEgbm9vcCBsaWtlIC5oaWRlKCkuaGlkZSgpLCByZXN0b3JlIGFuIG92ZXJ3cml0dGVuIGRpc3BsYXkgdmFsdWVcblx0fSBlbHNlIGlmICggKGRpc3BsYXkgPT09IFwibm9uZVwiID8gZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXkpID09PSBcImlubGluZVwiICkge1xuXHRcdHN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xuXHR9XG59XG5cbmZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkge1xuXHR2YXIgaW5kZXgsIG5hbWUsIGVhc2luZywgdmFsdWUsIGhvb2tzO1xuXG5cdC8vIGNhbWVsQ2FzZSwgc3BlY2lhbEVhc2luZyBhbmQgZXhwYW5kIGNzc0hvb2sgcGFzc1xuXHRmb3IgKCBpbmRleCBpbiBwcm9wcyApIHtcblx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggaW5kZXggKTtcblx0XHRlYXNpbmcgPSBzcGVjaWFsRWFzaW5nWyBuYW1lIF07XG5cdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdFx0ZWFzaW5nID0gdmFsdWVbIDEgXTtcblx0XHRcdHZhbHVlID0gcHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgMCBdO1xuXHRcdH1cblxuXHRcdGlmICggaW5kZXggIT09IG5hbWUgKSB7XG5cdFx0XHRwcm9wc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRkZWxldGUgcHJvcHNbIGluZGV4IF07XG5cdFx0fVxuXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXTtcblx0XHRpZiAoIGhvb2tzICYmIFwiZXhwYW5kXCIgaW4gaG9va3MgKSB7XG5cdFx0XHR2YWx1ZSA9IGhvb2tzLmV4cGFuZCggdmFsdWUgKTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgbmFtZSBdO1xuXG5cdFx0XHQvLyBOb3QgcXVpdGUgJC5leHRlbmQsIHRoaXMgd29uJ3Qgb3ZlcndyaXRlIGV4aXN0aW5nIGtleXMuXG5cdFx0XHQvLyBSZXVzaW5nICdpbmRleCcgYmVjYXVzZSB3ZSBoYXZlIHRoZSBjb3JyZWN0IFwibmFtZVwiXG5cdFx0XHRmb3IgKCBpbmRleCBpbiB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhKCBpbmRleCBpbiBwcm9wcyApICkge1xuXHRcdFx0XHRcdHByb3BzWyBpbmRleCBdID0gdmFsdWVbIGluZGV4IF07XG5cdFx0XHRcdFx0c3BlY2lhbEVhc2luZ1sgaW5kZXggXSA9IGVhc2luZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRzcGVjaWFsRWFzaW5nWyBuYW1lIF0gPSBlYXNpbmc7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIEFuaW1hdGlvbiggZWxlbSwgcHJvcGVydGllcywgb3B0aW9ucyApIHtcblx0dmFyIHJlc3VsdCxcblx0XHRzdG9wcGVkLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBhbmltYXRpb25QcmVmaWx0ZXJzLmxlbmd0aCxcblx0XHRkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBEb24ndCBtYXRjaCBlbGVtIGluIHRoZSA6YW5pbWF0ZWQgc2VsZWN0b3Jcblx0XHRcdGRlbGV0ZSB0aWNrLmVsZW07XG5cdFx0fSksXG5cdFx0dGljayA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBzdG9wcGVkICkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHR2YXIgY3VycmVudFRpbWUgPSBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLFxuXHRcdFx0XHRyZW1haW5pbmcgPSBNYXRoLm1heCggMCwgYW5pbWF0aW9uLnN0YXJ0VGltZSArIGFuaW1hdGlvbi5kdXJhdGlvbiAtIGN1cnJlbnRUaW1lICksXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdC8vIEFyY2hhaWMgY3Jhc2ggYnVnIHdvbid0IGFsbG93IHVzIHRvIHVzZSBgMSAtICggMC41IHx8IDAgKWAgKCMxMjQ5Nylcblx0XHRcdFx0dGVtcCA9IHJlbWFpbmluZyAvIGFuaW1hdGlvbi5kdXJhdGlvbiB8fCAwLFxuXHRcdFx0XHRwZXJjZW50ID0gMSAtIHRlbXAsXG5cdFx0XHRcdGluZGV4ID0gMCxcblx0XHRcdFx0bGVuZ3RoID0gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg7XG5cblx0XHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuXHRcdFx0XHRhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggcGVyY2VudCApO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgcGVyY2VudCwgcmVtYWluaW5nIF0pO1xuXG5cdFx0XHRpZiAoIHBlcmNlbnQgPCAxICYmIGxlbmd0aCApIHtcblx0XHRcdFx0cmV0dXJuIHJlbWFpbmluZztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiBdICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdGFuaW1hdGlvbiA9IGRlZmVycmVkLnByb21pc2Uoe1xuXHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdHByb3BzOiBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcGVydGllcyApLFxuXHRcdFx0b3B0czogalF1ZXJ5LmV4dGVuZCggdHJ1ZSwgeyBzcGVjaWFsRWFzaW5nOiB7fSB9LCBvcHRpb25zICksXG5cdFx0XHRvcmlnaW5hbFByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG5cdFx0XHRvcmlnaW5hbE9wdGlvbnM6IG9wdGlvbnMsXG5cdFx0XHRzdGFydFRpbWU6IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcblx0XHRcdHR3ZWVuczogW10sXG5cdFx0XHRjcmVhdGVUd2VlbjogZnVuY3Rpb24oIHByb3AsIGVuZCApIHtcblx0XHRcdFx0dmFyIHR3ZWVuID0galF1ZXJ5LlR3ZWVuKCBlbGVtLCBhbmltYXRpb24ub3B0cywgcHJvcCwgZW5kLFxuXHRcdFx0XHRcdFx0YW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1sgcHJvcCBdIHx8IGFuaW1hdGlvbi5vcHRzLmVhc2luZyApO1xuXHRcdFx0XHRhbmltYXRpb24udHdlZW5zLnB1c2goIHR3ZWVuICk7XG5cdFx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHRcdH0sXG5cdFx0XHRzdG9wOiBmdW5jdGlvbiggZ290b0VuZCApIHtcblx0XHRcdFx0dmFyIGluZGV4ID0gMCxcblx0XHRcdFx0XHQvLyBJZiB3ZSBhcmUgZ29pbmcgdG8gdGhlIGVuZCwgd2Ugd2FudCB0byBydW4gYWxsIHRoZSB0d2VlbnNcblx0XHRcdFx0XHQvLyBvdGhlcndpc2Ugd2Ugc2tpcCB0aGlzIHBhcnRcblx0XHRcdFx0XHRsZW5ndGggPSBnb3RvRW5kID8gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGggOiAwO1xuXHRcdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdFx0c3RvcHBlZCA9IHRydWU7XG5cdFx0XHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuXHRcdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCAxICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZXNvbHZlIHdoZW4gd2UgcGxheWVkIHRoZSBsYXN0IGZyYW1lOyBvdGhlcndpc2UsIHJlamVjdFxuXHRcdFx0XHRpZiAoIGdvdG9FbmQgKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9XG5cdFx0fSksXG5cdFx0cHJvcHMgPSBhbmltYXRpb24ucHJvcHM7XG5cblx0cHJvcEZpbHRlciggcHJvcHMsIGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmcgKTtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRyZXN1bHQgPSBhbmltYXRpb25QcmVmaWx0ZXJzWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgZWxlbSwgcHJvcHMsIGFuaW1hdGlvbi5vcHRzICk7XG5cdFx0aWYgKCByZXN1bHQgKSB7XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH1cblx0fVxuXG5cdGpRdWVyeS5tYXAoIHByb3BzLCBjcmVhdGVUd2VlbiwgYW5pbWF0aW9uICk7XG5cblx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggYW5pbWF0aW9uLm9wdHMuc3RhcnQgKSApIHtcblx0XHRhbmltYXRpb24ub3B0cy5zdGFydC5jYWxsKCBlbGVtLCBhbmltYXRpb24gKTtcblx0fVxuXG5cdGpRdWVyeS5meC50aW1lcihcblx0XHRqUXVlcnkuZXh0ZW5kKCB0aWNrLCB7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0YW5pbTogYW5pbWF0aW9uLFxuXHRcdFx0cXVldWU6IGFuaW1hdGlvbi5vcHRzLnF1ZXVlXG5cdFx0fSlcblx0KTtcblxuXHQvLyBhdHRhY2ggY2FsbGJhY2tzIGZyb20gb3B0aW9uc1xuXHRyZXR1cm4gYW5pbWF0aW9uLnByb2dyZXNzKCBhbmltYXRpb24ub3B0cy5wcm9ncmVzcyApXG5cdFx0LmRvbmUoIGFuaW1hdGlvbi5vcHRzLmRvbmUsIGFuaW1hdGlvbi5vcHRzLmNvbXBsZXRlIClcblx0XHQuZmFpbCggYW5pbWF0aW9uLm9wdHMuZmFpbCApXG5cdFx0LmFsd2F5cyggYW5pbWF0aW9uLm9wdHMuYWx3YXlzICk7XG59XG5cbmpRdWVyeS5BbmltYXRpb24gPSBqUXVlcnkuZXh0ZW5kKCBBbmltYXRpb24sIHtcblxuXHR0d2VlbmVyOiBmdW5jdGlvbiggcHJvcHMsIGNhbGxiYWNrICkge1xuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHByb3BzICkgKSB7XG5cdFx0XHRjYWxsYmFjayA9IHByb3BzO1xuXHRcdFx0cHJvcHMgPSBbIFwiKlwiIF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHByb3BzID0gcHJvcHMuc3BsaXQoXCIgXCIpO1xuXHRcdH1cblxuXHRcdHZhciBwcm9wLFxuXHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0bGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG5cdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRwcm9wID0gcHJvcHNbIGluZGV4IF07XG5cdFx0XHR0d2VlbmVyc1sgcHJvcCBdID0gdHdlZW5lcnNbIHByb3AgXSB8fCBbXTtcblx0XHRcdHR3ZWVuZXJzWyBwcm9wIF0udW5zaGlmdCggY2FsbGJhY2sgKTtcblx0XHR9XG5cdH0sXG5cblx0cHJlZmlsdGVyOiBmdW5jdGlvbiggY2FsbGJhY2ssIHByZXBlbmQgKSB7XG5cdFx0aWYgKCBwcmVwZW5kICkge1xuXHRcdFx0YW5pbWF0aW9uUHJlZmlsdGVycy51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRhbmltYXRpb25QcmVmaWx0ZXJzLnB1c2goIGNhbGxiYWNrICk7XG5cdFx0fVxuXHR9XG59KTtcblxualF1ZXJ5LnNwZWVkID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGZuICkge1xuXHR2YXIgb3B0ID0gc3BlZWQgJiYgdHlwZW9mIHNwZWVkID09PSBcIm9iamVjdFwiID8galF1ZXJ5LmV4dGVuZCgge30sIHNwZWVkICkgOiB7XG5cdFx0Y29tcGxldGU6IGZuIHx8ICFmbiAmJiBlYXNpbmcgfHxcblx0XHRcdGpRdWVyeS5pc0Z1bmN0aW9uKCBzcGVlZCApICYmIHNwZWVkLFxuXHRcdGR1cmF0aW9uOiBzcGVlZCxcblx0XHRlYXNpbmc6IGZuICYmIGVhc2luZyB8fCBlYXNpbmcgJiYgIWpRdWVyeS5pc0Z1bmN0aW9uKCBlYXNpbmcgKSAmJiBlYXNpbmdcblx0fTtcblxuXHRvcHQuZHVyYXRpb24gPSBqUXVlcnkuZngub2ZmID8gMCA6IHR5cGVvZiBvcHQuZHVyYXRpb24gPT09IFwibnVtYmVyXCIgPyBvcHQuZHVyYXRpb24gOlxuXHRcdG9wdC5kdXJhdGlvbiBpbiBqUXVlcnkuZnguc3BlZWRzID8galF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF0gOiBqUXVlcnkuZnguc3BlZWRzLl9kZWZhdWx0O1xuXG5cdC8vIE5vcm1hbGl6ZSBvcHQucXVldWUgLSB0cnVlL3VuZGVmaW5lZC9udWxsIC0+IFwiZnhcIlxuXHRpZiAoIG9wdC5xdWV1ZSA9PSBudWxsIHx8IG9wdC5xdWV1ZSA9PT0gdHJ1ZSApIHtcblx0XHRvcHQucXVldWUgPSBcImZ4XCI7XG5cdH1cblxuXHQvLyBRdWV1ZWluZ1xuXHRvcHQub2xkID0gb3B0LmNvbXBsZXRlO1xuXG5cdG9wdC5jb21wbGV0ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIG9wdC5vbGQgKSApIHtcblx0XHRcdG9wdC5vbGQuY2FsbCggdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggb3B0LnF1ZXVlICkge1xuXHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIG9wdC5xdWV1ZSApO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gb3B0O1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGZhZGVUbzogZnVuY3Rpb24oIHNwZWVkLCB0bywgZWFzaW5nLCBjYWxsYmFjayApIHtcblxuXHRcdC8vIFNob3cgYW55IGhpZGRlbiBlbGVtZW50cyBhZnRlciBzZXR0aW5nIG9wYWNpdHkgdG8gMFxuXHRcdHJldHVybiB0aGlzLmZpbHRlciggaXNIaWRkZW4gKS5jc3MoIFwib3BhY2l0eVwiLCAwICkuc2hvdygpXG5cblx0XHRcdC8vIEFuaW1hdGUgdG8gdGhlIHZhbHVlIHNwZWNpZmllZFxuXHRcdFx0LmVuZCgpLmFuaW1hdGUoeyBvcGFjaXR5OiB0byB9LCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9LFxuXHRhbmltYXRlOiBmdW5jdGlvbiggcHJvcCwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0dmFyIGVtcHR5ID0galF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3AgKSxcblx0XHRcdG9wdGFsbCA9IGpRdWVyeS5zcGVlZCggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSxcblx0XHRcdGRvQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIE9wZXJhdGUgb24gYSBjb3B5IG9mIHByb3Agc28gcGVyLXByb3BlcnR5IGVhc2luZyB3b24ndCBiZSBsb3N0XG5cdFx0XHRcdHZhciBhbmltID0gQW5pbWF0aW9uKCB0aGlzLCBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcCApLCBvcHRhbGwgKTtcblxuXHRcdFx0XHQvLyBFbXB0eSBhbmltYXRpb25zLCBvciBmaW5pc2hpbmcgcmVzb2x2ZXMgaW1tZWRpYXRlbHlcblx0XHRcdFx0aWYgKCBlbXB0eSB8fCBkYXRhX3ByaXYuZ2V0KCB0aGlzLCBcImZpbmlzaFwiICkgKSB7XG5cdFx0XHRcdFx0YW5pbS5zdG9wKCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRkb0FuaW1hdGlvbi5maW5pc2ggPSBkb0FuaW1hdGlvbjtcblxuXHRcdHJldHVybiBlbXB0eSB8fCBvcHRhbGwucXVldWUgPT09IGZhbHNlID9cblx0XHRcdHRoaXMuZWFjaCggZG9BbmltYXRpb24gKSA6XG5cdFx0XHR0aGlzLnF1ZXVlKCBvcHRhbGwucXVldWUsIGRvQW5pbWF0aW9uICk7XG5cdH0sXG5cdHN0b3A6IGZ1bmN0aW9uKCB0eXBlLCBjbGVhclF1ZXVlLCBnb3RvRW5kICkge1xuXHRcdHZhciBzdG9wUXVldWUgPSBmdW5jdGlvbiggaG9va3MgKSB7XG5cdFx0XHR2YXIgc3RvcCA9IGhvb2tzLnN0b3A7XG5cdFx0XHRkZWxldGUgaG9va3Muc3RvcDtcblx0XHRcdHN0b3AoIGdvdG9FbmQgKTtcblx0XHR9O1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGdvdG9FbmQgPSBjbGVhclF1ZXVlO1xuXHRcdFx0Y2xlYXJRdWV1ZSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGNsZWFyUXVldWUgJiYgdHlwZSAhPT0gZmFsc2UgKSB7XG5cdFx0XHR0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGRlcXVldWUgPSB0cnVlLFxuXHRcdFx0XHRpbmRleCA9IHR5cGUgIT0gbnVsbCAmJiB0eXBlICsgXCJxdWV1ZUhvb2tzXCIsXG5cdFx0XHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnMsXG5cdFx0XHRcdGRhdGEgPSBkYXRhX3ByaXYuZ2V0KCB0aGlzICk7XG5cblx0XHRcdGlmICggaW5kZXggKSB7XG5cdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgKSB7XG5cdFx0XHRcdFx0c3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvciAoIGluZGV4IGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCAmJiBycnVuLnRlc3QoIGluZGV4ICkgKSB7XG5cdFx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiAodHlwZSA9PSBudWxsIHx8IHRpbWVyc1sgaW5kZXggXS5xdWV1ZSA9PT0gdHlwZSkgKSB7XG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggZ290b0VuZCApO1xuXHRcdFx0XHRcdGRlcXVldWUgPSBmYWxzZTtcblx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXJ0IHRoZSBuZXh0IGluIHRoZSBxdWV1ZSBpZiB0aGUgbGFzdCBzdGVwIHdhc24ndCBmb3JjZWQuXG5cdFx0XHQvLyBUaW1lcnMgY3VycmVudGx5IHdpbGwgY2FsbCB0aGVpciBjb21wbGV0ZSBjYWxsYmFja3MsIHdoaWNoXG5cdFx0XHQvLyB3aWxsIGRlcXVldWUgYnV0IG9ubHkgaWYgdGhleSB3ZXJlIGdvdG9FbmQuXG5cdFx0XHRpZiAoIGRlcXVldWUgfHwgIWdvdG9FbmQgKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cdGZpbmlzaDogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0aWYgKCB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpbmRleCxcblx0XHRcdFx0ZGF0YSA9IGRhdGFfcHJpdi5nZXQoIHRoaXMgKSxcblx0XHRcdFx0cXVldWUgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZVwiIF0sXG5cdFx0XHRcdGhvb2tzID0gZGF0YVsgdHlwZSArIFwicXVldWVIb29rc1wiIF0sXG5cdFx0XHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnMsXG5cdFx0XHRcdGxlbmd0aCA9IHF1ZXVlID8gcXVldWUubGVuZ3RoIDogMDtcblxuXHRcdFx0Ly8gRW5hYmxlIGZpbmlzaGluZyBmbGFnIG9uIHByaXZhdGUgZGF0YVxuXHRcdFx0ZGF0YS5maW5pc2ggPSB0cnVlO1xuXG5cdFx0XHQvLyBFbXB0eSB0aGUgcXVldWUgZmlyc3Rcblx0XHRcdGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgW10gKTtcblxuXHRcdFx0aWYgKCBob29rcyAmJiBob29rcy5zdG9wICkge1xuXHRcdFx0XHRob29rcy5zdG9wLmNhbGwoIHRoaXMsIHRydWUgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFjdGl2ZSBhbmltYXRpb25zLCBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdGlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkge1xuXHRcdFx0XHRcdHRpbWVyc1sgaW5kZXggXS5hbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb2sgZm9yIGFueSBhbmltYXRpb25zIGluIHRoZSBvbGQgcXVldWUgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0XHRpZiAoIHF1ZXVlWyBpbmRleCBdICYmIHF1ZXVlWyBpbmRleCBdLmZpbmlzaCApIHtcblx0XHRcdFx0XHRxdWV1ZVsgaW5kZXggXS5maW5pc2guY2FsbCggdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFR1cm4gb2ZmIGZpbmlzaGluZyBmbGFnXG5cdFx0XHRkZWxldGUgZGF0YS5maW5pc2g7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZWFjaChbIFwidG9nZ2xlXCIsIFwic2hvd1wiLCBcImhpZGVcIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGNzc0ZuID0galF1ZXJ5LmZuWyBuYW1lIF07XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBzcGVlZCA9PSBudWxsIHx8IHR5cGVvZiBzcGVlZCA9PT0gXCJib29sZWFuXCIgP1xuXHRcdFx0Y3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDpcblx0XHRcdHRoaXMuYW5pbWF0ZSggZ2VuRngoIG5hbWUsIHRydWUgKSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0pO1xuXG4vLyBHZW5lcmF0ZSBzaG9ydGN1dHMgZm9yIGN1c3RvbSBhbmltYXRpb25zXG5qUXVlcnkuZWFjaCh7XG5cdHNsaWRlRG93bjogZ2VuRngoXCJzaG93XCIpLFxuXHRzbGlkZVVwOiBnZW5GeChcImhpZGVcIiksXG5cdHNsaWRlVG9nZ2xlOiBnZW5GeChcInRvZ2dsZVwiKSxcblx0ZmFkZUluOiB7IG9wYWNpdHk6IFwic2hvd1wiIH0sXG5cdGZhZGVPdXQ6IHsgb3BhY2l0eTogXCJoaWRlXCIgfSxcblx0ZmFkZVRvZ2dsZTogeyBvcGFjaXR5OiBcInRvZ2dsZVwiIH1cbn0sIGZ1bmN0aW9uKCBuYW1lLCBwcm9wcyApIHtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHRoaXMuYW5pbWF0ZSggcHJvcHMsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH07XG59KTtcblxualF1ZXJ5LnRpbWVycyA9IFtdO1xualF1ZXJ5LmZ4LnRpY2sgPSBmdW5jdGlvbigpIHtcblx0dmFyIHRpbWVyLFxuXHRcdGkgPSAwLFxuXHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnM7XG5cblx0ZnhOb3cgPSBqUXVlcnkubm93KCk7XG5cblx0Zm9yICggOyBpIDwgdGltZXJzLmxlbmd0aDsgaSsrICkge1xuXHRcdHRpbWVyID0gdGltZXJzWyBpIF07XG5cdFx0Ly8gQ2hlY2tzIHRoZSB0aW1lciBoYXMgbm90IGFscmVhZHkgYmVlbiByZW1vdmVkXG5cdFx0aWYgKCAhdGltZXIoKSAmJiB0aW1lcnNbIGkgXSA9PT0gdGltZXIgKSB7XG5cdFx0XHR0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTtcblx0XHR9XG5cdH1cblxuXHRpZiAoICF0aW1lcnMubGVuZ3RoICkge1xuXHRcdGpRdWVyeS5meC5zdG9wKCk7XG5cdH1cblx0ZnhOb3cgPSB1bmRlZmluZWQ7XG59O1xuXG5qUXVlcnkuZngudGltZXIgPSBmdW5jdGlvbiggdGltZXIgKSB7XG5cdGpRdWVyeS50aW1lcnMucHVzaCggdGltZXIgKTtcblx0aWYgKCB0aW1lcigpICkge1xuXHRcdGpRdWVyeS5meC5zdGFydCgpO1xuXHR9IGVsc2Uge1xuXHRcdGpRdWVyeS50aW1lcnMucG9wKCk7XG5cdH1cbn07XG5cbmpRdWVyeS5meC5pbnRlcnZhbCA9IDEzO1xuXG5qUXVlcnkuZnguc3RhcnQgPSBmdW5jdGlvbigpIHtcblx0aWYgKCAhdGltZXJJZCApIHtcblx0XHR0aW1lcklkID0gc2V0SW50ZXJ2YWwoIGpRdWVyeS5meC50aWNrLCBqUXVlcnkuZnguaW50ZXJ2YWwgKTtcblx0fVxufTtcblxualF1ZXJ5LmZ4LnN0b3AgPSBmdW5jdGlvbigpIHtcblx0Y2xlYXJJbnRlcnZhbCggdGltZXJJZCApO1xuXHR0aW1lcklkID0gbnVsbDtcbn07XG5cbmpRdWVyeS5meC5zcGVlZHMgPSB7XG5cdHNsb3c6IDYwMCxcblx0ZmFzdDogMjAwLFxuXHQvLyBEZWZhdWx0IHNwZWVkXG5cdF9kZWZhdWx0OiA0MDBcbn07XG5cblxuLy8gQmFzZWQgb2ZmIG9mIHRoZSBwbHVnaW4gYnkgQ2xpbnQgSGVsZmVycywgd2l0aCBwZXJtaXNzaW9uLlxuLy8gaHR0cDovL2JsaW5kc2lnbmFscy5jb20vaW5kZXgucGhwLzIwMDkvMDcvanF1ZXJ5LWRlbGF5L1xualF1ZXJ5LmZuLmRlbGF5ID0gZnVuY3Rpb24oIHRpbWUsIHR5cGUgKSB7XG5cdHRpbWUgPSBqUXVlcnkuZnggPyBqUXVlcnkuZnguc3BlZWRzWyB0aW1lIF0gfHwgdGltZSA6IHRpbWU7XG5cdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSwgZnVuY3Rpb24oIG5leHQsIGhvb2tzICkge1xuXHRcdHZhciB0aW1lb3V0ID0gc2V0VGltZW91dCggbmV4dCwgdGltZSApO1xuXHRcdGhvb2tzLnN0b3AgPSBmdW5jdGlvbigpIHtcblx0XHRcdGNsZWFyVGltZW91dCggdGltZW91dCApO1xuXHRcdH07XG5cdH0pO1xufTtcblxuXG4oZnVuY3Rpb24oKSB7XG5cdHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApLFxuXHRcdHNlbGVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwic2VsZWN0XCIgKSxcblx0XHRvcHQgPSBzZWxlY3QuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwib3B0aW9uXCIgKSApO1xuXG5cdGlucHV0LnR5cGUgPSBcImNoZWNrYm94XCI7XG5cblx0Ly8gU3VwcG9ydDogaU9TPD01LjEsIEFuZHJvaWQ8PTQuMitcblx0Ly8gRGVmYXVsdCB2YWx1ZSBmb3IgYSBjaGVja2JveCBzaG91bGQgYmUgXCJvblwiXG5cdHN1cHBvcnQuY2hlY2tPbiA9IGlucHV0LnZhbHVlICE9PSBcIlwiO1xuXG5cdC8vIFN1cHBvcnQ6IElFPD0xMStcblx0Ly8gTXVzdCBhY2Nlc3Mgc2VsZWN0ZWRJbmRleCB0byBtYWtlIGRlZmF1bHQgb3B0aW9ucyBzZWxlY3Rcblx0c3VwcG9ydC5vcHRTZWxlY3RlZCA9IG9wdC5zZWxlY3RlZDtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPD0yLjNcblx0Ly8gT3B0aW9ucyBpbnNpZGUgZGlzYWJsZWQgc2VsZWN0cyBhcmUgaW5jb3JyZWN0bHkgbWFya2VkIGFzIGRpc2FibGVkXG5cdHNlbGVjdC5kaXNhYmxlZCA9IHRydWU7XG5cdHN1cHBvcnQub3B0RGlzYWJsZWQgPSAhb3B0LmRpc2FibGVkO1xuXG5cdC8vIFN1cHBvcnQ6IElFPD0xMStcblx0Ly8gQW4gaW5wdXQgbG9zZXMgaXRzIHZhbHVlIGFmdGVyIGJlY29taW5nIGEgcmFkaW9cblx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblx0aW5wdXQudmFsdWUgPSBcInRcIjtcblx0aW5wdXQudHlwZSA9IFwicmFkaW9cIjtcblx0c3VwcG9ydC5yYWRpb1ZhbHVlID0gaW5wdXQudmFsdWUgPT09IFwidFwiO1xufSkoKTtcblxuXG52YXIgbm9kZUhvb2ssIGJvb2xIb29rLFxuXHRhdHRySGFuZGxlID0galF1ZXJ5LmV4cHIuYXR0ckhhbmRsZTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGF0dHI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkuYXR0ciwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCB0aGlzLCBuYW1lICk7XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0YXR0cjogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciBob29rcywgcmV0LFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gZG9uJ3QgZ2V0L3NldCBhdHRyaWJ1dGVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggIWVsZW0gfHwgblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWRcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSA9PT0gc3RydW5kZWZpbmVkICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5wcm9wKCBlbGVtLCBuYW1lLCB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbCBhdHRyaWJ1dGVzIGFyZSBsb3dlcmNhc2Vcblx0XHQvLyBHcmFiIG5lY2Vzc2FyeSBob29rIGlmIG9uZSBpcyBkZWZpbmVkXG5cdFx0aWYgKCBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cdFx0XHRuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0aG9va3MgPSBqUXVlcnkuYXR0ckhvb2tzWyBuYW1lIF0gfHxcblx0XHRcdFx0KCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoIG5hbWUgKSA/IGJvb2xIb29rIDogbm9kZUhvb2sgKTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdGlmICggdmFsdWUgPT09IG51bGwgKSB7XG5cdFx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHRcdH0gZWxzZSBpZiAoIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIHZhbHVlICsgXCJcIiApO1xuXHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHR9IGVsc2UgaWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSkgIT09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gcmV0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdFx0Ly8gTm9uLWV4aXN0ZW50IGF0dHJpYnV0ZXMgcmV0dXJuIG51bGwsIHdlIG5vcm1hbGl6ZSB0byB1bmRlZmluZWRcblx0XHRcdHJldHVybiByZXQgPT0gbnVsbCA/XG5cdFx0XHRcdHVuZGVmaW5lZCA6XG5cdFx0XHRcdHJldDtcblx0XHR9XG5cdH0sXG5cblx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdHZhciBuYW1lLCBwcm9wTmFtZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0YXR0ck5hbWVzID0gdmFsdWUgJiYgdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApO1xuXG5cdFx0aWYgKCBhdHRyTmFtZXMgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdHdoaWxlICggKG5hbWUgPSBhdHRyTmFtZXNbaSsrXSkgKSB7XG5cdFx0XHRcdHByb3BOYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lO1xuXG5cdFx0XHRcdC8vIEJvb2xlYW4gYXR0cmlidXRlcyBnZXQgc3BlY2lhbCB0cmVhdG1lbnQgKCMxMDg3MClcblx0XHRcdFx0aWYgKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoIG5hbWUgKSApIHtcblx0XHRcdFx0XHQvLyBTZXQgY29ycmVzcG9uZGluZyBwcm9wZXJ0eSB0byBmYWxzZVxuXHRcdFx0XHRcdGVsZW1bIHByb3BOYW1lIF0gPSBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBuYW1lICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdGF0dHJIb29rczoge1xuXHRcdHR5cGU6IHtcblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICFzdXBwb3J0LnJhZGlvVmFsdWUgJiYgdmFsdWUgPT09IFwicmFkaW9cIiAmJlxuXHRcdFx0XHRcdGpRdWVyeS5ub2RlTmFtZSggZWxlbSwgXCJpbnB1dFwiICkgKSB7XG5cdFx0XHRcdFx0dmFyIHZhbCA9IGVsZW0udmFsdWU7XG5cdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCB2YWx1ZSApO1xuXHRcdFx0XHRcdGlmICggdmFsICkge1xuXHRcdFx0XHRcdFx0ZWxlbS52YWx1ZSA9IHZhbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59KTtcblxuLy8gSG9va3MgZm9yIGJvb2xlYW4gYXR0cmlidXRlc1xuYm9vbEhvb2sgPSB7XG5cdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBuYW1lICkge1xuXHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0Ly8gUmVtb3ZlIGJvb2xlYW4gYXR0cmlidXRlcyB3aGVuIHNldCB0byBmYWxzZVxuXHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIG5hbWU7XG5cdH1cbn07XG5qUXVlcnkuZWFjaCggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goIC9cXHcrL2cgKSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdHZhciBnZXR0ZXIgPSBhdHRySGFuZGxlWyBuYW1lIF0gfHwgalF1ZXJ5LmZpbmQuYXR0cjtcblxuXHRhdHRySGFuZGxlWyBuYW1lIF0gPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0dmFyIHJldCwgaGFuZGxlO1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0Ly8gQXZvaWQgYW4gaW5maW5pdGUgbG9vcCBieSB0ZW1wb3JhcmlseSByZW1vdmluZyB0aGlzIGZ1bmN0aW9uIGZyb20gdGhlIGdldHRlclxuXHRcdFx0aGFuZGxlID0gYXR0ckhhbmRsZVsgbmFtZSBdO1xuXHRcdFx0YXR0ckhhbmRsZVsgbmFtZSBdID0gcmV0O1xuXHRcdFx0cmV0ID0gZ2V0dGVyKCBlbGVtLCBuYW1lLCBpc1hNTCApICE9IG51bGwgP1xuXHRcdFx0XHRuYW1lLnRvTG93ZXJDYXNlKCkgOlxuXHRcdFx0XHRudWxsO1xuXHRcdFx0YXR0ckhhbmRsZVsgbmFtZSBdID0gaGFuZGxlO1xuXHRcdH1cblx0XHRyZXR1cm4gcmV0O1xuXHR9O1xufSk7XG5cblxuXG5cbnZhciByZm9jdXNhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHByb3A6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkucHJvcCwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlUHJvcDogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGRlbGV0ZSB0aGlzWyBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWUgXTtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRwcm9wRml4OiB7XG5cdFx0XCJmb3JcIjogXCJodG1sRm9yXCIsXG5cdFx0XCJjbGFzc1wiOiBcImNsYXNzTmFtZVwiXG5cdH0sXG5cblx0cHJvcDogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciByZXQsIGhvb2tzLCBub3R4bWwsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBEb24ndCBnZXQvc2V0IHByb3BlcnRpZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRub3R4bWwgPSBuVHlwZSAhPT0gMSB8fCAhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICk7XG5cblx0XHRpZiAoIG5vdHhtbCApIHtcblx0XHRcdC8vIEZpeCBuYW1lIGFuZCBhdHRhY2ggaG9va3Ncblx0XHRcdG5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5wcm9wSG9va3NbIG5hbWUgXTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm4gaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApKSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0cmV0IDpcblx0XHRcdFx0KCBlbGVtWyBuYW1lIF0gPSB2YWx1ZSApO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSkgIT09IG51bGwgP1xuXHRcdFx0XHRyZXQgOlxuXHRcdFx0XHRlbGVtWyBuYW1lIF07XG5cdFx0fVxuXHR9LFxuXG5cdHByb3BIb29rczoge1xuXHRcdHRhYkluZGV4OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gZWxlbS5oYXNBdHRyaWJ1dGUoIFwidGFiaW5kZXhcIiApIHx8IHJmb2N1c2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApIHx8IGVsZW0uaHJlZiA/XG5cdFx0XHRcdFx0ZWxlbS50YWJJbmRleCA6XG5cdFx0XHRcdFx0LTE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59KTtcblxuaWYgKCAhc3VwcG9ydC5vcHRTZWxlY3RlZCApIHtcblx0alF1ZXJ5LnByb3BIb29rcy5zZWxlY3RlZCA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdGlmICggcGFyZW50ICYmIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fVxuXHR9O1xufVxuXG5qUXVlcnkuZWFjaChbXG5cdFwidGFiSW5kZXhcIixcblx0XCJyZWFkT25seVwiLFxuXHRcIm1heExlbmd0aFwiLFxuXHRcImNlbGxTcGFjaW5nXCIsXG5cdFwiY2VsbFBhZGRpbmdcIixcblx0XCJyb3dTcGFuXCIsXG5cdFwiY29sU3BhblwiLFxuXHRcInVzZU1hcFwiLFxuXHRcImZyYW1lQm9yZGVyXCIsXG5cdFwiY29udGVudEVkaXRhYmxlXCJcbl0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkucHJvcEZpeFsgdGhpcy50b0xvd2VyQ2FzZSgpIF0gPSB0aGlzO1xufSk7XG5cblxuXG5cbnZhciByY2xhc3MgPSAvW1xcdFxcclxcblxcZl0vZztcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGFkZENsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY2xhenosIGosIGZpbmFsVmFsdWUsXG5cdFx0XHRwcm9jZWVkID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aDtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5hZGRDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgdGhpcy5jbGFzc05hbWUgKSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKCBwcm9jZWVkICkge1xuXHRcdFx0Ly8gVGhlIGRpc2p1bmN0aW9uIGhlcmUgaXMgZm9yIGJldHRlciBjb21wcmVzc2liaWxpdHkgKHNlZSByZW1vdmVDbGFzcylcblx0XHRcdGNsYXNzZXMgPSAoIHZhbHVlIHx8IFwiXCIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdO1xuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggZWxlbS5jbGFzc05hbWUgP1xuXHRcdFx0XHRcdCggXCIgXCIgKyBlbGVtLmNsYXNzTmFtZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApIDpcblx0XHRcdFx0XHRcIiBcIlxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKGNsYXp6ID0gY2xhc3Nlc1tqKytdKSApIHtcblx0XHRcdFx0XHRcdGlmICggY3VyLmluZGV4T2YoIFwiIFwiICsgY2xhenogKyBcIiBcIiApIDwgMCApIHtcblx0XHRcdFx0XHRcdFx0Y3VyICs9IGNsYXp6ICsgXCIgXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gb25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy5cblx0XHRcdFx0XHRmaW5hbFZhbHVlID0galF1ZXJ5LnRyaW0oIGN1ciApO1xuXHRcdFx0XHRcdGlmICggZWxlbS5jbGFzc05hbWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmNsYXNzTmFtZSA9IGZpbmFsVmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0cmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdHByb2NlZWQgPSBhcmd1bWVudHMubGVuZ3RoID09PSAwIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiB2YWx1ZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuID0gdGhpcy5sZW5ndGg7XG5cblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaiApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkucmVtb3ZlQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIHRoaXMuY2xhc3NOYW1lICkgKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHRpZiAoIHByb2NlZWQgKSB7XG5cdFx0XHRjbGFzc2VzID0gKCB2YWx1ZSB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXTtcblx0XHRcdFx0Ly8gVGhpcyBleHByZXNzaW9uIGlzIGhlcmUgZm9yIGJldHRlciBjb21wcmVzc2liaWxpdHkgKHNlZSBhZGRDbGFzcylcblx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIGVsZW0uY2xhc3NOYW1lID9cblx0XHRcdFx0XHQoIFwiIFwiICsgZWxlbS5jbGFzc05hbWUgKyBcIiBcIiApLnJlcGxhY2UoIHJjbGFzcywgXCIgXCIgKSA6XG5cdFx0XHRcdFx0XCJcIlxuXHRcdFx0XHQpO1xuXG5cdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKGNsYXp6ID0gY2xhc3Nlc1tqKytdKSApIHtcblx0XHRcdFx0XHRcdC8vIFJlbW92ZSAqYWxsKiBpbnN0YW5jZXNcblx0XHRcdFx0XHRcdHdoaWxlICggY3VyLmluZGV4T2YoIFwiIFwiICsgY2xhenogKyBcIiBcIiApID49IDAgKSB7XG5cdFx0XHRcdFx0XHRcdGN1ciA9IGN1ci5yZXBsYWNlKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIsIFwiIFwiICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gT25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy5cblx0XHRcdFx0XHRmaW5hbFZhbHVlID0gdmFsdWUgPyBqUXVlcnkudHJpbSggY3VyICkgOiBcIlwiO1xuXHRcdFx0XHRcdGlmICggZWxlbS5jbGFzc05hbWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmNsYXNzTmFtZSA9IGZpbmFsVmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0dG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSwgc3RhdGVWYWwgKSB7XG5cdFx0dmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cblx0XHRpZiAoIHR5cGVvZiBzdGF0ZVZhbCA9PT0gXCJib29sZWFuXCIgJiYgdHlwZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZVZhbCA/IHRoaXMuYWRkQ2xhc3MoIHZhbHVlICkgOiB0aGlzLnJlbW92ZUNsYXNzKCB2YWx1ZSApO1xuXHRcdH1cblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS50b2dnbGVDbGFzcyggdmFsdWUuY2FsbCh0aGlzLCBpLCB0aGlzLmNsYXNzTmFtZSwgc3RhdGVWYWwpLCBzdGF0ZVZhbCApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGlmICggdHlwZSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0Ly8gVG9nZ2xlIGluZGl2aWR1YWwgY2xhc3MgbmFtZXNcblx0XHRcdFx0dmFyIGNsYXNzTmFtZSxcblx0XHRcdFx0XHRpID0gMCxcblx0XHRcdFx0XHRzZWxmID0galF1ZXJ5KCB0aGlzICksXG5cdFx0XHRcdFx0Y2xhc3NOYW1lcyA9IHZhbHVlLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0XHR3aGlsZSAoIChjbGFzc05hbWUgPSBjbGFzc05hbWVzWyBpKysgXSkgKSB7XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgZWFjaCBjbGFzc05hbWUgZ2l2ZW4sIHNwYWNlIHNlcGFyYXRlZCBsaXN0XG5cdFx0XHRcdFx0aWYgKCBzZWxmLmhhc0NsYXNzKCBjbGFzc05hbWUgKSApIHtcblx0XHRcdFx0XHRcdHNlbGYucmVtb3ZlQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZWxmLmFkZENsYXNzKCBjbGFzc05hbWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gVG9nZ2xlIHdob2xlIGNsYXNzIG5hbWVcblx0XHRcdH0gZWxzZSBpZiAoIHR5cGUgPT09IHN0cnVuZGVmaW5lZCB8fCB0eXBlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdFx0aWYgKCB0aGlzLmNsYXNzTmFtZSApIHtcblx0XHRcdFx0XHQvLyBzdG9yZSBjbGFzc05hbWUgaWYgc2V0XG5cdFx0XHRcdFx0ZGF0YV9wcml2LnNldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIsIHRoaXMuY2xhc3NOYW1lICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiB0aGUgZWxlbWVudCBoYXMgYSBjbGFzcyBuYW1lIG9yIGlmIHdlJ3JlIHBhc3NlZCBgZmFsc2VgLFxuXHRcdFx0XHQvLyB0aGVuIHJlbW92ZSB0aGUgd2hvbGUgY2xhc3NuYW1lIChpZiB0aGVyZSB3YXMgb25lLCB0aGUgYWJvdmUgc2F2ZWQgaXQpLlxuXHRcdFx0XHQvLyBPdGhlcndpc2UgYnJpbmcgYmFjayB3aGF0ZXZlciB3YXMgcHJldmlvdXNseSBzYXZlZCAoaWYgYW55dGhpbmcpLFxuXHRcdFx0XHQvLyBmYWxsaW5nIGJhY2sgdG8gdGhlIGVtcHR5IHN0cmluZyBpZiBub3RoaW5nIHdhcyBzdG9yZWQuXG5cdFx0XHRcdHRoaXMuY2xhc3NOYW1lID0gdGhpcy5jbGFzc05hbWUgfHwgdmFsdWUgPT09IGZhbHNlID8gXCJcIiA6IGRhdGFfcHJpdi5nZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiICkgfHwgXCJcIjtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRoYXNDbGFzczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBjbGFzc05hbWUgPSBcIiBcIiArIHNlbGVjdG9yICsgXCIgXCIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRpZiAoIHRoaXNbaV0ubm9kZVR5cGUgPT09IDEgJiYgKFwiIFwiICsgdGhpc1tpXS5jbGFzc05hbWUgKyBcIiBcIikucmVwbGFjZShyY2xhc3MsIFwiIFwiKS5pbmRleE9mKCBjbGFzc05hbWUgKSA+PSAwICkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn0pO1xuXG5cblxuXG52YXIgcnJldHVybiA9IC9cXHIvZztcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHZhbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBob29rcywgcmV0LCBpc0Z1bmN0aW9uLFxuXHRcdFx0ZWxlbSA9IHRoaXNbMF07XG5cblx0XHRpZiAoICFhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgZWxlbS50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgXCJ2YWx1ZVwiICkpICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldCA9IGVsZW0udmFsdWU7XG5cblx0XHRcdFx0cmV0dXJuIHR5cGVvZiByZXQgPT09IFwic3RyaW5nXCIgP1xuXHRcdFx0XHRcdC8vIEhhbmRsZSBtb3N0IGNvbW1vbiBzdHJpbmcgY2FzZXNcblx0XHRcdFx0XHRyZXQucmVwbGFjZShycmV0dXJuLCBcIlwiKSA6XG5cdFx0XHRcdFx0Ly8gSGFuZGxlIGNhc2VzIHdoZXJlIHZhbHVlIGlzIG51bGwvdW5kZWYgb3IgbnVtYmVyXG5cdFx0XHRcdFx0cmV0ID09IG51bGwgPyBcIlwiIDogcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aXNGdW5jdGlvbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdHZhciB2YWw7XG5cblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSAhPT0gMSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlLmNhbGwoIHRoaXMsIGksIGpRdWVyeSggdGhpcyApLnZhbCgpICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YWwgPSB2YWx1ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVHJlYXQgbnVsbC91bmRlZmluZWQgYXMgXCJcIjsgY29udmVydCBudW1iZXJzIHRvIHN0cmluZ1xuXHRcdFx0aWYgKCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdFx0dmFsID0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0dmFsICs9IFwiXCI7XG5cblx0XHRcdH0gZWxzZSBpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWwgKSApIHtcblx0XHRcdFx0dmFsID0galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKyBcIlwiO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblxuXHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIHRoaXMudHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cblx0XHRcdC8vIElmIHNldCByZXR1cm5zIHVuZGVmaW5lZCwgZmFsbCBiYWNrIHRvIG5vcm1hbCBzZXR0aW5nXG5cdFx0XHRpZiAoICFob29rcyB8fCAhKFwic2V0XCIgaW4gaG9va3MpIHx8IGhvb2tzLnNldCggdGhpcywgdmFsLCBcInZhbHVlXCIgKSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHR0aGlzLnZhbHVlID0gdmFsO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdHZhbEhvb2tzOiB7XG5cdFx0b3B0aW9uOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgdmFsID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgXCJ2YWx1ZVwiICk7XG5cdFx0XHRcdHJldHVybiB2YWwgIT0gbnVsbCA/XG5cdFx0XHRcdFx0dmFsIDpcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTEwLTExK1xuXHRcdFx0XHRcdC8vIG9wdGlvbi50ZXh0IHRocm93cyBleGNlcHRpb25zICgjMTQ2ODYsICMxNDg1OClcblx0XHRcdFx0XHRqUXVlcnkudHJpbSggalF1ZXJ5LnRleHQoIGVsZW0gKSApO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0c2VsZWN0OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgdmFsdWUsIG9wdGlvbixcblx0XHRcdFx0XHRvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuXHRcdFx0XHRcdGluZGV4ID0gZWxlbS5zZWxlY3RlZEluZGV4LFxuXHRcdFx0XHRcdG9uZSA9IGVsZW0udHlwZSA9PT0gXCJzZWxlY3Qtb25lXCIgfHwgaW5kZXggPCAwLFxuXHRcdFx0XHRcdHZhbHVlcyA9IG9uZSA/IG51bGwgOiBbXSxcblx0XHRcdFx0XHRtYXggPSBvbmUgPyBpbmRleCArIDEgOiBvcHRpb25zLmxlbmd0aCxcblx0XHRcdFx0XHRpID0gaW5kZXggPCAwID9cblx0XHRcdFx0XHRcdG1heCA6XG5cdFx0XHRcdFx0XHRvbmUgPyBpbmRleCA6IDA7XG5cblx0XHRcdFx0Ly8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgc2VsZWN0ZWQgb3B0aW9uc1xuXHRcdFx0XHRmb3IgKCA7IGkgPCBtYXg7IGkrKyApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cblx0XHRcdFx0XHQvLyBJRTYtOSBkb2Vzbid0IHVwZGF0ZSBzZWxlY3RlZCBhZnRlciBmb3JtIHJlc2V0ICgjMjU1MSlcblx0XHRcdFx0XHRpZiAoICggb3B0aW9uLnNlbGVjdGVkIHx8IGkgPT09IGluZGV4ICkgJiZcblx0XHRcdFx0XHRcdFx0Ly8gRG9uJ3QgcmV0dXJuIG9wdGlvbnMgdGhhdCBhcmUgZGlzYWJsZWQgb3IgaW4gYSBkaXNhYmxlZCBvcHRncm91cFxuXHRcdFx0XHRcdFx0XHQoIHN1cHBvcnQub3B0RGlzYWJsZWQgPyAhb3B0aW9uLmRpc2FibGVkIDogb3B0aW9uLmdldEF0dHJpYnV0ZSggXCJkaXNhYmxlZFwiICkgPT09IG51bGwgKSAmJlxuXHRcdFx0XHRcdFx0XHQoICFvcHRpb24ucGFyZW50Tm9kZS5kaXNhYmxlZCB8fCAhalF1ZXJ5Lm5vZGVOYW1lKCBvcHRpb24ucGFyZW50Tm9kZSwgXCJvcHRncm91cFwiICkgKSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gR2V0IHRoZSBzcGVjaWZpYyB2YWx1ZSBmb3IgdGhlIG9wdGlvblxuXHRcdFx0XHRcdFx0dmFsdWUgPSBqUXVlcnkoIG9wdGlvbiApLnZhbCgpO1xuXG5cdFx0XHRcdFx0XHQvLyBXZSBkb24ndCBuZWVkIGFuIGFycmF5IGZvciBvbmUgc2VsZWN0c1xuXHRcdFx0XHRcdFx0aWYgKCBvbmUgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gTXVsdGktU2VsZWN0cyByZXR1cm4gYW4gYXJyYXlcblx0XHRcdFx0XHRcdHZhbHVlcy5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB2YWx1ZXM7XG5cdFx0XHR9LFxuXG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIG9wdGlvblNldCwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0dmFsdWVzID0galF1ZXJ5Lm1ha2VBcnJheSggdmFsdWUgKSxcblx0XHRcdFx0XHRpID0gb3B0aW9ucy5sZW5ndGg7XG5cblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0b3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuXHRcdFx0XHRcdGlmICggKG9wdGlvbi5zZWxlY3RlZCA9IGpRdWVyeS5pbkFycmF5KCBvcHRpb24udmFsdWUsIHZhbHVlcyApID49IDApICkge1xuXHRcdFx0XHRcdFx0b3B0aW9uU2V0ID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGb3JjZSBicm93c2VycyB0byBiZWhhdmUgY29uc2lzdGVudGx5IHdoZW4gbm9uLW1hdGNoaW5nIHZhbHVlIGlzIHNldFxuXHRcdFx0XHRpZiAoICFvcHRpb25TZXQgKSB7XG5cdFx0XHRcdFx0ZWxlbS5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG4vLyBSYWRpb3MgYW5kIGNoZWNrYm94ZXMgZ2V0dGVyL3NldHRlclxualF1ZXJ5LmVhY2goWyBcInJhZGlvXCIsIFwiY2hlY2tib3hcIiBdLCBmdW5jdGlvbigpIHtcblx0alF1ZXJ5LnZhbEhvb2tzWyB0aGlzIF0gPSB7XG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdFx0XHRyZXR1cm4gKCBlbGVtLmNoZWNrZWQgPSBqUXVlcnkuaW5BcnJheSggalF1ZXJ5KGVsZW0pLnZhbCgpLCB2YWx1ZSApID49IDAgKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdGlmICggIXN1cHBvcnQuY2hlY2tPbiApIHtcblx0XHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXS5nZXQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpID09PSBudWxsID8gXCJvblwiIDogZWxlbS52YWx1ZTtcblx0XHR9O1xuXHR9XG59KTtcblxuXG5cblxuLy8gUmV0dXJuIGpRdWVyeSBmb3IgYXR0cmlidXRlcy1vbmx5IGluY2x1c2lvblxuXG5cbmpRdWVyeS5lYWNoKCAoXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgbG9hZCByZXNpemUgc2Nyb2xsIHVubG9hZCBjbGljayBkYmxjbGljayBcIiArXG5cdFwibW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgXCIgK1xuXHRcImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgZXJyb3IgY29udGV4dG1lbnVcIikuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblxuXHQvLyBIYW5kbGUgZXZlbnQgYmluZGluZ1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAgP1xuXHRcdFx0dGhpcy5vbiggbmFtZSwgbnVsbCwgZGF0YSwgZm4gKSA6XG5cdFx0XHR0aGlzLnRyaWdnZXIoIG5hbWUgKTtcblx0fTtcbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0aG92ZXI6IGZ1bmN0aW9uKCBmbk92ZXIsIGZuT3V0ICkge1xuXHRcdHJldHVybiB0aGlzLm1vdXNlZW50ZXIoIGZuT3ZlciApLm1vdXNlbGVhdmUoIGZuT3V0IHx8IGZuT3ZlciApO1xuXHR9LFxuXG5cdGJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGVzLCBudWxsLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub2ZmKCB0eXBlcywgbnVsbCwgZm4gKTtcblx0fSxcblxuXHRkZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTtcblx0fSxcblx0dW5kZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZm4gKSB7XG5cdFx0Ly8gKCBuYW1lc3BhY2UgKSBvciAoIHNlbGVjdG9yLCB0eXBlcyBbLCBmbl0gKVxuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gdGhpcy5vZmYoIHNlbGVjdG9yLCBcIioqXCIgKSA6IHRoaXMub2ZmKCB0eXBlcywgc2VsZWN0b3IgfHwgXCIqKlwiLCBmbiApO1xuXHR9XG59KTtcblxuXG52YXIgbm9uY2UgPSBqUXVlcnkubm93KCk7XG5cbnZhciBycXVlcnkgPSAoL1xcPy8pO1xuXG5cblxuLy8gU3VwcG9ydDogQW5kcm9pZCAyLjNcbi8vIFdvcmthcm91bmQgZmFpbHVyZSB0byBzdHJpbmctY2FzdCBudWxsIGlucHV0XG5qUXVlcnkucGFyc2VKU09OID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdHJldHVybiBKU09OLnBhcnNlKCBkYXRhICsgXCJcIiApO1xufTtcblxuXG4vLyBDcm9zcy1icm93c2VyIHhtbCBwYXJzaW5nXG5qUXVlcnkucGFyc2VYTUwgPSBmdW5jdGlvbiggZGF0YSApIHtcblx0dmFyIHhtbCwgdG1wO1xuXHRpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogSUU5XG5cdHRyeSB7XG5cdFx0dG1wID0gbmV3IERPTVBhcnNlcigpO1xuXHRcdHhtbCA9IHRtcC5wYXJzZUZyb21TdHJpbmcoIGRhdGEsIFwidGV4dC94bWxcIiApO1xuXHR9IGNhdGNoICggZSApIHtcblx0XHR4bWwgPSB1bmRlZmluZWQ7XG5cdH1cblxuXHRpZiAoICF4bWwgfHwgeG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInBhcnNlcmVycm9yXCIgKS5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmVycm9yKCBcIkludmFsaWQgWE1MOiBcIiArIGRhdGEgKTtcblx0fVxuXHRyZXR1cm4geG1sO1xufTtcblxuXG52YXJcblx0cmhhc2ggPSAvIy4qJC8sXG5cdHJ0cyA9IC8oWz8mXSlfPVteJl0qLyxcblx0cmhlYWRlcnMgPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL21nLFxuXHQvLyAjNzY1MywgIzgxMjUsICM4MTUyOiBsb2NhbCBwcm90b2NvbCBkZXRlY3Rpb25cblx0cmxvY2FsUHJvdG9jb2wgPSAvXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxcblx0cm5vQ29udGVudCA9IC9eKD86R0VUfEhFQUQpJC8sXG5cdHJwcm90b2NvbCA9IC9eXFwvXFwvLyxcblx0cnVybCA9IC9eKFtcXHcuKy1dKzopKD86XFwvXFwvKD86W15cXC8/I10qQHwpKFteXFwvPyM6XSopKD86OihcXGQrKXwpfCkvLFxuXG5cdC8qIFByZWZpbHRlcnNcblx0ICogMSkgVGhleSBhcmUgdXNlZnVsIHRvIGludHJvZHVjZSBjdXN0b20gZGF0YVR5cGVzIChzZWUgYWpheC9qc29ucC5qcyBmb3IgYW4gZXhhbXBsZSlcblx0ICogMikgVGhlc2UgYXJlIGNhbGxlZDpcblx0ICogICAgLSBCRUZPUkUgYXNraW5nIGZvciBhIHRyYW5zcG9ydFxuXHQgKiAgICAtIEFGVEVSIHBhcmFtIHNlcmlhbGl6YXRpb24gKHMuZGF0YSBpcyBhIHN0cmluZyBpZiBzLnByb2Nlc3NEYXRhIGlzIHRydWUpXG5cdCAqIDMpIGtleSBpcyB0aGUgZGF0YVR5cGVcblx0ICogNCkgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuXHQgKiA1KSBleGVjdXRpb24gd2lsbCBzdGFydCB3aXRoIHRyYW5zcG9ydCBkYXRhVHlwZSBhbmQgVEhFTiBjb250aW51ZSBkb3duIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0cHJlZmlsdGVycyA9IHt9LFxuXG5cdC8qIFRyYW5zcG9ydHMgYmluZGluZ3Ncblx0ICogMSkga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiAyKSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0dHJhbnNwb3J0cyA9IHt9LFxuXG5cdC8vIEF2b2lkIGNvbW1lbnQtcHJvbG9nIGNoYXIgc2VxdWVuY2UgKCMxMDA5OCk7IG11c3QgYXBwZWFzZSBsaW50IGFuZCBldmFkZSBjb21wcmVzc2lvblxuXHRhbGxUeXBlcyA9IFwiKi9cIi5jb25jYXQoIFwiKlwiICksXG5cblx0Ly8gRG9jdW1lbnQgbG9jYXRpb25cblx0YWpheExvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uLmhyZWYsXG5cblx0Ly8gU2VnbWVudCBsb2NhdGlvbiBpbnRvIHBhcnRzXG5cdGFqYXhMb2NQYXJ0cyA9IHJ1cmwuZXhlYyggYWpheExvY2F0aW9uLnRvTG93ZXJDYXNlKCkgKSB8fCBbXTtcblxuLy8gQmFzZSBcImNvbnN0cnVjdG9yXCIgZm9yIGpRdWVyeS5hamF4UHJlZmlsdGVyIGFuZCBqUXVlcnkuYWpheFRyYW5zcG9ydFxuZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7XG5cblx0Ly8gZGF0YVR5cGVFeHByZXNzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byBcIipcIlxuXHRyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHtcblxuXHRcdGlmICggdHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGZ1bmMgPSBkYXRhVHlwZUV4cHJlc3Npb247XG5cdFx0XHRkYXRhVHlwZUV4cHJlc3Npb24gPSBcIipcIjtcblx0XHR9XG5cblx0XHR2YXIgZGF0YVR5cGUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGZ1bmMgKSApIHtcblx0XHRcdC8vIEZvciBlYWNoIGRhdGFUeXBlIGluIHRoZSBkYXRhVHlwZUV4cHJlc3Npb25cblx0XHRcdHdoaWxlICggKGRhdGFUeXBlID0gZGF0YVR5cGVzW2krK10pICkge1xuXHRcdFx0XHQvLyBQcmVwZW5kIGlmIHJlcXVlc3RlZFxuXHRcdFx0XHRpZiAoIGRhdGFUeXBlWzBdID09PSBcIitcIiApIHtcblx0XHRcdFx0XHRkYXRhVHlwZSA9IGRhdGFUeXBlLnNsaWNlKCAxICkgfHwgXCIqXCI7XG5cdFx0XHRcdFx0KHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSkudW5zaGlmdCggZnVuYyApO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBhcHBlbmRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQoc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdKS5wdXNoKCBmdW5jICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbi8vIEJhc2UgaW5zcGVjdGlvbiBmdW5jdGlvbiBmb3IgcHJlZmlsdGVycyBhbmQgdHJhbnNwb3J0c1xuZnVuY3Rpb24gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSwgb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApIHtcblxuXHR2YXIgaW5zcGVjdGVkID0ge30sXG5cdFx0c2Vla2luZ1RyYW5zcG9ydCA9ICggc3RydWN0dXJlID09PSB0cmFuc3BvcnRzICk7XG5cblx0ZnVuY3Rpb24gaW5zcGVjdCggZGF0YVR5cGUgKSB7XG5cdFx0dmFyIHNlbGVjdGVkO1xuXHRcdGluc3BlY3RlZFsgZGF0YVR5cGUgXSA9IHRydWU7XG5cdFx0alF1ZXJ5LmVhY2goIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSwgZnVuY3Rpb24oIF8sIHByZWZpbHRlck9yRmFjdG9yeSApIHtcblx0XHRcdHZhciBkYXRhVHlwZU9yVHJhbnNwb3J0ID0gcHJlZmlsdGVyT3JGYWN0b3J5KCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICk7XG5cdFx0XHRpZiAoIHR5cGVvZiBkYXRhVHlwZU9yVHJhbnNwb3J0ID09PSBcInN0cmluZ1wiICYmICFzZWVraW5nVHJhbnNwb3J0ICYmICFpbnNwZWN0ZWRbIGRhdGFUeXBlT3JUcmFuc3BvcnQgXSApIHtcblx0XHRcdFx0b3B0aW9ucy5kYXRhVHlwZXMudW5zaGlmdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRpbnNwZWN0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0gZWxzZSBpZiAoIHNlZWtpbmdUcmFuc3BvcnQgKSB7XG5cdFx0XHRcdHJldHVybiAhKCBzZWxlY3RlZCA9IGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRyZXR1cm4gc2VsZWN0ZWQ7XG5cdH1cblxuXHRyZXR1cm4gaW5zcGVjdCggb3B0aW9ucy5kYXRhVHlwZXNbIDAgXSApIHx8ICFpbnNwZWN0ZWRbIFwiKlwiIF0gJiYgaW5zcGVjdCggXCIqXCIgKTtcbn1cblxuLy8gQSBzcGVjaWFsIGV4dGVuZCBmb3IgYWpheCBvcHRpb25zXG4vLyB0aGF0IHRha2VzIFwiZmxhdFwiIG9wdGlvbnMgKG5vdCB0byBiZSBkZWVwIGV4dGVuZGVkKVxuLy8gRml4ZXMgIzk4ODdcbmZ1bmN0aW9uIGFqYXhFeHRlbmQoIHRhcmdldCwgc3JjICkge1xuXHR2YXIga2V5LCBkZWVwLFxuXHRcdGZsYXRPcHRpb25zID0galF1ZXJ5LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9ucyB8fCB7fTtcblxuXHRmb3IgKCBrZXkgaW4gc3JjICkge1xuXHRcdGlmICggc3JjWyBrZXkgXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0KCBmbGF0T3B0aW9uc1sga2V5IF0gPyB0YXJnZXQgOiAoIGRlZXAgfHwgKGRlZXAgPSB7fSkgKSApWyBrZXkgXSA9IHNyY1sga2V5IF07XG5cdFx0fVxuXHR9XG5cdGlmICggZGVlcCApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCB0cnVlLCB0YXJnZXQsIGRlZXAgKTtcblx0fVxuXG5cdHJldHVybiB0YXJnZXQ7XG59XG5cbi8qIEhhbmRsZXMgcmVzcG9uc2VzIHRvIGFuIGFqYXggcmVxdWVzdDpcbiAqIC0gZmluZHMgdGhlIHJpZ2h0IGRhdGFUeXBlIChtZWRpYXRlcyBiZXR3ZWVuIGNvbnRlbnQtdHlwZSBhbmQgZXhwZWN0ZWQgZGF0YVR5cGUpXG4gKiAtIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2VcbiAqL1xuZnVuY3Rpb24gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApIHtcblxuXHR2YXIgY3QsIHR5cGUsIGZpbmFsRGF0YVR5cGUsIGZpcnN0RGF0YVR5cGUsXG5cdFx0Y29udGVudHMgPSBzLmNvbnRlbnRzLFxuXHRcdGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzO1xuXG5cdC8vIFJlbW92ZSBhdXRvIGRhdGFUeXBlIGFuZCBnZXQgY29udGVudC10eXBlIGluIHRoZSBwcm9jZXNzXG5cdHdoaWxlICggZGF0YVR5cGVzWyAwIF0gPT09IFwiKlwiICkge1xuXHRcdGRhdGFUeXBlcy5zaGlmdCgpO1xuXHRcdGlmICggY3QgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGN0ID0gcy5taW1lVHlwZSB8fCBqcVhIUi5nZXRSZXNwb25zZUhlYWRlcihcIkNvbnRlbnQtVHlwZVwiKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayBpZiB3ZSdyZSBkZWFsaW5nIHdpdGggYSBrbm93biBjb250ZW50LXR5cGVcblx0aWYgKCBjdCApIHtcblx0XHRmb3IgKCB0eXBlIGluIGNvbnRlbnRzICkge1xuXHRcdFx0aWYgKCBjb250ZW50c1sgdHlwZSBdICYmIGNvbnRlbnRzWyB0eXBlIF0udGVzdCggY3QgKSApIHtcblx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHR5cGUgKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSByZXNwb25zZSBmb3IgdGhlIGV4cGVjdGVkIGRhdGFUeXBlXG5cdGlmICggZGF0YVR5cGVzWyAwIF0gaW4gcmVzcG9uc2VzICkge1xuXHRcdGZpbmFsRGF0YVR5cGUgPSBkYXRhVHlwZXNbIDAgXTtcblx0fSBlbHNlIHtcblx0XHQvLyBUcnkgY29udmVydGlibGUgZGF0YVR5cGVzXG5cdFx0Zm9yICggdHlwZSBpbiByZXNwb25zZXMgKSB7XG5cdFx0XHRpZiAoICFkYXRhVHlwZXNbIDAgXSB8fCBzLmNvbnZlcnRlcnNbIHR5cGUgKyBcIiBcIiArIGRhdGFUeXBlc1swXSBdICkge1xuXHRcdFx0XHRmaW5hbERhdGFUeXBlID0gdHlwZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoICFmaXJzdERhdGFUeXBlICkge1xuXHRcdFx0XHRmaXJzdERhdGFUeXBlID0gdHlwZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0Ly8gT3IganVzdCB1c2UgZmlyc3Qgb25lXG5cdFx0ZmluYWxEYXRhVHlwZSA9IGZpbmFsRGF0YVR5cGUgfHwgZmlyc3REYXRhVHlwZTtcblx0fVxuXG5cdC8vIElmIHdlIGZvdW5kIGEgZGF0YVR5cGVcblx0Ly8gV2UgYWRkIHRoZSBkYXRhVHlwZSB0byB0aGUgbGlzdCBpZiBuZWVkZWRcblx0Ly8gYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuXHRpZiAoIGZpbmFsRGF0YVR5cGUgKSB7XG5cdFx0aWYgKCBmaW5hbERhdGFUeXBlICE9PSBkYXRhVHlwZXNbIDAgXSApIHtcblx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCBmaW5hbERhdGFUeXBlICk7XG5cdFx0fVxuXHRcdHJldHVybiByZXNwb25zZXNbIGZpbmFsRGF0YVR5cGUgXTtcblx0fVxufVxuXG4vKiBDaGFpbiBjb252ZXJzaW9ucyBnaXZlbiB0aGUgcmVxdWVzdCBhbmQgdGhlIG9yaWdpbmFsIHJlc3BvbnNlXG4gKiBBbHNvIHNldHMgdGhlIHJlc3BvbnNlWFhYIGZpZWxkcyBvbiB0aGUganFYSFIgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICkge1xuXHR2YXIgY29udjIsIGN1cnJlbnQsIGNvbnYsIHRtcCwgcHJldixcblx0XHRjb252ZXJ0ZXJzID0ge30sXG5cdFx0Ly8gV29yayB3aXRoIGEgY29weSBvZiBkYXRhVHlwZXMgaW4gY2FzZSB3ZSBuZWVkIHRvIG1vZGlmeSBpdCBmb3IgY29udmVyc2lvblxuXHRcdGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzLnNsaWNlKCk7XG5cblx0Ly8gQ3JlYXRlIGNvbnZlcnRlcnMgbWFwIHdpdGggbG93ZXJjYXNlZCBrZXlzXG5cdGlmICggZGF0YVR5cGVzWyAxIF0gKSB7XG5cdFx0Zm9yICggY29udiBpbiBzLmNvbnZlcnRlcnMgKSB7XG5cdFx0XHRjb252ZXJ0ZXJzWyBjb252LnRvTG93ZXJDYXNlKCkgXSA9IHMuY29udmVydGVyc1sgY29udiBdO1xuXHRcdH1cblx0fVxuXG5cdGN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTtcblxuXHQvLyBDb252ZXJ0IHRvIGVhY2ggc2VxdWVudGlhbCBkYXRhVHlwZVxuXHR3aGlsZSAoIGN1cnJlbnQgKSB7XG5cblx0XHRpZiAoIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSApIHtcblx0XHRcdGpxWEhSWyBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gXSA9IHJlc3BvbnNlO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHRoZSBkYXRhRmlsdGVyIGlmIHByb3ZpZGVkXG5cdFx0aWYgKCAhcHJldiAmJiBpc1N1Y2Nlc3MgJiYgcy5kYXRhRmlsdGVyICkge1xuXHRcdFx0cmVzcG9uc2UgPSBzLmRhdGFGaWx0ZXIoIHJlc3BvbnNlLCBzLmRhdGFUeXBlICk7XG5cdFx0fVxuXG5cdFx0cHJldiA9IGN1cnJlbnQ7XG5cdFx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdFx0aWYgKCBjdXJyZW50ICkge1xuXG5cdFx0Ly8gVGhlcmUncyBvbmx5IHdvcmsgdG8gZG8gaWYgY3VycmVudCBkYXRhVHlwZSBpcyBub24tYXV0b1xuXHRcdFx0aWYgKCBjdXJyZW50ID09PSBcIipcIiApIHtcblxuXHRcdFx0XHRjdXJyZW50ID0gcHJldjtcblxuXHRcdFx0Ly8gQ29udmVydCByZXNwb25zZSBpZiBwcmV2IGRhdGFUeXBlIGlzIG5vbi1hdXRvIGFuZCBkaWZmZXJzIGZyb20gY3VycmVudFxuXHRcdFx0fSBlbHNlIGlmICggcHJldiAhPT0gXCIqXCIgJiYgcHJldiAhPT0gY3VycmVudCApIHtcblxuXHRcdFx0XHQvLyBTZWVrIGEgZGlyZWN0IGNvbnZlcnRlclxuXHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgY3VycmVudCBdIHx8IGNvbnZlcnRlcnNbIFwiKiBcIiArIGN1cnJlbnQgXTtcblxuXHRcdFx0XHQvLyBJZiBub25lIGZvdW5kLCBzZWVrIGEgcGFpclxuXHRcdFx0XHRpZiAoICFjb252ICkge1xuXHRcdFx0XHRcdGZvciAoIGNvbnYyIGluIGNvbnZlcnRlcnMgKSB7XG5cblx0XHRcdFx0XHRcdC8vIElmIGNvbnYyIG91dHB1dHMgY3VycmVudFxuXHRcdFx0XHRcdFx0dG1wID0gY29udjIuc3BsaXQoIFwiIFwiICk7XG5cdFx0XHRcdFx0XHRpZiAoIHRtcFsgMSBdID09PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIElmIHByZXYgY2FuIGJlIGNvbnZlcnRlZCB0byBhY2NlcHRlZCBpbnB1dFxuXHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgcHJldiArIFwiIFwiICsgdG1wWyAwIF0gXSB8fFxuXHRcdFx0XHRcdFx0XHRcdGNvbnZlcnRlcnNbIFwiKiBcIiArIHRtcFsgMCBdIF07XG5cdFx0XHRcdFx0XHRcdGlmICggY29udiApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBjb252ID09PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIGNvbnYyIF07XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGluc2VydCB0aGUgaW50ZXJtZWRpYXRlIGRhdGFUeXBlXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggY29udmVydGVyc1sgY29udjIgXSAhPT0gdHJ1ZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnQgPSB0bXBbIDAgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0bXBbIDEgXSApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFwcGx5IGNvbnZlcnRlciAoaWYgbm90IGFuIGVxdWl2YWxlbmNlKVxuXHRcdFx0XHRpZiAoIGNvbnYgIT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHQvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtXG5cdFx0XHRcdFx0aWYgKCBjb252ICYmIHNbIFwidGhyb3dzXCIgXSApIHtcblx0XHRcdFx0XHRcdHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7IHN0YXRlOiBcInBhcnNlcmVycm9yXCIsIGVycm9yOiBjb252ID8gZSA6IFwiTm8gY29udmVyc2lvbiBmcm9tIFwiICsgcHJldiArIFwiIHRvIFwiICsgY3VycmVudCB9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHN0YXRlOiBcInN1Y2Nlc3NcIiwgZGF0YTogcmVzcG9uc2UgfTtcbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cblx0Ly8gQ291bnRlciBmb3IgaG9sZGluZyB0aGUgbnVtYmVyIG9mIGFjdGl2ZSBxdWVyaWVzXG5cdGFjdGl2ZTogMCxcblxuXHQvLyBMYXN0LU1vZGlmaWVkIGhlYWRlciBjYWNoZSBmb3IgbmV4dCByZXF1ZXN0XG5cdGxhc3RNb2RpZmllZDoge30sXG5cdGV0YWc6IHt9LFxuXG5cdGFqYXhTZXR0aW5nczoge1xuXHRcdHVybDogYWpheExvY2F0aW9uLFxuXHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0aXNMb2NhbDogcmxvY2FsUHJvdG9jb2wudGVzdCggYWpheExvY1BhcnRzWyAxIF0gKSxcblx0XHRnbG9iYWw6IHRydWUsXG5cdFx0cHJvY2Vzc0RhdGE6IHRydWUsXG5cdFx0YXN5bmM6IHRydWUsXG5cdFx0Y29udGVudFR5cGU6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsXG5cdFx0Lypcblx0XHR0aW1lb3V0OiAwLFxuXHRcdGRhdGE6IG51bGwsXG5cdFx0ZGF0YVR5cGU6IG51bGwsXG5cdFx0dXNlcm5hbWU6IG51bGwsXG5cdFx0cGFzc3dvcmQ6IG51bGwsXG5cdFx0Y2FjaGU6IG51bGwsXG5cdFx0dGhyb3dzOiBmYWxzZSxcblx0XHR0cmFkaXRpb25hbDogZmFsc2UsXG5cdFx0aGVhZGVyczoge30sXG5cdFx0Ki9cblxuXHRcdGFjY2VwdHM6IHtcblx0XHRcdFwiKlwiOiBhbGxUeXBlcyxcblx0XHRcdHRleHQ6IFwidGV4dC9wbGFpblwiLFxuXHRcdFx0aHRtbDogXCJ0ZXh0L2h0bWxcIixcblx0XHRcdHhtbDogXCJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sXCIsXG5cdFx0XHRqc29uOiBcImFwcGxpY2F0aW9uL2pzb24sIHRleHQvamF2YXNjcmlwdFwiXG5cdFx0fSxcblxuXHRcdGNvbnRlbnRzOiB7XG5cdFx0XHR4bWw6IC94bWwvLFxuXHRcdFx0aHRtbDogL2h0bWwvLFxuXHRcdFx0anNvbjogL2pzb24vXG5cdFx0fSxcblxuXHRcdHJlc3BvbnNlRmllbGRzOiB7XG5cdFx0XHR4bWw6IFwicmVzcG9uc2VYTUxcIixcblx0XHRcdHRleHQ6IFwicmVzcG9uc2VUZXh0XCIsXG5cdFx0XHRqc29uOiBcInJlc3BvbnNlSlNPTlwiXG5cdFx0fSxcblxuXHRcdC8vIERhdGEgY29udmVydGVyc1xuXHRcdC8vIEtleXMgc2VwYXJhdGUgc291cmNlIChvciBjYXRjaGFsbCBcIipcIikgYW5kIGRlc3RpbmF0aW9uIHR5cGVzIHdpdGggYSBzaW5nbGUgc3BhY2Vcblx0XHRjb252ZXJ0ZXJzOiB7XG5cblx0XHRcdC8vIENvbnZlcnQgYW55dGhpbmcgdG8gdGV4dFxuXHRcdFx0XCIqIHRleHRcIjogU3RyaW5nLFxuXG5cdFx0XHQvLyBUZXh0IHRvIGh0bWwgKHRydWUgPSBubyB0cmFuc2Zvcm1hdGlvbilcblx0XHRcdFwidGV4dCBodG1sXCI6IHRydWUsXG5cblx0XHRcdC8vIEV2YWx1YXRlIHRleHQgYXMgYSBqc29uIGV4cHJlc3Npb25cblx0XHRcdFwidGV4dCBqc29uXCI6IGpRdWVyeS5wYXJzZUpTT04sXG5cblx0XHRcdC8vIFBhcnNlIHRleHQgYXMgeG1sXG5cdFx0XHRcInRleHQgeG1sXCI6IGpRdWVyeS5wYXJzZVhNTFxuXHRcdH0sXG5cblx0XHQvLyBGb3Igb3B0aW9ucyB0aGF0IHNob3VsZG4ndCBiZSBkZWVwIGV4dGVuZGVkOlxuXHRcdC8vIHlvdSBjYW4gYWRkIHlvdXIgb3duIGN1c3RvbSBvcHRpb25zIGhlcmUgaWZcblx0XHQvLyBhbmQgd2hlbiB5b3UgY3JlYXRlIG9uZSB0aGF0IHNob3VsZG4ndCBiZVxuXHRcdC8vIGRlZXAgZXh0ZW5kZWQgKHNlZSBhamF4RXh0ZW5kKVxuXHRcdGZsYXRPcHRpb25zOiB7XG5cdFx0XHR1cmw6IHRydWUsXG5cdFx0XHRjb250ZXh0OiB0cnVlXG5cdFx0fVxuXHR9LFxuXG5cdC8vIENyZWF0ZXMgYSBmdWxsIGZsZWRnZWQgc2V0dGluZ3Mgb2JqZWN0IGludG8gdGFyZ2V0XG5cdC8vIHdpdGggYm90aCBhamF4U2V0dGluZ3MgYW5kIHNldHRpbmdzIGZpZWxkcy5cblx0Ly8gSWYgdGFyZ2V0IGlzIG9taXR0ZWQsIHdyaXRlcyBpbnRvIGFqYXhTZXR0aW5ncy5cblx0YWpheFNldHVwOiBmdW5jdGlvbiggdGFyZ2V0LCBzZXR0aW5ncyApIHtcblx0XHRyZXR1cm4gc2V0dGluZ3MgP1xuXG5cdFx0XHQvLyBCdWlsZGluZyBhIHNldHRpbmdzIG9iamVjdFxuXHRcdFx0YWpheEV4dGVuZCggYWpheEV4dGVuZCggdGFyZ2V0LCBqUXVlcnkuYWpheFNldHRpbmdzICksIHNldHRpbmdzICkgOlxuXG5cdFx0XHQvLyBFeHRlbmRpbmcgYWpheFNldHRpbmdzXG5cdFx0XHRhamF4RXh0ZW5kKCBqUXVlcnkuYWpheFNldHRpbmdzLCB0YXJnZXQgKTtcblx0fSxcblxuXHRhamF4UHJlZmlsdGVyOiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMgKSxcblx0YWpheFRyYW5zcG9ydDogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzICksXG5cblx0Ly8gTWFpbiBtZXRob2Rcblx0YWpheDogZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcblxuXHRcdC8vIElmIHVybCBpcyBhbiBvYmplY3QsIHNpbXVsYXRlIHByZS0xLjUgc2lnbmF0dXJlXG5cdFx0aWYgKCB0eXBlb2YgdXJsID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0b3B0aW9ucyA9IHVybDtcblx0XHRcdHVybCA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHQvLyBGb3JjZSBvcHRpb25zIHRvIGJlIGFuIG9iamVjdFxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG5cdFx0dmFyIHRyYW5zcG9ydCxcblx0XHRcdC8vIFVSTCB3aXRob3V0IGFudGktY2FjaGUgcGFyYW1cblx0XHRcdGNhY2hlVVJMLFxuXHRcdFx0Ly8gUmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0cmVzcG9uc2VIZWFkZXJzU3RyaW5nLFxuXHRcdFx0cmVzcG9uc2VIZWFkZXJzLFxuXHRcdFx0Ly8gdGltZW91dCBoYW5kbGVcblx0XHRcdHRpbWVvdXRUaW1lcixcblx0XHRcdC8vIENyb3NzLWRvbWFpbiBkZXRlY3Rpb24gdmFyc1xuXHRcdFx0cGFydHMsXG5cdFx0XHQvLyBUbyBrbm93IGlmIGdsb2JhbCBldmVudHMgYXJlIHRvIGJlIGRpc3BhdGNoZWRcblx0XHRcdGZpcmVHbG9iYWxzLFxuXHRcdFx0Ly8gTG9vcCB2YXJpYWJsZVxuXHRcdFx0aSxcblx0XHRcdC8vIENyZWF0ZSB0aGUgZmluYWwgb3B0aW9ucyBvYmplY3Rcblx0XHRcdHMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLFxuXHRcdFx0Ly8gQ2FsbGJhY2tzIGNvbnRleHRcblx0XHRcdGNhbGxiYWNrQ29udGV4dCA9IHMuY29udGV4dCB8fCBzLFxuXHRcdFx0Ly8gQ29udGV4dCBmb3IgZ2xvYmFsIGV2ZW50cyBpcyBjYWxsYmFja0NvbnRleHQgaWYgaXQgaXMgYSBET00gbm9kZSBvciBqUXVlcnkgY29sbGVjdGlvblxuXHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0ID0gcy5jb250ZXh0ICYmICggY2FsbGJhY2tDb250ZXh0Lm5vZGVUeXBlIHx8IGNhbGxiYWNrQ29udGV4dC5qcXVlcnkgKSA/XG5cdFx0XHRcdGpRdWVyeSggY2FsbGJhY2tDb250ZXh0ICkgOlxuXHRcdFx0XHRqUXVlcnkuZXZlbnQsXG5cdFx0XHQvLyBEZWZlcnJlZHNcblx0XHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCksXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkID0galF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFxuXHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdHN0YXR1c0NvZGUgPSBzLnN0YXR1c0NvZGUgfHwge30sXG5cdFx0XHQvLyBIZWFkZXJzICh0aGV5IGFyZSBzZW50IGFsbCBhdCBvbmNlKVxuXHRcdFx0cmVxdWVzdEhlYWRlcnMgPSB7fSxcblx0XHRcdHJlcXVlc3RIZWFkZXJzTmFtZXMgPSB7fSxcblx0XHRcdC8vIFRoZSBqcVhIUiBzdGF0ZVxuXHRcdFx0c3RhdGUgPSAwLFxuXHRcdFx0Ly8gRGVmYXVsdCBhYm9ydCBtZXNzYWdlXG5cdFx0XHRzdHJBYm9ydCA9IFwiY2FuY2VsZWRcIixcblx0XHRcdC8vIEZha2UgeGhyXG5cdFx0XHRqcVhIUiA9IHtcblx0XHRcdFx0cmVhZHlTdGF0ZTogMCxcblxuXHRcdFx0XHQvLyBCdWlsZHMgaGVhZGVycyBoYXNodGFibGUgaWYgbmVlZGVkXG5cdFx0XHRcdGdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdFx0XHRcdHZhciBtYXRjaDtcblx0XHRcdFx0XHRpZiAoIHN0YXRlID09PSAyICkge1xuXHRcdFx0XHRcdFx0aWYgKCAhcmVzcG9uc2VIZWFkZXJzICkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnMgPSB7fTtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobWF0Y2ggPSByaGVhZGVycy5leGVjKCByZXNwb25zZUhlYWRlcnNTdHJpbmcgKSkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzWyBtYXRjaFsxXS50b0xvd2VyQ2FzZSgpIF0gPSBtYXRjaFsgMiBdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRtYXRjaCA9IHJlc3BvbnNlSGVhZGVyc1sga2V5LnRvTG93ZXJDYXNlKCkgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoID09IG51bGwgPyBudWxsIDogbWF0Y2g7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gUmF3IHN0cmluZ1xuXHRcdFx0XHRnZXRBbGxSZXNwb25zZUhlYWRlcnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBzdGF0ZSA9PT0gMiA/IHJlc3BvbnNlSGVhZGVyc1N0cmluZyA6IG51bGw7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gQ2FjaGVzIHRoZSBoZWFkZXJcblx0XHRcdFx0c2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0XHRcdHZhciBsbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRpZiAoICFzdGF0ZSApIHtcblx0XHRcdFx0XHRcdG5hbWUgPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbG5hbWUgXSB8fCBuYW1lO1xuXHRcdFx0XHRcdFx0cmVxdWVzdEhlYWRlcnNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBPdmVycmlkZXMgcmVzcG9uc2UgY29udGVudC10eXBlIGhlYWRlclxuXHRcdFx0XHRvdmVycmlkZU1pbWVUeXBlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRpZiAoICFzdGF0ZSApIHtcblx0XHRcdFx0XHRcdHMubWltZVR5cGUgPSB0eXBlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0XHRzdGF0dXNDb2RlOiBmdW5jdGlvbiggbWFwICkge1xuXHRcdFx0XHRcdHZhciBjb2RlO1xuXHRcdFx0XHRcdGlmICggbWFwICkge1xuXHRcdFx0XHRcdFx0aWYgKCBzdGF0ZSA8IDIgKSB7XG5cdFx0XHRcdFx0XHRcdGZvciAoIGNvZGUgaW4gbWFwICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIExhenktYWRkIHRoZSBuZXcgY2FsbGJhY2sgaW4gYSB3YXkgdGhhdCBwcmVzZXJ2ZXMgb2xkIG9uZXNcblx0XHRcdFx0XHRcdFx0XHRzdGF0dXNDb2RlWyBjb2RlIF0gPSBbIHN0YXR1c0NvZGVbIGNvZGUgXSwgbWFwWyBjb2RlIF0gXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gRXhlY3V0ZSB0aGUgYXBwcm9wcmlhdGUgY2FsbGJhY2tzXG5cdFx0XHRcdFx0XHRcdGpxWEhSLmFsd2F5cyggbWFwWyBqcVhIUi5zdGF0dXMgXSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYW5jZWwgdGhlIHJlcXVlc3Rcblx0XHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKCBzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdHZhciBmaW5hbFRleHQgPSBzdGF0dXNUZXh0IHx8IHN0ckFib3J0O1xuXHRcdFx0XHRcdGlmICggdHJhbnNwb3J0ICkge1xuXHRcdFx0XHRcdFx0dHJhbnNwb3J0LmFib3J0KCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZG9uZSggMCwgZmluYWxUZXh0ICk7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHQvLyBBdHRhY2ggZGVmZXJyZWRzXG5cdFx0ZGVmZXJyZWQucHJvbWlzZSgganFYSFIgKS5jb21wbGV0ZSA9IGNvbXBsZXRlRGVmZXJyZWQuYWRkO1xuXHRcdGpxWEhSLnN1Y2Nlc3MgPSBqcVhIUi5kb25lO1xuXHRcdGpxWEhSLmVycm9yID0ganFYSFIuZmFpbDtcblxuXHRcdC8vIFJlbW92ZSBoYXNoIGNoYXJhY3RlciAoIzc1MzE6IGFuZCBzdHJpbmcgcHJvbW90aW9uKVxuXHRcdC8vIEFkZCBwcm90b2NvbCBpZiBub3QgcHJvdmlkZWQgKHByZWZpbHRlcnMgbWlnaHQgZXhwZWN0IGl0KVxuXHRcdC8vIEhhbmRsZSBmYWxzeSB1cmwgaW4gdGhlIHNldHRpbmdzIG9iamVjdCAoIzEwMDkzOiBjb25zaXN0ZW5jeSB3aXRoIG9sZCBzaWduYXR1cmUpXG5cdFx0Ly8gV2UgYWxzbyB1c2UgdGhlIHVybCBwYXJhbWV0ZXIgaWYgYXZhaWxhYmxlXG5cdFx0cy51cmwgPSAoICggdXJsIHx8IHMudXJsIHx8IGFqYXhMb2NhdGlvbiApICsgXCJcIiApLnJlcGxhY2UoIHJoYXNoLCBcIlwiIClcblx0XHRcdC5yZXBsYWNlKCBycHJvdG9jb2wsIGFqYXhMb2NQYXJ0c1sgMSBdICsgXCIvL1wiICk7XG5cblx0XHQvLyBBbGlhcyBtZXRob2Qgb3B0aW9uIHRvIHR5cGUgYXMgcGVyIHRpY2tldCAjMTIwMDRcblx0XHRzLnR5cGUgPSBvcHRpb25zLm1ldGhvZCB8fCBvcHRpb25zLnR5cGUgfHwgcy5tZXRob2QgfHwgcy50eXBlO1xuXG5cdFx0Ly8gRXh0cmFjdCBkYXRhVHlwZXMgbGlzdFxuXHRcdHMuZGF0YVR5cGVzID0galF1ZXJ5LnRyaW0oIHMuZGF0YVR5cGUgfHwgXCIqXCIgKS50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbIFwiXCIgXTtcblxuXHRcdC8vIEEgY3Jvc3MtZG9tYWluIHJlcXVlc3QgaXMgaW4gb3JkZXIgd2hlbiB3ZSBoYXZlIGEgcHJvdG9jb2w6aG9zdDpwb3J0IG1pc21hdGNoXG5cdFx0aWYgKCBzLmNyb3NzRG9tYWluID09IG51bGwgKSB7XG5cdFx0XHRwYXJ0cyA9IHJ1cmwuZXhlYyggcy51cmwudG9Mb3dlckNhc2UoKSApO1xuXHRcdFx0cy5jcm9zc0RvbWFpbiA9ICEhKCBwYXJ0cyAmJlxuXHRcdFx0XHQoIHBhcnRzWyAxIF0gIT09IGFqYXhMb2NQYXJ0c1sgMSBdIHx8IHBhcnRzWyAyIF0gIT09IGFqYXhMb2NQYXJ0c1sgMiBdIHx8XG5cdFx0XHRcdFx0KCBwYXJ0c1sgMyBdIHx8ICggcGFydHNbIDEgXSA9PT0gXCJodHRwOlwiID8gXCI4MFwiIDogXCI0NDNcIiApICkgIT09XG5cdFx0XHRcdFx0XHQoIGFqYXhMb2NQYXJ0c1sgMyBdIHx8ICggYWpheExvY1BhcnRzWyAxIF0gPT09IFwiaHR0cDpcIiA/IFwiODBcIiA6IFwiNDQzXCIgKSApIClcblx0XHRcdCk7XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBkYXRhIGlmIG5vdCBhbHJlYWR5IGEgc3RyaW5nXG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5wcm9jZXNzRGF0YSAmJiB0eXBlb2Ygcy5kYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cy5kYXRhID0galF1ZXJ5LnBhcmFtKCBzLmRhdGEsIHMudHJhZGl0aW9uYWwgKTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSBwcmVmaWx0ZXJzXG5cdFx0aW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cblx0XHQvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhIHByZWZpbHRlciwgc3RvcCB0aGVyZVxuXHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0fVxuXG5cdFx0Ly8gV2UgY2FuIGZpcmUgZ2xvYmFsIGV2ZW50cyBhcyBvZiBub3cgaWYgYXNrZWQgdG9cblx0XHQvLyBEb24ndCBmaXJlIGV2ZW50cyBpZiBqUXVlcnkuZXZlbnQgaXMgdW5kZWZpbmVkIGluIGFuIEFNRC11c2FnZSBzY2VuYXJpbyAoIzE1MTE4KVxuXHRcdGZpcmVHbG9iYWxzID0galF1ZXJ5LmV2ZW50ICYmIHMuZ2xvYmFsO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIGEgbmV3IHNldCBvZiByZXF1ZXN0c1xuXHRcdGlmICggZmlyZUdsb2JhbHMgJiYgalF1ZXJ5LmFjdGl2ZSsrID09PSAwICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoXCJhamF4U3RhcnRcIik7XG5cdFx0fVxuXG5cdFx0Ly8gVXBwZXJjYXNlIHRoZSB0eXBlXG5cdFx0cy50eXBlID0gcy50eXBlLnRvVXBwZXJDYXNlKCk7XG5cblx0XHQvLyBEZXRlcm1pbmUgaWYgcmVxdWVzdCBoYXMgY29udGVudFxuXHRcdHMuaGFzQ29udGVudCA9ICFybm9Db250ZW50LnRlc3QoIHMudHlwZSApO1xuXG5cdFx0Ly8gU2F2ZSB0aGUgVVJMIGluIGNhc2Ugd2UncmUgdG95aW5nIHdpdGggdGhlIElmLU1vZGlmaWVkLVNpbmNlXG5cdFx0Ly8gYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyIGxhdGVyIG9uXG5cdFx0Y2FjaGVVUkwgPSBzLnVybDtcblxuXHRcdC8vIE1vcmUgb3B0aW9ucyBoYW5kbGluZyBmb3IgcmVxdWVzdHMgd2l0aCBubyBjb250ZW50XG5cdFx0aWYgKCAhcy5oYXNDb250ZW50ICkge1xuXG5cdFx0XHQvLyBJZiBkYXRhIGlzIGF2YWlsYWJsZSwgYXBwZW5kIGRhdGEgdG8gdXJsXG5cdFx0XHRpZiAoIHMuZGF0YSApIHtcblx0XHRcdFx0Y2FjaGVVUkwgPSAoIHMudXJsICs9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmRhdGEgKTtcblx0XHRcdFx0Ly8gIzk2ODI6IHJlbW92ZSBkYXRhIHNvIHRoYXQgaXQncyBub3QgdXNlZCBpbiBhbiBldmVudHVhbCByZXRyeVxuXHRcdFx0XHRkZWxldGUgcy5kYXRhO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgYW50aS1jYWNoZSBpbiB1cmwgaWYgbmVlZGVkXG5cdFx0XHRpZiAoIHMuY2FjaGUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRzLnVybCA9IHJ0cy50ZXN0KCBjYWNoZVVSTCApID9cblxuXHRcdFx0XHRcdC8vIElmIHRoZXJlIGlzIGFscmVhZHkgYSAnXycgcGFyYW1ldGVyLCBzZXQgaXRzIHZhbHVlXG5cdFx0XHRcdFx0Y2FjaGVVUkwucmVwbGFjZSggcnRzLCBcIiQxXz1cIiArIG5vbmNlKysgKSA6XG5cblx0XHRcdFx0XHQvLyBPdGhlcndpc2UgYWRkIG9uZSB0byB0aGUgZW5kXG5cdFx0XHRcdFx0Y2FjaGVVUkwgKyAoIHJxdWVyeS50ZXN0KCBjYWNoZVVSTCApID8gXCImXCIgOiBcIj9cIiApICsgXCJfPVwiICsgbm9uY2UrKztcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLlxuXHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0aWYgKCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICkge1xuXHRcdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIklmLU1vZGlmaWVkLVNpbmNlXCIsIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKTtcblx0XHRcdH1cblx0XHRcdGlmICggalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTm9uZS1NYXRjaFwiLCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgY29ycmVjdCBoZWFkZXIsIGlmIGRhdGEgaXMgYmVpbmcgc2VudFxuXHRcdGlmICggcy5kYXRhICYmIHMuaGFzQ29udGVudCAmJiBzLmNvbnRlbnRUeXBlICE9PSBmYWxzZSB8fCBvcHRpb25zLmNvbnRlbnRUeXBlICkge1xuXHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJDb250ZW50LVR5cGVcIiwgcy5jb250ZW50VHlwZSApO1xuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgQWNjZXB0cyBoZWFkZXIgZm9yIHRoZSBzZXJ2ZXIsIGRlcGVuZGluZyBvbiB0aGUgZGF0YVR5cGVcblx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKFxuXHRcdFx0XCJBY2NlcHRcIixcblx0XHRcdHMuZGF0YVR5cGVzWyAwIF0gJiYgcy5hY2NlcHRzWyBzLmRhdGFUeXBlc1swXSBdID9cblx0XHRcdFx0cy5hY2NlcHRzWyBzLmRhdGFUeXBlc1swXSBdICsgKCBzLmRhdGFUeXBlc1sgMCBdICE9PSBcIipcIiA/IFwiLCBcIiArIGFsbFR5cGVzICsgXCI7IHE9MC4wMVwiIDogXCJcIiApIDpcblx0XHRcdFx0cy5hY2NlcHRzWyBcIipcIiBdXG5cdFx0KTtcblxuXHRcdC8vIENoZWNrIGZvciBoZWFkZXJzIG9wdGlvblxuXHRcdGZvciAoIGkgaW4gcy5oZWFkZXJzICkge1xuXHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggaSwgcy5oZWFkZXJzWyBpIF0gKTtcblx0XHR9XG5cblx0XHQvLyBBbGxvdyBjdXN0b20gaGVhZGVycy9taW1ldHlwZXMgYW5kIGVhcmx5IGFib3J0XG5cdFx0aWYgKCBzLmJlZm9yZVNlbmQgJiYgKCBzLmJlZm9yZVNlbmQuY2FsbCggY2FsbGJhY2tDb250ZXh0LCBqcVhIUiwgcyApID09PSBmYWxzZSB8fCBzdGF0ZSA9PT0gMiApICkge1xuXHRcdFx0Ly8gQWJvcnQgaWYgbm90IGRvbmUgYWxyZWFkeSBhbmQgcmV0dXJuXG5cdFx0XHRyZXR1cm4ganFYSFIuYWJvcnQoKTtcblx0XHR9XG5cblx0XHQvLyBBYm9ydGluZyBpcyBubyBsb25nZXIgYSBjYW5jZWxsYXRpb25cblx0XHRzdHJBYm9ydCA9IFwiYWJvcnRcIjtcblxuXHRcdC8vIEluc3RhbGwgY2FsbGJhY2tzIG9uIGRlZmVycmVkc1xuXHRcdGZvciAoIGkgaW4geyBzdWNjZXNzOiAxLCBlcnJvcjogMSwgY29tcGxldGU6IDEgfSApIHtcblx0XHRcdGpxWEhSWyBpIF0oIHNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEdldCB0cmFuc3BvcnRcblx0XHR0cmFuc3BvcnQgPSBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIG5vIHRyYW5zcG9ydCwgd2UgYXV0by1hYm9ydFxuXHRcdGlmICggIXRyYW5zcG9ydCApIHtcblx0XHRcdGRvbmUoIC0xLCBcIk5vIFRyYW5zcG9ydFwiICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSAxO1xuXG5cdFx0XHQvLyBTZW5kIGdsb2JhbCBldmVudFxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheFNlbmRcIiwgWyBqcVhIUiwgcyBdICk7XG5cdFx0XHR9XG5cdFx0XHQvLyBUaW1lb3V0XG5cdFx0XHRpZiAoIHMuYXN5bmMgJiYgcy50aW1lb3V0ID4gMCApIHtcblx0XHRcdFx0dGltZW91dFRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRqcVhIUi5hYm9ydChcInRpbWVvdXRcIik7XG5cdFx0XHRcdH0sIHMudGltZW91dCApO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRzdGF0ZSA9IDE7XG5cdFx0XHRcdHRyYW5zcG9ydC5zZW5kKCByZXF1ZXN0SGVhZGVycywgZG9uZSApO1xuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdC8vIFByb3BhZ2F0ZSBleGNlcHRpb24gYXMgZXJyb3IgaWYgbm90IGRvbmVcblx0XHRcdFx0aWYgKCBzdGF0ZSA8IDIgKSB7XG5cdFx0XHRcdFx0ZG9uZSggLTEsIGUgKTtcblx0XHRcdFx0Ly8gU2ltcGx5IHJldGhyb3cgb3RoZXJ3aXNlXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhbGxiYWNrIGZvciB3aGVuIGV2ZXJ5dGhpbmcgaXMgZG9uZVxuXHRcdGZ1bmN0aW9uIGRvbmUoIHN0YXR1cywgbmF0aXZlU3RhdHVzVGV4dCwgcmVzcG9uc2VzLCBoZWFkZXJzICkge1xuXHRcdFx0dmFyIGlzU3VjY2Vzcywgc3VjY2VzcywgZXJyb3IsIHJlc3BvbnNlLCBtb2RpZmllZCxcblx0XHRcdFx0c3RhdHVzVGV4dCA9IG5hdGl2ZVN0YXR1c1RleHQ7XG5cblx0XHRcdC8vIENhbGxlZCBvbmNlXG5cdFx0XHRpZiAoIHN0YXRlID09PSAyICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXRlIGlzIFwiZG9uZVwiIG5vd1xuXHRcdFx0c3RhdGUgPSAyO1xuXG5cdFx0XHQvLyBDbGVhciB0aW1lb3V0IGlmIGl0IGV4aXN0c1xuXHRcdFx0aWYgKCB0aW1lb3V0VGltZXIgKSB7XG5cdFx0XHRcdGNsZWFyVGltZW91dCggdGltZW91dFRpbWVyICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIERlcmVmZXJlbmNlIHRyYW5zcG9ydCBmb3IgZWFybHkgZ2FyYmFnZSBjb2xsZWN0aW9uXG5cdFx0XHQvLyAobm8gbWF0dGVyIGhvdyBsb25nIHRoZSBqcVhIUiBvYmplY3Qgd2lsbCBiZSB1c2VkKVxuXHRcdFx0dHJhbnNwb3J0ID0gdW5kZWZpbmVkO1xuXG5cdFx0XHQvLyBDYWNoZSByZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcgPSBoZWFkZXJzIHx8IFwiXCI7XG5cblx0XHRcdC8vIFNldCByZWFkeVN0YXRlXG5cdFx0XHRqcVhIUi5yZWFkeVN0YXRlID0gc3RhdHVzID4gMCA/IDQgOiAwO1xuXG5cdFx0XHQvLyBEZXRlcm1pbmUgaWYgc3VjY2Vzc2Z1bFxuXHRcdFx0aXNTdWNjZXNzID0gc3RhdHVzID49IDIwMCAmJiBzdGF0dXMgPCAzMDAgfHwgc3RhdHVzID09PSAzMDQ7XG5cblx0XHRcdC8vIEdldCByZXNwb25zZSBkYXRhXG5cdFx0XHRpZiAoIHJlc3BvbnNlcyApIHtcblx0XHRcdFx0cmVzcG9uc2UgPSBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnZlcnQgbm8gbWF0dGVyIHdoYXQgKHRoYXQgd2F5IHJlc3BvbnNlWFhYIGZpZWxkcyBhcmUgYWx3YXlzIHNldClcblx0XHRcdHJlc3BvbnNlID0gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICk7XG5cblx0XHRcdC8vIElmIHN1Y2Nlc3NmdWwsIGhhbmRsZSB0eXBlIGNoYWluaW5nXG5cdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblxuXHRcdFx0XHQvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLlxuXHRcdFx0XHRpZiAoIHMuaWZNb2RpZmllZCApIHtcblx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKFwiTGFzdC1Nb2RpZmllZFwiKTtcblx0XHRcdFx0XHRpZiAoIG1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKFwiZXRhZ1wiKTtcblx0XHRcdFx0XHRpZiAoIG1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBpZiBubyBjb250ZW50XG5cdFx0XHRcdGlmICggc3RhdHVzID09PSAyMDQgfHwgcy50eXBlID09PSBcIkhFQURcIiApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub2NvbnRlbnRcIjtcblxuXHRcdFx0XHQvLyBpZiBub3QgbW9kaWZpZWRcblx0XHRcdFx0fSBlbHNlIGlmICggc3RhdHVzID09PSAzMDQgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwibm90bW9kaWZpZWRcIjtcblxuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGRhdGEsIGxldCdzIGNvbnZlcnQgaXRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gcmVzcG9uc2Uuc3RhdGU7XG5cdFx0XHRcdFx0c3VjY2VzcyA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdFx0ZXJyb3IgPSByZXNwb25zZS5lcnJvcjtcblx0XHRcdFx0XHRpc1N1Y2Nlc3MgPSAhZXJyb3I7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEV4dHJhY3QgZXJyb3IgZnJvbSBzdGF0dXNUZXh0IGFuZCBub3JtYWxpemUgZm9yIG5vbi1hYm9ydHNcblx0XHRcdFx0ZXJyb3IgPSBzdGF0dXNUZXh0O1xuXHRcdFx0XHRpZiAoIHN0YXR1cyB8fCAhc3RhdHVzVGV4dCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJlcnJvclwiO1xuXHRcdFx0XHRcdGlmICggc3RhdHVzIDwgMCApIHtcblx0XHRcdFx0XHRcdHN0YXR1cyA9IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCBkYXRhIGZvciB0aGUgZmFrZSB4aHIgb2JqZWN0XG5cdFx0XHRqcVhIUi5zdGF0dXMgPSBzdGF0dXM7XG5cdFx0XHRqcVhIUi5zdGF0dXNUZXh0ID0gKCBuYXRpdmVTdGF0dXNUZXh0IHx8IHN0YXR1c1RleHQgKSArIFwiXCI7XG5cblx0XHRcdC8vIFN1Y2Nlc3MvRXJyb3Jcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIHN1Y2Nlc3MsIHN0YXR1c1RleHQsIGpxWEhSIF0gKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCwgZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0anFYSFIuc3RhdHVzQ29kZSggc3RhdHVzQ29kZSApO1xuXHRcdFx0c3RhdHVzQ29kZSA9IHVuZGVmaW5lZDtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIGlzU3VjY2VzcyA/IFwiYWpheFN1Y2Nlc3NcIiA6IFwiYWpheEVycm9yXCIsXG5cdFx0XHRcdFx0WyBqcVhIUiwgcywgaXNTdWNjZXNzID8gc3VjY2VzcyA6IGVycm9yIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29tcGxldGVcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQuZmlyZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBqcVhIUiwgc3RhdHVzVGV4dCBdICk7XG5cblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBcImFqYXhDb21wbGV0ZVwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBnbG9iYWwgQUpBWCBjb3VudGVyXG5cdFx0XHRcdGlmICggISggLS1qUXVlcnkuYWN0aXZlICkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBqcVhIUjtcblx0fSxcblxuXHRnZXRKU09OOiBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdldCggdXJsLCBkYXRhLCBjYWxsYmFjaywgXCJqc29uXCIgKTtcblx0fSxcblxuXHRnZXRTY3JpcHQ6IGZ1bmN0aW9uKCB1cmwsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIHVuZGVmaW5lZCwgY2FsbGJhY2ssIFwic2NyaXB0XCIgKTtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKCBbIFwiZ2V0XCIsIFwicG9zdFwiIF0sIGZ1bmN0aW9uKCBpLCBtZXRob2QgKSB7XG5cdGpRdWVyeVsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjaywgdHlwZSApIHtcblx0XHQvLyBTaGlmdCBhcmd1bWVudHMgaWYgZGF0YSBhcmd1bWVudCB3YXMgb21pdHRlZFxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGRhdGEgKSApIHtcblx0XHRcdHR5cGUgPSB0eXBlIHx8IGNhbGxiYWNrO1xuXHRcdFx0Y2FsbGJhY2sgPSBkYXRhO1xuXHRcdFx0ZGF0YSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cblx0XHRyZXR1cm4galF1ZXJ5LmFqYXgoe1xuXHRcdFx0dXJsOiB1cmwsXG5cdFx0XHR0eXBlOiBtZXRob2QsXG5cdFx0XHRkYXRhVHlwZTogdHlwZSxcblx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRzdWNjZXNzOiBjYWxsYmFja1xuXHRcdH0pO1xuXHR9O1xufSk7XG5cblxualF1ZXJ5Ll9ldmFsVXJsID0gZnVuY3Rpb24oIHVybCApIHtcblx0cmV0dXJuIGpRdWVyeS5hamF4KHtcblx0XHR1cmw6IHVybCxcblx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdGRhdGFUeXBlOiBcInNjcmlwdFwiLFxuXHRcdGFzeW5jOiBmYWxzZSxcblx0XHRnbG9iYWw6IGZhbHNlLFxuXHRcdFwidGhyb3dzXCI6IHRydWVcblx0fSk7XG59O1xuXG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHR3cmFwQWxsOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHR2YXIgd3JhcDtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGh0bWwuY2FsbCh0aGlzLCBpKSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzWyAwIF0gKSB7XG5cblx0XHRcdC8vIFRoZSBlbGVtZW50cyB0byB3cmFwIHRoZSB0YXJnZXQgYXJvdW5kXG5cdFx0XHR3cmFwID0galF1ZXJ5KCBodG1sLCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCApLmVxKCAwICkuY2xvbmUoIHRydWUgKTtcblxuXHRcdFx0aWYgKCB0aGlzWyAwIF0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0d3JhcC5pbnNlcnRCZWZvcmUoIHRoaXNbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHR3cmFwLm1hcChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGVsZW0gPSB0aGlzO1xuXG5cdFx0XHRcdHdoaWxlICggZWxlbS5maXJzdEVsZW1lbnRDaGlsZCApIHtcblx0XHRcdFx0XHRlbGVtID0gZWxlbS5maXJzdEVsZW1lbnRDaGlsZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBlbGVtO1xuXHRcdFx0fSkuYXBwZW5kKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0d3JhcElubmVyOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBodG1sICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS53cmFwSW5uZXIoIGh0bWwuY2FsbCh0aGlzLCBpKSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0galF1ZXJ5KCB0aGlzICksXG5cdFx0XHRcdGNvbnRlbnRzID0gc2VsZi5jb250ZW50cygpO1xuXG5cdFx0XHRpZiAoIGNvbnRlbnRzLmxlbmd0aCApIHtcblx0XHRcdFx0Y29udGVudHMud3JhcEFsbCggaHRtbCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLmFwcGVuZCggaHRtbCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHdyYXA6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciBpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRqUXVlcnkoIHRoaXMgKS53cmFwQWxsKCBpc0Z1bmN0aW9uID8gaHRtbC5jYWxsKHRoaXMsIGkpIDogaHRtbCApO1xuXHRcdH0pO1xuXHR9LFxuXG5cdHVud3JhcDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucGFyZW50KCkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGlmICggIWpRdWVyeS5ub2RlTmFtZSggdGhpcywgXCJib2R5XCIgKSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkucmVwbGFjZVdpdGgoIHRoaXMuY2hpbGROb2RlcyApO1xuXHRcdFx0fVxuXHRcdH0pLmVuZCgpO1xuXHR9XG59KTtcblxuXG5qUXVlcnkuZXhwci5maWx0ZXJzLmhpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHQvLyBTdXBwb3J0OiBPcGVyYSA8PSAxMi4xMlxuXHQvLyBPcGVyYSByZXBvcnRzIG9mZnNldFdpZHRocyBhbmQgb2Zmc2V0SGVpZ2h0cyBsZXNzIHRoYW4gemVybyBvbiBzb21lIGVsZW1lbnRzXG5cdHJldHVybiBlbGVtLm9mZnNldFdpZHRoIDw9IDAgJiYgZWxlbS5vZmZzZXRIZWlnaHQgPD0gMDtcbn07XG5qUXVlcnkuZXhwci5maWx0ZXJzLnZpc2libGUgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0cmV0dXJuICFqUXVlcnkuZXhwci5maWx0ZXJzLmhpZGRlbiggZWxlbSApO1xufTtcblxuXG5cblxudmFyIHIyMCA9IC8lMjAvZyxcblx0cmJyYWNrZXQgPSAvXFxbXFxdJC8sXG5cdHJDUkxGID0gL1xccj9cXG4vZyxcblx0cnN1Ym1pdHRlclR5cGVzID0gL14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLFxuXHRyc3VibWl0dGFibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7XG5cbmZ1bmN0aW9uIGJ1aWxkUGFyYW1zKCBwcmVmaXgsIG9iaiwgdHJhZGl0aW9uYWwsIGFkZCApIHtcblx0dmFyIG5hbWU7XG5cblx0aWYgKCBqUXVlcnkuaXNBcnJheSggb2JqICkgKSB7XG5cdFx0Ly8gU2VyaWFsaXplIGFycmF5IGl0ZW0uXG5cdFx0alF1ZXJ5LmVhY2goIG9iaiwgZnVuY3Rpb24oIGksIHYgKSB7XG5cdFx0XHRpZiAoIHRyYWRpdGlvbmFsIHx8IHJicmFja2V0LnRlc3QoIHByZWZpeCApICkge1xuXHRcdFx0XHQvLyBUcmVhdCBlYWNoIGFycmF5IGl0ZW0gYXMgYSBzY2FsYXIuXG5cdFx0XHRcdGFkZCggcHJlZml4LCB2ICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIEl0ZW0gaXMgbm9uLXNjYWxhciAoYXJyYXkgb3Igb2JqZWN0KSwgZW5jb2RlIGl0cyBudW1lcmljIGluZGV4LlxuXHRcdFx0XHRidWlsZFBhcmFtcyggcHJlZml4ICsgXCJbXCIgKyAoIHR5cGVvZiB2ID09PSBcIm9iamVjdFwiID8gaSA6IFwiXCIgKSArIFwiXVwiLCB2LCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0fSBlbHNlIGlmICggIXRyYWRpdGlvbmFsICYmIGpRdWVyeS50eXBlKCBvYmogKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHQvLyBTZXJpYWxpemUgb2JqZWN0IGl0ZW0uXG5cdFx0Zm9yICggbmFtZSBpbiBvYmogKSB7XG5cdFx0XHRidWlsZFBhcmFtcyggcHJlZml4ICsgXCJbXCIgKyBuYW1lICsgXCJdXCIsIG9ialsgbmFtZSBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXG5cdH0gZWxzZSB7XG5cdFx0Ly8gU2VyaWFsaXplIHNjYWxhciBpdGVtLlxuXHRcdGFkZCggcHJlZml4LCBvYmogKTtcblx0fVxufVxuXG4vLyBTZXJpYWxpemUgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cyBvciBhIHNldCBvZlxuLy8ga2V5L3ZhbHVlcyBpbnRvIGEgcXVlcnkgc3RyaW5nXG5qUXVlcnkucGFyYW0gPSBmdW5jdGlvbiggYSwgdHJhZGl0aW9uYWwgKSB7XG5cdHZhciBwcmVmaXgsXG5cdFx0cyA9IFtdLFxuXHRcdGFkZCA9IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdFx0Ly8gSWYgdmFsdWUgaXMgYSBmdW5jdGlvbiwgaW52b2tlIGl0IGFuZCByZXR1cm4gaXRzIHZhbHVlXG5cdFx0XHR2YWx1ZSA9IGpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApID8gdmFsdWUoKSA6ICggdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSApO1xuXHRcdFx0c1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyBcIj1cIiArIGVuY29kZVVSSUNvbXBvbmVudCggdmFsdWUgKTtcblx0XHR9O1xuXG5cdC8vIFNldCB0cmFkaXRpb25hbCB0byB0cnVlIGZvciBqUXVlcnkgPD0gMS4zLjIgYmVoYXZpb3IuXG5cdGlmICggdHJhZGl0aW9uYWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHR0cmFkaXRpb25hbCA9IGpRdWVyeS5hamF4U2V0dGluZ3MgJiYgalF1ZXJ5LmFqYXhTZXR0aW5ncy50cmFkaXRpb25hbDtcblx0fVxuXG5cdC8vIElmIGFuIGFycmF5IHdhcyBwYXNzZWQgaW4sIGFzc3VtZSB0aGF0IGl0IGlzIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMuXG5cdGlmICggalF1ZXJ5LmlzQXJyYXkoIGEgKSB8fCAoIGEuanF1ZXJ5ICYmICFqUXVlcnkuaXNQbGFpbk9iamVjdCggYSApICkgKSB7XG5cdFx0Ly8gU2VyaWFsaXplIHRoZSBmb3JtIGVsZW1lbnRzXG5cdFx0alF1ZXJ5LmVhY2goIGEsIGZ1bmN0aW9uKCkge1xuXHRcdFx0YWRkKCB0aGlzLm5hbWUsIHRoaXMudmFsdWUgKTtcblx0XHR9KTtcblxuXHR9IGVsc2Uge1xuXHRcdC8vIElmIHRyYWRpdGlvbmFsLCBlbmNvZGUgdGhlIFwib2xkXCIgd2F5ICh0aGUgd2F5IDEuMy4yIG9yIG9sZGVyXG5cdFx0Ly8gZGlkIGl0KSwgb3RoZXJ3aXNlIGVuY29kZSBwYXJhbXMgcmVjdXJzaXZlbHkuXG5cdFx0Zm9yICggcHJlZml4IGluIGEgKSB7XG5cdFx0XHRidWlsZFBhcmFtcyggcHJlZml4LCBhWyBwcmVmaXggXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgcmVzdWx0aW5nIHNlcmlhbGl6YXRpb25cblx0cmV0dXJuIHMuam9pbiggXCImXCIgKS5yZXBsYWNlKCByMjAsIFwiK1wiICk7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0c2VyaWFsaXplOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4galF1ZXJ5LnBhcmFtKCB0aGlzLnNlcmlhbGl6ZUFycmF5KCkgKTtcblx0fSxcblx0c2VyaWFsaXplQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpIHtcblx0XHRcdC8vIENhbiBhZGQgcHJvcEhvb2sgZm9yIFwiZWxlbWVudHNcIiB0byBmaWx0ZXIgb3IgYWRkIGZvcm0gZWxlbWVudHNcblx0XHRcdHZhciBlbGVtZW50cyA9IGpRdWVyeS5wcm9wKCB0aGlzLCBcImVsZW1lbnRzXCIgKTtcblx0XHRcdHJldHVybiBlbGVtZW50cyA/IGpRdWVyeS5tYWtlQXJyYXkoIGVsZW1lbnRzICkgOiB0aGlzO1xuXHRcdH0pXG5cdFx0LmZpbHRlcihmdW5jdGlvbigpIHtcblx0XHRcdHZhciB0eXBlID0gdGhpcy50eXBlO1xuXG5cdFx0XHQvLyBVc2UgLmlzKCBcIjpkaXNhYmxlZFwiICkgc28gdGhhdCBmaWVsZHNldFtkaXNhYmxlZF0gd29ya3Ncblx0XHRcdHJldHVybiB0aGlzLm5hbWUgJiYgIWpRdWVyeSggdGhpcyApLmlzKCBcIjpkaXNhYmxlZFwiICkgJiZcblx0XHRcdFx0cnN1Ym1pdHRhYmxlLnRlc3QoIHRoaXMubm9kZU5hbWUgKSAmJiAhcnN1Ym1pdHRlclR5cGVzLnRlc3QoIHR5cGUgKSAmJlxuXHRcdFx0XHQoIHRoaXMuY2hlY2tlZCB8fCAhcmNoZWNrYWJsZVR5cGUudGVzdCggdHlwZSApICk7XG5cdFx0fSlcblx0XHQubWFwKGZ1bmN0aW9uKCBpLCBlbGVtICkge1xuXHRcdFx0dmFyIHZhbCA9IGpRdWVyeSggdGhpcyApLnZhbCgpO1xuXG5cdFx0XHRyZXR1cm4gdmFsID09IG51bGwgP1xuXHRcdFx0XHRudWxsIDpcblx0XHRcdFx0alF1ZXJ5LmlzQXJyYXkoIHZhbCApID9cblx0XHRcdFx0XHRqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4geyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsIFwiXFxyXFxuXCIgKSB9O1xuXHRcdFx0XHRcdH0pIDpcblx0XHRcdFx0XHR7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0fSkuZ2V0KCk7XG5cdH1cbn0pO1xuXG5cbmpRdWVyeS5hamF4U2V0dGluZ3MueGhyID0gZnVuY3Rpb24oKSB7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHR9IGNhdGNoKCBlICkge31cbn07XG5cbnZhciB4aHJJZCA9IDAsXG5cdHhockNhbGxiYWNrcyA9IHt9LFxuXHR4aHJTdWNjZXNzU3RhdHVzID0ge1xuXHRcdC8vIGZpbGUgcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgY29kZSAwLCBhc3N1bWUgMjAwXG5cdFx0MDogMjAwLFxuXHRcdC8vIFN1cHBvcnQ6IElFOVxuXHRcdC8vICMxNDUwOiBzb21ldGltZXMgSUUgcmV0dXJucyAxMjIzIHdoZW4gaXQgc2hvdWxkIGJlIDIwNFxuXHRcdDEyMjM6IDIwNFxuXHR9LFxuXHR4aHJTdXBwb3J0ZWQgPSBqUXVlcnkuYWpheFNldHRpbmdzLnhocigpO1xuXG4vLyBTdXBwb3J0OiBJRTlcbi8vIE9wZW4gcmVxdWVzdHMgbXVzdCBiZSBtYW51YWxseSBhYm9ydGVkIG9uIHVubG9hZCAoIzUyODApXG4vLyBTZWUgaHR0cHM6Ly9zdXBwb3J0Lm1pY3Jvc29mdC5jb20va2IvMjg1Njc0NiBmb3IgbW9yZSBpbmZvXG5pZiAoIHdpbmRvdy5hdHRhY2hFdmVudCApIHtcblx0d2luZG93LmF0dGFjaEV2ZW50KCBcIm9udW5sb2FkXCIsIGZ1bmN0aW9uKCkge1xuXHRcdGZvciAoIHZhciBrZXkgaW4geGhyQ2FsbGJhY2tzICkge1xuXHRcdFx0eGhyQ2FsbGJhY2tzWyBrZXkgXSgpO1xuXHRcdH1cblx0fSk7XG59XG5cbnN1cHBvcnQuY29ycyA9ICEheGhyU3VwcG9ydGVkICYmICggXCJ3aXRoQ3JlZGVudGlhbHNcIiBpbiB4aHJTdXBwb3J0ZWQgKTtcbnN1cHBvcnQuYWpheCA9IHhoclN1cHBvcnRlZCA9ICEheGhyU3VwcG9ydGVkO1xuXG5qUXVlcnkuYWpheFRyYW5zcG9ydChmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0dmFyIGNhbGxiYWNrO1xuXG5cdC8vIENyb3NzIGRvbWFpbiBvbmx5IGFsbG93ZWQgaWYgc3VwcG9ydGVkIHRocm91Z2ggWE1MSHR0cFJlcXVlc3Rcblx0aWYgKCBzdXBwb3J0LmNvcnMgfHwgeGhyU3VwcG9ydGVkICYmICFvcHRpb25zLmNyb3NzRG9tYWluICkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZW5kOiBmdW5jdGlvbiggaGVhZGVycywgY29tcGxldGUgKSB7XG5cdFx0XHRcdHZhciBpLFxuXHRcdFx0XHRcdHhociA9IG9wdGlvbnMueGhyKCksXG5cdFx0XHRcdFx0aWQgPSArK3hocklkO1xuXG5cdFx0XHRcdHhoci5vcGVuKCBvcHRpb25zLnR5cGUsIG9wdGlvbnMudXJsLCBvcHRpb25zLmFzeW5jLCBvcHRpb25zLnVzZXJuYW1lLCBvcHRpb25zLnBhc3N3b3JkICk7XG5cblx0XHRcdFx0Ly8gQXBwbHkgY3VzdG9tIGZpZWxkcyBpZiBwcm92aWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMueGhyRmllbGRzICkge1xuXHRcdFx0XHRcdGZvciAoIGkgaW4gb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0XHR4aHJbIGkgXSA9IG9wdGlvbnMueGhyRmllbGRzWyBpIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT3ZlcnJpZGUgbWltZSB0eXBlIGlmIG5lZWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMubWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUgKSB7XG5cdFx0XHRcdFx0eGhyLm92ZXJyaWRlTWltZVR5cGUoIG9wdGlvbnMubWltZVR5cGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFgtUmVxdWVzdGVkLVdpdGggaGVhZGVyXG5cdFx0XHRcdC8vIEZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMsIHNlZWluZyBhcyBjb25kaXRpb25zIGZvciBhIHByZWZsaWdodCBhcmVcblx0XHRcdFx0Ly8gYWtpbiB0byBhIGppZ3NhdyBwdXp6bGUsIHdlIHNpbXBseSBuZXZlciBzZXQgaXQgdG8gYmUgc3VyZS5cblx0XHRcdFx0Ly8gKGl0IGNhbiBhbHdheXMgYmUgc2V0IG9uIGEgcGVyLXJlcXVlc3QgYmFzaXMgb3IgZXZlbiB1c2luZyBhamF4U2V0dXApXG5cdFx0XHRcdC8vIEZvciBzYW1lLWRvbWFpbiByZXF1ZXN0cywgd29uJ3QgY2hhbmdlIGhlYWRlciBpZiBhbHJlYWR5IHByb3ZpZGVkLlxuXHRcdFx0XHRpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluICYmICFoZWFkZXJzW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXSApIHtcblx0XHRcdFx0XHRoZWFkZXJzW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFNldCBoZWFkZXJzXG5cdFx0XHRcdGZvciAoIGkgaW4gaGVhZGVycyApIHtcblx0XHRcdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlciggaSwgaGVhZGVyc1sgaSBdICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDYWxsYmFja1xuXHRcdFx0XHRjYWxsYmFjayA9IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHRcdGRlbGV0ZSB4aHJDYWxsYmFja3NbIGlkIF07XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrID0geGhyLm9ubG9hZCA9IHhoci5vbmVycm9yID0gbnVsbDtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiYWJvcnRcIiApIHtcblx0XHRcdFx0XHRcdFx0XHR4aHIuYWJvcnQoKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gXCJlcnJvclwiICkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gZmlsZTogcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgMDsgc2VlICM4NjA1LCAjMTQyMDdcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXMsXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dFxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHJTdWNjZXNzU3RhdHVzWyB4aHIuc3RhdHVzIF0gfHwgeGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0LFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBY2Nlc3NpbmcgYmluYXJ5LWRhdGEgcmVzcG9uc2VUZXh0IHRocm93cyBhbiBleGNlcHRpb25cblx0XHRcdFx0XHRcdFx0XHRcdC8vICgjMTE0MjYpXG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlb2YgeGhyLnJlc3BvbnNlVGV4dCA9PT0gXCJzdHJpbmdcIiA/IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogeGhyLnJlc3BvbnNlVGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0fSA6IHVuZGVmaW5lZCxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKVxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9O1xuXG5cdFx0XHRcdC8vIExpc3RlbiB0byBldmVudHNcblx0XHRcdFx0eGhyLm9ubG9hZCA9IGNhbGxiYWNrKCk7XG5cdFx0XHRcdHhoci5vbmVycm9yID0gY2FsbGJhY2soXCJlcnJvclwiKTtcblxuXHRcdFx0XHQvLyBDcmVhdGUgdGhlIGFib3J0IGNhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0geGhyQ2FsbGJhY2tzWyBpZCBdID0gY2FsbGJhY2soXCJhYm9ydFwiKTtcblxuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdC8vIERvIHNlbmQgdGhlIHJlcXVlc3QgKHRoaXMgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbilcblx0XHRcdFx0XHR4aHIuc2VuZCggb3B0aW9ucy5oYXNDb250ZW50ICYmIG9wdGlvbnMuZGF0YSB8fCBudWxsICk7XG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRcdC8vICMxNDY4MzogT25seSByZXRocm93IGlmIHRoaXMgaGFzbid0IGJlZW4gbm90aWZpZWQgYXMgYW4gZXJyb3IgeWV0XG5cdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG4vLyBJbnN0YWxsIHNjcmlwdCBkYXRhVHlwZVxualF1ZXJ5LmFqYXhTZXR1cCh7XG5cdGFjY2VwdHM6IHtcblx0XHRzY3JpcHQ6IFwidGV4dC9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9qYXZhc2NyaXB0LCBhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIlxuXHR9LFxuXHRjb250ZW50czoge1xuXHRcdHNjcmlwdDogLyg/OmphdmF8ZWNtYSlzY3JpcHQvXG5cdH0sXG5cdGNvbnZlcnRlcnM6IHtcblx0XHRcInRleHQgc2NyaXB0XCI6IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0alF1ZXJ5Lmdsb2JhbEV2YWwoIHRleHQgKTtcblx0XHRcdHJldHVybiB0ZXh0O1xuXHRcdH1cblx0fVxufSk7XG5cbi8vIEhhbmRsZSBjYWNoZSdzIHNwZWNpYWwgY2FzZSBhbmQgY3Jvc3NEb21haW5cbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblx0aWYgKCBzLmNhY2hlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0cy5jYWNoZSA9IGZhbHNlO1xuXHR9XG5cdGlmICggcy5jcm9zc0RvbWFpbiApIHtcblx0XHRzLnR5cGUgPSBcIkdFVFwiO1xuXHR9XG59KTtcblxuLy8gQmluZCBzY3JpcHQgdGFnIGhhY2sgdHJhbnNwb3J0XG5qUXVlcnkuYWpheFRyYW5zcG9ydCggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cdC8vIFRoaXMgdHJhbnNwb3J0IG9ubHkgZGVhbHMgd2l0aCBjcm9zcyBkb21haW4gcmVxdWVzdHNcblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHZhciBzY3JpcHQsIGNhbGxiYWNrO1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZW5kOiBmdW5jdGlvbiggXywgY29tcGxldGUgKSB7XG5cdFx0XHRcdHNjcmlwdCA9IGpRdWVyeShcIjxzY3JpcHQ+XCIpLnByb3Aoe1xuXHRcdFx0XHRcdGFzeW5jOiB0cnVlLFxuXHRcdFx0XHRcdGNoYXJzZXQ6IHMuc2NyaXB0Q2hhcnNldCxcblx0XHRcdFx0XHRzcmM6IHMudXJsXG5cdFx0XHRcdH0pLm9uKFxuXHRcdFx0XHRcdFwibG9hZCBlcnJvclwiLFxuXHRcdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIGV2dCApIHtcblx0XHRcdFx0XHRcdHNjcmlwdC5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdGNhbGxiYWNrID0gbnVsbDtcblx0XHRcdFx0XHRcdGlmICggZXZ0ICkge1xuXHRcdFx0XHRcdFx0XHRjb21wbGV0ZSggZXZ0LnR5cGUgPT09IFwiZXJyb3JcIiA/IDQwNCA6IDIwMCwgZXZ0LnR5cGUgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdCk7XG5cdFx0XHRcdGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdFsgMCBdICk7XG5cdFx0XHR9LFxuXHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG59KTtcblxuXG5cblxudmFyIG9sZENhbGxiYWNrcyA9IFtdLFxuXHRyanNvbnAgPSAvKD0pXFw/KD89JnwkKXxcXD9cXD8vO1xuXG4vLyBEZWZhdWx0IGpzb25wIHNldHRpbmdzXG5qUXVlcnkuYWpheFNldHVwKHtcblx0anNvbnA6IFwiY2FsbGJhY2tcIixcblx0anNvbnBDYWxsYmFjazogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNhbGxiYWNrID0gb2xkQ2FsbGJhY2tzLnBvcCgpIHx8ICggalF1ZXJ5LmV4cGFuZG8gKyBcIl9cIiArICggbm9uY2UrKyApICk7XG5cdFx0dGhpc1sgY2FsbGJhY2sgXSA9IHRydWU7XG5cdFx0cmV0dXJuIGNhbGxiYWNrO1xuXHR9XG59KTtcblxuLy8gRGV0ZWN0LCBub3JtYWxpemUgb3B0aW9ucyBhbmQgaW5zdGFsbCBjYWxsYmFja3MgZm9yIGpzb25wIHJlcXVlc3RzXG5qUXVlcnkuYWpheFByZWZpbHRlciggXCJqc29uIGpzb25wXCIsIGZ1bmN0aW9uKCBzLCBvcmlnaW5hbFNldHRpbmdzLCBqcVhIUiApIHtcblxuXHR2YXIgY2FsbGJhY2tOYW1lLCBvdmVyd3JpdHRlbiwgcmVzcG9uc2VDb250YWluZXIsXG5cdFx0anNvblByb3AgPSBzLmpzb25wICE9PSBmYWxzZSAmJiAoIHJqc29ucC50ZXN0KCBzLnVybCApID9cblx0XHRcdFwidXJsXCIgOlxuXHRcdFx0dHlwZW9mIHMuZGF0YSA9PT0gXCJzdHJpbmdcIiAmJiAhKCBzLmNvbnRlbnRUeXBlIHx8IFwiXCIgKS5pbmRleE9mKFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIpICYmIHJqc29ucC50ZXN0KCBzLmRhdGEgKSAmJiBcImRhdGFcIlxuXHRcdCk7XG5cblx0Ly8gSGFuZGxlIGlmZiB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlIGlzIFwianNvbnBcIiBvciB3ZSBoYXZlIGEgcGFyYW1ldGVyIHRvIHNldFxuXHRpZiAoIGpzb25Qcm9wIHx8IHMuZGF0YVR5cGVzWyAwIF0gPT09IFwianNvbnBcIiApIHtcblxuXHRcdC8vIEdldCBjYWxsYmFjayBuYW1lLCByZW1lbWJlcmluZyBwcmVleGlzdGluZyB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggaXRcblx0XHRjYWxsYmFja05hbWUgPSBzLmpzb25wQ2FsbGJhY2sgPSBqUXVlcnkuaXNGdW5jdGlvbiggcy5qc29ucENhbGxiYWNrICkgP1xuXHRcdFx0cy5qc29ucENhbGxiYWNrKCkgOlxuXHRcdFx0cy5qc29ucENhbGxiYWNrO1xuXG5cdFx0Ly8gSW5zZXJ0IGNhbGxiYWNrIGludG8gdXJsIG9yIGZvcm0gZGF0YVxuXHRcdGlmICgganNvblByb3AgKSB7XG5cdFx0XHRzWyBqc29uUHJvcCBdID0gc1sganNvblByb3AgXS5yZXBsYWNlKCByanNvbnAsIFwiJDFcIiArIGNhbGxiYWNrTmFtZSApO1xuXHRcdH0gZWxzZSBpZiAoIHMuanNvbnAgIT09IGZhbHNlICkge1xuXHRcdFx0cy51cmwgKz0gKCBycXVlcnkudGVzdCggcy51cmwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuanNvbnAgKyBcIj1cIiArIGNhbGxiYWNrTmFtZTtcblx0XHR9XG5cblx0XHQvLyBVc2UgZGF0YSBjb252ZXJ0ZXIgdG8gcmV0cmlldmUganNvbiBhZnRlciBzY3JpcHQgZXhlY3V0aW9uXG5cdFx0cy5jb252ZXJ0ZXJzW1wic2NyaXB0IGpzb25cIl0gPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggIXJlc3BvbnNlQ29udGFpbmVyICkge1xuXHRcdFx0XHRqUXVlcnkuZXJyb3IoIGNhbGxiYWNrTmFtZSArIFwiIHdhcyBub3QgY2FsbGVkXCIgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXNwb25zZUNvbnRhaW5lclsgMCBdO1xuXHRcdH07XG5cblx0XHQvLyBmb3JjZSBqc29uIGRhdGFUeXBlXG5cdFx0cy5kYXRhVHlwZXNbIDAgXSA9IFwianNvblwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja1xuXHRcdG92ZXJ3cml0dGVuID0gd2luZG93WyBjYWxsYmFja05hbWUgXTtcblx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXNwb25zZUNvbnRhaW5lciA9IGFyZ3VtZW50cztcblx0XHR9O1xuXG5cdFx0Ly8gQ2xlYW4tdXAgZnVuY3Rpb24gKGZpcmVzIGFmdGVyIGNvbnZlcnRlcnMpXG5cdFx0anFYSFIuYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gUmVzdG9yZSBwcmVleGlzdGluZyB2YWx1ZVxuXHRcdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IG92ZXJ3cml0dGVuO1xuXG5cdFx0XHQvLyBTYXZlIGJhY2sgYXMgZnJlZVxuXHRcdFx0aWYgKCBzWyBjYWxsYmFja05hbWUgXSApIHtcblx0XHRcdFx0Ly8gbWFrZSBzdXJlIHRoYXQgcmUtdXNpbmcgdGhlIG9wdGlvbnMgZG9lc24ndCBzY3JldyB0aGluZ3MgYXJvdW5kXG5cdFx0XHRcdHMuanNvbnBDYWxsYmFjayA9IG9yaWdpbmFsU2V0dGluZ3MuanNvbnBDYWxsYmFjaztcblxuXHRcdFx0XHQvLyBzYXZlIHRoZSBjYWxsYmFjayBuYW1lIGZvciBmdXR1cmUgdXNlXG5cdFx0XHRcdG9sZENhbGxiYWNrcy5wdXNoKCBjYWxsYmFja05hbWUgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FsbCBpZiBpdCB3YXMgYSBmdW5jdGlvbiBhbmQgd2UgaGF2ZSBhIHJlc3BvbnNlXG5cdFx0XHRpZiAoIHJlc3BvbnNlQ29udGFpbmVyICYmIGpRdWVyeS5pc0Z1bmN0aW9uKCBvdmVyd3JpdHRlbiApICkge1xuXHRcdFx0XHRvdmVyd3JpdHRlbiggcmVzcG9uc2VDb250YWluZXJbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXNwb25zZUNvbnRhaW5lciA9IG92ZXJ3cml0dGVuID0gdW5kZWZpbmVkO1xuXHRcdH0pO1xuXG5cdFx0Ly8gRGVsZWdhdGUgdG8gc2NyaXB0XG5cdFx0cmV0dXJuIFwic2NyaXB0XCI7XG5cdH1cbn0pO1xuXG5cblxuXG4vLyBkYXRhOiBzdHJpbmcgb2YgaHRtbFxuLy8gY29udGV4dCAob3B0aW9uYWwpOiBJZiBzcGVjaWZpZWQsIHRoZSBmcmFnbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW4gdGhpcyBjb250ZXh0LCBkZWZhdWx0cyB0byBkb2N1bWVudFxuLy8ga2VlcFNjcmlwdHMgKG9wdGlvbmFsKTogSWYgdHJ1ZSwgd2lsbCBpbmNsdWRlIHNjcmlwdHMgcGFzc2VkIGluIHRoZSBodG1sIHN0cmluZ1xualF1ZXJ5LnBhcnNlSFRNTCA9IGZ1bmN0aW9uKCBkYXRhLCBjb250ZXh0LCBrZWVwU2NyaXB0cyApIHtcblx0aWYgKCAhZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRrZWVwU2NyaXB0cyA9IGNvbnRleHQ7XG5cdFx0Y29udGV4dCA9IGZhbHNlO1xuXHR9XG5cdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXG5cdHZhciBwYXJzZWQgPSByc2luZ2xlVGFnLmV4ZWMoIGRhdGEgKSxcblx0XHRzY3JpcHRzID0gIWtlZXBTY3JpcHRzICYmIFtdO1xuXG5cdC8vIFNpbmdsZSB0YWdcblx0aWYgKCBwYXJzZWQgKSB7XG5cdFx0cmV0dXJuIFsgY29udGV4dC5jcmVhdGVFbGVtZW50KCBwYXJzZWRbMV0gKSBdO1xuXHR9XG5cblx0cGFyc2VkID0galF1ZXJ5LmJ1aWxkRnJhZ21lbnQoIFsgZGF0YSBdLCBjb250ZXh0LCBzY3JpcHRzICk7XG5cblx0aWYgKCBzY3JpcHRzICYmIHNjcmlwdHMubGVuZ3RoICkge1xuXHRcdGpRdWVyeSggc2NyaXB0cyApLnJlbW92ZSgpO1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeS5tZXJnZSggW10sIHBhcnNlZC5jaGlsZE5vZGVzICk7XG59O1xuXG5cbi8vIEtlZXAgYSBjb3B5IG9mIHRoZSBvbGQgbG9hZCBtZXRob2RcbnZhciBfbG9hZCA9IGpRdWVyeS5mbi5sb2FkO1xuXG4vKipcbiAqIExvYWQgYSB1cmwgaW50byBhIHBhZ2VcbiAqL1xualF1ZXJ5LmZuLmxvYWQgPSBmdW5jdGlvbiggdXJsLCBwYXJhbXMsIGNhbGxiYWNrICkge1xuXHRpZiAoIHR5cGVvZiB1cmwgIT09IFwic3RyaW5nXCIgJiYgX2xvYWQgKSB7XG5cdFx0cmV0dXJuIF9sb2FkLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0fVxuXG5cdHZhciBzZWxlY3RvciwgdHlwZSwgcmVzcG9uc2UsXG5cdFx0c2VsZiA9IHRoaXMsXG5cdFx0b2ZmID0gdXJsLmluZGV4T2YoXCIgXCIpO1xuXG5cdGlmICggb2ZmID49IDAgKSB7XG5cdFx0c2VsZWN0b3IgPSBqUXVlcnkudHJpbSggdXJsLnNsaWNlKCBvZmYgKSApO1xuXHRcdHVybCA9IHVybC5zbGljZSggMCwgb2ZmICk7XG5cdH1cblxuXHQvLyBJZiBpdCdzIGEgZnVuY3Rpb25cblx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcGFyYW1zICkgKSB7XG5cblx0XHQvLyBXZSBhc3N1bWUgdGhhdCBpdCdzIHRoZSBjYWxsYmFja1xuXHRcdGNhbGxiYWNrID0gcGFyYW1zO1xuXHRcdHBhcmFtcyA9IHVuZGVmaW5lZDtcblxuXHQvLyBPdGhlcndpc2UsIGJ1aWxkIGEgcGFyYW0gc3RyaW5nXG5cdH0gZWxzZSBpZiAoIHBhcmFtcyAmJiB0eXBlb2YgcGFyYW1zID09PSBcIm9iamVjdFwiICkge1xuXHRcdHR5cGUgPSBcIlBPU1RcIjtcblx0fVxuXG5cdC8vIElmIHdlIGhhdmUgZWxlbWVudHMgdG8gbW9kaWZ5LCBtYWtlIHRoZSByZXF1ZXN0XG5cdGlmICggc2VsZi5sZW5ndGggPiAwICkge1xuXHRcdGpRdWVyeS5hamF4KHtcblx0XHRcdHVybDogdXJsLFxuXG5cdFx0XHQvLyBpZiBcInR5cGVcIiB2YXJpYWJsZSBpcyB1bmRlZmluZWQsIHRoZW4gXCJHRVRcIiBtZXRob2Qgd2lsbCBiZSB1c2VkXG5cdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0ZGF0YVR5cGU6IFwiaHRtbFwiLFxuXHRcdFx0ZGF0YTogcGFyYW1zXG5cdFx0fSkuZG9uZShmdW5jdGlvbiggcmVzcG9uc2VUZXh0ICkge1xuXG5cdFx0XHQvLyBTYXZlIHJlc3BvbnNlIGZvciB1c2UgaW4gY29tcGxldGUgY2FsbGJhY2tcblx0XHRcdHJlc3BvbnNlID0gYXJndW1lbnRzO1xuXG5cdFx0XHRzZWxmLmh0bWwoIHNlbGVjdG9yID9cblxuXHRcdFx0XHQvLyBJZiBhIHNlbGVjdG9yIHdhcyBzcGVjaWZpZWQsIGxvY2F0ZSB0aGUgcmlnaHQgZWxlbWVudHMgaW4gYSBkdW1teSBkaXZcblx0XHRcdFx0Ly8gRXhjbHVkZSBzY3JpcHRzIHRvIGF2b2lkIElFICdQZXJtaXNzaW9uIERlbmllZCcgZXJyb3JzXG5cdFx0XHRcdGpRdWVyeShcIjxkaXY+XCIpLmFwcGVuZCggalF1ZXJ5LnBhcnNlSFRNTCggcmVzcG9uc2VUZXh0ICkgKS5maW5kKCBzZWxlY3RvciApIDpcblxuXHRcdFx0XHQvLyBPdGhlcndpc2UgdXNlIHRoZSBmdWxsIHJlc3VsdFxuXHRcdFx0XHRyZXNwb25zZVRleHQgKTtcblxuXHRcdH0pLmNvbXBsZXRlKCBjYWxsYmFjayAmJiBmdW5jdGlvbigganFYSFIsIHN0YXR1cyApIHtcblx0XHRcdHNlbGYuZWFjaCggY2FsbGJhY2ssIHJlc3BvbnNlIHx8IFsganFYSFIucmVzcG9uc2VUZXh0LCBzdGF0dXMsIGpxWEhSIF0gKTtcblx0XHR9KTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufTtcblxuXG5cblxuLy8gQXR0YWNoIGEgYnVuY2ggb2YgZnVuY3Rpb25zIGZvciBoYW5kbGluZyBjb21tb24gQUpBWCBldmVudHNcbmpRdWVyeS5lYWNoKCBbIFwiYWpheFN0YXJ0XCIsIFwiYWpheFN0b3BcIiwgXCJhamF4Q29tcGxldGVcIiwgXCJhamF4RXJyb3JcIiwgXCJhamF4U3VjY2Vzc1wiLCBcImFqYXhTZW5kXCIgXSwgZnVuY3Rpb24oIGksIHR5cGUgKSB7XG5cdGpRdWVyeS5mblsgdHlwZSBdID0gZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlLCBmbiApO1xuXHR9O1xufSk7XG5cblxuXG5cbmpRdWVyeS5leHByLmZpbHRlcnMuYW5pbWF0ZWQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0cmV0dXJuIGpRdWVyeS5ncmVwKGpRdWVyeS50aW1lcnMsIGZ1bmN0aW9uKCBmbiApIHtcblx0XHRyZXR1cm4gZWxlbSA9PT0gZm4uZWxlbTtcblx0fSkubGVuZ3RoO1xufTtcblxuXG5cblxudmFyIGRvY0VsZW0gPSB3aW5kb3cuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG4vKipcbiAqIEdldHMgYSB3aW5kb3cgZnJvbSBhbiBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIGdldFdpbmRvdyggZWxlbSApIHtcblx0cmV0dXJuIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApID8gZWxlbSA6IGVsZW0ubm9kZVR5cGUgPT09IDkgJiYgZWxlbS5kZWZhdWx0Vmlldztcbn1cblxualF1ZXJ5Lm9mZnNldCA9IHtcblx0c2V0T2Zmc2V0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgaSApIHtcblx0XHR2YXIgY3VyUG9zaXRpb24sIGN1ckxlZnQsIGN1ckNTU1RvcCwgY3VyVG9wLCBjdXJPZmZzZXQsIGN1ckNTU0xlZnQsIGNhbGN1bGF0ZVBvc2l0aW9uLFxuXHRcdFx0cG9zaXRpb24gPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKSxcblx0XHRcdGN1ckVsZW0gPSBqUXVlcnkoIGVsZW0gKSxcblx0XHRcdHByb3BzID0ge307XG5cblx0XHQvLyBTZXQgcG9zaXRpb24gZmlyc3QsIGluLWNhc2UgdG9wL2xlZnQgYXJlIHNldCBldmVuIG9uIHN0YXRpYyBlbGVtXG5cdFx0aWYgKCBwb3NpdGlvbiA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdGVsZW0uc3R5bGUucG9zaXRpb24gPSBcInJlbGF0aXZlXCI7XG5cdFx0fVxuXG5cdFx0Y3VyT2Zmc2V0ID0gY3VyRWxlbS5vZmZzZXQoKTtcblx0XHRjdXJDU1NUb3AgPSBqUXVlcnkuY3NzKCBlbGVtLCBcInRvcFwiICk7XG5cdFx0Y3VyQ1NTTGVmdCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwibGVmdFwiICk7XG5cdFx0Y2FsY3VsYXRlUG9zaXRpb24gPSAoIHBvc2l0aW9uID09PSBcImFic29sdXRlXCIgfHwgcG9zaXRpb24gPT09IFwiZml4ZWRcIiApICYmXG5cdFx0XHQoIGN1ckNTU1RvcCArIGN1ckNTU0xlZnQgKS5pbmRleE9mKFwiYXV0b1wiKSA+IC0xO1xuXG5cdFx0Ly8gTmVlZCB0byBiZSBhYmxlIHRvIGNhbGN1bGF0ZSBwb3NpdGlvbiBpZiBlaXRoZXJcblx0XHQvLyB0b3Agb3IgbGVmdCBpcyBhdXRvIGFuZCBwb3NpdGlvbiBpcyBlaXRoZXIgYWJzb2x1dGUgb3IgZml4ZWRcblx0XHRpZiAoIGNhbGN1bGF0ZVBvc2l0aW9uICkge1xuXHRcdFx0Y3VyUG9zaXRpb24gPSBjdXJFbGVtLnBvc2l0aW9uKCk7XG5cdFx0XHRjdXJUb3AgPSBjdXJQb3NpdGlvbi50b3A7XG5cdFx0XHRjdXJMZWZ0ID0gY3VyUG9zaXRpb24ubGVmdDtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjdXJUb3AgPSBwYXJzZUZsb2F0KCBjdXJDU1NUb3AgKSB8fCAwO1xuXHRcdFx0Y3VyTGVmdCA9IHBhcnNlRmxvYXQoIGN1ckNTU0xlZnQgKSB8fCAwO1xuXHRcdH1cblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIG9wdGlvbnMgKSApIHtcblx0XHRcdG9wdGlvbnMgPSBvcHRpb25zLmNhbGwoIGVsZW0sIGksIGN1ck9mZnNldCApO1xuXHRcdH1cblxuXHRcdGlmICggb3B0aW9ucy50b3AgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLnRvcCA9ICggb3B0aW9ucy50b3AgLSBjdXJPZmZzZXQudG9wICkgKyBjdXJUb3A7XG5cdFx0fVxuXHRcdGlmICggb3B0aW9ucy5sZWZ0ICE9IG51bGwgKSB7XG5cdFx0XHRwcm9wcy5sZWZ0ID0gKCBvcHRpb25zLmxlZnQgLSBjdXJPZmZzZXQubGVmdCApICsgY3VyTGVmdDtcblx0XHR9XG5cblx0XHRpZiAoIFwidXNpbmdcIiBpbiBvcHRpb25zICkge1xuXHRcdFx0b3B0aW9ucy51c2luZy5jYWxsKCBlbGVtLCBwcm9wcyApO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1ckVsZW0uY3NzKCBwcm9wcyApO1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdG9mZnNldDogZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIG9wdGlvbnMgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHRoaXMgOlxuXHRcdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5Lm9mZnNldC5zZXRPZmZzZXQoIHRoaXMsIG9wdGlvbnMsIGkgKTtcblx0XHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0dmFyIGRvY0VsZW0sIHdpbixcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRib3ggPSB7IHRvcDogMCwgbGVmdDogMCB9LFxuXHRcdFx0ZG9jID0gZWxlbSAmJiBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cblx0XHRpZiAoICFkb2MgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0ZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHQvLyBNYWtlIHN1cmUgaXQncyBub3QgYSBkaXNjb25uZWN0ZWQgRE9NIG5vZGVcblx0XHRpZiAoICFqUXVlcnkuY29udGFpbnMoIGRvY0VsZW0sIGVsZW0gKSApIHtcblx0XHRcdHJldHVybiBib3g7XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogQmxhY2tCZXJyeSA1LCBpT1MgMyAob3JpZ2luYWwgaVBob25lKVxuXHRcdC8vIElmIHdlIGRvbid0IGhhdmUgZ0JDUiwganVzdCB1c2UgMCwwIHJhdGhlciB0aGFuIGVycm9yXG5cdFx0aWYgKCB0eXBlb2YgZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgIT09IHN0cnVuZGVmaW5lZCApIHtcblx0XHRcdGJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdFx0fVxuXHRcdHdpbiA9IGdldFdpbmRvdyggZG9jICk7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogYm94LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsZW0uY2xpZW50VG9wLFxuXHRcdFx0bGVmdDogYm94LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQgLSBkb2NFbGVtLmNsaWVudExlZnRcblx0XHR9O1xuXHR9LFxuXG5cdHBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoICF0aGlzWyAwIF0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIG9mZnNldFBhcmVudCwgb2Zmc2V0LFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdHBhcmVudE9mZnNldCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cblx0XHQvLyBGaXhlZCBlbGVtZW50cyBhcmUgb2Zmc2V0IGZyb20gd2luZG93IChwYXJlbnRPZmZzZXQgPSB7dG9wOjAsIGxlZnQ6IDB9LCBiZWNhdXNlIGl0IGlzIGl0cyBvbmx5IG9mZnNldCBwYXJlbnRcblx0XHRpZiAoIGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApID09PSBcImZpeGVkXCIgKSB7XG5cdFx0XHQvLyBBc3N1bWUgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IGlzIHRoZXJlIHdoZW4gY29tcHV0ZWQgcG9zaXRpb24gaXMgZml4ZWRcblx0XHRcdG9mZnNldCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gR2V0ICpyZWFsKiBvZmZzZXRQYXJlbnRcblx0XHRcdG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50KCk7XG5cblx0XHRcdC8vIEdldCBjb3JyZWN0IG9mZnNldHNcblx0XHRcdG9mZnNldCA9IHRoaXMub2Zmc2V0KCk7XG5cdFx0XHRpZiAoICFqUXVlcnkubm9kZU5hbWUoIG9mZnNldFBhcmVudFsgMCBdLCBcImh0bWxcIiApICkge1xuXHRcdFx0XHRwYXJlbnRPZmZzZXQgPSBvZmZzZXRQYXJlbnQub2Zmc2V0KCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBvZmZzZXRQYXJlbnQgYm9yZGVyc1xuXHRcdFx0cGFyZW50T2Zmc2V0LnRvcCArPSBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnRbIDAgXSwgXCJib3JkZXJUb3BXaWR0aFwiLCB0cnVlICk7XG5cdFx0XHRwYXJlbnRPZmZzZXQubGVmdCArPSBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnRbIDAgXSwgXCJib3JkZXJMZWZ0V2lkdGhcIiwgdHJ1ZSApO1xuXHRcdH1cblxuXHRcdC8vIFN1YnRyYWN0IHBhcmVudCBvZmZzZXRzIGFuZCBlbGVtZW50IG1hcmdpbnNcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBvZmZzZXQudG9wIC0gcGFyZW50T2Zmc2V0LnRvcCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luVG9wXCIsIHRydWUgKSxcblx0XHRcdGxlZnQ6IG9mZnNldC5sZWZ0IC0gcGFyZW50T2Zmc2V0LmxlZnQgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpbkxlZnRcIiwgdHJ1ZSApXG5cdFx0fTtcblx0fSxcblxuXHRvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcChmdW5jdGlvbigpIHtcblx0XHRcdHZhciBvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudCB8fCBkb2NFbGVtO1xuXG5cdFx0XHR3aGlsZSAoIG9mZnNldFBhcmVudCAmJiAoICFqUXVlcnkubm9kZU5hbWUoIG9mZnNldFBhcmVudCwgXCJodG1sXCIgKSAmJiBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnQsIFwicG9zaXRpb25cIiApID09PSBcInN0YXRpY1wiICkgKSB7XG5cdFx0XHRcdG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZG9jRWxlbTtcblx0XHR9KTtcblx0fVxufSk7XG5cbi8vIENyZWF0ZSBzY3JvbGxMZWZ0IGFuZCBzY3JvbGxUb3AgbWV0aG9kc1xualF1ZXJ5LmVhY2goIHsgc2Nyb2xsTGVmdDogXCJwYWdlWE9mZnNldFwiLCBzY3JvbGxUb3A6IFwicGFnZVlPZmZzZXRcIiB9LCBmdW5jdGlvbiggbWV0aG9kLCBwcm9wICkge1xuXHR2YXIgdG9wID0gXCJwYWdlWU9mZnNldFwiID09PSBwcm9wO1xuXG5cdGpRdWVyeS5mblsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdmFsICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBtZXRob2QsIHZhbCApIHtcblx0XHRcdHZhciB3aW4gPSBnZXRXaW5kb3coIGVsZW0gKTtcblxuXHRcdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuIHdpbiA/IHdpblsgcHJvcCBdIDogZWxlbVsgbWV0aG9kIF07XG5cdFx0XHR9XG5cblx0XHRcdGlmICggd2luICkge1xuXHRcdFx0XHR3aW4uc2Nyb2xsVG8oXG5cdFx0XHRcdFx0IXRvcCA/IHZhbCA6IHdpbmRvdy5wYWdlWE9mZnNldCxcblx0XHRcdFx0XHR0b3AgPyB2YWwgOiB3aW5kb3cucGFnZVlPZmZzZXRcblx0XHRcdFx0KTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbVsgbWV0aG9kIF0gPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSwgbWV0aG9kLCB2YWwsIGFyZ3VtZW50cy5sZW5ndGgsIG51bGwgKTtcblx0fTtcbn0pO1xuXG4vLyBTdXBwb3J0OiBTYWZhcmk8NyssIENocm9tZTwzNytcbi8vIEFkZCB0aGUgdG9wL2xlZnQgY3NzSG9va3MgdXNpbmcgalF1ZXJ5LmZuLnBvc2l0aW9uXG4vLyBXZWJraXQgYnVnOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjkwODRcbi8vIEJsaW5rIGJ1ZzogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTIyOTI4MFxuLy8gZ2V0Q29tcHV0ZWRTdHlsZSByZXR1cm5zIHBlcmNlbnQgd2hlbiBzcGVjaWZpZWQgZm9yIHRvcC9sZWZ0L2JvdHRvbS9yaWdodDtcbi8vIHJhdGhlciB0aGFuIG1ha2UgdGhlIGNzcyBtb2R1bGUgZGVwZW5kIG9uIHRoZSBvZmZzZXQgbW9kdWxlLCBqdXN0IGNoZWNrIGZvciBpdCBoZXJlXG5qUXVlcnkuZWFjaCggWyBcInRvcFwiLCBcImxlZnRcIiBdLCBmdW5jdGlvbiggaSwgcHJvcCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcm9wIF0gPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucGl4ZWxQb3NpdGlvbixcblx0XHRmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0XHRjb21wdXRlZCA9IGN1ckNTUyggZWxlbSwgcHJvcCApO1xuXHRcdFx0XHQvLyBJZiBjdXJDU1MgcmV0dXJucyBwZXJjZW50YWdlLCBmYWxsYmFjayB0byBvZmZzZXRcblx0XHRcdFx0cmV0dXJuIHJudW1ub25weC50ZXN0KCBjb21wdXRlZCApID9cblx0XHRcdFx0XHRqUXVlcnkoIGVsZW0gKS5wb3NpdGlvbigpWyBwcm9wIF0gKyBcInB4XCIgOlxuXHRcdFx0XHRcdGNvbXB1dGVkO1xuXHRcdFx0fVxuXHRcdH1cblx0KTtcbn0pO1xuXG5cbi8vIENyZWF0ZSBpbm5lckhlaWdodCwgaW5uZXJXaWR0aCwgaGVpZ2h0LCB3aWR0aCwgb3V0ZXJIZWlnaHQgYW5kIG91dGVyV2lkdGggbWV0aG9kc1xualF1ZXJ5LmVhY2goIHsgSGVpZ2h0OiBcImhlaWdodFwiLCBXaWR0aDogXCJ3aWR0aFwiIH0sIGZ1bmN0aW9uKCBuYW1lLCB0eXBlICkge1xuXHRqUXVlcnkuZWFjaCggeyBwYWRkaW5nOiBcImlubmVyXCIgKyBuYW1lLCBjb250ZW50OiB0eXBlLCBcIlwiOiBcIm91dGVyXCIgKyBuYW1lIH0sIGZ1bmN0aW9uKCBkZWZhdWx0RXh0cmEsIGZ1bmNOYW1lICkge1xuXHRcdC8vIE1hcmdpbiBpcyBvbmx5IGZvciBvdXRlckhlaWdodCwgb3V0ZXJXaWR0aFxuXHRcdGpRdWVyeS5mblsgZnVuY05hbWUgXSA9IGZ1bmN0aW9uKCBtYXJnaW4sIHZhbHVlICkge1xuXHRcdFx0dmFyIGNoYWluYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggJiYgKCBkZWZhdWx0RXh0cmEgfHwgdHlwZW9mIG1hcmdpbiAhPT0gXCJib29sZWFuXCIgKSxcblx0XHRcdFx0ZXh0cmEgPSBkZWZhdWx0RXh0cmEgfHwgKCBtYXJnaW4gPT09IHRydWUgfHwgdmFsdWUgPT09IHRydWUgPyBcIm1hcmdpblwiIDogXCJib3JkZXJcIiApO1xuXG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgdHlwZSwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBkb2M7XG5cblx0XHRcdFx0aWYgKCBqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblx0XHRcdFx0XHQvLyBBcyBvZiA1LzgvMjAxMiB0aGlzIHdpbGwgeWllbGQgaW5jb3JyZWN0IHJlc3VsdHMgZm9yIE1vYmlsZSBTYWZhcmksIGJ1dCB0aGVyZVxuXHRcdFx0XHRcdC8vIGlzbid0IGEgd2hvbGUgbG90IHdlIGNhbiBkby4gU2VlIHB1bGwgcmVxdWVzdCBhdCB0aGlzIFVSTCBmb3IgZGlzY3Vzc2lvbjpcblx0XHRcdFx0XHQvLyBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzc2NFxuXHRcdFx0XHRcdHJldHVybiBlbGVtLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsgXCJjbGllbnRcIiArIG5hbWUgXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEdldCBkb2N1bWVudCB3aWR0aCBvciBoZWlnaHRcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdGRvYyA9IGVsZW0uZG9jdW1lbnRFbGVtZW50O1xuXG5cdFx0XHRcdFx0Ly8gRWl0aGVyIHNjcm9sbFtXaWR0aC9IZWlnaHRdIG9yIG9mZnNldFtXaWR0aC9IZWlnaHRdIG9yIGNsaWVudFtXaWR0aC9IZWlnaHRdLFxuXHRcdFx0XHRcdC8vIHdoaWNoZXZlciBpcyBncmVhdGVzdFxuXHRcdFx0XHRcdHJldHVybiBNYXRoLm1heChcblx0XHRcdFx0XHRcdGVsZW0uYm9keVsgXCJzY3JvbGxcIiArIG5hbWUgXSwgZG9jWyBcInNjcm9sbFwiICsgbmFtZSBdLFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcIm9mZnNldFwiICsgbmFtZSBdLCBkb2NbIFwib2Zmc2V0XCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRkb2NbIFwiY2xpZW50XCIgKyBuYW1lIF1cblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRcdC8vIEdldCB3aWR0aCBvciBoZWlnaHQgb24gdGhlIGVsZW1lbnQsIHJlcXVlc3RpbmcgYnV0IG5vdCBmb3JjaW5nIHBhcnNlRmxvYXRcblx0XHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCB0eXBlLCBleHRyYSApIDpcblxuXHRcdFx0XHRcdC8vIFNldCB3aWR0aCBvciBoZWlnaHQgb24gdGhlIGVsZW1lbnRcblx0XHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHR5cGUsIHZhbHVlLCBleHRyYSApO1xuXHRcdFx0fSwgdHlwZSwgY2hhaW5hYmxlID8gbWFyZ2luIDogdW5kZWZpbmVkLCBjaGFpbmFibGUsIG51bGwgKTtcblx0XHR9O1xuXHR9KTtcbn0pO1xuXG5cbi8vIFRoZSBudW1iZXIgb2YgZWxlbWVudHMgY29udGFpbmVkIGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0XG5qUXVlcnkuZm4uc2l6ZSA9IGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcy5sZW5ndGg7XG59O1xuXG5qUXVlcnkuZm4uYW5kU2VsZiA9IGpRdWVyeS5mbi5hZGRCYWNrO1xuXG5cblxuXG4vLyBSZWdpc3RlciBhcyBhIG5hbWVkIEFNRCBtb2R1bGUsIHNpbmNlIGpRdWVyeSBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGggb3RoZXJcbi8vIGZpbGVzIHRoYXQgbWF5IHVzZSBkZWZpbmUsIGJ1dCBub3QgdmlhIGEgcHJvcGVyIGNvbmNhdGVuYXRpb24gc2NyaXB0IHRoYXRcbi8vIHVuZGVyc3RhbmRzIGFub255bW91cyBBTUQgbW9kdWxlcy4gQSBuYW1lZCBBTUQgaXMgc2FmZXN0IGFuZCBtb3N0IHJvYnVzdFxuLy8gd2F5IHRvIHJlZ2lzdGVyLiBMb3dlcmNhc2UganF1ZXJ5IGlzIHVzZWQgYmVjYXVzZSBBTUQgbW9kdWxlIG5hbWVzIGFyZVxuLy8gZGVyaXZlZCBmcm9tIGZpbGUgbmFtZXMsIGFuZCBqUXVlcnkgaXMgbm9ybWFsbHkgZGVsaXZlcmVkIGluIGEgbG93ZXJjYXNlXG4vLyBmaWxlIG5hbWUuIERvIHRoaXMgYWZ0ZXIgY3JlYXRpbmcgdGhlIGdsb2JhbCBzbyB0aGF0IGlmIGFuIEFNRCBtb2R1bGUgd2FudHNcbi8vIHRvIGNhbGwgbm9Db25mbGljdCB0byBoaWRlIHRoaXMgdmVyc2lvbiBvZiBqUXVlcnksIGl0IHdpbGwgd29yay5cblxuLy8gTm90ZSB0aGF0IGZvciBtYXhpbXVtIHBvcnRhYmlsaXR5LCBsaWJyYXJpZXMgdGhhdCBhcmUgbm90IGpRdWVyeSBzaG91bGRcbi8vIGRlY2xhcmUgdGhlbXNlbHZlcyBhcyBhbm9ueW1vdXMgbW9kdWxlcywgYW5kIGF2b2lkIHNldHRpbmcgYSBnbG9iYWwgaWYgYW5cbi8vIEFNRCBsb2FkZXIgaXMgcHJlc2VudC4galF1ZXJ5IGlzIGEgc3BlY2lhbCBjYXNlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlXG4vLyBodHRwczovL2dpdGh1Yi5jb20vanJidXJrZS9yZXF1aXJlanMvd2lraS9VcGRhdGluZy1leGlzdGluZy1saWJyYXJpZXMjd2lraS1hbm9uXG5cbmlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG5cdGRlZmluZSggXCJqcXVlcnlcIiwgW10sIGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnk7XG5cdH0pO1xufVxuXG5cblxuXG52YXJcblx0Ly8gTWFwIG92ZXIgalF1ZXJ5IGluIGNhc2Ugb2Ygb3ZlcndyaXRlXG5cdF9qUXVlcnkgPSB3aW5kb3cualF1ZXJ5LFxuXG5cdC8vIE1hcCBvdmVyIHRoZSAkIGluIGNhc2Ugb2Ygb3ZlcndyaXRlXG5cdF8kID0gd2luZG93LiQ7XG5cbmpRdWVyeS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oIGRlZXAgKSB7XG5cdGlmICggd2luZG93LiQgPT09IGpRdWVyeSApIHtcblx0XHR3aW5kb3cuJCA9IF8kO1xuXHR9XG5cblx0aWYgKCBkZWVwICYmIHdpbmRvdy5qUXVlcnkgPT09IGpRdWVyeSApIHtcblx0XHR3aW5kb3cualF1ZXJ5ID0gX2pRdWVyeTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnk7XG59O1xuXG4vLyBFeHBvc2UgalF1ZXJ5IGFuZCAkIGlkZW50aWZpZXJzLCBldmVuIGluIEFNRFxuLy8gKCM3MTAyI2NvbW1lbnQ6MTAsIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNTU3KVxuLy8gYW5kIENvbW1vbkpTIGZvciBicm93c2VyIGVtdWxhdG9ycyAoIzEzNTY2KVxuaWYgKCB0eXBlb2Ygbm9HbG9iYWwgPT09IHN0cnVuZGVmaW5lZCApIHtcblx0d2luZG93LmpRdWVyeSA9IHdpbmRvdy4kID0galF1ZXJ5O1xufVxuXG5cblxuXG5yZXR1cm4galF1ZXJ5O1xuXG59KSk7XG4iLCIvKiFcbiAgICBsb2NhbEZvcmFnZSAtLSBPZmZsaW5lIFN0b3JhZ2UsIEltcHJvdmVkXG4gICAgVmVyc2lvbiAxLjUuMFxuICAgIGh0dHBzOi8vbG9jYWxmb3JhZ2UuZ2l0aHViLmlvL2xvY2FsRm9yYWdlXG4gICAgKGMpIDIwMTMtMjAxNyBNb3ppbGxhLCBBcGFjaGUgTGljZW5zZSAyLjBcbiovXG4oZnVuY3Rpb24oZil7aWYodHlwZW9mIGV4cG9ydHM9PT1cIm9iamVjdFwiJiZ0eXBlb2YgbW9kdWxlIT09XCJ1bmRlZmluZWRcIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PVwiZnVuY3Rpb25cIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKFtdLGYpfWVsc2V7dmFyIGc7aWYodHlwZW9mIHdpbmRvdyE9PVwidW5kZWZpbmVkXCIpe2c9d2luZG93fWVsc2UgaWYodHlwZW9mIGdsb2JhbCE9PVwidW5kZWZpbmVkXCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT1cInVuZGVmaW5lZFwiKXtnPXNlbGZ9ZWxzZXtnPXRoaXN9Zy5sb2NhbGZvcmFnZSA9IGYoKX19KShmdW5jdGlvbigpe3ZhciBkZWZpbmUsbW9kdWxlLGV4cG9ydHM7cmV0dXJuIChmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyAoZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLCBmKX12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihfZGVyZXFfLG1vZHVsZSxleHBvcnRzKXtcbihmdW5jdGlvbiAoZ2xvYmFsKXtcbid1c2Ugc3RyaWN0JztcbnZhciBNdXRhdGlvbiA9IGdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xuXG52YXIgc2NoZWR1bGVEcmFpbjtcblxue1xuICBpZiAoTXV0YXRpb24pIHtcbiAgICB2YXIgY2FsbGVkID0gMDtcbiAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb24obmV4dFRpY2spO1xuICAgIHZhciBlbGVtZW50ID0gZ2xvYmFsLmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcbiAgICBvYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQsIHtcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcbiAgICB9KTtcbiAgICBzY2hlZHVsZURyYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgZWxlbWVudC5kYXRhID0gKGNhbGxlZCA9ICsrY2FsbGVkICUgMik7XG4gICAgfTtcbiAgfSBlbHNlIGlmICghZ2xvYmFsLnNldEltbWVkaWF0ZSAmJiB0eXBlb2YgZ2xvYmFsLk1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBjaGFubmVsID0gbmV3IGdsb2JhbC5NZXNzYWdlQ2hhbm5lbCgpO1xuICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbmV4dFRpY2s7XG4gICAgc2NoZWR1bGVEcmFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gICAgfTtcbiAgfSBlbHNlIGlmICgnZG9jdW1lbnQnIGluIGdsb2JhbCAmJiAnb25yZWFkeXN0YXRlY2hhbmdlJyBpbiBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0JykpIHtcbiAgICBzY2hlZHVsZURyYWluID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAvLyBDcmVhdGUgYSA8c2NyaXB0PiBlbGVtZW50OyBpdHMgcmVhZHlzdGF0ZWNoYW5nZSBldmVudCB3aWxsIGJlIGZpcmVkIGFzeW5jaHJvbm91c2x5IG9uY2UgaXQgaXMgaW5zZXJ0ZWRcbiAgICAgIC8vIGludG8gdGhlIGRvY3VtZW50LiBEbyBzbywgdGh1cyBxdWV1aW5nIHVwIHRoZSB0YXNrLiBSZW1lbWJlciB0byBjbGVhbiB1cCBvbmNlIGl0J3MgYmVlbiBjYWxsZWQuXG4gICAgICB2YXIgc2NyaXB0RWwgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XG4gICAgICBzY3JpcHRFbC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG5leHRUaWNrKCk7XG5cbiAgICAgICAgc2NyaXB0RWwub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcbiAgICAgICAgc2NyaXB0RWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHRFbCk7XG4gICAgICAgIHNjcmlwdEVsID0gbnVsbDtcbiAgICAgIH07XG4gICAgICBnbG9iYWwuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHNjcmlwdEVsKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHNjaGVkdWxlRHJhaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBzZXRUaW1lb3V0KG5leHRUaWNrLCAwKTtcbiAgICB9O1xuICB9XG59XG5cbnZhciBkcmFpbmluZztcbnZhciBxdWV1ZSA9IFtdO1xuLy9uYW1lZCBuZXh0VGljayBmb3IgbGVzcyBjb25mdXNpbmcgc3RhY2sgdHJhY2VzXG5mdW5jdGlvbiBuZXh0VGljaygpIHtcbiAgZHJhaW5pbmcgPSB0cnVlO1xuICB2YXIgaSwgb2xkUXVldWU7XG4gIHZhciBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gIHdoaWxlIChsZW4pIHtcbiAgICBvbGRRdWV1ZSA9IHF1ZXVlO1xuICAgIHF1ZXVlID0gW107XG4gICAgaSA9IC0xO1xuICAgIHdoaWxlICgrK2kgPCBsZW4pIHtcbiAgICAgIG9sZFF1ZXVlW2ldKCk7XG4gICAgfVxuICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgfVxuICBkcmFpbmluZyA9IGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGltbWVkaWF0ZTtcbmZ1bmN0aW9uIGltbWVkaWF0ZSh0YXNrKSB7XG4gIGlmIChxdWV1ZS5wdXNoKHRhc2spID09PSAxICYmICFkcmFpbmluZykge1xuICAgIHNjaGVkdWxlRHJhaW4oKTtcbiAgfVxufVxuXG59KS5jYWxsKHRoaXMsdHlwZW9mIGdsb2JhbCAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSBcInVuZGVmaW5lZFwiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB7fSlcbn0se31dLDI6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xudmFyIGltbWVkaWF0ZSA9IF9kZXJlcV8oMSk7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5mdW5jdGlvbiBJTlRFUk5BTCgpIHt9XG5cbnZhciBoYW5kbGVycyA9IHt9O1xuXG52YXIgUkVKRUNURUQgPSBbJ1JFSkVDVEVEJ107XG52YXIgRlVMRklMTEVEID0gWydGVUxGSUxMRUQnXTtcbnZhciBQRU5ESU5HID0gWydQRU5ESU5HJ107XG5cbm1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IFByb21pc2U7XG5cbmZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgaWYgKHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ3Jlc29sdmVyIG11c3QgYmUgYSBmdW5jdGlvbicpO1xuICB9XG4gIHRoaXMuc3RhdGUgPSBQRU5ESU5HO1xuICB0aGlzLnF1ZXVlID0gW107XG4gIHRoaXMub3V0Y29tZSA9IHZvaWQgMDtcbiAgaWYgKHJlc29sdmVyICE9PSBJTlRFUk5BTCkge1xuICAgIHNhZmVseVJlc29sdmVUaGVuYWJsZSh0aGlzLCByZXNvbHZlcik7XG4gIH1cbn1cblxuUHJvbWlzZS5wcm90b3R5cGVbXCJjYXRjaFwiXSA9IGZ1bmN0aW9uIChvblJlamVjdGVkKSB7XG4gIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3RlZCk7XG59O1xuUHJvbWlzZS5wcm90b3R5cGUudGhlbiA9IGZ1bmN0aW9uIChvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICBpZiAodHlwZW9mIG9uRnVsZmlsbGVkICE9PSAnZnVuY3Rpb24nICYmIHRoaXMuc3RhdGUgPT09IEZVTEZJTExFRCB8fFxuICAgIHR5cGVvZiBvblJlamVjdGVkICE9PSAnZnVuY3Rpb24nICYmIHRoaXMuc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgdmFyIHByb21pc2UgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihJTlRFUk5BTCk7XG4gIGlmICh0aGlzLnN0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgdmFyIHJlc29sdmVyID0gdGhpcy5zdGF0ZSA9PT0gRlVMRklMTEVEID8gb25GdWxmaWxsZWQgOiBvblJlamVjdGVkO1xuICAgIHVud3JhcChwcm9taXNlLCByZXNvbHZlciwgdGhpcy5vdXRjb21lKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLnF1ZXVlLnB1c2gobmV3IFF1ZXVlSXRlbShwcm9taXNlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkpO1xuICB9XG5cbiAgcmV0dXJuIHByb21pc2U7XG59O1xuZnVuY3Rpb24gUXVldWVJdGVtKHByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIHRoaXMucHJvbWlzZSA9IHByb21pc2U7XG4gIGlmICh0eXBlb2Ygb25GdWxmaWxsZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLm9uRnVsZmlsbGVkID0gb25GdWxmaWxsZWQ7XG4gICAgdGhpcy5jYWxsRnVsZmlsbGVkID0gdGhpcy5vdGhlckNhbGxGdWxmaWxsZWQ7XG4gIH1cbiAgaWYgKHR5cGVvZiBvblJlamVjdGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhpcy5vblJlamVjdGVkID0gb25SZWplY3RlZDtcbiAgICB0aGlzLmNhbGxSZWplY3RlZCA9IHRoaXMub3RoZXJDYWxsUmVqZWN0ZWQ7XG4gIH1cbn1cblF1ZXVlSXRlbS5wcm90b3R5cGUuY2FsbEZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBoYW5kbGVycy5yZXNvbHZlKHRoaXMucHJvbWlzZSwgdmFsdWUpO1xufTtcblF1ZXVlSXRlbS5wcm90b3R5cGUub3RoZXJDYWxsRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHVud3JhcCh0aGlzLnByb21pc2UsIHRoaXMub25GdWxmaWxsZWQsIHZhbHVlKTtcbn07XG5RdWV1ZUl0ZW0ucHJvdG90eXBlLmNhbGxSZWplY3RlZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICBoYW5kbGVycy5yZWplY3QodGhpcy5wcm9taXNlLCB2YWx1ZSk7XG59O1xuUXVldWVJdGVtLnByb3RvdHlwZS5vdGhlckNhbGxSZWplY3RlZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICB1bndyYXAodGhpcy5wcm9taXNlLCB0aGlzLm9uUmVqZWN0ZWQsIHZhbHVlKTtcbn07XG5cbmZ1bmN0aW9uIHVud3JhcChwcm9taXNlLCBmdW5jLCB2YWx1ZSkge1xuICBpbW1lZGlhdGUoZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXR1cm5WYWx1ZTtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuVmFsdWUgPSBmdW5jKHZhbHVlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIGUpO1xuICAgIH1cbiAgICBpZiAocmV0dXJuVmFsdWUgPT09IHByb21pc2UpIHtcbiAgICAgIGhhbmRsZXJzLnJlamVjdChwcm9taXNlLCBuZXcgVHlwZUVycm9yKCdDYW5ub3QgcmVzb2x2ZSBwcm9taXNlIHdpdGggaXRzZWxmJykpO1xuICAgIH0gZWxzZSB7XG4gICAgICBoYW5kbGVycy5yZXNvbHZlKHByb21pc2UsIHJldHVyblZhbHVlKTtcbiAgICB9XG4gIH0pO1xufVxuXG5oYW5kbGVycy5yZXNvbHZlID0gZnVuY3Rpb24gKHNlbGYsIHZhbHVlKSB7XG4gIHZhciByZXN1bHQgPSB0cnlDYXRjaChnZXRUaGVuLCB2YWx1ZSk7XG4gIGlmIChyZXN1bHQuc3RhdHVzID09PSAnZXJyb3InKSB7XG4gICAgcmV0dXJuIGhhbmRsZXJzLnJlamVjdChzZWxmLCByZXN1bHQudmFsdWUpO1xuICB9XG4gIHZhciB0aGVuYWJsZSA9IHJlc3VsdC52YWx1ZTtcblxuICBpZiAodGhlbmFibGUpIHtcbiAgICBzYWZlbHlSZXNvbHZlVGhlbmFibGUoc2VsZiwgdGhlbmFibGUpO1xuICB9IGVsc2Uge1xuICAgIHNlbGYuc3RhdGUgPSBGVUxGSUxMRUQ7XG4gICAgc2VsZi5vdXRjb21lID0gdmFsdWU7XG4gICAgdmFyIGkgPSAtMTtcbiAgICB2YXIgbGVuID0gc2VsZi5xdWV1ZS5sZW5ndGg7XG4gICAgd2hpbGUgKCsraSA8IGxlbikge1xuICAgICAgc2VsZi5xdWV1ZVtpXS5jYWxsRnVsZmlsbGVkKHZhbHVlKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNlbGY7XG59O1xuaGFuZGxlcnMucmVqZWN0ID0gZnVuY3Rpb24gKHNlbGYsIGVycm9yKSB7XG4gIHNlbGYuc3RhdGUgPSBSRUpFQ1RFRDtcbiAgc2VsZi5vdXRjb21lID0gZXJyb3I7XG4gIHZhciBpID0gLTE7XG4gIHZhciBsZW4gPSBzZWxmLnF1ZXVlLmxlbmd0aDtcbiAgd2hpbGUgKCsraSA8IGxlbikge1xuICAgIHNlbGYucXVldWVbaV0uY2FsbFJlamVjdGVkKGVycm9yKTtcbiAgfVxuICByZXR1cm4gc2VsZjtcbn07XG5cbmZ1bmN0aW9uIGdldFRoZW4ob2JqKSB7XG4gIC8vIE1ha2Ugc3VyZSB3ZSBvbmx5IGFjY2VzcyB0aGUgYWNjZXNzb3Igb25jZSBhcyByZXF1aXJlZCBieSB0aGUgc3BlY1xuICB2YXIgdGhlbiA9IG9iaiAmJiBvYmoudGhlbjtcbiAgaWYgKG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBmdW5jdGlvbiBhcHB5VGhlbigpIHtcbiAgICAgIHRoZW4uYXBwbHkob2JqLCBhcmd1bWVudHMpO1xuICAgIH07XG4gIH1cbn1cblxuZnVuY3Rpb24gc2FmZWx5UmVzb2x2ZVRoZW5hYmxlKHNlbGYsIHRoZW5hYmxlKSB7XG4gIC8vIEVpdGhlciBmdWxmaWxsLCByZWplY3Qgb3IgcmVqZWN0IHdpdGggZXJyb3JcbiAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICBmdW5jdGlvbiBvbkVycm9yKHZhbHVlKSB7XG4gICAgaWYgKGNhbGxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYWxsZWQgPSB0cnVlO1xuICAgIGhhbmRsZXJzLnJlamVjdChzZWxmLCB2YWx1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiBvblN1Y2Nlc3ModmFsdWUpIHtcbiAgICBpZiAoY2FsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGxlZCA9IHRydWU7XG4gICAgaGFuZGxlcnMucmVzb2x2ZShzZWxmLCB2YWx1ZSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cnlUb1Vud3JhcCgpIHtcbiAgICB0aGVuYWJsZShvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICB9XG5cbiAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKHRyeVRvVW53cmFwKTtcbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdlcnJvcicpIHtcbiAgICBvbkVycm9yKHJlc3VsdC52YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5Q2F0Y2goZnVuYywgdmFsdWUpIHtcbiAgdmFyIG91dCA9IHt9O1xuICB0cnkge1xuICAgIG91dC52YWx1ZSA9IGZ1bmModmFsdWUpO1xuICAgIG91dC5zdGF0dXMgPSAnc3VjY2Vzcyc7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBvdXQuc3RhdHVzID0gJ2Vycm9yJztcbiAgICBvdXQudmFsdWUgPSBlO1xuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydHMucmVzb2x2ZSA9IHJlc29sdmU7XG5mdW5jdGlvbiByZXNvbHZlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIHRoaXMpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIGhhbmRsZXJzLnJlc29sdmUobmV3IHRoaXMoSU5URVJOQUwpLCB2YWx1ZSk7XG59XG5cbmV4cG9ydHMucmVqZWN0ID0gcmVqZWN0O1xuZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICB2YXIgcHJvbWlzZSA9IG5ldyB0aGlzKElOVEVSTkFMKTtcbiAgcmV0dXJuIGhhbmRsZXJzLnJlamVjdChwcm9taXNlLCByZWFzb24pO1xufVxuXG5leHBvcnRzLmFsbCA9IGFsbDtcbmZ1bmN0aW9uIGFsbChpdGVyYWJsZSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcmFibGUpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ211c3QgYmUgYW4gYXJyYXknKSk7XG4gIH1cblxuICB2YXIgbGVuID0gaXRlcmFibGUubGVuZ3RoO1xuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIGlmICghbGVuKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZShbXSk7XG4gIH1cblxuICB2YXIgdmFsdWVzID0gbmV3IEFycmF5KGxlbik7XG4gIHZhciByZXNvbHZlZCA9IDA7XG4gIHZhciBpID0gLTE7XG4gIHZhciBwcm9taXNlID0gbmV3IHRoaXMoSU5URVJOQUwpO1xuXG4gIHdoaWxlICgrK2kgPCBsZW4pIHtcbiAgICBhbGxSZXNvbHZlcihpdGVyYWJsZVtpXSwgaSk7XG4gIH1cbiAgcmV0dXJuIHByb21pc2U7XG4gIGZ1bmN0aW9uIGFsbFJlc29sdmVyKHZhbHVlLCBpKSB7XG4gICAgc2VsZi5yZXNvbHZlKHZhbHVlKS50aGVuKHJlc29sdmVGcm9tQWxsLCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgIGhhbmRsZXJzLnJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gcmVzb2x2ZUZyb21BbGwob3V0VmFsdWUpIHtcbiAgICAgIHZhbHVlc1tpXSA9IG91dFZhbHVlO1xuICAgICAgaWYgKCsrcmVzb2x2ZWQgPT09IGxlbiAmJiAhY2FsbGVkKSB7XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgIGhhbmRsZXJzLnJlc29sdmUocHJvbWlzZSwgdmFsdWVzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0cy5yYWNlID0gcmFjZTtcbmZ1bmN0aW9uIHJhY2UoaXRlcmFibGUpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGl0ZXJhYmxlKSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgIHJldHVybiB0aGlzLnJlamVjdChuZXcgVHlwZUVycm9yKCdtdXN0IGJlIGFuIGFycmF5JykpO1xuICB9XG5cbiAgdmFyIGxlbiA9IGl0ZXJhYmxlLmxlbmd0aDtcbiAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICBpZiAoIWxlbikge1xuICAgIHJldHVybiB0aGlzLnJlc29sdmUoW10pO1xuICB9XG5cbiAgdmFyIGkgPSAtMTtcbiAgdmFyIHByb21pc2UgPSBuZXcgdGhpcyhJTlRFUk5BTCk7XG5cbiAgd2hpbGUgKCsraSA8IGxlbikge1xuICAgIHJlc29sdmVyKGl0ZXJhYmxlW2ldKTtcbiAgfVxuICByZXR1cm4gcHJvbWlzZTtcbiAgZnVuY3Rpb24gcmVzb2x2ZXIodmFsdWUpIHtcbiAgICBzZWxmLnJlc29sdmUodmFsdWUpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICBpZiAoIWNhbGxlZCkge1xuICAgICAgICBjYWxsZWQgPSB0cnVlO1xuICAgICAgICBoYW5kbGVycy5yZXNvbHZlKHByb21pc2UsIHJlc3BvbnNlKTtcbiAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgIGhhbmRsZXJzLnJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxufSx7XCIxXCI6MX1dLDM6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xuaWYgKHR5cGVvZiBnbG9iYWwuUHJvbWlzZSAhPT0gJ2Z1bmN0aW9uJykge1xuICBnbG9iYWwuUHJvbWlzZSA9IF9kZXJlcV8oMik7XG59XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxufSx7XCIyXCI6Mn1dLDQ6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIGdldElEQigpIHtcbiAgICAvKiBnbG9iYWwgaW5kZXhlZERCLHdlYmtpdEluZGV4ZWREQixtb3pJbmRleGVkREIsT0luZGV4ZWREQixtc0luZGV4ZWREQiAqL1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgaW5kZXhlZERCICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4ZWREQjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYmtpdEluZGV4ZWREQiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiB3ZWJraXRJbmRleGVkREI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBtb3pJbmRleGVkREIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbW96SW5kZXhlZERCO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgT0luZGV4ZWREQiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBPSW5kZXhlZERCO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgbXNJbmRleGVkREIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gbXNJbmRleGVkREI7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7fVxufVxuXG52YXIgaWRiID0gZ2V0SURCKCk7XG5cbmZ1bmN0aW9uIGlzSW5kZXhlZERCVmFsaWQoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBJbmRleGVkREI7IGZhbGwgYmFjayB0byB2ZW5kb3ItcHJlZml4ZWQgdmVyc2lvbnNcbiAgICAgICAgLy8gaWYgbmVlZGVkLlxuICAgICAgICBpZiAoIWlkYikge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG1pbWljIFBvdWNoREIgaGVyZTtcbiAgICAgICAgLy9cbiAgICAgICAgLy8gV2UgdGVzdCBmb3Igb3BlbkRhdGFiYXNlIGJlY2F1c2UgSUUgTW9iaWxlIGlkZW50aWZpZXMgaXRzZWxmXG4gICAgICAgIC8vIGFzIFNhZmFyaS4gT2ggdGhlIGx1bHouLi5cbiAgICAgICAgdmFyIGlzU2FmYXJpID0gdHlwZW9mIG9wZW5EYXRhYmFzZSAhPT0gJ3VuZGVmaW5lZCcgJiYgLyhTYWZhcml8aVBob25lfGlQYWR8aVBvZCkvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIS9DaHJvbWUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIS9CbGFja0JlcnJ5Ly50ZXN0KG5hdmlnYXRvci5wbGF0Zm9ybSk7XG5cbiAgICAgICAgdmFyIGhhc0ZldGNoID0gdHlwZW9mIGZldGNoID09PSAnZnVuY3Rpb24nICYmIGZldGNoLnRvU3RyaW5nKCkuaW5kZXhPZignW25hdGl2ZSBjb2RlJykgIT09IC0xO1xuXG4gICAgICAgIC8vIFNhZmFyaSA8MTAuMSBkb2VzIG5vdCBtZWV0IG91ciByZXF1aXJlbWVudHMgZm9yIElEQiBzdXBwb3J0ICgjNTU3MilcbiAgICAgICAgLy8gc2luY2UgU2FmYXJpIDEwLjEgc2hpcHBlZCB3aXRoIGZldGNoLCB3ZSBjYW4gdXNlIHRoYXQgdG8gZGV0ZWN0IGl0XG4gICAgICAgIHJldHVybiAoIWlzU2FmYXJpIHx8IGhhc0ZldGNoKSAmJiB0eXBlb2YgaW5kZXhlZERCICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvLyBzb21lIG91dGRhdGVkIGltcGxlbWVudGF0aW9ucyBvZiBJREIgdGhhdCBhcHBlYXIgb24gU2Ftc3VuZ1xuICAgICAgICAvLyBhbmQgSFRDIEFuZHJvaWQgZGV2aWNlcyA8NC40IGFyZSBtaXNzaW5nIElEQktleVJhbmdlXG4gICAgICAgIHR5cGVvZiBJREJLZXlSYW5nZSAhPT0gJ3VuZGVmaW5lZCc7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc1dlYlNRTFZhbGlkKCkge1xuICAgIHJldHVybiB0eXBlb2Ygb3BlbkRhdGFiYXNlID09PSAnZnVuY3Rpb24nO1xufVxuXG5mdW5jdGlvbiBpc0xvY2FsU3RvcmFnZVZhbGlkKCkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgbG9jYWxTdG9yYWdlICE9PSAndW5kZWZpbmVkJyAmJiAnc2V0SXRlbScgaW4gbG9jYWxTdG9yYWdlICYmIGxvY2FsU3RvcmFnZS5zZXRJdGVtO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuLy8gQWJzdHJhY3RzIGNvbnN0cnVjdGluZyBhIEJsb2Igb2JqZWN0LCBzbyBpdCBhbHNvIHdvcmtzIGluIG9sZGVyXG4vLyBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgdGhlIG5hdGl2ZSBCbG9iIGNvbnN0cnVjdG9yLiAoaS5lLlxuLy8gb2xkIFF0V2ViS2l0IHZlcnNpb25zLCBhdCBsZWFzdCkuXG4vLyBBYnN0cmFjdHMgY29uc3RydWN0aW5nIGEgQmxvYiBvYmplY3QsIHNvIGl0IGFsc28gd29ya3MgaW4gb2xkZXJcbi8vIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCB0aGUgbmF0aXZlIEJsb2IgY29uc3RydWN0b3IuIChpLmUuXG4vLyBvbGQgUXRXZWJLaXQgdmVyc2lvbnMsIGF0IGxlYXN0KS5cbmZ1bmN0aW9uIGNyZWF0ZUJsb2IocGFydHMsIHByb3BlcnRpZXMpIHtcbiAgICAvKiBnbG9iYWwgQmxvYkJ1aWxkZXIsTVNCbG9iQnVpbGRlcixNb3pCbG9iQnVpbGRlcixXZWJLaXRCbG9iQnVpbGRlciAqL1xuICAgIHBhcnRzID0gcGFydHMgfHwgW107XG4gICAgcHJvcGVydGllcyA9IHByb3BlcnRpZXMgfHwge307XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIG5ldyBCbG9iKHBhcnRzLCBwcm9wZXJ0aWVzKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGlmIChlLm5hbWUgIT09ICdUeXBlRXJyb3InKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBCdWlsZGVyID0gdHlwZW9mIEJsb2JCdWlsZGVyICE9PSAndW5kZWZpbmVkJyA/IEJsb2JCdWlsZGVyIDogdHlwZW9mIE1TQmxvYkJ1aWxkZXIgIT09ICd1bmRlZmluZWQnID8gTVNCbG9iQnVpbGRlciA6IHR5cGVvZiBNb3pCbG9iQnVpbGRlciAhPT0gJ3VuZGVmaW5lZCcgPyBNb3pCbG9iQnVpbGRlciA6IFdlYktpdEJsb2JCdWlsZGVyO1xuICAgICAgICB2YXIgYnVpbGRlciA9IG5ldyBCdWlsZGVyKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgICAgICAgIGJ1aWxkZXIuYXBwZW5kKHBhcnRzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYnVpbGRlci5nZXRCbG9iKHByb3BlcnRpZXMudHlwZSk7XG4gICAgfVxufVxuXG4vLyBUaGlzIGlzIENvbW1vbkpTIGJlY2F1c2UgbGllIGlzIGFuIGV4dGVybmFsIGRlcGVuZGVuY3ksIHNvIFJvbGx1cFxuLy8gY2FuIGp1c3QgaWdub3JlIGl0LlxuaWYgKHR5cGVvZiBQcm9taXNlID09PSAndW5kZWZpbmVkJykge1xuICAgIC8vIEluIHRoZSBcIm5vcHJvbWlzZXNcIiBidWlsZCB0aGlzIHdpbGwganVzdCB0aHJvdyBpZiB5b3UgZG9uJ3QgaGF2ZVxuICAgIC8vIGEgZ2xvYmFsIHByb21pc2Ugb2JqZWN0LCBidXQgaXQgd291bGQgdGhyb3cgYW55d2F5IGxhdGVyLlxuICAgIF9kZXJlcV8oMyk7XG59XG52YXIgUHJvbWlzZSQxID0gUHJvbWlzZTtcblxuZnVuY3Rpb24gZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKSB7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN1bHQpO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBleGVjdXRlVHdvQ2FsbGJhY2tzKHByb21pc2UsIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9taXNlLnRoZW4oY2FsbGJhY2spO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZXJyb3JDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9taXNlW1wiY2F0Y2hcIl0oZXJyb3JDYWxsYmFjayk7XG4gICAgfVxufVxuXG4vLyBTb21lIGNvZGUgb3JpZ2luYWxseSBmcm9tIGFzeW5jX3N0b3JhZ2UuanMgaW5cbi8vIFtHYWlhXShodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS1iMmcvZ2FpYSkuXG5cbnZhciBERVRFQ1RfQkxPQl9TVVBQT1JUX1NUT1JFID0gJ2xvY2FsLWZvcmFnZS1kZXRlY3QtYmxvYi1zdXBwb3J0JztcbnZhciBzdXBwb3J0c0Jsb2JzO1xudmFyIGRiQ29udGV4dHM7XG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vLyBUcmFuc2Zvcm0gYSBiaW5hcnkgc3RyaW5nIHRvIGFuIGFycmF5IGJ1ZmZlciwgYmVjYXVzZSBvdGhlcndpc2Vcbi8vIHdlaXJkIHN0dWZmIGhhcHBlbnMgd2hlbiB5b3UgdHJ5IHRvIHdvcmsgd2l0aCB0aGUgYmluYXJ5IHN0cmluZyBkaXJlY3RseS5cbi8vIEl0IGlzIGtub3duLlxuLy8gRnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE0OTY3NjQ3LyAoY29udGludWVzIG9uIG5leHQgbGluZSlcbi8vIGVuY29kZS1kZWNvZGUtaW1hZ2Utd2l0aC1iYXNlNjQtYnJlYWtzLWltYWdlICgyMDEzLTA0LTIxKVxuZnVuY3Rpb24gX2JpblN0cmluZ1RvQXJyYXlCdWZmZXIoYmluKSB7XG4gICAgdmFyIGxlbmd0aCA9IGJpbi5sZW5ndGg7XG4gICAgdmFyIGJ1ZiA9IG5ldyBBcnJheUJ1ZmZlcihsZW5ndGgpO1xuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheShidWYpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXJyW2ldID0gYmluLmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICAgIHJldHVybiBidWY7XG59XG5cbi8vXG4vLyBCbG9icyBhcmUgbm90IHN1cHBvcnRlZCBpbiBhbGwgdmVyc2lvbnMgb2YgSW5kZXhlZERCLCBub3RhYmx5XG4vLyBDaHJvbWUgPDM3IGFuZCBBbmRyb2lkIDw1LiBJbiB0aG9zZSB2ZXJzaW9ucywgc3RvcmluZyBhIGJsb2Igd2lsbCB0aHJvdy5cbi8vXG4vLyBWYXJpb3VzIG90aGVyIGJsb2IgYnVncyBleGlzdCBpbiBDaHJvbWUgdjM3LTQyIChpbmNsdXNpdmUpLlxuLy8gRGV0ZWN0aW5nIHRoZW0gaXMgZXhwZW5zaXZlIGFuZCBjb25mdXNpbmcgdG8gdXNlcnMsIGFuZCBDaHJvbWUgMzctNDJcbi8vIGlzIGF0IHZlcnkgbG93IHVzYWdlIHdvcmxkd2lkZSwgc28gd2UgZG8gYSBoYWNreSB1c2VyQWdlbnQgY2hlY2sgaW5zdGVhZC5cbi8vXG4vLyBjb250ZW50LXR5cGUgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDA4MTIwXG4vLyA0MDQgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDQ3OTE2XG4vLyBGaWxlUmVhZGVyIGJ1ZzogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ0NzgzNlxuLy9cbi8vIENvZGUgYm9ycm93ZWQgZnJvbSBQb3VjaERCLiBTZWU6XG4vLyBodHRwczovL2dpdGh1Yi5jb20vcG91Y2hkYi9wb3VjaGRiL2Jsb2IvbWFzdGVyL3BhY2thZ2VzL25vZGVfbW9kdWxlcy9wb3VjaGRiLWFkYXB0ZXItaWRiL3NyYy9ibG9iU3VwcG9ydC5qc1xuLy9cbmZ1bmN0aW9uIF9jaGVja0Jsb2JTdXBwb3J0V2l0aG91dENhY2hpbmcoaWRiKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUpIHtcbiAgICAgICAgdmFyIHR4biA9IGlkYi50cmFuc2FjdGlvbihERVRFQ1RfQkxPQl9TVVBQT1JUX1NUT1JFLCAncmVhZHdyaXRlJyk7XG4gICAgICAgIHZhciBibG9iID0gY3JlYXRlQmxvYihbJyddKTtcbiAgICAgICAgdHhuLm9iamVjdFN0b3JlKERFVEVDVF9CTE9CX1NVUFBPUlRfU1RPUkUpLnB1dChibG9iLCAna2V5Jyk7XG5cbiAgICAgICAgdHhuLm9uYWJvcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHRyYW5zYWN0aW9uIGFib3J0cyBub3cgaXRzIGR1ZSB0byBub3QgYmVpbmcgYWJsZSB0b1xuICAgICAgICAgICAgLy8gd3JpdGUgdG8gdGhlIGRhdGFiYXNlLCBsaWtlbHkgZHVlIHRvIHRoZSBkaXNrIGJlaW5nIGZ1bGxcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0eG4ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkQ2hyb21lID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKFxcZCspLyk7XG4gICAgICAgICAgICB2YXIgbWF0Y2hlZEVkZ2UgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9FZGdlXFwvLyk7XG4gICAgICAgICAgICAvLyBNUyBFZGdlIHByZXRlbmRzIHRvIGJlIENocm9tZSA0MjpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaGg4NjkzMDElMjh2PXZzLjg1JTI5LmFzcHhcbiAgICAgICAgICAgIHJlc29sdmUobWF0Y2hlZEVkZ2UgfHwgIW1hdGNoZWRDaHJvbWUgfHwgcGFyc2VJbnQobWF0Y2hlZENocm9tZVsxXSwgMTApID49IDQzKTtcbiAgICAgICAgfTtcbiAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBlcnJvciwgc28gYXNzdW1lIHVuc3VwcG9ydGVkXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIF9jaGVja0Jsb2JTdXBwb3J0KGlkYikge1xuICAgIGlmICh0eXBlb2Ygc3VwcG9ydHNCbG9icyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlJDEucmVzb2x2ZShzdXBwb3J0c0Jsb2JzKTtcbiAgICB9XG4gICAgcmV0dXJuIF9jaGVja0Jsb2JTdXBwb3J0V2l0aG91dENhY2hpbmcoaWRiKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBzdXBwb3J0c0Jsb2JzID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBzdXBwb3J0c0Jsb2JzO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBfZGVmZXJSZWFkaW5lc3MoZGJJbmZvKSB7XG4gICAgdmFyIGRiQ29udGV4dCA9IGRiQ29udGV4dHNbZGJJbmZvLm5hbWVdO1xuXG4gICAgLy8gQ3JlYXRlIGEgZGVmZXJyZWQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBkYXRhYmFzZSBvcGVyYXRpb24uXG4gICAgdmFyIGRlZmVycmVkT3BlcmF0aW9uID0ge307XG5cbiAgICBkZWZlcnJlZE9wZXJhdGlvbi5wcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICBkZWZlcnJlZE9wZXJhdGlvbi5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICB9KTtcblxuICAgIC8vIEVucXVldWUgdGhlIGRlZmVycmVkIG9wZXJhdGlvbi5cbiAgICBkYkNvbnRleHQuZGVmZXJyZWRPcGVyYXRpb25zLnB1c2goZGVmZXJyZWRPcGVyYXRpb24pO1xuXG4gICAgLy8gQ2hhaW4gaXRzIHByb21pc2UgdG8gdGhlIGRhdGFiYXNlIHJlYWRpbmVzcy5cbiAgICBpZiAoIWRiQ29udGV4dC5kYlJlYWR5KSB7XG4gICAgICAgIGRiQ29udGV4dC5kYlJlYWR5ID0gZGVmZXJyZWRPcGVyYXRpb24ucHJvbWlzZTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBkYkNvbnRleHQuZGJSZWFkeSA9IGRiQ29udGV4dC5kYlJlYWR5LnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkT3BlcmF0aW9uLnByb21pc2U7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX2FkdmFuY2VSZWFkaW5lc3MoZGJJbmZvKSB7XG4gICAgdmFyIGRiQ29udGV4dCA9IGRiQ29udGV4dHNbZGJJbmZvLm5hbWVdO1xuXG4gICAgLy8gRGVxdWV1ZSBhIGRlZmVycmVkIG9wZXJhdGlvbi5cbiAgICB2YXIgZGVmZXJyZWRPcGVyYXRpb24gPSBkYkNvbnRleHQuZGVmZXJyZWRPcGVyYXRpb25zLnBvcCgpO1xuXG4gICAgLy8gUmVzb2x2ZSBpdHMgcHJvbWlzZSAod2hpY2ggaXMgcGFydCBvZiB0aGUgZGF0YWJhc2UgcmVhZGluZXNzXG4gICAgLy8gY2hhaW4gb2YgcHJvbWlzZXMpLlxuICAgIGlmIChkZWZlcnJlZE9wZXJhdGlvbikge1xuICAgICAgICBkZWZlcnJlZE9wZXJhdGlvbi5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfZ2V0Q29ubmVjdGlvbihkYkluZm8sIHVwZ3JhZGVOZWVkZWQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG5cbiAgICAgICAgaWYgKGRiSW5mby5kYikge1xuICAgICAgICAgICAgaWYgKHVwZ3JhZGVOZWVkZWQpIHtcbiAgICAgICAgICAgICAgICBfZGVmZXJSZWFkaW5lc3MoZGJJbmZvKTtcbiAgICAgICAgICAgICAgICBkYkluZm8uZGIuY2xvc2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZGJJbmZvLmRiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkYkFyZ3MgPSBbZGJJbmZvLm5hbWVdO1xuXG4gICAgICAgIGlmICh1cGdyYWRlTmVlZGVkKSB7XG4gICAgICAgICAgICBkYkFyZ3MucHVzaChkYkluZm8udmVyc2lvbik7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgb3BlbnJlcSA9IGlkYi5vcGVuLmFwcGx5KGlkYiwgZGJBcmdzKTtcblxuICAgICAgICBpZiAodXBncmFkZU5lZWRlZCkge1xuICAgICAgICAgICAgb3BlbnJlcS5vbnVwZ3JhZGVuZWVkZWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBkYiA9IG9wZW5yZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKGRiSW5mby5zdG9yZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZS5vbGRWZXJzaW9uIDw9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZGVkIHdoZW4gc3VwcG9ydCBmb3IgYmxvYiBzaGltcyB3YXMgYWRkZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERFVEVDVF9CTE9CX1NVUFBPUlRfU1RPUkUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4Lm5hbWUgPT09ICdDb25zdHJhaW50RXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBkYXRhYmFzZSBcIicgKyBkYkluZm8ubmFtZSArICdcIicgKyAnIGhhcyBiZWVuIHVwZ3JhZGVkIGZyb20gdmVyc2lvbiAnICsgZS5vbGRWZXJzaW9uICsgJyB0byB2ZXJzaW9uICcgKyBlLm5ld1ZlcnNpb24gKyAnLCBidXQgdGhlIHN0b3JhZ2UgXCInICsgZGJJbmZvLnN0b3JlTmFtZSArICdcIiBhbHJlYWR5IGV4aXN0cy4nKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IGV4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIG9wZW5yZXEub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICByZWplY3Qob3BlbnJlcS5lcnJvcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgb3BlbnJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNvbHZlKG9wZW5yZXEucmVzdWx0KTtcbiAgICAgICAgICAgIF9hZHZhbmNlUmVhZGluZXNzKGRiSW5mbyk7XG4gICAgICAgIH07XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIF9nZXRPcmlnaW5hbENvbm5lY3Rpb24oZGJJbmZvKSB7XG4gICAgcmV0dXJuIF9nZXRDb25uZWN0aW9uKGRiSW5mbywgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBfZ2V0VXBncmFkZWRDb25uZWN0aW9uKGRiSW5mbykge1xuICAgIHJldHVybiBfZ2V0Q29ubmVjdGlvbihkYkluZm8sIHRydWUpO1xufVxuXG5mdW5jdGlvbiBfaXNVcGdyYWRlTmVlZGVkKGRiSW5mbywgZGVmYXVsdFZlcnNpb24pIHtcbiAgICBpZiAoIWRiSW5mby5kYikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgaXNOZXdTdG9yZSA9ICFkYkluZm8uZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhkYkluZm8uc3RvcmVOYW1lKTtcbiAgICB2YXIgaXNEb3duZ3JhZGUgPSBkYkluZm8udmVyc2lvbiA8IGRiSW5mby5kYi52ZXJzaW9uO1xuICAgIHZhciBpc1VwZ3JhZGUgPSBkYkluZm8udmVyc2lvbiA+IGRiSW5mby5kYi52ZXJzaW9uO1xuXG4gICAgaWYgKGlzRG93bmdyYWRlKSB7XG4gICAgICAgIC8vIElmIHRoZSB2ZXJzaW9uIGlzIG5vdCB0aGUgZGVmYXVsdCBvbmVcbiAgICAgICAgLy8gdGhlbiB3YXJuIGZvciBpbXBvc3NpYmxlIGRvd25ncmFkZS5cbiAgICAgICAgaWYgKGRiSW5mby52ZXJzaW9uICE9PSBkZWZhdWx0VmVyc2lvbikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGUgZGF0YWJhc2UgXCInICsgZGJJbmZvLm5hbWUgKyAnXCInICsgJyBjYW5cXCd0IGJlIGRvd25ncmFkZWQgZnJvbSB2ZXJzaW9uICcgKyBkYkluZm8uZGIudmVyc2lvbiArICcgdG8gdmVyc2lvbiAnICsgZGJJbmZvLnZlcnNpb24gKyAnLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsaWduIHRoZSB2ZXJzaW9ucyB0byBwcmV2ZW50IGVycm9ycy5cbiAgICAgICAgZGJJbmZvLnZlcnNpb24gPSBkYkluZm8uZGIudmVyc2lvbjtcbiAgICB9XG5cbiAgICBpZiAoaXNVcGdyYWRlIHx8IGlzTmV3U3RvcmUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHN0b3JlIGlzIG5ldyB0aGVuIGluY3JlbWVudCB0aGUgdmVyc2lvbiAoaWYgbmVlZGVkKS5cbiAgICAgICAgLy8gVGhpcyB3aWxsIHRyaWdnZXIgYW4gXCJ1cGdyYWRlbmVlZGVkXCIgZXZlbnQgd2hpY2ggaXMgcmVxdWlyZWRcbiAgICAgICAgLy8gZm9yIGNyZWF0aW5nIGEgc3RvcmUuXG4gICAgICAgIGlmIChpc05ld1N0b3JlKSB7XG4gICAgICAgICAgICB2YXIgaW5jVmVyc2lvbiA9IGRiSW5mby5kYi52ZXJzaW9uICsgMTtcbiAgICAgICAgICAgIGlmIChpbmNWZXJzaW9uID4gZGJJbmZvLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBkYkluZm8udmVyc2lvbiA9IGluY1ZlcnNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGVuY29kZSBhIGJsb2IgZm9yIGluZGV4ZWRkYiBlbmdpbmVzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBibG9ic1xuZnVuY3Rpb24gX2VuY29kZUJsb2IoYmxvYikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjQgPSBidG9hKGUudGFyZ2V0LnJlc3VsdCB8fCAnJyk7XG4gICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBfX2xvY2FsX2ZvcmFnZV9lbmNvZGVkX2Jsb2I6IHRydWUsXG4gICAgICAgICAgICAgICAgZGF0YTogYmFzZTY0LFxuICAgICAgICAgICAgICAgIHR5cGU6IGJsb2IudHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoYmxvYik7XG4gICAgfSk7XG59XG5cbi8vIGRlY29kZSBhbiBlbmNvZGVkIGJsb2JcbmZ1bmN0aW9uIF9kZWNvZGVCbG9iKGVuY29kZWRCbG9iKSB7XG4gICAgdmFyIGFycmF5QnVmZiA9IF9iaW5TdHJpbmdUb0FycmF5QnVmZmVyKGF0b2IoZW5jb2RlZEJsb2IuZGF0YSkpO1xuICAgIHJldHVybiBjcmVhdGVCbG9iKFthcnJheUJ1ZmZdLCB7IHR5cGU6IGVuY29kZWRCbG9iLnR5cGUgfSk7XG59XG5cbi8vIGlzIHRoaXMgb25lIG9mIG91ciBmYW5jeSBlbmNvZGVkIGJsb2JzP1xuZnVuY3Rpb24gX2lzRW5jb2RlZEJsb2IodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgdmFsdWUuX19sb2NhbF9mb3JhZ2VfZW5jb2RlZF9ibG9iO1xufVxuXG4vLyBTcGVjaWFsaXplIHRoZSBkZWZhdWx0IGByZWFkeSgpYCBmdW5jdGlvbiBieSBtYWtpbmcgaXQgZGVwZW5kZW50XG4vLyBvbiB0aGUgY3VycmVudCBkYXRhYmFzZSBvcGVyYXRpb25zLiBUaHVzLCB0aGUgZHJpdmVyIHdpbGwgYmUgYWN0dWFsbHlcbi8vIHJlYWR5IHdoZW4gaXQncyBiZWVuIGluaXRpYWxpemVkIChkZWZhdWx0KSAqYW5kKiB0aGVyZSBhcmUgbm8gcGVuZGluZ1xuLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGF0YWJhc2UgKGluaXRpYXRlZCBieSBzb21lIG90aGVyIGluc3RhbmNlcykuXG5mdW5jdGlvbiBfZnVsbHlSZWFkeShjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gc2VsZi5faW5pdFJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYkNvbnRleHQgPSBkYkNvbnRleHRzW3NlbGYuX2RiSW5mby5uYW1lXTtcblxuICAgICAgICBpZiAoZGJDb250ZXh0ICYmIGRiQ29udGV4dC5kYlJlYWR5KSB7XG4gICAgICAgICAgICByZXR1cm4gZGJDb250ZXh0LmRiUmVhZHk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGV4ZWN1dGVUd29DYWxsYmFja3MocHJvbWlzZSwgY2FsbGJhY2ssIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gT3BlbiB0aGUgSW5kZXhlZERCIGRhdGFiYXNlIChhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgb25lIGlmIG9uZSBkaWRuJ3Rcbi8vIHByZXZpb3VzbHkgZXhpc3QpLCB1c2luZyBhbnkgb3B0aW9ucyBzZXQgaW4gdGhlIGNvbmZpZy5cbmZ1bmN0aW9uIF9pbml0U3RvcmFnZShvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkYkluZm8gPSB7XG4gICAgICAgIGRiOiBudWxsXG4gICAgfTtcblxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgIGZvciAodmFyIGkgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgZGJJbmZvW2ldID0gb3B0aW9uc1tpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEluaXRpYWxpemUgYSBzaW5nbGV0b24gY29udGFpbmVyIGZvciBhbGwgcnVubmluZyBsb2NhbEZvcmFnZXMuXG4gICAgaWYgKCFkYkNvbnRleHRzKSB7XG4gICAgICAgIGRiQ29udGV4dHMgPSB7fTtcbiAgICB9XG5cbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgY29udGV4dCBvZiB0aGUgZGF0YWJhc2U7XG4gICAgdmFyIGRiQ29udGV4dCA9IGRiQ29udGV4dHNbZGJJbmZvLm5hbWVdO1xuXG4gICAgLy8gLi4ub3IgY3JlYXRlIGEgbmV3IGNvbnRleHQuXG4gICAgaWYgKCFkYkNvbnRleHQpIHtcbiAgICAgICAgZGJDb250ZXh0ID0ge1xuICAgICAgICAgICAgLy8gUnVubmluZyBsb2NhbEZvcmFnZXMgc2hhcmluZyBhIGRhdGFiYXNlLlxuICAgICAgICAgICAgZm9yYWdlczogW10sXG4gICAgICAgICAgICAvLyBTaGFyZWQgZGF0YWJhc2UuXG4gICAgICAgICAgICBkYjogbnVsbCxcbiAgICAgICAgICAgIC8vIERhdGFiYXNlIHJlYWRpbmVzcyAocHJvbWlzZSkuXG4gICAgICAgICAgICBkYlJlYWR5OiBudWxsLFxuICAgICAgICAgICAgLy8gRGVmZXJyZWQgb3BlcmF0aW9ucyBvbiB0aGUgZGF0YWJhc2UuXG4gICAgICAgICAgICBkZWZlcnJlZE9wZXJhdGlvbnM6IFtdXG4gICAgICAgIH07XG4gICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBuZXcgY29udGV4dCBpbiB0aGUgZ2xvYmFsIGNvbnRhaW5lci5cbiAgICAgICAgZGJDb250ZXh0c1tkYkluZm8ubmFtZV0gPSBkYkNvbnRleHQ7XG4gICAgfVxuXG4gICAgLy8gUmVnaXN0ZXIgaXRzZWxmIGFzIGEgcnVubmluZyBsb2NhbEZvcmFnZSBpbiB0aGUgY3VycmVudCBjb250ZXh0LlxuICAgIGRiQ29udGV4dC5mb3JhZ2VzLnB1c2goc2VsZik7XG5cbiAgICAvLyBSZXBsYWNlIHRoZSBkZWZhdWx0IGByZWFkeSgpYCBmdW5jdGlvbiB3aXRoIHRoZSBzcGVjaWFsaXplZCBvbmUuXG4gICAgaWYgKCFzZWxmLl9pbml0UmVhZHkpIHtcbiAgICAgICAgc2VsZi5faW5pdFJlYWR5ID0gc2VsZi5yZWFkeTtcbiAgICAgICAgc2VsZi5yZWFkeSA9IF9mdWxseVJlYWR5O1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSBhbiBhcnJheSBvZiBpbml0aWFsaXphdGlvbiBzdGF0ZXMgb2YgdGhlIHJlbGF0ZWQgbG9jYWxGb3JhZ2VzLlxuICAgIHZhciBpbml0UHJvbWlzZXMgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGlnbm9yZUVycm9ycygpIHtcbiAgICAgICAgLy8gRG9uJ3QgaGFuZGxlIGVycm9ycyBoZXJlLFxuICAgICAgICAvLyBqdXN0IG1ha2VzIHN1cmUgcmVsYXRlZCBsb2NhbEZvcmFnZXMgYXJlbid0IHBlbmRpbmcuXG4gICAgICAgIHJldHVybiBQcm9taXNlJDEucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGJDb250ZXh0LmZvcmFnZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgdmFyIGZvcmFnZSA9IGRiQ29udGV4dC5mb3JhZ2VzW2pdO1xuICAgICAgICBpZiAoZm9yYWdlICE9PSBzZWxmKSB7XG4gICAgICAgICAgICAvLyBEb24ndCB3YWl0IGZvciBpdHNlbGYuLi5cbiAgICAgICAgICAgIGluaXRQcm9taXNlcy5wdXNoKGZvcmFnZS5faW5pdFJlYWR5KClbXCJjYXRjaFwiXShpZ25vcmVFcnJvcnMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRha2UgYSBzbmFwc2hvdCBvZiB0aGUgcmVsYXRlZCBsb2NhbEZvcmFnZXMuXG4gICAgdmFyIGZvcmFnZXMgPSBkYkNvbnRleHQuZm9yYWdlcy5zbGljZSgwKTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIGNvbm5lY3Rpb24gcHJvY2VzcyBvbmx5IHdoZW5cbiAgICAvLyBhbGwgdGhlIHJlbGF0ZWQgbG9jYWxGb3JhZ2VzIGFyZW4ndCBwZW5kaW5nLlxuICAgIHJldHVybiBQcm9taXNlJDEuYWxsKGluaXRQcm9taXNlcykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRiSW5mby5kYiA9IGRiQ29udGV4dC5kYjtcbiAgICAgICAgLy8gR2V0IHRoZSBjb25uZWN0aW9uIG9yIG9wZW4gYSBuZXcgb25lIHdpdGhvdXQgdXBncmFkZS5cbiAgICAgICAgcmV0dXJuIF9nZXRPcmlnaW5hbENvbm5lY3Rpb24oZGJJbmZvKTtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChkYikge1xuICAgICAgICBkYkluZm8uZGIgPSBkYjtcbiAgICAgICAgaWYgKF9pc1VwZ3JhZGVOZWVkZWQoZGJJbmZvLCBzZWxmLl9kZWZhdWx0Q29uZmlnLnZlcnNpb24pKSB7XG4gICAgICAgICAgICAvLyBSZW9wZW4gdGhlIGRhdGFiYXNlIGZvciB1cGdyYWRpbmcuXG4gICAgICAgICAgICByZXR1cm4gX2dldFVwZ3JhZGVkQ29ubmVjdGlvbihkYkluZm8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYjtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChkYikge1xuICAgICAgICBkYkluZm8uZGIgPSBkYkNvbnRleHQuZGIgPSBkYjtcbiAgICAgICAgc2VsZi5fZGJJbmZvID0gZGJJbmZvO1xuICAgICAgICAvLyBTaGFyZSB0aGUgZmluYWwgY29ubmVjdGlvbiBhbW9uZ3N0IHJlbGF0ZWQgbG9jYWxGb3JhZ2VzLlxuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGZvcmFnZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIHZhciBmb3JhZ2UgPSBmb3JhZ2VzW2tdO1xuICAgICAgICAgICAgaWYgKGZvcmFnZSAhPT0gc2VsZikge1xuICAgICAgICAgICAgICAgIC8vIFNlbGYgaXMgYWxyZWFkeSB1cC10by1kYXRlLlxuICAgICAgICAgICAgICAgIGZvcmFnZS5fZGJJbmZvLmRiID0gZGJJbmZvLmRiO1xuICAgICAgICAgICAgICAgIGZvcmFnZS5fZGJJbmZvLnZlcnNpb24gPSBkYkluZm8udmVyc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRJdGVtKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IGRiSW5mby5kYi50cmFuc2FjdGlvbihkYkluZm8uc3RvcmVOYW1lLCAncmVhZG9ubHknKS5vYmplY3RTdG9yZShkYkluZm8uc3RvcmVOYW1lKTtcbiAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZS5nZXQoa2V5KTtcblxuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSByZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF9pc0VuY29kZWRCbG9iKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IF9kZWNvZGVCbG9iKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIEl0ZXJhdGUgb3ZlciBhbGwgaXRlbXMgc3RvcmVkIGluIGRhdGFiYXNlLlxuZnVuY3Rpb24gaXRlcmF0ZShpdGVyYXRvciwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGRiSW5mby5zdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKGRiSW5mby5zdG9yZU5hbWUpO1xuXG4gICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUub3BlbkN1cnNvcigpO1xuICAgICAgICAgICAgdmFyIGl0ZXJhdGlvbk51bWJlciA9IDE7XG5cbiAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IHJlcS5yZXN1bHQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IGN1cnNvci52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9pc0VuY29kZWRCbG9iKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBfZGVjb2RlQmxvYih2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yKHZhbHVlLCBjdXJzb3Iua2V5LCBpdGVyYXRpb25OdW1iZXIrKyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3JbXCJjb250aW51ZVwiXSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChyZXEuZXJyb3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcblxuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBzZXRJdGVtKGtleSwgdmFsdWUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gQ2FzdCB0aGUga2V5IHRvIGEgc3RyaW5nLCBhcyB0aGF0J3MgYWxsIHdlIGNhbiBzZXQgYXMgYSBrZXkuXG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihrZXkgKyAnIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgICAgIGtleSA9IFN0cmluZyhrZXkpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciBkYkluZm87XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGlmICh0b1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgQmxvYl0nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9jaGVja0Jsb2JTdXBwb3J0KGRiSW5mby5kYikudGhlbihmdW5jdGlvbiAoYmxvYlN1cHBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsb2JTdXBwb3J0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9lbmNvZGVCbG9iKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiA9IGRiSW5mby5kYi50cmFuc2FjdGlvbihkYkluZm8uc3RvcmVOYW1lLCAncmVhZHdyaXRlJyk7XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShkYkluZm8uc3RvcmVOYW1lKTtcbiAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZS5wdXQodmFsdWUsIGtleSk7XG5cbiAgICAgICAgICAgIC8vIFRoZSByZWFzb24gd2UgZG9uJ3QgX3NhdmVfIG51bGwgaXMgYmVjYXVzZSBJRSAxMCBkb2VzXG4gICAgICAgICAgICAvLyBub3Qgc3VwcG9ydCBzYXZpbmcgdGhlIGBudWxsYCB0eXBlIGluIEluZGV4ZWREQi4gSG93XG4gICAgICAgICAgICAvLyBpcm9uaWMsIGdpdmVuIHRoZSBidWcgYmVsb3chXG4gICAgICAgICAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL2xvY2FsRm9yYWdlL2lzc3Vlcy8xNjFcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIENhc3QgdG8gdW5kZWZpbmVkIHNvIHRoZSB2YWx1ZSBwYXNzZWQgdG9cbiAgICAgICAgICAgICAgICAvLyBjYWxsYmFjay9wcm9taXNlIGlzIHRoZSBzYW1lIGFzIHdoYXQgb25lIHdvdWxkIGdldCBvdXRcbiAgICAgICAgICAgICAgICAvLyBvZiBgZ2V0SXRlbSgpYCBsYXRlci4gVGhpcyBsZWFkcyB0byBzb21lIHdlaXJkbmVzc1xuICAgICAgICAgICAgICAgIC8vIChzZXRJdGVtKCdmb28nLCB1bmRlZmluZWQpIHdpbGwgcmV0dXJuIGBudWxsYCksIGJ1dFxuICAgICAgICAgICAgICAgIC8vIGl0J3Mgbm90IG15IGZhdWx0IGxvY2FsU3RvcmFnZSBpcyBvdXIgYmFzZWxpbmUgYW5kIHRoYXRcbiAgICAgICAgICAgICAgICAvLyBpdCdzIHdlaXJkLlxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmFib3J0ID0gdHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyID0gcmVxLmVycm9yID8gcmVxLmVycm9yIDogcmVxLnRyYW5zYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSXRlbShrZXksIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gQ2FzdCB0aGUga2V5IHRvIGEgc3RyaW5nLCBhcyB0aGF0J3MgYWxsIHdlIGNhbiBzZXQgYXMgYSBrZXkuXG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihrZXkgKyAnIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgICAgIGtleSA9IFN0cmluZyhrZXkpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb24gPSBkYkluZm8uZGIudHJhbnNhY3Rpb24oZGJJbmZvLnN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpO1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoZGJJbmZvLnN0b3JlTmFtZSk7XG5cbiAgICAgICAgICAgIC8vIFdlIHVzZSBhIEdydW50IHRhc2sgdG8gbWFrZSB0aGlzIHNhZmUgZm9yIElFIGFuZCBzb21lXG4gICAgICAgICAgICAvLyB2ZXJzaW9ucyBvZiBBbmRyb2lkIChpbmNsdWRpbmcgdGhvc2UgdXNlZCBieSBDb3Jkb3ZhKS5cbiAgICAgICAgICAgIC8vIE5vcm1hbGx5IElFIHdvbid0IGxpa2UgYC5kZWxldGUoKWAgYW5kIHdpbGwgaW5zaXN0IG9uXG4gICAgICAgICAgICAvLyB1c2luZyBgWydkZWxldGUnXSgpYCwgYnV0IHdlIGhhdmUgYSBidWlsZCBzdGVwIHRoYXRcbiAgICAgICAgICAgIC8vIGZpeGVzIHRoaXMgZm9yIHVzIG5vdy5cbiAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZVtcImRlbGV0ZVwiXShrZXkpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChyZXEuZXJyb3IpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gVGhlIHJlcXVlc3Qgd2lsbCBiZSBhbHNvIGJlIGFib3J0ZWQgaWYgd2UndmUgZXhjZWVkZWQgb3VyIHN0b3JhZ2VcbiAgICAgICAgICAgIC8vIHNwYWNlLlxuICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25hYm9ydCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyID0gcmVxLmVycm9yID8gcmVxLmVycm9yIDogcmVxLnRyYW5zYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gY2xlYXIoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uID0gZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGRiSW5mby5zdG9yZU5hbWUsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKGRiSW5mby5zdG9yZU5hbWUpO1xuICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLmNsZWFyKCk7XG5cbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25hYm9ydCA9IHRyYW5zYWN0aW9uLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVyciA9IHJlcS5lcnJvciA/IHJlcS5lcnJvciA6IHJlcS50cmFuc2FjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGxlbmd0aChjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSBkYkluZm8uZGIudHJhbnNhY3Rpb24oZGJJbmZvLnN0b3JlTmFtZSwgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoZGJJbmZvLnN0b3JlTmFtZSk7XG4gICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUuY291bnQoKTtcblxuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcS5yZXN1bHQpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBrZXkobiwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBpZiAobiA8IDApIHtcbiAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG5cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSBkYkluZm8uZGIudHJhbnNhY3Rpb24oZGJJbmZvLnN0b3JlTmFtZSwgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoZGJJbmZvLnN0b3JlTmFtZSk7XG5cbiAgICAgICAgICAgIHZhciBhZHZhbmNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLm9wZW5DdXJzb3IoKTtcbiAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKCFjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBtZWFucyB0aGVyZSB3ZXJlbid0IGVub3VnaCBrZXlzXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChuID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgdGhlIGZpcnN0IGtleSwgcmV0dXJuIGl0IGlmIHRoYXQncyB3aGF0IHRoZXlcbiAgICAgICAgICAgICAgICAgICAgLy8gd2FudGVkLlxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGN1cnNvci5rZXkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYWR2YW5jZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSwgYXNrIHRoZSBjdXJzb3IgdG8gc2tpcCBhaGVhZCBuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZWNvcmRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmFkdmFuY2Uobik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHdlIGdldCBoZXJlLCB3ZSd2ZSBnb3QgdGhlIG50aCBrZXkuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGN1cnNvci5rZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBrZXlzKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IGRiSW5mby5kYi50cmFuc2FjdGlvbihkYkluZm8uc3RvcmVOYW1lLCAncmVhZG9ubHknKS5vYmplY3RTdG9yZShkYkluZm8uc3RvcmVOYW1lKTtcblxuICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLm9wZW5DdXJzb3IoKTtcbiAgICAgICAgICAgIHZhciBrZXlzID0gW107XG5cbiAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IHJlcS5yZXN1bHQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGtleXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGN1cnNvci5rZXkpO1xuICAgICAgICAgICAgICAgIGN1cnNvcltcImNvbnRpbnVlXCJdKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciBhc3luY1N0b3JhZ2UgPSB7XG4gICAgX2RyaXZlcjogJ2FzeW5jU3RvcmFnZScsXG4gICAgX2luaXRTdG9yYWdlOiBfaW5pdFN0b3JhZ2UsXG4gICAgaXRlcmF0ZTogaXRlcmF0ZSxcbiAgICBnZXRJdGVtOiBnZXRJdGVtLFxuICAgIHNldEl0ZW06IHNldEl0ZW0sXG4gICAgcmVtb3ZlSXRlbTogcmVtb3ZlSXRlbSxcbiAgICBjbGVhcjogY2xlYXIsXG4gICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAga2V5OiBrZXksXG4gICAga2V5czoga2V5c1xufTtcblxuLy8gU2FkbHksIHRoZSBiZXN0IHdheSB0byBzYXZlIGJpbmFyeSBkYXRhIGluIFdlYlNRTC9sb2NhbFN0b3JhZ2UgaXMgc2VyaWFsaXppbmdcbi8vIGl0IHRvIEJhc2U2NCwgc28gdGhpcyBpcyBob3cgd2Ugc3RvcmUgaXQgdG8gcHJldmVudCB2ZXJ5IHN0cmFuZ2UgZXJyb3JzIHdpdGggbGVzc1xuLy8gdmVyYm9zZSB3YXlzIG9mIGJpbmFyeSA8LT4gc3RyaW5nIGRhdGEgc3RvcmFnZS5cbnZhciBCQVNFX0NIQVJTID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXG52YXIgQkxPQl9UWVBFX1BSRUZJWCA9ICd+fmxvY2FsX2ZvcmFnZV90eXBlfic7XG52YXIgQkxPQl9UWVBFX1BSRUZJWF9SRUdFWCA9IC9efn5sb2NhbF9mb3JhZ2VfdHlwZX4oW15+XSspfi87XG5cbnZhciBTRVJJQUxJWkVEX01BUktFUiA9ICdfX2xmc2NfXzonO1xudmFyIFNFUklBTElaRURfTUFSS0VSX0xFTkdUSCA9IFNFUklBTElaRURfTUFSS0VSLmxlbmd0aDtcblxuLy8gT01HIHRoZSBzZXJpYWxpemF0aW9ucyFcbnZhciBUWVBFX0FSUkFZQlVGRkVSID0gJ2FyYmYnO1xudmFyIFRZUEVfQkxPQiA9ICdibG9iJztcbnZhciBUWVBFX0lOVDhBUlJBWSA9ICdzaTA4JztcbnZhciBUWVBFX1VJTlQ4QVJSQVkgPSAndWkwOCc7XG52YXIgVFlQRV9VSU5UOENMQU1QRURBUlJBWSA9ICd1aWM4JztcbnZhciBUWVBFX0lOVDE2QVJSQVkgPSAnc2kxNic7XG52YXIgVFlQRV9JTlQzMkFSUkFZID0gJ3NpMzInO1xudmFyIFRZUEVfVUlOVDE2QVJSQVkgPSAndXIxNic7XG52YXIgVFlQRV9VSU5UMzJBUlJBWSA9ICd1aTMyJztcbnZhciBUWVBFX0ZMT0FUMzJBUlJBWSA9ICdmbDMyJztcbnZhciBUWVBFX0ZMT0FUNjRBUlJBWSA9ICdmbDY0JztcbnZhciBUWVBFX1NFUklBTElaRURfTUFSS0VSX0xFTkdUSCA9IFNFUklBTElaRURfTUFSS0VSX0xFTkdUSCArIFRZUEVfQVJSQVlCVUZGRVIubGVuZ3RoO1xuXG52YXIgdG9TdHJpbmckMSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmZ1bmN0aW9uIHN0cmluZ1RvQnVmZmVyKHNlcmlhbGl6ZWRTdHJpbmcpIHtcbiAgICAvLyBGaWxsIHRoZSBzdHJpbmcgaW50byBhIEFycmF5QnVmZmVyLlxuICAgIHZhciBidWZmZXJMZW5ndGggPSBzZXJpYWxpemVkU3RyaW5nLmxlbmd0aCAqIDAuNzU7XG4gICAgdmFyIGxlbiA9IHNlcmlhbGl6ZWRTdHJpbmcubGVuZ3RoO1xuICAgIHZhciBpO1xuICAgIHZhciBwID0gMDtcbiAgICB2YXIgZW5jb2RlZDEsIGVuY29kZWQyLCBlbmNvZGVkMywgZW5jb2RlZDQ7XG5cbiAgICBpZiAoc2VyaWFsaXplZFN0cmluZ1tzZXJpYWxpemVkU3RyaW5nLmxlbmd0aCAtIDFdID09PSAnPScpIHtcbiAgICAgICAgYnVmZmVyTGVuZ3RoLS07XG4gICAgICAgIGlmIChzZXJpYWxpemVkU3RyaW5nW3NlcmlhbGl6ZWRTdHJpbmcubGVuZ3RoIC0gMl0gPT09ICc9Jykge1xuICAgICAgICAgICAgYnVmZmVyTGVuZ3RoLS07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlckxlbmd0aCk7XG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgICAgICBlbmNvZGVkMSA9IEJBU0VfQ0hBUlMuaW5kZXhPZihzZXJpYWxpemVkU3RyaW5nW2ldKTtcbiAgICAgICAgZW5jb2RlZDIgPSBCQVNFX0NIQVJTLmluZGV4T2Yoc2VyaWFsaXplZFN0cmluZ1tpICsgMV0pO1xuICAgICAgICBlbmNvZGVkMyA9IEJBU0VfQ0hBUlMuaW5kZXhPZihzZXJpYWxpemVkU3RyaW5nW2kgKyAyXSk7XG4gICAgICAgIGVuY29kZWQ0ID0gQkFTRV9DSEFSUy5pbmRleE9mKHNlcmlhbGl6ZWRTdHJpbmdbaSArIDNdKTtcblxuICAgICAgICAvKmpzbGludCBiaXR3aXNlOiB0cnVlICovXG4gICAgICAgIGJ5dGVzW3ArK10gPSBlbmNvZGVkMSA8PCAyIHwgZW5jb2RlZDIgPj4gNDtcbiAgICAgICAgYnl0ZXNbcCsrXSA9IChlbmNvZGVkMiAmIDE1KSA8PCA0IHwgZW5jb2RlZDMgPj4gMjtcbiAgICAgICAgYnl0ZXNbcCsrXSA9IChlbmNvZGVkMyAmIDMpIDw8IDYgfCBlbmNvZGVkNCAmIDYzO1xuICAgIH1cbiAgICByZXR1cm4gYnVmZmVyO1xufVxuXG4vLyBDb252ZXJ0cyBhIGJ1ZmZlciB0byBhIHN0cmluZyB0byBzdG9yZSwgc2VyaWFsaXplZCwgaW4gdGhlIGJhY2tlbmRcbi8vIHN0b3JhZ2UgbGlicmFyeS5cbmZ1bmN0aW9uIGJ1ZmZlclRvU3RyaW5nKGJ1ZmZlcikge1xuICAgIC8vIGJhc2U2NC1hcnJheWJ1ZmZlclxuICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgdmFyIGJhc2U2NFN0cmluZyA9ICcnO1xuICAgIHZhciBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIC8qanNsaW50IGJpdHdpc2U6IHRydWUgKi9cbiAgICAgICAgYmFzZTY0U3RyaW5nICs9IEJBU0VfQ0hBUlNbYnl0ZXNbaV0gPj4gMl07XG4gICAgICAgIGJhc2U2NFN0cmluZyArPSBCQVNFX0NIQVJTWyhieXRlc1tpXSAmIDMpIDw8IDQgfCBieXRlc1tpICsgMV0gPj4gNF07XG4gICAgICAgIGJhc2U2NFN0cmluZyArPSBCQVNFX0NIQVJTWyhieXRlc1tpICsgMV0gJiAxNSkgPDwgMiB8IGJ5dGVzW2kgKyAyXSA+PiA2XTtcbiAgICAgICAgYmFzZTY0U3RyaW5nICs9IEJBU0VfQ0hBUlNbYnl0ZXNbaSArIDJdICYgNjNdO1xuICAgIH1cblxuICAgIGlmIChieXRlcy5sZW5ndGggJSAzID09PSAyKSB7XG4gICAgICAgIGJhc2U2NFN0cmluZyA9IGJhc2U2NFN0cmluZy5zdWJzdHJpbmcoMCwgYmFzZTY0U3RyaW5nLmxlbmd0aCAtIDEpICsgJz0nO1xuICAgIH0gZWxzZSBpZiAoYnl0ZXMubGVuZ3RoICUgMyA9PT0gMSkge1xuICAgICAgICBiYXNlNjRTdHJpbmcgPSBiYXNlNjRTdHJpbmcuc3Vic3RyaW5nKDAsIGJhc2U2NFN0cmluZy5sZW5ndGggLSAyKSArICc9PSc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJhc2U2NFN0cmluZztcbn1cblxuLy8gU2VyaWFsaXplIGEgdmFsdWUsIGFmdGVyd2FyZHMgZXhlY3V0aW5nIGEgY2FsbGJhY2sgKHdoaWNoIHVzdWFsbHlcbi8vIGluc3RydWN0cyB0aGUgYHNldEl0ZW0oKWAgY2FsbGJhY2svcHJvbWlzZSB0byBiZSBleGVjdXRlZCkuIFRoaXMgaXMgaG93XG4vLyB3ZSBzdG9yZSBiaW5hcnkgZGF0YSB3aXRoIGxvY2FsU3RvcmFnZS5cbmZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWx1ZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgdmFsdWVUeXBlID0gJyc7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHZhbHVlVHlwZSA9IHRvU3RyaW5nJDEuY2FsbCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gQ2Fubm90IHVzZSBgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcmAgb3Igc3VjaCBoZXJlLCBhcyB0aGVzZVxuICAgIC8vIGNoZWNrcyBmYWlsIHdoZW4gcnVubmluZyB0aGUgdGVzdHMgdXNpbmcgY2FzcGVyLmpzLi4uXG4gICAgLy9cbiAgICAvLyBUT0RPOiBTZWUgd2h5IHRob3NlIHRlc3RzIGZhaWwgYW5kIHVzZSBhIGJldHRlciBzb2x1dGlvbi5cbiAgICBpZiAodmFsdWUgJiYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyB8fCB2YWx1ZS5idWZmZXIgJiYgdG9TdHJpbmckMS5jYWxsKHZhbHVlLmJ1ZmZlcikgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpKSB7XG4gICAgICAgIC8vIENvbnZlcnQgYmluYXJ5IGFycmF5cyB0byBhIHN0cmluZyBhbmQgcHJlZml4IHRoZSBzdHJpbmcgd2l0aFxuICAgICAgICAvLyBhIHNwZWNpYWwgbWFya2VyLlxuICAgICAgICB2YXIgYnVmZmVyO1xuICAgICAgICB2YXIgbWFya2VyID0gU0VSSUFMSVpFRF9NQVJLRVI7XG5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIGJ1ZmZlciA9IHZhbHVlO1xuICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfQVJSQVlCVUZGRVI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBidWZmZXIgPSB2YWx1ZS5idWZmZXI7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IEludDhBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfSU5UOEFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IFVpbnQ4QXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX1VJTlQ4QVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX1VJTlQ4Q0xBTVBFREFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IEludDE2QXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX0lOVDE2QVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgVWludDE2QXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX1VJTlQxNkFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IEludDMyQXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX0lOVDMyQVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgVWludDMyQXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX1VJTlQzMkFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfRkxPQVQzMkFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfRkxPQVQ2NEFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgdHlwZSBmb3IgQmluYXJ5QXJyYXknKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayhtYXJrZXIgKyBidWZmZXJUb1N0cmluZyhidWZmZXIpKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgQmxvYl0nKSB7XG4gICAgICAgIC8vIENvbnZlciB0aGUgYmxvYiB0byBhIGJpbmFyeUFycmF5IGFuZCB0aGVuIHRvIGEgc3RyaW5nLlxuICAgICAgICB2YXIgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cbiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBCYWNrd2FyZHMtY29tcGF0aWJsZSBwcmVmaXggZm9yIHRoZSBibG9iIHR5cGUuXG4gICAgICAgICAgICB2YXIgc3RyID0gQkxPQl9UWVBFX1BSRUZJWCArIHZhbHVlLnR5cGUgKyAnficgKyBidWZmZXJUb1N0cmluZyh0aGlzLnJlc3VsdCk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKFNFUklBTElaRURfTUFSS0VSICsgVFlQRV9CTE9CICsgc3RyKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY2FsbGJhY2soSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGNvbnZlcnQgdmFsdWUgaW50byBhIEpTT04gc3RyaW5nOiBcIiwgdmFsdWUpO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gRGVzZXJpYWxpemUgZGF0YSB3ZSd2ZSBpbnNlcnRlZCBpbnRvIGEgdmFsdWUgY29sdW1uL2ZpZWxkLiBXZSBwbGFjZVxuLy8gc3BlY2lhbCBtYXJrZXJzIGludG8gb3VyIHN0cmluZ3MgdG8gbWFyayB0aGVtIGFzIGVuY29kZWQ7IHRoaXMgaXNuJ3Rcbi8vIGFzIG5pY2UgYXMgYSBtZXRhIGZpZWxkLCBidXQgaXQncyB0aGUgb25seSBzYW5lIHRoaW5nIHdlIGNhbiBkbyB3aGlsc3Rcbi8vIGtlZXBpbmcgbG9jYWxTdG9yYWdlIHN1cHBvcnQgaW50YWN0LlxuLy9cbi8vIE9mdGVudGltZXMgdGhpcyB3aWxsIGp1c3QgZGVzZXJpYWxpemUgSlNPTiBjb250ZW50LCBidXQgaWYgd2UgaGF2ZSBhXG4vLyBzcGVjaWFsIG1hcmtlciAoU0VSSUFMSVpFRF9NQVJLRVIsIGRlZmluZWQgYWJvdmUpLCB3ZSB3aWxsIGV4dHJhY3Rcbi8vIHNvbWUga2luZCBvZiBhcnJheWJ1ZmZlci9iaW5hcnkgZGF0YS90eXBlZCBhcnJheSBvdXQgb2YgdGhlIHN0cmluZy5cbmZ1bmN0aW9uIGRlc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgLy8gSWYgd2UgaGF2ZW4ndCBtYXJrZWQgdGhpcyBzdHJpbmcgYXMgYmVpbmcgc3BlY2lhbGx5IHNlcmlhbGl6ZWQgKGkuZS5cbiAgICAvLyBzb21ldGhpbmcgb3RoZXIgdGhhbiBzZXJpYWxpemVkIEpTT04pLCB3ZSBjYW4ganVzdCByZXR1cm4gaXQgYW5kIGJlXG4gICAgLy8gZG9uZSB3aXRoIGl0LlxuICAgIGlmICh2YWx1ZS5zdWJzdHJpbmcoMCwgU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIKSAhPT0gU0VSSUFMSVpFRF9NQVJLRVIpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgIH1cblxuICAgIC8vIFRoZSBmb2xsb3dpbmcgY29kZSBkZWFscyB3aXRoIGRlc2VyaWFsaXppbmcgc29tZSBraW5kIG9mIEJsb2Igb3JcbiAgICAvLyBUeXBlZEFycmF5LiBGaXJzdCB3ZSBzZXBhcmF0ZSBvdXQgdGhlIHR5cGUgb2YgZGF0YSB3ZSdyZSBkZWFsaW5nXG4gICAgLy8gd2l0aCBmcm9tIHRoZSBkYXRhIGl0c2VsZi5cbiAgICB2YXIgc2VyaWFsaXplZFN0cmluZyA9IHZhbHVlLnN1YnN0cmluZyhUWVBFX1NFUklBTElaRURfTUFSS0VSX0xFTkdUSCk7XG4gICAgdmFyIHR5cGUgPSB2YWx1ZS5zdWJzdHJpbmcoU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RILCBUWVBFX1NFUklBTElaRURfTUFSS0VSX0xFTkdUSCk7XG5cbiAgICB2YXIgYmxvYlR5cGU7XG4gICAgLy8gQmFja3dhcmRzLWNvbXBhdGlibGUgYmxvYiB0eXBlIHNlcmlhbGl6YXRpb24gc3RyYXRlZ3kuXG4gICAgLy8gREJzIGNyZWF0ZWQgd2l0aCBvbGRlciB2ZXJzaW9ucyBvZiBsb2NhbEZvcmFnZSB3aWxsIHNpbXBseSBub3QgaGF2ZSB0aGUgYmxvYiB0eXBlLlxuICAgIGlmICh0eXBlID09PSBUWVBFX0JMT0IgJiYgQkxPQl9UWVBFX1BSRUZJWF9SRUdFWC50ZXN0KHNlcmlhbGl6ZWRTdHJpbmcpKSB7XG4gICAgICAgIHZhciBtYXRjaGVyID0gc2VyaWFsaXplZFN0cmluZy5tYXRjaChCTE9CX1RZUEVfUFJFRklYX1JFR0VYKTtcbiAgICAgICAgYmxvYlR5cGUgPSBtYXRjaGVyWzFdO1xuICAgICAgICBzZXJpYWxpemVkU3RyaW5nID0gc2VyaWFsaXplZFN0cmluZy5zdWJzdHJpbmcobWF0Y2hlclswXS5sZW5ndGgpO1xuICAgIH1cbiAgICB2YXIgYnVmZmVyID0gc3RyaW5nVG9CdWZmZXIoc2VyaWFsaXplZFN0cmluZyk7XG5cbiAgICAvLyBSZXR1cm4gdGhlIHJpZ2h0IHR5cGUgYmFzZWQgb24gdGhlIGNvZGUvdHlwZSBzZXQgZHVyaW5nXG4gICAgLy8gc2VyaWFsaXphdGlvbi5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBUWVBFX0FSUkFZQlVGRkVSOlxuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICAgICAgY2FzZSBUWVBFX0JMT0I6XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlQmxvYihbYnVmZmVyXSwgeyB0eXBlOiBibG9iVHlwZSB9KTtcbiAgICAgICAgY2FzZSBUWVBFX0lOVDhBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9VSU5UOEFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9VSU5UOENMQU1QRURBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhDbGFtcGVkQXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSBUWVBFX0lOVDE2QVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEludDE2QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSBUWVBFX1VJTlQxNkFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50MTZBcnJheShidWZmZXIpO1xuICAgICAgICBjYXNlIFRZUEVfSU5UMzJBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShidWZmZXIpO1xuICAgICAgICBjYXNlIFRZUEVfVUlOVDMyQVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9GTE9BVDMyQVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShidWZmZXIpO1xuICAgICAgICBjYXNlIFRZUEVfRkxPQVQ2NEFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDY0QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rb3duIHR5cGU6ICcgKyB0eXBlKTtcbiAgICB9XG59XG5cbnZhciBsb2NhbGZvcmFnZVNlcmlhbGl6ZXIgPSB7XG4gICAgc2VyaWFsaXplOiBzZXJpYWxpemUsXG4gICAgZGVzZXJpYWxpemU6IGRlc2VyaWFsaXplLFxuICAgIHN0cmluZ1RvQnVmZmVyOiBzdHJpbmdUb0J1ZmZlcixcbiAgICBidWZmZXJUb1N0cmluZzogYnVmZmVyVG9TdHJpbmdcbn07XG5cbi8qXG4gKiBJbmNsdWRlcyBjb2RlIGZyb206XG4gKlxuICogYmFzZTY0LWFycmF5YnVmZmVyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbmlrbGFzdmgvYmFzZTY0LWFycmF5YnVmZmVyXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEyIE5pa2xhcyB2b24gSGVydHplblxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICovXG4vLyBPcGVuIHRoZSBXZWJTUUwgZGF0YWJhc2UgKGF1dG9tYXRpY2FsbHkgY3JlYXRlcyBvbmUgaWYgb25lIGRpZG4ndFxuLy8gcHJldmlvdXNseSBleGlzdCksIHVzaW5nIGFueSBvcHRpb25zIHNldCBpbiB0aGUgY29uZmlnLlxuZnVuY3Rpb24gX2luaXRTdG9yYWdlJDEob3B0aW9ucykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZGJJbmZvID0ge1xuICAgICAgICBkYjogbnVsbFxuICAgIH07XG5cbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGRiSW5mb1tpXSA9IHR5cGVvZiBvcHRpb25zW2ldICE9PSAnc3RyaW5nJyA/IG9wdGlvbnNbaV0udG9TdHJpbmcoKSA6IG9wdGlvbnNbaV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZGJJbmZvUHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBPcGVuIHRoZSBkYXRhYmFzZTsgdGhlIG9wZW5EYXRhYmFzZSBBUEkgd2lsbCBhdXRvbWF0aWNhbGx5XG4gICAgICAgIC8vIGNyZWF0ZSBpdCBmb3IgdXMgaWYgaXQgZG9lc24ndCBleGlzdC5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGRiSW5mby5kYiA9IG9wZW5EYXRhYmFzZShkYkluZm8ubmFtZSwgU3RyaW5nKGRiSW5mby52ZXJzaW9uKSwgZGJJbmZvLmRlc2NyaXB0aW9uLCBkYkluZm8uc2l6ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QoZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgb3VyIGtleS92YWx1ZSB0YWJsZSBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgJyArIGRiSW5mby5zdG9yZU5hbWUgKyAnIChpZCBJTlRFR0VSIFBSSU1BUlkgS0VZLCBrZXkgdW5pcXVlLCB2YWx1ZSknLCBbXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNlbGYuX2RiSW5mbyA9IGRiSW5mbztcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAodCwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGJJbmZvLnNlcmlhbGl6ZXIgPSBsb2NhbGZvcmFnZVNlcmlhbGl6ZXI7XG4gICAgcmV0dXJuIGRiSW5mb1Byb21pc2U7XG59XG5cbmZ1bmN0aW9uIGdldEl0ZW0kMShrZXksIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gQ2FzdCB0aGUga2V5IHRvIGEgc3RyaW5nLCBhcyB0aGF0J3MgYWxsIHdlIGNhbiBzZXQgYXMgYSBrZXkuXG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihrZXkgKyAnIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgICAgIGtleSA9IFN0cmluZyhrZXkpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB0LmV4ZWN1dGVTcWwoJ1NFTEVDVCAqIEZST00gJyArIGRiSW5mby5zdG9yZU5hbWUgKyAnIFdIRVJFIGtleSA9ID8gTElNSVQgMScsIFtrZXldLCBmdW5jdGlvbiAodCwgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzdWx0cy5yb3dzLmxlbmd0aCA/IHJlc3VsdHMucm93cy5pdGVtKDApLnZhbHVlIDogbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhpcyBpcyBzZXJpYWxpemVkIGNvbnRlbnQgd2UgbmVlZCB0b1xuICAgICAgICAgICAgICAgICAgICAvLyB1bnBhY2suXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRiSW5mby5zZXJpYWxpemVyLmRlc2VyaWFsaXplKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBpdGVyYXRlJDEoaXRlcmF0b3IsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcblxuICAgICAgICAgICAgZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdC5leGVjdXRlU3FsKCdTRUxFQ1QgKiBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lLCBbXSwgZnVuY3Rpb24gKHQsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJvd3MgPSByZXN1bHRzLnJvd3M7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsZW5ndGggPSByb3dzLmxlbmd0aDtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHJvd3MuaXRlbShpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBpdGVtLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhpcyBpcyBzZXJpYWxpemVkIGNvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gdW5wYWNrLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRiSW5mby5zZXJpYWxpemVyLmRlc2VyaWFsaXplKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGl0ZXJhdG9yKHJlc3VsdCwgaXRlbS5rZXksIGkgKyAxKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdm9pZCgwKSBwcmV2ZW50cyBwcm9ibGVtcyB3aXRoIHJlZGVmaW5pdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2YgYHVuZGVmaW5lZGAuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIF9zZXRJdGVtKGtleSwgdmFsdWUsIGNhbGxiYWNrLCByZXRyaWVzTGVmdCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIENhc3QgdGhlIGtleSB0byBhIHN0cmluZywgYXMgdGhhdCdzIGFsbCB3ZSBjYW4gc2V0IGFzIGEga2V5LlxuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLndhcm4oa2V5ICsgJyB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgICBrZXkgPSBTdHJpbmcoa2V5KTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBUaGUgbG9jYWxTdG9yYWdlIEFQSSBkb2Vzbid0IHJldHVybiB1bmRlZmluZWQgdmFsdWVzIGluIGFuXG4gICAgICAgICAgICAvLyBcImV4cGVjdGVkXCIgd2F5LCBzbyB1bmRlZmluZWQgaXMgYWx3YXlzIGNhc3QgdG8gbnVsbCBpbiBhbGxcbiAgICAgICAgICAgIC8vIGRyaXZlcnMuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvbG9jYWxGb3JhZ2UvcHVsbC80MlxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIG9yaWdpbmFsIHZhbHVlIHRvIHBhc3MgdG8gdGhlIGNhbGxiYWNrLlxuICAgICAgICAgICAgdmFyIG9yaWdpbmFsVmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5zZXJpYWxpemVyLnNlcmlhbGl6ZSh2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5leGVjdXRlU3FsKCdJTlNFUlQgT1IgUkVQTEFDRSBJTlRPICcgKyBkYkluZm8uc3RvcmVOYW1lICsgJyAoa2V5LCB2YWx1ZSkgVkFMVUVTICg/LCA/KScsIFtrZXksIHZhbHVlXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUob3JpZ2luYWxWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAodCwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChzcWxFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHRyYW5zYWN0aW9uIGZhaWxlZDsgY2hlY2tcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRvIHNlZSBpZiBpdCdzIGEgcXVvdGEgZXJyb3IuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3FsRXJyb3IuY29kZSA9PT0gc3FsRXJyb3IuUVVPVEFfRVJSKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2UgcmVqZWN0IHRoZSBjYWxsYmFjayBvdXRyaWdodCBmb3Igbm93LCBidXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIHdvcnRoIHRyeWluZyB0byByZS1ydW4gdGhlIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV2ZW4gaWYgdGhlIHVzZXIgYWNjZXB0cyB0aGUgcHJvbXB0IHRvIHVzZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1vcmUgc3RvcmFnZSBvbiBTYWZhcmksIHRoaXMgZXJyb3Igd2lsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJlIGNhbGxlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRyeSB0byByZS1ydW4gdGhlIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXRyaWVzTGVmdCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfc2V0SXRlbS5hcHBseShzZWxmLCBba2V5LCBvcmlnaW5hbFZhbHVlLCBjYWxsYmFjaywgcmV0cmllc0xlZnQgLSAxXSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChzcWxFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBzZXRJdGVtJDEoa2V5LCB2YWx1ZSwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gX3NldEl0ZW0uYXBwbHkodGhpcywgW2tleSwgdmFsdWUsIGNhbGxiYWNrLCAxXSk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUl0ZW0kMShrZXksIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gQ2FzdCB0aGUga2V5IHRvIGEgc3RyaW5nLCBhcyB0aGF0J3MgYWxsIHdlIGNhbiBzZXQgYXMgYSBrZXkuXG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihrZXkgKyAnIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgICAgIGtleSA9IFN0cmluZyhrZXkpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB0LmV4ZWN1dGVTcWwoJ0RFTEVURSBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lICsgJyBXSEVSRSBrZXkgPSA/JywgW2tleV0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gRGVsZXRlcyBldmVyeSBpdGVtIGluIHRoZSB0YWJsZS5cbi8vIFRPRE86IEZpbmQgb3V0IGlmIHRoaXMgcmVzZXRzIHRoZSBBVVRPX0lOQ1JFTUVOVCBudW1iZXIuXG5mdW5jdGlvbiBjbGVhciQxKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnREVMRVRFIEZST00gJyArIGRiSW5mby5zdG9yZU5hbWUsIFtdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAodCwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBEb2VzIGEgc2ltcGxlIGBDT1VOVChrZXkpYCB0byBnZXQgdGhlIG51bWJlciBvZiBpdGVtcyBzdG9yZWQgaW5cbi8vIGxvY2FsRm9yYWdlLlxuZnVuY3Rpb24gbGVuZ3RoJDEoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgLy8gQWhoaCwgU1FMIG1ha2VzIHRoaXMgb25lIHNvb29vb28gZWFzeS5cbiAgICAgICAgICAgICAgICB0LmV4ZWN1dGVTcWwoJ1NFTEVDVCBDT1VOVChrZXkpIGFzIGMgRlJPTSAnICsgZGJJbmZvLnN0b3JlTmFtZSwgW10sIGZ1bmN0aW9uICh0LCByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXN1bHRzLnJvd3MuaXRlbSgwKS5jO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAodCwgZXJyb3IpIHtcblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFJldHVybiB0aGUga2V5IGxvY2F0ZWQgYXQga2V5IGluZGV4IFg7IGVzc2VudGlhbGx5IGdldHMgdGhlIGtleSBmcm9tIGFcbi8vIGBXSEVSRSBpZCA9ID9gLiBUaGlzIGlzIHRoZSBtb3N0IGVmZmljaWVudCB3YXkgSSBjYW4gdGhpbmsgdG8gaW1wbGVtZW50XG4vLyB0aGlzIHJhcmVseS11c2VkIChpbiBteSBleHBlcmllbmNlKSBwYXJ0IG9mIHRoZSBBUEksIGJ1dCBpdCBjYW4gc2VlbVxuLy8gaW5jb25zaXN0ZW50LCBiZWNhdXNlIHdlIGRvIGBJTlNFUlQgT1IgUkVQTEFDRSBJTlRPYCBvbiBgc2V0SXRlbSgpYCwgc29cbi8vIHRoZSBJRCBvZiBlYWNoIGtleSB3aWxsIGNoYW5nZSBldmVyeSB0aW1lIGl0J3MgdXBkYXRlZC4gUGVyaGFwcyBhIHN0b3JlZFxuLy8gcHJvY2VkdXJlIGZvciB0aGUgYHNldEl0ZW0oKWAgU1FMIHdvdWxkIHNvbHZlIHRoaXMgcHJvYmxlbT9cbi8vIFRPRE86IERvbid0IGNoYW5nZSBJRCBvbiBgc2V0SXRlbSgpYC5cbmZ1bmN0aW9uIGtleSQxKG4sIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnU0VMRUNUIGtleSBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lICsgJyBXSEVSRSBpZCA9ID8gTElNSVQgMScsIFtuICsgMV0sIGZ1bmN0aW9uICh0LCByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXN1bHRzLnJvd3MubGVuZ3RoID8gcmVzdWx0cy5yb3dzLml0ZW0oMCkua2V5IDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGtleXMkMShjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB0LmV4ZWN1dGVTcWwoJ1NFTEVDVCBrZXkgRlJPTSAnICsgZGJJbmZvLnN0b3JlTmFtZSwgW10sIGZ1bmN0aW9uICh0LCByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHRzLnJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChyZXN1bHRzLnJvd3MuaXRlbShpKS5rZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShrZXlzKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAodCwgZXJyb3IpIHtcblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbnZhciB3ZWJTUUxTdG9yYWdlID0ge1xuICAgIF9kcml2ZXI6ICd3ZWJTUUxTdG9yYWdlJyxcbiAgICBfaW5pdFN0b3JhZ2U6IF9pbml0U3RvcmFnZSQxLFxuICAgIGl0ZXJhdGU6IGl0ZXJhdGUkMSxcbiAgICBnZXRJdGVtOiBnZXRJdGVtJDEsXG4gICAgc2V0SXRlbTogc2V0SXRlbSQxLFxuICAgIHJlbW92ZUl0ZW06IHJlbW92ZUl0ZW0kMSxcbiAgICBjbGVhcjogY2xlYXIkMSxcbiAgICBsZW5ndGg6IGxlbmd0aCQxLFxuICAgIGtleToga2V5JDEsXG4gICAga2V5czoga2V5cyQxXG59O1xuXG4vLyBDb25maWcgdGhlIGxvY2FsU3RvcmFnZSBiYWNrZW5kLCB1c2luZyBvcHRpb25zIHNldCBpbiB0aGUgY29uZmlnLlxuZnVuY3Rpb24gX2luaXRTdG9yYWdlJDIob3B0aW9ucykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZGJJbmZvID0ge307XG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBkYkluZm9baV0gPSBvcHRpb25zW2ldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGJJbmZvLmtleVByZWZpeCA9IGRiSW5mby5uYW1lICsgJy8nO1xuXG4gICAgaWYgKGRiSW5mby5zdG9yZU5hbWUgIT09IHNlbGYuX2RlZmF1bHRDb25maWcuc3RvcmVOYW1lKSB7XG4gICAgICAgIGRiSW5mby5rZXlQcmVmaXggKz0gZGJJbmZvLnN0b3JlTmFtZSArICcvJztcbiAgICB9XG5cbiAgICBzZWxmLl9kYkluZm8gPSBkYkluZm87XG4gICAgZGJJbmZvLnNlcmlhbGl6ZXIgPSBsb2NhbGZvcmFnZVNlcmlhbGl6ZXI7XG5cbiAgICByZXR1cm4gUHJvbWlzZSQxLnJlc29sdmUoKTtcbn1cblxuLy8gUmVtb3ZlIGFsbCBrZXlzIGZyb20gdGhlIGRhdGFzdG9yZSwgZWZmZWN0aXZlbHkgZGVzdHJveWluZyBhbGwgZGF0YSBpblxuLy8gdGhlIGFwcCdzIGtleS92YWx1ZSBzdG9yZSFcbmZ1bmN0aW9uIGNsZWFyJDIoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHByb21pc2UgPSBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBrZXlQcmVmaXggPSBzZWxmLl9kYkluZm8ua2V5UHJlZml4O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBsb2NhbFN0b3JhZ2UubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpO1xuXG4gICAgICAgICAgICBpZiAoa2V5LmluZGV4T2Yoa2V5UHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFJldHJpZXZlIGFuIGl0ZW0gZnJvbSB0aGUgc3RvcmUuIFVubGlrZSB0aGUgb3JpZ2luYWwgYXN5bmNfc3RvcmFnZVxuLy8gbGlicmFyeSBpbiBHYWlhLCB3ZSBkb24ndCBtb2RpZnkgcmV0dXJuIHZhbHVlcyBhdCBhbGwuIElmIGEga2V5J3MgdmFsdWVcbi8vIGlzIGB1bmRlZmluZWRgLCB3ZSBwYXNzIHRoYXQgdmFsdWUgdG8gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuZnVuY3Rpb24gZ2V0SXRlbSQyKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgIHZhciByZXN1bHQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShkYkluZm8ua2V5UHJlZml4ICsga2V5KTtcblxuICAgICAgICAvLyBJZiBhIHJlc3VsdCB3YXMgZm91bmQsIHBhcnNlIGl0IGZyb20gdGhlIHNlcmlhbGl6ZWRcbiAgICAgICAgLy8gc3RyaW5nIGludG8gYSBKUyBvYmplY3QuIElmIHJlc3VsdCBpc24ndCB0cnV0aHksIHRoZSBrZXlcbiAgICAgICAgLy8gaXMgbGlrZWx5IHVuZGVmaW5lZCBhbmQgd2UnbGwgcGFzcyBpdCBzdHJhaWdodCB0byB0aGVcbiAgICAgICAgLy8gY2FsbGJhY2suXG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGRiSW5mby5zZXJpYWxpemVyLmRlc2VyaWFsaXplKHJlc3VsdCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gSXRlcmF0ZSBvdmVyIGFsbCBpdGVtcyBpbiB0aGUgc3RvcmUuXG5mdW5jdGlvbiBpdGVyYXRlJDIoaXRlcmF0b3IsIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgIHZhciBrZXlQcmVmaXggPSBkYkluZm8ua2V5UHJlZml4O1xuICAgICAgICB2YXIga2V5UHJlZml4TGVuZ3RoID0ga2V5UHJlZml4Lmxlbmd0aDtcbiAgICAgICAgdmFyIGxlbmd0aCA9IGxvY2FsU3RvcmFnZS5sZW5ndGg7XG5cbiAgICAgICAgLy8gV2UgdXNlIGEgZGVkaWNhdGVkIGl0ZXJhdG9yIGluc3RlYWQgb2YgdGhlIGBpYCB2YXJpYWJsZSBiZWxvd1xuICAgICAgICAvLyBzbyBvdGhlciBrZXlzIHdlIGZldGNoIGluIGxvY2FsU3RvcmFnZSBhcmVuJ3QgY291bnRlZCBpblxuICAgICAgICAvLyB0aGUgYGl0ZXJhdGlvbk51bWJlcmAgYXJndW1lbnQgcGFzc2VkIHRvIHRoZSBgaXRlcmF0ZSgpYFxuICAgICAgICAvLyBjYWxsYmFjay5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gU2VlOiBnaXRodWIuY29tL21vemlsbGEvbG9jYWxGb3JhZ2UvcHVsbC80MzUjZGlzY3Vzc2lvbl9yMzgwNjE1MzBcbiAgICAgICAgdmFyIGl0ZXJhdGlvbk51bWJlciA9IDE7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGtleSA9IGxvY2FsU3RvcmFnZS5rZXkoaSk7XG4gICAgICAgICAgICBpZiAoa2V5LmluZGV4T2Yoa2V5UHJlZml4KSAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHZhbHVlID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcblxuICAgICAgICAgICAgLy8gSWYgYSByZXN1bHQgd2FzIGZvdW5kLCBwYXJzZSBpdCBmcm9tIHRoZSBzZXJpYWxpemVkXG4gICAgICAgICAgICAvLyBzdHJpbmcgaW50byBhIEpTIG9iamVjdC4gSWYgcmVzdWx0IGlzbid0IHRydXRoeSwgdGhlXG4gICAgICAgICAgICAvLyBrZXkgaXMgbGlrZWx5IHVuZGVmaW5lZCBhbmQgd2UnbGwgcGFzcyBpdCBzdHJhaWdodFxuICAgICAgICAgICAgLy8gdG8gdGhlIGl0ZXJhdG9yLlxuICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBkYkluZm8uc2VyaWFsaXplci5kZXNlcmlhbGl6ZSh2YWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhbHVlID0gaXRlcmF0b3IodmFsdWUsIGtleS5zdWJzdHJpbmcoa2V5UHJlZml4TGVuZ3RoKSwgaXRlcmF0aW9uTnVtYmVyKyspO1xuXG4gICAgICAgICAgICBpZiAodmFsdWUgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gU2FtZSBhcyBsb2NhbFN0b3JhZ2UncyBrZXkoKSBtZXRob2QsIGV4Y2VwdCB0YWtlcyBhIGNhbGxiYWNrLlxuZnVuY3Rpb24ga2V5JDIobiwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHByb21pc2UgPSBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgIHZhciByZXN1bHQ7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBsb2NhbFN0b3JhZ2Uua2V5KG4pO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcmVzdWx0ID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgcHJlZml4IGZyb20gdGhlIGtleSwgaWYgYSBrZXkgaXMgZm91bmQuXG4gICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zdWJzdHJpbmcoZGJJbmZvLmtleVByZWZpeC5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGtleXMkMihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgdmFyIGxlbmd0aCA9IGxvY2FsU3RvcmFnZS5sZW5ndGg7XG4gICAgICAgIHZhciBrZXlzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5rZXkoaSkuaW5kZXhPZihkYkluZm8ua2V5UHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGtleXMucHVzaChsb2NhbFN0b3JhZ2Uua2V5KGkpLnN1YnN0cmluZyhkYkluZm8ua2V5UHJlZml4Lmxlbmd0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBTdXBwbHkgdGhlIG51bWJlciBvZiBrZXlzIGluIHRoZSBkYXRhc3RvcmUgdG8gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuZnVuY3Rpb24gbGVuZ3RoJDIoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHByb21pc2UgPSBzZWxmLmtleXMoKS50aGVuKGZ1bmN0aW9uIChrZXlzKSB7XG4gICAgICAgIHJldHVybiBrZXlzLmxlbmd0aDtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFJlbW92ZSBhbiBpdGVtIGZyb20gdGhlIHN0b3JlLCBuaWNlIGFuZCBzaW1wbGUuXG5mdW5jdGlvbiByZW1vdmVJdGVtJDIoa2V5LCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIENhc3QgdGhlIGtleSB0byBhIHN0cmluZywgYXMgdGhhdCdzIGFsbCB3ZSBjYW4gc2V0IGFzIGEga2V5LlxuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLndhcm4oa2V5ICsgJyB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgICBrZXkgPSBTdHJpbmcoa2V5KTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oZGJJbmZvLmtleVByZWZpeCArIGtleSk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBTZXQgYSBrZXkncyB2YWx1ZSBhbmQgcnVuIGFuIG9wdGlvbmFsIGNhbGxiYWNrIG9uY2UgdGhlIHZhbHVlIGlzIHNldC5cbi8vIFVubGlrZSBHYWlhJ3MgaW1wbGVtZW50YXRpb24sIHRoZSBjYWxsYmFjayBmdW5jdGlvbiBpcyBwYXNzZWQgdGhlIHZhbHVlLFxuLy8gaW4gY2FzZSB5b3Ugd2FudCB0byBvcGVyYXRlIG9uIHRoYXQgdmFsdWUgb25seSBhZnRlciB5b3UncmUgc3VyZSBpdFxuLy8gc2F2ZWQsIG9yIHNvbWV0aGluZyBsaWtlIHRoYXQuXG5mdW5jdGlvbiBzZXRJdGVtJDIoa2V5LCB2YWx1ZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIENvbnZlcnQgdW5kZWZpbmVkIHZhbHVlcyB0byBudWxsLlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS9sb2NhbEZvcmFnZS9wdWxsLzQyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTYXZlIHRoZSBvcmlnaW5hbCB2YWx1ZSB0byBwYXNzIHRvIHRoZSBjYWxsYmFjay5cbiAgICAgICAgdmFyIG9yaWdpbmFsVmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgZGJJbmZvLnNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLCBmdW5jdGlvbiAodmFsdWUsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGRiSW5mby5rZXlQcmVmaXggKyBrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUob3JpZ2luYWxWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvY2FsU3RvcmFnZSBjYXBhY2l0eSBleGNlZWRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IE1ha2UgdGhpcyBhIHNwZWNpZmljIGVycm9yL2V2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUubmFtZSA9PT0gJ1F1b3RhRXhjZWVkZWRFcnJvcicgfHwgZS5uYW1lID09PSAnTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRUQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIGxvY2FsU3RvcmFnZVdyYXBwZXIgPSB7XG4gICAgX2RyaXZlcjogJ2xvY2FsU3RvcmFnZVdyYXBwZXInLFxuICAgIF9pbml0U3RvcmFnZTogX2luaXRTdG9yYWdlJDIsXG4gICAgLy8gRGVmYXVsdCBBUEksIGZyb20gR2FpYS9sb2NhbFN0b3JhZ2UuXG4gICAgaXRlcmF0ZTogaXRlcmF0ZSQyLFxuICAgIGdldEl0ZW06IGdldEl0ZW0kMixcbiAgICBzZXRJdGVtOiBzZXRJdGVtJDIsXG4gICAgcmVtb3ZlSXRlbTogcmVtb3ZlSXRlbSQyLFxuICAgIGNsZWFyOiBjbGVhciQyLFxuICAgIGxlbmd0aDogbGVuZ3RoJDIsXG4gICAga2V5OiBrZXkkMixcbiAgICBrZXlzOiBrZXlzJDJcbn07XG5cbi8vIEN1c3RvbSBkcml2ZXJzIGFyZSBzdG9yZWQgaGVyZSB3aGVuIGBkZWZpbmVEcml2ZXIoKWAgaXMgY2FsbGVkLlxuLy8gVGhleSBhcmUgc2hhcmVkIGFjcm9zcyBhbGwgaW5zdGFuY2VzIG9mIGxvY2FsRm9yYWdlLlxudmFyIEN1c3RvbURyaXZlcnMgPSB7fTtcblxudmFyIERyaXZlclR5cGUgPSB7XG4gICAgSU5ERVhFRERCOiAnYXN5bmNTdG9yYWdlJyxcbiAgICBMT0NBTFNUT1JBR0U6ICdsb2NhbFN0b3JhZ2VXcmFwcGVyJyxcbiAgICBXRUJTUUw6ICd3ZWJTUUxTdG9yYWdlJ1xufTtcblxudmFyIERlZmF1bHREcml2ZXJPcmRlciA9IFtEcml2ZXJUeXBlLklOREVYRUREQiwgRHJpdmVyVHlwZS5XRUJTUUwsIERyaXZlclR5cGUuTE9DQUxTVE9SQUdFXTtcblxudmFyIExpYnJhcnlNZXRob2RzID0gWydjbGVhcicsICdnZXRJdGVtJywgJ2l0ZXJhdGUnLCAna2V5JywgJ2tleXMnLCAnbGVuZ3RoJywgJ3JlbW92ZUl0ZW0nLCAnc2V0SXRlbSddO1xuXG52YXIgRGVmYXVsdENvbmZpZyA9IHtcbiAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgZHJpdmVyOiBEZWZhdWx0RHJpdmVyT3JkZXIuc2xpY2UoKSxcbiAgICBuYW1lOiAnbG9jYWxmb3JhZ2UnLFxuICAgIC8vIERlZmF1bHQgREIgc2l6ZSBpcyBfSlVTVCBVTkRFUl8gNU1CLCBhcyBpdCdzIHRoZSBoaWdoZXN0IHNpemVcbiAgICAvLyB3ZSBjYW4gdXNlIHdpdGhvdXQgYSBwcm9tcHQuXG4gICAgc2l6ZTogNDk4MDczNixcbiAgICBzdG9yZU5hbWU6ICdrZXl2YWx1ZXBhaXJzJyxcbiAgICB2ZXJzaW9uOiAxLjBcbn07XG5cbnZhciBkcml2ZXJTdXBwb3J0ID0ge307XG4vLyBDaGVjayB0byBzZWUgaWYgSW5kZXhlZERCIGlzIGF2YWlsYWJsZSBhbmQgaWYgaXQgaXMgdGhlIGxhdGVzdFxuLy8gaW1wbGVtZW50YXRpb247IGl0J3Mgb3VyIHByZWZlcnJlZCBiYWNrZW5kIGxpYnJhcnkuIFdlIHVzZSBcIl9zcGVjX3Rlc3RcIlxuLy8gYXMgdGhlIG5hbWUgb2YgdGhlIGRhdGFiYXNlIGJlY2F1c2UgaXQncyBub3QgdGhlIG9uZSB3ZSdsbCBvcGVyYXRlIG9uLFxuLy8gYnV0IGl0J3MgdXNlZnVsIHRvIG1ha2Ugc3VyZSBpdHMgdXNpbmcgdGhlIHJpZ2h0IHNwZWMuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL2xvY2FsRm9yYWdlL2lzc3Vlcy8xMjhcbmRyaXZlclN1cHBvcnRbRHJpdmVyVHlwZS5JTkRFWEVEREJdID0gaXNJbmRleGVkREJWYWxpZCgpO1xuXG5kcml2ZXJTdXBwb3J0W0RyaXZlclR5cGUuV0VCU1FMXSA9IGlzV2ViU1FMVmFsaWQoKTtcblxuZHJpdmVyU3VwcG9ydFtEcml2ZXJUeXBlLkxPQ0FMU1RPUkFHRV0gPSBpc0xvY2FsU3RvcmFnZVZhbGlkKCk7XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAoYXJnKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmcpID09PSAnW29iamVjdCBBcnJheV0nO1xufTtcblxuZnVuY3Rpb24gY2FsbFdoZW5SZWFkeShsb2NhbEZvcmFnZUluc3RhbmNlLCBsaWJyYXJ5TWV0aG9kKSB7XG4gICAgbG9jYWxGb3JhZ2VJbnN0YW5jZVtsaWJyYXJ5TWV0aG9kXSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hcmdzID0gYXJndW1lbnRzO1xuICAgICAgICByZXR1cm4gbG9jYWxGb3JhZ2VJbnN0YW5jZS5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGxvY2FsRm9yYWdlSW5zdGFuY2VbbGlicmFyeU1ldGhvZF0uYXBwbHkobG9jYWxGb3JhZ2VJbnN0YW5jZSwgX2FyZ3MpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBleHRlbmQoKSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGFyZyA9IGFyZ3VtZW50c1tpXTtcblxuICAgICAgICBpZiAoYXJnKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYXJnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KGFyZ1trZXldKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzBdW2tleV0gPSBhcmdba2V5XS5zbGljZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzBdW2tleV0gPSBhcmdba2V5XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBhcmd1bWVudHNbMF07XG59XG5cbmZ1bmN0aW9uIGlzTGlicmFyeURyaXZlcihkcml2ZXJOYW1lKSB7XG4gICAgZm9yICh2YXIgZHJpdmVyIGluIERyaXZlclR5cGUpIHtcbiAgICAgICAgaWYgKERyaXZlclR5cGUuaGFzT3duUHJvcGVydHkoZHJpdmVyKSAmJiBEcml2ZXJUeXBlW2RyaXZlcl0gPT09IGRyaXZlck5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG52YXIgTG9jYWxGb3JhZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gTG9jYWxGb3JhZ2Uob3B0aW9ucykge1xuICAgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTG9jYWxGb3JhZ2UpO1xuXG4gICAgICAgIHRoaXMuSU5ERVhFRERCID0gRHJpdmVyVHlwZS5JTkRFWEVEREI7XG4gICAgICAgIHRoaXMuTE9DQUxTVE9SQUdFID0gRHJpdmVyVHlwZS5MT0NBTFNUT1JBR0U7XG4gICAgICAgIHRoaXMuV0VCU1FMID0gRHJpdmVyVHlwZS5XRUJTUUw7XG5cbiAgICAgICAgdGhpcy5fZGVmYXVsdENvbmZpZyA9IGV4dGVuZCh7fSwgRGVmYXVsdENvbmZpZyk7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGV4dGVuZCh7fSwgdGhpcy5fZGVmYXVsdENvbmZpZywgb3B0aW9ucyk7XG4gICAgICAgIHRoaXMuX2RyaXZlclNldCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2luaXREcml2ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLl9yZWFkeSA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9kYkluZm8gPSBudWxsO1xuXG4gICAgICAgIHRoaXMuX3dyYXBMaWJyYXJ5TWV0aG9kc1dpdGhSZWFkeSgpO1xuICAgICAgICB0aGlzLnNldERyaXZlcih0aGlzLl9jb25maWcuZHJpdmVyKVtcImNhdGNoXCJdKGZ1bmN0aW9uICgpIHt9KTtcbiAgICB9XG5cbiAgICAvLyBTZXQgYW55IGNvbmZpZyB2YWx1ZXMgZm9yIGxvY2FsRm9yYWdlOyBjYW4gYmUgY2FsbGVkIGFueXRpbWUgYmVmb3JlXG4gICAgLy8gdGhlIGZpcnN0IEFQSSBjYWxsIChlLmcuIGBnZXRJdGVtYCwgYHNldEl0ZW1gKS5cbiAgICAvLyBXZSBsb29wIHRocm91Z2ggb3B0aW9ucyBzbyB3ZSBkb24ndCBvdmVyd3JpdGUgZXhpc3RpbmcgY29uZmlnXG4gICAgLy8gdmFsdWVzLlxuXG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuY29uZmlnID0gZnVuY3Rpb24gY29uZmlnKG9wdGlvbnMpIHtcbiAgICAgICAgLy8gSWYgdGhlIG9wdGlvbnMgYXJndW1lbnQgaXMgYW4gb2JqZWN0LCB3ZSB1c2UgaXQgdG8gc2V0IHZhbHVlcy5cbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSByZXR1cm4gZWl0aGVyIGEgc3BlY2lmaWVkIGNvbmZpZyB2YWx1ZSBvciBhbGxcbiAgICAgICAgLy8gY29uZmlnIHZhbHVlcy5cbiAgICAgICAgaWYgKCh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3VuZGVmaW5lZCcgPyAndW5kZWZpbmVkJyA6IF90eXBlb2Yob3B0aW9ucykpID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgLy8gSWYgbG9jYWxmb3JhZ2UgaXMgcmVhZHkgYW5kIGZ1bGx5IGluaXRpYWxpemVkLCB3ZSBjYW4ndCBzZXRcbiAgICAgICAgICAgIC8vIGFueSBuZXcgY29uZmlndXJhdGlvbiB2YWx1ZXMuIEluc3RlYWQsIHdlIHJldHVybiBhbiBlcnJvci5cbiAgICAgICAgICAgIGlmICh0aGlzLl9yZWFkeSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoXCJDYW4ndCBjYWxsIGNvbmZpZygpIGFmdGVyIGxvY2FsZm9yYWdlIFwiICsgJ2hhcyBiZWVuIHVzZWQuJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIGlmIChpID09PSAnc3RvcmVOYW1lJykge1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25zW2ldID0gb3B0aW9uc1tpXS5yZXBsYWNlKC9cXFcvZywgJ18nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gJ3ZlcnNpb24nICYmIHR5cGVvZiBvcHRpb25zW2ldICE9PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKCdEYXRhYmFzZSB2ZXJzaW9uIG11c3QgYmUgYSBudW1iZXIuJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5fY29uZmlnW2ldID0gb3B0aW9uc1tpXTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gYWZ0ZXIgYWxsIGNvbmZpZyBvcHRpb25zIGFyZSBzZXQgYW5kXG4gICAgICAgICAgICAvLyB0aGUgZHJpdmVyIG9wdGlvbiBpcyB1c2VkLCB0cnkgc2V0dGluZyBpdFxuICAgICAgICAgICAgaWYgKCdkcml2ZXInIGluIG9wdGlvbnMgJiYgb3B0aW9ucy5kcml2ZXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXREcml2ZXIodGhpcy5fY29uZmlnLmRyaXZlcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZ1tvcHRpb25zXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb25maWc7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gVXNlZCB0byBkZWZpbmUgYSBjdXN0b20gZHJpdmVyLCBzaGFyZWQgYWNyb3NzIGFsbCBpbnN0YW5jZXMgb2ZcbiAgICAvLyBsb2NhbEZvcmFnZS5cblxuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLmRlZmluZURyaXZlciA9IGZ1bmN0aW9uIGRlZmluZURyaXZlcihkcml2ZXJPYmplY3QsIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhciBkcml2ZXJOYW1lID0gZHJpdmVyT2JqZWN0Ll9kcml2ZXI7XG4gICAgICAgICAgICAgICAgdmFyIGNvbXBsaWFuY2VFcnJvciA9IG5ldyBFcnJvcignQ3VzdG9tIGRyaXZlciBub3QgY29tcGxpYW50OyBzZWUgJyArICdodHRwczovL21vemlsbGEuZ2l0aHViLmlvL2xvY2FsRm9yYWdlLyNkZWZpbmVkcml2ZXInKTtcbiAgICAgICAgICAgICAgICB2YXIgbmFtaW5nRXJyb3IgPSBuZXcgRXJyb3IoJ0N1c3RvbSBkcml2ZXIgbmFtZSBhbHJlYWR5IGluIHVzZTogJyArIGRyaXZlck9iamVjdC5fZHJpdmVyKTtcblxuICAgICAgICAgICAgICAgIC8vIEEgZHJpdmVyIG5hbWUgc2hvdWxkIGJlIGRlZmluZWQgYW5kIG5vdCBvdmVybGFwIHdpdGggdGhlXG4gICAgICAgICAgICAgICAgLy8gbGlicmFyeS1kZWZpbmVkLCBkZWZhdWx0IGRyaXZlcnMuXG4gICAgICAgICAgICAgICAgaWYgKCFkcml2ZXJPYmplY3QuX2RyaXZlcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoY29tcGxpYW5jZUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaXNMaWJyYXJ5RHJpdmVyKGRyaXZlck9iamVjdC5fZHJpdmVyKSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QobmFtaW5nRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGN1c3RvbURyaXZlck1ldGhvZHMgPSBMaWJyYXJ5TWV0aG9kcy5jb25jYXQoJ19pbml0U3RvcmFnZScpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY3VzdG9tRHJpdmVyTWV0aG9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VzdG9tRHJpdmVyTWV0aG9kID0gY3VzdG9tRHJpdmVyTWV0aG9kc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjdXN0b21Ecml2ZXJNZXRob2QgfHwgIWRyaXZlck9iamVjdFtjdXN0b21Ecml2ZXJNZXRob2RdIHx8IHR5cGVvZiBkcml2ZXJPYmplY3RbY3VzdG9tRHJpdmVyTWV0aG9kXSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGNvbXBsaWFuY2VFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgc3VwcG9ydFByb21pc2UgPSBQcm9taXNlJDEucmVzb2x2ZSh0cnVlKTtcbiAgICAgICAgICAgICAgICBpZiAoJ19zdXBwb3J0JyBpbiBkcml2ZXJPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRyaXZlck9iamVjdC5fc3VwcG9ydCAmJiB0eXBlb2YgZHJpdmVyT2JqZWN0Ll9zdXBwb3J0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0UHJvbWlzZSA9IGRyaXZlck9iamVjdC5fc3VwcG9ydCgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3VwcG9ydFByb21pc2UgPSBQcm9taXNlJDEucmVzb2x2ZSghIWRyaXZlck9iamVjdC5fc3VwcG9ydCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzdXBwb3J0UHJvbWlzZS50aGVuKGZ1bmN0aW9uIChzdXBwb3J0UmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRyaXZlclN1cHBvcnRbZHJpdmVyTmFtZV0gPSBzdXBwb3J0UmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBDdXN0b21Ecml2ZXJzW2RyaXZlck5hbWVdID0gZHJpdmVyT2JqZWN0O1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4ZWN1dGVUd29DYWxsYmFja3MocHJvbWlzZSwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9O1xuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLmRyaXZlciA9IGZ1bmN0aW9uIGRyaXZlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RyaXZlciB8fCBudWxsO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuZ2V0RHJpdmVyID0gZnVuY3Rpb24gZ2V0RHJpdmVyKGRyaXZlck5hbWUsIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGdldERyaXZlclByb21pc2UgPSBQcm9taXNlJDEucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGlzTGlicmFyeURyaXZlcihkcml2ZXJOYW1lKSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoZHJpdmVyTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIHNlbGYuSU5ERVhFRERCOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFzeW5jU3RvcmFnZTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBzZWxmLkxPQ0FMU1RPUkFHRTpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2VXcmFwcGVyO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIHNlbGYuV0VCU1FMOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdlYlNRTFN0b3JhZ2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChDdXN0b21Ecml2ZXJzW2RyaXZlck5hbWVdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEN1c3RvbURyaXZlcnNbZHJpdmVyTmFtZV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRHJpdmVyIG5vdCBmb3VuZC4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGV4ZWN1dGVUd29DYWxsYmFja3MoZ2V0RHJpdmVyUHJvbWlzZSwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gZ2V0RHJpdmVyUHJvbWlzZTtcbiAgICB9O1xuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLmdldFNlcmlhbGl6ZXIgPSBmdW5jdGlvbiBnZXRTZXJpYWxpemVyKGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBzZXJpYWxpemVyUHJvbWlzZSA9IFByb21pc2UkMS5yZXNvbHZlKGxvY2FsZm9yYWdlU2VyaWFsaXplcik7XG4gICAgICAgIGV4ZWN1dGVUd29DYWxsYmFja3Moc2VyaWFsaXplclByb21pc2UsIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZXJQcm9taXNlO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUucmVhZHkgPSBmdW5jdGlvbiByZWFkeShjYWxsYmFjaykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHByb21pc2UgPSBzZWxmLl9kcml2ZXJTZXQudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fcmVhZHkgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9yZWFkeSA9IHNlbGYuX2luaXREcml2ZXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWR5O1xuICAgICAgICB9KTtcblxuICAgICAgICBleGVjdXRlVHdvQ2FsbGJhY2tzKHByb21pc2UsIGNhbGxiYWNrLCBjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuc2V0RHJpdmVyID0gZnVuY3Rpb24gc2V0RHJpdmVyKGRyaXZlcnMsIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBpZiAoIWlzQXJyYXkoZHJpdmVycykpIHtcbiAgICAgICAgICAgIGRyaXZlcnMgPSBbZHJpdmVyc107XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3VwcG9ydGVkRHJpdmVycyA9IHRoaXMuX2dldFN1cHBvcnRlZERyaXZlcnMoZHJpdmVycyk7XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0RHJpdmVyVG9Db25maWcoKSB7XG4gICAgICAgICAgICBzZWxmLl9jb25maWcuZHJpdmVyID0gc2VsZi5kcml2ZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGV4dGVuZFNlbGZXaXRoRHJpdmVyKGRyaXZlcikge1xuICAgICAgICAgICAgc2VsZi5fZXh0ZW5kKGRyaXZlcik7XG4gICAgICAgICAgICBzZXREcml2ZXJUb0NvbmZpZygpO1xuXG4gICAgICAgICAgICBzZWxmLl9yZWFkeSA9IHNlbGYuX2luaXRTdG9yYWdlKHNlbGYuX2NvbmZpZyk7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVhZHk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpbml0RHJpdmVyKHN1cHBvcnRlZERyaXZlcnMpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREcml2ZXJJbmRleCA9IDA7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkcml2ZXJQcm9taXNlTG9vcCgpIHtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGN1cnJlbnREcml2ZXJJbmRleCA8IHN1cHBvcnRlZERyaXZlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZHJpdmVyTmFtZSA9IHN1cHBvcnRlZERyaXZlcnNbY3VycmVudERyaXZlckluZGV4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnREcml2ZXJJbmRleCsrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9kYkluZm8gPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVhZHkgPSBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXREcml2ZXIoZHJpdmVyTmFtZSkudGhlbihleHRlbmRTZWxmV2l0aERyaXZlcilbXCJjYXRjaFwiXShkcml2ZXJQcm9taXNlTG9vcCk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzZXREcml2ZXJUb0NvbmZpZygpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoJ05vIGF2YWlsYWJsZSBzdG9yYWdlIG1ldGhvZCBmb3VuZC4nKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5fZHJpdmVyU2V0ID0gUHJvbWlzZSQxLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLl9kcml2ZXJTZXQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyaXZlclByb21pc2VMb29wKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlcmUgbWlnaHQgYmUgYSBkcml2ZXIgaW5pdGlhbGl6YXRpb24gaW4gcHJvZ3Jlc3NcbiAgICAgICAgLy8gc28gd2FpdCBmb3IgaXQgdG8gZmluaXNoIGluIG9yZGVyIHRvIGF2b2lkIGEgcG9zc2libGVcbiAgICAgICAgLy8gcmFjZSBjb25kaXRpb24gdG8gc2V0IF9kYkluZm9cbiAgICAgICAgdmFyIG9sZERyaXZlclNldERvbmUgPSB0aGlzLl9kcml2ZXJTZXQgIT09IG51bGwgPyB0aGlzLl9kcml2ZXJTZXRbXCJjYXRjaFwiXShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZSQxLnJlc29sdmUoKTtcbiAgICAgICAgfSkgOiBQcm9taXNlJDEucmVzb2x2ZSgpO1xuXG4gICAgICAgIHRoaXMuX2RyaXZlclNldCA9IG9sZERyaXZlclNldERvbmUudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZHJpdmVyTmFtZSA9IHN1cHBvcnRlZERyaXZlcnNbMF07XG4gICAgICAgICAgICBzZWxmLl9kYkluZm8gPSBudWxsO1xuICAgICAgICAgICAgc2VsZi5fcmVhZHkgPSBudWxsO1xuXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5nZXREcml2ZXIoZHJpdmVyTmFtZSkudGhlbihmdW5jdGlvbiAoZHJpdmVyKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fZHJpdmVyID0gZHJpdmVyLl9kcml2ZXI7XG4gICAgICAgICAgICAgICAgc2V0RHJpdmVyVG9Db25maWcoKTtcbiAgICAgICAgICAgICAgICBzZWxmLl93cmFwTGlicmFyeU1ldGhvZHNXaXRoUmVhZHkoKTtcbiAgICAgICAgICAgICAgICBzZWxmLl9pbml0RHJpdmVyID0gaW5pdERyaXZlcihzdXBwb3J0ZWREcml2ZXJzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldERyaXZlclRvQ29uZmlnKCk7XG4gICAgICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoJ05vIGF2YWlsYWJsZSBzdG9yYWdlIG1ldGhvZCBmb3VuZC4nKTtcbiAgICAgICAgICAgIHNlbGYuX2RyaXZlclNldCA9IFByb21pc2UkMS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RyaXZlclNldDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyh0aGlzLl9kcml2ZXJTZXQsIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RyaXZlclNldDtcbiAgICB9O1xuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLnN1cHBvcnRzID0gZnVuY3Rpb24gc3VwcG9ydHMoZHJpdmVyTmFtZSkge1xuICAgICAgICByZXR1cm4gISFkcml2ZXJTdXBwb3J0W2RyaXZlck5hbWVdO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuX2V4dGVuZCA9IGZ1bmN0aW9uIF9leHRlbmQobGlicmFyeU1ldGhvZHNBbmRQcm9wZXJ0aWVzKSB7XG4gICAgICAgIGV4dGVuZCh0aGlzLCBsaWJyYXJ5TWV0aG9kc0FuZFByb3BlcnRpZXMpO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuX2dldFN1cHBvcnRlZERyaXZlcnMgPSBmdW5jdGlvbiBfZ2V0U3VwcG9ydGVkRHJpdmVycyhkcml2ZXJzKSB7XG4gICAgICAgIHZhciBzdXBwb3J0ZWREcml2ZXJzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBkcml2ZXJzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgZHJpdmVyTmFtZSA9IGRyaXZlcnNbaV07XG4gICAgICAgICAgICBpZiAodGhpcy5zdXBwb3J0cyhkcml2ZXJOYW1lKSkge1xuICAgICAgICAgICAgICAgIHN1cHBvcnRlZERyaXZlcnMucHVzaChkcml2ZXJOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3VwcG9ydGVkRHJpdmVycztcbiAgICB9O1xuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLl93cmFwTGlicmFyeU1ldGhvZHNXaXRoUmVhZHkgPSBmdW5jdGlvbiBfd3JhcExpYnJhcnlNZXRob2RzV2l0aFJlYWR5KCkge1xuICAgICAgICAvLyBBZGQgYSBzdHViIGZvciBlYWNoIGRyaXZlciBBUEkgbWV0aG9kIHRoYXQgZGVsYXlzIHRoZSBjYWxsIHRvIHRoZVxuICAgICAgICAvLyBjb3JyZXNwb25kaW5nIGRyaXZlciBtZXRob2QgdW50aWwgbG9jYWxGb3JhZ2UgaXMgcmVhZHkuIFRoZXNlIHN0dWJzXG4gICAgICAgIC8vIHdpbGwgYmUgcmVwbGFjZWQgYnkgdGhlIGRyaXZlciBtZXRob2RzIGFzIHNvb24gYXMgdGhlIGRyaXZlciBpc1xuICAgICAgICAvLyBsb2FkZWQsIHNvIHRoZXJlIGlzIG5vIHBlcmZvcm1hbmNlIGltcGFjdC5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBMaWJyYXJ5TWV0aG9kcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY2FsbFdoZW5SZWFkeSh0aGlzLCBMaWJyYXJ5TWV0aG9kc1tpXSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLmNyZWF0ZUluc3RhbmNlID0gZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2Uob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IExvY2FsRm9yYWdlKG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTG9jYWxGb3JhZ2U7XG59KCk7XG5cbi8vIFRoZSBhY3R1YWwgbG9jYWxGb3JhZ2Ugb2JqZWN0IHRoYXQgd2UgZXhwb3NlIGFzIGEgbW9kdWxlIG9yIHZpYSBhXG4vLyBnbG9iYWwuIEl0J3MgZXh0ZW5kZWQgYnkgcHVsbGluZyBpbiBvbmUgb2Ygb3VyIG90aGVyIGxpYnJhcmllcy5cblxuXG52YXIgbG9jYWxmb3JhZ2VfanMgPSBuZXcgTG9jYWxGb3JhZ2UoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBsb2NhbGZvcmFnZV9qcztcblxufSx7XCIzXCI6M31dfSx7fSxbNF0pKDQpXG59KTsiLCIvLyBPcGVuTGF5ZXJzLiBTZWUgaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9cbi8vIExpY2Vuc2U6IGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9vcGVubGF5ZXJzL29wZW5sYXllcnMvbWFzdGVyL0xJQ0VOU0UubWRcbjsoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoW10sIGZhY3RvcnkpO1xuICB9IGVsc2Uge1xuICAgIHJvb3Qub2wgPSBmYWN0b3J5KCk7XG4gIH1cbn0odGhpcywgZnVuY3Rpb24gKCkge1xuICB2YXIgT1BFTkxBWUVSUyA9IHt9O1xuICBmb3IodmFyIGwsYWE9XCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmRlZmluZVByb3BlcnRpZXM/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXtpZihjLmdldHx8Yy5zZXQpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkVTMyBkb2VzIG5vdCBzdXBwb3J0IGdldHRlcnMgYW5kIHNldHRlcnMuXCIpO2EhPUFycmF5LnByb3RvdHlwZSYmYSE9T2JqZWN0LnByb3RvdHlwZSYmKGFbYl09Yy52YWx1ZSl9LGNhPVwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdz09PXRoaXM/dGhpczpcInVuZGVmaW5lZFwiIT10eXBlb2YgZ2xvYmFsJiZudWxsIT1nbG9iYWw/Z2xvYmFsOnRoaXMsZGE9W1wiTWF0aFwiLFwiY29zaFwiXSxlYT0wO2VhPGRhLmxlbmd0aC0xO2VhKyspe3ZhciBoYT1kYVtlYV07aGEgaW4gY2F8fChjYVtoYV09e30pO2NhPWNhW2hhXX1cbnZhciBpYT1kYVtkYS5sZW5ndGgtMV0samE9Y2FbaWFdLGthPWZ1bmN0aW9uKCl7aWYoamEpcmV0dXJuIGphO3ZhciBhPU1hdGguZXhwO3JldHVybiBmdW5jdGlvbihiKXtiPU51bWJlcihiKTtyZXR1cm4oYShiKSthKC1iKSkvMn19KCk7a2EhPWphJiZudWxsIT1rYSYmYWEoY2EsaWEse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTprYX0pO3ZhciBsYT10aGlzO2Z1bmN0aW9uIHIoYSxiKXt2YXIgYz1PUEVOTEFZRVJTLGQ9YS5zcGxpdChcIi5cIiksYz1jfHxsYTtkWzBdaW4gY3x8IWMuZXhlY1NjcmlwdHx8Yy5leGVjU2NyaXB0KFwidmFyIFwiK2RbMF0pO2Zvcih2YXIgZTtkLmxlbmd0aCYmKGU9ZC5zaGlmdCgpKTspZC5sZW5ndGh8fHZvaWQgMD09PWI/Y1tlXSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGMsZSk/Yz1jW2VdOmM9Y1tlXT17fTpjW2VdPWJ9O2Z1bmN0aW9uIG1hKGEsYil7cmV0dXJuIGE+Yj8xOmE8Yj8tMTowfWZ1bmN0aW9uIG5hKGEsYixjKXt2YXIgZD1hLmxlbmd0aDtpZihhWzBdPD1iKXJldHVybiAwO2lmKCEoYjw9YVtkLTFdKSlpZigwPGMpZm9yKGM9MTtjPGQ7KytjKXtpZihhW2NdPGIpcmV0dXJuIGMtMX1lbHNlIGlmKDA+Yylmb3IoYz0xO2M8ZDsrK2Mpe2lmKGFbY108PWIpcmV0dXJuIGN9ZWxzZSBmb3IoYz0xO2M8ZDsrK2Mpe2lmKGFbY109PWIpcmV0dXJuIGM7aWYoYVtjXTxiKXJldHVybiBhW2MtMV0tYjxiLWFbY10/Yy0xOmN9cmV0dXJuIGQtMX1mdW5jdGlvbiBvYShhLGIpe3ZhciBjLGQ9QXJyYXkuaXNBcnJheShiKT9iOltiXSxlPWQubGVuZ3RoO2ZvcihjPTA7YzxlO2MrKylhW2EubGVuZ3RoXT1kW2NdfWZ1bmN0aW9uIHBhKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoYyE9PWIubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZD0wO2Q8YztkKyspaWYoYVtkXSE9PWJbZF0pcmV0dXJuITE7cmV0dXJuITB9XG5mdW5jdGlvbiBxYShhKXt2YXIgYj1yYSxjPWEubGVuZ3RoLGQ9QXJyYXkoYS5sZW5ndGgpLGU7Zm9yKGU9MDtlPGM7ZSsrKWRbZV09e2luZGV4OmUsdmFsdWU6YVtlXX07ZC5zb3J0KGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoYS52YWx1ZSxjLnZhbHVlKXx8YS5pbmRleC1jLmluZGV4fSk7Zm9yKGU9MDtlPGEubGVuZ3RoO2UrKylhW2VdPWRbZV0udmFsdWV9ZnVuY3Rpb24gc2EoYSxiKXt2YXIgYz1ifHxtYTtyZXR1cm4gYS5ldmVyeShmdW5jdGlvbihiLGUpe2lmKCFlKXJldHVybiEwO3ZhciBkPWMoYVtlLTFdLGIpO3JldHVybiEoMDxkfHwwPT09ZCl9KX07ZnVuY3Rpb24gdChhLGIpe2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWF9ZnVuY3Rpb24gdGEoKXt9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gYS5GaHx8KGEuRmg9Kyt1YSl9dmFyIHVhPTA7ZnVuY3Rpb24gd2EoYSl7dGhpcy5tZXNzYWdlPVwiQXNzZXJ0aW9uIGZhaWxlZC4gU2VlIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vbGF0ZXN0L2RvYy9lcnJvcnMvI1wiK2ErXCIgZm9yIGRldGFpbHMuXCI7dGhpcy5jb2RlPWE7dGhpcy5uYW1lPVwiQXNzZXJ0aW9uRXJyb3JcIn10KHdhLEVycm9yKTtmdW5jdGlvbiB4KGEsYil7aWYoIWEpdGhyb3cgbmV3IHdhKGIpO307ZnVuY3Rpb24geGEoYSxiLGMsZCl7dGhpcy5NPWE7dGhpcy5PPWI7dGhpcy5QPWM7dGhpcy5TPWR9ZnVuY3Rpb24geWEoYSxiLGMpe3JldHVybiBhLk08PWImJmI8PWEuTyYmYS5QPD1jJiZjPD1hLlN9ZnVuY3Rpb24gemEoYSxiKXtyZXR1cm4gYS5NPD1iLk8mJmEuTz49Yi5NJiZhLlA8PWIuUyYmYS5TPj1iLlB9O2Z1bmN0aW9uIEFhKGEsYixjKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoYSxiKSxjKX12YXIgQmE9ZnVuY3Rpb24oKXt2YXIgYTtcImNvc2hcImluIE1hdGg/YT1NYXRoLmNvc2g6YT1mdW5jdGlvbihhKXthPU1hdGguZXhwKGEpO3JldHVybihhKzEvYSkvMn07cmV0dXJuIGF9KCk7ZnVuY3Rpb24gQ2EoYSxiLGMsZCl7YT1jLWE7Yj1kLWI7cmV0dXJuIGEqYStiKmJ9ZnVuY3Rpb24gRGEoYSl7cmV0dXJuIGEqTWF0aC5QSS8xODB9ZnVuY3Rpb24gRmEoYSxiKXt2YXIgYz1hJWI7cmV0dXJuIDA+YypiP2MrYjpjfWZ1bmN0aW9uIEdhKGEsYixjKXtyZXR1cm4gYStjKihiLWEpfTtmdW5jdGlvbiBIYShhLGIsYyl7dm9pZCAwPT09YyYmKGM9WzAsMF0pO2NbMF09YVswXSsyKmI7Y1sxXT1hWzFdKzIqYjtyZXR1cm4gY31mdW5jdGlvbiBJYShhLGIsYyl7dm9pZCAwPT09YyYmKGM9WzAsMF0pO2NbMF09YVswXSpiKy41fDA7Y1sxXT1hWzFdKmIrLjV8MDtyZXR1cm4gY31mdW5jdGlvbiBKYShhLGIpe2lmKEFycmF5LmlzQXJyYXkoYSkpcmV0dXJuIGE7dm9pZCAwPT09Yj9iPVthLGFdOmJbMF09YlsxXT1hO3JldHVybiBifTtmdW5jdGlvbiBLYShhKXtmb3IodmFyIGI9TGEoKSxjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKU1hKGIsYVtjXSk7cmV0dXJuIGJ9ZnVuY3Rpb24gTmEoYSxiLGMpe3JldHVybiBjPyhjWzBdPWFbMF0tYixjWzFdPWFbMV0tYixjWzJdPWFbMl0rYixjWzNdPWFbM10rYixjKTpbYVswXS1iLGFbMV0tYixhWzJdK2IsYVszXStiXX1mdW5jdGlvbiBPYShhLGIpe3JldHVybiBiPyhiWzBdPWFbMF0sYlsxXT1hWzFdLGJbMl09YVsyXSxiWzNdPWFbM10sYik6YS5zbGljZSgpfWZ1bmN0aW9uIFBhKGEsYixjKXtiPWI8YVswXT9hWzBdLWI6YVsyXTxiP2ItYVsyXTowO2E9YzxhWzFdP2FbMV0tYzphWzNdPGM/Yy1hWzNdOjA7cmV0dXJuIGIqYithKmF9ZnVuY3Rpb24gUWEoYSxiKXtyZXR1cm4gYVswXTw9YlswXSYmYlsyXTw9YVsyXSYmYVsxXTw9YlsxXSYmYlszXTw9YVszXX1mdW5jdGlvbiBMYSgpe3JldHVybltJbmZpbml0eSxJbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5XX1cbmZ1bmN0aW9uIFJhKGEsYixjLGQsZSl7cmV0dXJuIGU/KGVbMF09YSxlWzFdPWIsZVsyXT1jLGVbM109ZCxlKTpbYSxiLGMsZF19ZnVuY3Rpb24gU2EoYSl7cmV0dXJuIFJhKEluZmluaXR5LEluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHksYSl9ZnVuY3Rpb24gVGEoYSxiKXt2YXIgYz1hWzBdLGQ9YVsxXTtyZXR1cm4gUmEoYyxkLGMsZCxiKX1mdW5jdGlvbiBVYShhLGIpe3JldHVybiBhWzBdPT1iWzBdJiZhWzJdPT1iWzJdJiZhWzFdPT1iWzFdJiZhWzNdPT1iWzNdfWZ1bmN0aW9uIE1hKGEsYil7YlswXTxhWzBdJiYoYVswXT1iWzBdKTtiWzBdPmFbMl0mJihhWzJdPWJbMF0pO2JbMV08YVsxXSYmKGFbMV09YlsxXSk7YlsxXT5hWzNdJiYoYVszXT1iWzFdKX1cbmZ1bmN0aW9uIFZhKGEsYixjLGQsZSl7Zm9yKDtjPGQ7Yys9ZSl7dmFyIGY9YSxnPWJbY10saD1iW2MrMV07ZlswXT1NYXRoLm1pbihmWzBdLGcpO2ZbMV09TWF0aC5taW4oZlsxXSxoKTtmWzJdPU1hdGgubWF4KGZbMl0sZyk7ZlszXT1NYXRoLm1heChmWzNdLGgpfXJldHVybiBhfWZ1bmN0aW9uIFdhKGEpe3JldHVyblsoYVswXSthWzJdKS8yLChhWzFdK2FbM10pLzJdfWZ1bmN0aW9uIFhhKGEsYixjLGQsZSl7dmFyIGY9YipkWzBdLzI7ZD1iKmRbMV0vMjtiPU1hdGguY29zKGMpO3ZhciBnPU1hdGguc2luKGMpO2M9ZipiO2YqPWc7Yio9ZDt2YXIgaD1kKmcsaz1hWzBdLG09YVsxXTthPWstYytoO2Q9ay1jLWg7Zz1rK2MtaDtjPWsrYytoO3ZhciBoPW0tZi1iLGs9bS1mK2Isbj1tK2YrYixmPW0rZi1iO3JldHVybiBSYShNYXRoLm1pbihhLGQsZyxjKSxNYXRoLm1pbihoLGssbixmKSxNYXRoLm1heChhLGQsZyxjKSxNYXRoLm1heChoLGssbixmKSxlKX1cbmZ1bmN0aW9uIFlhKGEsYil7dmFyIGM9TGEoKTtaYShhLGIpJiYoY1swXT1hWzBdPmJbMF0/YVswXTpiWzBdLGNbMV09YVsxXT5iWzFdP2FbMV06YlsxXSxjWzJdPWFbMl08YlsyXT9hWzJdOmJbMl0sY1szXT1hWzNdPGJbM10/YVszXTpiWzNdKTtyZXR1cm4gY31mdW5jdGlvbiAkYShhKXtyZXR1cm5bYVswXSxhWzNdXX1mdW5jdGlvbiBhYihhKXtyZXR1cm4gYVsyXS1hWzBdfWZ1bmN0aW9uIFphKGEsYil7cmV0dXJuIGFbMF08PWJbMl0mJmFbMl0+PWJbMF0mJmFbMV08PWJbM10mJmFbM10+PWJbMV19O3ZhciBiYj1cImZ1bmN0aW9uXCI9PT10eXBlb2YgT2JqZWN0LmFzc2lnbj9PYmplY3QuYXNzaWduOmZ1bmN0aW9uKGEsYil7aWYoIWF8fG51bGw9PT1hKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3RcIik7Zm9yKHZhciBjPU9iamVjdChhKSxkPTEsZT1hcmd1bWVudHMubGVuZ3RoO2Q8ZTsrK2Qpe3ZhciBmPWFyZ3VtZW50c1tkXTtpZih2b2lkIDAhPT1mJiZudWxsIT09Zilmb3IodmFyIGcgaW4gZilmLmhhc093blByb3BlcnR5KGcpJiYoY1tnXT1mW2ddKX1yZXR1cm4gY307ZnVuY3Rpb24gY2IoYSl7Zm9yKHZhciBiIGluIGEpZGVsZXRlIGFbYl19ZnVuY3Rpb24gZGIoYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKWIucHVzaChhW2NdKTtyZXR1cm4gYn1mdW5jdGlvbiBlYihhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hYn07LypcblxuIExhdGl0dWRlL2xvbmdpdHVkZSBzcGhlcmljYWwgZ2VvZGVzeSBmb3JtdWxhZSB0YWtlbiBmcm9tXG4gaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9sYXRsb25nLmh0bWxcbiBMaWNlbnNlZCB1bmRlciBDQy1CWS0zLjAuXG4qL1xuZnVuY3Rpb24gZmIoYSl7dGhpcy5yYWRpdXM9YX1mYi5wcm90b3R5cGUuZj1mdW5jdGlvbihhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9YVtjLTFdWzBdLGU9YVtjLTFdWzFdLGY9MDtmPGM7ZisrKXZhciBnPWFbZl1bMF0saD1hW2ZdWzFdLGI9YitEYShnLWQpKigyK01hdGguc2luKERhKGUpKStNYXRoLnNpbihEYShoKSkpLGQ9ZyxlPWg7cmV0dXJuIGIqdGhpcy5yYWRpdXMqdGhpcy5yYWRpdXMvMn07ZmIucHJvdG90eXBlLmI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1EYShhWzFdKSxkPURhKGJbMV0pLGU9KGQtYykvMixmPURhKGJbMF0tYVswXSkvMixjPU1hdGguc2luKGUpKk1hdGguc2luKGUpK01hdGguc2luKGYpKk1hdGguc2luKGYpKk1hdGguY29zKGMpKk1hdGguY29zKGQpO3JldHVybiAyKnRoaXMucmFkaXVzKk1hdGguYXRhbjIoTWF0aC5zcXJ0KGMpLE1hdGguc3FydCgxLWMpKX07XG5mYi5wcm90b3R5cGUub2Zmc2V0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1EYShhWzFdKTtiLz10aGlzLnJhZGl1czt2YXIgZT1NYXRoLmFzaW4oTWF0aC5zaW4oZCkqTWF0aC5jb3MoYikrTWF0aC5jb3MoZCkqTWF0aC5zaW4oYikqTWF0aC5jb3MoYykpO3JldHVyblsxODAqKERhKGFbMF0pK01hdGguYXRhbjIoTWF0aC5zaW4oYykqTWF0aC5zaW4oYikqTWF0aC5jb3MoZCksTWF0aC5jb3MoYiktTWF0aC5zaW4oZCkqTWF0aC5zaW4oZSkpKS9NYXRoLlBJLDE4MCplL01hdGguUEldfTt2YXIgZ2I9bmV3IGZiKDYzNzA5OTcpO3ZhciBoYj17fTtoYi5kZWdyZWVzPTIqTWF0aC5QSSpnYi5yYWRpdXMvMzYwO2hiLmZ0PS4zMDQ4O2hiLm09MTtoYltcInVzLWZ0XCJdPTEyMDAvMzkzNztmdW5jdGlvbiBpYihhKXt0aGlzLklhPWEuY29kZTt0aGlzLmE9YS51bml0czt0aGlzLmo9dm9pZCAwIT09YS5leHRlbnQ/YS5leHRlbnQ6bnVsbDt0aGlzLmI9dm9pZCAwIT09YS5heGlzT3JpZW50YXRpb24/YS5heGlzT3JpZW50YXRpb246XCJlbnVcIjt0aGlzLmk9dm9pZCAwIT09YS5nbG9iYWw/YS5nbG9iYWw6ITE7dGhpcy5jPSEoIXRoaXMuaXx8IXRoaXMuaik7dGhpcy5vPWEuZ2V0UG9pbnRSZXNvbHV0aW9uO3RoaXMuZz1udWxsO3RoaXMudT1hLm1ldGVyc1BlclVuaXQ7dmFyIGI9YS5jb2RlLGM9d2luZG93LnByb2o0O1wiZnVuY3Rpb25cIj09dHlwZW9mIGMmJihiPWMuZGVmcyhiKSx2b2lkIDAhPT1iJiYodm9pZCAwIT09Yi5heGlzJiZ2b2lkIDA9PT1hLmF4aXNPcmllbnRhdGlvbiYmKHRoaXMuYj1iLmF4aXMpLHZvaWQgMD09PWEubWV0ZXJzUGVyVW5pdCYmKHRoaXMudT1iLnRvX21ldGVyKSx2b2lkIDA9PT1hLnVuaXRzJiYodGhpcy5hPWIudW5pdHMpKSl9XG5pYi5wcm90b3R5cGUuSj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmp9O2liLnByb3RvdHlwZS5mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudXx8aGJbdGhpcy5hXX07ZnVuY3Rpb24gamIoYSl7aWIuY2FsbCh0aGlzLHtjb2RlOmEsdW5pdHM6XCJtXCIsZXh0ZW50OmtiLGdsb2JhbDohMCx3b3JsZEV4dGVudDpsYixnZXRQb2ludFJlc29sdXRpb246ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYS9CYShjWzFdLzYzNzgxMzcpfX0pfXQoamIsaWIpO3ZhciBtYj02Mzc4MTM3Kk1hdGguUEksa2I9Wy1tYiwtbWIsbWIsbWJdLGxiPVstMTgwLC04NSwxODAsODVdLG5iPVwiRVBTRzozODU3IEVQU0c6MTAyMTAwIEVQU0c6MTAyMTEzIEVQU0c6OTAwOTEzIHVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuMTg6MzozODU3IHVybjpvZ2M6ZGVmOmNyczpFUFNHOjozODU3IGh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCMzODU3XCIuc3BsaXQoXCIgXCIpLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGpiKGEpfSk7XG5mdW5jdGlvbiBvYihhLGIsYyl7dmFyIGQ9YS5sZW5ndGg7Yz0xPGM/YzoyO3ZvaWQgMD09PWImJigyPGM/Yj1hLnNsaWNlKCk6Yj1BcnJheShkKSk7Zm9yKHZhciBlPTA7ZTxkO2UrPWMpe2JbZV09bWIqYVtlXS8xODA7dmFyIGY9NjM3ODEzNypNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJKihhW2UrMV0rOTApLzM2MCkpO2Y+bWI/Zj1tYjpmPC1tYiYmKGY9LW1iKTtiW2UrMV09Zn1yZXR1cm4gYn1mdW5jdGlvbiByYihhLGIsYyl7dmFyIGQ9YS5sZW5ndGg7Yz0xPGM/YzoyO3ZvaWQgMD09PWImJigyPGM/Yj1hLnNsaWNlKCk6Yj1BcnJheShkKSk7Zm9yKHZhciBlPTA7ZTxkO2UrPWMpYltlXT0xODAqYVtlXS9tYixiW2UrMV09MzYwKk1hdGguYXRhbihNYXRoLmV4cChhW2UrMV0vNjM3ODEzNykpL01hdGguUEktOTA7cmV0dXJuIGJ9O3ZhciBzYj1uZXcgZmIoNjM3ODEzNyk7ZnVuY3Rpb24gdGIoYSxiKXtpYi5jYWxsKHRoaXMse2NvZGU6YSx1bml0czpcImRlZ3JlZXNcIixleHRlbnQ6dmIsYXhpc09yaWVudGF0aW9uOmIsZ2xvYmFsOiEwLG1ldGVyc1BlclVuaXQ6d2Isd29ybGRFeHRlbnQ6dmJ9KX10KHRiLGliKTt2YXIgdmI9Wy0xODAsLTkwLDE4MCw5MF0sd2I9TWF0aC5QSSpzYi5yYWRpdXMvMTgwLHhiPVtuZXcgdGIoXCJDUlM6ODRcIiksbmV3IHRiKFwiRVBTRzo0MzI2XCIsXCJuZXVcIiksbmV3IHRiKFwidXJuOm9nYzpkZWY6Y3JzOkVQU0c6OjQzMjZcIixcIm5ldVwiKSxuZXcgdGIoXCJ1cm46b2djOmRlZjpjcnM6RVBTRzo2LjY6NDMyNlwiLFwibmV1XCIpLG5ldyB0YihcInVybjpvZ2M6ZGVmOmNyczpPR0M6MS4zOkNSUzg0XCIpLG5ldyB0YihcInVybjpvZ2M6ZGVmOmNyczpPR0M6Mjo4NFwiKSxuZXcgdGIoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjNDMyNlwiLFwibmV1XCIpLG5ldyB0YihcInVybjp4LW9nYzpkZWY6Y3JzOkVQU0c6NDMyNlwiLFwibmV1XCIpXTt2YXIgeWI9e307dmFyIHpiPXt9O2Z1bmN0aW9uIEFiKGEsYixjKXthPWEuSWE7Yj1iLklhO2EgaW4gemJ8fCh6YlthXT17fSk7emJbYV1bYl09Y31mdW5jdGlvbiBCYihhLGIpe3ZhciBjO2EgaW4gemImJmIgaW4gemJbYV0mJihjPXpiW2FdW2JdKTtyZXR1cm4gY307ZnVuY3Rpb24gQ2IoYSl7RGIoYSk7YS5mb3JFYWNoKGZ1bmN0aW9uKGIpe2EuZm9yRWFjaChmdW5jdGlvbihhKXtiIT09YSYmQWIoYixhLEViKX0pfSl9ZnVuY3Rpb24gRmIoYSl7eWJbYS5JYV09YTtBYihhLGEsRWIpfWZ1bmN0aW9uIERiKGEpe3ZhciBiPVtdO2EuZm9yRWFjaChmdW5jdGlvbihhKXtiLnB1c2goRmIoYSkpfSl9ZnVuY3Rpb24gR2IoYSl7cmV0dXJuIGE/XCJzdHJpbmdcIj09PXR5cGVvZiBhP0hiKGEpOmE6SGIoXCJFUFNHOjM4NTdcIil9ZnVuY3Rpb24gSWIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1iLmxlbmd0aDtkPXZvaWQgMCE9PWQ/ZDoyO2M9dm9pZCAwIT09Yz9jOkFycmF5KGUpO3ZhciBmLGc7Zm9yKGc9MDtnPGU7Zys9ZClmb3IoZj1hKFtiW2ddLGJbZysxXV0pLGNbZ109ZlswXSxjW2crMV09ZlsxXSxmPWQtMTsyPD1mOy0tZiljW2crZl09YltnK2ZdO3JldHVybiBjfX1cbmZ1bmN0aW9uIEhiKGEpe3ZhciBiPW51bGw7aWYoYSBpbnN0YW5jZW9mIGliKWI9YTtlbHNlIGlmKFwic3RyaW5nXCI9PT10eXBlb2YgYSl7dmFyIGI9eWJbYV18fG51bGwsYz13aW5kb3cucHJvajQ7Ynx8XCJmdW5jdGlvblwiIT10eXBlb2YgY3x8dm9pZCAwPT09Yy5kZWZzKGEpfHwoYj1uZXcgaWIoe2NvZGU6YX0pLEZiKGIpKX1yZXR1cm4gYn1mdW5jdGlvbiBKYihhLGIpe2lmKGE9PT1iKXJldHVybiEwO3ZhciBjPWEuYT09PWIuYTtyZXR1cm4gYS5JYT09PWIuSWE/YzpLYihhLGIpPT09RWImJmN9ZnVuY3Rpb24gTmIoYSxiKXt2YXIgYz1IYihhKSxkPUhiKGIpO3JldHVybiBLYihjLGQpfVxuZnVuY3Rpb24gS2IoYSxiKXt2YXIgYz1hLklhLGQ9Yi5JYSxlPUJiKGMsZCk7aWYoIWUpe3ZhciBmPXdpbmRvdy5wcm9qNDtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBmKXt2YXIgZz1mLmRlZnMoYyksaD1mLmRlZnMoZCk7dm9pZCAwIT09ZyYmdm9pZCAwIT09aCYmKGc9PT1oP0NiKFtiLGFdKTooZj1mKGQsYyksZT1mLmZvcndhcmQsZj1mLmludmVyc2UsZz1IYihiKSxoPUhiKGEpLEFiKGcsaCxJYihlKSksQWIoaCxnLEliKGYpKSksZT1CYihjLGQpKX19ZXx8KGU9T2IpO3JldHVybiBlfWZ1bmN0aW9uIE9iKGEsYil7aWYodm9pZCAwIT09YiYmYSE9PWIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyliW2NdPWFbY107YT1ifXJldHVybiBhfWZ1bmN0aW9uIEViKGEsYil7dmFyIGM7aWYodm9pZCAwIT09Yil7Yz0wO2Zvcih2YXIgZD1hLmxlbmd0aDtjPGQ7KytjKWJbY109YVtjXTtjPWJ9ZWxzZSBjPWEuc2xpY2UoKTtyZXR1cm4gY31cbmZ1bmN0aW9uIFBiKGEsYixjKXtiPU5iKGIsYyk7YT1bYVswXSxhWzFdLGFbMF0sYVszXSxhWzJdLGFbMV0sYVsyXSxhWzNdXTtiKGEsYSwyKTtjPVthWzBdLGFbMl0sYVs0XSxhWzZdXTt2YXIgZD1bYVsxXSxhWzNdLGFbNV0sYVs3XV07YT1NYXRoLm1pbi5hcHBseShudWxsLGMpO2I9TWF0aC5taW4uYXBwbHkobnVsbCxkKTtjPU1hdGgubWF4LmFwcGx5KG51bGwsYyk7ZD1NYXRoLm1heC5hcHBseShudWxsLGQpO3JldHVybiBSYShhLGIsYyxkLHZvaWQgMCl9Q2IobmIpO0NiKHhiKTt4Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe25iLmZvckVhY2goZnVuY3Rpb24oYil7QWIoYSxiLG9iKTtBYihiLGEscmIpfSl9KTtmdW5jdGlvbiBRYihhKXt0aGlzLm1pblpvb209dm9pZCAwIT09YS5taW5ab29tP2EubWluWm9vbTowO3RoaXMuYj1hLnJlc29sdXRpb25zO3goc2EodGhpcy5iLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGItYX0pLDE3KTt0aGlzLm1heFpvb209dGhpcy5iLmxlbmd0aC0xO3RoaXMuZj12b2lkIDAhPT1hLm9yaWdpbj9hLm9yaWdpbjpudWxsO3RoaXMuYT1udWxsO3ZvaWQgMCE9PWEub3JpZ2lucyYmKHRoaXMuYT1hLm9yaWdpbnMseCh0aGlzLmEubGVuZ3RoPT10aGlzLmIubGVuZ3RoLDIwKSk7dmFyIGI9YS5leHRlbnQ7dm9pZCAwPT09Ynx8dGhpcy5mfHx0aGlzLmF8fCh0aGlzLmY9JGEoYikpO3goIXRoaXMuZiYmdGhpcy5hfHx0aGlzLmYmJiF0aGlzLmEsMTgpO3RoaXMuZz1udWxsO3ZvaWQgMCE9PWEudGlsZVNpemVzJiYodGhpcy5nPWEudGlsZVNpemVzLHgodGhpcy5nLmxlbmd0aD09dGhpcy5iLmxlbmd0aCwxOSkpO3RoaXMuaT12b2lkIDAhPT1hLnRpbGVTaXplP2EudGlsZVNpemU6XG50aGlzLmc/bnVsbDoyNTY7eCghdGhpcy5pJiZ0aGlzLmd8fHRoaXMuaSYmIXRoaXMuZywyMik7dGhpcy5vPXZvaWQgMCE9PWI/YjpudWxsO3RoaXMuYz1udWxsO3RoaXMudT1bMCwwXTt2b2lkIDAhPT1hLnNpemVzP3RoaXMuYz1hLnNpemVzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gbmV3IHhhKE1hdGgubWluKDAsYVswXSksTWF0aC5tYXgoYVswXS0xLC0xKSxNYXRoLm1pbigwLGFbMV0pLE1hdGgubWF4KGFbMV0tMSwtMSkpfSx0aGlzKTpiJiZSYih0aGlzLGIpfXZhciBTYj1bMCwwLDBdO1FiLnByb3RvdHlwZS5KPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub307ZnVuY3Rpb24gVGIoYSxiLGMsZCl7VWIoYSxiWzBdLGJbMV0sYywhMSxTYik7dmFyIGU9U2JbMV0sZj1TYlsyXTtVYihhLGJbMl0sYlszXSxjLCEwLFNiKTthPVNiWzFdO2I9U2JbMl07dm9pZCAwIT09ZD8oZC5NPWUsZC5PPWEsZC5QPWYsZC5TPWIpOmQ9bmV3IHhhKGUsYSxmLGIpO3JldHVybiBkfVxuZnVuY3Rpb24gVmIoYSxiLGMsZCl7cmV0dXJuIFRiKGEsYixhLmJbY10sZCl9ZnVuY3Rpb24gV2IoYSxiKXt2YXIgYz1hLmY/YS5mOmEuYVtiWzBdXSxkPWEuYltiWzBdXSxlPUphKFhiKGEsYlswXSksYS51KTtyZXR1cm5bY1swXSsoYlsxXSsuNSkqZVswXSpkLGNbMV0rKGJbMl0rLjUpKmVbMV0qZF19ZnVuY3Rpb24gWWIoYSxiLGMpe3ZhciBkPWEuZj9hLmY6YS5hW2JbMF1dLGU9YS5iW2JbMF1dO2E9SmEoWGIoYSxiWzBdKSxhLnUpO3ZhciBmPWRbMF0rYlsxXSphWzBdKmU7Yj1kWzFdK2JbMl0qYVsxXSplO3JldHVybiBSYShmLGIsZithWzBdKmUsYithWzFdKmUsYyl9XG5mdW5jdGlvbiBVYihhLGIsYyxkLGUsZil7dmFyIGc9WmIoYSxkKSxoPWQvYS5iW2ddLGs9YS5mP2EuZjphLmFbZ107YT1KYShYYihhLGcpLGEudSk7Yj1oKk1hdGguZmxvb3IoKGIta1swXSkvZCsoZT8uNTowKSkvYVswXTtjPWgqTWF0aC5mbG9vcigoYy1rWzFdKS9kKyhlPzA6LjUpKS9hWzFdO2U/KGI9TWF0aC5jZWlsKGIpLTEsYz1NYXRoLmNlaWwoYyktMSk6KGI9TWF0aC5mbG9vcihiKSxjPU1hdGguZmxvb3IoYykpO2U9Yjt2b2lkIDAhPT1mPyhmWzBdPWcsZlsxXT1lLGZbMl09Yyk6Zj1bZyxlLGNdO3JldHVybiBmfWZ1bmN0aW9uIFhiKGEsYil7cmV0dXJuIGEuaT9hLmk6YS5nW2JdfWZ1bmN0aW9uIFpiKGEsYixjKXtyZXR1cm4gQWEobmEoYS5iLGIsY3x8MCksYS5taW5ab29tLGEubWF4Wm9vbSl9ZnVuY3Rpb24gUmIoYSxiKXtmb3IodmFyIGM9YS5iLmxlbmd0aCxkPUFycmF5KGMpLGU9YS5taW5ab29tO2U8YzsrK2UpZFtlXT1WYihhLGIsZSk7YS5jPWR9O2Z1bmN0aW9uICRiKGEpe3ZhciBiPXt9O2JiKGIsYT9hOnt9KTt2b2lkIDA9PT1iLmV4dGVudCYmKGIuZXh0ZW50PUhiKFwiRVBTRzozODU3XCIpLkooKSk7Yi5yZXNvbHV0aW9ucz1hYyhiLmV4dGVudCxiLm1heFpvb20sYi50aWxlU2l6ZSk7ZGVsZXRlIGIubWF4Wm9vbTtyZXR1cm4gbmV3IFFiKGIpfWZ1bmN0aW9uIGFjKGEsYixjKXtiPXZvaWQgMCE9PWI/Yjo0Mjt2YXIgZD1hWzNdLWFbMV07YT1hYihhKTtjPUphKHZvaWQgMCE9PWM/YzoyNTYpO2M9TWF0aC5tYXgoYS9jWzBdLGQvY1sxXSk7Yis9MTtkPUFycmF5KGIpO2ZvcihhPTA7YTxiOysrYSlkW2FdPWMvTWF0aC5wb3coMixhKTtyZXR1cm4gZH1mdW5jdGlvbiBiYyhhKXthPUhiKGEpO3ZhciBiPWEuSigpO2J8fChhPTE4MCpoYi5kZWdyZWVzL2EuZigpLGI9UmEoLWEsLWEsYSxhKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIGVjKGEpe3RoaXMuZj1hLmh0bWw7dGhpcy5iPWEudGlsZVJhbmdlcz9hLnRpbGVSYW5nZXM6bnVsbH07ZnVuY3Rpb24gZmMoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe2lmKGIpcmV0dXJuW0FhKGJbMF0sYVswXSxhWzJdKSxBYShiWzFdLGFbMV0sYVszXSldfX1mdW5jdGlvbiBnYyhhKXtyZXR1cm4gYX07ZnVuY3Rpb24gaGMoYSl7ZnVuY3Rpb24gYihiKXt2YXIgYz1hLmxpc3RlbmVyLGU9YS5KZHx8YS50YXJnZXQ7YS5NZCYmaWMoYSk7cmV0dXJuIGMuY2FsbChlLGIpfXJldHVybiBhLktkPWJ9ZnVuY3Rpb24gamMoYSxiLGMsZCl7Zm9yKHZhciBlLGY9MCxnPWEubGVuZ3RoO2Y8ZzsrK2YpaWYoZT1hW2ZdLGUubGlzdGVuZXI9PT1iJiZlLkpkPT09YylyZXR1cm4gZCYmKGUuZGVsZXRlSW5kZXg9ZiksZX1mdW5jdGlvbiBrYyhhLGIpe3ZhciBjPWEuTGE7cmV0dXJuIGM/Y1tiXTp2b2lkIDB9ZnVuY3Rpb24gbGMoYSl7dmFyIGI9YS5MYTtifHwoYj1hLkxhPXt9KTtyZXR1cm4gYn1cbmZ1bmN0aW9uIG1jKGEsYil7dmFyIGM9a2MoYSxiKTtpZihjKXtmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2Q8ZTsrK2QpYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsY1tkXS5LZCksY2IoY1tkXSk7Yy5sZW5ndGg9MDtpZihjPWEuTGEpZGVsZXRlIGNbYl0sT2JqZWN0LmtleXMoYykubGVuZ3RofHxkZWxldGUgYS5MYX19ZnVuY3Rpb24geShhLGIsYyxkLGUpe3ZhciBmPWxjKGEpLGc9ZltiXTtnfHwoZz1mW2JdPVtdKTsoZj1qYyhnLGMsZCwhMSkpP2V8fChmLk1kPSExKTooZj17SmQ6ZCxNZDohIWUsbGlzdGVuZXI6Yyx0YXJnZXQ6YSx0eXBlOmJ9LGEuYWRkRXZlbnRMaXN0ZW5lcihiLGhjKGYpKSxnLnB1c2goZikpO3JldHVybiBmfWZ1bmN0aW9uIG5jKGEsYixjLGQpeyhhPWtjKGEsYikpJiYoYz1qYyhhLGMsZCwhMCkpJiZpYyhjKX1cbmZ1bmN0aW9uIGljKGEpe2lmKGEmJmEudGFyZ2V0KXthLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGEudHlwZSxhLktkKTt2YXIgYj1rYyhhLnRhcmdldCxhLnR5cGUpO2lmKGIpe3ZhciBjPVwiZGVsZXRlSW5kZXhcImluIGE/YS5kZWxldGVJbmRleDpiLmluZGV4T2YoYSk7LTEhPT1jJiZiLnNwbGljZShjLDEpO2IubGVuZ3RofHxtYyhhLnRhcmdldCxhLnR5cGUpfWNiKGEpfX07ZnVuY3Rpb24gb2MoKXt9b2MucHJvdG90eXBlLnRiPSExO2Z1bmN0aW9uIHBjKGEpe2EudGJ8fChhLnRiPSEwLGEua2EoKSl9b2MucHJvdG90eXBlLmthPXRhO2Z1bmN0aW9uIHFjKGEpe3RoaXMudHlwZT1hO3RoaXMudGFyZ2V0PW51bGx9cWMucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PXFjLnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLlRoPSEwfTtmdW5jdGlvbiByYyhhKXthLnN0b3BQcm9wYWdhdGlvbigpfTtmdW5jdGlvbiBzYygpe3RoaXMuQWE9e307dGhpcy5nYT17fTt0aGlzLmFhPXt9fXQoc2Msb2MpO3NjLnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hYVthXTtjfHwoYz10aGlzLmFhW2FdPVtdKTstMT09PWMuaW5kZXhPZihiKSYmYy5wdXNoKGIpfTtmdW5jdGlvbiBBKGEsYil7dmFyIGM9XCJzdHJpbmdcIj09PXR5cGVvZiBiP25ldyBxYyhiKTpiLGQ9Yy50eXBlO2MudGFyZ2V0PWE7dmFyIGU9YS5hYVtkXSxmO2lmKGUpe2QgaW4gYS5nYXx8KGEuZ2FbZF09MCxhLkFhW2RdPTApOysrYS5nYVtkXTtmb3IodmFyIGc9MCxoPWUubGVuZ3RoO2c8aDsrK2cpaWYoITE9PT1lW2ddLmNhbGwoYSxjKXx8Yy5UaCl7Zj0hMTticmVha30tLWEuZ2FbZF07aWYoIWEuZ2FbZF0pe2M9YS5BYVtkXTtmb3IoZGVsZXRlIGEuQWFbZF07Yy0tOylhLnJlbW92ZUV2ZW50TGlzdGVuZXIoZCx0YSk7ZGVsZXRlIGEuZ2FbZF19cmV0dXJuIGZ9fVxuc2MucHJvdG90eXBlLmthPWZ1bmN0aW9uKCl7dmFyIGE9bGModGhpcyksYjtmb3IoYiBpbiBhKW1jKHRoaXMsYil9O2Z1bmN0aW9uIHRjKGEsYil7cmV0dXJuIGI/YiBpbiBhLmFhOjA8T2JqZWN0LmtleXMoYS5hYSkubGVuZ3RofXNjLnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hYVthXTtpZihjKXt2YXIgZD1jLmluZGV4T2YoYik7YSBpbiB0aGlzLkFhPyhjW2RdPXRhLCsrdGhpcy5BYVthXSk6KGMuc3BsaWNlKGQsMSksYy5sZW5ndGh8fGRlbGV0ZSB0aGlzLmFhW2FdKX19O2Z1bmN0aW9uIHVjKCl7c2MuY2FsbCh0aGlzKTt0aGlzLmY9MH10KHVjLHNjKTt1Yy5wcm90b3R5cGUuYj1mdW5jdGlvbigpeysrdGhpcy5mO0EodGhpcyxcImNoYW5nZVwiKX07dWMucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSxiLGMpe2lmKEFycmF5LmlzQXJyYXkoYSkpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPUFycmF5KGQpLGY9MDtmPGQ7KytmKWVbZl09eSh0aGlzLGFbZl0sYixjKTtyZXR1cm4gZX1yZXR1cm4geSh0aGlzLGEsYixjKX07dWMucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oYSxiLGMpe2lmKEFycmF5LmlzQXJyYXkoYSkpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPUFycmF5KGQpLGY9MDtmPGQ7KytmKWVbZl09eSh0aGlzLGFbZl0sYixjLCEwKTtyZXR1cm4gZX1yZXR1cm4geSh0aGlzLGEsYixjLCEwKX07XG51Yy5wcm90b3R5cGUuZmE9ZnVuY3Rpb24oYSxiLGMpe2lmKEFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7KytkKW5jKHRoaXMsYVtkXSxiLGMpO2Vsc2UgbmModGhpcyxhLGIsYyl9O2Z1bmN0aW9uIHZjKGEpe3VjLmNhbGwodGhpcyk7dyh0aGlzKTt0aGlzLks9e307dm9pZCAwIT09YSYmdGhpcy5vYShhKX10KHZjLHVjKTt2YXIgd2M9e307ZnVuY3Rpb24geGMoYSl7cmV0dXJuIHdjLmhhc093blByb3BlcnR5KGEpP3djW2FdOndjW2FdPVwiY2hhbmdlOlwiK2F9bD12Yy5wcm90b3R5cGU7bC5nZXQ9ZnVuY3Rpb24oYSl7dmFyIGI7dGhpcy5LLmhhc093blByb3BlcnR5KGEpJiYoYj10aGlzLktbYV0pO3JldHVybiBifTtsLkZhPWZ1bmN0aW9uKCl7cmV0dXJuIGJiKHt9LHRoaXMuSyl9O2Z1bmN0aW9uIHljKGEsYixjKXt2YXIgZDtkPXhjKGIpO0EoYSxuZXcgemMoZCxiLGMpKTtBKGEsbmV3IHpjKFwicHJvcGVydHljaGFuZ2VcIixiLGMpKX1sLnNldD1mdW5jdGlvbihhLGIsYyl7Yz90aGlzLktbYV09YjooYz10aGlzLktbYV0sdGhpcy5LW2FdPWIsYyE9PWImJnljKHRoaXMsYSxjKSl9O1xubC5vYT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYyBpbiBhKXRoaXMuc2V0KGMsYVtjXSxiKX07bC52aT1mdW5jdGlvbihhLGIpe2lmKGEgaW4gdGhpcy5LKXt2YXIgYz10aGlzLktbYV07ZGVsZXRlIHRoaXMuS1thXTtifHx5Yyh0aGlzLGEsYyl9fTtmdW5jdGlvbiB6YyhhLGIsYyl7cWMuY2FsbCh0aGlzLGEpO3RoaXMua2V5PWI7dGhpcy5vbGRWYWx1ZT1jfXQoemMscWMpO2Z1bmN0aW9uIEFjKGEsYil7dmMuY2FsbCh0aGlzKTt0aGlzLmM9ISEoYnx8e30pLnVuaXF1ZTt0aGlzLmE9YT9hOltdO2lmKHRoaXMuYylmb3IodmFyIGM9MCxkPXRoaXMuYS5sZW5ndGg7YzxkOysrYylCYyh0aGlzLHRoaXMuYVtjXSxjKTtDYyh0aGlzKX10KEFjLHZjKTtsPUFjLnByb3RvdHlwZTtsLmNsZWFyPWZ1bmN0aW9uKCl7Zm9yKDswPHRoaXMuV2EoKTspdGhpcy5wb3AoKX07ZnVuY3Rpb24gRGMoYSxiKXt2YXIgYyxkO2M9MDtmb3IoZD1iLmxlbmd0aDtjPGQ7KytjKWEucHVzaChiW2NdKX1sLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXt0aGlzLmEuZm9yRWFjaChhLGIpfTtsLlRmPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYX07bC5iZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hW2FdfTtsLldhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KEVjKX07bC5wb3A9ZnVuY3Rpb24oKXtyZXR1cm4gRmModGhpcyx0aGlzLldhKCktMSl9O1xubC5wdXNoPWZ1bmN0aW9uKGEpe3RoaXMuYyYmQmModGhpcyxhKTt2YXIgYj10aGlzLldhKCk7dGhpcy5jJiZCYyh0aGlzLGEpO3RoaXMuYS5zcGxpY2UoYiwwLGEpO0NjKHRoaXMpO0EodGhpcyxuZXcgR2MoXCJhZGRcIixhKSk7cmV0dXJuIHRoaXMuV2EoKX07bC5yZW1vdmU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hLGMsZDtjPTA7Zm9yKGQ9Yi5sZW5ndGg7YzxkOysrYylpZihiW2NdPT09YSlyZXR1cm4gRmModGhpcyxjKX07ZnVuY3Rpb24gRmMoYSxiKXt2YXIgYz1hLmFbYl07YS5hLnNwbGljZShiLDEpO0NjKGEpO0EoYSxuZXcgR2MoXCJyZW1vdmVcIixjKSk7cmV0dXJuIGN9ZnVuY3Rpb24gQ2MoYSl7YS5zZXQoRWMsYS5hLmxlbmd0aCl9ZnVuY3Rpb24gQmMoYSxiLGMpe2Zvcih2YXIgZD0wLGU9YS5hLmxlbmd0aDtkPGU7KytkKWlmKGEuYVtkXT09PWImJmQhPT1jKXRocm93IG5ldyB3YSg1OCk7fXZhciBFYz1cImxlbmd0aFwiO1xuZnVuY3Rpb24gR2MoYSxiKXtxYy5jYWxsKHRoaXMsYSk7dGhpcy5lbGVtZW50PWJ9dChHYyxxYyk7dmFyIEhjPS9eIyg/OlswLTlhLWZdezN9KXsxLDJ9JC9pLEljPS9eKFthLXpdKikkL2k7ZnVuY3Rpb24gSmMoYSl7aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBhKXt2YXIgYj1hWzBdO2IhPShifDApJiYoYj1iKy41fDApO3ZhciBjPWFbMV07YyE9KGN8MCkmJihjPWMrLjV8MCk7dmFyIGQ9YVsyXTtkIT0oZHwwKSYmKGQ9ZCsuNXwwKTthPVwicmdiYShcIitiK1wiLFwiK2MrXCIsXCIrZCtcIixcIisodm9pZCAwPT09YVszXT8xOmFbM10pK1wiKVwifXJldHVybiBhfVxudmFyIExjPWZ1bmN0aW9uKCl7dmFyIGE9e30sYj0wO3JldHVybiBmdW5jdGlvbihjKXt2YXIgZDtpZihhLmhhc093blByb3BlcnR5KGMpKWQ9YVtjXTtlbHNle2lmKDEwMjQ8PWIpe2Q9MDtmb3IodmFyIGUgaW4gYSlkKysmM3x8KGRlbGV0ZSBhW2VdLC0tYil9ZD1jO3ZhciBmO0ljLmV4ZWMoZCkmJihlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZS5zdHlsZS5jb2xvcj1kLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSksZD1nZXRDb21wdXRlZFN0eWxlKGUpLmNvbG9yLGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZSkpO2lmKEhjLmV4ZWMoZCkpe2Y9ZC5sZW5ndGgtMTt4KDM9PWZ8fDY9PWYsNTQpO3ZhciBnPTM9PWY/MToyO2Y9cGFyc2VJbnQoZC5zdWJzdHIoMSswKmcsZyksMTYpO2U9cGFyc2VJbnQoZC5zdWJzdHIoMSsxKmcsZyksMTYpO2Q9cGFyc2VJbnQoZC5zdWJzdHIoMSsyKmcsZyksMTYpOzE9PWcmJihmPShmPDw0KStmLGU9KGU8PDQpK2UsZD0oZDw8NCkrXG5kKTtmPVtmLGUsZCwxXX1lbHNlIGQuaW5kZXhPZihcInJnYmEoXCIpP2QuaW5kZXhPZihcInJnYihcIik/eCghMSwxNCk6KGQ9ZC5zbGljZSg0LC0xKS5zcGxpdChcIixcIikubWFwKE51bWJlciksZC5wdXNoKDEpLGY9S2MoZCkpOihkPWQuc2xpY2UoNSwtMSkuc3BsaXQoXCIsXCIpLm1hcChOdW1iZXIpLGY9S2MoZCkpO2Q9ZjthW2NdPWQ7KytifXJldHVybiBkfX0oKTtmdW5jdGlvbiBLYyhhKXt2YXIgYj1bXTtiWzBdPUFhKGFbMF0rLjV8MCwwLDI1NSk7YlsxXT1BYShhWzFdKy41fDAsMCwyNTUpO2JbMl09QWEoYVsyXSsuNXwwLDAsMjU1KTtiWzNdPUFhKGFbM10sMCwxKTtyZXR1cm4gYn07ZnVuY3Rpb24gTWMoYSl7cmV0dXJuXCJzdHJpbmdcIj09PXR5cGVvZiBhfHxhIGluc3RhbmNlb2YgQ2FudmFzUGF0dGVybnx8YSBpbnN0YW5jZW9mIENhbnZhc0dyYWRpZW50P2E6SmMoYSl9O2Z1bmN0aW9uIE5jKGEsYixjKXt0aGlzLmNlbnRlcj1hO3RoaXMucmVzb2x1dGlvbj1iO3RoaXMucm90YXRpb249Y307ZnVuY3Rpb24gT2MoYSxiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQ0FOVkFTXCIpO2EmJihjLndpZHRoPWEpO2ImJihjLmhlaWdodD1iKTtyZXR1cm4gYy5nZXRDb250ZXh0KFwiMmRcIil9ZnVuY3Rpb24gUGMoYSl7YSYmYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9O2Z1bmN0aW9uIFFjKGEpe3ZjLmNhbGwodGhpcyk7dGhpcy5lbGVtZW50PWEuZWxlbWVudD9hLmVsZW1lbnQ6bnVsbDt0aGlzLnY9dGhpcy5JPW51bGw7dGhpcy5zPVtdO3RoaXMucmVuZGVyPWEucmVuZGVyP2EucmVuZGVyOnRhO2EudGFyZ2V0JiYoYT1hLnRhcmdldCx0aGlzLkk9XCJzdHJpbmdcIj09PXR5cGVvZiBhP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpOmEpfXQoUWMsdmMpO1FjLnByb3RvdHlwZS5rYT1mdW5jdGlvbigpe1BjKHRoaXMuZWxlbWVudCk7dmMucHJvdG90eXBlLmthLmNhbGwodGhpcyl9O1xuUWMucHJvdG90eXBlLnNldE1hcD1mdW5jdGlvbihhKXt0aGlzLnYmJlBjKHRoaXMuZWxlbWVudCk7Zm9yKHZhciBiPTAsYz10aGlzLnMubGVuZ3RoO2I8YzsrK2IpaWModGhpcy5zW2JdKTt0aGlzLnMubGVuZ3RoPTA7aWYodGhpcy52PWEpKHRoaXMuST90aGlzLkk6YS52KS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMucmVuZGVyIT09dGEmJnRoaXMucy5wdXNoKHkoYSxcInBvc3RyZW5kZXJcIix0aGlzLnJlbmRlcix0aGlzKSksYS5yZW5kZXIoKX07ZnVuY3Rpb24gUmMoYSl7YT1hP2E6e307dGhpcy5HPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJVTFwiKTt0aGlzLm89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkxJXCIpO3RoaXMuRy5hcHBlbmRDaGlsZCh0aGlzLm8pO3RoaXMuby5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3RoaXMuYz12b2lkIDAhPT1hLmNvbGxhcHNlZD9hLmNvbGxhcHNlZDohMDt0aGlzLmk9dm9pZCAwIT09YS5jb2xsYXBzaWJsZT9hLmNvbGxhcHNpYmxlOiEwO3RoaXMuaXx8KHRoaXMuYz0hMSk7dmFyIGI9dm9pZCAwIT09YS5jbGFzc05hbWU/YS5jbGFzc05hbWU6XCJvbC1hdHRyaWJ1dGlvblwiLGM9dm9pZCAwIT09YS50aXBMYWJlbD9hLnRpcExhYmVsOlwiQXR0cmlidXRpb25zXCIsZD12b2lkIDAhPT1hLmNvbGxhcHNlTGFiZWw/YS5jb2xsYXBzZUxhYmVsOlwiXFx1MDBiYlwiO1wic3RyaW5nXCI9PT10eXBlb2YgZD8odGhpcy5qPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuai50ZXh0Q29udGVudD1kKTp0aGlzLmo9XG5kO2Q9dm9pZCAwIT09YS5sYWJlbD9hLmxhYmVsOlwiaVwiO1wic3RyaW5nXCI9PT10eXBlb2YgZD8odGhpcy5CPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuQi50ZXh0Q29udGVudD1kKTp0aGlzLkI9ZDt2YXIgZT10aGlzLmkmJiF0aGlzLmM/dGhpcy5qOnRoaXMuQixkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7ZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJidXR0b25cIik7ZC50aXRsZT1jO2QuYXBwZW5kQ2hpbGQoZSk7eShkLFwiY2xpY2tcIix0aGlzLlcsdGhpcyk7Yz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuY2xhc3NOYW1lPWIrXCIgb2wtdW5zZWxlY3RhYmxlIG9sLWNvbnRyb2xcIisodGhpcy5jJiZ0aGlzLmk/XCIgb2wtY29sbGFwc2VkXCI6XCJcIikrKHRoaXMuaT9cIlwiOlwiIG9sLXVuY29sbGFwc2libGVcIik7Yy5hcHBlbmRDaGlsZCh0aGlzLkcpO2MuYXBwZW5kQ2hpbGQoZCk7UWMuY2FsbCh0aGlzLHtlbGVtZW50OmMscmVuZGVyOmEucmVuZGVyP1xuYS5yZW5kZXI6U2MsdGFyZ2V0OmEudGFyZ2V0fSk7dGhpcy5DPSEwO3RoaXMuZz17fTt0aGlzLmE9e307dGhpcy5WPXt9fXQoUmMsUWMpO1xuZnVuY3Rpb24gU2MoYSl7aWYoYT1hLmZyYW1lU3RhdGUpe3ZhciBiLGMsZCxlLGYsZyxoLGssbSxuLHAscT1hLmxheWVyU3RhdGVzQXJyYXksdT1iYih7fSxhLmF0dHJpYnV0aW9ucyksRj17fSx6PXt9LEM9YS52aWV3U3RhdGUucHJvamVjdGlvbjtjPTA7Zm9yKGI9cS5sZW5ndGg7YzxiO2MrKylpZihnPXFbY10ubGF5ZXIuZGEoKSlpZihuPXcoZykudG9TdHJpbmcoKSxtPWcuVilmb3IoZD0wLGU9bS5sZW5ndGg7ZDxlO2QrKylpZihoPW1bZF0saz13KGgpLnRvU3RyaW5nKCksIShrIGluIHUpKXtpZihmPWEudXNlZFRpbGVzW25dKXt2YXIgRD1nLk1hKEMpO2E6e3A9dm9pZCAwO3ZhciBFLFEsZmE9aCxnYT1ELFg9QztpZihmYS5iKXtmb3IocCBpbiBmKWlmKHAgaW4gZmEuYil7dmFyIEQ9ZltwXSx2O1E9MDtmb3IoRT1mYS5iW3BdLmxlbmd0aDtRPEU7KytRKXt2PWZhLmJbcF1bUV07aWYoemEodixEKSl7cD0hMDticmVhayBhfXZhciBUPVZiKGdhLGJjKFgpLHBhcnNlSW50KHAsMTApKSxcbmJhPVQuTy1ULk0rMTtpZihELk08VC5NfHxELk8+VC5PKWlmKHphKHYsbmV3IHhhKEZhKEQuTSxiYSksRmEoRC5PLGJhKSxELlAsRC5TKSl8fEQuTy1ELk0rMT5iYSYmemEodixUKSl7cD0hMDticmVhayBhfX19cD0hMX1lbHNlIHA9ITB9fWVsc2UgcD0hMTtwPyhrIGluIEYmJmRlbGV0ZSBGW2tdLHA9aC5mLHAgaW4genx8KHpbcF09ITAsdVtrXT1oKSk6RltrXT1ofWI9W3UsRl07Yz1iWzBdO2I9YlsxXTtmb3IodmFyIEggaW4gdGhpcy5nKUggaW4gYz8odGhpcy5hW0hdfHwodGhpcy5nW0hdLnN0eWxlLmRpc3BsYXk9XCJcIix0aGlzLmFbSF09ITApLGRlbGV0ZSBjW0hdKTpIIGluIGI/KHRoaXMuYVtIXSYmKHRoaXMuZ1tIXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGRlbGV0ZSB0aGlzLmFbSF0pLGRlbGV0ZSBiW0hdKTooUGModGhpcy5nW0hdKSxkZWxldGUgdGhpcy5nW0hdLGRlbGV0ZSB0aGlzLmFbSF0pO2ZvcihIIGluIGMpZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiTElcIiksZC5pbm5lckhUTUw9XG5jW0hdLmYsdGhpcy5HLmFwcGVuZENoaWxkKGQpLHRoaXMuZ1tIXT1kLHRoaXMuYVtIXT0hMDtmb3IoSCBpbiBiKWQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkxJXCIpLGQuaW5uZXJIVE1MPWJbSF0uZixkLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5HLmFwcGVuZENoaWxkKGQpLHRoaXMuZ1tIXT1kO0g9IWViKHRoaXMuYSl8fCFlYihhLmxvZ29zKTt0aGlzLkMhPUgmJih0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT1IP1wiXCI6XCJub25lXCIsdGhpcy5DPUgpO0gmJmViKHRoaXMuYSk/dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvbC1sb2dvLW9ubHlcIik6dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJvbC1sb2dvLW9ubHlcIik7dmFyIE47YT1hLmxvZ29zO0g9dGhpcy5WO2ZvcihOIGluIEgpTiBpbiBhfHwoUGMoSFtOXSksZGVsZXRlIEhbTl0pO2Zvcih2YXIgRWEgaW4gYSliPWFbRWFdLGIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCYmKHRoaXMuby5hcHBlbmRDaGlsZChiKSxcbkhbRWFdPWIpLEVhIGluIEh8fChOPW5ldyBJbWFnZSxOLnNyYz1FYSxcIlwiPT09Yj9jPU46KGM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIiksYy5ocmVmPWIsYy5hcHBlbmRDaGlsZChOKSksdGhpcy5vLmFwcGVuZENoaWxkKGMpLEhbRWFdPWMpO3RoaXMuby5zdHlsZS5kaXNwbGF5PWViKGEpP1wibm9uZVwiOlwiXCJ9ZWxzZSB0aGlzLkMmJih0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLkM9ITEpfVJjLnByb3RvdHlwZS5XPWZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTtUYyh0aGlzKX07ZnVuY3Rpb24gVGMoYSl7YS5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJvbC1jb2xsYXBzZWRcIik7aWYoYS5jKXt2YXIgYj1hLkIsYz1iLnBhcmVudE5vZGU7YyYmYy5yZXBsYWNlQ2hpbGQoYS5qLGIpfWVsc2UgYj1hLmosKGM9Yi5wYXJlbnROb2RlKSYmYy5yZXBsYWNlQ2hpbGQoYS5CLGIpO2EuYz0hYS5jfVxuUmMucHJvdG90eXBlLmNhPWZ1bmN0aW9uKGEpe3RoaXMuaSE9PWEmJih0aGlzLmk9YSx0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcIm9sLXVuY29sbGFwc2libGVcIiksIWEmJnRoaXMuYyYmVGModGhpcykpfTtSYy5wcm90b3R5cGUuJD1mdW5jdGlvbihhKXt0aGlzLmkmJnRoaXMuYyE9PWEmJlRjKHRoaXMpfTtmdW5jdGlvbiBVYyhhKXtyZXR1cm4gMS1NYXRoLnBvdygxLWEsMyl9ZnVuY3Rpb24gVmMoYSl7cmV0dXJuIDMqYSphLTIqYSphKmF9ZnVuY3Rpb24gV2MoYSl7cmV0dXJuIGF9O2Z1bmN0aW9uIFhjKGEpe2E9YT9hOnt9O3ZhciBiPXZvaWQgMCE9PWEuY2xhc3NOYW1lP2EuY2xhc3NOYW1lOlwib2wtcm90YXRlXCIsYz12b2lkIDAhPT1hLmxhYmVsP2EubGFiZWw6XCJcXHUyMWU3XCI7dGhpcy5hPW51bGw7XCJzdHJpbmdcIj09PXR5cGVvZiBjPyh0aGlzLmE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksdGhpcy5hLmNsYXNzTmFtZT1cIm9sLWNvbXBhc3NcIix0aGlzLmEudGV4dENvbnRlbnQ9Yyk6KHRoaXMuYT1jLHRoaXMuYS5jbGFzc0xpc3QuYWRkKFwib2wtY29tcGFzc1wiKSk7dmFyIGQ9YS50aXBMYWJlbD9hLnRpcExhYmVsOlwiUmVzZXQgcm90YXRpb25cIixjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7Yy5jbGFzc05hbWU9YitcIi1yZXNldFwiO2Muc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiYnV0dG9uXCIpO2MudGl0bGU9ZDtjLmFwcGVuZENoaWxkKHRoaXMuYSk7eShjLFwiY2xpY2tcIixYYy5wcm90b3R5cGUubyx0aGlzKTtkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5kLmNsYXNzTmFtZT1iK1wiIG9sLXVuc2VsZWN0YWJsZSBvbC1jb250cm9sXCI7ZC5hcHBlbmRDaGlsZChjKTtiPWEucmVuZGVyP2EucmVuZGVyOlljO3RoaXMuZz1hLnJlc2V0Tm9ydGg/YS5yZXNldE5vcnRoOnZvaWQgMDtRYy5jYWxsKHRoaXMse2VsZW1lbnQ6ZCxyZW5kZXI6Yix0YXJnZXQ6YS50YXJnZXR9KTt0aGlzLmk9dm9pZCAwIT09YS5kdXJhdGlvbj9hLmR1cmF0aW9uOjI1MDt0aGlzLmM9dm9pZCAwIT09YS5hdXRvSGlkZT9hLmF1dG9IaWRlOiEwO3RoaXMuaj12b2lkIDA7dGhpcy5jJiZ0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm9sLWhpZGRlblwiKX10KFhjLFFjKTtcblhjLnByb3RvdHlwZS5vPWZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTt0aGlzLmc/dGhpcy5nKCk6KGE9dGhpcy52LlooKSkmJnZvaWQgMCE9PVpjKGEpJiYoMDx0aGlzLmk/YS5hbmltYXRlKHtyb3RhdGlvbjowLGR1cmF0aW9uOnRoaXMuaSxlYXNpbmc6VWN9KTooYS5zZXQoXCJyb3RhdGlvblwiLDApLDA8JGMoYSlbMF0mJmFkKGEpKSl9O1xuZnVuY3Rpb24gWWMoYSl7aWYoYT1hLmZyYW1lU3RhdGUpe2E9YS52aWV3U3RhdGUucm90YXRpb247aWYoYSE9dGhpcy5qKXt2YXIgYj1cInJvdGF0ZShcIithK1wicmFkKVwiO2lmKHRoaXMuYyl7dmFyIGM9dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcIm9sLWhpZGRlblwiKTtjfHxhP2MmJmEmJnRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwib2wtaGlkZGVuXCIpOnRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib2wtaGlkZGVuXCIpfXRoaXMuYS5zdHlsZS5tc1RyYW5zZm9ybT1iO3RoaXMuYS5zdHlsZS53ZWJraXRUcmFuc2Zvcm09Yjt0aGlzLmEuc3R5bGUudHJhbnNmb3JtPWJ9dGhpcy5qPWF9fTtmdW5jdGlvbiBiZChhKXthPWE/YTp7fTt2YXIgYj12b2lkIDAhPT1hLmNsYXNzTmFtZT9hLmNsYXNzTmFtZTpcIm9sLXpvb21cIixjPXZvaWQgMCE9PWEuZGVsdGE/YS5kZWx0YToxLGQ9dm9pZCAwIT09YS56b29tSW5MYWJlbD9hLnpvb21JbkxhYmVsOlwiK1wiLGU9dm9pZCAwIT09YS56b29tT3V0TGFiZWw/YS56b29tT3V0TGFiZWw6XCJcXHUyMjEyXCIsZj12b2lkIDAhPT1hLnpvb21JblRpcExhYmVsP2Euem9vbUluVGlwTGFiZWw6XCJab29tIGluXCIsZz12b2lkIDAhPT1hLnpvb21PdXRUaXBMYWJlbD9hLnpvb21PdXRUaXBMYWJlbDpcIlpvb20gb3V0XCIsaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2guY2xhc3NOYW1lPWIrXCItaW5cIjtoLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImJ1dHRvblwiKTtoLnRpdGxlPWY7aC5hcHBlbmRDaGlsZChcInN0cmluZ1wiPT09dHlwZW9mIGQ/ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZCk6ZCk7eShoLFwiY2xpY2tcIixiZC5wcm90b3R5cGUuYy5iaW5kKHRoaXMsXG5jKSk7ZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2QuY2xhc3NOYW1lPWIrXCItb3V0XCI7ZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJidXR0b25cIik7ZC50aXRsZT1nO2QuYXBwZW5kQ2hpbGQoXCJzdHJpbmdcIj09PXR5cGVvZiBlP2RvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUpOmUpO3koZCxcImNsaWNrXCIsYmQucHJvdG90eXBlLmMuYmluZCh0aGlzLC1jKSk7Yz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuY2xhc3NOYW1lPWIrXCIgb2wtdW5zZWxlY3RhYmxlIG9sLWNvbnRyb2xcIjtjLmFwcGVuZENoaWxkKGgpO2MuYXBwZW5kQ2hpbGQoZCk7UWMuY2FsbCh0aGlzLHtlbGVtZW50OmMsdGFyZ2V0OmEudGFyZ2V0fSk7dGhpcy5hPXZvaWQgMCE9PWEuZHVyYXRpb24/YS5kdXJhdGlvbjoyNTB9dChiZCxRYyk7XG5iZC5wcm90b3R5cGUuYz1mdW5jdGlvbihhLGIpe2IucHJldmVudERlZmF1bHQoKTt2YXIgYz10aGlzLnYuWigpO2lmKGMpe3ZhciBkPWMudmEoKTtkJiYoZD1jLmNvbnN0cmFpblJlc29sdXRpb24oZCxhKSwwPHRoaXMuYT8oMDwkYyhjKVswXSYmYWQoYyksYy5hbmltYXRlKHtyZXNvbHV0aW9uOmQsZHVyYXRpb246dGhpcy5hLGVhc2luZzpVY30pKTpjZChjLGQpKX19O2Z1bmN0aW9uIGRkKGEpe2E9YT9hOnt9O3ZhciBiPW5ldyBBYzsodm9pZCAwIT09YS56b29tP2Euem9vbToxKSYmYi5wdXNoKG5ldyBiZChhLnpvb21PcHRpb25zKSk7KHZvaWQgMCE9PWEucm90YXRlP2Eucm90YXRlOjEpJiZiLnB1c2gobmV3IFhjKGEucm90YXRlT3B0aW9ucykpOyh2b2lkIDAhPT1hLmF0dHJpYnV0aW9uP2EuYXR0cmlidXRpb246MSkmJmIucHVzaChuZXcgUmMoYS5hdHRyaWJ1dGlvbk9wdGlvbnMpKTtyZXR1cm4gYn07ZnVuY3Rpb24gZWQoYSxiLGMpe3FjLmNhbGwodGhpcyxhKTt0aGlzLm1hcD1iO3RoaXMuZnJhbWVTdGF0ZT12b2lkIDAhPT1jP2M6bnVsbH10KGVkLHFjKTtmdW5jdGlvbiBmZChhLGIsYyxkLGUpe2VkLmNhbGwodGhpcyxhLGIsZSk7dGhpcy5vcmlnaW5hbEV2ZW50PWM7YT1iLmEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7Yz1jLmNoYW5nZWRUb3VjaGVzP2MuY2hhbmdlZFRvdWNoZXNbMF06Yzt0aGlzLnBpeGVsPVtjLmNsaWVudFgtYS5sZWZ0LGMuY2xpZW50WS1hLnRvcF07dGhpcy5jb29yZGluYXRlPWIuRWEodGhpcy5waXhlbCk7dGhpcy5kcmFnZ2luZz12b2lkIDAhPT1kP2Q6ITF9dChmZCxlZCk7ZmQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7ZWQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0LmNhbGwodGhpcyk7dGhpcy5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCl9O2ZkLnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXtlZC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uLmNhbGwodGhpcyk7dGhpcy5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpfTt2YXIgZ2Q9e01pOlwic2luZ2xlY2xpY2tcIixBaTpcImNsaWNrXCIsQmk6XCJkYmxjbGlja1wiLEVpOlwicG9pbnRlcmRyYWdcIixIaTpcInBvaW50ZXJtb3ZlXCIsRGk6XCJwb2ludGVyZG93blwiLEtpOlwicG9pbnRlcnVwXCIsSmk6XCJwb2ludGVyb3ZlclwiLElpOlwicG9pbnRlcm91dFwiLEZpOlwicG9pbnRlcmVudGVyXCIsR2k6XCJwb2ludGVybGVhdmVcIixDaTpcInBvaW50ZXJjYW5jZWxcIn07ZnVuY3Rpb24gaGQoYSxiLGMsZCxlKXtmZC5jYWxsKHRoaXMsYSxiLGMuYixkLGUpO3RoaXMuYj1jfXQoaGQsZmQpO3ZhciBpZD1cInVuZGVmaW5lZFwiIT09dHlwZW9mIG5hdmlnYXRvcj9uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk6XCJcIixqZD0tMSE9PWlkLmluZGV4T2YoXCJmaXJlZm94XCIpLGtkPS0xIT09aWQuaW5kZXhPZihcInNhZmFyaVwiKSYmLTE9PWlkLmluZGV4T2YoXCJjaHJvbVwiKSxsZD0tMSE9PWlkLmluZGV4T2YoXCJ3ZWJraXRcIikmJi0xPT1pZC5pbmRleE9mKFwiZWRnZVwiKSxtZD0tMSE9PWlkLmluZGV4T2YoXCJtYWNpbnRvc2hcIiksbmQ9d2luZG93LmRldmljZVBpeGVsUmF0aW98fDEsb2Q9ITEscGQ9ZnVuY3Rpb24oKXtpZighKFwiSFRNTENhbnZhc0VsZW1lbnRcImluIHdpbmRvdykpcmV0dXJuITE7dHJ5e3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJDQU5WQVNcIikuZ2V0Q29udGV4dChcIjJkXCIpO3JldHVybiBhPyh2b2lkIDAhPT1hLnNldExpbmVEYXNoJiYob2Q9ITApLCEwKTohMX1jYXRjaChiKXtyZXR1cm4hMX19KCkscWQ9XCJnZW9sb2NhdGlvblwiaW4gbmF2aWdhdG9yLHJkPVxuXCJvbnRvdWNoc3RhcnRcImluIHdpbmRvdyxzZD1cIlBvaW50ZXJFdmVudFwiaW4gd2luZG93LHRkPSEhbmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQ7ZnVuY3Rpb24gdWQoYSxiKXt0aGlzLmI9YTt0aGlzLmc9Yn07ZnVuY3Rpb24gdmQoYSl7dWQuY2FsbCh0aGlzLGEse21vdXNlZG93bjp0aGlzLkVnLG1vdXNlbW92ZTp0aGlzLkZnLG1vdXNldXA6dGhpcy5JZyxtb3VzZW92ZXI6dGhpcy5IZyxtb3VzZW91dDp0aGlzLkdnfSk7dGhpcy5mPWEuZjt0aGlzLmE9W119dCh2ZCx1ZCk7ZnVuY3Rpb24gd2QoYSxiKXtmb3IodmFyIGM9YS5hLGQ9Yi5jbGllbnRYLGU9Yi5jbGllbnRZLGY9MCxnPWMubGVuZ3RoLGg7ZjxnJiYoaD1jW2ZdKTtmKyspe3ZhciBrPU1hdGguYWJzKGUtaFsxXSk7aWYoMjU+PU1hdGguYWJzKGQtaFswXSkmJjI1Pj1rKXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHhkKGEpe3ZhciBiPXlkKGEsYSksYz1iLnByZXZlbnREZWZhdWx0O2IucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXthLnByZXZlbnREZWZhdWx0KCk7YygpfTtiLnBvaW50ZXJJZD0xO2IuaXNQcmltYXJ5PSEwO2IucG9pbnRlclR5cGU9XCJtb3VzZVwiO3JldHVybiBifWw9dmQucHJvdG90eXBlO1xubC5FZz1mdW5jdGlvbihhKXtpZighd2QodGhpcyxhKSl7KDEpLnRvU3RyaW5nKClpbiB0aGlzLmYmJnRoaXMuY2FuY2VsKGEpO3ZhciBiPXhkKGEpO3RoaXMuZlsoMSkudG9TdHJpbmcoKV09YTt6ZCh0aGlzLmIsXCJwb2ludGVyZG93blwiLGIsYSl9fTtsLkZnPWZ1bmN0aW9uKGEpe2lmKCF3ZCh0aGlzLGEpKXt2YXIgYj14ZChhKTt6ZCh0aGlzLmIsXCJwb2ludGVybW92ZVwiLGIsYSl9fTtsLklnPWZ1bmN0aW9uKGEpe2lmKCF3ZCh0aGlzLGEpKXt2YXIgYj10aGlzLmZbKDEpLnRvU3RyaW5nKCldO2ImJmIuYnV0dG9uPT09YS5idXR0b24mJihiPXhkKGEpLHpkKHRoaXMuYixcInBvaW50ZXJ1cFwiLGIsYSksZGVsZXRlIHRoaXMuZlsoMSkudG9TdHJpbmcoKV0pfX07bC5IZz1mdW5jdGlvbihhKXtpZighd2QodGhpcyxhKSl7dmFyIGI9eGQoYSk7QWQodGhpcy5iLGIsYSl9fTtsLkdnPWZ1bmN0aW9uKGEpe2lmKCF3ZCh0aGlzLGEpKXt2YXIgYj14ZChhKTtCZCh0aGlzLmIsYixhKX19O1xubC5jYW5jZWw9ZnVuY3Rpb24oYSl7dmFyIGI9eGQoYSk7dGhpcy5iLmNhbmNlbChiLGEpO2RlbGV0ZSB0aGlzLmZbKDEpLnRvU3RyaW5nKCldfTtmdW5jdGlvbiBDZChhKXt1ZC5jYWxsKHRoaXMsYSx7TVNQb2ludGVyRG93bjp0aGlzLk5nLE1TUG9pbnRlck1vdmU6dGhpcy5PZyxNU1BvaW50ZXJVcDp0aGlzLlJnLE1TUG9pbnRlck91dDp0aGlzLlBnLE1TUG9pbnRlck92ZXI6dGhpcy5RZyxNU1BvaW50ZXJDYW5jZWw6dGhpcy5NZyxNU0dvdFBvaW50ZXJDYXB0dXJlOnRoaXMuS2csTVNMb3N0UG9pbnRlckNhcHR1cmU6dGhpcy5MZ30pO3RoaXMuZj1hLmY7dGhpcy5hPVtcIlwiLFwidW5hdmFpbGFibGVcIixcInRvdWNoXCIsXCJwZW5cIixcIm1vdXNlXCJdfXQoQ2QsdWQpO2Z1bmN0aW9uIERkKGEsYil7dmFyIGM9YjtcIm51bWJlclwiPT09dHlwZW9mIGIucG9pbnRlclR5cGUmJihjPXlkKGIsYiksYy5wb2ludGVyVHlwZT1hLmFbYi5wb2ludGVyVHlwZV0pO3JldHVybiBjfWw9Q2QucHJvdG90eXBlO1xubC5OZz1mdW5jdGlvbihhKXt0aGlzLmZbYS5wb2ludGVySWQudG9TdHJpbmcoKV09YTt2YXIgYj1EZCh0aGlzLGEpO3pkKHRoaXMuYixcInBvaW50ZXJkb3duXCIsYixhKX07bC5PZz1mdW5jdGlvbihhKXt2YXIgYj1EZCh0aGlzLGEpO3pkKHRoaXMuYixcInBvaW50ZXJtb3ZlXCIsYixhKX07bC5SZz1mdW5jdGlvbihhKXt2YXIgYj1EZCh0aGlzLGEpO3pkKHRoaXMuYixcInBvaW50ZXJ1cFwiLGIsYSk7ZGVsZXRlIHRoaXMuZlthLnBvaW50ZXJJZC50b1N0cmluZygpXX07bC5QZz1mdW5jdGlvbihhKXt2YXIgYj1EZCh0aGlzLGEpO0JkKHRoaXMuYixiLGEpfTtsLlFnPWZ1bmN0aW9uKGEpe3ZhciBiPURkKHRoaXMsYSk7QWQodGhpcy5iLGIsYSl9O2wuTWc9ZnVuY3Rpb24oYSl7dmFyIGI9RGQodGhpcyxhKTt0aGlzLmIuY2FuY2VsKGIsYSk7ZGVsZXRlIHRoaXMuZlthLnBvaW50ZXJJZC50b1N0cmluZygpXX07XG5sLkxnPWZ1bmN0aW9uKGEpe0EodGhpcy5iLG5ldyBFZChcImxvc3Rwb2ludGVyY2FwdHVyZVwiLGEsYSkpfTtsLktnPWZ1bmN0aW9uKGEpe0EodGhpcy5iLG5ldyBFZChcImdvdHBvaW50ZXJjYXB0dXJlXCIsYSxhKSl9O2Z1bmN0aW9uIEZkKGEpe3VkLmNhbGwodGhpcyxhLHtwb2ludGVyZG93bjp0aGlzLk1oLHBvaW50ZXJtb3ZlOnRoaXMuTmgscG9pbnRlcnVwOnRoaXMuUWgscG9pbnRlcm91dDp0aGlzLk9oLHBvaW50ZXJvdmVyOnRoaXMuUGgscG9pbnRlcmNhbmNlbDp0aGlzLkxoLGdvdHBvaW50ZXJjYXB0dXJlOnRoaXMuZWcsbG9zdHBvaW50ZXJjYXB0dXJlOnRoaXMuQ2d9KX10KEZkLHVkKTtsPUZkLnByb3RvdHlwZTtsLk1oPWZ1bmN0aW9uKGEpe0dkKHRoaXMuYixhKX07bC5OaD1mdW5jdGlvbihhKXtHZCh0aGlzLmIsYSl9O2wuUWg9ZnVuY3Rpb24oYSl7R2QodGhpcy5iLGEpfTtsLk9oPWZ1bmN0aW9uKGEpe0dkKHRoaXMuYixhKX07bC5QaD1mdW5jdGlvbihhKXtHZCh0aGlzLmIsYSl9O2wuTGg9ZnVuY3Rpb24oYSl7R2QodGhpcy5iLGEpfTtsLkNnPWZ1bmN0aW9uKGEpe0dkKHRoaXMuYixhKX07bC5lZz1mdW5jdGlvbihhKXtHZCh0aGlzLmIsYSl9O2Z1bmN0aW9uIEVkKGEsYixjKXtxYy5jYWxsKHRoaXMsYSk7dGhpcy5iPWI7YT1jP2M6e307dGhpcy5idXR0b25zPUhkKGEpO3RoaXMucHJlc3N1cmU9SWQoYSx0aGlzLmJ1dHRvbnMpO3RoaXMuYnViYmxlcz1cImJ1YmJsZXNcImluIGE/YS5idWJibGVzOiExO3RoaXMuY2FuY2VsYWJsZT1cImNhbmNlbGFibGVcImluIGE/YS5jYW5jZWxhYmxlOiExO3RoaXMudmlldz1cInZpZXdcImluIGE/YS52aWV3Om51bGw7dGhpcy5kZXRhaWw9XCJkZXRhaWxcImluIGE/YS5kZXRhaWw6bnVsbDt0aGlzLnNjcmVlblg9XCJzY3JlZW5YXCJpbiBhP2Euc2NyZWVuWDowO3RoaXMuc2NyZWVuWT1cInNjcmVlbllcImluIGE/YS5zY3JlZW5ZOjA7dGhpcy5jbGllbnRYPVwiY2xpZW50WFwiaW4gYT9hLmNsaWVudFg6MDt0aGlzLmNsaWVudFk9XCJjbGllbnRZXCJpbiBhP2EuY2xpZW50WTowO3RoaXMuYnV0dG9uPVwiYnV0dG9uXCJpbiBhP2EuYnV0dG9uOjA7dGhpcy5yZWxhdGVkVGFyZ2V0PVwicmVsYXRlZFRhcmdldFwiaW4gYT9hLnJlbGF0ZWRUYXJnZXQ6XG5udWxsO3RoaXMucG9pbnRlcklkPVwicG9pbnRlcklkXCJpbiBhP2EucG9pbnRlcklkOjA7dGhpcy53aWR0aD1cIndpZHRoXCJpbiBhP2Eud2lkdGg6MDt0aGlzLmhlaWdodD1cImhlaWdodFwiaW4gYT9hLmhlaWdodDowO3RoaXMucG9pbnRlclR5cGU9XCJwb2ludGVyVHlwZVwiaW4gYT9hLnBvaW50ZXJUeXBlOlwiXCI7dGhpcy5pc1ByaW1hcnk9XCJpc1ByaW1hcnlcImluIGE/YS5pc1ByaW1hcnk6ITE7Yi5wcmV2ZW50RGVmYXVsdCYmKHRoaXMucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtiLnByZXZlbnREZWZhdWx0KCl9KX10KEVkLHFjKTtmdW5jdGlvbiBIZChhKXtpZihhLmJ1dHRvbnN8fEpkKWE9YS5idXR0b25zO2Vsc2Ugc3dpdGNoKGEud2hpY2gpe2Nhc2UgMTphPTE7YnJlYWs7Y2FzZSAyOmE9NDticmVhaztjYXNlIDM6YT0yO2JyZWFrO2RlZmF1bHQ6YT0wfXJldHVybiBhfVxuZnVuY3Rpb24gSWQoYSxiKXt2YXIgYz0wO2EucHJlc3N1cmU/Yz1hLnByZXNzdXJlOmM9Yj8uNTowO3JldHVybiBjfXZhciBKZD0hMTt0cnl7SmQ9MT09PShuZXcgTW91c2VFdmVudChcImNsaWNrXCIse2J1dHRvbnM6MX0pKS5idXR0b25zfWNhdGNoKGEpe307ZnVuY3Rpb24gS2QoYSxiKXt1ZC5jYWxsKHRoaXMsYSx7dG91Y2hzdGFydDp0aGlzLnVpLHRvdWNobW92ZTp0aGlzLnRpLHRvdWNoZW5kOnRoaXMuc2ksdG91Y2hjYW5jZWw6dGhpcy5yaX0pO3RoaXMuZj1hLmY7dGhpcy51PWI7dGhpcy5hPXZvaWQgMDt0aGlzLmk9MDt0aGlzLmM9dm9pZCAwfXQoS2QsdWQpO2w9S2QucHJvdG90eXBlO2wuUGU9ZnVuY3Rpb24oKXt0aGlzLmk9MDt0aGlzLmM9dm9pZCAwfTtcbmZ1bmN0aW9uIExkKGEsYixjKXtiPXlkKGIsYyk7Yi5wb2ludGVySWQ9Yy5pZGVudGlmaWVyKzI7Yi5idWJibGVzPSEwO2IuY2FuY2VsYWJsZT0hMDtiLmRldGFpbD1hLmk7Yi5idXR0b249MDtiLmJ1dHRvbnM9MTtiLndpZHRoPWMud2Via2l0UmFkaXVzWHx8Yy5yYWRpdXNYfHwwO2IuaGVpZ2h0PWMud2Via2l0UmFkaXVzWXx8Yy5yYWRpdXNZfHwwO2IucHJlc3N1cmU9Yy53ZWJraXRGb3JjZXx8Yy5mb3JjZXx8LjU7Yi5pc1ByaW1hcnk9YS5hPT09Yy5pZGVudGlmaWVyO2IucG9pbnRlclR5cGU9XCJ0b3VjaFwiO2IuY2xpZW50WD1jLmNsaWVudFg7Yi5jbGllbnRZPWMuY2xpZW50WTtiLnNjcmVlblg9Yy5zY3JlZW5YO2Iuc2NyZWVuWT1jLnNjcmVlblk7cmV0dXJuIGJ9XG5mdW5jdGlvbiBNZChhLGIsYyl7ZnVuY3Rpb24gZCgpe2IucHJldmVudERlZmF1bHQoKX12YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChiLmNoYW5nZWRUb3VjaGVzKSxmPWUubGVuZ3RoLGcsaDtmb3IoZz0wO2c8ZjsrK2cpaD1MZChhLGIsZVtnXSksaC5wcmV2ZW50RGVmYXVsdD1kLGMuY2FsbChhLGIsaCl9XG5sLnVpPWZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcyxjPU9iamVjdC5rZXlzKHRoaXMuZiksZD1jLmxlbmd0aDtpZihkPj1iLmxlbmd0aCl7dmFyIGU9W10sZixnLGg7Zm9yKGY9MDtmPGQ7KytmKXtnPWNbZl07aD10aGlzLmZbZ107dmFyIGs7aWYoIShrPTE9PWcpKWE6e2Zvcih2YXIgbT1iLmxlbmd0aCxuPTA7bjxtO24rKylpZihrPWJbbl0say5pZGVudGlmaWVyPT09Zy0yKXtrPSEwO2JyZWFrIGF9az0hMX1rfHxlLnB1c2goaC5vdXQpfWZvcihmPTA7ZjxlLmxlbmd0aDsrK2YpdGhpcy5CYyhhLGVbZl0pfWI9YS5jaGFuZ2VkVG91Y2hlc1swXTtjPU9iamVjdC5rZXlzKHRoaXMuZikubGVuZ3RoO2lmKCFjfHwxPT09YyYmKDEpLnRvU3RyaW5nKClpbiB0aGlzLmYpdGhpcy5hPWIuaWRlbnRpZmllcix2b2lkIDAhPT10aGlzLmMmJmNsZWFyVGltZW91dCh0aGlzLmMpO05kKHRoaXMsYSk7dGhpcy5pKys7TWQodGhpcyxhLHRoaXMuSGgpfTtcbmwuSGg9ZnVuY3Rpb24oYSxiKXt0aGlzLmZbYi5wb2ludGVySWRdPXt0YXJnZXQ6Yi50YXJnZXQsb3V0OmIsQ2U6Yi50YXJnZXR9O3ZhciBjPXRoaXMuYjtiLmJ1YmJsZXM9ITA7emQoYyxcInBvaW50ZXJvdmVyXCIsYixhKTtjPXRoaXMuYjtiLmJ1YmJsZXM9ITE7emQoYyxcInBvaW50ZXJlbnRlclwiLGIsYSk7emQodGhpcy5iLFwicG9pbnRlcmRvd25cIixiLGEpfTtsLnRpPWZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTtNZCh0aGlzLGEsdGhpcy5KZyl9O1xubC5KZz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZltiLnBvaW50ZXJJZF07aWYoYyl7dmFyIGQ9Yy5vdXQsZT1jLkNlO3pkKHRoaXMuYixcInBvaW50ZXJtb3ZlXCIsYixhKTtkJiZlIT09Yi50YXJnZXQmJihkLnJlbGF0ZWRUYXJnZXQ9Yi50YXJnZXQsYi5yZWxhdGVkVGFyZ2V0PWUsZC50YXJnZXQ9ZSxiLnRhcmdldD8oQmQodGhpcy5iLGQsYSksQWQodGhpcy5iLGIsYSkpOihiLnRhcmdldD1lLGIucmVsYXRlZFRhcmdldD1udWxsLHRoaXMuQmMoYSxiKSkpO2Mub3V0PWI7Yy5DZT1iLnRhcmdldH19O2wuc2k9ZnVuY3Rpb24oYSl7TmQodGhpcyxhKTtNZCh0aGlzLGEsdGhpcy53aSl9O1xubC53aT1mdW5jdGlvbihhLGIpe3pkKHRoaXMuYixcInBvaW50ZXJ1cFwiLGIsYSk7dGhpcy5iLm91dChiLGEpO09kKHRoaXMuYixiLGEpO2RlbGV0ZSB0aGlzLmZbYi5wb2ludGVySWRdO2IuaXNQcmltYXJ5JiYodGhpcy5hPXZvaWQgMCx0aGlzLmM9c2V0VGltZW91dCh0aGlzLlBlLmJpbmQodGhpcyksMjAwKSl9O2wucmk9ZnVuY3Rpb24oYSl7TWQodGhpcyxhLHRoaXMuQmMpfTtsLkJjPWZ1bmN0aW9uKGEsYil7dGhpcy5iLmNhbmNlbChiLGEpO3RoaXMuYi5vdXQoYixhKTtPZCh0aGlzLmIsYixhKTtkZWxldGUgdGhpcy5mW2IucG9pbnRlcklkXTtiLmlzUHJpbWFyeSYmKHRoaXMuYT12b2lkIDAsdGhpcy5jPXNldFRpbWVvdXQodGhpcy5QZS5iaW5kKHRoaXMpLDIwMCkpfTtcbmZ1bmN0aW9uIE5kKGEsYil7dmFyIGM9YS51LmEsZD1iLmNoYW5nZWRUb3VjaGVzWzBdO2lmKGEuYT09PWQuaWRlbnRpZmllcil7dmFyIGU9W2QuY2xpZW50WCxkLmNsaWVudFldO2MucHVzaChlKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGE9Yy5pbmRleE9mKGUpOy0xPGEmJmMuc3BsaWNlKGEsMSl9LDI1MDApfX07ZnVuY3Rpb24gUGQoYSl7c2MuY2FsbCh0aGlzKTt0aGlzLmc9YTt0aGlzLmY9e307dGhpcy5jPXt9O3RoaXMuYj1bXTtzZD9RZCh0aGlzLG5ldyBGZCh0aGlzKSk6dGQ/UWQodGhpcyxuZXcgQ2QodGhpcykpOihhPW5ldyB2ZCh0aGlzKSxRZCh0aGlzLGEpLHJkJiZRZCh0aGlzLG5ldyBLZCh0aGlzLGEpKSk7YT10aGlzLmIubGVuZ3RoO2Zvcih2YXIgYixjPTA7YzxhO2MrKyliPXRoaXMuYltjXSxSZCh0aGlzLE9iamVjdC5rZXlzKGIuZykpfXQoUGQsc2MpO2Z1bmN0aW9uIFFkKGEsYil7dmFyIGM9T2JqZWN0LmtleXMoYi5nKTtjJiYoYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWIuZ1thXTtjJiYodGhpcy5jW2FdPWMuYmluZChiKSl9LGEpLGEuYi5wdXNoKGIpKX1QZC5wcm90b3R5cGUuYT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmNbYS50eXBlXTtiJiZiKGEpfTtcbmZ1bmN0aW9uIFJkKGEsYil7Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe3kodGhpcy5nLGEsdGhpcy5hLHRoaXMpfSxhKX1mdW5jdGlvbiBTZChhLGIpe2IuZm9yRWFjaChmdW5jdGlvbihhKXtuYyh0aGlzLmcsYSx0aGlzLmEsdGhpcyl9LGEpfWZ1bmN0aW9uIHlkKGEsYil7Zm9yKHZhciBjPXt9LGQsZT0wLGY9VGQubGVuZ3RoO2U8ZjtlKyspZD1UZFtlXVswXSxjW2RdPWFbZF18fGJbZF18fFRkW2VdWzFdO3JldHVybiBjfWZ1bmN0aW9uIE9kKGEsYixjKXtiLmJ1YmJsZXM9ITE7emQoYSxcInBvaW50ZXJsZWF2ZVwiLGIsYyl9UGQucHJvdG90eXBlLm91dD1mdW5jdGlvbihhLGIpe2EuYnViYmxlcz0hMDt6ZCh0aGlzLFwicG9pbnRlcm91dFwiLGEsYil9O1BkLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oYSxiKXt6ZCh0aGlzLFwicG9pbnRlcmNhbmNlbFwiLGEsYil9O1xuZnVuY3Rpb24gQmQoYSxiLGMpe2Eub3V0KGIsYyk7dmFyIGQ9Yi50YXJnZXQsZT1iLnJlbGF0ZWRUYXJnZXQ7ZCYmZSYmZC5jb250YWlucyhlKXx8T2QoYSxiLGMpfWZ1bmN0aW9uIEFkKGEsYixjKXtiLmJ1YmJsZXM9ITA7emQoYSxcInBvaW50ZXJvdmVyXCIsYixjKTt2YXIgZD1iLnRhcmdldCxlPWIucmVsYXRlZFRhcmdldDtkJiZlJiZkLmNvbnRhaW5zKGUpfHwoYi5idWJibGVzPSExLHpkKGEsXCJwb2ludGVyZW50ZXJcIixiLGMpKX1mdW5jdGlvbiB6ZChhLGIsYyxkKXtBKGEsbmV3IEVkKGIsZCxjKSl9ZnVuY3Rpb24gR2QoYSxiKXtBKGEsbmV3IEVkKGIudHlwZSxiLGIpKX1QZC5wcm90b3R5cGUua2E9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5iLmxlbmd0aCxiLGM9MDtjPGE7YysrKWI9dGhpcy5iW2NdLFNkKHRoaXMsT2JqZWN0LmtleXMoYi5nKSk7c2MucHJvdG90eXBlLmthLmNhbGwodGhpcyl9O1xudmFyIFRkPVtbXCJidWJibGVzXCIsITFdLFtcImNhbmNlbGFibGVcIiwhMV0sW1widmlld1wiLG51bGxdLFtcImRldGFpbFwiLG51bGxdLFtcInNjcmVlblhcIiwwXSxbXCJzY3JlZW5ZXCIsMF0sW1wiY2xpZW50WFwiLDBdLFtcImNsaWVudFlcIiwwXSxbXCJjdHJsS2V5XCIsITFdLFtcImFsdEtleVwiLCExXSxbXCJzaGlmdEtleVwiLCExXSxbXCJtZXRhS2V5XCIsITFdLFtcImJ1dHRvblwiLDBdLFtcInJlbGF0ZWRUYXJnZXRcIixudWxsXSxbXCJidXR0b25zXCIsMF0sW1wicG9pbnRlcklkXCIsMF0sW1wid2lkdGhcIiwwXSxbXCJoZWlnaHRcIiwwXSxbXCJwcmVzc3VyZVwiLDBdLFtcInRpbHRYXCIsMF0sW1widGlsdFlcIiwwXSxbXCJwb2ludGVyVHlwZVwiLFwiXCJdLFtcImh3VGltZXN0YW1wXCIsMF0sW1wiaXNQcmltYXJ5XCIsITFdLFtcInR5cGVcIixcIlwiXSxbXCJ0YXJnZXRcIixudWxsXSxbXCJjdXJyZW50VGFyZ2V0XCIsbnVsbF0sW1wid2hpY2hcIiwwXV07ZnVuY3Rpb24gVWQoYSl7c2MuY2FsbCh0aGlzKTt0aGlzLmE9YTt0aGlzLmk9MDt0aGlzLnU9ITE7dGhpcy5jPVtdO3RoaXMuZj1udWxsO2E9dGhpcy5hLmE7dGhpcy5CPTA7dGhpcy5LPXt9O3RoaXMuZz1uZXcgUGQoYSk7dGhpcy5iPW51bGw7dGhpcy5qPXkodGhpcy5nLFwicG9pbnRlcmRvd25cIix0aGlzLm5nLHRoaXMpO3RoaXMubz15KHRoaXMuZyxcInBvaW50ZXJtb3ZlXCIsdGhpcy5oaSx0aGlzKX10KFVkLHNjKTtmdW5jdGlvbiBWZChhLGIpe3ZhciBjPW5ldyBoZChcImNsaWNrXCIsYS5hLGIpO0EoYSxjKTthLmk/KGNsZWFyVGltZW91dChhLmkpLGEuaT0wLGM9bmV3IGhkKFwiZGJsY2xpY2tcIixhLmEsYiksQShhLGMpKTphLmk9c2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuaT0wO3ZhciBhPW5ldyBoZChcInNpbmdsZWNsaWNrXCIsdGhpcy5hLGIpO0EodGhpcyxhKX0uYmluZChhKSwyNTApfVxuZnVuY3Rpb24gV2QoYSxiKXtcInBvaW50ZXJ1cFwiPT1iLnR5cGV8fFwicG9pbnRlcmNhbmNlbFwiPT1iLnR5cGU/ZGVsZXRlIGEuS1tiLnBvaW50ZXJJZF06XCJwb2ludGVyZG93blwiPT1iLnR5cGUmJihhLktbYi5wb2ludGVySWRdPSEwKTthLkI9T2JqZWN0LmtleXMoYS5LKS5sZW5ndGh9bD1VZC5wcm90b3R5cGU7bC5ZZD1mdW5jdGlvbihhKXtXZCh0aGlzLGEpO3ZhciBiPW5ldyBoZChcInBvaW50ZXJ1cFwiLHRoaXMuYSxhKTtBKHRoaXMsYik7dGhpcy51fHxhLmJ1dHRvbnx8VmQodGhpcyx0aGlzLmYpO3RoaXMuQnx8KHRoaXMuYy5mb3JFYWNoKGljKSx0aGlzLmMubGVuZ3RoPTAsdGhpcy51PSExLHRoaXMuZj1udWxsLHBjKHRoaXMuYiksdGhpcy5iPW51bGwpfTtcbmwubmc9ZnVuY3Rpb24oYSl7V2QodGhpcyxhKTt2YXIgYj1uZXcgaGQoXCJwb2ludGVyZG93blwiLHRoaXMuYSxhKTtBKHRoaXMsYik7dGhpcy5mPWE7dGhpcy5jLmxlbmd0aHx8KHRoaXMuYj1uZXcgUGQoZG9jdW1lbnQpLHRoaXMuYy5wdXNoKHkodGhpcy5iLFwicG9pbnRlcm1vdmVcIix0aGlzLlpnLHRoaXMpLHkodGhpcy5iLFwicG9pbnRlcnVwXCIsdGhpcy5ZZCx0aGlzKSx5KHRoaXMuZyxcInBvaW50ZXJjYW5jZWxcIix0aGlzLllkLHRoaXMpKSl9O2wuWmc9ZnVuY3Rpb24oYSl7aWYoYS5jbGllbnRYIT10aGlzLmYuY2xpZW50WHx8YS5jbGllbnRZIT10aGlzLmYuY2xpZW50WSl7dGhpcy51PSEwO3ZhciBiPW5ldyBoZChcInBvaW50ZXJkcmFnXCIsdGhpcy5hLGEsdGhpcy51KTtBKHRoaXMsYil9YS5wcmV2ZW50RGVmYXVsdCgpfTtcbmwuaGk9ZnVuY3Rpb24oYSl7QSh0aGlzLG5ldyBoZChhLnR5cGUsdGhpcy5hLGEsISghdGhpcy5mfHxhLmNsaWVudFg9PXRoaXMuZi5jbGllbnRYJiZhLmNsaWVudFk9PXRoaXMuZi5jbGllbnRZKSkpfTtsLmthPWZ1bmN0aW9uKCl7dGhpcy5vJiYoaWModGhpcy5vKSx0aGlzLm89bnVsbCk7dGhpcy5qJiYoaWModGhpcy5qKSx0aGlzLmo9bnVsbCk7dGhpcy5jLmZvckVhY2goaWMpO3RoaXMuYy5sZW5ndGg9MDt0aGlzLmImJihwYyh0aGlzLmIpLHRoaXMuYj1udWxsKTt0aGlzLmcmJihwYyh0aGlzLmcpLHRoaXMuZz1udWxsKTtzYy5wcm90b3R5cGUua2EuY2FsbCh0aGlzKX07ZnVuY3Rpb24gWGQoYSxiKXt0aGlzLm89YTt0aGlzLmM9Yjt0aGlzLmI9W107dGhpcy5mPVtdO3RoaXMuYT17fX1YZC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmIubGVuZ3RoPTA7dGhpcy5mLmxlbmd0aD0wO2NiKHRoaXMuYSl9O1hkLnByb3RvdHlwZS51PWZ1bmN0aW9uKGEpe3goISh0aGlzLmMoYSlpbiB0aGlzLmEpLDMxKTt2YXIgYj10aGlzLm8oYSk7cmV0dXJuIEluZmluaXR5IT1iPyh0aGlzLmIucHVzaChhKSx0aGlzLmYucHVzaChiKSx0aGlzLmFbdGhpcy5jKGEpXT0hMCxZZCh0aGlzLDAsdGhpcy5iLmxlbmd0aC0xKSwhMCk6ITF9O2Z1bmN0aW9uIFpkKGEsYil7Zm9yKHZhciBjPWEuYixkPWEuZixlPWMubGVuZ3RoLGY9Y1tiXSxnPWRbYl0saD1iO2I8ZT4+MTspe3ZhciBrPTIqYisxLG09MipiKzIsaz1tPGUmJmRbbV08ZFtrXT9tOms7Y1tiXT1jW2tdO2RbYl09ZFtrXTtiPWt9Y1tiXT1mO2RbYl09ZztZZChhLGgsYil9XG5mdW5jdGlvbiBZZChhLGIsYyl7dmFyIGQ9YS5iO2E9YS5mO2Zvcih2YXIgZT1kW2NdLGY9YVtjXTtjPmI7KXt2YXIgZz1jLTE+PjE7aWYoYVtnXT5mKWRbY109ZFtnXSxhW2NdPWFbZ10sYz1nO2Vsc2UgYnJlYWt9ZFtjXT1lO2FbY109Zn07ZnVuY3Rpb24gJGQoYSxiKXtYZC5jYWxsKHRoaXMsZnVuY3Rpb24oYil7cmV0dXJuIGEuYXBwbHkobnVsbCxiKX0sZnVuY3Rpb24oYSl7cmV0dXJuIGFbMF0uWGEoKX0pO3RoaXMuSz1iO3RoaXMuaT0wO3RoaXMuZz17fX10KCRkLFhkKTskZC5wcm90b3R5cGUudT1mdW5jdGlvbihhKXt2YXIgYj1YZC5wcm90b3R5cGUudS5jYWxsKHRoaXMsYSk7YiYmeShhWzBdLFwiY2hhbmdlXCIsdGhpcy5qLHRoaXMpO3JldHVybiBifTskZC5wcm90b3R5cGUuaj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O3ZhciBiPWEuc3RhdGU7aWYoMj09PWJ8fDM9PT1ifHw0PT09Ynx8NT09PWIpbmMoYSxcImNoYW5nZVwiLHRoaXMuaix0aGlzKSxhPWEuWGEoKSxhIGluIHRoaXMuZyYmKGRlbGV0ZSB0aGlzLmdbYV0sLS10aGlzLmkpLHRoaXMuSygpfTtmdW5jdGlvbiBhZShhKXtyZXR1cm4gZnVuY3Rpb24oYixjLGQpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIGI9bmEoYSxiLGQpLGI9QWEoYitjLDAsYS5sZW5ndGgtMSksYz1NYXRoLmZsb29yKGIpLGIhPWMmJmM8YS5sZW5ndGgtMT9hW2NdL01hdGgucG93KGFbY10vYVtjKzFdLGItYyk6YVtjXX19ZnVuY3Rpb24gYmUoYSxiLGMpe3JldHVybiBmdW5jdGlvbihkLGUsZil7aWYodm9pZCAwIT09ZClyZXR1cm4gZD1NYXRoLm1heChNYXRoLmZsb29yKE1hdGgubG9nKGIvZCkvTWF0aC5sb2coYSkrKC1mLzIrLjUpKStlLDApLHZvaWQgMCE9PWMmJihkPU1hdGgubWluKGQsYykpLGIvTWF0aC5wb3coYSxkKX19O2Z1bmN0aW9uIGNlKGEpe2lmKHZvaWQgMCE9PWEpcmV0dXJuIDB9ZnVuY3Rpb24gZGUoYSxiKXtpZih2b2lkIDAhPT1hKXJldHVybiBhK2J9ZnVuY3Rpb24gZWUoYSl7dmFyIGI9MipNYXRoLlBJL2E7cmV0dXJuIGZ1bmN0aW9uKGEsZCl7aWYodm9pZCAwIT09YSlyZXR1cm4gYT1NYXRoLmZsb29yKChhK2QpL2IrLjUpKmJ9fWZ1bmN0aW9uIGZlKCl7dmFyIGE9RGEoNSk7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7aWYodm9pZCAwIT09YilyZXR1cm4gTWF0aC5hYnMoYitjKTw9YT8wOmIrY319O2Z1bmN0aW9uIGdlKGEpe2E9XCJcIithO3ZhciBiPWEuaW5kZXhPZihcIi5cIiksYj0tMT09PWI/YS5sZW5ndGg6YjtyZXR1cm4gMjxiP2E6QXJyYXkoMy1iKS5qb2luKFwiMFwiKSthfTtmdW5jdGlvbiBoZShhLGIpe2FbMF0rPWJbMF07YVsxXSs9YlsxXX1mdW5jdGlvbiBpZShhLGIpe3ZhciBjPWFbMF0sZD1hWzFdLGU9YlswXSxmPWJbMV0sZz1lWzBdLGU9ZVsxXSxoPWZbMF0sZj1mWzFdLGs9aC1nLG09Zi1lLGM9a3x8bT8oayooYy1nKSttKihkLWUpKS8oayprK20qbXx8MCk6MDswPj1jfHwoMTw9Yz8oZz1oLGU9Zik6KGcrPWMqayxlKz1jKm0pKTtyZXR1cm5bZyxlXX1mdW5jdGlvbiBqZShhLGIpe2Zvcih2YXIgYz0hMCxkPWEubGVuZ3RoLTE7MDw9ZDstLWQpaWYoYVtkXSE9YltkXSl7Yz0hMTticmVha31yZXR1cm4gY31mdW5jdGlvbiBrZShhLGIpe3ZhciBjPU1hdGguY29zKGIpLGQ9TWF0aC5zaW4oYiksZT1hWzFdKmMrYVswXSpkO2FbMF09YVswXSpjLWFbMV0qZDthWzFdPWV9ZnVuY3Rpb24gbGUoYSxiKXthWzBdKj1iO2FbMV0qPWJ9ZnVuY3Rpb24gbWUoYSxiKXt2YXIgYz1hWzBdLWJbMF0sZD1hWzFdLWJbMV07cmV0dXJuIGMqYytkKmR9XG5mdW5jdGlvbiBuZShhLGIpe3JldHVybiBNYXRoLnNxcnQobWUoYSxiKSl9ZnVuY3Rpb24gb2UoYSxiKXtyZXR1cm4gbWUoYSxpZShhLGIpKX07ZnVuY3Rpb24gcGUoKXtyZXR1cm4hMH1mdW5jdGlvbiBxZSgpe3JldHVybiExfTtmdW5jdGlvbiByZSgpe3ZjLmNhbGwodGhpcyk7dGhpcy5vPUxhKCk7dGhpcy5CPS0xO3RoaXMuYz17fTt0aGlzLmo9dGhpcy5nPTB9dChyZSx2Yyk7cmUucHJvdG90eXBlLko9ZnVuY3Rpb24oYSl7dGhpcy5CIT10aGlzLmYmJih0aGlzLm89dGhpcy5SYih0aGlzLm8pLHRoaXMuQj10aGlzLmYpO3ZhciBiPXRoaXMubzthPyhhWzBdPWJbMF0sYVsxXT1iWzFdLGFbMl09YlsyXSxhWzNdPWJbM10pOmE9YjtyZXR1cm4gYX07cmUucHJvdG90eXBlLkM9ZnVuY3Rpb24oYSxiKXt0aGlzLnZiKE5iKGEsYikpO3JldHVybiB0aGlzfTtmdW5jdGlvbiBzZShhLGIsYyxkLGUsZil7Zm9yKHZhciBnPWY/ZjpbXSxoPTA7YjxjO2IrPWQpe3ZhciBrPWFbYl0sbT1hW2IrMV07Z1toKytdPWVbMF0qaytlWzJdKm0rZVs0XTtnW2grK109ZVsxXSprK2VbM10qbStlWzVdfWYmJmcubGVuZ3RoIT1oJiYoZy5sZW5ndGg9aCk7cmV0dXJuIGd9O2Z1bmN0aW9uIHRlKCl7cmUuY2FsbCh0aGlzKTt0aGlzLlg9XCJYWVwiO3RoaXMuQT0yO3RoaXMubD1udWxsfXQodGUscmUpO2Z1bmN0aW9uIHVlKGEpe3ZhciBiO1wiWFlcIj09YT9iPTI6XCJYWVpcIj09YXx8XCJYWU1cIj09YT9iPTM6XCJYWVpNXCI9PWEmJihiPTQpO3JldHVybiBifWw9dGUucHJvdG90eXBlO2wuUmI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sLGM9dGhpcy5sLmxlbmd0aCxkPXRoaXMuQTthPVNhKGEpO3JldHVybiBWYShhLGIsMCxjLGQpfTtsLkViPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubC5zbGljZSgwLHRoaXMuQSl9O2wuJGY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sLnNsaWNlKHRoaXMubC5sZW5ndGgtdGhpcy5BKX07XG5sLlJjPWZ1bmN0aW9uKGEpe3RoaXMuaiE9dGhpcy5mJiYoY2IodGhpcy5jKSx0aGlzLmc9MCx0aGlzLmo9dGhpcy5mKTtpZigwPmF8fHRoaXMuZyYmYTw9dGhpcy5nKXJldHVybiB0aGlzO3ZhciBiPWEudG9TdHJpbmcoKTtpZih0aGlzLmMuaGFzT3duUHJvcGVydHkoYikpcmV0dXJuIHRoaXMuY1tiXTt2YXIgYz10aGlzLmliKGEpO2lmKGMubC5sZW5ndGg8dGhpcy5sLmxlbmd0aClyZXR1cm4gdGhpcy5jW2JdPWM7dGhpcy5nPWE7cmV0dXJuIHRoaXN9O2wuaWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307ZnVuY3Rpb24gdmUoYSxiLGMpe2EuQT11ZShiKTthLlg9YjthLmw9Y31cbmZ1bmN0aW9uIHdlKGEsYixjLGQpe2lmKGIpYz11ZShiKTtlbHNle2ZvcihiPTA7YjxkOysrYilpZihjLmxlbmd0aCljPWNbMF07ZWxzZXthLlg9XCJYWVwiO2EuQT0yO3JldHVybn1jPWMubGVuZ3RoO3ZhciBlOzI9PWM/ZT1cIlhZXCI6Mz09Yz9lPVwiWFlaXCI6ND09YyYmKGU9XCJYWVpNXCIpO2I9ZX1hLlg9YjthLkE9Y31sLnZiPWZ1bmN0aW9uKGEpe3RoaXMubCYmKGEodGhpcy5sLHRoaXMubCx0aGlzLkEpLHRoaXMuYigpKX07bC5yb3RhdGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmw7aWYoYyl7Zm9yKHZhciBkPWMubGVuZ3RoLGU9dGhpcy5BLGY9Yz9jOltdLGc9TWF0aC5jb3MoYSksaD1NYXRoLnNpbihhKSxrPWJbMF0sbT1iWzFdLG49MCxwPTA7cDxkO3ArPWUpe3ZhciBxPWNbcF0tayx1PWNbcCsxXS1tO2ZbbisrXT1rK3EqZy11Kmg7ZltuKytdPW0rcSpoK3UqZztmb3IocT1wKzI7cTxwK2U7KytxKWZbbisrXT1jW3FdfWMmJmYubGVuZ3RoIT1uJiYoZi5sZW5ndGg9bik7dGhpcy5iKCl9fTtcbmwuc2NhbGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWI7dm9pZCAwPT09ZCYmKGQ9YSk7dmFyIGU9YztlfHwoZT1XYSh0aGlzLkooKSkpO2lmKGM9dGhpcy5sKXtiPWMubGVuZ3RoO2Zvcih2YXIgZj10aGlzLkEsZz1jP2M6W10saD1lWzBdLGU9ZVsxXSxrPTAsbT0wO208YjttKz1mKXt2YXIgbj1jW21dLWgscD1jW20rMV0tZTtnW2srK109aCthKm47Z1trKytdPWUrZCpwO2ZvcihuPW0rMjtuPG0rZjsrK24pZ1trKytdPWNbbl19YyYmZy5sZW5ndGghPWsmJihnLmxlbmd0aD1rKTt0aGlzLmIoKX19O2Z1bmN0aW9uIHhlKGEsYixjLGQpe3ZhciBlPTAsZixnO2Y9MDtmb3IoZz1jLmxlbmd0aDtmPGc7KytmKXtmb3IodmFyIGg9Y1tmXSxrPTAsbT1hW2gtZF0sbj1hW2gtZCsxXTtiPGg7Yis9ZCl2YXIgcD1hW2JdLHE9YVtiKzFdLGs9aysobipwLW0qcSksbT1wLG49cTtlKz1rLzI7Yj1ofXJldHVybiBlfTtmdW5jdGlvbiB5ZShhLGIsYyxkLGUsZixnKXt2YXIgaD1hW2JdLGs9YVtiKzFdLG09YVtjXS1oLG49YVtjKzFdLWs7aWYobXx8bilpZihmPSgoZS1oKSptKyhmLWspKm4pLyhtKm0rbipuKSwxPGYpYj1jO2Vsc2UgaWYoMDxmKXtmb3IoZT0wO2U8ZDsrK2UpZ1tlXT1HYShhW2IrZV0sYVtjK2VdLGYpO2cubGVuZ3RoPWQ7cmV0dXJufWZvcihlPTA7ZTxkOysrZSlnW2VdPWFbYitlXTtnLmxlbmd0aD1kfWZ1bmN0aW9uIHplKGEsYixjLGQsZSl7dmFyIGY9YVtiXSxnPWFbYisxXTtmb3IoYis9ZDtiPGM7Yis9ZCl7dmFyIGg9YVtiXSxrPWFbYisxXSxmPUNhKGYsZyxoLGspO2Y+ZSYmKGU9Zik7Zj1oO2c9a31yZXR1cm4gZX1mdW5jdGlvbiBBZShhLGIsYyxkLGUpe3ZhciBmLGc7Zj0wO2ZvcihnPWMubGVuZ3RoO2Y8ZzsrK2Ype3ZhciBoPWNbZl07ZT16ZShhLGIsaCxkLGUpO2I9aH1yZXR1cm4gZX1cbmZ1bmN0aW9uIEJlKGEsYixjLGQsZSxmLGcsaCxrLG0sbil7aWYoYj09YylyZXR1cm4gbTt2YXIgcDtpZighZSl7cD1DYShnLGgsYVtiXSxhW2IrMV0pO2lmKHA8bSl7Zm9yKG49MDtuPGQ7KytuKWtbbl09YVtiK25dO2subGVuZ3RoPWQ7cmV0dXJuIHB9cmV0dXJuIG19Zm9yKHZhciBxPW4/bjpbTmFOLE5hTl0sdT1iK2Q7dTxjOylpZih5ZShhLHUtZCx1LGQsZyxoLHEpLHA9Q2EoZyxoLHFbMF0scVsxXSkscDxtKXttPXA7Zm9yKG49MDtuPGQ7KytuKWtbbl09cVtuXTtrLmxlbmd0aD1kO3UrPWR9ZWxzZSB1Kz1kKk1hdGgubWF4KChNYXRoLnNxcnQocCktTWF0aC5zcXJ0KG0pKS9lfDAsMSk7aWYoZiYmKHllKGEsYy1kLGIsZCxnLGgscSkscD1DYShnLGgscVswXSxxWzFdKSxwPG0pKXttPXA7Zm9yKG49MDtuPGQ7KytuKWtbbl09cVtuXTtrLmxlbmd0aD1kfXJldHVybiBtfVxuZnVuY3Rpb24gQ2UoYSxiLGMsZCxlLGYsZyxoLGssbSxuKXtuPW4/bjpbTmFOLE5hTl07dmFyIHAscTtwPTA7Zm9yKHE9Yy5sZW5ndGg7cDxxOysrcCl7dmFyIHU9Y1twXTttPUJlKGEsYix1LGQsZSxmLGcsaCxrLG0sbik7Yj11fXJldHVybiBtfTtmdW5jdGlvbiBEZShhLGIpe3ZhciBjPTAsZCxlO2Q9MDtmb3IoZT1iLmxlbmd0aDtkPGU7KytkKWFbYysrXT1iW2RdO3JldHVybiBjfWZ1bmN0aW9uIEVlKGEsYixjLGQpe3ZhciBlLGY7ZT0wO2ZvcihmPWMubGVuZ3RoO2U8ZjsrK2Upe3ZhciBnPWNbZV0saDtmb3IoaD0wO2g8ZDsrK2gpYVtiKytdPWdbaF19cmV0dXJuIGJ9ZnVuY3Rpb24gRmUoYSxiLGMsZCxlKXtlPWU/ZTpbXTt2YXIgZj0wLGcsaDtnPTA7Zm9yKGg9Yy5sZW5ndGg7ZzxoOysrZyliPUVlKGEsYixjW2ddLGQpLGVbZisrXT1iO2UubGVuZ3RoPWY7cmV0dXJuIGV9O2Z1bmN0aW9uIEdlKGEsYixjLGQsZSl7ZT12b2lkIDAhPT1lP2U6W107Zm9yKHZhciBmPTA7YjxjO2IrPWQpZVtmKytdPWEuc2xpY2UoYixiK2QpO2UubGVuZ3RoPWY7cmV0dXJuIGV9ZnVuY3Rpb24gSGUoYSxiLGMsZCxlKXtlPXZvaWQgMCE9PWU/ZTpbXTt2YXIgZj0wLGcsaDtnPTA7Zm9yKGg9Yy5sZW5ndGg7ZzxoOysrZyl7dmFyIGs9Y1tnXTtlW2YrK109R2UoYSxiLGssZCxlW2ZdKTtiPWt9ZS5sZW5ndGg9ZjtyZXR1cm4gZX07ZnVuY3Rpb24gSWUoYSxiLGMsZCxlLGYsZyl7dmFyIGg9KGMtYikvZDtpZigzPmgpe2Zvcig7YjxjO2IrPWQpZltnKytdPWFbYl0sZltnKytdPWFbYisxXTtyZXR1cm4gZ312YXIgaz1BcnJheShoKTtrWzBdPTE7a1toLTFdPTE7Yz1bYixjLWRdO2Zvcih2YXIgbT0wLG47MDxjLmxlbmd0aDspe3ZhciBwPWMucG9wKCkscT1jLnBvcCgpLHU9MCxGPWFbcV0sej1hW3ErMV0sQz1hW3BdLEQ9YVtwKzFdO2ZvcihuPXErZDtuPHA7bis9ZCl7dmFyIEU7RT1hW25dO3ZhciBRPWFbbisxXSxmYT1GLGdhPXosWD1DLWZhLHY9RC1nYTtpZihYfHx2KXt2YXIgVD0oKEUtZmEpKlgrKFEtZ2EpKnYpLyhYKlgrdip2KTsxPFQ/KGZhPUMsZ2E9RCk6MDxUJiYoZmErPVgqVCxnYSs9dipUKX1FPUNhKEUsUSxmYSxnYSk7RT51JiYobT1uLHU9RSl9dT5lJiYoa1sobS1iKS9kXT0xLHErZDxtJiZjLnB1c2gocSxtKSxtK2Q8cCYmYy5wdXNoKG0scCkpfWZvcihuPTA7bjxoOysrbilrW25dJiYoZltnKytdPWFbYitcbm4qZF0sZltnKytdPWFbYituKmQrMV0pO3JldHVybiBnfVxuZnVuY3Rpb24gSmUoYSxiLGMsZCxlLGYsZyxoKXt2YXIgayxtO2s9MDtmb3IobT1jLmxlbmd0aDtrPG07KytrKXt2YXIgbj1jW2tdO2E6e3ZhciBwLHE9YSx1PW4sRj1kLHo9ZSxDPWYsRD1nO2lmKGIhPXUpe3ZhciBFPXoqTWF0aC5yb3VuZChxW2JdL3opLFE9eipNYXRoLnJvdW5kKHFbYisxXS96KTtiKz1GO0NbRCsrXT1FO0NbRCsrXT1RO2RvIGlmKHA9eipNYXRoLnJvdW5kKHFbYl0veiksZz16Kk1hdGgucm91bmQocVtiKzFdL3opLGIrPUYsYj09dSl7Q1tEKytdPXA7Q1tEKytdPWc7Zz1EO2JyZWFrIGF9d2hpbGUocD09RSYmZz09USk7Zm9yKDtiPHU7KXt2YXIgZmEsZ2E7ZmE9eipNYXRoLnJvdW5kKHFbYl0veik7Z2E9eipNYXRoLnJvdW5kKHFbYisxXS96KTtiKz1GO2lmKGZhIT1wfHxnYSE9Zyl7dmFyIFg9cC1FLHY9Zy1RLFQ9ZmEtRSxiYT1nYS1RO1gqYmE9PXYqVCYmKDA+WCYmVDxYfHxYPT1UfHwwPFgmJlQ+WCkmJigwPnYmJmJhPHZ8fHY9PWJhfHwwPHYmJmJhPnYpfHwoQ1tEKytdPVxucCxDW0QrK109ZyxFPXAsUT1nKTtwPWZhO2c9Z2F9fUNbRCsrXT1wO0NbRCsrXT1nfWc9RH1oLnB1c2goZyk7Yj1ufXJldHVybiBnfTtmdW5jdGlvbiBLZShhLGIpe3RlLmNhbGwodGhpcyk7dGhpcy5hPXRoaXMuaT0tMTt0aGlzLlkoYSxiKX10KEtlLHRlKTtsPUtlLnByb3RvdHlwZTtsLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IEtlKG51bGwpO0xlKGEsdGhpcy5YLHRoaXMubC5zbGljZSgpKTtyZXR1cm4gYX07bC5IYT1mdW5jdGlvbihhLGIsYyxkKXtpZihkPFBhKHRoaXMuSigpLGEsYikpcmV0dXJuIGQ7dGhpcy5hIT10aGlzLmYmJih0aGlzLmk9TWF0aC5zcXJ0KHplKHRoaXMubCwwLHRoaXMubC5sZW5ndGgsdGhpcy5BLDApKSx0aGlzLmE9dGhpcy5mKTtyZXR1cm4gQmUodGhpcy5sLDAsdGhpcy5sLmxlbmd0aCx0aGlzLkEsdGhpcy5pLCEwLGEsYixjLGQpfTtsLkQ9ZnVuY3Rpb24oKXtyZXR1cm4gR2UodGhpcy5sLDAsdGhpcy5sLmxlbmd0aCx0aGlzLkEpfTtcbmwuaWI9ZnVuY3Rpb24oYSl7dmFyIGI9W107Yi5sZW5ndGg9SWUodGhpcy5sLDAsdGhpcy5sLmxlbmd0aCx0aGlzLkEsYSxiLDApO2E9bmV3IEtlKG51bGwpO0xlKGEsXCJYWVwiLGIpO3JldHVybiBhfTtsLkg9ZnVuY3Rpb24oKXtyZXR1cm5cIkxpbmVhclJpbmdcIn07bC5ZPWZ1bmN0aW9uKGEsYil7YT8od2UodGhpcyxiLGEsMSksdGhpcy5sfHwodGhpcy5sPVtdKSx0aGlzLmwubGVuZ3RoPUVlKHRoaXMubCwwLGEsdGhpcy5BKSx0aGlzLmIoKSk6TGUodGhpcyxcIlhZXCIsbnVsbCl9O2Z1bmN0aW9uIExlKGEsYixjKXt2ZShhLGIsYyk7YS5iKCl9O2Z1bmN0aW9uIE1lKGEsYil7dGUuY2FsbCh0aGlzKTt0aGlzLlkoYSxiKX10KE1lLHRlKTtsPU1lLnByb3RvdHlwZTtsLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IE1lKG51bGwpO3ZlKGEsdGhpcy5YLHRoaXMubC5zbGljZSgpKTthLmIoKTtyZXR1cm4gYX07bC5IYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmw7YT1DYShhLGIsZVswXSxlWzFdKTtpZihhPGQpe2Q9dGhpcy5BO2ZvcihiPTA7YjxkOysrYiljW2JdPWVbYl07Yy5sZW5ndGg9ZDtyZXR1cm4gYX1yZXR1cm4gZH07bC5EPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubD90aGlzLmwuc2xpY2UoKTpbXX07bC5SYj1mdW5jdGlvbihhKXtyZXR1cm4gVGEodGhpcy5sLGEpfTtsLkg9ZnVuY3Rpb24oKXtyZXR1cm5cIlBvaW50XCJ9O2wuWT1mdW5jdGlvbihhLGIpe2E/KHdlKHRoaXMsYixhLDApLHRoaXMubHx8KHRoaXMubD1bXSksdGhpcy5sLmxlbmd0aD1EZSh0aGlzLmwsYSkpOnZlKHRoaXMsXCJYWVwiLG51bGwpO3RoaXMuYigpfTtmdW5jdGlvbiBOZShhLGIsYyxkLGUsZil7Zm9yKHZhciBnPTAsaD1hW2MtZF0saz1hW2MtZCsxXTtiPGM7Yis9ZCl7dmFyIG09YVtiXSxuPWFbYisxXTtrPD1mP24+ZiYmMDwobS1oKSooZi1rKS0oZS1oKSoobi1rKSYmZysrOm48PWYmJjA+KG0taCkqKGYtayktKGUtaCkqKG4taykmJmctLTtoPW07az1ufXJldHVybiEhZ307ZnVuY3Rpb24gT2UoYSxiLGMsZCxlLGYsZyl7dmFyIGgsayxtLG4scCxxPWVbZisxXSx1PVtdLEY9Y1swXTttPWFbRi1kXTtwPWFbRi1kKzFdO2ZvcihoPWI7aDxGO2grPWQpe249YVtoXTtrPWFbaCsxXTtpZihxPD1wJiZrPD1xfHxwPD1xJiZxPD1rKW09KHEtcCkvKGstcCkqKG4tbSkrbSx1LnB1c2gobSk7bT1uO3A9a31GPU5hTjtwPS1JbmZpbml0eTt1LnNvcnQobWEpO209dVswXTtoPTE7Zm9yKGs9dS5sZW5ndGg7aDxrOysraCl7bj11W2hdO3ZhciB6PU1hdGguYWJzKG4tbSk7aWYoej5wKXttPShtK24pLzI7dmFyIEM7YTp7dmFyIEQ7aWYoYy5sZW5ndGgmJk5lKGEsYixjWzBdLGQsbSxxKSl7RD0xO2ZvcihDPWMubGVuZ3RoO0Q8QzsrK0QpaWYoTmUoYSxjW0QtMV0sY1tEXSxkLG0scSkpe0M9ITE7YnJlYWsgYX1DPSEwfWVsc2UgQz0hMX1DJiYoRj1tLHA9eil9bT1ufWlzTmFOKEYpJiYoRj1lW2ZdKTtyZXR1cm4gZz8oZy5wdXNoKEYscSksZyk6W0YscV19O2Z1bmN0aW9uIFBlKGEsYixjLGQpe2Zvcih2YXIgZT0wLGY9YVtjLWRdLGc9YVtjLWQrMV07YjxjO2IrPWQpdmFyIGg9YVtiXSxrPWFbYisxXSxlPWUrKGgtZikqKGsrZyksZj1oLGc9aztyZXR1cm4gMDxlfWZ1bmN0aW9uIFFlKGEsYixjLGQpe3ZhciBlPTA7ZD12b2lkIDAhPT1kP2Q6ITE7dmFyIGYsZztmPTA7Zm9yKGc9Yi5sZW5ndGg7ZjxnOysrZil7dmFyIGg9YltmXSxlPVBlKGEsZSxoLGMpO2lmKCFmKXtpZihkJiZlfHwhZCYmIWUpcmV0dXJuITF9ZWxzZSBpZihkJiYhZXx8IWQmJmUpcmV0dXJuITE7ZT1ofXJldHVybiEwfVxuZnVuY3Rpb24gUmUoYSxiLGMsZCxlKXtlPXZvaWQgMCE9PWU/ZTohMTt2YXIgZixnO2Y9MDtmb3IoZz1jLmxlbmd0aDtmPGc7KytmKXt2YXIgaD1jW2ZdLGs9UGUoYSxiLGgsZCk7aWYoZj9lJiYha3x8IWUmJms6ZSYma3x8IWUmJiFrKWZvcih2YXIgaz1hLG09aCxuPWQ7YjxtLW47KXt2YXIgcDtmb3IocD0wO3A8bjsrK3Ape3ZhciBxPWtbYitwXTtrW2IrcF09a1ttLW4rcF07a1ttLW4rcF09cX1iKz1uO20tPW59Yj1ofXJldHVybiBifWZ1bmN0aW9uIFNlKGEsYixjLGQpe3ZhciBlPTAsZixnO2Y9MDtmb3IoZz1iLmxlbmd0aDtmPGc7KytmKWU9UmUoYSxlLGJbZl0sYyxkKTtyZXR1cm4gZX07ZnVuY3Rpb24gQihhLGIpe3RlLmNhbGwodGhpcyk7dGhpcy5hPVtdO3RoaXMudj0tMTt0aGlzLnM9bnVsbDt0aGlzLlY9dGhpcy5HPXRoaXMuST0tMTt0aGlzLmk9bnVsbDt0aGlzLlkoYSxiKX10KEIsdGUpO2w9Qi5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBCKG51bGwpO1RlKGEsdGhpcy5YLHRoaXMubC5zbGljZSgpLHRoaXMuYS5zbGljZSgpKTtyZXR1cm4gYX07bC5IYT1mdW5jdGlvbihhLGIsYyxkKXtpZihkPFBhKHRoaXMuSigpLGEsYikpcmV0dXJuIGQ7dGhpcy5HIT10aGlzLmYmJih0aGlzLkk9TWF0aC5zcXJ0KEFlKHRoaXMubCwwLHRoaXMuYSx0aGlzLkEsMCkpLHRoaXMuRz10aGlzLmYpO3JldHVybiBDZSh0aGlzLmwsMCx0aGlzLmEsdGhpcy5BLHRoaXMuSSwhMCxhLGIsYyxkKX07bC5vaD1mdW5jdGlvbigpe3JldHVybiB4ZShVZSh0aGlzKSwwLHRoaXMuYSx0aGlzLkEpfTtcbmwuRD1mdW5jdGlvbihhKXt2YXIgYjt2b2lkIDAhPT1hPyhiPVVlKHRoaXMpLnNsaWNlKCksUmUoYiwwLHRoaXMuYSx0aGlzLkEsYSkpOmI9dGhpcy5sO3JldHVybiBIZShiLDAsdGhpcy5hLHRoaXMuQSl9O2wuZ2I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hfTtmdW5jdGlvbiBWZShhKXtpZihhLnYhPWEuZil7dmFyIGI9V2EoYS5KKCkpO2Eucz1PZShVZShhKSwwLGEuYSxhLkEsYiwwKTthLnY9YS5mfXJldHVybiBhLnN9bC5ZZj1mdW5jdGlvbigpe3JldHVybiBuZXcgTWUoVmUodGhpcykpfTtsLlZkPWZ1bmN0aW9uKGEpe2lmKDA+YXx8dGhpcy5hLmxlbmd0aDw9YSlyZXR1cm4gbnVsbDt2YXIgYj1uZXcgS2UobnVsbCk7TGUoYix0aGlzLlgsdGhpcy5sLnNsaWNlKGE/dGhpcy5hW2EtMV06MCx0aGlzLmFbYV0pKTtyZXR1cm4gYn07XG5mdW5jdGlvbiBXZShhKXt2YXIgYj1hLlgsYz1hLmw7YT1hLmE7dmFyIGQ9W10sZT0wLGYsZztmPTA7Zm9yKGc9YS5sZW5ndGg7ZjxnOysrZil7dmFyIGg9YVtmXSxrPW5ldyBLZShudWxsKTtMZShrLGIsYy5zbGljZShlLGgpKTtkLnB1c2goayk7ZT1ofXJldHVybiBkfWZ1bmN0aW9uIFVlKGEpe2lmKGEuViE9YS5mKXt2YXIgYj1hLmw7UWUoYixhLmEsYS5BKT9hLmk9YjooYS5pPWIuc2xpY2UoKSxhLmkubGVuZ3RoPVJlKGEuaSwwLGEuYSxhLkEpKTthLlY9YS5mfXJldHVybiBhLml9bC5pYj1mdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdO2IubGVuZ3RoPUplKHRoaXMubCwwLHRoaXMuYSx0aGlzLkEsTWF0aC5zcXJ0KGEpLGIsMCxjKTthPW5ldyBCKG51bGwpO1RlKGEsXCJYWVwiLGIsYyk7cmV0dXJuIGF9O2wuSD1mdW5jdGlvbigpe3JldHVyblwiUG9seWdvblwifTtcbmwuWT1mdW5jdGlvbihhLGIpe2lmKGEpe3dlKHRoaXMsYixhLDIpO3RoaXMubHx8KHRoaXMubD1bXSk7dmFyIGM9RmUodGhpcy5sLDAsYSx0aGlzLkEsdGhpcy5hKTt0aGlzLmwubGVuZ3RoPWMubGVuZ3RoP2NbYy5sZW5ndGgtMV06MDt0aGlzLmIoKX1lbHNlIFRlKHRoaXMsXCJYWVwiLG51bGwsdGhpcy5hKX07ZnVuY3Rpb24gVGUoYSxiLGMsZCl7dmUoYSxiLGMpO2EuYT1kO2EuYigpfWZ1bmN0aW9uIFhlKGEpe3ZhciBiPWFbMF0sYz1hWzFdLGQ9YVsyXTthPWFbM107Yj1bYixjLGIsYSxkLGEsZCxjLGIsY107Yz1uZXcgQihudWxsKTtUZShjLFwiWFlcIixiLFtiLmxlbmd0aF0pO3JldHVybiBjfTtmdW5jdGlvbiBZZShhKXt2Yy5jYWxsKHRoaXMpO2E9YmIoe30sYSk7dGhpcy5qPVswLDBdO3RoaXMuYT1bXTt0aGlzLnFjPXRoaXMucWMuYmluZCh0aGlzKTt0aGlzLnM9R2IoYS5wcm9qZWN0aW9uKTt2YXIgYj17fTtiLmNlbnRlcj12b2lkIDAhPT1hLmNlbnRlcj9hLmNlbnRlcjpudWxsO3ZhciBjLGQsZSxmPXZvaWQgMCE9PWEubWluWm9vbT9hLm1pblpvb206MDtjPXZvaWQgMCE9PWEubWF4Wm9vbT9hLm1heFpvb206Mjg7dmFyIGc9dm9pZCAwIT09YS56b29tRmFjdG9yP2Euem9vbUZhY3RvcjoyO2lmKHZvaWQgMCE9PWEucmVzb2x1dGlvbnMpYz1hLnJlc29sdXRpb25zLGQ9Y1swXSxlPWNbYy5sZW5ndGgtMV0sYz1hZShjKTtlbHNle2Q9R2IoYS5wcm9qZWN0aW9uKTtlPWQuSigpO3ZhciBoPShlP01hdGgubWF4KGFiKGUpLGVbM10tZVsxXSk6MzYwKmhiLmRlZ3JlZXMvZC5mKCkpLzI1Ni9NYXRoLnBvdygyLDApLGs9aC9NYXRoLnBvdygyLDI4KTtkPWEubWF4UmVzb2x1dGlvbjtcbnZvaWQgMCE9PWQ/Zj0wOmQ9aC9NYXRoLnBvdyhnLGYpO2U9YS5taW5SZXNvbHV0aW9uO3ZvaWQgMD09PWUmJihlPXZvaWQgMCE9PWEubWF4Wm9vbT92b2lkIDAhPT1hLm1heFJlc29sdXRpb24/ZC9NYXRoLnBvdyhnLGMpOmgvTWF0aC5wb3coZyxjKTprKTtjPWYrTWF0aC5mbG9vcihNYXRoLmxvZyhkL2UpL01hdGgubG9nKGcpKTtlPWQvTWF0aC5wb3coZyxjLWYpO2M9YmUoZyxkLGMtZil9dGhpcy5jPWQ7dGhpcy5CPWU7dGhpcy5DPWc7dGhpcy5pPWEucmVzb2x1dGlvbnM7dGhpcy5vPWY7KHZvaWQgMCE9PWEuZW5hYmxlUm90YXRpb24/YS5lbmFibGVSb3RhdGlvbjoxKT8oZj1hLmNvbnN0cmFpblJvdGF0aW9uLGY9dm9pZCAwPT09Znx8ITA9PT1mP2ZlKCk6ITE9PT1mP2RlOlwibnVtYmVyXCI9PT10eXBlb2YgZj9lZShmKTpkZSk6Zj1jZTt0aGlzLmc9bmV3IE5jKHZvaWQgMCE9PWEuZXh0ZW50P2ZjKGEuZXh0ZW50KTpnYyxjLGYpO3ZvaWQgMCE9PWEucmVzb2x1dGlvbj9iLnJlc29sdXRpb249XG5hLnJlc29sdXRpb246dm9pZCAwIT09YS56b29tJiYoYi5yZXNvbHV0aW9uPXRoaXMuY29uc3RyYWluUmVzb2x1dGlvbih0aGlzLmMsYS56b29tLXRoaXMubykpO2Iucm90YXRpb249dm9pZCAwIT09YS5yb3RhdGlvbj9hLnJvdGF0aW9uOjA7dGhpcy5vYShiKX10KFllLHZjKTtsPVllLnByb3RvdHlwZTtcbmwuYW5pbWF0ZT1mdW5jdGlvbihhKXt2YXIgYj1EYXRlLm5vdygpLGM9dGhpcy5oYSgpLnNsaWNlKCksZD10aGlzLnZhKCksZT1aYyh0aGlzKSxmPWFyZ3VtZW50cy5sZW5ndGgsZzsxPGYmJlwiZnVuY3Rpb25cIj09PXR5cGVvZiBhcmd1bWVudHNbZi0xXSYmKGc9YXJndW1lbnRzW2YtMV0sLS1mKTtmb3IodmFyIGg9W10saz0wO2s8ZjsrK2spe3ZhciBtPWFyZ3VtZW50c1trXSxuPXtzdGFydDpiLGNvbXBsZXRlOiExLGFuY2hvcjptLmFuY2hvcixkdXJhdGlvbjp2b2lkIDAhPT1tLmR1cmF0aW9uP20uZHVyYXRpb246MUUzLGVhc2luZzptLmVhc2luZ3x8VmN9O20uY2VudGVyJiYobi5yZD1jLG4udGQ9bS5jZW50ZXIsYz1uLnRkKTt2b2lkIDAhPT1tLnpvb20/KG4ubmM9ZCxuLnFiPXRoaXMuY29uc3RyYWluUmVzb2x1dGlvbih0aGlzLmMsbS56b29tLXRoaXMubywwKSxkPW4ucWIpOm0ucmVzb2x1dGlvbiYmKG4ubmM9ZCxuLnFiPW0ucmVzb2x1dGlvbixkPW4ucWIpO3ZvaWQgMCE9PW0ucm90YXRpb24mJlxuKG4uc2Q9ZSxuLm9jPW0ucm90YXRpb24sZT1uLm9jKTtuLlFiPWc7Yis9bi5kdXJhdGlvbjtoLnB1c2gobil9dGhpcy5hLnB1c2goaCk7WmUodGhpcywwLDEpO3RoaXMucWMoKX07ZnVuY3Rpb24gYWQoYSl7WmUoYSwwLC0kYyhhKVswXSk7Zm9yKHZhciBiPTAsYz1hLmEubGVuZ3RoO2I8YzsrK2Ipe3ZhciBkPWEuYVtiXTtkWzBdLlFiJiZkWzBdLlFiKCExKX1hLmEubGVuZ3RoPTB9XG5sLnFjPWZ1bmN0aW9uKCl7dm9pZCAwIT09dGhpcy52JiYoY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy52KSx0aGlzLnY9dm9pZCAwKTtpZigwPCRjKHRoaXMpWzBdKXtmb3IodmFyIGE9RGF0ZS5ub3coKSxiPSExLGM9dGhpcy5hLmxlbmd0aC0xOzA8PWM7LS1jKXtmb3IodmFyIGQ9dGhpcy5hW2NdLGU9ITAsZj0wLGc9ZC5sZW5ndGg7ZjxnOysrZil7dmFyIGg9ZFtmXTtpZighaC5jb21wbGV0ZSl7Yj1hLWguc3RhcnQ7Yj0wPGguZHVyYXRpb24/Yi9oLmR1cmF0aW9uOjE7MTw9Yj8oaC5jb21wbGV0ZT0hMCxiPTEpOmU9ITE7Yj1oLmVhc2luZyhiKTtpZihoLnJkKXt2YXIgaz1oLnJkWzBdLG09aC5yZFsxXTt0aGlzLnNldChcImNlbnRlclwiLFtrK2IqKGgudGRbMF0tayksbStiKihoLnRkWzFdLW0pXSl9aC5uYyYmaC5xYiYmKGs9MT09PWI/aC5xYjpoLm5jK2IqKGgucWItaC5uYyksaC5hbmNob3ImJnRoaXMuc2V0KFwiY2VudGVyXCIsJGUodGhpcyxrLGguYW5jaG9yKSksdGhpcy5zZXQoXCJyZXNvbHV0aW9uXCIsXG5rKSk7dm9pZCAwIT09aC5zZCYmdm9pZCAwIT09aC5vYyYmKGI9MT09PWI/aC5vYzpoLnNkK2IqKGgub2MtaC5zZCksaC5hbmNob3ImJnRoaXMuc2V0KFwiY2VudGVyXCIsYWYodGhpcyxiLGguYW5jaG9yKSksdGhpcy5zZXQoXCJyb3RhdGlvblwiLGIpKTtiPSEwO2lmKCFoLmNvbXBsZXRlKWJyZWFrfX1lJiYodGhpcy5hW2NdPW51bGwsWmUodGhpcywwLC0xKSwoZD1kWzBdLlFiKSYmZCghMCkpfXRoaXMuYT10aGlzLmEuZmlsdGVyKEJvb2xlYW4pO2ImJnZvaWQgMD09PXRoaXMudiYmKHRoaXMudj1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5xYykpfX07ZnVuY3Rpb24gYWYoYSxiLGMpe3ZhciBkLGU9YS5oYSgpO3ZvaWQgMCE9PWUmJihkPVtlWzBdLWNbMF0sZVsxXS1jWzFdXSxrZShkLGItWmMoYSkpLGhlKGQsYykpO3JldHVybiBkfVxuZnVuY3Rpb24gJGUoYSxiLGMpe3ZhciBkLGU9YS5oYSgpO2E9YS52YSgpO3ZvaWQgMCE9PWUmJnZvaWQgMCE9PWEmJihkPVtjWzBdLWIqKGNbMF0tZVswXSkvYSxjWzFdLWIqKGNbMV0tZVsxXSkvYV0pO3JldHVybiBkfWZ1bmN0aW9uIGJmKGEpe3ZhciBiPVsxMDAsMTAwXTthPScub2wtdmlld3BvcnRbZGF0YS12aWV3PVwiJyt3KGEpKydcIl0nO2lmKGE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhKSlhPWdldENvbXB1dGVkU3R5bGUoYSksYlswXT1wYXJzZUludChhLndpZHRoLDEwKSxiWzFdPXBhcnNlSW50KGEuaGVpZ2h0LDEwKTtyZXR1cm4gYn1sLmNvbnN0cmFpblJlc29sdXRpb249ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLmcucmVzb2x1dGlvbihhLGJ8fDAsY3x8MCl9O2wuY29uc3RyYWluUm90YXRpb249ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5nLnJvdGF0aW9uKGEsYnx8MCl9O2wuaGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJjZW50ZXJcIil9O1xuZnVuY3Rpb24gJGMoYSxiKXtyZXR1cm4gdm9pZCAwIT09Yj8oYlswXT1hLmpbMF0sYlsxXT1hLmpbMV0sYik6YS5qLnNsaWNlKCl9bC5MZD1mdW5jdGlvbihhKXthPWF8fGJmKHRoaXMpO3ZhciBiPXRoaXMuaGEoKTt4KGIsMSk7dmFyIGM9dGhpcy52YSgpO3godm9pZCAwIT09YywyKTt2YXIgZD1aYyh0aGlzKTt4KHZvaWQgMCE9PWQsMyk7cmV0dXJuIFhhKGIsYyxkLGEpfTtsLmJoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc307bC52YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInJlc29sdXRpb25cIil9O2wuZGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pfTtmdW5jdGlvbiBjZihhLGIpe3JldHVybiBNYXRoLm1heChhYihhKS9iWzBdLChhWzNdLWFbMV0pL2JbMV0pfWZ1bmN0aW9uIFpjKGEpe3JldHVybiBhLmdldChcInJvdGF0aW9uXCIpfVxuZnVuY3Rpb24gZGYoYSl7dmFyIGI9YS5oYSgpLGM9YS5zLGQ9YS52YSgpO2E9WmMoYSk7cmV0dXJue2NlbnRlcjpiLnNsaWNlKCkscHJvamVjdGlvbjp2b2lkIDAhPT1jP2M6bnVsbCxyZXNvbHV0aW9uOmQscm90YXRpb246YX19bC5kZz1mdW5jdGlvbigpe3ZhciBhLGI9dGhpcy52YSgpO2lmKHZvaWQgMCE9PWIpYTp7dmFyIGM7aWYoYj49dGhpcy5CJiZiPD10aGlzLmMpe2E9dGhpcy5vfHwwO3ZhciBkO2lmKHRoaXMuaSl7ZD1uYSh0aGlzLmksYiwxKTthKz1kO2lmKGQ9PXRoaXMuaS5sZW5ndGgtMSlicmVhayBhO2M9dGhpcy5pW2RdO2Q9Yy90aGlzLmlbZCsxXX1lbHNlIGM9dGhpcy5jLGQ9dGhpcy5DO2M9YStNYXRoLmxvZyhjL2IpL01hdGgubG9nKGQpfWE9Y31yZXR1cm4gYX07XG5sLlBmPWZ1bmN0aW9uKGEsYil7dmFyIGM9Ynx8e30sZD1jLnNpemU7ZHx8KGQ9YmYodGhpcykpO3ZhciBlO2EgaW5zdGFuY2VvZiB0ZT9cIkNpcmNsZVwiPT09YS5IKCk/KGE9YS5KKCksZT1YZShhKSxlLnJvdGF0ZShaYyh0aGlzKSxXYShhKSkpOmU9YTooeChBcnJheS5pc0FycmF5KGEpLDI0KSx4KCEoYVsyXTxhWzBdfHxhWzNdPGFbMV0pLDI1KSxlPVhlKGEpKTt2YXIgZj1jLnBhZGRpbmc/Yy5wYWRkaW5nOlswLDAsMCwwXSxnPXZvaWQgMCE9PWMuY29uc3RyYWluUmVzb2x1dGlvbj9jLmNvbnN0cmFpblJlc29sdXRpb246ITAsaD12b2lkIDAhPT1jLm5lYXJlc3Q/Yy5uZWFyZXN0OiExLGs7dm9pZCAwIT09Yy5taW5SZXNvbHV0aW9uP2s9Yy5taW5SZXNvbHV0aW9uOnZvaWQgMCE9PWMubWF4Wm9vbT9rPXRoaXMuY29uc3RyYWluUmVzb2x1dGlvbih0aGlzLmMsYy5tYXhab29tLXRoaXMubywwKTprPTA7dmFyIG09ZS5sLG49WmModGhpcykscD1NYXRoLmNvcygtbiksbj1NYXRoLnNpbigtbiksXG5xPUluZmluaXR5LHU9SW5maW5pdHksRj0tSW5maW5pdHksej0tSW5maW5pdHk7ZT1lLkE7Zm9yKHZhciBDPTAsRD1tLmxlbmd0aDtDPEQ7Qys9ZSl2YXIgRT1tW0NdKnAtbVtDKzFdKm4sUT1tW0NdKm4rbVtDKzFdKnAscT1NYXRoLm1pbihxLEUpLHU9TWF0aC5taW4odSxRKSxGPU1hdGgubWF4KEYsRSksej1NYXRoLm1heCh6LFEpO2Q9Y2YoW3EsdSxGLHpdLFtkWzBdLWZbMV0tZlszXSxkWzFdLWZbMF0tZlsyXV0pO2Q9aXNOYU4oZCk/azpNYXRoLm1heChkLGspO2cmJihnPXRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihkLDAsMCksIWgmJmc8ZCYmKGc9dGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKGcsLTEsMCkpLGQ9Zyk7bj0tbjtoPShxK0YpLzIrKGZbMV0tZlszXSkvMipkO2Y9KHUreikvMisoZlswXS1mWzJdKS8yKmQ7cD1baCpwLWYqbixmKnAraCpuXTt2b2lkIDAhPT1jLmR1cmF0aW9uP3RoaXMuYW5pbWF0ZSh7cmVzb2x1dGlvbjpkLGNlbnRlcjpwLGR1cmF0aW9uOmMuZHVyYXRpb24sXG5lYXNpbmc6Yy5lYXNpbmd9KTooY2QodGhpcyxkKSx0aGlzLkthKHApKX07bC5yb3RhdGU9ZnVuY3Rpb24oYSxiKXtpZih2b2lkIDAhPT1iKXt2YXIgYz1hZih0aGlzLGEsYik7dGhpcy5LYShjKX10aGlzLnNldChcInJvdGF0aW9uXCIsYSk7MDwkYyh0aGlzKVswXSYmYWQodGhpcyl9O2wuS2E9ZnVuY3Rpb24oYSl7dGhpcy5zZXQoXCJjZW50ZXJcIixhKTswPCRjKHRoaXMpWzBdJiZhZCh0aGlzKX07ZnVuY3Rpb24gWmUoYSxiLGMpe2EualtiXSs9YzthLmIoKX1mdW5jdGlvbiBjZChhLGIpe2Euc2V0KFwicmVzb2x1dGlvblwiLGIpOzA8JGMoYSlbMF0mJmFkKGEpfWwubmk9ZnVuY3Rpb24oYSl7YT10aGlzLmNvbnN0cmFpblJlc29sdXRpb24odGhpcy5jLGEtdGhpcy5vLDApO2NkKHRoaXMsYSl9O2Z1bmN0aW9uIGVmKCl7dGhpcy5iPVtdO3RoaXMuZj10aGlzLmE9MH1mdW5jdGlvbiBmZihhKXthLmIubGVuZ3RoPTA7YS5hPTA7YS5mPTB9O2Z1bmN0aW9uIGdmKGEpe3ZjLmNhbGwodGhpcyk7dGhpcy5CPW51bGw7dGhpcy5ZYSghMCk7dGhpcy5oYW5kbGVFdmVudD1hLmhhbmRsZUV2ZW50fXQoZ2YsdmMpO2dmLnByb3RvdHlwZS5ZYT1mdW5jdGlvbihhKXt0aGlzLnNldChcImFjdGl2ZVwiLGEpfTtnZi5wcm90b3R5cGUuc2V0TWFwPWZ1bmN0aW9uKGEpe3RoaXMuQj1hfTtmdW5jdGlvbiBoZihhLGIsYyxkKXtpZih2b2lkIDAhPT1iKXt2YXIgZT1aYyhhKSxmPWEuaGEoKTt2b2lkIDAhPT1lJiZmJiYwPGQ/YS5hbmltYXRlKHtyb3RhdGlvbjpiLGFuY2hvcjpjLGR1cmF0aW9uOmQsZWFzaW5nOlVjfSk6YS5yb3RhdGUoYixjKX19XG5mdW5jdGlvbiBqZihhLGIsYyxkKXt2YXIgZT1hLnZhKCk7Yj1hLmNvbnN0cmFpblJlc29sdXRpb24oZSxiLDApO2lmKGMmJnZvaWQgMCE9PWImJmIhPT1lKXt2YXIgZj1hLmhhKCk7Yz0kZShhLGIsYyk7Yz1hLmcuY2VudGVyKGMpO2M9WyhiKmZbMF0tZSpjWzBdKS8oYi1lKSwoYipmWzFdLWUqY1sxXSkvKGItZSldfWtmKGEsYixjLGQpfWZ1bmN0aW9uIGtmKGEsYixjLGQpe2lmKGIpe3ZhciBlPWEudmEoKSxmPWEuaGEoKTt2b2lkIDAhPT1lJiZmJiZiIT09ZSYmZD9hLmFuaW1hdGUoe3Jlc29sdXRpb246YixhbmNob3I6YyxkdXJhdGlvbjpkLGVhc2luZzpVY30pOihjJiYoYz0kZShhLGIsYyksYS5LYShjKSksY2QoYSxiKSl9fTtmdW5jdGlvbiBsZihhKXthPWE/YTp7fTt0aGlzLmE9YS5kZWx0YT9hLmRlbHRhOjE7Z2YuY2FsbCh0aGlzLHtoYW5kbGVFdmVudDptZn0pO3RoaXMuYz12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246MjUwfXQobGYsZ2YpO2Z1bmN0aW9uIG1mKGEpe3ZhciBiPSExLGM9YS5vcmlnaW5hbEV2ZW50O2lmKFwiZGJsY2xpY2tcIj09YS50eXBlKXt2YXIgYj1hLmNvb3JkaW5hdGUsYz1jLnNoaWZ0S2V5Py10aGlzLmE6dGhpcy5hLGQ9YS5tYXAuWigpO2pmKGQsYyxiLHRoaXMuYyk7YS5wcmV2ZW50RGVmYXVsdCgpO2I9ITB9cmV0dXJuIWJ9O2Z1bmN0aW9uIG5mKGEpe2E9YS5vcmlnaW5hbEV2ZW50O3JldHVybiBhLmFsdEtleSYmIShhLm1ldGFLZXl8fGEuY3RybEtleSkmJmEuc2hpZnRLZXl9ZnVuY3Rpb24gb2YoYSl7YT1hLm9yaWdpbmFsRXZlbnQ7cmV0dXJuIWEuYnV0dG9uJiYhKGxkJiZtZCYmYS5jdHJsS2V5KX1mdW5jdGlvbiBwZihhKXtyZXR1cm5cInNpbmdsZWNsaWNrXCI9PWEudHlwZX1mdW5jdGlvbiBxZihhKXthPWEub3JpZ2luYWxFdmVudDtyZXR1cm4hYS5hbHRLZXkmJiEoYS5tZXRhS2V5fHxhLmN0cmxLZXkpJiYhYS5zaGlmdEtleX1mdW5jdGlvbiByZihhKXthPWEub3JpZ2luYWxFdmVudDtyZXR1cm4hYS5hbHRLZXkmJiEoYS5tZXRhS2V5fHxhLmN0cmxLZXkpJiZhLnNoaWZ0S2V5fWZ1bmN0aW9uIHNmKGEpe2E9YS5vcmlnaW5hbEV2ZW50LnRhcmdldC50YWdOYW1lO3JldHVyblwiSU5QVVRcIiE9PWEmJlwiU0VMRUNUXCIhPT1hJiZcIlRFWFRBUkVBXCIhPT1hfVxuZnVuY3Rpb24gdGYoYSl7eChhLmIsNTYpO3JldHVyblwibW91c2VcIj09YS5iLnBvaW50ZXJUeXBlfWZ1bmN0aW9uIHVmKGEpe2E9YS5iO3JldHVybiBhLmlzUHJpbWFyeSYmMD09PWEuYnV0dG9ufTtmdW5jdGlvbiB2ZihhKXthPWE/YTp7fTtnZi5jYWxsKHRoaXMse2hhbmRsZUV2ZW50OmEuaGFuZGxlRXZlbnQ/YS5oYW5kbGVFdmVudDp3Zn0pO3RoaXMucmM9YS5oYW5kbGVEb3duRXZlbnQ/YS5oYW5kbGVEb3duRXZlbnQ6cWU7dGhpcy55Yz1hLmhhbmRsZURyYWdFdmVudD9hLmhhbmRsZURyYWdFdmVudDp0YTt0aGlzLnpjPWEuaGFuZGxlTW92ZUV2ZW50P2EuaGFuZGxlTW92ZUV2ZW50OnRhO3RoaXMuQWM9YS5oYW5kbGVVcEV2ZW50P2EuaGFuZGxlVXBFdmVudDpxZTt0aGlzLnY9ITE7dGhpcy5WPXt9O3RoaXMuZz1bXX10KHZmLGdmKTtmdW5jdGlvbiB4ZihhKXtmb3IodmFyIGI9YS5sZW5ndGgsYz0wLGQ9MCxlPTA7ZTxiO2UrKyljKz1hW2VdLmNsaWVudFgsZCs9YVtlXS5jbGllbnRZO3JldHVybltjL2IsZC9iXX1cbmZ1bmN0aW9uIHdmKGEpe2lmKCEoYSBpbnN0YW5jZW9mIGhkKSlyZXR1cm4hMDt2YXIgYj0hMSxjPWEudHlwZTtpZihcInBvaW50ZXJkb3duXCI9PT1jfHxcInBvaW50ZXJkcmFnXCI9PT1jfHxcInBvaW50ZXJ1cFwiPT09YyljPWEuYixcInBvaW50ZXJ1cFwiPT1hLnR5cGU/ZGVsZXRlIHRoaXMuVltjLnBvaW50ZXJJZF06XCJwb2ludGVyZG93blwiPT1hLnR5cGU/dGhpcy5WW2MucG9pbnRlcklkXT1jOmMucG9pbnRlcklkIGluIHRoaXMuViYmKHRoaXMuVltjLnBvaW50ZXJJZF09YyksdGhpcy5nPWRiKHRoaXMuVik7dGhpcy52P1wicG9pbnRlcmRyYWdcIj09YS50eXBlP3RoaXMueWMoYSk6XCJwb2ludGVydXBcIj09YS50eXBlJiYodGhpcy52PXRoaXMuQWMoYSkmJjA8dGhpcy5nLmxlbmd0aCk6XCJwb2ludGVyZG93blwiPT1hLnR5cGU/KHRoaXMudj1hPXRoaXMucmMoYSksYj10aGlzLmFiKGEpKTpcInBvaW50ZXJtb3ZlXCI9PWEudHlwZSYmdGhpcy56YyhhKTtyZXR1cm4hYn12Zi5wcm90b3R5cGUuYWI9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9O2Z1bmN0aW9uIHlmKGEpe3ZmLmNhbGwodGhpcyx7aGFuZGxlRG93bkV2ZW50OnpmLGhhbmRsZURyYWdFdmVudDpBZixoYW5kbGVVcEV2ZW50OkJmfSk7YT1hP2E6e307dGhpcy5hPWEua2luZXRpYzt0aGlzLmM9bnVsbDt0aGlzLm89YS5jb25kaXRpb24/YS5jb25kaXRpb246cWY7dGhpcy5pPSExfXQoeWYsdmYpO2Z1bmN0aW9uIEFmKGEpe3ZhciBiPXRoaXMuZyxjPXhmKGIpO2lmKGIubGVuZ3RoPT10aGlzLmope2lmKHRoaXMuYSYmdGhpcy5hLmIucHVzaChjWzBdLGNbMV0sRGF0ZS5ub3coKSksdGhpcy5jKXt2YXIgZD10aGlzLmNbMF0tY1swXSxlPWNbMV0tdGhpcy5jWzFdO2E9YS5tYXAuWigpO3ZhciBmPWRmKGEpLGQ9W2QsZV07bGUoZCxmLnJlc29sdXRpb24pO2tlKGQsZi5yb3RhdGlvbik7aGUoZCxmLmNlbnRlcik7ZD1hLmcuY2VudGVyKGQpO2EuS2EoZCl9fWVsc2UgdGhpcy5hJiZmZih0aGlzLmEpO3RoaXMuYz1jO3RoaXMuaj1iLmxlbmd0aH1cbmZ1bmN0aW9uIEJmKGEpe3ZhciBiPWEubWFwO2E9Yi5aKCk7aWYodGhpcy5nLmxlbmd0aClyZXR1cm4gdGhpcy5hJiZmZih0aGlzLmEpLHRoaXMuYz1udWxsLCEwO3ZhciBjO2lmKGM9IXRoaXMuaSYmdGhpcy5hKWlmKGM9dGhpcy5hLDY+Yy5iLmxlbmd0aCljPSExO2Vsc2V7dmFyIGQ9RGF0ZS5ub3coKS0xMDAsZT1jLmIubGVuZ3RoLTM7aWYoYy5iW2UrMl08ZCljPSExO2Vsc2V7Zm9yKHZhciBmPWUtMzswPGYmJmMuYltmKzJdPmQ7KWYtPTM7dmFyIGQ9Yy5iW2UrMl0tYy5iW2YrMl0sZz1jLmJbZV0tYy5iW2ZdLGU9Yy5iW2UrMV0tYy5iW2YrMV07Yy5hPU1hdGguYXRhbjIoZSxnKTtjLmY9TWF0aC5zcXJ0KGcqZytlKmUpL2Q7Yz0uMDU8Yy5mfX1jJiYoYz0oLjA1LXRoaXMuYS5mKS8tLjAwNSxlPXRoaXMuYS5hLGY9YS5oYSgpLGY9Q2YoYixmKSxiPWIuRWEoW2ZbMF0tYypNYXRoLmNvcyhlKSxmWzFdLWMqTWF0aC5zaW4oZSldKSxhLmFuaW1hdGUoe2NlbnRlcjphLmcuY2VudGVyKGIpLFxuZHVyYXRpb246NTAwLGVhc2luZzpVY30pKTtaZShhLDEsLTEpO3JldHVybiExfWZ1bmN0aW9uIHpmKGEpe2lmKDA8dGhpcy5nLmxlbmd0aCYmdGhpcy5vKGEpKXt2YXIgYj1hLm1hcC5aKCk7dGhpcy5jPW51bGw7dGhpcy52fHxaZShiLDEsMSk7JGMoYilbMF0mJmIuS2EoYS5mcmFtZVN0YXRlLnZpZXdTdGF0ZS5jZW50ZXIpO3RoaXMuYSYmZmYodGhpcy5hKTt0aGlzLmk9MTx0aGlzLmcubGVuZ3RoO3JldHVybiEwfXJldHVybiExfXlmLnByb3RvdHlwZS5hYj1xZTtmdW5jdGlvbiBEZihhKXthPWE/YTp7fTt2Zi5jYWxsKHRoaXMse2hhbmRsZURvd25FdmVudDpFZixoYW5kbGVEcmFnRXZlbnQ6RmYsaGFuZGxlVXBFdmVudDpHZn0pO3RoaXMuYz1hLmNvbmRpdGlvbj9hLmNvbmRpdGlvbjpuZjt0aGlzLmE9dm9pZCAwO3RoaXMuaT12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246MjUwfXQoRGYsdmYpO2Z1bmN0aW9uIEZmKGEpe2lmKHRmKGEpKXt2YXIgYj1hLm1hcCxjPWIubWIoKTthPWEucGl4ZWw7Yz1NYXRoLmF0YW4yKGNbMV0vMi1hWzFdLGFbMF0tY1swXS8yKTtpZih2b2lkIDAhPT10aGlzLmEpe2E9Yy10aGlzLmE7dmFyIGI9Yi5aKCksZD1aYyhiKTtoZihiLGQtYSl9dGhpcy5hPWN9fWZ1bmN0aW9uIEdmKGEpe2lmKCF0ZihhKSlyZXR1cm4hMDthPWEubWFwLlooKTtaZShhLDEsLTEpO3ZhciBiPVpjKGEpLGM9dGhpcy5pLGI9YS5jb25zdHJhaW5Sb3RhdGlvbihiLDApO2hmKGEsYix2b2lkIDAsYyk7cmV0dXJuITF9XG5mdW5jdGlvbiBFZihhKXtyZXR1cm4gdGYoYSkmJm9mKGEpJiZ0aGlzLmMoYSk/KFplKGEubWFwLlooKSwxLDEpLHRoaXMuYT12b2lkIDAsITApOiExfURmLnByb3RvdHlwZS5hYj1xZTtmdW5jdGlvbiBIZihhKXt0aGlzLlZhPW51bGw7dGhpcy5mPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dGhpcy5mLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjt0aGlzLmYuY2xhc3NOYW1lPVwib2wtYm94IFwiK2E7dGhpcy5hPXRoaXMuYz10aGlzLmI9bnVsbH10KEhmLG9jKTtIZi5wcm90b3R5cGUua2E9ZnVuY3Rpb24oKXt0aGlzLnNldE1hcChudWxsKX07ZnVuY3Rpb24gSWYoYSl7dmFyIGI9YS5jLGM9YS5hO2E9YS5mLnN0eWxlO2EubGVmdD1NYXRoLm1pbihiWzBdLGNbMF0pK1wicHhcIjthLnRvcD1NYXRoLm1pbihiWzFdLGNbMV0pK1wicHhcIjthLndpZHRoPU1hdGguYWJzKGNbMF0tYlswXSkrXCJweFwiO2EuaGVpZ2h0PU1hdGguYWJzKGNbMV0tYlsxXSkrXCJweFwifVxuSGYucHJvdG90eXBlLnNldE1hcD1mdW5jdGlvbihhKXtpZih0aGlzLmIpe3RoaXMuYi5zLnJlbW92ZUNoaWxkKHRoaXMuZik7dmFyIGI9dGhpcy5mLnN0eWxlO2IubGVmdD1iLnRvcD1iLndpZHRoPWIuaGVpZ2h0PVwiaW5oZXJpdFwifSh0aGlzLmI9YSkmJnRoaXMuYi5zLmFwcGVuZENoaWxkKHRoaXMuZil9O2Z1bmN0aW9uIEpmKGEpe3ZhciBiPWEuYyxjPWEuYSxiPVtiLFtiWzBdLGNbMV1dLGMsW2NbMF0sYlsxXV1dLm1hcChhLmIuRWEsYS5iKTtiWzRdPWJbMF0uc2xpY2UoKTthLlZhP2EuVmEuWShbYl0pOmEuVmE9bmV3IEIoW2JdKX1IZi5wcm90b3R5cGUuUj1mdW5jdGlvbigpe3JldHVybiB0aGlzLlZhfTtmdW5jdGlvbiBLZihhKXt2Zi5jYWxsKHRoaXMse2hhbmRsZURvd25FdmVudDpMZixoYW5kbGVEcmFnRXZlbnQ6TWYsaGFuZGxlVXBFdmVudDpOZn0pO2E9YT9hOnt9O3RoaXMuYT1uZXcgSGYoYS5jbGFzc05hbWV8fFwib2wtZHJhZ2JveFwiKTt0aGlzLm89dm9pZCAwIT09YS5taW5BcmVhP2EubWluQXJlYTo2NDt0aGlzLmM9bnVsbDt0aGlzLnM9YS5jb25kaXRpb24/YS5jb25kaXRpb246cGU7dGhpcy5qPWEuYm94RW5kQ29uZGl0aW9uP2EuYm94RW5kQ29uZGl0aW9uOk9mfXQoS2YsdmYpO2Z1bmN0aW9uIE9mKGEsYixjKXthPWNbMF0tYlswXTtiPWNbMV0tYlsxXTtyZXR1cm4gYSphK2IqYj49dGhpcy5vfWZ1bmN0aW9uIE1mKGEpe2lmKHRmKGEpKXt2YXIgYj10aGlzLmEsYz1hLnBpeGVsO2IuYz10aGlzLmM7Yi5hPWM7SmYoYik7SWYoYik7QSh0aGlzLG5ldyBQZihRZixhLmNvb3JkaW5hdGUsYSkpfX1LZi5wcm90b3R5cGUuUj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuUigpfTtcbktmLnByb3RvdHlwZS5pPXRhO2Z1bmN0aW9uIE5mKGEpe2lmKCF0ZihhKSlyZXR1cm4hMDt0aGlzLmEuc2V0TWFwKG51bGwpO3RoaXMuaihhLHRoaXMuYyxhLnBpeGVsKSYmKHRoaXMuaShhKSxBKHRoaXMsbmV3IFBmKFJmLGEuY29vcmRpbmF0ZSxhKSkpO3JldHVybiExfWZ1bmN0aW9uIExmKGEpe2lmKHRmKGEpJiZvZihhKSYmdGhpcy5zKGEpKXt0aGlzLmM9YS5waXhlbDt0aGlzLmEuc2V0TWFwKGEubWFwKTt2YXIgYj10aGlzLmEsYz10aGlzLmM7Yi5jPXRoaXMuYztiLmE9YztKZihiKTtJZihiKTtBKHRoaXMsbmV3IFBmKFNmLGEuY29vcmRpbmF0ZSxhKSk7cmV0dXJuITB9cmV0dXJuITF9dmFyIFNmPVwiYm94c3RhcnRcIixRZj1cImJveGRyYWdcIixSZj1cImJveGVuZFwiO2Z1bmN0aW9uIFBmKGEsYixjKXtxYy5jYWxsKHRoaXMsYSk7dGhpcy5jb29yZGluYXRlPWI7dGhpcy5tYXBCcm93c2VyRXZlbnQ9Y310KFBmLHFjKTtmdW5jdGlvbiBUZihhKXthPWE/YTp7fTt2YXIgYj1hLmNvbmRpdGlvbj9hLmNvbmRpdGlvbjpyZjt0aGlzLkM9dm9pZCAwIT09YS5kdXJhdGlvbj9hLmR1cmF0aW9uOjIwMDt0aGlzLkc9dm9pZCAwIT09YS5vdXQ/YS5vdXQ6ITE7S2YuY2FsbCh0aGlzLHtjb25kaXRpb246YixjbGFzc05hbWU6YS5jbGFzc05hbWV8fFwib2wtZHJhZ3pvb21cIn0pfXQoVGYsS2YpO1xuVGYucHJvdG90eXBlLmk9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLkIsYj1hLlooKSxjPWEubWIoKSxkPXRoaXMuUigpLkooKTtpZih0aGlzLkcpe3ZhciBlPWIuTGQoYyksZD1bQ2YoYSxbZFswXSxkWzFdXSksQ2YoYSxbZFsyXSxkWzNdXSldLGE9U2Eodm9pZCAwKSxmLGc7Zj0wO2ZvcihnPWQubGVuZ3RoO2Y8ZzsrK2YpTWEoYSxkW2ZdKTthPTEvY2YoYSxjKTtkPShlWzJdLWVbMF0pLzIqKGEtMSk7YT0oZVszXS1lWzFdKS8yKihhLTEpO2VbMF0tPWQ7ZVsyXSs9ZDtlWzFdLT1hO2VbM10rPWE7ZD1lfWM9Yi5jb25zdHJhaW5SZXNvbHV0aW9uKGNmKGQsYykpO2U9V2EoZCk7ZT1iLmcuY2VudGVyKGUpO2IuYW5pbWF0ZSh7cmVzb2x1dGlvbjpjLGNlbnRlcjplLGR1cmF0aW9uOnRoaXMuQyxlYXNpbmc6VWN9KX07ZnVuY3Rpb24gVWYoYSl7Z2YuY2FsbCh0aGlzLHtoYW5kbGVFdmVudDpWZn0pO2E9YXx8e307dGhpcy5hPWZ1bmN0aW9uKGEpe3JldHVybiBxZihhKSYmc2YoYSl9O3RoaXMuYz1hLmNvbmRpdGlvbj9hLmNvbmRpdGlvbjp0aGlzLmE7dGhpcy5nPXZvaWQgMCE9PWEuZHVyYXRpb24/YS5kdXJhdGlvbjoxMDA7dGhpcy5pPXZvaWQgMCE9PWEucGl4ZWxEZWx0YT9hLnBpeGVsRGVsdGE6MTI4fXQoVWYsZ2YpO1xuZnVuY3Rpb24gVmYoYSl7dmFyIGI9ITE7aWYoXCJrZXlkb3duXCI9PWEudHlwZSl7dmFyIGM9YS5vcmlnaW5hbEV2ZW50LmtleUNvZGU7aWYodGhpcy5jKGEpJiYoNDA9PWN8fDM3PT1jfHwzOT09Y3x8Mzg9PWMpKXt2YXIgYj1hLm1hcC5aKCksZD1iLnZhKCkqdGhpcy5pLGU9MCxmPTA7NDA9PWM/Zj0tZDozNz09Yz9lPS1kOjM5PT1jP2U9ZDpmPWQ7ZD1bZSxmXTtrZShkLFpjKGIpKTtjPXRoaXMuZztpZihlPWIuaGEoKSlkPWIuZy5jZW50ZXIoW2VbMF0rZFswXSxlWzFdK2RbMV1dKSxjP2IuYW5pbWF0ZSh7ZHVyYXRpb246YyxlYXNpbmc6V2MsY2VudGVyOmR9KTpiLkthKGQpO2EucHJldmVudERlZmF1bHQoKTtiPSEwfX1yZXR1cm4hYn07ZnVuY3Rpb24gV2YoYSl7Z2YuY2FsbCh0aGlzLHtoYW5kbGVFdmVudDpYZn0pO2E9YT9hOnt9O3RoaXMuYz1hLmNvbmRpdGlvbj9hLmNvbmRpdGlvbjpzZjt0aGlzLmE9YS5kZWx0YT9hLmRlbHRhOjE7dGhpcy5nPXZvaWQgMCE9PWEuZHVyYXRpb24/YS5kdXJhdGlvbjoxMDB9dChXZixnZik7ZnVuY3Rpb24gWGYoYSl7dmFyIGI9ITE7aWYoXCJrZXlkb3duXCI9PWEudHlwZXx8XCJrZXlwcmVzc1wiPT1hLnR5cGUpe3ZhciBjPWEub3JpZ2luYWxFdmVudC5jaGFyQ29kZTshdGhpcy5jKGEpfHw0MyE9YyYmNDUhPWN8fChiPTQzPT1jP3RoaXMuYTotdGhpcy5hLGM9YS5tYXAuWigpLGpmKGMsYix2b2lkIDAsdGhpcy5nKSxhLnByZXZlbnREZWZhdWx0KCksYj0hMCl9cmV0dXJuIWJ9O2Z1bmN0aW9uIFlmKGEpe2dmLmNhbGwodGhpcyx7aGFuZGxlRXZlbnQ6WmZ9KTthPWF8fHt9O3RoaXMuZz0wO3RoaXMudj12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246MjUwO3RoaXMuST12b2lkIDAhPT1hLnRpbWVvdXQ/YS50aW1lb3V0OjgwO3RoaXMuVj12b2lkIDAhPT1hLnVzZUFuY2hvcj9hLnVzZUFuY2hvcjohMDt0aGlzLkc9YS5jb25zdHJhaW5SZXNvbHV0aW9ufHwhMTt0aGlzLmE9bnVsbDt0aGlzLmo9dGhpcy5pPXRoaXMubz10aGlzLmM9dm9pZCAwfXQoWWYsZ2YpO1xuZnVuY3Rpb24gWmYoYSl7dmFyIGI9YS50eXBlO2lmKFwid2hlZWxcIiE9PWImJlwibW91c2V3aGVlbFwiIT09YilyZXR1cm4hMDthLnByZXZlbnREZWZhdWx0KCk7dmFyIGI9YS5tYXAsYz1hLm9yaWdpbmFsRXZlbnQ7dGhpcy5WJiYodGhpcy5hPWEuY29vcmRpbmF0ZSk7dmFyIGQ7XCJ3aGVlbFwiPT1hLnR5cGU/KGQ9Yy5kZWx0YVksamQmJmMuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfUElYRUwmJihkLz1uZCksYy5kZWx0YU1vZGU9PT1XaGVlbEV2ZW50LkRPTV9ERUxUQV9MSU5FJiYoZCo9NDApKTpcIm1vdXNld2hlZWxcIj09YS50eXBlJiYoZD0tYy53aGVlbERlbHRhWSxrZCYmKGQvPTMpKTtpZigwPT09ZClyZXR1cm4hMTthPURhdGUubm93KCk7dm9pZCAwPT09dGhpcy5jJiYodGhpcy5jPWEpO2lmKCF0aGlzLml8fDQwMDxhLXRoaXMuYyl0aGlzLmk9ND5NYXRoLmFicyhkKT8kZjphZztpZih0aGlzLmk9PT0kZil7Yj1iLlooKTt0aGlzLmo/Y2xlYXJUaW1lb3V0KHRoaXMuaik6XG5aZShiLDEsMSk7dGhpcy5qPXNldFRpbWVvdXQodGhpcy5zLmJpbmQodGhpcyksNDAwKTt2YXIgYz1iLnZhKCkqTWF0aC5wb3coMixkLzMwMCksZT1iLkIsZj1iLmMsZz0wO2M8ZT8oYz1NYXRoLm1heChjLGUvMS41KSxnPTEpOmM+ZiYmKGM9TWF0aC5taW4oYywxLjUqZiksZz0tMSk7aWYodGhpcy5hKXt2YXIgaD0kZShiLGMsdGhpcy5hKTtiLkthKGIuZy5jZW50ZXIoaCkpfWNkKGIsYyk7IWcmJnRoaXMuRyYmYi5hbmltYXRlKHtyZXNvbHV0aW9uOmIuY29uc3RyYWluUmVzb2x1dGlvbihjLDA8ZD8tMToxKSxlYXNpbmc6VWMsYW5jaG9yOnRoaXMuYSxkdXJhdGlvbjp0aGlzLnZ9KTswPGc/Yi5hbmltYXRlKHtyZXNvbHV0aW9uOmUsZWFzaW5nOlVjLGFuY2hvcjp0aGlzLmEsZHVyYXRpb246NTAwfSk6MD5nJiZiLmFuaW1hdGUoe3Jlc29sdXRpb246ZixlYXNpbmc6VWMsYW5jaG9yOnRoaXMuYSxkdXJhdGlvbjo1MDB9KTt0aGlzLmM9YTtyZXR1cm4hMX10aGlzLmcrPWQ7ZD1NYXRoLm1heCh0aGlzLkktXG4oYS10aGlzLmMpLDApO2NsZWFyVGltZW91dCh0aGlzLm8pO3RoaXMubz1zZXRUaW1lb3V0KHRoaXMuQy5iaW5kKHRoaXMsYiksZCk7cmV0dXJuITF9WWYucHJvdG90eXBlLnM9ZnVuY3Rpb24oKXt0aGlzLmo9dm9pZCAwO1plKHRoaXMuQi5aKCksMSwtMSl9O1lmLnByb3RvdHlwZS5DPWZ1bmN0aW9uKGEpe2E9YS5aKCk7MDwkYyhhKVswXSYmYWQoYSk7amYoYSwtQWEodGhpcy5nLC0xLDEpLHRoaXMuYSx0aGlzLnYpO3RoaXMuaT12b2lkIDA7dGhpcy5nPTA7dGhpcy5hPW51bGw7dGhpcy5vPXRoaXMuYz12b2lkIDB9O3ZhciAkZj1cInRyYWNrcGFkXCIsYWc9XCJ3aGVlbFwiO2Z1bmN0aW9uIGJnKGEpe3ZmLmNhbGwodGhpcyx7aGFuZGxlRG93bkV2ZW50OmNnLGhhbmRsZURyYWdFdmVudDpkZyxoYW5kbGVVcEV2ZW50OmVnfSk7YT1hfHx7fTt0aGlzLmM9bnVsbDt0aGlzLmk9dm9pZCAwO3RoaXMuYT0hMTt0aGlzLmo9MDt0aGlzLnM9dm9pZCAwIT09YS50aHJlc2hvbGQ/YS50aHJlc2hvbGQ6LjM7dGhpcy5vPXZvaWQgMCE9PWEuZHVyYXRpb24/YS5kdXJhdGlvbjoyNTB9dChiZyx2Zik7XG5mdW5jdGlvbiBkZyhhKXt2YXIgYj0wLGM9dGhpcy5nWzBdLGQ9dGhpcy5nWzFdLGM9TWF0aC5hdGFuMihkLmNsaWVudFktYy5jbGllbnRZLGQuY2xpZW50WC1jLmNsaWVudFgpO3ZvaWQgMCE9PXRoaXMuaSYmKGI9Yy10aGlzLmksdGhpcy5qKz1iLCF0aGlzLmEmJk1hdGguYWJzKHRoaXMuaik+dGhpcy5zJiYodGhpcy5hPSEwKSk7dGhpcy5pPWM7YT1hLm1hcDtjPWEuYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtkPXhmKHRoaXMuZyk7ZFswXS09Yy5sZWZ0O2RbMV0tPWMudG9wO3RoaXMuYz1hLkVhKGQpO3RoaXMuYSYmKGM9YS5aKCksZD1aYyhjKSxhLnJlbmRlcigpLGhmKGMsZCtiLHRoaXMuYykpfWZ1bmN0aW9uIGVnKGEpe2lmKDI+dGhpcy5nLmxlbmd0aCl7YT1hLm1hcC5aKCk7WmUoYSwxLC0xKTtpZih0aGlzLmEpe3ZhciBiPVpjKGEpLGM9dGhpcy5jLGQ9dGhpcy5vLGI9YS5jb25zdHJhaW5Sb3RhdGlvbihiLDApO2hmKGEsYixjLGQpfXJldHVybiExfXJldHVybiEwfVxuZnVuY3Rpb24gY2coYSl7cmV0dXJuIDI8PXRoaXMuZy5sZW5ndGg/KGE9YS5tYXAsdGhpcy5jPW51bGwsdGhpcy5pPXZvaWQgMCx0aGlzLmE9ITEsdGhpcy5qPTAsdGhpcy52fHxaZShhLlooKSwxLDEpLCEwKTohMX1iZy5wcm90b3R5cGUuYWI9cWU7ZnVuY3Rpb24gZmcoYSl7dmYuY2FsbCh0aGlzLHtoYW5kbGVEb3duRXZlbnQ6Z2csaGFuZGxlRHJhZ0V2ZW50OmhnLGhhbmRsZVVwRXZlbnQ6aWd9KTthPWE/YTp7fTt0aGlzLmo9YS5jb25zdHJhaW5SZXNvbHV0aW9ufHwhMTt0aGlzLmM9bnVsbDt0aGlzLm89dm9pZCAwIT09YS5kdXJhdGlvbj9hLmR1cmF0aW9uOjQwMDt0aGlzLmE9dm9pZCAwO3RoaXMuaT0xfXQoZmcsdmYpO1xuZnVuY3Rpb24gaGcoYSl7dmFyIGI9MSxjPXRoaXMuZ1swXSxkPXRoaXMuZ1sxXSxlPWMuY2xpZW50WC1kLmNsaWVudFgsYz1jLmNsaWVudFktZC5jbGllbnRZLGU9TWF0aC5zcXJ0KGUqZStjKmMpO3ZvaWQgMCE9PXRoaXMuYSYmKGI9dGhpcy5hL2UpO3RoaXMuYT1lO2E9YS5tYXA7dmFyIGU9YS5aKCksZD1lLnZhKCksZj1lLmMsZz1lLkIsYz1kKmI7Yz5mPyhiPWYvZCxjPWYpOmM8ZyYmKGI9Zy9kLGM9Zyk7MSE9YiYmKHRoaXMuaT1iKTtiPWEuYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtkPXhmKHRoaXMuZyk7ZFswXS09Yi5sZWZ0O2RbMV0tPWIudG9wO3RoaXMuYz1hLkVhKGQpO2EucmVuZGVyKCk7a2YoZSxjLHRoaXMuYyl9XG5mdW5jdGlvbiBpZyhhKXtpZigyPnRoaXMuZy5sZW5ndGgpe2E9YS5tYXAuWigpO1plKGEsMSwtMSk7dmFyIGI9YS52YSgpO2lmKHRoaXMuanx8YjxhLkJ8fGI+YS5jKXt2YXIgYz10aGlzLmMsZD10aGlzLm8sYj1hLmNvbnN0cmFpblJlc29sdXRpb24oYiwwLHRoaXMuaS0xKTtrZihhLGIsYyxkKX1yZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBnZyhhKXtyZXR1cm4gMjw9dGhpcy5nLmxlbmd0aD8oYT1hLm1hcCx0aGlzLmM9bnVsbCx0aGlzLmE9dm9pZCAwLHRoaXMuaT0xLHRoaXMudnx8WmUoYS5aKCksMSwxKSwhMCk6ITF9ZmcucHJvdG90eXBlLmFiPXFlO2Z1bmN0aW9uIGpnKGEpe3ZjLmNhbGwodGhpcyk7dmFyIGI9YmIoe30sYSk7Yi5vcGFjaXR5PXZvaWQgMCE9PWEub3BhY2l0eT9hLm9wYWNpdHk6MTtiLnZpc2libGU9dm9pZCAwIT09YS52aXNpYmxlP2EudmlzaWJsZTohMDtiLnpJbmRleD12b2lkIDAhPT1hLnpJbmRleD9hLnpJbmRleDowO2IubWF4UmVzb2x1dGlvbj12b2lkIDAhPT1hLm1heFJlc29sdXRpb24/YS5tYXhSZXNvbHV0aW9uOkluZmluaXR5O2IubWluUmVzb2x1dGlvbj12b2lkIDAhPT1hLm1pblJlc29sdXRpb24/YS5taW5SZXNvbHV0aW9uOjA7dGhpcy5vYShiKTt0aGlzLmE9e2xheWVyOnRoaXMsWGM6ITB9fXQoamcsdmMpO1xuZnVuY3Rpb24ga2coYSl7YS5hLm9wYWNpdHk9QWEoYS5nZXQoXCJvcGFjaXR5XCIpLDAsMSk7YS5hLnBpPWEuU2MoKTthLmEudmlzaWJsZT1hLmcoKTthLmEuZXh0ZW50PWEuSigpO2EuYS56SW5kZXg9YS5yYSgpO2EuYS5tYXhSZXNvbHV0aW9uPWEuZ2V0KFwibWF4UmVzb2x1dGlvblwiKTthLmEubWluUmVzb2x1dGlvbj1NYXRoLm1heChhLmdldChcIm1pblJlc29sdXRpb25cIiksMCk7cmV0dXJuIGEuYX1qZy5wcm90b3R5cGUuSj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImV4dGVudFwiKX07amcucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJ2aXNpYmxlXCIpfTtqZy5wcm90b3R5cGUucmE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJ6SW5kZXhcIil9O2pnLnByb3RvdHlwZS5DPWZ1bmN0aW9uKGEpe3RoaXMuc2V0KFwidmlzaWJsZVwiLGEpfTtmdW5jdGlvbiBsZyhhKXt2YXIgYj1hfHx7fTthPWJiKHt9LGIpO2RlbGV0ZSBhLmxheWVycztiPWIubGF5ZXJzO2pnLmNhbGwodGhpcyxhKTt0aGlzLmk9W107dGhpcy5jPXt9O3kodGhpcyx4YyhtZyksdGhpcy5qZyx0aGlzKTtiP0FycmF5LmlzQXJyYXkoYik/Yj1uZXcgQWMoYi5zbGljZSgpLHt1bmlxdWU6ITB9KTp4KGIgaW5zdGFuY2VvZiBBYyw0Myk6Yj1uZXcgQWModm9pZCAwLHt1bmlxdWU6ITB9KTt0aGlzLnNldChtZyxiKX10KGxnLGpnKTtsPWxnLnByb3RvdHlwZTtsLkVjPWZ1bmN0aW9uKCl7fTtsLldiPWZ1bmN0aW9uKCl7dGhpcy5nKCkmJnRoaXMuYigpfTtcbmwuamc9ZnVuY3Rpb24oKXt0aGlzLmkuZm9yRWFjaChpYyk7dGhpcy5pLmxlbmd0aD0wO3ZhciBhPXRoaXMuZ2V0KG1nKTt0aGlzLmkucHVzaCh5KGEsXCJhZGRcIix0aGlzLmlnLHRoaXMpLHkoYSxcInJlbW92ZVwiLHRoaXMua2csdGhpcykpO2Zvcih2YXIgYiBpbiB0aGlzLmMpdGhpcy5jW2JdLmZvckVhY2goaWMpO2NiKHRoaXMuYyk7dmFyIGE9YS5hLGMsZDtiPTA7Zm9yKGM9YS5sZW5ndGg7YjxjO2IrKylkPWFbYl0sdGhpcy5jW3coZCkudG9TdHJpbmcoKV09W3koZCxcInByb3BlcnR5Y2hhbmdlXCIsdGhpcy5XYix0aGlzKSx5KGQsXCJjaGFuZ2VcIix0aGlzLldiLHRoaXMpXTt0aGlzLmIoKX07bC5pZz1mdW5jdGlvbihhKXthPWEuZWxlbWVudDt2YXIgYj13KGEpLnRvU3RyaW5nKCk7dGhpcy5jW2JdPVt5KGEsXCJwcm9wZXJ0eWNoYW5nZVwiLHRoaXMuV2IsdGhpcykseShhLFwiY2hhbmdlXCIsdGhpcy5XYix0aGlzKV07dGhpcy5iKCl9O1xubC5rZz1mdW5jdGlvbihhKXthPXcoYS5lbGVtZW50KS50b1N0cmluZygpO3RoaXMuY1thXS5mb3JFYWNoKGljKTtkZWxldGUgdGhpcy5jW2FdO3RoaXMuYigpfTtsLlBjPWZ1bmN0aW9uKGEpe3ZhciBiPXZvaWQgMCE9PWE/YTpbXSxjPWIubGVuZ3RoO3RoaXMuZ2V0KG1nKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EuUGMoYil9KTthPWtnKHRoaXMpO3ZhciBkLGU7Zm9yKGQ9Yi5sZW5ndGg7YzxkO2MrKyllPWJbY10sZS5vcGFjaXR5Kj1hLm9wYWNpdHksZS52aXNpYmxlPWUudmlzaWJsZSYmYS52aXNpYmxlLGUubWF4UmVzb2x1dGlvbj1NYXRoLm1pbihlLm1heFJlc29sdXRpb24sYS5tYXhSZXNvbHV0aW9uKSxlLm1pblJlc29sdXRpb249TWF0aC5tYXgoZS5taW5SZXNvbHV0aW9uLGEubWluUmVzb2x1dGlvbiksdm9pZCAwIT09YS5leHRlbnQmJihlLmV4dGVudD12b2lkIDAhPT1lLmV4dGVudD9ZYShlLmV4dGVudCxhLmV4dGVudCk6YS5leHRlbnQpO3JldHVybiBifTtsLlNjPWZ1bmN0aW9uKCl7cmV0dXJuXCJyZWFkeVwifTtcbnZhciBtZz1cImxheWVyc1wiO2Z1bmN0aW9uIG5nKGEpe3ZhciBiPWJiKHt9LGEpO2RlbGV0ZSBiLnNvdXJjZTtqZy5jYWxsKHRoaXMsYik7dGhpcy5qPXRoaXMuaT10aGlzLmM9bnVsbDthLm1hcCYmdGhpcy5zZXRNYXAoYS5tYXApO3kodGhpcyx4YyhcInNvdXJjZVwiKSx0aGlzLnVnLHRoaXMpO3RoaXMuU2UoYS5zb3VyY2U/YS5zb3VyY2U6bnVsbCl9dChuZyxqZyk7bD1uZy5wcm90b3R5cGU7bC5QYz1mdW5jdGlvbihhKXthPWE/YTpbXTthLnB1c2goa2codGhpcykpO3JldHVybiBhfTtsLmRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwic291cmNlXCIpfHxudWxsfTtsLlNjPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5kYSgpO3JldHVybiBhP2EuQ2E6XCJ1bmRlZmluZWRcIn07bC50Zz1mdW5jdGlvbigpe3RoaXMuYigpfTtsLnVnPWZ1bmN0aW9uKCl7dGhpcy5qJiYoaWModGhpcy5qKSx0aGlzLmo9bnVsbCk7dmFyIGE9dGhpcy5kYSgpO2EmJih0aGlzLmo9eShhLFwiY2hhbmdlXCIsdGhpcy50Zyx0aGlzKSk7dGhpcy5iKCl9O1xubC5zZXRNYXA9ZnVuY3Rpb24oYSl7dGhpcy5jJiYoaWModGhpcy5jKSx0aGlzLmM9bnVsbCk7YXx8dGhpcy5iKCk7dGhpcy5pJiYoaWModGhpcy5pKSx0aGlzLmk9bnVsbCk7YSYmKHRoaXMuYz15KGEsXCJwcmVjb21wb3NlXCIsZnVuY3Rpb24oYSl7dmFyIGI9a2codGhpcyk7Yi5YYz0hMTtiLnpJbmRleD1JbmZpbml0eTthLmZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheS5wdXNoKGIpO2EuZnJhbWVTdGF0ZS5sYXllclN0YXRlc1t3KHRoaXMpXT1ifSx0aGlzKSx0aGlzLmk9eSh0aGlzLFwiY2hhbmdlXCIsYS5yZW5kZXIsYSksdGhpcy5iKCkpfTtsLlNlPWZ1bmN0aW9uKGEpe3RoaXMuc2V0KFwic291cmNlXCIsYSl9O2Z1bmN0aW9uIG9nKCl7dGhpcy5iPXt9O3RoaXMuZj0wfW9nLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuYj17fTt0aGlzLmY9MH07b2cucHJvdG90eXBlLmdldD1mdW5jdGlvbihhLGIsYyl7YT1iK1wiOlwiK2ErXCI6XCIrKGM/SmMoYyk6XCJudWxsXCIpO3JldHVybiBhIGluIHRoaXMuYj90aGlzLmJbYV06bnVsbH07b2cucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIsYyxkKXt0aGlzLmJbYitcIjpcIithK1wiOlwiKyhjP0pjKGMpOlwibnVsbFwiKV09ZDsrK3RoaXMuZn07dmFyIHBnPW5ldyBvZztmdW5jdGlvbiBxZygpe3JldHVyblsxLDAsMCwxLDAsMF19ZnVuY3Rpb24gcmcoYSxiKXthWzBdPWJbMF07YVsxXT1iWzFdO2FbMl09YlsyXTthWzNdPWJbM107YVs0XT1iWzRdO2FbNV09Yls1XTtyZXR1cm4gYX1mdW5jdGlvbiBzZyhhLGIpe3ZhciBjPWJbMF0sZD1iWzFdO2JbMF09YVswXSpjK2FbMl0qZCthWzRdO2JbMV09YVsxXSpjK2FbM10qZCthWzVdO3JldHVybiBifWZ1bmN0aW9uIHRnKGEsYixjLGQsZSxmLGcsaCl7dmFyIGs9TWF0aC5zaW4oZik7Zj1NYXRoLmNvcyhmKTthWzBdPWQqZjthWzFdPWUqazthWzJdPS1kKms7YVszXT1lKmY7YVs0XT1nKmQqZi1oKmQqaytiO2FbNV09ZyplKmsraCplKmYrYztyZXR1cm4gYX07ZnVuY3Rpb24gdWcoYSxiKXt0aGlzLmk9Yjt0aGlzLmY9e307dGhpcy5jPXt9fXQodWcsb2MpO3VnLnByb3RvdHlwZS5rYT1mdW5jdGlvbigpe2Zvcih2YXIgYSBpbiB0aGlzLmYpcGModGhpcy5mW2FdKX07ZnVuY3Rpb24gdmcoKXtpZigzMjxwZy5mKXt2YXIgYT0wLGIsYztmb3IoYiBpbiBwZy5iKWM9cGcuYltiXSxhKysmM3x8dGMoYyl8fChkZWxldGUgcGcuYltiXSwtLXBnLmYpfX1cbmZ1bmN0aW9uIHdnKGEsYixjLGQsZSxmKXtmdW5jdGlvbiBnKGEsYil7dmFyIGQ9dyhhKS50b1N0cmluZygpLGY9Yy5sYXllclN0YXRlc1t3KGIpXS5YYztpZighKGQgaW4gYy5za2lwcGVkRmVhdHVyZVVpZHMpfHxmKXJldHVybiBlLmNhbGwobnVsbCxhLGY/YjpudWxsKX12YXIgaCxrPWMudmlld1N0YXRlLG09ay5yZXNvbHV0aW9uLG49ay5wcm9qZWN0aW9uLGs9YjtpZihuLmMpe3ZhciBuPW4uSigpLHA9YWIobikscT1iWzBdO2lmKHE8blswXXx8cT5uWzJdKWs9W3ErcCpNYXRoLmNlaWwoKG5bMF0tcSkvcCksYlsxXV19bj1jLmxheWVyU3RhdGVzQXJyYXk7Zm9yKHA9bi5sZW5ndGgtMTswPD1wOy0tcCl7dmFyIHU9bltwXSxxPXUubGF5ZXI7aWYodS52aXNpYmxlJiZtPj11Lm1pblJlc29sdXRpb24mJm08dS5tYXhSZXNvbHV0aW9uJiZmLmNhbGwobnVsbCxxKSYmKHU9eGcoYSxxKSxxLmRhKCkmJihoPXUubyhxLmRhKCkuQz9rOmIsYyxkLGcsbnVsbCkpLGgpKXJldHVybiBofX1cbmZ1bmN0aW9uIHhnKGEsYil7dmFyIGM9dyhiKS50b1N0cmluZygpO2lmKGMgaW4gYS5mKXJldHVybiBhLmZbY107dmFyIGQ9Yi5FYyhhKTthLmZbY109ZDthLmNbY109eShkLFwiY2hhbmdlXCIsYS5qLGEpO3JldHVybiBkfXVnLnByb3RvdHlwZS5qPWZ1bmN0aW9uKCl7dGhpcy5pLnJlbmRlcigpfTt1Zy5wcm90b3R5cGUudT10YTt1Zy5wcm90b3R5cGUuSz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYyBpbiB0aGlzLmYpaWYoIShiJiZjIGluIGIubGF5ZXJTdGF0ZXMpKXt2YXIgZD1jLGU9dGhpcy5mW2RdO2RlbGV0ZSB0aGlzLmZbZF07aWModGhpcy5jW2RdKTtkZWxldGUgdGhpcy5jW2RdO3BjKGUpfX07ZnVuY3Rpb24gcmEoYSxiKXtyZXR1cm4gYS56SW5kZXgtYi56SW5kZXh9O2Z1bmN0aW9uIHlnKGEsYixjLGQsZSl7cWMuY2FsbCh0aGlzLGEpO3RoaXMudmVjdG9yQ29udGV4dD1iO3RoaXMuZnJhbWVTdGF0ZT1jO3RoaXMuY29udGV4dD1kO3RoaXMuZ2xDb250ZXh0PWV9dCh5ZyxxYyk7dmFyIHpnPVswLDAsMCwxXSxBZz1bXSxCZz1bMCwwLDAsMV07ZnVuY3Rpb24gQ2coYSxiLGMsZCl7YiYmKGEudHJhbnNsYXRlKGMsZCksYS5yb3RhdGUoYiksYS50cmFuc2xhdGUoLWMsLWQpKX07ZnVuY3Rpb24gRGcoKXt9bD1EZy5wcm90b3R5cGU7bC5GYz1mdW5jdGlvbigpe307bC5HYz1mdW5jdGlvbigpe307bC5IYz1mdW5jdGlvbigpe307bC5JYz1mdW5jdGlvbigpe307bC5KYz1mdW5jdGlvbigpe307bC5LYz1mdW5jdGlvbigpe307bC5MYz1mdW5jdGlvbigpe307bC5RYT1mdW5jdGlvbigpe307bC5TYT1mdW5jdGlvbigpe307bC5sYz1mdW5jdGlvbigpe307bC5OYT1mdW5jdGlvbigpe307ZnVuY3Rpb24gRWcoYSxiLGMsZCxlKXt0aGlzLmE9YTt0aGlzLkI9Yjt0aGlzLmc9Yzt0aGlzLnY9ZDt0aGlzLkRhPWU7dGhpcy5OPXRoaXMuYj10aGlzLmY9dGhpcy5JPXRoaXMuQWE9dGhpcy5HPW51bGw7dGhpcy5XPXRoaXMuVj10aGlzLm89dGhpcy5hYT10aGlzLkM9dGhpcy5zPTA7dGhpcy4kPSExO3RoaXMuYz10aGlzLkxhPTA7dGhpcy5jYT0hMTt0aGlzLmZhPTA7dGhpcy5lYT1cIlwiO3RoaXMuc2E9dGhpcy50Yj0wO3RoaXMueWE9ITE7dGhpcy51PXRoaXMuQmE9MDt0aGlzLmdhPXRoaXMuaj10aGlzLmk9bnVsbDt0aGlzLks9W107dGhpcy5DYT1xZygpfXQoRWcsRGcpO1xuZnVuY3Rpb24gRmcoYSxiLGMpe2lmKGEuTil7Yj1zZShiLDAsYywyLGEudixhLkspO2M9YS5hO3ZhciBkPWEuQ2EsZT1jLmdsb2JhbEFscGhhOzEhPWEubyYmKGMuZ2xvYmFsQWxwaGE9ZSphLm8pO3ZhciBmPWEuTGE7YS4kJiYoZis9YS5EYSk7dmFyIGcsaDtnPTA7Zm9yKGg9Yi5sZW5ndGg7ZzxoO2crPTIpe3ZhciBrPWJbZ10tYS5zLG09YltnKzFdLWEuQzthLmNhJiYoaz1NYXRoLnJvdW5kKGspLG09TWF0aC5yb3VuZChtKSk7aWYoZnx8MSE9YS5jKXt2YXIgbj1rK2EucyxwPW0rYS5DO3RnKGQsbixwLGEuYyxhLmMsZiwtbiwtcCk7Yy5zZXRUcmFuc2Zvcm0uYXBwbHkoYyxkKX1jLmRyYXdJbWFnZShhLk4sYS5WLGEuVyxhLmZhLGEuYWEsayxtLGEuZmEsYS5hYSl9KGZ8fDEhPWEuYykmJmMuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKTsxIT1hLm8mJihjLmdsb2JhbEFscGhhPWUpfX1cbmZ1bmN0aW9uIEdnKGEsYixjLGQpe3ZhciBlPTA7aWYoYS5nYSYmXCJcIiE9PWEuZWEpe2EuaSYmSGcoYSxhLmkpO2EuaiYmSWcoYSxhLmopO3ZhciBmPWEuZ2EsZz1hLmEsaD1hLkk7aD8oaC5mb250IT1mLmZvbnQmJihoLmZvbnQ9Zy5mb250PWYuZm9udCksaC50ZXh0QWxpZ24hPWYudGV4dEFsaWduJiYoaC50ZXh0QWxpZ249Zy50ZXh0QWxpZ249Zi50ZXh0QWxpZ24pLGgudGV4dEJhc2VsaW5lIT1mLnRleHRCYXNlbGluZSYmKGgudGV4dEJhc2VsaW5lPWcudGV4dEJhc2VsaW5lPWYudGV4dEJhc2VsaW5lKSk6KGcuZm9udD1mLmZvbnQsZy50ZXh0QWxpZ249Zi50ZXh0QWxpZ24sZy50ZXh0QmFzZWxpbmU9Zi50ZXh0QmFzZWxpbmUsYS5JPXtmb250OmYuZm9udCx0ZXh0QWxpZ246Zi50ZXh0QWxpZ24sdGV4dEJhc2VsaW5lOmYudGV4dEJhc2VsaW5lfSk7Yj1zZShiLGUsYyxkLGEudixhLkspO2Y9YS5hO2c9YS5CYTtmb3IoYS55YSYmKGcrPWEuRGEpO2U8YztlKz1kKXt2YXIgaD1iW2VdK1xuYS50YixrPWJbZSsxXSthLnNhO2lmKGd8fDEhPWEudSl7dmFyIG09dGcoYS5DYSxoLGssYS51LGEudSxnLC1oLC1rKTtmLnNldFRyYW5zZm9ybS5hcHBseShmLG0pfWEuaiYmZi5zdHJva2VUZXh0KGEuZWEsaCxrKTthLmkmJmYuZmlsbFRleHQoYS5lYSxoLGspfShnfHwxIT1hLnUpJiZmLnNldFRyYW5zZm9ybSgxLDAsMCwxLDAsMCl9fWZ1bmN0aW9uIEpnKGEsYixjLGQsZSxmKXt2YXIgZz1hLmE7YT1zZShiLGMsZCxlLGEudixhLkspO2cubW92ZVRvKGFbMF0sYVsxXSk7Yj1hLmxlbmd0aDtmJiYoYi09Mik7Zm9yKGM9MjtjPGI7Yys9MilnLmxpbmVUbyhhW2NdLGFbYysxXSk7ZiYmZy5jbG9zZVBhdGgoKTtyZXR1cm4gZH1mdW5jdGlvbiBLZyhhLGIsYyxkLGUpe3ZhciBmLGc7Zj0wO2ZvcihnPWQubGVuZ3RoO2Y8ZzsrK2YpYz1KZyhhLGIsYyxkW2ZdLGUsITApO3JldHVybiBjfWw9RWcucHJvdG90eXBlO1xubC5GYz1mdW5jdGlvbihhKXtpZihaYSh0aGlzLmcsYS5KKCkpKXtpZih0aGlzLmZ8fHRoaXMuYil7dGhpcy5mJiZIZyh0aGlzLHRoaXMuZik7dGhpcy5iJiZJZyh0aGlzLHRoaXMuYik7dmFyIGI7Yj0oYj1hLmwpP3NlKGIsMCxiLmxlbmd0aCxhLkEsdGhpcy52LHRoaXMuSyk6bnVsbDt2YXIgYz1iWzJdLWJbMF0sZD1iWzNdLWJbMV0sYz1NYXRoLnNxcnQoYypjK2QqZCksZD10aGlzLmE7ZC5iZWdpblBhdGgoKTtkLmFyYyhiWzBdLGJbMV0sYywwLDIqTWF0aC5QSSk7dGhpcy5mJiZkLmZpbGwoKTt0aGlzLmImJmQuc3Ryb2tlKCl9XCJcIiE9PXRoaXMuZWEmJkdnKHRoaXMsYS5oYSgpLDIsMil9fTtsLktjPWZ1bmN0aW9uKGEpe3ZhciBiPWEubDthPWEuQTt0aGlzLk4mJkZnKHRoaXMsYixiLmxlbmd0aCk7XCJcIiE9PXRoaXMuZWEmJkdnKHRoaXMsYixiLmxlbmd0aCxhKX07XG5sLkljPWZ1bmN0aW9uKGEpe3ZhciBiPWEubDthPWEuQTt0aGlzLk4mJkZnKHRoaXMsYixiLmxlbmd0aCk7XCJcIiE9PXRoaXMuZWEmJkdnKHRoaXMsYixiLmxlbmd0aCxhKX07bC5HYz1mdW5jdGlvbihhKXtpZihaYSh0aGlzLmcsYS5KKCkpKXtpZih0aGlzLmIpe0lnKHRoaXMsdGhpcy5iKTt2YXIgYj10aGlzLmEsYz1hLmw7Yi5iZWdpblBhdGgoKTtKZyh0aGlzLGMsMCxjLmxlbmd0aCxhLkEsITEpO2Iuc3Ryb2tlKCl9XCJcIiE9PXRoaXMuZWEmJihhPUxnKGEpLEdnKHRoaXMsYSwyLDIpKX19O1xubC5IYz1mdW5jdGlvbihhKXt2YXIgYj1hLkooKTtpZihaYSh0aGlzLmcsYikpe2lmKHRoaXMuYil7SWcodGhpcyx0aGlzLmIpO3ZhciBiPXRoaXMuYSxjPWEubCxkPTAsZT1hLmdiKCksZj1hLkE7Yi5iZWdpblBhdGgoKTt2YXIgZyxoO2c9MDtmb3IoaD1lLmxlbmd0aDtnPGg7KytnKWQ9SmcodGhpcyxjLGQsZVtnXSxmLCExKTtiLnN0cm9rZSgpfVwiXCIhPT10aGlzLmVhJiYoYT1NZyhhKSxHZyh0aGlzLGEsYS5sZW5ndGgsMikpfX07bC5MYz1mdW5jdGlvbihhKXtpZihaYSh0aGlzLmcsYS5KKCkpKXtpZih0aGlzLmJ8fHRoaXMuZil7dGhpcy5mJiZIZyh0aGlzLHRoaXMuZik7dGhpcy5iJiZJZyh0aGlzLHRoaXMuYik7dmFyIGI9dGhpcy5hO2IuYmVnaW5QYXRoKCk7S2codGhpcyxVZShhKSwwLGEuZ2IoKSxhLkEpO3RoaXMuZiYmYi5maWxsKCk7dGhpcy5iJiZiLnN0cm9rZSgpfVwiXCIhPT10aGlzLmVhJiYoYT1WZShhKSxHZyh0aGlzLGEsMiwyKSl9fTtcbmwuSmM9ZnVuY3Rpb24oYSl7aWYoWmEodGhpcy5nLGEuSigpKSl7aWYodGhpcy5ifHx0aGlzLmYpe3RoaXMuZiYmSGcodGhpcyx0aGlzLmYpO3RoaXMuYiYmSWcodGhpcyx0aGlzLmIpO3ZhciBiPXRoaXMuYSxjPU5nKGEpLGQ9MCxlPWEuYSxmPWEuQSxnLGg7Yi5iZWdpblBhdGgoKTtnPTA7Zm9yKGg9ZS5sZW5ndGg7ZzxoOysrZylkPUtnKHRoaXMsYyxkLGVbZ10sZik7dGhpcy5mJiZiLmZpbGwoKTt0aGlzLmImJmIuc3Ryb2tlKCl9XCJcIiE9PXRoaXMuZWEmJihhPU9nKGEpLEdnKHRoaXMsYSxhLmxlbmd0aCwyKSl9fTtmdW5jdGlvbiBIZyhhLGIpe3ZhciBjPWEuYSxkPWEuRztkP2QuZmlsbFN0eWxlIT1iLmZpbGxTdHlsZSYmKGQuZmlsbFN0eWxlPWMuZmlsbFN0eWxlPWIuZmlsbFN0eWxlKTooYy5maWxsU3R5bGU9Yi5maWxsU3R5bGUsYS5HPXtmaWxsU3R5bGU6Yi5maWxsU3R5bGV9KX1cbmZ1bmN0aW9uIElnKGEsYil7dmFyIGM9YS5hLGQ9YS5BYTtkPyhkLmxpbmVDYXAhPWIubGluZUNhcCYmKGQubGluZUNhcD1jLmxpbmVDYXA9Yi5saW5lQ2FwKSxvZCYmIXBhKGQubGluZURhc2gsYi5saW5lRGFzaCkmJmMuc2V0TGluZURhc2goZC5saW5lRGFzaD1iLmxpbmVEYXNoKSxkLmxpbmVKb2luIT1iLmxpbmVKb2luJiYoZC5saW5lSm9pbj1jLmxpbmVKb2luPWIubGluZUpvaW4pLGQubGluZVdpZHRoIT1iLmxpbmVXaWR0aCYmKGQubGluZVdpZHRoPWMubGluZVdpZHRoPWIubGluZVdpZHRoKSxkLm1pdGVyTGltaXQhPWIubWl0ZXJMaW1pdCYmKGQubWl0ZXJMaW1pdD1jLm1pdGVyTGltaXQ9Yi5taXRlckxpbWl0KSxkLnN0cm9rZVN0eWxlIT1iLnN0cm9rZVN0eWxlJiYoZC5zdHJva2VTdHlsZT1jLnN0cm9rZVN0eWxlPWIuc3Ryb2tlU3R5bGUpKTooYy5saW5lQ2FwPWIubGluZUNhcCxvZCYmYy5zZXRMaW5lRGFzaChiLmxpbmVEYXNoKSxjLmxpbmVKb2luPWIubGluZUpvaW4sYy5saW5lV2lkdGg9XG5iLmxpbmVXaWR0aCxjLm1pdGVyTGltaXQ9Yi5taXRlckxpbWl0LGMuc3Ryb2tlU3R5bGU9Yi5zdHJva2VTdHlsZSxhLkFhPXtsaW5lQ2FwOmIubGluZUNhcCxsaW5lRGFzaDpiLmxpbmVEYXNoLGxpbmVKb2luOmIubGluZUpvaW4sbGluZVdpZHRoOmIubGluZVdpZHRoLG1pdGVyTGltaXQ6Yi5taXRlckxpbWl0LHN0cm9rZVN0eWxlOmIuc3Ryb2tlU3R5bGV9KX1cbmwuU2E9ZnVuY3Rpb24oYSxiKXtpZihhKXt2YXIgYz1hLmI7dGhpcy5mPXtmaWxsU3R5bGU6TWMoYz9jOnpnKX19ZWxzZSB0aGlzLmY9bnVsbDtpZihiKXt2YXIgYz1iLmIsZD1iLmcsZT1iLmYsZj1iLmosZz1iLmksaD1iLmMsaz1iLnU7dGhpcy5iPXtsaW5lQ2FwOnZvaWQgMCE9PWQ/ZDpcInJvdW5kXCIsbGluZURhc2g6ZT9lOkFnLGxpbmVEYXNoT2Zmc2V0OmY/ZjowLGxpbmVKb2luOnZvaWQgMCE9PWc/ZzpcInJvdW5kXCIsbGluZVdpZHRoOnRoaXMuQioodm9pZCAwIT09aD9oOjEpLG1pdGVyTGltaXQ6dm9pZCAwIT09az9rOjEwLHN0cm9rZVN0eWxlOk1jKGM/YzpCZyl9fWVsc2UgdGhpcy5iPW51bGx9O1xubC5sYz1mdW5jdGlvbihhKXtpZihhKXt2YXIgYj1hLlNiKCksYz1hLmlhKDEpLGQ9YS5kYygpLGU9YS5uYigpO3RoaXMucz1iWzBdO3RoaXMuQz1iWzFdO3RoaXMuYWE9ZVsxXTt0aGlzLk49Yzt0aGlzLm89YS5pO3RoaXMuVj1kWzBdO3RoaXMuVz1kWzFdO3RoaXMuJD1hLnM7dGhpcy5MYT1hLm87dGhpcy5jPWEuZzt0aGlzLmNhPWEuSzt0aGlzLmZhPWVbMF19ZWxzZSB0aGlzLk49bnVsbH07XG5sLk5hPWZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPWEucWEoKTtiPyhiPWIuYix0aGlzLmk9e2ZpbGxTdHlsZTpNYyhiP2I6emcpfSk6dGhpcy5pPW51bGw7dmFyIGM9YS5tYSgpO2lmKGMpe3ZhciBiPWMuYixkPWMuZyxlPWMuZixmPWMuaixnPWMuaSxoPWMuYyxjPWMudTt0aGlzLmo9e2xpbmVDYXA6dm9pZCAwIT09ZD9kOlwicm91bmRcIixsaW5lRGFzaDplP2U6QWcsbGluZURhc2hPZmZzZXQ6Zj9mOjAsbGluZUpvaW46dm9pZCAwIT09Zz9nOlwicm91bmRcIixsaW5lV2lkdGg6dm9pZCAwIT09aD9oOjEsbWl0ZXJMaW1pdDp2b2lkIDAhPT1jP2M6MTAsc3Ryb2tlU3R5bGU6TWMoYj9iOkJnKX19ZWxzZSB0aGlzLmo9bnVsbDt2YXIgYj1hLmYsZD1hLmEsZT1hLmMsZj1hLmcsZz1hLmksaD1hLmIsYz1hLm5hKCksaz1hLnU7YT1hLmo7dGhpcy5nYT17Zm9udDp2b2lkIDAhPT1iP2I6XCIxMHB4IHNhbnMtc2VyaWZcIix0ZXh0QWxpZ246dm9pZCAwIT09az9rOlwiY2VudGVyXCIsdGV4dEJhc2VsaW5lOnZvaWQgMCE9PVxuYT9hOlwibWlkZGxlXCJ9O3RoaXMuZWE9dm9pZCAwIT09Yz9jOlwiXCI7dGhpcy50Yj12b2lkIDAhPT1kP3RoaXMuQipkOjA7dGhpcy5zYT12b2lkIDAhPT1lP3RoaXMuQiplOjA7dGhpcy55YT12b2lkIDAhPT1mP2Y6ITE7dGhpcy5CYT12b2lkIDAhPT1nP2c6MDt0aGlzLnU9dGhpcy5CKih2b2lkIDAhPT1oP2g6MSl9ZWxzZSB0aGlzLmVhPVwiXCJ9O2Z1bmN0aW9uIFBnKGEsYil7dWcuY2FsbCh0aGlzLDAsYik7dGhpcy5nPU9jKCk7dGhpcy5iPXRoaXMuZy5jYW52YXM7dGhpcy5iLnN0eWxlLndpZHRoPVwiMTAwJVwiO3RoaXMuYi5zdHlsZS5oZWlnaHQ9XCIxMDAlXCI7dGhpcy5iLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO3RoaXMuYi5jbGFzc05hbWU9XCJvbC11bnNlbGVjdGFibGVcIjthLmluc2VydEJlZm9yZSh0aGlzLmIsYS5jaGlsZE5vZGVzWzBdfHxudWxsKTt0aGlzLmE9ITA7dGhpcy5vPXFnKCl9dChQZyx1Zyk7XG5mdW5jdGlvbiBRZyhhLGIsYyl7dmFyIGQ9YS5pLGU9YS5nO2lmKHRjKGQsYikpe3ZhciBmPWMuZXh0ZW50LGc9Yy5waXhlbFJhdGlvLGg9Yy52aWV3U3RhdGUucm90YXRpb24saz1jLnZpZXdTdGF0ZSxtPWMucGl4ZWxSYXRpby9rLnJlc29sdXRpb247YT10ZyhhLm8sYS5iLndpZHRoLzIsYS5iLmhlaWdodC8yLG0sLW0sLWsucm90YXRpb24sLWsuY2VudGVyWzBdLC1rLmNlbnRlclsxXSk7QShkLG5ldyB5ZyhiLG5ldyBFZyhlLGcsZixhLGgpLGMsZSxudWxsKSl9fVBnLnByb3RvdHlwZS5IPWZ1bmN0aW9uKCl7cmV0dXJuXCJjYW52YXNcIn07XG5QZy5wcm90b3R5cGUudT1mdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmcsYz1hLnBpeGVsUmF0aW8sZD1NYXRoLnJvdW5kKGEuc2l6ZVswXSpjKSxlPU1hdGgucm91bmQoYS5zaXplWzFdKmMpO3RoaXMuYi53aWR0aCE9ZHx8dGhpcy5iLmhlaWdodCE9ZT8odGhpcy5iLndpZHRoPWQsdGhpcy5iLmhlaWdodD1lKTpiLmNsZWFyUmVjdCgwLDAsZCxlKTt2YXIgYz1hLnZpZXdTdGF0ZS5yb3RhdGlvbixmPWEudmlld1N0YXRlLGc9YS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSxoPWEucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm07dGcoZyxhLnNpemVbMF0vMixhLnNpemVbMV0vMiwxL2YucmVzb2x1dGlvbiwtMS9mLnJlc29sdXRpb24sLWYucm90YXRpb24sLWYuY2VudGVyWzBdLC1mLmNlbnRlclsxXSk7Zj1yZyhoLGcpO2c9ZlswXSpmWzNdLWZbMV0qZlsyXTt4KCEhZywzMik7dmFyIGg9ZlswXSxrPWZbMV0sbT1mWzJdLG49ZlszXSxwPWZbNF0scT1mWzVdO2ZbMF09bi9nO2ZbMV09XG4tay9nO2ZbMl09LW0vZztmWzNdPWgvZztmWzRdPShtKnEtbipwKS9nO2ZbNV09LShoKnEtaypwKS9nO1FnKHRoaXMsXCJwcmVjb21wb3NlXCIsYSk7Zj1hLmxheWVyU3RhdGVzQXJyYXk7cWEoZik7YyYmKGIuc2F2ZSgpLENnKGIsYyxkLzIsZS8yKSk7ZD1hLnZpZXdTdGF0ZS5yZXNvbHV0aW9uO2U9MDtmb3IoZz1mLmxlbmd0aDtlPGc7KytlKWg9ZltlXSxrPWgubGF5ZXIsaz14Zyh0aGlzLGspLGgudmlzaWJsZSYmZD49aC5taW5SZXNvbHV0aW9uJiZkPGgubWF4UmVzb2x1dGlvbiYmXCJyZWFkeVwiPT1oLnBpJiZrLkkoYSxoKSYmay52KGEsaCxiKTtjJiZiLnJlc3RvcmUoKTtRZyh0aGlzLFwicG9zdGNvbXBvc2VcIixhKTt0aGlzLmF8fCh0aGlzLmIuc3R5bGUuZGlzcGxheT1cIlwiLHRoaXMuYT0hMCk7Zm9yKHZhciB1IGluIHRoaXMuZilpZighKHUgaW4gYS5sYXllclN0YXRlcykpe2EucG9zdFJlbmRlckZ1bmN0aW9ucy5wdXNoKHRoaXMuSy5iaW5kKHRoaXMpKTticmVha31hLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaCh2Zyl9ZWxzZSB0aGlzLmEmJlxuKHRoaXMuYi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMuYT0hMSl9O3ZhciBSZz1bXCJQb2x5Z29uXCIsXCJDaXJjbGVcIixcIkxpbmVTdHJpbmdcIixcIkltYWdlXCIsXCJUZXh0XCJdO2Z1bmN0aW9uIFNnKCl7fTtmdW5jdGlvbiBUZyhhKXthPWF8fHt9O3RoaXMuYj12b2lkIDAhPT1hLmNvbG9yP2EuY29sb3I6bnVsbDt0aGlzLmc9YS5saW5lQ2FwO3RoaXMuZj12b2lkIDAhPT1hLmxpbmVEYXNoP2EubGluZURhc2g6bnVsbDt0aGlzLmo9YS5saW5lRGFzaE9mZnNldDt0aGlzLmk9YS5saW5lSm9pbjt0aGlzLnU9YS5taXRlckxpbWl0O3RoaXMuYz1hLndpZHRoO3RoaXMuYT12b2lkIDB9VGcucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iO3JldHVybiBuZXcgVGcoe2NvbG9yOmEmJmEuc2xpY2U/YS5zbGljZSgpOmF8fHZvaWQgMCxsaW5lQ2FwOnRoaXMuZyxsaW5lRGFzaDp0aGlzLmY/dGhpcy5mLnNsaWNlKCk6dm9pZCAwLGxpbmVEYXNoT2Zmc2V0OnRoaXMuaixsaW5lSm9pbjp0aGlzLmksbWl0ZXJMaW1pdDp0aGlzLnUsd2lkdGg6dGhpcy5jfSl9O1RnLnByb3RvdHlwZS5zZXRMaW5lRGFzaD1mdW5jdGlvbihhKXt0aGlzLmY9YTt0aGlzLmE9dm9pZCAwfTt2YXIgVWc7XG4oZnVuY3Rpb24oKXt2YXIgYT17fSxiPXtVOmF9OyhmdW5jdGlvbihjKXtpZihcIm9iamVjdFwiPT09dHlwZW9mIGEmJlwidW5kZWZpbmVkXCIhPT10eXBlb2YgYiliLlU9YygpO2Vsc2V7dmFyIGQ7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB3aW5kb3c/ZD13aW5kb3c6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBnbG9iYWw/ZD1nbG9iYWw6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBzZWxmP2Q9c2VsZjpkPXRoaXM7ZC5VaT1jKCl9fSkoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZChhLGIsZyl7ZnVuY3Rpb24gZShoLGspe2lmKCFiW2hdKXtpZighYVtoXSl7dmFyIG09XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighayYmbSlyZXR1cm4gbShoLCEwKTtpZihmKXJldHVybiBmKGgsITApO209RXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2grXCInXCIpO3Rocm93IG0uY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixtO31tPWJbaF09e1U6e319O2FbaF1bMF0uY2FsbChtLlUsZnVuY3Rpb24oYil7dmFyIGQ9XG5hW2hdWzFdW2JdO3JldHVybiBlKGQ/ZDpiKX0sbSxtLlUsZCxhLGIsZyl9cmV0dXJuIGJbaF0uVX1mb3IodmFyIGY9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxtPTA7bTxnLmxlbmd0aDttKyspZShnW21dKTtyZXR1cm4gZX0oezE6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGQpKXJldHVybiBuZXcgZChhLGIpO3RoaXMueGM9TWF0aC5tYXgoNCxhfHw5KTt0aGlzLkVkPU1hdGgubWF4KDIsTWF0aC5jZWlsKC40KnRoaXMueGMpKTtiJiZ0aGlzLkNmKGIpO3RoaXMuY2xlYXIoKX1mdW5jdGlvbiBlKGEsYil7aChhLDAsYS5jaGlsZHJlbi5sZW5ndGgsYixhKX1mdW5jdGlvbiBoKGEsYixkLGUsZil7Znx8KGY9eihudWxsKSk7Zi5NPUluZmluaXR5O2YuUD1JbmZpbml0eTtmLk89LUluZmluaXR5O2YuUz0tSW5maW5pdHk7Zm9yKHZhciBnO2I8ZDtiKyspZz1hLmNoaWxkcmVuW2JdLGsoZixhLnVhP2UoZyk6Zyk7cmV0dXJuIGZ9XG5mdW5jdGlvbiBrKGEsYil7YS5NPU1hdGgubWluKGEuTSxiLk0pO2EuUD1NYXRoLm1pbihhLlAsYi5QKTthLk89TWF0aC5tYXgoYS5PLGIuTyk7YS5TPU1hdGgubWF4KGEuUyxiLlMpfWZ1bmN0aW9uIG0oYSxiKXtyZXR1cm4gYS5NLWIuTX1mdW5jdGlvbiBuKGEsYil7cmV0dXJuIGEuUC1iLlB9ZnVuY3Rpb24gcChhKXtyZXR1cm4oYS5PLWEuTSkqKGEuUy1hLlApfWZ1bmN0aW9uIHEoYSl7cmV0dXJuIGEuTy1hLk0rKGEuUy1hLlApfWZ1bmN0aW9uIHUoYSxiKXtyZXR1cm4gYS5NPD1iLk0mJmEuUDw9Yi5QJiZiLk88PWEuTyYmYi5TPD1hLlN9ZnVuY3Rpb24gRihhLGIpe3JldHVybiBiLk08PWEuTyYmYi5QPD1hLlMmJmIuTz49YS5NJiZiLlM+PWEuUH1mdW5jdGlvbiB6KGEpe3JldHVybntjaGlsZHJlbjphLGhlaWdodDoxLHVhOiEwLE06SW5maW5pdHksUDpJbmZpbml0eSxPOi1JbmZpbml0eSxTOi1JbmZpbml0eX19ZnVuY3Rpb24gQyhhLGIsZCxlLGYpe2Zvcih2YXIgZz1bYixkXSxcbmg7Zy5sZW5ndGg7KWQ9Zy5wb3AoKSxiPWcucG9wKCksZC1iPD1lfHwoaD1iK01hdGguY2VpbCgoZC1iKS9lLzIpKmUsRChhLGgsYixkLGYpLGcucHVzaChiLGgsaCxkKSl9Yi5VPWQ7dmFyIEQ9YShcInF1aWNrc2VsZWN0XCIpO2QucHJvdG90eXBlPXthbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56ZCh0aGlzLmRhdGEsW10pfSxzZWFyY2g6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5kYXRhLGQ9W10sZT10aGlzLnphO2lmKCFGKGEsYikpcmV0dXJuIGQ7Zm9yKHZhciBmPVtdLGcsaCxrLG07Yjspe2c9MDtmb3IoaD1iLmNoaWxkcmVuLmxlbmd0aDtnPGg7ZysrKWs9Yi5jaGlsZHJlbltnXSxtPWIudWE/ZShrKTprLEYoYSxtKSYmKGIudWE/ZC5wdXNoKGspOnUoYSxtKT90aGlzLnpkKGssZCk6Zi5wdXNoKGspKTtiPWYucG9wKCl9cmV0dXJuIGR9LGxvYWQ6ZnVuY3Rpb24oYSl7aWYoIWF8fCFhLmxlbmd0aClyZXR1cm4gdGhpcztpZihhLmxlbmd0aDx0aGlzLkVkKXtmb3IodmFyIGI9MCxkPVxuYS5sZW5ndGg7YjxkO2IrKyl0aGlzLmJhKGFbYl0pO3JldHVybiB0aGlzfWE9dGhpcy5CZChhLnNsaWNlKCksMCxhLmxlbmd0aC0xLDApO3RoaXMuZGF0YS5jaGlsZHJlbi5sZW5ndGg/dGhpcy5kYXRhLmhlaWdodD09PWEuaGVpZ2h0P3RoaXMuSGQodGhpcy5kYXRhLGEpOih0aGlzLmRhdGEuaGVpZ2h0PGEuaGVpZ2h0JiYoYj10aGlzLmRhdGEsdGhpcy5kYXRhPWEsYT1iKSx0aGlzLkRkKGEsdGhpcy5kYXRhLmhlaWdodC1hLmhlaWdodC0xLCEwKSk6dGhpcy5kYXRhPWE7cmV0dXJuIHRoaXN9LGJhOmZ1bmN0aW9uKGEpe2EmJnRoaXMuRGQoYSx0aGlzLmRhdGEuaGVpZ2h0LTEpO3JldHVybiB0aGlzfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuZGF0YT16KFtdKTtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIHRoaXM7Zm9yKHZhciBkPXRoaXMuZGF0YSxlPXRoaXMuemEoYSksZj1bXSxnPVtdLGgsayxtLG47ZHx8Zi5sZW5ndGg7KXtkfHwoZD1mLnBvcCgpLFxuaz1mW2YubGVuZ3RoLTFdLGg9Zy5wb3AoKSxuPSEwKTtpZihkLnVhKXthOnttPWE7dmFyIHE9ZC5jaGlsZHJlbixwPWI7aWYocCl7Zm9yKHZhciBGPTA7RjxxLmxlbmd0aDtGKyspaWYocChtLHFbRl0pKXttPUY7YnJlYWsgYX1tPS0xfWVsc2UgbT1xLmluZGV4T2YobSl9aWYoLTEhPT1tKXtkLmNoaWxkcmVuLnNwbGljZShtLDEpO2YucHVzaChkKTt0aGlzLkFmKGYpO2JyZWFrfX1ufHxkLnVhfHwhdShkLGUpP2s/KGgrKyxkPWsuY2hpbGRyZW5baF0sbj0hMSk6ZD1udWxsOihmLnB1c2goZCksZy5wdXNoKGgpLGg9MCxrPWQsZD1kLmNoaWxkcmVuWzBdKX1yZXR1cm4gdGhpc30semE6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LENjOm0sRGM6bix0b0pTT046ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfSx6ZDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgZD1bXTthOylhLnVhP2IucHVzaC5hcHBseShiLGEuY2hpbGRyZW4pOmQucHVzaC5hcHBseShkLGEuY2hpbGRyZW4pLGE9ZC5wb3AoKTtyZXR1cm4gYn0sXG5CZDpmdW5jdGlvbihhLGIsZCxmKXt2YXIgZz1kLWIrMSxoPXRoaXMueGMsaztpZihnPD1oKXJldHVybiBrPXooYS5zbGljZShiLGQrMSkpLGUoayx0aGlzLnphKSxrO2Z8fChmPU1hdGguY2VpbChNYXRoLmxvZyhnKS9NYXRoLmxvZyhoKSksaD1NYXRoLmNlaWwoZy9NYXRoLnBvdyhoLGYtMSkpKTtrPXooW10pO2sudWE9ITE7ay5oZWlnaHQ9Zjt2YXIgZz1NYXRoLmNlaWwoZy9oKSxoPWcqTWF0aC5jZWlsKE1hdGguc3FydChoKSksbSxuLHE7Zm9yKEMoYSxiLGQsaCx0aGlzLkNjKTtiPD1kO2IrPWgpZm9yKG49TWF0aC5taW4oYitoLTEsZCksQyhhLGIsbixnLHRoaXMuRGMpLG09YjttPD1uO20rPWcpcT1NYXRoLm1pbihtK2ctMSxuKSxrLmNoaWxkcmVuLnB1c2godGhpcy5CZChhLG0scSxmLTEpKTtlKGssdGhpcy56YSk7cmV0dXJuIGt9LHpmOmZ1bmN0aW9uKGEsYixkLGUpe2Zvcih2YXIgZixnLGgsayxtLG4scSx1Ozspe2UucHVzaChiKTtpZihiLnVhfHxlLmxlbmd0aC0xPT09ZClicmVhaztcbnE9dT1JbmZpbml0eTtmPTA7Zm9yKGc9Yi5jaGlsZHJlbi5sZW5ndGg7ZjxnO2YrKyloPWIuY2hpbGRyZW5bZl0sbT1wKGgpLG49KE1hdGgubWF4KGguTyxhLk8pLU1hdGgubWluKGguTSxhLk0pKSooTWF0aC5tYXgoaC5TLGEuUyktTWF0aC5taW4oaC5QLGEuUCkpLW0sbjx1Pyh1PW4scT1tPHE/bTpxLGs9aCk6bj09PXUmJm08cSYmKHE9bSxrPWgpO2I9a3x8Yi5jaGlsZHJlblswXX1yZXR1cm4gYn0sRGQ6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPXRoaXMuemE7ZD1kP2E6ZShhKTt2YXIgZT1bXSxmPXRoaXMuemYoZCx0aGlzLmRhdGEsYixlKTtmLmNoaWxkcmVuLnB1c2goYSk7Zm9yKGsoZixkKTswPD1iOylpZihlW2JdLmNoaWxkcmVuLmxlbmd0aD50aGlzLnhjKXRoaXMuR2YoZSxiKSxiLS07ZWxzZSBicmVhazt0aGlzLndmKGQsZSxiKX0sR2Y6ZnVuY3Rpb24oYSxiKXt2YXIgZD1hW2JdLGY9ZC5jaGlsZHJlbi5sZW5ndGgsZz10aGlzLkVkO3RoaXMueGYoZCxnLGYpO2Y9dGhpcy55ZihkLFxuZyxmKTtmPXooZC5jaGlsZHJlbi5zcGxpY2UoZixkLmNoaWxkcmVuLmxlbmd0aC1mKSk7Zi5oZWlnaHQ9ZC5oZWlnaHQ7Zi51YT1kLnVhO2UoZCx0aGlzLnphKTtlKGYsdGhpcy56YSk7Yj9hW2ItMV0uY2hpbGRyZW4ucHVzaChmKTp0aGlzLkhkKGQsZil9LEhkOmZ1bmN0aW9uKGEsYil7dGhpcy5kYXRhPXooW2EsYl0pO3RoaXMuZGF0YS5oZWlnaHQ9YS5oZWlnaHQrMTt0aGlzLmRhdGEudWE9ITE7ZSh0aGlzLmRhdGEsdGhpcy56YSl9LHlmOmZ1bmN0aW9uKGEsYixkKXt2YXIgZSxmLGcsayxtLG4scTttPW49SW5maW5pdHk7Zm9yKGU9YjtlPD1kLWI7ZSsrKWY9aChhLDAsZSx0aGlzLnphKSxnPWgoYSxlLGQsdGhpcy56YSksaz1NYXRoLm1heCgwLE1hdGgubWluKGYuTyxnLk8pLU1hdGgubWF4KGYuTSxnLk0pKSpNYXRoLm1heCgwLE1hdGgubWluKGYuUyxnLlMpLU1hdGgubWF4KGYuUCxnLlApKSxmPXAoZikrcChnKSxrPG0/KG09ayxxPWUsbj1mPG4/ZjpuKTprPT09bSYmZjxuJiYobj1cbmYscT1lKTtyZXR1cm4gcX0seGY6ZnVuY3Rpb24oYSxiLGQpe3ZhciBlPWEudWE/dGhpcy5DYzptLGY9YS51YT90aGlzLkRjOm4sZz10aGlzLkFkKGEsYixkLGUpO2I9dGhpcy5BZChhLGIsZCxmKTtnPGImJmEuY2hpbGRyZW4uc29ydChlKX0sQWQ6ZnVuY3Rpb24oYSxiLGQsZSl7YS5jaGlsZHJlbi5zb3J0KGUpO2U9dGhpcy56YTt2YXIgZj1oKGEsMCxiLGUpLGc9aChhLGQtYixkLGUpLG09cShmKStxKGcpLG4scDtmb3Iobj1iO248ZC1iO24rKylwPWEuY2hpbGRyZW5bbl0sayhmLGEudWE/ZShwKTpwKSxtKz1xKGYpO2ZvcihuPWQtYi0xO24+PWI7bi0tKXA9YS5jaGlsZHJlbltuXSxrKGcsYS51YT9lKHApOnApLG0rPXEoZyk7cmV0dXJuIG19LHdmOmZ1bmN0aW9uKGEsYixkKXtmb3IoOzA8PWQ7ZC0tKWsoYltkXSxhKX0sQWY6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsZDswPD1iO2ItLSkwPT09YVtiXS5jaGlsZHJlbi5sZW5ndGg/MDxiPyhkPWFbYi0xXS5jaGlsZHJlbixcbmQuc3BsaWNlKGQuaW5kZXhPZihhW2JdKSwxKSk6dGhpcy5jbGVhcigpOmUoYVtiXSx0aGlzLnphKX0sQ2Y6ZnVuY3Rpb24oYSl7dmFyIGI9W1wicmV0dXJuIGFcIixcIiAtIGJcIixcIjtcIl07dGhpcy5DYz1uZXcgRnVuY3Rpb24oXCJhXCIsXCJiXCIsYi5qb2luKGFbMF0pKTt0aGlzLkRjPW5ldyBGdW5jdGlvbihcImFcIixcImJcIixiLmpvaW4oYVsxXSkpO3RoaXMuemE9bmV3IEZ1bmN0aW9uKFwiYVwiLFwicmV0dXJuIHttaW5YOiBhXCIrYVswXStcIiwgbWluWTogYVwiK2FbMV0rXCIsIG1heFg6IGFcIithWzJdK1wiLCBtYXhZOiBhXCIrYVszXStcIn07XCIpfX19LHtxdWlja3NlbGVjdDoyfV0sMjpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGEsYixmLGcscSl7Zj1mfHwwO2c9Z3x8YS5sZW5ndGgtMTtmb3IocT1xfHxoO2c+Zjspe2lmKDYwMDxnLWYpe3ZhciBrPWctZisxLG09Yi1mKzEsbj1NYXRoLmxvZyhrKSxwPS41Kk1hdGguZXhwKDIqbi8zKSxuPS41Kk1hdGguc3FydChuKnAqKGstcCkvaykqKDA+bS1rLzI/LTE6XG4xKTtkKGEsYixNYXRoLm1heChmLE1hdGguZmxvb3IoYi1tKnAvaytuKSksTWF0aC5taW4oZyxNYXRoLmZsb29yKGIrKGstbSkqcC9rK24pKSxxKX1rPWFbYl07bT1mO3A9ZztlKGEsZixiKTtmb3IoMDxxKGFbZ10saykmJmUoYSxmLGcpO208cDspe2UoYSxtLHApO20rKztmb3IocC0tOzA+cShhW21dLGspOyltKys7Zm9yKDswPHEoYVtwXSxrKTspcC0tfTA9PT1xKGFbZl0sayk/ZShhLGYscCk6KHArKyxlKGEscCxnKSk7cDw9YiYmKGY9cCsxKTtiPD1wJiYoZz1wLTEpfX1mdW5jdGlvbiBlKGEsYixkKXt2YXIgZT1hW2JdO2FbYl09YVtkXTthW2RdPWV9ZnVuY3Rpb24gaChhLGIpe3JldHVybiBhPGI/LTE6YT5iPzE6MH1iLlU9ZH0se31dfSx7fSxbMV0pKDEpfSk7VWc9Yi5VfSkoKTtmdW5jdGlvbiBWZyhhKXt0aGlzLmI9VWcoYSk7dGhpcy5mPXt9fWw9VmcucHJvdG90eXBlO2wuYmE9ZnVuY3Rpb24oYSxiKXt2YXIgYz17TTphWzBdLFA6YVsxXSxPOmFbMl0sUzphWzNdLHZhbHVlOmJ9O3RoaXMuYi5iYShjKTt0aGlzLmZbdyhiKV09Y307bC5sb2FkPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPUFycmF5KGIubGVuZ3RoKSxkPTAsZT1iLmxlbmd0aDtkPGU7ZCsrKXt2YXIgZj1hW2RdLGc9YltkXSxmPXtNOmZbMF0sUDpmWzFdLE86ZlsyXSxTOmZbM10sdmFsdWU6Z307Y1tkXT1mO3RoaXMuZlt3KGcpXT1mfXRoaXMuYi5sb2FkKGMpfTtsLnJlbW92ZT1mdW5jdGlvbihhKXthPXcoYSk7dmFyIGI9dGhpcy5mW2FdO2RlbGV0ZSB0aGlzLmZbYV07cmV0dXJuIG51bGwhPT10aGlzLmIucmVtb3ZlKGIpfTtmdW5jdGlvbiBXZyhhLGIsYyl7dmFyIGQ9YS5mW3coYyldO1VhKFtkLk0sZC5QLGQuTyxkLlNdLGIpfHwoYS5yZW1vdmUoYyksYS5iYShiLGMpKX1cbmZ1bmN0aW9uIFhnKGEpe3JldHVybiBhLmIuYWxsKCkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnZhbHVlfSl9ZnVuY3Rpb24gWWcoYSxiKXtyZXR1cm4gYS5iLnNlYXJjaCh7TTpiWzBdLFA6YlsxXSxPOmJbMl0sUzpiWzNdfSkubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhLnZhbHVlfSl9bC5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFpnKFhnKHRoaXMpLGEsYil9O2Z1bmN0aW9uICRnKGEsYixjLGQpe3JldHVybiBaZyhZZyhhLGIpLGMsZCl9ZnVuY3Rpb24gWmcoYSxiLGMpe2Zvcih2YXIgZCxlPTAsZj1hLmxlbmd0aDtlPGYmJiEoZD1iLmNhbGwoYyxhW2VdKSk7ZSsrKTtyZXR1cm4gZH1sLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5iLmNsZWFyKCk7dGhpcy5mPXt9fTtsLko9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5iLmRhdGE7cmV0dXJuIFJhKGIuTSxiLlAsYi5PLGIuUyxhKX07ZnVuY3Rpb24gYWgoKXt0aGlzLmM9MDt0aGlzLmE9e307dGhpcy5mPXRoaXMuYj1udWxsfWw9YWgucHJvdG90eXBlO2wuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmM9MDt0aGlzLmE9e307dGhpcy5mPXRoaXMuYj1udWxsfTtsLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5iO2M7KWEuY2FsbChiLGMucmIsYy5rYix0aGlzKSxjPWMuR2F9O2wuZ2V0PWZ1bmN0aW9uKGEpe2E9dGhpcy5hW2FdO3goISFhLDE1KTtpZihhPT09dGhpcy5mKXJldHVybiBhLnJiO2E9PT10aGlzLmI/KHRoaXMuYj10aGlzLmIuR2EsdGhpcy5iLm9iPW51bGwpOihhLkdhLm9iPWEub2IsYS5vYi5HYT1hLkdhKTthLkdhPW51bGw7YS5vYj10aGlzLmY7dGhpcy5mPXRoaXMuZi5HYT1hO3JldHVybiBhLnJifTtcbmwucG9wPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iO2RlbGV0ZSB0aGlzLmFbYS5rYl07YS5HYSYmKGEuR2Eub2I9bnVsbCk7dGhpcy5iPWEuR2E7dGhpcy5ifHwodGhpcy5mPW51bGwpOy0tdGhpcy5jO3JldHVybiBhLnJifTtsLnJlcGxhY2U9ZnVuY3Rpb24oYSxiKXt0aGlzLmdldChhKTt0aGlzLmFbYV0ucmI9Yn07bC5zZXQ9ZnVuY3Rpb24oYSxiKXt4KCEoYSBpbiB0aGlzLmEpLDE2KTt2YXIgYz17a2I6YSxHYTpudWxsLG9iOnRoaXMuZixyYjpifTt0aGlzLmY/dGhpcy5mLkdhPWM6dGhpcy5iPWM7dGhpcy5mPWM7dGhpcy5hW2FdPWM7Kyt0aGlzLmN9O3ZhciBiaD1bXCJjYW52YXNcIixcIndlYmdsXCJdO1xuZnVuY3Rpb24gRyhhKXt2Yy5jYWxsKHRoaXMpO3ZhciBiPWNoKGEpO3RoaXMudWM9dm9pZCAwIT09YS5sb2FkVGlsZXNXaGlsZUFuaW1hdGluZz9hLmxvYWRUaWxlc1doaWxlQW5pbWF0aW5nOiExO3RoaXMucmM9dm9pZCAwIT09YS5sb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nP2EubG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZzohMTt0aGlzLnpjPXZvaWQgMCE9PWEucGl4ZWxSYXRpbz9hLnBpeGVsUmF0aW86bmQ7dGhpcy55Yz1iLmxvZ29zO3RoaXMuYmI9ZnVuY3Rpb24oKXt0aGlzLm89dm9pZCAwO3RoaXMua2kuY2FsbCh0aGlzLERhdGUubm93KCkpfS5iaW5kKHRoaXMpO3RoaXMuY2I9cWcoKTt0aGlzLkFjPXFnKCk7dGhpcy50Yz0wO3RoaXMuYz1udWxsO3RoaXMuQ2E9TGEoKTt0aGlzLkc9dGhpcy5WPXRoaXMuVz1udWxsO3RoaXMuYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO3RoaXMuYS5jbGFzc05hbWU9XCJvbC12aWV3cG9ydFwiKyhyZD9cIiBvbC10b3VjaFwiOlwiXCIpO3RoaXMuYS5zdHlsZS5wb3NpdGlvbj1cblwicmVsYXRpdmVcIjt0aGlzLmEuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIjt0aGlzLmEuc3R5bGUud2lkdGg9XCIxMDAlXCI7dGhpcy5hLnN0eWxlLmhlaWdodD1cIjEwMCVcIjt0aGlzLmEuc3R5bGUubXNUb3VjaEFjdGlvbj1cIm5vbmVcIjt0aGlzLmEuc3R5bGUudG91Y2hBY3Rpb249XCJub25lXCI7dGhpcy5zPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7dGhpcy5zLmNsYXNzTmFtZT1cIm9sLW92ZXJsYXljb250YWluZXJcIjt0aGlzLmEuYXBwZW5kQ2hpbGQodGhpcy5zKTt0aGlzLnY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKTt0aGlzLnYuY2xhc3NOYW1lPVwib2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnRcIjthPVwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIHRvdWNoc3RhcnQgTVNQb2ludGVyRG93biBwb2ludGVyZG93biBtb3VzZXdoZWVsIHdoZWVsXCIuc3BsaXQoXCIgXCIpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyl5KHRoaXMudixhW2NdLHJjKTt0aGlzLmEuYXBwZW5kQ2hpbGQodGhpcy52KTtcbnRoaXMueWE9bmV3IFVkKHRoaXMpO2Zvcih2YXIgZSBpbiBnZCl5KHRoaXMueWEsZ2RbZV0sdGhpcy5YZCx0aGlzKTt0aGlzLnNhPWIua2V5Ym9hcmRFdmVudFRhcmdldDt0aGlzLkI9bnVsbDt5KHRoaXMuYSxcIndoZWVsXCIsdGhpcy5qYix0aGlzKTt5KHRoaXMuYSxcIm1vdXNld2hlZWxcIix0aGlzLmpiLHRoaXMpO3RoaXMuQz1iLmNvbnRyb2xzO3RoaXMuaT1iLmludGVyYWN0aW9uczt0aGlzLmo9Yi5vdmVybGF5czt0aGlzLkRlPXt9O3RoaXMuST1uZXcgYi5saSh0aGlzLmEsdGhpcyk7dGhpcy4kPW51bGw7dGhpcy5CYT1bXTt0aGlzLkRhPW5ldyAkZCh0aGlzLmNnLmJpbmQodGhpcyksdGhpcy53Zy5iaW5kKHRoaXMpKTt0aGlzLmNhPXt9O3kodGhpcyx4YyhcImxheWVyZ3JvdXBcIiksdGhpcy5oZyx0aGlzKTt5KHRoaXMseGMoXCJ2aWV3XCIpLHRoaXMueWcsdGhpcyk7eSh0aGlzLHhjKFwic2l6ZVwiKSx0aGlzLnNnLHRoaXMpO3kodGhpcyx4YyhcInRhcmdldFwiKSx0aGlzLnZnLHRoaXMpO3RoaXMub2EoYi52YWx1ZXMpO1xudGhpcy5DLmZvckVhY2goZnVuY3Rpb24oYSl7YS5zZXRNYXAodGhpcyl9LHRoaXMpO3kodGhpcy5DLFwiYWRkXCIsZnVuY3Rpb24oYSl7YS5lbGVtZW50LnNldE1hcCh0aGlzKX0sdGhpcyk7eSh0aGlzLkMsXCJyZW1vdmVcIixmdW5jdGlvbihhKXthLmVsZW1lbnQuc2V0TWFwKG51bGwpfSx0aGlzKTt0aGlzLmkuZm9yRWFjaChmdW5jdGlvbihhKXthLnNldE1hcCh0aGlzKX0sdGhpcyk7eSh0aGlzLmksXCJhZGRcIixmdW5jdGlvbihhKXthLmVsZW1lbnQuc2V0TWFwKHRoaXMpfSx0aGlzKTt5KHRoaXMuaSxcInJlbW92ZVwiLGZ1bmN0aW9uKGEpe2EuZWxlbWVudC5zZXRNYXAobnVsbCl9LHRoaXMpO3RoaXMuai5mb3JFYWNoKHRoaXMuSWQsdGhpcyk7eSh0aGlzLmosXCJhZGRcIixmdW5jdGlvbihhKXt0aGlzLklkKGEuZWxlbWVudCl9LHRoaXMpO3kodGhpcy5qLFwicmVtb3ZlXCIsZnVuY3Rpb24oYSl7dmFyIGI9YS5lbGVtZW50Lmo7dm9pZCAwIT09YiYmZGVsZXRlIHRoaXMuRGVbYi50b1N0cmluZygpXTtcbmEuZWxlbWVudC5zZXRNYXAobnVsbCl9LHRoaXMpfXQoRyx2Yyk7bD1HLnByb3RvdHlwZTtsLkhmPWZ1bmN0aW9uKGEpe3RoaXMuQy5wdXNoKGEpfTtsLklmPWZ1bmN0aW9uKGEpe3RoaXMuaS5wdXNoKGEpfTtsLkpmPWZ1bmN0aW9uKGEpe2RoKHRoaXMpLmdldChtZykucHVzaChhKX07bC5LZj1mdW5jdGlvbihhKXt0aGlzLmoucHVzaChhKX07bC5JZD1mdW5jdGlvbihhKXt2YXIgYj1hLmo7dm9pZCAwIT09YiYmKHRoaXMuRGVbYi50b1N0cmluZygpXT1hKTthLnNldE1hcCh0aGlzKX07XG5sLmthPWZ1bmN0aW9uKCl7cGModGhpcy55YSk7cGModGhpcy5JKTtuYyh0aGlzLmEsXCJ3aGVlbFwiLHRoaXMuamIsdGhpcyk7bmModGhpcy5hLFwibW91c2V3aGVlbFwiLHRoaXMuamIsdGhpcyk7dGhpcy5nJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLmcsITEpLHRoaXMuZz12b2lkIDApO3RoaXMubyYmKGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMubyksdGhpcy5vPXZvaWQgMCk7dGhpcy5zZXQoXCJ0YXJnZXRcIixudWxsKTt2Yy5wcm90b3R5cGUua2EuY2FsbCh0aGlzKX07bC5OYz1mdW5jdGlvbihhLGIsYyl7aWYodGhpcy5jKXJldHVybiBhPXRoaXMuRWEoYSksYz1jP2M6e30sd2codGhpcy5JLGEsdGhpcy5jLHZvaWQgMCE9PWMuaGl0VG9sZXJhbmNlP2MuaGl0VG9sZXJhbmNlKnRoaXMuYy5waXhlbFJhdGlvOjAsYixjLmxheWVyRmlsdGVyP2MubGF5ZXJGaWx0ZXI6cGUpfTtcbmwuJGc9ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZih0aGlzLmMpe2E6e3ZhciBmPXRoaXMuSSxnPXRoaXMuYztjPXZvaWQgMCE9PWM/YzpudWxsO2Q9ZD9kOnBlO2U9dm9pZCAwIT09ZT9lOm51bGw7dmFyIGgsaz1nLnZpZXdTdGF0ZS5yZXNvbHV0aW9uLG09Zy5sYXllclN0YXRlc0FycmF5LG49bS5sZW5ndGg7YT1zZyhnLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLGEuc2xpY2UoKSk7Zm9yKC0tbjswPD1uOy0tbil7aD1tW25dO3ZhciBwPWgubGF5ZXI7aWYoaC52aXNpYmxlJiZrPj1oLm1pblJlc29sdXRpb24mJms8aC5tYXhSZXNvbHV0aW9uJiZkLmNhbGwoZSxwKSYmKGg9eGcoZixwKS5CKGEsZyxiLGMpKSl7Yj1oO2JyZWFrIGF9fWI9dm9pZCAwfXJldHVybiBifX07bC5UYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInRhcmdldFwiKX07XG5mdW5jdGlvbiBlaChhKXthPWEuVGMoKTtyZXR1cm4gdm9pZCAwIT09YT9cInN0cmluZ1wiPT09dHlwZW9mIGE/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYSk6YTpudWxsfWwuRWE9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jO3JldHVybiBiP3NnKGIucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm0sYS5zbGljZSgpKTpudWxsfTtsLmFnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuan07ZnVuY3Rpb24gZGgoYSl7cmV0dXJuIGEuZ2V0KFwibGF5ZXJncm91cFwiKX1sLmFoPWZ1bmN0aW9uKCl7cmV0dXJuIGRoKHRoaXMpLmdldChtZyl9O2Z1bmN0aW9uIENmKGEsYil7dmFyIGM9YS5jO3JldHVybiBjP3NnKGMuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sYi5zbGljZSgwLDIpKTpudWxsfWwubWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJzaXplXCIpfTtsLlo9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJ2aWV3XCIpfTtcbmwuY2c9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5jO2lmKCEoZSYmYiBpbiBlLndhbnRlZFRpbGVzJiZlLndhbnRlZFRpbGVzW2JdW2EuWGEoKV0pKXJldHVybiBJbmZpbml0eTthPWNbMF0tZS5mb2N1c1swXTtjPWNbMV0tZS5mb2N1c1sxXTtyZXR1cm4gNjU1MzYqTWF0aC5sb2coZCkrTWF0aC5zcXJ0KGEqYStjKmMpL2R9O2wuamI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1uZXcgZmQoYnx8YS50eXBlLHRoaXMsYSk7dGhpcy5YZChjKX07bC5YZD1mdW5jdGlvbihhKXtpZih0aGlzLmMpe3RoaXMuJD1hLmNvb3JkaW5hdGU7YS5mcmFtZVN0YXRlPXRoaXMuYzt2YXIgYj10aGlzLmkuYSxjO2lmKCExIT09QSh0aGlzLGEpKWZvcihjPWIubGVuZ3RoLTE7MDw9YztjLS0pe3ZhciBkPWJbY107aWYoZC5nZXQoXCJhY3RpdmVcIikmJiFkLmhhbmRsZUV2ZW50KGEpKWJyZWFrfX19O1xubC5xZz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYyxiPXRoaXMuRGE7aWYoYi5iLmxlbmd0aCl7dmFyIGM9MTYsZD1jO2lmKGEpe3ZhciBlPWEudmlld0hpbnRzO2VbMF0mJihjPXRoaXMudWM/ODowLGQ9Mik7ZVsxXSYmKGM9dGhpcy5yYz84OjAsZD0yKX1pZihiLmk8Yyl7dmFyIGU9Yi5vLGY9Yi5iLGc9Yi5mLGg9MCxrPWYubGVuZ3RoLG0sbixwO2ZvcihuPTA7bjxrOysrbiltPWZbbl0scD1lKG0pLEluZmluaXR5PT1wP2RlbGV0ZSBiLmFbYi5jKG0pXTooZ1toXT1wLGZbaCsrXT1tKTtmLmxlbmd0aD1oO2cubGVuZ3RoPWg7Zm9yKGU9KGIuYi5sZW5ndGg+PjEpLTE7MDw9ZTtlLS0pWmQoYixlKTtmb3IoZT0wO2IuaTxjJiZlPGQmJjA8Yi5iLmxlbmd0aDspZj1iLGg9Zi5iLGs9Zi5mLGc9aFswXSwxPT1oLmxlbmd0aD8oaC5sZW5ndGg9MCxrLmxlbmd0aD0wKTooaFswXT1oLnBvcCgpLGtbMF09ay5wb3AoKSxaZChmLDApKSxoPWYuYyhnKSxkZWxldGUgZi5hW2hdLGY9Z1swXSxnPWYuWGEoKSxcbjAhPT1mLnN0YXRlfHxnIGluIGIuZ3x8KGIuZ1tnXT0hMCwrK2IuaSwrK2UsZi5sb2FkKCkpfX1iPXRoaXMuQmE7ZD0wO2ZvcihjPWIubGVuZ3RoO2Q8YzsrK2QpYltkXSh0aGlzLGEpO2IubGVuZ3RoPTB9O2wuc2c9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcigpfTtcbmwudmc9ZnVuY3Rpb24oKXt2YXIgYTt0aGlzLlRjKCkmJihhPWVoKHRoaXMpKTtpZih0aGlzLkIpe2Zvcih2YXIgYj0wLGM9dGhpcy5CLmxlbmd0aDtiPGM7KytiKWljKHRoaXMuQltiXSk7dGhpcy5CPW51bGx9YT8oYS5hcHBlbmRDaGlsZCh0aGlzLmEpLGE9dGhpcy5zYT90aGlzLnNhOmEsdGhpcy5CPVt5KGEsXCJrZXlkb3duXCIsdGhpcy5qYix0aGlzKSx5KGEsXCJrZXlwcmVzc1wiLHRoaXMuamIsdGhpcyldLHRoaXMuZ3x8KHRoaXMuZz10aGlzLmFmLmJpbmQodGhpcyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLmcsITEpKSk6KFBjKHRoaXMuYSksdGhpcy5nJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLmcsITEpLHRoaXMuZz12b2lkIDApKTt0aGlzLmFmKCl9O2wud2c9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcigpfTtsLlpkPWZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoKX07XG5sLnlnPWZ1bmN0aW9uKCl7dGhpcy5XJiYoaWModGhpcy5XKSx0aGlzLlc9bnVsbCk7dGhpcy5WJiYoaWModGhpcy5WKSx0aGlzLlY9bnVsbCk7dmFyIGE9dGhpcy5aKCk7YSYmKHRoaXMuYS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXZpZXdcIix3KGEpKSx0aGlzLlc9eShhLFwicHJvcGVydHljaGFuZ2VcIix0aGlzLlpkLHRoaXMpLHRoaXMuVj15KGEsXCJjaGFuZ2VcIix0aGlzLlpkLHRoaXMpKTt0aGlzLnJlbmRlcigpfTtsLmhnPWZ1bmN0aW9uKCl7dGhpcy5HJiYodGhpcy5HLmZvckVhY2goaWMpLHRoaXMuRz1udWxsKTt2YXIgYT1kaCh0aGlzKTthJiYodGhpcy5HPVt5KGEsXCJwcm9wZXJ0eWNoYW5nZVwiLHRoaXMucmVuZGVyLHRoaXMpLHkoYSxcImNoYW5nZVwiLHRoaXMucmVuZGVyLHRoaXMpXSk7dGhpcy5yZW5kZXIoKX07bC5yZW5kZXI9ZnVuY3Rpb24oKXt2b2lkIDA9PT10aGlzLm8mJih0aGlzLm89cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYmIpKX07bC5paT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pLnJlbW92ZShhKX07XG5sLmppPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmoucmVtb3ZlKGEpfTtcbmwua2k9ZnVuY3Rpb24oYSl7dmFyIGIsYyxkPXRoaXMubWIoKSxlPXRoaXMuWigpLGY9TGEoKSxnPW51bGwsaDtpZihoPXZvaWQgMCE9PWQmJjA8ZFswXSYmMDxkWzFdJiZlKWg9ISFlLmhhKCkmJnZvaWQgMCE9PWUudmEoKTtpZihoKXtnPSRjKGUsdGhpcy5jP3RoaXMuYy52aWV3SGludHM6dm9pZCAwKTtoPWRoKHRoaXMpLlBjKCk7dmFyIGs9e307Yj0wO2ZvcihjPWgubGVuZ3RoO2I8YzsrK2Ipa1t3KGhbYl0ubGF5ZXIpXT1oW2JdO2I9ZGYoZSk7Zz17YW5pbWF0ZTohMSxhdHRyaWJ1dGlvbnM6e30sY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm06dGhpcy5jYixleHRlbnQ6Zixmb2N1czp0aGlzLiQ/dGhpcy4kOmIuY2VudGVyLGluZGV4OnRoaXMudGMrKyxsYXllclN0YXRlczprLGxheWVyU3RhdGVzQXJyYXk6aCxsb2dvczpiYih7fSx0aGlzLnljKSxwaXhlbFJhdGlvOnRoaXMuemMscGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm06dGhpcy5BYyxwb3N0UmVuZGVyRnVuY3Rpb25zOltdLFxuc2l6ZTpkLHNraXBwZWRGZWF0dXJlVWlkczp0aGlzLmNhLHRpbGVRdWV1ZTp0aGlzLkRhLHRpbWU6YSx1c2VkVGlsZXM6e30sdmlld1N0YXRlOmIsdmlld0hpbnRzOmcsd2FudGVkVGlsZXM6e319fWcmJihnLmV4dGVudD1YYShiLmNlbnRlcixiLnJlc29sdXRpb24sYi5yb3RhdGlvbixnLnNpemUsZikpO3RoaXMuYz1nO3RoaXMuSS51KGcpO2cmJihnLmFuaW1hdGUmJnRoaXMucmVuZGVyKCksQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5CYSxnLnBvc3RSZW5kZXJGdW5jdGlvbnMpLGcudmlld0hpbnRzWzBdfHxnLnZpZXdIaW50c1sxXXx8VWEoZy5leHRlbnQsdGhpcy5DYSl8fChBKHRoaXMsbmV3IGVkKFwibW92ZWVuZFwiLHRoaXMsZykpLE9hKGcuZXh0ZW50LHRoaXMuQ2EpKSk7QSh0aGlzLG5ldyBlZChcInBvc3RyZW5kZXJcIix0aGlzLGcpKTtzZXRUaW1lb3V0KHRoaXMucWcuYmluZCh0aGlzKSwwKX07XG5sLlZlPWZ1bmN0aW9uKGEpe2E9dyhhKS50b1N0cmluZygpO3RoaXMuY2FbYV09ITA7dGhpcy5yZW5kZXIoKX07bC5hZj1mdW5jdGlvbigpe3ZhciBhPWVoKHRoaXMpO2lmKGEpe3ZhciBiPWdldENvbXB1dGVkU3R5bGUoYSk7dGhpcy5zZXQoXCJzaXplXCIsW2Eub2Zmc2V0V2lkdGgtcGFyc2VGbG9hdChiLmJvcmRlckxlZnRXaWR0aCktcGFyc2VGbG9hdChiLnBhZGRpbmdMZWZ0KS1wYXJzZUZsb2F0KGIucGFkZGluZ1JpZ2h0KS1wYXJzZUZsb2F0KGIuYm9yZGVyUmlnaHRXaWR0aCksYS5vZmZzZXRIZWlnaHQtcGFyc2VGbG9hdChiLmJvcmRlclRvcFdpZHRoKS1wYXJzZUZsb2F0KGIucGFkZGluZ1RvcCktcGFyc2VGbG9hdChiLnBhZGRpbmdCb3R0b20pLXBhcnNlRmxvYXQoYi5ib3JkZXJCb3R0b21XaWR0aCldKX1lbHNlIHRoaXMuc2V0KFwic2l6ZVwiLHZvaWQgMCl9O2wuWmU9ZnVuY3Rpb24oYSl7YT13KGEpLnRvU3RyaW5nKCk7ZGVsZXRlIHRoaXMuY2FbYV07dGhpcy5yZW5kZXIoKX07XG5mdW5jdGlvbiBjaChhKXt2YXIgYj1udWxsO3ZvaWQgMCE9PWEua2V5Ym9hcmRFdmVudFRhcmdldCYmKGI9XCJzdHJpbmdcIj09PXR5cGVvZiBhLmtleWJvYXJkRXZlbnRUYXJnZXQ/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5rZXlib2FyZEV2ZW50VGFyZ2V0KTphLmtleWJvYXJkRXZlbnRUYXJnZXQpO3ZhciBjPXt9LGQ9e307aWYodm9pZCAwPT09YS5sb2dvfHxcImJvb2xlYW5cIj09PXR5cGVvZiBhLmxvZ28mJmEubG9nbylkW1wiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDQUFBQUFnQ0FNQUFBQkVwSXJHQUFBQUEzTkNTVlFJQ0FqYjRVL2dBQUFBQ1hCSVdYTUFBQUhHQUFBQnhnRVh3ZnBHQUFBQUdYUkZXSFJUYjJaMGQyRnlaUUIzZDNjdWFXNXJjMk5oY0dVdWIzSm5tKzQ4R2dBQUFoTlFURlJGLy8vL0FQLy9BSUNBZ1AvL0FGVlZRRUNBLy8vL0sxVlZTYmJiWUwvZkowNWlkc1RZSkZ0YmJjamJKbGxtWnN6V1dNVE9JRmhvSGxOaVpzelRhOURkVWNITkhsTmxWOFhSSVZkaWFzclVIbFpqSVZaamFNblZIMVJsSUZSa0gxUmtIMVpsYXN2WWFzdlhWc1BRSDFWa2FjblZhOHZXSVZaaklGUmpWTVBRYThyWElWVmtYc1hSc052ZUlGVmtJRlpsSVZWajNlRGVoNkdtYk12WEgxWmtJRlJrYThyV2JNdlhJRlZrSUZWaklGVmtiTXZXSDFWamJNdldJRlZsYmN2V0lGVmxhOHZWSUZWa2JNdldiTXZWSDFWa2JNdldJRlZsYmN2V0lGVmtiY3ZWYk12V2pOUGJJRlZrVThMUHdNek5JRlZrYmN6V0lGVmtic3ZXYk12WElGVmtSbkI4YmN2VzIrVGtXOFhSSUZWa0lsWmxKVmxvSmxwb0tseHJMbDl0TW1Kd09XZDBPbWgxUlhGOFRuZUNUM2lEVUhpRFU4TFBWTUxQVmNMUFZjUFFWc1BQVnNQUVY4UFFXTVRRV3NUUVc4VFFYTVhTWHNYUlg0U05YOGJTWU1mVFljZlRZc2ZUWThqVVpjZlNac25VYUlxVGFjclZhc3JWYThqVGE4cldiSTJWYk12V2JjdldkSk9iZGN2VWRzelVkOHZWZUphZWU4N1lmYzNXZ0p5amhxR25pdERZamFhcmxkUFpucksyb05iYm9yVzVvOWJibzlmYnBMYTZxOW5kckwzQXJ0bmRzY0REdXR6ZnU4Zkp3Tjdnd3Q3Z3hjL1F5dUhoeStIaXplSGkwTmZYMCtQajE5emIxK1RqMnVYazI5L2UzdUxnMytMaDMrYmw0dVhqNHVmbDQrZmw1T2ZsNXVmbDV1am01K2pteVNEbkJBQUFBRnAwVWs1VEFBRUNBZ01FQkFZSENBME5EZzRVR1JvZ0lpTW1LU3NzTHpVN1BrSkpUMUpUVkZsaVkyaHJkSFozZm9TRmhZZUpqWTJRa3B1Z3FiRzF0cmU1dzh6UTA5WFkzdVhuNit6eDh2VDA5dmY0K1BqNStmcjYvUDM5L2YzK2d6N1NzQUFBQVZWSlJFRlVPTXRqWUtBN0VCRG53Q1BMck9iUzFCUmlMb0pMbnRlNkNReThGTEhMQ3pzMlFVRzRGalo1R2JjbUJERGp4SkJYRFd4Q0JyYjhhTTR6YmtJRHpwTFluQWNFOVZYbEpTV2xaUlUxM2tvSWVXNTdtR3g1WGpvTVpFVXF3eFdZUWFRYlN6TFNrWUdmS0ZTZTBRTXNYNVdiamdZMFlTNE1CcGxlbUk0QmRHQlcrRFExMWVaaXltZnFRdVhaSWpxd3lhZFBOb1NaNEwrMEZWTTZlK29HSTZnOGE5aUtOVDNvOGtWek5relJnNWxnbDdwNHd5UlVMOVl0MmpBeFZoNm1RQ29nYWU2R21mbEk4cDByMTNWRldUSEJRMHJXUFc3YWhnV1ZjUG0rOWN1TG95eTRrQ0pEekNtNmQ4UFNGb2gwenZRTkM1T2pESmhRb3BQUEpxcGgxZG9KQlVENXRua2JaaVVFcWFDbkIzYlRxTFRGRzFiUG43MWt3NGIrR0ZkcExFbEtJelJ4eGdZZ1dOWWM1U0NFTlZIS2VVYWx0SGRYeDBkWjh1QkkxaEoyVVVEZ3E4MkNNMk13S2VpYnFBdlNPN01DQUJxMHdYRVBpcVdFQUFBQUFFbEZUa1N1UW1DQ1wiXT1cblwiaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9cIjtlbHNle3ZhciBlPWEubG9nbztcInN0cmluZ1wiPT09dHlwZW9mIGU/ZFtlXT1cIlwiOmUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD9kW3coZSkudG9TdHJpbmcoKV09ZTplJiYoeChcInN0cmluZ1wiPT10eXBlb2YgZS5ocmVmLDQ0KSx4KFwic3RyaW5nXCI9PXR5cGVvZiBlLnNyYyw0NSksZFtlLnNyY109ZS5ocmVmKX1lPWEubGF5ZXJzIGluc3RhbmNlb2YgbGc/YS5sYXllcnM6bmV3IGxnKHtsYXllcnM6YS5sYXllcnN9KTtjLmxheWVyZ3JvdXA9ZTtjLnRhcmdldD1hLnRhcmdldDtjLnZpZXc9dm9pZCAwIT09YS52aWV3P2EudmlldzpuZXcgWWU7dmFyIGU9dWcsZjt2b2lkIDAhPT1hLnJlbmRlcmVyPyhBcnJheS5pc0FycmF5KGEucmVuZGVyZXIpP2Y9YS5yZW5kZXJlcjpcInN0cmluZ1wiPT09dHlwZW9mIGEucmVuZGVyZXI/Zj1bYS5yZW5kZXJlcl06eCghMSw0NiksMDw9Zi5pbmRleE9mKFwiZG9tXCIpJiYoZj1mLmNvbmNhdChiaCkpKTpmPWJoO3ZhciBnLFxuaDtnPTA7Zm9yKGg9Zi5sZW5ndGg7ZzxoOysrZylpZihcImNhbnZhc1wiPT1mW2ddJiZwZCl7ZT1QZzticmVha312b2lkIDAhPT1hLmNvbnRyb2xzP0FycmF5LmlzQXJyYXkoYS5jb250cm9scyk/Zj1uZXcgQWMoYS5jb250cm9scy5zbGljZSgpKTooeChhLmNvbnRyb2xzIGluc3RhbmNlb2YgQWMsNDcpLGY9YS5jb250cm9scyk6Zj1kZCgpO2lmKHZvaWQgMCE9PWEuaW50ZXJhY3Rpb25zKUFycmF5LmlzQXJyYXkoYS5pbnRlcmFjdGlvbnMpP2c9bmV3IEFjKGEuaW50ZXJhY3Rpb25zLnNsaWNlKCkpOih4KGEuaW50ZXJhY3Rpb25zIGluc3RhbmNlb2YgQWMsNDgpLGc9YS5pbnRlcmFjdGlvbnMpO2Vsc2V7Zz17fTtoPW5ldyBBYzt2YXIgaz1uZXcgZWY7KHZvaWQgMCE9PWcuYWx0U2hpZnREcmFnUm90YXRlP2cuYWx0U2hpZnREcmFnUm90YXRlOjEpJiZoLnB1c2gobmV3IERmKTsodm9pZCAwIT09Zy5kb3VibGVDbGlja1pvb20/Zy5kb3VibGVDbGlja1pvb206MSkmJmgucHVzaChuZXcgbGYoe2RlbHRhOmcuem9vbURlbHRhLFxuZHVyYXRpb246Zy56b29tRHVyYXRpb259KSk7KHZvaWQgMCE9PWcuZHJhZ1Bhbj9nLmRyYWdQYW46MSkmJmgucHVzaChuZXcgeWYoe2tpbmV0aWM6a30pKTsodm9pZCAwIT09Zy5waW5jaFJvdGF0ZT9nLnBpbmNoUm90YXRlOjEpJiZoLnB1c2gobmV3IGJnKTsodm9pZCAwIT09Zy5waW5jaFpvb20/Zy5waW5jaFpvb206MSkmJmgucHVzaChuZXcgZmcoe2NvbnN0cmFpblJlc29sdXRpb246Zy5jb25zdHJhaW5SZXNvbHV0aW9uLGR1cmF0aW9uOmcuem9vbUR1cmF0aW9ufSkpO2lmKHZvaWQgMCE9PWcua2V5Ym9hcmQ/Zy5rZXlib2FyZDoxKWgucHVzaChuZXcgVWYpLGgucHVzaChuZXcgV2Yoe2RlbHRhOmcuem9vbURlbHRhLGR1cmF0aW9uOmcuem9vbUR1cmF0aW9ufSkpOyh2b2lkIDAhPT1nLm1vdXNlV2hlZWxab29tP2cubW91c2VXaGVlbFpvb206MSkmJmgucHVzaChuZXcgWWYoe2NvbnN0cmFpblJlc29sdXRpb246Zy5jb25zdHJhaW5SZXNvbHV0aW9uLGR1cmF0aW9uOmcuem9vbUR1cmF0aW9ufSkpO1xuKHZvaWQgMCE9PWcuc2hpZnREcmFnWm9vbT9nLnNoaWZ0RHJhZ1pvb206MSkmJmgucHVzaChuZXcgVGYoe2R1cmF0aW9uOmcuem9vbUR1cmF0aW9ufSkpO2c9aH12b2lkIDAhPT1hLm92ZXJsYXlzP0FycmF5LmlzQXJyYXkoYS5vdmVybGF5cyk/YT1uZXcgQWMoYS5vdmVybGF5cy5zbGljZSgpKTooeChhLm92ZXJsYXlzIGluc3RhbmNlb2YgQWMsNDkpLGE9YS5vdmVybGF5cyk6YT1uZXcgQWM7cmV0dXJue2NvbnRyb2xzOmYsaW50ZXJhY3Rpb25zOmcsa2V5Ym9hcmRFdmVudFRhcmdldDpiLGxvZ29zOmQsb3ZlcmxheXM6YSxsaTplLHZhbHVlczpjfX07ZnVuY3Rpb24gZmgoYSl7dmMuY2FsbCh0aGlzKTt0aGlzLmo9YS5pZDt0aGlzLkI9dm9pZCAwIT09YS5pbnNlcnRGaXJzdD9hLmluc2VydEZpcnN0OiEwO3RoaXMudj12b2lkIDAhPT1hLnN0b3BFdmVudD9hLnN0b3BFdmVudDohMDt0aGlzLmM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKTt0aGlzLmMuY2xhc3NOYW1lPVwib2wtb3ZlcmxheS1jb250YWluZXIgb2wtc2VsZWN0YWJsZVwiO3RoaXMuYy5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCI7dGhpcy5hdXRvUGFuPXZvaWQgMCE9PWEuYXV0b1Bhbj9hLmF1dG9QYW46ITE7dGhpcy5pPWEuYXV0b1BhbkFuaW1hdGlvbnx8e307dGhpcy5vPXZvaWQgMCE9PWEuYXV0b1Bhbk1hcmdpbj9hLmF1dG9QYW5NYXJnaW46MjA7dGhpcy5hPXtQYjpcIlwiLFhiOlwiXCIsa2M6XCJcIixwYzpcIlwiLHZpc2libGU6ITB9O3RoaXMuZz1udWxsO3kodGhpcyx4YyhnaCksdGhpcy5mZyx0aGlzKTt5KHRoaXMseGMoaWgpLHRoaXMubGcsdGhpcyk7eSh0aGlzLHhjKGpoKSxcbnRoaXMubWcsdGhpcyk7eSh0aGlzLHhjKGtoKSx0aGlzLm9nLHRoaXMpO3kodGhpcyx4YyhsaCksdGhpcy5wZyx0aGlzKTt2b2lkIDAhPT1hLmVsZW1lbnQmJnRoaXMuc2V0KGdoLGEuZWxlbWVudCk7dGhpcy5zZXQoamgsdm9pZCAwIT09YS5vZmZzZXQ/YS5vZmZzZXQ6WzAsMF0pO3RoaXMuc2V0KGxoLHZvaWQgMCE9PWEucG9zaXRpb25pbmc/YS5wb3NpdGlvbmluZzpcInRvcC1sZWZ0XCIpO3ZvaWQgMCE9PWEucG9zaXRpb24mJnRoaXMuZGUoYS5wb3NpdGlvbil9dChmaCx2Yyk7bD1maC5wcm90b3R5cGU7bC5mZz1mdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmM7YS5sYXN0Q2hpbGQ7KWEucmVtb3ZlQ2hpbGQoYS5sYXN0Q2hpbGQpOyhhPXRoaXMuZ2V0KGdoKSkmJnRoaXMuYy5hcHBlbmRDaGlsZChhKX07XG5sLmxnPWZ1bmN0aW9uKCl7dGhpcy5nJiYoUGModGhpcy5jKSxpYyh0aGlzLmcpLHRoaXMuZz1udWxsKTt2YXIgYT10aGlzLmdldChpaCk7YSYmKHRoaXMuZz15KGEsXCJwb3N0cmVuZGVyXCIsdGhpcy5yZW5kZXIsdGhpcyksbWgodGhpcyksYT10aGlzLnY/YS52OmEucyx0aGlzLkI/YS5pbnNlcnRCZWZvcmUodGhpcy5jLGEuY2hpbGROb2Rlc1swXXx8bnVsbCk6YS5hcHBlbmRDaGlsZCh0aGlzLmMpKX07bC5yZW5kZXI9ZnVuY3Rpb24oKXttaCh0aGlzKX07bC5tZz1mdW5jdGlvbigpe21oKHRoaXMpfTtcbmwub2c9ZnVuY3Rpb24oKXttaCh0aGlzKTtpZih0aGlzLmdldChraCkmJnRoaXMuYXV0b1Bhbil7dmFyIGE9dGhpcy5nZXQoaWgpO2lmKGEmJmVoKGEpKXt2YXIgYj1uaChlaChhKSxhLm1iKCkpLGM9dGhpcy5nZXQoZ2gpLGQ9Yy5vZmZzZXRXaWR0aCxlPWdldENvbXB1dGVkU3R5bGUoYyksZD1kKyhwYXJzZUludChlLm1hcmdpbkxlZnQsMTApK3BhcnNlSW50KGUubWFyZ2luUmlnaHQsMTApKSxlPWMub2Zmc2V0SGVpZ2h0LGY9Z2V0Q29tcHV0ZWRTdHlsZShjKSxlPWUrKHBhcnNlSW50KGYubWFyZ2luVG9wLDEwKStwYXJzZUludChmLm1hcmdpbkJvdHRvbSwxMCkpLGc9bmgoYyxbZCxlXSksYz10aGlzLm87UWEoYixnKXx8KGQ9Z1swXS1iWzBdLGU9YlsyXS1nWzJdLGY9Z1sxXS1iWzFdLGc9YlszXS1nWzNdLGI9WzAsMF0sMD5kP2JbMF09ZC1jOjA+ZSYmKGJbMF09TWF0aC5hYnMoZSkrYyksMD5mP2JbMV09Zi1jOjA+ZyYmKGJbMV09TWF0aC5hYnMoZykrYyksMD09PWJbMF0mJjA9PT1cbmJbMV0pfHwoYz1hLlooKS5oYSgpLGM9Q2YoYSxjKSxiPVtjWzBdK2JbMF0sY1sxXStiWzFdXSxhLlooKS5hbmltYXRlKHtjZW50ZXI6YS5FYShiKSxkdXJhdGlvbjp0aGlzLmkuZHVyYXRpb24sZWFzaW5nOnRoaXMuaS5lYXNpbmd9KSl9fX07bC5wZz1mdW5jdGlvbigpe21oKHRoaXMpfTtsLnNldE1hcD1mdW5jdGlvbihhKXt0aGlzLnNldChpaCxhKX07bC5kZT1mdW5jdGlvbihhKXt0aGlzLnNldChraCxhKX07ZnVuY3Rpb24gbmgoYSxiKXt2YXIgYz1hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGQ9Yy5sZWZ0K3dpbmRvdy5wYWdlWE9mZnNldCxjPWMudG9wK3dpbmRvdy5wYWdlWU9mZnNldDtyZXR1cm5bZCxjLGQrYlswXSxjK2JbMV1dfWZ1bmN0aW9uIG9oKGEsYil7YS5hLnZpc2libGUhPT1iJiYoYS5jLnN0eWxlLmRpc3BsYXk9Yj9cIlwiOlwibm9uZVwiLGEuYS52aXNpYmxlPWIpfVxuZnVuY3Rpb24gbWgoYSl7dmFyIGI9YS5nZXQoaWgpLGM9YS5nZXQoa2gpO2lmKGImJmIuYyYmYyl7dmFyIGM9Q2YoYixjKSxkPWIubWIoKSxiPWEuYy5zdHlsZSxlPWEuZ2V0KGpoKSxmPWEuZ2V0KGxoKTtvaChhLCEwKTt2YXIgZz1lWzBdLGU9ZVsxXTtpZihcImJvdHRvbS1yaWdodFwiPT1mfHxcImNlbnRlci1yaWdodFwiPT1mfHxcInRvcC1yaWdodFwiPT1mKVwiXCIhPT1hLmEuWGImJihhLmEuWGI9Yi5sZWZ0PVwiXCIpLGc9TWF0aC5yb3VuZChkWzBdLWNbMF0tZykrXCJweFwiLGEuYS5rYyE9ZyYmKGEuYS5rYz1iLnJpZ2h0PWcpO2Vsc2V7XCJcIiE9PWEuYS5rYyYmKGEuYS5rYz1iLnJpZ2h0PVwiXCIpO2lmKFwiYm90dG9tLWNlbnRlclwiPT1mfHxcImNlbnRlci1jZW50ZXJcIj09Znx8XCJ0b3AtY2VudGVyXCI9PWYpZy09YS5jLm9mZnNldFdpZHRoLzI7Zz1NYXRoLnJvdW5kKGNbMF0rZykrXCJweFwiO2EuYS5YYiE9ZyYmKGEuYS5YYj1iLmxlZnQ9Zyl9aWYoXCJib3R0b20tbGVmdFwiPT1mfHxcImJvdHRvbS1jZW50ZXJcIj09XG5mfHxcImJvdHRvbS1yaWdodFwiPT1mKVwiXCIhPT1hLmEucGMmJihhLmEucGM9Yi50b3A9XCJcIiksYz1NYXRoLnJvdW5kKGRbMV0tY1sxXS1lKStcInB4XCIsYS5hLlBiIT1jJiYoYS5hLlBiPWIuYm90dG9tPWMpO2Vsc2V7XCJcIiE9PWEuYS5QYiYmKGEuYS5QYj1iLmJvdHRvbT1cIlwiKTtpZihcImNlbnRlci1sZWZ0XCI9PWZ8fFwiY2VudGVyLWNlbnRlclwiPT1mfHxcImNlbnRlci1yaWdodFwiPT1mKWUtPWEuYy5vZmZzZXRIZWlnaHQvMjtjPU1hdGgucm91bmQoY1sxXStlKStcInB4XCI7YS5hLnBjIT1jJiYoYS5hLnBjPWIudG9wPWMpfX1lbHNlIG9oKGEsITEpfXZhciBnaD1cImVsZW1lbnRcIixpaD1cIm1hcFwiLGpoPVwib2Zmc2V0XCIsa2g9XCJwb3NpdGlvblwiLGxoPVwicG9zaXRpb25pbmdcIjtmdW5jdGlvbiBwaChhKXthPWE/YTp7fTt2YXIgYj12b2lkIDAhPT1hLmNsYXNzTmFtZT9hLmNsYXNzTmFtZTpcIm9sLXNjYWxlLWxpbmVcIjt0aGlzLmc9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKTt0aGlzLmcuY2xhc3NOYW1lPWIrXCItaW5uZXJcIjt0aGlzLmE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKTt0aGlzLmEuY2xhc3NOYW1lPWIrXCIgb2wtdW5zZWxlY3RhYmxlXCI7dGhpcy5hLmFwcGVuZENoaWxkKHRoaXMuZyk7dGhpcy5qPW51bGw7dGhpcy5pPXZvaWQgMCE9PWEubWluV2lkdGg/YS5taW5XaWR0aDo2NDt0aGlzLmM9ITE7dGhpcy5CPXZvaWQgMDt0aGlzLm89XCJcIjtRYy5jYWxsKHRoaXMse2VsZW1lbnQ6dGhpcy5hLHJlbmRlcjphLnJlbmRlcj9hLnJlbmRlcjpxaCx0YXJnZXQ6YS50YXJnZXR9KTt5KHRoaXMseGMocmgpLHRoaXMuQyx0aGlzKTt0aGlzLnNldChyaCxhLnVuaXRzfHxcIm1ldHJpY1wiKX10KHBoLFFjKTt2YXIgc2g9WzEsMiw1XTtcbmZ1bmN0aW9uIHFoKGEpeyhhPWEuZnJhbWVTdGF0ZSk/dGhpcy5qPWEudmlld1N0YXRlOnRoaXMuaj1udWxsO3RoKHRoaXMpfXBoLnByb3RvdHlwZS5DPWZ1bmN0aW9uKCl7dGgodGhpcyl9O1xuZnVuY3Rpb24gdGgoYSl7dmFyIGI9YS5qO2lmKGIpe3ZhciBjPWIucHJvamVjdGlvbixkPWMuZigpLGU9Yi5yZXNvbHV0aW9uLGI9Yi5jZW50ZXIsZj1jLm87Zj9lPWYoZSxiKTpcImRlZ3JlZXNcIiE9Yy5hJiYoZj1LYihjLEhiKFwiRVBTRzo0MzI2XCIpKSxlPVtiWzBdLWUvMixiWzFdLGJbMF0rZS8yLGJbMV0sYlswXSxiWzFdLWUvMixiWzBdLGJbMV0rZS8yXSxlPWYoZSxlLDIpLGU9KGdiLmIoZS5zbGljZSgwLDIpLGUuc2xpY2UoMiw0KSkrZ2IuYihlLnNsaWNlKDQsNiksZS5zbGljZSg2LDgpKSkvMixjPWMuZigpLHZvaWQgMCE9PWMmJihlLz1jKSk7ZD1lKmQ7ZT1hLmkqZDtjPVwiXCI7Yj1hLmdldChyaCk7XCJkZWdyZWVzXCI9PWI/KGM9aGIuZGVncmVlcyxkLz1jLGU8Yy82MD8oYz1cIlxcdTIwMzNcIixkKj0zNjAwKTplPGM/KGM9XCJcXHUyMDMyXCIsZCo9NjApOmM9XCJcXHUwMGIwXCIpOlwiaW1wZXJpYWxcIj09Yj8uOTE0ND5lPyhjPVwiaW5cIixkLz0uMDI1NCk6MTYwOS4zNDQ+ZT8oYz1cImZ0XCIsZC89LjMwNDgpOlxuKGM9XCJtaVwiLGQvPTE2MDkuMzQ0KTpcIm5hdXRpY2FsXCI9PWI/KGQvPTE4NTIsYz1cIm5tXCIpOlwibWV0cmljXCI9PWI/LjAwMT5lPyhjPVwiXFx1MDNiY21cIixkKj0xRTYpOjE+ZT8oYz1cIm1tXCIsZCo9MUUzKToxRTM+ZT9jPVwibVwiOihjPVwia21cIixkLz0xRTMpOlwidXNcIj09Yj8uOTE0ND5lPyhjPVwiaW5cIixkKj0zOS4zNyk6MTYwOS4zNDQ+ZT8oYz1cImZ0XCIsZC89LjMwNDgwMDYxKTooYz1cIm1pXCIsZC89MTYwOS4zNDcyKTp4KCExLDMzKTtmb3IoYj0zKk1hdGguZmxvb3IoTWF0aC5sb2coYS5pKmQpL01hdGgubG9nKDEwKSk7Oyl7Zj1zaFsoYiUzKzMpJTNdKk1hdGgucG93KDEwLE1hdGguZmxvb3IoYi8zKSk7ZT1NYXRoLnJvdW5kKGYvZCk7aWYoaXNOYU4oZSkpe2EuYS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO2EuYz0hMTtyZXR1cm59aWYoZT49YS5pKWJyZWFrOysrYn1kPWYrXCIgXCIrYzthLm8hPWQmJihhLmcuaW5uZXJIVE1MPWQsYS5vPWQpO2EuQiE9ZSYmKGEuZy5zdHlsZS53aWR0aD1lK1wicHhcIixhLkI9XG5lKTthLmN8fChhLmEuc3R5bGUuZGlzcGxheT1cIlwiLGEuYz0hMCl9ZWxzZSBhLmMmJihhLmEuc3R5bGUuZGlzcGxheT1cIm5vbmVcIixhLmM9ITEpfXZhciByaD1cInVuaXRzXCI7ZnVuY3Rpb24gdWgoYSl7dGhpcy5pPWEub3BhY2l0eTt0aGlzLnM9YS5yb3RhdGVXaXRoVmlldzt0aGlzLm89YS5yb3RhdGlvbjt0aGlzLmc9YS5zY2FsZTt0aGlzLks9YS5zbmFwVG9QaXhlbH07ZnVuY3Rpb24gdmgoYSl7dGhpcy52PXRoaXMuaj10aGlzLmM9bnVsbDt0aGlzLmxhPXZvaWQgMCE9PWEuZmlsbD9hLmZpbGw6bnVsbDt0aGlzLmZhPVswLDBdO3RoaXMuYj1hLnBvaW50czt0aGlzLmY9dm9pZCAwIT09YS5yYWRpdXM/YS5yYWRpdXM6YS5yYWRpdXMxO3RoaXMuYT12b2lkIDAhPT1hLnJhZGl1czI/YS5yYWRpdXMyOnRoaXMuZjt0aGlzLnU9dm9pZCAwIT09YS5hbmdsZT9hLmFuZ2xlOjA7dGhpcy5wYT12b2lkIDAhPT1hLnN0cm9rZT9hLnN0cm9rZTpudWxsO3RoaXMuQz10aGlzLmdhPXRoaXMuYWE9bnVsbDt0aGlzLkI9YS5hdGxhc01hbmFnZXI7d2godGhpcyx0aGlzLkIpO3VoLmNhbGwodGhpcyx7b3BhY2l0eToxLHJvdGF0ZVdpdGhWaWV3OnZvaWQgMCE9PWEucm90YXRlV2l0aFZpZXc/YS5yb3RhdGVXaXRoVmlldzohMSxyb3RhdGlvbjp2b2lkIDAhPT1hLnJvdGF0aW9uP2Eucm90YXRpb246MCxzY2FsZToxLHNuYXBUb1BpeGVsOnZvaWQgMCE9PWEuc25hcFRvUGl4ZWw/XG5hLnNuYXBUb1BpeGVsOiEwfSl9dCh2aCx1aCk7bD12aC5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyB2aCh7ZmlsbDp0aGlzLnFhKCk/dGhpcy5xYSgpLmNsb25lKCk6dm9pZCAwLHBvaW50czp0aGlzLmEhPT10aGlzLmY/dGhpcy5iLzI6dGhpcy5iLHJhZGl1czp0aGlzLmYscmFkaXVzMjp0aGlzLmEsYW5nbGU6dGhpcy51LHNuYXBUb1BpeGVsOnRoaXMuSyxzdHJva2U6dGhpcy5tYSgpP3RoaXMubWEoKS5jbG9uZSgpOnZvaWQgMCxyb3RhdGlvbjp0aGlzLm8scm90YXRlV2l0aFZpZXc6dGhpcy5zLGF0bGFzTWFuYWdlcjp0aGlzLkJ9KTthLmk9dGhpcy5pO2EuZz10aGlzLmc7cmV0dXJuIGF9O2wuU2I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hYX07bC5xYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxhfTtsLkJlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudn07bC5pYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmp9O2wuVWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5DfTtcbmwuY2M9ZnVuY3Rpb24oKXtyZXR1cm4gMn07bC5kYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZhfTtsLm5iPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2F9O2wubWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYX07bC5hZT1mdW5jdGlvbigpe307bC5sb2FkPWZ1bmN0aW9uKCl7fTtsLlllPWZ1bmN0aW9uKCl7fTtcbmZ1bmN0aW9uIHdoKGEsYil7dmFyIGMsZD1cIlwiLGU9XCJcIixmPTAsZz1udWxsLGgsaz0wO2EucGEmJihoPWEucGEuYixudWxsPT09aCYmKGg9QmcpLGg9TWMoaCksaz1hLnBhLmMsdm9pZCAwPT09ayYmKGs9MSksZz1hLnBhLmYsb2R8fChnPW51bGwpLGU9YS5wYS5pLHZvaWQgMD09PWUmJihlPVwicm91bmRcIiksZD1hLnBhLmcsdm9pZCAwPT09ZCYmKGQ9XCJyb3VuZFwiKSxmPWEucGEudSx2b2lkIDA9PT1mJiYoZj0xMCkpO3ZhciBtPTIqKGEuZitrKSsxLGQ9e3N0cm9rZVN0eWxlOmgsV2U6ayxzaXplOm0sbGluZUNhcDpkLGxpbmVEYXNoOmcsbGluZUpvaW46ZSxtaXRlckxpbWl0OmZ9O3ZvaWQgMD09PWI/KGU9T2MobSxtKSxhLmo9ZS5jYW52YXMsYz1tPWEuai53aWR0aCxhLlFkKGQsZSwwLDApLGEubGE/YS52PWEuajooZT1PYyhkLnNpemUsZC5zaXplKSxhLnY9ZS5jYW52YXMsYS5QZChkLGUsMCwwKSkpOihtPU1hdGgucm91bmQobSksKGU9IWEubGEpJiYoYz1hLlBkLmJpbmQoYSxkKSksXG5hLnBhPyhmPWEucGEsdm9pZCAwPT09Zi5hJiYoZi5hPVwic1wiLGYuYT1mLmI/XCJzdHJpbmdcIj09PXR5cGVvZiBmLmI/Zi5hK2YuYjpmLmErdyhmLmIpLnRvU3RyaW5nKCk6Zi5hK1wiLVwiLGYuYSs9XCIsXCIrKHZvaWQgMCE9PWYuZz9mLmcudG9TdHJpbmcoKTpcIi1cIikrXCIsXCIrKGYuZj9mLmYudG9TdHJpbmcoKTpcIi1cIikrXCIsXCIrKHZvaWQgMCE9PWYuaj9mLmo6XCItXCIpK1wiLFwiKyh2b2lkIDAhPT1mLmk/Zi5pOlwiLVwiKStcIixcIisodm9pZCAwIT09Zi51P2YudS50b1N0cmluZygpOlwiLVwiKStcIixcIisodm9pZCAwIT09Zi5jP2YuYy50b1N0cmluZygpOlwiLVwiKSksZj1mLmEpOmY9XCItXCIsYS5sYT8oZz1hLmxhLHZvaWQgMD09PWcuZiYmKGcuZj1nLmIgaW5zdGFuY2VvZiBDYW52YXNQYXR0ZXJufHxnLmIgaW5zdGFuY2VvZiBDYW52YXNHcmFkaWVudD93KGcuYikudG9TdHJpbmcoKTpcImZcIisoZy5iP0pjKGcuYik6XCItXCIpKSxnPWcuZik6Zz1cIi1cIixhLmMmJmY9PWEuY1sxXSYmZz09YS5jWzJdJiZhLmY9PWEuY1szXSYmXG5hLmE9PWEuY1s0XSYmYS51PT1hLmNbNV0mJmEuYj09YS5jWzZdfHwoYS5jPVtcInJcIitmK2crKHZvaWQgMCE9PWEuZj9hLmYudG9TdHJpbmcoKTpcIi1cIikrKHZvaWQgMCE9PWEuYT9hLmEudG9TdHJpbmcoKTpcIi1cIikrKHZvaWQgMCE9PWEudT9hLnUudG9TdHJpbmcoKTpcIi1cIikrKHZvaWQgMCE9PWEuYj9hLmIudG9TdHJpbmcoKTpcIi1cIiksZixnLGEuZixhLmEsYS51LGEuYl0pLGQ9Yi5hZGQoYS5jWzBdLG0sbSxhLlFkLmJpbmQoYSxkKSxjKSxhLmo9ZC5pbWFnZSxhLmZhPVtkLm9mZnNldFgsZC5vZmZzZXRZXSxjPWQuaW1hZ2Uud2lkdGgsYS52PWU/ZC5iOmEuaik7YS5hYT1bbS8yLG0vMl07YS5nYT1bbSxtXTthLkM9W2MsY119XG5sLlFkPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlO2Iuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKTtiLnRyYW5zbGF0ZShjLGQpO2IuYmVnaW5QYXRoKCk7aWYoSW5maW5pdHk9PT10aGlzLmIpYi5hcmMoYS5zaXplLzIsYS5zaXplLzIsdGhpcy5mLDAsMipNYXRoLlBJLCEwKTtlbHNlIGZvcih0aGlzLmEhPT10aGlzLmYmJih0aGlzLmIqPTIpLGM9MDtjPD10aGlzLmI7YysrKWQ9MipjKk1hdGguUEkvdGhpcy5iLU1hdGguUEkvMit0aGlzLnUsZT1jJTI/dGhpcy5hOnRoaXMuZixiLmxpbmVUbyhhLnNpemUvMitlKk1hdGguY29zKGQpLGEuc2l6ZS8yK2UqTWF0aC5zaW4oZCkpO3RoaXMubGEmJihjPXRoaXMubGEuYixudWxsPT09YyYmKGM9emcpLGIuZmlsbFN0eWxlPU1jKGMpLGIuZmlsbCgpKTt0aGlzLnBhJiYoYi5zdHJva2VTdHlsZT1hLnN0cm9rZVN0eWxlLGIubGluZVdpZHRoPWEuV2UsYS5saW5lRGFzaCYmYi5zZXRMaW5lRGFzaChhLmxpbmVEYXNoKSxiLmxpbmVDYXA9YS5saW5lQ2FwLFxuYi5saW5lSm9pbj1hLmxpbmVKb2luLGIubWl0ZXJMaW1pdD1hLm1pdGVyTGltaXQsYi5zdHJva2UoKSk7Yi5jbG9zZVBhdGgoKX07XG5sLlBkPWZ1bmN0aW9uKGEsYixjLGQpe2Iuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKTtiLnRyYW5zbGF0ZShjLGQpO2IuYmVnaW5QYXRoKCk7aWYoSW5maW5pdHk9PT10aGlzLmIpYi5hcmMoYS5zaXplLzIsYS5zaXplLzIsdGhpcy5mLDAsMipNYXRoLlBJLCEwKTtlbHNle3RoaXMuYSE9PXRoaXMuZiYmKHRoaXMuYio9Mik7dmFyIGU7Zm9yKGM9MDtjPD10aGlzLmI7YysrKWU9MipjKk1hdGguUEkvdGhpcy5iLU1hdGguUEkvMit0aGlzLnUsZD1jJTI/dGhpcy5hOnRoaXMuZixiLmxpbmVUbyhhLnNpemUvMitkKk1hdGguY29zKGUpLGEuc2l6ZS8yK2QqTWF0aC5zaW4oZSkpfWIuZmlsbFN0eWxlPXpnO2IuZmlsbCgpO3RoaXMucGEmJihiLnN0cm9rZVN0eWxlPWEuc3Ryb2tlU3R5bGUsYi5saW5lV2lkdGg9YS5XZSxhLmxpbmVEYXNoJiZiLnNldExpbmVEYXNoKGEubGluZURhc2gpLGIuc3Ryb2tlKCkpO2IuY2xvc2VQYXRoKCl9O2Z1bmN0aW9uIHhoKGEpe2E9YXx8e307dmguY2FsbCh0aGlzLHtwb2ludHM6SW5maW5pdHksZmlsbDphLmZpbGwscmFkaXVzOmEucmFkaXVzLHNuYXBUb1BpeGVsOmEuc25hcFRvUGl4ZWwsc3Ryb2tlOmEuc3Ryb2tlLGF0bGFzTWFuYWdlcjphLmF0bGFzTWFuYWdlcn0pfXQoeGgsdmgpO3hoLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyB4aCh7ZmlsbDp0aGlzLnFhKCk/dGhpcy5xYSgpLmNsb25lKCk6dm9pZCAwLHN0cm9rZTp0aGlzLm1hKCk/dGhpcy5tYSgpLmNsb25lKCk6dm9pZCAwLHJhZGl1czp0aGlzLmYsc25hcFRvUGl4ZWw6dGhpcy5LLGF0bGFzTWFuYWdlcjp0aGlzLkJ9KTthLmk9dGhpcy5pO2EuZz10aGlzLmc7cmV0dXJuIGF9O3hoLnByb3RvdHlwZS5SZT1mdW5jdGlvbihhKXt0aGlzLmY9YTt3aCh0aGlzLHRoaXMuQil9O2Z1bmN0aW9uIHloKGEpe2E9YXx8e307dGhpcy5iPXZvaWQgMCE9PWEuY29sb3I/YS5jb2xvcjpudWxsO3RoaXMuZj12b2lkIDB9eWgucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iO3JldHVybiBuZXcgeWgoe2NvbG9yOmEmJmEuc2xpY2U/YS5zbGljZSgpOmF8fHZvaWQgMH0pfTtmdW5jdGlvbiB6aChhKXthPWF8fHt9O3RoaXMuVmE9bnVsbDt0aGlzLnRhPUFoO3ZvaWQgMCE9PWEuZ2VvbWV0cnkmJnRoaXMueGEoYS5nZW9tZXRyeSk7dGhpcy5sYT12b2lkIDAhPT1hLmZpbGw/YS5maWxsOm51bGw7dGhpcy5OPXZvaWQgMCE9PWEuaW1hZ2U/YS5pbWFnZTpudWxsO3RoaXMucGE9dm9pZCAwIT09YS5zdHJva2U/YS5zdHJva2U6bnVsbDt0aGlzLmVhPXZvaWQgMCE9PWEudGV4dD9hLnRleHQ6bnVsbDt0aGlzLnppPWEuekluZGV4fWw9emgucHJvdG90eXBlO1xubC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuUigpO2EmJmEuY2xvbmUmJihhPWEuY2xvbmUoKSk7cmV0dXJuIG5ldyB6aCh7Z2VvbWV0cnk6YSxmaWxsOnRoaXMucWEoKT90aGlzLnFhKCkuY2xvbmUoKTp2b2lkIDAsaW1hZ2U6dGhpcy5pYSgpP3RoaXMuaWEoKS5jbG9uZSgpOnZvaWQgMCxzdHJva2U6dGhpcy5tYSgpP3RoaXMubWEoKS5jbG9uZSgpOnZvaWQgMCx0ZXh0OnRoaXMubmEoKT90aGlzLm5hKCkuY2xvbmUoKTp2b2lkIDAsekluZGV4OnRoaXMucmEoKX0pfTtsLlI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5WYX07bC5xYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxhfTtsLlFlPWZ1bmN0aW9uKGEpe3RoaXMubGE9YX07bC5pYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLk59O2wubWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYX07bC5UZT1mdW5jdGlvbihhKXt0aGlzLnBhPWF9O2wubmE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYX07XG5sLlVlPWZ1bmN0aW9uKGEpe3RoaXMuZWE9YX07bC5yYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnppfTtsLnhhPWZ1bmN0aW9uKGEpe1wiZnVuY3Rpb25cIj09PXR5cGVvZiBhP3RoaXMudGE9YTpcInN0cmluZ1wiPT09dHlwZW9mIGE/dGhpcy50YT1mdW5jdGlvbihiKXtyZXR1cm4gYi5nZXQoYSl9OmE/YSYmKHRoaXMudGE9ZnVuY3Rpb24oKXtyZXR1cm4gYX0pOnRoaXMudGE9QWg7dGhpcy5WYT1hfTtmdW5jdGlvbiBCaChhKXtpZihcImZ1bmN0aW9uXCIhPT10eXBlb2YgYSl7dmFyIGI7QXJyYXkuaXNBcnJheShhKT9iPWE6KHgoYSBpbnN0YW5jZW9mIHpoLDQxKSxiPVthXSk7YT1mdW5jdGlvbigpe3JldHVybiBifX1yZXR1cm4gYX12YXIgQ2g9bnVsbDtcbmZ1bmN0aW9uIERoKCl7aWYoIUNoKXt2YXIgYT1uZXcgeWgoe2NvbG9yOlwicmdiYSgyNTUsMjU1LDI1NSwwLjQpXCJ9KSxiPW5ldyBUZyh7Y29sb3I6XCIjMzM5OUNDXCIsd2lkdGg6MS4yNX0pO0NoPVtuZXcgemgoe2ltYWdlOm5ldyB4aCh7ZmlsbDphLHN0cm9rZTpiLHJhZGl1czo1fSksZmlsbDphLHN0cm9rZTpifSldfXJldHVybiBDaH1cbmZ1bmN0aW9uIEVoKCl7dmFyIGE9e30sYj1bMjU1LDI1NSwyNTUsMV0sYz1bMCwxNTMsMjU1LDFdO2EuUG9seWdvbj1bbmV3IHpoKHtmaWxsOm5ldyB5aCh7Y29sb3I6WzI1NSwyNTUsMjU1LC41XX0pfSldO2EuTXVsdGlQb2x5Z29uPWEuUG9seWdvbjthLkxpbmVTdHJpbmc9W25ldyB6aCh7c3Ryb2tlOm5ldyBUZyh7Y29sb3I6Yix3aWR0aDo1fSl9KSxuZXcgemgoe3N0cm9rZTpuZXcgVGcoe2NvbG9yOmMsd2lkdGg6M30pfSldO2EuTXVsdGlMaW5lU3RyaW5nPWEuTGluZVN0cmluZzthLkNpcmNsZT1hLlBvbHlnb24uY29uY2F0KGEuTGluZVN0cmluZyk7YS5Qb2ludD1bbmV3IHpoKHtpbWFnZTpuZXcgeGgoe3JhZGl1czo2LGZpbGw6bmV3IHloKHtjb2xvcjpjfSksc3Ryb2tlOm5ldyBUZyh7Y29sb3I6Yix3aWR0aDoxLjV9KX0pLHpJbmRleDpJbmZpbml0eX0pXTthLk11bHRpUG9pbnQ9YS5Qb2ludDthLkdlb21ldHJ5Q29sbGVjdGlvbj1hLlBvbHlnb24uY29uY2F0KGEuTGluZVN0cmluZyxcbmEuUG9pbnQpO3JldHVybiBhfWZ1bmN0aW9uIEFoKGEpe3JldHVybiBhLlIoKX07ZnVuY3Rpb24gSShhKXt2Yy5jYWxsKHRoaXMpO3RoaXMuYT12b2lkIDA7dGhpcy5jPVwiZ2VvbWV0cnlcIjt0aGlzLmo9bnVsbDt0aGlzLmk9dm9pZCAwO3RoaXMuZz1udWxsO3kodGhpcyx4Yyh0aGlzLmMpLHRoaXMuVmIsdGhpcyk7dm9pZCAwIT09YSYmKGEgaW5zdGFuY2VvZiByZXx8IWE/dGhpcy54YShhKTp0aGlzLm9hKGEpKX10KEksdmMpO2w9SS5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBJKHRoaXMuRmEoKSk7YS5wYih0aGlzLmMpO3ZhciBiPXRoaXMuUigpO2ImJmEueGEoYi5jbG9uZSgpKTsoYj10aGlzLmopJiZhLmNlKGIpO3JldHVybiBhfTtsLlI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQodGhpcy5jKX07bC5VZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2wuVmY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jfTtsLlZnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuan07bC5nZz1mdW5jdGlvbigpe3RoaXMuYigpfTtcbmwuVmI9ZnVuY3Rpb24oKXt0aGlzLmcmJihpYyh0aGlzLmcpLHRoaXMuZz1udWxsKTt2YXIgYT10aGlzLlIoKTthJiYodGhpcy5nPXkoYSxcImNoYW5nZVwiLHRoaXMuZ2csdGhpcykpO3RoaXMuYigpfTtsLnhhPWZ1bmN0aW9uKGEpe3RoaXMuc2V0KHRoaXMuYyxhKX07bC5jZT1mdW5jdGlvbihhKXt0aGlzLmk9KHRoaXMuaj1hKT9GaChhKTp2b2lkIDA7dGhpcy5iKCl9O2wuJGE9ZnVuY3Rpb24oYSl7dGhpcy5hPWE7dGhpcy5iKCl9O2wucGI9ZnVuY3Rpb24oYSl7bmModGhpcyx4Yyh0aGlzLmMpLHRoaXMuVmIsdGhpcyk7dGhpcy5jPWE7eSh0aGlzLHhjKHRoaXMuYyksdGhpcy5WYix0aGlzKTt0aGlzLlZiKCl9O1xuZnVuY3Rpb24gRmgoYSl7dmFyIGI7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEpMj09YS5sZW5ndGg/Yj1mdW5jdGlvbihiKXtyZXR1cm4gYSh0aGlzLGIpfTpiPWE7ZWxzZXt2YXIgYztBcnJheS5pc0FycmF5KGEpP2M9YTooeChhIGluc3RhbmNlb2YgemgsNDEpLGM9W2FdKTtiPWZ1bmN0aW9uKCl7cmV0dXJuIGN9fXJldHVybiBifTt2YXIgR2g9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQoXCJcIixcIlwiLG51bGwpO2Z1bmN0aW9uIEhoKGEsYil7cmV0dXJuIEdoLmNyZWF0ZUVsZW1lbnROUyhhLGIpfWZ1bmN0aW9uIEloKGEpe3JldHVybiBKaChhLCExLFtdKS5qb2luKFwiXCIpfWZ1bmN0aW9uIEpoKGEsYixjKXtpZihhLm5vZGVUeXBlPT1Ob2RlLkNEQVRBX1NFQ1RJT05fTk9ERXx8YS5ub2RlVHlwZT09Tm9kZS5URVhUX05PREUpYj9jLnB1c2goU3RyaW5nKGEubm9kZVZhbHVlKS5yZXBsYWNlKC8oXFxyXFxufFxccnxcXG4pL2csXCJcIikpOmMucHVzaChhLm5vZGVWYWx1ZSk7ZWxzZSBmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpSmgoYSxiLGMpO3JldHVybiBjfWZ1bmN0aW9uIEtoKGEpe3JldHVybihuZXcgRE9NUGFyc2VyKS5wYXJzZUZyb21TdHJpbmcoYSxcImFwcGxpY2F0aW9uL3htbFwiKX1cbmZ1bmN0aW9uIEooYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2YXIgZT1hLmNhbGwodm9pZCAwIT09Yj9iOnRoaXMsYyxkKTt2b2lkIDAhPT1lJiZkW2QubGVuZ3RoLTFdLnB1c2goZSl9fWZ1bmN0aW9uIEsoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyxkKXt2YXIgZT1hLmNhbGwodm9pZCAwIT09Yj9iOnRoaXMsYyxkKTt2b2lkIDAhPT1lJiYoZFtkLmxlbmd0aC0xXT1lKX19ZnVuY3Rpb24gTGgoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5jYWxsKHRoaXMsYixjKTtpZih2b2lkIDAhPT1kKXt2YXIgZT1jW2MubGVuZ3RoLTFdLGY9Yi5sb2NhbE5hbWUsZztmIGluIGU/Zz1lW2ZdOmc9ZVtmXT1bXTtnLnB1c2goZCl9fX1mdW5jdGlvbiBMKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU9YS5jYWxsKHRoaXMsYyxkKTt2b2lkIDAhPT1lJiYoZFtkLmxlbmd0aC0xXVt2b2lkIDAhPT1iP2I6Yy5sb2NhbE5hbWVdPWUpfX1cbmZ1bmN0aW9uIE0oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2EuY2FsbCh2b2lkIDAhPT1iP2I6dGhpcyxjLGQsZSk7ZVtlLmxlbmd0aC0xXS5ub2RlLmFwcGVuZENoaWxkKGMpfX1mdW5jdGlvbiBNaChhKXt2YXIgYixjO3JldHVybiBmdW5jdGlvbihkLGUsZil7aWYoIWIpe2I9e307dmFyIGc9e307Z1tkLmxvY2FsTmFtZV09YTtiW2QubmFtZXNwYWNlVVJJXT1nO2M9TmgoZC5sb2NhbE5hbWUpfU9oKGIsYyxlLGYpfX1mdW5jdGlvbiBOaChhLGIpe3JldHVybiBmdW5jdGlvbihjLGQsZSl7Yz1kW2QubGVuZ3RoLTFdLm5vZGU7ZD1hO3ZvaWQgMD09PWQmJihkPWUpO2U9Yjt2b2lkIDA9PT1iJiYoZT1jLm5hbWVzcGFjZVVSSSk7cmV0dXJuIEhoKGUsZCl9fXZhciBQaD1OaCgpO2Z1bmN0aW9uIFFoKGEsYil7Zm9yKHZhciBjPWIubGVuZ3RoLGQ9QXJyYXkoYyksZT0wO2U8YzsrK2UpZFtlXT1hW2JbZV1dO3JldHVybiBkfVxuZnVuY3Rpb24gTyhhLGIsYyl7Yz12b2lkIDAhPT1jP2M6e307dmFyIGQsZTtkPTA7Zm9yKGU9YS5sZW5ndGg7ZDxlOysrZCljW2FbZF1dPWI7cmV0dXJuIGN9ZnVuY3Rpb24gUmgoYSxiLGMsZCl7Zm9yKGI9Yi5maXJzdEVsZW1lbnRDaGlsZDtiO2I9Yi5uZXh0RWxlbWVudFNpYmxpbmcpe3ZhciBlPWFbYi5uYW1lc3BhY2VVUkldO3ZvaWQgMCE9PWUmJihlPWVbYi5sb2NhbE5hbWVdKSYmZS5jYWxsKGQsYixjKX19ZnVuY3Rpb24gUChhLGIsYyxkLGUpe2QucHVzaChhKTtSaChiLGMsZCxlKTtyZXR1cm4gZC5wb3AoKX1mdW5jdGlvbiBPaChhLGIsYyxkLGUsZil7Zm9yKHZhciBnPSh2b2lkIDAhPT1lP2U6YykubGVuZ3RoLGgsayxtPTA7bTxnOysrbSloPWNbbV0sdm9pZCAwIT09aCYmKGs9Yi5jYWxsKGYsaCxkLHZvaWQgMCE9PWU/ZVttXTp2b2lkIDApLHZvaWQgMCE9PWsmJmFbay5uYW1lc3BhY2VVUkldW2subG9jYWxOYW1lXS5jYWxsKGYsayxoLGQpKX1cbmZ1bmN0aW9uIFIoYSxiLGMsZCxlLGYsZyl7ZS5wdXNoKGEpO09oKGIsYyxkLGUsZixnKTtlLnBvcCgpfTtmdW5jdGlvbiBTaChhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmKXt2YXIgZz1uZXcgWE1MSHR0cFJlcXVlc3Q7Zy5vcGVuKFwiR0VUXCIsXCJmdW5jdGlvblwiPT09dHlwZW9mIGE/YShkLGUsZik6YSwhMCk7XCJhcnJheWJ1ZmZlclwiPT1iLkgoKSYmKGcucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIik7Zy5vbmxvYWQ9ZnVuY3Rpb24oKXtpZighZy5zdGF0dXN8fDIwMDw9Zy5zdGF0dXMmJjMwMD5nLnN0YXR1cyl7dmFyIGE9Yi5IKCksZDtcImpzb25cIj09YXx8XCJ0ZXh0XCI9PWE/ZD1nLnJlc3BvbnNlVGV4dDpcInhtbFwiPT1hPyhkPWcucmVzcG9uc2VYTUwpfHwoZD1LaChnLnJlc3BvbnNlVGV4dCkpOlwiYXJyYXlidWZmZXJcIj09YSYmKGQ9Zy5yZXNwb25zZSk7ZCYmYy5jYWxsKHRoaXMsYi5SYShkLHtmZWF0dXJlUHJvamVjdGlvbjpmfSksYi5pYyhkKSl9fS5iaW5kKHRoaXMpO2cub25lcnJvcj1mdW5jdGlvbigpe30uYmluZCh0aGlzKTtnLnNlbmQoKX19XG5mdW5jdGlvbiBUaChhLGIpe3JldHVybiBTaChhLGIsZnVuY3Rpb24oYSl7dGhpcy51YihhKX0pfTtmdW5jdGlvbiBVaCgpe3RoaXMuYT10aGlzLmRlZmF1bHREYXRhUHJvamVjdGlvbj1udWxsfWZ1bmN0aW9uIFZoKGEsYixjKXt2YXIgZDtjJiYoZD17ZGF0YVByb2plY3Rpb246Yy5kYXRhUHJvamVjdGlvbj9jLmRhdGFQcm9qZWN0aW9uOmEuaWMoYiksZmVhdHVyZVByb2plY3Rpb246Yy5mZWF0dXJlUHJvamVjdGlvbn0pO3JldHVybiBXaChhLGQpfWZ1bmN0aW9uIFdoKGEsYil7cmV0dXJuIGJiKHtkYXRhUHJvamVjdGlvbjphLmRlZmF1bHREYXRhUHJvamVjdGlvbixmZWF0dXJlUHJvamVjdGlvbjphLmF9LGIpfVxuZnVuY3Rpb24gWGgoYSxiLGMpe3ZhciBkPWM/SGIoYy5mZWF0dXJlUHJvamVjdGlvbik6bnVsbCxlPWM/SGIoYy5kYXRhUHJvamVjdGlvbik6bnVsbCxmO2QmJmUmJiFKYihkLGUpP2EgaW5zdGFuY2VvZiByZT9mPShiP2EuY2xvbmUoKTphKS5DKGI/ZDplLGI/ZTpkKTpmPVBiKGI/YS5zbGljZSgpOmEsYj9kOmUsYj9lOmQpOmY9YTtpZihiJiZjJiZjLmRlY2ltYWxzKXt2YXIgZz1NYXRoLnBvdygxMCxjLmRlY2ltYWxzKTthPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjOysrYilhW2JdPU1hdGgucm91bmQoYVtiXSpnKS9nO3JldHVybiBhfTtBcnJheS5pc0FycmF5KGYpP2EoZik6Zi52YihhKX1yZXR1cm4gZn07ZnVuY3Rpb24gWWgoKXtVaC5jYWxsKHRoaXMpfXQoWWgsVWgpO2Z1bmN0aW9uIFpoKGEpe3JldHVyblwic3RyaW5nXCI9PT10eXBlb2YgYT8oYT1KU09OLnBhcnNlKGEpKT9hOm51bGw6bnVsbCE9PWE/YTpudWxsfWw9WWgucHJvdG90eXBlO2wuSD1mdW5jdGlvbigpe3JldHVyblwianNvblwifTtsLmVjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuWmEoWmgoYSksVmgodGhpcyxhLGIpKX07bC5SYT1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmdkKFpoKGEpLFZoKHRoaXMsYSxiKSl9O2wuaWM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMubGQoWmgoYSkpfTtsLnVkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMuc2IoYSxiKSl9O2Z1bmN0aW9uICRoKGEsYixjLGQsZSxmKXt2YXIgZz1OYU4saD1OYU4saz0oYy1iKS9kO2lmKDE9PT1rKWc9YVtiXSxoPWFbYisxXTtlbHNlIGlmKDI9PWspZz0oMS1lKSphW2JdK2UqYVtiK2RdLGg9KDEtZSkqYVtiKzFdK2UqYVtiK2QrMV07ZWxzZSBpZihrKXt2YXIgaD1hW2JdLGs9YVtiKzFdLG09MCxnPVswXSxuO2ZvcihuPWIrZDtuPGM7bis9ZCl7dmFyIHA9YVtuXSxxPWFbbisxXSxtPW0rTWF0aC5zcXJ0KChwLWgpKihwLWgpKyhxLWspKihxLWspKTtnLnB1c2gobSk7aD1wO2s9cX1jPWUqbTtrPTA7bT1nLmxlbmd0aDtmb3Iobj0hMTtrPG07KWU9aysobS1rPj4xKSxoPSttYShnW2VdLGMpLDA+aD9rPWUrMToobT1lLG49IWgpO2U9bj9rOn5rOzA+ZT8oYz0oYy1nWy1lLTJdKS8oZ1stZS0xXS1nWy1lLTJdKSxiKz0oLWUtMikqZCxnPUdhKGFbYl0sYVtiK2RdLGMpLGg9R2EoYVtiKzFdLGFbYitkKzFdLGMpKTooZz1hW2IrZSpkXSxoPWFbYitlKmQrMV0pfXJldHVybiBmPyhmWzBdPVxuZyxmWzFdPWgsZik6W2csaF19ZnVuY3Rpb24gYWkoYSxiLGMsZCxlKXtpZighYilyZXR1cm4gbnVsbDtpZihkPGFbMCtjLTFdKXJldHVybiBlPyhiPWEuc2xpY2UoMCwwK2MpLGJbYy0xXT1kLGIpOm51bGw7aWYoYVtiLTFdPGQpcmV0dXJuIGU/KGI9YS5zbGljZShiLWMsYiksYltjLTFdPWQsYik6bnVsbDtpZihkPT1hWzArYy0xXSlyZXR1cm4gYS5zbGljZSgwLDArYyk7ZT0wL2M7Zm9yKGIvPWM7ZTxiOyl7dmFyIGY9ZStiPj4xO2Q8YVsoZisxKSpjLTFdP2I9ZjplPWYrMX1iPWFbZSpjLTFdO2lmKGQ9PWIpcmV0dXJuIGEuc2xpY2UoKGUtMSkqYywoZS0xKSpjK2MpO2Y9KGQtYikvKGFbKGUrMSkqYy0xXS1iKTtiPVtdO3ZhciBnO2ZvcihnPTA7ZzxjLTE7KytnKWIucHVzaChHYShhWyhlLTEpKmMrZ10sYVtlKmMrZ10sZikpO2IucHVzaChkKTtyZXR1cm4gYn07ZnVuY3Rpb24gUyhhLGIpe3RlLmNhbGwodGhpcyk7dGhpcy5hPW51bGw7dGhpcy52PXRoaXMucz10aGlzLmk9LTE7dGhpcy5ZKGEsYil9dChTLHRlKTtsPVMucHJvdG90eXBlO2wuTGY9ZnVuY3Rpb24oYSl7dGhpcy5sP29hKHRoaXMubCxhKTp0aGlzLmw9YS5zbGljZSgpO3RoaXMuYigpfTtsLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFMobnVsbCk7YmkoYSx0aGlzLlgsdGhpcy5sLnNsaWNlKCkpO3JldHVybiBhfTtsLkhhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8UGEodGhpcy5KKCksYSxiKSlyZXR1cm4gZDt0aGlzLnYhPXRoaXMuZiYmKHRoaXMucz1NYXRoLnNxcnQoemUodGhpcy5sLDAsdGhpcy5sLmxlbmd0aCx0aGlzLkEsMCkpLHRoaXMudj10aGlzLmYpO3JldHVybiBCZSh0aGlzLmwsMCx0aGlzLmwubGVuZ3RoLHRoaXMuQSx0aGlzLnMsITEsYSxiLGMsZCl9O1xubC51ZT1mdW5jdGlvbihhLGIpe3JldHVyblwiWFlNXCIhPXRoaXMuWCYmXCJYWVpNXCIhPXRoaXMuWD9udWxsOmFpKHRoaXMubCx0aGlzLmwubGVuZ3RoLHRoaXMuQSxhLHZvaWQgMCE9PWI/YjohMSl9O2wuRD1mdW5jdGlvbigpe3JldHVybiBHZSh0aGlzLmwsMCx0aGlzLmwubGVuZ3RoLHRoaXMuQSl9O2wuUmQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gJGgodGhpcy5sLDAsdGhpcy5sLmxlbmd0aCx0aGlzLkEsYSxiKX07bC5taD1mdW5jdGlvbigpe3ZhciBhPXRoaXMubCxiPXRoaXMuQSxjPWFbMF0sZD1hWzFdLGU9MCxmO2ZvcihmPTArYjtmPHRoaXMubC5sZW5ndGg7Zis9Yil2YXIgZz1hW2ZdLGg9YVtmKzFdLGU9ZStNYXRoLnNxcnQoKGctYykqKGctYykrKGgtZCkqKGgtZCkpLGM9ZyxkPWg7cmV0dXJuIGV9O2Z1bmN0aW9uIExnKGEpe2EuaSE9YS5mJiYoYS5hPWEuUmQoLjUsYS5hKSxhLmk9YS5mKTtyZXR1cm4gYS5hfVxubC5pYj1mdW5jdGlvbihhKXt2YXIgYj1bXTtiLmxlbmd0aD1JZSh0aGlzLmwsMCx0aGlzLmwubGVuZ3RoLHRoaXMuQSxhLGIsMCk7YT1uZXcgUyhudWxsKTtiaShhLFwiWFlcIixiKTtyZXR1cm4gYX07bC5IPWZ1bmN0aW9uKCl7cmV0dXJuXCJMaW5lU3RyaW5nXCJ9O2wuWT1mdW5jdGlvbihhLGIpe2E/KHdlKHRoaXMsYixhLDEpLHRoaXMubHx8KHRoaXMubD1bXSksdGhpcy5sLmxlbmd0aD1FZSh0aGlzLmwsMCxhLHRoaXMuQSksdGhpcy5iKCkpOmJpKHRoaXMsXCJYWVwiLG51bGwpfTtmdW5jdGlvbiBiaShhLGIsYyl7dmUoYSxiLGMpO2EuYigpfTtmdW5jdGlvbiBjaShhLGIpe3RlLmNhbGwodGhpcyk7dGhpcy5hPVtdO3RoaXMuaT10aGlzLnY9LTE7dGhpcy5ZKGEsYil9dChjaSx0ZSk7bD1jaS5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBjaShudWxsKTtkaShhLHRoaXMuWCx0aGlzLmwuc2xpY2UoKSx0aGlzLmEuc2xpY2UoKSk7cmV0dXJuIGF9O2wuSGE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoZDxQYSh0aGlzLkooKSxhLGIpKXJldHVybiBkO3RoaXMuaSE9dGhpcy5mJiYodGhpcy52PU1hdGguc3FydChBZSh0aGlzLmwsMCx0aGlzLmEsdGhpcy5BLDApKSx0aGlzLmk9dGhpcy5mKTtyZXR1cm4gQ2UodGhpcy5sLDAsdGhpcy5hLHRoaXMuQSx0aGlzLnYsITEsYSxiLGMsZCl9O2wuRD1mdW5jdGlvbigpe3JldHVybiBIZSh0aGlzLmwsMCx0aGlzLmEsdGhpcy5BKX07bC5nYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O1xubC5oYj1mdW5jdGlvbigpe3ZhciBhPXRoaXMubCxiPXRoaXMuYSxjPXRoaXMuWCxkPVtdLGU9MCxmLGc7Zj0wO2ZvcihnPWIubGVuZ3RoO2Y8ZzsrK2Ype3ZhciBoPWJbZl0saz1uZXcgUyhudWxsKTtiaShrLGMsYS5zbGljZShlLGgpKTtkLnB1c2goayk7ZT1ofXJldHVybiBkfTtmdW5jdGlvbiBNZyhhKXt2YXIgYj1bXSxjPWEubCxkPTAsZT1hLmE7YT1hLkE7dmFyIGYsZztmPTA7Zm9yKGc9ZS5sZW5ndGg7ZjxnOysrZil7dmFyIGg9ZVtmXSxkPSRoKGMsZCxoLGEsLjUpO29hKGIsZCk7ZD1ofXJldHVybiBifWwuaWI9ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPXRoaXMubCxlPXRoaXMuYSxmPXRoaXMuQSxnPTAsaD0wLGssbTtrPTA7Zm9yKG09ZS5sZW5ndGg7azxtOysrayl7dmFyIG49ZVtrXSxoPUllKGQsZyxuLGYsYSxiLGgpO2MucHVzaChoKTtnPW59Yi5sZW5ndGg9aDthPW5ldyBjaShudWxsKTtkaShhLFwiWFlcIixiLGMpO3JldHVybiBhfTtsLkg9ZnVuY3Rpb24oKXtyZXR1cm5cIk11bHRpTGluZVN0cmluZ1wifTtcbmwuWT1mdW5jdGlvbihhLGIpe2lmKGEpe3dlKHRoaXMsYixhLDIpO3RoaXMubHx8KHRoaXMubD1bXSk7dmFyIGM9RmUodGhpcy5sLDAsYSx0aGlzLkEsdGhpcy5hKTt0aGlzLmwubGVuZ3RoPWMubGVuZ3RoP2NbYy5sZW5ndGgtMV06MDt0aGlzLmIoKX1lbHNlIGRpKHRoaXMsXCJYWVwiLG51bGwsdGhpcy5hKX07ZnVuY3Rpb24gZGkoYSxiLGMsZCl7dmUoYSxiLGMpO2EuYT1kO2EuYigpfWZ1bmN0aW9uIGVpKGEsYil7dmFyIGM9YS5YLGQ9W10sZT1bXSxmLGc7Zj0wO2ZvcihnPWIubGVuZ3RoO2Y8ZzsrK2Ype3ZhciBoPWJbZl07Znx8KGM9aC5YKTtvYShkLGgubCk7ZS5wdXNoKGQubGVuZ3RoKX1kaShhLGMsZCxlKX07ZnVuY3Rpb24gZmkoYSxiKXt0ZS5jYWxsKHRoaXMpO3RoaXMuWShhLGIpfXQoZmksdGUpO2w9ZmkucHJvdG90eXBlO2wuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgZmkobnVsbCk7dmUoYSx0aGlzLlgsdGhpcy5sLnNsaWNlKCkpO2EuYigpO3JldHVybiBhfTtsLkhhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8UGEodGhpcy5KKCksYSxiKSlyZXR1cm4gZDt2YXIgZT10aGlzLmwsZj10aGlzLkEsZyxoLGs7Zz0wO2ZvcihoPWUubGVuZ3RoO2c8aDtnKz1mKWlmKGs9Q2EoYSxiLGVbZ10sZVtnKzFdKSxrPGQpe2Q9aztmb3Ioaz0wO2s8ZjsrK2spY1trXT1lW2cra107Yy5sZW5ndGg9Zn1yZXR1cm4gZH07bC5EPWZ1bmN0aW9uKCl7cmV0dXJuIEdlKHRoaXMubCwwLHRoaXMubC5sZW5ndGgsdGhpcy5BKX07XG5mdW5jdGlvbiBnaShhKXt2YXIgYj1hLmwsYz1hLlg7YT1hLkE7dmFyIGQ9W10sZSxmO2U9MDtmb3IoZj1iLmxlbmd0aDtlPGY7ZSs9YSl7dmFyIGc9bmV3IE1lKG51bGwpLGg9Zzt2ZShoLGMsYi5zbGljZShlLGUrYSkpO2guYigpO2QucHVzaChnKX1yZXR1cm4gZH1sLkg9ZnVuY3Rpb24oKXtyZXR1cm5cIk11bHRpUG9pbnRcIn07bC5ZPWZ1bmN0aW9uKGEsYil7YT8od2UodGhpcyxiLGEsMSksdGhpcy5sfHwodGhpcy5sPVtdKSx0aGlzLmwubGVuZ3RoPUVlKHRoaXMubCwwLGEsdGhpcy5BKSk6dmUodGhpcyxcIlhZXCIsbnVsbCk7dGhpcy5iKCl9O2Z1bmN0aW9uIGhpKGEsYil7dGUuY2FsbCh0aGlzKTt0aGlzLmE9W107dGhpcy52PS0xO3RoaXMucz1udWxsO3RoaXMuVj10aGlzLkc9dGhpcy5JPS0xO3RoaXMuaT1udWxsO3RoaXMuWShhLGIpfXQoaGksdGUpO2w9aGkucHJvdG90eXBlO2wuY2xvbmU9ZnVuY3Rpb24oKXtmb3IodmFyIGE9bmV3IGhpKG51bGwpLGI9dGhpcy5hLmxlbmd0aCxjPUFycmF5KGIpLGQ9MDtkPGI7KytkKWNbZF09dGhpcy5hW2RdLnNsaWNlKCk7aWkoYSx0aGlzLlgsdGhpcy5sLnNsaWNlKCksYyk7cmV0dXJuIGF9O1xubC5IYT1mdW5jdGlvbihhLGIsYyxkKXtpZihkPFBhKHRoaXMuSigpLGEsYikpcmV0dXJuIGQ7aWYodGhpcy5HIT10aGlzLmYpe3ZhciBlPXRoaXMuYSxmPTAsZz0wLGgsaztoPTA7Zm9yKGs9ZS5sZW5ndGg7aDxrOysraCl2YXIgbT1lW2hdLGc9QWUodGhpcy5sLGYsbSx0aGlzLkEsZyksZj1tW20ubGVuZ3RoLTFdO3RoaXMuST1NYXRoLnNxcnQoZyk7dGhpcy5HPXRoaXMuZn1lPU5nKHRoaXMpO2Y9dGhpcy5hO2c9dGhpcy5BO2g9dGhpcy5JO2s9MDt2YXIgbT1bTmFOLE5hTl0sbixwO249MDtmb3IocD1mLmxlbmd0aDtuPHA7KytuKXt2YXIgcT1mW25dO2Q9Q2UoZSxrLHEsZyxoLCEwLGEsYixjLGQsbSk7az1xW3EubGVuZ3RoLTFdfXJldHVybiBkfTtsLm5oPWZ1bmN0aW9uKCl7dmFyIGE9TmcodGhpcyksYj10aGlzLmEsYz0wLGQ9MCxlLGY7ZT0wO2ZvcihmPWIubGVuZ3RoO2U8ZjsrK2UpdmFyIGc9YltlXSxkPWQreGUoYSxjLGcsdGhpcy5BKSxjPWdbZy5sZW5ndGgtMV07cmV0dXJuIGR9O1xubC5EPWZ1bmN0aW9uKGEpe3ZhciBiO3ZvaWQgMCE9PWE/KGI9TmcodGhpcykuc2xpY2UoKSxTZShiLHRoaXMuYSx0aGlzLkEsYSkpOmI9dGhpcy5sO2E9YjtiPXRoaXMuYTt2YXIgYz10aGlzLkEsZD0wLGU9W10sZj0wLGcsaDtnPTA7Zm9yKGg9Yi5sZW5ndGg7ZzxoOysrZyl7dmFyIGs9YltnXTtlW2YrK109SGUoYSxkLGssYyxlW2ZdKTtkPWtbay5sZW5ndGgtMV19ZS5sZW5ndGg9ZjtyZXR1cm4gZX07XG5mdW5jdGlvbiBPZyhhKXtpZihhLnYhPWEuZil7dmFyIGI9YS5sLGM9YS5hLGQ9YS5BLGU9MCxmPVtdLGcsaCxrO2c9MDtmb3IoaD1jLmxlbmd0aDtnPGg7KytnKXt2YXIgbT1jW2ddO2s9Yjt2YXIgbj1tWzBdLHA9ZCxxPVNhKHZvaWQgMCk7az1WYShxLGssZSxuLHApO2YucHVzaCgoa1swXStrWzJdKS8yLChrWzFdK2tbM10pLzIpO2U9bVttLmxlbmd0aC0xXX1iPU5nKGEpO2M9YS5hO2Q9YS5BO2c9MDtoPVtdO209MDtmb3Ioaz1jLmxlbmd0aDttPGs7KyttKWU9Y1ttXSxoPU9lKGIsZyxlLGQsZiwyKm0saCksZz1lW2UubGVuZ3RoLTFdO2Eucz1oO2Eudj1hLmZ9cmV0dXJuIGEuc31sLlpmPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGZpKG51bGwpLGI9T2codGhpcykuc2xpY2UoKTt2ZShhLFwiWFlcIixiKTthLmIoKTtyZXR1cm4gYX07XG5mdW5jdGlvbiBOZyhhKXtpZihhLlYhPWEuZil7dmFyIGI9YS5sLGM7YTp7Yz1hLmE7dmFyIGQsZTtkPTA7Zm9yKGU9Yy5sZW5ndGg7ZDxlOysrZClpZighUWUoYixjW2RdLGEuQSx2b2lkIDApKXtjPSExO2JyZWFrIGF9Yz0hMH1jP2EuaT1iOihhLmk9Yi5zbGljZSgpLGEuaS5sZW5ndGg9U2UoYS5pLGEuYSxhLkEpKTthLlY9YS5mfXJldHVybiBhLml9bC5pYj1mdW5jdGlvbihhKXt2YXIgYj1bXSxjPVtdLGQ9dGhpcy5sLGU9dGhpcy5hLGY9dGhpcy5BO2E9TWF0aC5zcXJ0KGEpO3ZhciBnPTAsaD0wLGssbTtrPTA7Zm9yKG09ZS5sZW5ndGg7azxtOysrayl7dmFyIG49ZVtrXSxwPVtdLGg9SmUoZCxnLG4sZixhLGIsaCxwKTtjLnB1c2gocCk7Zz1uW24ubGVuZ3RoLTFdfWIubGVuZ3RoPWg7ZD1uZXcgaGkobnVsbCk7aWkoZCxcIlhZXCIsYixjKTtyZXR1cm4gZH07XG5mdW5jdGlvbiBqaShhKXt2YXIgYj1hLlgsYz1hLmw7YT1hLmE7dmFyIGQ9W10sZT0wLGYsZyxoLGs7Zj0wO2ZvcihnPWEubGVuZ3RoO2Y8ZzsrK2Ype3ZhciBtPWFbZl0uc2xpY2UoKSxuPW1bbS5sZW5ndGgtMV07aWYoZSlmb3IoaD0wLGs9bS5sZW5ndGg7aDxrOysraCltW2hdLT1lO2g9bmV3IEIobnVsbCk7VGUoaCxiLGMuc2xpY2UoZSxuKSxtKTtkLnB1c2goaCk7ZT1ufXJldHVybiBkfWwuSD1mdW5jdGlvbigpe3JldHVyblwiTXVsdGlQb2x5Z29uXCJ9O1xubC5ZPWZ1bmN0aW9uKGEsYil7aWYoYSl7d2UodGhpcyxiLGEsMyk7dGhpcy5sfHwodGhpcy5sPVtdKTt2YXIgYz10aGlzLmwsZD10aGlzLkEsZT10aGlzLmEsZj0wLGU9ZT9lOltdLGc9MCxoLGs7aD0wO2ZvcihrPWEubGVuZ3RoO2g8azsrK2gpZj1GZShjLGYsYVtoXSxkLGVbZ10pLGVbZysrXT1mLGY9ZltmLmxlbmd0aC0xXTtlLmxlbmd0aD1nO2UubGVuZ3RoPyhjPWVbZS5sZW5ndGgtMV0sdGhpcy5sLmxlbmd0aD1jLmxlbmd0aD9jW2MubGVuZ3RoLTFdOjApOnRoaXMubC5sZW5ndGg9MDt0aGlzLmIoKX1lbHNlIGlpKHRoaXMsXCJYWVwiLG51bGwsdGhpcy5hKX07ZnVuY3Rpb24gaWkoYSxiLGMsZCl7dmUoYSxiLGMpO2EuYT1kO2EuYigpfVxuZnVuY3Rpb24ga2koYSxiKXt2YXIgYz1hLlgsZD1bXSxlPVtdLGYsZyxoO2Y9MDtmb3IoZz1iLmxlbmd0aDtmPGc7KytmKXt2YXIgaz1iW2ZdO2Z8fChjPWsuWCk7dmFyIG09ZC5sZW5ndGg7aD1rLmdiKCk7dmFyIG4scDtuPTA7Zm9yKHA9aC5sZW5ndGg7bjxwOysrbiloW25dKz1tO29hKGQsay5sKTtlLnB1c2goaCl9aWkoYSxjLGQsZSl9O2Z1bmN0aW9uIGxpKGEpe2E9YT9hOnt9O1VoLmNhbGwodGhpcyk7dGhpcy5iPWEuZ2VvbWV0cnlOYW1lfXQobGksWWgpO2Z1bmN0aW9uIG1pKGEpe3ZhciBiPVwiWFlcIjshMD09PWEuaGFzWiYmITA9PT1hLmhhc00/Yj1cIlhZWk1cIjohMD09PWEuaGFzWj9iPVwiWFlaXCI6ITA9PT1hLmhhc00mJihiPVwiWFlNXCIpO3JldHVybiBifWZ1bmN0aW9uIG5pKGEpe2E9YS5YO3JldHVybntoYXNaOlwiWFlaXCI9PT1hfHxcIlhZWk1cIj09PWEsaGFzTTpcIlhZTVwiPT09YXx8XCJYWVpNXCI9PT1hfX1cbnZhciBvaT17UG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHZvaWQgMCE9PWEubSYmdm9pZCAwIT09YS56P25ldyBNZShbYS54LGEueSxhLnosYS5tXSxcIlhZWk1cIik6dm9pZCAwIT09YS56P25ldyBNZShbYS54LGEueSxhLnpdLFwiWFlaXCIpOnZvaWQgMCE9PWEubT9uZXcgTWUoW2EueCxhLnksYS5tXSxcIlhZTVwiKTpuZXcgTWUoW2EueCxhLnldKX0sTGluZVN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFMoYS5wYXRoc1swXSxtaShhKSl9LFBvbHlnb246ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBCKGEucmluZ3MsbWkoYSkpfSxNdWx0aVBvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZmkoYS5wb2ludHMsbWkoYSkpfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBjaShhLnBhdGhzLG1pKGEpKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgaGkoYS5yaW5ncyxtaShhKSl9fSxwaT17UG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5EKCksYztcbmE9YS5YO1wiWFlaXCI9PT1hP2M9e3g6YlswXSx5OmJbMV0sejpiWzJdfTpcIlhZTVwiPT09YT9jPXt4OmJbMF0seTpiWzFdLG06YlsyXX06XCJYWVpNXCI9PT1hP2M9e3g6YlswXSx5OmJbMV0sejpiWzJdLG06YlszXX06XCJYWVwiPT09YT9jPXt4OmJbMF0seTpiWzFdfTp4KCExLDM0KTtyZXR1cm4gY30sTGluZVN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj1uaShhKTtyZXR1cm57aGFzWjpiLmhhc1osaGFzTTpiLmhhc00scGF0aHM6W2EuRCgpXX19LFBvbHlnb246ZnVuY3Rpb24oYSl7dmFyIGI9bmkoYSk7cmV0dXJue2hhc1o6Yi5oYXNaLGhhc006Yi5oYXNNLHJpbmdzOmEuRCghMSl9fSxNdWx0aVBvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPW5pKGEpO3JldHVybntoYXNaOmIuaGFzWixoYXNNOmIuaGFzTSxwb2ludHM6YS5EKCl9fSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9bmkoYSk7cmV0dXJue2hhc1o6Yi5oYXNaLGhhc006Yi5oYXNNLHBhdGhzOmEuRCgpfX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPVxubmkoYSk7YT1hLkQoITEpO2Zvcih2YXIgYz1bXSxkPTA7ZDxhLmxlbmd0aDtkKyspZm9yKHZhciBlPWFbZF0ubGVuZ3RoLTE7MDw9ZTtlLS0pYy5wdXNoKGFbZF1bZV0pO3JldHVybntoYXNaOmIuaGFzWixoYXNNOmIuaGFzTSxyaW5nczpjfX19O2w9bGkucHJvdG90eXBlO1xubC5aYT1mdW5jdGlvbihhLGIpe3ZhciBjO2lmKGM9YS5nZW9tZXRyeSl7dmFyIGQ7aWYoXCJudW1iZXJcIj09PXR5cGVvZiBjLngmJlwibnVtYmVyXCI9PT10eXBlb2YgYy55KWQ9XCJQb2ludFwiO2Vsc2UgaWYoYy5wb2ludHMpZD1cIk11bHRpUG9pbnRcIjtlbHNlIGlmKGMucGF0aHMpZD0xPT09Yy5wYXRocy5sZW5ndGg/XCJMaW5lU3RyaW5nXCI6XCJNdWx0aUxpbmVTdHJpbmdcIjtlbHNlIGlmKGMucmluZ3Mpe3ZhciBlPWMucmluZ3MsZj1taShjKSxnPVtdLGg9W107ZD1bXTt2YXIgayxtO2s9MDtmb3IobT1lLmxlbmd0aDtrPG07KytrKWcubGVuZ3RoPTAsRWUoZywwLGVba10sZi5sZW5ndGgpLFBlKGcsMCxnLmxlbmd0aCxmLmxlbmd0aCk/aC5wdXNoKFtlW2tdXSk6ZC5wdXNoKGVba10pO2Zvcig7ZC5sZW5ndGg7KXtlPWQuc2hpZnQoKTtmPSExO2ZvcihrPWgubGVuZ3RoLTE7MDw9aztrLS0paWYoUWEoKG5ldyBLZShoW2tdWzBdKSkuSigpLChuZXcgS2UoZSkpLkooKSkpe2hba10ucHVzaChlKTtmPVxuITA7YnJlYWt9Znx8aC5wdXNoKFtlLnJldmVyc2UoKV0pfWM9YmIoe30sYyk7MT09PWgubGVuZ3RoPyhkPVwiUG9seWdvblwiLGMucmluZ3M9aFswXSk6KGQ9XCJNdWx0aVBvbHlnb25cIixjLnJpbmdzPWgpfWM9WGgoKDAsb2lbZF0pKGMpLCExLGIpfWVsc2UgYz1udWxsO2g9bmV3IEk7dGhpcy5iJiZoLnBiKHRoaXMuYik7aC54YShjKTtiJiZiLlVjJiZhLmF0dHJpYnV0ZXNbYi5VY10mJmguJGEoYS5hdHRyaWJ1dGVzW2IuVWNdKTthLmF0dHJpYnV0ZXMmJmgub2EoYS5hdHRyaWJ1dGVzKTtyZXR1cm4gaH07bC5nZD1mdW5jdGlvbihhLGIpe3ZhciBjPWI/Yjp7fTtpZihhLmZlYXR1cmVzKXt2YXIgZD1bXSxlPWEuZmVhdHVyZXMsZixnO2MuVWM9YS5vYmplY3RJZEZpZWxkTmFtZTtmPTA7Zm9yKGc9ZS5sZW5ndGg7ZjxnOysrZilkLnB1c2godGhpcy5aYShlW2ZdLGMpKTtyZXR1cm4gZH1yZXR1cm5bdGhpcy5aYShhLGMpXX07XG5sLmxkPWZ1bmN0aW9uKGEpe3JldHVybiBhLnNwYXRpYWxSZWZlcmVuY2UmJmEuc3BhdGlhbFJlZmVyZW5jZS53a2lkP0hiKFwiRVBTRzpcIithLnNwYXRpYWxSZWZlcmVuY2Uud2tpZCk6bnVsbH07bC5zYj1mdW5jdGlvbihhLGIpe2I9V2godGhpcyxiKTt2YXIgYz17fSxkPWEuUigpO2lmKGQpe3ZhciBlPWIsZD0oMCxwaVtkLkgoKV0pKFhoKGQsITAsZSksZSk7Yy5nZW9tZXRyeT1kfWQ9YS5GYSgpO2RlbGV0ZSBkW2EuY107Yy5hdHRyaWJ1dGVzPWViKGQpP3t9OmQ7YiYmYi5mZWF0dXJlUHJvamVjdGlvbiYmKGMuc3BhdGlhbFJlZmVyZW5jZT17d2tpZDpIYihiLmZlYXR1cmVQcm9qZWN0aW9uKS5JYS5zcGxpdChcIjpcIikucG9wKCl9KTtyZXR1cm4gY307bC52ZD1mdW5jdGlvbihhLGIpe2I9V2godGhpcyxiKTt2YXIgYz1bXSxkLGU7ZD0wO2ZvcihlPWEubGVuZ3RoO2Q8ZTsrK2QpYy5wdXNoKHRoaXMuc2IoYVtkXSxiKSk7cmV0dXJue2ZlYXR1cmVzOmN9fTtmdW5jdGlvbiBxaShhKXtyZS5jYWxsKHRoaXMpO3RoaXMuYT1hP2E6bnVsbDtyaSh0aGlzKX10KHFpLHJlKTtmdW5jdGlvbiBzaShhKXt2YXIgYj1bXSxjLGQ7Yz0wO2ZvcihkPWEubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKGFbY10uY2xvbmUoKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gdGkoYSl7dmFyIGIsYztpZihhLmEpZm9yKGI9MCxjPWEuYS5sZW5ndGg7YjxjOysrYiluYyhhLmFbYl0sXCJjaGFuZ2VcIixhLmIsYSl9ZnVuY3Rpb24gcmkoYSl7dmFyIGIsYztpZihhLmEpZm9yKGI9MCxjPWEuYS5sZW5ndGg7YjxjOysrYil5KGEuYVtiXSxcImNoYW5nZVwiLGEuYixhKX1sPXFpLnByb3RvdHlwZTtsLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHFpKG51bGwpLGI9c2kodGhpcy5hKTt0aShhKTthLmE9YjtyaShhKTthLmIoKTtyZXR1cm4gYX07XG5sLkhhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8UGEodGhpcy5KKCksYSxiKSlyZXR1cm4gZDt2YXIgZT10aGlzLmEsZixnO2Y9MDtmb3IoZz1lLmxlbmd0aDtmPGc7KytmKWQ9ZVtmXS5IYShhLGIsYyxkKTtyZXR1cm4gZH07bC5SYj1mdW5jdGlvbihhKXtTYShhKTtmb3IodmFyIGI9dGhpcy5hLGM9MCxkPWIubGVuZ3RoO2M8ZDsrK2Mpe3ZhciBlPWEsZj1iW2NdLkooKTtmWzBdPGVbMF0mJihlWzBdPWZbMF0pO2ZbMl0+ZVsyXSYmKGVbMl09ZlsyXSk7ZlsxXTxlWzFdJiYoZVsxXT1mWzFdKTtmWzNdPmVbM10mJihlWzNdPWZbM10pfXJldHVybiBhfTtcbmwuUmM9ZnVuY3Rpb24oYSl7dGhpcy5qIT10aGlzLmYmJihjYih0aGlzLmMpLHRoaXMuZz0wLHRoaXMuaj10aGlzLmYpO2lmKDA+YXx8dGhpcy5nJiZhPHRoaXMuZylyZXR1cm4gdGhpczt2YXIgYj1hLnRvU3RyaW5nKCk7aWYodGhpcy5jLmhhc093blByb3BlcnR5KGIpKXJldHVybiB0aGlzLmNbYl07dmFyIGM9W10sZD10aGlzLmEsZT0hMSxmLGc7Zj0wO2ZvcihnPWQubGVuZ3RoO2Y8ZzsrK2Ype3ZhciBoPWRbZl0saz1oLlJjKGEpO2MucHVzaChrKTtrIT09aCYmKGU9ITApfWlmKGUpcmV0dXJuIGE9bmV3IHFpKG51bGwpLHRpKGEpLGEuYT1jLHJpKGEpLGEuYigpLHRoaXMuY1tiXT1hO3RoaXMuZz1hO3JldHVybiB0aGlzfTtsLkg9ZnVuY3Rpb24oKXtyZXR1cm5cIkdlb21ldHJ5Q29sbGVjdGlvblwifTtsLnJvdGF0ZT1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLmEsZD0wLGU9Yy5sZW5ndGg7ZDxlOysrZCljW2RdLnJvdGF0ZShhLGIpO3RoaXMuYigpfTtcbmwuc2NhbGU9ZnVuY3Rpb24oYSxiLGMpe2N8fChjPVdhKHRoaXMuSigpKSk7Zm9yKHZhciBkPXRoaXMuYSxlPTAsZj1kLmxlbmd0aDtlPGY7KytlKWRbZV0uc2NhbGUoYSxiLGMpO3RoaXMuYigpfTtsLnZiPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYSxjLGQ7Yz0wO2ZvcihkPWIubGVuZ3RoO2M8ZDsrK2MpYltjXS52YihhKTt0aGlzLmIoKX07bC5rYT1mdW5jdGlvbigpe3RpKHRoaXMpO3JlLnByb3RvdHlwZS5rYS5jYWxsKHRoaXMpfTtmdW5jdGlvbiB1aShhKXthPWE/YTp7fTtVaC5jYWxsKHRoaXMpO3RoaXMuZGVmYXVsdERhdGFQcm9qZWN0aW9uPUhiKGEuZGVmYXVsdERhdGFQcm9qZWN0aW9uP2EuZGVmYXVsdERhdGFQcm9qZWN0aW9uOlwiRVBTRzo0MzI2XCIpO2EuZmVhdHVyZVByb2plY3Rpb24mJih0aGlzLmE9SGIoYS5mZWF0dXJlUHJvamVjdGlvbikpO3RoaXMuYj1hLmdlb21ldHJ5TmFtZX10KHVpLFloKTtmdW5jdGlvbiB2aShhLGIpe3JldHVybiBhP1hoKCgwLHdpW2EudHlwZV0pKGEpLCExLGIpOm51bGx9ZnVuY3Rpb24geGkoYSxiKXtyZXR1cm4oMCx5aVthLkgoKV0pKFhoKGEsITAsYiksYil9XG52YXIgd2k9e1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgTWUoYS5jb29yZGluYXRlcyl9LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBTKGEuY29vcmRpbmF0ZXMpfSxQb2x5Z29uOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgQihhLmNvb3JkaW5hdGVzKX0sTXVsdGlQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGZpKGEuY29vcmRpbmF0ZXMpfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBjaShhLmNvb3JkaW5hdGVzKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgaGkoYS5jb29yZGluYXRlcyl9LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2VvbWV0cmllcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIHZpKGEsYil9KTtyZXR1cm4gbmV3IHFpKGMpfX0seWk9e1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybnt0eXBlOlwiUG9pbnRcIixjb29yZGluYXRlczphLkQoKX19LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJue3R5cGU6XCJMaW5lU3RyaW5nXCIsXG5jb29yZGluYXRlczphLkQoKX19LFBvbHlnb246ZnVuY3Rpb24oYSxiKXt2YXIgYztiJiYoYz1iLnJpZ2h0SGFuZGVkKTtyZXR1cm57dHlwZTpcIlBvbHlnb25cIixjb29yZGluYXRlczphLkQoYyl9fSxNdWx0aVBvaW50OmZ1bmN0aW9uKGEpe3JldHVybnt0eXBlOlwiTXVsdGlQb2ludFwiLGNvb3JkaW5hdGVzOmEuRCgpfX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybnt0eXBlOlwiTXVsdGlMaW5lU3RyaW5nXCIsY29vcmRpbmF0ZXM6YS5EKCl9fSxNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSxiKXt2YXIgYztiJiYoYz1iLnJpZ2h0SGFuZGVkKTtyZXR1cm57dHlwZTpcIk11bHRpUG9seWdvblwiLGNvb3JkaW5hdGVzOmEuRChjKX19LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihhLGIpe3JldHVybnt0eXBlOlwiR2VvbWV0cnlDb2xsZWN0aW9uXCIsZ2VvbWV0cmllczphLmEubWFwKGZ1bmN0aW9uKGEpe3ZhciBjPWJiKHt9LGIpO2RlbGV0ZSBjLmZlYXR1cmVQcm9qZWN0aW9uO3JldHVybiB4aShhLFxuYyl9KX19LENpcmNsZTpmdW5jdGlvbigpe3JldHVybnt0eXBlOlwiR2VvbWV0cnlDb2xsZWN0aW9uXCIsZ2VvbWV0cmllczpbXX19fTtsPXVpLnByb3RvdHlwZTtsLlphPWZ1bmN0aW9uKGEsYil7dmFyIGM7Yz1cIkZlYXR1cmVcIj09PWEudHlwZT9hOnt0eXBlOlwiRmVhdHVyZVwiLGdlb21ldHJ5OmF9O3ZhciBkPXZpKGMuZ2VvbWV0cnksYiksZT1uZXcgSTt0aGlzLmImJmUucGIodGhpcy5iKTtlLnhhKGQpO3ZvaWQgMCE9PWMuaWQmJmUuJGEoYy5pZCk7Yy5wcm9wZXJ0aWVzJiZlLm9hKGMucHJvcGVydGllcyk7cmV0dXJuIGV9O2wuZ2Q9ZnVuY3Rpb24oYSxiKXt2YXIgYztpZihcIkZlYXR1cmVDb2xsZWN0aW9uXCI9PT1hLnR5cGUpe2M9W107dmFyIGQ9YS5mZWF0dXJlcyxlLGY7ZT0wO2ZvcihmPWQubGVuZ3RoO2U8ZjsrK2UpYy5wdXNoKHRoaXMuWmEoZFtlXSxiKSl9ZWxzZSBjPVt0aGlzLlphKGEsYildO3JldHVybiBjfTtcbmwubGQ9ZnVuY3Rpb24oYSl7YT1hLmNyczt2YXIgYjthP1wibmFtZVwiPT1hLnR5cGU/Yj1IYihhLnByb3BlcnRpZXMubmFtZSk6XCJFUFNHXCI9PWEudHlwZT9iPUhiKFwiRVBTRzpcIithLnByb3BlcnRpZXMuY29kZSk6eCghMSwzNik6Yj10aGlzLmRlZmF1bHREYXRhUHJvamVjdGlvbjtyZXR1cm4gYn07bC5zYj1mdW5jdGlvbihhLGIpe2I9V2godGhpcyxiKTt2YXIgYz17dHlwZTpcIkZlYXR1cmVcIn0sZD1hLmE7dm9pZCAwIT09ZCYmKGMuaWQ9ZCk7KGQ9YS5SKCkpP2MuZ2VvbWV0cnk9eGkoZCxiKTpjLmdlb21ldHJ5PW51bGw7ZD1hLkZhKCk7ZGVsZXRlIGRbYS5jXTtlYihkKT9jLnByb3BlcnRpZXM9bnVsbDpjLnByb3BlcnRpZXM9ZDtyZXR1cm4gY307bC52ZD1mdW5jdGlvbihhLGIpe2I9V2godGhpcyxiKTt2YXIgYz1bXSxkLGU7ZD0wO2ZvcihlPWEubGVuZ3RoO2Q8ZTsrK2QpYy5wdXNoKHRoaXMuc2IoYVtkXSxiKSk7cmV0dXJue3R5cGU6XCJGZWF0dXJlQ29sbGVjdGlvblwiLGZlYXR1cmVzOmN9fTtmdW5jdGlvbiB6aSgpe3RoaXMudT1uZXcgWE1MU2VyaWFsaXplcjtVaC5jYWxsKHRoaXMpfXQoemksVWgpO2w9emkucHJvdG90eXBlO2wuSD1mdW5jdGlvbigpe3JldHVyblwieG1sXCJ9O2wuZWM9ZnVuY3Rpb24oYSxiKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnQpcmV0dXJuIEFpKHRoaXMsYSxiKTtpZihhIGluc3RhbmNlb2YgTm9kZSlyZXR1cm4gbnVsbDtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBjPUtoKGEpO3JldHVybiBBaSh0aGlzLGMsYil9cmV0dXJuIG51bGx9O2Z1bmN0aW9uIEFpKGEsYixjKXthPUJpKGEsYixjKTtyZXR1cm4gMDxhLmxlbmd0aD9hWzBdOm51bGx9bC5SYT1mdW5jdGlvbihhLGIpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudClyZXR1cm4gQmkodGhpcyxhLGIpO2lmKGEgaW5zdGFuY2VvZiBOb2RlKXJldHVybiB0aGlzLmZkKGEsYik7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYz1LaChhKTtyZXR1cm4gQmkodGhpcyxjLGIpfXJldHVybltdfTtcbmZ1bmN0aW9uIEJpKGEsYixjKXt2YXIgZD1bXTtmb3IoYj1iLmZpcnN0Q2hpbGQ7YjtiPWIubmV4dFNpYmxpbmcpYi5ub2RlVHlwZT09Tm9kZS5FTEVNRU5UX05PREUmJm9hKGQsYS5mZChiLGMpKTtyZXR1cm4gZH1sLmljPWZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgRG9jdW1lbnQ/dGhpcy5rZChhKTphIGluc3RhbmNlb2YgTm9kZT90aGlzLmpjKGEpOlwic3RyaW5nXCI9PT10eXBlb2YgYT8oYT1LaChhKSx0aGlzLmtkKGEpKTpudWxsfTtsLmtkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVmYXVsdERhdGFQcm9qZWN0aW9ufTtsLmpjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVmYXVsdERhdGFQcm9qZWN0aW9ufTtsLnVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudS5zZXJpYWxpemVUb1N0cmluZyhudWxsKX07ZnVuY3Rpb24gVShhKXthPWE/YTp7fTt0aGlzLmZlYXR1cmVUeXBlPWEuZmVhdHVyZVR5cGU7dGhpcy5mZWF0dXJlTlM9YS5mZWF0dXJlTlM7dGhpcy5zcnNOYW1lPWEuc3JzTmFtZTt0aGlzLnNjaGVtYUxvY2F0aW9uPVwiXCI7dGhpcy5iPXt9O3RoaXMuYltcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCJdPXtmZWF0dXJlTWVtYmVyOksoVS5wcm90b3R5cGUuR2IpLGZlYXR1cmVNZW1iZXJzOksoVS5wcm90b3R5cGUuR2IpfTt6aS5jYWxsKHRoaXMpfXQoVSx6aSk7dmFyIENpPS9eW1xcc1xceGEwXSokLztsPVUucHJvdG90eXBlO1xubC5HYj1mdW5jdGlvbihhLGIpe3ZhciBjPWEubG9jYWxOYW1lLGQ9bnVsbDtpZihcIkZlYXR1cmVDb2xsZWN0aW9uXCI9PWMpXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dmc1wiPT09YS5uYW1lc3BhY2VVUkk/ZD1QKFtdLHRoaXMuYixhLGIsdGhpcyk6ZD1QKG51bGwsdGhpcy5iLGEsYix0aGlzKTtlbHNlIGlmKFwiZmVhdHVyZU1lbWJlcnNcIj09Y3x8XCJmZWF0dXJlTWVtYmVyXCI9PWMpe3ZhciBlPWJbMF0sZj1lLmZlYXR1cmVUeXBlLGc9ZS5mZWF0dXJlTlMsaCxrO2lmKCFmJiZhLmNoaWxkTm9kZXMpe2Y9W107Zz17fTtoPTA7Zm9yKGs9YS5jaGlsZE5vZGVzLmxlbmd0aDtoPGs7KytoKXt2YXIgbT1hLmNoaWxkTm9kZXNbaF07aWYoMT09PW0ubm9kZVR5cGUpe3ZhciBuPW0ubm9kZU5hbWUuc3BsaXQoXCI6XCIpLnBvcCgpO2lmKC0xPT09Zi5pbmRleE9mKG4pKXt2YXIgcD1cIlwiLHE9MCxtPW0ubmFtZXNwYWNlVVJJLHU7Zm9yKHUgaW4gZyl7aWYoZ1t1XT09PW0pe3A9dTticmVha30rK3F9cHx8XG4ocD1cInBcIitxLGdbcF09bSk7Zi5wdXNoKHArXCI6XCIrbil9fX1cImZlYXR1cmVNZW1iZXJcIiE9YyYmKGUuZmVhdHVyZVR5cGU9ZixlLmZlYXR1cmVOUz1nKX1cInN0cmluZ1wiPT09dHlwZW9mIGcmJihoPWcsZz17fSxnLnAwPWgpO3ZhciBlPXt9LGY9QXJyYXkuaXNBcnJheShmKT9mOltmXSxGO2ZvcihGIGluIGcpe249e307aD0wO2ZvcihrPWYubGVuZ3RoO2g8azsrK2gpKC0xPT09ZltoXS5pbmRleE9mKFwiOlwiKT9cInAwXCI6ZltoXS5zcGxpdChcIjpcIilbMF0pPT09RiYmKG5bZltoXS5zcGxpdChcIjpcIikucG9wKCldPVwiZmVhdHVyZU1lbWJlcnNcIj09Yz9KKHRoaXMuSGUsdGhpcyk6Syh0aGlzLkhlLHRoaXMpKTtlW2dbRl1dPW59XCJmZWF0dXJlTWVtYmVyXCI9PWM/ZD1QKHZvaWQgMCxlLGEsYik6ZD1QKFtdLGUsYSxiKX1udWxsPT09ZCYmKGQ9W10pO3JldHVybiBkfTtcbmZ1bmN0aW9uIERpKGEsYixjKXt2YXIgZD1jWzBdO2Quc3JzTmFtZT1iLmZpcnN0RWxlbWVudENoaWxkLmdldEF0dHJpYnV0ZShcInNyc05hbWVcIik7aWYoYT1QKG51bGwsYS55ZCxiLGMsYSkpcmV0dXJuIFhoKGEsITEsZCl9XG5sLkhlPWZ1bmN0aW9uKGEsYil7dmFyIGMsZDsoZD1hLmdldEF0dHJpYnV0ZShcImZpZFwiKSl8fChkPWEuZ2V0QXR0cmlidXRlTlMoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiLFwiaWRcIil8fFwiXCIpO3ZhciBlPXt9LGY7Zm9yKGM9YS5maXJzdEVsZW1lbnRDaGlsZDtjO2M9Yy5uZXh0RWxlbWVudFNpYmxpbmcpe3ZhciBnPWMubG9jYWxOYW1lO2lmKDA9PT1jLmNoaWxkTm9kZXMubGVuZ3RofHwxPT09Yy5jaGlsZE5vZGVzLmxlbmd0aCYmKDM9PT1jLmZpcnN0Q2hpbGQubm9kZVR5cGV8fDQ9PT1jLmZpcnN0Q2hpbGQubm9kZVR5cGUpKXt2YXIgaD1JaChjKTtDaS50ZXN0KGgpJiYoaD12b2lkIDApO2VbZ109aH1lbHNlXCJib3VuZGVkQnlcIiE9PWcmJihmPWcpLGVbZ109RGkodGhpcyxjLGIpfWM9bmV3IEkoZSk7ZiYmYy5wYihmKTtkJiZjLiRhKGQpO3JldHVybiBjfTtcbmwuTmU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmZjKGEsYik7aWYoYyl7dmFyIGQ9bmV3IE1lKG51bGwpO3ZlKGQsXCJYWVpcIixjKTtkLmIoKTtyZXR1cm4gZH19O2wuTGU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKFtdLHRoaXMubGYsYSxiLHRoaXMpO2lmKGMpcmV0dXJuIG5ldyBmaShjKX07bC5LZT1mdW5jdGlvbihhLGIpe3ZhciBjPVAoW10sdGhpcy5rZixhLGIsdGhpcyk7aWYoYyl7dmFyIGQ9bmV3IGNpKG51bGwpO2VpKGQsYyk7cmV0dXJuIGR9fTtsLk1lPWZ1bmN0aW9uKGEsYil7dmFyIGM9UChbXSx0aGlzLm1mLGEsYix0aGlzKTtpZihjKXt2YXIgZD1uZXcgaGkobnVsbCk7a2koZCxjKTtyZXR1cm4gZH19O2wuRWU9ZnVuY3Rpb24oYSxiKXtSaCh0aGlzLnFmLGEsYix0aGlzKX07bC4kZD1mdW5jdGlvbihhLGIpe1JoKHRoaXMuaGYsYSxiLHRoaXMpfTtsLkZlPWZ1bmN0aW9uKGEsYil7UmgodGhpcy5yZixhLGIsdGhpcyl9O1xubC5nYz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZmMoYSxiKTtpZihjKXt2YXIgZD1uZXcgUyhudWxsKTtiaShkLFwiWFlaXCIsYyk7cmV0dXJuIGR9fTtsLlloPWZ1bmN0aW9uKGEsYil7dmFyIGM9UChudWxsLHRoaXMuSWIsYSxiLHRoaXMpO2lmKGMpcmV0dXJuIGN9O2wuSmU9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmZjKGEsYik7aWYoYyl7dmFyIGQ9bmV3IEtlKG51bGwpO0xlKGQsXCJYWVpcIixjKTtyZXR1cm4gZH19O2wuaGM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKFtudWxsXSx0aGlzLnNjLGEsYix0aGlzKTtpZihjJiZjWzBdKXt2YXIgZD1uZXcgQihudWxsKSxlPWNbMF0sZj1bZS5sZW5ndGhdLGcsaDtnPTE7Zm9yKGg9Yy5sZW5ndGg7ZzxoOysrZylvYShlLGNbZ10pLGYucHVzaChlLmxlbmd0aCk7VGUoZCxcIlhZWlwiLGUsZik7cmV0dXJuIGR9fTtsLmZjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFAobnVsbCx0aGlzLkliLGEsYix0aGlzKX07XG5sLmxmPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e3BvaW50TWVtYmVyOkooVS5wcm90b3R5cGUuRWUpLHBvaW50TWVtYmVyczpKKFUucHJvdG90eXBlLkVlKX19O2wua2Y9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7bGluZVN0cmluZ01lbWJlcjpKKFUucHJvdG90eXBlLiRkKSxsaW5lU3RyaW5nTWVtYmVyczpKKFUucHJvdG90eXBlLiRkKX19O2wubWY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7cG9seWdvbk1lbWJlcjpKKFUucHJvdG90eXBlLkZlKSxwb2x5Z29uTWVtYmVyczpKKFUucHJvdG90eXBlLkZlKX19O2wucWY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7UG9pbnQ6SihVLnByb3RvdHlwZS5mYyl9fTtsLmhmPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e0xpbmVTdHJpbmc6SihVLnByb3RvdHlwZS5nYyl9fTtsLnJmPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e1BvbHlnb246SihVLnByb3RvdHlwZS5oYyl9fTtcbmwuSmI9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7TGluZWFyUmluZzpLKFUucHJvdG90eXBlLlloKX19O2wuZmQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz17ZmVhdHVyZVR5cGU6dGhpcy5mZWF0dXJlVHlwZSxmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlN9O2ImJmJiKGMsVmgodGhpcyxhLGIpKTtyZXR1cm4gdGhpcy5HYihhLFtjXSl8fFtdfTtsLmpjPWZ1bmN0aW9uKGEpe3JldHVybiBIYih0aGlzLnNyc05hbWU/dGhpcy5zcnNOYW1lOmEuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKFwic3JzTmFtZVwiKSl9O2Z1bmN0aW9uIEVpKGEpe2E9SWgoYSk7cmV0dXJuIEZpKGEpfWZ1bmN0aW9uIEZpKGEpe2lmKGE9L15cXHMqKHRydWV8MSl8KGZhbHNlfDApXFxzKiQvLmV4ZWMoYSkpcmV0dXJuIHZvaWQgMCE9PWFbMV18fCExfWZ1bmN0aW9uIEdpKGEpe2E9SWgoYSk7YT1EYXRlLnBhcnNlKGEpO3JldHVybiBpc05hTihhKT92b2lkIDA6YS8xRTN9ZnVuY3Rpb24gSGkoYSl7YT1JaChhKTtyZXR1cm4gSWkoYSl9ZnVuY3Rpb24gSWkoYSl7aWYoYT0vXlxccyooWytcXC1dP1xcZCpcXC4/XFxkKyg/OmVbK1xcLV0/XFxkKyk/KVxccyokL2kuZXhlYyhhKSlyZXR1cm4gcGFyc2VGbG9hdChhWzFdKX1mdW5jdGlvbiBKaShhKXthPUloKGEpO3JldHVybiBLaShhKX1mdW5jdGlvbiBLaShhKXtpZihhPS9eXFxzKihcXGQrKVxccyokLy5leGVjKGEpKXJldHVybiBwYXJzZUludChhWzFdLDEwKX1mdW5jdGlvbiBWKGEpe3JldHVybiBJaChhKS50cmltKCl9ZnVuY3Rpb24gTGkoYSxiKXtXKGEsYj9cIjFcIjpcIjBcIil9XG5mdW5jdGlvbiBNaShhLGIpe2EuYXBwZW5kQ2hpbGQoR2guY3JlYXRlVGV4dE5vZGUoYi50b1ByZWNpc2lvbigpKSl9ZnVuY3Rpb24gTmkoYSxiKXthLmFwcGVuZENoaWxkKEdoLmNyZWF0ZVRleHROb2RlKGIudG9TdHJpbmcoKSkpfWZ1bmN0aW9uIFcoYSxiKXthLmFwcGVuZENoaWxkKEdoLmNyZWF0ZVRleHROb2RlKGIpKX07ZnVuY3Rpb24gWShhKXthPWE/YTp7fTtVLmNhbGwodGhpcyxhKTt0aGlzLnNjaGVtYUxvY2F0aW9uPWEuc2NoZW1hTG9jYXRpb24/YS5zY2hlbWFMb2NhdGlvbjpcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L2dtbC8zLjEuMS9wcm9maWxlcy9nbWxzZlByb2ZpbGUvMS4wLjAvZ21sc2YueHNkXCJ9dChZLFUpO2w9WS5wcm90b3R5cGU7bC5iaT1mdW5jdGlvbihhLGIpe3ZhciBjPVAoW10sdGhpcy5qZixhLGIsdGhpcyk7aWYoYyl7dmFyIGQ9bmV3IGNpKG51bGwpO2VpKGQsYyk7cmV0dXJuIGR9fTtsLmNpPWZ1bmN0aW9uKGEsYil7dmFyIGM9UChbXSx0aGlzLm5mLGEsYix0aGlzKTtpZihjKXt2YXIgZD1uZXcgaGkobnVsbCk7a2koZCxjKTtyZXR1cm4gZH19O2wuT2Q9ZnVuY3Rpb24oYSxiKXtSaCh0aGlzLmVmLGEsYix0aGlzKX07bC5YZT1mdW5jdGlvbihhLGIpe1JoKHRoaXMudGYsYSxiLHRoaXMpfTtcbmwuZGk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUChbbnVsbF0sdGhpcy5wZixhLGIsdGhpcyl9O2wuZmk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUChbbnVsbF0sdGhpcy5zZixhLGIsdGhpcyl9O2wuZWk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUChbbnVsbF0sdGhpcy5zYyxhLGIsdGhpcyl9O2wuYWk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUChbbnVsbF0sdGhpcy5JYixhLGIsdGhpcyl9O2wuQmc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKHZvaWQgMCx0aGlzLkpiLGEsYix0aGlzKTtjJiZiW2IubGVuZ3RoLTFdLnB1c2goYyl9O2wuT2Y9ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKHZvaWQgMCx0aGlzLkpiLGEsYix0aGlzKTtjJiYoYltiLmxlbmd0aC0xXVswXT1jKX07XG5sLk9lPWZ1bmN0aW9uKGEsYil7dmFyIGM9UChbbnVsbF0sdGhpcy51ZixhLGIsdGhpcyk7aWYoYyYmY1swXSl7dmFyIGQ9bmV3IEIobnVsbCksZT1jWzBdLGY9W2UubGVuZ3RoXSxnLGg7Zz0xO2ZvcihoPWMubGVuZ3RoO2c8aDsrK2cpb2EoZSxjW2ddKSxmLnB1c2goZS5sZW5ndGgpO1RlKGQsXCJYWVpcIixlLGYpO3JldHVybiBkfX07bC5HZT1mdW5jdGlvbihhLGIpe3ZhciBjPVAoW251bGxdLHRoaXMuZmYsYSxiLHRoaXMpO2lmKGMpe3ZhciBkPW5ldyBTKG51bGwpO2JpKGQsXCJYWVpcIixjKTtyZXR1cm4gZH19O2wuWGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKFtudWxsXSx0aGlzLmdmLGEsYix0aGlzKTtyZXR1cm4gUmEoY1sxXVswXSxjWzFdWzFdLGNbMl1bMF0sY1syXVsxXSl9O1xubC5aaD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1JaChhKSxkPS9eXFxzKihbK1xcLV0/XFxkKlxcLj9cXGQrKD86W2VFXVsrXFwtXT9cXGQrKT8pXFxzKi8sZT1bXSxmO2Y9ZC5leGVjKGMpOyllLnB1c2gocGFyc2VGbG9hdChmWzFdKSksYz1jLnN1YnN0cihmWzBdLmxlbmd0aCk7aWYoXCJcIj09PWMpe2M9YlswXS5zcnNOYW1lO2Q9XCJlbnVcIjtjJiYoZD1IYihjKS5iKTtpZihcIm5ldVwiPT09ZClmb3IoYz0wLGQ9ZS5sZW5ndGg7YzxkO2MrPTMpZj1lW2NdLGVbY109ZVtjKzFdLGVbYysxXT1mO2M9ZS5sZW5ndGg7Mj09YyYmZS5wdXNoKDApO2lmKGMpcmV0dXJuIGV9fTtcbmwuamQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1JaChhKS5yZXBsYWNlKC9eXFxzKnxcXHMqJC9nLFwiXCIpLGQ9YlswXS5zcnNOYW1lLGU9YS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcInNyc0RpbWVuc2lvblwiKSxmPVwiZW51XCI7ZCYmKGY9SGIoZCkuYik7Yz1jLnNwbGl0KC9cXHMrLyk7ZD0yO2EuZ2V0QXR0cmlidXRlKFwic3JzRGltZW5zaW9uXCIpP2Q9S2koYS5nZXRBdHRyaWJ1dGUoXCJzcnNEaW1lbnNpb25cIikpOmEuZ2V0QXR0cmlidXRlKFwiZGltZW5zaW9uXCIpP2Q9S2koYS5nZXRBdHRyaWJ1dGUoXCJkaW1lbnNpb25cIikpOmUmJihkPUtpKGUpKTtmb3IodmFyIGcsaCxrPVtdLG09MCxuPWMubGVuZ3RoO208bjttKz1kKWU9cGFyc2VGbG9hdChjW21dKSxnPXBhcnNlRmxvYXQoY1ttKzFdKSxoPTM9PT1kP3BhcnNlRmxvYXQoY1ttKzJdKTowLFwiZW5cIj09PWYuc3Vic3RyKDAsMik/ay5wdXNoKGUsZyxoKTprLnB1c2goZyxlLGgpO3JldHVybiBrfTtcbmwuSWI9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7cG9zOksoWS5wcm90b3R5cGUuWmgpLHBvc0xpc3Q6SyhZLnByb3RvdHlwZS5qZCl9fTtsLnNjPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2ludGVyaW9yOlkucHJvdG90eXBlLkJnLGV4dGVyaW9yOlkucHJvdG90eXBlLk9mfX07XG5sLnlkPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e1BvaW50OksoVS5wcm90b3R5cGUuTmUpLE11bHRpUG9pbnQ6SyhVLnByb3RvdHlwZS5MZSksTGluZVN0cmluZzpLKFUucHJvdG90eXBlLmdjKSxNdWx0aUxpbmVTdHJpbmc6SyhVLnByb3RvdHlwZS5LZSksTGluZWFyUmluZzpLKFUucHJvdG90eXBlLkplKSxQb2x5Z29uOksoVS5wcm90b3R5cGUuaGMpLE11bHRpUG9seWdvbjpLKFUucHJvdG90eXBlLk1lKSxTdXJmYWNlOksoWS5wcm90b3R5cGUuT2UpLE11bHRpU3VyZmFjZTpLKFkucHJvdG90eXBlLmNpKSxDdXJ2ZTpLKFkucHJvdG90eXBlLkdlKSxNdWx0aUN1cnZlOksoWS5wcm90b3R5cGUuYmkpLEVudmVsb3BlOksoWS5wcm90b3R5cGUuWGgpfX07bC5qZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntjdXJ2ZU1lbWJlcjpKKFkucHJvdG90eXBlLk9kKSxjdXJ2ZU1lbWJlcnM6SihZLnByb3RvdHlwZS5PZCl9fTtcbmwubmY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7c3VyZmFjZU1lbWJlcjpKKFkucHJvdG90eXBlLlhlKSxzdXJmYWNlTWVtYmVyczpKKFkucHJvdG90eXBlLlhlKX19O2wuZWY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7TGluZVN0cmluZzpKKFUucHJvdG90eXBlLmdjKSxDdXJ2ZTpKKFkucHJvdG90eXBlLkdlKX19O2wudGY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7UG9seWdvbjpKKFUucHJvdG90eXBlLmhjKSxTdXJmYWNlOkooWS5wcm90b3R5cGUuT2UpfX07bC51Zj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntwYXRjaGVzOksoWS5wcm90b3R5cGUuZGkpfX07bC5mZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntzZWdtZW50czpLKFkucHJvdG90eXBlLmZpKX19O2wuZ2Y9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7bG93ZXJDb3JuZXI6SihZLnByb3RvdHlwZS5qZCksdXBwZXJDb3JuZXI6SihZLnByb3RvdHlwZS5qZCl9fTtcbmwucGY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7UG9seWdvblBhdGNoOksoWS5wcm90b3R5cGUuZWkpfX07bC5zZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntMaW5lU3RyaW5nU2VnbWVudDpLKFkucHJvdG90eXBlLmFpKX19O2Z1bmN0aW9uIE9pKGEsYixjKXtjPWNbYy5sZW5ndGgtMV0uc3JzTmFtZTtiPWIuRCgpO2Zvcih2YXIgZD1iLmxlbmd0aCxlPUFycmF5KGQpLGYsZz0wO2c8ZDsrK2cpe2Y9YltnXTt2YXIgaD1nLGs9XCJlbnVcIjtjJiYoaz1IYihjKS5iKTtlW2hdPVwiZW5cIj09PWsuc3Vic3RyKDAsMik/ZlswXStcIiBcIitmWzFdOmZbMV0rXCIgXCIrZlswXX1XKGEsZS5qb2luKFwiIFwiKSl9XG5sLnJlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLnNyc05hbWU7ZCYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZCk7ZD1IaChhLm5hbWVzcGFjZVVSSSxcInBvc1wiKTthLmFwcGVuZENoaWxkKGQpO2M9Y1tjLmxlbmd0aC0xXS5zcnNOYW1lO2E9XCJlbnVcIjtjJiYoYT1IYihjKS5iKTtiPWIuRCgpO1coZCxcImVuXCI9PT1hLnN1YnN0cigwLDIpP2JbMF0rXCIgXCIrYlsxXTpiWzFdK1wiIFwiK2JbMF0pfTt2YXIgUGk9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7bG93ZXJDb3JuZXI6TShXKSx1cHBlckNvcm5lcjpNKFcpfX07bD1ZLnByb3RvdHlwZTtsLmpoPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLnNyc05hbWU7ZCYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZCk7Uih7bm9kZTphfSxQaSxQaCxbYlswXStcIiBcIitiWzFdLGJbMl0rXCIgXCIrYlszXV0sYyxbXCJsb3dlckNvcm5lclwiLFwidXBwZXJDb3JuZXJcIl0sdGhpcyl9O1xubC5vZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXS5zcnNOYW1lO2QmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGQpO2Q9SGgoYS5uYW1lc3BhY2VVUkksXCJwb3NMaXN0XCIpO2EuYXBwZW5kQ2hpbGQoZCk7T2koZCxiLGMpfTtsLmloPWZ1bmN0aW9uKGEsYil7dmFyIGM9YltiLmxlbmd0aC0xXSxkPWMubm9kZSxlPWMuZXh0ZXJpb3JXcml0dGVuO3ZvaWQgMD09PWUmJihjLmV4dGVyaW9yV3JpdHRlbj0hMCk7cmV0dXJuIEhoKGQubmFtZXNwYWNlVVJJLHZvaWQgMCE9PWU/XCJpbnRlcmlvclwiOlwiZXh0ZXJpb3JcIil9O1xubC5hYz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXS5zcnNOYW1lO1wiUG9seWdvblBhdGNoXCIhPT1hLm5vZGVOYW1lJiZkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtcIlBvbHlnb25cIj09PWEubm9kZU5hbWV8fFwiUG9seWdvblBhdGNoXCI9PT1hLm5vZGVOYW1lPyhiPVdlKGIpLFIoe25vZGU6YSxzcnNOYW1lOmR9LFFpLHRoaXMuaWgsYixjLHZvaWQgMCx0aGlzKSk6XCJTdXJmYWNlXCI9PT1hLm5vZGVOYW1lJiYoZD1IaChhLm5hbWVzcGFjZVVSSSxcInBhdGNoZXNcIiksYS5hcHBlbmRDaGlsZChkKSxhPUhoKGQubmFtZXNwYWNlVVJJLFwiUG9seWdvblBhdGNoXCIpLGQuYXBwZW5kQ2hpbGQoYSksdGhpcy5hYyhhLGIsYykpfTtcbmwuJGI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0uc3JzTmFtZTtcIkxpbmVTdHJpbmdTZWdtZW50XCIhPT1hLm5vZGVOYW1lJiZkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtcIkxpbmVTdHJpbmdcIj09PWEubm9kZU5hbWV8fFwiTGluZVN0cmluZ1NlZ21lbnRcIj09PWEubm9kZU5hbWU/KGQ9SGgoYS5uYW1lc3BhY2VVUkksXCJwb3NMaXN0XCIpLGEuYXBwZW5kQ2hpbGQoZCksT2koZCxiLGMpKTpcIkN1cnZlXCI9PT1hLm5vZGVOYW1lJiYoZD1IaChhLm5hbWVzcGFjZVVSSSxcInNlZ21lbnRzXCIpLGEuYXBwZW5kQ2hpbGQoZCksYT1IaChkLm5hbWVzcGFjZVVSSSxcIkxpbmVTdHJpbmdTZWdtZW50XCIpLGQuYXBwZW5kQ2hpbGQoYSksdGhpcy4kYihhLGIsYykpfTtcbmwucWU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLnNyc05hbWUsZD1kLnN1cmZhY2U7ZSYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZSk7Yj1qaShiKTtSKHtub2RlOmEsc3JzTmFtZTplLHN1cmZhY2U6ZH0sUmksdGhpcy5jLGIsYyx2b2lkIDAsdGhpcyl9O2wua2g9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0uc3JzTmFtZTtkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtiPWdpKGIpO1Ioe25vZGU6YSxzcnNOYW1lOmR9LFNpLE5oKFwicG9pbnRNZW1iZXJcIiksYixjLHZvaWQgMCx0aGlzKX07bC5wZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXSxlPWQuc3JzTmFtZSxkPWQuY3VydmU7ZSYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZSk7Yj1iLmhiKCk7Uih7bm9kZTphLHNyc05hbWU6ZSxjdXJ2ZTpkfSxUaSx0aGlzLmMsYixjLHZvaWQgMCx0aGlzKX07XG5sLnNlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1IaChhLm5hbWVzcGFjZVVSSSxcIkxpbmVhclJpbmdcIik7YS5hcHBlbmRDaGlsZChkKTt0aGlzLm9lKGQsYixjKX07bC50ZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5mKGIsYyk7ZCYmKGEuYXBwZW5kQ2hpbGQoZCksdGhpcy5hYyhkLGIsYykpfTtsLmxoPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1IaChhLm5hbWVzcGFjZVVSSSxcIlBvaW50XCIpO2EuYXBwZW5kQ2hpbGQoZCk7dGhpcy5yZShkLGIsYyl9O2wubmU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZihiLGMpO2QmJihhLmFwcGVuZENoaWxkKGQpLHRoaXMuJGIoZCxiLGMpKX07XG5sLm1lPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9YmIoe30sZCk7ZS5ub2RlPWE7dmFyIGY7QXJyYXkuaXNBcnJheShiKT9kLmRhdGFQcm9qZWN0aW9uP2Y9UGIoYixkLmZlYXR1cmVQcm9qZWN0aW9uLGQuZGF0YVByb2plY3Rpb24pOmY9YjpmPVhoKGIsITAsZCk7UihlLFVpLHRoaXMuZixbZl0sYyx2b2lkIDAsdGhpcyl9O1xudmFyIFJpPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e3N1cmZhY2VNZW1iZXI6TShZLnByb3RvdHlwZS50ZSkscG9seWdvbk1lbWJlcjpNKFkucHJvdG90eXBlLnRlKX19LFNpPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e3BvaW50TWVtYmVyOk0oWS5wcm90b3R5cGUubGgpfX0sVGk9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7bGluZVN0cmluZ01lbWJlcjpNKFkucHJvdG90eXBlLm5lKSxjdXJ2ZU1lbWJlcjpNKFkucHJvdG90eXBlLm5lKX19LFFpPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2V4dGVyaW9yOk0oWS5wcm90b3R5cGUuc2UpLGludGVyaW9yOk0oWS5wcm90b3R5cGUuc2UpfX0sVWk9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7Q3VydmU6TShZLnByb3RvdHlwZS4kYiksTXVsdGlDdXJ2ZTpNKFkucHJvdG90eXBlLnBlKSxQb2ludDpNKFkucHJvdG90eXBlLnJlKSxNdWx0aVBvaW50Ok0oWS5wcm90b3R5cGUua2gpLFxuTGluZVN0cmluZzpNKFkucHJvdG90eXBlLiRiKSxNdWx0aUxpbmVTdHJpbmc6TShZLnByb3RvdHlwZS5wZSksTGluZWFyUmluZzpNKFkucHJvdG90eXBlLm9lKSxQb2x5Z29uOk0oWS5wcm90b3R5cGUuYWMpLE11bHRpUG9seWdvbjpNKFkucHJvdG90eXBlLnFlKSxTdXJmYWNlOk0oWS5wcm90b3R5cGUuYWMpLE11bHRpU3VyZmFjZTpNKFkucHJvdG90eXBlLnFlKSxFbnZlbG9wZTpNKFkucHJvdG90eXBlLmpoKX19LFZpPXtNdWx0aUxpbmVTdHJpbmc6XCJsaW5lU3RyaW5nTWVtYmVyXCIsTXVsdGlDdXJ2ZTpcImN1cnZlTWVtYmVyXCIsTXVsdGlQb2x5Z29uOlwicG9seWdvbk1lbWJlclwiLE11bHRpU3VyZmFjZTpcInN1cmZhY2VNZW1iZXJcIn07WS5wcm90b3R5cGUuYz1mdW5jdGlvbihhLGIpe3JldHVybiBIaChcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCIsVmlbYltiLmxlbmd0aC0xXS5ub2RlLm5vZGVOYW1lXSl9O1xuWS5wcm90b3R5cGUuZj1mdW5jdGlvbihhLGIpe3ZhciBjPWJbYi5sZW5ndGgtMV0sZD1jLm11bHRpU3VyZmFjZSxlPWMuc3VyZmFjZSxmPWMuY3VydmUsYz1jLm11bHRpQ3VydmUsZztBcnJheS5pc0FycmF5KGEpP2c9XCJFbnZlbG9wZVwiOihnPWEuSCgpLFwiTXVsdGlQb2x5Z29uXCI9PT1nJiYhMD09PWQ/Zz1cIk11bHRpU3VyZmFjZVwiOlwiUG9seWdvblwiPT09ZyYmITA9PT1lP2c9XCJTdXJmYWNlXCI6XCJMaW5lU3RyaW5nXCI9PT1nJiYhMD09PWY/Zz1cIkN1cnZlXCI6XCJNdWx0aUxpbmVTdHJpbmdcIj09PWcmJiEwPT09YyYmKGc9XCJNdWx0aUN1cnZlXCIpKTtyZXR1cm4gSGgoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiLGcpfTtmdW5jdGlvbiBXaShhKXthPWE/YTp7fTtVLmNhbGwodGhpcyxhKTt0aGlzLmJbXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiXS5mZWF0dXJlTWVtYmVyPUooVS5wcm90b3R5cGUuR2IpO3RoaXMuc2NoZW1hTG9jYXRpb249YS5zY2hlbWFMb2NhdGlvbj9hLnNjaGVtYUxvY2F0aW9uOlwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvZ21sLzIuMS4yL2ZlYXR1cmUueHNkXCJ9dChXaSxVKTtsPVdpLnByb3RvdHlwZTtcbmwuSWU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1JaChhKS5yZXBsYWNlKC9eXFxzKnxcXHMqJC9nLFwiXCIpLGQ9YlswXS5zcnNOYW1lLGU9XCJlbnVcIjtkJiYoZD1IYihkKSkmJihlPWQuYik7Zm9yKHZhciBjPWMudHJpbSgpLnNwbGl0KC9cXHMrLyksZixnLGg9W10saz0wLG09Yy5sZW5ndGg7azxtO2srKylnPWNba10uc3BsaXQoLywrLyksZD1wYXJzZUZsb2F0KGdbMF0pLGY9cGFyc2VGbG9hdChnWzFdKSxnPTM9PT1nLmxlbmd0aD9wYXJzZUZsb2F0KGdbMl0pOjAsXCJlblwiPT09ZS5zdWJzdHIoMCwyKT9oLnB1c2goZCxmLGcpOmgucHVzaChmLGQsZyk7cmV0dXJuIGh9O2wuVmg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKFtudWxsXSx0aGlzLmRmLGEsYix0aGlzKTtyZXR1cm4gUmEoY1sxXVswXSxjWzFdWzFdLGNbMV1bM10sY1sxXVs0XSl9O2wuemc9ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKHZvaWQgMCx0aGlzLkpiLGEsYix0aGlzKTtjJiZiW2IubGVuZ3RoLTFdLnB1c2goYyl9O1xubC5HaD1mdW5jdGlvbihhLGIpe3ZhciBjPVAodm9pZCAwLHRoaXMuSmIsYSxiLHRoaXMpO2MmJihiW2IubGVuZ3RoLTFdWzBdPWMpfTtsLkliPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2Nvb3JkaW5hdGVzOksoV2kucHJvdG90eXBlLkllKX19O2wuc2M9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7aW5uZXJCb3VuZGFyeUlzOldpLnByb3RvdHlwZS56ZyxvdXRlckJvdW5kYXJ5SXM6V2kucHJvdG90eXBlLkdofX07bC5kZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntjb29yZGluYXRlczpKKFdpLnByb3RvdHlwZS5JZSl9fTtcbmwueWQ9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7UG9pbnQ6SyhVLnByb3RvdHlwZS5OZSksTXVsdGlQb2ludDpLKFUucHJvdG90eXBlLkxlKSxMaW5lU3RyaW5nOksoVS5wcm90b3R5cGUuZ2MpLE11bHRpTGluZVN0cmluZzpLKFUucHJvdG90eXBlLktlKSxMaW5lYXJSaW5nOksoVS5wcm90b3R5cGUuSmUpLFBvbHlnb246SyhVLnByb3RvdHlwZS5oYyksTXVsdGlQb2x5Z29uOksoVS5wcm90b3R5cGUuTWUpLEJveDpLKFdpLnByb3RvdHlwZS5WaCl9fTtcbmwuWWM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iW2IubGVuZ3RoLTFdLGQ9Yy5tdWx0aVN1cmZhY2UsZT1jLnN1cmZhY2UsYz1jLm11bHRpQ3VydmUsZjtBcnJheS5pc0FycmF5KGEpP2Y9XCJFbnZlbG9wZVwiOihmPWEuSCgpLFwiTXVsdGlQb2x5Z29uXCI9PT1mJiYhMD09PWQ/Zj1cIk11bHRpU3VyZmFjZVwiOlwiUG9seWdvblwiPT09ZiYmITA9PT1lP2Y9XCJTdXJmYWNlXCI6XCJNdWx0aUxpbmVTdHJpbmdcIj09PWYmJiEwPT09YyYmKGY9XCJNdWx0aUN1cnZlXCIpKTtyZXR1cm4gSGgoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiLGYpfTtsLmVlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9YmIoe30sZCk7ZS5ub2RlPWE7dmFyIGY7QXJyYXkuaXNBcnJheShiKT9kLmRhdGFQcm9qZWN0aW9uP2Y9UGIoYixkLmZlYXR1cmVQcm9qZWN0aW9uLGQuZGF0YVByb2plY3Rpb24pOmY9YjpmPVhoKGIsITAsZCk7UihlLFhpLHRoaXMuWWMsW2ZdLGMsdm9pZCAwLHRoaXMpfTtcbmwuWWI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0uc3JzTmFtZTtcIkxpbmVTdHJpbmdTZWdtZW50XCIhPT1hLm5vZGVOYW1lJiZkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtcIkxpbmVTdHJpbmdcIj09PWEubm9kZU5hbWV8fFwiTGluZVN0cmluZ1NlZ21lbnRcIj09PWEubm9kZU5hbWU/KGQ9WWkoYS5uYW1lc3BhY2VVUkkpLGEuYXBwZW5kQ2hpbGQoZCksWmkoZCxiLGMpKTpcIkN1cnZlXCI9PT1hLm5vZGVOYW1lJiYoZD1IaChhLm5hbWVzcGFjZVVSSSxcInNlZ21lbnRzXCIpLGEuYXBwZW5kQ2hpbGQoZCksYT1IaChkLm5hbWVzcGFjZVVSSSxcIkxpbmVTdHJpbmdTZWdtZW50XCIpLGQuYXBwZW5kQ2hpbGQoYSksdGhpcy5ZYihhLGIsYykpfTtmdW5jdGlvbiBZaShhKXthPUhoKGEsXCJjb29yZGluYXRlc1wiKTthLnNldEF0dHJpYnV0ZShcImRlY2ltYWxcIixcIi5cIik7YS5zZXRBdHRyaWJ1dGUoXCJjc1wiLFwiLFwiKTthLnNldEF0dHJpYnV0ZShcInRzXCIsXCIgXCIpO3JldHVybiBhfVxuZnVuY3Rpb24gWmkoYSxiLGMpe2M9Y1tjLmxlbmd0aC0xXS5zcnNOYW1lO2I9Yi5EKCk7Zm9yKHZhciBkPWIubGVuZ3RoLGU9QXJyYXkoZCksZixnPTA7ZzxkOysrZylmPWJbZ10sZVtnXT0kaShmLGMpO1coYSxlLmpvaW4oXCIgXCIpKX1sLlpiPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLnNyc05hbWU7XCJQb2x5Z29uUGF0Y2hcIiE9PWEubm9kZU5hbWUmJmQmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGQpO1wiUG9seWdvblwiPT09YS5ub2RlTmFtZXx8XCJQb2x5Z29uUGF0Y2hcIj09PWEubm9kZU5hbWU/KGI9V2UoYiksUih7bm9kZTphLHNyc05hbWU6ZH0sYWosdGhpcy5laCxiLGMsdm9pZCAwLHRoaXMpKTpcIlN1cmZhY2VcIj09PWEubm9kZU5hbWUmJihkPUhoKGEubmFtZXNwYWNlVVJJLFwicGF0Y2hlc1wiKSxhLmFwcGVuZENoaWxkKGQpLGE9SGgoZC5uYW1lc3BhY2VVUkksXCJQb2x5Z29uUGF0Y2hcIiksZC5hcHBlbmRDaGlsZChhKSx0aGlzLlpiKGEsYixjKSl9O1xubC5laD1mdW5jdGlvbihhLGIpe3ZhciBjPWJbYi5sZW5ndGgtMV0sZD1jLm5vZGUsZT1jLmV4dGVyaW9yV3JpdHRlbjt2b2lkIDA9PT1lJiYoYy5leHRlcmlvcldyaXR0ZW49ITApO3JldHVybiBIaChkLm5hbWVzcGFjZVVSSSx2b2lkIDAhPT1lP1wiaW5uZXJCb3VuZGFyeUlzXCI6XCJvdXRlckJvdW5kYXJ5SXNcIil9O2wua2U9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPUhoKGEubmFtZXNwYWNlVVJJLFwiTGluZWFyUmluZ1wiKTthLmFwcGVuZENoaWxkKGQpO3RoaXMuZ2UoZCxiLGMpfTtmdW5jdGlvbiAkaShhLGIpe3ZhciBjPVwiZW51XCI7YiYmKGM9SGIoYikuYik7cmV0dXJuXCJlblwiPT09Yy5zdWJzdHIoMCwyKT9hWzBdK1wiLFwiK2FbMV06YVsxXStcIixcIithWzBdfVxubC5oZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXSxlPWQuc3JzTmFtZSxkPWQuY3VydmU7ZSYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZSk7Yj1iLmhiKCk7Uih7bm9kZTphLHNyc05hbWU6ZSxjdXJ2ZTpkfSxiaix0aGlzLmYsYixjLHZvaWQgMCx0aGlzKX07bC5qZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXS5zcnNOYW1lO2QmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGQpO2M9WWkoYS5uYW1lc3BhY2VVUkkpO2EuYXBwZW5kQ2hpbGQoYyk7YT1iLkQoKTthPSRpKGEsZCk7VyhjLGEpfTtsLmdoPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLnNyc05hbWU7ZCYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZCk7Yj1naShiKTtSKHtub2RlOmEsc3JzTmFtZTpkfSxjaixOaChcInBvaW50TWVtYmVyXCIpLGIsYyx2b2lkIDAsdGhpcyl9O1xubC5oaD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9SGgoYS5uYW1lc3BhY2VVUkksXCJQb2ludFwiKTthLmFwcGVuZENoaWxkKGQpO3RoaXMuamUoZCxiLGMpfTtsLmZlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLlljKGIsYyk7ZCYmKGEuYXBwZW5kQ2hpbGQoZCksdGhpcy5ZYihkLGIsYykpfTtsLmdlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLnNyc05hbWU7ZCYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZCk7ZD1ZaShhLm5hbWVzcGFjZVVSSSk7YS5hcHBlbmRDaGlsZChkKTtaaShkLGIsYyl9O2wuaWU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLnNyc05hbWUsZD1kLnN1cmZhY2U7ZSYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZSk7Yj1qaShiKTtSKHtub2RlOmEsc3JzTmFtZTplLHN1cmZhY2U6ZH0sZGosdGhpcy5mLGIsYyx2b2lkIDAsdGhpcyl9O1xubC5sZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5ZYyhiLGMpO2QmJihhLmFwcGVuZENoaWxkKGQpLHRoaXMuWmIoZCxiLGMpKX07bC5maD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXS5zcnNOYW1lO2QmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGQpO1Ioe25vZGU6YX0sZWosUGgsW2JbMF0rXCIgXCIrYlsxXSxiWzJdK1wiIFwiK2JbM11dLGMsW1wibG93ZXJDb3JuZXJcIixcInVwcGVyQ29ybmVyXCJdLHRoaXMpfTtcbnZhciBYaT17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntDdXJ2ZTpNKFdpLnByb3RvdHlwZS5ZYiksTXVsdGlDdXJ2ZTpNKFdpLnByb3RvdHlwZS5oZSksUG9pbnQ6TShXaS5wcm90b3R5cGUuamUpLE11bHRpUG9pbnQ6TShXaS5wcm90b3R5cGUuZ2gpLExpbmVTdHJpbmc6TShXaS5wcm90b3R5cGUuWWIpLE11bHRpTGluZVN0cmluZzpNKFdpLnByb3RvdHlwZS5oZSksTGluZWFyUmluZzpNKFdpLnByb3RvdHlwZS5nZSksUG9seWdvbjpNKFdpLnByb3RvdHlwZS5aYiksTXVsdGlQb2x5Z29uOk0oV2kucHJvdG90eXBlLmllKSxTdXJmYWNlOk0oV2kucHJvdG90eXBlLlpiKSxNdWx0aVN1cmZhY2U6TShXaS5wcm90b3R5cGUuaWUpLEVudmVsb3BlOk0oV2kucHJvdG90eXBlLmZoKX19LGFqPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e291dGVyQm91bmRhcnlJczpNKFdpLnByb3RvdHlwZS5rZSksaW5uZXJCb3VuZGFyeUlzOk0oV2kucHJvdG90eXBlLmtlKX19LGNqPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e3BvaW50TWVtYmVyOk0oV2kucHJvdG90eXBlLmhoKX19LFxuYmo9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7bGluZVN0cmluZ01lbWJlcjpNKFdpLnByb3RvdHlwZS5mZSksY3VydmVNZW1iZXI6TShXaS5wcm90b3R5cGUuZmUpfX07V2kucHJvdG90eXBlLmY9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSGgoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiLGZqW2JbYi5sZW5ndGgtMV0ubm9kZS5ub2RlTmFtZV0pfTt2YXIgZmo9e011bHRpTGluZVN0cmluZzpcImxpbmVTdHJpbmdNZW1iZXJcIixNdWx0aUN1cnZlOlwiY3VydmVNZW1iZXJcIixNdWx0aVBvbHlnb246XCJwb2x5Z29uTWVtYmVyXCIsTXVsdGlTdXJmYWNlOlwic3VyZmFjZU1lbWJlclwifSxkaj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntzdXJmYWNlTWVtYmVyOk0oV2kucHJvdG90eXBlLmxlKSxwb2x5Z29uTWVtYmVyOk0oV2kucHJvdG90eXBlLmxlKX19LGVqPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2xvd2VyQ29ybmVyOk0oVyksdXBwZXJDb3JuZXI6TShXKX19O3ZhciBnaj1bbnVsbCxcImh0dHA6Ly93d3cudG9wb2dyYWZpeC5jb20vR1BYLzEvMFwiLFwiaHR0cDovL3d3dy50b3BvZ3JhZml4LmNvbS9HUFgvMS8xXCJdO2Z1bmN0aW9uIGhqKGEsYixjLGQpe2EucHVzaChwYXJzZUZsb2F0KGMuZ2V0QXR0cmlidXRlKFwibG9uXCIpKSxwYXJzZUZsb2F0KGMuZ2V0QXR0cmlidXRlKFwibGF0XCIpKSk7XCJlbGVcImluIGQ/KGEucHVzaChkLmVsZSksZGVsZXRlIGQuZWxlLGIuaGFzWj0hMCk6YS5wdXNoKDApO1widGltZVwiaW4gZD8oYS5wdXNoKGQudGltZSksZGVsZXRlIGQudGltZSxiLmhhc009ITApOmEucHVzaCgwKTtyZXR1cm4gYX1cbmZ1bmN0aW9uIGlqKGEsYixjKXt2YXIgZD1cIlhZXCIsZT0yO2EuaGFzWiYmYS5oYXNNPyhkPVwiWFlaTVwiLGU9NCk6YS5oYXNaPyhkPVwiWFlaXCIsZT0zKTphLmhhc00mJihkPVwiWFlNXCIsZT0zKTtpZig0IT09ZSl7dmFyIGYsZztmPTA7Zm9yKGc9Yi5sZW5ndGgvNDtmPGc7ZisrKWJbZiplXT1iWzQqZl0sYltmKmUrMV09Yls0KmYrMV0sYS5oYXNaJiYoYltmKmUrMl09Yls0KmYrMl0pLGEuaGFzTSYmKGJbZiplKzJdPWJbNCpmKzNdKTtiLmxlbmd0aD1iLmxlbmd0aC80KmU7aWYoYylmb3IoZj0wLGc9Yy5sZW5ndGg7ZjxnO2YrKyljW2ZdPWNbZl0vNCplfXJldHVybiBkfWZ1bmN0aW9uIGpqKGEsYil7dmFyIGM9YltiLmxlbmd0aC0xXSxkPWEuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtudWxsIT09ZCYmKGMubGluaz1kKTtSaChraixhLGIpfWZ1bmN0aW9uIGxqKGEsYil7YltiLmxlbmd0aC0xXS5leHRlbnNpb25zTm9kZV89YX1cbk8oZ2ose3J0ZTpKKGZ1bmN0aW9uKGEsYil7dmFyIGM9YlswXSxkPVAoe2ZsYXRDb29yZGluYXRlczpbXSxsYXlvdXRPcHRpb25zOnt9fSxtaixhLGIpO2lmKGQpe3ZhciBlPWQuZmxhdENvb3JkaW5hdGVzO2RlbGV0ZSBkLmZsYXRDb29yZGluYXRlczt2YXIgZj1kLmxheW91dE9wdGlvbnM7ZGVsZXRlIGQubGF5b3V0T3B0aW9uczt2YXIgZj1paihmLGUpLGc9bmV3IFMobnVsbCk7YmkoZyxmLGUpO1hoKGcsITEsYyk7Yz1uZXcgSShnKTtjLm9hKGQpO3JldHVybiBjfX0pLHRyazpKKGZ1bmN0aW9uKGEsYil7dmFyIGM9YlswXSxkPVAoe2ZsYXRDb29yZGluYXRlczpbXSxlbmRzOltdLGxheW91dE9wdGlvbnM6e319LG5qLGEsYik7aWYoZCl7dmFyIGU9ZC5mbGF0Q29vcmRpbmF0ZXM7ZGVsZXRlIGQuZmxhdENvb3JkaW5hdGVzO3ZhciBmPWQuZW5kcztkZWxldGUgZC5lbmRzO3ZhciBnPWQubGF5b3V0T3B0aW9ucztkZWxldGUgZC5sYXlvdXRPcHRpb25zO3ZhciBnPWlqKGcsZSxmKSxoPVxubmV3IGNpKG51bGwpO2RpKGgsZyxlLGYpO1hoKGgsITEsYyk7Yz1uZXcgSShoKTtjLm9hKGQpO3JldHVybiBjfX0pLHdwdDpKKGZ1bmN0aW9uKGEsYil7dmFyIGM9YlswXSxkPVAoe30sb2osYSxiKTtpZihkKXt2YXIgZT17fSxmPWhqKFtdLGUsYSxkKSxlPWlqKGUsZiksZj1uZXcgTWUoZixlKTtYaChmLCExLGMpO2M9bmV3IEkoZik7Yy5vYShkKTtyZXR1cm4gY319KX0pO1xudmFyIGtqPU8oZ2ose3RleHQ6TChWLFwibGlua1RleHRcIiksdHlwZTpMKFYsXCJsaW5rVHlwZVwiKX0pLG1qPU8oZ2ose25hbWU6TChWKSxjbXQ6TChWKSxkZXNjOkwoViksc3JjOkwoViksbGluazpqaixudW1iZXI6TChKaSksZXh0ZW5zaW9uczpsaix0eXBlOkwoVikscnRlcHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKHt9LHBqLGEsYik7aWYoYyl7dmFyIGQ9YltiLmxlbmd0aC0xXTtoaihkLmZsYXRDb29yZGluYXRlcyxkLmxheW91dE9wdGlvbnMsYSxjKX19fSkscGo9Tyhnaix7ZWxlOkwoSGkpLHRpbWU6TChHaSl9KSxuaj1PKGdqLHtuYW1lOkwoViksY210OkwoViksZGVzYzpMKFYpLHNyYzpMKFYpLGxpbms6amosbnVtYmVyOkwoSmkpLHR5cGU6TChWKSxleHRlbnNpb25zOmxqLHRya3NlZzpmdW5jdGlvbihhLGIpe3ZhciBjPWJbYi5sZW5ndGgtMV07UmgocWosYSxiKTtjLmVuZHMucHVzaChjLmZsYXRDb29yZGluYXRlcy5sZW5ndGgpfX0pLHFqPU8oZ2ose3Rya3B0OmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz1QKHt9LHJqLGEsYik7aWYoYyl7dmFyIGQ9YltiLmxlbmd0aC0xXTtoaihkLmZsYXRDb29yZGluYXRlcyxkLmxheW91dE9wdGlvbnMsYSxjKX19fSkscmo9Tyhnaix7ZWxlOkwoSGkpLHRpbWU6TChHaSl9KSxvaj1PKGdqLHtlbGU6TChIaSksdGltZTpMKEdpKSxtYWd2YXI6TChIaSksZ2VvaWRoZWlnaHQ6TChIaSksbmFtZTpMKFYpLGNtdDpMKFYpLGRlc2M6TChWKSxzcmM6TChWKSxsaW5rOmpqLHN5bTpMKFYpLHR5cGU6TChWKSxmaXg6TChWKSxzYXQ6TChKaSksaGRvcDpMKEhpKSx2ZG9wOkwoSGkpLHBkb3A6TChIaSksYWdlb2ZkZ3BzZGF0YTpMKEhpKSxkZ3BzaWQ6TChKaSksZXh0ZW5zaW9uczpsan0pO2Z1bmN0aW9uIHNqKGEsYixjKXthLnNldEF0dHJpYnV0ZShcImhyZWZcIixiKTtiPWNbYy5sZW5ndGgtMV0ucHJvcGVydGllcztSKHtub2RlOmF9LHRqLFBoLFtiLmxpbmtUZXh0LGIubGlua1R5cGVdLGMsdWopfVxuZnVuY3Rpb24gdmooYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLm5vZGUubmFtZXNwYWNlVVJJLGY9ZC5wcm9wZXJ0aWVzO2Euc2V0QXR0cmlidXRlTlMobnVsbCxcImxhdFwiLGJbMV0pO2Euc2V0QXR0cmlidXRlTlMobnVsbCxcImxvblwiLGJbMF0pO3N3aXRjaChkLmdlb21ldHJ5TGF5b3V0KXtjYXNlIFwiWFlaTVwiOmJbM10mJihmLnRpbWU9YlszXSk7Y2FzZSBcIlhZWlwiOmJbMl0mJihmLmVsZT1iWzJdKTticmVhaztjYXNlIFwiWFlNXCI6YlsyXSYmKGYudGltZT1iWzJdKX1iPVwicnRlcHRcIj09YS5ub2RlTmFtZT93altlXTp4altlXTtkPVFoKGYsYik7Uih7bm9kZTphLHByb3BlcnRpZXM6Zn0seWosUGgsZCxjLGIpfVxudmFyIHVqPVtcInRleHRcIixcInR5cGVcIl0sdGo9Tyhnaix7dGV4dDpNKFcpLHR5cGU6TShXKX0pLHpqPU8oZ2osXCJuYW1lIGNtdCBkZXNjIHNyYyBsaW5rIG51bWJlciB0eXBlIHJ0ZXB0XCIuc3BsaXQoXCIgXCIpKSxBaj1PKGdqLHtuYW1lOk0oVyksY210Ok0oVyksZGVzYzpNKFcpLHNyYzpNKFcpLGxpbms6TShzaiksbnVtYmVyOk0oTmkpLHR5cGU6TShXKSxydGVwdDpNaChNKHZqKSl9KSx3aj1PKGdqLFtcImVsZVwiLFwidGltZVwiXSksQmo9TyhnaixcIm5hbWUgY210IGRlc2Mgc3JjIGxpbmsgbnVtYmVyIHR5cGUgdHJrc2VnXCIuc3BsaXQoXCIgXCIpKSxFaj1PKGdqLHtuYW1lOk0oVyksY210Ok0oVyksZGVzYzpNKFcpLHNyYzpNKFcpLGxpbms6TShzaiksbnVtYmVyOk0oTmkpLHR5cGU6TShXKSx0cmtzZWc6TWgoTShmdW5jdGlvbihhLGIsYyl7Uih7bm9kZTphLGdlb21ldHJ5TGF5b3V0OmIuWCxwcm9wZXJ0aWVzOnt9fSxDaixEaixiLkQoKSxjKX0pKX0pLERqPU5oKFwidHJrcHRcIiksQ2o9Tyhnaix7dHJrcHQ6TSh2ail9KSxcbnhqPU8oZ2osXCJlbGUgdGltZSBtYWd2YXIgZ2VvaWRoZWlnaHQgbmFtZSBjbXQgZGVzYyBzcmMgbGluayBzeW0gdHlwZSBmaXggc2F0IGhkb3AgdmRvcCBwZG9wIGFnZW9mZGdwc2RhdGEgZGdwc2lkXCIuc3BsaXQoXCIgXCIpKSx5aj1PKGdqLHtlbGU6TShNaSksdGltZTpNKGZ1bmN0aW9uKGEsYil7dmFyIGM9bmV3IERhdGUoMUUzKmIpO2EuYXBwZW5kQ2hpbGQoR2guY3JlYXRlVGV4dE5vZGUoYy5nZXRVVENGdWxsWWVhcigpK1wiLVwiK2dlKGMuZ2V0VVRDTW9udGgoKSsxKStcIi1cIitnZShjLmdldFVUQ0RhdGUoKSkrXCJUXCIrZ2UoYy5nZXRVVENIb3VycygpKStcIjpcIitnZShjLmdldFVUQ01pbnV0ZXMoKSkrXCI6XCIrZ2UoYy5nZXRVVENTZWNvbmRzKCkpK1wiWlwiKSl9KSxtYWd2YXI6TShNaSksZ2VvaWRoZWlnaHQ6TShNaSksbmFtZTpNKFcpLGNtdDpNKFcpLGRlc2M6TShXKSxzcmM6TShXKSxsaW5rOk0oc2opLHN5bTpNKFcpLHR5cGU6TShXKSxmaXg6TShXKSxzYXQ6TShOaSksaGRvcDpNKE1pKSxcbnZkb3A6TShNaSkscGRvcDpNKE1pKSxhZ2VvZmRncHNkYXRhOk0oTWkpLGRncHNpZDpNKE5pKX0pO1xuTyhnaix7cnRlOk0oZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbMF0sZT1iLkZhKCk7YT17bm9kZTphLHByb3BlcnRpZXM6ZX07aWYoYj1iLlIoKSliPVhoKGIsITAsZCksYS5nZW9tZXRyeUxheW91dD1iLlgsZS5ydGVwdD1iLkQoKTtkPXpqW2NbYy5sZW5ndGgtMV0ubm9kZS5uYW1lc3BhY2VVUkldO2U9UWgoZSxkKTtSKGEsQWosUGgsZSxjLGQpfSksdHJrOk0oZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbMF0sZT1iLkZhKCk7YT17bm9kZTphLHByb3BlcnRpZXM6ZX07aWYoYj1iLlIoKSliPVhoKGIsITAsZCksZS50cmtzZWc9Yi5oYigpO2Q9QmpbY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07ZT1RaChlLGQpO1IoYSxFaixQaCxlLGMsZCl9KSx3cHQ6TShmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1swXSxlPWNbYy5sZW5ndGgtMV07ZS5wcm9wZXJ0aWVzPWIuRmEoKTtpZihiPWIuUigpKWI9WGgoYiwhMCxkKSxlLmdlb21ldHJ5TGF5b3V0PWIuWCx2aihhLGIuRCgpLGMpfSl9KTtmdW5jdGlvbiBGaigpe1VoLmNhbGwodGhpcyl9dChGaixVaCk7bD1Gai5wcm90b3R5cGU7bC5IPWZ1bmN0aW9uKCl7cmV0dXJuXCJ0ZXh0XCJ9O2wuZWM9ZnVuY3Rpb24oYSxiKXt2YXIgYztjPVdoKHRoaXMsYik7aWYoYz1HaihcInN0cmluZ1wiPT09dHlwZW9mIGE/YTpcIlwiLGMpKXt2YXIgZD1uZXcgSTtkLnhhKGMpO2M9ZH1lbHNlIGM9bnVsbDtyZXR1cm4gY307bC5SYT1mdW5jdGlvbihhLGIpe3ZhciBjPVdoKHRoaXMsYiksZD1bXSxjPUdqKFwic3RyaW5nXCI9PT10eXBlb2YgYT9hOlwiXCIsYyk7dGhpcy5iJiZcIkdlb21ldHJ5Q29sbGVjdGlvblwiPT1jLkgoKT9kPWMuYTpkPVtjXTtmb3IodmFyIGU9W10sZj0wLGc9ZC5sZW5ndGg7ZjxnOysrZiljPW5ldyBJLGMueGEoZFtmXSksZS5wdXNoKGMpO3JldHVybiBlfTtsLmljPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVmYXVsdERhdGFQcm9qZWN0aW9ufTtcbmwudWQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1XaCh0aGlzLGIpLGQ9YS5SKCk7cmV0dXJuIGQ/SGooWGgoZCwhMCxjKSk6XCJcIn07ZnVuY3Rpb24gSWooYSxiLGMsZCxlLGYpe3NjLmNhbGwodGhpcyk7dGhpcy5pPW51bGw7dGhpcy5OPWE/YTpuZXcgSW1hZ2U7bnVsbCE9PWQmJih0aGlzLk4uY3Jvc3NPcmlnaW49ZCk7dGhpcy5hPWY/ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkNBTlZBU1wiKTpudWxsO3RoaXMuZz1mO3RoaXMuYz1udWxsO3RoaXMuZj1lO3RoaXMuYj1jO3RoaXMudT1iO3RoaXMuaj0hMTsyPT10aGlzLmYmJkpqKHRoaXMpfXQoSWosc2MpO2Z1bmN0aW9uIEpqKGEpe3ZhciBiPU9jKDEsMSk7dHJ5e2IuZHJhd0ltYWdlKGEuTiwwLDApLGIuZ2V0SW1hZ2VEYXRhKDAsMCwxLDEpfWNhdGNoKGMpe2Euaj0hMH19SWoucHJvdG90eXBlLm89ZnVuY3Rpb24oKXt0aGlzLmY9Mzt0aGlzLmMuZm9yRWFjaChpYyk7dGhpcy5jPW51bGw7QSh0aGlzLFwiY2hhbmdlXCIpfTtcbklqLnByb3RvdHlwZS5LPWZ1bmN0aW9uKCl7dGhpcy5mPTI7dGhpcy5iJiYodGhpcy5OLndpZHRoPXRoaXMuYlswXSx0aGlzLk4uaGVpZ2h0PXRoaXMuYlsxXSk7dGhpcy5iPVt0aGlzLk4ud2lkdGgsdGhpcy5OLmhlaWdodF07dGhpcy5jLmZvckVhY2goaWMpO3RoaXMuYz1udWxsO0pqKHRoaXMpO2lmKCF0aGlzLmomJm51bGwhPT10aGlzLmcpe3RoaXMuYS53aWR0aD10aGlzLk4ud2lkdGg7dGhpcy5hLmhlaWdodD10aGlzLk4uaGVpZ2h0O3ZhciBhPXRoaXMuYS5nZXRDb250ZXh0KFwiMmRcIik7YS5kcmF3SW1hZ2UodGhpcy5OLDAsMCk7Zm9yKHZhciBiPWEuZ2V0SW1hZ2VEYXRhKDAsMCx0aGlzLk4ud2lkdGgsdGhpcy5OLmhlaWdodCksYz1iLmRhdGEsZD10aGlzLmdbMF0vMjU1LGU9dGhpcy5nWzFdLzI1NSxmPXRoaXMuZ1syXS8yNTUsZz0wLGg9Yy5sZW5ndGg7ZzxoO2crPTQpY1tnXSo9ZCxjW2crMV0qPWUsY1tnKzJdKj1mO2EucHV0SW1hZ2VEYXRhKGIsMCwwKX1BKHRoaXMsXCJjaGFuZ2VcIil9O1xuSWoucHJvdG90eXBlLmlhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYT90aGlzLmE6dGhpcy5OfTtJai5wcm90b3R5cGUubG9hZD1mdW5jdGlvbigpe2lmKDA9PXRoaXMuZil7dGhpcy5mPTE7dGhpcy5jPVt5KHRoaXMuTixcImVycm9yXCIsdGhpcy5vLHRoaXMsITApLHkodGhpcy5OLFwibG9hZFwiLHRoaXMuSyx0aGlzLCEwKV07dHJ5e3RoaXMuTi5zcmM9dGhpcy51fWNhdGNoKGEpe3RoaXMubygpfX19O2Z1bmN0aW9uIEtqKGEpe2E9YXx8e307dGhpcy5jPXZvaWQgMCE9PWEuYW5jaG9yP2EuYW5jaG9yOlsuNSwuNV07dGhpcy5qPW51bGw7dGhpcy5mPXZvaWQgMCE9PWEuYW5jaG9yT3JpZ2luP2EuYW5jaG9yT3JpZ2luOlwidG9wLWxlZnRcIjt0aGlzLkM9dm9pZCAwIT09YS5hbmNob3JYVW5pdHM/YS5hbmNob3JYVW5pdHM6XCJmcmFjdGlvblwiO3RoaXMuYWE9dm9pZCAwIT09YS5hbmNob3JZVW5pdHM/YS5hbmNob3JZVW5pdHM6XCJmcmFjdGlvblwiO3RoaXMuZmE9dm9pZCAwIT09YS5jcm9zc09yaWdpbj9hLmNyb3NzT3JpZ2luOm51bGw7dmFyIGI9dm9pZCAwIT09YS5pbWc/YS5pbWc6bnVsbCxjPXZvaWQgMCE9PWEuaW1nU2l6ZT9hLmltZ1NpemU6bnVsbCxkPWEuc3JjO3goISh2b2lkIDAhPT1kJiZiKSw0KTt4KCFifHxiJiZjLDUpO3ZvaWQgMCE9PWQmJmQubGVuZ3RofHwhYnx8KGQ9Yi5zcmN8fHcoYikudG9TdHJpbmcoKSk7eCh2b2lkIDAhPT1kJiYwPGQubGVuZ3RoLDYpO3ZhciBlPXZvaWQgMCE9PVxuYS5zcmM/MDoyLGY7dm9pZCAwIT09YS5jb2xvcj8oZj1hLmNvbG9yLGY9QXJyYXkuaXNBcnJheShmKT9mOkxjKGYpKTpmPW51bGw7dGhpcy51PWY7Zj10aGlzLmZhO3ZhciBnPXRoaXMudSxoPXBnLmdldChkLGYsZyk7aHx8KGg9bmV3IElqKGIsZCxjLGYsZSxnKSxwZy5zZXQoZCxmLGcsaCkpO3RoaXMuYj1oO3RoaXMuZ2E9dm9pZCAwIT09YS5vZmZzZXQ/YS5vZmZzZXQ6WzAsMF07dGhpcy5hPXZvaWQgMCE9PWEub2Zmc2V0T3JpZ2luP2Eub2Zmc2V0T3JpZ2luOlwidG9wLWxlZnRcIjt0aGlzLkI9bnVsbDt0aGlzLnY9dm9pZCAwIT09YS5zaXplP2Euc2l6ZTpudWxsO3VoLmNhbGwodGhpcyx7b3BhY2l0eTp2b2lkIDAhPT1hLm9wYWNpdHk/YS5vcGFjaXR5OjEscm90YXRpb246dm9pZCAwIT09YS5yb3RhdGlvbj9hLnJvdGF0aW9uOjAsc2NhbGU6dm9pZCAwIT09YS5zY2FsZT9hLnNjYWxlOjEsc25hcFRvUGl4ZWw6dm9pZCAwIT09YS5zbmFwVG9QaXhlbD9hLnNuYXBUb1BpeGVsOiEwLHJvdGF0ZVdpdGhWaWV3OnZvaWQgMCE9PVxuYS5yb3RhdGVXaXRoVmlldz9hLnJvdGF0ZVdpdGhWaWV3OiExfSl9dChLaix1aCk7bD1Lai5wcm90b3R5cGU7XG5sLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pYSgxKSxiO2lmKDI9PT10aGlzLmIuZilpZihcIklNR1wiPT09YS50YWdOYW1lLnRvVXBwZXJDYXNlKCkpYj1hLmNsb25lTm9kZSghMCk7ZWxzZXtiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7dmFyIGM9Yi5nZXRDb250ZXh0KFwiMmRcIik7Yi53aWR0aD1hLndpZHRoO2IuaGVpZ2h0PWEuaGVpZ2h0O2MuZHJhd0ltYWdlKGEsMCwwKX1yZXR1cm4gbmV3IEtqKHthbmNob3I6dGhpcy5jLnNsaWNlKCksYW5jaG9yT3JpZ2luOnRoaXMuZixhbmNob3JYVW5pdHM6dGhpcy5DLGFuY2hvcllVbml0czp0aGlzLmFhLGNyb3NzT3JpZ2luOnRoaXMuZmEsY29sb3I6dGhpcy51JiZ0aGlzLnUuc2xpY2U/dGhpcy51LnNsaWNlKCk6dGhpcy51fHx2b2lkIDAsaW1nOmI/Yjp2b2lkIDAsaW1nU2l6ZTpiP3RoaXMuYi5iLnNsaWNlKCk6dm9pZCAwLHNyYzpiP3ZvaWQgMDp0aGlzLmIudSxvZmZzZXQ6dGhpcy5nYS5zbGljZSgpLG9mZnNldE9yaWdpbjp0aGlzLmEsXG5zaXplOm51bGwhPT10aGlzLnY/dGhpcy52LnNsaWNlKCk6dm9pZCAwLG9wYWNpdHk6dGhpcy5pLHNjYWxlOnRoaXMuZyxzbmFwVG9QaXhlbDp0aGlzLksscm90YXRpb246dGhpcy5vLHJvdGF0ZVdpdGhWaWV3OnRoaXMuc30pfTtcbmwuU2I9ZnVuY3Rpb24oKXtpZih0aGlzLmopcmV0dXJuIHRoaXMuajt2YXIgYT10aGlzLmMsYj10aGlzLm5iKCk7aWYoXCJmcmFjdGlvblwiPT10aGlzLkN8fFwiZnJhY3Rpb25cIj09dGhpcy5hYSl7aWYoIWIpcmV0dXJuIG51bGw7YT10aGlzLmMuc2xpY2UoKTtcImZyYWN0aW9uXCI9PXRoaXMuQyYmKGFbMF0qPWJbMF0pO1wiZnJhY3Rpb25cIj09dGhpcy5hYSYmKGFbMV0qPWJbMV0pfWlmKFwidG9wLWxlZnRcIiE9dGhpcy5mKXtpZighYilyZXR1cm4gbnVsbDthPT09dGhpcy5jJiYoYT10aGlzLmMuc2xpY2UoKSk7aWYoXCJ0b3AtcmlnaHRcIj09dGhpcy5mfHxcImJvdHRvbS1yaWdodFwiPT10aGlzLmYpYVswXT0tYVswXStiWzBdO2lmKFwiYm90dG9tLWxlZnRcIj09dGhpcy5mfHxcImJvdHRvbS1yaWdodFwiPT10aGlzLmYpYVsxXT0tYVsxXStiWzFdfXJldHVybiB0aGlzLmo9YX07bC5pYT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5iLmlhKGEpfTtsLlVkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYi5ifTtcbmwuY2M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iLmZ9O2wuQmU9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmI7aWYoIWEuaSlpZihhLmope3ZhciBiPWEuYlswXSxjPWEuYlsxXSxkPU9jKGIsYyk7ZC5maWxsUmVjdCgwLDAsYixjKTthLmk9ZC5jYW52YXN9ZWxzZSBhLmk9YS5OO3JldHVybiBhLml9O2wuZGM9ZnVuY3Rpb24oKXtpZih0aGlzLkIpcmV0dXJuIHRoaXMuQjt2YXIgYT10aGlzLmdhO2lmKFwidG9wLWxlZnRcIiE9dGhpcy5hKXt2YXIgYj10aGlzLm5iKCksYz10aGlzLmIuYjtpZighYnx8IWMpcmV0dXJuIG51bGw7YT1hLnNsaWNlKCk7aWYoXCJ0b3AtcmlnaHRcIj09dGhpcy5hfHxcImJvdHRvbS1yaWdodFwiPT10aGlzLmEpYVswXT1jWzBdLWJbMF0tYVswXTtpZihcImJvdHRvbS1sZWZ0XCI9PXRoaXMuYXx8XCJib3R0b20tcmlnaHRcIj09dGhpcy5hKWFbMV09Y1sxXS1iWzFdLWFbMV19cmV0dXJuIHRoaXMuQj1hfTtsLm5iPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudj90aGlzLnY6dGhpcy5iLmJ9O1xubC5hZT1mdW5jdGlvbihhLGIpe3JldHVybiB5KHRoaXMuYixcImNoYW5nZVwiLGEsYil9O2wubG9hZD1mdW5jdGlvbigpe3RoaXMuYi5sb2FkKCl9O2wuWWU9ZnVuY3Rpb24oYSxiKXtuYyh0aGlzLmIsXCJjaGFuZ2VcIixhLGIpfTtmdW5jdGlvbiBMaihhKXthPWF8fHt9O3RoaXMuZj1hLmZvbnQ7dGhpcy5pPWEucm90YXRpb247dGhpcy5nPWEucm90YXRlV2l0aFZpZXc7dGhpcy5iPWEuc2NhbGU7dGhpcy5lYT1hLnRleHQ7dGhpcy51PWEudGV4dEFsaWduO3RoaXMuaj1hLnRleHRCYXNlbGluZTt0aGlzLmxhPXZvaWQgMCE9PWEuZmlsbD9hLmZpbGw6bmV3IHloKHtjb2xvcjpcIiMzMzNcIn0pO3RoaXMucGE9dm9pZCAwIT09YS5zdHJva2U/YS5zdHJva2U6bnVsbDt0aGlzLmE9dm9pZCAwIT09YS5vZmZzZXRYP2Eub2Zmc2V0WDowO3RoaXMuYz12b2lkIDAhPT1hLm9mZnNldFk/YS5vZmZzZXRZOjB9bD1Mai5wcm90b3R5cGU7XG5sLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBMaih7Zm9udDp0aGlzLmYscm90YXRpb246dGhpcy5pLHJvdGF0ZVdpdGhWaWV3OnRoaXMuZyxzY2FsZTp0aGlzLmIsdGV4dDp0aGlzLm5hKCksdGV4dEFsaWduOnRoaXMudSx0ZXh0QmFzZWxpbmU6dGhpcy5qLGZpbGw6dGhpcy5xYSgpP3RoaXMucWEoKS5jbG9uZSgpOnZvaWQgMCxzdHJva2U6dGhpcy5tYSgpP3RoaXMubWEoKS5jbG9uZSgpOnZvaWQgMCxvZmZzZXRYOnRoaXMuYSxvZmZzZXRZOnRoaXMuY30pfTtsLnFhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGF9O2wubWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYX07bC5uYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVhfTtsLlFlPWZ1bmN0aW9uKGEpe3RoaXMubGE9YX07bC5UZT1mdW5jdGlvbihhKXt0aGlzLnBhPWF9O2wuVWU9ZnVuY3Rpb24oYSl7dGhpcy5lYT1hfTt2YXIgTWo9W1wiaHR0cDovL3d3dy5nb29nbGUuY29tL2ttbC9leHQvMi4yXCJdLFo9W251bGwsXCJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4wXCIsXCJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4xXCIsXCJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4yXCIsXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2ttbC8yLjJcIl0sTmo9e2ZyYWN0aW9uOlwiZnJhY3Rpb25cIixwaXhlbHM6XCJwaXhlbHNcIn07ZnVuY3Rpb24gT2ooYSl7YT1JaChhKTtpZihhPS9eXFxzKiM/XFxzKihbMC05QS1GYS1mXXs4fSlcXHMqJC8uZXhlYyhhKSlyZXR1cm4gYT1hWzFdLFtwYXJzZUludChhLnN1YnN0cig2LDIpLDE2KSxwYXJzZUludChhLnN1YnN0cig0LDIpLDE2KSxwYXJzZUludChhLnN1YnN0cigyLDIpLDE2KSxwYXJzZUludChhLnN1YnN0cigwLDIpLDE2KS8yNTVdfVxuZnVuY3Rpb24gUGooYSl7YT1JaChhKTtmb3IodmFyIGI9W10sYz0vXlxccyooWytcXC1dP1xcZCpcXC4/XFxkKyg/OmVbK1xcLV0/XFxkKyk/KVxccyosXFxzKihbK1xcLV0/XFxkKlxcLj9cXGQrKD86ZVsrXFwtXT9cXGQrKT8pKD86XFxzKixcXHMqKFsrXFwtXT9cXGQqXFwuP1xcZCsoPzplWytcXC1dP1xcZCspPykpP1xccyovaSxkO2Q9Yy5leGVjKGEpOyliLnB1c2gocGFyc2VGbG9hdChkWzFdKSxwYXJzZUZsb2F0KGRbMl0pLGRbM10/cGFyc2VGbG9hdChkWzNdKTowKSxhPWEuc3Vic3RyKGRbMF0ubGVuZ3RoKTtpZihcIlwiPT09YSlyZXR1cm4gYn1mdW5jdGlvbiBRaihhKXt2YXIgYj1JaChhKS50cmltKCk7cmV0dXJuIGEuYmFzZVVSST8obmV3IFVSTChiLGEuYmFzZVVSSSkpLmhyZWY6Yn1mdW5jdGlvbiBSaihhKXtyZXR1cm4gSGkoYSl9ZnVuY3Rpb24gU2ooYSxiKXtyZXR1cm4gUChudWxsLFRqLGEsYil9XG5mdW5jdGlvbiBVaihhLGIpe3ZhciBjPVAoe2w6W10sY2Y6W119LFZqLGEsYik7aWYoYyl7dmFyIGQ9Yy5sLGM9Yy5jZixlLGY7ZT0wO2ZvcihmPU1hdGgubWluKGQubGVuZ3RoLGMubGVuZ3RoKTtlPGY7KytlKWRbNCplKzNdPWNbZV07Yz1uZXcgUyhudWxsKTtiaShjLFwiWFlaTVwiLGQpO3JldHVybiBjfX1mdW5jdGlvbiBXaihhLGIpe3ZhciBjPVAoe30sWGosYSxiKSxkPVAobnVsbCxZaixhLGIpO2lmKGQpe3ZhciBlPW5ldyBTKG51bGwpO2JpKGUsXCJYWVpcIixkKTtlLm9hKGMpO3JldHVybiBlfX1mdW5jdGlvbiBaaihhLGIpe3ZhciBjPVAoe30sWGosYSxiKSxkPVAobnVsbCxZaixhLGIpO2lmKGQpe3ZhciBlPW5ldyBCKG51bGwpO1RlKGUsXCJYWVpcIixkLFtkLmxlbmd0aF0pO2Uub2EoYyk7cmV0dXJuIGV9fVxuZnVuY3Rpb24gYWsoYSxiKXt2YXIgYz1QKFtdLGJrLGEsYik7aWYoIWMpcmV0dXJuIG51bGw7aWYoIWMubGVuZ3RoKXJldHVybiBuZXcgcWkoYyk7dmFyIGQsZT0hMCxmPWNbMF0uSCgpLGcsaCxrO2g9MTtmb3Ioaz1jLmxlbmd0aDtoPGs7KytoKWlmKGc9Y1toXSxnLkgoKSE9Zil7ZT0hMTticmVha31pZihlKWlmKFwiUG9pbnRcIj09Zil7ZD1jWzBdO2U9ZC5YO2Y9ZC5sO2g9MTtmb3Ioaz1jLmxlbmd0aDtoPGs7KytoKWc9Y1toXSxvYShmLGcubCk7Zz1kPW5ldyBmaShudWxsKTt2ZShnLGUsZik7Zy5iKCk7Y2soZCxjKX1lbHNlXCJMaW5lU3RyaW5nXCI9PWY/KGQ9bmV3IGNpKG51bGwpLGVpKGQsYyksY2soZCxjKSk6XCJQb2x5Z29uXCI9PWY/KGQ9bmV3IGhpKG51bGwpLGtpKGQsYyksY2soZCxjKSk6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09Zj9kPW5ldyBxaShjKTp4KCExLDM3KTtlbHNlIGQ9bmV3IHFpKGMpO3JldHVybiBkfVxuZnVuY3Rpb24gZGsoYSxiKXt2YXIgYz1QKHt9LFhqLGEsYiksZD1QKG51bGwsWWosYSxiKTtpZihkKXt2YXIgZT1uZXcgTWUobnVsbCk7dmUoZSxcIlhZWlwiLGQpO2UuYigpO2Uub2EoYyk7cmV0dXJuIGV9fWZ1bmN0aW9uIGVrKGEsYil7dmFyIGM9UCh7fSxYaixhLGIpLGQ9UChbbnVsbF0sZmssYSxiKTtpZihkJiZkWzBdKXt2YXIgZT1uZXcgQihudWxsKSxmPWRbMF0sZz1bZi5sZW5ndGhdLGgsaztoPTE7Zm9yKGs9ZC5sZW5ndGg7aDxrOysraClvYShmLGRbaF0pLGcucHVzaChmLmxlbmd0aCk7VGUoZSxcIlhZWlwiLGYsZyk7ZS5vYShjKTtyZXR1cm4gZX19XG5mdW5jdGlvbiBnayhhLGIpe3ZhciBjPVAoe30saGssYSxiKTtpZighYylyZXR1cm4gbnVsbDt2YXIgZD1cImZpbGxTdHlsZVwiaW4gYz9jLmZpbGxTdHlsZTp2b2lkIDAsZT1jLmZpbGw7dm9pZCAwPT09ZXx8ZXx8KGQ9bnVsbCk7KGU9XCJpbWFnZVN0eWxlXCJpbiBjP2MuaW1hZ2VTdHlsZTp2b2lkIDApfHwoZT12b2lkIDApO3ZhciBmPVwidGV4dFN0eWxlXCJpbiBjP2MudGV4dFN0eWxlOnZvaWQgMCxnPVwic3Ryb2tlU3R5bGVcImluIGM/Yy5zdHJva2VTdHlsZTp2b2lkIDAsYz1jLm91dGxpbmU7dm9pZCAwPT09Y3x8Y3x8KGc9bnVsbCk7cmV0dXJuW25ldyB6aCh7ZmlsbDpkLGltYWdlOmUsc3Ryb2tlOmcsdGV4dDpmLHpJbmRleDp2b2lkIDB9KV19XG5mdW5jdGlvbiBjayhhLGIpe3ZhciBjPWIubGVuZ3RoLGQ9QXJyYXkoYi5sZW5ndGgpLGU9QXJyYXkoYi5sZW5ndGgpLGYsZyxoLGs7aD1rPSExO2ZvcihnPTA7ZzxjOysrZylmPWJbZ10sZFtnXT1mLmdldChcImV4dHJ1ZGVcIiksZVtnXT1mLmdldChcImFsdGl0dWRlTW9kZVwiKSxoPWh8fHZvaWQgMCE9PWRbZ10saz1rfHxlW2ddO2gmJmEuc2V0KFwiZXh0cnVkZVwiLGQpO2smJmEuc2V0KFwiYWx0aXR1ZGVNb2RlXCIsZSl9ZnVuY3Rpb24gaWsoYSxiKXtSaChqayxhLGIpfWZ1bmN0aW9uIGtrKGEsYil7UmgobGssYSxiKX1cbnZhciBtaz1PKFose2Rpc3BsYXlOYW1lOkwoViksdmFsdWU6TChWKX0pLGprPU8oWix7RGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtSaChtayxhLGIpO3ZhciBkPWJbYi5sZW5ndGgtMV07bnVsbCE9PWM/ZFtjXT1kLnZhbHVlOm51bGwhPT1kLmRpc3BsYXlOYW1lJiYoZFtkLmRpc3BsYXlOYW1lXT1kLnZhbHVlKX0sU2NoZW1hRGF0YTpmdW5jdGlvbihhLGIpe1JoKG5rLGEsYil9fSksbGs9TyhaLHtMYXRMb25BbHRCb3g6ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKHt9LG9rLGEsYik7aWYoYyl7dmFyIGQ9YltiLmxlbmd0aC0xXTtkLmV4dGVudD1bcGFyc2VGbG9hdChjLndlc3QpLHBhcnNlRmxvYXQoYy5zb3V0aCkscGFyc2VGbG9hdChjLmVhc3QpLHBhcnNlRmxvYXQoYy5ub3J0aCldO2QuYWx0aXR1ZGVNb2RlPWMuYWx0aXR1ZGVNb2RlO2QubWluQWx0aXR1ZGU9cGFyc2VGbG9hdChjLm1pbkFsdGl0dWRlKTtkLm1heEFsdGl0dWRlPXBhcnNlRmxvYXQoYy5tYXhBbHRpdHVkZSl9fSxcbkxvZDpmdW5jdGlvbihhLGIpe3ZhciBjPVAoe30scGssYSxiKTtpZihjKXt2YXIgZD1iW2IubGVuZ3RoLTFdO2QubWluTG9kUGl4ZWxzPXBhcnNlRmxvYXQoYy5taW5Mb2RQaXhlbHMpO2QubWF4TG9kUGl4ZWxzPXBhcnNlRmxvYXQoYy5tYXhMb2RQaXhlbHMpO2QubWluRmFkZUV4dGVudD1wYXJzZUZsb2F0KGMubWluRmFkZUV4dGVudCk7ZC5tYXhGYWRlRXh0ZW50PXBhcnNlRmxvYXQoYy5tYXhGYWRlRXh0ZW50KX19fSksb2s9TyhaLHthbHRpdHVkZU1vZGU6TChWKSxtaW5BbHRpdHVkZTpMKEhpKSxtYXhBbHRpdHVkZTpMKEhpKSxub3J0aDpMKEhpKSxzb3V0aDpMKEhpKSxlYXN0OkwoSGkpLHdlc3Q6TChIaSl9KSxwaz1PKFose21pbkxvZFBpeGVsczpMKEhpKSxtYXhMb2RQaXhlbHM6TChIaSksbWluRmFkZUV4dGVudDpMKEhpKSxtYXhGYWRlRXh0ZW50OkwoSGkpfSksWGo9TyhaLHtleHRydWRlOkwoRWkpLGFsdGl0dWRlTW9kZTpMKFYpfSksVGo9TyhaLHtjb29yZGluYXRlczpLKFBqKX0pLFxuZms9TyhaLHtpbm5lckJvdW5kYXJ5SXM6ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKHZvaWQgMCxxayxhLGIpO2MmJmJbYi5sZW5ndGgtMV0ucHVzaChjKX0sb3V0ZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEsYil7dmFyIGM9UCh2b2lkIDAscmssYSxiKTtjJiYoYltiLmxlbmd0aC0xXVswXT1jKX19KSxWaj1PKFose3doZW46ZnVuY3Rpb24oYSxiKXt2YXIgYz1iW2IubGVuZ3RoLTFdLmNmLGQ9SWgoYSksZD1EYXRlLnBhcnNlKGQpO2MucHVzaChpc05hTihkKT8wOmQpfX0sTyhNaix7Y29vcmQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iW2IubGVuZ3RoLTFdLmwsZD1JaChhKTsoZD0vXlxccyooWytcXC1dP1xcZCsoPzpcXC5cXGQqKT8oPzplWytcXC1dP1xcZCopPylcXHMrKFsrXFwtXT9cXGQrKD86XFwuXFxkKik/KD86ZVsrXFwtXT9cXGQqKT8pXFxzKyhbK1xcLV0/XFxkKyg/OlxcLlxcZCopPyg/OmVbK1xcLV0/XFxkKik/KVxccyokL2kuZXhlYyhkKSk/Yy5wdXNoKHBhcnNlRmxvYXQoZFsxXSkscGFyc2VGbG9hdChkWzJdKSxwYXJzZUZsb2F0KGRbM10pLFxuMCk6Yy5wdXNoKDAsMCwwLDApfX0pKSxZaj1PKFose2Nvb3JkaW5hdGVzOksoUGopfSksc2s9TyhaLHtocmVmOkwoUWopfSxPKE1qLHt4OkwoSGkpLHk6TChIaSksdzpMKEhpKSxoOkwoSGkpfSkpLHRrPU8oWix7SWNvbjpMKGZ1bmN0aW9uKGEsYil7dmFyIGM9UCh7fSxzayxhLGIpO3JldHVybiBjP2M6bnVsbH0pLGhlYWRpbmc6TChIaSksaG90U3BvdDpMKGZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKFwieHVuaXRzXCIpLGM9YS5nZXRBdHRyaWJ1dGUoXCJ5dW5pdHNcIik7cmV0dXJue3g6cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZShcInhcIikpLHdkOk5qW2JdLHk6cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZShcInlcIikpLHhkOk5qW2NdfX0pLHNjYWxlOkwoUmopfSkscWs9TyhaLHtMaW5lYXJSaW5nOksoU2opfSksdWs9TyhaLHtjb2xvcjpMKE9qKSxzY2FsZTpMKFJqKX0pLHZrPU8oWix7Y29sb3I6TChPaiksd2lkdGg6TChIaSl9KSxiaz1PKFose0xpbmVTdHJpbmc6SihXaiksXG5MaW5lYXJSaW5nOkooWmopLE11bHRpR2VvbWV0cnk6SihhayksUG9pbnQ6SihkayksUG9seWdvbjpKKGVrKX0pLHdrPU8oTWose1RyYWNrOkooVWopfSk7TyhaLHtFeHRlbmRlZERhdGE6aWssUmVnaW9uOmtrLExpbms6ZnVuY3Rpb24oYSxiKXtSaCh4ayxhLGIpfSxhZGRyZXNzOkwoViksZGVzY3JpcHRpb246TChWKSxuYW1lOkwoViksb3BlbjpMKEVpKSxwaG9uZU51bWJlcjpMKFYpLHZpc2liaWxpdHk6TChFaSl9KTt2YXIgeGs9TyhaLHtocmVmOkwoUWopfSkscms9TyhaLHtMaW5lYXJSaW5nOksoU2opfSkseWs9TyhaLHtTdHlsZTpMKGdrKSxrZXk6TChWKSxzdHlsZVVybDpMKFFqKX0pO1xuTyhaLHtFeHRlbmRlZERhdGE6aWssUmVnaW9uOmtrLE11bHRpR2VvbWV0cnk6TChhayxcImdlb21ldHJ5XCIpLExpbmVTdHJpbmc6TChXaixcImdlb21ldHJ5XCIpLExpbmVhclJpbmc6TChaaixcImdlb21ldHJ5XCIpLFBvaW50OkwoZGssXCJnZW9tZXRyeVwiKSxQb2x5Z29uOkwoZWssXCJnZW9tZXRyeVwiKSxTdHlsZTpMKGdrKSxTdHlsZU1hcDpmdW5jdGlvbihhLGIpe3ZhciBjPVAodm9pZCAwLHprLGEsYik7aWYoYyl7dmFyIGQ9YltiLmxlbmd0aC0xXTtBcnJheS5pc0FycmF5KGMpP2QuU3R5bGU9YzpcInN0cmluZ1wiPT09dHlwZW9mIGM/ZC5zdHlsZVVybD1jOngoITEsMzgpfX0sYWRkcmVzczpMKFYpLGRlc2NyaXB0aW9uOkwoViksbmFtZTpMKFYpLG9wZW46TChFaSkscGhvbmVOdW1iZXI6TChWKSxzdHlsZVVybDpMKFFqKSx2aXNpYmlsaXR5OkwoRWkpfSxPKE1qLHtNdWx0aVRyYWNrOkwoZnVuY3Rpb24oYSxiKXt2YXIgYz1QKFtdLHdrLGEsYik7aWYoYyl7dmFyIGQ9bmV3IGNpKG51bGwpO2VpKGQsXG5jKTtyZXR1cm4gZH19LFwiZ2VvbWV0cnlcIiksVHJhY2s6TChVaixcImdlb21ldHJ5XCIpfSkpO1xudmFyIEFrPU8oWix7Y29sb3I6TChPaiksZmlsbDpMKEVpKSxvdXRsaW5lOkwoRWkpfSksbms9TyhaLHtTaW1wbGVEYXRhOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO2lmKG51bGwhPT1jKXt2YXIgZD1WKGEpO2JbYi5sZW5ndGgtMV1bY109ZH19fSksaGs9TyhaLHtJY29uU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKHt9LHRrLGEsYik7aWYoYyl7dmFyIGQ9YltiLmxlbmd0aC0xXSxlPVwiSWNvblwiaW4gYz9jLkljb246e30sZj0hKFwiSWNvblwiaW4gYyl8fDA8T2JqZWN0LmtleXMoZSkubGVuZ3RoLGcsaD1lLmhyZWY7aD9nPWg6ZiYmKGc9dm9pZCAwKTt2YXIgayxtLG47KGg9Yy5ob3RTcG90KT8oaz1baC54LGgueV0sbT1oLndkLG49aC54ZCk6dm9pZCAwPT09Zz9uPW09az12b2lkIDA6L15odHRwOlxcL1xcL21hcHNcXC4oPzpnb29nbGV8Z3N0YXRpYylcXC5jb21cXC8vLnRlc3QoZykmJihrPVsuNSwwXSxuPW09XCJmcmFjdGlvblwiKTt2YXIgcCxoPWUueCxxPVxuZS55O3ZvaWQgMCE9PWgmJnZvaWQgMCE9PXEmJihwPVtoLHFdKTt2YXIgdSxoPWUudyxlPWUuaDt2b2lkIDAhPT1oJiZ2b2lkIDAhPT1lJiYodT1baCxlXSk7dmFyIEYsZT1jLmhlYWRpbmc7dm9pZCAwIT09ZSYmKEY9RGEoZSkpO2M9Yy5zY2FsZTtmPyh2b2lkIDA9PWcmJih1PXZvaWQgMCx2b2lkIDA9PT1jJiYoYz12b2lkIDApKSxmPW5ldyBLaih7YW5jaG9yOmssYW5jaG9yT3JpZ2luOlwiYm90dG9tLWxlZnRcIixhbmNob3JYVW5pdHM6bSxhbmNob3JZVW5pdHM6bixjcm9zc09yaWdpbjpcImFub255bW91c1wiLG9mZnNldDpwLG9mZnNldE9yaWdpbjpcImJvdHRvbS1sZWZ0XCIscm90YXRpb246RixzY2FsZTpjLHNpemU6dSxzcmM6Z30pLGQuaW1hZ2VTdHlsZT1mKTpkLmltYWdlU3R5bGU9dm9pZCAwfX0sTGFiZWxTdHlsZTpmdW5jdGlvbihhLGIpe3ZhciBjPVAoe30sdWssYSxiKTtjJiYoYltiLmxlbmd0aC0xXS50ZXh0U3R5bGU9bmV3IExqKHtmaWxsOm5ldyB5aCh7Y29sb3I6XCJjb2xvclwiaW5cbmM/Yy5jb2xvcjp2b2lkIDB9KSxzY2FsZTpjLnNjYWxlfSkpfSxMaW5lU3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKHt9LHZrLGEsYik7YyYmKGJbYi5sZW5ndGgtMV0uc3Ryb2tlU3R5bGU9bmV3IFRnKHtjb2xvcjpcImNvbG9yXCJpbiBjP2MuY29sb3I6dm9pZCAwLHdpZHRoOlwid2lkdGhcImluIGM/Yy53aWR0aDoxfSkpfSxQb2x5U3R5bGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKHt9LEFrLGEsYik7aWYoYyl7dmFyIGQ9YltiLmxlbmd0aC0xXTtkLmZpbGxTdHlsZT1uZXcgeWgoe2NvbG9yOlwiY29sb3JcImluIGM/Yy5jb2xvcjp2b2lkIDB9KTt2YXIgZT1jLmZpbGw7dm9pZCAwIT09ZSYmKGQuZmlsbD1lKTtjPWMub3V0bGluZTt2b2lkIDAhPT1jJiYoZC5vdXRsaW5lPWMpfX19KSx6az1PKFose1BhaXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1QKHt9LHlrLGEsYik7aWYoYyl7dmFyIGQ9Yy5rZXk7ZCYmXCJub3JtYWxcIj09ZCYmKChkPWMuc3R5bGVVcmwpJiYoYltiLmxlbmd0aC0xXT1kKSwoYz1cbmMuU3R5bGUpJiYoYltiLmxlbmd0aC0xXT1jKSl9fX0pO2Z1bmN0aW9uIEJrKGEsYil7dmFyIGM9QXJyYXkuaXNBcnJheShiKT9iOkxjKGIpLGM9WzI1NSooND09Yy5sZW5ndGg/Y1szXToxKSxjWzJdLGNbMV0sY1swXV0sZDtmb3IoZD0wOzQ+ZDsrK2Qpe3ZhciBlPXBhcnNlSW50KGNbZF0sMTApLnRvU3RyaW5nKDE2KTtjW2RdPTE9PWUubGVuZ3RoP1wiMFwiK2U6ZX1XKGEsYy5qb2luKFwiXCIpKX1mdW5jdGlvbiBDayhhLGIsYyl7YT17bm9kZTphfTt2YXIgZD1iLkgoKSxlLGY7XCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09ZD8oZT1zaShiLmEpLGY9RGspOlwiTXVsdGlQb2ludFwiPT1kPyhlPWdpKGIpLGY9RWspOlwiTXVsdGlMaW5lU3RyaW5nXCI9PWQ/KGU9Yi5oYigpLGY9RmspOlwiTXVsdGlQb2x5Z29uXCI9PWQ/KGU9amkoYiksZj1Hayk6eCghMSwzOSk7UihhLEhrLGYsZSxjKX1mdW5jdGlvbiBJayhhLGIsYyl7Uih7bm9kZTphfSxKayxLayxbYl0sYyl9XG5mdW5jdGlvbiBMayhhLGIsYyl7dmFyIGQ9e25vZGU6YX07Yi5hJiZhLnNldEF0dHJpYnV0ZShcImlkXCIsYi5hKTthPWIuRmEoKTt2YXIgZT17YWRkcmVzczoxLGRlc2NyaXB0aW9uOjEsbmFtZToxLG9wZW46MSxwaG9uZU51bWJlcjoxLHN0eWxlVXJsOjEsdmlzaWJpbGl0eToxfTtlW2IuY109MTt2YXIgZj1PYmplY3Qua2V5cyhhfHx7fSkuc29ydCgpLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm4hZVthXX0pO2lmKDA8Zi5sZW5ndGgpe3ZhciBnPVFoKGEsZik7UihkLE1rLE5rLFt7bmFtZXM6Zix2YWx1ZXM6Z31dLGMpfWlmKGY9Yi5pKWlmKGY9Zi5jYWxsKGIsMCkpZj1BcnJheS5pc0FycmF5KGYpP2ZbMF06Zix0aGlzLmImJihhLlN0eWxlPWYpLChmPWYubmEoKSkmJihhLm5hbWU9Zi5uYSgpKTtmPU9rW2NbYy5sZW5ndGgtMV0ubm9kZS5uYW1lc3BhY2VVUkldO2E9UWgoYSxmKTtSKGQsTWssUGgsYSxjLGYpO2E9Y1swXTsoYj1iLlIoKSkmJihiPVhoKGIsITAsYSkpO1IoZCxNayxEayxcbltiXSxjKX1mdW5jdGlvbiBQayhhLGIsYyl7dmFyIGQ9Yi5sO2E9e25vZGU6YX07YS5sYXlvdXQ9Yi5YO2Euc3RyaWRlPWIuQTtSKGEsUWssUmssW2RdLGMpfWZ1bmN0aW9uIFNrKGEsYixjKXtiPVdlKGIpO3ZhciBkPWIuc2hpZnQoKTthPXtub2RlOmF9O1IoYSxUayxVayxiLGMpO1IoYSxUayxWayxbZF0sYyl9ZnVuY3Rpb24gV2soYSxiKXtNaShhLE1hdGgucm91bmQoMUU2KmIpLzFFNil9TyhaLFtcIkRvY3VtZW50XCIsXCJQbGFjZW1hcmtcIl0pO08oWix7RG9jdW1lbnQ6TShmdW5jdGlvbihhLGIsYyl7Uih7bm9kZTphfSxYayxZayxiLGMsdm9pZCAwLHRoaXMpfSksUGxhY2VtYXJrOk0oTGspfSk7XG52YXIgWGs9TyhaLHtQbGFjZW1hcms6TShMayl9KSxaaz1PKFose0RhdGE6TShmdW5jdGlvbihhLGIsYyl7YS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsYi5uYW1lKTthPXtub2RlOmF9O2I9Yi52YWx1ZTtcIm9iamVjdFwiPT10eXBlb2YgYj8obnVsbCE9PWImJmIuZGlzcGxheU5hbWUmJlIoYSxaayxQaCxbYi5kaXNwbGF5TmFtZV0sYyxbXCJkaXNwbGF5TmFtZVwiXSksbnVsbCE9PWImJmIudmFsdWUmJlIoYSxaayxQaCxbYi52YWx1ZV0sYyxbXCJ2YWx1ZVwiXSkpOlIoYSxaayxQaCxbYl0sYyxbXCJ2YWx1ZVwiXSl9KSx2YWx1ZTpNKGZ1bmN0aW9uKGEsYil7VyhhLGIpfSksZGlzcGxheU5hbWU6TShmdW5jdGlvbihhLGIpe2EuYXBwZW5kQ2hpbGQoR2guY3JlYXRlQ0RBVEFTZWN0aW9uKGIpKX0pfSksJGs9e1BvaW50OlwiUG9pbnRcIixMaW5lU3RyaW5nOlwiTGluZVN0cmluZ1wiLExpbmVhclJpbmc6XCJMaW5lYXJSaW5nXCIsUG9seWdvbjpcIlBvbHlnb25cIixNdWx0aVBvaW50OlwiTXVsdGlHZW9tZXRyeVwiLE11bHRpTGluZVN0cmluZzpcIk11bHRpR2VvbWV0cnlcIixcbk11bHRpUG9seWdvbjpcIk11bHRpR2VvbWV0cnlcIixHZW9tZXRyeUNvbGxlY3Rpb246XCJNdWx0aUdlb21ldHJ5XCJ9LGFsPU8oWixbXCJocmVmXCJdLE8oTWosW1wieFwiLFwieVwiLFwid1wiLFwiaFwiXSkpLGJsPU8oWix7aHJlZjpNKFcpfSxPKE1qLHt4Ok0oTWkpLHk6TShNaSksdzpNKE1pKSxoOk0oTWkpfSkpLGNsPU8oWixbXCJzY2FsZVwiLFwiaGVhZGluZ1wiLFwiSWNvblwiLFwiaG90U3BvdFwiXSksZWw9TyhaLHtJY29uOk0oZnVuY3Rpb24oYSxiLGMpe2E9e25vZGU6YX07dmFyIGQ9YWxbY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV0sZT1RaChiLGQpO1IoYSxibCxQaCxlLGMsZCk7ZD1hbFtNalswXV07ZT1RaChiLGQpO1IoYSxibCxkbCxlLGMsZCl9KSxoZWFkaW5nOk0oTWkpLGhvdFNwb3Q6TShmdW5jdGlvbihhLGIpe2Euc2V0QXR0cmlidXRlKFwieFwiLGIueCk7YS5zZXRBdHRyaWJ1dGUoXCJ5XCIsYi55KTthLnNldEF0dHJpYnV0ZShcInh1bml0c1wiLGIud2QpO2Euc2V0QXR0cmlidXRlKFwieXVuaXRzXCIsXG5iLnhkKX0pLHNjYWxlOk0oV2spfSksZmw9TyhaLFtcImNvbG9yXCIsXCJzY2FsZVwiXSksZ2w9TyhaLHtjb2xvcjpNKEJrKSxzY2FsZTpNKFdrKX0pLGhsPU8oWixbXCJjb2xvclwiLFwid2lkdGhcIl0pLGlsPU8oWix7Y29sb3I6TShCayksd2lkdGg6TShNaSl9KSxKaz1PKFose0xpbmVhclJpbmc6TShQayl9KSxIaz1PKFose0xpbmVTdHJpbmc6TShQayksUG9pbnQ6TShQayksUG9seWdvbjpNKFNrKSxHZW9tZXRyeUNvbGxlY3Rpb246TShDayl9KSxPaz1PKFosXCJuYW1lIG9wZW4gdmlzaWJpbGl0eSBhZGRyZXNzIHBob25lTnVtYmVyIGRlc2NyaXB0aW9uIHN0eWxlVXJsIFN0eWxlXCIuc3BsaXQoXCIgXCIpKSxNaz1PKFose0V4dGVuZGVkRGF0YTpNKGZ1bmN0aW9uKGEsYixjKXthPXtub2RlOmF9O3ZhciBkPWIubmFtZXM7Yj1iLnZhbHVlcztmb3IodmFyIGU9ZC5sZW5ndGgsZj0wO2Y8ZTtmKyspUihhLFprLGpsLFt7bmFtZTpkW2ZdLHZhbHVlOmJbZl19XSxjKX0pLE11bHRpR2VvbWV0cnk6TShDayksXG5MaW5lU3RyaW5nOk0oUGspLExpbmVhclJpbmc6TShQayksUG9pbnQ6TShQayksUG9seWdvbjpNKFNrKSxTdHlsZTpNKGZ1bmN0aW9uKGEsYixjKXthPXtub2RlOmF9O3ZhciBkPXt9LGU9Yi5xYSgpLGY9Yi5tYSgpLGc9Yi5pYSgpO2I9Yi5uYSgpO2cgaW5zdGFuY2VvZiBLaiYmKGQuSWNvblN0eWxlPWcpO2ImJihkLkxhYmVsU3R5bGU9Yik7ZiYmKGQuTGluZVN0eWxlPWYpO2UmJihkLlBvbHlTdHlsZT1lKTtiPWtsW2NbYy5sZW5ndGgtMV0ubm9kZS5uYW1lc3BhY2VVUkldO2Q9UWgoZCxiKTtSKGEsbGwsUGgsZCxjLGIpfSksYWRkcmVzczpNKFcpLGRlc2NyaXB0aW9uOk0oVyksbmFtZTpNKFcpLG9wZW46TShMaSkscGhvbmVOdW1iZXI6TShXKSxzdHlsZVVybDpNKFcpLHZpc2liaWxpdHk6TShMaSl9KSxRaz1PKFose2Nvb3JkaW5hdGVzOk0oZnVuY3Rpb24oYSxiLGMpe2M9Y1tjLmxlbmd0aC0xXTt2YXIgZD1jLmxheW91dDtjPWMuc3RyaWRlO3ZhciBlO1wiWFlcIj09ZHx8XCJYWU1cIj09XG5kP2U9MjpcIlhZWlwiPT1kfHxcIlhZWk1cIj09ZD9lPTM6eCghMSwzNCk7dmFyIGYsZz1iLmxlbmd0aCxoPVwiXCI7aWYoMDxnKXtoKz1iWzBdO2ZvcihkPTE7ZDxlOysrZCloKz1cIixcIitiW2RdO2ZvcihmPWM7ZjxnO2YrPWMpZm9yKGgrPVwiIFwiK2JbZl0sZD0xO2Q8ZTsrK2QpaCs9XCIsXCIrYltmK2RdfVcoYSxoKX0pfSksVGs9TyhaLHtvdXRlckJvdW5kYXJ5SXM6TShJayksaW5uZXJCb3VuZGFyeUlzOk0oSWspfSksbWw9TyhaLHtjb2xvcjpNKEJrKX0pLGtsPU8oWixbXCJJY29uU3R5bGVcIixcIkxhYmVsU3R5bGVcIixcIkxpbmVTdHlsZVwiLFwiUG9seVN0eWxlXCJdKSxsbD1PKFose0ljb25TdHlsZTpNKGZ1bmN0aW9uKGEsYixjKXthPXtub2RlOmF9O3ZhciBkPXt9LGU9Yi5uYigpLGY9Yi5VZCgpLGc9e2hyZWY6Yi5iLnV9O2lmKGUpe2cudz1lWzBdO2cuaD1lWzFdO3ZhciBoPWIuU2IoKSxrPWIuZGMoKTtrJiZmJiZrWzBdJiZrWzFdIT09ZVsxXSYmKGcueD1rWzBdLGcueT1mWzFdLShrWzFdK2VbMV0pKTtcbmgmJmhbMF0mJmhbMV0hPT1lWzFdJiYoZC5ob3RTcG90PXt4OmhbMF0sd2Q6XCJwaXhlbHNcIix5OmVbMV0taFsxXSx4ZDpcInBpeGVsc1wifSl9ZC5JY29uPWc7ZT1iLmc7MSE9PWUmJihkLnNjYWxlPWUpOyhiPWIubykmJihkLmhlYWRpbmc9Yik7Yj1jbFtjW2MubGVuZ3RoLTFdLm5vZGUubmFtZXNwYWNlVVJJXTtkPVFoKGQsYik7UihhLGVsLFBoLGQsYyxiKX0pLExhYmVsU3R5bGU6TShmdW5jdGlvbihhLGIsYyl7YT17bm9kZTphfTt2YXIgZD17fSxlPWIucWEoKTtlJiYoZC5jb2xvcj1lLmIpOyhiPWIuYikmJjEhPT1iJiYoZC5zY2FsZT1iKTtiPWZsW2NbYy5sZW5ndGgtMV0ubm9kZS5uYW1lc3BhY2VVUkldO2Q9UWgoZCxiKTtSKGEsZ2wsUGgsZCxjLGIpfSksTGluZVN0eWxlOk0oZnVuY3Rpb24oYSxiLGMpe2E9e25vZGU6YX07dmFyIGQ9aGxbY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07Yj1RaCh7Y29sb3I6Yi5iLHdpZHRoOmIuY30sZCk7UihhLGlsLFBoLGIsYyxkKX0pLFxuUG9seVN0eWxlOk0oZnVuY3Rpb24oYSxiLGMpe1Ioe25vZGU6YX0sbWwsbmwsW2IuYl0sYyl9KX0pO2Z1bmN0aW9uIGRsKGEsYixjKXtyZXR1cm4gSGgoTWpbMF0sXCJneDpcIitjKX1mdW5jdGlvbiBZayhhLGIpe3JldHVybiBIaChiW2IubGVuZ3RoLTFdLm5vZGUubmFtZXNwYWNlVVJJLFwiUGxhY2VtYXJrXCIpfWZ1bmN0aW9uIERrKGEsYil7aWYoYSlyZXR1cm4gSGgoYltiLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSSwka1thLkgoKV0pfXZhciBubD1OaChcImNvbG9yXCIpLFJrPU5oKFwiY29vcmRpbmF0ZXNcIiksamw9TmgoXCJEYXRhXCIpLE5rPU5oKFwiRXh0ZW5kZWREYXRhXCIpLFVrPU5oKFwiaW5uZXJCb3VuZGFyeUlzXCIpLEVrPU5oKFwiUG9pbnRcIiksRms9TmgoXCJMaW5lU3RyaW5nXCIpLEtrPU5oKFwiTGluZWFyUmluZ1wiKSxHaz1OaChcIlBvbHlnb25cIiksVms9TmgoXCJvdXRlckJvdW5kYXJ5SXNcIik7KGZ1bmN0aW9uKCl7dmFyIGE9e30sYj17VTphfTsoZnVuY3Rpb24oYyl7aWYoXCJvYmplY3RcIj09PXR5cGVvZiBhJiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIGIpYi5VPWMoKTtlbHNle3ZhciBkO1widW5kZWZpbmVkXCIhPT10eXBlb2Ygd2luZG93P2Q9d2luZG93OlwidW5kZWZpbmVkXCIhPT10eXBlb2YgZ2xvYmFsP2Q9Z2xvYmFsOlwidW5kZWZpbmVkXCIhPT10eXBlb2Ygc2VsZj9kPXNlbGY6ZD10aGlzO2QuU2k9YygpfX0pKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uIGQoYSxiLGcpe2Z1bmN0aW9uIGUoaCxrKXtpZighYltoXSl7aWYoIWFbaF0pe3ZhciBtPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWsmJm0pcmV0dXJuIG0oaCwhMCk7aWYoZilyZXR1cm4gZihoLCEwKTttPUVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitoK1wiJ1wiKTt0aHJvdyBtLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsbTt9bT1iW2hdPXtVOnt9fTthW2hdWzBdLmNhbGwobS5VLGZ1bmN0aW9uKGIpe3ZhciBkPVxuYVtoXVsxXVtiXTtyZXR1cm4gZShkP2Q6Yil9LG0sbS5VLGQsYSxiLGcpfXJldHVybiBiW2hdLlV9Zm9yKHZhciBmPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsbT0wO208Zy5sZW5ndGg7bSsrKWUoZ1ttXSk7cmV0dXJuIGV9KHsxOltmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGQoYSl7dGhpcy5UYT1BcnJheUJ1ZmZlci5pc1ZpZXcmJkFycmF5QnVmZmVyLmlzVmlldyhhKT9hOm5ldyBVaW50OEFycmF5KGF8fDApO3RoaXMudHlwZT10aGlzLkw9MDt0aGlzLmxlbmd0aD10aGlzLlRhLmxlbmd0aH1mdW5jdGlvbiBlKGEsYixkKXt2YXIgZT1kLlRhLGYsZztnPWVbZC5MKytdO2Y9KGcmMTEyKT4+NDtpZigxMjg+ZylyZXR1cm4gaChhLGYsYik7Zz1lW2QuTCsrXTtmfD0oZyYxMjcpPDwzO2lmKDEyOD5nKXJldHVybiBoKGEsZixiKTtnPWVbZC5MKytdO2Z8PShnJjEyNyk8PDEwO2lmKDEyOD5nKXJldHVybiBoKGEsZixiKTtnPWVbZC5MKytdO2Z8PShnJjEyNyk8PDE3O2lmKDEyOD5cbmcpcmV0dXJuIGgoYSxmLGIpO2c9ZVtkLkwrK107Znw9KGcmMTI3KTw8MjQ7aWYoMTI4PmcpcmV0dXJuIGgoYSxmLGIpO2c9ZVtkLkwrK107aWYoMTI4PmcpcmV0dXJuIGgoYSxmfChnJjEpPDwzMSxiKTt0aHJvdyBFcnJvcihcIkV4cGVjdGVkIHZhcmludCBub3QgbW9yZSB0aGFuIDEwIGJ5dGVzXCIpO31mdW5jdGlvbiBoKGEsYixkKXtyZXR1cm4gZD80Mjk0OTY3Mjk2KmIrKGE+Pj4wKTo0Mjk0OTY3Mjk2KihiPj4+MCkrKGE+Pj4wKX1iLlU9ZDt2YXIgaz1hKFwiaWVlZTc1NFwiKTtkLmM9MDtkLmE9MTtkLmI9MjtkLmY9NTtkLnByb3RvdHlwZT17aGQ6ZnVuY3Rpb24oYSxiLGQpe2ZvcihkPWR8fHRoaXMubGVuZ3RoO3RoaXMuTDxkOyl7dmFyIGU9dGhpcy5qYSgpLGY9ZT4+MyxnPXRoaXMuTDt0aGlzLnR5cGU9ZSY3O2EoZixiLHRoaXMpO3RoaXMuTD09PWcmJnRoaXMub2koZSl9cmV0dXJuIGJ9LCRoOmZ1bmN0aW9uKCl7dmFyIGE9ay5yZWFkKHRoaXMuVGEsdGhpcy5MLCEwLDIzLDQpO3RoaXMuTCs9XG40O3JldHVybiBhfSxXaDpmdW5jdGlvbigpe3ZhciBhPWsucmVhZCh0aGlzLlRhLHRoaXMuTCwhMCw1Miw4KTt0aGlzLkwrPTg7cmV0dXJuIGF9LGphOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuVGEsZCxmO2Y9Ylt0aGlzLkwrK107ZD1mJjEyNztpZigxMjg+ZilyZXR1cm4gZDtmPWJbdGhpcy5MKytdO2R8PShmJjEyNyk8PDc7aWYoMTI4PmYpcmV0dXJuIGQ7Zj1iW3RoaXMuTCsrXTtkfD0oZiYxMjcpPDwxNDtpZigxMjg+ZilyZXR1cm4gZDtmPWJbdGhpcy5MKytdO2R8PShmJjEyNyk8PDIxO2lmKDEyOD5mKXJldHVybiBkO2Y9Ylt0aGlzLkxdO3JldHVybiBlKGR8KGYmMTUpPDwyOCxhLHRoaXMpfSxnaTpmdW5jdGlvbigpe3JldHVybiB0aGlzLmphKCEwKX0sbWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmphKCk7cmV0dXJuIDE9PT1hJTI/KGErMSkvLTI6YS8yfSxVaDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5qYSgpfSxvZDpmdW5jdGlvbigpe2Zvcih2YXIgYT10aGlzLmphKCkrdGhpcy5MLFxuYj10aGlzLlRhLGQ9XCJcIixlPXRoaXMuTDtlPGE7KXt2YXIgZj1iW2VdLGc9bnVsbCxoPTIzOTxmPzQ6MjIzPGY/MzoxOTE8Zj8yOjE7aWYoZStoPmEpYnJlYWs7dmFyIGssRCxFO2lmKDE9PT1oKTEyOD5mJiYoZz1mKTtlbHNlIGlmKDI9PT1oKWs9YltlKzFdLDEyOD09PShrJjE5MikmJihnPShmJjMxKTw8NnxrJjYzLDEyNz49ZyYmKGc9bnVsbCkpO2Vsc2UgaWYoMz09PWgpe2lmKGs9YltlKzFdLEQ9YltlKzJdLDEyOD09PShrJjE5MikmJjEyOD09PShEJjE5MikmJihnPShmJjE1KTw8MTJ8KGsmNjMpPDw2fEQmNjMsMjA0Nz49Z3x8NTUyOTY8PWcmJjU3MzQzPj1nKSlnPW51bGx9ZWxzZSA0PT09aCYmKGs9YltlKzFdLEQ9YltlKzJdLEU9YltlKzNdLDEyOD09PShrJjE5MikmJjEyOD09PShEJjE5MikmJjEyOD09PShFJjE5MikmJihnPShmJjE1KTw8MTh8KGsmNjMpPDwxMnwoRCY2Myk8PDZ8RSY2Myw2NTUzNT49Z3x8MTExNDExMjw9ZykpJiYoZz1udWxsKTtudWxsPT09Zz8oZz02NTUzMyxcbmg9MSk6NjU1MzU8ZyYmKGctPTY1NTM2LGQrPVN0cmluZy5mcm9tQ2hhckNvZGUoZz4+PjEwJjEwMjN8NTUyOTYpLGc9NTYzMjB8ZyYxMDIzKTtkKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGcpO2UrPWh9dGhpcy5MPWE7cmV0dXJuIGR9LG9pOmZ1bmN0aW9uKGEpe2EmPTc7aWYoYT09PWQuYylmb3IoOzEyNzx0aGlzLlRhW3RoaXMuTCsrXTspO2Vsc2UgaWYoYT09PWQuYil0aGlzLkw9dGhpcy5qYSgpK3RoaXMuTDtlbHNlIGlmKGE9PT1kLmYpdGhpcy5MKz00O2Vsc2UgaWYoYT09PWQuYSl0aGlzLkwrPTg7ZWxzZSB0aHJvdyBFcnJvcihcIlVuaW1wbGVtZW50ZWQgdHlwZTogXCIrYSk7fX19LHtpZWVlNzU0OjJ9XSwyOltmdW5jdGlvbihhLGIsZil7Zi5yZWFkPWZ1bmN0aW9uKGEsYixkLGUsZil7dmFyIGc7Zz04KmYtZS0xO3ZhciBoPSgxPDxnKS0xLGs9aD4+MSxtPS03O2Y9ZD9mLTE6MDt2YXIgbj1kPy0xOjEsQz1hW2IrZl07Zis9bjtkPUMmKDE8PC1tKS0xO0M+Pj0tbTtmb3IobSs9ZzswPFxubTtkPTI1NipkK2FbYitmXSxmKz1uLG0tPTgpO2c9ZCYoMTw8LW0pLTE7ZD4+PS1tO2ZvcihtKz1lOzA8bTtnPTI1NipnK2FbYitmXSxmKz1uLG0tPTgpO2lmKDA9PT1kKWQ9MS1rO2Vsc2V7aWYoZD09PWgpcmV0dXJuIGc/TmFOOkluZmluaXR5KihDPy0xOjEpO2crPU1hdGgucG93KDIsZSk7ZC09a31yZXR1cm4oQz8tMToxKSpnKk1hdGgucG93KDIsZC1lKX07Zi53cml0ZT1mdW5jdGlvbihhLGIsZCxlLGYscCl7dmFyIGcsaD04KnAtZi0xLGs9KDE8PGgpLTEsbT1rPj4xLG49MjM9PT1mP01hdGgucG93KDIsLTI0KS1NYXRoLnBvdygyLC03Nyk6MDtwPWU/MDpwLTE7dmFyIEQ9ZT8xOi0xLEU9MD5ifHwwPT09YiYmMD4xL2I/MTowO2I9TWF0aC5hYnMoYik7aXNOYU4oYil8fEluZmluaXR5PT09Yj8oYj1pc05hTihiKT8xOjAsZT1rKTooZT1NYXRoLmZsb29yKE1hdGgubG9nKGIpL01hdGguTE4yKSwxPmIqKGc9TWF0aC5wb3coMiwtZSkpJiYoZS0tLGcqPTIpLGI9MTw9ZSttP2Irbi9nOlxuYituKk1hdGgucG93KDIsMS1tKSwyPD1iKmcmJihlKyssZy89MiksZSttPj1rPyhiPTAsZT1rKToxPD1lK20/KGI9KGIqZy0xKSpNYXRoLnBvdygyLGYpLGUrPW0pOihiPWIqTWF0aC5wb3coMixtLTEpKk1hdGgucG93KDIsZiksZT0wKSk7Zm9yKDs4PD1mO2FbZCtwXT1iJjI1NSxwKz1ELGIvPTI1NixmLT04KTtlPWU8PGZ8Yjtmb3IoaCs9ZjswPGg7YVtkK3BdPWUmMjU1LHArPUQsZS89MjU2LGgtPTgpO2FbZCtwLURdfD0xMjgqRX19LHt9XX0se30sWzFdKSgxKX0pfSkoKTsoZnVuY3Rpb24oKXt2YXIgYT17fSxiPXtVOmF9OyhmdW5jdGlvbihjKXtpZihcIm9iamVjdFwiPT09dHlwZW9mIGEmJlwidW5kZWZpbmVkXCIhPT10eXBlb2YgYiliLlU9YygpO2Vsc2V7dmFyIGQ7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB3aW5kb3c/ZD13aW5kb3c6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBnbG9iYWw/ZD1nbG9iYWw6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBzZWxmP2Q9c2VsZjpkPXRoaXM7ZC5WaT1jKCl9fSkoZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24gZChhLGIsZyl7ZnVuY3Rpb24gZShoLGspe2lmKCFiW2hdKXtpZighYVtoXSl7dmFyIG09XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighayYmbSlyZXR1cm4gbShoLCEwKTtpZihmKXJldHVybiBmKGgsITApO209RXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2grXCInXCIpO3Rocm93IG0uY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixtO31tPWJbaF09e1U6e319O2FbaF1bMF0uY2FsbChtLlUsZnVuY3Rpb24oYil7dmFyIGQ9XG5hW2hdWzFdW2JdO3JldHVybiBlKGQ/ZDpiKX0sbSxtLlUsZCxhLGIsZyl9cmV0dXJuIGJbaF0uVX1mb3IodmFyIGY9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxtPTA7bTxnLmxlbmd0aDttKyspZShnW21dKTtyZXR1cm4gZX0oezE6W2Z1bmN0aW9uKGEsYil7Yi5VLk5pPWEoXCIuL2xpYi92ZWN0b3J0aWxlLmpzXCIpO2IuVS5PaT1hKFwiLi9saWIvdmVjdG9ydGlsZWZlYXR1cmUuanNcIik7Yi5VLlBpPWEoXCIuL2xpYi92ZWN0b3J0aWxlbGF5ZXIuanNcIil9LHtcIi4vbGliL3ZlY3RvcnRpbGUuanNcIjoyLFwiLi9saWIvdmVjdG9ydGlsZWZlYXR1cmUuanNcIjozLFwiLi9saWIvdmVjdG9ydGlsZWxheWVyLmpzXCI6NH1dLDI6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGIsZCl7Mz09PWEmJihhPW5ldyBlKGQsZC5qYSgpK2QuTCksYS5sZW5ndGgmJihiW2EubmFtZV09YSkpfXZhciBlPWEoXCIuL3ZlY3RvcnRpbGVsYXllclwiKTtiLlU9ZnVuY3Rpb24oYSxiKXt0aGlzLmxheWVycz1cbmEuaGQoZCx7fSxiKX19LHtcIi4vdmVjdG9ydGlsZWxheWVyXCI6NH1dLDM6W2Z1bmN0aW9uKGEsYil7ZnVuY3Rpb24gZChhLGIsZCxmLGcpe3RoaXMucHJvcGVydGllcz17fTt0aGlzLmV4dGVudD1kO3RoaXMudHlwZT0wO3RoaXMuZmI9YTt0aGlzLkNkPS0xO3RoaXMuTGI9Zjt0aGlzLk5iPWc7YS5oZChlLHRoaXMsYil9ZnVuY3Rpb24gZShhLGIsZCl7aWYoMT09YSliLmlkPWQuamEoKTtlbHNlIGlmKDI9PWEpZm9yKGE9ZC5qYSgpK2QuTDtkLkw8YTspe3ZhciBlPWIuTGJbZC5qYSgpXSxmPWIuTmJbZC5qYSgpXTtiLnByb3BlcnRpZXNbZV09Zn1lbHNlIDM9PWE/Yi50eXBlPWQuamEoKTo0PT1hJiYoYi5DZD1kLkwpfWEoXCJwb2ludC1nZW9tZXRyeVwiKTtiLlU9ZDtkLmI9W1wiVW5rbm93blwiLFwiUG9pbnRcIixcIkxpbmVTdHJpbmdcIixcIlBvbHlnb25cIl07ZC5wcm90b3R5cGUuYmJveD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZmI7YS5MPXRoaXMuQ2Q7Zm9yKHZhciBiPWEuamEoKSthLkwsZD0xLFxuZT0wLGY9MCxnPTAsdT1JbmZpbml0eSxGPS1JbmZpbml0eSx6PUluZmluaXR5LEM9LUluZmluaXR5O2EuTDxiOylpZihlfHwoZT1hLmphKCksZD1lJjcsZT4+PTMpLGUtLSwxPT09ZHx8Mj09PWQpZis9YS5tZCgpLGcrPWEubWQoKSxmPHUmJih1PWYpLGY+RiYmKEY9ZiksZzx6JiYoej1nKSxnPkMmJihDPWcpO2Vsc2UgaWYoNyE9PWQpdGhyb3cgRXJyb3IoXCJ1bmtub3duIGNvbW1hbmQgXCIrZCk7cmV0dXJuW3UseixGLENdfX0se1wicG9pbnQtZ2VvbWV0cnlcIjo1fV0sNDpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGEsYil7dGhpcy52ZXJzaW9uPTE7dGhpcy5uYW1lPW51bGw7dGhpcy5leHRlbnQ9NDA5Njt0aGlzLmxlbmd0aD0wO3RoaXMuZmI9YTt0aGlzLkxiPVtdO3RoaXMuTmI9W107dGhpcy5LYj1bXTthLmhkKGUsdGhpcyxiKTt0aGlzLmxlbmd0aD10aGlzLktiLmxlbmd0aH1mdW5jdGlvbiBlKGEsYixkKXsxNT09PWE/Yi52ZXJzaW9uPWQuamEoKToxPT09YT9iLm5hbWU9ZC5vZCgpOlxuNT09PWE/Yi5leHRlbnQ9ZC5qYSgpOjI9PT1hP2IuS2IucHVzaChkLkwpOjM9PT1hP2IuTGIucHVzaChkLm9kKCkpOjQ9PT1hJiZiLk5iLnB1c2goaChkKSl9ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9bnVsbCxkPWEuamEoKSthLkw7YS5MPGQ7KWI9YS5qYSgpPj4zLGI9MT09PWI/YS5vZCgpOjI9PT1iP2EuJGgoKTozPT09Yj9hLldoKCk6ND09PWI/YS5naSgpOjU9PT1iP2EuamEoKTo2PT09Yj9hLm1kKCk6Nz09PWI/YS5VaCgpOm51bGw7cmV0dXJuIGJ9dmFyIGs9YShcIi4vdmVjdG9ydGlsZWZlYXR1cmUuanNcIik7Yi5VPWQ7ZC5wcm90b3R5cGUuZmVhdHVyZT1mdW5jdGlvbihhKXtpZigwPmF8fGE+PXRoaXMuS2IubGVuZ3RoKXRocm93IEVycm9yKFwiZmVhdHVyZSBpbmRleCBvdXQgb2YgYm91bmRzXCIpO3RoaXMuZmIuTD10aGlzLktiW2FdO2E9dGhpcy5mYi5qYSgpK3RoaXMuZmIuTDtyZXR1cm4gbmV3IGsodGhpcy5mYixhLHRoaXMuZXh0ZW50LHRoaXMuTGIsdGhpcy5OYil9fSx7XCIuL3ZlY3RvcnRpbGVmZWF0dXJlLmpzXCI6M31dLFxuNTpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGEsYil7dGhpcy54PWE7dGhpcy55PWJ9Yi5VPWQ7ZC5wcm90b3R5cGU9e2Nsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBkKHRoaXMueCx0aGlzLnkpfSxhZGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2xvbmUoKS52ZihhKX0scm90YXRlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNsb25lKCkuRWYoYSl9LHJvdW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xvbmUoKS5GZigpfSxhbmdsZTpmdW5jdGlvbigpe3JldHVybiBNYXRoLmF0YW4yKHRoaXMueSx0aGlzLngpfSx2ZjpmdW5jdGlvbihhKXt0aGlzLngrPWEueDt0aGlzLnkrPWEueTtyZXR1cm4gdGhpc30sRWY6ZnVuY3Rpb24oYSl7dmFyIGI9TWF0aC5jb3MoYSk7YT1NYXRoLnNpbihhKTt2YXIgZD1hKnRoaXMueCtiKnRoaXMueTt0aGlzLng9Yip0aGlzLngtYSp0aGlzLnk7dGhpcy55PWQ7cmV0dXJuIHRoaXN9LEZmOmZ1bmN0aW9uKCl7dGhpcy54PU1hdGgucm91bmQodGhpcy54KTtcbnRoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7cmV0dXJuIHRoaXN9fTtkLmI9ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBkP2E6QXJyYXkuaXNBcnJheShhKT9uZXcgZChhWzBdLGFbMV0pOmF9fSx7fV19LHt9LFsxXSkoMSl9KX0pKCk7ZnVuY3Rpb24gcGwoYSxiKXtiW2IubGVuZ3RoLTFdLkhiW2EuZ2V0QXR0cmlidXRlKFwia1wiKV09YS5nZXRBdHRyaWJ1dGUoXCJ2XCIpfXZhciBxbD1bbnVsbF0scmw9TyhxbCx7bmQ6ZnVuY3Rpb24oYSxiKXtiW2IubGVuZ3RoLTFdLmxiLnB1c2goYS5nZXRBdHRyaWJ1dGUoXCJyZWZcIikpfSx0YWc6cGx9KTtcbk8ocWwse25vZGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iWzBdLGQ9YltiLmxlbmd0aC0xXSxlPWEuZ2V0QXR0cmlidXRlKFwiaWRcIiksZj1bcGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZShcImxvblwiKSkscGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZShcImxhdFwiKSldO2QuVGdbZV09Zjt2YXIgZz1QKHtIYjp7fX0sc2wsYSxiKTtlYihnLkhiKXx8KGY9bmV3IE1lKGYpLFhoKGYsITEsYyksYz1uZXcgSShmKSxjLiRhKGUpLGMub2EoZy5IYiksZC5mZWF0dXJlcy5wdXNoKGMpKX0sd2F5OmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWJbMF0sZD1hLmdldEF0dHJpYnV0ZShcImlkXCIpLGU9UCh7bGI6W10sSGI6e319LHJsLGEsYiksZj1iW2IubGVuZ3RoLTFdLGc9W10saD0wLGs9ZS5sYi5sZW5ndGg7aDxrO2grKylvYShnLGYuVGdbZS5sYltoXV0pO2UubGJbMF09PWUubGJbZS5sYi5sZW5ndGgtMV0/KGg9bmV3IEIobnVsbCksVGUoaCxcIlhZXCIsZyxbZy5sZW5ndGhdKSk6KGg9bmV3IFMobnVsbCksYmkoaCxcblwiWFlcIixnKSk7WGgoaCwhMSxjKTtjPW5ldyBJKGgpO2MuJGEoZCk7Yy5vYShlLkhiKTtmLmZlYXR1cmVzLnB1c2goYyl9fSk7dmFyIHNsPU8ocWwse3RhZzpwbH0pO2Z1bmN0aW9uIHRsKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFwiaHJlZlwiKX07dmFyIHVsPVtudWxsLFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xXCJdO08odWwse1NlcnZpY2VJZGVudGlmaWNhdGlvbjpMKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sdmwsYSxiKX0pLFNlcnZpY2VQcm92aWRlcjpMKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sd2wsYSxiKX0pLE9wZXJhdGlvbnNNZXRhZGF0YTpMKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30seGwsYSxiKX0pfSk7XG52YXIgeWw9Tyh1bCx7RGVsaXZlcnlQb2ludDpMKFYpLENpdHk6TChWKSxBZG1pbmlzdHJhdGl2ZUFyZWE6TChWKSxQb3N0YWxDb2RlOkwoViksQ291bnRyeTpMKFYpLEVsZWN0cm9uaWNNYWlsQWRkcmVzczpMKFYpfSksemw9Tyh1bCx7VmFsdWU6TGgoZnVuY3Rpb24oYSl7cmV0dXJuIFYoYSl9KX0pLEFsPU8odWwse0FsbG93ZWRWYWx1ZXM6TChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LHpsLGEsYil9KX0pLENsPU8odWwse1Bob25lOkwoZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxCbCxhLGIpfSksQWRkcmVzczpMKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30seWwsYSxiKX0pfSksRWw9Tyh1bCx7SFRUUDpMKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sRGwsYSxiKX0pfSksRGw9Tyh1bCx7R2V0OkxoKGZ1bmN0aW9uKGEsYil7dmFyIGM9dGwoYSk7aWYoYylyZXR1cm4gUCh7aHJlZjpjfSxGbCxhLGIpfSksUG9zdDp2b2lkIDB9KSxHbD1PKHVsLHtEQ1A6TChmdW5jdGlvbihhLFxuYil7cmV0dXJuIFAoe30sRWwsYSxiKX0pfSkseGw9Tyh1bCx7T3BlcmF0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLGQ9UCh7fSxHbCxhLGIpO2QmJihiW2IubGVuZ3RoLTFdW2NdPWQpfX0pLEJsPU8odWwse1ZvaWNlOkwoViksRmFjc2ltaWxlOkwoVil9KSxGbD1PKHVsLHtDb25zdHJhaW50OkxoKGZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO2lmKGMpcmV0dXJuIFAoe25hbWU6Y30sQWwsYSxiKX0pfSksSGw9Tyh1bCx7SW5kaXZpZHVhbE5hbWU6TChWKSxQb3NpdGlvbk5hbWU6TChWKSxDb250YWN0SW5mbzpMKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sQ2wsYSxiKX0pfSksdmw9Tyh1bCx7VGl0bGU6TChWKSxTZXJ2aWNlVHlwZVZlcnNpb246TChWKSxTZXJ2aWNlVHlwZTpMKFYpfSksd2w9Tyh1bCx7UHJvdmlkZXJOYW1lOkwoViksUHJvdmlkZXJTaXRlOkwodGwpLFNlcnZpY2VDb250YWN0OkwoZnVuY3Rpb24oYSxcbmIpe3JldHVybiBQKHt9LEhsLGEsYil9KX0pO2Z1bmN0aW9uIElsKGEpe2E9YT9hOnt9O1VoLmNhbGwodGhpcyk7dGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb249SGIoYS5kZWZhdWx0RGF0YVByb2plY3Rpb24/YS5kZWZhdWx0RGF0YVByb2plY3Rpb246XCJFUFNHOjQzMjZcIil9dChJbCxZaCk7ZnVuY3Rpb24gSmwoYSxiKXt2YXIgYz1bXSxkLGUsZixnO2Y9MDtmb3IoZz1hLmxlbmd0aDtmPGc7KytmKWQ9YVtmXSwwPGYmJmMucG9wKCksMDw9ZD9lPWJbZF06ZT1iW35kXS5zbGljZSgpLnJldmVyc2UoKSxjLnB1c2guYXBwbHkoYyxlKTtkPTA7Zm9yKGU9Yy5sZW5ndGg7ZDxlOysrZCljW2RdPWNbZF0uc2xpY2UoKTtyZXR1cm4gY31mdW5jdGlvbiBLbChhLGIsYyxkLGUpe2E9YS5nZW9tZXRyaWVzO3ZhciBmPVtdLGcsaDtnPTA7Zm9yKGg9YS5sZW5ndGg7ZzxoOysrZylmW2ddPUxsKGFbZ10sYixjLGQsZSk7cmV0dXJuIGZ9XG5mdW5jdGlvbiBMbChhLGIsYyxkLGUpe3ZhciBmPWEudHlwZSxnPU1sW2ZdO2I9XCJQb2ludFwiPT09Znx8XCJNdWx0aVBvaW50XCI9PT1mP2coYSxjLGQpOmcoYSxiKTtjPW5ldyBJO2MueGEoWGgoYiwhMSxlKSk7dm9pZCAwIT09YS5pZCYmYy4kYShhLmlkKTthLnByb3BlcnRpZXMmJmMub2EoYS5wcm9wZXJ0aWVzKTtyZXR1cm4gY31cbklsLnByb3RvdHlwZS5nZD1mdW5jdGlvbihhLGIpe2lmKFwiVG9wb2xvZ3lcIj09YS50eXBlKXt2YXIgYyxkPW51bGwsZT1udWxsO2EudHJhbnNmb3JtJiYoYz1hLnRyYW5zZm9ybSxkPWMuc2NhbGUsZT1jLnRyYW5zbGF0ZSk7dmFyIGY9YS5hcmNzO2lmKGMpe2M9ZDt2YXIgZz1lLGgsaztoPTA7Zm9yKGs9Zi5sZW5ndGg7aDxrOysraCl7dmFyIG0sbixwLHE9ZltoXSx1PWMsRj1nLHo9MCxDPTA7bj0wO2ZvcihtPXEubGVuZ3RoO248bTsrK24pcD1xW25dLHorPXBbMF0sQys9cFsxXSxwWzBdPXoscFsxXT1DLE5sKHAsdSxGKX19Yz1bXTtnPWRiKGEub2JqZWN0cyk7aD0wO2ZvcihrPWcubGVuZ3RoO2g8azsrK2gpXCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09PWdbaF0udHlwZT8obT1nW2hdLGMucHVzaC5hcHBseShjLEtsKG0sZixkLGUsYikpKToobT1nW2hdLGMucHVzaChMbChtLGYsZCxlLGIpKSk7cmV0dXJuIGN9cmV0dXJuW119O1xuZnVuY3Rpb24gTmwoYSxiLGMpe2FbMF09YVswXSpiWzBdK2NbMF07YVsxXT1hWzFdKmJbMV0rY1sxXX1JbC5wcm90b3R5cGUubGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb259O1xudmFyIE1sPXtQb2ludDpmdW5jdGlvbihhLGIsYyl7YT1hLmNvb3JkaW5hdGVzO2ImJmMmJk5sKGEsYixjKTtyZXR1cm4gbmV3IE1lKGEpfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9SmwoYS5hcmNzLGIpO3JldHVybiBuZXcgUyhjKX0sUG9seWdvbjpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQsZTtkPTA7Zm9yKGU9YS5hcmNzLmxlbmd0aDtkPGU7KytkKWNbZF09SmwoYS5hcmNzW2RdLGIpO3JldHVybiBuZXcgQihjKX0sTXVsdGlQb2ludDpmdW5jdGlvbihhLGIsYyl7YT1hLmNvb3JkaW5hdGVzO3ZhciBkLGU7aWYoYiYmYylmb3IoZD0wLGU9YS5sZW5ndGg7ZDxlOysrZClObChhW2RdLGIsYyk7cmV0dXJuIG5ldyBmaShhKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZCxlO2Q9MDtmb3IoZT1hLmFyY3MubGVuZ3RoO2Q8ZTsrK2QpY1tkXT1KbChhLmFyY3NbZF0sYik7cmV0dXJuIG5ldyBjaShjKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz1bXSxkLGUsZixnLGgsaztoPTA7Zm9yKGs9YS5hcmNzLmxlbmd0aDtoPGs7KytoKXtkPWEuYXJjc1toXTtlPVtdO2Y9MDtmb3IoZz1kLmxlbmd0aDtmPGc7KytmKWVbZl09SmwoZFtmXSxiKTtjW2hdPWV9cmV0dXJuIG5ldyBoaShjKX19O0lsLnByb3RvdHlwZS5zYj1mdW5jdGlvbigpe307SWwucHJvdG90eXBlLnZkPWZ1bmN0aW9uKCl7fTtJbC5wcm90b3R5cGUuWmE9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIE9sKGEpe2E9YT9hOnt9O3RoaXMuYz1hLmZlYXR1cmVUeXBlO3RoaXMuZj1hLmZlYXR1cmVOUzt0aGlzLmI9YS5nbWxGb3JtYXQ/YS5nbWxGb3JtYXQ6bmV3IFk7emkuY2FsbCh0aGlzKX10KE9sLHppKTt2YXIgUGw9e1wiMS4xLjBcIjpcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L3dmcy8xLjEuMC93ZnMueHNkXCIsXCIxLjAuMFwiOlwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnMgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvd2ZzLzEuMC4wL3dmcy54c2RcIn07XG5PbC5wcm90b3R5cGUuZmQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz17ZmVhdHVyZVR5cGU6dGhpcy5jLGZlYXR1cmVOUzp0aGlzLmZ9O2JiKGMsVmgodGhpcyxhLGI/Yjp7fSkpO2M9W2NdO3RoaXMuYi5iW1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIl0uZmVhdHVyZU1lbWJlcj1KKFUucHJvdG90eXBlLkdiKTsoYz1QKFtdLHRoaXMuYi5iLGEsYyx0aGlzLmIpKXx8KGM9W10pO3JldHVybiBjfTtPbC5wcm90b3R5cGUuZz1mdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgRG9jdW1lbnQpcmV0dXJuIFFsKGEpO2lmKGEgaW5zdGFuY2VvZiBOb2RlKXJldHVybiBQKHt9LFJsLGEsW10pO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYT1LaChhKSxRbChhKX07XG52YXIgU2w9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnNcIjp7dG90YWxJbnNlcnRlZDpMKEppKSx0b3RhbFVwZGF0ZWQ6TChKaSksdG90YWxEZWxldGVkOkwoSmkpfX0sVGw9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2NcIjp7RmVhdHVyZUlkOkooZnVuY3Rpb24oYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlKFwiZmlkXCIpfSl9fSxVbD17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dmc1wiOntGZWF0dXJlOmZ1bmN0aW9uKGEsYil7UmgoVGwsYSxiKX19fSxSbD17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dmc1wiOntUcmFuc2FjdGlvblN1bW1hcnk6TChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LFNsLGEsYil9LFwidHJhbnNhY3Rpb25TdW1tYXJ5XCIpLEluc2VydFJlc3VsdHM6TChmdW5jdGlvbihhLGIpe3JldHVybiBQKFtdLFVsLGEsYil9LFwiaW5zZXJ0SWRzXCIpfX07XG5mdW5jdGlvbiBRbChhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZT09Tm9kZS5FTEVNRU5UX05PREUpcmV0dXJuIFAoe30sUmwsYSxbXSl9ZnVuY3Rpb24gVmwoYSxiKXt2YXIgYz1IaChcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb2djXCIsXCJGaWx0ZXJcIiksZD1IaChcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb2djXCIsXCJGZWF0dXJlSWRcIik7Yy5hcHBlbmRDaGlsZChkKTtkLnNldEF0dHJpYnV0ZShcImZpZFwiLGIpO2EuYXBwZW5kQ2hpbGQoYyl9XG52YXIgV2w9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnNcIjp7SW5zZXJ0Ok0oZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLmdtbFZlcnNpb24sZD1IaChkLmZlYXR1cmVOUyxkLmZlYXR1cmVUeXBlKTthLmFwcGVuZENoaWxkKGQpO2lmKDI9PT1lKXt2YXIgZj1XaS5wcm90b3R5cGU7KGE9Yi5hKSYmZC5zZXRBdHRyaWJ1dGUoXCJmaWRcIixhKTthPWNbYy5sZW5ndGgtMV07dmFyIGU9YS5mZWF0dXJlTlMsZz1iLmM7YS53YXx8KGEud2E9e30sYS53YVtlXT17fSk7dmFyIGg9Yi5GYSgpO2I9W107dmFyIGs9W10sbTtmb3IobSBpbiBoKXt2YXIgbj1oW21dO251bGwhPT1uJiYoYi5wdXNoKG0pLGsucHVzaChuKSxtPT1nfHxuIGluc3RhbmNlb2YgcmU/bSBpbiBhLndhW2VdfHwoYS53YVtlXVttXT1NKGYuZWUsZikpOm0gaW4gYS53YVtlXXx8KGEud2FbZV1bbV09TShXKSkpfW09YmIoe30sYSl9ZWxzZXttPVkucHJvdG90eXBlOyhhPWIuYSkmJmQuc2V0QXR0cmlidXRlKFwiZmlkXCIsXG5hKTthPWNbYy5sZW5ndGgtMV07ZT1hLmZlYXR1cmVOUztnPWIuYzthLndhfHwoYS53YT17fSxhLndhW2VdPXt9KTtoPWIuRmEoKTtiPVtdO2s9W107Zm9yKGYgaW4gaCluPWhbZl0sbnVsbCE9PW4mJihiLnB1c2goZiksay5wdXNoKG4pLGY9PWd8fG4gaW5zdGFuY2VvZiByZT9mIGluIGEud2FbZV18fChhLndhW2VdW2ZdPU0obS5tZSxtKSk6ZiBpbiBhLndhW2VdfHwoYS53YVtlXVtmXT1NKFcpKSk7bT1iYih7fSxhKX1tLm5vZGU9ZDtSKG0sYS53YSxOaCh2b2lkIDAsZSksayxjLGIpfSksVXBkYXRlOk0oZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV07eCh2b2lkIDAhPT1iLmEsMjcpO3ZhciBlPWQuZmVhdHVyZVR5cGUsZj1kLmZlYXR1cmVQcmVmaXgsZj1mP2Y6XCJmZWF0dXJlXCIsZz1kLmZlYXR1cmVOUzthLnNldEF0dHJpYnV0ZShcInR5cGVOYW1lXCIsZitcIjpcIitlKTthLnNldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIixcInhtbG5zOlwiK1xuZixnKTtlPWIuYTtpZih2b2lkIDAhPT1lKXtmb3IodmFyIGY9T2JqZWN0LmtleXMoYi5LKSxnPVtdLGg9MCxrPWYubGVuZ3RoO2g8aztoKyspe3ZhciBtPWIuZ2V0KGZbaF0pO3ZvaWQgMCE9PW0mJmcucHVzaCh7bmFtZTpmW2hdLHZhbHVlOm19KX1SKHtnbWxWZXJzaW9uOmQuZ21sVmVyc2lvbixub2RlOmEsc3JzTmFtZTpkLnNyc05hbWV9LFdsLE5oKFwiUHJvcGVydHlcIiksZyxjKTtWbChhLGUpfX0pLERlbGV0ZTpNKGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdO3godm9pZCAwIT09Yi5hLDI2KTtjPWQuZmVhdHVyZVR5cGU7dmFyIGU9ZC5mZWF0dXJlUHJlZml4LGU9ZT9lOlwiZmVhdHVyZVwiLGQ9ZC5mZWF0dXJlTlM7YS5zZXRBdHRyaWJ1dGUoXCJ0eXBlTmFtZVwiLGUrXCI6XCIrYyk7YS5zZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCIsXCJ4bWxuczpcIitlLGQpO2I9Yi5hO3ZvaWQgMCE9PWImJlZsKGEsYil9KSxQcm9wZXJ0eTpNKGZ1bmN0aW9uKGEsXG5iLGMpe3ZhciBkPUhoKFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnNcIixcIk5hbWVcIiksZT1jW2MubGVuZ3RoLTFdLmdtbFZlcnNpb247YS5hcHBlbmRDaGlsZChkKTtXKGQsYi5uYW1lKTt2b2lkIDAhPT1iLnZhbHVlJiZudWxsIT09Yi52YWx1ZSYmKGQ9SGgoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dmc1wiLFwiVmFsdWVcIiksYS5hcHBlbmRDaGlsZChkKSxiLnZhbHVlIGluc3RhbmNlb2YgcmU/Mj09PWU/V2kucHJvdG90eXBlLmVlKGQsYi52YWx1ZSxjKTpZLnByb3RvdHlwZS5tZShkLGIudmFsdWUsYyk6VyhkLGIudmFsdWUpKX0pLE5hdGl2ZTpNKGZ1bmN0aW9uKGEsYil7Yi54aSYmYS5zZXRBdHRyaWJ1dGUoXCJ2ZW5kb3JJZFwiLGIueGkpO3ZvaWQgMCE9PWIubWkmJmEuc2V0QXR0cmlidXRlKFwic2FmZVRvSWdub3JlXCIsYi5taSk7dm9pZCAwIT09Yi52YWx1ZSYmVyhhLGIudmFsdWUpfSl9fTtcbk9sLnByb3RvdHlwZS5pPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPVtdLGY9SGgoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dmc1wiLFwiVHJhbnNhY3Rpb25cIiksZz1kLnZlcnNpb24/ZC52ZXJzaW9uOlwiMS4xLjBcIixoPVwiMS4wLjBcIj09PWc/MjozO2Yuc2V0QXR0cmlidXRlKFwic2VydmljZVwiLFwiV0ZTXCIpO2Yuc2V0QXR0cmlidXRlKFwidmVyc2lvblwiLGcpO3ZhciBrO2QmJihrPWQuZ21sT3B0aW9ucz9kLmdtbE9wdGlvbnM6e30sZC5oYW5kbGUmJmYuc2V0QXR0cmlidXRlKFwiaGFuZGxlXCIsZC5oYW5kbGUpKTtmLnNldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2VcIixcInhzaTpzY2hlbWFMb2NhdGlvblwiLFBsW2ddKTthJiYoZz17bm9kZTpmLGZlYXR1cmVOUzpkLmZlYXR1cmVOUyxmZWF0dXJlVHlwZTpkLmZlYXR1cmVUeXBlLGZlYXR1cmVQcmVmaXg6ZC5mZWF0dXJlUHJlZml4LGdtbFZlcnNpb246aCxzcnNOYW1lOmQuc3JzTmFtZX0sYmIoZyxcbmspLFIoZyxXbCxOaChcIkluc2VydFwiKSxhLGUpKTtiJiYoZz17bm9kZTpmLGZlYXR1cmVOUzpkLmZlYXR1cmVOUyxmZWF0dXJlVHlwZTpkLmZlYXR1cmVUeXBlLGZlYXR1cmVQcmVmaXg6ZC5mZWF0dXJlUHJlZml4LGdtbFZlcnNpb246aCxzcnNOYW1lOmQuc3JzTmFtZX0sYmIoZyxrKSxSKGcsV2wsTmgoXCJVcGRhdGVcIiksYixlKSk7YyYmUih7bm9kZTpmLGZlYXR1cmVOUzpkLmZlYXR1cmVOUyxmZWF0dXJlVHlwZTpkLmZlYXR1cmVUeXBlLGZlYXR1cmVQcmVmaXg6ZC5mZWF0dXJlUHJlZml4LGdtbFZlcnNpb246aCxzcnNOYW1lOmQuc3JzTmFtZX0sV2wsTmgoXCJEZWxldGVcIiksYyxlKTtkLm5hdGl2ZUVsZW1lbnRzJiZSKHtub2RlOmYsZmVhdHVyZU5TOmQuZmVhdHVyZU5TLGZlYXR1cmVUeXBlOmQuZmVhdHVyZVR5cGUsZmVhdHVyZVByZWZpeDpkLmZlYXR1cmVQcmVmaXgsZ21sVmVyc2lvbjpoLHNyc05hbWU6ZC5zcnNOYW1lfSxXbCxOaChcIk5hdGl2ZVwiKSxkLm5hdGl2ZUVsZW1lbnRzLFxuZSk7cmV0dXJuIGZ9O09sLnByb3RvdHlwZS5rZD1mdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZT09Tm9kZS5FTEVNRU5UX05PREUpcmV0dXJuIHRoaXMuamMoYSk7cmV0dXJuIG51bGx9O09sLnByb3RvdHlwZS5qYz1mdW5jdGlvbihhKXtpZihhLmZpcnN0RWxlbWVudENoaWxkJiZhLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkKWZvcihhPWEuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQsYT1hLmZpcnN0RWxlbWVudENoaWxkO2E7YT1hLm5leHRFbGVtZW50U2libGluZylpZigwIT09YS5jaGlsZE5vZGVzLmxlbmd0aCYmKDEhPT1hLmNoaWxkTm9kZXMubGVuZ3RofHwzIT09YS5maXJzdENoaWxkLm5vZGVUeXBlKSl7dmFyIGI9W3t9XTtEaSh0aGlzLmIsYSxiKTtyZXR1cm4gSGIoYi5wb3AoKS5zcnNOYW1lKX1yZXR1cm4gbnVsbH07ZnVuY3Rpb24gWGwoYSl7YT1hP2E6e307VWguY2FsbCh0aGlzKTt0aGlzLmI9dm9pZCAwIT09YS5zcGxpdENvbGxlY3Rpb24/YS5zcGxpdENvbGxlY3Rpb246ITF9dChYbCxGaik7ZnVuY3Rpb24gWWwoYSl7YT1hLkQoKTtyZXR1cm4gYS5sZW5ndGg/YS5qb2luKFwiIFwiKTpcIlwifWZ1bmN0aW9uIFpsKGEpe2E9YS5EKCk7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKGFbY10uam9pbihcIiBcIikpO3JldHVybiBiLmpvaW4oXCIsXCIpfWZ1bmN0aW9uICRsKGEpe3ZhciBiPVtdO2E9V2UoYSk7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWIucHVzaChcIihcIitabChhW2NdKStcIilcIik7cmV0dXJuIGIuam9pbihcIixcIil9XG5mdW5jdGlvbiBIaihhKXt2YXIgYj1hLkgoKSxjPSgwLGFtW2JdKShhKSxiPWIudG9VcHBlckNhc2UoKTtpZihhIGluc3RhbmNlb2YgdGUpe2E9YS5YO3ZhciBkPVwiXCI7aWYoXCJYWVpcIj09PWF8fFwiWFlaTVwiPT09YSlkKz1cIlpcIjtpZihcIlhZTVwiPT09YXx8XCJYWVpNXCI9PT1hKWQrPVwiTVwiO2E9ZDswPGEubGVuZ3RoJiYoYis9XCIgXCIrYSl9cmV0dXJuIGMubGVuZ3RoP2IrXCIoXCIrYytcIilcIjpiK1wiIEVNUFRZXCJ9XG52YXIgYW09e1BvaW50OllsLExpbmVTdHJpbmc6WmwsUG9seWdvbjokbCxNdWx0aVBvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2E9Z2koYSk7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWIucHVzaChcIihcIitZbChhW2NdKStcIilcIik7cmV0dXJuIGIuam9pbihcIixcIil9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj1bXTthPWEuaGIoKTtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKFwiKFwiK1psKGFbY10pK1wiKVwiKTtyZXR1cm4gYi5qb2luKFwiLFwiKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPVtdO2E9amkoYSk7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWIucHVzaChcIihcIiskbChhW2NdKStcIilcIik7cmV0dXJuIGIuam9pbihcIixcIil9LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihhKXt2YXIgYj1bXTthPXNpKGEuYSk7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWIucHVzaChIaihhW2NdKSk7cmV0dXJuIGIuam9pbihcIixcIil9fTtcbmZ1bmN0aW9uIEdqKGEsYil7dmFyIGM7Yz1uZXcgYm0obmV3IGNtKGEpKTtkbShjKTtyZXR1cm4oYz1lbShjKSk/WGgoYywhMSxiKTpudWxsfWZ1bmN0aW9uIGNtKGEpe3RoaXMuZj1hO3RoaXMuYj0tMX1cbmZ1bmN0aW9uIGZtKGEpe3ZhciBiPWEuZi5jaGFyQXQoKythLmIpLGM9e3Bvc2l0aW9uOmEuYix2YWx1ZTpifTtpZihcIihcIj09YiljLnR5cGU9MjtlbHNlIGlmKFwiLFwiPT1iKWMudHlwZT01O2Vsc2UgaWYoXCIpXCI9PWIpYy50eXBlPTM7ZWxzZSBpZihcIjBcIjw9YiYmXCI5XCI+PWJ8fFwiLlwiPT1ifHxcIi1cIj09Yil7Yy50eXBlPTQ7dmFyIGQsYj1hLmIsZT0hMSxmPSExO2Rve2lmKFwiLlwiPT1kKWU9ITA7ZWxzZSBpZihcImVcIj09ZHx8XCJFXCI9PWQpZj0hMDtkPWEuZi5jaGFyQXQoKythLmIpfXdoaWxlKFwiMFwiPD1kJiZcIjlcIj49ZHx8XCIuXCI9PWQmJih2b2lkIDA9PT1lfHwhZSl8fCFmJiYoXCJlXCI9PWR8fFwiRVwiPT1kKXx8ZiYmKFwiLVwiPT1kfHxcIitcIj09ZCkpO2E9cGFyc2VGbG9hdChhLmYuc3Vic3RyaW5nKGIsYS5iLS0pKTtjLnZhbHVlPWF9ZWxzZSBpZihcImFcIjw9YiYmXCJ6XCI+PWJ8fFwiQVwiPD1iJiZcIlpcIj49Yil7Yy50eXBlPTE7Yj1hLmI7ZG8gZD1hLmYuY2hhckF0KCsrYS5iKTt3aGlsZShcImFcIjw9ZCYmXCJ6XCI+PVxuZHx8XCJBXCI8PWQmJlwiWlwiPj1kKTthPWEuZi5zdWJzdHJpbmcoYixhLmItLSkudG9VcHBlckNhc2UoKTtjLnZhbHVlPWF9ZWxzZXtpZihcIiBcIj09Ynx8XCJcXHRcIj09Ynx8XCJcXHJcIj09Ynx8XCJcXG5cIj09YilyZXR1cm4gZm0oYSk7aWYoXCJcIj09PWIpYy50eXBlPTY7ZWxzZSB0aHJvdyBFcnJvcihcIlVuZXhwZWN0ZWQgY2hhcmFjdGVyOiBcIitiKTt9cmV0dXJuIGN9ZnVuY3Rpb24gYm0oYSl7dGhpcy5hPWE7dGhpcy5mPVwiWFlcIn1mdW5jdGlvbiBkbShhKXthLmI9Zm0oYS5hKX1mdW5jdGlvbiBnbShhLGIpe3ZhciBjPWEuYi50eXBlPT1iO2MmJmRtKGEpO3JldHVybiBjfVxuZnVuY3Rpb24gZW0oYSl7dmFyIGI9YS5iO2lmKGdtKGEsMSkpe3ZhciBiPWIudmFsdWUsYz1cIlhZXCIsZD1hLmI7MT09YS5iLnR5cGUmJihkPWQudmFsdWUsXCJaXCI9PT1kP2M9XCJYWVpcIjpcIk1cIj09PWQ/Yz1cIlhZTVwiOlwiWk1cIj09PWQmJihjPVwiWFlaTVwiKSxcIlhZXCIhPT1jJiZkbShhKSk7YS5mPWM7aWYoXCJHRU9NRVRSWUNPTExFQ1RJT05cIj09Yil7YTp7aWYoZ20oYSwyKSl7Yj1bXTtkbyBiLnB1c2goZW0oYSkpO3doaWxlKGdtKGEsNSkpO2lmKGdtKGEsMykpe2E9YjticmVhayBhfX1lbHNlIGlmKGhtKGEpKXthPVtdO2JyZWFrIGF9dGhyb3cgRXJyb3IoaW0oYSkpO31yZXR1cm4gbmV3IHFpKGEpfWQ9am1bYl07Yz1rbVtiXTtpZighZHx8IWMpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGdlb21ldHJ5IHR5cGU6IFwiK2IpO2I9ZC5jYWxsKGEpO3JldHVybiBuZXcgYyhiLGEuZil9dGhyb3cgRXJyb3IoaW0oYSkpO31sPWJtLnByb3RvdHlwZTtcbmwuZGQ9ZnVuY3Rpb24oKXtpZihnbSh0aGlzLDIpKXt2YXIgYT1sbSh0aGlzKTtpZihnbSh0aGlzLDMpKXJldHVybiBhfWVsc2UgaWYoaG0odGhpcykpcmV0dXJuIG51bGw7dGhyb3cgRXJyb3IoaW0odGhpcykpO307bC5jZD1mdW5jdGlvbigpe2lmKGdtKHRoaXMsMikpe3ZhciBhPW1tKHRoaXMpO2lmKGdtKHRoaXMsMykpcmV0dXJuIGF9ZWxzZSBpZihobSh0aGlzKSlyZXR1cm5bXTt0aHJvdyBFcnJvcihpbSh0aGlzKSk7fTtsLmVkPWZ1bmN0aW9uKCl7aWYoZ20odGhpcywyKSl7dmFyIGE9bm0odGhpcyk7aWYoZ20odGhpcywzKSlyZXR1cm4gYX1lbHNlIGlmKGhtKHRoaXMpKXJldHVybltdO3Rocm93IEVycm9yKGltKHRoaXMpKTt9O1xubC5KaD1mdW5jdGlvbigpe2lmKGdtKHRoaXMsMikpe3ZhciBhO2lmKDI9PXRoaXMuYi50eXBlKWZvcihhPVt0aGlzLmRkKCldO2dtKHRoaXMsNSk7KWEucHVzaCh0aGlzLmRkKCkpO2Vsc2UgYT1tbSh0aGlzKTtpZihnbSh0aGlzLDMpKXJldHVybiBhfWVsc2UgaWYoaG0odGhpcykpcmV0dXJuW107dGhyb3cgRXJyb3IoaW0odGhpcykpO307bC5JaD1mdW5jdGlvbigpe2lmKGdtKHRoaXMsMikpe3ZhciBhPW5tKHRoaXMpO2lmKGdtKHRoaXMsMykpcmV0dXJuIGF9ZWxzZSBpZihobSh0aGlzKSlyZXR1cm5bXTt0aHJvdyBFcnJvcihpbSh0aGlzKSk7fTtsLktoPWZ1bmN0aW9uKCl7aWYoZ20odGhpcywyKSl7Zm9yKHZhciBhPVt0aGlzLmVkKCldO2dtKHRoaXMsNSk7KWEucHVzaCh0aGlzLmVkKCkpO2lmKGdtKHRoaXMsMykpcmV0dXJuIGF9ZWxzZSBpZihobSh0aGlzKSlyZXR1cm5bXTt0aHJvdyBFcnJvcihpbSh0aGlzKSk7fTtcbmZ1bmN0aW9uIGxtKGEpe2Zvcih2YXIgYj1bXSxjPWEuZi5sZW5ndGgsZD0wO2Q8YzsrK2Qpe3ZhciBlPWEuYjtpZihnbShhLDQpKWIucHVzaChlLnZhbHVlKTtlbHNlIGJyZWFrfWlmKGIubGVuZ3RoPT1jKXJldHVybiBiO3Rocm93IEVycm9yKGltKGEpKTt9ZnVuY3Rpb24gbW0oYSl7Zm9yKHZhciBiPVtsbShhKV07Z20oYSw1KTspYi5wdXNoKGxtKGEpKTtyZXR1cm4gYn1mdW5jdGlvbiBubShhKXtmb3IodmFyIGI9W2EuY2QoKV07Z20oYSw1KTspYi5wdXNoKGEuY2QoKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gaG0oYSl7dmFyIGI9MT09YS5iLnR5cGUmJlwiRU1QVFlcIj09YS5iLnZhbHVlO2ImJmRtKGEpO3JldHVybiBifWZ1bmN0aW9uIGltKGEpe3JldHVyblwiVW5leHBlY3RlZCBgXCIrYS5iLnZhbHVlK1wiYCBhdCBwb3NpdGlvbiBcIithLmIucG9zaXRpb24rXCIgaW4gYFwiK2EuYS5mK1wiYFwifVxudmFyIGttPXtQT0lOVDpNZSxMSU5FU1RSSU5HOlMsUE9MWUdPTjpCLE1VTFRJUE9JTlQ6ZmksTVVMVElMSU5FU1RSSU5HOmNpLE1VTFRJUE9MWUdPTjpoaX0sam09e1BPSU5UOmJtLnByb3RvdHlwZS5kZCxMSU5FU1RSSU5HOmJtLnByb3RvdHlwZS5jZCxQT0xZR09OOmJtLnByb3RvdHlwZS5lZCxNVUxUSVBPSU5UOmJtLnByb3RvdHlwZS5KaCxNVUxUSUxJTkVTVFJJTkc6Ym0ucHJvdG90eXBlLkloLE1VTFRJUE9MWUdPTjpibS5wcm90b3R5cGUuS2h9O2Z1bmN0aW9uIG9tKGEsYil7cmV0dXJuIFAoe30scG0sYSxiKX1mdW5jdGlvbiBxbShhLGIpe3JldHVybiBQKHt9LHJtLGEsYil9ZnVuY3Rpb24gc20oYSxiKXt2YXIgYz1vbShhLGIpO2lmKGMpe3ZhciBkPVtLaShhLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpKSxLaShhLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSldO2Muc2l6ZT1kO3JldHVybiBjfX1mdW5jdGlvbiB0bShhLGIpe3JldHVybiBQKFtdLHVtLGEsYil9dmFyIHZtPVtudWxsLFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93bXNcIl07Tyh2bSx7U2VydmljZTpMKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sd20sYSxiKX0pLENhcGFiaWxpdHk6TChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LHhtLGEsYil9KX0pO1xudmFyIHhtPU8odm0se1JlcXVlc3Q6TChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LHltLGEsYil9KSxFeGNlcHRpb246TChmdW5jdGlvbihhLGIpe3JldHVybiBQKFtdLHptLGEsYil9KSxMYXllcjpMKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sQW0sYSxiKX0pfSksd209Tyh2bSx7TmFtZTpMKFYpLFRpdGxlOkwoViksQWJzdHJhY3Q6TChWKSxLZXl3b3JkTGlzdDpMKHRtKSxPbmxpbmVSZXNvdXJjZTpMKHRsKSxDb250YWN0SW5mb3JtYXRpb246TChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LEJtLGEsYil9KSxGZWVzOkwoViksQWNjZXNzQ29uc3RyYWludHM6TChWKSxMYXllckxpbWl0OkwoSmkpLE1heFdpZHRoOkwoSmkpLE1heEhlaWdodDpMKEppKX0pLEJtPU8odm0se0NvbnRhY3RQZXJzb25QcmltYXJ5OkwoZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxDbSxhLGIpfSksQ29udGFjdFBvc2l0aW9uOkwoViksQ29udGFjdEFkZHJlc3M6TChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LFxuRG0sYSxiKX0pLENvbnRhY3RWb2ljZVRlbGVwaG9uZTpMKFYpLENvbnRhY3RGYWNzaW1pbGVUZWxlcGhvbmU6TChWKSxDb250YWN0RWxlY3Ryb25pY01haWxBZGRyZXNzOkwoVil9KSxDbT1PKHZtLHtDb250YWN0UGVyc29uOkwoViksQ29udGFjdE9yZ2FuaXphdGlvbjpMKFYpfSksRG09Tyh2bSx7QWRkcmVzc1R5cGU6TChWKSxBZGRyZXNzOkwoViksQ2l0eTpMKFYpLFN0YXRlT3JQcm92aW5jZTpMKFYpLFBvc3RDb2RlOkwoViksQ291bnRyeTpMKFYpfSksem09Tyh2bSx7Rm9ybWF0OkooVil9KSxBbT1PKHZtLHtOYW1lOkwoViksVGl0bGU6TChWKSxBYnN0cmFjdDpMKFYpLEtleXdvcmRMaXN0OkwodG0pLENSUzpMaChWKSxFWF9HZW9ncmFwaGljQm91bmRpbmdCb3g6TChmdW5jdGlvbihhLGIpe3ZhciBjPVAoe30sRW0sYSxiKTtpZihjKXt2YXIgZD1jLndlc3RCb3VuZExvbmdpdHVkZSxlPWMuc291dGhCb3VuZExhdGl0dWRlLGY9Yy5lYXN0Qm91bmRMb25naXR1ZGUsYz1jLm5vcnRoQm91bmRMYXRpdHVkZTtcbmlmKHZvaWQgMCE9PWQmJnZvaWQgMCE9PWUmJnZvaWQgMCE9PWYmJnZvaWQgMCE9PWMpcmV0dXJuW2QsZSxmLGNdfX0pLEJvdW5kaW5nQm94OkxoKGZ1bmN0aW9uKGEpe3ZhciBiPVtJaShhLmdldEF0dHJpYnV0ZShcIm1pbnhcIikpLElpKGEuZ2V0QXR0cmlidXRlKFwibWlueVwiKSksSWkoYS5nZXRBdHRyaWJ1dGUoXCJtYXh4XCIpKSxJaShhLmdldEF0dHJpYnV0ZShcIm1heHlcIikpXSxjPVtJaShhLmdldEF0dHJpYnV0ZShcInJlc3hcIikpLElpKGEuZ2V0QXR0cmlidXRlKFwicmVzeVwiKSldO3JldHVybntjcnM6YS5nZXRBdHRyaWJ1dGUoXCJDUlNcIiksZXh0ZW50OmIscmVzOmN9fSksRGltZW5zaW9uOkxoKGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmEuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSx1bml0czphLmdldEF0dHJpYnV0ZShcInVuaXRzXCIpLHVuaXRTeW1ib2w6YS5nZXRBdHRyaWJ1dGUoXCJ1bml0U3ltYm9sXCIpLFwiZGVmYXVsdFwiOmEuZ2V0QXR0cmlidXRlKFwiZGVmYXVsdFwiKSxtdWx0aXBsZVZhbHVlczpGaShhLmdldEF0dHJpYnV0ZShcIm11bHRpcGxlVmFsdWVzXCIpKSxcbm5lYXJlc3RWYWx1ZTpGaShhLmdldEF0dHJpYnV0ZShcIm5lYXJlc3RWYWx1ZVwiKSksY3VycmVudDpGaShhLmdldEF0dHJpYnV0ZShcImN1cnJlbnRcIikpLHZhbHVlczpWKGEpfX0pLEF0dHJpYnV0aW9uOkwoZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxGbSxhLGIpfSksQXV0aG9yaXR5VVJMOkxoKGZ1bmN0aW9uKGEsYil7dmFyIGM9b20oYSxiKTtpZihjKXJldHVybiBjLm5hbWU9YS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLGN9KSxJZGVudGlmaWVyOkxoKFYpLE1ldGFkYXRhVVJMOkxoKGZ1bmN0aW9uKGEsYil7dmFyIGM9b20oYSxiKTtpZihjKXJldHVybiBjLnR5cGU9YS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpLGN9KSxEYXRhVVJMOkxoKG9tKSxGZWF0dXJlTGlzdFVSTDpMaChvbSksU3R5bGU6TGgoZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxHbSxhLGIpfSksTWluU2NhbGVEZW5vbWluYXRvcjpMKEhpKSxNYXhTY2FsZURlbm9taW5hdG9yOkwoSGkpLExheWVyOkxoKGZ1bmN0aW9uKGEsXG5iKXt2YXIgYz1iW2IubGVuZ3RoLTFdLGQ9UCh7fSxBbSxhLGIpO2lmKGQpe3ZhciBlPUZpKGEuZ2V0QXR0cmlidXRlKFwicXVlcnlhYmxlXCIpKTt2b2lkIDA9PT1lJiYoZT1jLnF1ZXJ5YWJsZSk7ZC5xdWVyeWFibGU9dm9pZCAwIT09ZT9lOiExO2U9S2koYS5nZXRBdHRyaWJ1dGUoXCJjYXNjYWRlZFwiKSk7dm9pZCAwPT09ZSYmKGU9Yy5jYXNjYWRlZCk7ZC5jYXNjYWRlZD1lO2U9RmkoYS5nZXRBdHRyaWJ1dGUoXCJvcGFxdWVcIikpO3ZvaWQgMD09PWUmJihlPWMub3BhcXVlKTtkLm9wYXF1ZT12b2lkIDAhPT1lP2U6ITE7ZT1GaShhLmdldEF0dHJpYnV0ZShcIm5vU3Vic2V0c1wiKSk7dm9pZCAwPT09ZSYmKGU9Yy5ub1N1YnNldHMpO2Qubm9TdWJzZXRzPXZvaWQgMCE9PWU/ZTohMTsoZT1JaShhLmdldEF0dHJpYnV0ZShcImZpeGVkV2lkdGhcIikpKXx8KGU9Yy5maXhlZFdpZHRoKTtkLmZpeGVkV2lkdGg9ZTsoZT1JaShhLmdldEF0dHJpYnV0ZShcImZpeGVkSGVpZ2h0XCIpKSl8fChlPWMuZml4ZWRIZWlnaHQpO1xuZC5maXhlZEhlaWdodD1lO1tcIlN0eWxlXCIsXCJDUlNcIixcIkF1dGhvcml0eVVSTFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EgaW4gYyYmKGRbYV09KGRbYV18fFtdKS5jb25jYXQoY1thXSkpfSk7XCJFWF9HZW9ncmFwaGljQm91bmRpbmdCb3ggQm91bmRpbmdCb3ggRGltZW5zaW9uIEF0dHJpYnV0aW9uIE1pblNjYWxlRGVub21pbmF0b3IgTWF4U2NhbGVEZW5vbWluYXRvclwiLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EgaW4gZHx8KGRbYV09Y1thXSl9KTtyZXR1cm4gZH19KX0pLEZtPU8odm0se1RpdGxlOkwoViksT25saW5lUmVzb3VyY2U6TCh0bCksTG9nb1VSTDpMKHNtKX0pLEVtPU8odm0se3dlc3RCb3VuZExvbmdpdHVkZTpMKEhpKSxlYXN0Qm91bmRMb25naXR1ZGU6TChIaSksc291dGhCb3VuZExhdGl0dWRlOkwoSGkpLG5vcnRoQm91bmRMYXRpdHVkZTpMKEhpKX0pLHltPU8odm0se0dldENhcGFiaWxpdGllczpMKHFtKSxHZXRNYXA6TChxbSksR2V0RmVhdHVyZUluZm86TChxbSl9KSxcbnJtPU8odm0se0Zvcm1hdDpMaChWKSxEQ1BUeXBlOkxoKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sSG0sYSxiKX0pfSksSG09Tyh2bSx7SFRUUDpMKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sSW0sYSxiKX0pfSksSW09Tyh2bSx7R2V0Okwob20pLFBvc3Q6TChvbSl9KSxHbT1PKHZtLHtOYW1lOkwoViksVGl0bGU6TChWKSxBYnN0cmFjdDpMKFYpLExlZ2VuZFVSTDpMaChzbSksU3R5bGVTaGVldFVSTDpMKG9tKSxTdHlsZVVSTDpMKG9tKX0pLHBtPU8odm0se0Zvcm1hdDpMKFYpLE9ubGluZVJlc291cmNlOkwodGwpfSksdW09Tyh2bSx7S2V5d29yZDpKKFYpfSk7ZnVuY3Rpb24gSm0oYSl7dmFyIGI9VihhKS5zcGxpdChcIiBcIik7aWYoYiYmMj09Yi5sZW5ndGgmJihhPStiWzBdLGI9K2JbMV0sIWlzTmFOKGEpJiYhaXNOYU4oYikpKXJldHVyblthLGJdfXZhciBLbT1bbnVsbCxcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd210cy8xLjBcIl0sTG09W251bGwsXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L293cy8xLjFcIl07TyhLbSx7Q29udGVudHM6TChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LE1tLGEsYil9KX0pO1xudmFyIE1tPU8oS20se0xheWVyOkxoKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sTm0sYSxiKX0pLFRpbGVNYXRyaXhTZXQ6TGgoZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxPbSxhLGIpfSl9KSxObT1PKEttLHtTdHlsZTpMaChmdW5jdGlvbihhLGIpe3ZhciBjPVAoe30sUG0sYSxiKTtpZihjKXt2YXIgZD1cInRydWVcIj09PWEuZ2V0QXR0cmlidXRlKFwiaXNEZWZhdWx0XCIpO2MuaXNEZWZhdWx0PWQ7cmV0dXJuIGN9fSksRm9ybWF0OkxoKFYpLFRpbGVNYXRyaXhTZXRMaW5rOkxoKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sUW0sYSxiKX0pLERpbWVuc2lvbjpMaChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LFJtLGEsYil9KSxSZXNvdXJjZVVSTDpMaChmdW5jdGlvbihhKXt2YXIgYj1hLmdldEF0dHJpYnV0ZShcImZvcm1hdFwiKSxjPWEuZ2V0QXR0cmlidXRlKFwidGVtcGxhdGVcIik7YT1hLmdldEF0dHJpYnV0ZShcInJlc291cmNlVHlwZVwiKTt2YXIgZD17fTtiJiYoZC5mb3JtYXQ9Yik7XG5jJiYoZC50ZW1wbGF0ZT1jKTthJiYoZC5yZXNvdXJjZVR5cGU9YSk7cmV0dXJuIGR9KX0sTyhMbSx7VGl0bGU6TChWKSxBYnN0cmFjdDpMKFYpLFdHUzg0Qm91bmRpbmdCb3g6TChmdW5jdGlvbihhLGIpe3ZhciBjPVAoW10sU20sYSxiKTtpZigyPT1jLmxlbmd0aClyZXR1cm4gS2EoYyl9KSxJZGVudGlmaWVyOkwoVil9KSksUG09TyhLbSx7TGVnZW5kVVJMOkxoKGZ1bmN0aW9uKGEpe3ZhciBiPXt9O2IuZm9ybWF0PWEuZ2V0QXR0cmlidXRlKFwiZm9ybWF0XCIpO2IuaHJlZj10bChhKTtyZXR1cm4gYn0pfSxPKExtLHtUaXRsZTpMKFYpLElkZW50aWZpZXI6TChWKX0pKSxRbT1PKEttLHtUaWxlTWF0cml4U2V0OkwoViksVGlsZU1hdHJpeFNldExpbWl0czpMKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoW10sVG0sYSxiKX0pfSksVG09TyhLbSx7VGlsZU1hdHJpeExpbWl0czpKKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sVW0sYSxiKX0pfSksVW09TyhLbSx7VGlsZU1hdHJpeDpMKFYpLFxuTWluVGlsZVJvdzpMKEppKSxNYXhUaWxlUm93OkwoSmkpLE1pblRpbGVDb2w6TChKaSksTWF4VGlsZUNvbDpMKEppKX0pLFJtPU8oS20se0RlZmF1bHQ6TChWKSxWYWx1ZTpMaChWKX0sTyhMbSx7SWRlbnRpZmllcjpMKFYpfSkpLFNtPU8oTG0se0xvd2VyQ29ybmVyOkooSm0pLFVwcGVyQ29ybmVyOkooSm0pfSksT209TyhLbSx7V2VsbEtub3duU2NhbGVTZXQ6TChWKSxUaWxlTWF0cml4OkxoKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sVm0sYSxiKX0pfSxPKExtLHtTdXBwb3J0ZWRDUlM6TChWKSxJZGVudGlmaWVyOkwoVil9KSksVm09TyhLbSx7VG9wTGVmdENvcm5lcjpMKEptKSxTY2FsZURlbm9taW5hdG9yOkwoSGkpLFRpbGVXaWR0aDpMKEppKSxUaWxlSGVpZ2h0OkwoSmkpLE1hdHJpeFdpZHRoOkwoSmkpLE1hdHJpeEhlaWdodDpMKEppKX0sTyhMbSx7SWRlbnRpZmllcjpMKFYpfSkpO2Z1bmN0aW9uIFdtKGEpe3ZjLmNhbGwodGhpcyk7YT1hfHx7fTt0aGlzLmE9bnVsbDt0aGlzLmc9T2I7dGhpcy5jPXZvaWQgMDt5KHRoaXMseGMoXCJwcm9qZWN0aW9uXCIpLHRoaXMucmcsdGhpcyk7eSh0aGlzLHhjKFwidHJhY2tpbmdcIiksdGhpcy54Zyx0aGlzKTtpZih2b2lkIDAhPT1hLnByb2plY3Rpb24pe3ZhciBiPUhiKGEucHJvamVjdGlvbik7dGhpcy5zZXQoXCJwcm9qZWN0aW9uXCIsYil9dm9pZCAwIT09YS50cmFja2luZ09wdGlvbnMmJnRoaXMuc2V0KFwidHJhY2tpbmdPcHRpb25zXCIsYS50cmFja2luZ09wdGlvbnMpO3RoaXMubWModm9pZCAwIT09YS50cmFja2luZz9hLnRyYWNraW5nOiExKX10KFdtLHZjKTtsPVdtLnByb3RvdHlwZTtsLmthPWZ1bmN0aW9uKCl7dGhpcy5tYyghMSk7dmMucHJvdG90eXBlLmthLmNhbGwodGhpcyl9O1xubC5yZz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0KFwicHJvamVjdGlvblwiKTthJiYodGhpcy5nPUtiKEhiKFwiRVBTRzo0MzI2XCIpLGEpLHRoaXMuYSYmdGhpcy5zZXQoXCJwb3NpdGlvblwiLHRoaXMuZyh0aGlzLmEpKSl9O2wueGc9ZnVuY3Rpb24oKXtpZihxZCl7dmFyIGE9dGhpcy5XZCgpO2EmJnZvaWQgMD09PXRoaXMuYz90aGlzLmM9bmF2aWdhdG9yLmdlb2xvY2F0aW9uLndhdGNoUG9zaXRpb24odGhpcy5SaC5iaW5kKHRoaXMpLHRoaXMuU2guYmluZCh0aGlzKSx0aGlzLmdldChcInRyYWNraW5nT3B0aW9uc1wiKSk6YXx8dm9pZCAwPT09dGhpcy5jfHwobmF2aWdhdG9yLmdlb2xvY2F0aW9uLmNsZWFyV2F0Y2godGhpcy5jKSx0aGlzLmM9dm9pZCAwKX19O1xubC5SaD1mdW5jdGlvbihhKXt2YXIgYj1hLmNvb3Jkczt0aGlzLnNldChcImFjY3VyYWN5XCIsYi5hY2N1cmFjeSk7dGhpcy5zZXQoXCJhbHRpdHVkZVwiLG51bGw9PT1iLmFsdGl0dWRlP3ZvaWQgMDpiLmFsdGl0dWRlKTt0aGlzLnNldChcImFsdGl0dWRlQWNjdXJhY3lcIixudWxsPT09Yi5hbHRpdHVkZUFjY3VyYWN5P3ZvaWQgMDpiLmFsdGl0dWRlQWNjdXJhY3kpO3RoaXMuc2V0KFwiaGVhZGluZ1wiLG51bGw9PT1iLmhlYWRpbmc/dm9pZCAwOkRhKGIuaGVhZGluZykpO3RoaXMuYT8odGhpcy5hWzBdPWIubG9uZ2l0dWRlLHRoaXMuYVsxXT1iLmxhdGl0dWRlKTp0aGlzLmE9W2IubG9uZ2l0dWRlLGIubGF0aXR1ZGVdO2E9dGhpcy5nKHRoaXMuYSk7dGhpcy5zZXQoXCJwb3NpdGlvblwiLGEpO3RoaXMuc2V0KFwic3BlZWRcIixudWxsPT09Yi5zcGVlZD92b2lkIDA6Yi5zcGVlZCk7YT10aGlzLmE7dmFyIGM9Yi5hY2N1cmFjeSxiPVtdLGQ7Zm9yKGQ9MDszMj5kOysrZClvYShiLHNiLm9mZnNldChhLGMsXG4yKk1hdGguUEkqZC8zMikpO2IucHVzaChiWzBdLGJbMV0pO2E9bmV3IEIobnVsbCk7VGUoYSxcIlhZXCIsYixbYi5sZW5ndGhdKTthLnZiKHRoaXMuZyk7dGhpcy5zZXQoXCJhY2N1cmFjeUdlb21ldHJ5XCIsYSk7dGhpcy5iKCl9O2wuU2g9ZnVuY3Rpb24oYSl7YS50eXBlPVwiZXJyb3JcIjt0aGlzLm1jKCExKTtBKHRoaXMsYSl9O2wuU2Y9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJhY2N1cmFjeVwiKX07bC5YZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImhlYWRpbmdcIil9O2wuV2c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJwb3NpdGlvblwiKX07bC5iZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInNwZWVkXCIpfTtsLldkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwidHJhY2tpbmdcIil9O2wubWM9ZnVuY3Rpb24oYSl7dGhpcy5zZXQoXCJ0cmFja2luZ1wiLGEpfTtmdW5jdGlvbiBYbShhLGIsYyl7dGUuY2FsbCh0aGlzKTtZbSh0aGlzLGEsYj9iOjAsYyl9dChYbSx0ZSk7bD1YbS5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBYbShudWxsKTt2ZShhLHRoaXMuWCx0aGlzLmwuc2xpY2UoKSk7YS5iKCk7cmV0dXJuIGF9O2wuSGE9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9dGhpcy5sO2EtPWVbMF07dmFyIGY9Yi1lWzFdO2I9YSphK2YqZjtpZihiPGQpe2lmKGIpZm9yKGQ9dGhpcy5aYygpL01hdGguc3FydChiKSxjWzBdPWVbMF0rZCphLGNbMV09ZVsxXStkKmYsZD0yO2Q8dGhpcy5BOysrZCljW2RdPWVbZF07ZWxzZSBmb3IoZD0wO2Q8dGhpcy5BOysrZCljW2RdPWVbZF07Yy5sZW5ndGg9dGhpcy5BO3JldHVybiBifXJldHVybiBkfTtsLmhhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubC5zbGljZSgwLHRoaXMuQSl9O1xubC5SYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmwsYz1iW3RoaXMuQV0tYlswXTtyZXR1cm4gUmEoYlswXS1jLGJbMV0tYyxiWzBdK2MsYlsxXStjLGEpfTtsLlpjPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5sW3RoaXMuQV0tdGhpcy5sWzBdLGI9dGhpcy5sW3RoaXMuQSsxXS10aGlzLmxbMV07cmV0dXJuIE1hdGguc3FydChhKmErYipiKX07bC5IPWZ1bmN0aW9uKCl7cmV0dXJuXCJDaXJjbGVcIn07bC5LYT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLkEsYz1hLnNsaWNlKCk7Y1tiXT1jWzBdKyh0aGlzLmxbYl0tdGhpcy5sWzBdKTt2YXIgZDtmb3IoZD0xO2Q8YjsrK2QpY1tiK2RdPWFbZF07dmUodGhpcyx0aGlzLlgsYyk7dGhpcy5iKCl9O1xuZnVuY3Rpb24gWW0oYSxiLGMsZCl7aWYoYil7d2UoYSxkLGIsMCk7YS5sfHwoYS5sPVtdKTtkPWEubDtiPURlKGQsYik7ZFtiKytdPWRbMF0rYzt2YXIgZTtjPTE7Zm9yKGU9YS5BO2M8ZTsrK2MpZFtiKytdPWRbY107ZC5sZW5ndGg9Yn1lbHNlIHZlKGEsXCJYWVwiLG51bGwpO2EuYigpfWwuRD1mdW5jdGlvbigpe307bC5ZPWZ1bmN0aW9uKCl7fTtsLlJlPWZ1bmN0aW9uKGEpe3RoaXMubFt0aGlzLkFdPXRoaXMubFswXSthO3RoaXMuYigpfTtmdW5jdGlvbiBabShhLGIpe3NjLmNhbGwodGhpcyk7dGhpcy5PYT1hO3RoaXMuc3RhdGU9Yjt0aGlzLmI9bnVsbDt0aGlzLmtleT1cIlwifXQoWm0sc2MpO2Z1bmN0aW9uICRtKGEpe0EoYSxcImNoYW5nZVwiKX1abS5wcm90b3R5cGUuWGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rZXkrXCIvXCIrdGhpcy5PYX07ZnVuY3Rpb24gYW4oYSxiLGMsZCxlKXtabS5jYWxsKHRoaXMsYSxiKTt0aGlzLmE9Yzt0aGlzLk49bmV3IEltYWdlO251bGwhPT1kJiYodGhpcy5OLmNyb3NzT3JpZ2luPWQpO3RoaXMuZj1udWxsO3RoaXMuYz1lfXQoYW4sWm0pO2w9YW4ucHJvdG90eXBlO2wua2E9ZnVuY3Rpb24oKXsxPT10aGlzLnN0YXRlJiZibih0aGlzKTt0aGlzLmImJnBjKHRoaXMuYik7dGhpcy5zdGF0ZT01OyRtKHRoaXMpO1ptLnByb3RvdHlwZS5rYS5jYWxsKHRoaXMpfTtsLmlhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTn07bC5YYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2wuWGc9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPTM7Ym4odGhpcyk7JG0odGhpcyl9O2wuWWc9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPXRoaXMuTi5uYXR1cmFsV2lkdGgmJnRoaXMuTi5uYXR1cmFsSGVpZ2h0PzI6NDtibih0aGlzKTskbSh0aGlzKX07XG5sLmxvYWQ9ZnVuY3Rpb24oKXtpZigwPT10aGlzLnN0YXRlfHwzPT10aGlzLnN0YXRlKXRoaXMuc3RhdGU9MSwkbSh0aGlzKSx0aGlzLmY9W3kodGhpcy5OLFwiZXJyb3JcIix0aGlzLlhnLHRoaXMsITApLHkodGhpcy5OLFwibG9hZFwiLHRoaXMuWWcsdGhpcywhMCldLHRoaXMuYyh0aGlzLHRoaXMuYSl9O2Z1bmN0aW9uIGJuKGEpe2EuZi5mb3JFYWNoKGljKTthLmY9bnVsbH07ZnVuY3Rpb24gY24oYSxiLGMsZCl7dGhpcy5MYT1hO3RoaXMuST1iO3RoaXMub3ZlcmxhcHM9ZDt0aGlzLmM9MDt0aGlzLnJlc29sdXRpb249Yzt0aGlzLmdhPXRoaXMuZmE9bnVsbDt0aGlzLmY9W107dGhpcy5jb29yZGluYXRlcz1bXTt0aGlzLlY9cWcoKTt0aGlzLmI9W107dGhpcy5hYT1udWxsO3RoaXMuJD1xZygpO3RoaXMuVz1xZygpfXQoY24sRGcpO1xuZnVuY3Rpb24gZG4oYSxiLGMsZCxlLGYsZyl7dmFyIGg9YS5jb29yZGluYXRlcy5sZW5ndGgsaz1hLk9jKCk7ZyYmKGMrPWUpO2c9W2JbY10sYltjKzFdXTt2YXIgbT1bTmFOLE5hTl0sbj0hMCxwLHEsdTtmb3IocD1jK2U7cDxkO3ArPWUpe21bMF09YltwXTttWzFdPWJbcCsxXTt1PWtbMV07dmFyIEY9a1syXSx6PWtbM10sQz1tWzBdLEQ9bVsxXSxFPTA7QzxrWzBdP0V8PTE2OkM+RiYmKEV8PTQpO0Q8dT9FfD04OkQ+eiYmKEV8PTIpO0V8fChFPTEpO3U9RTt1IT09cT8obiYmKGEuY29vcmRpbmF0ZXNbaCsrXT1nWzBdLGEuY29vcmRpbmF0ZXNbaCsrXT1nWzFdKSxhLmNvb3JkaW5hdGVzW2grK109bVswXSxhLmNvb3JkaW5hdGVzW2grK109bVsxXSxuPSExKToxPT09dT8oYS5jb29yZGluYXRlc1toKytdPW1bMF0sYS5jb29yZGluYXRlc1toKytdPW1bMV0sbj0hMSk6bj0hMDtnWzBdPW1bMF07Z1sxXT1tWzFdO3E9dX1pZihmJiZufHxwPT09YytlKWEuY29vcmRpbmF0ZXNbaCsrXT1nWzBdLFxuYS5jb29yZGluYXRlc1toKytdPWdbMV07cmV0dXJuIGh9ZnVuY3Rpb24gZW4oYSxiKXthLmZhPVswLGIsMF07YS5mLnB1c2goYS5mYSk7YS5nYT1bMCxiLDBdO2EuYi5wdXNoKGEuZ2EpfWNuLnByb3RvdHlwZS5sYT1mdW5jdGlvbihhLGIpe2lmKHRoaXMuQWEpe3ZhciBjPXNnKHRoaXMuVix0aGlzLkFhLnNsaWNlKCkpO2EudHJhbnNsYXRlKGNbMF0sY1sxXSk7YS5yb3RhdGUoYil9YS5maWxsKCk7dGhpcy5BYSYmYS5zZXRUcmFuc2Zvcm0uYXBwbHkoYSx0aGlzLlcpfTtcbmZ1bmN0aW9uIGZuKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbTthLmFhJiZwYShkLGEuVik/bT1hLmFhOihhLmFhfHwoYS5hYT1bXSksbT1zZShhLmNvb3JkaW5hdGVzLDAsYS5jb29yZGluYXRlcy5sZW5ndGgsMixkLGEuYWEpLHJnKGEuVixkKSk7ZD0hZWIoZik7Zm9yKHZhciBuPTAscD1nLmxlbmd0aCxxPTAsdSxGPWEuJCx6PWEuVyxDLEQsRSxRLGZhPTAsZ2E9MCxYPWEuZiE9Z3x8YS5vdmVybGFwcz8wOjIwMDtuPHA7KXt2YXIgdj1nW25dLFQsYmEsSCxOO3N3aXRjaCh2WzBdKXtjYXNlIDA6cT12WzFdO2QmJmZbdyhxKS50b1N0cmluZygpXXx8IXEuUigpP249dlsyXTp2b2lkIDA9PT1rfHxaYShrLHEuUigpLkooKSk/KytuOm49dlsyXSsxO2JyZWFrO2Nhc2UgMTpmYT5YJiYoYS5sYShiLGUpLGZhPTApO2dhPlgmJihiLnN0cm9rZSgpLGdhPTApO2ZhfHxnYXx8KGIuYmVnaW5QYXRoKCksQz1EPU5hTik7KytuO2JyZWFrO2Nhc2UgMjpxPXZbMV07dT1tW3FdO3Y9bVtxKzFdO0U9bVtxK1xuMl0tdTtxPW1bcSszXS12O3E9TWF0aC5zcXJ0KEUqRStxKnEpO2IubW92ZVRvKHUrcSx2KTtiLmFyYyh1LHYscSwwLDIqTWF0aC5QSSwhMCk7KytuO2JyZWFrO2Nhc2UgMzpiLmNsb3NlUGF0aCgpOysrbjticmVhaztjYXNlIDQ6cT12WzFdO3U9dlsyXTtUPXZbM107YmE9dls0XSpjO0g9dls1XSpjO3ZhciBFYT12WzZdLHBiPXZbN10scWI9dls4XSx1Yj12WzldO049dlsxMF07RT12WzExXTtRPXZbMTJdO3ZhciBjYz12WzEzXSx2YT12WzE0XTtmb3IoTiYmKEUrPWUpO3E8dTtxKz0yKXt2PW1bcV0tYmE7Tj1tW3ErMV0tSDtjYyYmKHY9TWF0aC5yb3VuZCh2KSxOPU1hdGgucm91bmQoTikpO2lmKDEhPVF8fEUpe3ZhciBMYj12K2JhLE1iPU4rSDt0ZyhGLExiLE1iLFEsUSxFLC1MYiwtTWIpO2Iuc2V0VHJhbnNmb3JtLmFwcGx5KGIsRil9TGI9Yi5nbG9iYWxBbHBoYTsxIT1wYiYmKGIuZ2xvYmFsQWxwaGE9TGIqcGIpO3ZhciBNYj12YStxYj5ULndpZHRoP1Qud2lkdGgtcWI6dmEsZGM9XG5FYSt1Yj5ULmhlaWdodD9ULmhlaWdodC11YjpFYTtiLmRyYXdJbWFnZShULHFiLHViLE1iLGRjLHYsTixNYipjLGRjKmMpOzEhPXBiJiYoYi5nbG9iYWxBbHBoYT1MYik7KDEhPVF8fEUpJiZiLnNldFRyYW5zZm9ybS5hcHBseShiLHopfSsrbjticmVhaztjYXNlIDU6cT12WzFdO3U9dlsyXTtIPXZbM107RWE9dls0XSpjO3BiPXZbNV0qYztFPXZbNl07UT12WzddKmM7VD12WzhdO2JhPXZbOV07Zm9yKChOPXZbMTBdKSYmKEUrPWUpO3E8dTtxKz0yKXt2PW1bcV0rRWE7Tj1tW3ErMV0rcGI7aWYoMSE9UXx8RSl0ZyhGLHYsTixRLFEsRSwtdiwtTiksYi5zZXRUcmFuc2Zvcm0uYXBwbHkoYixGKTtxYj1ILnNwbGl0KFwiXFxuXCIpO3ViPXFiLmxlbmd0aDsxPHViPyhjYz1NYXRoLnJvdW5kKDEuNSpiLm1lYXN1cmVUZXh0KFwiTVwiKS53aWR0aCksTi09KHViLTEpLzIqY2MpOmNjPTA7Zm9yKHZhPTA7dmE8dWI7dmErKylMYj1xYlt2YV0sYmEmJmIuc3Ryb2tlVGV4dChMYix2LE4pLFQmJmIuZmlsbFRleHQoTGIsXG52LE4pLE4rPWNjOygxIT1RfHxFKSYmYi5zZXRUcmFuc2Zvcm0uYXBwbHkoYix6KX0rK247YnJlYWs7Y2FzZSA2OmlmKGgmJihxPXZbMV0scT1oKHEpKSlyZXR1cm4gcTsrK247YnJlYWs7Y2FzZSA3Olg/ZmErKzphLmxhKGIsZSk7KytuO2JyZWFrO2Nhc2UgODpxPXZbMV07dT12WzJdO3Y9bVtxXTtOPW1bcSsxXTtFPXYrLjV8MDtRPU4rLjV8MDtpZihFIT09Q3x8USE9PUQpYi5tb3ZlVG8odixOKSxDPUUsRD1RO2ZvcihxKz0yO3E8dTtxKz0yKWlmKHY9bVtxXSxOPW1bcSsxXSxFPXYrLjV8MCxRPU4rLjV8MCxxPT11LTJ8fEUhPT1DfHxRIT09RCliLmxpbmVUbyh2LE4pLEM9RSxEPVE7KytuO2JyZWFrO2Nhc2UgOTphLkFhPXZbMl07ZmEmJihhLmxhKGIsZSksZmE9MCxnYSYmKGIuc3Ryb2tlKCksZ2E9MCkpO2IuZmlsbFN0eWxlPXZbMV07KytuO2JyZWFrO2Nhc2UgMTA6dmFyIHE9dm9pZCAwIT09dls4XT92WzhdOiEwLGhoPXZbOV07dT12WzJdO2dhJiYoYi5zdHJva2UoKSxnYT0wKTtcbmIuc3Ryb2tlU3R5bGU9dlsxXTtiLmxpbmVXaWR0aD1xP3UqYzp1O2IubGluZUNhcD12WzNdO2IubGluZUpvaW49dls0XTtiLm1pdGVyTGltaXQ9dls1XTtvZCYmKHU9dls2XSxFPXZbN10scSYmYyE9PWhoJiYodT11Lm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYSpjL2hofSksRSo9Yy9oaCx2WzZdPXUsdls3XT1FLHZbOV09YyksYi5saW5lRGFzaE9mZnNldD1FLGIuc2V0TGluZURhc2godSkpOysrbjticmVhaztjYXNlIDExOmIuZm9udD12WzFdO2IudGV4dEFsaWduPXZbMl07Yi50ZXh0QmFzZWxpbmU9dlszXTsrK247YnJlYWs7Y2FzZSAxMjpYP2dhKys6Yi5zdHJva2UoKTsrK247YnJlYWs7ZGVmYXVsdDorK259fWZhJiZhLmxhKGIsZSk7Z2EmJmIuc3Ryb2tlKCl9XG5mdW5jdGlvbiBnbihhKXt2YXIgYj1hLmI7Yi5yZXZlcnNlKCk7dmFyIGMsZD1iLmxlbmd0aCxlLGYsZz0tMTtmb3IoYz0wO2M8ZDsrK2MpaWYoZT1iW2NdLGY9ZVswXSw2PT1mKWc9YztlbHNlIGlmKDA9PWYpe2VbMl09YztlPWEuYjtmb3IoZj1jO2c8Zjspe3ZhciBoPWVbZ107ZVtnXT1lW2ZdO2VbZl09aDsrK2c7LS1mfWc9LTF9fWZ1bmN0aW9uIGhuKGEsYil7YS5mYVsyXT1hLmYubGVuZ3RoO2EuZmE9bnVsbDthLmdhWzJdPWEuYi5sZW5ndGg7YS5nYT1udWxsO3ZhciBjPVs2LGJdO2EuZi5wdXNoKGMpO2EuYi5wdXNoKGMpfWNuLnByb3RvdHlwZS5iYz10YTtjbi5wcm90b3R5cGUuT2M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5JfTtmdW5jdGlvbiBqbihhLGIsYyxkKXtjbi5jYWxsKHRoaXMsYSxiLGMsZCk7dGhpcy5OPXRoaXMuRz1udWxsO3RoaXMudj10aGlzLkI9dGhpcy5LPXRoaXMubz10aGlzLmo9dGhpcy5DPXRoaXMucz10aGlzLnU9dGhpcy5pPXRoaXMuZz10aGlzLmE9dm9pZCAwfXQoam4sY24pO2puLnByb3RvdHlwZS5LYz1mdW5jdGlvbihhLGIpe2lmKHRoaXMuTil7ZW4odGhpcyxiKTt2YXIgYz1hLmwsZD10aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCxjPWRuKHRoaXMsYywwLGMubGVuZ3RoLGEuQSwhMSwhMSk7dGhpcy5mLnB1c2goWzQsZCxjLHRoaXMuTix0aGlzLmEsdGhpcy5nLHRoaXMuaSx0aGlzLnUsdGhpcy5zLHRoaXMuQyx0aGlzLmosdGhpcy5vLHRoaXMuSyx0aGlzLkIsdGhpcy52XSk7dGhpcy5iLnB1c2goWzQsZCxjLHRoaXMuRyx0aGlzLmEsdGhpcy5nLHRoaXMuaSx0aGlzLnUsdGhpcy5zLHRoaXMuQyx0aGlzLmosdGhpcy5vLHRoaXMuSyx0aGlzLkIsdGhpcy52XSk7aG4odGhpcyxiKX19O1xuam4ucHJvdG90eXBlLkljPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5OKXtlbih0aGlzLGIpO3ZhciBjPWEubCxkPXRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoLGM9ZG4odGhpcyxjLDAsYy5sZW5ndGgsYS5BLCExLCExKTt0aGlzLmYucHVzaChbNCxkLGMsdGhpcy5OLHRoaXMuYSx0aGlzLmcsdGhpcy5pLHRoaXMudSx0aGlzLnMsdGhpcy5DLHRoaXMuaix0aGlzLm8sdGhpcy5LLHRoaXMuQix0aGlzLnZdKTt0aGlzLmIucHVzaChbNCxkLGMsdGhpcy5HLHRoaXMuYSx0aGlzLmcsdGhpcy5pLHRoaXMudSx0aGlzLnMsdGhpcy5DLHRoaXMuaix0aGlzLm8sdGhpcy5LLHRoaXMuQix0aGlzLnZdKTtobih0aGlzLGIpfX07am4ucHJvdG90eXBlLmJjPWZ1bmN0aW9uKCl7Z24odGhpcyk7dGhpcy5nPXRoaXMuYT12b2lkIDA7dGhpcy5OPXRoaXMuRz1udWxsO3RoaXMudj10aGlzLkI9dGhpcy5vPXRoaXMuaj10aGlzLkM9dGhpcy5zPXRoaXMudT10aGlzLks9dGhpcy5pPXZvaWQgMH07XG5qbi5wcm90b3R5cGUubGM9ZnVuY3Rpb24oYSl7dmFyIGI9YS5TYigpLGM9YS5uYigpLGQ9YS5CZSgxKSxlPWEuaWEoMSksZj1hLmRjKCk7dGhpcy5hPWJbMF07dGhpcy5nPWJbMV07dGhpcy5HPWQ7dGhpcy5OPWU7dGhpcy5pPWNbMV07dGhpcy51PWEuaTt0aGlzLnM9ZlswXTt0aGlzLkM9ZlsxXTt0aGlzLmo9YS5zO3RoaXMubz1hLm87dGhpcy5LPWEuZzt0aGlzLkI9YS5LO3RoaXMudj1jWzBdfTtmdW5jdGlvbiBrbihhLGIsYyxkKXtjbi5jYWxsKHRoaXMsYSxiLGMsZCk7dGhpcy5nPW51bGw7dGhpcy5hPXtDYjp2b2lkIDAsd2I6dm9pZCAwLHhiOm51bGwseWI6dm9pZCAwLHpiOnZvaWQgMCxBYjp2b2lkIDAsQmI6dm9pZCAwLFZjOjAsc3Ryb2tlU3R5bGU6dm9pZCAwLGxpbmVDYXA6dm9pZCAwLGxpbmVEYXNoOm51bGwsbGluZURhc2hPZmZzZXQ6dm9pZCAwLGxpbmVKb2luOnZvaWQgMCxsaW5lV2lkdGg6dm9pZCAwLG1pdGVyTGltaXQ6dm9pZCAwfX10KGtuLGNuKTtmdW5jdGlvbiBsbihhLGIsYyxkLGUpe3ZhciBmPWEuY29vcmRpbmF0ZXMubGVuZ3RoO2I9ZG4oYSxiLGMsZCxlLCExLCExKTtmPVs4LGYsYl07YS5mLnB1c2goZik7YS5iLnB1c2goZik7cmV0dXJuIGR9bD1rbi5wcm90b3R5cGU7bC5PYz1mdW5jdGlvbigpe3RoaXMuZ3x8KHRoaXMuZz1PYSh0aGlzLkkpLDA8dGhpcy5jJiZOYSh0aGlzLmcsdGhpcy5yZXNvbHV0aW9uKih0aGlzLmMrMSkvMix0aGlzLmcpKTtyZXR1cm4gdGhpcy5nfTtcbmZ1bmN0aW9uIG1uKGEpe3ZhciBiPWEuYSxjPWIuc3Ryb2tlU3R5bGUsZD1iLmxpbmVDYXAsZT1iLmxpbmVEYXNoLGY9Yi5saW5lRGFzaE9mZnNldCxnPWIubGluZUpvaW4saD1iLmxpbmVXaWR0aCxrPWIubWl0ZXJMaW1pdDtiLkNiPT1jJiZiLndiPT1kJiZwYShiLnhiLGUpJiZiLnliPT1mJiZiLnpiPT1nJiZiLkFiPT1oJiZiLkJiPT1rfHwoYi5WYyE9YS5jb29yZGluYXRlcy5sZW5ndGgmJihhLmYucHVzaChbMTJdKSxiLlZjPWEuY29vcmRpbmF0ZXMubGVuZ3RoKSxhLmYucHVzaChbMTAsYyxoLGQsZyxrLGUsZiwhMCwxXSxbMV0pLGIuQ2I9YyxiLndiPWQsYi54Yj1lLGIueWI9ZixiLnpiPWcsYi5BYj1oLGIuQmI9ayl9XG5sLkdjPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hLGQ9Yy5saW5lV2lkdGg7dm9pZCAwIT09Yy5zdHJva2VTdHlsZSYmdm9pZCAwIT09ZCYmKG1uKHRoaXMpLGVuKHRoaXMsYiksdGhpcy5iLnB1c2goWzEwLGMuc3Ryb2tlU3R5bGUsYy5saW5lV2lkdGgsYy5saW5lQ2FwLGMubGluZUpvaW4sYy5taXRlckxpbWl0LGMubGluZURhc2gsYy5saW5lRGFzaE9mZnNldCwhMCwxXSxbMV0pLGM9YS5sLGxuKHRoaXMsYywwLGMubGVuZ3RoLGEuQSksdGhpcy5iLnB1c2goWzEyXSksaG4odGhpcyxiKSl9O1xubC5IYz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuYSxkPWMubGluZVdpZHRoO2lmKHZvaWQgMCE9PWMuc3Ryb2tlU3R5bGUmJnZvaWQgMCE9PWQpe21uKHRoaXMpO2VuKHRoaXMsYik7dGhpcy5iLnB1c2goWzEwLGMuc3Ryb2tlU3R5bGUsYy5saW5lV2lkdGgsYy5saW5lQ2FwLGMubGluZUpvaW4sYy5taXRlckxpbWl0LGMubGluZURhc2gsYy5saW5lRGFzaE9mZnNldCwhMCwxXSxbMV0pO3ZhciBjPWEuZ2IoKSxkPWEubCxlPWEuQSxmPTAsZyxoO2c9MDtmb3IoaD1jLmxlbmd0aDtnPGg7KytnKWY9bG4odGhpcyxkLGYsY1tnXSxlKTt0aGlzLmIucHVzaChbMTJdKTtobih0aGlzLGIpfX07bC5iYz1mdW5jdGlvbigpe3RoaXMuYS5WYyE9dGhpcy5jb29yZGluYXRlcy5sZW5ndGgmJnRoaXMuZi5wdXNoKFsxMl0pO2duKHRoaXMpO3RoaXMuYT1udWxsfTtcbmwuU2E9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmI7dGhpcy5hLnN0cm9rZVN0eWxlPU1jKGM/YzpCZyk7Yz1iLmc7dGhpcy5hLmxpbmVDYXA9dm9pZCAwIT09Yz9jOlwicm91bmRcIjtjPWIuZjt0aGlzLmEubGluZURhc2g9Yz9jOkFnO2M9Yi5qO3RoaXMuYS5saW5lRGFzaE9mZnNldD1jP2M6MDtjPWIuaTt0aGlzLmEubGluZUpvaW49dm9pZCAwIT09Yz9jOlwicm91bmRcIjtjPWIuYzt0aGlzLmEubGluZVdpZHRoPXZvaWQgMCE9PWM/YzoxO2M9Yi51O3RoaXMuYS5taXRlckxpbWl0PXZvaWQgMCE9PWM/YzoxMDt0aGlzLmEubGluZVdpZHRoPnRoaXMuYyYmKHRoaXMuYz10aGlzLmEubGluZVdpZHRoLHRoaXMuZz1udWxsKX07ZnVuY3Rpb24gbm4oYSxiLGMsZCl7Y24uY2FsbCh0aGlzLGEsYixjLGQpO3RoaXMuZz1udWxsO3RoaXMuYT17TmQ6dm9pZCAwLENiOnZvaWQgMCx3Yjp2b2lkIDAseGI6bnVsbCx5Yjp2b2lkIDAsemI6dm9pZCAwLEFiOnZvaWQgMCxCYjp2b2lkIDAsZmlsbFN0eWxlOnZvaWQgMCxzdHJva2VTdHlsZTp2b2lkIDAsbGluZUNhcDp2b2lkIDAsbGluZURhc2g6bnVsbCxsaW5lRGFzaE9mZnNldDp2b2lkIDAsbGluZUpvaW46dm9pZCAwLGxpbmVXaWR0aDp2b2lkIDAsbWl0ZXJMaW1pdDp2b2lkIDB9fXQobm4sY24pO1xuZnVuY3Rpb24gb24oYSxiLGMsZCxlKXt2YXIgZj1hLmEsZz12b2lkIDAhPT1mLmZpbGxTdHlsZSxmPXZvaWQgMCE9Zi5zdHJva2VTdHlsZSxoPWQubGVuZ3RoLGs9WzFdO2EuZi5wdXNoKGspO2EuYi5wdXNoKGspO2ZvcihrPTA7azxoOysrayl7dmFyIG09ZFtrXSxuPWEuY29vcmRpbmF0ZXMubGVuZ3RoO2M9ZG4oYSxiLGMsbSxlLCEwLCFmKTtjPVs4LG4sY107YS5mLnB1c2goYyk7YS5iLnB1c2goYyk7ZiYmKGM9WzNdLGEuZi5wdXNoKGMpLGEuYi5wdXNoKGMpKTtjPW19Yj1bN107YS5iLnB1c2goYik7ZyYmYS5mLnB1c2goYik7ZiYmKGc9WzEyXSxhLmYucHVzaChnKSxhLmIucHVzaChnKSk7cmV0dXJuIGN9bD1ubi5wcm90b3R5cGU7XG5sLkZjPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hLGQ9Yy5zdHJva2VTdHlsZTtpZih2b2lkIDAhPT1jLmZpbGxTdHlsZXx8dm9pZCAwIT09ZCl7cG4odGhpcyxhKTtlbih0aGlzLGIpO3RoaXMuYi5wdXNoKFs5LEpjKHpnKV0pO3ZvaWQgMCE9PWMuc3Ryb2tlU3R5bGUmJnRoaXMuYi5wdXNoKFsxMCxjLnN0cm9rZVN0eWxlLGMubGluZVdpZHRoLGMubGluZUNhcCxjLmxpbmVKb2luLGMubWl0ZXJMaW1pdCxjLmxpbmVEYXNoLGMubGluZURhc2hPZmZzZXQsITAsMV0pO3ZhciBlPWEubCxkPXRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO2RuKHRoaXMsZSwwLGUubGVuZ3RoLGEuQSwhMSwhMSk7ZT1bMV07ZD1bMixkXTt0aGlzLmYucHVzaChlLGQpO3RoaXMuYi5wdXNoKGUsZCk7ZD1bN107dGhpcy5iLnB1c2goZCk7dm9pZCAwIT09Yy5maWxsU3R5bGUmJnRoaXMuZi5wdXNoKGQpO3ZvaWQgMCE9PWMuc3Ryb2tlU3R5bGUmJihjPVsxMl0sdGhpcy5mLnB1c2goYyksdGhpcy5iLnB1c2goYykpO1xuaG4odGhpcyxiKX19O2wuTGM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmE7cG4odGhpcyxhKTtlbih0aGlzLGIpO3RoaXMuYi5wdXNoKFs5LEpjKHpnKV0pO3ZvaWQgMCE9PWMuc3Ryb2tlU3R5bGUmJnRoaXMuYi5wdXNoKFsxMCxjLnN0cm9rZVN0eWxlLGMubGluZVdpZHRoLGMubGluZUNhcCxjLmxpbmVKb2luLGMubWl0ZXJMaW1pdCxjLmxpbmVEYXNoLGMubGluZURhc2hPZmZzZXQsITAsMV0pO3ZhciBjPWEuZ2IoKSxkPVVlKGEpO29uKHRoaXMsZCwwLGMsYS5BKTtobih0aGlzLGIpfTtcbmwuSmM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmEsZD1jLnN0cm9rZVN0eWxlO2lmKHZvaWQgMCE9PWMuZmlsbFN0eWxlfHx2b2lkIDAhPT1kKXtwbih0aGlzLGEpO2VuKHRoaXMsYik7dGhpcy5iLnB1c2goWzksSmMoemcpXSk7dm9pZCAwIT09Yy5zdHJva2VTdHlsZSYmdGhpcy5iLnB1c2goWzEwLGMuc3Ryb2tlU3R5bGUsYy5saW5lV2lkdGgsYy5saW5lQ2FwLGMubGluZUpvaW4sYy5taXRlckxpbWl0LGMubGluZURhc2gsYy5saW5lRGFzaE9mZnNldCwhMCwxXSk7dmFyIGM9YS5hLGQ9TmcoYSksZT1hLkEsZj0wLGcsaDtnPTA7Zm9yKGg9Yy5sZW5ndGg7ZzxoOysrZylmPW9uKHRoaXMsZCxmLGNbZ10sZSk7aG4odGhpcyxiKX19O2wuYmM9ZnVuY3Rpb24oKXtnbih0aGlzKTt0aGlzLmE9bnVsbDt2YXIgYT10aGlzLkxhO2lmKGEpe3ZhciBiPXRoaXMuY29vcmRpbmF0ZXMsYyxkO2M9MDtmb3IoZD1iLmxlbmd0aDtjPGQ7KytjKWJbY109YSpNYXRoLnJvdW5kKGJbY10vYSl9fTtcbmwuT2M9ZnVuY3Rpb24oKXt0aGlzLmd8fCh0aGlzLmc9T2EodGhpcy5JKSwwPHRoaXMuYyYmTmEodGhpcy5nLHRoaXMucmVzb2x1dGlvbioodGhpcy5jKzEpLzIsdGhpcy5nKSk7cmV0dXJuIHRoaXMuZ307XG5sLlNhPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hO2lmKGEpe3ZhciBkPWEuYjtjLmZpbGxTdHlsZT1NYyhkP2Q6emcpfWVsc2UgYy5maWxsU3R5bGU9dm9pZCAwO2I/KGQ9Yi5iLGMuc3Ryb2tlU3R5bGU9TWMoZD9kOkJnKSxkPWIuZyxjLmxpbmVDYXA9dm9pZCAwIT09ZD9kOlwicm91bmRcIixkPWIuZixjLmxpbmVEYXNoPWQ/ZC5zbGljZSgpOkFnLGQ9Yi5qLGMubGluZURhc2hPZmZzZXQ9ZD9kOjAsZD1iLmksYy5saW5lSm9pbj12b2lkIDAhPT1kP2Q6XCJyb3VuZFwiLGQ9Yi5jLGMubGluZVdpZHRoPXZvaWQgMCE9PWQ/ZDoxLGQ9Yi51LGMubWl0ZXJMaW1pdD12b2lkIDAhPT1kP2Q6MTAsYy5saW5lV2lkdGg+dGhpcy5jJiYodGhpcy5jPWMubGluZVdpZHRoLHRoaXMuZz1udWxsKSk6KGMuc3Ryb2tlU3R5bGU9dm9pZCAwLGMubGluZUNhcD12b2lkIDAsYy5saW5lRGFzaD1udWxsLGMubGluZURhc2hPZmZzZXQ9dm9pZCAwLGMubGluZUpvaW49dm9pZCAwLGMubGluZVdpZHRoPXZvaWQgMCxcbmMubWl0ZXJMaW1pdD12b2lkIDApfTtmdW5jdGlvbiBwbihhLGIpe3ZhciBjPWEuYSxkPWMuZmlsbFN0eWxlLGU9Yy5zdHJva2VTdHlsZSxmPWMubGluZUNhcCxnPWMubGluZURhc2gsaD1jLmxpbmVEYXNoT2Zmc2V0LGs9Yy5saW5lSm9pbixtPWMubGluZVdpZHRoLG49Yy5taXRlckxpbWl0O2lmKHZvaWQgMCE9PWQmJihcInN0cmluZ1wiIT09dHlwZW9mIGR8fGMuTmQhPWQpKXt2YXIgcD1bOSxkXTtcInN0cmluZ1wiIT09dHlwZW9mIGQmJihkPWIuSigpLHAucHVzaChbZFswXSxkWzNdXSkpO2EuZi5wdXNoKHApO2MuTmQ9Yy5maWxsU3R5bGV9dm9pZCAwPT09ZXx8Yy5DYj09ZSYmYy53Yj09ZiYmcGEoYy54YixnKSYmYy55Yj09aCYmYy56Yj09ayYmYy5BYj09bSYmYy5CYj09bnx8KGEuZi5wdXNoKFsxMCxlLG0sZixrLG4sZyxoLCEwLDFdKSxjLkNiPWUsYy53Yj1mLGMueGI9ZyxjLnliPWgsYy56Yj1rLGMuQWI9bSxjLkJiPW4pfTtmdW5jdGlvbiBxbihhLGIsYyxkKXtjbi5jYWxsKHRoaXMsYSxiLGMsZCk7dGhpcy5DPXRoaXMucz10aGlzLnY9bnVsbDt0aGlzLmVhPVwiXCI7dGhpcy5qPXRoaXMudT0wO3RoaXMubz12b2lkIDA7dGhpcy5CPXRoaXMuSz0wO3RoaXMuaT10aGlzLmc9dGhpcy5hPW51bGx9dChxbixjbik7XG5xbi5wcm90b3R5cGUuUWE9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2lmKFwiXCIhPT10aGlzLmVhJiZ0aGlzLmkmJih0aGlzLmF8fHRoaXMuZykpe2lmKHRoaXMuYSl7ZT10aGlzLmE7dmFyIGc9dGhpcy52O2lmKCFnfHxnLmZpbGxTdHlsZSE9ZS5maWxsU3R5bGUpe3ZhciBoPVs5LGUuZmlsbFN0eWxlXTt0aGlzLmYucHVzaChoKTt0aGlzLmIucHVzaChoKTtnP2cuZmlsbFN0eWxlPWUuZmlsbFN0eWxlOnRoaXMudj17ZmlsbFN0eWxlOmUuZmlsbFN0eWxlfX19dGhpcy5nJiYoZT10aGlzLmcsZz10aGlzLnMsZyYmZy5saW5lQ2FwPT1lLmxpbmVDYXAmJmcubGluZURhc2g9PWUubGluZURhc2gmJmcubGluZURhc2hPZmZzZXQ9PWUubGluZURhc2hPZmZzZXQmJmcubGluZUpvaW49PWUubGluZUpvaW4mJmcubGluZVdpZHRoPT1lLmxpbmVXaWR0aCYmZy5taXRlckxpbWl0PT1lLm1pdGVyTGltaXQmJmcuc3Ryb2tlU3R5bGU9PWUuc3Ryb2tlU3R5bGV8fChoPVsxMCxlLnN0cm9rZVN0eWxlLGUubGluZVdpZHRoLFxuZS5saW5lQ2FwLGUubGluZUpvaW4sZS5taXRlckxpbWl0LGUubGluZURhc2gsZS5saW5lRGFzaE9mZnNldCwhMSwxXSx0aGlzLmYucHVzaChoKSx0aGlzLmIucHVzaChoKSxnPyhnLmxpbmVDYXA9ZS5saW5lQ2FwLGcubGluZURhc2g9ZS5saW5lRGFzaCxnLmxpbmVEYXNoT2Zmc2V0PWUubGluZURhc2hPZmZzZXQsZy5saW5lSm9pbj1lLmxpbmVKb2luLGcubGluZVdpZHRoPWUubGluZVdpZHRoLGcubWl0ZXJMaW1pdD1lLm1pdGVyTGltaXQsZy5zdHJva2VTdHlsZT1lLnN0cm9rZVN0eWxlKTp0aGlzLnM9e2xpbmVDYXA6ZS5saW5lQ2FwLGxpbmVEYXNoOmUubGluZURhc2gsbGluZURhc2hPZmZzZXQ6ZS5saW5lRGFzaE9mZnNldCxsaW5lSm9pbjplLmxpbmVKb2luLGxpbmVXaWR0aDplLmxpbmVXaWR0aCxtaXRlckxpbWl0OmUubWl0ZXJMaW1pdCxzdHJva2VTdHlsZTplLnN0cm9rZVN0eWxlfSkpO2U9dGhpcy5pO2c9dGhpcy5DO2cmJmcuZm9udD09ZS5mb250JiZnLnRleHRBbGlnbj09XG5lLnRleHRBbGlnbiYmZy50ZXh0QmFzZWxpbmU9PWUudGV4dEJhc2VsaW5lfHwoaD1bMTEsZS5mb250LGUudGV4dEFsaWduLGUudGV4dEJhc2VsaW5lXSx0aGlzLmYucHVzaChoKSx0aGlzLmIucHVzaChoKSxnPyhnLmZvbnQ9ZS5mb250LGcudGV4dEFsaWduPWUudGV4dEFsaWduLGcudGV4dEJhc2VsaW5lPWUudGV4dEJhc2VsaW5lKTp0aGlzLkM9e2ZvbnQ6ZS5mb250LHRleHRBbGlnbjplLnRleHRBbGlnbix0ZXh0QmFzZWxpbmU6ZS50ZXh0QmFzZWxpbmV9KTtlbih0aGlzLGYpO2U9dGhpcy5jb29yZGluYXRlcy5sZW5ndGg7YT1kbih0aGlzLGEsYixjLGQsITEsITEpO2E9WzUsZSxhLHRoaXMuZWEsdGhpcy51LHRoaXMuaix0aGlzLkssdGhpcy5CLCEhdGhpcy5hLCEhdGhpcy5nLHRoaXMub107dGhpcy5mLnB1c2goYSk7dGhpcy5iLnB1c2goYSk7aG4odGhpcyxmKX19O1xucW4ucHJvdG90eXBlLk5hPWZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPWEucWEoKTtiPyhiPWIuYixiPU1jKGI/Yjp6ZyksdGhpcy5hP3RoaXMuYS5maWxsU3R5bGU9Yjp0aGlzLmE9e2ZpbGxTdHlsZTpifSk6dGhpcy5hPW51bGw7dmFyIGM9YS5tYSgpO2lmKGMpe3ZhciBiPWMuYixkPWMuZyxlPWMuZixmPWMuaixnPWMuaSxoPWMuYyxjPWMudSxkPXZvaWQgMCE9PWQ/ZDpcInJvdW5kXCIsZT1lP2Uuc2xpY2UoKTpBZyxmPXZvaWQgMCE9PWY/ZjowLGc9dm9pZCAwIT09Zz9nOlwicm91bmRcIixoPXZvaWQgMCE9PWg/aDoxLGM9dm9pZCAwIT09Yz9jOjEwLGI9TWMoYj9iOkJnKTtpZih0aGlzLmcpe3ZhciBrPXRoaXMuZztrLmxpbmVDYXA9ZDtrLmxpbmVEYXNoPWU7ay5saW5lRGFzaE9mZnNldD1mO2subGluZUpvaW49ZztrLmxpbmVXaWR0aD1oO2subWl0ZXJMaW1pdD1jO2suc3Ryb2tlU3R5bGU9Yn1lbHNlIHRoaXMuZz17bGluZUNhcDpkLGxpbmVEYXNoOmUsbGluZURhc2hPZmZzZXQ6ZixsaW5lSm9pbjpnLFxubGluZVdpZHRoOmgsbWl0ZXJMaW1pdDpjLHN0cm9rZVN0eWxlOmJ9fWVsc2UgdGhpcy5nPW51bGw7dmFyIG09YS5mLGI9YS5hLGQ9YS5jLGU9YS5nLGg9YS5pLGM9YS5iLGY9YS5uYSgpLGc9YS51LGs9YS5qO2E9dm9pZCAwIT09bT9tOlwiMTBweCBzYW5zLXNlcmlmXCI7Zz12b2lkIDAhPT1nP2c6XCJjZW50ZXJcIjtrPXZvaWQgMCE9PWs/azpcIm1pZGRsZVwiO3RoaXMuaT8obT10aGlzLmksbS5mb250PWEsbS50ZXh0QWxpZ249ZyxtLnRleHRCYXNlbGluZT1rKTp0aGlzLmk9e2ZvbnQ6YSx0ZXh0QWxpZ246Zyx0ZXh0QmFzZWxpbmU6a307dGhpcy5lYT12b2lkIDAhPT1mP2Y6XCJcIjt0aGlzLnU9dm9pZCAwIT09Yj9iOjA7dGhpcy5qPXZvaWQgMCE9PWQ/ZDowO3RoaXMubz12b2lkIDAhPT1lP2U6ITE7dGhpcy5LPXZvaWQgMCE9PWg/aDowO3RoaXMuQj12b2lkIDAhPT1jP2M6MX1lbHNlIHRoaXMuZWE9XCJcIn07ZnVuY3Rpb24gcm4oYSxiLGMsZCxlKXt0aGlzLmo9YTt0aGlzLmY9Yjt0aGlzLmk9ZDt0aGlzLnU9Yzt0aGlzLmE9ZTt0aGlzLmI9e307dGhpcy5jPU9jKDEsMSk7dGhpcy5nPXFnKCl9dChybixTZyk7dmFyIHNuPXswOltbITBdXX07ZnVuY3Rpb24gdG4oYSxiLGMpe3ZhciBkLGU9TWF0aC5mbG9vcihhLmxlbmd0aC8yKTtpZihiPj1lKWZvcihkPWU7ZDxiO2QrKylhW2RdW2NdPSEwO2Vsc2UgaWYoYjxlKWZvcihkPWIrMTtkPGU7ZCsrKWFbZF1bY109ITB9XG5mdW5jdGlvbiB1bihhKXtpZih2b2lkIDAhPT1zblthXSlyZXR1cm4gc25bYV07Zm9yKHZhciBiPTIqYSsxLGM9QXJyYXkoYiksZD0wO2Q8YjtkKyspY1tkXT1BcnJheShiKTtmb3IodmFyIGI9YSxlPWQ9MDtiPj1kOyl0bihjLGErYixhK2QpLHRuKGMsYStkLGErYiksdG4oYyxhLWQsYStiKSx0bihjLGEtYixhK2QpLHRuKGMsYS1iLGEtZCksdG4oYyxhLWQsYS1iKSx0bihjLGErZCxhLWIpLHRuKGMsYStiLGEtZCksZCsrLGUrPTErMipkLDA8MiooZS1iKSsxJiYoLS1iLGUrPTEtMipiKTtyZXR1cm4gc25bYV09Y31mdW5jdGlvbiB2bihhKXtmb3IodmFyIGIgaW4gYS5iKXt2YXIgYz1hLmJbYl0sZDtmb3IoZCBpbiBjKWNbZF0uYmMoKX19XG5mdW5jdGlvbiB3bihhLGIsYyxkLGUsZil7ZT1NYXRoLnJvdW5kKGUpO3ZhciBnPTIqZSsxLGg9dGcoYS5nLGUrLjUsZSsuNSwxL2MsLTEvYywtZCwtYlswXSwtYlsxXSksaz1hLmM7ay5jYW52YXMud2lkdGghPT1nfHxrLmNhbnZhcy5oZWlnaHQhPT1nPyhrLmNhbnZhcy53aWR0aD1nLGsuY2FudmFzLmhlaWdodD1nKTprLmNsZWFyUmVjdCgwLDAsZyxnKTt2YXIgbTt2b2lkIDAhPT1hLmEmJihtPUxhKCksTWEobSxiKSxOYShtLGMqKGEuYStlKSxtKSk7dmFyIG49dW4oZSk7cmV0dXJuIHhuKGEsayxoLGQsZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWsuZ2V0SW1hZ2VEYXRhKDAsMCxnLGcpLmRhdGEsYz0wO2M8ZztjKyspZm9yKHZhciBkPTA7ZDxnO2QrKylpZihuW2NdW2RdJiYwPGJbNCooZCpnK2MpKzNdKXtpZihhPWYoYSkpcmV0dXJuIGE7ay5jbGVhclJlY3QoMCwwLGcsZyk7cmV0dXJufX0sbSl9XG5mdW5jdGlvbiB5bihhLGIsYyl7dmFyIGQ9dm9pZCAwIT09Yj9iLnRvU3RyaW5nKCk6XCIwXCI7Yj1hLmJbZF07dm9pZCAwPT09YiYmKGI9e30sYS5iW2RdPWIpO2Q9YltjXTt2b2lkIDA9PT1kJiYoZD1uZXcgem5bY10oYS5qLGEuZixhLnUsYS5pKSxiW2NdPWQpO3JldHVybiBkfVxuZnVuY3Rpb24gQW4oYSxiLGMsZCxlLGYpe3ZhciBnPU9iamVjdC5rZXlzKGEuYikubWFwKE51bWJlcik7Zy5zb3J0KG1hKTt2YXIgaD1hLmYsaz1oWzBdLG09aFsxXSxuPWhbMl0saD1oWzNdLGs9W2ssbSxrLGgsbixoLG4sbV07c2UoaywwLDgsMixkLGspO2Iuc2F2ZSgpO2IuYmVnaW5QYXRoKCk7Yi5tb3ZlVG8oa1swXSxrWzFdKTtiLmxpbmVUbyhrWzJdLGtbM10pO2IubGluZVRvKGtbNF0sa1s1XSk7Yi5saW5lVG8oa1s2XSxrWzddKTtiLmNsaXAoKTtmb3IodmFyIHAscSxrPTAsbT1nLmxlbmd0aDtrPG07KytrKWZvcihwPWEuYltnW2tdLnRvU3RyaW5nKCldLG49MCxoPVJnLmxlbmd0aDtuPGg7KytuKXE9cFtSZ1tuXV0sdm9pZCAwIT09cSYmZm4ocSxiLGMsZCxlLGYscS5mLHZvaWQgMCx2b2lkIDApO2IucmVzdG9yZSgpfVxuZnVuY3Rpb24geG4oYSxiLGMsZCxlLGYpe3ZhciBnPXt9LGg9T2JqZWN0LmtleXMoYS5iKS5tYXAoTnVtYmVyKTtoLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi1hfSk7dmFyIGssbSxuLHAscTtrPTA7Zm9yKG09aC5sZW5ndGg7azxtOysraylmb3IocD1hLmJbaFtrXS50b1N0cmluZygpXSxuPVJnLmxlbmd0aC0xOzA8PW47LS1uKWlmKHE9cFtSZ1tuXV0sdm9pZCAwIT09cSYmKHE9Zm4ocSxiLDEsYyxkLGcscS5iLGUsZikpKXJldHVybiBxfXZhciB6bj17Q2lyY2xlOm5uLEltYWdlOmpuLExpbmVTdHJpbmc6a24sUG9seWdvbjpubixUZXh0OnFufTtmdW5jdGlvbiBCbihhKXt1Yy5jYWxsKHRoaXMpO3RoaXMuYT1hfXQoQm4sdWMpO0JuLnByb3RvdHlwZS5vPXRhO2Z1bmN0aW9uIENuKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlKXtyZXR1cm4gRG4oYSxiLGQsZSxmdW5jdGlvbihhKXtjW2RdfHwoY1tkXT17fSk7Y1tkXVthLk9hLnRvU3RyaW5nKCldPWF9KX19ZnVuY3Rpb24gRW4oYSxiKXtiLmFkKCkmJmEucG9zdFJlbmRlckZ1bmN0aW9ucy5wdXNoKGZ1bmN0aW9uKGEsYixlKXtiPXcoYSkudG9TdHJpbmcoKTthLkRiKGUudmlld1N0YXRlLnByb2plY3Rpb24sZS51c2VkVGlsZXNbYl0pfS5iaW5kKG51bGwsYikpfWZ1bmN0aW9uIEZuKGEsYil7aWYoYil7dmFyIGMsZCxlO2Q9MDtmb3IoZT1iLmxlbmd0aDtkPGU7KytkKWM9YltkXSxhW3coYykudG9TdHJpbmcoKV09Y319XG5mdW5jdGlvbiBHbihhLGIpe3ZhciBjPWIuQmE7dm9pZCAwIT09YyYmKFwic3RyaW5nXCI9PT10eXBlb2YgYz9hLmxvZ29zW2NdPVwiXCI6YyYmKHgoXCJzdHJpbmdcIj09dHlwZW9mIGMuaHJlZiw0NCkseChcInN0cmluZ1wiPT10eXBlb2YgYy5zcmMsNDUpLGEubG9nb3NbYy5zcmNdPWMuaHJlZikpfTtmdW5jdGlvbiBIbihhKXtCbi5jYWxsKHRoaXMsYSk7dGhpcy5WPXFnKCl9dChIbixCbik7ZnVuY3Rpb24gSW4oYSxiLGMpe3ZhciBkPWIucGl4ZWxSYXRpbyxlPWIuc2l6ZVswXSpkLGY9Yi5zaXplWzFdKmQsZz1iLnZpZXdTdGF0ZS5yb3RhdGlvbixoPSRhKGMpLGs9W2NbMl0sY1szXV0sbT1bY1syXSxjWzFdXTtjPVtjWzBdLGNbMV1dO3NnKGIuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0saCk7c2coYi5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSxrKTtzZyhiLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLG0pO3NnKGIuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sYyk7YS5zYXZlKCk7Q2coYSwtZyxlLzIsZi8yKTthLmJlZ2luUGF0aCgpO2EubW92ZVRvKGhbMF0qZCxoWzFdKmQpO2EubGluZVRvKGtbMF0qZCxrWzFdKmQpO2EubGluZVRvKG1bMF0qZCxtWzFdKmQpO2EubGluZVRvKGNbMF0qZCxjWzFdKmQpO2EuY2xpcCgpO0NnKGEsZyxlLzIsZi8yKX1cbmZ1bmN0aW9uIEpuKGEsYixjLGQsZSl7dmFyIGY9YS5hO2lmKHRjKGYsYikpe3ZhciBnPWQuc2l6ZVswXSpkLnBpeGVsUmF0aW8saD1kLnNpemVbMV0qZC5waXhlbFJhdGlvLGs9ZC52aWV3U3RhdGUucm90YXRpb247Q2coYywtayxnLzIsaC8yKTthPWU/ZTpLbihhLGQsMCk7QShmLG5ldyB5ZyhiLG5ldyBFZyhjLGQucGl4ZWxSYXRpbyxkLmV4dGVudCxhLGQudmlld1N0YXRlLnJvdGF0aW9uKSxkLGMsbnVsbCkpO0NnKGMsayxnLzIsaC8yKX19SG4ucHJvdG90eXBlLkI9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5vKGEsYiwwLHBlLHRoaXMpKXJldHVybiBjLmNhbGwoZCx0aGlzLmEsbnVsbCl9O2Z1bmN0aW9uIEtuKGEsYixjKXt2YXIgZD1iLnZpZXdTdGF0ZSxlPWIucGl4ZWxSYXRpbyxmPWUvZC5yZXNvbHV0aW9uO3JldHVybiB0ZyhhLlYsZSpiLnNpemVbMF0vMixlKmIuc2l6ZVsxXS8yLGYsLWYsLWQucm90YXRpb24sLWQuY2VudGVyWzBdK2MsLWQuY2VudGVyWzFdKX07ZnVuY3Rpb24gTG4oYSxiKXtyZXR1cm4gdyhhKS13KGIpfWZ1bmN0aW9uIE1uKGEsYil7dmFyIGM9LjUqYS9iO3JldHVybiBjKmN9ZnVuY3Rpb24gTm4oYSxiLGMsZCxlLGYpe3ZhciBnPSExLGgsaztpZihoPWMuaWEoKSlrPWguY2MoKSwyPT1rfHwzPT1rP2guWWUoZSxmKTooMD09ayYmaC5sb2FkKCksaC5hZShlLGYpLGc9ITApO2lmKGU9KDAsYy50YSkoYikpZD1lLlJjKGQpLCgwLE9uW2QuSCgpXSkoYSxkLGMsYik7cmV0dXJuIGd9XG52YXIgT249e1BvaW50OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMuaWEoKTtpZihlKXtpZigyIT1lLmNjKCkpcmV0dXJuO3ZhciBmPXluKGEsYy5yYSgpLFwiSW1hZ2VcIik7Zi5sYyhlKTtmLktjKGIsZCl9aWYoZT1jLm5hKCkpYT15bihhLGMucmEoKSxcIlRleHRcIiksYS5OYShlKSxhLlFhKGIubCwwLDIsMixiLGQpfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMubWEoKTtpZihlKXt2YXIgZj15bihhLGMucmEoKSxcIkxpbmVTdHJpbmdcIik7Zi5TYShudWxsLGUpO2YuR2MoYixkKX1pZihlPWMubmEoKSlhPXluKGEsYy5yYSgpLFwiVGV4dFwiKSxhLk5hKGUpLGEuUWEoTGcoYiksMCwyLDIsYixkKX0sUG9seWdvbjpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jLnFhKCksZj1jLm1hKCk7aWYoZXx8Zil7dmFyIGc9eW4oYSxjLnJhKCksXCJQb2x5Z29uXCIpO2cuU2EoZSxmKTtnLkxjKGIsZCl9aWYoZT1jLm5hKCkpYT15bihhLGMucmEoKSxcIlRleHRcIiksYS5OYShlKSxhLlFhKFZlKGIpLFxuMCwyLDIsYixkKX0sTXVsdGlQb2ludDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jLmlhKCk7aWYoZSl7aWYoMiE9ZS5jYygpKXJldHVybjt2YXIgZj15bihhLGMucmEoKSxcIkltYWdlXCIpO2YubGMoZSk7Zi5JYyhiLGQpfWlmKGU9Yy5uYSgpKWE9eW4oYSxjLnJhKCksXCJUZXh0XCIpLGEuTmEoZSksYz1iLmwsYS5RYShjLDAsYy5sZW5ndGgsYi5BLGIsZCl9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jLm1hKCk7aWYoZSl7dmFyIGY9eW4oYSxjLnJhKCksXCJMaW5lU3RyaW5nXCIpO2YuU2EobnVsbCxlKTtmLkhjKGIsZCl9aWYoZT1jLm5hKCkpYT15bihhLGMucmEoKSxcIlRleHRcIiksYS5OYShlKSxjPU1nKGIpLGEuUWEoYywwLGMubGVuZ3RoLDIsYixkKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMucWEoKSxmPWMubWEoKTtpZihmfHxlKXt2YXIgZz15bihhLGMucmEoKSxcIlBvbHlnb25cIik7Zy5TYShlLGYpO2cuSmMoYixkKX1pZihlPVxuYy5uYSgpKWE9eW4oYSxjLnJhKCksXCJUZXh0XCIpLGEuTmEoZSksYz1PZyhiKSxhLlFhKGMsMCxjLmxlbmd0aCwyLGIsZCl9LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihhLGIsYyxkKXtiPWIuYTt2YXIgZSxmO2U9MDtmb3IoZj1iLmxlbmd0aDtlPGY7KytlKSgwLE9uW2JbZV0uSCgpXSkoYSxiW2VdLGMsZCl9LENpcmNsZTpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jLnFhKCksZj1jLm1hKCk7aWYoZXx8Zil7dmFyIGc9eW4oYSxjLnJhKCksXCJDaXJjbGVcIik7Zy5TYShlLGYpO2cuRmMoYixkKX1pZihlPWMubmEoKSlhPXluKGEsYy5yYSgpLFwiVGV4dFwiKSxhLk5hKGUpLGEuUWEoYi5oYSgpLDAsMiwyLGIsZCl9fTtmdW5jdGlvbiBQbihhKXtIbi5jYWxsKHRoaXMsYSk7dGhpcy5jPSExO3RoaXMuRz0tMTt0aGlzLkM9TmFOO3RoaXMuSz1MYSgpO3RoaXMuZz10aGlzLnM9bnVsbDt0aGlzLmk9T2MoKX10KFBuLEhuKTtcblBuLnByb3RvdHlwZS52PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLmV4dGVudCxlPWEucGl4ZWxSYXRpbyxmPWIuWGM/YS5za2lwcGVkRmVhdHVyZVVpZHM6e30sZz1hLnZpZXdTdGF0ZSxoPWcucHJvamVjdGlvbixnPWcucm90YXRpb24saz1oLkooKSxtPXRoaXMuYS5kYSgpLG49S24odGhpcyxhLDApO0puKHRoaXMsXCJwcmVjb21wb3NlXCIsYyxhLG4pO3ZhciBwPWIuZXh0ZW50LHE9dm9pZCAwIT09cDtxJiZJbihjLGEscCk7aWYoKHA9dGhpcy5nKSYmIWViKHAuYikpe3ZhciB1PTAsRj0wLHo7aWYodGModGhpcy5hLFwicmVuZGVyXCIpKXt6PWMuY2FudmFzLndpZHRoO3ZhciBDPWMuY2FudmFzLmhlaWdodDtpZihnKXt2YXIgRD1NYXRoLnJvdW5kKE1hdGguc3FydCh6KnorQypDKSksdT0oRC16KS8yLEY9KEQtQykvMjt6PUM9RH10aGlzLmkuY2FudmFzLndpZHRoPXo7dGhpcy5pLmNhbnZhcy5oZWlnaHQ9Qzt6PXRoaXMuaX1lbHNlIHo9YztDPXouZ2xvYmFsQWxwaGE7ei5nbG9iYWxBbHBoYT1cbmIub3BhY2l0eTt6IT1jJiZ6LnRyYW5zbGF0ZSh1LEYpO2I9YS5zaXplWzBdKmU7RD1hLnNpemVbMV0qZTtDZyh6LC1nLGIvMixELzIpO0FuKHAseixlLG4sZyxmKTtpZihtLkMmJmguYyYmIVFhKGssZCkpe2Zvcih2YXIgaD1kWzBdLG09YWIoayksRT0wO2g8a1swXTspLS1FLG49bSpFLG49S24odGhpcyxhLG4pLEFuKHAseixlLG4sZyxmKSxoKz1tO0U9MDtmb3IoaD1kWzJdO2g+a1syXTspKytFLG49bSpFLG49S24odGhpcyxhLG4pLEFuKHAseixlLG4sZyxmKSxoLT1tO249S24odGhpcyxhLDApfUNnKHosZyxiLzIsRC8yKTt6IT1jJiYoSm4odGhpcyxcInJlbmRlclwiLHosYSxuKSxjLmRyYXdJbWFnZSh6LmNhbnZhcywtdSwtRiksei50cmFuc2xhdGUoLXUsLUYpKTt6Lmdsb2JhbEFscGhhPUN9cSYmYy5yZXN0b3JlKCk7Sm4odGhpcyxcInBvc3Rjb21wb3NlXCIsYyxhLG4pfTtcblBuLnByb3RvdHlwZS5vPWZ1bmN0aW9uKGEsYixjLGQsZSl7aWYodGhpcy5nKXt2YXIgZj10aGlzLmEsZz17fTtyZXR1cm4gd24odGhpcy5nLGEsYi52aWV3U3RhdGUucmVzb2x1dGlvbixiLnZpZXdTdGF0ZS5yb3RhdGlvbixjLGZ1bmN0aW9uKGEpe3ZhciBiPXcoYSkudG9TdHJpbmcoKTtpZighKGIgaW4gZykpcmV0dXJuIGdbYl09ITAsZC5jYWxsKGUsYSxmKX0pfX07UG4ucHJvdG90eXBlLmo9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmE7YS5nKCkmJlwicmVhZHlcIj09YS5TYygpJiZ0aGlzLmIoKX07XG5Qbi5wcm90b3R5cGUuST1mdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3ZhciBiLGQ9YS5pO2Q/Yj1kLmNhbGwoYSxtKTooZD1jLkIpJiYoYj1kKGEsbSkpO2lmKGIpe2lmKGIpe2Q9ITE7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGU9MCxmPWIubGVuZ3RoO2U8ZjsrK2UpZD1ObihxLGEsYltlXSxNbihtLG4pLHRoaXMuaix0aGlzKXx8ZDtlbHNlIGQ9Tm4ocSxhLGIsTW4obSxuKSx0aGlzLmosdGhpcyl8fGQ7YT1kfWVsc2UgYT0hMTt0aGlzLmM9dGhpcy5jfHxhfX12YXIgYz10aGlzLmEsZD1jLmRhKCk7Rm4oYS5hdHRyaWJ1dGlvbnMsZC5WKTtHbihhLGQpO3ZhciBlPWEudmlld0hpbnRzWzBdLGY9YS52aWV3SGludHNbMV0sZz1jLkcsaD1jLkk7aWYoIXRoaXMuYyYmIWcmJmV8fCFoJiZmKXJldHVybiEwO3ZhciBrPWEuZXh0ZW50LGg9YS52aWV3U3RhdGUsZT1oLnByb2plY3Rpb24sbT1oLnJlc29sdXRpb24sbj1hLnBpeGVsUmF0aW8sZj1jLmYscD1jLm8sZz1jLmdldChRbik7XG52b2lkIDA9PT1nJiYoZz1Mbik7az1OYShrLHAqbSk7cD1oLnByb2plY3Rpb24uSigpO2QuQyYmaC5wcm9qZWN0aW9uLmMmJiFRYShwLGEuZXh0ZW50KSYmKGE9TWF0aC5tYXgoYWIoaykvMixhYihwKSksa1swXT1wWzBdLWEsa1syXT1wWzJdK2EpO2lmKCF0aGlzLmMmJnRoaXMuQz09bSYmdGhpcy5HPT1mJiZ0aGlzLnM9PWcmJlFhKHRoaXMuSyxrKSlyZXR1cm4hMDt0aGlzLmc9bnVsbDt0aGlzLmM9ITE7dmFyIHE9bmV3IHJuKC41Km0vbixrLG0sZC5EYSxjLm8pO2QuV2MoayxtLGUpO2lmKGcpe3ZhciB1PVtdO1JuKGQsayxmdW5jdGlvbihhKXt1LnB1c2goYSl9LHRoaXMpO3Uuc29ydChnKTt1LmZvckVhY2goYix0aGlzKX1lbHNlIFJuKGQsayxiLHRoaXMpO3ZuKHEpO3RoaXMuQz1tO3RoaXMuRz1mO3RoaXMucz1nO3RoaXMuSz1rO3RoaXMuZz1xO3JldHVybiEwfTtmdW5jdGlvbiBTbihhKXthPWE/YTp7fTt2YXIgYj1iYih7fSxhKTtkZWxldGUgYi5zdHlsZTtkZWxldGUgYi5yZW5kZXJCdWZmZXI7ZGVsZXRlIGIudXBkYXRlV2hpbGVBbmltYXRpbmc7ZGVsZXRlIGIudXBkYXRlV2hpbGVJbnRlcmFjdGluZztuZy5jYWxsKHRoaXMsYik7dGhpcy5vPXZvaWQgMCE9PWEucmVuZGVyQnVmZmVyP2EucmVuZGVyQnVmZmVyOjEwMDt0aGlzLnY9bnVsbDt0aGlzLkI9dm9pZCAwO3RoaXMucyhhLnN0eWxlKTt0aGlzLkc9dm9pZCAwIT09YS51cGRhdGVXaGlsZUFuaW1hdGluZz9hLnVwZGF0ZVdoaWxlQW5pbWF0aW5nOiExO3RoaXMuST12b2lkIDAhPT1hLnVwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc/YS51cGRhdGVXaGlsZUludGVyYWN0aW5nOiExfXQoU24sbmcpO1NuLnByb3RvdHlwZS5FYz1mdW5jdGlvbihhKXt2YXIgYj1udWxsO1wiY2FudmFzXCI9PT1hLkgoKSYmKGI9bmV3IFBuKHRoaXMpKTtyZXR1cm4gYn07XG5Tbi5wcm90b3R5cGUucz1mdW5jdGlvbihhKXt0aGlzLnY9dm9pZCAwIT09YT9hOkRoO3RoaXMuQj1udWxsPT09YT92b2lkIDA6QmgodGhpcy52KTt0aGlzLmIoKX07dmFyIFFuPVwicmVuZGVyT3JkZXJcIjtmdW5jdGlvbiBUbigpe3JldHVybltbLUluZmluaXR5LC1JbmZpbml0eSxJbmZpbml0eSxJbmZpbml0eV1dfTtmdW5jdGlvbiBVbihhKXt2Yy5jYWxsKHRoaXMpO3RoaXMuJD1IYihhLnByb2plY3Rpb24pO3RoaXMuVj1WbihhLmF0dHJpYnV0aW9ucyk7dGhpcy5CYT1hLmxvZ287dGhpcy5DYT12b2lkIDAhPT1hLnN0YXRlP2Euc3RhdGU6XCJyZWFkeVwiO3RoaXMuQz12b2lkIDAhPT1hLndyYXBYP2Eud3JhcFg6ITF9dChVbix2Yyk7ZnVuY3Rpb24gVm4oYSl7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybltuZXcgZWMoe2h0bWw6YX0pXTtpZihhIGluc3RhbmNlb2YgZWMpcmV0dXJuW2FdO2lmKEFycmF5LmlzQXJyYXkoYSkpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPUFycmF5KGIpLGQ9MDtkPGI7ZCsrKXt2YXIgZT1hW2RdO2NbZF09XCJzdHJpbmdcIj09PXR5cGVvZiBlP25ldyBlYyh7aHRtbDplfSk6ZX1yZXR1cm4gY31yZXR1cm4gbnVsbH1Vbi5wcm90b3R5cGUuY2E9dGE7ZnVuY3Rpb24gV24oYSl7YT1hfHx7fTtVbi5jYWxsKHRoaXMse2F0dHJpYnV0aW9uczphLmF0dHJpYnV0aW9ucyxsb2dvOmEubG9nbyxwcm9qZWN0aW9uOnZvaWQgMCxzdGF0ZTpcInJlYWR5XCIsd3JhcFg6dm9pZCAwIT09YS53cmFwWD9hLndyYXBYOiEwfSk7dGhpcy5HPXRhO3RoaXMuST1hLmZvcm1hdDt0aGlzLkRhPXZvaWQgMD09YS5vdmVybGFwcz8hMDphLm92ZXJsYXBzO3RoaXMuc2E9YS51cmw7YS5sb2FkZXI/dGhpcy5HPWEubG9hZGVyOnZvaWQgMCE9PXRoaXMuc2EmJih4KHRoaXMuSSw3KSx0aGlzLkc9VGgodGhpcy5zYSx0aGlzLkkpKTt0aGlzLmNiPWEuc3RyYXRlZ3k/YS5zdHJhdGVneTpUbjt2YXIgYj12b2lkIDAhPT1hLnVzZVNwYXRpYWxJbmRleD9hLnVzZVNwYXRpYWxJbmRleDohMDt0aGlzLmE9Yj9uZXcgVmc6bnVsbDt0aGlzLlc9bmV3IFZnO3RoaXMuYz17fTt0aGlzLmk9e307dGhpcy5qPXt9O3RoaXMubz17fTt0aGlzLmc9bnVsbDt2YXIgYyxkO2EuZmVhdHVyZXMgaW5zdGFuY2VvZlxuQWM/KGM9YS5mZWF0dXJlcyxkPWMuYSk6QXJyYXkuaXNBcnJheShhLmZlYXR1cmVzKSYmKGQ9YS5mZWF0dXJlcyk7Ynx8Y3x8KGM9bmV3IEFjKGQpKTtkJiZYbih0aGlzLGQpO2MmJlluKHRoaXMsYyl9dChXbixVbik7bD1Xbi5wcm90b3R5cGU7bC5QYT1mdW5jdGlvbihhKXt2YXIgYj13KGEpLnRvU3RyaW5nKCk7aWYoWm4odGhpcyxiLGEpKXskbih0aGlzLGIsYSk7dmFyIGM9YS5SKCk7Yz8oYj1jLkooKSx0aGlzLmEmJnRoaXMuYS5iYShiLGEpKTp0aGlzLmNbYl09YTtBKHRoaXMsbmV3IGFvKFwiYWRkZmVhdHVyZVwiLGEpKX10aGlzLmIoKX07ZnVuY3Rpb24gJG4oYSxiLGMpe2Eub1tiXT1beShjLFwiY2hhbmdlXCIsYS5BZSxhKSx5KGMsXCJwcm9wZXJ0eWNoYW5nZVwiLGEuQWUsYSldfVxuZnVuY3Rpb24gWm4oYSxiLGMpe3ZhciBkPSEwLGU9Yy5hO3ZvaWQgMCE9PWU/ZS50b1N0cmluZygpaW4gYS5pP2Q9ITE6YS5pW2UudG9TdHJpbmcoKV09YzooeCghKGIgaW4gYS5qKSwzMCksYS5qW2JdPWMpO3JldHVybiBkfWwudWI9ZnVuY3Rpb24oYSl7WG4odGhpcyxhKTt0aGlzLmIoKX07ZnVuY3Rpb24gWG4oYSxiKXt2YXIgYyxkLGUsZixnPVtdLGg9W10saz1bXTtkPTA7Zm9yKGU9Yi5sZW5ndGg7ZDxlO2QrKylmPWJbZF0sYz13KGYpLnRvU3RyaW5nKCksWm4oYSxjLGYpJiZoLnB1c2goZik7ZD0wO2ZvcihlPWgubGVuZ3RoO2Q8ZTtkKyspe2Y9aFtkXTtjPXcoZikudG9TdHJpbmcoKTskbihhLGMsZik7dmFyIG09Zi5SKCk7bT8oYz1tLkooKSxnLnB1c2goYyksay5wdXNoKGYpKTphLmNbY109Zn1hLmEmJmEuYS5sb2FkKGcsayk7ZD0wO2ZvcihlPWgubGVuZ3RoO2Q8ZTtkKyspQShhLG5ldyBhbyhcImFkZGZlYXR1cmVcIixoW2RdKSl9XG5mdW5jdGlvbiBZbihhLGIpe3ZhciBjPSExO3koYSxcImFkZGZlYXR1cmVcIixmdW5jdGlvbihhKXtjfHwoYz0hMCxiLnB1c2goYS5mZWF0dXJlKSxjPSExKX0pO3koYSxcInJlbW92ZWZlYXR1cmVcIixmdW5jdGlvbihhKXtjfHwoYz0hMCxiLnJlbW92ZShhLmZlYXR1cmUpLGM9ITEpfSk7eShiLFwiYWRkXCIsZnVuY3Rpb24oYSl7Y3x8KGM9ITAsdGhpcy5QYShhLmVsZW1lbnQpLGM9ITEpfSxhKTt5KGIsXCJyZW1vdmVcIixmdW5jdGlvbihhKXtjfHwoYz0hMCx0aGlzLkphKGEuZWxlbWVudCksYz0hMSl9LGEpO2EuZz1ifVxubC5jbGVhcj1mdW5jdGlvbihhKXtpZihhKXtmb3IodmFyIGIgaW4gdGhpcy5vKXRoaXMub1tiXS5mb3JFYWNoKGljKTt0aGlzLmd8fCh0aGlzLm89e30sdGhpcy5pPXt9LHRoaXMuaj17fSl9ZWxzZSBpZih0aGlzLmEpe3RoaXMuYS5mb3JFYWNoKHRoaXMucGQsdGhpcyk7Zm9yKHZhciBjIGluIHRoaXMuYyl0aGlzLnBkKHRoaXMuY1tjXSl9dGhpcy5nJiZ0aGlzLmcuY2xlYXIoKTt0aGlzLmEmJnRoaXMuYS5jbGVhcigpO3RoaXMuVy5jbGVhcigpO3RoaXMuYz17fTtBKHRoaXMsbmV3IGFvKFwiY2xlYXJcIikpO3RoaXMuYigpfTtmdW5jdGlvbiBSbihhLGIsYyxkKXthLmE/JGcoYS5hLGIsYyxkKTphLmcmJmEuZy5mb3JFYWNoKGMsZCl9bC5iZD1mdW5jdGlvbigpe3ZhciBhO3RoaXMuZz9hPXRoaXMuZy5hOnRoaXMuYSYmKGE9WGcodGhpcy5hKSxlYih0aGlzLmMpfHxvYShhLGRiKHRoaXMuYykpKTtyZXR1cm4gYX07bC5KPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmEuSihhKX07XG5sLlVmPWZ1bmN0aW9uKGEpe2E9dGhpcy5pW2EudG9TdHJpbmcoKV07cmV0dXJuIHZvaWQgMCE9PWE/YTpudWxsfTtsLkVoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuSX07bC5BZT1mdW5jdGlvbihhKXthPWEudGFyZ2V0O3ZhciBiPXcoYSkudG9TdHJpbmcoKSxjPWEuUigpO2M/KGM9Yy5KKCksYiBpbiB0aGlzLmM/KGRlbGV0ZSB0aGlzLmNbYl0sdGhpcy5hJiZ0aGlzLmEuYmEoYyxhKSk6dGhpcy5hJiZXZyh0aGlzLmEsYyxhKSk6YiBpbiB0aGlzLmN8fCh0aGlzLmEmJnRoaXMuYS5yZW1vdmUoYSksdGhpcy5jW2JdPWEpO2M9YS5hO3ZvaWQgMCE9PWM/KGM9Yy50b1N0cmluZygpLGIgaW4gdGhpcy5qPyhkZWxldGUgdGhpcy5qW2JdLHRoaXMuaVtjXT1hKTp0aGlzLmlbY10hPT1hJiYoYm8odGhpcyxhKSx0aGlzLmlbY109YSkpOmIgaW4gdGhpcy5qfHwoYm8odGhpcyxhKSx0aGlzLmpbYl09YSk7dGhpcy5iKCk7QSh0aGlzLG5ldyBhbyhcImNoYW5nZWZlYXR1cmVcIixhKSl9O1xubC5XYz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5XO2E9dGhpcy5jYihhLGIpO3ZhciBlLGY7ZT0wO2ZvcihmPWEubGVuZ3RoO2U8ZjsrK2Upe3ZhciBnPWFbZV07JGcoZCxnLGZ1bmN0aW9uKGEpe3JldHVybiBRYShhLmV4dGVudCxnKX0pfHwodGhpcy5HLmNhbGwodGhpcyxnLGIsYyksZC5iYShnLHtleHRlbnQ6Zy5zbGljZSgpfSkpfX07bC5KYT1mdW5jdGlvbihhKXt2YXIgYj13KGEpLnRvU3RyaW5nKCk7YiBpbiB0aGlzLmM/ZGVsZXRlIHRoaXMuY1tiXTp0aGlzLmEmJnRoaXMuYS5yZW1vdmUoYSk7dGhpcy5wZChhKTt0aGlzLmIoKX07bC5wZD1mdW5jdGlvbihhKXt2YXIgYj13KGEpLnRvU3RyaW5nKCk7dGhpcy5vW2JdLmZvckVhY2goaWMpO2RlbGV0ZSB0aGlzLm9bYl07dmFyIGM9YS5hO3ZvaWQgMCE9PWM/ZGVsZXRlIHRoaXMuaVtjLnRvU3RyaW5nKCldOmRlbGV0ZSB0aGlzLmpbYl07QSh0aGlzLG5ldyBhbyhcInJlbW92ZWZlYXR1cmVcIixhKSl9O1xuZnVuY3Rpb24gYm8oYSxiKXtmb3IodmFyIGMgaW4gYS5pKWlmKGEuaVtjXT09PWIpe2RlbGV0ZSBhLmlbY107YnJlYWt9fWZ1bmN0aW9uIGFvKGEsYil7cWMuY2FsbCh0aGlzLGEpO3RoaXMuZmVhdHVyZT1ifXQoYW8scWMpO2Z1bmN0aW9uIGNvKGEpe3ZmLmNhbGwodGhpcyx7aGFuZGxlRG93bkV2ZW50OmVvLGhhbmRsZUV2ZW50OmZvLGhhbmRsZVVwRXZlbnQ6Z299KTt0aGlzLkk9ITE7dGhpcy4kPW51bGw7dGhpcy5pPSExO3RoaXMuRGE9YS5zb3VyY2U/YS5zb3VyY2U6bnVsbDt0aGlzLkJhPWEuZmVhdHVyZXM/YS5mZWF0dXJlczpudWxsO3RoaXMuTmY9YS5zbmFwVG9sZXJhbmNlP2Euc25hcFRvbGVyYW5jZToxMjt0aGlzLlc9YS50eXBlO3RoaXMuYz1obyh0aGlzLlcpO3RoaXMueWE9YS5taW5Qb2ludHM/YS5taW5Qb2ludHM6dGhpcy5jPT09aW8/MzoyO3RoaXMuc2E9YS5tYXhQb2ludHM/YS5tYXhQb2ludHM6SW5maW5pdHk7dGhpcy50Yz1hLmZpbmlzaENvbmRpdGlvbj9hLmZpbmlzaENvbmRpdGlvbjpwZTt2YXIgYj1hLmdlb21ldHJ5RnVuY3Rpb247aWYoIWIpaWYoXCJDaXJjbGVcIj09PXRoaXMuVyliPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yj9iOm5ldyBYbShbTmFOLE5hTl0pO1ltKGMsYVswXSxNYXRoLnNxcnQobWUoYVswXSxcbmFbMV0pKSk7cmV0dXJuIGN9O2Vsc2V7dmFyIGMsZD10aGlzLmM7ZD09PWpvP2M9TWU6ZD09PWtvP2M9UzpkPT09aW8mJihjPUIpO2I9ZnVuY3Rpb24oYSxiKXt2YXIgZT1iO2U/ZD09PWlvP2UuWShbYVswXS5jb25jYXQoW2FbMF1bMF1dKV0pOmUuWShhKTplPW5ldyBjKGEpO3JldHVybiBlfX10aGlzLnRhPWI7dGhpcy5HPXRoaXMucz10aGlzLmE9dGhpcy5DPXRoaXMuaj10aGlzLm89bnVsbDt0aGlzLmJiPWEuY2xpY2tUb2xlcmFuY2U/YS5jbGlja1RvbGVyYW5jZSphLmNsaWNrVG9sZXJhbmNlOjM2O3RoaXMuY2E9bmV3IFNuKHtzb3VyY2U6bmV3IFduKHt1c2VTcGF0aWFsSW5kZXg6ITEsd3JhcFg6YS53cmFwWD9hLndyYXBYOiExfSksc3R5bGU6YS5zdHlsZT9hLnN0eWxlOmxvKCl9KTt0aGlzLkNhPWEuZ2VvbWV0cnlOYW1lO3RoaXMuTWY9YS5jb25kaXRpb24/YS5jb25kaXRpb246cWY7dGhpcy51Yz1hLmZyZWVoYW5kP3BlOmEuZnJlZWhhbmRDb25kaXRpb24/YS5mcmVlaGFuZENvbmRpdGlvbjpcbnJmO3kodGhpcyx4YyhcImFjdGl2ZVwiKSx0aGlzLmNiLHRoaXMpfXQoY28sdmYpO2Z1bmN0aW9uIGxvKCl7dmFyIGE9RWgoKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGFbYi5SKCkuSCgpXX19Y28ucHJvdG90eXBlLnNldE1hcD1mdW5jdGlvbihhKXt2Zi5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcyxhKTt0aGlzLmNiKCl9O2Z1bmN0aW9uIGZvKGEpe3RoaXMuaT10aGlzLmMhPT1qbyYmdGhpcy51YyhhKTt2YXIgYj0hdGhpcy5pO3RoaXMuaSYmXCJwb2ludGVyZHJhZ1wiPT09YS50eXBlJiZudWxsIT09dGhpcy5qPyhtbyh0aGlzLGEpLGI9ITEpOlwicG9pbnRlcm1vdmVcIj09PWEudHlwZT9iPW5vKHRoaXMsYSk6XCJkYmxjbGlja1wiPT09YS50eXBlJiYoYj0hMSk7cmV0dXJuIHdmLmNhbGwodGhpcyxhKSYmYn1cbmZ1bmN0aW9uIGVvKGEpe3RoaXMuST0hdGhpcy5pO3JldHVybiB0aGlzLmk/KHRoaXMuJD1hLnBpeGVsLHRoaXMub3x8b28odGhpcyxhKSwhMCk6dGhpcy5NZihhKT8odGhpcy4kPWEucGl4ZWwsITApOiExfWZ1bmN0aW9uIGdvKGEpe3ZhciBiPSEwO25vKHRoaXMsYSk7dmFyIGM9dGhpcy5jPT09cG87dGhpcy5JPyh0aGlzLm8/dGhpcy5pfHxjP3FvKHRoaXMpOnJvKHRoaXMsYSk/dGhpcy50YyhhKSYmcW8odGhpcyk6bW8odGhpcyxhKToob28odGhpcyxhKSx0aGlzLmM9PT1qbyYmcW8odGhpcykpLGI9ITEpOnRoaXMuaSYmKHRoaXMubz1udWxsLHNvKHRoaXMpKTtyZXR1cm4gYn1cbmZ1bmN0aW9uIG5vKGEsYil7aWYoYS4kJiYoIWEuaSYmYS5JfHxhLmkmJiFhLkkpKXt2YXIgYz1hLiQsZD1iLnBpeGVsLGU9Y1swXS1kWzBdLGM9Y1sxXS1kWzFdLGU9ZSplK2MqYzthLkk9YS5pP2U+YS5iYjplPD1hLmJifWEubz8oZT1iLmNvb3JkaW5hdGUsYz1hLmouUigpLGEuYz09PWpvP2Q9YS5hOmEuYz09PWlvPyhkPWEuYVswXSxkPWRbZC5sZW5ndGgtMV0scm8oYSxiKSYmKGU9YS5vLnNsaWNlKCkpKTooZD1hLmEsZD1kW2QubGVuZ3RoLTFdKSxkWzBdPWVbMF0sZFsxXT1lWzFdLGEudGEoYS5hLGMpLGEuQyYmYS5DLlIoKS5ZKGUpLGMgaW5zdGFuY2VvZiBCJiZhLmMhPT1pbz8oYS5zfHwoYS5zPW5ldyBJKG5ldyBTKG51bGwpKSksYz1jLlZkKDApLGU9YS5zLlIoKSxiaShlLGMuWCxjLmwpKTphLkcmJihlPWEucy5SKCksZS5ZKGEuRykpLHRvKGEpKTooZT1iLmNvb3JkaW5hdGUuc2xpY2UoKSxhLkM/YS5DLlIoKS5ZKGUpOihhLkM9bmV3IEkobmV3IE1lKGUpKSx0byhhKSkpO1xucmV0dXJuITB9ZnVuY3Rpb24gcm8oYSxiKXt2YXIgYz0hMTtpZihhLmope3ZhciBkPSExLGU9W2Eub107YS5jPT09a28/ZD1hLmEubGVuZ3RoPmEueWE6YS5jPT09aW8mJihkPWEuYVswXS5sZW5ndGg+YS55YSxlPVthLmFbMF1bMF0sYS5hWzBdW2EuYVswXS5sZW5ndGgtMl1dKTtpZihkKWZvcih2YXIgZD1iLm1hcCxmPTAsZz1lLmxlbmd0aDtmPGc7ZisrKXt2YXIgaD1lW2ZdLGs9Q2YoZCxoKSxtPWIucGl4ZWwsYz1tWzBdLWtbMF0saz1tWzFdLWtbMV07aWYoYz1NYXRoLnNxcnQoYypjK2sqayk8PShhLmk/MTphLk5mKSl7YS5vPWg7YnJlYWt9fX1yZXR1cm4gY31cbmZ1bmN0aW9uIG9vKGEsYil7dmFyIGM9Yi5jb29yZGluYXRlO2Eubz1jO2EuYz09PWpvP2EuYT1jLnNsaWNlKCk6YS5jPT09aW8/KGEuYT1bW2Muc2xpY2UoKSxjLnNsaWNlKCldXSxhLkc9YS5hWzBdKTooYS5hPVtjLnNsaWNlKCksYy5zbGljZSgpXSxhLmM9PT1wbyYmKGEuRz1hLmEpKTthLkcmJihhLnM9bmV3IEkobmV3IFMoYS5HKSkpO2M9YS50YShhLmEpO2Euaj1uZXcgSTthLkNhJiZhLmoucGIoYS5DYSk7YS5qLnhhKGMpO3RvKGEpO0EoYSxuZXcgdW8oXCJkcmF3c3RhcnRcIixhLmopKX1cbmZ1bmN0aW9uIG1vKGEsYil7dmFyIGM9Yi5jb29yZGluYXRlLGQ9YS5qLlIoKSxlLGY7YS5jPT09a28/KGEubz1jLnNsaWNlKCksZj1hLmEsZi5sZW5ndGg+PWEuc2EmJihhLmk/Zi5wb3AoKTplPSEwKSxmLnB1c2goYy5zbGljZSgpKSxhLnRhKGYsZCkpOmEuYz09PWlvJiYoZj1hLmFbMF0sZi5sZW5ndGg+PWEuc2EmJihhLmk/Zi5wb3AoKTplPSEwKSxmLnB1c2goYy5zbGljZSgpKSxlJiYoYS5vPWZbMF0pLGEudGEoYS5hLGQpKTt0byhhKTtlJiZxbyhhKX1cbmZ1bmN0aW9uIHFvKGEpe3ZhciBiPXNvKGEpLGM9YS5hLGQ9Yi5SKCk7YS5jPT09a28/KGMucG9wKCksYS50YShjLGQpKTphLmM9PT1pbyYmKGNbMF0ucG9wKCksYS50YShjLGQpLGM9ZC5EKCkpO1wiTXVsdGlQb2ludFwiPT09YS5XP2IueGEobmV3IGZpKFtjXSkpOlwiTXVsdGlMaW5lU3RyaW5nXCI9PT1hLlc/Yi54YShuZXcgY2koW2NdKSk6XCJNdWx0aVBvbHlnb25cIj09PWEuVyYmYi54YShuZXcgaGkoW2NdKSk7QShhLG5ldyB1byhcImRyYXdlbmRcIixiKSk7YS5CYSYmYS5CYS5wdXNoKGIpO2EuRGEmJmEuRGEuUGEoYil9ZnVuY3Rpb24gc28oYSl7YS5vPW51bGw7dmFyIGI9YS5qO2ImJihhLmo9bnVsbCxhLkM9bnVsbCxhLnM9bnVsbCxhLmNhLmRhKCkuY2xlYXIoITApKTtyZXR1cm4gYn1jby5wcm90b3R5cGUuYWI9cWU7XG5mdW5jdGlvbiB0byhhKXt2YXIgYj1bXTthLmomJmIucHVzaChhLmopO2EucyYmYi5wdXNoKGEucyk7YS5DJiZiLnB1c2goYS5DKTthPWEuY2EuZGEoKTthLmNsZWFyKCEwKTthLnViKGIpfWNvLnByb3RvdHlwZS5jYj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuQixiPXRoaXMuZ2V0KFwiYWN0aXZlXCIpO2EmJmJ8fHNvKHRoaXMpO3RoaXMuY2Euc2V0TWFwKGI/YTpudWxsKX07ZnVuY3Rpb24gaG8oYSl7dmFyIGI7XCJQb2ludFwiPT09YXx8XCJNdWx0aVBvaW50XCI9PT1hP2I9am86XCJMaW5lU3RyaW5nXCI9PT1hfHxcIk11bHRpTGluZVN0cmluZ1wiPT09YT9iPWtvOlwiUG9seWdvblwiPT09YXx8XCJNdWx0aVBvbHlnb25cIj09PWE/Yj1pbzpcIkNpcmNsZVwiPT09YSYmKGI9cG8pO3JldHVybiBifXZhciBqbz1cIlBvaW50XCIsa289XCJMaW5lU3RyaW5nXCIsaW89XCJQb2x5Z29uXCIscG89XCJDaXJjbGVcIjtmdW5jdGlvbiB1byhhLGIpe3FjLmNhbGwodGhpcyxhKTt0aGlzLmZlYXR1cmU9Yn10KHVvLHFjKTtmdW5jdGlvbiB2byhhKXt2Zi5jYWxsKHRoaXMse2hhbmRsZURvd25FdmVudDp3byxoYW5kbGVEcmFnRXZlbnQ6eG8saGFuZGxlRXZlbnQ6eW8saGFuZGxlVXBFdmVudDp6b30pO3RoaXMuRGE9YS5jb25kaXRpb24/YS5jb25kaXRpb246dWY7dGhpcy5CYT1mdW5jdGlvbihhKXtyZXR1cm4gcWYoYSkmJnBmKGEpfTt0aGlzLkNhPWEuZGVsZXRlQ29uZGl0aW9uP2EuZGVsZXRlQ29uZGl0aW9uOnRoaXMuQmE7dGhpcy55YT10aGlzLmM9bnVsbDt0aGlzLnNhPVswLDBdO3RoaXMucz10aGlzLkc9ITE7dGhpcy5hPW5ldyBWZzt0aGlzLiQ9dm9pZCAwIT09YS5waXhlbFRvbGVyYW5jZT9hLnBpeGVsVG9sZXJhbmNlOjEwO3RoaXMuaj10aGlzLmNhPSExO3RoaXMuaT1bXTt0aGlzLkM9bmV3IFNuKHtzb3VyY2U6bmV3IFduKHt1c2VTcGF0aWFsSW5kZXg6ITEsd3JhcFg6ISFhLndyYXBYfSksc3R5bGU6YS5zdHlsZT9hLnN0eWxlOkFvKCksdXBkYXRlV2hpbGVBbmltYXRpbmc6ITAsdXBkYXRlV2hpbGVJbnRlcmFjdGluZzohMH0pO1xudGhpcy5XPXtQb2ludDp0aGlzLnZoLExpbmVTdHJpbmc6dGhpcy53ZSxMaW5lYXJSaW5nOnRoaXMud2UsUG9seWdvbjp0aGlzLndoLE11bHRpUG9pbnQ6dGhpcy50aCxNdWx0aUxpbmVTdHJpbmc6dGhpcy5zaCxNdWx0aVBvbHlnb246dGhpcy51aCxDaXJjbGU6dGhpcy55aSxHZW9tZXRyeUNvbGxlY3Rpb246dGhpcy5yaH07dGhpcy5vPWEuZmVhdHVyZXM7dGhpcy5vLmZvckVhY2godGhpcy4kYyx0aGlzKTt5KHRoaXMubyxcImFkZFwiLHRoaXMucGgsdGhpcyk7eSh0aGlzLm8sXCJyZW1vdmVcIix0aGlzLnFoLHRoaXMpO3RoaXMuST1udWxsfXQodm8sdmYpO2w9dm8ucHJvdG90eXBlO2wuJGM9ZnVuY3Rpb24oYSl7dmFyIGI9YS5SKCk7YiYmYi5IKClpbiB0aGlzLlcmJnRoaXMuV1tiLkgoKV0uY2FsbCh0aGlzLGEsYik7KGI9dGhpcy5CKSYmYi5jJiZ0aGlzLmdldChcImFjdGl2ZVwiKSYmQm8odGhpcyx0aGlzLnNhLGIpO3koYSxcImNoYW5nZVwiLHRoaXMudmUsdGhpcyl9O1xuZnVuY3Rpb24gQ28oYSxiKXthLnN8fChhLnM9ITAsQShhLG5ldyBEbyhcIm1vZGlmeXN0YXJ0XCIsYS5vLGIpKSl9ZnVuY3Rpb24gRW8oYSxiKXtGbyhhLGIpO2EuYyYmIWEuby5XYSgpJiYoYS5DLmRhKCkuSmEoYS5jKSxhLmM9bnVsbCk7bmMoYixcImNoYW5nZVwiLGEudmUsYSl9ZnVuY3Rpb24gRm8oYSxiKXt2YXIgYz1hLmEsZD1bXTtjLmZvckVhY2goZnVuY3Rpb24oYSl7Yj09PWEuZmVhdHVyZSYmZC5wdXNoKGEpfSk7Zm9yKHZhciBlPWQubGVuZ3RoLTE7MDw9ZTstLWUpYy5yZW1vdmUoZFtlXSl9bC5ZYT1mdW5jdGlvbihhKXt0aGlzLmMmJiFhJiYodGhpcy5DLmRhKCkuSmEodGhpcy5jKSx0aGlzLmM9bnVsbCk7dmYucHJvdG90eXBlLllhLmNhbGwodGhpcyxhKX07bC5zZXRNYXA9ZnVuY3Rpb24oYSl7dGhpcy5DLnNldE1hcChhKTt2Zi5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcyxhKX07bC5waD1mdW5jdGlvbihhKXt0aGlzLiRjKGEuZWxlbWVudCl9O1xubC52ZT1mdW5jdGlvbihhKXt0aGlzLmp8fChhPWEudGFyZ2V0LEVvKHRoaXMsYSksdGhpcy4kYyhhKSl9O2wucWg9ZnVuY3Rpb24oYSl7RW8odGhpcyxhLmVsZW1lbnQpfTtsLnZoPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5EKCksYz17ZmVhdHVyZTphLGdlb21ldHJ5OmIsVDpbYyxjXX07dGhpcy5hLmJhKGIuSigpLGMpfTtsLnRoPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5EKCksZCxlLGY7ZT0wO2ZvcihmPWMubGVuZ3RoO2U8ZjsrK2UpZD1jW2VdLGQ9e2ZlYXR1cmU6YSxnZW9tZXRyeTpiLGRlcHRoOltlXSxpbmRleDplLFQ6W2QsZF19LHRoaXMuYS5iYShiLkooKSxkKX07bC53ZT1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRCgpLGQsZSxmLGc7ZD0wO2ZvcihlPWMubGVuZ3RoLTE7ZDxlOysrZClmPWMuc2xpY2UoZCxkKzIpLGc9e2ZlYXR1cmU6YSxnZW9tZXRyeTpiLGluZGV4OmQsVDpmfSx0aGlzLmEuYmEoS2EoZiksZyl9O1xubC5zaD1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRCgpLGQsZSxmLGcsaCxrLG07Zz0wO2ZvcihoPWMubGVuZ3RoO2c8aDsrK2cpZm9yKGQ9Y1tnXSxlPTAsZj1kLmxlbmd0aC0xO2U8ZjsrK2Upaz1kLnNsaWNlKGUsZSsyKSxtPXtmZWF0dXJlOmEsZ2VvbWV0cnk6YixkZXB0aDpbZ10saW5kZXg6ZSxUOmt9LHRoaXMuYS5iYShLYShrKSxtKX07bC53aD1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRCgpLGQsZSxmLGcsaCxrLG07Zz0wO2ZvcihoPWMubGVuZ3RoO2c8aDsrK2cpZm9yKGQ9Y1tnXSxlPTAsZj1kLmxlbmd0aC0xO2U8ZjsrK2Upaz1kLnNsaWNlKGUsZSsyKSxtPXtmZWF0dXJlOmEsZ2VvbWV0cnk6YixkZXB0aDpbZ10saW5kZXg6ZSxUOmt9LHRoaXMuYS5iYShLYShrKSxtKX07XG5sLnVoPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5EKCksZCxlLGYsZyxoLGssbSxuLHAscTtrPTA7Zm9yKG09Yy5sZW5ndGg7azxtOysraylmb3Iobj1jW2tdLGc9MCxoPW4ubGVuZ3RoO2c8aDsrK2cpZm9yKGQ9bltnXSxlPTAsZj1kLmxlbmd0aC0xO2U8ZjsrK2UpcD1kLnNsaWNlKGUsZSsyKSxxPXtmZWF0dXJlOmEsZ2VvbWV0cnk6YixkZXB0aDpbZyxrXSxpbmRleDplLFQ6cH0sdGhpcy5hLmJhKEthKHApLHEpfTtsLnlpPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5oYSgpLGQ9e2ZlYXR1cmU6YSxnZW9tZXRyeTpiLGluZGV4OjAsVDpbYyxjXX0sZT17ZmVhdHVyZTphLGdlb21ldHJ5OmIsaW5kZXg6MSxUOltjLGNdfTtkLk1jPWUuTWM9W2QsZV07dGhpcy5hLmJhKFRhKGMpLGQpO3RoaXMuYS5iYShiLkooKSxlKX07bC5yaD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9Yi5hO2ZvcihjPTA7YzxkLmxlbmd0aDsrK2MpdGhpcy5XW2RbY10uSCgpXS5jYWxsKHRoaXMsYSxkW2NdKX07XG5mdW5jdGlvbiBHbyhhLGIpe3ZhciBjPWEuYztjP2MuUigpLlkoYik6KGM9bmV3IEkobmV3IE1lKGIpKSxhLmM9YyxhLkMuZGEoKS5QYShjKSl9ZnVuY3Rpb24gSG8oYSxiKXtyZXR1cm4gYS5pbmRleC1iLmluZGV4fVxuZnVuY3Rpb24gd28oYSl7aWYoIXRoaXMuRGEoYSkpcmV0dXJuITE7Qm8odGhpcyxhLnBpeGVsLGEubWFwKTt2YXIgYj1hLm1hcC5FYShhLnBpeGVsKTt0aGlzLmkubGVuZ3RoPTA7dGhpcy5zPSExO3ZhciBjPXRoaXMuYztpZihjKXt2YXIgZD1bXSxjPWMuUigpLkQoKSxlPUthKFtjXSksZT1ZZyh0aGlzLmEsZSksZj17fTtlLnNvcnQoSG8pO2Zvcih2YXIgZz0wLGg9ZS5sZW5ndGg7ZzxoOysrZyl7dmFyIGs9ZVtnXSxtPWsuVCxuPXcoay5mZWF0dXJlKSxwPWsuZGVwdGg7cCYmKG4rPVwiLVwiK3Auam9pbihcIi1cIikpO2Zbbl18fChmW25dPUFycmF5KDIpKTtpZihcIkNpcmNsZVwiPT09ay5nZW9tZXRyeS5IKCkmJjE9PT1rLmluZGV4KW09SW8oYixrKSxqZShtLGMpJiYhZltuXVswXSYmKHRoaXMuaS5wdXNoKFtrLDBdKSxmW25dWzBdPWspO2Vsc2UgaWYoamUobVswXSxjKSYmIWZbbl1bMF0pdGhpcy5pLnB1c2goW2ssMF0pLGZbbl1bMF09aztlbHNlIGlmKGplKG1bMV0sYykmJiFmW25dWzFdKXtpZihcIkxpbmVTdHJpbmdcIiE9PVxuay5nZW9tZXRyeS5IKCkmJlwiTXVsdGlMaW5lU3RyaW5nXCIhPT1rLmdlb21ldHJ5LkgoKXx8IWZbbl1bMF18fDAhPT1mW25dWzBdLmluZGV4KXRoaXMuaS5wdXNoKFtrLDFdKSxmW25dWzFdPWt9ZWxzZSB3KG0paW4gdGhpcy55YSYmIWZbbl1bMF0mJiFmW25dWzFdJiZkLnB1c2goW2ssY10pfWQubGVuZ3RoJiZDbyh0aGlzLGEpO2ZvcihhPWQubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5BZy5hcHBseSh0aGlzLGRbYV0pfXJldHVybiEhdGhpcy5jfVxuZnVuY3Rpb24geG8oYSl7dGhpcy5HPSExO0NvKHRoaXMsYSk7YT1hLmNvb3JkaW5hdGU7Zm9yKHZhciBiPTAsYz10aGlzLmkubGVuZ3RoO2I8YzsrK2Ipe2Zvcih2YXIgZD10aGlzLmlbYl0sZT1kWzBdLGY9ZS5kZXB0aCxnPWUuZ2VvbWV0cnksaCxrPWUuVCxkPWRbMV07YS5sZW5ndGg8Zy5BOylhLnB1c2goa1tkXVthLmxlbmd0aF0pO3N3aXRjaChnLkgoKSl7Y2FzZSBcIlBvaW50XCI6aD1hO2tbMF09a1sxXT1hO2JyZWFrO2Nhc2UgXCJNdWx0aVBvaW50XCI6aD1nLkQoKTtoW2UuaW5kZXhdPWE7a1swXT1rWzFdPWE7YnJlYWs7Y2FzZSBcIkxpbmVTdHJpbmdcIjpoPWcuRCgpO2hbZS5pbmRleCtkXT1hO2tbZF09YTticmVhaztjYXNlIFwiTXVsdGlMaW5lU3RyaW5nXCI6aD1nLkQoKTtoW2ZbMF1dW2UuaW5kZXgrZF09YTtrW2RdPWE7YnJlYWs7Y2FzZSBcIlBvbHlnb25cIjpoPWcuRCgpO2hbZlswXV1bZS5pbmRleCtkXT1hO2tbZF09YTticmVhaztjYXNlIFwiTXVsdGlQb2x5Z29uXCI6aD1nLkQoKTtoW2ZbMV1dW2ZbMF1dW2UuaW5kZXgrXG5kXT1hO2tbZF09YTticmVhaztjYXNlIFwiQ2lyY2xlXCI6a1swXT1rWzFdPWEsMD09PWUuaW5kZXg/KHRoaXMuaj0hMCxnLkthKGEpKToodGhpcy5qPSEwLGcuUmUobmUoZy5oYSgpLGEpKSksdGhpcy5qPSExfWgmJihlPWcsZj1oLHRoaXMuaj0hMCxlLlkoZiksdGhpcy5qPSExKX1Hbyh0aGlzLGEpfWZ1bmN0aW9uIHpvKGEpe2Zvcih2YXIgYixjLGQ9dGhpcy5pLmxlbmd0aC0xOzA8PWQ7LS1kKWlmKGI9dGhpcy5pW2RdWzBdLGM9Yi5nZW9tZXRyeSxcIkNpcmNsZVwiPT09Yy5IKCkpe3ZhciBlPWMuaGEoKSxmPWIuTWNbMF07Yj1iLk1jWzFdO2YuVFswXT1mLlRbMV09ZTtiLlRbMF09Yi5UWzFdPWU7V2codGhpcy5hLFRhKGUpLGYpO1dnKHRoaXMuYSxjLkooKSxiKX1lbHNlIFdnKHRoaXMuYSxLYShiLlQpLGIpO3RoaXMucyYmKEEodGhpcyxuZXcgRG8oXCJtb2RpZnllbmRcIix0aGlzLm8sYSkpLHRoaXMucz0hMSk7cmV0dXJuITF9XG5mdW5jdGlvbiB5byhhKXtpZighKGEgaW5zdGFuY2VvZiBoZCkpcmV0dXJuITA7dGhpcy5JPWE7dmFyIGI7JGMoYS5tYXAuWigpKVsxXXx8XCJwb2ludGVybW92ZVwiIT1hLnR5cGV8fHRoaXMudnx8KHRoaXMuc2E9YS5waXhlbCxCbyh0aGlzLGEucGl4ZWwsYS5tYXApKTtpZih0aGlzLmMmJnRoaXMuQ2EoYSkpe3ZhciBjO2lmKFwic2luZ2xlY2xpY2tcIj09YS50eXBlJiZ0aGlzLkcpYz0hMDtlbHNlIGlmKHRoaXMuSSYmXCJwb2ludGVyZHJhZ1wiIT10aGlzLkkudHlwZSl7Yj10aGlzLkk7Q28odGhpcyxiKTt2YXIgZD10aGlzLmksZT17fSxmLGcsaCxrLG0sbixwLHEsdTtmb3IobT1kLmxlbmd0aC0xOzA8PW07LS1tKWs9ZFttXSx1PWtbMF0sYz13KHUuZmVhdHVyZSksdS5kZXB0aCYmKGMrPVwiLVwiK3UuZGVwdGguam9pbihcIi1cIikpLGMgaW4gZXx8KGVbY109e30pLDA9PT1rWzFdPyhlW2NdLnJpZ2h0PXUsZVtjXS5pbmRleD11LmluZGV4KToxPT1rWzFdJiYoZVtjXS5sZWZ0PXUsZVtjXS5pbmRleD1cbnUuaW5kZXgrMSk7Zm9yKGMgaW4gZSl7cT1lW2NdLnJpZ2h0O249ZVtjXS5sZWZ0O209ZVtjXS5pbmRleDtwPW0tMTt1PXZvaWQgMCE9PW4/bjpxOzA+cCYmKHA9MCk7az11Lmdlb21ldHJ5O2c9aD1rLkQoKTtmPSExO3N3aXRjaChrLkgoKSl7Y2FzZSBcIk11bHRpTGluZVN0cmluZ1wiOjI8aFt1LmRlcHRoWzBdXS5sZW5ndGgmJihoW3UuZGVwdGhbMF1dLnNwbGljZShtLDEpLGY9ITApO2JyZWFrO2Nhc2UgXCJMaW5lU3RyaW5nXCI6MjxoLmxlbmd0aCYmKGguc3BsaWNlKG0sMSksZj0hMCk7YnJlYWs7Y2FzZSBcIk11bHRpUG9seWdvblwiOmc9Z1t1LmRlcHRoWzFdXTtjYXNlIFwiUG9seWdvblwiOmc9Z1t1LmRlcHRoWzBdXSw0PGcubGVuZ3RoJiYobT09Zy5sZW5ndGgtMSYmKG09MCksZy5zcGxpY2UobSwxKSxmPSEwLDA9PT1tJiYoZy5wb3AoKSxnLnB1c2goZ1swXSkscD1nLmxlbmd0aC0xKSl9ZiYmKGY9ayx0aGlzLmo9ITAsZi5ZKGgpLHRoaXMuaj0hMSxoPVtdLHZvaWQgMCE9PW4mJih0aGlzLmEucmVtb3ZlKG4pLFxuaC5wdXNoKG4uVFswXSkpLHZvaWQgMCE9PXEmJih0aGlzLmEucmVtb3ZlKHEpLGgucHVzaChxLlRbMV0pKSx2b2lkIDAhPT1uJiZ2b2lkIDAhPT1xJiYobj17ZGVwdGg6dS5kZXB0aCxmZWF0dXJlOnUuZmVhdHVyZSxnZW9tZXRyeTp1Lmdlb21ldHJ5LGluZGV4OnAsVDpofSx0aGlzLmEuYmEoS2Eobi5UKSxuKSksSm8odGhpcyxrLG0sdS5kZXB0aCwtMSksdGhpcy5jJiYodGhpcy5DLmRhKCkuSmEodGhpcy5jKSx0aGlzLmM9bnVsbCksZC5sZW5ndGg9MCl9QSh0aGlzLG5ldyBEbyhcIm1vZGlmeWVuZFwiLHRoaXMubyxiKSk7dGhpcy5zPSExO2M9ITB9ZWxzZSBjPSExO2I9Y31cInNpbmdsZWNsaWNrXCI9PWEudHlwZSYmKHRoaXMuRz0hMSk7cmV0dXJuIHdmLmNhbGwodGhpcyxhKSYmIWJ9XG5mdW5jdGlvbiBCbyhhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe3JldHVybiBLbyhlLGEpLUtvKGUsYil9dmFyIGU9Yy5FYShiKSxmPU5hKFRhKGUpLGMuWigpLnZhKCkqYS4kKSxmPVlnKGEuYSxmKTtpZigwPGYubGVuZ3RoKXtmLnNvcnQoZCk7dmFyIGc9ZlswXSxoPWcuVCxrPUlvKGUsZyksbT1DZihjLGspLG49bmUoYixtKTtpZihuPD1hLiQpe2I9e307aWYoXCJDaXJjbGVcIj09PWcuZ2VvbWV0cnkuSCgpJiYxPT09Zy5pbmRleClhLmNhPSEwLEdvKGEsayk7ZWxzZSBmb3Iobj1DZihjLGhbMF0pLGc9Q2YoYyxoWzFdKSxjPW1lKG0sbiksbT1tZShtLGcpLG49TWF0aC5zcXJ0KE1hdGgubWluKGMsbSkpLGEuY2E9bjw9YS4kLGEuY2EmJihrPWM+bT9oWzFdOmhbMF0pLEdvKGEsayksbT0xLGM9Zi5sZW5ndGg7bTxjOysrbSlpZihrPWZbbV0uVCxqZShoWzBdLGtbMF0pJiZqZShoWzFdLGtbMV0pfHxqZShoWzBdLGtbMV0pJiZqZShoWzFdLGtbMF0pKWJbdyhrKV09ITA7ZWxzZSBicmVhaztiW3coaCldPVxuITA7YS55YT1iO3JldHVybn19YS5jJiYoYS5DLmRhKCkuSmEoYS5jKSxhLmM9bnVsbCl9ZnVuY3Rpb24gS28oYSxiKXt2YXIgYz1iLmdlb21ldHJ5O2lmKFwiQ2lyY2xlXCI9PT1jLkgoKSYmMT09PWIuaW5kZXgpe3ZhciBkPW1lKGMuaGEoKSxhKSxjPU1hdGguc3FydChkKS1jLlpjKCk7cmV0dXJuIGMqY31yZXR1cm4gb2UoYSxiLlQpfWZ1bmN0aW9uIElvKGEsYil7dmFyIGM9Yi5nZW9tZXRyeTtpZihcIkNpcmNsZVwiPT09Yy5IKCkmJjE9PT1iLmluZGV4KXt2YXIgZD1bTmFOLE5hTl07Yy5IYShhWzBdLGFbMV0sZCxJbmZpbml0eSk7Yz1kfWVsc2UgYz1pZShhLGIuVCk7cmV0dXJuIGN9XG5sLkFnPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPWEuVCxkPWEuZmVhdHVyZSxlPWEuZ2VvbWV0cnksZj1hLmRlcHRoLGc9YS5pbmRleCxoO2IubGVuZ3RoPGUuQTspYi5wdXNoKDApO3N3aXRjaChlLkgoKSl7Y2FzZSBcIk11bHRpTGluZVN0cmluZ1wiOmg9ZS5EKCk7aFtmWzBdXS5zcGxpY2UoZysxLDAsYik7YnJlYWs7Y2FzZSBcIlBvbHlnb25cIjpoPWUuRCgpO2hbZlswXV0uc3BsaWNlKGcrMSwwLGIpO2JyZWFrO2Nhc2UgXCJNdWx0aVBvbHlnb25cIjpoPWUuRCgpO2hbZlsxXV1bZlswXV0uc3BsaWNlKGcrMSwwLGIpO2JyZWFrO2Nhc2UgXCJMaW5lU3RyaW5nXCI6aD1lLkQoKTtoLnNwbGljZShnKzEsMCxiKTticmVhaztkZWZhdWx0OnJldHVybn10aGlzLmo9ITA7ZS5ZKGgpO3RoaXMuaj0hMTtoPXRoaXMuYTtoLnJlbW92ZShhKTtKbyh0aGlzLGUsZyxmLDEpO3ZhciBrPXtUOltjWzBdLGJdLGZlYXR1cmU6ZCxnZW9tZXRyeTplLGRlcHRoOmYsaW5kZXg6Z307aC5iYShLYShrLlQpLGspO3RoaXMuaS5wdXNoKFtrLFxuMV0pO2M9e1Q6W2IsY1sxXV0sZmVhdHVyZTpkLGdlb21ldHJ5OmUsZGVwdGg6ZixpbmRleDpnKzF9O2guYmEoS2EoYy5UKSxjKTt0aGlzLmkucHVzaChbYywwXSk7dGhpcy5HPSEwfTtmdW5jdGlvbiBKbyhhLGIsYyxkLGUpeyRnKGEuYSxiLkooKSxmdW5jdGlvbihhKXthLmdlb21ldHJ5PT09YiYmKHZvaWQgMD09PWR8fHZvaWQgMD09PWEuZGVwdGh8fHBhKGEuZGVwdGgsZCkpJiZhLmluZGV4PmMmJihhLmluZGV4Kz1lKX0pfWZ1bmN0aW9uIEFvKCl7dmFyIGE9RWgoKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5Qb2ludH19ZnVuY3Rpb24gRG8oYSxiLGMpe3FjLmNhbGwodGhpcyxhKTt0aGlzLmZlYXR1cmVzPWI7dGhpcy5tYXBCcm93c2VyRXZlbnQ9Y310KERvLHFjKTtmdW5jdGlvbiBMbyhhKXtnZi5jYWxsKHRoaXMse2hhbmRsZUV2ZW50Ok1vfSk7YT1hP2E6e307dGhpcy5zPWEuY29uZGl0aW9uP2EuY29uZGl0aW9uOnBmO3RoaXMudj1hLmFkZENvbmRpdGlvbj9hLmFkZENvbmRpdGlvbjpxZTt0aGlzLlY9YS5yZW1vdmVDb25kaXRpb24/YS5yZW1vdmVDb25kaXRpb246cWU7dGhpcy5XPWEudG9nZ2xlQ29uZGl0aW9uP2EudG9nZ2xlQ29uZGl0aW9uOnJmO3RoaXMubz1hLm11bHRpP2EubXVsdGk6ITE7dGhpcy5nPWEuZmlsdGVyP2EuZmlsdGVyOnBlO3RoaXMuaT1hLmhpdFRvbGVyYW5jZT9hLmhpdFRvbGVyYW5jZTowO3RoaXMuYT1uZXcgU24oe3NvdXJjZTpuZXcgV24oe3VzZVNwYXRpYWxJbmRleDohMSxmZWF0dXJlczphLmZlYXR1cmVzLHdyYXBYOmEud3JhcFh9KSxzdHlsZTphLnN0eWxlP2Euc3R5bGU6Tm8oKSx1cGRhdGVXaGlsZUFuaW1hdGluZzohMCx1cGRhdGVXaGlsZUludGVyYWN0aW5nOiEwfSk7aWYoYS5sYXllcnMpaWYoXCJmdW5jdGlvblwiPT09XG50eXBlb2YgYS5sYXllcnMpYT1hLmxheWVycztlbHNle3ZhciBiPWEubGF5ZXJzO2E9ZnVuY3Rpb24oYSl7cmV0dXJuIDA8PWIuaW5kZXhPZihhKX19ZWxzZSBhPXBlO3RoaXMuaj1hO3RoaXMuYz17fTthPXRoaXMuYS5kYSgpLmc7eShhLFwiYWRkXCIsdGhpcy5DLHRoaXMpO3koYSxcInJlbW92ZVwiLHRoaXMuSSx0aGlzKX10KExvLGdmKTtMby5wcm90b3R5cGUuRz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuZGEoKS5nfTtcbmZ1bmN0aW9uIE1vKGEpe2lmKCF0aGlzLnMoYSkpcmV0dXJuITA7dmFyIGI9dGhpcy52KGEpLGM9dGhpcy5WKGEpLGQ9dGhpcy5XKGEpLGU9IWImJiFjJiYhZCxmPWEubWFwLGc9dGhpcy5hLmRhKCkuZyxoPVtdLGs9W107aWYoZSl7Y2IodGhpcy5jKTtmLk5jKGEucGl4ZWwsZnVuY3Rpb24oYSxiKXtpZih0aGlzLmcoYSxiKSl7ay5wdXNoKGEpO3ZhciBjPXcoYSk7dGhpcy5jW2NdPWI7cmV0dXJuIXRoaXMub319LmJpbmQodGhpcykse2xheWVyRmlsdGVyOnRoaXMuaixoaXRUb2xlcmFuY2U6dGhpcy5pfSk7Zm9yKGU9Zy5XYSgpLTE7MDw9ZTstLWUpe3ZhciBmPWcuYmUoZSksbT1rLmluZGV4T2YoZik7LTE8bT9rLnNwbGljZShtLDEpOihnLnJlbW92ZShmKSxoLnB1c2goZikpfWsubGVuZ3RoJiZEYyhnLGspfWVsc2V7Zi5OYyhhLnBpeGVsLGZ1bmN0aW9uKGEsZSl7aWYodGhpcy5nKGEsZSkpe2lmKCFiJiYhZHx8MDw9Zy5hLmluZGV4T2YoYSkpKGN8fGQpJiYwPD1nLmEuaW5kZXhPZihhKSYmXG4oaC5wdXNoKGEpLGY9dyhhKSxkZWxldGUgdGhpcy5jW2ZdKTtlbHNle2sucHVzaChhKTt2YXIgZj13KGEpO3RoaXMuY1tmXT1lfXJldHVybiF0aGlzLm99fS5iaW5kKHRoaXMpLHtsYXllckZpbHRlcjp0aGlzLmosaGl0VG9sZXJhbmNlOnRoaXMuaX0pO2ZvcihlPWgubGVuZ3RoLTE7MDw9ZTstLWUpZy5yZW1vdmUoaFtlXSk7RGMoZyxrKX0oMDxrLmxlbmd0aHx8MDxoLmxlbmd0aCkmJkEodGhpcyxuZXcgT28oUG8sayxoLGEpKTtyZXR1cm5cInBvaW50ZXJtb3ZlXCI9PWEudHlwZX1Mby5wcm90b3R5cGUuc2V0TWFwPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuQixjPXRoaXMuYS5kYSgpLmc7YiYmYy5mb3JFYWNoKGIuWmUsYik7Z2YucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsYSk7dGhpcy5hLnNldE1hcChhKTthJiZjLmZvckVhY2goYS5WZSxhKX07XG5mdW5jdGlvbiBObygpe3ZhciBhPUVoKCk7b2EoYS5Qb2x5Z29uLGEuTGluZVN0cmluZyk7b2EoYS5HZW9tZXRyeUNvbGxlY3Rpb24sYS5MaW5lU3RyaW5nKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGIuUigpP2FbYi5SKCkuSCgpXTpudWxsfX1Mby5wcm90b3R5cGUuQz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLkI7YiYmYi5WZShhLmVsZW1lbnQpfTtMby5wcm90b3R5cGUuST1mdW5jdGlvbihhKXt2YXIgYj10aGlzLkI7YiYmYi5aZShhLmVsZW1lbnQpfTtmdW5jdGlvbiBPbyhhLGIsYyxkKXtxYy5jYWxsKHRoaXMsYSk7dGhpcy5zZWxlY3RlZD1iO3RoaXMuZGVzZWxlY3RlZD1jO3RoaXMubWFwQnJvd3NlckV2ZW50PWR9dChPbyxxYyk7dmFyIFBvPVwic2VsZWN0XCI7ZnVuY3Rpb24gUW8oYSl7dmYuY2FsbCh0aGlzLHtoYW5kbGVFdmVudDpSbyxoYW5kbGVEb3duRXZlbnQ6cGUsaGFuZGxlVXBFdmVudDpTb30pO2E9YT9hOnt9O3RoaXMuaj1hLnNvdXJjZT9hLnNvdXJjZTpudWxsO3RoaXMuJD12b2lkIDAhPT1hLnZlcnRleD9hLnZlcnRleDohMDt0aGlzLkc9dm9pZCAwIT09YS5lZGdlP2EuZWRnZTohMDt0aGlzLmk9YS5mZWF0dXJlcz9hLmZlYXR1cmVzOm51bGw7dGhpcy5jYT1bXTt0aGlzLnM9e307dGhpcy5JPXt9O3RoaXMubz17fTt0aGlzLkM9bnVsbDt0aGlzLmM9dm9pZCAwIT09YS5waXhlbFRvbGVyYW5jZT9hLnBpeGVsVG9sZXJhbmNlOjEwO3RoaXMuc2E9VG8uYmluZCh0aGlzKTt0aGlzLmE9bmV3IFZnO3RoaXMuVz17UG9pbnQ6dGhpcy5DaCxMaW5lU3RyaW5nOnRoaXMuemUsTGluZWFyUmluZzp0aGlzLnplLFBvbHlnb246dGhpcy5EaCxNdWx0aVBvaW50OnRoaXMuQWgsTXVsdGlMaW5lU3RyaW5nOnRoaXMuemgsTXVsdGlQb2x5Z29uOnRoaXMuQmgsXG5HZW9tZXRyeUNvbGxlY3Rpb246dGhpcy55aH19dChRbyx2Zik7bD1Rby5wcm90b3R5cGU7bC5QYT1mdW5jdGlvbihhLGIpe3ZhciBjPXZvaWQgMCE9PWI/YjohMCxkPXcoYSksZT1hLlIoKTtpZihlKXt2YXIgZj10aGlzLldbZS5IKCldO2YmJih0aGlzLklbZF09ZS5KKExhKCkpLGYuY2FsbCh0aGlzLGEsZSkpfWMmJih0aGlzLnNbZF09eShhLFwiY2hhbmdlXCIsdGhpcy54aCx0aGlzKSl9O2wuUWY9ZnVuY3Rpb24oYSl7dGhpcy5QYShhKX07bC5SZj1mdW5jdGlvbihhKXt0aGlzLkphKGEpfTtsLnhlPWZ1bmN0aW9uKGEpe3ZhciBiO2EgaW5zdGFuY2VvZiBhbz9iPWEuZmVhdHVyZTphIGluc3RhbmNlb2YgR2MmJihiPWEuZWxlbWVudCk7dGhpcy5QYShiKX07bC55ZT1mdW5jdGlvbihhKXt2YXIgYjthIGluc3RhbmNlb2YgYW8/Yj1hLmZlYXR1cmU6YSBpbnN0YW5jZW9mIEdjJiYoYj1hLmVsZW1lbnQpO3RoaXMuSmEoYil9O1xubC54aD1mdW5jdGlvbihhKXthPWEudGFyZ2V0O2lmKHRoaXMudil7dmFyIGI9dyhhKTtiIGluIHRoaXMub3x8KHRoaXMub1tiXT1hKX1lbHNlIHRoaXMuJGUoYSl9O2wuSmE9ZnVuY3Rpb24oYSxiKXt2YXIgYz12b2lkIDAhPT1iP2I6ITAsZD13KGEpLGU9dGhpcy5JW2RdO2lmKGUpe3ZhciBmPXRoaXMuYSxnPVtdOyRnKGYsZSxmdW5jdGlvbihiKXthPT09Yi5mZWF0dXJlJiZnLnB1c2goYil9KTtmb3IoZT1nLmxlbmd0aC0xOzA8PWU7LS1lKWYucmVtb3ZlKGdbZV0pfWMmJihpYyh0aGlzLnNbZF0pLGRlbGV0ZSB0aGlzLnNbZF0pfTtcbmwuc2V0TWFwPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuQixjPXRoaXMuY2EsZDt0aGlzLmk/ZD10aGlzLmk6dGhpcy5qJiYoZD10aGlzLmouYmQoKSk7YiYmKGMuZm9yRWFjaChpYyksYy5sZW5ndGg9MCxkLmZvckVhY2godGhpcy5SZix0aGlzKSk7dmYucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsYSk7YSYmKHRoaXMuaT9jLnB1c2goeSh0aGlzLmksXCJhZGRcIix0aGlzLnhlLHRoaXMpLHkodGhpcy5pLFwicmVtb3ZlXCIsdGhpcy55ZSx0aGlzKSk6dGhpcy5qJiZjLnB1c2goeSh0aGlzLmosXCJhZGRmZWF0dXJlXCIsdGhpcy54ZSx0aGlzKSx5KHRoaXMuaixcInJlbW92ZWZlYXR1cmVcIix0aGlzLnllLHRoaXMpKSxkLmZvckVhY2godGhpcy5RZix0aGlzKSl9O2wuYWI9cWU7bC4kZT1mdW5jdGlvbihhKXt0aGlzLkphKGEsITEpO3RoaXMuUGEoYSwhMSl9O1xubC55aD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ9Yi5hO2ZvcihjPTA7YzxkLmxlbmd0aDsrK2MpdGhpcy5XW2RbY10uSCgpXS5jYWxsKHRoaXMsYSxkW2NdKX07bC56ZT1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRCgpLGQsZSxmLGc7ZD0wO2ZvcihlPWMubGVuZ3RoLTE7ZDxlOysrZClmPWMuc2xpY2UoZCxkKzIpLGc9e2ZlYXR1cmU6YSxUOmZ9LHRoaXMuYS5iYShLYShmKSxnKX07bC56aD1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRCgpLGQsZSxmLGcsaCxrLG07Zz0wO2ZvcihoPWMubGVuZ3RoO2c8aDsrK2cpZm9yKGQ9Y1tnXSxlPTAsZj1kLmxlbmd0aC0xO2U8ZjsrK2Upaz1kLnNsaWNlKGUsZSsyKSxtPXtmZWF0dXJlOmEsVDprfSx0aGlzLmEuYmEoS2EoayksbSl9O2wuQWg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLkQoKSxkLGUsZjtlPTA7Zm9yKGY9Yy5sZW5ndGg7ZTxmOysrZSlkPWNbZV0sZD17ZmVhdHVyZTphLFQ6W2QsZF19LHRoaXMuYS5iYShiLkooKSxkKX07XG5sLkJoPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5EKCksZCxlLGYsZyxoLGssbSxuLHAscTtrPTA7Zm9yKG09Yy5sZW5ndGg7azxtOysraylmb3Iobj1jW2tdLGc9MCxoPW4ubGVuZ3RoO2c8aDsrK2cpZm9yKGQ9bltnXSxlPTAsZj1kLmxlbmd0aC0xO2U8ZjsrK2UpcD1kLnNsaWNlKGUsZSsyKSxxPXtmZWF0dXJlOmEsVDpwfSx0aGlzLmEuYmEoS2EocCkscSl9O2wuQ2g9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLkQoKSxjPXtmZWF0dXJlOmEsVDpbYyxjXX07dGhpcy5hLmJhKGIuSigpLGMpfTtsLkRoPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5EKCksZCxlLGYsZyxoLGssbTtnPTA7Zm9yKGg9Yy5sZW5ndGg7ZzxoOysrZylmb3IoZD1jW2ddLGU9MCxmPWQubGVuZ3RoLTE7ZTxmOysrZSlrPWQuc2xpY2UoZSxlKzIpLG09e2ZlYXR1cmU6YSxUOmt9LHRoaXMuYS5iYShLYShrKSxtKX07XG5mdW5jdGlvbiBSbyhhKXt2YXIgYixjLGQ9YS5waXhlbCxlPWEuY29vcmRpbmF0ZTtiPWEubWFwO3ZhciBmPWIuRWEoW2RbMF0tdGhpcy5jLGRbMV0rdGhpcy5jXSk7Yz1iLkVhKFtkWzBdK3RoaXMuYyxkWzFdLXRoaXMuY10pO3ZhciBmPUthKFtmLGNdKSxnPVlnKHRoaXMuYSxmKSxoLGY9ITEsaz1udWxsO2M9bnVsbDtpZigwPGcubGVuZ3RoKXt0aGlzLkM9ZTtnLnNvcnQodGhpcy5zYSk7Zz1nWzBdLlQ7aWYodGhpcy4kJiYhdGhpcy5HKXtpZihlPUNmKGIsZ1swXSksaD1DZihiLGdbMV0pLGU9bWUoZCxlKSxkPW1lKGQsaCksaD1NYXRoLnNxcnQoTWF0aC5taW4oZSxkKSksaD1oPD10aGlzLmMpZj0hMCxrPWU+ZD9nWzFdOmdbMF0sYz1DZihiLGspfWVsc2UgdGhpcy5HJiYoaz1pZShlLGcpLGM9Q2YoYixrKSxuZShkLGMpPD10aGlzLmMmJihmPSEwLHRoaXMuJCYmKGU9Q2YoYixnWzBdKSxoPUNmKGIsZ1sxXSksZT1tZShjLGUpLGQ9bWUoYyxoKSxoPU1hdGguc3FydChNYXRoLm1pbihlLFxuZCkpLGg9aDw9dGhpcy5jKSkpJiYoaz1lPmQ/Z1sxXTpnWzBdLGM9Q2YoYixrKSk7ZiYmKGM9W01hdGgucm91bmQoY1swXSksTWF0aC5yb3VuZChjWzFdKV0pfWI9aztmJiYoYS5jb29yZGluYXRlPWIuc2xpY2UoMCwyKSxhLnBpeGVsPWMpO3JldHVybiB3Zi5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gU28oKXt2YXIgYT1kYih0aGlzLm8pO2EubGVuZ3RoJiYoYS5mb3JFYWNoKHRoaXMuJGUsdGhpcyksdGhpcy5vPXt9KTtyZXR1cm4hMX1mdW5jdGlvbiBUbyhhLGIpe3JldHVybiBvZSh0aGlzLkMsYS5UKS1vZSh0aGlzLkMsYi5UKX07ZnVuY3Rpb24gVW8oYSl7SG4uY2FsbCh0aGlzLGEpO3RoaXMucz1xZygpO3RoaXMuYz1udWxsfXQoVW8sSG4pO1VvLnByb3RvdHlwZS52PWZ1bmN0aW9uKGEsYixjKXtKbih0aGlzLFwicHJlY29tcG9zZVwiLGMsYSx2b2lkIDApO3ZhciBkPXRoaXMuaWEoKTtpZihkKXt2YXIgZT1iLmV4dGVudCxmPXZvaWQgMCE9PWUmJiFRYShlLGEuZXh0ZW50KSYmWmEoZSxhLmV4dGVudCk7ZiYmSW4oYyxhLGUpO3ZhciBlPXRoaXMuQyxnPWMuZ2xvYmFsQWxwaGE7Yy5nbG9iYWxBbHBoYT1iLm9wYWNpdHk7Yy5kcmF3SW1hZ2UoZCwwLDAsK2Qud2lkdGgsK2QuaGVpZ2h0LE1hdGgucm91bmQoZVs0XSksTWF0aC5yb3VuZChlWzVdKSxNYXRoLnJvdW5kKGQud2lkdGgqZVswXSksTWF0aC5yb3VuZChkLmhlaWdodCplWzNdKSk7Yy5nbG9iYWxBbHBoYT1nO2YmJmMucmVzdG9yZSgpfUpuKHRoaXMsXCJwb3N0Y29tcG9zZVwiLGMsYSx2b2lkIDApfTtcblVvLnByb3RvdHlwZS5vPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9dGhpcy5hO3JldHVybiBmLmRhKCkuY2EoYSxiLnZpZXdTdGF0ZS5yZXNvbHV0aW9uLGIudmlld1N0YXRlLnJvdGF0aW9uLGMsYi5za2lwcGVkRmVhdHVyZVVpZHMsZnVuY3Rpb24oYSl7cmV0dXJuIGQuY2FsbChlLGEsZil9KX07XG5Vby5wcm90b3R5cGUuQj1mdW5jdGlvbihhLGIsYyxkKXtpZih0aGlzLmlhKCkpe2lmKHRoaXMuYS5kYSgpLmNhIT09dGEpcmV0dXJuIEhuLnByb3RvdHlwZS5CLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT1zZyh0aGlzLnMsYS5zbGljZSgpKTtsZShlLGIudmlld1N0YXRlLnJlc29sdXRpb24vdGhpcy5qKTt0aGlzLmN8fCh0aGlzLmM9T2MoMSwxKSk7dGhpcy5jLmNsZWFyUmVjdCgwLDAsMSwxKTt0aGlzLmMuZHJhd0ltYWdlKHRoaXMuaWEoKSxlWzBdLGVbMV0sMSwxLDAsMCwxLDEpO2U9dGhpcy5jLmdldEltYWdlRGF0YSgwLDAsMSwxKS5kYXRhO2lmKDA8ZVszXSlyZXR1cm4gYy5jYWxsKGQsdGhpcy5hLGUpfX07ZnVuY3Rpb24gVm8oYSl7VW8uY2FsbCh0aGlzLGEpO3RoaXMuZz1udWxsPT09dGhpcy5nP251bGw6T2MoKTt0aGlzLmk9bnVsbDt0aGlzLks9W107dGhpcy4kPUxhKCk7dGhpcy5jYT1uZXcgeGEoMCwwLDAsMCk7dGhpcy5DPXFnKCl9dChWbyxVbyk7ZnVuY3Rpb24gV28oYSxiKXt2YXIgYz1iLnN0YXRlLGQ9YS5hLmdldChcInVzZUludGVyaW1UaWxlc09uRXJyb3JcIik7cmV0dXJuIDI9PWN8fDQ9PWN8fDM9PWMmJiFkfVxuVm8ucHJvdG90eXBlLkk9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnBpeGVsUmF0aW8sZD1hLnNpemUsZT1hLnZpZXdTdGF0ZSxmPWUucHJvamVjdGlvbixnPWUucmVzb2x1dGlvbixoPWUuY2VudGVyLGs9dGhpcy5hLGU9ay5kYSgpLG09ZS5mLG49ZS5NYShmKSxwPVpiKG4sZywwKSxxPW4uYltwXSx1PU1hdGgucm91bmQoZy9xKXx8MSxGPWEuZXh0ZW50O3ZvaWQgMCE9PWIuZXh0ZW50JiYoRj1ZYShGLGIuZXh0ZW50KSk7aWYoRlsyXTxGWzBdfHxGWzNdPEZbMV0pcmV0dXJuITE7dmFyIHo9VGIobixGLHEpLEM7Qz1uLmY/bi5mOm4uYVtwXTt2YXIgRD1uLmJbcF0sRT1KYShYYihuLHApLG4udSk7Qz1SYShDWzBdK3ouTSpFWzBdKkQsQ1sxXSt6LlAqRVsxXSpELENbMF0rKHouTysxKSpFWzBdKkQsQ1sxXSsoei5TKzEpKkVbMV0qRCx2b2lkIDApO0Q9ZS5VYihjKTtFPXt9O0VbcF09e307dmFyIFE9Q24oZSxmLEUpLGZhPXRoaXMuJCxnYT10aGlzLmNhLFg9ITEsdixULGJhO2ZvcihUPXouTTtUPD1cbnouTzsrK1QpZm9yKGJhPXouUDtiYTw9ei5TOysrYmEpe3Y9WG8oZSxwLFQsYmEsYyxmKTtpZighV28odGhpcyx2KSlhOmlmKHYuYil7dmFyIEg9di5iO2Rve2lmKDI9PUguc3RhdGUpe3Y9SDticmVhayBhfUg9SC5ifXdoaWxlKEgpfWlmKFdvKHRoaXMsdikpMj09di5zdGF0ZSYmKEVbcF1bdi5PYS50b1N0cmluZygpXT12LFh8fC0xIT10aGlzLksuaW5kZXhPZih2KXx8KFg9ITApKTtlbHNle2E6e2Zvcih2YXIgSD1uLE49di5PYSxFYT1RLHBiPWdhLHFiPVliKEgsTixmYSksTj1OWzBdLTE7Tj49SC5taW5ab29tOyl7aWYoRWEuY2FsbChudWxsLE4sVmIoSCxxYixOLHBiKSkpe0g9ITA7YnJlYWsgYX0tLU59SD0hMX1IfHwoSD1uLHY9di5PYSxFYT1nYSx2WzBdPEgubWF4Wm9vbT8ocGI9WWIoSCx2LGZhKSx2PVZiKEgscGIsdlswXSsxLEVhKSk6dj1udWxsLHYmJlEocCsxLHYpKX19dj1hLnZpZXdIaW50cztpZighKHRoaXMuaiYmMTY8RGF0ZS5ub3coKS1hLnRpbWUmJih2WzBdfHx2WzFdKXx8XG4hWCYmdGhpcy5pJiZRYSh0aGlzLmksRikmJnRoaXMuVz09bSl8fHUhPXRoaXMuRyl7aWYodj10aGlzLmcpYmE9WW8oZSxwLGMsZiksVD1NYXRoLnJvdW5kKCh6Lk8tei5NKzEpKmJhWzBdL3UpLGJhPU1hdGgucm91bmQoKHouUy16LlArMSkqYmFbMV0vdSksWD12LmNhbnZhcyxYLndpZHRoIT1UfHxYLmhlaWdodCE9YmE/KHRoaXMuRz11LFgud2lkdGg9VCxYLmhlaWdodD1iYSk6KHYuY2xlYXJSZWN0KDAsMCxULGJhKSx1PXRoaXMuRyk7dGhpcy5LLmxlbmd0aD0wO1g9T2JqZWN0LmtleXMoRSkubWFwKE51bWJlcik7WC5zb3J0KG1hKTtmb3IodmFyIHViLGNjLGdhPTAsSD1YLmxlbmd0aDtnYTxIOysrZ2Epe3Y9WFtnYV07UT1ZbyhlLHYsYyxmKTtUPW4uYlt2XTt2YXIgRWE9VC9xLHBiPUQqZS5TZChmKSxxYj1FW3ZdLHZhO2Zvcih2YSBpbiBxYil7dj1xYlt2YV07YmE9WWIobix2Lk9hLGZhKTtUPShiYVswXS1DWzBdKS9xKkQvdTtiYT0oQ1szXS1iYVszXSkvcSpEL3U7dWI9UVswXSpcbkVhL3U7Y2M9UVsxXSpFYS91O3ZhciBOPXYsTGI9YSxNYj1wYjt0aGlzLmEuZGEoKS5RYyhMYi52aWV3U3RhdGUucHJvamVjdGlvbil8fHRoaXMuZy5jbGVhclJlY3QoVCxiYSx1YixjYyk7KE49Ti5pYSgpKSYmdGhpcy5nLmRyYXdJbWFnZShOLE1iLE1iLE4ud2lkdGgtMipNYixOLmhlaWdodC0yKk1iLFQsYmEsdWIsY2MpO3RoaXMuSy5wdXNoKHYpfX10aGlzLlc9bTt0aGlzLmo9cSpjL0QqdTt0aGlzLmk9Q312YT10aGlzLmovZzt2YT10Zyh0aGlzLkMsYypkWzBdLzIsYypkWzFdLzIsdmEsdmEsMCwodGhpcy5pWzBdLWhbMF0pL3RoaXMuaipjLChoWzFdLXRoaXMuaVszXSkvdGhpcy5qKmMpO3RnKHRoaXMucyxjKmRbMF0vMi12YVs0XSxjKmRbMV0vMi12YVs1XSxjL2csLWMvZywwLC1oWzBdLC1oWzFdKTtkPWEudXNlZFRpbGVzO2c9dyhlKS50b1N0cmluZygpO2g9cC50b1N0cmluZygpO2cgaW4gZD9oIGluIGRbZ10/KGQ9ZFtnXVtoXSx6Lk08ZC5NJiYoZC5NPXouTSksei5PPmQuTyYmXG4oZC5PPXouTyksei5QPGQuUCYmKGQuUD16LlApLHouUz5kLlMmJihkLlM9ei5TKSk6ZFtnXVtoXT16OihkW2ddPXt9LGRbZ11baF09eik7az1rLmdldChcInByZWxvYWRcIik7ej13KGUpLnRvU3RyaW5nKCk7eiBpbiBhLndhbnRlZFRpbGVzfHwoYS53YW50ZWRUaWxlc1t6XT17fSk7dmFyIGQ9YS53YW50ZWRUaWxlc1t6XSxnPWEudGlsZVF1ZXVlLGg9bi5taW5ab29tLGRjO2ZvcihDPXA7Qz49aDstLUMpZm9yKGRjPVZiKG4sRixDLGRjKSxtPW4uYltDXSxxPWRjLk07cTw9ZGMuTzsrK3EpZm9yKHU9ZGMuUDt1PD1kYy5TOysrdSlwLUM8PWs/KHZhPVhvKGUsQyxxLHUsYyxmKSwwPT12YS5zdGF0ZSYmKGRbdmEuWGEoKV09ITAsdmEuWGEoKWluIGcuYXx8Zy51KFt2YSx6LFdiKG4sdmEuT2EpLG1dKSkpOmUuYmYoQyxxLHUsZik7RW4oYSxlKTtHbihhLGUpO3JldHVybiAwPHRoaXMuSy5sZW5ndGh9O1xuVm8ucHJvdG90eXBlLmlhPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nO3JldHVybiBhP2EuY2FudmFzOm51bGx9O2Z1bmN0aW9uIFpvKGEpe2E9YT9hOnt9O3ZhciBiPWJiKHt9LGEpO2RlbGV0ZSBiLnByZWxvYWQ7ZGVsZXRlIGIudXNlSW50ZXJpbVRpbGVzT25FcnJvcjtuZy5jYWxsKHRoaXMsYik7dGhpcy5zZXQoXCJwcmVsb2FkXCIsdm9pZCAwIT09YS5wcmVsb2FkP2EucHJlbG9hZDowKTt0aGlzLnNldChcInVzZUludGVyaW1UaWxlc09uRXJyb3JcIix2b2lkIDAhPT1hLnVzZUludGVyaW1UaWxlc09uRXJyb3I/YS51c2VJbnRlcmltVGlsZXNPbkVycm9yOiEwKX10KFpvLG5nKTtaby5wcm90b3R5cGUuRWM9ZnVuY3Rpb24oYSl7dmFyIGI9bnVsbDtcImNhbnZhc1wiPT09YS5IKCkmJihiPW5ldyBWbyh0aGlzKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uICRvKGEsYil7dmFyIGM9L1xce3pcXH0vZyxkPS9cXHt4XFx9L2csZT0vXFx7eVxcfS9nLGY9L1xcey15XFx9L2c7cmV0dXJuIGZ1bmN0aW9uKGcpe2lmKGcpcmV0dXJuIGEucmVwbGFjZShjLGdbMF0udG9TdHJpbmcoKSkucmVwbGFjZShkLGdbMV0udG9TdHJpbmcoKSkucmVwbGFjZShlLGZ1bmN0aW9uKCl7cmV0dXJuKC1nWzJdLTEpLnRvU3RyaW5nKCl9KS5yZXBsYWNlKGYsZnVuY3Rpb24oKXt2YXIgYT1iLmM/Yi5jW2dbMF1dOm51bGw7eChhLDU1KTtyZXR1cm4oYS5TLWEuUCsxK2dbMl0pLnRvU3RyaW5nKCl9KX19ZnVuY3Rpb24gYXAoYSxiKXtmb3IodmFyIGM9YS5sZW5ndGgsZD1BcnJheShjKSxlPTA7ZTxjOysrZSlkW2VdPSRvKGFbZV0sYik7cmV0dXJuIGJwKGQpfWZ1bmN0aW9uIGJwKGEpe3JldHVybiAxPT09YS5sZW5ndGg/YVswXTpmdW5jdGlvbihiLGMsZCl7aWYoYilyZXR1cm4gYVtGYSgoYlsxXTw8YlswXSkrYlsyXSxhLmxlbmd0aCldKGIsYyxkKX19XG5mdW5jdGlvbiBjcCgpe31mdW5jdGlvbiBkcChhKXt2YXIgYj1bXSxjPS9cXHsoW2Etel0pLShbYS16XSlcXH0vLmV4ZWMoYSk7aWYoYyl7dmFyIGQ9Y1syXS5jaGFyQ29kZUF0KDApLGU7Zm9yKGU9Y1sxXS5jaGFyQ29kZUF0KDApO2U8PWQ7KytlKWIucHVzaChhLnJlcGxhY2UoY1swXSxTdHJpbmcuZnJvbUNoYXJDb2RlKGUpKSk7cmV0dXJuIGJ9aWYoYz1jPS9cXHsoXFxkKyktKFxcZCspXFx9Ly5leGVjKGEpKXtkPXBhcnNlSW50KGNbMl0sMTApO2ZvcihlPXBhcnNlSW50KGNbMV0sMTApO2U8PWQ7ZSsrKWIucHVzaChhLnJlcGxhY2UoY1swXSxlLnRvU3RyaW5nKCkpKTtyZXR1cm4gYn1iLnB1c2goYSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIGVwKGEpe2FoLmNhbGwodGhpcyk7dGhpcy5oaWdoV2F0ZXJNYXJrPXZvaWQgMCE9PWE/YToyMDQ4fXQoZXAsYWgpO2VwLnByb3RvdHlwZS5EYj1mdW5jdGlvbihhKXtmb3IodmFyIGIsYzt0aGlzLmM+dGhpcy5oaWdoV2F0ZXJNYXJrOyl7Yj10aGlzLmIucmI7Yz1iLk9hWzBdLnRvU3RyaW5nKCk7dmFyIGQ7aWYoZD1jIGluIGEpYj1iLk9hLGQ9eWEoYVtjXSxiWzFdLGJbMl0pO2lmKGQpYnJlYWs7ZWxzZSBwYyh0aGlzLnBvcCgpKX19O2Z1bmN0aW9uIGZwKGEpe1VuLmNhbGwodGhpcyx7YXR0cmlidXRpb25zOmEuYXR0cmlidXRpb25zLGV4dGVudDphLmV4dGVudCxsb2dvOmEubG9nbyxwcm9qZWN0aW9uOmEucHJvamVjdGlvbixzdGF0ZTphLnN0YXRlLHdyYXBYOmEud3JhcFh9KTt0aGlzLkk9dm9pZCAwIT09YS5vcGFxdWU/YS5vcGFxdWU6ITE7dGhpcy5XPXZvaWQgMCE9PWEudGlsZVBpeGVsUmF0aW8/YS50aWxlUGl4ZWxSYXRpbzoxO3RoaXMudGlsZUdyaWQ9dm9pZCAwIT09YS50aWxlR3JpZD9hLnRpbGVHcmlkOm51bGw7dGhpcy5jPW5ldyBlcChhLmNhY2hlU2l6ZSk7dGhpcy5hPVswLDBdO3RoaXMua2I9XCJcIn10KGZwLFVuKTtsPWZwLnByb3RvdHlwZTtsLmFkPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jO3JldHVybiBhLmM+YS5oaWdoV2F0ZXJNYXJrfTtsLkRiPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5UYihhKTtjJiZjLkRiKGIpfTtcbmZ1bmN0aW9uIERuKGEsYixjLGQsZSl7Yj1hLlRiKGIpO2lmKCFiKXJldHVybiExO2Zvcih2YXIgZj0hMCxnLGgsaz1kLk07azw9ZC5POysraylmb3IodmFyIG09ZC5QO208PWQuUzsrK20pZz1hLkZiKGMsayxtKSxoPSExLGIuYS5oYXNPd25Qcm9wZXJ0eShnKSYmKGc9Yi5nZXQoZyksKGg9Mj09PWcuc3RhdGUpJiYoaD0hMSE9PWUoZykpKSxofHwoZj0hMSk7cmV0dXJuIGZ9bC5TZD1mdW5jdGlvbigpe3JldHVybiAwfTtmdW5jdGlvbiBncChhLGIpe2Eua2IhPT1iJiYoYS5rYj1iLGEuYigpKX1sLkZiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYStcIi9cIitiK1wiL1wiK2N9O2wuUWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5JfTtcbmwuTWE9ZnVuY3Rpb24oYSl7aWYodGhpcy50aWxlR3JpZClhPXRoaXMudGlsZUdyaWQ7ZWxzZXt2YXIgYj1hLmc7aWYoIWIpe3ZhciBiPWJjKGEpLGM9YWMoYix2b2lkIDAsdm9pZCAwKSxiPW5ldyBRYih7ZXh0ZW50OmIsb3JpZ2luOiRhKGIpLHJlc29sdXRpb25zOmMsdGlsZVNpemU6dm9pZCAwfSk7YS5nPWJ9YT1ifXJldHVybiBhfTtsLlRiPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuJDtyZXR1cm4gYiYmIUpiKGIsYSk/bnVsbDp0aGlzLmN9O2wuVWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5XfTtmdW5jdGlvbiBZbyhhLGIsYyxkKXtkPWEuTWEoZCk7Yz1hLlViKGMpO2I9SmEoWGIoZCxiKSxhLmEpO3JldHVybiAxPT1jP2I6SWEoYixjLGEuYSl9bC5iZj10YTtmdW5jdGlvbiBocChhLGIpe3FjLmNhbGwodGhpcyxhKTt0aGlzLnRpbGU9Yn10KGhwLHFjKTtmdW5jdGlvbiBpcChhKXtmcC5jYWxsKHRoaXMse2F0dHJpYnV0aW9uczphLmF0dHJpYnV0aW9ucyxjYWNoZVNpemU6YS5jYWNoZVNpemUsZXh0ZW50OmEuZXh0ZW50LGxvZ286YS5sb2dvLG9wYXF1ZTphLm9wYXF1ZSxwcm9qZWN0aW9uOmEucHJvamVjdGlvbixzdGF0ZTphLnN0YXRlLHRpbGVHcmlkOmEudGlsZUdyaWQsdGlsZVBpeGVsUmF0aW86YS50aWxlUGl4ZWxSYXRpbyx3cmFwWDphLndyYXBYfSk7dGhpcy50aWxlTG9hZEZ1bmN0aW9uPWEudGlsZUxvYWRGdW5jdGlvbjt0aGlzLnRpbGVVcmxGdW5jdGlvbj10aGlzLlVhP3RoaXMuVWEuYmluZCh0aGlzKTpjcDt0aGlzLnVybHM9bnVsbDtpZihhLnVybHMpdGhpcy5xZChhLnVybHMpO2Vsc2UgaWYoYS51cmwpe3ZhciBiPWEudXJsLGM9dGhpcy51cmxzPWRwKGIpO2pwKHRoaXMsdGhpcy5VYT90aGlzLlVhLmJpbmQodGhpcyk6YXAoYyx0aGlzLnRpbGVHcmlkKSxiKX1hLnRpbGVVcmxGdW5jdGlvbiYmanAodGhpcyxhLnRpbGVVcmxGdW5jdGlvbil9XG50KGlwLGZwKTtpcC5wcm90b3R5cGUuRz1mdW5jdGlvbihhKXthPWEudGFyZ2V0O3N3aXRjaChhLnN0YXRlKXtjYXNlIDE6QSh0aGlzLG5ldyBocChcInRpbGVsb2Fkc3RhcnRcIixhKSk7YnJlYWs7Y2FzZSAyOkEodGhpcyxuZXcgaHAoXCJ0aWxlbG9hZGVuZFwiLGEpKTticmVhaztjYXNlIDM6QSh0aGlzLG5ldyBocChcInRpbGVsb2FkZXJyb3JcIixhKSl9fTtmdW5jdGlvbiBqcChhLGIsYyl7YS50aWxlVXJsRnVuY3Rpb249YjtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGM/Z3AoYSxjKTphLmIoKX1pcC5wcm90b3R5cGUucWQ9ZnVuY3Rpb24oYSl7dGhpcy51cmxzPWE7dmFyIGI9YS5qb2luKFwiXFxuXCIpO2pwKHRoaXMsdGhpcy5VYT90aGlzLlVhLmJpbmQodGhpcyk6YXAoYSx0aGlzLnRpbGVHcmlkKSxiKX07aXAucHJvdG90eXBlLmJmPWZ1bmN0aW9uKGEsYixjKXthPXRoaXMuRmIoYSxiLGMpO3RoaXMuYy5hLmhhc093blByb3BlcnR5KGEpJiZ0aGlzLmMuZ2V0KGEpfTtmdW5jdGlvbiBrcChhKXtpcC5jYWxsKHRoaXMse2F0dHJpYnV0aW9uczphLmF0dHJpYnV0aW9ucyxjYWNoZVNpemU6YS5jYWNoZVNpemUsZXh0ZW50OmEuZXh0ZW50LGxvZ286YS5sb2dvLG9wYXF1ZTphLm9wYXF1ZSxwcm9qZWN0aW9uOmEucHJvamVjdGlvbixzdGF0ZTphLnN0YXRlLHRpbGVHcmlkOmEudGlsZUdyaWQsdGlsZUxvYWRGdW5jdGlvbjphLnRpbGVMb2FkRnVuY3Rpb24/YS50aWxlTG9hZEZ1bmN0aW9uOmxwLHRpbGVQaXhlbFJhdGlvOmEudGlsZVBpeGVsUmF0aW8sdGlsZVVybEZ1bmN0aW9uOmEudGlsZVVybEZ1bmN0aW9uLHVybDphLnVybCx1cmxzOmEudXJscyx3cmFwWDphLndyYXBYfSk7dGhpcy5jcm9zc09yaWdpbj12b2lkIDAhPT1hLmNyb3NzT3JpZ2luP2EuY3Jvc3NPcmlnaW46bnVsbDt0aGlzLnRpbGVDbGFzcz1hLnRpbGVDbGFzcz9hLnRpbGVDbGFzczphbn10KGtwLGlwKTtsPWtwLnByb3RvdHlwZTtsLmFkPWZ1bmN0aW9uKCl7cmV0dXJuIGlwLnByb3RvdHlwZS5hZC5jYWxsKHRoaXMpfTtcbmwuRGI9ZnVuY3Rpb24oYSxiKXtpcC5wcm90b3R5cGUuRGIuY2FsbCh0aGlzLGEsYil9O2wuU2Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5UZCgpfTtsLlRkPWZ1bmN0aW9uKCl7cmV0dXJuIDB9O2wuUWM9ZnVuY3Rpb24oYSl7cmV0dXJuIGlwLnByb3RvdHlwZS5RYy5jYWxsKHRoaXMsYSl9O2wuTWE9ZnVuY3Rpb24oYSl7cmV0dXJuIGlwLnByb3RvdHlwZS5NYS5jYWxsKHRoaXMsYSl9O2wuVGI9ZnVuY3Rpb24oYSl7cmV0dXJuIGlwLnByb3RvdHlwZS5UYi5jYWxsKHRoaXMsYSl9O1xuZnVuY3Rpb24gbXAoYSxiLGMsZCxlLGYsZyl7ZD1iPVtiLGMsZF07dmFyIGg9dm9pZCAwIT09Zj9mOmEuJDtjPWEuTWEoaCk7aWYoYS5DJiZoLmkpe3ZhciBrPWQ7ZD1rWzBdO3ZhciBtPVdiKGMsayksaD1iYyhoKSxuPW1bMF0scD1tWzFdO2hbMF08PW4mJm48PWhbMl0mJmhbMV08PXAmJnA8PWhbM10/ZD1rOihrPWFiKGgpLG1bMF0rPWsqTWF0aC5jZWlsKChoWzBdLW1bMF0pL2spLGQ9VWIoYyxtWzBdLG1bMV0sYy5iW2RdLCExLHZvaWQgMCkpfWg9ZFswXTttPWRbMV07az1kWzJdO2M9Yy5taW5ab29tPmh8fGg+Yy5tYXhab29tPyExOihjPShuPWMuSigpKT9WYihjLG4saCk6Yy5jP2MuY1toXTpudWxsKT95YShjLG0sayk6ITA7ZT0oYz1jP2Q6bnVsbCk/YS50aWxlVXJsRnVuY3Rpb24oYyxlLGYpOnZvaWQgMDtlPW5ldyBhLnRpbGVDbGFzcyhiLHZvaWQgMCE9PWU/MDo0LHZvaWQgMCE9PWU/ZTpcIlwiLGEuY3Jvc3NPcmlnaW4sYS50aWxlTG9hZEZ1bmN0aW9uKTtlLmtleT1nO3koZSxcblwiY2hhbmdlXCIsYS5HLGEpO3JldHVybiBlfWZ1bmN0aW9uIFhvKGEsYixjLGQsZSxmKXt2YXIgZyxoPWEuRmIoYixjLGQpLGs9YS5rYjtpZihhLmMuYS5oYXNPd25Qcm9wZXJ0eShoKSl7aWYoZz1hLmMuZ2V0KGgpLGcua2V5IT1rKXt2YXIgbT1nO2c9bXAoYSxiLGMsZCxlLGYsayk7MD09bS5zdGF0ZT9nLmI9bS5iOmcuYj1tO2lmKGcuYil7Yj1nLmI7Yz1nO2Rve2lmKDI9PWIuc3RhdGUpe2IuYj1udWxsO2JyZWFrfWVsc2UgMT09Yi5zdGF0ZT9jPWI6MD09Yi5zdGF0ZT9jLmI9Yi5iOmM9YjtiPWMuYn13aGlsZShiKX1hLmMucmVwbGFjZShoLGcpfX1lbHNlIGc9bXAoYSxiLGMsZCxlLGYsayksYS5jLnNldChoLGcpO3JldHVybiBnfWZ1bmN0aW9uIGxwKGEsYil7YS5pYSgpLnNyYz1ifTtmdW5jdGlvbiBucChhKXthPWF8fHt9O3ZhciBiPXZvaWQgMCE9PWEucHJvamVjdGlvbj9hLnByb2plY3Rpb246XCJFUFNHOjM4NTdcIixjPXZvaWQgMCE9PWEudGlsZUdyaWQ/YS50aWxlR3JpZDokYih7ZXh0ZW50OmJjKGIpLG1heFpvb206YS5tYXhab29tLG1pblpvb206YS5taW5ab29tLHRpbGVTaXplOmEudGlsZVNpemV9KTtrcC5jYWxsKHRoaXMse2F0dHJpYnV0aW9uczphLmF0dHJpYnV0aW9ucyxjYWNoZVNpemU6YS5jYWNoZVNpemUsY3Jvc3NPcmlnaW46YS5jcm9zc09yaWdpbixsb2dvOmEubG9nbyxvcGFxdWU6YS5vcGFxdWUscHJvamVjdGlvbjpiLHJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkOmEucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQsdGlsZUdyaWQ6Yyx0aWxlTG9hZEZ1bmN0aW9uOmEudGlsZUxvYWRGdW5jdGlvbix0aWxlUGl4ZWxSYXRpbzphLnRpbGVQaXhlbFJhdGlvLHRpbGVVcmxGdW5jdGlvbjphLnRpbGVVcmxGdW5jdGlvbix1cmw6YS51cmwsdXJsczphLnVybHMsXG53cmFwWDp2b2lkIDAhPT1hLndyYXBYP2Eud3JhcFg6ITB9KX10KG5wLGtwKTtmdW5jdGlvbiBvcChhKXtXbi5jYWxsKHRoaXMse2F0dHJpYnV0aW9uczphLmF0dHJpYnV0aW9ucyxleHRlbnQ6YS5leHRlbnQsbG9nbzphLmxvZ28scHJvamVjdGlvbjphLnByb2plY3Rpb24sd3JhcFg6YS53cmFwWH0pO3RoaXMudj12b2lkIDA7dGhpcy55YT12b2lkIDAhPT1hLmRpc3RhbmNlP2EuZGlzdGFuY2U6MjA7dGhpcy5CPVtdO3RoaXMudGE9YS5nZW9tZXRyeUZ1bmN0aW9ufHxmdW5jdGlvbihhKXthPWEuUigpO3goYSBpbnN0YW5jZW9mIE1lLDEwKTtyZXR1cm4gYX07dGhpcy5zPWEuc291cmNlO3RoaXMucy51KFwiY2hhbmdlXCIsb3AucHJvdG90eXBlLmJiLHRoaXMpfXQob3AsV24pO29wLnByb3RvdHlwZS5XYz1mdW5jdGlvbihhLGIsYyl7dGhpcy5zLldjKGEsYixjKTtiIT09dGhpcy52JiYodGhpcy5jbGVhcigpLHRoaXMudj1iLHBwKHRoaXMpLHRoaXMudWIodGhpcy5CKSl9O1xub3AucHJvdG90eXBlLmJiPWZ1bmN0aW9uKCl7dGhpcy5jbGVhcigpO3BwKHRoaXMpO3RoaXMudWIodGhpcy5CKTt0aGlzLmIoKX07ZnVuY3Rpb24gcHAoYSl7aWYodm9pZCAwIT09YS52KXthLkIubGVuZ3RoPTA7Zm9yKHZhciBiPUxhKCksYz1hLnlhKmEudixkPWEucy5iZCgpLGU9e30sZj0wLGc9ZC5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9ZFtmXTt3KGgpLnRvU3RyaW5nKClpbiBlfHwhKGg9YS50YShoKSl8fChoPWguRCgpLFRhKGgsYiksTmEoYixjLGIpLGg9WWcoYS5zLmEsYiksaD1oLmZpbHRlcihmdW5jdGlvbihhKXthPXcoYSkudG9TdHJpbmcoKTtyZXR1cm4gYSBpbiBlPyExOmVbYV09ITB9KSxhLkIucHVzaChxcChhLGgpKSl9fX1cbmZ1bmN0aW9uIHFwKGEsYil7Zm9yKHZhciBjPVswLDBdLGQ9Yi5sZW5ndGgtMTswPD1kOy0tZCl7dmFyIGU9YS50YShiW2RdKTtlP2hlKGMsZS5EKCkpOmIuc3BsaWNlKGQsMSl9bGUoYywxL2IubGVuZ3RoKTtjPW5ldyBJKG5ldyBNZShjKSk7Yy5zZXQoXCJmZWF0dXJlc1wiLGIpO3JldHVybiBjfTtmdW5jdGlvbiBycChhLGIpe3ZhciBjPVtdO09iamVjdC5rZXlzKGIpLmZvckVhY2goZnVuY3Rpb24oYSl7bnVsbCE9PWJbYV0mJnZvaWQgMCE9PWJbYV0mJmMucHVzaChhK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChiW2FdKSl9KTt2YXIgZD1jLmpvaW4oXCImXCIpO2E9YS5yZXBsYWNlKC9bPyZdJC8sXCJcIik7YT0tMT09PWEuaW5kZXhPZihcIj9cIik/YStcIj9cIjphK1wiJlwiO3JldHVybiBhK2R9O2Z1bmN0aW9uIHNwKGEpe2E9YXx8e307dmFyIGI7dm9pZCAwIT09YS5hdHRyaWJ1dGlvbnM/Yj1hLmF0dHJpYnV0aW9uczpiPVt0cF07bnAuY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YixjYWNoZVNpemU6YS5jYWNoZVNpemUsY3Jvc3NPcmlnaW46dm9pZCAwIT09YS5jcm9zc09yaWdpbj9hLmNyb3NzT3JpZ2luOlwiYW5vbnltb3VzXCIsb3BhcXVlOnZvaWQgMCE9PWEub3BhcXVlP2Eub3BhcXVlOiEwLG1heFpvb206dm9pZCAwIT09YS5tYXhab29tP2EubWF4Wm9vbToxOSxyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDphLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLHRpbGVMb2FkRnVuY3Rpb246YS50aWxlTG9hZEZ1bmN0aW9uLHVybDp2b2lkIDAhPT1hLnVybD9hLnVybDpcImh0dHBzOi8ve2EtY30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmdcIix3cmFwWDphLndyYXBYfSl9dChzcCxucCk7dmFyIHRwPW5ldyBlYyh7aHRtbDonJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMuJ30pOyhmdW5jdGlvbigpe3ZhciBhPXt9LGI9e1U6YX07KGZ1bmN0aW9uKGMpe2lmKFwib2JqZWN0XCI9PT10eXBlb2YgYSYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBiKWIuVT1jKCk7ZWxzZXt2YXIgZDtcInVuZGVmaW5lZFwiIT09dHlwZW9mIHdpbmRvdz9kPXdpbmRvdzpcInVuZGVmaW5lZFwiIT09dHlwZW9mIGdsb2JhbD9kPWdsb2JhbDpcInVuZGVmaW5lZFwiIT09dHlwZW9mIHNlbGY/ZD1zZWxmOmQ9dGhpcztkLlRpPWMoKX19KShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBkKGEsYixnKXtmdW5jdGlvbiBlKGgsayl7aWYoIWJbaF0pe2lmKCFhW2hdKXt2YXIgbT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFrJiZtKXJldHVybiBtKGgsITApO2lmKGYpcmV0dXJuIGYoaCwhMCk7bT1FcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraCtcIidcIik7dGhyb3cgbS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLG07fW09YltoXT17VTp7fX07YVtoXVswXS5jYWxsKG0uVSxmdW5jdGlvbihiKXt2YXIgZD1cbmFbaF1bMV1bYl07cmV0dXJuIGUoZD9kOmIpfSxtLG0uVSxkLGEsYixnKX1yZXR1cm4gYltoXS5VfWZvcih2YXIgZj1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLG09MDttPGcubGVuZ3RoO20rKyllKGdbbV0pO3JldHVybiBlfSh7MTpbZnVuY3Rpb24oYSxiLGYpe2E9YShcIi4vcHJvY2Vzc29yXCIpO2YuTGk9YX0se1wiLi9wcm9jZXNzb3JcIjoyfV0sMjpbZnVuY3Rpb24oYSxiKXtmdW5jdGlvbiBkKGEpe3ZhciBiPSEwO3RyeXtuZXcgSW1hZ2VEYXRhKDEwLDEwKX1jYXRjaChxKXtiPSExfXJldHVybiBmdW5jdGlvbihkKXt2YXIgZT1kLmJ1ZmZlcnMsZj1kLm1ldGEsZz1kLndpZHRoLGg9ZC5oZWlnaHQsaz1lLmxlbmd0aCxtPWVbMF0uYnl0ZUxlbmd0aDtpZihkLmltYWdlT3BzKXttPUFycmF5KGspO2ZvcihkPTA7ZDxrOysrZCl7dmFyIG49bSxwPWQscTtxPW5ldyBVaW50OENsYW1wZWRBcnJheShlW2RdKTt2YXIgWD1nLHY9aDtxPWI/bmV3IEltYWdlRGF0YShxLFgsdik6XG57ZGF0YTpxLHdpZHRoOlgsaGVpZ2h0OnZ9O25bcF09cX1nPWEobSxmKS5kYXRhfWVsc2V7Zz1uZXcgVWludDhDbGFtcGVkQXJyYXkobSk7aD1BcnJheShrKTtuPUFycmF5KGspO2ZvcihkPTA7ZDxrOysrZCloW2RdPW5ldyBVaW50OENsYW1wZWRBcnJheShlW2RdKSxuW2RdPVswLDAsMCwwXTtmb3IoZT0wO2U8bTtlKz00KXtmb3IoZD0wO2Q8azsrK2QpcD1oW2RdLG5bZF1bMF09cFtlXSxuW2RdWzFdPXBbZSsxXSxuW2RdWzJdPXBbZSsyXSxuW2RdWzNdPXBbZSszXTtkPWEobixmKTtnW2VdPWRbMF07Z1tlKzFdPWRbMV07Z1tlKzJdPWRbMl07Z1tlKzNdPWRbM119fXJldHVybiBnLmJ1ZmZlcn19ZnVuY3Rpb24gZShhLGIpe3ZhciBlPU9iamVjdC5rZXlzKGEubGlifHx7fSkubWFwKGZ1bmN0aW9uKGIpe3JldHVyblwidmFyIFwiK2IrXCIgPSBcIithLmxpYltiXS50b1N0cmluZygpK1wiO1wifSkuY29uY2F0KFtcInZhciBfX21pbmlvbl9fID0gKFwiK2QudG9TdHJpbmcoKStcIikoXCIsYS5vcGVyYXRpb24udG9TdHJpbmcoKSxcblwiKTtcIiwnc2VsZi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbihldmVudCkgeycsXCIgIHZhciBidWZmZXIgPSBfX21pbmlvbl9fKGV2ZW50LmRhdGEpO1wiLFwiICBzZWxmLnBvc3RNZXNzYWdlKHtidWZmZXI6IGJ1ZmZlciwgbWV0YTogZXZlbnQuZGF0YS5tZXRhfSwgW2J1ZmZlcl0pO1wiLFwifSk7XCJdKSxlPVVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoZSx7dHlwZTpcInRleHQvamF2YXNjcmlwdFwifSkpLGU9bmV3IFdvcmtlcihlKTtlLmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsYik7cmV0dXJuIGV9ZnVuY3Rpb24gaChhLGIpe3ZhciBlPWQoYS5vcGVyYXRpb24pO3JldHVybntwb3N0TWVzc2FnZTpmdW5jdGlvbihhKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yih7ZGF0YTp7YnVmZmVyOmUoYSksbWV0YTphLm1ldGF9fSl9LDApfX19ZnVuY3Rpb24gayhhKXt0aGlzLnZjPSEhYS5SaTt2YXIgYjswPT09YS50aHJlYWRzP2I9MDp0aGlzLnZjP2I9MTpiPWEudGhyZWFkc3x8XG4xO3ZhciBkPVtdO2lmKGIpZm9yKHZhciBmPTA7ZjxiOysrZilkW2ZdPWUoYSx0aGlzLkZkLmJpbmQodGhpcyxmKSk7ZWxzZSBkWzBdPWgoYSx0aGlzLkZkLmJpbmQodGhpcywwKSk7dGhpcy5PYj1kO3RoaXMuR2Q9W107dGhpcy5NYj0wO3RoaXMuZWI9e307dGhpcy53Yz1udWxsfXZhciBtPWEoXCIuL3V0aWxcIikuU2c7ay5wcm90b3R5cGUuQmY9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5NYiYmMDx0aGlzLkdkLmxlbmd0aCl7dmFyIGE9dGhpcy53Yz10aGlzLkdkLnNoaWZ0KCksYj1hLmlucHV0c1swXS53aWR0aCxkPWEuaW5wdXRzWzBdLmhlaWdodCxlPWEuaW5wdXRzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRhLmJ1ZmZlcn0pLGY9dGhpcy5PYi5sZW5ndGg7dGhpcy5NYj1mO2lmKDE9PT1mKXRoaXMuT2JbMF0ucG9zdE1lc3NhZ2Uoe2J1ZmZlcnM6ZSxtZXRhOmEuRGcsaW1hZ2VPcHM6dGhpcy52Yyx3aWR0aDpiLGhlaWdodDpkfSxlKTtlbHNlIGZvcih2YXIgZz00Kk1hdGguY2VpbChhLmlucHV0c1swXS5kYXRhLmxlbmd0aC9cbjQvZiksaD0wO2g8ZjsrK2gpe2Zvcih2YXIgaz1oKmcsbT1bXSxRPTAsZmE9ZS5sZW5ndGg7UTxmYTsrK1EpbS5wdXNoKGVbaF0uc2xpY2UoayxrK2cpKTt0aGlzLk9iW2hdLnBvc3RNZXNzYWdlKHtidWZmZXJzOm0sbWV0YTphLkRnLGltYWdlT3BzOnRoaXMudmMsd2lkdGg6YixoZWlnaHQ6ZH0sbSl9fX07ay5wcm90b3R5cGUuRmQ9ZnVuY3Rpb24oYSxiKXt0aGlzLlFpfHwodGhpcy5lYlthXT1iLmRhdGEsLS10aGlzLk1iLDA9PT10aGlzLk1iJiZ0aGlzLkRmKCkpfTtrLnByb3RvdHlwZS5EZj1mdW5jdGlvbigpe3ZhciBhPXRoaXMud2MsYj10aGlzLk9iLmxlbmd0aCxkLGU7aWYoMT09PWIpZD1uZXcgVWludDhDbGFtcGVkQXJyYXkodGhpcy5lYlswXS5idWZmZXIpLGU9dGhpcy5lYlswXS5tZXRhO2Vsc2V7dmFyIGY9YS5pbnB1dHNbMF0uZGF0YS5sZW5ndGg7ZD1uZXcgVWludDhDbGFtcGVkQXJyYXkoZik7ZT1BcnJheShmKTtmb3IodmFyIGY9NCpNYXRoLmNlaWwoZi80L2IpLGc9MDtnPFxuYjsrK2cpe3ZhciBoPWcqZjtkLnNldChuZXcgVWludDhDbGFtcGVkQXJyYXkodGhpcy5lYltnXS5idWZmZXIpLGgpO2VbZ109dGhpcy5lYltnXS5tZXRhfX10aGlzLndjPW51bGw7dGhpcy5lYj17fTthLlFiKG51bGwsbShkLGEuaW5wdXRzWzBdLndpZHRoLGEuaW5wdXRzWzBdLmhlaWdodCksZSk7dGhpcy5CZigpfTtiLlU9a30se1wiLi91dGlsXCI6M31dLDM6W2Z1bmN0aW9uKGEsYixmKXt2YXIgZD0hMDt0cnl7bmV3IEltYWdlRGF0YSgxMCwxMCl9Y2F0Y2goayl7ZD0hMX12YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLmdldENvbnRleHQoXCIyZFwiKTtmLlNnPWZ1bmN0aW9uKGEsYixmKXtpZihkKXJldHVybiBuZXcgSW1hZ2VEYXRhKGEsYixmKTtiPWUuY3JlYXRlSW1hZ2VEYXRhKGIsZik7Yi5kYXRhLnNldChhKTtyZXR1cm4gYn19LHt9XX0se30sWzFdKSgxKX0pfSkoKTtmdW5jdGlvbiB1cChhKXthPWF8fHt9O2twLmNhbGwodGhpcyx7YXR0cmlidXRpb25zOmEuYXR0cmlidXRpb25zLGNhY2hlU2l6ZTphLmNhY2hlU2l6ZSxjcm9zc09yaWdpbjphLmNyb3NzT3JpZ2luLGxvZ286YS5sb2dvLHByb2plY3Rpb246YS5wcm9qZWN0aW9uLHJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkOmEucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQsdGlsZUdyaWQ6YS50aWxlR3JpZCx0aWxlTG9hZEZ1bmN0aW9uOmEudGlsZUxvYWRGdW5jdGlvbix1cmw6YS51cmwsdXJsczphLnVybHMsd3JhcFg6dm9pZCAwIT09YS53cmFwWD9hLndyYXBYOiEwfSk7dGhpcy5nPWEucGFyYW1zfHx7fTt0aGlzLmk9TGEoKTthPTA7dmFyIGI9W10sYztmb3IoYyBpbiB0aGlzLmcpYlthKytdPWMrXCItXCIrdGhpcy5nW2NdO2dwKHRoaXMsYi5qb2luKFwiL1wiKSl9dCh1cCxrcCk7dXAucHJvdG90eXBlLlViPWZ1bmN0aW9uKGEpe3JldHVybiBhfTtcbnVwLnByb3RvdHlwZS5VYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy50aWxlR3JpZDtkfHwoZD10aGlzLk1hKGMpKTtpZighKGQuYi5sZW5ndGg8PWFbMF0pKXt2YXIgZT1ZYihkLGEsdGhpcy5pKSxmPUphKFhiKGQsYVswXSksdGhpcy5hKTsxIT1iJiYoZj1JYShmLGIsdGhpcy5hKSk7ZD17RjpcImltYWdlXCIsRk9STUFUOlwiUE5HMzJcIixUUkFOU1BBUkVOVDohMH07YmIoZCx0aGlzLmcpO3ZhciBnPXRoaXMudXJscztnPyhjPWMuSWEuc3BsaXQoXCI6XCIpLnBvcCgpLGQuU0laRT1mWzBdK1wiLFwiK2ZbMV0sZC5CQk9YPWUuam9pbihcIixcIiksZC5CQk9YU1I9YyxkLklNQUdFU1I9YyxkLkRQST1NYXRoLnJvdW5kKGQuRFBJP2QuRFBJKmI6OTAqYiksYT0oMT09Zy5sZW5ndGg/Z1swXTpnW0ZhKChhWzFdPDxhWzBdKSthWzJdLGcubGVuZ3RoKV0pLnJlcGxhY2UoL01hcFNlcnZlclxcLz8kLyxcIk1hcFNlcnZlci9leHBvcnRcIikucmVwbGFjZSgvSW1hZ2VTZXJ2ZXJcXC8/JC8sXCJJbWFnZVNlcnZlci9leHBvcnRJbWFnZVwiKSxcbmE9cnAoYSxkKSk6YT12b2lkIDA7cmV0dXJuIGF9fTtmdW5jdGlvbiB2cChhKXthPWF8fHt9O3ZhciBiPWEucGFyYW1zfHx7fTtrcC5jYWxsKHRoaXMse2F0dHJpYnV0aW9uczphLmF0dHJpYnV0aW9ucyxjYWNoZVNpemU6YS5jYWNoZVNpemUsY3Jvc3NPcmlnaW46YS5jcm9zc09yaWdpbixsb2dvOmEubG9nbyxvcGFxdWU6IShcIlRSQU5TUEFSRU5UXCJpbiBiP2IuVFJBTlNQQVJFTlQ6MSkscHJvamVjdGlvbjphLnByb2plY3Rpb24scmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ6YS5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCx0aWxlR3JpZDphLnRpbGVHcmlkLHRpbGVMb2FkRnVuY3Rpb246YS50aWxlTG9hZEZ1bmN0aW9uLHVybDphLnVybCx1cmxzOmEudXJscyx3cmFwWDp2b2lkIDAhPT1hLndyYXBYP2Eud3JhcFg6ITB9KTt0aGlzLmo9dm9pZCAwIT09YS5ndXR0ZXI/YS5ndXR0ZXI6MDt0aGlzLmc9Yjt0aGlzLmk9ITA7dGhpcy5vPWEuc2VydmVyVHlwZTt0aGlzLnY9dm9pZCAwIT09YS5oaWRwaT9hLmhpZHBpOiEwO3RoaXMuQj1cIlwiO1xud3AodGhpcyk7dGhpcy5zPUxhKCk7YTp7YT0oXCJcIisodGhpcy5nLlZFUlNJT058fFwiMS4zLjBcIikpLnNwbGl0KFwiLlwiKTtmb3IodmFyIGI9W1wiMVwiLFwiM1wiXSxjPTA7YzxNYXRoLm1heChhLmxlbmd0aCxiLmxlbmd0aCk7YysrKXt2YXIgZD1wYXJzZUludChhW2NdfHxcIjBcIiwxMCksZT1wYXJzZUludChiW2NdfHxcIjBcIiwxMCk7aWYoZD5lKXthPTE7YnJlYWsgYX1pZihlPmQpe2E9LTE7YnJlYWsgYX19YT0wfXRoaXMuaT0wPD1hO2E9MDt2YXIgYj1bXSxmO2ZvcihmIGluIHRoaXMuZyliW2ErK109ZitcIi1cIit0aGlzLmdbZl07Z3AodGhpcyxiLmpvaW4oXCIvXCIpKX10KHZwLGtwKTtsPXZwLnByb3RvdHlwZTtcbmwuV2Y9ZnVuY3Rpb24oYSxiLGMsZCl7Yz1IYihjKTt2YXIgZT10aGlzLnRpbGVHcmlkO2V8fChlPXRoaXMuTWEoYykpO2I9VWIoZSxhWzBdLGFbMV0sYiwhMSx2b2lkIDApO2lmKCEoZS5iLmxlbmd0aDw9YlswXSkpe3ZhciBmPWUuYltiWzBdXSxnPVliKGUsYix0aGlzLnMpLGU9SmEoWGIoZSxiWzBdKSx0aGlzLmEpLGg9dGhpcy5qO2gmJihlPUhhKGUsaCx0aGlzLmEpLGc9TmEoZyxmKmgsZykpO2g9e1NFUlZJQ0U6XCJXTVNcIixWRVJTSU9OOlwiMS4zLjBcIixSRVFVRVNUOlwiR2V0RmVhdHVyZUluZm9cIixGT1JNQVQ6XCJpbWFnZS9wbmdcIixUUkFOU1BBUkVOVDohMCxRVUVSWV9MQVlFUlM6dGhpcy5nLkxBWUVSU307YmIoaCx0aGlzLmcsZCk7ZD1NYXRoLmZsb29yKChnWzNdLWFbMV0pL2YpO2hbdGhpcy5pP1wiSVwiOlwiWFwiXT1NYXRoLmZsb29yKChhWzBdLWdbMF0pL2YpO2hbdGhpcy5pP1wiSlwiOlwiWVwiXT1kO3JldHVybiB4cCh0aGlzLGIsZSxnLDEsYyxoKX19O2wuVGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qfTtcbmwuRmI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLkIra3AucHJvdG90eXBlLkZiLmNhbGwodGhpcyxhLGIsYyl9O1xuZnVuY3Rpb24geHAoYSxiLGMsZCxlLGYsZyl7dmFyIGg9YS51cmxzO2lmKGgpe2cuV0lEVEg9Y1swXTtnLkhFSUdIVD1jWzFdO2dbYS5pP1wiQ1JTXCI6XCJTUlNcIl09Zi5JYTtcIlNUWUxFU1wiaW4gYS5nfHwoZy5TVFlMRVM9XCJcIik7aWYoMSE9ZSlzd2l0Y2goYS5vKXtjYXNlIFwiZ2Vvc2VydmVyXCI6Yz05MCplKy41fDA7Zy5GT1JNQVRfT1BUSU9OUz1cIkZPUk1BVF9PUFRJT05TXCJpbiBnP2cuRk9STUFUX09QVElPTlMrKFwiO2RwaTpcIitjKTpcImRwaTpcIitjO2JyZWFrO2Nhc2UgXCJtYXBzZXJ2ZXJcIjpnLk1BUF9SRVNPTFVUSU9OPTkwKmU7YnJlYWs7Y2FzZSBcImNhcm1lbnRhc2VydmVyXCI6Y2FzZSBcInFnaXNcIjpnLkRQST05MCplO2JyZWFrO2RlZmF1bHQ6eCghMSw1Mil9Zj1mLmI7YS5pJiZcIm5lXCI9PWYuc3Vic3RyKDAsMikmJihhPWRbMF0sZFswXT1kWzFdLGRbMV09YSxhPWRbMl0sZFsyXT1kWzNdLGRbM109YSk7Zy5CQk9YPWQuam9pbihcIixcIik7cmV0dXJuIHJwKDE9PWgubGVuZ3RoP2hbMF06aFtGYSgoYlsxXTw8XG5iWzBdKStiWzJdLGgubGVuZ3RoKV0sZyl9fWwuVWI9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudiYmdm9pZCAwIT09dGhpcy5vP2E6MX07ZnVuY3Rpb24gd3AoYSl7dmFyIGI9MCxjPVtdO2lmKGEudXJscyl7dmFyIGQsZTtkPTA7Zm9yKGU9YS51cmxzLmxlbmd0aDtkPGU7KytkKWNbYisrXT1hLnVybHNbZF19YS5CPWMuam9pbihcIiNcIil9XG5sLlVhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnRpbGVHcmlkO2R8fChkPXRoaXMuTWEoYykpO2lmKCEoZC5iLmxlbmd0aDw9YVswXSkpezE9PWJ8fHRoaXMudiYmdm9pZCAwIT09dGhpcy5vfHwoYj0xKTt2YXIgZT1kLmJbYVswXV0sZj1ZYihkLGEsdGhpcy5zKSxkPUphKFhiKGQsYVswXSksdGhpcy5hKSxnPXRoaXMuajtnJiYoZD1IYShkLGcsdGhpcy5hKSxmPU5hKGYsZSpnLGYpKTsxIT1iJiYoZD1JYShkLGIsdGhpcy5hKSk7ZT17U0VSVklDRTpcIldNU1wiLFZFUlNJT046XCIxLjMuMFwiLFJFUVVFU1Q6XCJHZXRNYXBcIixGT1JNQVQ6XCJpbWFnZS9wbmdcIixUUkFOU1BBUkVOVDohMH07YmIoZSx0aGlzLmcpO3JldHVybiB4cCh0aGlzLGEsZCxmLGIsYyxlKX19O2wucWQ9ZnVuY3Rpb24oYSl7a3AucHJvdG90eXBlLnFkLmNhbGwodGhpcyxhKTt3cCh0aGlzKX07ZnVuY3Rpb24geXAoYSl7dGhpcy5qPWEubWF0cml4SWRzO1FiLmNhbGwodGhpcyx7ZXh0ZW50OmEuZXh0ZW50LG9yaWdpbjphLm9yaWdpbixvcmlnaW5zOmEub3JpZ2lucyxyZXNvbHV0aW9uczphLnJlc29sdXRpb25zLHRpbGVTaXplOmEudGlsZVNpemUsdGlsZVNpemVzOmEudGlsZVNpemVzLHNpemVzOmEuc2l6ZXN9KX10KHlwLFFiKTtmdW5jdGlvbiB6cChhKXtmdW5jdGlvbiBiKGEpe2E9XCJLVlBcIj09ZD9ycChhLGYpOmEucmVwbGFjZSgvXFx7KFxcdys/KVxcfS9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9Mb3dlckNhc2UoKWluIGY/ZltiLnRvTG93ZXJDYXNlKCldOmF9KTtyZXR1cm4gZnVuY3Rpb24oYil7aWYoYil7dmFyIGM9e1RpbGVNYXRyaXg6ZS5qW2JbMF1dLFRpbGVDb2w6YlsxXSxUaWxlUm93Oi1iWzJdLTF9O2JiKGMsZyk7Yj1hO3JldHVybiBiPVwiS1ZQXCI9PWQ/cnAoYixjKTpiLnJlcGxhY2UoL1xceyhcXHcrPylcXH0vZyxmdW5jdGlvbihhLGIpe3JldHVybiBjW2JdfSl9fX10aGlzLnM9dm9pZCAwIT09YS52ZXJzaW9uP2EudmVyc2lvbjpcIjEuMC4wXCI7dGhpcy5qPXZvaWQgMCE9PWEuZm9ybWF0P2EuZm9ybWF0OlwiaW1hZ2UvanBlZ1wiO3RoaXMuZz1hLmRpbWVuc2lvbnM/YS5kaW1lbnNpb25zOnt9O3RoaXMubz1hLmxheWVyO3RoaXMuaT1hLm1hdHJpeFNldDt0aGlzLkI9YS5zdHlsZTt2YXIgYz1hLnVybHM7dm9pZCAwPT09XG5jJiZ2b2lkIDAhPT1hLnVybCYmKGM9ZHAoYS51cmwpKTt2YXIgZD10aGlzLnY9dm9pZCAwIT09YS5yZXF1ZXN0RW5jb2Rpbmc/YS5yZXF1ZXN0RW5jb2Rpbmc6XCJLVlBcIixlPWEudGlsZUdyaWQsZj17bGF5ZXI6dGhpcy5vLHN0eWxlOnRoaXMuQix0aWxlbWF0cml4c2V0OnRoaXMuaX07XCJLVlBcIj09ZCYmYmIoZix7U2VydmljZTpcIldNVFNcIixSZXF1ZXN0OlwiR2V0VGlsZVwiLFZlcnNpb246dGhpcy5zLEZvcm1hdDp0aGlzLmp9KTt2YXIgZz10aGlzLmcsaD1jJiYwPGMubGVuZ3RoP2JwKGMubWFwKGIpKTpjcDtrcC5jYWxsKHRoaXMse2F0dHJpYnV0aW9uczphLmF0dHJpYnV0aW9ucyxjYWNoZVNpemU6YS5jYWNoZVNpemUsY3Jvc3NPcmlnaW46YS5jcm9zc09yaWdpbixsb2dvOmEubG9nbyxwcm9qZWN0aW9uOmEucHJvamVjdGlvbixyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDphLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLHRpbGVDbGFzczphLnRpbGVDbGFzcyx0aWxlR3JpZDplLFxudGlsZUxvYWRGdW5jdGlvbjphLnRpbGVMb2FkRnVuY3Rpb24sdGlsZVBpeGVsUmF0aW86YS50aWxlUGl4ZWxSYXRpbyx0aWxlVXJsRnVuY3Rpb246aCx1cmxzOmMsd3JhcFg6dm9pZCAwIT09YS53cmFwWD9hLndyYXBYOiExfSk7Z3AodGhpcyxBcCh0aGlzKSl9dCh6cCxrcCk7ZnVuY3Rpb24gQXAoYSl7dmFyIGI9MCxjPVtdLGQ7Zm9yKGQgaW4gYS5nKWNbYisrXT1kK1wiLVwiK2EuZ1tkXTtyZXR1cm4gYy5qb2luKFwiL1wiKX07cihcIm9sLk1hcFwiLEcpO0cucHJvdG90eXBlLmFkZEludGVyYWN0aW9uPUcucHJvdG90eXBlLklmO0cucHJvdG90eXBlLmFkZExheWVyPUcucHJvdG90eXBlLkpmO0cucHJvdG90eXBlLmFkZENvbnRyb2w9Ry5wcm90b3R5cGUuSGY7Ry5wcm90b3R5cGUuYWRkT3ZlcmxheT1HLnByb3RvdHlwZS5LZjtHLnByb3RvdHlwZS5mb3JFYWNoRmVhdHVyZUF0UGl4ZWw9Ry5wcm90b3R5cGUuTmM7Ry5wcm90b3R5cGUuZm9yRWFjaExheWVyQXRQaXhlbD1HLnByb3RvdHlwZS4kZztHLnByb3RvdHlwZS5nZXRMYXllcnM9Ry5wcm90b3R5cGUuYWg7Ry5wcm90b3R5cGUuZ2V0U2l6ZT1HLnByb3RvdHlwZS5tYjtHLnByb3RvdHlwZS5nZXRUYXJnZXQ9Ry5wcm90b3R5cGUuVGM7Ry5wcm90b3R5cGUuZ2V0T3ZlcmxheXM9Ry5wcm90b3R5cGUuYWc7Ry5wcm90b3R5cGUuZ2V0Vmlldz1HLnByb3RvdHlwZS5aO0cucHJvdG90eXBlLnJlbW92ZUludGVyYWN0aW9uPUcucHJvdG90eXBlLmlpO1xuRy5wcm90b3R5cGUucmVtb3ZlT3ZlcmxheT1HLnByb3RvdHlwZS5qaTtHLnByb3RvdHlwZS5vbj1HLnByb3RvdHlwZS51O0cucHJvdG90eXBlLnVuPUcucHJvdG90eXBlLmZhO3IoXCJvbC5wcm9qLlByb2plY3Rpb25cIixpYik7aWIucHJvdG90eXBlLmdldEV4dGVudD1pYi5wcm90b3R5cGUuSjtpYi5wcm90b3R5cGUuZ2V0TWV0ZXJzUGVyVW5pdD1pYi5wcm90b3R5cGUuZjtyKFwib2wucHJvai50cmFuc2Zvcm1cIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIE5iKGIsYykoYSx2b2lkIDAsYS5sZW5ndGgpfSk7cihcIm9sLlZpZXdcIixZZSk7WWUucHJvdG90eXBlLmNhbGN1bGF0ZUV4dGVudD1ZZS5wcm90b3R5cGUuTGQ7WWUucHJvdG90eXBlLmdldENlbnRlcj1ZZS5wcm90b3R5cGUuaGE7WWUucHJvdG90eXBlLmdldFByb2plY3Rpb249WWUucHJvdG90eXBlLmJoO1llLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uPVllLnByb3RvdHlwZS52YTtZZS5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnM9WWUucHJvdG90eXBlLmRoO1xuWWUucHJvdG90eXBlLmdldFpvb209WWUucHJvdG90eXBlLmRnO1llLnByb3RvdHlwZS5vbj1ZZS5wcm90b3R5cGUudTtZZS5wcm90b3R5cGUuc2V0Q2VudGVyPVllLnByb3RvdHlwZS5LYTtZZS5wcm90b3R5cGUuc2V0Wm9vbT1ZZS5wcm90b3R5cGUubmk7WWUucHJvdG90eXBlLmZpdD1ZZS5wcm90b3R5cGUuUGY7WWUucHJvdG90eXBlLnVuPVllLnByb3RvdHlwZS5mYTtyKFwib2wuZXh0ZW50LmdldFRvcExlZnRcIiwkYSk7cihcIm9sLnRpbGVncmlkLlRpbGVHcmlkXCIsUWIpO3IoXCJvbC50aWxlZ3JpZC5XTVRTXCIseXApO3IoXCJvbC50aWxlZ3JpZC5jcmVhdGVYWVpcIiwkYik7cihcIm9sLnN0eWxlLlN0eWxlXCIsemgpO3poLnByb3RvdHlwZS5nZXRUZXh0PXpoLnByb3RvdHlwZS5uYTtyKFwib2wuc3R5bGUuQ2lyY2xlXCIseGgpO3IoXCJvbC5zdHlsZS5GaWxsXCIseWgpO3IoXCJvbC5zdHlsZS5JY29uXCIsS2opO3IoXCJvbC5zdHlsZS5JbWFnZVwiLHVoKTtyKFwib2wuc3R5bGUuU3Ryb2tlXCIsVGcpO1xucihcIm9sLnN0eWxlLlRleHRcIixMaik7TGoucHJvdG90eXBlLmdldFRleHQ9TGoucHJvdG90eXBlLm5hO0xqLnByb3RvdHlwZS5zZXRGaWxsPUxqLnByb3RvdHlwZS5RZTtMai5wcm90b3R5cGUuc2V0U3Ryb2tlPUxqLnByb3RvdHlwZS5UZTtMai5wcm90b3R5cGUuc2V0VGV4dD1Mai5wcm90b3R5cGUuVWU7cihcIm9sLkF0dHJpYnV0aW9uXCIsZWMpO3IoXCJvbC5HZW9sb2NhdGlvblwiLFdtKTtXbS5wcm90b3R5cGUub249V20ucHJvdG90eXBlLnU7V20ucHJvdG90eXBlLnVuPVdtLnByb3RvdHlwZS5mYTtXbS5wcm90b3R5cGUuZ2V0QWNjdXJhY3k9V20ucHJvdG90eXBlLlNmO1dtLnByb3RvdHlwZS5nZXRIZWFkaW5nPVdtLnByb3RvdHlwZS5YZjtXbS5wcm90b3R5cGUuZ2V0UG9zaXRpb249V20ucHJvdG90eXBlLldnO1dtLnByb3RvdHlwZS5nZXRTcGVlZD1XbS5wcm90b3R5cGUuYmc7V20ucHJvdG90eXBlLmdldFRyYWNraW5nPVdtLnByb3RvdHlwZS5XZDtcbldtLnByb3RvdHlwZS5zZXRUcmFja2luZz1XbS5wcm90b3R5cGUubWM7cihcIm9sLk92ZXJsYXlcIixmaCk7ZmgucHJvdG90eXBlLnNldFBvc2l0aW9uPWZoLnByb3RvdHlwZS5kZTtyKFwib2wuY29udHJvbC5BdHRyaWJ1dGlvblwiLFJjKTtSYy5wcm90b3R5cGUuc2V0Q29sbGFwc2VkPVJjLnByb3RvdHlwZS4kO1JjLnByb3RvdHlwZS5zZXRDb2xsYXBzaWJsZT1SYy5wcm90b3R5cGUuY2E7cihcIm9sLmNvbnRyb2wuWm9vbVwiLGJkKTtyKFwib2wuY29udHJvbC5Sb3RhdGVcIixYYyk7cihcIm9sLmNvbnRyb2wuU2NhbGVMaW5lXCIscGgpO3IoXCJvbC5jb250cm9sLmRlZmF1bHRzXCIsZGQpO3IoXCJvbC5pbnRlcmFjdGlvbi5EcmF3XCIsY28pO1xucihcIm9sLmludGVyYWN0aW9uLkRyYXcuY3JlYXRlQm94XCIsZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oYSxiKXt2YXIgYz1LYShhKSxkPWJ8fG5ldyBCKG51bGwpO2QuWShbW1tjWzBdLGNbMV1dLFtjWzJdLGNbMV1dLFtjWzJdLGNbM11dLCRhKGMpLFtjWzBdLGNbMV1dXV0pO3JldHVybiBkfX0pO2NvLnByb3RvdHlwZS5vbj1jby5wcm90b3R5cGUudTtjby5wcm90b3R5cGUuc2V0QWN0aXZlPWNvLnByb3RvdHlwZS5ZYTtjby5wcm90b3R5cGUudW49Y28ucHJvdG90eXBlLmZhO3IoXCJvbC5pbnRlcmFjdGlvbi5Nb2RpZnlcIix2byk7dm8ucHJvdG90eXBlLm9uPXZvLnByb3RvdHlwZS51O3ZvLnByb3RvdHlwZS5zZXRBY3RpdmU9dm8ucHJvdG90eXBlLllhO3ZvLnByb3RvdHlwZS51bj12by5wcm90b3R5cGUuZmE7cihcIm9sLmludGVyYWN0aW9uLlNlbGVjdFwiLExvKTtMby5wcm90b3R5cGUub249TG8ucHJvdG90eXBlLnU7TG8ucHJvdG90eXBlLnNldEFjdGl2ZT1Mby5wcm90b3R5cGUuWWE7XG5Mby5wcm90b3R5cGUudW49TG8ucHJvdG90eXBlLmZhO0xvLnByb3RvdHlwZS5nZXRGZWF0dXJlcz1Mby5wcm90b3R5cGUuRztyKFwib2wuaW50ZXJhY3Rpb24uU25hcFwiLFFvKTtRby5wcm90b3R5cGUuc2V0QWN0aXZlPVFvLnByb3RvdHlwZS5ZYTtyKFwib2wuc291cmNlLlNvdXJjZVwiLFVuKTtVbi5wcm90b3R5cGUub249VW4ucHJvdG90eXBlLnU7TG8ucHJvdG90eXBlLm9uPUxvLnByb3RvdHlwZS51O1VuLnByb3RvdHlwZS5vbmNlPVVuLnByb3RvdHlwZS5vbmNlO3IoXCJvbC5zb3VyY2UuT1NNXCIsc3ApO3IoXCJvbC5zb3VyY2UuVGlsZVwiLGZwKTtyKFwib2wuc291cmNlLlRpbGVBcmNHSVNSZXN0XCIsdXApO3IoXCJvbC5zb3VyY2UuVGlsZVdNU1wiLHZwKTt2cC5wcm90b3R5cGUuZ2V0R2V0RmVhdHVyZUluZm9Vcmw9dnAucHJvdG90eXBlLldmO3IoXCJvbC5zb3VyY2UuVmVjdG9yXCIsV24pO1duLnByb3RvdHlwZS5hZGRGZWF0dXJlPVduLnByb3RvdHlwZS5QYTtcblduLnByb3RvdHlwZS5hZGRGZWF0dXJlcz1Xbi5wcm90b3R5cGUudWI7V24ucHJvdG90eXBlLmdldEZlYXR1cmVCeUlkPVduLnByb3RvdHlwZS5VZjtXbi5wcm90b3R5cGUuZ2V0RmVhdHVyZXM9V24ucHJvdG90eXBlLmJkO1duLnByb3RvdHlwZS5nZXRGb3JtYXQ9V24ucHJvdG90eXBlLkVoO1duLnByb3RvdHlwZS5yZW1vdmVGZWF0dXJlPVduLnByb3RvdHlwZS5KYTtyKFwib2wuc291cmNlLldNVFNcIix6cCk7cihcIm9sLnNvdXJjZS5YWVpcIixucCk7cihcIm9sLnNvdXJjZS5DbHVzdGVyXCIsb3ApO25nLnByb3RvdHlwZS5nZXRTb3VyY2U9bmcucHJvdG90eXBlLmRhO25nLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzPW5nLnByb3RvdHlwZS5GYTtuZy5wcm90b3R5cGUuc2V0U291cmNlPW5nLnByb3RvdHlwZS5TZTtuZy5wcm90b3R5cGUudW49bmcucHJvdG90eXBlLmZhO2pnLnByb3RvdHlwZS5nZXRWaXNpYmxlPWpnLnByb3RvdHlwZS5nO2pnLnByb3RvdHlwZS5zZXRWaXNpYmxlPWpnLnByb3RvdHlwZS5DO1xuamcucHJvdG90eXBlLm9uPWpnLnByb3RvdHlwZS51O2pnLnByb3RvdHlwZS5vbmNlPWpnLnByb3RvdHlwZS5vbmNlO3IoXCJvbC5sYXllci5UaWxlXCIsWm8pO3IoXCJvbC5sYXllci5WZWN0b3JcIixTbik7U24ucHJvdG90eXBlLnNldD1Tbi5wcm90b3R5cGUuc2V0O1NuLnByb3RvdHlwZS5zZXRTdHlsZT1Tbi5wcm90b3R5cGUucztyKFwib2wubGF5ZXIuR3JvdXBcIixsZyk7cihcIm9sLkZlYXR1cmVcIixJKTtJLnByb3RvdHlwZS5nZXRHZW9tZXRyeT1JLnByb3RvdHlwZS5SO0kucHJvdG90eXBlLmdldEdlb21ldHJ5TmFtZT1JLnByb3RvdHlwZS5WZjtJLnByb3RvdHlwZS5nZXRJZD1JLnByb3RvdHlwZS5VZztJLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzPUkucHJvdG90eXBlLkZhO0kucHJvdG90eXBlLmdldFN0eWxlPUkucHJvdG90eXBlLlZnO0kucHJvdG90eXBlLnNldElkPUkucHJvdG90eXBlLiRhO0kucHJvdG90eXBlLnNldFByb3BlcnRpZXM9SS5wcm90b3R5cGUub2E7XG5JLnByb3RvdHlwZS5zZXRTdHlsZT1JLnByb3RvdHlwZS5jZTtJLnByb3RvdHlwZS5zZXRHZW9tZXRyeT1JLnByb3RvdHlwZS54YTtJLnByb3RvdHlwZS5zZXRHZW9tZXRyeU5hbWU9SS5wcm90b3R5cGUucGI7SS5wcm90b3R5cGUub249SS5wcm90b3R5cGUudTtJLnByb3RvdHlwZS51bnNldD1JLnByb3RvdHlwZS52aTtyKFwib2wuQ29sbGVjdGlvblwiLEFjKTtBYy5wcm90b3R5cGUuZ2V0QXJyYXk9QWMucHJvdG90eXBlLlRmO0FjLnByb3RvdHlwZS5nZXRMZW5ndGg9QWMucHJvdG90eXBlLldhO0FjLnByb3RvdHlwZS5pdGVtPUFjLnByb3RvdHlwZS5iZTtBYy5wcm90b3R5cGUub249QWMucHJvdG90eXBlLnU7cihcIm9sLmZvcm1hdC5Fc3JpSlNPTlwiLGxpKTtsaS5wcm90b3R5cGUucmVhZEZlYXR1cmVzPWxpLnByb3RvdHlwZS5SYTtsaS5wcm90b3R5cGUud3JpdGVGZWF0dXJlPWxpLnByb3RvdHlwZS51ZDtyKFwib2wuZm9ybWF0Lkdlb0pTT05cIix1aSk7XG51aS5wcm90b3R5cGUucmVhZEZlYXR1cmU9dWkucHJvdG90eXBlLmVjO3VpLnByb3RvdHlwZS5yZWFkRmVhdHVyZXM9dWkucHJvdG90eXBlLlJhO3VpLnByb3RvdHlwZS53cml0ZUZlYXR1cmVPYmplY3Q9dWkucHJvdG90eXBlLnNiO3VpLnByb3RvdHlwZS53cml0ZUZlYXR1cmVzT2JqZWN0PXVpLnByb3RvdHlwZS52ZDtyKFwib2wuZm9ybWF0LlRvcG9KU09OXCIsSWwpO0lsLnByb3RvdHlwZS5yZWFkRmVhdHVyZXM9SWwucHJvdG90eXBlLlJhO3IoXCJvbC5mb3JtYXQuV0tUXCIsWGwpO1hsLnByb3RvdHlwZS5yZWFkRmVhdHVyZT1YbC5wcm90b3R5cGUuZWM7WGwucHJvdG90eXBlLnJlYWRGZWF0dXJlcz1YbC5wcm90b3R5cGUuUmE7cihcIm9sLmZvcm1hdC5XRlNcIixPbCk7T2wucHJvdG90eXBlLnJlYWRGZWF0dXJlcz1PbC5wcm90b3R5cGUuUmE7T2wucHJvdG90eXBlLnJlYWRUcmFuc2FjdGlvblJlc3BvbnNlPU9sLnByb3RvdHlwZS5nO09sLnByb3RvdHlwZS53cml0ZVRyYW5zYWN0aW9uPU9sLnByb3RvdHlwZS5pO1xucihcIm9sLmdlb20uQ2lyY2xlXCIsWG0pO1htLnByb3RvdHlwZS5jbG9uZT1YbS5wcm90b3R5cGUuY2xvbmU7WG0ucHJvdG90eXBlLmdldENlbnRlcj1YbS5wcm90b3R5cGUuaGE7WG0ucHJvdG90eXBlLmdldFJhZGl1cz1YbS5wcm90b3R5cGUuWmM7WG0ucHJvdG90eXBlLmdldFR5cGU9WG0ucHJvdG90eXBlLkg7cihcIm9sLmdlb20uR2VvbWV0cnlcIixyZSk7cmUucHJvdG90eXBlLmdldEV4dGVudD1yZS5wcm90b3R5cGUuSjtyZS5wcm90b3R5cGUub249cmUucHJvdG90eXBlLnU7cmUucHJvdG90eXBlLnRyYW5zZm9ybT1yZS5wcm90b3R5cGUuQztyKFwib2wuZ2VvbS5HZW9tZXRyeUNvbGxlY3Rpb25cIixxaSk7cWkucHJvdG90eXBlLmdldFR5cGU9cWkucHJvdG90eXBlLkg7cihcIm9sLmdlb20uTGluZVN0cmluZ1wiLFMpO1MucHJvdG90eXBlLmFwcGVuZENvb3JkaW5hdGU9Uy5wcm90b3R5cGUuTGY7Uy5wcm90b3R5cGUuY2xvbmU9Uy5wcm90b3R5cGUuY2xvbmU7XG5TLnByb3RvdHlwZS5nZXRDb29yZGluYXRlQXQ9Uy5wcm90b3R5cGUuUmQ7Uy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUF0TT1TLnByb3RvdHlwZS51ZTtTLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcz1TLnByb3RvdHlwZS5EO1MucHJvdG90eXBlLmdldEZpcnN0Q29vcmRpbmF0ZT1TLnByb3RvdHlwZS5FYjtTLnByb3RvdHlwZS5nZXRMYXN0Q29vcmRpbmF0ZT1TLnByb3RvdHlwZS4kZjtTLnByb3RvdHlwZS5nZXRMZW5ndGg9Uy5wcm90b3R5cGUubWg7Uy5wcm90b3R5cGUuZ2V0VHlwZT1TLnByb3RvdHlwZS5IO1MucHJvdG90eXBlLnNldENvb3JkaW5hdGVzPVMucHJvdG90eXBlLlk7S2UucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPUtlLnByb3RvdHlwZS5EO3IoXCJvbC5nZW9tLk11bHRpTGluZVN0cmluZ1wiLGNpKTtjaS5wcm90b3R5cGUuY2xvbmU9Y2kucHJvdG90eXBlLmNsb25lO1MucHJvdG90eXBlLmdldENvb3JkaW5hdGVBdE09Uy5wcm90b3R5cGUudWU7XG5jaS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9Y2kucHJvdG90eXBlLkQ7Y2kucHJvdG90eXBlLmdldEZpcnN0Q29vcmRpbmF0ZT1jaS5wcm90b3R5cGUuRWI7Y2kucHJvdG90eXBlLmdldExpbmVTdHJpbmdzPWNpLnByb3RvdHlwZS5oYjtjaS5wcm90b3R5cGUuZ2V0VHlwZT1jaS5wcm90b3R5cGUuSDtjaS5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXM9Y2kucHJvdG90eXBlLlk7cihcIm9sLmdlb20uTXVsdGlQb2ludFwiLGZpKTtmaS5wcm90b3R5cGUuY2xvbmU9ZmkucHJvdG90eXBlLmNsb25lO2ZpLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcz1maS5wcm90b3R5cGUuRDtmaS5wcm90b3R5cGUuZ2V0Rmlyc3RDb29yZGluYXRlPWZpLnByb3RvdHlwZS5FYjtmaS5wcm90b3R5cGUuZ2V0VHlwZT1maS5wcm90b3R5cGUuSDtmaS5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXM9ZmkucHJvdG90eXBlLlk7cihcIm9sLmdlb20uTXVsdGlQb2x5Z29uXCIsaGkpO2hpLnByb3RvdHlwZS5jbG9uZT1oaS5wcm90b3R5cGUuY2xvbmU7XG5oaS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9aGkucHJvdG90eXBlLkQ7aGkucHJvdG90eXBlLmdldEFyZWE9aGkucHJvdG90eXBlLm5oO2hpLnByb3RvdHlwZS5nZXRGaXJzdENvb3JkaW5hdGU9aGkucHJvdG90eXBlLkViO2hpLnByb3RvdHlwZS5nZXRJbnRlcmlvclBvaW50cz1oaS5wcm90b3R5cGUuWmY7aGkucHJvdG90eXBlLmdldFR5cGU9aGkucHJvdG90eXBlLkg7aGkucHJvdG90eXBlLnNldENvb3JkaW5hdGVzPWhpLnByb3RvdHlwZS5ZO3IoXCJvbC5nZW9tLlBvaW50XCIsTWUpO01lLnByb3RvdHlwZS5jbG9uZT1NZS5wcm90b3R5cGUuY2xvbmU7TWUucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPU1lLnByb3RvdHlwZS5EO01lLnByb3RvdHlwZS5nZXRUeXBlPU1lLnByb3RvdHlwZS5IO01lLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcz1NZS5wcm90b3R5cGUuWTtyKFwib2wuZ2VvbS5Qb2x5Z29uXCIsQik7Qi5wcm90b3R5cGUuY2xvbmU9Qi5wcm90b3R5cGUuY2xvbmU7XG5CLnByb3RvdHlwZS5nZXRBcmVhPUIucHJvdG90eXBlLm9oO0IucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPUIucHJvdG90eXBlLkQ7Qi5wcm90b3R5cGUuZ2V0Rmlyc3RDb29yZGluYXRlPUIucHJvdG90eXBlLkViO0IucHJvdG90eXBlLmdldEludGVyaW9yUG9pbnQ9Qi5wcm90b3R5cGUuWWY7Qi5wcm90b3R5cGUuZ2V0TGluZWFyUmluZz1CLnByb3RvdHlwZS5WZDtCLnByb3RvdHlwZS5nZXRUeXBlPUIucHJvdG90eXBlLkg7Qi5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXM9Qi5wcm90b3R5cGUuWTtyKFwib2wuU3BoZXJlXCIsZmIpO2ZiLnByb3RvdHlwZS5nZW9kZXNpY0FyZWE9ZmIucHJvdG90eXBlLmY7ZmIucHJvdG90eXBlLmhhdmVyc2luZURpc3RhbmNlPWZiLnByb3RvdHlwZS5iO3IoXCJvbC5sb2FkaW5nc3RyYXRlZ3kuYWxsXCIsVG4pO3IoXCJvbC5sb2FkaW5nc3RyYXRlZ3kuYmJveFwiLGZ1bmN0aW9uKGEpe3JldHVyblthXX0pO1xucihcIm9sLmxvYWRpbmdzdHJhdGVneS50aWxlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9WmIoYSxjKSxlPVZiKGEsYixkKSxmPVtdLGQ9W2QsMCwwXTtmb3IoZFsxXT1lLk07ZFsxXTw9ZS5POysrZFsxXSlmb3IoZFsyXT1lLlA7ZFsyXTw9ZS5TOysrZFsyXSlmLnB1c2goWWIoYSxkKSk7cmV0dXJuIGZ9fSk7XG4gIHJldHVybiBPUEVOTEFZRVJTLm9sO1xufSkpO1xuXG4iLCJ2YXIgbWdycyA9IHJlcXVpcmUoJ21ncnMnKTtcblxuZnVuY3Rpb24gUG9pbnQoeCwgeSwgeikge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUG9pbnQpKSB7XG4gICAgcmV0dXJuIG5ldyBQb2ludCh4LCB5LCB6KTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheSh4KSkge1xuICAgIHRoaXMueCA9IHhbMF07XG4gICAgdGhpcy55ID0geFsxXTtcbiAgICB0aGlzLnogPSB4WzJdIHx8IDAuMDtcbiAgfWVsc2UgaWYodHlwZW9mIHggPT09ICdvYmplY3QnKXtcbiAgICB0aGlzLnggPSB4Lng7XG4gICAgdGhpcy55ID0geC55O1xuICAgIHRoaXMueiA9IHgueiB8fCAwLjA7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHggPT09ICdzdHJpbmcnICYmIHR5cGVvZiB5ID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBjb29yZHMgPSB4LnNwbGl0KCcsJyk7XG4gICAgdGhpcy54ID0gcGFyc2VGbG9hdChjb29yZHNbMF0sIDEwKTtcbiAgICB0aGlzLnkgPSBwYXJzZUZsb2F0KGNvb3Jkc1sxXSwgMTApO1xuICAgIHRoaXMueiA9IHBhcnNlRmxvYXQoY29vcmRzWzJdLCAxMCkgfHwgMC4wO1xuICB9XG4gIGVsc2Uge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6IHx8IDAuMDtcbiAgfVxuICBjb25zb2xlLndhcm4oJ3Byb2o0LlBvaW50IHdpbGwgYmUgcmVtb3ZlZCBpbiB2ZXJzaW9uIDMsIHVzZSBwcm9qNC50b1BvaW50Jyk7XG59XG5cblBvaW50LmZyb21NR1JTID0gZnVuY3Rpb24obWdyc1N0cikge1xuICByZXR1cm4gbmV3IFBvaW50KG1ncnMudG9Qb2ludChtZ3JzU3RyKSk7XG59O1xuUG9pbnQucHJvdG90eXBlLnRvTUdSUyA9IGZ1bmN0aW9uKGFjY3VyYWN5KSB7XG4gIHJldHVybiBtZ3JzLmZvcndhcmQoW3RoaXMueCwgdGhpcy55XSwgYWNjdXJhY3kpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gUG9pbnQ7IiwidmFyIHBhcnNlQ29kZSA9IHJlcXVpcmUoXCIuL3BhcnNlQ29kZVwiKTtcbnZhciBleHRlbmQgPSByZXF1aXJlKCcuL2V4dGVuZCcpO1xudmFyIHByb2plY3Rpb25zID0gcmVxdWlyZSgnLi9wcm9qZWN0aW9ucycpO1xudmFyIGRlcml2ZUNvbnN0YW50cyA9IHJlcXVpcmUoJy4vZGVyaXZlQ29uc3RhbnRzJyk7XG5cbmZ1bmN0aW9uIFByb2plY3Rpb24oc3JzQ29kZSxjYWxsYmFjaykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUHJvamVjdGlvbikpIHtcbiAgICByZXR1cm4gbmV3IFByb2plY3Rpb24oc3JzQ29kZSk7XG4gIH1cbiAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihlcnJvcil7XG4gICAgaWYoZXJyb3Ipe1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9O1xuICB2YXIganNvbiA9IHBhcnNlQ29kZShzcnNDb2RlKTtcbiAgaWYodHlwZW9mIGpzb24gIT09ICdvYmplY3QnKXtcbiAgICBjYWxsYmFjayhzcnNDb2RlKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1vZGlmaWVkSlNPTiA9IGRlcml2ZUNvbnN0YW50cyhqc29uKTtcbiAgdmFyIG91clByb2ogPSBQcm9qZWN0aW9uLnByb2plY3Rpb25zLmdldChtb2RpZmllZEpTT04ucHJvak5hbWUpO1xuICBpZihvdXJQcm9qKXtcbiAgICBleHRlbmQodGhpcywgbW9kaWZpZWRKU09OKTtcbiAgICBleHRlbmQodGhpcywgb3VyUHJvaik7XG4gICAgdGhpcy5pbml0KCk7XG4gICAgY2FsbGJhY2sobnVsbCwgdGhpcyk7XG4gIH1lbHNle1xuICAgIGNhbGxiYWNrKHNyc0NvZGUpO1xuICB9XG59XG5Qcm9qZWN0aW9uLnByb2plY3Rpb25zID0gcHJvamVjdGlvbnM7XG5Qcm9qZWN0aW9uLnByb2plY3Rpb25zLnN0YXJ0KCk7XG5tb2R1bGUuZXhwb3J0cyA9IFByb2plY3Rpb247XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNycywgZGVub3JtLCBwb2ludCkge1xuICB2YXIgeGluID0gcG9pbnQueCxcbiAgICB5aW4gPSBwb2ludC55LFxuICAgIHppbiA9IHBvaW50LnogfHwgMC4wO1xuICB2YXIgdiwgdCwgaTtcbiAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykge1xuICAgIGlmIChkZW5vcm0gJiYgaSA9PT0gMiAmJiBwb2ludC56ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgdiA9IHhpbjtcbiAgICAgIHQgPSAneCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGkgPT09IDEpIHtcbiAgICAgIHYgPSB5aW47XG4gICAgICB0ID0gJ3knO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHYgPSB6aW47XG4gICAgICB0ID0gJ3onO1xuICAgIH1cbiAgICBzd2l0Y2ggKGNycy5heGlzW2ldKSB7XG4gICAgY2FzZSAnZSc6XG4gICAgICBwb2ludFt0XSA9IHY7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd3JzpcbiAgICAgIHBvaW50W3RdID0gLXY7XG4gICAgICBicmVhaztcbiAgICBjYXNlICduJzpcbiAgICAgIHBvaW50W3RdID0gdjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3MnOlxuICAgICAgcG9pbnRbdF0gPSAtdjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3UnOlxuICAgICAgaWYgKHBvaW50W3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcG9pbnQueiA9IHY7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlICdkJzpcbiAgICAgIGlmIChwb2ludFt0XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBvaW50LnogPSAtdjtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICAvL2NvbnNvbGUubG9nKFwiRVJST1I6IHVua25vdyBheGlzIChcIitjcnMuYXhpc1tpXStcIikgLSBjaGVjayBkZWZpbml0aW9uIG9mIFwiK2Nycy5wcm9qTmFtZSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBvaW50O1xufTtcbiIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIHNpZ24gPSByZXF1aXJlKCcuL3NpZ24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiAoTWF0aC5hYnMoeCkgPCBIQUxGX1BJKSA/IHggOiAoeCAtIChzaWduKHgpICogTWF0aC5QSSkpO1xufTsiLCJ2YXIgVFdPX1BJID0gTWF0aC5QSSAqIDI7XG4vLyBTUEkgaXMgc2xpZ2h0bHkgZ3JlYXRlciB0aGFuIE1hdGguUEksIHNvIHZhbHVlcyB0aGF0IGV4Y2VlZCB0aGUgLTE4MC4uMTgwXG4vLyBkZWdyZWUgcmFuZ2UgYnkgYSB0aW55IGFtb3VudCBkb24ndCBnZXQgd3JhcHBlZC4gVGhpcyBwcmV2ZW50cyBwb2ludHMgdGhhdFxuLy8gaGF2ZSBkcmlmdGVkIGZyb20gdGhlaXIgb3JpZ2luYWwgbG9jYXRpb24gYWxvbmcgdGhlIDE4MHRoIG1lcmlkaWFuIChkdWUgdG9cbi8vIGZsb2F0aW5nIHBvaW50IGVycm9yKSBmcm9tIGNoYW5naW5nIHRoZWlyIHNpZ24uXG52YXIgU1BJID0gMy4xNDE1OTI2NTM1OTtcbnZhciBzaWduID0gcmVxdWlyZSgnLi9zaWduJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oeCkge1xuICByZXR1cm4gKE1hdGguYWJzKHgpIDw9IFNQSSkgPyB4IDogKHggLSAoc2lnbih4KSAqIFRXT19QSSkpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHgpIHtcbiAgaWYgKE1hdGguYWJzKHgpID4gMSkge1xuICAgIHggPSAoeCA+IDEpID8gMSA6IC0xO1xuICB9XG4gIHJldHVybiBNYXRoLmFzaW4oeCk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oeCkge1xuICByZXR1cm4gKDEgLSAwLjI1ICogeCAqICgxICsgeCAvIDE2ICogKDMgKyAxLjI1ICogeCkpKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiAoMC4zNzUgKiB4ICogKDEgKyAwLjI1ICogeCAqICgxICsgMC40Njg3NSAqIHgpKSk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oeCkge1xuICByZXR1cm4gKDAuMDU4NTkzNzUgKiB4ICogeCAqICgxICsgMC43NSAqIHgpKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiAoeCAqIHggKiB4ICogKDM1IC8gMzA3MikpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGEsIGUsIHNpbnBoaSkge1xuICB2YXIgdGVtcCA9IGUgKiBzaW5waGk7XG4gIHJldHVybiBhIC8gTWF0aC5zcXJ0KDEgLSB0ZW1wICogdGVtcCk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obWwsIGUwLCBlMSwgZTIsIGUzKSB7XG4gIHZhciBwaGk7XG4gIHZhciBkcGhpO1xuXG4gIHBoaSA9IG1sIC8gZTA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgMTU7IGkrKykge1xuICAgIGRwaGkgPSAobWwgLSAoZTAgKiBwaGkgLSBlMSAqIE1hdGguc2luKDIgKiBwaGkpICsgZTIgKiBNYXRoLnNpbig0ICogcGhpKSAtIGUzICogTWF0aC5zaW4oNiAqIHBoaSkpKSAvIChlMCAtIDIgKiBlMSAqIE1hdGguY29zKDIgKiBwaGkpICsgNCAqIGUyICogTWF0aC5jb3MoNCAqIHBoaSkgLSA2ICogZTMgKiBNYXRoLmNvcyg2ICogcGhpKSk7XG4gICAgcGhpICs9IGRwaGk7XG4gICAgaWYgKE1hdGguYWJzKGRwaGkpIDw9IDAuMDAwMDAwMDAwMSkge1xuICAgICAgcmV0dXJuIHBoaTtcbiAgICB9XG4gIH1cblxuICAvLy4ucmVwb3J0RXJyb3IoXCJJTUxGTi1DT05WOkxhdGl0dWRlIGZhaWxlZCB0byBjb252ZXJnZSBhZnRlciAxNSBpdGVyYXRpb25zXCIpO1xuICByZXR1cm4gTmFOO1xufTsiLCJ2YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlY2NlbnQsIHEpIHtcbiAgdmFyIHRlbXAgPSAxIC0gKDEgLSBlY2NlbnQgKiBlY2NlbnQpIC8gKDIgKiBlY2NlbnQpICogTWF0aC5sb2coKDEgLSBlY2NlbnQpIC8gKDEgKyBlY2NlbnQpKTtcbiAgaWYgKE1hdGguYWJzKE1hdGguYWJzKHEpIC0gdGVtcCkgPCAxLjBFLTYpIHtcbiAgICBpZiAocSA8IDApIHtcbiAgICAgIHJldHVybiAoLTEgKiBIQUxGX1BJKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gSEFMRl9QSTtcbiAgICB9XG4gIH1cbiAgLy92YXIgcGhpID0gMC41KiBxLygxLWVjY2VudCplY2NlbnQpO1xuICB2YXIgcGhpID0gTWF0aC5hc2luKDAuNSAqIHEpO1xuICB2YXIgZHBoaTtcbiAgdmFyIHNpbl9waGk7XG4gIHZhciBjb3NfcGhpO1xuICB2YXIgY29uO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IDMwOyBpKyspIHtcbiAgICBzaW5fcGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICBjb3NfcGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICBjb24gPSBlY2NlbnQgKiBzaW5fcGhpO1xuICAgIGRwaGkgPSBNYXRoLnBvdygxIC0gY29uICogY29uLCAyKSAvICgyICogY29zX3BoaSkgKiAocSAvICgxIC0gZWNjZW50ICogZWNjZW50KSAtIHNpbl9waGkgLyAoMSAtIGNvbiAqIGNvbikgKyAwLjUgLyBlY2NlbnQgKiBNYXRoLmxvZygoMSAtIGNvbikgLyAoMSArIGNvbikpKTtcbiAgICBwaGkgKz0gZHBoaTtcbiAgICBpZiAoTWF0aC5hYnMoZHBoaSkgPD0gMC4wMDAwMDAwMDAxKSB7XG4gICAgICByZXR1cm4gcGhpO1xuICAgIH1cbiAgfVxuXG4gIC8vY29uc29sZS5sb2coXCJJUVNGTi1DT05WOkxhdGl0dWRlIGZhaWxlZCB0byBjb252ZXJnZSBhZnRlciAzMCBpdGVyYXRpb25zXCIpO1xuICByZXR1cm4gTmFOO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUwLCBlMSwgZTIsIGUzLCBwaGkpIHtcbiAgcmV0dXJuIChlMCAqIHBoaSAtIGUxICogTWF0aC5zaW4oMiAqIHBoaSkgKyBlMiAqIE1hdGguc2luKDQgKiBwaGkpIC0gZTMgKiBNYXRoLnNpbig2ICogcGhpKSk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZWNjZW50LCBzaW5waGksIGNvc3BoaSkge1xuICB2YXIgY29uID0gZWNjZW50ICogc2lucGhpO1xuICByZXR1cm4gY29zcGhpIC8gKE1hdGguc3FydCgxIC0gY29uICogY29uKSk7XG59OyIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlY2NlbnQsIHRzKSB7XG4gIHZhciBlY2NudGggPSAwLjUgKiBlY2NlbnQ7XG4gIHZhciBjb24sIGRwaGk7XG4gIHZhciBwaGkgPSBIQUxGX1BJIC0gMiAqIE1hdGguYXRhbih0cyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDw9IDE1OyBpKyspIHtcbiAgICBjb24gPSBlY2NlbnQgKiBNYXRoLnNpbihwaGkpO1xuICAgIGRwaGkgPSBIQUxGX1BJIC0gMiAqIE1hdGguYXRhbih0cyAqIChNYXRoLnBvdygoKDEgLSBjb24pIC8gKDEgKyBjb24pKSwgZWNjbnRoKSkpIC0gcGhpO1xuICAgIHBoaSArPSBkcGhpO1xuICAgIGlmIChNYXRoLmFicyhkcGhpKSA8PSAwLjAwMDAwMDAwMDEpIHtcbiAgICAgIHJldHVybiBwaGk7XG4gICAgfVxuICB9XG4gIC8vY29uc29sZS5sb2coXCJwaGkyeiBoYXMgTm9Db252ZXJnZW5jZVwiKTtcbiAgcmV0dXJuIC05OTk5O1xufTsiLCJ2YXIgQzAwID0gMTtcbnZhciBDMDIgPSAwLjI1O1xudmFyIEMwNCA9IDAuMDQ2ODc1O1xudmFyIEMwNiA9IDAuMDE5NTMxMjU7XG52YXIgQzA4ID0gMC4wMTA2ODExNTIzNDM3NTtcbnZhciBDMjIgPSAwLjc1O1xudmFyIEM0NCA9IDAuNDY4NzU7XG52YXIgQzQ2ID0gMC4wMTMwMjA4MzMzMzMzMzMzMzMzMztcbnZhciBDNDggPSAwLjAwNzEyMDc2ODIyOTE2NjY2NjY2O1xudmFyIEM2NiA9IDAuMzY0NTgzMzMzMzMzMzMzMzMzMzM7XG52YXIgQzY4ID0gMC4wMDU2OTY2MTQ1ODMzMzMzMzMzMztcbnZhciBDODggPSAwLjMwNzYxNzE4NzU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXMpIHtcbiAgdmFyIGVuID0gW107XG4gIGVuWzBdID0gQzAwIC0gZXMgKiAoQzAyICsgZXMgKiAoQzA0ICsgZXMgKiAoQzA2ICsgZXMgKiBDMDgpKSk7XG4gIGVuWzFdID0gZXMgKiAoQzIyIC0gZXMgKiAoQzA0ICsgZXMgKiAoQzA2ICsgZXMgKiBDMDgpKSk7XG4gIHZhciB0ID0gZXMgKiBlcztcbiAgZW5bMl0gPSB0ICogKEM0NCAtIGVzICogKEM0NiArIGVzICogQzQ4KSk7XG4gIHQgKj0gZXM7XG4gIGVuWzNdID0gdCAqIChDNjYgLSBlcyAqIEM2OCk7XG4gIGVuWzRdID0gdCAqIGVzICogQzg4O1xuICByZXR1cm4gZW47XG59OyIsInZhciBwal9tbGZuID0gcmVxdWlyZShcIi4vcGpfbWxmblwiKTtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG52YXIgTUFYX0lURVIgPSAyMDtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXJnLCBlcywgZW4pIHtcbiAgdmFyIGsgPSAxIC8gKDEgLSBlcyk7XG4gIHZhciBwaGkgPSBhcmc7XG4gIGZvciAodmFyIGkgPSBNQVhfSVRFUjsgaTsgLS1pKSB7IC8qIHJhcmVseSBnb2VzIG92ZXIgMiBpdGVyYXRpb25zICovXG4gICAgdmFyIHMgPSBNYXRoLnNpbihwaGkpO1xuICAgIHZhciB0ID0gMSAtIGVzICogcyAqIHM7XG4gICAgLy90ID0gdGhpcy5wal9tbGZuKHBoaSwgcywgTWF0aC5jb3MocGhpKSwgZW4pIC0gYXJnO1xuICAgIC8vcGhpIC09IHQgKiAodCAqIE1hdGguc3FydCh0KSkgKiBrO1xuICAgIHQgPSAocGpfbWxmbihwaGksIHMsIE1hdGguY29zKHBoaSksIGVuKSAtIGFyZykgKiAodCAqIE1hdGguc3FydCh0KSkgKiBrO1xuICAgIHBoaSAtPSB0O1xuICAgIGlmIChNYXRoLmFicyh0KSA8IEVQU0xOKSB7XG4gICAgICByZXR1cm4gcGhpO1xuICAgIH1cbiAgfVxuICAvLy4ucmVwb3J0RXJyb3IoXCJjYXNzOnBqX2ludl9tbGZuOiBDb252ZXJnZW5jZSBlcnJvclwiKTtcbiAgcmV0dXJuIHBoaTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwaGksIHNwaGksIGNwaGksIGVuKSB7XG4gIGNwaGkgKj0gc3BoaTtcbiAgc3BoaSAqPSBzcGhpO1xuICByZXR1cm4gKGVuWzBdICogcGhpIC0gY3BoaSAqIChlblsxXSArIHNwaGkgKiAoZW5bMl0gKyBzcGhpICogKGVuWzNdICsgc3BoaSAqIGVuWzRdKSkpKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlY2NlbnQsIHNpbnBoaSkge1xuICB2YXIgY29uO1xuICBpZiAoZWNjZW50ID4gMS4wZS03KSB7XG4gICAgY29uID0gZWNjZW50ICogc2lucGhpO1xuICAgIHJldHVybiAoKDEgLSBlY2NlbnQgKiBlY2NlbnQpICogKHNpbnBoaSAvICgxIC0gY29uICogY29uKSAtICgwLjUgLyBlY2NlbnQpICogTWF0aC5sb2coKDEgLSBjb24pIC8gKDEgKyBjb24pKSkpO1xuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiAoMiAqIHNpbnBoaSk7XG4gIH1cbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiB4PDAgPyAtMSA6IDE7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXNpbnAsIGV4cCkge1xuICByZXR1cm4gKE1hdGgucG93KCgxIC0gZXNpbnApIC8gKDEgKyBlc2lucCksIGV4cCkpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnJheSl7XG4gIHZhciBvdXQgPSB7XG4gICAgeDogYXJyYXlbMF0sXG4gICAgeTogYXJyYXlbMV1cbiAgfTtcbiAgaWYgKGFycmF5Lmxlbmd0aD4yKSB7XG4gICAgb3V0LnogPSBhcnJheVsyXTtcbiAgfVxuICBpZiAoYXJyYXkubGVuZ3RoPjMpIHtcbiAgICBvdXQubSA9IGFycmF5WzNdO1xuICB9XG4gIHJldHVybiBvdXQ7XG59OyIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGVjY2VudCwgcGhpLCBzaW5waGkpIHtcbiAgdmFyIGNvbiA9IGVjY2VudCAqIHNpbnBoaTtcbiAgdmFyIGNvbSA9IDAuNSAqIGVjY2VudDtcbiAgY29uID0gTWF0aC5wb3coKCgxIC0gY29uKSAvICgxICsgY29uKSksIGNvbSk7XG4gIHJldHVybiAoTWF0aC50YW4oMC41ICogKEhBTEZfUEkgLSBwaGkpKSAvIGNvbik7XG59OyIsImV4cG9ydHMud2dzODQgPSB7XG4gIHRvd2dzODQ6IFwiMCwwLDBcIixcbiAgZWxsaXBzZTogXCJXR1M4NFwiLFxuICBkYXR1bU5hbWU6IFwiV0dTODRcIlxufTtcbmV4cG9ydHMuY2gxOTAzID0ge1xuICB0b3dnczg0OiBcIjY3NC4zNzQsMTUuMDU2LDQwNS4zNDZcIixcbiAgZWxsaXBzZTogXCJiZXNzZWxcIixcbiAgZGF0dW1OYW1lOiBcInN3aXNzXCJcbn07XG5leHBvcnRzLmdncnM4NyA9IHtcbiAgdG93Z3M4NDogXCItMTk5Ljg3LDc0Ljc5LDI0Ni42MlwiLFxuICBlbGxpcHNlOiBcIkdSUzgwXCIsXG4gIGRhdHVtTmFtZTogXCJHcmVla19HZW9kZXRpY19SZWZlcmVuY2VfU3lzdGVtXzE5ODdcIlxufTtcbmV4cG9ydHMubmFkODMgPSB7XG4gIHRvd2dzODQ6IFwiMCwwLDBcIixcbiAgZWxsaXBzZTogXCJHUlM4MFwiLFxuICBkYXR1bU5hbWU6IFwiTm9ydGhfQW1lcmljYW5fRGF0dW1fMTk4M1wiXG59O1xuZXhwb3J0cy5uYWQyNyA9IHtcbiAgbmFkZ3JpZHM6IFwiQGNvbnVzLEBhbGFza2EsQG50djJfMC5nc2IsQG50djFfY2FuLmRhdFwiLFxuICBlbGxpcHNlOiBcImNscms2NlwiLFxuICBkYXR1bU5hbWU6IFwiTm9ydGhfQW1lcmljYW5fRGF0dW1fMTkyN1wiXG59O1xuZXhwb3J0cy5wb3RzZGFtID0ge1xuICB0b3dnczg0OiBcIjYwNi4wLDIzLjAsNDEzLjBcIixcbiAgZWxsaXBzZTogXCJiZXNzZWxcIixcbiAgZGF0dW1OYW1lOiBcIlBvdHNkYW0gUmF1ZW5iZXJnIDE5NTAgREhETlwiXG59O1xuZXhwb3J0cy5jYXJ0aGFnZSA9IHtcbiAgdG93Z3M4NDogXCItMjYzLjAsNi4wLDQzMS4wXCIsXG4gIGVsbGlwc2U6IFwiY2xhcms4MFwiLFxuICBkYXR1bU5hbWU6IFwiQ2FydGhhZ2UgMTkzNCBUdW5pc2lhXCJcbn07XG5leHBvcnRzLmhlcm1hbm5za29nZWwgPSB7XG4gIHRvd2dzODQ6IFwiNjUzLjAsLTIxMi4wLDQ0OS4wXCIsXG4gIGVsbGlwc2U6IFwiYmVzc2VsXCIsXG4gIGRhdHVtTmFtZTogXCJIZXJtYW5uc2tvZ2VsXCJcbn07XG5leHBvcnRzLmlyZTY1ID0ge1xuICB0b3dnczg0OiBcIjQ4Mi41MzAsLTEzMC41OTYsNTY0LjU1NywtMS4wNDIsLTAuMjE0LC0wLjYzMSw4LjE1XCIsXG4gIGVsbGlwc2U6IFwibW9kX2FpcnlcIixcbiAgZGF0dW1OYW1lOiBcIklyZWxhbmQgMTk2NVwiXG59O1xuZXhwb3J0cy5yYXNzYWRpcmFuID0ge1xuICB0b3dnczg0OiBcIi0xMzMuNjMsLTE1Ny41LC0xNTguNjJcIixcbiAgZWxsaXBzZTogXCJpbnRsXCIsXG4gIGRhdHVtTmFtZTogXCJSYXNzYWRpcmFuXCJcbn07XG5leHBvcnRzLm56Z2Q0OSA9IHtcbiAgdG93Z3M4NDogXCI1OS40NywtNS4wNCwxODcuNDQsMC40NywtMC4xLDEuMDI0LC00LjU5OTNcIixcbiAgZWxsaXBzZTogXCJpbnRsXCIsXG4gIGRhdHVtTmFtZTogXCJOZXcgWmVhbGFuZCBHZW9kZXRpYyBEYXR1bSAxOTQ5XCJcbn07XG5leHBvcnRzLm9zZ2IzNiA9IHtcbiAgdG93Z3M4NDogXCI0NDYuNDQ4LC0xMjUuMTU3LDU0Mi4wNjAsMC4xNTAyLDAuMjQ3MCwwLjg0MjEsLTIwLjQ4OTRcIixcbiAgZWxsaXBzZTogXCJhaXJ5XCIsXG4gIGRhdHVtTmFtZTogXCJBaXJ5IDE4MzBcIlxufTtcbmV4cG9ydHMuc19qdHNrID0ge1xuICB0b3dnczg0OiBcIjU4OSw3Niw0ODBcIixcbiAgZWxsaXBzZTogJ2Jlc3NlbCcsXG4gIGRhdHVtTmFtZTogJ1MtSlRTSyAoRmVycm8pJ1xufTtcbmV4cG9ydHMuYmVkdWFyYW0gPSB7XG4gIHRvd2dzODQ6ICctMTA2LC04NywxODgnLFxuICBlbGxpcHNlOiAnY2xyazgwJyxcbiAgZGF0dW1OYW1lOiAnQmVkdWFyYW0nXG59O1xuZXhwb3J0cy5ndW51bmdfc2VnYXJhID0ge1xuICB0b3dnczg0OiAnLTQwMyw2ODQsNDEnLFxuICBlbGxpcHNlOiAnYmVzc2VsJyxcbiAgZGF0dW1OYW1lOiAnR3VudW5nIFNlZ2FyYSBKYWthcnRhJ1xufTtcbmV4cG9ydHMucm5iNzIgPSB7XG4gIHRvd2dzODQ6IFwiMTA2Ljg2OSwtNTIuMjk3OCwxMDMuNzI0LC0wLjMzNjU3LDAuNDU2OTU1LC0xLjg0MjE4LDFcIixcbiAgZWxsaXBzZTogXCJpbnRsXCIsXG4gIGRhdHVtTmFtZTogXCJSZXNlYXUgTmF0aW9uYWwgQmVsZ2UgMTk3MlwiXG59OyIsImV4cG9ydHMuTUVSSVQgPSB7XG4gIGE6IDYzNzgxMzcuMCxcbiAgcmY6IDI5OC4yNTcsXG4gIGVsbGlwc2VOYW1lOiBcIk1FUklUIDE5ODNcIlxufTtcbmV4cG9ydHMuU0dTODUgPSB7XG4gIGE6IDYzNzgxMzYuMCxcbiAgcmY6IDI5OC4yNTcsXG4gIGVsbGlwc2VOYW1lOiBcIlNvdmlldCBHZW9kZXRpYyBTeXN0ZW0gODVcIlxufTtcbmV4cG9ydHMuR1JTODAgPSB7XG4gIGE6IDYzNzgxMzcuMCxcbiAgcmY6IDI5OC4yNTcyMjIxMDEsXG4gIGVsbGlwc2VOYW1lOiBcIkdSUyAxOTgwKElVR0csIDE5ODApXCJcbn07XG5leHBvcnRzLklBVTc2ID0ge1xuICBhOiA2Mzc4MTQwLjAsXG4gIHJmOiAyOTguMjU3LFxuICBlbGxpcHNlTmFtZTogXCJJQVUgMTk3NlwiXG59O1xuZXhwb3J0cy5haXJ5ID0ge1xuICBhOiA2Mzc3NTYzLjM5NixcbiAgYjogNjM1NjI1Ni45MTAsXG4gIGVsbGlwc2VOYW1lOiBcIkFpcnkgMTgzMFwiXG59O1xuZXhwb3J0cy5BUEw0ID0ge1xuICBhOiA2Mzc4MTM3LFxuICByZjogMjk4LjI1LFxuICBlbGxpcHNlTmFtZTogXCJBcHBsLiBQaHlzaWNzLiAxOTY1XCJcbn07XG5leHBvcnRzLk5XTDlEID0ge1xuICBhOiA2Mzc4MTQ1LjAsXG4gIHJmOiAyOTguMjUsXG4gIGVsbGlwc2VOYW1lOiBcIk5hdmFsIFdlYXBvbnMgTGFiLiwgMTk2NVwiXG59O1xuZXhwb3J0cy5tb2RfYWlyeSA9IHtcbiAgYTogNjM3NzM0MC4xODksXG4gIGI6IDYzNTYwMzQuNDQ2LFxuICBlbGxpcHNlTmFtZTogXCJNb2RpZmllZCBBaXJ5XCJcbn07XG5leHBvcnRzLmFuZHJhZSA9IHtcbiAgYTogNjM3NzEwNC40MyxcbiAgcmY6IDMwMC4wLFxuICBlbGxpcHNlTmFtZTogXCJBbmRyYWUgMTg3NiAoRGVuLiwgSWNsbmQuKVwiXG59O1xuZXhwb3J0cy5hdXN0X1NBID0ge1xuICBhOiA2Mzc4MTYwLjAsXG4gIHJmOiAyOTguMjUsXG4gIGVsbGlwc2VOYW1lOiBcIkF1c3RyYWxpYW4gTmF0bCAmIFMuIEFtZXIuIDE5NjlcIlxufTtcbmV4cG9ydHMuR1JTNjcgPSB7XG4gIGE6IDYzNzgxNjAuMCxcbiAgcmY6IDI5OC4yNDcxNjc0MjcwLFxuICBlbGxpcHNlTmFtZTogXCJHUlMgNjcoSVVHRyAxOTY3KVwiXG59O1xuZXhwb3J0cy5iZXNzZWwgPSB7XG4gIGE6IDYzNzczOTcuMTU1LFxuICByZjogMjk5LjE1MjgxMjgsXG4gIGVsbGlwc2VOYW1lOiBcIkJlc3NlbCAxODQxXCJcbn07XG5leHBvcnRzLmJlc3NfbmFtID0ge1xuICBhOiA2Mzc3NDgzLjg2NSxcbiAgcmY6IDI5OS4xNTI4MTI4LFxuICBlbGxpcHNlTmFtZTogXCJCZXNzZWwgMTg0MSAoTmFtaWJpYSlcIlxufTtcbmV4cG9ydHMuY2xyazY2ID0ge1xuICBhOiA2Mzc4MjA2LjQsXG4gIGI6IDYzNTY1ODMuOCxcbiAgZWxsaXBzZU5hbWU6IFwiQ2xhcmtlIDE4NjZcIlxufTtcbmV4cG9ydHMuY2xyazgwID0ge1xuICBhOiA2Mzc4MjQ5LjE0NSxcbiAgcmY6IDI5My40NjYzLFxuICBlbGxpcHNlTmFtZTogXCJDbGFya2UgMTg4MCBtb2QuXCJcbn07XG5leHBvcnRzLmNscms1OCA9IHtcbiAgYTogNjM3ODI5My42NDUyMDg3NTksXG4gIHJmOiAyOTQuMjYwNjc2MzY5MjY1NCxcbiAgZWxsaXBzZU5hbWU6IFwiQ2xhcmtlIDE4NThcIlxufTtcbmV4cG9ydHMuQ1BNID0ge1xuICBhOiA2Mzc1NzM4LjcsXG4gIHJmOiAzMzQuMjksXG4gIGVsbGlwc2VOYW1lOiBcIkNvbW0uIGRlcyBQb2lkcyBldCBNZXN1cmVzIDE3OTlcIlxufTtcbmV4cG9ydHMuZGVsbWJyID0ge1xuICBhOiA2Mzc2NDI4LjAsXG4gIHJmOiAzMTEuNSxcbiAgZWxsaXBzZU5hbWU6IFwiRGVsYW1icmUgMTgxMCAoQmVsZ2l1bSlcIlxufTtcbmV4cG9ydHMuZW5nZWxpcyA9IHtcbiAgYTogNjM3ODEzNi4wNSxcbiAgcmY6IDI5OC4yNTY2LFxuICBlbGxpcHNlTmFtZTogXCJFbmdlbGlzIDE5ODVcIlxufTtcbmV4cG9ydHMuZXZyc3QzMCA9IHtcbiAgYTogNjM3NzI3Ni4zNDUsXG4gIHJmOiAzMDAuODAxNyxcbiAgZWxsaXBzZU5hbWU6IFwiRXZlcmVzdCAxODMwXCJcbn07XG5leHBvcnRzLmV2cnN0NDggPSB7XG4gIGE6IDYzNzczMDQuMDYzLFxuICByZjogMzAwLjgwMTcsXG4gIGVsbGlwc2VOYW1lOiBcIkV2ZXJlc3QgMTk0OFwiXG59O1xuZXhwb3J0cy5ldnJzdDU2ID0ge1xuICBhOiA2Mzc3MzAxLjI0MyxcbiAgcmY6IDMwMC44MDE3LFxuICBlbGxpcHNlTmFtZTogXCJFdmVyZXN0IDE5NTZcIlxufTtcbmV4cG9ydHMuZXZyc3Q2OSA9IHtcbiAgYTogNjM3NzI5NS42NjQsXG4gIHJmOiAzMDAuODAxNyxcbiAgZWxsaXBzZU5hbWU6IFwiRXZlcmVzdCAxOTY5XCJcbn07XG5leHBvcnRzLmV2cnN0U1MgPSB7XG4gIGE6IDYzNzcyOTguNTU2LFxuICByZjogMzAwLjgwMTcsXG4gIGVsbGlwc2VOYW1lOiBcIkV2ZXJlc3QgKFNhYmFoICYgU2FyYXdhaylcIlxufTtcbmV4cG9ydHMuZnNjaHI2MCA9IHtcbiAgYTogNjM3ODE2Ni4wLFxuICByZjogMjk4LjMsXG4gIGVsbGlwc2VOYW1lOiBcIkZpc2NoZXIgKE1lcmN1cnkgRGF0dW0pIDE5NjBcIlxufTtcbmV4cG9ydHMuZnNjaHI2MG0gPSB7XG4gIGE6IDYzNzgxNTUuMCxcbiAgcmY6IDI5OC4zLFxuICBlbGxpcHNlTmFtZTogXCJGaXNjaGVyIDE5NjBcIlxufTtcbmV4cG9ydHMuZnNjaHI2OCA9IHtcbiAgYTogNjM3ODE1MC4wLFxuICByZjogMjk4LjMsXG4gIGVsbGlwc2VOYW1lOiBcIkZpc2NoZXIgMTk2OFwiXG59O1xuZXhwb3J0cy5oZWxtZXJ0ID0ge1xuICBhOiA2Mzc4MjAwLjAsXG4gIHJmOiAyOTguMyxcbiAgZWxsaXBzZU5hbWU6IFwiSGVsbWVydCAxOTA2XCJcbn07XG5leHBvcnRzLmhvdWdoID0ge1xuICBhOiA2Mzc4MjcwLjAsXG4gIHJmOiAyOTcuMCxcbiAgZWxsaXBzZU5hbWU6IFwiSG91Z2hcIlxufTtcbmV4cG9ydHMuaW50bCA9IHtcbiAgYTogNjM3ODM4OC4wLFxuICByZjogMjk3LjAsXG4gIGVsbGlwc2VOYW1lOiBcIkludGVybmF0aW9uYWwgMTkwOSAoSGF5Zm9yZClcIlxufTtcbmV4cG9ydHMua2F1bGEgPSB7XG4gIGE6IDYzNzgxNjMuMCxcbiAgcmY6IDI5OC4yNCxcbiAgZWxsaXBzZU5hbWU6IFwiS2F1bGEgMTk2MVwiXG59O1xuZXhwb3J0cy5sZXJjaCA9IHtcbiAgYTogNjM3ODEzOS4wLFxuICByZjogMjk4LjI1NyxcbiAgZWxsaXBzZU5hbWU6IFwiTGVyY2ggMTk3OVwiXG59O1xuZXhwb3J0cy5tcHJ0cyA9IHtcbiAgYTogNjM5NzMwMC4wLFxuICByZjogMTkxLjAsXG4gIGVsbGlwc2VOYW1lOiBcIk1hdXBlcnRpdXMgMTczOFwiXG59O1xuZXhwb3J0cy5uZXdfaW50bCA9IHtcbiAgYTogNjM3ODE1Ny41LFxuICBiOiA2MzU2NzcyLjIsXG4gIGVsbGlwc2VOYW1lOiBcIk5ldyBJbnRlcm5hdGlvbmFsIDE5NjdcIlxufTtcbmV4cG9ydHMucGxlc3NpcyA9IHtcbiAgYTogNjM3NjUyMy4wLFxuICByZjogNjM1NTg2My4wLFxuICBlbGxpcHNlTmFtZTogXCJQbGVzc2lzIDE4MTcgKEZyYW5jZSlcIlxufTtcbmV4cG9ydHMua3Jhc3MgPSB7XG4gIGE6IDYzNzgyNDUuMCxcbiAgcmY6IDI5OC4zLFxuICBlbGxpcHNlTmFtZTogXCJLcmFzc292c2t5LCAxOTQyXCJcbn07XG5leHBvcnRzLlNFYXNpYSA9IHtcbiAgYTogNjM3ODE1NS4wLFxuICBiOiA2MzU2NzczLjMyMDUsXG4gIGVsbGlwc2VOYW1lOiBcIlNvdXRoZWFzdCBBc2lhXCJcbn07XG5leHBvcnRzLndhbGJlY2sgPSB7XG4gIGE6IDYzNzY4OTYuMCxcbiAgYjogNjM1NTgzNC44NDY3LFxuICBlbGxpcHNlTmFtZTogXCJXYWxiZWNrXCJcbn07XG5leHBvcnRzLldHUzYwID0ge1xuICBhOiA2Mzc4MTY1LjAsXG4gIHJmOiAyOTguMyxcbiAgZWxsaXBzZU5hbWU6IFwiV0dTIDYwXCJcbn07XG5leHBvcnRzLldHUzY2ID0ge1xuICBhOiA2Mzc4MTQ1LjAsXG4gIHJmOiAyOTguMjUsXG4gIGVsbGlwc2VOYW1lOiBcIldHUyA2NlwiXG59O1xuZXhwb3J0cy5XR1M3ID0ge1xuICBhOiA2Mzc4MTM1LjAsXG4gIHJmOiAyOTguMjYsXG4gIGVsbGlwc2VOYW1lOiBcIldHUyA3MlwiXG59O1xuZXhwb3J0cy5XR1M4NCA9IHtcbiAgYTogNjM3ODEzNy4wLFxuICByZjogMjk4LjI1NzIyMzU2MyxcbiAgZWxsaXBzZU5hbWU6IFwiV0dTIDg0XCJcbn07XG5leHBvcnRzLnNwaGVyZSA9IHtcbiAgYTogNjM3MDk5Ny4wLFxuICBiOiA2MzcwOTk3LjAsXG4gIGVsbGlwc2VOYW1lOiBcIk5vcm1hbCBTcGhlcmUgKHI9NjM3MDk5NylcIlxufTsiLCJleHBvcnRzLmdyZWVud2ljaCA9IDAuMDsgLy9cIjBkRVwiLFxuZXhwb3J0cy5saXNib24gPSAtOS4xMzE5MDYxMTExMTE7IC8vXCI5ZDA3JzU0Ljg2MlxcXCJXXCIsXG5leHBvcnRzLnBhcmlzID0gMi4zMzcyMjkxNjY2Njc7IC8vXCIyZDIwJzE0LjAyNVxcXCJFXCIsXG5leHBvcnRzLmJvZ290YSA9IC03NC4wODA5MTY2NjY2Njc7IC8vXCI3NGQwNCc1MS4zXFxcIldcIixcbmV4cG9ydHMubWFkcmlkID0gLTMuNjg3OTM4ODg4ODg5OyAvL1wiM2Q0MScxNi41OFxcXCJXXCIsXG5leHBvcnRzLnJvbWUgPSAxMi40NTIzMzMzMzMzMzM7IC8vXCIxMmQyNyc4LjRcXFwiRVwiLFxuZXhwb3J0cy5iZXJuID0gNy40Mzk1ODMzMzMzMzM7IC8vXCI3ZDI2JzIyLjVcXFwiRVwiLFxuZXhwb3J0cy5qYWthcnRhID0gMTA2LjgwNzcxOTQ0NDQ0NDsgLy9cIjEwNmQ0OCcyNy43OVxcXCJFXCIsXG5leHBvcnRzLmZlcnJvID0gLTE3LjY2NjY2NjY2NjY2NzsgLy9cIjE3ZDQwJ1dcIixcbmV4cG9ydHMuYnJ1c3NlbHMgPSA0LjM2Nzk3NTsgLy9cIjRkMjInNC43MVxcXCJFXCIsXG5leHBvcnRzLnN0b2NraG9sbSA9IDE4LjA1ODI3Nzc3Nzc3ODsgLy9cIjE4ZDMnMjkuOFxcXCJFXCIsXG5leHBvcnRzLmF0aGVucyA9IDIzLjcxNjMzNzU7IC8vXCIyM2Q0Mic1OC44MTVcXFwiRVwiLFxuZXhwb3J0cy5vc2xvID0gMTAuNzIyOTE2NjY2NjY3OyAvL1wiMTBkNDMnMjIuNVxcXCJFXCIiLCJleHBvcnRzLmZ0ID0ge3RvX21ldGVyOiAwLjMwNDh9O1xuZXhwb3J0c1sndXMtZnQnXSA9IHt0b19tZXRlcjogMTIwMCAvIDM5Mzd9O1xuIiwidmFyIHByb2ogPSByZXF1aXJlKCcuL1Byb2onKTtcbnZhciB0cmFuc2Zvcm0gPSByZXF1aXJlKCcuL3RyYW5zZm9ybScpO1xudmFyIHdnczg0ID0gcHJvaignV0dTODQnKTtcblxuZnVuY3Rpb24gdHJhbnNmb3JtZXIoZnJvbSwgdG8sIGNvb3Jkcykge1xuICB2YXIgdHJhbnNmb3JtZWRBcnJheTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoY29vcmRzKSkge1xuICAgIHRyYW5zZm9ybWVkQXJyYXkgPSB0cmFuc2Zvcm0oZnJvbSwgdG8sIGNvb3Jkcyk7XG4gICAgaWYgKGNvb3Jkcy5sZW5ndGggPT09IDMpIHtcbiAgICAgIHJldHVybiBbdHJhbnNmb3JtZWRBcnJheS54LCB0cmFuc2Zvcm1lZEFycmF5LnksIHRyYW5zZm9ybWVkQXJyYXkuel07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIFt0cmFuc2Zvcm1lZEFycmF5LngsIHRyYW5zZm9ybWVkQXJyYXkueV07XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiB0cmFuc2Zvcm0oZnJvbSwgdG8sIGNvb3Jkcyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tQcm9qKGl0ZW0pIHtcbiAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBwcm9qKSB7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cbiAgaWYgKGl0ZW0ub1Byb2opIHtcbiAgICByZXR1cm4gaXRlbS5vUHJvajtcbiAgfVxuICByZXR1cm4gcHJvaihpdGVtKTtcbn1cbmZ1bmN0aW9uIHByb2o0KGZyb21Qcm9qLCB0b1Byb2osIGNvb3JkKSB7XG4gIGZyb21Qcm9qID0gY2hlY2tQcm9qKGZyb21Qcm9qKTtcbiAgdmFyIHNpbmdsZSA9IGZhbHNlO1xuICB2YXIgb2JqO1xuICBpZiAodHlwZW9mIHRvUHJvaiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0b1Byb2ogPSBmcm9tUHJvajtcbiAgICBmcm9tUHJvaiA9IHdnczg0O1xuICAgIHNpbmdsZSA9IHRydWU7XG4gIH1cbiAgZWxzZSBpZiAodHlwZW9mIHRvUHJvai54ICE9PSAndW5kZWZpbmVkJyB8fCBBcnJheS5pc0FycmF5KHRvUHJvaikpIHtcbiAgICBjb29yZCA9IHRvUHJvajtcbiAgICB0b1Byb2ogPSBmcm9tUHJvajtcbiAgICBmcm9tUHJvaiA9IHdnczg0O1xuICAgIHNpbmdsZSA9IHRydWU7XG4gIH1cbiAgdG9Qcm9qID0gY2hlY2tQcm9qKHRvUHJvaik7XG4gIGlmIChjb29yZCkge1xuICAgIHJldHVybiB0cmFuc2Zvcm1lcihmcm9tUHJvaiwgdG9Qcm9qLCBjb29yZCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgb2JqID0ge1xuICAgICAgZm9yd2FyZDogZnVuY3Rpb24oY29vcmRzKSB7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lcihmcm9tUHJvaiwgdG9Qcm9qLCBjb29yZHMpO1xuICAgICAgfSxcbiAgICAgIGludmVyc2U6IGZ1bmN0aW9uKGNvb3Jkcykge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZXIodG9Qcm9qLCBmcm9tUHJvaiwgY29vcmRzKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChzaW5nbGUpIHtcbiAgICAgIG9iai5vUHJvaiA9IHRvUHJvajtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBwcm9qNDsiLCJ2YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBQSkRfM1BBUkFNID0gMTtcbnZhciBQSkRfN1BBUkFNID0gMjtcbnZhciBQSkRfR1JJRFNISUZUID0gMztcbnZhciBQSkRfV0dTODQgPSA0OyAvLyBXR1M4NCBvciBlcXVpdmFsZW50XG52YXIgUEpEX05PREFUVU0gPSA1OyAvLyBXR1M4NCBvciBlcXVpdmFsZW50XG52YXIgU0VDX1RPX1JBRCA9IDQuODQ4MTM2ODExMDk1MzU5OTM1ODk5MTQxMDIzNTdlLTY7XG52YXIgQURfQyA9IDEuMDAyNjAwMDtcbnZhciBDT1NfNjdQNSA9IDAuMzgyNjgzNDMyMzY1MDg5Nzc7XG52YXIgZGF0dW0gPSBmdW5jdGlvbihwcm9qKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBkYXR1bSkpIHtcbiAgICByZXR1cm4gbmV3IGRhdHVtKHByb2opO1xuICB9XG4gIHRoaXMuZGF0dW1fdHlwZSA9IFBKRF9XR1M4NDsgLy9kZWZhdWx0IHNldHRpbmdcbiAgaWYgKCFwcm9qKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChwcm9qLmRhdHVtQ29kZSAmJiBwcm9qLmRhdHVtQ29kZSA9PT0gJ25vbmUnKSB7XG4gICAgdGhpcy5kYXR1bV90eXBlID0gUEpEX05PREFUVU07XG4gIH1cbiAgaWYgKHByb2ouZGF0dW1fcGFyYW1zKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9qLmRhdHVtX3BhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgcHJvai5kYXR1bV9wYXJhbXNbaV0gPSBwYXJzZUZsb2F0KHByb2ouZGF0dW1fcGFyYW1zW2ldKTtcbiAgICB9XG4gICAgaWYgKHByb2ouZGF0dW1fcGFyYW1zWzBdICE9PSAwIHx8IHByb2ouZGF0dW1fcGFyYW1zWzFdICE9PSAwIHx8IHByb2ouZGF0dW1fcGFyYW1zWzJdICE9PSAwKSB7XG4gICAgICB0aGlzLmRhdHVtX3R5cGUgPSBQSkRfM1BBUkFNO1xuICAgIH1cbiAgICBpZiAocHJvai5kYXR1bV9wYXJhbXMubGVuZ3RoID4gMykge1xuICAgICAgaWYgKHByb2ouZGF0dW1fcGFyYW1zWzNdICE9PSAwIHx8IHByb2ouZGF0dW1fcGFyYW1zWzRdICE9PSAwIHx8IHByb2ouZGF0dW1fcGFyYW1zWzVdICE9PSAwIHx8IHByb2ouZGF0dW1fcGFyYW1zWzZdICE9PSAwKSB7XG4gICAgICAgIHRoaXMuZGF0dW1fdHlwZSA9IFBKRF83UEFSQU07XG4gICAgICAgIHByb2ouZGF0dW1fcGFyYW1zWzNdICo9IFNFQ19UT19SQUQ7XG4gICAgICAgIHByb2ouZGF0dW1fcGFyYW1zWzRdICo9IFNFQ19UT19SQUQ7XG4gICAgICAgIHByb2ouZGF0dW1fcGFyYW1zWzVdICo9IFNFQ19UT19SQUQ7XG4gICAgICAgIHByb2ouZGF0dW1fcGFyYW1zWzZdID0gKHByb2ouZGF0dW1fcGFyYW1zWzZdIC8gMTAwMDAwMC4wKSArIDEuMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gREdSIDIwMTEtMDMtMjEgOiBuYWRncmlkcyBzdXBwb3J0XG4gIHRoaXMuZGF0dW1fdHlwZSA9IHByb2ouZ3JpZHMgPyBQSkRfR1JJRFNISUZUIDogdGhpcy5kYXR1bV90eXBlO1xuXG4gIHRoaXMuYSA9IHByb2ouYTsgLy9kYXR1bSBvYmplY3QgYWxzbyB1c2VzIHRoZXNlIHZhbHVlc1xuICB0aGlzLmIgPSBwcm9qLmI7XG4gIHRoaXMuZXMgPSBwcm9qLmVzO1xuICB0aGlzLmVwMiA9IHByb2ouZXAyO1xuICB0aGlzLmRhdHVtX3BhcmFtcyA9IHByb2ouZGF0dW1fcGFyYW1zO1xuICBpZiAodGhpcy5kYXR1bV90eXBlID09PSBQSkRfR1JJRFNISUZUKSB7XG4gICAgdGhpcy5ncmlkcyA9IHByb2ouZ3JpZHM7XG4gIH1cbn07XG5kYXR1bS5wcm90b3R5cGUgPSB7XG5cblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgLy8gY3NfY29tcGFyZV9kYXR1bXMoKVxuICAvLyAgIFJldHVybnMgVFJVRSBpZiB0aGUgdHdvIGRhdHVtcyBtYXRjaCwgb3RoZXJ3aXNlIEZBTFNFLlxuICBjb21wYXJlX2RhdHVtczogZnVuY3Rpb24oZGVzdCkge1xuICAgIGlmICh0aGlzLmRhdHVtX3R5cGUgIT09IGRlc3QuZGF0dW1fdHlwZSkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBmYWxzZSwgZGF0dW1zIGFyZSBub3QgZXF1YWxcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5hICE9PSBkZXN0LmEgfHwgTWF0aC5hYnModGhpcy5lcyAtIGRlc3QuZXMpID4gMC4wMDAwMDAwMDAwNTApIHtcbiAgICAgIC8vIHRoZSB0b2xlcmVuY2UgZm9yIGVzIGlzIHRvIGVuc3VyZSB0aGF0IEdSUzgwIGFuZCBXR1M4NFxuICAgICAgLy8gYXJlIGNvbnNpZGVyZWQgaWRlbnRpY2FsXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZGF0dW1fdHlwZSA9PT0gUEpEXzNQQVJBTSkge1xuICAgICAgcmV0dXJuICh0aGlzLmRhdHVtX3BhcmFtc1swXSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbMF0gJiYgdGhpcy5kYXR1bV9wYXJhbXNbMV0gPT09IGRlc3QuZGF0dW1fcGFyYW1zWzFdICYmIHRoaXMuZGF0dW1fcGFyYW1zWzJdID09PSBkZXN0LmRhdHVtX3BhcmFtc1syXSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZGF0dW1fdHlwZSA9PT0gUEpEXzdQQVJBTSkge1xuICAgICAgcmV0dXJuICh0aGlzLmRhdHVtX3BhcmFtc1swXSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbMF0gJiYgdGhpcy5kYXR1bV9wYXJhbXNbMV0gPT09IGRlc3QuZGF0dW1fcGFyYW1zWzFdICYmIHRoaXMuZGF0dW1fcGFyYW1zWzJdID09PSBkZXN0LmRhdHVtX3BhcmFtc1syXSAmJiB0aGlzLmRhdHVtX3BhcmFtc1szXSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbM10gJiYgdGhpcy5kYXR1bV9wYXJhbXNbNF0gPT09IGRlc3QuZGF0dW1fcGFyYW1zWzRdICYmIHRoaXMuZGF0dW1fcGFyYW1zWzVdID09PSBkZXN0LmRhdHVtX3BhcmFtc1s1XSAmJiB0aGlzLmRhdHVtX3BhcmFtc1s2XSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbNl0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmRhdHVtX3R5cGUgPT09IFBKRF9HUklEU0hJRlQgfHwgZGVzdC5kYXR1bV90eXBlID09PSBQSkRfR1JJRFNISUZUKSB7XG4gICAgICAvL2FsZXJ0KFwiRVJST1I6IEdyaWQgc2hpZnQgdHJhbnNmb3JtYXRpb25zIGFyZSBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgLy9yZXR1cm4gZmFsc2VcbiAgICAgIC8vREdSIDIwMTItMDctMjkgbGF6eSAuLi5cbiAgICAgIHJldHVybiB0aGlzLm5hZGdyaWRzID09PSBkZXN0Lm5hZGdyaWRzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlOyAvLyBkYXR1bXMgYXJlIGVxdWFsXG4gICAgfVxuICB9LCAvLyBjc19jb21wYXJlX2RhdHVtcygpXG5cbiAgLypcbiAgICogVGhlIGZ1bmN0aW9uIENvbnZlcnRfR2VvZGV0aWNfVG9fR2VvY2VudHJpYyBjb252ZXJ0cyBnZW9kZXRpYyBjb29yZGluYXRlc1xuICAgKiAobGF0aXR1ZGUsIGxvbmdpdHVkZSwgYW5kIGhlaWdodCkgdG8gZ2VvY2VudHJpYyBjb29yZGluYXRlcyAoWCwgWSwgWiksXG4gICAqIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBlbGxpcHNvaWQgcGFyYW1ldGVycy5cbiAgICpcbiAgICogICAgTGF0aXR1ZGUgIDogR2VvZGV0aWMgbGF0aXR1ZGUgaW4gcmFkaWFucyAgICAgICAgICAgICAgICAgICAgIChpbnB1dClcbiAgICogICAgTG9uZ2l0dWRlIDogR2VvZGV0aWMgbG9uZ2l0dWRlIGluIHJhZGlhbnMgICAgICAgICAgICAgICAgICAgIChpbnB1dClcbiAgICogICAgSGVpZ2h0ICAgIDogR2VvZGV0aWMgaGVpZ2h0LCBpbiBtZXRlcnMgICAgICAgICAgICAgICAgICAgICAgIChpbnB1dClcbiAgICogICAgWCAgICAgICAgIDogQ2FsY3VsYXRlZCBHZW9jZW50cmljIFggY29vcmRpbmF0ZSwgaW4gbWV0ZXJzICAgIChvdXRwdXQpXG4gICAqICAgIFkgICAgICAgICA6IENhbGN1bGF0ZWQgR2VvY2VudHJpYyBZIGNvb3JkaW5hdGUsIGluIG1ldGVycyAgICAob3V0cHV0KVxuICAgKiAgICBaICAgICAgICAgOiBDYWxjdWxhdGVkIEdlb2NlbnRyaWMgWiBjb29yZGluYXRlLCBpbiBtZXRlcnMgICAgKG91dHB1dClcbiAgICpcbiAgICovXG4gIGdlb2RldGljX3RvX2dlb2NlbnRyaWM6IGZ1bmN0aW9uKHApIHtcbiAgICB2YXIgTG9uZ2l0dWRlID0gcC54O1xuICAgIHZhciBMYXRpdHVkZSA9IHAueTtcbiAgICB2YXIgSGVpZ2h0ID0gcC56ID8gcC56IDogMDsgLy9aIHZhbHVlIG5vdCBhbHdheXMgc3VwcGxpZWRcbiAgICB2YXIgWDsgLy8gb3V0cHV0XG4gICAgdmFyIFk7XG4gICAgdmFyIFo7XG5cbiAgICB2YXIgRXJyb3JfQ29kZSA9IDA7IC8vICBHRU9DRU5UX05PX0VSUk9SO1xuICAgIHZhciBSbjsgLyogIEVhcnRoIHJhZGl1cyBhdCBsb2NhdGlvbiAgKi9cbiAgICB2YXIgU2luX0xhdDsgLyogIE1hdGguc2luKExhdGl0dWRlKSAgKi9cbiAgICB2YXIgU2luMl9MYXQ7IC8qICBTcXVhcmUgb2YgTWF0aC5zaW4oTGF0aXR1ZGUpICAqL1xuICAgIHZhciBDb3NfTGF0OyAvKiAgTWF0aC5jb3MoTGF0aXR1ZGUpICAqL1xuXG4gICAgLypcbiAgICAgKiogRG9uJ3QgYmxvdyB1cCBpZiBMYXRpdHVkZSBpcyBqdXN0IGEgbGl0dGxlIG91dCBvZiB0aGUgdmFsdWVcbiAgICAgKiogcmFuZ2UgYXMgaXQgbWF5IGp1c3QgYmUgYSByb3VuZGluZyBpc3N1ZS4gIEFsc28gcmVtb3ZlZCBsb25naXR1ZGVcbiAgICAgKiogdGVzdCwgaXQgc2hvdWxkIGJlIHdyYXBwZWQgYnkgTWF0aC5jb3MoKSBhbmQgTWF0aC5zaW4oKS4gIE5GVyBmb3IgUFJPSi40LCBTZXAvMjAwMS5cbiAgICAgKi9cbiAgICBpZiAoTGF0aXR1ZGUgPCAtSEFMRl9QSSAmJiBMYXRpdHVkZSA+IC0xLjAwMSAqIEhBTEZfUEkpIHtcbiAgICAgIExhdGl0dWRlID0gLUhBTEZfUEk7XG4gICAgfVxuICAgIGVsc2UgaWYgKExhdGl0dWRlID4gSEFMRl9QSSAmJiBMYXRpdHVkZSA8IDEuMDAxICogSEFMRl9QSSkge1xuICAgICAgTGF0aXR1ZGUgPSBIQUxGX1BJO1xuICAgIH1cbiAgICBlbHNlIGlmICgoTGF0aXR1ZGUgPCAtSEFMRl9QSSkgfHwgKExhdGl0dWRlID4gSEFMRl9QSSkpIHtcbiAgICAgIC8qIExhdGl0dWRlIG91dCBvZiByYW5nZSAqL1xuICAgICAgLy8uLnJlcG9ydEVycm9yKCdnZW9jZW50OmxhdCBvdXQgb2YgcmFuZ2U6JyArIExhdGl0dWRlKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChMb25naXR1ZGUgPiBNYXRoLlBJKSB7XG4gICAgICBMb25naXR1ZGUgLT0gKDIgKiBNYXRoLlBJKTtcbiAgICB9XG4gICAgU2luX0xhdCA9IE1hdGguc2luKExhdGl0dWRlKTtcbiAgICBDb3NfTGF0ID0gTWF0aC5jb3MoTGF0aXR1ZGUpO1xuICAgIFNpbjJfTGF0ID0gU2luX0xhdCAqIFNpbl9MYXQ7XG4gICAgUm4gPSB0aGlzLmEgLyAoTWF0aC5zcXJ0KDEuMGUwIC0gdGhpcy5lcyAqIFNpbjJfTGF0KSk7XG4gICAgWCA9IChSbiArIEhlaWdodCkgKiBDb3NfTGF0ICogTWF0aC5jb3MoTG9uZ2l0dWRlKTtcbiAgICBZID0gKFJuICsgSGVpZ2h0KSAqIENvc19MYXQgKiBNYXRoLnNpbihMb25naXR1ZGUpO1xuICAgIFogPSAoKFJuICogKDEgLSB0aGlzLmVzKSkgKyBIZWlnaHQpICogU2luX0xhdDtcblxuICAgIHAueCA9IFg7XG4gICAgcC55ID0gWTtcbiAgICBwLnogPSBaO1xuICAgIHJldHVybiBFcnJvcl9Db2RlO1xuICB9LCAvLyBjc19nZW9kZXRpY190b19nZW9jZW50cmljKClcblxuXG4gIGdlb2NlbnRyaWNfdG9fZ2VvZGV0aWM6IGZ1bmN0aW9uKHApIHtcbiAgICAvKiBsb2NhbCBkZWZpbnRpb25zIGFuZCB2YXJpYWJsZXMgKi9cbiAgICAvKiBlbmQtY3JpdGVyaXVtIG9mIGxvb3AsIGFjY3VyYWN5IG9mIHNpbihMYXRpdHVkZSkgKi9cbiAgICB2YXIgZ2VuYXUgPSAxZS0xMjtcbiAgICB2YXIgZ2VuYXUyID0gKGdlbmF1ICogZ2VuYXUpO1xuICAgIHZhciBtYXhpdGVyID0gMzA7XG5cbiAgICB2YXIgUDsgLyogZGlzdGFuY2UgYmV0d2VlbiBzZW1pLW1pbm9yIGF4aXMgYW5kIGxvY2F0aW9uICovXG4gICAgdmFyIFJSOyAvKiBkaXN0YW5jZSBiZXR3ZWVuIGNlbnRlciBhbmQgbG9jYXRpb24gKi9cbiAgICB2YXIgQ1Q7IC8qIHNpbiBvZiBnZW9jZW50cmljIGxhdGl0dWRlICovXG4gICAgdmFyIFNUOyAvKiBjb3Mgb2YgZ2VvY2VudHJpYyBsYXRpdHVkZSAqL1xuICAgIHZhciBSWDtcbiAgICB2YXIgUks7XG4gICAgdmFyIFJOOyAvKiBFYXJ0aCByYWRpdXMgYXQgbG9jYXRpb24gKi9cbiAgICB2YXIgQ1BISTA7IC8qIGNvcyBvZiBzdGFydCBvciBvbGQgZ2VvZGV0aWMgbGF0aXR1ZGUgaW4gaXRlcmF0aW9ucyAqL1xuICAgIHZhciBTUEhJMDsgLyogc2luIG9mIHN0YXJ0IG9yIG9sZCBnZW9kZXRpYyBsYXRpdHVkZSBpbiBpdGVyYXRpb25zICovXG4gICAgdmFyIENQSEk7IC8qIGNvcyBvZiBzZWFyY2hlZCBnZW9kZXRpYyBsYXRpdHVkZSAqL1xuICAgIHZhciBTUEhJOyAvKiBzaW4gb2Ygc2VhcmNoZWQgZ2VvZGV0aWMgbGF0aXR1ZGUgKi9cbiAgICB2YXIgU0RQSEk7IC8qIGVuZC1jcml0ZXJpdW06IGFkZGl0aW9uLXRoZW9yZW0gb2Ygc2luKExhdGl0dWRlKGl0ZXIpLUxhdGl0dWRlKGl0ZXItMSkpICovXG4gICAgdmFyIEF0X1BvbGU7IC8qIGluZGljYXRlcyBsb2NhdGlvbiBpcyBpbiBwb2xhciByZWdpb24gKi9cbiAgICB2YXIgaXRlcjsgLyogIyBvZiBjb250aW5vdXMgaXRlcmF0aW9uLCBtYXguIDMwIGlzIGFsd2F5cyBlbm91Z2ggKHMuYS4pICovXG5cbiAgICB2YXIgWCA9IHAueDtcbiAgICB2YXIgWSA9IHAueTtcbiAgICB2YXIgWiA9IHAueiA/IHAueiA6IDAuMDsgLy9aIHZhbHVlIG5vdCBhbHdheXMgc3VwcGxpZWRcbiAgICB2YXIgTG9uZ2l0dWRlO1xuICAgIHZhciBMYXRpdHVkZTtcbiAgICB2YXIgSGVpZ2h0O1xuXG4gICAgQXRfUG9sZSA9IGZhbHNlO1xuICAgIFAgPSBNYXRoLnNxcnQoWCAqIFggKyBZICogWSk7XG4gICAgUlIgPSBNYXRoLnNxcnQoWCAqIFggKyBZICogWSArIFogKiBaKTtcblxuICAgIC8qICAgICAgc3BlY2lhbCBjYXNlcyBmb3IgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSAqL1xuICAgIGlmIChQIC8gdGhpcy5hIDwgZ2VuYXUpIHtcblxuICAgICAgLyogIHNwZWNpYWwgY2FzZSwgaWYgUD0wLiAoWD0wLiwgWT0wLikgKi9cbiAgICAgIEF0X1BvbGUgPSB0cnVlO1xuICAgICAgTG9uZ2l0dWRlID0gMC4wO1xuXG4gICAgICAvKiAgaWYgKFgsWSxaKT0oMC4sMC4sMC4pIHRoZW4gSGVpZ2h0IGJlY29tZXMgc2VtaS1taW5vciBheGlzXG4gICAgICAgKiAgb2YgZWxsaXBzb2lkICg9Y2VudGVyIG9mIG1hc3MpLCBMYXRpdHVkZSBiZWNvbWVzIFBJLzIgKi9cbiAgICAgIGlmIChSUiAvIHRoaXMuYSA8IGdlbmF1KSB7XG4gICAgICAgIExhdGl0dWRlID0gSEFMRl9QSTtcbiAgICAgICAgSGVpZ2h0ID0gLXRoaXMuYjtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8qICBlbGxpcHNvaWRhbCAoZ2VvZGV0aWMpIGxvbmdpdHVkZVxuICAgICAgICogIGludGVydmFsOiAtUEkgPCBMb25naXR1ZGUgPD0gK1BJICovXG4gICAgICBMb25naXR1ZGUgPSBNYXRoLmF0YW4yKFksIFgpO1xuICAgIH1cblxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICogRm9sbG93aW5nIGl0ZXJhdGl2ZSBhbGdvcml0aG0gd2FzIGRldmVsb3BwZWQgYnlcbiAgICAgKiBcIkluc3RpdHV0IGZvciBFcmRtZXNzdW5nXCIsIFVuaXZlcnNpdHkgb2YgSGFubm92ZXIsIEp1bHkgMTk4OC5cbiAgICAgKiBJbnRlcm5ldDogd3d3LmlmZS51bmktaGFubm92ZXIuZGVcbiAgICAgKiBJdGVyYXRpdmUgY29tcHV0YXRpb24gb2YgQ1BISSxTUEhJIGFuZCBIZWlnaHQuXG4gICAgICogSXRlcmF0aW9uIG9mIENQSEkgYW5kIFNQSEkgdG8gMTAqKi0xMiByYWRpYW4gcmVzcC5cbiAgICAgKiAyKjEwKiotNyBhcmNzZWMuXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cbiAgICBDVCA9IFogLyBSUjtcbiAgICBTVCA9IFAgLyBSUjtcbiAgICBSWCA9IDEuMCAvIE1hdGguc3FydCgxLjAgLSB0aGlzLmVzICogKDIuMCAtIHRoaXMuZXMpICogU1QgKiBTVCk7XG4gICAgQ1BISTAgPSBTVCAqICgxLjAgLSB0aGlzLmVzKSAqIFJYO1xuICAgIFNQSEkwID0gQ1QgKiBSWDtcbiAgICBpdGVyID0gMDtcblxuICAgIC8qIGxvb3AgdG8gZmluZCBzaW4oTGF0aXR1ZGUpIHJlc3AuIExhdGl0dWRlXG4gICAgICogdW50aWwgfHNpbihMYXRpdHVkZShpdGVyKS1MYXRpdHVkZShpdGVyLTEpKXwgPCBnZW5hdSAqL1xuICAgIGRvIHtcbiAgICAgIGl0ZXIrKztcbiAgICAgIFJOID0gdGhpcy5hIC8gTWF0aC5zcXJ0KDEuMCAtIHRoaXMuZXMgKiBTUEhJMCAqIFNQSEkwKTtcblxuICAgICAgLyogIGVsbGlwc29pZGFsIChnZW9kZXRpYykgaGVpZ2h0ICovXG4gICAgICBIZWlnaHQgPSBQICogQ1BISTAgKyBaICogU1BISTAgLSBSTiAqICgxLjAgLSB0aGlzLmVzICogU1BISTAgKiBTUEhJMCk7XG5cbiAgICAgIFJLID0gdGhpcy5lcyAqIFJOIC8gKFJOICsgSGVpZ2h0KTtcbiAgICAgIFJYID0gMS4wIC8gTWF0aC5zcXJ0KDEuMCAtIFJLICogKDIuMCAtIFJLKSAqIFNUICogU1QpO1xuICAgICAgQ1BISSA9IFNUICogKDEuMCAtIFJLKSAqIFJYO1xuICAgICAgU1BISSA9IENUICogUlg7XG4gICAgICBTRFBISSA9IFNQSEkgKiBDUEhJMCAtIENQSEkgKiBTUEhJMDtcbiAgICAgIENQSEkwID0gQ1BISTtcbiAgICAgIFNQSEkwID0gU1BISTtcbiAgICB9XG4gICAgd2hpbGUgKFNEUEhJICogU0RQSEkgPiBnZW5hdTIgJiYgaXRlciA8IG1heGl0ZXIpO1xuXG4gICAgLyogICAgICBlbGxpcHNvaWRhbCAoZ2VvZGV0aWMpIGxhdGl0dWRlICovXG4gICAgTGF0aXR1ZGUgPSBNYXRoLmF0YW4oU1BISSAvIE1hdGguYWJzKENQSEkpKTtcblxuICAgIHAueCA9IExvbmdpdHVkZTtcbiAgICBwLnkgPSBMYXRpdHVkZTtcbiAgICBwLnogPSBIZWlnaHQ7XG4gICAgcmV0dXJuIHA7XG4gIH0sIC8vIGNzX2dlb2NlbnRyaWNfdG9fZ2VvZGV0aWMoKVxuXG4gIC8qKiBDb252ZXJ0X0dlb2NlbnRyaWNfVG9fR2VvZGV0aWNcbiAgICogVGhlIG1ldGhvZCB1c2VkIGhlcmUgaXMgZGVyaXZlZCBmcm9tICdBbiBJbXByb3ZlZCBBbGdvcml0aG0gZm9yXG4gICAqIEdlb2NlbnRyaWMgdG8gR2VvZGV0aWMgQ29vcmRpbmF0ZSBDb252ZXJzaW9uJywgYnkgUmFscGggVG9tcywgRmViIDE5OTZcbiAgICovXG4gIGdlb2NlbnRyaWNfdG9fZ2VvZGV0aWNfbm9uaXRlcjogZnVuY3Rpb24ocCkge1xuICAgIHZhciBYID0gcC54O1xuICAgIHZhciBZID0gcC55O1xuICAgIHZhciBaID0gcC56ID8gcC56IDogMDsgLy9aIHZhbHVlIG5vdCBhbHdheXMgc3VwcGxpZWRcbiAgICB2YXIgTG9uZ2l0dWRlO1xuICAgIHZhciBMYXRpdHVkZTtcbiAgICB2YXIgSGVpZ2h0O1xuXG4gICAgdmFyIFc7IC8qIGRpc3RhbmNlIGZyb20gWiBheGlzICovXG4gICAgdmFyIFcyOyAvKiBzcXVhcmUgb2YgZGlzdGFuY2UgZnJvbSBaIGF4aXMgKi9cbiAgICB2YXIgVDA7IC8qIGluaXRpYWwgZXN0aW1hdGUgb2YgdmVydGljYWwgY29tcG9uZW50ICovXG4gICAgdmFyIFQxOyAvKiBjb3JyZWN0ZWQgZXN0aW1hdGUgb2YgdmVydGljYWwgY29tcG9uZW50ICovXG4gICAgdmFyIFMwOyAvKiBpbml0aWFsIGVzdGltYXRlIG9mIGhvcml6b250YWwgY29tcG9uZW50ICovXG4gICAgdmFyIFMxOyAvKiBjb3JyZWN0ZWQgZXN0aW1hdGUgb2YgaG9yaXpvbnRhbCBjb21wb25lbnQgKi9cbiAgICB2YXIgU2luX0IwOyAvKiBNYXRoLnNpbihCMCksIEIwIGlzIGVzdGltYXRlIG9mIEJvd3JpbmcgYXV4IHZhcmlhYmxlICovXG4gICAgdmFyIFNpbjNfQjA7IC8qIGN1YmUgb2YgTWF0aC5zaW4oQjApICovXG4gICAgdmFyIENvc19CMDsgLyogTWF0aC5jb3MoQjApICovXG4gICAgdmFyIFNpbl9wMTsgLyogTWF0aC5zaW4ocGhpMSksIHBoaTEgaXMgZXN0aW1hdGVkIGxhdGl0dWRlICovXG4gICAgdmFyIENvc19wMTsgLyogTWF0aC5jb3MocGhpMSkgKi9cbiAgICB2YXIgUm47IC8qIEVhcnRoIHJhZGl1cyBhdCBsb2NhdGlvbiAqL1xuICAgIHZhciBTdW07IC8qIG51bWVyYXRvciBvZiBNYXRoLmNvcyhwaGkxKSAqL1xuICAgIHZhciBBdF9Qb2xlOyAvKiBpbmRpY2F0ZXMgbG9jYXRpb24gaXMgaW4gcG9sYXIgcmVnaW9uICovXG5cbiAgICBYID0gcGFyc2VGbG9hdChYKTsgLy8gY2FzdCBmcm9tIHN0cmluZyB0byBmbG9hdFxuICAgIFkgPSBwYXJzZUZsb2F0KFkpO1xuICAgIFogPSBwYXJzZUZsb2F0KFopO1xuXG4gICAgQXRfUG9sZSA9IGZhbHNlO1xuICAgIGlmIChYICE9PSAwLjApIHtcbiAgICAgIExvbmdpdHVkZSA9IE1hdGguYXRhbjIoWSwgWCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKFkgPiAwKSB7XG4gICAgICAgIExvbmdpdHVkZSA9IEhBTEZfUEk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChZIDwgMCkge1xuICAgICAgICBMb25naXR1ZGUgPSAtSEFMRl9QSTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBBdF9Qb2xlID0gdHJ1ZTtcbiAgICAgICAgTG9uZ2l0dWRlID0gMC4wO1xuICAgICAgICBpZiAoWiA+IDAuMCkgeyAvKiBub3J0aCBwb2xlICovXG4gICAgICAgICAgTGF0aXR1ZGUgPSBIQUxGX1BJO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFogPCAwLjApIHsgLyogc291dGggcG9sZSAqL1xuICAgICAgICAgIExhdGl0dWRlID0gLUhBTEZfUEk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8qIGNlbnRlciBvZiBlYXJ0aCAqL1xuICAgICAgICAgIExhdGl0dWRlID0gSEFMRl9QSTtcbiAgICAgICAgICBIZWlnaHQgPSAtdGhpcy5iO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBXMiA9IFggKiBYICsgWSAqIFk7XG4gICAgVyA9IE1hdGguc3FydChXMik7XG4gICAgVDAgPSBaICogQURfQztcbiAgICBTMCA9IE1hdGguc3FydChUMCAqIFQwICsgVzIpO1xuICAgIFNpbl9CMCA9IFQwIC8gUzA7XG4gICAgQ29zX0IwID0gVyAvIFMwO1xuICAgIFNpbjNfQjAgPSBTaW5fQjAgKiBTaW5fQjAgKiBTaW5fQjA7XG4gICAgVDEgPSBaICsgdGhpcy5iICogdGhpcy5lcDIgKiBTaW4zX0IwO1xuICAgIFN1bSA9IFcgLSB0aGlzLmEgKiB0aGlzLmVzICogQ29zX0IwICogQ29zX0IwICogQ29zX0IwO1xuICAgIFMxID0gTWF0aC5zcXJ0KFQxICogVDEgKyBTdW0gKiBTdW0pO1xuICAgIFNpbl9wMSA9IFQxIC8gUzE7XG4gICAgQ29zX3AxID0gU3VtIC8gUzE7XG4gICAgUm4gPSB0aGlzLmEgLyBNYXRoLnNxcnQoMS4wIC0gdGhpcy5lcyAqIFNpbl9wMSAqIFNpbl9wMSk7XG4gICAgaWYgKENvc19wMSA+PSBDT1NfNjdQNSkge1xuICAgICAgSGVpZ2h0ID0gVyAvIENvc19wMSAtIFJuO1xuICAgIH1cbiAgICBlbHNlIGlmIChDb3NfcDEgPD0gLUNPU182N1A1KSB7XG4gICAgICBIZWlnaHQgPSBXIC8gLUNvc19wMSAtIFJuO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIEhlaWdodCA9IFogLyBTaW5fcDEgKyBSbiAqICh0aGlzLmVzIC0gMS4wKTtcbiAgICB9XG4gICAgaWYgKEF0X1BvbGUgPT09IGZhbHNlKSB7XG4gICAgICBMYXRpdHVkZSA9IE1hdGguYXRhbihTaW5fcDEgLyBDb3NfcDEpO1xuICAgIH1cblxuICAgIHAueCA9IExvbmdpdHVkZTtcbiAgICBwLnkgPSBMYXRpdHVkZTtcbiAgICBwLnogPSBIZWlnaHQ7XG4gICAgcmV0dXJuIHA7XG4gIH0sIC8vIGdlb2NlbnRyaWNfdG9fZ2VvZGV0aWNfbm9uaXRlcigpXG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIC8vIHBqX2dlb2NlbnRpY190b193Z3M4NCggcCApXG4gIC8vICBwID0gcG9pbnQgdG8gdHJhbnNmb3JtIGluIGdlb2NlbnRyaWMgY29vcmRpbmF0ZXMgKHgseSx6KVxuICBnZW9jZW50cmljX3RvX3dnczg0OiBmdW5jdGlvbihwKSB7XG5cbiAgICBpZiAodGhpcy5kYXR1bV90eXBlID09PSBQSkRfM1BBUkFNKSB7XG4gICAgICAvLyBpZiggeFtpb10gPT09IEhVR0VfVkFMIClcbiAgICAgIC8vICAgIGNvbnRpbnVlO1xuICAgICAgcC54ICs9IHRoaXMuZGF0dW1fcGFyYW1zWzBdO1xuICAgICAgcC55ICs9IHRoaXMuZGF0dW1fcGFyYW1zWzFdO1xuICAgICAgcC56ICs9IHRoaXMuZGF0dW1fcGFyYW1zWzJdO1xuXG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZGF0dW1fdHlwZSA9PT0gUEpEXzdQQVJBTSkge1xuICAgICAgdmFyIER4X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbMF07XG4gICAgICB2YXIgRHlfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1sxXTtcbiAgICAgIHZhciBEel9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzJdO1xuICAgICAgdmFyIFJ4X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbM107XG4gICAgICB2YXIgUnlfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1s0XTtcbiAgICAgIHZhciBSel9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzVdO1xuICAgICAgdmFyIE1fQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1s2XTtcbiAgICAgIC8vIGlmKCB4W2lvXSA9PT0gSFVHRV9WQUwgKVxuICAgICAgLy8gICAgY29udGludWU7XG4gICAgICB2YXIgeF9vdXQgPSBNX0JGICogKHAueCAtIFJ6X0JGICogcC55ICsgUnlfQkYgKiBwLnopICsgRHhfQkY7XG4gICAgICB2YXIgeV9vdXQgPSBNX0JGICogKFJ6X0JGICogcC54ICsgcC55IC0gUnhfQkYgKiBwLnopICsgRHlfQkY7XG4gICAgICB2YXIgel9vdXQgPSBNX0JGICogKC1SeV9CRiAqIHAueCArIFJ4X0JGICogcC55ICsgcC56KSArIER6X0JGO1xuICAgICAgcC54ID0geF9vdXQ7XG4gICAgICBwLnkgPSB5X291dDtcbiAgICAgIHAueiA9IHpfb3V0O1xuICAgIH1cbiAgfSwgLy8gY3NfZ2VvY2VudHJpY190b193Z3M4NFxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAvLyBwal9nZW9jZW50aWNfZnJvbV93Z3M4NCgpXG4gIC8vICBjb29yZGluYXRlIHN5c3RlbSBkZWZpbml0aW9uLFxuICAvLyAgcG9pbnQgdG8gdHJhbnNmb3JtIGluIGdlb2NlbnRyaWMgY29vcmRpbmF0ZXMgKHgseSx6KVxuICBnZW9jZW50cmljX2Zyb21fd2dzODQ6IGZ1bmN0aW9uKHApIHtcblxuICAgIGlmICh0aGlzLmRhdHVtX3R5cGUgPT09IFBKRF8zUEFSQU0pIHtcbiAgICAgIC8vaWYoIHhbaW9dID09PSBIVUdFX1ZBTCApXG4gICAgICAvLyAgICBjb250aW51ZTtcbiAgICAgIHAueCAtPSB0aGlzLmRhdHVtX3BhcmFtc1swXTtcbiAgICAgIHAueSAtPSB0aGlzLmRhdHVtX3BhcmFtc1sxXTtcbiAgICAgIHAueiAtPSB0aGlzLmRhdHVtX3BhcmFtc1syXTtcblxuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmRhdHVtX3R5cGUgPT09IFBKRF83UEFSQU0pIHtcbiAgICAgIHZhciBEeF9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzBdO1xuICAgICAgdmFyIER5X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbMV07XG4gICAgICB2YXIgRHpfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1syXTtcbiAgICAgIHZhciBSeF9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzNdO1xuICAgICAgdmFyIFJ5X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbNF07XG4gICAgICB2YXIgUnpfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1s1XTtcbiAgICAgIHZhciBNX0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbNl07XG4gICAgICB2YXIgeF90bXAgPSAocC54IC0gRHhfQkYpIC8gTV9CRjtcbiAgICAgIHZhciB5X3RtcCA9IChwLnkgLSBEeV9CRikgLyBNX0JGO1xuICAgICAgdmFyIHpfdG1wID0gKHAueiAtIER6X0JGKSAvIE1fQkY7XG4gICAgICAvL2lmKCB4W2lvXSA9PT0gSFVHRV9WQUwgKVxuICAgICAgLy8gICAgY29udGludWU7XG5cbiAgICAgIHAueCA9IHhfdG1wICsgUnpfQkYgKiB5X3RtcCAtIFJ5X0JGICogel90bXA7XG4gICAgICBwLnkgPSAtUnpfQkYgKiB4X3RtcCArIHlfdG1wICsgUnhfQkYgKiB6X3RtcDtcbiAgICAgIHAueiA9IFJ5X0JGICogeF90bXAgLSBSeF9CRiAqIHlfdG1wICsgel90bXA7XG4gICAgfSAvL2NzX2dlb2NlbnRyaWNfZnJvbV93Z3M4NCgpXG4gIH1cbn07XG5cbi8qKiBwb2ludCBvYmplY3QsIG5vdGhpbmcgZmFuY3ksIGp1c3QgYWxsb3dzIHZhbHVlcyB0byBiZVxuICAgIHBhc3NlZCBiYWNrIGFuZCBmb3J0aCBieSByZWZlcmVuY2UgcmF0aGVyIHRoYW4gYnkgdmFsdWUuXG4gICAgT3RoZXIgcG9pbnQgY2xhc3NlcyBtYXkgYmUgdXNlZCBhcyBsb25nIGFzIHRoZXkgaGF2ZVxuICAgIHggYW5kIHkgcHJvcGVydGllcywgd2hpY2ggd2lsbCBnZXQgbW9kaWZpZWQgaW4gdGhlIHRyYW5zZm9ybSBtZXRob2QuXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBkYXR1bTtcbiIsInZhciBQSkRfM1BBUkFNID0gMTtcbnZhciBQSkRfN1BBUkFNID0gMjtcbnZhciBQSkRfR1JJRFNISUZUID0gMztcbnZhciBQSkRfTk9EQVRVTSA9IDU7IC8vIFdHUzg0IG9yIGVxdWl2YWxlbnRcbnZhciBTUlNfV0dTODRfU0VNSU1BSk9SID0gNjM3ODEzNzsgLy8gb25seSB1c2VkIGluIGdyaWQgc2hpZnQgdHJhbnNmb3Jtc1xudmFyIFNSU19XR1M4NF9FU1FVQVJFRCA9IDAuMDA2Njk0Mzc5OTkwMTQxMzE2OyAvL0RHUjogMjAxMi0wNy0yOVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3QsIHBvaW50KSB7XG4gIHZhciB3cCwgaSwgbDtcblxuICBmdW5jdGlvbiBjaGVja1BhcmFtcyhmYWxsYmFjaykge1xuICAgIHJldHVybiAoZmFsbGJhY2sgPT09IFBKRF8zUEFSQU0gfHwgZmFsbGJhY2sgPT09IFBKRF83UEFSQU0pO1xuICB9XG4gIC8vIFNob3J0IGN1dCBpZiB0aGUgZGF0dW1zIGFyZSBpZGVudGljYWwuXG4gIGlmIChzb3VyY2UuY29tcGFyZV9kYXR1bXMoZGVzdCkpIHtcbiAgICByZXR1cm4gcG9pbnQ7IC8vIGluIHRoaXMgY2FzZSwgemVybyBpcyBzdWNlc3MsXG4gICAgLy8gd2hlcmVhcyBjc19jb21wYXJlX2RhdHVtcyByZXR1cm5zIDEgdG8gaW5kaWNhdGUgVFJVRVxuICAgIC8vIGNvbmZ1c2luZywgc2hvdWxkIGZpeCB0aGlzXG4gIH1cblxuICAvLyBFeHBsaWNpdGx5IHNraXAgZGF0dW0gdHJhbnNmb3JtIGJ5IHNldHRpbmcgJ2RhdHVtPW5vbmUnIGFzIHBhcmFtZXRlciBmb3IgZWl0aGVyIHNvdXJjZSBvciBkZXN0XG4gIGlmIChzb3VyY2UuZGF0dW1fdHlwZSA9PT0gUEpEX05PREFUVU0gfHwgZGVzdC5kYXR1bV90eXBlID09PSBQSkRfTk9EQVRVTSkge1xuICAgIHJldHVybiBwb2ludDtcbiAgfVxuXG4gIC8vREdSOiAyMDEyLTA3LTI5IDogYWRkIG5hZGdyaWRzIHN1cHBvcnQgKGJlZ2luKVxuICB2YXIgc3JjX2EgPSBzb3VyY2UuYTtcbiAgdmFyIHNyY19lcyA9IHNvdXJjZS5lcztcblxuICB2YXIgZHN0X2EgPSBkZXN0LmE7XG4gIHZhciBkc3RfZXMgPSBkZXN0LmVzO1xuXG4gIHZhciBmYWxsYmFjayA9IHNvdXJjZS5kYXR1bV90eXBlO1xuICAvLyBJZiB0aGlzIGRhdHVtIHJlcXVpcmVzIGdyaWQgc2hpZnRzLCB0aGVuIGFwcGx5IGl0IHRvIGdlb2RldGljIGNvb3JkaW5hdGVzLlxuICBpZiAoZmFsbGJhY2sgPT09IFBKRF9HUklEU0hJRlQpIHtcbiAgICBpZiAodGhpcy5hcHBseV9ncmlkc2hpZnQoc291cmNlLCAwLCBwb2ludCkgPT09IDApIHtcbiAgICAgIHNvdXJjZS5hID0gU1JTX1dHUzg0X1NFTUlNQUpPUjtcbiAgICAgIHNvdXJjZS5lcyA9IFNSU19XR1M4NF9FU1FVQVJFRDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyB0cnkgMyBvciA3IHBhcmFtcyB0cmFuc2Zvcm1hdGlvbiBvciBub3RoaW5nID9cbiAgICAgIGlmICghc291cmNlLmRhdHVtX3BhcmFtcykge1xuICAgICAgICBzb3VyY2UuYSA9IHNyY19hO1xuICAgICAgICBzb3VyY2UuZXMgPSBzb3VyY2UuZXM7XG4gICAgICAgIHJldHVybiBwb2ludDtcbiAgICAgIH1cbiAgICAgIHdwID0gMTtcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBzb3VyY2UuZGF0dW1fcGFyYW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB3cCAqPSBzb3VyY2UuZGF0dW1fcGFyYW1zW2ldO1xuICAgICAgfVxuICAgICAgaWYgKHdwID09PSAwKSB7XG4gICAgICAgIHNvdXJjZS5hID0gc3JjX2E7XG4gICAgICAgIHNvdXJjZS5lcyA9IHNvdXJjZS5lcztcbiAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgfVxuICAgICAgaWYgKHNvdXJjZS5kYXR1bV9wYXJhbXMubGVuZ3RoID4gMykge1xuICAgICAgICBmYWxsYmFjayA9IFBKRF83UEFSQU07XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZmFsbGJhY2sgPSBQSkRfM1BBUkFNO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoZGVzdC5kYXR1bV90eXBlID09PSBQSkRfR1JJRFNISUZUKSB7XG4gICAgZGVzdC5hID0gU1JTX1dHUzg0X1NFTUlNQUpPUjtcbiAgICBkZXN0LmVzID0gU1JTX1dHUzg0X0VTUVVBUkVEO1xuICB9XG4gIC8vIERvIHdlIG5lZWQgdG8gZ28gdGhyb3VnaCBnZW9jZW50cmljIGNvb3JkaW5hdGVzP1xuICBpZiAoc291cmNlLmVzICE9PSBkZXN0LmVzIHx8IHNvdXJjZS5hICE9PSBkZXN0LmEgfHwgY2hlY2tQYXJhbXMoZmFsbGJhY2spIHx8IGNoZWNrUGFyYW1zKGRlc3QuZGF0dW1fdHlwZSkpIHtcbiAgICAvL0RHUjogMjAxMi0wNy0yOSA6IGFkZCBuYWRncmlkcyBzdXBwb3J0IChlbmQpXG4gICAgLy8gQ29udmVydCB0byBnZW9jZW50cmljIGNvb3JkaW5hdGVzLlxuICAgIHNvdXJjZS5nZW9kZXRpY190b19nZW9jZW50cmljKHBvaW50KTtcbiAgICAvLyBDSEVDS19SRVRVUk47XG4gICAgLy8gQ29udmVydCBiZXR3ZWVuIGRhdHVtc1xuICAgIGlmIChjaGVja1BhcmFtcyhzb3VyY2UuZGF0dW1fdHlwZSkpIHtcbiAgICAgIHNvdXJjZS5nZW9jZW50cmljX3RvX3dnczg0KHBvaW50KTtcbiAgICAgIC8vIENIRUNLX1JFVFVSTjtcbiAgICB9XG4gICAgaWYgKGNoZWNrUGFyYW1zKGRlc3QuZGF0dW1fdHlwZSkpIHtcbiAgICAgIGRlc3QuZ2VvY2VudHJpY19mcm9tX3dnczg0KHBvaW50KTtcbiAgICAgIC8vIENIRUNLX1JFVFVSTjtcbiAgICB9XG4gICAgLy8gQ29udmVydCBiYWNrIHRvIGdlb2RldGljIGNvb3JkaW5hdGVzXG4gICAgZGVzdC5nZW9jZW50cmljX3RvX2dlb2RldGljKHBvaW50KTtcbiAgICAvLyBDSEVDS19SRVRVUk47XG4gIH1cbiAgLy8gQXBwbHkgZ3JpZCBzaGlmdCB0byBkZXN0aW5hdGlvbiBpZiByZXF1aXJlZFxuICBpZiAoZGVzdC5kYXR1bV90eXBlID09PSBQSkRfR1JJRFNISUZUKSB7XG4gICAgdGhpcy5hcHBseV9ncmlkc2hpZnQoZGVzdCwgMSwgcG9pbnQpO1xuICAgIC8vIENIRUNLX1JFVFVSTjtcbiAgfVxuXG4gIHNvdXJjZS5hID0gc3JjX2E7XG4gIHNvdXJjZS5lcyA9IHNyY19lcztcbiAgZGVzdC5hID0gZHN0X2E7XG4gIGRlc3QuZXMgPSBkc3RfZXM7XG5cbiAgcmV0dXJuIHBvaW50O1xufTtcblxuIiwidmFyIGdsb2JhbHMgPSByZXF1aXJlKCcuL2dsb2JhbCcpO1xudmFyIHBhcnNlUHJvaiA9IHJlcXVpcmUoJy4vcHJvalN0cmluZycpO1xudmFyIHdrdCA9IHJlcXVpcmUoJy4vd2t0Jyk7XG5cbmZ1bmN0aW9uIGRlZnMobmFtZSkge1xuICAvKmdsb2JhbCBjb25zb2xlKi9cbiAgdmFyIHRoYXQgPSB0aGlzO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIHZhciBkZWYgPSBhcmd1bWVudHNbMV07XG4gICAgaWYgKHR5cGVvZiBkZWYgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoZGVmLmNoYXJBdCgwKSA9PT0gJysnKSB7XG4gICAgICAgIGRlZnNbbmFtZV0gPSBwYXJzZVByb2ooYXJndW1lbnRzWzFdKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBkZWZzW25hbWVdID0gd2t0KGFyZ3VtZW50c1sxXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlZnNbbmFtZV0gPSBkZWY7XG4gICAgfVxuICB9XG4gIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lKSkge1xuICAgICAgcmV0dXJuIG5hbWUubWFwKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgICBkZWZzLmFwcGx5KHRoYXQsIHYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlZnModik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChuYW1lIGluIGRlZnMpIHtcbiAgICAgICAgcmV0dXJuIGRlZnNbbmFtZV07XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKCdFUFNHJyBpbiBuYW1lKSB7XG4gICAgICBkZWZzWydFUFNHOicgKyBuYW1lLkVQU0ddID0gbmFtZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoJ0VTUkknIGluIG5hbWUpIHtcbiAgICAgIGRlZnNbJ0VTUkk6JyArIG5hbWUuRVNSSV0gPSBuYW1lO1xuICAgIH1cbiAgICBlbHNlIGlmICgnSUFVMjAwMCcgaW4gbmFtZSkge1xuICAgICAgZGVmc1snSUFVMjAwMDonICsgbmFtZS5JQVUyMDAwXSA9IG5hbWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS5sb2cobmFtZSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG5cbn1cbmdsb2JhbHMoZGVmcyk7XG5tb2R1bGUuZXhwb3J0cyA9IGRlZnM7XG4iLCJ2YXIgRGF0dW0gPSByZXF1aXJlKCcuL2NvbnN0YW50cy9EYXR1bScpO1xudmFyIEVsbGlwc29pZCA9IHJlcXVpcmUoJy4vY29uc3RhbnRzL0VsbGlwc29pZCcpO1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJy4vZXh0ZW5kJyk7XG52YXIgZGF0dW0gPSByZXF1aXJlKCcuL2RhdHVtJyk7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xuLy8gZWxsaXBvaWQgcGpfc2V0X2VsbC5jXG52YXIgU0lYVEggPSAwLjE2NjY2NjY2NjY2NjY2NjY2Njc7XG4vKiAxLzYgKi9cbnZhciBSQTQgPSAwLjA0NzIyMjIyMjIyMjIyMjIyMjIyO1xuLyogMTcvMzYwICovXG52YXIgUkE2ID0gMC4wMjIxNTYwODQ2NTYwODQ2NTYwODtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oanNvbikge1xuICAvLyBER1IgMjAxMS0wMy0yMCA6IG5hZ3JpZHMgLT4gbmFkZ3JpZHNcbiAgaWYgKGpzb24uZGF0dW1Db2RlICYmIGpzb24uZGF0dW1Db2RlICE9PSAnbm9uZScpIHtcbiAgICB2YXIgZGF0dW1EZWYgPSBEYXR1bVtqc29uLmRhdHVtQ29kZV07XG4gICAgaWYgKGRhdHVtRGVmKSB7XG4gICAgICBqc29uLmRhdHVtX3BhcmFtcyA9IGRhdHVtRGVmLnRvd2dzODQgPyBkYXR1bURlZi50b3dnczg0LnNwbGl0KCcsJykgOiBudWxsO1xuICAgICAganNvbi5lbGxwcyA9IGRhdHVtRGVmLmVsbGlwc2U7XG4gICAgICBqc29uLmRhdHVtTmFtZSA9IGRhdHVtRGVmLmRhdHVtTmFtZSA/IGRhdHVtRGVmLmRhdHVtTmFtZSA6IGpzb24uZGF0dW1Db2RlO1xuICAgIH1cbiAgfVxuICBpZiAoIWpzb24uYSkgeyAvLyBkbyB3ZSBoYXZlIGFuIGVsbGlwc29pZD9cbiAgICB2YXIgZWxsaXBzZSA9IEVsbGlwc29pZFtqc29uLmVsbHBzXSA/IEVsbGlwc29pZFtqc29uLmVsbHBzXSA6IEVsbGlwc29pZC5XR1M4NDtcbiAgICBleHRlbmQoanNvbiwgZWxsaXBzZSk7XG4gIH1cbiAgaWYgKGpzb24ucmYgJiYgIWpzb24uYikge1xuICAgIGpzb24uYiA9ICgxLjAgLSAxLjAgLyBqc29uLnJmKSAqIGpzb24uYTtcbiAgfVxuICBpZiAoanNvbi5yZiA9PT0gMCB8fCBNYXRoLmFicyhqc29uLmEgLSBqc29uLmIpIDwgRVBTTE4pIHtcbiAgICBqc29uLnNwaGVyZSA9IHRydWU7XG4gICAganNvbi5iID0ganNvbi5hO1xuICB9XG4gIGpzb24uYTIgPSBqc29uLmEgKiBqc29uLmE7IC8vIHVzZWQgaW4gZ2VvY2VudHJpY1xuICBqc29uLmIyID0ganNvbi5iICoganNvbi5iOyAvLyB1c2VkIGluIGdlb2NlbnRyaWNcbiAganNvbi5lcyA9IChqc29uLmEyIC0ganNvbi5iMikgLyBqc29uLmEyOyAvLyBlIF4gMlxuICBqc29uLmUgPSBNYXRoLnNxcnQoanNvbi5lcyk7IC8vIGVjY2VudHJpY2l0eVxuICBpZiAoanNvbi5SX0EpIHtcbiAgICBqc29uLmEgKj0gMSAtIGpzb24uZXMgKiAoU0lYVEggKyBqc29uLmVzICogKFJBNCArIGpzb24uZXMgKiBSQTYpKTtcbiAgICBqc29uLmEyID0ganNvbi5hICoganNvbi5hO1xuICAgIGpzb24uYjIgPSBqc29uLmIgKiBqc29uLmI7XG4gICAganNvbi5lcyA9IDA7XG4gIH1cbiAganNvbi5lcDIgPSAoanNvbi5hMiAtIGpzb24uYjIpIC8ganNvbi5iMjsgLy8gdXNlZCBpbiBnZW9jZW50cmljXG4gIGlmICghanNvbi5rMCkge1xuICAgIGpzb24uazAgPSAxLjA7IC8vZGVmYXVsdCB2YWx1ZVxuICB9XG4gIC8vREdSIDIwMTAtMTEtMTI6IGF4aXNcbiAgaWYgKCFqc29uLmF4aXMpIHtcbiAgICBqc29uLmF4aXMgPSBcImVudVwiO1xuICB9XG5cbiAgaWYgKCFqc29uLmRhdHVtKSB7XG4gICAganNvbi5kYXR1bSA9IGRhdHVtKGpzb24pO1xuICB9XG4gIHJldHVybiBqc29uO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICBkZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uIHx8IHt9O1xuICB2YXIgdmFsdWUsIHByb3BlcnR5O1xuICBpZiAoIXNvdXJjZSkge1xuICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgfVxuICBmb3IgKHByb3BlcnR5IGluIHNvdXJjZSkge1xuICAgIHZhbHVlID0gc291cmNlW3Byb3BlcnR5XTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVzdGluYXRpb25bcHJvcGVydHldID0gdmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBkZXN0aW5hdGlvbjtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRlZnMpIHtcbiAgZGVmcygnRVBTRzo0MzI2JywgXCIrdGl0bGU9V0dTIDg0IChsb25nL2xhdCkgK3Byb2o9bG9uZ2xhdCArZWxscHM9V0dTODQgK2RhdHVtPVdHUzg0ICt1bml0cz1kZWdyZWVzXCIpO1xuICBkZWZzKCdFUFNHOjQyNjknLCBcIit0aXRsZT1OQUQ4MyAobG9uZy9sYXQpICtwcm9qPWxvbmdsYXQgK2E9NjM3ODEzNy4wICtiPTYzNTY3NTIuMzE0MTQwMzYgK2VsbHBzPUdSUzgwICtkYXR1bT1OQUQ4MyArdW5pdHM9ZGVncmVlc1wiKTtcbiAgZGVmcygnRVBTRzozODU3JywgXCIrdGl0bGU9V0dTIDg0IC8gUHNldWRvLU1lcmNhdG9yICtwcm9qPW1lcmMgK2E9NjM3ODEzNyArYj02Mzc4MTM3ICtsYXRfdHM9MC4wICtsb25fMD0wLjAgK3hfMD0wLjAgK3lfMD0wICtrPTEuMCArdW5pdHM9bSArbmFkZ3JpZHM9QG51bGwgK25vX2RlZnNcIik7XG5cbiAgZGVmcy5XR1M4NCA9IGRlZnNbJ0VQU0c6NDMyNiddO1xuICBkZWZzWydFUFNHOjM3ODUnXSA9IGRlZnNbJ0VQU0c6Mzg1NyddOyAvLyBtYWludGFpbiBiYWNrd2FyZCBjb21wYXQsIG9mZmljaWFsIGNvZGUgaXMgMzg1N1xuICBkZWZzLkdPT0dMRSA9IGRlZnNbJ0VQU0c6Mzg1NyddO1xuICBkZWZzWydFUFNHOjkwMDkxMyddID0gZGVmc1snRVBTRzozODU3J107XG4gIGRlZnNbJ0VQU0c6MTAyMTEzJ10gPSBkZWZzWydFUFNHOjM4NTcnXTtcbn07XG4iLCJ2YXIgcHJvanMgPSBbXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvdG1lcmMnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy91dG0nKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9zdGVyZWEnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9zdGVyZScpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL3NvbWVyYycpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL29tZXJjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvbGNjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMva3JvdmFrJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvY2FzcycpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL2xhZWEnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9hZWEnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9nbm9tJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvY2VhJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvZXFjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvcG9seScpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL256bWcnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9taWxsJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvc2ludScpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL21vbGwnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9lcWRjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvdmFuZGcnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9hZXFkJylcbl07XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHByb2o0KXtcbiAgcHJvanMuZm9yRWFjaChmdW5jdGlvbihwcm9qKXtcbiAgICBwcm9qNC5Qcm9qLnByb2plY3Rpb25zLmFkZChwcm9qKTtcbiAgfSk7XG59OyIsInZhciBwcm9qNCA9IHJlcXVpcmUoJy4vY29yZScpO1xucHJvajQuZGVmYXVsdERhdHVtID0gJ1dHUzg0JzsgLy9kZWZhdWx0IGRhdHVtXG5wcm9qNC5Qcm9qID0gcmVxdWlyZSgnLi9Qcm9qJyk7XG5wcm9qNC5XR1M4NCA9IG5ldyBwcm9qNC5Qcm9qKCdXR1M4NCcpO1xucHJvajQuUG9pbnQgPSByZXF1aXJlKCcuL1BvaW50Jyk7XG5wcm9qNC50b1BvaW50ID0gcmVxdWlyZShcIi4vY29tbW9uL3RvUG9pbnRcIik7XG5wcm9qNC5kZWZzID0gcmVxdWlyZSgnLi9kZWZzJyk7XG5wcm9qNC50cmFuc2Zvcm0gPSByZXF1aXJlKCcuL3RyYW5zZm9ybScpO1xucHJvajQubWdycyA9IHJlcXVpcmUoJ21ncnMnKTtcbnByb2o0LnZlcnNpb24gPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uO1xucmVxdWlyZSgnLi9pbmNsdWRlZFByb2plY3Rpb25zJykocHJvajQpO1xubW9kdWxlLmV4cG9ydHMgPSBwcm9qNDsiLCJ2YXIgZGVmcyA9IHJlcXVpcmUoJy4vZGVmcycpO1xudmFyIHdrdCA9IHJlcXVpcmUoJy4vd2t0Jyk7XG52YXIgcHJvalN0ciA9IHJlcXVpcmUoJy4vcHJvalN0cmluZycpO1xuZnVuY3Rpb24gdGVzdE9iaihjb2RlKXtcbiAgcmV0dXJuIHR5cGVvZiBjb2RlID09PSAnc3RyaW5nJztcbn1cbmZ1bmN0aW9uIHRlc3REZWYoY29kZSl7XG4gIHJldHVybiBjb2RlIGluIGRlZnM7XG59XG5mdW5jdGlvbiB0ZXN0V0tUKGNvZGUpe1xuICB2YXIgY29kZVdvcmRzID0gWydHRU9HQ1MnLCdHRU9DQ1MnLCdQUk9KQ1MnLCdMT0NBTF9DUyddO1xuICByZXR1cm4gY29kZVdvcmRzLnJlZHVjZShmdW5jdGlvbihhLGIpe1xuICAgIHJldHVybiBhKzErY29kZS5pbmRleE9mKGIpO1xuICB9LDApO1xufVxuZnVuY3Rpb24gdGVzdFByb2ooY29kZSl7XG4gIHJldHVybiBjb2RlWzBdID09PSAnKyc7XG59XG5mdW5jdGlvbiBwYXJzZShjb2RlKXtcbiAgaWYgKHRlc3RPYmooY29kZSkpIHtcbiAgICAvL2NoZWNrIHRvIHNlZSBpZiB0aGlzIGlzIGEgV0tUIHN0cmluZ1xuICAgIGlmICh0ZXN0RGVmKGNvZGUpKSB7XG4gICAgICByZXR1cm4gZGVmc1tjb2RlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGVzdFdLVChjb2RlKSkge1xuICAgICAgcmV0dXJuIHdrdChjb2RlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGVzdFByb2ooY29kZSkpIHtcbiAgICAgIHJldHVybiBwcm9qU3RyKGNvZGUpO1xuICAgIH1cbiAgfWVsc2V7XG4gICAgcmV0dXJuIGNvZGU7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZTsiLCJ2YXIgRDJSID0gMC4wMTc0NTMyOTI1MTk5NDMyOTU3NztcbnZhciBQcmltZU1lcmlkaWFuID0gcmVxdWlyZSgnLi9jb25zdGFudHMvUHJpbWVNZXJpZGlhbicpO1xudmFyIHVuaXRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMvdW5pdHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkZWZEYXRhKSB7XG4gIHZhciBzZWxmID0ge307XG4gIHZhciBwYXJhbU9iaiA9IHt9O1xuICBkZWZEYXRhLnNwbGl0KFwiK1wiKS5tYXAoZnVuY3Rpb24odikge1xuICAgIHJldHVybiB2LnRyaW0oKTtcbiAgfSkuZmlsdGVyKGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gYTtcbiAgfSkuZm9yRWFjaChmdW5jdGlvbihhKSB7XG4gICAgdmFyIHNwbGl0ID0gYS5zcGxpdChcIj1cIik7XG4gICAgc3BsaXQucHVzaCh0cnVlKTtcbiAgICBwYXJhbU9ialtzcGxpdFswXS50b0xvd2VyQ2FzZSgpXSA9IHNwbGl0WzFdO1xuICB9KTtcbiAgdmFyIHBhcmFtTmFtZSwgcGFyYW1WYWwsIHBhcmFtT3V0bmFtZTtcbiAgdmFyIHBhcmFtcyA9IHtcbiAgICBwcm9qOiAncHJvak5hbWUnLFxuICAgIGRhdHVtOiAnZGF0dW1Db2RlJyxcbiAgICByZjogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5yZiA9IHBhcnNlRmxvYXQodik7XG4gICAgfSxcbiAgICBsYXRfMDogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5sYXQwID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGxhdF8xOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmxhdDEgPSB2ICogRDJSO1xuICAgIH0sXG4gICAgbGF0XzI6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYubGF0MiA9IHYgKiBEMlI7XG4gICAgfSxcbiAgICBsYXRfdHM6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYubGF0X3RzID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGxvbl8wOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmxvbmcwID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGxvbl8xOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmxvbmcxID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGxvbl8yOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmxvbmcyID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGFscGhhOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmFscGhhID0gcGFyc2VGbG9hdCh2KSAqIEQyUjtcbiAgICB9LFxuICAgIGxvbmM6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYubG9uZ2MgPSB2ICogRDJSO1xuICAgIH0sXG4gICAgeF8wOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLngwID0gcGFyc2VGbG9hdCh2KTtcbiAgICB9LFxuICAgIHlfMDogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi55MCA9IHBhcnNlRmxvYXQodik7XG4gICAgfSxcbiAgICBrXzA6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYuazAgPSBwYXJzZUZsb2F0KHYpO1xuICAgIH0sXG4gICAgazogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5rMCA9IHBhcnNlRmxvYXQodik7XG4gICAgfSxcbiAgICBhOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmEgPSBwYXJzZUZsb2F0KHYpO1xuICAgIH0sXG4gICAgYjogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5iID0gcGFyc2VGbG9hdCh2KTtcbiAgICB9LFxuICAgIHJfYTogZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLlJfQSA9IHRydWU7XG4gICAgfSxcbiAgICB6b25lOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLnpvbmUgPSBwYXJzZUludCh2LCAxMCk7XG4gICAgfSxcbiAgICBzb3V0aDogZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLnV0bVNvdXRoID0gdHJ1ZTtcbiAgICB9LFxuICAgIHRvd2dzODQ6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYuZGF0dW1fcGFyYW1zID0gdi5zcGxpdChcIixcIikubWFwKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoYSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHRvX21ldGVyOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLnRvX21ldGVyID0gcGFyc2VGbG9hdCh2KTtcbiAgICB9LFxuICAgIHVuaXRzOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLnVuaXRzID0gdjtcbiAgICAgIGlmICh1bml0c1t2XSkge1xuICAgICAgICBzZWxmLnRvX21ldGVyID0gdW5pdHNbdl0udG9fbWV0ZXI7XG4gICAgICB9XG4gICAgfSxcbiAgICBmcm9tX2dyZWVud2ljaDogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5mcm9tX2dyZWVud2ljaCA9IHYgKiBEMlI7XG4gICAgfSxcbiAgICBwbTogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5mcm9tX2dyZWVud2ljaCA9IChQcmltZU1lcmlkaWFuW3ZdID8gUHJpbWVNZXJpZGlhblt2XSA6IHBhcnNlRmxvYXQodikpICogRDJSO1xuICAgIH0sXG4gICAgbmFkZ3JpZHM6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIGlmICh2ID09PSAnQG51bGwnKSB7XG4gICAgICAgIHNlbGYuZGF0dW1Db2RlID0gJ25vbmUnO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHNlbGYubmFkZ3JpZHMgPSB2O1xuICAgICAgfVxuICAgIH0sXG4gICAgYXhpczogZnVuY3Rpb24odikge1xuICAgICAgdmFyIGxlZ2FsQXhpcyA9IFwiZXduc3VkXCI7XG4gICAgICBpZiAodi5sZW5ndGggPT09IDMgJiYgbGVnYWxBeGlzLmluZGV4T2Yodi5zdWJzdHIoMCwgMSkpICE9PSAtMSAmJiBsZWdhbEF4aXMuaW5kZXhPZih2LnN1YnN0cigxLCAxKSkgIT09IC0xICYmIGxlZ2FsQXhpcy5pbmRleE9mKHYuc3Vic3RyKDIsIDEpKSAhPT0gLTEpIHtcbiAgICAgICAgc2VsZi5heGlzID0gdjtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGZvciAocGFyYW1OYW1lIGluIHBhcmFtT2JqKSB7XG4gICAgcGFyYW1WYWwgPSBwYXJhbU9ialtwYXJhbU5hbWVdO1xuICAgIGlmIChwYXJhbU5hbWUgaW4gcGFyYW1zKSB7XG4gICAgICBwYXJhbU91dG5hbWUgPSBwYXJhbXNbcGFyYW1OYW1lXTtcbiAgICAgIGlmICh0eXBlb2YgcGFyYW1PdXRuYW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBhcmFtT3V0bmFtZShwYXJhbVZhbCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc2VsZltwYXJhbU91dG5hbWVdID0gcGFyYW1WYWw7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc2VsZltwYXJhbU5hbWVdID0gcGFyYW1WYWw7XG4gICAgfVxuICB9XG4gIGlmKHR5cGVvZiBzZWxmLmRhdHVtQ29kZSA9PT0gJ3N0cmluZycgJiYgc2VsZi5kYXR1bUNvZGUgIT09IFwiV0dTODRcIil7XG4gICAgc2VsZi5kYXR1bUNvZGUgPSBzZWxmLmRhdHVtQ29kZS50b0xvd2VyQ2FzZSgpO1xuICB9XG4gIHJldHVybiBzZWxmO1xufTtcbiIsInZhciBwcm9qcyA9IFtcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9tZXJjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvbG9uZ2xhdCcpXG5dO1xudmFyIG5hbWVzID0ge307XG52YXIgcHJvalN0b3JlID0gW107XG5cbmZ1bmN0aW9uIGFkZChwcm9qLCBpKSB7XG4gIHZhciBsZW4gPSBwcm9qU3RvcmUubGVuZ3RoO1xuICBpZiAoIXByb2oubmFtZXMpIHtcbiAgICBjb25zb2xlLmxvZyhpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBwcm9qU3RvcmVbbGVuXSA9IHByb2o7XG4gIHByb2oubmFtZXMuZm9yRWFjaChmdW5jdGlvbihuKSB7XG4gICAgbmFtZXNbbi50b0xvd2VyQ2FzZSgpXSA9IGxlbjtcbiAgfSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5leHBvcnRzLmFkZCA9IGFkZDtcblxuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gIGlmICghbmFtZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgbiA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKHR5cGVvZiBuYW1lc1tuXSAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvalN0b3JlW25hbWVzW25dXSkge1xuICAgIHJldHVybiBwcm9qU3RvcmVbbmFtZXNbbl1dO1xuICB9XG59O1xuZXhwb3J0cy5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICBwcm9qcy5mb3JFYWNoKGFkZCk7XG59O1xuIiwidmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBtc2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tc2ZueicpO1xudmFyIHFzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3FzZm56Jyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgYXNpbnogPSByZXF1aXJlKCcuLi9jb21tb24vYXNpbnonKTtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gIGlmIChNYXRoLmFicyh0aGlzLmxhdDEgKyB0aGlzLmxhdDIpIDwgRVBTTE4pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy50ZW1wID0gdGhpcy5iIC8gdGhpcy5hO1xuICB0aGlzLmVzID0gMSAtIE1hdGgucG93KHRoaXMudGVtcCwgMik7XG4gIHRoaXMuZTMgPSBNYXRoLnNxcnQodGhpcy5lcyk7XG5cbiAgdGhpcy5zaW5fcG8gPSBNYXRoLnNpbih0aGlzLmxhdDEpO1xuICB0aGlzLmNvc19wbyA9IE1hdGguY29zKHRoaXMubGF0MSk7XG4gIHRoaXMudDEgPSB0aGlzLnNpbl9wbztcbiAgdGhpcy5jb24gPSB0aGlzLnNpbl9wbztcbiAgdGhpcy5tczEgPSBtc2Zueih0aGlzLmUzLCB0aGlzLnNpbl9wbywgdGhpcy5jb3NfcG8pO1xuICB0aGlzLnFzMSA9IHFzZm56KHRoaXMuZTMsIHRoaXMuc2luX3BvLCB0aGlzLmNvc19wbyk7XG5cbiAgdGhpcy5zaW5fcG8gPSBNYXRoLnNpbih0aGlzLmxhdDIpO1xuICB0aGlzLmNvc19wbyA9IE1hdGguY29zKHRoaXMubGF0Mik7XG4gIHRoaXMudDIgPSB0aGlzLnNpbl9wbztcbiAgdGhpcy5tczIgPSBtc2Zueih0aGlzLmUzLCB0aGlzLnNpbl9wbywgdGhpcy5jb3NfcG8pO1xuICB0aGlzLnFzMiA9IHFzZm56KHRoaXMuZTMsIHRoaXMuc2luX3BvLCB0aGlzLmNvc19wbyk7XG5cbiAgdGhpcy5zaW5fcG8gPSBNYXRoLnNpbih0aGlzLmxhdDApO1xuICB0aGlzLmNvc19wbyA9IE1hdGguY29zKHRoaXMubGF0MCk7XG4gIHRoaXMudDMgPSB0aGlzLnNpbl9wbztcbiAgdGhpcy5xczAgPSBxc2Zueih0aGlzLmUzLCB0aGlzLnNpbl9wbywgdGhpcy5jb3NfcG8pO1xuXG4gIGlmIChNYXRoLmFicyh0aGlzLmxhdDEgLSB0aGlzLmxhdDIpID4gRVBTTE4pIHtcbiAgICB0aGlzLm5zMCA9ICh0aGlzLm1zMSAqIHRoaXMubXMxIC0gdGhpcy5tczIgKiB0aGlzLm1zMikgLyAodGhpcy5xczIgLSB0aGlzLnFzMSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgdGhpcy5uczAgPSB0aGlzLmNvbjtcbiAgfVxuICB0aGlzLmMgPSB0aGlzLm1zMSAqIHRoaXMubXMxICsgdGhpcy5uczAgKiB0aGlzLnFzMTtcbiAgdGhpcy5yaCA9IHRoaXMuYSAqIE1hdGguc3FydCh0aGlzLmMgLSB0aGlzLm5zMCAqIHRoaXMucXMwKSAvIHRoaXMubnMwO1xufTtcblxuLyogQWxiZXJzIENvbmljYWwgRXF1YWwgQXJlYSBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG5cbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcblxuICB0aGlzLnNpbl9waGkgPSBNYXRoLnNpbihsYXQpO1xuICB0aGlzLmNvc19waGkgPSBNYXRoLmNvcyhsYXQpO1xuXG4gIHZhciBxcyA9IHFzZm56KHRoaXMuZTMsIHRoaXMuc2luX3BoaSwgdGhpcy5jb3NfcGhpKTtcbiAgdmFyIHJoMSA9IHRoaXMuYSAqIE1hdGguc3FydCh0aGlzLmMgLSB0aGlzLm5zMCAqIHFzKSAvIHRoaXMubnMwO1xuICB2YXIgdGhldGEgPSB0aGlzLm5zMCAqIGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciB4ID0gcmgxICogTWF0aC5zaW4odGhldGEpICsgdGhpcy54MDtcbiAgdmFyIHkgPSB0aGlzLnJoIC0gcmgxICogTWF0aC5jb3ModGhldGEpICsgdGhpcy55MDtcblxuICBwLnggPSB4O1xuICBwLnkgPSB5O1xuICByZXR1cm4gcDtcbn07XG5cblxuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICB2YXIgcmgxLCBxcywgY29uLCB0aGV0YSwgbG9uLCBsYXQ7XG5cbiAgcC54IC09IHRoaXMueDA7XG4gIHAueSA9IHRoaXMucmggLSBwLnkgKyB0aGlzLnkwO1xuICBpZiAodGhpcy5uczAgPj0gMCkge1xuICAgIHJoMSA9IE1hdGguc3FydChwLnggKiBwLnggKyBwLnkgKiBwLnkpO1xuICAgIGNvbiA9IDE7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmgxID0gLU1hdGguc3FydChwLnggKiBwLnggKyBwLnkgKiBwLnkpO1xuICAgIGNvbiA9IC0xO1xuICB9XG4gIHRoZXRhID0gMDtcbiAgaWYgKHJoMSAhPT0gMCkge1xuICAgIHRoZXRhID0gTWF0aC5hdGFuMihjb24gKiBwLngsIGNvbiAqIHAueSk7XG4gIH1cbiAgY29uID0gcmgxICogdGhpcy5uczAgLyB0aGlzLmE7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGxhdCA9IE1hdGguYXNpbigodGhpcy5jIC0gY29uICogY29uKSAvICgyICogdGhpcy5uczApKTtcbiAgfVxuICBlbHNlIHtcbiAgICBxcyA9ICh0aGlzLmMgLSBjb24gKiBjb24pIC8gdGhpcy5uczA7XG4gICAgbGF0ID0gdGhpcy5waGkxeih0aGlzLmUzLCBxcyk7XG4gIH1cblxuICBsb24gPSBhZGp1c3RfbG9uKHRoZXRhIC8gdGhpcy5uczAgKyB0aGlzLmxvbmcwKTtcbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcblxuLyogRnVuY3Rpb24gdG8gY29tcHV0ZSBwaGkxLCB0aGUgbGF0aXR1ZGUgZm9yIHRoZSBpbnZlcnNlIG9mIHRoZVxuICAgQWxiZXJzIENvbmljYWwgRXF1YWwtQXJlYSBwcm9qZWN0aW9uLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLnBoaTF6ID0gZnVuY3Rpb24oZWNjZW50LCBxcykge1xuICB2YXIgc2lucGhpLCBjb3NwaGksIGNvbiwgY29tLCBkcGhpO1xuICB2YXIgcGhpID0gYXNpbnooMC41ICogcXMpO1xuICBpZiAoZWNjZW50IDwgRVBTTE4pIHtcbiAgICByZXR1cm4gcGhpO1xuICB9XG5cbiAgdmFyIGVjY250cyA9IGVjY2VudCAqIGVjY2VudDtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMjU7IGkrKykge1xuICAgIHNpbnBoaSA9IE1hdGguc2luKHBoaSk7XG4gICAgY29zcGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICBjb24gPSBlY2NlbnQgKiBzaW5waGk7XG4gICAgY29tID0gMSAtIGNvbiAqIGNvbjtcbiAgICBkcGhpID0gMC41ICogY29tICogY29tIC8gY29zcGhpICogKHFzIC8gKDEgLSBlY2NudHMpIC0gc2lucGhpIC8gY29tICsgMC41IC8gZWNjZW50ICogTWF0aC5sb2coKDEgLSBjb24pIC8gKDEgKyBjb24pKSk7XG4gICAgcGhpID0gcGhpICsgZHBoaTtcbiAgICBpZiAoTWF0aC5hYnMoZHBoaSkgPD0gMWUtNykge1xuICAgICAgcmV0dXJuIHBoaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIkFsYmVyc19Db25pY19FcXVhbF9BcmVhXCIsIFwiQWxiZXJzXCIsIFwiYWVhXCJdO1xuIiwidmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIG1sZm4gPSByZXF1aXJlKCcuLi9jb21tb24vbWxmbicpO1xudmFyIGUwZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTBmbicpO1xudmFyIGUxZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTFmbicpO1xudmFyIGUyZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTJmbicpO1xudmFyIGUzZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTNmbicpO1xudmFyIGdOID0gcmVxdWlyZSgnLi4vY29tbW9uL2dOJyk7XG52YXIgYXNpbnogPSByZXF1aXJlKCcuLi9jb21tb24vYXNpbnonKTtcbnZhciBpbWxmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9pbWxmbicpO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuc2luX3AxMiA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gIHRoaXMuY29zX3AxMiA9IE1hdGguY29zKHRoaXMubGF0MCk7XG59O1xuXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciBzaW5waGkgPSBNYXRoLnNpbihwLnkpO1xuICB2YXIgY29zcGhpID0gTWF0aC5jb3MocC55KTtcbiAgdmFyIGRsb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICB2YXIgZTAsIGUxLCBlMiwgZTMsIE1scCwgTWwsIHRhbnBoaSwgTmwxLCBObCwgcHNpLCBBeiwgRywgSCwgR0gsIEhzLCBjLCBrcCwgY29zX2MsIHMsIHMyLCBzMywgczQsIHM1O1xuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBpZiAoTWF0aC5hYnModGhpcy5zaW5fcDEyIC0gMSkgPD0gRVBTTE4pIHtcbiAgICAgIC8vTm9ydGggUG9sZSBjYXNlXG4gICAgICBwLnggPSB0aGlzLngwICsgdGhpcy5hICogKEhBTEZfUEkgLSBsYXQpICogTWF0aC5zaW4oZGxvbik7XG4gICAgICBwLnkgPSB0aGlzLnkwIC0gdGhpcy5hICogKEhBTEZfUEkgLSBsYXQpICogTWF0aC5jb3MoZGxvbik7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZWxzZSBpZiAoTWF0aC5hYnModGhpcy5zaW5fcDEyICsgMSkgPD0gRVBTTE4pIHtcbiAgICAgIC8vU291dGggUG9sZSBjYXNlXG4gICAgICBwLnggPSB0aGlzLngwICsgdGhpcy5hICogKEhBTEZfUEkgKyBsYXQpICogTWF0aC5zaW4oZGxvbik7XG4gICAgICBwLnkgPSB0aGlzLnkwICsgdGhpcy5hICogKEhBTEZfUEkgKyBsYXQpICogTWF0aC5jb3MoZGxvbik7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvL2RlZmF1bHQgY2FzZVxuICAgICAgY29zX2MgPSB0aGlzLnNpbl9wMTIgKiBzaW5waGkgKyB0aGlzLmNvc19wMTIgKiBjb3NwaGkgKiBNYXRoLmNvcyhkbG9uKTtcbiAgICAgIGMgPSBNYXRoLmFjb3MoY29zX2MpO1xuICAgICAga3AgPSBjIC8gTWF0aC5zaW4oYyk7XG4gICAgICBwLnggPSB0aGlzLngwICsgdGhpcy5hICoga3AgKiBjb3NwaGkgKiBNYXRoLnNpbihkbG9uKTtcbiAgICAgIHAueSA9IHRoaXMueTAgKyB0aGlzLmEgKiBrcCAqICh0aGlzLmNvc19wMTIgKiBzaW5waGkgLSB0aGlzLnNpbl9wMTIgKiBjb3NwaGkgKiBNYXRoLmNvcyhkbG9uKSk7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgZTAgPSBlMGZuKHRoaXMuZXMpO1xuICAgIGUxID0gZTFmbih0aGlzLmVzKTtcbiAgICBlMiA9IGUyZm4odGhpcy5lcyk7XG4gICAgZTMgPSBlM2ZuKHRoaXMuZXMpO1xuICAgIGlmIChNYXRoLmFicyh0aGlzLnNpbl9wMTIgLSAxKSA8PSBFUFNMTikge1xuICAgICAgLy9Ob3J0aCBQb2xlIGNhc2VcbiAgICAgIE1scCA9IHRoaXMuYSAqIG1sZm4oZTAsIGUxLCBlMiwgZTMsIEhBTEZfUEkpO1xuICAgICAgTWwgPSB0aGlzLmEgKiBtbGZuKGUwLCBlMSwgZTIsIGUzLCBsYXQpO1xuICAgICAgcC54ID0gdGhpcy54MCArIChNbHAgLSBNbCkgKiBNYXRoLnNpbihkbG9uKTtcbiAgICAgIHAueSA9IHRoaXMueTAgLSAoTWxwIC0gTWwpICogTWF0aC5jb3MoZGxvbik7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZWxzZSBpZiAoTWF0aC5hYnModGhpcy5zaW5fcDEyICsgMSkgPD0gRVBTTE4pIHtcbiAgICAgIC8vU291dGggUG9sZSBjYXNlXG4gICAgICBNbHAgPSB0aGlzLmEgKiBtbGZuKGUwLCBlMSwgZTIsIGUzLCBIQUxGX1BJKTtcbiAgICAgIE1sID0gdGhpcy5hICogbWxmbihlMCwgZTEsIGUyLCBlMywgbGF0KTtcbiAgICAgIHAueCA9IHRoaXMueDAgKyAoTWxwICsgTWwpICogTWF0aC5zaW4oZGxvbik7XG4gICAgICBwLnkgPSB0aGlzLnkwICsgKE1scCArIE1sKSAqIE1hdGguY29zKGRsb24pO1xuICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy9EZWZhdWx0IGNhc2VcbiAgICAgIHRhbnBoaSA9IHNpbnBoaSAvIGNvc3BoaTtcbiAgICAgIE5sMSA9IGdOKHRoaXMuYSwgdGhpcy5lLCB0aGlzLnNpbl9wMTIpO1xuICAgICAgTmwgPSBnTih0aGlzLmEsIHRoaXMuZSwgc2lucGhpKTtcbiAgICAgIHBzaSA9IE1hdGguYXRhbigoMSAtIHRoaXMuZXMpICogdGFucGhpICsgdGhpcy5lcyAqIE5sMSAqIHRoaXMuc2luX3AxMiAvIChObCAqIGNvc3BoaSkpO1xuICAgICAgQXogPSBNYXRoLmF0YW4yKE1hdGguc2luKGRsb24pLCB0aGlzLmNvc19wMTIgKiBNYXRoLnRhbihwc2kpIC0gdGhpcy5zaW5fcDEyICogTWF0aC5jb3MoZGxvbikpO1xuICAgICAgaWYgKEF6ID09PSAwKSB7XG4gICAgICAgIHMgPSBNYXRoLmFzaW4odGhpcy5jb3NfcDEyICogTWF0aC5zaW4ocHNpKSAtIHRoaXMuc2luX3AxMiAqIE1hdGguY29zKHBzaSkpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoTWF0aC5hYnMoTWF0aC5hYnMoQXopIC0gTWF0aC5QSSkgPD0gRVBTTE4pIHtcbiAgICAgICAgcyA9IC1NYXRoLmFzaW4odGhpcy5jb3NfcDEyICogTWF0aC5zaW4ocHNpKSAtIHRoaXMuc2luX3AxMiAqIE1hdGguY29zKHBzaSkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHMgPSBNYXRoLmFzaW4oTWF0aC5zaW4oZGxvbikgKiBNYXRoLmNvcyhwc2kpIC8gTWF0aC5zaW4oQXopKTtcbiAgICAgIH1cbiAgICAgIEcgPSB0aGlzLmUgKiB0aGlzLnNpbl9wMTIgLyBNYXRoLnNxcnQoMSAtIHRoaXMuZXMpO1xuICAgICAgSCA9IHRoaXMuZSAqIHRoaXMuY29zX3AxMiAqIE1hdGguY29zKEF6KSAvIE1hdGguc3FydCgxIC0gdGhpcy5lcyk7XG4gICAgICBHSCA9IEcgKiBIO1xuICAgICAgSHMgPSBIICogSDtcbiAgICAgIHMyID0gcyAqIHM7XG4gICAgICBzMyA9IHMyICogcztcbiAgICAgIHM0ID0gczMgKiBzO1xuICAgICAgczUgPSBzNCAqIHM7XG4gICAgICBjID0gTmwxICogcyAqICgxIC0gczIgKiBIcyAqICgxIC0gSHMpIC8gNiArIHMzIC8gOCAqIEdIICogKDEgLSAyICogSHMpICsgczQgLyAxMjAgKiAoSHMgKiAoNCAtIDcgKiBIcykgLSAzICogRyAqIEcgKiAoMSAtIDcgKiBIcykpIC0gczUgLyA0OCAqIEdIKTtcbiAgICAgIHAueCA9IHRoaXMueDAgKyBjICogTWF0aC5zaW4oQXopO1xuICAgICAgcC55ID0gdGhpcy55MCArIGMgKiBNYXRoLmNvcyhBeik7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gIH1cblxuXG59O1xuXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgdmFyIHJoLCB6LCBzaW56LCBjb3N6LCBsb24sIGxhdCwgY29uLCBlMCwgZTEsIGUyLCBlMywgTWxwLCBNLCBOMSwgcHNpLCBBeiwgY29zQXosIHRtcCwgQSwgQiwgRCwgRWUsIEY7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHJoID0gTWF0aC5zcXJ0KHAueCAqIHAueCArIHAueSAqIHAueSk7XG4gICAgaWYgKHJoID4gKDIgKiBIQUxGX1BJICogdGhpcy5hKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB6ID0gcmggLyB0aGlzLmE7XG5cbiAgICBzaW56ID0gTWF0aC5zaW4oeik7XG4gICAgY29zeiA9IE1hdGguY29zKHopO1xuXG4gICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICBpZiAoTWF0aC5hYnMocmgpIDw9IEVQU0xOKSB7XG4gICAgICBsYXQgPSB0aGlzLmxhdDA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbGF0ID0gYXNpbnooY29zeiAqIHRoaXMuc2luX3AxMiArIChwLnkgKiBzaW56ICogdGhpcy5jb3NfcDEyKSAvIHJoKTtcbiAgICAgIGNvbiA9IE1hdGguYWJzKHRoaXMubGF0MCkgLSBIQUxGX1BJO1xuICAgICAgaWYgKE1hdGguYWJzKGNvbikgPD0gRVBTTE4pIHtcbiAgICAgICAgaWYgKHRoaXMubGF0MCA+PSAwKSB7XG4gICAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLngsIC0gcC55KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwIC0gTWF0aC5hdGFuMigtcC54LCBwLnkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8qY29uID0gY29zeiAtIHRoaXMuc2luX3AxMiAqIE1hdGguc2luKGxhdCk7XG4gICAgICAgIGlmICgoTWF0aC5hYnMoY29uKSA8IEVQU0xOKSAmJiAoTWF0aC5hYnMocC54KSA8IEVQU0xOKSkge1xuICAgICAgICAgIC8vbm8tb3AsIGp1c3Qga2VlcCB0aGUgbG9uIHZhbHVlIGFzIGlzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHRlbXAgPSBNYXRoLmF0YW4yKChwLnggKiBzaW56ICogdGhpcy5jb3NfcDEyKSwgKGNvbiAqIHJoKSk7XG4gICAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMigocC54ICogc2lueiAqIHRoaXMuY29zX3AxMiksIChjb24gKiByaCkpKTtcbiAgICAgICAgfSovXG4gICAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXRhbjIocC54ICogc2lueiwgcmggKiB0aGlzLmNvc19wMTIgKiBjb3N6IC0gcC55ICogdGhpcy5zaW5fcDEyICogc2lueikpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHAueCA9IGxvbjtcbiAgICBwLnkgPSBsYXQ7XG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgZWxzZSB7XG4gICAgZTAgPSBlMGZuKHRoaXMuZXMpO1xuICAgIGUxID0gZTFmbih0aGlzLmVzKTtcbiAgICBlMiA9IGUyZm4odGhpcy5lcyk7XG4gICAgZTMgPSBlM2ZuKHRoaXMuZXMpO1xuICAgIGlmIChNYXRoLmFicyh0aGlzLnNpbl9wMTIgLSAxKSA8PSBFUFNMTikge1xuICAgICAgLy9Ob3J0aCBwb2xlIGNhc2VcbiAgICAgIE1scCA9IHRoaXMuYSAqIG1sZm4oZTAsIGUxLCBlMiwgZTMsIEhBTEZfUEkpO1xuICAgICAgcmggPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICAgIE0gPSBNbHAgLSByaDtcbiAgICAgIGxhdCA9IGltbGZuKE0gLyB0aGlzLmEsIGUwLCBlMSwgZTIsIGUzKTtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXRhbjIocC54LCAtIDEgKiBwLnkpKTtcbiAgICAgIHAueCA9IGxvbjtcbiAgICAgIHAueSA9IGxhdDtcbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBlbHNlIGlmIChNYXRoLmFicyh0aGlzLnNpbl9wMTIgKyAxKSA8PSBFUFNMTikge1xuICAgICAgLy9Tb3V0aCBwb2xlIGNhc2VcbiAgICAgIE1scCA9IHRoaXMuYSAqIG1sZm4oZTAsIGUxLCBlMiwgZTMsIEhBTEZfUEkpO1xuICAgICAgcmggPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICAgIE0gPSByaCAtIE1scDtcblxuICAgICAgbGF0ID0gaW1sZm4oTSAvIHRoaXMuYSwgZTAsIGUxLCBlMiwgZTMpO1xuICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLngsIHAueSkpO1xuICAgICAgcC54ID0gbG9uO1xuICAgICAgcC55ID0gbGF0O1xuICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy9kZWZhdWx0IGNhc2VcbiAgICAgIHJoID0gTWF0aC5zcXJ0KHAueCAqIHAueCArIHAueSAqIHAueSk7XG4gICAgICBBeiA9IE1hdGguYXRhbjIocC54LCBwLnkpO1xuICAgICAgTjEgPSBnTih0aGlzLmEsIHRoaXMuZSwgdGhpcy5zaW5fcDEyKTtcbiAgICAgIGNvc0F6ID0gTWF0aC5jb3MoQXopO1xuICAgICAgdG1wID0gdGhpcy5lICogdGhpcy5jb3NfcDEyICogY29zQXo7XG4gICAgICBBID0gLXRtcCAqIHRtcCAvICgxIC0gdGhpcy5lcyk7XG4gICAgICBCID0gMyAqIHRoaXMuZXMgKiAoMSAtIEEpICogdGhpcy5zaW5fcDEyICogdGhpcy5jb3NfcDEyICogY29zQXogLyAoMSAtIHRoaXMuZXMpO1xuICAgICAgRCA9IHJoIC8gTjE7XG4gICAgICBFZSA9IEQgLSBBICogKDEgKyBBKSAqIE1hdGgucG93KEQsIDMpIC8gNiAtIEIgKiAoMSArIDMgKiBBKSAqIE1hdGgucG93KEQsIDQpIC8gMjQ7XG4gICAgICBGID0gMSAtIEEgKiBFZSAqIEVlIC8gMiAtIEQgKiBFZSAqIEVlICogRWUgLyA2O1xuICAgICAgcHNpID0gTWF0aC5hc2luKHRoaXMuc2luX3AxMiAqIE1hdGguY29zKEVlKSArIHRoaXMuY29zX3AxMiAqIE1hdGguc2luKEVlKSAqIGNvc0F6KTtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXNpbihNYXRoLnNpbihBeikgKiBNYXRoLnNpbihFZSkgLyBNYXRoLmNvcyhwc2kpKSk7XG4gICAgICBsYXQgPSBNYXRoLmF0YW4oKDEgLSB0aGlzLmVzICogRiAqIHRoaXMuc2luX3AxMiAvIE1hdGguc2luKHBzaSkpICogTWF0aC50YW4ocHNpKSAvICgxIC0gdGhpcy5lcykpO1xuICAgICAgcC54ID0gbG9uO1xuICAgICAgcC55ID0gbGF0O1xuICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICB9XG5cbn07XG5leHBvcnRzLm5hbWVzID0gW1wiQXppbXV0aGFsX0VxdWlkaXN0YW50XCIsIFwiYWVxZFwiXTtcbiIsInZhciBtbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL21sZm4nKTtcbnZhciBlMGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UwZm4nKTtcbnZhciBlMWZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UxZm4nKTtcbnZhciBlMmZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UyZm4nKTtcbnZhciBlM2ZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UzZm4nKTtcbnZhciBnTiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9nTicpO1xudmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIGFkanVzdF9sYXQgPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xhdCcpO1xudmFyIGltbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2ltbGZuJyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCF0aGlzLnNwaGVyZSkge1xuICAgIHRoaXMuZTAgPSBlMGZuKHRoaXMuZXMpO1xuICAgIHRoaXMuZTEgPSBlMWZuKHRoaXMuZXMpO1xuICAgIHRoaXMuZTIgPSBlMmZuKHRoaXMuZXMpO1xuICAgIHRoaXMuZTMgPSBlM2ZuKHRoaXMuZXMpO1xuICAgIHRoaXMubWwwID0gdGhpcy5hICogbWxmbih0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzLCB0aGlzLmxhdDApO1xuICB9XG59O1xuXG5cblxuLyogQ2Fzc2luaSBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuXG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHZhciB4LCB5O1xuICB2YXIgbGFtID0gcC54O1xuICB2YXIgcGhpID0gcC55O1xuICBsYW0gPSBhZGp1c3RfbG9uKGxhbSAtIHRoaXMubG9uZzApO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHggPSB0aGlzLmEgKiBNYXRoLmFzaW4oTWF0aC5jb3MocGhpKSAqIE1hdGguc2luKGxhbSkpO1xuICAgIHkgPSB0aGlzLmEgKiAoTWF0aC5hdGFuMihNYXRoLnRhbihwaGkpLCBNYXRoLmNvcyhsYW0pKSAtIHRoaXMubGF0MCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgLy9lbGxpcHNvaWRcbiAgICB2YXIgc2lucGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICB2YXIgY29zcGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICB2YXIgbmwgPSBnTih0aGlzLmEsIHRoaXMuZSwgc2lucGhpKTtcbiAgICB2YXIgdGwgPSBNYXRoLnRhbihwaGkpICogTWF0aC50YW4ocGhpKTtcbiAgICB2YXIgYWwgPSBsYW0gKiBNYXRoLmNvcyhwaGkpO1xuICAgIHZhciBhc3EgPSBhbCAqIGFsO1xuICAgIHZhciBjbCA9IHRoaXMuZXMgKiBjb3NwaGkgKiBjb3NwaGkgLyAoMSAtIHRoaXMuZXMpO1xuICAgIHZhciBtbCA9IHRoaXMuYSAqIG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgcGhpKTtcblxuICAgIHggPSBubCAqIGFsICogKDEgLSBhc3EgKiB0bCAqICgxIC8gNiAtICg4IC0gdGwgKyA4ICogY2wpICogYXNxIC8gMTIwKSk7XG4gICAgeSA9IG1sIC0gdGhpcy5tbDAgKyBubCAqIHNpbnBoaSAvIGNvc3BoaSAqIGFzcSAqICgwLjUgKyAoNSAtIHRsICsgNiAqIGNsKSAqIGFzcSAvIDI0KTtcblxuXG4gIH1cblxuICBwLnggPSB4ICsgdGhpcy54MDtcbiAgcC55ID0geSArIHRoaXMueTA7XG4gIHJldHVybiBwO1xufTtcblxuLyogSW52ZXJzZSBlcXVhdGlvbnNcbiAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICBwLnggLT0gdGhpcy54MDtcbiAgcC55IC09IHRoaXMueTA7XG4gIHZhciB4ID0gcC54IC8gdGhpcy5hO1xuICB2YXIgeSA9IHAueSAvIHRoaXMuYTtcbiAgdmFyIHBoaSwgbGFtO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHZhciBkZCA9IHkgKyB0aGlzLmxhdDA7XG4gICAgcGhpID0gTWF0aC5hc2luKE1hdGguc2luKGRkKSAqIE1hdGguY29zKHgpKTtcbiAgICBsYW0gPSBNYXRoLmF0YW4yKE1hdGgudGFuKHgpLCBNYXRoLmNvcyhkZCkpO1xuICB9XG4gIGVsc2Uge1xuICAgIC8qIGVsbGlwc29pZCAqL1xuICAgIHZhciBtbDEgPSB0aGlzLm1sMCAvIHRoaXMuYSArIHk7XG4gICAgdmFyIHBoaTEgPSBpbWxmbihtbDEsIHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMpO1xuICAgIGlmIChNYXRoLmFicyhNYXRoLmFicyhwaGkxKSAtIEhBTEZfUEkpIDw9IEVQU0xOKSB7XG4gICAgICBwLnggPSB0aGlzLmxvbmcwO1xuICAgICAgcC55ID0gSEFMRl9QSTtcbiAgICAgIGlmICh5IDwgMCkge1xuICAgICAgICBwLnkgKj0gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgdmFyIG5sMSA9IGdOKHRoaXMuYSwgdGhpcy5lLCBNYXRoLnNpbihwaGkxKSk7XG5cbiAgICB2YXIgcmwxID0gbmwxICogbmwxICogbmwxIC8gdGhpcy5hIC8gdGhpcy5hICogKDEgLSB0aGlzLmVzKTtcbiAgICB2YXIgdGwxID0gTWF0aC5wb3coTWF0aC50YW4ocGhpMSksIDIpO1xuICAgIHZhciBkbCA9IHggKiB0aGlzLmEgLyBubDE7XG4gICAgdmFyIGRzcSA9IGRsICogZGw7XG4gICAgcGhpID0gcGhpMSAtIG5sMSAqIE1hdGgudGFuKHBoaTEpIC8gcmwxICogZGwgKiBkbCAqICgwLjUgLSAoMSArIDMgKiB0bDEpICogZGwgKiBkbCAvIDI0KTtcbiAgICBsYW0gPSBkbCAqICgxIC0gZHNxICogKHRsMSAvIDMgKyAoMSArIDMgKiB0bDEpICogdGwxICogZHNxIC8gMTUpKSAvIE1hdGguY29zKHBoaTEpO1xuXG4gIH1cblxuICBwLnggPSBhZGp1c3RfbG9uKGxhbSArIHRoaXMubG9uZzApO1xuICBwLnkgPSBhZGp1c3RfbGF0KHBoaSk7XG4gIHJldHVybiBwO1xuXG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIkNhc3NpbmlcIiwgXCJDYXNzaW5pX1NvbGRuZXJcIiwgXCJjYXNzXCJdOyIsInZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBxc2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9xc2ZueicpO1xudmFyIG1zZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL21zZm56Jyk7XG52YXIgaXFzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL2lxc2ZueicpO1xuLypcbiAgcmVmZXJlbmNlOiAgXG4gICAgXCJDYXJ0b2dyYXBoaWMgUHJvamVjdGlvbiBQcm9jZWR1cmVzIGZvciB0aGUgVU5JWCBFbnZpcm9ubWVudC1cbiAgICBBIFVzZXIncyBNYW51YWxcIiBieSBHZXJhbGQgSS4gRXZlbmRlbixcbiAgICBVU0dTIE9wZW4gRmlsZSBSZXBvcnQgOTAtMjg0YW5kIFJlbGVhc2UgNCBJbnRlcmltIFJlcG9ydHMgKDIwMDMpXG4qL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIC8vbm8tb3BcbiAgaWYgKCF0aGlzLnNwaGVyZSkge1xuICAgIHRoaXMuazAgPSBtc2Zueih0aGlzLmUsIE1hdGguc2luKHRoaXMubGF0X3RzKSwgTWF0aC5jb3ModGhpcy5sYXRfdHMpKTtcbiAgfVxufTtcblxuXG4vKiBDeWxpbmRyaWNhbCBFcXVhbCBBcmVhIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciB4LCB5O1xuICAvKiBGb3J3YXJkIGVxdWF0aW9uc1xuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHggPSB0aGlzLngwICsgdGhpcy5hICogZGxvbiAqIE1hdGguY29zKHRoaXMubGF0X3RzKTtcbiAgICB5ID0gdGhpcy55MCArIHRoaXMuYSAqIE1hdGguc2luKGxhdCkgLyBNYXRoLmNvcyh0aGlzLmxhdF90cyk7XG4gIH1cbiAgZWxzZSB7XG4gICAgdmFyIHFzID0gcXNmbnoodGhpcy5lLCBNYXRoLnNpbihsYXQpKTtcbiAgICB4ID0gdGhpcy54MCArIHRoaXMuYSAqIHRoaXMuazAgKiBkbG9uO1xuICAgIHkgPSB0aGlzLnkwICsgdGhpcy5hICogcXMgKiAwLjUgLyB0aGlzLmswO1xuICB9XG5cbiAgcC54ID0geDtcbiAgcC55ID0geTtcbiAgcmV0dXJuIHA7XG59O1xuXG4vKiBDeWxpbmRyaWNhbCBFcXVhbCBBcmVhIGludmVyc2UgZXF1YXRpb25zLS1tYXBwaW5nIHgseSB0byBsYXQvbG9uZ1xuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgdmFyIGxvbiwgbGF0O1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIChwLnggLyB0aGlzLmEpIC8gTWF0aC5jb3ModGhpcy5sYXRfdHMpKTtcbiAgICBsYXQgPSBNYXRoLmFzaW4oKHAueSAvIHRoaXMuYSkgKiBNYXRoLmNvcyh0aGlzLmxhdF90cykpO1xuICB9XG4gIGVsc2Uge1xuICAgIGxhdCA9IGlxc2Zueih0aGlzLmUsIDIgKiBwLnkgKiB0aGlzLmswIC8gdGhpcy5hKTtcbiAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBwLnggLyAodGhpcy5hICogdGhpcy5rMCkpO1xuICB9XG5cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJjZWFcIl07XG4iLCJ2YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgYWRqdXN0X2xhdCA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbGF0Jyk7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICB0aGlzLngwID0gdGhpcy54MCB8fCAwO1xuICB0aGlzLnkwID0gdGhpcy55MCB8fCAwO1xuICB0aGlzLmxhdDAgPSB0aGlzLmxhdDAgfHwgMDtcbiAgdGhpcy5sb25nMCA9IHRoaXMubG9uZzAgfHwgMDtcbiAgdGhpcy5sYXRfdHMgPSB0aGlzLmxhdF90cyB8fCAwO1xuICB0aGlzLnRpdGxlID0gdGhpcy50aXRsZSB8fCBcIkVxdWlkaXN0YW50IEN5bGluZHJpY2FsIChQbGF0ZSBDYXJyZSlcIjtcblxuICB0aGlzLnJjID0gTWF0aC5jb3ModGhpcy5sYXRfdHMpO1xufTtcblxuXG4vLyBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG5cbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcblxuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciBkbGF0ID0gYWRqdXN0X2xhdChsYXQgLSB0aGlzLmxhdDApO1xuICBwLnggPSB0aGlzLngwICsgKHRoaXMuYSAqIGRsb24gKiB0aGlzLnJjKTtcbiAgcC55ID0gdGhpcy55MCArICh0aGlzLmEgKiBkbGF0KTtcbiAgcmV0dXJuIHA7XG59O1xuXG4vLyBpbnZlcnNlIGVxdWF0aW9ucy0tbWFwcGluZyB4LHkgdG8gbGF0L2xvbmdcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG5cbiAgdmFyIHggPSBwLng7XG4gIHZhciB5ID0gcC55O1xuXG4gIHAueCA9IGFkanVzdF9sb24odGhpcy5sb25nMCArICgoeCAtIHRoaXMueDApIC8gKHRoaXMuYSAqIHRoaXMucmMpKSk7XG4gIHAueSA9IGFkanVzdF9sYXQodGhpcy5sYXQwICsgKCh5IC0gdGhpcy55MCkgLyAodGhpcy5hKSkpO1xuICByZXR1cm4gcDtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiRXF1aXJlY3Rhbmd1bGFyXCIsIFwiRXF1aWRpc3RhbnRfQ3lsaW5kcmljYWxcIiwgXCJlcWNcIl07XG4iLCJ2YXIgZTBmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMGZuJyk7XG52YXIgZTFmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMWZuJyk7XG52YXIgZTJmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMmZuJyk7XG52YXIgZTNmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lM2ZuJyk7XG52YXIgbXNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vbXNmbnonKTtcbnZhciBtbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL21sZm4nKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBhZGp1c3RfbGF0ID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sYXQnKTtcbnZhciBpbWxmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9pbWxmbicpO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gIC8qIFBsYWNlIHBhcmFtZXRlcnMgaW4gc3RhdGljIHN0b3JhZ2UgZm9yIGNvbW1vbiB1c2VcbiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAvLyBTdGFuZGFyZCBQYXJhbGxlbHMgY2Fubm90IGJlIGVxdWFsIGFuZCBvbiBvcHBvc2l0ZSBzaWRlcyBvZiB0aGUgZXF1YXRvclxuICBpZiAoTWF0aC5hYnModGhpcy5sYXQxICsgdGhpcy5sYXQyKSA8IEVQU0xOKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMubGF0MiA9IHRoaXMubGF0MiB8fCB0aGlzLmxhdDE7XG4gIHRoaXMudGVtcCA9IHRoaXMuYiAvIHRoaXMuYTtcbiAgdGhpcy5lcyA9IDEgLSBNYXRoLnBvdyh0aGlzLnRlbXAsIDIpO1xuICB0aGlzLmUgPSBNYXRoLnNxcnQodGhpcy5lcyk7XG4gIHRoaXMuZTAgPSBlMGZuKHRoaXMuZXMpO1xuICB0aGlzLmUxID0gZTFmbih0aGlzLmVzKTtcbiAgdGhpcy5lMiA9IGUyZm4odGhpcy5lcyk7XG4gIHRoaXMuZTMgPSBlM2ZuKHRoaXMuZXMpO1xuXG4gIHRoaXMuc2lucGhpID0gTWF0aC5zaW4odGhpcy5sYXQxKTtcbiAgdGhpcy5jb3NwaGkgPSBNYXRoLmNvcyh0aGlzLmxhdDEpO1xuXG4gIHRoaXMubXMxID0gbXNmbnoodGhpcy5lLCB0aGlzLnNpbnBoaSwgdGhpcy5jb3NwaGkpO1xuICB0aGlzLm1sMSA9IG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgdGhpcy5sYXQxKTtcblxuICBpZiAoTWF0aC5hYnModGhpcy5sYXQxIC0gdGhpcy5sYXQyKSA8IEVQU0xOKSB7XG4gICAgdGhpcy5ucyA9IHRoaXMuc2lucGhpO1xuICB9XG4gIGVsc2Uge1xuICAgIHRoaXMuc2lucGhpID0gTWF0aC5zaW4odGhpcy5sYXQyKTtcbiAgICB0aGlzLmNvc3BoaSA9IE1hdGguY29zKHRoaXMubGF0Mik7XG4gICAgdGhpcy5tczIgPSBtc2Zueih0aGlzLmUsIHRoaXMuc2lucGhpLCB0aGlzLmNvc3BoaSk7XG4gICAgdGhpcy5tbDIgPSBtbGZuKHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMsIHRoaXMubGF0Mik7XG4gICAgdGhpcy5ucyA9ICh0aGlzLm1zMSAtIHRoaXMubXMyKSAvICh0aGlzLm1sMiAtIHRoaXMubWwxKTtcbiAgfVxuICB0aGlzLmcgPSB0aGlzLm1sMSArIHRoaXMubXMxIC8gdGhpcy5ucztcbiAgdGhpcy5tbDAgPSBtbGZuKHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMsIHRoaXMubGF0MCk7XG4gIHRoaXMucmggPSB0aGlzLmEgKiAodGhpcy5nIC0gdGhpcy5tbDApO1xufTtcblxuXG4vKiBFcXVpZGlzdGFudCBDb25pYyBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICB2YXIgcmgxO1xuXG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHJoMSA9IHRoaXMuYSAqICh0aGlzLmcgLSBsYXQpO1xuICB9XG4gIGVsc2Uge1xuICAgIHZhciBtbCA9IG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgbGF0KTtcbiAgICByaDEgPSB0aGlzLmEgKiAodGhpcy5nIC0gbWwpO1xuICB9XG4gIHZhciB0aGV0YSA9IHRoaXMubnMgKiBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICB2YXIgeCA9IHRoaXMueDAgKyByaDEgKiBNYXRoLnNpbih0aGV0YSk7XG4gIHZhciB5ID0gdGhpcy55MCArIHRoaXMucmggLSByaDEgKiBNYXRoLmNvcyh0aGV0YSk7XG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG4gIHJldHVybiBwO1xufTtcblxuLyogSW52ZXJzZSBlcXVhdGlvbnNcbiAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICBwLnggLT0gdGhpcy54MDtcbiAgcC55ID0gdGhpcy5yaCAtIHAueSArIHRoaXMueTA7XG4gIHZhciBjb24sIHJoMSwgbGF0LCBsb247XG4gIGlmICh0aGlzLm5zID49IDApIHtcbiAgICByaDEgPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICBjb24gPSAxO1xuICB9XG4gIGVsc2Uge1xuICAgIHJoMSA9IC1NYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICBjb24gPSAtMTtcbiAgfVxuICB2YXIgdGhldGEgPSAwO1xuICBpZiAocmgxICE9PSAwKSB7XG4gICAgdGhldGEgPSBNYXRoLmF0YW4yKGNvbiAqIHAueCwgY29uICogcC55KTtcbiAgfVxuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIHRoZXRhIC8gdGhpcy5ucyk7XG4gICAgbGF0ID0gYWRqdXN0X2xhdCh0aGlzLmcgLSByaDEgLyB0aGlzLmEpO1xuICAgIHAueCA9IGxvbjtcbiAgICBwLnkgPSBsYXQ7XG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgZWxzZSB7XG4gICAgdmFyIG1sID0gdGhpcy5nIC0gcmgxIC8gdGhpcy5hO1xuICAgIGxhdCA9IGltbGZuKG1sLCB0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzKTtcbiAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyB0aGV0YSAvIHRoaXMubnMpO1xuICAgIHAueCA9IGxvbjtcbiAgICBwLnkgPSBsYXQ7XG4gICAgcmV0dXJuIHA7XG4gIH1cblxufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJFcXVpZGlzdGFudF9Db25pY1wiLCBcImVxZGNcIl07XG4iLCJ2YXIgRk9SVFBJID0gTWF0aC5QSS80O1xudmFyIHNyYXQgPSByZXF1aXJlKCcuLi9jb21tb24vc3JhdCcpO1xudmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG52YXIgTUFYX0lURVIgPSAyMDtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc3BoaSA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gIHZhciBjcGhpID0gTWF0aC5jb3ModGhpcy5sYXQwKTtcbiAgY3BoaSAqPSBjcGhpO1xuICB0aGlzLnJjID0gTWF0aC5zcXJ0KDEgLSB0aGlzLmVzKSAvICgxIC0gdGhpcy5lcyAqIHNwaGkgKiBzcGhpKTtcbiAgdGhpcy5DID0gTWF0aC5zcXJ0KDEgKyB0aGlzLmVzICogY3BoaSAqIGNwaGkgLyAoMSAtIHRoaXMuZXMpKTtcbiAgdGhpcy5waGljMCA9IE1hdGguYXNpbihzcGhpIC8gdGhpcy5DKTtcbiAgdGhpcy5yYXRleHAgPSAwLjUgKiB0aGlzLkMgKiB0aGlzLmU7XG4gIHRoaXMuSyA9IE1hdGgudGFuKDAuNSAqIHRoaXMucGhpYzAgKyBGT1JUUEkpIC8gKE1hdGgucG93KE1hdGgudGFuKDAuNSAqIHRoaXMubGF0MCArIEZPUlRQSSksIHRoaXMuQykgKiBzcmF0KHRoaXMuZSAqIHNwaGksIHRoaXMucmF0ZXhwKSk7XG59O1xuXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG5cbiAgcC55ID0gMiAqIE1hdGguYXRhbih0aGlzLksgKiBNYXRoLnBvdyhNYXRoLnRhbigwLjUgKiBsYXQgKyBGT1JUUEkpLCB0aGlzLkMpICogc3JhdCh0aGlzLmUgKiBNYXRoLnNpbihsYXQpLCB0aGlzLnJhdGV4cCkpIC0gSEFMRl9QSTtcbiAgcC54ID0gdGhpcy5DICogbG9uO1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIERFTF9UT0wgPSAxZS0xNDtcbiAgdmFyIGxvbiA9IHAueCAvIHRoaXMuQztcbiAgdmFyIGxhdCA9IHAueTtcbiAgdmFyIG51bSA9IE1hdGgucG93KE1hdGgudGFuKDAuNSAqIGxhdCArIEZPUlRQSSkgLyB0aGlzLkssIDEgLyB0aGlzLkMpO1xuICBmb3IgKHZhciBpID0gTUFYX0lURVI7IGkgPiAwOyAtLWkpIHtcbiAgICBsYXQgPSAyICogTWF0aC5hdGFuKG51bSAqIHNyYXQodGhpcy5lICogTWF0aC5zaW4ocC55KSwgLSAwLjUgKiB0aGlzLmUpKSAtIEhBTEZfUEk7XG4gICAgaWYgKE1hdGguYWJzKGxhdCAtIHAueSkgPCBERUxfVE9MKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgcC55ID0gbGF0O1xuICB9XG4gIC8qIGNvbnZlcmdlbmNlIGZhaWxlZCAqL1xuICBpZiAoIWkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcImdhdXNzXCJdO1xuIiwidmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBhc2lueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hc2lueicpO1xuXG4vKlxuICByZWZlcmVuY2U6XG4gICAgV29sZnJhbSBNYXRod29ybGQgXCJHbm9tb25pYyBQcm9qZWN0aW9uXCJcbiAgICBodHRwOi8vbWF0aHdvcmxkLndvbGZyYW0uY29tL0dub21vbmljUHJvamVjdGlvbi5odG1sXG4gICAgQWNjZXNzZWQ6IDEydGggTm92ZW1iZXIgMjAwOVxuICAqL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgLyogUGxhY2UgcGFyYW1ldGVycyBpbiBzdGF0aWMgc3RvcmFnZSBmb3IgY29tbW9uIHVzZVxuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIHRoaXMuc2luX3AxNCA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gIHRoaXMuY29zX3AxNCA9IE1hdGguY29zKHRoaXMubGF0MCk7XG4gIC8vIEFwcHJveGltYXRpb24gZm9yIHByb2plY3RpbmcgcG9pbnRzIHRvIHRoZSBob3Jpem9uIChpbmZpbml0eSlcbiAgdGhpcy5pbmZpbml0eV9kaXN0ID0gMTAwMCAqIHRoaXMuYTtcbiAgdGhpcy5yYyA9IDE7XG59O1xuXG5cbi8qIEdub21vbmljIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBzaW5waGksIGNvc3BoaTsgLyogc2luIGFuZCBjb3MgdmFsdWUgICAgICAgICovXG4gIHZhciBkbG9uOyAvKiBkZWx0YSBsb25naXR1ZGUgdmFsdWUgICAgICAqL1xuICB2YXIgY29zbG9uOyAvKiBjb3Mgb2YgbG9uZ2l0dWRlICAgICAgICAqL1xuICB2YXIga3NwOyAvKiBzY2FsZSBmYWN0b3IgICAgICAgICAgKi9cbiAgdmFyIGc7XG4gIHZhciB4LCB5O1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICAvKiBGb3J3YXJkIGVxdWF0aW9uc1xuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICBkbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcblxuICBzaW5waGkgPSBNYXRoLnNpbihsYXQpO1xuICBjb3NwaGkgPSBNYXRoLmNvcyhsYXQpO1xuXG4gIGNvc2xvbiA9IE1hdGguY29zKGRsb24pO1xuICBnID0gdGhpcy5zaW5fcDE0ICogc2lucGhpICsgdGhpcy5jb3NfcDE0ICogY29zcGhpICogY29zbG9uO1xuICBrc3AgPSAxO1xuICBpZiAoKGcgPiAwKSB8fCAoTWF0aC5hYnMoZykgPD0gRVBTTE4pKSB7XG4gICAgeCA9IHRoaXMueDAgKyB0aGlzLmEgKiBrc3AgKiBjb3NwaGkgKiBNYXRoLnNpbihkbG9uKSAvIGc7XG4gICAgeSA9IHRoaXMueTAgKyB0aGlzLmEgKiBrc3AgKiAodGhpcy5jb3NfcDE0ICogc2lucGhpIC0gdGhpcy5zaW5fcDE0ICogY29zcGhpICogY29zbG9uKSAvIGc7XG4gIH1cbiAgZWxzZSB7XG5cbiAgICAvLyBQb2ludCBpcyBpbiB0aGUgb3Bwb3NpbmcgaGVtaXNwaGVyZSBhbmQgaXMgdW5wcm9qZWN0YWJsZVxuICAgIC8vIFdlIHN0aWxsIG5lZWQgdG8gcmV0dXJuIGEgcmVhc29uYWJsZSBwb2ludCwgc28gd2UgcHJvamVjdCBcbiAgICAvLyB0byBpbmZpbml0eSwgb24gYSBiZWFyaW5nIFxuICAgIC8vIGVxdWl2YWxlbnQgdG8gdGhlIG5vcnRoZXJuIGhlbWlzcGhlcmUgZXF1aXZhbGVudFxuICAgIC8vIFRoaXMgaXMgYSByZWFzb25hYmxlIGFwcHJveGltYXRpb24gZm9yIHNob3J0IHNoYXBlcyBhbmQgbGluZXMgdGhhdCBcbiAgICAvLyBzdHJhZGRsZSB0aGUgaG9yaXpvbi5cblxuICAgIHggPSB0aGlzLngwICsgdGhpcy5pbmZpbml0eV9kaXN0ICogY29zcGhpICogTWF0aC5zaW4oZGxvbik7XG4gICAgeSA9IHRoaXMueTAgKyB0aGlzLmluZmluaXR5X2Rpc3QgKiAodGhpcy5jb3NfcDE0ICogc2lucGhpIC0gdGhpcy5zaW5fcDE0ICogY29zcGhpICogY29zbG9uKTtcblxuICB9XG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG4gIHJldHVybiBwO1xufTtcblxuXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciByaDsgLyogUmhvICovXG4gIHZhciBzaW5jLCBjb3NjO1xuICB2YXIgYztcbiAgdmFyIGxvbiwgbGF0O1xuXG4gIC8qIEludmVyc2UgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHAueCA9IChwLnggLSB0aGlzLngwKSAvIHRoaXMuYTtcbiAgcC55ID0gKHAueSAtIHRoaXMueTApIC8gdGhpcy5hO1xuXG4gIHAueCAvPSB0aGlzLmswO1xuICBwLnkgLz0gdGhpcy5rMDtcblxuICBpZiAoKHJoID0gTWF0aC5zcXJ0KHAueCAqIHAueCArIHAueSAqIHAueSkpKSB7XG4gICAgYyA9IE1hdGguYXRhbjIocmgsIHRoaXMucmMpO1xuICAgIHNpbmMgPSBNYXRoLnNpbihjKTtcbiAgICBjb3NjID0gTWF0aC5jb3MoYyk7XG5cbiAgICBsYXQgPSBhc2lueihjb3NjICogdGhpcy5zaW5fcDE0ICsgKHAueSAqIHNpbmMgKiB0aGlzLmNvc19wMTQpIC8gcmgpO1xuICAgIGxvbiA9IE1hdGguYXRhbjIocC54ICogc2luYywgcmggKiB0aGlzLmNvc19wMTQgKiBjb3NjIC0gcC55ICogdGhpcy5zaW5fcDE0ICogc2luYyk7XG4gICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgbG9uKTtcbiAgfVxuICBlbHNlIHtcbiAgICBsYXQgPSB0aGlzLnBoaWMwO1xuICAgIGxvbiA9IDA7XG4gIH1cblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcImdub21cIl07XG4iLCJ2YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5hID0gNjM3NzM5Ny4xNTU7XG4gIHRoaXMuZXMgPSAwLjAwNjY3NDM3MjIzMDYxNDtcbiAgdGhpcy5lID0gTWF0aC5zcXJ0KHRoaXMuZXMpO1xuICBpZiAoIXRoaXMubGF0MCkge1xuICAgIHRoaXMubGF0MCA9IDAuODYzOTM3OTc5NzM3MTkzO1xuICB9XG4gIGlmICghdGhpcy5sb25nMCkge1xuICAgIHRoaXMubG9uZzAgPSAwLjc0MTc2NDkzMjA5NzU5MDEgLSAwLjMwODM0MTUwMTE4NTY2NTtcbiAgfVxuICAvKiBpZiBzY2FsZSBub3Qgc2V0IGRlZmF1bHQgdG8gMC45OTk5ICovXG4gIGlmICghdGhpcy5rMCkge1xuICAgIHRoaXMuazAgPSAwLjk5OTk7XG4gIH1cbiAgdGhpcy5zNDUgPSAwLjc4NTM5ODE2MzM5NzQ0ODsgLyogNDUgKi9cbiAgdGhpcy5zOTAgPSAyICogdGhpcy5zNDU7XG4gIHRoaXMuZmkwID0gdGhpcy5sYXQwO1xuICB0aGlzLmUyID0gdGhpcy5lcztcbiAgdGhpcy5lID0gTWF0aC5zcXJ0KHRoaXMuZTIpO1xuICB0aGlzLmFsZmEgPSBNYXRoLnNxcnQoMSArICh0aGlzLmUyICogTWF0aC5wb3coTWF0aC5jb3ModGhpcy5maTApLCA0KSkgLyAoMSAtIHRoaXMuZTIpKTtcbiAgdGhpcy51cSA9IDEuMDQyMTY4NTYzODA0NzQ7XG4gIHRoaXMudTAgPSBNYXRoLmFzaW4oTWF0aC5zaW4odGhpcy5maTApIC8gdGhpcy5hbGZhKTtcbiAgdGhpcy5nID0gTWF0aC5wb3coKDEgKyB0aGlzLmUgKiBNYXRoLnNpbih0aGlzLmZpMCkpIC8gKDEgLSB0aGlzLmUgKiBNYXRoLnNpbih0aGlzLmZpMCkpLCB0aGlzLmFsZmEgKiB0aGlzLmUgLyAyKTtcbiAgdGhpcy5rID0gTWF0aC50YW4odGhpcy51MCAvIDIgKyB0aGlzLnM0NSkgLyBNYXRoLnBvdyhNYXRoLnRhbih0aGlzLmZpMCAvIDIgKyB0aGlzLnM0NSksIHRoaXMuYWxmYSkgKiB0aGlzLmc7XG4gIHRoaXMuazEgPSB0aGlzLmswO1xuICB0aGlzLm4wID0gdGhpcy5hICogTWF0aC5zcXJ0KDEgLSB0aGlzLmUyKSAvICgxIC0gdGhpcy5lMiAqIE1hdGgucG93KE1hdGguc2luKHRoaXMuZmkwKSwgMikpO1xuICB0aGlzLnMwID0gMS4zNzAwODM0NjI4MTU1NTtcbiAgdGhpcy5uID0gTWF0aC5zaW4odGhpcy5zMCk7XG4gIHRoaXMucm8wID0gdGhpcy5rMSAqIHRoaXMubjAgLyBNYXRoLnRhbih0aGlzLnMwKTtcbiAgdGhpcy5hZCA9IHRoaXMuczkwIC0gdGhpcy51cTtcbn07XG5cbi8qIGVsbGlwc29pZCAqL1xuLyogY2FsY3VsYXRlIHh5IGZyb20gbGF0L2xvbiAqL1xuLyogQ29uc3RhbnRzLCBpZGVudGljYWwgdG8gaW52ZXJzZSB0cmFuc2Zvcm0gZnVuY3Rpb24gKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGdmaSwgdSwgZGVsdGF2LCBzLCBkLCBlcHMsIHJvO1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICB2YXIgZGVsdGFfbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgLyogVHJhbnNmb3JtYXRpb24gKi9cbiAgZ2ZpID0gTWF0aC5wb3coKCgxICsgdGhpcy5lICogTWF0aC5zaW4obGF0KSkgLyAoMSAtIHRoaXMuZSAqIE1hdGguc2luKGxhdCkpKSwgKHRoaXMuYWxmYSAqIHRoaXMuZSAvIDIpKTtcbiAgdSA9IDIgKiAoTWF0aC5hdGFuKHRoaXMuayAqIE1hdGgucG93KE1hdGgudGFuKGxhdCAvIDIgKyB0aGlzLnM0NSksIHRoaXMuYWxmYSkgLyBnZmkpIC0gdGhpcy5zNDUpO1xuICBkZWx0YXYgPSAtZGVsdGFfbG9uICogdGhpcy5hbGZhO1xuICBzID0gTWF0aC5hc2luKE1hdGguY29zKHRoaXMuYWQpICogTWF0aC5zaW4odSkgKyBNYXRoLnNpbih0aGlzLmFkKSAqIE1hdGguY29zKHUpICogTWF0aC5jb3MoZGVsdGF2KSk7XG4gIGQgPSBNYXRoLmFzaW4oTWF0aC5jb3ModSkgKiBNYXRoLnNpbihkZWx0YXYpIC8gTWF0aC5jb3MocykpO1xuICBlcHMgPSB0aGlzLm4gKiBkO1xuICBybyA9IHRoaXMucm8wICogTWF0aC5wb3coTWF0aC50YW4odGhpcy5zMCAvIDIgKyB0aGlzLnM0NSksIHRoaXMubikgLyBNYXRoLnBvdyhNYXRoLnRhbihzIC8gMiArIHRoaXMuczQ1KSwgdGhpcy5uKTtcbiAgcC55ID0gcm8gKiBNYXRoLmNvcyhlcHMpIC8gMTtcbiAgcC54ID0gcm8gKiBNYXRoLnNpbihlcHMpIC8gMTtcblxuICBpZiAoIXRoaXMuY3plY2gpIHtcbiAgICBwLnkgKj0gLTE7XG4gICAgcC54ICo9IC0xO1xuICB9XG4gIHJldHVybiAocCk7XG59O1xuXG4vKiBjYWxjdWxhdGUgbGF0L2xvbiBmcm9tIHh5ICovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciB1LCBkZWx0YXYsIHMsIGQsIGVwcywgcm8sIGZpMTtcbiAgdmFyIG9rO1xuXG4gIC8qIFRyYW5zZm9ybWF0aW9uICovXG4gIC8qIHJldmVydCB5LCB4Ki9cbiAgdmFyIHRtcCA9IHAueDtcbiAgcC54ID0gcC55O1xuICBwLnkgPSB0bXA7XG4gIGlmICghdGhpcy5jemVjaCkge1xuICAgIHAueSAqPSAtMTtcbiAgICBwLnggKj0gLTE7XG4gIH1cbiAgcm8gPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgZXBzID0gTWF0aC5hdGFuMihwLnksIHAueCk7XG4gIGQgPSBlcHMgLyBNYXRoLnNpbih0aGlzLnMwKTtcbiAgcyA9IDIgKiAoTWF0aC5hdGFuKE1hdGgucG93KHRoaXMucm8wIC8gcm8sIDEgLyB0aGlzLm4pICogTWF0aC50YW4odGhpcy5zMCAvIDIgKyB0aGlzLnM0NSkpIC0gdGhpcy5zNDUpO1xuICB1ID0gTWF0aC5hc2luKE1hdGguY29zKHRoaXMuYWQpICogTWF0aC5zaW4ocykgLSBNYXRoLnNpbih0aGlzLmFkKSAqIE1hdGguY29zKHMpICogTWF0aC5jb3MoZCkpO1xuICBkZWx0YXYgPSBNYXRoLmFzaW4oTWF0aC5jb3MocykgKiBNYXRoLnNpbihkKSAvIE1hdGguY29zKHUpKTtcbiAgcC54ID0gdGhpcy5sb25nMCAtIGRlbHRhdiAvIHRoaXMuYWxmYTtcbiAgZmkxID0gdTtcbiAgb2sgPSAwO1xuICB2YXIgaXRlciA9IDA7XG4gIGRvIHtcbiAgICBwLnkgPSAyICogKE1hdGguYXRhbihNYXRoLnBvdyh0aGlzLmssIC0gMSAvIHRoaXMuYWxmYSkgKiBNYXRoLnBvdyhNYXRoLnRhbih1IC8gMiArIHRoaXMuczQ1KSwgMSAvIHRoaXMuYWxmYSkgKiBNYXRoLnBvdygoMSArIHRoaXMuZSAqIE1hdGguc2luKGZpMSkpIC8gKDEgLSB0aGlzLmUgKiBNYXRoLnNpbihmaTEpKSwgdGhpcy5lIC8gMikpIC0gdGhpcy5zNDUpO1xuICAgIGlmIChNYXRoLmFicyhmaTEgLSBwLnkpIDwgMC4wMDAwMDAwMDAxKSB7XG4gICAgICBvayA9IDE7XG4gICAgfVxuICAgIGZpMSA9IHAueTtcbiAgICBpdGVyICs9IDE7XG4gIH0gd2hpbGUgKG9rID09PSAwICYmIGl0ZXIgPCAxNSk7XG4gIGlmIChpdGVyID49IDE1KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gKHApO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJLcm92YWtcIiwgXCJrcm92YWtcIl07XG4iLCJ2YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBGT1JUUEkgPSBNYXRoLlBJLzQ7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIHFzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3FzZm56Jyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG4vKlxuICByZWZlcmVuY2VcbiAgICBcIk5ldyBFcXVhbC1BcmVhIE1hcCBQcm9qZWN0aW9ucyBmb3IgTm9uY2lyY3VsYXIgUmVnaW9uc1wiLCBKb2huIFAuIFNueWRlcixcbiAgICBUaGUgQW1lcmljYW4gQ2FydG9ncmFwaGVyLCBWb2wgMTUsIE5vLiA0LCBPY3RvYmVyIDE5ODgsIHBwLiAzNDEtMzU1LlxuICAqL1xuXG5leHBvcnRzLlNfUE9MRSA9IDE7XG5leHBvcnRzLk5fUE9MRSA9IDI7XG5leHBvcnRzLkVRVUlUID0gMztcbmV4cG9ydHMuT0JMSVEgPSA0O1xuXG5cbi8qIEluaXRpYWxpemUgdGhlIExhbWJlcnQgQXppbXV0aGFsIEVxdWFsIEFyZWEgcHJvamVjdGlvblxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciB0ID0gTWF0aC5hYnModGhpcy5sYXQwKTtcbiAgaWYgKE1hdGguYWJzKHQgLSBIQUxGX1BJKSA8IEVQU0xOKSB7XG4gICAgdGhpcy5tb2RlID0gdGhpcy5sYXQwIDwgMCA/IHRoaXMuU19QT0xFIDogdGhpcy5OX1BPTEU7XG4gIH1cbiAgZWxzZSBpZiAoTWF0aC5hYnModCkgPCBFUFNMTikge1xuICAgIHRoaXMubW9kZSA9IHRoaXMuRVFVSVQ7XG4gIH1cbiAgZWxzZSB7XG4gICAgdGhpcy5tb2RlID0gdGhpcy5PQkxJUTtcbiAgfVxuICBpZiAodGhpcy5lcyA+IDApIHtcbiAgICB2YXIgc2lucGhpO1xuXG4gICAgdGhpcy5xcCA9IHFzZm56KHRoaXMuZSwgMSk7XG4gICAgdGhpcy5tbWYgPSAwLjUgLyAoMSAtIHRoaXMuZXMpO1xuICAgIHRoaXMuYXBhID0gdGhpcy5hdXRoc2V0KHRoaXMuZXMpO1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgY2FzZSB0aGlzLk5fUE9MRTpcbiAgICAgIHRoaXMuZGQgPSAxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLlNfUE9MRTpcbiAgICAgIHRoaXMuZGQgPSAxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLkVRVUlUOlxuICAgICAgdGhpcy5ycSA9IE1hdGguc3FydCgwLjUgKiB0aGlzLnFwKTtcbiAgICAgIHRoaXMuZGQgPSAxIC8gdGhpcy5ycTtcbiAgICAgIHRoaXMueG1mID0gMTtcbiAgICAgIHRoaXMueW1mID0gMC41ICogdGhpcy5xcDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgdGhpcy5PQkxJUTpcbiAgICAgIHRoaXMucnEgPSBNYXRoLnNxcnQoMC41ICogdGhpcy5xcCk7XG4gICAgICBzaW5waGkgPSBNYXRoLnNpbih0aGlzLmxhdDApO1xuICAgICAgdGhpcy5zaW5iMSA9IHFzZm56KHRoaXMuZSwgc2lucGhpKSAvIHRoaXMucXA7XG4gICAgICB0aGlzLmNvc2IxID0gTWF0aC5zcXJ0KDEgLSB0aGlzLnNpbmIxICogdGhpcy5zaW5iMSk7XG4gICAgICB0aGlzLmRkID0gTWF0aC5jb3ModGhpcy5sYXQwKSAvIChNYXRoLnNxcnQoMSAtIHRoaXMuZXMgKiBzaW5waGkgKiBzaW5waGkpICogdGhpcy5ycSAqIHRoaXMuY29zYjEpO1xuICAgICAgdGhpcy55bWYgPSAodGhpcy54bWYgPSB0aGlzLnJxKSAvIHRoaXMuZGQ7XG4gICAgICB0aGlzLnhtZiAqPSB0aGlzLmRkO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuT0JMSVEpIHtcbiAgICAgIHRoaXMuc2lucGgwID0gTWF0aC5zaW4odGhpcy5sYXQwKTtcbiAgICAgIHRoaXMuY29zcGgwID0gTWF0aC5jb3ModGhpcy5sYXQwKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qIExhbWJlcnQgQXppbXV0aGFsIEVxdWFsIEFyZWEgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcblxuICAvKiBGb3J3YXJkIGVxdWF0aW9uc1xuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICB2YXIgeCwgeSwgY29zbGFtLCBzaW5sYW0sIHNpbnBoaSwgcSwgc2luYiwgY29zYiwgYiwgY29zcGhpO1xuICB2YXIgbGFtID0gcC54O1xuICB2YXIgcGhpID0gcC55O1xuXG4gIGxhbSA9IGFkanVzdF9sb24obGFtIC0gdGhpcy5sb25nMCk7XG5cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgc2lucGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICBjb3NwaGkgPSBNYXRoLmNvcyhwaGkpO1xuICAgIGNvc2xhbSA9IE1hdGguY29zKGxhbSk7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gdGhpcy5PQkxJUSB8fCB0aGlzLm1vZGUgPT09IHRoaXMuRVFVSVQpIHtcbiAgICAgIHkgPSAodGhpcy5tb2RlID09PSB0aGlzLkVRVUlUKSA/IDEgKyBjb3NwaGkgKiBjb3NsYW0gOiAxICsgdGhpcy5zaW5waDAgKiBzaW5waGkgKyB0aGlzLmNvc3BoMCAqIGNvc3BoaSAqIGNvc2xhbTtcbiAgICAgIGlmICh5IDw9IEVQU0xOKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgeSA9IE1hdGguc3FydCgyIC8geSk7XG4gICAgICB4ID0geSAqIGNvc3BoaSAqIE1hdGguc2luKGxhbSk7XG4gICAgICB5ICo9ICh0aGlzLm1vZGUgPT09IHRoaXMuRVFVSVQpID8gc2lucGhpIDogdGhpcy5jb3NwaDAgKiBzaW5waGkgLSB0aGlzLnNpbnBoMCAqIGNvc3BoaSAqIGNvc2xhbTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5tb2RlID09PSB0aGlzLk5fUE9MRSB8fCB0aGlzLm1vZGUgPT09IHRoaXMuU19QT0xFKSB7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSB0aGlzLk5fUE9MRSkge1xuICAgICAgICBjb3NsYW0gPSAtY29zbGFtO1xuICAgICAgfVxuICAgICAgaWYgKE1hdGguYWJzKHBoaSArIHRoaXMucGhpMCkgPCBFUFNMTikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHkgPSBGT1JUUEkgLSBwaGkgKiAwLjU7XG4gICAgICB5ID0gMiAqICgodGhpcy5tb2RlID09PSB0aGlzLlNfUE9MRSkgPyBNYXRoLmNvcyh5KSA6IE1hdGguc2luKHkpKTtcbiAgICAgIHggPSB5ICogTWF0aC5zaW4obGFtKTtcbiAgICAgIHkgKj0gY29zbGFtO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBzaW5iID0gMDtcbiAgICBjb3NiID0gMDtcbiAgICBiID0gMDtcbiAgICBjb3NsYW0gPSBNYXRoLmNvcyhsYW0pO1xuICAgIHNpbmxhbSA9IE1hdGguc2luKGxhbSk7XG4gICAgc2lucGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICBxID0gcXNmbnoodGhpcy5lLCBzaW5waGkpO1xuICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuT0JMSVEgfHwgdGhpcy5tb2RlID09PSB0aGlzLkVRVUlUKSB7XG4gICAgICBzaW5iID0gcSAvIHRoaXMucXA7XG4gICAgICBjb3NiID0gTWF0aC5zcXJ0KDEgLSBzaW5iICogc2luYik7XG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgY2FzZSB0aGlzLk9CTElROlxuICAgICAgYiA9IDEgKyB0aGlzLnNpbmIxICogc2luYiArIHRoaXMuY29zYjEgKiBjb3NiICogY29zbGFtO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLkVRVUlUOlxuICAgICAgYiA9IDEgKyBjb3NiICogY29zbGFtO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLk5fUE9MRTpcbiAgICAgIGIgPSBIQUxGX1BJICsgcGhpO1xuICAgICAgcSA9IHRoaXMucXAgLSBxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLlNfUE9MRTpcbiAgICAgIGIgPSBwaGkgLSBIQUxGX1BJO1xuICAgICAgcSA9IHRoaXMucXAgKyBxO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChNYXRoLmFicyhiKSA8IEVQU0xOKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICBjYXNlIHRoaXMuT0JMSVE6XG4gICAgY2FzZSB0aGlzLkVRVUlUOlxuICAgICAgYiA9IE1hdGguc3FydCgyIC8gYik7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSB0aGlzLk9CTElRKSB7XG4gICAgICAgIHkgPSB0aGlzLnltZiAqIGIgKiAodGhpcy5jb3NiMSAqIHNpbmIgLSB0aGlzLnNpbmIxICogY29zYiAqIGNvc2xhbSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgeSA9IChiID0gTWF0aC5zcXJ0KDIgLyAoMSArIGNvc2IgKiBjb3NsYW0pKSkgKiBzaW5iICogdGhpcy55bWY7XG4gICAgICB9XG4gICAgICB4ID0gdGhpcy54bWYgKiBiICogY29zYiAqIHNpbmxhbTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgdGhpcy5OX1BPTEU6XG4gICAgY2FzZSB0aGlzLlNfUE9MRTpcbiAgICAgIGlmIChxID49IDApIHtcbiAgICAgICAgeCA9IChiID0gTWF0aC5zcXJ0KHEpKSAqIHNpbmxhbTtcbiAgICAgICAgeSA9IGNvc2xhbSAqICgodGhpcy5tb2RlID09PSB0aGlzLlNfUE9MRSkgPyBiIDogLWIpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHggPSB5ID0gMDtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHAueCA9IHRoaXMuYSAqIHggKyB0aGlzLngwO1xuICBwLnkgPSB0aGlzLmEgKiB5ICsgdGhpcy55MDtcbiAgcmV0dXJuIHA7XG59O1xuXG4vKiBJbnZlcnNlIGVxdWF0aW9uc1xuICAtLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgdmFyIHggPSBwLnggLyB0aGlzLmE7XG4gIHZhciB5ID0gcC55IC8gdGhpcy5hO1xuICB2YXIgbGFtLCBwaGksIGNDZSwgc0NlLCBxLCByaG8sIGFiO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHZhciBjb3N6ID0gMCxcbiAgICAgIHJoLCBzaW56ID0gMDtcblxuICAgIHJoID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xuICAgIHBoaSA9IHJoICogMC41O1xuICAgIGlmIChwaGkgPiAxKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcGhpID0gMiAqIE1hdGguYXNpbihwaGkpO1xuICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuT0JMSVEgfHwgdGhpcy5tb2RlID09PSB0aGlzLkVRVUlUKSB7XG4gICAgICBzaW56ID0gTWF0aC5zaW4ocGhpKTtcbiAgICAgIGNvc3ogPSBNYXRoLmNvcyhwaGkpO1xuICAgIH1cbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgIGNhc2UgdGhpcy5FUVVJVDpcbiAgICAgIHBoaSA9IChNYXRoLmFicyhyaCkgPD0gRVBTTE4pID8gMCA6IE1hdGguYXNpbih5ICogc2lueiAvIHJoKTtcbiAgICAgIHggKj0gc2luejtcbiAgICAgIHkgPSBjb3N6ICogcmg7XG4gICAgICBicmVhaztcbiAgICBjYXNlIHRoaXMuT0JMSVE6XG4gICAgICBwaGkgPSAoTWF0aC5hYnMocmgpIDw9IEVQU0xOKSA/IHRoaXMucGhpMCA6IE1hdGguYXNpbihjb3N6ICogdGhpcy5zaW5waDAgKyB5ICogc2lueiAqIHRoaXMuY29zcGgwIC8gcmgpO1xuICAgICAgeCAqPSBzaW56ICogdGhpcy5jb3NwaDA7XG4gICAgICB5ID0gKGNvc3ogLSBNYXRoLnNpbihwaGkpICogdGhpcy5zaW5waDApICogcmg7XG4gICAgICBicmVhaztcbiAgICBjYXNlIHRoaXMuTl9QT0xFOlxuICAgICAgeSA9IC15O1xuICAgICAgcGhpID0gSEFMRl9QSSAtIHBoaTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgdGhpcy5TX1BPTEU6XG4gICAgICBwaGkgLT0gSEFMRl9QSTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBsYW0gPSAoeSA9PT0gMCAmJiAodGhpcy5tb2RlID09PSB0aGlzLkVRVUlUIHx8IHRoaXMubW9kZSA9PT0gdGhpcy5PQkxJUSkpID8gMCA6IE1hdGguYXRhbjIoeCwgeSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgYWIgPSAwO1xuICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuT0JMSVEgfHwgdGhpcy5tb2RlID09PSB0aGlzLkVRVUlUKSB7XG4gICAgICB4IC89IHRoaXMuZGQ7XG4gICAgICB5ICo9IHRoaXMuZGQ7XG4gICAgICByaG8gPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgICBpZiAocmhvIDwgRVBTTE4pIHtcbiAgICAgICAgcC54ID0gMDtcbiAgICAgICAgcC55ID0gdGhpcy5waGkwO1xuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH1cbiAgICAgIHNDZSA9IDIgKiBNYXRoLmFzaW4oMC41ICogcmhvIC8gdGhpcy5ycSk7XG4gICAgICBjQ2UgPSBNYXRoLmNvcyhzQ2UpO1xuICAgICAgeCAqPSAoc0NlID0gTWF0aC5zaW4oc0NlKSk7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSB0aGlzLk9CTElRKSB7XG4gICAgICAgIGFiID0gY0NlICogdGhpcy5zaW5iMSArIHkgKiBzQ2UgKiB0aGlzLmNvc2IxIC8gcmhvO1xuICAgICAgICBxID0gdGhpcy5xcCAqIGFiO1xuICAgICAgICB5ID0gcmhvICogdGhpcy5jb3NiMSAqIGNDZSAtIHkgKiB0aGlzLnNpbmIxICogc0NlO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGFiID0geSAqIHNDZSAvIHJobztcbiAgICAgICAgcSA9IHRoaXMucXAgKiBhYjtcbiAgICAgICAgeSA9IHJobyAqIGNDZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5tb2RlID09PSB0aGlzLk5fUE9MRSB8fCB0aGlzLm1vZGUgPT09IHRoaXMuU19QT0xFKSB7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSB0aGlzLk5fUE9MRSkge1xuICAgICAgICB5ID0gLXk7XG4gICAgICB9XG4gICAgICBxID0gKHggKiB4ICsgeSAqIHkpO1xuICAgICAgaWYgKCFxKSB7XG4gICAgICAgIHAueCA9IDA7XG4gICAgICAgIHAueSA9IHRoaXMucGhpMDtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9XG4gICAgICBhYiA9IDEgLSBxIC8gdGhpcy5xcDtcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuU19QT0xFKSB7XG4gICAgICAgIGFiID0gLWFiO1xuICAgICAgfVxuICAgIH1cbiAgICBsYW0gPSBNYXRoLmF0YW4yKHgsIHkpO1xuICAgIHBoaSA9IHRoaXMuYXV0aGxhdChNYXRoLmFzaW4oYWIpLCB0aGlzLmFwYSk7XG4gIH1cblxuXG4gIHAueCA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIGxhbSk7XG4gIHAueSA9IHBoaTtcbiAgcmV0dXJuIHA7XG59O1xuXG4vKiBkZXRlcm1pbmUgbGF0aXR1ZGUgZnJvbSBhdXRoYWxpYyBsYXRpdHVkZSAqL1xuZXhwb3J0cy5QMDAgPSAwLjMzMzMzMzMzMzMzMzMzMzMzMzMzO1xuZXhwb3J0cy5QMDEgPSAwLjE3MjIyMjIyMjIyMjIyMjIyMjIyO1xuZXhwb3J0cy5QMDIgPSAwLjEwMjU3OTM2NTA3OTM2NTA3OTM2O1xuZXhwb3J0cy5QMTAgPSAwLjA2Mzg4ODg4ODg4ODg4ODg4ODg4O1xuZXhwb3J0cy5QMTEgPSAwLjA2NjQwMjExNjQwMjExNjQwMjExO1xuZXhwb3J0cy5QMjAgPSAwLjAxNjQxNTAxMjk0MjE5MTU0NDQzO1xuXG5leHBvcnRzLmF1dGhzZXQgPSBmdW5jdGlvbihlcykge1xuICB2YXIgdDtcbiAgdmFyIEFQQSA9IFtdO1xuICBBUEFbMF0gPSBlcyAqIHRoaXMuUDAwO1xuICB0ID0gZXMgKiBlcztcbiAgQVBBWzBdICs9IHQgKiB0aGlzLlAwMTtcbiAgQVBBWzFdID0gdCAqIHRoaXMuUDEwO1xuICB0ICo9IGVzO1xuICBBUEFbMF0gKz0gdCAqIHRoaXMuUDAyO1xuICBBUEFbMV0gKz0gdCAqIHRoaXMuUDExO1xuICBBUEFbMl0gPSB0ICogdGhpcy5QMjA7XG4gIHJldHVybiBBUEE7XG59O1xuXG5leHBvcnRzLmF1dGhsYXQgPSBmdW5jdGlvbihiZXRhLCBBUEEpIHtcbiAgdmFyIHQgPSBiZXRhICsgYmV0YTtcbiAgcmV0dXJuIChiZXRhICsgQVBBWzBdICogTWF0aC5zaW4odCkgKyBBUEFbMV0gKiBNYXRoLnNpbih0ICsgdCkgKyBBUEFbMl0gKiBNYXRoLnNpbih0ICsgdCArIHQpKTtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiTGFtYmVydCBBemltdXRoYWwgRXF1YWwgQXJlYVwiLCBcIkxhbWJlcnRfQXppbXV0aGFsX0VxdWFsX0FyZWFcIiwgXCJsYWVhXCJdO1xuIiwidmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBtc2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tc2ZueicpO1xudmFyIHRzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3RzZm56Jyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBzaWduID0gcmVxdWlyZSgnLi4vY29tbW9uL3NpZ24nKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBwaGkyeiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9waGkyeicpO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgLy8gYXJyYXkgb2Y6ICByX21haixyX21pbixsYXQxLGxhdDIsY19sb24sY19sYXQsZmFsc2VfZWFzdCxmYWxzZV9ub3J0aFxuICAvL2RvdWJsZSBjX2xhdDsgICAgICAgICAgICAgICAgICAgLyogY2VudGVyIGxhdGl0dWRlICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8vZG91YmxlIGNfbG9uOyAgICAgICAgICAgICAgICAgICAvKiBjZW50ZXIgbG9uZ2l0dWRlICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLy9kb3VibGUgbGF0MTsgICAgICAgICAgICAgICAgICAgIC8qIGZpcnN0IHN0YW5kYXJkIHBhcmFsbGVsICAgICAgICAgICAgICAqL1xuICAvL2RvdWJsZSBsYXQyOyAgICAgICAgICAgICAgICAgICAgLyogc2Vjb25kIHN0YW5kYXJkIHBhcmFsbGVsICAgICAgICAgICAgICovXG4gIC8vZG91YmxlIHJfbWFqOyAgICAgICAgICAgICAgICAgICAvKiBtYWpvciBheGlzICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLy9kb3VibGUgcl9taW47ICAgICAgICAgICAgICAgICAgIC8qIG1pbm9yIGF4aXMgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvL2RvdWJsZSBmYWxzZV9lYXN0OyAgICAgICAgICAgICAgLyogeCBvZmZzZXQgaW4gbWV0ZXJzICAgICAgICAgICAgICAgICAgICovXG4gIC8vZG91YmxlIGZhbHNlX25vcnRoOyAgICAgICAgICAgICAvKiB5IG9mZnNldCBpbiBtZXRlcnMgICAgICAgICAgICAgICAgICAgKi9cblxuICBpZiAoIXRoaXMubGF0Mikge1xuICAgIHRoaXMubGF0MiA9IHRoaXMubGF0MTtcbiAgfSAvL2lmIGxhdDIgaXMgbm90IGRlZmluZWRcbiAgaWYgKCF0aGlzLmswKSB7XG4gICAgdGhpcy5rMCA9IDE7XG4gIH1cbiAgdGhpcy54MCA9IHRoaXMueDAgfHwgMDtcbiAgdGhpcy55MCA9IHRoaXMueTAgfHwgMDtcbiAgLy8gU3RhbmRhcmQgUGFyYWxsZWxzIGNhbm5vdCBiZSBlcXVhbCBhbmQgb24gb3Bwb3NpdGUgc2lkZXMgb2YgdGhlIGVxdWF0b3JcbiAgaWYgKE1hdGguYWJzKHRoaXMubGF0MSArIHRoaXMubGF0MikgPCBFUFNMTikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0ZW1wID0gdGhpcy5iIC8gdGhpcy5hO1xuICB0aGlzLmUgPSBNYXRoLnNxcnQoMSAtIHRlbXAgKiB0ZW1wKTtcblxuICB2YXIgc2luMSA9IE1hdGguc2luKHRoaXMubGF0MSk7XG4gIHZhciBjb3MxID0gTWF0aC5jb3ModGhpcy5sYXQxKTtcbiAgdmFyIG1zMSA9IG1zZm56KHRoaXMuZSwgc2luMSwgY29zMSk7XG4gIHZhciB0czEgPSB0c2Zueih0aGlzLmUsIHRoaXMubGF0MSwgc2luMSk7XG5cbiAgdmFyIHNpbjIgPSBNYXRoLnNpbih0aGlzLmxhdDIpO1xuICB2YXIgY29zMiA9IE1hdGguY29zKHRoaXMubGF0Mik7XG4gIHZhciBtczIgPSBtc2Zueih0aGlzLmUsIHNpbjIsIGNvczIpO1xuICB2YXIgdHMyID0gdHNmbnoodGhpcy5lLCB0aGlzLmxhdDIsIHNpbjIpO1xuXG4gIHZhciB0czAgPSB0c2Zueih0aGlzLmUsIHRoaXMubGF0MCwgTWF0aC5zaW4odGhpcy5sYXQwKSk7XG5cbiAgaWYgKE1hdGguYWJzKHRoaXMubGF0MSAtIHRoaXMubGF0MikgPiBFUFNMTikge1xuICAgIHRoaXMubnMgPSBNYXRoLmxvZyhtczEgLyBtczIpIC8gTWF0aC5sb2codHMxIC8gdHMyKTtcbiAgfVxuICBlbHNlIHtcbiAgICB0aGlzLm5zID0gc2luMTtcbiAgfVxuICBpZiAoaXNOYU4odGhpcy5ucykpIHtcbiAgICB0aGlzLm5zID0gc2luMTtcbiAgfVxuICB0aGlzLmYwID0gbXMxIC8gKHRoaXMubnMgKiBNYXRoLnBvdyh0czEsIHRoaXMubnMpKTtcbiAgdGhpcy5yaCA9IHRoaXMuYSAqIHRoaXMuZjAgKiBNYXRoLnBvdyh0czAsIHRoaXMubnMpO1xuICBpZiAoIXRoaXMudGl0bGUpIHtcbiAgICB0aGlzLnRpdGxlID0gXCJMYW1iZXJ0IENvbmZvcm1hbCBDb25pY1wiO1xuICB9XG59O1xuXG5cbi8vIExhbWJlcnQgQ29uZm9ybWFsIGNvbmljIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcblxuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuXG4gIC8vIHNpbmd1bGFyIGNhc2VzIDpcbiAgaWYgKE1hdGguYWJzKDIgKiBNYXRoLmFicyhsYXQpIC0gTWF0aC5QSSkgPD0gRVBTTE4pIHtcbiAgICBsYXQgPSBzaWduKGxhdCkgKiAoSEFMRl9QSSAtIDIgKiBFUFNMTik7XG4gIH1cblxuICB2YXIgY29uID0gTWF0aC5hYnMoTWF0aC5hYnMobGF0KSAtIEhBTEZfUEkpO1xuICB2YXIgdHMsIHJoMTtcbiAgaWYgKGNvbiA+IEVQU0xOKSB7XG4gICAgdHMgPSB0c2Zueih0aGlzLmUsIGxhdCwgTWF0aC5zaW4obGF0KSk7XG4gICAgcmgxID0gdGhpcy5hICogdGhpcy5mMCAqIE1hdGgucG93KHRzLCB0aGlzLm5zKTtcbiAgfVxuICBlbHNlIHtcbiAgICBjb24gPSBsYXQgKiB0aGlzLm5zO1xuICAgIGlmIChjb24gPD0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJoMSA9IDA7XG4gIH1cbiAgdmFyIHRoZXRhID0gdGhpcy5ucyAqIGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHAueCA9IHRoaXMuazAgKiAocmgxICogTWF0aC5zaW4odGhldGEpKSArIHRoaXMueDA7XG4gIHAueSA9IHRoaXMuazAgKiAodGhpcy5yaCAtIHJoMSAqIE1hdGguY29zKHRoZXRhKSkgKyB0aGlzLnkwO1xuXG4gIHJldHVybiBwO1xufTtcblxuLy8gTGFtYmVydCBDb25mb3JtYWwgQ29uaWMgaW52ZXJzZSBlcXVhdGlvbnMtLW1hcHBpbmcgeCx5IHRvIGxhdC9sb25nXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuXG4gIHZhciByaDEsIGNvbiwgdHM7XG4gIHZhciBsYXQsIGxvbjtcbiAgdmFyIHggPSAocC54IC0gdGhpcy54MCkgLyB0aGlzLmswO1xuICB2YXIgeSA9ICh0aGlzLnJoIC0gKHAueSAtIHRoaXMueTApIC8gdGhpcy5rMCk7XG4gIGlmICh0aGlzLm5zID4gMCkge1xuICAgIHJoMSA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICBjb24gPSAxO1xuICB9XG4gIGVsc2Uge1xuICAgIHJoMSA9IC1NYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgY29uID0gLTE7XG4gIH1cbiAgdmFyIHRoZXRhID0gMDtcbiAgaWYgKHJoMSAhPT0gMCkge1xuICAgIHRoZXRhID0gTWF0aC5hdGFuMigoY29uICogeCksIChjb24gKiB5KSk7XG4gIH1cbiAgaWYgKChyaDEgIT09IDApIHx8ICh0aGlzLm5zID4gMCkpIHtcbiAgICBjb24gPSAxIC8gdGhpcy5ucztcbiAgICB0cyA9IE1hdGgucG93KChyaDEgLyAodGhpcy5hICogdGhpcy5mMCkpLCBjb24pO1xuICAgIGxhdCA9IHBoaTJ6KHRoaXMuZSwgdHMpO1xuICAgIGlmIChsYXQgPT09IC05OTk5KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgbGF0ID0gLUhBTEZfUEk7XG4gIH1cbiAgbG9uID0gYWRqdXN0X2xvbih0aGV0YSAvIHRoaXMubnMgKyB0aGlzLmxvbmcwKTtcblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuXG5leHBvcnRzLm5hbWVzID0gW1wiTGFtYmVydCBUYW5nZW50aWFsIENvbmZvcm1hbCBDb25pYyBQcm9qZWN0aW9uXCIsIFwiTGFtYmVydF9Db25mb3JtYWxfQ29uaWNcIiwgXCJMYW1iZXJ0X0NvbmZvcm1hbF9Db25pY18yU1BcIiwgXCJsY2NcIl07XG4iLCJleHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgLy9uby1vcCBmb3IgbG9uZ2xhdFxufTtcblxuZnVuY3Rpb24gaWRlbnRpdHkocHQpIHtcbiAgcmV0dXJuIHB0O1xufVxuZXhwb3J0cy5mb3J3YXJkID0gaWRlbnRpdHk7XG5leHBvcnRzLmludmVyc2UgPSBpZGVudGl0eTtcbmV4cG9ydHMubmFtZXMgPSBbXCJsb25nbGF0XCIsIFwiaWRlbnRpdHlcIl07XG4iLCJ2YXIgbXNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vbXNmbnonKTtcbnZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBSMkQgPSA1Ny4yOTU3Nzk1MTMwODIzMjA4ODtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBGT1JUUEkgPSBNYXRoLlBJLzQ7XG52YXIgdHNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vdHNmbnonKTtcbnZhciBwaGkyeiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9waGkyeicpO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBjb24gPSB0aGlzLmIgLyB0aGlzLmE7XG4gIHRoaXMuZXMgPSAxIC0gY29uICogY29uO1xuICBpZighKCd4MCcgaW4gdGhpcykpe1xuICAgIHRoaXMueDAgPSAwO1xuICB9XG4gIGlmKCEoJ3kwJyBpbiB0aGlzKSl7XG4gICAgdGhpcy55MCA9IDA7XG4gIH1cbiAgdGhpcy5lID0gTWF0aC5zcXJ0KHRoaXMuZXMpO1xuICBpZiAodGhpcy5sYXRfdHMpIHtcbiAgICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICAgIHRoaXMuazAgPSBNYXRoLmNvcyh0aGlzLmxhdF90cyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5rMCA9IG1zZm56KHRoaXMuZSwgTWF0aC5zaW4odGhpcy5sYXRfdHMpLCBNYXRoLmNvcyh0aGlzLmxhdF90cykpO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBpZiAoIXRoaXMuazApIHtcbiAgICAgIGlmICh0aGlzLmspIHtcbiAgICAgICAgdGhpcy5rMCA9IHRoaXMuaztcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmswID0gMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qIE1lcmNhdG9yIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcbiAgLy8gY29udmVydCB0byByYWRpYW5zXG4gIGlmIChsYXQgKiBSMkQgPiA5MCAmJiBsYXQgKiBSMkQgPCAtOTAgJiYgbG9uICogUjJEID4gMTgwICYmIGxvbiAqIFIyRCA8IC0xODApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciB4LCB5O1xuICBpZiAoTWF0aC5hYnMoTWF0aC5hYnMobGF0KSAtIEhBTEZfUEkpIDw9IEVQU0xOKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgICB4ID0gdGhpcy54MCArIHRoaXMuYSAqIHRoaXMuazAgKiBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICAgICAgeSA9IHRoaXMueTAgKyB0aGlzLmEgKiB0aGlzLmswICogTWF0aC5sb2coTWF0aC50YW4oRk9SVFBJICsgMC41ICogbGF0KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdmFyIHNpbnBoaSA9IE1hdGguc2luKGxhdCk7XG4gICAgICB2YXIgdHMgPSB0c2Zueih0aGlzLmUsIGxhdCwgc2lucGhpKTtcbiAgICAgIHggPSB0aGlzLngwICsgdGhpcy5hICogdGhpcy5rMCAqIGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gICAgICB5ID0gdGhpcy55MCAtIHRoaXMuYSAqIHRoaXMuazAgKiBNYXRoLmxvZyh0cyk7XG4gICAgfVxuICAgIHAueCA9IHg7XG4gICAgcC55ID0geTtcbiAgICByZXR1cm4gcDtcbiAgfVxufTtcblxuXG4vKiBNZXJjYXRvciBpbnZlcnNlIGVxdWF0aW9ucy0tbWFwcGluZyB4LHkgdG8gbGF0L2xvbmdcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuXG4gIHZhciB4ID0gcC54IC0gdGhpcy54MDtcbiAgdmFyIHkgPSBwLnkgLSB0aGlzLnkwO1xuICB2YXIgbG9uLCBsYXQ7XG5cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgbGF0ID0gSEFMRl9QSSAtIDIgKiBNYXRoLmF0YW4oTWF0aC5leHAoLXkgLyAodGhpcy5hICogdGhpcy5rMCkpKTtcbiAgfVxuICBlbHNlIHtcbiAgICB2YXIgdHMgPSBNYXRoLmV4cCgteSAvICh0aGlzLmEgKiB0aGlzLmswKSk7XG4gICAgbGF0ID0gcGhpMnoodGhpcy5lLCB0cyk7XG4gICAgaWYgKGxhdCA9PT0gLTk5OTkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyB4IC8gKHRoaXMuYSAqIHRoaXMuazApKTtcblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuXG5leHBvcnRzLm5hbWVzID0gW1wiTWVyY2F0b3JcIiwgXCJQb3B1bGFyIFZpc3VhbGlzYXRpb24gUHNldWRvIE1lcmNhdG9yXCIsIFwiTWVyY2F0b3JfMVNQXCIsIFwiTWVyY2F0b3JfQXV4aWxpYXJ5X1NwaGVyZVwiLCBcIm1lcmNcIl07XG4iLCJ2YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG4vKlxuICByZWZlcmVuY2VcbiAgICBcIk5ldyBFcXVhbC1BcmVhIE1hcCBQcm9qZWN0aW9ucyBmb3IgTm9uY2lyY3VsYXIgUmVnaW9uc1wiLCBKb2huIFAuIFNueWRlcixcbiAgICBUaGUgQW1lcmljYW4gQ2FydG9ncmFwaGVyLCBWb2wgMTUsIE5vLiA0LCBPY3RvYmVyIDE5ODgsIHBwLiAzNDEtMzU1LlxuICAqL1xuXG5cbi8qIEluaXRpYWxpemUgdGhlIE1pbGxlciBDeWxpbmRyaWNhbCBwcm9qZWN0aW9uXG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIC8vbm8tb3Bcbn07XG5cblxuLyogTWlsbGVyIEN5bGluZHJpY2FsIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHZhciBkbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgdmFyIHggPSB0aGlzLngwICsgdGhpcy5hICogZGxvbjtcbiAgdmFyIHkgPSB0aGlzLnkwICsgdGhpcy5hICogTWF0aC5sb2coTWF0aC50YW4oKE1hdGguUEkgLyA0KSArIChsYXQgLyAyLjUpKSkgKiAxLjI1O1xuXG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG4gIHJldHVybiBwO1xufTtcblxuLyogTWlsbGVyIEN5bGluZHJpY2FsIGludmVyc2UgZXF1YXRpb25zLS1tYXBwaW5nIHgseSB0byBsYXQvbG9uZ1xuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcblxuICB2YXIgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgcC54IC8gdGhpcy5hKTtcbiAgdmFyIGxhdCA9IDIuNSAqIChNYXRoLmF0YW4oTWF0aC5leHAoMC44ICogcC55IC8gdGhpcy5hKSkgLSBNYXRoLlBJIC8gNCk7XG5cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJNaWxsZXJfQ3lsaW5kcmljYWxcIiwgXCJtaWxsXCJdO1xuIiwidmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge307XG5cbi8qIE1vbGx3ZWlkZSBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcblxuICAvKiBGb3J3YXJkIGVxdWF0aW9uc1xuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuXG4gIHZhciBkZWx0YV9sb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICB2YXIgdGhldGEgPSBsYXQ7XG4gIHZhciBjb24gPSBNYXRoLlBJICogTWF0aC5zaW4obGF0KTtcblxuICAvKiBJdGVyYXRlIHVzaW5nIHRoZSBOZXd0b24tUmFwaHNvbiBtZXRob2QgdG8gZmluZCB0aGV0YVxuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICBmb3IgKHZhciBpID0gMDsgdHJ1ZTsgaSsrKSB7XG4gICAgdmFyIGRlbHRhX3RoZXRhID0gLSh0aGV0YSArIE1hdGguc2luKHRoZXRhKSAtIGNvbikgLyAoMSArIE1hdGguY29zKHRoZXRhKSk7XG4gICAgdGhldGEgKz0gZGVsdGFfdGhldGE7XG4gICAgaWYgKE1hdGguYWJzKGRlbHRhX3RoZXRhKSA8IEVQU0xOKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgdGhldGEgLz0gMjtcblxuICAvKiBJZiB0aGUgbGF0aXR1ZGUgaXMgOTAgZGVnLCBmb3JjZSB0aGUgeCBjb29yZGluYXRlIHRvIGJlIFwiMCArIGZhbHNlIGVhc3RpbmdcIlxuICAgICAgIHRoaXMgaXMgZG9uZSBoZXJlIGJlY2F1c2Ugb2YgcHJlY2lzaW9uIHByb2JsZW1zIHdpdGggXCJjb3ModGhldGEpXCJcbiAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIGlmIChNYXRoLlBJIC8gMiAtIE1hdGguYWJzKGxhdCkgPCBFUFNMTikge1xuICAgIGRlbHRhX2xvbiA9IDA7XG4gIH1cbiAgdmFyIHggPSAwLjkwMDMxNjMxNjE1OCAqIHRoaXMuYSAqIGRlbHRhX2xvbiAqIE1hdGguY29zKHRoZXRhKSArIHRoaXMueDA7XG4gIHZhciB5ID0gMS40MTQyMTM1NjIzNzMxICogdGhpcy5hICogTWF0aC5zaW4odGhldGEpICsgdGhpcy55MDtcblxuICBwLnggPSB4O1xuICBwLnkgPSB5O1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHRoZXRhO1xuICB2YXIgYXJnO1xuXG4gIC8qIEludmVyc2UgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgYXJnID0gcC55IC8gKDEuNDE0MjEzNTYyMzczMSAqIHRoaXMuYSk7XG5cbiAgLyogQmVjYXVzZSBvZiBkaXZpc2lvbiBieSB6ZXJvIHByb2JsZW1zLCAnYXJnJyBjYW4gbm90IGJlIDEuICBUaGVyZWZvcmVcbiAgICAgICBhIG51bWJlciB2ZXJ5IGNsb3NlIHRvIG9uZSBpcyB1c2VkIGluc3RlYWQuXG4gICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIGlmIChNYXRoLmFicyhhcmcpID4gMC45OTk5OTk5OTk5OTkpIHtcbiAgICBhcmcgPSAwLjk5OTk5OTk5OTk5OTtcbiAgfVxuICB0aGV0YSA9IE1hdGguYXNpbihhcmcpO1xuICB2YXIgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgKHAueCAvICgwLjkwMDMxNjMxNjE1OCAqIHRoaXMuYSAqIE1hdGguY29zKHRoZXRhKSkpKTtcbiAgaWYgKGxvbiA8ICgtTWF0aC5QSSkpIHtcbiAgICBsb24gPSAtTWF0aC5QSTtcbiAgfVxuICBpZiAobG9uID4gTWF0aC5QSSkge1xuICAgIGxvbiA9IE1hdGguUEk7XG4gIH1cbiAgYXJnID0gKDIgKiB0aGV0YSArIE1hdGguc2luKDIgKiB0aGV0YSkpIC8gTWF0aC5QSTtcbiAgaWYgKE1hdGguYWJzKGFyZykgPiAxKSB7XG4gICAgYXJnID0gMTtcbiAgfVxuICB2YXIgbGF0ID0gTWF0aC5hc2luKGFyZyk7XG5cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJNb2xsd2VpZGVcIiwgXCJtb2xsXCJdO1xuIiwidmFyIFNFQ19UT19SQUQgPSA0Ljg0ODEzNjgxMTA5NTM1OTkzNTg5OTE0MTAyMzU3ZS02O1xuLypcbiAgcmVmZXJlbmNlXG4gICAgRGVwYXJ0bWVudCBvZiBMYW5kIGFuZCBTdXJ2ZXkgVGVjaG5pY2FsIENpcmN1bGFyIDE5NzMvMzJcbiAgICAgIGh0dHA6Ly93d3cubGluei5nb3Z0Lm56L2RvY3MvbWlzY2VsbGFuZW91cy9uei1tYXAtZGVmaW5pdGlvbi5wZGZcbiAgICBPU0cgVGVjaG5pY2FsIFJlcG9ydCA0LjFcbiAgICAgIGh0dHA6Ly93d3cubGluei5nb3Z0Lm56L2RvY3MvbWlzY2VsbGFuZW91cy9uem1nLnBkZlxuICAqL1xuXG4vKipcbiAqIGl0ZXJhdGlvbnM6IE51bWJlciBvZiBpdGVyYXRpb25zIHRvIHJlZmluZSBpbnZlcnNlIHRyYW5zZm9ybS5cbiAqICAgICAwIC0+IGttIGFjY3VyYWN5XG4gKiAgICAgMSAtPiBtIGFjY3VyYWN5IC0tIHN1aXRhYmxlIGZvciBtb3N0IG1hcHBpbmcgYXBwbGljYXRpb25zXG4gKiAgICAgMiAtPiBtbSBhY2N1cmFjeVxuICovXG5leHBvcnRzLml0ZXJhdGlvbnMgPSAxO1xuXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5BID0gW107XG4gIHRoaXMuQVsxXSA9IDAuNjM5OTE3NTA3MztcbiAgdGhpcy5BWzJdID0gLTAuMTM1ODc5NzYxMztcbiAgdGhpcy5BWzNdID0gMC4wNjMyOTQ0MDk7XG4gIHRoaXMuQVs0XSA9IC0wLjAyNTI2ODUzO1xuICB0aGlzLkFbNV0gPSAwLjAxMTc4Nzk7XG4gIHRoaXMuQVs2XSA9IC0wLjAwNTUxNjE7XG4gIHRoaXMuQVs3XSA9IDAuMDAyNjkwNjtcbiAgdGhpcy5BWzhdID0gLTAuMDAxMzMzO1xuICB0aGlzLkFbOV0gPSAwLjAwMDY3O1xuICB0aGlzLkFbMTBdID0gLTAuMDAwMzQ7XG5cbiAgdGhpcy5CX3JlID0gW107XG4gIHRoaXMuQl9pbSA9IFtdO1xuICB0aGlzLkJfcmVbMV0gPSAwLjc1NTc4NTMyMjg7XG4gIHRoaXMuQl9pbVsxXSA9IDA7XG4gIHRoaXMuQl9yZVsyXSA9IDAuMjQ5MjA0NjQ2O1xuICB0aGlzLkJfaW1bMl0gPSAwLjAwMzM3MTUwNztcbiAgdGhpcy5CX3JlWzNdID0gLTAuMDAxNTQxNzM5O1xuICB0aGlzLkJfaW1bM10gPSAwLjA0MTA1ODU2MDtcbiAgdGhpcy5CX3JlWzRdID0gLTAuMTAxNjI5MDc7XG4gIHRoaXMuQl9pbVs0XSA9IDAuMDE3Mjc2MDk7XG4gIHRoaXMuQl9yZVs1XSA9IC0wLjI2NjIzNDg5O1xuICB0aGlzLkJfaW1bNV0gPSAtMC4zNjI0OTIxODtcbiAgdGhpcy5CX3JlWzZdID0gLTAuNjg3MDk4MztcbiAgdGhpcy5CX2ltWzZdID0gLTEuMTY1MTk2NztcblxuICB0aGlzLkNfcmUgPSBbXTtcbiAgdGhpcy5DX2ltID0gW107XG4gIHRoaXMuQ19yZVsxXSA9IDEuMzIzMTI3MDQzOTtcbiAgdGhpcy5DX2ltWzFdID0gMDtcbiAgdGhpcy5DX3JlWzJdID0gLTAuNTc3MjQ1Nzg5O1xuICB0aGlzLkNfaW1bMl0gPSAtMC4wMDc4MDk1OTg7XG4gIHRoaXMuQ19yZVszXSA9IDAuNTA4MzA3NTEzO1xuICB0aGlzLkNfaW1bM10gPSAtMC4xMTIyMDg5NTI7XG4gIHRoaXMuQ19yZVs0XSA9IC0wLjE1MDk0NzYyO1xuICB0aGlzLkNfaW1bNF0gPSAwLjE4MjAwNjAyO1xuICB0aGlzLkNfcmVbNV0gPSAxLjAxNDE4MTc5O1xuICB0aGlzLkNfaW1bNV0gPSAxLjY0NDk3Njk2O1xuICB0aGlzLkNfcmVbNl0gPSAxLjk2NjA1NDk7XG4gIHRoaXMuQ19pbVs2XSA9IDIuNTEyNzY0NTtcblxuICB0aGlzLkQgPSBbXTtcbiAgdGhpcy5EWzFdID0gMS41NjI3MDE0MjQzO1xuICB0aGlzLkRbMl0gPSAwLjUxODU0MDYzOTg7XG4gIHRoaXMuRFszXSA9IC0wLjAzMzMzMDk4O1xuICB0aGlzLkRbNF0gPSAtMC4xMDUyOTA2O1xuICB0aGlzLkRbNV0gPSAtMC4wMzY4NTk0O1xuICB0aGlzLkRbNl0gPSAwLjAwNzMxNztcbiAgdGhpcy5EWzddID0gMC4wMTIyMDtcbiAgdGhpcy5EWzhdID0gMC4wMDM5NDtcbiAgdGhpcy5EWzldID0gLTAuMDAxMztcbn07XG5cbi8qKlxuICAgIE5ldyBaZWFsYW5kIE1hcCBHcmlkIEZvcndhcmQgIC0gbG9uZy9sYXQgdG8geC95XG4gICAgbG9uZy9sYXQgaW4gcmFkaWFuc1xuICAqL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuICB2YXIgbjtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcblxuICB2YXIgZGVsdGFfbGF0ID0gbGF0IC0gdGhpcy5sYXQwO1xuICB2YXIgZGVsdGFfbG9uID0gbG9uIC0gdGhpcy5sb25nMDtcblxuICAvLyAxLiBDYWxjdWxhdGUgZF9waGkgYW5kIGRfcHNpICAgIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGRfbGFtYmRhXG4gIC8vIEZvciB0aGlzIGFsZ29yaXRobSwgZGVsdGFfbGF0aXR1ZGUgaXMgaW4gc2Vjb25kcyBvZiBhcmMgeCAxMC01LCBzbyB3ZSBuZWVkIHRvIHNjYWxlIHRvIHRob3NlIHVuaXRzLiBMb25naXR1ZGUgaXMgcmFkaWFucy5cbiAgdmFyIGRfcGhpID0gZGVsdGFfbGF0IC8gU0VDX1RPX1JBRCAqIDFFLTU7XG4gIHZhciBkX2xhbWJkYSA9IGRlbHRhX2xvbjtcbiAgdmFyIGRfcGhpX24gPSAxOyAvLyBkX3BoaV4wXG5cbiAgdmFyIGRfcHNpID0gMDtcbiAgZm9yIChuID0gMTsgbiA8PSAxMDsgbisrKSB7XG4gICAgZF9waGlfbiA9IGRfcGhpX24gKiBkX3BoaTtcbiAgICBkX3BzaSA9IGRfcHNpICsgdGhpcy5BW25dICogZF9waGlfbjtcbiAgfVxuXG4gIC8vIDIuIENhbGN1bGF0ZSB0aGV0YVxuICB2YXIgdGhfcmUgPSBkX3BzaTtcbiAgdmFyIHRoX2ltID0gZF9sYW1iZGE7XG5cbiAgLy8gMy4gQ2FsY3VsYXRlIHpcbiAgdmFyIHRoX25fcmUgPSAxO1xuICB2YXIgdGhfbl9pbSA9IDA7IC8vIHRoZXRhXjBcbiAgdmFyIHRoX25fcmUxO1xuICB2YXIgdGhfbl9pbTE7XG5cbiAgdmFyIHpfcmUgPSAwO1xuICB2YXIgel9pbSA9IDA7XG4gIGZvciAobiA9IDE7IG4gPD0gNjsgbisrKSB7XG4gICAgdGhfbl9yZTEgPSB0aF9uX3JlICogdGhfcmUgLSB0aF9uX2ltICogdGhfaW07XG4gICAgdGhfbl9pbTEgPSB0aF9uX2ltICogdGhfcmUgKyB0aF9uX3JlICogdGhfaW07XG4gICAgdGhfbl9yZSA9IHRoX25fcmUxO1xuICAgIHRoX25faW0gPSB0aF9uX2ltMTtcbiAgICB6X3JlID0gel9yZSArIHRoaXMuQl9yZVtuXSAqIHRoX25fcmUgLSB0aGlzLkJfaW1bbl0gKiB0aF9uX2ltO1xuICAgIHpfaW0gPSB6X2ltICsgdGhpcy5CX2ltW25dICogdGhfbl9yZSArIHRoaXMuQl9yZVtuXSAqIHRoX25faW07XG4gIH1cblxuICAvLyA0LiBDYWxjdWxhdGUgZWFzdGluZyBhbmQgbm9ydGhpbmdcbiAgcC54ID0gKHpfaW0gKiB0aGlzLmEpICsgdGhpcy54MDtcbiAgcC55ID0gKHpfcmUgKiB0aGlzLmEpICsgdGhpcy55MDtcblxuICByZXR1cm4gcDtcbn07XG5cblxuLyoqXG4gICAgTmV3IFplYWxhbmQgTWFwIEdyaWQgSW52ZXJzZSAgLSAgeC95IHRvIGxvbmcvbGF0XG4gICovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBuO1xuICB2YXIgeCA9IHAueDtcbiAgdmFyIHkgPSBwLnk7XG5cbiAgdmFyIGRlbHRhX3ggPSB4IC0gdGhpcy54MDtcbiAgdmFyIGRlbHRhX3kgPSB5IC0gdGhpcy55MDtcblxuICAvLyAxLiBDYWxjdWxhdGUgelxuICB2YXIgel9yZSA9IGRlbHRhX3kgLyB0aGlzLmE7XG4gIHZhciB6X2ltID0gZGVsdGFfeCAvIHRoaXMuYTtcblxuICAvLyAyYS4gQ2FsY3VsYXRlIHRoZXRhIC0gZmlyc3QgYXBwcm94aW1hdGlvbiBnaXZlcyBrbSBhY2N1cmFjeVxuICB2YXIgel9uX3JlID0gMTtcbiAgdmFyIHpfbl9pbSA9IDA7IC8vIHpeMFxuICB2YXIgel9uX3JlMTtcbiAgdmFyIHpfbl9pbTE7XG5cbiAgdmFyIHRoX3JlID0gMDtcbiAgdmFyIHRoX2ltID0gMDtcbiAgZm9yIChuID0gMTsgbiA8PSA2OyBuKyspIHtcbiAgICB6X25fcmUxID0gel9uX3JlICogel9yZSAtIHpfbl9pbSAqIHpfaW07XG4gICAgel9uX2ltMSA9IHpfbl9pbSAqIHpfcmUgKyB6X25fcmUgKiB6X2ltO1xuICAgIHpfbl9yZSA9IHpfbl9yZTE7XG4gICAgel9uX2ltID0gel9uX2ltMTtcbiAgICB0aF9yZSA9IHRoX3JlICsgdGhpcy5DX3JlW25dICogel9uX3JlIC0gdGhpcy5DX2ltW25dICogel9uX2ltO1xuICAgIHRoX2ltID0gdGhfaW0gKyB0aGlzLkNfaW1bbl0gKiB6X25fcmUgKyB0aGlzLkNfcmVbbl0gKiB6X25faW07XG4gIH1cblxuICAvLyAyYi4gSXRlcmF0ZSB0byByZWZpbmUgdGhlIGFjY3VyYWN5IG9mIHRoZSBjYWxjdWxhdGlvblxuICAvLyAgICAgICAgMCBpdGVyYXRpb25zIGdpdmVzIGttIGFjY3VyYWN5XG4gIC8vICAgICAgICAxIGl0ZXJhdGlvbiBnaXZlcyBtIGFjY3VyYWN5IC0tIGdvb2QgZW5vdWdoIGZvciBtb3N0IG1hcHBpbmcgYXBwbGljYXRpb25zXG4gIC8vICAgICAgICAyIGl0ZXJhdGlvbnMgYml2ZXMgbW0gYWNjdXJhY3lcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLml0ZXJhdGlvbnM7IGkrKykge1xuICAgIHZhciB0aF9uX3JlID0gdGhfcmU7XG4gICAgdmFyIHRoX25faW0gPSB0aF9pbTtcbiAgICB2YXIgdGhfbl9yZTE7XG4gICAgdmFyIHRoX25faW0xO1xuXG4gICAgdmFyIG51bV9yZSA9IHpfcmU7XG4gICAgdmFyIG51bV9pbSA9IHpfaW07XG4gICAgZm9yIChuID0gMjsgbiA8PSA2OyBuKyspIHtcbiAgICAgIHRoX25fcmUxID0gdGhfbl9yZSAqIHRoX3JlIC0gdGhfbl9pbSAqIHRoX2ltO1xuICAgICAgdGhfbl9pbTEgPSB0aF9uX2ltICogdGhfcmUgKyB0aF9uX3JlICogdGhfaW07XG4gICAgICB0aF9uX3JlID0gdGhfbl9yZTE7XG4gICAgICB0aF9uX2ltID0gdGhfbl9pbTE7XG4gICAgICBudW1fcmUgPSBudW1fcmUgKyAobiAtIDEpICogKHRoaXMuQl9yZVtuXSAqIHRoX25fcmUgLSB0aGlzLkJfaW1bbl0gKiB0aF9uX2ltKTtcbiAgICAgIG51bV9pbSA9IG51bV9pbSArIChuIC0gMSkgKiAodGhpcy5CX2ltW25dICogdGhfbl9yZSArIHRoaXMuQl9yZVtuXSAqIHRoX25faW0pO1xuICAgIH1cblxuICAgIHRoX25fcmUgPSAxO1xuICAgIHRoX25faW0gPSAwO1xuICAgIHZhciBkZW5fcmUgPSB0aGlzLkJfcmVbMV07XG4gICAgdmFyIGRlbl9pbSA9IHRoaXMuQl9pbVsxXTtcbiAgICBmb3IgKG4gPSAyOyBuIDw9IDY7IG4rKykge1xuICAgICAgdGhfbl9yZTEgPSB0aF9uX3JlICogdGhfcmUgLSB0aF9uX2ltICogdGhfaW07XG4gICAgICB0aF9uX2ltMSA9IHRoX25faW0gKiB0aF9yZSArIHRoX25fcmUgKiB0aF9pbTtcbiAgICAgIHRoX25fcmUgPSB0aF9uX3JlMTtcbiAgICAgIHRoX25faW0gPSB0aF9uX2ltMTtcbiAgICAgIGRlbl9yZSA9IGRlbl9yZSArIG4gKiAodGhpcy5CX3JlW25dICogdGhfbl9yZSAtIHRoaXMuQl9pbVtuXSAqIHRoX25faW0pO1xuICAgICAgZGVuX2ltID0gZGVuX2ltICsgbiAqICh0aGlzLkJfaW1bbl0gKiB0aF9uX3JlICsgdGhpcy5CX3JlW25dICogdGhfbl9pbSk7XG4gICAgfVxuXG4gICAgLy8gQ29tcGxleCBkaXZpc2lvblxuICAgIHZhciBkZW4yID0gZGVuX3JlICogZGVuX3JlICsgZGVuX2ltICogZGVuX2ltO1xuICAgIHRoX3JlID0gKG51bV9yZSAqIGRlbl9yZSArIG51bV9pbSAqIGRlbl9pbSkgLyBkZW4yO1xuICAgIHRoX2ltID0gKG51bV9pbSAqIGRlbl9yZSAtIG51bV9yZSAqIGRlbl9pbSkgLyBkZW4yO1xuICB9XG5cbiAgLy8gMy4gQ2FsY3VsYXRlIGRfcGhpICAgICAgICAgICAgICAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZF9sYW1iZGFcbiAgdmFyIGRfcHNpID0gdGhfcmU7XG4gIHZhciBkX2xhbWJkYSA9IHRoX2ltO1xuICB2YXIgZF9wc2lfbiA9IDE7IC8vIGRfcHNpXjBcblxuICB2YXIgZF9waGkgPSAwO1xuICBmb3IgKG4gPSAxOyBuIDw9IDk7IG4rKykge1xuICAgIGRfcHNpX24gPSBkX3BzaV9uICogZF9wc2k7XG4gICAgZF9waGkgPSBkX3BoaSArIHRoaXMuRFtuXSAqIGRfcHNpX247XG4gIH1cblxuICAvLyA0LiBDYWxjdWxhdGUgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZVxuICAvLyBkX3BoaSBpcyBjYWxjdWF0ZWQgaW4gc2Vjb25kIG9mIGFyYyAqIDEwXi01LCBzbyB3ZSBuZWVkIHRvIHNjYWxlIGJhY2sgdG8gcmFkaWFucy4gZF9sYW1iZGEgaXMgaW4gcmFkaWFucy5cbiAgdmFyIGxhdCA9IHRoaXMubGF0MCArIChkX3BoaSAqIFNFQ19UT19SQUQgKiAxRTUpO1xuICB2YXIgbG9uID0gdGhpcy5sb25nMCArIGRfbGFtYmRhO1xuXG4gIHAueCA9IGxvbjtcbiAgcC55ID0gbGF0O1xuXG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJOZXdfWmVhbGFuZF9NYXBfR3JpZFwiLCBcIm56bWdcIl07IiwidmFyIHRzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3RzZm56Jyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgcGhpMnogPSByZXF1aXJlKCcuLi9jb21tb24vcGhpMnonKTtcbnZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIEZPUlRQSSA9IE1hdGguUEkvNDtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG5cbi8qIEluaXRpYWxpemUgdGhlIE9ibGlxdWUgTWVyY2F0b3IgIHByb2plY3Rpb25cbiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMubm9fb2ZmID0gdGhpcy5ub19vZmYgfHwgZmFsc2U7XG4gIHRoaXMubm9fcm90ID0gdGhpcy5ub19yb3QgfHwgZmFsc2U7XG5cbiAgaWYgKGlzTmFOKHRoaXMuazApKSB7XG4gICAgdGhpcy5rMCA9IDE7XG4gIH1cbiAgdmFyIHNpbmxhdCA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gIHZhciBjb3NsYXQgPSBNYXRoLmNvcyh0aGlzLmxhdDApO1xuICB2YXIgY29uID0gdGhpcy5lICogc2lubGF0O1xuXG4gIHRoaXMuYmwgPSBNYXRoLnNxcnQoMSArIHRoaXMuZXMgLyAoMSAtIHRoaXMuZXMpICogTWF0aC5wb3coY29zbGF0LCA0KSk7XG4gIHRoaXMuYWwgPSB0aGlzLmEgKiB0aGlzLmJsICogdGhpcy5rMCAqIE1hdGguc3FydCgxIC0gdGhpcy5lcykgLyAoMSAtIGNvbiAqIGNvbik7XG4gIHZhciB0MCA9IHRzZm56KHRoaXMuZSwgdGhpcy5sYXQwLCBzaW5sYXQpO1xuICB2YXIgZGwgPSB0aGlzLmJsIC8gY29zbGF0ICogTWF0aC5zcXJ0KCgxIC0gdGhpcy5lcykgLyAoMSAtIGNvbiAqIGNvbikpO1xuICBpZiAoZGwgKiBkbCA8IDEpIHtcbiAgICBkbCA9IDE7XG4gIH1cbiAgdmFyIGZsO1xuICB2YXIgZ2w7XG4gIGlmICghaXNOYU4odGhpcy5sb25nYykpIHtcbiAgICAvL0NlbnRyYWwgcG9pbnQgYW5kIGF6aW11dGggbWV0aG9kXG5cbiAgICBpZiAodGhpcy5sYXQwID49IDApIHtcbiAgICAgIGZsID0gZGwgKyBNYXRoLnNxcnQoZGwgKiBkbCAtIDEpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGZsID0gZGwgLSBNYXRoLnNxcnQoZGwgKiBkbCAtIDEpO1xuICAgIH1cbiAgICB0aGlzLmVsID0gZmwgKiBNYXRoLnBvdyh0MCwgdGhpcy5ibCk7XG4gICAgZ2wgPSAwLjUgKiAoZmwgLSAxIC8gZmwpO1xuICAgIHRoaXMuZ2FtbWEwID0gTWF0aC5hc2luKE1hdGguc2luKHRoaXMuYWxwaGEpIC8gZGwpO1xuICAgIHRoaXMubG9uZzAgPSB0aGlzLmxvbmdjIC0gTWF0aC5hc2luKGdsICogTWF0aC50YW4odGhpcy5nYW1tYTApKSAvIHRoaXMuYmw7XG5cbiAgfVxuICBlbHNlIHtcbiAgICAvLzIgcG9pbnRzIG1ldGhvZFxuICAgIHZhciB0MSA9IHRzZm56KHRoaXMuZSwgdGhpcy5sYXQxLCBNYXRoLnNpbih0aGlzLmxhdDEpKTtcbiAgICB2YXIgdDIgPSB0c2Zueih0aGlzLmUsIHRoaXMubGF0MiwgTWF0aC5zaW4odGhpcy5sYXQyKSk7XG4gICAgaWYgKHRoaXMubGF0MCA+PSAwKSB7XG4gICAgICB0aGlzLmVsID0gKGRsICsgTWF0aC5zcXJ0KGRsICogZGwgLSAxKSkgKiBNYXRoLnBvdyh0MCwgdGhpcy5ibCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5lbCA9IChkbCAtIE1hdGguc3FydChkbCAqIGRsIC0gMSkpICogTWF0aC5wb3codDAsIHRoaXMuYmwpO1xuICAgIH1cbiAgICB2YXIgaGwgPSBNYXRoLnBvdyh0MSwgdGhpcy5ibCk7XG4gICAgdmFyIGxsID0gTWF0aC5wb3codDIsIHRoaXMuYmwpO1xuICAgIGZsID0gdGhpcy5lbCAvIGhsO1xuICAgIGdsID0gMC41ICogKGZsIC0gMSAvIGZsKTtcbiAgICB2YXIgamwgPSAodGhpcy5lbCAqIHRoaXMuZWwgLSBsbCAqIGhsKSAvICh0aGlzLmVsICogdGhpcy5lbCArIGxsICogaGwpO1xuICAgIHZhciBwbCA9IChsbCAtIGhsKSAvIChsbCArIGhsKTtcbiAgICB2YXIgZGxvbjEyID0gYWRqdXN0X2xvbih0aGlzLmxvbmcxIC0gdGhpcy5sb25nMik7XG4gICAgdGhpcy5sb25nMCA9IDAuNSAqICh0aGlzLmxvbmcxICsgdGhpcy5sb25nMikgLSBNYXRoLmF0YW4oamwgKiBNYXRoLnRhbigwLjUgKiB0aGlzLmJsICogKGRsb24xMikpIC8gcGwpIC8gdGhpcy5ibDtcbiAgICB0aGlzLmxvbmcwID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwKTtcbiAgICB2YXIgZGxvbjEwID0gYWRqdXN0X2xvbih0aGlzLmxvbmcxIC0gdGhpcy5sb25nMCk7XG4gICAgdGhpcy5nYW1tYTAgPSBNYXRoLmF0YW4oTWF0aC5zaW4odGhpcy5ibCAqIChkbG9uMTApKSAvIGdsKTtcbiAgICB0aGlzLmFscGhhID0gTWF0aC5hc2luKGRsICogTWF0aC5zaW4odGhpcy5nYW1tYTApKTtcbiAgfVxuXG4gIGlmICh0aGlzLm5vX29mZikge1xuICAgIHRoaXMudWMgPSAwO1xuICB9XG4gIGVsc2Uge1xuICAgIGlmICh0aGlzLmxhdDAgPj0gMCkge1xuICAgICAgdGhpcy51YyA9IHRoaXMuYWwgLyB0aGlzLmJsICogTWF0aC5hdGFuMihNYXRoLnNxcnQoZGwgKiBkbCAtIDEpLCBNYXRoLmNvcyh0aGlzLmFscGhhKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy51YyA9IC0xICogdGhpcy5hbCAvIHRoaXMuYmwgKiBNYXRoLmF0YW4yKE1hdGguc3FydChkbCAqIGRsIC0gMSksIE1hdGguY29zKHRoaXMuYWxwaGEpKTtcbiAgICB9XG4gIH1cblxufTtcblxuXG4vKiBPYmxpcXVlIE1lcmNhdG9yIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciB1cywgdnM7XG4gIHZhciBjb247XG4gIGlmIChNYXRoLmFicyhNYXRoLmFicyhsYXQpIC0gSEFMRl9QSSkgPD0gRVBTTE4pIHtcbiAgICBpZiAobGF0ID4gMCkge1xuICAgICAgY29uID0gLTE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uID0gMTtcbiAgICB9XG4gICAgdnMgPSB0aGlzLmFsIC8gdGhpcy5ibCAqIE1hdGgubG9nKE1hdGgudGFuKEZPUlRQSSArIGNvbiAqIHRoaXMuZ2FtbWEwICogMC41KSk7XG4gICAgdXMgPSAtMSAqIGNvbiAqIEhBTEZfUEkgKiB0aGlzLmFsIC8gdGhpcy5ibDtcbiAgfVxuICBlbHNlIHtcbiAgICB2YXIgdCA9IHRzZm56KHRoaXMuZSwgbGF0LCBNYXRoLnNpbihsYXQpKTtcbiAgICB2YXIgcWwgPSB0aGlzLmVsIC8gTWF0aC5wb3codCwgdGhpcy5ibCk7XG4gICAgdmFyIHNsID0gMC41ICogKHFsIC0gMSAvIHFsKTtcbiAgICB2YXIgdGwgPSAwLjUgKiAocWwgKyAxIC8gcWwpO1xuICAgIHZhciB2bCA9IE1hdGguc2luKHRoaXMuYmwgKiAoZGxvbikpO1xuICAgIHZhciB1bCA9IChzbCAqIE1hdGguc2luKHRoaXMuZ2FtbWEwKSAtIHZsICogTWF0aC5jb3ModGhpcy5nYW1tYTApKSAvIHRsO1xuICAgIGlmIChNYXRoLmFicyhNYXRoLmFicyh1bCkgLSAxKSA8PSBFUFNMTikge1xuICAgICAgdnMgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdnMgPSAwLjUgKiB0aGlzLmFsICogTWF0aC5sb2coKDEgLSB1bCkgLyAoMSArIHVsKSkgLyB0aGlzLmJsO1xuICAgIH1cbiAgICBpZiAoTWF0aC5hYnMoTWF0aC5jb3ModGhpcy5ibCAqIChkbG9uKSkpIDw9IEVQU0xOKSB7XG4gICAgICB1cyA9IHRoaXMuYWwgKiB0aGlzLmJsICogKGRsb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHVzID0gdGhpcy5hbCAqIE1hdGguYXRhbjIoc2wgKiBNYXRoLmNvcyh0aGlzLmdhbW1hMCkgKyB2bCAqIE1hdGguc2luKHRoaXMuZ2FtbWEwKSwgTWF0aC5jb3ModGhpcy5ibCAqIGRsb24pKSAvIHRoaXMuYmw7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMubm9fcm90KSB7XG4gICAgcC54ID0gdGhpcy54MCArIHVzO1xuICAgIHAueSA9IHRoaXMueTAgKyB2cztcbiAgfVxuICBlbHNlIHtcblxuICAgIHVzIC09IHRoaXMudWM7XG4gICAgcC54ID0gdGhpcy54MCArIHZzICogTWF0aC5jb3ModGhpcy5hbHBoYSkgKyB1cyAqIE1hdGguc2luKHRoaXMuYWxwaGEpO1xuICAgIHAueSA9IHRoaXMueTAgKyB1cyAqIE1hdGguY29zKHRoaXMuYWxwaGEpIC0gdnMgKiBNYXRoLnNpbih0aGlzLmFscGhhKTtcbiAgfVxuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHVzLCB2cztcbiAgaWYgKHRoaXMubm9fcm90KSB7XG4gICAgdnMgPSBwLnkgLSB0aGlzLnkwO1xuICAgIHVzID0gcC54IC0gdGhpcy54MDtcbiAgfVxuICBlbHNlIHtcbiAgICB2cyA9IChwLnggLSB0aGlzLngwKSAqIE1hdGguY29zKHRoaXMuYWxwaGEpIC0gKHAueSAtIHRoaXMueTApICogTWF0aC5zaW4odGhpcy5hbHBoYSk7XG4gICAgdXMgPSAocC55IC0gdGhpcy55MCkgKiBNYXRoLmNvcyh0aGlzLmFscGhhKSArIChwLnggLSB0aGlzLngwKSAqIE1hdGguc2luKHRoaXMuYWxwaGEpO1xuICAgIHVzICs9IHRoaXMudWM7XG4gIH1cbiAgdmFyIHFwID0gTWF0aC5leHAoLTEgKiB0aGlzLmJsICogdnMgLyB0aGlzLmFsKTtcbiAgdmFyIHNwID0gMC41ICogKHFwIC0gMSAvIHFwKTtcbiAgdmFyIHRwID0gMC41ICogKHFwICsgMSAvIHFwKTtcbiAgdmFyIHZwID0gTWF0aC5zaW4odGhpcy5ibCAqIHVzIC8gdGhpcy5hbCk7XG4gIHZhciB1cCA9ICh2cCAqIE1hdGguY29zKHRoaXMuZ2FtbWEwKSArIHNwICogTWF0aC5zaW4odGhpcy5nYW1tYTApKSAvIHRwO1xuICB2YXIgdHMgPSBNYXRoLnBvdyh0aGlzLmVsIC8gTWF0aC5zcXJ0KCgxICsgdXApIC8gKDEgLSB1cCkpLCAxIC8gdGhpcy5ibCk7XG4gIGlmIChNYXRoLmFicyh1cCAtIDEpIDwgRVBTTE4pIHtcbiAgICBwLnggPSB0aGlzLmxvbmcwO1xuICAgIHAueSA9IEhBTEZfUEk7XG4gIH1cbiAgZWxzZSBpZiAoTWF0aC5hYnModXAgKyAxKSA8IEVQU0xOKSB7XG4gICAgcC54ID0gdGhpcy5sb25nMDtcbiAgICBwLnkgPSAtMSAqIEhBTEZfUEk7XG4gIH1cbiAgZWxzZSB7XG4gICAgcC55ID0gcGhpMnoodGhpcy5lLCB0cyk7XG4gICAgcC54ID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwIC0gTWF0aC5hdGFuMihzcCAqIE1hdGguY29zKHRoaXMuZ2FtbWEwKSAtIHZwICogTWF0aC5zaW4odGhpcy5nYW1tYTApLCBNYXRoLmNvcyh0aGlzLmJsICogdXMgLyB0aGlzLmFsKSkgLyB0aGlzLmJsKTtcbiAgfVxuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMubmFtZXMgPSBbXCJIb3RpbmVfT2JsaXF1ZV9NZXJjYXRvclwiLCBcIkhvdGluZSBPYmxpcXVlIE1lcmNhdG9yXCIsIFwiSG90aW5lX09ibGlxdWVfTWVyY2F0b3JfQXppbXV0aF9OYXR1cmFsX09yaWdpblwiLCBcIkhvdGluZV9PYmxpcXVlX01lcmNhdG9yX0F6aW11dGhfQ2VudGVyXCIsIFwib21lcmNcIl07IiwidmFyIGUwZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTBmbicpO1xudmFyIGUxZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTFmbicpO1xudmFyIGUyZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTJmbicpO1xudmFyIGUzZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTNmbicpO1xudmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIGFkanVzdF9sYXQgPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xhdCcpO1xudmFyIG1sZm4gPSByZXF1aXJlKCcuLi9jb21tb24vbWxmbicpO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBnTiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9nTicpO1xudmFyIE1BWF9JVEVSID0gMjA7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgLyogUGxhY2UgcGFyYW1ldGVycyBpbiBzdGF0aWMgc3RvcmFnZSBmb3IgY29tbW9uIHVzZVxuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIHRoaXMudGVtcCA9IHRoaXMuYiAvIHRoaXMuYTtcbiAgdGhpcy5lcyA9IDEgLSBNYXRoLnBvdyh0aGlzLnRlbXAsIDIpOyAvLyBkZXZhaXQgZXRyZSBkYW5zIHRtZXJjLmpzIG1haXMgbiB5IGVzdCBwYXMgZG9uYyBqZSBjb21tZW50ZSBzaW5vbiByZXRvdXIgZGUgdmFsZXVycyBudWxsZXNcbiAgdGhpcy5lID0gTWF0aC5zcXJ0KHRoaXMuZXMpO1xuICB0aGlzLmUwID0gZTBmbih0aGlzLmVzKTtcbiAgdGhpcy5lMSA9IGUxZm4odGhpcy5lcyk7XG4gIHRoaXMuZTIgPSBlMmZuKHRoaXMuZXMpO1xuICB0aGlzLmUzID0gZTNmbih0aGlzLmVzKTtcbiAgdGhpcy5tbDAgPSB0aGlzLmEgKiBtbGZuKHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMsIHRoaXMubGF0MCk7IC8vc2kgcXVlIGRlcyB6ZXJvcyBsZSBjYWxjdWwgbmUgc2UgZmFpdCBwYXNcbn07XG5cblxuLyogUG9seWNvbmljIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciB4LCB5LCBlbDtcbiAgdmFyIGRsb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICBlbCA9IGRsb24gKiBNYXRoLnNpbihsYXQpO1xuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBpZiAoTWF0aC5hYnMobGF0KSA8PSBFUFNMTikge1xuICAgICAgeCA9IHRoaXMuYSAqIGRsb247XG4gICAgICB5ID0gLTEgKiB0aGlzLmEgKiB0aGlzLmxhdDA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgeCA9IHRoaXMuYSAqIE1hdGguc2luKGVsKSAvIE1hdGgudGFuKGxhdCk7XG4gICAgICB5ID0gdGhpcy5hICogKGFkanVzdF9sYXQobGF0IC0gdGhpcy5sYXQwKSArICgxIC0gTWF0aC5jb3MoZWwpKSAvIE1hdGgudGFuKGxhdCkpO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBpZiAoTWF0aC5hYnMobGF0KSA8PSBFUFNMTikge1xuICAgICAgeCA9IHRoaXMuYSAqIGRsb247XG4gICAgICB5ID0gLTEgKiB0aGlzLm1sMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YXIgbmwgPSBnTih0aGlzLmEsIHRoaXMuZSwgTWF0aC5zaW4obGF0KSkgLyBNYXRoLnRhbihsYXQpO1xuICAgICAgeCA9IG5sICogTWF0aC5zaW4oZWwpO1xuICAgICAgeSA9IHRoaXMuYSAqIG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgbGF0KSAtIHRoaXMubWwwICsgbmwgKiAoMSAtIE1hdGguY29zKGVsKSk7XG4gICAgfVxuXG4gIH1cbiAgcC54ID0geCArIHRoaXMueDA7XG4gIHAueSA9IHkgKyB0aGlzLnkwO1xuICByZXR1cm4gcDtcbn07XG5cblxuLyogSW52ZXJzZSBlcXVhdGlvbnNcbiAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICB2YXIgbG9uLCBsYXQsIHgsIHksIGk7XG4gIHZhciBhbCwgYmw7XG4gIHZhciBwaGksIGRwaGk7XG4gIHggPSBwLnggLSB0aGlzLngwO1xuICB5ID0gcC55IC0gdGhpcy55MDtcblxuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBpZiAoTWF0aC5hYnMoeSArIHRoaXMuYSAqIHRoaXMubGF0MCkgPD0gRVBTTE4pIHtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24oeCAvIHRoaXMuYSArIHRoaXMubG9uZzApO1xuICAgICAgbGF0ID0gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBhbCA9IHRoaXMubGF0MCArIHkgLyB0aGlzLmE7XG4gICAgICBibCA9IHggKiB4IC8gdGhpcy5hIC8gdGhpcy5hICsgYWwgKiBhbDtcbiAgICAgIHBoaSA9IGFsO1xuICAgICAgdmFyIHRhbnBoaTtcbiAgICAgIGZvciAoaSA9IE1BWF9JVEVSOyBpOyAtLWkpIHtcbiAgICAgICAgdGFucGhpID0gTWF0aC50YW4ocGhpKTtcbiAgICAgICAgZHBoaSA9IC0xICogKGFsICogKHBoaSAqIHRhbnBoaSArIDEpIC0gcGhpIC0gMC41ICogKHBoaSAqIHBoaSArIGJsKSAqIHRhbnBoaSkgLyAoKHBoaSAtIGFsKSAvIHRhbnBoaSAtIDEpO1xuICAgICAgICBwaGkgKz0gZHBoaTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGRwaGkpIDw9IEVQU0xOKSB7XG4gICAgICAgICAgbGF0ID0gcGhpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyAoTWF0aC5hc2luKHggKiBNYXRoLnRhbihwaGkpIC8gdGhpcy5hKSkgLyBNYXRoLnNpbihsYXQpKTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKE1hdGguYWJzKHkgKyB0aGlzLm1sMCkgPD0gRVBTTE4pIHtcbiAgICAgIGxhdCA9IDA7XG4gICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyB4IC8gdGhpcy5hKTtcbiAgICB9XG4gICAgZWxzZSB7XG5cbiAgICAgIGFsID0gKHRoaXMubWwwICsgeSkgLyB0aGlzLmE7XG4gICAgICBibCA9IHggKiB4IC8gdGhpcy5hIC8gdGhpcy5hICsgYWwgKiBhbDtcbiAgICAgIHBoaSA9IGFsO1xuICAgICAgdmFyIGNsLCBtbG4sIG1sbnAsIG1hO1xuICAgICAgdmFyIGNvbjtcbiAgICAgIGZvciAoaSA9IE1BWF9JVEVSOyBpOyAtLWkpIHtcbiAgICAgICAgY29uID0gdGhpcy5lICogTWF0aC5zaW4ocGhpKTtcbiAgICAgICAgY2wgPSBNYXRoLnNxcnQoMSAtIGNvbiAqIGNvbikgKiBNYXRoLnRhbihwaGkpO1xuICAgICAgICBtbG4gPSB0aGlzLmEgKiBtbGZuKHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMsIHBoaSk7XG4gICAgICAgIG1sbnAgPSB0aGlzLmUwIC0gMiAqIHRoaXMuZTEgKiBNYXRoLmNvcygyICogcGhpKSArIDQgKiB0aGlzLmUyICogTWF0aC5jb3MoNCAqIHBoaSkgLSA2ICogdGhpcy5lMyAqIE1hdGguY29zKDYgKiBwaGkpO1xuICAgICAgICBtYSA9IG1sbiAvIHRoaXMuYTtcbiAgICAgICAgZHBoaSA9IChhbCAqIChjbCAqIG1hICsgMSkgLSBtYSAtIDAuNSAqIGNsICogKG1hICogbWEgKyBibCkpIC8gKHRoaXMuZXMgKiBNYXRoLnNpbigyICogcGhpKSAqIChtYSAqIG1hICsgYmwgLSAyICogYWwgKiBtYSkgLyAoNCAqIGNsKSArIChhbCAtIG1hKSAqIChjbCAqIG1sbnAgLSAyIC8gTWF0aC5zaW4oMiAqIHBoaSkpIC0gbWxucCk7XG4gICAgICAgIHBoaSAtPSBkcGhpO1xuICAgICAgICBpZiAoTWF0aC5hYnMoZHBoaSkgPD0gRVBTTE4pIHtcbiAgICAgICAgICBsYXQgPSBwaGk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy9sYXQ9cGhpNHoodGhpcy5lLHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsYWwsYmwsMCwwKTtcbiAgICAgIGNsID0gTWF0aC5zcXJ0KDEgLSB0aGlzLmVzICogTWF0aC5wb3coTWF0aC5zaW4obGF0KSwgMikpICogTWF0aC50YW4obGF0KTtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXNpbih4ICogY2wgLyB0aGlzLmEpIC8gTWF0aC5zaW4obGF0KSk7XG4gICAgfVxuICB9XG5cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJQb2x5Y29uaWNcIiwgXCJwb2x5XCJdOyIsInZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBhZGp1c3RfbGF0ID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sYXQnKTtcbnZhciBwal9lbmZuID0gcmVxdWlyZSgnLi4vY29tbW9uL3BqX2VuZm4nKTtcbnZhciBNQVhfSVRFUiA9IDIwO1xudmFyIHBqX21sZm4gPSByZXF1aXJlKCcuLi9jb21tb24vcGpfbWxmbicpO1xudmFyIHBqX2ludl9tbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL3BqX2ludl9tbGZuJyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG52YXIgYXNpbnogPSByZXF1aXJlKCcuLi9jb21tb24vYXNpbnonKTtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAvKiBQbGFjZSBwYXJhbWV0ZXJzIGluIHN0YXRpYyBzdG9yYWdlIGZvciBjb21tb24gdXNlXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuICBpZiAoIXRoaXMuc3BoZXJlKSB7XG4gICAgdGhpcy5lbiA9IHBqX2VuZm4odGhpcy5lcyk7XG4gIH1cbiAgZWxzZSB7XG4gICAgdGhpcy5uID0gMTtcbiAgICB0aGlzLm0gPSAwO1xuICAgIHRoaXMuZXMgPSAwO1xuICAgIHRoaXMuQ195ID0gTWF0aC5zcXJ0KCh0aGlzLm0gKyAxKSAvIHRoaXMubik7XG4gICAgdGhpcy5DX3ggPSB0aGlzLkNfeSAvICh0aGlzLm0gKyAxKTtcbiAgfVxuXG59O1xuXG4vKiBTaW51c29pZGFsIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciB4LCB5O1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICAvKiBGb3J3YXJkIGVxdWF0aW9uc1xuICAgIC0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcblxuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBpZiAoIXRoaXMubSkge1xuICAgICAgbGF0ID0gdGhpcy5uICE9PSAxID8gTWF0aC5hc2luKHRoaXMubiAqIE1hdGguc2luKGxhdCkpIDogbGF0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHZhciBrID0gdGhpcy5uICogTWF0aC5zaW4obGF0KTtcbiAgICAgIGZvciAodmFyIGkgPSBNQVhfSVRFUjsgaTsgLS1pKSB7XG4gICAgICAgIHZhciBWID0gKHRoaXMubSAqIGxhdCArIE1hdGguc2luKGxhdCkgLSBrKSAvICh0aGlzLm0gKyBNYXRoLmNvcyhsYXQpKTtcbiAgICAgICAgbGF0IC09IFY7XG4gICAgICAgIGlmIChNYXRoLmFicyhWKSA8IEVQU0xOKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgeCA9IHRoaXMuYSAqIHRoaXMuQ194ICogbG9uICogKHRoaXMubSArIE1hdGguY29zKGxhdCkpO1xuICAgIHkgPSB0aGlzLmEgKiB0aGlzLkNfeSAqIGxhdDtcblxuICB9XG4gIGVsc2Uge1xuXG4gICAgdmFyIHMgPSBNYXRoLnNpbihsYXQpO1xuICAgIHZhciBjID0gTWF0aC5jb3MobGF0KTtcbiAgICB5ID0gdGhpcy5hICogcGpfbWxmbihsYXQsIHMsIGMsIHRoaXMuZW4pO1xuICAgIHggPSB0aGlzLmEgKiBsb24gKiBjIC8gTWF0aC5zcXJ0KDEgLSB0aGlzLmVzICogcyAqIHMpO1xuICB9XG5cbiAgcC54ID0geDtcbiAgcC55ID0geTtcbiAgcmV0dXJuIHA7XG59O1xuXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsYXQsIHRlbXAsIGxvbiwgcztcblxuICBwLnggLT0gdGhpcy54MDtcbiAgbG9uID0gcC54IC8gdGhpcy5hO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgbGF0ID0gcC55IC8gdGhpcy5hO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGxhdCAvPSB0aGlzLkNfeTtcbiAgICBsb24gPSBsb24gLyAodGhpcy5DX3ggKiAodGhpcy5tICsgTWF0aC5jb3MobGF0KSkpO1xuICAgIGlmICh0aGlzLm0pIHtcbiAgICAgIGxhdCA9IGFzaW56KCh0aGlzLm0gKiBsYXQgKyBNYXRoLnNpbihsYXQpKSAvIHRoaXMubik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMubiAhPT0gMSkge1xuICAgICAgbGF0ID0gYXNpbnooTWF0aC5zaW4obGF0KSAvIHRoaXMubik7XG4gICAgfVxuICAgIGxvbiA9IGFkanVzdF9sb24obG9uICsgdGhpcy5sb25nMCk7XG4gICAgbGF0ID0gYWRqdXN0X2xhdChsYXQpO1xuICB9XG4gIGVsc2Uge1xuICAgIGxhdCA9IHBqX2ludl9tbGZuKHAueSAvIHRoaXMuYSwgdGhpcy5lcywgdGhpcy5lbik7XG4gICAgcyA9IE1hdGguYWJzKGxhdCk7XG4gICAgaWYgKHMgPCBIQUxGX1BJKSB7XG4gICAgICBzID0gTWF0aC5zaW4obGF0KTtcbiAgICAgIHRlbXAgPSB0aGlzLmxvbmcwICsgcC54ICogTWF0aC5zcXJ0KDEgLSB0aGlzLmVzICogcyAqIHMpIC8gKHRoaXMuYSAqIE1hdGguY29zKGxhdCkpO1xuICAgICAgLy90ZW1wID0gdGhpcy5sb25nMCArIHAueCAvICh0aGlzLmEgKiBNYXRoLmNvcyhsYXQpKTtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGVtcCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChzIC0gRVBTTE4pIDwgSEFMRl9QSSkge1xuICAgICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICB9XG4gIH1cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJTaW51c29pZGFsXCIsIFwic2ludVwiXTsiLCIvKlxuICByZWZlcmVuY2VzOlxuICAgIEZvcm11bGVzIGV0IGNvbnN0YW50ZXMgcG91ciBsZSBDYWxjdWwgcG91ciBsYVxuICAgIHByb2plY3Rpb24gY3lsaW5kcmlxdWUgY29uZm9ybWUgw6AgYXhlIG9ibGlxdWUgZXQgcG91ciBsYSB0cmFuc2Zvcm1hdGlvbiBlbnRyZVxuICAgIGRlcyBzeXN0w6htZXMgZGUgcsOpZsOpcmVuY2UuXG4gICAgaHR0cDovL3d3dy5zd2lzc3RvcG8uYWRtaW4uY2gvaW50ZXJuZXQvc3dpc3N0b3BvL2ZyL2hvbWUvdG9waWNzL3N1cnZleS9zeXMvcmVmc3lzL3N3aXR6ZXJsYW5kLnBhcnN5c3JlbGF0ZWQxLjMxMjE2LmRvd25sb2FkTGlzdC43NzAwNC5Eb3dubG9hZEZpbGUudG1wL3N3aXNzcHJvamVjdGlvbmZyLnBkZlxuICAqL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBwaHkwID0gdGhpcy5sYXQwO1xuICB0aGlzLmxhbWJkYTAgPSB0aGlzLmxvbmcwO1xuICB2YXIgc2luUGh5MCA9IE1hdGguc2luKHBoeTApO1xuICB2YXIgc2VtaU1ham9yQXhpcyA9IHRoaXMuYTtcbiAgdmFyIGludkYgPSB0aGlzLnJmO1xuICB2YXIgZmxhdHRlbmluZyA9IDEgLyBpbnZGO1xuICB2YXIgZTIgPSAyICogZmxhdHRlbmluZyAtIE1hdGgucG93KGZsYXR0ZW5pbmcsIDIpO1xuICB2YXIgZSA9IHRoaXMuZSA9IE1hdGguc3FydChlMik7XG4gIHRoaXMuUiA9IHRoaXMuazAgKiBzZW1pTWFqb3JBeGlzICogTWF0aC5zcXJ0KDEgLSBlMikgLyAoMSAtIGUyICogTWF0aC5wb3coc2luUGh5MCwgMikpO1xuICB0aGlzLmFscGhhID0gTWF0aC5zcXJ0KDEgKyBlMiAvICgxIC0gZTIpICogTWF0aC5wb3coTWF0aC5jb3MocGh5MCksIDQpKTtcbiAgdGhpcy5iMCA9IE1hdGguYXNpbihzaW5QaHkwIC8gdGhpcy5hbHBoYSk7XG4gIHZhciBrMSA9IE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyA0ICsgdGhpcy5iMCAvIDIpKTtcbiAgdmFyIGsyID0gTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAvIDQgKyBwaHkwIC8gMikpO1xuICB2YXIgazMgPSBNYXRoLmxvZygoMSArIGUgKiBzaW5QaHkwKSAvICgxIC0gZSAqIHNpblBoeTApKTtcbiAgdGhpcy5LID0gazEgLSB0aGlzLmFscGhhICogazIgKyB0aGlzLmFscGhhICogZSAvIDIgKiBrMztcbn07XG5cblxuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuICB2YXIgU2ExID0gTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAvIDQgLSBwLnkgLyAyKSk7XG4gIHZhciBTYTIgPSB0aGlzLmUgLyAyICogTWF0aC5sb2coKDEgKyB0aGlzLmUgKiBNYXRoLnNpbihwLnkpKSAvICgxIC0gdGhpcy5lICogTWF0aC5zaW4ocC55KSkpO1xuICB2YXIgUyA9IC10aGlzLmFscGhhICogKFNhMSArIFNhMikgKyB0aGlzLks7XG5cbiAgLy8gc3BoZXJpYyBsYXRpdHVkZVxuICB2YXIgYiA9IDIgKiAoTWF0aC5hdGFuKE1hdGguZXhwKFMpKSAtIE1hdGguUEkgLyA0KTtcblxuICAvLyBzcGhlcmljIGxvbmdpdHVkZVxuICB2YXIgSSA9IHRoaXMuYWxwaGEgKiAocC54IC0gdGhpcy5sYW1iZGEwKTtcblxuICAvLyBwc29ldWRvIGVxdWF0b3JpYWwgcm90YXRpb25cbiAgdmFyIHJvdEkgPSBNYXRoLmF0YW4oTWF0aC5zaW4oSSkgLyAoTWF0aC5zaW4odGhpcy5iMCkgKiBNYXRoLnRhbihiKSArIE1hdGguY29zKHRoaXMuYjApICogTWF0aC5jb3MoSSkpKTtcblxuICB2YXIgcm90QiA9IE1hdGguYXNpbihNYXRoLmNvcyh0aGlzLmIwKSAqIE1hdGguc2luKGIpIC0gTWF0aC5zaW4odGhpcy5iMCkgKiBNYXRoLmNvcyhiKSAqIE1hdGguY29zKEkpKTtcblxuICBwLnkgPSB0aGlzLlIgLyAyICogTWF0aC5sb2coKDEgKyBNYXRoLnNpbihyb3RCKSkgLyAoMSAtIE1hdGguc2luKHJvdEIpKSkgKyB0aGlzLnkwO1xuICBwLnggPSB0aGlzLlIgKiByb3RJICsgdGhpcy54MDtcbiAgcmV0dXJuIHA7XG59O1xuXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBZID0gcC54IC0gdGhpcy54MDtcbiAgdmFyIFggPSBwLnkgLSB0aGlzLnkwO1xuXG4gIHZhciByb3RJID0gWSAvIHRoaXMuUjtcbiAgdmFyIHJvdEIgPSAyICogKE1hdGguYXRhbihNYXRoLmV4cChYIC8gdGhpcy5SKSkgLSBNYXRoLlBJIC8gNCk7XG5cbiAgdmFyIGIgPSBNYXRoLmFzaW4oTWF0aC5jb3ModGhpcy5iMCkgKiBNYXRoLnNpbihyb3RCKSArIE1hdGguc2luKHRoaXMuYjApICogTWF0aC5jb3Mocm90QikgKiBNYXRoLmNvcyhyb3RJKSk7XG4gIHZhciBJID0gTWF0aC5hdGFuKE1hdGguc2luKHJvdEkpIC8gKE1hdGguY29zKHRoaXMuYjApICogTWF0aC5jb3Mocm90SSkgLSBNYXRoLnNpbih0aGlzLmIwKSAqIE1hdGgudGFuKHJvdEIpKSk7XG5cbiAgdmFyIGxhbWJkYSA9IHRoaXMubGFtYmRhMCArIEkgLyB0aGlzLmFscGhhO1xuXG4gIHZhciBTID0gMDtcbiAgdmFyIHBoeSA9IGI7XG4gIHZhciBwcmV2UGh5ID0gLTEwMDA7XG4gIHZhciBpdGVyYXRpb24gPSAwO1xuICB3aGlsZSAoTWF0aC5hYnMocGh5IC0gcHJldlBoeSkgPiAwLjAwMDAwMDEpIHtcbiAgICBpZiAoKytpdGVyYXRpb24gPiAyMCkge1xuICAgICAgLy8uLi5yZXBvcnRFcnJvcihcIm9tZXJjRndkSW5maW5pdHlcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vUyA9IE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyA0ICsgcGh5IC8gMikpO1xuICAgIFMgPSAxIC8gdGhpcy5hbHBoYSAqIChNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJIC8gNCArIGIgLyAyKSkgLSB0aGlzLkspICsgdGhpcy5lICogTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAvIDQgKyBNYXRoLmFzaW4odGhpcy5lICogTWF0aC5zaW4ocGh5KSkgLyAyKSk7XG4gICAgcHJldlBoeSA9IHBoeTtcbiAgICBwaHkgPSAyICogTWF0aC5hdGFuKE1hdGguZXhwKFMpKSAtIE1hdGguUEkgLyAyO1xuICB9XG5cbiAgcC54ID0gbGFtYmRhO1xuICBwLnkgPSBwaHk7XG4gIHJldHVybiBwO1xufTtcblxuZXhwb3J0cy5uYW1lcyA9IFtcInNvbWVyY1wiXTtcbiIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBzaWduID0gcmVxdWlyZSgnLi4vY29tbW9uL3NpZ24nKTtcbnZhciBtc2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tc2ZueicpO1xudmFyIHRzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3RzZm56Jyk7XG52YXIgcGhpMnogPSByZXF1aXJlKCcuLi9jb21tb24vcGhpMnonKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbmV4cG9ydHMuc3Nmbl8gPSBmdW5jdGlvbihwaGl0LCBzaW5waGksIGVjY2VuKSB7XG4gIHNpbnBoaSAqPSBlY2NlbjtcbiAgcmV0dXJuIChNYXRoLnRhbigwLjUgKiAoSEFMRl9QSSArIHBoaXQpKSAqIE1hdGgucG93KCgxIC0gc2lucGhpKSAvICgxICsgc2lucGhpKSwgMC41ICogZWNjZW4pKTtcbn07XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNvc2xhdDAgPSBNYXRoLmNvcyh0aGlzLmxhdDApO1xuICB0aGlzLnNpbmxhdDAgPSBNYXRoLnNpbih0aGlzLmxhdDApO1xuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBpZiAodGhpcy5rMCA9PT0gMSAmJiAhaXNOYU4odGhpcy5sYXRfdHMpICYmIE1hdGguYWJzKHRoaXMuY29zbGF0MCkgPD0gRVBTTE4pIHtcbiAgICAgIHRoaXMuazAgPSAwLjUgKiAoMSArIHNpZ24odGhpcy5sYXQwKSAqIE1hdGguc2luKHRoaXMubGF0X3RzKSk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLmNvc2xhdDApIDw9IEVQU0xOKSB7XG4gICAgICBpZiAodGhpcy5sYXQwID4gMCkge1xuICAgICAgICAvL05vcnRoIHBvbGVcbiAgICAgICAgLy90cmFjZSgnc3RlcmU6bm9ydGggcG9sZScpO1xuICAgICAgICB0aGlzLmNvbiA9IDE7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy9Tb3V0aCBwb2xlXG4gICAgICAgIC8vdHJhY2UoJ3N0ZXJlOnNvdXRoIHBvbGUnKTtcbiAgICAgICAgdGhpcy5jb24gPSAtMTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jb25zID0gTWF0aC5zcXJ0KE1hdGgucG93KDEgKyB0aGlzLmUsIDEgKyB0aGlzLmUpICogTWF0aC5wb3coMSAtIHRoaXMuZSwgMSAtIHRoaXMuZSkpO1xuICAgIGlmICh0aGlzLmswID09PSAxICYmICFpc05hTih0aGlzLmxhdF90cykgJiYgTWF0aC5hYnModGhpcy5jb3NsYXQwKSA8PSBFUFNMTikge1xuICAgICAgdGhpcy5rMCA9IDAuNSAqIHRoaXMuY29ucyAqIG1zZm56KHRoaXMuZSwgTWF0aC5zaW4odGhpcy5sYXRfdHMpLCBNYXRoLmNvcyh0aGlzLmxhdF90cykpIC8gdHNmbnoodGhpcy5lLCB0aGlzLmNvbiAqIHRoaXMubGF0X3RzLCB0aGlzLmNvbiAqIE1hdGguc2luKHRoaXMubGF0X3RzKSk7XG4gICAgfVxuICAgIHRoaXMubXMxID0gbXNmbnoodGhpcy5lLCB0aGlzLnNpbmxhdDAsIHRoaXMuY29zbGF0MCk7XG4gICAgdGhpcy5YMCA9IDIgKiBNYXRoLmF0YW4odGhpcy5zc2ZuXyh0aGlzLmxhdDAsIHRoaXMuc2lubGF0MCwgdGhpcy5lKSkgLSBIQUxGX1BJO1xuICAgIHRoaXMuY29zWDAgPSBNYXRoLmNvcyh0aGlzLlgwKTtcbiAgICB0aGlzLnNpblgwID0gTWF0aC5zaW4odGhpcy5YMCk7XG4gIH1cbn07XG5cbi8vIFN0ZXJlb2dyYXBoaWMgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciBzaW5sYXQgPSBNYXRoLnNpbihsYXQpO1xuICB2YXIgY29zbGF0ID0gTWF0aC5jb3MobGF0KTtcbiAgdmFyIEEsIFgsIHNpblgsIGNvc1gsIHRzLCByaDtcbiAgdmFyIGRsb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuXG4gIGlmIChNYXRoLmFicyhNYXRoLmFicyhsb24gLSB0aGlzLmxvbmcwKSAtIE1hdGguUEkpIDw9IEVQU0xOICYmIE1hdGguYWJzKGxhdCArIHRoaXMubGF0MCkgPD0gRVBTTE4pIHtcbiAgICAvL2Nhc2Ugb2YgdGhlIG9yaWdpbmUgcG9pbnRcbiAgICAvL3RyYWNlKCdzdGVyZTp0aGlzIGlzIHRoZSBvcmlnaW4gcG9pbnQnKTtcbiAgICBwLnggPSBOYU47XG4gICAgcC55ID0gTmFOO1xuICAgIHJldHVybiBwO1xuICB9XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIC8vdHJhY2UoJ3N0ZXJlOnNwaGVyZSBjYXNlJyk7XG4gICAgQSA9IDIgKiB0aGlzLmswIC8gKDEgKyB0aGlzLnNpbmxhdDAgKiBzaW5sYXQgKyB0aGlzLmNvc2xhdDAgKiBjb3NsYXQgKiBNYXRoLmNvcyhkbG9uKSk7XG4gICAgcC54ID0gdGhpcy5hICogQSAqIGNvc2xhdCAqIE1hdGguc2luKGRsb24pICsgdGhpcy54MDtcbiAgICBwLnkgPSB0aGlzLmEgKiBBICogKHRoaXMuY29zbGF0MCAqIHNpbmxhdCAtIHRoaXMuc2lubGF0MCAqIGNvc2xhdCAqIE1hdGguY29zKGRsb24pKSArIHRoaXMueTA7XG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgZWxzZSB7XG4gICAgWCA9IDIgKiBNYXRoLmF0YW4odGhpcy5zc2ZuXyhsYXQsIHNpbmxhdCwgdGhpcy5lKSkgLSBIQUxGX1BJO1xuICAgIGNvc1ggPSBNYXRoLmNvcyhYKTtcbiAgICBzaW5YID0gTWF0aC5zaW4oWCk7XG4gICAgaWYgKE1hdGguYWJzKHRoaXMuY29zbGF0MCkgPD0gRVBTTE4pIHtcbiAgICAgIHRzID0gdHNmbnoodGhpcy5lLCBsYXQgKiB0aGlzLmNvbiwgdGhpcy5jb24gKiBzaW5sYXQpO1xuICAgICAgcmggPSAyICogdGhpcy5hICogdGhpcy5rMCAqIHRzIC8gdGhpcy5jb25zO1xuICAgICAgcC54ID0gdGhpcy54MCArIHJoICogTWF0aC5zaW4obG9uIC0gdGhpcy5sb25nMCk7XG4gICAgICBwLnkgPSB0aGlzLnkwIC0gdGhpcy5jb24gKiByaCAqIE1hdGguY29zKGxvbiAtIHRoaXMubG9uZzApO1xuICAgICAgLy90cmFjZShwLnRvU3RyaW5nKCkpO1xuICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICAgIGVsc2UgaWYgKE1hdGguYWJzKHRoaXMuc2lubGF0MCkgPCBFUFNMTikge1xuICAgICAgLy9FcVxuICAgICAgLy90cmFjZSgnc3RlcmU6ZXF1YXRldXInKTtcbiAgICAgIEEgPSAyICogdGhpcy5hICogdGhpcy5rMCAvICgxICsgY29zWCAqIE1hdGguY29zKGRsb24pKTtcbiAgICAgIHAueSA9IEEgKiBzaW5YO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vb3RoZXIgY2FzZVxuICAgICAgLy90cmFjZSgnc3RlcmU6bm9ybWFsIGNhc2UnKTtcbiAgICAgIEEgPSAyICogdGhpcy5hICogdGhpcy5rMCAqIHRoaXMubXMxIC8gKHRoaXMuY29zWDAgKiAoMSArIHRoaXMuc2luWDAgKiBzaW5YICsgdGhpcy5jb3NYMCAqIGNvc1ggKiBNYXRoLmNvcyhkbG9uKSkpO1xuICAgICAgcC55ID0gQSAqICh0aGlzLmNvc1gwICogc2luWCAtIHRoaXMuc2luWDAgKiBjb3NYICogTWF0aC5jb3MoZGxvbikpICsgdGhpcy55MDtcbiAgICB9XG4gICAgcC54ID0gQSAqIGNvc1ggKiBNYXRoLnNpbihkbG9uKSArIHRoaXMueDA7XG4gIH1cbiAgLy90cmFjZShwLnRvU3RyaW5nKCkpO1xuICByZXR1cm4gcDtcbn07XG5cblxuLy8qIFN0ZXJlb2dyYXBoaWMgaW52ZXJzZSBlcXVhdGlvbnMtLW1hcHBpbmcgeCx5IHRvIGxhdC9sb25nXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgdmFyIGxvbiwgbGF0LCB0cywgY2UsIENoaTtcbiAgdmFyIHJoID0gTWF0aC5zcXJ0KHAueCAqIHAueCArIHAueSAqIHAueSk7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHZhciBjID0gMiAqIE1hdGguYXRhbihyaCAvICgwLjUgKiB0aGlzLmEgKiB0aGlzLmswKSk7XG4gICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICBsYXQgPSB0aGlzLmxhdDA7XG4gICAgaWYgKHJoIDw9IEVQU0xOKSB7XG4gICAgICBwLnggPSBsb247XG4gICAgICBwLnkgPSBsYXQ7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgbGF0ID0gTWF0aC5hc2luKE1hdGguY29zKGMpICogdGhpcy5zaW5sYXQwICsgcC55ICogTWF0aC5zaW4oYykgKiB0aGlzLmNvc2xhdDAgLyByaCk7XG4gICAgaWYgKE1hdGguYWJzKHRoaXMuY29zbGF0MCkgPCBFUFNMTikge1xuICAgICAgaWYgKHRoaXMubGF0MCA+IDApIHtcbiAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLngsIC0gMSAqIHAueSkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXRhbjIocC54LCBwLnkpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBNYXRoLmF0YW4yKHAueCAqIE1hdGguc2luKGMpLCByaCAqIHRoaXMuY29zbGF0MCAqIE1hdGguY29zKGMpIC0gcC55ICogdGhpcy5zaW5sYXQwICogTWF0aC5zaW4oYykpKTtcbiAgICB9XG4gICAgcC54ID0gbG9uO1xuICAgIHAueSA9IGxhdDtcbiAgICByZXR1cm4gcDtcbiAgfVxuICBlbHNlIHtcbiAgICBpZiAoTWF0aC5hYnModGhpcy5jb3NsYXQwKSA8PSBFUFNMTikge1xuICAgICAgaWYgKHJoIDw9IEVQU0xOKSB7XG4gICAgICAgIGxhdCA9IHRoaXMubGF0MDtcbiAgICAgICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICAgICAgcC54ID0gbG9uO1xuICAgICAgICBwLnkgPSBsYXQ7XG4gICAgICAgIC8vdHJhY2UocC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9XG4gICAgICBwLnggKj0gdGhpcy5jb247XG4gICAgICBwLnkgKj0gdGhpcy5jb247XG4gICAgICB0cyA9IHJoICogdGhpcy5jb25zIC8gKDIgKiB0aGlzLmEgKiB0aGlzLmswKTtcbiAgICAgIGxhdCA9IHRoaXMuY29uICogcGhpMnoodGhpcy5lLCB0cyk7XG4gICAgICBsb24gPSB0aGlzLmNvbiAqIGFkanVzdF9sb24odGhpcy5jb24gKiB0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLngsIC0gMSAqIHAueSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNlID0gMiAqIE1hdGguYXRhbihyaCAqIHRoaXMuY29zWDAgLyAoMiAqIHRoaXMuYSAqIHRoaXMuazAgKiB0aGlzLm1zMSkpO1xuICAgICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICAgIGlmIChyaCA8PSBFUFNMTikge1xuICAgICAgICBDaGkgPSB0aGlzLlgwO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIENoaSA9IE1hdGguYXNpbihNYXRoLmNvcyhjZSkgKiB0aGlzLnNpblgwICsgcC55ICogTWF0aC5zaW4oY2UpICogdGhpcy5jb3NYMCAvIHJoKTtcbiAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLnggKiBNYXRoLnNpbihjZSksIHJoICogdGhpcy5jb3NYMCAqIE1hdGguY29zKGNlKSAtIHAueSAqIHRoaXMuc2luWDAgKiBNYXRoLnNpbihjZSkpKTtcbiAgICAgIH1cbiAgICAgIGxhdCA9IC0xICogcGhpMnoodGhpcy5lLCBNYXRoLnRhbigwLjUgKiAoSEFMRl9QSSArIENoaSkpKTtcbiAgICB9XG4gIH1cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG5cbiAgLy90cmFjZShwLnRvU3RyaW5nKCkpO1xuICByZXR1cm4gcDtcblxufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJzdGVyZVwiLCBcIlN0ZXJlb2dyYXBoaWNfU291dGhfUG9sZVwiLCBcIlBvbGFyIFN0ZXJlb2dyYXBoaWMgKHZhcmlhbnQgQilcIl07XG4iLCJ2YXIgZ2F1c3MgPSByZXF1aXJlKCcuL2dhdXNzJyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgZ2F1c3MuaW5pdC5hcHBseSh0aGlzKTtcbiAgaWYgKCF0aGlzLnJjKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMuc2luYzAgPSBNYXRoLnNpbih0aGlzLnBoaWMwKTtcbiAgdGhpcy5jb3NjMCA9IE1hdGguY29zKHRoaXMucGhpYzApO1xuICB0aGlzLlIyID0gMiAqIHRoaXMucmM7XG4gIGlmICghdGhpcy50aXRsZSkge1xuICAgIHRoaXMudGl0bGUgPSBcIk9ibGlxdWUgU3RlcmVvZ3JhcGhpYyBBbHRlcm5hdGl2ZVwiO1xuICB9XG59O1xuXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBzaW5jLCBjb3NjLCBjb3NsLCBrO1xuICBwLnggPSBhZGp1c3RfbG9uKHAueCAtIHRoaXMubG9uZzApO1xuICBnYXVzcy5mb3J3YXJkLmFwcGx5KHRoaXMsIFtwXSk7XG4gIHNpbmMgPSBNYXRoLnNpbihwLnkpO1xuICBjb3NjID0gTWF0aC5jb3MocC55KTtcbiAgY29zbCA9IE1hdGguY29zKHAueCk7XG4gIGsgPSB0aGlzLmswICogdGhpcy5SMiAvICgxICsgdGhpcy5zaW5jMCAqIHNpbmMgKyB0aGlzLmNvc2MwICogY29zYyAqIGNvc2wpO1xuICBwLnggPSBrICogY29zYyAqIE1hdGguc2luKHAueCk7XG4gIHAueSA9IGsgKiAodGhpcy5jb3NjMCAqIHNpbmMgLSB0aGlzLnNpbmMwICogY29zYyAqIGNvc2wpO1xuICBwLnggPSB0aGlzLmEgKiBwLnggKyB0aGlzLngwO1xuICBwLnkgPSB0aGlzLmEgKiBwLnkgKyB0aGlzLnkwO1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHNpbmMsIGNvc2MsIGxvbiwgbGF0LCByaG87XG4gIHAueCA9IChwLnggLSB0aGlzLngwKSAvIHRoaXMuYTtcbiAgcC55ID0gKHAueSAtIHRoaXMueTApIC8gdGhpcy5hO1xuXG4gIHAueCAvPSB0aGlzLmswO1xuICBwLnkgLz0gdGhpcy5rMDtcbiAgaWYgKChyaG8gPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KSkpIHtcbiAgICB2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKHJobywgdGhpcy5SMik7XG4gICAgc2luYyA9IE1hdGguc2luKGMpO1xuICAgIGNvc2MgPSBNYXRoLmNvcyhjKTtcbiAgICBsYXQgPSBNYXRoLmFzaW4oY29zYyAqIHRoaXMuc2luYzAgKyBwLnkgKiBzaW5jICogdGhpcy5jb3NjMCAvIHJobyk7XG4gICAgbG9uID0gTWF0aC5hdGFuMihwLnggKiBzaW5jLCByaG8gKiB0aGlzLmNvc2MwICogY29zYyAtIHAueSAqIHRoaXMuc2luYzAgKiBzaW5jKTtcbiAgfVxuICBlbHNlIHtcbiAgICBsYXQgPSB0aGlzLnBoaWMwO1xuICAgIGxvbiA9IDA7XG4gIH1cblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgZ2F1c3MuaW52ZXJzZS5hcHBseSh0aGlzLCBbcF0pO1xuICBwLnggPSBhZGp1c3RfbG9uKHAueCArIHRoaXMubG9uZzApO1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMubmFtZXMgPSBbXCJTdGVyZW9ncmFwaGljX05vcnRoX1BvbGVcIiwgXCJPYmxpcXVlX1N0ZXJlb2dyYXBoaWNcIiwgXCJQb2xhcl9TdGVyZW9ncmFwaGljXCIsIFwic3RlcmVhXCIsXCJPYmxpcXVlIFN0ZXJlb2dyYXBoaWMgQWx0ZXJuYXRpdmVcIl07XG4iLCJ2YXIgZTBmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMGZuJyk7XG52YXIgZTFmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMWZuJyk7XG52YXIgZTJmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMmZuJyk7XG52YXIgZTNmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lM2ZuJyk7XG52YXIgbWxmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tbGZuJyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG52YXIgc2lnbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9zaWduJyk7XG52YXIgYXNpbnogPSByZXF1aXJlKCcuLi9jb21tb24vYXNpbnonKTtcblxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZTAgPSBlMGZuKHRoaXMuZXMpO1xuICB0aGlzLmUxID0gZTFmbih0aGlzLmVzKTtcbiAgdGhpcy5lMiA9IGUyZm4odGhpcy5lcyk7XG4gIHRoaXMuZTMgPSBlM2ZuKHRoaXMuZXMpO1xuICB0aGlzLm1sMCA9IHRoaXMuYSAqIG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgdGhpcy5sYXQwKTtcbn07XG5cbi8qKlxuICAgIFRyYW5zdmVyc2UgTWVyY2F0b3IgRm9yd2FyZCAgLSBsb25nL2xhdCB0byB4L3lcbiAgICBsb25nL2xhdCBpbiByYWRpYW5zXG4gICovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG5cbiAgdmFyIGRlbHRhX2xvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciBjb247XG4gIHZhciB4LCB5O1xuICB2YXIgc2luX3BoaSA9IE1hdGguc2luKGxhdCk7XG4gIHZhciBjb3NfcGhpID0gTWF0aC5jb3MobGF0KTtcblxuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICB2YXIgYiA9IGNvc19waGkgKiBNYXRoLnNpbihkZWx0YV9sb24pO1xuICAgIGlmICgoTWF0aC5hYnMoTWF0aC5hYnMoYikgLSAxKSkgPCAwLjAwMDAwMDAwMDEpIHtcbiAgICAgIHJldHVybiAoOTMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHggPSAwLjUgKiB0aGlzLmEgKiB0aGlzLmswICogTWF0aC5sb2coKDEgKyBiKSAvICgxIC0gYikpO1xuICAgICAgY29uID0gTWF0aC5hY29zKGNvc19waGkgKiBNYXRoLmNvcyhkZWx0YV9sb24pIC8gTWF0aC5zcXJ0KDEgLSBiICogYikpO1xuICAgICAgaWYgKGxhdCA8IDApIHtcbiAgICAgICAgY29uID0gLWNvbjtcbiAgICAgIH1cbiAgICAgIHkgPSB0aGlzLmEgKiB0aGlzLmswICogKGNvbiAtIHRoaXMubGF0MCk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHZhciBhbCA9IGNvc19waGkgKiBkZWx0YV9sb247XG4gICAgdmFyIGFscyA9IE1hdGgucG93KGFsLCAyKTtcbiAgICB2YXIgYyA9IHRoaXMuZXAyICogTWF0aC5wb3coY29zX3BoaSwgMik7XG4gICAgdmFyIHRxID0gTWF0aC50YW4obGF0KTtcbiAgICB2YXIgdCA9IE1hdGgucG93KHRxLCAyKTtcbiAgICBjb24gPSAxIC0gdGhpcy5lcyAqIE1hdGgucG93KHNpbl9waGksIDIpO1xuICAgIHZhciBuID0gdGhpcy5hIC8gTWF0aC5zcXJ0KGNvbik7XG4gICAgdmFyIG1sID0gdGhpcy5hICogbWxmbih0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzLCBsYXQpO1xuXG4gICAgeCA9IHRoaXMuazAgKiBuICogYWwgKiAoMSArIGFscyAvIDYgKiAoMSAtIHQgKyBjICsgYWxzIC8gMjAgKiAoNSAtIDE4ICogdCArIE1hdGgucG93KHQsIDIpICsgNzIgKiBjIC0gNTggKiB0aGlzLmVwMikpKSArIHRoaXMueDA7XG4gICAgeSA9IHRoaXMuazAgKiAobWwgLSB0aGlzLm1sMCArIG4gKiB0cSAqIChhbHMgKiAoMC41ICsgYWxzIC8gMjQgKiAoNSAtIHQgKyA5ICogYyArIDQgKiBNYXRoLnBvdyhjLCAyKSArIGFscyAvIDMwICogKDYxIC0gNTggKiB0ICsgTWF0aC5wb3codCwgMikgKyA2MDAgKiBjIC0gMzMwICogdGhpcy5lcDIpKSkpKSArIHRoaXMueTA7XG5cbiAgfVxuICBwLnggPSB4O1xuICBwLnkgPSB5O1xuICByZXR1cm4gcDtcbn07XG5cbi8qKlxuICAgIFRyYW5zdmVyc2UgTWVyY2F0b3IgSW52ZXJzZSAgLSAgeC95IHRvIGxvbmcvbGF0XG4gICovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBjb24sIHBoaTtcbiAgdmFyIGRlbHRhX3BoaTtcbiAgdmFyIGk7XG4gIHZhciBtYXhfaXRlciA9IDY7XG4gIHZhciBsYXQsIGxvbjtcblxuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICB2YXIgZiA9IE1hdGguZXhwKHAueCAvICh0aGlzLmEgKiB0aGlzLmswKSk7XG4gICAgdmFyIGcgPSAwLjUgKiAoZiAtIDEgLyBmKTtcbiAgICB2YXIgdGVtcCA9IHRoaXMubGF0MCArIHAueSAvICh0aGlzLmEgKiB0aGlzLmswKTtcbiAgICB2YXIgaCA9IE1hdGguY29zKHRlbXApO1xuICAgIGNvbiA9IE1hdGguc3FydCgoMSAtIGggKiBoKSAvICgxICsgZyAqIGcpKTtcbiAgICBsYXQgPSBhc2lueihjb24pO1xuICAgIGlmICh0ZW1wIDwgMCkge1xuICAgICAgbGF0ID0gLWxhdDtcbiAgICB9XG4gICAgaWYgKChnID09PSAwKSAmJiAoaCA9PT0gMCkpIHtcbiAgICAgIGxvbiA9IHRoaXMubG9uZzA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbG9uID0gYWRqdXN0X2xvbihNYXRoLmF0YW4yKGcsIGgpICsgdGhpcy5sb25nMCk7XG4gICAgfVxuICB9XG4gIGVsc2UgeyAvLyBlbGxpcHNvaWRhbCBmb3JtXG4gICAgdmFyIHggPSBwLnggLSB0aGlzLngwO1xuICAgIHZhciB5ID0gcC55IC0gdGhpcy55MDtcblxuICAgIGNvbiA9ICh0aGlzLm1sMCArIHkgLyB0aGlzLmswKSAvIHRoaXMuYTtcbiAgICBwaGkgPSBjb247XG4gICAgZm9yIChpID0gMDsgdHJ1ZTsgaSsrKSB7XG4gICAgICBkZWx0YV9waGkgPSAoKGNvbiArIHRoaXMuZTEgKiBNYXRoLnNpbigyICogcGhpKSAtIHRoaXMuZTIgKiBNYXRoLnNpbig0ICogcGhpKSArIHRoaXMuZTMgKiBNYXRoLnNpbig2ICogcGhpKSkgLyB0aGlzLmUwKSAtIHBoaTtcbiAgICAgIHBoaSArPSBkZWx0YV9waGk7XG4gICAgICBpZiAoTWF0aC5hYnMoZGVsdGFfcGhpKSA8PSBFUFNMTikge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChpID49IG1heF9pdGVyKSB7XG4gICAgICAgIHJldHVybiAoOTUpO1xuICAgICAgfVxuICAgIH0gLy8gZm9yKClcbiAgICBpZiAoTWF0aC5hYnMocGhpKSA8IEhBTEZfUEkpIHtcbiAgICAgIHZhciBzaW5fcGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICAgIHZhciBjb3NfcGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICAgIHZhciB0YW5fcGhpID0gTWF0aC50YW4ocGhpKTtcbiAgICAgIHZhciBjID0gdGhpcy5lcDIgKiBNYXRoLnBvdyhjb3NfcGhpLCAyKTtcbiAgICAgIHZhciBjcyA9IE1hdGgucG93KGMsIDIpO1xuICAgICAgdmFyIHQgPSBNYXRoLnBvdyh0YW5fcGhpLCAyKTtcbiAgICAgIHZhciB0cyA9IE1hdGgucG93KHQsIDIpO1xuICAgICAgY29uID0gMSAtIHRoaXMuZXMgKiBNYXRoLnBvdyhzaW5fcGhpLCAyKTtcbiAgICAgIHZhciBuID0gdGhpcy5hIC8gTWF0aC5zcXJ0KGNvbik7XG4gICAgICB2YXIgciA9IG4gKiAoMSAtIHRoaXMuZXMpIC8gY29uO1xuICAgICAgdmFyIGQgPSB4IC8gKG4gKiB0aGlzLmswKTtcbiAgICAgIHZhciBkcyA9IE1hdGgucG93KGQsIDIpO1xuICAgICAgbGF0ID0gcGhpIC0gKG4gKiB0YW5fcGhpICogZHMgLyByKSAqICgwLjUgLSBkcyAvIDI0ICogKDUgKyAzICogdCArIDEwICogYyAtIDQgKiBjcyAtIDkgKiB0aGlzLmVwMiAtIGRzIC8gMzAgKiAoNjEgKyA5MCAqIHQgKyAyOTggKiBjICsgNDUgKiB0cyAtIDI1MiAqIHRoaXMuZXAyIC0gMyAqIGNzKSkpO1xuICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgKGQgKiAoMSAtIGRzIC8gNiAqICgxICsgMiAqIHQgKyBjIC0gZHMgLyAyMCAqICg1IC0gMiAqIGMgKyAyOCAqIHQgLSAzICogY3MgKyA4ICogdGhpcy5lcDIgKyAyNCAqIHRzKSkpIC8gY29zX3BoaSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxhdCA9IEhBTEZfUEkgKiBzaWduKHkpO1xuICAgICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICB9XG4gIH1cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJUcmFuc3ZlcnNlX01lcmNhdG9yXCIsIFwiVHJhbnN2ZXJzZSBNZXJjYXRvclwiLCBcInRtZXJjXCJdO1xuIiwidmFyIEQyUiA9IDAuMDE3NDUzMjkyNTE5OTQzMjk1Nzc7XG52YXIgdG1lcmMgPSByZXF1aXJlKCcuL3RtZXJjJyk7XG5leHBvcnRzLmRlcGVuZHNPbiA9ICd0bWVyYyc7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCF0aGlzLnpvbmUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5sYXQwID0gMDtcbiAgdGhpcy5sb25nMCA9ICgoNiAqIE1hdGguYWJzKHRoaXMuem9uZSkpIC0gMTgzKSAqIEQyUjtcbiAgdGhpcy54MCA9IDUwMDAwMDtcbiAgdGhpcy55MCA9IHRoaXMudXRtU291dGggPyAxMDAwMDAwMCA6IDA7XG4gIHRoaXMuazAgPSAwLjk5OTY7XG5cbiAgdG1lcmMuaW5pdC5hcHBseSh0aGlzKTtcbiAgdGhpcy5mb3J3YXJkID0gdG1lcmMuZm9yd2FyZDtcbiAgdGhpcy5pbnZlcnNlID0gdG1lcmMuaW52ZXJzZTtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiVW5pdmVyc2FsIFRyYW5zdmVyc2UgTWVyY2F0b3IgU3lzdGVtXCIsIFwidXRtXCJdO1xuIiwidmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIGFzaW56ID0gcmVxdWlyZSgnLi4vY29tbW9uL2FzaW56Jyk7XG4vKiBJbml0aWFsaXplIHRoZSBWYW4gRGVyIEdyaW50ZW4gcHJvamVjdGlvblxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAvL3RoaXMuUiA9IDYzNzA5OTc7IC8vUmFkaXVzIG9mIGVhcnRoXG4gIHRoaXMuUiA9IHRoaXMuYTtcbn07XG5cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcblxuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuXG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciB4LCB5O1xuXG4gIGlmIChNYXRoLmFicyhsYXQpIDw9IEVQU0xOKSB7XG4gICAgeCA9IHRoaXMueDAgKyB0aGlzLlIgKiBkbG9uO1xuICAgIHkgPSB0aGlzLnkwO1xuICB9XG4gIHZhciB0aGV0YSA9IGFzaW56KDIgKiBNYXRoLmFicyhsYXQgLyBNYXRoLlBJKSk7XG4gIGlmICgoTWF0aC5hYnMoZGxvbikgPD0gRVBTTE4pIHx8IChNYXRoLmFicyhNYXRoLmFicyhsYXQpIC0gSEFMRl9QSSkgPD0gRVBTTE4pKSB7XG4gICAgeCA9IHRoaXMueDA7XG4gICAgaWYgKGxhdCA+PSAwKSB7XG4gICAgICB5ID0gdGhpcy55MCArIE1hdGguUEkgKiB0aGlzLlIgKiBNYXRoLnRhbigwLjUgKiB0aGV0YSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgeSA9IHRoaXMueTAgKyBNYXRoLlBJICogdGhpcy5SICogLU1hdGgudGFuKDAuNSAqIHRoZXRhKTtcbiAgICB9XG4gICAgLy8gIHJldHVybihPSyk7XG4gIH1cbiAgdmFyIGFsID0gMC41ICogTWF0aC5hYnMoKE1hdGguUEkgLyBkbG9uKSAtIChkbG9uIC8gTWF0aC5QSSkpO1xuICB2YXIgYXNxID0gYWwgKiBhbDtcbiAgdmFyIHNpbnRoID0gTWF0aC5zaW4odGhldGEpO1xuICB2YXIgY29zdGggPSBNYXRoLmNvcyh0aGV0YSk7XG5cbiAgdmFyIGcgPSBjb3N0aCAvIChzaW50aCArIGNvc3RoIC0gMSk7XG4gIHZhciBnc3EgPSBnICogZztcbiAgdmFyIG0gPSBnICogKDIgLyBzaW50aCAtIDEpO1xuICB2YXIgbXNxID0gbSAqIG07XG4gIHZhciBjb24gPSBNYXRoLlBJICogdGhpcy5SICogKGFsICogKGcgLSBtc3EpICsgTWF0aC5zcXJ0KGFzcSAqIChnIC0gbXNxKSAqIChnIC0gbXNxKSAtIChtc3EgKyBhc3EpICogKGdzcSAtIG1zcSkpKSAvIChtc3EgKyBhc3EpO1xuICBpZiAoZGxvbiA8IDApIHtcbiAgICBjb24gPSAtY29uO1xuICB9XG4gIHggPSB0aGlzLngwICsgY29uO1xuICAvL2NvbiA9IE1hdGguYWJzKGNvbiAvIChNYXRoLlBJICogdGhpcy5SKSk7XG4gIHZhciBxID0gYXNxICsgZztcbiAgY29uID0gTWF0aC5QSSAqIHRoaXMuUiAqIChtICogcSAtIGFsICogTWF0aC5zcXJ0KChtc3EgKyBhc3EpICogKGFzcSArIDEpIC0gcSAqIHEpKSAvIChtc3EgKyBhc3EpO1xuICBpZiAobGF0ID49IDApIHtcbiAgICAvL3kgPSB0aGlzLnkwICsgTWF0aC5QSSAqIHRoaXMuUiAqIE1hdGguc3FydCgxIC0gY29uICogY29uIC0gMiAqIGFsICogY29uKTtcbiAgICB5ID0gdGhpcy55MCArIGNvbjtcbiAgfVxuICBlbHNlIHtcbiAgICAvL3kgPSB0aGlzLnkwIC0gTWF0aC5QSSAqIHRoaXMuUiAqIE1hdGguc3FydCgxIC0gY29uICogY29uIC0gMiAqIGFsICogY29uKTtcbiAgICB5ID0gdGhpcy55MCAtIGNvbjtcbiAgfVxuICBwLnggPSB4O1xuICBwLnkgPSB5O1xuICByZXR1cm4gcDtcbn07XG5cbi8qIFZhbiBEZXIgR3JpbnRlbiBpbnZlcnNlIGVxdWF0aW9ucy0tbWFwcGluZyB4LHkgdG8gbGF0L2xvbmdcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiwgbGF0O1xuICB2YXIgeHgsIHl5LCB4eXMsIGMxLCBjMiwgYzM7XG4gIHZhciBhMTtcbiAgdmFyIG0xO1xuICB2YXIgY29uO1xuICB2YXIgdGgxO1xuICB2YXIgZDtcblxuICAvKiBpbnZlcnNlIGVxdWF0aW9uc1xuICAgIC0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgcC54IC09IHRoaXMueDA7XG4gIHAueSAtPSB0aGlzLnkwO1xuICBjb24gPSBNYXRoLlBJICogdGhpcy5SO1xuICB4eCA9IHAueCAvIGNvbjtcbiAgeXkgPSBwLnkgLyBjb247XG4gIHh5cyA9IHh4ICogeHggKyB5eSAqIHl5O1xuICBjMSA9IC1NYXRoLmFicyh5eSkgKiAoMSArIHh5cyk7XG4gIGMyID0gYzEgLSAyICogeXkgKiB5eSArIHh4ICogeHg7XG4gIGMzID0gLTIgKiBjMSArIDEgKyAyICogeXkgKiB5eSArIHh5cyAqIHh5cztcbiAgZCA9IHl5ICogeXkgLyBjMyArICgyICogYzIgKiBjMiAqIGMyIC8gYzMgLyBjMyAvIGMzIC0gOSAqIGMxICogYzIgLyBjMyAvIGMzKSAvIDI3O1xuICBhMSA9IChjMSAtIGMyICogYzIgLyAzIC8gYzMpIC8gYzM7XG4gIG0xID0gMiAqIE1hdGguc3FydCgtYTEgLyAzKTtcbiAgY29uID0gKCgzICogZCkgLyBhMSkgLyBtMTtcbiAgaWYgKE1hdGguYWJzKGNvbikgPiAxKSB7XG4gICAgaWYgKGNvbiA+PSAwKSB7XG4gICAgICBjb24gPSAxO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbiA9IC0xO1xuICAgIH1cbiAgfVxuICB0aDEgPSBNYXRoLmFjb3MoY29uKSAvIDM7XG4gIGlmIChwLnkgPj0gMCkge1xuICAgIGxhdCA9ICgtbTEgKiBNYXRoLmNvcyh0aDEgKyBNYXRoLlBJIC8gMykgLSBjMiAvIDMgLyBjMykgKiBNYXRoLlBJO1xuICB9XG4gIGVsc2Uge1xuICAgIGxhdCA9IC0oLW0xICogTWF0aC5jb3ModGgxICsgTWF0aC5QSSAvIDMpIC0gYzIgLyAzIC8gYzMpICogTWF0aC5QSTtcbiAgfVxuXG4gIGlmIChNYXRoLmFicyh4eCkgPCBFUFNMTikge1xuICAgIGxvbiA9IHRoaXMubG9uZzA7XG4gIH1cbiAgZWxzZSB7XG4gICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5QSSAqICh4eXMgLSAxICsgTWF0aC5zcXJ0KDEgKyAyICogKHh4ICogeHggLSB5eSAqIHl5KSArIHh5cyAqIHh5cykpIC8gMiAvIHh4KTtcbiAgfVxuXG4gIHAueCA9IGxvbjtcbiAgcC55ID0gbGF0O1xuICByZXR1cm4gcDtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiVmFuX2Rlcl9HcmludGVuX0lcIiwgXCJWYW5EZXJHcmludGVuXCIsIFwidmFuZGdcIl07IiwidmFyIEQyUiA9IDAuMDE3NDUzMjkyNTE5OTQzMjk1Nzc7XG52YXIgUjJEID0gNTcuMjk1Nzc5NTEzMDgyMzIwODg7XG52YXIgUEpEXzNQQVJBTSA9IDE7XG52YXIgUEpEXzdQQVJBTSA9IDI7XG52YXIgZGF0dW1fdHJhbnNmb3JtID0gcmVxdWlyZSgnLi9kYXR1bV90cmFuc2Zvcm0nKTtcbnZhciBhZGp1c3RfYXhpcyA9IHJlcXVpcmUoJy4vYWRqdXN0X2F4aXMnKTtcbnZhciBwcm9qID0gcmVxdWlyZSgnLi9Qcm9qJyk7XG52YXIgdG9Qb2ludCA9IHJlcXVpcmUoJy4vY29tbW9uL3RvUG9pbnQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtKHNvdXJjZSwgZGVzdCwgcG9pbnQpIHtcbiAgdmFyIHdnczg0O1xuICBpZiAoQXJyYXkuaXNBcnJheShwb2ludCkpIHtcbiAgICBwb2ludCA9IHRvUG9pbnQocG9pbnQpO1xuICB9XG4gIGZ1bmN0aW9uIGNoZWNrTm90V0dTKHNvdXJjZSwgZGVzdCkge1xuICAgIHJldHVybiAoKHNvdXJjZS5kYXR1bS5kYXR1bV90eXBlID09PSBQSkRfM1BBUkFNIHx8IHNvdXJjZS5kYXR1bS5kYXR1bV90eXBlID09PSBQSkRfN1BBUkFNKSAmJiBkZXN0LmRhdHVtQ29kZSAhPT0gXCJXR1M4NFwiKTtcbiAgfVxuXG4gIC8vIFdvcmthcm91bmQgZm9yIGRhdHVtIHNoaWZ0cyB0b3dnczg0LCBpZiBlaXRoZXIgc291cmNlIG9yIGRlc3RpbmF0aW9uIHByb2plY3Rpb24gaXMgbm90IHdnczg0XG4gIGlmIChzb3VyY2UuZGF0dW0gJiYgZGVzdC5kYXR1bSAmJiAoY2hlY2tOb3RXR1Moc291cmNlLCBkZXN0KSB8fCBjaGVja05vdFdHUyhkZXN0LCBzb3VyY2UpKSkge1xuICAgIHdnczg0ID0gbmV3IHByb2ooJ1dHUzg0Jyk7XG4gICAgdHJhbnNmb3JtKHNvdXJjZSwgd2dzODQsIHBvaW50KTtcbiAgICBzb3VyY2UgPSB3Z3M4NDtcbiAgfVxuICAvLyBER1IsIDIwMTAvMTEvMTJcbiAgaWYgKHNvdXJjZS5heGlzICE9PSBcImVudVwiKSB7XG4gICAgYWRqdXN0X2F4aXMoc291cmNlLCBmYWxzZSwgcG9pbnQpO1xuICB9XG4gIC8vIFRyYW5zZm9ybSBzb3VyY2UgcG9pbnRzIHRvIGxvbmcvbGF0LCBpZiB0aGV5IGFyZW4ndCBhbHJlYWR5LlxuICBpZiAoc291cmNlLnByb2pOYW1lID09PSBcImxvbmdsYXRcIikge1xuICAgIHBvaW50LnggKj0gRDJSOyAvLyBjb252ZXJ0IGRlZ3JlZXMgdG8gcmFkaWFuc1xuICAgIHBvaW50LnkgKj0gRDJSO1xuICB9XG4gIGVsc2Uge1xuICAgIGlmIChzb3VyY2UudG9fbWV0ZXIpIHtcbiAgICAgIHBvaW50LnggKj0gc291cmNlLnRvX21ldGVyO1xuICAgICAgcG9pbnQueSAqPSBzb3VyY2UudG9fbWV0ZXI7XG4gICAgfVxuICAgIHNvdXJjZS5pbnZlcnNlKHBvaW50KTsgLy8gQ29udmVydCBDYXJ0ZXNpYW4gdG8gbG9uZ2xhdFxuICB9XG4gIC8vIEFkanVzdCBmb3IgdGhlIHByaW1lIG1lcmlkaWFuIGlmIG5lY2Vzc2FyeVxuICBpZiAoc291cmNlLmZyb21fZ3JlZW53aWNoKSB7XG4gICAgcG9pbnQueCArPSBzb3VyY2UuZnJvbV9ncmVlbndpY2g7XG4gIH1cblxuICAvLyBDb252ZXJ0IGRhdHVtcyBpZiBuZWVkZWQsIGFuZCBpZiBwb3NzaWJsZS5cbiAgcG9pbnQgPSBkYXR1bV90cmFuc2Zvcm0oc291cmNlLmRhdHVtLCBkZXN0LmRhdHVtLCBwb2ludCk7XG5cbiAgLy8gQWRqdXN0IGZvciB0aGUgcHJpbWUgbWVyaWRpYW4gaWYgbmVjZXNzYXJ5XG4gIGlmIChkZXN0LmZyb21fZ3JlZW53aWNoKSB7XG4gICAgcG9pbnQueCAtPSBkZXN0LmZyb21fZ3JlZW53aWNoO1xuICB9XG5cbiAgaWYgKGRlc3QucHJvak5hbWUgPT09IFwibG9uZ2xhdFwiKSB7XG4gICAgLy8gY29udmVydCByYWRpYW5zIHRvIGRlY2ltYWwgZGVncmVlc1xuICAgIHBvaW50LnggKj0gUjJEO1xuICAgIHBvaW50LnkgKj0gUjJEO1xuICB9XG4gIGVsc2UgeyAvLyBlbHNlIHByb2plY3RcbiAgICBkZXN0LmZvcndhcmQocG9pbnQpO1xuICAgIGlmIChkZXN0LnRvX21ldGVyKSB7XG4gICAgICBwb2ludC54IC89IGRlc3QudG9fbWV0ZXI7XG4gICAgICBwb2ludC55IC89IGRlc3QudG9fbWV0ZXI7XG4gICAgfVxuICB9XG5cbiAgLy8gREdSLCAyMDEwLzExLzEyXG4gIGlmIChkZXN0LmF4aXMgIT09IFwiZW51XCIpIHtcbiAgICBhZGp1c3RfYXhpcyhkZXN0LCB0cnVlLCBwb2ludCk7XG4gIH1cblxuICByZXR1cm4gcG9pbnQ7XG59OyIsInZhciBEMlIgPSAwLjAxNzQ1MzI5MjUxOTk0MzI5NTc3O1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJy4vZXh0ZW5kJyk7XG5cbmZ1bmN0aW9uIG1hcGl0KG9iaiwga2V5LCB2KSB7XG4gIG9ialtrZXldID0gdi5tYXAoZnVuY3Rpb24oYWEpIHtcbiAgICB2YXIgbyA9IHt9O1xuICAgIHNFeHByKGFhLCBvKTtcbiAgICByZXR1cm4gbztcbiAgfSkucmVkdWNlKGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gZXh0ZW5kKGEsIGIpO1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIHNFeHByKHYsIG9iaikge1xuICB2YXIga2V5O1xuICBpZiAoIUFycmF5LmlzQXJyYXkodikpIHtcbiAgICBvYmpbdl0gPSB0cnVlO1xuICAgIHJldHVybjtcbiAgfVxuICBlbHNlIHtcbiAgICBrZXkgPSB2LnNoaWZ0KCk7XG4gICAgaWYgKGtleSA9PT0gJ1BBUkFNRVRFUicpIHtcbiAgICAgIGtleSA9IHYuc2hpZnQoKTtcbiAgICB9XG4gICAgaWYgKHYubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2WzBdKSkge1xuICAgICAgICBvYmpba2V5XSA9IHt9O1xuICAgICAgICBzRXhwcih2WzBdLCBvYmpba2V5XSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgb2JqW2tleV0gPSB2WzBdO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICghdi5sZW5ndGgpIHtcbiAgICAgIG9ialtrZXldID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoa2V5ID09PSAnVE9XR1M4NCcpIHtcbiAgICAgIG9ialtrZXldID0gdjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBvYmpba2V5XSA9IHt9O1xuICAgICAgaWYgKFsnVU5JVCcsICdQUklNRU0nLCAnVkVSVF9EQVRVTSddLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAgICAgIG9ialtrZXldID0ge1xuICAgICAgICAgIG5hbWU6IHZbMF0udG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBjb252ZXJ0OiB2WzFdXG4gICAgICAgIH07XG4gICAgICAgIGlmICh2Lmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgIG9ialtrZXldLmF1dGggPSB2WzJdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChrZXkgPT09ICdTUEhFUk9JRCcpIHtcbiAgICAgICAgb2JqW2tleV0gPSB7XG4gICAgICAgICAgbmFtZTogdlswXSxcbiAgICAgICAgICBhOiB2WzFdLFxuICAgICAgICAgIHJmOiB2WzJdXG4gICAgICAgIH07XG4gICAgICAgIGlmICh2Lmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgIG9ialtrZXldLmF1dGggPSB2WzNdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChbJ0dFT0dDUycsICdHRU9DQ1MnLCAnREFUVU0nLCAnVkVSVF9DUycsICdDT01QRF9DUycsICdMT0NBTF9DUycsICdGSVRURURfQ1MnLCAnTE9DQUxfREFUVU0nXS5pbmRleE9mKGtleSkgPiAtMSkge1xuICAgICAgICB2WzBdID0gWyduYW1lJywgdlswXV07XG4gICAgICAgIG1hcGl0KG9iaiwga2V5LCB2KTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHYuZXZlcnkoZnVuY3Rpb24oYWEpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYWEpO1xuICAgICAgfSkpIHtcbiAgICAgICAgbWFwaXQob2JqLCBrZXksIHYpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHNFeHByKHYsIG9ialtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuYW1lKG9iaiwgcGFyYW1zKSB7XG4gIHZhciBvdXROYW1lID0gcGFyYW1zWzBdO1xuICB2YXIgaW5OYW1lID0gcGFyYW1zWzFdO1xuICBpZiAoIShvdXROYW1lIGluIG9iaikgJiYgKGluTmFtZSBpbiBvYmopKSB7XG4gICAgb2JqW291dE5hbWVdID0gb2JqW2luTmFtZV07XG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDMpIHtcbiAgICAgIG9ialtvdXROYW1lXSA9IHBhcmFtc1syXShvYmpbb3V0TmFtZV0pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkMnIoaW5wdXQpIHtcbiAgcmV0dXJuIGlucHV0ICogRDJSO1xufVxuXG5mdW5jdGlvbiBjbGVhbldLVCh3a3QpIHtcbiAgaWYgKHdrdC50eXBlID09PSAnR0VPR0NTJykge1xuICAgIHdrdC5wcm9qTmFtZSA9ICdsb25nbGF0JztcbiAgfVxuICBlbHNlIGlmICh3a3QudHlwZSA9PT0gJ0xPQ0FMX0NTJykge1xuICAgIHdrdC5wcm9qTmFtZSA9ICdpZGVudGl0eSc7XG4gICAgd2t0LmxvY2FsID0gdHJ1ZTtcbiAgfVxuICBlbHNlIHtcbiAgICBpZiAodHlwZW9mIHdrdC5QUk9KRUNUSU9OID09PSBcIm9iamVjdFwiKSB7XG4gICAgICB3a3QucHJvak5hbWUgPSBPYmplY3Qua2V5cyh3a3QuUFJPSkVDVElPTilbMF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgd2t0LnByb2pOYW1lID0gd2t0LlBST0pFQ1RJT047XG4gICAgfVxuICB9XG4gIGlmICh3a3QuVU5JVCkge1xuICAgIHdrdC51bml0cyA9IHdrdC5VTklULm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAod2t0LnVuaXRzID09PSAnbWV0cmUnKSB7XG4gICAgICB3a3QudW5pdHMgPSAnbWV0ZXInO1xuICAgIH1cbiAgICBpZiAod2t0LlVOSVQuY29udmVydCkge1xuICAgICAgd2t0LnRvX21ldGVyID0gcGFyc2VGbG9hdCh3a3QuVU5JVC5jb252ZXJ0LCAxMCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHdrdC5HRU9HQ1MpIHtcbiAgICAvL2lmKHdrdC5HRU9HQ1MuUFJJTUVNJiZ3a3QuR0VPR0NTLlBSSU1FTS5jb252ZXJ0KXtcbiAgICAvLyAgd2t0LmZyb21fZ3JlZW53aWNoPXdrdC5HRU9HQ1MuUFJJTUVNLmNvbnZlcnQqRDJSO1xuICAgIC8vfVxuICAgIGlmICh3a3QuR0VPR0NTLkRBVFVNKSB7XG4gICAgICB3a3QuZGF0dW1Db2RlID0gd2t0LkdFT0dDUy5EQVRVTS5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgd2t0LmRhdHVtQ29kZSA9IHdrdC5HRU9HQ1MubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBpZiAod2t0LmRhdHVtQ29kZS5zbGljZSgwLCAyKSA9PT0gJ2RfJykge1xuICAgICAgd2t0LmRhdHVtQ29kZSA9IHdrdC5kYXR1bUNvZGUuc2xpY2UoMik7XG4gICAgfVxuICAgIGlmICh3a3QuZGF0dW1Db2RlID09PSAnbmV3X3plYWxhbmRfZ2VvZGV0aWNfZGF0dW1fMTk0OScgfHwgd2t0LmRhdHVtQ29kZSA9PT0gJ25ld196ZWFsYW5kXzE5NDknKSB7XG4gICAgICB3a3QuZGF0dW1Db2RlID0gJ256Z2Q0OSc7XG4gICAgfVxuICAgIGlmICh3a3QuZGF0dW1Db2RlID09PSBcIndnc18xOTg0XCIpIHtcbiAgICAgIGlmICh3a3QuUFJPSkVDVElPTiA9PT0gJ01lcmNhdG9yX0F1eGlsaWFyeV9TcGhlcmUnKSB7XG4gICAgICAgIHdrdC5zcGhlcmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgd2t0LmRhdHVtQ29kZSA9ICd3Z3M4NCc7XG4gICAgfVxuICAgIGlmICh3a3QuZGF0dW1Db2RlLnNsaWNlKC02KSA9PT0gJ19mZXJybycpIHtcbiAgICAgIHdrdC5kYXR1bUNvZGUgPSB3a3QuZGF0dW1Db2RlLnNsaWNlKDAsIC0gNik7XG4gICAgfVxuICAgIGlmICh3a3QuZGF0dW1Db2RlLnNsaWNlKC04KSA9PT0gJ19qYWthcnRhJykge1xuICAgICAgd2t0LmRhdHVtQ29kZSA9IHdrdC5kYXR1bUNvZGUuc2xpY2UoMCwgLSA4KTtcbiAgICB9XG4gICAgaWYgKH53a3QuZGF0dW1Db2RlLmluZGV4T2YoJ2JlbGdlJykpIHtcbiAgICAgIHdrdC5kYXR1bUNvZGUgPSBcInJuYjcyXCI7XG4gICAgfVxuICAgIGlmICh3a3QuR0VPR0NTLkRBVFVNICYmIHdrdC5HRU9HQ1MuREFUVU0uU1BIRVJPSUQpIHtcbiAgICAgIHdrdC5lbGxwcyA9IHdrdC5HRU9HQ1MuREFUVU0uU1BIRVJPSUQubmFtZS5yZXBsYWNlKCdfMTknLCAnJykucmVwbGFjZSgvW0NjXWxhcmtlXFxfMTgvLCAnY2xyaycpO1xuICAgICAgaWYgKHdrdC5lbGxwcy50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsIDEzKSA9PT0gXCJpbnRlcm5hdGlvbmFsXCIpIHtcbiAgICAgICAgd2t0LmVsbHBzID0gJ2ludGwnO1xuICAgICAgfVxuXG4gICAgICB3a3QuYSA9IHdrdC5HRU9HQ1MuREFUVU0uU1BIRVJPSUQuYTtcbiAgICAgIHdrdC5yZiA9IHBhcnNlRmxvYXQod2t0LkdFT0dDUy5EQVRVTS5TUEhFUk9JRC5yZiwgMTApO1xuICAgIH1cbiAgICBpZiAofndrdC5kYXR1bUNvZGUuaW5kZXhPZignb3NnYl8xOTM2JykpIHtcbiAgICAgIHdrdC5kYXR1bUNvZGUgPSBcIm9zZ2IzNlwiO1xuICAgIH1cbiAgfVxuICBpZiAod2t0LmIgJiYgIWlzRmluaXRlKHdrdC5iKSkge1xuICAgIHdrdC5iID0gd2t0LmE7XG4gIH1cblxuICBmdW5jdGlvbiB0b01ldGVyKGlucHV0KSB7XG4gICAgdmFyIHJhdGlvID0gd2t0LnRvX21ldGVyIHx8IDE7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoaW5wdXQsIDEwKSAqIHJhdGlvO1xuICB9XG4gIHZhciByZW5hbWVyID0gZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiByZW5hbWUod2t0LCBhKTtcbiAgfTtcbiAgdmFyIGxpc3QgPSBbXG4gICAgWydzdGFuZGFyZF9wYXJhbGxlbF8xJywgJ1N0YW5kYXJkX1BhcmFsbGVsXzEnXSxcbiAgICBbJ3N0YW5kYXJkX3BhcmFsbGVsXzInLCAnU3RhbmRhcmRfUGFyYWxsZWxfMiddLFxuICAgIFsnZmFsc2VfZWFzdGluZycsICdGYWxzZV9FYXN0aW5nJ10sXG4gICAgWydmYWxzZV9ub3J0aGluZycsICdGYWxzZV9Ob3J0aGluZyddLFxuICAgIFsnY2VudHJhbF9tZXJpZGlhbicsICdDZW50cmFsX01lcmlkaWFuJ10sXG4gICAgWydsYXRpdHVkZV9vZl9vcmlnaW4nLCAnTGF0aXR1ZGVfT2ZfT3JpZ2luJ10sXG4gICAgWydsYXRpdHVkZV9vZl9vcmlnaW4nLCAnQ2VudHJhbF9QYXJhbGxlbCddLFxuICAgIFsnc2NhbGVfZmFjdG9yJywgJ1NjYWxlX0ZhY3RvciddLFxuICAgIFsnazAnLCAnc2NhbGVfZmFjdG9yJ10sXG4gICAgWydsYXRpdHVkZV9vZl9jZW50ZXInLCAnTGF0aXR1ZGVfb2ZfY2VudGVyJ10sXG4gICAgWydsYXQwJywgJ2xhdGl0dWRlX29mX2NlbnRlcicsIGQycl0sXG4gICAgWydsb25naXR1ZGVfb2ZfY2VudGVyJywgJ0xvbmdpdHVkZV9PZl9DZW50ZXInXSxcbiAgICBbJ2xvbmdjJywgJ2xvbmdpdHVkZV9vZl9jZW50ZXInLCBkMnJdLFxuICAgIFsneDAnLCAnZmFsc2VfZWFzdGluZycsIHRvTWV0ZXJdLFxuICAgIFsneTAnLCAnZmFsc2Vfbm9ydGhpbmcnLCB0b01ldGVyXSxcbiAgICBbJ2xvbmcwJywgJ2NlbnRyYWxfbWVyaWRpYW4nLCBkMnJdLFxuICAgIFsnbGF0MCcsICdsYXRpdHVkZV9vZl9vcmlnaW4nLCBkMnJdLFxuICAgIFsnbGF0MCcsICdzdGFuZGFyZF9wYXJhbGxlbF8xJywgZDJyXSxcbiAgICBbJ2xhdDEnLCAnc3RhbmRhcmRfcGFyYWxsZWxfMScsIGQycl0sXG4gICAgWydsYXQyJywgJ3N0YW5kYXJkX3BhcmFsbGVsXzInLCBkMnJdLFxuICAgIFsnYWxwaGEnLCAnYXppbXV0aCcsIGQycl0sXG4gICAgWydzcnNDb2RlJywgJ25hbWUnXVxuICBdO1xuICBsaXN0LmZvckVhY2gocmVuYW1lcik7XG4gIGlmICghd2t0LmxvbmcwICYmIHdrdC5sb25nYyAmJiAod2t0LnByb2pOYW1lID09PSAnQWxiZXJzX0NvbmljX0VxdWFsX0FyZWEnIHx8IHdrdC5wcm9qTmFtZSA9PT0gXCJMYW1iZXJ0X0F6aW11dGhhbF9FcXVhbF9BcmVhXCIpKSB7XG4gICAgd2t0LmxvbmcwID0gd2t0LmxvbmdjO1xuICB9XG4gIGlmICghd2t0LmxhdF90cyAmJiB3a3QubGF0MSAmJiAod2t0LnByb2pOYW1lID09PSAnU3RlcmVvZ3JhcGhpY19Tb3V0aF9Qb2xlJyB8fCB3a3QucHJvak5hbWUgPT09ICdQb2xhciBTdGVyZW9ncmFwaGljICh2YXJpYW50IEIpJykpIHtcbiAgICB3a3QubGF0MCA9IGQycih3a3QubGF0MSA+IDAgPyA5MCA6IC05MCk7XG4gICAgd2t0LmxhdF90cyA9IHdrdC5sYXQxO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHdrdCwgc2VsZikge1xuICB2YXIgbGlzcCA9IEpTT04ucGFyc2UoKFwiLFwiICsgd2t0KS5yZXBsYWNlKC9cXHMqXFwsXFxzKihbQS1aXzAtOV0rPykoXFxbKS9nLCAnLFtcIiQxXCIsJykuc2xpY2UoMSkucmVwbGFjZSgvXFxzKlxcLFxccyooW0EtWl8wLTldKz8pXFxdL2csICcsXCIkMVwiXScpLnJlcGxhY2UoLyxcXFtcIlZFUlRDU1wiLisvLCcnKSk7XG4gIHZhciB0eXBlID0gbGlzcC5zaGlmdCgpO1xuICB2YXIgbmFtZSA9IGxpc3Auc2hpZnQoKTtcbiAgbGlzcC51bnNoaWZ0KFsnbmFtZScsIG5hbWVdKTtcbiAgbGlzcC51bnNoaWZ0KFsndHlwZScsIHR5cGVdKTtcbiAgbGlzcC51bnNoaWZ0KCdvdXRwdXQnKTtcbiAgdmFyIG9iaiA9IHt9O1xuICBzRXhwcihsaXNwLCBvYmopO1xuICBjbGVhbldLVChvYmoub3V0cHV0KTtcbiAgcmV0dXJuIGV4dGVuZChzZWxmLCBvYmoub3V0cHV0KTtcbn07XG4iLCJcblxuXG4vKipcbiAqIFVUTSB6b25lcyBhcmUgZ3JvdXBlZCwgYW5kIGFzc2lnbmVkIHRvIG9uZSBvZiBhIGdyb3VwIG9mIDZcbiAqIHNldHMuXG4gKlxuICoge2ludH0gQHByaXZhdGVcbiAqL1xudmFyIE5VTV8xMDBLX1NFVFMgPSA2O1xuXG4vKipcbiAqIFRoZSBjb2x1bW4gbGV0dGVycyAoZm9yIGVhc3RpbmcpIG9mIHRoZSBsb3dlciBsZWZ0IHZhbHVlLCBwZXJcbiAqIHNldC5cbiAqXG4gKiB7c3RyaW5nfSBAcHJpdmF0ZVxuICovXG52YXIgU0VUX09SSUdJTl9DT0xVTU5fTEVUVEVSUyA9ICdBSlNBSlMnO1xuXG4vKipcbiAqIFRoZSByb3cgbGV0dGVycyAoZm9yIG5vcnRoaW5nKSBvZiB0aGUgbG93ZXIgbGVmdCB2YWx1ZSwgcGVyXG4gKiBzZXQuXG4gKlxuICoge3N0cmluZ30gQHByaXZhdGVcbiAqL1xudmFyIFNFVF9PUklHSU5fUk9XX0xFVFRFUlMgPSAnQUZBRkFGJztcblxudmFyIEEgPSA2NTsgLy8gQVxudmFyIEkgPSA3MzsgLy8gSVxudmFyIE8gPSA3OTsgLy8gT1xudmFyIFYgPSA4NjsgLy8gVlxudmFyIFogPSA5MDsgLy8gWlxuXG4vKipcbiAqIENvbnZlcnNpb24gb2YgbGF0L2xvbiB0byBNR1JTLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBsbCBPYmplY3QgbGl0ZXJhbCB3aXRoIGxhdCBhbmQgbG9uIHByb3BlcnRpZXMgb24gYVxuICogICAgIFdHUzg0IGVsbGlwc29pZC5cbiAqIEBwYXJhbSB7aW50fSBhY2N1cmFjeSBBY2N1cmFjeSBpbiBkaWdpdHMgKDUgZm9yIDEgbSwgNCBmb3IgMTAgbSwgMyBmb3JcbiAqICAgICAgMTAwIG0sIDIgZm9yIDEwMDAgbSBvciAxIGZvciAxMDAwMCBtKS4gT3B0aW9uYWwsIGRlZmF1bHQgaXMgNS5cbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIE1HUlMgc3RyaW5nIGZvciB0aGUgZ2l2ZW4gbG9jYXRpb24gYW5kIGFjY3VyYWN5LlxuICovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihsbCwgYWNjdXJhY3kpIHtcbiAgYWNjdXJhY3kgPSBhY2N1cmFjeSB8fCA1OyAvLyBkZWZhdWx0IGFjY3VyYWN5IDFtXG4gIHJldHVybiBlbmNvZGUoTEx0b1VUTSh7XG4gICAgbGF0OiBsbFsxXSxcbiAgICBsb246IGxsWzBdXG4gIH0pLCBhY2N1cmFjeSk7XG59O1xuXG4vKipcbiAqIENvbnZlcnNpb24gb2YgTUdSUyB0byBsYXQvbG9uLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZ3JzIE1HUlMgc3RyaW5nLlxuICogQHJldHVybiB7YXJyYXl9IEFuIGFycmF5IHdpdGggbGVmdCAobG9uZ2l0dWRlKSwgYm90dG9tIChsYXRpdHVkZSksIHJpZ2h0XG4gKiAgICAgKGxvbmdpdHVkZSkgYW5kIHRvcCAobGF0aXR1ZGUpIHZhbHVlcyBpbiBXR1M4NCwgcmVwcmVzZW50aW5nIHRoZVxuICogICAgIGJvdW5kaW5nIGJveCBmb3IgdGhlIHByb3ZpZGVkIE1HUlMgcmVmZXJlbmNlLlxuICovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihtZ3JzKSB7XG4gIHZhciBiYm94ID0gVVRNdG9MTChkZWNvZGUobWdycy50b1VwcGVyQ2FzZSgpKSk7XG4gIGlmIChiYm94LmxhdCAmJiBiYm94Lmxvbikge1xuICAgIHJldHVybiBbYmJveC5sb24sIGJib3gubGF0LCBiYm94LmxvbiwgYmJveC5sYXRdO1xuICB9XG4gIHJldHVybiBbYmJveC5sZWZ0LCBiYm94LmJvdHRvbSwgYmJveC5yaWdodCwgYmJveC50b3BdO1xufTtcblxuZXhwb3J0cy50b1BvaW50ID0gZnVuY3Rpb24obWdycykge1xuICB2YXIgYmJveCA9IFVUTXRvTEwoZGVjb2RlKG1ncnMudG9VcHBlckNhc2UoKSkpO1xuICBpZiAoYmJveC5sYXQgJiYgYmJveC5sb24pIHtcbiAgICByZXR1cm4gW2Jib3gubG9uLCBiYm94LmxhdF07XG4gIH1cbiAgcmV0dXJuIFsoYmJveC5sZWZ0ICsgYmJveC5yaWdodCkgLyAyLCAoYmJveC50b3AgKyBiYm94LmJvdHRvbSkgLyAyXTtcbn07XG4vKipcbiAqIENvbnZlcnNpb24gZnJvbSBkZWdyZWVzIHRvIHJhZGlhbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBkZWcgdGhlIGFuZ2xlIGluIGRlZ3JlZXMuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSBhbmdsZSBpbiByYWRpYW5zLlxuICovXG5mdW5jdGlvbiBkZWdUb1JhZChkZWcpIHtcbiAgcmV0dXJuIChkZWcgKiAoTWF0aC5QSSAvIDE4MC4wKSk7XG59XG5cbi8qKlxuICogQ29udmVyc2lvbiBmcm9tIHJhZGlhbnMgdG8gZGVncmVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCB0aGUgYW5nbGUgaW4gcmFkaWFucy5cbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGFuZ2xlIGluIGRlZ3JlZXMuXG4gKi9cbmZ1bmN0aW9uIHJhZFRvRGVnKHJhZCkge1xuICByZXR1cm4gKDE4MC4wICogKHJhZCAvIE1hdGguUEkpKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHNldCBvZiBMb25naXR1ZGUgYW5kIExhdGl0dWRlIGNvLW9yZGluYXRlcyB0byBVVE1cbiAqIHVzaW5nIHRoZSBXR1M4NCBlbGxpcHNvaWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBsbCBPYmplY3QgbGl0ZXJhbCB3aXRoIGxhdCBhbmQgbG9uIHByb3BlcnRpZXNcbiAqICAgICByZXByZXNlbnRpbmcgdGhlIFdHUzg0IGNvb3JkaW5hdGUgdG8gYmUgY29udmVydGVkLlxuICogQHJldHVybiB7b2JqZWN0fSBPYmplY3QgbGl0ZXJhbCBjb250YWluaW5nIHRoZSBVVE0gdmFsdWUgd2l0aCBlYXN0aW5nLFxuICogICAgIG5vcnRoaW5nLCB6b25lTnVtYmVyIGFuZCB6b25lTGV0dGVyIHByb3BlcnRpZXMsIGFuZCBhbiBvcHRpb25hbFxuICogICAgIGFjY3VyYWN5IHByb3BlcnR5IGluIGRpZ2l0cy4gUmV0dXJucyBudWxsIGlmIHRoZSBjb252ZXJzaW9uIGZhaWxlZC5cbiAqL1xuZnVuY3Rpb24gTEx0b1VUTShsbCkge1xuICB2YXIgTGF0ID0gbGwubGF0O1xuICB2YXIgTG9uZyA9IGxsLmxvbjtcbiAgdmFyIGEgPSA2Mzc4MTM3LjA7IC8vZWxsaXAucmFkaXVzO1xuICB2YXIgZWNjU3F1YXJlZCA9IDAuMDA2Njk0Mzg7IC8vZWxsaXAuZWNjc3E7XG4gIHZhciBrMCA9IDAuOTk5NjtcbiAgdmFyIExvbmdPcmlnaW47XG4gIHZhciBlY2NQcmltZVNxdWFyZWQ7XG4gIHZhciBOLCBULCBDLCBBLCBNO1xuICB2YXIgTGF0UmFkID0gZGVnVG9SYWQoTGF0KTtcbiAgdmFyIExvbmdSYWQgPSBkZWdUb1JhZChMb25nKTtcbiAgdmFyIExvbmdPcmlnaW5SYWQ7XG4gIHZhciBab25lTnVtYmVyO1xuICAvLyAoaW50KVxuICBab25lTnVtYmVyID0gTWF0aC5mbG9vcigoTG9uZyArIDE4MCkgLyA2KSArIDE7XG5cbiAgLy9NYWtlIHN1cmUgdGhlIGxvbmdpdHVkZSAxODAuMDAgaXMgaW4gWm9uZSA2MFxuICBpZiAoTG9uZyA9PT0gMTgwKSB7XG4gICAgWm9uZU51bWJlciA9IDYwO1xuICB9XG5cbiAgLy8gU3BlY2lhbCB6b25lIGZvciBOb3J3YXlcbiAgaWYgKExhdCA+PSA1Ni4wICYmIExhdCA8IDY0LjAgJiYgTG9uZyA+PSAzLjAgJiYgTG9uZyA8IDEyLjApIHtcbiAgICBab25lTnVtYmVyID0gMzI7XG4gIH1cblxuICAvLyBTcGVjaWFsIHpvbmVzIGZvciBTdmFsYmFyZFxuICBpZiAoTGF0ID49IDcyLjAgJiYgTGF0IDwgODQuMCkge1xuICAgIGlmIChMb25nID49IDAuMCAmJiBMb25nIDwgOS4wKSB7XG4gICAgICBab25lTnVtYmVyID0gMzE7XG4gICAgfVxuICAgIGVsc2UgaWYgKExvbmcgPj0gOS4wICYmIExvbmcgPCAyMS4wKSB7XG4gICAgICBab25lTnVtYmVyID0gMzM7XG4gICAgfVxuICAgIGVsc2UgaWYgKExvbmcgPj0gMjEuMCAmJiBMb25nIDwgMzMuMCkge1xuICAgICAgWm9uZU51bWJlciA9IDM1O1xuICAgIH1cbiAgICBlbHNlIGlmIChMb25nID49IDMzLjAgJiYgTG9uZyA8IDQyLjApIHtcbiAgICAgIFpvbmVOdW1iZXIgPSAzNztcbiAgICB9XG4gIH1cblxuICBMb25nT3JpZ2luID0gKFpvbmVOdW1iZXIgLSAxKSAqIDYgLSAxODAgKyAzOyAvLyszIHB1dHMgb3JpZ2luXG4gIC8vIGluIG1pZGRsZSBvZlxuICAvLyB6b25lXG4gIExvbmdPcmlnaW5SYWQgPSBkZWdUb1JhZChMb25nT3JpZ2luKTtcblxuICBlY2NQcmltZVNxdWFyZWQgPSAoZWNjU3F1YXJlZCkgLyAoMSAtIGVjY1NxdWFyZWQpO1xuXG4gIE4gPSBhIC8gTWF0aC5zcXJ0KDEgLSBlY2NTcXVhcmVkICogTWF0aC5zaW4oTGF0UmFkKSAqIE1hdGguc2luKExhdFJhZCkpO1xuICBUID0gTWF0aC50YW4oTGF0UmFkKSAqIE1hdGgudGFuKExhdFJhZCk7XG4gIEMgPSBlY2NQcmltZVNxdWFyZWQgKiBNYXRoLmNvcyhMYXRSYWQpICogTWF0aC5jb3MoTGF0UmFkKTtcbiAgQSA9IE1hdGguY29zKExhdFJhZCkgKiAoTG9uZ1JhZCAtIExvbmdPcmlnaW5SYWQpO1xuXG4gIE0gPSBhICogKCgxIC0gZWNjU3F1YXJlZCAvIDQgLSAzICogZWNjU3F1YXJlZCAqIGVjY1NxdWFyZWQgLyA2NCAtIDUgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAqIGVjY1NxdWFyZWQgLyAyNTYpICogTGF0UmFkIC0gKDMgKiBlY2NTcXVhcmVkIC8gOCArIDMgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDMyICsgNDUgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAqIGVjY1NxdWFyZWQgLyAxMDI0KSAqIE1hdGguc2luKDIgKiBMYXRSYWQpICsgKDE1ICogZWNjU3F1YXJlZCAqIGVjY1NxdWFyZWQgLyAyNTYgKyA0NSAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDEwMjQpICogTWF0aC5zaW4oNCAqIExhdFJhZCkgLSAoMzUgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAqIGVjY1NxdWFyZWQgLyAzMDcyKSAqIE1hdGguc2luKDYgKiBMYXRSYWQpKTtcblxuICB2YXIgVVRNRWFzdGluZyA9IChrMCAqIE4gKiAoQSArICgxIC0gVCArIEMpICogQSAqIEEgKiBBIC8gNi4wICsgKDUgLSAxOCAqIFQgKyBUICogVCArIDcyICogQyAtIDU4ICogZWNjUHJpbWVTcXVhcmVkKSAqIEEgKiBBICogQSAqIEEgKiBBIC8gMTIwLjApICsgNTAwMDAwLjApO1xuXG4gIHZhciBVVE1Ob3J0aGluZyA9IChrMCAqIChNICsgTiAqIE1hdGgudGFuKExhdFJhZCkgKiAoQSAqIEEgLyAyICsgKDUgLSBUICsgOSAqIEMgKyA0ICogQyAqIEMpICogQSAqIEEgKiBBICogQSAvIDI0LjAgKyAoNjEgLSA1OCAqIFQgKyBUICogVCArIDYwMCAqIEMgLSAzMzAgKiBlY2NQcmltZVNxdWFyZWQpICogQSAqIEEgKiBBICogQSAqIEEgKiBBIC8gNzIwLjApKSk7XG4gIGlmIChMYXQgPCAwLjApIHtcbiAgICBVVE1Ob3J0aGluZyArPSAxMDAwMDAwMC4wOyAvLzEwMDAwMDAwIG1ldGVyIG9mZnNldCBmb3JcbiAgICAvLyBzb3V0aGVybiBoZW1pc3BoZXJlXG4gIH1cblxuICByZXR1cm4ge1xuICAgIG5vcnRoaW5nOiBNYXRoLnJvdW5kKFVUTU5vcnRoaW5nKSxcbiAgICBlYXN0aW5nOiBNYXRoLnJvdW5kKFVUTUVhc3RpbmcpLFxuICAgIHpvbmVOdW1iZXI6IFpvbmVOdW1iZXIsXG4gICAgem9uZUxldHRlcjogZ2V0TGV0dGVyRGVzaWduYXRvcihMYXQpXG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgVVRNIGNvb3JkcyB0byBsYXQvbG9uZywgdXNpbmcgdGhlIFdHUzg0IGVsbGlwc29pZC4gVGhpcyBpcyBhIGNvbnZlbmllbmNlXG4gKiBjbGFzcyB3aGVyZSB0aGUgWm9uZSBjYW4gYmUgc3BlY2lmaWVkIGFzIGEgc2luZ2xlIHN0cmluZyBlZy5cIjYwTlwiIHdoaWNoXG4gKiBpcyB0aGVuIGJyb2tlbiBkb3duIGludG8gdGhlIFpvbmVOdW1iZXIgYW5kIFpvbmVMZXR0ZXIuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSB1dG0gQW4gb2JqZWN0IGxpdGVyYWwgd2l0aCBub3J0aGluZywgZWFzdGluZywgem9uZU51bWJlclxuICogICAgIGFuZCB6b25lTGV0dGVyIHByb3BlcnRpZXMuIElmIGFuIG9wdGlvbmFsIGFjY3VyYWN5IHByb3BlcnR5IGlzXG4gKiAgICAgcHJvdmlkZWQgKGluIG1ldGVycyksIGEgYm91bmRpbmcgYm94IHdpbGwgYmUgcmV0dXJuZWQgaW5zdGVhZCBvZlxuICogICAgIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUuXG4gKiBAcmV0dXJuIHtvYmplY3R9IEFuIG9iamVjdCBsaXRlcmFsIGNvbnRhaW5pbmcgZWl0aGVyIGxhdCBhbmQgbG9uIHZhbHVlc1xuICogICAgIChpZiBubyBhY2N1cmFjeSB3YXMgcHJvdmlkZWQpLCBvciB0b3AsIHJpZ2h0LCBib3R0b20gYW5kIGxlZnQgdmFsdWVzXG4gKiAgICAgZm9yIHRoZSBib3VuZGluZyBib3ggY2FsY3VsYXRlZCBhY2NvcmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFjY3VyYWN5LlxuICogICAgIFJldHVybnMgbnVsbCBpZiB0aGUgY29udmVyc2lvbiBmYWlsZWQuXG4gKi9cbmZ1bmN0aW9uIFVUTXRvTEwodXRtKSB7XG5cbiAgdmFyIFVUTU5vcnRoaW5nID0gdXRtLm5vcnRoaW5nO1xuICB2YXIgVVRNRWFzdGluZyA9IHV0bS5lYXN0aW5nO1xuICB2YXIgem9uZUxldHRlciA9IHV0bS56b25lTGV0dGVyO1xuICB2YXIgem9uZU51bWJlciA9IHV0bS56b25lTnVtYmVyO1xuICAvLyBjaGVjayB0aGUgWm9uZU51bW1iZXIgaXMgdmFsaWRcbiAgaWYgKHpvbmVOdW1iZXIgPCAwIHx8IHpvbmVOdW1iZXIgPiA2MCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIGswID0gMC45OTk2O1xuICB2YXIgYSA9IDYzNzgxMzcuMDsgLy9lbGxpcC5yYWRpdXM7XG4gIHZhciBlY2NTcXVhcmVkID0gMC4wMDY2OTQzODsgLy9lbGxpcC5lY2NzcTtcbiAgdmFyIGVjY1ByaW1lU3F1YXJlZDtcbiAgdmFyIGUxID0gKDEgLSBNYXRoLnNxcnQoMSAtIGVjY1NxdWFyZWQpKSAvICgxICsgTWF0aC5zcXJ0KDEgLSBlY2NTcXVhcmVkKSk7XG4gIHZhciBOMSwgVDEsIEMxLCBSMSwgRCwgTTtcbiAgdmFyIExvbmdPcmlnaW47XG4gIHZhciBtdSwgcGhpMVJhZDtcblxuICAvLyByZW1vdmUgNTAwLDAwMCBtZXRlciBvZmZzZXQgZm9yIGxvbmdpdHVkZVxuICB2YXIgeCA9IFVUTUVhc3RpbmcgLSA1MDAwMDAuMDtcbiAgdmFyIHkgPSBVVE1Ob3J0aGluZztcblxuICAvLyBXZSBtdXN0IGtub3cgc29tZWhvdyBpZiB3ZSBhcmUgaW4gdGhlIE5vcnRoZXJuIG9yIFNvdXRoZXJuXG4gIC8vIGhlbWlzcGhlcmUsIHRoaXMgaXMgdGhlIG9ubHkgdGltZSB3ZSB1c2UgdGhlIGxldHRlciBTbyBldmVuXG4gIC8vIGlmIHRoZSBab25lIGxldHRlciBpc24ndCBleGFjdGx5IGNvcnJlY3QgaXQgc2hvdWxkIGluZGljYXRlXG4gIC8vIHRoZSBoZW1pc3BoZXJlIGNvcnJlY3RseVxuICBpZiAoem9uZUxldHRlciA8ICdOJykge1xuICAgIHkgLT0gMTAwMDAwMDAuMDsgLy8gcmVtb3ZlIDEwLDAwMCwwMDAgbWV0ZXIgb2Zmc2V0IHVzZWRcbiAgICAvLyBmb3Igc291dGhlcm4gaGVtaXNwaGVyZVxuICB9XG5cbiAgLy8gVGhlcmUgYXJlIDYwIHpvbmVzIHdpdGggem9uZSAxIGJlaW5nIGF0IFdlc3QgLTE4MCB0byAtMTc0XG4gIExvbmdPcmlnaW4gPSAoem9uZU51bWJlciAtIDEpICogNiAtIDE4MCArIDM7IC8vICszIHB1dHMgb3JpZ2luXG4gIC8vIGluIG1pZGRsZSBvZlxuICAvLyB6b25lXG5cbiAgZWNjUHJpbWVTcXVhcmVkID0gKGVjY1NxdWFyZWQpIC8gKDEgLSBlY2NTcXVhcmVkKTtcblxuICBNID0geSAvIGswO1xuICBtdSA9IE0gLyAoYSAqICgxIC0gZWNjU3F1YXJlZCAvIDQgLSAzICogZWNjU3F1YXJlZCAqIGVjY1NxdWFyZWQgLyA2NCAtIDUgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAqIGVjY1NxdWFyZWQgLyAyNTYpKTtcblxuICBwaGkxUmFkID0gbXUgKyAoMyAqIGUxIC8gMiAtIDI3ICogZTEgKiBlMSAqIGUxIC8gMzIpICogTWF0aC5zaW4oMiAqIG11KSArICgyMSAqIGUxICogZTEgLyAxNiAtIDU1ICogZTEgKiBlMSAqIGUxICogZTEgLyAzMikgKiBNYXRoLnNpbig0ICogbXUpICsgKDE1MSAqIGUxICogZTEgKiBlMSAvIDk2KSAqIE1hdGguc2luKDYgKiBtdSk7XG4gIC8vIGRvdWJsZSBwaGkxID0gUHJvak1hdGgucmFkVG9EZWcocGhpMVJhZCk7XG5cbiAgTjEgPSBhIC8gTWF0aC5zcXJ0KDEgLSBlY2NTcXVhcmVkICogTWF0aC5zaW4ocGhpMVJhZCkgKiBNYXRoLnNpbihwaGkxUmFkKSk7XG4gIFQxID0gTWF0aC50YW4ocGhpMVJhZCkgKiBNYXRoLnRhbihwaGkxUmFkKTtcbiAgQzEgPSBlY2NQcmltZVNxdWFyZWQgKiBNYXRoLmNvcyhwaGkxUmFkKSAqIE1hdGguY29zKHBoaTFSYWQpO1xuICBSMSA9IGEgKiAoMSAtIGVjY1NxdWFyZWQpIC8gTWF0aC5wb3coMSAtIGVjY1NxdWFyZWQgKiBNYXRoLnNpbihwaGkxUmFkKSAqIE1hdGguc2luKHBoaTFSYWQpLCAxLjUpO1xuICBEID0geCAvIChOMSAqIGswKTtcblxuICB2YXIgbGF0ID0gcGhpMVJhZCAtIChOMSAqIE1hdGgudGFuKHBoaTFSYWQpIC8gUjEpICogKEQgKiBEIC8gMiAtICg1ICsgMyAqIFQxICsgMTAgKiBDMSAtIDQgKiBDMSAqIEMxIC0gOSAqIGVjY1ByaW1lU3F1YXJlZCkgKiBEICogRCAqIEQgKiBEIC8gMjQgKyAoNjEgKyA5MCAqIFQxICsgMjk4ICogQzEgKyA0NSAqIFQxICogVDEgLSAyNTIgKiBlY2NQcmltZVNxdWFyZWQgLSAzICogQzEgKiBDMSkgKiBEICogRCAqIEQgKiBEICogRCAqIEQgLyA3MjApO1xuICBsYXQgPSByYWRUb0RlZyhsYXQpO1xuXG4gIHZhciBsb24gPSAoRCAtICgxICsgMiAqIFQxICsgQzEpICogRCAqIEQgKiBEIC8gNiArICg1IC0gMiAqIEMxICsgMjggKiBUMSAtIDMgKiBDMSAqIEMxICsgOCAqIGVjY1ByaW1lU3F1YXJlZCArIDI0ICogVDEgKiBUMSkgKiBEICogRCAqIEQgKiBEICogRCAvIDEyMCkgLyBNYXRoLmNvcyhwaGkxUmFkKTtcbiAgbG9uID0gTG9uZ09yaWdpbiArIHJhZFRvRGVnKGxvbik7XG5cbiAgdmFyIHJlc3VsdDtcbiAgaWYgKHV0bS5hY2N1cmFjeSkge1xuICAgIHZhciB0b3BSaWdodCA9IFVUTXRvTEwoe1xuICAgICAgbm9ydGhpbmc6IHV0bS5ub3J0aGluZyArIHV0bS5hY2N1cmFjeSxcbiAgICAgIGVhc3Rpbmc6IHV0bS5lYXN0aW5nICsgdXRtLmFjY3VyYWN5LFxuICAgICAgem9uZUxldHRlcjogdXRtLnpvbmVMZXR0ZXIsXG4gICAgICB6b25lTnVtYmVyOiB1dG0uem9uZU51bWJlclxuICAgIH0pO1xuICAgIHJlc3VsdCA9IHtcbiAgICAgIHRvcDogdG9wUmlnaHQubGF0LFxuICAgICAgcmlnaHQ6IHRvcFJpZ2h0LmxvbixcbiAgICAgIGJvdHRvbTogbGF0LFxuICAgICAgbGVmdDogbG9uXG4gICAgfTtcbiAgfVxuICBlbHNlIHtcbiAgICByZXN1bHQgPSB7XG4gICAgICBsYXQ6IGxhdCxcbiAgICAgIGxvbjogbG9uXG4gICAgfTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIE1HUlMgbGV0dGVyIGRlc2lnbmF0b3IgZm9yIHRoZSBnaXZlbiBsYXRpdHVkZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IGxhdCBUaGUgbGF0aXR1ZGUgaW4gV0dTODQgdG8gZ2V0IHRoZSBsZXR0ZXIgZGVzaWduYXRvclxuICogICAgIGZvci5cbiAqIEByZXR1cm4ge2NoYXJ9IFRoZSBsZXR0ZXIgZGVzaWduYXRvci5cbiAqL1xuZnVuY3Rpb24gZ2V0TGV0dGVyRGVzaWduYXRvcihsYXQpIHtcbiAgLy9UaGlzIGlzIGhlcmUgYXMgYW4gZXJyb3IgZmxhZyB0byBzaG93IHRoYXQgdGhlIExhdGl0dWRlIGlzXG4gIC8vb3V0c2lkZSBNR1JTIGxpbWl0c1xuICB2YXIgTGV0dGVyRGVzaWduYXRvciA9ICdaJztcblxuICBpZiAoKDg0ID49IGxhdCkgJiYgKGxhdCA+PSA3MikpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ1gnO1xuICB9XG4gIGVsc2UgaWYgKCg3MiA+IGxhdCkgJiYgKGxhdCA+PSA2NCkpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ1cnO1xuICB9XG4gIGVsc2UgaWYgKCg2NCA+IGxhdCkgJiYgKGxhdCA+PSA1NikpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ1YnO1xuICB9XG4gIGVsc2UgaWYgKCg1NiA+IGxhdCkgJiYgKGxhdCA+PSA0OCkpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ1UnO1xuICB9XG4gIGVsc2UgaWYgKCg0OCA+IGxhdCkgJiYgKGxhdCA+PSA0MCkpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ1QnO1xuICB9XG4gIGVsc2UgaWYgKCg0MCA+IGxhdCkgJiYgKGxhdCA+PSAzMikpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ1MnO1xuICB9XG4gIGVsc2UgaWYgKCgzMiA+IGxhdCkgJiYgKGxhdCA+PSAyNCkpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ1InO1xuICB9XG4gIGVsc2UgaWYgKCgyNCA+IGxhdCkgJiYgKGxhdCA+PSAxNikpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ1EnO1xuICB9XG4gIGVsc2UgaWYgKCgxNiA+IGxhdCkgJiYgKGxhdCA+PSA4KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnUCc7XG4gIH1cbiAgZWxzZSBpZiAoKDggPiBsYXQpICYmIChsYXQgPj0gMCkpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ04nO1xuICB9XG4gIGVsc2UgaWYgKCgwID4gbGF0KSAmJiAobGF0ID49IC04KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnTSc7XG4gIH1cbiAgZWxzZSBpZiAoKC04ID4gbGF0KSAmJiAobGF0ID49IC0xNikpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ0wnO1xuICB9XG4gIGVsc2UgaWYgKCgtMTYgPiBsYXQpICYmIChsYXQgPj0gLTI0KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnSyc7XG4gIH1cbiAgZWxzZSBpZiAoKC0yNCA+IGxhdCkgJiYgKGxhdCA+PSAtMzIpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdKJztcbiAgfVxuICBlbHNlIGlmICgoLTMyID4gbGF0KSAmJiAobGF0ID49IC00MCkpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ0gnO1xuICB9XG4gIGVsc2UgaWYgKCgtNDAgPiBsYXQpICYmIChsYXQgPj0gLTQ4KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnRyc7XG4gIH1cbiAgZWxzZSBpZiAoKC00OCA+IGxhdCkgJiYgKGxhdCA+PSAtNTYpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdGJztcbiAgfVxuICBlbHNlIGlmICgoLTU2ID4gbGF0KSAmJiAobGF0ID49IC02NCkpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ0UnO1xuICB9XG4gIGVsc2UgaWYgKCgtNjQgPiBsYXQpICYmIChsYXQgPj0gLTcyKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnRCc7XG4gIH1cbiAgZWxzZSBpZiAoKC03MiA+IGxhdCkgJiYgKGxhdCA+PSAtODApKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdDJztcbiAgfVxuICByZXR1cm4gTGV0dGVyRGVzaWduYXRvcjtcbn1cblxuLyoqXG4gKiBFbmNvZGVzIGEgVVRNIGxvY2F0aW9uIGFzIE1HUlMgc3RyaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge29iamVjdH0gdXRtIEFuIG9iamVjdCBsaXRlcmFsIHdpdGggZWFzdGluZywgbm9ydGhpbmcsXG4gKiAgICAgem9uZUxldHRlciwgem9uZU51bWJlclxuICogQHBhcmFtIHtudW1iZXJ9IGFjY3VyYWN5IEFjY3VyYWN5IGluIGRpZ2l0cyAoMS01KS5cbiAqIEByZXR1cm4ge3N0cmluZ30gTUdSUyBzdHJpbmcgZm9yIHRoZSBnaXZlbiBVVE0gbG9jYXRpb24uXG4gKi9cbmZ1bmN0aW9uIGVuY29kZSh1dG0sIGFjY3VyYWN5KSB7XG4gIC8vIHByZXBlbmQgd2l0aCBsZWFkaW5nIHplcm9lc1xuICB2YXIgc2Vhc3RpbmcgPSBcIjAwMDAwXCIgKyB1dG0uZWFzdGluZyxcbiAgICBzbm9ydGhpbmcgPSBcIjAwMDAwXCIgKyB1dG0ubm9ydGhpbmc7XG5cbiAgcmV0dXJuIHV0bS56b25lTnVtYmVyICsgdXRtLnpvbmVMZXR0ZXIgKyBnZXQxMDBrSUQodXRtLmVhc3RpbmcsIHV0bS5ub3J0aGluZywgdXRtLnpvbmVOdW1iZXIpICsgc2Vhc3Rpbmcuc3Vic3RyKHNlYXN0aW5nLmxlbmd0aCAtIDUsIGFjY3VyYWN5KSArIHNub3J0aGluZy5zdWJzdHIoc25vcnRoaW5nLmxlbmd0aCAtIDUsIGFjY3VyYWN5KTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHR3byBsZXR0ZXIgMTAwayBkZXNpZ25hdG9yIGZvciBhIGdpdmVuIFVUTSBlYXN0aW5nLFxuICogbm9ydGhpbmcgYW5kIHpvbmUgbnVtYmVyIHZhbHVlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gZWFzdGluZ1xuICogQHBhcmFtIHtudW1iZXJ9IG5vcnRoaW5nXG4gKiBAcGFyYW0ge251bWJlcn0gem9uZU51bWJlclxuICogQHJldHVybiB0aGUgdHdvIGxldHRlciAxMDBrIGRlc2lnbmF0b3IgZm9yIHRoZSBnaXZlbiBVVE0gbG9jYXRpb24uXG4gKi9cbmZ1bmN0aW9uIGdldDEwMGtJRChlYXN0aW5nLCBub3J0aGluZywgem9uZU51bWJlcikge1xuICB2YXIgc2V0UGFybSA9IGdldDEwMGtTZXRGb3Jab25lKHpvbmVOdW1iZXIpO1xuICB2YXIgc2V0Q29sdW1uID0gTWF0aC5mbG9vcihlYXN0aW5nIC8gMTAwMDAwKTtcbiAgdmFyIHNldFJvdyA9IE1hdGguZmxvb3Iobm9ydGhpbmcgLyAxMDAwMDApICUgMjA7XG4gIHJldHVybiBnZXRMZXR0ZXIxMDBrSUQoc2V0Q29sdW1uLCBzZXRSb3csIHNldFBhcm0pO1xufVxuXG4vKipcbiAqIEdpdmVuIGEgVVRNIHpvbmUgbnVtYmVyLCBmaWd1cmUgb3V0IHRoZSBNR1JTIDEwMEsgc2V0IGl0IGlzIGluLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gaSBBbiBVVE0gem9uZSBudW1iZXIuXG4gKiBAcmV0dXJuIHtudW1iZXJ9IHRoZSAxMDBrIHNldCB0aGUgVVRNIHpvbmUgaXMgaW4uXG4gKi9cbmZ1bmN0aW9uIGdldDEwMGtTZXRGb3Jab25lKGkpIHtcbiAgdmFyIHNldFBhcm0gPSBpICUgTlVNXzEwMEtfU0VUUztcbiAgaWYgKHNldFBhcm0gPT09IDApIHtcbiAgICBzZXRQYXJtID0gTlVNXzEwMEtfU0VUUztcbiAgfVxuXG4gIHJldHVybiBzZXRQYXJtO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdHdvLWxldHRlciBNR1JTIDEwMGsgZGVzaWduYXRvciBnaXZlbiBpbmZvcm1hdGlvblxuICogdHJhbnNsYXRlZCBmcm9tIHRoZSBVVE0gbm9ydGhpbmcsIGVhc3RpbmcgYW5kIHpvbmUgbnVtYmVyLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gY29sdW1uIHRoZSBjb2x1bW4gaW5kZXggYXMgaXQgcmVsYXRlcyB0byB0aGUgTUdSU1xuICogICAgICAgIDEwMGsgc2V0IHNwcmVhZHNoZWV0LCBjcmVhdGVkIGZyb20gdGhlIFVUTSBlYXN0aW5nLlxuICogICAgICAgIFZhbHVlcyBhcmUgMS04LlxuICogQHBhcmFtIHtudW1iZXJ9IHJvdyB0aGUgcm93IGluZGV4IGFzIGl0IHJlbGF0ZXMgdG8gdGhlIE1HUlMgMTAwayBzZXRcbiAqICAgICAgICBzcHJlYWRzaGVldCwgY3JlYXRlZCBmcm9tIHRoZSBVVE0gbm9ydGhpbmcgdmFsdWUuIFZhbHVlc1xuICogICAgICAgIGFyZSBmcm9tIDAtMTkuXG4gKiBAcGFyYW0ge251bWJlcn0gcGFybSB0aGUgc2V0IGJsb2NrLCBhcyBpdCByZWxhdGVzIHRvIHRoZSBNR1JTIDEwMGsgc2V0XG4gKiAgICAgICAgc3ByZWFkc2hlZXQsIGNyZWF0ZWQgZnJvbSB0aGUgVVRNIHpvbmUuIFZhbHVlcyBhcmUgZnJvbVxuICogICAgICAgIDEtNjAuXG4gKiBAcmV0dXJuIHR3byBsZXR0ZXIgTUdSUyAxMDBrIGNvZGUuXG4gKi9cbmZ1bmN0aW9uIGdldExldHRlcjEwMGtJRChjb2x1bW4sIHJvdywgcGFybSkge1xuICAvLyBjb2xPcmlnaW4gYW5kIHJvd09yaWdpbiBhcmUgdGhlIGxldHRlcnMgYXQgdGhlIG9yaWdpbiBvZiB0aGUgc2V0XG4gIHZhciBpbmRleCA9IHBhcm0gLSAxO1xuICB2YXIgY29sT3JpZ2luID0gU0VUX09SSUdJTl9DT0xVTU5fTEVUVEVSUy5jaGFyQ29kZUF0KGluZGV4KTtcbiAgdmFyIHJvd09yaWdpbiA9IFNFVF9PUklHSU5fUk9XX0xFVFRFUlMuY2hhckNvZGVBdChpbmRleCk7XG5cbiAgLy8gY29sSW50IGFuZCByb3dJbnQgYXJlIHRoZSBsZXR0ZXJzIHRvIGJ1aWxkIHRvIHJldHVyblxuICB2YXIgY29sSW50ID0gY29sT3JpZ2luICsgY29sdW1uIC0gMTtcbiAgdmFyIHJvd0ludCA9IHJvd09yaWdpbiArIHJvdztcbiAgdmFyIHJvbGxvdmVyID0gZmFsc2U7XG5cbiAgaWYgKGNvbEludCA+IFopIHtcbiAgICBjb2xJbnQgPSBjb2xJbnQgLSBaICsgQSAtIDE7XG4gICAgcm9sbG92ZXIgPSB0cnVlO1xuICB9XG5cbiAgaWYgKGNvbEludCA9PT0gSSB8fCAoY29sT3JpZ2luIDwgSSAmJiBjb2xJbnQgPiBJKSB8fCAoKGNvbEludCA+IEkgfHwgY29sT3JpZ2luIDwgSSkgJiYgcm9sbG92ZXIpKSB7XG4gICAgY29sSW50Kys7XG4gIH1cblxuICBpZiAoY29sSW50ID09PSBPIHx8IChjb2xPcmlnaW4gPCBPICYmIGNvbEludCA+IE8pIHx8ICgoY29sSW50ID4gTyB8fCBjb2xPcmlnaW4gPCBPKSAmJiByb2xsb3ZlcikpIHtcbiAgICBjb2xJbnQrKztcblxuICAgIGlmIChjb2xJbnQgPT09IEkpIHtcbiAgICAgIGNvbEludCsrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjb2xJbnQgPiBaKSB7XG4gICAgY29sSW50ID0gY29sSW50IC0gWiArIEEgLSAxO1xuICB9XG5cbiAgaWYgKHJvd0ludCA+IFYpIHtcbiAgICByb3dJbnQgPSByb3dJbnQgLSBWICsgQSAtIDE7XG4gICAgcm9sbG92ZXIgPSB0cnVlO1xuICB9XG4gIGVsc2Uge1xuICAgIHJvbGxvdmVyID0gZmFsc2U7XG4gIH1cblxuICBpZiAoKChyb3dJbnQgPT09IEkpIHx8ICgocm93T3JpZ2luIDwgSSkgJiYgKHJvd0ludCA+IEkpKSkgfHwgKCgocm93SW50ID4gSSkgfHwgKHJvd09yaWdpbiA8IEkpKSAmJiByb2xsb3ZlcikpIHtcbiAgICByb3dJbnQrKztcbiAgfVxuXG4gIGlmICgoKHJvd0ludCA9PT0gTykgfHwgKChyb3dPcmlnaW4gPCBPKSAmJiAocm93SW50ID4gTykpKSB8fCAoKChyb3dJbnQgPiBPKSB8fCAocm93T3JpZ2luIDwgTykpICYmIHJvbGxvdmVyKSkge1xuICAgIHJvd0ludCsrO1xuXG4gICAgaWYgKHJvd0ludCA9PT0gSSkge1xuICAgICAgcm93SW50Kys7XG4gICAgfVxuICB9XG5cbiAgaWYgKHJvd0ludCA+IFYpIHtcbiAgICByb3dJbnQgPSByb3dJbnQgLSBWICsgQSAtIDE7XG4gIH1cblxuICB2YXIgdHdvTGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShjb2xJbnQpICsgU3RyaW5nLmZyb21DaGFyQ29kZShyb3dJbnQpO1xuICByZXR1cm4gdHdvTGV0dGVyO1xufVxuXG4vKipcbiAqIERlY29kZSB0aGUgVVRNIHBhcmFtZXRlcnMgZnJvbSBhIE1HUlMgc3RyaW5nLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gbWdyc1N0cmluZyBhbiBVUFBFUkNBU0UgY29vcmRpbmF0ZSBzdHJpbmcgaXMgZXhwZWN0ZWQuXG4gKiBAcmV0dXJuIHtvYmplY3R9IEFuIG9iamVjdCBsaXRlcmFsIHdpdGggZWFzdGluZywgbm9ydGhpbmcsIHpvbmVMZXR0ZXIsXG4gKiAgICAgem9uZU51bWJlciBhbmQgYWNjdXJhY3kgKGluIG1ldGVycykgcHJvcGVydGllcy5cbiAqL1xuZnVuY3Rpb24gZGVjb2RlKG1ncnNTdHJpbmcpIHtcblxuICBpZiAobWdyc1N0cmluZyAmJiBtZ3JzU3RyaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IChcIk1HUlNQb2ludCBjb3ZlcnRpbmcgZnJvbSBub3RoaW5nXCIpO1xuICB9XG5cbiAgdmFyIGxlbmd0aCA9IG1ncnNTdHJpbmcubGVuZ3RoO1xuXG4gIHZhciBodW5LID0gbnVsbDtcbiAgdmFyIHNiID0gXCJcIjtcbiAgdmFyIHRlc3RDaGFyO1xuICB2YXIgaSA9IDA7XG5cbiAgLy8gZ2V0IFpvbmUgbnVtYmVyXG4gIHdoaWxlICghKC9bQS1aXS8pLnRlc3QodGVzdENoYXIgPSBtZ3JzU3RyaW5nLmNoYXJBdChpKSkpIHtcbiAgICBpZiAoaSA+PSAyKSB7XG4gICAgICB0aHJvdyAoXCJNR1JTUG9pbnQgYmFkIGNvbnZlcnNpb24gZnJvbTogXCIgKyBtZ3JzU3RyaW5nKTtcbiAgICB9XG4gICAgc2IgKz0gdGVzdENoYXI7XG4gICAgaSsrO1xuICB9XG5cbiAgdmFyIHpvbmVOdW1iZXIgPSBwYXJzZUludChzYiwgMTApO1xuXG4gIGlmIChpID09PSAwIHx8IGkgKyAzID4gbGVuZ3RoKSB7XG4gICAgLy8gQSBnb29kIE1HUlMgc3RyaW5nIGhhcyB0byBiZSA0LTUgZGlnaXRzIGxvbmcsXG4gICAgLy8gIyNBQUEvI0FBQSBhdCBsZWFzdC5cbiAgICB0aHJvdyAoXCJNR1JTUG9pbnQgYmFkIGNvbnZlcnNpb24gZnJvbTogXCIgKyBtZ3JzU3RyaW5nKTtcbiAgfVxuXG4gIHZhciB6b25lTGV0dGVyID0gbWdyc1N0cmluZy5jaGFyQXQoaSsrKTtcblxuICAvLyBTaG91bGQgd2UgY2hlY2sgdGhlIHpvbmUgbGV0dGVyIGhlcmU/IFdoeSBub3QuXG4gIGlmICh6b25lTGV0dGVyIDw9ICdBJyB8fCB6b25lTGV0dGVyID09PSAnQicgfHwgem9uZUxldHRlciA9PT0gJ1knIHx8IHpvbmVMZXR0ZXIgPj0gJ1onIHx8IHpvbmVMZXR0ZXIgPT09ICdJJyB8fCB6b25lTGV0dGVyID09PSAnTycpIHtcbiAgICB0aHJvdyAoXCJNR1JTUG9pbnQgem9uZSBsZXR0ZXIgXCIgKyB6b25lTGV0dGVyICsgXCIgbm90IGhhbmRsZWQ6IFwiICsgbWdyc1N0cmluZyk7XG4gIH1cblxuICBodW5LID0gbWdyc1N0cmluZy5zdWJzdHJpbmcoaSwgaSArPSAyKTtcblxuICB2YXIgc2V0ID0gZ2V0MTAwa1NldEZvclpvbmUoem9uZU51bWJlcik7XG5cbiAgdmFyIGVhc3QxMDBrID0gZ2V0RWFzdGluZ0Zyb21DaGFyKGh1bksuY2hhckF0KDApLCBzZXQpO1xuICB2YXIgbm9ydGgxMDBrID0gZ2V0Tm9ydGhpbmdGcm9tQ2hhcihodW5LLmNoYXJBdCgxKSwgc2V0KTtcblxuICAvLyBXZSBoYXZlIGEgYnVnIHdoZXJlIHRoZSBub3J0aGluZyBtYXkgYmUgMjAwMDAwMCB0b28gbG93LlxuICAvLyBIb3dcbiAgLy8gZG8gd2Uga25vdyB3aGVuIHRvIHJvbGwgb3Zlcj9cblxuICB3aGlsZSAobm9ydGgxMDBrIDwgZ2V0TWluTm9ydGhpbmcoem9uZUxldHRlcikpIHtcbiAgICBub3J0aDEwMGsgKz0gMjAwMDAwMDtcbiAgfVxuXG4gIC8vIGNhbGN1bGF0ZSB0aGUgY2hhciBpbmRleCBmb3IgZWFzdGluZy9ub3J0aGluZyBzZXBhcmF0b3JcbiAgdmFyIHJlbWFpbmRlciA9IGxlbmd0aCAtIGk7XG5cbiAgaWYgKHJlbWFpbmRlciAlIDIgIT09IDApIHtcbiAgICB0aHJvdyAoXCJNR1JTUG9pbnQgaGFzIHRvIGhhdmUgYW4gZXZlbiBudW1iZXIgXFxub2YgZGlnaXRzIGFmdGVyIHRoZSB6b25lIGxldHRlciBhbmQgdHdvIDEwMGttIGxldHRlcnMgLSBmcm9udCBcXG5oYWxmIGZvciBlYXN0aW5nIG1ldGVycywgc2Vjb25kIGhhbGYgZm9yIFxcbm5vcnRoaW5nIG1ldGVyc1wiICsgbWdyc1N0cmluZyk7XG4gIH1cblxuICB2YXIgc2VwID0gcmVtYWluZGVyIC8gMjtcblxuICB2YXIgc2VwRWFzdGluZyA9IDAuMDtcbiAgdmFyIHNlcE5vcnRoaW5nID0gMC4wO1xuICB2YXIgYWNjdXJhY3lCb251cywgc2VwRWFzdGluZ1N0cmluZywgc2VwTm9ydGhpbmdTdHJpbmcsIGVhc3RpbmcsIG5vcnRoaW5nO1xuICBpZiAoc2VwID4gMCkge1xuICAgIGFjY3VyYWN5Qm9udXMgPSAxMDAwMDAuMCAvIE1hdGgucG93KDEwLCBzZXApO1xuICAgIHNlcEVhc3RpbmdTdHJpbmcgPSBtZ3JzU3RyaW5nLnN1YnN0cmluZyhpLCBpICsgc2VwKTtcbiAgICBzZXBFYXN0aW5nID0gcGFyc2VGbG9hdChzZXBFYXN0aW5nU3RyaW5nKSAqIGFjY3VyYWN5Qm9udXM7XG4gICAgc2VwTm9ydGhpbmdTdHJpbmcgPSBtZ3JzU3RyaW5nLnN1YnN0cmluZyhpICsgc2VwKTtcbiAgICBzZXBOb3J0aGluZyA9IHBhcnNlRmxvYXQoc2VwTm9ydGhpbmdTdHJpbmcpICogYWNjdXJhY3lCb251cztcbiAgfVxuXG4gIGVhc3RpbmcgPSBzZXBFYXN0aW5nICsgZWFzdDEwMGs7XG4gIG5vcnRoaW5nID0gc2VwTm9ydGhpbmcgKyBub3J0aDEwMGs7XG5cbiAgcmV0dXJuIHtcbiAgICBlYXN0aW5nOiBlYXN0aW5nLFxuICAgIG5vcnRoaW5nOiBub3J0aGluZyxcbiAgICB6b25lTGV0dGVyOiB6b25lTGV0dGVyLFxuICAgIHpvbmVOdW1iZXI6IHpvbmVOdW1iZXIsXG4gICAgYWNjdXJhY3k6IGFjY3VyYWN5Qm9udXNcbiAgfTtcbn1cblxuLyoqXG4gKiBHaXZlbiB0aGUgZmlyc3QgbGV0dGVyIGZyb20gYSB0d28tbGV0dGVyIE1HUlMgMTAwayB6b25lLCBhbmQgZ2l2ZW4gdGhlXG4gKiBNR1JTIHRhYmxlIHNldCBmb3IgdGhlIHpvbmUgbnVtYmVyLCBmaWd1cmUgb3V0IHRoZSBlYXN0aW5nIHZhbHVlIHRoYXRcbiAqIHNob3VsZCBiZSBhZGRlZCB0byB0aGUgb3RoZXIsIHNlY29uZGFyeSBlYXN0aW5nIHZhbHVlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge2NoYXJ9IGUgVGhlIGZpcnN0IGxldHRlciBmcm9tIGEgdHdvLWxldHRlciBNR1JTIDEwMMK0ayB6b25lLlxuICogQHBhcmFtIHtudW1iZXJ9IHNldCBUaGUgTUdSUyB0YWJsZSBzZXQgZm9yIHRoZSB6b25lIG51bWJlci5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIGVhc3RpbmcgdmFsdWUgZm9yIHRoZSBnaXZlbiBsZXR0ZXIgYW5kIHNldC5cbiAqL1xuZnVuY3Rpb24gZ2V0RWFzdGluZ0Zyb21DaGFyKGUsIHNldCkge1xuICAvLyBjb2xPcmlnaW4gaXMgdGhlIGxldHRlciBhdCB0aGUgb3JpZ2luIG9mIHRoZSBzZXQgZm9yIHRoZVxuICAvLyBjb2x1bW5cbiAgdmFyIGN1ckNvbCA9IFNFVF9PUklHSU5fQ09MVU1OX0xFVFRFUlMuY2hhckNvZGVBdChzZXQgLSAxKTtcbiAgdmFyIGVhc3RpbmdWYWx1ZSA9IDEwMDAwMC4wO1xuICB2YXIgcmV3aW5kTWFya2VyID0gZmFsc2U7XG5cbiAgd2hpbGUgKGN1ckNvbCAhPT0gZS5jaGFyQ29kZUF0KDApKSB7XG4gICAgY3VyQ29sKys7XG4gICAgaWYgKGN1ckNvbCA9PT0gSSkge1xuICAgICAgY3VyQ29sKys7XG4gICAgfVxuICAgIGlmIChjdXJDb2wgPT09IE8pIHtcbiAgICAgIGN1ckNvbCsrO1xuICAgIH1cbiAgICBpZiAoY3VyQ29sID4gWikge1xuICAgICAgaWYgKHJld2luZE1hcmtlcikge1xuICAgICAgICB0aHJvdyAoXCJCYWQgY2hhcmFjdGVyOiBcIiArIGUpO1xuICAgICAgfVxuICAgICAgY3VyQ29sID0gQTtcbiAgICAgIHJld2luZE1hcmtlciA9IHRydWU7XG4gICAgfVxuICAgIGVhc3RpbmdWYWx1ZSArPSAxMDAwMDAuMDtcbiAgfVxuXG4gIHJldHVybiBlYXN0aW5nVmFsdWU7XG59XG5cbi8qKlxuICogR2l2ZW4gdGhlIHNlY29uZCBsZXR0ZXIgZnJvbSBhIHR3by1sZXR0ZXIgTUdSUyAxMDBrIHpvbmUsIGFuZCBnaXZlbiB0aGVcbiAqIE1HUlMgdGFibGUgc2V0IGZvciB0aGUgem9uZSBudW1iZXIsIGZpZ3VyZSBvdXQgdGhlIG5vcnRoaW5nIHZhbHVlIHRoYXRcbiAqIHNob3VsZCBiZSBhZGRlZCB0byB0aGUgb3RoZXIsIHNlY29uZGFyeSBub3J0aGluZyB2YWx1ZS4gWW91IGhhdmUgdG9cbiAqIHJlbWVtYmVyIHRoYXQgTm9ydGhpbmdzIGFyZSBkZXRlcm1pbmVkIGZyb20gdGhlIGVxdWF0b3IsIGFuZCB0aGUgdmVydGljYWxcbiAqIGN5Y2xlIG9mIGxldHRlcnMgbWVhbiBhIDIwMDAwMDAgYWRkaXRpb25hbCBub3J0aGluZyBtZXRlcnMuIFRoaXMgaGFwcGVuc1xuICogYXBwcm94LiBldmVyeSAxOCBkZWdyZWVzIG9mIGxhdGl0dWRlLiBUaGlzIG1ldGhvZCBkb2VzICpOT1QqIGNvdW50IGFueVxuICogYWRkaXRpb25hbCBub3J0aGluZ3MuIFlvdSBoYXZlIHRvIGZpZ3VyZSBvdXQgaG93IG1hbnkgMjAwMDAwMCBtZXRlcnMgbmVlZFxuICogdG8gYmUgYWRkZWQgZm9yIHRoZSB6b25lIGxldHRlciBvZiB0aGUgTUdSUyBjb29yZGluYXRlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge2NoYXJ9IG4gU2Vjb25kIGxldHRlciBvZiB0aGUgTUdSUyAxMDBrIHpvbmVcbiAqIEBwYXJhbSB7bnVtYmVyfSBzZXQgVGhlIE1HUlMgdGFibGUgc2V0IG51bWJlciwgd2hpY2ggaXMgZGVwZW5kZW50IG9uIHRoZVxuICogICAgIFVUTSB6b25lIG51bWJlci5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG5vcnRoaW5nIHZhbHVlIGZvciB0aGUgZ2l2ZW4gbGV0dGVyIGFuZCBzZXQuXG4gKi9cbmZ1bmN0aW9uIGdldE5vcnRoaW5nRnJvbUNoYXIobiwgc2V0KSB7XG5cbiAgaWYgKG4gPiAnVicpIHtcbiAgICB0aHJvdyAoXCJNR1JTUG9pbnQgZ2l2ZW4gaW52YWxpZCBOb3J0aGluZyBcIiArIG4pO1xuICB9XG5cbiAgLy8gcm93T3JpZ2luIGlzIHRoZSBsZXR0ZXIgYXQgdGhlIG9yaWdpbiBvZiB0aGUgc2V0IGZvciB0aGVcbiAgLy8gY29sdW1uXG4gIHZhciBjdXJSb3cgPSBTRVRfT1JJR0lOX1JPV19MRVRURVJTLmNoYXJDb2RlQXQoc2V0IC0gMSk7XG4gIHZhciBub3J0aGluZ1ZhbHVlID0gMC4wO1xuICB2YXIgcmV3aW5kTWFya2VyID0gZmFsc2U7XG5cbiAgd2hpbGUgKGN1clJvdyAhPT0gbi5jaGFyQ29kZUF0KDApKSB7XG4gICAgY3VyUm93Kys7XG4gICAgaWYgKGN1clJvdyA9PT0gSSkge1xuICAgICAgY3VyUm93Kys7XG4gICAgfVxuICAgIGlmIChjdXJSb3cgPT09IE8pIHtcbiAgICAgIGN1clJvdysrO1xuICAgIH1cbiAgICAvLyBmaXhpbmcgYSBidWcgbWFraW5nIHdob2xlIGFwcGxpY2F0aW9uIGhhbmcgaW4gdGhpcyBsb29wXG4gICAgLy8gd2hlbiAnbicgaXMgYSB3cm9uZyBjaGFyYWN0ZXJcbiAgICBpZiAoY3VyUm93ID4gVikge1xuICAgICAgaWYgKHJld2luZE1hcmtlcikgeyAvLyBtYWtpbmcgc3VyZSB0aGF0IHRoaXMgbG9vcCBlbmRzXG4gICAgICAgIHRocm93IChcIkJhZCBjaGFyYWN0ZXI6IFwiICsgbik7XG4gICAgICB9XG4gICAgICBjdXJSb3cgPSBBO1xuICAgICAgcmV3aW5kTWFya2VyID0gdHJ1ZTtcbiAgICB9XG4gICAgbm9ydGhpbmdWYWx1ZSArPSAxMDAwMDAuMDtcbiAgfVxuXG4gIHJldHVybiBub3J0aGluZ1ZhbHVlO1xufVxuXG4vKipcbiAqIFRoZSBmdW5jdGlvbiBnZXRNaW5Ob3J0aGluZyByZXR1cm5zIHRoZSBtaW5pbXVtIG5vcnRoaW5nIHZhbHVlIG9mIGEgTUdSU1xuICogem9uZS5cbiAqXG4gKiBQb3J0ZWQgZnJvbSBHZW90cmFucycgYyBMYXR0aXR1ZGVfQmFuZF9WYWx1ZSBzdHJ1Y3R1cmUgdGFibGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Y2hhcn0gem9uZUxldHRlciBUaGUgTUdSUyB6b25lIHRvIGdldCB0aGUgbWluIG5vcnRoaW5nIGZvci5cbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZnVuY3Rpb24gZ2V0TWluTm9ydGhpbmcoem9uZUxldHRlcikge1xuICB2YXIgbm9ydGhpbmc7XG4gIHN3aXRjaCAoem9uZUxldHRlcikge1xuICBjYXNlICdDJzpcbiAgICBub3J0aGluZyA9IDExMDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnRCc6XG4gICAgbm9ydGhpbmcgPSAyMDAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ0UnOlxuICAgIG5vcnRoaW5nID0gMjgwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdGJzpcbiAgICBub3J0aGluZyA9IDM3MDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnRyc6XG4gICAgbm9ydGhpbmcgPSA0NjAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ0gnOlxuICAgIG5vcnRoaW5nID0gNTUwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdKJzpcbiAgICBub3J0aGluZyA9IDY0MDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnSyc6XG4gICAgbm9ydGhpbmcgPSA3MzAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ0wnOlxuICAgIG5vcnRoaW5nID0gODIwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdNJzpcbiAgICBub3J0aGluZyA9IDkxMDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnTic6XG4gICAgbm9ydGhpbmcgPSAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ1AnOlxuICAgIG5vcnRoaW5nID0gODAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ1EnOlxuICAgIG5vcnRoaW5nID0gMTcwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdSJzpcbiAgICBub3J0aGluZyA9IDI2MDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnUyc6XG4gICAgbm9ydGhpbmcgPSAzNTAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ1QnOlxuICAgIG5vcnRoaW5nID0gNDQwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdVJzpcbiAgICBub3J0aGluZyA9IDUzMDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnVic6XG4gICAgbm9ydGhpbmcgPSA2MjAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ1cnOlxuICAgIG5vcnRoaW5nID0gNzAwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdYJzpcbiAgICBub3J0aGluZyA9IDc5MDAwMDAuMDtcbiAgICBicmVhaztcbiAgZGVmYXVsdDpcbiAgICBub3J0aGluZyA9IC0xLjA7XG4gIH1cbiAgaWYgKG5vcnRoaW5nID49IDAuMCkge1xuICAgIHJldHVybiBub3J0aGluZztcbiAgfVxuICBlbHNlIHtcbiAgICB0aHJvdyAoXCJJbnZhbGlkIHpvbmUgbGV0dGVyOiBcIiArIHpvbmVMZXR0ZXIpO1xuICB9XG5cbn1cbiIsIm1vZHVsZS5leHBvcnRzPXtcbiAgXCJuYW1lXCI6IFwicHJvajRcIixcbiAgXCJ2ZXJzaW9uXCI6IFwiMi4zLjEwXCIsXG4gIFwiZGVzY3JpcHRpb25cIjogXCJQcm9qNGpzIGlzIGEgSmF2YVNjcmlwdCBsaWJyYXJ5IHRvIHRyYW5zZm9ybSBwb2ludCBjb29yZGluYXRlcyBmcm9tIG9uZSBjb29yZGluYXRlIHN5c3RlbSB0byBhbm90aGVyLCBpbmNsdWRpbmcgZGF0dW0gdHJhbnNmb3JtYXRpb25zLlwiLFxuICBcIm1haW5cIjogXCJsaWIvaW5kZXguanNcIixcbiAgXCJkaXJlY3Rvcmllc1wiOiB7XG4gICAgXCJ0ZXN0XCI6IFwidGVzdFwiLFxuICAgIFwiZG9jXCI6IFwiZG9jc1wiXG4gIH0sXG4gIFwic2NyaXB0c1wiOiB7XG4gICAgXCJ0ZXN0XCI6IFwiLi9ub2RlX21vZHVsZXMvaXN0YW5idWwvbGliL2NsaS5qcyB0ZXN0IC4vbm9kZV9tb2R1bGVzL21vY2hhL2Jpbi9fbW9jaGEgdGVzdC90ZXN0LmpzXCJcbiAgfSxcbiAgXCJyZXBvc2l0b3J5XCI6IHtcbiAgICBcInR5cGVcIjogXCJnaXRcIixcbiAgICBcInVybFwiOiBcImdpdDovL2dpdGh1Yi5jb20vcHJvajRqcy9wcm9qNGpzLmdpdFwiXG4gIH0sXG4gIFwiYXV0aG9yXCI6IFwiXCIsXG4gIFwibGljZW5zZVwiOiBcIk1JVFwiLFxuICBcImphbVwiOiB7XG4gICAgXCJtYWluXCI6IFwiZGlzdC9wcm9qNC5qc1wiLFxuICAgIFwiaW5jbHVkZVwiOiBbXG4gICAgICBcImRpc3QvcHJvajQuanNcIixcbiAgICAgIFwiUkVBRE1FLm1kXCIsXG4gICAgICBcIkFVVEhPUlNcIixcbiAgICAgIFwiTElDRU5TRS5tZFwiXG4gICAgXVxuICB9LFxuICBcImRldkRlcGVuZGVuY2llc1wiOiB7XG4gICAgXCJncnVudC1jbGlcIjogXCJ+MC4xLjEzXCIsXG4gICAgXCJncnVudFwiOiBcIn4wLjQuMlwiLFxuICAgIFwiZ3J1bnQtY29udHJpYi1jb25uZWN0XCI6IFwifjAuNi4wXCIsXG4gICAgXCJncnVudC1jb250cmliLWpzaGludFwiOiBcIn4wLjguMFwiLFxuICAgIFwiY2hhaVwiOiBcIn4xLjguMVwiLFxuICAgIFwibW9jaGFcIjogXCJ+MS4xNy4xXCIsXG4gICAgXCJncnVudC1tb2NoYS1waGFudG9tanNcIjogXCJ+MC40LjBcIixcbiAgICBcImJyb3dzZXJpZnlcIjogXCJ+My4yNC41XCIsXG4gICAgXCJncnVudC1icm93c2VyaWZ5XCI6IFwifjEuMy4wXCIsXG4gICAgXCJncnVudC1jb250cmliLXVnbGlmeVwiOiBcIn4wLjMuMlwiLFxuICAgIFwiY3VybFwiOiBcImdpdDovL2dpdGh1Yi5jb20vY3Vqb2pzL2N1cmwuZ2l0XCIsXG4gICAgXCJpc3RhbmJ1bFwiOiBcIn4wLjIuNFwiLFxuICAgIFwidGluXCI6IFwifjAuNC4wXCJcbiAgfSxcbiAgXCJkZXBlbmRlbmNpZXNcIjoge1xuICAgIFwibWdyc1wiOiBcIn4wLjAuMlwiXG4gIH0sXG4gIFwiY29udHJpYnV0b3JzXCI6IFtcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJNaWtlIEFkYWlyXCIsXG4gICAgICBcImVtYWlsXCI6IFwibWFkYWlyQGRtc29sdXRpb25zLmNhXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIlJpY2hhcmQgR3JlZW53b29kXCIsXG4gICAgICBcImVtYWlsXCI6IFwicmljaEBncmVlbndvb2RtYXAuY29tXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIkNhbHZpbiBNZXRjYWxmXCIsXG4gICAgICBcImVtYWlsXCI6IFwiY2FsdmluLm1ldGNhbGZAZ21haWwuY29tXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIlJpY2hhcmQgTWFyc2RlblwiLFxuICAgICAgXCJ1cmxcIjogXCJodHRwOi8vd3d3LndpbndhZWQuY29tXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIlQuIE1pdHRhblwiXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJELiBTdGVpbndhbmRcIlxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiUy4gTmVsc29uXCJcbiAgICB9XG4gIF0sXG4gIFwiZ2l0SGVhZFwiOiBcImFjMDNkMTQzOTQ5MWRjMzEzZGE4MDk4NTE5M2Y3MDJjYTQ3MWIzZDBcIixcbiAgXCJidWdzXCI6IHtcbiAgICBcInVybFwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9wcm9qNGpzL3Byb2o0anMvaXNzdWVzXCJcbiAgfSxcbiAgXCJob21lcGFnZVwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9wcm9qNGpzL3Byb2o0anMjcmVhZG1lXCIsXG4gIFwiX2lkXCI6IFwicHJvajRAMi4zLjEwXCIsXG4gIFwiX3NoYXN1bVwiOiBcImY2ZTY2YmRjY2EzMzJjMjVhNWUzZDhlZjI2NWNmYzlkN2I2MGZkMGNcIixcbiAgXCJfZnJvbVwiOiBcInByb2o0QDIuMy4xMFwiLFxuICBcIl9ucG1WZXJzaW9uXCI6IFwiMi4xMS4yXCIsXG4gIFwiX25vZGVWZXJzaW9uXCI6IFwiMC4xMi41XCIsXG4gIFwiX25wbVVzZXJcIjoge1xuICAgIFwibmFtZVwiOiBcImFob2NldmFyXCIsXG4gICAgXCJlbWFpbFwiOiBcImFuZHJlYXMuaG9jZXZhckBnbWFpbC5jb21cIlxuICB9LFxuICBcIm1haW50YWluZXJzXCI6IFtcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJjd21tYVwiLFxuICAgICAgXCJlbWFpbFwiOiBcImNhbHZpbi5tZXRjYWxmQGdtYWlsLmNvbVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhaG9jZXZhclwiLFxuICAgICAgXCJlbWFpbFwiOiBcImFuZHJlYXMuaG9jZXZhckBnbWFpbC5jb21cIlxuICAgIH1cbiAgXSxcbiAgXCJkaXN0XCI6IHtcbiAgICBcInNoYXN1bVwiOiBcImY2ZTY2YmRjY2EzMzJjMjVhNWUzZDhlZjI2NWNmYzlkN2I2MGZkMGNcIixcbiAgICBcInRhcmJhbGxcIjogXCJodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9wcm9qNC8tL3Byb2o0LTIuMy4xMC50Z3pcIlxuICB9LFxuICBcIl9yZXNvbHZlZFwiOiBcImh0dHBzOi8vcmVnaXN0cnkubnBtanMub3JnL3Byb2o0Ly0vcHJvajQtMi4zLjEwLnRnelwiXG59XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBcIkJsb29kaG91bmRcIjogcmVxdWlyZShcInR5cGVhaGVhZC5qcy9kaXN0L2Jsb29kaG91bmQuanNcIiksXG4gICAgXCJsb2FkalF1ZXJ5UGx1Z2luXCI6IGZ1bmN0aW9uKCkge3JlcXVpcmUoXCJ0eXBlYWhlYWQuanNcIik7fVxufTtcbiIsIi8qIVxuICogdHlwZWFoZWFkLmpzIDAuMTEuMVxuICogaHR0cHM6Ly9naXRodWIuY29tL3R3aXR0ZXIvdHlwZWFoZWFkLmpzXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1IFR3aXR0ZXIsIEluYy4gYW5kIG90aGVyIGNvbnRyaWJ1dG9yczsgTGljZW5zZWQgTUlUXG4gKi9cblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFwiYmxvb2Rob3VuZFwiLCBbIFwianF1ZXJ5XCIgXSwgZnVuY3Rpb24oYTApIHtcbiAgICAgICAgICAgIHJldHVybiByb290W1wiQmxvb2Rob3VuZFwiXSA9IGZhY3RvcnkoYTApO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByb290W1wiQmxvb2Rob3VuZFwiXSA9IGZhY3RvcnkoalF1ZXJ5KTtcbiAgICB9XG59KSh0aGlzLCBmdW5jdGlvbigkKSB7XG4gICAgdmFyIF8gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpc01zaWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAvKG1zaWV8dHJpZGVudCkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpID8gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvKG1zaWUgfHJ2OikoXFxkKyguXFxkKyk/KS9pKVsyXSA6IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzQmxhbmtTdHJpbmc6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiAhc3RyIHx8IC9eXFxzKiQvLnRlc3Qoc3RyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlc2NhcGVSZWdFeENoYXJzOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1tcXC1cXFtcXF1cXC9cXHtcXH1cXChcXClcXCpcXCtcXD9cXC5cXFxcXFxeXFwkXFx8XS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc1N0cmluZzogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwic3RyaW5nXCI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNOdW1iZXI6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm51bWJlclwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzQXJyYXk6ICQuaXNBcnJheSxcbiAgICAgICAgICAgIGlzRnVuY3Rpb246ICQuaXNGdW5jdGlvbixcbiAgICAgICAgICAgIGlzT2JqZWN0OiAkLmlzUGxhaW5PYmplY3QsXG4gICAgICAgICAgICBpc1VuZGVmaW5lZDogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwidW5kZWZpbmVkXCI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNFbGVtZW50OiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISEob2JqICYmIG9iai5ub2RlVHlwZSA9PT0gMSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNKUXVlcnk6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmogaW5zdGFuY2VvZiAkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRvU3RyOiBmdW5jdGlvbiB0b1N0cihzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uaXNVbmRlZmluZWQocykgfHwgcyA9PT0gbnVsbCA/IFwiXCIgOiBzICsgXCJcIjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBiaW5kOiAkLnByb3h5LFxuICAgICAgICAgICAgZWFjaDogZnVuY3Rpb24oY29sbGVjdGlvbiwgY2IpIHtcbiAgICAgICAgICAgICAgICAkLmVhY2goY29sbGVjdGlvbiwgcmV2ZXJzZUFyZ3MpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJldmVyc2VBcmdzKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2IodmFsdWUsIGluZGV4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWFwOiAkLm1hcCxcbiAgICAgICAgICAgIGZpbHRlcjogJC5ncmVwLFxuICAgICAgICAgICAgZXZlcnk6IGZ1bmN0aW9uKG9iaiwgdGVzdCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQuZWFjaChvYmosIGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHJlc3VsdCA9IHRlc3QuY2FsbChudWxsLCB2YWwsIGtleSwgb2JqKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzb21lOiBmdW5jdGlvbihvYmosIHRlc3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJC5lYWNoKG9iaiwgZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCA9IHRlc3QuY2FsbChudWxsLCB2YWwsIGtleSwgb2JqKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1peGluOiAkLmV4dGVuZCxcbiAgICAgICAgICAgIGlkZW50aXR5OiBmdW5jdGlvbih4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xvbmU6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiAkLmV4dGVuZCh0cnVlLCB7fSwgb2JqKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRJZEdlbmVyYXRvcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ZXIgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvdW50ZXIrKztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRlbXBsYXRpZnk6IGZ1bmN0aW9uIHRlbXBsYXRpZnkob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQuaXNGdW5jdGlvbihvYmopID8gb2JqIDogdGVtcGxhdGU7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdGVtcGxhdGUoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcob2JqKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVmZXI6IGZ1bmN0aW9uKGZuKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmbiwgMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVib3VuY2U6IGZ1bmN0aW9uKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSkge1xuICAgICAgICAgICAgICAgIHZhciB0aW1lb3V0LCByZXN1bHQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMsIGFyZ3MgPSBhcmd1bWVudHMsIGxhdGVyLCBjYWxsTm93O1xuICAgICAgICAgICAgICAgICAgICBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbE5vdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGhyb3R0bGU6IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29udGV4dCwgYXJncywgdGltZW91dCwgcmVzdWx0LCBwcmV2aW91cywgbGF0ZXI7XG4gICAgICAgICAgICAgICAgcHJldmlvdXMgPSAwO1xuICAgICAgICAgICAgICAgIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzID0gbmV3IERhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLCByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91cyA9IG5vdztcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHJpbmdpZnk6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLmlzU3RyaW5nKHZhbCkgPyB2YWwgOiBKU09OLnN0cmluZ2lmeSh2YWwpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5vb3A6IGZ1bmN0aW9uKCkge31cbiAgICAgICAgfTtcbiAgICB9KCk7XG4gICAgdmFyIFZFUlNJT04gPSBcIjAuMTEuMVwiO1xuICAgIHZhciB0b2tlbml6ZXJzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbm9ud29yZDogbm9ud29yZCxcbiAgICAgICAgICAgIHdoaXRlc3BhY2U6IHdoaXRlc3BhY2UsXG4gICAgICAgICAgICBvYmo6IHtcbiAgICAgICAgICAgICAgICBub253b3JkOiBnZXRPYmpUb2tlbml6ZXIobm9ud29yZCksXG4gICAgICAgICAgICAgICAgd2hpdGVzcGFjZTogZ2V0T2JqVG9rZW5pemVyKHdoaXRlc3BhY2UpXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIHdoaXRlc3BhY2Uoc3RyKSB7XG4gICAgICAgICAgICBzdHIgPSBfLnRvU3RyKHN0cik7XG4gICAgICAgICAgICByZXR1cm4gc3RyID8gc3RyLnNwbGl0KC9cXHMrLykgOiBbXTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBub253b3JkKHN0cikge1xuICAgICAgICAgICAgc3RyID0gXy50b1N0cihzdHIpO1xuICAgICAgICAgICAgcmV0dXJuIHN0ciA/IHN0ci5zcGxpdCgvXFxXKy8pIDogW107XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2V0T2JqVG9rZW5pemVyKHRva2VuaXplcikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHNldEtleShrZXlzKSB7XG4gICAgICAgICAgICAgICAga2V5cyA9IF8uaXNBcnJheShrZXlzKSA/IGtleXMgOiBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRva2VuaXplKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBfLmVhY2goa2V5cywgZnVuY3Rpb24oaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zID0gdG9rZW5zLmNvbmNhdCh0b2tlbml6ZXIoXy50b1N0cihvW2tdKSkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRva2VucztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgTHJ1Q2FjaGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIGZ1bmN0aW9uIExydUNhY2hlKG1heFNpemUpIHtcbiAgICAgICAgICAgIHRoaXMubWF4U2l6ZSA9IF8uaXNOdW1iZXIobWF4U2l6ZSkgPyBtYXhTaXplIDogMTAwO1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMubWF4U2l6ZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQgPSB0aGlzLmdldCA9ICQubm9vcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKExydUNhY2hlLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoa2V5LCB2YWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFpbEl0ZW0gPSB0aGlzLmxpc3QudGFpbCwgbm9kZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaXplID49IHRoaXMubWF4U2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3QucmVtb3ZlKHRhaWxJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGFzaFt0YWlsSXRlbS5rZXldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemUtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUgPSB0aGlzLmhhc2hba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLnZhbCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Lm1vdmVUb0Zyb250KG5vZGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgTm9kZShrZXksIHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdC5hZGQobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzaFtrZXldID0gbm9kZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaXplKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5oYXNoW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Lm1vdmVUb0Zyb250KG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS52YWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzaCA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMubGlzdCA9IG5ldyBMaXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBMaXN0KCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKExpc3QucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIGFkZChub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVhZCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLm5leHQgPSB0aGlzLmhlYWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZC5wcmV2ID0gbm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkID0gbm9kZTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhaWwgPSB0aGlzLnRhaWwgfHwgbm9kZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5wcmV2ID8gbm9kZS5wcmV2Lm5leHQgPSBub2RlLm5leHQgOiB0aGlzLmhlYWQgPSBub2RlLm5leHQ7XG4gICAgICAgICAgICAgICAgbm9kZS5uZXh0ID8gbm9kZS5uZXh0LnByZXYgPSBub2RlLnByZXYgOiB0aGlzLnRhaWwgPSBub2RlLnByZXY7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbW92ZVRvRnJvbnQ6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShub2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIE5vZGUoa2V5LCB2YWwpIHtcbiAgICAgICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICAgICAgdGhpcy52YWwgPSB2YWw7XG4gICAgICAgICAgICB0aGlzLnByZXYgPSB0aGlzLm5leHQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBMcnVDYWNoZTtcbiAgICB9KCk7XG4gICAgdmFyIFBlcnNpc3RlbnRTdG9yYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgTE9DQUxfU1RPUkFHRTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIExPQ0FMX1NUT1JBR0UgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgICAgICAgICAgTE9DQUxfU1RPUkFHRS5zZXRJdGVtKFwifn5+XCIsIFwiIVwiKTtcbiAgICAgICAgICAgIExPQ0FMX1NUT1JBR0UucmVtb3ZlSXRlbShcIn5+flwiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBMT0NBTF9TVE9SQUdFID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBQZXJzaXN0ZW50U3RvcmFnZShuYW1lc3BhY2UsIG92ZXJyaWRlKSB7XG4gICAgICAgICAgICB0aGlzLnByZWZpeCA9IFsgXCJfX1wiLCBuYW1lc3BhY2UsIFwiX19cIiBdLmpvaW4oXCJcIik7XG4gICAgICAgICAgICB0aGlzLnR0bEtleSA9IFwiX190dGxfX1wiO1xuICAgICAgICAgICAgdGhpcy5rZXlNYXRjaGVyID0gbmV3IFJlZ0V4cChcIl5cIiArIF8uZXNjYXBlUmVnRXhDaGFycyh0aGlzLnByZWZpeCkpO1xuICAgICAgICAgICAgdGhpcy5scyA9IG92ZXJyaWRlIHx8IExPQ0FMX1NUT1JBR0U7XG4gICAgICAgICAgICAhdGhpcy5scyAmJiB0aGlzLl9ub29wKCk7XG4gICAgICAgIH1cbiAgICAgICAgXy5taXhpbihQZXJzaXN0ZW50U3RvcmFnZS5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIF9wcmVmaXg6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByZWZpeCArIGtleTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfdHRsS2V5OiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJlZml4KGtleSkgKyB0aGlzLnR0bEtleTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfbm9vcDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXQgPSB0aGlzLnNldCA9IHRoaXMucmVtb3ZlID0gdGhpcy5jbGVhciA9IHRoaXMuaXNFeHBpcmVkID0gXy5ub29wO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zYWZlU2V0OiBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubHMuc2V0SXRlbShrZXksIHZhbCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIubmFtZSA9PT0gXCJRdW90YUV4Y2VlZGVkRXJyb3JcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbm9vcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNFeHBpcmVkKGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlY29kZSh0aGlzLmxzLmdldEl0ZW0odGhpcy5fcHJlZml4KGtleSkpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsLCB0dGwpIHtcbiAgICAgICAgICAgICAgICBpZiAoXy5pc051bWJlcih0dGwpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NhZmVTZXQodGhpcy5fdHRsS2V5KGtleSksIGVuY29kZShub3coKSArIHR0bCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubHMucmVtb3ZlSXRlbSh0aGlzLl90dGxLZXkoa2V5KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zYWZlU2V0KHRoaXMuX3ByZWZpeChrZXkpLCBlbmNvZGUodmFsKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxzLnJlbW92ZUl0ZW0odGhpcy5fdHRsS2V5KGtleSkpO1xuICAgICAgICAgICAgICAgIHRoaXMubHMucmVtb3ZlSXRlbSh0aGlzLl9wcmVmaXgoa2V5KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBpLCBrZXlzID0gZ2F0aGVyTWF0Y2hpbmdLZXlzKHRoaXMua2V5TWF0Y2hlcik7XG4gICAgICAgICAgICAgICAgZm9yIChpID0ga2V5cy5sZW5ndGg7IGktLTsgKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKGtleXNbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0V4cGlyZWQ6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIHZhciB0dGwgPSBkZWNvZGUodGhpcy5scy5nZXRJdGVtKHRoaXMuX3R0bEtleShrZXkpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uaXNOdW1iZXIodHRsKSAmJiBub3coKSA+IHR0bCA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBQZXJzaXN0ZW50U3RvcmFnZTtcbiAgICAgICAgZnVuY3Rpb24gbm93KCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGVuY29kZSh2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShfLmlzVW5kZWZpbmVkKHZhbCkgPyBudWxsIDogdmFsKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBkZWNvZGUodmFsKSB7XG4gICAgICAgICAgICByZXR1cm4gJC5wYXJzZUpTT04odmFsKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnYXRoZXJNYXRjaGluZ0tleXMoa2V5TWF0Y2hlcikge1xuICAgICAgICAgICAgdmFyIGksIGtleSwga2V5cyA9IFtdLCBsZW4gPSBMT0NBTF9TVE9SQUdFLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICgoa2V5ID0gTE9DQUxfU1RPUkFHRS5rZXkoaSkpLm1hdGNoKGtleU1hdGNoZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkucmVwbGFjZShrZXlNYXRjaGVyLCBcIlwiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGtleXM7XG4gICAgICAgIH1cbiAgICB9KCk7XG4gICAgdmFyIFRyYW5zcG9ydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHBlbmRpbmdSZXF1ZXN0c0NvdW50ID0gMCwgcGVuZGluZ1JlcXVlc3RzID0ge30sIG1heFBlbmRpbmdSZXF1ZXN0cyA9IDYsIHNoYXJlZENhY2hlID0gbmV3IExydUNhY2hlKDEwKTtcbiAgICAgICAgZnVuY3Rpb24gVHJhbnNwb3J0KG8pIHtcbiAgICAgICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMubGFzdFJlcSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLl9zZW5kID0gby50cmFuc3BvcnQ7XG4gICAgICAgICAgICB0aGlzLl9nZXQgPSBvLmxpbWl0ZXIgPyBvLmxpbWl0ZXIodGhpcy5fZ2V0KSA6IHRoaXMuX2dldDtcbiAgICAgICAgICAgIHRoaXMuX2NhY2hlID0gby5jYWNoZSA9PT0gZmFsc2UgPyBuZXcgTHJ1Q2FjaGUoMCkgOiBzaGFyZWRDYWNoZTtcbiAgICAgICAgfVxuICAgICAgICBUcmFuc3BvcnQuc2V0TWF4UGVuZGluZ1JlcXVlc3RzID0gZnVuY3Rpb24gc2V0TWF4UGVuZGluZ1JlcXVlc3RzKG51bSkge1xuICAgICAgICAgICAgbWF4UGVuZGluZ1JlcXVlc3RzID0gbnVtO1xuICAgICAgICB9O1xuICAgICAgICBUcmFuc3BvcnQucmVzZXRDYWNoZSA9IGZ1bmN0aW9uIHJlc2V0Q2FjaGUoKSB7XG4gICAgICAgICAgICBzaGFyZWRDYWNoZS5yZXNldCgpO1xuICAgICAgICB9O1xuICAgICAgICBfLm1peGluKFRyYW5zcG9ydC5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIF9maW5nZXJwcmludDogZnVuY3Rpb24gZmluZ2VycHJpbnQobykge1xuICAgICAgICAgICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICAgICAgICAgIHJldHVybiBvLnVybCArIG8udHlwZSArICQucGFyYW0oby5kYXRhIHx8IHt9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0OiBmdW5jdGlvbihvLCBjYikge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgZmluZ2VycHJpbnQsIGpxWGhyO1xuICAgICAgICAgICAgICAgIGZpbmdlcnByaW50ID0gdGhpcy5fZmluZ2VycHJpbnQobyk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuY2VsbGVkIHx8IGZpbmdlcnByaW50ICE9PSB0aGlzLmxhc3RSZXEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoanFYaHIgPSBwZW5kaW5nUmVxdWVzdHNbZmluZ2VycHJpbnRdKSB7XG4gICAgICAgICAgICAgICAgICAgIGpxWGhyLmRvbmUoZG9uZSkuZmFpbChmYWlsKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBlbmRpbmdSZXF1ZXN0c0NvdW50IDwgbWF4UGVuZGluZ1JlcXVlc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0c0NvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0c1tmaW5nZXJwcmludF0gPSB0aGlzLl9zZW5kKG8pLmRvbmUoZG9uZSkuZmFpbChmYWlsKS5hbHdheXMoYWx3YXlzKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uRGVja1JlcXVlc3RBcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkb25lKHJlc3ApIHtcbiAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgcmVzcCk7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuX2NhY2hlLnNldChmaW5nZXJwcmludCwgcmVzcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGZhaWwoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKHRydWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhbHdheXMoKSB7XG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdSZXF1ZXN0c0NvdW50LS07XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwZW5kaW5nUmVxdWVzdHNbZmluZ2VycHJpbnRdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhhdC5vbkRlY2tSZXF1ZXN0QXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5fZ2V0LmFwcGx5KHRoYXQsIHRoYXQub25EZWNrUmVxdWVzdEFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5vbkRlY2tSZXF1ZXN0QXJncyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbihvLCBjYikge1xuICAgICAgICAgICAgICAgIHZhciByZXNwLCBmaW5nZXJwcmludDtcbiAgICAgICAgICAgICAgICBjYiA9IGNiIHx8ICQubm9vcDtcbiAgICAgICAgICAgICAgICBvID0gXy5pc1N0cmluZyhvKSA/IHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBvXG4gICAgICAgICAgICAgICAgfSA6IG8gfHwge307XG4gICAgICAgICAgICAgICAgZmluZ2VycHJpbnQgPSB0aGlzLl9maW5nZXJwcmludChvKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMubGFzdFJlcSA9IGZpbmdlcnByaW50O1xuICAgICAgICAgICAgICAgIGlmIChyZXNwID0gdGhpcy5fY2FjaGUuZ2V0KGZpbmdlcnByaW50KSkge1xuICAgICAgICAgICAgICAgICAgICBjYihudWxsLCByZXNwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9nZXQobywgY2IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYW5jZWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBUcmFuc3BvcnQ7XG4gICAgfSgpO1xuICAgIHZhciBTZWFyY2hJbmRleCA9IHdpbmRvdy5TZWFyY2hJbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIENISUxEUkVOID0gXCJjXCIsIElEUyA9IFwiaVwiO1xuICAgICAgICBmdW5jdGlvbiBTZWFyY2hJbmRleChvKSB7XG4gICAgICAgICAgICBvID0gbyB8fCB7fTtcbiAgICAgICAgICAgIGlmICghby5kYXR1bVRva2VuaXplciB8fCAhby5xdWVyeVRva2VuaXplcikge1xuICAgICAgICAgICAgICAgICQuZXJyb3IoXCJkYXR1bVRva2VuaXplciBhbmQgcXVlcnlUb2tlbml6ZXIgYXJlIGJvdGggcmVxdWlyZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmlkZW50aWZ5ID0gby5pZGVudGlmeSB8fCBfLnN0cmluZ2lmeTtcbiAgICAgICAgICAgIHRoaXMuZGF0dW1Ub2tlbml6ZXIgPSBvLmRhdHVtVG9rZW5pemVyO1xuICAgICAgICAgICAgdGhpcy5xdWVyeVRva2VuaXplciA9IG8ucXVlcnlUb2tlbml6ZXI7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgXy5taXhpbihTZWFyY2hJbmRleC5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIGJvb3RzdHJhcDogZnVuY3Rpb24gYm9vdHN0cmFwKG8pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdHVtcyA9IG8uZGF0dW1zO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZSA9IG8udHJpZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgZGF0YSA9IF8uaXNBcnJheShkYXRhKSA/IGRhdGEgOiBbIGRhdGEgXTtcbiAgICAgICAgICAgICAgICBfLmVhY2goZGF0YSwgZnVuY3Rpb24oZGF0dW0pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkLCB0b2tlbnM7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuZGF0dW1zW2lkID0gdGhhdC5pZGVudGlmeShkYXR1bSldID0gZGF0dW07XG4gICAgICAgICAgICAgICAgICAgIHRva2VucyA9IG5vcm1hbGl6ZVRva2Vucyh0aGF0LmRhdHVtVG9rZW5pemVyKGRhdHVtKSk7XG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaCh0b2tlbnMsIGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSwgY2hhcnMsIGNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHRoYXQudHJpZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJzID0gdG9rZW4uc3BsaXQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY2ggPSBjaGFycy5zaGlmdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGVbQ0hJTERSRU5dW2NoXSB8fCAobm9kZVtDSElMRFJFTl1bY2hdID0gbmV3Tm9kZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlW0lEU10ucHVzaChpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KGlkcykge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5tYXAoaWRzLCBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5kYXR1bXNbaWRdO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKHF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLCB0b2tlbnMsIG1hdGNoZXM7XG4gICAgICAgICAgICAgICAgdG9rZW5zID0gbm9ybWFsaXplVG9rZW5zKHRoaXMucXVlcnlUb2tlbml6ZXIocXVlcnkpKTtcbiAgICAgICAgICAgICAgICBfLmVhY2godG9rZW5zLCBmdW5jdGlvbih0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSwgY2hhcnMsIGNoLCBpZHM7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IHRoYXQudHJpZTtcbiAgICAgICAgICAgICAgICAgICAgY2hhcnMgPSB0b2tlbi5zcGxpdChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgd2hpbGUgKG5vZGUgJiYgKGNoID0gY2hhcnMuc2hpZnQoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlW0NISUxEUkVOXVtjaF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUgJiYgY2hhcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZHMgPSBub2RlW0lEU10uc2xpY2UoMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVzID0gbWF0Y2hlcyA/IGdldEludGVyc2VjdGlvbihtYXRjaGVzLCBpZHMpIDogaWRzO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXMgPyBfLm1hcCh1bmlxdWUobWF0Y2hlcyksIGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LmRhdHVtc1tpZF07XG4gICAgICAgICAgICAgICAgfSkgOiBbXTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGw6IGZ1bmN0aW9uIGFsbCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuZGF0dW1zKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5wdXNoKHRoaXMuZGF0dW1zW2tleV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdHVtcyA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZSA9IG5ld05vZGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXJpYWxpemU6IGZ1bmN0aW9uIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBkYXR1bXM6IHRoaXMuZGF0dW1zLFxuICAgICAgICAgICAgICAgICAgICB0cmllOiB0aGlzLnRyaWVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFNlYXJjaEluZGV4O1xuICAgICAgICBmdW5jdGlvbiBub3JtYWxpemVUb2tlbnModG9rZW5zKSB7XG4gICAgICAgICAgICB0b2tlbnMgPSBfLmZpbHRlcih0b2tlbnMsIGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhdG9rZW47XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRva2VucyA9IF8ubWFwKHRva2VucywgZnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW4udG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHRva2VucztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBuZXdOb2RlKCkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSB7fTtcbiAgICAgICAgICAgIG5vZGVbSURTXSA9IFtdO1xuICAgICAgICAgICAgbm9kZVtDSElMRFJFTl0gPSB7fTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHVuaXF1ZShhcnJheSkge1xuICAgICAgICAgICAgdmFyIHNlZW4gPSB7fSwgdW5pcXVlcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWVuW2FycmF5W2ldXSkge1xuICAgICAgICAgICAgICAgICAgICBzZWVuW2FycmF5W2ldXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZXMucHVzaChhcnJheVtpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHVuaXF1ZXM7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2V0SW50ZXJzZWN0aW9uKGFycmF5QSwgYXJyYXlCKSB7XG4gICAgICAgICAgICB2YXIgYWkgPSAwLCBiaSA9IDAsIGludGVyc2VjdGlvbiA9IFtdO1xuICAgICAgICAgICAgYXJyYXlBID0gYXJyYXlBLnNvcnQoKTtcbiAgICAgICAgICAgIGFycmF5QiA9IGFycmF5Qi5zb3J0KCk7XG4gICAgICAgICAgICB2YXIgbGVuQXJyYXlBID0gYXJyYXlBLmxlbmd0aCwgbGVuQXJyYXlCID0gYXJyYXlCLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChhaSA8IGxlbkFycmF5QSAmJiBiaSA8IGxlbkFycmF5Qikge1xuICAgICAgICAgICAgICAgIGlmIChhcnJheUFbYWldIDwgYXJyYXlCW2JpXSkge1xuICAgICAgICAgICAgICAgICAgICBhaSsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYXJyYXlBW2FpXSA+IGFycmF5QltiaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgYmkrKztcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3Rpb24ucHVzaChhcnJheUFbYWldKTtcbiAgICAgICAgICAgICAgICAgICAgYWkrKztcbiAgICAgICAgICAgICAgICAgICAgYmkrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW50ZXJzZWN0aW9uO1xuICAgICAgICB9XG4gICAgfSgpO1xuICAgIHZhciBQcmVmZXRjaCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIGtleXM7XG4gICAgICAgIGtleXMgPSB7XG4gICAgICAgICAgICBkYXRhOiBcImRhdGFcIixcbiAgICAgICAgICAgIHByb3RvY29sOiBcInByb3RvY29sXCIsXG4gICAgICAgICAgICB0aHVtYnByaW50OiBcInRodW1icHJpbnRcIlxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBQcmVmZXRjaChvKSB7XG4gICAgICAgICAgICB0aGlzLnVybCA9IG8udXJsO1xuICAgICAgICAgICAgdGhpcy50dGwgPSBvLnR0bDtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUgPSBvLmNhY2hlO1xuICAgICAgICAgICAgdGhpcy5wcmVwYXJlID0gby5wcmVwYXJlO1xuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0gPSBvLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0ID0gby50cmFuc3BvcnQ7XG4gICAgICAgICAgICB0aGlzLnRodW1icHJpbnQgPSBvLnRodW1icHJpbnQ7XG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UgPSBuZXcgUGVyc2lzdGVudFN0b3JhZ2Uoby5jYWNoZUtleSk7XG4gICAgICAgIH1cbiAgICAgICAgXy5taXhpbihQcmVmZXRjaC5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIF9zZXR0aW5nczogZnVuY3Rpb24gc2V0dGluZ3MoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLnVybCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdG9yZTogZnVuY3Rpb24gc3RvcmUoZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXQoa2V5cy5kYXRhLCBkYXRhLCB0aGlzLnR0bCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldChrZXlzLnByb3RvY29sLCBsb2NhdGlvbi5wcm90b2NvbCwgdGhpcy50dGwpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXQoa2V5cy50aHVtYnByaW50LCB0aGlzLnRodW1icHJpbnQsIHRoaXMudHRsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmcm9tQ2FjaGU6IGZ1bmN0aW9uIGZyb21DYWNoZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3RvcmVkID0ge30sIGlzRXhwaXJlZDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHN0b3JlZC5kYXRhID0gdGhpcy5zdG9yYWdlLmdldChrZXlzLmRhdGEpO1xuICAgICAgICAgICAgICAgIHN0b3JlZC5wcm90b2NvbCA9IHRoaXMuc3RvcmFnZS5nZXQoa2V5cy5wcm90b2NvbCk7XG4gICAgICAgICAgICAgICAgc3RvcmVkLnRodW1icHJpbnQgPSB0aGlzLnN0b3JhZ2UuZ2V0KGtleXMudGh1bWJwcmludCk7XG4gICAgICAgICAgICAgICAgaXNFeHBpcmVkID0gc3RvcmVkLnRodW1icHJpbnQgIT09IHRoaXMudGh1bWJwcmludCB8fCBzdG9yZWQucHJvdG9jb2wgIT09IGxvY2F0aW9uLnByb3RvY29sO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZWQuZGF0YSAmJiAhaXNFeHBpcmVkID8gc3RvcmVkLmRhdGEgOiBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZyb21OZXR3b3JrOiBmdW5jdGlvbihjYikge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgc2V0dGluZ3M7XG4gICAgICAgICAgICAgICAgaWYgKCFjYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldHRpbmdzID0gdGhpcy5wcmVwYXJlKHRoaXMuX3NldHRpbmdzKCkpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0KHNldHRpbmdzKS5mYWlsKG9uRXJyb3IpLmRvbmUob25SZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25FcnJvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVzcG9uc2UocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICBjYihudWxsLCB0aGF0LnRyYW5zZm9ybShyZXNwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBQcmVmZXRjaDtcbiAgICB9KCk7XG4gICAgdmFyIFJlbW90ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgZnVuY3Rpb24gUmVtb3RlKG8pIHtcbiAgICAgICAgICAgIHRoaXMudXJsID0gby51cmw7XG4gICAgICAgICAgICB0aGlzLnByZXBhcmUgPSBvLnByZXBhcmU7XG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IG8udHJhbnNmb3JtO1xuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQgPSBuZXcgVHJhbnNwb3J0KHtcbiAgICAgICAgICAgICAgICBjYWNoZTogby5jYWNoZSxcbiAgICAgICAgICAgICAgICBsaW1pdGVyOiBvLmxpbWl0ZXIsXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0OiBvLnRyYW5zcG9ydFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgXy5taXhpbihSZW1vdGUucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBfc2V0dGluZ3M6IGZ1bmN0aW9uIHNldHRpbmdzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQocXVlcnksIGNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLCBzZXR0aW5ncztcbiAgICAgICAgICAgICAgICBpZiAoIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcXVlcnkgPSBxdWVyeSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIHNldHRpbmdzID0gdGhpcy5wcmVwYXJlKHF1ZXJ5LCB0aGlzLl9zZXR0aW5ncygpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc3BvcnQuZ2V0KHNldHRpbmdzLCBvblJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvblJlc3BvbnNlKGVyciwgcmVzcCkge1xuICAgICAgICAgICAgICAgICAgICBlcnIgPyBjYihbXSkgOiBjYih0aGF0LnRyYW5zZm9ybShyZXNwKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbExhc3RSZXF1ZXN0OiBmdW5jdGlvbiBjYW5jZWxMYXN0UmVxdWVzdCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zcG9ydC5jYW5jZWwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBSZW1vdGU7XG4gICAgfSgpO1xuICAgIHZhciBvUGFyc2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gcGFyc2Uobykge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRzLCBzb3J0ZXI7XG4gICAgICAgICAgICBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlkZW50aWZ5OiBfLnN0cmluZ2lmeSxcbiAgICAgICAgICAgICAgICBkYXR1bVRva2VuaXplcjogbnVsbCxcbiAgICAgICAgICAgICAgICBxdWVyeVRva2VuaXplcjogbnVsbCxcbiAgICAgICAgICAgICAgICBzdWZmaWNpZW50OiA1LFxuICAgICAgICAgICAgICAgIHNvcnRlcjogbnVsbCxcbiAgICAgICAgICAgICAgICBsb2NhbDogW10sXG4gICAgICAgICAgICAgICAgcHJlZmV0Y2g6IG51bGwsXG4gICAgICAgICAgICAgICAgcmVtb3RlOiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbyA9IF8ubWl4aW4oZGVmYXVsdHMsIG8gfHwge30pO1xuICAgICAgICAgICAgIW8uZGF0dW1Ub2tlbml6ZXIgJiYgJC5lcnJvcihcImRhdHVtVG9rZW5pemVyIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgICAgIW8ucXVlcnlUb2tlbml6ZXIgJiYgJC5lcnJvcihcInF1ZXJ5VG9rZW5pemVyIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgICAgc29ydGVyID0gby5zb3J0ZXI7XG4gICAgICAgICAgICBvLnNvcnRlciA9IHNvcnRlciA/IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geC5zb3J0KHNvcnRlcik7XG4gICAgICAgICAgICB9IDogXy5pZGVudGl0eTtcbiAgICAgICAgICAgIG8ubG9jYWwgPSBfLmlzRnVuY3Rpb24oby5sb2NhbCkgPyBvLmxvY2FsKCkgOiBvLmxvY2FsO1xuICAgICAgICAgICAgby5wcmVmZXRjaCA9IHBhcnNlUHJlZmV0Y2goby5wcmVmZXRjaCk7XG4gICAgICAgICAgICBvLnJlbW90ZSA9IHBhcnNlUmVtb3RlKG8ucmVtb3RlKTtcbiAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBwYXJzZVByZWZldGNoKG8pIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cztcbiAgICAgICAgICAgIGlmICghbykge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICAgICAgICAgIHR0bDogMjQgKiA2MCAqIDYwICogMWUzLFxuICAgICAgICAgICAgICAgIGNhY2hlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5OiBudWxsLFxuICAgICAgICAgICAgICAgIHRodW1icHJpbnQ6IFwiXCIsXG4gICAgICAgICAgICAgICAgcHJlcGFyZTogXy5pZGVudGl0eSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IF8uaWRlbnRpdHksXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0OiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbyA9IF8uaXNTdHJpbmcobykgPyB7XG4gICAgICAgICAgICAgICAgdXJsOiBvXG4gICAgICAgICAgICB9IDogbztcbiAgICAgICAgICAgIG8gPSBfLm1peGluKGRlZmF1bHRzLCBvKTtcbiAgICAgICAgICAgICFvLnVybCAmJiAkLmVycm9yKFwicHJlZmV0Y2ggcmVxdWlyZXMgdXJsIHRvIGJlIHNldFwiKTtcbiAgICAgICAgICAgIG8udHJhbnNmb3JtID0gby5maWx0ZXIgfHwgby50cmFuc2Zvcm07XG4gICAgICAgICAgICBvLmNhY2hlS2V5ID0gby5jYWNoZUtleSB8fCBvLnVybDtcbiAgICAgICAgICAgIG8udGh1bWJwcmludCA9IFZFUlNJT04gKyBvLnRodW1icHJpbnQ7XG4gICAgICAgICAgICBvLnRyYW5zcG9ydCA9IG8udHJhbnNwb3J0ID8gY2FsbGJhY2tUb0RlZmVycmVkKG8udHJhbnNwb3J0KSA6ICQuYWpheDtcbiAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlUmVtb3RlKG8pIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cztcbiAgICAgICAgICAgIGlmICghbykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgIHVybDogbnVsbCxcbiAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcmVwYXJlOiBudWxsLFxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IG51bGwsXG4gICAgICAgICAgICAgICAgd2lsZGNhcmQ6IG51bGwsXG4gICAgICAgICAgICAgICAgbGltaXRlcjogbnVsbCxcbiAgICAgICAgICAgICAgICByYXRlTGltaXRCeTogXCJkZWJvdW5jZVwiLFxuICAgICAgICAgICAgICAgIHJhdGVMaW1pdFdhaXQ6IDMwMCxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IF8uaWRlbnRpdHksXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0OiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbyA9IF8uaXNTdHJpbmcobykgPyB7XG4gICAgICAgICAgICAgICAgdXJsOiBvXG4gICAgICAgICAgICB9IDogbztcbiAgICAgICAgICAgIG8gPSBfLm1peGluKGRlZmF1bHRzLCBvKTtcbiAgICAgICAgICAgICFvLnVybCAmJiAkLmVycm9yKFwicmVtb3RlIHJlcXVpcmVzIHVybCB0byBiZSBzZXRcIik7XG4gICAgICAgICAgICBvLnRyYW5zZm9ybSA9IG8uZmlsdGVyIHx8IG8udHJhbnNmb3JtO1xuICAgICAgICAgICAgby5wcmVwYXJlID0gdG9SZW1vdGVQcmVwYXJlKG8pO1xuICAgICAgICAgICAgby5saW1pdGVyID0gdG9MaW1pdGVyKG8pO1xuICAgICAgICAgICAgby50cmFuc3BvcnQgPSBvLnRyYW5zcG9ydCA/IGNhbGxiYWNrVG9EZWZlcnJlZChvLnRyYW5zcG9ydCkgOiAkLmFqYXg7XG4gICAgICAgICAgICBkZWxldGUgby5yZXBsYWNlO1xuICAgICAgICAgICAgZGVsZXRlIG8ud2lsZGNhcmQ7XG4gICAgICAgICAgICBkZWxldGUgby5yYXRlTGltaXRCeTtcbiAgICAgICAgICAgIGRlbGV0ZSBvLnJhdGVMaW1pdFdhaXQ7XG4gICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB0b1JlbW90ZVByZXBhcmUobykge1xuICAgICAgICAgICAgdmFyIHByZXBhcmUsIHJlcGxhY2UsIHdpbGRjYXJkO1xuICAgICAgICAgICAgcHJlcGFyZSA9IG8ucHJlcGFyZTtcbiAgICAgICAgICAgIHJlcGxhY2UgPSBvLnJlcGxhY2U7XG4gICAgICAgICAgICB3aWxkY2FyZCA9IG8ud2lsZGNhcmQ7XG4gICAgICAgICAgICBpZiAocHJlcGFyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmVwYXJlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgICAgICAgICBwcmVwYXJlID0gcHJlcGFyZUJ5UmVwbGFjZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoby53aWxkY2FyZCkge1xuICAgICAgICAgICAgICAgIHByZXBhcmUgPSBwcmVwYXJlQnlXaWxkY2FyZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJlcGFyZSA9IGlkZW5pdHlQcmVwYXJlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByZXBhcmU7XG4gICAgICAgICAgICBmdW5jdGlvbiBwcmVwYXJlQnlSZXBsYWNlKHF1ZXJ5LCBzZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLnVybCA9IHJlcGxhY2Uoc2V0dGluZ3MudXJsLCBxdWVyeSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gcHJlcGFyZUJ5V2lsZGNhcmQocXVlcnksIHNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MudXJsID0gc2V0dGluZ3MudXJsLnJlcGxhY2Uod2lsZGNhcmQsIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXR0aW5ncztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlkZW5pdHlQcmVwYXJlKHF1ZXJ5LCBzZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXR0aW5ncztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB0b0xpbWl0ZXIobykge1xuICAgICAgICAgICAgdmFyIGxpbWl0ZXIsIG1ldGhvZCwgd2FpdDtcbiAgICAgICAgICAgIGxpbWl0ZXIgPSBvLmxpbWl0ZXI7XG4gICAgICAgICAgICBtZXRob2QgPSBvLnJhdGVMaW1pdEJ5O1xuICAgICAgICAgICAgd2FpdCA9IG8ucmF0ZUxpbWl0V2FpdDtcbiAgICAgICAgICAgIGlmICghbGltaXRlcikge1xuICAgICAgICAgICAgICAgIGxpbWl0ZXIgPSAvXnRocm90dGxlJC9pLnRlc3QobWV0aG9kKSA/IHRocm90dGxlKHdhaXQpIDogZGVib3VuY2Uod2FpdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbGltaXRlcjtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRlYm91bmNlKHdhaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVib3VuY2UoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uZGVib3VuY2UoZm4sIHdhaXQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiB0aHJvdHRsZSh3YWl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRocm90dGxlKGZuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLnRocm90dGxlKGZuLCB3YWl0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNhbGxiYWNrVG9EZWZlcnJlZChmbikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIobykge1xuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICBmbihvLCBvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZDtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICBfLmRlZmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgQmxvb2Rob3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG9sZDtcbiAgICAgICAgb2xkID0gd2luZG93ICYmIHdpbmRvdy5CbG9vZGhvdW5kO1xuICAgICAgICBmdW5jdGlvbiBCbG9vZGhvdW5kKG8pIHtcbiAgICAgICAgICAgIG8gPSBvUGFyc2VyKG8pO1xuICAgICAgICAgICAgdGhpcy5zb3J0ZXIgPSBvLnNvcnRlcjtcbiAgICAgICAgICAgIHRoaXMuaWRlbnRpZnkgPSBvLmlkZW50aWZ5O1xuICAgICAgICAgICAgdGhpcy5zdWZmaWNpZW50ID0gby5zdWZmaWNpZW50O1xuICAgICAgICAgICAgdGhpcy5sb2NhbCA9IG8ubG9jYWw7XG4gICAgICAgICAgICB0aGlzLnJlbW90ZSA9IG8ucmVtb3RlID8gbmV3IFJlbW90ZShvLnJlbW90ZSkgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy5wcmVmZXRjaCA9IG8ucHJlZmV0Y2ggPyBuZXcgUHJlZmV0Y2goby5wcmVmZXRjaCkgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IG5ldyBTZWFyY2hJbmRleCh7XG4gICAgICAgICAgICAgICAgaWRlbnRpZnk6IHRoaXMuaWRlbnRpZnksXG4gICAgICAgICAgICAgICAgZGF0dW1Ub2tlbml6ZXI6IG8uZGF0dW1Ub2tlbml6ZXIsXG4gICAgICAgICAgICAgICAgcXVlcnlUb2tlbml6ZXI6IG8ucXVlcnlUb2tlbml6ZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgby5pbml0aWFsaXplICE9PSBmYWxzZSAmJiB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgfVxuICAgICAgICBCbG9vZGhvdW5kLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgICAgICAgICAgd2luZG93ICYmICh3aW5kb3cuQmxvb2Rob3VuZCA9IG9sZCk7XG4gICAgICAgICAgICByZXR1cm4gQmxvb2Rob3VuZDtcbiAgICAgICAgfTtcbiAgICAgICAgQmxvb2Rob3VuZC50b2tlbml6ZXJzID0gdG9rZW5pemVycztcbiAgICAgICAgXy5taXhpbihCbG9vZGhvdW5kLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgX190dEFkYXB0ZXI6IGZ1bmN0aW9uIHR0QWRhcHRlcigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlID8gd2l0aEFzeW5jIDogd2l0aG91dEFzeW5jO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdpdGhBc3luYyhxdWVyeSwgc3luYywgYXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuc2VhcmNoKHF1ZXJ5LCBzeW5jLCBhc3luYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdpdGhvdXRBc3luYyhxdWVyeSwgc3luYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5zZWFyY2gocXVlcnksIHN5bmMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfbG9hZFByZWZldGNoOiBmdW5jdGlvbiBsb2FkUHJlZmV0Y2goKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLCBkZWZlcnJlZCwgc2VyaWFsaXplZDtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJlZmV0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VyaWFsaXplZCA9IHRoaXMucHJlZmV0Y2guZnJvbUNhY2hlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleC5ib290c3RyYXAoc2VyaWFsaXplZCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWZldGNoLmZyb21OZXR3b3JrKGRvbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRvbmUoZXJyLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5wcmVmZXRjaC5zdG9yZSh0aGF0LmluZGV4LnNlcmlhbGl6ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIGRlZmVycmVkO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAodGhpcy5pbml0UHJvbWlzZSA9IHRoaXMuX2xvYWRQcmVmZXRjaCgpKS5kb25lKGFkZExvY2FsVG9JbmRleCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5pdFByb21pc2U7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYWRkTG9jYWxUb0luZGV4KCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZCh0aGF0LmxvY2FsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShmb3JjZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy5pbml0UHJvbWlzZSB8fCBmb3JjZSA/IHRoaXMuX2luaXRpYWxpemUoKSA6IHRoaXMuaW5pdFByb21pc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiBhZGQoZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXguYWRkKGRhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KGlkcykge1xuICAgICAgICAgICAgICAgIGlkcyA9IF8uaXNBcnJheShpZHMpID8gaWRzIDogW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4LmdldChpZHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKHF1ZXJ5LCBzeW5jLCBhc3luYykge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgbG9jYWw7XG4gICAgICAgICAgICAgICAgbG9jYWwgPSB0aGlzLnNvcnRlcih0aGlzLmluZGV4LnNlYXJjaChxdWVyeSkpO1xuICAgICAgICAgICAgICAgIHN5bmModGhpcy5yZW1vdGUgPyBsb2NhbC5zbGljZSgpIDogbG9jYWwpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbW90ZSAmJiBsb2NhbC5sZW5ndGggPCB0aGlzLnN1ZmZpY2llbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdGUuZ2V0KHF1ZXJ5LCBwcm9jZXNzUmVtb3RlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlLmNhbmNlbExhc3RSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NSZW1vdGUocmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub25EdXBsaWNhdGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChyZW1vdGUsIGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICFfLnNvbWUobG9jYWwsIGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5pZGVudGlmeShyKSA9PT0gdGhhdC5pZGVudGlmeShsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pICYmIG5vbkR1cGxpY2F0ZXMucHVzaChyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jICYmIGFzeW5jKG5vbkR1cGxpY2F0ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGw6IGZ1bmN0aW9uIGFsbCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5hbGwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleC5yZXNldCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFyUHJlZmV0Y2hDYWNoZTogZnVuY3Rpb24gY2xlYXJQcmVmZXRjaENhY2hlKCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJlZmV0Y2ggJiYgdGhpcy5wcmVmZXRjaC5jbGVhcigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFyUmVtb3RlQ2FjaGU6IGZ1bmN0aW9uIGNsZWFyUmVtb3RlQ2FjaGUoKSB7XG4gICAgICAgICAgICAgICAgVHJhbnNwb3J0LnJlc2V0Q2FjaGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0dEFkYXB0ZXI6IGZ1bmN0aW9uIHR0QWRhcHRlcigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fX3R0QWRhcHRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEJsb29kaG91bmQ7XG4gICAgfSgpO1xuICAgIHJldHVybiBCbG9vZGhvdW5kO1xufSk7IiwiLyohXG4gKiB0eXBlYWhlYWQuanMgMC4xMS4xXG4gKiBodHRwczovL2dpdGh1Yi5jb20vdHdpdHRlci90eXBlYWhlYWQuanNcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUgVHdpdHRlciwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzOyBMaWNlbnNlZCBNSVRcbiAqL1xuXG4oZnVuY3Rpb24ocm9vdCwgZmFjdG9yeSkge1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xuICAgICAgICBkZWZpbmUoXCJibG9vZGhvdW5kXCIsIFsgXCJqcXVlcnlcIiBdLCBmdW5jdGlvbihhMCkge1xuICAgICAgICAgICAgcmV0dXJuIHJvb3RbXCJCbG9vZGhvdW5kXCJdID0gZmFjdG9yeShhMCk7XG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJqcXVlcnlcIikpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJvb3RbXCJCbG9vZGhvdW5kXCJdID0gZmFjdG9yeShqUXVlcnkpO1xuICAgIH1cbn0pKHRoaXMsIGZ1bmN0aW9uKCQpIHtcbiAgICB2YXIgXyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzTXNpZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgPyBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC8obXNpZSB8cnY6KShcXGQrKC5cXGQrKT8pL2kpWzJdIDogZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNCbGFua1N0cmluZzogZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFzdHIgfHwgL15cXHMqJC8udGVzdChzdHIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVzY2FwZVJlZ0V4Q2hhcnM6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1xcLVxcW1xcXVxcL1xce1xcfVxcKFxcKVxcKlxcK1xcP1xcLlxcXFxcXF5cXCRcXHxdL2csIFwiXFxcXCQmXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzU3RyaW5nOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc051bWJlcjogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwibnVtYmVyXCI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNBcnJheTogJC5pc0FycmF5LFxuICAgICAgICAgICAgaXNGdW5jdGlvbjogJC5pc0Z1bmN0aW9uLFxuICAgICAgICAgICAgaXNPYmplY3Q6ICQuaXNQbGFpbk9iamVjdCxcbiAgICAgICAgICAgIGlzVW5kZWZpbmVkOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0VsZW1lbnQ6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0pRdWVyeTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mICQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdG9TdHI6IGZ1bmN0aW9uIHRvU3RyKHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5pc1VuZGVmaW5lZChzKSB8fCBzID09PSBudWxsID8gXCJcIiA6IHMgKyBcIlwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJpbmQ6ICQucHJveHksXG4gICAgICAgICAgICBlYWNoOiBmdW5jdGlvbihjb2xsZWN0aW9uLCBjYikge1xuICAgICAgICAgICAgICAgICQuZWFjaChjb2xsZWN0aW9uLCByZXZlcnNlQXJncyk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmV2ZXJzZUFyZ3MoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYih2YWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYXA6ICQubWFwLFxuICAgICAgICAgICAgZmlsdGVyOiAkLmdyZXAsXG4gICAgICAgICAgICBldmVyeTogZnVuY3Rpb24ob2JqLCB0ZXN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJC5lYWNoKG9iaiwgZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzdWx0ID0gdGVzdC5jYWxsKG51bGwsIHZhbCwga2V5LCBvYmopKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNvbWU6IGZ1bmN0aW9uKG9iaiwgdGVzdCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoIW9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkLmVhY2gob2JqLCBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID0gdGVzdC5jYWxsKG51bGwsIHZhbCwga2V5LCBvYmopKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWl4aW46ICQuZXh0ZW5kLFxuICAgICAgICAgICAgaWRlbnRpdHk6IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHRydWUsIHt9LCBvYmopO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldElkR2VuZXJhdG9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgY291bnRlciA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY291bnRlcisrO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGlmeTogZnVuY3Rpb24gdGVtcGxhdGlmeShvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJC5pc0Z1bmN0aW9uKG9iaikgPyBvYmogOiB0ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhvYmopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZlcjogZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWJvdW5jZTogZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbWVvdXQsIHJlc3VsdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cywgbGF0ZXIsIGNhbGxOb3c7XG4gICAgICAgICAgICAgICAgICAgIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aHJvdHRsZTogZnVuY3Rpb24oZnVuYywgd2FpdCkge1xuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0LCBhcmdzLCB0aW1lb3V0LCByZXN1bHQsIHByZXZpb3VzLCBsYXRlcjtcbiAgICAgICAgICAgICAgICBwcmV2aW91cyA9IDA7XG4gICAgICAgICAgICAgICAgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXMgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCksIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0cmluZ2lmeTogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uaXNTdHJpbmcodmFsKSA/IHZhbCA6IEpTT04uc3RyaW5naWZ5KHZhbCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbm9vcDogZnVuY3Rpb24oKSB7fVxuICAgICAgICB9O1xuICAgIH0oKTtcbiAgICB2YXIgVkVSU0lPTiA9IFwiMC4xMS4xXCI7XG4gICAgdmFyIHRva2VuaXplcnMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBub253b3JkOiBub253b3JkLFxuICAgICAgICAgICAgd2hpdGVzcGFjZTogd2hpdGVzcGFjZSxcbiAgICAgICAgICAgIG9iajoge1xuICAgICAgICAgICAgICAgIG5vbndvcmQ6IGdldE9ialRva2VuaXplcihub253b3JkKSxcbiAgICAgICAgICAgICAgICB3aGl0ZXNwYWNlOiBnZXRPYmpUb2tlbml6ZXIod2hpdGVzcGFjZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gd2hpdGVzcGFjZShzdHIpIHtcbiAgICAgICAgICAgIHN0ciA9IF8udG9TdHIoc3RyKTtcbiAgICAgICAgICAgIHJldHVybiBzdHIgPyBzdHIuc3BsaXQoL1xccysvKSA6IFtdO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG5vbndvcmQoc3RyKSB7XG4gICAgICAgICAgICBzdHIgPSBfLnRvU3RyKHN0cik7XG4gICAgICAgICAgICByZXR1cm4gc3RyID8gc3RyLnNwbGl0KC9cXFcrLykgOiBbXTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRPYmpUb2tlbml6ZXIodG9rZW5pemVyKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gc2V0S2V5KGtleXMpIHtcbiAgICAgICAgICAgICAgICBrZXlzID0gXy5pc0FycmF5KGtleXMpID8ga2V5cyA6IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdG9rZW5pemUobykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9rZW5zID0gW107XG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChrZXlzLCBmdW5jdGlvbihrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlbnMgPSB0b2tlbnMuY29uY2F0KHRva2VuaXplcihfLnRvU3RyKG9ba10pKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdG9rZW5zO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSgpO1xuICAgIHZhciBMcnVDYWNoZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgZnVuY3Rpb24gTHJ1Q2FjaGUobWF4U2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5tYXhTaXplID0gXy5pc051bWJlcihtYXhTaXplKSA/IG1heFNpemUgOiAxMDA7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5tYXhTaXplIDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldCA9IHRoaXMuZ2V0ID0gJC5ub29wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF8ubWl4aW4oTHJ1Q2FjaGUucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChrZXksIHZhbCkge1xuICAgICAgICAgICAgICAgIHZhciB0YWlsSXRlbSA9IHRoaXMubGlzdC50YWlsLCBub2RlO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNpemUgPj0gdGhpcy5tYXhTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdC5yZW1vdmUodGFpbEl0ZW0pO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5oYXNoW3RhaWxJdGVtLmtleV07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2l6ZS0tO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9kZSA9IHRoaXMuaGFzaFtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUudmFsID0gdmFsO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3QubW92ZVRvRnJvbnQobm9kZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBOb2RlKGtleSwgdmFsKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0LmFkZChub2RlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYXNoW2tleV0gPSBub2RlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemUrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmhhc2hba2V5XTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3QubW92ZVRvRnJvbnQobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlLnZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5oYXNoID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy5saXN0ID0gbmV3IExpc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIExpc3QoKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIF8ubWl4aW4oTGlzdC5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24gYWRkKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5oZWFkKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUubmV4dCA9IHRoaXMuaGVhZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oZWFkLnByZXYgPSBub2RlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmhlYWQgPSBub2RlO1xuICAgICAgICAgICAgICAgIHRoaXMudGFpbCA9IHRoaXMudGFpbCB8fCBub2RlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLnByZXYgPyBub2RlLnByZXYubmV4dCA9IG5vZGUubmV4dCA6IHRoaXMuaGVhZCA9IG5vZGUubmV4dDtcbiAgICAgICAgICAgICAgICBub2RlLm5leHQgPyBub2RlLm5leHQucHJldiA9IG5vZGUucHJldiA6IHRoaXMudGFpbCA9IG5vZGUucHJldjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb3ZlVG9Gcm9udDogZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlKG5vZGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZnVuY3Rpb24gTm9kZShrZXksIHZhbCkge1xuICAgICAgICAgICAgdGhpcy5rZXkgPSBrZXk7XG4gICAgICAgICAgICB0aGlzLnZhbCA9IHZhbDtcbiAgICAgICAgICAgIHRoaXMucHJldiA9IHRoaXMubmV4dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIExydUNhY2hlO1xuICAgIH0oKTtcbiAgICB2YXIgUGVyc2lzdGVudFN0b3JhZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBMT0NBTF9TVE9SQUdFO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgTE9DQUxfU1RPUkFHRSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gICAgICAgICAgICBMT0NBTF9TVE9SQUdFLnNldEl0ZW0oXCJ+fn5cIiwgXCIhXCIpO1xuICAgICAgICAgICAgTE9DQUxfU1RPUkFHRS5yZW1vdmVJdGVtKFwifn5+XCIpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIExPQ0FMX1NUT1JBR0UgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIFBlcnNpc3RlbnRTdG9yYWdlKG5hbWVzcGFjZSwgb3ZlcnJpZGUpIHtcbiAgICAgICAgICAgIHRoaXMucHJlZml4ID0gWyBcIl9fXCIsIG5hbWVzcGFjZSwgXCJfX1wiIF0uam9pbihcIlwiKTtcbiAgICAgICAgICAgIHRoaXMudHRsS2V5ID0gXCJfX3R0bF9fXCI7XG4gICAgICAgICAgICB0aGlzLmtleU1hdGNoZXIgPSBuZXcgUmVnRXhwKFwiXlwiICsgXy5lc2NhcGVSZWdFeENoYXJzKHRoaXMucHJlZml4KSk7XG4gICAgICAgICAgICB0aGlzLmxzID0gb3ZlcnJpZGUgfHwgTE9DQUxfU1RPUkFHRTtcbiAgICAgICAgICAgICF0aGlzLmxzICYmIHRoaXMuX25vb3AoKTtcbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKFBlcnNpc3RlbnRTdG9yYWdlLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgX3ByZWZpeDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJlZml4ICsga2V5O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF90dGxLZXk6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcmVmaXgoa2V5KSArIHRoaXMudHRsS2V5O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9ub29wOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldCA9IHRoaXMuc2V0ID0gdGhpcy5yZW1vdmUgPSB0aGlzLmNsZWFyID0gdGhpcy5pc0V4cGlyZWQgPSBfLm5vb3A7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3NhZmVTZXQ6IGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5scy5zZXRJdGVtKGtleSwgdmFsKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5uYW1lID09PSBcIlF1b3RhRXhjZWVkZWRFcnJvclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9ub29wKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0V4cGlyZWQoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlKHRoaXMubHMuZ2V0SXRlbSh0aGlzLl9wcmVmaXgoa2V5KSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24oa2V5LCB2YWwsIHR0bCkge1xuICAgICAgICAgICAgICAgIGlmIChfLmlzTnVtYmVyKHR0bCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2FmZVNldCh0aGlzLl90dGxLZXkoa2V5KSwgZW5jb2RlKG5vdygpICsgdHRsKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5scy5yZW1vdmVJdGVtKHRoaXMuX3R0bEtleShrZXkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NhZmVTZXQodGhpcy5fcHJlZml4KGtleSksIGVuY29kZSh2YWwpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgICAgIHRoaXMubHMucmVtb3ZlSXRlbSh0aGlzLl90dGxLZXkoa2V5KSk7XG4gICAgICAgICAgICAgICAgdGhpcy5scy5yZW1vdmVJdGVtKHRoaXMuX3ByZWZpeChrZXkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGksIGtleXMgPSBnYXRoZXJNYXRjaGluZ0tleXModGhpcy5rZXlNYXRjaGVyKTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBrZXlzLmxlbmd0aDsgaS0tOyApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoa2V5c1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzRXhwaXJlZDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHR0bCA9IGRlY29kZSh0aGlzLmxzLmdldEl0ZW0odGhpcy5fdHRsS2V5KGtleSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5pc051bWJlcih0dGwpICYmIG5vdygpID4gdHRsID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbnRTdG9yYWdlO1xuICAgICAgICBmdW5jdGlvbiBub3coKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KF8uaXNVbmRlZmluZWQodmFsKSA/IG51bGwgOiB2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRlY29kZSh2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiAkLnBhcnNlSlNPTih2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdhdGhlck1hdGNoaW5nS2V5cyhrZXlNYXRjaGVyKSB7XG4gICAgICAgICAgICB2YXIgaSwga2V5LCBrZXlzID0gW10sIGxlbiA9IExPQ0FMX1NUT1JBR0UubGVuZ3RoO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKChrZXkgPSBMT0NBTF9TVE9SQUdFLmtleShpKSkubWF0Y2goa2V5TWF0Y2hlcikpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleS5yZXBsYWNlKGtleU1hdGNoZXIsIFwiXCIpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ga2V5cztcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgVHJhbnNwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgcGVuZGluZ1JlcXVlc3RzQ291bnQgPSAwLCBwZW5kaW5nUmVxdWVzdHMgPSB7fSwgbWF4UGVuZGluZ1JlcXVlc3RzID0gNiwgc2hhcmVkQ2FjaGUgPSBuZXcgTHJ1Q2FjaGUoMTApO1xuICAgICAgICBmdW5jdGlvbiBUcmFuc3BvcnQobykge1xuICAgICAgICAgICAgbyA9IG8gfHwge307XG4gICAgICAgICAgICB0aGlzLmNhbmNlbGxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5sYXN0UmVxID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuX3NlbmQgPSBvLnRyYW5zcG9ydDtcbiAgICAgICAgICAgIHRoaXMuX2dldCA9IG8ubGltaXRlciA/IG8ubGltaXRlcih0aGlzLl9nZXQpIDogdGhpcy5fZ2V0O1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUgPSBvLmNhY2hlID09PSBmYWxzZSA/IG5ldyBMcnVDYWNoZSgwKSA6IHNoYXJlZENhY2hlO1xuICAgICAgICB9XG4gICAgICAgIFRyYW5zcG9ydC5zZXRNYXhQZW5kaW5nUmVxdWVzdHMgPSBmdW5jdGlvbiBzZXRNYXhQZW5kaW5nUmVxdWVzdHMobnVtKSB7XG4gICAgICAgICAgICBtYXhQZW5kaW5nUmVxdWVzdHMgPSBudW07XG4gICAgICAgIH07XG4gICAgICAgIFRyYW5zcG9ydC5yZXNldENhY2hlID0gZnVuY3Rpb24gcmVzZXRDYWNoZSgpIHtcbiAgICAgICAgICAgIHNoYXJlZENhY2hlLnJlc2V0KCk7XG4gICAgICAgIH07XG4gICAgICAgIF8ubWl4aW4oVHJhbnNwb3J0LnByb3RvdHlwZSwge1xuICAgICAgICAgICAgX2ZpbmdlcnByaW50OiBmdW5jdGlvbiBmaW5nZXJwcmludChvKSB7XG4gICAgICAgICAgICAgICAgbyA9IG8gfHwge307XG4gICAgICAgICAgICAgICAgcmV0dXJuIG8udXJsICsgby50eXBlICsgJC5wYXJhbShvLmRhdGEgfHwge30pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXQ6IGZ1bmN0aW9uKG8sIGNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLCBmaW5nZXJwcmludCwganFYaHI7XG4gICAgICAgICAgICAgICAgZmluZ2VycHJpbnQgPSB0aGlzLl9maW5nZXJwcmludChvKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5jZWxsZWQgfHwgZmluZ2VycHJpbnQgIT09IHRoaXMubGFzdFJlcSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChqcVhociA9IHBlbmRpbmdSZXF1ZXN0c1tmaW5nZXJwcmludF0pIHtcbiAgICAgICAgICAgICAgICAgICAganFYaHIuZG9uZShkb25lKS5mYWlsKGZhaWwpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocGVuZGluZ1JlcXVlc3RzQ291bnQgPCBtYXhQZW5kaW5nUmVxdWVzdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3RzQ291bnQrKztcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3RzW2ZpbmdlcnByaW50XSA9IHRoaXMuX3NlbmQobykuZG9uZShkb25lKS5mYWlsKGZhaWwpLmFsd2F5cyhhbHdheXMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25EZWNrUmVxdWVzdEFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRvbmUocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICBjYihudWxsLCByZXNwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5fY2FjaGUuc2V0KGZpbmdlcnByaW50LCByZXNwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZmFpbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFsd2F5cygpIHtcbiAgICAgICAgICAgICAgICAgICAgcGVuZGluZ1JlcXVlc3RzQ291bnQtLTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHBlbmRpbmdSZXF1ZXN0c1tmaW5nZXJwcmludF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGF0Lm9uRGVja1JlcXVlc3RBcmdzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Ll9nZXQuYXBwbHkodGhhdCwgdGhhdC5vbkRlY2tSZXF1ZXN0QXJncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0Lm9uRGVja1JlcXVlc3RBcmdzID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKG8sIGNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3AsIGZpbmdlcnByaW50O1xuICAgICAgICAgICAgICAgIGNiID0gY2IgfHwgJC5ub29wO1xuICAgICAgICAgICAgICAgIG8gPSBfLmlzU3RyaW5nKG8pID8ge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IG9cbiAgICAgICAgICAgICAgICB9IDogbyB8fCB7fTtcbiAgICAgICAgICAgICAgICBmaW5nZXJwcmludCA9IHRoaXMuX2ZpbmdlcnByaW50KG8pO1xuICAgICAgICAgICAgICAgIHRoaXMuY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0UmVxID0gZmluZ2VycHJpbnQ7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3AgPSB0aGlzLl9jYWNoZS5nZXQoZmluZ2VycHJpbnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHJlc3ApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldChvLCBjYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbmNlbDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFRyYW5zcG9ydDtcbiAgICB9KCk7XG4gICAgdmFyIFNlYXJjaEluZGV4ID0gd2luZG93LlNlYXJjaEluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgQ0hJTERSRU4gPSBcImNcIiwgSURTID0gXCJpXCI7XG4gICAgICAgIGZ1bmN0aW9uIFNlYXJjaEluZGV4KG8pIHtcbiAgICAgICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICAgICAgaWYgKCFvLmRhdHVtVG9rZW5pemVyIHx8ICFvLnF1ZXJ5VG9rZW5pemVyKSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcihcImRhdHVtVG9rZW5pemVyIGFuZCBxdWVyeVRva2VuaXplciBhcmUgYm90aCByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaWRlbnRpZnkgPSBvLmlkZW50aWZ5IHx8IF8uc3RyaW5naWZ5O1xuICAgICAgICAgICAgdGhpcy5kYXR1bVRva2VuaXplciA9IG8uZGF0dW1Ub2tlbml6ZXI7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5VG9rZW5pemVyID0gby5xdWVyeVRva2VuaXplcjtcbiAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKFNlYXJjaEluZGV4LnByb3RvdHlwZSwge1xuICAgICAgICAgICAgYm9vdHN0cmFwOiBmdW5jdGlvbiBib290c3RyYXAobykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0dW1zID0gby5kYXR1bXM7XG4gICAgICAgICAgICAgICAgdGhpcy50cmllID0gby50cmllO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFkZDogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICBkYXRhID0gXy5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFsgZGF0YSBdO1xuICAgICAgICAgICAgICAgIF8uZWFjaChkYXRhLCBmdW5jdGlvbihkYXR1bSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaWQsIHRva2VucztcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5kYXR1bXNbaWQgPSB0aGF0LmlkZW50aWZ5KGRhdHVtKV0gPSBkYXR1bTtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW5zID0gbm9ybWFsaXplVG9rZW5zKHRoYXQuZGF0dW1Ub2tlbml6ZXIoZGF0dW0pKTtcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHRva2VucywgZnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlLCBjaGFycywgY2g7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlID0gdGhhdC50cmllO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhcnMgPSB0b2tlbi5zcGxpdChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlIChjaCA9IGNoYXJzLnNoaWZ0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZVtDSElMRFJFTl1bY2hdIHx8IChub2RlW0NISUxEUkVOXVtjaF0gPSBuZXdOb2RlKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVbSURTXS5wdXNoKGlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoaWRzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHJldHVybiBfLm1hcChpZHMsIGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LmRhdHVtc1tpZF07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2gocXVlcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIHRva2VucywgbWF0Y2hlcztcbiAgICAgICAgICAgICAgICB0b2tlbnMgPSBub3JtYWxpemVUb2tlbnModGhpcy5xdWVyeVRva2VuaXplcihxdWVyeSkpO1xuICAgICAgICAgICAgICAgIF8uZWFjaCh0b2tlbnMsIGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub2RlLCBjaGFycywgY2gsIGlkcztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGNoZXMgJiYgbWF0Y2hlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBub2RlID0gdGhhdC50cmllO1xuICAgICAgICAgICAgICAgICAgICBjaGFycyA9IHRva2VuLnNwbGl0KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobm9kZSAmJiAoY2ggPSBjaGFycy5zaGlmdCgpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5vZGVbQ0hJTERSRU5dW2NoXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSAmJiBjaGFycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkcyA9IG5vZGVbSURTXS5zbGljZSgwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBtYXRjaGVzID8gZ2V0SW50ZXJzZWN0aW9uKG1hdGNoZXMsIGlkcykgOiBpZHM7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2hlcyA/IF8ubWFwKHVuaXF1ZShtYXRjaGVzKSwgZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuZGF0dW1zW2lkXTtcbiAgICAgICAgICAgICAgICB9KSA6IFtdO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbDogZnVuY3Rpb24gYWxsKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5kYXR1bXMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzLnB1c2godGhpcy5kYXR1bXNba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0dW1zID0ge307XG4gICAgICAgICAgICAgICAgdGhpcy50cmllID0gbmV3Tm9kZSgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24gc2VyaWFsaXplKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGRhdHVtczogdGhpcy5kYXR1bXMsXG4gICAgICAgICAgICAgICAgICAgIHRyaWU6IHRoaXMudHJpZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gU2VhcmNoSW5kZXg7XG4gICAgICAgIGZ1bmN0aW9uIG5vcm1hbGl6ZVRva2Vucyh0b2tlbnMpIHtcbiAgICAgICAgICAgIHRva2VucyA9IF8uZmlsdGVyKHRva2VucywgZnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gISF0b2tlbjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdG9rZW5zID0gXy5tYXAodG9rZW5zLCBmdW5jdGlvbih0b2tlbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0b2tlbi50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdG9rZW5zO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG5ld05vZGUoKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHt9O1xuICAgICAgICAgICAgbm9kZVtJRFNdID0gW107XG4gICAgICAgICAgICBub2RlW0NISUxEUkVOXSA9IHt9O1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gdW5pcXVlKGFycmF5KSB7XG4gICAgICAgICAgICB2YXIgc2VlbiA9IHt9LCB1bmlxdWVzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJyYXkubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoIXNlZW5bYXJyYXlbaV1dKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlZW5bYXJyYXlbaV1dID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlcy5wdXNoKGFycmF5W2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdW5pcXVlcztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRJbnRlcnNlY3Rpb24oYXJyYXlBLCBhcnJheUIpIHtcbiAgICAgICAgICAgIHZhciBhaSA9IDAsIGJpID0gMCwgaW50ZXJzZWN0aW9uID0gW107XG4gICAgICAgICAgICBhcnJheUEgPSBhcnJheUEuc29ydCgpO1xuICAgICAgICAgICAgYXJyYXlCID0gYXJyYXlCLnNvcnQoKTtcbiAgICAgICAgICAgIHZhciBsZW5BcnJheUEgPSBhcnJheUEubGVuZ3RoLCBsZW5BcnJheUIgPSBhcnJheUIubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGFpIDwgbGVuQXJyYXlBICYmIGJpIDwgbGVuQXJyYXlCKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycmF5QVthaV0gPCBhcnJheUJbYmldKSB7XG4gICAgICAgICAgICAgICAgICAgIGFpKys7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcnJheUFbYWldID4gYXJyYXlCW2JpXSkge1xuICAgICAgICAgICAgICAgICAgICBiaSsrO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGludGVyc2VjdGlvbi5wdXNoKGFycmF5QVthaV0pO1xuICAgICAgICAgICAgICAgICAgICBhaSsrO1xuICAgICAgICAgICAgICAgICAgICBiaSsrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBpbnRlcnNlY3Rpb247XG4gICAgICAgIH1cbiAgICB9KCk7XG4gICAgdmFyIFByZWZldGNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIga2V5cztcbiAgICAgICAga2V5cyA9IHtcbiAgICAgICAgICAgIGRhdGE6IFwiZGF0YVwiLFxuICAgICAgICAgICAgcHJvdG9jb2w6IFwicHJvdG9jb2xcIixcbiAgICAgICAgICAgIHRodW1icHJpbnQ6IFwidGh1bWJwcmludFwiXG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIFByZWZldGNoKG8pIHtcbiAgICAgICAgICAgIHRoaXMudXJsID0gby51cmw7XG4gICAgICAgICAgICB0aGlzLnR0bCA9IG8udHRsO1xuICAgICAgICAgICAgdGhpcy5jYWNoZSA9IG8uY2FjaGU7XG4gICAgICAgICAgICB0aGlzLnByZXBhcmUgPSBvLnByZXBhcmU7XG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IG8udHJhbnNmb3JtO1xuICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQgPSBvLnRyYW5zcG9ydDtcbiAgICAgICAgICAgIHRoaXMudGh1bWJwcmludCA9IG8udGh1bWJwcmludDtcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZSA9IG5ldyBQZXJzaXN0ZW50U3RvcmFnZShvLmNhY2hlS2V5KTtcbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKFByZWZldGNoLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgX3NldHRpbmdzOiBmdW5jdGlvbiBzZXR0aW5ncygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1cmw6IHRoaXMudXJsLFxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCJcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0b3JlOiBmdW5jdGlvbiBzdG9yZShkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldChrZXlzLmRhdGEsIGRhdGEsIHRoaXMudHRsKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0KGtleXMucHJvdG9jb2wsIGxvY2F0aW9uLnByb3RvY29sLCB0aGlzLnR0bCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldChrZXlzLnRodW1icHJpbnQsIHRoaXMudGh1bWJwcmludCwgdGhpcy50dGwpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZyb21DYWNoZTogZnVuY3Rpb24gZnJvbUNhY2hlKCkge1xuICAgICAgICAgICAgICAgIHZhciBzdG9yZWQgPSB7fSwgaXNFeHBpcmVkO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5jYWNoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc3RvcmVkLmRhdGEgPSB0aGlzLnN0b3JhZ2UuZ2V0KGtleXMuZGF0YSk7XG4gICAgICAgICAgICAgICAgc3RvcmVkLnByb3RvY29sID0gdGhpcy5zdG9yYWdlLmdldChrZXlzLnByb3RvY29sKTtcbiAgICAgICAgICAgICAgICBzdG9yZWQudGh1bWJwcmludCA9IHRoaXMuc3RvcmFnZS5nZXQoa2V5cy50aHVtYnByaW50KTtcbiAgICAgICAgICAgICAgICBpc0V4cGlyZWQgPSBzdG9yZWQudGh1bWJwcmludCAhPT0gdGhpcy50aHVtYnByaW50IHx8IHN0b3JlZC5wcm90b2NvbCAhPT0gbG9jYXRpb24ucHJvdG9jb2w7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlZC5kYXRhICYmICFpc0V4cGlyZWQgPyBzdG9yZWQuZGF0YSA6IG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnJvbU5ldHdvcms6IGZ1bmN0aW9uKGNiKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLCBzZXR0aW5ncztcbiAgICAgICAgICAgICAgICBpZiAoIWNiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MgPSB0aGlzLnByZXBhcmUodGhpcy5fc2V0dGluZ3MoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc3BvcnQoc2V0dGluZ3MpLmZhaWwob25FcnJvcikuZG9uZShvblJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICBjYih0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25SZXNwb25zZShyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHRoYXQudHJhbnNmb3JtKHJlc3ApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5jbGVhcigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFByZWZldGNoO1xuICAgIH0oKTtcbiAgICB2YXIgUmVtb3RlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICBmdW5jdGlvbiBSZW1vdGUobykge1xuICAgICAgICAgICAgdGhpcy51cmwgPSBvLnVybDtcbiAgICAgICAgICAgIHRoaXMucHJlcGFyZSA9IG8ucHJlcGFyZTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gby50cmFuc2Zvcm07XG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydCA9IG5ldyBUcmFuc3BvcnQoe1xuICAgICAgICAgICAgICAgIGNhY2hlOiBvLmNhY2hlLFxuICAgICAgICAgICAgICAgIGxpbWl0ZXI6IG8ubGltaXRlcixcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnQ6IG8udHJhbnNwb3J0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKFJlbW90ZS5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIF9zZXR0aW5nczogZnVuY3Rpb24gc2V0dGluZ3MoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLnVybCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldChxdWVyeSwgY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIHNldHRpbmdzO1xuICAgICAgICAgICAgICAgIGlmICghY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5IHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MgPSB0aGlzLnByZXBhcmUocXVlcnksIHRoaXMuX3NldHRpbmdzKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydC5nZXQoc2V0dGluZ3MsIG9uUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVzcG9uc2UoZXJyLCByZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVyciA/IGNiKFtdKSA6IGNiKHRoYXQudHJhbnNmb3JtKHJlc3ApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsTGFzdFJlcXVlc3Q6IGZ1bmN0aW9uIGNhbmNlbExhc3RSZXF1ZXN0KCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFJlbW90ZTtcbiAgICB9KCk7XG4gICAgdmFyIG9QYXJzZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBwYXJzZShvKSB7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMsIHNvcnRlcjtcbiAgICAgICAgICAgIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgIGluaXRpYWxpemU6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRlbnRpZnk6IF8uc3RyaW5naWZ5LFxuICAgICAgICAgICAgICAgIGRhdHVtVG9rZW5pemVyOiBudWxsLFxuICAgICAgICAgICAgICAgIHF1ZXJ5VG9rZW5pemVyOiBudWxsLFxuICAgICAgICAgICAgICAgIHN1ZmZpY2llbnQ6IDUsXG4gICAgICAgICAgICAgICAgc29ydGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIGxvY2FsOiBbXSxcbiAgICAgICAgICAgICAgICBwcmVmZXRjaDogbnVsbCxcbiAgICAgICAgICAgICAgICByZW1vdGU6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvID0gXy5taXhpbihkZWZhdWx0cywgbyB8fCB7fSk7XG4gICAgICAgICAgICAhby5kYXR1bVRva2VuaXplciAmJiAkLmVycm9yKFwiZGF0dW1Ub2tlbml6ZXIgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgICAgICAhby5xdWVyeVRva2VuaXplciAmJiAkLmVycm9yKFwicXVlcnlUb2tlbml6ZXIgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgICAgICBzb3J0ZXIgPSBvLnNvcnRlcjtcbiAgICAgICAgICAgIG8uc29ydGVyID0gc29ydGVyID8gZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4LnNvcnQoc29ydGVyKTtcbiAgICAgICAgICAgIH0gOiBfLmlkZW50aXR5O1xuICAgICAgICAgICAgby5sb2NhbCA9IF8uaXNGdW5jdGlvbihvLmxvY2FsKSA/IG8ubG9jYWwoKSA6IG8ubG9jYWw7XG4gICAgICAgICAgICBvLnByZWZldGNoID0gcGFyc2VQcmVmZXRjaChvLnByZWZldGNoKTtcbiAgICAgICAgICAgIG8ucmVtb3RlID0gcGFyc2VSZW1vdGUoby5yZW1vdGUpO1xuICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlUHJlZmV0Y2gobykge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRzO1xuICAgICAgICAgICAgaWYgKCFvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICB1cmw6IG51bGwsXG4gICAgICAgICAgICAgICAgdHRsOiAyNCAqIDYwICogNjAgKiAxZTMsXG4gICAgICAgICAgICAgICAgY2FjaGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXk6IG51bGwsXG4gICAgICAgICAgICAgICAgdGh1bWJwcmludDogXCJcIixcbiAgICAgICAgICAgICAgICBwcmVwYXJlOiBfLmlkZW50aXR5LFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogXy5pZGVudGl0eSxcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnQ6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvID0gXy5pc1N0cmluZyhvKSA/IHtcbiAgICAgICAgICAgICAgICB1cmw6IG9cbiAgICAgICAgICAgIH0gOiBvO1xuICAgICAgICAgICAgbyA9IF8ubWl4aW4oZGVmYXVsdHMsIG8pO1xuICAgICAgICAgICAgIW8udXJsICYmICQuZXJyb3IoXCJwcmVmZXRjaCByZXF1aXJlcyB1cmwgdG8gYmUgc2V0XCIpO1xuICAgICAgICAgICAgby50cmFuc2Zvcm0gPSBvLmZpbHRlciB8fCBvLnRyYW5zZm9ybTtcbiAgICAgICAgICAgIG8uY2FjaGVLZXkgPSBvLmNhY2hlS2V5IHx8IG8udXJsO1xuICAgICAgICAgICAgby50aHVtYnByaW50ID0gVkVSU0lPTiArIG8udGh1bWJwcmludDtcbiAgICAgICAgICAgIG8udHJhbnNwb3J0ID0gby50cmFuc3BvcnQgPyBjYWxsYmFja1RvRGVmZXJyZWQoby50cmFuc3BvcnQpIDogJC5hamF4O1xuICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcGFyc2VSZW1vdGUobykge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRzO1xuICAgICAgICAgICAgaWYgKCFvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICAgICAgdXJsOiBudWxsLFxuICAgICAgICAgICAgICAgIGNhY2hlOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByZXBhcmU6IG51bGwsXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogbnVsbCxcbiAgICAgICAgICAgICAgICB3aWxkY2FyZDogbnVsbCxcbiAgICAgICAgICAgICAgICBsaW1pdGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIHJhdGVMaW1pdEJ5OiBcImRlYm91bmNlXCIsXG4gICAgICAgICAgICAgICAgcmF0ZUxpbWl0V2FpdDogMzAwLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogXy5pZGVudGl0eSxcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnQ6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvID0gXy5pc1N0cmluZyhvKSA/IHtcbiAgICAgICAgICAgICAgICB1cmw6IG9cbiAgICAgICAgICAgIH0gOiBvO1xuICAgICAgICAgICAgbyA9IF8ubWl4aW4oZGVmYXVsdHMsIG8pO1xuICAgICAgICAgICAgIW8udXJsICYmICQuZXJyb3IoXCJyZW1vdGUgcmVxdWlyZXMgdXJsIHRvIGJlIHNldFwiKTtcbiAgICAgICAgICAgIG8udHJhbnNmb3JtID0gby5maWx0ZXIgfHwgby50cmFuc2Zvcm07XG4gICAgICAgICAgICBvLnByZXBhcmUgPSB0b1JlbW90ZVByZXBhcmUobyk7XG4gICAgICAgICAgICBvLmxpbWl0ZXIgPSB0b0xpbWl0ZXIobyk7XG4gICAgICAgICAgICBvLnRyYW5zcG9ydCA9IG8udHJhbnNwb3J0ID8gY2FsbGJhY2tUb0RlZmVycmVkKG8udHJhbnNwb3J0KSA6ICQuYWpheDtcbiAgICAgICAgICAgIGRlbGV0ZSBvLnJlcGxhY2U7XG4gICAgICAgICAgICBkZWxldGUgby53aWxkY2FyZDtcbiAgICAgICAgICAgIGRlbGV0ZSBvLnJhdGVMaW1pdEJ5O1xuICAgICAgICAgICAgZGVsZXRlIG8ucmF0ZUxpbWl0V2FpdDtcbiAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHRvUmVtb3RlUHJlcGFyZShvKSB7XG4gICAgICAgICAgICB2YXIgcHJlcGFyZSwgcmVwbGFjZSwgd2lsZGNhcmQ7XG4gICAgICAgICAgICBwcmVwYXJlID0gby5wcmVwYXJlO1xuICAgICAgICAgICAgcmVwbGFjZSA9IG8ucmVwbGFjZTtcbiAgICAgICAgICAgIHdpbGRjYXJkID0gby53aWxkY2FyZDtcbiAgICAgICAgICAgIGlmIChwcmVwYXJlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByZXBhcmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICAgICAgICAgIHByZXBhcmUgPSBwcmVwYXJlQnlSZXBsYWNlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvLndpbGRjYXJkKSB7XG4gICAgICAgICAgICAgICAgcHJlcGFyZSA9IHByZXBhcmVCeVdpbGRjYXJkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmVwYXJlID0gaWRlbml0eVByZXBhcmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcHJlcGFyZTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHByZXBhcmVCeVJlcGxhY2UocXVlcnksIHNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MudXJsID0gcmVwbGFjZShzZXR0aW5ncy51cmwsIHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0dGluZ3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBwcmVwYXJlQnlXaWxkY2FyZChxdWVyeSwgc2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy51cmwgPSBzZXR0aW5ncy51cmwucmVwbGFjZSh3aWxkY2FyZCwgZW5jb2RlVVJJQ29tcG9uZW50KHF1ZXJ5KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gaWRlbml0eVByZXBhcmUocXVlcnksIHNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHRvTGltaXRlcihvKSB7XG4gICAgICAgICAgICB2YXIgbGltaXRlciwgbWV0aG9kLCB3YWl0O1xuICAgICAgICAgICAgbGltaXRlciA9IG8ubGltaXRlcjtcbiAgICAgICAgICAgIG1ldGhvZCA9IG8ucmF0ZUxpbWl0Qnk7XG4gICAgICAgICAgICB3YWl0ID0gby5yYXRlTGltaXRXYWl0O1xuICAgICAgICAgICAgaWYgKCFsaW1pdGVyKSB7XG4gICAgICAgICAgICAgICAgbGltaXRlciA9IC9edGhyb3R0bGUkL2kudGVzdChtZXRob2QpID8gdGhyb3R0bGUod2FpdCkgOiBkZWJvdW5jZSh3YWl0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBsaW1pdGVyO1xuICAgICAgICAgICAgZnVuY3Rpb24gZGVib3VuY2Uod2FpdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBkZWJvdW5jZShmbikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXy5kZWJvdW5jZShmbiwgd2FpdCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRocm90dGxlKHdhaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gdGhyb3R0bGUoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8udGhyb3R0bGUoZm4sIHdhaXQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gY2FsbGJhY2tUb0RlZmVycmVkKGZuKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gd3JhcHBlcihvKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgIGZuKG8sIG9uU3VjY2Vzcywgb25FcnJvcik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uU3VjY2VzcyhyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3ApO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25FcnJvcihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgXy5kZWZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfSgpO1xuICAgIHZhciBCbG9vZGhvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgb2xkO1xuICAgICAgICBvbGQgPSB3aW5kb3cgJiYgd2luZG93LkJsb29kaG91bmQ7XG4gICAgICAgIGZ1bmN0aW9uIEJsb29kaG91bmQobykge1xuICAgICAgICAgICAgbyA9IG9QYXJzZXIobyk7XG4gICAgICAgICAgICB0aGlzLnNvcnRlciA9IG8uc29ydGVyO1xuICAgICAgICAgICAgdGhpcy5pZGVudGlmeSA9IG8uaWRlbnRpZnk7XG4gICAgICAgICAgICB0aGlzLnN1ZmZpY2llbnQgPSBvLnN1ZmZpY2llbnQ7XG4gICAgICAgICAgICB0aGlzLmxvY2FsID0gby5sb2NhbDtcbiAgICAgICAgICAgIHRoaXMucmVtb3RlID0gby5yZW1vdGUgPyBuZXcgUmVtb3RlKG8ucmVtb3RlKSA6IG51bGw7XG4gICAgICAgICAgICB0aGlzLnByZWZldGNoID0gby5wcmVmZXRjaCA/IG5ldyBQcmVmZXRjaChvLnByZWZldGNoKSA6IG51bGw7XG4gICAgICAgICAgICB0aGlzLmluZGV4ID0gbmV3IFNlYXJjaEluZGV4KHtcbiAgICAgICAgICAgICAgICBpZGVudGlmeTogdGhpcy5pZGVudGlmeSxcbiAgICAgICAgICAgICAgICBkYXR1bVRva2VuaXplcjogby5kYXR1bVRva2VuaXplcixcbiAgICAgICAgICAgICAgICBxdWVyeVRva2VuaXplcjogby5xdWVyeVRva2VuaXplclxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvLmluaXRpYWxpemUgIT09IGZhbHNlICYmIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgICAgICB9XG4gICAgICAgIEJsb29kaG91bmQubm9Db25mbGljdCA9IGZ1bmN0aW9uIG5vQ29uZmxpY3QoKSB7XG4gICAgICAgICAgICB3aW5kb3cgJiYgKHdpbmRvdy5CbG9vZGhvdW5kID0gb2xkKTtcbiAgICAgICAgICAgIHJldHVybiBCbG9vZGhvdW5kO1xuICAgICAgICB9O1xuICAgICAgICBCbG9vZGhvdW5kLnRva2VuaXplcnMgPSB0b2tlbml6ZXJzO1xuICAgICAgICBfLm1peGluKEJsb29kaG91bmQucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBfX3R0QWRhcHRlcjogZnVuY3Rpb24gdHRBZGFwdGVyKCkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGUgPyB3aXRoQXN5bmMgOiB3aXRob3V0QXN5bmM7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gd2l0aEFzeW5jKHF1ZXJ5LCBzeW5jLCBhc3luYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5zZWFyY2gocXVlcnksIHN5bmMsIGFzeW5jKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gd2l0aG91dEFzeW5jKHF1ZXJ5LCBzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LnNlYXJjaChxdWVyeSwgc3luYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9sb2FkUHJlZmV0Y2g6IGZ1bmN0aW9uIGxvYWRQcmVmZXRjaCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIGRlZmVycmVkLCBzZXJpYWxpemVkO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wcmVmZXRjaCkge1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChzZXJpYWxpemVkID0gdGhpcy5wcmVmZXRjaC5mcm9tQ2FjaGUoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4LmJvb3RzdHJhcChzZXJpYWxpemVkKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJlZmV0Y2guZnJvbU5ldHdvcmsoZG9uZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZG9uZShlcnIsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnJlamVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYWRkKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnByZWZldGNoLnN0b3JlKHRoYXQuaW5kZXguc2VyaWFsaXplKCkpO1xuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9pbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKCkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgZGVmZXJyZWQ7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICAgICAgICAgICh0aGlzLmluaXRQcm9taXNlID0gdGhpcy5fbG9hZFByZWZldGNoKCkpLmRvbmUoYWRkTG9jYWxUb0luZGV4KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbml0UHJvbWlzZTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhZGRMb2NhbFRvSW5kZXgoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoYXQuYWRkKHRoYXQubG9jYWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiBpbml0aWFsaXplKGZvcmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICF0aGlzLmluaXRQcm9taXNlIHx8IGZvcmNlID8gdGhpcy5faW5pdGlhbGl6ZSgpIDogdGhpcy5pbml0UHJvbWlzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIGFkZChkYXRhKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleC5hZGQoZGF0YSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoaWRzKSB7XG4gICAgICAgICAgICAgICAgaWRzID0gXy5pc0FycmF5KGlkcykgPyBpZHMgOiBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXguZ2V0KGlkcyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2gocXVlcnksIHN5bmMsIGFzeW5jKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLCBsb2NhbDtcbiAgICAgICAgICAgICAgICBsb2NhbCA9IHRoaXMuc29ydGVyKHRoaXMuaW5kZXguc2VhcmNoKHF1ZXJ5KSk7XG4gICAgICAgICAgICAgICAgc3luYyh0aGlzLnJlbW90ZSA/IGxvY2FsLnNsaWNlKCkgOiBsb2NhbCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVtb3RlICYmIGxvY2FsLmxlbmd0aCA8IHRoaXMuc3VmZmljaWVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW90ZS5nZXQocXVlcnksIHByb2Nlc3NSZW1vdGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZW1vdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdGUuY2FuY2VsTGFzdFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcHJvY2Vzc1JlbW90ZShyZW1vdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vbkR1cGxpY2F0ZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHJlbW90ZSwgZnVuY3Rpb24ocikge1xuICAgICAgICAgICAgICAgICAgICAgICAgIV8uc29tZShsb2NhbCwgZnVuY3Rpb24obCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGF0LmlkZW50aWZ5KHIpID09PSB0aGF0LmlkZW50aWZ5KGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkgJiYgbm9uRHVwbGljYXRlcy5wdXNoKHIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYXN5bmMgJiYgYXN5bmMobm9uRHVwbGljYXRlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsbDogZnVuY3Rpb24gYWxsKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4LmFsbCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4LnJlc2V0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXJQcmVmZXRjaENhY2hlOiBmdW5jdGlvbiBjbGVhclByZWZldGNoQ2FjaGUoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmVmZXRjaCAmJiB0aGlzLnByZWZldGNoLmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXJSZW1vdGVDYWNoZTogZnVuY3Rpb24gY2xlYXJSZW1vdGVDYWNoZSgpIHtcbiAgICAgICAgICAgICAgICBUcmFuc3BvcnQucmVzZXRDYWNoZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHR0QWRhcHRlcjogZnVuY3Rpb24gdHRBZGFwdGVyKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9fdHRBZGFwdGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gQmxvb2Rob3VuZDtcbiAgICB9KCk7XG4gICAgcmV0dXJuIEJsb29kaG91bmQ7XG59KTtcblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFwidHlwZWFoZWFkLmpzXCIsIFsgXCJqcXVlcnlcIiBdLCBmdW5jdGlvbihhMCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkoYTApO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBleHBvcnRzID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShyZXF1aXJlKFwianF1ZXJ5XCIpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmYWN0b3J5KGpRdWVyeSk7XG4gICAgfVxufSkodGhpcywgZnVuY3Rpb24oJCkge1xuICAgIHZhciBfID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNNc2llOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSA/IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhtc2llIHxydjopKFxcZCsoLlxcZCspPykvaSlbMl0gOiBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0JsYW5rU3RyaW5nOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXN0ciB8fCAvXlxccyokLy50ZXN0KHN0cik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXNjYXBlUmVnRXhDaGFyczogZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNTdHJpbmc6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzTnVtYmVyOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJudW1iZXJcIjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0FycmF5OiAkLmlzQXJyYXksXG4gICAgICAgICAgICBpc0Z1bmN0aW9uOiAkLmlzRnVuY3Rpb24sXG4gICAgICAgICAgICBpc09iamVjdDogJC5pc1BsYWluT2JqZWN0LFxuICAgICAgICAgICAgaXNVbmRlZmluZWQ6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzRWxlbWVudDogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKG9iaiAmJiBvYmoubm9kZVR5cGUgPT09IDEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzSlF1ZXJ5OiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgJDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b1N0cjogZnVuY3Rpb24gdG9TdHIocykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLmlzVW5kZWZpbmVkKHMpIHx8IHMgPT09IG51bGwgPyBcIlwiIDogcyArIFwiXCI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmluZDogJC5wcm94eSxcbiAgICAgICAgICAgIGVhY2g6IGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGNiKSB7XG4gICAgICAgICAgICAgICAgJC5lYWNoKGNvbGxlY3Rpb24sIHJldmVyc2VBcmdzKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZXZlcnNlQXJncyhpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNiKHZhbHVlLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1hcDogJC5tYXAsXG4gICAgICAgICAgICBmaWx0ZXI6ICQuZ3JlcCxcbiAgICAgICAgICAgIGV2ZXJ5OiBmdW5jdGlvbihvYmosIHRlc3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIW9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkLmVhY2gob2JqLCBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXN1bHQgPSB0ZXN0LmNhbGwobnVsbCwgdmFsLCBrZXksIG9iaikpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc29tZTogZnVuY3Rpb24ob2JqLCB0ZXN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQuZWFjaChvYmosIGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPSB0ZXN0LmNhbGwobnVsbCwgdmFsLCBrZXksIG9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtaXhpbjogJC5leHRlbmQsXG4gICAgICAgICAgICBpZGVudGl0eTogZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsb25lOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJC5leHRlbmQodHJ1ZSwge30sIG9iaik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0SWRHZW5lcmF0b3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3VudGVyKys7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0aWZ5OiBmdW5jdGlvbiB0ZW1wbGF0aWZ5KG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiAkLmlzRnVuY3Rpb24ob2JqKSA/IG9iaiA6IHRlbXBsYXRlO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRlbXBsYXRlKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKG9iaik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmVyOiBmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZm4sIDApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlYm91bmNlOiBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGltZW91dCwgcmVzdWx0O1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzLCBsYXRlciwgY2FsbE5vdztcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRocm90dGxlOiBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQsIGFyZ3MsIHRpbWVvdXQsIHJlc3VsdCwgcHJldmlvdXMsIGxhdGVyO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzID0gMDtcbiAgICAgICAgICAgICAgICBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91cyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKSwgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5pc1N0cmluZyh2YWwpID8gdmFsIDogSlNPTi5zdHJpbmdpZnkodmFsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBub29wOiBmdW5jdGlvbigpIHt9XG4gICAgICAgIH07XG4gICAgfSgpO1xuICAgIHZhciBXV1cgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBkZWZhdWx0Q2xhc3NOYW1lcyA9IHtcbiAgICAgICAgICAgIHdyYXBwZXI6IFwidHdpdHRlci10eXBlYWhlYWRcIixcbiAgICAgICAgICAgIGlucHV0OiBcInR0LWlucHV0XCIsXG4gICAgICAgICAgICBoaW50OiBcInR0LWhpbnRcIixcbiAgICAgICAgICAgIG1lbnU6IFwidHQtbWVudVwiLFxuICAgICAgICAgICAgZGF0YXNldDogXCJ0dC1kYXRhc2V0XCIsXG4gICAgICAgICAgICBzdWdnZXN0aW9uOiBcInR0LXN1Z2dlc3Rpb25cIixcbiAgICAgICAgICAgIHNlbGVjdGFibGU6IFwidHQtc2VsZWN0YWJsZVwiLFxuICAgICAgICAgICAgZW1wdHk6IFwidHQtZW1wdHlcIixcbiAgICAgICAgICAgIG9wZW46IFwidHQtb3BlblwiLFxuICAgICAgICAgICAgY3Vyc29yOiBcInR0LWN1cnNvclwiLFxuICAgICAgICAgICAgaGlnaGxpZ2h0OiBcInR0LWhpZ2hsaWdodFwiXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBidWlsZDtcbiAgICAgICAgZnVuY3Rpb24gYnVpbGQobykge1xuICAgICAgICAgICAgdmFyIHd3dywgY2xhc3NlcztcbiAgICAgICAgICAgIGNsYXNzZXMgPSBfLm1peGluKHt9LCBkZWZhdWx0Q2xhc3NOYW1lcywgbyk7XG4gICAgICAgICAgICB3d3cgPSB7XG4gICAgICAgICAgICAgICAgY3NzOiBidWlsZENzcygpLFxuICAgICAgICAgICAgICAgIGNsYXNzZXM6IGNsYXNzZXMsXG4gICAgICAgICAgICAgICAgaHRtbDogYnVpbGRIdG1sKGNsYXNzZXMpLFxuICAgICAgICAgICAgICAgIHNlbGVjdG9yczogYnVpbGRTZWxlY3RvcnMoY2xhc3NlcylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNzczogd3d3LmNzcyxcbiAgICAgICAgICAgICAgICBodG1sOiB3d3cuaHRtbCxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiB3d3cuY2xhc3NlcyxcbiAgICAgICAgICAgICAgICBzZWxlY3RvcnM6IHd3dy5zZWxlY3RvcnMsXG4gICAgICAgICAgICAgICAgbWl4aW46IGZ1bmN0aW9uKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgXy5taXhpbihvLCB3d3cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYnVpbGRIdG1sKGMpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgd3JhcHBlcjogJzxzcGFuIGNsYXNzPVwiJyArIGMud3JhcHBlciArICdcIj48L3NwYW4+JyxcbiAgICAgICAgICAgICAgICBtZW51OiAnPGRpdiBjbGFzcz1cIicgKyBjLm1lbnUgKyAnXCI+PC9kaXY+J1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBidWlsZFNlbGVjdG9ycyhjbGFzc2VzKSB7XG4gICAgICAgICAgICB2YXIgc2VsZWN0b3JzID0ge307XG4gICAgICAgICAgICBfLmVhY2goY2xhc3NlcywgZnVuY3Rpb24odiwgaykge1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yc1trXSA9IFwiLlwiICsgdjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdG9ycztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBidWlsZENzcygpIHtcbiAgICAgICAgICAgIHZhciBjc3MgPSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlcjoge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoaW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogXCIwXCIsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogXCJ0cmFuc3BhcmVudFwiLFxuICAgICAgICAgICAgICAgICAgICBib3hTaGFkb3c6IFwibm9uZVwiLFxuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBcIjFcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5wdXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogXCJ0b3BcIixcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBcInRyYW5zcGFyZW50XCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlucHV0V2l0aE5vSGludDoge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiBcInRvcFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtZW51OiB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogXCIxMDAlXCIsXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgICAgICB6SW5kZXg6IFwiMTAwXCIsXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IFwibm9uZVwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBsdHI6IHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogXCIwXCIsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiBcImF1dG9cIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcnRsOiB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IFwiYXV0b1wiLFxuICAgICAgICAgICAgICAgICAgICByaWdodDogXCIgMFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChfLmlzTXNpZSgpKSB7XG4gICAgICAgICAgICAgICAgXy5taXhpbihjc3MuaW5wdXQsIHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiBcInVybChkYXRhOmltYWdlL2dpZjtiYXNlNjQsUjBsR09EbGhBUUFCQUlBQUFBQUFBUC8vL3lINUJBRUFBQUFBTEFBQUFBQUJBQUVBQUFJQlJBQTcpXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjc3M7XG4gICAgICAgIH1cbiAgICB9KCk7XG4gICAgdmFyIEV2ZW50QnVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgbmFtZXNwYWNlLCBkZXByZWNhdGlvbk1hcDtcbiAgICAgICAgbmFtZXNwYWNlID0gXCJ0eXBlYWhlYWQ6XCI7XG4gICAgICAgIGRlcHJlY2F0aW9uTWFwID0ge1xuICAgICAgICAgICAgcmVuZGVyOiBcInJlbmRlcmVkXCIsXG4gICAgICAgICAgICBjdXJzb3JjaGFuZ2U6IFwiY3Vyc29yY2hhbmdlZFwiLFxuICAgICAgICAgICAgc2VsZWN0OiBcInNlbGVjdGVkXCIsXG4gICAgICAgICAgICBhdXRvY29tcGxldGU6IFwiYXV0b2NvbXBsZXRlZFwiXG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIEV2ZW50QnVzKG8pIHtcbiAgICAgICAgICAgIGlmICghbyB8fCAhby5lbCkge1xuICAgICAgICAgICAgICAgICQuZXJyb3IoXCJFdmVudEJ1cyBpbml0aWFsaXplZCB3aXRob3V0IGVsXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kZWwgPSAkKG8uZWwpO1xuICAgICAgICB9XG4gICAgICAgIF8ubWl4aW4oRXZlbnRCdXMucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBfdHJpZ2dlcjogZnVuY3Rpb24odHlwZSwgYXJncykge1xuICAgICAgICAgICAgICAgIHZhciAkZTtcbiAgICAgICAgICAgICAgICAkZSA9ICQuRXZlbnQobmFtZXNwYWNlICsgdHlwZSk7XG4gICAgICAgICAgICAgICAgKGFyZ3MgPSBhcmdzIHx8IFtdKS51bnNoaWZ0KCRlKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC50cmlnZ2VyLmFwcGx5KHRoaXMuJGVsLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmVmb3JlOiBmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MsICRlO1xuICAgICAgICAgICAgICAgIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgICAgICAgICAgICAgJGUgPSB0aGlzLl90cmlnZ2VyKFwiYmVmb3JlXCIgKyB0eXBlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJGUuaXNEZWZhdWx0UHJldmVudGVkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdHJpZ2dlcjogZnVuY3Rpb24odHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBkZXByZWNhdGVkVHlwZTtcbiAgICAgICAgICAgICAgICB0aGlzLl90cmlnZ2VyKHR5cGUsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgICAgICAgICAgaWYgKGRlcHJlY2F0ZWRUeXBlID0gZGVwcmVjYXRpb25NYXBbdHlwZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdHJpZ2dlcihkZXByZWNhdGVkVHlwZSwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gRXZlbnRCdXM7XG4gICAgfSgpO1xuICAgIHZhciBFdmVudEVtaXR0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBzcGxpdHRlciA9IC9cXHMrLywgbmV4dFRpY2sgPSBnZXROZXh0VGljaygpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgb25TeW5jOiBvblN5bmMsXG4gICAgICAgICAgICBvbkFzeW5jOiBvbkFzeW5jLFxuICAgICAgICAgICAgb2ZmOiBvZmYsXG4gICAgICAgICAgICB0cmlnZ2VyOiB0cmlnZ2VyXG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIG9uKG1ldGhvZCwgdHlwZXMsIGNiLCBjb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgdHlwZTtcbiAgICAgICAgICAgIGlmICghY2IpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHR5cGVzID0gdHlwZXMuc3BsaXQoc3BsaXR0ZXIpO1xuICAgICAgICAgICAgY2IgPSBjb250ZXh0ID8gYmluZENvbnRleHQoY2IsIGNvbnRleHQpIDogY2I7XG4gICAgICAgICAgICB0aGlzLl9jYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3MgfHwge307XG4gICAgICAgICAgICB3aGlsZSAodHlwZSA9IHR5cGVzLnNoaWZ0KCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFja3NbdHlwZV0gPSB0aGlzLl9jYWxsYmFja3NbdHlwZV0gfHwge1xuICAgICAgICAgICAgICAgICAgICBzeW5jOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgYXN5bmM6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jYWxsYmFja3NbdHlwZV1bbWV0aG9kXS5wdXNoKGNiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uQXN5bmModHlwZXMsIGNiLCBjb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gb24uY2FsbCh0aGlzLCBcImFzeW5jXCIsIHR5cGVzLCBjYiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gb25TeW5jKHR5cGVzLCBjYiwgY29udGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIG9uLmNhbGwodGhpcywgXCJzeW5jXCIsIHR5cGVzLCBjYiwgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gb2ZmKHR5cGVzKSB7XG4gICAgICAgICAgICB2YXIgdHlwZTtcbiAgICAgICAgICAgIGlmICghdGhpcy5fY2FsbGJhY2tzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0eXBlcyA9IHR5cGVzLnNwbGl0KHNwbGl0dGVyKTtcbiAgICAgICAgICAgIHdoaWxlICh0eXBlID0gdHlwZXMuc2hpZnQoKSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9jYWxsYmFja3NbdHlwZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB0cmlnZ2VyKHR5cGVzKSB7XG4gICAgICAgICAgICB2YXIgdHlwZSwgY2FsbGJhY2tzLCBhcmdzLCBzeW5jRmx1c2gsIGFzeW5jRmx1c2g7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2NhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHlwZXMgPSB0eXBlcy5zcGxpdChzcGxpdHRlcik7XG4gICAgICAgICAgICBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICAgICAgd2hpbGUgKCh0eXBlID0gdHlwZXMuc2hpZnQoKSkgJiYgKGNhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrc1t0eXBlXSkpIHtcbiAgICAgICAgICAgICAgICBzeW5jRmx1c2ggPSBnZXRGbHVzaChjYWxsYmFja3Muc3luYywgdGhpcywgWyB0eXBlIF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgICAgICAgICBhc3luY0ZsdXNoID0gZ2V0Rmx1c2goY2FsbGJhY2tzLmFzeW5jLCB0aGlzLCBbIHR5cGUgXS5jb25jYXQoYXJncykpO1xuICAgICAgICAgICAgICAgIHN5bmNGbHVzaCgpICYmIG5leHRUaWNrKGFzeW5jRmx1c2gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2V0Rmx1c2goY2FsbGJhY2tzLCBjb250ZXh0LCBhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gZmx1c2g7XG4gICAgICAgICAgICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2FuY2VsbGVkO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBjYWxsYmFja3MubGVuZ3RoOyAhY2FuY2VsbGVkICYmIGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjYW5jZWxsZWQgPSBjYWxsYmFja3NbaV0uYXBwbHkoY29udGV4dCwgYXJncykgPT09IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gIWNhbmNlbGxlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXROZXh0VGljaygpIHtcbiAgICAgICAgICAgIHZhciBuZXh0VGlja0ZuO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5zZXRJbW1lZGlhdGUpIHtcbiAgICAgICAgICAgICAgICBuZXh0VGlja0ZuID0gZnVuY3Rpb24gbmV4dFRpY2tTZXRJbW1lZGlhdGUoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0SW1tZWRpYXRlKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV4dFRpY2tGbiA9IGZ1bmN0aW9uIG5leHRUaWNrU2V0VGltZW91dChmbikge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXh0VGlja0ZuO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGJpbmRDb250ZXh0KGZuLCBjb250ZXh0KSB7XG4gICAgICAgICAgICByZXR1cm4gZm4uYmluZCA/IGZuLmJpbmQoY29udGV4dCkgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBmbi5hcHBseShjb250ZXh0LCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgaGlnaGxpZ2h0ID0gZnVuY3Rpb24oZG9jKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgICAgICAgICBub2RlOiBudWxsLFxuICAgICAgICAgICAgcGF0dGVybjogbnVsbCxcbiAgICAgICAgICAgIHRhZ05hbWU6IFwic3Ryb25nXCIsXG4gICAgICAgICAgICBjbGFzc05hbWU6IG51bGwsXG4gICAgICAgICAgICB3b3Jkc09ubHk6IGZhbHNlLFxuICAgICAgICAgICAgY2FzZVNlbnNpdGl2ZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIGhpZ2h0bGlnaHQobykge1xuICAgICAgICAgICAgdmFyIHJlZ2V4O1xuICAgICAgICAgICAgbyA9IF8ubWl4aW4oe30sIGRlZmF1bHRzLCBvKTtcbiAgICAgICAgICAgIGlmICghby5ub2RlIHx8ICFvLnBhdHRlcm4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvLnBhdHRlcm4gPSBfLmlzQXJyYXkoby5wYXR0ZXJuKSA/IG8ucGF0dGVybiA6IFsgby5wYXR0ZXJuIF07XG4gICAgICAgICAgICByZWdleCA9IGdldFJlZ2V4KG8ucGF0dGVybiwgby5jYXNlU2Vuc2l0aXZlLCBvLndvcmRzT25seSk7XG4gICAgICAgICAgICB0cmF2ZXJzZShvLm5vZGUsIGhpZ2h0bGlnaHRUZXh0Tm9kZSk7XG4gICAgICAgICAgICBmdW5jdGlvbiBoaWdodGxpZ2h0VGV4dE5vZGUodGV4dE5vZGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2gsIHBhdHRlcm5Ob2RlLCB3cmFwcGVyTm9kZTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2ggPSByZWdleC5leGVjKHRleHROb2RlLmRhdGEpKSB7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXJOb2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoby50YWdOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgby5jbGFzc05hbWUgJiYgKHdyYXBwZXJOb2RlLmNsYXNzTmFtZSA9IG8uY2xhc3NOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybk5vZGUgPSB0ZXh0Tm9kZS5zcGxpdFRleHQobWF0Y2guaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBwYXR0ZXJuTm9kZS5zcGxpdFRleHQobWF0Y2hbMF0ubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgd3JhcHBlck5vZGUuYXBwZW5kQ2hpbGQocGF0dGVybk5vZGUuY2xvbmVOb2RlKHRydWUpKTtcbiAgICAgICAgICAgICAgICAgICAgdGV4dE5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQod3JhcHBlck5vZGUsIHBhdHRlcm5Ob2RlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhbWF0Y2g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiB0cmF2ZXJzZShlbCwgaGlnaHRsaWdodFRleHROb2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkTm9kZSwgVEVYVF9OT0RFX1RZUEUgPSAzO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWwuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjaGlsZE5vZGUgPSBlbC5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGROb2RlLm5vZGVUeXBlID09PSBURVhUX05PREVfVFlQRSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaSArPSBoaWdodGxpZ2h0VGV4dE5vZGUoY2hpbGROb2RlKSA/IDEgOiAwO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJhdmVyc2UoY2hpbGROb2RlLCBoaWdodGxpZ2h0VGV4dE5vZGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBnZXRSZWdleChwYXR0ZXJucywgY2FzZVNlbnNpdGl2ZSwgd29yZHNPbmx5KSB7XG4gICAgICAgICAgICB2YXIgZXNjYXBlZFBhdHRlcm5zID0gW10sIHJlZ2V4U3RyO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHBhdHRlcm5zLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZXNjYXBlZFBhdHRlcm5zLnB1c2goXy5lc2NhcGVSZWdFeENoYXJzKHBhdHRlcm5zW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWdleFN0ciA9IHdvcmRzT25seSA/IFwiXFxcXGIoXCIgKyBlc2NhcGVkUGF0dGVybnMuam9pbihcInxcIikgKyBcIilcXFxcYlwiIDogXCIoXCIgKyBlc2NhcGVkUGF0dGVybnMuam9pbihcInxcIikgKyBcIilcIjtcbiAgICAgICAgICAgIHJldHVybiBjYXNlU2Vuc2l0aXZlID8gbmV3IFJlZ0V4cChyZWdleFN0cikgOiBuZXcgUmVnRXhwKHJlZ2V4U3RyLCBcImlcIik7XG4gICAgICAgIH1cbiAgICB9KHdpbmRvdy5kb2N1bWVudCk7XG4gICAgdmFyIElucHV0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgc3BlY2lhbEtleUNvZGVNYXA7XG4gICAgICAgIHNwZWNpYWxLZXlDb2RlTWFwID0ge1xuICAgICAgICAgICAgOTogXCJ0YWJcIixcbiAgICAgICAgICAgIDI3OiBcImVzY1wiLFxuICAgICAgICAgICAgMzc6IFwibGVmdFwiLFxuICAgICAgICAgICAgMzk6IFwicmlnaHRcIixcbiAgICAgICAgICAgIDEzOiBcImVudGVyXCIsXG4gICAgICAgICAgICAzODogXCJ1cFwiLFxuICAgICAgICAgICAgNDA6IFwiZG93blwiXG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIElucHV0KG8sIHd3dykge1xuICAgICAgICAgICAgbyA9IG8gfHwge307XG4gICAgICAgICAgICBpZiAoIW8uaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKFwiaW5wdXQgaXMgbWlzc2luZ1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHd3dy5taXhpbih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuJGhpbnQgPSAkKG8uaGludCk7XG4gICAgICAgICAgICB0aGlzLiRpbnB1dCA9ICQoby5pbnB1dCk7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy4kaW5wdXQudmFsKCk7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5V2hlbkZvY3VzZWQgPSB0aGlzLmhhc0ZvY3VzKCkgPyB0aGlzLnF1ZXJ5IDogbnVsbDtcbiAgICAgICAgICAgIHRoaXMuJG92ZXJmbG93SGVscGVyID0gYnVpbGRPdmVyZmxvd0hlbHBlcih0aGlzLiRpbnB1dCk7XG4gICAgICAgICAgICB0aGlzLl9jaGVja0xhbmd1YWdlRGlyZWN0aW9uKCk7XG4gICAgICAgICAgICBpZiAodGhpcy4kaGludC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhpbnQgPSB0aGlzLmdldEhpbnQgPSB0aGlzLmNsZWFySGludCA9IHRoaXMuY2xlYXJIaW50SWZJbnZhbGlkID0gXy5ub29wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIElucHV0Lm5vcm1hbGl6ZVF1ZXJ5ID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gXy50b1N0cihzdHIpLnJlcGxhY2UoL15cXHMqL2csIFwiXCIpLnJlcGxhY2UoL1xcc3syLH0vZywgXCIgXCIpO1xuICAgICAgICB9O1xuICAgICAgICBfLm1peGluKElucHV0LnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyLCB7XG4gICAgICAgICAgICBfb25CbHVyOiBmdW5jdGlvbiBvbkJsdXIoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldElucHV0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJibHVycmVkXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkZvY3VzOiBmdW5jdGlvbiBvbkZvY3VzKCkge1xuICAgICAgICAgICAgICAgIHRoaXMucXVlcnlXaGVuRm9jdXNlZCA9IHRoaXMucXVlcnk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwiZm9jdXNlZFwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25LZXlkb3duOiBmdW5jdGlvbiBvbktleWRvd24oJGUpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5TmFtZSA9IHNwZWNpYWxLZXlDb2RlTWFwWyRlLndoaWNoIHx8ICRlLmtleUNvZGVdO1xuICAgICAgICAgICAgICAgIHRoaXMuX21hbmFnZVByZXZlbnREZWZhdWx0KGtleU5hbWUsICRlKTtcbiAgICAgICAgICAgICAgICBpZiAoa2V5TmFtZSAmJiB0aGlzLl9zaG91bGRUcmlnZ2VyKGtleU5hbWUsICRlKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoa2V5TmFtZSArIFwiS2V5ZWRcIiwgJGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25JbnB1dDogZnVuY3Rpb24gb25JbnB1dCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRRdWVyeSh0aGlzLmdldElucHV0VmFsdWUoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckhpbnRJZkludmFsaWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0xhbmd1YWdlRGlyZWN0aW9uKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX21hbmFnZVByZXZlbnREZWZhdWx0OiBmdW5jdGlvbiBtYW5hZ2VQcmV2ZW50RGVmYXVsdChrZXlOYW1lLCAkZSkge1xuICAgICAgICAgICAgICAgIHZhciBwcmV2ZW50RGVmYXVsdDtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ1cFwiOlxuICAgICAgICAgICAgICAgICAgY2FzZSBcImRvd25cIjpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSAhd2l0aE1vZGlmaWVyKCRlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByZXZlbnREZWZhdWx0ICYmICRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Nob3VsZFRyaWdnZXI6IGZ1bmN0aW9uIHNob3VsZFRyaWdnZXIoa2V5TmFtZSwgJGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdHJpZ2dlcjtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleU5hbWUpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0YWJcIjpcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlciA9ICF3aXRoTW9kaWZpZXIoJGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlciA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cmlnZ2VyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9jaGVja0xhbmd1YWdlRGlyZWN0aW9uOiBmdW5jdGlvbiBjaGVja0xhbmd1YWdlRGlyZWN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBkaXIgPSAodGhpcy4kaW5wdXQuY3NzKFwiZGlyZWN0aW9uXCIpIHx8IFwibHRyXCIpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlyICE9PSBkaXIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXIgPSBkaXI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGhpbnQuYXR0cihcImRpclwiLCBkaXIpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJsYW5nRGlyQ2hhbmdlZFwiLCBkaXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2V0UXVlcnk6IGZ1bmN0aW9uIHNldFF1ZXJ5KHZhbCwgc2lsZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZUVxdWl2YWxlbnQsIGhhc0RpZmZlcmVudFdoaXRlc3BhY2U7XG4gICAgICAgICAgICAgICAgYXJlRXF1aXZhbGVudCA9IGFyZVF1ZXJpZXNFcXVpdmFsZW50KHZhbCwgdGhpcy5xdWVyeSk7XG4gICAgICAgICAgICAgICAgaGFzRGlmZmVyZW50V2hpdGVzcGFjZSA9IGFyZUVxdWl2YWxlbnQgPyB0aGlzLnF1ZXJ5Lmxlbmd0aCAhPT0gdmFsLmxlbmd0aCA6IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucXVlcnkgPSB2YWw7XG4gICAgICAgICAgICAgICAgaWYgKCFzaWxlbnQgJiYgIWFyZUVxdWl2YWxlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwicXVlcnlDaGFuZ2VkXCIsIHRoaXMucXVlcnkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXNpbGVudCAmJiBoYXNEaWZmZXJlbnRXaGl0ZXNwYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcIndoaXRlc3BhY2VDaGFuZ2VkXCIsIHRoaXMucXVlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBiaW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIG9uQmx1ciwgb25Gb2N1cywgb25LZXlkb3duLCBvbklucHV0O1xuICAgICAgICAgICAgICAgIG9uQmx1ciA9IF8uYmluZCh0aGlzLl9vbkJsdXIsIHRoaXMpO1xuICAgICAgICAgICAgICAgIG9uRm9jdXMgPSBfLmJpbmQodGhpcy5fb25Gb2N1cywgdGhpcyk7XG4gICAgICAgICAgICAgICAgb25LZXlkb3duID0gXy5iaW5kKHRoaXMuX29uS2V5ZG93biwgdGhpcyk7XG4gICAgICAgICAgICAgICAgb25JbnB1dCA9IF8uYmluZCh0aGlzLl9vbklucHV0LCB0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRpbnB1dC5vbihcImJsdXIudHRcIiwgb25CbHVyKS5vbihcImZvY3VzLnR0XCIsIG9uRm9jdXMpLm9uKFwia2V5ZG93bi50dFwiLCBvbktleWRvd24pO1xuICAgICAgICAgICAgICAgIGlmICghXy5pc01zaWUoKSB8fCBfLmlzTXNpZSgpID4gOSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRpbnB1dC5vbihcImlucHV0LnR0XCIsIG9uSW5wdXQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGlucHV0Lm9uKFwia2V5ZG93bi50dCBrZXlwcmVzcy50dCBjdXQudHQgcGFzdGUudHRcIiwgZnVuY3Rpb24oJGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcGVjaWFsS2V5Q29kZU1hcFskZS53aGljaCB8fCAkZS5rZXlDb2RlXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZGVmZXIoXy5iaW5kKHRoYXQuX29uSW5wdXQsIHRoYXQsICRlKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBibHVyOiBmdW5jdGlvbiBibHVyKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGlucHV0LmJsdXIoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRMYW5nRGlyOiBmdW5jdGlvbiBnZXRMYW5nRGlyKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRRdWVyeTogZnVuY3Rpb24gZ2V0UXVlcnkoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlcnkgfHwgXCJcIjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRRdWVyeTogZnVuY3Rpb24gc2V0UXVlcnkodmFsLCBzaWxlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElucHV0VmFsdWUodmFsKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRRdWVyeSh2YWwsIHNpbGVudCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFzUXVlcnlDaGFuZ2VkU2luY2VMYXN0Rm9jdXM6IGZ1bmN0aW9uIGhhc1F1ZXJ5Q2hhbmdlZFNpbmNlTGFzdEZvY3VzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXJ5ICE9PSB0aGlzLnF1ZXJ5V2hlbkZvY3VzZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0SW5wdXRWYWx1ZTogZnVuY3Rpb24gZ2V0SW5wdXRWYWx1ZSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kaW5wdXQudmFsKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0SW5wdXRWYWx1ZTogZnVuY3Rpb24gc2V0SW5wdXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGlucHV0LnZhbCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGVhckhpbnRJZkludmFsaWQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9jaGVja0xhbmd1YWdlRGlyZWN0aW9uKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVzZXRJbnB1dFZhbHVlOiBmdW5jdGlvbiByZXNldElucHV0VmFsdWUoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKHRoaXMucXVlcnkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldEhpbnQ6IGZ1bmN0aW9uIGdldEhpbnQoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGhpbnQudmFsKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0SGludDogZnVuY3Rpb24gc2V0SGludCh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGhpbnQudmFsKHZhbHVlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhckhpbnQ6IGZ1bmN0aW9uIGNsZWFySGludCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldEhpbnQoXCJcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXJIaW50SWZJbnZhbGlkOiBmdW5jdGlvbiBjbGVhckhpbnRJZkludmFsaWQoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbCwgaGludCwgdmFsSXNQcmVmaXhPZkhpbnQsIGlzVmFsaWQ7XG4gICAgICAgICAgICAgICAgdmFsID0gdGhpcy5nZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgaGludCA9IHRoaXMuZ2V0SGludCgpO1xuICAgICAgICAgICAgICAgIHZhbElzUHJlZml4T2ZIaW50ID0gdmFsICE9PSBoaW50ICYmIGhpbnQuaW5kZXhPZih2YWwpID09PSAwO1xuICAgICAgICAgICAgICAgIGlzVmFsaWQgPSB2YWwgIT09IFwiXCIgJiYgdmFsSXNQcmVmaXhPZkhpbnQgJiYgIXRoaXMuaGFzT3ZlcmZsb3coKTtcbiAgICAgICAgICAgICAgICAhaXNWYWxpZCAmJiB0aGlzLmNsZWFySGludCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhhc0ZvY3VzOiBmdW5jdGlvbiBoYXNGb2N1cygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kaW5wdXQuaXMoXCI6Zm9jdXNcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFzT3ZlcmZsb3c6IGZ1bmN0aW9uIGhhc092ZXJmbG93KCkge1xuICAgICAgICAgICAgICAgIHZhciBjb25zdHJhaW50ID0gdGhpcy4kaW5wdXQud2lkdGgoKSAtIDI7XG4gICAgICAgICAgICAgICAgdGhpcy4kb3ZlcmZsb3dIZWxwZXIudGV4dCh0aGlzLmdldElucHV0VmFsdWUoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG92ZXJmbG93SGVscGVyLndpZHRoKCkgPj0gY29uc3RyYWludDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0N1cnNvckF0RW5kOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVMZW5ndGgsIHNlbGVjdGlvblN0YXJ0LCByYW5nZTtcbiAgICAgICAgICAgICAgICB2YWx1ZUxlbmd0aCA9IHRoaXMuJGlucHV0LnZhbCgpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBzZWxlY3Rpb25TdGFydCA9IHRoaXMuJGlucHV0WzBdLnNlbGVjdGlvblN0YXJ0O1xuICAgICAgICAgICAgICAgIGlmIChfLmlzTnVtYmVyKHNlbGVjdGlvblN0YXJ0KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZWN0aW9uU3RhcnQgPT09IHZhbHVlTGVuZ3RoO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgICAgICAgICAgICAgIHJhbmdlLm1vdmVTdGFydChcImNoYXJhY3RlclwiLCAtdmFsdWVMZW5ndGgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVMZW5ndGggPT09IHJhbmdlLnRleHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZXN0cm95OiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJGhpbnQub2ZmKFwiLnR0XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGlucHV0Lm9mZihcIi50dFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRvdmVyZmxvd0hlbHBlci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRoaW50ID0gdGhpcy4kaW5wdXQgPSB0aGlzLiRvdmVyZmxvd0hlbHBlciA9ICQoXCI8ZGl2PlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBJbnB1dDtcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRPdmVyZmxvd0hlbHBlcigkaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiAkKCc8cHJlIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvcHJlPicpLmNzcyh7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBcImhpZGRlblwiLFxuICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlXCIsXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJGlucHV0LmNzcyhcImZvbnQtZmFtaWx5XCIpLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAkaW5wdXQuY3NzKFwiZm9udC1zaXplXCIpLFxuICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogJGlucHV0LmNzcyhcImZvbnQtc3R5bGVcIiksXG4gICAgICAgICAgICAgICAgZm9udFZhcmlhbnQ6ICRpbnB1dC5jc3MoXCJmb250LXZhcmlhbnRcIiksXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodDogJGlucHV0LmNzcyhcImZvbnQtd2VpZ2h0XCIpLFxuICAgICAgICAgICAgICAgIHdvcmRTcGFjaW5nOiAkaW5wdXQuY3NzKFwid29yZC1zcGFjaW5nXCIpLFxuICAgICAgICAgICAgICAgIGxldHRlclNwYWNpbmc6ICRpbnB1dC5jc3MoXCJsZXR0ZXItc3BhY2luZ1wiKSxcbiAgICAgICAgICAgICAgICB0ZXh0SW5kZW50OiAkaW5wdXQuY3NzKFwidGV4dC1pbmRlbnRcIiksXG4gICAgICAgICAgICAgICAgdGV4dFJlbmRlcmluZzogJGlucHV0LmNzcyhcInRleHQtcmVuZGVyaW5nXCIpLFxuICAgICAgICAgICAgICAgIHRleHRUcmFuc2Zvcm06ICRpbnB1dC5jc3MoXCJ0ZXh0LXRyYW5zZm9ybVwiKVxuICAgICAgICAgICAgfSkuaW5zZXJ0QWZ0ZXIoJGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhcmVRdWVyaWVzRXF1aXZhbGVudChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gSW5wdXQubm9ybWFsaXplUXVlcnkoYSkgPT09IElucHV0Lm5vcm1hbGl6ZVF1ZXJ5KGIpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHdpdGhNb2RpZmllcigkZSkge1xuICAgICAgICAgICAgcmV0dXJuICRlLmFsdEtleSB8fCAkZS5jdHJsS2V5IHx8ICRlLm1ldGFLZXkgfHwgJGUuc2hpZnRLZXk7XG4gICAgICAgIH1cbiAgICB9KCk7XG4gICAgdmFyIERhdGFzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBrZXlzLCBuYW1lR2VuZXJhdG9yO1xuICAgICAgICBrZXlzID0ge1xuICAgICAgICAgICAgdmFsOiBcInR0LXNlbGVjdGFibGUtZGlzcGxheVwiLFxuICAgICAgICAgICAgb2JqOiBcInR0LXNlbGVjdGFibGUtb2JqZWN0XCJcbiAgICAgICAgfTtcbiAgICAgICAgbmFtZUdlbmVyYXRvciA9IF8uZ2V0SWRHZW5lcmF0b3IoKTtcbiAgICAgICAgZnVuY3Rpb24gRGF0YXNldChvLCB3d3cpIHtcbiAgICAgICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICAgICAgby50ZW1wbGF0ZXMgPSBvLnRlbXBsYXRlcyB8fCB7fTtcbiAgICAgICAgICAgIG8udGVtcGxhdGVzLm5vdEZvdW5kID0gby50ZW1wbGF0ZXMubm90Rm91bmQgfHwgby50ZW1wbGF0ZXMuZW1wdHk7XG4gICAgICAgICAgICBpZiAoIW8uc291cmNlKSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcihcIm1pc3Npbmcgc291cmNlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFvLm5vZGUpIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKFwibWlzc2luZyBub2RlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG8ubmFtZSAmJiAhaXNWYWxpZE5hbWUoby5uYW1lKSkge1xuICAgICAgICAgICAgICAgICQuZXJyb3IoXCJpbnZhbGlkIGRhdGFzZXQgbmFtZTogXCIgKyBvLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd3d3Lm1peGluKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5oaWdobGlnaHQgPSAhIW8uaGlnaGxpZ2h0O1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gby5uYW1lIHx8IG5hbWVHZW5lcmF0b3IoKTtcbiAgICAgICAgICAgIHRoaXMubGltaXQgPSBvLmxpbWl0IHx8IDU7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlGbiA9IGdldERpc3BsYXlGbihvLmRpc3BsYXkgfHwgby5kaXNwbGF5S2V5KTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVzID0gZ2V0VGVtcGxhdGVzKG8udGVtcGxhdGVzLCB0aGlzLmRpc3BsYXlGbik7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZSA9IG8uc291cmNlLl9fdHRBZGFwdGVyID8gby5zb3VyY2UuX190dEFkYXB0ZXIoKSA6IG8uc291cmNlO1xuICAgICAgICAgICAgdGhpcy5hc3luYyA9IF8uaXNVbmRlZmluZWQoby5hc3luYykgPyB0aGlzLnNvdXJjZS5sZW5ndGggPiAyIDogISFvLmFzeW5jO1xuICAgICAgICAgICAgdGhpcy5fcmVzZXRMYXN0U3VnZ2VzdGlvbigpO1xuICAgICAgICAgICAgdGhpcy4kZWwgPSAkKG8ubm9kZSkuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmRhdGFzZXQpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5kYXRhc2V0ICsgXCItXCIgKyB0aGlzLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIERhdGFzZXQuZXh0cmFjdERhdGEgPSBmdW5jdGlvbiBleHRyYWN0RGF0YShlbCkge1xuICAgICAgICAgICAgdmFyICRlbCA9ICQoZWwpO1xuICAgICAgICAgICAgaWYgKCRlbC5kYXRhKGtleXMub2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbDogJGVsLmRhdGEoa2V5cy52YWwpIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIG9iajogJGVsLmRhdGEoa2V5cy5vYmopIHx8IG51bGxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIF8ubWl4aW4oRGF0YXNldC5wcm90b3R5cGUsIEV2ZW50RW1pdHRlciwge1xuICAgICAgICAgICAgX292ZXJ3cml0ZTogZnVuY3Rpb24gb3ZlcndyaXRlKHF1ZXJ5LCBzdWdnZXN0aW9ucykge1xuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnMgfHwgW107XG4gICAgICAgICAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJTdWdnZXN0aW9ucyhxdWVyeSwgc3VnZ2VzdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hc3luYyAmJiB0aGlzLnRlbXBsYXRlcy5wZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlclBlbmRpbmcocXVlcnkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuYXN5bmMgJiYgdGhpcy50ZW1wbGF0ZXMubm90Rm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyTm90Rm91bmQocXVlcnkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VtcHR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcInJlbmRlcmVkXCIsIHRoaXMubmFtZSwgc3VnZ2VzdGlvbnMsIGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYXBwZW5kOiBmdW5jdGlvbiBhcHBlbmQocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucyB8fCBbXTtcbiAgICAgICAgICAgICAgICBpZiAoc3VnZ2VzdGlvbnMubGVuZ3RoICYmIHRoaXMuJGxhc3RTdWdnZXN0aW9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBlbmRTdWdnZXN0aW9ucyhxdWVyeSwgc3VnZ2VzdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3VnZ2VzdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlclN1Z2dlc3Rpb25zKHF1ZXJ5LCBzdWdnZXN0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy4kbGFzdFN1Z2dlc3Rpb24ubGVuZ3RoICYmIHRoaXMudGVtcGxhdGVzLm5vdEZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlck5vdEZvdW5kKHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwicmVuZGVyZWRcIiwgdGhpcy5uYW1lLCBzdWdnZXN0aW9ucywgdHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlbmRlclN1Z2dlc3Rpb25zOiBmdW5jdGlvbiByZW5kZXJTdWdnZXN0aW9ucyhxdWVyeSwgc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGZyYWdtZW50O1xuICAgICAgICAgICAgICAgICRmcmFnbWVudCA9IHRoaXMuX2dldFN1Z2dlc3Rpb25zRnJhZ21lbnQocXVlcnksIHN1Z2dlc3Rpb25zKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRsYXN0U3VnZ2VzdGlvbiA9ICRmcmFnbWVudC5jaGlsZHJlbigpLmxhc3QoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5odG1sKCRmcmFnbWVudCkucHJlcGVuZCh0aGlzLl9nZXRIZWFkZXIocXVlcnksIHN1Z2dlc3Rpb25zKSkuYXBwZW5kKHRoaXMuX2dldEZvb3RlcihxdWVyeSwgc3VnZ2VzdGlvbnMpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYXBwZW5kU3VnZ2VzdGlvbnM6IGZ1bmN0aW9uIGFwcGVuZFN1Z2dlc3Rpb25zKHF1ZXJ5LCBzdWdnZXN0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciAkZnJhZ21lbnQsICRsYXN0U3VnZ2VzdGlvbjtcbiAgICAgICAgICAgICAgICAkZnJhZ21lbnQgPSB0aGlzLl9nZXRTdWdnZXN0aW9uc0ZyYWdtZW50KHF1ZXJ5LCBzdWdnZXN0aW9ucyk7XG4gICAgICAgICAgICAgICAgJGxhc3RTdWdnZXN0aW9uID0gJGZyYWdtZW50LmNoaWxkcmVuKCkubGFzdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGxhc3RTdWdnZXN0aW9uLmFmdGVyKCRmcmFnbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kbGFzdFN1Z2dlc3Rpb24gPSAkbGFzdFN1Z2dlc3Rpb247XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlbmRlclBlbmRpbmc6IGZ1bmN0aW9uIHJlbmRlclBlbmRpbmcocXVlcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlcy5wZW5kaW5nO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0TGFzdFN1Z2dlc3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSAmJiB0aGlzLiRlbC5odG1sKHRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0OiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlbmRlck5vdEZvdW5kOiBmdW5jdGlvbiByZW5kZXJOb3RGb3VuZChxdWVyeSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVzLm5vdEZvdW5kO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0TGFzdFN1Z2dlc3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSAmJiB0aGlzLiRlbC5odG1sKHRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0OiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2VtcHR5OiBmdW5jdGlvbiBlbXB0eSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0TGFzdFN1Z2dlc3Rpb24oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0U3VnZ2VzdGlvbnNGcmFnbWVudDogZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnNGcmFnbWVudChxdWVyeSwgc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIGZyYWdtZW50O1xuICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgICAgIF8uZWFjaChzdWdnZXN0aW9ucywgZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbk5vZGUoc3VnZ2VzdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGVsLCBjb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhhdC5faW5qZWN0UXVlcnkocXVlcnksIHN1Z2dlc3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAkZWwgPSAkKHRoYXQudGVtcGxhdGVzLnN1Z2dlc3Rpb24oY29udGV4dCkpLmRhdGEoa2V5cy5vYmosIHN1Z2dlc3Rpb24pLmRhdGEoa2V5cy52YWwsIHRoYXQuZGlzcGxheUZuKHN1Z2dlc3Rpb24pKS5hZGRDbGFzcyh0aGF0LmNsYXNzZXMuc3VnZ2VzdGlvbiArIFwiIFwiICsgdGhhdC5jbGFzc2VzLnNlbGVjdGFibGUpO1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCgkZWxbMF0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0ICYmIGhpZ2hsaWdodCh7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5jbGFzc2VzLmhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogZnJhZ21lbnQsXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IHF1ZXJ5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQoZnJhZ21lbnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRGb290ZXI6IGZ1bmN0aW9uIGdldEZvb3RlcihxdWVyeSwgc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZXMuZm9vdGVyID8gdGhpcy50ZW1wbGF0ZXMuZm9vdGVyKHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uczogc3VnZ2VzdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFzZXQ6IHRoaXMubmFtZVxuICAgICAgICAgICAgICAgIH0pIDogbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0SGVhZGVyOiBmdW5jdGlvbiBnZXRIZWFkZXIocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVzLmhlYWRlciA/IHRoaXMudGVtcGxhdGVzLmhlYWRlcih7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IHN1Z2dlc3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0OiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KSA6IG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Jlc2V0TGFzdFN1Z2dlc3Rpb246IGZ1bmN0aW9uIHJlc2V0TGFzdFN1Z2dlc3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbGFzdFN1Z2dlc3Rpb24gPSAkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luamVjdFF1ZXJ5OiBmdW5jdGlvbiBpbmplY3RRdWVyeShxdWVyeSwgb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uaXNPYmplY3Qob2JqKSA/IF8ubWl4aW4oe1xuICAgICAgICAgICAgICAgICAgICBfcXVlcnk6IHF1ZXJ5XG4gICAgICAgICAgICAgICAgfSwgb2JqKSA6IG9iajtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShxdWVyeSkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgY2FuY2VsZWQgPSBmYWxzZSwgc3luY0NhbGxlZCA9IGZhbHNlLCByZW5kZXJlZCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmNhbmNlbCA9ICQubm9vcDtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hc3luYyAmJiB0aGF0LnRyaWdnZXIoXCJhc3luY0NhbmNlbGVkXCIsIHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlKHF1ZXJ5LCBzeW5jLCBhc3luYyk7XG4gICAgICAgICAgICAgICAgIXN5bmNDYWxsZWQgJiYgc3luYyhbXSk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc3luYyhzdWdnZXN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3luY0NhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN5bmNDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9ucyA9IChzdWdnZXN0aW9ucyB8fCBbXSkuc2xpY2UoMCwgdGhhdC5saW1pdCk7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkID0gc3VnZ2VzdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9vdmVyd3JpdGUocXVlcnksIHN1Z2dlc3Rpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbmRlcmVkIDwgdGhhdC5saW1pdCAmJiB0aGF0LmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXIoXCJhc3luY1JlcXVlc3RlZFwiLCBxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYXN5bmMoc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW5jZWxlZCAmJiByZW5kZXJlZCA8IHRoYXQubGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuY2FuY2VsID0gJC5ub29wO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWQgKz0gc3VnZ2VzdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5fYXBwZW5kKHF1ZXJ5LCBzdWdnZXN0aW9ucy5zbGljZSgwLCB0aGF0LmxpbWl0IC0gcmVuZGVyZWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYXN5bmMgJiYgdGhhdC50cmlnZ2VyKFwiYXN5bmNSZWNlaXZlZFwiLCBxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsOiAkLm5vb3AsXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1wdHkoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcImNsZWFyZWRcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNFbXB0eTogZnVuY3Rpb24gaXNFbXB0eSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZWwuaXMoXCI6ZW1wdHlcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbCA9ICQoXCI8ZGl2PlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBEYXRhc2V0O1xuICAgICAgICBmdW5jdGlvbiBnZXREaXNwbGF5Rm4oZGlzcGxheSkge1xuICAgICAgICAgICAgZGlzcGxheSA9IGRpc3BsYXkgfHwgXy5zdHJpbmdpZnk7XG4gICAgICAgICAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKGRpc3BsYXkpID8gZGlzcGxheSA6IGRpc3BsYXlGbjtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRpc3BsYXlGbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqW2Rpc3BsYXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldFRlbXBsYXRlcyh0ZW1wbGF0ZXMsIGRpc3BsYXlGbikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBub3RGb3VuZDogdGVtcGxhdGVzLm5vdEZvdW5kICYmIF8udGVtcGxhdGlmeSh0ZW1wbGF0ZXMubm90Rm91bmQpLFxuICAgICAgICAgICAgICAgIHBlbmRpbmc6IHRlbXBsYXRlcy5wZW5kaW5nICYmIF8udGVtcGxhdGlmeSh0ZW1wbGF0ZXMucGVuZGluZyksXG4gICAgICAgICAgICAgICAgaGVhZGVyOiB0ZW1wbGF0ZXMuaGVhZGVyICYmIF8udGVtcGxhdGlmeSh0ZW1wbGF0ZXMuaGVhZGVyKSxcbiAgICAgICAgICAgICAgICBmb290ZXI6IHRlbXBsYXRlcy5mb290ZXIgJiYgXy50ZW1wbGF0aWZ5KHRlbXBsYXRlcy5mb290ZXIpLFxuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb246IHRlbXBsYXRlcy5zdWdnZXN0aW9uIHx8IHN1Z2dlc3Rpb25UZW1wbGF0ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Z2dlc3Rpb25UZW1wbGF0ZShjb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQoXCI8ZGl2PlwiKS50ZXh0KGRpc3BsYXlGbihjb250ZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gaXNWYWxpZE5hbWUoc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gL15bX2EtekEtWjAtOS1dKyQvLnRlc3Qoc3RyKTtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgTWVudSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgZnVuY3Rpb24gTWVudShvLCB3d3cpIHtcbiAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICAgICAgaWYgKCFvLm5vZGUpIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKFwibm9kZSBpcyByZXF1aXJlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHd3dy5taXhpbih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuJG5vZGUgPSAkKG8ubm9kZSk7XG4gICAgICAgICAgICB0aGlzLnF1ZXJ5ID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuZGF0YXNldHMgPSBfLm1hcChvLmRhdGFzZXRzLCBpbml0aWFsaXplRGF0YXNldCk7XG4gICAgICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplRGF0YXNldChvRGF0YXNldCkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gdGhhdC4kbm9kZS5maW5kKG9EYXRhc2V0Lm5vZGUpLmZpcnN0KCk7XG4gICAgICAgICAgICAgICAgb0RhdGFzZXQubm9kZSA9IG5vZGUubGVuZ3RoID8gbm9kZSA6ICQoXCI8ZGl2PlwiKS5hcHBlbmRUbyh0aGF0LiRub2RlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGFzZXQob0RhdGFzZXQsIHd3dyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXy5taXhpbihNZW51LnByb3RvdHlwZSwgRXZlbnRFbWl0dGVyLCB7XG4gICAgICAgICAgICBfb25TZWxlY3RhYmxlQ2xpY2s6IGZ1bmN0aW9uIG9uU2VsZWN0YWJsZUNsaWNrKCRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwic2VsZWN0YWJsZUNsaWNrZWRcIiwgJCgkZS5jdXJyZW50VGFyZ2V0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uUmVuZGVyZWQ6IGZ1bmN0aW9uIG9uUmVuZGVyZWQodHlwZSwgZGF0YXNldCwgc3VnZ2VzdGlvbnMsIGFzeW5jKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbm9kZS50b2dnbGVDbGFzcyh0aGlzLmNsYXNzZXMuZW1wdHksIHRoaXMuX2FsbERhdGFzZXRzRW1wdHkoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwiZGF0YXNldFJlbmRlcmVkXCIsIGRhdGFzZXQsIHN1Z2dlc3Rpb25zLCBhc3luYyk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uQ2xlYXJlZDogZnVuY3Rpb24gb25DbGVhcmVkKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUudG9nZ2xlQ2xhc3ModGhpcy5jbGFzc2VzLmVtcHR5LCB0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcImRhdGFzZXRDbGVhcmVkXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9wcm9wYWdhdGU6IGZ1bmN0aW9uIHByb3BhZ2F0ZSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYWxsRGF0YXNldHNFbXB0eTogZnVuY3Rpb24gYWxsRGF0YXNldHNFbXB0eSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5ldmVyeSh0aGlzLmRhdGFzZXRzLCBpc0RhdGFzZXRFbXB0eSk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gaXNEYXRhc2V0RW1wdHkoZGF0YXNldCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YXNldC5pc0VtcHR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRTZWxlY3RhYmxlczogZnVuY3Rpb24gZ2V0U2VsZWN0YWJsZXMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG5vZGUuZmluZCh0aGlzLnNlbGVjdG9ycy5zZWxlY3RhYmxlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfcmVtb3ZlQ3Vyc29yOiBmdW5jdGlvbiBfcmVtb3ZlQ3Vyc29yKCkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0YWJsZSA9IHRoaXMuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpO1xuICAgICAgICAgICAgICAgICRzZWxlY3RhYmxlICYmICRzZWxlY3RhYmxlLnJlbW92ZUNsYXNzKHRoaXMuY2xhc3Nlcy5jdXJzb3IpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9lbnN1cmVWaXNpYmxlOiBmdW5jdGlvbiBlbnN1cmVWaXNpYmxlKCRlbCkge1xuICAgICAgICAgICAgICAgIHZhciBlbFRvcCwgZWxCb3R0b20sIG5vZGVTY3JvbGxUb3AsIG5vZGVIZWlnaHQ7XG4gICAgICAgICAgICAgICAgZWxUb3AgPSAkZWwucG9zaXRpb24oKS50b3A7XG4gICAgICAgICAgICAgICAgZWxCb3R0b20gPSBlbFRvcCArICRlbC5vdXRlckhlaWdodCh0cnVlKTtcbiAgICAgICAgICAgICAgICBub2RlU2Nyb2xsVG9wID0gdGhpcy4kbm9kZS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgICAgICBub2RlSGVpZ2h0ID0gdGhpcy4kbm9kZS5oZWlnaHQoKSArIHBhcnNlSW50KHRoaXMuJG5vZGUuY3NzKFwicGFkZGluZ1RvcFwiKSwgMTApICsgcGFyc2VJbnQodGhpcy4kbm9kZS5jc3MoXCJwYWRkaW5nQm90dG9tXCIpLCAxMCk7XG4gICAgICAgICAgICAgICAgaWYgKGVsVG9wIDwgMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRub2RlLnNjcm9sbFRvcChub2RlU2Nyb2xsVG9wICsgZWxUb3ApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobm9kZUhlaWdodCA8IGVsQm90dG9tKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUuc2Nyb2xsVG9wKG5vZGVTY3JvbGxUb3AgKyAoZWxCb3R0b20gLSBub2RlSGVpZ2h0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJpbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgb25TZWxlY3RhYmxlQ2xpY2s7XG4gICAgICAgICAgICAgICAgb25TZWxlY3RhYmxlQ2xpY2sgPSBfLmJpbmQodGhpcy5fb25TZWxlY3RhYmxlQ2xpY2ssIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUub24oXCJjbGljay50dFwiLCB0aGlzLnNlbGVjdG9ycy5zZWxlY3RhYmxlLCBvblNlbGVjdGFibGVDbGljayk7XG4gICAgICAgICAgICAgICAgXy5lYWNoKHRoaXMuZGF0YXNldHMsIGZ1bmN0aW9uKGRhdGFzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldC5vblN5bmMoXCJhc3luY1JlcXVlc3RlZFwiLCB0aGF0Ll9wcm9wYWdhdGUsIHRoYXQpLm9uU3luYyhcImFzeW5jQ2FuY2VsZWRcIiwgdGhhdC5fcHJvcGFnYXRlLCB0aGF0KS5vblN5bmMoXCJhc3luY1JlY2VpdmVkXCIsIHRoYXQuX3Byb3BhZ2F0ZSwgdGhhdCkub25TeW5jKFwicmVuZGVyZWRcIiwgdGhhdC5fb25SZW5kZXJlZCwgdGhhdCkub25TeW5jKFwiY2xlYXJlZFwiLCB0aGF0Ll9vbkNsZWFyZWQsIHRoYXQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzT3BlbjogZnVuY3Rpb24gaXNPcGVuKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRub2RlLmhhc0NsYXNzKHRoaXMuY2xhc3Nlcy5vcGVuKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLm9wZW4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsb3NlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRub2RlLnJlbW92ZUNsYXNzKHRoaXMuY2xhc3Nlcy5vcGVuKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVDdXJzb3IoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRMYW5ndWFnZURpcmVjdGlvbjogZnVuY3Rpb24gc2V0TGFuZ3VhZ2VEaXJlY3Rpb24oZGlyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbm9kZS5hdHRyKFwiZGlyXCIsIGRpcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VsZWN0YWJsZVJlbGF0aXZlVG9DdXJzb3I6IGZ1bmN0aW9uIHNlbGVjdGFibGVSZWxhdGl2ZVRvQ3Vyc29yKGRlbHRhKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzZWxlY3RhYmxlcywgJG9sZEN1cnNvciwgb2xkSW5kZXgsIG5ld0luZGV4O1xuICAgICAgICAgICAgICAgICRvbGRDdXJzb3IgPSB0aGlzLmdldEFjdGl2ZVNlbGVjdGFibGUoKTtcbiAgICAgICAgICAgICAgICAkc2VsZWN0YWJsZXMgPSB0aGlzLl9nZXRTZWxlY3RhYmxlcygpO1xuICAgICAgICAgICAgICAgIG9sZEluZGV4ID0gJG9sZEN1cnNvciA/ICRzZWxlY3RhYmxlcy5pbmRleCgkb2xkQ3Vyc29yKSA6IC0xO1xuICAgICAgICAgICAgICAgIG5ld0luZGV4ID0gb2xkSW5kZXggKyBkZWx0YTtcbiAgICAgICAgICAgICAgICBuZXdJbmRleCA9IChuZXdJbmRleCArIDEpICUgKCRzZWxlY3RhYmxlcy5sZW5ndGggKyAxKSAtIDE7XG4gICAgICAgICAgICAgICAgbmV3SW5kZXggPSBuZXdJbmRleCA8IC0xID8gJHNlbGVjdGFibGVzLmxlbmd0aCAtIDEgOiBuZXdJbmRleDtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3SW5kZXggPT09IC0xID8gbnVsbCA6ICRzZWxlY3RhYmxlcy5lcShuZXdJbmRleCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0Q3Vyc29yOiBmdW5jdGlvbiBzZXRDdXJzb3IoJHNlbGVjdGFibGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW1vdmVDdXJzb3IoKTtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGVjdGFibGUgPSAkc2VsZWN0YWJsZSAmJiAkc2VsZWN0YWJsZS5maXJzdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICRzZWxlY3RhYmxlLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5jdXJzb3IpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbnN1cmVWaXNpYmxlKCRzZWxlY3RhYmxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0U2VsZWN0YWJsZURhdGE6IGZ1bmN0aW9uIGdldFNlbGVjdGFibGVEYXRhKCRlbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAkZWwgJiYgJGVsLmxlbmd0aCA/IERhdGFzZXQuZXh0cmFjdERhdGEoJGVsKSA6IG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0QWN0aXZlU2VsZWN0YWJsZTogZnVuY3Rpb24gZ2V0QWN0aXZlU2VsZWN0YWJsZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHNlbGVjdGFibGUgPSB0aGlzLl9nZXRTZWxlY3RhYmxlcygpLmZpbHRlcih0aGlzLnNlbGVjdG9ycy5jdXJzb3IpLmZpcnN0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRzZWxlY3RhYmxlLmxlbmd0aCA/ICRzZWxlY3RhYmxlIDogbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRUb3BTZWxlY3RhYmxlOiBmdW5jdGlvbiBnZXRUb3BTZWxlY3RhYmxlKCkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0YWJsZSA9IHRoaXMuX2dldFNlbGVjdGFibGVzKCkuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNlbGVjdGFibGUubGVuZ3RoID8gJHNlbGVjdGFibGUgOiBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzVmFsaWRVcGRhdGUgPSBxdWVyeSAhPT0gdGhpcy5xdWVyeTtcbiAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZFVwZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1ZXJ5ID0gcXVlcnk7XG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaCh0aGlzLmRhdGFzZXRzLCB1cGRhdGVEYXRhc2V0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWRVcGRhdGU7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlRGF0YXNldChkYXRhc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFzZXQudXBkYXRlKHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW1wdHk6IGZ1bmN0aW9uIGVtcHR5KCkge1xuICAgICAgICAgICAgICAgIF8uZWFjaCh0aGlzLmRhdGFzZXRzLCBjbGVhckRhdGFzZXQpO1xuICAgICAgICAgICAgICAgIHRoaXMucXVlcnkgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmVtcHR5KTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBjbGVhckRhdGFzZXQoZGF0YXNldCkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0LmNsZWFyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbm9kZS5vZmYoXCIudHRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy4kbm9kZSA9ICQoXCI8ZGl2PlwiKTtcbiAgICAgICAgICAgICAgICBfLmVhY2godGhpcy5kYXRhc2V0cywgZGVzdHJveURhdGFzZXQpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lEYXRhc2V0KGRhdGFzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIE1lbnU7XG4gICAgfSgpO1xuICAgIHZhciBEZWZhdWx0TWVudSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHMgPSBNZW51LnByb3RvdHlwZTtcbiAgICAgICAgZnVuY3Rpb24gRGVmYXVsdE1lbnUoKSB7XG4gICAgICAgICAgICBNZW51LmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICAgIH1cbiAgICAgICAgXy5taXhpbihEZWZhdWx0TWVudS5wcm90b3R5cGUsIE1lbnUucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICAgICAgICAgICF0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkgJiYgdGhpcy5fc2hvdygpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzLm9wZW4uYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGlkZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzLmNsb3NlLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uUmVuZGVyZWQ6IGZ1bmN0aW9uIG9uUmVuZGVyZWQoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2FsbERhdGFzZXRzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09wZW4oKSAmJiB0aGlzLl9zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzLl9vblJlbmRlcmVkLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uQ2xlYXJlZDogZnVuY3Rpb24gb25DbGVhcmVkKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGlkZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNPcGVuKCkgJiYgdGhpcy5fc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcy5fb25DbGVhcmVkLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0TGFuZ3VhZ2VEaXJlY3Rpb246IGZ1bmN0aW9uIHNldExhbmd1YWdlRGlyZWN0aW9uKGRpcikge1xuICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUuY3NzKGRpciA9PT0gXCJsdHJcIiA/IHRoaXMuY3NzLmx0ciA6IHRoaXMuY3NzLnJ0bCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHMuc2V0TGFuZ3VhZ2VEaXJlY3Rpb24uYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZTogZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRub2RlLmhpZGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvdzogZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRub2RlLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBEZWZhdWx0TWVudTtcbiAgICB9KCk7XG4gICAgdmFyIFR5cGVhaGVhZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgZnVuY3Rpb24gVHlwZWFoZWFkKG8sIHd3dykge1xuICAgICAgICAgICAgdmFyIG9uRm9jdXNlZCwgb25CbHVycmVkLCBvbkVudGVyS2V5ZWQsIG9uVGFiS2V5ZWQsIG9uRXNjS2V5ZWQsIG9uVXBLZXllZCwgb25Eb3duS2V5ZWQsIG9uTGVmdEtleWVkLCBvblJpZ2h0S2V5ZWQsIG9uUXVlcnlDaGFuZ2VkLCBvbldoaXRlc3BhY2VDaGFuZ2VkO1xuICAgICAgICAgICAgbyA9IG8gfHwge307XG4gICAgICAgICAgICBpZiAoIW8uaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKFwibWlzc2luZyBpbnB1dFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghby5tZW51KSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcihcIm1pc3NpbmcgbWVudVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghby5ldmVudEJ1cykge1xuICAgICAgICAgICAgICAgICQuZXJyb3IoXCJtaXNzaW5nIGV2ZW50IGJ1c1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHd3dy5taXhpbih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMgPSBvLmV2ZW50QnVzO1xuICAgICAgICAgICAgdGhpcy5taW5MZW5ndGggPSBfLmlzTnVtYmVyKG8ubWluTGVuZ3RoKSA/IG8ubWluTGVuZ3RoIDogMTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQgPSBvLmlucHV0O1xuICAgICAgICAgICAgdGhpcy5tZW51ID0gby5tZW51O1xuICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlucHV0Lmhhc0ZvY3VzKCkgJiYgdGhpcy5hY3RpdmF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5kaXIgPSB0aGlzLmlucHV0LmdldExhbmdEaXIoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhY2tzKCk7XG4gICAgICAgICAgICB0aGlzLm1lbnUuYmluZCgpLm9uU3luYyhcInNlbGVjdGFibGVDbGlja2VkXCIsIHRoaXMuX29uU2VsZWN0YWJsZUNsaWNrZWQsIHRoaXMpLm9uU3luYyhcImFzeW5jUmVxdWVzdGVkXCIsIHRoaXMuX29uQXN5bmNSZXF1ZXN0ZWQsIHRoaXMpLm9uU3luYyhcImFzeW5jQ2FuY2VsZWRcIiwgdGhpcy5fb25Bc3luY0NhbmNlbGVkLCB0aGlzKS5vblN5bmMoXCJhc3luY1JlY2VpdmVkXCIsIHRoaXMuX29uQXN5bmNSZWNlaXZlZCwgdGhpcykub25TeW5jKFwiZGF0YXNldFJlbmRlcmVkXCIsIHRoaXMuX29uRGF0YXNldFJlbmRlcmVkLCB0aGlzKS5vblN5bmMoXCJkYXRhc2V0Q2xlYXJlZFwiLCB0aGlzLl9vbkRhdGFzZXRDbGVhcmVkLCB0aGlzKTtcbiAgICAgICAgICAgIG9uRm9jdXNlZCA9IGModGhpcywgXCJhY3RpdmF0ZVwiLCBcIm9wZW5cIiwgXCJfb25Gb2N1c2VkXCIpO1xuICAgICAgICAgICAgb25CbHVycmVkID0gYyh0aGlzLCBcImRlYWN0aXZhdGVcIiwgXCJfb25CbHVycmVkXCIpO1xuICAgICAgICAgICAgb25FbnRlcktleWVkID0gYyh0aGlzLCBcImlzQWN0aXZlXCIsIFwiaXNPcGVuXCIsIFwiX29uRW50ZXJLZXllZFwiKTtcbiAgICAgICAgICAgIG9uVGFiS2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJpc09wZW5cIiwgXCJfb25UYWJLZXllZFwiKTtcbiAgICAgICAgICAgIG9uRXNjS2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJfb25Fc2NLZXllZFwiKTtcbiAgICAgICAgICAgIG9uVXBLZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcIm9wZW5cIiwgXCJfb25VcEtleWVkXCIpO1xuICAgICAgICAgICAgb25Eb3duS2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJvcGVuXCIsIFwiX29uRG93bktleWVkXCIpO1xuICAgICAgICAgICAgb25MZWZ0S2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJpc09wZW5cIiwgXCJfb25MZWZ0S2V5ZWRcIik7XG4gICAgICAgICAgICBvblJpZ2h0S2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJpc09wZW5cIiwgXCJfb25SaWdodEtleWVkXCIpO1xuICAgICAgICAgICAgb25RdWVyeUNoYW5nZWQgPSBjKHRoaXMsIFwiX29wZW5JZkFjdGl2ZVwiLCBcIl9vblF1ZXJ5Q2hhbmdlZFwiKTtcbiAgICAgICAgICAgIG9uV2hpdGVzcGFjZUNoYW5nZWQgPSBjKHRoaXMsIFwiX29wZW5JZkFjdGl2ZVwiLCBcIl9vbldoaXRlc3BhY2VDaGFuZ2VkXCIpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5iaW5kKCkub25TeW5jKFwiZm9jdXNlZFwiLCBvbkZvY3VzZWQsIHRoaXMpLm9uU3luYyhcImJsdXJyZWRcIiwgb25CbHVycmVkLCB0aGlzKS5vblN5bmMoXCJlbnRlcktleWVkXCIsIG9uRW50ZXJLZXllZCwgdGhpcykub25TeW5jKFwidGFiS2V5ZWRcIiwgb25UYWJLZXllZCwgdGhpcykub25TeW5jKFwiZXNjS2V5ZWRcIiwgb25Fc2NLZXllZCwgdGhpcykub25TeW5jKFwidXBLZXllZFwiLCBvblVwS2V5ZWQsIHRoaXMpLm9uU3luYyhcImRvd25LZXllZFwiLCBvbkRvd25LZXllZCwgdGhpcykub25TeW5jKFwibGVmdEtleWVkXCIsIG9uTGVmdEtleWVkLCB0aGlzKS5vblN5bmMoXCJyaWdodEtleWVkXCIsIG9uUmlnaHRLZXllZCwgdGhpcykub25TeW5jKFwicXVlcnlDaGFuZ2VkXCIsIG9uUXVlcnlDaGFuZ2VkLCB0aGlzKS5vblN5bmMoXCJ3aGl0ZXNwYWNlQ2hhbmdlZFwiLCBvbldoaXRlc3BhY2VDaGFuZ2VkLCB0aGlzKS5vblN5bmMoXCJsYW5nRGlyQ2hhbmdlZFwiLCB0aGlzLl9vbkxhbmdEaXJDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKFR5cGVhaGVhZC5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIF9oYWNrczogZnVuY3Rpb24gaGFja3MoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRpbnB1dCwgJG1lbnU7XG4gICAgICAgICAgICAgICAgJGlucHV0ID0gdGhpcy5pbnB1dC4kaW5wdXQgfHwgJChcIjxkaXY+XCIpO1xuICAgICAgICAgICAgICAgICRtZW51ID0gdGhpcy5tZW51LiRub2RlIHx8ICQoXCI8ZGl2PlwiKTtcbiAgICAgICAgICAgICAgICAkaW5wdXQub24oXCJibHVyLnR0XCIsIGZ1bmN0aW9uKCRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmUsIGlzQWN0aXZlLCBoYXNBY3RpdmU7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlID0gJG1lbnUuaXMoYWN0aXZlKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzQWN0aXZlID0gJG1lbnUuaGFzKGFjdGl2ZSkubGVuZ3RoID4gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNNc2llKCkgJiYgKGlzQWN0aXZlIHx8IGhhc0FjdGl2ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRtZW51Lm9uKFwibW91c2Vkb3duLnR0XCIsIGZ1bmN0aW9uKCRlKSB7XG4gICAgICAgICAgICAgICAgICAgICRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uU2VsZWN0YWJsZUNsaWNrZWQ6IGZ1bmN0aW9uIG9uU2VsZWN0YWJsZUNsaWNrZWQodHlwZSwgJGVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoJGVsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25EYXRhc2V0Q2xlYXJlZDogZnVuY3Rpb24gb25EYXRhc2V0Q2xlYXJlZCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVIaW50KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRGF0YXNldFJlbmRlcmVkOiBmdW5jdGlvbiBvbkRhdGFzZXRSZW5kZXJlZCh0eXBlLCBkYXRhc2V0LCBzdWdnZXN0aW9ucywgYXN5bmMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVIaW50KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwicmVuZGVyXCIsIHN1Z2dlc3Rpb25zLCBhc3luYywgZGF0YXNldCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uQXN5bmNSZXF1ZXN0ZWQ6IGZ1bmN0aW9uIG9uQXN5bmNSZXF1ZXN0ZWQodHlwZSwgZGF0YXNldCwgcXVlcnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJhc3luY3JlcXVlc3RcIiwgcXVlcnksIGRhdGFzZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkFzeW5jQ2FuY2VsZWQ6IGZ1bmN0aW9uIG9uQXN5bmNDYW5jZWxlZCh0eXBlLCBkYXRhc2V0LCBxdWVyeSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcImFzeW5jY2FuY2VsXCIsIHF1ZXJ5LCBkYXRhc2V0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25Bc3luY1JlY2VpdmVkOiBmdW5jdGlvbiBvbkFzeW5jUmVjZWl2ZWQodHlwZSwgZGF0YXNldCwgcXVlcnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJhc3luY3JlY2VpdmVcIiwgcXVlcnksIGRhdGFzZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkZvY3VzZWQ6IGZ1bmN0aW9uIG9uRm9jdXNlZCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5MZW5ndGhNZXQoKSAmJiB0aGlzLm1lbnUudXBkYXRlKHRoaXMuaW5wdXQuZ2V0UXVlcnkoKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uQmx1cnJlZDogZnVuY3Rpb24gb25CbHVycmVkKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlucHV0Lmhhc1F1ZXJ5Q2hhbmdlZFNpbmNlTGFzdEZvY3VzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiY2hhbmdlXCIsIHRoaXMuaW5wdXQuZ2V0UXVlcnkoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkVudGVyS2V5ZWQ6IGZ1bmN0aW9uIG9uRW50ZXJLZXllZCh0eXBlLCAkZSkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0YWJsZTtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGVjdGFibGUgPSB0aGlzLm1lbnUuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KCRzZWxlY3RhYmxlKSAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25UYWJLZXllZDogZnVuY3Rpb24gb25UYWJLZXllZCh0eXBlLCAkZSkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0YWJsZTtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGVjdGFibGUgPSB0aGlzLm1lbnUuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KCRzZWxlY3RhYmxlKSAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHNlbGVjdGFibGUgPSB0aGlzLm1lbnUuZ2V0VG9wU2VsZWN0YWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlKCRzZWxlY3RhYmxlKSAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25Fc2NLZXllZDogZnVuY3Rpb24gb25Fc2NLZXllZCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uVXBLZXllZDogZnVuY3Rpb24gb25VcEtleWVkKCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvcigtMSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRG93bktleWVkOiBmdW5jdGlvbiBvbkRvd25LZXllZCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3IoKzEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkxlZnRLZXllZDogZnVuY3Rpb24gb25MZWZ0S2V5ZWQoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlyID09PSBcInJ0bFwiICYmIHRoaXMuaW5wdXQuaXNDdXJzb3JBdEVuZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlKHRoaXMubWVudS5nZXRUb3BTZWxlY3RhYmxlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25SaWdodEtleWVkOiBmdW5jdGlvbiBvblJpZ2h0S2V5ZWQoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlyID09PSBcImx0clwiICYmIHRoaXMuaW5wdXQuaXNDdXJzb3JBdEVuZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlKHRoaXMubWVudS5nZXRUb3BTZWxlY3RhYmxlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25RdWVyeUNoYW5nZWQ6IGZ1bmN0aW9uIG9uUXVlcnlDaGFuZ2VkKGUsIHF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWluTGVuZ3RoTWV0KHF1ZXJ5KSA/IHRoaXMubWVudS51cGRhdGUocXVlcnkpIDogdGhpcy5tZW51LmVtcHR5KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uV2hpdGVzcGFjZUNoYW5nZWQ6IGZ1bmN0aW9uIG9uV2hpdGVzcGFjZUNoYW5nZWQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlSGludCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkxhbmdEaXJDaGFuZ2VkOiBmdW5jdGlvbiBvbkxhbmdEaXJDaGFuZ2VkKGUsIGRpcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpciAhPT0gZGlyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlyID0gZGlyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbnUuc2V0TGFuZ3VhZ2VEaXJlY3Rpb24oZGlyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29wZW5JZkFjdGl2ZTogZnVuY3Rpb24gb3BlbklmQWN0aXZlKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUoKSAmJiB0aGlzLm9wZW4oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfbWluTGVuZ3RoTWV0OiBmdW5jdGlvbiBtaW5MZW5ndGhNZXQocXVlcnkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IF8uaXNTdHJpbmcocXVlcnkpID8gcXVlcnkgOiB0aGlzLmlucHV0LmdldFF1ZXJ5KCkgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnkubGVuZ3RoID49IHRoaXMubWluTGVuZ3RoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF91cGRhdGVIaW50OiBmdW5jdGlvbiB1cGRhdGVIaW50KCkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0YWJsZSwgZGF0YSwgdmFsLCBxdWVyeSwgZXNjYXBlZFF1ZXJ5LCBmcm9udE1hdGNoUmVnRXgsIG1hdGNoO1xuICAgICAgICAgICAgICAgICRzZWxlY3RhYmxlID0gdGhpcy5tZW51LmdldFRvcFNlbGVjdGFibGUoKTtcbiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5tZW51LmdldFNlbGVjdGFibGVEYXRhKCRzZWxlY3RhYmxlKTtcbiAgICAgICAgICAgICAgICB2YWwgPSB0aGlzLmlucHV0LmdldElucHV0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiAhXy5pc0JsYW5rU3RyaW5nKHZhbCkgJiYgIXRoaXMuaW5wdXQuaGFzT3ZlcmZsb3coKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IElucHV0Lm5vcm1hbGl6ZVF1ZXJ5KHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIGVzY2FwZWRRdWVyeSA9IF8uZXNjYXBlUmVnRXhDaGFycyhxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIGZyb250TWF0Y2hSZWdFeCA9IG5ldyBSZWdFeHAoXCJeKD86XCIgKyBlc2NhcGVkUXVlcnkgKyBcIikoLiskKVwiLCBcImlcIik7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoID0gZnJvbnRNYXRjaFJlZ0V4LmV4ZWMoZGF0YS52YWwpO1xuICAgICAgICAgICAgICAgICAgICBtYXRjaCAmJiB0aGlzLmlucHV0LnNldEhpbnQodmFsICsgbWF0Y2hbMV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQuY2xlYXJIaW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzRW5hYmxlZDogZnVuY3Rpb24gaXNFbmFibGVkKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuYWJsZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzQWN0aXZlOiBmdW5jdGlvbiBpc0FjdGl2ZSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWN0aXZhdGU6IGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pc0VuYWJsZWQoKSB8fCB0aGlzLmV2ZW50QnVzLmJlZm9yZShcImFjdGl2ZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWFjdGl2YXRlOiBmdW5jdGlvbiBkZWFjdGl2YXRlKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5ldmVudEJ1cy5iZWZvcmUoXCJpZGxlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcImlkbGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc09wZW46IGZ1bmN0aW9uIGlzT3BlbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tZW51LmlzT3BlbigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzT3BlbigpICYmICF0aGlzLmV2ZW50QnVzLmJlZm9yZShcIm9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW51Lm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlSGludCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJvcGVuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc09wZW4oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKCkgJiYgIXRoaXMuZXZlbnRCdXMuYmVmb3JlKFwiY2xvc2VcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW51LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQuY2xlYXJIaW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQucmVzZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcImNsb3NlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuaXNPcGVuKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0VmFsOiBmdW5jdGlvbiBzZXRWYWwodmFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5zZXRRdWVyeShfLnRvU3RyKHZhbCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFZhbDogZnVuY3Rpb24gZ2V0VmFsKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlucHV0LmdldFF1ZXJ5KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QoJHNlbGVjdGFibGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMubWVudS5nZXRTZWxlY3RhYmxlRGF0YSgkc2VsZWN0YWJsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgIXRoaXMuZXZlbnRCdXMuYmVmb3JlKFwic2VsZWN0XCIsIGRhdGEub2JqKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0LnNldFF1ZXJ5KGRhdGEudmFsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwic2VsZWN0XCIsIGRhdGEub2JqKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogZnVuY3Rpb24gYXV0b2NvbXBsZXRlKCRzZWxlY3RhYmxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5LCBkYXRhLCBpc1ZhbGlkO1xuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gdGhpcy5pbnB1dC5nZXRRdWVyeSgpO1xuICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLm1lbnUuZ2V0U2VsZWN0YWJsZURhdGEoJHNlbGVjdGFibGUpO1xuICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBkYXRhICYmIHF1ZXJ5ICE9PSBkYXRhLnZhbDtcbiAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZCAmJiAhdGhpcy5ldmVudEJ1cy5iZWZvcmUoXCJhdXRvY29tcGxldGVcIiwgZGF0YS5vYmopKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQuc2V0UXVlcnkoZGF0YS52YWwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJhdXRvY29tcGxldGVcIiwgZGF0YS5vYmopO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vdmVDdXJzb3I6IGZ1bmN0aW9uIG1vdmVDdXJzb3IoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnksICRjYW5kaWRhdGUsIGRhdGEsIHBheWxvYWQsIGNhbmNlbE1vdmU7XG4gICAgICAgICAgICAgICAgcXVlcnkgPSB0aGlzLmlucHV0LmdldFF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgJGNhbmRpZGF0ZSA9IHRoaXMubWVudS5zZWxlY3RhYmxlUmVsYXRpdmVUb0N1cnNvcihkZWx0YSk7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMubWVudS5nZXRTZWxlY3RhYmxlRGF0YSgkY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICBwYXlsb2FkID0gZGF0YSA/IGRhdGEub2JqIDogbnVsbDtcbiAgICAgICAgICAgICAgICBjYW5jZWxNb3ZlID0gdGhpcy5fbWluTGVuZ3RoTWV0KCkgJiYgdGhpcy5tZW51LnVwZGF0ZShxdWVyeSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjYW5jZWxNb3ZlICYmICF0aGlzLmV2ZW50QnVzLmJlZm9yZShcImN1cnNvcmNoYW5nZVwiLCBwYXlsb2FkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbnUuc2V0Q3Vyc29yKCRjYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5zZXRJbnB1dFZhbHVlKGRhdGEudmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQucmVzZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVIaW50KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiY3Vyc29yY2hhbmdlXCIsIHBheWxvYWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBUeXBlYWhlYWQ7XG4gICAgICAgIGZ1bmN0aW9uIGMoY3R4KSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICBfLmVhY2gobWV0aG9kcywgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHhbbWV0aG9kXS5hcHBseShjdHgsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgb2xkLCBrZXlzLCBtZXRob2RzO1xuICAgICAgICBvbGQgPSAkLmZuLnR5cGVhaGVhZDtcbiAgICAgICAga2V5cyA9IHtcbiAgICAgICAgICAgIHd3dzogXCJ0dC13d3dcIixcbiAgICAgICAgICAgIGF0dHJzOiBcInR0LWF0dHJzXCIsXG4gICAgICAgICAgICB0eXBlYWhlYWQ6IFwidHQtdHlwZWFoZWFkXCJcbiAgICAgICAgfTtcbiAgICAgICAgbWV0aG9kcyA9IHtcbiAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobywgZGF0YXNldHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgd3d3O1xuICAgICAgICAgICAgICAgIGRhdGFzZXRzID0gXy5pc0FycmF5KGRhdGFzZXRzKSA/IGRhdGFzZXRzIDogW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICAgICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICAgICAgICAgIHd3dyA9IFdXVyhvLmNsYXNzTmFtZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goYXR0YWNoKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhdHRhY2goKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkaW5wdXQsICR3cmFwcGVyLCAkaGludCwgJG1lbnUsIGRlZmF1bHRIaW50LCBkZWZhdWx0TWVudSwgZXZlbnRCdXMsIGlucHV0LCBtZW51LCB0eXBlYWhlYWQsIE1lbnVDb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKGRhdGFzZXRzLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLmhpZ2hsaWdodCA9ICEhby5oaWdobGlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkaW5wdXQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAkd3JhcHBlciA9ICQod3d3Lmh0bWwud3JhcHBlcik7XG4gICAgICAgICAgICAgICAgICAgICRoaW50ID0gJGVsT3JOdWxsKG8uaGludCk7XG4gICAgICAgICAgICAgICAgICAgICRtZW51ID0gJGVsT3JOdWxsKG8ubWVudSk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRIaW50ID0gby5oaW50ICE9PSBmYWxzZSAmJiAhJGhpbnQ7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZW51ID0gby5tZW51ICE9PSBmYWxzZSAmJiAhJG1lbnU7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRIaW50ICYmICgkaGludCA9IGJ1aWxkSGludEZyb21JbnB1dCgkaW5wdXQsIHd3dykpO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVudSAmJiAoJG1lbnUgPSAkKHd3dy5odG1sLm1lbnUpLmNzcyh3d3cuY3NzLm1lbnUpKTtcbiAgICAgICAgICAgICAgICAgICAgJGhpbnQgJiYgJGhpbnQudmFsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAkaW5wdXQgPSBwcmVwSW5wdXQoJGlucHV0LCB3d3cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdEhpbnQgfHwgZGVmYXVsdE1lbnUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR3cmFwcGVyLmNzcyh3d3cuY3NzLndyYXBwZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGlucHV0LmNzcyhkZWZhdWx0SGludCA/IHd3dy5jc3MuaW5wdXQgOiB3d3cuY3NzLmlucHV0V2l0aE5vSGludCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5wdXQud3JhcCgkd3JhcHBlcikucGFyZW50KCkucHJlcGVuZChkZWZhdWx0SGludCA/ICRoaW50IDogbnVsbCkuYXBwZW5kKGRlZmF1bHRNZW51ID8gJG1lbnUgOiBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBNZW51Q29uc3RydWN0b3IgPSBkZWZhdWx0TWVudSA/IERlZmF1bHRNZW51IDogTWVudTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZWw6ICRpbnB1dFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBuZXcgSW5wdXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaGludDogJGhpbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogJGlucHV0XG4gICAgICAgICAgICAgICAgICAgIH0sIHd3dyk7XG4gICAgICAgICAgICAgICAgICAgIG1lbnUgPSBuZXcgTWVudUNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6ICRtZW51LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldHM6IGRhdGFzZXRzXG4gICAgICAgICAgICAgICAgICAgIH0sIHd3dyk7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVhaGVhZCA9IG5ldyBUeXBlYWhlYWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGlucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudTogbWVudSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QnVzOiBldmVudEJ1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogby5taW5MZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgfSwgd3d3KTtcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0LmRhdGEoa2V5cy53d3csIHd3dyk7XG4gICAgICAgICAgICAgICAgICAgICRpbnB1dC5kYXRhKGtleXMudHlwZWFoZWFkLCB0eXBlYWhlYWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0VuYWJsZWQ6IGZ1bmN0aW9uIGlzRW5hYmxlZCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZW5hYmxlZDtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQgPSB0LmlzRW5hYmxlZCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbmFibGVkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVuYWJsZTogZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgICAgICAgICAgICAgIHR0RWFjaCh0aGlzLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHQuZW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICB0LmRpc2FibGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0FjdGl2ZTogZnVuY3Rpb24gaXNBY3RpdmUoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZTtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IHQuaXNBY3RpdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aXZlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFjdGl2YXRlOiBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICB0LmFjdGl2YXRlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24gZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICB0LmRlYWN0aXZhdGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc09wZW46IGZ1bmN0aW9uIGlzT3BlbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3BlbjtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW4gPSB0LmlzT3BlbigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBvcGVuO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgICAgICAgICAgdHRFYWNoKHRoaXMsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdC5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICAgICAgICAgIHR0RWFjaCh0aGlzLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uIHNlbGVjdChlbCkge1xuICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gZmFsc2UsICRlbCA9ICQoZWwpO1xuICAgICAgICAgICAgICAgIHR0RWFjaCh0aGlzLmZpcnN0KCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IHQuc2VsZWN0KCRlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiBmdW5jdGlvbiBhdXRvY29tcGxldGUoZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlLCAkZWwgPSAkKGVsKTtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSB0LmF1dG9jb21wbGV0ZSgkZWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vdmVDdXJzb3I6IGZ1bmN0aW9uIG1vdmVDdXJzb2UoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHR0RWFjaCh0aGlzLmZpcnN0KCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IHQubW92ZUN1cnNvcihkZWx0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsOiBmdW5jdGlvbiB2YWwobmV3VmFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5O1xuICAgICAgICAgICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHQuZ2V0VmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHRFYWNoKHRoaXMsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuc2V0VmFsKG5ld1ZhbCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24odHlwZWFoZWFkLCAkaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0KCRpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVhaGVhZC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgICQuZm4udHlwZWFoZWFkID0gZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgICBpZiAobWV0aG9kc1ttZXRob2RdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHNbbWV0aG9kXS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgICQuZm4udHlwZWFoZWFkLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgICAgICAgICAgJC5mbi50eXBlYWhlYWQgPSBvbGQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gdHRFYWNoKCRlbHMsIGZuKSB7XG4gICAgICAgICAgICAkZWxzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyksIHR5cGVhaGVhZDtcbiAgICAgICAgICAgICAgICAodHlwZWFoZWFkID0gJGlucHV0LmRhdGEoa2V5cy50eXBlYWhlYWQpKSAmJiBmbih0eXBlYWhlYWQsICRpbnB1dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBidWlsZEhpbnRGcm9tSW5wdXQoJGlucHV0LCB3d3cpIHtcbiAgICAgICAgICAgIHJldHVybiAkaW5wdXQuY2xvbmUoKS5hZGRDbGFzcyh3d3cuY2xhc3Nlcy5oaW50KS5yZW1vdmVEYXRhKCkuY3NzKHd3dy5jc3MuaGludCkuY3NzKGdldEJhY2tncm91bmRTdHlsZXMoJGlucHV0KSkucHJvcChcInJlYWRvbmx5XCIsIHRydWUpLnJlbW92ZUF0dHIoXCJpZCBuYW1lIHBsYWNlaG9sZGVyIHJlcXVpcmVkXCIpLmF0dHIoe1xuICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogXCJvZmZcIixcbiAgICAgICAgICAgICAgICBzcGVsbGNoZWNrOiBcImZhbHNlXCIsXG4gICAgICAgICAgICAgICAgdGFiaW5kZXg6IC0xXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBwcmVwSW5wdXQoJGlucHV0LCB3d3cpIHtcbiAgICAgICAgICAgICRpbnB1dC5kYXRhKGtleXMuYXR0cnMsIHtcbiAgICAgICAgICAgICAgICBkaXI6ICRpbnB1dC5hdHRyKFwiZGlyXCIpLFxuICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogJGlucHV0LmF0dHIoXCJhdXRvY29tcGxldGVcIiksXG4gICAgICAgICAgICAgICAgc3BlbGxjaGVjazogJGlucHV0LmF0dHIoXCJzcGVsbGNoZWNrXCIpLFxuICAgICAgICAgICAgICAgIHN0eWxlOiAkaW5wdXQuYXR0cihcInN0eWxlXCIpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRpbnB1dC5hZGRDbGFzcyh3d3cuY2xhc3Nlcy5pbnB1dCkuYXR0cih7XG4gICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiBcIm9mZlwiLFxuICAgICAgICAgICAgICAgIHNwZWxsY2hlY2s6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgISRpbnB1dC5hdHRyKFwiZGlyXCIpICYmICRpbnB1dC5hdHRyKFwiZGlyXCIsIFwiYXV0b1wiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICByZXR1cm4gJGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldEJhY2tncm91bmRTdHlsZXMoJGVsKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRBdHRhY2htZW50OiAkZWwuY3NzKFwiYmFja2dyb3VuZC1hdHRhY2htZW50XCIpLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDbGlwOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1jbGlwXCIpLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJGVsLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiksXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiKSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kT3JpZ2luOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1vcmlnaW5cIiksXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1wb3NpdGlvblwiKSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAkZWwuY3NzKFwiYmFja2dyb3VuZC1yZXBlYXRcIiksXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZFNpemU6ICRlbC5jc3MoXCJiYWNrZ3JvdW5kLXNpemVcIilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcmV2ZXJ0KCRpbnB1dCkge1xuICAgICAgICAgICAgdmFyIHd3dywgJHdyYXBwZXI7XG4gICAgICAgICAgICB3d3cgPSAkaW5wdXQuZGF0YShrZXlzLnd3dyk7XG4gICAgICAgICAgICAkd3JhcHBlciA9ICRpbnB1dC5wYXJlbnQoKS5maWx0ZXIod3d3LnNlbGVjdG9ycy53cmFwcGVyKTtcbiAgICAgICAgICAgIF8uZWFjaCgkaW5wdXQuZGF0YShrZXlzLmF0dHJzKSwgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBfLmlzVW5kZWZpbmVkKHZhbCkgPyAkaW5wdXQucmVtb3ZlQXR0cihrZXkpIDogJGlucHV0LmF0dHIoa2V5LCB2YWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkaW5wdXQucmVtb3ZlRGF0YShrZXlzLnR5cGVhaGVhZCkucmVtb3ZlRGF0YShrZXlzLnd3dykucmVtb3ZlRGF0YShrZXlzLmF0dHIpLnJlbW92ZUNsYXNzKHd3dy5jbGFzc2VzLmlucHV0KTtcbiAgICAgICAgICAgIGlmICgkd3JhcHBlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkaW5wdXQuZGV0YWNoKCkuaW5zZXJ0QWZ0ZXIoJHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgICR3cmFwcGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uICRlbE9yTnVsbChvYmopIHtcbiAgICAgICAgICAgIHZhciBpc1ZhbGlkLCAkZWw7XG4gICAgICAgICAgICBpc1ZhbGlkID0gXy5pc0pRdWVyeShvYmopIHx8IF8uaXNFbGVtZW50KG9iaik7XG4gICAgICAgICAgICAkZWwgPSBpc1ZhbGlkID8gJChvYmopLmZpcnN0KCkgOiBbXTtcbiAgICAgICAgICAgIHJldHVybiAkZWwubGVuZ3RoID8gJGVsIDogbnVsbDtcbiAgICAgICAgfVxuICAgIH0pKCk7XG59KTsiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbndpbmRvdy5wcm9qNCA9IHJlcXVpcmUoJ3Byb2o0Jyk7XHJcbmdsb2JhbC5qUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vc3JjL3ZpZXdlcicpO1xyXG52YXIgbWFwTG9hZGVyID0gcmVxdWlyZSgnLi9zcmMvbWFwbG9hZGVyJyk7XHJcbnZhciBjb250cm9sSW5pdGlhbGlzZXIgPSByZXF1aXJlKCcuL3NyYy9jb250cm9saW5pdGlhbGlzZXInKTtcclxuXHJcbnZhciBvcmlnbyA9IHt9O1xyXG5vcmlnby5tYXAgPSB7fTtcclxub3JpZ28uY29uZmlnID0gcmVxdWlyZSgnLi9jb25mL29yaWdvQ29uZmlnJyk7XHJcbm9yaWdvLmNvbnRyb2xzID0gcmVxdWlyZSgnLi9jb25mL29yaWdvQ29udHJvbHMnKTtcclxuXHJcbm9yaWdvLm1hcC5pbml0ID0gZnVuY3Rpb24ob3B0aW9ucywgb3B0X2NvbmZpZykge1xyXG4gIHZhciBjb25maWcgPSBvcHRfY29uZmlnID8gJC5leHRlbmQob3JpZ28uY29uZmlnLCBvcHRfY29uZmlnKSA6IG9yaWdvLmNvbmZpZztcclxuXHJcbiAgdmFyIG1hcCA9IG1hcExvYWRlcihvcHRpb25zLCBjb25maWcpO1xyXG4gIGlmIChtYXApIHtcclxuICAgIG1hcC50aGVuKGZ1bmN0aW9uKGNvbmZpZykge1xyXG4gICAgICBpbml0KGNvbmZpZyk7XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIFZpZXdlcjtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXQoY29uZmlnKSB7XHJcbiAgVmlld2VyLmluaXQoY29uZmlnLmVsLCBjb25maWcub3B0aW9ucyk7XHJcblxyXG4gIC8vSW5pdCBjb250cm9sc1xyXG4gIGNvbnRyb2xJbml0aWFsaXNlcihjb25maWcub3B0aW9ucy5jb250cm9scyk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gb3JpZ287XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgTW9kYWwgPSByZXF1aXJlKCcuL21vZGFsJyk7XG5cbnZhciAkYWJvdXRCdXR0b247XG52YXIgYnV0dG9uVGV4dDtcbnZhciB0aXRsZTtcbnZhciBjb250ZW50O1xuXG5mdW5jdGlvbiBpbml0KG9wdF9vcHRpb25zKSB7XG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gIGJ1dHRvblRleHQgPSBvcHRpb25zLmJ1dHRvbnRleHQgfHwgJ09tIGthcnRhbic7XG4gIHRpdGxlID0gb3B0aW9ucy50aXRsZSB8fCAnT20ga2FydGFuJztcbiAgY29udGVudCA9IG9wdGlvbnMuY29udGVudCB8fCAnPHA+PC9wPic7XG5cbiAgcmVuZGVyKCk7XG4gIGJpbmRVSUFjdGlvbnMoKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyKCkge1xuICB2YXIgZWwgPSBVdGlscy5jcmVhdGVMaXN0QnV0dG9uKHtcbiAgICBpZDogJ28tYWJvdXQnLFxuICAgIGljb25DbHM6ICdvLWljb24tZmEtaW5mby1jaXJjbGUnLFxuICAgIHNyYzogJ2Nzcy9zdmcvZmEtaWNvbnMuc3ZnI2ZhLWluZm8tY2lyY2xlJyxcbiAgICB0ZXh0OiBidXR0b25UZXh0XG4gIH0pO1xuICAkKCcjby1tZW51dG9vbHMnKS5hcHBlbmQoZWwpO1xuICAkYWJvdXRCdXR0b24gPSAkKCcjby1hYm91dC1idXR0b24nKTtcbn1cblxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcbiAgJGFib3V0QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBNb2RhbC5jcmVhdGVNb2RhbCgnI28tbWFwJywge1xuICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgY29udGVudDogY29udGVudFxuICAgIH0pO1xuXG4gICAgTW9kYWwuc2hvd01vZGFsKCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcblxyXG52YXIgbWFwO1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIGJyZWFrUG9pbnQgPSBvcHRpb25zLmJyZWFrUG9pbnQgfHwgWzc2OCwgNTAwXTtcclxuICB2YXIgYXR0cmlidXRpb247XHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG5cclxuICBhdHRyaWJ1dGlvbiA9IG5ldyBvbC5jb250cm9sLkF0dHJpYnV0aW9uKHtcclxuICAgIGNvbGxhcHNpYmxlOiBmYWxzZVxyXG4gIH0pO1xyXG5cclxuICBtYXAuYWRkQ29udHJvbChhdHRyaWJ1dGlvbik7XHJcblxyXG4gICQod2luZG93KS5vbigncmVzaXplJywgY2hlY2tTaXplKTtcclxuICBjaGVja1NpemUoKTtcclxuXHJcbiAgZnVuY3Rpb24gY2hlY2tTaXplKCkge1xyXG4gICAgdmFyIG1hcFNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xyXG4gICAgdmFyIGNvbGxhcHNlZCA9IChtYXBTaXplWzBdIDw9IGJyZWFrUG9pbnRbMF0gfHwgbWFwU2l6ZVsxXSA8PSBicmVha1BvaW50WzFdKTtcclxuICAgIGF0dHJpYnV0aW9uLnNldENvbGxhcHNpYmxlKGNvbGxhcHNlZCk7XHJcbiAgICBhdHRyaWJ1dGlvbi5zZXRDb2xsYXBzZWQoY29sbGFwc2VkKTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiPHN2ZyB3aWR0aD0nMzJweCcgaGVpZ2h0PSczMnB4JyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCAxMDAgMTAwXFxcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVxcXCJ4TWlkWU1pZFxcXCIgY2xhc3M9XFxcInVpbC1yaXBwbGVcXFwiPlxcclxcbiAgPHJlY3QgeD1cXFwiMFxcXCIgeT1cXFwiMFxcXCIgd2lkdGg9XFxcIjEwMFxcXCIgaGVpZ2h0PVxcXCIxMDBcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIGNsYXNzPVxcXCJia1xcXCI+PC9yZWN0PlxcclxcbiAgPGc+XFxyXFxuICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9XFxcIm9wYWNpdHlcXFwiIGR1cj1cXFwiMnNcXFwiIHJlcGVhdENvdW50PVxcXCJpbmRlZmluaXRlXFxcIiBiZWdpbj1cXFwiMHNcXFwiIGtleVRpbWVzPVxcXCIwOzAuMzM7MVxcXCIgdmFsdWVzPVxcXCIxOzE7MFxcXCI+PC9hbmltYXRlPlxcclxcbiAgICAgIDxjaXJjbGUgY3g9XFxcIjUwXFxcIiBjeT1cXFwiNTBcXFwiIHI9XFxcIjQwXFxcIiBzdHJva2U9XFxcIiMwMDAwMDBcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHN0cm9rZS13aWR0aD1cXFwiNlxcXCIgc3Ryb2tlLWxpbmVjYXA9XFxcInJvdW5kXFxcIj5cXHJcXG4gICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9XFxcInJcXFwiIGR1cj1cXFwiMnNcXFwiIHJlcGVhdENvdW50PVxcXCJpbmRlZmluaXRlXFxcIiBiZWdpbj1cXFwiMHNcXFwiIGtleVRpbWVzPVxcXCIwOzAuMzM7MVxcXCIgdmFsdWVzPVxcXCIwOzIyOzQ0XFxcIj48L2FuaW1hdGU+XFxyXFxuICAgICAgPC9jaXJjbGU+XFxyXFxuICA8L2c+XFxyXFxuICAgICAgPGc+XFxyXFxuICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPVxcXCJvcGFjaXR5XFxcIiBkdXI9XFxcIjJzXFxcIiByZXBlYXRDb3VudD1cXFwiaW5kZWZpbml0ZVxcXCIgYmVnaW49XFxcIjFzXFxcIiBrZXlUaW1lcz1cXFwiMDswLjMzOzFcXFwiIHZhbHVlcz1cXFwiMTsxOzBcXFwiPjwvYW5pbWF0ZT5cXHJcXG4gICAgICAgIDxjaXJjbGUgY3g9XFxcIjUwXFxcIiBjeT1cXFwiNTBcXFwiIHI9XFxcIjQwXFxcIiBzdHJva2U9XFxcIiMwMDBcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHN0cm9rZS13aWR0aD1cXFwiNlxcXCIgc3Ryb2tlLWxpbmVjYXA9XFxcInJvdW5kXFxcIj5cXHJcXG4gICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT1cXFwiclxcXCIgZHVyPVxcXCIyc1xcXCIgcmVwZWF0Q291bnQ9XFxcImluZGVmaW5pdGVcXFwiIGJlZ2luPVxcXCIxc1xcXCIga2V5VGltZXM9XFxcIjA7MC4zMzsxXFxcIiB2YWx1ZXM9XFxcIjA7MjI7NDRcXFwiPjwvYW5pbWF0ZT5cXHJcXG4gICAgICAgIDwvY2lyY2xlPlxcclxcbiAgICAgIDwvZz5cXHJcXG48L3N2Zz5cXHJcXG5cIjtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgY29udHJvbEluaXRpYWxpc2VyID0gZnVuY3Rpb24oY29udHJvbHMpIHtcclxuICAgIHZhciBjb250cm9sTmFtZSwgY29udHJvbE9wdGlvbnM7XHJcbiAgICBjb250cm9scy5mb3JFYWNoKGZ1bmN0aW9uKGNvbnRyb2wpIHtcclxuICAgICAgICBjb250cm9sTmFtZSA9IGNvbnRyb2wubmFtZTtcclxuICAgICAgICBjb250cm9sT3B0aW9ucyA9IGNvbnRyb2wub3B0aW9ucyB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKG9yaWdvLmNvbnRyb2xzLmhhc093blByb3BlcnR5KGNvbnRyb2xOYW1lKSkge1xyXG4gICAgICAgICAgICBjb250cm9sT3B0aW9ucyA/IG9yaWdvLmNvbnRyb2xzW2NvbnRyb2xOYW1lXS5pbml0KGNvbnRyb2xPcHRpb25zKSA6IG9yaWdvLmNvbnRyb2xzW2NvbnRyb2xOYW1lXS5pbml0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRyb2xJbml0aWFsaXNlcjtcclxuIiwiIFwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0YXJnZXQsIGl0ZW1zLCBvcHRpb25zKSB7XHJcbiAgdmFyIGRhdGFBdHRyaWJ1dGUgPSAnZGF0YS0nICsgb3B0aW9ucy5kYXRhQXR0cmlidXRlIHx8ICdkZWZhdWx0JztcclxuICB2YXIgJHRhcmdldCA9ICQoJyMnICsgdGFyZ2V0KTtcclxuICB2YXIgYWN0aXZlSXRlbSA9IG9wdGlvbnMuYWN0aXZlIHx8IHVuZGVmaW5lZDtcclxuICB2YXIgYWN0aXZlQ2xzID0gJ28tYWN0aXZlJztcclxuICB2YXIgdWw7XHJcbiAgdmFyIGxpID0gW107XHJcbiAgdmFyIGNscyA9ICdvLWRyb3Bkb3duLWxpJztcclxuICB2YXIgaWNvbiA9IHV0aWxzLmNyZWF0ZVN2Zyh7XHJcbiAgICBocmVmOiAnI2ljX2NoZWNrXzI0cHgnLFxyXG4gICAgY2xzOiAnby1pY29uLTI0J1xyXG4gIH0pO1xyXG4gIHJlbmRlcigpO1xyXG4gIGFkZExpc3RlbmVyKCk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICBjbHM6IGNsc1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgYWN0aXZlID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIGljb24sIHtcclxuICAgICAgICBjbHM6ICdvLWljb24nXHJcbiAgICAgIH0pO1xyXG4gICAgICBvYmpbZGF0YUF0dHJpYnV0ZV0gPSBpdGVtLnZhbHVlO1xyXG4gICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gYWN0aXZlSXRlbSkge1xyXG4gICAgICAgIG9iai5jbHMgPSBhY3RpdmVDbHM7XHJcbiAgICAgIH1cclxuICAgICAgbGlbaW5kZXhdID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnbGknLCBpdGVtLm5hbWUgKyBhY3RpdmUsIG9iaik7XHJcbiAgICB9KTtcclxuICAgIHVsID0gdXRpbHMuY3JlYXRlRWxlbWVudCgndWwnLCBsaS5qb2luKCcnKSwge1xyXG4gICAgICBjbHM6ICdvLWRyb3Bkb3duJ1xyXG4gICAgfSk7XHJcbiAgICAkdGFyZ2V0LmFwcGVuZCh1bCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhZGRMaXN0ZW5lcigpIHtcclxuICAgICR0YXJnZXQub24oJ2NsaWNrJywgJ3VsJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgJGFjdGl2ZSA9ICQoZS50YXJnZXQpO1xyXG4gICAgICAkdGFyZ2V0LnRyaWdnZXIoe1xyXG4gICAgICAgIHR5cGU6ICdjaGFuZ2VEcm9wZG93bicsXHJcbiAgICAgICAgZGF0YUF0dHJpYnV0ZTogJChlLnRhcmdldCkuZGF0YShvcHRpb25zLmRhdGFBdHRyaWJ1dGUpXHJcbiAgICAgIH0pO1xyXG4gICAgICB0b2dnbGVBY3RpdmUoJGFjdGl2ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZSgkYWN0aXZlKSB7XHJcbiAgICAkdGFyZ2V0LmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xzKTtcclxuICAgICRhY3RpdmUuYWRkQ2xhc3MoYWN0aXZlQ2xzKTtcclxuICB9XHJcbn07XHJcbiIsIiBcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIGVkaXRvclRvb2xiYXIgPSByZXF1aXJlKCcuL2VkaXRvci9lZGl0b3J0b29sYmFyJyk7XHJcblxyXG52YXIgJGVkaXRvckJ1dHRvbjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpbml0OiBJbml0XHJcbiAgfTtcclxufSgpO1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgb3B0aW9ucy5hdXRvU2F2ZSA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2F1dG9TYXZlJykgPyBvcHRpb25zLmF1dG9TYXZlIDogdHJ1ZTtcclxuICBvcHRpb25zLmF1dG9Gb3JtID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnYXV0b0Zvcm0nKSA/IG9wdGlvbnMuYXV0b0Zvcm0gOiBmYWxzZTtcclxuICBvcHRpb25zLmN1cnJlbnRMYXllciA9IG9wdGlvbnMuZGVmYXVsdExheWVyIHx8IG9wdGlvbnMuZWRpdGFibGVMYXllcnNbMF07XHJcbiAgZWRpdG9yVG9vbGJhci5pbml0KG9wdGlvbnMpO1xyXG4gIHJlbmRlcigpO1xyXG4gICRlZGl0b3JCdXR0b24gPSAkKCcjby1lZGl0b3ItYnV0dG9uJyk7XHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICRlZGl0b3JCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgJCgnLm8tbWFwJykuZmlyc3QoKS50cmlnZ2VyKHtcclxuICAgICAgdHlwZTogJ2VuYWJsZUludGVyYWN0aW9uJyxcclxuICAgICAgaW50ZXJhY3Rpb246ICdlZGl0b3InXHJcbiAgICB9KTtcclxuICAgIHRoaXMuYmx1cigpO1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gIHZhciBlbCA9IHV0aWxzLmNyZWF0ZUxpc3RCdXR0b24oe1xyXG4gICAgaWQ6ICdvLWVkaXRvcicsXHJcbiAgICBpY29uQ2xzOiAnby1pY29uLWZhLXBlbmNpbCcsXHJcbiAgICBzcmM6ICcjZmEtcGVuY2lsJyxcclxuICAgIHRleHQ6ICdSZWRpZ2VyYSdcclxuICB9KTtcclxuICAkKCcjby1tZW51dG9vbHMnKS5hcHBlbmQoZWwpO1xyXG59XHJcbiIsIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiBDb3B5cmlnaHQgMjAxNiBPcmlnb1xyXG4gKiBMaWNlbnNlZCB1bmRlciBCU0QgMi1DbGF1c2UgKGh0dHBzOi8vZ2l0aHViLmNvbS9vcmlnby1tYXAvb3JpZ28vYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQpXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgZWRpdHNTdG9yZSA9IHJlcXVpcmUoJy4vZWRpdHNzdG9yZScpKCk7XHJcbnZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9lZGl0RGlzcGF0Y2hlcicpO1xyXG5cclxudmFyIGZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuRXNyaUpTT04oKTtcclxudmFyIHVybFN1ZmZpeCA9IHtcclxuICB1cGRhdGU6ICd1cGRhdGVGZWF0dXJlcycsXHJcbiAgaW5zZXJ0OiAnYWRkRmVhdHVyZXMnLFxyXG4gIGRlbGV0ZTogJ2RlbGV0ZUZlYXR1cmVzJ1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0cmFuc09iaiwgbGF5ZXJOYW1lKSB7XHJcbiAgYWdzVHJhbnNhY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlQWdzVHJhbnNhY3Rpb24oZmVhdHVyZXMsIG9wdGlvbnMpIHtcclxuICB2YXIgZGF0YSA9IHt9O1xyXG5cclxuICBpZiAob3B0aW9ucy50eXBlID09PSAnZGVsZXRlJykge1xyXG4gICAgdmFyIG9iamVjdElkcyA9IGZlYXR1cmVzLm1hcChmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgIHJldHVybiBmZWF0dXJlLmdldElkKCk7XHJcbiAgICB9KTtcclxuICAgIGRhdGEub2JqZWN0SWRzID0gb2JqZWN0SWRzLmpvaW4oJywnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgdmFyIGFnc0ZlYXR1cmVzID0gZmVhdHVyZXMubWFwKGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgcmV0dXJuIGZvcm1hdC53cml0ZUZlYXR1cmUoZmVhdHVyZSwge1xyXG4gICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb25cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIGRhdGEuZmVhdHVyZXMgPSAnWycgKyBhZ3NGZWF0dXJlcyArICddJztcclxuICB9XHJcbiAgZGF0YS5mID0gJ2pzb24nO1xyXG4gIHJldHVybiBkYXRhO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZ3NUcmFuc2FjdGlvbih0cmFuc09iaiwgbGF5ZXJOYW1lKSB7XHJcbiAgdmFyIHByb2plY3Rpb24gPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbigpO1xyXG4gIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gIHZhciBpZCA9IGxheWVyLmdldCgnaWQnKTtcclxuICB2YXIgc291cmNlID0gdmlld2VyLmdldE1hcFNvdXJjZSgpW2xheWVyLmdldCgnc291cmNlTmFtZScpXTtcclxuICB2YXIgdHlwZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0cmFuc09iaik7XHJcbiAgdmFyIGNiID0ge1xyXG4gICAgdXBkYXRlOiB1cGRhdGVTdWNjZXNzLFxyXG4gICAgaW5zZXJ0OiBpbnNlcnRTdWNjZXNzLFxyXG4gICAgZGVsZXRlOiBkZWxldGVTdWNjZXNzXHJcbiAgfTtcclxuICB0eXBlcy5mb3JFYWNoKGZ1bmN0aW9uKHR5cGUpIHtcclxuICAgIGlmICh0cmFuc09ialt0eXBlXSkge1xyXG4gICAgICB2YXIgdXJsID0gc291cmNlLnVybCAgKyAnLycgKyBpZCArICcvJyArIHVybFN1ZmZpeFt0eXBlXTtcclxuICAgICAgdmFyIGRhdGF0ID0gd3JpdGVBZ3NUcmFuc2FjdGlvbih0cmFuc09ialt0eXBlXSwge1xyXG4gICAgICAgIHByb2plY3Rpb246IHByb2plY3Rpb24sXHJcbiAgICAgICAgdHlwZTogdHlwZVxyXG4gICAgICB9KTtcclxuICAgICAgJC5hamF4KHtcclxuICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBkYXRhOiBkYXRhdCxcclxuICAgICAgICBzdWNjZXNzOiBjYlt0eXBlXSxcclxuICAgICAgICBlcnJvcjogZXJyb3IsXHJcbiAgICAgICAgY29udGV4dDogdGhpc1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gdXBkYXRlU3VjY2VzcyhkYXRhKSB7XHJcbiAgICB2YXIgZmVhdHVyZSA9IHRyYW5zT2JqLnVwZGF0ZTtcclxuICAgIHZhciByZXN1bHQgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICBpZiAocmVzdWx0LnVwZGF0ZVJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJlc3VsdC51cGRhdGVSZXN1bHRzLmZvckVhY2goZnVuY3Rpb24odXBkYXRlLCBpbmRleCkge1xyXG4gICAgICAgICAgaWYgKHVwZGF0ZS5zdWNjZXNzICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRocm93U2VydmVyRXJyb3IodXBkYXRlLmVycm9yKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUZlYXR1cmUoe1xyXG4gICAgICAgICAgICAgIGZlYXR1cmU6IFtmZWF0dXJlW2luZGV4XV0sXHJcbiAgICAgICAgICAgICAgbGF5ZXJOYW1lOiBsYXllck5hbWUsXHJcbiAgICAgICAgICAgICAgc3RhdHVzOiAnZmluaXNoZWQnLFxyXG4gICAgICAgICAgICAgIGFjdGlvbjogJ3VwZGF0ZSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9yKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpbnNlcnRTdWNjZXNzKGRhdGEpIHtcclxuICAgIHZhciBmZWF0dXJlID0gdHJhbnNPYmouaW5zZXJ0O1xyXG4gICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIGlmIChyZXN1bHQuYWRkUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmVzdWx0LmFkZFJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbihpbnNlcnQsIGluZGV4KSB7XHJcbiAgICAgICAgICBpZiAoaW5zZXJ0LnN1Y2Nlc3MgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhyb3dTZXJ2ZXJFcnJvcihpbnNlcnQuZXJyb3IpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRmVhdHVyZSh7XHJcbiAgICAgICAgICAgICAgZmVhdHVyZTogW2ZlYXR1cmVbaW5kZXhdXSxcclxuICAgICAgICAgICAgICBsYXllck5hbWU6IGxheWVyTmFtZSxcclxuICAgICAgICAgICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXHJcbiAgICAgICAgICAgICAgYWN0aW9uOiAnaW5zZXJ0J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZmVhdHVyZVtpbmRleF0uc2V0KCdvYmplY3RJZCcsaW5zZXJ0Lm9iamVjdElkKTtcclxuICAgICAgICAgICAgZmVhdHVyZVtpbmRleF0uc2V0SWQoaW5zZXJ0Lm9iamVjdElkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXJyb3IoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRlbGV0ZVN1Y2Nlc3MoZGF0YSkge1xyXG4gICAgdmFyIGZlYXR1cmUgPSB0cmFuc09iai5kZWxldGU7XHJcbiAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgaWYgKHJlc3VsdC5kZWxldGVSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZXN1bHQuZGVsZXRlUmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uKGRlbGV0ZWQsIGluZGV4KSB7XHJcbiAgICAgICAgICBpZiAoZGVsZXRlZC5zdWNjZXNzICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRocm93U2VydmVyRXJyb3IoZGVsZXRlZC5lcnJvcik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VGZWF0dXJlKHtcclxuICAgICAgICAgICAgICBmZWF0dXJlOiBbZmVhdHVyZVtpbmRleF1dLFxyXG4gICAgICAgICAgICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLFxyXG4gICAgICAgICAgICAgIHN0YXR1czogJ2ZpbmlzaGVkJyxcclxuICAgICAgICAgICAgICBhY3Rpb246ICdkZWxldGUnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlcnJvcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZXJyb3IoZSkge1xyXG4gICAgdmFyIGVycm9yTXNnID0gZSA/IChlLnN0YXR1cyArICcgJyArIGUuc3RhdHVzVGV4dCkgOiBcIlwiO1xyXG4gICAgYWxlcnQoJ0RldCBpbnRyw6RmZmFkZSBldHQgZmVsIG7DpHIgw6RuZHJpbmdhcm5hIHNrdWxsZSBzcGFyYXMgdGlsbCBzZXJ2ZXJuLi4uPGJyPjxicj4nICtcclxuICAgICAgZXJyb3JNc2cpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdGhyb3dTZXJ2ZXJFcnJvcihlcnJvcikge1xyXG4gICAgYWxlcnQoZXJyb3IuZGVzY3JpcHRpb24gKyAnICgnICsgZXJyb3IuY29kZSArICcpJyk7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgZHJvcERvd24gPSByZXF1aXJlKCcuLi9kcm9wZG93bicpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZWRpdGRpc3BhdGNoZXInKTtcclxudmFyIGNyZWF0ZUVsZW1lbnQgPSByZXF1aXJlKCcuLi91dGlscycpLmNyZWF0ZUVsZW1lbnQ7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRyYXdUb29scyh0b29scywgZGVmYXVsdExheWVyKSB7XHJcbiAgdmFyIHRvb2xOYW1lcyA9IHtcclxuICAgIFBvbHlnb246ICdQb2x5Z29uJyxcclxuICAgIFBvaW50OiAnUHVua3QnLFxyXG4gICAgTGluZTogJ0xpbmplJyxcclxuICAgIGJveDogJ1Jla3RhbmdlbCdcclxuICB9O1xyXG4gIHZhciBkZWZhdWx0VG9vbHMgPSB0b29scyB8fCB7fTtcclxuICB2YXIgZHJhd1Rvb2xzID0gdW5kZWZpbmVkO1xyXG4gIHZhciBjdXJyZW50TGF5ZXIgPSBkZWZhdWx0TGF5ZXI7XHJcbiAgdmFyIG1hcCA9IHZpZXdlci5nZXRNYXAoKTtcclxuICB2YXIgYWN0aXZlID0gZmFsc2U7XHJcbiAgdmFyIGFjdGl2ZUNscyA9ICdvLWFjdGl2ZSc7XHJcbiAgdmFyIHRhcmdldCA9ICdlZGl0b3ItdG9vbGJhci1kcmF3LWRyb3Bkb3duJztcclxuICByZW5kZXIoKTtcclxuICBhZGRMaXN0ZW5lcigpO1xyXG5cclxuICBmdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgICB2YXIgcG9wb3ZlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsICcnLCB7XHJcbiAgICAgIGlkOiB0YXJnZXQsXHJcbiAgICAgIGNsczogJ28tcG9wb3ZlcidcclxuICAgIH0pO1xyXG4gICAgJCgnIycgKyAnby1lZGl0b3ItZHJhdycpLmFmdGVyKHBvcG92ZXIpO1xyXG4gICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZERyb3BEb3duKG9wdGlvbnMpIHtcclxuICAgIGRyb3BEb3duKG9wdGlvbnMudGFyZ2V0LCBvcHRpb25zLnNlbGVjdE9wdGlvbnMsIHtcclxuICAgICAgZGF0YUF0dHJpYnV0ZTogJ3NoYXBlJyxcclxuICAgICAgYWN0aXZlOiBvcHRpb25zLmFjdGl2ZVRvb2xcclxuICAgIH0pO1xyXG4gICAgJCgnIycgKyB0YXJnZXQpLm9uKCdjaGFuZ2VEcm9wZG93bicsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oZSk7XHJcbiAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUVkaXRvclNoYXBlcyhlLmRhdGFBdHRyaWJ1dGUpO1xyXG4gICAgICBjbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhZGRMaXN0ZW5lcigpIHtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VFZGl0Jywgb25DaGFuZ2VFZGl0KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCd0b2dnbGVFZGl0Jywgb25Ub2dnbGVFZGl0KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldEFjdGl2ZShzdGF0ZSkge1xyXG4gICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgIGlmIChkcmF3VG9vbHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIGFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgJCgnIycgKyB0YXJnZXQgKyAnIHVsJykucmVtb3ZlKCk7XHJcbiAgICAgICAgYWRkRHJvcERvd24oY3JlYXRlRHJvcERvd25PcHRpb25zKCkpO1xyXG4gICAgICAgICQoJyMnICsgdGFyZ2V0KS5hZGRDbGFzcyhhY3RpdmVDbHMpO1xyXG4gICAgICAgIG1hcC5vbmNlKCdjbGljaycsIGNsb3NlKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICQoJyMnICsgdGFyZ2V0KS5yZW1vdmVDbGFzcyhhY3RpdmVDbHMpO1xyXG4gICAgICBtYXAudW4oJ2NsaWNrJywgY2xvc2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2xvc2UoKSB7XHJcbiAgICBpZiAoYWN0aXZlKSB7XHJcbiAgICAgIHNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkNoYW5nZUVkaXQoZSkge1xyXG4gICAgaWYgKGUudG9vbCA9PT0gJ2RyYXcnICYmIGUuYWN0aXZlID09PSB0cnVlKSB7XHJcbiAgICAgIHNldERyYXdUb29scyhjdXJyZW50TGF5ZXIpO1xyXG4gICAgICBzZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKGUudG9vbCA9PT0gJ2RyYXcnICYmIGUuYWN0aXZlID09PSBmYWxzZSkge1xyXG4gICAgICBzZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uVG9nZ2xlRWRpdChlKSB7XHJcbiAgICBpZiAoZS50b29sID09PSAnZWRpdCcgJiYgZS5jdXJyZW50TGF5ZXIpIHtcclxuICAgICAgY3VycmVudExheWVyID0gZS5jdXJyZW50TGF5ZXI7XHJcbiAgICB9XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0RHJhd1Rvb2xzKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2YXIgZ2VvbWV0cnlUeXBlO1xyXG4gICAgZHJhd1Rvb2xzID0gbGF5ZXIuZ2V0KCdkcmF3VG9vbHMnKSB8fCBbXTtcclxuICAgIGlmIChsYXllci5nZXQoJ2RyYXdUb29scycpKSB7XHJcbiAgICAgIGRyYXdUb29scyA9IGxheWVyLmdldCgnZHJhd1Rvb2xzJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBnZW9tZXRyeVR5cGUgPSBsYXllci5nZXQoJ2dlb21ldHJ5VHlwZScpO1xyXG4gICAgICBkcmF3VG9vbHMgPSBkZWZhdWx0VG9vbHNbZ2VvbWV0cnlUeXBlXSA/IGRlZmF1bHRUb29sc1tnZW9tZXRyeVR5cGVdLnNsaWNlKDApIDogW107XHJcbiAgICAgIGRyYXdUb29scy51bnNoaWZ0KGdlb21ldHJ5VHlwZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVEcm9wRG93bk9wdGlvbnMoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB0YXJnZXQ6IHRhcmdldCxcclxuICAgICAgc2VsZWN0T3B0aW9uczogc2VsZWN0aW9uTW9kZWwoZHJhd1Rvb2xzKSxcclxuICAgICAgYWN0aXZlVG9vbDogZHJhd1Rvb2xzWzBdXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VsZWN0aW9uTW9kZWwoZHJhd1Rvb2xzKSB7XHJcbiAgICB2YXIgc2VsZWN0T3B0aW9ucyA9IGRyYXdUb29scy5tYXAoZnVuY3Rpb24oZHJhd1Rvb2wpIHtcclxuICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICBvYmoubmFtZSA9IHRvb2xOYW1lc1tkcmF3VG9vbF07XHJcbiAgICAgIG9iai52YWx1ZSA9IGRyYXdUb29sO1xyXG4gICAgICByZXR1cm4gb2JqO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc2VsZWN0T3B0aW9ucztcclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgZW1pdENoYW5nZUVkaXQ6IGVtaXRDaGFuZ2VFZGl0LFxyXG4gIGVtaXRDaGFuZ2VGZWF0dXJlOiBlbWl0Q2hhbmdlRmVhdHVyZSxcclxuICBlbWl0VG9nZ2xlRWRpdDogZW1pdFRvZ2dsZUVkaXQsXHJcbiAgZW1pdEVuYWJsZUludGVyYWN0aW9uOiBlbWl0RW5hYmxlSW50ZXJhY3Rpb24sXHJcbiAgZW1pdEVkaXRzQ2hhbmdlOiBlbWl0RWRpdHNDaGFuZ2UsXHJcbiAgZW1pdENoYW5nZUVkaXRvclNoYXBlczogZW1pdENoYW5nZUVkaXRvclNoYXBlcyxcclxuICBlbWl0Q2hhbmdlT2ZmbGluZUVkaXRzOiBlbWl0Q2hhbmdlT2ZmbGluZUVkaXRzXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRDaGFuZ2VFZGl0KHRvb2wsIHN0YXRlKSB7XHJcbiAgJC5ldmVudC50cmlnZ2VyKHtcclxuICAgIHR5cGU6ICdjaGFuZ2VFZGl0JyxcclxuICAgIHRvb2w6IHRvb2wsXHJcbiAgICBhY3RpdmU6IHN0YXRlXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRDaGFuZ2VGZWF0dXJlKGNoYW5nZSkge1xyXG4gICQuZXZlbnQudHJpZ2dlcih7XHJcbiAgICB0eXBlOiAnY2hhbmdlRmVhdHVyZScsXHJcbiAgICBmZWF0dXJlOiBjaGFuZ2UuZmVhdHVyZSxcclxuICAgIGxheWVyTmFtZTogY2hhbmdlLmxheWVyTmFtZSxcclxuICAgIGFjdGlvbjogY2hhbmdlLmFjdGlvbixcclxuICAgIHN0YXR1czogY2hhbmdlLnN0YXR1cyB8fCAncGVuZGluZydcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdFRvZ2dsZUVkaXQodG9vbCwgb3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciBlID0ge1xyXG4gICAgdHlwZTogJ3RvZ2dsZUVkaXQnLFxyXG4gICAgdG9vbDogdG9vbFxyXG4gIH07XHJcbiAgJC5leHRlbmQoZSwgb3B0aW9ucyk7XHJcbiAgJC5ldmVudC50cmlnZ2VyKGUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0RW5hYmxlSW50ZXJhY3Rpb24oKSB7XHJcbiAgJC5ldmVudC50cmlnZ2VyKHtcclxuICAgIHR5cGU6ICdlbmFibGVJbnRlcmFjdGlvbicsXHJcbiAgICBpbnRlcmFjdGlvbjogJ2VkaXRvcidcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdEVkaXRzQ2hhbmdlKGVkaXRzKSB7XHJcbiAgJC5ldmVudC50cmlnZ2VyKHtcclxuICAgIHR5cGU6ICdlZGl0c0NoYW5nZScsXHJcbiAgICBlZGl0czogZWRpdHNcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdENoYW5nZUVkaXRvclNoYXBlcyhzaGFwZSkge1xyXG4gICQuZXZlbnQudHJpZ2dlcih7XHJcbiAgICB0eXBlOiAnZWRpdG9yU2hhcGVzJyxcclxuICAgIHNoYXBlOiBzaGFwZVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0Q2hhbmdlT2ZmbGluZUVkaXRzKGVkaXRzLCBsYXllck5hbWUpIHtcclxuICAkLmV2ZW50LnRyaWdnZXIoe1xyXG4gICAgdHlwZTogJ2NoYW5nZU9mZmxpbmVFZGl0cycsXHJcbiAgICBlZGl0czogZWRpdHMsXHJcbiAgICBsYXllck5hbWU6IGxheWVyTmFtZVxyXG4gIH0pO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBjcmVhdGVGb3JtKG9iaikge1xyXG4gIHZhciBpZCA9IG9iai5lbElkLnNsaWNlKDEpO1xyXG4gIHZhciBjbHMgPSBvYmouY2xzIHx8ICcnO1xyXG4gIGNscyArPSBpZDtcclxuICBjbHMgKz0gb2JqLmlzVmlzaWJsZSA/IFwiXCIgOiBcIiBvLWhpZGRlblwiO1xyXG4gIHZhciBsYWJlbCA9IG9iai50aXRsZTtcclxuICB2YXIgdmFsID0gb2JqLmlzVmlzaWJsZSA/IG9iai52YWwgOiAnJztcclxuICB2YXIgdHlwZSA9IG9iai50eXBlO1xyXG4gIHZhciBtYXhMZW5ndGggPSBvYmoubWF4TGVuZ3RoID8gJyBtYXhsZW5ndGg9XCInICsgb2JqLm1heExlbmd0aCArICdcIiAnIDogJyc7XHJcbiAgdmFyIGRyb3Bkb3duT3B0aW9ucyA9IG9iai5vcHRpb25zIHx8IFtdO1xyXG4gIHZhciBlbDtcclxuICB2YXIgY2hlY2tlZDtcclxuICB2YXIgZmlyc3RPcHRpb247XHJcbiAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICBjYXNlICd0ZXh0JzpcclxuICAgICAgZWwgPSAnPGRpdj48bGFiZWw+JyArIGxhYmVsICsgJzwvbGFiZWw+PGJyPjxpbnB1dCB0eXBlPVwidGV4dFwiIGlkPVwiJyArIGlkICsgJ1wiIHZhbHVlPVwiJyArIHZhbCArICdcIicgKyBtYXhMZW5ndGggKyAnPjwvZGl2Pic7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAndGV4dGFyZWEnOlxyXG4gICAgICBlbCA9ICc8ZGl2PjxsYWJlbD4nICsgbGFiZWwgKyAnPC9sYWJlbD48YnI+PHRleHRhcmVhIGlkPVwiJyArIGlkICsgJ1wiJyArIG1heExlbmd0aCArICdyb3dzPVwiM1wiPicgKyB2YWwgKyAnPC90ZXh0YXJlYT48L2Rpdj4nO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2NoZWNrYm94JzpcclxuICAgICAgY2hlY2tlZCA9IHZhbCA/ICcgY2hlY2tlZCcgOiAnJztcclxuICAgICAgZWwgPSAnPGRpdiBjbGFzcz1cIm8tZm9ybS1jaGVja2JveFwiPjxsYWJlbD4nICsgbGFiZWwgKyAnPC9sYWJlbD48aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgaWQ9XCInICsgaWQgKyAnXCIgdmFsdWU9XCInICsgdmFsICsgJ1wiJyArIGNoZWNrZWQgKyAnPjwvZGl2Pic7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnZHJvcGRvd24nOlxyXG4gICAgICBmaXJzdE9wdGlvbjtcclxuICAgICAgaWYgKHZhbCkge1xyXG4gICAgICAgIGZpcnN0T3B0aW9uID0gJzxvcHRpb24gdmFsdWU9XCInICsgdmFsICsgJ1wiIHNlbGVjdGVkPicgKyB2YWwgKyAnPC9vcHRpb24+JztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBmaXJzdE9wdGlvbiA9ICc8b3B0aW9uIHZhbHVlPVwiXCIgc2VsZWN0ZWQ+VsOkbGo8L29wdGlvbj4nO1xyXG4gICAgICB9XHJcbiAgICAgIGVsID0gJzxkaXYgY2xhc3M9XCInICsgY2xzICsgJ1wiPjxsYWJlbD4nICsgbGFiZWwgKyAnPC9sYWJlbD48YnI+PHNlbGVjdCBpZD0nICsgaWQgKyAnPicgKyBmaXJzdE9wdGlvbjtcclxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkcm9wZG93bk9wdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBlbCArPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyBkcm9wZG93bk9wdGlvbnNbaV0gKyAnXCI+JyArIGRyb3Bkb3duT3B0aW9uc1tpXSArICc8L29wdGlvbj4nO1xyXG4gICAgICB9XHJcbiAgICAgIGVsICs9ICc8L3NlbGVjdD48L2Rpdj4nO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2ltYWdlJzpcclxuICAgICAgdmFyIGltYWdlQ2xhc3MgPSB2YWwgPyAnJyA6ICdvLWhpZGRlbic7XHJcbiAgICAgIGVsID0gJzxkaXYgY2xhc3M9XCInICsgY2xzICsgJ1wiPjxsYWJlbD4nICsgbGFiZWwgKyAnPC9sYWJlbD48YnI+JztcclxuICAgICAgZWwgKz0gJzxpbWcgc3JjPVwiJyArIHZhbCArICdcIiBpZD1cImltYWdlLXVwbG9hZFwiIGNsYXNzPVwiJyArIGltYWdlQ2xhc3MgKyAnXCIvPic7XHJcbiAgICAgIGVsICs9ICc8aW5wdXQgdHlwZT1cImZpbGVcIiBpZD1cIicgKyBpZCArICdcIiB2YWx1ZT1cIicgKyB2YWwgKyAnXCIgYWNjZXB0PVwiaW1hZ2UvKlwiPic7XHJcbiAgICAgIGVsICs9ICc8aW5wdXQgaWQ9XCJvLWRlbGV0ZS1pbWFnZS1idXR0b25cIiBjbGFzcz1cIicgKyBpbWFnZUNsYXNzICsgJ1wiIHR5cGU9XCJidXR0b25cIiB2YWx1ZT1cIlRhIGJvcnQgYmlsZFwiPic7XHJcbiAgICAgIGVsICs9ICc8L2Rpdj4nO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbiAgcmV0dXJuIGVsO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBtb2RhbCA9IHJlcXVpcmUoJy4uL21vZGFsJyk7XHJcbnZhciBmZWF0dXJlSW5mbyA9IHJlcXVpcmUoJy4uL2ZlYXR1cmVpbmZvJyk7XHJcbnZhciBlZGl0c1N0b3JlID0gcmVxdWlyZSgnLi9lZGl0c3N0b3JlJykoKTtcclxudmFyIGdlbmVyYXRlVVVJRCA9IHJlcXVpcmUoJy4uL3V0aWxzL2dlbmVyYXRldXVpZCcpO1xyXG52YXIgdHJhbnNhY3Rpb25IYW5kbGVyID0gcmVxdWlyZSgnLi90cmFuc2FjdGlvbmhhbmRsZXInKTtcclxudmFyIGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL2VkaXRkaXNwYXRjaGVyJyk7XHJcbnZhciBlZGl0Rm9ybSA9IHJlcXVpcmUoJy4vZWRpdGZvcm0nKTtcclxudmFyIGltYWdlcmVzaXplciA9IHJlcXVpcmUoJy4uL3V0aWxzL2ltYWdlcmVzaXplcicpO1xyXG52YXIgZ2V0SW1hZ2VPcmllbnRhdGlvbiA9IHJlcXVpcmUoJy4uL3V0aWxzL2dldGltYWdlb3JpZW50YXRpb24nKTtcclxudmFyIHNoYXBlcyA9IHJlcXVpcmUoJy4vc2hhcGVzJyk7XHJcblxyXG52YXIgZWRpdExheWVycyA9IHt9O1xyXG52YXIgYXV0b1NhdmUgPSB1bmRlZmluZWQ7XHJcbnZhciBhdXRvRm9ybSA9IHVuZGVmaW5lZDtcclxudmFyIGVkaXRTb3VyY2UgPSB1bmRlZmluZWQ7XHJcbnZhciBnZW9tZXRyeVR5cGUgPSB1bmRlZmluZWQ7XHJcbnZhciBnZW9tZXRyeU5hbWUgPSB1bmRlZmluZWQ7XHJcbnZhciBtYXAgPSB1bmRlZmluZWQ7XHJcbnZhciBjdXJyZW50TGF5ZXIgPSB1bmRlZmluZWQ7XHJcbnZhciBlZGl0YWJsZUxheWVycyA9IHVuZGVmaW5lZDtcclxudmFyIGF0dHJpYnV0ZXMgPSB1bmRlZmluZWQ7XHJcbnZhciB0aXRsZSA9IHVuZGVmaW5lZDtcclxudmFyIGRyYXcgPSB1bmRlZmluZWQ7XHJcbnZhciBoYXNEcmF3ID0gdW5kZWZpbmVkO1xyXG52YXIgaGFzQXR0cmlidXRlID0gdW5kZWZpbmVkO1xyXG52YXIgaGFzU25hcCA9IHVuZGVmaW5lZDtcclxudmFyIHNlbGVjdCA9IHVuZGVmaW5lZDtcclxudmFyIG1vZGlmeSA9IHVuZGVmaW5lZDtcclxudmFyIHNuYXAgPSB1bmRlZmluZWQ7XHJcbnZhciB0b29scyA9IHVuZGVmaW5lZDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gIG1hcCA9IHZpZXdlci5nZXRNYXAoKTtcclxuICBjdXJyZW50TGF5ZXIgPSBvcHRpb25zLmN1cnJlbnRMYXllcjtcclxuICBlZGl0YWJsZUxheWVycyA9IG9wdGlvbnMuZWRpdGFibGVMYXllcnM7XHJcbiAgdG9vbHMgPSBvcHRpb25zLmRyYXdUb29scyB8fCBbXTtcclxuXHJcbiAgLy9zZXQgZWRpdCBwcm9wZXJ0aWVzIGZvciBlZGl0YWJsZSBsYXllcnNcclxuICBlZGl0TGF5ZXJzID0gc2V0RWRpdFByb3BzKG9wdGlvbnMpO1xyXG4gIGVkaXRhYmxlTGF5ZXJzLmZvckVhY2goZnVuY3Rpb24obGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZlcmlmeUxheWVyKGxheWVyTmFtZSk7XHJcbiAgICBpZiAobGF5ZXJOYW1lID09PSBjdXJyZW50TGF5ZXIgJiYgb3B0aW9ucy5pc0FjdGl2ZSkge1xyXG4gICAgICBkaXNwYXRjaGVyLmVtaXRFbmFibGVJbnRlcmFjdGlvbigpO1xyXG4gICAgICBzZXRFZGl0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgYXV0b1NhdmUgPSBvcHRpb25zLmF1dG9TYXZlO1xyXG4gIGF1dG9Gb3JtID0gb3B0aW9ucy5hdXRvRm9ybTtcclxuICAkKGRvY3VtZW50KS5vbigndG9nZ2xlRWRpdCcsIG9uVG9nZ2xlRWRpdCk7XHJcbiAgJChkb2N1bWVudCkub24oJ2NoYW5nZUVkaXQnLCBvbkNoYW5nZUVkaXQpO1xyXG4gICQoZG9jdW1lbnQpLm9uKCdlZGl0b3JTaGFwZXMnLCBvbkNoYW5nZVNoYXBlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RWRpdExheWVyKGxheWVyTmFtZSkge1xyXG4gIGN1cnJlbnRMYXllciA9IGxheWVyTmFtZTtcclxuICBzZXRJbnRlcmFjdGlvbnMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0SW50ZXJhY3Rpb25zKGRyYXdUeXBlKSB7XHJcbiAgdmFyIGVkaXRMYXllciA9IGVkaXRMYXllcnNbY3VycmVudExheWVyXTtcclxuICB2YXIgZHJhd09wdGlvbnM7XHJcbiAgZWRpdFNvdXJjZSA9IGVkaXRMYXllci5nZXRTb3VyY2UoKTtcclxuICBhdHRyaWJ1dGVzID0gZWRpdExheWVyLmdldCgnYXR0cmlidXRlcycpO1xyXG4gIHRpdGxlID0gZWRpdExheWVyLmdldCgndGl0bGUnKSB8fCAnSW5mb3JtYXRpb24nO1xyXG4gIGRyYXdPcHRpb25zID0ge1xyXG4gICAgc291cmNlOiBlZGl0U291cmNlLFxyXG4gICAgdHlwZTogZWRpdExheWVyLmdldCgnZ2VvbWV0cnlUeXBlJyksXHJcbiAgICBnZW9tZXRyeU5hbWU6IGVkaXRMYXllci5nZXQoJ2dlb21ldHJ5TmFtZScpXHJcbiAgfTtcclxuICBpZiAoZHJhd1R5cGUpIHtcclxuICAgICQuZXh0ZW5kKGRyYXdPcHRpb25zLCBzaGFwZXMoZHJhd1R5cGUpKTtcclxuICB9XHJcbiAgcmVtb3ZlSW50ZXJhY3Rpb25zKCk7XHJcbiAgZHJhdyA9IG5ldyBvbC5pbnRlcmFjdGlvbi5EcmF3KGRyYXdPcHRpb25zKTtcclxuICBoYXNEcmF3ID0gZmFsc2U7XHJcbiAgaGFzQXR0cmlidXRlID0gZmFsc2U7XHJcbiAgc2VsZWN0ID0gbmV3IG9sLmludGVyYWN0aW9uLlNlbGVjdCh7XHJcbiAgICBsYXllcnM6IFtlZGl0TGF5ZXJdXHJcbiAgfSk7XHJcbiAgbW9kaWZ5ID0gbmV3IG9sLmludGVyYWN0aW9uLk1vZGlmeSh7XHJcbiAgICBmZWF0dXJlczogc2VsZWN0LmdldEZlYXR1cmVzKClcclxuICB9KTtcclxuICBtYXAuYWRkSW50ZXJhY3Rpb24oc2VsZWN0KTtcclxuICBtYXAuYWRkSW50ZXJhY3Rpb24obW9kaWZ5KTtcclxuICBtYXAuYWRkSW50ZXJhY3Rpb24oZHJhdyk7XHJcbiAgbW9kaWZ5Lm9uKCdtb2RpZnllbmQnLCBvbk1vZGlmeUVuZCwgdGhpcyk7XHJcbiAgZHJhdy5vbignZHJhd2VuZCcsIG9uRHJhd0VuZCwgdGhpcyk7XHJcbiAgc2V0QWN0aXZlKCk7XHJcblxyXG4gIC8vSWYgc25hcCBzaG91bGQgYmUgYWN0aXZlIHRoZW4gYWRkIHNuYXAgaW50ZXJuYWN0aW9ucyBmb3IgYWxsIHNuYXAgbGF5ZXJzXHJcbiAgaGFzU25hcCA9IGVkaXRMYXllci5nZXQoJ3NuYXAnKTtcclxuICBpZiAoaGFzU25hcCkge1xyXG4gICAgdmFyIHNlbGVjdGlvblNvdXJjZSA9IGZlYXR1cmVJbmZvLmdldFNlbGVjdGlvbkxheWVyKCkuZ2V0U291cmNlKCk7XHJcbiAgICB2YXIgc25hcFNvdXJjZXMgPSBlZGl0TGF5ZXIuZ2V0KCdzbmFwTGF5ZXJzJykgPyBnZXRTbmFwU291cmNlcyhlZGl0TGF5ZXIuZ2V0KCdzbmFwTGF5ZXJzJykpIDogW2VkaXRMYXllci5nZXQoJ3NvdXJjZScpXTtcclxuICAgIHNuYXBTb3VyY2VzLnB1c2goc2VsZWN0aW9uU291cmNlKTtcclxuICAgIHNuYXAgPSBhZGRTbmFwSW50ZXJhY3Rpb24oc25hcFNvdXJjZXMpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdmVyaWZ5TGF5ZXIobGF5ZXJOYW1lKSB7XHJcbiAgaWYgKCEoZWRpdExheWVyc1tsYXllck5hbWVdLmdldCgnZ2VvbWV0cnlUeXBlJykpKSB7XHJcbiAgICBhZGRGZWF0dXJlQWRkTGlzdGVuZXIobGF5ZXJOYW1lKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEdlb21ldHJ5UHJvcHMobGF5ZXIpIHtcclxuICB2YXIgbGF5ZXJOYW1lID0gbGF5ZXIuZ2V0KCduYW1lJyk7XHJcbiAgZWRpdExheWVyc1tsYXllck5hbWVdLnNldCgnZ2VvbWV0cnlUeXBlJywgbGF5ZXIuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZXMoKVswXS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKSk7XHJcbiAgaWYgKGxheWVyTmFtZSA9PT0gY3VycmVudExheWVyKSB7XHJcbiAgICBzZXRFZGl0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEZlYXR1cmVBZGRMaXN0ZW5lcihsYXllck5hbWUpIHtcclxuICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICBsYXllci5nZXRTb3VyY2UoKS5vbmNlKCdhZGRmZWF0dXJlJywgZnVuY3Rpb24oZSkge1xyXG4gICAgc2V0R2VvbWV0cnlQcm9wcyhsYXllcik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEVkaXRQcm9wcyhvcHRpb25zKSB7XHJcbiAgdmFyIGluaXRpYWxWYWx1ZSA9IHt9O1xyXG4gIHZhciByZXN1bHQgPSBlZGl0YWJsZUxheWVycy5yZWR1Y2UoZnVuY3Rpb24obGF5ZXJQcm9wcywgbGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZhciBzbmFwID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnc25hcCcpID8gb3B0aW9ucy5zbmFwIDogdHJ1ZTtcclxuICAgIHZhciBzbmFwTGF5ZXJzID0gb3B0aW9ucy5zbmFwTGF5ZXJzIHx8IGVkaXRhYmxlTGF5ZXJzO1xyXG4gICAgbGF5ZXIuc2V0KCdzbmFwJywgc25hcCk7XHJcbiAgICBsYXllci5zZXQoJ3NuYXBMYXllcnMnLCBzbmFwTGF5ZXJzKTtcclxuICAgIGxheWVyUHJvcHNbbGF5ZXJOYW1lXSA9IGxheWVyO1xyXG4gICAgcmV0dXJuIGxheWVyUHJvcHM7XHJcbiAgfSwgaW5pdGlhbFZhbHVlKTtcclxuICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBpc0FjdGl2ZSgpIHtcclxuICBpZiAobW9kaWZ5ID09PSB1bmRlZmluZWQgfHwgc2VsZWN0ID09PSB1bmRlZmluZWQpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvbkRlbGV0ZVNlbGVjdGVkKCkge1xyXG4gIHZhciBmZWF0dXJlcyA9IHNlbGVjdC5nZXRGZWF0dXJlcygpO1xyXG5cclxuICAvLyBNYWtlIHN1cmUgYWxsIGZlYXR1cmVzIGFyZSBsb2FkZWQgaW4gdGhlIHNvdXJjZVxyXG4gIGVkaXRTb3VyY2UgPSBlZGl0TGF5ZXJzW2N1cnJlbnRMYXllcl0uZ2V0U291cmNlKCk7XHJcbiAgaWYgKGZlYXR1cmVzLmdldExlbmd0aCgpID09PSAxKSB7XHJcbiAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVzLml0ZW0oMCk7XHJcbiAgICB2YXIgciA9IGNvbmZpcm0oJ8OEciBkdSBzw6RrZXIgcMOlIGF0dCBkdSB2aWxsIHRhIGJvcnQgZGV0IGjDpHIgb2JqZWt0ZXQ/Jyk7XHJcbiAgICBpZiAociA9PT0gdHJ1ZSkge1xyXG4gICAgICBzYXZlRmVhdHVyZSh7XHJcbiAgICAgICAgZmVhdHVyZTogZmVhdHVyZSxcclxuICAgICAgICBsYXllck5hbWU6IGN1cnJlbnRMYXllcixcclxuICAgICAgICBhY3Rpb246ICdkZWxldGUnXHJcbiAgICAgIH0pO1xyXG4gICAgICBzZWxlY3QuZ2V0RmVhdHVyZXMoKS5jbGVhcigpO1xyXG4gICAgICBlZGl0U291cmNlLnJlbW92ZUZlYXR1cmUoZWRpdFNvdXJjZS5nZXRGZWF0dXJlQnlJZChmZWF0dXJlLmdldElkKCkpKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uTW9kaWZ5RW5kKGV2dCkge1xyXG4gIHZhciBmZWF0dXJlID0gZXZ0LmZlYXR1cmVzLml0ZW0oMCk7XHJcbiAgc2F2ZUZlYXR1cmUoe1xyXG4gICAgZmVhdHVyZTogZmVhdHVyZSxcclxuICAgIGxheWVyTmFtZTogY3VycmVudExheWVyLFxyXG4gICAgYWN0aW9uOiAndXBkYXRlJ1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkRyYXdFbmQoZXZ0KSB7XHJcbiAgdmFyIGZlYXR1cmUgPSBldnQuZmVhdHVyZTtcclxuICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIoY3VycmVudExheWVyKTtcclxuICB2YXIgYXR0cmlidXRlcyA9IGdldERlZmF1bHRWYWx1ZXMobGF5ZXIuZ2V0KCdhdHRyaWJ1dGVzJykpO1xyXG4gIGZlYXR1cmUuc2V0UHJvcGVydGllcyhhdHRyaWJ1dGVzKTtcclxuICBmZWF0dXJlLnNldElkKGdlbmVyYXRlVVVJRCgpKTtcclxuICBlZGl0U291cmNlLmFkZEZlYXR1cmUoZmVhdHVyZSk7XHJcbiAgc2V0QWN0aXZlKCk7XHJcbiAgaGFzRHJhdyA9IGZhbHNlO1xyXG4gIHNhdmVGZWF0dXJlKHtcclxuICAgIGZlYXR1cmU6IGZlYXR1cmUsXHJcbiAgICBsYXllck5hbWU6IGN1cnJlbnRMYXllcixcclxuICAgIGFjdGlvbjogJ2luc2VydCdcclxuICB9KTtcclxuICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VFZGl0KCdkcmF3JywgZmFsc2UpO1xyXG4gIGlmIChhdXRvRm9ybSkge1xyXG4gICAgZWRpdEF0dHJpYnV0ZXMoZmVhdHVyZSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjYW5jZWxEcmF3KCkge1xyXG4gIHNldEFjdGl2ZSgpO1xyXG4gIGhhc0RyYXcgPSBmYWxzZTtcclxuICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VFZGl0KCdkcmF3JywgZmFsc2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkNoYW5nZVNoYXBlKGUpIHtcclxuICBzZXRJbnRlcmFjdGlvbnMoZS5zaGFwZSk7XHJcbiAgc3RhcnREcmF3KCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbmNlbEF0dHJpYnV0ZSgpIHtcclxuICBtb2RhbC5jbG9zZU1vZGFsKCk7XHJcbiAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRWRpdCgnYXR0cmlidXRlJywgZmFsc2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkF0dHJpYnV0ZXNTYXZlKGZlYXR1cmUsIGF0dHJpYnV0ZXMpIHtcclxuICAkKCcjby1zYXZlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIHZhciBlZGl0RWwgPSB7fTtcclxuICAgIHZhciBmaWxlUmVhZGVyO1xyXG4gICAgdmFyIGltYWdlRGF0YTtcclxuICAgIHZhciBpbnB1dDtcclxuICAgIHZhciBmaWxlO1xyXG4gICAgdmFyIG9yaWVudGF0aW9uO1xyXG5cclxuICAgIC8vUmVhZCB2YWx1ZXMgZnJvbSBmb3JtXHJcbiAgICBhdHRyaWJ1dGVzLmZvckVhY2goZnVuY3Rpb24oYXR0cmlidXRlKSB7XHJcblxyXG4gICAgICAvL0dldCB0aGUgaW5wdXQgY29udGFpbmVyIGNsYXNzXHJcbiAgICAgIHZhciBjb250YWluZXJDbGFzcyA9ICcuJyArIGF0dHJpYnV0ZS5lbElkLnNsaWNlKDEpO1xyXG5cclxuICAgICAgLy8gSWYgaGlkZGVuIGVsZW1lbnQgaXQgc2hvdWxkIGJlIGV4Y2x1ZGVkXHJcbiAgICAgIGlmICgkKGNvbnRhaW5lckNsYXNzKS5oYXNDbGFzcygnby1oaWRkZW4nKSA9PT0gZmFsc2UpIHtcclxuXHJcbiAgICAgICAgLy9DaGVjayBpZiBjaGVja2JveC4gSWYgY2hlY2tib3ggcmVhZCBzdGF0ZS5cclxuICAgICAgICBpZiAoJChhdHRyaWJ1dGUuZWxJZCkuYXR0cigndHlwZScpID09PSAnY2hlY2tib3gnKSB7XHJcbiAgICAgICAgICBlZGl0RWxbYXR0cmlidXRlLm5hbWVdID0gJChhdHRyaWJ1dGUuZWxJZCkuaXMoJzpjaGVja2VkJykgPyAxIDogMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vUmVhZCB2YWx1ZSBmcm9tIGlucHV0IHRleHQsIHRleHRhcmVhIG9yIHNlbGVjdFxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgZWRpdEVsW2F0dHJpYnV0ZS5uYW1lXSA9ICQoYXR0cmlidXRlLmVsSWQpLnZhbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgLy9DaGVjayBpZiBmaWxlLiBJZiBmaWxlLCByZWFkIGFuZCB0cmlnZ2VyIHJlc2l6ZVxyXG4gICAgICBpZiAoJChhdHRyaWJ1dGUuZWxJZCkuYXR0cigndHlwZScpID09PSAnZmlsZScpIHtcclxuICAgICAgICBpbnB1dCA9ICQoYXR0cmlidXRlLmVsSWQpWzBdO1xyXG4gICAgICAgIGZpbGUgPSBpbnB1dC5maWxlc1swXTtcclxuXHJcbiAgICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICAgIGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZ2V0SW1hZ2VPcmllbnRhdGlvbihmaWxlLCBmdW5jdGlvbihvcmllbnRhdGlvbikge1xyXG4gICAgICAgICAgICAgIGltYWdlcmVzaXplcihmaWxlUmVhZGVyLnJlc3VsdCwgYXR0cmlidXRlLCBvcmllbnRhdGlvbiwgZnVuY3Rpb24ocmVzaXplZCkge1xyXG4gICAgICAgICAgICAgICAgZWRpdEVsW2F0dHJpYnV0ZS5uYW1lXSA9IHJlc2l6ZWQ7XHJcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS50cmlnZ2VyKCdpbWFnZXJlc2l6ZWQnKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBlZGl0RWxbYXR0cmlidXRlLm5hbWVdID0gJChhdHRyaWJ1dGVzWzBdLmVsSWQpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZmlsZVJlYWRlciAmJiBmaWxlUmVhZGVyLnJlYWR5U3RhdGUgPT0gMSkge1xyXG4gICAgICAkKGRvY3VtZW50KS5vbignaW1hZ2VyZXNpemVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgYXR0cmlidXRlc1NhdmVIYW5kbGVyKGZlYXR1cmUsIGVkaXRFbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXR0cmlidXRlc1NhdmVIYW5kbGVyKGZlYXR1cmUsIGVkaXRFbCk7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kYWwuY2xvc2VNb2RhbCgpO1xyXG4gICAgJCgnI28tc2F2ZS1idXR0b24nKS5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGF0dHJpYnV0ZXNTYXZlSGFuZGxlcihmZWF0dXJlLCBmb3JtRWwpIHtcclxuXHJcbiAgLy9nZXQgRE9NIHZhbHVlcyBhbmQgc2V0IGF0dHJpYnV0ZSB2YWx1ZXMgdG8gZmVhdHVyZVxyXG4gIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihhdHRyaWJ1dGUpIHtcclxuICAgIGlmIChmb3JtRWwuaGFzT3duUHJvcGVydHkoYXR0cmlidXRlLm5hbWUpKSB7XHJcbiAgICAgIGZlYXR1cmUuc2V0KGF0dHJpYnV0ZS5uYW1lLCBmb3JtRWxbYXR0cmlidXRlLm5hbWVdKTtcclxuICAgIH1cclxuICB9KTtcclxuICBzYXZlRmVhdHVyZSh7XHJcbiAgICBmZWF0dXJlOiBmZWF0dXJlLFxyXG4gICAgbGF5ZXJOYW1lOiBjdXJyZW50TGF5ZXIsXHJcbiAgICBhY3Rpb246ICd1cGRhdGUnXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUludGVyYWN0aW9ucygpIHtcclxuICBpZiAoaXNBY3RpdmUoKSkge1xyXG4gICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKG1vZGlmeSk7XHJcbiAgICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24oc2VsZWN0KTtcclxuICAgIG1hcC5yZW1vdmVJbnRlcmFjdGlvbihkcmF3KTtcclxuICAgIGlmIChzbmFwKSB7XHJcbiAgICAgIHNuYXAuZm9yRWFjaChmdW5jdGlvbihzbmFwSW50ZXJhY3Rpb24pIHtcclxuICAgICAgICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24oc25hcEludGVyYWN0aW9uKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kaWZ5ID0gdW5kZWZpbmVkO1xyXG4gICAgc2VsZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgZHJhdyA9IHVuZGVmaW5lZDtcclxuICAgIHNuYXAgPSB1bmRlZmluZWQ7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzdGFydERyYXcoKSB7XHJcbiAgaWYgKGhhc0RyYXcgIT09IHRydWUgJiYgaXNBY3RpdmUoKSkge1xyXG4gICAgc2V0QWN0aXZlKCdkcmF3Jyk7XHJcbiAgICBoYXNEcmF3ID0gdHJ1ZTtcclxuICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUVkaXQoJ2RyYXcnLCB0cnVlKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZExpc3RlbmVyKCkge1xyXG4gIHZhciBmbiA9IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgJChvYmouZWxEZXBlbmRlbmN5SWQpLm9uKG9iai5ldmVudFR5cGUsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdmFyIGNvbnRhaW5lckNsYXNzID0gJy4nICsgb2JqLmVsSWQuc2xpY2UoMSk7XHJcbiAgICAgIGlmICgkKG9iai5lbERlcGVuZGVuY3lJZCArICgnIG9wdGlvbjpzZWxlY3RlZCcpKS50ZXh0KCkgPT09IG9iai5yZXF1aXJlZFZhbCkge1xyXG4gICAgICAgICQoY29udGFpbmVyQ2xhc3MpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoY29udGFpbmVyQ2xhc3MpLmFkZENsYXNzKCdvLWhpZGRlbicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBmbjtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkSW1hZ2VMaXN0ZW5lcigpIHtcclxuICB2YXIgZm4gPSBmdW5jdGlvbihvYmopIHtcclxuICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgIHZhciBjb250YWluZXJDbGFzcyA9ICcuJyArIG9iai5lbElkLnNsaWNlKDEpO1xyXG4gICAgJChvYmouZWxJZCkub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgJChjb250YWluZXJDbGFzcyArICcgaW1nJykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICAgICQoY29udGFpbmVyQ2xhc3MgKyAnIGlucHV0W3R5cGU9YnV0dG9uXScpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuZmlsZXMgJiYgdGhpcy5maWxlc1swXSkge1xyXG4gICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICQoY29udGFpbmVyQ2xhc3MgKyAnIGltZycpLmF0dHIoJ3NyYycsIGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGNvbnRhaW5lckNsYXNzICsgJyBpbnB1dFt0eXBlPWJ1dHRvbl0nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICQob2JqLmVsSWQpLmF0dHIoJ3ZhbHVlJywgJycpO1xyXG4gICAgICAkKGNvbnRhaW5lckNsYXNzICsgJyBpbWcnKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZuO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblRvZ2dsZUVkaXQoZSkge1xyXG4gIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgaWYgKGUudG9vbCA9PT0gJ2RyYXcnKSB7XHJcbiAgICBpZiAoaGFzRHJhdyA9PT0gZmFsc2UpIHtcclxuICAgICAgc2V0SW50ZXJhY3Rpb25zKCk7XHJcbiAgICAgIHN0YXJ0RHJhdygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2FuY2VsRHJhdygpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAoZS50b29sID09PSAnYXR0cmlidXRlJykge1xyXG4gICAgaWYgKGhhc0F0dHJpYnV0ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgZWRpdEF0dHJpYnV0ZXMoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhbmNlbEF0dHJpYnV0ZSgpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAoZS50b29sID09PSAnZGVsZXRlJykge1xyXG4gICAgICBvbkRlbGV0ZVNlbGVjdGVkKCk7XHJcbiAgfSBlbHNlIGlmIChlLnRvb2wgPT09ICdlZGl0Jykge1xyXG4gICAgICBzZXRFZGl0TGF5ZXIoZS5jdXJyZW50TGF5ZXIpO1xyXG4gIH0gZWxzZSBpZiAoZS50b29sID09PSAnY2FuY2VsJykge1xyXG4gICAgICByZW1vdmVJbnRlcmFjdGlvbnMoKTtcclxuICB9IGVsc2UgaWYgKGUudG9vbCA9PT0gJ3NhdmUnKSB7XHJcbiAgICAgIHNhdmVGZWF0dXJlcygpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25DaGFuZ2VFZGl0KGUpIHtcclxuICBpZiAoZS50b29sIT09ICdkcmF3JyAmJiBlLmFjdGl2ZSkge1xyXG4gICAgY2FuY2VsRHJhdygpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U25hcFNvdXJjZXMobGF5ZXJzKSB7XHJcbiAgdmFyIHNvdXJjZXMgPSBsYXllcnMubWFwKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICByZXR1cm4gdmlld2VyLmdldExheWVyKGxheWVyKS5nZXRTb3VyY2UoKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHNvdXJjZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFNuYXBJbnRlcmFjdGlvbihzb3VyY2VzKSB7XHJcbiAgdmFyIHNuYXBJbnRlcmFjdGlvbnMgPSBbXTtcclxuICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oc291cmNlKSB7XHJcbiAgICB2YXIgaW50ZXJhY3Rpb24gPSBuZXcgb2wuaW50ZXJhY3Rpb24uU25hcCh7XHJcbiAgICAgIHNvdXJjZTogc291cmNlXHJcbiAgICB9KTtcclxuICAgIHNuYXBJbnRlcmFjdGlvbnMucHVzaChpbnRlcmFjdGlvbik7XHJcbiAgICBtYXAuYWRkSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pO1xyXG4gIH0pO1xyXG4gIHJldHVybiBzbmFwSW50ZXJhY3Rpb25zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRBY3RpdmUoZWRpdFR5cGUpIHtcclxuICBzd2l0Y2ggKGVkaXRUeXBlKSB7XHJcbiAgICBjYXNlICdtb2RpZnknOlxyXG4gICAgICBkcmF3LnNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICAgIG1vZGlmeS5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgIHNlbGVjdC5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnZHJhdyc6XHJcbiAgICAgIGRyYXcuc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgICBtb2RpZnkuc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgICBzZWxlY3Quc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICBkcmF3LnNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICAgIGhhc0RyYXcgPSBmYWxzZTtcclxuICAgICAgbW9kaWZ5LnNldEFjdGl2ZSh0cnVlKTtcclxuICAgICAgc2VsZWN0LnNldEFjdGl2ZSh0cnVlKTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBlZGl0QXR0cmlidXRlcyhmZWF0dXJlKSB7XHJcbiAgdmFyIGF0dHJpYnV0ZU9iamVjdHM7XHJcbiAgdmFyIGZlYXR1cmVzO1xyXG5cclxuICAvL0dldCBhdHRyaWJ1dGVzIGZyb20gdGhlIGNyZWF0ZWQsIG9yIHRoZSBzZWxlY3RlZCwgZmVhdHVyZSBhbmQgZmlsbCBET00gZWxlbWVudHMgd2l0aCB0aGUgdmFsdWVzXHJcbiAgaWYgKGZlYXR1cmUpIHtcclxuICAgIGZlYXR1cmVzID0gbmV3IG9sLkNvbGxlY3Rpb24oKTtcclxuICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGZlYXR1cmVzID0gc2VsZWN0LmdldEZlYXR1cmVzKCk7XHJcbiAgfVxyXG4gIGlmIChmZWF0dXJlcy5nZXRMZW5ndGgoKSA9PT0gMSkge1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRWRpdCgnYXR0cmlidXRlJywgdHJ1ZSk7XHJcbiAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVzLml0ZW0oMCk7XHJcbiAgICBpZiAoYXR0cmlidXRlcy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAvL0NyZWF0ZSBhbiBhcnJheSBvZiBkZWZpbmVkIGF0dHJpYnV0ZXMgYW5kIGNvcnJlc3BvbmRpbmcgdmFsdWVzIGZyb20gc2VsZWN0ZWQgZmVhdHVyZVxyXG4gICAgICBhdHRyaWJ1dGVPYmplY3RzID0gYXR0cmlidXRlcy5tYXAoZnVuY3Rpb24oYXR0cmlidXRlT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgICQuZXh0ZW5kKG9iaiwgYXR0cmlidXRlT2JqZWN0KTtcclxuICAgICAgICBvYmoudmFsID0gZmVhdHVyZS5nZXQob2JqLm5hbWUpIHx8ICcnO1xyXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoJ2NvbnN0cmFpbnQnKSkge1xyXG4gICAgICAgICAgdmFyIGNvbnN0cmFpbnRQcm9wcyA9IG9iai5jb25zdHJhaW50LnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICBpZiAoY29uc3RyYWludFByb3BzLmxlbmd0aCA9PT0gMykge1xyXG4gICAgICAgICAgICBvYmouZXZlbnRUeXBlID0gY29uc3RyYWludFByb3BzWzBdO1xyXG4gICAgICAgICAgICBvYmouZGVwZW5kZW5jeVZhbCA9IGZlYXR1cmUuZ2V0KGNvbnN0cmFpbnRQcm9wc1sxXSk7XHJcbiAgICAgICAgICAgIG9iai5yZXF1aXJlZFZhbCA9IGNvbnN0cmFpbnRQcm9wc1syXTtcclxuICAgICAgICAgICAgb2JqLmRlcGVuZGVuY3lWYWwgPT09IG9iai5yZXF1aXJlZFZhbCA/IG9iai5pc1Zpc2libGUgPSB0cnVlIDogb2JqLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBvYmouYWRkTGlzdGVuZXIgPSBhZGRMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICBvYmouZWxJZCA9ICcjaW5wdXQtJyArIG9iai5uYW1lICsgJy0nICsgb2JqLnJlcXVpcmVkVmFsO1xyXG4gICAgICAgICAgICBvYmouZWxEZXBlbmRlbmN5SWQgPSAnI2lucHV0LScgKyBjb25zdHJhaW50UHJvcHNbMV07XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbGVydCgnVmlsbGtvciB2ZXJrYXIgaW50ZSB2YXJhIHLDpHR0IGZvcm11bGVyYXQuIFZpbGxrb3IgZm9ybXVsZXJhcyBlbmxpZ3QgcHJpbmNpcGVuIGNoYW5nZTphdHRyaWJ1dGU6dmFsdWUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKG9iai50eXBlID09PSAnaW1hZ2UnKSB7XHJcbiAgICAgICAgICBvYmouaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgIG9iai5lbElkID0gJyNpbnB1dC0nICsgb2JqLm5hbWU7XHJcbiAgICAgICAgICBvYmouYWRkTGlzdGVuZXIgPSBhZGRJbWFnZUxpc3RlbmVyKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG9iai5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgb2JqLmVsSWQgPSAnI2lucHV0LScgKyBvYmoubmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iai5mb3JtRWxlbWVudCA9IGVkaXRGb3JtKG9iaik7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4gICAgdmFyIGZvcm1FbGVtZW50ID0gYXR0cmlidXRlT2JqZWN0cy5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgbmV4dCkge1xyXG4gICAgICByZXR1cm4gcHJldiArIG5leHQuZm9ybUVsZW1lbnQ7XHJcbiAgICB9LCAnJyk7XHJcbiAgICB2YXIgZm9ybSA9ICc8Zm9ybT4nICsgZm9ybUVsZW1lbnQgKyAnPGJyPjxkaXYgY2xhc3M9XCJvLWZvcm0tc2F2ZVwiPjxpbnB1dCBpZD1cIm8tc2F2ZS1idXR0b25cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJPa1wiPjwvaW5wdXQ+PC9kaXY+PC9mb3JtPic7XHJcbiAgICBtb2RhbC5jcmVhdGVNb2RhbCgnI28tbWFwJywge1xyXG4gICAgICB0aXRsZTogdGl0bGUsXHJcbiAgICAgIGNvbnRlbnQ6IGZvcm0sXHJcbiAgICAgIHN0YXRpYzogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBtb2RhbC5zaG93TW9kYWwoKTtcclxuXHJcbiAgICBhdHRyaWJ1dGVPYmplY3RzLmZvckVhY2goZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoJ2FkZExpc3RlbmVyJykpIHtcclxuICAgICAgICBvYmouYWRkTGlzdGVuZXIob2JqKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgb25BdHRyaWJ1dGVzU2F2ZShmZWF0dXJlLCBhdHRyaWJ1dGVPYmplY3RzKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhdmVGZWF0dXJlKGNoYW5nZSkge1xyXG4gIGRpc3BhdGNoZXIuZW1pdENoYW5nZUZlYXR1cmUoY2hhbmdlKTtcclxuICBpZiAoYXV0b1NhdmUpIHtcclxuICAgIHNhdmVGZWF0dXJlcyhjaGFuZ2UpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZUZlYXR1cmVzKCkge1xyXG4gIHZhciBlZGl0cyA9IGVkaXRzU3RvcmUuZ2V0RWRpdHMoKTtcclxuICB2YXIgbGF5ZXJOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGVkaXRzKTtcclxuICBsYXllck5hbWVzLmZvckVhY2goZnVuY3Rpb24obGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgdHJhbnNhY3Rpb24gPSB7XHJcbiAgICAgIGluc2VydDogbnVsbCxcclxuICAgICAgZGVsZXRlOiBudWxsLFxyXG4gICAgICB1cGRhdGU6IG51bGxcclxuICAgIH07XHJcbiAgICB2YXIgZWRpdFR5cGVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZWRpdHNbbGF5ZXJOYW1lXSk7XHJcbiAgICBlZGl0VHlwZXMuZm9yRWFjaChmdW5jdGlvbihlZGl0VHlwZSkge1xyXG4gICAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgICAgdmFyIGlkcyA9IGVkaXRzW2xheWVyTmFtZV1bZWRpdFR5cGVdO1xyXG4gICAgICB2YXIgZmVhdHVyZXM7XHJcbiAgICAgIGZlYXR1cmVzID0gZ2V0RmVhdHVyZXNCeUlkcyhlZGl0VHlwZSwgbGF5ZXIsIGlkcyk7XHJcbiAgICAgIGlmIChmZWF0dXJlcy5sZW5ndGgpIHtcclxuICAgICAgICB0cmFuc2FjdGlvbltlZGl0VHlwZV0gPSBmZWF0dXJlcztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdHJhbnNhY3Rpb25IYW5kbGVyKHRyYW5zYWN0aW9uLCBsYXllck5hbWUpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGZWF0dXJlc0J5SWRzKHR5cGUsIGxheWVyLCBpZHMpIHtcclxuICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XHJcbiAgdmFyIGZlYXR1cmVzID0gW107XHJcbiAgaWYgKHR5cGUgPT09ICdkZWxldGUnKSB7XHJcbiAgICBpZHMuZm9yRWFjaChmdW5jdGlvbihpZCkge1xyXG4gICAgICB2YXIgZHVtbXkgPSBuZXcgb2wuRmVhdHVyZSgpO1xyXG4gICAgICBkdW1teS5zZXRJZChpZCk7XHJcbiAgICAgIGZlYXR1cmVzLnB1c2goZHVtbXkpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGlkcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgIGlmIChzb3VyY2UuZ2V0RmVhdHVyZUJ5SWQoaWQpKSB7XHJcbiAgICAgICAgLyoqKiBSRU1PVkUgKioqL1xyXG4gICAgICAgIHZhciBmZWF0dXJlID0gc291cmNlLmdldEZlYXR1cmVCeUlkKGlkKTtcclxuICAgICAgICBmZWF0dXJlLnVuc2V0KCdiYm94Jyk7XHJcbiAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgICAvKioqICoqKiAqKiovXHJcblxyXG4gICAgICAgIC8vZmVhdHVyZXMucHVzaChzb3VyY2UuZ2V0RmVhdHVyZUJ5SWQoaWQpKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZmVhdHVyZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldERlZmF1bHRWYWx1ZXMoYXR0cmlidXRlcykge1xyXG4gIHJldHVybiBhdHRyaWJ1dGVzLmZpbHRlcihmdW5jdGlvbihhdHRyaWJ1dGUpIHtcclxuICAgICAgaWYgKGF0dHJpYnV0ZS5uYW1lICYmIGF0dHJpYnV0ZS5kZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gYXR0cmlidXRlO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyKSB7XHJcbiAgICAgIHByZXZbY3Vyci5uYW1lXSA9IGN1cnIuZGVmYXVsdFZhbHVlXHJcbiAgICAgIHJldHVybiBwcmV2O1xyXG4gICAgfSx7fSk7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBkcm9wRG93biA9IHJlcXVpcmUoJy4uL2Ryb3Bkb3duJyk7XHJcbnZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9lZGl0ZGlzcGF0Y2hlcicpO1xyXG52YXIgY3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoJy4uL3V0aWxzJykuY3JlYXRlRWxlbWVudDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZWRpdG9yTGF5ZXJzKGVkaXRhYmxlTGF5ZXJzLCBvcHRfb3B0aW9ucykge1xyXG4gIHZhciBhY3RpdmUgPSBmYWxzZTtcclxuICB2YXIgYWN0aXZlQ2xzID0gJ28tYWN0aXZlJztcclxuICB2YXIgdGFyZ2V0ID0gJ2VkaXRvci10b29sYmFyLWxheWVycy1kcm9wZG93bic7XHJcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgdGFyZ2V0OiB0YXJnZXQsXHJcbiAgICBzZWxlY3RPcHRpb25zOiBzZWxlY3Rpb25Nb2RlbChlZGl0YWJsZUxheWVycyksXHJcbiAgICBhY3RpdmVMYXllcjogZWRpdGFibGVMYXllcnNbMF1cclxuICB9O1xyXG4gIHZhciByZW5kZXJPcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdE9wdGlvbnMsIG9wdF9vcHRpb25zKTtcclxuXHJcbiAgcmVuZGVyKHJlbmRlck9wdGlvbnMpO1xyXG4gIGFkZExpc3RlbmVyKHRhcmdldCk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlcihvcHRpb25zKSB7XHJcbiAgICB2YXIgcG9wb3ZlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsICcnLCB7XHJcbiAgICAgIGlkOiBvcHRpb25zLnRhcmdldCxcclxuICAgICAgY2xzOiAnby1wb3BvdmVyJ1xyXG4gICAgfSk7XHJcbiAgICAkKCcjJyArICdvLWVkaXRvci1sYXllcnMnKS5hZnRlcihwb3BvdmVyKTtcclxuICAgIGRyb3BEb3duKG9wdGlvbnMudGFyZ2V0LCBvcHRpb25zLnNlbGVjdE9wdGlvbnMsIHtcclxuICAgICAgZGF0YUF0dHJpYnV0ZTogJ2xheWVyJyxcclxuICAgICAgYWN0aXZlOiBvcHRpb25zLmFjdGl2ZUxheWVyXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZExpc3RlbmVyKCkge1xyXG4gICAgJCgnIycgKyB0YXJnZXQpLm9uKCdjaGFuZ2VEcm9wZG93bicsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oZSk7XHJcbiAgICAgIHNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICAgIGRpc3BhdGNoZXIuZW1pdFRvZ2dsZUVkaXQoJ2VkaXQnLCB7XHJcbiAgICAgICAgY3VycmVudExheWVyOiBlLmRhdGFBdHRyaWJ1dGVcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCd0b2dnbGVFZGl0Jywgb25Ub2dnbGVFZGl0KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VFZGl0Jywgb25DaGFuZ2VFZGl0KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uVG9nZ2xlRWRpdChlKSB7XHJcbiAgICBpZiAoZS50b29sID09PSAnbGF5ZXJzJykge1xyXG4gICAgICBpZiAoYWN0aXZlKSB7XHJcbiAgICAgICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkNoYW5nZUVkaXQoZSkge1xyXG4gICAgaWYgKGUudG9vbCAhPT0gJ2xheWVycycgJiYgZS5hY3RpdmUgPT09IHRydWUpIHtcclxuICAgICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgIH1cclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUpIHtcclxuICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICBhY3RpdmUgPSB0cnVlO1xyXG4gICAgICAkKCcjJyArIHRhcmdldCkuYWRkQ2xhc3MoYWN0aXZlQ2xzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAkKCcjJyArIHRhcmdldCkucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xzKTtcclxuICAgIH1cclxuICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUVkaXQoJ2xheWVycycsIGFjdGl2ZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbG9zZSgpIHtcclxuICAgIGlmIChhY3RpdmUpIHtcclxuICAgICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNlbGVjdGlvbk1vZGVsKGxheWVyTmFtZXMpIHtcclxuICAgIHZhciBzZWxlY3RPcHRpb25zID0gbGF5ZXJOYW1lcy5tYXAoZnVuY3Rpb24obGF5ZXJOYW1lKSB7XHJcbiAgICAgIHZhciBvYmogPSB7fTtcclxuICAgICAgb2JqLm5hbWUgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKS5nZXQoJ3RpdGxlJyk7XHJcbiAgICAgIG9iai52YWx1ZSA9IGxheWVyTmFtZTtcclxuICAgICAgcmV0dXJuIG9iajtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHNlbGVjdE9wdGlvbnM7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBlZGl0b3J0ZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi90ZW1wbGF0ZXMvZWRpdG9ydG9vbGJhci50ZW1wbGF0ZS5oYW5kbGViYXJzXCIpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZWRpdGRpc3BhdGNoZXInKTtcclxudmFyIGVkaXRIYW5kbGVyID0gcmVxdWlyZSgnLi9lZGl0aGFuZGxlcicpO1xyXG52YXIgZWRpdG9yTGF5ZXJzID0gcmVxdWlyZSgnLi9lZGl0b3JsYXllcnMnKTtcclxudmFyIGRyYXdUb29scyA9IHJlcXVpcmUoJy4vZHJhd3Rvb2xzJyk7XHJcblxyXG52YXIgYWN0aXZlQ2xhc3MgPSAnby1jb250cm9sLWFjdGl2ZSc7XHJcbnZhciBkaXNhYmxlQ2xhc3MgPSAnby1kaXNhYmxlZCc7XHJcbnZhciBjdXJyZW50TGF5ZXIgPSB1bmRlZmluZWQ7XHJcbnZhciBlZGl0YWJsZUxheWVycyA9IHVuZGVmaW5lZDtcclxudmFyICRlZGl0QXR0cmlidXRlID0gdW5kZWZpbmVkO1xyXG52YXIgJGVkaXREcmF3ID0gdW5kZWZpbmVkO1xyXG52YXIgJGVkaXREZWxldGUgPSB1bmRlZmluZWQ7XHJcbnZhciAkZWRpdExheWVycyA9IHVuZGVmaW5lZDtcclxudmFyICRlZGl0U2F2ZSA9IHVuZGVmaW5lZDtcclxudmFyICRlZGl0Q2xvc2UgPSB1bmRlZmluZWQ7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogSW5pdFxyXG4gIH07XHJcbn0oKVxyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRpb25zKSB7XHJcbiAgY3VycmVudExheWVyID0gb3B0aW9ucy5jdXJyZW50TGF5ZXI7XHJcbiAgZWRpdGFibGVMYXllcnMgPSBvcHRpb25zLmVkaXRhYmxlTGF5ZXJzO1xyXG5cclxuICBlZGl0SGFuZGxlcihvcHRpb25zKTtcclxuICByZW5kZXIoKTtcclxuICBlZGl0b3JMYXllcnMoZWRpdGFibGVMYXllcnMsIHtcclxuICAgIGFjdGl2ZUxheWVyOiBjdXJyZW50TGF5ZXJcclxuICB9KTtcclxuICBkcmF3VG9vbHMob3B0aW9ucy5kcmF3VG9vbHMsIGN1cnJlbnRMYXllcik7XHJcblxyXG4gICQoZG9jdW1lbnQpLm9uKCdlbmFibGVJbnRlcmFjdGlvbicsIG9uRW5hYmxlSW50ZXJhY3Rpb24pO1xyXG4gICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VFZGl0Jywgb25DaGFuZ2VFZGl0KTtcclxuICAkKGRvY3VtZW50KS5vbignZWRpdHNDaGFuZ2UnLCB0b2dnbGVTYXZlKTtcclxuXHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG5cclxuICBpZiAob3B0aW9ucy5pc0FjdGl2ZSkge1xyXG4gICAgc2V0QWN0aXZlKHRydWUpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICQoXCIjby10b29scy1ib3R0b21cIikuYXBwZW5kKGVkaXRvcnRlbXBsYXRlKCkpO1xyXG4gICRlZGl0QXR0cmlidXRlID0gJCgnI28tZWRpdG9yLWF0dHJpYnV0ZScpO1xyXG4gICRlZGl0RHJhdyA9ICQoJyNvLWVkaXRvci1kcmF3Jyk7XHJcbiAgJGVkaXREZWxldGUgPSAkKCcjby1lZGl0b3ItZGVsZXRlJyk7XHJcbiAgJGVkaXRMYXllcnMgPSAkKCcjby1lZGl0b3ItbGF5ZXJzJyk7XHJcbiAgJGVkaXRTYXZlID0gJCgnI28tZWRpdG9yLXNhdmUnKTtcclxuICAkZWRpdENsb3NlID0gJCgnI28tZWRpdG9yLWNsb3NlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICRlZGl0RHJhdy5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRUb2dnbGVFZGl0KCdkcmF3Jyk7XHJcbiAgICAkZWRpdERyYXcuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0pO1xyXG4gICRlZGl0QXR0cmlidXRlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGRpc3BhdGNoZXIuZW1pdFRvZ2dsZUVkaXQoJ2F0dHJpYnV0ZScpO1xyXG4gICAgJGVkaXRBdHRyaWJ1dGUuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG4gICRlZGl0RGVsZXRlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGRpc3BhdGNoZXIuZW1pdFRvZ2dsZUVkaXQoJ2RlbGV0ZScpO1xyXG4gICAgJGVkaXREZWxldGUuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG4gICRlZGl0TGF5ZXJzLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGRpc3BhdGNoZXIuZW1pdFRvZ2dsZUVkaXQoJ2xheWVycycpO1xyXG4gICAgJGVkaXRMYXllcnMuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG4gICRlZGl0U2F2ZS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRUb2dnbGVFZGl0KCdzYXZlJyk7XHJcbiAgICAkZWRpdFNhdmUuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG4gICRlZGl0Q2xvc2Uub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgJCgnLm8tbWFwJykuZmlyc3QoKS50cmlnZ2VyKHtcclxuICAgICAgdHlwZTogJ2VuYWJsZUludGVyYWN0aW9uJyxcclxuICAgICAgaW50ZXJhY3Rpb246ICdmZWF0dXJlSW5mbydcclxuICAgIH0pO1xyXG4gICAgJGVkaXRDbG9zZS5ibHVyKCk7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkVuYWJsZUludGVyYWN0aW9uKGUpIHtcclxuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIGlmIChlLmludGVyYWN0aW9uID09PSAnZWRpdG9yJykge1xyXG4gICAgc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0VG9nZ2xlRWRpdCgnZWRpdCcsIHtcclxuICAgICAgY3VycmVudExheWVyOiBjdXJyZW50TGF5ZXJcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0VG9nZ2xlRWRpdCgnY2FuY2VsJyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUpIHtcclxuICBpZiAoc3RhdGUgPT09IHRydWUpIHtcclxuICAgICQoJyNvLWVkaXRvci10b29sYmFyJykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgICQoJyNvLWVkaXRvci10b29sYmFyJykuYWRkQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvbkNoYW5nZUVkaXQoZSkge1xyXG4gIGlmIChlLnRvb2wgPT09ICdkcmF3Jykge1xyXG4gICAgaWYgKGUuYWN0aXZlID09PSBmYWxzZSkge1xyXG4gICAgICAkZWRpdERyYXcucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJGVkaXREcmF3LmFkZENsYXNzKGFjdGl2ZUNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcbiAgaWYgKGUudG9vbCA9PT0gJ2xheWVycycpIHtcclxuICAgIGlmIChlLmFjdGl2ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgJGVkaXRMYXllcnMucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJGVkaXRMYXllcnMuYWRkQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAoZS5hY3RpdmUpIHtcclxuICAgICRlZGl0TGF5ZXJzLnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVNhdmUoZSkge1xyXG4gIGlmIChlLmVkaXRzKSB7XHJcbiAgICBpZiAoJGVkaXRTYXZlLmhhc0NsYXNzKGRpc2FibGVDbGFzcykpIHtcclxuICAgICAgJGVkaXRTYXZlLnJlbW92ZUNsYXNzKGRpc2FibGVDbGFzcyk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgICRlZGl0U2F2ZS5hZGRDbGFzcyhkaXNhYmxlQ2xhc3MpO1xyXG4gIH1cclxufVxyXG4iLCJ2YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL2VkaXRkaXNwYXRjaGVyJyk7XHJcblxyXG52YXIgZWRpdHNTdG9yZSA9IGZ1bmN0aW9uIGZlYXR1cmVTdG9yZSgpIHtcclxuICB2YXIgZWRpdHMgPSB7fTtcclxuXHJcbiAgJChkb2N1bWVudCkub24oJ2NoYW5nZUZlYXR1cmUnLCBmZWF0dXJlQ2hhbmdlKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdldEVkaXRzOiBnZXRFZGl0cyxcclxuICAgIGhhc0ZlYXR1cmU6IGhhc0ZlYXR1cmVcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBhZGRFZGl0KGUpIHtcclxuICAgIGlmIChlLmFjdGlvbiA9PT0gJ2luc2VydCcpIHtcclxuICAgICAgYWRkRmVhdHVyZSgnaW5zZXJ0JywgZS5mZWF0dXJlLCBlLmxheWVyTmFtZSk7XHJcbiAgICB9IGVsc2UgaWYgKGUuYWN0aW9uID09PSAndXBkYXRlJykge1xyXG4gICAgICBpZiAoaGFzRmVhdHVyZSgnaW5zZXJ0JywgZS5mZWF0dXJlLCBlLmxheWVyTmFtZSkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgYWRkRmVhdHVyZSgndXBkYXRlJywgZS5mZWF0dXJlLCBlLmxheWVyTmFtZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdkZWxldGUnKSB7XHJcbiAgICAgIGlmIChyZW1vdmVGZWF0dXJlKCdpbnNlcnQnLCBlLmZlYXR1cmUsIGUubGF5ZXJOYW1lKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICByZW1vdmVGZWF0dXJlKCd1cGRhdGUnLCBlLmZlYXR1cmUsIGUubGF5ZXJOYW1lKTtcclxuICAgICAgICBhZGRGZWF0dXJlKCdkZWxldGUnLCBlLmZlYXR1cmUsIGUubGF5ZXJOYW1lKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGhhc0VkaXRzKCkgPT09IHRydWUpIHtcclxuICAgICAgZGlzcGF0Y2hlci5lbWl0RWRpdHNDaGFuZ2UoMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkaXNwYXRjaGVyLmVtaXRFZGl0c0NoYW5nZSgwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZUVkaXQoZSkge1xyXG4gICAgaWYgKGUuZmVhdHVyZS5sZW5ndGgpIHtcclxuICAgICAgZS5mZWF0dXJlLmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICAgIHJlbW92ZUZlYXR1cmUoZS5hY3Rpb24sIGZlYXR1cmUsIGUubGF5ZXJOYW1lKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChoYXNFZGl0cygpID09PSBmYWxzZSkge1xyXG4gICAgICBkaXNwYXRjaGVyLmVtaXRFZGl0c0NoYW5nZSgwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldEVkaXRzKCkge1xyXG4gICAgcmV0dXJuIGVkaXRzO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZmVhdHVyZUNoYW5nZShlKSB7XHJcbiAgICBpZiAoZS5zdGF0dXMgPT09ICdwZW5kaW5nJykge1xyXG4gICAgICBhZGRFZGl0KGUpO1xyXG4gICAgfSBlbHNlIGlmIChlLnN0YXR1cyA9PT0gJ2ZpbmlzaGVkJykge1xyXG4gICAgICByZW1vdmVFZGl0KGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFzRmVhdHVyZSh0eXBlLCBmZWF0dXJlLCBsYXllck5hbWUpIHtcclxuICAgIGlmIChlZGl0cy5oYXNPd25Qcm9wZXJ0eShsYXllck5hbWUpKSB7XHJcbiAgICAgIGlmIChlZGl0c1tsYXllck5hbWVdW3R5cGVdLmluZGV4T2YoZmVhdHVyZS5nZXRJZCgpKSA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZEZlYXR1cmUodHlwZSwgZmVhdHVyZSwgbGF5ZXJOYW1lKSB7XHJcbiAgICBpZiAoZWRpdHMuaGFzT3duUHJvcGVydHkobGF5ZXJOYW1lKSA9PT0gZmFsc2UpIHtcclxuICAgICAgZWRpdHNbbGF5ZXJOYW1lXSA9IGNyZWF0ZUVkaXRzT2JqKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoaGFzRmVhdHVyZSh0eXBlLCBmZWF0dXJlLCBsYXllck5hbWUpID09PSBmYWxzZSkge1xyXG4gICAgICBlZGl0c1tsYXllck5hbWVdW3R5cGVdLnB1c2goZmVhdHVyZS5nZXRJZCgpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZUZlYXR1cmUodHlwZSwgZmVhdHVyZSwgbGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgaWYgKGVkaXRzLmhhc093blByb3BlcnR5KGxheWVyTmFtZSkpIHtcclxuICAgICAgaW5kZXggPSBlZGl0c1tsYXllck5hbWVdW3R5cGVdLmluZGV4T2YoZmVhdHVyZS5nZXRJZCgpKTtcclxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICBlZGl0c1tsYXllck5hbWVdW3R5cGVdLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgaXNGaW5pc2hlZChsYXllck5hbWUpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc0ZpbmlzaGVkKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGVkaXRUeXBlcztcclxuICAgIHZhciBmaW5pc2hlZCA9IHRydWU7XHJcbiAgICBpZiAoZWRpdHMuaGFzT3duUHJvcGVydHkobGF5ZXJOYW1lKSkge1xyXG4gICAgICBlZGl0VHlwZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlZGl0c1tsYXllck5hbWVdKTtcclxuICAgICAgZWRpdFR5cGVzLmZvckVhY2goZnVuY3Rpb24oZWRpdFR5cGUpIHtcclxuICAgICAgICBpZiAoZWRpdHNbbGF5ZXJOYW1lXVtlZGl0VHlwZV0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICBmaW5pc2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgcmV0dXJuIGZpbmlzaGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChmaW5pc2hlZCkge1xyXG4gICAgICAgIGRlbGV0ZSBlZGl0c1tsYXllck5hbWVdO1xyXG4gICAgICAgIHJldHVybiBmaW5pc2hlZDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZpbmlzaGVkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlRWRpdHNPYmooKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1cGRhdGU6IFtdLFxyXG4gICAgICBpbnNlcnQ6IFtdLFxyXG4gICAgICBkZWxldGU6IFtdXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYXNFZGl0cygpIHtcclxuICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlZGl0cykubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBlZGl0c1N0b3JlO1xyXG4iLCJ2YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZWRpdGRpc3BhdGNoZXInKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSkge1xyXG4gIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmVFZGl0cyh0cmFuc09iaiwgbGF5ZXJOYW1lKTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZHJhd1R5cGUpIHtcclxuICB2YXIgdHlwZXMgPSB7XHJcbiAgICBib3g6IHtcclxuICAgICAgdHlwZTogJ0NpcmNsZScsXHJcbiAgICAgIGdlb21ldHJ5RnVuY3Rpb246IG9sLmludGVyYWN0aW9uLkRyYXcuY3JlYXRlQm94KClcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBpZiAodHlwZXMuaGFzT3duUHJvcGVydHkoZHJhd1R5cGUpKSB7XHJcbiAgICByZXR1cm4gdHlwZXNbZHJhd1R5cGVdO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4ge307XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgd2ZzVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL3dmc3RyYW5zYWN0aW9uJyk7XHJcbnZhciBhZ3NUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vYWdzdHJhbnNhY3Rpb24nKTtcclxudmFyIGluZGV4ZWREYiA9IHJlcXVpcmUoJy4vaW5kZXhlZGRiJyk7XHJcbnZhciB0cmFuc2FjdGlvbnMgPSB7XHJcbiAgV0ZTOiB3ZnNUcmFuc2FjdGlvbixcclxuICBBR1NfRkVBVFVSRTogYWdzVHJhbnNhY3Rpb24sXHJcbiAgT0ZGTElORTogaW5kZXhlZERiXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRyYW5zYWN0aW9uLCBsYXllck5hbWUpIHtcclxuICB2YXIgdHlwZSA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpLmdldCgndHlwZScpO1xyXG4gIGlmICh0cmFuc2FjdGlvbnMuaGFzT3duUHJvcGVydHkodHlwZSkpIHtcclxuICAgIHRyYW5zYWN0aW9uc1t0eXBlXSh0cmFuc2FjdGlvbiwgbGF5ZXJOYW1lKTtcclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGVkaXRzU3RvcmUgPSByZXF1aXJlKCcuL2VkaXRzc3RvcmUnKSgpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZWRpdGRpc3BhdGNoZXInKTtcclxuXHJcbnZhciBmb3JtYXQgPSBuZXcgb2wuZm9ybWF0LldGUygpO1xyXG52YXIgc2VyaWFsaXplciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRyYW5zT2JqLCBsYXllck5hbWUpIHtcclxuICByZXR1cm4gd2ZzVHJhbnNhY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlV2ZzVHJhbnNhY3Rpb24odHJhbnNPYmosIG9wdGlvbnMpIHtcclxuICB2YXIgbm9kZSA9IGZvcm1hdC53cml0ZVRyYW5zYWN0aW9uKHRyYW5zT2JqLmluc2VydCwgdHJhbnNPYmoudXBkYXRlLCB0cmFuc09iai5kZWxldGUsIG9wdGlvbnMpO1xyXG4gIHJldHVybiBub2RlO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3ZnNUcmFuc2FjdGlvbih0cmFuc09iaiwgbGF5ZXJOYW1lKSB7XHJcbiAgdmFyIHNyc05hbWUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICB2YXIgZmVhdHVyZVR5cGUgPSBsYXllci5nZXQoJ2ZlYXR1cmVUeXBlJyk7XHJcbiAgdmFyIHNvdXJjZSA9IHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllci5nZXQoJ3NvdXJjZU5hbWUnKV07XHJcbiAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICBnbWxPcHRpb25zOiB7XHJcbiAgICAgIHNyc05hbWU6IHNyc05hbWVcclxuICAgIH0sXHJcbiAgICBmZWF0dXJlTlM6IHNvdXJjZS53b3Jrc3BhY2UsXHJcbiAgICBmZWF0dXJlUHJlZml4OiBzb3VyY2UucHJlZml4IHx8IHNvdXJjZS53b3Jrc3BhY2UsXHJcbiAgICBmZWF0dXJlVHlwZTogZmVhdHVyZVR5cGVcclxuICB9O1xyXG4gIHZhciBub2RlID0gd3JpdGVXZnNUcmFuc2FjdGlvbih0cmFuc09iaiwgb3B0aW9ucyk7XHJcbiAgcmV0dXJuICQuYWpheCh7XHJcbiAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgIHVybDogc291cmNlLnVybCxcclxuICAgIGRhdGE6IHNlcmlhbGl6ZXIuc2VyaWFsaXplVG9TdHJpbmcobm9kZSksXHJcbiAgICBjb250ZW50VHlwZTogJ3RleHQveG1sJyxcclxuICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXHJcbiAgICBlcnJvcjogZXJyb3IsXHJcbiAgICBjb250ZXh0OiB0aGlzXHJcbiAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgdmFyIHJlc3VsdCA9IHJlYWRSZXNwb25zZShkYXRhKTtcclxuICAgICAgdmFyIG5yID0gMDtcclxuICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgIG5yICs9IHJlc3VsdC50cmFuc2FjdGlvblN1bW1hcnkudG90YWxVcGRhdGVkO1xyXG4gICAgICAgIG5yICs9IHJlc3VsdC50cmFuc2FjdGlvblN1bW1hcnkudG90YWxEZWxldGVkO1xyXG4gICAgICAgIG5yICs9IHJlc3VsdC50cmFuc2FjdGlvblN1bW1hcnkudG90YWxJbnNlcnRlZDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnI7XHJcbiAgICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gcmVhZFJlc3BvbnNlKGRhdGEpO1xyXG4gICAgdmFyIGZlYXR1cmU7XHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIGlmIChyZXN1bHQudHJhbnNhY3Rpb25TdW1tYXJ5LnRvdGFsVXBkYXRlZCA+IDApIHtcclxuICAgICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VGZWF0dXJlKHtcclxuICAgICAgICAgIGZlYXR1cmU6IHRyYW5zT2JqLnVwZGF0ZSxcclxuICAgICAgICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLFxyXG4gICAgICAgICAgc3RhdHVzOiAnZmluaXNoZWQnLFxyXG4gICAgICAgICAgYWN0aW9uOiAndXBkYXRlJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocmVzdWx0LnRyYW5zYWN0aW9uU3VtbWFyeS50b3RhbERlbGV0ZWQgPiAwKSB7XHJcbiAgICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRmVhdHVyZSh7XHJcbiAgICAgICAgICBmZWF0dXJlOiB0cmFuc09iai5kZWxldGUsXHJcbiAgICAgICAgICBsYXllck5hbWU6IGxheWVyTmFtZSxcclxuICAgICAgICAgIHN0YXR1czogJ2ZpbmlzaGVkJyxcclxuICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZSdcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHJlc3VsdC50cmFuc2FjdGlvblN1bW1hcnkudG90YWxJbnNlcnRlZCA+IDApIHtcclxuICAgICAgICBmZWF0dXJlID0gdHJhbnNPYmouaW5zZXJ0O1xyXG4gICAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUZlYXR1cmUoe1xyXG4gICAgICAgICAgZmVhdHVyZTogdHJhbnNPYmouaW5zZXJ0LFxyXG4gICAgICAgICAgbGF5ZXJOYW1lOiBsYXllck5hbWUsXHJcbiAgICAgICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXHJcbiAgICAgICAgICBhY3Rpb246ICdpbnNlcnQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGluc2VydElkcyA9IHJlc3VsdC5pbnNlcnRJZHM7XHJcbiAgICAgICAgaW5zZXJ0SWRzLmZvckVhY2goZnVuY3Rpb24oaW5zZXJ0SWQsIGluZGV4KSB7XHJcbiAgICAgICAgICBmZWF0dXJlW2luZGV4XS5zZXRJZChpbnNlcnRJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9yKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICB2YXIgZXJyb3JNc2cgPSBlID8gKGUuc3RhdHVzICsgJyAnICsgZS5zdGF0dXNUZXh0KSA6IFwiXCI7XHJcbiAgICBhbGVydCgnRGV0IGludHLDpGZmYWRlIGV0dCBmZWwgbsOkciDDpG5kcmluZ2FybmEgc2t1bGxlIHNwYXJhcyB0aWxsIHNlcnZlcm4uLi5cXG4nICtcclxuICAgICAgZXJyb3JNc2cpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZFJlc3BvbnNlKGRhdGEpIHtcclxuICB2YXIgcmVzdWx0O1xyXG4gIGlmICh3aW5kb3cuRG9jdW1lbnQgJiYgZGF0YSBpbnN0YW5jZW9mIERvY3VtZW50ICYmIGRhdGEuZG9jdW1lbnRFbGVtZW50ICYmXHJcbiAgICBkYXRhLmRvY3VtZW50RWxlbWVudC5sb2NhbE5hbWUgPT09ICdFeGNlcHRpb25SZXBvcnQnKSB7XHJcbiAgICBhbGVydChkYXRhLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoXHJcbiAgICAgICdodHRwOi8vd3d3Lm9wZW5naXMubmV0L293cycsICdFeGNlcHRpb25UZXh0JykuaXRlbSgwKS50ZXh0Q29udGVudCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlc3VsdCA9IGZvcm1hdC5yZWFkVHJhbnNhY3Rpb25SZXNwb25zZShkYXRhKTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgUG9wdXAgPSByZXF1aXJlKCcuL3BvcHVwJyk7XHJcbnZhciBzaWRlYmFyID0gcmVxdWlyZSgnLi9zaWRlYmFyJyk7XHJcbnZhciBtYXB1dGlscyA9IHJlcXVpcmUoJy4vbWFwdXRpbHMnKTtcclxudmFyIGZlYXR1cmVsYXllciA9IHJlcXVpcmUoJy4vZmVhdHVyZWxheWVyJyk7XHJcbnZhciBzdHlsZSA9IHJlcXVpcmUoJy4vc3R5bGUnKSgpO1xyXG52YXIgc3R5bGVUeXBlcyA9IHJlcXVpcmUoJy4vc3R5bGUvc3R5bGV0eXBlcycpO1xyXG52YXIgZ2V0RmVhdHVyZUluZm8gPSByZXF1aXJlKCcuL2dldGZlYXR1cmVpbmZvJyk7XHJcbnZhciBvd2xDYXJvdXNlbCA9IHJlcXVpcmUoJy4uL2V4dGVybnMvb3dsY2Fyb3VzZWwtYnJvd3NlcmlmeScpO1xyXG5vd2xDYXJvdXNlbC5sb2FkalF1ZXJ5UGx1Z2luKCk7XHJcblxyXG52YXIgc2VsZWN0aW9uTGF5ZXIgPSB1bmRlZmluZWQ7XHJcbnZhciBzYXZlZFBpbiA9IHVuZGVmaW5lZDtcclxudmFyIG9wdGlvbnM7XHJcbnZhciBtYXA7XHJcbnZhciBwaW5uaW5nO1xyXG52YXIgcGluU3R5bGU7XHJcbnZhciBzZWxlY3Rpb25TdHlsZXM7XHJcbnZhciBzaG93T3ZlcmxheTtcclxudmFyIGlkZW50aWZ5VGFyZ2V0O1xyXG52YXIgY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWw7XHJcbnZhciBvdmVybGF5O1xyXG52YXIgaGl0VG9sZXJhbmNlO1xyXG5cclxuZnVuY3Rpb24gaW5pdChvcHRfb3B0aW9ucykge1xyXG4gIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuXHJcbiAgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG5cclxuICBwaW5uaW5nID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgncGlubmluZycpID8gb3B0aW9ucy5waW5uaW5nIDogdHJ1ZTtcclxuICB2YXIgcGluU3R5bGVPcHRpb25zID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgncGluU3R5bGUnKSA/IG9wdGlvbnMucGluU3R5bGUgOiBzdHlsZVR5cGVzLmdldFN0eWxlKCdwaW4nKTtcclxuICBwaW5TdHlsZSA9IHN0eWxlLmNyZWF0ZVN0eWxlUnVsZShwaW5TdHlsZU9wdGlvbnMpWzBdO1xyXG4gIHNhdmVkUGluID0gb3B0aW9ucy5zYXZlZFBpbiA/IG1hcHV0aWxzLmNyZWF0ZVBvaW50RmVhdHVyZShvcHRfb3B0aW9ucy5zYXZlZFBpbiwgcGluU3R5bGUpIDogdW5kZWZpbmVkO1xyXG5cclxuICBzZWxlY3Rpb25TdHlsZXMgPSBzdHlsZS5jcmVhdGVFZGl0U3R5bGUoKTtcclxuXHJcbiAgdmFyIHNhdmVkU2VsZWN0aW9uID0gb3B0aW9ucy5zYXZlZFNlbGVjdGlvbiB8fCB1bmRlZmluZWQ7XHJcbiAgdmFyIHNhdmVkRmVhdHVyZSA9IHNhdmVkUGluIHx8IHNhdmVkU2VsZWN0aW9uIHx8IHVuZGVmaW5lZDtcclxuICBzZWxlY3Rpb25MYXllciA9IGZlYXR1cmVsYXllcihzYXZlZEZlYXR1cmUsIG1hcCk7XHJcblxyXG4gIHNob3dPdmVybGF5ID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnb3ZlcmxheScpID8gb3B0aW9ucy5vdmVybGF5IDogdHJ1ZTtcclxuXHJcbiAgaWYoc2hvd092ZXJsYXkpIHtcclxuICAgIGlkZW50aWZ5VGFyZ2V0ID0gJ292ZXJsYXknO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIHNpZGViYXIuaW5pdCgpO1xyXG4gICAgaWRlbnRpZnlUYXJnZXQgPSAnc2lkZWJhcic7XHJcbiAgfVxyXG5cclxuICBjbHVzdGVyRmVhdHVyZWluZm9MZXZlbCA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2NsdXN0ZXJGZWF0dXJlaW5mb0xldmVsJykgPyBvcHRpb25zLmNsdXN0ZXJGZWF0dXJlaW5mb0xldmVsIDogMTtcclxuXHJcbiAgaGl0VG9sZXJhbmNlID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaGl0VG9sZXJhbmNlJykgPyBvcHRpb25zLmhpdFRvbGVyYW5jZSA6IDA7XHJcblxyXG4gIG1hcC5vbignY2xpY2snLCBvbkNsaWNrKTtcclxuICAkKGRvY3VtZW50KS5vbignZW5hYmxlSW50ZXJhY3Rpb24nLCBvbkVuYWJsZUludGVyYWN0aW9uKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFNlbGVjdGlvbkxheWVyKCkge1xyXG4gIHJldHVybiBzZWxlY3Rpb25MYXllci5nZXRGZWF0dXJlTGF5ZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKCkge1xyXG4gIHZhciBzZWxlY3Rpb24gPSB7fTtcclxuICBzZWxlY3Rpb24uZ2VvbWV0cnlUeXBlID0gc2VsZWN0aW9uTGF5ZXIuZ2V0RmVhdHVyZXMoKVswXS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKTtcclxuICBzZWxlY3Rpb24uY29vcmRpbmF0ZXMgPSBzZWxlY3Rpb25MYXllci5nZXRGZWF0dXJlcygpWzBdLmdldEdlb21ldHJ5KCkuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICByZXR1cm4gc2VsZWN0aW9uO1xyXG59XHJcbmZ1bmN0aW9uIGdldFBpbigpIHtcclxuICByZXR1cm4gc2F2ZWRQaW47XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGl0VG9sZXJhbmNlKCkge1xyXG4gIHJldHVybiBoaXRUb2xlcmFuY2U7XHJcbn1cclxuZnVuY3Rpb24gaWRlbnRpZnkoaXRlbXMsIHRhcmdldCwgY29vcmRpbmF0ZSkge1xyXG4gIGNsZWFyKCk7XHJcbiAgdmFyIGNvbnRlbnQgPSBpdGVtcy5tYXAoZnVuY3Rpb24oaSl7XHJcbiAgICByZXR1cm4gaS5jb250ZW50O1xyXG4gIH0pLmpvaW4oJycpO1xyXG4gIGNvbnRlbnQgPSAnPGRpdiBpZD1cIm8taWRlbnRpZnlcIj48ZGl2IGlkPVwiby1pZGVudGlmeS1jYXJvdXNlbFwiIGNsYXNzPVwib3dsLWNhcm91c2VsIG93bC10aGVtZVwiPicgKyBjb250ZW50ICsgJzwvZGl2PjwvZGl2Pic7XHJcbiAgc3dpdGNoICh0YXJnZXQpIHtcclxuICAgIGNhc2UgJ292ZXJsYXknOlxyXG4gICAgICB2YXIgcG9wdXAgPSBQb3B1cCgnI28tbWFwJyk7XHJcbiAgICAgIG92ZXJsYXkgPSBuZXcgb2wuT3ZlcmxheSh7XHJcbiAgICAgICAgZWxlbWVudDogcG9wdXAuZ2V0RWwoKVxyXG4gICAgICB9KTtcclxuICAgICAgbWFwLmFkZE92ZXJsYXkob3ZlcmxheSk7XHJcbiAgICAgIHZhciBnZW9tZXRyeSA9IGl0ZW1zWzBdLmZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcclxuICAgICAgdmFyIGNvb3JkO1xyXG4gICAgICBnZW9tZXRyeS5nZXRUeXBlKCkgPT0gJ1BvaW50JyA/IGNvb3JkID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKSA6IGNvb3JkID0gY29vcmRpbmF0ZTtcclxuICAgICAgb3ZlcmxheS5zZXRQb3NpdGlvbihjb29yZCk7XHJcbiAgICAgIHBvcHVwLnNldENvbnRlbnQoe2NvbnRlbnQ6IGNvbnRlbnQsIHRpdGxlOiBpdGVtc1swXS50aXRsZX0pO1xyXG4gICAgICBwb3B1cC5zZXRWaXNpYmlsaXR5KHRydWUpO1xyXG4gICAgICB2YXIgb3dsID0gaW5pdENhcm91c2VsKCcjby1pZGVudGlmeS1jYXJvdXNlbCcsIHVuZGVmaW5lZCwgZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSB0aGlzLm93bC5jdXJyZW50SXRlbTtcclxuICAgICAgICBzZWxlY3Rpb25MYXllci5jbGVhckFuZEFkZChpdGVtc1tjdXJyZW50SXRlbV0uZmVhdHVyZS5jbG9uZSgpLCBzZWxlY3Rpb25TdHlsZXNbaXRlbXNbY3VycmVudEl0ZW1dLmZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRUeXBlKCldKTtcclxuICAgICAgICBwb3B1cC5zZXRUaXRsZShpdGVtc1tjdXJyZW50SXRlbV0udGl0bGUpO1xyXG4gICAgICB9KTtcclxuICAgICAgVmlld2VyLmF1dG9QYW4oKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdzaWRlYmFyJzpcclxuICAgICAgc2lkZWJhci5zZXRDb250ZW50KHtjb250ZW50OiBjb250ZW50LCB0aXRsZTogaXRlbXNbMF0udGl0bGV9KTtcclxuICAgICAgc2lkZWJhci5zZXRWaXNpYmlsaXR5KHRydWUpO1xyXG4gICAgICB2YXIgb3dsID0gaW5pdENhcm91c2VsKCcjby1pZGVudGlmeS1jYXJvdXNlbCcsIHVuZGVmaW5lZCwgZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSB0aGlzLm93bC5jdXJyZW50SXRlbTtcclxuICAgICAgICBzZWxlY3Rpb25MYXllci5jbGVhckFuZEFkZChpdGVtc1tjdXJyZW50SXRlbV0uZmVhdHVyZS5jbG9uZSgpLCBzZWxlY3Rpb25TdHlsZXNbaXRlbXNbY3VycmVudEl0ZW1dLmZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRUeXBlKCldKTtcclxuICAgICAgICBzaWRlYmFyLnNldFRpdGxlKGl0ZW1zW2N1cnJlbnRJdGVtXS50aXRsZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gb25DbGljayhldnQpIHtcclxuICBzYXZlZFBpbiA9IHVuZGVmaW5lZDtcclxuICAvL0ZlYXR1cmluZm8gaW4gdHdvIHN0ZXBzLiBDb25jYXQgc2VydmVyc2lkZSBhbmQgY2xpZW50c2lkZSB3aGVuIHNlcnZlcnNpZGUgaXMgZmluaXNoZWRcclxuICB2YXIgY2xpZW50UmVzdWx0ID0gZ2V0RmVhdHVyZUluZm8uZ2V0RmVhdHVyZXNBdFBpeGVsKGV2dCwgY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWwpO1xyXG4gIC8vQWJvcnQgaWYgY2xpZW50UmVzdWx0IGlzIGZhbHNlXHJcbiAgaWYoY2xpZW50UmVzdWx0ICE9PSBmYWxzZSkge1xyXG4gICAgZ2V0RmVhdHVyZUluZm8uZ2V0RmVhdHVyZXNGcm9tUmVtb3RlKGV2dClcclxuICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIHZhciBzZXJ2ZXJSZXN1bHQgPSBkYXRhIHx8IFtdO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBzZXJ2ZXJSZXN1bHQuY29uY2F0KGNsaWVudFJlc3VsdCk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBzZWxlY3Rpb25MYXllci5jbGVhcigpO1xyXG4gICAgICAgICAgaWRlbnRpZnkocmVzdWx0LCBpZGVudGlmeVRhcmdldCwgZXZ0LmNvb3JkaW5hdGUpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoc2VsZWN0aW9uTGF5ZXIuZ2V0RmVhdHVyZXMoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBjbGVhcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHBpbm5pbmcpe1xyXG4gICAgICAgICAgc2lkZWJhci5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcclxuICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZighbWFwdXRpbHMuY2hlY2tab29tQ2hhbmdlKHJlc29sdXRpb24sIG1hcC5nZXRWaWV3KCkuZ2V0UmVzb2x1dGlvbigpKSkge1xyXG4gICAgICAgICAgICAgIHNhdmVkUGluID0gbWFwdXRpbHMuY3JlYXRlUG9pbnRGZWF0dXJlKGV2dC5jb29yZGluYXRlLCBwaW5TdHlsZSk7XHJcbiAgICAgICAgICAgICAgc2VsZWN0aW9uTGF5ZXIuYWRkRmVhdHVyZShzYXZlZFBpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIDI1MCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIGZlYXR1cmVzIGlkZW50aWZpZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUpIHtcclxuICBpZihzdGF0ZSA9PT0gdHJ1ZSkge1xyXG4gICAgbWFwLm9uKCdjbGljaycsIG9uQ2xpY2spO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGNsZWFyKCk7XHJcbiAgICBtYXAudW4oJ2NsaWNrJywgb25DbGljayk7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gIHNlbGVjdGlvbkxheWVyLmNsZWFyKCk7XHJcbiAgc2lkZWJhci5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcclxuICBpZiAob3ZlcmxheSkge1xyXG4gICAgVmlld2VyLnJlbW92ZU92ZXJsYXlzKG92ZXJsYXkpOyAgICAgIFxyXG4gIH1cclxuICBjb25zb2xlLmxvZyhcIkNsZWFyaW5nIHNlbGVjdGlvblwiKTtcclxufVxyXG5mdW5jdGlvbiBvbkVuYWJsZUludGVyYWN0aW9uKGUpIHtcclxuICBpZihlLmludGVyYWN0aW9uID09PSAnZmVhdHVyZUluZm8nKSB7XHJcbiAgICBzZXRBY3RpdmUodHJ1ZSk7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gaW5pdENhcm91c2VsKGlkLCBvcHRpb25zLCBjYikge1xyXG4gIHZhciBjYXJvdXNlbE9wdGlvbnMgPSBvcHRpb25zIHx8IHtcclxuICAgIG5hdmlnYXRpb24gOiB0cnVlLCAvLyBTaG93IG5leHQgYW5kIHByZXYgYnV0dG9uc1xyXG4gICAgc2xpZGVTcGVlZCA6IDMwMCxcclxuICAgIHBhZ2luYXRpb25TcGVlZCA6IDQwMCxcclxuICAgIHNpbmdsZUl0ZW06dHJ1ZSxcclxuICAgIHJld2luZFNwZWVkOjIwMCxcclxuICAgIG5hdmlnYXRpb25UZXh0OiBbJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hldnJvbi1sZWZ0XCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWNoZXZyb24tbGVmdFwiPjwvdXNlPjwvc3ZnPicsICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZXZyb24tcmlnaHRcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtY2hldnJvbi1yaWdodFwiPjwvdXNlPjwvc3ZnPiddLFxyXG4gICAgYWZ0ZXJBY3Rpb246IGNiXHJcbiAgfTtcclxuICByZXR1cm4gJChpZCkub3dsQ2Fyb3VzZWwoY2Fyb3VzZWxPcHRpb25zKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbm1vZHVsZS5leHBvcnRzLmNsZWFyID0gY2xlYXI7XHJcbm1vZHVsZS5leHBvcnRzLmdldFNlbGVjdGlvbkxheWVyID0gZ2V0U2VsZWN0aW9uTGF5ZXI7XHJcbm1vZHVsZS5leHBvcnRzLmdldFNlbGVjdGlvbiA9IGdldFNlbGVjdGlvbjtcclxubW9kdWxlLmV4cG9ydHMuZ2V0UGluID0gZ2V0UGluO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRIaXRUb2xlcmFuY2UgPSBnZXRIaXRUb2xlcmFuY2U7XHJcbm1vZHVsZS5leHBvcnRzLmlkZW50aWZ5ID0gaWRlbnRpZnk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgdGVtcGxhdGVzID0ge307XHJcbnRlbXBsYXRlcy5kZWZhdWx0ID0gcmVxdWlyZShcIi4vdGVtcGxhdGVzL2ZlYXR1cmVpbmZvdGVtcGxhdGVzL2RlZmF1bHRcIik7XHJcblxyXG5mdW5jdGlvbiBmZWF0dXJlaW5mb3RlbXBsYXRlcyh0ZW1wbGF0ZSwgYXR0cmlidXRlcykge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlc1t0ZW1wbGF0ZV0oYXR0cmlidXRlcyk7XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBmZWF0dXJlaW5mb3RlbXBsYXRlcztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcblxyXG4vL2NyZWF0ZSB1bm1hbmFnZWQgbGF5ZXJcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmZWF0dXJlcywgbWFwKSB7XHJcbiAgdmFyIGNvbGxlY3Rpb24gPSBmZWF0dXJlcyA/IFtmZWF0dXJlc10gOiBbXTtcclxuICB2YXIgZmVhdHVyZUxheWVyU3RvcmUgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgIGZlYXR1cmVzOiBjb2xsZWN0aW9uXHJcbiAgfSk7XHJcbiAgdmFyIGZlYXR1cmVMYXllciA9IG5ldyBvbC5sYXllci5WZWN0b3Ioe1xyXG4gICAgc291cmNlOiBmZWF0dXJlTGF5ZXJTdG9yZSxcclxuICAgIG1hcDogbWFwXHJcbiAgfSk7XHJcbiAgcmV0dXJuIHtcclxuICAgICAgYWRkRmVhdHVyZTogZnVuY3Rpb24gYWRkRmVhdHVyZShmZWF0dXJlKSB7XHJcbiAgICAgICAgICBmZWF0dXJlTGF5ZXJTdG9yZS5hZGRGZWF0dXJlKGZlYXR1cmUpO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRGZWF0dXJlczogZnVuY3Rpb24gZ2V0RmVhdHVyZXMoKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmVhdHVyZUxheWVyU3RvcmUuZ2V0RmVhdHVyZXMoKTtcclxuICAgICAgfSxcclxuICAgICAgZ2V0RmVhdHVyZUxheWVyOiBmdW5jdGlvbiBnZXRGZWF0dXJlTGF5ZXIoKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmVhdHVyZUxheWVyO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRGZWF0dXJlU3RvcmU6IGZ1bmN0aW9uIGdldEZlYXR1cmVTdG9yZSgpIHtcclxuICAgICAgICAgIHJldHVybiBmZWF0dXJlTGF5ZXJTdG9yZTtcclxuICAgICAgfSxcclxuICAgICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gICAgICAgICAgZmVhdHVyZUxheWVyU3RvcmUuY2xlYXIoKTtcclxuICAgICAgfSxcclxuICAgICAgY2xlYXJBbmRBZGQ6IGZ1bmN0aW9uIGNsZWFyQW5kQWRkKGZlYXR1cmUsIHN0eWxlKSB7XHJcbiAgICAgICAgICBmZWF0dXJlTGF5ZXJTdG9yZS5jbGVhcigpO1xyXG4gICAgICAgICAgZmVhdHVyZUxheWVyLnNldFN0eWxlKHN0eWxlKTtcclxuICAgICAgICAgIGZlYXR1cmVMYXllclN0b3JlLmFkZEZlYXR1cmUoZmVhdHVyZSk7XHJcbiAgICAgIH1cclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbnZhciBwZXJtYWxpbmsgPSByZXF1aXJlKCcuL3Blcm1hbGluay9wZXJtYWxpbmsnKTtcclxudmFyIGlzRW1iZWRkZWQgPSByZXF1aXJlKCcuL3V0aWxzL2lzZW1iZWRkZWQnKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcblxyXG52YXIgdG9vbHRpcDtcclxudmFyIG1hcFRhcmdldDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCAnI28tdG9vbGJhci1uYXZpZ2F0aW9uJztcclxuICBtYXBUYXJnZXQgPSB2aWV3ZXIuZ2V0VGFyZ2V0KCk7XHJcbiAgdG9vbHRpcCA9IG9wdGlvbnMudG9vbHRpcFRleHQgfHwgJ1Zpc2Egc3RvciBrYXJ0YSc7XHJcblxyXG4gIHJlbmRlcih0YXJnZXQpO1xyXG4gIGJpbmRVSUFjdGlvbnMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKHRhcmdldCkge1xyXG4gIHZhciBlbCA9IHV0aWxzLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICBpZDogJ28tZnVsbHNjcmVlbi1idXR0b24nLFxyXG4gICAgY2xzOiAnby1mdWxsc2NyZWVuLWJ1dHRvbicsXHJcbiAgICBpY29uQ2xzOiAnby1pY29uLWZhLWV4cGFuZCcsXHJcbiAgICBzcmM6ICcjZmEtZXhwYW5kJyxcclxuICAgIHRvb2x0aXBUZXh0OiB0b29sdGlwLFxyXG4gICAgdG9vbHRpcFBsYWNlbWVudDogJ2Vhc3QnXHJcbiAgfSk7XHJcbiAgaWYgKGlzRW1iZWRkZWQobWFwVGFyZ2V0KSkge1xyXG4gICAgJCh0YXJnZXQpLmFwcGVuZChlbCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICQoJyNvLWZ1bGxzY3JlZW4tYnV0dG9uIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGdvRnVsbFNjcmVlbigpO1xyXG4gICAgJCgnI28tZnVsbHNjcmVlbi1idXR0b24gYnV0dG9uJykuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdvRnVsbFNjcmVlbigpIHtcclxuICB2YXIgdXJsID0gcGVybWFsaW5rLmdldFBlcm1hbGluaygpO1xyXG4gIHdpbmRvdy5vcGVuKHVybCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCJ2YXIgZ2V0Y2VudGVyID0gcmVxdWlyZSgnLi9nZW9tZXRyeS9nZXRjZW50ZXInKTtcclxudmFyIGdldGFyZWEgPSByZXF1aXJlKCcuL2dlb21ldHJ5L2dldGFyZWEnKTtcclxuXHJcbnZhciBnZW9tID0ge307XHJcbmdlb20uY2VudGVyID0gZ2V0Y2VudGVyO1xyXG5nZW9tLmFyZWEgPSBnZXRhcmVhO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZW9tO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciByb3VuZCA9IHJlcXVpcmUoJy4uL3V0aWxzL3JvdW5kJyk7XHJcblxyXG52YXIgZ2V0QXJlYSA9IGZ1bmN0aW9uIGdldEFyZWEoZ2VvbWV0cnlfaW4sIGRlY2ltYWxzKSB7XHJcbiAgdmFyIGFyZWEgPSBnZW9tZXRyeV9pbi5nZXRBcmVhID8gZ2VvbWV0cnlfaW4uZ2V0QXJlYSgpIDogMDtcclxuICBpZiAoZGVjaW1hbHMpIHtcclxuICAgIGFyZWEgPSByb3VuZChhcmVhLCBkZWNpbWFscyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFyZWEgPSByb3VuZChhcmVhLCAnMicpO1xyXG4gIH1cclxuICByZXR1cm4gYXJlYTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZXRBcmVhO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG5cclxudmFyIGdldENlbnRlciA9IGZ1bmN0aW9uIGdldENlbnRlcihnZW9tZXRyeV9pbiwgZGVzdGluYXRpb24sIGF4aXNPcmllbnRhdGlvbikge1xyXG4gICAgdmFyIGdlb21ldHJ5ID0gZ2VvbWV0cnlfaW4uY2xvbmUoKTtcclxuXHJcbiAgICBpZiAoZGVzdGluYXRpb24pIHtcclxuICAgICAgZ2VvbWV0cnkudHJhbnNmb3JtKFZpZXdlci5nZXRNYXAoKS5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpLCBkZXN0aW5hdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XHJcbiAgICB2YXIgY2VudGVyO1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBcIlBvbHlnb25cIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0SW50ZXJpb3JQb2ludCgpLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJNdWx0aVBvbHlnb25cIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0SW50ZXJpb3JQb2ludHMoKS5nZXRDb29yZGluYXRlcygpWzBdO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiUG9pbnRcIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIk11bHRpUG9pbnRcIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnlbMF0uZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIkxpbmVTdHJpbmdcIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZUF0KDAuNSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJNdWx0aUxpbmVTdHJpbmdcIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0TGluZVN0cmluZ3MoKVswXS5nZXRDb29yZGluYXRlQXQoMC41KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIkNpcmNsZVwiOlxyXG4gICAgICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeS5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGF4aXNPcmllbnRhdGlvbikge1xyXG4gICAgICBpZiAoYXhpc09yaWVudGF0aW9uID09PSAncmV2ZXJzZScpIHtcclxuICAgICAgICBjZW50ZXIucmV2ZXJzZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNlbnRlcjtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZXRDZW50ZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxudmFyICRnZW9sb2NhdGVCdXR0b25JZCA9IHVuZGVmaW5lZDtcclxudmFyICRnZW9sb2NhdGVCdXR0b24gPSB1bmRlZmluZWQ7XHJcbnZhciBlbmFibGVkID0gZmFsc2U7XHJcbnZhciBtYXAgPSB1bmRlZmluZWQ7XHJcbnZhciBnZW9sb2NhdGlvbiA9IHVuZGVmaW5lZDtcclxudmFyIG1hcmtlciA9IHVuZGVmaW5lZDtcclxudmFyIG1hcmtlckVsID0gdW5kZWZpbmVkO1xyXG52YXIgYmFzZVVybCA9IHVuZGVmaW5lZDtcclxudmFyIHpvb21MZXZlbDtcclxuXHJcbmZ1bmN0aW9uIGluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCAnI28tdG9vbGJhci1uYXZpZ2F0aW9uJztcclxuICBtYXAgPSB2aWV3ZXIuZ2V0TWFwKCk7XHJcbiAgYmFzZVVybCA9IHZpZXdlci5nZXRCYXNlVXJsKCk7XHJcbiAgem9vbUxldmVsID0gb3B0aW9ucy56b29tTGV2ZWwgfHwgdmlld2VyLmdldFJlc29sdXRpb25zKCkubGVuZ3RoIC0gMyB8fCAwO1xyXG5cclxuICByZW5kZXIodGFyZ2V0KTtcclxuXHJcbiAgJGdlb2xvY2F0ZUJ1dHRvbklkID0gJCgnI28tZ2VvbG9jYXRpb24tYnV0dG9uJyk7XHJcbiAgJGdlb2xvY2F0ZUJ1dHRvbiA9ICQoJyNvLWdlb2xvY2F0aW9uLWJ1dHRvbiBidXR0b24nKTtcclxuXHJcbiAgbWFya2VyRWwgPSAkKCcjby1nZW9sb2NhdGlvbl9tYXJrZXInKS5nZXQoMCk7XHJcbiAgbWFya2VyID0gbmV3IG9sLk92ZXJsYXkoe1xyXG4gICAgcG9zaXRpb25pbmc6ICdjZW50ZXItY2VudGVyJyxcclxuICAgIGVsZW1lbnQ6IG1hcmtlckVsLFxyXG4gICAgc3RvcEV2ZW50OiBmYWxzZVxyXG4gIH0pO1xyXG5cclxuICBnZW9sb2NhdGlvbiA9IG5ldyBvbC5HZW9sb2NhdGlvbigoe1xyXG4gICAgcHJvamVjdGlvbjogbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCksXHJcbiAgICB0cmFja2luZ09wdGlvbnM6IHtcclxuICAgICAgbWF4aW11bUFnZTogMTAwMDAsXHJcbiAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSxcclxuICAgICAgdGltZW91dDogNjAwMDAwXHJcbiAgICB9XHJcbiAgfSkpO1xyXG5cclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcih0YXJnZXQpIHtcclxuICB2YXIgdG9vbHRpcFRleHQgPSAnVmlzYSBudXZhcmFuZGUgcG9zaXRpb24gaSBrYXJ0YW4nO1xyXG4gIHZhciBzcmMgPSBiYXNlVXJsICsgJ2ltZy9nZW9sb2NhdGlvbl9tYXJrZXIucG5nJztcclxuICB2YXIgbWFya2VySW1nID0gJzxpbWcgaWQ9XCJvLWdlb2xvY2F0aW9uX21hcmtlclwiIHNyYz1cIicgKyBzcmMgKyAnXCIvPic7XHJcblxyXG4gIC8vRWxlbWVudCBmb3IgY29udHJvbFxyXG4gIHZhciBlbCA9IHV0aWxzLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICBpZDogJ28tZ2VvbG9jYXRpb24tYnV0dG9uJyxcclxuICAgIGNsczogJ28tZ2VvbG9jYXRpb24tYnV0dG9uJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tZmEtbG9jYXRpb24tYXJyb3cnLFxyXG4gICAgc3JjOiAnI2ZhLWxvY2F0aW9uLWFycm93JyxcclxuICAgIHRvb2x0aXBUZXh0OiB0b29sdGlwVGV4dCxcclxuICAgIHRvb2x0aXBQbGFjZW1lbnQ6ICdlYXN0J1xyXG4gIH0pO1xyXG4gICQodGFyZ2V0KS5hcHBlbmQoZWwpO1xyXG4gICQoJyNvLW1hcCcpLnByZXBlbmQobWFya2VySW1nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkZ2VvbG9jYXRlQnV0dG9uSWQub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgdG9nZ2xlKCk7XHJcbiAgICAkZ2VvbG9jYXRlQnV0dG9uLmJsdXIoKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlKCkge1xyXG4gIGlmICgkZ2VvbG9jYXRlQnV0dG9uLmhhc0NsYXNzKCdvLWdlb2xvY2F0aW9uLWJ1dHRvbi10cnVlJykpIHtcclxuICAgICRnZW9sb2NhdGVCdXR0b24ucmVtb3ZlQ2xhc3MoJ28tZ2VvbG9jYXRpb24tYnV0dG9uLXRydWUnKTtcclxuICAgIGdlb2xvY2F0aW9uLnNldFRyYWNraW5nKGZhbHNlKTtcclxuXHJcbiAgICBnZW9sb2NhdGlvbi51bignY2hhbmdlJywgdXBkYXRlUG9zaXRpb24pO1xyXG4gICAgbWFwLnJlbW92ZU92ZXJsYXkobWFya2VyKTtcclxuICB9IGVsc2Uge1xyXG4gICAgJGdlb2xvY2F0ZUJ1dHRvbi5hZGRDbGFzcygnby1nZW9sb2NhdGlvbi1idXR0b24tdHJ1ZScpO1xyXG4gICAgbWFwLmFkZE92ZXJsYXkobWFya2VyKTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gdG8gcG9zaXRpb24gY2hhbmdlc1xyXG4gICAgZ2VvbG9jYXRpb24ub24oJ2NoYW5nZScsIHVwZGF0ZVBvc2l0aW9uKTtcclxuICAgIGdlb2xvY2F0aW9uLnNldFRyYWNraW5nKHRydWUpOyAvLyBTdGFydCBwb3NpdGlvbiB0cmFja2luZ1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oKSB7XHJcbiAgYWRkUG9zaXRpb24oZ2V0UG9zaXRpb25WYWwoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBvc2l0aW9uVmFsKCkge1xyXG4gIHZhciBjdXJyZW50ID0ge307XHJcbiAgY3VycmVudC5wb3NpdGlvbiA9IGdlb2xvY2F0aW9uLmdldFBvc2l0aW9uKCk7XHJcbiAgY3VycmVudC5hY2N1cmFjeSA9IGdlb2xvY2F0aW9uLmdldEFjY3VyYWN5KCk7XHJcbiAgY3VycmVudC5oZWFkaW5nID0gZ2VvbG9jYXRpb24uZ2V0SGVhZGluZygpIHx8IDA7XHJcbiAgY3VycmVudC5zcGVlZCA9IGdlb2xvY2F0aW9uLmdldFNwZWVkKCkgfHwgMDtcclxuICBjdXJyZW50Lm0gPSBEYXRlLm5vdygpO1xyXG4gIHJldHVybiBjdXJyZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQb3NpdGlvbihjdXJyZW50KSB7XHJcbiAgdmFyIHBvc2l0aW9uID0gY3VycmVudC5wb3NpdGlvbjtcclxuXHJcbiAgaWYgKGVuYWJsZWQgPT09IGZhbHNlICYmIGdlb2xvY2F0aW9uLmdldFRyYWNraW5nKCkpIHtcclxuICAgIG1hcmtlci5zZXRQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICBtYXAuZ2V0VmlldygpLmFuaW1hdGUoe1xyXG4gICAgICBjZW50ZXI6IHBvc2l0aW9uLFxyXG4gICAgICB6b29tOiB6b29tTGV2ZWxcclxuICAgIH0pO1xyXG4gICAgZW5hYmxlZCA9IHRydWU7XHJcbiAgfSBlbHNlIGlmIChnZW9sb2NhdGlvbi5nZXRUcmFja2luZygpKSB7XHJcbiAgICBtYXJrZXIuc2V0UG9zaXRpb24ocG9zaXRpb24pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgZmVhdHVyZWluZm90ZW1wbGF0ZXMgPSByZXF1aXJlKCcuL2ZlYXR1cmVpbmZvdGVtcGxhdGVzJyk7XHJcbnZhciByZXBsYWNlciA9IHJlcXVpcmUoJy4uL3NyYy91dGlscy9yZXBsYWNlcicpO1xyXG52YXIgZ2VvbSA9IHJlcXVpcmUoJy4vZ2VvbScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmZWF0dXJlLCBsYXllcikge1xyXG4gICAgdmFyIGNvbnRlbnQgPSAnPGRpdj48dWw+JztcclxuICAgIHZhciBhdHRyaWJ1dGUsIGxpID0gJycsIHRpdGxlLCB2YWw7XHJcbiAgICAvL0lmIGxheWVyIGlzIGNvbmZpZ3VyZWQgd2l0aCBhdHRyaWJ1dGVzXHJcbiAgICBpZihsYXllci5nZXQoJ2F0dHJpYnV0ZXMnKSkge1xyXG4gICAgICAgICAgLy9JZiBhdHRyaWJ1dGVzIGlzIHN0cmluZyB0aGVuIHVzZSB0ZW1wbGF0ZSBuYW1lZCB3aXRoIHRoZSBzdHJpbmdcclxuICAgICAgICAgIGlmKHR5cGVvZiBsYXllci5nZXQoJ2F0dHJpYnV0ZXMnKSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAvL1VzZSBhdHRyaWJ1dGVzIHdpdGggdGhlIHRlbXBsYXRlXHJcbiAgICAgICAgICAgICAgbGkgPSBmZWF0dXJlaW5mb3RlbXBsYXRlcyhsYXllci5nZXQoJ2F0dHJpYnV0ZXMnKSxmZWF0dXJlLmdldFByb3BlcnRpZXMoKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaTxsYXllci5nZXQoJ2F0dHJpYnV0ZXMnKS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlID0gbGF5ZXIuZ2V0KCdhdHRyaWJ1dGVzJylbaV07XHJcbiAgICAgICAgICAgICAgICB0aXRsZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdmFsID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlWyduYW1lJ10pIHtcclxuICAgICAgICAgICAgICAgICAgaWYoZmVhdHVyZS5nZXQoYXR0cmlidXRlWyduYW1lJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlWyd0aXRsZSddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlID0gJzxiPicgKyBhdHRyaWJ1dGVbJ3RpdGxlJ10gKyAnPC9iPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlWyd1cmwnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ3VybCddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gY3JlYXRlVXJsKGF0dHJpYnV0ZVsndXJsUHJlZml4J10sIGF0dHJpYnV0ZVsndXJsU3VmZml4J10sIHJlcGxhY2VyLnJlcGxhY2UoZmVhdHVyZS5nZXQoYXR0cmlidXRlWyd1cmwnXSksIGZlYXR1cmUuZ2V0UHJvcGVydGllcygpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9ICc8YSBocmVmPVwiJyArIHVybCArICdcIiB0YXJnZXQ9XCJfYmxhbmtcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5nZXQoYXR0cmlidXRlWyduYW1lJ10pICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvYT4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZVsndXJsJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ3VybCddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IGF0dHJpYnV0ZVsnaHRtbCddIHx8IGF0dHJpYnV0ZVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBjcmVhdGVVcmwoYXR0cmlidXRlWyd1cmxQcmVmaXgnXSwgYXR0cmlidXRlWyd1cmxTdWZmaXgnXSwgcmVwbGFjZXIucmVwbGFjZShmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ3VybCddKSwgZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gJzxhIGhyZWY9XCInICsgdXJsICsgJ1wiIHRhcmdldD1cIl9ibGFua1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvYT4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZVsnaW1nJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ2ltZyddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gY3JlYXRlVXJsKGF0dHJpYnV0ZVsndXJsUHJlZml4J10sIGF0dHJpYnV0ZVsndXJsU3VmZml4J10sIHJlcGxhY2VyLnJlcGxhY2UoZmVhdHVyZS5nZXQoYXR0cmlidXRlWydpbWcnXSksIGZlYXR1cmUuZ2V0UHJvcGVydGllcygpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGlvbiA9IGF0dHJpYnV0ZVsnYXR0cmlidXRpb24nXSA/ICc8ZGl2IGNsYXNzPVwiby1pbWFnZS1hdHRyaWJ1dGlvblwiPicgKyBhdHRyaWJ1dGVbJ2F0dHJpYnV0aW9uJ10gKyAnPC9kaXY+JyA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSAnPGRpdiBjbGFzcz1cIm8taW1hZ2UtY29udGFpbmVyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBzcmM9XCInICsgdXJsICsgJ1wiPicgKyBhdHRyaWJ1dGlvbiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZVsnaHRtbCddKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhbCA9IHJlcGxhY2VyLnJlcGxhY2UoYXR0cmlidXRlWydodG1sJ10sIGZlYXR1cmUuZ2V0UHJvcGVydGllcygpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVscGVyOiBnZW9tLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlbHBlckFyZzogZmVhdHVyZS5nZXRHZW9tZXRyeSgpXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjbHMgPSAnIGNsYXNzPVwiJyArIGF0dHJpYnV0ZVsnY2xzJ10gKyAnXCIgJyB8fCAnJztcclxuXHJcbiAgICAgICAgICAgICAgICBsaSArPSAnPGxpJyArIGNscyArJz4nICsgdGl0bGUgKyB2YWwgKyAnPC9saT4nO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgLy9DbGVhbiBmZWF0dXJlIGF0dHJpYnV0ZXMgZnJvbSBub24td2FudGVkIHByb3BlcnRpZXNcclxuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBmaWx0ZXJPYmplY3QoZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCksIFsnRklEXycsICdnZW9tZXRyeSddKTtcclxuICAgICAgLy9Vc2UgYXR0cmlidXRlcyB3aXRoIHRoZSB0ZW1wbGF0ZVxyXG4gICAgICBsaSA9IGZlYXR1cmVpbmZvdGVtcGxhdGVzKCdkZWZhdWx0JyxhdHRyaWJ1dGVzKTtcclxuICAgIH1cclxuICAgIGNvbnRlbnQgKz0gbGkgKyAnPC91bD48L2Rpdj4nO1xyXG4gICAgcmV0dXJuIGNvbnRlbnQ7XHJcbn1cclxuZnVuY3Rpb24gZmlsdGVyT2JqZWN0KG9iaiwgZXhjbHVkZWRLZXlzKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0ge30sIGtleTtcclxuICAgIGZvciAoa2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmKGV4Y2x1ZGVkS2V5cy5pbmRleE9mKGtleSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVVcmwocHJlZml4LCBzdWZmaXgsIHVybCkge1xyXG4gICAgdmFyIHAgPSBwcmVmaXggfHwgJyc7XHJcbiAgICB2YXIgcyA9IHN1ZmZpeCB8fCAnJztcclxuICAgIHJldHVybiBwICsgdXJsICsgcztcclxufVxyXG4iLCJ2YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG5cclxudmFyIHNvdXJjZVR5cGUgPSB7fTtcclxudmFyIHByb2plY3Rpb25Db2RlO1xyXG52YXIgc291cmNlO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpZCwgbGF5ZXIpIHtcclxuICAgIHByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgICBzb3VyY2UgPSB2aWV3ZXIuZ2V0TWFwU291cmNlKCk7XHJcbiAgICB2YXIgc2VydmVyVXJsID0gc291cmNlW2xheWVyLmdldCgnc291cmNlTmFtZScpXS51cmw7XHJcbiAgICB2YXIgdHlwZSA9IGxheWVyLmdldCgndHlwZScpO1xyXG4gICAgLy9yZXR1cm5zIGEgcHJvbWlzZSB3aXRoIGZlYXR1cmVzIGFzIHJlc3VsdFxyXG4gICAgcmV0dXJuIHNvdXJjZVR5cGVbdHlwZV0oaWQsIGxheWVyLCBzZXJ2ZXJVcmwpO1xyXG59XHJcblxyXG5zb3VyY2VUeXBlLkFHU19GRUFUVVJFID0gZnVuY3Rpb24gYWdzRmVhdHVyZShpZCwgbGF5ZXIsIHNlcnZlclVybCkge1xyXG4gIHZhciBlc3JpU3JzID0gcHJvamVjdGlvbkNvZGUuc3BsaXQoJzonKS5wb3AoKTtcclxuICB2YXIgbGF5ZXJJZCA9IGxheWVyLmdldCgnaWQnKTtcclxuICB2YXIgZXNyaWpzb25Gb3JtYXQgPSBuZXcgb2wuZm9ybWF0LkVzcmlKU09OKCk7XHJcblxyXG4gIHZhciB1cmwgPSBzZXJ2ZXJVcmwgKyAnLycgKyBsYXllcklkICtcclxuICAgICAgJy9xdWVyeT9mPWpzb24mJyArXHJcbiAgICAgICdyZXR1cm5HZW9tZXRyeT10cnVlJyArXHJcbiAgICAgICcmb2JqZWN0SWRzPScgKyBpZCArXHJcbiAgICAgICcmZ2VvbWV0cnlUeXBlPWVzcmlHZW9tZXRyeUVudmVsb3BlJytcclxuICAgICAgJyZpblNSPScgKyBlc3JpU3JzICtcclxuICAgICAgJyZvdXRGaWVsZHM9KicgK1xyXG4gICAgICAnJnJldHVybklkc09ubHk9ZmFsc2UnICtcclxuICAgICAgJyZyZXR1cm5Db3VudE9ubHk9ZmFsc2UnICtcclxuICAgICAgJyZnZW9tZXRyeVByZWNpc2lvbj0yJyArXHJcbiAgICAgICcmb3V0U1I9JyArIGVzcmlTcnM7XHJcblxyXG4gIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbnAnXHJcbiAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgaWYocmVzcG9uc2UuZXJyb3IpIHtcclxuICAgICAgICAgICAgZmFpbChyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IGVzcmlqc29uRm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiB2aWV3ZXIuZ2V0UHJvamVjdGlvbigpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZmVhdHVyZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgZmFpbFxyXG4gICAgKTtcclxufVxyXG5cclxuc291cmNlVHlwZS5XRlMgPSBmdW5jdGlvbihpZCwgbGF5ZXIsIHNlcnZlclVybCkge1xyXG4gIHZhciBnZW9tZXRyeU5hbWUgPSBsYXllci5nZXQoJ2dlb21ldHJ5TmFtZScpO1xyXG4gIHZhciBmb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oe2dlb21ldHJ5TmFtZTogZ2VvbWV0cnlOYW1lfSk7XHJcbiAgdmFyIHVybCA9IHNlcnZlclVybCArJz8nO1xyXG4gIHZhciBkYXRhID0gJ3NlcnZpY2U9V0ZTJyArXHJcbiAgICAgICcmdmVyc2lvbj0xLjAuMCcgK1xyXG4gICAgICAnJnJlcXVlc3Q9R2V0RmVhdHVyZSZ0eXBlTmFtZT0nICsgbGF5ZXIuZ2V0KCduYW1lJykgK1xyXG4gICAgICAnJm91dHB1dEZvcm1hdD1qc29uJyArXHJcbiAgICAgICcmZmVhdHVyZUlkPScgKyBpZDtcclxuICByZXR1cm4gJC5hamF4KHtcclxuICAgIHVybDogdXJsLFxyXG4gICAgZGF0YTogZGF0YSxcclxuICAgIHR5cGU6ICdQT1NUJyxcclxuICAgIGRhdGFUeXBlOiAnanNvbidcclxuICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gZm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmFpbChyZXNwb25zZSkge1xyXG4gICAgaWYocmVzcG9uc2UuZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5lcnJvci5tZXNzYWdlICsgJ1xcbicgK1xyXG4gICAgICAgICAgICByZXNwb25zZS5lcnJvci5kZXRhaWxzLmpvaW4oJ1xcbicpKTtcclxuICAgIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIG1hcHV0aWxzID0gcmVxdWlyZSgnLi9tYXB1dGlscycpO1xyXG52YXIgZ2V0QXR0cmlidXRlcyA9IHJlcXVpcmUoJy4vZ2V0YXR0cmlidXRlcycpO1xyXG52YXIgZmVhdHVyZUluZm8gPSByZXF1aXJlKCcuL2ZlYXR1cmVpbmZvJyk7XHJcblxyXG52YXIgbWFwO1xyXG5cclxuZnVuY3Rpb24gZ2V0RmVhdHVyZXNGcm9tUmVtb3RlKGV2dCkge1xyXG4gICAgICAgIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuICAgICAgICB2YXIgcmVxdWVzdFJlc3VsdCA9IFtdO1xyXG4gICAgICAgIHZhciByZXF1ZXN0UHJvbWlzZXMgPSBnZXRGZWF0dXJlSW5mb1JlcXVlc3RzKGV2dCkubWFwKGZ1bmN0aW9uKHJlcXVlc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QuZm4udGhlbihmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBWaWV3ZXIuZ2V0TGF5ZXIocmVxdWVzdC5sYXllcik7XHJcbiAgICAgICAgICAgICAgICBpZihmZWF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFJlc3VsdC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGxheWVyLmdldCgndGl0bGUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZTogZmVhdHVyZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZ2V0QXR0cmlidXRlcyhmZWF0dXJlLCBsYXllcilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuICQud2hlbi5hcHBseSgkLCByZXF1ZXN0UHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3VsdDtcclxuICAgICAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRGZWF0dXJlSW5mb1JlcXVlc3RzKGV2dCkge1xyXG4gICAgdmFyIHJlcXVlc3RzID0gW107XHJcbiAgICAvL0NoZWNrIGZvciBzdXBwb3J0IG9mIGNyb3NzT3JpZ2luIGluIGltYWdlLCBhYnNlbnQgaW4gSUUgOCBhbmQgOVxyXG4gICAgaWYoJ2Nyb3NzT3JpZ2luJyBpbiBuZXcoSW1hZ2UpKSB7XHJcbiAgICAgICAgbWFwLmZvckVhY2hMYXllckF0UGl4ZWwoZXZ0LnBpeGVsLCBmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgICAgICBpZiAobGF5ZXIuZ2V0KCdxdWVyeWFibGUnKSkge1xyXG4gICAgICAgICAgICAgIHZhciBpdGVtID0gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGxheWVyLCBldnQuY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgICAgaWYoaXRlbSkge3JlcXVlc3RzLnB1c2goaXRlbSl9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvL0lmIGNhbnZhcyBpcyB0YWludGVkXHJcbiAgICBlbHNlIGlmKGlzVGFpbnRlZChldnQucGl4ZWwpKSB7XHJcbiAgICAgICAgdmFyIGxheWVycyA9IFZpZXdlci5nZXRRdWVyeWFibGVMYXllcnMoKTtcclxuICAgICAgICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgICAgICBpZiAobGF5ZXIuZ2V0KCdxdWVyeWFibGUnKSkge1xyXG5cclxuICAgICAgICAgICAgICAvL0lmIGxheWVyIGlzIHRhaW50ZWQsIHRoZW4gY3JlYXRlIHJlcXVlc3QgZm9yIGxheWVyXHJcbiAgICAgICAgICAgICAgaWYoaXNUYWludGVkKGV2dC5waXhlbCwgbGF5ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGxheWVyLCBldnQuY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmKGl0ZW0pIHtyZXF1ZXN0cy5wdXNoKGl0ZW0pfTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIC8vSWYgbGF5ZXIgaXMgbm90IHRhaW50ZWQsIHRlc3QgaWYgbGF5ZXIgaGl0IGF0IHBpeGVsXHJcbiAgICAgICAgICAgICAgZWxzZSBpZihsYXllckF0UGl4ZWwoZXZ0LnBpeGVsLCBsYXllcikpe1xyXG4gICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGdldEdldEZlYXR1cmVJbmZvUmVxdWVzdChsYXllciwgZXZ0LmNvb3JkaW5hdGUpO1xyXG4gICAgICAgICAgICAgICAgICBpZihpdGVtKSB7cmVxdWVzdHMucHVzaChpdGVtKX07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvL0lmIGNyb3NzT3JpZ2luIGlzIG5vdCBzdXBwb3J0ZWQgYW5kIGNhbnZhcyBub3QgdGFpbnRlZFxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgbWFwLmZvckVhY2hMYXllckF0UGl4ZWwoZXZ0LnBpeGVsLCBmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgICAgICBpZiAobGF5ZXIuZ2V0KCdxdWVyeWFibGUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHZhciBpdGVtID0gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGxheWVyLCBldnQuY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLnB1c2goaXRlbSlcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVxdWVzdHM7XHJcbn1cclxuZnVuY3Rpb24gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGxheWVyLCBjb29yZGluYXRlKSB7XHJcbiAgICB2YXIgbGF5ZXJUeXBlID0gbGF5ZXIuZ2V0KCd0eXBlJyksXHJcbiAgICBvYmogPSB7fTtcclxuICAgIG9iai5sYXllciA9IGxheWVyLmdldCgnbmFtZScpO1xyXG5cclxuICAgIHN3aXRjaCAobGF5ZXJUeXBlKSB7XHJcbiAgICAgIGNhc2UgJ1dNVFMnOlxyXG4gICAgICAgIGlmKGxheWVyLmdldCgnZmVhdHVyZWluZm9MYXllcicpKSB7XHJcbiAgICAgICAgICAgIHZhciBmZWF0dXJlaW5mb0xheWVyTmFtZSA9IGxheWVyLmdldCgnZmVhdHVyZWluZm9MYXllcicpLFxyXG4gICAgICAgICAgICBmZWF0dXJlaW5mb0xheWVyID0gVmlld2VyLmdldExheWVyKGZlYXR1cmVpbmZvTGF5ZXJOYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEdldEZlYXR1cmVJbmZvUmVxdWVzdChmZWF0dXJlaW5mb0xheWVyLCBjb29yZGluYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdXTVMnOlxyXG4gICAgICAgIGlmKGxheWVyLmdldCgnZmVhdHVyZWluZm9MYXllcicpKSB7XHJcbiAgICAgICAgICAgIHZhciBmZWF0dXJlaW5mb0xheWVyTmFtZSA9IGxheWVyLmdldCgnZmVhdHVyZWluZm9MYXllcicpLFxyXG4gICAgICAgICAgICBmZWF0dXJlaW5mb0xheWVyID0gVmlld2VyLmdldExheWVyKGZlYXR1cmVpbmZvTGF5ZXJOYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEdldEZlYXR1cmVJbmZvUmVxdWVzdChmZWF0dXJlaW5mb0xheWVyLCBjb29yZGluYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5jYiA9IFwiR0VPSlNPTlwiO1xyXG4gICAgICAgICAgICBvYmouZm4gPSBnZXRHZXRGZWF0dXJlSW5mb1VybChsYXllciwgY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgJ0FHU19USUxFJzpcclxuICAgICAgICAgICAgaWYobGF5ZXIuZ2V0KCdmZWF0dXJlaW5mb0xheWVyJykpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlaW5mb0xheWVyTmFtZSA9IGxheWVyLmdldCgnZmVhdHVyZWluZm9MYXllcicpLFxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZWluZm9MYXllciA9IFZpZXdlci5nZXRMYXllcihmZWF0dXJlaW5mb0xheWVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGZlYXR1cmVpbmZvTGF5ZXIsIGNvb3JkaW5hdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLmZuID0gZ2V0QUdTSWRlbnRpZnlVcmwobGF5ZXIsIGNvb3JkaW5hdGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICAgICAgfVxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNUYWludGVkKHBpeGVsLCBsYXllckZpbHRlcikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZihsYXllckZpbHRlcikge1xyXG4gICAgICAgICAgICBtYXAuZm9yRWFjaExheWVyQXRQaXhlbChwaXhlbCwgZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsYXllckZpbHRlciA9PT0gbGF5ZXI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbWFwLmZvckVhY2hMYXllckF0UGl4ZWwocGl4ZWwsIGZ1bmN0aW9uKGxheWVyKSB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNhdGNoKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBsYXllckF0UGl4ZWwocGl4ZWwsIG1hdGNoTGF5ZXIpIHtcclxuICAgIG1hcC5mb3JFYWNoTGF5ZXJBdFBpeGVsKHBpeGVsLCBmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgIHJldHVybiBtYXRjaExheWVyID09PSBsYXllcjtcclxuICAgIH0pXHJcbn1cclxuZnVuY3Rpb24gZ2V0RmVhdHVyZXNBdFBpeGVsKGV2dCwgY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWwpIHtcclxuICAgIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuICAgIHZhciByZXN1bHQgPSBbXSxcclxuICAgIGNsdXN0ZXIgPSBmYWxzZTtcclxuICAgIG1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwoZXZ0LnBpeGVsLFxyXG4gICAgICAgIGZ1bmN0aW9uKGZlYXR1cmUsIGxheWVyKSB7XHJcbiAgICAgICAgICB2YXIgbCA9IGxheWVyO1xyXG4gICAgICAgICAgdmFyIHF1ZXJ5YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgaWYobGF5ZXIpIHtcclxuICAgICAgICAgICAgICBxdWVyeWFibGUgPSBsYXllci5nZXQoJ3F1ZXJ5YWJsZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoZmVhdHVyZS5nZXQoJ2ZlYXR1cmVzJykpIHtcclxuICAgICAgICAgICAgICAvL0lmIGNsdXN0ZXJcclxuICAgICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IGZlYXR1cmUuZ2V0KCdmZWF0dXJlcycpO1xyXG4gICAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciB6b29tID0gbWFwLmdldFZpZXcoKS5nZXRab29tKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgem9vbUxpbWl0ID0gY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWwgPT09IC0xID8gVmlld2VyLmdldFJlc29sdXRpb25zKCkubGVuZ3RoIDogem9vbSArIGNsdXN0ZXJGZWF0dXJlaW5mb0xldmVsO1xyXG4gICAgICAgICAgICAgICAgaWYoem9vbUxpbWl0IDwgVmlld2VyLmdldFJlc29sdXRpb25zKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRDZW50ZXIoZXZ0LmNvb3JkaW5hdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRWaWV3KCkuc2V0Wm9vbSh6b29tICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2x1c3RlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24oZikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS50aXRsZSA9IGwuZ2V0KCd0aXRsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZmVhdHVyZSA9IGY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jb250ZW50ID0gIGdldEF0dHJpYnV0ZXMoZixsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihjb2xsZWN0aW9uLmxlbmd0aCA9PSAxICYmIHF1ZXJ5YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICBpdGVtLnRpdGxlID0gbC5nZXQoJ3RpdGxlJyk7XHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0uZmVhdHVyZSA9IGNvbGxlY3Rpb25bMF07XHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0uY29udGVudCA9IGdldEF0dHJpYnV0ZXMoY29sbGVjdGlvblswXSxsKTtcclxuICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZihxdWVyeWFibGUpIHtcclxuICAgICAgICAgICAgICB2YXIgaXRlbSA9IHt9O1xyXG4gICAgICAgICAgICAgIGl0ZW0udGl0bGUgPSBsLmdldCgndGl0bGUnKTtcclxuICAgICAgICAgICAgICBpdGVtLmZlYXR1cmUgPSBmZWF0dXJlO1xyXG4gICAgICAgICAgICAgIGl0ZW0uY29udGVudCA9IGdldEF0dHJpYnV0ZXMoZmVhdHVyZSxsKVxyXG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sIFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGhpdFRvbGVyYW5jZTogZmVhdHVyZUluZm8uZ2V0SGl0VG9sZXJhbmNlKClcclxuICAgICAgICB9KTtcclxuXHJcbiAgICBpZihjbHVzdGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRHZXRGZWF0dXJlSW5mb1VybChsYXllciwgY29vcmRpbmF0ZSkge1xyXG4gICAgdmFyIHVybCA9IGxheWVyLmdldFNvdXJjZSgpLmdldEdldEZlYXR1cmVJbmZvVXJsKFxyXG4gICAgY29vcmRpbmF0ZSwgbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCksIFZpZXdlci5nZXRQcm9qZWN0aW9uKCksXHJcbiAgICB7J0lORk9fRk9STUFUJzogJ2FwcGxpY2F0aW9uL2pzb24nfSk7XHJcblxyXG4gICAgcmV0dXJuICQuYWpheCh1cmwsIHtcclxuICAgICAgdHlwZTogJ3Bvc3QnXHJcbiAgICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBpZihyZXNwb25zZS5lcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gbWFwdXRpbHMuZ2VvanNvblRvRmVhdHVyZShyZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgKTtcclxufVxyXG5mdW5jdGlvbiBnZXRBR1NJZGVudGlmeVVybChsYXllciwgY29vcmRpbmF0ZSkge1xyXG4gIHZhciBwcm9qZWN0aW9uQ29kZSA9IFZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG4gIHZhciBlc3JpU3JzID0gcHJvamVjdGlvbkNvZGUuc3BsaXQoJzonKS5wb3AoKTtcclxuICB2YXIgbGF5ZXJJZCA9IGxheWVyLmdldCgnaWQnKTtcclxuICB2YXIgc291cmNlID0gVmlld2VyLmdldE1hcFNvdXJjZSgpW2xheWVyLmdldCgnc291cmNlTmFtZScpXTtcclxuICB2YXIgc2VydmVyVXJsID0gc291cmNlLnVybDtcclxuICB2YXIgZXNyaWpzb25Gb3JtYXQgPSBuZXcgb2wuZm9ybWF0LkVzcmlKU09OKCk7XHJcbiAgdmFyIHNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xyXG4gIHZhciB0b2xlcmFuY2UgPSBzb3VyY2UuaGFzT3duUHJvcGVydHkoJ3RvbGVyYW5jZScpID8gc291cmNlLnRvbGVyYW5jZS50b1N0cmluZygpIDogNTtcclxuICB2YXIgZXh0ZW50ID0gbWFwLmdldFZpZXcoKS5jYWxjdWxhdGVFeHRlbnQoc2l6ZSk7XHJcblxyXG4gIHZhciB1cmwgPSBzZXJ2ZXJVcmwgK1xyXG4gICAgICAnL2lkZW50aWZ5P2Y9anNvbiYnICtcclxuICAgICAgJ3JldHVybkdlb21ldHJ5PXRydWUnICtcclxuICAgICAgJyZnZW9tZXRyeVR5cGU9ZXNyaUdlb21ldHJ5UG9pbnQnK1xyXG4gICAgICAnJnNyPScgKyBlc3JpU3JzICtcclxuICAgICAgJyZnZW9tZXRyeT0nICsgY29vcmRpbmF0ZSArXHJcbiAgICAgICcmb3V0RmllbGRzPSonICtcclxuICAgICAgJyZnZW9tZXRyeVByZWNpc2lvbj0yJyArXHJcbiAgICAgICcmdG9sZXJhbmNlPScgKyB0b2xlcmFuY2UgK1xyXG4gICAgICAnJmxheWVycz1hbGw6JyArIGxheWVySWQgK1xyXG4gICAgICAnJm1hcEV4dGVudD0nICsgZXh0ZW50ICtcclxuICAgICAgJyZpbWFnZURpc3BsYXk9JyArIHNpemUgKyAnLCcgKyAnOTYnO1xyXG5cclxuICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBkYXRhVHlwZTogJ2pzb25wJ1xyXG4gIH0pXHJcbiAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGlmKHJlc3BvbnNlLmVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB7fTtcclxuICAgICAgICAgICAgb2JqLmZlYXR1cmVzID0gcmVzcG9uc2UucmVzdWx0cztcclxuICAgICAgICAgICAgdmFyIGZlYXR1cmVzID0gZXNyaWpzb25Gb3JtYXQucmVhZEZlYXR1cmVzKG9iaiwge1xyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiBWaWV3ZXIuZ2V0UHJvamVjdGlvbigpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZmVhdHVyZXNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuZ2V0RmVhdHVyZXNGcm9tUmVtb3RlID0gZ2V0RmVhdHVyZXNGcm9tUmVtb3RlO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRGZWF0dXJlc0F0UGl4ZWwgPSBnZXRGZWF0dXJlc0F0UGl4ZWw7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxudmFyIG1hcDtcclxudmFyIHRvb2x0aXA7XHJcbnZhciBleHRlbnQ7XHJcblxyXG5mdW5jdGlvbiBJbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICB2YXIgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgJyNvLXRvb2xiYXItbmF2aWdhdGlvbic7XHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG4gIHRvb2x0aXAgPSBvcHRpb25zLnRvb2x0aXBUZXh0IHx8ICdab29tYSB0aWxsIGhlbGEga2FydGFuJztcclxuICBleHRlbnQgPSBvcHRpb25zLmV4dGVudCB8fCBtYXAuZ2V0VmlldygpLmNhbGN1bGF0ZUV4dGVudChtYXAuZ2V0U2l6ZSgpKTtcclxuICByZW5kZXIodGFyZ2V0KTtcclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcih0YXJnZXQpIHtcclxuICB2YXIgZWwgPSB1dGlscy5jcmVhdGVCdXR0b24oe1xyXG4gICAgaWQ6ICdvLWhvbWUtYnV0dG9uJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tZmEtaG9tZScsXHJcbiAgICBzcmM6ICcjZmEtaG9tZScsXHJcbiAgICB0b29sdGlwVGV4dDogdG9vbHRpcFxyXG4gIH0pO1xyXG4gICQodGFyZ2V0KS5hcHBlbmQoZWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICQoJyNvLWhvbWUtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgbWFwLmdldFZpZXcoKS5maXQoZXh0ZW50KTtcclxuICAgICQoJyNvLWhvbWUtYnV0dG9uIGJ1dHRvbicpLmJsdXIoKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IEluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciB2ZWN0b3IgPSByZXF1aXJlKCcuL3ZlY3RvcicpO1xyXG5cclxudmFyIGFnc0ZlYXR1cmUgPSBmdW5jdGlvbiBhZ3NGZWF0dXJlKGxheWVyT3B0aW9ucykge1xyXG4gIHZhciBhZ3NEZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAndmVjdG9yJ1xyXG4gIH07XHJcbiAgdmFyIHNvdXJjZURlZmF1bHQgPSB7fTtcclxuICB2YXIgYWdzT3B0aW9ucyA9ICQuZXh0ZW5kKGFnc0RlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSAkLmV4dGVuZChzb3VyY2VEZWZhdWx0LCB2aWV3ZXIuZ2V0TWFwU291cmNlKClbbGF5ZXJPcHRpb25zLnNvdXJjZU5hbWVdKTtcclxuICBzb3VyY2VPcHRpb25zLmdlb21ldHJ5TmFtZSA9IGFnc09wdGlvbnMuZ2VvbWV0cnlOYW1lO1xyXG4gIHNvdXJjZU9wdGlvbnMuZmlsdGVyID0gYWdzT3B0aW9ucy5maWx0ZXI7XHJcbiAgc291cmNlT3B0aW9ucy5hdHRyaWJ1dGlvbiA9IGFnc09wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uQ29kZSA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG4gIHNvdXJjZU9wdGlvbnMuaWQgPSBhZ3NPcHRpb25zLmlkO1xyXG5cclxuICB2YXIgYWdzU291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB2ZWN0b3IoYWdzT3B0aW9ucywgYWdzU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHZhciB2ZWN0b3JTb3VyY2UgPSBudWxsO1xyXG4gICAgdmFyIGVzcmlTcnMgPSBvcHRpb25zLnByb2plY3Rpb25Db2RlLnNwbGl0KCc6JykucG9wKCk7XHJcbiAgICB2YXIgcXVlcnlGaWx0ZXIgPSBvcHRpb25zLmZpbHRlciA/ICcmd2hlcmU9JyArIG9wdGlvbnMuZmlsdGVyIDogJyc7XHJcbiAgICB2YXIgZXNyaWpzb25Gb3JtYXQgPSBuZXcgb2wuZm9ybWF0LkVzcmlKU09OKCk7XHJcbiAgICB2ZWN0b3JTb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgbG9hZGVyOiBmdW5jdGlvbihleHRlbnQsIHJlc29sdXRpb24sIHByb2plY3Rpb24pIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHVybCA9IG9wdGlvbnMudXJsICsgb3B0aW9ucy5pZCArXHJcbiAgICAgICAgICBlbmNvZGVVUkkoJy9xdWVyeT9mPWpzb24mJyArXHJcbiAgICAgICAgICAgICdyZXR1cm5HZW9tZXRyeT10cnVlJyArXHJcbiAgICAgICAgICAgICcmc3BhdGlhbFJlbD1lc3JpU3BhdGlhbFJlbEludGVyc2VjdHMnICtcclxuICAgICAgICAgICAgJyZnZW9tZXRyeT0nICsgJ3tcInhtaW5cIjonICsgZXh0ZW50WzBdICsgJyxcInltaW5cIjonICtcclxuICAgICAgICAgICAgICBleHRlbnRbMV0gKyAnLFwieG1heFwiOicgKyBleHRlbnRbMl0gKyAnLFwieW1heFwiOicgKyBleHRlbnRbM10gK1xyXG4gICAgICAgICAgICAgICcsXCJzcGF0aWFsUmVmZXJlbmNlXCI6e1wid2tpZFwiOicgKyBlc3JpU3JzICsgJ319JyArXHJcbiAgICAgICAgICAgICcmZ2VvbWV0cnlUeXBlPWVzcmlHZW9tZXRyeUVudmVsb3BlJyArXHJcbiAgICAgICAgICAgICcmaW5TUj0nICsgZXNyaVNycyArICcmb3V0RmllbGRzPSonICsgJycgK1xyXG4gICAgICAgICAgICAnJnJldHVybklkc09ubHk9ZmFsc2UmcmV0dXJuQ291bnRPbmx5PWZhbHNlJyArXHJcbiAgICAgICAgICAgICcmZ2VvbWV0cnlQcmVjaXNpb249MicgK1xyXG4gICAgICAgICAgICAnJm91dFNSPScgKyBlc3JpU3JzICsgcXVlcnlGaWx0ZXIpO1xyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgIGRhdGFUeXBlOiAnanNvbnAnLFxyXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgYWxlcnQocmVzcG9uc2UuZXJyb3IubWVzc2FnZSArICdcXG4nICtcclxuICAgICAgICAgICAgICAgIHJlc3BvbnNlLmVycm9yLmRldGFpbHMuam9pbignXFxuJykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAvLyBkYXRhUHJvamVjdGlvbiB3aWxsIGJlIHJlYWQgZnJvbSBkb2N1bWVudFxyXG4gICAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IGVzcmlqc29uRm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSwge1xyXG4gICAgICAgICAgICAgICAgZmVhdHVyZVByb2plY3Rpb246IHByb2plY3Rpb25cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBpZiAoZmVhdHVyZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhhdC5hZGRGZWF0dXJlcyhmZWF0dXJlcyk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIHN0cmF0ZWd5OiBvbC5sb2FkaW5nc3RyYXRlZ3kuYmJveFxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdmVjdG9yU291cmNlO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBhZ3NGZWF0dXJlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgdGlsZSA9IHJlcXVpcmUoJy4vdGlsZScpO1xyXG5cclxudmFyIGFnc1RpbGUgPSBmdW5jdGlvbiBhZ3NUaWxlKGxheWVyT3B0aW9ucykge1xyXG4gIHZhciBhZ3NEZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAndGlsZScsXHJcbiAgICBmZWF0dXJlaW5mb0xheWVyOiB1bmRlZmluZWRcclxuICB9O1xyXG4gIHZhciBzb3VyY2VEZWZhdWx0ID0ge307XHJcbiAgdmFyIGFnc09wdGlvbnMgPSAkLmV4dGVuZChhZ3NEZWZhdWx0LCBsYXllck9wdGlvbnMpO1xyXG4gIGFnc09wdGlvbnMuc291cmNlTmFtZSA9IGFnc09wdGlvbnMubmFtZTtcclxuICB2YXIgc291cmNlT3B0aW9ucyA9ICQuZXh0ZW5kKHNvdXJjZURlZmF1bHQsIHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllck9wdGlvbnMuc291cmNlXSk7XHJcbiAgc291cmNlT3B0aW9ucy5hdHRyaWJ1dGlvbiA9IGFnc09wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uQ29kZSA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG4gIHNvdXJjZU9wdGlvbnMucGFyYW1zID0gYWdzT3B0aW9ucy5wYXJhbXMgfHwge307XHJcbiAgc291cmNlT3B0aW9ucy5wYXJhbXMubGF5ZXJzID0gXCJzaG93OlwiICsgYWdzT3B0aW9ucy5pZDtcclxuXHJcbiAgdmFyIGFnc1NvdXJjZSA9IGNyZWF0ZVNvdXJjZShzb3VyY2VPcHRpb25zKTtcclxuICByZXR1cm4gdGlsZShhZ3NPcHRpb25zLCBhZ3NTb3VyY2UpO1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVTb3VyY2Uob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIG5ldyBvbC5zb3VyY2UuVGlsZUFyY0dJU1Jlc3Qoe1xyXG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb24sXHJcbiAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbkNvZGUsXHJcbiAgICAgIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcclxuICAgICAgcGFyYW1zOiBvcHRpb25zLnBhcmFtcyxcclxuICAgICAgdXJsOiBvcHRpb25zLnVybFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGFnc1RpbGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgdmVjdG9yID0gcmVxdWlyZSgnLi92ZWN0b3InKTtcclxuXHJcbnZhciBmZWF0dXJlTGF5ZXIgPSBmdW5jdGlvbiBmZWF0dXJlTGF5ZXIobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBsYXllck9wdGlvbnM7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSB7fTtcclxuICB2YXIgdmVjdG9yU291cmNlO1xyXG4gIHNvdXJjZU9wdGlvbnMuYXR0cmlidXRpb24gPSBsYXllck9wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5mZWF0dXJlcyA9IGxheWVyT3B0aW9ucy5mZWF0dXJlcztcclxuXHJcbiAgdmVjdG9yU291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB2ZWN0b3Iob3B0aW9ucywgdmVjdG9yU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgZmVhdHVyZXM6IG9wdGlvbnMuZmVhdHVyZXNcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmZWF0dXJlTGF5ZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciB2ZWN0b3IgPSByZXF1aXJlKCcuL3ZlY3RvcicpO1xyXG52YXIgaXNVcmwgPSByZXF1aXJlKCcuLi91dGlscy9pc3VybCcpO1xyXG5cclxudmFyIGdlb2pzb24gPSBmdW5jdGlvbiBnZW9qc29uKGxheWVyT3B0aW9ucykge1xyXG4gIHZhciBiYXNlVXJsID0gdmlld2VyLmdldEJhc2VVcmwoKTtcclxuICB2YXIgZ2VvanNvbkRlZmF1bHQgPSB7XHJcbiAgICBsYXllclR5cGU6ICd2ZWN0b3InXHJcbiAgfTtcclxuICB2YXIgZ2VvanNvbk9wdGlvbnMgPSAkLmV4dGVuZChnZW9qc29uRGVmYXVsdCwgbGF5ZXJPcHRpb25zKTtcclxuICB2YXIgZ2VvanNvblNvdXJjZTtcclxuICB2YXIgc291cmNlT3B0aW9ucyA9IHt9O1xyXG4gIHNvdXJjZU9wdGlvbnMuYXR0cmlidXRpb24gPSBnZW9qc29uT3B0aW9ucy5hdHRyaWJ1dGlvbjtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgc291cmNlT3B0aW9ucy5zb3VyY2VOYW1lID0gbGF5ZXJPcHRpb25zLnNvdXJjZTtcclxuICBpZiAoaXNVcmwoZ2VvanNvbk9wdGlvbnMuc291cmNlKSkge1xyXG4gICAgc291cmNlT3B0aW9ucy51cmwgPSBnZW9qc29uT3B0aW9ucy5zb3VyY2U7XHJcbiAgfSBlbHNlIHtcclxuICAgIGdlb2pzb25PcHRpb25zLnNvdXJjZU5hbWUgPSBiYXNlVXJsICsgZ2VvanNvbk9wdGlvbnMuc291cmNlO1xyXG4gICAgc291cmNlT3B0aW9ucy51cmwgPSBnZW9qc29uT3B0aW9ucy5zb3VyY2U7XHJcbiAgfVxyXG5cclxuICBnZW9qc29uU291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB2ZWN0b3IoZ2VvanNvbk9wdGlvbnMsIGdlb2pzb25Tb3VyY2UpO1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVTb3VyY2Uob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIG5ldyBvbC5zb3VyY2UuVmVjdG9yKHtcclxuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9uLFxyXG4gICAgICB1cmw6IG9wdGlvbnMudXJsLFxyXG4gICAgICBmb3JtYXQ6IG5ldyBvbC5mb3JtYXQuR2VvSlNPTigpXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2VvanNvbjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcblxyXG52YXIgZ3JvdXAgPSBmdW5jdGlvbiBncm91cChsYXllck9wdGlvbnMpIHtcclxuICB2YXIgZ3JvdXBEZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAnZ3JvdXAnLFxyXG4gICAgc3R5bGVOYW1lOiAnZGVmYXVsdCdcclxuICB9O1xyXG4gIHZhciBncm91cE9wdGlvbnMgPSAkLmV4dGVuZChncm91cERlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgcmV0dXJuIG5ldyBvbC5sYXllci5Hcm91cChncm91cE9wdGlvbnMpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdyb3VwO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHRpbGUgPSByZXF1aXJlKCcuL3RpbGUnKTtcclxuXHJcbnZhciBvc20gPSBmdW5jdGlvbiBvc20obGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIG9zbURlZmF1bHQgPSB7fTtcclxuICB2YXIgb3NtT3B0aW9ucyA9ICQuZXh0ZW5kKG9zbURlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcblxyXG4gIHZhciBvc21Tb3VyY2UgPSBjcmVhdGVTb3VyY2UoKTtcclxuICByZXR1cm4gdGlsZShvc21PcHRpb25zLCBvc21Tb3VyY2UpO1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVTb3VyY2UoKSB7XHJcbiAgICByZXR1cm4gbmV3IG9sLnNvdXJjZS5PU00oKVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBvc207XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0aWxlKG9wdGlvbnMsIHNvdXJjZSkge1xyXG4gIG9wdGlvbnMuc291cmNlID0gc291cmNlO1xyXG4gIHJldHVybiBuZXcgb2wubGF5ZXIuVGlsZShvcHRpb25zKTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgdmVjdG9yID0gcmVxdWlyZSgnLi92ZWN0b3InKTtcclxudmFyIGlzVXJsID0gcmVxdWlyZSgnLi4vdXRpbHMvaXN1cmwnKTtcclxuXHJcbnZhciB0b3BvanNvbiA9IGZ1bmN0aW9uIHRvcG9qc29uKGxheWVyT3B0aW9ucykge1xyXG4gIHZhciBiYXNlVXJsID0gdmlld2VyLmdldEJhc2VVcmwoKTtcclxuICB2YXIgdG9wb2pzb25EZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAndmVjdG9yJ1xyXG4gIH07XHJcbiAgdmFyIHRvcG9qc29uT3B0aW9ucyA9ICQuZXh0ZW5kKHRvcG9qc29uRGVmYXVsdCwgbGF5ZXJPcHRpb25zKTtcclxuICB2YXIgdG9wb2pzb25Tb3VyY2U7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSB7fTtcclxuICBzb3VyY2VPcHRpb25zLmF0dHJpYnV0aW9uID0gdG9wb2pzb25PcHRpb25zLmF0dHJpYnV0aW9uO1xyXG4gIHNvdXJjZU9wdGlvbnMucHJvamVjdGlvbkNvZGUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICBzb3VyY2VPcHRpb25zLnNvdXJjZU5hbWUgPSBsYXllck9wdGlvbnMuc291cmNlO1xyXG4gIGlmIChpc1VybCh0b3BvanNvbk9wdGlvbnMuc291cmNlKSkge1xyXG4gICAgc291cmNlT3B0aW9ucy51cmwgPSB0b3BvanNvbk9wdGlvbnMuc291cmNlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0b3BvanNvbk9wdGlvbnMuc291cmNlTmFtZSA9IGJhc2VVcmwgKyB0b3BvanNvbk9wdGlvbnMuc291cmNlO1xyXG4gICAgc291cmNlT3B0aW9ucy51cmwgPSB0b3BvanNvbk9wdGlvbnMuc291cmNlO1xyXG4gIH1cclxuXHJcbiAgdG9wb2pzb25Tb3VyY2UgPSBjcmVhdGVTb3VyY2Uoc291cmNlT3B0aW9ucyk7XHJcbiAgcmV0dXJuIHZlY3Rvcih0b3BvanNvbk9wdGlvbnMsIHRvcG9qc29uU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgdXJsOiBvcHRpb25zLnVybCxcclxuICAgICAgZm9ybWF0OiBuZXcgb2wuZm9ybWF0LlRvcG9KU09OKHtcclxuICAgICAgICBkZWZhdWx0RGF0YVByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbkNvZGVcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB0b3BvanNvbjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciBzdHlsZSA9IHJlcXVpcmUoJy4uL3N0eWxlJykoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdmVjdG9yKG9wdGlvbnMsIHNvdXJjZSkge1xyXG4gIHZhciB2ZWN0b3JMYXllcjtcclxuICBzd2l0Y2ggKG9wdGlvbnMubGF5ZXJUeXBlKSB7XHJcbiAgICBjYXNlICd2ZWN0b3InOlxyXG4gICAgICBvcHRpb25zLnNvdXJjZSA9IHNvdXJjZTtcclxuICAgICAgb3B0aW9ucy5zdHlsZSA9IHN0eWxlLmNyZWF0ZVN0eWxlKG9wdGlvbnMuc3R5bGUpO1xyXG4gICAgICB2ZWN0b3JMYXllciA9IG5ldyBvbC5sYXllci5WZWN0b3Iob3B0aW9ucyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnY2x1c3Rlcic6XHJcbiAgICAgIG9wdGlvbnMuc291cmNlID0gbmV3IG9sLnNvdXJjZS5DbHVzdGVyKHtcclxuICAgICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb24sXHJcbiAgICAgICAgc291cmNlOiBzb3VyY2UsXHJcbiAgICAgICAgZGlzdGFuY2U6IDYwXHJcbiAgICAgIH0pO1xyXG4gICAgICBvcHRpb25zLnN0eWxlID0gc3R5bGUuY3JlYXRlU3R5bGUob3B0aW9ucy5zdHlsZSwgb3B0aW9ucy5jbHVzdGVyU3R5bGUpO1xyXG4gICAgICB2ZWN0b3JMYXllciA9IG5ldyBvbC5sYXllci5WZWN0b3Iob3B0aW9ucyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnaW1hZ2UnOlxyXG4gICAgICBvcHRpb25zLnNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuSW1hZ2VWZWN0b3Ioe1xyXG4gICAgICAgIHNvdXJjZTogc291cmNlLFxyXG4gICAgICAgIHN0eWxlOiBzdHlsZS5jcmVhdGVTdHlsZShvcHRpb25zLnN0eWxlKVxyXG4gICAgICB9KTtcclxuICAgICAgdmVjdG9yTGF5ZXIgPSBuZXcgb2wubGF5ZXIuSW1hZ2Uob3B0aW9ucyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxuICByZXR1cm4gdmVjdG9yTGF5ZXI7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgdmVjdG9yID0gcmVxdWlyZSgnLi92ZWN0b3InKTtcclxuXHJcbnZhciB3ZnMgPSBmdW5jdGlvbiB3ZnMobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIHdmc0RlZmF1bHQgPSB7XHJcbiAgICBsYXllclR5cGU6ICd2ZWN0b3InXHJcbiAgfTtcclxuICB2YXIgc291cmNlRGVmYXVsdCA9IHt9O1xyXG4gIHZhciB3ZnNPcHRpb25zID0gJC5leHRlbmQod2ZzRGVmYXVsdCwgbGF5ZXJPcHRpb25zKTtcclxuICB2YXIgc291cmNlT3B0aW9ucyA9ICQuZXh0ZW5kKHNvdXJjZURlZmF1bHQsIHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllck9wdGlvbnMuc291cmNlTmFtZV0pO1xyXG4gIHdmc09wdGlvbnMuZmVhdHVyZVR5cGUgPSBzb3VyY2VPcHRpb25zLmZlYXR1cmVUeXBlID0gd2ZzT3B0aW9ucy5pZDtcclxuICBzb3VyY2VPcHRpb25zLmdlb21ldHJ5TmFtZSA9IHdmc09wdGlvbnMuZ2VvbWV0cnlOYW1lO1xyXG4gIHNvdXJjZU9wdGlvbnMuZmlsdGVyID0gd2ZzT3B0aW9ucy5maWx0ZXI7XHJcbiAgc291cmNlT3B0aW9ucy5hdHRyaWJ1dGlvbiA9IHdmc09wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5yZXNvbHV0aW9ucyA9IHZpZXdlci5nZXRSZXNvbHV0aW9ucygpO1xyXG4gIHNvdXJjZU9wdGlvbnMucHJvamVjdGlvbkNvZGUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuXHJcbiAgdmFyIHdmc1NvdXJjZSA9IGNyZWF0ZVNvdXJjZShzb3VyY2VPcHRpb25zKTtcclxuICByZXR1cm4gdmVjdG9yKHdmc09wdGlvbnMsIHdmc1NvdXJjZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVNvdXJjZShvcHRpb25zKSB7XHJcbiAgICB2YXIgdmVjdG9yU291cmNlID0gbnVsbDtcclxuICAgIHZhciBzZXJ2ZXJVcmwgPSBvcHRpb25zLnVybDtcclxuXHJcbiAgICAvL0lmIGNxbCBmaWx0ZXIgdGhlbiBiYm94IG11c3QgYmUgdXNlZCBpbiB0aGUgZmlsdGVyLlxyXG4gICAgdmFyIHF1ZXJ5RmlsdGVyID0gb3B0aW9ucy5maWx0ZXIgPyAnJkNRTF9GSUxURVI9JyArIG9wdGlvbnMuZmlsdGVyICsgJyBBTkQgQkJPWCgnICsgb3B0aW9ucy5nZW9tZXRyeU5hbWUgKyAnLCcgOiAnJkJCT1g9JztcclxuICAgIHZhciBiYm94UHJvamVjdGlvbkNvZGUgPSBvcHRpb25zLmZpbHRlciA/IFwiJ1wiICsgb3B0aW9ucy5wcm9qZWN0aW9uQ29kZSArIFwiJylcIiA6IG9wdGlvbnMucHJvamVjdGlvbkNvZGU7XHJcbiAgICB2ZWN0b3JTb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgZm9ybWF0OiBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oe1xyXG4gICAgICAgIGdlb21ldHJ5TmFtZTogb3B0aW9ucy5nZW9tZXRyeU5hbWVcclxuICAgICAgfSksXHJcbiAgICAgIGxvYWRlcjogZnVuY3Rpb24oZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIHVybCA9IHNlcnZlclVybCArXHJcbiAgICAgICAgICAnP3NlcnZpY2U9V0ZTJicgK1xyXG4gICAgICAgICAgJ3ZlcnNpb249MS4xLjAmcmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVOYW1lPScgKyBvcHRpb25zLmZlYXR1cmVUeXBlICtcclxuICAgICAgICAgICcmb3V0cHV0Rm9ybWF0PWFwcGxpY2F0aW9uL2pzb24nICtcclxuICAgICAgICAgICcmc3JzbmFtZT0nICsgb3B0aW9ucy5wcm9qZWN0aW9uQ29kZSArXHJcbiAgICAgICAgICBxdWVyeUZpbHRlciArIGV4dGVudC5qb2luKCcsJykgKyAnLCcgKyBiYm94UHJvamVjdGlvbkNvZGU7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHZlY3RvclNvdXJjZS5hZGRGZWF0dXJlcyh2ZWN0b3JTb3VyY2UuZ2V0Rm9ybWF0KCkucmVhZEZlYXR1cmVzKHJlc3BvbnNlKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgc3RyYXRlZ3k6IG9sLmxvYWRpbmdzdHJhdGVneS50aWxlKG9sLnRpbGVncmlkLmNyZWF0ZVhZWih7XHJcbiAgICAgICAgbWF4Wm9vbTogb3B0aW9ucy5yZXNvbHV0aW9ucy5sZW5ndGhcclxuICAgICAgfSkpXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2ZWN0b3JTb3VyY2U7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHdmcztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHRpbGUgPSByZXF1aXJlKCcuL3RpbGUnKTtcclxuXHJcbnZhciB3bXMgPSBmdW5jdGlvbiB3bXMobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIHdtc0RlZmF1bHQgPSB7XHJcbiAgICBsYXllclR5cGU6ICd0aWxlJyxcclxuICAgIGZlYXR1cmVpbmZvTGF5ZXI6IHVuZGVmaW5lZFxyXG4gIH07XHJcbiAgdmFyIHNvdXJjZURlZmF1bHQgPSB7XHJcbiAgICB2ZXJzaW9uOiAnMS4xLjEnLFxyXG4gICAgZ3V0dGVyOiAwXHJcbiAgfTtcclxuICB2YXIgd21zT3B0aW9ucyA9ICQuZXh0ZW5kKHdtc0RlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgd21zT3B0aW9ucy5uYW1lLnNwbGl0KCc6JykucG9wKCk7XHJcbiAgd21zT3B0aW9ucy5zb3VyY2VOYW1lID0gd21zT3B0aW9ucy5uYW1lO1xyXG4gIHZhciBzb3VyY2VPcHRpb25zID0gJC5leHRlbmQoc291cmNlRGVmYXVsdCwgdmlld2VyLmdldE1hcFNvdXJjZSgpW2xheWVyT3B0aW9ucy5zb3VyY2VdKTtcclxuICBzb3VyY2VPcHRpb25zLmF0dHJpYnV0aW9uID0gd21zT3B0aW9ucy5hdHRyaWJ1dGlvbjtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgc291cmNlT3B0aW9ucy5pZCA9IHdtc09wdGlvbnMuaWQ7XHJcblxyXG4gIHZhciB3bXNTb3VyY2UgPSBjcmVhdGVTb3VyY2Uoc291cmNlT3B0aW9ucyk7XHJcbiAgcmV0dXJuIHRpbGUod21zT3B0aW9ucywgd21zU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgb2wuc291cmNlLlRpbGVXTVMoKHtcclxuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9uLFxyXG4gICAgICB1cmw6IG9wdGlvbnMudXJsLFxyXG4gICAgICBndXR0ZXI6IG9wdGlvbnMuZ3V0dGVyLFxyXG4gICAgICBjcm9zc09yaWdpbjogJ2Fub255bW91cycsXHJcbiAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbkNvZGUsXHJcbiAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICdMQVlFUlMnOiBvcHRpb25zLmlkLFxyXG4gICAgICAgICdUSUxFRCc6IHRydWUsXHJcbiAgICAgICAgVkVSU0lPTjogb3B0aW9ucy52ZXJzaW9uXHJcbiAgICAgIH1cclxuICAgIH0pKVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB3bXM7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciB0aWxlID0gcmVxdWlyZSgnLi90aWxlJyk7XHJcblxyXG52YXIgd210cyA9IGZ1bmN0aW9uIHdtdHMobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIHdtdHNEZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAndGlsZScsXHJcbiAgICBmZWF0dXJlaW5mb0xheWVyOiB1bmRlZmluZWRcclxuICB9O1xyXG4gIHZhciBzb3VyY2VEZWZhdWx0ID0ge1xyXG4gICAgbWF0cml4U2V0OiB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKSxcclxuICAgIG1hdHJpeElkc1ByZWZpeDogdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCkgKyAnOicsXHJcbiAgICBmb3JtYXQ6ICdpbWFnZS9wbmcnLFxyXG4gICAgcmVzb2x1dGlvbnM6IHZpZXdlci5nZXRSZXNvbHV0aW9ucygpLFxyXG4gICAgdGlsZVNpemU6IFsyNTYsIDI1Nl1cclxuICB9O1xyXG4gIHZhciB3bXRzT3B0aW9ucyA9ICQuZXh0ZW5kKHdtdHNEZWZhdWx0LCBsYXllck9wdGlvbnMpO1xyXG4gIHdtdHNPcHRpb25zLm5hbWUuc3BsaXQoJzonKS5wb3AoKTtcclxuICB3bXRzT3B0aW9ucy5zb3VyY2VOYW1lID0gd210c09wdGlvbnMubmFtZTtcclxuICB2YXIgc291cmNlT3B0aW9ucyA9ICQuZXh0ZW5kKHNvdXJjZURlZmF1bHQsIHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllck9wdGlvbnMuc291cmNlXSk7XHJcbiAgaWYgKHdtdHNPcHRpb25zLmhhc093blByb3BlcnR5KCdmb3JtYXQnKSkge1xyXG4gICAgc291cmNlT3B0aW9ucy5mb3JtYXQgPSB3bXRzT3B0aW9ucy5mb3JtYXQ7XHJcbiAgfVxyXG4gIHNvdXJjZU9wdGlvbnMuYXR0cmlidXRpb24gPSB3bXRzT3B0aW9ucy5hdHRyaWJ1dGlvbjtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgc291cmNlT3B0aW9ucy5tYXRyaXhJZHMgPSBbXTtcclxuICBzb3VyY2VPcHRpb25zLnJlc29sdXRpb25zLmZvckVhY2goZnVuY3Rpb24ocmVzb2x1dGlvbiwgaSkge1xyXG4gICAgc291cmNlT3B0aW9ucy5tYXRyaXhJZHNbaV0gPSBzb3VyY2VPcHRpb25zLm1hdHJpeElkc1ByZWZpeCArIGk7XHJcbiAgfSk7XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uRXh0ZW50ID0gdmlld2VyLmdldFByb2plY3Rpb24oKS5nZXRFeHRlbnQoKTtcclxuICBzb3VyY2VPcHRpb25zLmlkID0gd210c09wdGlvbnMuaWQ7XHJcblxyXG4gIHZhciB3bXRzU291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB0aWxlKHdtdHNPcHRpb25zLCB3bXRzU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgb2wuc291cmNlLldNVFMoe1xyXG4gICAgICBjcm9zc09yaWdpbjogJ2Fub255bW91cycsXHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgdXJsOiBvcHRpb25zLnVybCxcclxuICAgICAgcHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uQ29kZSxcclxuICAgICAgbGF5ZXI6IG9wdGlvbnMuaWQsXHJcbiAgICAgIG1hdHJpeFNldDogb3B0aW9ucy5tYXRyaXhTZXQsXHJcbiAgICAgIGZvcm1hdDogb3B0aW9ucy5mb3JtYXQsXHJcbiAgICAgIHRpbGVHcmlkOiBuZXcgb2wudGlsZWdyaWQuV01UUyh7XHJcbiAgICAgICAgb3JpZ2luOiBvcHRpb25zLm9yaWdpbiB8fCBvbC5leHRlbnQuZ2V0VG9wTGVmdChvcHRpb25zLnByb2plY3Rpb25FeHRlbnQpLFxyXG4gICAgICAgIHJlc29sdXRpb25zOiBvcHRpb25zLnJlc29sdXRpb25zLFxyXG4gICAgICAgIG1hdHJpeElkczogb3B0aW9ucy5tYXRyaXhJZHMsXHJcbiAgICAgICAgdGlsZVNpemU6IG9wdGlvbnMudGlsZVNpemVcclxuICAgICAgfSksXHJcbiAgICAgIHN0eWxlOiAnZGVmYXVsdCdcclxuICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHdtdHM7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciB0aWxlID0gcmVxdWlyZSgnLi90aWxlJyk7XHJcblxyXG52YXIgeHl6ID0gZnVuY3Rpb24geHl6KGxheWVyT3B0aW9ucykge1xyXG4gIHZhciB4eXpEZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAndGlsZScsXHJcbiAgICBmZWF0dXJlaW5mb0xheWVyOiB1bmRlZmluZWRcclxuICB9O1xyXG4gIHZhciBzb3VyY2VEZWZhdWx0ID0ge307XHJcbiAgdmFyIHh5ek9wdGlvbnMgPSAkLmV4dGVuZCh4eXpEZWZhdWx0LCBsYXllck9wdGlvbnMpO1xyXG4gIHh5ek9wdGlvbnMuc291cmNlTmFtZSA9IHh5ek9wdGlvbnMuaWQ7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSAkLmV4dGVuZChzb3VyY2VEZWZhdWx0LCB2aWV3ZXIuZ2V0TWFwU291cmNlKClbbGF5ZXJPcHRpb25zLnNvdXJjZV0pO1xyXG4gIHNvdXJjZU9wdGlvbnMuYXR0cmlidXRpb25zID0geHl6T3B0aW9ucy5hdHRyaWJ1dGlvbjtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb24gPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKSB8fCAnRVBTRzozODU3JztcclxuICBzb3VyY2VPcHRpb25zLnRpbGVHcmlkID0gdmlld2VyLmdldFRpbGVHcmlkKCk7XHJcblxyXG4gIHZhciB4eXpTb3VyY2UgPSBjcmVhdGVTb3VyY2Uoc291cmNlT3B0aW9ucyk7XHJcbiAgcmV0dXJuIHRpbGUoeHl6T3B0aW9ucywgeHl6U291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHZhciBmb3JtYXQgPSBvcHRpb25zLnNvdXJjZU5hbWUuc3BsaXQoJy4nKVsxXSxcclxuICAgICAgdXJsID0gb3B0aW9ucy5zb3VyY2VOYW1lLnNwbGl0KCcuJylbMF0gKyAnL3t6fS97eH0ve3l9Lic7XHJcbiAgICB1cmwgKz0gZm9ybWF0O1xyXG4gICAgb3B0aW9ucy51cmwgPSBmb3JtYXQ7XHJcbiAgICByZXR1cm4gbmV3IG9sLnNvdXJjZS5YWVoob3B0aW9ucyk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHh5ejtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIG1hcFV0aWxzID0gcmVxdWlyZSgnLi9tYXB1dGlscycpO1xyXG52YXIgZ3JvdXAgPSByZXF1aXJlKCcuL2xheWVyL2dyb3VwJyk7XHJcbnZhciB0eXBlID0ge307XHJcbnZhciBsYXllckNyZWF0b3I7XHJcbnR5cGUuV0ZTID0gcmVxdWlyZSgnLi9sYXllci93ZnMnKTtcclxudHlwZS5BR1NfRkVBVFVSRSA9IHJlcXVpcmUoJy4vbGF5ZXIvYWdzZmVhdHVyZScpO1xyXG50eXBlLlRPUE9KU09OID0gcmVxdWlyZSgnLi9sYXllci90b3BvanNvbicpO1xyXG50eXBlLkdFT0pTT04gPSByZXF1aXJlKCcuL2xheWVyL2dlb2pzb24nKTtcclxudHlwZS5XTVMgPSByZXF1aXJlKCcuL2xheWVyL3dtcycpO1xyXG50eXBlLldNVFMgPSByZXF1aXJlKCcuL2xheWVyL3dtdHMnKTtcclxudHlwZS5BR1NfVElMRSA9IHJlcXVpcmUoJy4vbGF5ZXIvYWdzdGlsZScpO1xyXG50eXBlLlhZWiA9IHJlcXVpcmUoJy4vbGF5ZXIveHl6Jyk7XHJcbnR5cGUuT1NNID0gcmVxdWlyZSgnLi9sYXllci9vc20nKTtcclxudHlwZS5GRUFUVVJFID0gcmVxdWlyZSgnLi9sYXllci9mZWF0dXJlbGF5ZXInKTs7XHJcbnR5cGUuR1JPVVAgPSBncm91cExheWVyO1xyXG5cclxubGF5ZXJDcmVhdG9yID0gZnVuY3Rpb24gbGF5ZXJDcmVhdG9yKG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgbmFtZTogdW5kZWZpbmVkLFxyXG4gICAgaWQ6IHVuZGVmaW5lZCxcclxuICAgIHRpdGxlOiB1bmRlZmluZWQsXHJcbiAgICBncm91cDogJ25vbmUnLFxyXG4gICAgb3BhY2l0eTogMSxcclxuICAgIGdlb21ldHJ5TmFtZTogJ2dlb20nLFxyXG4gICAgZ2VvbWV0cnlUeXBlOiB1bmRlZmluZWQsXHJcbiAgICBmaWx0ZXI6IHVuZGVmaW5lZCxcclxuICAgIGxheWVyVHlwZTogdW5kZWZpbmVkLFxyXG4gICAgbGVnZW5kOiBmYWxzZSxcclxuICAgIHNvdXJjZU5hbWU6IHVuZGVmaW5lZCxcclxuICAgIGF0dHJpYnV0aW9uOiB1bmRlZmluZWQsXHJcbiAgICBzdHlsZTogJ2RlZmF1bHQnLFxyXG4gICAgc3R5bGVOYW1lOiB1bmRlZmluZWQsXHJcbiAgICBxdWVyeWFibGU6IHRydWUsXHJcbiAgICBtaW5SZXNvbHV0aW9uOiB1bmRlZmluZWQsXHJcbiAgICBtYXhSZXNvbHV0aW9uOiB1bmRlZmluZWQsXHJcbiAgICB2aXNpYmxlOiBmYWxzZSxcclxuICAgIHR5cGU6IHVuZGVmaW5lZCxcclxuICAgIGV4dGVudDogdW5kZWZpbmVkLFxyXG4gICAgYXR0cmlidXRlczogdW5kZWZpbmVkXHJcbiAgfTtcclxuICB2YXIgcHJvamVjdGlvbiA9IHZpZXdlci5nZXRQcm9qZWN0aW9uKCk7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICB2YXIgbGF5ZXJPcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdE9wdGlvbnMsIG9wdGlvbnMpO1xyXG4gIHZhciBuYW1lID0gbGF5ZXJPcHRpb25zLm5hbWU7XHJcbiAgbGF5ZXJPcHRpb25zLm1pblJlc29sdXRpb24gPSBsYXllck9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ21pblNjYWxlJykgPyBtYXBVdGlscy5zY2FsZVRvUmVzb2x1dGlvbihsYXllck9wdGlvbnMubWluU2NhbGUsIHByb2plY3Rpb24pOiB1bmRlZmluZWQ7XHJcbiAgbGF5ZXJPcHRpb25zLm1heFJlc29sdXRpb24gPSBsYXllck9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ21heFNjYWxlJykgPyBtYXBVdGlscy5zY2FsZVRvUmVzb2x1dGlvbihsYXllck9wdGlvbnMubWF4U2NhbGUsIHByb2plY3Rpb24pOiB1bmRlZmluZWQ7XHJcbiAgbGF5ZXJPcHRpb25zLmV4dGVudCA9IGxheWVyT3B0aW9ucy5leHRlbnQgfHwgdmlld2VyLmdldEV4dGVudCgpO1xyXG4gIGxheWVyT3B0aW9ucy5zb3VyY2VOYW1lID0gbGF5ZXJPcHRpb25zLnNvdXJjZTtcclxuICBsYXllck9wdGlvbnMuc3R5bGVOYW1lID0gbGF5ZXJPcHRpb25zLnN0eWxlO1xyXG4gIGlmIChsYXllck9wdGlvbnMuaWQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgbGF5ZXJPcHRpb25zLmlkID0gbmFtZS5zcGxpdCgnX18nKS5zaGlmdCgpO1xyXG4gIH1cclxuXHJcbiAgbGF5ZXJPcHRpb25zLm5hbWUgPSBuYW1lLnNwbGl0KCc6JykucG9wKCk7XHJcblxyXG4gIGlmICh0eXBlLmhhc093blByb3BlcnR5KGxheWVyT3B0aW9ucy50eXBlKSkge1xyXG4gICAgcmV0dXJuIHR5cGVbbGF5ZXJPcHRpb25zLnR5cGVdKGxheWVyT3B0aW9ucywgbGF5ZXJDcmVhdG9yKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coJ0xheWVyIHR5cGUgaXMgbWlzc2luZyBvciBsYXllciB0eXBlIGlzIG5vdCBjb3JyZWN0LiBDaGVjayB5b3VyIGxheWVyIGRlZmluaXRpb246ICcpO1xyXG4gICAgY29uc29sZS5sb2cobGF5ZXJPcHRpb25zKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdyb3VwTGF5ZXIob3B0aW9ucykge1xyXG4gIHZhciBsYXllcnM7XHJcbiAgdmFyIGxheWVyT3B0aW9ucztcclxuICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnbGF5ZXJzJykpIHtcclxuICAgIGxheWVycyA9IG9wdGlvbnMubGF5ZXJzLm1hcChmdW5jdGlvbihsYXllcikge1xyXG4gICAgICByZXR1cm4gbGF5ZXJDcmVhdG9yKGxheWVyKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxheWVyT3B0aW9ucyA9IHt9O1xyXG4gICAgbGF5ZXJPcHRpb25zLmxheWVycyA9IGxheWVycztcclxuICAgIHJldHVybiBncm91cCgkLmV4dGVuZChvcHRpb25zLCBsYXllck9wdGlvbnMpKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coJ0dyb3VwIGxheWVyIGhhcyBubyBsYXllcnMnKTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbGF5ZXJDcmVhdG9yO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbnZhciBtb2RhbCA9IHJlcXVpcmUoJy4vbW9kYWwnKTtcclxudmFyIHZhbGlkYXRlVXJsID0gcmVxdWlyZSgnLi91dGlscy92YWxpZGF0ZXVybCcpO1xyXG5cclxudmFyIHN5bWJvbFNpemUgPSAyMDtcclxudmFyIHN0eWxlU2V0dGluZ3M7XHJcbnZhciBiYXNlVXJsO1xyXG52YXIgaGFzTWFwTGVnZW5kO1xyXG5cclxuZnVuY3Rpb24gaW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcblxyXG4gIGJhc2VVcmwgPSB2aWV3ZXIuZ2V0QmFzZVVybCgpO1xyXG4gIGhhc01hcExlZ2VuZCA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2hhc01hcExlZ2VuZCcpID8gb3B0aW9ucy5oYXNNYXBMZWdlbmQgOiB0cnVlO1xyXG4gIHN0eWxlU2V0dGluZ3MgPSB2aWV3ZXIuZ2V0U3R5bGVTZXR0aW5ncygpO1xyXG5cclxuICByZW5kZXIoKTtcclxuICBhZGRMZWdlbmQodmlld2VyLmdldEdyb3VwcygndG9wJykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgJCgnI28tbWVudXRvb2xzJykuYXBwZW5kKCc8bGkgY2xhc3M9XCJvLW1lbnUtaXRlbVwiPjxkaXYgY2xhc3M9XCJvLW1lbnUtaXRlbS1kaXZpZGVyXCI+PC9kaXY+PGxpPicpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTeW1ib2woc3R5bGUpIHtcclxuICB2YXIgc3ltYm9sPScnO1xyXG4gIHZhciBzID0gc3R5bGVbMF07XHJcbiAgaWYgKHNbMF0uaGFzT3duUHJvcGVydHkoJ2ljb24nKSkge1xyXG4gICAgdmFyIHNyYyA9IHZhbGlkYXRlVXJsKHNbMF0uaWNvbi5zcmMsIGJhc2VVcmwpO1xyXG4gICAgLy8gdmFyIHNjYWxlID0gc3R5bGUuaWNvbi5zY2FsZSB8fCB1bmRlZmluZWQ7XHJcbiAgICB2YXIgZm9ybWF0ID0gc1swXS5mb3JtYXQgfHwgJ3BuZyc7XHJcbiAgICBpZiAoZm9ybWF0ID09ICdwbmcnKSB7XHJcbiAgICAgIHN5bWJvbCA9ICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS1pbWdcIj48aW1nIHN0eWxlPVwid2lkdGg6IGF1dG87IGhlaWdodDogMjBweDtcIiBzcmM9XCInICsgc3JjICsgJ1wiPjwvZGl2PidcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGZvcm1hdCA9PSAnc3ZnJykge1xyXG4gICAgICB2YXIgbyA9ICc8b2JqZWN0IHR5cGU9XCJpbWFnZS9zdmcreG1sXCIgZGF0YT1cIicgKyBzcmMgKyAnXCIgc3R5bGU9XCJ3aWR0aDogMjBweDtcIj48L29iamVjdD4nO1xyXG4gICAgICB2YXIgaW5saW5lU3R5bGUgPSAnYmFja2dyb3VuZDogdXJsKCcgKyBzcmMgKyAnKSBuby1yZXBlYXQ7d2lkdGg6IDIwcHg7IGhlaWdodDogMjBweDtiYWNrZ3JvdW5kLXNpemU6IDIwcHg7JztcclxuICAgICAgc3ltYm9sID0gJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLWltZ1wiPicgKyBvICsgJzwvZGl2Pic7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGVsc2UgaWYgKHNbMF0uaGFzT3duUHJvcGVydHkoJ2ZpbGwnKSkge1xyXG4gICAgdmFyIGZpbGwgPSAnJztcclxuICAgIGZvcih2YXIgaT0wOyBpPHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgZmlsbCArPSBjcmVhdGVGaWxsKHNbaV0pO1xyXG4gICAgfVxyXG4gICAgc3ltYm9sICs9ICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS1pbWdcIj48c3ZnIGhlaWdodD1cIicgKyBzeW1ib2xTaXplICsgJ1wiIHdpZHRoPVwiJyArIHN5bWJvbFNpemUgKyAnXCI+JztcclxuICAgIHN5bWJvbCArPSBmaWxsO1xyXG4gICAgc3ltYm9sICs9ICc8L3N2Zz48L2Rpdj4nO1xyXG4gIH1cclxuICBlbHNlIGlmIChzWzBdLmhhc093blByb3BlcnR5KCdzdHJva2UnKSkge1xyXG4gICAgdmFyIHN0cm9rZSA9ICcnO1xyXG4gICAgZm9yKHZhciBpPTA7IGk8cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBzdHJva2UgKz0gY3JlYXRlU3Ryb2tlKHNbaV0pO1xyXG4gICAgfVxyXG4gICAgc3ltYm9sICs9ICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS1pbWdcIj48c3ZnIGhlaWdodD1cIicgKyBzeW1ib2xTaXplICsgJ1wiIHdpZHRoPVwiJyArIHN5bWJvbFNpemUgKyAnXCI+JztcclxuICAgIHN5bWJvbCArPSBzdHJva2U7XHJcbiAgICBzeW1ib2wgKz0gJzwvc3ZnPjwvZGl2Pic7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKHNbMF0uaGFzT3duUHJvcGVydHkoJ2NpcmNsZScpKSB7XHJcbiAgICB2YXIgY2lyY2xlID0gJyc7XHJcbiAgICBmb3IodmFyIGk9MDsgaTxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGNpcmNsZSArPSBjcmVhdGVDaXJjbGUoc1tpXSk7XHJcbiAgICB9XHJcbiAgICBzeW1ib2wgKz0gJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLWltZ1wiPjxzdmcgaGVpZ2h0PVwiJyArIHN5bWJvbFNpemUgKyAnXCIgd2lkdGg9XCInICsgc3ltYm9sU2l6ZSArICdcIj4nO1xyXG4gICAgc3ltYm9sICs9IGNpcmNsZTtcclxuICAgIHN5bWJvbCArPSAnPC9zdmc+PC9kaXY+JztcclxuICB9XHJcbiAgZWxzZSBpZiAoc1swXS5oYXNPd25Qcm9wZXJ0eSgnaW1hZ2UnKSkge1xyXG4gICAgdmFyIHNyYyA9IHZhbGlkYXRlVXJsKHNbMF0uaW1hZ2Uuc3JjLCBiYXNlVXJsKTtcclxuICAgIHZhciBpbmxpbmVTdHlsZSA9ICdiYWNrZ3JvdW5kOiB1cmwoJyArIHNyYyArICcpIG5vLXJlcGVhdDt3aWR0aDogMzBweDsgaGVpZ2h0OiAzMHB4O2JhY2tncm91bmQtc2l6ZTogMzBweDsnO1xyXG4gICAgc3ltYm9sID0gJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLWltZ1wiIHN0eWxlPVwiJyArIGlubGluZVN0eWxlICsnXCI+PC9kaXY+JztcclxuICB9XHJcblxyXG4gIHJldHVybiBzeW1ib2w7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUZpbGwoZmlsbFByb3BlcnRpZXMpIHtcclxuICB2YXIgZiA9IGZpbGxQcm9wZXJ0aWVzO1xyXG4gIHZhciBzdHJva2VXaWR0aCA9IDA7XHJcblxyXG4gIGlmKGYuaGFzT3duUHJvcGVydHkoJ3N0cm9rZScpKSB7XHJcbiAgICBzdHJva2VXaWR0aCA9IGYuc3Ryb2tlLndpZHRoID49MyA/IDMgOiBmLnN0cm9rZS53aWR0aDtcclxuICAgIHZhciBzdHJva2UgPSAnc3Ryb2tlOicgKyBmLnN0cm9rZS5jb2xvciArICc7JyB8fCAnc3Ryb2tlOm5vbmU7JztcclxuICAgIHN0cm9rZSArPSAnc3Ryb2tlLXdpZHRoOicgKyBzdHJva2VXaWR0aCArICc7JyB8fCAnJztcclxuICAgIHN0cm9rZSArPSAnc3Ryb2tlLWRhc2hhcnJheTonICsgZi5zdHJva2UubGluZURhc2ggKyAnOycgfHwgJyc7XHJcbiAgfVxyXG5cclxuICB2YXIgZmlsbFNpemUgPSBzeW1ib2xTaXplIC0gNDsgLy8tMi0yXHJcbiAgdmFyIGZpbGwgPSAnPHJlY3QgeD1cIjJcIiB5PVwiMlwiIHJ4PVwiMlwiIHJ5PVwiMlwiIHdpZHRoPVwiJyArIGZpbGxTaXplICsgJ1wiIGhlaWdodD1cIicgKyBmaWxsU2l6ZSArICdcIiAnO1xyXG4gIGZpbGwgKz0gZi5oYXNPd25Qcm9wZXJ0eSgnZmlsbCcpID8gJ3N0eWxlPVwiZmlsbDonICsgZi5maWxsLmNvbG9yICsgJzsnIDogJ3N0eWxlPVwiZmlsbDpub25lOyc7XHJcbiAgZmlsbCArPSBzdHJva2U7XHJcbiAgZmlsbCArPSAnXCI+PC9yZWN0Pic7XHJcblxyXG4gIHJldHVybiBmaWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDaXJjbGUoY2lyY2xlUHJvcGVydGllcykge1xyXG4gIHZhciBjID0gY2lyY2xlUHJvcGVydGllcy5jaXJjbGU7XHJcbiAgdmFyIHN0cm9rZVdpZHRoID0gMDtcclxuXHJcbiAgaWYoYy5oYXNPd25Qcm9wZXJ0eSgnc3Ryb2tlJykpIHtcclxuICAgIHN0cm9rZVdpZHRoID0gYy5zdHJva2Uud2lkdGggPj0zID8gMyA6IGMuc3Ryb2tlLndpZHRoO1xyXG4gICAgdmFyIHN0cm9rZSA9ICdzdHJva2U6JyArIGMuc3Ryb2tlLmNvbG9yICsgJzsnIHx8ICdzdHJva2U6bm9uZTsnO1xyXG4gICAgc3Ryb2tlICs9ICdzdHJva2Utd2lkdGg6JyArIHN0cm9rZVdpZHRoICsgJzsnIHx8ICcnO1xyXG4gIH1cclxuXHJcbiAgdmFyIHNpemUgPSBzeW1ib2xTaXplLzI7XHJcbiAgdmFyIGZpbGwgPSAnPGNpcmNsZSBjeD1cIicgKyBzaXplICsgJ1wiIGN5PVwiJyArIHNpemUgKyAnXCIgcj1cIicgKyBjLnJhZGl1cyArICdcIiAnO1xyXG4gIGZpbGwgKz0gYy5oYXNPd25Qcm9wZXJ0eSgnZmlsbCcpID8gJ3N0eWxlPVwiZmlsbDonICsgYy5maWxsLmNvbG9yICsgJzsnIDogJ3N0eWxlPVwiZmlsbDpub25lOyc7XHJcbiAgZmlsbCArPSBzdHJva2U7XHJcbiAgZmlsbCArPSAnXCI+PC9jaXJjbGU+JztcclxuXHJcbiAgcmV0dXJuIGZpbGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0cm9rZShzdHJva2VQcm9wZXJ0aWVzKSB7XHJcbiAgdmFyIHMgPSBzdHJva2VQcm9wZXJ0aWVzO1xyXG4gIHZhciBzdHJva2VXaWR0aCA9IHMuc3Ryb2tlLndpZHRoID4gNCA/IDQgOiBzLnN0cm9rZS53aWR0aDtcclxuICBzdHJva2VXaWR0aCA9IHMuc3Ryb2tlLndpZHRoIDwgMiA/IDIgOiBzdHJva2VXaWR0aDtcclxuICB2YXIgc3Ryb2tlID0gJzxsaW5lIHgxID0gXCIyXCIgeTE9IFwiJyArIChzeW1ib2xTaXplLTQpLnRvU3RyaW5nKCkgKyAnXCIgeDI9XCInICsgKHN5bWJvbFNpemUtNCkudG9TdHJpbmcoKSArICdcIiB5Mj1cIjJcIiAnO1xyXG4gIHN0cm9rZSArPSAnc3R5bGU9XCInO1xyXG4gIHN0cm9rZSArPSAnc3Ryb2tlOicgKyBzLnN0cm9rZS5jb2xvciArICc7JyB8fCAnc3Ryb2tlOm5vbmU7JztcclxuICBzdHJva2UgKz0gJ3N0cm9rZS13aWR0aDonICsgc3Ryb2tlV2lkdGggKyAnOycgfHwgJyc7XHJcbiAgc3Ryb2tlICs9ICdzdHJva2UtZGFzaGFycmF5OicgKyBzLnN0cm9rZS5saW5lRGFzaCArICc7JyB8fCAnJztcclxuICBzdHJva2UgKz0gJ1wiLz4nO1xyXG5cclxuICByZXR1cm4gc3Ryb2tlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRBYnN0cmFjdEJ1dHRvbihpdGVtKSB7XHJcbiAgdmFyIGluZm9UZXh0QnV0dG9uID0gICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS1pbmZvIG8tYWJzdHJhY3RcIiBpZD1cIm8tbGVnZW5kLWl0ZW0taW5mby0nICsgaXRlbSArICdcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1pbmZvLWNpcmNsZVwiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1pbmZvLWNpcmNsZVwiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICByZXR1cm4gaW5mb1RleHRCdXR0b247XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxlZ2VuZEl0ZW0obGF5ZXJpZCwgbGF5ZXJTdHlsZSwgaW5TdWJncm91cCkge1xyXG4gIHZhciBsYXllcm5hbWUgPSBsYXllcmlkLnNwbGl0KCdvLWxlZ2VuZC0nKS5wb3AoKTtcclxuICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJuYW1lKTtcclxuICB2YXIgc3ViQ2xhc3MgPSBpblN1Ymdyb3VwID8gJyBvLWxlZ2VuZC1zdWJpdGVtJyA6ICcnO1xyXG4gIHZhciBsZWdlbmRJdGVtID0gJyc7XHJcblxyXG4gIGlmIChsYXllclN0eWxlICYmIGxheWVyU3R5bGVbMF1bMF0uaGFzT3duUHJvcGVydHkoJ2ZpbHRlcicpKSB7XHJcblxyXG4gICAgaWYgKGxheWVyU3R5bGVbMF1bMF0uaGFzT3duUHJvcGVydHkoJ2xlZ2VuZCcpKSB7XHJcbiAgICAgIGxlZ2VuZEl0ZW0gKz0gJzxsaSBjbGFzcz1cIm8tbGVnZW5kICcgKyBsYXllcm5hbWUgKyAnXCI+JztcclxuICAgICAgbGVnZW5kSXRlbSArPSAnPHVsIGlkPVwiby1ncm91cC0nICsgbGF5ZXJuYW1lICsgJ1wiIGNsYXNzPVwiby1sZWdlbmQtZ3JvdXAgby11bC1leHBhbmQtZmFsc2VcIj48bGkgY2xhc3M9XCInICsgbGF5ZXJuYW1lICsgJ1wiIGlkPVwiJyArIGxheWVyaWQgKyAnXCI+JztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxlZ2VuZEl0ZW0gKz0gJzxsaSBjbGFzcz1cIm8tbGVnZW5kICcgKyBsYXllcm5hbWUgKyAnXCIgaWQ9XCInICsgbGF5ZXJpZCArICdcIj4nO1xyXG4gICAgfVxyXG5cclxuICAgIGxlZ2VuZEl0ZW0gKz0gJzxkaXYgY2xhc3MgPVwiby1sZWdlbmQtaXRlbScgKyBzdWJDbGFzcyArICdcIj48ZGl2IGNsYXNzPVwiby1jaGVja2JveFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLXNxdWFyZS1vXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLXNxdWFyZS1vXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hlY2stc3F1YXJlLW9cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtY2hlY2stc3F1YXJlLW9cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICBsZWdlbmRJdGVtICs9ICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS10aXRsZSBvLXRydW5jYXRlXCI+JyArIGxheWVyLmdldCgndGl0bGUnKSArICc8L2Rpdj4nO1xyXG5cclxuICAgIGlmKGxheWVyLmdldCgnYWJzdHJhY3QnKSl7XHJcbiAgICAgIGxlZ2VuZEl0ZW0gKz0gYWRkQWJzdHJhY3RCdXR0b24obGF5ZXJuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAobGF5ZXJTdHlsZVswXVswXS5oYXNPd25Qcm9wZXJ0eSgnbGVnZW5kJykpIHtcclxuICAgICAgbGVnZW5kSXRlbSArPSAnPGRpdiBjbGFzcz1cIm8taWNvbi1leHBhbmQgby1pY29uLWV4cGFuZC1mYWxzZVwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hldnJvbi1yaWdodFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHVzZSB4bGluazpocmVmPVwiI2ZhLWFuZ2xlLWRvdWJsZS1yaWdodFwiPjwvdXNlPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJzwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hldnJvbi1kb3duXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dXNlIHhsaW5rOmhyZWY9XCIjZmEtYW5nbGUtZG91YmxlLWRvd25cIj48L3VzZT4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICc8L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICAgbGVnZW5kSXRlbSArPSAnPC9kaXY+PC9saT4nO1xyXG5cclxuICAgICAgbGF5ZXJTdHlsZS5mb3JFYWNoKGZ1bmN0aW9uIChzdHlsZUFycmF5KSB7XHJcbiAgICAgICAgbGVnZW5kSXRlbSArPSAnPGxpIGNsYXNzPVwiby1sZWdlbmQgJyArIGxheWVybmFtZSArICdcIiBpZD1cIicgKyBsYXllcm5hbWUgKyAnXCI+PGRpdiBjbGFzcyA9XCJvLWxlZ2VuZC1zdWJpdGVtXCI+JztcclxuICAgICAgICBsZWdlbmRJdGVtICs9ICc8ZGl2IGNsYXNzPVwiby1jaGVja2JveCBvLWNoZWNrYm94LWZhbHNlXCI+PC9kaXY+JztcclxuICAgICAgICBsZWdlbmRJdGVtICs9IGxheWVyLmdldCgnc3R5bGVOYW1lJykgPyBnZXRTeW1ib2woW3N0eWxlQXJyYXldKSA6ICcnO1xyXG4gICAgICAgIGxlZ2VuZEl0ZW0gKz0gJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1zdWJpdGVtLXRpdGxlXCI+JyArIHN0eWxlQXJyYXlbMF0ubGVnZW5kICsgJzwvZGl2PjwvZGl2PjwvbGk+JztcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBsZWdlbmRJdGVtICs9ICc8L3VsPjwvbGk+J1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBsZWdlbmRJdGVtICs9ICc8bGkgY2xhc3M9XCJvLWxlZ2VuZCAnICsgbGF5ZXJuYW1lICsgJ1wiIGlkPVwiJyArIGxheWVyaWQgKyAnXCI+PGRpdiBjbGFzcyA9XCJvLWxlZ2VuZC1pdGVtJyArIHN1YkNsYXNzICsgJ1wiPjxkaXYgY2xhc3M9XCJvLWNoZWNrYm94XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtc3F1YXJlLW9cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtc3F1YXJlLW9cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGVjay1zcXVhcmUtb1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1jaGVjay1zcXVhcmUtb1wiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgIGxlZ2VuZEl0ZW0gKz0gIGxheWVyLmdldCgnc3R5bGVOYW1lJykgPyBnZXRTeW1ib2woc3R5bGVTZXR0aW5nc1tsYXllci5nZXQoJ3N0eWxlTmFtZScpXSkgOiAnJztcclxuICAgIGxlZ2VuZEl0ZW0gKz0gJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLXRpdGxlIG8tdHJ1bmNhdGVcIj4nICsgbGF5ZXIuZ2V0KCd0aXRsZScpICsgJzwvZGl2Pic7XHJcblxyXG4gICAgaWYobGF5ZXIuZ2V0KCdhYnN0cmFjdCcpKXtcclxuICAgICAgbGVnZW5kSXRlbSArPSBhZGRBYnN0cmFjdEJ1dHRvbihsYXllcm5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGxlZ2VuZEl0ZW0gKz0gJzwvZGl2PjwvbGk+JztcclxuICB9XHJcblxyXG4gIHJldHVybiBsZWdlbmRJdGVtO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVHcm91cChncm91cCwgcGFyZW50R3JvdXApIHtcclxuICB2YXIgbGVnZW5kR3JvdXA7XHJcbiAgdmFyIG92ZXJsYXlHcm91cDtcclxuICB2YXIgYWJzdHJhY3QgPSAnJztcclxuXHJcbiAgaWYgKGdyb3VwLmhhc093blByb3BlcnR5KCdvdmVybGF5R3JvdXAnKSkge1xyXG4gICAgb3ZlcmxheUdyb3VwID0gZ3JvdXAubmFtZTtcclxuICB9XHJcblxyXG4gIGlmIChncm91cC5hYnN0cmFjdCkge1xyXG4gICAgYWJzdHJhY3QgKz0gYWRkQWJzdHJhY3RCdXR0b24oZ3JvdXAubmFtZSk7XHJcbiAgfVxyXG5cclxuICBpZiAocGFyZW50R3JvdXApIHtcclxuICAgIHZhciBpbmRlbnQgPSAkKHBhcmVudEdyb3VwKS5wYXJlbnQoKS5jbG9zZXN0KCd1bCcpLmhhc0NsYXNzKCdvLWxlZ2VuZC1ncm91cCcpID8gJ28tbGVnZW5kLWluZGVudCcgOiAnJztcclxuXHJcbiAgICBsZWdlbmRHcm91cCA9ICc8bGkgY2xhc3M9XCJvLWxlZ2VuZCAnICsgZ3JvdXAubmFtZSArICcgby10b3AtaXRlbVwiIGlkPVwiJyArIGdyb3VwLm5hbWUgKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzx1bCBpZD1cIm8tZ3JvdXAtJyArIGdyb3VwLm5hbWUgKyAnXCIgY2xhc3M9XCJvLWxlZ2VuZC1ncm91cCBvLWxlZ2VuZC1zdWJncm91cCAnICsgaW5kZW50ICsnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPGxpIGNsYXNzPVwiby1sZWdlbmQtaGVhZGVyIG8tbGVnZW5kLXN1YmhlYWRlciAnICsgZ3JvdXAubmFtZSArICdcIiBpZD1cIicgKyBncm91cC5uYW1lICsgJ1wiPjxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiby1jaGVja2JveFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLXNxdWFyZS1vXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLXNxdWFyZS1vXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hlY2stc3F1YXJlLW9cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtY2hlY2stc3F1YXJlLW9cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLXN1Ymdyb3VwLXRpdGxlIG8tdHJ1bmNhdGVcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cC50aXRsZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWljb24tZXhwYW5kXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hldnJvbi1yaWdodFwiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1hbmdsZS1kb3VibGUtcmlnaHRcIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGV2cm9uLWRvd25cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtYW5nbGUtZG91YmxlLWRvd25cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgKyBhYnN0cmFjdCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9saT4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC91bD4nICtcclxuICAgICAgICAgICAgICAgICAgJzwvbGk+JztcclxuICAgIHBhcmVudEdyb3VwLmFwcGVuZChsZWdlbmRHcm91cCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGxlZ2VuZEdyb3VwID0gJzxsaT4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHVsIGlkPVwiby1ncm91cC0nICsgZ3JvdXAubmFtZSArICdcIiBjbGFzcz1cIm8tbGVnZW5kLWdyb3VwXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPGxpIGNsYXNzPVwiby1sZWdlbmQtaGVhZGVyXCI+PGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW1cIj4nICsgZ3JvdXAudGl0bGUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8taWNvbi1leHBhbmRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGV2cm9uLXJpZ2h0XCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWNoZXZyb24tcmlnaHRcIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGV2cm9uLWRvd25cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtY2hldnJvbi1kb3duXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICsgYWJzdHJhY3QgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvbGk+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvdWw+JyArXHJcbiAgICAgICAgICAgICAgICAgICc8L2xpPic7XHJcbiAgICAkKCcjby1sZWdlbmRsaXN0IC5vLWxlZ2VuZGxpc3QnKS5hcHBlbmQobGVnZW5kR3JvdXApO1xyXG4gIH1cclxuXHJcbiAgaWYgKGdyb3VwLmV4cGFuZGVkID09IHRydWUpIHtcclxuICAgICQoJyNvLWdyb3VwLScgKyBncm91cC5uYW1lICsnIC5vLWljb24tZXhwYW5kJykuYWRkQ2xhc3MoJ28taWNvbi1leHBhbmQtdHJ1ZScpO1xyXG4gICAgJCgnI28tZ3JvdXAtJyArIGdyb3VwLm5hbWUgKycgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAkKCcjby1ncm91cC0nICsgZ3JvdXAubmFtZSArJyAuby1pY29uLWV4cGFuZCcpLmFkZENsYXNzKCdvLWljb24tZXhwYW5kLWZhbHNlJyk7XHJcbiAgICAkKCcjby1ncm91cC0nICsgZ3JvdXAubmFtZSArJyAuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrYm94LWZhbHNlJyk7XHJcbiAgICAkKCcjby1ncm91cC0nICsgZ3JvdXAubmFtZSkuYWRkQ2xhc3MoJ28tdWwtZXhwYW5kLWZhbHNlJyk7XHJcbiAgfVxyXG5cclxuICAkKCcjby1ncm91cC0nICsgZ3JvdXAubmFtZSArICcgLm8tbGVnZW5kLWhlYWRlcicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG5cclxuICAgIGlmICgkKGV2dC50YXJnZXQpLmNsb3Nlc3QoJ2RpdicpLmhhc0NsYXNzKCdvLWNoZWNrYm94JykpIHtcclxuICAgICAgdG9nZ2xlU3ViR3JvdXBDaGVjaygkKHRoaXMpLnBhcmVudCgpLCB0cnVlKTtcclxuICAgIH0gZWxzZSBpZiAoJChldnQudGFyZ2V0KS5jbG9zZXN0KCdkaXYnKS5oYXNDbGFzcygnby1hYnN0cmFjdCcpKSB7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdG9nZ2xlR3JvdXAoJCh0aGlzKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcblxyXG4gIGlmIChncm91cC5oYXNPd25Qcm9wZXJ0eSgnZ3JvdXBzJykpIHtcclxuICAgIGdyb3VwLmdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uKHN1Ymdyb3VwKSB7XHJcbiAgICAgIGNyZWF0ZUdyb3VwKHN1Ymdyb3VwLCAkKCcjby1ncm91cC0nICsgZ3JvdXAubmFtZSkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRMZWdlbmQoZ3JvdXBzKSB7XHJcbiAgdmFyIGxheWVycyA9IHZpZXdlci5nZXRNYXAoKS5nZXRMYXllcnMoKS5nZXRBcnJheSgpO1xyXG4gIHZhciBvdmVybGF5R3JvdXA7XHJcbiAgdmFyIGl0ZW0gPSAnJztcclxuXHJcbiAgLy9BZGQgbGVnZW5kIGdyb3Vwc1xyXG4gIHZhciBsZWdlbmQgPSAnPGRpdiBpZD1cIm8tbGVnZW5kbGlzdFwiPjx1bCBjbGFzcz1cIm8tbGVnZW5kbGlzdFwiPjwvdWw+PC9kaXY+JztcclxuICAkKCcjby1tYXBtZW51JykuYXBwZW5kKGxlZ2VuZCk7XHJcblxyXG4gIGdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICBjcmVhdGVHcm91cChncm91cCk7XHJcbiAgfSk7XHJcblxyXG4gIC8vQWRkIG1hcCBsZWdlbmQgdW5sZXNzIHNldCB0byBmYWxzZVxyXG4gIGlmKGhhc01hcExlZ2VuZCkge1xyXG4gICAgdmFyIG1hcExlZ2VuZCA9ICc8ZGl2IGlkPVwiby1tYXAtbGVnZW5kXCI+PHVsIGlkPVwiby1sZWdlbmQtb3ZlcmxheVwiPjxsaSBjbGFzcz1cIm8tbGVnZW5kIG8taGlkZGVuXCI+PGRpdiBjbGFzcyA9XCJvLXRvZ2dsZS1idXR0b24gby10b2dnbGUtYnV0dG9uLW1heFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1hbmdsZS1kb3VibGUtZG93blwiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1hbmdsZS1kb3VibGUtZG93blwiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1hbmdsZS1kb3VibGUtdXBcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtYW5nbGUtZG91YmxlLXVwXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvbGk+PGxpPjx1bCBpZD1cIm8tb3ZlcmxheS1saXN0XCI+PC9saT48L3VsPjwvdWw+PHVsIGlkPVwiby1tYXAtbGVnZW5kLWJhY2tncm91bmRcIj48L3VsPjwvZGl2Pic7XHJcbiAgICAkKCcjby1tYXAnKS5hcHBlbmQobWFwTGVnZW5kKTtcclxuXHJcbiAgICAvL0FkZCBkaXZpZGVyIHRvIG1hcCBsZWdlbmQgaWYgbm90IG9ubHkgYmFja2dyb3VuZFxyXG4gICAgaWYob3ZlcmxheUdyb3VwKSB7XHJcbiAgICAgICQoJyNvLW1hcC1sZWdlbmQtYmFja2dyb3VuZCcpLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLWRpdmlkZXJcIj48L2Rpdj4nKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICAvL0FkZCBsYXllcnMgdG8gbGVnZW5kXHJcbiAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcclxuXHJcbiAgICB2YXIgbmFtZSA9IChsYXllci5nZXQoJ25hbWUnKSk7XHJcbiAgICB2YXIgbGF5ZXJTdHlsZSA9IHN0eWxlU2V0dGluZ3NbbGF5ZXIuZ2V0KCdzdHlsZU5hbWUnKV07XHJcbiAgICAvL0NoZWNrIGlmIGxheWVyIGJlbG9uZ3MgdG8gc3ViZ3JvdXBcclxuICAgIHZhciBpblN1Ymdyb3VwID0gJCgnI28tZ3JvdXAtJyArIGxheWVyLmdldCgnZ3JvdXAnKSkuY2xvc2VzdCgndWwnKS5wYXJlbnQoKS5jbG9zZXN0KCd1bCcpLmhhc0NsYXNzKCdvLWxlZ2VuZC1ncm91cCcpO1xyXG4gICAgdmFyIHRpdGxlID0gJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLXRpdGxlIG8tdHJ1bmNhdGVcIj4nICsgbGF5ZXIuZ2V0KCd0aXRsZScpICsgJzwvZGl2Pic7XHJcblxyXG4gICAgLy9BZGQgYWJzdHJhY3QgYnV0dG9uXHJcbiAgICBpZihsYXllci5nZXQoJ2Fic3RyYWN0Jykpe1xyXG4gICAgICB0aXRsZSArPSBhZGRBYnN0cmFjdEJ1dHRvbihuYW1lKTtcclxuICAgIH1cclxuICAgIHRpdGxlICs9ICc8L2Rpdj48L2xpPic7XHJcblxyXG4gICAgLy9BcHBlbmQgbGF5ZXIgdG8gZ3JvdXAgaW4gbGVnZW5kLiBBZGQgdG8gZGVmYXVsdCBncm91cCBpZiBub3QgZGVmaW5lZC5cclxuICAgIGlmKGxheWVyLmdldCgnZ3JvdXAnKSA9PSAnYmFja2dyb3VuZCcpIHtcclxuXHJcbiAgICAgIC8vQXBwZW5kIGJhY2tncm91bmQgbGF5ZXJzIHRvIG1lbnVcclxuICAgICAgaXRlbSA9ICc8bGkgY2xhc3M9XCJvLWxlZ2VuZCAnICsgbmFtZSArICdcIiBpZD1cIicgKyBuYW1lICsgJ1wiPjxkaXYgY2xhc3MgPVwiby1sZWdlbmQtaXRlbVwiPjxkaXYgY2xhc3M9XCJvLWNoZWNrYm94XCI+PHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGVja1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1jaGVja1wiPjwvdXNlPjwvc3ZnPjwvZGl2Pic7XHJcbiAgICAgIGl0ZW0gKz0gdGl0bGU7XHJcbiAgICAgICQoJyNvLWdyb3VwLWJhY2tncm91bmQgLm8tbGVnZW5kLWhlYWRlcicpLmFmdGVyKGl0ZW0pO1xyXG5cclxuICAgICAgLy9BcHBlbmQgYmFja2dyb3VuZCBsYXllcnMgdG8gbWFwIGxlZ2VuZFxyXG4gICAgICBpdGVtID0gJzxsaSBjbGFzcz1cIm8tbGVnZW5kICcgKyBuYW1lICsgJ1wiIGlkPVwiby1sZWdlbmQtJyArIG5hbWUgKyAnXCI+PGRpdiBjbGFzcyA9XCJvLWxlZ2VuZC1pdGVtXCI+J1xyXG4gICAgICBpdGVtICs9IGxheWVyLmdldCgnc3R5bGVOYW1lJykgPyBnZXRTeW1ib2woc3R5bGVTZXR0aW5nc1tsYXllci5nZXQoJ3N0eWxlTmFtZScpXSkgOiAnJztcclxuICAgICAgaXRlbSArPSAnPC9kaXY+JztcclxuICAgICAgJCgnI28tbWFwLWxlZ2VuZC1iYWNrZ3JvdW5kJykucHJlcGVuZChpdGVtKTtcclxuXHJcbiAgICB9IGVsc2UgaWYobGF5ZXIuZ2V0KCdncm91cCcpICYmICgobGF5ZXIuZ2V0KCdncm91cCcpICE9ICdub25lJykpKSB7XHJcblxyXG4gICAgICAvL0FwcGVuZCBsYXllciB0byBncm91cFxyXG4gICAgICBpdGVtID0gY3JlYXRlTGVnZW5kSXRlbShuYW1lLCBsYXllclN0eWxlLCBpblN1Ymdyb3VwKTtcclxuICAgICAgaWYgKCQoJyNvLWdyb3VwLScgKyBsYXllci5nZXQoJ2dyb3VwJykpLmZpbmQoJ2xpLm8tdG9wLWl0ZW06bGFzdCcpLmxlbmd0aCkge1xyXG4gICAgICAgICQoJyNvLWdyb3VwLScgKyBsYXllci5nZXQoJ2dyb3VwJykpLmZpbmQoJ2xpLm8tdG9wLWl0ZW06bGFzdCcpLmFmdGVyKGl0ZW0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNvLWdyb3VwLScgKyBsYXllci5nZXQoJ2dyb3VwJykgKyAnIC5vLWxlZ2VuZC1oZWFkZXInKS5hZnRlcihpdGVtKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYobGF5ZXIuZ2V0KCdsZWdlbmQnKSA9PSB0cnVlIHx8IGxheWVyLmdldFZpc2libGUodHJ1ZSkpIHtcclxuICAgICAgICAvL0FwcGVuZCB0byBtYXAgbGVnZW5kXHJcbiAgICAgICAgaXRlbSA9ICc8bGkgY2xhc3M9XCJvLWxlZ2VuZCAnICsgbmFtZSArICdcIiBpZD1cIm8tbGVnZW5kLScgKyBuYW1lICsgJ1wiPjxkaXYgY2xhc3MgPVwiby1sZWdlbmQtaXRlbVwiPjxkaXYgY2xhc3M9XCJvLWNoZWNrYm94XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLXNxdWFyZS1vXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLXNxdWFyZS1vXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZWNrLXNxdWFyZS1vXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWNoZWNrLXNxdWFyZS1vXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICBpdGVtICs9IGxheWVyLmdldCgnc3R5bGVOYW1lJykgPyBnZXRTeW1ib2woc3R5bGVTZXR0aW5nc1tsYXllci5nZXQoJ3N0eWxlTmFtZScpXSkgOiAnJztcclxuICAgICAgICBpdGVtICs9IHRpdGxlO1xyXG4gICAgICAgICQoJyNvLW92ZXJsYXktbGlzdCcpLmFwcGVuZChpdGVtKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vQ2hlY2sgbWFwIGxlZ2VuZCB0byBtYWtlIHN1cmUgbWluaW1pemUgYnV0dG9uIGFwcGVhcnNcclxuICAgIGNoZWNrVG9nZ2xlT3ZlcmxheSgpO1xyXG5cclxuICAgIC8vQXBwZW5kIGNsYXNzIGFjY29yZGluZyB0byB2aXNpYmxpdHkgYW5kIGlmIGdyb3VwIGlzIGJhY2tncm91bmRcclxuICAgIGlmIChsYXllci5nZXQoJ2dyb3VwJykgPT0gJ2JhY2tncm91bmQnKSB7XHJcbiAgICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCk9PXRydWUpIHtcclxuICAgICAgICAkKCcjJyArIG5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2stdHJ1ZScpO1xyXG4gICAgICAgICQoJyNvLWxlZ2VuZC0nICsgbmFtZSkuYWRkQ2xhc3MoJ28tY2hlY2stdHJ1ZS1pbWcnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcjJyArIG5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2stZmFsc2UnKTtcclxuICAgICAgICAkKCcjby1sZWdlbmQtJyArIG5hbWUpLmFkZENsYXNzKCdvLWNoZWNrLWZhbHNlLWltZycpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAobGF5ZXIuZ2V0VmlzaWJsZSgpPT10cnVlKSB7XHJcbiAgICAgICAgJCgnLicgKyBuYW1lICsgJyAuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrYm94LXRydWUnKTtcclxuXHJcbiAgICAgICAgaWYgKGluU3ViZ3JvdXApIHtcclxuICAgICAgICAgIHZhciBwYXJlbnRHcm91cHMgPSAkKCcjJyArIG5hbWUpLnBhcmVudHMoJ3VsIFtpZF49by1ncm91cC1dJyk7XHJcbiAgICAgICAgICBbXS5mb3JFYWNoLmNhbGwocGFyZW50R3JvdXBzLCBmdW5jdGlvbihlbCkge1xyXG4gICAgICAgICAgICB0b2dnbGVHcm91cCgkKGVsKS5maW5kKCdsaTpmaXJzdCcpKTtcclxuICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgIHRvZ2dsZVN1Ykdyb3VwQ2hlY2soJCgnIycgKyBuYW1lKS5wYXJlbnRzKCd1bCcpLmhhcygnLm8tbGVnZW5kLWhlYWRlcicpLmZpcnN0KCksIGZhbHNlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgJCgnI28tZ3JvdXAtJyArIGxheWVyLmdldCgnZ3JvdXAnKSArJyAuby1pY29uLWV4cGFuZCcpLnJlbW92ZUNsYXNzKCdvLWljb24tZXhwYW5kLWZhbHNlJyk7XHJcbiAgICAgICAgICAkKCcjby1ncm91cC0nICsgbGF5ZXIuZ2V0KCdncm91cCcpICsnIC5vLWljb24tZXhwYW5kJykuYWRkQ2xhc3MoJ28taWNvbi1leHBhbmQtdHJ1ZScpO1xyXG4gICAgICAgICAgJCgnI28tZ3JvdXAtJyArIGxheWVyLmdldCgnZ3JvdXAnKSkucmVtb3ZlQ2xhc3MoJ28tdWwtZXhwYW5kLWZhbHNlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcuJyArIG5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2tib3gtZmFsc2UnKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vRXZlbnQgbGlzdGVuZXIgZm9yIHRpY2sgbGF5ZXJcclxuICAgICQoJyMnICsgbmFtZSkub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgIGlmICgkKGV2dC50YXJnZXQpLmNsb3Nlc3QoJ2RpdicpLmhhc0NsYXNzKCdvLWljb24tZXhwYW5kJykpIHtcclxuICAgICAgICB0b2dnbGVHcm91cCgkKHRoaXMpKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgICB0b2dnbGVDaGVjaygkKHRoYXQpLmF0dHIoXCJpZFwiKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjby1sZWdlbmQtJyArIG5hbWUpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHRvZ2dsZUNoZWNrKCQodGhhdCkuYXR0cihcImlkXCIpKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAkKCcuby1hYnN0cmFjdCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgJCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgIHNob3dBYnN0cmFjdCgkKHRoYXQpKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG5cclxuICAvL1RvZ2dsZSBtYXAgbGVnZW5kXHJcbiAgJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgdG9nZ2xlT3ZlcmxheSgpO1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVG9nZ2xlQ2hlY2sobGF5ZXJuYW1lKSB7XHJcbiAgLy9FdmVudCBsaXN0ZW5lciBmb3IgdGljayBsYXllclxyXG4gICQoJyMnICsgbGF5ZXJuYW1lKS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuICAgICQodGhpcykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB0b2dnbGVDaGVjaygkKHRoYXQpLmF0dHIoXCJpZFwiKSk7XHJcbiAgICB9KTtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvZmZUb2dnbGVDaGVjayhsYXllcm5hbWUpIHtcclxuICAvL0V2ZW50IGxpc3RlbmVyIGZvciB0aWNrIGxheWVyXHJcbiAgJCgnIycgKyBsYXllcm5hbWUpLm9mZignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuICAgICQodGhpcykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICB0b2dnbGVDaGVjaygkKHRoYXQpLmF0dHIoXCJpZFwiKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxufVxyXG5cclxuLy9FeHBhbmQgYW5kIG1pbmltaXplIGdyb3VwXHJcbmZ1bmN0aW9uIHRvZ2dsZUdyb3VwKGdyb3VwaGVhZGVyKSB7XHJcbiAgdmFyIGdyb3VwID0gZ3JvdXBoZWFkZXIucGFyZW50KCcuby1sZWdlbmQtZ3JvdXAnKTtcclxuICB2YXIgZ3JvdXBpY29uID0gJCgnIycgKyBncm91cC5hdHRyKCdpZCcpICsgJyAuby1pY29uLWV4cGFuZDpmaXJzdCcpO1xyXG5cclxuICBpZiAoZ3JvdXBpY29uLmhhc0NsYXNzKCdvLWljb24tZXhwYW5kLWZhbHNlJykpIHtcclxuICAgIGdyb3VwaWNvbi5yZW1vdmVDbGFzcygnby1pY29uLWV4cGFuZC1mYWxzZScpO1xyXG4gICAgZ3JvdXBpY29uLmFkZENsYXNzKCdvLWljb24tZXhwYW5kLXRydWUnKTtcclxuICAgIGdyb3VwLnJlbW92ZUNsYXNzKCdvLXVsLWV4cGFuZC1mYWxzZScpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBncm91cGljb24ucmVtb3ZlQ2xhc3MoJ28taWNvbi1leHBhbmQtdHJ1ZScpO1xyXG4gICAgZ3JvdXBpY29uLmFkZENsYXNzKCdvLWljb24tZXhwYW5kLWZhbHNlJyk7XHJcbiAgICBncm91cC5hZGRDbGFzcygnby11bC1leHBhbmQtZmFsc2UnKTtcclxuICB9XHJcbn1cclxuXHJcbi8vVG9nZ2xlIHN1Ymdyb3Vwc1xyXG5mdW5jdGlvbiB0b2dnbGVTdWJHcm91cENoZWNrKHN1Ymdyb3VwLCB0b2dnbGVBbGwpIHtcclxuICB2YXIgc3ViR3JvdXAgPSAkKHN1Ymdyb3VwKTtcclxuICB2YXIgc3ViTGF5ZXJzID0gc3ViR3JvdXAuZmluZCgnLm8tbGVnZW5kLWl0ZW0uby1sZWdlbmQtc3ViaXRlbScpO1xyXG4gIHZhciBncm91cExpc3QgPSAkKCcuby1sZWdlbmQtZ3JvdXAnKTtcclxuXHJcbiAgaWYgKHRvZ2dsZUFsbCkge1xyXG5cclxuICAgIHN1YkxheWVycy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICB2YXIgbGF5ZXJuYW1lID0gJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdpZCcpO1xyXG4gICAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJuYW1lKTtcclxuICAgICAgdmFyIGxheWVyaWQgPSAkKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2NsYXNzJyk7XHJcbiAgICAgIHZhciBpbk1hcExlZ2VuZCA9IGxheWVyaWQuc3BsaXQoJ28tbGVnZW5kLScpLmxlbmd0aCA+IDEgPyB0cnVlIDogZmFsc2U7XHJcblxyXG4gICAgICBpZiAoc3ViR3JvdXAuY2hpbGRyZW4oKS5maXJzdCgpLmZpbmQoJy5vLWNoZWNrYm94JykuaGFzQ2xhc3MoJ28tY2hlY2tib3gtdHJ1ZScpKSB7XHJcbiAgICAgICAgJCgnLicgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2tib3gtdHJ1ZScpO1xyXG4gICAgICAgICQoJy4nICsgbGF5ZXJuYW1lICsgJyAuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrYm94LWZhbHNlJyk7XHJcblxyXG4gICAgICAgIGlmIChpbk1hcExlZ2VuZCA9PSBmYWxzZSkge1xyXG4gICAgICAgICAgb2ZmVG9nZ2xlQ2hlY2soJ28tbGVnZW5kLScgKyBsYXllcm5hbWUpO1xyXG4gICAgICAgICAgJCgnI28tbGVnZW5kLScgKyBsYXllcm5hbWUpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgbGF5ZXIuc2V0KCdsZWdlbmQnLCBmYWxzZSk7XHJcbiAgICAgICAgICBjaGVja1RvZ2dsZU92ZXJsYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxheWVyLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICBpZiAoaW5NYXBMZWdlbmQgPT0gZmFsc2UgJiYgJCgnI28tbGVnZW5kLScgKyBsYXllcm5hbWUpLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAkKCcjby1vdmVybGF5LWxpc3QnKS5hcHBlbmQoY3JlYXRlTGVnZW5kSXRlbSgnby1sZWdlbmQtJyArIGxheWVybmFtZSkpO1xyXG4gICAgICAgICAgb25Ub2dnbGVDaGVjaygnby1sZWdlbmQtJyArIGxheWVybmFtZSk7XHJcbiAgICAgICAgICBjaGVja1RvZ2dsZU92ZXJsYXkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoJy4nICsgbGF5ZXJuYW1lICsgJyAuby1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdvLWNoZWNrYm94LWZhbHNlJyk7XHJcbiAgICAgICAgJCgnLicgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2tib3gtdHJ1ZScpO1xyXG4gICAgICAgIGxheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgICAgbGF5ZXIuc2V0KCdsZWdlbmQnLCB0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBncm91cExpc3QuZWFjaChmdW5jdGlvbigpIHtcclxuICAgIHZhciBzdWJMaXN0ID0gJCh0aGlzKS5maW5kKCcuby1sZWdlbmQtaXRlbS5vLWxlZ2VuZC1zdWJpdGVtJykuaGFzKCcuby1jaGVja2JveCcpO1xyXG4gICAgdmFyIHN1Ykxpc3RDaGVja2VkID0gJCh0aGlzKS5maW5kKCcuby1sZWdlbmQtaXRlbS5vLWxlZ2VuZC1zdWJpdGVtJykuaGFzKCcuby1jaGVja2JveC5vLWNoZWNrYm94LXRydWUnKTtcclxuXHJcbiAgICBpZiAoc3ViTGlzdENoZWNrZWQubGVuZ3RoKSB7XHJcbiAgICAgICQodGhpcykuY2hpbGRyZW4oKS5maXJzdCgpLmZpbmQoJy5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2tib3gtZmFsc2UnKTtcclxuICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmZpcnN0KCkuZmluZCgnLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC10cnVlJyk7XHJcblxyXG4gICAgICBpZiAoc3ViTGlzdC5sZW5ndGggIT0gc3ViTGlzdENoZWNrZWQubGVuZ3RoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmZpcnN0KCkuZmluZCgnLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC1zZW1pJyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmZpcnN0KCkuZmluZCgnLm8tY2hlY2tib3gnKS5yZW1vdmVDbGFzcygnby1jaGVja2JveC1zZW1pJyk7XHJcbiAgICAgIH1cclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdvLWNoZWNrYm94LXRydWUnKTtcclxuICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmZpcnN0KCkuZmluZCgnLm8tY2hlY2tib3gnKS5yZW1vdmVDbGFzcygnby1jaGVja2JveC1zZW1pJyk7XHJcbiAgICAgICQodGhpcykuY2hpbGRyZW4oKS5maXJzdCgpLmZpbmQoJy5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2tib3gtZmFsc2UnKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuLy9Ub2dnbGUgbGF5ZXJzXHJcbmZ1bmN0aW9uIHRvZ2dsZUNoZWNrKGxheWVyaWQpIHtcclxuICB2YXIgbGF5ZXJuYW1lID0gbGF5ZXJpZC5zcGxpdCgnby1sZWdlbmQtJykucG9wKCk7XHJcbiAgdmFyIGluTWFwTGVnZW5kID0gbGF5ZXJpZC5zcGxpdCgnby1sZWdlbmQtJykubGVuZ3RoID4gMSA/IHRydWUgOiBmYWxzZTtcclxuICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJuYW1lKTtcclxuXHJcbiAgLy9SYWRpbyB0b2dnbGUgZm9yIGJhY2tncm91bmRcclxuICBpZiAobGF5ZXIuZ2V0KCdncm91cCcpID09ICdiYWNrZ3JvdW5kJykge1xyXG4gICAgdmFyIGdyb3VwcyA9IHZpZXdlci5nZXRHcm91cCgnYmFja2dyb3VuZCcpO1xyXG5cclxuICAgIGdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uKGdyb3VwKSB7XHJcbiAgICAgIGdyb3VwLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAkKCcjJyArIGdyb3VwLmdldCgnbmFtZScpICsgJyAuby1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdvLWNoZWNrLXRydWUnKTtcclxuICAgICAgJCgnIycgKyBncm91cC5nZXQoJ25hbWUnKSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVjay1mYWxzZScpO1xyXG4gICAgICAvL21hcCBsZWdlbmRcclxuICAgICAgJCgnI28tbGVnZW5kLScgKyBncm91cC5nZXQoJ25hbWUnKSkucmVtb3ZlQ2xhc3MoJ28tY2hlY2stdHJ1ZS1pbWcnKTtcclxuICAgICAgJCgnI28tbGVnZW5kLScgKyBncm91cC5nZXQoJ25hbWUnKSkuYWRkQ2xhc3MoJ28tY2hlY2stZmFsc2UtaW1nJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsYXllci5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgJCgnIycgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2stZmFsc2UnKTtcclxuICAgICQoJyMnICsgbGF5ZXJuYW1lICsgJyAuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrLXRydWUnKTtcclxuICAgIC8vbWFwIGxlZ2VuZFxyXG4gICAgJCgnI28tbGVnZW5kLScgKyBsYXllcm5hbWUpLnJlbW92ZUNsYXNzKCdvLWNoZWNrLWZhbHNlLWltZycpO1xyXG4gICAgJCgnI28tbGVnZW5kLScgKyBsYXllcm5hbWUpLmFkZENsYXNzKCdvLWNoZWNrLXRydWUtaW1nJyk7XHJcbiAgfSBlbHNlIHsgLy9Ub2dnbGUgY2hlY2sgZm9yIGFsbCBncm91cHMgZXhjZXB0IGJhY2tncm91bmRcclxuXHJcbiAgICBpZiAoJCgnLicgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykuaGFzQ2xhc3MoJ28tY2hlY2tib3gtdHJ1ZScpKSB7XHJcbiAgICAgICQoJy4nICsgbGF5ZXJuYW1lICsgJyAuby1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdvLWNoZWNrYm94LXRydWUnKTtcclxuICAgICAgJCgnLicgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2tib3gtZmFsc2UnKTtcclxuXHJcbiAgICAgIGlmIChpbk1hcExlZ2VuZCA9PSBmYWxzZSkge1xyXG4gICAgICAgIG9mZlRvZ2dsZUNoZWNrKCdvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKTtcclxuICAgICAgICAkKCcjby1sZWdlbmQtJyArIGxheWVybmFtZSkucmVtb3ZlKCk7XHJcbiAgICAgICAgbGF5ZXIuc2V0KCdsZWdlbmQnLCBmYWxzZSk7XHJcbiAgICAgICAgY2hlY2tUb2dnbGVPdmVybGF5KCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGxheWVyLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgIGlmIChpbk1hcExlZ2VuZCA9PSBmYWxzZSAmJiAkKCcjby1sZWdlbmQtJyArIGxheWVybmFtZSkubGVuZ3RoID09IDApIHtcclxuICAgICAgICAkKCcjby1vdmVybGF5LWxpc3QnKS5hcHBlbmQoY3JlYXRlTGVnZW5kSXRlbSgnby1sZWdlbmQtJyArIGxheWVybmFtZSkpO1xyXG4gICAgICAgIG9uVG9nZ2xlQ2hlY2soJ28tbGVnZW5kLScgKyBsYXllcm5hbWUpO1xyXG4gICAgICAgIGNoZWNrVG9nZ2xlT3ZlcmxheSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5yZW1vdmVDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG4gICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC10cnVlJyk7XHJcbiAgICAgIGxheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgIGxheWVyLnNldCgnbGVnZW5kJywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCQoJyMnICsgbGF5ZXJuYW1lKS5maW5kKCcuby1sZWdlbmQtc3ViaXRlbScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgdG9nZ2xlU3ViR3JvdXBDaGVjaygkKCcjJyArIGxheWVybmFtZSkucGFyZW50cygndWwnKS5oYXMoJy5vLWxlZ2VuZC1oZWFkZXInKS5maXJzdCgpLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1RvZ2dsZU92ZXJsYXkoKSB7XHJcbiAgaWYoJCgnI28tb3ZlcmxheS1saXN0IGxpJykubGVuZ3RoID4gMSAmJiAkKCcjby1sZWdlbmQtb3ZlcmxheSA+bGk6Zmlyc3QtY2hpbGQnKS5oYXNDbGFzcygnby1oaWRkZW4nKSkge1xyXG4gICAgJCgnI28tbGVnZW5kLW92ZXJsYXkgPiBsaTpmaXJzdC1jaGlsZCcpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG4gIH0gZWxzZSBpZigkKCcjby1vdmVybGF5LWxpc3QgbGknKS5sZW5ndGggPCAyKSB7XHJcbiAgICAkKCcjby1sZWdlbmQtb3ZlcmxheSA+IGxpOmZpcnN0LWNoaWxkJykuYWRkQ2xhc3MoJ28taGlkZGVuJyk7XHJcblxyXG4gICAgaWYoJCgnI28tb3ZlcmxheS1saXN0JykubGVuZ3RoID09IDEgJiYgJCgnI28tb3ZlcmxheS1saXN0JykuaGFzQ2xhc3MoJ28taGlkZGVuJykpIHtcclxuICAgICAgJCgnI28tb3ZlcmxheS1saXN0JykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICAgIHRvZ2dsZU92ZXJsYXkoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZU92ZXJsYXkoKSB7XHJcbiAgaWYoJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLmhhc0NsYXNzKCdvLXRvZ2dsZS1idXR0b24tbWF4JykpIHtcclxuICAgICQoJyNvLWxlZ2VuZC1vdmVybGF5IC5vLXRvZ2dsZS1idXR0b24nKS5yZW1vdmVDbGFzcygnby10b2dnbGUtYnV0dG9uLW1heCcpO1xyXG4gICAgJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLmFkZENsYXNzKCdvLXRvZ2dsZS1idXR0b24tbWluJyk7XHJcbiAgICAkKCcjby1vdmVybGF5LWxpc3QnKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdvLXRvZ2dsZS1idXR0b24tbWluJyk7XHJcbiAgICAkKCcjby1sZWdlbmQtb3ZlcmxheSAuby10b2dnbGUtYnV0dG9uJykuYWRkQ2xhc3MoJ28tdG9nZ2xlLWJ1dHRvbi1tYXgnKTtcclxuICAgICQoJyNvLW92ZXJsYXktbGlzdCcpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG4gIH1cclxufVxyXG5cclxuLy9TZXQgY29udGVudCBmb3IgaW5mbyBidXR0b24gcG9wdXBcclxuZnVuY3Rpb24gc2hvd0Fic3RyYWN0KCRhYnN0cmFjdEJ1dHRvbikge1xyXG4gIHZhciBsYXllcjtcclxuICB2YXIgJGl0ZW0gPSAkYWJzdHJhY3RCdXR0b24uY2xvc2VzdCgnbGknKTtcclxuICB2YXIgbGF5ZXJuYW1lID0gJGFic3RyYWN0QnV0dG9uLmF0dHIoJ2lkJykuc3BsaXQoJ28tbGVnZW5kLWl0ZW0taW5mby0nKS5wb3AoKTtcclxuICB2YXIgYWJzdHJhY3QgPSB7XHJcbiAgICB0aXRsZTogJycsXHJcbiAgICBjb250ZW50OiAnJ1xyXG4gIH07XHJcblxyXG4gIC8vSWYgaW5mbyBidXR0b24gaXMgY29ubmVjdGVkIGdyb3VwXHJcbiAgaWYgKCRpdGVtLmhhc0NsYXNzKCdvLWxlZ2VuZC1oZWFkZXInKSkge1xyXG4gICAgdmFyIGdyb3VwcyA9IHZpZXdlci5nZXRHcm91cHMoKTtcclxuXHJcbiAgICB2YXIgZ3JvdXAgPSAkLmdyZXAoZ3JvdXBzLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgcmV0dXJuIChvYmoubmFtZSA9PSBsYXllcm5hbWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYWJzdHJhY3QudGl0bGUgPSBncm91cFswXS50aXRsZTtcclxuICAgIGFic3RyYWN0LmNvbnRlbnQgPSBncm91cFswXS5hYnN0cmFjdFxyXG4gIH0gZWxzZSB7IC8vIElmIGluZm8gYnV0dG9uIGlzIGNvbm5lY3RlZCB0byBsYXllclxyXG4gICAgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJuYW1lKTtcclxuICAgIGFic3RyYWN0LnRpdGxlID0gbGF5ZXIuZ2V0KCd0aXRsZScpO1xyXG4gICAgYWJzdHJhY3QuY29udGVudCA9IGxheWVyLmdldCgnYWJzdHJhY3QnKTtcclxuICB9XHJcblxyXG4gIG1vZGFsLmNyZWF0ZU1vZGFsKCcjby1tYXAnLCB7dGl0bGU6IGFic3RyYWN0LnRpdGxlLCBjb250ZW50OiBhYnN0cmFjdC5jb250ZW50fSk7XHJcbiAgbW9kYWwuc2hvd01vZGFsKCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBpbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbnZhciB1cmw7XHJcbnZhciB0aXRsZTtcclxudmFyICRsaW5rQnV0dG9uO1xyXG5cclxuZnVuY3Rpb24gaW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdXJsID0gb3B0aW9ucy51cmw7XHJcbiAgdGl0bGUgPSBvcHRpb25zLnRpdGxlO1xyXG5cclxuICByZW5kZXIoKTtcclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICB2YXIgZWwgPSB1dGlscy5jcmVhdGVMaXN0QnV0dG9uKHtcclxuICAgIGlkOiAnby1saW5rJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tZmEtZXh0ZXJuYWwtbGluaycsXHJcbiAgICBzcmM6ICcjZmEtZXh0ZXJuYWwtbGluaycsXHJcbiAgICB0ZXh0OiB0aXRsZVxyXG5cclxuICB9KTtcclxuICAkKCcjby1tZW51dG9vbHMnKS5hcHBlbmQoZWwpO1xyXG4gICRsaW5rQnV0dG9uID0gJCgnI28tbGluay1idXR0b24nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkbGlua0J1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgIHdpbmRvdy5vcGVuKHVybCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBpbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHN1cHBvcnRzID0gcmVxdWlyZSgnLi91dGlscy9zdXBwb3J0cycpO1xyXG52YXIgcGVybWFsaW5rID0gcmVxdWlyZSgnLi9wZXJtYWxpbmsvcGVybWFsaW5rJyk7XHJcbnZhciBnZXRVcmwgPSByZXF1aXJlKCcuL3V0aWxzL2dldHVybCcpO1xyXG52YXIgaXNVcmwgPSByZXF1aXJlKCcuL3V0aWxzL2lzdXJsJyk7XHJcbnZhciB0cmltVXJsID0gcmVxdWlyZSgnLi91dGlscy90cmltdXJsJyk7XHJcblxyXG52YXIgbWFwTG9hZGVyID0gZnVuY3Rpb24obWFwT3B0aW9ucywgY29uZmlnKSB7XHJcblxyXG4gIHZhciBtYXAgPSB7fTtcclxuICB2YXIgbWFwRWwgPSBjb25maWcudGFyZ2V0O1xyXG4gIHZhciBmb3JtYXQgPSAnanNvbic7XHJcbiAgdmFyIGNvcnMgPSBjb25maWcuY3Jvc3NPcmlnaW47XHJcblxyXG4gIHZhciB1cmxQYXJhbXMgPSB1bmRlZmluZWQ7XHJcblxyXG4gIGlmIChtYXBFbC5zdWJzdHJpbmcoMCwgMSkgIT09ICcjJykge1xyXG4gICAgbWFwRWwgPSAnIycgKyBtYXBFbDtcclxuICB9XHJcbiAgbWFwLmVsID0gbWFwRWw7XHJcblxyXG4gIC8vIENoZWNrIGJyb3dzZXIgc3VwcG9ydFxyXG4gIGlmIChzdXBwb3J0cygnYnJvd3NlcicsIG1hcEVsKSA9PT0gZmFsc2UpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiBhdXRob3JpemF0aW9uIGlzIHJlcXVpcmVkIGJlZm9yZSBtYXAgb3B0aW9ucyBpcyBsb2FkZWRcclxuICBpZiAoY29uZmlnLmF1dGhvcml6YXRpb25VcmwpIHtcclxuICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogY29uZmlnLmF1dGhvcml6YXRpb25VcmxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBsb2FkTWFwT3B0aW9ucygpO1xyXG4gICAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGxvYWRNYXBPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBsb2FkTWFwT3B0aW9ucygpIHtcclxuICAgIGlmICh0eXBlb2YobWFwT3B0aW9ucykgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCkge1xyXG4gICAgICAgIHVybFBhcmFtcyA9IHBlcm1hbGluay5wYXJzZVBlcm1hbGluayh3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGJhc2VVcmwgPSBjb25maWcuYmFzZVVybCB8fCAnJztcclxuICAgICAgbWFwLm9wdGlvbnMgPSAkLmV4dGVuZChjb25maWcsIG1hcE9wdGlvbnMpO1xyXG4gICAgICBpZiAobWFwT3B0aW9ucy5jb250cm9scykge1xyXG4gICAgICAgIG1hcC5vcHRpb25zLmNvbnRyb2xzID0gY29uZmlnLmRlZmF1bHRDb250cm9scy5jb25jYXQobWFwT3B0aW9ucy5jb250cm9scyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbWFwLm9wdGlvbnMuY29udHJvbHMgPSBjb25maWcuZGVmYXVsdENvbnRyb2xzO1xyXG4gICAgICB9XHJcbiAgICAgIG1hcC5vcHRpb25zLnVybCA9IGdldFVybCgpO1xyXG4gICAgICBtYXAub3B0aW9ucy5tYXAgPSB1bmRlZmluZWQ7XHJcbiAgICAgIG1hcC5vcHRpb25zLnBhcmFtcyA9IHVybFBhcmFtcztcclxuICAgICAgbWFwLm9wdGlvbnMuYmFzZVVybCA9IGJhc2VVcmw7XHJcblxyXG4gICAgICByZXR1cm4gJC53aGVuLmFwcGx5KCQsIGxvYWRTdmdTcHJpdGVzKGJhc2VVcmwsIGNvbmZpZykpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc3ByaXRlcykge1xyXG4gICAgICAgICAgcmV0dXJuIG1hcDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZihtYXBPcHRpb25zKSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgaWYgKGlzVXJsKG1hcE9wdGlvbnMpKSB7XHJcbiAgICAgICAgdXJsUGFyYW1zID0gcGVybWFsaW5rLnBhcnNlUGVybWFsaW5rKG1hcE9wdGlvbnMpO1xyXG4gICAgICAgIHZhciB1cmwgPSBtYXBPcHRpb25zLnNwbGl0KCcjJylbMF07XHJcblxyXG4gICAgICAgIC8vcmVtb3YgZmlsZSBuYW1lIGlmIGluY2x1ZGVkIGluXHJcbiAgICAgICAgdXJsID0gdHJpbVVybCh1cmwpO1xyXG5cclxuICAgICAgICB2YXIgYmFzZVVybCA9IGNvbmZpZy5iYXNlVXJsIHx8IHVybDtcclxuICAgICAgICB2YXIganNvbiA9IHVybFBhcmFtcy5tYXAgKyAnLmpzb24nO1xyXG4gICAgICAgIHZhciBtYXBVcmwgPSB1cmw7XHJcbiAgICAgICAgdXJsICs9IGpzb247XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoKSB7XHJcbiAgICAgICAgICB1cmxQYXJhbXMgPSBwZXJtYWxpbmsucGFyc2VQZXJtYWxpbmsod2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmFzZVVybCA9IGNvbmZpZy5iYXNlVXJsIHx8ICcnO1xyXG4gICAgICAgIHZhciBqc29uID0gbWFwT3B0aW9ucztcclxuICAgICAgICB2YXIgdXJsID0gYmFzZVVybCArIGpzb247XHJcbiAgICAgICAgdmFyIG1hcFVybCA9IGdldFVybCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gJC53aGVuLmFwcGx5KCQsIGxvYWRTdmdTcHJpdGVzKGJhc2VVcmwsIGNvbmZpZykpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc3ByaXRlcykge1xyXG4gICAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgZGF0YVR5cGU6IGZvcm1hdFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgbWFwLm9wdGlvbnMgPSAkLmV4dGVuZChjb25maWcsIGRhdGEpO1xyXG4gICAgICAgICAgICAgIGlmIChkYXRhLmNvbnRyb2xzKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAub3B0aW9ucy5jb250cm9scyA9IGNvbmZpZy5kZWZhdWx0Q29udHJvbHMuY29uY2F0KGRhdGEuY29udHJvbHMpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXAub3B0aW9ucy5jb250cm9scyA9IGNvbmZpZy5kZWZhdWx0Q29udHJvbHM7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIG1hcC5vcHRpb25zLnVybCA9IG1hcFVybDtcclxuICAgICAgICAgICAgICBtYXAub3B0aW9ucy5tYXAgPSBqc29uO1xyXG4gICAgICAgICAgICAgIG1hcC5vcHRpb25zLnBhcmFtcyA9IHVybFBhcmFtcztcclxuICAgICAgICAgICAgICBtYXAub3B0aW9ucy5iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICAgICAgICByZXR1cm4gbWFwO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRTdmdTcHJpdGVzKGJhc2VVcmwsIGNvbmZpZykge1xyXG4gIHZhciBzdmdTcHJpdGVzID0gY29uZmlnLnN2Z1Nwcml0ZXM7XHJcbiAgdmFyIHN2Z1BhdGggPSBjb25maWcuc3ZnU3ByaXRlUGF0aDtcclxuICB2YXIgc3ZnUHJvbWlzZXMgPSBbXTtcclxuICBzdmdTcHJpdGVzLmZvckVhY2goZnVuY3Rpb24oc3ByaXRlKSB7XHJcbiAgICB2YXIgcHJvbWlzZSA9ICQuZ2V0KGJhc2VVcmwgKyBzdmdQYXRoICsgc3ByaXRlLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoZGF0YS5kb2N1bWVudEVsZW1lbnQpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGRpdiwgZG9jdW1lbnQuYm9keS5jaGlsZE5vZGVzWzBdKTtcclxuICAgICAgfSk7XHJcbiAgICBzdmdQcm9taXNlcy5wdXNoKHByb21pc2UpO1xyXG4gICAgcmV0dXJuIHN2Z1Byb21pc2VzO1xyXG4gIH0pO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1hcExvYWRlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxudmFyICRtZW51QnV0dG9uLCAkY2xvc2VCdXR0b24sICRtYXBNZW51O1xyXG5cclxudmFyIHN5bWJvbFNpemUgPSAyMDtcclxudmFyIHN0eWxlU2V0dGluZ3M7XHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gICAgc3R5bGVTZXR0aW5ncyA9IHZpZXdlci5nZXRTdHlsZVNldHRpbmdzKCk7XHJcbiAgICB2YXIgZWwgPSB1dGlscy5jcmVhdGVCdXR0b24oe1xyXG4gICAgICAgIHRleHQ6ICdNZW55JyxcclxuICAgICAgICBpZDogJ28tbWFwbWVudS1idXR0b24nLFxyXG4gICAgICAgIGNsczogJ28tbWFwbWVudS1idXR0b24tdHJ1ZScsXHJcbiAgICAgICAgaWNvbkNsczogJ28taWNvbi1mYS1iYXJzJyxcclxuICAgICAgICBzcmM6ICcjZmEtYmFycycsXHJcbiAgICAgICAgdG9vbHRpcFRleHQ6ICdNZW55JyxcclxuICAgICAgICB0b29sdGlwUGxhY2VtZW50OiAnd2VzdCdcclxuICAgIH0pO1xyXG4gICAgJCgnI28tbWFwJykuYXBwZW5kKGVsKTtcclxuICAgICRtZW51QnV0dG9uID0gJCgnI28tbWFwbWVudS1idXR0b24gYnV0dG9uJyk7XHJcblxyXG4gICAgdmFyIG1lbnVFbCA9ICc8ZGl2IGlkPVwiby1tYXBtZW51XCIgY2xhc3M9XCJvLW1hcG1lbnVcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8tYmxvY2tcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICc8dWwgaWQ9XCJvLW1lbnV0b29sc1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGxpPjwvbGk+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPC91bD4nXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICQoJyNvLW1hcCcpLmFwcGVuZChtZW51RWwpO1xyXG4gICAgJG1hcE1lbnUgPSAkKCcjby1tYXBtZW51Jyk7XHJcblxyXG4gICAgdmFyIGNsb3NlQnV0dG9uID0gdXRpbHMuY3JlYXRlQnV0dG9uKHtcclxuICAgICAgICBpZDogJ28tbWFwbWVudS1idXR0b24tY2xvc2UnLFxyXG4gICAgICAgIGNsczogJ28tbm8tYm94c2hhZG93JyxcclxuICAgICAgICBpY29uQ2xzOiAnby1pY29uLW1lbnUtZmEtdGltZXMnLFxyXG4gICAgICAgIHNyYzogJyNmYS10aW1lcycsXHJcbiAgICAgICAgdG9vbHRpcFRleHQ6ICdTdMOkbmcgbWVueScsXHJcbiAgICAgICAgdG9vbHRpcFBsYWNlbWVudDogJ3dlc3QnXHJcbiAgICB9KTtcclxuICAgICQoJyNvLW1lbnV0b29scycpLmFwcGVuZChjbG9zZUJ1dHRvbik7XHJcbiAgICAkY2xvc2VCdXR0b24gPSAkKCcjby1tYXBtZW51LWJ1dHRvbi1jbG9zZScpO1xyXG5cclxuICAgIGJpbmRVSUFjdGlvbnMoKTtcclxufVxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICAgJG1lbnVCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICBcdHRvZ2dsZU1lbnUoKTtcclxuICAgICAgICAkbWVudUJ1dHRvbi5ibHVyKCk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICAkY2xvc2VCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICBcdHRvZ2dsZU1lbnUoKTtcclxuICAgICAgICAkY2xvc2VCdXR0b24uYmx1cigpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7XHJcbiAgICBpZigkbWFwTWVudS5oYXNDbGFzcygnby1tYXBtZW51LXNob3cnKSl7XHJcbiAgICAgICRtYXBNZW51LnJlbW92ZUNsYXNzKCdvLW1hcG1lbnUtc2hvdycpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICRtYXBNZW51LmFkZENsYXNzKCdvLW1hcG1lbnUtc2hvdycpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFRhcmdldCgpIHtcclxuICAgIHJldHVybiAkbWFwTWVudTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbm1vZHVsZS5leHBvcnRzLnRvZ2dsZU1lbnUgPSB0b2dnbGVNZW51O1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRUYXJnZXQgPSBnZXRUYXJnZXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGN1c3RvbVByb2plY3Rpb246IGZ1bmN0aW9uKHByb2plY3Rpb25Db2RlLCBleHRlbnQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBvbC5wcm9qLlByb2plY3Rpb24oe1xyXG4gICAgICAgICAgY29kZTogcHJvamVjdGlvbkNvZGUsXHJcbiAgICAgICAgICBleHRlbnQ6IGV4dGVudFxyXG4gICAgICB9KTtcclxuICB9LFxyXG4gIHRpbGVHcmlkOiBmdW5jdGlvbihleHRlbnQsIHJlc29sdXRpb25zKSB7XHJcbiAgICAgIHZhciBvcmlnaW4gPSBvbC5leHRlbnQuZ2V0VG9wTGVmdChleHRlbnQpO1xyXG4gICAgICByZXR1cm4gbmV3IG9sLnRpbGVncmlkLlRpbGVHcmlkKHtcclxuICAgICAgICAgIGV4dGVudDogZXh0ZW50LFxyXG4gICAgICAgICAgb3JpZ2luOiBvcmlnaW4sXHJcbiAgICAgICAgICByZXNvbHV0aW9uczogcmVzb2x1dGlvbnNcclxuICAgICAgfSk7XHJcbiAgfSxcclxuICBjaGVja1pvb21DaGFuZ2U6IGZ1bmN0aW9uIGNoZWNrWm9vbUNoYW5nZShyZXNvbHV0aW9uLCBjdXJyZW50UmVzb2x1dGlvbikge1xyXG4gICAgICBpZihyZXNvbHV0aW9uICE9PSBjdXJyZW50UmVzb2x1dGlvbikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gIH0sXHJcbiAgY3JlYXRlUG9pbnRGZWF0dXJlOiBmdW5jdGlvbiBjcmVhdGVQb2ludEZlYXR1cmUoY29vcmRpbmF0ZSwgc3R5bGUpIHtcclxuICAgICAgdmFyIGZlYXR1cmUgPSBuZXcgb2wuRmVhdHVyZSh7XHJcbiAgICAgICAgICBnZW9tZXRyeTogbmV3IG9sLmdlb20uUG9pbnQoY29vcmRpbmF0ZSlcclxuICAgICAgfSk7XHJcbiAgICAgIGZlYXR1cmUuc2V0U3R5bGUoc3R5bGUpO1xyXG4gICAgICByZXR1cm4gZmVhdHVyZTtcclxuICB9LFxyXG4gIGdlb2pzb25Ub0ZlYXR1cmU6IGZ1bmN0aW9uIGdlb2pzb25Ub0ZlYXR1cmUob2JqKSB7XHJcbiAgICAgIHZhciB2ZWN0b3JTb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgICAgZmVhdHVyZXM6IChuZXcgb2wuZm9ybWF0Lkdlb0pTT04oKSkucmVhZEZlYXR1cmVzKG9iailcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3JTb3VyY2UuZ2V0RmVhdHVyZXMoKVswXTtcclxuICB9LFxyXG4gIHdrdFRvRmVhdHVyZTogZnVuY3Rpb24gd2t0VG9GZWF0dXJlKHdrdCwgc3JzTmFtZSkge1xyXG4gICAgICB2YXIgZm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5XS1QoKTtcclxuICAgICAgdmFyIGZlYXR1cmUgPSBmb3JtYXQucmVhZEZlYXR1cmUod2t0LCB7XHJcbiAgICAgICAgZGF0YVByb2plY3Rpb246IHNyc05hbWUsXHJcbiAgICAgICAgZmVhdHVyZVByb2plY3Rpb246IHNyc05hbWVcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmZWF0dXJlO1xyXG4gIH0sXHJcbiAgem9vbVRvRXhlbnQ6IGZ1bmN0aW9uIHpvb21Ub0V4ZW50KGdlb21ldHJ5LCBsZXZlbCkge1xyXG4gICAgICB2YXIgbWFwID0gdmlld2VyLmdldE1hcCgpO1xyXG4gICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XHJcbiAgICAgIHZhciBtYXhab29tID0gbGV2ZWw7XHJcbiAgICAgIHZhciBleHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcclxuICAgICAgaWYoZXh0ZW50KSB7XHJcbiAgICAgICAgICB2aWV3LmZpdChleHRlbnQsIHttYXhab29tOiBtYXhab29tfSk7XHJcbiAgICAgICAgICByZXR1cm4gZXh0ZW50O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICB9LFxyXG4gIGdldENlbnRlcjogZnVuY3Rpb24gZ2V0Q2VudGVyKGdlb21ldHJ5KSB7XHJcbiAgICAgIHZhciB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xyXG4gICAgICB2YXIgY2VudGVyO1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgIGNhc2UgXCJQb2x5Z29uXCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0SW50ZXJpb3JQb2ludCgpLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiTXVsdGlQb2x5Z29uXCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0SW50ZXJpb3JQb2ludHMoKVswXS5nZXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBcIlBvaW50XCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJNdWx0aVBvaW50XCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnlbMF0uZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJMaW5lU3RyaW5nXCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZUF0KDAuNSk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiTXVsdGlMaW5lU3RyaW5nXCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0TGluZVN0cmluZ3MoKVswXS5nZXRDb29yZGluYXRlQXQoMC41KTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJDaXJjbGVcIjpcclxuICAgICAgICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeS5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gY2VudGVyO1xyXG4gIH0sXHJcbiAgc2NhbGVUb1Jlc29sdXRpb246IGZ1bmN0aW9uIHNjYWxlVG9SZXNvbHV0aW9uKHNjYWxlLCBwcm9qZWN0aW9uKSB7XHJcbiAgICB2YXIgZHBpID0gMjUuNCAvIDAuMjg7XHJcbiAgICB2YXIgbXB1ID0gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XHJcbiAgICB2YXIgcmVzb2x1dGlvbiA9IHNjYWxlIC8gKG1wdSAqIDM5LjM3ICogZHBpKTtcclxuICAgIHJldHVybiByZXNvbHV0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIHN0eWxlID0gcmVxdWlyZSgnLi9zdHlsZScpKCk7XHJcbnZhciBzdHlsZVR5cGVzID0gcmVxdWlyZSgnLi9zdHlsZS9zdHlsZXR5cGVzJyk7XHJcblxyXG52YXIgbWFwO1xyXG52YXIgYWN0aXZlQnV0dG9uO1xyXG52YXIgZGVmYXVsdEJ1dHRvbjtcclxudmFyIG1lYXN1cmU7XHJcbnZhciB0eXBlO1xyXG52YXIgc2tldGNoO1xyXG52YXIgbWVhc3VyZVRvb2x0aXA7XHJcbnZhciBtZWFzdXJlVG9vbHRpcEVsZW1lbnQ7XHJcbnZhciBtZWFzdXJlU3R5bGVPcHRpb25zO1xyXG52YXIgaGVscFRvb2x0aXA7XHJcbnZhciBoZWxwVG9vbHRpcEVsZW1lbnQ7XHJcbnZhciB2ZWN0b3I7XHJcbnZhciBzb3VyY2U7XHJcbnZhciBsYWJlbDtcclxudmFyIG92ZXJsYXlBcnJheSA9IFtdO1xyXG52YXIgZHJhd1N0YXJ0ID0gZmFsc2U7XHJcbnZhciBpc0FjdGl2ZSA9IGZhbHNlO1xyXG52YXIgd2dzODRTcGhlcmUgPSBuZXcgb2wuU3BoZXJlKDYzNzgxMzcpO1xyXG5cclxuZnVuY3Rpb24gaW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8ICcjby10b29sYmFyLW1hcHRvb2xzJztcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcbiAgc291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3IoKTtcclxuICBtZWFzdXJlU3R5bGVPcHRpb25zID0gc3R5bGVUeXBlcy5nZXRTdHlsZSgnbWVhc3VyZScpO1xyXG5cclxuICAvL0RyYXduIGZlYXR1cmVzXHJcbiAgdmVjdG9yID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XHJcbiAgICBzb3VyY2U6IHNvdXJjZSxcclxuICAgIG5hbWU6ICdtZWFzdXJlJyxcclxuICAgIHZpc2libGU6IGZhbHNlLFxyXG4gICAgekluZGV4OiA2XHJcbiAgfSk7XHJcblxyXG4gIG1hcC5hZGRMYXllcih2ZWN0b3IpO1xyXG5cclxuICAkKCcuby1tYXAnKS5vbignZW5hYmxlSW50ZXJhY3Rpb24nLCBvbkVuYWJsZUludGVyYWN0aW9uKTtcclxuXHJcbiAgcmVuZGVyKHRhcmdldCk7XHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG5cclxuICBkZWZhdWx0QnV0dG9uID0gJCgnI28tbWVhc3VyZS1saW5lLWJ1dHRvbiBidXR0b24nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25FbmFibGVJbnRlcmFjdGlvbihlKSB7XHJcbiAgaWYoZS5pbnRlcmFjdGlvbiA9PT0gJ21lYXN1cmUnKSB7XHJcbiAgICAkKCcjby1tZWFzdXJlLWJ1dHRvbiBidXR0b24nKS5hZGRDbGFzcygnby1tZWFzdXJlLWJ1dHRvbi10cnVlJyk7XHJcbiAgICAkKCcjby1tZWFzdXJlLWxpbmUtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICAkKCcjby1tZWFzdXJlLXBvbHlnb24tYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICAkKCcjby1tZWFzdXJlLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCd0b29sdGlwJyk7XHJcbiAgICBzZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICBkZWZhdWx0QnV0dG9uLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGlmIChhY3RpdmVCdXR0b24pIHtcclxuICAgICAgYWN0aXZlQnV0dG9uLnJlbW92ZUNsYXNzKCdvLW1lYXN1cmUtYnV0dG9uLXRydWUnKTtcclxuICAgIH07XHJcblxyXG4gICAgJCgnI28tbWVhc3VyZS1idXR0b24gYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ28tbWVhc3VyZS1idXR0b24tdHJ1ZScpO1xyXG4gICAgJCgnI28tbWVhc3VyZS1saW5lLWJ1dHRvbicpLmFkZENsYXNzKCdvLWhpZGRlbicpO1xyXG4gICAgJCgnI28tbWVhc3VyZS1wb2x5Z29uLWJ1dHRvbicpLmFkZENsYXNzKCdvLWhpZGRlbicpO1xyXG4gICAgJCgnI28tbWVhc3VyZS1idXR0b24nKS5hZGRDbGFzcygndG9vbHRpcCcpO1xyXG5cclxuICAgIG1hcC51bigncG9pbnRlcm1vdmUnLCBwb2ludGVyTW92ZUhhbmRsZXIpO1xyXG4gICAgbWFwLnVuKCdjbGljaycsIHBvaW50ZXJNb3ZlSGFuZGxlcik7XHJcbiAgICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24obWVhc3VyZSk7XHJcbiAgICB2ZWN0b3Iuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBWaWV3ZXIucmVtb3ZlT3ZlcmxheXMob3ZlcmxheUFycmF5KTtcclxuICAgIHZlY3Rvci5nZXRTb3VyY2UoKS5jbGVhcigpO1xyXG4gICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUpIHtcclxuICBpZihzdGF0ZSA9PT0gdHJ1ZSkge1xyXG4gICAgaXNBY3RpdmUgPSB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpc0FjdGl2ZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcih0YXJnZXQpIHtcclxuXHJcbiAgdmFyIHRvb2xiYXIgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCAnJywge1xyXG4gICAgaWQ6ICdvLW1lYXN1cmUtdG9vbGJhcicsXHJcbiAgICBjbHM6ICdvLXRvb2xiYXItaG9yaXpvbnRhbCdcclxuICB9KTtcclxuXHJcbiAgJCh0YXJnZXQpLmFwcGVuZCh0b29sYmFyKTtcclxuXHJcbiAgdmFyIG1iID0gdXRpbHMuY3JlYXRlQnV0dG9uKHtcclxuICAgIGlkOiAnby1tZWFzdXJlLWJ1dHRvbicsXHJcbiAgICBjbHM6ICdvLW1lYXN1cmUtYnV0dG9uJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tc3RlYWR5LW1lYXN1cmUnLFxyXG4gICAgc3JjOiAnI3N0ZWFkeS1tZWFzdXJlJyxcclxuICAgIHRvb2x0aXBUZXh0OiAnTcOkdCBpIGthcnRhbidcclxuICB9KTtcclxuICAkKCcjJyArICdvLW1lYXN1cmUtdG9vbGJhcicpLmFwcGVuZChtYik7XHJcblxyXG4gIHZhciBsYiA9IHV0aWxzLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICBpZDogJ28tbWVhc3VyZS1saW5lLWJ1dHRvbicsXHJcbiAgICBjbHM6ICdvLW1lYXN1cmUtdHlwZS1idXR0b24nLFxyXG4gICAgaWNvbkNsczogJ28taWNvbi1taW5pY29ucy1saW5lLXZlY3RvcicsXHJcbiAgICBzcmM6ICcjbWluaWNvbnMtbGluZS12ZWN0b3InLFxyXG4gICAgdG9vbHRpcFRleHQ6ICdMaW5qZScsXHJcbiAgICB0b29sdGlwUGxhY2VtZW50OiAnbm9ydGgnXHJcbiAgfSk7XHJcbiAgJCgnIycgKyAnby1tZWFzdXJlLXRvb2xiYXInKS5hcHBlbmQobGIpO1xyXG5cclxuICAkKCcjby1tZWFzdXJlLWxpbmUtYnV0dG9uJykuYWRkQ2xhc3MoJ28taGlkZGVuJyk7XHJcblxyXG4gIHZhciBwYiA9IHV0aWxzLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICBpZDogJ28tbWVhc3VyZS1wb2x5Z29uLWJ1dHRvbicsXHJcbiAgICBjbHM6ICdvLW1lYXN1cmUtdHlwZS1idXR0b24nLFxyXG4gICAgaWNvbkNsczogJ28taWNvbi1taW5pY29ucy1zcXVhcmUtdmVjdG9yJyxcclxuICAgIHNyYzogJyNtaW5pY29ucy1zcXVhcmUtdmVjdG9yJyxcclxuICAgIHRvb2x0aXBUZXh0OiAnWXRhJyxcclxuICAgIHRvb2x0aXBQbGFjZW1lbnQ6ICdub3J0aCdcclxuICB9KTtcclxuXHJcbiAgJCgnIycgKyAnby1tZWFzdXJlLXRvb2xiYXInKS5hcHBlbmQocGIpO1xyXG4gICQoJyNvLW1lYXN1cmUtcG9seWdvbi1idXR0b24nKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkKCcjby1tZWFzdXJlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIHRvZ2dsZU1lYXN1cmUoKTtcclxuICAgICQoJyNvLW1lYXN1cmUtYnV0dG9uIGJ1dHRvbicpLmJsdXIoKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxuXHJcbiAgJCgnI28tbWVhc3VyZS1saW5lLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIHR5cGUgPSAnTGluZVN0cmluZyc7XHJcbiAgICB0b2dnbGVUeXBlKCQoJyNvLW1lYXN1cmUtbGluZS1idXR0b24gYnV0dG9uJykpO1xyXG4gICAgJCgnI28tbWVhc3VyZS1saW5lLWJ1dHRvbiBidXR0b24nKS5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcblxyXG4gICQoJyNvLW1lYXN1cmUtcG9seWdvbi1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICB0eXBlID0gJ1BvbHlnb24nO1xyXG4gICAgdG9nZ2xlVHlwZSgkKCcjby1tZWFzdXJlLXBvbHlnb24tYnV0dG9uIGJ1dHRvbicpKTtcclxuICAgICQoJyNvLW1lYXN1cmUtcG9seWdvbi1idXR0b24gYnV0dG9uJykuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3R5bGUoZmVhdHVyZSwgbGFiZWxUZXh0KSB7XHJcbiAgdmFyIGZlYXR1cmVUeXBlID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKTtcclxuICB2YXIgbWVhc3VyZVN0eWxlID0gZmVhdHVyZVR5cGUgPT0gJ0xpbmVTdHJpbmcnID8gc3R5bGUuY3JlYXRlU3R5bGVSdWxlKG1lYXN1cmVTdHlsZU9wdGlvbnMubGluZXN0cmluZykgOiBzdHlsZS5jcmVhdGVTdHlsZVJ1bGUobWVhc3VyZVN0eWxlT3B0aW9ucy5wb2x5Z29uKTtcclxuXHJcbiAgcmV0dXJuIG1lYXN1cmVTdHlsZTtcclxufVxyXG5cclxuLy9EaXNwbGF5IGFuZCBtb3ZlIHRvb2x0aXBzIHdpdGggcG9pbnRlclxyXG5mdW5jdGlvbiBwb2ludGVyTW92ZUhhbmRsZXIoZXZ0KSB7XHJcbiAgaWYgKGV2dC5kcmFnZ2luZykge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdmFyIGhlbHBNc2cgPSAnS2xpY2thIGbDtnIgYXR0IGLDtnJqYSBtw6R0YSc7XHJcbiAgdmFyIHRvb2x0aXBDb29yZCA9IGV2dC5jb29yZGluYXRlO1xyXG5cclxuICBpZiAoc2tldGNoKSB7XHJcbiAgICB2YXIgb3V0cHV0O1xyXG4gICAgdmFyIGdlb20gPSAoc2tldGNoLmdldEdlb21ldHJ5KCkpO1xyXG5cclxuICAgIGlmIChnZW9tIGluc3RhbmNlb2Ygb2wuZ2VvbS5Qb2x5Z29uKSB7XHJcbiAgICAgIG91dHB1dCA9IGZvcm1hdEFyZWEoLyoqIEB0eXBlIHtvbC5nZW9tLlBvbHlnb259ICovIChnZW9tKSk7XHJcbiAgICAgIHRvb2x0aXBDb29yZCA9IGdlb20uZ2V0SW50ZXJpb3JQb2ludCgpLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICB9IGVsc2UgaWYgKGdlb20gaW5zdGFuY2VvZiBvbC5nZW9tLkxpbmVTdHJpbmcpIHtcclxuICAgICAgb3V0cHV0ID0gZm9ybWF0TGVuZ3RoKCAvKiogQHR5cGUge29sLmdlb20uTGluZVN0cmluZ30gKi8gKGdlb20pKTtcclxuICAgICAgdG9vbHRpcENvb3JkID0gZ2VvbS5nZXRMYXN0Q29vcmRpbmF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudC5pbm5lckhUTUwgPSBvdXRwdXQ7XHJcbiAgICBsYWJlbCA9IG91dHB1dDtcclxuICAgIG1lYXN1cmVUb29sdGlwLnNldFBvc2l0aW9uKHRvb2x0aXBDb29yZCk7XHJcbiAgfVxyXG5cclxuICBpZiAoZXZ0LnR5cGUgPT0gJ3BvaW50ZXJtb3ZlJykge1xyXG4gICAgaGVscFRvb2x0aXBFbGVtZW50LmlubmVySFRNTCA9IGhlbHBNc2c7XHJcbiAgICBoZWxwVG9vbHRpcC5zZXRQb3NpdGlvbihldnQuY29vcmRpbmF0ZSk7XHJcbiAgfVxyXG5cclxufTtcclxuXHJcbmZ1bmN0aW9uIGFkZEludGVyYWN0aW9uKCkge1xyXG4gIHZlY3Rvci5zZXRWaXNpYmxlKHRydWUpO1xyXG5cclxuICBtZWFzdXJlID0gbmV3IG9sLmludGVyYWN0aW9uLkRyYXcoe1xyXG4gICAgc291cmNlOiBzb3VyY2UsXHJcbiAgICB0eXBlOiB0eXBlLFxyXG4gICAgc3R5bGU6IHN0eWxlLmNyZWF0ZVN0eWxlUnVsZShtZWFzdXJlU3R5bGVPcHRpb25zLmludGVyYWN0aW9uKVxyXG4gIH0pO1xyXG5cclxuICBtYXAuYWRkSW50ZXJhY3Rpb24obWVhc3VyZSk7XHJcblxyXG4gIGNyZWF0ZU1lYXN1cmVUb29sdGlwKCk7XHJcbiAgY3JlYXRlSGVscFRvb2x0aXAoKTtcclxuXHJcbiAgbWFwLm9uKCdwb2ludGVybW92ZScsIHBvaW50ZXJNb3ZlSGFuZGxlcik7XHJcbiAgbWFwLm9uKCdjbGljaycsIHBvaW50ZXJNb3ZlSGFuZGxlcik7XHJcblxyXG4gIG1lYXN1cmUub24oJ2RyYXdzdGFydCcsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgLy8gc2V0IHNrZXRjaFxyXG4gICAgZHJhd1N0YXJ0ID0gdHJ1ZTtcclxuICAgIHNrZXRjaCA9IGV2dC5mZWF0dXJlO1xyXG4gICAgJChoZWxwVG9vbHRpcEVsZW1lbnQpLmFkZENsYXNzKCdvLWhpZGRlbicpO1xyXG4gIH0sIHRoaXMpO1xyXG5cclxuICBtZWFzdXJlLm9uKCdkcmF3ZW5kJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICB2YXIgZmVhdHVyZSA9IGV2dC5mZWF0dXJlO1xyXG4gICAgZmVhdHVyZS5zZXRTdHlsZShjcmVhdGVTdHlsZShmZWF0dXJlKSk7XHJcbiAgICBmZWF0dXJlLmdldFN0eWxlKClbMF0uZ2V0VGV4dCgpLnNldFRleHQobGFiZWwpO1xyXG4gICAgJChtZWFzdXJlVG9vbHRpcEVsZW1lbnQpLnJlbW92ZSgpO1xyXG4gICAgLy8gdW5zZXQgc2tldGNoXHJcbiAgICBza2V0Y2ggPSBudWxsO1xyXG4gICAgLy8gdW5zZXQgdG9vbHRpcCBzbyB0aGF0IGEgbmV3IG9uZSBjYW4gYmUgY3JlYXRlZFxyXG4gICAgbWVhc3VyZVRvb2x0aXBFbGVtZW50ID0gbnVsbDtcclxuICAgIGNyZWF0ZU1lYXN1cmVUb29sdGlwKCk7XHJcbiAgICAkKGhlbHBUb29sdGlwRWxlbWVudCkucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgfSwgdGhpcyk7XHJcblxyXG59O1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlSGVscFRvb2x0aXAoKSB7XHJcbiAgaWYgKGhlbHBUb29sdGlwRWxlbWVudCkge1xyXG4gICAgaGVscFRvb2x0aXBFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaGVscFRvb2x0aXBFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGhlbHBUb29sdGlwRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGhlbHBUb29sdGlwRWxlbWVudC5jbGFzc05hbWUgPSAnby10b29sdGlwIG8tdG9vbHRpcC1tZWFzdXJlJztcclxuXHJcbiAgaGVscFRvb2x0aXAgPSBuZXcgb2wuT3ZlcmxheSh7XHJcbiAgICBlbGVtZW50OiBoZWxwVG9vbHRpcEVsZW1lbnQsXHJcbiAgICBvZmZzZXQ6IFsxNSwgMF0sXHJcbiAgICBwb3NpdGlvbmluZzogJ2NlbnRlci1sZWZ0JyxcclxuICB9KTtcclxuXHJcbiAgb3ZlcmxheUFycmF5LnB1c2goaGVscFRvb2x0aXApO1xyXG4gIG1hcC5hZGRPdmVybGF5KGhlbHBUb29sdGlwKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU1lYXN1cmVUb29sdGlwKCkge1xyXG4gIGlmIChtZWFzdXJlVG9vbHRpcEVsZW1lbnQpIHtcclxuICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG1lYXN1cmVUb29sdGlwRWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBtZWFzdXJlVG9vbHRpcEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBtZWFzdXJlVG9vbHRpcEVsZW1lbnQuY2xhc3NOYW1lID0gJ28tdG9vbHRpcCBvLXRvb2x0aXAtbWVhc3VyZSc7XHJcblxyXG4gIG1lYXN1cmVUb29sdGlwID0gbmV3IG9sLk92ZXJsYXkoe1xyXG4gICAgZWxlbWVudDogbWVhc3VyZVRvb2x0aXBFbGVtZW50LFxyXG4gICAgb2Zmc2V0OiBbMCwgLTE1XSxcclxuICAgIHBvc2l0aW9uaW5nOiAnYm90dG9tLWNlbnRlcicsXHJcbiAgICBzdG9wRXZlbnQ6IGZhbHNlXHJcbiAgfSk7XHJcblxyXG4gIG92ZXJsYXlBcnJheS5wdXNoKG1lYXN1cmVUb29sdGlwKTtcclxuICBtYXAuYWRkT3ZlcmxheShtZWFzdXJlVG9vbHRpcCk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRMZW5ndGgobGluZSkge1xyXG4gIHZhciBsZW5ndGgsIG91dHB1dDtcclxuICB2YXIgY29vcmRpbmF0ZXMgPSBsaW5lLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgbGVuZ3RoID0gY29vcmRpbmF0ZXMucmVkdWNlKGdldExlbmd0aCwwKTtcclxuXHJcbiAgaWYgKGxlbmd0aCA+IDEwMCkge1xyXG4gICAgb3V0cHV0ID0gKE1hdGgucm91bmQobGVuZ3RoIC8gMTAwMCAqIDEwMCkgLyAxMDApICtcclxuICAgICAgJyAnICsgJ2ttJztcclxuICB9IGVsc2Uge1xyXG4gICAgb3V0cHV0ID0gKE1hdGgucm91bmQobGVuZ3RoICogMTAwKSAvIDEwMCkgK1xyXG4gICAgICAnICcgKyAnbSc7XHJcbiAgfVxyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXRMZW5ndGgodG90YWwsIHZhbHVlLCBpbmRleCwgYXJyKXtcclxuICBpZihpbmRleDxhcnIubGVuZ3RoLTEpe1xyXG4gICAgdmFyIHNvdXJjZVByb2ogPSBtYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKTtcclxuICAgIHZhciBjMSA9IG9sLnByb2oudHJhbnNmb3JtKGFycltpbmRleF0sIHNvdXJjZVByb2osICdFUFNHOjQzMjYnKTtcclxuICAgIHZhciBjMiA9IG9sLnByb2oudHJhbnNmb3JtKGFycltpbmRleCArIDFdLCBzb3VyY2VQcm9qLCAnRVBTRzo0MzI2Jyk7XHJcbiAgICB0b3RhbCArPSB3Z3M4NFNwaGVyZS5oYXZlcnNpbmVEaXN0YW5jZShjMSwgYzIpO1xyXG4gIH1cclxuICByZXR1cm4gdG90YWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdEFyZWEocG9seWdvbikge1xyXG4gIHZhciBhcmVhO1xyXG4gIHZhciBzb3VyY2VQcm9qID0gbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCk7XHJcbiAgdmFyIGdlb20gPSAvKiogQHR5cGUge29sLmdlb20uUG9seWdvbn0gKi8ocG9seWdvbi5jbG9uZSgpLnRyYW5zZm9ybShzb3VyY2VQcm9qLCAnRVBTRzo0MzI2JykpO1xyXG4gIHZhciBjb29yZGluYXRlcyA9IGdlb20uZ2V0TGluZWFyUmluZygwKS5nZXRDb29yZGluYXRlcygpO1xyXG4gIGFyZWEgPSBNYXRoLmFicyh3Z3M4NFNwaGVyZS5nZW9kZXNpY0FyZWEoY29vcmRpbmF0ZXMpKTtcclxuICB2YXIgb3V0cHV0O1xyXG5cclxuICBpZiAoYXJlYSA+IDEwMDAwMDAwKSB7XHJcbiAgICBvdXRwdXQgPSAoTWF0aC5yb3VuZChhcmVhIC8gMTAwMDAwMCAqIDEwMCkgLyAxMDApICtcclxuICAgICAgJyAnICsgJ2ttPHN1cD4yPC9zdXA+JztcclxuICB9IGVsc2UgaWYgKGFyZWEgPiAxMDAwMCkge1xyXG4gICAgb3V0cHV0ID0gKE1hdGgucm91bmQoYXJlYSAvIDEwMDAwICogMTAwKSAvIDEwMCkgK1xyXG4gICAgICAnICcgKyAnaGEnO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBvdXRwdXQgPSAoTWF0aC5yb3VuZChhcmVhICogMTAwKSAvIDEwMCkgK1xyXG4gICAgICAnICcgKyAnbTxzdXA+Mjwvc3VwPic7XHJcbiAgfVxyXG5cclxuICB2YXIgaHRtbEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgaHRtbEVsZW0uaW5uZXJIVE1MID0gb3V0cHV0O1xyXG5cclxuICBbXS5mb3JFYWNoLmNhbGwoaHRtbEVsZW0uY2hpbGRyZW4sIGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdTVVAnKSB7XHJcbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGVsZW1lbnQudGV4dENvbnRlbnQuY2hhckNvZGVBdCgwKSArIDEyOCk7XHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIGh0bWxFbGVtLnRleHRDb250ZW50O1xyXG59O1xyXG5cclxuZnVuY3Rpb24gdG9nZ2xlTWVhc3VyZSAoKSB7XHJcbiAgaWYgKGlzQWN0aXZlKSB7XHJcbiAgICAkKCcuby1tYXAnKS50cmlnZ2VyKHtcclxuICAgICAgdHlwZTogJ2VuYWJsZUludGVyYWN0aW9uJyxcclxuICAgICAgaW50ZXJhY3Rpb246ICdmZWF0dXJlSW5mbydcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAkKCcuby1tYXAnKS50cmlnZ2VyKHtcclxuICAgICAgdHlwZTogJ2VuYWJsZUludGVyYWN0aW9uJyxcclxuICAgICAgaW50ZXJhY3Rpb246ICdtZWFzdXJlJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufTtcclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVR5cGUoYnV0dG9uKSB7XHJcbiAgaWYgKGFjdGl2ZUJ1dHRvbikge1xyXG4gICAgYWN0aXZlQnV0dG9uLnJlbW92ZUNsYXNzKCdvLW1lYXN1cmUtYnV0dG9uLXRydWUnKTtcclxuICB9XHJcblxyXG4gIGJ1dHRvbi5hZGRDbGFzcygnby1tZWFzdXJlLWJ1dHRvbi10cnVlJyk7XHJcbiAgYWN0aXZlQnV0dG9uID0gYnV0dG9uO1xyXG4gIG1hcC5yZW1vdmVJbnRlcmFjdGlvbihtZWFzdXJlKTtcclxuICBhZGRJbnRlcmFjdGlvbigpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5cclxudmFyIG1vZGFsID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gIHZhciBpc1N0YXRpYyA9IHVuZGVmaW5lZDtcclxuICB2YXIgJHRhcmdldCA9IHVuZGVmaW5lZDtcclxuICB2YXIgbW9kYWxFbCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGNyZWF0ZU1vZGFsOiBjcmVhdGVNb2RhbCxcclxuICAgIHNob3dNb2RhbDogc2hvd01vZGFsLFxyXG4gICAgY2xvc2VNb2RhbDogY2xvc2VNb2RhbFxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlcih0aXRsZSwgY29udGVudCkge1xyXG4gICAgbW9kYWxFbCA9ICc8ZGl2IGlkPVwiby1tb2RhbFwiPicgK1xyXG4gICAgICAnPGRpdiBjbGFzcz1cIm8tbW9kYWwtc2NyZWVuXCI+PC9kaXY+JyArXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiby1tb2RhbFwiPicgK1xyXG4gICAgICAnPGRpdiBjbGFzcz1cIm8tY2xvc2UtYnV0dG9uXCI+PHN2ZyBjbGFzcz1cIm8taWNvbi1mYS10aW1lc1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS10aW1lc1wiPjwvdXNlPjwvc3ZnPjwvZGl2PicgK1xyXG4gICAgICAnPGRpdiBjbGFzcz1cIm8tbW9kYWwtdGl0bGVcIj4nICsgdGl0bGUgKyAnPC9kaXY+JyArXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiby1tb2RhbC1jb250ZW50XCI+JyArIGNvbnRlbnQgKyAnPC9kaXY+JyArXHJcbiAgICAgICc8L2Rpdj4nICtcclxuICAgICAgJzwvZGl2Pic7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICAgaWYgKGlzU3RhdGljID09PSBmYWxzZSkge1xyXG4gICAgICAkKCcuby1tb2RhbC1zY3JlZW4sIC5vLWNsb3NlLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNsb3NlTW9kYWwoKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKCcuby1jbG9zZS1idXR0b24nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICBjbG9zZU1vZGFsKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlTW9kYWwobW9kYWxUYXJnZXQsIG9wdGlvbnMpIHtcclxuICAgIHZhciB0aXRsZSA9IG9wdGlvbnMudGl0bGUgfHwgJyc7XHJcbiAgICB2YXIgY29udGVudCA9IG9wdGlvbnMuY29udGVudCB8fCAnJztcclxuICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdzdGF0aWMnKSkge1xyXG4gICAgICBpc1N0YXRpYyA9IG9wdGlvbnMuc3RhdGljO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaXNTdGF0aWMgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHJlbmRlcih0aXRsZSwgY29udGVudCk7XHJcbiAgICAkdGFyZ2V0ID0gJChtb2RhbFRhcmdldCk7XHJcblxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2hvd01vZGFsKCkge1xyXG4gICAgJHRhcmdldC5wcmVwZW5kKG1vZGFsRWwpO1xyXG4gICAgYmluZFVJQWN0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2xvc2VNb2RhbCgpIHtcclxuICAgICQoJyNvLW1vZGFsJykucmVtb3ZlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1vZGFsKCk7XHJcbiIsIi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gKiBDb3B5cmlnaHQgMjAxNiBPcmlnb1xyXG4gKiBMaWNlbnNlZCB1bmRlciBCU0QgMi1DbGF1c2UgKGh0dHBzOi8vZ2l0aHViLmNvbS9vcmlnby1tYXAvb3JpZ28vYmxvYi9tYXN0ZXIvTElDRU5TRS50eHQpXHJcbiAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbnZhciBkb3dubG9hZGVyID0gcmVxdWlyZSgnLi9vZmZsaW5lL2Rvd25sb2FkZXInKTtcclxudmFyIGRvd25sb2FkSGFuZGxlciA9IHJlcXVpcmUoJy4vb2ZmbGluZS9kb3dubG9hZGhhbmRsZXInKTtcclxudmFyIG9mZmxpbmVTdG9yZSA9IHJlcXVpcmUoJy4vb2ZmbGluZS9vZmZsaW5lc3RvcmUnKSgpO1xyXG5cclxudmFyIG1hcCA9IHVuZGVmaW5lZDtcclxudmFyIGJhc2VVcmwgPSB1bmRlZmluZWQ7XHJcbnZhciAkb2ZmbGluZUJ1dHRvbiA9IHVuZGVmaW5lZDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuICBiYXNlVXJsID0gVmlld2VyLmdldEJhc2VVcmwoKTtcclxuXHJcbiAgZG93bmxvYWRIYW5kbGVyKCk7XHJcblxyXG4gIHJlbmRlcigpO1xyXG4gIGJpbmRVSUFjdGlvbnMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gIHZhciBlbCA9IHV0aWxzLmNyZWF0ZUxpc3RCdXR0b24oe1xyXG4gICAgaWQ6ICdvLW9mZmxpbmUnLFxyXG4gICAgaWNvbkNsczogJ28taWNvbi1mYS1kb3dubG9hZCcsXHJcbiAgICBzcmM6ICcjZmEtZG93bmxvYWQnLFxyXG4gICAgdGV4dDogJ05lZGxhZGRuaW5nYXInXHJcbiAgfSk7XHJcbiAgJCgnI28tbWVudXRvb2xzJykuYXBwZW5kKGVsKTtcclxuICAkb2ZmbGluZUJ1dHRvbiA9ICQoJyNvLW9mZmxpbmUtYnV0dG9uJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgJG9mZmxpbmVCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgZG93bmxvYWRlcihvZmZsaW5lU3RvcmUuZ2V0T2ZmbGluZUxheWVycygpKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IEluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi9kb3dubG9hZGVyLnRlbXBsYXRlLmhhbmRsZWJhcnNcIik7XHJcbnZhciBzcGlubmVyID0gcmVxdWlyZShcIi4uL2NvbXBvbmVudHMvc3Bpbm5lci5oYW5kbGViYXJzXCIpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vb2ZmbGluZWRpc3BhdGNoZXInKTtcclxuXHJcbnZhciB0b29sYmFyUHJlZml4ID0gJ28tZG93bmxvYWRlci10ZC10b29sYmFyLSc7XHJcblxyXG52YXIgRG93bmxvYWRlciA9IGZ1bmN0aW9uIERvd25sb2FkZXIobGF5ZXJzT2JqKSB7XHJcbiAgcmVuZGVyKGxheWVyc09iaik7XHJcbiAgYWRkTGlzdGVuZXJzKCk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlcihsYXllcnNPYmopIHtcclxuICAgICQoJyNvLW1hcCcpLnByZXBlbmQodGVtcGxhdGUpO1xyXG4gICAgcmVuZGVyUm93cyhsYXllcnNPYmopO1xyXG5cclxuICAgIGJpbmRVSUFjdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZExpc3RlbmVycygpIHtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VPZmZsaW5lU3RhcnQnLCBvbkNoYW5nZU9mZmxpbmVTdGFydCk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlT2ZmbGluZUVuZCcsIG9uQ2hhbmdlT2ZmbGluZUVuZCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkNoYW5nZU9mZmxpbmVTdGFydChlKSB7XHJcbiAgICByZW5kZXJCdXR0b25zKCcjJyArIHRvb2xiYXJQcmVmaXggKyBlLmxheWVyTmFtZSwgJ3BlbmRpbmcnLCBlLmxheWVyTmFtZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkNoYW5nZU9mZmxpbmVFbmQoZSkge1xyXG4gICAgcmVuZGVyQnV0dG9ucygnIycgKyB0b29sYmFyUHJlZml4ICsgZS5sYXllck5hbWUsIGUuc3RhdGUsIGUubGF5ZXJOYW1lKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgICAkKCcuby1kb3dubG9hZGVyIC5vLWNsb3NlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgIGNsb3NlRG93bmxvYWRlcigpO1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJSb3dzKGxheWVyc09iaikge1xyXG4gICAgdmFyIGxheWVyTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhsYXllcnNPYmopO1xyXG4gICAgbGF5ZXJOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyTmFtZSkge1xyXG4gICAgICByZW5kZXJSb3cobGF5ZXJOYW1lLCBsYXllcnNPYmopO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJSb3cobGF5ZXJOYW1lLCBsYXllcnNPYmopIHtcclxuICAgIHZhciBsYXllciA9IFZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmFyIHRkVGl0bGUgPSB1dGlscy5jcmVhdGVFbGVtZW50KCd0ZCcsIGxheWVyLmdldCgndGl0bGUnKSx7fSk7XHJcbiAgICB2YXIgdG9vbGJhcklkID0gdG9vbGJhclByZWZpeCArIGxheWVyTmFtZTtcclxuICAgIHZhciB0b29sYmFyID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2JywgJycsIHtcclxuICAgICAgY2xzOiAnby10b29sYmFyLWhvcml6b250YWwnLFxyXG4gICAgICBzdHlsZTogJ3RleHQtYWxpZ246IHJpZ2h0OyBmbG9hdDogcmlnaHQ7JyxcclxuICAgICAgaWQ6IHRvb2xiYXJJZFxyXG4gICAgfSk7XHJcbiAgICB2YXIgdGRUb29sYmFyID0gdXRpbHMuY3JlYXRlRWxlbWVudCgndGQnLCB0b29sYmFyLCB7fSk7XHJcbiAgICB2YXIgcm93ID0gdGRUaXRsZSArIHRkVG9vbGJhcjtcclxuICAgIHZhciBjbHMgPSAnby1kb3dubG9hZGVyLXRyLScgKyBsYXllck5hbWU7XHJcbiAgICB2YXIgdHIgPSB1dGlscy5jcmVhdGVFbGVtZW50KCd0cicsIHJvdywge1xyXG4gICAgICBjbHM6IGNsc1xyXG4gICAgfSk7XHJcbiAgICB2YXIgc3RhdGU7XHJcbiAgICAkKCcuby1kb3dubG9hZGVyIC5vLXRhYmxlJykuYXBwZW5kKHRyKTtcclxuICAgIHN0YXRlID0gIGxheWVyc09ialtsYXllck5hbWVdLmRvd25sb2FkZWQgPT09IHRydWUgPyAnb2ZmbGluZScgOiAnZG93bmxvYWQnO1xyXG4gICAgcmVuZGVyQnV0dG9ucygnIycgKyB0b29sYmFySWQsIHN0YXRlLCBsYXllck5hbWUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyQnV0dG9ucyh0YXJnZXQsIHN0YXRlLCBsYXllck5hbWUpIHtcclxuICAgICQodGFyZ2V0KS5lbXB0eSgpO1xyXG4gICAgaWYgKHN0YXRlID09PSAnb2ZmbGluZScpIHtcclxuICAgICAgcmVuZGVyU3luYyh0YXJnZXQsIGxheWVyTmFtZSk7XHJcbiAgICAgIHJlbmRlclJlbW92ZSh0YXJnZXQsIGxheWVyTmFtZSk7XHJcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAnZG93bmxvYWQnKSB7XHJcbiAgICAgIHJlbmRlckRvd25sb2FkKHRhcmdldCwgbGF5ZXJOYW1lKTtcclxuICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdwZW5kaW5nJykge1xyXG4gICAgICByZW5kZXJQZW5kaW5nKHRhcmdldCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJTeW5jKHRhcmdldCwgbGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgaWQgPSAnby1kb3dubG9hZGVyLXJlZnJlc2gtJyArIGxheWVyTmFtZTtcclxuICAgIHZhciByZWZyZXNoID0gY3JlYXRlQnV0dG9uKHtcclxuICAgICAgaHJlZjogJyNmYS1yZWZyZXNoJyxcclxuICAgICAgY2xzOiAnby1pY29uLWZhLXJlZnJlc2gnLFxyXG4gICAgICBpZDogaWRcclxuICAgIH0pO1xyXG4gICAgJCh0YXJnZXQpLmFwcGVuZChyZWZyZXNoKTtcclxuICAgIGJpbmRBY3Rpb24oJyMnICsgaWQsIGxheWVyTmFtZSwgJ3N5bmMnKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclJlbW92ZSh0YXJnZXQsIGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGlkID0gJ28tZG93bmxvYWRlci10cmFzaC0nICsgbGF5ZXJOYW1lO1xyXG4gICAgdmFyIHRyYXNoID0gY3JlYXRlQnV0dG9uKHtcclxuICAgICAgaHJlZjogJyNmYS10cmFzaCcsXHJcbiAgICAgIGNsczogJ28taWNvbi1mYS10cmFzaCcsXHJcbiAgICAgIGlkOiBpZFxyXG4gICAgfSk7XHJcbiAgICAkKHRhcmdldCkuYXBwZW5kKHRyYXNoKTtcclxuICAgIGJpbmRBY3Rpb24oJyMnICsgaWQsIGxheWVyTmFtZSwgJ3JlbW92ZScpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyRG93bmxvYWQodGFyZ2V0LCBsYXllck5hbWUpIHtcclxuICAgIHZhciBpZCA9ICdvLWRvd25sb2FkZXItZG93bmxvYWQtJyArIGxheWVyTmFtZTtcclxuICAgIHZhciBkb3dubG9hZCA9IGNyZWF0ZUJ1dHRvbih7XHJcbiAgICAgIGhyZWY6ICcjZmEtZG93bmxvYWQnLFxyXG4gICAgICBjbHM6ICdvLWljb24tZmEtZG93bmxvYWQnLFxyXG4gICAgICBpZDogaWRcclxuICAgIH0pO1xyXG4gICAgJCh0YXJnZXQpLmFwcGVuZChkb3dubG9hZCk7XHJcbiAgICBiaW5kQWN0aW9uKCcjJyArIGlkLCBsYXllck5hbWUsICdkb3dubG9hZCcpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyUGVuZGluZyh0YXJnZXQpIHtcclxuICAgIHZhciBzcGlubmVyQnV0dG9uID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgJycsIHtcclxuICAgICAgY2xzOiAnby1zcGlubmVyJ1xyXG4gICAgfSk7XHJcbiAgICAkKHRhcmdldCkuYXBwZW5kKHNwaW5uZXJCdXR0b24pO1xyXG4gICAgJCgnLm8tc3Bpbm5lcicpLmFwcGVuZChzcGlubmVyKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUJ1dHRvbihvYmopIHtcclxuICAgIHZhciBpY29uID0gdXRpbHMuY3JlYXRlU3ZnKHtcclxuICAgICAgaHJlZjogb2JqLmhyZWYsXHJcbiAgICAgIGNsczogb2JqLmNsc1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdXRpbHMuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgaWNvbiwge1xyXG4gICAgICBpZDogb2JqLmlkXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNsb3NlRG93bmxvYWRlcigpIHtcclxuICAgICQoJy5vLWRvd25sb2FkZXInKS5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGJpbmRBY3Rpb24odGFyZ2V0LCBsYXllck5hbWUsIHR5cGUpIHtcclxuICAgICQodGFyZ2V0KS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRG93bmxvYWQobGF5ZXJOYW1lLCB0eXBlKTtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gRG93bmxvYWRlcjtcclxuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnNDb21waWxlciA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKHtcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIjxkaXYgY2xhc3M9XFxcIm8tY29udGFpbmVyLWZsdWlkIG8tZG93bmxvYWRlclxcXCI+XFxyXFxuICA8ZGl2IGNsYXNzPVxcXCJvLWNhcmRcXFwiPlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJvLWNhcmQtaGVhZGVyIG8tdGV4dC1jZW50ZXJcXFwiPlxcclxcbiAgICAgIDxoNiBjbGFzcz1cXFwiby1jYXJkLWhlYWRpbmdcXFwiPk5lZGxhZGRuaW5nYXI8L2g2PlxcclxcbiAgICAgIDxkaXYgY2xhc3M9XFxcIm8tY2xvc2UtYnV0dG9uXFxcIj5cXHJcXG4gICAgICAgIDxzdmcgY2xhc3M9XFxcIm8taWNvbi1mYS10aW1lc1xcXCI+PHVzZSB4bGluazpocmVmPVxcXCIjZmEtdGltZXNcXFwiPjwvdXNlPjwvc3ZnPlxcclxcbiAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiby1jYXJkLWNvbnRlbnRcXFwiPlxcclxcbiAgICAgIDx0YWJsZSBjbGFzcyA9XFxcIm8tdGFibGVcXFwiPlxcclxcblxcclxcbiAgICAgIDwvdGFibGU+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgPC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuXCI7XG59LFwidXNlRGF0YVwiOnRydWV9KTtcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBsYXllckNyZWF0b3IgPSByZXF1aXJlKCcuLi9sYXllcmNyZWF0b3InKTtcclxudmFyIG9mZmxpbmVMYXllciA9IHJlcXVpcmUoJy4vb2ZmbGluZWxheWVyJykoKTtcclxudmFyIGRvd25sb2FkU291cmNlcyA9IHJlcXVpcmUoJy4vZG93bmxvYWRzb3VyY2VzJyk7XHJcbnZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9vZmZsaW5lZGlzcGF0Y2hlcicpO1xyXG52YXIgb2ZmbGluZVN0b3JlID0gcmVxdWlyZSgnLi9vZmZsaW5lc3RvcmUnKSgpO1xyXG5cclxudmFyIGRvd25sb2FkRXJyb3JNc2cgPSAnRGV0IGludHLDpGZmYWRlIGV0dCBmZWwgbsOkciBsYWdyZXQgc2t1bGxlIGjDpG10YXMuIMOEciBkdSBhbnNsdXRlbiB0aWxsIGludGVybmV0PydcclxudmFyIHNhdmVFcnJvck1zZyA9ICdEZXQgaW50csOkZmZhZGUgZXR0IGZlbCBuw6RyIGbDtnLDpG5kcmluZ2FybmEgc2t1bGxlIHNwYXJhcy4gRsO2cnPDtmsgaWdlbiBzZW5hcmUuJztcclxudmFyIGludmFsaWRGb3JtYXRNc2cgPSAnSW52YWxpZCBmb3JtYXQ6ICc7XHJcblxyXG52YXIgZG93bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24gZG93bmxvYWRIYW5kbGVyKCkge1xyXG4gICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VEb3dubG9hZCcsIG9uQ2hhbmdlRG93bmxvYWQpO1xyXG4gIG9mZmxpbmVTdG9yZS5pbml0KCk7XHJcblxyXG4gIGZ1bmN0aW9uIG9uQ2hhbmdlRG93bmxvYWQoZSkge1xyXG4gICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgIGlmIChlLmFjdGlvbiA9PT0gJ2Rvd25sb2FkJykge1xyXG4gICAgICBkb3dubG9hZChlLmxheWVyTmFtZSk7XHJcbiAgICB9IGVsc2UgaWYgKGUuYWN0aW9uID09PSAnc3luYycpIHtcclxuICAgICAgc3luYyhlLmxheWVyTmFtZSk7XHJcbiAgICB9IGVsc2UgaWYgKGUuYWN0aW9uID09PSAncmVtb3ZlJykge1xyXG4gICAgICByZW1vdmVEb3dubG9hZGVkKGUubGF5ZXJOYW1lKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZURvd25sb2FkZWQobGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZhciBwcm9wcyA9IGxheWVyLmdldFByb3BlcnRpZXMoKTtcclxuICAgIHZhciBzb3VyY2U7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VPZmZsaW5lU3RhcnQobGF5ZXJOYW1lKTtcclxuICAgIHByb3BzLnN0eWxlID0gcHJvcHMuc3R5bGVOYW1lO1xyXG4gICAgcHJvcHMuc291cmNlID0gcHJvcHMuc291cmNlTmFtZTtcclxuICAgIHByb3BzLnR5cGUgPSBwcm9wcy5vbmxpbmVUeXBlO1xyXG4gICAgc291cmNlID0gbGF5ZXJDcmVhdG9yKHByb3BzKS5nZXRTb3VyY2UoKTtcclxuICAgIGxheWVyLnNldFNvdXJjZShzb3VyY2UpO1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlT2ZmbGluZShsYXllci5nZXQoJ25hbWUnKSwgJ3JlbW92ZScpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc3luYyhsYXllck5hbWUpIHtcclxuICAgIHZhciBvZmZsaW5lRWRpdHMgPSBvZmZsaW5lU3RvcmUuZ2V0T2ZmbGluZUVkaXRzKGxheWVyTmFtZSk7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VPZmZsaW5lU3RhcnQobGF5ZXJOYW1lKTtcclxuICAgIGlmIChvZmZsaW5lRWRpdHMpIHtcclxuICAgICAgb2ZmbGluZUVkaXRzXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZWRpdEl0ZW1zKSB7XHJcbiAgICAgICAgICBzYXZlVG9SZW1vdGUoZWRpdEl0ZW1zLCBsYXllck5hbWUpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgIGRvd25sb2FkKGxheWVyTmFtZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKGVycikge1xyXG4gICAgICAgICAgICAgIGFib3J0KGxheWVyTmFtZSwgc2F2ZUVycm9yTXNnLCAnYWxlcnQnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkb3dubG9hZChsYXllck5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2F2ZVRvUmVtb3RlKGVkaXRJdGVtcywgbGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZhciB0cmFuc09iaiA9IHtcclxuICAgICAgZGVsZXRlOiBbXSxcclxuICAgICAgaW5zZXJ0OiBbXSxcclxuICAgICAgdXBkYXRlOiBbXVxyXG4gICAgfTtcclxuICAgIHZhciBpZHMgPSBbXTtcclxuICAgIGVkaXRJdGVtcy5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgICAgdmFyIGlkID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaXRlbSlbMF07XHJcbiAgICAgIHZhciBmZWF0dXJlID0gbGF5ZXIuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZUJ5SWQoaWQpO1xyXG4gICAgICB2YXIgZHVtbXk7XHJcbiAgICAgIGlmIChmZWF0dXJlKSB7XHJcbiAgICAgICAgdHJhbnNPYmpbaXRlbVtpZF1dLnB1c2goZmVhdHVyZSk7XHJcbiAgICAgICAgaWRzLnB1c2goaWQpO1xyXG4gICAgICB9IGVsc2UgaWYgKGl0ZW1baWRdID09PSAnZGVsZXRlJykge1xyXG4gICAgICAgIGR1bW15ID0gbmV3IG9sLkZlYXR1cmUoKTtcclxuICAgICAgICBkdW1teS5zZXRJZChpZCk7XHJcbiAgICAgICAgdHJhbnNPYmpbaXRlbVtpZF1dLnB1c2goZHVtbXkpO1xyXG4gICAgICAgIGlkcy5wdXNoKGlkKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGRvd25sb2FkU291cmNlc1tsYXllci5nZXQoJ29ubGluZVR5cGUnKV0udHJhbnNhY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgaWYgKHJlc3VsdCA+IDApIHtcclxuICAgICAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmUobGF5ZXIuZ2V0KCduYW1lJyksICdlZGl0cycsIGlkcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGRvd25sb2FkKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2YXIgdHlwZSA9IGxheWVyLmdldCgnb25saW5lVHlwZScpO1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlT2ZmbGluZVN0YXJ0KGxheWVyTmFtZSk7XHJcbiAgICBpZiAoZG93bmxvYWRTb3VyY2VzLmhhc093blByb3BlcnR5KHR5cGUpKSB7XHJcbiAgICAgIGRvd25sb2FkU291cmNlc1t0eXBlXS5yZXF1ZXN0KGxheWVyKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgb2ZmbGluZUxheWVyLnNldE9mZmxpbmVTb3VyY2UobGF5ZXJOYW1lLCByZXN1bHQpO1xyXG4gICAgICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlT2ZmbGluZShsYXllci5nZXQoJ25hbWUnKSwgJ2Rvd25sb2FkJyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuZmFpbChmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgICAgYWJvcnQobGF5ZXJOYW1lLCBkb3dubG9hZEVycm9yTXNnLCAnYWxlcnQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9yID0gJ1NvcnJ5LCAnICsgdHlwZSArICcgaXMgbm90IGF2YWlsYWJsZSBhcyBvbiBvZmZsaW5lIGZvcm1hdCc7XHJcbiAgICAgIGFib3J0KGxheWVyTmFtZSwgaW52YWxpZEZvcm1hdE1zZyArIHR5cGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWJvcnQobGF5ZXJOYW1lLCBlcnJvciwgaXNBbGVydCkge1xyXG4gICAgdmFyIGFjdGlvbjtcclxuICAgIGlmIChvZmZsaW5lU3RvcmUuZ2V0T2ZmbGluZUxheWVyKGxheWVyTmFtZSkuZG93bmxvYWRlZCkge1xyXG4gICAgICBhY3Rpb24gPSAnb2ZmbGluZSc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhY3Rpb24gPSAnZG93bmxvYWQnO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChpc0FsZXJ0KSB7XHJcbiAgICAgIGFsZXJ0KGVycm9yKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycm9yKTtcclxuICAgIH1cclxuXHJcbiAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VPZmZsaW5lRW5kKGxheWVyTmFtZSwgYWN0aW9uKTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZG93bmxvYWRIYW5kbGVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBzb3VyY2VzID0ge307XHJcbnNvdXJjZXMuV0ZTID0gcmVxdWlyZSgnLi93ZnMnKTtcclxuc291cmNlcy5HRU9KU09OID0gcmVxdWlyZSgnLi9nZW9qc29uJyk7XHJcbnNvdXJjZXMuVE9QT0pTT04gPSByZXF1aXJlKCcuL3RvcG9qc29uJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHNvdXJjZXM7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2ZXJpZnlGZWF0dXJlSWRzID0gcmVxdWlyZSgnLi92ZXJpZnlmZWF0dXJlaWRzJyk7XHJcblxyXG52YXIgZ2VvanNvbiA9IHt9O1xyXG5nZW9qc29uLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGxheWVyKSB7XHJcbiAgdmFyIHNvdXJjZSA9IGxheWVyLmdldCgnc291cmNlTmFtZScpO1xyXG4gIHZhciByZXF1ZXN0ID0gY3JlYXRlUmVxdWVzdChzb3VyY2UpO1xyXG4gIHJldHVybiByZXF1ZXN0O1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KHNvdXJjZSkge1xyXG4gICAgdmFyIGZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuR2VvSlNPTigpO1xyXG4gICAgdmFyIHVybCA9IHNvdXJjZTtcclxuXHJcbiAgICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBjYWNoZTogZmFsc2VcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICB2YXIgZmVhdHVyZXMgPSBmb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlKTtcclxuICAgICAgICBmZWF0dXJlcyA9IHZlcmlmeUZlYXR1cmVJZHMoZmVhdHVyZXMpO1xyXG4gICAgICAgIHJldHVybiBmZWF0dXJlcztcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdlb2pzb247XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGVtaXRDaGFuZ2VPZmZsaW5lOiBlbWl0Q2hhbmdlT2ZmbGluZSxcclxuICBlbWl0Q2hhbmdlRG93bmxvYWQ6IGVtaXRDaGFuZ2VEb3dubG9hZCxcclxuICBlbWl0Q2hhbmdlT2ZmbGluZVN0YXJ0OiBlbWl0Q2hhbmdlT2ZmbGluZVN0YXJ0LFxyXG4gIGVtaXRDaGFuZ2VPZmZsaW5lRW5kOiBlbWl0Q2hhbmdlT2ZmbGluZUVuZFxyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0Q2hhbmdlT2ZmbGluZShsYXllck5hbWUsIGFjdGlvbiwgaWRzKSB7XHJcbiAgJC5ldmVudC50cmlnZ2VyKHtcclxuICAgIHR5cGU6ICdjaGFuZ2VPZmZsaW5lJyxcclxuICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLFxyXG4gICAgYWN0aW9uOiBhY3Rpb24sXHJcbiAgICBpZHM6IGlkcyB8fCB1bmRlZmluZWRcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdENoYW5nZURvd25sb2FkKGxheWVyTmFtZSwgYWN0aW9uKSB7XHJcbiAgJC5ldmVudC50cmlnZ2VyKHtcclxuICAgIHR5cGU6ICdjaGFuZ2VEb3dubG9hZCcsXHJcbiAgICBsYXllck5hbWU6IGxheWVyTmFtZSxcclxuICAgIGFjdGlvbjogYWN0aW9uXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRDaGFuZ2VPZmZsaW5lU3RhcnQobGF5ZXJOYW1lKSB7XHJcbiAgJC5ldmVudC50cmlnZ2VyKHtcclxuICAgIHR5cGU6ICdjaGFuZ2VPZmZsaW5lU3RhcnQnLFxyXG4gICAgbGF5ZXJOYW1lOiBsYXllck5hbWVcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdENoYW5nZU9mZmxpbmVFbmQobGF5ZXJOYW1lLCBzdGF0ZSkge1xyXG4gICQuZXZlbnQudHJpZ2dlcih7XHJcbiAgICB0eXBlOiAnY2hhbmdlT2ZmbGluZUVuZCcsXHJcbiAgICBsYXllck5hbWU6IGxheWVyTmFtZSxcclxuICAgIHN0YXRlOiBzdGF0ZVxyXG4gIH0pO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgbGF5ZXJDcmVhdG9yID0gcmVxdWlyZSgnLi4vbGF5ZXJjcmVhdG9yJyk7XHJcblxyXG52YXIgb2ZmbGluZUxheWVyID0gZnVuY3Rpb24gb2ZmbGluZUxheWVyKCkge1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc2V0T2ZmbGluZVNvdXJjZTogc2V0T2ZmbGluZVNvdXJjZSxcclxuICAgIHNldE9ubGluZVNvdXJjZTogc2V0T25saW5lU291cmNlXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRPZmZsaW5lU291cmNlKGxheWVyTmFtZSwgZmVhdHVyZXMpIHtcclxuICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmFyIHNvdXJjZTtcclxuICAgIHZhciBvcHRpb25zO1xyXG4gICAgbGF5ZXIuc2V0KCd0eXBlJywgJ09GRkxJTkUnKTtcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBmZWF0dXJlIGxheWVyIGFuZCBnZXQgdGhlIHNvdXJjZVxyXG4gICAgb3B0aW9ucyA9IGxheWVyLmdldFByb3BlcnRpZXMoKTtcclxuICAgIG9wdGlvbnMudHlwZSA9ICdGRUFUVVJFJztcclxuICAgIG9wdGlvbnMuZmVhdHVyZXMgPSBmZWF0dXJlcztcclxuICAgIG9wdGlvbnMuc3R5bGUgPSBvcHRpb25zLnN0eWxlTmFtZTtcclxuICAgIHNvdXJjZSA9IGxheWVyQ3JlYXRvcihvcHRpb25zKS5nZXRTb3VyY2UoKTtcclxuICAgIGxheWVyLnNldFNvdXJjZShzb3VyY2UpO1xyXG4gICAgcmV0dXJuIGxheWVyO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0T25saW5lU291cmNlKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2YXIgc291cmNlO1xyXG4gICAgdmFyIG9wdGlvbnM7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgbGF5ZXIgd2l0aCB0aGUgb25saW5lIHNvdXJjZSBhbmQgZ2V0IHRoZSBzb3VyY2VcclxuICAgIGxheWVyLnNldCgndHlwZScsIGxheWVyLmdldCgnb25saW5lVHlwZScpKTtcclxuICAgIG9wdGlvbnMgPSBsYXllci5nZXRQcm9wZXJ0aWVzKCk7XHJcbiAgICBvcHRpb25zLnNvdXJjZSA9IG9wdGlvbnMuc291cmNlTmFtZTtcclxuICAgIG9wdGlvbnMuc3R5bGUgPSBvcHRpb25zLnN0eWxlTmFtZTtcclxuICAgIHNvdXJjZSA9IGxheWVyQ3JlYXRvcihvcHRpb25zKS5nZXRTb3VyY2UoKTtcclxuICAgIGxheWVyLnNldFNvdXJjZShzb3VyY2UpO1xyXG4gICAgcmV0dXJuIGxheWVyO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBvZmZsaW5lTGF5ZXI7XHJcbiIsInZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgbG9jYWxmb3JhZ2UgPSByZXF1aXJlKCdsb2NhbGZvcmFnZScpO1xyXG52YXIgb2ZmbGluZUxheWVyID0gcmVxdWlyZSgnLi9vZmZsaW5lbGF5ZXInKSgpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vb2ZmbGluZWRpc3BhdGNoZXInKTtcclxudmFyIGVkaXRvckRpc3BhdGNoZXIgPSByZXF1aXJlKCcuLi9lZGl0b3IvZWRpdGRpc3BhdGNoZXInKTtcclxudmFyIGZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuR2VvSlNPTigpO1xyXG52YXIgc3RvcmFnZSA9IHt9O1xyXG52YXIgZWRpdHNTdG9yYWdlID0ge307XHJcbnZhciBvZmZsaW5lTGF5ZXJzID0ge307XHJcbnZhciBzdG9yYWdlTmFtZTtcclxudmFyIGVkaXRzU3RvcmFnZU5hbWU7XHJcbnZhciBtYXA7XHJcblxyXG5mdW5jdGlvbiBvZmZsaW5lU3RvcmUoKSB7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBnZXRPZmZsaW5lTGF5ZXJzOiBnZXRPZmZsaW5lTGF5ZXJzLFxyXG4gICAgZ2V0T2ZmbGluZUxheWVyOiBnZXRPZmZsaW5lTGF5ZXIsXHJcbiAgICBnZXRPZmZsaW5lRWRpdHM6IGdldE9mZmxpbmVFZGl0cyxcclxuICAgIGdldEVkaXRzSXRlbXM6IGdldEVkaXRzSXRlbXMsXHJcbiAgICBpbml0OiBJbml0XHJcbiAgfTtcclxuXHJcbiAgZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICAgIHZhciBsYXllck5hbWVzO1xyXG4gICAgbWFwID0gdmlld2VyLmdldE1hcCgpO1xyXG4gICAgc3RvcmFnZU5hbWUgPSBvcHRpb25zLm5hbWUgfHwgJ29yaWdvLWxheWVycyc7XHJcbiAgICBlZGl0c1N0b3JhZ2VOYW1lID0gb3B0aW9ucy5lZGl0c05hbWUgfHwgJ29yaWdvLWxheWVycy1lZGl0cyc7XHJcbiAgICBsYXllck5hbWVzID0gdmlld2VyLmdldExheWVyc0J5UHJvcGVydHkoJ29mZmxpbmUnLCB0cnVlLCB0cnVlKTtcclxuICAgIHNldE9mZmxpbmVMYXllcnMobGF5ZXJOYW1lcyk7XHJcbiAgICBzdG9yYWdlID0gY3JlYXRlSW5zdGFuY2VzKGxheWVyTmFtZXMsIHN0b3JhZ2VOYW1lKTtcclxuICAgIGVkaXRzU3RvcmFnZSA9IGNyZWF0ZUluc3RhbmNlcyhsYXllck5hbWVzLCBlZGl0c1N0b3JhZ2VOYW1lKTtcclxuICAgIGluaXRMYXllcnMoKTtcclxuXHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlT2ZmbGluZScsIG9uQ2hhbmdlT2ZmbGluZSk7XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlT2ZmbGluZUVkaXRzJywgb25DaGFuZ2VPZmZsaW5lRWRpdHMpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2VzKGxheWVyTmFtZXMsIG5hbWUpIHtcclxuICAgIHZhciBpbnN0YW5jZXMgPSB7fTtcclxuICAgIGxheWVyTmFtZXMuZm9yRWFjaChmdW5jdGlvbihsYXllck5hbWUpIHtcclxuICAgICAgaW5zdGFuY2VzW2xheWVyTmFtZV0gPSBsb2NhbGZvcmFnZS5jcmVhdGVJbnN0YW5jZSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBzdG9yZU5hbWU6IGxheWVyTmFtZVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBpbnN0YW5jZXM7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRPZmZsaW5lTGF5ZXJzKCkge1xyXG4gICAgcmV0dXJuIG9mZmxpbmVMYXllcnM7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRPZmZsaW5lTGF5ZXIobGF5ZXJOYW1lKSB7XHJcbiAgICByZXR1cm4gb2ZmbGluZUxheWVyc1tsYXllck5hbWVdO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0T2ZmbGluZUVkaXRzKGxheWVyTmFtZSkge1xyXG4gICAgaWYgKG9mZmxpbmVMYXllcnNbbGF5ZXJOYW1lXS5lZGl0cykge1xyXG4gICAgICByZXR1cm4gZ2V0RWRpdHNJdGVtcyhsYXllck5hbWUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldE9mZmxpbmVMYXllcnMobGF5ZXJOYW1lcykge1xyXG4gICAgbGF5ZXJOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyTmFtZSkge1xyXG4gICAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgICAgbGF5ZXIuc2V0KCdvbmxpbmVUeXBlJywgbGF5ZXIuZ2V0KCd0eXBlJykpO1xyXG4gICAgICBvZmZsaW5lTGF5ZXJzW2xheWVyTmFtZV0gPSBjcmVhdGVPZmZsaW5lT2JqKCk7XHJcbiAgICAgIG9mZmxpbmVMYXllci5zZXRPZmZsaW5lU291cmNlKGxheWVyTmFtZSwgW10pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkNoYW5nZU9mZmxpbmUoZSkge1xyXG4gICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgIGlmIChlLmFjdGlvbiA9PT0gJ2Rvd25sb2FkJykge1xyXG4gICAgICBvbkRvd25sb2FkKGUubGF5ZXJOYW1lKVxyXG4gICAgfSBlbHNlIGlmIChlLmFjdGlvbiA9PT0gJ2VkaXRzJykge1xyXG4gICAgICBvbmRFZGl0cyhlLmxheWVyTmFtZSwgZS5pZHMpO1xyXG4gICAgfSBlbHNlIGlmIChlLmFjdGlvbiA9PT0gJ3JlbW92ZScpIHtcclxuICAgICAgb25SZW1vdmUoZS5sYXllck5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25DaGFuZ2VPZmZsaW5lRWRpdHMoZSkge1xyXG4gICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcclxuICAgIGlmIChlZGl0c1N0b3JhZ2VbZS5sYXllck5hbWVdKSB7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZWRpdHNTdG9yYWdlW2UubGF5ZXJOYW1lXSA9IGxvY2FsZm9yYWdlLmNyZWF0ZUluc3RhbmNlKHtcclxuICAgICAgICBuYW1lOiBlZGl0c1N0b3JhZ2VOYW1lLFxyXG4gICAgICAgIHN0b3JlTmFtZTogZS5sYXllck5hbWVcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZS5lZGl0cy51cGRhdGUpIHtcclxuICAgICAgc2F2ZVVwZGF0ZShlLmVkaXRzLnVwZGF0ZSwgZS5sYXllck5hbWUpO1xyXG4gICAgfVxyXG4gICAgaWYgKGUuZWRpdHMuaW5zZXJ0KSB7XHJcbiAgICAgIHNhdmVJbnNlcnQoZS5lZGl0cy5pbnNlcnQsIGUubGF5ZXJOYW1lKTtcclxuICAgIH1cclxuICAgIGlmIChlLmVkaXRzLmRlbGV0ZSkge1xyXG4gICAgICBzYXZlRGVsZXRlKGUuZWRpdHMuZGVsZXRlLCBlLmxheWVyTmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkRvd25sb2FkKGxheWVyTmFtZSkge1xyXG4gICAgaWYgKG9mZmxpbmVMYXllcnNbbGF5ZXJOYW1lXS5kb3dubG9hZGVkKSB7XHJcbiAgICAgIHN0b3JhZ2VbbGF5ZXJOYW1lXS5jbGVhcigpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzYXZlRmVhdHVyZXNUb1N0b3JhZ2UobGF5ZXJOYW1lKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHNhdmVGZWF0dXJlc1RvU3RvcmFnZShsYXllck5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25kRWRpdHMobGF5ZXJOYW1lLCBpZHMpIHtcclxuICAgIHZhciBwcm9taXNlcyA9IGlkcy5tYXAoZnVuY3Rpb24oaWQpIHtcclxuICAgICAgcmV0dXJuIHJlbW92ZUZyb21FZGl0c1N0b3JhZ2UoaWQsIGxheWVyTmFtZSk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uUmVtb3ZlKGxheWVyTmFtZSkge1xyXG4gICAgaWYgKG9mZmxpbmVMYXllcnNbbGF5ZXJOYW1lXS5lZGl0cykge1xyXG4gICAgICB2YXIgcHJvY2VlZCA9IGNvbmZpcm0oJ0R1IGhhciBmb3J0ZmFyYW5kZSBvZmZsaW5lLcOkbmRyaW5nYXIgc29tIGludGUgw6RyIHNwYXJhZGUuIE9tIGR1IGZvcnRzw6R0dGVyIGtvbW1lciBkZXNzYSBhdHQgZsO2cnN2aW5uYS4nKTtcclxuICAgICAgaWYgKHByb2NlZWQpIHtcclxuICAgICAgICByZW1vdmVEb3dubG9hZGVkKGxheWVyTmFtZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlbW92ZURvd25sb2FkZWQobGF5ZXJOYW1lKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZURvd25sb2FkZWQobGF5ZXJOYW1lKSB7XHJcbiAgICBpZiAob2ZmbGluZUxheWVyc1tsYXllck5hbWVdKSB7XHJcbiAgICAgIHJldHVybiBzdG9yYWdlW2xheWVyTmFtZV0uY2xlYXIoKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2V0TGF5ZXJPbmxpbmUobGF5ZXJOYW1lKTtcclxuICAgICAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmVFbmQobGF5ZXJOYW1lLCAnZG93bmxvYWQnKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZU9mZmxpbmVPYmooKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBkb3dubG9hZGVkOiBmYWxzZSxcclxuICAgICAgZWRpdHM6IGZhbHNlXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXREb3dubG9hZGVkKGxheWVyTmFtZSwgZG93bmxvYWRlZCkge1xyXG4gICAgaWYgKGRvd25sb2FkZWQpIHtcclxuICAgICAgb2ZmbGluZUxheWVyc1tsYXllck5hbWVdLmRvd25sb2FkZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb2ZmbGluZUxheWVyc1tsYXllck5hbWVdLmRvd25sb2FkZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldEVkaXRzKGxheWVyTmFtZSwgZWRpdHMpIHtcclxuICAgIGlmIChlZGl0cykge1xyXG4gICAgICBvZmZsaW5lTGF5ZXJzW2xheWVyTmFtZV0uZWRpdHMgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgb2ZmbGluZUxheWVyc1tsYXllck5hbWVdLmVkaXRzID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzYXZlRmVhdHVyZXNUb1N0b3JhZ2UobGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgZmVhdHVyZXM7XHJcbiAgICBpZiAoc3RvcmFnZVtsYXllck5hbWVdKSB7XHJcbiAgICAgIGZlYXR1cmVzID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSkuZ2V0U291cmNlKCkuZ2V0RmVhdHVyZXMoKTtcclxuICAgICAgc2V0SXRlbXMobGF5ZXJOYW1lLCBmZWF0dXJlcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhsYXllck5hbWUgKyAnIGlzIG1pc3NpbmcgaW4gc3RvcmFnZScpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0SXRlbXMobGF5ZXJOYW1lLCBmZWF0dXJlcykge1xyXG4gICAgdmFyIHByb21pc2VzID0gZmVhdHVyZXMubWFwKGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgdmFyIGlkID0gZmVhdHVyZS5nZXRJZCgpO1xyXG4gICAgICB2YXIgb2JqID0gZm9ybWF0LndyaXRlRmVhdHVyZU9iamVjdChmZWF0dXJlKTtcclxuICAgICAgcmV0dXJuIHN0b3JhZ2VbbGF5ZXJOYW1lXS5zZXRJdGVtKGlkLCBvYmopO1xyXG4gICAgfSk7XHJcbiAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihyZXN1bHRzKSB7XHJcbiAgICAgIHNldExheWVyT2ZmbGluZShsYXllck5hbWUsIGZlYXR1cmVzKTtcclxuICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlT2ZmbGluZUVuZChsYXllck5hbWUsICdvZmZsaW5lJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldEl0ZW1zKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2YXIgZ2VvbWV0cnlOYW1lID0gbGF5ZXIuZ2V0KCdnZW9tZXRyeU5hbWUnKTtcclxuICAgIHZhciBmZWF0dXJlcyA9IFtdO1xyXG4gICAgcmV0dXJuIHN0b3JhZ2VbbGF5ZXJOYW1lXS5pdGVyYXRlKGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4KSB7XHJcbiAgICAgICAgdmFyIHN0b3JlZEZlYXR1cmUgPSBmb3JtYXQucmVhZEZlYXR1cmUodmFsdWUpO1xyXG4gICAgICAgIHZhciBmZWF0dXJlID0gcmVzdG9yZUdlb21ldHJ5TmFtZShzdG9yZWRGZWF0dXJlLCBnZW9tZXRyeU5hbWUpO1xyXG4gICAgICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBmZWF0dXJlcztcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRFZGl0c0l0ZW1zKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgIHJldHVybiBlZGl0c1N0b3JhZ2VbbGF5ZXJOYW1lXS5pdGVyYXRlKGZ1bmN0aW9uKHZhbHVlLCBrZXksIGluZGV4KSB7XHJcbiAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgIG9ialtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgaXRlbXMucHVzaChvYmopO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gaXRlbXM7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaW5pdExheWVycygpIHtcclxuICAgIHZhciBsYXllck5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoc3RvcmFnZSk7XHJcbiAgICBsYXllck5hbWVzLmZvckVhY2goZnVuY3Rpb24obGF5ZXJOYW1lKSB7XHJcbiAgICAgIGdldEl0ZW1zKGxheWVyTmFtZSkudGhlbihmdW5jdGlvbihmZWF0dXJlcykge1xyXG4gICAgICAgIHZhciBsYXllcjtcclxuICAgICAgICBpZiAoZmVhdHVyZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICBzZXRMYXllck9mZmxpbmUobGF5ZXJOYW1lLCBmZWF0dXJlcyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNldExheWVyT25saW5lKGxheWVyTmFtZSwgZmVhdHVyZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGdldEVkaXRzSXRlbXMobGF5ZXJOYW1lKS50aGVuKGZ1bmN0aW9uKGl0ZW1zKSB7XHJcbiAgICAgICAgdmFyIGxheWVyO1xyXG4gICAgICAgIGlmIChpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgIHNldEVkaXRzKGxheWVyTmFtZSwgdHJ1ZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNldEVkaXRzKGxheWVyTmFtZSwgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldExheWVyT2ZmbGluZShsYXllck5hbWUsIGZlYXR1cmVzKSB7XHJcbiAgICBvZmZsaW5lTGF5ZXIuc2V0T2ZmbGluZVNvdXJjZShsYXllck5hbWUsIGZlYXR1cmVzKTtcclxuICAgIHNldERvd25sb2FkZWQobGF5ZXJOYW1lLCB0cnVlKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldExheWVyT25saW5lKGxheWVyTmFtZSkge1xyXG4gICAgb2ZmbGluZUxheWVyLnNldE9ubGluZVNvdXJjZShsYXllck5hbWUpO1xyXG4gICAgc2V0RG93bmxvYWRlZChsYXllck5hbWUsIGZhbHNlKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNhdmVVcGRhdGUodXBkYXRlcywgbGF5ZXJOYW1lKSB7XHJcbiAgICB1cGRhdGVzLmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XHJcbiAgICAgIHZhciBhY3Rpb24gPSAndXBkYXRlJztcclxuICAgICAgZWRpdHNTdG9yYWdlW2xheWVyTmFtZV0uZ2V0SXRlbShpZClcclxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgc2F2ZVRvRWRpdHNTdG9yYWdlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNhdmVGZWF0dXJlVG9TdG9yYWdlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2F2ZUluc2VydChpbnNlcnRzLCBsYXllck5hbWUpIHtcclxuICAgIGluc2VydHMuZm9yRWFjaChmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgIHZhciBhY3Rpb24gPSAnaW5zZXJ0JztcclxuICAgICAgc2F2ZVRvRWRpdHNTdG9yYWdlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2F2ZURlbGV0ZShkZWxldGVzLCBsYXllck5hbWUpIHtcclxuICAgIGRlbGV0ZXMuZm9yRWFjaChmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgIHZhciBpZCA9IGZlYXR1cmUuZ2V0SWQoKTtcclxuICAgICAgdmFyIGFjdGlvbiA9ICdkZWxldGUnO1xyXG4gICAgICBlZGl0c1N0b3JhZ2VbbGF5ZXJOYW1lXS5nZXRJdGVtKGlkKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzYXZlVG9FZGl0c1N0b3JhZ2UoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pO1xyXG4gICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09ICdpbnNlcnQnKSB7XHJcbiAgICAgICAgICAgIHJlbW92ZUZyb21FZGl0c1N0b3JhZ2UoZmVhdHVyZS5nZXRJZCgpLCBsYXllck5hbWUpXHJcbiAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBlbWl0Q2hhbmdlRmVhdHVyZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzYXZlRmVhdHVyZVRvU3RvcmFnZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNhdmVUb0VkaXRzU3RvcmFnZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbikge1xyXG4gICAgdmFyIGlkID0gZmVhdHVyZS5nZXRJZCgpO1xyXG4gICAgZWRpdHNTdG9yYWdlW2xheWVyTmFtZV0uc2V0SXRlbShpZCwgYWN0aW9uKVxyXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICBzZXRFZGl0cyhsYXllck5hbWUsIHRydWUpO1xyXG4gICAgICAgIHNhdmVGZWF0dXJlVG9TdG9yYWdlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW1vdmVGcm9tRWRpdHNTdG9yYWdlKGlkLCBsYXllck5hbWUpIHtcclxuICAgIHJldHVybiBlZGl0c1N0b3JhZ2VbbGF5ZXJOYW1lXS5yZW1vdmVJdGVtKGlkKVxyXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICBlZGl0c1N0b3JhZ2VbbGF5ZXJOYW1lXS5sZW5ndGgoKVxyXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24obnIpIHtcclxuICAgICAgICAgICAgaWYgKG5yID4gMCkge1xyXG4gICAgICAgICAgICAgIHNldEVkaXRzKGxheWVyTmFtZSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgc2V0RWRpdHMobGF5ZXJOYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNhdmVGZWF0dXJlVG9TdG9yYWdlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKSB7XHJcbiAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XHJcbiAgICBzdG9yYWdlW2xheWVyTmFtZV0uc2V0SXRlbShpZCwgZm9ybWF0LndyaXRlRmVhdHVyZU9iamVjdChmZWF0dXJlKSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZW1pdENoYW5nZUZlYXR1cmUoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGVtaXRDaGFuZ2VGZWF0dXJlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKSB7XHJcbiAgICBlZGl0b3JEaXNwYXRjaGVyLmVtaXRDaGFuZ2VGZWF0dXJlKHtcclxuICAgICAgZmVhdHVyZTogW2ZlYXR1cmVdLFxyXG4gICAgICBsYXllck5hbWU6IGxheWVyTmFtZSxcclxuICAgICAgc3RhdHVzOiAnZmluaXNoZWQnLFxyXG4gICAgICBhY3Rpb246IGFjdGlvblxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZXN0b3JlR2VvbWV0cnlOYW1lKGZlYXR1cmUsIGdlb21ldHJ5TmFtZSkge1xyXG4gICAgdmFyIGdlb21ldHJ5ID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xyXG4gICAgZmVhdHVyZS51bnNldChmZWF0dXJlLmdldEdlb21ldHJ5TmFtZSgpKTtcclxuICAgIGZlYXR1cmUuc2V0R2VvbWV0cnlOYW1lKGdlb21ldHJ5TmFtZSk7XHJcbiAgICBmZWF0dXJlLnNldEdlb21ldHJ5KGdlb21ldHJ5KTtcclxuICAgIHJldHVybiBmZWF0dXJlO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gb2ZmbGluZVN0b3JlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmVyaWZ5RmVhdHVyZUlkcyA9IHJlcXVpcmUoJy4vdmVyaWZ5ZmVhdHVyZWlkcycpO1xyXG5cclxudmFyIHRvcG9Kc29uID0ge307XHJcbnRvcG9Kc29uLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGxheWVyKSB7XHJcbiAgdmFyIHNvdXJjZSA9IGxheWVyLmdldCgnc291cmNlTmFtZScpO1xyXG4gIHZhciByZXF1ZXN0ID0gY3JlYXRlUmVxdWVzdChzb3VyY2UpO1xyXG4gIHJldHVybiByZXF1ZXN0O1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KHNvdXJjZSkge1xyXG4gICAgdmFyIGZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuVG9wb0pTT04oKTtcclxuICAgIHZhciB1cmwgPSBzb3VyY2U7XHJcblxyXG4gICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgY2FjaGU6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgdmFyIGZlYXR1cmVzID0gZm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSk7XHJcbiAgICAgICAgZmVhdHVyZXMgPSB2ZXJpZnlGZWF0dXJlSWRzKGZlYXR1cmVzKTtcclxuICAgICAgICByZXR1cm4gZmVhdHVyZXM7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB0b3BvSnNvbjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBnZW5lcmF0ZVVVSUQgPSByZXF1aXJlKCcuLi91dGlscy9nZW5lcmF0ZXV1aWQnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdmVyaWZ5RmVhdHVyZUlkcyhmZWF0dXJlcykge1xyXG4gIGlmIChmZWF0dXJlc1swXSkge1xyXG4gICAgaWYgKGZlYXR1cmVzWzBdLmdldElkKCkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICBmZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgICBmZWF0dXJlLnNldElkKGdlbmVyYXRlVVVJRCgpKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBmZWF0dXJlcztcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciB3ZnNUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4uL2VkaXRvci93ZnN0cmFuc2FjdGlvbicpO1xyXG5cclxudmFyIHdmcyA9IHt9O1xyXG53ZnMucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QobGF5ZXIpIHtcclxuICB2YXIgc291cmNlT3B0aW9ucyA9IHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllci5nZXQoJ3NvdXJjZU5hbWUnKV07XHJcbiAgc291cmNlT3B0aW9ucy5mZWF0dXJlVHlwZSA9IGxheWVyLmdldCgnbmFtZScpLnNwbGl0KCdfXycpLnNoaWZ0KCk7XHJcbiAgc291cmNlT3B0aW9ucy5nZW9tZXRyeU5hbWUgPSBsYXllci5nZXQoJ2dlb21ldHJ5TmFtZScpO1xyXG4gIHNvdXJjZU9wdGlvbnMuZmlsdGVyID0gbGF5ZXIuZ2V0KCdmaWx0ZXInKTtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgc291cmNlT3B0aW9ucy5leHRlbnQgPSBsYXllci5nZXQoJ2V4dGVudCcpO1xyXG4gIHNvdXJjZU9wdGlvbnMucHJvamVjdGlvbkNvZGUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuXHJcbiAgdmFyIHJlcXVlc3QgPSBjcmVhdGVSZXF1ZXN0KHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiByZXF1ZXN0O1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVSZXF1ZXN0KG9wdGlvbnMpIHtcclxuICAgIHZhciBmb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oe1xyXG4gICAgICBnZW9tZXRyeU5hbWU6IG9wdGlvbnMuZ2VvbWV0cnlOYW1lXHJcbiAgICB9KTtcclxuXHJcbiAgICB2YXIgc2VydmVyVXJsID0gb3B0aW9ucy51cmw7XHJcbiAgICB2YXIgcXVlcnlGaWx0ZXI7XHJcbiAgICB2YXIgdXJsO1xyXG5cclxuICAgIC8vSWYgY3FsIGZpbHRlciB0aGVuIGJib3ggbXVzdCBiZSB1c2VkIGluIHRoZSBmaWx0ZXIuXHJcbiAgICBpZiAob3B0aW9ucy5maWx0ZXIpIHtcclxuICAgICAgcXVlcnlGaWx0ZXIgPSAnJkNRTF9GSUxURVI9JyArIG9wdGlvbnMuZmlsdGVyICtcclxuICAgICAgICAnIEFORCBCQk9YKCcgKyBvcHRpb25zLmdlb21ldHJ5TmFtZSArICcsJyArXHJcbiAgICAgICAgb3B0aW9ucy5leHRlbnQuam9pbignLCcpICsgJywnICtcclxuICAgICAgICBcIidcIiArIG9wdGlvbnMucHJvamVjdGlvbkNvZGUgKyBcIicpXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBxdWVyeUZpbHRlciA9ICcmQkJPWD0nICtcclxuICAgICAgICBvcHRpb25zLmV4dGVudC5qb2luKCcsJykgKyAnLCcgKyBvcHRpb25zLnByb2plY3Rpb25Db2RlO1xyXG4gICAgfVxyXG5cclxuICAgIHVybCA9IHNlcnZlclVybCArXHJcbiAgICAgICc/c2VydmljZT1XRlMmJyArXHJcbiAgICAgICd2ZXJzaW9uPTEuMS4wJnJlcXVlc3Q9R2V0RmVhdHVyZSZ0eXBlTmFtZT0nICsgb3B0aW9ucy5mZWF0dXJlVHlwZSArXHJcbiAgICAgICcmb3V0cHV0Rm9ybWF0PWFwcGxpY2F0aW9uL2pzb24nICtcclxuICAgICAgJyZzcnNuYW1lPScgKyBvcHRpb25zLnByb2plY3Rpb25Db2RlICtcclxuICAgICAgcXVlcnlGaWx0ZXI7XHJcblxyXG4gICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgY2FjaGU6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZvcm1hdC5yZWFkRmVhdHVyZXMocmVzcG9uc2UpO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbndmcy50cmFuc2FjdGlvbiA9IGZ1bmN0aW9uKHRyYW5zT2JqLCBsYXllck5hbWUpIHtcclxuICByZXR1cm4gd2ZzVHJhbnNhY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gd2ZzO1xyXG4iLCIvKnJlcXVpcmVzIE1vZGFsLmpzKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgcGVybWFsaW5rUGFyc2VyID0gcmVxdWlyZSgnLi9wZXJtYWxpbmtwYXJzZXInKTtcclxudmFyIHBlcm1hbGlua1N0b3JlID0gcmVxdWlyZSgnLi9wZXJtYWxpbmtzdG9yZScpO1xyXG52YXIgdXJscGFyc2VyID1yZXF1aXJlKCcuLi91dGlscy91cmxwYXJzZXInKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XHJcblxyXG5yZXR1cm4ge1xyXG4gICAgZ2V0UGVybWFsaW5rOiBmdW5jdGlvbiBnZXRQZXJtYWxpbmsob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBoYXNoID0gdXJscGFyc2VyLmZvcm1hdFVybChwZXJtYWxpbmtTdG9yZS5nZXRTdGF0ZSgpKTtcclxuICAgICAgICB2YXIgdXJsID0gcGVybWFsaW5rU3RvcmUuZ2V0VXJsKCkgKyBcIiNcIiArIGhhc2g7XHJcbiAgICAgICAgcmV0dXJuKHVybCk7XHJcbiAgICB9LFxyXG4gICAgcGFyc2VQZXJtYWxpbms6IGZ1bmN0aW9uIHBhcnNlUGVybWFsaW5rKHVybCkge1xyXG4gICAgICAgIGlmKHVybC5pbmRleE9mKCcjJykgPiAtMSkge1xyXG4gICAgICAgICAgICB2YXIgdXJsU2VhcmNoID0gdXJsLnNwbGl0KCcjJylbMV07XHJcbiAgICAgICAgICAgIHZhciB1cmxQYXJ0cyA9IHVybFNlYXJjaC5zcGxpdCgnJicpO1xyXG4gICAgICAgICAgICB2YXIgdXJsQXNPYmogPSB7fTtcclxuICAgICAgICAgICAgdXJsUGFydHMuZm9yRWFjaChmdW5jdGlvbihwYXJ0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gcGFydC5zcGxpdCgnPScpWzBdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IHBhcnQuc3BsaXQoJz0nKVsxXTtcclxuICAgICAgICAgICAgICAgIGlmKHBlcm1hbGlua1BhcnNlci5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXJsQXNPYmpba2V5XSA9IHBlcm1hbGlua1BhcnNlcltrZXldKHZhbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gdXJsQXNPYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59O1xyXG59KCk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgdXJscGFyc2VyID0gcmVxdWlyZSgnLi4vdXRpbHMvdXJscGFyc2VyJyk7XHJcblxyXG52YXIgbGF5ZXJNb2RlbCA9IHtcclxuICAgIHY6IHtcclxuICAgICAgbmFtZTogXCJ2aXNpYmxlXCIsXHJcbiAgICAgIGRhdGFUeXBlOiBcImJvb2xlYW5cIlxyXG4gICAgfSxcclxuICAgIHM6IHtcclxuICAgICAgbmFtZTogXCJsZWdlbmRcIixcclxuICAgICAgZGF0YVR5cGU6IFwiYm9vbGVhblwiXHJcbiAgICB9LFxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBsYXllcnM6IGZ1bmN0aW9uKGxheWVyc1N0cikge1xyXG4gICAgICB2YXIgbGF5ZXJzID0gbGF5ZXJzU3RyLnNwbGl0KCcsJyk7XHJcbiAgICAgIHZhciBsYXllck9iamVjdHMgPSB7fTtcclxuICAgICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgICAgICAgIHZhciBvYmogPSB7fTtcclxuICAgICAgICAgIHZhciBsYXllck9iamVjdCA9IHVybHBhcnNlci5vYmplY3RpZnkobGF5ZXIse3RvcG1vc3Q6IFwibmFtZVwifSk7XHJcbiAgICAgICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhsYXllck9iamVjdCkuZm9yRWFjaChmdW5jdGlvbihwcm9wKSB7XHJcbiAgICAgICAgICAgICAgdmFyIHZhbCA9IGxheWVyT2JqZWN0W3Byb3BdO1xyXG4gICAgICAgICAgICAgIGlmKGxheWVyTW9kZWwuaGFzT3duUHJvcGVydHkocHJvcCkpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IGxheWVyTW9kZWxbcHJvcF07XHJcbiAgICAgICAgICAgICAgICAgIG9ialthdHRyaWJ1dGUubmFtZV0gPSB1cmxwYXJzZXIuc3RyQm9vbGVhbih2YWwpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgb2JqW3Byb3BdID0gdmFsO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgbGF5ZXJPYmplY3RzW29iai5uYW1lXSA9IG9iajtcclxuXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gbGF5ZXJPYmplY3RzO1xyXG4gIH0sXHJcbiAgem9vbTogZnVuY3Rpb24oem9vbVN0cikge1xyXG4gICAgICByZXR1cm4gcGFyc2VJbnQoem9vbVN0cik7XHJcbiAgfSxcclxuICBjZW50ZXI6IGZ1bmN0aW9uKGNlbnRlclN0cikge1xyXG4gICAgICB2YXIgY2VudGVyID0gY2VudGVyU3RyLnNwbGl0KFwiLFwiKS5tYXAoZnVuY3Rpb24oY29vcmQpIHtcclxuICAgICAgICAgIHJldHVybiBwYXJzZUludChjb29yZCk7XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gY2VudGVyO1xyXG4gIH0sXHJcbiAgc2VsZWN0aW9uOiBmdW5jdGlvbihzZWxlY3Rpb25TdHIpIHtcclxuICAgICAgcmV0dXJuIHVybHBhcnNlci5zdHJBcnJheWlmeShzZWxlY3Rpb25TdHIsIHtcclxuICAgICAgICB0b3Btb3N0TmFtZTogXCJnZW9tZXRyeVR5cGVcIixcclxuICAgICAgICBhcnJOYW1lOiBcImNvb3JkaW5hdGVzXCJ9XHJcbiAgICAgICk7XHJcbiAgfSxcclxuICBwaW46IGZ1bmN0aW9uKHBpblN0cikge1xyXG4gICAgICByZXR1cm4gdXJscGFyc2VyLnN0ckludGlmeShwaW5TdHIpO1xyXG4gIH0sXHJcbiAgbWFwOiBmdW5jdGlvbihtYXBTdHIpIHtcclxuICAgICAgcmV0dXJuIG1hcFN0cjtcclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBzZWxlY3Rpb24gPSByZXF1aXJlKCcuLi9mZWF0dXJlaW5mbycpWydnZXRTZWxlY3Rpb24nXTtcclxudmFyIGdldFBpbiA9IHJlcXVpcmUoJy4uL2ZlYXR1cmVpbmZvJylbJ2dldFBpbiddO1xyXG52YXIgdXJscGFyc2VyID1yZXF1aXJlKCcuLi91dGlscy91cmxwYXJzZXInKTtcclxuXHJcbnZhciBwZXJtYWxpbmtTdG9yZSA9IHt9O1xyXG52YXIgc3RhdGU7XHJcbnZhciB1cmw7XHJcblxyXG5wZXJtYWxpbmtTdG9yZS5nZXRTdGF0ZSA9IGZ1bmN0aW9uIGdldFN0YXRlKCkge1xyXG4gICAgc3RhdGUgPSB7fTtcclxuICAgIHZhciB2aWV3ID0gdmlld2VyLmdldE1hcCgpLmdldFZpZXcoKTtcclxuICAgIHZhciBsYXllcnMgPSB2aWV3ZXIuZ2V0TGF5ZXJzKCk7XHJcbiAgICBzdGF0ZS5sYXllcnMgPSBnZXRTYXZlTGF5ZXJzKGxheWVycyk7XHJcbiAgICBzdGF0ZS5jZW50ZXIgPSB2aWV3LmdldENlbnRlcigpLm1hcChmdW5jdGlvbihjb29yZCkge1xyXG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGNvb3JkKTtcclxuICAgIH0pLmpvaW4oKTtcclxuICAgIHN0YXRlLnpvb20gPSB2aWV3LmdldFpvb20oKS50b1N0cmluZygpO1xyXG4gICAgLy8gc3RhdGUuc2VsZWN0aW9uID0gZ2V0U2F2ZVNlbGVjdGlvbihzZWxlY3Rpb24oKSk7XHJcbiAgICBpZiAoZ2V0UGluKCkpIHtcclxuICAgICAgICBzdGF0ZS5waW4gPSBnZXRQaW4oKS5nZXRHZW9tZXRyeSgpLmdldENvb3JkaW5hdGVzKCkubWFwKGZ1bmN0aW9uKGNvb3JkKSB7XHJcbiAgICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChjb29yZCk7XHJcbiAgICAgICAgfSkuam9pbigpO1xyXG4gICAgfVxyXG4gICAgaWYgKHZpZXdlci5nZXRNYXBOYW1lKCkpIHtcclxuICAgICAgICBzdGF0ZS5tYXAgPSB2aWV3ZXIuZ2V0TWFwTmFtZSgpLnNwbGl0KCcuJylbMF07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3RhdGU7XHJcbn1cclxucGVybWFsaW5rU3RvcmUuZ2V0VXJsID0gZnVuY3Rpb24oKSB7XHJcbiAgICB1cmwgPSB2aWV3ZXIuZ2V0VXJsKCk7XHJcbiAgICByZXR1cm4gdXJsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTYXZlTGF5ZXJzKGxheWVycykge1xyXG4gICAgdmFyIHNhdmVMYXllcnMgPSBbXTtcclxuICAgIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgICAgdmFyIHNhdmVMYXllciA9IHt9O1xyXG4gICAgICAgIHNhdmVMYXllci52ID0gbGF5ZXIuZ2V0VmlzaWJsZSgpID09PSB0cnVlID8gMSA6IDA7XHJcbiAgICAgICAgc2F2ZUxheWVyLnMgPSBsYXllci5nZXQoJ2xlZ2VuZCcpID09PSB0cnVlID8gMSA6IDA7XHJcbiAgICAgICAgaWYgKHNhdmVMYXllci5zIHx8IHNhdmVMYXllci52KSB7XHJcbiAgICAgICAgICAgIHNhdmVMYXllci5uYW1lID0gbGF5ZXIuZ2V0KCduYW1lJyk7XHJcbiAgICAgICAgICAgIHNhdmVMYXllcnMucHVzaCh1cmxwYXJzZXIuc3RyaW5naWZ5KHNhdmVMYXllciwge3RvcG1vc3Q6ICduYW1lJ30pKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzYXZlTGF5ZXJzO1xyXG59XHJcbmZ1bmN0aW9uIGdldFNhdmVTZWxlY3Rpb24oc2VsZWN0aW9uKSB7XHJcbiAgICByZXR1cm4gdXJscGFyc2VyLmFyclN0cmluZ2lmeShzZWxlY3Rpb24uY29vcmRpbmF0ZXMsIHt0b3Btb3N0OiBzZWxlY3Rpb24uZ2VvbWV0cnlUeXBlfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcGVybWFsaW5rU3RvcmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0YXJnZXQpIHtcclxuICAgIHJlbmRlcih0YXJnZXQpO1xyXG4gICAgYmluZFVJQWN0aW9ucygpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBnZXRFbDogZ2V0RWwsXHJcbiAgICAgICAgc2V0VmlzaWJpbGl0eTogc2V0VmlzaWJpbGl0eSxcclxuICAgICAgICBzZXRUaXRsZTogc2V0VGl0bGUsXHJcbiAgICAgICAgc2V0Q29udGVudDogc2V0Q29udGVudCxcclxuICAgICAgICBjbG9zZVBvcHVwOiBjbG9zZVBvcHVwXHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVuZGVyKHRhcmdldCkge1xyXG4gIHZhciBwb3AgPSAnPGRpdiBpZD1cIm8tcG9wdXBcIj4nICtcclxuICAgICAgJzxkaXYgY2xhc3M9XCJvLXBvcHVwIG8tY2FyZFwiPicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiby1jbG9zZS1idXR0b25cIj48c3ZnIGNsYXNzPVwiby1pY29uLWZhLXRpbWVzXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLXRpbWVzXCI+PC91c2U+PC9zdmc+PC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWNhcmQtdGl0bGVcIj48L2Rpdj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cIm8tY2FyZC1jb250ZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICc8L2Rpdj4nICtcclxuICAgICc8L2Rpdj4nO1xyXG4gICQodGFyZ2V0KS5hcHBlbmQocG9wKTtcclxufVxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICAgJCgnI28tcG9wdXAgLm8tcG9wdXAgLm8tY2xvc2UtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0RWwoKSB7XHJcbiAgICByZXR1cm4gJChcIiNvLXBvcHVwXCIpLmdldCgwKTtcclxufVxyXG5mdW5jdGlvbiBzZXRWaXNpYmlsaXR5KHZpc2libGUpIHtcclxuICAgIHZpc2libGUgPT0gdHJ1ZSA/ICQoJyNvLXBvcHVwIC5vLXBvcHVwJykuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJykgOiAkKCcjby1wb3B1cCAuby1wb3B1cCcpLmNzcygnZGlzcGxheScsICdub25lJyk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VGl0bGUodGl0bGUpIHtcclxuICAgICQoJyNvLXBvcHVwIC5vLWNhcmQtdGl0bGUnKS5odG1sKHRpdGxlKTtcclxufVxyXG5mdW5jdGlvbiBzZXRDb250ZW50KGNvbmZpZykge1xyXG4gICAgY29uZmlnLnRpdGxlID8gJCgnI28tcG9wdXAgLm8tcG9wdXAgLm8tY2FyZC10aXRsZScpLmh0bWwoY29uZmlnLnRpdGxlKTogJCgnI28tcG9wdXAgLm8tcG9wdXAgLm8tY2FyZC10aXRsZScpLmh0bWwoJycpO1xyXG4gICAgY29uZmlnLmNvbnRlbnQgPyAkKCcjby1wb3B1cCAuby1wb3B1cCAuby1jYXJkLWNvbnRlbnQnKS5odG1sKGNvbmZpZy5jb250ZW50KTogJCgnI28tcG9wdXAgLm8tcG9wdXAgLm8tY2FyZC1jb250ZW50JykuaHRtbCgnJyk7XHJcbn1cclxuZnVuY3Rpb24gY2xvc2VQb3B1cCgpIHtcclxuICAgIHNldFZpc2liaWxpdHkoZmFsc2UpO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4vdGVtcGxhdGVzL3ByaW50LmhhbmRsZWJhcnNcIik7XHJcblxyXG52YXIgcHJpbnRXaXRoID0gODAwO1xyXG52YXIgJHByaW50QnV0dG9uO1xyXG52YXIgYXR0cmlidXRpb247XHJcbnZhciBtYXA7XHJcbnZhciBiYXNlVXJsO1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgYXR0cmlidXRpb24gPSBvcHRpb25zLmF0dHJpYnV0aW9uIHx8ICfCqSBMYW50bcOkdGVyaWV0IEdlb2RhdGFzYW12ZXJrYW4nO1xyXG4gIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuICBiYXNlVXJsID0gVmlld2VyLmdldEJhc2VVcmwoKTtcclxuXHJcbiAgcmVuZGVyKCk7XHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgdmFyIGVsID0gdXRpbHMuY3JlYXRlTGlzdEJ1dHRvbih7XHJcbiAgICBpZDogJ28tcHJpbnQnLFxyXG4gICAgaWNvbkNsczogJ28taWNvbi1mYS1wcmludCcsXHJcbiAgICBzcmM6ICcjZmEtcHJpbnQnLFxyXG4gICAgdGV4dDogJ1Nrcml2IHV0J1xyXG4gIH0pO1xyXG4gICQoJyNvLW1lbnV0b29scycpLmFwcGVuZChlbCk7XHJcbiAgJHByaW50QnV0dG9uID0gJCgnI28tcHJpbnQtYnV0dG9uJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgJHByaW50QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICQoJyNhcHAtd3JhcHBlcicpLmFwcGVuZCgnPGNhbnZhcyBpZD1cIm8tcHJpbnRcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmVcIj48L2NhbnZhcz4nKTtcclxuICAgIGNyZWF0ZUltYWdlKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGltYWdlVG9QcmludCgkcHJpbnRDYW52YXMpIHtcclxuICB2YXIgaW1hZ2VDcm9wID0gbmV3IEltYWdlKCk7XHJcbiAgdHJ5IHtcclxuICAgIGltYWdlQ3JvcC5zcmMgPSAkcHJpbnRDYW52YXMuZ2V0KDApLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlKTtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgdmFyIHRlbXBsYXRlT3B0aW9ucyA9IHt9O1xyXG4gICAgdGVtcGxhdGVPcHRpb25zLnNyYyA9IGltYWdlQ3JvcC5zcmM7XHJcbiAgICB0ZW1wbGF0ZU9wdGlvbnMuYXR0cmlidXRpb24gPSBhdHRyaWJ1dGlvbjtcclxuICAgIHRlbXBsYXRlT3B0aW9ucy5sb2dvU3JjID0gYmFzZVVybCArICdjc3MvcG5nL2xvZ29fcHJpbnQucG5nJztcclxuICAgIHZhciBwdyA9IHRlbXBsYXRlKHRlbXBsYXRlT3B0aW9ucyk7XHJcbiAgICB2YXIgcHJpbnRXaW5kb3cgPSB3aW5kb3cub3BlbignJywgJycsICd3aWR0aD04MDAsaGVpZ2h0PTgyMCcpO1xyXG4gICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUocHcpO1xyXG4gICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIHByaW50V2luZG93LnByaW50KCk7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcHJpbnRXaW5kb3cuY2xvc2UoKTtcclxuICAgICAgICAkKCcjby1wcmludCcpLnJlbW92ZSgpO1xyXG4gICAgICB9LCAxMCk7XHJcbiAgICB9LCAyMDApO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlSW1hZ2UoKSB7XHJcbiAgdmFyICRjYW52YXMgPSAkKCdjYW52YXMnKTtcclxuICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIHZhciBpbWFnZVVybCA9ICRjYW52YXMuZ2V0KDApLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlKTtcclxuICB9IGZpbmFsbHkge1xyXG5cclxuICAgIC8vICRwcmludENhbnZhcyA9IGNvcHkgb2Ygb3JpZ2luYWwgbWFwIGNhbnZhc1xyXG4gICAgdmFyICRwcmludENhbnZhcyA9ICQoJyNvLXByaW50Jyk7XHJcbiAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGN0eENhbnZhcyA9ICRwcmludENhbnZhc1swXS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgIC8vd2lkdGggb2YgbWFwIGNhbnZhc1xyXG4gICAgICB2YXIgc291cmNlV2lkdGggPSAkY2FudmFzWzBdLndpZHRoO1xyXG5cclxuICAgICAgLy9oZWlnaHQgb2YgbWFwIGNhbnZhc1xyXG4gICAgICB2YXIgc291cmNlSGVpZ2h0ID0gJGNhbnZhc1swXS5oZWlnaHQ7XHJcblxyXG4gICAgICAvL3NldCB0aGUgd2lkdGggb2YgcHJpbnQgY2FudmFzXHJcbiAgICAgIGlmIChzb3VyY2VXaWR0aCA8IHByaW50V2l0aCkge1xyXG4gICAgICAgICRwcmludENhbnZhc1swXS53aWR0aCA9IHNvdXJjZVdpZHRoO1xyXG4gICAgICB9IGVsc2UgaWYgKHNvdXJjZVdpZHRoID49IHByaW50V2l0aCkge1xyXG4gICAgICAgICRwcmludENhbnZhc1swXS53aWR0aCA9IHByaW50V2l0aDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy9zZXQgdGhlIGhlaWdodCBvZiBwcmludCBjYW52YXNcclxuICAgICAgaWYgKHNvdXJjZUhlaWdodCA8IHByaW50V2l0aCkge1xyXG4gICAgICAgICRwcmludENhbnZhc1swXS5oZWlnaHQgPSBzb3VyY2VIZWlnaHQ7XHJcbiAgICAgIH0gZWxzZSBpZiAoc291cmNlV2lkdGggPj0gcHJpbnRXaXRoKSB7XHJcbiAgICAgICAgJHByaW50Q2FudmFzWzBdLmhlaWdodCA9IHByaW50V2l0aDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY3R4Q2FudmFzLmRyYXdJbWFnZShpbWFnZSwgKHNvdXJjZVdpZHRoIC8gMiAtICRwcmludENhbnZhc1swXS53aWR0aCAvIDIpLCAwLCAkcHJpbnRDYW52YXNbMF0ud2lkdGgsICRwcmludENhbnZhc1swXS5oZWlnaHQsIDAsIDAsICRwcmludENhbnZhc1swXS53aWR0aCwgJHByaW50Q2FudmFzWzBdLmhlaWdodCk7XHJcbiAgICAgIGltYWdlVG9QcmludCgkcHJpbnRDYW52YXMpO1xyXG4gICAgfTtcclxuICAgIGltYWdlLnNyYyA9IGltYWdlVXJsO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IEluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxudmFyIG1hcDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciByb3RhdGVDb250cm9sO1xyXG4gIHZhciBpY29uID0gdXRpbHMuY3JlYXRlU3ZnKHtcclxuICAgIGhyZWY6ICcjb3JpZ28tY29tcGFzcycsXHJcbiAgICBjbHM6ICdvLWljb24tY29tcGFzcydcclxuICB9KTtcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcblxyXG4gIHJvdGF0ZUNvbnRyb2wgPSBuZXcgb2wuY29udHJvbC5Sb3RhdGUoe1xyXG4gICAgbGFiZWw6ICQucGFyc2VIVE1MKCc8c3Bhbj4nICsgaWNvbiArICc8L3NwYW4+JylbMF0sXHJcbiAgICB0aXBMYWJlbDogJyAnLFxyXG4gICAgdGFyZ2V0OiAnby10b29sYmFyLW1pc2MnXHJcbiAgfSk7XHJcbiAgbWFwLmFkZENvbnRyb2wocm90YXRlQ29udHJvbCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgbnVtYmVyRm9ybWF0dGVyID0gcmVxdWlyZSgnLi91dGlscy9udW1iZXJmb3JtYXR0ZXInKTtcclxuXHJcbnZhciBtYXA7XHJcbnZhciAkY29uc29sZTtcclxudmFyIGlzQWN0aXZlO1xyXG52YXIgc2NhbGVUZXh0O1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG4gICRjb25zb2xlID0gJCgnIycgKyBWaWV3ZXIuZ2V0Q29uc29sZUlkKCkpO1xyXG4gIHNjYWxlVGV4dCA9IG9wdGlvbnMuc2NhbGVUZXh0IHx8ICcxOic7XHJcbiAgdmFyIGluaXRpYWxTdGF0ZSA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2lzQWN0aXZlJykgPyBvcHRpb25zLmlzQWN0aXZlIDogdHJ1ZTtcclxuXHJcbiAgc2V0QWN0aXZlKGluaXRpYWxTdGF0ZSk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzZXRBY3RpdmU6IHNldEFjdGl2ZVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0QWN0aXZlKHN0YXRlKSB7XHJcbiAgaWYgKHN0YXRlID09PSB0cnVlKSB7XHJcbiAgICBtYXAuZ2V0VmlldygpLm9uKCdjaGFuZ2U6cmVzb2x1dGlvbicsIG9uWm9vbUNoYW5nZSk7XHJcbiAgICBvblpvb21DaGFuZ2UoKTtcclxuICAgIGlzQWN0aXZlID0gdHJ1ZTtcclxuICB9IGVsc2UgaWYgKHN0YXRlID09PSBmYWxzZSkge1xyXG4gICAgbWFwLmdldFZpZXcoKS51bignY2hhbmdlOnJlc29sdXRpb24nLCBvblpvb21DaGFuZ2UpO1xyXG4gICAgaXNBY3RpdmUgPSBmYWxzZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uWm9vbUNoYW5nZShlKSB7XHJcbiAgdmFyIHJlc29sdXRpb24gPSBlID8gZS50YXJnZXQuZ2V0KGUua2V5KSA6IG1hcC5nZXRWaWV3KCkuZ2V0UmVzb2x1dGlvbigpO1xyXG4gIHZhciBzY2FsZSA9IFZpZXdlci5nZXRTY2FsZShyZXNvbHV0aW9uKTtcclxuICAkY29uc29sZS50ZXh0KHNjYWxlVGV4dCArIG51bWJlckZvcm1hdHRlcihzY2FsZSkpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gSW5pdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG5cclxudmFyIG1hcDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCAnby10b29scy1ib3R0b20nO1xyXG4gIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuXHJcbiAgdmFyIHNjYWxlTGluZSA9IG5ldyBvbC5jb250cm9sLlNjYWxlTGluZSh7XHJcbiAgICB0YXJnZXQ6IHRhcmdldFxyXG4gIH0pO1xyXG4gIG1hcC5hZGRDb250cm9sKHNjYWxlTGluZSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB3a3RUb0ZlYXR1cmUgPSByZXF1aXJlKCcuL21hcHV0aWxzJykud2t0VG9GZWF0dXJlO1xyXG52YXIgUG9wdXAgPSByZXF1aXJlKCcuL3BvcHVwJyk7XHJcbnZhciB0eXBlYWhlYWQgPSByZXF1aXJlKCd0eXBlYWhlYWQuanMtYnJvd3NlcmlmeScpO1xyXG52YXIgZ2V0RmVhdHVyZSA9IHJlcXVpcmUoJy4vZ2V0ZmVhdHVyZScpO1xyXG52YXIgZ2V0QXR0cmlidXRlcyA9IHJlcXVpcmUoJy4vZ2V0YXR0cmlidXRlcycpO1xyXG52YXIgZmVhdHVyZUluZm8gPSByZXF1aXJlKCcuL2ZlYXR1cmVpbmZvJyk7XHJcbnZhciBtYXBVdGlscyA9IHJlcXVpcmUoJy4vbWFwdXRpbHMnKTtcclxudmFyIGdldENlbnRlciA9IHJlcXVpcmUoJy4vZ2VvbWV0cnkvZ2V0Y2VudGVyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIG1hcDtcclxudmFyIG5hbWU7XHJcbnZhciBub3J0aGluZztcclxudmFyIGVhc3Rpbmc7XHJcbnZhciBnZW9tZXRyeUF0dHJpYnV0ZTtcclxudmFyIGlkQXR0cmlidXRlO1xyXG52YXIgbGF5ZXJOYW1lQXR0cmlidXRlO1xyXG52YXIgbGF5ZXJOYW1lO1xyXG52YXIgdGl0bGVBdHRyaWJ1dGU7XHJcbnZhciBjb250ZW50QXR0cmlidXRlO1xyXG52YXIgbWF4Wm9vbUxldmVsO1xyXG52YXIgdXJsO1xyXG52YXIgdGl0bGU7XHJcbnZhciBoaW50VGV4dDtcclxudmFyIGhpbnQ7XHJcbnZhciBoaWdobGlnaHQ7XHJcbnZhciBwcm9qZWN0aW9uQ29kZTtcclxudmFyIG92ZXJsYXk7XHJcblxyXG50eXBlYWhlYWQubG9hZGpRdWVyeVBsdWdpbigpO1xyXG5cclxuZnVuY3Rpb24gaW5pdChvcHRpb25zKSB7XHJcbiAgdmFyIGVsO1xyXG4gIG5hbWUgPSBvcHRpb25zLnNlYXJjaEF0dHJpYnV0ZTtcclxuICBub3J0aGluZyA9IG9wdGlvbnMubm9ydGhpbmcgfHwgdW5kZWZpbmVkO1xyXG4gIGVhc3RpbmcgPSBvcHRpb25zLmVhc3RpbmcgfHwgdW5kZWZpbmVkO1xyXG4gIGdlb21ldHJ5QXR0cmlidXRlID0gb3B0aW9ucy5nZW9tZXRyeUF0dHJpYnV0ZTtcclxuXHJcbiAgLyoqIGlkQXR0cmlidXRlIGluIGNvbWJpbmF0aW9uIHdpdGggbGF5ZXJOYW1lQXR0cmlidXRlXHJcbiAgbXVzdCBiZSBkZWZpbmVkIGlmIHNlYXJjaCByZXN1bHQgc2hvdWxkIGJlIHNlbGVjdGVkICovXHJcbiAgaWRBdHRyaWJ1dGUgPSBvcHRpb25zLmlkQXR0cmlidXRlO1xyXG4gIGxheWVyTmFtZUF0dHJpYnV0ZSA9IG9wdGlvbnMubGF5ZXJOYW1lQXR0cmlidXRlIHx8IHVuZGVmaW5lZDtcclxuICBsYXllck5hbWUgPSBvcHRpb25zLmxheWVyTmFtZSB8fCB1bmRlZmluZWQ7XHJcbiAgdXJsID0gb3B0aW9ucy51cmw7XHJcbiAgdGl0bGUgPSBvcHRpb25zLnRpdGxlIHx8ICcnO1xyXG4gIHRpdGxlQXR0cmlidXRlID0gb3B0aW9ucy50aXRsZUF0dHJpYnV0ZSB8fCB1bmRlZmluZWQ7XHJcbiAgY29udGVudEF0dHJpYnV0ZSA9IG9wdGlvbnMuY29udGVudEF0dHJpYnV0ZSB8fCB1bmRlZmluZWQ7XHJcbiAgbWF4Wm9vbUxldmVsOiBvcHRpb25zLm1heFpvb21MZXZlbCB8fCAyO1xyXG4gIGhpbnRUZXh0ID0gb3B0aW9ucy5oaW50VGV4dCB8fCAnU8O2ay4uLic7XHJcbiAgaGludCA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2hpbnQnKSA/IG9wdGlvbnMuaGludCA6IHRydWU7XHJcbiAgaGlnaGxpZ2h0ID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaGlnaGxpZ2h0JykgPyBvcHRpb25zLmhpZ2hsaWdodCA6IHRydWU7XHJcbiAgcHJvamVjdGlvbkNvZGUgPSBWaWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuXHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG5cclxuICBlbCA9ICc8ZGl2IGlkPVwiby1zZWFyY2gtd3JhcHBlclwiPicgK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCJvLXNlYXJjaFwiIGNsYXNzPVwiby1zZWFyY2ggby1zZWFyY2gtZmFsc2VcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGlucHV0IGNsYXNzPVwiby1zZWFyY2gtZmllbGQgdHlwZWFoZWFkIGZvcm0tY29udHJvbFwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCInICsgaGludFRleHQgKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxidXR0b24gaWQ9XCJvLXNlYXJjaC1idXR0b25cIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtc2VhcmNoXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHVzZSB4bGluazpocmVmPVwiI2ZhLXNlYXJjaFwiPjwvdXNlPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvYnV0dG9uPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8YnV0dG9uIGlkPVwiby1zZWFyY2gtYnV0dG9uLWNsb3NlXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLXNlYXJjaC1mYS10aW1lc1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx1c2UgeGxpbms6aHJlZj1cIiNmYS10aW1lc1wiPjwvdXNlPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvYnV0dG9uPicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICQoJyNvLW1hcCcpLmFwcGVuZChlbCk7XHJcblxyXG4gIC8vIGZpeCBmb3IgaW50ZXJuZXQgZXhwbG9yZXJcclxuICAkLnN1cHBvcnQuY29ycyA9IHRydWU7XHJcblxyXG4gICQoJy50eXBlYWhlYWQnKS50eXBlYWhlYWQoe1xyXG4gICAgYXV0b1NlbGVjdDogdHJ1ZSxcclxuICAgIGhpbnQ6IGhpbnQsXHJcbiAgICBoaWdobGlnaHQ6IGhpZ2hsaWdodCxcclxuICAgIG1pbkxlbmd0aDogNFxyXG4gIH0sXHJcbiAgICB7XHJcbiAgICAgIG5hbWU6ICdhZHJlc3MnLFxyXG4gICAgICBsaW1pdDogOSxcclxuICAgICAgZGlzcGxheUtleTogbmFtZSxcclxuICAgICAgc291cmNlOiBmdW5jdGlvbiAocXVlcnksIHN5bmNSZXN1bHRzLCBhc3luY1Jlc3VsdHMpIHtcclxuICAgICAgICAkLmdldCh1cmwgKyAnP3E9JyArIGVuY29kZVVSSShxdWVyeSksIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICBhc3luY1Jlc3VsdHMoZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgJCgnLnR5cGVhaGVhZCcpLm9uKCd0eXBlYWhlYWQ6c2VsZWN0ZWQnLCBzZWxlY3RIYW5kbGVyKTtcclxuXHJcbiAgJCgnI28tc2VhcmNoIC5vLXNlYXJjaC1maWVsZCcpLm9uKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgaWYgKCQoJyNvLXNlYXJjaCAuby1zZWFyY2gtZmllbGQudHQtaW5wdXQnKS52YWwoKSAmJiAkKCcjby1zZWFyY2gnKS5oYXNDbGFzcygnby1zZWFyY2gtZmFsc2UnKSkge1xyXG4gICAgICAgICAgICAkKCcjby1zZWFyY2gnKS5yZW1vdmVDbGFzcygnby1zZWFyY2gtZmFsc2UnKTtcclxuICAgICAgICAgICAgJCgnI28tc2VhcmNoJykuYWRkQ2xhc3MoJ28tc2VhcmNoLXRydWUnKTtcclxuICAgICAgICAgICAgb25DbGVhclNlYXJjaCgpO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICghKCQoJyNvLXNlYXJjaCAuby1zZWFyY2gtZmllbGQudHQtaW5wdXQnKS52YWwoKSkgJiYgJCgnI28tc2VhcmNoJykuaGFzQ2xhc3MoJ28tc2VhcmNoLXRydWUnKSkge1xyXG4gICAgICAgICAgICAkKCcjby1zZWFyY2gnKS5yZW1vdmVDbGFzcygnby1zZWFyY2gtdHJ1ZScpO1xyXG4gICAgICAgICAgICAkKCcjby1zZWFyY2gnKS5hZGRDbGFzcygnby1zZWFyY2gtZmFsc2UnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25DbGVhclNlYXJjaCgpIHtcclxuICAkKCcjby1zZWFyY2gtYnV0dG9uLWNsb3NlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgJCgnLnR5cGVhaGVhZCcpLnR5cGVhaGVhZCgndmFsJywgJycpO1xyXG4gICAgICBmZWF0dXJlSW5mby5jbGVhcigpO1xyXG4gICAgICAkKCcjby1zZWFyY2gnKS5yZW1vdmVDbGFzcygnby1zZWFyY2gtdHJ1ZScpO1xyXG4gICAgICAkKCcjby1zZWFyY2gnKS5hZGRDbGFzcygnby1zZWFyY2gtZmFsc2UnKTtcclxuICAgICAgJCgnI28tc2VhcmNoIC5vLXNlYXJjaC1maWVsZC50dC1pbnB1dCcpLnZhbCgnJyk7XHJcbiAgICAgICQoJyNvLXNlYXJjaC1idXR0b24nKS5ibHVyKCk7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93T3ZlcmxheShkYXRhLCBjb29yZCkge1xyXG4gIHZhciBwb3B1cDtcclxuICB2YXIgY29udGVudDtcclxuICBmZWF0dXJlSW5mby5jbGVhcigpO1xyXG4gIGNsZWFyKCk7XHJcbiAgcG9wdXAgPSBQb3B1cCgnI28tbWFwJyk7XHJcbiAgb3ZlcmxheSA9IG5ldyBvbC5PdmVybGF5KHtcclxuICAgICAgZWxlbWVudDogcG9wdXAuZ2V0RWwoKVxyXG4gICAgfSk7XHJcblxyXG4gIG1hcC5hZGRPdmVybGF5KG92ZXJsYXkpO1xyXG5cclxuICBvdmVybGF5LnNldFBvc2l0aW9uKGNvb3JkKTtcclxuICBjb250ZW50ID0gZGF0YVtuYW1lXTtcclxuICBwb3B1cC5zZXRDb250ZW50KHtcclxuICAgICAgY29udGVudDogY29udGVudCxcclxuICAgICAgdGl0bGU6IHRpdGxlXHJcbiAgICB9KTtcclxuICBwb3B1cC5zZXRWaXNpYmlsaXR5KHRydWUpO1xyXG4gIG1hcFV0aWxzLnpvb21Ub0V4ZW50KG5ldyBvbC5nZW9tLlBvaW50KGNvb3JkKSwgbWF4Wm9vbUxldmVsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd0ZlYXR1cmVJbmZvKGZlYXR1cmVzLCB0aXRsZSwgY29udGVudCkge1xyXG4gIHZhciBvYmogPSB7fTtcclxuICBvYmouZmVhdHVyZSA9IGZlYXR1cmVzWzBdO1xyXG4gIG9iai50aXRsZSA9IHRpdGxlO1xyXG4gIG9iai5jb250ZW50ID0gY29udGVudDtcclxuICBmZWF0dXJlSW5mby5pZGVudGlmeShbb2JqXSwgJ292ZXJsYXknLCBnZXRDZW50ZXIoZmVhdHVyZXNbMF0uZ2V0R2VvbWV0cnkoKSkpO1xyXG4gIG1hcFV0aWxzLnpvb21Ub0V4ZW50KGZlYXR1cmVzWzBdLmdldEdlb21ldHJ5KCksIG1heFpvb21MZXZlbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gIFZpZXdlci5yZW1vdmVPdmVybGF5cyhvdmVybGF5KTtcclxufVxyXG5cclxuLyoqIFRoZXJlIGFyZSBzZXZlcmFsIGRpZmZlcmVudCB3YXlzIHRvIGhhbmRsZSBzZWxlY3RlZCBzZWFyY2ggcmVzdWx0LlxyXG4gKiBPcHRpb24gMS4gRmVhdHVyZSBpbmZvIGlzIHJlcXVlc3RlZCBmcm9tIGEgbWFwIHNlcnZpY2UuXHJcbiAqIEluIHRoaXMgY2FzZSBpZEF0dHJpYnV0ZSBhbmQgbGF5ZXJOYW1lQXR0cmlidXRlIG11c3QgYmUgcHJvdmlkZWQuXHJcbiAqIEEgbWFwIHNlcnZpY2UgaXMgdXNlZCB0byBnZXQgdGhlIGdlb21ldHJ5IGFuZCBhdHRyaWJ1dGVzLiBUaGUgbGF5ZXIgaXMgZGVmaW5lZFxyXG4gKiBhcyBhbiBvcmRpbmFyeSBsYXllciBpbiB0aGUgbGF5ZXIgY29uZmlnIHNlY3Rpb24uXHJcbiAqIE9wdGlvbiAyLiBTYW1lIGFzIG9wdGlvbiAxIGJ1dCBmb3Igc2luZ2xlIGxheWVyIHNlYXJjaC4gbGF5ZXJOYW1lIGlzIGRlZmluZWRcclxuICogYXMgYW4gb3B0aW9uIGFuZCBpcyBub3QgaW5jbHVkZWQgaW4gdGhlIHNlYXJjaCByZXNwb25zZS5cclxuICogSW4gdGhpcyBjYXNlIGdlb21ldHJ5QXR0cmlidXRlIGFuZCBsYXllck5hbWUgbXVzdCBiZSBwcm92aWRlZC5cclxuICogT3B0aW9uIDMuIENvbXBsZXRlIGZlYXR1cmUgaW5mbyBpcyBpbmNsdWRlZCBpbiB0aGUgc2VhcmNoIHJlc3VsdC5cclxuICogSW4gdGhpcyBjYXNlIHRpdGxlQXR0cmlidXRlLCBjb250ZW50QXR0cmlidXRlIGFuZCBnZW9tZXRyeUF0dHJpYnV0ZSBtdXN0IGJlIHByb3ZpZGVkLlxyXG4gKiBPcHRpb24gNC4gVGhpcyBpcyBhIHNpbmdsZSB0YWJsZSBzZWFyY2guIE5vIGxheWVyIGlzIGRlZmluZWQuXHJcbiAqIEluIHRoaXMgY2FzZSBnZW9tZXRyeUF0dHJpYnV0ZSBhbmQgdGl0bGUgbXVzdCBiZSBkZWZpbmVkLlxyXG4gKiBPcHRpb24gNS4gRmVhdHVyZSBpbmZvIGlzIHNob3duIHdpdGhvdXQgc2VsZWN0aW9uIGluIHRoZSBtYXAuXHJcbiAqIFRoaXMgaXMgYSBzaW1wbGUgc2luZ2xlIHRhYmxlIHNlYXJjaC4gSW4gdGhpcyBjYXNlIHRpdGxlLCBub3J0aGluZyBhbmQgZWFzdGluZ1xyXG4gKiBtdXN0IGJlIGRlZmluZWQuICovXHJcblxyXG5mdW5jdGlvbiBzZWxlY3RIYW5kbGVyKGV2dCwgZGF0YSkge1xyXG4gIHZhciBsYXllcjtcclxuICB2YXIgaWQ7XHJcbiAgdmFyIGZlYXR1cmU7XHJcbiAgdmFyIGNvbnRlbnQ7XHJcbiAgdmFyIGNvb3JkO1xyXG4gIGlmIChsYXllck5hbWVBdHRyaWJ1dGUgJiYgaWRBdHRyaWJ1dGUpIHtcclxuICAgIGxheWVyID0gVmlld2VyLmdldExheWVyKGRhdGFbbGF5ZXJOYW1lQXR0cmlidXRlXSk7XHJcbiAgICBpZCA9IGRhdGFbaWRBdHRyaWJ1dGVdO1xyXG4gICAgZ2V0RmVhdHVyZShpZCwgbGF5ZXIpXHJcbiAgICAgIC5kb25lKGZ1bmN0aW9uIChyZXMpIHtcclxuICAgICAgICAgICAgICB2YXIgZmVhdHVyZVdrdDtcclxuICAgICAgICAgICAgICB2YXIgY29vcmRXa3Q7XHJcbiAgICAgICAgICAgICAgaWYgKHJlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBzaG93RmVhdHVyZUluZm8ocmVzLCBsYXllci5nZXQoJ3RpdGxlJyksIGdldEF0dHJpYnV0ZXMocmVzWzBdLCBsYXllcikpO1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgaWYgbm8gZ2VvbWV0cnkgaW4gcmVzcG9uc2VcclxuICAgICAgICAgICAgICBlbHNlIGlmIChnZW9tZXRyeUF0dHJpYnV0ZSkge1xyXG4gICAgICAgICAgICAgICAgZmVhdHVyZVdrdCA9IHdrdFRvRmVhdHVyZShkYXRhW2dlb21ldHJ5QXR0cmlidXRlXSwgcHJvamVjdGlvbkNvZGUpO1xyXG4gICAgICAgICAgICAgICAgY29vcmRXa3QgPSBmZWF0dXJlV2t0LmdldEdlb21ldHJ5KCkuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgICAgIHNob3dPdmVybGF5KGRhdGEsIGNvb3JkV2t0KTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnlBdHRyaWJ1dGUgJiYgbGF5ZXJOYW1lKSB7XHJcbiAgICBmZWF0dXJlID0gd2t0VG9GZWF0dXJlKGRhdGFbZ2VvbWV0cnlBdHRyaWJ1dGVdLCBwcm9qZWN0aW9uQ29kZSk7XHJcbiAgICBsYXllciA9IFZpZXdlci5nZXRMYXllcihkYXRhW2xheWVyTmFtZV0pO1xyXG4gICAgc2hvd0ZlYXR1cmVJbmZvKFtmZWF0dXJlXSwgbGF5ZXIuZ2V0KCd0aXRsZScpLCBnZXRBdHRyaWJ1dGVzKGZlYXR1cmUsIGxheWVyKSk7XHJcbiAgfSBlbHNlIGlmICh0aXRsZUF0dHJpYnV0ZSAmJiBjb250ZW50QXR0cmlidXRlICYmIGdlb21ldHJ5QXR0cmlidXRlKSB7XHJcbiAgICBmZWF0dXJlID0gd2t0VG9GZWF0dXJlKGRhdGFbZ2VvbWV0cnlBdHRyaWJ1dGVdLCBwcm9qZWN0aW9uQ29kZSk7XHJcblxyXG4gICAgLy8gTWFrZSBzdXJlIHRoZSByZXNwb25zZSBpcyB3cmFwcGVkIGluIGEgaHRtbCBlbGVtZW50XHJcbiAgICBjb250ZW50ID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2JywgZGF0YVtjb250ZW50QXR0cmlidXRlXSk7XHJcbiAgICBzaG93RmVhdHVyZUluZm8oW2ZlYXR1cmVdLCBkYXRhW3RpdGxlQXR0cmlidXRlXSwgY29udGVudCk7XHJcbiAgfSBlbHNlIGlmIChnZW9tZXRyeUF0dHJpYnV0ZSAmJiB0aXRsZSkge1xyXG4gICAgZmVhdHVyZSA9IHdrdFRvRmVhdHVyZShkYXRhW2dlb21ldHJ5QXR0cmlidXRlXSwgcHJvamVjdGlvbkNvZGUpO1xyXG4gICAgY29udGVudCA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIGRhdGFbbmFtZV0pO1xyXG4gICAgc2hvd0ZlYXR1cmVJbmZvKFtmZWF0dXJlXSwgdGl0bGUsIGNvbnRlbnQpO1xyXG4gIH0gZWxzZSBpZiAoZWFzdGluZyAmJiBub3J0aGluZyAmJiB0aXRsZSkge1xyXG4gICAgY29vcmQgPSBbZGF0YVtlYXN0aW5nXSwgZGF0YVtub3J0aGluZ11dO1xyXG4gICAgc2hvd092ZXJsYXkoZGF0YSwgY29vcmQpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZygnU2VhcmNoIG9wdGlvbnMgYXJlIG1pc3NpbmcnKTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBpbml0O1xyXG4iLCIvKnJlcXVpcmVzIE1vZGFsLmpzKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIG1vZGFsID0gcmVxdWlyZSgnLi9tb2RhbCcpO1xyXG52YXIgbWFwbWVudSA9IHJlcXVpcmUoJy4vbWFwbWVudScpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbnZhciBwZXJtYWxpbmsgPSByZXF1aXJlKCcuL3Blcm1hbGluay9wZXJtYWxpbmsnKTtcclxuXHJcbnZhciBzaGFyZUJ1dHRvbjtcclxuXHJcbmZ1bmN0aW9uIGluaXQoKXtcclxuICAgIHZhciBlbCA9IHV0aWxzLmNyZWF0ZUxpc3RCdXR0b24oe1xyXG4gICAgICAgIGlkOiAnby1zaGFyZScsXHJcbiAgICAgICAgaWNvbkNsczogJ28taWNvbi1mYS1zaGFyZS1zcXVhcmUtbycsXHJcbiAgICAgICAgc3JjOiAnI2ZhLXNoYXJlLXNxdWFyZS1vJyxcclxuICAgICAgICB0ZXh0OiAnRGVsYSBrYXJ0YSdcclxuICAgIH0pO1xyXG4gICAgJCgnI28tbWVudXRvb2xzJykuYXBwZW5kKGVsKTtcclxuICAgIHNoYXJlQnV0dG9uID0gJCgnI28tc2hhcmUtYnV0dG9uJyk7XHJcbiAgICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAgIHNoYXJlQnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBtb2RhbC5jcmVhdGVNb2RhbCgnI28tbWFwJywge3RpdGxlOiAnTMOkbmsgdGlsbCBrYXJ0YScsIGNvbnRlbnQ6IGNyZWF0ZUNvbnRlbnQoKX0pO1xyXG4gICAgICAgIG1vZGFsLnNob3dNb2RhbCgpO1xyXG4gICAgICAgIGNyZWF0ZUxpbmsoKTsgLy9BZGQgbGluayB0byBpbnB1dFxyXG4gICAgICAgIG1hcG1lbnUudG9nZ2xlTWVudSgpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUNvbnRlbnQoKSB7XHJcbiAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJvLXNoYXJlLWxpbmtcIj48aW5wdXQgdHlwZT1cInRleHRcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAnPGk+S29waWVyYSBvY2gga2xpc3RyYSBpbiBsw6Rua2VuIGbDtnIgYXR0IGRlbGEga2FydGFuLjwvaT4nO1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUxpbmsoKSB7XHJcbiAgICB2YXIgdXJsID0gcGVybWFsaW5rLmdldFBlcm1hbGluaygpO1xyXG4gICAgJCgnLm8tc2hhcmUtbGluayBpbnB1dCcpLnZhbCh1cmwpLnNlbGVjdCgpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gaW5pdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxudmFyIHNpZGViYXI7XHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gICAgdmFyIGVsID0gJzxkaXYgaWQ9XCJvLXNpZGViYXJcIj4nICtcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiby1zaWRlYmFyIG8tY2FyZFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8tY2xvc2UtYnV0dG9uXCI+PHN2ZyBjbGFzcz1cIm8taWNvbi1mYS10aW1lc1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS10aW1lc1wiPjwvdXNlPjwvc3ZnPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8tY2FyZC10aXRsZVwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8tY2FyZC1jb250ZW50XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAkKCcjby1tYXAnKS5hcHBlbmQoZWwpO1xyXG4gICAgc2lkZWJhciA9ICQoJyNvLXNpZGViYXInKTtcclxuXHJcbiAgICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAgICQoJyNvLXNpZGViYXIgLm8tc2lkZWJhciAuby1jbG9zZS1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICBjbG9zZVNpZGViYXIoKTtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFZpc2liaWxpdHkodmlzaWJsZSkge1xyXG4gICAgdmlzaWJsZSA9PSB0cnVlID8gJCgnI28tc2lkZWJhcicpLmFkZENsYXNzKCdvLXNpZGViYXItc2hvdycpIDogJCgnI28tc2lkZWJhcicpLnJlbW92ZUNsYXNzKCdvLXNpZGViYXItc2hvdycpO1xyXG59XHJcbmZ1bmN0aW9uIHNldFRpdGxlKHRpdGxlKSB7XHJcbiAgICAkKCcjby1zaWRlYmFyIC5vLWNhcmQtdGl0bGUnKS5odG1sKHRpdGxlKTtcclxufVxyXG5mdW5jdGlvbiBzZXRDb250ZW50KGNvbmZpZykge1xyXG4gICAgY29uZmlnLnRpdGxlID8gJCgnI28tc2lkZWJhciAuby1zaWRlYmFyIC5vLWNhcmQtdGl0bGUnKS5odG1sKGNvbmZpZy50aXRsZSk6ICQoJyNvLXNpZGViYXIgLm8tc2lkZWJhciAuby1jYXJkLXRpdGxlJykuaHRtbCgnJyk7XHJcbiAgICBjb25maWcuY29udGVudCA/ICQoJyNvLXNpZGViYXIgLm8tc2lkZWJhciAuby1jYXJkLWNvbnRlbnQnKS5odG1sKGNvbmZpZy5jb250ZW50KTogJCgnI28tc2lkZWJhciAuby1zaWRlYmFyIC5vLWNhcmQtY29udGVudCcpLmh0bWwoJycpO1xyXG59XHJcbmZ1bmN0aW9uIGNsb3NlU2lkZWJhcigpIHtcclxuICAgIHNldFZpc2liaWxpdHkoZmFsc2UpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gaW5pdDtcclxubW9kdWxlLmV4cG9ydHMuc2V0VmlzaWJpbGl0eSA9IHNldFZpc2liaWxpdHk7XHJcbm1vZHVsZS5leHBvcnRzLnNldFRpdGxlID0gc2V0VGl0bGU7XHJcbm1vZHVsZS5leHBvcnRzLnNldENvbnRlbnQgPSBzZXRDb250ZW50O1xyXG5tb2R1bGUuZXhwb3J0cy5jbG9zZVNpZGViYXIgPSBjbG9zZVNpZGViYXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHZhbGlkYXRlVXJsID0gcmVxdWlyZSgnLi91dGlscy92YWxpZGF0ZXVybCcpO1xyXG5cclxudmFyIGJhc2VVcmw7XHJcblxyXG52YXIgd2hpdGUgPSBbMjU1LCAyNTUsIDI1NSwgMV07XHJcbnZhciBibHVlID0gWzAsIDE1MywgMjU1LCAxXTtcclxudmFyIHdpZHRoID0gMztcclxuXHJcbi8vZGVmYXVsdCBlZGl0IHN0eWxlIG9wdGlvbnNcclxudmFyIGVkaXRTdHlsZU9wdGlvbnMgPSB7XHJcbiAgICAnUG9pbnQnOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBcImNpcmNsZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInJhZGl1c1wiOiAxLFxyXG4gICAgICAgICAgICAgICAgXCJzdHJva2VcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogYmx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBcIndpZHRoXCI6IDBcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBcImZpbGxcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiY29sb3JcIjogYmx1ZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXSxcclxuICAgICdMaW5lU3RyaW5nJzogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJ3N0cm9rZSc6IHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCArIDJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAnc3Ryb2tlJzoge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IGJsdWUsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGhcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIF0sXHJcbiAgICAnUG9seWdvbic6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGUsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGggKyAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJ3N0cm9rZSc6IHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBibHVlLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBdXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaW5pdDogSW5pdCxcclxuICAgICAgICBjcmVhdGVTdHlsZU9wdGlvbnM6IGNyZWF0ZVN0eWxlT3B0aW9ucyxcclxuICAgICAgICBjcmVhdGVTdHlsZUxpc3Q6IGNyZWF0ZVN0eWxlTGlzdCxcclxuICAgICAgICBjcmVhdGVTdHlsZVJ1bGU6IGNyZWF0ZVN0eWxlUnVsZSxcclxuICAgICAgICBjcmVhdGVTdHlsZTogY3JlYXRlU3R5bGUsXHJcbiAgICAgICAgc3R5bGVGdW5jdGlvbjogc3R5bGVGdW5jdGlvbixcclxuICAgICAgICBjcmVhdGVFZGl0U3R5bGU6IGNyZWF0ZUVkaXRTdHlsZVxyXG4gICAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5pdCgpIHtcclxuICBiYXNlVXJsID0gVmlld2VyLmdldEJhc2VVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3R5bGVPcHRpb25zKHN0eWxlUGFyYW1zKSB7XHJcbiAgICB2YXIgc3R5bGVPcHRpb25zID0ge307XHJcbiAgICBpZihzdHlsZVBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnZ2VvbWV0cnknKSkge1xyXG4gICAgICAgIHN3aXRjaCAoc3R5bGVQYXJhbXMuZ2VvbWV0cnkpIHtcclxuICAgICAgICAgICAgY2FzZSAnY2VudGVyUG9pbnQnOlxyXG4gICAgICAgICAgICAgICAgc3R5bGVPcHRpb25zLmdlb21ldHJ5ID0gZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRJbnRlcmlvclBvaW50cygpLmdldEZpcnN0Q29vcmRpbmF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgb2wuZ2VvbS5Qb2ludChjb29yZGluYXRlcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJ2VuZFBvaW50JzpcclxuICAgICAgICAgICAgICAgIHN0eWxlT3B0aW9ucy5nZW9tZXRyeSA9IGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCkuZ2V0TGFzdENvb3JkaW5hdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IG9sLmdlb20uUG9pbnQoY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZihzdHlsZVBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnekluZGV4JykpIHtcclxuICAgICAgICBzdHlsZU9wdGlvbnMuekluZGV4ID0gc3R5bGVQYXJhbXMuekluZGV4O1xyXG4gICAgfVxyXG4gICAgaWYoc3R5bGVQYXJhbXMuaGFzT3duUHJvcGVydHkoJ2ZpbGwnKSkge1xyXG4gICAgICAgIHN0eWxlT3B0aW9ucy5maWxsID0gbmV3IG9sLnN0eWxlLkZpbGwoc3R5bGVQYXJhbXMuZmlsbCk7XHJcbiAgICB9XHJcbiAgICBpZihzdHlsZVBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnc3Ryb2tlJykpIHtcclxuICAgICAgICBzdHlsZU9wdGlvbnMuc3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZShzdHlsZVBhcmFtcy5zdHJva2UpO1xyXG4gICAgfVxyXG4gICAgaWYoc3R5bGVQYXJhbXMuaGFzT3duUHJvcGVydHkoJ3RleHQnKSkge1xyXG4gICAgICAgIHN0eWxlT3B0aW9ucy50ZXh0ID0gbmV3IG9sLnN0eWxlLlRleHQoc3R5bGVQYXJhbXMudGV4dCk7XHJcbiAgICAgICAgaWYoc3R5bGVQYXJhbXMudGV4dC5oYXNPd25Qcm9wZXJ0eSgnZmlsbCcpKSB7XHJcbiAgICAgICAgICAgIHN0eWxlT3B0aW9ucy50ZXh0LnNldEZpbGwobmV3IG9sLnN0eWxlLkZpbGwoc3R5bGVQYXJhbXMudGV4dC5maWxsKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHN0eWxlUGFyYW1zLnRleHQuaGFzT3duUHJvcGVydHkoJ3N0cm9rZScpKSB7XHJcbiAgICAgICAgICAgIHN0eWxlT3B0aW9ucy50ZXh0LnNldFN0cm9rZShuZXcgb2wuc3R5bGUuU3Ryb2tlKHN0eWxlUGFyYW1zLnRleHQuc3Ryb2tlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYoc3R5bGVQYXJhbXMuaGFzT3duUHJvcGVydHkoJ2ljb24nKSkge1xyXG4gICAgICAgIGlmIChzdHlsZVBhcmFtcy5pY29uLmhhc093blByb3BlcnR5KCdzcmMnKSkge1xyXG4gICAgICAgICAgc3R5bGVQYXJhbXMuaWNvbi5zcmMgPSB2YWxpZGF0ZVVybChzdHlsZVBhcmFtcy5pY29uLnNyYywgYmFzZVVybCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHN0eWxlT3B0aW9ucy5pbWFnZSA9IG5ldyBvbC5zdHlsZS5JY29uKHN0eWxlUGFyYW1zLmljb24pO1xyXG4gICAgfVxyXG4gICAgaWYoc3R5bGVQYXJhbXMuaGFzT3duUHJvcGVydHkoJ2NpcmNsZScpKSB7XHJcbiAgICAgICAgc3R5bGVPcHRpb25zLmltYWdlID0gbmV3IG9sLnN0eWxlLkNpcmNsZSh7XHJcbiAgICAgICAgICAgIHJhZGl1czogc3R5bGVQYXJhbXMuY2lyY2xlLnJhZGl1cyxcclxuICAgICAgICAgICAgZmlsbDogbmV3IG9sLnN0eWxlLkZpbGwoc3R5bGVQYXJhbXMuY2lyY2xlLmZpbGwpIHx8IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgc3Ryb2tlOiBuZXcgb2wuc3R5bGUuU3Ryb2tlKHN0eWxlUGFyYW1zLmNpcmNsZS5zdHJva2UpIHx8IHVuZGVmaW5lZFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0eWxlT3B0aW9ucztcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3R5bGVMaXN0KHN0eWxlT3B0aW9ucykge1xyXG4gICAgdmFyIHN0eWxlTGlzdD1bXTtcclxuICAgIC8vQ3JlYXRlIHN0eWxlIGZvciBlYWNoIHJ1bGVcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVPcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHN0eWxlUnVsZSA9IFtdO1xyXG4gICAgICAgIHZhciBzdHlsZU9wdGlvbjtcclxuICAgICAgICAvL0NoZWNrIGlmIHJ1bGUgaXMgYXJyYXksIGllIG11bHRpcGxlIHN0eWxlcyBmb3IgdGhlIHJ1bGVcclxuICAgICAgICBpZihzdHlsZU9wdGlvbnNbaV0uY29uc3RydWN0b3IgPT09IEFycmF5KSB7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaj0wOyBqIDwgc3R5bGVPcHRpb25zW2ldLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBzdHlsZU9wdGlvbiA9IGNyZWF0ZVN0eWxlT3B0aW9ucyhzdHlsZU9wdGlvbnNbaV1bal0pO1xyXG4gICAgICAgICAgICAgICAgc3R5bGVSdWxlLnB1c2gobmV3IG9sLnN0eWxlLlN0eWxlKHN0eWxlT3B0aW9uKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy9JZiBzaW5nbGUgc3R5bGUgZm9yIHJ1bGVcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc3R5bGVPcHRpb24gPSBjcmVhdGVTdHlsZU9wdGlvbnMoc3R5bGVPcHRpb25zW2ldKTtcclxuICAgICAgICAgICAgc3R5bGVSdWxlID0gW25ldyBvbC5zdHlsZS5TdHlsZShzdHlsZU9wdGlvbildO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc3R5bGVMaXN0LnB1c2goc3R5bGVSdWxlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdHlsZUxpc3Q7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlKHN0eWxlTmFtZSwgY2x1c3RlclN0eWxlTmFtZSkge1xyXG4gICAgICB2YXIgc3R5bGVTZXR0aW5ncyA9IFZpZXdlci5nZXRTdHlsZVNldHRpbmdzKClbc3R5bGVOYW1lXTtcclxuICAgICAgaWYoJC5pc0VtcHR5T2JqZWN0KHN0eWxlU2V0dGluZ3MpKSB7XHJcbiAgICAgICAgICBhbGVydCgnU3R5bGUgJyArIHN0eWxlTmFtZSArICcgaXMgbm90IGRlZmluZWQnKTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgY2x1c3RlclN0eWxlU2V0dGluZ3MgPSBWaWV3ZXIuZ2V0U3R5bGVTZXR0aW5ncygpW2NsdXN0ZXJTdHlsZU5hbWVdO1xyXG4gICAgICB2YXIgc3R5bGUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLy9DcmVhdGUgc3R5bGUgZm9yIGVhY2ggcnVsZVxyXG4gICAgICAgIHZhciBzdHlsZUxpc3QgPSBjcmVhdGVTdHlsZUxpc3Qoc3R5bGVTZXR0aW5ncyk7XHJcbiAgICAgICAgaWYoY2x1c3RlclN0eWxlU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgdmFyIGNsdXN0ZXJTdHlsZUxpc3QgPSBjcmVhdGVTdHlsZUxpc3QoY2x1c3RlclN0eWxlU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICByZXR1cm4gc3R5bGVGdW5jdGlvbihzdHlsZVNldHRpbmdzLCBzdHlsZUxpc3QsIGNsdXN0ZXJTdHlsZVNldHRpbmdzLCBjbHVzdGVyU3R5bGVMaXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdHlsZUZ1bmN0aW9uKHN0eWxlU2V0dGluZ3Msc3R5bGVMaXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9KSgpXHJcbiAgICAgIHJldHVybiBzdHlsZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3R5bGVSdWxlKG9wdGlvbnMpIHtcclxuICAgIHZhciBzdHlsZVJ1bGUgPSBbXSxcclxuICAgIHN0eWxlT3B0aW9uO1xyXG4gICAgaWYob3B0aW9ucy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkpIHtcclxuICAgICAgICBmb3IodmFyIGk9MDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHN0eWxlT3B0aW9uID0gY3JlYXRlU3R5bGVPcHRpb25zKG9wdGlvbnNbaV0pO1xyXG4gICAgICAgICAgICBzdHlsZVJ1bGUucHVzaChuZXcgb2wuc3R5bGUuU3R5bGUoc3R5bGVPcHRpb24pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvL0lmIHNpbmdsZSBzdHlsZSBmb3IgcnVsZVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgc3R5bGVPcHRpb24gPSBjcmVhdGVTdHlsZU9wdGlvbnMob3B0aW9ucyk7XHJcbiAgICAgICAgc3R5bGVSdWxlID0gW25ldyBvbC5zdHlsZS5TdHlsZShzdHlsZU9wdGlvbildO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0eWxlUnVsZTtcclxufVxyXG5cclxuZnVuY3Rpb24gc3R5bGVGdW5jdGlvbihzdHlsZVNldHRpbmdzLCBzdHlsZUxpc3QsIGNsdXN0ZXJTdHlsZVNldHRpbmdzLCBjbHVzdGVyU3R5bGVMaXN0KSB7XHJcbiAgICB2YXIgcyA9IHN0eWxlU2V0dGluZ3M7XHJcbiAgICB2YXIgcmVzb2x1dGlvbnMgPSBWaWV3ZXIuZ2V0UmVzb2x1dGlvbnMoKTtcclxuICAgIHZhciBmbiA9IGZ1bmN0aW9uKGZlYXR1cmUscmVzb2x1dGlvbikge1xyXG4gICAgICAgIHZhciBzY2FsZSA9IFZpZXdlci5nZXRTY2FsZShyZXNvbHV0aW9uKTtcclxuICAgICAgICB2YXIgc3R5bGVMO1xyXG4gICAgICAgIC8vSWYgc2l6ZSBpcyBsYXJnZXIgdGhhbiwgaXQgaXMgYSBjbHVzdGVyXHJcbiAgICAgICAgdmFyIHNpemUgPSBjbHVzdGVyU3R5bGVMaXN0ID8gZmVhdHVyZS5nZXQoJ2ZlYXR1cmVzJykubGVuZ3RoIDogMTtcclxuICAgICAgICBpZihzaXplID4gMSAmJiByZXNvbHV0aW9uIT0gcmVzb2x1dGlvbnNbcmVzb2x1dGlvbnMubGVuZ3RoKzFdKSB7XHJcbiAgICAgICAgICAgIHN0eWxlTCA9IGNoZWNrT3B0aW9ucyhmZWF0dXJlLCBzY2FsZSwgY2x1c3RlclN0eWxlU2V0dGluZ3MsIGNsdXN0ZXJTdHlsZUxpc3QsIHNpemUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIC8vIGNsdXN0ZXJTdHlsZUxpc3RbMF0uc2V0VGV4dChzaXplKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHN0eWxlTCA9IGNoZWNrT3B0aW9ucyhmZWF0dXJlLCBzY2FsZSwgc3R5bGVTZXR0aW5ncywgc3R5bGVMaXN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0eWxlTDtcclxuICAgIH1cclxuICAgIHJldHVybiBmbjtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRWRpdFN0eWxlKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICAnUG9pbnQnOiBjcmVhdGVTdHlsZVJ1bGUoZWRpdFN0eWxlT3B0aW9uc1snUG9pbnQnXSksXHJcbiAgICAgICAgJ011bHRpUG9pbnQnOiBjcmVhdGVTdHlsZVJ1bGUoZWRpdFN0eWxlT3B0aW9uc1snUG9pbnQnXSksXHJcbiAgICAgICAgJ0xpbmVTdHJpbmcnOiBjcmVhdGVTdHlsZVJ1bGUoZWRpdFN0eWxlT3B0aW9uc1snTGluZVN0cmluZyddKSxcclxuICAgICAgICAnTXVsdGlMaW5lU3RyaW5nJzogY3JlYXRlU3R5bGVSdWxlKGVkaXRTdHlsZU9wdGlvbnNbJ0xpbmVTdHJpbmcnXSksXHJcbiAgICAgICAgJ1BvbHlnb24nOiBjcmVhdGVTdHlsZVJ1bGUoZWRpdFN0eWxlT3B0aW9uc1snUG9seWdvbiddKSxcclxuICAgICAgICAnTXVsdGlQb2x5Z29uJzogY3JlYXRlU3R5bGVSdWxlKGVkaXRTdHlsZU9wdGlvbnNbJ1BvbHlnb24nXSlcclxuICAgIH07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrT3B0aW9ucyhmZWF0dXJlLCBzY2FsZSwgc3R5bGVTZXR0aW5ncywgc3R5bGVMaXN0LCBzaXplKSB7XHJcbiAgICB2YXIgcyA9IHN0eWxlU2V0dGluZ3M7XHJcbiAgICBmb3IgKHZhciBqPTA7IGo8cy5sZW5ndGg7IGorKykge1xyXG4gICAgICB2YXIgc3R5bGVMO1xyXG4gICAgICBpZihWaWV3ZXIuY2hlY2tTY2FsZShzY2FsZSwgc1tqXVswXS5tYXhTY2FsZSwgc1tqXVswXS5taW5TY2FsZSkpIHtcclxuICAgICAgICBzW2pdLnNvbWUoZnVuY3Rpb24oZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50Lmhhc093blByb3BlcnR5KCd0ZXh0JykgJiYgc2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgc3R5bGVMaXN0W2pdW2luZGV4XS5nZXRUZXh0KCkuc2V0VGV4dChzaXplKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChzW2pdWzBdLmhhc093blByb3BlcnR5KCdmaWx0ZXInKSkge1xyXG4gICAgICAgICAgLy9maW5kIGF0dHJpYnV0ZSB2YWxlIGJldHdlZW4gW10gZGVmaW5lZCBpbiBzdHlsZXNcclxuICAgICAgICAgIHZhciBmZWF0QXR0ciwgZXhwciwgZmVhdE1hdGNoO1xyXG4gICAgICAgICAgdmFyIG1hdGNoZXMgPSBzW2pdWzBdLmZpbHRlci5tYXRjaCgvXFxbKC4qPylcXF0vKTtcclxuICAgICAgICAgIGlmIChtYXRjaGVzKSB7XHJcbiAgICAgICAgICAgICAgZmVhdEF0dHIgPSBtYXRjaGVzWzFdO1xyXG4gICAgICAgICAgICAgIGV4cHIgPSBzW2pdWzBdLmZpbHRlci5zcGxpdCgnXScpWzFdO1xyXG4gICAgICAgICAgICAgIGZlYXRNYXRjaCA9IGZlYXR1cmUuZ2V0KGZlYXRBdHRyKTtcclxuICAgICAgICAgICAgICBleHByID0gdHlwZW9mIGZlYXRNYXRjaCA9PSAnbnVtYmVyJyA/IGZlYXRNYXRjaCArIGV4cHIgOiAnXCInICsgZmVhdE1hdGNoICsgJ1wiJyArIGV4cHIgO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoZXZhbChleHByKSkge1xyXG4gICAgICAgICAgICBzdHlsZUwgPSBzdHlsZUxpc3Rbal07XHJcbiAgICAgICAgICAgIHJldHVybiBzdHlsZUw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgc3R5bGVMID0gc3R5bGVMaXN0W2pdO1xyXG4gICAgICAgICAgcmV0dXJuIHN0eWxlTDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBtZWFzdXJlID0ge1xyXG4gIGxpbmVzdHJpbmc6IFtcclxuICAgIHtcclxuICAgICAgJ2dlb21ldHJ5JzogJ2VuZFBvaW50JyxcclxuICAgICAgJ2NpcmNsZSc6IHtcclxuICAgICAgICBmaWxsOiB7XHJcbiAgICAgICAgICBjb2xvcjogWzAsIDE1MywgMjU1LCAxXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3Ryb2tlOiB7XHJcbiAgICAgICAgICBjb2xvcjogWzAsIDE1MywgMjU1LCAxXSxcclxuICAgICAgICAgIHdpZHRoOiAxXHJcbiAgICAgICAgfSxcclxuICAgICAgICByYWRpdXM6IDNcclxuICAgICAgfSxcclxuICAgICAgJ3RleHQnOiB7XHJcbiAgICAgICAgZm9udDogJ2JvbGQgMTNweCBcIkhlbHZldGljYSBOZXVlXCIsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYnLFxyXG4gICAgICAgIHRleHRCYXNlbGluZTogJ2JvdHRvbScsXHJcbiAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICBvZmZzZXRZOiAtNCxcclxuICAgICAgICBmaWxsOiB7Y29sb3I6IFswLCAxNTMsIDI1NSwgMV19LFxyXG4gICAgICAgIHN0cm9rZToge2NvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMC44XSwgd2lkdGg6IDR9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgY29sb3I6IFswLCAxNTMsIDI1NSwgMV0sXHJcbiAgICAgICAgd2lkdGg6IDJcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF0sXHJcbiAgcG9seWdvbjogW1xyXG4gICAge1xyXG4gICAgICAnZmlsbCc6IHtcclxuICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDAuNF1cclxuICAgICAgfSxcclxuICAgICAgJ3N0cm9rZSc6IHtcclxuICAgICAgICBjb2xvcjogWzAsIDE1MywgMjU1LCAxXSxcclxuICAgICAgICB3aWR0aDogMlxyXG4gICAgICB9LFxyXG4gICAgICAndGV4dCc6IHtcclxuICAgICAgICBmb250OiAnYm9sZCAxM3B4IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZicsXHJcbiAgICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJyxcclxuICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgIGZpbGw6IHtjb2xvcjogWzAsIDE1MywgMjU1LCAxXX0sXHJcbiAgICAgICAgc3Ryb2tlOiB7Y29sb3I6IFsyNTUsIDI1NSwgMjU1LCAwLjhdLCB3aWR0aDogNH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF0sXHJcbiAgaW50ZXJhY3Rpb246IFtcclxuICAgIHtcclxuICAgICAgJ2ZpbGwnOiB7XHJcbiAgICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAwLjJdXHJcbiAgICAgIH0sXHJcbiAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgJ2NvbG9yJzogWzAsIDAsIDAsIDAuNV0sXHJcbiAgICAgICAgJ2xpbmVEYXNoJzogWzEwLCAxMF0sXHJcbiAgICAgICAgJ3dpZHRoJzogMlxyXG4gICAgICB9LFxyXG4gICAgICAnY2lyY2xlJzoge1xyXG4gICAgICAgICdyYWRpdXMnOiA1LFxyXG4gICAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgICAnY29sb3InOiBbMCwgMCwgMCwgMC43XVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ2ZpbGwnOiB7XHJcbiAgICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDAuMl1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBdXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1lYXN1cmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHBpbiA9IFtcclxuICAgIHtcclxuICAgICAgJ2ljb24nOiB7XHJcbiAgICAgICAgICBhbmNob3I6IFswLjUsIDMyXSxcclxuICAgICAgICAgIGFuY2hvclhVbml0czogJ2ZyYWN0aW9uJyxcclxuICAgICAgICAgIGFuY2hvcllVbml0czogJ3BpeGVscycsXHJcbiAgICAgICAgICBzcmM6ICdpbWcvcG5nL2Ryb3BfYmx1ZS5wbmcnXHJcbiAgICAgIH1cclxuICAgIH1cclxuXTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcGluO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBwaW4gPSByZXF1aXJlKCcuL3BpbicpO1xyXG52YXIgbWVhc3VyZSA9IHJlcXVpcmUoJy4vbWVhc3VyZScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgdmFyIHN0eWxlVHlwZXMgPSB7fTtcclxuXHJcbiAgc3R5bGVUeXBlcy5waW4gPSBwaW47XHJcbiAgc3R5bGVUeXBlcy5tZWFzdXJlID0gbWVhc3VyZTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdldFN0eWxlOiBmdW5jdGlvbiBnZXRTdHlsZSh0eXBlKSB7XHJcbiAgICAgIGlmKHR5cGUpIHtcclxuICAgICAgICByZXR1cm4gc3R5bGVUeXBlc1t0eXBlXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0eXBlICsgJyBpcyBub3QgYSBkZWZhdWx0IHN0eWxlJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0oKTtcclxuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnNDb21waWxlciA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKHtcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIjxkaXYgaWQ9XFxcIm8tZWRpdG9yLXRvb2xiYXJcXFwiIGNsYXNzPVxcXCJvLWVkaXRvci10b29sYmFyIG8tdG9vbGJhciBvLXRvb2xiYXItaG9yaXpvbnRhbCBvLXBhZGRpbmctaG9yaXpvbnRhbC04IG8tcm91bmRlZC10b3Agby1oaWRkZW5cXFwiPlxcclxcbiAgICA8ZGl2IGlkPVxcXCJvLWVkaXRvci10b29sYmFyLWRyYXd0b29sc1xcXCIgY2xhc3M9XFxcIm8tdG9vbGJhci1ob3Jpem9udGFsXFxcIj5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJvLXBvcG92ZXItY29udGFpbmVyXFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gaWQ9XFxcIm8tZWRpdG9yLWRyYXdcXFwiIGNsYXNzPVxcXCJvLWJ1dHRvbi1sZ1xcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBuYW1lPVxcXCJidXR0b25cXFwiPlxcclxcbiAgICAgICAgICA8c3ZnIGNsYXNzPVxcXCJvLWljb24tMjRcXFwiPlxcclxcbiAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVxcXCIjaWNfbW9kZV9lZGl0XzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgICAgICA8L3N2Zz5cXHJcXG4gICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGJ1dHRvbiBpZD1cXFwiby1lZGl0b3ItYXR0cmlidXRlXFxcIiBjbGFzcz1cXFwiby1idXR0b24tbGdcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgbmFtZT1cXFwiYnV0dG9uXFxcIj5cXHJcXG4gICAgICA8c3ZnIGNsYXNzPVxcXCJvLWljb24tMjRcXFwiPlxcclxcbiAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9XFxcIiNpY190aXRsZV8yNHB4XFxcIj48L3VzZT5cXHJcXG4gICAgICA8L3N2Zz5cXHJcXG4gICAgPC9idXR0b24+XFxyXFxuICAgIDxidXR0b24gaWQ9XFxcIm8tZWRpdG9yLWRlbGV0ZVxcXCIgY2xhc3M9XFxcIm8tYnV0dG9uLWxnXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIG5hbWU9XFxcImJ1dHRvblxcXCI+XFxyXFxuICAgICAgPHN2ZyBjbGFzcz1cXFwiby1pY29uLTI0XFxcIj5cXHJcXG4gICAgICAgICAgPHVzZSB4bGluazpocmVmPVxcXCIjaWNfZGVsZXRlXzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgIDwvc3ZnPlxcclxcbiAgICA8L2J1dHRvbj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiby1wb3BvdmVyLWNvbnRhaW5lclxcXCI+XFxyXFxuICAgICAgPGJ1dHRvbiBpZD1cXFwiby1lZGl0b3ItbGF5ZXJzXFxcIiBjbGFzcz1cXFwiby1idXR0b24tbGdcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgbmFtZT1cXFwiYnV0dG9uXFxcIj5cXHJcXG4gICAgICAgIDxzdmcgY2xhc3M9XFxcIm8taWNvbi0yNFxcXCI+XFxyXFxuICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVxcXCIjaWNfbGF5ZXJzXzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgICAgPC9zdmc+XFxyXFxuICAgICAgPC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8YnV0dG9uIGlkPVxcXCJvLWVkaXRvci1zYXZlXFxcIiBjbGFzcz1cXFwiby1idXR0b24tbGcgby1kaXNhYmxlZFxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBuYW1lPVxcXCJidXR0b25cXFwiPlxcclxcbiAgICAgIDxzdmcgY2xhc3M9XFxcIm8taWNvbi0yNFxcXCI+XFxyXFxuICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cXFwiI2ljX3NhdmVfMjRweFxcXCI+PC91c2U+XFxyXFxuICAgICAgPC9zdmc+XFxyXFxuICAgIDwvYnV0dG9uPlxcclxcbiAgICA8YnV0dG9uIGlkPVxcXCJvLWVkaXRvci1jbG9zZVxcXCIgY2xhc3M9XFxcIm8tYnV0dG9uLWxnXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIG5hbWU9XFxcImJ1dHRvblxcXCI+XFxyXFxuICAgICAgICA8c3ZnIGNsYXNzPVxcXCJvLWljb24tMjRcXFwiPlxcclxcbiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cXFwiI2ljX2Nsb3NlXzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgICAgPC9zdmc+XFxyXFxuICAgIDwvYnV0dG9uPlxcclxcbjwvZGl2PlxcclxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGhlbHBlciwgYWxpYXMxPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgIDxsaT48Yj5cIlxuICAgICsgYWxpYXMxKCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMua2V5IHx8IChkYXRhICYmIGRhdGEua2V5KSkgIT0gbnVsbCA/IGhlbHBlciA6IGhlbHBlcnMuaGVscGVyTWlzc2luZyksKHR5cGVvZiBoZWxwZXIgPT09IFwiZnVuY3Rpb25cIiA/IGhlbHBlci5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDoge30se1wibmFtZVwiOlwia2V5XCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIjwvYj4gOiBcIlxuICAgICsgYWxpYXMxKGNvbnRhaW5lci5sYW1iZGEoZGVwdGgwLCBkZXB0aDApKVxuICAgICsgXCI8L2xpPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiB7fSxkZXB0aDAse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKTtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgZGVmYXVsdFRlbXBsYXRlID0gcmVxdWlyZShcIi4vZGVmYXVsdC5oYW5kbGViYXJzXCIpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhdHRyaWJ1dGVzKSB7XHJcbiAgcmV0dXJuIGRlZmF1bHRUZW1wbGF0ZShhdHRyaWJ1dGVzKTtcclxufVxyXG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiPGh0bWw+XFxyXFxuICA8aGVhZD5cXHJcXG4gICAgPGxpbmsgaHJlZj1cXFwiY3NzL3ByaW50LmNzc1xcXCIgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIj5cXHJcXG4gIDwvaGVhZD5cXHJcXG4gIDxib2R5PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJvLXByaW50LWxvZ29cXFwiPjxpbWcgc3JjPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubG9nb1NyYyA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+PC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcIm8tbWFwLWNhbnZhc1xcXCI+PGltZyBzcmM9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5zcmMgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiLz48L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiby1wcmludC1hdHRyaWJ1dGlvblxcXCI+XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmF0dHJpYnV0aW9uIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiPC9kaXY+XFxyXFxuICA8L2JvZHk+XFxyXFxuPC9odG1sPlxcclxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiICAgICAgICA8aW1nIHNyYz1cXFwiXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKGNvbnRhaW5lci5sYW1iZGEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmltZyA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiICAgICAgICA8YSBocmVmPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAudXJsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAudXJsVGV4dCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjwvYT5cXHJcXG5cIjtcbn0sXCI1XCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCIgICAgICAgIDxwPlwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbihjb250YWluZXIubGFtYmRhKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC50ZXh0IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiPC9wPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IHt9O1xuXG4gIHJldHVybiBcIjxkaXYgaWQ9XFxcIm8tbWFwXFxcIiBjbGFzcz1cXFwiby1tYXAgby1tYXAtZ3JpZFxcXCI+XFxyXFxuICA8ZGl2IGlkPVxcXCJvLXRvb2xzLWxlZnRcXFwiIGNsYXNzPVxcXCJvLWNvbnRhaW5lci1hYnNvbHV0ZSBvLXRvb2xzLWxlZnRcXFwiPlxcclxcbiAgICA8ZGl2IGlkPVxcXCJvLXRvb2xiYXItbmF2aWdhdGlvblxcXCIgY2xhc3M9XFxcIm8tdG9vbGJhci12ZXJ0aWNhbCBvLXRvb2xiYXItbmF2aWdhdGlvblxcXCI+PC9kaXY+XFxyXFxuICAgIDxkaXYgaWQ9XFxcIm8tdG9vbGJhci1tYXB0b29sc1xcXCIgY2xhc3M9XFxcIm8tdG9vbGJhci12ZXJ0aWNhbCBvLXRvb2xiYXItbWFwdG9vbHNcXFwiPjwvZGl2PlxcclxcbiAgICA8ZGl2IGlkPVxcXCJvLXRvb2xiYXItbWlzY1xcXCIgY2xhc3M9XFxcIm8tdG9vbGJhci12ZXJ0aWNhbCBvLXRvb2xiYXItbWlzY1xcXCI+PC9kaXY+XFxyXFxuICA8L2Rpdj5cXHJcXG4gIDxkaXYgaWQ9XFxcIm8tdG9vbHMtYm90dG9tXFxcIiBjbGFzcz1cXFwiby10b29scy1ib3R0b21cXFwiPjwvZGl2PlxcclxcbiAgPGRpdiBpZD1cXFwiby1mb290ZXJcXFwiIGNsYXNzPVxcXCJvLWZvb3RlclxcXCI+XFxyXFxuICAgIDxkaXYgaWQ9XFxcIm8tY29uc29sZVxcXCIgY2xhc3M9XFxcIm8tZm9vdGVyLWxlZnRcXFwiPiZuYnNwOzwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJvLWZvb3Rlci1taWRkbGVcXFwiPlxcclxcbiAgICAgIDxkaXYgY2xhc3M9XFxcIm8tZm9vdGVyLW1pZGRsZS1jb250ZW50XFxcIj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmltZyA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC51cmwgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAudGV4dCA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oNSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJvLWZvb3Rlci1yaWdodFxcXCI+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGNyZWF0ZUJ1dHRvbjogZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgIHZhciB0b29sdGlwID0nJztcclxuICAgICAgICB2YXIgdGV4dCA9Jyc7XHJcbiAgICAgICAgdmFyIGNscyA9IG9wdGlvbnMuY2xzIHx8ICcnO1xyXG4gICAgICAgIHZhciBpY29uQ2xzID0gb3B0aW9ucy5pY29uQ2xzIHx8ICcnO1xyXG4gICAgICAgIHZhciBwbGFjZW1lbnQgPSBvcHRpb25zLnRvb2x0aXBQbGFjZW1lbnQgfHwgJ2Vhc3QnO1xyXG4gICAgICAgIGlmKG9wdGlvbnMudGV4dCkge1xyXG4gICAgICAgICAgICB0ZXh0ID0gJzxzcGFuIGNsYXNzPVwiby1idXR0b24tdGV4dFwiPicgKyBvcHRpb25zLnRleHQgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG9wdGlvbnMudG9vbHRpcFRleHQpIHtcclxuICAgICAgICAgICAgdG9vbHRpcCA9ICc8c3BhbiBkYXRhLXRvb2x0aXA9XCInICsgb3B0aW9ucy50b29sdGlwVGV4dCArICdcIiBkYXRhLXBsYWNlbWVudD1cIicgKyBwbGFjZW1lbnQgKyAnXCI+PC9zcGFuPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBlbCA9ICc8ZGl2IGlkPVwiJyArIG9wdGlvbnMuaWQgKyAnXCIgY2xhc3M9XCJvLWJ1dHRvbi1jb250YWluZXIgby10b29sdGlwXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgJzxidXR0b24gY2xhc3M9XCJvLWJ1dHRvbiAnICsgY2xzICsgJ1wiPicgKyB0ZXh0ICtcclxuICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIicgKyBpY29uQ2xzICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHVzZSB4bGluazpocmVmPVwiJyArIG9wdGlvbnMuc3JjICsgJ1wiPjwvdXNlPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAnPC9idXR0b24+JyArXHJcbiAgICAgICAgICAgICAgICAgdG9vbHRpcCArXHJcbiAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgfSxcclxuICAgIGNyZWF0ZUxpc3RCdXR0b246IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZWwgPSAnPGxpPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIG9wdGlvbnMuaWQgKyAnLWJ1dHRvblwiIGNsYXNzPVwiby1tZW51LWJ1dHRvblwiJyArICc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiby1idXR0b24taWNvblwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiJyArIG9wdGlvbnMuaWNvbkNscyArICdcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx1c2UgeGxpbms6aHJlZj1cIicgKyBvcHRpb25zLnNyYyArICdcIj48L3VzZT4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudGV4dCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICc8L2xpPic7XHJcbiAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgfSxcclxuICAgIGNyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uKGVsLCB2YWwsIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICB2YXIgcHJlZml4ID0gJzwnICsgZWw7XHJcbiAgICAgICAgdmFyIHN1ZmZpeCA9ICc8LycgKyBlbCAgKyAnPic7XHJcbiAgICAgICAgdmFyIGF0dHJpYnV0ZU5hbWVzID0gYXR0cmlidXRlcyA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGF0dHJpYnV0ZXMpIDogW107XHJcbiAgICAgICAgdmFyIGF0dHJpYnV0ZUxpc3QgPSBhdHRyaWJ1dGVOYW1lcy5tYXAoZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzID0gJyc7XHJcbiAgICAgICAgICAgIGlmIChuYW1lID09PSBcImNsc1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXMgPSAnICcgKyAnY2xhc3MnLmNvbmNhdCgnPScsICdcIicsIGF0dHJpYnV0ZXNbbmFtZV0sICdcIicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzID0gJyAnICsgbmFtZS5jb25jYXQoJz0nLCAnXCInLCBhdHRyaWJ1dGVzW25hbWVdLCdcIicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBwcmVmaXguY29uY2F0KGF0dHJpYnV0ZUxpc3Quam9pbignICcpLCAnPicsIHZhbCwgc3VmZml4KTtcclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH0sXHJcbiAgICBjcmVhdGVTdmc6IGZ1bmN0aW9uKHByb3BzKSB7XHJcbiAgICAgICAgdmFyIHVzZSA9IHRoaXMuY3JlYXRlRWxlbWVudCgndXNlJywgJycsIHtcclxuICAgICAgICAgICAgJ3hsaW5rOmhyZWYnOiBwcm9wcy5ocmVmXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudCgnc3ZnJywgdXNlLCB7XHJcbiAgICAgICAgICAgIGNsczogcHJvcHMuY2xzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbFF1ZXJ5KHRhcmdldE9iaiwgb3B0aW9ucykge1xyXG4gIHZhciB0YXJnZXQgPSAnLm8tbWFwJztcclxuICB2YXIgcHJlZml4ID0gb3B0aW9ucy5icmVha1BvaW50c1ByZWZpeDtcclxuICB2YXIgYnJlYWtQb2ludHMgPSBvcHRpb25zLmJyZWFrUG9pbnRzO1xyXG4gIHZhciBicmVha05hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYnJlYWtQb2ludHMpO1xyXG4gIHZhciBicmVha0NscyA9IGFyclRvT2JqKGJyZWFrTmFtZXMsIHByZWZpeCk7XHJcbiAgdmFyIGJyZWFrQ2xzTmFtZXMgPSBicmVha05hbWVzLm1hcChmdW5jdGlvbihicmVha1NpemUpIHtcclxuICAgIHJldHVybiBicmVha0Nsc1ticmVha1NpemVdO1xyXG4gIH0pO1xyXG5cclxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIG9uU2l6ZUNoYW5nZSk7XHJcbiAgb25TaXplQ2hhbmdlKCk7XHJcblxyXG4gIGZ1bmN0aW9uIG9uU2l6ZUNoYW5nZSgpIHtcclxuICAgIHZhciBtYXBTaXplID0gdGFyZ2V0T2JqLmdldFNpemUoKTtcclxuICAgIHZhciB2YWwgPSBicmVha05hbWVzLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyKSB7XHJcbiAgICAgIHZhciBoZWlnaHQgPSBicmVha1BvaW50c1tjdXJyXVsxXTtcclxuICAgICAgdmFyIHdpZHRoID0gYnJlYWtQb2ludHNbY3Vycl1bMF07XHJcbiAgICAgIGlmIChtYXBTaXplWzBdIDw9IHdpZHRoIHx8IG1hcFNpemVbMV0gPD0gaGVpZ2h0KSB7XHJcbiAgICAgICAgaWYgKCFwcmV2KSB7XHJcbiAgICAgICAgICByZXR1cm4gY3VycjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBwcmV2O1xyXG4gICAgICB9XHJcbiAgICB9LCB1bmRlZmluZWQpO1xyXG4gICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKGJyZWFrQ2xzTmFtZXMuam9pbignICcpKTtcclxuICAgIGlmICh2YWwpIHtcclxuICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKGJyZWFrQ2xzW3ZhbF0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXJyVG9PYmooYXJyLCBzdGFydCkge1xyXG4gICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgdmFyIHZhbCA9IHN0YXJ0O1xyXG4gICAgYXJyLnNsaWNlKCkucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24oY3Vycikge1xyXG4gICAgICB2YWwgKz0gJy0nICsgY3VycjtcclxuICAgICAgb2JqW2N1cnJdID0gdmFsO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcblxyXG4vKipcclxuRnVuY3Rpb24gdG8gZ2VuZXJhdGUgYSB1bmlxdWUgaWQuXHJcbkZyb20gQnJpZ3V5MzcgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvY3JlYXRlLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0XHJcbiovXHJcbnZhciBnZW5lcmF0ZVVVSUQgPSBmdW5jdGlvbiBnZW5lcmF0ZVVVSUQoKSB7XHJcbiAgdmFyIGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICBpZiAod2luZG93LnBlcmZvcm1hbmNlICYmIHR5cGVvZiB3aW5kb3cucGVyZm9ybWFuY2Uubm93ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgIGQgKz0gcGVyZm9ybWFuY2Uubm93KCk7IC8vdXNlIGhpZ2gtcHJlY2lzaW9uIHRpbWVyIGlmIGF2YWlsYWJsZVxyXG4gIH1cclxuICB2YXIgdXVpZCA9ICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24oYykge1xyXG4gICAgdmFyIHIgPSAoZCArIE1hdGgucmFuZG9tKCkgKiAxNikgJSAxNiB8IDA7XHJcbiAgICBkID0gTWF0aC5mbG9vcihkIC8gMTYpO1xyXG4gICAgcmV0dXJuIChjID09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCkpLnRvU3RyaW5nKDE2KTtcclxuICB9KTtcclxuICByZXR1cm4gdXVpZDtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZW5lcmF0ZVVVSUQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRpbWFnZW9yaWVudGF0aW9uKGZpbGUsIGNhbGxiYWNrKSB7XHJcbiAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICB2YXIgbGVuZ3RoO1xyXG4gICAgdmFyIG9mZnNldDtcclxuICAgIHZhciBtYXJrZXI7XHJcbiAgICB2YXIgbGl0dGxlO1xyXG4gICAgdmFyIHRhZ3M7XHJcblxyXG4gICAgaWYgKHZpZXcuZ2V0VWludDE2KDAsIGZhbHNlKSAhPSAweEZGRDgpIHtcclxuICAgICAgcmV0dXJuIGNhbGxiYWNrKC0yKTtcclxuICAgIH1cclxuXHJcbiAgICBsZW5ndGggPSB2aWV3LmJ5dGVMZW5ndGg7XHJcbiAgICBvZmZzZXQgPSAyO1xyXG4gICAgd2hpbGUgKG9mZnNldCA8IGxlbmd0aCkge1xyXG4gICAgICBtYXJrZXIgPSB2aWV3LmdldFVpbnQxNihvZmZzZXQsIGZhbHNlKTtcclxuICAgICAgb2Zmc2V0ICs9IDI7XHJcbiAgICAgIGlmIChtYXJrZXIgPT0gMHhGRkUxKSB7XHJcbiAgICAgICAgaWYgKHZpZXcuZ2V0VWludDMyKG9mZnNldCArPSAyLCBmYWxzZSkgIT0gMHg0NTc4Njk2Nikge1xyXG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKC0xKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxpdHRsZSA9IHZpZXcuZ2V0VWludDE2KG9mZnNldCArPSA2LCBmYWxzZSkgPT0gMHg0OTQ5O1xyXG4gICAgICAgIG9mZnNldCArPSB2aWV3LmdldFVpbnQzMihvZmZzZXQgKyA0LCBsaXR0bGUpO1xyXG4gICAgICAgIHRhZ3MgPSB2aWV3LmdldFVpbnQxNihvZmZzZXQsIGxpdHRsZSk7XHJcbiAgICAgICAgb2Zmc2V0ICs9IDI7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWdzOyBpKyspIHtcclxuICAgICAgICAgIGlmICh2aWV3LmdldFVpbnQxNihvZmZzZXQgKyAoaSAqIDEyKSwgbGl0dGxlKSA9PSAweDAxMTIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHZpZXcuZ2V0VWludDE2KG9mZnNldCArIChpICogMTIpICsgOCwgbGl0dGxlKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSBlbHNlIGlmICgobWFya2VyICYgMHhGRjAwKSAhPSAweEZGMDApIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvZmZzZXQgKz0gdmlldy5nZXRVaW50MTYob2Zmc2V0LCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2FsbGJhY2soLTEpO1xyXG4gIH07XHJcbiAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRVcmwoKSB7XHJcbiAgICByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wgKycvLycrXHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhvc3RuYW1lICtcclxuICAgICAgICAgICAgKGxvY2F0aW9uLnBvcnQ/XCI6XCIrbG9jYXRpb24ucG9ydDpcIlwiKSArXHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnBhdGhuYW1lO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbWFnZXJlc2l6ZXIoaW1hZ2VEYXRhLCBvcHRfb3B0aW9ucywgb3JpZW50YXRpb24sIGNhbGxiYWNrKSB7XHJcbiAgdmFyIGZpbGVUeXBlID0gaW1hZ2VEYXRhLnNwbGl0KCc7JylbMF0uc3BsaXQoJy8nKVsxXTtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zO1xyXG4gIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5cclxuICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbihpbWFnZUV2ZW50KSB7XHJcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgdmFyIG1heF9zaXplID0gb3B0aW9ucy5tYXhTaXplIHx8IDYwMDtcclxuICAgIHZhciB3aWR0aCA9IGltYWdlLndpZHRoO1xyXG4gICAgdmFyIGhlaWdodCA9IGltYWdlLmhlaWdodDtcclxuICAgIHZhciB0cmFuc2xhdGVXaWR0aDtcclxuICAgIHZhciB0cmFuc2xhdGVIZWlnaHQ7XHJcbiAgICB2YXIgcm90YXRpb247XHJcbiAgICB2YXIgZGF0YVVybDtcclxuXHJcbiAgICBpZiAod2lkdGggPiBoZWlnaHQpIHtcclxuICAgICAgaWYgKHdpZHRoID4gbWF4X3NpemUpIHtcclxuICAgICAgICBoZWlnaHQgKj0gbWF4X3NpemUgLyB3aWR0aDtcclxuICAgICAgICB3aWR0aCA9IG1heF9zaXplO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoaGVpZ2h0ID4gbWF4X3NpemUpIHtcclxuICAgICAgICB3aWR0aCAqPSBtYXhfc2l6ZSAvIGhlaWdodDtcclxuICAgICAgICBoZWlnaHQgPSBtYXhfc2l6ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICBpZiAob3JpZW50YXRpb24lMiA9PT0gMCkge1xyXG4gICAgICBjYW52YXMud2lkdGggPSBoZWlnaHQ7XHJcbiAgICAgIGNhbnZhcy5oZWlnaHQgPSB3aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBzd2l0Y2ggKG9yaWVudGF0aW9uKSB7XHJcbiAgICAgIGNhc2UgMTpcclxuICAgICAgICB0cmFuc2xhdGVXaWR0aCA9IDA7XHJcbiAgICAgICAgdHJhbnNsYXRlSGVpZ2h0ID0gMDtcclxuICAgICAgICByb3RhdGlvbiA9IDA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgICB0cmFuc2xhdGVXaWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgICAgICB0cmFuc2xhdGVIZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xyXG4gICAgICAgIHJvdGF0aW9uID0gMTgwO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDY6XHJcbiAgICAgICAgdHJhbnNsYXRlV2lkdGggPSBjYW52YXMud2lkdGg7XHJcbiAgICAgICAgdHJhbnNsYXRlSGVpZ2h0ID0gMDtcclxuICAgICAgICByb3RhdGlvbiA9IDkwO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDg6XHJcbiAgICAgICAgdHJhbnNsYXRlV2lkdGggPSAwO1xyXG4gICAgICAgIHRyYW5zbGF0ZUhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgcm90YXRpb24gPSAyNzA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdHJhbnNsYXRlV2lkdGggPSAwO1xyXG4gICAgICAgIHRyYW5zbGF0ZUhlaWdodCA9IDA7XHJcbiAgICAgICAgcm90YXRpb24gPSAwO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnRleHQudHJhbnNsYXRlKHRyYW5zbGF0ZVdpZHRoLHRyYW5zbGF0ZUhlaWdodCk7XHJcbiAgICBjb250ZXh0LnJvdGF0ZShyb3RhdGlvbipNYXRoLlBJLzE4MCk7XHJcbiAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICBkYXRhVXJsID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvJyArIGZpbGVUeXBlKTtcclxuICAgIGNhbGxiYWNrKGRhdGFVcmwpO1xyXG4gIH1cclxuXHJcbiAgaW1hZ2Uuc3JjID0gaW1hZ2VEYXRhO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNFbWJlZGRlZCh0YXJnZXQpIHtcclxuICBpZiAod2luZG93LnRvcCAhPT0gd2luZG93LnNlbGYgfHwgJCh0YXJnZXQpLnBhcmVudCgpLmlzKCdCT0RZJykgPT09IGZhbHNlKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNVcmwocykge1xyXG4gICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cCgnXig/OlthLXpdKzopPy8vJywgJ2knKTtcclxuICAgcmV0dXJuIHJlZ2V4cC50ZXN0KHMpO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBudW1iZXJGb3JtYXR0ZXIobnVtYmVyVG9Gb3JtYXQpIHtcclxuICB2YXIgbnIgPSBudW1iZXJUb0Zvcm1hdDtcclxuICB2YXIgbGVuZ3RoID0gbnIudG9TdHJpbmcoKS5sZW5ndGg7XHJcbiAgaWYgKGxlbmd0aCA+IDMpIHtcclxuICAgIHZhciBkZWxpbWl0ZXIgPSAnICc7IC8vd2hpdGUgc3BhY2UgYXMgZGVsaW1pdGVyXHJcblxyXG4gICAgLy9Sb3VuZCBieSBmYWN0b3JcclxuICAgIGlmIChuciA+PSAxMDAwKSB7XHJcbiAgICAgIHZhciBmYWN0b3IgPSBNYXRoLnBvdygxMCwgbGVuZ3RoKSAvIDEwMDAwO1xyXG4gICAgICBuciA9IE1hdGgucm91bmQobnIgLyBmYWN0b3IpICogZmFjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBuclN0ciA9IG5yLnRvU3RyaW5nKCk7XHJcbiAgICB2YXIgYSA9IFtdO1xyXG4gICAgd2hpbGUgKG5yU3RyLmxlbmd0aCA+IDMpIHtcclxuICAgICAgdmFyIG4gPSBuclN0ci5zdWJzdHIobnJTdHIubGVuZ3RoIC0gMyk7XHJcbiAgICAgIGEudW5zaGlmdChuKTtcclxuICAgICAgbnJTdHIgPSBuclN0ci5zdWJzdHIoMCwgbnJTdHIubGVuZ3RoIC0gMyk7XHJcbiAgICB9XHJcbiAgICBpZiAobnJTdHIubGVuZ3RoID4gMCkge1xyXG4gICAgICBhLnVuc2hpZnQobnJTdHIpO1xyXG4gICAgfVxyXG4gICAgbnJTdHIgPSBhLmpvaW4oZGVsaW1pdGVyKTtcclxuICAgIHJldHVybiBuclN0cjtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIG5yLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZW5kZXJFcnJvcih0eXBlLCBlbCkge1xyXG4gIGlmICh0eXBlID09PSAnYnJvd3NlcicpIHtcclxuICAgIHJlbmRlckJyb3dzZXJFcnJvcihlbCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJCcm93c2VyRXJyb3IoZWwpIHtcclxuICAgIHZhciBtZXNzYWdlID0gJ0RldCBzZXIgdXQgc29tIGF0dCBkdSBhbnbDpG5kZXIgZW4gZsO2csOlbGRyYWQgd2ViYmzDpHNhcmUuIFByb3ZhIGF0dCB1cHBncmFkZXJhIGRpbiB3ZWJibMOkc2FyZSBmw7ZyIGF0dCB2aXNhIGthcnRhbi4nXHJcbiAgICB2YXIgZWxNZXNzYWdlID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2JywgbWVzc2FnZSwge1xyXG4gICAgICBjbHM6ICdvLW5vLW1hcC1tZXNzYWdlJ1xyXG4gICAgfSk7XHJcbiAgICB2YXIgY29udGFpbmVyID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2JywgZWxNZXNzYWdlLCB7XHJcbiAgICAgIGNsczogJ28tbm8tbWFwJ1xyXG4gICAgfSk7XHJcbiAgICAkKGZ1bmN0aW9uKCkge1xyXG4gICAgICAkKGVsKS5hcHBlbmQoY29udGFpbmVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBSZXBsYWNlciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICB2YXIgc3RhcnQgPSB1bmRlZmluZWQ7XHJcbiAgdmFyIGVuZCA9IHVuZGVmaW5lZDtcclxuICB2YXIgaGVscGVyID0gdW5kZWZpbmVkO1xyXG4gIHZhciBoZWxwZXJOUyA9IHVuZGVmaW5lZDtcclxuICB2YXIgaGVscGVyQXJnID0gdW5kZWZpbmVkO1xyXG5cclxuICBmdW5jdGlvbiByZXBsYWNlKG5hbWUsIG9iaiwgb3B0aW9ucykge1xyXG4gICAgICBzdGFydCA9IG9wdGlvbnMuc3RhcnQgfHwgJ3t7JztcclxuICAgICAgZW5kID0gb3B0aW9ucy5lbmQgfHwgJ319JztcclxuICAgICAgaGVscGVyID0gb3B0aW9ucy5oZWxwZXIgfHwge307XHJcbiAgICAgIGhlbHBlck5TID0gb3B0aW9ucy5oZWxwZXJOUyB8fCAnQCc7XHJcbiAgICAgIGhlbHBlckFyZyA9IFtvcHRpb25zLmhlbHBlckFyZ10gfHwgW107XHJcblxyXG4gICAgICB2YXIgcmVzdWx0ID0gc2VhcmNoQW5kUmVwbGFjZShuYW1lLCBvYmopO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VhcmNoQW5kUmVwbGFjZShuYW1lLCBvYmopIHtcclxuICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChzdGFydCArICcoLio/KScgKyAgZW5kLCBcImdcIik7XHJcbiAgICAgIHZhciBtYXRjaGVzID0gcmVnZXguZXhlYyhuYW1lKTtcclxuICAgICAgaWYobWF0Y2hlcykge1xyXG4gICAgICAgICAgdmFyIHZhbCA9IG9iai5oYXNPd25Qcm9wZXJ0eShtYXRjaGVzWzFdKSA/IG9ialttYXRjaGVzWzFdXSA6ICcnO1xyXG4gICAgICAgICAgaWYgKCF2YWwpIHtcclxuICAgICAgICAgICAgdmFyIG5zSW5kZXggPSBtYXRjaGVzWzBdLmluZGV4T2YoaGVscGVyTlMpO1xyXG4gICAgICAgICAgICBpZiAobnNJbmRleCkge1xyXG4gICAgICAgICAgICAgIHZhciBoZWxwZXJQYXJ0cyA9IGdldEFyZ3MobWF0Y2hlc1sxXSk7XHJcbiAgICAgICAgICAgICAgdmFyIGhlbHBlck5hbWUgPSBoZWxwZXJQYXJ0c1sxXS5zdWJzdHJpbmcobnNJbmRleCAtIDEpO1xyXG4gICAgICAgICAgICAgIHZhciBhcmdzID0gaGVscGVyQXJnLmNvbmNhdChoZWxwZXJQYXJ0c1swXSk7XHJcbiAgICAgICAgICAgICAgdmFsID0gaGVscGVyLmhhc093blByb3BlcnR5KGhlbHBlck5hbWUpID8gaGVscGVyW2hlbHBlck5hbWVdLmFwcGx5KG51bGwsIGFyZ3MpLnRvU3RyaW5nKCkgOiAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHNlYXJjaEFuZFJlcGxhY2UobmFtZS5yZXBsYWNlKG1hdGNoZXNbMF0sIHZhbCksIG9iaik7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gbmFtZTtcclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0QXJncyhzdHIpIHtcclxuICAgIHZhciBhcmdzID0gc3RyLm1hdGNoKC9cXCgoLio/KVxcKS8pO1xyXG4gICAgaWYgKGFyZ3MpIHtcclxuICAgICAgcmV0dXJuIFthcmdzWzFdLnNwbGl0KCcsJyksIHN0ci5zdWJzdHJpbmcoMCwgYXJncy5pbmRleCldO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFsnJyxzdHJdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblx0cmV0dXJuIHtcclxuICBcdFx0cmVwbGFjZTogZnVuY3Rpb24obmFtZSwgb2JqLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICB2YXIgb3B0ID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICAgIHJldHVybiAocmVwbGFjZShuYW1lLCBvYmosIG9wdCkpO1xyXG4gIFx0XHR9XHJcblx0fTtcclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUmVwbGFjZXIoKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgcm91bmQgPSBmdW5jdGlvbiByb3VuZCh2YWx1ZSwgZGVjaW1hbHMpIHtcclxuICByZXR1cm4gTnVtYmVyKE1hdGgucm91bmQodmFsdWUgKyAnZScgKyBkZWNpbWFscykgKyAnZS0nICsgZGVjaW1hbHMpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdW5kO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIHJlbmRlckVycm9yID0gcmVxdWlyZSgnLi9yZW5kZXJlcnJvcicpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdXBwb3J0cyh0eXBlLCBlbCkge1xyXG4gIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKS5nZXRDb250ZXh0O1xyXG4gIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG4gIGlmICghIWNhbnZhcyAmJiAhIXJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlbmRlckVycm9yKCdicm93c2VyJywgZWwpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJpbVVybCh1cmwpIHtcclxuICB2YXIgdHJpbW1lZDtcclxuICBpZiAodXJsLnN1YnN0cmluZyh1cmwubGFzdEluZGV4T2YoJy8nKSkuaW5kZXhPZignLmh0bScpICE9PSAtMSkge1xyXG4gICAgdHJpbW1lZCA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcclxuICB9IGVsc2UgaWYgKHVybC5zdWJzdHIodXJsLmxlbmd0aCAtIDEpICE9PSAnLycpIHtcclxuICAgIHRyaW1tZWQgPSB1cmwgKyAnLyc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRyaW1tZWQgPSB1cmw7XHJcbiAgfVxyXG4gIHJldHVybiB0cmltbWVkO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHVybHBhcnNlciA9IHt9O1xyXG5cclxudXJscGFyc2VyLm9iamVjdGlmeSA9IGZ1bmN0aW9uKG9ialN0cmluZywgb3B0X29wdGlvbnMpIHtcclxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgICB2YXIgZGVsaW1ldGVyID0gb3B0aW9ucy5kZWxpbWV0ZXIgfHwgJy8nO1xyXG4gICAgdmFyIHRvcG1vc3QgPSBvcHRpb25zLnRvcG1vc3QgfHwgJ25hbWUnO1xyXG4gICAgdmFyIHBhcnRzID0gb2JqU3RyaW5nLnNwbGl0KGRlbGltZXRlcik7XHJcbiAgICB2YXIgb2JqID0ge307XHJcbiAgICBpZihvcHRpb25zLnRvcG1vc3QpIHtcclxuICAgICAgICBpZihwYXJ0c1swXSAgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUb3Btb3N0IHZhbHVlIGlzIG1pc3NpbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ialt0b3Btb3N0XSA9IHBhcnRzWzBdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKHBhcnRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBwYXJ0cy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgIG9ialtwYXJ0c1tpXV0gPSBwYXJ0c1tpICsgMV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG51cmxwYXJzZXIuc3RyaW5naWZ5ID0gZnVuY3Rpb24ob2JqLCBvcHRfb3B0aW9ucykge1xyXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICAgIHZhciBkZWxpbWV0ZXIgPSBvcHRpb25zLmRlbGltZXRlciB8fCAnLyc7XHJcbiAgICB2YXIgdG9wbW9zdCA9IG9wdGlvbnMudG9wbW9zdCB8fCB1bmRlZmluZWQ7XHJcbiAgICB2YXIgb2JqU3RyaW5nID0gdG9wbW9zdCA/IG9ialt0b3Btb3N0XSA6ICcnO1xyXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmKGtleSAhPT0gdG9wbW9zdClcclxuICAgICAgICBvYmpTdHJpbmcgKz0gZGVsaW1ldGVyICsga2V5ICsgZGVsaW1ldGVyICsgb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqU3RyaW5nO1xyXG59XHJcbnVybHBhcnNlci5hcnJTdHJpbmdpZnkgPSBmdW5jdGlvbihhcnIsIG9wdF9vcHRpb25zKSB7XHJcbiAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgIHZhciBkZWxpbWV0ZXIgPSBvcHRpb25zLmRlbGltZXRlciB8fCAnLyc7XHJcbiAgIHZhciB0b3Btb3N0ID0gb3B0aW9ucy50b3Btb3N0IHx8ICcnO1xyXG4gICB2YXIgYXJyU3RyaW5nID0gdG9wbW9zdCA/IHRvcG1vc3QgKyBkZWxpbWV0ZXIgOiAnJztcclxuICAgaWYodHlwZW9mIGFyclswXVswXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgYXJyU3RyaW5nICs9IGFyci5qb2luKCcsJyk7XHJcbiAgIH1cclxuICAgZWxzZSB7XHJcbiAgICAgIHZhciBvdXRlciA9IGFyci5tYXAoZnVuY3Rpb24oaW5uZXIpIHtcclxuICAgICAgICAgIHZhciByZXMgPSBpbm5lci5tYXAoZnVuY3Rpb24oaW5uZXJwYXJ0KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGlubmVycGFydC5qb2luKCchJyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qb2luKCcsJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBhcnJTdHJpbmcgKz0gb3V0ZXIuam9pbihvcHRpb25zLmRlbGltZXRlcik7XHJcbiAgIH1cclxuICAgcmV0dXJuIGFyclN0cmluZztcclxufVxyXG51cmxwYXJzZXIuc3RyQXJyYXlpZnkgPSBmdW5jdGlvbihzdHIsIG9wdF9vcHRpb25zKSB7XHJcbiAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgIHZhciBkZWxpbWV0ZXIgPSBvcHRpb25zLmRlbGltZXRlciB8fCAnLyc7XHJcbiAgIHZhciB0b3Btb3N0TmFtZSA9IG9wdF9vcHRpb25zLnRvcG1vc3ROYW1lIHx8ICd0b3Btb3N0JztcclxuICAgdmFyIGFyck5hbWUgPSBvcHRfb3B0aW9ucy5hcnJOYW1lIHx8ICdhcnInO1xyXG4gICB2YXIgdG9wbW9zdCA9IHN0ci5zdWJzdHJpbmcoMCwgc3RyLmluZGV4T2YoZGVsaW1ldGVyKSk7XHJcbiAgIHZhciBhcnJTdHIgPSBzdHIuc3Vic3RyaW5nKHN0ci5pbmRleE9mKGRlbGltZXRlcikgKyAxKTtcclxuICAgdmFyIGFyciA9IGFyclN0ci5zcGxpdChkZWxpbWV0ZXIpLm1hcChmdW5jdGlvbihlbCkge1xyXG4gICAgICAgIHJldHVybiBlbC5zcGxpdCgnIScpO1xyXG4gICB9KTtcclxuICAgdmFyIG9iaiA9IHt9O1xyXG4gICBvYmpbdG9wbW9zdE5hbWVdID0gdG9wbW9zdDtcclxuICAgb2JqW2Fyck5hbWVdID0gYXJyO1xyXG4gICByZXR1cm4gb2JqO1xyXG59XHJcbnVybHBhcnNlci5zdHJJbnRpZnkgPSBmdW5jdGlvbihzdHIsIG9wdF9vcHRpb25zKSB7XHJcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gICAgdmFyIGRlbGltaXRlciA9IG9wdGlvbnMuZGVsaW1pdGVyIHx8ICcsJztcclxuICAgIHZhciBhcnIgPSBzdHIuc3BsaXQoZGVsaW1pdGVyKTtcclxuICAgIHZhciBzdHJUb0ludCA9IGFyci5tYXAoZnVuY3Rpb24oZWwpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc3RyVG9JbnQ7XHJcbn1cclxudXJscGFyc2VyLnN0ckJvb2xlYW4gPSBmdW5jdGlvbihzdHIpIHtcclxuICAgIGlmKHN0ciA9PT0gXCIxXCIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoc3RyID09PSBcIjBcIikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RyaW5nIGlzIG5vdCAxIG9yIDBcIik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbnVybHBhcnNlci5mb3JtYXRVcmwgPSBmdW5jdGlvbihvYmopIHtcclxuICAgIHZhciB1cmwgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyZW50KSB7XHJcbiAgICAgICAgY3VycmVudCA9IHByZXYgPyBcIiZcIiArIGN1cnJlbnQgKyBcIj1cIiArIG9ialtjdXJyZW50XSA6IGN1cnJlbnQgKyBcIj1cIiArIG9ialtjdXJyZW50XTtcclxuICAgICAgICByZXR1cm4gcHJldiArIGN1cnJlbnQ7XHJcbiAgICB9LCBcIlwiKTtcclxuICAgIHJldHVybiB1cmw7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdXJscGFyc2VyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIGlzVXJsID0gcmVxdWlyZSgnLi9pc3VybCcpO1xyXG5cclxuLy9DaGVja3MgaWYgc3RyIGlzIGEgdmFsaWQgdXJsLiBJZiBub3QgYXBwZW5kIHN0ciB0byBiYXNlVXJsXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdmFsaWRhdGVVcmwoc3RyLCBiYXNlVXJsKSB7XHJcbiAgIHZhciB1cmwgPSBpc1VybChzdHIpID8gc3RyIDogYmFzZVVybCArIHN0cjtcclxuICAgcmV0dXJuIHVybDtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4vdGVtcGxhdGVzL3ZpZXdlci5oYW5kbGViYXJzXCIpO1xyXG52YXIgTW9kYWwgPSByZXF1aXJlKCcuL21vZGFsJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIGlzVXJsID0gcmVxdWlyZSgnLi91dGlscy9pc3VybCcpO1xyXG52YXIgZWxRdWVyeSA9IHJlcXVpcmUoJy4vdXRpbHMvZWxxdWVyeScpO1xyXG52YXIgZmVhdHVyZWluZm8gPSByZXF1aXJlKCcuL2ZlYXR1cmVpbmZvJyk7XHJcbnZhciBtYXB1dGlscyA9IHJlcXVpcmUoJy4vbWFwdXRpbHMnKTtcclxudmFyIHN0eWxlID0gcmVxdWlyZSgnLi9zdHlsZScpKCk7XHJcbnZhciBsYXllckNyZWF0b3IgPSByZXF1aXJlKCcuL2xheWVyY3JlYXRvcicpO1xyXG5cclxudmFyIG1hcDtcclxudmFyIHRlbXBsYXRlO1xyXG52YXIgc2V0dGluZ3MgPSB7XHJcbiAgcHJvamVjdGlvbjogJycsXHJcbiAgcHJvamVjdGlvbkNvZGU6ICcnLFxyXG4gIHByb2plY3Rpb25FeHRlbnQ6ICcnLFxyXG4gIGV4dGVudDogW10sXHJcbiAgY2VudGVyOiBbMCwgMF0sXHJcbiAgem9vbTogMCxcclxuICByZXNvbHV0aW9uczogbnVsbCxcclxuICBzb3VyY2U6IHt9LFxyXG4gIGdyb3VwOiBbXSxcclxuICBsYXllcnM6IFtdLFxyXG4gIHN0eWxlczoge30sXHJcbiAgY29udHJvbHM6IFtdLFxyXG4gIGZlYXR1cmVJbmZvT3ZlcmxheTogdW5kZWZpbmVkLFxyXG4gIGVkaXRMYXllcjogbnVsbFxyXG59O1xyXG52YXIgdXJsUGFyYW1zO1xyXG52YXIgZm9vdGVyVGVtcGxhdGUgPSB7fTtcclxuXHJcbmZ1bmN0aW9uIGluaXQoZWwsIG1hcE9wdGlvbnMpIHtcclxuICByZW5kZXIoZWwsIG1hcE9wdGlvbnMpO1xyXG5cclxuICAvLyBSZWFkIGFuZCBzZXQgcHJvamVjdGlvblxyXG4gIGlmIChtYXBPcHRpb25zLmhhc093blByb3BlcnR5KCdwcm9qNERlZnMnKSAmJiB3aW5kb3cucHJvajQpIHtcclxuICAgIHZhciBwcm9qID0gbWFwT3B0aW9uc1sncHJvajREZWZzJ107XHJcblxyXG4gICAgLy9SZWdpc3RlciBwcm9qNCBwcm9qZWN0aW9uIGRlZmluaXRpb25zXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb2oubGVuZ3RoOyBpKyspIHtcclxuICAgICAgcHJvajQuZGVmcyhwcm9qW2ldLmNvZGUsIHByb2pbaV0ucHJvamVjdGlvbik7XHJcbiAgICAgIGlmIChwcm9qW2ldLmhhc093blByb3BlcnR5KCdhbGlhcycpKSB7XHJcbiAgICAgICAgcHJvajQuZGVmcyhwcm9qW2ldLmFsaWFzLCBwcm9qNC5kZWZzKHByb2pbaV0uY29kZSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldHRpbmdzLnBhcmFtcyA9IHVybFBhcmFtcyA9IG1hcE9wdGlvbnMucGFyYW1zIHx8IHt9O1xyXG4gIHNldHRpbmdzLm1hcCA9IG1hcE9wdGlvbnMubWFwO1xyXG4gIHNldHRpbmdzLnVybCA9IG1hcE9wdGlvbnMudXJsO1xyXG4gIHNldHRpbmdzLnRhcmdldCA9IG1hcE9wdGlvbnMudGFyZ2V0O1xyXG4gIHNldHRpbmdzLmJhc2VVcmwgPSBtYXBPcHRpb25zLmJhc2VVcmw7XHJcbiAgaWYgKG1hcE9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3Byb2o0RGVmcycpIHx8IG1hcE9wdGlvbnMucHJvamVjdGlvbkNvZGU9PVwiRVBTRzozODU3XCIgfHwgbWFwT3B0aW9ucy5wcm9qZWN0aW9uQ29kZT09XCJFUFNHOjQzMjZcIikge1xyXG4gICAgLy8gUHJvamVjdGlvbiB0byBiZSB1c2VkIGluIG1hcFxyXG4gICAgc2V0dGluZ3MucHJvamVjdGlvbkNvZGUgPSBtYXBPcHRpb25zLnByb2plY3Rpb25Db2RlIHx8IHVuZGVmaW5lZDtcclxuICAgIHNldHRpbmdzLnByb2plY3Rpb25FeHRlbnQgPSBtYXBPcHRpb25zLnByb2plY3Rpb25FeHRlbnQ7XHJcbiAgICBzZXR0aW5ncy5wcm9qZWN0aW9uID0gbmV3IG9sLnByb2ouUHJvamVjdGlvbih7XHJcbiAgICAgIGNvZGU6IHNldHRpbmdzLnByb2plY3Rpb25Db2RlLFxyXG4gICAgICBleHRlbnQ6IHNldHRpbmdzLnByb2plY3Rpb25FeHRlbnQsXHJcbiAgICAgIHVuaXRzOiBnZXRVbml0cyhzZXR0aW5ncy5wcm9qZWN0aW9uQ29kZSlcclxuICAgIH0pO1xyXG4gICAgc2V0dGluZ3MucmVzb2x1dGlvbnMgPSBtYXBPcHRpb25zLnJlc29sdXRpb25zIHx8IHVuZGVmaW5lZDtcclxuICAgIHNldHRpbmdzLnRpbGVHcmlkID0gbWFwdXRpbHMudGlsZUdyaWQoc2V0dGluZ3MucHJvamVjdGlvbkV4dGVudCwgc2V0dGluZ3MucmVzb2x1dGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgc2V0dGluZ3MuZXh0ZW50ID0gbWFwT3B0aW9ucy5leHRlbnQgfHwgdW5kZWZpbmVkO1xyXG4gIHNldHRpbmdzLmNlbnRlciA9IHVybFBhcmFtcy5jZW50ZXIgfHwgbWFwT3B0aW9ucy5jZW50ZXI7XHJcbiAgc2V0dGluZ3Muem9vbSA9IHVybFBhcmFtcy56b29tIHx8IG1hcE9wdGlvbnMuem9vbTtcclxuICBzZXR0aW5ncy5zb3VyY2UgPSBtYXBPcHRpb25zLnNvdXJjZTtcclxuICBzZXR0aW5ncy5ncm91cHMgPSBtYXBPcHRpb25zLmdyb3VwcztcclxuICBzZXR0aW5ncy5lZGl0TGF5ZXIgPSBtYXBPcHRpb25zLmVkaXRMYXllcjtcclxuICBzZXR0aW5ncy5zdHlsZXMgPSBtYXBPcHRpb25zLnN0eWxlcztcclxuICBzdHlsZS5pbml0KCk7XHJcbiAgc2V0dGluZ3MubGF5ZXJzID0gY3JlYXRlTGF5ZXJzKG1hcE9wdGlvbnMubGF5ZXJzLCB1cmxQYXJhbXMubGF5ZXJzKTtcclxuICBzZXR0aW5ncy5jb250cm9scyA9IG1hcE9wdGlvbnMuY29udHJvbHM7XHJcbiAgc2V0dGluZ3MuY29uc29sZUlkID0gbWFwT3B0aW9ucy5jb25zb2xlSWQgfHwgJ28tY29uc29sZSc7XHJcbiAgc2V0dGluZ3MuZmVhdHVyZWluZm9PcHRpb25zID0gbWFwT3B0aW9ucy5mZWF0dXJlaW5mb09wdGlvbnMgfHwge307XHJcblxyXG4gIC8vSWYgdXJsIGFyZ3VtZW50cywgcGFyc2UgdGhpcyBzZXR0aW5nc1xyXG4gIGlmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XHJcbiAgICBwYXJzZUFyZygpO1xyXG4gIH1cclxuXHJcbiAgbG9hZE1hcCgpO1xyXG5cclxuICBlbFF1ZXJ5KG1hcCwge1xyXG4gICAgYnJlYWtQb2ludHM6IG1hcE9wdGlvbnMuYnJlYWtQb2ludHMsXHJcbiAgICBicmVha1BvaW50c1ByZWZpeDogbWFwT3B0aW9ucy5icmVha1BvaW50c1ByZWZpeCxcclxuICB9KTtcclxuXHJcbiAgaWYgKHVybFBhcmFtcy5waW4pIHtcclxuICAgIHNldHRpbmdzLmZlYXR1cmVpbmZvT3B0aW9ucy5zYXZlZFBpbiA9IHVybFBhcmFtcy5waW47XHJcbiAgfVxyXG5cclxuICAvL1RoaXMgbmVlZHMgZnVydGhlciBkZXZlbG9wbWVudCBmb3IgcHJvcGVyIGhhbmRsaW5nIGluIHBlcm1hbGlua1xyXG4gIGVsc2UgaWYgKHVybFBhcmFtcy5zZWxlY3Rpb24pIHtcclxuICAgIHNldHRpbmdzLmZlYXR1cmVpbmZvT3B0aW9ucy5zYXZlZFNlbGVjdGlvbiA9IG5ldyBvbC5GZWF0dXJlKHtcclxuICAgICAgZ2VvbWV0cnk6IG5ldyBvbC5nZW9tW3VybFBhcmFtcy5zZWxlY3Rpb24uZ2VvbWV0cnlUeXBlXSh1cmxQYXJhbXMuc2VsZWN0aW9uLmNvb3JkaW5hdGVzKVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGZlYXR1cmVpbmZvLmluaXQoc2V0dGluZ3MuZmVhdHVyZWluZm9PcHRpb25zKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxheWVycyhsYXllcmxpc3QsIHNhdmVkTGF5ZXJzKSB7XHJcbiAgdmFyIGxheWVycyA9IFtdO1xyXG4gIGZvciAodmFyIGkgPSBsYXllcmxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgIHZhciBzYXZlZExheWVyID0ge307XHJcbiAgICBpZiAoc2F2ZWRMYXllcnMpIHtcclxuICAgICAgc2F2ZWRMYXllciA9IHNhdmVkTGF5ZXJzW2xheWVybGlzdFtpXS5uYW1lLnNwbGl0KCc6JykucG9wKCldIHx8IHtcclxuICAgICAgICB2aXNpYmxlOiBmYWxzZSxcclxuICAgICAgICBsZWdlbmQ6IGZhbHNlXHJcbiAgICAgIH07XHJcbiAgICAgIHNhdmVkTGF5ZXIubmFtZSA9IGxheWVybGlzdFtpXS5uYW1lO1xyXG4gICAgfVxyXG4gICAgdmFyIGxheWVyID0gJC5leHRlbmQobGF5ZXJsaXN0W2ldLCBzYXZlZExheWVyKTtcclxuICAgIGxheWVycy5wdXNoKGxheWVyQ3JlYXRvcihsYXllcikpO1xyXG4gIH1cclxuICByZXR1cm4gbGF5ZXJzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkTWFwKCkge1xyXG4gIG1hcCA9IG5ldyBvbC5NYXAoe1xyXG4gICAgdGFyZ2V0OiAnby1tYXAnLFxyXG4gICAgbGF5ZXJzOiBzZXR0aW5ncy5sYXllcnMsXHJcbiAgICBjb250cm9sczogW10sXHJcbiAgICB2aWV3OiBuZXcgb2wuVmlldyh7XHJcbiAgICAgIGV4dGVudDogc2V0dGluZ3MuZXh0ZW50IHx8IHVuZGVmaW5lZCxcclxuICAgICAgcHJvamVjdGlvbjogc2V0dGluZ3MucHJvamVjdGlvbiB8fCB1bmRlZmluZWQsXHJcbiAgICAgIGNlbnRlcjogc2V0dGluZ3MuY2VudGVyLFxyXG4gICAgICByZXNvbHV0aW9uczogc2V0dGluZ3MucmVzb2x1dGlvbnMgfHwgdW5kZWZpbmVkLFxyXG4gICAgICB6b29tOiBzZXR0aW5ncy56b29tXHJcbiAgICB9KVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZUFyZygpIHtcclxuICB2YXIgc3RyID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSk7XHJcbiAgdmFyIGVsZW1lbnRzID0gc3RyLnNwbGl0KFwiJlwiKTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgIC8vY2VudGVyIGNvb3JkaW5hdGVzXHJcbiAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgIHZhciB6ID0gZWxlbWVudHNbaV0uc3BsaXQoXCIsXCIpO1xyXG4gICAgICBzZXR0aW5ncy5jZW50ZXJbMF0gPSBwYXJzZUludCh6WzBdKTtcclxuICAgICAgc2V0dGluZ3MuY2VudGVyWzFdID0gcGFyc2VJbnQoelsxXSk7XHJcbiAgICB9IGVsc2UgaWYgKGkgPT0gMSkge1xyXG4gICAgICBzZXR0aW5ncy56b29tID0gcGFyc2VJbnQoZWxlbWVudHNbaV0pO1xyXG4gICAgfSBlbHNlIGlmIChpID09IDIpIHtcclxuICAgICAgdmFyIGwgPSBlbGVtZW50c1tpXS5zcGxpdChcIjtcIik7XHJcbiAgICAgIHZhciBsYXllcnMgPSBzZXR0aW5ncy5sYXllcnM7XHJcbiAgICAgIHZhciBsYSwgbWF0Y2g7XHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGF5ZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgbWF0Y2ggPSAwO1xyXG4gICAgICAgICQuZWFjaChsLCBmdW5jdGlvbihpbmRleCwgZWwpIHtcclxuICAgICAgICAgIGxhID0gZWwuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgICAgaWYgKGxheWVyc1tqXS5nZXQoJ2dyb3VwJykpIHtcclxuICAgICAgICAgICAgaWYgKChsYXllcnNbal0uZ2V0KCdncm91cCcpID09ICdiYWNrZ3JvdW5kJykgJiYgKGxhWzBdID09IGxheWVyc1tqXS5nZXQoJ25hbWUnKSkpIHtcclxuICAgICAgICAgICAgICBsYXllcnNbal0uc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICBtYXRjaCA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGxheWVyc1tqXS5nZXQoJ2dyb3VwJykgPT0gJ2JhY2tncm91bmQnKSAmJiAobWF0Y2ggPT0gMCkpIHtcclxuICAgICAgICAgICAgICBsYXllcnNbal0uc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGFbMF0gPT0gbGF5ZXJzW2pdLmdldCgnbmFtZScpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGxhWzFdID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGxheWVyc1tqXS5zZXQoJ2xlZ2VuZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJzW2pdLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYXllcnNbal0uc2V0KCdsZWdlbmQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGxheWVyc1tqXS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTZXR0aW5ncygpIHtcclxuICByZXR1cm4gc2V0dGluZ3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEV4dGVudCgpIHtcclxuICByZXR1cm4gc2V0dGluZ3MuZXh0ZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRCYXNlVXJsKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5iYXNlVXJsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNYXBOYW1lKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5tYXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRpbGVHcmlkKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy50aWxlR3JpZDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VXJsKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy51cmw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFN0eWxlU2V0dGluZ3MoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnN0eWxlcztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UmVzb2x1dGlvbnMoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnJlc29sdXRpb25zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNYXBVcmwoKSB7XHJcbiAgdmFyIGxheWVyTmFtZXMgPSAnJztcclxuICB2YXIgdXJsO1xyXG5cclxuICAvL2RlbGV0ZSBzZWFyY2ggYXJndW1lbnRzIGlmIHByZXNlbnRcclxuICBpZiAod2luZG93LmxvY2F0aW9uLnNlYXJjaCkge1xyXG4gICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSh3aW5kb3cubG9jYXRpb24uc2VhcmNoLCAnPycpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZiArICc/JztcclxuICB9XHJcbiAgdmFyIG1hcFZpZXcgPSBtYXAuZ2V0VmlldygpO1xyXG4gIHZhciBjZW50ZXIgPSBtYXBWaWV3LmdldENlbnRlcigpO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgMjsgaSsrKSB7XHJcbiAgICBjZW50ZXJbaV0gPSBwYXJzZUludChjZW50ZXJbaV0pOyAvL2Nvb3JkaW5hdGVzIGluIGludGVnZXJzXHJcbiAgfVxyXG4gIHZhciB6b29tID0gbWFwVmlldy5nZXRab29tKCk7XHJcbiAgdmFyIGxheWVycyA9IG1hcC5nZXRMYXllcnMoKTtcclxuXHJcbiAgLy9hZGQgbGF5ZXIgaWYgdmlzaWJsZVxyXG4gIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XHJcbiAgICBpZiAoZWwuZ2V0VmlzaWJsZSgpID09IHRydWUpIHtcclxuICAgICAgbGF5ZXJOYW1lcyArPSBlbC5nZXQoJ25hbWUnKSArICc7JztcclxuICAgIH0gZWxzZSBpZiAoZWwuZ2V0KCdsZWdlbmQnKSA9PSB0cnVlKSB7XHJcbiAgICAgIGxheWVyTmFtZXMgKz0gZWwuZ2V0KCduYW1lJykgKyAnLDE7JztcclxuICAgIH1cclxuICB9KVxyXG4gIHJldHVybiB1cmwgKyBjZW50ZXIgKyAnJicgKyB6b29tICsgJyYnICsgbGF5ZXJOYW1lcy5zbGljZSgwLCBsYXllck5hbWVzLmxhc3RJbmRleE9mKFwiO1wiKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE1hcCgpIHtcclxuICByZXR1cm4gbWFwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMYXllcnMoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLmxheWVycztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TGF5ZXJzQnlQcm9wZXJ0eShrZXksIHZhbCwgYnlOYW1lKSB7XHJcbiAgdmFyIGxheWVycyA9IG1hcC5nZXRMYXllcnMoKS5nZXRBcnJheSgpLmZpbHRlcihmdW5jdGlvbihsYXllcikge1xyXG4gICAgaWYgKGxheWVyLmdldChrZXkpKSB7XHJcbiAgICAgIGlmIChsYXllci5nZXQoa2V5KSA9PT0gdmFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGxheWVyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGlmIChieU5hbWUpIHtcclxuICAgIHJldHVybiBsYXllcnMubWFwKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgIHJldHVybiBsYXllci5nZXQoJ25hbWUnKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gbGF5ZXJzO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TGF5ZXIobGF5ZXJuYW1lKSB7XHJcbiAgdmFyIGxheWVyID0gJC5ncmVwKHNldHRpbmdzLmxheWVycywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICByZXR1cm4gKG9iai5nZXQoJ25hbWUnKSA9PSBsYXllcm5hbWUpO1xyXG4gIH0pO1xyXG4gIHJldHVybiBsYXllclswXTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UXVlcnlhYmxlTGF5ZXJzKCkge1xyXG4gIHZhciBxdWVyeWFibGVMYXllcnMgPSBzZXR0aW5ncy5sYXllcnMuZmlsdGVyKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICBpZiAobGF5ZXIuZ2V0KCdxdWVyeWFibGUnKSAmJiBsYXllci5nZXRWaXNpYmxlKCkpIHtcclxuICAgICAgcmV0dXJuIGxheWVyO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiBxdWVyeWFibGVMYXllcnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEdyb3VwKGdyb3VwKSB7XHJcbiAgdmFyIGdyb3VwID0gJC5ncmVwKHNldHRpbmdzLmxheWVycywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICByZXR1cm4gKG9iai5nZXQoJ2dyb3VwJykgPT0gZ3JvdXApO1xyXG4gIH0pO1xyXG4gIHJldHVybiBncm91cDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0R3JvdXBzKG9wdCkge1xyXG4gIGlmKG9wdCA9PSAndG9wJykge1xyXG4gICAgcmV0dXJuIHNldHRpbmdzLmdyb3VwcztcclxuICB9IGVsc2UgaWYgKG9wdCA9PSAnc3ViJykge1xyXG4gICAgcmV0dXJuIGdldFN1Ymdyb3VwcygpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gc2V0dGluZ3MuZ3JvdXBzLmNvbmNhdChnZXRTdWJncm91cHMoKSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTdWJncm91cHMoKSB7XHJcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdO1xyXG5cclxuICBmdW5jdGlvbiBmaW5kU3ViZ3JvdXBzKGdyb3Vwcywgbikge1xyXG4gICAgaWYgKG4gPj0gZ3JvdXBzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGdyb3Vwc1tuXS5ncm91cHMpIHtcclxuICAgICAgZ3JvdXBzW25dLmdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uKHN1Ymdyb3VwKSB7XHJcbiAgICAgICAgc3ViZ3JvdXBzLnB1c2goc3ViZ3JvdXApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZpbmRTdWJncm91cHMoZ3JvdXBzW25dLmdyb3VwcywgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZFN1Ymdyb3Vwcyhncm91cHMsIG4rMSk7XHJcbiAgfVxyXG5cclxuICBmaW5kU3ViZ3JvdXBzKHNldHRpbmdzLmdyb3VwcywgMCk7XHJcbiAgcmV0dXJuIHN1Ymdyb3VwcztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UHJvamVjdGlvbkNvZGUoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnByb2plY3Rpb25Db2RlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQcm9qZWN0aW9uKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5wcm9qZWN0aW9uO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNYXBTb3VyY2UoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnNvdXJjZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29udHJvbE5hbWVzKCkge1xyXG4gIHZhciBjb250cm9sTmFtZXMgPSBzZXR0aW5ncy5jb250cm9scy5tYXAoZnVuY3Rpb24ob2JqKSB7XHJcbiAgICByZXR1cm4gb2JqLm5hbWU7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGNvbnRyb2xOYW1lcztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy50YXJnZXQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrU2NhbGUoc2NhbGUsIG1heFNjYWxlLCBtaW5TY2FsZSkge1xyXG4gIGlmIChtYXhTY2FsZSB8fCBtaW5TY2FsZSkge1xyXG5cclxuICAgIC8vIEFsdGVyIDE6IG1heHNjYWxlIGFuZCBtaW5zY2FsZVxyXG4gICAgaWYgKG1heFNjYWxlICYmIG1pblNjYWxlKSB7XHJcbiAgICAgIGlmICgoc2NhbGUgPiBtYXhTY2FsZSkgJiYgKHNjYWxlIDwgbWluU2NhbGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBBbHRlciAyOiBvbmx5IG1heHNjYWxlXHJcbiAgICBlbHNlIGlmIChtYXhTY2FsZSkge1xyXG4gICAgICBpZiAoc2NhbGUgPiBtYXhTY2FsZSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWx0ZXIgMzogb25seSBtaW5zY2FsZVxyXG4gICAgZWxzZSBpZiAobWluU2NhbGUpIHtcclxuICAgICAgaWYgKHNjYWxlIDwgbWluU2NhbGUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQWx0ZXIgNDogbm8gc2NhbGUgbGltaXRcclxuICBlbHNlIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29uc29sZUlkKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5jb25zb2xlSWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFNjYWxlKHJlc29sdXRpb24pIHtcclxuICB2YXIgZHBpID0gMjUuNCAvIDAuMjg7XHJcbiAgdmFyIG1wdSA9IHNldHRpbmdzLnByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xyXG4gIHZhciBzY2FsZSA9IHJlc29sdXRpb24gKiBtcHUgKiAzOS4zNyAqIGRwaTtcclxuICBzY2FsZSA9IE1hdGgucm91bmQoc2NhbGUpO1xyXG4gIHJldHVybiBzY2FsZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VW5pdHMocHJvaikge1xyXG4gIHZhciB1bml0cztcclxuICBzd2l0Y2gocHJvaikge1xyXG4gICAgY2FzZSAnRVBTRzozODU3JzpcclxuICAgICAgdW5pdHMgPSAnbSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnRVBTRzo0MzI2JzpcclxuICAgICAgdW5pdHMgPSAnZGVncmVlcyc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgdW5pdHMgPSBwcm9qNC5kZWZzKHByb2opID8gcHJvajQuZGVmcyhwcm9qKS51bml0cyA6IHVuZGVmaW5lZDtcclxuICB9XHJcbiAgcmV0dXJuIHVuaXRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhdXRvUGFuKCkge1xyXG4gIC8qV29ya2Fyb3VuZCB0byByZW1vdmUgd2hlbiBhdXRvcGFuIGltcGxlbWVudGVkIGZvciBvdmVybGF5cyAqL1xyXG4gIHZhciBlbCA9ICQoJy5vLXBvcHVwJyk7XHJcbiAgdmFyIGNlbnRlciA9IG1hcC5nZXRWaWV3KCkuZ2V0Q2VudGVyKCk7XHJcbiAgdmFyIHBvcHVwT2Zmc2V0ID0gJChlbCkub2Zmc2V0KCk7XHJcbiAgdmFyIG1hcE9mZnNldCA9ICQoJyMnICsgbWFwLmdldFRhcmdldCgpKS5vZmZzZXQoKTtcclxuICB2YXIgb2Zmc2V0WSA9IHBvcHVwT2Zmc2V0LnRvcCAtIG1hcE9mZnNldC50b3A7XHJcbiAgdmFyIG1hcFNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xyXG4gIHZhciBvZmZzZXRYID0gKG1hcE9mZnNldC5sZWZ0ICsgbWFwU2l6ZVswXSkgLSAocG9wdXBPZmZzZXQubGVmdCArICQoZWwpLm91dGVyV2lkdGgodHJ1ZSkpO1xyXG5cclxuICAvLyBDaGVjayBpZiBtYXBtZW51IHdpZGdldCBpcyB1c2VkIGFuZCBvcGVuZWRcclxuICB2YXIgbWVudVNpemUgPSAwO1xyXG4gIGlmIChzZXR0aW5ncy5jb250cm9scy5oYXNPd25Qcm9wZXJ0eSgnbWFwbWVudScpKSB7XHJcbiAgICBtZW51U2l6ZSA9IHNldHRpbmdzLmNvbnRyb2xzLm1hcG1lbnUuZ2V0VGFyZ2V0KCkub2Zmc2V0KCkubGVmdCA+IDAgPyBtYXBTaXplWzBdIC0gc2V0dGluZ3MuY29udHJvbHMubWFwbWVudS5nZXRUYXJnZXQoKS5vZmZzZXQoKS5sZWZ0IDogbWVudVNpemUgPSAwO1xyXG4gIH1cclxuICBpZiAob2Zmc2V0WSA8IDAgfHwgb2Zmc2V0WCA8IDAgKyBtZW51U2l6ZSB8fCBvZmZzZXRYID4gKG1hcFNpemVbMF0gLSAkKGVsKS5vdXRlcldpZHRoKHRydWUpKSkge1xyXG4gICAgdmFyIGR4ID0gMCxcclxuICAgICAgZHkgPSAwO1xyXG4gICAgaWYgKG9mZnNldFggPCAwICsgbWVudVNpemUpIHtcclxuICAgICAgZHggPSAoLW9mZnNldFggKyBtZW51U2l6ZSkgKiBtYXAuZ2V0VmlldygpLmdldFJlc29sdXRpb24oKTtcclxuICAgIH1cclxuICAgIGlmIChvZmZzZXRYID4gKG1hcFNpemVbMF0gLSAkKGVsKS5vdXRlcldpZHRoKHRydWUpKSkge1xyXG4gICAgICBkeCA9IC0oJChlbCkub3V0ZXJXaWR0aCh0cnVlKSAtIChtYXBTaXplWzBdIC0gb2Zmc2V0WCkpICogbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBpZiAob2Zmc2V0WSA8IDApIHtcclxuICAgICAgZHkgPSAoLW9mZnNldFkpICogbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBtYXAuZ2V0VmlldygpLmFuaW1hdGUoe1xyXG4gICAgICBjZW50ZXI6IChbY2VudGVyWzBdICsgZHgsIGNlbnRlclsxXSArIGR5XSksXHJcblx0ICBkdXJhdGlvbjozMDBcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKkVuZCB3b3JrYXJvdW5kKi9cclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlT3ZlcmxheXMob3ZlcmxheXMpIHtcclxuICBpZiAob3ZlcmxheXMpIHtcclxuICAgIGlmIChvdmVybGF5cy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgfHwgb3ZlcmxheXMgaW5zdGFuY2VvZiBvbC5Db2xsZWN0aW9uKSB7XHJcbiAgICAgIG92ZXJsYXlzLmZvckVhY2goZnVuY3Rpb24ob3ZlcmxheSkge1xyXG4gICAgICAgIG1hcC5yZW1vdmVPdmVybGF5KG92ZXJsYXkpO1xyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbWFwLnJlbW92ZU92ZXJsYXkob3ZlcmxheXMpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBtYXAuZ2V0T3ZlcmxheXMoKS5jbGVhcigpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKGVsLCBtYXBPcHRpb25zKSB7XHJcbiAgICBpZiAobWFwT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnZm9vdGVyJykpIHtcclxuICAgICAgaWYgKG1hcE9wdGlvbnMuZm9vdGVyWzBdLmhhc093blByb3BlcnR5KCdpbWcnKSkge1xyXG4gICAgICAgIGZvb3RlclRlbXBsYXRlLmltZyA9IG1hcE9wdGlvbnMuZm9vdGVyWzBdLmltZztcclxuICAgICAgfVxyXG4gICAgICBpZiAobWFwT3B0aW9ucy5mb290ZXJbMF0uaGFzT3duUHJvcGVydHkoJ3RleHQnKSkge1xyXG4gICAgICAgIGZvb3RlclRlbXBsYXRlLnRleHQgPSBtYXBPcHRpb25zLmZvb3RlclswXS50ZXh0O1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChtYXBPcHRpb25zLmZvb3RlclswXS5oYXNPd25Qcm9wZXJ0eSgndXJsJykpIHtcclxuICAgICAgICBmb290ZXJUZW1wbGF0ZS51cmwgPSBtYXBPcHRpb25zLmZvb3RlclswXS51cmw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG1hcE9wdGlvbnMuZm9vdGVyWzBdLmhhc093blByb3BlcnR5KCd1cmxUZXh0JykpIHtcclxuICAgICAgICBmb290ZXJUZW1wbGF0ZS51cmxUZXh0ID0gbWFwT3B0aW9ucy5mb290ZXJbMF0udXJsVGV4dDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICQoZWwpLmh0bWwodGVtcGxhdGUoZm9vdGVyVGVtcGxhdGUpKTtcclxuICB9XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gaW5pdDtcclxubW9kdWxlLmV4cG9ydHMuY3JlYXRlTGF5ZXJzID0gY3JlYXRlTGF5ZXJzO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRCYXNlVXJsID0gZ2V0QmFzZVVybDtcclxubW9kdWxlLmV4cG9ydHMuZ2V0RXh0ZW50ID0gZ2V0RXh0ZW50O1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRTZXR0aW5ncyA9IGdldFNldHRpbmdzO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRTdHlsZVNldHRpbmdzID0gZ2V0U3R5bGVTZXR0aW5ncztcclxubW9kdWxlLmV4cG9ydHMuZ2V0TWFwVXJsID0gZ2V0TWFwVXJsO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRNYXAgPSBnZXRNYXA7XHJcbm1vZHVsZS5leHBvcnRzLmdldExheWVycyA9IGdldExheWVycztcclxubW9kdWxlLmV4cG9ydHMuZ2V0TGF5ZXJzQnlQcm9wZXJ0eSA9IGdldExheWVyc0J5UHJvcGVydHk7XHJcbm1vZHVsZS5leHBvcnRzLmdldExheWVyID0gZ2V0TGF5ZXI7XHJcbm1vZHVsZS5leHBvcnRzLmdldENvbnRyb2xOYW1lcyA9IGdldENvbnRyb2xOYW1lcztcclxubW9kdWxlLmV4cG9ydHMuZ2V0UXVlcnlhYmxlTGF5ZXJzID0gZ2V0UXVlcnlhYmxlTGF5ZXJzO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRHcm91cCA9IGdldEdyb3VwO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRHcm91cHMgPSBnZXRHcm91cHM7XHJcbm1vZHVsZS5leHBvcnRzLmdldFByb2plY3Rpb25Db2RlID0gZ2V0UHJvamVjdGlvbkNvZGU7XHJcbm1vZHVsZS5leHBvcnRzLmdldFByb2plY3Rpb24gPSBnZXRQcm9qZWN0aW9uO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRNYXBTb3VyY2UgPSBnZXRNYXBTb3VyY2U7XHJcbm1vZHVsZS5leHBvcnRzLmdldFJlc29sdXRpb25zID0gZ2V0UmVzb2x1dGlvbnM7XHJcbm1vZHVsZS5leHBvcnRzLmdldFNjYWxlID0gZ2V0U2NhbGU7XHJcbm1vZHVsZS5leHBvcnRzLmdldFRhcmdldCA9IGdldFRhcmdldDtcclxubW9kdWxlLmV4cG9ydHMuZ2V0VGlsZUdyaWQgPSBnZXRUaWxlR3JpZDtcclxubW9kdWxlLmV4cG9ydHMuYXV0b1BhbiA9IGF1dG9QYW47XHJcbm1vZHVsZS5leHBvcnRzLnJlbW92ZU92ZXJsYXlzID0gcmVtb3ZlT3ZlcmxheXM7XHJcbm1vZHVsZS5leHBvcnRzLmNoZWNrU2NhbGU9IGNoZWNrU2NhbGU7XHJcbm1vZHVsZS5leHBvcnRzLmdldE1hcE5hbWUgPSBnZXRNYXBOYW1lO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRDb25zb2xlSWQgPSBnZXRDb25zb2xlSWQ7XHJcbm1vZHVsZS5leHBvcnRzLmdldFVybCA9IGdldFVybDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG5cclxudmFyIG1hcDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciB6b29tQ29udHJvbDtcclxuICB2YXIgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgJ28tdG9vbGJhci1uYXZpZ2F0aW9uJztcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcblxyXG4gIHpvb21Db250cm9sID0gbmV3IG9sLmNvbnRyb2wuWm9vbSh7XHJcbiAgICB6b29tSW5UaXBMYWJlbDogJyAnLFxyXG4gICAgem9vbU91dFRpcExhYmVsOiAnICcsXHJcbiAgICB6b29tSW5MYWJlbDogJC5wYXJzZUhUTUwoJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtcGx1c1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1wbHVzXCI+PC91c2U+PC9zdmc+JylbMF0sXHJcbiAgICB6b29tT3V0TGFiZWw6ICQucGFyc2VIVE1MKCc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLW1pbnVzXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLW1pbnVzXCI+PC91c2U+PC9zdmc+JylbMF0sXHJcbiAgICB0YXJnZXQ6IHRhcmdldFxyXG4gIH0pO1xyXG4gIG1hcC5hZGRDb250cm9sKHpvb21Db250cm9sKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IEluaXQ7XHJcbiJdfQ==
