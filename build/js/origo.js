(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.origo = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports = {
  crossDomain: true,
  target: '#app-wrapper',
  svgSpritePath: 'css/svg/',
  svgSprites: ['fa-icons.svg', 'material-icons.svg', 'miscellaneous.svg', 'origo-icons.svg', 'custom.svg'],
  breakPoints: {
    xs: [240, 320],
    s: [320, 320],
    m: [500, 500],
    l: [768, 500]
  },
  breakPointsPrefix: 'o-media',
  defaultControls: [
    {
      "name": "scaleline"
    },
    {
      "name": "zoom"
    },
    {
      "name": "rotate"
    },
    {
      "name": "attribution"
    },
    {
       "name": "fullscreen"
    }
  ]
}

},{}],2:[function(require,module,exports){
var controls = {};
controls.geoposition = require('../src/geoposition');
controls.mapmenu = require('../src/mapmenu');
controls.print = require('../src/print');
controls.sharemap = require('../src/sharemap');
controls.legend = require('../src/legend');
controls.search = require('../src/search');
controls.editor = require('../src/editor');
controls.home = require('../src/home');
controls.measure = require('../src/measure');
controls.about = require('../src/about');
controls.scale = require('../src/scale');
controls.offline = require('../src/offline');
controls.link = require('../src/link');
controls.scaleline = require('../src/scaleline');
controls.zoom = require('../src/zoom');
controls.rotate = require('../src/rotate');
controls.attribution = require('../src/attribution');
controls.position = require('../src/position');
controls.fullscreen = require('../src/fullscreen');
controls.splash = require('../src/splash');

module.exports = controls;

},{"../src/about":99,"../src/attribution":100,"../src/editor":104,"../src/fullscreen":121,"../src/geoposition":125,"../src/home":129,"../src/legend":145,"../src/link":146,"../src/mapmenu":148,"../src/measure":150,"../src/offline":152,"../src/position":168,"../src/print":169,"../src/rotate":170,"../src/scale":171,"../src/scaleline":172,"../src/search":173,"../src/sharemap":174,"../src/splash":176,"../src/zoom":206}],3:[function(require,module,exports){
"function"!==typeof Object.create&&(Object.create=function(f){function g(){}g.prototype=f;return new g});
(function(f,g,k){var l={init:function(a,b){this.$elem=f(b);this.options=f.extend({},f.fn.owlCarousel.options,this.$elem.data(),a);this.userOptions=a;this.loadContent()},loadContent:function(){function a(a){var d,e="";if("function"===typeof b.options.jsonSuccess)b.options.jsonSuccess.apply(this,[a]);else{for(d in a.owl)a.owl.hasOwnProperty(d)&&(e+=a.owl[d].item);b.$elem.html(e)}b.logIn()}var b=this,e;"function"===typeof b.options.beforeInit&&b.options.beforeInit.apply(this,[b.$elem]);"string"===typeof b.options.jsonPath?
(e=b.options.jsonPath,f.getJSON(e,a)):b.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style"));this.$elem.data("owl-originalClasses",this.$elem.attr("class"));this.$elem.css({opacity:0});this.orignalItems=this.options.items;this.checkBrowser();this.wrapperWidth=0;this.checkVisible=null;this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass();this.eventTypes();this.$userItems=this.$elem.children();this.itemsAmount=this.$userItems.length;
this.wrapItems();this.$owlItems=this.$elem.find(".owl-item");this.$owlWrapper=this.$elem.find(".owl-wrapper");this.playDirection="next";this.prevItem=0;this.prevArr=[0];this.currentItem=0;this.customEvents();this.onStartup()},onStartup:function(){this.updateItems();this.calculateAll();this.buildControls();this.updateControls();this.response();this.moveEvents();this.stopOnHover();this.owlStatus();!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle);!0===this.options.autoPlay&&
(this.options.autoPlay=5E3);this.play();this.$elem.find(".owl-wrapper").css("display","block");this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility();this.onstartup=!1;this.eachMoveUpdate();"function"===typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad();!0===this.options.autoHeight&&this.autoHeight();this.onVisibleItems();"function"===typeof this.options.afterAction&&this.options.afterAction.apply(this,
[this.$elem])},updateVars:function(){"function"===typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]);this.watchVisibility();this.updateItems();this.calculateAll();this.updatePosition();this.updateControls();this.eachMoveUpdate();"function"===typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var a=this;g.setTimeout(function(){a.updateVars()},0)},watchVisibility:function(){var a=this;if(!1===a.$elem.is(":visible"))a.$elem.css({opacity:0}),
g.clearInterval(a.autoPlayInterval),g.clearInterval(a.checkVisible);else return!1;a.checkVisible=g.setInterval(function(){a.$elem.is(":visible")&&(a.reload(),a.$elem.animate({opacity:1},200),g.clearInterval(a.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>');this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">');this.wrapperOuter=this.$elem.find(".owl-wrapper-outer");this.$elem.css("display","block")},
baseClass:function(){var a=this.$elem.hasClass(this.options.baseClass),b=this.$elem.hasClass(this.options.theme);a||this.$elem.addClass(this.options.baseClass);b||this.$elem.addClass(this.options.theme)},updateItems:function(){var a,b;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=
!1,this.options.itemsMobile=!1;a=f(this.options.responsiveBaseWidth).width();a>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems);if(!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(a,b){return a[0]-b[0]}),b=0;b<this.options.itemsCustom.length;b+=1)this.options.itemsCustom[b][0]<=a&&(this.options.items=this.options.itemsCustom[b][1]);else a<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),
a<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),a<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),a<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),a<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&
!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var a=this,b,e;if(!0!==a.options.responsive)return!1;e=f(g).width();a.resizer=function(){f(g).width()!==e&&(!1!==a.options.autoPlay&&g.clearInterval(a.autoPlayInterval),g.clearTimeout(b),b=g.setTimeout(function(){e=f(g).width();a.updateVars()},a.options.responsiveRefreshRate))};f(g).resize(a.resizer)},updatePosition:function(){this.jumpTo(this.currentItem);!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var a=
this,b=0,e=a.itemsAmount-a.options.items;a.$owlItems.each(function(c){var d=f(this);d.css({width:a.itemWidth}).data("owl-item",Number(c));if(0===c%a.options.items||c===e)c>e||(b+=1);d.data("owl-roundPages",b)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0});this.appendItemsSizes()},calculateAll:function(){this.calculateWidth();this.appendWrapperSizes();this.loops();this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/
this.options.items)},max:function(){var a=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);this.options.items>this.itemsAmount?this.maximumPixels=a=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=a);return a},min:function(){return 0},loops:function(){var a=0,b=0,e,c;this.positionsInArray=[0];this.pagesInArray=[];for(e=0;e<this.itemsAmount;e+=1)b+=this.itemWidth,this.positionsInArray.push(-b),!0===this.options.scrollPerPage&&(c=f(this.$owlItems[e]),
c=c.data("owl-roundPages"),c!==a&&(this.pagesInArray[a]=this.positionsInArray[e],a=c))},buildControls:function(){if(!0===this.options.navigation||!0===this.options.pagination)this.owlControls=f('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem);!0===this.options.pagination&&this.buildPagination();!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var a=this,b=f('<div class="owl-buttons"/>');a.owlControls.append(b);a.buttonPrev=
f("<div/>",{"class":"owl-prev",html:a.options.navigationText[0]||""});a.buttonNext=f("<div/>",{"class":"owl-next",html:a.options.navigationText[1]||""});b.append(a.buttonPrev).append(a.buttonNext);b.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(a){a.preventDefault()});b.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(b){b.preventDefault();f(this).hasClass("owl-next")?a.next():a.prev()})},buildPagination:function(){var a=this;a.paginationWrapper=
f('<div class="owl-pagination"/>');a.owlControls.append(a.paginationWrapper);a.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(b){b.preventDefault();Number(f(this).data("owl-page"))!==a.currentItem&&a.goTo(Number(f(this).data("owl-page")),!0)})},updatePagination:function(){var a,b,e,c,d,g;if(!1===this.options.pagination)return!1;this.paginationWrapper.html("");a=0;b=this.itemsAmount-this.itemsAmount%this.options.items;for(c=0;c<this.itemsAmount;c+=1)0===c%this.options.items&&
(a+=1,b===c&&(e=this.itemsAmount-this.options.items),d=f("<div/>",{"class":"owl-page"}),g=f("<span></span>",{text:!0===this.options.paginationNumbers?a:"","class":!0===this.options.paginationNumbers?"owl-numbers":""}),d.append(g),d.data("owl-page",b===c?e:c),d.data("owl-roundPages",a),this.paginationWrapper.append(d));this.checkPagination()},checkPagination:function(){var a=this;if(!1===a.options.pagination)return!1;a.paginationWrapper.find(".owl-page").each(function(){f(this).data("owl-roundPages")===
f(a.$owlItems[a.currentItem]).data("owl-roundPages")&&(a.paginationWrapper.find(".owl-page").removeClass("active"),f(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===
this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination();this.checkNavigation();this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(a){if(this.isTransition)return!1;
this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1;if(this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0))if(!0===this.options.rewindNav)this.currentItem=0,a="rewind";else return this.currentItem=this.maximumItem,!1;this.goTo(this.currentItem,a)},prev:function(a){if(this.isTransition)return!1;this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?
this.options.items:1);if(0>this.currentItem)if(!0===this.options.rewindNav)this.currentItem=this.maximumItem,a="rewind";else return this.currentItem=0,!1;this.goTo(this.currentItem,a)},goTo:function(a,b,e){var c=this;if(c.isTransition)return!1;"function"===typeof c.options.beforeMove&&c.options.beforeMove.apply(this,[c.$elem]);a>=c.maximumItem?a=c.maximumItem:0>=a&&(a=0);c.currentItem=c.owl.currentItem=a;if(!1!==c.options.transitionStyle&&"drag"!==e&&1===c.options.items&&!0===c.browser.support3d)return c.swapSpeed(0),
!0===c.browser.support3d?c.transition3d(c.positionsInArray[a]):c.css2slide(c.positionsInArray[a],1),c.afterGo(),c.singleItemTransition(),!1;a=c.positionsInArray[a];!0===c.browser.support3d?(c.isCss3Finish=!1,!0===b?(c.swapSpeed("paginationSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.paginationSpeed)):"rewind"===b?(c.swapSpeed(c.options.rewindSpeed),g.setTimeout(function(){c.isCss3Finish=!0},c.options.rewindSpeed)):(c.swapSpeed("slideSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},
c.options.slideSpeed)),c.transition3d(a)):!0===b?c.css2slide(a,c.options.paginationSpeed):"rewind"===b?c.css2slide(a,c.options.rewindSpeed):c.css2slide(a,c.options.slideSpeed);c.afterGo()},jumpTo:function(a){"function"===typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]);a>=this.maximumItem||-1===a?a=this.maximumItem:0>=a&&(a=0);this.swapSpeed(0);!0===this.browser.support3d?this.transition3d(this.positionsInArray[a]):this.css2slide(this.positionsInArray[a],1);this.currentItem=
this.owl.currentItem=a;this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem);this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2];this.prevArr.shift(0);this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp());"function"===typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop";g.clearInterval(this.autoPlayInterval)},
checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var a=this;a.apStatus="play";if(!1===a.options.autoPlay)return!1;g.clearInterval(a.autoPlayInterval);a.autoPlayInterval=g.setInterval(function(){a.next(!0)},a.options.autoPlay)},swapSpeed:function(a){"slideSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!==typeof a&&this.$owlWrapper.css(this.addCssSpeed(a))},
addCssSpeed:function(a){return{"-webkit-transition":"all "+a+"ms ease","-moz-transition":"all "+a+"ms ease","-o-transition":"all "+a+"ms ease",transition:"all "+a+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(a){return{"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-moz-transform":"translate3d("+a+"px, 0px, 0px)","-o-transform":"translate3d("+a+"px, 0px, 0px)","-ms-transform":"translate3d("+
a+"px, 0px, 0px)",transform:"translate3d("+a+"px, 0px,0px)"}},transition3d:function(a){this.$owlWrapper.css(this.doTranslate(a))},css2move:function(a){this.$owlWrapper.css({left:a})},css2slide:function(a,b){var e=this;e.isCssFinish=!1;e.$owlWrapper.stop(!0,!0).animate({left:a},{duration:b||e.options.slideSpeed,complete:function(){e.isCssFinish=!0}})},checkBrowser:function(){var a=k.createElement("div");a.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)";
a=a.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g);this.browser={support3d:null!==a&&1===a.length,isTouch:"ontouchstart"in g||g.navigator.msMaxTouchPoints}},moveEvents:function(){if(!1!==this.options.mouseDrag||!1!==this.options.touchDrag)this.gestures(),this.disabledEvents()},eventTypes:function(){var a=["s","e","x"];this.ev_types={};!0===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:
!1===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(a=["mousedown.owl","mousemove.owl","mouseup.owl"]);this.ev_types.start=a[0];this.ev_types.move=a[1];this.ev_types.end=a[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(a){a.preventDefault()});this.$elem.on("mousedown.disableTextSelect",function(a){return f(a.target).is("input, textarea, select, option")})},
gestures:function(){function a(a){if(void 0!==a.touches)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(void 0===a.touches){if(void 0!==a.pageX)return{x:a.pageX,y:a.pageY};if(void 0===a.pageX)return{x:a.clientX,y:a.clientY}}}function b(a){"on"===a?(f(k).on(d.ev_types.move,e),f(k).on(d.ev_types.end,c)):"off"===a&&(f(k).off(d.ev_types.move),f(k).off(d.ev_types.end))}function e(b){b=b.originalEvent||b||g.event;d.newPosX=a(b).x-h.offsetX;d.newPosY=a(b).y-h.offsetY;d.newRelativeX=d.newPosX-h.relativePos;
"function"===typeof d.options.startDragging&&!0!==h.dragging&&0!==d.newRelativeX&&(h.dragging=!0,d.options.startDragging.apply(d,[d.$elem]));(8<d.newRelativeX||-8>d.newRelativeX)&&!0===d.browser.isTouch&&(void 0!==b.preventDefault?b.preventDefault():b.returnValue=!1,h.sliding=!0);(10<d.newPosY||-10>d.newPosY)&&!1===h.sliding&&f(k).off("touchmove.owl");d.newPosX=Math.max(Math.min(d.newPosX,d.newRelativeX/5),d.maximumPixels+d.newRelativeX/5);!0===d.browser.support3d?d.transition3d(d.newPosX):d.css2move(d.newPosX)}
function c(a){a=a.originalEvent||a||g.event;var c;a.target=a.target||a.srcElement;h.dragging=!1;!0!==d.browser.isTouch&&d.$owlWrapper.removeClass("grabbing");d.dragDirection=0>d.newRelativeX?d.owl.dragDirection="left":d.owl.dragDirection="right";0!==d.newRelativeX&&(c=d.getNewPosition(),d.goTo(c,!1,"drag"),h.targetElement===a.target&&!0!==d.browser.isTouch&&(f(a.target).on("click.disable",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();f(a.target).off("click.disable")}),
a=f._data(a.target,"events").click,c=a.pop(),a.splice(0,0,c)));b("off")}var d=this,h={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};d.isCssFinish=!0;d.$elem.on(d.ev_types.start,".owl-wrapper",function(c){c=c.originalEvent||c||g.event;var e;if(3===c.which)return!1;if(!(d.itemsAmount<=d.options.items)){if(!1===d.isCssFinish&&!d.options.dragBeforeAnimFinish||!1===d.isCss3Finish&&!d.options.dragBeforeAnimFinish)return!1;
!1!==d.options.autoPlay&&g.clearInterval(d.autoPlayInterval);!0===d.browser.isTouch||d.$owlWrapper.hasClass("grabbing")||d.$owlWrapper.addClass("grabbing");d.newPosX=0;d.newRelativeX=0;f(this).css(d.removeTransition());e=f(this).position();h.relativePos=e.left;h.offsetX=a(c).x-e.left;h.offsetY=a(c).y-e.top;b("on");h.sliding=!1;h.targetElement=c.target||c.srcElement}})},getNewPosition:function(){var a=this.closestItem();a>this.maximumItem?a=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=
a=0);return a},closestItem:function(){var a=this,b=!0===a.options.scrollPerPage?a.pagesInArray:a.positionsInArray,e=a.newPosX,c=null;f.each(b,function(d,g){e-a.itemWidth/20>b[d+1]&&e-a.itemWidth/20<g&&"left"===a.moveDirection()?(c=g,a.currentItem=!0===a.options.scrollPerPage?f.inArray(c,a.positionsInArray):d):e+a.itemWidth/20<g&&e+a.itemWidth/20>(b[d+1]||b[d]-a.itemWidth)&&"right"===a.moveDirection()&&(!0===a.options.scrollPerPage?(c=b[d+1]||b[b.length-1],a.currentItem=f.inArray(c,a.positionsInArray)):
(c=b[d+1],a.currentItem=d+1))});return a.currentItem},moveDirection:function(){var a;0>this.newRelativeX?(a="right",this.playDirection="next"):(a="left",this.playDirection="prev");return a},customEvents:function(){var a=this;a.$elem.on("owl.next",function(){a.next()});a.$elem.on("owl.prev",function(){a.prev()});a.$elem.on("owl.play",function(b,e){a.options.autoPlay=e;a.play();a.hoverStatus="play"});a.$elem.on("owl.stop",function(){a.stop();a.hoverStatus="stop"});a.$elem.on("owl.goTo",function(b,e){a.goTo(e)});
a.$elem.on("owl.jumpTo",function(b,e){a.jumpTo(e)})},stopOnHover:function(){var a=this;!0===a.options.stopOnHover&&!0!==a.browser.isTouch&&!1!==a.options.autoPlay&&(a.$elem.on("mouseover",function(){a.stop()}),a.$elem.on("mouseout",function(){"stop"!==a.hoverStatus&&a.play()}))},lazyLoad:function(){var a,b,e,c,d;if(!1===this.options.lazyLoad)return!1;for(a=0;a<this.itemsAmount;a+=1)b=f(this.$owlItems[a]),"loaded"!==b.data("owl-loaded")&&(e=b.data("owl-item"),c=b.find(".lazyOwl"),"string"!==typeof c.data("src")?
b.data("owl-loaded","loaded"):(void 0===b.data("owl-loaded")&&(c.hide(),b.addClass("loading").data("owl-loaded","checked")),(d=!0===this.options.lazyFollow?e>=this.currentItem:!0)&&e<this.currentItem+this.options.items&&c.length&&this.lazyPreload(b,c)))},lazyPreload:function(a,b){function e(){a.data("owl-loaded","loaded").removeClass("loading");b.removeAttr("data-src");"fade"===d.options.lazyEffect?b.fadeIn(400):b.show();"function"===typeof d.options.afterLazyLoad&&d.options.afterLazyLoad.apply(this,
[d.$elem])}function c(){f+=1;d.completeImg(b.get(0))||!0===k?e():100>=f?g.setTimeout(c,100):e()}var d=this,f=0,k;"DIV"===b.prop("tagName")?(b.css("background-image","url("+b.data("src")+")"),k=!0):b[0].src=b.data("src");c()},autoHeight:function(){function a(){var a=f(e.$owlItems[e.currentItem]).height();e.wrapperOuter.css("height",a+"px");e.wrapperOuter.hasClass("autoHeight")||g.setTimeout(function(){e.wrapperOuter.addClass("autoHeight")},0)}function b(){d+=1;e.completeImg(c.get(0))?a():100>=d?g.setTimeout(b,
100):e.wrapperOuter.css("height","")}var e=this,c=f(e.$owlItems[e.currentItem]).find("img"),d;void 0!==c.get(0)?(d=0,b()):a()},completeImg:function(a){return!a.complete||"undefined"!==typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},onVisibleItems:function(){var a;!0===this.options.addClassActive&&this.$owlItems.removeClass("active");this.visibleItems=[];for(a=this.currentItem;a<this.currentItem+this.options.items;a+=1)this.visibleItems.push(a),!0===this.options.addClassActive&&f(this.$owlItems[a]).addClass("active");
this.owl.visibleItems=this.visibleItems},transitionTypes:function(a){this.outClass="owl-"+a+"-out";this.inClass="owl-"+a+"-in"},singleItemTransition:function(){var a=this,b=a.outClass,e=a.inClass,c=a.$owlItems.eq(a.currentItem),d=a.$owlItems.eq(a.prevItem),f=Math.abs(a.positionsInArray[a.currentItem])+a.positionsInArray[a.prevItem],g=Math.abs(a.positionsInArray[a.currentItem])+a.itemWidth/2;a.isTransition=!0;a.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":g+"px","-moz-perspective-origin":g+
"px","perspective-origin":g+"px"});d.css({position:"relative",left:f+"px"}).addClass(b).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endPrev=!0;d.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(d,b)});c.addClass(e).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endCurrent=!0;c.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(c,e)})},clearTransStyle:function(a,
b){a.css({position:"",left:""}).removeClass(b);this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect");
f(k).off(".owl owl");f(g).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove());this.clearEvents();this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop();g.clearInterval(this.checkVisible);this.unWrap();this.$elem.removeData()},reinit:function(a){a=f.extend({},this.userOptions,
a);this.unWrap();this.init(a,this.$elem)},addItem:function(a,b){var e;if(!a)return!1;if(0===this.$elem.children().length)return this.$elem.append(a),this.setVars(),!1;this.unWrap();e=void 0===b||-1===b?-1:b;e>=this.$userItems.length||-1===e?this.$userItems.eq(-1).after(a):this.$userItems.eq(e).before(a);this.setVars()},removeItem:function(a){if(0===this.$elem.children().length)return!1;a=void 0===a||-1===a?-1:a;this.unWrap();this.$userItems.eq(a).remove();this.setVars()}};f.fn.owlCarousel=function(a){return this.each(function(){if(!0===
f(this).data("owl-init"))return!1;f(this).data("owl-init",!0);var b=Object.create(l);b.init(a,this);f.data(this,"owlCarousel",b)})};f.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1E3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,
responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:g,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}})(jQuery,window,document);

},{}],4:[function(require,module,exports){
module.exports = {
    "loadjQueryPlugin": function() {require("./owl.carousel.min.js");}
};

},{"./owl.carousel.min.js":3}],5:[function(require,module,exports){
/**
 * Simple, lightweight, usable local autocomplete library for modern browsers
 * Because there weren’t enough autocomplete scripts in the world? Because I’m completely insane and have NIH syndrome? Probably both. :P
 * @author Lea Verou http://leaverou.github.io/awesomplete
 * MIT license
 */

(function () {

var _ = function (input, o) {
	var me = this;

	// Setup

	this.isOpened = false;

	this.input = $(input);
	this.input.setAttribute("autocomplete", "off");
	this.input.setAttribute("aria-autocomplete", "list");

	o = o || {};

	configure(this, {
		minChars: 2,
		maxItems: 10,
		autoFirst: false,
		data: _.DATA,
		filter: _.FILTER_CONTAINS,
		sort: o.sort === false ? false : _.SORT_BYLENGTH,
		item: _.ITEM,
		replace: _.REPLACE
	}, o);

	this.index = -1;

	// Create necessary elements

	this.container = $.create("div", {
		className: "awesomplete",
		around: input
	});

	this.ul = $.create("ul", {
		hidden: "hidden",
		inside: this.container
	});

	this.status = $.create("span", {
		className: "visually-hidden",
		role: "status",
		"aria-live": "assertive",
		"aria-relevant": "additions",
		inside: this.container
	});

	// Bind events

	this._events = {
		input: {
			"input": this.evaluate.bind(this),
			"blur": this.close.bind(this, { reason: "blur" }),
			"keydown": function(evt) {
				var c = evt.keyCode;

				// If the dropdown `ul` is in view, then act on keydown for the following keys:
				// Enter / Esc / Up / Down
				if(me.opened) {
					if (c === 13 && me.selected) { // Enter
						evt.preventDefault();
						me.select();
					}
					else if (c === 27) { // Esc
						me.close({ reason: "esc" });
					}
					else if (c === 38 || c === 40) { // Down/Up arrow
						evt.preventDefault();
						me[c === 38? "previous" : "next"]();
					}
				}
			}
		},
		form: {
			"submit": this.close.bind(this, { reason: "submit" })
		},
		ul: {
			"mousedown": function(evt) {
				var li = evt.target;

				if (li !== this) {

					while (li && !/li/i.test(li.nodeName)) {
						li = li.parentNode;
					}

					if (li && evt.button === 0) {  // Only select on left click
						evt.preventDefault();
						me.select(li, evt.target);
					}
				}
			}
		}
	};

	$.bind(this.input, this._events.input);
	$.bind(this.input.form, this._events.form);
	$.bind(this.ul, this._events.ul);

	if (this.input.hasAttribute("list")) {
		this.list = "#" + this.input.getAttribute("list");
		this.input.removeAttribute("list");
	}
	else {
		this.list = this.input.getAttribute("data-list") || o.list || [];
	}

	_.all.push(this);
};

_.prototype = {
	set list(list) {
		if (Array.isArray(list)) {
			this._list = list;
		}
		else if (typeof list === "string" && list.indexOf(",") > -1) {
				this._list = list.split(/\s*,\s*/);
		}
		else { // Element or CSS selector
			list = $(list);

			if (list && list.children) {
				var items = [];
				slice.apply(list.children).forEach(function (el) {
					if (!el.disabled) {
						var text = el.textContent.trim();
						var value = el.value || text;
						var label = el.label || text;
						if (value !== "") {
							items.push({ label: label, value: value });
						}
					}
				});
				this._list = items;
			}
		}

		if (document.activeElement === this.input) {
			this.evaluate();
		}
	},

	get selected() {
		return this.index > -1;
	},

	get opened() {
		return this.isOpened;
	},

	close: function (o) {
		if (!this.opened) {
			return;
		}

		this.ul.setAttribute("hidden", "");
		this.isOpened = false;
		this.index = -1;

		$.fire(this.input, "awesomplete-close", o || {});
	},

	open: function () {
		this.ul.removeAttribute("hidden");
		this.isOpened = true;

		if (this.autoFirst && this.index === -1) {
			this.goto(0);
		}

		$.fire(this.input, "awesomplete-open");
	},

	destroy: function() {
		//remove events from the input and its form
		$.unbind(this.input, this._events.input);
		$.unbind(this.input.form, this._events.form);

		//move the input out of the awesomplete container and remove the container and its children
		var parentNode = this.container.parentNode;

		parentNode.insertBefore(this.input, this.container);
		parentNode.removeChild(this.container);

		//remove autocomplete and aria-autocomplete attributes
		this.input.removeAttribute("autocomplete");
		this.input.removeAttribute("aria-autocomplete");

		//remove this awesomeplete instance from the global array of instances
		var indexOfAwesomplete = _.all.indexOf(this);

		if (indexOfAwesomplete !== -1) {
			_.all.splice(indexOfAwesomplete, 1);
		}
	},

	next: function () {
		var count = this.ul.children.length;
		this.goto(this.index < count - 1 ? this.index + 1 : (count ? 0 : -1) );
	},

	previous: function () {
		var count = this.ul.children.length;
		var pos = this.index - 1;

		this.goto(this.selected && pos !== -1 ? pos : count - 1);
	},

	// Should not be used, highlights specific item without any checks!
	goto: function (i) {
		var lis = this.ul.children;

		if (this.selected) {
			lis[this.index].setAttribute("aria-selected", "false");
		}

		this.index = i;

		if (i > -1 && lis.length > 0) {
			lis[i].setAttribute("aria-selected", "true");
			this.status.textContent = lis[i].textContent;

			// scroll to highlighted element in case parent's height is fixed
			this.ul.scrollTop = lis[i].offsetTop - this.ul.clientHeight + lis[i].clientHeight;

			$.fire(this.input, "awesomplete-highlight", {
				text: this.suggestions[this.index]
			});
		}
	},

	select: function (selected, origin) {
		if (selected) {
			this.index = $.siblingIndex(selected);
		} else {
			selected = this.ul.children[this.index];
		}

		if (selected) {
			var suggestion = this.suggestions[this.index];

			var allowed = $.fire(this.input, "awesomplete-select", {
				text: suggestion,
				origin: origin || selected
			});

			if (allowed) {
				this.replace(suggestion);
				this.close({ reason: "select" });
				$.fire(this.input, "awesomplete-selectcomplete", {
					text: suggestion
				});
			}
		}
	},

	evaluate: function() {
		var me = this;
		var value = this.input.value;

		if (value.length >= this.minChars && this._list.length > 0) {
			this.index = -1;
			// Populate list with options that match
			this.ul.innerHTML = "";

			this.suggestions = this._list
				.map(function(item) {
					return new Suggestion(me.data(item, value));
				})
				.filter(function(item) {
					return me.filter(item, value);
				});

			if (this.sort !== false) {
				this.suggestions = this.suggestions.sort(this.sort);
			}

			this.suggestions = this.suggestions.slice(0, this.maxItems);

			this.suggestions.forEach(function(text) {
					me.ul.appendChild(me.item(text, value));
				});

			if (this.ul.children.length === 0) {
				this.close({ reason: "nomatches" });
			} else {
				this.open();
			}
		}
		else {
			this.close({ reason: "nomatches" });
		}
	}
};

// Static methods/properties

_.all = [];

_.FILTER_CONTAINS = function (text, input) {
	return RegExp($.regExpEscape(input.trim()), "i").test(text);
};

_.FILTER_STARTSWITH = function (text, input) {
	return RegExp("^" + $.regExpEscape(input.trim()), "i").test(text);
};

_.SORT_BYLENGTH = function (a, b) {
	if (a.length !== b.length) {
		return a.length - b.length;
	}

	return a < b? -1 : 1;
};

_.ITEM = function (text, input) {
	var html = input.trim() === "" ? text : text.replace(RegExp($.regExpEscape(input.trim()), "gi"), "<mark>$&</mark>");
	return $.create("li", {
		innerHTML: html,
		"aria-selected": "false"
	});
};

_.REPLACE = function (text) {
	this.input.value = text.value;
};

_.DATA = function (item/*, input*/) { return item; };

// Private functions

function Suggestion(data) {
	var o = Array.isArray(data)
	  ? { label: data[0], value: data[1] }
	  : typeof data === "object" && "label" in data && "value" in data ? data : { label: data, value: data };

	this.label = o.label || o.value;
	this.value = o.value;
}
Object.defineProperty(Suggestion.prototype = Object.create(String.prototype), "length", {
	get: function() { return this.label.length; }
});
Suggestion.prototype.toString = Suggestion.prototype.valueOf = function () {
	return "" + this.label;
};

function configure(instance, properties, o) {
	for (var i in properties) {
		var initial = properties[i],
		    attrValue = instance.input.getAttribute("data-" + i.toLowerCase());

		if (typeof initial === "number") {
			instance[i] = parseInt(attrValue);
		}
		else if (initial === false) { // Boolean options must be false by default anyway
			instance[i] = attrValue !== null;
		}
		else if (initial instanceof Function) {
			instance[i] = null;
		}
		else {
			instance[i] = attrValue;
		}

		if (!instance[i] && instance[i] !== 0) {
			instance[i] = (i in o)? o[i] : initial;
		}
	}
}

// Helpers

var slice = Array.prototype.slice;

function $(expr, con) {
	return typeof expr === "string"? (con || document).querySelector(expr) : expr || null;
}

function $$(expr, con) {
	return slice.call((con || document).querySelectorAll(expr));
}

$.create = function(tag, o) {
	var element = document.createElement(tag);

	for (var i in o) {
		var val = o[i];

		if (i === "inside") {
			$(val).appendChild(element);
		}
		else if (i === "around") {
			var ref = $(val);
			ref.parentNode.insertBefore(element, ref);
			element.appendChild(ref);
		}
		else if (i in element) {
			element[i] = val;
		}
		else {
			element.setAttribute(i, val);
		}
	}

	return element;
};

$.bind = function(element, o) {
	if (element) {
		for (var event in o) {
			var callback = o[event];

			event.split(/\s+/).forEach(function (event) {
				element.addEventListener(event, callback);
			});
		}
	}
};

$.unbind = function(element, o) {
	if (element) {
		for (var event in o) {
			var callback = o[event];

			event.split(/\s+/).forEach(function(event) {
				element.removeEventListener(event, callback);
			});
		}
	}
};

$.fire = function(target, type, properties) {
	var evt = document.createEvent("HTMLEvents");

	evt.initEvent(type, true, true );

	for (var j in properties) {
		evt[j] = properties[j];
	}

	return target.dispatchEvent(evt);
};

$.regExpEscape = function (s) {
	return s.replace(/[-\\^$*+?.()|[\]{}]/g, "\\$&");
};

$.siblingIndex = function (el) {
	/* eslint-disable no-cond-assign */
	for (var i = 0; el = el.previousElementSibling; i++);
	return i;
};

// Initialization

function init() {
	$$("input.awesomplete").forEach(function (input) {
		new _(input);
	});
}

// Are we in a browser? Check for Document constructor
if (typeof Document !== "undefined") {
	// DOM already loaded?
	if (document.readyState !== "loading") {
		init();
	}
	else {
		// Wait for it
		document.addEventListener("DOMContentLoaded", init);
	}
}

_.$ = $;
_.$$ = $$;

// Make sure to export Awesomplete on self when in a browser
if (typeof self !== "undefined") {
	self.Awesomplete = _;
}

// Expose Awesomplete as a CJS module
if (typeof module === "object" && module.exports) {
	module.exports = _;
}

return _;

}());

},{}],6:[function(require,module,exports){
'use strict';

exports.__esModule = true;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

// istanbul ignore next

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }

var _handlebarsBase = require('./handlebars/base');

var base = _interopRequireWildcard(_handlebarsBase);

// Each of these augment the Handlebars object. No need to setup here.
// (This is done to easily share code between commonjs and browse envs)

var _handlebarsSafeString = require('./handlebars/safe-string');

var _handlebarsSafeString2 = _interopRequireDefault(_handlebarsSafeString);

var _handlebarsException = require('./handlebars/exception');

var _handlebarsException2 = _interopRequireDefault(_handlebarsException);

var _handlebarsUtils = require('./handlebars/utils');

var Utils = _interopRequireWildcard(_handlebarsUtils);

var _handlebarsRuntime = require('./handlebars/runtime');

var runtime = _interopRequireWildcard(_handlebarsRuntime);

var _handlebarsNoConflict = require('./handlebars/no-conflict');

var _handlebarsNoConflict2 = _interopRequireDefault(_handlebarsNoConflict);

// For compatibility and usage outside of module systems, make the Handlebars object a namespace
function create() {
  var hb = new base.HandlebarsEnvironment();

  Utils.extend(hb, base);
  hb.SafeString = _handlebarsSafeString2['default'];
  hb.Exception = _handlebarsException2['default'];
  hb.Utils = Utils;
  hb.escapeExpression = Utils.escapeExpression;

  hb.VM = runtime;
  hb.template = function (spec) {
    return runtime.template(spec, hb);
  };

  return hb;
}

var inst = create();
inst.create = create;

_handlebarsNoConflict2['default'](inst);

inst['default'] = inst;

exports['default'] = inst;
module.exports = exports['default'];


},{"./handlebars/base":7,"./handlebars/exception":10,"./handlebars/no-conflict":20,"./handlebars/runtime":21,"./handlebars/safe-string":22,"./handlebars/utils":23}],7:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.HandlebarsEnvironment = HandlebarsEnvironment;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _utils = require('./utils');

var _exception = require('./exception');

var _exception2 = _interopRequireDefault(_exception);

var _helpers = require('./helpers');

var _decorators = require('./decorators');

var _logger = require('./logger');

var _logger2 = _interopRequireDefault(_logger);

var VERSION = '4.0.5';
exports.VERSION = VERSION;
var COMPILER_REVISION = 7;

exports.COMPILER_REVISION = COMPILER_REVISION;
var REVISION_CHANGES = {
  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it
  2: '== 1.0.0-rc.3',
  3: '== 1.0.0-rc.4',
  4: '== 1.x.x',
  5: '== 2.0.0-alpha.x',
  6: '>= 2.0.0-beta.1',
  7: '>= 4.0.0'
};

exports.REVISION_CHANGES = REVISION_CHANGES;
var objectType = '[object Object]';

function HandlebarsEnvironment(helpers, partials, decorators) {
  this.helpers = helpers || {};
  this.partials = partials || {};
  this.decorators = decorators || {};

  _helpers.registerDefaultHelpers(this);
  _decorators.registerDefaultDecorators(this);
}

HandlebarsEnvironment.prototype = {
  constructor: HandlebarsEnvironment,

  logger: _logger2['default'],
  log: _logger2['default'].log,

  registerHelper: function registerHelper(name, fn) {
    if (_utils.toString.call(name) === objectType) {
      if (fn) {
        throw new _exception2['default']('Arg not supported with multiple helpers');
      }
      _utils.extend(this.helpers, name);
    } else {
      this.helpers[name] = fn;
    }
  },
  unregisterHelper: function unregisterHelper(name) {
    delete this.helpers[name];
  },

  registerPartial: function registerPartial(name, partial) {
    if (_utils.toString.call(name) === objectType) {
      _utils.extend(this.partials, name);
    } else {
      if (typeof partial === 'undefined') {
        throw new _exception2['default']('Attempting to register a partial called "' + name + '" as undefined');
      }
      this.partials[name] = partial;
    }
  },
  unregisterPartial: function unregisterPartial(name) {
    delete this.partials[name];
  },

  registerDecorator: function registerDecorator(name, fn) {
    if (_utils.toString.call(name) === objectType) {
      if (fn) {
        throw new _exception2['default']('Arg not supported with multiple decorators');
      }
      _utils.extend(this.decorators, name);
    } else {
      this.decorators[name] = fn;
    }
  },
  unregisterDecorator: function unregisterDecorator(name) {
    delete this.decorators[name];
  }
};

var log = _logger2['default'].log;

exports.log = log;
exports.createFrame = _utils.createFrame;
exports.logger = _logger2['default'];


},{"./decorators":8,"./exception":10,"./helpers":11,"./logger":19,"./utils":23}],8:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.registerDefaultDecorators = registerDefaultDecorators;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _decoratorsInline = require('./decorators/inline');

var _decoratorsInline2 = _interopRequireDefault(_decoratorsInline);

function registerDefaultDecorators(instance) {
  _decoratorsInline2['default'](instance);
}


},{"./decorators/inline":9}],9:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerDecorator('inline', function (fn, props, container, options) {
    var ret = fn;
    if (!props.partials) {
      props.partials = {};
      ret = function (context, options) {
        // Create a new partials stack frame prior to exec.
        var original = container.partials;
        container.partials = _utils.extend({}, original, props.partials);
        var ret = fn(context, options);
        container.partials = original;
        return ret;
      };
    }

    props.partials[options.args[0]] = options.fn;

    return ret;
  });
};

module.exports = exports['default'];


},{"../utils":23}],10:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];

function Exception(message, node) {
  var loc = node && node.loc,
      line = undefined,
      column = undefined;
  if (loc) {
    line = loc.start.line;
    column = loc.start.column;

    message += ' - ' + line + ':' + column;
  }

  var tmp = Error.prototype.constructor.call(this, message);

  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.
  for (var idx = 0; idx < errorProps.length; idx++) {
    this[errorProps[idx]] = tmp[errorProps[idx]];
  }

  /* istanbul ignore else */
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, Exception);
  }

  if (loc) {
    this.lineNumber = line;
    this.column = column;
  }
}

Exception.prototype = new Error();

exports['default'] = Exception;
module.exports = exports['default'];


},{}],11:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.registerDefaultHelpers = registerDefaultHelpers;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _helpersBlockHelperMissing = require('./helpers/block-helper-missing');

var _helpersBlockHelperMissing2 = _interopRequireDefault(_helpersBlockHelperMissing);

var _helpersEach = require('./helpers/each');

var _helpersEach2 = _interopRequireDefault(_helpersEach);

var _helpersHelperMissing = require('./helpers/helper-missing');

var _helpersHelperMissing2 = _interopRequireDefault(_helpersHelperMissing);

var _helpersIf = require('./helpers/if');

var _helpersIf2 = _interopRequireDefault(_helpersIf);

var _helpersLog = require('./helpers/log');

var _helpersLog2 = _interopRequireDefault(_helpersLog);

var _helpersLookup = require('./helpers/lookup');

var _helpersLookup2 = _interopRequireDefault(_helpersLookup);

var _helpersWith = require('./helpers/with');

var _helpersWith2 = _interopRequireDefault(_helpersWith);

function registerDefaultHelpers(instance) {
  _helpersBlockHelperMissing2['default'](instance);
  _helpersEach2['default'](instance);
  _helpersHelperMissing2['default'](instance);
  _helpersIf2['default'](instance);
  _helpersLog2['default'](instance);
  _helpersLookup2['default'](instance);
  _helpersWith2['default'](instance);
}


},{"./helpers/block-helper-missing":12,"./helpers/each":13,"./helpers/helper-missing":14,"./helpers/if":15,"./helpers/log":16,"./helpers/lookup":17,"./helpers/with":18}],12:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerHelper('blockHelperMissing', function (context, options) {
    var inverse = options.inverse,
        fn = options.fn;

    if (context === true) {
      return fn(this);
    } else if (context === false || context == null) {
      return inverse(this);
    } else if (_utils.isArray(context)) {
      if (context.length > 0) {
        if (options.ids) {
          options.ids = [options.name];
        }

        return instance.helpers.each(context, options);
      } else {
        return inverse(this);
      }
    } else {
      if (options.data && options.ids) {
        var data = _utils.createFrame(options.data);
        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.name);
        options = { data: data };
      }

      return fn(context, options);
    }
  });
};

module.exports = exports['default'];


},{"../utils":23}],13:[function(require,module,exports){
'use strict';

exports.__esModule = true;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _utils = require('../utils');

var _exception = require('../exception');

var _exception2 = _interopRequireDefault(_exception);

exports['default'] = function (instance) {
  instance.registerHelper('each', function (context, options) {
    if (!options) {
      throw new _exception2['default']('Must pass iterator to #each');
    }

    var fn = options.fn,
        inverse = options.inverse,
        i = 0,
        ret = '',
        data = undefined,
        contextPath = undefined;

    if (options.data && options.ids) {
      contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';
    }

    if (_utils.isFunction(context)) {
      context = context.call(this);
    }

    if (options.data) {
      data = _utils.createFrame(options.data);
    }

    function execIteration(field, index, last) {
      if (data) {
        data.key = field;
        data.index = index;
        data.first = index === 0;
        data.last = !!last;

        if (contextPath) {
          data.contextPath = contextPath + field;
        }
      }

      ret = ret + fn(context[field], {
        data: data,
        blockParams: _utils.blockParams([context[field], field], [contextPath + field, null])
      });
    }

    if (context && typeof context === 'object') {
      if (_utils.isArray(context)) {
        for (var j = context.length; i < j; i++) {
          if (i in context) {
            execIteration(i, i, i === context.length - 1);
          }
        }
      } else {
        var priorKey = undefined;

        for (var key in context) {
          if (context.hasOwnProperty(key)) {
            // We're running the iterations one step out of sync so we can detect
            // the last iteration without have to scan the object twice and create
            // an itermediate keys array.
            if (priorKey !== undefined) {
              execIteration(priorKey, i - 1);
            }
            priorKey = key;
            i++;
          }
        }
        if (priorKey !== undefined) {
          execIteration(priorKey, i - 1, true);
        }
      }
    }

    if (i === 0) {
      ret = inverse(this);
    }

    return ret;
  });
};

module.exports = exports['default'];


},{"../exception":10,"../utils":23}],14:[function(require,module,exports){
'use strict';

exports.__esModule = true;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _exception = require('../exception');

var _exception2 = _interopRequireDefault(_exception);

exports['default'] = function (instance) {
  instance.registerHelper('helperMissing', function () /* [args, ]options */{
    if (arguments.length === 1) {
      // A missing field in a {{foo}} construct.
      return undefined;
    } else {
      // Someone is actually trying to call something, blow up.
      throw new _exception2['default']('Missing helper: "' + arguments[arguments.length - 1].name + '"');
    }
  });
};

module.exports = exports['default'];


},{"../exception":10}],15:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerHelper('if', function (conditional, options) {
    if (_utils.isFunction(conditional)) {
      conditional = conditional.call(this);
    }

    // Default behavior is to render the positive path if the value is truthy and not empty.
    // The `includeZero` option may be set to treat the condtional as purely not empty based on the
    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.
    if (!options.hash.includeZero && !conditional || _utils.isEmpty(conditional)) {
      return options.inverse(this);
    } else {
      return options.fn(this);
    }
  });

  instance.registerHelper('unless', function (conditional, options) {
    return instance.helpers['if'].call(this, conditional, { fn: options.inverse, inverse: options.fn, hash: options.hash });
  });
};

module.exports = exports['default'];


},{"../utils":23}],16:[function(require,module,exports){
'use strict';

exports.__esModule = true;

exports['default'] = function (instance) {
  instance.registerHelper('log', function () /* message, options */{
    var args = [undefined],
        options = arguments[arguments.length - 1];
    for (var i = 0; i < arguments.length - 1; i++) {
      args.push(arguments[i]);
    }

    var level = 1;
    if (options.hash.level != null) {
      level = options.hash.level;
    } else if (options.data && options.data.level != null) {
      level = options.data.level;
    }
    args[0] = level;

    instance.log.apply(instance, args);
  });
};

module.exports = exports['default'];


},{}],17:[function(require,module,exports){
'use strict';

exports.__esModule = true;

exports['default'] = function (instance) {
  instance.registerHelper('lookup', function (obj, field) {
    return obj && obj[field];
  });
};

module.exports = exports['default'];


},{}],18:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerHelper('with', function (context, options) {
    if (_utils.isFunction(context)) {
      context = context.call(this);
    }

    var fn = options.fn;

    if (!_utils.isEmpty(context)) {
      var data = options.data;
      if (options.data && options.ids) {
        data = _utils.createFrame(options.data);
        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]);
      }

      return fn(context, {
        data: data,
        blockParams: _utils.blockParams([context], [data && data.contextPath])
      });
    } else {
      return options.inverse(this);
    }
  });
};

module.exports = exports['default'];


},{"../utils":23}],19:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('./utils');

var logger = {
  methodMap: ['debug', 'info', 'warn', 'error'],
  level: 'info',

  // Maps a given level value to the `methodMap` indexes above.
  lookupLevel: function lookupLevel(level) {
    if (typeof level === 'string') {
      var levelMap = _utils.indexOf(logger.methodMap, level.toLowerCase());
      if (levelMap >= 0) {
        level = levelMap;
      } else {
        level = parseInt(level, 10);
      }
    }

    return level;
  },

  // Can be overridden in the host environment
  log: function log(level) {
    level = logger.lookupLevel(level);

    if (typeof console !== 'undefined' && logger.lookupLevel(logger.level) <= level) {
      var method = logger.methodMap[level];
      if (!console[method]) {
        // eslint-disable-line no-console
        method = 'log';
      }

      for (var _len = arguments.length, message = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        message[_key - 1] = arguments[_key];
      }

      console[method].apply(console, message); // eslint-disable-line no-console
    }
  }
};

exports['default'] = logger;
module.exports = exports['default'];


},{"./utils":23}],20:[function(require,module,exports){
(function (global){
/* global window */
'use strict';

exports.__esModule = true;

exports['default'] = function (Handlebars) {
  /* istanbul ignore next */
  var root = typeof global !== 'undefined' ? global : window,
      $Handlebars = root.Handlebars;
  /* istanbul ignore next */
  Handlebars.noConflict = function () {
    if (root.Handlebars === Handlebars) {
      root.Handlebars = $Handlebars;
    }
    return Handlebars;
  };
};

module.exports = exports['default'];


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],21:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.checkRevision = checkRevision;
exports.template = template;
exports.wrapProgram = wrapProgram;
exports.resolvePartial = resolvePartial;
exports.invokePartial = invokePartial;
exports.noop = noop;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

// istanbul ignore next

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }

var _utils = require('./utils');

var Utils = _interopRequireWildcard(_utils);

var _exception = require('./exception');

var _exception2 = _interopRequireDefault(_exception);

var _base = require('./base');

function checkRevision(compilerInfo) {
  var compilerRevision = compilerInfo && compilerInfo[0] || 1,
      currentRevision = _base.COMPILER_REVISION;

  if (compilerRevision !== currentRevision) {
    if (compilerRevision < currentRevision) {
      var runtimeVersions = _base.REVISION_CHANGES[currentRevision],
          compilerVersions = _base.REVISION_CHANGES[compilerRevision];
      throw new _exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. ' + 'Please update your precompiler to a newer version (' + runtimeVersions + ') or downgrade your runtime to an older version (' + compilerVersions + ').');
    } else {
      // Use the embedded version info since the runtime doesn't know about this revision yet
      throw new _exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. ' + 'Please update your runtime to a newer version (' + compilerInfo[1] + ').');
    }
  }
}

function template(templateSpec, env) {
  /* istanbul ignore next */
  if (!env) {
    throw new _exception2['default']('No environment passed to template');
  }
  if (!templateSpec || !templateSpec.main) {
    throw new _exception2['default']('Unknown template object: ' + typeof templateSpec);
  }

  templateSpec.main.decorator = templateSpec.main_d;

  // Note: Using env.VM references rather than local var references throughout this section to allow
  // for external users to override these as psuedo-supported APIs.
  env.VM.checkRevision(templateSpec.compiler);

  function invokePartialWrapper(partial, context, options) {
    if (options.hash) {
      context = Utils.extend({}, context, options.hash);
      if (options.ids) {
        options.ids[0] = true;
      }
    }

    partial = env.VM.resolvePartial.call(this, partial, context, options);
    var result = env.VM.invokePartial.call(this, partial, context, options);

    if (result == null && env.compile) {
      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);
      result = options.partials[options.name](context, options);
    }
    if (result != null) {
      if (options.indent) {
        var lines = result.split('\n');
        for (var i = 0, l = lines.length; i < l; i++) {
          if (!lines[i] && i + 1 === l) {
            break;
          }

          lines[i] = options.indent + lines[i];
        }
        result = lines.join('\n');
      }
      return result;
    } else {
      throw new _exception2['default']('The partial ' + options.name + ' could not be compiled when running in runtime-only mode');
    }
  }

  // Just add water
  var container = {
    strict: function strict(obj, name) {
      if (!(name in obj)) {
        throw new _exception2['default']('"' + name + '" not defined in ' + obj);
      }
      return obj[name];
    },
    lookup: function lookup(depths, name) {
      var len = depths.length;
      for (var i = 0; i < len; i++) {
        if (depths[i] && depths[i][name] != null) {
          return depths[i][name];
        }
      }
    },
    lambda: function lambda(current, context) {
      return typeof current === 'function' ? current.call(context) : current;
    },

    escapeExpression: Utils.escapeExpression,
    invokePartial: invokePartialWrapper,

    fn: function fn(i) {
      var ret = templateSpec[i];
      ret.decorator = templateSpec[i + '_d'];
      return ret;
    },

    programs: [],
    program: function program(i, data, declaredBlockParams, blockParams, depths) {
      var programWrapper = this.programs[i],
          fn = this.fn(i);
      if (data || depths || blockParams || declaredBlockParams) {
        programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);
      } else if (!programWrapper) {
        programWrapper = this.programs[i] = wrapProgram(this, i, fn);
      }
      return programWrapper;
    },

    data: function data(value, depth) {
      while (value && depth--) {
        value = value._parent;
      }
      return value;
    },
    merge: function merge(param, common) {
      var obj = param || common;

      if (param && common && param !== common) {
        obj = Utils.extend({}, common, param);
      }

      return obj;
    },

    noop: env.VM.noop,
    compilerInfo: templateSpec.compiler
  };

  function ret(context) {
    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    var data = options.data;

    ret._setup(options);
    if (!options.partial && templateSpec.useData) {
      data = initData(context, data);
    }
    var depths = undefined,
        blockParams = templateSpec.useBlockParams ? [] : undefined;
    if (templateSpec.useDepths) {
      if (options.depths) {
        depths = context !== options.depths[0] ? [context].concat(options.depths) : options.depths;
      } else {
        depths = [context];
      }
    }

    function main(context /*, options*/) {
      return '' + templateSpec.main(container, context, container.helpers, container.partials, data, blockParams, depths);
    }
    main = executeDecorators(templateSpec.main, main, container, options.depths || [], data, blockParams);
    return main(context, options);
  }
  ret.isTop = true;

  ret._setup = function (options) {
    if (!options.partial) {
      container.helpers = container.merge(options.helpers, env.helpers);

      if (templateSpec.usePartial) {
        container.partials = container.merge(options.partials, env.partials);
      }
      if (templateSpec.usePartial || templateSpec.useDecorators) {
        container.decorators = container.merge(options.decorators, env.decorators);
      }
    } else {
      container.helpers = options.helpers;
      container.partials = options.partials;
      container.decorators = options.decorators;
    }
  };

  ret._child = function (i, data, blockParams, depths) {
    if (templateSpec.useBlockParams && !blockParams) {
      throw new _exception2['default']('must pass block params');
    }
    if (templateSpec.useDepths && !depths) {
      throw new _exception2['default']('must pass parent depths');
    }

    return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);
  };
  return ret;
}

function wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {
  function prog(context) {
    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    var currentDepths = depths;
    if (depths && context !== depths[0]) {
      currentDepths = [context].concat(depths);
    }

    return fn(container, context, container.helpers, container.partials, options.data || data, blockParams && [options.blockParams].concat(blockParams), currentDepths);
  }

  prog = executeDecorators(fn, prog, container, depths, data, blockParams);

  prog.program = i;
  prog.depth = depths ? depths.length : 0;
  prog.blockParams = declaredBlockParams || 0;
  return prog;
}

function resolvePartial(partial, context, options) {
  if (!partial) {
    if (options.name === '@partial-block') {
      partial = options.data['partial-block'];
    } else {
      partial = options.partials[options.name];
    }
  } else if (!partial.call && !options.name) {
    // This is a dynamic partial that returned a string
    options.name = partial;
    partial = options.partials[partial];
  }
  return partial;
}

function invokePartial(partial, context, options) {
  options.partial = true;
  if (options.ids) {
    options.data.contextPath = options.ids[0] || options.data.contextPath;
  }

  var partialBlock = undefined;
  if (options.fn && options.fn !== noop) {
    options.data = _base.createFrame(options.data);
    partialBlock = options.data['partial-block'] = options.fn;

    if (partialBlock.partials) {
      options.partials = Utils.extend({}, options.partials, partialBlock.partials);
    }
  }

  if (partial === undefined && partialBlock) {
    partial = partialBlock;
  }

  if (partial === undefined) {
    throw new _exception2['default']('The partial ' + options.name + ' could not be found');
  } else if (partial instanceof Function) {
    return partial(context, options);
  }
}

function noop() {
  return '';
}

function initData(context, data) {
  if (!data || !('root' in data)) {
    data = data ? _base.createFrame(data) : {};
    data.root = context;
  }
  return data;
}

function executeDecorators(fn, prog, container, depths, data, blockParams) {
  if (fn.decorator) {
    var props = {};
    prog = fn.decorator(prog, props, container, depths && depths[0], data, blockParams, depths);
    Utils.extend(prog, props);
  }
  return prog;
}


},{"./base":7,"./exception":10,"./utils":23}],22:[function(require,module,exports){
// Build out our basic SafeString type
'use strict';

exports.__esModule = true;
function SafeString(string) {
  this.string = string;
}

SafeString.prototype.toString = SafeString.prototype.toHTML = function () {
  return '' + this.string;
};

exports['default'] = SafeString;
module.exports = exports['default'];


},{}],23:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.extend = extend;
exports.indexOf = indexOf;
exports.escapeExpression = escapeExpression;
exports.isEmpty = isEmpty;
exports.createFrame = createFrame;
exports.blockParams = blockParams;
exports.appendContextPath = appendContextPath;
var escape = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#x27;',
  '`': '&#x60;',
  '=': '&#x3D;'
};

var badChars = /[&<>"'`=]/g,
    possible = /[&<>"'`=]/;

function escapeChar(chr) {
  return escape[chr];
}

function extend(obj /* , ...source */) {
  for (var i = 1; i < arguments.length; i++) {
    for (var key in arguments[i]) {
      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {
        obj[key] = arguments[i][key];
      }
    }
  }

  return obj;
}

var toString = Object.prototype.toString;

exports.toString = toString;
// Sourced from lodash
// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt
/* eslint-disable func-style */
var isFunction = function isFunction(value) {
  return typeof value === 'function';
};
// fallback for older versions of Chrome and Safari
/* istanbul ignore next */
if (isFunction(/x/)) {
  exports.isFunction = isFunction = function (value) {
    return typeof value === 'function' && toString.call(value) === '[object Function]';
  };
}
exports.isFunction = isFunction;

/* eslint-enable func-style */

/* istanbul ignore next */
var isArray = Array.isArray || function (value) {
  return value && typeof value === 'object' ? toString.call(value) === '[object Array]' : false;
};

exports.isArray = isArray;
// Older IE versions do not directly support indexOf so we must implement our own, sadly.

function indexOf(array, value) {
  for (var i = 0, len = array.length; i < len; i++) {
    if (array[i] === value) {
      return i;
    }
  }
  return -1;
}

function escapeExpression(string) {
  if (typeof string !== 'string') {
    // don't escape SafeStrings, since they're already safe
    if (string && string.toHTML) {
      return string.toHTML();
    } else if (string == null) {
      return '';
    } else if (!string) {
      return string + '';
    }

    // Force a string conversion as this will be done by the append regardless and
    // the regex test will do this transparently behind the scenes, causing issues if
    // an object's to string has escaped characters in it.
    string = '' + string;
  }

  if (!possible.test(string)) {
    return string;
  }
  return string.replace(badChars, escapeChar);
}

function isEmpty(value) {
  if (!value && value !== 0) {
    return true;
  } else if (isArray(value) && value.length === 0) {
    return true;
  } else {
    return false;
  }
}

function createFrame(object) {
  var frame = extend({}, object);
  frame._parent = object;
  return frame;
}

function blockParams(params, ids) {
  params.path = ids;
  return params;
}

function appendContextPath(contextPath, id) {
  return (contextPath ? contextPath + '.' : '') + id;
}


},{}],24:[function(require,module,exports){
// Create a simple path alias to allow browserify to resolve
// the runtime on a supported path.
module.exports = require('./dist/cjs/handlebars.runtime')['default'];

},{"./dist/cjs/handlebars.runtime":6}],25:[function(require,module,exports){
module.exports = require("handlebars/runtime")["default"];

},{"handlebars/runtime":24}],26:[function(require,module,exports){
/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */

(function( global, factory ) {

	if ( typeof module === "object" && typeof module.exports === "object" ) {
		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
}(typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Support: Firefox 18+
// Can't be in strict mode, several libs including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
//

var arr = [];

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var support = {};



var
	// Use the correct document accordingly with window argument (sandbox)
	document = window.document,

	version = "2.1.4",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {
		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android<4.1
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

	// Matches dashed string for camelizing
	rmsPrefix = /^-ms-/,
	rdashAlpha = /-([\da-z])/gi,

	// Used by jQuery.camelCase as callback to replace()
	fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	};

jQuery.fn = jQuery.prototype = {
	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// Start with an empty selector
	selector: "",

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {
		return num != null ?

			// Return just the one element from the set
			( num < 0 ? this[ num + this.length ] : this[ num ] ) :

			// Return all the elements in a clean array
			slice.call( this );
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;
		ret.context = this.context;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	// (You can seed the arguments with an array of args, but this is
	// only used internally.)
	each: function( callback, args ) {
		return jQuery.each( this, callback, args );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map(this, function( elem, i ) {
			return callback.call( elem, i, elem );
		}));
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor(null);
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && jQuery.isArray(src) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend({
	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isFunction: function( obj ) {
		return jQuery.type(obj) === "function";
	},

	isArray: Array.isArray,

	isWindow: function( obj ) {
		return obj != null && obj === obj.window;
	},

	isNumeric: function( obj ) {
		// parseFloat NaNs numeric-cast false positives (null|true|false|"")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		// adding 1 corrects loss of precision from parseFloat (#15100)
		return !jQuery.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;
	},

	isPlainObject: function( obj ) {
		// Not plain objects:
		// - Any object or value whose internal [[Class]] property is not "[object Object]"
		// - DOM nodes
		// - window
		if ( jQuery.type( obj ) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
			return false;
		}

		if ( obj.constructor &&
				!hasOwn.call( obj.constructor.prototype, "isPrototypeOf" ) ) {
			return false;
		}

		// If the function hasn't returned already, we're confident that
		// |obj| is a plain object, created by {} or constructed with new Object
		return true;
	},

	isEmptyObject: function( obj ) {
		var name;
		for ( name in obj ) {
			return false;
		}
		return true;
	},

	type: function( obj ) {
		if ( obj == null ) {
			return obj + "";
		}
		// Support: Android<4.0, iOS<6 (functionish RegExp)
		return typeof obj === "object" || typeof obj === "function" ?
			class2type[ toString.call(obj) ] || "object" :
			typeof obj;
	},

	// Evaluates a script in a global context
	globalEval: function( code ) {
		var script,
			indirect = eval;

		code = jQuery.trim( code );

		if ( code ) {
			// If the code includes a valid, prologue position
			// strict mode pragma, execute code by injecting a
			// script tag into the document.
			if ( code.indexOf("use strict") === 1 ) {
				script = document.createElement("script");
				script.text = code;
				document.head.appendChild( script ).parentNode.removeChild( script );
			} else {
			// Otherwise, avoid the DOM node creation, insertion
			// and removal by using an indirect global eval
				indirect( code );
			}
		}
	},

	// Convert dashed to camelCase; used by the css and data modules
	// Support: IE9-11+
	// Microsoft forgot to hump their vendor prefix (#9572)
	camelCase: function( string ) {
		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	},

	nodeName: function( elem, name ) {
		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	},

	// args is for internal usage only
	each: function( obj, callback, args ) {
		var value,
			i = 0,
			length = obj.length,
			isArray = isArraylike( obj );

		if ( args ) {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			}

		// A special, fast, case for the most common use of each
		} else {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			}
		}

		return obj;
	},

	// Support: Android<4.1
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArraylike( Object(arr) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var value,
			i = 0,
			length = elems.length,
			isArray = isArraylike( elems ),
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArray ) {
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// Bind a function to a context, optionally partially applying any
	// arguments.
	proxy: function( fn, context ) {
		var tmp, args, proxy;

		if ( typeof context === "string" ) {
			tmp = fn[ context ];
			context = fn;
			fn = tmp;
		}

		// Quick check to determine if target is callable, in the spec
		// this throws a TypeError, but we will just return undefined.
		if ( !jQuery.isFunction( fn ) ) {
			return undefined;
		}

		// Simulated bind
		args = slice.call( arguments, 2 );
		proxy = function() {
			return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
		};

		// Set the guid of unique handler to the same of original handler, so it can be removed
		proxy.guid = fn.guid = fn.guid || jQuery.guid++;

		return proxy;
	},

	now: Date.now,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
});

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
});

function isArraylike( obj ) {

	// Support: iOS 8.2 (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = "length" in obj && obj.length,
		type = jQuery.type( obj );

	if ( type === "function" || jQuery.isWindow( obj ) ) {
		return false;
	}

	if ( obj.nodeType === 1 && length ) {
		return true;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// General-purpose constants
	MAX_NEGATIVE = 1 << 31,

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// http://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",
	// http://www.w3.org/TR/css3-syntax/#characters
	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	// Loosely modeled on CSS identifier characters
	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = characterEncoding.replace( "w", "w#" ),

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + characterEncoding + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,
	rescape = /'|\\/g,

	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	};

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var match, elem, m, nodeType,
		// QSA vars
		i, groups, old, nid, newContext, newSelector;

	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
		setDocument( context );
	}

	context = context || document;
	results = results || [];
	nodeType = context.nodeType;

	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	if ( !seed && documentIsHTML ) {

		// Try to shortcut find operations when possible (e.g., not under DocumentFragment)
		if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {
			// Speed-up: Sizzle("#ID")
			if ( (m = match[1]) ) {
				if ( nodeType === 9 ) {
					elem = context.getElementById( m );
					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document (jQuery #6963)
					if ( elem && elem.parentNode ) {
						// Handle the case where IE, Opera, and Webkit return items
						// by name instead of ID
						if ( elem.id === m ) {
							results.push( elem );
							return results;
						}
					} else {
						return results;
					}
				} else {
					// Context is not a document
					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
						contains( context, elem ) && elem.id === m ) {
						results.push( elem );
						return results;
					}
				}

			// Speed-up: Sizzle("TAG")
			} else if ( match[2] ) {
				push.apply( results, context.getElementsByTagName( selector ) );
				return results;

			// Speed-up: Sizzle(".CLASS")
			} else if ( (m = match[3]) && support.getElementsByClassName ) {
				push.apply( results, context.getElementsByClassName( m ) );
				return results;
			}
		}

		// QSA path
		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
			nid = old = expando;
			newContext = context;
			newSelector = nodeType !== 1 && selector;

			// qSA works strangely on Element-rooted queries
			// We can work around this by specifying an extra ID on the root
			// and working up from there (Thanks to Andrew Dupont for the technique)
			// IE 8 doesn't work on object elements
			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
				groups = tokenize( selector );

				if ( (old = context.getAttribute("id")) ) {
					nid = old.replace( rescape, "\\$&" );
				} else {
					context.setAttribute( "id", nid );
				}
				nid = "[id='" + nid + "'] ";

				i = groups.length;
				while ( i-- ) {
					groups[i] = nid + toSelector( groups[i] );
				}
				newContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;
				newSelector = groups.join(",");
			}

			if ( newSelector ) {
				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch(qsaError) {
				} finally {
					if ( !old ) {
						context.removeAttribute("id");
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return !!fn( div );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( div.parentNode ) {
			div.parentNode.removeChild( div );
		}
		// release memory in IE
		div = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = attrs.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			( ~b.sourceIndex || MAX_NEGATIVE ) -
			( ~a.sourceIndex || MAX_NEGATIVE );

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, parent,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// If no document and documentElement is available, return
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Set our document
	document = doc;
	docElem = doc.documentElement;
	parent = doc.defaultView;

	// Support: IE>8
	// If iframe document is assigned to "document" variable and if iframe has been reloaded,
	// IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
	// IE6-8 do not support the defaultView property so parent will be undefined
	if ( parent && parent !== parent.top ) {
		// IE11 does not have attachEvent, so all must suffer
		if ( parent.addEventListener ) {
			parent.addEventListener( "unload", unloadHandler, false );
		} else if ( parent.attachEvent ) {
			parent.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Support tests
	---------------------------------------------------------------------- */
	documentIsHTML = !isXML( doc );

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( div ) {
		div.className = "i";
		return !div.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( div ) {
		div.appendChild( doc.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( doc.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( div ) {
		docElem.appendChild( div ).id = expando;
		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
	});

	// ID find and filter
	if ( support.getById ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var m = context.getElementById( id );
				// Check parentNode to catch when Blackberry 4.6 returns
				// nodes that are no longer in the document #6963
				return m && m.parentNode ? [ m ] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		// Support: IE6/7
		// getElementById is not reliable as a find shortcut
		delete Expr.find["ID"];

		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See http://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( div ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// http://bugs.jquery.com/ticket/12359
			docElem.appendChild( div ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\f]' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( div.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+
			if ( !div.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibing-combinator selector` fails
			if ( !div.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( div ) {
			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = doc.createElement("input");
			input.setAttribute( "type", "hidden" );
			div.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( div.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( div, "div" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully does not implement inclusive descendent
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === doc ? -1 :
				b === doc ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return doc;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, outerCache, node, diff, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {
							// Seek `elem` from a previously-cached index
							outerCache = parent[ expando ] || (parent[ expando ] = {});
							cache = outerCache[ type ] || [];
							nodeIndex = cache[0] === dirruns && cache[1];
							diff = cache[0] === dirruns && cache[2];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						// Use previously-cached element index if available
						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
							diff = cache[1];

						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
						} else {
							// Use the same loop as above to seek `elem` from the start
							while ( (node = ++nodeIndex && node && node[ dir ] ||
								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
									// Cache the index of each encountered element
									if ( useCache ) {
										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
									}

									if ( node === elem ) {
										break;
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});
						if ( (oldCache = outerCache[ dir ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							outerCache[ dir ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context !== document && context;
			}

			// Add elements passing elementMatchers directly to results
			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// Apply set filters to unmatched elements
			matchedCount += i;
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is no seed and only one group
	if ( match.length === 1 ) {

		// Take a shortcut and set the context if the root selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				support.getById && context.nodeType === 9 && documentIsHTML &&
				Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( div1 ) {
	// Should return 1, but returns 4 (following)
	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( div ) {
	div.innerHTML = "<a href='#'></a>";
	return div.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( div ) {
	div.innerHTML = "<input/>";
	div.firstChild.setAttribute( "value", "" );
	return div.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( div ) {
	return div.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos;
jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;



var rneedsContext = jQuery.expr.match.needsContext;

var rsingleTag = (/^<(\w+)\s*\/?>(?:<\/\1>|)$/);



var risSimple = /^.[^:#\[\.,]*$/;

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( jQuery.isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			/* jshint -W018 */
			return !!qualifier.call( elem, i, elem ) !== not;
		});

	}

	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		});

	}

	if ( typeof qualifier === "string" ) {
		if ( risSimple.test( qualifier ) ) {
			return jQuery.filter( qualifier, elements, not );
		}

		qualifier = jQuery.filter( qualifier, elements );
	}

	return jQuery.grep( elements, function( elem ) {
		return ( indexOf.call( qualifier, elem ) >= 0 ) !== not;
	});
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	return elems.length === 1 && elem.nodeType === 1 ?
		jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
		jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
			return elem.nodeType === 1;
		}));
};

jQuery.fn.extend({
	find: function( selector ) {
		var i,
			len = this.length,
			ret = [],
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter(function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			}) );
		}

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		// Needed because $( selector, context ) becomes $( context ).find( selector )
		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
		ret.selector = this.selector ? this.selector + " " + selector : selector;
		return ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow(this, selector || [], false) );
	},
	not: function( selector ) {
		return this.pushStack( winnow(this, selector || [], true) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
});


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,

	init = jQuery.fn.init = function( selector, context ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[0] === "<" && selector[ selector.length - 1 ] === ">" && selector.length >= 3 ) {
				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && (match[1] || !context) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[1] ) {
					context = context instanceof jQuery ? context[0] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[1],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {
							// Properties of context are called as methods if possible
							if ( jQuery.isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[2] );

					// Support: Blackberry 4.6
					// gEBID returns nodes no longer in the document (#6963)
					if ( elem && elem.parentNode ) {
						// Inject the element directly into the jQuery object
						this.length = 1;
						this[0] = elem;
					}

					this.context = document;
					this.selector = selector;
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || rootjQuery ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this.context = this[0] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( jQuery.isFunction( selector ) ) {
			return typeof rootjQuery.ready !== "undefined" ?
				rootjQuery.ready( selector ) :
				// Execute immediately if ready is not present
				selector( jQuery );
		}

		if ( selector.selector !== undefined ) {
			this.selector = selector.selector;
			this.context = selector.context;
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,
	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.extend({
	dir: function( elem, dir, until ) {
		var matched = [],
			truncate = until !== undefined;

		while ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {
			if ( elem.nodeType === 1 ) {
				if ( truncate && jQuery( elem ).is( until ) ) {
					break;
				}
				matched.push( elem );
			}
		}
		return matched;
	},

	sibling: function( n, elem ) {
		var matched = [];

		for ( ; n; n = n.nextSibling ) {
			if ( n.nodeType === 1 && n !== elem ) {
				matched.push( n );
			}
		}

		return matched;
	}
});

jQuery.fn.extend({
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter(function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[i] ) ) {
					return true;
				}
			}
		});
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
				jQuery( selectors, context || this.context ) :
				0;

		for ( ; i < l; i++ ) {
			for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
				// Always skip document fragments
				if ( cur.nodeType < 11 && (pos ?
					pos.index(cur) > -1 :

					// Don't pass non-elements to Sizzle
					cur.nodeType === 1 &&
						jQuery.find.matchesSelector(cur, selectors)) ) {

					matched.push( cur );
					break;
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.unique(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter(selector)
		);
	}
});

function sibling( cur, dir ) {
	while ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each({
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return jQuery.dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return jQuery.dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return jQuery.dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return jQuery.sibling( elem.firstChild );
	},
	contents: function( elem ) {
		return elem.contentDocument || jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {
			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.unique( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
});
var rnotwhite = (/\S+/g);



// String to Object options format cache
var optionsCache = {};

// Convert String-formatted options into Object-formatted ones and store in cache
function createOptions( options ) {
	var object = optionsCache[ options ] = {};
	jQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	});
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		( optionsCache[ options ] || createOptions( options ) ) :
		jQuery.extend( {}, options );

	var // Last fire value (for non-forgettable lists)
		memory,
		// Flag to know if list was already fired
		fired,
		// Flag to know if list is currently firing
		firing,
		// First callback to fire (used internally by add and fireWith)
		firingStart,
		// End of the loop when firing
		firingLength,
		// Index of currently firing callback (modified by remove if needed)
		firingIndex,
		// Actual callback list
		list = [],
		// Stack of fire calls for repeatable lists
		stack = !options.once && [],
		// Fire callbacks
		fire = function( data ) {
			memory = options.memory && data;
			fired = true;
			firingIndex = firingStart || 0;
			firingStart = 0;
			firingLength = list.length;
			firing = true;
			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
					memory = false; // To prevent further calls using add
					break;
				}
			}
			firing = false;
			if ( list ) {
				if ( stack ) {
					if ( stack.length ) {
						fire( stack.shift() );
					}
				} else if ( memory ) {
					list = [];
				} else {
					self.disable();
				}
			}
		},
		// Actual Callbacks object
		self = {
			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {
					// First, we save the current length
					var start = list.length;
					(function add( args ) {
						jQuery.each( args, function( _, arg ) {
							var type = jQuery.type( arg );
							if ( type === "function" ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && type !== "string" ) {
								// Inspect recursively
								add( arg );
							}
						});
					})( arguments );
					// Do we need to add the callbacks to the
					// current firing batch?
					if ( firing ) {
						firingLength = list.length;
					// With memory, if we're not firing then
					// we should call right away
					} else if ( memory ) {
						firingStart = start;
						fire( memory );
					}
				}
				return this;
			},
			// Remove a callback from the list
			remove: function() {
				if ( list ) {
					jQuery.each( arguments, function( _, arg ) {
						var index;
						while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
							list.splice( index, 1 );
							// Handle firing indexes
							if ( firing ) {
								if ( index <= firingLength ) {
									firingLength--;
								}
								if ( index <= firingIndex ) {
									firingIndex--;
								}
							}
						}
					});
				}
				return this;
			},
			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
			},
			// Remove all callbacks from the list
			empty: function() {
				list = [];
				firingLength = 0;
				return this;
			},
			// Have the list do nothing anymore
			disable: function() {
				list = stack = memory = undefined;
				return this;
			},
			// Is it disabled?
			disabled: function() {
				return !list;
			},
			// Lock the list in its current state
			lock: function() {
				stack = undefined;
				if ( !memory ) {
					self.disable();
				}
				return this;
			},
			// Is it locked?
			locked: function() {
				return !stack;
			},
			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( list && ( !fired || stack ) ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					if ( firing ) {
						stack.push( args );
					} else {
						fire( args );
					}
				}
				return this;
			},
			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},
			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


jQuery.extend({

	Deferred: function( func ) {
		var tuples = [
				// action, add listener, listener list, final state
				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
				[ "notify", "progress", jQuery.Callbacks("memory") ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				then: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;
					return jQuery.Deferred(function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {
							var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
							// deferred[ done | fail | progress ] for forwarding actions to newDefer
							deferred[ tuple[1] ](function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && jQuery.isFunction( returned.promise ) ) {
									returned.promise()
										.done( newDefer.resolve )
										.fail( newDefer.reject )
										.progress( newDefer.notify );
								} else {
									newDefer[ tuple[ 0 ] + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
								}
							});
						});
						fns = null;
					}).promise();
				},
				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Keep pipe for back-compat
		promise.pipe = promise.then;

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 3 ];

			// promise[ done | fail | progress ] = list.add
			promise[ tuple[1] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(function() {
					// state = [ resolved | rejected ]
					state = stateString;

				// [ reject_list | resolve_list ].disable; progress_list.lock
				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
			}

			// deferred[ resolve | reject | notify ]
			deferred[ tuple[0] ] = function() {
				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
				return this;
			};
			deferred[ tuple[0] + "With" ] = list.fireWith;
		});

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( subordinate /* , ..., subordinateN */ ) {
		var i = 0,
			resolveValues = slice.call( arguments ),
			length = resolveValues.length,

			// the count of uncompleted subordinates
			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

			// Update function for both resolve and progress values
			updateFunc = function( i, contexts, values ) {
				return function( value ) {
					contexts[ i ] = this;
					values[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( values === progressValues ) {
						deferred.notifyWith( contexts, values );
					} else if ( !( --remaining ) ) {
						deferred.resolveWith( contexts, values );
					}
				};
			},

			progressValues, progressContexts, resolveContexts;

		// Add listeners to Deferred subordinates; treat others as resolved
		if ( length > 1 ) {
			progressValues = new Array( length );
			progressContexts = new Array( length );
			resolveContexts = new Array( length );
			for ( ; i < length; i++ ) {
				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
					resolveValues[ i ].promise()
						.done( updateFunc( i, resolveContexts, resolveValues ) )
						.fail( deferred.reject )
						.progress( updateFunc( i, progressContexts, progressValues ) );
				} else {
					--remaining;
				}
			}
		}

		// If we're not waiting on anything, resolve the master
		if ( !remaining ) {
			deferred.resolveWith( resolveContexts, resolveValues );
		}

		return deferred.promise();
	}
});


// The deferred used on DOM ready
var readyList;

jQuery.fn.ready = function( fn ) {
	// Add the callback
	jQuery.ready.promise().done( fn );

	return this;
};

jQuery.extend({
	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Hold (or release) the ready event
	holdReady: function( hold ) {
		if ( hold ) {
			jQuery.readyWait++;
		} else {
			jQuery.ready( true );
		}
	},

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );

		// Trigger any bound ready events
		if ( jQuery.fn.triggerHandler ) {
			jQuery( document ).triggerHandler( "ready" );
			jQuery( document ).off( "ready" );
		}
	}
});

/**
 * The ready event handler and self cleanup method
 */
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed, false );
	window.removeEventListener( "load", completed, false );
	jQuery.ready();
}

jQuery.ready.promise = function( obj ) {
	if ( !readyList ) {

		readyList = jQuery.Deferred();

		// Catch cases where $(document).ready() is called after the browser event has already occurred.
		// We once tried to use readyState "interactive" here, but it caused issues like the one
		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
		if ( document.readyState === "complete" ) {
			// Handle it asynchronously to allow scripts the opportunity to delay ready
			setTimeout( jQuery.ready );

		} else {

			// Use the handy event callback
			document.addEventListener( "DOMContentLoaded", completed, false );

			// A fallback to window.onload, that will always work
			window.addEventListener( "load", completed, false );
		}
	}
	return readyList.promise( obj );
};

// Kick off the DOM ready check even if the user does not
jQuery.ready.promise();




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( jQuery.type( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !jQuery.isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {
			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
			}
		}
	}

	return chainable ?
		elems :

		// Gets
		bulk ?
			fn.call( elems ) :
			len ? fn( elems[0], key ) : emptyGet;
};


/**
 * Determines whether an object can have data
 */
jQuery.acceptData = function( owner ) {
	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	/* jshint -W018 */
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};


function Data() {
	// Support: Android<4,
	// Old WebKit does not have Object.preventExtensions/freeze method,
	// return new empty object instead with no [[set]] accessor
	Object.defineProperty( this.cache = {}, 0, {
		get: function() {
			return {};
		}
	});

	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;
Data.accepts = jQuery.acceptData;

Data.prototype = {
	key: function( owner ) {
		// We can accept data for non-element nodes in modern browsers,
		// but we should not, see #8335.
		// Always return the key for a frozen object.
		if ( !Data.accepts( owner ) ) {
			return 0;
		}

		var descriptor = {},
			// Check if the owner object already has a cache key
			unlock = owner[ this.expando ];

		// If not, create one
		if ( !unlock ) {
			unlock = Data.uid++;

			// Secure it in a non-enumerable, non-writable property
			try {
				descriptor[ this.expando ] = { value: unlock };
				Object.defineProperties( owner, descriptor );

			// Support: Android<4
			// Fallback to a less secure definition
			} catch ( e ) {
				descriptor[ this.expando ] = unlock;
				jQuery.extend( owner, descriptor );
			}
		}

		// Ensure the cache object
		if ( !this.cache[ unlock ] ) {
			this.cache[ unlock ] = {};
		}

		return unlock;
	},
	set: function( owner, data, value ) {
		var prop,
			// There may be an unlock assigned to this node,
			// if there is no entry for this "owner", create one inline
			// and set the unlock as though an owner entry had always existed
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		// Handle: [ owner, key, value ] args
		if ( typeof data === "string" ) {
			cache[ data ] = value;

		// Handle: [ owner, { properties } ] args
		} else {
			// Fresh assignments by object are shallow copied
			if ( jQuery.isEmptyObject( cache ) ) {
				jQuery.extend( this.cache[ unlock ], data );
			// Otherwise, copy the properties one-by-one to the cache object
			} else {
				for ( prop in data ) {
					cache[ prop ] = data[ prop ];
				}
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		// Either a valid cache is found, or will be created.
		// New caches will be created and the unlock returned,
		// allowing direct access to the newly created
		// empty data object. A valid owner object must be provided.
		var cache = this.cache[ this.key( owner ) ];

		return key === undefined ?
			cache : cache[ key ];
	},
	access: function( owner, key, value ) {
		var stored;
		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				((key && typeof key === "string") && value === undefined) ) {

			stored = this.get( owner, key );

			return stored !== undefined ?
				stored : this.get( owner, jQuery.camelCase(key) );
		}

		// [*]When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i, name, camel,
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		if ( key === undefined ) {
			this.cache[ unlock ] = {};

		} else {
			// Support array or space separated string of keys
			if ( jQuery.isArray( key ) ) {
				// If "name" is an array of keys...
				// When data is initially created, via ("key", "val") signature,
				// keys will be converted to camelCase.
				// Since there is no way to tell _how_ a key was added, remove
				// both plain key and camelCase key. #12786
				// This will only penalize the array argument path.
				name = key.concat( key.map( jQuery.camelCase ) );
			} else {
				camel = jQuery.camelCase( key );
				// Try the string as a key before any manipulation
				if ( key in cache ) {
					name = [ key, camel ];
				} else {
					// If a key with the spaces exists, use it.
					// Otherwise, create an array by matching non-whitespace
					name = camel;
					name = name in cache ?
						[ name ] : ( name.match( rnotwhite ) || [] );
				}
			}

			i = name.length;
			while ( i-- ) {
				delete cache[ name[ i ] ];
			}
		}
	},
	hasData: function( owner ) {
		return !jQuery.isEmptyObject(
			this.cache[ owner[ this.expando ] ] || {}
		);
	},
	discard: function( owner ) {
		if ( owner[ this.expando ] ) {
			delete this.cache[ owner[ this.expando ] ];
		}
	}
};
var data_priv = new Data();

var data_user = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /([A-Z])/g;

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = data === "true" ? true :
					data === "false" ? false :
					data === "null" ? null :
					// Only convert to a number if it doesn't change the string
					+data + "" === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
					data;
			} catch( e ) {}

			// Make sure we set the data so it isn't changed later
			data_user.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend({
	hasData: function( elem ) {
		return data_user.hasData( elem ) || data_priv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return data_user.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		data_user.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to data_priv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return data_priv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		data_priv.remove( elem, name );
	}
});

jQuery.fn.extend({
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = data_user.get( elem );

				if ( elem.nodeType === 1 && !data_priv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE11+
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = jQuery.camelCase( name.slice(5) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					data_priv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each(function() {
				data_user.set( this, key );
			});
		}

		return access( this, function( value ) {
			var data,
				camelKey = jQuery.camelCase( key );

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {
				// Attempt to get data from the cache
				// with the key as-is
				data = data_user.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to get data from the cache
				// with the key camelized
				data = data_user.get( elem, camelKey );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, camelKey, undefined );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each(function() {
				// First, attempt to store a copy or reference of any
				// data that might've been store with a camelCased key.
				var data = data_user.get( this, camelKey );

				// For HTML5 data-* attribute interop, we have to
				// store property names with dashes in a camelCase form.
				// This might not apply to all properties...*
				data_user.set( this, camelKey, value );

				// *... In the case of properties that might _actually_
				// have dashes, we need to also store a copy of that
				// unchanged property.
				if ( key.indexOf("-") !== -1 && data !== undefined ) {
					data_user.set( this, key, value );
				}
			});
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each(function() {
			data_user.remove( this, key );
		});
	}
});


jQuery.extend({
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = data_priv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || jQuery.isArray( data ) ) {
					queue = data_priv.access( elem, type, jQuery.makeArray(data) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return data_priv.get( elem, key ) || data_priv.access( elem, key, {
			empty: jQuery.Callbacks("once memory").add(function() {
				data_priv.remove( elem, [ type + "queue", key ] );
			})
		});
	}
});

jQuery.fn.extend({
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[0], type );
		}

		return data === undefined ?
			this :
			this.each(function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[0] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			});
	},
	dequeue: function( type ) {
		return this.each(function() {
			jQuery.dequeue( this, type );
		});
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},
	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = data_priv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
});
var pnum = (/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;

var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var isHidden = function( elem, el ) {
		// isHidden might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;
		return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
	};

var rcheckableType = (/^(?:checkbox|radio)$/i);



(function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Safari<=5.1
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Safari<=5.1, Android<4.2
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE<=11+
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
})();
var strundefined = typeof undefined;



support.focusinBubbles = "onfocusin" in window;


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,
	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !(events = elemData.events) ) {
			events = elemData.events = {};
		}
		if ( !(eventHandle = elemData.handle) ) {
			eventHandle = elemData.handle = function( e ) {
				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend({
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join(".")
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !(handlers = events[ type ]) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.hasData( elem ) && data_priv.get( elem );

		if ( !elemData || !(events = elemData.events) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			delete elemData.handle;
			data_priv.remove( elem, "events" );
		}
	},

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

		cur = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf(".") >= 0 ) {
			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split(".");
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf(":") < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join(".");
		event.namespace_re = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === (elem.ownerDocument || document) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( data_priv.get( cur, "events" ) || {} )[ event.type ] && data_priv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && jQuery.acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
				jQuery.acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;
					elem[ type ]();
					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	dispatch: function( event ) {

		// Make a writable jQuery.Event from the native event object
		event = jQuery.event.fix( event );

		var i, j, ret, matched, handleObj,
			handlerQueue = [],
			args = slice.call( arguments ),
			handlers = ( data_priv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[0] = event;
		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or 2) have namespace(s)
				// a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
							.apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( (event.result = ret) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, matches, sel, handleObj,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		// Black-hole SVG <use> instance trees (#13180)
		// Avoid non-left-click bubbling in Firefox (#3861)
		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.disabled !== true || event.type !== "click" ) {
					matches = [];
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matches[ sel ] === undefined ) {
							matches[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) >= 0 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matches[ sel ] ) {
							matches.push( handleObj );
						}
					}
					if ( matches.length ) {
						handlerQueue.push({ elem: cur, handlers: matches });
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		if ( delegateCount < handlers.length ) {
			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
		}

		return handlerQueue;
	},

	// Includes some event props shared by KeyEvent and MouseEvent
	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),

	fixHooks: {},

	keyHooks: {
		props: "char charCode key keyCode".split(" "),
		filter: function( event, original ) {

			// Add which for key events
			if ( event.which == null ) {
				event.which = original.charCode != null ? original.charCode : original.keyCode;
			}

			return event;
		}
	},

	mouseHooks: {
		props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
		filter: function( event, original ) {
			var eventDoc, doc, body,
				button = original.button;

			// Calculate pageX/Y if missing and clientX/Y available
			if ( event.pageX == null && original.clientX != null ) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			// Note: button is not normalized, so don't use it
			if ( !event.which && button !== undefined ) {
				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
			}

			return event;
		}
	},

	fix: function( event ) {
		if ( event[ jQuery.expando ] ) {
			return event;
		}

		// Create a writable copy of the event object and normalize some properties
		var i, prop, copy,
			type = event.type,
			originalEvent = event,
			fixHook = this.fixHooks[ type ];

		if ( !fixHook ) {
			this.fixHooks[ type ] = fixHook =
				rmouseEvent.test( type ) ? this.mouseHooks :
				rkeyEvent.test( type ) ? this.keyHooks :
				{};
		}
		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

		event = new jQuery.Event( originalEvent );

		i = copy.length;
		while ( i-- ) {
			prop = copy[ i ];
			event[ prop ] = originalEvent[ prop ];
		}

		// Support: Cordova 2.5 (WebKit) (#13255)
		// All events should have a target; Cordova deviceready doesn't
		if ( !event.target ) {
			event.target = document;
		}

		// Support: Safari 6.0+, Chrome<28
		// Target should not be a text node (#504, #13143)
		if ( event.target.nodeType === 3 ) {
			event.target = event.target.parentNode;
		}

		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	},

	special: {
		load: {
			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		focus: {
			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== safeActiveElement() && this.focus ) {
					this.focus();
					return false;
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === safeActiveElement() && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},
		click: {
			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( this.type === "checkbox" && this.click && jQuery.nodeName( this, "input" ) ) {
					this.click();
					return false;
				}
			},

			// For cross-browser consistency, don't fire native .click() on links
			_default: function( event ) {
				return jQuery.nodeName( event.target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	},

	simulate: function( type, elem, event, bubble ) {
		// Piggyback on a donor event to simulate a different one.
		// Fake originalEvent to avoid donor's stopPropagation, but if the
		// simulated event prevents default then we do the same on the donor.
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true,
				originalEvent: {}
			}
		);
		if ( bubble ) {
			jQuery.event.trigger( e, null, elem );
		} else {
			jQuery.event.dispatch.call( elem, e );
		}
		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}
};

jQuery.removeEvent = function( elem, type, handle ) {
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle, false );
	}
};

jQuery.Event = function( src, props ) {
	// Allow instantiation without the 'new' keyword
	if ( !(this instanceof jQuery.Event) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&
				// Support: Android<4.0
				src.returnValue === false ?
			returnTrue :
			returnFalse;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || jQuery.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && e.preventDefault ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && e.stopPropagation ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && e.stopImmediatePropagation ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Create mouseenter/leave events using mouseover/out and event-time checks
// Support: Chrome 15+
jQuery.each({
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mousenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
});

// Support: Firefox, Chrome, Safari
// Create "bubbling" focus and blur events
if ( !support.focusinBubbles ) {
	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
			};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				data_priv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					data_priv.remove( doc, fix );

				} else {
					data_priv.access( doc, fix, attaches );
				}
			}
		};
	});
}

jQuery.fn.extend({

	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
		var origFn, type;

		// Types can be a map of types/handlers
		if ( typeof types === "object" ) {
			// ( types-Object, selector, data )
			if ( typeof selector !== "string" ) {
				// ( types-Object, data )
				data = data || selector;
				selector = undefined;
			}
			for ( type in types ) {
				this.on( type, selector, data, types[ type ], one );
			}
			return this;
		}

		if ( data == null && fn == null ) {
			// ( types, fn )
			fn = selector;
			data = selector = undefined;
		} else if ( fn == null ) {
			if ( typeof selector === "string" ) {
				// ( types, selector, fn )
				fn = data;
				data = undefined;
			} else {
				// ( types, data, fn )
				fn = data;
				data = selector;
				selector = undefined;
			}
		}
		if ( fn === false ) {
			fn = returnFalse;
		} else if ( !fn ) {
			return this;
		}

		if ( one === 1 ) {
			origFn = fn;
			fn = function( event ) {
				// Can use an empty set, since event contains the info
				jQuery().off( event );
				return origFn.apply( this, arguments );
			};
			// Use same guid so caller can remove using origFn
			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
		}
		return this.each( function() {
			jQuery.event.add( this, types, fn, data, selector );
		});
	},
	one: function( types, selector, data, fn ) {
		return this.on( types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {
			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {
			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {
			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each(function() {
			jQuery.event.remove( this, types, fn, selector );
		});
	},

	trigger: function( type, data ) {
		return this.each(function() {
			jQuery.event.trigger( type, data, this );
		});
	},
	triggerHandler: function( type, data ) {
		var elem = this[0];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
});


var
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	rtagName = /<([\w:]+)/,
	rhtml = /<|&#?\w+;/,
	rnoInnerhtml = /<(?:script|style|link)/i,
	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rscriptType = /^$|\/(?:java|ecma)script/i,
	rscriptTypeMasked = /^true\/(.*)/,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,

	// We have to close these tags to support XHTML (#13200)
	wrapMap = {

		// Support: IE9
		option: [ 1, "<select multiple='multiple'>", "</select>" ],

		thead: [ 1, "<table>", "</table>" ],
		col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

		_default: [ 0, "", "" ]
	};

// Support: IE9
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

// Support: 1.x compatibility
// Manipulating tables requires a tbody
function manipulationTarget( elem, content ) {
	return jQuery.nodeName( elem, "table" ) &&
		jQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ?

		elem.getElementsByTagName("tbody")[0] ||
			elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
		elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = (elem.getAttribute("type") !== null) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	var match = rscriptTypeMasked.exec( elem.type );

	if ( match ) {
		elem.type = match[ 1 ];
	} else {
		elem.removeAttribute("type");
	}

	return elem;
}

// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		data_priv.set(
			elems[ i ], "globalEval", !refElements || data_priv.get( refElements[ i ], "globalEval" )
		);
	}
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( data_priv.hasData( src ) ) {
		pdataOld = data_priv.access( src );
		pdataCur = data_priv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( data_user.hasData( src ) ) {
		udataOld = data_user.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		data_user.set( dest, udataCur );
	}
}

function getAll( context, tag ) {
	var ret = context.getElementsByTagName ? context.getElementsByTagName( tag || "*" ) :
			context.querySelectorAll ? context.querySelectorAll( tag || "*" ) :
			[];

	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
		jQuery.merge( [ context ], ret ) :
		ret;
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

jQuery.extend({
	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = jQuery.contains( elem.ownerDocument, elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	buildFragment: function( elems, context, scripts, selection ) {
		var elem, tmp, tag, wrap, contains, j,
			fragment = context.createDocumentFragment(),
			nodes = [],
			i = 0,
			l = elems.length;

		for ( ; i < l; i++ ) {
			elem = elems[ i ];

			if ( elem || elem === 0 ) {

				// Add nodes directly
				if ( jQuery.type( elem ) === "object" ) {
					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

				// Convert non-html into a text node
				} else if ( !rhtml.test( elem ) ) {
					nodes.push( context.createTextNode( elem ) );

				// Convert html into DOM nodes
				} else {
					tmp = tmp || fragment.appendChild( context.createElement("div") );

					// Deserialize a standard representation
					tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
					wrap = wrapMap[ tag ] || wrapMap._default;
					tmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[ 2 ];

					// Descend through wrappers to the right content
					j = wrap[ 0 ];
					while ( j-- ) {
						tmp = tmp.lastChild;
					}

					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, tmp.childNodes );

					// Remember the top-level container
					tmp = fragment.firstChild;

					// Ensure the created nodes are orphaned (#12392)
					tmp.textContent = "";
				}
			}
		}

		// Remove wrapper from fragment
		fragment.textContent = "";

		i = 0;
		while ( (elem = nodes[ i++ ]) ) {

			// #4087 - If origin and destination elements are the same, and this is
			// that element, do not do anything
			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
				continue;
			}

			contains = jQuery.contains( elem.ownerDocument, elem );

			// Append to fragment
			tmp = getAll( fragment.appendChild( elem ), "script" );

			// Preserve script evaluation history
			if ( contains ) {
				setGlobalEval( tmp );
			}

			// Capture executables
			if ( scripts ) {
				j = 0;
				while ( (elem = tmp[ j++ ]) ) {
					if ( rscriptType.test( elem.type || "" ) ) {
						scripts.push( elem );
					}
				}
			}
		}

		return fragment;
	},

	cleanData: function( elems ) {
		var data, elem, type, key,
			special = jQuery.event.special,
			i = 0;

		for ( ; (elem = elems[ i ]) !== undefined; i++ ) {
			if ( jQuery.acceptData( elem ) ) {
				key = elem[ data_priv.expando ];

				if ( key && (data = data_priv.cache[ key ]) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}
					if ( data_priv.cache[ key ] ) {
						// Discard any remaining `private` data
						delete data_priv.cache[ key ];
					}
				}
			}
			// Discard any remaining `user` data
			delete data_user.cache[ elem[ data_user.expando ] ];
		}
	}
});

jQuery.fn.extend({
	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each(function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				});
		}, null, value, arguments.length );
	},

	append: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		});
	},

	prepend: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		});
	},

	before: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		});
	},

	after: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		});
	},

	remove: function( selector, keepData /* Internal Use Only */ ) {
		var elem,
			elems = selector ? jQuery.filter( selector, this ) : this,
			i = 0;

		for ( ; (elem = elems[i]) != null; i++ ) {
			if ( !keepData && elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem ) );
			}

			if ( elem.parentNode ) {
				if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
					setGlobalEval( getAll( elem, "script" ) );
				}
				elem.parentNode.removeChild( elem );
			}
		}

		return this;
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; (elem = this[i]) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map(function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		});
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = value.replace( rxhtmlTag, "<$1></$2>" );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var arg = arguments[ 0 ];

		// Make the changes, replacing each context element with the new content
		this.domManip( arguments, function( elem ) {
			arg = this.parentNode;

			jQuery.cleanData( getAll( this ) );

			if ( arg ) {
				arg.replaceChild( elem, this );
			}
		});

		// Force removal if there was no new content (e.g., from empty arguments)
		return arg && (arg.length || arg.nodeType) ? this : this.remove();
	},

	detach: function( selector ) {
		return this.remove( selector, true );
	},

	domManip: function( args, callback ) {

		// Flatten any nested arrays
		args = concat.apply( [], args );

		var fragment, first, scripts, hasScripts, node, doc,
			i = 0,
			l = this.length,
			set = this,
			iNoClone = l - 1,
			value = args[ 0 ],
			isFunction = jQuery.isFunction( value );

		// We can't cloneNode fragments that contain checked, in WebKit
		if ( isFunction ||
				( l > 1 && typeof value === "string" &&
					!support.checkClone && rchecked.test( value ) ) ) {
			return this.each(function( index ) {
				var self = set.eq( index );
				if ( isFunction ) {
					args[ 0 ] = value.call( this, index, self.html() );
				}
				self.domManip( args, callback );
			});
		}

		if ( l ) {
			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );
			first = fragment.firstChild;

			if ( fragment.childNodes.length === 1 ) {
				fragment = first;
			}

			if ( first ) {
				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
				hasScripts = scripts.length;

				// Use the original fragment for the last item instead of the first because it can end up
				// being emptied incorrectly in certain situations (#8070).
				for ( ; i < l; i++ ) {
					node = fragment;

					if ( i !== iNoClone ) {
						node = jQuery.clone( node, true, true );

						// Keep references to cloned scripts for later restoration
						if ( hasScripts ) {
							// Support: QtWebKit
							// jQuery.merge because push.apply(_, arraylike) throws
							jQuery.merge( scripts, getAll( node, "script" ) );
						}
					}

					callback.call( this[ i ], node, i );
				}

				if ( hasScripts ) {
					doc = scripts[ scripts.length - 1 ].ownerDocument;

					// Reenable scripts
					jQuery.map( scripts, restoreScript );

					// Evaluate executable scripts on first document insertion
					for ( i = 0; i < hasScripts; i++ ) {
						node = scripts[ i ];
						if ( rscriptType.test( node.type || "" ) &&
							!data_priv.access( node, "globalEval" ) && jQuery.contains( doc, node ) ) {

							if ( node.src ) {
								// Optional AJAX dependency, but won't run scripts if not present
								if ( jQuery._evalUrl ) {
									jQuery._evalUrl( node.src );
								}
							} else {
								jQuery.globalEval( node.textContent.replace( rcleanScript, "" ) );
							}
						}
					}
				}
			}
		}

		return this;
	}
});

jQuery.each({
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: QtWebKit
			// .get() because push.apply(_, arraylike) throws
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
});


var iframe,
	elemdisplay = {};

/**
 * Retrieve the actual display of a element
 * @param {String} name nodeName of the element
 * @param {Object} doc Document object
 */
// Called only from within defaultDisplay
function actualDisplay( name, doc ) {
	var style,
		elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),

		// getDefaultComputedStyle might be reliably used only on attached element
		display = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?

			// Use of this method is a temporary fix (more like optimization) until something better comes along,
			// since it was removed from specification and supported only in FF
			style.display : jQuery.css( elem[ 0 ], "display" );

	// We don't have any data stored on the element,
	// so use "detach" method as fast way to get rid of the element
	elem.detach();

	return display;
}

/**
 * Try to determine the default display value of an element
 * @param {String} nodeName
 */
function defaultDisplay( nodeName ) {
	var doc = document,
		display = elemdisplay[ nodeName ];

	if ( !display ) {
		display = actualDisplay( nodeName, doc );

		// If the simple way fails, read from inside an iframe
		if ( display === "none" || !display ) {

			// Use the already-created iframe if possible
			iframe = (iframe || jQuery( "<iframe frameborder='0' width='0' height='0'/>" )).appendTo( doc.documentElement );

			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
			doc = iframe[ 0 ].contentDocument;

			// Support: IE
			doc.write();
			doc.close();

			display = actualDisplay( nodeName, doc );
			iframe.detach();
		}

		// Store the correct default display
		elemdisplay[ nodeName ] = display;
	}

	return display;
}
var rmargin = (/^margin/);

var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {
		// Support: IE<=11+, Firefox<=30+ (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		if ( elem.ownerDocument.defaultView.opener ) {
			return elem.ownerDocument.defaultView.getComputedStyle( elem, null );
		}

		return window.getComputedStyle( elem, null );
	};



function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,
		style = elem.style;

	computed = computed || getStyles( elem );

	// Support: IE9
	// getPropertyValue is only needed for .css('filter') (#12537)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];
	}

	if ( computed ) {

		if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// Support: iOS < 6
		// A tribute to the "awesome hack by Dean Edwards"
		// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
		// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
		if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?
		// Support: IE
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {
	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {
				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return (this.get = hookFn).apply( this, arguments );
		}
	};
}


(function() {
	var pixelPositionVal, boxSizingReliableVal,
		docElem = document.documentElement,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	if ( !div.style ) {
		return;
	}

	// Support: IE9-11+
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	container.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;" +
		"position:absolute";
	container.appendChild( div );

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computePixelPositionAndBoxSizingReliable() {
		div.style.cssText =
			// Support: Firefox<29, Android 2.3
			// Vendor-prefix box-sizing
			"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;" +
			"box-sizing:border-box;display:block;margin-top:1%;top:1%;" +
			"border:1px;padding:1px;width:4px;position:absolute";
		div.innerHTML = "";
		docElem.appendChild( container );

		var divStyle = window.getComputedStyle( div, null );
		pixelPositionVal = divStyle.top !== "1%";
		boxSizingReliableVal = divStyle.width === "4px";

		docElem.removeChild( container );
	}

	// Support: node.js jsdom
	// Don't assume that getComputedStyle is a property of the global object
	if ( window.getComputedStyle ) {
		jQuery.extend( support, {
			pixelPosition: function() {

				// This test is executed only once but we still do memoizing
				// since we can use the boxSizingReliable pre-computing.
				// No need to check if the test was already performed, though.
				computePixelPositionAndBoxSizingReliable();
				return pixelPositionVal;
			},
			boxSizingReliable: function() {
				if ( boxSizingReliableVal == null ) {
					computePixelPositionAndBoxSizingReliable();
				}
				return boxSizingReliableVal;
			},
			reliableMarginRight: function() {

				// Support: Android 2.3
				// Check if div with explicit width and no margin-right incorrectly
				// gets computed margin-right based on width of container. (#3333)
				// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
				// This support function is only executed once so no memoizing is needed.
				var ret,
					marginDiv = div.appendChild( document.createElement( "div" ) );

				// Reset CSS: box-sizing; display; margin; border; padding
				marginDiv.style.cssText = div.style.cssText =
					// Support: Firefox<29, Android 2.3
					// Vendor-prefix box-sizing
					"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
					"box-sizing:content-box;display:block;margin:0;border:0;padding:0";
				marginDiv.style.marginRight = marginDiv.style.width = "0";
				div.style.width = "1px";
				docElem.appendChild( container );

				ret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );

				docElem.removeChild( container );
				div.removeChild( marginDiv );

				return ret;
			}
		});
	}
})();


// A method for quickly swapping in/out CSS properties to get correct calculations.
jQuery.swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};


var
	// Swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rnumsplit = new RegExp( "^(" + pnum + ")(.*)$", "i" ),
	rrelNum = new RegExp( "^([+-])=(" + pnum + ")", "i" ),

	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	},

	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];

// Return a css property mapped to a potentially vendor prefixed property
function vendorPropName( style, name ) {

	// Shortcut for names that are not vendor prefixed
	if ( name in style ) {
		return name;
	}

	// Check for vendor prefixed names
	var capName = name[0].toUpperCase() + name.slice(1),
		origName = name,
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in style ) {
			return name;
		}
	}

	return origName;
}

function setPositiveNumber( elem, value, subtract ) {
	var matches = rnumsplit.exec( value );
	return matches ?
		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
		value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	var i = extra === ( isBorderBox ? "border" : "content" ) ?
		// If we already have the right measurement, avoid augmentation
		4 :
		// Otherwise initialize for horizontal or vertical properties
		name === "width" ? 1 : 0,

		val = 0;

	for ( ; i < 4; i += 2 ) {
		// Both box models exclude margin, so add it if we want it
		if ( extra === "margin" ) {
			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
		}

		if ( isBorderBox ) {
			// border-box includes padding, so remove it if we want content
			if ( extra === "content" ) {
				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// At this point, extra isn't border nor margin, so remove border
			if ( extra !== "margin" ) {
				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		} else {
			// At this point, extra isn't content, so add padding
			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// At this point, extra isn't content nor padding, so add border
			if ( extra !== "padding" ) {
				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	return val;
}

function getWidthOrHeight( elem, name, extra ) {

	// Start with offset property, which is equivalent to the border-box value
	var valueIsBorderBox = true,
		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
		styles = getStyles( elem ),
		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

	// Some non-html elements return undefined for offsetWidth, so check for null/undefined
	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	if ( val <= 0 || val == null ) {
		// Fall back to computed then uncomputed css if necessary
		val = curCSS( elem, name, styles );
		if ( val < 0 || val == null ) {
			val = elem.style[ name ];
		}

		// Computed unit is not pixels. Stop here and return.
		if ( rnumnonpx.test(val) ) {
			return val;
		}

		// Check for style in case a browser which returns unreliable values
		// for getComputedStyle silently falls back to the reliable elem.style
		valueIsBorderBox = isBorderBox &&
			( support.boxSizingReliable() || val === elem.style[ name ] );

		// Normalize "", auto, and prepare for extra
		val = parseFloat( val ) || 0;
	}

	// Use the active box-sizing model to add/subtract irrelevant styles
	return ( val +
		augmentWidthOrHeight(
			elem,
			name,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles
		)
	) + "px";
}

function showHide( elements, show ) {
	var display, elem, hidden,
		values = [],
		index = 0,
		length = elements.length;

	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		values[ index ] = data_priv.get( elem, "olddisplay" );
		display = elem.style.display;
		if ( show ) {
			// Reset the inline display of this element to learn if it is
			// being hidden by cascaded rules or not
			if ( !values[ index ] && display === "none" ) {
				elem.style.display = "";
			}

			// Set elements which have been overridden with display: none
			// in a stylesheet to whatever the default browser style is
			// for such an element
			if ( elem.style.display === "" && isHidden( elem ) ) {
				values[ index ] = data_priv.access( elem, "olddisplay", defaultDisplay(elem.nodeName) );
			}
		} else {
			hidden = isHidden( elem );

			if ( display !== "none" || !hidden ) {
				data_priv.set( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
			}
		}
	}

	// Set the display of most of the elements in a second loop
	// to avoid the constant reflow
	for ( index = 0; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}
		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
			elem.style.display = show ? values[ index ] || "" : "none";
		}
	}

	return elements;
}

jQuery.extend({

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {
		"float": "cssFloat"
	},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = jQuery.camelCase( name ),
			style = elem.style;

		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number, add 'px' to the (except for certain CSS properties)
			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
				value += "px";
			}

			// Support: IE9-11+
			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {
				style[ name ] = value;
			}

		} else {
			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = jQuery.camelCase( name );

		// Make sure that we're working with the right name
		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
		}
		return val;
	}
});

jQuery.each([ "height", "width" ], function( i, name ) {
	jQuery.cssHooks[ name ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) && elem.offsetWidth === 0 ?
					jQuery.swap( elem, cssShow, function() {
						return getWidthOrHeight( elem, name, extra );
					}) :
					getWidthOrHeight( elem, name, extra );
			}
		},

		set: function( elem, value, extra ) {
			var styles = extra && getStyles( elem );
			return setPositiveNumber( elem, value, extra ?
				augmentWidthOrHeight(
					elem,
					name,
					extra,
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
					styles
				) : 0
			);
		}
	};
});

// Support: Android 2.3
jQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,
	function( elem, computed ) {
		if ( computed ) {
			return jQuery.swap( elem, { "display": "inline-block" },
				curCSS, [ elem, "marginRight" ] );
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each({
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split(" ") : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( !rmargin.test( prefix ) ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
});

jQuery.fn.extend({
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( jQuery.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	},
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each(function() {
			if ( isHidden( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		});
	}
});


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || "swing";
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			if ( tween.elem[ tween.prop ] != null &&
				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );
			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {
			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE9
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	}
};

jQuery.fx = Tween.prototype.init;

// Back Compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, timerId,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rfxnum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" ),
	rrun = /queueHooks$/,
	animationPrefilters = [ defaultPrefilter ],
	tweeners = {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value ),
				target = tween.cur(),
				parts = rfxnum.exec( value ),
				unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

				// Starting value computation is required for potential unit mismatches
				start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
					rfxnum.exec( jQuery.css( tween.elem, prop ) ),
				scale = 1,
				maxIterations = 20;

			if ( start && start[ 3 ] !== unit ) {
				// Trust units reported by jQuery.css
				unit = unit || start[ 3 ];

				// Make sure we update the tween properties later on
				parts = parts || [];

				// Iteratively approximate from a nonzero starting point
				start = +target || 1;

				do {
					// If previous iteration zeroed out, double until we get *something*.
					// Use string for doubling so we don't accidentally see scale as unchanged below
					scale = scale || ".5";

					// Adjust and apply
					start = start / scale;
					jQuery.style( tween.elem, prop, start + unit );

				// Update scale, tolerating zero or NaN from tween.cur(),
				// break the loop if scale is unchanged or perfect, or if we've just had enough
				} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
			}

			// Update tween properties
			if ( parts ) {
				start = tween.start = +start || +target || 0;
				tween.unit = unit;
				// If a +=/-= token was provided, we're doing a relative animation
				tween.end = parts[ 1 ] ?
					start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
					+parts[ 2 ];
			}

			return tween;
		} ]
	};

// Animations created synchronously will run synchronously
function createFxNow() {
	setTimeout(function() {
		fxNow = undefined;
	});
	return ( fxNow = jQuery.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4 ; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( (tween = collection[ index ].call( animation, prop, value )) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	/* jshint validthis: true */
	var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHidden( elem ),
		dataShow = data_priv.get( elem, "fxshow" );

	// Handle queue: false promises
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always(function() {
			// Ensure the complete handler is called before this completes
			anim.always(function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			});
		});
	}

	// Height/width overflow pass
	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
		// Make sure that nothing sneaks out
		// Record all 3 overflow attributes because IE9-10 do not
		// change the overflow attribute when overflowX and
		// overflowY are set to the same value
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Set display property to inline-block for height/width
		// animations on inline elements that are having width/height animated
		display = jQuery.css( elem, "display" );

		// Test default display if display is currently "none"
		checkDisplay = display === "none" ?
			data_priv.get( elem, "olddisplay" ) || defaultDisplay( elem.nodeName ) : display;

		if ( checkDisplay === "inline" && jQuery.css( elem, "float" ) === "none" ) {
			style.display = "inline-block";
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always(function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		});
	}

	// show/hide pass
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.exec( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );

		// Any non-fx value stops us from restoring the original display value
		} else {
			display = undefined;
		}
	}

	if ( !jQuery.isEmptyObject( orig ) ) {
		if ( dataShow ) {
			if ( "hidden" in dataShow ) {
				hidden = dataShow.hidden;
			}
		} else {
			dataShow = data_priv.access( elem, "fxshow", {} );
		}

		// Store state if its toggle - enables .stop().toggle() to "reverse"
		if ( toggle ) {
			dataShow.hidden = !hidden;
		}
		if ( hidden ) {
			jQuery( elem ).show();
		} else {
			anim.done(function() {
				jQuery( elem ).hide();
			});
		}
		anim.done(function() {
			var prop;

			data_priv.remove( elem, "fxshow" );
			for ( prop in orig ) {
				jQuery.style( elem, prop, orig[ prop ] );
			}
		});
		for ( prop in orig ) {
			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );

			if ( !( prop in dataShow ) ) {
				dataShow[ prop ] = tween.start;
				if ( hidden ) {
					tween.end = tween.start;
					tween.start = prop === "width" || prop === "height" ? 1 : 0;
				}
			}
		}

	// If this is a noop like .hide().hide(), restore an overwritten display value
	} else if ( (display === "none" ? defaultDisplay( elem.nodeName ) : display) === "inline" ) {
		style.display = display;
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = jQuery.camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( jQuery.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = animationPrefilters.length,
		deferred = jQuery.Deferred().always( function() {
			// Don't match elem in the :animated selector
			delete tick.elem;
		}),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
				// Support: Android 2.3
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length ; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ]);

			if ( percent < 1 && length ) {
				return remaining;
			} else {
				deferred.resolveWith( elem, [ animation ] );
				return false;
			}
		},
		animation = deferred.promise({
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, { specialEasing: {} }, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,
					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length ; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		}),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length ; index++ ) {
		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( jQuery.isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		})
	);

	// attach callbacks from options
	return animation.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );
}

jQuery.Animation = jQuery.extend( Animation, {

	tweener: function( props, callback ) {
		if ( jQuery.isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.split(" ");
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length ; index++ ) {
			prop = props[ index ];
			tweeners[ prop ] = tweeners[ prop ] || [];
			tweeners[ prop ].unshift( callback );
		}
	},

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			animationPrefilters.unshift( callback );
		} else {
			animationPrefilters.push( callback );
		}
	}
});

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			jQuery.isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	};

	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( jQuery.isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend({
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHidden ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate({ opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {
				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || data_priv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each(function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = data_priv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		});
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each(function() {
			var index,
				data = data_priv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		});
	}
});

jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
});

// Generate shortcuts for custom animations
jQuery.each({
	slideDown: genFx("show"),
	slideUp: genFx("hide"),
	slideToggle: genFx("toggle"),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
});

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = jQuery.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];
		// Checks the timer has not already been removed
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	if ( timer() ) {
		jQuery.fx.start();
	} else {
		jQuery.timers.pop();
	}
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
	if ( !timerId ) {
		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
	}
};

jQuery.fx.stop = function() {
	clearInterval( timerId );
	timerId = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,
	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = setTimeout( next, time );
		hooks.stop = function() {
			clearTimeout( timeout );
		};
	});
};


(function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: iOS<=5.1, Android<=4.2+
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE<=11+
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: Android<=2.3
	// Options inside disabled selects are incorrectly marked as disabled
	select.disabled = true;
	support.optDisabled = !opt.disabled;

	// Support: IE<=11+
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
})();


var nodeHook, boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend({
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each(function() {
			jQuery.removeAttr( this, name );
		});
	}
});

jQuery.extend({
	attr: function( elem, name, value ) {
		var hooks, ret,
			nType = elem.nodeType;

		// don't get/set attributes on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === strundefined ) {
			return jQuery.prop( elem, name, value );
		}

		// All attributes are lowercase
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			name = name.toLowerCase();
			hooks = jQuery.attrHooks[ name ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
		}

		if ( value !== undefined ) {

			if ( value === null ) {
				jQuery.removeAttr( elem, name );

			} else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
				return ret;

			} else {
				elem.setAttribute( name, value + "" );
				return value;
			}

		} else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
			return ret;

		} else {
			ret = jQuery.find.attr( elem, name );

			// Non-existent attributes return null, we normalize to undefined
			return ret == null ?
				undefined :
				ret;
		}
	},

	removeAttr: function( elem, value ) {
		var name, propName,
			i = 0,
			attrNames = value && value.match( rnotwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( (name = attrNames[i++]) ) {
				propName = jQuery.propFix[ name ] || name;

				// Boolean attributes get special treatment (#10870)
				if ( jQuery.expr.match.bool.test( name ) ) {
					// Set corresponding property to false
					elem[ propName ] = false;
				}

				elem.removeAttribute( name );
			}
		}
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					jQuery.nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	}
});

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {
			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};
jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle;
		if ( !isXML ) {
			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ name ];
			attrHandle[ name ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				name.toLowerCase() :
				null;
			attrHandle[ name ] = handle;
		}
		return ret;
	};
});




var rfocusable = /^(?:input|select|textarea|button)$/i;

jQuery.fn.extend({
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each(function() {
			delete this[ jQuery.propFix[ name ] || name ];
		});
	}
});

jQuery.extend({
	propFix: {
		"for": "htmlFor",
		"class": "className"
	},

	prop: function( elem, name, value ) {
		var ret, hooks, notxml,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

		if ( notxml ) {
			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
				ret :
				( elem[ name ] = value );

		} else {
			return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
				ret :
				elem[ name ];
		}
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {
				return elem.hasAttribute( "tabindex" ) || rfocusable.test( elem.nodeName ) || elem.href ?
					elem.tabIndex :
					-1;
			}
		}
	}
});

if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {
			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		}
	};
}

jQuery.each([
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
});




var rclass = /[\t\r\n\f]/g;

jQuery.fn.extend({
	addClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).addClass( value.call( this, j, this.className ) );
			});
		}

		if ( proceed ) {
			// The disjunction here is for better compressibility (see removeClass)
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					" "
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// only assign if different to avoid unneeded rendering.
					finalValue = jQuery.trim( cur );
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = arguments.length === 0 || typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).removeClass( value.call( this, j, this.className ) );
			});
		}
		if ( proceed ) {
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					""
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = value ? jQuery.trim( cur ) : "";
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value;

		if ( typeof stateVal === "boolean" && type === "string" ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( i ) {
				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
			});
		}

		return this.each(function() {
			if ( type === "string" ) {
				// Toggle individual class names
				var className,
					i = 0,
					self = jQuery( this ),
					classNames = value.match( rnotwhite ) || [];

				while ( (className = classNames[ i++ ]) ) {
					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( type === strundefined || type === "boolean" ) {
				if ( this.className ) {
					// store className if set
					data_priv.set( this, "__className__", this.className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				this.className = this.className || value === false ? "" : data_priv.get( this, "__className__" ) || "";
			}
		});
	},

	hasClass: function( selector ) {
		var className = " " + selector + " ",
			i = 0,
			l = this.length;
		for ( ; i < l; i++ ) {
			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
				return true;
			}
		}

		return false;
	}
});




var rreturn = /\r/g;

jQuery.fn.extend({
	val: function( value ) {
		var hooks, ret, isFunction,
			elem = this[0];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
					return ret;
				}

				ret = elem.value;

				return typeof ret === "string" ?
					// Handle most common string cases
					ret.replace(rreturn, "") :
					// Handle cases where value is null/undef or number
					ret == null ? "" : ret;
			}

			return;
		}

		isFunction = jQuery.isFunction( value );

		return this.each(function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( isFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( jQuery.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				});
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		});
	}
});

jQuery.extend({
	valHooks: {
		option: {
			get: function( elem ) {
				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :
					// Support: IE10-11+
					// option.text throws exceptions (#14686, #14858)
					jQuery.trim( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one" || index < 0,
					values = one ? null : [],
					max = one ? index + 1 : options.length,
					i = index < 0 ?
						max :
						one ? index : 0;

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// IE6-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&
							// Don't return options that are disabled or in a disabled optgroup
							( support.optDisabled ? !option.disabled : option.getAttribute( "disabled" ) === null ) &&
							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];
					if ( (option.selected = jQuery.inArray( option.value, values ) >= 0) ) {
						optionSet = true;
					}
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
});

// Radios and checkboxes getter/setter
jQuery.each([ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( jQuery.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute("value") === null ? "on" : elem.value;
		};
	}
});




// Return jQuery for attributes-only inclusion


jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
});

jQuery.fn.extend({
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	},

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {
		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
	}
});


var nonce = jQuery.now();

var rquery = (/\?/);



// Support: Android 2.3
// Workaround failure to string-cast null input
jQuery.parseJSON = function( data ) {
	return JSON.parse( data + "" );
};


// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml, tmp;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE9
	try {
		tmp = new DOMParser();
		xml = tmp.parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rhash = /#.*$/,
	rts = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,
	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,
	rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Document location
	ajaxLocation = window.location.href,

	// Segment location into parts
	ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];

		if ( jQuery.isFunction( func ) ) {
			// For each dataType in the dataTypeExpression
			while ( (dataType = dataTypes[i++]) ) {
				// Prepend if requested
				if ( dataType[0] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );

				// Otherwise append
				} else {
					(structure[ dataType ] = structure[ dataType ] || []).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		});
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {
		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}
		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},
		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

		// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {
								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s[ "throws" ] ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend({

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: ajaxLocation,
		type: "GET",
		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /xml/,
			html: /html/,
			json: /json/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": jQuery.parseJSON,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,
			// URL without anti-cache param
			cacheURL,
			// Response headers
			responseHeadersString,
			responseHeaders,
			// timeout handle
			timeoutTimer,
			// Cross-domain detection vars
			parts,
			// To know if global events are to be dispatched
			fireGlobals,
			// Loop variable
			i,
			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),
			// Callbacks context
			callbackContext = s.context || s,
			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
				jQuery( callbackContext ) :
				jQuery.event,
			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks("once memory"),
			// Status-dependent callbacks
			statusCode = s.statusCode || {},
			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},
			// The jqXHR state
			state = 0,
			// Default abort message
			strAbort = "canceled",
			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( state === 2 ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( (match = rheaders.exec( responseHeadersString )) ) {
								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return state === 2 ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					var lname = name.toLowerCase();
					if ( !state ) {
						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( !state ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( state < 2 ) {
							for ( code in map ) {
								// Lazy-add the new callback in a way that preserves old ones
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						} else {
							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR ).complete = completeDeferred.add;
		jqXHR.success = jqXHR.done;
		jqXHR.error = jqXHR.fail;

		// Remove hash character (#7531: and string promotion)
		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" )
			.replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( rnotwhite ) || [ "" ];

		// A cross-domain request is in order when we have a protocol:host:port mismatch
		if ( s.crossDomain == null ) {
			parts = rurl.exec( s.url.toLowerCase() );
			s.crossDomain = !!( parts &&
				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
			);
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( state === 2 ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger("ajaxStart");
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		cacheURL = s.url;

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// If data is available, append data to url
			if ( s.data ) {
				cacheURL = ( s.url += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add anti-cache in url if needed
			if ( s.cache === false ) {
				s.url = rts.test( cacheURL ) ?

					// If there is already a '_' parameter, set its value
					cacheURL.replace( rts, "$1_=" + nonce++ ) :

					// Otherwise add one to the end
					cacheURL + ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + nonce++;
			}
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		for ( i in { success: 1, error: 1, complete: 1 } ) {
			jqXHR[ i ]( s[ i ] );
		}

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}
			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = setTimeout(function() {
					jqXHR.abort("timeout");
				}, s.timeout );
			}

			try {
				state = 1;
				transport.send( requestHeaders, done );
			} catch ( e ) {
				// Propagate exception as error if not done
				if ( state < 2 ) {
					done( -1, e );
				// Simply rethrow otherwise
				} else {
					throw e;
				}
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Called once
			if ( state === 2 ) {
				return;
			}

			// State is "done" now
			state = 2;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader("Last-Modified");
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader("etag");
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {
				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger("ajaxStop");
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
});

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {
		// Shift arguments if data argument was omitted
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		return jQuery.ajax({
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		});
	};
});


jQuery._evalUrl = function( url ) {
	return jQuery.ajax({
		url: url,
		type: "GET",
		dataType: "script",
		async: false,
		global: false,
		"throws": true
	});
};


jQuery.fn.extend({
	wrapAll: function( html ) {
		var wrap;

		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapAll( html.call(this, i) );
			});
		}

		if ( this[ 0 ] ) {

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map(function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			}).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapInner( html.call(this, i) );
			});
		}

		return this.each(function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		});
	},

	wrap: function( html ) {
		var isFunction = jQuery.isFunction( html );

		return this.each(function( i ) {
			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
		});
	},

	unwrap: function() {
		return this.parent().each(function() {
			if ( !jQuery.nodeName( this, "body" ) ) {
				jQuery( this ).replaceWith( this.childNodes );
			}
		}).end();
	}
});


jQuery.expr.filters.hidden = function( elem ) {
	// Support: Opera <= 12.12
	// Opera reports offsetWidths and offsetHeights less than zero on some elements
	return elem.offsetWidth <= 0 && elem.offsetHeight <= 0;
};
jQuery.expr.filters.visible = function( elem ) {
	return !jQuery.expr.filters.hidden( elem );
};




var r20 = /%20/g,
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( jQuery.isArray( obj ) ) {
		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {
				// Treat each array item as a scalar.
				add( prefix, v );

			} else {
				// Item is non-scalar (array or object), encode its numeric index.
				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
			}
		});

	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {
		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, value ) {
			// If value is a function, invoke it and return its value
			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
		};

	// Set traditional to true for jQuery <= 1.3.2 behavior.
	if ( traditional === undefined ) {
		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		});

	} else {
		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" ).replace( r20, "+" );
};

jQuery.fn.extend({
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map(function() {
			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		})
		.filter(function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		})
		.map(function( i, elem ) {
			var val = jQuery( this ).val();

			return val == null ?
				null :
				jQuery.isArray( val ) ?
					jQuery.map( val, function( val ) {
						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
					}) :
					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		}).get();
	}
});


jQuery.ajaxSettings.xhr = function() {
	try {
		return new XMLHttpRequest();
	} catch( e ) {}
};

var xhrId = 0,
	xhrCallbacks = {},
	xhrSuccessStatus = {
		// file protocol always yields status code 0, assume 200
		0: 200,
		// Support: IE9
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

// Support: IE9
// Open requests must be manually aborted on unload (#5280)
// See https://support.microsoft.com/kb/2856746 for more info
if ( window.attachEvent ) {
	window.attachEvent( "onunload", function() {
		for ( var key in xhrCallbacks ) {
			xhrCallbacks[ key ]();
		}
	});
}

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport(function( options ) {
	var callback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr(),
					id = ++xhrId;

				xhr.open( options.type, options.url, options.async, options.username, options.password );

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers["X-Requested-With"] ) {
					headers["X-Requested-With"] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							delete xhrCallbacks[ id ];
							callback = xhr.onload = xhr.onerror = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {
								complete(
									// file: protocol always yields status 0; see #8605, #14207
									xhr.status,
									xhr.statusText
								);
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,
									// Support: IE9
									// Accessing binary-data responseText throws an exception
									// (#11426)
									typeof xhr.responseText === "string" ? {
										text: xhr.responseText
									} : undefined,
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				xhr.onerror = callback("error");

				// Create the abort callback
				callback = xhrCallbacks[ id ] = callback("abort");

				try {
					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {
					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




// Install script dataType
jQuery.ajaxSetup({
	accepts: {
		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /(?:java|ecma)script/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
});

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
});

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {
	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery("<script>").prop({
					async: true,
					charset: s.scriptCharset,
					src: s.url
				}).on(
					"load error",
					callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					}
				);
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup({
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
});

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters["script json"] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always(function() {
			// Restore preexisting value
			window[ callbackName ] = overwritten;

			// Save back as free
			if ( s[ callbackName ] ) {
				// make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		});

		// Delegate to script
		return "script";
	}
});




// data: string of html
// context (optional): If specified, the fragment will be created in this context, defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( !data || typeof data !== "string" ) {
		return null;
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}
	context = context || document;

	var parsed = rsingleTag.exec( data ),
		scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[1] ) ];
	}

	parsed = jQuery.buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


// Keep a copy of the old load method
var _load = jQuery.fn.load;

/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	if ( typeof url !== "string" && _load ) {
		return _load.apply( this, arguments );
	}

	var selector, type, response,
		self = this,
		off = url.indexOf(" ");

	if ( off >= 0 ) {
		selector = jQuery.trim( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( jQuery.isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax({
			url: url,

			// if "type" variable is undefined, then "GET" method will be used
			type: type,
			dataType: "html",
			data: params
		}).done(function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		}).complete( callback && function( jqXHR, status ) {
			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
		});
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
});




jQuery.expr.filters.animated = function( elem ) {
	return jQuery.grep(jQuery.timers, function( fn ) {
		return elem === fn.elem;
	}).length;
};




var docElem = window.document.documentElement;

/**
 * Gets a window from an element
 */
function getWindow( elem ) {
	return jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;
}

jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf("auto") > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( jQuery.isFunction( options ) ) {
			options = options.call( elem, i, curOffset );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend({
	offset: function( options ) {
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each(function( i ) {
					jQuery.offset.setOffset( this, options, i );
				});
		}

		var docElem, win,
			elem = this[ 0 ],
			box = { top: 0, left: 0 },
			doc = elem && elem.ownerDocument;

		if ( !doc ) {
			return;
		}

		docElem = doc.documentElement;

		// Make sure it's not a disconnected DOM node
		if ( !jQuery.contains( docElem, elem ) ) {
			return box;
		}

		// Support: BlackBerry 5, iOS 3 (original iPhone)
		// If we don't have gBCR, just use 0,0 rather than error
		if ( typeof elem.getBoundingClientRect !== strundefined ) {
			box = elem.getBoundingClientRect();
		}
		win = getWindow( doc );
		return {
			top: box.top + win.pageYOffset - docElem.clientTop,
			left: box.left + win.pageXOffset - docElem.clientLeft
		};
	},

	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent
		if ( jQuery.css( elem, "position" ) === "fixed" ) {
			// Assume getBoundingClientRect is there when computed position is fixed
			offset = elem.getBoundingClientRect();

		} else {
			// Get *real* offsetParent
			offsetParent = this.offsetParent();

			// Get correct offsets
			offset = this.offset();
			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
				parentOffset = offsetParent.offset();
			}

			// Add offsetParent borders
			parentOffset.top += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	offsetParent: function() {
		return this.map(function() {
			var offsetParent = this.offsetParent || docElem;

			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position" ) === "static" ) ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || docElem;
		});
	}
});

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {
			var win = getWindow( elem );

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : window.pageXOffset,
					top ? val : window.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length, null );
	};
});

// Support: Safari<7+, Chrome<37+
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );
				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
});


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( jQuery.isWindow( elem ) ) {
					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
					// isn't a whole lot we can do. See pull request at this URL for discussion:
					// https://github.com/jquery/jquery/pull/764
					return elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?
					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable, null );
		};
	});
});


// The number of elements contained in the matched element set
jQuery.fn.size = function() {
	return this.length;
};

jQuery.fn.andSelf = jQuery.fn.addBack;




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
	define( "jquery", [], function() {
		return jQuery;
	});
}




var
	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( typeof noGlobal === strundefined ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;

}));

},{}],27:[function(require,module,exports){
(function (global){
/*!
    localForage -- Offline Storage, Improved
    Version 1.5.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.localforage = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw (f.code="MODULE_NOT_FOUND", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
'use strict';
var Mutation = global.MutationObserver || global.WebKitMutationObserver;

var scheduleDrain;

{
  if (Mutation) {
    var called = 0;
    var observer = new Mutation(nextTick);
    var element = global.document.createTextNode('');
    observer.observe(element, {
      characterData: true
    });
    scheduleDrain = function () {
      element.data = (called = ++called % 2);
    };
  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {
    var channel = new global.MessageChannel();
    channel.port1.onmessage = nextTick;
    scheduleDrain = function () {
      channel.port2.postMessage(0);
    };
  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {
    scheduleDrain = function () {

      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
      var scriptEl = global.document.createElement('script');
      scriptEl.onreadystatechange = function () {
        nextTick();

        scriptEl.onreadystatechange = null;
        scriptEl.parentNode.removeChild(scriptEl);
        scriptEl = null;
      };
      global.document.documentElement.appendChild(scriptEl);
    };
  } else {
    scheduleDrain = function () {
      setTimeout(nextTick, 0);
    };
  }
}

var draining;
var queue = [];
//named nextTick for less confusing stack traces
function nextTick() {
  draining = true;
  var i, oldQueue;
  var len = queue.length;
  while (len) {
    oldQueue = queue;
    queue = [];
    i = -1;
    while (++i < len) {
      oldQueue[i]();
    }
    len = queue.length;
  }
  draining = false;
}

module.exports = immediate;
function immediate(task) {
  if (queue.push(task) === 1 && !draining) {
    scheduleDrain();
  }
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],2:[function(_dereq_,module,exports){
'use strict';
var immediate = _dereq_(1);

/* istanbul ignore next */
function INTERNAL() {}

var handlers = {};

var REJECTED = ['REJECTED'];
var FULFILLED = ['FULFILLED'];
var PENDING = ['PENDING'];

module.exports = exports = Promise;

function Promise(resolver) {
  if (typeof resolver !== 'function') {
    throw new TypeError('resolver must be a function');
  }
  this.state = PENDING;
  this.queue = [];
  this.outcome = void 0;
  if (resolver !== INTERNAL) {
    safelyResolveThenable(this, resolver);
  }
}

Promise.prototype["catch"] = function (onRejected) {
  return this.then(null, onRejected);
};
Promise.prototype.then = function (onFulfilled, onRejected) {
  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||
    typeof onRejected !== 'function' && this.state === REJECTED) {
    return this;
  }
  var promise = new this.constructor(INTERNAL);
  if (this.state !== PENDING) {
    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;
    unwrap(promise, resolver, this.outcome);
  } else {
    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));
  }

  return promise;
};
function QueueItem(promise, onFulfilled, onRejected) {
  this.promise = promise;
  if (typeof onFulfilled === 'function') {
    this.onFulfilled = onFulfilled;
    this.callFulfilled = this.otherCallFulfilled;
  }
  if (typeof onRejected === 'function') {
    this.onRejected = onRejected;
    this.callRejected = this.otherCallRejected;
  }
}
QueueItem.prototype.callFulfilled = function (value) {
  handlers.resolve(this.promise, value);
};
QueueItem.prototype.otherCallFulfilled = function (value) {
  unwrap(this.promise, this.onFulfilled, value);
};
QueueItem.prototype.callRejected = function (value) {
  handlers.reject(this.promise, value);
};
QueueItem.prototype.otherCallRejected = function (value) {
  unwrap(this.promise, this.onRejected, value);
};

function unwrap(promise, func, value) {
  immediate(function () {
    var returnValue;
    try {
      returnValue = func(value);
    } catch (e) {
      return handlers.reject(promise, e);
    }
    if (returnValue === promise) {
      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));
    } else {
      handlers.resolve(promise, returnValue);
    }
  });
}

handlers.resolve = function (self, value) {
  var result = tryCatch(getThen, value);
  if (result.status === 'error') {
    return handlers.reject(self, result.value);
  }
  var thenable = result.value;

  if (thenable) {
    safelyResolveThenable(self, thenable);
  } else {
    self.state = FULFILLED;
    self.outcome = value;
    var i = -1;
    var len = self.queue.length;
    while (++i < len) {
      self.queue[i].callFulfilled(value);
    }
  }
  return self;
};
handlers.reject = function (self, error) {
  self.state = REJECTED;
  self.outcome = error;
  var i = -1;
  var len = self.queue.length;
  while (++i < len) {
    self.queue[i].callRejected(error);
  }
  return self;
};

function getThen(obj) {
  // Make sure we only access the accessor once as required by the spec
  var then = obj && obj.then;
  if (obj && typeof obj === 'object' && typeof then === 'function') {
    return function appyThen() {
      then.apply(obj, arguments);
    };
  }
}

function safelyResolveThenable(self, thenable) {
  // Either fulfill, reject or reject with error
  var called = false;
  function onError(value) {
    if (called) {
      return;
    }
    called = true;
    handlers.reject(self, value);
  }

  function onSuccess(value) {
    if (called) {
      return;
    }
    called = true;
    handlers.resolve(self, value);
  }

  function tryToUnwrap() {
    thenable(onSuccess, onError);
  }

  var result = tryCatch(tryToUnwrap);
  if (result.status === 'error') {
    onError(result.value);
  }
}

function tryCatch(func, value) {
  var out = {};
  try {
    out.value = func(value);
    out.status = 'success';
  } catch (e) {
    out.status = 'error';
    out.value = e;
  }
  return out;
}

exports.resolve = resolve;
function resolve(value) {
  if (value instanceof this) {
    return value;
  }
  return handlers.resolve(new this(INTERNAL), value);
}

exports.reject = reject;
function reject(reason) {
  var promise = new this(INTERNAL);
  return handlers.reject(promise, reason);
}

exports.all = all;
function all(iterable) {
  var self = this;
  if (Object.prototype.toString.call(iterable) !== '[object Array]') {
    return this.reject(new TypeError('must be an array'));
  }

  var len = iterable.length;
  var called = false;
  if (!len) {
    return this.resolve([]);
  }

  var values = new Array(len);
  var resolved = 0;
  var i = -1;
  var promise = new this(INTERNAL);

  while (++i < len) {
    allResolver(iterable[i], i);
  }
  return promise;
  function allResolver(value, i) {
    self.resolve(value).then(resolveFromAll, function (error) {
      if (!called) {
        called = true;
        handlers.reject(promise, error);
      }
    });
    function resolveFromAll(outValue) {
      values[i] = outValue;
      if (++resolved === len && !called) {
        called = true;
        handlers.resolve(promise, values);
      }
    }
  }
}

exports.race = race;
function race(iterable) {
  var self = this;
  if (Object.prototype.toString.call(iterable) !== '[object Array]') {
    return this.reject(new TypeError('must be an array'));
  }

  var len = iterable.length;
  var called = false;
  if (!len) {
    return this.resolve([]);
  }

  var i = -1;
  var promise = new this(INTERNAL);

  while (++i < len) {
    resolver(iterable[i]);
  }
  return promise;
  function resolver(value) {
    self.resolve(value).then(function (response) {
      if (!called) {
        called = true;
        handlers.resolve(promise, response);
      }
    }, function (error) {
      if (!called) {
        called = true;
        handlers.reject(promise, error);
      }
    });
  }
}

},{"1":1}],3:[function(_dereq_,module,exports){
(function (global){
'use strict';
if (typeof global.Promise !== 'function') {
  global.Promise = _dereq_(2);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"2":2}],4:[function(_dereq_,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function getIDB() {
    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */
    try {
        if (typeof indexedDB !== 'undefined') {
            return indexedDB;
        }
        if (typeof webkitIndexedDB !== 'undefined') {
            return webkitIndexedDB;
        }
        if (typeof mozIndexedDB !== 'undefined') {
            return mozIndexedDB;
        }
        if (typeof OIndexedDB !== 'undefined') {
            return OIndexedDB;
        }
        if (typeof msIndexedDB !== 'undefined') {
            return msIndexedDB;
        }
    } catch (e) {}
}

var idb = getIDB();

function isIndexedDBValid() {
    try {
        // Initialize IndexedDB; fall back to vendor-prefixed versions
        // if needed.
        if (!idb) {
            return false;
        }
        // We mimic PouchDB here;
        //
        // We test for openDatabase because IE Mobile identifies itself
        // as Safari. Oh the lulz...
        var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);

        var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;

        // Safari <10.1 does not meet our requirements for IDB support (#5572)
        // since Safari 10.1 shipped with fetch, we can use that to detect it
        return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' &&
        // some outdated implementations of IDB that appear on Samsung
        // and HTC Android devices <4.4 are missing IDBKeyRange
        typeof IDBKeyRange !== 'undefined';
    } catch (e) {
        return false;
    }
}

function isWebSQLValid() {
    return typeof openDatabase === 'function';
}

function isLocalStorageValid() {
    try {
        return typeof localStorage !== 'undefined' && 'setItem' in localStorage && localStorage.setItem;
    } catch (e) {
        return false;
    }
}

// Abstracts constructing a Blob object, so it also works in older
// browsers that don't support the native Blob constructor. (i.e.
// old QtWebKit versions, at least).
// Abstracts constructing a Blob object, so it also works in older
// browsers that don't support the native Blob constructor. (i.e.
// old QtWebKit versions, at least).
function createBlob(parts, properties) {
    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */
    parts = parts || [];
    properties = properties || {};
    try {
        return new Blob(parts, properties);
    } catch (e) {
        if (e.name !== 'TypeError') {
            throw e;
        }
        var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : WebKitBlobBuilder;
        var builder = new Builder();
        for (var i = 0; i < parts.length; i += 1) {
            builder.append(parts[i]);
        }
        return builder.getBlob(properties.type);
    }
}

// This is CommonJS because lie is an external dependency, so Rollup
// can just ignore it.
if (typeof Promise === 'undefined') {
    // In the "nopromises" build this will just throw if you don't have
    // a global promise object, but it would throw anyway later.
    _dereq_(3);
}
var Promise$1 = Promise;

function executeCallback(promise, callback) {
    if (callback) {
        promise.then(function (result) {
            callback(null, result);
        }, function (error) {
            callback(error);
        });
    }
}

function executeTwoCallbacks(promise, callback, errorCallback) {
    if (typeof callback === 'function') {
        promise.then(callback);
    }

    if (typeof errorCallback === 'function') {
        promise["catch"](errorCallback);
    }
}

// Some code originally from async_storage.js in
// [Gaia](https://github.com/mozilla-b2g/gaia).

var DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';
var supportsBlobs;
var dbContexts;
var toString = Object.prototype.toString;

// Transform a binary string to an array buffer, because otherwise
// weird stuff happens when you try to work with the binary string directly.
// It is known.
// From http://stackoverflow.com/questions/14967647/ (continues on next line)
// encode-decode-image-with-base64-breaks-image (2013-04-21)
function _binStringToArrayBuffer(bin) {
    var length = bin.length;
    var buf = new ArrayBuffer(length);
    var arr = new Uint8Array(buf);
    for (var i = 0; i < length; i++) {
        arr[i] = bin.charCodeAt(i);
    }
    return buf;
}

//
// Blobs are not supported in all versions of IndexedDB, notably
// Chrome <37 and Android <5. In those versions, storing a blob will throw.
//
// Various other blob bugs exist in Chrome v37-42 (inclusive).
// Detecting them is expensive and confusing to users, and Chrome 37-42
// is at very low usage worldwide, so we do a hacky userAgent check instead.
//
// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120
// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916
// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836
//
// Code borrowed from PouchDB. See:
// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js
//
function _checkBlobSupportWithoutCaching(idb) {
    return new Promise$1(function (resolve) {
        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, 'readwrite');
        var blob = createBlob(['']);
        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');

        txn.onabort = function (e) {
            // If the transaction aborts now its due to not being able to
            // write to the database, likely due to the disk being full
            e.preventDefault();
            e.stopPropagation();
            resolve(false);
        };

        txn.oncomplete = function () {
            var matchedChrome = navigator.userAgent.match(/Chrome\/(\d+)/);
            var matchedEdge = navigator.userAgent.match(/Edge\//);
            // MS Edge pretends to be Chrome 42:
            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx
            resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);
        };
    })["catch"](function () {
        return false; // error, so assume unsupported
    });
}

function _checkBlobSupport(idb) {
    if (typeof supportsBlobs === 'boolean') {
        return Promise$1.resolve(supportsBlobs);
    }
    return _checkBlobSupportWithoutCaching(idb).then(function (value) {
        supportsBlobs = value;
        return supportsBlobs;
    });
}

function _deferReadiness(dbInfo) {
    var dbContext = dbContexts[dbInfo.name];

    // Create a deferred object representing the current database operation.
    var deferredOperation = {};

    deferredOperation.promise = new Promise$1(function (resolve) {
        deferredOperation.resolve = resolve;
    });

    // Enqueue the deferred operation.
    dbContext.deferredOperations.push(deferredOperation);

    // Chain its promise to the database readiness.
    if (!dbContext.dbReady) {
        dbContext.dbReady = deferredOperation.promise;
    } else {
        dbContext.dbReady = dbContext.dbReady.then(function () {
            return deferredOperation.promise;
        });
    }
}

function _advanceReadiness(dbInfo) {
    var dbContext = dbContexts[dbInfo.name];

    // Dequeue a deferred operation.
    var deferredOperation = dbContext.deferredOperations.pop();

    // Resolve its promise (which is part of the database readiness
    // chain of promises).
    if (deferredOperation) {
        deferredOperation.resolve();
    }
}

function _getConnection(dbInfo, upgradeNeeded) {
    return new Promise$1(function (resolve, reject) {

        if (dbInfo.db) {
            if (upgradeNeeded) {
                _deferReadiness(dbInfo);
                dbInfo.db.close();
            } else {
                return resolve(dbInfo.db);
            }
        }

        var dbArgs = [dbInfo.name];

        if (upgradeNeeded) {
            dbArgs.push(dbInfo.version);
        }

        var openreq = idb.open.apply(idb, dbArgs);

        if (upgradeNeeded) {
            openreq.onupgradeneeded = function (e) {
                var db = openreq.result;
                try {
                    db.createObjectStore(dbInfo.storeName);
                    if (e.oldVersion <= 1) {
                        // Added when support for blob shims was added
                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);
                    }
                } catch (ex) {
                    if (ex.name === 'ConstraintError') {
                        console.warn('The database "' + dbInfo.name + '"' + ' has been upgraded from version ' + e.oldVersion + ' to version ' + e.newVersion + ', but the storage "' + dbInfo.storeName + '" already exists.');
                    } else {
                        throw ex;
                    }
                }
            };
        }

        openreq.onerror = function (e) {
            e.preventDefault();
            reject(openreq.error);
        };

        openreq.onsuccess = function () {
            resolve(openreq.result);
            _advanceReadiness(dbInfo);
        };
    });
}

function _getOriginalConnection(dbInfo) {
    return _getConnection(dbInfo, false);
}

function _getUpgradedConnection(dbInfo) {
    return _getConnection(dbInfo, true);
}

function _isUpgradeNeeded(dbInfo, defaultVersion) {
    if (!dbInfo.db) {
        return true;
    }

    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);
    var isDowngrade = dbInfo.version < dbInfo.db.version;
    var isUpgrade = dbInfo.version > dbInfo.db.version;

    if (isDowngrade) {
        // If the version is not the default one
        // then warn for impossible downgrade.
        if (dbInfo.version !== defaultVersion) {
            console.warn('The database "' + dbInfo.name + '"' + ' can\'t be downgraded from version ' + dbInfo.db.version + ' to version ' + dbInfo.version + '.');
        }
        // Align the versions to prevent errors.
        dbInfo.version = dbInfo.db.version;
    }

    if (isUpgrade || isNewStore) {
        // If the store is new then increment the version (if needed).
        // This will trigger an "upgradeneeded" event which is required
        // for creating a store.
        if (isNewStore) {
            var incVersion = dbInfo.db.version + 1;
            if (incVersion > dbInfo.version) {
                dbInfo.version = incVersion;
            }
        }

        return true;
    }

    return false;
}

// encode a blob for indexeddb engines that don't support blobs
function _encodeBlob(blob) {
    return new Promise$1(function (resolve, reject) {
        var reader = new FileReader();
        reader.onerror = reject;
        reader.onloadend = function (e) {
            var base64 = btoa(e.target.result || '');
            resolve({
                __local_forage_encoded_blob: true,
                data: base64,
                type: blob.type
            });
        };
        reader.readAsBinaryString(blob);
    });
}

// decode an encoded blob
function _decodeBlob(encodedBlob) {
    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));
    return createBlob([arrayBuff], { type: encodedBlob.type });
}

// is this one of our fancy encoded blobs?
function _isEncodedBlob(value) {
    return value && value.__local_forage_encoded_blob;
}

// Specialize the default `ready()` function by making it dependent
// on the current database operations. Thus, the driver will be actually
// ready when it's been initialized (default) *and* there are no pending
// operations on the database (initiated by some other instances).
function _fullyReady(callback) {
    var self = this;

    var promise = self._initReady().then(function () {
        var dbContext = dbContexts[self._dbInfo.name];

        if (dbContext && dbContext.dbReady) {
            return dbContext.dbReady;
        }
    });

    executeTwoCallbacks(promise, callback, callback);
    return promise;
}

// Open the IndexedDB database (automatically creates one if one didn't
// previously exist), using any options set in the config.
function _initStorage(options) {
    var self = this;
    var dbInfo = {
        db: null
    };

    if (options) {
        for (var i in options) {
            dbInfo[i] = options[i];
        }
    }

    // Initialize a singleton container for all running localForages.
    if (!dbContexts) {
        dbContexts = {};
    }

    // Get the current context of the database;
    var dbContext = dbContexts[dbInfo.name];

    // ...or create a new context.
    if (!dbContext) {
        dbContext = {
            // Running localForages sharing a database.
            forages: [],
            // Shared database.
            db: null,
            // Database readiness (promise).
            dbReady: null,
            // Deferred operations on the database.
            deferredOperations: []
        };
        // Register the new context in the global container.
        dbContexts[dbInfo.name] = dbContext;
    }

    // Register itself as a running localForage in the current context.
    dbContext.forages.push(self);

    // Replace the default `ready()` function with the specialized one.
    if (!self._initReady) {
        self._initReady = self.ready;
        self.ready = _fullyReady;
    }

    // Create an array of initialization states of the related localForages.
    var initPromises = [];

    function ignoreErrors() {
        // Don't handle errors here,
        // just makes sure related localForages aren't pending.
        return Promise$1.resolve();
    }

    for (var j = 0; j < dbContext.forages.length; j++) {
        var forage = dbContext.forages[j];
        if (forage !== self) {
            // Don't wait for itself...
            initPromises.push(forage._initReady()["catch"](ignoreErrors));
        }
    }

    // Take a snapshot of the related localForages.
    var forages = dbContext.forages.slice(0);

    // Initialize the connection process only when
    // all the related localForages aren't pending.
    return Promise$1.all(initPromises).then(function () {
        dbInfo.db = dbContext.db;
        // Get the connection or open a new one without upgrade.
        return _getOriginalConnection(dbInfo);
    }).then(function (db) {
        dbInfo.db = db;
        if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {
            // Reopen the database for upgrading.
            return _getUpgradedConnection(dbInfo);
        }
        return db;
    }).then(function (db) {
        dbInfo.db = dbContext.db = db;
        self._dbInfo = dbInfo;
        // Share the final connection amongst related localForages.
        for (var k = 0; k < forages.length; k++) {
            var forage = forages[k];
            if (forage !== self) {
                // Self is already up-to-date.
                forage._dbInfo.db = dbInfo.db;
                forage._dbInfo.version = dbInfo.version;
            }
        }
    });
}

function getItem(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);
            var req = store.get(key);

            req.onsuccess = function () {
                var value = req.result;
                if (value === undefined) {
                    value = null;
                }
                if (_isEncodedBlob(value)) {
                    value = _decodeBlob(value);
                }
                resolve(value);
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Iterate over all items stored in database.
function iterate(iterator, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);

            var req = store.openCursor();
            var iterationNumber = 1;

            req.onsuccess = function () {
                var cursor = req.result;

                if (cursor) {
                    var value = cursor.value;
                    if (_isEncodedBlob(value)) {
                        value = _decodeBlob(value);
                    }
                    var result = iterator(value, cursor.key, iterationNumber++);

                    if (result !== void 0) {
                        resolve(result);
                    } else {
                        cursor["continue"]();
                    }
                } else {
                    resolve();
                }
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);

    return promise;
}

function setItem(key, value, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        var dbInfo;
        self.ready().then(function () {
            dbInfo = self._dbInfo;
            if (toString.call(value) === '[object Blob]') {
                return _checkBlobSupport(dbInfo.db).then(function (blobSupport) {
                    if (blobSupport) {
                        return value;
                    }
                    return _encodeBlob(value);
                });
            }
            return value;
        }).then(function (value) {
            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');
            var store = transaction.objectStore(dbInfo.storeName);
            var req = store.put(value, key);

            // The reason we don't _save_ null is because IE 10 does
            // not support saving the `null` type in IndexedDB. How
            // ironic, given the bug below!
            // See: https://github.com/mozilla/localForage/issues/161
            if (value === null) {
                value = undefined;
            }

            transaction.oncomplete = function () {
                // Cast to undefined so the value passed to
                // callback/promise is the same as what one would get out
                // of `getItem()` later. This leads to some weirdness
                // (setItem('foo', undefined) will return `null`), but
                // it's not my fault localStorage is our baseline and that
                // it's weird.
                if (value === undefined) {
                    value = null;
                }

                resolve(value);
            };
            transaction.onabort = transaction.onerror = function () {
                var err = req.error ? req.error : req.transaction.error;
                reject(err);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function removeItem(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');
            var store = transaction.objectStore(dbInfo.storeName);

            // We use a Grunt task to make this safe for IE and some
            // versions of Android (including those used by Cordova).
            // Normally IE won't like `.delete()` and will insist on
            // using `['delete']()`, but we have a build step that
            // fixes this for us now.
            var req = store["delete"](key);
            transaction.oncomplete = function () {
                resolve();
            };

            transaction.onerror = function () {
                reject(req.error);
            };

            // The request will be also be aborted if we've exceeded our storage
            // space.
            transaction.onabort = function () {
                var err = req.error ? req.error : req.transaction.error;
                reject(err);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function clear(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');
            var store = transaction.objectStore(dbInfo.storeName);
            var req = store.clear();

            transaction.oncomplete = function () {
                resolve();
            };

            transaction.onabort = transaction.onerror = function () {
                var err = req.error ? req.error : req.transaction.error;
                reject(err);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function length(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);
            var req = store.count();

            req.onsuccess = function () {
                resolve(req.result);
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function key(n, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        if (n < 0) {
            resolve(null);

            return;
        }

        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);

            var advanced = false;
            var req = store.openCursor();
            req.onsuccess = function () {
                var cursor = req.result;
                if (!cursor) {
                    // this means there weren't enough keys
                    resolve(null);

                    return;
                }

                if (n === 0) {
                    // We have the first key, return it if that's what they
                    // wanted.
                    resolve(cursor.key);
                } else {
                    if (!advanced) {
                        // Otherwise, ask the cursor to skip ahead n
                        // records.
                        advanced = true;
                        cursor.advance(n);
                    } else {
                        // When we get here, we've got the nth key.
                        resolve(cursor.key);
                    }
                }
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function keys(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);

            var req = store.openCursor();
            var keys = [];

            req.onsuccess = function () {
                var cursor = req.result;

                if (!cursor) {
                    resolve(keys);
                    return;
                }

                keys.push(cursor.key);
                cursor["continue"]();
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

var asyncStorage = {
    _driver: 'asyncStorage',
    _initStorage: _initStorage,
    iterate: iterate,
    getItem: getItem,
    setItem: setItem,
    removeItem: removeItem,
    clear: clear,
    length: length,
    key: key,
    keys: keys
};

// Sadly, the best way to save binary data in WebSQL/localStorage is serializing
// it to Base64, so this is how we store it to prevent very strange errors with less
// verbose ways of binary <-> string data storage.
var BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

var BLOB_TYPE_PREFIX = '~~local_forage_type~';
var BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;

var SERIALIZED_MARKER = '__lfsc__:';
var SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;

// OMG the serializations!
var TYPE_ARRAYBUFFER = 'arbf';
var TYPE_BLOB = 'blob';
var TYPE_INT8ARRAY = 'si08';
var TYPE_UINT8ARRAY = 'ui08';
var TYPE_UINT8CLAMPEDARRAY = 'uic8';
var TYPE_INT16ARRAY = 'si16';
var TYPE_INT32ARRAY = 'si32';
var TYPE_UINT16ARRAY = 'ur16';
var TYPE_UINT32ARRAY = 'ui32';
var TYPE_FLOAT32ARRAY = 'fl32';
var TYPE_FLOAT64ARRAY = 'fl64';
var TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;

var toString$1 = Object.prototype.toString;

function stringToBuffer(serializedString) {
    // Fill the string into a ArrayBuffer.
    var bufferLength = serializedString.length * 0.75;
    var len = serializedString.length;
    var i;
    var p = 0;
    var encoded1, encoded2, encoded3, encoded4;

    if (serializedString[serializedString.length - 1] === '=') {
        bufferLength--;
        if (serializedString[serializedString.length - 2] === '=') {
            bufferLength--;
        }
    }

    var buffer = new ArrayBuffer(bufferLength);
    var bytes = new Uint8Array(buffer);

    for (i = 0; i < len; i += 4) {
        encoded1 = BASE_CHARS.indexOf(serializedString[i]);
        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);
        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);
        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);

        /*jslint bitwise: true */
        bytes[p++] = encoded1 << 2 | encoded2 >> 4;
        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;
        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
    }
    return buffer;
}

// Converts a buffer to a string to store, serialized, in the backend
// storage library.
function bufferToString(buffer) {
    // base64-arraybuffer
    var bytes = new Uint8Array(buffer);
    var base64String = '';
    var i;

    for (i = 0; i < bytes.length; i += 3) {
        /*jslint bitwise: true */
        base64String += BASE_CHARS[bytes[i] >> 2];
        base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];
        base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];
        base64String += BASE_CHARS[bytes[i + 2] & 63];
    }

    if (bytes.length % 3 === 2) {
        base64String = base64String.substring(0, base64String.length - 1) + '=';
    } else if (bytes.length % 3 === 1) {
        base64String = base64String.substring(0, base64String.length - 2) + '==';
    }

    return base64String;
}

// Serialize a value, afterwards executing a callback (which usually
// instructs the `setItem()` callback/promise to be executed). This is how
// we store binary data with localStorage.
function serialize(value, callback) {
    var valueType = '';
    if (value) {
        valueType = toString$1.call(value);
    }

    // Cannot use `value instanceof ArrayBuffer` or such here, as these
    // checks fail when running the tests using casper.js...
    //
    // TODO: See why those tests fail and use a better solution.
    if (value && (valueType === '[object ArrayBuffer]' || value.buffer && toString$1.call(value.buffer) === '[object ArrayBuffer]')) {
        // Convert binary arrays to a string and prefix the string with
        // a special marker.
        var buffer;
        var marker = SERIALIZED_MARKER;

        if (value instanceof ArrayBuffer) {
            buffer = value;
            marker += TYPE_ARRAYBUFFER;
        } else {
            buffer = value.buffer;

            if (valueType === '[object Int8Array]') {
                marker += TYPE_INT8ARRAY;
            } else if (valueType === '[object Uint8Array]') {
                marker += TYPE_UINT8ARRAY;
            } else if (valueType === '[object Uint8ClampedArray]') {
                marker += TYPE_UINT8CLAMPEDARRAY;
            } else if (valueType === '[object Int16Array]') {
                marker += TYPE_INT16ARRAY;
            } else if (valueType === '[object Uint16Array]') {
                marker += TYPE_UINT16ARRAY;
            } else if (valueType === '[object Int32Array]') {
                marker += TYPE_INT32ARRAY;
            } else if (valueType === '[object Uint32Array]') {
                marker += TYPE_UINT32ARRAY;
            } else if (valueType === '[object Float32Array]') {
                marker += TYPE_FLOAT32ARRAY;
            } else if (valueType === '[object Float64Array]') {
                marker += TYPE_FLOAT64ARRAY;
            } else {
                callback(new Error('Failed to get type for BinaryArray'));
            }
        }

        callback(marker + bufferToString(buffer));
    } else if (valueType === '[object Blob]') {
        // Conver the blob to a binaryArray and then to a string.
        var fileReader = new FileReader();

        fileReader.onload = function () {
            // Backwards-compatible prefix for the blob type.
            var str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);

            callback(SERIALIZED_MARKER + TYPE_BLOB + str);
        };

        fileReader.readAsArrayBuffer(value);
    } else {
        try {
            callback(JSON.stringify(value));
        } catch (e) {
            console.error("Couldn't convert value into a JSON string: ", value);

            callback(null, e);
        }
    }
}

// Deserialize data we've inserted into a value column/field. We place
// special markers into our strings to mark them as encoded; this isn't
// as nice as a meta field, but it's the only sane thing we can do whilst
// keeping localStorage support intact.
//
// Oftentimes this will just deserialize JSON content, but if we have a
// special marker (SERIALIZED_MARKER, defined above), we will extract
// some kind of arraybuffer/binary data/typed array out of the string.
function deserialize(value) {
    // If we haven't marked this string as being specially serialized (i.e.
    // something other than serialized JSON), we can just return it and be
    // done with it.
    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {
        return JSON.parse(value);
    }

    // The following code deals with deserializing some kind of Blob or
    // TypedArray. First we separate out the type of data we're dealing
    // with from the data itself.
    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);
    var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);

    var blobType;
    // Backwards-compatible blob type serialization strategy.
    // DBs created with older versions of localForage will simply not have the blob type.
    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {
        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);
        blobType = matcher[1];
        serializedString = serializedString.substring(matcher[0].length);
    }
    var buffer = stringToBuffer(serializedString);

    // Return the right type based on the code/type set during
    // serialization.
    switch (type) {
        case TYPE_ARRAYBUFFER:
            return buffer;
        case TYPE_BLOB:
            return createBlob([buffer], { type: blobType });
        case TYPE_INT8ARRAY:
            return new Int8Array(buffer);
        case TYPE_UINT8ARRAY:
            return new Uint8Array(buffer);
        case TYPE_UINT8CLAMPEDARRAY:
            return new Uint8ClampedArray(buffer);
        case TYPE_INT16ARRAY:
            return new Int16Array(buffer);
        case TYPE_UINT16ARRAY:
            return new Uint16Array(buffer);
        case TYPE_INT32ARRAY:
            return new Int32Array(buffer);
        case TYPE_UINT32ARRAY:
            return new Uint32Array(buffer);
        case TYPE_FLOAT32ARRAY:
            return new Float32Array(buffer);
        case TYPE_FLOAT64ARRAY:
            return new Float64Array(buffer);
        default:
            throw new Error('Unkown type: ' + type);
    }
}

var localforageSerializer = {
    serialize: serialize,
    deserialize: deserialize,
    stringToBuffer: stringToBuffer,
    bufferToString: bufferToString
};

/*
 * Includes code from:
 *
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
// Open the WebSQL database (automatically creates one if one didn't
// previously exist), using any options set in the config.
function _initStorage$1(options) {
    var self = this;
    var dbInfo = {
        db: null
    };

    if (options) {
        for (var i in options) {
            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];
        }
    }

    var dbInfoPromise = new Promise$1(function (resolve, reject) {
        // Open the database; the openDatabase API will automatically
        // create it for us if it doesn't exist.
        try {
            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);
        } catch (e) {
            return reject(e);
        }

        // Create our key/value table if it doesn't exist.
        dbInfo.db.transaction(function (t) {
            t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.storeName + ' (id INTEGER PRIMARY KEY, key unique, value)', [], function () {
                self._dbInfo = dbInfo;
                resolve();
            }, function (t, error) {
                reject(error);
            });
        });
    });

    dbInfo.serializer = localforageSerializer;
    return dbInfoPromise;
}

function getItem$1(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT * FROM ' + dbInfo.storeName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {
                    var result = results.rows.length ? results.rows.item(0).value : null;

                    // Check to see if this is serialized content we need to
                    // unpack.
                    if (result) {
                        result = dbInfo.serializer.deserialize(result);
                    }

                    resolve(result);
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function iterate$1(iterator, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;

            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT * FROM ' + dbInfo.storeName, [], function (t, results) {
                    var rows = results.rows;
                    var length = rows.length;

                    for (var i = 0; i < length; i++) {
                        var item = rows.item(i);
                        var result = item.value;

                        // Check to see if this is serialized content
                        // we need to unpack.
                        if (result) {
                            result = dbInfo.serializer.deserialize(result);
                        }

                        result = iterator(result, item.key, i + 1);

                        // void(0) prevents problems with redefinition
                        // of `undefined`.
                        if (result !== void 0) {
                            resolve(result);
                            return;
                        }
                    }

                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function _setItem(key, value, callback, retriesLeft) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            // The localStorage API doesn't return undefined values in an
            // "expected" way, so undefined is always cast to null in all
            // drivers. See: https://github.com/mozilla/localForage/pull/42
            if (value === undefined) {
                value = null;
            }

            // Save the original value to pass to the callback.
            var originalValue = value;

            var dbInfo = self._dbInfo;
            dbInfo.serializer.serialize(value, function (value, error) {
                if (error) {
                    reject(error);
                } else {
                    dbInfo.db.transaction(function (t) {
                        t.executeSql('INSERT OR REPLACE INTO ' + dbInfo.storeName + ' (key, value) VALUES (?, ?)', [key, value], function () {
                            resolve(originalValue);
                        }, function (t, error) {
                            reject(error);
                        });
                    }, function (sqlError) {
                        // The transaction failed; check
                        // to see if it's a quota error.
                        if (sqlError.code === sqlError.QUOTA_ERR) {
                            // We reject the callback outright for now, but
                            // it's worth trying to re-run the transaction.
                            // Even if the user accepts the prompt to use
                            // more storage on Safari, this error will
                            // be called.
                            //
                            // Try to re-run the transaction.
                            if (retriesLeft > 0) {
                                resolve(_setItem.apply(self, [key, originalValue, callback, retriesLeft - 1]));
                                return;
                            }
                            reject(sqlError);
                        }
                    });
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function setItem$1(key, value, callback) {
    return _setItem.apply(this, [key, value, callback, 1]);
}

function removeItem$1(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('DELETE FROM ' + dbInfo.storeName + ' WHERE key = ?', [key], function () {
                    resolve();
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Deletes every item in the table.
// TODO: Find out if this resets the AUTO_INCREMENT number.
function clear$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('DELETE FROM ' + dbInfo.storeName, [], function () {
                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Does a simple `COUNT(key)` to get the number of items stored in
// localForage.
function length$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                // Ahhh, SQL makes this one soooooo easy.
                t.executeSql('SELECT COUNT(key) as c FROM ' + dbInfo.storeName, [], function (t, results) {
                    var result = results.rows.item(0).c;

                    resolve(result);
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Return the key located at key index X; essentially gets the key from a
// `WHERE id = ?`. This is the most efficient way I can think to implement
// this rarely-used (in my experience) part of the API, but it can seem
// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so
// the ID of each key will change every time it's updated. Perhaps a stored
// procedure for the `setItem()` SQL would solve this problem?
// TODO: Don't change ID on `setItem()`.
function key$1(n, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT key FROM ' + dbInfo.storeName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {
                    var result = results.rows.length ? results.rows.item(0).key : null;
                    resolve(result);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function keys$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT key FROM ' + dbInfo.storeName, [], function (t, results) {
                    var keys = [];

                    for (var i = 0; i < results.rows.length; i++) {
                        keys.push(results.rows.item(i).key);
                    }

                    resolve(keys);
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

var webSQLStorage = {
    _driver: 'webSQLStorage',
    _initStorage: _initStorage$1,
    iterate: iterate$1,
    getItem: getItem$1,
    setItem: setItem$1,
    removeItem: removeItem$1,
    clear: clear$1,
    length: length$1,
    key: key$1,
    keys: keys$1
};

// Config the localStorage backend, using options set in the config.
function _initStorage$2(options) {
    var self = this;
    var dbInfo = {};
    if (options) {
        for (var i in options) {
            dbInfo[i] = options[i];
        }
    }

    dbInfo.keyPrefix = dbInfo.name + '/';

    if (dbInfo.storeName !== self._defaultConfig.storeName) {
        dbInfo.keyPrefix += dbInfo.storeName + '/';
    }

    self._dbInfo = dbInfo;
    dbInfo.serializer = localforageSerializer;

    return Promise$1.resolve();
}

// Remove all keys from the datastore, effectively destroying all data in
// the app's key/value store!
function clear$2(callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var keyPrefix = self._dbInfo.keyPrefix;

        for (var i = localStorage.length - 1; i >= 0; i--) {
            var key = localStorage.key(i);

            if (key.indexOf(keyPrefix) === 0) {
                localStorage.removeItem(key);
            }
        }
    });

    executeCallback(promise, callback);
    return promise;
}

// Retrieve an item from the store. Unlike the original async_storage
// library in Gaia, we don't modify return values at all. If a key's value
// is `undefined`, we pass that value to the callback function.
function getItem$2(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var result = localStorage.getItem(dbInfo.keyPrefix + key);

        // If a result was found, parse it from the serialized
        // string into a JS object. If result isn't truthy, the key
        // is likely undefined and we'll pass it straight to the
        // callback.
        if (result) {
            result = dbInfo.serializer.deserialize(result);
        }

        return result;
    });

    executeCallback(promise, callback);
    return promise;
}

// Iterate over all items in the store.
function iterate$2(iterator, callback) {
    var self = this;

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var keyPrefix = dbInfo.keyPrefix;
        var keyPrefixLength = keyPrefix.length;
        var length = localStorage.length;

        // We use a dedicated iterator instead of the `i` variable below
        // so other keys we fetch in localStorage aren't counted in
        // the `iterationNumber` argument passed to the `iterate()`
        // callback.
        //
        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530
        var iterationNumber = 1;

        for (var i = 0; i < length; i++) {
            var key = localStorage.key(i);
            if (key.indexOf(keyPrefix) !== 0) {
                continue;
            }
            var value = localStorage.getItem(key);

            // If a result was found, parse it from the serialized
            // string into a JS object. If result isn't truthy, the
            // key is likely undefined and we'll pass it straight
            // to the iterator.
            if (value) {
                value = dbInfo.serializer.deserialize(value);
            }

            value = iterator(value, key.substring(keyPrefixLength), iterationNumber++);

            if (value !== void 0) {
                return value;
            }
        }
    });

    executeCallback(promise, callback);
    return promise;
}

// Same as localStorage's key() method, except takes a callback.
function key$2(n, callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var result;
        try {
            result = localStorage.key(n);
        } catch (error) {
            result = null;
        }

        // Remove the prefix from the key, if a key is found.
        if (result) {
            result = result.substring(dbInfo.keyPrefix.length);
        }

        return result;
    });

    executeCallback(promise, callback);
    return promise;
}

function keys$2(callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var length = localStorage.length;
        var keys = [];

        for (var i = 0; i < length; i++) {
            if (localStorage.key(i).indexOf(dbInfo.keyPrefix) === 0) {
                keys.push(localStorage.key(i).substring(dbInfo.keyPrefix.length));
            }
        }

        return keys;
    });

    executeCallback(promise, callback);
    return promise;
}

// Supply the number of keys in the datastore to the callback function.
function length$2(callback) {
    var self = this;
    var promise = self.keys().then(function (keys) {
        return keys.length;
    });

    executeCallback(promise, callback);
    return promise;
}

// Remove an item from the store, nice and simple.
function removeItem$2(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        localStorage.removeItem(dbInfo.keyPrefix + key);
    });

    executeCallback(promise, callback);
    return promise;
}

// Set a key's value and run an optional callback once the value is set.
// Unlike Gaia's implementation, the callback function is passed the value,
// in case you want to operate on that value only after you're sure it
// saved, or something like that.
function setItem$2(key, value, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = self.ready().then(function () {
        // Convert undefined values to null.
        // https://github.com/mozilla/localForage/pull/42
        if (value === undefined) {
            value = null;
        }

        // Save the original value to pass to the callback.
        var originalValue = value;

        return new Promise$1(function (resolve, reject) {
            var dbInfo = self._dbInfo;
            dbInfo.serializer.serialize(value, function (value, error) {
                if (error) {
                    reject(error);
                } else {
                    try {
                        localStorage.setItem(dbInfo.keyPrefix + key, value);
                        resolve(originalValue);
                    } catch (e) {
                        // localStorage capacity exceeded.
                        // TODO: Make this a specific error/event.
                        if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {
                            reject(e);
                        }
                        reject(e);
                    }
                }
            });
        });
    });

    executeCallback(promise, callback);
    return promise;
}

var localStorageWrapper = {
    _driver: 'localStorageWrapper',
    _initStorage: _initStorage$2,
    // Default API, from Gaia/localStorage.
    iterate: iterate$2,
    getItem: getItem$2,
    setItem: setItem$2,
    removeItem: removeItem$2,
    clear: clear$2,
    length: length$2,
    key: key$2,
    keys: keys$2
};

// Custom drivers are stored here when `defineDriver()` is called.
// They are shared across all instances of localForage.
var CustomDrivers = {};

var DriverType = {
    INDEXEDDB: 'asyncStorage',
    LOCALSTORAGE: 'localStorageWrapper',
    WEBSQL: 'webSQLStorage'
};

var DefaultDriverOrder = [DriverType.INDEXEDDB, DriverType.WEBSQL, DriverType.LOCALSTORAGE];

var LibraryMethods = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'];

var DefaultConfig = {
    description: '',
    driver: DefaultDriverOrder.slice(),
    name: 'localforage',
    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size
    // we can use without a prompt.
    size: 4980736,
    storeName: 'keyvaluepairs',
    version: 1.0
};

var driverSupport = {};
// Check to see if IndexedDB is available and if it is the latest
// implementation; it's our preferred backend library. We use "_spec_test"
// as the name of the database because it's not the one we'll operate on,
// but it's useful to make sure its using the right spec.
// See: https://github.com/mozilla/localForage/issues/128
driverSupport[DriverType.INDEXEDDB] = isIndexedDBValid();

driverSupport[DriverType.WEBSQL] = isWebSQLValid();

driverSupport[DriverType.LOCALSTORAGE] = isLocalStorageValid();

var isArray = Array.isArray || function (arg) {
    return Object.prototype.toString.call(arg) === '[object Array]';
};

function callWhenReady(localForageInstance, libraryMethod) {
    localForageInstance[libraryMethod] = function () {
        var _args = arguments;
        return localForageInstance.ready().then(function () {
            return localForageInstance[libraryMethod].apply(localForageInstance, _args);
        });
    };
}

function extend() {
    for (var i = 1; i < arguments.length; i++) {
        var arg = arguments[i];

        if (arg) {
            for (var key in arg) {
                if (arg.hasOwnProperty(key)) {
                    if (isArray(arg[key])) {
                        arguments[0][key] = arg[key].slice();
                    } else {
                        arguments[0][key] = arg[key];
                    }
                }
            }
        }
    }

    return arguments[0];
}

function isLibraryDriver(driverName) {
    for (var driver in DriverType) {
        if (DriverType.hasOwnProperty(driver) && DriverType[driver] === driverName) {
            return true;
        }
    }

    return false;
}

var LocalForage = function () {
    function LocalForage(options) {
        _classCallCheck(this, LocalForage);

        this.INDEXEDDB = DriverType.INDEXEDDB;
        this.LOCALSTORAGE = DriverType.LOCALSTORAGE;
        this.WEBSQL = DriverType.WEBSQL;

        this._defaultConfig = extend({}, DefaultConfig);
        this._config = extend({}, this._defaultConfig, options);
        this._driverSet = null;
        this._initDriver = null;
        this._ready = false;
        this._dbInfo = null;

        this._wrapLibraryMethodsWithReady();
        this.setDriver(this._config.driver)["catch"](function () {});
    }

    // Set any config values for localForage; can be called anytime before
    // the first API call (e.g. `getItem`, `setItem`).
    // We loop through options so we don't overwrite existing config
    // values.


    LocalForage.prototype.config = function config(options) {
        // If the options argument is an object, we use it to set values.
        // Otherwise, we return either a specified config value or all
        // config values.
        if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {
            // If localforage is ready and fully initialized, we can't set
            // any new configuration values. Instead, we return an error.
            if (this._ready) {
                return new Error("Can't call config() after localforage " + 'has been used.');
            }

            for (var i in options) {
                if (i === 'storeName') {
                    options[i] = options[i].replace(/\W/g, '_');
                }

                if (i === 'version' && typeof options[i] !== 'number') {
                    return new Error('Database version must be a number.');
                }

                this._config[i] = options[i];
            }

            // after all config options are set and
            // the driver option is used, try setting it
            if ('driver' in options && options.driver) {
                return this.setDriver(this._config.driver);
            }

            return true;
        } else if (typeof options === 'string') {
            return this._config[options];
        } else {
            return this._config;
        }
    };

    // Used to define a custom driver, shared across all instances of
    // localForage.


    LocalForage.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {
        var promise = new Promise$1(function (resolve, reject) {
            try {
                var driverName = driverObject._driver;
                var complianceError = new Error('Custom driver not compliant; see ' + 'https://mozilla.github.io/localForage/#definedriver');
                var namingError = new Error('Custom driver name already in use: ' + driverObject._driver);

                // A driver name should be defined and not overlap with the
                // library-defined, default drivers.
                if (!driverObject._driver) {
                    reject(complianceError);
                    return;
                }
                if (isLibraryDriver(driverObject._driver)) {
                    reject(namingError);
                    return;
                }

                var customDriverMethods = LibraryMethods.concat('_initStorage');
                for (var i = 0; i < customDriverMethods.length; i++) {
                    var customDriverMethod = customDriverMethods[i];
                    if (!customDriverMethod || !driverObject[customDriverMethod] || typeof driverObject[customDriverMethod] !== 'function') {
                        reject(complianceError);
                        return;
                    }
                }

                var supportPromise = Promise$1.resolve(true);
                if ('_support' in driverObject) {
                    if (driverObject._support && typeof driverObject._support === 'function') {
                        supportPromise = driverObject._support();
                    } else {
                        supportPromise = Promise$1.resolve(!!driverObject._support);
                    }
                }

                supportPromise.then(function (supportResult) {
                    driverSupport[driverName] = supportResult;
                    CustomDrivers[driverName] = driverObject;
                    resolve();
                }, reject);
            } catch (e) {
                reject(e);
            }
        });

        executeTwoCallbacks(promise, callback, errorCallback);
        return promise;
    };

    LocalForage.prototype.driver = function driver() {
        return this._driver || null;
    };

    LocalForage.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {
        var self = this;
        var getDriverPromise = Promise$1.resolve().then(function () {
            if (isLibraryDriver(driverName)) {
                switch (driverName) {
                    case self.INDEXEDDB:
                        return asyncStorage;
                    case self.LOCALSTORAGE:
                        return localStorageWrapper;
                    case self.WEBSQL:
                        return webSQLStorage;
                }
            } else if (CustomDrivers[driverName]) {
                return CustomDrivers[driverName];
            } else {
                throw new Error('Driver not found.');
            }
        });
        executeTwoCallbacks(getDriverPromise, callback, errorCallback);
        return getDriverPromise;
    };

    LocalForage.prototype.getSerializer = function getSerializer(callback) {
        var serializerPromise = Promise$1.resolve(localforageSerializer);
        executeTwoCallbacks(serializerPromise, callback);
        return serializerPromise;
    };

    LocalForage.prototype.ready = function ready(callback) {
        var self = this;

        var promise = self._driverSet.then(function () {
            if (self._ready === null) {
                self._ready = self._initDriver();
            }

            return self._ready;
        });

        executeTwoCallbacks(promise, callback, callback);
        return promise;
    };

    LocalForage.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {
        var self = this;

        if (!isArray(drivers)) {
            drivers = [drivers];
        }

        var supportedDrivers = this._getSupportedDrivers(drivers);

        function setDriverToConfig() {
            self._config.driver = self.driver();
        }

        function extendSelfWithDriver(driver) {
            self._extend(driver);
            setDriverToConfig();

            self._ready = self._initStorage(self._config);
            return self._ready;
        }

        function initDriver(supportedDrivers) {
            return function () {
                var currentDriverIndex = 0;

                function driverPromiseLoop() {
                    while (currentDriverIndex < supportedDrivers.length) {
                        var driverName = supportedDrivers[currentDriverIndex];
                        currentDriverIndex++;

                        self._dbInfo = null;
                        self._ready = null;

                        return self.getDriver(driverName).then(extendSelfWithDriver)["catch"](driverPromiseLoop);
                    }

                    setDriverToConfig();
                    var error = new Error('No available storage method found.');
                    self._driverSet = Promise$1.reject(error);
                    return self._driverSet;
                }

                return driverPromiseLoop();
            };
        }

        // There might be a driver initialization in progress
        // so wait for it to finish in order to avoid a possible
        // race condition to set _dbInfo
        var oldDriverSetDone = this._driverSet !== null ? this._driverSet["catch"](function () {
            return Promise$1.resolve();
        }) : Promise$1.resolve();

        this._driverSet = oldDriverSetDone.then(function () {
            var driverName = supportedDrivers[0];
            self._dbInfo = null;
            self._ready = null;

            return self.getDriver(driverName).then(function (driver) {
                self._driver = driver._driver;
                setDriverToConfig();
                self._wrapLibraryMethodsWithReady();
                self._initDriver = initDriver(supportedDrivers);
            });
        })["catch"](function () {
            setDriverToConfig();
            var error = new Error('No available storage method found.');
            self._driverSet = Promise$1.reject(error);
            return self._driverSet;
        });

        executeTwoCallbacks(this._driverSet, callback, errorCallback);
        return this._driverSet;
    };

    LocalForage.prototype.supports = function supports(driverName) {
        return !!driverSupport[driverName];
    };

    LocalForage.prototype._extend = function _extend(libraryMethodsAndProperties) {
        extend(this, libraryMethodsAndProperties);
    };

    LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {
        var supportedDrivers = [];
        for (var i = 0, len = drivers.length; i < len; i++) {
            var driverName = drivers[i];
            if (this.supports(driverName)) {
                supportedDrivers.push(driverName);
            }
        }
        return supportedDrivers;
    };

    LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {
        // Add a stub for each driver API method that delays the call to the
        // corresponding driver method until localForage is ready. These stubs
        // will be replaced by the driver methods as soon as the driver is
        // loaded, so there is no performance impact.
        for (var i = 0; i < LibraryMethods.length; i++) {
            callWhenReady(this, LibraryMethods[i]);
        }
    };

    LocalForage.prototype.createInstance = function createInstance(options) {
        return new LocalForage(options);
    };

    return LocalForage;
}();

// The actual localForage object that we expose as a module or via a
// global. It's extended by pulling in one of our other libraries.


var localforage_js = new LocalForage();

module.exports = localforage_js;

},{"3":3}]},{},[4])(4)
});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],28:[function(require,module,exports){



/**
 * UTM zones are grouped, and assigned to one of a group of 6
 * sets.
 *
 * {int} @private
 */
var NUM_100K_SETS = 6;

/**
 * The column letters (for easting) of the lower left value, per
 * set.
 *
 * {string} @private
 */
var SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';

/**
 * The row letters (for northing) of the lower left value, per
 * set.
 *
 * {string} @private
 */
var SET_ORIGIN_ROW_LETTERS = 'AFAFAF';

var A = 65; // A
var I = 73; // I
var O = 79; // O
var V = 86; // V
var Z = 90; // Z

/**
 * Conversion of lat/lon to MGRS.
 *
 * @param {object} ll Object literal with lat and lon properties on a
 *     WGS84 ellipsoid.
 * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for
 *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.
 * @return {string} the MGRS string for the given location and accuracy.
 */
exports.forward = function(ll, accuracy) {
  accuracy = accuracy || 5; // default accuracy 1m
  return encode(LLtoUTM({
    lat: ll[1],
    lon: ll[0]
  }), accuracy);
};

/**
 * Conversion of MGRS to lat/lon.
 *
 * @param {string} mgrs MGRS string.
 * @return {array} An array with left (longitude), bottom (latitude), right
 *     (longitude) and top (latitude) values in WGS84, representing the
 *     bounding box for the provided MGRS reference.
 */
exports.inverse = function(mgrs) {
  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));
  if (bbox.lat && bbox.lon) {
    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];
  }
  return [bbox.left, bbox.bottom, bbox.right, bbox.top];
};

exports.toPoint = function(mgrs) {
  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));
  if (bbox.lat && bbox.lon) {
    return [bbox.lon, bbox.lat];
  }
  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];
};
/**
 * Conversion from degrees to radians.
 *
 * @private
 * @param {number} deg the angle in degrees.
 * @return {number} the angle in radians.
 */
function degToRad(deg) {
  return (deg * (Math.PI / 180.0));
}

/**
 * Conversion from radians to degrees.
 *
 * @private
 * @param {number} rad the angle in radians.
 * @return {number} the angle in degrees.
 */
function radToDeg(rad) {
  return (180.0 * (rad / Math.PI));
}

/**
 * Converts a set of Longitude and Latitude co-ordinates to UTM
 * using the WGS84 ellipsoid.
 *
 * @private
 * @param {object} ll Object literal with lat and lon properties
 *     representing the WGS84 coordinate to be converted.
 * @return {object} Object literal containing the UTM value with easting,
 *     northing, zoneNumber and zoneLetter properties, and an optional
 *     accuracy property in digits. Returns null if the conversion failed.
 */
function LLtoUTM(ll) {
  var Lat = ll.lat;
  var Long = ll.lon;
  var a = 6378137.0; //ellip.radius;
  var eccSquared = 0.00669438; //ellip.eccsq;
  var k0 = 0.9996;
  var LongOrigin;
  var eccPrimeSquared;
  var N, T, C, A, M;
  var LatRad = degToRad(Lat);
  var LongRad = degToRad(Long);
  var LongOriginRad;
  var ZoneNumber;
  // (int)
  ZoneNumber = Math.floor((Long + 180) / 6) + 1;

  //Make sure the longitude 180.00 is in Zone 60
  if (Long === 180) {
    ZoneNumber = 60;
  }

  // Special zone for Norway
  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {
    ZoneNumber = 32;
  }

  // Special zones for Svalbard
  if (Lat >= 72.0 && Lat < 84.0) {
    if (Long >= 0.0 && Long < 9.0) {
      ZoneNumber = 31;
    }
    else if (Long >= 9.0 && Long < 21.0) {
      ZoneNumber = 33;
    }
    else if (Long >= 21.0 && Long < 33.0) {
      ZoneNumber = 35;
    }
    else if (Long >= 33.0 && Long < 42.0) {
      ZoneNumber = 37;
    }
  }

  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin
  // in middle of
  // zone
  LongOriginRad = degToRad(LongOrigin);

  eccPrimeSquared = (eccSquared) / (1 - eccSquared);

  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));
  T = Math.tan(LatRad) * Math.tan(LatRad);
  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);
  A = Math.cos(LatRad) * (LongRad - LongOriginRad);

  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));

  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);

  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));
  if (Lat < 0.0) {
    UTMNorthing += 10000000.0; //10000000 meter offset for
    // southern hemisphere
  }

  return {
    northing: Math.round(UTMNorthing),
    easting: Math.round(UTMEasting),
    zoneNumber: ZoneNumber,
    zoneLetter: getLetterDesignator(Lat)
  };
}

/**
 * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience
 * class where the Zone can be specified as a single string eg."60N" which
 * is then broken down into the ZoneNumber and ZoneLetter.
 *
 * @private
 * @param {object} utm An object literal with northing, easting, zoneNumber
 *     and zoneLetter properties. If an optional accuracy property is
 *     provided (in meters), a bounding box will be returned instead of
 *     latitude and longitude.
 * @return {object} An object literal containing either lat and lon values
 *     (if no accuracy was provided), or top, right, bottom and left values
 *     for the bounding box calculated according to the provided accuracy.
 *     Returns null if the conversion failed.
 */
function UTMtoLL(utm) {

  var UTMNorthing = utm.northing;
  var UTMEasting = utm.easting;
  var zoneLetter = utm.zoneLetter;
  var zoneNumber = utm.zoneNumber;
  // check the ZoneNummber is valid
  if (zoneNumber < 0 || zoneNumber > 60) {
    return null;
  }

  var k0 = 0.9996;
  var a = 6378137.0; //ellip.radius;
  var eccSquared = 0.00669438; //ellip.eccsq;
  var eccPrimeSquared;
  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));
  var N1, T1, C1, R1, D, M;
  var LongOrigin;
  var mu, phi1Rad;

  // remove 500,000 meter offset for longitude
  var x = UTMEasting - 500000.0;
  var y = UTMNorthing;

  // We must know somehow if we are in the Northern or Southern
  // hemisphere, this is the only time we use the letter So even
  // if the Zone letter isn't exactly correct it should indicate
  // the hemisphere correctly
  if (zoneLetter < 'N') {
    y -= 10000000.0; // remove 10,000,000 meter offset used
    // for southern hemisphere
  }

  // There are 60 zones with zone 1 being at West -180 to -174
  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin
  // in middle of
  // zone

  eccPrimeSquared = (eccSquared) / (1 - eccSquared);

  M = y / k0;
  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));

  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);
  // double phi1 = ProjMath.radToDeg(phi1Rad);

  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));
  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);
  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);
  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);
  D = x / (N1 * k0);

  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);
  lat = radToDeg(lat);

  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);
  lon = LongOrigin + radToDeg(lon);

  var result;
  if (utm.accuracy) {
    var topRight = UTMtoLL({
      northing: utm.northing + utm.accuracy,
      easting: utm.easting + utm.accuracy,
      zoneLetter: utm.zoneLetter,
      zoneNumber: utm.zoneNumber
    });
    result = {
      top: topRight.lat,
      right: topRight.lon,
      bottom: lat,
      left: lon
    };
  }
  else {
    result = {
      lat: lat,
      lon: lon
    };
  }
  return result;
}

/**
 * Calculates the MGRS letter designator for the given latitude.
 *
 * @private
 * @param {number} lat The latitude in WGS84 to get the letter designator
 *     for.
 * @return {char} The letter designator.
 */
function getLetterDesignator(lat) {
  //This is here as an error flag to show that the Latitude is
  //outside MGRS limits
  var LetterDesignator = 'Z';

  if ((84 >= lat) && (lat >= 72)) {
    LetterDesignator = 'X';
  }
  else if ((72 > lat) && (lat >= 64)) {
    LetterDesignator = 'W';
  }
  else if ((64 > lat) && (lat >= 56)) {
    LetterDesignator = 'V';
  }
  else if ((56 > lat) && (lat >= 48)) {
    LetterDesignator = 'U';
  }
  else if ((48 > lat) && (lat >= 40)) {
    LetterDesignator = 'T';
  }
  else if ((40 > lat) && (lat >= 32)) {
    LetterDesignator = 'S';
  }
  else if ((32 > lat) && (lat >= 24)) {
    LetterDesignator = 'R';
  }
  else if ((24 > lat) && (lat >= 16)) {
    LetterDesignator = 'Q';
  }
  else if ((16 > lat) && (lat >= 8)) {
    LetterDesignator = 'P';
  }
  else if ((8 > lat) && (lat >= 0)) {
    LetterDesignator = 'N';
  }
  else if ((0 > lat) && (lat >= -8)) {
    LetterDesignator = 'M';
  }
  else if ((-8 > lat) && (lat >= -16)) {
    LetterDesignator = 'L';
  }
  else if ((-16 > lat) && (lat >= -24)) {
    LetterDesignator = 'K';
  }
  else if ((-24 > lat) && (lat >= -32)) {
    LetterDesignator = 'J';
  }
  else if ((-32 > lat) && (lat >= -40)) {
    LetterDesignator = 'H';
  }
  else if ((-40 > lat) && (lat >= -48)) {
    LetterDesignator = 'G';
  }
  else if ((-48 > lat) && (lat >= -56)) {
    LetterDesignator = 'F';
  }
  else if ((-56 > lat) && (lat >= -64)) {
    LetterDesignator = 'E';
  }
  else if ((-64 > lat) && (lat >= -72)) {
    LetterDesignator = 'D';
  }
  else if ((-72 > lat) && (lat >= -80)) {
    LetterDesignator = 'C';
  }
  return LetterDesignator;
}

/**
 * Encodes a UTM location as MGRS string.
 *
 * @private
 * @param {object} utm An object literal with easting, northing,
 *     zoneLetter, zoneNumber
 * @param {number} accuracy Accuracy in digits (1-5).
 * @return {string} MGRS string for the given UTM location.
 */
function encode(utm, accuracy) {
  // prepend with leading zeroes
  var seasting = "00000" + utm.easting,
    snorthing = "00000" + utm.northing;

  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);
}

/**
 * Get the two letter 100k designator for a given UTM easting,
 * northing and zone number value.
 *
 * @private
 * @param {number} easting
 * @param {number} northing
 * @param {number} zoneNumber
 * @return the two letter 100k designator for the given UTM location.
 */
function get100kID(easting, northing, zoneNumber) {
  var setParm = get100kSetForZone(zoneNumber);
  var setColumn = Math.floor(easting / 100000);
  var setRow = Math.floor(northing / 100000) % 20;
  return getLetter100kID(setColumn, setRow, setParm);
}

/**
 * Given a UTM zone number, figure out the MGRS 100K set it is in.
 *
 * @private
 * @param {number} i An UTM zone number.
 * @return {number} the 100k set the UTM zone is in.
 */
function get100kSetForZone(i) {
  var setParm = i % NUM_100K_SETS;
  if (setParm === 0) {
    setParm = NUM_100K_SETS;
  }

  return setParm;
}

/**
 * Get the two-letter MGRS 100k designator given information
 * translated from the UTM northing, easting and zone number.
 *
 * @private
 * @param {number} column the column index as it relates to the MGRS
 *        100k set spreadsheet, created from the UTM easting.
 *        Values are 1-8.
 * @param {number} row the row index as it relates to the MGRS 100k set
 *        spreadsheet, created from the UTM northing value. Values
 *        are from 0-19.
 * @param {number} parm the set block, as it relates to the MGRS 100k set
 *        spreadsheet, created from the UTM zone. Values are from
 *        1-60.
 * @return two letter MGRS 100k code.
 */
function getLetter100kID(column, row, parm) {
  // colOrigin and rowOrigin are the letters at the origin of the set
  var index = parm - 1;
  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);
  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);

  // colInt and rowInt are the letters to build to return
  var colInt = colOrigin + column - 1;
  var rowInt = rowOrigin + row;
  var rollover = false;

  if (colInt > Z) {
    colInt = colInt - Z + A - 1;
    rollover = true;
  }

  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {
    colInt++;
  }

  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {
    colInt++;

    if (colInt === I) {
      colInt++;
    }
  }

  if (colInt > Z) {
    colInt = colInt - Z + A - 1;
  }

  if (rowInt > V) {
    rowInt = rowInt - V + A - 1;
    rollover = true;
  }
  else {
    rollover = false;
  }

  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {
    rowInt++;
  }

  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {
    rowInt++;

    if (rowInt === I) {
      rowInt++;
    }
  }

  if (rowInt > V) {
    rowInt = rowInt - V + A - 1;
  }

  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);
  return twoLetter;
}

/**
 * Decode the UTM parameters from a MGRS string.
 *
 * @private
 * @param {string} mgrsString an UPPERCASE coordinate string is expected.
 * @return {object} An object literal with easting, northing, zoneLetter,
 *     zoneNumber and accuracy (in meters) properties.
 */
function decode(mgrsString) {

  if (mgrsString && mgrsString.length === 0) {
    throw ("MGRSPoint coverting from nothing");
  }

  var length = mgrsString.length;

  var hunK = null;
  var sb = "";
  var testChar;
  var i = 0;

  // get Zone number
  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {
    if (i >= 2) {
      throw ("MGRSPoint bad conversion from: " + mgrsString);
    }
    sb += testChar;
    i++;
  }

  var zoneNumber = parseInt(sb, 10);

  if (i === 0 || i + 3 > length) {
    // A good MGRS string has to be 4-5 digits long,
    // ##AAA/#AAA at least.
    throw ("MGRSPoint bad conversion from: " + mgrsString);
  }

  var zoneLetter = mgrsString.charAt(i++);

  // Should we check the zone letter here? Why not.
  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {
    throw ("MGRSPoint zone letter " + zoneLetter + " not handled: " + mgrsString);
  }

  hunK = mgrsString.substring(i, i += 2);

  var set = get100kSetForZone(zoneNumber);

  var east100k = getEastingFromChar(hunK.charAt(0), set);
  var north100k = getNorthingFromChar(hunK.charAt(1), set);

  // We have a bug where the northing may be 2000000 too low.
  // How
  // do we know when to roll over?

  while (north100k < getMinNorthing(zoneLetter)) {
    north100k += 2000000;
  }

  // calculate the char index for easting/northing separator
  var remainder = length - i;

  if (remainder % 2 !== 0) {
    throw ("MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters" + mgrsString);
  }

  var sep = remainder / 2;

  var sepEasting = 0.0;
  var sepNorthing = 0.0;
  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;
  if (sep > 0) {
    accuracyBonus = 100000.0 / Math.pow(10, sep);
    sepEastingString = mgrsString.substring(i, i + sep);
    sepEasting = parseFloat(sepEastingString) * accuracyBonus;
    sepNorthingString = mgrsString.substring(i + sep);
    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;
  }

  easting = sepEasting + east100k;
  northing = sepNorthing + north100k;

  return {
    easting: easting,
    northing: northing,
    zoneLetter: zoneLetter,
    zoneNumber: zoneNumber,
    accuracy: accuracyBonus
  };
}

/**
 * Given the first letter from a two-letter MGRS 100k zone, and given the
 * MGRS table set for the zone number, figure out the easting value that
 * should be added to the other, secondary easting value.
 *
 * @private
 * @param {char} e The first letter from a two-letter MGRS 100´k zone.
 * @param {number} set The MGRS table set for the zone number.
 * @return {number} The easting value for the given letter and set.
 */
function getEastingFromChar(e, set) {
  // colOrigin is the letter at the origin of the set for the
  // column
  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);
  var eastingValue = 100000.0;
  var rewindMarker = false;

  while (curCol !== e.charCodeAt(0)) {
    curCol++;
    if (curCol === I) {
      curCol++;
    }
    if (curCol === O) {
      curCol++;
    }
    if (curCol > Z) {
      if (rewindMarker) {
        throw ("Bad character: " + e);
      }
      curCol = A;
      rewindMarker = true;
    }
    eastingValue += 100000.0;
  }

  return eastingValue;
}

/**
 * Given the second letter from a two-letter MGRS 100k zone, and given the
 * MGRS table set for the zone number, figure out the northing value that
 * should be added to the other, secondary northing value. You have to
 * remember that Northings are determined from the equator, and the vertical
 * cycle of letters mean a 2000000 additional northing meters. This happens
 * approx. every 18 degrees of latitude. This method does *NOT* count any
 * additional northings. You have to figure out how many 2000000 meters need
 * to be added for the zone letter of the MGRS coordinate.
 *
 * @private
 * @param {char} n Second letter of the MGRS 100k zone
 * @param {number} set The MGRS table set number, which is dependent on the
 *     UTM zone number.
 * @return {number} The northing value for the given letter and set.
 */
function getNorthingFromChar(n, set) {

  if (n > 'V') {
    throw ("MGRSPoint given invalid Northing " + n);
  }

  // rowOrigin is the letter at the origin of the set for the
  // column
  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);
  var northingValue = 0.0;
  var rewindMarker = false;

  while (curRow !== n.charCodeAt(0)) {
    curRow++;
    if (curRow === I) {
      curRow++;
    }
    if (curRow === O) {
      curRow++;
    }
    // fixing a bug making whole application hang in this loop
    // when 'n' is a wrong character
    if (curRow > V) {
      if (rewindMarker) { // making sure that this loop ends
        throw ("Bad character: " + n);
      }
      curRow = A;
      rewindMarker = true;
    }
    northingValue += 100000.0;
  }

  return northingValue;
}

/**
 * The function getMinNorthing returns the minimum northing value of a MGRS
 * zone.
 *
 * Ported from Geotrans' c Lattitude_Band_Value structure table.
 *
 * @private
 * @param {char} zoneLetter The MGRS zone to get the min northing for.
 * @return {number}
 */
function getMinNorthing(zoneLetter) {
  var northing;
  switch (zoneLetter) {
  case 'C':
    northing = 1100000.0;
    break;
  case 'D':
    northing = 2000000.0;
    break;
  case 'E':
    northing = 2800000.0;
    break;
  case 'F':
    northing = 3700000.0;
    break;
  case 'G':
    northing = 4600000.0;
    break;
  case 'H':
    northing = 5500000.0;
    break;
  case 'J':
    northing = 6400000.0;
    break;
  case 'K':
    northing = 7300000.0;
    break;
  case 'L':
    northing = 8200000.0;
    break;
  case 'M':
    northing = 9100000.0;
    break;
  case 'N':
    northing = 0.0;
    break;
  case 'P':
    northing = 800000.0;
    break;
  case 'Q':
    northing = 1700000.0;
    break;
  case 'R':
    northing = 2600000.0;
    break;
  case 'S':
    northing = 3500000.0;
    break;
  case 'T':
    northing = 4400000.0;
    break;
  case 'U':
    northing = 5300000.0;
    break;
  case 'V':
    northing = 6200000.0;
    break;
  case 'W':
    northing = 7000000.0;
    break;
  case 'X':
    northing = 7900000.0;
    break;
  default:
    northing = -1.0;
  }
  if (northing >= 0.0) {
    return northing;
  }
  else {
    throw ("Invalid zone letter: " + zoneLetter);
  }

}

},{}],29:[function(require,module,exports){
(function (global){
// OpenLayers. See https://openlayers.org/
// License: https://raw.githubusercontent.com/openlayers/openlayers/master/LICENSE.md
;(function (root, factory) {
  if (typeof exports === "object") {
    module.exports = factory();
  } else if (typeof define === "function" && define.amd) {
    define([], factory);
  } else {
    root.ol = factory();
  }
}(this, function () {
  var OPENLAYERS = {};
  var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function ca(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}
ca("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){a=Number(a);return(b(a)+b(-a))/2}});function da(){da=function(){};ba.Symbol||(ba.Symbol=ea)}var ea=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();function fa(){da();var a=ba.Symbol.iterator;a||(a=ba.Symbol.iterator=ba.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&aa(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ha(this)}});fa=function(){}}
function ha(a){var b=0;return ia(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function ia(a){fa();a={next:a};a[ba.Symbol.iterator]=function(){return this};return a}function ja(a,b){fa();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}
ca("Array.prototype.keys",function(a){return a?a:function(){return ja(this,function(a){return a})}});ca("Array.prototype.values",function(a){return a?a:function(){return ja(this,function(a,c){return c})}});ca("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});var ka=this;
function r(a,b){var c=OPENLAYERS;a=a.split(".");c=c||ka;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};function v(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function la(){}function w(a){return a.si||(a.si=++ma)}var ma=0;function na(a){this.message="Assertion failed. See https://openlayers.org/en/latest/doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}v(na,Error);function oa(a,b,c,d){this.T=a;this.W=b;this.R=c;this.U=d}function pa(a,b,c,d,e){return void 0!==e?(e.T=a,e.W=b,e.R=c,e.U=d,e):new oa(a,b,c,d)}function qa(a,b,c){return a.T<=b&&b<=a.W&&a.R<=c&&c<=a.U};function x(a,b){if(!a)throw new na(b);};function ra(a,b,c){return Math.min(Math.max(a,b),c)}var sa=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();function ta(a,b,c,d){a=c-a;b=d-b;return a*a+b*b}function ua(a){return a*Math.PI/180}function va(a,b){a%=b;return 0>a*b?a+b:a}function wa(a,b,c){return a+c*(b-a)};function xa(a,b,c){void 0===c&&(c=[0,0]);c[0]=a[0]+2*b;c[1]=a[1]+2*b;return c}function ya(a,b,c){void 0===c&&(c=[0,0]);c[0]=a[0]*b+.5|0;c[1]=a[1]*b+.5|0;return c}function za(a,b){if(Array.isArray(a))return a;void 0===b?b=[a,a]:b[0]=b[1]=a;return b};function Aa(a){for(var b=Ba(),c=0,d=a.length;c<d;++c)Da(b,a[c]);return b}function Ea(a,b,c){return c?(c[0]=a[0]-b,c[1]=a[1]-b,c[2]=a[2]+b,c[3]=a[3]+b,c):[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}function Fa(a,b){return b?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):a.slice()}function Ga(a,b,c){b=b<a[0]?a[0]-b:a[2]<b?b-a[2]:0;a=c<a[1]?a[1]-c:a[3]<c?c-a[3]:0;return b*b+a*a}function Ha(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]}function Ia(a,b,c){return a[0]<=b&&b<=a[2]&&a[1]<=c&&c<=a[3]}
function Ba(){return[Infinity,Infinity,-Infinity,-Infinity]}function Ja(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function Ka(a){return Ja(Infinity,Infinity,-Infinity,-Infinity,a)}function La(a,b){var c=a[0];a=a[1];return Ja(c,a,c,a,b)}function Na(a,b,c,d,e){for(e=Ka(e);b<c;b+=d){var f=e,g=a[b],h=a[b+1];f[0]=Math.min(f[0],g);f[1]=Math.min(f[1],h);f[2]=Math.max(f[2],g);f[3]=Math.max(f[3],h)}return e}function Oa(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]}
function Pa(a,b){b[0]<a[0]&&(a[0]=b[0]);b[2]>a[2]&&(a[2]=b[2]);b[1]<a[1]&&(a[1]=b[1]);b[3]>a[3]&&(a[3]=b[3])}function Da(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])}function Qa(a){return[a[0],a[1]]}function Ra(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}
function Sa(a,b,c,d,e){var f=b*d[0]/2;d=b*d[1]/2;b=Math.cos(c);var g=Math.sin(c);c=f*b;f*=g;b*=d;var h=d*g,k=a[0],m=a[1];a=k-c+h;d=k-c-h;g=k+c-h;c=k+c+h;h=m-f-b;k=m-f+b;var n=m+f+b;f=m+f-b;return Ja(Math.min(a,d,g,c),Math.min(h,k,n,f),Math.max(a,d,g,c),Math.max(h,k,n,f),e)}function Ta(a){return a[3]-a[1]}function Ua(a,b){var c=Ba();Va(a,b)&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]);return c}function Wa(a){return[a[0],a[3]]}
function Xa(a){return a[2]-a[0]}function Va(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]}function Ya(a){return a[2]<a[0]||a[3]<a[1]};var Za="function"===typeof Object.assign?Object.assign:function(a,b){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;d<e;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c};function bb(a){for(var b in a)delete a[b]}function cb(a){var b=[],c;for(c in a)b.push(a[c]);return b}function db(a){for(var b in a)return!1;return!b};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function eb(a){this.radius=a}eb.prototype.offset=function(a,b,c){var d=ua(a[1]);b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(ua(a[0])+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};
function fb(a,b){var c=b||{},d=c.radius||6371008.8;c=c.projection||"EPSG:3857";a=a.clone().xb(c,"EPSG:4326");var e=a.D();c=0;var f;switch(e){case "Point":case "MultiPoint":break;case "LineString":case "LinearRing":b=a.G();c=gb(b,d);break;case "MultiLineString":case "Polygon":b=a.G();a=0;for(e=b.length;a<e;++a)c+=gb(b[a],d);break;case "MultiPolygon":b=a.G();a=0;for(e=b.length;a<e;++a){var g=b[a];var h=0;for(f=g.length;h<f;++h)c+=gb(g[h],d)}break;case "GeometryCollection":d=hb(a.a);a=0;for(e=d.length;a<
e;++a)c+=fb(d[a],b);break;default:throw Error("Unsupported geometry type: "+e);}return c}function gb(a,b){for(var c=0,d=0,e=a.length;d<e-1;++d)c+=ib(a[d],a[d+1],b);return c}function ib(a,b,c){var d=ua(a[1]),e=ua(b[1]),f=(e-d)/2;a=ua(b[0]-a[0])/2;d=Math.sin(f)*Math.sin(f)+Math.sin(a)*Math.sin(a)*Math.cos(d)*Math.cos(e);return 2*c*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))}
function jb(a,b){var c=b||{},d=c.radius||6371008.8;c=c.projection||"EPSG:3857";a=a.clone().xb(c,"EPSG:4326");var e=a.D();c=0;var f;switch(e){case "Point":case "MultiPoint":case "LineString":case "MultiLineString":case "LinearRing":break;case "Polygon":b=a.G();c=Math.abs(kb(b[0],d));a=1;for(e=b.length;a<e;++a)c-=Math.abs(kb(b[a],d));break;case "MultiPolygon":b=a.G();a=0;for(e=b.length;a<e;++a){var g=b[a];c+=Math.abs(kb(g[0],d));var h=1;for(f=g.length;h<f;++h)c-=Math.abs(kb(g[h],d))}break;case "GeometryCollection":d=
hb(a.a);a=0;for(e=d.length;a<e;++a)c+=jb(d[a],b);break;default:throw Error("Unsupported geometry type: "+e);}return c}function kb(a,b){for(var c=0,d=a.length,e=a[d-1][0],f=a[d-1][1],g=0;g<d;g++){var h=a[g][0],k=a[g][1];c+=ua(h-e)*(2+Math.sin(ua(f))+Math.sin(ua(k)));e=h;f=k}return c*b*b/2};var lb={};lb.degrees=12741994*Math.PI/360;lb.ft=.3048;lb.m=1;lb["us-ft"]=1200/3937;function mb(a){this.La=a.code;this.c=a.units;this.g=void 0!==a.extent?a.extent:null;this.Bd=void 0!==a.worldExtent?a.worldExtent:null;this.a=void 0!==a.axisOrientation?a.axisOrientation:"enu";this.b=void 0!==a.global?a.global:!1;this.j=!(!this.b||!this.g);this.i=a.getPointResolution;this.f=null;this.v=a.metersPerUnit;var b=a.code,c=window.proj4;"function"==typeof c&&(b=c.defs(b),void 0!==b&&(void 0!==b.axis&&void 0===a.axisOrientation&&(this.a=b.axis),void 0===a.metersPerUnit&&(this.v=b.to_meter),
void 0===a.units&&(this.c=b.units)))}mb.prototype.I=function(){return this.g};mb.prototype.l=function(){return this.v||lb[this.c]};function nb(a){mb.call(this,{code:a,units:"m",extent:ob,global:!0,worldExtent:pb,getPointResolution:function(a,c){return a/sa(c[1]/6378137)}})}v(nb,mb);var qb=6378137*Math.PI,ob=[-qb,-qb,qb,qb],pb=[-180,-85,180,85],rb=[new nb("EPSG:3857"),new nb("EPSG:102100"),new nb("EPSG:102113"),new nb("EPSG:900913"),new nb("urn:ogc:def:crs:EPSG:6.18:3:3857"),new nb("urn:ogc:def:crs:EPSG::3857"),new nb("http://www.opengis.net/gml/srs/epsg.xml#3857")];
function sb(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c){b[e]=qb*a[e]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));f>qb?f=qb:f<-qb&&(f=-qb);b[e+1]=f}return b}function tb(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/qb,b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b};function ub(a,b){mb.call(this,{code:a,units:"degrees",extent:vb,axisOrientation:b,global:!0,metersPerUnit:wb,worldExtent:vb})}v(ub,mb);var vb=[-180,-90,180,90],wb=6378137*Math.PI/180,xb=[new ub("CRS:84"),new ub("EPSG:4326","neu"),new ub("urn:ogc:def:crs:EPSG::4326","neu"),new ub("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new ub("urn:ogc:def:crs:OGC:1.3:CRS84"),new ub("urn:ogc:def:crs:OGC:2:84"),new ub("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ub("urn:x-ogc:def:crs:EPSG:4326","neu")];var yb={};var zb={};function Ab(a,b,c){a=a.La;b=b.La;a in zb||(zb[a]={});zb[a][b]=c}function Bb(a,b){var c;a in zb&&b in zb[a]&&(c=zb[a][b]);return c};var Cb=new eb(6371008.8);function Db(a,b,c,d){a=Fb(a);var e=a.i;e?b=e(b,c):"degrees"==a.c&&!d||"degrees"==d||(e=Gb(a,Fb("EPSG:4326")),b=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],b=e(b,b,2),b=(ib(b.slice(0,2),b.slice(2,4),Cb.radius)+ib(b.slice(4,6),b.slice(6,8),Cb.radius))/2,a=d?lb[d]:a.l(),void 0!==a&&(b/=a));return b}function Hb(a){a.forEach(Ib);a.forEach(function(b){a.forEach(function(a){b!==a&&Ab(b,a,Jb)})})}function Ib(a){yb[a.La]=a;Ab(a,a,Jb)}
function Kb(a){return a?"string"===typeof a?Fb(a):a:Fb("EPSG:3857")}function Lb(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2;c=void 0!==c?c:Array(e);var f;for(f=0;f<e;f+=d){var g=a([b[f],b[f+1]]);c[f]=g[0];c[f+1]=g[1];for(g=d-1;2<=g;--g)c[f+g]=b[f+g]}return c}}function Fb(a){var b=null;if(a instanceof mb)b=a;else if("string"===typeof a&&(b=yb[a]||null,!b)){var c=window.proj4;"function"==typeof c&&void 0!==c.defs(a)&&(b=new mb({code:a}),Ib(b))}return b}
function Mb(a,b){if(a===b)return!0;var c=a.c===b.c;return a.La===b.La?c:Gb(a,b)===Jb&&c}function Nb(a,b){a=Fb(a);b=Fb(b);return Gb(a,b)}function Gb(a,b){var c=a.La,d=b.La,e=Bb(c,d);if(!e){var f=window.proj4;if("function"==typeof f){var g=f.defs(c),h=f.defs(d);void 0!==g&&void 0!==h&&(g===h?Hb([b,a]):(f=f(d,c),e=f.forward,f=f.inverse,b=Fb(b),a=Fb(a),Ab(b,a,Lb(e)),Ab(a,b,Lb(f))),e=Bb(c,d))}}e||(e=Ob);return e}
function Ob(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}function Jb(a,b){if(void 0!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}else a=a.slice();return a}function Pb(a,b,c){return Nb(b,c)(a,void 0,a.length)}
function Qb(a,b,c){b=Nb(b,c);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);c=[a[0],a[2],a[4],a[6]];var d=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,c);b=Math.min.apply(null,d);c=Math.max.apply(null,c);d=Math.max.apply(null,d);return Ja(a,b,c,d,void 0)}Hb(rb);Hb(xb);xb.forEach(function(a){rb.forEach(function(b){Ab(a,b,sb);Ab(b,a,tb)})});function Rb(a,b){return a>b?1:a<b?-1:0}function Sb(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(0<c)for(c=1;c<d;++c){if(a[c]<b)return c-1}else if(0>c)for(c=1;c<d;++c){if(a[c]<=b)return c}else for(c=1;c<d;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1}function Ub(a,b){var c=Array.isArray(b)?b:[b],d=c.length;for(b=0;b<d;b++)a[a.length]=c[b]}function Vb(a,b){var c=a.length;if(c!==b.length)return!1;for(var d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}
function Wb(a){var b=Xb,c=a.length,d=Array(a.length),e;for(e=0;e<c;e++)d[e]={index:e,value:a[e]};d.sort(function(a,c){return b(a.value,c.value)||a.index-c.index});for(e=0;e<a.length;e++)a[e]=d[e].value}function Yb(a,b){var c=b||Rb;return a.every(function(b,e){if(0===e)return!0;b=c(a[e-1],b);return!(0<b||0===b)})};function Zb(a,b,c,d){return void 0!==d?(d[0]=a,d[1]=b,d[2]=c,d):[a,b,c]};function $b(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0;this.a=a.resolutions;x(Yb(this.a,function(a,b){return b-a}),17);if(!a.origins)for(var b=0,c=this.a.length-1;b<c;++b)if(!d)var d=this.a[b]/this.a[b+1];else if(this.a[b]/this.a[b+1]!==d){d=void 0;break}this.v=d;this.maxZoom=this.a.length-1;this.l=void 0!==a.origin?a.origin:null;this.j=null;void 0!==a.origins&&(this.j=a.origins,x(this.j.length==this.a.length,20));d=a.extent;void 0===d||this.l||this.j||(this.l=Wa(d));x(!this.l&&this.j||this.l&&
!this.j,18);this.b=null;void 0!==a.tileSizes&&(this.b=a.tileSizes,x(this.b.length==this.a.length,19));this.f=void 0!==a.tileSize?a.tileSize:this.b?null:256;x(!this.f&&this.b||this.f&&!this.b,22);this.o=void 0!==d?d:null;this.c=null;this.g=[0,0];void 0!==a.sizes?this.c=a.sizes.map(function(a){return new oa(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):d&&ac(this,d)}var bc=[0,0,0];
function cc(a,b,c,d){a=dc(a,b,c);b=a.T;for(var e=a.W;b<=e;++b)for(var f=a.R,g=a.U;f<=g;++f)d([c,b,f])}function fc(a,b,c,d,e){var f=null,g=b[0]-1;if(2===a.v){var h=b[1];var k=b[2]}else f=hc(a,b,e);for(;g>=a.minZoom;){2===a.v?(h=Math.floor(h/2),k=Math.floor(k/2),b=pa(h,h,k,k,d)):b=dc(a,f,g,d);if(c.call(null,g,b))break;--g}}$b.prototype.I=function(){return this.o};function ic(a,b){return a.l?a.l:a.j[b]}
function jc(a,b,c,d){if(b[0]<a.maxZoom){if(2===a.v)return a=2*b[1],b=2*b[2],pa(a,a+1,b,b+1,c);d=hc(a,b,d);return dc(a,d,b[0]+1,c)}return null}function kc(a,b,c){var d=ic(a,b),e=a.a[b];a=za(lc(a,b),a.g);return Ja(d[0]+c.T*a[0]*e,d[1]+c.R*a[1]*e,d[0]+(c.W+1)*a[0]*e,d[1]+(c.U+1)*a[1]*e,void 0)}function dc(a,b,c,d){mc(a,b[0],b[1],c,!1,bc);var e=bc[1],f=bc[2];mc(a,b[2],b[3],c,!0,bc);return pa(e,bc[1],f,bc[2],d)}
function nc(a,b){var c=ic(a,b[0]),d=a.a[b[0]];a=za(lc(a,b[0]),a.g);return[c[0]+(b[1]+.5)*a[0]*d,c[1]+(b[2]+.5)*a[1]*d]}function hc(a,b,c){var d=ic(a,b[0]),e=a.a[b[0]];a=za(lc(a,b[0]),a.g);var f=d[0]+b[1]*a[0]*e;b=d[1]+b[2]*a[1]*e;return Ja(f,b,f+a[0]*e,b+a[1]*e,c)}function mc(a,b,c,d,e,f){var g=ic(a,d),h=a.a[d];a=za(lc(a,d),a.g);b=Math.floor((b-g[0])/h+(e?.5:0))/a[0];c=Math.floor((c-g[1])/h+(e?0:.5))/a[1];e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));return Zb(d,b,c,f)}
function lc(a,b){return a.f?a.f:a.b[b]}function oc(a,b,c){return ra(Sb(a.a,b,c||0),a.minZoom,a.maxZoom)}function ac(a,b){for(var c=a.a.length,d=Array(c),e=a.minZoom;e<c;++e)d[e]=dc(a,b,e);a.c=d};function pc(a){var b={};Za(b,void 0!==a?a:{});void 0===b.extent&&(b.extent=Fb("EPSG:3857").I());b.resolutions=qc(b.extent,b.maxZoom,b.tileSize);delete b.maxZoom;return new $b(b)}function qc(a,b,c){b=void 0!==b?b:42;var d=Ta(a);a=Xa(a);c=za(void 0!==c?c:256);c=Math.max(a/c[0],d/c[1]);b+=1;d=Array(b);for(a=0;a<b;++a)d[a]=c/Math.pow(2,a);return d}function rc(a,b,c){a=sc(a);b=qc(a,b,c);return new $b({extent:a,origin:Wa(a),resolutions:b,tileSize:c})}
function sc(a){a=Fb(a);var b=a.I();b||(a=180*lb.degrees/a.l(),b=Ja(-a,-a,a,a));return b};function tc(a){this.le=a.html};function uc(a){function b(b){var c=a.listener,e=a.Qd||a.target;a.Td&&vc(a);return c.call(e,b)}return a.Rd=b}function wc(a,b,c,d){for(var e,f=0,g=a.length;f<g;++f)if(e=a[f],e.listener===b&&e.Qd===c)return d&&(e.deleteIndex=f),e}function xc(a,b){return(a=a.Ra)?a[b]:void 0}function yc(a){var b=a.Ra;b||(b=a.Ra={});return b}
function zc(a,b){var c=xc(a,b);if(c){for(var d=0,e=c.length;d<e;++d)a.removeEventListener(b,c[d].Rd),bb(c[d]);c.length=0;if(c=a.Ra)delete c[b],0===Object.keys(c).length&&delete a.Ra}}function z(a,b,c,d,e){var f=yc(a),g=f[b];g||(g=f[b]=[]);(f=wc(g,c,d,!1))?e||(f.Td=!1):(f={Qd:d,Td:!!e,listener:c,target:a,type:b},a.addEventListener(b,uc(f)),g.push(f));return f}function Ac(a,b,c,d){(a=xc(a,b))&&(c=wc(a,c,d,!0))&&vc(c)}
function vc(a){if(a&&a.target){a.target.removeEventListener(a.type,a.Rd);var b=xc(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);0===b.length&&zc(a.target,a.type)}bb(a)}};function Bc(){}Bc.prototype.$a=!1;function Cc(a){a.$a||(a.$a=!0,a.ca())}Bc.prototype.ca=la;function Gc(a){this.type=a;this.target=null}Gc.prototype.preventDefault=Gc.prototype.stopPropagation=function(){this.Ii=!0};function Jc(a){a.stopPropagation()};function Kc(){this.Ga={};this.Ca={};this.ia={}}v(Kc,Bc);Kc.prototype.addEventListener=function(a,b){var c=this.ia[a];c||(c=this.ia[a]=[]);-1===c.indexOf(b)&&c.push(b)};
Kc.prototype.l=function(a){var b="string"===typeof a?new Gc(a):a;a=b.type;b.target=this;var c=this.ia[a];if(c){a in this.Ca||(this.Ca[a]=0,this.Ga[a]=0);++this.Ca[a];for(var d=0,e=c.length;d<e;++d)if(!1===c[d].call(this,b)||b.Ii){var f=!1;break}--this.Ca[a];if(0===this.Ca[a]){b=this.Ga[a];for(delete this.Ga[a];b--;)this.removeEventListener(a,la);delete this.Ca[a]}return f}};Kc.prototype.ca=function(){var a=yc(this),b;for(b in a)zc(this,b)};
function Lc(a,b){return b?b in a.ia:0<Object.keys(a.ia).length}Kc.prototype.removeEventListener=function(a,b){var c=this.ia[a];c&&(b=c.indexOf(b),a in this.Ga?(c[b]=la,++this.Ga[a]):(c.splice(b,1),0===c.length&&delete this.ia[a]))};function Mc(){Kc.call(this);this.j=0}v(Mc,Kc);Mc.prototype.c=function(){++this.j;this.l("change")};Mc.prototype.v=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=z(this,a[f],b,c);return e}return z(this,a,b,c)};Mc.prototype.once=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=z(this,a[f],b,c,!0);return e}return z(this,a,b,c,!0)};
Mc.prototype.ka=function(a,b,c){if(Array.isArray(a))for(var d=0,e=a.length;d<e;++d)Ac(this,a[d],b,c);else Ac(this,a,b,c)};function Nc(a){Mc.call(this);w(this);this.H={};void 0!==a&&this.na(a)}v(Nc,Mc);var Oc={};function Pc(a){return Oc.hasOwnProperty(a)?Oc[a]:Oc[a]="change:"+a}l=Nc.prototype;l.get=function(a){var b;this.H.hasOwnProperty(a)&&(b=this.H[a]);return b};l.Fa=function(){return Za({},this.H)};function Qc(a,b,c){var d=Pc(b);a.l(new Rc(d,b,c));a.l(new Rc("propertychange",b,c))}l.set=function(a,b,c){c?this.H[a]=b:(c=this.H[a],this.H[a]=b,c!==b&&Qc(this,a,c))};l.na=function(a,b){for(var c in a)this.set(c,a[c],b)};
l.nj=function(a,b){if(a in this.H){var c=this.H[a];delete this.H[a];b||Qc(this,a,c)}};function Rc(a,b,c){Gc.call(this,a);this.key=b;this.oldValue=c}v(Rc,Gc);function Sc(a,b){Nc.call(this);this.b=!!(b||{}).unique;this.a=a?a:[];if(this.b)for(a=0,b=this.a.length;a<b;++a)Tc(this,this.a[a],a);Uc(this)}v(Sc,Nc);l=Sc.prototype;l.clear=function(){for(;0<this.fb();)this.pop()};function Vc(a,b){var c;var d=0;for(c=b.length;d<c;++d)a.push(b[d])}l.forEach=function(a,b){a=b?a.bind(b):a;b=this.a;for(var c=0,d=b.length;c<d;++c)a(b[c],c,b)};l.xg=function(){return this.a};l.oe=function(a){return this.a[a]};l.fb=function(){return this.get(Wc)};
l.pop=function(){return Xc(this,this.fb()-1)};l.push=function(a){this.b&&Tc(this,a);var b=this.fb();this.b&&Tc(this,a);this.a.splice(b,0,a);Uc(this);this.l(new Yc("add",a));return this.fb()};l.remove=function(a){var b=this.a,c;var d=0;for(c=b.length;d<c;++d)if(b[d]===a)return Xc(this,d)};function Xc(a,b){var c=a.a[b];a.a.splice(b,1);Uc(a);a.l(new Yc("remove",c));return c}function Uc(a){a.set(Wc,a.a.length)}
function Tc(a,b,c){for(var d=0,e=a.a.length;d<e;++d)if(a.a[d]===b&&d!==c)throw new na(58);}var Wc="length";function Yc(a,b){Gc.call(this,a);this.element=b}v(Yc,Gc);function Zc(a,b,c){Gc.call(this,a);this.map=b;this.frameState=void 0!==c?c:null}v(Zc,Gc);function $c(a,b,c,d,e){Zc.call(this,a,b,e);this.originalEvent=c;this.pixel=ad(b,c);this.coordinate=b.Ja(this.pixel);this.dragging=void 0!==d?d:!1}v($c,Zc);$c.prototype.preventDefault=function(){Zc.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};$c.prototype.stopPropagation=function(){Zc.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};var bd="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",fd=-1!==bd.indexOf("firefox"),gd=-1!==bd.indexOf("safari")&&-1==bd.indexOf("chrom"),hd=-1!==bd.indexOf("webkit")&&-1==bd.indexOf("edge"),id=-1!==bd.indexOf("macintosh"),jd=window.devicePixelRatio||1,kd=!1;(function(){if(!("HTMLCanvasElement"in window))return!1;try{var a=document.createElement("CANVAS").getContext("2d");return a?(void 0!==a.setLineDash&&(kd=!0),!0):!1}catch(b){return!1}})();
var ld="geolocation"in navigator,md="ontouchstart"in window,nd="PointerEvent"in window,od=!!navigator.msPointerEnabled;var pd={Cj:"singleclick",rj:"click",sj:"dblclick",vj:"pointerdrag",yj:"pointermove",uj:"pointerdown",Bj:"pointerup",Aj:"pointerover",zj:"pointerout",wj:"pointerenter",xj:"pointerleave",tj:"pointercancel"};function qd(a,b,c,d,e){$c.call(this,a,b,c.a,d,e);this.a=c}v(qd,$c);function rd(a,b){this.a=a;this.b=b};function sd(a){rd.call(this,a,{mousedown:this.mh,mousemove:this.nh,mouseup:this.qh,mouseover:this.ph,mouseout:this.oh});this.c=a.c;this.l=[]}v(sd,rd);function td(a,b){a=a.l;var c=b.clientX;b=b.clientY;for(var d=0,e=a.length,f;d<e&&(f=a[d]);d++){var g=Math.abs(b-f[1]);if(25>=Math.abs(c-f[0])&&25>=g)return!0}return!1}function ud(a){var b=vd(a,a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=1;b.isPrimary=!0;b.pointerType="mouse";return b}l=sd.prototype;
l.mh=function(a){if(!td(this,a)){(1).toString()in this.c&&this.cancel(a);var b=ud(a);this.c[(1).toString()]=a;wd(this.a,"pointerdown",b,a)}};l.nh=function(a){if(!td(this,a)){var b=ud(a);wd(this.a,"pointermove",b,a)}};l.qh=function(a){if(!td(this,a)){var b=this.c[(1).toString()];b&&b.button===a.button&&(b=ud(a),wd(this.a,"pointerup",b,a),delete this.c[(1).toString()])}};l.ph=function(a){if(!td(this,a)){var b=ud(a);xd(this.a,b,a)}};l.oh=function(a){if(!td(this,a)){var b=ud(a);yd(this.a,b,a)}};
l.cancel=function(a){var b=ud(a);this.a.cancel(b,a);delete this.c[(1).toString()]};function zd(a){rd.call(this,a,{MSPointerDown:this.vh,MSPointerMove:this.wh,MSPointerUp:this.zh,MSPointerOut:this.xh,MSPointerOver:this.yh,MSPointerCancel:this.uh,MSGotPointerCapture:this.sh,MSLostPointerCapture:this.th});this.c=a.c;this.l=["","unavailable","touch","pen","mouse"]}v(zd,rd);function Ad(a,b){var c=b;"number"===typeof b.pointerType&&(c=vd(b,b),c.pointerType=a.l[b.pointerType]);return c}l=zd.prototype;
l.vh=function(a){this.c[a.pointerId.toString()]=a;var b=Ad(this,a);wd(this.a,"pointerdown",b,a)};l.wh=function(a){var b=Ad(this,a);wd(this.a,"pointermove",b,a)};l.zh=function(a){var b=Ad(this,a);wd(this.a,"pointerup",b,a);delete this.c[a.pointerId.toString()]};l.xh=function(a){var b=Ad(this,a);yd(this.a,b,a)};l.yh=function(a){var b=Ad(this,a);xd(this.a,b,a)};l.uh=function(a){var b=Ad(this,a);this.a.cancel(b,a);delete this.c[a.pointerId.toString()]};
l.th=function(a){this.a.l(new Bd("lostpointercapture",a,a))};l.sh=function(a){this.a.l(new Bd("gotpointercapture",a,a))};function Cd(a){rd.call(this,a,{pointerdown:this.Bi,pointermove:this.Ci,pointerup:this.Fi,pointerout:this.Di,pointerover:this.Ei,pointercancel:this.Ai,gotpointercapture:this.Hg,lostpointercapture:this.jh})}v(Cd,rd);l=Cd.prototype;l.Bi=function(a){Dd(this.a,a)};l.Ci=function(a){Dd(this.a,a)};l.Fi=function(a){Dd(this.a,a)};l.Di=function(a){Dd(this.a,a)};l.Ei=function(a){Dd(this.a,a)};l.Ai=function(a){Dd(this.a,a)};l.jh=function(a){Dd(this.a,a)};l.Hg=function(a){Dd(this.a,a)};function Bd(a,b,c){Gc.call(this,a);this.a=b;a=c?c:{};this.buttons=Ed(a);this.pressure=Fd(a,this.buttons);this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.ctrlKey="ctrlKey"in a?a.ctrlKey:!1;this.altKey="altKey"in a?a.altKey:!1;this.shiftKey=
"shiftKey"in a?a.shiftKey:!1;this.metaKey="metaKey"in a?a.metaKey:!1;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.tiltX="tiltX"in a?a.tiltX:0;this.tiltY="tiltY"in a?a.tiltY:0;this.pointerType="pointerType"in a?a.pointerType:"";this.isPrimary="isPrimary"in a?a.isPrimary:!1;b.preventDefault&&(this.preventDefault=function(){b.preventDefault()})}
v(Bd,Gc);function Ed(a){if(a.buttons||Gd)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}function Fd(a,b){var c=0;a.pressure?c=a.pressure:c=b?.5:0;return c}var Gd=!1;try{Gd=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){};function Hd(a,b){rd.call(this,a,{touchstart:this.mj,touchmove:this.lj,touchend:this.kj,touchcancel:this.jj});this.c=a.c;this.f=b;this.l=void 0;this.g=0;this.j=void 0}v(Hd,rd);l=Hd.prototype;l.gf=function(){this.g=0;this.j=void 0};
function Id(a,b,c){b=vd(b,c);b.pointerId=c.identifier+2;b.bubbles=!0;b.cancelable=!0;b.detail=a.g;b.button=0;b.buttons=1;b.width=c.webkitRadiusX||c.radiusX||0;b.height=c.webkitRadiusY||c.radiusY||0;b.pressure=c.webkitForce||c.force||.5;b.isPrimary=a.l===c.identifier;b.pointerType="touch";b.clientX=c.clientX;b.clientY=c.clientY;b.screenX=c.screenX;b.screenY=c.screenY;return b}
function Qd(a,b,c){function d(){b.preventDefault()}var e=Array.prototype.slice.call(b.changedTouches),f=e.length,g;for(g=0;g<f;++g){var h=Id(a,b,e[g]);h.preventDefault=d;c.call(a,b,h)}}
l.mj=function(a){var b=a.touches,c=Object.keys(this.c),d=c.length;if(d>=b.length){var e=[],f;for(f=0;f<d;++f){var g=c[f];var h=this.c[g];var k;if(!(k=1==g))a:{for(var m=b.length,n=0;n<m;n++)if(k=b[n],k.identifier===g-2){k=!0;break a}k=!1}k||e.push(h.out)}for(f=0;f<e.length;++f)this.Kc(a,e[f])}b=a.changedTouches[0];c=Object.keys(this.c).length;if(0===c||1===c&&(1).toString()in this.c)this.l=b.identifier,void 0!==this.j&&clearTimeout(this.j);Rd(this,a);this.g++;Qd(this,a,this.wi)};
l.wi=function(a,b){this.c[b.pointerId]={target:b.target,out:b,Te:b.target};var c=this.a;b.bubbles=!0;wd(c,"pointerover",b,a);c=this.a;b.bubbles=!1;wd(c,"pointerenter",b,a);wd(this.a,"pointerdown",b,a)};l.lj=function(a){a.preventDefault();Qd(this,a,this.rh)};
l.rh=function(a,b){var c=this.c[b.pointerId];if(c){var d=c.out,e=c.Te;wd(this.a,"pointermove",b,a);d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(yd(this.a,d,a),xd(this.a,b,a)):(b.target=e,b.relatedTarget=null,this.Kc(a,b)));c.out=b;c.Te=b.target}};l.kj=function(a){Rd(this,a);Qd(this,a,this.oj)};
l.oj=function(a,b){wd(this.a,"pointerup",b,a);this.a.out(b,a);Sd(this.a,b,a);delete this.c[b.pointerId];b.isPrimary&&(this.l=void 0,this.j=setTimeout(this.gf.bind(this),200))};l.jj=function(a){Qd(this,a,this.Kc)};l.Kc=function(a,b){this.a.cancel(b,a);this.a.out(b,a);Sd(this.a,b,a);delete this.c[b.pointerId];b.isPrimary&&(this.l=void 0,this.j=setTimeout(this.gf.bind(this),200))};
function Rd(a,b){var c=a.f.l;b=b.changedTouches[0];if(a.l===b.identifier){var d=[b.clientX,b.clientY];c.push(d);setTimeout(function(){var a=c.indexOf(d);-1<a&&c.splice(a,1)},2500)}};function Td(a){Kc.call(this);this.g=a;this.c={};this.b={};this.a=[];nd?Ud(this,new Cd(this)):od?Ud(this,new zd(this)):(a=new sd(this),Ud(this,a),md&&Ud(this,new Hd(this,a)));a=this.a.length;for(var b,c=0;c<a;c++)b=this.a[c],Vd(this,Object.keys(b.b))}v(Td,Kc);function Ud(a,b){var c=Object.keys(b.b);c&&(c.forEach(function(a){var c=b.b[a];c&&(this.b[a]=c.bind(b))},a),a.a.push(b))}Td.prototype.j=function(a){var b=this.b[a.type];b&&b(a)};
function Vd(a,b){b.forEach(function(a){z(this.g,a,this.j,this)},a)}function Wd(a,b){b.forEach(function(a){Ac(this.g,a,this.j,this)},a)}function vd(a,b){for(var c={},d,e=0,f=Xd.length;e<f;e++)d=Xd[e][0],c[d]=a[d]||b[d]||Xd[e][1];return c}function Sd(a,b,c){b.bubbles=!1;wd(a,"pointerleave",b,c)}Td.prototype.out=function(a,b){a.bubbles=!0;wd(this,"pointerout",a,b)};Td.prototype.cancel=function(a,b){wd(this,"pointercancel",a,b)};
function yd(a,b,c){a.out(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||Sd(a,b,c)}function xd(a,b,c){b.bubbles=!0;wd(a,"pointerover",b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||(b.bubbles=!1,wd(a,"pointerenter",b,c))}function wd(a,b,c,d){a.l(new Bd(b,d,c))}function Dd(a,b){a.l(new Bd(b.type,b,b))}Td.prototype.ca=function(){for(var a=this.a.length,b,c=0;c<a;c++)b=this.a[c],Wd(this,Object.keys(b.b));Kc.prototype.ca.call(this)};
var Xd=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function Yd(a,b){Kc.call(this);this.c=a;this.f=0;this.v=!1;this.b=[];this.B=b?b*jd:jd;this.j=null;a=this.c.a;this.C=0;this.H={};this.g=new Td(a);this.a=null;this.i=z(this.g,"pointerdown",this.Tg,this);this.o=z(this.g,"pointermove",this.Xi,this)}v(Yd,Kc);function Zd(a,b){var c=new qd("click",a.c,b);a.l(c);0!==a.f?(clearTimeout(a.f),a.f=0,c=new qd("dblclick",a.c,b),a.l(c)):a.f=setTimeout(function(){this.f=0;var a=new qd("singleclick",this.c,b);this.l(a)}.bind(a),250)}
function $d(a,b){"pointerup"==b.type||"pointercancel"==b.type?delete a.H[b.pointerId]:"pointerdown"==b.type&&(a.H[b.pointerId]=!0);a.C=Object.keys(a.H).length}l=Yd.prototype;l.je=function(a){$d(this,a);var b=new qd("pointerup",this.c,a);this.l(b);!this.v&&0===a.button&&Zd(this,this.j);0===this.C&&(this.b.forEach(vc),this.b.length=0,this.v=!1,this.j=null,Cc(this.a),this.a=null)};
l.Tg=function(a){$d(this,a);var b=new qd("pointerdown",this.c,a);this.l(b);this.j=a;0===this.b.length&&(this.a=new Td(document),this.b.push(z(this.a,"pointermove",this.Hh,this),z(this.a,"pointerup",this.je,this),z(this.g,"pointercancel",this.je,this)))};l.Hh=function(a){if(ae(this,a)){this.v=!0;var b=new qd("pointerdrag",this.c,a,this.v);this.l(b)}a.preventDefault()};l.Xi=function(a){this.l(new qd(a.type,this.c,a,!(!this.j||!ae(this,a))))};
function ae(a,b){return Math.abs(b.clientX-a.j.clientX)>a.B||Math.abs(b.clientY-a.j.clientY)>a.B}l.ca=function(){this.o&&(vc(this.o),this.o=null);this.i&&(vc(this.i),this.i=null);this.b.forEach(vc);this.b.length=0;this.a&&(Cc(this.a),this.a=null);this.g&&(Cc(this.g),this.g=null);Kc.prototype.ca.call(this)};function be(a,b){this.i=a;this.j=b;this.a=[];this.c=[];this.l={}}be.prototype.clear=function(){this.a.length=0;this.c.length=0;bb(this.l)};be.prototype.f=function(a){x(!(this.j(a)in this.l),31);var b=this.i(a);return Infinity!=b?(this.a.push(a),this.c.push(b),this.l[this.j(a)]=!0,ce(this,0,this.a.length-1),!0):!1};function de(a,b){for(var c=a.a,d=a.c,e=c.length,f=c[b],g=d[b],h=b;b<e>>1;){var k=2*b+1,m=2*b+2;k=m<e&&d[m]<d[k]?m:k;c[b]=c[k];d[b]=d[k];b=k}c[b]=f;d[b]=g;ce(a,h,b)}
function ce(a,b,c){var d=a.a;a=a.c;for(var e=d[c],f=a[c];c>b;){var g=c-1>>1;if(a[g]>f)d[c]=d[g],a[c]=a[g],c=g;else break}d[c]=e;a[c]=f};function ee(a,b){be.call(this,function(b){return a.apply(null,b)},function(a){return a[0].Sa()});this.o=b;this.g=0;this.b={}}v(ee,be);ee.prototype.f=function(a){var b=be.prototype.f.call(this,a);b&&z(a[0],"change",this.v,this);return b};ee.prototype.v=function(a){a=a.target;var b=a.state;if(2===b||3===b||4===b||5===b)Ac(a,"change",this.v,this),a=a.Sa(),a in this.b&&(delete this.b[a],--this.g),this.o()};function fe(a){return function(b){if(b)return[ra(b[0],a[0],a[2]),ra(b[1],a[1],a[3])]}}function ge(a){return a};function he(a){return function(b,c,d){if(void 0!==b)return b=Sb(a,b,d),b=ra(b+c,0,a.length-1),c=Math.floor(b),b!=c&&c<a.length-1?a[c]/Math.pow(a[c]/a[c+1],b-c):a[c]}}function ie(a,b,c){return function(d,e,f){if(void 0!==d)return d=Math.max(Math.floor(Math.log(b/d)/Math.log(a)+(-f/2+.5))+e,0),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};function je(a){if(void 0!==a)return 0}function ke(a,b){if(void 0!==a)return a+b}function le(a){var b=2*Math.PI/a;return function(a,d){if(void 0!==a)return a=Math.floor((a+d)/b+.5)*b}}function me(){var a=ua(5);return function(b,c){if(void 0!==b)return Math.abs(b+c)<=a?0:b+c}};function ne(a){a=""+a;var b=a.indexOf(".");b=-1===b?a.length:b;return 2<b?a:Array(3-b).join("0")+a};function oe(a,b){a[0]+=b[0];a[1]+=b[1]}function pe(a,b){var c=b.Jb(),d=b.ja();b=d[0];d=d[1];var e=a[0]-b;a=a[1]-d;0===e&&0===a&&(e=1);var f=Math.sqrt(e*e+a*a);return[b+c*e/f,d+c*a/f]}function qe(a,b){var c=a[0];a=a[1];var d=b[0],e=b[1];b=d[0];d=d[1];var f=e[0];e=e[1];var g=f-b,h=e-d;c=0===g&&0===h?0:(g*(c-b)+h*(a-d))/(g*g+h*h||0);0>=c?(a=b,c=d):1<=c?(a=f,c=e):(a=b+c*g,c=d+c*h);return[a,c]}function re(a,b){for(var c=!0,d=a.length-1;0<=d;--d)if(a[d]!=b[d]){c=!1;break}return c}
function se(a,b){var c=Math.cos(b);b=Math.sin(b);var d=a[1]*c+a[0]*b;a[0]=a[0]*c-a[1]*b;a[1]=d}function te(a,b){a[0]*=b;a[1]*=b}function ue(a,b){var c=a[0]-b[0];a=a[1]-b[1];return c*c+a*a}function ve(a,b){return Math.sqrt(ue(a,b))}function we(a,b){return ue(a,qe(a,b))};function xe(a){return 1-Math.pow(1-a,3)}function Ee(a){return 3*a*a-2*a*a*a}function Fe(a){return a};function Ge(){return!0}function He(){return!1};function Ie(a,b,c,d,e,f){for(var g=f?f:[],h=0;b<c;b+=d){var k=a[b],m=a[b+1];g[h++]=e[0]*k+e[2]*m+e[4];g[h++]=e[1]*k+e[3]*m+e[5]}f&&g.length!=h&&(g.length=h);return g};var Je=Array(6);function Ke(){return[1,0,0,1,0,0]}function Le(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=b[0],m=b[1],n=b[2],p=b[3],q=b[4];b=b[5];a[0]=c*k+e*m;a[1]=d*k+f*m;a[2]=c*n+e*p;a[3]=d*n+f*p;a[4]=c*q+e*b+g;a[5]=d*q+f*b+h}function Me(a,b,c,d,e){a[0]=b;a[1]=0;a[2]=0;a[3]=c;a[4]=d;a[5]=e;return a}function Ne(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function Oe(a,b){var c=b[0],d=b[1];b[0]=a[0]*c+a[2]*d+a[4];b[1]=a[1]*c+a[3]*d+a[5];return b}
function Pe(a,b,c,d,e,f,g,h){var k=Math.sin(f);f=Math.cos(f);a[0]=d*f;a[1]=e*k;a[2]=-d*k;a[3]=e*f;a[4]=g*d*f-h*d*k+b;a[5]=g*e*k+h*e*f+c;return a};function Qe(){Nc.call(this);this.C=Ba();this.B=-1;this.g={};this.o=this.f=0;this.X=Ke()}v(Qe,Nc);Qe.prototype.I=function(a){this.B!=this.j&&(this.C=this.Yb(this.C),this.B=this.j);var b=this.C;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};Qe.prototype.xb=function(a,b){var c=this.X;a=Fb(a);var d="tile-pixels"==a.c?function(d,f,g){var e=a.I(),k=a.Bd;e=Ta(k)/Ta(e);Pe(c,k[0],k[3],e,-e,0,0,0);Ie(d,0,d.length,g,c,f);return Nb(a,b)(d,f,g)}:Nb(a,b);this.Cb(d);return this};function Re(){Qe.call(this);this.V="XY";this.a=2;this.s=null}v(Re,Qe);function Se(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}l=Re.prototype;l.Yb=function(a){return Na(this.s,0,this.s.length,this.a,a)};l.Fb=function(){return this.s.slice(0,this.a)};l.aa=function(){return this.s};l.Dg=function(){return this.s.slice(this.s.length-this.a)};
l.bc=function(a){this.o!=this.j&&(bb(this.g),this.f=0,this.o=this.j);if(0>a||0!==this.f&&a<=this.f)return this;var b=a.toString();if(this.g.hasOwnProperty(b))return this.g[b];var c=this.ub(a);if(c.aa().length<this.s.length)return this.g[b]=c;this.f=a;return this};l.ub=function(){return this};l.ga=function(){return this.a};function Te(a,b,c){a.a=Se(b);a.V=b;a.s=c}
function Ue(a,b,c,d){if(b)c=Se(b);else{for(b=0;b<d;++b){if(0===c.length){a.V="XY";a.a=2;return}c=c[0]}c=c.length;var e;2==c?e="XY":3==c?e="XYZ":4==c&&(e="XYZM");b=e}a.V=b;a.a=c}l.Cb=function(a){this.s&&(a(this.s,this.s,this.a),this.c())};
l.rotate=function(a,b){var c=this.aa();if(c){var d=c.length,e=this.ga(),f=c?c:[],g=Math.cos(a);a=Math.sin(a);var h=b[0];b=b[1];for(var k=0,m=0;m<d;m+=e){var n=c[m]-h,p=c[m+1]-b;f[k++]=h+n*g-p*a;f[k++]=b+n*a+p*g;for(n=m+2;n<m+e;++n)f[k++]=c[n]}c&&f.length!=k&&(f.length=k);this.c()}};
l.scale=function(a,b,c){var d=b;void 0===d&&(d=a);var e=c;e||(e=Ra(this.I()));if(c=this.aa()){b=c.length;var f=this.ga(),g=c?c:[],h=e[0];e=e[1];for(var k=0,m=0;m<b;m+=f){var n=c[m]-h,p=c[m+1]-e;g[k++]=h+a*n;g[k++]=e+d*p;for(n=m+2;n<m+f;++n)g[k++]=c[n]}c&&g.length!=k&&(g.length=k);this.c()}};function Ve(a,b,c,d){var e=0,f;var g=0;for(f=c.length;g<f;++g){for(var h=c[g],k=0,m=a[h-d],n=a[h-d+1];b<h;b+=d){var p=a[b],q=a[b+1];k+=n*p-m*q;m=p;n=q}e+=k/2;b=h}return e};function We(a,b,c,d,e,f,g){var h=a[b],k=a[b+1],m=a[c]-h,n=a[c+1]-k;if(0!==m||0!==n)if(f=((e-h)*m+(f-k)*n)/(m*m+n*n),1<f)b=c;else if(0<f){for(e=0;e<d;++e)g[e]=wa(a[b+e],a[c+e],f);g.length=d;return}for(e=0;e<d;++e)g[e]=a[b+e];g.length=d}function Xe(a,b,c,d,e){var f=a[b],g=a[b+1];for(b+=d;b<c;b+=d){var h=a[b],k=a[b+1];f=ta(f,g,h,k);f>e&&(e=f);f=h;g=k}return e}function Ye(a,b,c,d,e){var f;var g=0;for(f=c.length;g<f;++g){var h=c[g];e=Xe(a,b,h,d,e);b=h}return e}
function Ze(a,b,c,d,e,f,g,h,k,m,n){if(b==c)return m;if(0===e){var p=ta(g,h,a[b],a[b+1]);if(p<m){for(n=0;n<d;++n)k[n]=a[b+n];k.length=d;return p}return m}for(var q=n?n:[NaN,NaN],t=b+d;t<c;)if(We(a,t-d,t,d,g,h,q),p=ta(g,h,q[0],q[1]),p<m){m=p;for(n=0;n<d;++n)k[n]=q[n];k.length=d;t+=d}else t+=d*Math.max((Math.sqrt(p)-Math.sqrt(m))/e|0,1);if(f&&(We(a,c-d,b,d,g,h,q),p=ta(g,h,q[0],q[1]),p<m)){m=p;for(n=0;n<d;++n)k[n]=q[n];k.length=d}return m}
function $e(a,b,c,d,e,f,g,h,k,m,n){n=n?n:[NaN,NaN];var p;var q=0;for(p=c.length;q<p;++q){var t=c[q];m=Ze(a,b,t,d,e,f,g,h,k,m,n);b=t}return m};function af(a,b){var c=0,d;var e=0;for(d=b.length;e<d;++e)a[c++]=b[e];return c}function bf(a,b,c,d){var e;var f=0;for(e=c.length;f<e;++f){var g=c[f],h;for(h=0;h<d;++h)a[b++]=g[h]}return b}function cf(a,b,c,d,e){e=e?e:[];var f=0,g;var h=0;for(g=c.length;h<g;++h)b=bf(a,b,c[h],d),e[f++]=b;e.length=f;return e};function df(a,b,c,d,e){e=void 0!==e?e:[];for(var f=0;b<c;b+=d)e[f++]=a.slice(b,b+d);e.length=f;return e}function ef(a,b,c,d,e){e=void 0!==e?e:[];var f=0,g;var h=0;for(g=c.length;h<g;++h){var k=c[h];e[f++]=df(a,b,k,d,e[f]);b=k}e.length=f;return e}function ff(a,b,c,d,e){e=void 0!==e?e:[];var f=0,g;var h=0;for(g=c.length;h<g;++h){var k=c[h];e[f++]=ef(a,b,k,d,e[f]);b=k[k.length-1]}e.length=f;return e};function gf(a,b,c,d,e,f,g){var h=(c-b)/d;if(3>h){for(;b<c;b+=d)f[g++]=a[b],f[g++]=a[b+1];return g}var k=Array(h);k[0]=1;k[h-1]=1;c=[b,c-d];for(var m=0,n;0<c.length;){var p=c.pop(),q=c.pop(),t=0,u=a[q],y=a[q+1],C=a[p],D=a[p+1];for(n=q+d;n<p;n+=d){var I=a[n];var G=a[n+1],R=u,L=y,J=C-R,V=D-L;if(0!==J||0!==V){var K=((I-R)*J+(G-L)*V)/(J*J+V*V);1<K?(R=C,L=D):0<K&&(R+=J*K,L+=V*K)}I=ta(I,G,R,L);I>t&&(m=n,t=I)}t>e&&(k[(m-b)/d]=1,q+d<m&&c.push(q,m),m+d<p&&c.push(m,p))}for(n=0;n<h;++n)k[n]&&(f[g++]=a[b+n*d],
f[g++]=a[b+n*d+1]);return g}
function hf(a,b,c,d,e,f,g,h){var k;var m=0;for(k=c.length;m<k;++m){var n=c[m];a:{var p=a,q=n,t=d,u=e,y=f,C=g;if(b!=q){var D=u*Math.round(p[b]/u),I=u*Math.round(p[b+1]/u);b+=t;y[C++]=D;y[C++]=I;do{var G=u*Math.round(p[b]/u);g=u*Math.round(p[b+1]/u);b+=t;if(b==q){y[C++]=G;y[C++]=g;g=C;break a}}while(G==D&&g==I);for(;b<q;){var R=u*Math.round(p[b]/u);var L=u*Math.round(p[b+1]/u);b+=t;if(R!=G||L!=g){var J=G-D,V=g-I,K=R-D,P=L-I;J*P==V*K&&(0>J&&K<J||J==K||0<J&&K>J)&&(0>V&&P<V||V==P||0<V&&P>V)||(y[C++]=G,
y[C++]=g,D=G,I=g);G=R;g=L}}y[C++]=G;y[C++]=g}g=C}h.push(g);b=n}return g};function jf(a,b){Re.call(this);this.b=this.i=-1;this.Y(a,b)}v(jf,Re);l=jf.prototype;l.clone=function(){var a=new jf(null);kf(a,this.V,this.s.slice());return a};l.Pa=function(a,b,c,d){if(d<Ga(this.I(),a,b))return d;this.b!=this.j&&(this.i=Math.sqrt(Xe(this.s,0,this.s.length,this.a,0)),this.b=this.j);return Ze(this.s,0,this.s.length,this.a,this.i,!0,a,b,c,d)};l.G=function(){return df(this.s,0,this.s.length,this.a)};
l.ub=function(a){var b=[];b.length=gf(this.s,0,this.s.length,this.a,a,b,0);a=new jf(null);kf(a,"XY",b);return a};l.D=function(){return"LinearRing"};l.Y=function(a,b){a?(Ue(this,b,a,1),this.s||(this.s=[]),this.s.length=bf(this.s,0,a,this.a),this.c()):kf(this,"XY",null)};function kf(a,b,c){Te(a,b,c);a.c()};function lf(a,b){Re.call(this);this.Y(a,b)}v(lf,Re);l=lf.prototype;l.clone=function(){var a=new lf(null);a.N(this.V,this.s.slice());return a};l.Pa=function(a,b,c,d){var e=this.s;a=ta(a,b,e[0],e[1]);if(a<d){d=this.a;for(b=0;b<d;++b)c[b]=e[b];c.length=d;return a}return d};l.G=function(){return this.s?this.s.slice():[]};l.Yb=function(a){return La(this.s,a)};l.D=function(){return"Point"};l.Y=function(a,b){a?(Ue(this,b,a,0),this.s||(this.s=[]),this.s.length=af(this.s,a),this.c()):this.N("XY",null)};
l.N=function(a,b){Te(this,a,b);this.c()};function mf(a,b,c,d,e,f){for(var g=0,h=a[c-d],k=a[c-d+1];b<c;b+=d){var m=a[b],n=a[b+1];k<=f?n>f&&0<(m-h)*(f-k)-(e-h)*(n-k)&&g++:n<=f&&0>(m-h)*(f-k)-(e-h)*(n-k)&&g--;h=m;k=n}return 0!==g};function nf(a,b,c,d,e,f,g){var h,k=e[f+1],m=[],n=c[0];var p=a[n-d];var q=a[n-d+1];for(h=b;h<n;h+=d){var t=a[h];var u=a[h+1];if(k<=q&&u<=k||q<=k&&k<=u)p=(k-q)/(u-q)*(t-p)+p,m.push(p);p=t;q=u}n=NaN;q=-Infinity;m.sort(Rb);p=m[0];h=1;for(u=m.length;h<u;++h){t=m[h];var y=Math.abs(t-p);if(y>q){p=(p+t)/2;var C;a:if(0!==c.length&&mf(a,b,c[0],d,p,k)){var D=1;for(C=c.length;D<C;++D)if(mf(a,c[D-1],c[D],d,p,k)){C=!1;break a}C=!0}else C=!1;C&&(n=p,q=y)}p=t}isNaN(n)&&(n=e[f]);return g?(g.push(n,k,q),g):[n,k,q]}
;function of(a,b,c,d){for(var e=0,f=a[c-d],g=a[c-d+1];b<c;b+=d){var h=a[b],k=a[b+1];e+=(h-f)*(k+g);f=h;g=k}return 0<e}function pf(a,b,c,d){var e=0;d=void 0!==d?d:!1;var f;var g=0;for(f=b.length;g<f;++g){var h=b[g];e=of(a,e,h,c);if(0===g){if(d&&e||!d&&!e)return!1}else if(d&&!e||!d&&e)return!1;e=h}return!0}
function qf(a,b,c,d,e){e=void 0!==e?e:!1;var f;var g=0;for(f=c.length;g<f;++g){var h=c[g],k=of(a,b,h,d);if(0===g?e&&k||!e&&!k:e&&!k||!e&&k){k=a;for(var m=h,n=d;b<m-n;){var p;for(p=0;p<n;++p){var q=k[b+p];k[b+p]=k[m-n+p];k[m-n+p]=q}b+=n;m-=n}}b=h}return b}function rf(a,b,c,d){var e=0,f;var g=0;for(f=b.length;g<f;++g)e=qf(a,e,b[g],c,d);return e};function A(a,b){Re.call(this);this.b=[];this.u=-1;this.A=null;this.M=this.J=this.K=-1;this.i=null;this.Y(a,b)}v(A,Re);l=A.prototype;l.clone=function(){var a=new A(null);a.N(this.V,this.s.slice(),this.b.slice());return a};l.Pa=function(a,b,c,d){if(d<Ga(this.I(),a,b))return d;this.J!=this.j&&(this.K=Math.sqrt(Ye(this.s,0,this.b,this.a,0)),this.J=this.j);return $e(this.s,0,this.b,this.a,this.K,!0,a,b,c,d)};l.Xh=function(){return Ve(this.Xa(),0,this.b,this.a)};
l.G=function(a){if(void 0!==a){var b=this.Xa().slice();qf(b,0,this.b,this.a,a)}else b=this.s;return ef(b,0,this.b,this.a)};l.Ma=function(){return this.b};l.ac=function(){if(this.u!=this.j){var a=Ra(this.I());this.A=nf(this.Xa(),0,this.b,this.a,a,0);this.u=this.j}return this.A};l.Bg=function(){return new lf(this.ac(),"XYM")};l.ee=function(a){if(0>a||this.b.length<=a)return null;var b=new jf(null);kf(b,this.V,this.s.slice(0===a?0:this.b[a-1],this.b[a]));return b};
function sf(a){var b=a.V,c=a.s;a=a.b;var d=[],e=0,f;var g=0;for(f=a.length;g<f;++g){var h=a[g],k=new jf(null);kf(k,b,c.slice(e,h));d.push(k);e=h}return d}l.Xa=function(){if(this.M!=this.j){var a=this.s;pf(a,this.b,this.a)?this.i=a:(this.i=a.slice(),this.i.length=qf(this.i,0,this.b,this.a));this.M=this.j}return this.i};l.ub=function(a){var b=[],c=[];b.length=hf(this.s,0,this.b,this.a,Math.sqrt(a),b,0,c);a=new A(null);a.N("XY",b,c);return a};l.D=function(){return"Polygon"};
l.Y=function(a,b){a?(Ue(this,b,a,2),this.s||(this.s=[]),a=cf(this.s,0,a,this.a,this.b),this.s.length=0===a.length?0:a[a.length-1],this.c()):this.N("XY",null,this.b)};l.N=function(a,b,c){Te(this,a,b);this.b=c;this.c()};function tf(a){var b=a[0],c=a[1],d=a[2];a=a[3];b=[b,c,b,a,d,a,d,c,b,c];c=new A(null);c.N("XY",b,[b.length]);return c};function uf(a){Nc.call(this);a=Za({},a);this.a=[0,0];this.g=[];this.Bc=this.Bc.bind(this);this.u=Kb(a.projection);var b={};b.center=void 0!==a.center?a.center:null;var c=void 0!==a.minZoom?a.minZoom:0;var d=void 0!==a.maxZoom?a.maxZoom:28;var e=void 0!==a.zoomFactor?a.zoomFactor:2;if(void 0!==a.resolutions){d=a.resolutions;var f=d[0];var g=d[d.length-1];d=he(d)}else{f=Kb(a.projection);g=f.I();var h=(g?Math.max(Xa(g),Ta(g)):360*lb.degrees/f.l())/256/Math.pow(2,0),k=h/Math.pow(2,28);f=a.maxResolution;
void 0!==f?c=0:f=h/Math.pow(e,c);g=a.minResolution;void 0===g&&(g=void 0!==a.maxZoom?void 0!==a.maxResolution?f/Math.pow(e,d):h/Math.pow(e,d):k);d=c+Math.floor(Math.log(f/g)/Math.log(e));g=f/Math.pow(e,d-c);d=ie(e,f,d-c)}this.f=f;this.B=g;this.A=e;this.i=a.resolutions;this.o=c;(void 0!==a.enableRotation?a.enableRotation:1)?(c=a.constrainRotation,c=void 0===c||!0===c?me():!1===c?ke:"number"===typeof c?le(c):ke):c=je;this.b={center:void 0!==a.extent?fe(a.extent):ge,resolution:d,rotation:c};void 0!==
a.resolution?b.resolution=a.resolution:void 0!==a.zoom&&(b.resolution=this.constrainResolution(this.f,a.zoom-this.o));b.rotation=void 0!==a.rotation?a.rotation:0;this.na(b)}v(uf,Nc);l=uf.prototype;
l.animate=function(a){var b=arguments.length;if(1<b&&"function"===typeof arguments[b-1]){var c=arguments[b-1];--b}if(vf(this)){for(var d=Date.now(),e=this.ja().slice(),f=this.za(),g=wf(this),h=[],k=0;k<b;++k){var m=arguments[k],n={start:d,complete:!1,anchor:m.anchor,duration:void 0!==m.duration?m.duration:1E3,easing:m.easing||Ee};m.center&&(n.Pb=e,n.Rb=m.center,e=n.Rb);void 0!==m.zoom?(n.Qb=f,n.nb=this.constrainResolution(this.f,m.zoom-this.o,0),f=n.nb):m.resolution&&(n.Qb=f,n.nb=m.resolution,f=n.nb);
void 0!==m.rotation&&(n.yc=g,n.Sb=g+(va(m.rotation-g+Math.PI,2*Math.PI)-Math.PI),g=n.Sb);n.callback=c;n.Pb&&n.Rb&&!re(n.Pb,n.Rb)||n.Qb!==n.nb||n.yc!==n.Sb?d+=n.duration:n.complete=!0;h.push(n)}this.g.push(h);xf(this,0,1);this.Bc()}else b=arguments[b-1],b.center&&this.Oa(b.center),void 0!==b.zoom&&this.qf(b.zoom),void 0!==b.rotation&&yf(this,b.rotation),c&&c(!0)};function zf(a){xf(a,0,-a.a[0]);for(var b=0,c=a.g.length;b<c;++b){var d=a.g[b];d[0].callback&&d[0].callback(!1)}a.g.length=0}
l.Bc=function(){void 0!==this.C&&(cancelAnimationFrame(this.C),this.C=void 0);if(0<this.a[0]){for(var a=Date.now(),b=!1,c=this.g.length-1;0<=c;--c){for(var d=this.g[c],e=!0,f=0,g=d.length;f<g;++f){var h=d[f];if(!h.complete){b=a-h.start;b=0<h.duration?b/h.duration:1;1<=b?(h.complete=!0,b=1):e=!1;b=h.easing(b);if(h.Pb){var k=h.Pb[0],m=h.Pb[1];this.set("center",[k+b*(h.Rb[0]-k),m+b*(h.Rb[1]-m)])}h.Qb&&h.nb&&(k=1===b?h.nb:h.Qb+b*(h.nb-h.Qb),h.anchor&&this.set("center",Af(this,k,h.anchor)),this.set("resolution",
k));void 0!==h.yc&&void 0!==h.Sb&&(b=1===b?va(h.Sb+Math.PI,2*Math.PI)-Math.PI:h.yc+b*(h.Sb-h.yc),h.anchor&&this.set("center",Bf(this,b,h.anchor)),this.set("rotation",b));b=!0;if(!h.complete)break}}e&&(this.g[c]=null,xf(this,0,-1),(d=d[0].callback)&&d(!0))}this.g=this.g.filter(Boolean);b&&void 0===this.C&&(this.C=requestAnimationFrame(this.Bc))}};function Bf(a,b,c){var d=a.ja();if(void 0!==d){var e=[d[0]-c[0],d[1]-c[1]];se(e,b-wf(a));oe(e,c)}return e}
function Af(a,b,c){var d,e=a.ja();a=a.za();void 0!==e&&void 0!==a&&(d=[c[0]-b*(c[0]-e[0])/a,c[1]-b*(c[1]-e[1])/a]);return d}function Cf(a){var b=[100,100];a='.ol-viewport[data-view="'+w(a)+'"]';if(a=document.querySelector(a))a=getComputedStyle(a),b[0]=parseInt(a.width,10),b[1]=parseInt(a.height,10);return b}l.constrainResolution=function(a,b,c){return this.b.resolution(a,b||0,c||0)};l.constrainRotation=function(a,b){return this.b.rotation(a,b||0)};l.ja=function(){return this.get("center")};
l.Sd=function(a){a=a||Cf(this);var b=this.ja();x(b,1);var c=this.za();x(void 0!==c,2);var d=wf(this);x(void 0!==d,3);return Sa(b,c,d,a)};l.Kh=function(){return this.u};l.za=function(){return this.get("resolution")};l.Lh=function(){return this.i};function If(a,b,c){a=c||Cf(a);return Math.max(Xa(b)/a[0],Ta(b)/a[1])}function wf(a){return a.get("rotation")}function Jf(a){var b=a.ja(),c=a.u,d=a.za(),e=wf(a);return{center:b.slice(),projection:void 0!==c?c:null,resolution:d,rotation:e,zoom:a.ge()}}
l.ge=function(){var a,b=this.za();void 0!==b&&(a=this.he(b));return a};l.he=function(a){var b=this.o||0;if(this.i){var c=Sb(this.i,a,1);b+=c;var d=this.i[c];c=c==this.i.length-1?2:d/this.i[c+1]}else d=this.f,c=this.A;return b+Math.log(d/a)/Math.log(c)};
l.tg=function(a,b){b=b||{};var c=b.size;c||(c=Cf(this));if(a instanceof Re)if("Circle"===a.D()){a=a.I();var d=tf(a);d.rotate(wf(this),Ra(a))}else d=a;else x(Array.isArray(a),24),x(!Ya(a),25),d=tf(a);var e=void 0!==b.padding?b.padding:[0,0,0,0],f=void 0!==b.constrainResolution?b.constrainResolution:!0,g=void 0!==b.nearest?b.nearest:!1,h;void 0!==b.minResolution?h=b.minResolution:void 0!==b.maxZoom?h=this.constrainResolution(this.f,b.maxZoom-this.o,0):h=0;var k=d.aa(),m=wf(this);a=Math.cos(-m);m=Math.sin(-m);
var n=Infinity,p=Infinity,q=-Infinity,t=-Infinity;d=d.ga();for(var u=0,y=k.length;u<y;u+=d){var C=k[u]*a-k[u+1]*m,D=k[u]*m+k[u+1]*a;n=Math.min(n,C);p=Math.min(p,D);q=Math.max(q,C);t=Math.max(t,D)}c=If(this,[n,p,q,t],[c[0]-e[1]-e[3],c[1]-e[0]-e[2]]);c=isNaN(c)?h:Math.max(c,h);f&&(h=this.constrainResolution(c,0,0),!g&&h<c&&(h=this.constrainResolution(h,-1,0)),c=h);m=-m;h=(n+q)/2+(e[1]-e[3])/2*c;e=(p+t)/2+(e[0]-e[2])/2*c;a=[h*a-e*m,e*a+h*m];e=b.callback?b.callback:la;void 0!==b.duration?this.animate({resolution:c,
center:a,duration:b.duration,easing:b.easing},e):(Kf(this,c),this.Oa(a),setTimeout(e.bind(void 0,!0),0))};function vf(a){return!!a.ja()&&void 0!==a.za()}l.rotate=function(a,b){void 0!==b&&(b=Bf(this,a,b),this.Oa(b));yf(this,a)};l.Oa=function(a){this.set("center",a);0<this.a[0]&&zf(this)};function xf(a,b,c){a.a[b]+=c;a.c()}function Kf(a,b){a.set("resolution",b);0<a.a[0]&&zf(a)}function yf(a,b){a.set("rotation",b);0<a.a[0]&&zf(a)}l.qf=function(a){Kf(this,this.constrainResolution(this.f,a-this.o,0))};function Lf(a,b){var c=document.createElement("CANVAS");a&&(c.width=a);b&&(c.height=b);return c.getContext("2d")}function Mf(a){a&&a.parentNode&&a.parentNode.removeChild(a)};function Nf(a){Nc.call(this);var b=Za({},a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.maxResolution?a.maxResolution:Infinity;b.minResolution=void 0!==a.minResolution?a.minResolution:0;this.na(b);this.a={layer:this,fd:!0}}v(Nf,Nc);l=Nf.prototype;l.D=function(){return this.type};
function Of(a){a.a.opacity=ra(a.get("opacity"),0,1);a.a.ij=a.bd();a.a.visible=a.Hb();a.a.extent=a.I();a.a.zIndex=a.sa();a.a.maxResolution=a.get("maxResolution");a.a.minResolution=Math.max(a.get("minResolution"),0);return a.a}l.I=function(){return this.get("extent")};l.Hb=function(){return this.get("visible")};l.sa=function(){return this.get("zIndex")};l.oi=function(a){this.set("visible",a)};l.pf=function(a){this.set("zIndex",a)};function Pf(a){var b=a||{};a=Za({},b);delete a.layers;b=b.layers;Nf.call(this,a);this.g=[];this.b={};z(this,Pc(Qf),this.Ng,this);b?Array.isArray(b)?b=new Sc(b.slice(),{unique:!0}):x(b instanceof Sc,43):b=new Sc(void 0,{unique:!0});this.set(Qf,b)}v(Pf,Nf);l=Pf.prototype;l.fc=function(){this.c()};
l.Ng=function(){this.g.forEach(vc);this.g.length=0;var a=this.get(Qf);this.g.push(z(a,"add",this.Mg,this),z(a,"remove",this.Og,this));for(var b in this.b)this.b[b].forEach(vc);bb(this.b);a=a.a;var c;b=0;for(c=a.length;b<c;b++){var d=a[b];this.b[w(d).toString()]=[z(d,"propertychange",this.fc,this),z(d,"change",this.fc,this)]}this.c()};l.Mg=function(a){a=a.element;var b=w(a).toString();this.b[b]=[z(a,"propertychange",this.fc,this),z(a,"change",this.fc,this)];this.c()};
l.Og=function(a){a=w(a.element).toString();this.b[a].forEach(vc);delete this.b[a];this.c()};l.Zc=function(a){var b=void 0!==a?a:[],c=b.length;this.get(Qf).forEach(function(a){a.Zc(b)});a=Of(this);var d;for(d=b.length;c<d;c++){var e=b[c];e.opacity*=a.opacity;e.visible=e.visible&&a.visible;e.maxResolution=Math.min(e.maxResolution,a.maxResolution);e.minResolution=Math.max(e.minResolution,a.minResolution);void 0!==a.extent&&(e.extent=void 0!==e.extent?Ua(e.extent,a.extent):a.extent)}return b};l.bd=function(){return"ready"};
var Qf="layers";var Rf=[],Sf=[];function Tf(a,b){switch(a){case "MAP_RENDERER":a=Rf;a.push(b);break;case "LAYER_RENDERER":a=Sf;a.push(b);break;default:throw Error("Unsupported plugin type: "+a);}}function Uf(){for(var a=[Vf,Wf,Xf,Yf],b=0,c=a.length;b<c;++b)Tf("LAYER_RENDERER",a[b])};function Zf(a){Nc.call(this);var b=$f(a);this.qb=void 0!==a.loadTilesWhileAnimating?a.loadTilesWhileAnimating:!1;this.rb=void 0!==a.loadTilesWhileInteracting?a.loadTilesWhileInteracting:!1;this.Dc=void 0!==a.pixelRatio?a.pixelRatio:jd;this.Fc=b.logos;this.Ha=function(){this.o=void 0;this.bj.call(this,Date.now())}.bind(this);this.Ka=Ke();this.Jc=Ke();this.pb=0;this.A=this.J=this.K=this.f=this.b=null;this.a=document.createElement("DIV");this.a.className="ol-viewport"+(md?" ol-touch":"");this.a.style.position=
"relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";this.a.style.msTouchAction="none";this.a.style.touchAction="none";this.u=document.createElement("DIV");this.u.className="ol-overlaycontainer";this.a.appendChild(this.u);this.B=document.createElement("DIV");this.B.className="ol-overlaycontainer-stopevent";for(var c="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" "),d=0,e=c.length;d<e;++d)z(this.B,c[d],Jc);this.a.appendChild(this.B);
this.fa=new Yd(this,a.moveTolerance);for(var f in pd)z(this.fa,pd[f],this.ie,this);this.ea=b.keyboardEventTarget;this.C=null;z(this.a,"wheel",this.vb,this);z(this.a,"mousewheel",this.vb,this);this.controls=b.controls||new Sc;this.interactions=b.interactions||new Sc;this.i=b.overlays;this.Ue={};this.jb=b.kh.create(this.a,this);this.M=null;this.la=[];this.xa=new ee(this.Gg.bind(this),this.dh.bind(this));this.X={};z(this,Pc("layergroup"),this.Kg,this);z(this,Pc("view"),this.fh,this);z(this,Pc("size"),
this.Xg,this);z(this,Pc("target"),this.bh,this);this.na(b.values);this.controls.forEach(function(a){a.setMap(this)},this);z(this.controls,"add",function(a){a.element.setMap(this)},this);z(this.controls,"remove",function(a){a.element.setMap(null)},this);this.interactions.forEach(function(a){a.setMap(this)},this);z(this.interactions,"add",function(a){a.element.setMap(this)},this);z(this.interactions,"remove",function(a){a.element.setMap(null)},this);this.i.forEach(this.Pd,this);z(this.i,"add",function(a){this.Pd(a.element)},
this);z(this.i,"remove",function(a){var b=a.element.id;void 0!==b&&delete this.Ue[b.toString()];a.element.setMap(null)},this)}v(Zf,Nc);l=Zf.prototype;l.$f=function(a){this.controls.push(a)};l.ag=function(a){this.interactions.push(a)};l.bg=function(a){ag(this).get(Qf).push(a)};l.cg=function(a){this.i.push(a)};l.Pd=function(a){var b=a.id;void 0!==b&&(this.Ue[b.toString()]=a);a.setMap(this)};
l.ca=function(){Cc(this.fa);Cc(this.jb);Ac(this.a,"wheel",this.vb,this);Ac(this.a,"mousewheel",this.vb,this);void 0!==this.g&&(window.removeEventListener("resize",this.g,!1),this.g=void 0);this.o&&(cancelAnimationFrame(this.o),this.o=void 0);this.set("target",null);Nc.prototype.ca.call(this)};l.Wc=function(a,b,c){if(this.b)return a=this.Ja(a),c=void 0!==c?c:{},this.jb.Ea(a,this.b,void 0!==c.hitTolerance?c.hitTolerance*this.b.pixelRatio:0,b,null,void 0!==c.layerFilter?c.layerFilter:Ge,null)};
l.Ih=function(a,b,c,d,e){if(this.b){a:{var f=this.jb,g=this.b;c=void 0!==c?c:null;d=void 0!==d?d:Ge;e=void 0!==e?e:null;var h=g.viewState.resolution,k=g.layerStatesArray,m=k.length;a=Oe(g.pixelToCoordinateTransform,a.slice());for(--m;0<=m;--m){var n=k[m];var p=n.layer;if(bg(n,h)&&d.call(e,p)&&(n=cg(f,p).C(a,g,b,c))){b=n;break a}}b=void 0}return b}};function ad(a,b){a=a.a.getBoundingClientRect();b=b.changedTouches?b.changedTouches[0]:b;return[b.clientX-a.left,b.clientY-a.top]}l.cd=function(){return this.get("target")};
function dg(a){a=a.cd();return void 0!==a?"string"===typeof a?document.getElementById(a):a:null}l.Ja=function(a){var b=this.b;return b?Oe(b.pixelToCoordinateTransform,a.slice()):null};l.Eg=function(){return this.i};function ag(a){return a.get("layergroup")}l.Jh=function(){return ag(this).get(Qf)};function eg(a,b){return(a=a.b)?Oe(a.coordinateToPixelTransform,b.slice(0,2)):null}l.ad=function(){return this.jb};l.wb=function(){return this.get("size")};l.Z=function(){return this.get("view")};
l.Gg=function(a,b,c,d){var e=this.b;if(!(e&&b in e.wantedTiles&&e.wantedTiles[b][a.Sa()]))return Infinity;a=c[0]-e.focus[0];c=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(a*a+c*c)/d};l.vb=function(a,b){a=new $c(b||a.type,this,a);this.ie(a)};l.ie=function(a){if(this.b){this.M=a.coordinate;a.frameState=this.b;var b=this.interactions.a,c;if(!1!==this.l(a))for(c=b.length-1;0<=c;c--){var d=b[c];if(d.get("active")&&!d.handleEvent(a))break}}};
l.Wg=function(){var a=this.b,b=this.xa;if(0!==b.a.length){var c=16,d=c;if(a){var e=a.viewHints;e[0]&&(c=this.qb?8:0,d=2);e[1]&&(c=this.rb?8:0,d=2)}if(b.g<c){e=b.i;var f=b.a,g=b.c,h=0,k=f.length,m;for(m=0;m<k;++m){var n=f[m];var p=e(n);Infinity==p?delete b.l[b.j(n)]:(g[h]=p,f[h++]=n)}f.length=h;g.length=h;for(e=(b.a.length>>1)-1;0<=e;e--)de(b,e);e=0;for(f=!1;b.g<c&&e<d&&0<b.a.length;)g=b,k=g.a,n=g.c,h=k[0],1==k.length?(k.length=0,n.length=0):(k[0]=k.pop(),n[0]=n.pop(),de(g,0)),k=g.j(h),delete g.l[k],
h=h[0],k=h.Sa(),g=h.state,5===g?f=!0:0!==g||k in b.b||(b.b[k]=!0,++b.g,++e,h.load());0===e&&f&&b.o()}}b=this.la;d=0;for(c=b.length;d<c;++d)b[d](this,a);b.length=0};l.Xg=function(){this.render()};
l.bh=function(){var a;this.cd()&&(a=dg(this));if(this.C){for(var b=0,c=this.C.length;b<c;++b)vc(this.C[b]);this.C=null}a?(a.appendChild(this.a),a=this.ea?this.ea:a,this.C=[z(a,"keydown",this.vb,this),z(a,"keypress",this.vb,this)],this.g||(this.g=this.xf.bind(this),window.addEventListener("resize",this.g,!1))):(Mf(this.a),void 0!==this.g&&(window.removeEventListener("resize",this.g,!1),this.g=void 0));this.xf()};l.dh=function(){this.render()};l.ke=function(){this.render()};
l.fh=function(){this.K&&(vc(this.K),this.K=null);this.J&&(vc(this.J),this.J=null);var a=this.Z();a&&(this.a.setAttribute("data-view",w(a)),this.K=z(a,"propertychange",this.ke,this),this.J=z(a,"change",this.ke,this));this.render()};l.Kg=function(){this.A&&(this.A.forEach(vc),this.A=null);var a=ag(this);a&&(this.A=[z(a,"propertychange",this.render,this),z(a,"change",this.render,this)]);this.render()};l.render=function(){void 0===this.o&&(this.o=requestAnimationFrame(this.Ha))};l.Yi=function(a){return this.controls.remove(a)};
l.Zi=function(a){return this.interactions.remove(a)};l.$i=function(a){return this.i.remove(a)};
l.bj=function(a){var b,c=this.wb(),d=this.Z(),e=Ba(),f=this.b,g=null;if(void 0!==c&&0<c[0]&&0<c[1]&&d&&vf(d)){g=this.b?this.b.viewHints:void 0;void 0!==g?(g[0]=d.a[0],g[1]=d.a[1]):g=d.a.slice();var h=ag(this).Zc(),k={};var m=0;for(b=h.length;m<b;++m)k[w(h[m].layer)]=h[m];m=Jf(d);g={animate:!1,attributions:{},coordinateToPixelTransform:this.Ka,extent:e,focus:this.M?this.M:m.center,index:this.pb++,layerStates:k,layerStatesArray:h,logos:Za({},this.Fc),pixelRatio:this.Dc,pixelToCoordinateTransform:this.Jc,
postRenderFunctions:[],size:c,skippedFeatureUids:this.X,tileQueue:this.xa,time:a,usedTiles:{},viewState:m,viewHints:g,wantedTiles:{}}}g&&(g.extent=Sa(m.center,m.resolution,m.rotation,g.size,e));this.b=g;this.jb.ff(g);g&&(g.animate&&this.render(),Array.prototype.push.apply(this.la,g.postRenderFunctions),!f||this.f&&(Ya(this.f)||Oa(g.extent,this.f))||(this.l(new Zc("movestart",this,f)),this.f=Ka(this.f)),!this.f||g.viewHints[0]||g.viewHints[1]||Oa(g.extent,this.f)||(this.l(new Zc("moveend",this,g)),
Fa(g.extent,this.f)));this.l(new Zc("postrender",this,g));setTimeout(this.Wg.bind(this),0)};l.rf=function(a){a=w(a).toString();this.X[a]=!0;this.render()};
l.xf=function(){var a=dg(this);if(a){var b=getComputedStyle(a);this.set("size",[a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)])}else this.set("size",void 0)};l.vf=function(a){a=w(a).toString();delete this.X[a];this.render()};var fg=["canvas","webgl"];
function $f(a){var b=null;void 0!==a.keyboardEventTarget&&(b="string"===typeof a.keyboardEventTarget?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);var c={},d={};if(void 0===a.logo||"boolean"===typeof a.logo&&a.logo)d["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"https://openlayers.org/";else{var e=a.logo;"string"===typeof e?d[e]="":e instanceof HTMLElement?d[w(e).toString()]=e:e&&(x("string"==typeof e.href,44),x("string"==typeof e.src,45),d[e.src]=e.href)}e=a.layers instanceof Pf?a.layers:new Pf({layers:a.layers});c.layergroup=e;c.target=a.target;c.view=void 0!==a.view?a.view:new uf;var f;void 0!==a.renderer?(Array.isArray(a.renderer)?f=a.renderer:"string"===typeof a.renderer?f=[a.renderer]:x(!1,46),0<=f.indexOf("dom")&&(f=f.concat(fg))):f=fg;e=0;var g=
f.length;a:for(;e<g;++e)for(var h=f[e],k=0,m=Rf.length;k<m;++k){var n=Rf[k];if(n.handles(h)){var p=n;break a}}if(!p)throw Error("Unable to create a map renderer for types: "+f.join(", "));if(void 0!==a.controls)if(Array.isArray(a.controls))var q=new Sc(a.controls.slice());else x(a.controls instanceof Sc,47),q=a.controls;if(void 0!==a.interactions)if(Array.isArray(a.interactions))var t=new Sc(a.interactions.slice());else x(a.interactions instanceof Sc,48),t=a.interactions;void 0!==a.overlays?Array.isArray(a.overlays)?
a=new Sc(a.overlays.slice()):(x(a.overlays instanceof Sc,49),a=a.overlays):a=new Sc;return{controls:q,interactions:t,keyboardEventTarget:b,logos:d,overlays:a,kh:p,values:c}};function gg(a){Nc.call(this);this.element=a.element?a.element:null;this.g=this.J=null;this.C=[];this.render=a.render?a.render:la;a.target&&(a=a.target,this.J="string"===typeof a?document.getElementById(a):a)}v(gg,Nc);gg.prototype.ca=function(){Mf(this.element);Nc.prototype.ca.call(this)};
gg.prototype.setMap=function(a){this.g&&Mf(this.element);for(var b=0,c=this.C.length;b<c;++b)vc(this.C[b]);this.C.length=0;if(this.g=a)(this.J?this.J:a.B).appendChild(this.element),this.render!==la&&this.C.push(z(a,"postrender",this.render,this)),a.render()};var hg=function(){var a,b={};return function(c){a||(a=document.createElement("div").style);if(!(c in b)){a.font=c;var d=a.fontFamily;a.font="";if(!d)return null;b[c]=d.split(/,\s?/)}return b[c]}}();function ig(a){var b=Za({},a);delete b.source;Nf.call(this,b);this.C=this.f=this.g=null;a.map&&this.setMap(a.map);z(this,Pc("source"),this.$g,this);this.lf(a.source?a.source:null)}v(ig,Nf);function bg(a,b){return a.visible&&b>=a.minResolution&&b<a.maxResolution}l=ig.prototype;l.Zc=function(a){a=a?a:[];a.push(Of(this));return a};l.$=function(){return this.get("source")||null};l.bd=function(){var a=this.$();return a?a.xa:"undefined"};l.Zg=function(){this.c()};
l.$g=function(){this.C&&(vc(this.C),this.C=null);var a=this.$();a&&(this.C=z(a,"change",this.Zg,this));this.c()};l.setMap=function(a){this.g&&(vc(this.g),this.g=null);a||this.c();this.f&&(vc(this.f),this.f=null);a&&(this.g=z(a,"precompose",function(a){var b=Of(this);b.fd=!1;b.zIndex=Infinity;a.frameState.layerStatesArray.push(b);a.frameState.layerStates[w(this)]=b},this),this.f=z(this,"change",a.render,a),this.c())};l.lf=function(a){this.set("source",a)};function jg(a){a=a?a:{};this.i=document.createElement("UL");this.f=document.createElement("LI");this.i.appendChild(this.f);this.f.style.display="none";this.a=void 0!==a.collapsed?a.collapsed:!0;this.b=void 0!==a.collapsible?a.collapsible:!0;this.b||(this.a=!1);var b=void 0!==a.className?a.className:"ol-attribution",c=void 0!==a.tipLabel?a.tipLabel:"Attributions",d=void 0!==a.collapseLabel?a.collapseLabel:"\u00bb";"string"===typeof d?(this.o=document.createElement("span"),this.o.textContent=d):this.o=
d;d=void 0!==a.label?a.label:"i";"string"===typeof d?(this.B=document.createElement("span"),this.B.textContent=d):this.B=d;var e=this.b&&!this.a?this.o:this.B;d=document.createElement("button");d.setAttribute("type","button");d.title=c;d.appendChild(e);z(d,"click",this.M,this);c=document.createElement("div");c.className=b+" ol-unselectable ol-control"+(this.a&&this.b?" ol-collapsed":"")+(this.b?"":" ol-uncollapsible");c.appendChild(this.i);c.appendChild(d);gg.call(this,{element:c,render:a.render?
a.render:kg,target:a.target});this.A=[];this.u=!0;this.K={}}v(jg,gg);
function kg(a){if(a=a.frameState){for(var b={},c=[],d=a.layerStatesArray,e=a.viewState.resolution,f=0,g=d.length;f<g;++f){var h=d[f];if(bg(h,e)&&(h=h.layer.$())&&(h=h.ea)&&(h=h(a)))if(Array.isArray(h))for(var k=0,m=h.length;k<m;++k)h[k]in b||(c.push(h[k]),b[h[k]]=!0);else h in b||(c.push(h),b[h]=!0)}if(!Vb(c,this.A)){for(;this.i.lastChild!==this.f;)this.i.removeChild(this.i.lastChild);b=0;for(d=c.length;b<d;++b)e=document.createElement("LI"),e.innerHTML=c[b],this.i.appendChild(e);0===c.length&&0<
this.A.length?this.element.classList.add("ol-logo-only"):0===this.A.length&&0<c.length&&this.element.classList.remove("ol-logo-only");b=0<c.length||!db(a.logos);this.u!=b&&(this.element.style.display=b?"":"none",this.u=b);this.A=c;a=a.logos;c=this.K;for(p in c)p in a||(Mf(c[p]),delete c[p]);for(var n in a)if(d=a[n],d instanceof HTMLElement&&(this.f.appendChild(d),c[n]=d),!(n in c)){var p=new Image;p.src=n;""===d?b=p:(b=document.createElement("a"),b.href=d,b.appendChild(p));this.f.appendChild(b);c[n]=
b}this.f.style.display=db(a)?"none":""}}else this.u&&(this.element.style.display="none",this.u=!1)}jg.prototype.M=function(a){a.preventDefault();lg(this)};function lg(a){a.element.classList.toggle("ol-collapsed");if(a.a){var b=a.B,c=b.parentNode;c&&c.replaceChild(a.o,b)}else b=a.o,(c=b.parentNode)&&c.replaceChild(a.B,b);a.a=!a.a}jg.prototype.ea=function(a){this.b!==a&&(this.b=a,this.element.classList.toggle("ol-uncollapsible"),!a&&this.a&&lg(this))};
jg.prototype.X=function(a){this.b&&this.a!==a&&lg(this)};function mg(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-rotate",c=void 0!==a.label?a.label:"\u21e7";this.a=null;"string"===typeof c?(this.a=document.createElement("span"),this.a.className="ol-compass",this.a.textContent=c):(this.a=c,this.a.classList.add("ol-compass"));var d=a.tipLabel?a.tipLabel:"Reset rotation";c=document.createElement("button");c.className=b+"-reset";c.setAttribute("type","button");c.title=d;c.appendChild(this.a);z(c,"click",mg.prototype.B,this);d=document.createElement("div");
d.className=b+" ol-unselectable ol-control";d.appendChild(c);b=a.render?a.render:ng;this.f=a.resetNorth?a.resetNorth:void 0;gg.call(this,{element:d,render:b,target:a.target});this.i=void 0!==a.duration?a.duration:250;this.b=void 0!==a.autoHide?a.autoHide:!0;this.o=void 0;this.b&&this.element.classList.add("ol-hidden")}v(mg,gg);mg.prototype.B=function(a){a.preventDefault();void 0!==this.f?this.f():(a=this.g.Z())&&void 0!==wf(a)&&(0<this.i?a.animate({rotation:0,duration:this.i,easing:xe}):yf(a,0))};
function ng(a){if(a=a.frameState){a=a.viewState.rotation;if(a!=this.o){var b="rotate("+a+"rad)";if(this.b){var c=this.element.classList.contains("ol-hidden");c||0!==a?c&&0!==a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.a.style.msTransform=b;this.a.style.webkitTransform=b;this.a.style.transform=b}this.o=a}};function og(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-zoom",c=void 0!==a.delta?a.delta:1,d=void 0!==a.zoomInLabel?a.zoomInLabel:"+",e=void 0!==a.zoomOutLabel?a.zoomOutLabel:"\u2212",f=void 0!==a.zoomInTipLabel?a.zoomInTipLabel:"Zoom in",g=void 0!==a.zoomOutTipLabel?a.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=b+"-in";h.setAttribute("type","button");h.title=f;h.appendChild("string"===typeof d?document.createTextNode(d):d);z(h,"click",og.prototype.b.bind(this,
c));d=document.createElement("button");d.className=b+"-out";d.setAttribute("type","button");d.title=g;d.appendChild("string"===typeof e?document.createTextNode(e):e);z(d,"click",og.prototype.b.bind(this,-c));c=document.createElement("div");c.className=b+" ol-unselectable ol-control";c.appendChild(h);c.appendChild(d);gg.call(this,{element:c,target:a.target});this.a=void 0!==a.duration?a.duration:250}v(og,gg);
og.prototype.b=function(a,b){b.preventDefault();if(b=this.g.Z()){var c=b.za();c&&(a=b.constrainResolution(c,a),0<this.a?(0<b.a[0]&&zf(b),b.animate({resolution:a,duration:this.a,easing:xe})):Kf(b,a))}};function pg(a){a=a?a:{};var b=new Sc;(void 0!==a.zoom?a.zoom:1)&&b.push(new og(a.zoomOptions));(void 0!==a.rotate?a.rotate:1)&&b.push(new mg(a.rotateOptions));(void 0!==a.attribution?a.attribution:1)&&b.push(new jg(a.attributionOptions));return b};function qg(){this.a=[];this.c=this.l=0}function rg(a){a.a.length=0;a.l=0;a.c=0}function sg(a){if(6>a.a.length)return!1;var b=Date.now()-100,c=a.a.length-3;if(a.a[c+2]<b)return!1;for(var d=c-3;0<d&&a.a[d+2]>b;)d-=3;b=a.a[c+2]-a.a[d+2];if(b<1E3/60)return!1;var e=a.a[c]-a.a[d];c=a.a[c+1]-a.a[d+1];a.l=Math.atan2(c,e);a.c=Math.sqrt(e*e+c*c)/b;return.05<a.c};function tg(a){Nc.call(this);this.C=null;this.gb(!0);this.handleEvent=a.handleEvent}v(tg,Nc);tg.prototype.gb=function(a){this.set("active",a)};tg.prototype.setMap=function(a){this.C=a};function ug(a,b,c,d){if(void 0!==b){var e=wf(a),f=a.ja();void 0!==e&&f&&0<d?a.animate({rotation:b,anchor:c,duration:d,easing:xe}):a.rotate(b,c)}}
function vg(a,b,c,d){var e=a.za();b=a.constrainResolution(e,b,0);if(c&&void 0!==b&&b!==e){var f=a.ja();c=Af(a,b,c);c=a.b.center(c);c=[(b*f[0]-e*c[0])/(b-e),(b*f[1]-e*c[1])/(b-e)]}wg(a,b,c,d)}function wg(a,b,c,d){if(b){var e=a.za(),f=a.ja();void 0!==e&&f&&b!==e&&d?a.animate({resolution:b,anchor:c,duration:d,easing:xe}):(c&&(c=Af(a,b,c),a.Oa(c)),Kf(a,b))}};function xg(a){a=a?a:{};this.a=a.delta?a.delta:1;tg.call(this,{handleEvent:yg});this.b=void 0!==a.duration?a.duration:250}v(xg,tg);function yg(a){var b=!1,c=a.originalEvent;if("dblclick"==a.type){b=a.coordinate;c=c.shiftKey?-this.a:this.a;var d=a.map.Z();vg(d,c,b,this.b);a.preventDefault();b=!0}return!b};function zg(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Ag(a){a=a.originalEvent;return 0==a.button&&!(hd&&id&&a.ctrlKey)}function Bg(a){return"singleclick"==a.type}function Cg(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function Dg(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Eg(a){a=a.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}
function Fg(a){x(a.a,56);return"mouse"==a.a.pointerType}function Gg(a){a=a.a;return a.isPrimary&&0===a.button};function Hg(a){a=a?a:{};tg.call(this,{handleEvent:a.handleEvent?a.handleEvent:Ig});this.Jc=a.handleDownEvent?a.handleDownEvent:He;this.eg=a.handleDragEvent?a.handleDragEvent:la;this.fg=a.handleMoveEvent?a.handleMoveEvent:la;this.pg=a.handleUpEvent?a.handleUpEvent:He;this.B=!1;this.X={};this.g=[]}v(Hg,tg);function Jg(a){for(var b=a.length,c=0,d=0,e=0;e<b;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}
function Ig(a){if(!(a instanceof qd))return!0;var b=!1,c=a.type;if("pointerdown"===c||"pointerdrag"===c||"pointerup"===c){c=a.a;var d=c.pointerId.toString();"pointerup"==a.type?delete this.X[d]:"pointerdown"==a.type?this.X[d]=c:d in this.X&&(this.X[d]=c);this.g=cb(this.X)}this.B?"pointerdrag"==a.type?this.eg(a):"pointerup"==a.type&&(this.B=this.pg(a)&&0<this.g.length):"pointerdown"==a.type?(this.B=a=this.Jc(a),b=this.mb(a)):"pointermove"==a.type&&this.fg(a);return!b}Hg.prototype.mb=function(a){return a};function Kg(a){Hg.call(this,{handleDownEvent:Lg,handleDragEvent:Mg,handleUpEvent:Ng});a=a?a:{};this.a=a.kinetic;this.b=null;this.o=a.condition?a.condition:Cg;this.f=!1}v(Kg,Hg);function Mg(a){var b=this.g,c=Jg(b);if(b.length==this.i){if(this.a&&this.a.a.push(c[0],c[1],Date.now()),this.b){var d=this.b[0]-c[0],e=c[1]-this.b[1];a=a.map.Z();var f=Jf(a);d=[d,e];te(d,f.resolution);se(d,f.rotation);oe(d,f.center);d=a.b.center(d);a.Oa(d)}}else this.a&&rg(this.a);this.b=c;this.i=b.length}
function Ng(a){var b=a.map;a=b.Z();if(0===this.g.length){if(!this.f&&this.a&&sg(this.a)){var c=(.05-this.a.c)/-.005;var d=this.a.l,e=a.ja();e=eg(b,e);b=b.Ja([e[0]-c*Math.cos(d),e[1]-c*Math.sin(d)]);a.animate({center:a.b.center(b),duration:500,easing:xe})}xf(a,1,-1);return!1}this.a&&rg(this.a);this.b=null;return!0}
function Lg(a){if(0<this.g.length&&this.o(a)){var b=a.map.Z();this.b=null;this.B||xf(b,1,1);0<b.a[0]&&b.Oa(a.frameState.viewState.center);this.a&&rg(this.a);this.f=1<this.g.length;return!0}return!1}Kg.prototype.mb=He;function Og(a){a=a?a:{};Hg.call(this,{handleDownEvent:Pg,handleDragEvent:Qg,handleUpEvent:Rg});this.b=a.condition?a.condition:zg;this.a=void 0;this.f=void 0!==a.duration?a.duration:250}v(Og,Hg);function Qg(a){if(Fg(a)){var b=a.map,c=b.Z();if(c.b.rotation!==je){b=b.wb();a=a.pixel;a=Math.atan2(b[1]/2-a[1],a[0]-b[0]/2);if(void 0!==this.a){b=a-this.a;var d=wf(c);ug(c,d-b)}this.a=a}}}
function Rg(a){if(!Fg(a))return!0;a=a.map.Z();xf(a,1,-1);var b=wf(a),c=this.f;b=a.constrainRotation(b,0);ug(a,b,void 0,c);return!1}function Pg(a){return Fg(a)&&Ag(a)&&this.b(a)?(xf(a.map.Z(),1,1),this.a=void 0,!0):!1}Og.prototype.mb=He;function Sg(a){this.bb=null;this.c=document.createElement("div");this.c.style.position="absolute";this.c.className="ol-box "+a;this.l=this.j=this.a=null}v(Sg,Bc);Sg.prototype.ca=function(){this.setMap(null)};function Tg(a){var b=a.j,c=a.l;a=a.c.style;a.left=Math.min(b[0],c[0])+"px";a.top=Math.min(b[1],c[1])+"px";a.width=Math.abs(c[0]-b[0])+"px";a.height=Math.abs(c[1]-b[1])+"px"}
Sg.prototype.setMap=function(a){if(this.a){this.a.u.removeChild(this.c);var b=this.c.style;b.left=b.top=b.width=b.height="inherit"}(this.a=a)&&this.a.u.appendChild(this.c)};function Ug(a){var b=a.j,c=a.l;b=[b,[b[0],c[1]],c,[c[0],b[1]]].map(a.a.Ja,a.a);b[4]=b[0].slice();a.bb?a.bb.Y([b]):a.bb=new A([b])}Sg.prototype.O=function(){return this.bb};function Vg(a){Hg.call(this,{handleDownEvent:Wg,handleDragEvent:Xg,handleUpEvent:Yg});a=a?a:{};this.a=new Sg(a.className||"ol-dragbox");this.o=void 0!==a.minArea?a.minArea:64;this.b=null;this.u=a.condition?a.condition:Ge;this.i=a.boxEndCondition?a.boxEndCondition:Zg}v(Vg,Hg);function Zg(a,b,c){a=c[0]-b[0];b=c[1]-b[1];return a*a+b*b>=this.o}function Xg(a){if(Fg(a)){var b=this.a,c=a.pixel;b.j=this.b;b.l=c;Ug(b);Tg(b);this.l(new $g(ah,a.coordinate,a))}}Vg.prototype.O=function(){return this.a.O()};
Vg.prototype.f=la;function Yg(a){if(!Fg(a))return!0;this.a.setMap(null);this.i(a,this.b,a.pixel)&&(this.f(a),this.l(new $g(bh,a.coordinate,a)));return!1}function Wg(a){if(Fg(a)&&Ag(a)&&this.u(a)){this.b=a.pixel;this.a.setMap(a.map);var b=this.a,c=this.b;b.j=this.b;b.l=c;Ug(b);Tg(b);this.l(new $g(ch,a.coordinate,a));return!0}return!1}var ch="boxstart",ah="boxdrag",bh="boxend";function $g(a,b,c){Gc.call(this,a);this.coordinate=b;this.mapBrowserEvent=c}v($g,Gc);function dh(a){a=a?a:{};var b=a.condition?a.condition:Dg;this.A=void 0!==a.duration?a.duration:200;this.J=void 0!==a.out?a.out:!1;Vg.call(this,{condition:b,className:a.className||"ol-dragzoom"})}v(dh,Vg);
dh.prototype.f=function(){var a=this.C,b=a.Z(),c=a.wb(),d=this.O().I();if(this.J){var e=b.Sd(c);d=[eg(a,Qa(d)),eg(a,[d[2],d[3]])];a=Ka(void 0);var f;var g=0;for(f=d.length;g<f;++g)Da(a,d[g]);a=1/If(b,a,c);d=(e[2]-e[0])/2*(a-1);a=(e[3]-e[1])/2*(a-1);e[0]-=d;e[2]+=d;e[1]-=a;e[3]+=a;d=e}c=b.constrainResolution(If(b,d,c));e=Ra(d);e=b.b.center(e);b.animate({resolution:c,center:e,duration:this.A,easing:xe})};function eh(a){tg.call(this,{handleEvent:fh});a=a||{};this.a=function(a){return Cg(a)&&Eg(a)};this.b=void 0!==a.condition?a.condition:this.a;this.g=void 0!==a.duration?a.duration:100;this.f=void 0!==a.pixelDelta?a.pixelDelta:128}v(eh,tg);
function fh(a){var b=!1;if("keydown"==a.type){var c=a.originalEvent.keyCode;if(this.b(a)&&(40==c||37==c||39==c||38==c)){b=a.map.Z();var d=b.za()*this.f,e=0,f=0;40==c?f=-d:37==c?e=-d:39==c?e=d:f=d;d=[e,f];se(d,wf(b));c=this.g;if(e=b.ja())d=b.b.center([e[0]+d[0],e[1]+d[1]]),c?b.animate({duration:c,easing:Fe,center:d}):b.Oa(d);a.preventDefault();b=!0}}return!b};function gh(a){tg.call(this,{handleEvent:hh});a=a?a:{};this.b=a.condition?a.condition:Eg;this.a=a.delta?a.delta:1;this.g=void 0!==a.duration?a.duration:100}v(gh,tg);function hh(a){var b=!1;if("keydown"==a.type||"keypress"==a.type){var c=a.originalEvent.charCode;!this.b(a)||43!=c&&45!=c||(b=43==c?this.a:-this.a,c=a.map.Z(),vg(c,b,void 0,this.g),a.preventDefault(),b=!0)}return!b};function ih(a){tg.call(this,{handleEvent:jh});a=a||{};this.g=0;this.B=void 0!==a.duration?a.duration:250;this.K=void 0!==a.timeout?a.timeout:80;this.M=void 0!==a.useAnchor?a.useAnchor:!0;this.J=a.constrainResolution||!1;this.a=null;this.i=this.f=this.o=this.b=void 0}v(ih,tg);
function jh(a){var b=a.type;if("wheel"!==b&&"mousewheel"!==b)return!0;a.preventDefault();b=a.map;var c=a.originalEvent;this.M&&(this.a=a.coordinate);if("wheel"==a.type){var d=c.deltaY;fd&&c.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(d/=jd);c.deltaMode===WheelEvent.DOM_DELTA_LINE&&(d*=40)}else"mousewheel"==a.type&&(d=-c.wheelDeltaY,gd&&(d/=3));if(0===d)return!1;a=Date.now();void 0===this.b&&(this.b=a);if(!this.f||400<a-this.b)this.f=4>Math.abs(d)?kh:lh;if(this.f===kh){b=b.Z();this.i?clearTimeout(this.i):
xf(b,1,1);this.i=setTimeout(this.u.bind(this),400);c=b.za()*Math.pow(2,d/300);var e=b.B,f=b.f,g=0;c<e?(c=Math.max(c,e/1.5),g=1):c>f&&(c=Math.min(c,1.5*f),g=-1);if(this.a){var h=Af(b,c,this.a);b.Oa(b.b.center(h))}Kf(b,c);0===g&&this.J&&b.animate({resolution:b.constrainResolution(c,0<d?-1:1),easing:xe,anchor:this.a,duration:this.B});0<g?b.animate({resolution:e,easing:xe,anchor:this.a,duration:500}):0>g&&b.animate({resolution:f,easing:xe,anchor:this.a,duration:500});this.b=a;return!1}this.g+=d;d=Math.max(this.K-
(a-this.b),0);clearTimeout(this.o);this.o=setTimeout(this.A.bind(this,b),d);return!1}ih.prototype.u=function(){this.i=void 0;xf(this.C.Z(),1,-1)};ih.prototype.A=function(a){a=a.Z();0<a.a[0]&&zf(a);vg(a,-ra(this.g,-1,1),this.a,this.B);this.f=void 0;this.g=0;this.a=null;this.o=this.b=void 0};var kh="trackpad",lh="wheel";function mh(a){Hg.call(this,{handleDownEvent:nh,handleDragEvent:oh,handleUpEvent:ph});a=a||{};this.b=null;this.f=void 0;this.a=!1;this.i=0;this.u=void 0!==a.threshold?a.threshold:.3;this.o=void 0!==a.duration?a.duration:250}v(mh,Hg);
function oh(a){var b=0,c=this.g[0],d=this.g[1];c=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);void 0!==this.f&&(b=c-this.f,this.i+=b,!this.a&&Math.abs(this.i)>this.u&&(this.a=!0));this.f=c;a=a.map;c=a.Z();if(c.b.rotation!==je){d=a.a.getBoundingClientRect();var e=Jg(this.g);e[0]-=d.left;e[1]-=d.top;this.b=a.Ja(e);this.a&&(d=wf(c),a.render(),ug(c,d+b,this.b))}}
function ph(a){if(2>this.g.length){a=a.map.Z();xf(a,1,-1);if(this.a){var b=wf(a),c=this.b,d=this.o;b=a.constrainRotation(b,0);ug(a,b,c,d)}return!1}return!0}function nh(a){return 2<=this.g.length?(a=a.map,this.b=null,this.f=void 0,this.a=!1,this.i=0,this.B||xf(a.Z(),1,1),!0):!1}mh.prototype.mb=He;function qh(a){Hg.call(this,{handleDownEvent:rh,handleDragEvent:sh,handleUpEvent:th});a=a?a:{};this.i=a.constrainResolution||!1;this.b=null;this.o=void 0!==a.duration?a.duration:400;this.a=void 0;this.f=1}v(qh,Hg);
function sh(a){var b=1,c=this.g[0],d=this.g[1],e=c.clientX-d.clientX;c=c.clientY-d.clientY;e=Math.sqrt(e*e+c*c);void 0!==this.a&&(b=this.a/e);this.a=e;a=a.map;e=a.Z();d=e.za();var f=e.f,g=e.B;c=d*b;c>f?(b=f/d,c=f):c<g&&(b=g/d,c=g);1!=b&&(this.f=b);b=a.a.getBoundingClientRect();d=Jg(this.g);d[0]-=b.left;d[1]-=b.top;this.b=a.Ja(d);a.render();wg(e,c,this.b)}
function th(a){if(2>this.g.length){a=a.map.Z();xf(a,1,-1);var b=a.za();if(this.i||b<a.B||b>a.f){var c=this.b,d=this.o;b=a.constrainResolution(b,0,this.f-1);wg(a,b,c,d)}return!1}return!0}function rh(a){return 2<=this.g.length?(a=a.map,this.b=null,this.a=void 0,this.f=1,this.B||xf(a.Z(),1,1),!0):!1}qh.prototype.mb=He;function uh(a,b,c,d,e){Gc.call(this,a);this.vectorContext=b;this.frameState=c;this.context=d;this.glContext=e}v(uh,Gc);function vh(a){Kc.call(this);this.highWaterMark=void 0!==a?a:2048;this.b=0;this.j={};this.a=this.c=null}v(vh,Kc);l=vh.prototype;l.clear=function(){this.b=0;this.j={};this.a=this.c=null;this.l("clear")};l.forEach=function(a,b){for(var c=this.c;c;)a.call(b,c.ob,c.eb,this),c=c.wa};l.get=function(a){a=this.j[a];x(void 0!==a,15);if(a===this.a)return a.ob;a===this.c?(this.c=this.c.wa,this.c.Na=null):(a.wa.Na=a.Na,a.Na.wa=a.wa);a.wa=null;a.Na=this.a;this.a=this.a.wa=a;return a.ob};
l.remove=function(a){var b=this.j[a];x(void 0!==b,15);if(b===this.a){if(this.a=b.Na)this.a.wa=null}else if(b===this.c){if(this.c=b.wa)this.c.Na=null}else b.wa.Na=b.Na,b.Na.wa=b.wa;delete this.j[a];--this.b;return b.ob};l.pop=function(){var a=this.c;delete this.j[a.eb];a.wa&&(a.wa.Na=null);this.c=a.wa;this.c||(this.a=null);--this.b;return a.ob};l.set=function(a,b){x(!(a in this.j),16);b={eb:a,wa:null,Na:this.a,ob:b};this.a?this.a.wa=b:this.c=b;this.a=b;this.j[a]=b;++this.b};var wh=[0,0,0,1],xh=[],yh=[0,0,0,1],zh=new vh,Ah={},Bh=function(){function a(a){e||(e=Lf(1,1),e.font="32px monospace",g=e.measureText("wmytzilWMYTZIL@#/&?$%10").width);var b=!0;"monospace"!=a&&(e.font="32px "+a+",monospace",b=e.measureText("wmytzilWMYTZIL@#/&?$%10").width!=g,e.font="32px monospace");return b}function b(){var b=!0,e;for(e in c)60>c[e]&&(a(e)?(c[e]=60,d.clear()):(++c[e],b=!1));b&&(window.clearInterval(f),f=void 0)}var c=Ah,d=zh,e,f,g;return function(d){if(d=hg(d))for(var e=0,g=d.length;e<
g;++e){var h=d[e];h in c||(c[h]=60,a(h)||(c[h]=0,void 0===f&&(f=window.setInterval(b,32))))}}}();function Ch(a,b,c,d){0!==b&&(a.translate(c,d),a.rotate(b),a.translate(-c,-d))}var Dh=Ke();function Eh(a,b,c,d,e,f,g,h,k,m,n){if(1!=c){var p=a.globalAlpha;a.globalAlpha=p*c}b&&a.setTransform.apply(a,b);a.drawImage(d,e,f,g,h,k,m,g*n,h*n);p&&(a.globalAlpha=p);b&&a.setTransform.apply(a,Dh)};var Fh=/^#(?:[0-9a-f]{3,4}){1,2}$/i,Gh=/^([a-z]*)$/i;function Oh(a){if("string"!==typeof a){var b=a[0];b!=(b|0)&&(b=b+.5|0);var c=a[1];c!=(c|0)&&(c=c+.5|0);var d=a[2];d!=(d|0)&&(d=d+.5|0);a="rgba("+b+","+c+","+d+","+(void 0===a[3]?1:a[3])+")"}return a}
var Qh=function(){var a={},b=0;return function(c){if(a.hasOwnProperty(c))var d=a[c];else{if(1024<=b){d=0;for(var e in a)0===(d++&3)&&(delete a[e],--b)}d=c;Gh.exec(d)&&(e=document.createElement("div"),e.style.color=d,document.body.appendChild(e),d=getComputedStyle(e).color,document.body.removeChild(e));if(Fh.exec(d)){e=d.length-1;var f=4>=e?1:2;var g=4===e||8===e;e=parseInt(d.substr(1+0*f,f),16);var h=parseInt(d.substr(1+1*f,f),16);var k=parseInt(d.substr(1+2*f,f),16);d=g?parseInt(d.substr(1+3*f,f),
16):255;1==f&&(e=(e<<4)+e,h=(h<<4)+h,k=(k<<4)+k,g&&(d=(d<<4)+d));f=[e,h,k,d/255]}else 0==d.indexOf("rgba(")?(d=d.slice(5,-1).split(",").map(Number),f=Ph(d)):0==d.indexOf("rgb(")?(d=d.slice(4,-1).split(",").map(Number),d.push(1),f=Ph(d)):x(!1,14);d=f;a[c]=d;++b}return d}}();function Ph(a){var b=[];b[0]=ra(a[0]+.5|0,0,255);b[1]=ra(a[1]+.5|0,0,255);b[2]=ra(a[2]+.5|0,0,255);b[3]=ra(a[3],0,1);return b};function Rh(a){return"string"===typeof a||a instanceof CanvasPattern||a instanceof CanvasGradient?a:Oh(a)};function Sh(){}l=Sh.prototype;l.Wd=function(){};l.Nc=function(){};l.Oc=function(){};l.Pc=function(){};l.Qc=function(){};l.Rc=function(){};l.Sc=function(){};l.Tc=function(){};l.Wa=function(){};l.kb=function(){};l.wc=function(){};l.Ua=function(){};function Th(a,b,c,d,e){this.l=a;this.g=b;this.b=c;this.C=d;this.Ka=e;this.L=this.a=this.c=this.K=this.J=this.Ca=null;this.M=this.Ga=this.o=this.A=this.u=this.B=0;this.X=!1;this.j=this.ea=0;this.Ra=!1;this.ia=0;this.ha="";this.la=this.fa=0;this.$a=!1;this.i=this.xa=0;this.ka=this.v=this.f=null;this.H=[];this.Ha=Ke()}v(Th,Sh);
function Uh(a,b,c){if(a.L){b=Ie(b,0,c,2,a.C,a.H);c=a.l;var d=a.Ha,e=c.globalAlpha;1!=a.o&&(c.globalAlpha=e*a.o);var f=a.ea;a.X&&(f+=a.Ka);var g;var h=0;for(g=b.length;h<g;h+=2){var k=b[h]-a.B,m=b[h+1]-a.u;a.Ra&&(k=Math.round(k),m=Math.round(m));if(0!==f||1!=a.j){var n=k+a.B,p=m+a.u;Pe(d,n,p,a.j,a.j,f,-n,-p);c.setTransform.apply(c,d)}c.drawImage(a.L,a.Ga,a.M,a.ia,a.A,k,m,a.ia,a.A)}0===f&&1==a.j||c.setTransform(1,0,0,1,0,0);1!=a.o&&(c.globalAlpha=e)}}
function Vh(a,b,c,d){var e=0;if(a.ka&&""!==a.ha){a.f&&Wh(a,a.f);a.v&&Xh(a,a.v);var f=a.ka,g=a.l,h=a.K,k=f.textAlign?f.textAlign:"center";h?(h.font!=f.font&&(h.font=g.font=f.font),h.textAlign!=k&&(h.textAlign=k),h.textBaseline!=f.textBaseline&&(h.textBaseline=g.textBaseline=f.textBaseline)):(g.font=f.font,g.textAlign=k,g.textBaseline=f.textBaseline,a.K={font:f.font,textAlign:k,textBaseline:f.textBaseline});b=Ie(b,e,c,d,a.C,a.H);f=a.l;g=a.xa;for(a.$a&&(g+=a.Ka);e<c;e+=d){h=b[e]+a.fa;k=b[e+1]+a.la;if(0!==
g||1!=a.i){var m=Pe(a.Ha,h,k,a.i,a.i,g,-h,-k);f.setTransform.apply(f,m)}a.v&&f.strokeText(a.ha,h,k);a.f&&f.fillText(a.ha,h,k)}0===g&&1==a.i||f.setTransform(1,0,0,1,0,0)}}function Yh(a,b,c,d,e,f){var g=a.l;a=Ie(b,c,d,e,a.C,a.H);g.moveTo(a[0],a[1]);b=a.length;f&&(b-=2);for(c=2;c<b;c+=2)g.lineTo(a[c],a[c+1]);f&&g.closePath();return d}function Zh(a,b,c,d,e){var f;var g=0;for(f=d.length;g<f;++g)c=Yh(a,b,c,d[g],e,!0);return c}l=Th.prototype;
l.Nc=function(a){if(Va(this.b,a.I())){if(this.c||this.a){this.c&&Wh(this,this.c);this.a&&Xh(this,this.a);var b=this.C;var c=this.H,d=a.aa();b=d?Ie(d,0,d.length,a.ga(),b,c):null;c=b[2]-b[0];d=b[3]-b[1];c=Math.sqrt(c*c+d*d);d=this.l;d.beginPath();d.arc(b[0],b[1],c,0,2*Math.PI);this.c&&d.fill();this.a&&d.stroke()}""!==this.ha&&Vh(this,a.ja(),2,2)}};l.Sc=function(a){var b=a.aa();a=a.ga();this.L&&Uh(this,b,b.length);""!==this.ha&&Vh(this,b,b.length,a)};
l.Qc=function(a){var b=a.aa();a=a.ga();this.L&&Uh(this,b,b.length);""!==this.ha&&Vh(this,b,b.length,a)};l.Oc=function(a){if(Va(this.b,a.I())){if(this.a){Xh(this,this.a);var b=this.l,c=a.aa();b.beginPath();Yh(this,c,0,c.length,a.ga(),!1);b.stroke()}""!==this.ha&&(a=a.Xc(),Vh(this,a,2,2))}};
l.Pc=function(a){var b=a.I();if(Va(this.b,b)){if(this.a){Xh(this,this.a);b=this.l;var c=a.aa(),d=0,e=a.Ma(),f=a.ga();b.beginPath();var g;var h=0;for(g=e.length;h<g;++h)d=Yh(this,c,d,e[h],f,!1);b.stroke()}""!==this.ha&&(a=a.Yc(),Vh(this,a,a.length,2))}};l.Tc=function(a){if(Va(this.b,a.I())){if(this.a||this.c){this.c&&Wh(this,this.c);this.a&&Xh(this,this.a);var b=this.l;b.beginPath();Zh(this,a.Xa(),0,a.Ma(),a.ga());this.c&&b.fill();this.a&&b.stroke()}""!==this.ha&&(a=a.ac(),Vh(this,a,2,2))}};
l.Rc=function(a){if(Va(this.b,a.I())){if(this.a||this.c){this.c&&Wh(this,this.c);this.a&&Xh(this,this.a);var b=this.l,c=$h(a),d=0,e=a.Eb(),f=a.ga(),g;b.beginPath();var h=0;for(g=e.length;h<g;++h)d=Zh(this,c,d,e[h],f);this.c&&b.fill();this.a&&b.stroke()}""!==this.ha&&(a=ai(a),Vh(this,a,a.length,2))}};function Wh(a,b){var c=a.l,d=a.Ca;d?d.fillStyle!=b.fillStyle&&(d.fillStyle=c.fillStyle=b.fillStyle):(c.fillStyle=b.fillStyle,a.Ca={fillStyle:b.fillStyle})}
function Xh(a,b){var c=a.l,d=a.J;d?(d.lineCap!=b.lineCap&&(d.lineCap=c.lineCap=b.lineCap),kd&&(Vb(d.lineDash,b.lineDash)||c.setLineDash(d.lineDash=b.lineDash),d.lineDashOffset!=b.lineDashOffset&&(d.lineDashOffset=c.lineDashOffset=b.lineDashOffset)),d.lineJoin!=b.lineJoin&&(d.lineJoin=c.lineJoin=b.lineJoin),d.lineWidth!=b.lineWidth&&(d.lineWidth=c.lineWidth=b.lineWidth),d.miterLimit!=b.miterLimit&&(d.miterLimit=c.miterLimit=b.miterLimit),d.strokeStyle!=b.strokeStyle&&(d.strokeStyle=c.strokeStyle=b.strokeStyle)):
(c.lineCap=b.lineCap,kd&&(c.setLineDash(b.lineDash),c.lineDashOffset=b.lineDashOffset),c.lineJoin=b.lineJoin,c.lineWidth=b.lineWidth,c.miterLimit=b.miterLimit,c.strokeStyle=b.strokeStyle,a.J={lineCap:b.lineCap,lineDash:b.lineDash,lineDashOffset:b.lineDashOffset,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle})}
l.kb=function(a,b){a?(a=a.a,this.c={fillStyle:Rh(a?a:wh)}):this.c=null;if(b){a=b.c;var c=b.b,d=b.l,e=b.g,f=b.f,g=b.j;b=b.v;this.a={lineCap:void 0!==c?c:"round",lineDash:d?d:xh,lineDashOffset:e?e:0,lineJoin:void 0!==f?f:"round",lineWidth:this.g*(void 0!==g?g:1),miterLimit:void 0!==b?b:10,strokeStyle:Rh(a?a:yh)}}else this.a=null};
l.wc=function(a){if(a){var b=a.$b(),c=a.ba(1),d=a.oc(),e=a.yb();this.B=b[0];this.u=b[1];this.A=e[1];this.L=c;this.o=a.b;this.Ga=d[0];this.M=d[1];this.X=a.B;this.ea=a.i;this.j=a.j*this.g;this.Ra=a.o;this.ia=e[0]}else this.L=null};
l.Ua=function(a){if(a){var b=a.ua();b?(b=b.a,this.f={fillStyle:Rh(b?b:wh)}):this.f=null;var c=a.qa();if(c){b=c.c;var d=c.b,e=c.l,f=c.g,g=c.f,h=c.j;c=c.v;this.v={lineCap:void 0!==d?d:"round",lineDash:e?e:xh,lineDashOffset:f?f:0,lineJoin:void 0!==g?g:"round",lineWidth:void 0!==h?h:1,miterLimit:void 0!==c?c:10,strokeStyle:Rh(b?b:yh)}}else this.v=null;b=a.a;d=a.l;e=a.j;f=a.b;g=a.g;h=a.c;c=a.ra();var k=a.f;a=a.v;this.ka={font:void 0!==b?b:"10px sans-serif",textAlign:void 0!==k?k:"center",textBaseline:void 0!==
a?a:"middle"};this.ha=void 0!==c?c:"";this.fa=void 0!==d?this.g*d:0;this.la=void 0!==e?this.g*e:0;this.$a=void 0!==f?f:!1;this.xa=void 0!==g?g:0;this.i=this.g*(void 0!==h?h:1)}else this.ha=""};function bi(a){Mc.call(this);this.a=a}v(bi,Mc);bi.prototype.Ea=la;function ci(a,b,c){return function(d,e){return di(a,b,d,e,function(a){c[d]||(c[d]={});c[d][a.ta.toString()]=a})}}bi.prototype.ea=function(a){2===a.target.a()&&ei(this)};function ei(a){var b=a.a;b.Hb()&&"ready"==b.bd()&&a.c()}function fi(a,b){b.jd()&&a.postRenderFunctions.push(function(a,b,e){b=w(a).toString();b in e.usedTiles&&a.Db(e.viewState.projection,e.usedTiles[b])}.bind(null,b))}
function gi(a,b){b=b.la;void 0!==b&&("string"===typeof b?a.logos[b]="":b&&(x("string"==typeof b.href,44),x("string"==typeof b.src,45),a.logos[b.src]=b.href))}function hi(a,b,c,d){b=w(b).toString();c=c.toString();b in a?c in a[b]?(a=a[b][c],d.T<a.T&&(a.T=d.T),d.W>a.W&&(a.W=d.W),d.R<a.R&&(a.R=d.R),d.U>a.U&&(a.U=d.U)):a[b][c]=d:(a[b]={},a[b][c]=d)}
function ii(a,b,c,d,e,f,g,h){var k=w(b).toString();k in a.wantedTiles||(a.wantedTiles[k]={});var m=a.wantedTiles[k];a=a.tileQueue;var n,p,q;for(q=c.minZoom;q<=g;++q){var t=dc(c,f,q,t);var u=c.a[q];for(n=t.T;n<=t.W;++n)for(p=t.R;p<=t.U;++p)if(g-q<=h){var y=b.kd(q,n,p,d,e);0==y.state&&(m[y.Sa()]=!0,y.Sa()in a.l||a.f([y,k,nc(c,y.ta),u]))}else b.yf(q,n,p,e)}};function ji(a){bi.call(this,a);this.fa=Ke()}v(ji,bi);function ki(a,b,c){var d=b.pixelRatio,e=b.size[0]*d,f=b.size[1]*d,g=b.viewState.rotation,h=Wa(c),k=[c[2],c[3]],m=[c[2],c[1]];c=Qa(c);Oe(b.coordinateToPixelTransform,h);Oe(b.coordinateToPixelTransform,k);Oe(b.coordinateToPixelTransform,m);Oe(b.coordinateToPixelTransform,c);a.save();Ch(a,-g,e/2,f/2);a.beginPath();a.moveTo(h[0]*d,h[1]*d);a.lineTo(k[0]*d,k[1]*d);a.lineTo(m[0]*d,m[1]*d);a.lineTo(c[0]*d,c[1]*d);a.clip();Ch(a,g,e/2,f/2)}
function li(a,b,c,d,e){var f=a.a;if(Lc(f,b)){var g=d.size[0]*d.pixelRatio,h=d.size[1]*d.pixelRatio,k=d.viewState.rotation;Ch(c,-k,g/2,h/2);a=void 0!==e?e:mi(a,d,0);f.l(new uh(b,new Th(c,d.pixelRatio,d.extent,a,d.viewState.rotation),d,c,null));Ch(c,k,g/2,h/2)}}ji.prototype.C=function(a,b,c,d){if(this.Ea(a,b,0,Ge,this))return c.call(d,this.a,null)};ji.prototype.pc=function(a,b,c,d){li(this,"postcompose",a,b,d)};
function mi(a,b,c){var d=b.viewState,e=b.pixelRatio,f=e/d.resolution;return Pe(a.fa,e*b.size[0]/2,e*b.size[1]/2,f,-f,-d.rotation,-d.center[0]+c,-d.center[1])};function ni(a){ji.call(this,a);this.H=Ke();this.i=null}v(ni,ji);ni.prototype.Ud=function(a,b,c){li(this,"precompose",c,a,void 0);var d=this.ba();if(d){var e=b.extent,f=void 0!==e&&!Ha(e,a.extent)&&Va(e,a.extent);f&&ki(c,a,e);e=this.B();var g=c.globalAlpha;c.globalAlpha=b.opacity;c.drawImage(d,0,0,+d.width,+d.height,Math.round(e[4]),Math.round(e[5]),Math.round(d.width*e[0]),Math.round(d.height*e[3]));c.globalAlpha=g;f&&c.restore()}this.pc(c,a,b)};
ni.prototype.Ea=function(a,b,c,d,e){var f=this.a;return f.$().Ea(a,b.viewState.resolution,b.viewState.rotation,c,b.skippedFeatureUids,function(a){return d.call(e,a,f)})};
ni.prototype.C=function(a,b,c,d){if(this.ba()){if(this.a.$().Ea!==la)return ji.prototype.C.apply(this,arguments);var e=Oe(this.H,a.slice());te(e,b.viewState.resolution/this.g);this.i||(this.i=Lf(1,1));this.i.clearRect(0,0,1,1);this.i.drawImage(this.ba(),e[0],e[1],1,1,0,0,1,1);e=this.i.getImageData(0,0,1,1).data;if(0<e[3])return c.call(d,this.a,e)}};function Vf(a){ni.call(this,a);this.L=null;this.b=Ke()}v(Vf,ni);Vf.handles=function(a,b){return"canvas"===a&&"IMAGE"===b.D()};Vf.create=function(a,b){return new Vf(b)};Vf.prototype.ba=function(){return this.L?this.L.ba():null};Vf.prototype.B=function(){return this.b};
Vf.prototype.Lb=function(a,b){var c=a.pixelRatio,d=a.size,e=a.viewState,f=e.center,g=e.resolution,h=this.a.$(),k=a.viewHints;var m=a.extent;void 0!==b.extent&&(m=Ua(m,b.extent));if(!k[0]&&!k[1]&&!Ya(m)){b=e.projection;(e=h.C)&&(b=e);if(b=m=h.ba(m,g,c,b))b=m,e=b.a(),2!=e&&3!=e&&z(b,"change",this.ea,this),0==e&&(b.load(),e=b.a()),b=2==e;b&&(this.L=m)}this.L&&(m=this.L,e=m.I(),b=m.j(),m=m.c(),k=c*b/(g*m),e=Pe(this.b,c*d[0]/2,c*d[1]/2,k,k,0,m*(e[0]-f[0])/b,m*(f[1]-e[3])/b),Pe(this.H,c*d[0]/2-e[4],c*d[1]/
2-e[5],c/g,-c/g,0,-f[0],-f[1]),gi(a,h),this.g=b*c/m);return!!this.L};function oi(){this.a={};this.c=0}oi.prototype.clear=function(){this.a={};this.c=0};oi.prototype.get=function(a,b,c){a=b+":"+a+":"+(c?Oh(c):"null");return a in this.a?this.a[a]:null};oi.prototype.set=function(a,b,c,d){this.a[b+":"+a+":"+(c?Oh(c):"null")]=d;++this.c};var pi=new oi;function qi(a,b){this.g=b;this.c={};this.j={}}v(qi,Bc);l=qi.prototype;l.ca=function(){for(var a in this.c)Cc(this.c[a])};function ri(){if(32<pi.c){var a=0,b;for(b in pi.a){var c=pi.a[b];0!==(a++&3)||Lc(c)||(delete pi.a[b],--pi.c)}}}
l.Ea=function(a,b,c,d,e,f,g){function h(a,c){var f=w(a).toString(),g=b.layerStates[w(c)].fd;if(!(f in b.skippedFeatureUids)||g)return d.call(e,a,g?c:null)}var k,m=b.viewState,n=m.resolution,p=m.projection;m=a;if(p.j){p=p.I();var q=Xa(p),t=a[0];if(t<p[0]||t>p[2])m=[t+q*Math.ceil((p[0]-t)/q),a[1]]}p=b.layerStatesArray;for(q=p.length-1;0<=q;--q){var u=p[q];t=u.layer;if(bg(u,n)&&f.call(g,t)&&(u=cg(this,t),t.$()&&(k=u.Ea(t.$().B?m:a,b,c,h,e)),k))return k}};
function cg(a,b){var c=w(b).toString();if(c in a.c)return a.c[c];for(var d,e=a.D(),f=0,g=Sf.length;f<g;++f){var h=Sf[f];if(h.handles(e,b)){d=h.create(a,b);break}}if(d)a.c[c]=d,a.j[c]=z(d,"change",a.Lg,a);else throw Error("Unable to create renderer for layer: "+b.D());return d}l.Lg=function(){this.g.render()};l.ff=la;l.aj=function(a,b){for(var c in this.c)if(!(b&&c in b.layerStates)){a=c;var d=this.c[a];delete this.c[a];vc(this.j[a]);delete this.j[a];Cc(d)}};
function Xb(a,b){return a.zIndex-b.zIndex};function si(a,b){qi.call(this,0,b);this.b=Lf();this.a=this.b.canvas;this.a.style.width="100%";this.a.style.height="100%";this.a.style.display="block";this.a.className="ol-unselectable";a.insertBefore(this.a,a.childNodes[0]||null);this.l=!0;this.f=Ke()}v(si,qi);si.handles=function(a){return"canvas"===a};si.create=function(a,b){return new si(a,b)};
function ti(a,b,c){var d=a.g,e=a.b;if(Lc(d,b)){var f=c.extent,g=c.pixelRatio,h=c.viewState.rotation,k=c.viewState,m=c.pixelRatio/k.resolution;a=Pe(a.f,a.a.width/2,a.a.height/2,m,-m,-k.rotation,-k.center[0],-k.center[1]);d.l(new uh(b,new Th(e,g,f,a,h),c,e,null))}}si.prototype.D=function(){return"canvas"};
si.prototype.ff=function(a){if(a){var b=this.b,c=a.pixelRatio,d=Math.round(a.size[0]*c),e=Math.round(a.size[1]*c);this.a.width!=d||this.a.height!=e?(this.a.width=d,this.a.height=e):b.clearRect(0,0,d,e);c=a.viewState.rotation;var f=a.viewState,g=a.coordinateToPixelTransform,h=a.pixelToCoordinateTransform;Pe(g,a.size[0]/2,a.size[1]/2,1/f.resolution,-1/f.resolution,-f.rotation,-f.center[0],-f.center[1]);f=Ne(h,g);g=f[0]*f[3]-f[1]*f[2];x(0!==g,32);h=f[0];var k=f[1],m=f[2],n=f[3],p=f[4],q=f[5];f[0]=n/
g;f[1]=-k/g;f[2]=-m/g;f[3]=h/g;f[4]=(m*q-n*p)/g;f[5]=-(h*q-k*p)/g;ti(this,"precompose",a);f=a.layerStatesArray;Wb(f);c&&(b.save(),Ch(b,c,d/2,e/2));d=a.viewState.resolution;e=0;for(g=f.length;e<g;++e)h=f[e],k=h.layer,k=cg(this,k),bg(h,d)&&"ready"==h.ij&&k.Lb(a,h)&&k.Ud(a,h,b);c&&b.restore();ti(this,"postcompose",a);this.l||(this.a.style.display="",this.l=!0);for(var t in this.c)if(!(t in a.layerStates)){a.postRenderFunctions.push(this.aj.bind(this));break}a.postRenderFunctions.push(ri)}else this.l&&
(this.a.style.display="none",this.l=!1)};function Wf(a){ni.call(this,a);this.context=null===this.context?null:Lf();this.b=null;this.f=[];this.M=Ba();this.xa=new oa(0,0,0,0);this.u=Ke();this.X=0}v(Wf,ni);Wf.handles=function(a,b){return"canvas"===a&&"TILE"===b.D()};Wf.create=function(a,b){return new Wf(b)};function ui(a,b){b=b.state;a=a.a.u();return 2==b||4==b||3==b&&!a}
Wf.prototype.Lb=function(a,b){var c=a.pixelRatio,d=a.size,e=a.viewState,f=e.projection,g=e.resolution;e=e.center;var h=this.a,k=h.$(),m=k.j,n=k.ya(f),p=oc(n,g,this.X),q=n.a[p],t=Math.round(g/q)||1,u=a.extent;void 0!==b.extent&&(u=Ua(u,b.extent));if(Ya(u))return!1;var y=dc(n,u,p),C=kc(n,p,y),D=k.Gb(c),I={};I[p]={};var G=ci(k,f,I),R=this.M,L=this.xa,J=!1,V,K;for(V=y.T;V<=y.W;++V)for(K=y.R;K<=y.U;++K){var P=k.kd(p,V,K,c,f);3==P.state&&(h.u()?0<h.B()&&(J=!0):vi(P,2));ui(this,P)||(P=wi(P));if(ui(this,
P)){var F=w(this);if(2==P.state){I[p][P.ta.toString()]=P;var Ma=P.g?-1!==P.f[F]:!1;J||!Ma&&-1!==this.f.indexOf(P)||(J=!0)}if(1===xi(P,F,a.time))continue}F=jc(n,P.ta,L,R);Ma=!1;F&&(Ma=G(p+1,F));Ma||fc(n,P.ta,G,L,R)}P=a.viewHints;P=P[0]||P[1];if(!(this.g&&16<Date.now()-a.time&&P||!J&&this.b&&Ha(this.b,u)&&this.uc==m&&t==this.J&&(P||q*c/D*t==this.g))){if(P=this.context)K=k.dc(p,c,f),V=Math.round((y.W-y.T+1)*K[0]/t),K=Math.round((y.U-y.R+1)*K[1]/t),J=P.canvas,J.width!=V||J.height!=K?(this.J=t,J.width=
V,J.height=K):(this.b&&!Oa(C,this.b)&&P.clearRect(0,0,V,K),t=this.J);this.f.length=0;J=Object.keys(I).map(Number);J.sort(function(a,b){return a===p?1:b===p?-1:a>b?1:a<b?-1:0});F=0;for(Ma=J.length;F<Ma;++F){L=J[F];G=k.dc(L,c,f);P=n.a[L];var Ec=P/q;var ec=D*k.ae(f);var Ca=I[L];for(var Fc in Ca){P=Ca[Fc];K=hc(n,P.ta,R);V=(K[0]-C[0])/q*D/t;K=(C[3]-K[3])/q*D/t;var Jd=G[0]*Ec/t;var ab=G[1]*Ec/t;this.Uc(P,a,b,V,K,Jd,ab,ec,p===L);this.f.push(P)}}this.uc=m;this.g=q*c/D*t;this.b=C}b=this.g/g;b=Pe(this.u,c*
d[0]/2,c*d[1]/2,b,b,0,(this.b[0]-e[0])/this.g*c,(e[1]-this.b[3])/this.g*c);Pe(this.H,c*d[0]/2-b[4],c*d[1]/2-b[5],c/g,-c/g,0,-e[0],-e[1]);hi(a.usedTiles,k,p,y);ii(a,k,n,c,f,u,p,h.B());fi(a,k);gi(a,k);return 0<this.f.length};
Wf.prototype.Uc=function(a,b,c,d,e,f,g,h,k){if(c=a.ba(this.a)){var m=w(this),n=k?xi(a,m,b.time):1;1!==n||this.a.$().$c(b.viewState.projection)||this.context.clearRect(d,e,f,g);var p=n!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=n);this.context.drawImage(c,h,h,c.width-2*h,c.height-2*h,d,e,f,g);p&&this.context.restore();1!==n?b.animate=!0:k&&a.g&&(a.f[m]=-1)}};Wf.prototype.ba=function(){var a=this.context;return a?a.canvas:null};Wf.prototype.B=function(){return this.u};var yi={hb:function(){}};
(function(a){function b(a,e,f,g,h){f=f||0;g=g||a.length-1;for(h=h||d;g>f;){if(600<g-f){var k=g-f+1,n=e-f+1,m=Math.log(k),p=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*p*(k-p)/k)*(0>n-k/2?-1:1);b(a,e,Math.max(f,Math.floor(e-n*p/k+m)),Math.min(g,Math.floor(e+(k-n)*p/k+m)),h)}k=a[e];n=f;p=g;c(a,f,e);for(0<h(a[g],k)&&c(a,f,g);n<p;){c(a,n,p);n++;for(p--;0>h(a[n],k);)n++;for(;0<h(a[p],k);)p--}0===h(a[f],k)?c(a,f,p):(p++,c(a,p,g));p<=e&&(f=p+1);e<=p&&(g=p-1)}}function c(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function d(a,
b){return a<b?-1:a>b?1:0}function e(a,b){if(!(this instanceof e))return new e(a,b);this.Ic=Math.max(4,a||9);this.Ld=Math.max(2,Math.ceil(.4*this.Ic));b&&this.Xf(b);this.clear()}function f(a,b){g(a,0,a.children.length,b,a)}function g(a,b,c,d,e){e||(e=u(null));e.T=Infinity;e.R=Infinity;e.W=-Infinity;e.U=-Infinity;for(var f;b<c;b++)f=a.children[b],h(e,a.va?d(f):f);return e}function h(a,b){a.T=Math.min(a.T,b.T);a.R=Math.min(a.R,b.R);a.W=Math.max(a.W,b.W);a.U=Math.max(a.U,b.U)}function k(a,b){return a.T-
b.T}function m(a,b){return a.R-b.R}function n(a){return(a.W-a.T)*(a.U-a.R)}function p(a){return a.W-a.T+(a.U-a.R)}function q(a,b){return a.T<=b.T&&a.R<=b.R&&b.W<=a.W&&b.U<=a.U}function t(a,b){return b.T<=a.W&&b.R<=a.U&&b.W>=a.T&&b.U>=a.R}function u(a){return{children:a,height:1,va:!0,T:Infinity,R:Infinity,W:-Infinity,U:-Infinity}}function y(a,b,c,d,e){for(var f=[b,c],g;f.length;)c=f.pop(),b=f.pop(),c-b<=d||(g=b+Math.ceil((c-b)/d/2)*d,C(a,g,b,c,e),f.push(b,g,g,c))}var C=b;e.prototype={all:function(){return this.Hd(this.data,
[])},search:function(a){var b=this.data,c=[],d=this.Da;if(!t(a,b))return c;for(var e=[],f,g,h,k;b;){f=0;for(g=b.children.length;f<g;f++)h=b.children[f],k=b.va?d(h):h,t(a,k)&&(b.va?c.push(h):q(a,k)?this.Hd(h,c):e.push(h));b=e.pop()}return c},gg:function(a){var b=this.data,c=this.Da;if(!t(a,b))return!1;for(var d=[],e,f,g,h;b;){e=0;for(f=b.children.length;e<f;e++)if(g=b.children[e],h=b.va?c(g):g,t(a,h)){if(b.va||q(a,h))return!0;d.push(g)}b=d.pop()}return!1},load:function(a){if(!a||!a.length)return this;
if(a.length<this.Ld){for(var b=0,c=a.length;b<c;b++)this.da(a[b]);return this}a=this.Jd(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.Od(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.Kd(a,this.data.height-a.height-1,!0)):this.data=a;return this},da:function(a){a&&this.Kd(a,this.data.height-1);return this},clear:function(){this.data=u([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,d=this.Da(a),e=[],f=
[],g,h,k,n;c||e.length;){c||(c=e.pop(),h=e[e.length-1],g=f.pop(),n=!0);if(c.va){a:{k=a;var m=c.children,p=b;if(p){for(var t=0;t<m.length;t++)if(p(k,m[t])){k=t;break a}k=-1}else k=m.indexOf(k)}if(-1!==k){c.children.splice(k,1);e.push(c);this.Vf(e);break}}n||c.va||!q(c,d)?h?(g++,c=h.children[g],n=!1):c=null:(e.push(c),f.push(g),g=0,h=c,c=c.children[0])}return this},Da:function(a){return a},Lc:k,Mc:m,toJSON:function(){return this.data},Hd:function(a,b){for(var c=[];a;)a.va?b.push.apply(b,a.children):
c.push.apply(c,a.children),a=c.pop();return b},Jd:function(a,b,c,d){var e=c-b+1,g=this.Ic;if(e<=g){var h=u(a.slice(b,c+1));f(h,this.Da);return h}d||(d=Math.ceil(Math.log(e)/Math.log(g)),g=Math.ceil(e/Math.pow(g,d-1)));h=u([]);h.va=!1;h.height=d;e=Math.ceil(e/g);g=e*Math.ceil(Math.sqrt(g));var k;for(y(a,b,c,g,this.Lc);b<=c;b+=g){var n=Math.min(b+g-1,c);y(a,b,n,e,this.Mc);for(k=b;k<=n;k+=e){var m=Math.min(k+e-1,n);h.children.push(this.Jd(a,k,m,d-1))}}f(h,this.Da);return h},Uf:function(a,b,c,d){for(var e,
f,g,h,k,m,p,q;;){d.push(b);if(b.va||d.length-1===c)break;p=q=Infinity;e=0;for(f=b.children.length;e<f;e++)g=b.children[e],k=n(g),m=(Math.max(g.W,a.W)-Math.min(g.T,a.T))*(Math.max(g.U,a.U)-Math.min(g.R,a.R))-k,m<q?(q=m,p=k<p?k:p,h=g):m===q&&k<p&&(p=k,h=g);b=h||b.children[0]}return b},Kd:function(a,b,c){var d=this.Da;c=c?a:d(a);d=[];var e=this.Uf(c,this.data,b,d);e.children.push(a);for(h(e,c);0<=b;)if(d[b].children.length>this.Ic)this.Zf(d,b),b--;else break;this.Rf(c,d,b)},Zf:function(a,b){var c=a[b],
d=c.children.length,e=this.Ld;this.Sf(c,e,d);d=this.Tf(c,e,d);d=u(c.children.splice(d,c.children.length-d));d.height=c.height;d.va=c.va;f(c,this.Da);f(d,this.Da);b?a[b-1].children.push(d):this.Od(c,d)},Od:function(a,b){this.data=u([a,b]);this.data.height=a.height+1;this.data.va=!1;f(this.data,this.Da)},Tf:function(a,b,c){var d,e;var f=e=Infinity;for(d=b;d<=c-b;d++){var h=g(a,0,d,this.Da);var k=g(a,d,c,this.Da);var m=Math.max(0,Math.min(h.W,k.W)-Math.max(h.T,k.T))*Math.max(0,Math.min(h.U,k.U)-Math.max(h.R,
k.R));h=n(h)+n(k);if(m<f){f=m;var p=d;e=h<e?h:e}else m===f&&h<e&&(e=h,p=d)}return p},Sf:function(a,b,c){var d=a.va?this.Lc:k,e=a.va?this.Mc:m,f=this.Id(a,b,c,d);b=this.Id(a,b,c,e);f<b&&a.children.sort(d)},Id:function(a,b,c,d){a.children.sort(d);d=this.Da;var e=g(a,0,b,d),f=g(a,c-b,c,d),k=p(e)+p(f),n;for(n=b;n<c-b;n++){var m=a.children[n];h(e,a.va?d(m):m);k+=p(e)}for(n=c-b-1;n>=b;n--)m=a.children[n],h(f,a.va?d(m):m),k+=p(f);return k},Rf:function(a,b,c){for(;0<=c;c--)h(b[c],a)},Vf:function(a){for(var b=
a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():f(a[b],this.Da)},Xf:function(a){var b=["return a"," - b",";"];this.Lc=new Function("a","b",b.join(a[0]));this.Mc=new Function("a","b",b.join(a[1]));this.Da=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};a["default"]=e})(yi.hb=yi.hb||{});yi.hb=yi.hb.default;function zi(){};function Ai(a,b,c,d){var e=a[b],f=a[b+1],g=0;for(b+=d;b<c;b+=d){var h=a[b],k=a[b+1];g+=Math.sqrt((h-e)*(h-e)+(k-f)*(k-f));e=h;f=k}return g};function Bi(a,b,c,d,e,f){this.X=f;this.fa=Ba();this.$a=a;this.Ra=b;this.overlaps=e;this.pixelRatio=d;this.J=0;this.resolution=c;this.b=this.Ca=this.ka=null;this.c=[];this.coordinates=[];this.ea={};this.M=Ke();this.a=[];this.ia=null;this.state={};this.la=Ke()}v(Bi,Sh);
function Ci(a,b,c,d,e,f,g,h,k,m,n,p,q,t,u,y){var C=a.la;f*=t;g*=t;c-=f;d-=g;u&&(c=Math.round(c),d=Math.round(d));u=y+n>e.width?e.width-n:y;k=k+p>e.height?e.height-p:k;a=a.fa;y=null;0!==q?(f=c+f,g=d+g,y=Pe(C,f,g,1,1,q,-f,-g),Ka(a),Da(a,Oe(C,[c,d])),Da(a,Oe(C,[c+u,d])),Da(a,Oe(C,[c+u,d+k])),Da(a,Oe(C,[c,d+u]))):Ja(c,d,c+u*t,d+k*t,a);q=b.canvas;q=a[0]<=q.width&&0<=a[2]&&a[1]<=q.height&&0<=a[3];if(h){if(q||1!=h[4])Pa(h,a),h.push(q?[b,y?y.slice(0):null,m,e,n,p,u,k,c,d,t]:null)}else q&&Eh(b,y,m,e,n,p,u,
k,c,d,t)}function Di(a,b){var c=a.pixelRatio;return 1==c?b:b.map(function(a){return a*c})}
function Ei(a,b,c,d,e,f,g){var h=a.coordinates.length,k=Fi(a);g&&(c+=e);g=[b[c],b[c+1]];var m=[NaN,NaN],n=!0,p;for(p=c+e;p<d;p+=e){m[0]=b[p];m[1]=b[p+1];var q=k[1];var t=k[2],u=k[3],y=m[0],C=m[1],D=0;y<k[0]?D|=16:y>t&&(D|=4);C<q?D|=8:C>u&&(D|=2);0===D&&(D=1);q=D;q!==I?(n&&(a.coordinates[h++]=g[0],a.coordinates[h++]=g[1]),a.coordinates[h++]=m[0],a.coordinates[h++]=m[1],n=!1):1===q?(a.coordinates[h++]=m[0],a.coordinates[h++]=m[1],n=!1):n=!0;g[0]=m[0];g[1]=m[1];var I=q}if(f&&n||p===c+e)a.coordinates[h++]=
g[0],a.coordinates[h++]=g[1];return h}function Gi(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;++g){var k=d[g];c=Ei(a,b,c,k,e,!1,!1);f.push(c);c=k}return c}l=Bi.prototype;
l.Wd=function(a,b,c){Hi(this,b);var d=a.D(),e=a.ga(),f=this.coordinates.length,g;if("MultiPolygon"==d){d=$h(a);var h=[];for(var k=a.Eb(),m=g=0,n=k.length;m<n;++m){var p=[];g=Gi(this,d,g,k[m],e,p);h.push(p)}this.c.push([4,f,h,a,c,ff])}else"Polygon"==d||"MultiLineString"==d?(h=[],d="Polygon"==d?a.Xa():a.aa(),Gi(this,d,0,a.Ma(),e,h),this.c.push([4,f,h,a,c,ef])):"LineString"==d||"MultiPoint"==d?(d=a.aa(),e=Ei(this,d,0,d.length,e,!1,!1),this.c.push([4,f,e,a,c,df])):"Point"==d&&(d=a.aa(),this.coordinates.push(d[0],
d[1]),e=this.coordinates.length,this.c.push([4,f,e,a,c]));Ii(this,b)};function Hi(a,b){a.ka=[0,b,0];a.c.push(a.ka);a.Ca=[0,b,0];a.a.push(a.Ca)}l.pa=function(a,b){if(this.Ga){var c=Oe(this.M,this.Ga.slice());a.translate(c[0],c[1]);a.rotate(b)}a.fill();this.Ga&&a.setTransform.apply(a,Dh)};function Ji(a,b){if(b&&5<b.length){var c=b[4];if(1==c||c==b.length-5){c={T:b[0],R:b[1],W:b[2],U:b[3]};if(!a.X.gg(c))for(a.X.da(c),a=5,c=b.length;a<c;++a)b[a]&&Eh.apply(void 0,b[a]);b.length=5;Ka(b)}}}
function Ki(a,b,c,d,e,f,g,h){if(a.ia&&Vb(c,a.M))var k=a.ia;else a.ia||(a.ia=[]),k=Ie(a.coordinates,0,a.coordinates.length,2,c,a.ia),Ne(a.M,c);for(var m=!db(e),n=0,p=f.length,q,t,u,y,C,D,I,G,R,L=0,J=0,V=a.ea,K={context:b,pixelRatio:a.pixelRatio,resolution:a.resolution,rotation:d},P=a.c!=f||a.overlaps?0:200;n<p;){var F=f[n];switch(F[0]){case 0:var Ma=F[1];m&&e[w(Ma).toString()]||!Ma.O()?n=F[2]:void 0===h||Va(h,Ma.O().I())?++n:n=F[2]+1;break;case 1:L>P&&(a.pa(b,d),L=0);J>P&&(b.stroke(),J=0);L||J||(b.beginPath(),
C=D=NaN);++n;break;case 2:q=F[1];var Ec=k[q],ec=k[q+1],Ca=k[q+2]-Ec,Fc=k[q+3]-ec,Jd=Math.sqrt(Ca*Ca+Fc*Fc);b.moveTo(Ec+Jd,ec);b.arc(Ec,ec,Jd,0,2*Math.PI,!0);++n;break;case 3:b.closePath();++n;break;case 4:q=F[1];t=F[2];var ab=F[4],$a=6==F.length?F[5]:void 0;K.geometry=F[3];K.feature=Ma;n in V||(V[n]=[]);var Dc=V[n];$a?$a(k,q,t,2,Dc):(Dc[0]=k[q],Dc[1]=k[q+1],Dc.length=2);ab(Dc,K);++n;break;case 6:q=F[1];t=F[2];var Kd=F[3];u=F[4];y=F[5];R=F[6];var ye=F[7],Hh=F[8],Hc=F[9],no=F[10],uk=F[12],oo=F[13],
po=F[14],qo=F[15];for(F[11]&&(uk+=d);q<t;q+=2)Ci(a,b,k[q],k[q+1],Kd,u,y,R,ye,Hh,Hc,no,uk,oo,po,qo);Ji(a,R);++n;break;case 5:var vk=F[1],wk=F[2],Ih=F[3];R=F[4];var ro=F[5],so=F[6],to=F[7],xk=F[8],yk=F[9],uo=F[10],zk=F[11],Ak=F[12],vo=F[13],Bk=F[14],Ck=Ai(k,vk,wk,2),Dk=xk(Ak);if(ro||Dk<=Ck){a:{var Df=void 0,cd=void 0,Ic=k,Tb=vk,Ek=wk,Fk=Ak,wo=xk,Gk=(Ck-Dk)*vo,xo=to,Jh=[],ze=Ic[Tb]>Ic[Ek-2],Hk=Fk.length,Ae=Ic[Tb],Be=Ic[Tb+1];Tb+=2;for(var Ld=Ic[Tb],Md=Ic[Tb+1],Kh=0,Ef=Math.sqrt(Math.pow(Ld-Ae,2)+Math.pow(Md-
Be,2)),dd="",Lh=0,Ff=0;Ff<Hk;++Ff){var yo=ze?Hk-Ff-1:Ff;var Mh=Fk.charAt(yo);dd=ze?Mh+dd:dd+Mh;var Nd=wo(dd)-Lh;Lh+=Nd;for(var Ik=Gk+Nd/2;Tb<Ek-2&&Kh+Ef<Ik;)Ae=Ld,Be=Md,Tb+=2,Ld=Ic[Tb],Md=Ic[Tb+1],Kh+=Ef,Ef=Math.sqrt(Math.pow(Ld-Ae,2)+Math.pow(Md-Be,2));var zo=Ik-Kh,Od=Math.atan2(Md-Be,Ld-Ae);ze&&(Od+=0<Od?-Math.PI:Math.PI);if(void 0!==Df){var Gf=Od-Df;Gf+=Gf>Math.PI?-2*Math.PI:Gf<-Math.PI?2*Math.PI:0;if(Math.abs(Gf)>xo){var Pd=null;break a}}var Jk=zo/Ef,Kk=wa(Ae,Ld,Jk),Lk=wa(Be,Md,Jk);Df==Od?(ze&&
(cd[0]=Kk,cd[1]=Lk,cd[2]=Nd/2),cd[4]=dd):(dd=Mh,Lh=Nd,cd=[Kk,Lk,Nd/2,Od,dd],ze?Jh.unshift(cd):Jh.push(cd),Df=Od);Gk+=Nd}Pd=Jh}if(Pd){var Hf;if(uo){var ed=0;for(Hf=Pd.length;ed<Hf;++ed){var Eb=Pd[ed];var Nh=Eb[4];var gc=a.ba(Nh,!1,!0);u=Eb[2]+zk;y=Ih*gc.height+2*(.5-Ih)*zk-yk;Ci(a,b,Eb[0],Eb[1],gc,u,y,R,gc.height,1,0,0,Eb[3],Bk,!1,gc.width)}}if(so)for(ed=0,Hf=Pd.length;ed<Hf;++ed)Eb=Pd[ed],Nh=Eb[4],gc=a.ba(Nh,!0,!1),u=Eb[2],y=Ih*gc.height-yk,Ci(a,b,Eb[0],Eb[1],gc,u,y,R,gc.height,1,0,0,Eb[3],Bk,!1,
gc.width)}}Ji(a,R);++n;break;case 7:if(void 0!==g){Ma=F[1];var Mk=g(Ma);if(Mk)return Mk}++n;break;case 8:P?L++:a.pa(b,d);++n;break;case 9:q=F[1];t=F[2];var Ce=k[q];var De=k[q+1];I=Ce+.5|0;G=De+.5|0;if(I!==C||G!==D)b.moveTo(Ce,De),C=I,D=G;for(q+=2;q<t;q+=2)if(Ce=k[q],De=k[q+1],I=Ce+.5|0,G=De+.5|0,q==t-2||I!==C||G!==D)b.lineTo(Ce,De),C=I,D=G;++n;break;case 10:a.Ga=F[2];L&&(a.pa(b,d),L=0,J&&(b.stroke(),J=0));b.fillStyle=F[1];++n;break;case 11:J&&(b.stroke(),J=0);b.strokeStyle=F[1];b.lineWidth=F[2];b.lineCap=
F[3];b.lineJoin=F[4];b.miterLimit=F[5];kd&&(b.lineDashOffset=F[7],b.setLineDash(F[6]));++n;break;case 12:P?J++:b.stroke();++n;break;default:++n}}L&&a.pa(b,d);J&&b.stroke()}l.Ya=function(a,b,c,d){Ki(this,a,b,c,d,this.c,void 0,void 0)};function Li(a){var b=a.a;b.reverse();var c,d=b.length,e=-1;for(c=0;c<d;++c){var f=b[c];var g=f[0];if(7==g)e=c;else if(0==g){f[2]=c;f=a.a;for(g=c;e<g;){var h=f[e];f[e]=f[g];f[g]=h;++e;--g}e=-1}}}
l.kb=function(a,b){var c=this.state;a?(a=a.a,c.fillStyle=Rh(a?a:wh)):c.fillStyle=void 0;b?(a=b.c,c.strokeStyle=Rh(a?a:yh),a=b.b,c.lineCap=void 0!==a?a:"round",a=b.l,c.lineDash=a?a.slice():xh,a=b.g,c.lineDashOffset=a?a:0,a=b.f,c.lineJoin=void 0!==a?a:"round",a=b.j,c.lineWidth=void 0!==a?a:1,b=b.v,c.miterLimit=void 0!==b?b:10,c.lineWidth>this.J&&(this.J=c.lineWidth,this.b=null)):(c.strokeStyle=void 0,c.lineCap=void 0,c.lineDash=null,c.lineDashOffset=void 0,c.lineJoin=void 0,c.lineWidth=void 0,c.miterLimit=
void 0)};function Mi(a,b,c){var d=b.strokeStyle,e=b.lineCap,f=b.lineDash,g=b.lineDashOffset,h=b.lineJoin,k=b.lineWidth,m=b.miterLimit;b.og==d&&b.ig==e&&Vb(b.jg,f)&&b.kg==g&&b.lg==h&&b.mg==k&&b.ng==m||(c&&(void 0!=b.Ib&&b.Ib!=a.coordinates.length&&(a.c.push([12]),b.Ib=a.coordinates.length),b.Ib=0),a.c.push([11,d,k*a.pixelRatio,e,h,m,Di(a,f),g*a.pixelRatio]),c&&a.c.push([1]),b.og=d,b.ig=e,b.jg=f,b.kg=g,b.lg=h,b.mg=k,b.ng=m)}
function Ii(a,b){a.ka[2]=a.c.length;a.ka=null;a.Ca[2]=a.a.length;a.Ca=null;b=[7,b];a.c.push(b);a.a.push(b)}l.lc=la;function Fi(a){a.b||(a.b=Fa(a.Ra),0<a.J&&Ea(a.b,a.resolution*(a.J+1)/2,a.b));return a.b};function Ni(a,b,c,d,e,f){Bi.call(this,a,b,c,d,e,f);this.L=this.K=this.A=null;this.C=this.H=this.o=this.i=this.v=this.u=this.B=this.f=this.g=this.j=this.l=void 0}v(Ni,Bi);
Ni.prototype.Sc=function(a,b){if(this.L){Hi(this,b);var c=a.aa(),d=this.coordinates.length;a=Ei(this,c,0,c.length,a.ga(),!1,!1);this.c.push([6,d,a,this.L,this.l,this.j,this.A,this.g,this.f,this.B,this.u,this.v,this.i,this.o*this.pixelRatio,this.H,this.C]);this.a.push([6,d,a,this.K,this.l,this.j,this.A,this.g,this.f,this.B,this.u,this.v,this.i,this.o,this.H,this.C]);Ii(this,b)}};
Ni.prototype.Qc=function(a,b){if(this.L){Hi(this,b);var c=a.aa(),d=this.coordinates.length;a=Ei(this,c,0,c.length,a.ga(),!1,!1);this.c.push([6,d,a,this.L,this.l,this.j,this.A,this.g,this.f,this.B,this.u,this.v,this.i,this.o*this.pixelRatio,this.H,this.C]);this.a.push([6,d,a,this.K,this.l,this.j,this.A,this.g,this.f,this.B,this.u,this.v,this.i,this.o,this.H,this.C]);Ii(this,b)}};
Ni.prototype.lc=function(){Li(this);this.j=this.l=void 0;this.L=this.K=null;this.C=this.H=this.i=this.v=this.u=this.B=this.f=this.o=this.g=void 0};Ni.prototype.wc=function(a,b){var c=a.$b(),d=a.yb(),e=a.Se(1),f=a.ba(1),g=a.oc();this.l=c[0];this.j=c[1];this.A=b;this.K=e;this.L=f;this.g=d[1];this.f=a.b;this.B=g[0];this.u=g[1];this.v=a.B;this.i=a.i;this.o=a.j;this.H=a.o;this.C=d[0]};function Oi(a,b,c,d,e,f){Bi.call(this,a,b,c,d,e,f)}v(Oi,Bi);function Pi(a,b,c,d,e){var f=a.coordinates.length;b=Ei(a,b,c,d,e,!1,!1);f=[9,f,b];a.c.push(f);a.a.push(f);return d}Oi.prototype.Oc=function(a,b){var c=this.state,d=c.lineWidth;void 0!==c.strokeStyle&&void 0!==d&&(Mi(this,c,!0),Hi(this,b),this.a.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset],[1]),c=a.aa(),Pi(this,c,0,c.length,a.ga()),this.a.push([12]),Ii(this,b))};
Oi.prototype.Pc=function(a,b){var c=this.state,d=c.lineWidth;if(void 0!==c.strokeStyle&&void 0!==d){Mi(this,c,!0);Hi(this,b);this.a.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset],[1]);c=a.Ma();d=a.aa();a=a.ga();var e=0,f;var g=0;for(f=c.length;g<f;++g)e=Pi(this,d,e,c[g],a);this.a.push([12]);Ii(this,b)}};Oi.prototype.lc=function(){var a=this.state;void 0!=a.Ib&&a.Ib!=this.coordinates.length&&this.c.push([12]);Li(this);this.state=null};function Qi(a,b,c,d,e,f){Bi.call(this,a,b,c,d,e,f)}v(Qi,Bi);function Ri(a,b,c,d,e){var f=a.state,g=void 0!==f.fillStyle;f=void 0!=f.strokeStyle;var h=d.length,k=[1];a.c.push(k);a.a.push(k);for(k=0;k<h;++k){var m=d[k],n=a.coordinates.length;c=Ei(a,b,c,m,e,!0,!f);c=[9,n,c];a.c.push(c);a.a.push(c);f&&(c=[3],a.c.push(c),a.a.push(c));c=m}b=[8];a.a.push(b);g&&a.c.push(b);f&&(g=[12],a.c.push(g),a.a.push(g));return c}
Qi.prototype.Nc=function(a,b){var c=this.state,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){Si(this,a);Hi(this,b);this.a.push([10,Oh(wh)]);void 0!==c.strokeStyle&&this.a.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);var e=a.aa();d=this.coordinates.length;Ei(this,e,0,e.length,a.ga(),!1,!1);a=[1];d=[2,d];this.c.push(a,d);this.a.push(a,d);a=[8];this.a.push(a);void 0!==c.fillStyle&&this.c.push(a);void 0!==c.strokeStyle&&(c=[12],this.c.push(c),
this.a.push(c));Ii(this,b)}};Qi.prototype.Tc=function(a,b){var c=this.state;Si(this,a);Hi(this,b);this.a.push([10,Oh(wh)]);void 0!==c.strokeStyle&&this.a.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);c=a.Ma();var d=a.Xa();Ri(this,d,0,c,a.ga());Ii(this,b)};
Qi.prototype.Rc=function(a,b){var c=this.state,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){Si(this,a);Hi(this,b);this.a.push([10,Oh(wh)]);void 0!==c.strokeStyle&&this.a.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);c=a.Eb();d=$h(a);a=a.ga();var e=0,f;var g=0;for(f=c.length;g<f;++g)e=Ri(this,d,e,c[g],a);Ii(this,b)}};
Qi.prototype.lc=function(){Li(this);this.state=null;var a=this.$a;if(0!==a){var b=this.coordinates,c;var d=0;for(c=b.length;d<c;++d)b[d]=a*Math.round(b[d]/a)}};function Si(a,b){var c=a.state,d=c.fillStyle;if(void 0!==d&&("string"!==typeof d||c.hg!=d)){var e=[10,d];"string"!==typeof d&&(b=b.I(),e.push([b[0],b[3]]));a.c.push(e);c.hg=c.fillStyle}void 0!==c.strokeStyle&&Mi(a,c,!1)};var Ti="Polygon Circle LineString Image Text Default".split(" "),Ui={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};function Vi(a,b,c,d,e,f){Bi.call(this,a,b,c,d,e,f);this.ha="";this.f=this.i=0;this.o=void 0;this.H=0;this.l=this.j=null;this.g={};this.B=this.C=this.u="";this.A={}}v(Vi,Bi);
var Wi=function(){var a,b={};return function(c){var d=b[c];void 0==d&&(a||(a=document.createElement("span"),a.textContent="M",a.style.margin=a.style.padding="0 !important",a.style.position="absolute !important",a.style.left="-99999px !important"),a.style.font=c,document.body.appendChild(a),d=b[c]=a.offsetHeight,document.body.removeChild(a));return d}}(),Xi=function(){var a,b;return function(c,d){a||(a=Lf(1,1));c!=b&&(b=a.font=c);return a.measureText(d).width}}();
Vi.prototype.Wa=function(a,b){var c=this.j,d=this.l,e=this.g;if(""!==this.ha&&e&&(c||d)){c=this.coordinates.length;var f=a.D();d=null;var g=2,h=2;if("line"===e.placement){if(!Va(Fi(this),a.I()))return;d=a.aa();h=a.ga();if("LineString"==f)var k=[d.length];else if("MultiLineString"==f)k=a.Ma();else if("Polygon"==f)k=a.Ma().slice(0,1);else if("MultiPolygon"==f){var m=a.Eb();k=[];g=0;for(a=m.length;g<a;++g)k.push(m[g][0])}Hi(this,b);a=e.textAlign;var n=0,p;m=0;for(f=k.length;m<f;++m){if(void 0==a){for(var q,
t,u=void 0,y=void 0,C=g=t=q=void 0,D=p=n,I=0,G=0,R=n;n<k[m];n+=h){var L=d[n],J=d[n+1];void 0!==t&&(t=L-t,q=J-q,g=Math.sqrt(t*t+q*q),void 0!==y&&(G+=C,u=Math.acos((y*t+u*q)/(C*g)),u>e.maxAngle&&(G>I&&(I=G,p=R,D=n),G=0,R=n-h)),C=g,y=t,u=q);t=L;q=J}g=G+g>I?[R,n]:[p,D];n=g[0];p=g[1]}else p=k[m];for(g=n;g<p;g+=h)this.coordinates.push(d[g],d[g+1]);g=this.coordinates.length;n=k[m];Yi(this,c,g,this.v);c=g}}else{k=this.ba(this.ha,!!this.j,!!this.l);m=k.width/this.pixelRatio;switch(f){case "Point":case "MultiPoint":d=
a.aa();g=d.length;break;case "LineString":d=a.Xc();break;case "Circle":d=a.ja();break;case "MultiLineString":d=a.Yc();g=d.length;break;case "Polygon":d=a.ac();if(!e.exceedLength&&d[2]/this.resolution<m)return;h=3;break;case "MultiPolygon":f=ai(a);d=[];g=0;for(a=f.length;g<a;g+=3)(e.exceedLength||f[g+2]/this.resolution>=m)&&d.push(f[g],f[g+1]);g=d.length;if(0==g)return}g=Ei(this,d,0,g,h,!1,!1);Hi(this,b);e=c;c=g;a=this.g;m=this.l;d=this.pixelRatio;h=Ui[a.textAlign||"center"];a=Ui[a.textBaseline];m=
m&&m.lineWidth?m.lineWidth:0;h=h*k.width/d+2*(.5-h)*m;a=a*k.height/d+2*(.5-a)*m;this.c.push([6,e,c,k,(h-this.i)*d,(a-this.f)*d,this.v,k.height,1,0,0,this.o,this.H,1,!0,k.width]);this.a.push([6,e,c,k,(h-this.i)*d,(a-this.f)*d,this.v,k.height,1,0,0,this.o,this.H,1/d,!0,k.width])}Ii(this,b)}};
Vi.prototype.ba=function(a,b,c){var d=(c?this.B:"")+this.u+a+(b?this.C:"");if(!zh.j.hasOwnProperty(d)){var e=this.l,f=this.j,g=this.g,h=g.scale*this.pixelRatio,k=Ui[g.textAlign||"center"],m=c&&e.lineWidth?e.lineWidth:0;a=a.split("\n");var n=a.length,p=[],q=g.font;var t=a.length;var u=0;var y;for(y=0;y<t;++y){var C=Xi(q,a[y]);u=Math.max(u,C);p.push(C)}t=u;q=Wi(g.font);t=Lf(Math.ceil((t+m)*h),Math.ceil((q*n+m)*h));for(u=t.canvas;zh.b>zh.highWaterMark;)zh.pop();zh.set(d,u);1!=h&&t.scale(h,h);t.font=
g.font;c&&(t.strokeStyle=e.strokeStyle,t.lineWidth=m*(gd?h:1),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,kd&&e.lineDash.length&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset));b&&(t.fillStyle=f.fillStyle);t.textBaseline="top";t.textAlign="center";e=.5-k;h=k*u.width/h+e*m;if(c)for(c=0;c<n;++c)t.strokeText(a[c],h+e*p[c],.5*m+c*q);if(b)for(c=0;c<n;++c)t.fillText(a[c],h+e*p[c],.5*m+c*q)}return zh.get(d)};
function Yi(a,b,c,d){var e=a.pixelRatio,f=a.l,g=!!a.j,h=!!f,k=a.g,m=Ui[k.textBaseline],n=a.f*e,p=Ui[k.textAlign||"center"],q=a.ha,t=k.font,u=k.scale;f=f?f.lineWidth*u/2:0;var y=a.A;a.c.push([5,b,c,m,d,k.exceedLength,g,k.maxAngle,function(a){var b=y[a];b||(b=y[a]=Xi(t,a));return b*u*e},n,h,f*e,q,p,1]);a.a.push([5,b,c,m,d,k.exceedLength,g,k.maxAngle,function(a){var b=y[a];b||(b=y[a]=Xi(t,a));return b*u},n,h,f,q,p,1/e])}
Vi.prototype.Ua=function(a,b){var c,d;if(a){this.v=b;(d=a.ua())?(b=this.j,b||(b=this.j={}),b.fillStyle=Rh(d.a||wh)):b=this.j=null;if(c=a.qa()){d=this.l;d||(d=this.l={});var e=c.l,f=c.g,g=c.j,h=c.v;d.lineCap=c.b||"round";d.lineDash=e?e.slice():xh;d.lineDashOffset=void 0===f?0:f;d.lineJoin=c.f||"round";d.lineWidth=void 0===g?1:g;d.miterLimit=void 0===h?10:h;d.strokeStyle=Rh(c.c||yh)}else d=this.l=null;c=this.g;e=a.a||"10px sans-serif";Bh(e);f=a.c;c.exceedLength=a.i;c.font=e;c.maxAngle=a.o;c.placement=
a.H;c.textAlign=a.f;c.textBaseline=a.v||"middle";c.scale=void 0===f?1:f;e=a.l;f=a.j;g=a.b;h=a.g;this.ha=a.ra()||"";this.i=void 0===e?0:e;this.f=void 0===f?0:f;this.o=void 0===g?!1:g;this.H=void 0===h?0:h;this.B=d?("string"==typeof d.strokeStyle?d.strokeStyle:w(d.strokeStyle))+d.lineCap+d.lineDashOffset+"|"+d.lineWidth+d.lineJoin+d.miterLimit+"["+d.lineDash.join()+"]":"";this.u=c.font+(c.textAlign||"?")+c.scale;this.C=b?"string"==typeof b.fillStyle?b.fillStyle:"|"+w(b.fillStyle):""}else this.ha=""};function Zi(a,b,c,d,e,f,g){this.j=f;this.l=null;this.H=a;this.c=b;this.v=e;this.i=d;this.o=c;this.b=g;this.a={};this.g=Lf(1,1);this.f=Ke()}v(Zi,zi);var $i={0:[[!0]]};function aj(a,b,c){var d,e=Math.floor(a.length/2);if(b>=e)for(d=e;d<b;d++)a[d][c]=!0;else if(b<e)for(d=b+1;d<e;d++)a[d][c]=!0}
function bj(a){if(void 0!==$i[a])return $i[a];for(var b=2*a+1,c=Array(b),d=0;d<b;d++)c[d]=Array(b);b=a;for(var e=d=0;b>=d;)aj(c,a+b,a+d),aj(c,a+d,a+b),aj(c,a-d,a+b),aj(c,a-b,a+d),aj(c,a-b,a-d),aj(c,a-d,a-b),aj(c,a+d,a-b),aj(c,a+b,a-d),d++,e+=1+2*d,0<2*(e-b)+1&&(--b,e+=1-2*b);return $i[a]=c}function cj(a,b,c,d,e){for(var f=Object.keys(a).map(Number).sort(Rb),g=0,h=f.length;g<h;++g)for(var k=a[f[g].toString()],m=k.length-1;0<=m;){var n=k[m--],p=k[m--];if(n=Ki(p,b,n,c,{},p.a,d,e))return n}}
function dj(a,b){var c=null;a.j&&(b?(c=a.l,c[4]++):(c=a.l=Ba(),c.push(1)));return c}function ej(a){for(var b in a.a){var c=a.a[b],d;for(d in c)c[d].lc()}}
Zi.prototype.Ea=function(a,b,c,d,e,f,g){function h(a){for(var b=n.getImageData(0,0,k,k).data,c=0;c<k;c++)for(var d=0;d<k;d++)if(q[c][d]&&0<b[4*(d*k+c)+3]){if(a=f(a))return a;n.clearRect(0,0,k,k);return}}d=Math.round(d);var k=2*d+1,m=Pe(this.f,d+.5,d+.5,1/b,-1/b,-c,-a[0],-a[1]),n=this.g;n.canvas.width!==k||n.canvas.height!==k?(n.canvas.width=k,n.canvas.height=k):n.clearRect(0,0,k,k);if(void 0!==this.b){var p=Ba();Da(p,a);Ea(p,b*(this.b+d),p)}var q=bj(d);a=fj(this,n,m,c,e,h,p,g);!a&&g&&(a=cj(g,n,c,
h,p));return a};function gj(a,b){var c=a.c;a=c[0];var d=c[1],e=c[2];c=c[3];a=[a,d,a,c,e,c,e,d];Ie(a,0,8,2,b,a);return a}function hj(a,b,c){var d=void 0!==b?b.toString():"0";b=a.a[d];void 0===b&&(b={},a.a[d]=b);d=b[c];void 0===d&&(d=new ij[c](a.H,a.c,a.o,a.i,a.v,a.j),b[c]=d);return d}
Zi.prototype.Ya=function(a,b,c,d,e,f){var g=Object.keys(this.a).map(Number);g.sort(Rb);a.save();var h=gj(this,b);a.beginPath();a.moveTo(h[0],h[1]);a.lineTo(h[2],h[3]);a.lineTo(h[4],h[5]);a.lineTo(h[6],h[7]);a.clip();e=e?e:Ti;var k,m;h=0;for(k=g.length;h<k;++h){var n=g[h].toString();var p=this.a[n];var q=0;for(m=e.length;q<m;++q){var t=e[q];var u=p[t];void 0!==u&&(!f||"Image"!=t&&"Text"!=t?u.Ya(a,b,c,d):(t=f[n])?t.push(u,b.slice(0)):f[n]=[u,b.slice(0)])}}a.restore()};
function fj(a,b,c,d,e,f,g,h){var k=Object.keys(a.a).map(Number);k.sort(Rb);var m,n;for(m=k.length-1;0<=m;--m){var p=k[m].toString();var q=a.a[p];for(n=Ti.length-1;0<=n;--n){var t=Ti[n];var u=q[t];if(void 0!==u)if(!h||"Image"!=t&&"Text"!=t){if(u=Ki(u,b,c,d,e,u.a,f,g))return u}else(t=h[p])?t.push(u,c.slice(0)):h[p]=[u,c.slice(0)]}}}var ij={Circle:Qi,Default:Bi,Image:Ni,LineString:Oi,Polygon:Qi,Text:Vi};function jj(a,b){return w(a)-w(b)}function kj(a,b){a=.5*a/b;return a*a}function lj(a,b,c,d,e,f){var g=!1,h;if(h=c.ba()){var k=h.nc();2==k||3==k?h.uf(e,f):(0==k&&h.load(),h.ne(e,f),g=!0)}if(e=(0,c.Ia)(b))if(d=e.bc(d),c.ad())mj(a,d,c,b);else(0,nj[d.D()])(a,d,c,b);return g}function mj(a,b,c,d){if("GeometryCollection"==b.D()){b=hb(b.a);for(var e=0,f=b.length;e<f;++e)mj(a,b[e],c,d)}else hj(a,c.sa(),"Default").Wd(b,d,c.ad())}
var nj={Point:function(a,b,c,d){var e=c.ba();if(e){if(2!=e.nc())return;var f=hj(a,c.sa(),"Image");f.wc(e,dj(a,!1));f.Sc(b,d)}if(f=c.ra())c=hj(a,c.sa(),"Text"),c.Ua(f,dj(a,!!e)),c.Wa(b,d)},LineString:function(a,b,c,d){var e=c.qa();if(e){var f=hj(a,c.sa(),"LineString");f.kb(null,e);f.Oc(b,d)}if(e=c.ra())c=hj(a,c.sa(),"Text"),c.Ua(e,dj(a,!1)),c.Wa(b,d)},Polygon:function(a,b,c,d){var e=c.ua(),f=c.qa();if(e||f){var g=hj(a,c.sa(),"Polygon");g.kb(e,f);g.Tc(b,d)}if(e=c.ra())c=hj(a,c.sa(),"Text"),c.Ua(e,dj(a,
!1)),c.Wa(b,d)},MultiPoint:function(a,b,c,d){var e=c.ba();if(e){if(2!=e.nc())return;var f=hj(a,c.sa(),"Image");f.wc(e,dj(a,!1));f.Qc(b,d)}if(f=c.ra())c=hj(a,c.sa(),"Text"),c.Ua(f,dj(a,!!e)),c.Wa(b,d)},MultiLineString:function(a,b,c,d){var e=c.qa();if(e){var f=hj(a,c.sa(),"LineString");f.kb(null,e);f.Pc(b,d)}if(e=c.ra())c=hj(a,c.sa(),"Text"),c.Ua(e,dj(a,!1)),c.Wa(b,d)},MultiPolygon:function(a,b,c,d){var e=c.ua(),f=c.qa();if(f||e){var g=hj(a,c.sa(),"Polygon");g.kb(e,f);g.Rc(b,d)}if(e=c.ra())c=hj(a,
c.sa(),"Text"),c.Ua(e,dj(a,!1)),c.Wa(b,d)},GeometryCollection:function(a,b,c,d){b=b.a;var e;var f=0;for(e=b.length;f<e;++f)(0,nj[b[f].D()])(a,b[f],c,d)},Circle:function(a,b,c,d){var e=c.ua(),f=c.qa();if(e||f){var g=hj(a,c.sa(),"Circle");g.kb(e,f);g.Nc(b,d)}if(e=c.ra())c=hj(a,c.sa(),"Text"),c.Ua(e,dj(a,!1)),c.Wa(b,d)}};function Xf(a){ji.call(this,a);this.g=a.b?yi.hb(9):null;this.f=!1;this.u=-1;this.B=NaN;this.o=Ba();this.b=this.H=null;this.i=Lf();z(zh,"clear",this.Ne,this)}v(Xf,ji);Xf.handles=function(a,b){return"canvas"===a&&"VECTOR"===b.D()};Xf.create=function(a,b){return new Xf(b)};l=Xf.prototype;l.ca=function(){Ac(zh,"clear",this.Ne,this);ji.prototype.ca.call(this)};
l.Ud=function(a,b,c){var d=a.extent,e=a.pixelRatio,f=b.fd?a.skippedFeatureUids:{},g=a.viewState,h=g.projection,k=g.rotation,m=h.I(),n=this.a.$(),p=mi(this,a,0);li(this,"precompose",c,a,p);var q=b.extent;(g=void 0!==q)&&ki(c,a,q);var t=this.b;if(t&&!db(t.a)){var u=q=0,y=1!==b.opacity,C=Lc(this.a,"render");if(y||C){var D=c.canvas.width;var I=c.canvas.height;if(k){var G=Math.round(Math.sqrt(D*D+I*I));q=(G-D)/2;u=(G-I)/2;D=I=G}this.i.canvas.width=D;this.i.canvas.height=I;D=this.i}else D=c;I=D.globalAlpha;
y||(D.globalAlpha=b.opacity);D!=c&&D.translate(q,u);G=a.size[0]*e;e*=a.size[1];Ch(D,-k,G/2,e/2);t.Ya(D,p,k,f);if(n.B&&h.j&&!Ha(m,d)){h=d[0];n=Xa(m);for(var R=0;h<m[0];)--R,p=n*R,p=mi(this,a,p),t.Ya(D,p,k,f),h+=n;R=0;for(h=d[2];h>m[2];)++R,p=n*R,p=mi(this,a,p),t.Ya(D,p,k,f),h-=n;p=mi(this,a,0)}Ch(D,k,G/2,e/2);D!=c&&(C&&li(this,"render",D,a,p),y?(d=c.globalAlpha,c.globalAlpha=b.opacity,c.drawImage(D.canvas,-q,-u),c.globalAlpha=d):c.drawImage(D.canvas,-q,-u),D.translate(-q,-u));y||(D.globalAlpha=I)}g&&
c.restore();this.g&&this.g.clear();this.pc(c,a,b,p)};l.Ea=function(a,b,c,d,e){if(this.b){var f=this.a,g={};a=this.b.Ea(a,b.viewState.resolution,b.viewState.rotation,c,{},function(a){var b=w(a).toString();if(!(b in g))return g[b]=!0,d.call(e,a,f)},f.b?{}:null);this.g&&this.g.clear();return a}};l.Ne=function(){var a=this.a;a.Hb()&&this.b&&a.c()};l.Oe=function(){ei(this)};
l.Lb=function(a){var b=this.a,c=b.$();gi(a,c);var d=a.viewHints[0],e=a.viewHints[1],f=b.M,g=b.X;if(!this.f&&!f&&d||!g&&e)return!0;f=a.extent;var h=a.viewState;g=h.projection;var k=h.resolution,m=a.pixelRatio;d=b.j;var n=b.i;e=b.get(oj);void 0===e&&(e=jj);f=Ea(f,n*k);n=h.projection.I();c.B&&h.projection.j&&!Ha(n,a.extent)&&(a=Math.max(Xa(f)/2,Xa(n)),f[0]=n[0]-a,f[2]=n[2]+a);if(!this.f&&this.B==k&&this.u==d&&this.H==e&&Ha(this.o,f))return!0;this.b=null;this.f=!1;var p=new Zi(.5*k/m,f,k,m,c.M,this.g,
b.i);c.ed(f,k,g);a=function(a){var c=a.cb();if(c)var d=c.call(a,k);else(c=b.cb())&&(d=c(a,k));if(d){if(d){c=!1;if(Array.isArray(d))for(var e=0,f=d.length;e<f;++e)c=lj(p,a,d[e],kj(k,m),this.Oe,this)||c;else c=lj(p,a,d,kj(k,m),this.Oe,this);a=c}else a=!1;this.f=this.f||a}}.bind(this);if(e){var q=[];pj(c,f,function(a){q.push(a)},this);q.sort(e);c=0;for(g=q.length;c<g;++c)a(q[c])}else pj(c,f,a,this);ej(p);this.B=k;this.u=d;this.H=e;this.o=f;this.b=p;return!0};function Yf(a){this.context=null;Wf.call(this,a);this.o=a.b?yi.hb(9):null;this.A=!1;this.la=Ke();this.X="vector"==a.o?1:0;z(zh,"clear",this.Pe,this)}v(Yf,Wf);Yf.handles=function(a,b){return"canvas"===a&&"VECTOR_TILE"===b.D()};Yf.create=function(a,b){return new Yf(b)};var qj={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"]},rj={image:["Default"],hybrid:["Image","Text","Default"],vector:Ti};l=Yf.prototype;l.ca=function(){Ac(zh,"clear",this.Pe,this);Wf.prototype.ca.call(this)};
l.Lb=function(a,b){var c=this.a,d=c.j;this.K!=d&&(this.f.length=0,c=c.o,this.context||"vector"==c||(this.context=Lf()),this.context&&"vector"==c&&(this.context=null));this.K=d;return Wf.prototype.Lb.apply(this,arguments)};
l.Uc=function(a,b,c,d,e,f,g,h,k){var m=a,n=this.a,p=b.pixelRatio,q=b.viewState.projection,t=n.j,u=n.get(oj)||null,y=sj(m,n);if(y.Zb||y.uc!=t||y.zd!=u){var C=n.$(),D=C.tileGrid,I=C.ya(q),G=I.a[m.ta[0]];I=hc(I,m.v);for(var R=0,L=m.a.length;R<L;++R){var J=m.j[m.a[R]];if(3!=J.state){var V=hc(D,J.ta),K=Ua(I,V),P=Oa(V,K)?null:Ea(K,n.i*G),F=J.o,Ma=!1;Mb(q,F)||(Ma=!0,J.o=q);y.Zb=!1;K=new Zi(0,K,G,p,C.u,this.o,n.i);var Ec=kj(G,p),ec=J.j;u&&u!==y.zd&&ec.sort(u);for(var Ca,Fc=0,Jd=ec.length;Fc<Jd;++Fc){Ca=ec[Fc];
if(Ma){if("tile-pixels"==F.c){F.Bd=V;var ab=F,$a=J.I();ab.g=$a;ab.j=!(!ab.b||!$a)}Ca.O().xb(F,q)}if(!P||Va(P,Ca.I()))if($a=void 0,(ab=Ca.cb())?$a=ab.call(Ca,G):(ab=n.cb())&&($a=ab(Ca,G)),$a){ab=Ec;var Dc=K;if($a){var Kd=!1;if(Array.isArray($a))for(var ye=0,Hh=$a.length;ye<Hh;++ye)Kd=lj(Dc,Ca,$a[ye],ab,this.Qe,this)||Kd;else Kd=lj(Dc,Ca,$a,ab,this.Qe,this);Ca=Kd}else Ca=!1;this.A=this.A||Ca;y.Zb=y.Zb||Ca}}ej(K);for(var Hc in K.a);V=m.ta.toString();P=K;J.b[w(n)+","+V]=P}}y.uc=t;y.zd=u}if(this.context){y=
b;n=this.a;q=sj(m,n);t=n.j;if((p=qj[n.o])&&q.Ad!==t)for(q.Ad=t,C=m.v,G=C[0],q=y.pixelRatio,Hc=n.$(),D=Hc.ya(y.viewState.projection),t=D.a[G],u=tj(m,n),y=Hc.dc(G,q,y.viewState.projection),u.canvas.width=y[0],u.canvas.height=y[1],y=hc(D,C),C=0,D=m.a.length;C<D;++C)G=m.j[m.a[C]],3!=G.state&&(Hc=q/t,I=Me(this.la,1,1,0,0),Le(I,Me(Je,Hc,-Hc,0,0)),Le(I,Me(Je,1,1,-y[0],-y[3])),uj(G,n,m.ta.toString()).Ya(u,I,0,{},p));Wf.prototype.Uc.apply(this,arguments)}};
l.Ea=function(a,b,c,d,e){var f=b.viewState.resolution,g=b.viewState.rotation;c=void 0==c?0:c;var h=this.a,k=h.b?{}:null,m={},n=this.f;b=h.$().ya(b.viewState.projection);var p;var q=0;for(p=n.length;q<p;++q){var t=n[q];var u=t.v;u=hc(b,u,this.M);var y=Ea(u,c*f,y);if(Ia(y,a[0],a[1])){u=0;for(var C=t.a.length;u<C;++u){var D=t.j[t.a[u]];if(3!=D.state){D=uj(D,h,t.ta.toString());var I=I||D.Ea(a,f,g,c,{},function(a){var b=w(a).toString();if(!(b in m))return m[b]=!0,d.call(e,a,h)},k)}}}}this.o&&this.o.clear();
return I};l.Pe=function(){var a=this.a;a.Hb()&&void 0!==this.K&&a.c()};l.Qe=function(){ei(this)};
l.pc=function(a,b,c){var d=this.a,e=d.b?{}:null,f=d.$(),g=d.o,h=rj[g],k=b.pixelRatio,m=b.viewState.rotation,n=b.size;Ch(a,-m,Math.round(k*n[0]/2),Math.round(k*n[1]/2));k=this.f;f=f.ya(b.viewState.projection);n=[];for(var p=[],q=k.length-1;0<=q;--q){var t=k[q];if(5!=t.state)for(var u=t.ta,y=hc(f,u)[0]-hc(f,t.v)[0],C=void 0,D=0,I=t.a.length;D<I;++D){var G=t.j[t.a[D]];if(3!=G.state){var R=uj(G,d,u.toString()),L;if(!(L="vector"==g))a:{L=void 0;for(L in R.a)for(var J=R.a[L],V=0,K=h.length;V<K;++V)if(h[V]in
J){L=!0;break a}L=!1}if(L){C||(C=mi(this,b,y));G=G.ta[0];L=gj(R,C);a.save();a.globalAlpha=c.opacity;J=0;for(V=n.length;J<V;++J)K=n[J],G<p[J]&&(a.beginPath(),a.moveTo(L[0],L[1]),a.lineTo(L[2],L[3]),a.lineTo(L[4],L[5]),a.lineTo(L[6],L[7]),a.moveTo(K[6],K[7]),a.lineTo(K[4],K[5]),a.lineTo(K[2],K[3]),a.lineTo(K[0],K[1]),a.clip());R.Ya(a,C,m,{},h,e);a.restore();n.push(L);p.push(G)}}}}if(e){d=a;g=Object.keys(e).map(Number).sort(Rb);h=0;for(k=g.length;h<k;++h)for(f=e[g[h].toString()],n=0,p=f.length;n<p;)q=
f[n++],t=f[n++],q.Ya(d,t,m,{});this.o.clear()}Wf.prototype.pc.apply(this,arguments)};Tf("MAP_RENDERER",si);Uf();function vj(a){this.b=a.opacity;this.B=a.rotateWithView;this.i=a.rotation;this.j=a.scale;this.o=a.snapToPixel};function wj(a){this.C=this.v=this.c=null;this.pa=void 0!==a.fill?a.fill:null;this.ia=[0,0];this.f=a.points;this.a=void 0!==a.radius?a.radius:a.radius1;this.l=a.radius2;this.g=void 0!==a.angle?a.angle:0;this.oa=void 0!==a.stroke?a.stroke:null;this.u=this.ka=this.A=null;this.H=a.atlasManager;xj(this,this.H);vj.call(this,{opacity:1,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1,rotation:void 0!==a.rotation?a.rotation:0,scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:!0})}
v(wj,vj);l=wj.prototype;l.clone=function(){var a=new wj({fill:this.ua()?this.ua().clone():void 0,points:this.f,radius:this.a,radius2:this.l,angle:this.g,snapToPixel:this.o,stroke:this.qa()?this.qa().clone():void 0,rotation:this.i,rotateWithView:this.B,atlasManager:this.H});a.b=this.b;a.j=this.j;return a};l.$b=function(){return this.A};l.ua=function(){return this.pa};l.Se=function(){return this.C};l.ba=function(){return this.v};l.ce=function(){return this.u};l.nc=function(){return 2};l.oc=function(){return this.ia};
l.yb=function(){return this.ka};l.qa=function(){return this.oa};l.ne=function(){};l.load=function(){};l.uf=function(){};
function xj(a,b){var c="",d="",e=0,f=null,g=0,h=0;if(a.oa){var k=a.oa.c;null===k&&(k=yh);k=Rh(k);h=a.oa.j;void 0===h&&(h=1);f=a.oa.l;g=a.oa.g;kd||(f=null,g=0);d=a.oa.f;void 0===d&&(d="round");c=a.oa.b;void 0===c&&(c="round");e=a.oa.v;void 0===e&&(e=10)}var m=2*(a.a+h)+1;c={strokeStyle:k,sf:h,size:m,lineCap:c,lineDash:f,lineDashOffset:g,lineJoin:d,miterLimit:e};if(void 0===b){var n=Lf(m,m);a.v=n.canvas;b=m=a.v.width;a.Yd(c,n,0,0);a.pa?a.C=a.v:(n=Lf(c.size,c.size),a.C=n.canvas,a.Xd(c,n,0,0))}else m=
Math.round(m),(d=!a.pa)&&(n=a.Xd.bind(a,c)),a.oa?(e=a.oa,void 0===e.a&&(e.a="s",e.a=e.c?"string"===typeof e.c?e.a+e.c:e.a+w(e.c).toString():e.a+"-",e.a+=","+(void 0!==e.b?e.b.toString():"-")+","+(e.l?e.l.toString():"-")+","+(void 0!==e.g?e.g:"-")+","+(void 0!==e.f?e.f:"-")+","+(void 0!==e.v?e.v.toString():"-")+","+(void 0!==e.j?e.j.toString():"-")),e=e.a):e="-",a.pa?(f=a.pa,void 0===f.c&&(f.c=f.a instanceof CanvasPattern||f.a instanceof CanvasGradient?w(f.a).toString():"f"+(f.a?Oh(f.a):"-")),f=f.c):
f="-",a.c&&e==a.c[1]&&f==a.c[2]&&a.a==a.c[3]&&a.l==a.c[4]&&a.g==a.c[5]&&a.f==a.c[6]||(a.c=["r"+e+f+(void 0!==a.a?a.a.toString():"-")+(void 0!==a.l?a.l.toString():"-")+(void 0!==a.g?a.g.toString():"-")+(void 0!==a.f?a.f.toString():"-"),e,f,a.a,a.l,a.g,a.f]),n=b.add(a.c[0],m,m,a.Yd.bind(a,c),n),a.v=n.image,a.ia=[n.offsetX,n.offsetY],b=n.image.width,a.C=d?n.a:a.v;a.A=[m/2,m/2];a.ka=[m,m];a.u=[b,b]}
l.Yd=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();var e=this.f;if(Infinity===e)b.arc(a.size/2,a.size/2,this.a,0,2*Math.PI,!0);else{var f=void 0!==this.l?this.l:this.a;f!==this.a&&(e*=2);for(c=0;c<=e;c++){d=2*c*Math.PI/e-Math.PI/2+this.g;var g=0===c%2?this.a:f;b.lineTo(a.size/2+g*Math.cos(d),a.size/2+g*Math.sin(d))}}this.pa&&(c=this.pa.a,null===c&&(c=wh),b.fillStyle=Rh(c),b.fill());this.oa&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.sf,a.lineDash&&(b.setLineDash(a.lineDash),
b.lineDashOffset=a.lineDashOffset),b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.miterLimit=a.miterLimit,b.stroke());b.closePath()};
l.Xd=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();c=this.f;if(Infinity===c)b.arc(a.size/2,a.size/2,this.a,0,2*Math.PI,!0);else{d=void 0!==this.l?this.l:this.a;d!==this.a&&(c*=2);var e;for(e=0;e<=c;e++){var f=2*e*Math.PI/c-Math.PI/2+this.g;var g=0===e%2?this.a:d;b.lineTo(a.size/2+g*Math.cos(f),a.size/2+g*Math.sin(f))}}b.fillStyle=wh;b.fill();this.oa&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.sf,a.lineDash&&(b.setLineDash(a.lineDash),b.lineDashOffset=a.lineDashOffset),
b.stroke());b.closePath()};function yj(a){a=a||{};wj.call(this,{points:Infinity,fill:a.fill,radius:a.radius,snapToPixel:a.snapToPixel,stroke:a.stroke,atlasManager:a.atlasManager})}v(yj,wj);yj.prototype.clone=function(){var a=new yj({fill:this.ua()?this.ua().clone():void 0,stroke:this.qa()?this.qa().clone():void 0,radius:this.a,snapToPixel:this.o,atlasManager:this.H});a.b=this.b;a.j=this.j;return a};yj.prototype.kf=function(a){this.a=a;xj(this,this.H)};function zj(a){a=a||{};this.a=void 0!==a.color?a.color:null;this.c=void 0}zj.prototype.clone=function(){var a=this.a;return new zj({color:a&&a.slice?a.slice():a||void 0})};zj.prototype.l=function(a){this.a=a;this.c=void 0};function Aj(a){a=a||{};this.c=void 0!==a.color?a.color:null;this.b=a.lineCap;this.l=void 0!==a.lineDash?a.lineDash:null;this.g=a.lineDashOffset;this.f=a.lineJoin;this.v=a.miterLimit;this.j=a.width;this.a=void 0}l=Aj.prototype;l.clone=function(){var a=this.c;return new Aj({color:a&&a.slice?a.slice():a||void 0,lineCap:this.b,lineDash:this.l?this.l.slice():void 0,lineDashOffset:this.g,lineJoin:this.f,miterLimit:this.v,width:this.j})};l.ri=function(a){this.c=a;this.a=void 0};
l.ej=function(a){this.b=a;this.a=void 0};l.setLineDash=function(a){this.l=a;this.a=void 0};l.fj=function(a){this.j=a;this.a=void 0};function Bj(a){a=a||{};this.bb=null;this.Ia=Cj;void 0!==a.geometry&&this.Ba(a.geometry);this.pa=void 0!==a.fill?a.fill:null;this.L=void 0!==a.image?a.image:null;this.jb=void 0!==a.renderer?a.renderer:null;this.oa=void 0!==a.stroke?a.stroke:null;this.ha=void 0!==a.text?a.text:null;this.Af=a.zIndex}l=Bj.prototype;
l.clone=function(){var a=this.O();a&&a.clone&&(a=a.clone());return new Bj({geometry:a,fill:this.ua()?this.ua().clone():void 0,image:this.ba()?this.ba().clone():void 0,stroke:this.qa()?this.qa().clone():void 0,text:this.ra()?this.ra().clone():void 0,zIndex:this.sa()})};l.ad=function(){return this.jb};l.O=function(){return this.bb};l.ua=function(){return this.pa};l.jf=function(a){this.pa=a};l.ba=function(){return this.L};l.qa=function(){return this.oa};l.mf=function(a){this.oa=a};l.ra=function(){return this.ha};
l.nf=function(a){this.ha=a};l.sa=function(){return this.Af};l.Ba=function(a){"function"===typeof a?this.Ia=a:"string"===typeof a?this.Ia=function(b){return b.get(a)}:a?void 0!==a&&(this.Ia=function(){return a}):this.Ia=Cj;this.bb=a};l.pf=function(a){this.Af=a};function Dj(a){if("function"!==typeof a){if(Array.isArray(a))var b=a;else x(a instanceof Bj,41),b=[a];a=function(){return b}}return a}var Ej=null;
function Fj(){if(!Ej){var a=new zj({color:"rgba(255,255,255,0.4)"}),b=new Aj({color:"#3399CC",width:1.25});Ej=[new Bj({image:new yj({fill:a,stroke:b,radius:5}),fill:a,stroke:b})]}return Ej}
function Gj(){var a={},b=[255,255,255,1],c=[0,153,255,1];a.Polygon=[new Bj({fill:new zj({color:[255,255,255,.5]})})];a.MultiPolygon=a.Polygon;a.LineString=[new Bj({stroke:new Aj({color:b,width:5})}),new Bj({stroke:new Aj({color:c,width:3})})];a.MultiLineString=a.LineString;a.Circle=a.Polygon.concat(a.LineString);a.Point=[new Bj({image:new yj({radius:6,fill:new zj({color:c}),stroke:new Aj({color:b,width:1.5})}),zIndex:Infinity})];a.MultiPoint=a.Point;a.GeometryCollection=a.Polygon.concat(a.LineString,
a.Point);return a}function Cj(a){return a.O()};function B(a){Nc.call(this);this.b=void 0;this.a="geometry";this.f=null;this.i=void 0;this.g=null;z(this,Pc(this.a),this.ec,this);void 0!==a&&(a instanceof Qe||!a?this.Ba(a):this.na(a))}v(B,Nc);l=B.prototype;l.clone=function(){var a=new B(this.Fa());a.Za(this.a);var b=this.O();b&&a.Ba(b.clone());(b=this.f)&&a.pe(b);return a};l.O=function(){return this.get(this.a)};l.Bh=function(){return this.b};l.zg=function(){return this.a};l.Ch=function(){return this.f};l.cb=function(){return this.i};l.Jg=function(){this.c()};
l.ec=function(){this.g&&(vc(this.g),this.g=null);var a=this.O();a&&(this.g=z(a,"change",this.Jg,this));this.c()};l.Ba=function(a){this.set(this.a,a)};l.pe=function(a){this.i=(this.f=a)?Hj(a):void 0;this.c()};l.lb=function(a){this.b=a;this.c()};l.Za=function(a){Ac(this,Pc(this.a),this.ec,this);this.a=a;z(this,Pc(this.a),this.ec,this);this.ec()};
function Hj(a){var b;if("function"===typeof a)2==a.length?b=function(b){return a(this,b)}:b=a;else{if(Array.isArray(a))var c=a;else x(a instanceof Bj,41),c=[a];b=function(){return c}}return b};function Ij(a){Nc.call(this);a=a||{};this.a=null;this.g=Ob;this.f=new eb(6378137);this.b=void 0;z(this,Pc("projection"),this.Eh,this);z(this,Pc("tracking"),this.eh,this);void 0!==a.projection&&this.set("projection",Fb(a.projection));void 0!==a.trackingOptions&&this.set("trackingOptions",a.trackingOptions);this.xc(void 0!==a.tracking?a.tracking:!1)}v(Ij,Nc);l=Ij.prototype;l.ca=function(){this.xc(!1);Nc.prototype.ca.call(this)};
l.Eh=function(){var a=this.get("projection");a&&(this.g=Gb(Fb("EPSG:4326"),a),this.a&&this.set("position",this.g(this.a)))};l.eh=function(){if(ld){var a=this.fe();a&&void 0===this.b?this.b=navigator.geolocation.watchPosition(this.Gi.bind(this),this.Hi.bind(this),this.get("trackingOptions")):a||void 0===this.b||(navigator.geolocation.clearWatch(this.b),this.b=void 0)}};
l.Gi=function(a){var b=a.coords;this.set("accuracy",b.accuracy);this.set("altitude",null===b.altitude?void 0:b.altitude);this.set("altitudeAccuracy",null===b.altitudeAccuracy?void 0:b.altitudeAccuracy);this.set("heading",null===b.heading?void 0:ua(b.heading));this.a?(this.a[0]=b.longitude,this.a[1]=b.latitude):this.a=[b.longitude,b.latitude];a=this.g(this.a);this.set("position",a);this.set("speed",null===b.speed?void 0:b.speed);a=this.f;var c=this.a,d=b.accuracy;b=[];var e;for(e=0;32>e;++e)Ub(b,a.offset(c,
d,2*Math.PI*e/32));b.push(b[0],b[1]);a=new A(null);a.N("XY",b,[b.length]);a.Cb(this.g);this.set("accuracyGeometry",a);this.c()};l.Hi=function(a){a.type="error";this.xc(!1);this.l(a)};l.wg=function(){return this.get("accuracy")};l.Ag=function(){return this.get("heading")};l.Dh=function(){return this.get("position")};l.Fg=function(){return this.get("speed")};l.fe=function(){return this.get("tracking")};l.xc=function(a){this.set("tracking",a)};function Jj(a,b,c,d,e,f){var g=NaN,h=NaN,k=(c-b)/d;if(1===k)g=a[b],h=a[b+1];else if(2==k)g=(1-e)*a[b]+e*a[b+d],h=(1-e)*a[b+1]+e*a[b+d+1];else if(0!==k){h=a[b];k=a[b+1];var m=0;g=[0];var n;for(n=b+d;n<c;n+=d){var p=a[n],q=a[n+1];m+=Math.sqrt((p-h)*(p-h)+(q-k)*(q-k));g.push(m);h=p;k=q}c=e*m;k=0;m=g.length;for(n=!1;k<m;)e=k+(m-k>>1),h=+Rb(g[e],c),0>h?k=e+1:(m=e,n=!h);e=n?k:~k;0>e?(c=(c-g[-e-2])/(g[-e-1]-g[-e-2]),b+=(-e-2)*d,g=wa(a[b],a[b+d],c),h=wa(a[b+1],a[b+d+1],c)):(g=a[b+e*d],h=a[b+e*d+1])}return f?
(f[0]=g,f[1]=h,f):[g,h]}function Kj(a,b,c,d,e){if(0==b)return null;if(d<a[0+c-1])return e?(b=a.slice(0,0+c),b[c-1]=d,b):null;if(a[b-1]<d)return e?(b=a.slice(b-c,b),b[c-1]=d,b):null;if(d==a[0+c-1])return a.slice(0,0+c);e=0/c;for(b/=c;e<b;){var f=e+b>>1;d<a[(f+1)*c-1]?b=f:e=f+1}b=a[e*c-1];if(d==b)return a.slice((e-1)*c,(e-1)*c+c);f=(d-b)/(a[(e+1)*c-1]-b);b=[];var g;for(g=0;g<c-1;++g)b.push(wa(a[(e-1)*c+g],a[e*c+g],f));b.push(d);return b};function E(a,b){Re.call(this);this.b=null;this.u=this.A=this.i=-1;this.Y(a,b)}v(E,Re);l=E.prototype;l.dg=function(a){this.s?Ub(this.s,a):this.s=a.slice();this.c()};l.clone=function(){var a=new E(null);a.N(this.V,this.s.slice());return a};l.Pa=function(a,b,c,d){if(d<Ga(this.I(),a,b))return d;this.u!=this.j&&(this.A=Math.sqrt(Xe(this.s,0,this.s.length,this.a,0)),this.u=this.j);return Ze(this.s,0,this.s.length,this.a,this.A,!1,a,b,c,d)};
l.He=function(a,b){return"XYM"!=this.V&&"XYZM"!=this.V?null:Kj(this.s,this.s.length,this.a,a,void 0!==b?b:!1)};l.G=function(){return df(this.s,0,this.s.length,this.a)};l.$d=function(a,b){return Jj(this.s,0,this.s.length,this.a,a,b)};l.Vh=function(){return Ai(this.s,0,this.s.length,this.a)};l.Xc=function(){this.i!=this.j&&(this.b=this.$d(.5,this.b),this.i=this.j);return this.b};l.ub=function(a){var b=[];b.length=gf(this.s,0,this.s.length,this.a,a,b,0);a=new E(null);a.N("XY",b);return a};l.D=function(){return"LineString"};
l.Y=function(a,b){a?(Ue(this,b,a,1),this.s||(this.s=[]),this.s.length=bf(this.s,0,a,this.a),this.c()):this.N("XY",null)};l.N=function(a,b){Te(this,a,b);this.c()};function Lj(a){a=a||{};this.a=a.font;this.g=a.rotation;this.b=a.rotateWithView;this.c=a.scale;this.ha=a.text;this.f=a.textAlign;this.v=a.textBaseline;this.pa=void 0!==a.fill?a.fill:new zj({color:"#333"});this.o=void 0!==a.maxAngle?a.maxAngle:Math.PI/4;this.H=void 0!==a.placement?a.placement:"point";this.i=void 0!==a.exceedLength?a.exceedLength:!1;this.oa=void 0!==a.stroke?a.stroke:null;this.l=void 0!==a.offsetX?a.offsetX:0;this.j=void 0!==a.offsetY?a.offsetY:0}l=Lj.prototype;
l.clone=function(){return new Lj({font:this.a,placement:this.H,maxAngle:this.o,exceedLength:this.i,rotation:this.g,rotateWithView:this.b,scale:this.c,text:this.ra(),textAlign:this.f,textBaseline:this.v,fill:this.ua()?this.ua().clone():void 0,stroke:this.qa()?this.qa().clone():void 0,offsetX:this.l,offsetY:this.j})};l.ua=function(){return this.pa};l.qa=function(){return this.oa};l.ra=function(){return this.ha};l.dj=function(a){this.a=a};l.jf=function(a){this.pa=a};l.mf=function(a){this.oa=a};
l.nf=function(a){this.ha=a};function Mj(a,b,c){Kc.call(this);c=c?c:{};this.ta=a;this.state=b;this.c=null;this.key="";this.g=void 0===c.transition?250:c.transition;this.f={}}v(Mj,Kc);function Nj(a){a.l("change")}Mj.prototype.Sa=function(){return this.key+"/"+this.ta};function wi(a){if(!a.c)return a;var b=a.c;do{if(2==b.state)return b;b=b.c}while(b);return a}function vi(a,b){a.state=b;Nj(a)}
function xi(a,b,c){if(!a.g)return 1;var d=a.f[b];if(!d)d=c,a.f[b]=d;else if(-1===d)return 1;b=c-d+1E3/60;return b>=a.g?1:Math.pow(b/a.g,3)};function Oj(a,b,c,d,e,f){Mj.call(this,a,b,f);this.j=c;this.L=new Image;null!==d&&(this.L.crossOrigin=d);this.a=null;this.b=e}v(Oj,Mj);l=Oj.prototype;l.ca=function(){1==this.state&&(Pj(this),this.L=Qj());this.c&&Cc(this.c);this.state=5;Nj(this);Mj.prototype.ca.call(this)};l.ba=function(){return this.L};l.Sa=function(){return this.j};l.Fh=function(){this.state=3;Pj(this);this.L=Qj();Nj(this)};l.Gh=function(){this.state=this.L.naturalWidth&&this.L.naturalHeight?2:4;Pj(this);Nj(this)};
l.load=function(){if(0==this.state||3==this.state)this.state=1,Nj(this),this.a=[z(this.L,"error",this.Fh,this,!0),z(this.L,"load",this.Gh,this,!0)],this.b(this,this.j)};function Pj(a){a.a.forEach(vc);a.a=null}function Qj(){var a=Lf(1,1);a.fillStyle="rgba(0,0,0,0)";a.fillRect(0,0,1,1);return a.canvas};function Rj(a){this.c=yi.hb(a);this.a={}}l=Rj.prototype;l.da=function(a,b){a={T:a[0],R:a[1],W:a[2],U:a[3],value:b};this.c.da(a);this.a[w(b)]=a};l.load=function(a,b){for(var c=Array(b.length),d=0,e=b.length;d<e;d++){var f=a[d],g=b[d];f={T:f[0],R:f[1],W:f[2],U:f[3],value:g};c[d]=f;this.a[w(g)]=f}this.c.load(c)};l.remove=function(a){a=w(a);var b=this.a[a];delete this.a[a];return null!==this.c.remove(b)};function Sj(a,b,c){var d=a.a[w(c)];Oa([d.T,d.R,d.W,d.U],b)||(a.remove(c),a.da(b,c))}
function Tj(a){return a.c.all().map(function(a){return a.value})}function Uj(a,b){return a.c.search({T:b[0],R:b[1],W:b[2],U:b[3]}).map(function(a){return a.value})}l.forEach=function(a,b){return Vj(Tj(this),a,b)};function Wj(a,b,c,d){return Vj(Uj(a,b),c,d)}function Vj(a,b,c){for(var d,e=0,f=a.length;e<f&&!(d=b.call(c,a[e]));e++);return d}l.clear=function(){this.c.clear();this.a={}};l.I=function(a){var b=this.c.data;return Ja(b.T,b.R,b.W,b.U,a)};
l.concat=function(a){this.c.load(a.c.all());for(var b in a.a)this.a[b|0]=a.a[b|0]};function Xj(a){Nc.call(this);this.C=Fb(a.projection);this.ea=Yj(a.attributions);this.la=a.logo;this.xa=void 0!==a.state?a.state:"ready";this.B=void 0!==a.wrapX?a.wrapX:!1}v(Xj,Nc);function Yj(a){if(!a)return null;if(a instanceof tc)return function(){return[a.le]};if(Array.isArray(a)){if(a[0]instanceof tc){var b=a.map(function(a){return a.le});return function(){return b}}a.map(function(a){return new tc({html:a})});return function(){return a}}return"function"===typeof a?a:function(){return[a]}}
Xj.prototype.Ea=la;Xj.prototype.Kb=function(){this.c()};Tf("MAP_RENDERER",si);Uf();
function H(a){a=Za({},a);a.controls||(a.controls=pg());if(!a.interactions){var b=a,c={},d=new Sc,e=new qg;(void 0!==c.altShiftDragRotate?c.altShiftDragRotate:1)&&d.push(new Og);(void 0!==c.doubleClickZoom?c.doubleClickZoom:1)&&d.push(new xg({delta:c.zoomDelta,duration:c.zoomDuration}));(void 0!==c.dragPan?c.dragPan:1)&&d.push(new Kg({kinetic:e}));(void 0!==c.pinchRotate?c.pinchRotate:1)&&d.push(new mh);(void 0!==c.pinchZoom?c.pinchZoom:1)&&d.push(new qh({constrainResolution:c.constrainResolution,duration:c.zoomDuration}));
if(void 0!==c.keyboard?c.keyboard:1)d.push(new eh),d.push(new gh({delta:c.zoomDelta,duration:c.zoomDuration}));(void 0!==c.mouseWheelZoom?c.mouseWheelZoom:1)&&d.push(new ih({constrainResolution:c.constrainResolution,duration:c.zoomDuration}));(void 0!==c.shiftDragZoom?c.shiftDragZoom:1)&&d.push(new dh({duration:c.zoomDuration}));b.interactions=d}Zf.call(this,a)}v(H,Zf);function Zj(a){Nc.call(this);this.id=a.id;this.insertFirst=void 0!==a.insertFirst?a.insertFirst:!0;this.stopEvent=void 0!==a.stopEvent?a.stopEvent:!0;this.element=document.createElement("DIV");this.element.className=void 0!==a.className?a.className:"ol-overlay-container ol-selectable";this.element.style.position="absolute";this.autoPan=void 0!==a.autoPan?a.autoPan:!1;this.autoPanAnimation=a.autoPanAnimation||{};this.autoPanMargin=void 0!==a.autoPanMargin?a.autoPanMargin:20;this.a={Xb:"",gc:"",vc:"",
Ac:"",visible:!0};this.b=null;z(this,Pc(ak),this.Ig,this);z(this,Pc(bk),this.Pg,this);z(this,Pc(ck),this.Sg,this);z(this,Pc(dk),this.Ug,this);z(this,Pc(ek),this.Vg,this);void 0!==a.element&&this.set(ak,a.element);this.set(ck,void 0!==a.offset?a.offset:[0,0]);this.set(ek,void 0!==a.positioning?a.positioning:"top-left");void 0!==a.position&&this.qe(a.position)}v(Zj,Nc);l=Zj.prototype;l.Ig=function(){for(var a=this.element;a.lastChild;)a.removeChild(a.lastChild);(a=this.get(ak))&&this.element.appendChild(a)};
l.Pg=function(){this.b&&(Mf(this.element),vc(this.b),this.b=null);var a=this.get(bk);a&&(this.b=z(a,"postrender",this.render,this),fk(this),a=this.stopEvent?a.B:a.u,this.insertFirst?a.insertBefore(this.element,a.childNodes[0]||null):a.appendChild(this.element))};l.render=function(){fk(this)};l.Sg=function(){fk(this)};
l.Ug=function(){fk(this);if(this.get(dk)&&this.autoPan){var a=this.get(bk);if(a&&dg(a)){var b=gk(dg(a),a.wb()),c=this.get(ak),d=c.offsetWidth,e=getComputedStyle(c);d+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10);e=c.offsetHeight;var f=getComputedStyle(c);e+=parseInt(f.marginTop,10)+parseInt(f.marginBottom,10);var g=gk(c,[d,e]);c=this.autoPanMargin;Ha(b,g)||(d=g[0]-b[0],e=b[2]-g[2],f=g[1]-b[1],g=b[3]-g[3],b=[0,0],0>d?b[0]=d-c:0>e&&(b[0]=Math.abs(e)+c),0>f?b[1]=f-c:0>g&&(b[1]=Math.abs(g)+c),
0===b[0]&&0===b[1])||(c=a.Z().ja(),c=eg(a,c),b=[c[0]+b[0],c[1]+b[1]],a.Z().animate({center:a.Ja(b),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing}))}}};l.Vg=function(){fk(this)};l.setMap=function(a){this.set(bk,a)};l.qe=function(a){this.set(dk,a)};function gk(a,b){var c=a.getBoundingClientRect();a=c.left+window.pageXOffset;c=c.top+window.pageYOffset;return[a,c,a+b[0],c+b[1]]}function hk(a,b){a.a.visible!==b&&(a.element.style.display=b?"":"none",a.a.visible=b)}
function fk(a){var b=a.get(bk),c=a.get(dk);if(b&&b.b&&c){c=eg(b,c);var d=b.wb();b=a.element.style;var e=a.get(ck),f=a.get(ek);hk(a,!0);var g=e[0];e=e[1];if("bottom-right"==f||"center-right"==f||"top-right"==f)""!==a.a.gc&&(a.a.gc=b.left=""),g=Math.round(d[0]-c[0]-g)+"px",a.a.vc!=g&&(a.a.vc=b.right=g);else{""!==a.a.vc&&(a.a.vc=b.right="");if("bottom-center"==f||"center-center"==f||"top-center"==f)g-=a.element.offsetWidth/2;g=Math.round(c[0]+g)+"px";a.a.gc!=g&&(a.a.gc=b.left=g)}if("bottom-left"==f||
"bottom-center"==f||"bottom-right"==f)""!==a.a.Ac&&(a.a.Ac=b.top=""),c=Math.round(d[1]-c[1]-e)+"px",a.a.Xb!=c&&(a.a.Xb=b.bottom=c);else{""!==a.a.Xb&&(a.a.Xb=b.bottom="");if("center-left"==f||"center-center"==f||"center-right"==f)e-=a.element.offsetHeight/2;c=Math.round(c[1]+e)+"px";a.a.Ac!=c&&(a.a.Ac=b.top=c)}}else hk(a,!1)}var ak="element",bk="map",ck="offset",dk="position",ek="positioning";function ik(a,b,c,d,e,f){Mj.call(this,a,b,f);this.a=0;this.v=null;this.C=d;this.j=null;this.b={};this.B=e;this.H=c}v(ik,Mj);l=ik.prototype;l.ca=function(){this.j=null;this.b={};this.state=5;Nj(this);Mj.prototype.ca.call(this)};l.I=function(){return this.v||jk};l.Sa=function(){return this.H};function uj(a,b,c){return a.b[w(b)+","+c]}l.load=function(){0==this.state&&(vi(this,1),this.B(this,this.H),this.i(null,NaN,null))};l.ui=function(a,b,c){this.o=b;this.j=a;vi(this,2);this.v=c};
l.ti=function(){vi(this,3)};var jk=[0,0,4096,4096];function kk(a){a=a?a:{};var b=document.createElement("DIV");b.className=void 0!==a.className?a.className:"ol-mouse-position";gg.call(this,{element:b,render:a.render?a.render:lk,target:a.target});z(this,Pc(mk),this.Mh,this);a.coordinateFormat&&this.hf(a.coordinateFormat);a.projection&&this.set(mk,Fb(a.projection));this.o=void 0!==a.undefinedHTML?a.undefinedHTML:"";this.i=b.innerHTML;this.f=this.b=this.a=null}v(kk,gg);
function lk(a){a=a.frameState;a?this.a!=a.viewState.projection&&(this.a=a.viewState.projection,this.b=null):this.a=null;nk(this,this.f)}l=kk.prototype;l.Mh=function(){this.b=null};l.Qg=function(a){this.f=ad(this.g,a);nk(this,this.f)};l.Rg=function(){nk(this,null);this.f=null};l.setMap=function(a){gg.prototype.setMap.call(this,a);a&&(a=a.a,this.C.push(z(a,"mousemove",this.Qg,this),z(a,"mouseout",this.Rg,this)))};l.hf=function(a){this.set(ok,a)};
function nk(a,b){var c=a.o;if(b&&a.a){if(!a.b){var d=a.get(mk);a.b=d?Gb(a.a,d):Ob}if(b=a.g.Ja(b))a.b(b,b),c=(c=a.get(ok))?c(b):b.toString()}a.i&&c==a.i||(a.element.innerHTML=c,a.i=c)}var mk="projection",ok="coordinateFormat";function pk(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-scale-line";this.f=document.createElement("DIV");this.f.className=b+"-inner";this.a=document.createElement("DIV");this.a.className=b+" ol-unselectable";this.a.appendChild(this.f);this.o=null;this.i=void 0!==a.minWidth?a.minWidth:64;this.b=!1;this.u=void 0;this.B="";gg.call(this,{element:this.a,render:a.render?a.render:qk,target:a.target});z(this,Pc(rk),this.A,this);this.set(rk,a.units||"metric")}v(pk,gg);var sk=[1,2,5];
function qk(a){(a=a.frameState)?this.o=a.viewState:this.o=null;tk(this)}pk.prototype.A=function(){tk(this)};
function tk(a){var b=a.o;if(b){var c=b.center,d=b.projection,e=a.get(rk);b=Db(d,b.resolution,c,"degrees"==e?"degrees":"m");var f=a.i*b;c="";"degrees"==e?(c=lb.degrees,"degrees"==d.c?f*=c:b/=c,f<c/60?(c="\u2033",b*=3600):f<c?(c="\u2032",b*=60):c="\u00b0"):"imperial"==e?.9144>f?(c="in",b/=.0254):1609.344>f?(c="ft",b/=.3048):(c="mi",b/=1609.344):"nautical"==e?(b/=1852,c="nm"):"metric"==e?.001>f?(c="\u03bcm",b*=1E6):1>f?(c="mm",b*=1E3):1E3>f?c="m":(c="km",b/=1E3):"us"==e?.9144>f?(c="in",b*=39.37):1609.344>
f?(c="ft",b/=.30480061):(c="mi",b/=1609.3472):x(!1,33);for(e=3*Math.floor(Math.log(a.i*b)/Math.log(10));;){f=sk[(e%3+3)%3]*Math.pow(10,Math.floor(e/3));d=Math.round(f/b);if(isNaN(d)){a.a.style.display="none";a.b=!1;return}if(d>=a.i)break;++e}b=f+" "+c;a.B!=b&&(a.f.innerHTML=b,a.B=b);a.u!=d&&(a.f.style.width=d+"px",a.u=d);a.b||(a.a.style.display="",a.b=!0)}else a.b&&(a.a.style.display="none",a.b=!1)}var rk="units";var Nk=document.implementation.createDocument("","",null);function Ok(a,b){return Nk.createElementNS(a,b)}function Pk(a){return Qk(a,!1,[]).join("")}function Qk(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)Qk(a,b,c);return c}function Rk(a){return(new DOMParser).parseFromString(a,"application/xml")}
function M(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&d[d.length-1].push(c)}}function Sk(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&(d[d.length-1]=c)}}function Tk(a){return function(b,c){var d=a.call(this,b,c);if(void 0!==d){c=c[c.length-1];b=b.localName;var e;b in c?e=c[b]:e=c[b]=[];e.push(d)}}}function N(a,b){return function(c,d){var e=a.call(this,c,d);void 0!==e&&(d[d.length-1][void 0!==b?b:c.localName]=e)}}
function O(a,b){return function(c,d,e){a.call(void 0!==b?b:this,c,d,e);e[e.length-1].node.appendChild(c)}}function Uk(a){var b,c;return function(d,e,f){if(void 0===b){b={};var g={};g[d.localName]=a;b[d.namespaceURI]=g;c=Vk(d.localName)}Wk(b,c,e,f)}}function Vk(a,b){return function(c,d,e){c=d[d.length-1].node;d=a;void 0===d&&(d=e);e=b;void 0===b&&(e=c.namespaceURI);return Ok(e,d)}}var Xk=Vk();function Yk(a,b){for(var c=b.length,d=Array(c),e=0;e<c;++e)d[e]=a[b[e]];return d}
function Q(a,b,c){c=void 0!==c?c:{};var d;var e=0;for(d=a.length;e<d;++e)c[a[e]]=b;return c}function Zk(a,b,c,d){for(b=b.firstElementChild;b;b=b.nextElementSibling){var e=a[b.namespaceURI];void 0!==e&&(e=e[b.localName],void 0!==e&&e.call(d,b,c))}}function S(a,b,c,d,e){d.push(a);Zk(b,c,d,e);return d.pop()}function Wk(a,b,c,d,e,f){for(var g=(void 0!==e?e:c).length,h,k,m=0;m<g;++m)h=c[m],void 0!==h&&(k=b.call(f,h,d,void 0!==e?e[m]:void 0),void 0!==k&&a[k.namespaceURI][k.localName].call(f,k,h,d))}
function T(a,b,c,d,e,f,g){e.push(a);Wk(b,c,d,e,f,g);e.pop()};function $k(a,b,c,d){return function(e,f,g){var h=new XMLHttpRequest;h.open("GET","function"===typeof a?a(e,f,g):a,!0);"arraybuffer"==b.D()&&(h.responseType="arraybuffer");h.onload=function(){if(!h.status||200<=h.status&&300>h.status){var a=b.D();if("json"==a||"text"==a)var e=h.responseText;else"xml"==a?(e=h.responseXML)||(e=Rk(h.responseText)):"arraybuffer"==a&&(e=h.response);e?c.call(this,b.Ta(e,{featureProjection:g}),b.Ob(e),b.de()):d.call(this)}else d.call(this)}.bind(this);h.onerror=function(){d.call(this)}.bind(this);
h.send()}}function al(a,b){return $k(a,b,function(a){this.Bb(a)},la)};function bl(){this.l=this.defaultDataProjection=null}function cl(a,b,c){var d;c&&(d={dataProjection:c.dataProjection?c.dataProjection:a.Ob(b),featureProjection:c.featureProjection});return dl(a,d)}function dl(a,b){return Za({dataProjection:a.defaultDataProjection,featureProjection:a.l},b)}bl.prototype.de=function(){return null};
function el(a,b,c){var d=c?Fb(c.featureProjection):null,e=c?Fb(c.dataProjection):null,f;d&&e&&!Mb(d,e)?a instanceof Qe?f=(b?a.clone():a).xb(b?d:e,b?e:d):f=Qb(a,e,d):f=a;if(b&&c&&void 0!==c.decimals){var g=Math.pow(10,c.decimals);f===a&&(f=f.clone());f.Cb(function(a){for(var b=0,c=a.length;b<c;++b)a[b]=Math.round(a[b]*g)/g;return a})}return f};function fl(){bl.call(this)}v(fl,bl);function gl(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null}l=fl.prototype;l.D=function(){return"json"};l.Mb=function(a,b){return this.ib(gl(a),cl(this,a,b))};l.Ta=function(a,b){return this.rd(gl(a),cl(this,a,b))};l.Ob=function(a){return this.vd(gl(a))};l.Cc=function(a,b){return JSON.stringify(this.zb(a,b))};function hl(a,b){Re.call(this);this.b=[];this.i=this.u=-1;this.Y(a,b)}v(hl,Re);l=hl.prototype;l.clone=function(){var a=new hl(null);a.N(this.V,this.s.slice(),this.b.slice());return a};l.Pa=function(a,b,c,d){if(d<Ga(this.I(),a,b))return d;this.i!=this.j&&(this.u=Math.sqrt(Ye(this.s,0,this.b,this.a,0)),this.i=this.j);return $e(this.s,0,this.b,this.a,this.u,!1,a,b,c,d)};l.G=function(){return ef(this.s,0,this.b,this.a)};l.Ma=function(){return this.b};
l.tb=function(){var a=this.s,b=this.b,c=this.V,d=[],e=0,f;var g=0;for(f=b.length;g<f;++g){var h=b[g],k=new E(null);k.N(c,a.slice(e,h));d.push(k);e=h}return d};l.Yc=function(){var a=[],b=this.s,c=0,d=this.b,e=this.a,f;var g=0;for(f=d.length;g<f;++g){var h=d[g];c=Jj(b,c,h,e,.5);Ub(a,c);c=h}return a};l.ub=function(a){var b=[],c=[],d=this.s,e=this.b,f=this.a,g=0,h=0,k;var m=0;for(k=e.length;m<k;++m){var n=e[m];h=gf(d,g,n,f,a,b,h);c.push(h);g=n}b.length=h;a=new hl(null);a.N("XY",b,c);return a};l.D=function(){return"MultiLineString"};
l.Y=function(a,b){a?(Ue(this,b,a,2),this.s||(this.s=[]),a=cf(this.s,0,a,this.a,this.b),this.s.length=0===a.length?0:a[a.length-1],this.c()):this.N("XY",null,this.b)};l.N=function(a,b,c){Te(this,a,b);this.b=c;this.c()};function il(a,b){var c=a.V,d=[],e=[],f;var g=0;for(f=b.length;g<f;++g){var h=b[g];0===g&&(c=h.V);Ub(d,h.aa());e.push(d.length)}a.N(c,d,e)};function jl(a,b){Re.call(this);this.Y(a,b)}v(jl,Re);l=jl.prototype;l.clone=function(){var a=new jl(null);a.N(this.V,this.s.slice());return a};l.Pa=function(a,b,c,d){if(d<Ga(this.I(),a,b))return d;var e=this.s,f=this.a,g;var h=0;for(g=e.length;h<g;h+=f){var k=ta(a,b,e[h],e[h+1]);if(k<d){d=k;for(k=0;k<f;++k)c[k]=e[h+k];c.length=f}}return d};l.G=function(){return df(this.s,0,this.s.length,this.a)};
function kl(a){var b=a.s,c=a.V;a=a.a;var d=[],e;var f=0;for(e=b.length;f<e;f+=a){var g=new lf(null);g.N(c,b.slice(f,f+a));d.push(g)}return d}l.D=function(){return"MultiPoint"};l.Y=function(a,b){a?(Ue(this,b,a,1),this.s||(this.s=[]),this.s.length=bf(this.s,0,a,this.a),this.c()):this.N("XY",null)};l.N=function(a,b){Te(this,a,b);this.c()};function ll(a,b){Re.call(this);this.b=[];this.u=-1;this.A=null;this.M=this.J=this.K=-1;this.i=null;this.Y(a,b)}v(ll,Re);l=ll.prototype;l.clone=function(){for(var a=new ll(null),b=this.b.length,c=Array(b),d=0;d<b;++d)c[d]=this.b[d].slice();a.N(this.V,this.s.slice(),c);return a};
l.Pa=function(a,b,c,d){if(d<Ga(this.I(),a,b))return d;if(this.J!=this.j){var e=this.b,f=0,g=0,h;var k=0;for(h=e.length;k<h;++k){var m=e[k];g=Ye(this.s,f,m,this.a,g);f=m[m.length-1]}this.K=Math.sqrt(g);this.J=this.j}e=$h(this);f=this.b;g=this.a;k=this.K;h=0;m=[NaN,NaN];var n;var p=0;for(n=f.length;p<n;++p){var q=f[p];d=$e(e,h,q,g,k,!0,a,b,c,d,m);h=q[q.length-1]}return d};l.Wh=function(){var a=$h(this),b=this.b,c=0,d=0,e;var f=0;for(e=b.length;f<e;++f){var g=b[f];d+=Ve(a,c,g,this.a);c=g[g.length-1]}return d};
l.G=function(a){if(void 0!==a){var b=$h(this).slice();rf(b,this.b,this.a,a)}else b=this.s;return ff(b,0,this.b,this.a)};l.Eb=function(){return this.b};function ai(a){if(a.u!=a.j){var b=a.s,c=a.b,d=a.a,e=0,f=[],g;var h=0;for(g=c.length;h<g;++h){var k=c[h];e=Na(b,e,k[0],d);f.push((e[0]+e[2])/2,(e[1]+e[3])/2);e=k[k.length-1]}b=$h(a);c=a.b;d=a.a;h=0;g=[];k=0;for(e=c.length;k<e;++k){var m=c[k];g=nf(b,h,m,d,f,2*k,g);h=m[m.length-1]}a.A=g;a.u=a.j}return a.A}
l.Cg=function(){var a=new jl(null);a.N("XYM",ai(this).slice());return a};function $h(a){if(a.M!=a.j){var b=a.s;a:{var c=a.b;var d;var e=0;for(d=c.length;e<d;++e)if(!pf(b,c[e],a.a,void 0)){c=!1;break a}c=!0}c?a.i=b:(a.i=b.slice(),a.i.length=rf(a.i,a.b,a.a));a.M=a.j}return a.i}l.ub=function(a){var b=[],c=[],d=this.s,e=this.b,f=this.a;a=Math.sqrt(a);var g=0,h=0,k;var m=0;for(k=e.length;m<k;++m){var n=e[m],p=[];h=hf(d,g,n,f,a,b,h,p);c.push(p);g=n[n.length-1]}b.length=h;d=new ll(null);d.N("XY",b,c);return d};
function ml(a){var b=a.V,c=a.s;a=a.b;var d=[],e=0,f,g;var h=0;for(f=a.length;h<f;++h){var k=a[h].slice(),m=k[k.length-1];if(0!==e){var n=0;for(g=k.length;n<g;++n)k[n]-=e}n=new A(null);n.N(b,c.slice(e,m),k);d.push(n);e=m}return d}l.D=function(){return"MultiPolygon"};
l.Y=function(a,b){if(a){Ue(this,b,a,3);this.s||(this.s=[]);b=this.s;var c=this.a,d=this.b,e=0;d=d?d:[];var f=0,g;var h=0;for(g=a.length;h<g;++h)e=cf(b,e,a[h],c,d[f]),d[f++]=e,e=e[e.length-1];d.length=f;0===d.length?this.s.length=0:(a=d[d.length-1],this.s.length=0===a.length?0:a[a.length-1]);this.c()}else this.N("XY",null,this.b)};l.N=function(a,b,c){Te(this,a,b);this.b=c;this.c()};
function nl(a,b){var c=a.V,d=[],e=[],f;var g=0;for(f=b.length;g<f;++g){var h=b[g];0===g&&(c=h.V);var k=d.length;var m=h.Ma();var n;var p=0;for(n=m.length;p<n;++p)m[p]+=k;Ub(d,h.aa());e.push(m)}a.N(c,d,e)};function pl(a){a=a?a:{};bl.call(this);this.a=a.geometryName}v(pl,fl);function ql(a){var b="XY";!0===a.hasZ&&!0===a.hasM?b="XYZM":!0===a.hasZ?b="XYZ":!0===a.hasM&&(b="XYM");return b}function rl(a){a=a.V;return{hasZ:"XYZ"===a||"XYZM"===a,hasM:"XYM"===a||"XYZM"===a}}
var sl={Point:function(a){return void 0!==a.m&&void 0!==a.z?new lf([a.x,a.y,a.z,a.m],"XYZM"):void 0!==a.z?new lf([a.x,a.y,a.z],"XYZ"):void 0!==a.m?new lf([a.x,a.y,a.m],"XYM"):new lf([a.x,a.y])},LineString:function(a){return new E(a.paths[0],ql(a))},Polygon:function(a){return new A(a.rings,ql(a))},MultiPoint:function(a){return new jl(a.points,ql(a))},MultiLineString:function(a){return new hl(a.paths,ql(a))},MultiPolygon:function(a){return new ll(a.rings,ql(a))}},tl={Point:function(a){var b=a.G(),c;
a=a.V;"XYZ"===a?c={x:b[0],y:b[1],z:b[2]}:"XYM"===a?c={x:b[0],y:b[1],m:b[2]}:"XYZM"===a?c={x:b[0],y:b[1],z:b[2],m:b[3]}:"XY"===a?c={x:b[0],y:b[1]}:x(!1,34);return c},LineString:function(a){var b=rl(a);return{hasZ:b.hasZ,hasM:b.hasM,paths:[a.G()]}},Polygon:function(a){var b=rl(a);return{hasZ:b.hasZ,hasM:b.hasM,rings:a.G(!1)}},MultiPoint:function(a){var b=rl(a);return{hasZ:b.hasZ,hasM:b.hasM,points:a.G()}},MultiLineString:function(a){var b=rl(a);return{hasZ:b.hasZ,hasM:b.hasM,paths:a.G()}},MultiPolygon:function(a){var b=
rl(a);a=a.G(!1);for(var c=[],d=0;d<a.length;d++)for(var e=a[d].length-1;0<=e;e--)c.push(a[d][e]);return{hasZ:b.hasZ,hasM:b.hasM,rings:c}}};l=pl.prototype;
l.ib=function(a,b){var c;if(c=a.geometry){if("number"===typeof c.x&&"number"===typeof c.y)var d="Point";else if(c.points)d="MultiPoint";else if(c.paths)d=1===c.paths.length?"LineString":"MultiLineString";else if(c.rings){var e=c.rings,f=ql(c),g=[],h=[];d=[];var k;var m=0;for(k=e.length;m<k;++m)g.length=0,bf(g,0,e[m],f.length),of(g,0,g.length,f.length)?h.push([e[m]]):d.push(e[m]);for(;d.length;){e=d.shift();f=!1;for(m=h.length-1;0<=m;m--)if(Ha((new jf(h[m][0])).I(),(new jf(e)).I())){h[m].push(e);f=
!0;break}f||h.push([e.reverse()])}c=Za({},c);1===h.length?(d="Polygon",c.rings=h[0]):(d="MultiPolygon",c.rings=h)}c=el((0,sl[d])(c),!1,b)}else c=null;h=new B;this.a&&h.Za(this.a);h.Ba(c);b&&b.dd&&a.attributes[b.dd]&&h.lb(a.attributes[b.dd]);a.attributes&&h.na(a.attributes);return h};l.rd=function(a,b){b=b?b:{};if(a.features){var c=[],d=a.features,e;b.dd=a.objectIdFieldName;a=0;for(e=d.length;a<e;++a)c.push(this.ib(d[a],b));return c}return[this.ib(a,b)]};
l.vd=function(a){return a.spatialReference&&a.spatialReference.wkid?Fb("EPSG:"+a.spatialReference.wkid):null};l.zb=function(a,b){b=dl(this,b);var c={},d=a.O();if(d){var e=b;d=(0,tl[d.D()])(el(d,!0,e),e);c.geometry=d;b&&b.featureProjection&&(c.geometry.spatialReference={wkid:Fb(b.featureProjection).La.split(":").pop()})}b=a.Fa();delete b[a.a];c.attributes=db(b)?{}:b;return c};l.Cd=function(a,b){b=dl(this,b);var c=[],d;var e=0;for(d=a.length;e<d;++e)c.push(this.zb(a[e],b));return{features:c}};function ul(){this.f=new XMLSerializer;bl.call(this)}v(ul,bl);l=ul.prototype;l.D=function(){return"xml"};l.Mb=function(a,b){return a instanceof Document?vl(this,a,b):a instanceof Node?null:"string"===typeof a?(a=Rk(a),vl(this,a,b)):null};function vl(a,b,c){a=wl(a,b,c);return 0<a.length?a[0]:null}l.Ta=function(a,b){return a instanceof Document?wl(this,a,b):a instanceof Node?this.qd(a,b):"string"===typeof a?(a=Rk(a),wl(this,a,b)):[]};
function wl(a,b,c){var d=[];for(b=b.firstChild;b;b=b.nextSibling)b.nodeType==Node.ELEMENT_NODE&&Ub(d,a.qd(b,c));return d}l.Ob=function(a){return a instanceof Document?this.ud(a):a instanceof Node?this.tc(a):"string"===typeof a?(a=Rk(a),this.ud(a)):null};l.ud=function(){return this.defaultDataProjection};l.tc=function(){return this.defaultDataProjection};l.Cc=function(){return this.f.serializeToString(null)};function U(a){a=a?a:{};this.featureType=a.featureType;this.featureNS=a.featureNS;this.srsName=a.srsName;this.schemaLocation="";this.a={};this.a["http://www.opengis.net/gml"]={featureMember:Sk(U.prototype.Nb),featureMembers:Sk(U.prototype.Nb)};ul.call(this)}v(U,ul);var xl=/^[\s\xa0]*$/;l=U.prototype;
l.Nb=function(a,b){var c=a.localName,d=null;if("FeatureCollection"==c)"http://www.opengis.net/wfs"===a.namespaceURI?d=S([],this.a,a,b,this):d=S(null,this.a,a,b,this);else if("featureMembers"==c||"featureMember"==c){var e=b[0],f=e.featureType,g=e.featureNS,h;if(!f&&a.childNodes){f=[];g={};var k=0;for(h=a.childNodes.length;k<h;++k){var m=a.childNodes[k];if(1===m.nodeType){var n=m.nodeName.split(":").pop();if(-1===f.indexOf(n)){var p="",q=0;m=m.namespaceURI;for(var t in g){if(g[t]===m){p=t;break}++q}p||
(p="p"+q,g[p]=m);f.push(p+":"+n)}}}"featureMember"!=c&&(e.featureType=f,e.featureNS=g)}"string"===typeof g&&(k=g,g={},g.p0=k);e={};f=Array.isArray(f)?f:[f];for(var u in g){n={};k=0;for(h=f.length;k<h;++k)(-1===f[k].indexOf(":")?"p0":f[k].split(":")[0])===u&&(n[f[k].split(":").pop()]="featureMembers"==c?M(this.Ye,this):Sk(this.Ye,this));e[g[u]]=n}"featureMember"==c?d=S(void 0,e,a,b):d=S([],e,a,b)}null===d&&(d=[]);return d};
function yl(a,b,c){var d=c[0];d.srsName=b.firstElementChild.getAttribute("srsName");d.srsDimension=b.firstElementChild.getAttribute("srsDimension");if(a=S(null,a.Fd,b,c,a))return el(a,!1,d)}
l.Ye=function(a,b){var c;(c=a.getAttribute("fid"))||(c=a.getAttributeNS("http://www.opengis.net/gml","id")||"");var d={},e;for(a=a.firstElementChild;a;a=a.nextElementSibling){var f=a.localName;if(0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)){var g=Pk(a);xl.test(g)&&(g=void 0);d[f]=g}else"boundedBy"!==f&&(e=f),d[f]=yl(this,a,b)}b=new B(d);e&&b.Za(e);c&&b.lb(c);return b};
l.df=function(a,b){if(a=this.qc(a,b))return b=new lf(null),b.N("XYZ",a),b};l.bf=function(a,b){if(a=S([],this.If,a,b,this))return new jl(a)};l.af=function(a,b){if(a=S([],this.Hf,a,b,this))return b=new hl(null),il(b,a),b};l.cf=function(a,b){if(a=S([],this.Jf,a,b,this))return b=new ll(null),nl(b,a),b};l.Ve=function(a,b){Zk(this.Mf,a,b,this)};l.me=function(a,b){Zk(this.Ff,a,b,this)};l.We=function(a,b){Zk(this.Nf,a,b,this)};l.rc=function(a,b){if(a=this.qc(a,b))return b=new E(null),b.N("XYZ",a),b};
l.Ni=function(a,b){if(a=S(null,this.Tb,a,b,this))return a};l.$e=function(a,b){if(a=this.qc(a,b))return b=new jf(null),kf(b,"XYZ",a),b};l.sc=function(a,b){if((a=S([null],this.Ec,a,b,this))&&a[0]){b=new A(null);var c=a[0],d=[c.length],e;var f=1;for(e=a.length;f<e;++f)Ub(c,a[f]),d.push(c.length);b.N("XYZ",c,d);return b}};l.qc=function(a,b){return S(null,this.Tb,a,b,this)};l.If={"http://www.opengis.net/gml":{pointMember:M(U.prototype.Ve),pointMembers:M(U.prototype.Ve)}};
l.Hf={"http://www.opengis.net/gml":{lineStringMember:M(U.prototype.me),lineStringMembers:M(U.prototype.me)}};l.Jf={"http://www.opengis.net/gml":{polygonMember:M(U.prototype.We),polygonMembers:M(U.prototype.We)}};l.Mf={"http://www.opengis.net/gml":{Point:M(U.prototype.qc)}};l.Ff={"http://www.opengis.net/gml":{LineString:M(U.prototype.rc)}};l.Nf={"http://www.opengis.net/gml":{Polygon:M(U.prototype.sc)}};l.Ub={"http://www.opengis.net/gml":{LinearRing:Sk(U.prototype.Ni)}};
l.qd=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};b&&Za(c,cl(this,a,b));return this.Nb(a,[c])||[]};l.tc=function(a){return Fb(this.srsName?this.srsName:a.firstElementChild.getAttribute("srsName"))};function zl(a){a=Pk(a);return Al(a)}function Al(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function Bl(a){a=Pk(a);a=Date.parse(a);return isNaN(a)?void 0:a/1E3}function Cl(a){a=Pk(a);return Dl(a)}function Dl(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function El(a){a=Pk(a);return Fl(a)}function Fl(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function W(a){return Pk(a).trim()}function Gl(a,b){X(a,b?"1":"0")}
function Hl(a,b){a.appendChild(Nk.createTextNode(b.toPrecision()))}function Il(a,b){a.appendChild(Nk.createTextNode(b.toString()))}function X(a,b){a.appendChild(Nk.createTextNode(b))};function Y(a){a=a?a:{};U.call(this,a);this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd";this.hasZ=void 0!==a.hasZ?a.hasZ:!1}v(Y,U);l=Y.prototype;l.Ri=function(a,b){if(a=S([],this.Gf,a,b,this))return b=new hl(null),il(b,a),b};l.Si=function(a,b){if(a=S([],this.Kf,a,b,this))return b=new ll(null),nl(b,a),b};l.Vd=function(a,b){Zk(this.Cf,a,b,this)};l.tf=function(a,b){Zk(this.Pf,a,b,this)};
l.Ti=function(a,b){return S([null],this.Lf,a,b,this)};l.Vi=function(a,b){return S([null],this.Of,a,b,this)};l.Ui=function(a,b){return S([null],this.Ec,a,b,this)};l.Qi=function(a,b){return S([null],this.Tb,a,b,this)};l.ih=function(a,b){(a=S(void 0,this.Ub,a,b,this))&&b[b.length-1].push(a)};l.rg=function(a,b){(a=S(void 0,this.Ub,a,b,this))&&(b[b.length-1][0]=a)};
l.ef=function(a,b){if((a=S([null],this.Qf,a,b,this))&&a[0]){b=new A(null);var c=a[0],d=[c.length],e;var f=1;for(e=a.length;f<e;++f)Ub(c,a[f]),d.push(c.length);b.N("XYZ",c,d);return b}};l.Xe=function(a,b){if(a=S([null],this.Df,a,b,this))return b=new E(null),b.N("XYZ",a),b};l.Mi=function(a,b){a=S([null],this.Ef,a,b,this);return Ja(a[1][0],a[1][1],a[2][0],a[2][1])};
l.Oi=function(a,b){var c=Pk(a),d=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;a=[];for(var e;e=d.exec(c);)a.push(parseFloat(e[1])),c=c.substr(e[0].length);if(""===c){b=b[0].srsName;c="enu";b&&(c=Fb(b).a);if("neu"===c)for(b=0,c=a.length;b<c;b+=3)d=a[b],a[b]=a[b+1],a[b+1]=d;b=a.length;2==b&&a.push(0);if(0!==b)return a}};
l.td=function(a,b){var c=Pk(a).replace(/^\s*|\s*$/g,"");b=b[0];var d=b.srsName,e=b.srsDimension;b="enu";d&&(b=Fb(d).a);c=c.split(/\s+/);d=2;a.getAttribute("srsDimension")?d=Fl(a.getAttribute("srsDimension")):a.getAttribute("dimension")?d=Fl(a.getAttribute("dimension")):a.parentNode.getAttribute("srsDimension")?d=Fl(a.parentNode.getAttribute("srsDimension")):e&&(d=Fl(e));for(var f,g=[],h=0,k=c.length;h<k;h+=d)a=parseFloat(c[h]),e=parseFloat(c[h+1]),f=3===d?parseFloat(c[h+2]):0,"en"===b.substr(0,2)?
g.push(a,e,f):g.push(e,a,f);return g};l.Tb={"http://www.opengis.net/gml":{pos:Sk(Y.prototype.Oi),posList:Sk(Y.prototype.td)}};l.Ec={"http://www.opengis.net/gml":{interior:Y.prototype.ih,exterior:Y.prototype.rg}};
l.Fd={"http://www.opengis.net/gml":{Point:Sk(U.prototype.df),MultiPoint:Sk(U.prototype.bf),LineString:Sk(U.prototype.rc),MultiLineString:Sk(U.prototype.af),LinearRing:Sk(U.prototype.$e),Polygon:Sk(U.prototype.sc),MultiPolygon:Sk(U.prototype.cf),Surface:Sk(Y.prototype.ef),MultiSurface:Sk(Y.prototype.Si),Curve:Sk(Y.prototype.Xe),MultiCurve:Sk(Y.prototype.Ri),Envelope:Sk(Y.prototype.Mi)}};l.Gf={"http://www.opengis.net/gml":{curveMember:M(Y.prototype.Vd),curveMembers:M(Y.prototype.Vd)}};
l.Kf={"http://www.opengis.net/gml":{surfaceMember:M(Y.prototype.tf),surfaceMembers:M(Y.prototype.tf)}};l.Cf={"http://www.opengis.net/gml":{LineString:M(U.prototype.rc),Curve:M(Y.prototype.Xe)}};l.Pf={"http://www.opengis.net/gml":{Polygon:M(U.prototype.sc),Surface:M(Y.prototype.ef)}};l.Qf={"http://www.opengis.net/gml":{patches:Sk(Y.prototype.Ti)}};l.Df={"http://www.opengis.net/gml":{segments:Sk(Y.prototype.Vi)}};l.Ef={"http://www.opengis.net/gml":{lowerCorner:M(Y.prototype.td),upperCorner:M(Y.prototype.td)}};
l.Lf={"http://www.opengis.net/gml":{PolygonPatch:Sk(Y.prototype.Ui)}};l.Of={"http://www.opengis.net/gml":{LineStringSegment:Sk(Y.prototype.Qi)}};function Jl(a,b,c){var d=c[c.length-1];c=d.hasZ;a.setAttribute("srsDimension",c?3:2);d=d.srsName;b=b.G();for(var e=b.length,f=Array(e),g,h=0;h<e;++h){g=b[h];var k=h,m=c,n="enu";d&&(n=Fb(d).a);n="en"===n.substr(0,2)?g[0]+" "+g[1]:g[1]+" "+g[0];m&&(n+=" "+(g[2]||0));f[k]=n}X(a,f.join(" "))}
l.Ee=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=Ok(a.namespaceURI,"pos");a.appendChild(d);c=c[c.length-1];a=c.hasZ;d.setAttribute("srsDimension",a?3:2);var e=c.srsName;c="enu";e&&(c=Fb(e).a);b=b.G();c="en"===c.substr(0,2)?b[0]+" "+b[1]:b[1]+" "+b[0];a&&(c+=" "+(b[2]||0));X(d,c)};var Kl={"http://www.opengis.net/gml":{lowerCorner:O(X),upperCorner:O(X)}};l=Y.prototype;
l.Sh=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);T({node:a},Kl,Xk,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)};l.Be=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=Ok(a.namespaceURI,"posList");a.appendChild(d);Jl(d,b,c)};l.Rh=function(a,b){a=b[b.length-1];b=a.node;var c=a.exteriorWritten;void 0===c&&(a.exteriorWritten=!0);return Ok(b.namespaceURI,void 0!==c?"interior":"exterior")};
l.kc=function(a,b,c){var d=c[c.length-1],e=d.hasZ;d=d.srsName;"PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=sf(b),T({node:a,hasZ:e,srsName:d},Ll,this.Rh,b,c,void 0,this)):"Surface"===a.nodeName&&(e=Ok(a.namespaceURI,"patches"),a.appendChild(e),a=Ok(e.namespaceURI,"PolygonPatch"),e.appendChild(a),this.kc(a,b,c))};
l.jc=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=Ok(a.namespaceURI,"posList"),a.appendChild(d),Jl(d,b,c)):"Curve"===a.nodeName&&(d=Ok(a.namespaceURI,"segments"),a.appendChild(d),a=Ok(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.jc(a,b,c))};
l.De=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.surface;f&&a.setAttribute("srsName",f);b=ml(b);T({node:a,hasZ:e,srsName:f,surface:d},Ml,this.j,b,c,void 0,this)};l.Th=function(a,b,c){var d=c[c.length-1],e=d.srsName;d=d.hasZ;e&&a.setAttribute("srsName",e);b=kl(b);T({node:a,hasZ:d,srsName:e},Nl,Vk("pointMember"),b,c,void 0,this)};
l.Ce=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.curve;f&&a.setAttribute("srsName",f);b=b.tb();T({node:a,hasZ:e,srsName:f,curve:d},Ol,this.j,b,c,void 0,this)};l.Fe=function(a,b,c){var d=Ok(a.namespaceURI,"LinearRing");a.appendChild(d);this.Be(d,b,c)};l.Ge=function(a,b,c){var d=this.c(b,c);d&&(a.appendChild(d),this.kc(d,b,c))};l.Uh=function(a,b,c){var d=Ok(a.namespaceURI,"Point");a.appendChild(d);this.Ee(d,b,c)};
l.Ae=function(a,b,c){var d=this.c(b,c);d&&(a.appendChild(d),this.jc(d,b,c))};l.ze=function(a,b,c){var d=c[c.length-1],e=Za({},d);e.node=a;var f;Array.isArray(b)?d.dataProjection?f=Qb(b,d.featureProjection,d.dataProjection):f=b:f=el(b,!0,d);T(e,Pl,this.c,[f],c,void 0,this)};
var Ml={"http://www.opengis.net/gml":{surfaceMember:O(Y.prototype.Ge),polygonMember:O(Y.prototype.Ge)}},Nl={"http://www.opengis.net/gml":{pointMember:O(Y.prototype.Uh)}},Ol={"http://www.opengis.net/gml":{lineStringMember:O(Y.prototype.Ae),curveMember:O(Y.prototype.Ae)}},Ll={"http://www.opengis.net/gml":{exterior:O(Y.prototype.Fe),interior:O(Y.prototype.Fe)}},Pl={"http://www.opengis.net/gml":{Curve:O(Y.prototype.jc),MultiCurve:O(Y.prototype.Ce),Point:O(Y.prototype.Ee),MultiPoint:O(Y.prototype.Th),
LineString:O(Y.prototype.jc),MultiLineString:O(Y.prototype.Ce),LinearRing:O(Y.prototype.Be),Polygon:O(Y.prototype.kc),MultiPolygon:O(Y.prototype.De),Surface:O(Y.prototype.kc),MultiSurface:O(Y.prototype.De),Envelope:O(Y.prototype.Sh)}},Ql={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};Y.prototype.j=function(a,b){return Ok("http://www.opengis.net/gml",Ql[b[b.length-1].node.nodeName])};
Y.prototype.c=function(a,b){var c=b[b.length-1];b=c.multiSurface;var d=c.surface,e=c.curve;c=c.multiCurve;Array.isArray(a)?a="Envelope":(a=a.D(),"MultiPolygon"===a&&!0===b?a="MultiSurface":"Polygon"===a&&!0===d?a="Surface":"LineString"===a&&!0===e?a="Curve":"MultiLineString"===a&&!0===c&&(a="MultiCurve"));return Ok("http://www.opengis.net/gml",a)};function Rl(a){a=a?a:{};U.call(this,a);this.a["http://www.opengis.net/gml"].featureMember=M(U.prototype.Nb);this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}v(Rl,U);l=Rl.prototype;
l.Ze=function(a,b){a=Pk(a).replace(/^\s*|\s*$/g,"");var c=b[0].srsName;b="enu";c&&(c=Fb(c))&&(b=c.a);a=a.trim().split(/\s+/);for(var d,e,f=[],g=0,h=a.length;g<h;g++)e=a[g].split(/,+/),c=parseFloat(e[0]),d=parseFloat(e[1]),e=3===e.length?parseFloat(e[2]):0,"en"===b.substr(0,2)?f.push(c,d,e):f.push(d,c,e);return f};l.Ki=function(a,b){a=S([null],this.Bf,a,b,this);return Ja(a[1][0],a[1][1],a[1][3],a[1][4])};l.gh=function(a,b){(a=S(void 0,this.Ub,a,b,this))&&b[b.length-1].push(a)};
l.vi=function(a,b){(a=S(void 0,this.Ub,a,b,this))&&(b[b.length-1][0]=a)};l.Tb={"http://www.opengis.net/gml":{coordinates:Sk(Rl.prototype.Ze)}};l.Ec={"http://www.opengis.net/gml":{innerBoundaryIs:Rl.prototype.gh,outerBoundaryIs:Rl.prototype.vi}};l.Bf={"http://www.opengis.net/gml":{coordinates:M(Rl.prototype.Ze)}};
l.Fd={"http://www.opengis.net/gml":{Point:Sk(U.prototype.df),MultiPoint:Sk(U.prototype.bf),LineString:Sk(U.prototype.rc),MultiLineString:Sk(U.prototype.af),LinearRing:Sk(U.prototype.$e),Polygon:Sk(U.prototype.sc),MultiPolygon:Sk(U.prototype.cf),Box:Sk(Rl.prototype.Ki)}};
l.gd=function(a,b){var c=b[b.length-1];b=c.multiSurface;var d=c.surface;c=c.multiCurve;Array.isArray(a)?a="Envelope":(a=a.D(),"MultiPolygon"===a&&!0===b?a="MultiSurface":"Polygon"===a&&!0===d?a="Surface":"MultiLineString"===a&&!0===c&&(a="MultiCurve"));return Ok("http://www.opengis.net/gml",a)};l.re=function(a,b,c){var d=c[c.length-1],e=Za({},d);e.node=a;var f;Array.isArray(b)?d.dataProjection?f=Qb(b,d.featureProjection,d.dataProjection):f=b:f=el(b,!0,d);T(e,Sl,this.gd,[f],c,void 0,this)};
l.hc=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=Tl(a.namespaceURI),a.appendChild(d),Ul(d,b,c)):"Curve"===a.nodeName&&(d=Ok(a.namespaceURI,"segments"),a.appendChild(d),a=Ok(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.hc(a,b,c))};function Tl(a){a=Ok(a,"coordinates");a.setAttribute("decimal",".");a.setAttribute("cs",",");a.setAttribute("ts"," ");return a}
function Ul(a,b,c){var d=c[c.length-1];c=d.hasZ;d=d.srsName;b=b.G();for(var e=b.length,f=Array(e),g,h=0;h<e;++h)g=b[h],f[h]=Vl(g,d,c);X(a,f.join(" "))}
l.ic=function(a,b,c){var d=c[c.length-1],e=d.hasZ;d=d.srsName;"PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=sf(b),T({node:a,hasZ:e,srsName:d},Wl,this.Nh,b,c,void 0,this)):"Surface"===a.nodeName&&(e=Ok(a.namespaceURI,"patches"),a.appendChild(e),a=Ok(e.namespaceURI,"PolygonPatch"),e.appendChild(a),this.ic(a,b,c))};
l.Nh=function(a,b){a=b[b.length-1];b=a.node;var c=a.exteriorWritten;void 0===c&&(a.exteriorWritten=!0);return Ok(b.namespaceURI,void 0!==c?"innerBoundaryIs":"outerBoundaryIs")};l.xe=function(a,b,c){var d=Ok(a.namespaceURI,"LinearRing");a.appendChild(d);this.te(d,b,c)};function Vl(a,b,c){var d="enu";b&&(d=Fb(b).a);b="en"===d.substr(0,2)?a[0]+","+a[1]:a[1]+","+a[0];c&&(b+=","+(a[2]||0));return b}
l.ue=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.curve;f&&a.setAttribute("srsName",f);b=b.tb();T({node:a,hasZ:e,srsName:f,curve:d},Xl,this.c,b,c,void 0,this)};l.we=function(a,b,c){var d=c[c.length-1];c=d.hasZ;var e=d.srsName;e&&a.setAttribute("srsName",e);d=Tl(a.namespaceURI);a.appendChild(d);a=b.G();a=Vl(a,e,c);X(d,a)};l.Ph=function(a,b,c){var d=c[c.length-1],e=d.hasZ;(d=d.srsName)&&a.setAttribute("srsName",d);b=kl(b);T({node:a,hasZ:e,srsName:d},Yl,Vk("pointMember"),b,c,void 0,this)};
l.Qh=function(a,b,c){var d=Ok(a.namespaceURI,"Point");a.appendChild(d);this.we(d,b,c)};l.se=function(a,b,c){var d=this.gd(b,c);d&&(a.appendChild(d),this.hc(d,b,c))};l.te=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=Tl(a.namespaceURI);a.appendChild(d);Ul(d,b,c)};l.ve=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.surface;f&&a.setAttribute("srsName",f);b=ml(b);T({node:a,hasZ:e,srsName:f,surface:d},Zl,this.c,b,c,void 0,this)};
l.ye=function(a,b,c){var d=this.gd(b,c);d&&(a.appendChild(d),this.ic(d,b,c))};l.Oh=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);T({node:a},$l,Xk,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)};
var Sl={"http://www.opengis.net/gml":{Curve:O(Rl.prototype.hc),MultiCurve:O(Rl.prototype.ue),Point:O(Rl.prototype.we),MultiPoint:O(Rl.prototype.Ph),LineString:O(Rl.prototype.hc),MultiLineString:O(Rl.prototype.ue),LinearRing:O(Rl.prototype.te),Polygon:O(Rl.prototype.ic),MultiPolygon:O(Rl.prototype.ve),Surface:O(Rl.prototype.ic),MultiSurface:O(Rl.prototype.ve),Envelope:O(Rl.prototype.Oh)}},Wl={"http://www.opengis.net/gml":{outerBoundaryIs:O(Rl.prototype.xe),innerBoundaryIs:O(Rl.prototype.xe)}},Yl={"http://www.opengis.net/gml":{pointMember:O(Rl.prototype.Qh)}},
Xl={"http://www.opengis.net/gml":{lineStringMember:O(Rl.prototype.se),curveMember:O(Rl.prototype.se)}};Rl.prototype.c=function(a,b){return Ok("http://www.opengis.net/gml",am[b[b.length-1].node.nodeName])};var am={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Zl={"http://www.opengis.net/gml":{surfaceMember:O(Rl.prototype.ye),polygonMember:O(Rl.prototype.ye)}},$l={"http://www.opengis.net/gml":{lowerCorner:O(X),upperCorner:O(X)}};var bm=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function cm(a,b,c,d){a.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(a.push(d.ele),delete d.ele,b.hasZ=!0):a.push(0);"time"in d?(a.push(d.time),delete d.time,b.hasM=!0):a.push(0);return a}
function dm(a,b,c){var d="XY",e=2;a.hasZ&&a.hasM?(d="XYZM",e=4):a.hasZ?(d="XYZ",e=3):a.hasM&&(d="XYM",e=3);if(4!==e){var f;var g=0;for(f=b.length/4;g<f;g++)b[g*e]=b[4*g],b[g*e+1]=b[4*g+1],a.hasZ&&(b[g*e+2]=b[4*g+2]),a.hasM&&(b[g*e+2]=b[4*g+3]);b.length=b.length/4*e;if(c)for(g=0,f=c.length;g<f;g++)c[g]=c[g]/4*e}return d}function em(a,b){var c=b[b.length-1],d=a.getAttribute("href");null!==d&&(c.link=d);Zk(fm,a,b)}function gm(a,b){b[b.length-1].extensionsNode_=a}
Q(bm,{rte:M(function(a,b){var c=b[0];if(a=S({flatCoordinates:[],layoutOptions:{}},hm,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.layoutOptions;delete a.layoutOptions;d=dm(d,b);var e=new E(null);e.N(d,b);el(e,!1,c);c=new B(e);c.na(a);return c}}),trk:M(function(a,b){var c=b[0];if(a=S({flatCoordinates:[],ends:[],layoutOptions:{}},im,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.ends;delete a.ends;var e=a.layoutOptions;delete a.layoutOptions;e=dm(e,b,d);var f=new hl(null);
f.N(e,b,d);el(f,!1,c);c=new B(f);c.na(a);return c}}),wpt:M(function(a,b){var c=b[0];if(b=S({},jm,a,b)){var d={};a=cm([],d,a,b);d=dm(d,a);a=new lf(a,d);el(a,!1,c);c=new B(a);c.na(b);return c}})});
var fm=Q(bm,{text:N(W,"linkText"),type:N(W,"linkType")}),hm=Q(bm,{name:N(W),cmt:N(W),desc:N(W),src:N(W),link:em,number:N(El),extensions:gm,type:N(W),rtept:function(a,b){var c=S({},km,a,b);c&&(b=b[b.length-1],cm(b.flatCoordinates,b.layoutOptions,a,c))}}),km=Q(bm,{ele:N(Cl),time:N(Bl)}),im=Q(bm,{name:N(W),cmt:N(W),desc:N(W),src:N(W),link:em,number:N(El),type:N(W),extensions:gm,trkseg:function(a,b){var c=b[b.length-1];Zk(lm,a,b);c.ends.push(c.flatCoordinates.length)}}),lm=Q(bm,{trkpt:function(a,b){var c=
S({},mm,a,b);c&&(b=b[b.length-1],cm(b.flatCoordinates,b.layoutOptions,a,c))}}),mm=Q(bm,{ele:N(Cl),time:N(Bl)}),jm=Q(bm,{ele:N(Cl),time:N(Bl),magvar:N(Cl),geoidheight:N(Cl),name:N(W),cmt:N(W),desc:N(W),src:N(W),link:em,sym:N(W),type:N(W),fix:N(W),sat:N(El),hdop:N(Cl),vdop:N(Cl),pdop:N(Cl),ageofdgpsdata:N(Cl),dgpsid:N(El),extensions:gm});function nm(a,b,c){a.setAttribute("href",b);b=c[c.length-1].properties;T({node:a},om,Xk,[b.linkText,b.linkType],c,pm)}
function qm(a,b,c){var d=c[c.length-1],e=d.node.namespaceURI,f=d.properties;a.setAttributeNS(null,"lat",b[1]);a.setAttributeNS(null,"lon",b[0]);switch(d.geometryLayout){case "XYZM":0!==b[3]&&(f.time=b[3]);case "XYZ":0!==b[2]&&(f.ele=b[2]);break;case "XYM":0!==b[2]&&(f.time=b[2])}b="rtept"==a.nodeName?rm[e]:sm[e];d=Yk(f,b);T({node:a,properties:f},tm,Xk,d,c,b)}
var pm=["text","type"],om=Q(bm,{text:O(X),type:O(X)}),um=Q(bm,"name cmt desc src link number type rtept".split(" ")),vm=Q(bm,{name:O(X),cmt:O(X),desc:O(X),src:O(X),link:O(nm),number:O(Il),type:O(X),rtept:Uk(O(qm))}),rm=Q(bm,["ele","time"]),wm=Q(bm,"name cmt desc src link number type trkseg".split(" ")),zm=Q(bm,{name:O(X),cmt:O(X),desc:O(X),src:O(X),link:O(nm),number:O(Il),type:O(X),trkseg:Uk(O(function(a,b,c){T({node:a,geometryLayout:b.V,properties:{}},xm,ym,b.G(),c)}))}),ym=Vk("trkpt"),xm=Q(bm,{trkpt:O(qm)}),
sm=Q(bm,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),tm=Q(bm,{ele:O(Hl),time:O(function(a,b){b=new Date(1E3*b);a.appendChild(Nk.createTextNode(b.getUTCFullYear()+"-"+ne(b.getUTCMonth()+1)+"-"+ne(b.getUTCDate())+"T"+ne(b.getUTCHours())+":"+ne(b.getUTCMinutes())+":"+ne(b.getUTCSeconds())+"Z"))}),magvar:O(Hl),geoidheight:O(Hl),name:O(X),cmt:O(X),desc:O(X),src:O(X),link:O(nm),sym:O(X),type:O(X),fix:O(X),sat:O(Il),hdop:O(Hl),vdop:O(Hl),
pdop:O(Hl),ageofdgpsdata:O(Hl),dgpsid:O(Il)});
Q(bm,{rte:O(function(a,b,c){var d=c[0],e=b.Fa();a={node:a,properties:e};if(b=b.O())b=el(b,!0,d),a.geometryLayout=b.V,e.rtept=b.G();d=um[c[c.length-1].node.namespaceURI];e=Yk(e,d);T(a,vm,Xk,e,c,d)}),trk:O(function(a,b,c){var d=c[0],e=b.Fa();a={node:a,properties:e};if(b=b.O())b=el(b,!0,d),e.trkseg=b.tb();d=wm[c[c.length-1].node.namespaceURI];e=Yk(e,d);T(a,zm,Xk,e,c,d)}),wpt:O(function(a,b,c){var d=c[0],e=c[c.length-1];e.properties=b.Fa();if(b=b.O())b=el(b,!0,d),e.geometryLayout=b.V,qm(a,b.G(),c)})});function Am(a){Qe.call(this);this.a=a?a:null;Bm(this)}v(Am,Qe);function hb(a){var b=[],c;var d=0;for(c=a.length;d<c;++d)b.push(a[d].clone());return b}function Cm(a){var b;if(a.a){var c=0;for(b=a.a.length;c<b;++c)Ac(a.a[c],"change",a.c,a)}}function Bm(a){var b;if(a.a){var c=0;for(b=a.a.length;c<b;++c)z(a.a[c],"change",a.c,a)}}l=Am.prototype;l.clone=function(){var a=new Am(null),b=hb(this.a);Cm(a);a.a=b;Bm(a);a.c();return a};
l.Pa=function(a,b,c,d){if(d<Ga(this.I(),a,b))return d;var e=this.a,f;var g=0;for(f=e.length;g<f;++g)d=e[g].Pa(a,b,c,d);return d};l.Yb=function(a){Ka(a);for(var b=this.a,c=0,d=b.length;c<d;++c)Pa(a,b[c].I());return a};
l.bc=function(a){this.o!=this.j&&(bb(this.g),this.f=0,this.o=this.j);if(0>a||0!==this.f&&a<this.f)return this;var b=a.toString();if(this.g.hasOwnProperty(b))return this.g[b];var c=[],d=this.a,e=!1,f;var g=0;for(f=d.length;g<f;++g){var h=d[g],k=h.bc(a);c.push(k);k!==h&&(e=!0)}if(e)return a=new Am(null),Cm(a),a.a=c,Bm(a),a.c(),this.g[b]=a;this.f=a;return this};l.D=function(){return"GeometryCollection"};l.rotate=function(a,b){for(var c=this.a,d=0,e=c.length;d<e;++d)c[d].rotate(a,b);this.c()};
l.scale=function(a,b,c){c||(c=Ra(this.I()));for(var d=this.a,e=0,f=d.length;e<f;++e)d[e].scale(a,b,c);this.c()};l.Cb=function(a){var b=this.a,c;var d=0;for(c=b.length;d<c;++d)b[d].Cb(a);this.c()};l.ca=function(){Cm(this);Qe.prototype.ca.call(this)};function Dm(a){a=a?a:{};bl.call(this);this.defaultDataProjection=Fb(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326");a.featureProjection&&(this.l=Fb(a.featureProjection));this.a=a.geometryName;this.c=a.extractGeometryName}v(Dm,fl);function Em(a,b){return a?el((0,Fm[a.type])(a),!1,b):null}function Gm(a,b){return(0,Hm[a.D()])(el(a,!0,b),b)}
var Fm={Point:function(a){return new lf(a.coordinates)},LineString:function(a){return new E(a.coordinates)},Polygon:function(a){return new A(a.coordinates)},MultiPoint:function(a){return new jl(a.coordinates)},MultiLineString:function(a){return new hl(a.coordinates)},MultiPolygon:function(a){return new ll(a.coordinates)},GeometryCollection:function(a,b){a=a.geometries.map(function(a){return Em(a,b)});return new Am(a)}},Hm={Point:function(a){return{type:"Point",coordinates:a.G()}},LineString:function(a){return{type:"LineString",
coordinates:a.G()}},Polygon:function(a,b){if(b)var c=b.rightHanded;return{type:"Polygon",coordinates:a.G(c)}},MultiPoint:function(a){return{type:"MultiPoint",coordinates:a.G()}},MultiLineString:function(a){return{type:"MultiLineString",coordinates:a.G()}},MultiPolygon:function(a,b){if(b)var c=b.rightHanded;return{type:"MultiPolygon",coordinates:a.G(c)}},GeometryCollection:function(a,b){return{type:"GeometryCollection",geometries:a.a.map(function(a){var c=Za({},b);delete c.featureProjection;return Gm(a,
c)})}},Circle:function(){return{type:"GeometryCollection",geometries:[]}}};l=Dm.prototype;l.ib=function(a,b){a="Feature"===a.type?a:{type:"Feature",geometry:a};b=Em(a.geometry,b);var c=new B;this.a?c.Za(this.a):this.c&&void 0!==a.geometry_name&&c.Za(a.geometry_name);c.Ba(b);void 0!==a.id&&c.lb(a.id);a.properties&&c.na(a.properties);return c};
l.rd=function(a,b){if("FeatureCollection"===a.type){var c=[];a=a.features;var d;var e=0;for(d=a.length;e<d;++e)c.push(this.ib(a[e],b))}else c=[this.ib(a,b)];return c};l.vd=function(a){a=a.crs;var b;a?"name"==a.type?b=Fb(a.properties.name):x(!1,36):b=this.defaultDataProjection;return b};l.zb=function(a,b){b=dl(this,b);var c={type:"Feature"},d=a.b;void 0!==d&&(c.id=d);(d=a.O())?c.geometry=Gm(d,b):c.geometry=null;b=a.Fa();delete b[a.a];db(b)?c.properties=null:c.properties=b;return c};
l.Cd=function(a,b){b=dl(this,b);var c=[],d;var e=0;for(d=a.length;e<d;++e)c.push(this.zb(a[e],b));return{type:"FeatureCollection",features:c}};function Im(){bl.call(this)}v(Im,bl);l=Im.prototype;l.D=function(){return"text"};l.Mb=function(a,b){b=dl(this,b);(a=Jm("string"===typeof a?a:"",b))?(b=new B,b.Ba(a),a=b):a=null;return a};l.Ta=function(a,b){var c=dl(this,b);b=[];a=Jm("string"===typeof a?a:"",c);this.a&&"GeometryCollection"==a.D()?b=a.a:b=[a];c=[];for(var d=0,e=b.length;d<e;++d)a=new B,a.Ba(b[d]),c.push(a);return c};l.Ob=function(){return this.defaultDataProjection};l.Cc=function(a,b){b=dl(this,b);return(a=a.O())?Km(el(a,!0,b)):""};function Lm(a,b,c,d,e,f){Kc.call(this);this.f=null;this.L=a?a:new Image;null!==d&&(this.L.crossOrigin=d);this.j=f?document.createElement("CANVAS"):null;this.g=f;this.b=null;this.c=e;this.a=c;this.v=b;this.i=!1;2==this.c&&Mm(this)}v(Lm,Kc);function Mm(a){var b=Lf(1,1);try{b.drawImage(a.L,0,0),b.getImageData(0,0,1,1)}catch(c){a.i=!0}}Lm.prototype.o=function(){this.c=3;this.b.forEach(vc);this.b=null;this.l("change")};
Lm.prototype.H=function(){this.c=2;this.a&&(this.L.width=this.a[0],this.L.height=this.a[1]);this.a=[this.L.width,this.L.height];this.b.forEach(vc);this.b=null;Mm(this);if(!this.i&&null!==this.g){this.j.width=this.L.width;this.j.height=this.L.height;var a=this.j.getContext("2d");a.drawImage(this.L,0,0);for(var b=a.getImageData(0,0,this.L.width,this.L.height),c=b.data,d=this.g[0]/255,e=this.g[1]/255,f=this.g[2]/255,g=0,h=c.length;g<h;g+=4)c[g]*=d,c[g+1]*=e,c[g+2]*=f;a.putImageData(b,0,0)}this.l("change")};
Lm.prototype.ba=function(){return this.j?this.j:this.L};Lm.prototype.load=function(){if(0==this.c){this.c=1;this.b=[z(this.L,"error",this.o,this,!0),z(this.L,"load",this.H,this,!0)];try{this.L.src=this.v}catch(a){this.o()}}};function Nm(a){a=a||{};this.g=void 0!==a.anchor?a.anchor:[.5,.5];this.v=null;this.c=void 0!==a.anchorOrigin?a.anchorOrigin:"top-left";this.u=void 0!==a.anchorXUnits?a.anchorXUnits:"fraction";this.A=void 0!==a.anchorYUnits?a.anchorYUnits:"fraction";this.ia=void 0!==a.crossOrigin?a.crossOrigin:null;var b=void 0!==a.img?a.img:null,c=void 0!==a.imgSize?a.imgSize:null,d=a.src;x(!(void 0!==d&&b),4);x(!b||b&&c,5);void 0!==d&&0!==d.length||!b||(d=b.src||w(b).toString());x(void 0!==d&&0<d.length,6);var e=
void 0!==a.src?0:2;if(void 0!==a.color){var f=a.color;f=Array.isArray(f)?f:Qh(f)}else f=null;this.f=f;f=this.ia;var g=this.f,h=pi.get(d,f,g);h||(h=new Lm(b,d,c,f,e,g),pi.set(d,f,g,h));this.a=h;this.ka=void 0!==a.offset?a.offset:[0,0];this.l=void 0!==a.offsetOrigin?a.offsetOrigin:"top-left";this.H=null;this.C=void 0!==a.size?a.size:null;vj.call(this,{opacity:void 0!==a.opacity?a.opacity:1,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,snapToPixel:void 0!==a.snapToPixel?
a.snapToPixel:!0,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1})}v(Nm,vj);l=Nm.prototype;l.clone=function(){return new Nm({anchor:this.g.slice(),anchorOrigin:this.c,anchorXUnits:this.u,anchorYUnits:this.A,crossOrigin:this.ia,color:this.f&&this.f.slice?this.f.slice():this.f||void 0,src:this.a.v,offset:this.ka.slice(),offsetOrigin:this.l,size:null!==this.C?this.C.slice():void 0,opacity:this.b,scale:this.j,snapToPixel:this.o,rotation:this.i,rotateWithView:this.B})};
l.$b=function(){if(this.v)return this.v;var a=this.g,b=this.yb();if("fraction"==this.u||"fraction"==this.A){if(!b)return null;a=this.g.slice();"fraction"==this.u&&(a[0]*=b[0]);"fraction"==this.A&&(a[1]*=b[1])}if("top-left"!=this.c){if(!b)return null;a===this.g&&(a=this.g.slice());if("top-right"==this.c||"bottom-right"==this.c)a[0]=-a[0]+b[0];if("bottom-left"==this.c||"bottom-right"==this.c)a[1]=-a[1]+b[1]}return this.v=a};l.ba=function(a){return this.a.ba(a)};l.ce=function(){return this.a.a};
l.nc=function(){return this.a.c};l.Se=function(){var a=this.a;if(!a.f)if(a.i){var b=a.a[0],c=a.a[1],d=Lf(b,c);d.fillRect(0,0,b,c);a.f=d.canvas}else a.f=a.L;return a.f};l.oc=function(){if(this.H)return this.H;var a=this.ka;if("top-left"!=this.l){var b=this.yb(),c=this.a.a;if(!b||!c)return null;a=a.slice();if("top-right"==this.l||"bottom-right"==this.l)a[0]=c[0]-b[0]-a[0];if("bottom-left"==this.l||"bottom-right"==this.l)a[1]=c[1]-b[1]-a[1]}return this.H=a};l.yb=function(){return this.C?this.C:this.a.a};
l.ne=function(a,b){return z(this.a,"change",a,b)};l.load=function(){this.a.load()};l.uf=function(a,b){Ac(this.a,"change",a,b)};var Om=["http://www.google.com/kml/ext/2.2"],Z=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Pm={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"};function Qm(a){a=Pk(a);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]}
function Rm(a){a=Pk(a);for(var b=[],c=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,d;d=c.exec(a);)b.push(parseFloat(d[1]),parseFloat(d[2]),d[3]?parseFloat(d[3]):0),a=a.substr(d[0].length);if(""===a)return b}function Sm(a){var b=Pk(a).trim();a=a.baseURI;a&&"about:blank"!=a||(a=window.location.href);return a?(new URL(b,a)).href:b}function Tm(a){return Cl(a)}function Um(a,b){return S(null,Vm,a,b)}
function Wm(a,b){if(b=S({s:[],zf:[]},Xm,a,b)){a=b.s;b=b.zf;var c;var d=0;for(c=Math.min(a.length,b.length);d<c;++d)a[4*d+3]=b[d];b=new E(null);b.N("XYZM",a);return b}}function Ym(a,b){var c=S({},Zm,a,b);if(a=S(null,$m,a,b))return b=new E(null),b.N("XYZ",a),b.na(c),b}function an(a,b){var c=S({},Zm,a,b);if(a=S(null,$m,a,b))return b=new A(null),b.N("XYZ",a,[a.length]),b.na(c),b}
function bn(a,b){a=S([],cn,a,b);if(!a)return null;if(0===a.length)return new Am(a);var c=!0,d=a[0].D(),e;var f=1;for(e=a.length;f<e;++f)if(b=a[f],b.D()!=d){c=!1;break}if(c)if("Point"==d){var g=a[0];c=g.V;d=g.aa();f=1;for(e=a.length;f<e;++f)b=a[f],Ub(d,b.aa());g=new jl(null);g.N(c,d);dn(g,a)}else"LineString"==d?(g=new hl(null),il(g,a),dn(g,a)):"Polygon"==d?(g=new ll(null),nl(g,a),dn(g,a)):"GeometryCollection"==d?g=new Am(a):x(!1,37);else g=new Am(a);return g}
function en(a,b){var c=S({},Zm,a,b);if(a=S(null,$m,a,b))return b=new lf(null),b.N("XYZ",a),b.na(c),b}function fn(a,b){var c=S({},Zm,a,b);if((a=S([null],gn,a,b))&&a[0]){b=new A(null);var d=a[0],e=[d.length],f;var g=1;for(f=a.length;g<f;++g)Ub(d,a[g]),e.push(d.length);b.N("XYZ",d,e);b.na(c);return b}}
function hn(a,b){b=S({},jn,a,b);if(!b)return null;a="fillStyle"in b?b.fillStyle:void 0;var c=b.fill;void 0===c||c||(a=null);c="imageStyle"in b?b.imageStyle:void 0;void 0==c&&(c=void 0);var d="textStyle"in b?b.textStyle:void 0,e="strokeStyle"in b?b.strokeStyle:void 0;b=b.outline;void 0===b||b||(e=null);return[new Bj({fill:a,image:c,stroke:e,text:d,zIndex:void 0})]}
function dn(a,b){var c=b.length,d=Array(b.length),e=Array(b.length),f=Array(b.length),g,h,k;var m=h=k=!1;for(g=0;g<c;++g){var n=b[g];d[g]=n.get("extrude");e[g]=n.get("tessellate");f[g]=n.get("altitudeMode");m=m||void 0!==d[g];h=h||void 0!==e[g];k=k||f[g]}m&&a.set("extrude",d);h&&a.set("tessellate",e);k&&a.set("altitudeMode",f)}function kn(a,b){Zk(ln,a,b)}function mn(a,b){Zk(nn,a,b)}
var on=Q(Z,{displayName:N(W),value:N(W)}),ln=Q(Z,{Data:function(a,b){var c=a.getAttribute("name");Zk(on,a,b);a=b[b.length-1];null!==c?a[c]=a.value:null!==a.displayName&&(a[a.displayName]=a.value);delete a.value},SchemaData:function(a,b){Zk(pn,a,b)}}),nn=Q(Z,{LatLonAltBox:function(a,b){if(a=S({},qn,a,b))b=b[b.length-1],b.extent=[parseFloat(a.west),parseFloat(a.south),parseFloat(a.east),parseFloat(a.north)],b.altitudeMode=a.altitudeMode,b.minAltitude=parseFloat(a.minAltitude),b.maxAltitude=parseFloat(a.maxAltitude)},
Lod:function(a,b){if(a=S({},rn,a,b))b=b[b.length-1],b.minLodPixels=parseFloat(a.minLodPixels),b.maxLodPixels=parseFloat(a.maxLodPixels),b.minFadeExtent=parseFloat(a.minFadeExtent),b.maxFadeExtent=parseFloat(a.maxFadeExtent)}}),qn=Q(Z,{altitudeMode:N(W),minAltitude:N(Cl),maxAltitude:N(Cl),north:N(Cl),south:N(Cl),east:N(Cl),west:N(Cl)}),rn=Q(Z,{minLodPixels:N(Cl),maxLodPixels:N(Cl),minFadeExtent:N(Cl),maxFadeExtent:N(Cl)}),Zm=Q(Z,{extrude:N(zl),tessellate:N(zl),altitudeMode:N(W)}),Vm=Q(Z,{coordinates:Sk(Rm)}),
gn=Q(Z,{innerBoundaryIs:function(a,b){(a=S(void 0,sn,a,b))&&b[b.length-1].push(a)},outerBoundaryIs:function(a,b){(a=S(void 0,tn,a,b))&&(b[b.length-1][0]=a)}}),Xm=Q(Z,{when:function(a,b){b=b[b.length-1].zf;a=Pk(a);a=Date.parse(a);b.push(isNaN(a)?0:a)}},Q(Om,{coord:function(a,b){b=b[b.length-1].s;a=Pk(a);(a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(a))?b.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),0):
b.push(0,0,0,0)}})),$m=Q(Z,{coordinates:Sk(Rm)}),un=Q(Z,{href:N(Sm)},Q(Om,{x:N(Cl),y:N(Cl),w:N(Cl),h:N(Cl)})),vn=Q(Z,{Icon:N(function(a,b){return(a=S({},un,a,b))?a:null}),heading:N(Cl),hotSpot:N(function(a){var b=a.getAttribute("xunits"),c=a.getAttribute("yunits");var d="insetPixels"!==b?"insetPixels"!==c?"bottom-left":"top-left":"insetPixels"!==c?"bottom-right":"top-right";return{x:parseFloat(a.getAttribute("x")),Dd:Pm[b],y:parseFloat(a.getAttribute("y")),Ed:Pm[c],origin:d}}),scale:N(Tm)}),sn=Q(Z,
{LinearRing:Sk(Um)}),wn=Q(Z,{color:N(Qm),scale:N(Tm)}),xn=Q(Z,{color:N(Qm),width:N(Cl)}),cn=Q(Z,{LineString:M(Ym),LinearRing:M(an),MultiGeometry:M(bn),Point:M(en),Polygon:M(fn)}),yn=Q(Om,{Track:M(Wm)});Q(Z,{ExtendedData:kn,Region:mn,Link:function(a,b){Zk(zn,a,b)},address:N(W),description:N(W),name:N(W),open:N(zl),phoneNumber:N(W),visibility:N(zl)});var zn=Q(Z,{href:N(Sm)}),tn=Q(Z,{LinearRing:Sk(Um)}),An=Q(Z,{Style:N(hn),key:N(W),styleUrl:N(Sm)});
Q(Z,{ExtendedData:kn,Region:mn,MultiGeometry:N(bn,"geometry"),LineString:N(Ym,"geometry"),LinearRing:N(an,"geometry"),Point:N(en,"geometry"),Polygon:N(fn,"geometry"),Style:N(hn),StyleMap:function(a,b){if(a=S(void 0,Bn,a,b))b=b[b.length-1],Array.isArray(a)?b.Style=a:"string"===typeof a?b.styleUrl=a:x(!1,38)},address:N(W),description:N(W),name:N(W),open:N(zl),phoneNumber:N(W),styleUrl:N(Sm),visibility:N(zl)},Q(Om,{MultiTrack:N(function(a,b){if(a=S([],yn,a,b))return b=new hl(null),il(b,a),b},"geometry"),
Track:N(Wm,"geometry")}));
var Cn=Q(Z,{color:N(Qm),fill:N(zl),outline:N(zl)}),pn=Q(Z,{SimpleData:function(a,b){var c=a.getAttribute("name");null!==c&&(a=W(a),b[b.length-1][c]=a)}}),jn=Q(Z,{IconStyle:function(a,b){if(a=S({},vn,a,b)){b=b[b.length-1];var c="Icon"in a?a.Icon:{},d=!("Icon"in a)||0<Object.keys(c).length,e,f=c.href;f?e=f:d&&(e=void 0);f="bottom-left";var g=a.hotSpot;if(g){var h=[g.x,g.y];var k=g.Dd;var m=g.Ed;f=g.origin}else void 0===e?m=k=h=void 0:/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(e)&&(h=[.5,0],m=
k="fraction");var n;g=c.x;var p=c.y;void 0!==g&&void 0!==p&&(n=[g,p]);var q;g=c.w;c=c.h;void 0!==g&&void 0!==c&&(q=[g,c]);var t;c=a.heading;void 0!==c&&(t=ua(c));a=a.scale;d?(void 0==e&&(q=void 0,void 0===a&&(a=void 0)),e=new Nm({anchor:h,anchorOrigin:f,anchorXUnits:k,anchorYUnits:m,crossOrigin:"anonymous",offset:n,offsetOrigin:"bottom-left",rotation:t,scale:a,size:q,src:e}),b.imageStyle=e):b.imageStyle=void 0}},LabelStyle:function(a,b){(a=S({},wn,a,b))&&(b[b.length-1].textStyle=new Lj({fill:new zj({color:"color"in
a?a.color:void 0}),scale:a.scale}))},LineStyle:function(a,b){(a=S({},xn,a,b))&&(b[b.length-1].strokeStyle=new Aj({color:"color"in a?a.color:void 0,width:"width"in a?a.width:1}))},PolyStyle:function(a,b){if(a=S({},Cn,a,b)){b=b[b.length-1];b.fillStyle=new zj({color:"color"in a?a.color:void 0});var c=a.fill;void 0!==c&&(b.fill=c);a=a.outline;void 0!==a&&(b.outline=a)}}}),Bn=Q(Z,{Pair:function(a,b){if(a=S({},An,a,b)){var c=a.key;c&&"normal"==c&&((c=a.styleUrl)&&(b[b.length-1]=c),(a=a.Style)&&(b[b.length-
1]=a))}}});function Dn(a,b){b=Array.isArray(b)?b:Qh(b);b=[255*(4==b.length?b[3]:1),b[2],b[1],b[0]];var c;for(c=0;4>c;++c){var d=parseInt(b[c],10).toString(16);b[c]=1==d.length?"0"+d:d}X(a,b.join(""))}function En(a,b,c){a={node:a};var d=b.D();if("GeometryCollection"==d){var e=hb(b.a);var f=Fn}else"MultiPoint"==d?(e=kl(b),f=Gn):"MultiLineString"==d?(e=b.tb(),f=Hn):"MultiPolygon"==d?(e=ml(b),f=In):x(!1,39);T(a,Jn,f,e,c)}function Kn(a,b,c){T({node:a},Ln,Mn,[b],c)}
function Nn(a,b,c){var d={node:a};b.b&&a.setAttribute("id",b.b);a=b.Fa();var e={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};e[b.a]=1;var f=Object.keys(a||{}).sort().filter(function(a){return!e[a]});if(0<f.length){var g=Yk(a,f);T(d,On,Pn,[{names:f,values:g}],c)}if(f=b.cb())if(f=f.call(b,0))f=Array.isArray(f)?f[0]:f,this.a&&(a.Style=f),(f=f.ra())&&(a.name=f.ra());f=Qn[c[c.length-1].node.namespaceURI];a=Yk(a,f);T(d,On,Xk,a,c,f);a=c[0];(b=b.O())&&(b=el(b,!0,a));T(d,On,
Fn,[b],c)}function Rn(a,b,c){var d=b.aa();a={node:a};a.layout=b.V;a.stride=b.ga();b=b.Fa();b.coordinates=d;d=Sn[c[c.length-1].node.namespaceURI];b=Yk(b,d);T(a,Tn,Xk,b,c,d)}function Un(a,b,c){b=sf(b);var d=b.shift();a={node:a};T(a,Vn,Wn,b,c);T(a,Vn,Xn,[d],c)}function Yn(a,b){Hl(a,Math.round(1E6*b)/1E6)}Q(Z,["Document","Placemark"]);Q(Z,{Document:O(function(a,b,c){T({node:a},Zn,$n,b,c,void 0,this)}),Placemark:O(Nn)});
var Zn=Q(Z,{Placemark:O(Nn)}),ao=Q(Z,{Data:O(function(a,b,c){a.setAttribute("name",b.name);a={node:a};b=b.value;"object"==typeof b?(null!==b&&b.displayName&&T(a,ao,Xk,[b.displayName],c,["displayName"]),null!==b&&b.value&&T(a,ao,Xk,[b.value],c,["value"])):T(a,ao,Xk,[b],c,["value"])}),value:O(function(a,b){X(a,b)}),displayName:O(function(a,b){a.appendChild(Nk.createCDATASection(b))})}),bo={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",
MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},co=Q(Z,["href"],Q(Om,["x","y","w","h"])),eo=Q(Z,{href:O(X)},Q(Om,{x:O(Hl),y:O(Hl),w:O(Hl),h:O(Hl)})),fo=Q(Z,["scale","heading","Icon","hotSpot"]),ho=Q(Z,{Icon:O(function(a,b,c){a={node:a};var d=co[c[c.length-1].node.namespaceURI],e=Yk(b,d);T(a,eo,Xk,e,c,d);d=co[Om[0]];e=Yk(b,d);T(a,eo,go,e,c,d)}),heading:O(Hl),hotSpot:O(function(a,b){a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("xunits",b.Dd);a.setAttribute("yunits",
b.Ed)}),scale:O(Yn)}),io=Q(Z,["color","scale"]),jo=Q(Z,{color:O(Dn),scale:O(Yn)}),ko=Q(Z,["color","width"]),lo=Q(Z,{color:O(Dn),width:O(Hl)}),Ln=Q(Z,{LinearRing:O(Rn)}),Jn=Q(Z,{LineString:O(Rn),Point:O(Rn),Polygon:O(Un),GeometryCollection:O(En)}),Qn=Q(Z,"name open visibility address phoneNumber description styleUrl Style".split(" ")),On=Q(Z,{ExtendedData:O(function(a,b,c){a={node:a};var d=b.names;b=b.values;for(var e=d.length,f=0;f<e;f++)T(a,ao,mo,[{name:d[f],value:b[f]}],c)}),MultiGeometry:O(En),
LineString:O(Rn),LinearRing:O(Rn),Point:O(Rn),Polygon:O(Un),Style:O(function(a,b,c){a={node:a};var d={},e=b.ua(),f=b.qa(),g=b.ba();b=b.ra();g instanceof Nm&&(d.IconStyle=g);b&&(d.LabelStyle=b);f&&(d.LineStyle=f);e&&(d.PolyStyle=e);b=Ao[c[c.length-1].node.namespaceURI];d=Yk(d,b);T(a,Bo,Xk,d,c,b)}),address:O(X),description:O(X),name:O(X),open:O(Gl),phoneNumber:O(X),styleUrl:O(X),visibility:O(Gl)}),Sn=Q(Z,["extrude","tessellate","altitudeMode","coordinates"]),Tn=Q(Z,{extrude:O(Gl),tessellate:O(Gl),altitudeMode:O(X),
coordinates:O(function(a,b,c){c=c[c.length-1];var d=c.layout;c=c.stride;var e;"XY"==d||"XYM"==d?e=2:"XYZ"==d||"XYZM"==d?e=3:x(!1,34);var f,g=b.length,h="";if(0<g){h+=b[0];for(d=1;d<e;++d)h+=","+b[d];for(f=c;f<g;f+=c)for(h+=" "+b[f],d=1;d<e;++d)h+=","+b[f+d]}X(a,h)})}),Vn=Q(Z,{outerBoundaryIs:O(Kn),innerBoundaryIs:O(Kn)}),Co=Q(Z,{color:O(Dn)}),Ao=Q(Z,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Bo=Q(Z,{IconStyle:O(function(a,b,c){a={node:a};var d={},e=b.yb(),f=b.ce(),g={href:b.a.v};if(e){g.w=
e[0];g.h=e[1];var h=b.$b(),k=b.oc();k&&f&&0!==k[0]&&k[1]!==e[1]&&(g.x=k[0],g.y=f[1]-(k[1]+e[1]));!h||h[0]===e[0]/2&&h[1]===e[1]/2||(d.hotSpot={x:h[0],Dd:"pixels",y:e[1]-h[1],Ed:"pixels"})}d.Icon=g;e=b.j;1!==e&&(d.scale=e);b=b.i;0!==b&&(d.heading=b);b=fo[c[c.length-1].node.namespaceURI];d=Yk(d,b);T(a,ho,Xk,d,c,b)}),LabelStyle:O(function(a,b,c){a={node:a};var d={},e=b.ua();e&&(d.color=e.a);(b=b.c)&&1!==b&&(d.scale=b);b=io[c[c.length-1].node.namespaceURI];d=Yk(d,b);T(a,jo,Xk,d,c,b)}),LineStyle:O(function(a,
b,c){a={node:a};var d=ko[c[c.length-1].node.namespaceURI];b=Yk({color:b.c,width:b.j},d);T(a,lo,Xk,b,c,d)}),PolyStyle:O(function(a,b,c){T({node:a},Co,Do,[b.a],c)})});function go(a,b,c){return Ok(Om[0],"gx:"+c)}function $n(a,b){return Ok(b[b.length-1].node.namespaceURI,"Placemark")}function Fn(a,b){if(a)return Ok(b[b.length-1].node.namespaceURI,bo[a.D()])}
var Do=Vk("color"),mo=Vk("Data"),Pn=Vk("ExtendedData"),Wn=Vk("innerBoundaryIs"),Gn=Vk("Point"),Hn=Vk("LineString"),Mn=Vk("LinearRing"),In=Vk("Polygon"),Xn=Vk("outerBoundaryIs");yi.Ab=function(){};
(function(a){function b(a){this.ab=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0);this.type=this.P=0;this.length=this.ab.length}function c(a,b,c){var e=c.ab;var f=e[c.P++];var g=(f&112)>>4;if(128>f)return d(a,g,b);f=e[c.P++];g|=(f&127)<<3;if(128>f)return d(a,g,b);f=e[c.P++];g|=(f&127)<<10;if(128>f)return d(a,g,b);f=e[c.P++];g|=(f&127)<<17;if(128>f)return d(a,g,b);f=e[c.P++];g|=(f&127)<<24;if(128>f)return d(a,g,b);f=e[c.P++];if(128>f)return d(a,g|(f&1)<<31,b);throw Error("Expected varint not more than 10 bytes");}
function d(a,b,c){return c?4294967296*b+(a>>>0):4294967296*(b>>>0)+(a>>>0)}var e={read:function(a,b,c,d,e){var f=8*e-d-1;var g=(1<<f)-1,h=g>>1,k=-7;e=c?e-1:0;var m=c?-1:1,y=a[b+e];e+=m;c=y&(1<<-k)-1;y>>=-k;for(k+=f;0<k;c=256*c+a[b+e],e+=m,k-=8);f=c&(1<<-k)-1;c>>=-k;for(k+=d;0<k;f=256*f+a[b+e],e+=m,k-=8);if(0===c)c=1-h;else{if(c===g)return f?NaN:Infinity*(y?-1:1);f+=Math.pow(2,d);c-=h}return(y?-1:1)*f*Math.pow(2,c-d)},write:function(a,b,c,d,e,n){var f,g=8*n-e-1,h=(1<<g)-1,k=h>>1,m=23===e?Math.pow(2,
-24)-Math.pow(2,-77):0;n=d?0:n-1;var C=d?1:-1,D=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=h):(d=Math.floor(Math.log(b)/Math.LN2),1>b*(f=Math.pow(2,-d))&&(d--,f*=2),b=1<=d+k?b+m/f:b+m*Math.pow(2,1-k),2<=b*f&&(d++,f/=2),d+k>=h?(b=0,d=h):1<=d+k?(b=(b*f-1)*Math.pow(2,e),d+=k):(b=b*Math.pow(2,k-1)*Math.pow(2,e),d=0));for(;8<=e;a[c+n]=b&255,n+=C,b/=256,e-=8);d=d<<e|b;for(g+=e;0<g;a[c+n]=d&255,n+=C,d/=256,g-=8);a[c+n-C]|=128*D}};b.j=0;b.l=1;b.a=2;b.c=5;b.prototype={sd:function(a,
b,c){for(c=c||this.length;this.P<c;){var d=this.ma(),e=d>>3,f=this.P;this.type=d&7;a(e,b,this);this.P===f&&this.gj(d)}return b},Pi:function(){var a=e.read(this.ab,this.P,!0,23,4);this.P+=4;return a},Li:function(){var a=e.read(this.ab,this.P,!0,52,8);this.P+=8;return a},ma:function(a){var b=this.ab;var d=b[this.P++];var e=d&127;if(128>d)return e;d=b[this.P++];e|=(d&127)<<7;if(128>d)return e;d=b[this.P++];e|=(d&127)<<14;if(128>d)return e;d=b[this.P++];e|=(d&127)<<21;if(128>d)return e;d=b[this.P];return c(e|
(d&15)<<28,a,this)},Wi:function(){return this.ma(!0)},wd:function(){var a=this.ma();return 1===a%2?(a+1)/-2:a/2},Ji:function(){return!!this.ma()},xd:function(){for(var a=this.ma()+this.P,b=this.ab,c="",d=this.P;d<a;){var e=b[d],n=null,p=239<e?4:223<e?3:191<e?2:1;if(d+p>a)break;if(1===p)128>e&&(n=e);else if(2===p){var q=b[d+1];128===(q&192)&&(n=(e&31)<<6|q&63,127>=n&&(n=null))}else if(3===p){q=b[d+1];var t=b[d+2];128===(q&192)&&128===(t&192)&&(n=(e&15)<<12|(q&63)<<6|t&63,2047>=n||55296<=n&&57343>=
n)&&(n=null)}else if(4===p){q=b[d+1];t=b[d+2];var u=b[d+3];128===(q&192)&&128===(t&192)&&128===(u&192)&&(n=(e&15)<<18|(q&63)<<12|(t&63)<<6|u&63,65535>=n||1114112<=n)&&(n=null)}null===n?(n=65533,p=1):65535<n&&(n-=65536,c+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023);c+=String.fromCharCode(n);d+=p}this.P=a;return c},gj:function(a){a&=7;if(a===b.j)for(;127<this.ab[this.P++];);else if(a===b.a)this.P=this.ma()+this.P;else if(a===b.c)this.P+=4;else if(a===b.l)this.P+=8;else throw Error("Unimplemented type: "+
a);}};a["default"]=b})(yi.Ab=yi.Ab||{});yi.Ab=yi.Ab.default;function Eo(a,b,c,d){this.g=a;this.a=b;this.c=this.j=null;this.l=c;this.v=d;this.f=Ke()}l=Eo.prototype;l.get=function(a){return this.v[a]};l.Ma=Eo.prototype.Eb=function(){return this.l};l.I=function(){this.b||(this.b="Point"===this.g?La(this.a):Na(this.a,0,this.a.length,2));return this.b};l.ac=function(){if(!this.j){var a=Ra(this.I());this.j=nf(this.a,0,this.l,2,a,0)}return this.j};l.Xc=function(){this.c||(this.c=Jj(this.a,0,this.a.length,2,.5));return this.c};
l.Yc=function(){if(!this.c){this.c=[];for(var a=this.a,b=0,c=this.l,d=0,e=c.length;d<e;++d){var f=c[d];b=Jj(a,b,f,2,.5);Ub(this.c,b);b=f}}return this.c};l.Xa=function(){return this.a};l.aa=Eo.prototype.Xa;l.O=function(){return this};l.bc=Eo.prototype.O;l.ga=function(){return 2};l.cb=la;l.D=function(){return this.g};l.xb=function(a){var b=a.I();a=a.Bd;b=Ta(a)/Ta(b);var c=this.f;Pe(c,a[0],a[3],b,-b,0,0,0);Ie(this.a,0,this.a.length,2,c,this.a)};function Fo(a){bl.call(this);a=a?a:{};this.defaultDataProjection=new mb({code:"EPSG:3857",units:"tile-pixels"});this.a=a.featureClass?a.featureClass:Eo;this.j=a.geometryName;this.b=a.layerName?a.layerName:"layer";this.g=a.layers?a.layers:null;this.c=null}v(Fo,bl);function Go(a,b,c){if(3===a){a={keys:[],values:[],features:[]};var d=c.ma()+c.P;c.sd(Ho,a,d);a.length=a.features.length;a.length&&(b[a.name]=a)}}
function Ho(a,b,c){if(15===a)b.version=c.ma();else if(1===a)b.name=c.xd();else if(5===a)b.extent=c.ma();else if(2===a)b.features.push(c.P);else if(3===a)b.keys.push(c.xd());else if(4===a){a=null;for(var d=c.ma()+c.P;c.P<d;)a=c.ma()>>3,a=1===a?c.xd():2===a?c.Pi():3===a?c.Li():4===a?c.Wi():5===a?c.ma():6===a?c.wd():7===a?c.Ji():null;b.values.push(a)}}
function Io(a,b,c){if(1==a)b.id=c.ma();else if(2==a)for(a=c.ma()+c.P;c.P<a;){var d=b.layer.keys[c.ma()],e=b.layer.values[c.ma()];b.properties[d]=e}else 3==a?b.type=c.ma():4==a&&(b.geometry=c.P)}
function Jo(a,b,c){var d=c.type;if(0===d)return null;var e=c.id,f=c.properties;f[a.b]=c.layer.name;var g=[];var h=[],k=h;b.P=c.geometry;c=b.ma()+b.P;for(var m=1,n=0,p=0,q=0,t=0,u=0;b.P<c;)n||(n=b.ma(),m=n&7,n>>=3),n--,1===m||2===m?(p+=b.wd(),q+=b.wd(),1===m&&t>u&&(k.push(t),u=t),g.push(p,q),t+=2):7===m?t>u&&(g.push(g[u],g[u+1]),t+=2):x(!1,59);t>u&&k.push(t);b=h.length;var y;1===d?y=1===b?"Point":"MultiPoint":2===d?y=1===b?"LineString":"MultiLineString":3===d&&(y="Polygon");d=y;if(a.a===Eo)g=new a.a(d,
g,h,f,e);else{if("Polygon"==d){d=[];k=b=y=0;for(c=h.length;k<c;++k)m=h[k],of(g,y,m,2)||(d.push(h.slice(b,k)),b=k),y=m;1<d.length?(h=d,d=new ll(null)):d=new A(null)}else d="Point"===d?new lf(null):"LineString"===d?new E(null):"Polygon"===d?new A(null):"MultiPoint"===d?new jl(null):"MultiLineString"===d?new hl(null):null;d.N("XY",g,h);g=new a.a;a.j&&g.Za(a.j);a=el(d,!1,dl(a,void 0));g.Ba(a);g.lb(e);g.na(f)}return g}l=Fo.prototype;l.de=function(){return this.c};l.D=function(){return"arraybuffer"};
l.Ta=function(a){var b=this.g;a=new yi.Ab(a);var c=a.sd(Go,{}),d=[],e;for(e in c)if(!b||-1!=b.indexOf(e)){var f=c[e];for(var g,h=0,k=f.length;h<k;++h){g=a;var m=f;g.P=m.features[h];var n=g.ma()+g.P;m={layer:m,type:0,properties:{}};g.sd(Io,m,n);g=m;d.push(Jo(this,a,g))}this.c=f?[0,0,f.extent,f.extent]:null}return d};l.Ob=function(){return this.defaultDataProjection};l.Mb=function(){};l.Cc=function(){};function Ko(a,b){b[b.length-1].zc[a.getAttribute("k")]=a.getAttribute("v")}var Lo=[null],Mo=Q(Lo,{nd:function(a,b){b[b.length-1].Ah.push(a.getAttribute("ref"))},tag:Ko});
Q(Lo,{node:function(a,b){var c=b[0],d=b[b.length-1],e=a.getAttribute("id"),f=[parseFloat(a.getAttribute("lon")),parseFloat(a.getAttribute("lat"))];d.Fj[e]=f;a=S({zc:{}},No,a,b);db(a.zc)||(f=new lf(f),el(f,!1,c),c=new B(f),c.lb(e),c.na(a.zc),d.features.push(c))},way:function(a,b){var c=a.getAttribute("id");a=S({id:c,Ah:[],zc:{}},Mo,a,b);b[b.length-1].Gj.push(a)}});var No=Q(Lo,{tag:Ko});function Oo(a){a=a?a:{};bl.call(this);this.c=a.layerName;this.a=a.layers?a.layers:null;this.defaultDataProjection=Fb(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326")}v(Oo,fl);function Po(a,b){var c=[],d,e;var f=0;for(e=a.length;f<e;++f){var g=a[f];0<f&&c.pop();0<=g?d=b[g]:d=b[~g].slice().reverse();c.push.apply(c,d)}a=0;for(b=c.length;a<b;++a)c[a]=c[a].slice();return c}
function Qo(a,b,c,d,e,f,g){a=a.geometries;var h=[],k;var m=0;for(k=a.length;m<k;++m)h[m]=Ro(a[m],b,c,d,e,f,g);return h}function Ro(a,b,c,d,e,f,g){var h=a.type,k=So[h];c="Point"===h||"MultiPoint"===h?k(a,c,d):k(a,b);b=new B;b.Ba(el(c,!1,g));void 0!==a.id&&b.lb(a.id);a=a.properties;e&&(a||(a={}),a[e]=f);a&&b.na(a);return b}
Oo.prototype.rd=function(a,b){if("Topology"==a.type){var c=null,d=null;if(a.transform){var e=a.transform;c=e.scale;d=e.translate}var f=a.arcs;if(e){e=c;var g=d,h;var k=0;for(h=f.length;k<h;++k){var m,n=f[k],p=e,q=g,t=0,u=0;var y=0;for(m=n.length;y<m;++y){var C=n[y];t+=C[0];u+=C[1];C[0]=t;C[1]=u;To(C,p,q)}}}e=[];a=a.objects;g=this.c;for(var D in a)this.a&&-1==this.a.indexOf(D)||("GeometryCollection"===a[D].type?(k=a[D],e.push.apply(e,Qo(k,f,c,d,g,D,b))):(k=a[D],e.push(Ro(k,f,c,d,g,D,b))));return e}return[]};
function To(a,b,c){a[0]=a[0]*b[0]+c[0];a[1]=a[1]*b[1]+c[1]}Oo.prototype.vd=function(){return this.defaultDataProjection};
var So={Point:function(a,b,c){a=a.coordinates;b&&c&&To(a,b,c);return new lf(a)},LineString:function(a,b){a=Po(a.arcs,b);return new E(a)},Polygon:function(a,b){var c=[],d;var e=0;for(d=a.arcs.length;e<d;++e)c[e]=Po(a.arcs[e],b);return new A(c)},MultiPoint:function(a,b,c){a=a.coordinates;var d;if(b&&c){var e=0;for(d=a.length;e<d;++e)To(a[e],b,c)}return new jl(a)},MultiLineString:function(a,b){var c=[],d;var e=0;for(d=a.arcs.length;e<d;++e)c[e]=Po(a.arcs[e],b);return new hl(c)},MultiPolygon:function(a,
b){var c=[],d,e;var f=0;for(e=a.arcs.length;f<e;++f){var g=a.arcs[f];var h=[];var k=0;for(d=g.length;k<d;++k)h[k]=Po(g[k],b);c[f]=h}return new ll(c)}};Oo.prototype.zb=function(){};Oo.prototype.Cd=function(){};Oo.prototype.ib=function(){};function Uo(a){a=a?a:{};this.j=a.featureType;this.c=a.featureNS;this.a=a.gmlFormat?a.gmlFormat:new Y;ul.call(this)}v(Uo,ul);var Vo={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"};
Uo.prototype.qd=function(a,b){var c={featureType:this.j,featureNS:this.c};Za(c,cl(this,a,b?b:{}));b=[c];this.a.a["http://www.opengis.net/gml"].featureMember=M(U.prototype.Nb);(a=S([],this.a.a,a,b,this.a))||(a=[]);return a};Uo.prototype.b=function(a){if(a instanceof Document)return Wo(a);if(a instanceof Node)return S({},Xo,a,[]);if("string"===typeof a)return a=Rk(a),Wo(a)};
var Yo={"http://www.opengis.net/wfs":{totalInserted:N(El),totalUpdated:N(El),totalDeleted:N(El)}},Zo={"http://www.opengis.net/ogc":{FeatureId:M(function(a){return a.getAttribute("fid")})}},$o={"http://www.opengis.net/wfs":{Feature:function(a,b){Zk(Zo,a,b)}}},Xo={"http://www.opengis.net/wfs":{TransactionSummary:N(function(a,b){return S({},Yo,a,b)},"transactionSummary"),InsertResults:N(function(a,b){return S([],$o,a,b)},"insertIds")}};
function Wo(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return S({},Xo,a,[])}function ap(a,b){var c=Ok("http://www.opengis.net/ogc","Filter"),d=Ok("http://www.opengis.net/ogc","FeatureId");c.appendChild(d);d.setAttribute("fid",b);a.appendChild(c)}function bp(a,b){a=(a?a:"feature")+":";return 0===b.indexOf(a)?b:a+b}
var cp={"http://www.opengis.net/wfs":{Insert:O(function(a,b,c){var d=c[c.length-1],e=d.gmlVersion;d=Ok(d.featureNS,d.featureType);a.appendChild(d);if(2===e){var f=Rl.prototype;(a=b.b)&&d.setAttribute("fid",a);a=c[c.length-1];e=a.featureNS;var g=b.a;a.Aa||(a.Aa={},a.Aa[e]={});var h=b.Fa();b=[];var k=[];for(n in h){var m=h[n];null!==m&&(b.push(n),k.push(m),n==g||m instanceof Qe?n in a.Aa[e]||(a.Aa[e][n]=O(f.re,f)):n in a.Aa[e]||(a.Aa[e][n]=O(X)))}var n=Za({},a)}else{n=Y.prototype;(a=b.b)&&d.setAttribute("fid",
a);a=c[c.length-1];e=a.featureNS;g=b.a;a.Aa||(a.Aa={},a.Aa[e]={});h=b.Fa();b=[];k=[];for(f in h)m=h[f],null!==m&&(b.push(f),k.push(m),f==g||m instanceof Qe?f in a.Aa[e]||(a.Aa[e][f]=O(n.ze,n)):f in a.Aa[e]||(a.Aa[e][f]=O(X)));n=Za({},a)}n.node=d;T(n,a.Aa,Vk(void 0,e),k,c,b)}),Update:O(function(a,b,c){var d=c[c.length-1];x(void 0!==b.b,27);var e=d.featurePrefix,f=d.featureNS,g=b.a;a.setAttribute("typeName",bp(e,d.featureType));a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+e,f);e=b.b;if(void 0!==
e){f=Object.keys(b.H);for(var h=[],k=0,m=f.length;k<m;k++){var n=b.get(f[k]);if(void 0!==n){var p=f[k];n instanceof Qe&&(p=g);h.push({name:p,value:n})}}T({gmlVersion:d.gmlVersion,node:a,hasZ:d.hasZ,srsName:d.srsName},cp,Vk("Property"),h,c);ap(a,e)}}),Delete:O(function(a,b,c){c=c[c.length-1];x(void 0!==b.b,26);var d=c.featurePrefix,e=c.featureNS;a.setAttribute("typeName",bp(d,c.featureType));a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+d,e);b=b.b;void 0!==b&&ap(a,b)}),Property:O(function(a,
b,c){var d=Ok("http://www.opengis.net/wfs","Name"),e=c[c.length-1].gmlVersion;a.appendChild(d);X(d,b.name);void 0!==b.value&&null!==b.value&&(d=Ok("http://www.opengis.net/wfs","Value"),a.appendChild(d),b.value instanceof Qe?2===e?Rl.prototype.re(d,b.value,c):Y.prototype.ze(d,b.value,c):X(d,b.value))}),Native:O(function(a,b){b.pj&&a.setAttribute("vendorId",b.pj);void 0!==b.cj&&a.setAttribute("safeToIgnore",b.cj);void 0!==b.value&&X(a,b.value)})}};
Uo.prototype.g=function(a,b,c,d){var e=[],f=Ok("http://www.opengis.net/wfs","Transaction"),g=d.version?d.version:"1.1.0",h="1.0.0"===g?2:3;f.setAttribute("service","WFS");f.setAttribute("version",g);if(d){var k=d.gmlOptions?d.gmlOptions:{};d.handle&&f.setAttribute("handle",d.handle)}f.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",Vo[g]);var m=d.featurePrefix?d.featurePrefix:"feature";a&&(g={node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:m,gmlVersion:h,
hasZ:d.hasZ,srsName:d.srsName},Za(g,k),T(g,cp,Vk("Insert"),a,e));b&&(g={node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:m,gmlVersion:h,hasZ:d.hasZ,srsName:d.srsName},Za(g,k),T(g,cp,Vk("Update"),b,e));c&&T({node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:m,gmlVersion:h,srsName:d.srsName},cp,Vk("Delete"),c,e);d.nativeElements&&T({node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:m,gmlVersion:h,srsName:d.srsName},cp,Vk("Native"),d.nativeElements,
e);return f};Uo.prototype.ud=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.tc(a);return null};Uo.prototype.tc=function(a){if(a.firstElementChild&&a.firstElementChild.firstElementChild)for(a=a.firstElementChild.firstElementChild,a=a.firstElementChild;a;a=a.nextElementSibling)if(0!==a.childNodes.length&&(1!==a.childNodes.length||3!==a.firstChild.nodeType)){var b=[{}];yl(this.a,a,b);return Fb(b.pop().srsName)}return null};function dp(a){a=a?a:{};bl.call(this);this.a=void 0!==a.splitCollection?a.splitCollection:!1}v(dp,Im);function ep(a){a=a.G();return 0===a.length?"":a.join(" ")}function fp(a){a=a.G();for(var b=[],c=0,d=a.length;c<d;++c)b.push(a[c].join(" "));return b.join(",")}function gp(a){var b=[];a=sf(a);for(var c=0,d=a.length;c<d;++c)b.push("("+fp(a[c])+")");return b.join(",")}
function Km(a){var b=a.D(),c=(0,hp[b])(a);b=b.toUpperCase();if(a instanceof Re){a=a.V;var d="";if("XYZ"===a||"XYZM"===a)d+="Z";if("XYM"===a||"XYZM"===a)d+="M";a=d;0<a.length&&(b+=" "+a)}return 0===c.length?b+" EMPTY":b+"("+c+")"}
var hp={Point:ep,LineString:fp,Polygon:gp,MultiPoint:function(a){var b=[];a=kl(a);for(var c=0,d=a.length;c<d;++c)b.push("("+ep(a[c])+")");return b.join(",")},MultiLineString:function(a){var b=[];a=a.tb();for(var c=0,d=a.length;c<d;++c)b.push("("+fp(a[c])+")");return b.join(",")},MultiPolygon:function(a){var b=[];a=ml(a);for(var c=0,d=a.length;c<d;++c)b.push("("+gp(a[c])+")");return b.join(",")},GeometryCollection:function(a){var b=[];a=hb(a.a);for(var c=0,d=a.length;c<d;++c)b.push(Km(a[c]));return b.join(",")}};
function Jm(a,b){a=new ip(new jp(a));kp(a);return(a=lp(a))?el(a,!1,b):null}function jp(a){this.c=a;this.a=-1}
function mp(a){var b=a.c.charAt(++a.a),c={position:a.a,value:b};if("("==b)c.type=2;else if(","==b)c.type=5;else if(")"==b)c.type=3;else if("0"<=b&&"9">=b||"."==b||"-"==b){c.type=4;b=a.a;var d=!1,e=!1;do{if("."==f)d=!0;else if("e"==f||"E"==f)e=!0;var f=a.c.charAt(++a.a)}while("0"<=f&&"9">=f||"."==f&&(void 0===d||!d)||!e&&("e"==f||"E"==f)||e&&("-"==f||"+"==f));a=parseFloat(a.c.substring(b,a.a--));c.value=a}else if("a"<=b&&"z">=b||"A"<=b&&"Z">=b){c.type=1;b=a.a;do f=a.c.charAt(++a.a);while("a"<=f&&"z">=
f||"A"<=f&&"Z">=f);a=a.c.substring(b,a.a--).toUpperCase();c.value=a}else{if(" "==b||"\t"==b||"\r"==b||"\n"==b)return mp(a);if(""===b)c.type=6;else throw Error("Unexpected character: "+b);}return c}function ip(a){this.l=a;this.c="XY"}function kp(a){a.a=mp(a.l)}function np(a,b){(b=a.a.type==b)&&kp(a);return b}
function lp(a){var b=a.a;if(np(a,1)){b=b.value;var c="XY",d=a.a;1==a.a.type&&(d=d.value,"Z"===d?c="XYZ":"M"===d?c="XYM":"ZM"===d&&(c="XYZM"),"XY"!==c&&kp(a));a.c=c;if("GEOMETRYCOLLECTION"==b){a:{if(np(a,2)){b=[];do b.push(lp(a));while(np(a,5));if(np(a,3)){a=b;break a}}else if(op(a)){a=[];break a}throw Error(pp(a));}return new Am(a)}d=qp[b];c=rp[b];if(!d||!c)throw Error("Invalid geometry type: "+b);b=d.call(a);return new c(b,a.c)}throw Error(pp(a));}l=ip.prototype;
l.md=function(){if(np(this,2)){var a=sp(this);if(np(this,3))return a}else if(op(this))return null;throw Error(pp(this));};l.ld=function(){if(np(this,2)){var a=tp(this);if(np(this,3))return a}else if(op(this))return[];throw Error(pp(this));};l.od=function(){if(np(this,2)){var a=up(this);if(np(this,3))return a}else if(op(this))return[];throw Error(pp(this));};
l.yi=function(){if(np(this,2)){var a;if(2==this.a.type)for(a=[this.md()];np(this,5);)a.push(this.md());else a=tp(this);if(np(this,3))return a}else if(op(this))return[];throw Error(pp(this));};l.xi=function(){if(np(this,2)){var a=up(this);if(np(this,3))return a}else if(op(this))return[];throw Error(pp(this));};l.zi=function(){if(np(this,2)){for(var a=[this.od()];np(this,5);)a.push(this.od());if(np(this,3))return a}else if(op(this))return[];throw Error(pp(this));};
function sp(a){for(var b=[],c=a.c.length,d=0;d<c;++d){var e=a.a;if(np(a,4))b.push(e.value);else break}if(b.length==c)return b;throw Error(pp(a));}function tp(a){for(var b=[sp(a)];np(a,5);)b.push(sp(a));return b}function up(a){for(var b=[a.ld()];np(a,5);)b.push(a.ld());return b}function op(a){var b=1==a.a.type&&"EMPTY"==a.a.value;b&&kp(a);return b}function pp(a){return"Unexpected `"+a.a.value+"` at position "+a.a.position+" in `"+a.l.c+"`"}
var rp={POINT:lf,LINESTRING:E,POLYGON:A,MULTIPOINT:jl,MULTILINESTRING:hl,MULTIPOLYGON:ll},qp={POINT:ip.prototype.md,LINESTRING:ip.prototype.ld,POLYGON:ip.prototype.od,MULTIPOINT:ip.prototype.yi,MULTILINESTRING:ip.prototype.xi,MULTIPOLYGON:ip.prototype.zi};function vp(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};function wp(a,b){return S({},xp,a,b)}function yp(a,b){return S({},zp,a,b)}function Ap(a,b){if(b=wp(a,b))return a=[Fl(a.getAttribute("width")),Fl(a.getAttribute("height"))],b.size=a,b}function Bp(a,b){return S([],Cp,a,b)}var Dp=[null,"http://www.opengis.net/wms"];Q(Dp,{Service:N(function(a,b){return S({},Ep,a,b)}),Capability:N(function(a,b){return S({},Fp,a,b)})});
var Fp=Q(Dp,{Request:N(function(a,b){return S({},Gp,a,b)}),Exception:N(function(a,b){return S([],Hp,a,b)}),Layer:N(function(a,b){return S({},Ip,a,b)})}),Ep=Q(Dp,{Name:N(W),Title:N(W),Abstract:N(W),KeywordList:N(Bp),OnlineResource:N(vp),ContactInformation:N(function(a,b){return S({},Jp,a,b)}),Fees:N(W),AccessConstraints:N(W),LayerLimit:N(El),MaxWidth:N(El),MaxHeight:N(El)}),Jp=Q(Dp,{ContactPersonPrimary:N(function(a,b){return S({},Kp,a,b)}),ContactPosition:N(W),ContactAddress:N(function(a,b){return S({},
Lp,a,b)}),ContactVoiceTelephone:N(W),ContactFacsimileTelephone:N(W),ContactElectronicMailAddress:N(W)}),Kp=Q(Dp,{ContactPerson:N(W),ContactOrganization:N(W)}),Lp=Q(Dp,{AddressType:N(W),Address:N(W),City:N(W),StateOrProvince:N(W),PostCode:N(W),Country:N(W)}),Hp=Q(Dp,{Format:M(W)}),Ip=Q(Dp,{Name:N(W),Title:N(W),Abstract:N(W),KeywordList:N(Bp),CRS:Tk(W),EX_GeographicBoundingBox:N(function(a,b){var c=S({},Mp,a,b);if(c){a=c.westBoundLongitude;b=c.southBoundLatitude;var d=c.eastBoundLongitude;c=c.northBoundLatitude;
if(void 0!==a&&void 0!==b&&void 0!==d&&void 0!==c)return[a,b,d,c]}}),BoundingBox:Tk(function(a){var b=[Dl(a.getAttribute("minx")),Dl(a.getAttribute("miny")),Dl(a.getAttribute("maxx")),Dl(a.getAttribute("maxy"))],c=[Dl(a.getAttribute("resx")),Dl(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:c}}),Dimension:Tk(function(a){return{name:a.getAttribute("name"),units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:Al(a.getAttribute("multipleValues")),
nearestValue:Al(a.getAttribute("nearestValue")),current:Al(a.getAttribute("current")),values:W(a)}}),Attribution:N(function(a,b){return S({},Np,a,b)}),AuthorityURL:Tk(function(a,b){if(b=wp(a,b))return b.name=a.getAttribute("name"),b}),Identifier:Tk(W),MetadataURL:Tk(function(a,b){if(b=wp(a,b))return b.type=a.getAttribute("type"),b}),DataURL:Tk(wp),FeatureListURL:Tk(wp),Style:Tk(function(a,b){return S({},Op,a,b)}),MinScaleDenominator:N(Cl),MaxScaleDenominator:N(Cl),Layer:Tk(function(a,b){var c=b[b.length-
1],d=S({},Ip,a,b);if(d)return b=Al(a.getAttribute("queryable")),void 0===b&&(b=c.queryable),d.queryable=void 0!==b?b:!1,b=Fl(a.getAttribute("cascaded")),void 0===b&&(b=c.cascaded),d.cascaded=b,b=Al(a.getAttribute("opaque")),void 0===b&&(b=c.opaque),d.opaque=void 0!==b?b:!1,b=Al(a.getAttribute("noSubsets")),void 0===b&&(b=c.noSubsets),d.noSubsets=void 0!==b?b:!1,(b=Dl(a.getAttribute("fixedWidth")))||(b=c.fixedWidth),d.fixedWidth=b,(a=Dl(a.getAttribute("fixedHeight")))||(a=c.fixedHeight),d.fixedHeight=
a,["Style","CRS","AuthorityURL"].forEach(function(a){a in c&&(d[a]=(d[a]||[]).concat(c[a]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in d||(d[a]=c[a])}),d})}),Np=Q(Dp,{Title:N(W),OnlineResource:N(vp),LogoURL:N(Ap)}),Mp=Q(Dp,{westBoundLongitude:N(Cl),eastBoundLongitude:N(Cl),southBoundLatitude:N(Cl),northBoundLatitude:N(Cl)}),Gp=Q(Dp,{GetCapabilities:N(yp),GetMap:N(yp),GetFeatureInfo:N(yp)}),zp=Q(Dp,{Format:Tk(W),
DCPType:Tk(function(a,b){return S({},Pp,a,b)})}),Pp=Q(Dp,{HTTP:N(function(a,b){return S({},Qp,a,b)})}),Qp=Q(Dp,{Get:N(wp),Post:N(wp)}),Op=Q(Dp,{Name:N(W),Title:N(W),Abstract:N(W),LegendURL:Tk(Ap),StyleSheetURL:N(wp),StyleURL:N(wp)}),xp=Q(Dp,{Format:N(W),OnlineResource:N(vp)}),Cp=Q(Dp,{Keyword:M(W)});var Rp=[null,"http://www.opengis.net/ows/1.1"];Q(Rp,{ServiceIdentification:N(function(a,b){return S({},Sp,a,b)}),ServiceProvider:N(function(a,b){return S({},Tp,a,b)}),OperationsMetadata:N(function(a,b){return S({},Up,a,b)})});
var Vp=Q(Rp,{DeliveryPoint:N(W),City:N(W),AdministrativeArea:N(W),PostalCode:N(W),Country:N(W),ElectronicMailAddress:N(W)}),Wp=Q(Rp,{Value:Tk(function(a){return W(a)})}),Xp=Q(Rp,{AllowedValues:N(function(a,b){return S({},Wp,a,b)})}),Zp=Q(Rp,{Phone:N(function(a,b){return S({},Yp,a,b)}),Address:N(function(a,b){return S({},Vp,a,b)})}),aq=Q(Rp,{HTTP:N(function(a,b){return S({},$p,a,b)})}),$p=Q(Rp,{Get:Tk(function(a,b){var c=vp(a);if(c)return S({href:c},bq,a,b)}),Post:void 0}),cq=Q(Rp,{DCP:N(function(a,
b){return S({},aq,a,b)})}),Up=Q(Rp,{Operation:function(a,b){var c=a.getAttribute("name");(a=S({},cq,a,b))&&(b[b.length-1][c]=a)}}),Yp=Q(Rp,{Voice:N(W),Facsimile:N(W)}),bq=Q(Rp,{Constraint:Tk(function(a,b){var c=a.getAttribute("name");if(c)return S({name:c},Xp,a,b)})}),dq=Q(Rp,{IndividualName:N(W),PositionName:N(W),ContactInfo:N(function(a,b){return S({},Zp,a,b)})}),Sp=Q(Rp,{Abstract:N(W),AccessConstraints:N(W),Fees:N(W),Title:N(W),ServiceTypeVersion:N(W),ServiceType:N(W)}),Tp=Q(Rp,{ProviderName:N(W),
ProviderSite:N(vp),ServiceContact:N(function(a,b){return S({},dq,a,b)})});function eq(a){var b=W(a).split(" ");if(b&&2==b.length&&(a=+b[0],b=+b[1],!isNaN(a)&&!isNaN(b)))return[a,b]}var fq=[null,"http://www.opengis.net/wmts/1.0"],gq=[null,"http://www.opengis.net/ows/1.1"];Q(fq,{Contents:N(function(a,b){return S({},hq,a,b)})});
var hq=Q(fq,{Layer:Tk(function(a,b){return S({},iq,a,b)}),TileMatrixSet:Tk(function(a,b){return S({},jq,a,b)})}),iq=Q(fq,{Style:Tk(function(a,b){if(b=S({},kq,a,b))return a="true"===a.getAttribute("isDefault"),b.isDefault=a,b}),Format:Tk(W),TileMatrixSetLink:Tk(function(a,b){return S({},lq,a,b)}),Dimension:Tk(function(a,b){return S({},mq,a,b)}),ResourceURL:Tk(function(a){var b=a.getAttribute("format"),c=a.getAttribute("template");a=a.getAttribute("resourceType");var d={};b&&(d.format=b);c&&(d.template=
c);a&&(d.resourceType=a);return d})},Q(gq,{Title:N(W),Abstract:N(W),WGS84BoundingBox:N(function(a,b){a=S([],nq,a,b);if(2==a.length)return Aa(a)}),Identifier:N(W)})),kq=Q(fq,{LegendURL:Tk(function(a){var b={};b.format=a.getAttribute("format");b.href=vp(a);return b})},Q(gq,{Title:N(W),Identifier:N(W)})),lq=Q(fq,{TileMatrixSet:N(W),TileMatrixSetLimits:N(function(a,b){return S([],oq,a,b)})}),oq=Q(fq,{TileMatrixLimits:M(function(a,b){return S({},pq,a,b)})}),pq=Q(fq,{TileMatrix:N(W),MinTileRow:N(El),MaxTileRow:N(El),
MinTileCol:N(El),MaxTileCol:N(El)}),mq=Q(fq,{Default:N(W),Value:Tk(W)},Q(gq,{Identifier:N(W)})),nq=Q(gq,{LowerCorner:M(eq),UpperCorner:M(eq)}),jq=Q(fq,{WellKnownScaleSet:N(W),TileMatrix:Tk(function(a,b){return S({},qq,a,b)})},Q(gq,{SupportedCRS:N(W),Identifier:N(W)})),qq=Q(fq,{TopLeftCorner:N(eq),ScaleDenominator:N(Cl),TileWidth:N(El),TileHeight:N(El),MatrixWidth:N(El),MatrixHeight:N(El)},Q(gq,{Identifier:N(W)}));function rq(a,b,c){Re.call(this);sq(this,a,b?b:0,c)}v(rq,Re);l=rq.prototype;l.clone=function(){var a=new rq(null);Te(a,this.V,this.s.slice());a.c();return a};l.Pa=function(a,b,c,d){var e=this.s;a-=e[0];var f=b-e[1];b=a*a+f*f;if(b<d){if(0===b)for(d=0;d<this.a;++d)c[d]=e[d];else for(d=this.Jb()/Math.sqrt(b),c[0]=e[0]+d*a,c[1]=e[1]+d*f,d=2;d<this.a;++d)c[d]=e[d];c.length=this.a;return b}return d};l.ja=function(){return this.s.slice(0,this.a)};
l.Yb=function(a){var b=this.s,c=b[this.a]-b[0];return Ja(b[0]-c,b[1]-c,b[0]+c,b[1]+c,a)};l.Jb=function(){var a=this.s[this.a]-this.s[0],b=this.s[this.a+1]-this.s[1];return Math.sqrt(a*a+b*b)};l.D=function(){return"Circle"};l.Oa=function(a){var b=this.a,c=a.slice();c[b]=c[0]+(this.s[b]-this.s[0]);var d;for(d=1;d<b;++d)c[b+d]=a[d];Te(this,this.V,c);this.c()};
function sq(a,b,c,d){if(b){Ue(a,d,b,0);a.s||(a.s=[]);d=a.s;b=af(d,b);d[b++]=d[0]+c;var e;c=1;for(e=a.a;c<e;++c)d[b++]=d[c];d.length=b}else Te(a,"XY",null);a.c()}l.G=function(){};l.Y=function(){};l.kf=function(a){this.s[this.a]=this.s[0]+a;this.c()};function tq(a){a=a?a:{};var b=Za({},a);delete b.style;delete b.renderBuffer;delete b.updateWhileAnimating;delete b.updateWhileInteracting;ig.call(this,b);this.b=void 0!==a.declutter?a.declutter:!1;this.i=void 0!==a.renderBuffer?a.renderBuffer:100;this.J=null;this.A=void 0;this.K(a.style);this.M=void 0!==a.updateWhileAnimating?a.updateWhileAnimating:!1;this.X=void 0!==a.updateWhileInteracting?a.updateWhileInteracting:!1;this.type="VECTOR"}v(tq,ig);tq.prototype.cb=function(){return this.A};
tq.prototype.K=function(a){this.J=void 0!==a?a:Fj;this.A=null===a?void 0:Dj(this.J);this.c()};var oj="renderOrder";function uq(){return[[-Infinity,-Infinity,Infinity,Infinity]]};function vq(a){a=a||{};Xj.call(this,{attributions:a.attributions,logo:a.logo,projection:void 0,state:"ready",wrapX:void 0!==a.wrapX?a.wrapX:!0});this.A=la;this.u=a.format;this.M=void 0==a.overlaps?!0:a.overlaps;this.K=a.url;void 0!==a.loader?this.A=a.loader:void 0!==this.K&&(x(this.u,7),this.A=al(this.K,this.u));this.fa=void 0!==a.strategy?a.strategy:uq;var b=void 0!==a.useSpatialIndex?a.useSpatialIndex:!0;this.a=b?new Rj:null;this.J=new Rj;this.b={};this.f={};this.i={};this.o={};this.g=null;if(a.features instanceof
Sc){var c=a.features;var d=c.a}else Array.isArray(a.features)&&(d=a.features);b||void 0!==c||(c=new Sc(d));void 0!==d&&wq(this,d);void 0!==c&&xq(this,c)}v(vq,Xj);l=vq.prototype;l.Va=function(a){var b=w(a).toString();if(yq(this,b,a)){zq(this,b,a);var c=a.O();c?(b=c.I(),this.a&&this.a.da(b,a)):this.b[b]=a;this.l(new Aq("addfeature",a))}this.c()};function zq(a,b,c){a.o[b]=[z(c,"change",a.Re,a),z(c,"propertychange",a.Re,a)]}
function yq(a,b,c){var d=!0,e=c.b;void 0!==e?e.toString()in a.f?d=!1:a.f[e.toString()]=c:(x(!(b in a.i),30),a.i[b]=c);return d}l.Bb=function(a){wq(this,a);this.c()};function wq(a,b){var c,d=[],e=[],f=[];var g=0;for(c=b.length;g<c;g++){var h=b[g];var k=w(h).toString();yq(a,k,h)&&e.push(h)}g=0;for(c=e.length;g<c;g++)h=e[g],k=w(h).toString(),zq(a,k,h),(b=h.O())?(k=b.I(),d.push(k),f.push(h)):a.b[k]=h;a.a&&a.a.load(d,f);g=0;for(c=e.length;g<c;g++)a.l(new Aq("addfeature",e[g]))}
function xq(a,b){var c=!1;z(a,"addfeature",function(a){c||(c=!0,b.push(a.feature),c=!1)});z(a,"removefeature",function(a){c||(c=!0,b.remove(a.feature),c=!1)});z(b,"add",function(a){c||(c=!0,this.Va(a.element),c=!1)},a);z(b,"remove",function(a){c||(c=!0,this.Qa(a.element),c=!1)},a);a.g=b}
l.clear=function(a){if(a){for(var b in this.o)this.o[b].forEach(vc);this.g||(this.o={},this.f={},this.i={})}else if(this.a){this.a.forEach(this.yd,this);for(var c in this.b)this.yd(this.b[c])}this.g&&this.g.clear();this.a&&this.a.clear();this.J.clear();this.b={};this.l(new Aq("clear"));this.c()};function pj(a,b,c,d){a.a?Wj(a.a,b,c,d):a.g&&a.g.forEach(c,d)}l.mc=function(){if(this.g)var a=this.g.a;else this.a&&(a=Tj(this.a),db(this.b)||Ub(a,cb(this.b)));return a};l.I=function(a){return this.a.I(a)};
l.yg=function(a){a=this.f[a.toString()];return void 0!==a?a:null};l.pi=function(){return this.u};l.Re=function(a){a=a.target;var b=w(a).toString(),c=a.O();c?(c=c.I(),b in this.b?(delete this.b[b],this.a&&this.a.da(c,a)):this.a&&Sj(this.a,c,a)):b in this.b||(this.a&&this.a.remove(a),this.b[b]=a);c=a.b;void 0!==c?(c=c.toString(),b in this.i?(delete this.i[b],this.f[c]=a):this.f[c]!==a&&(Bq(this,a),this.f[c]=a)):b in this.i||(Bq(this,a),this.i[b]=a);this.c();this.l(new Aq("changefeature",a))};
l.ed=function(a,b,c){var d=this.J;a=this.fa(a,b);var e;var f=0;for(e=a.length;f<e;++f){var g=a[f];Wj(d,g,function(a){return Ha(a.extent,g)})||(this.A.call(this,g,b,c),d.da(g,{extent:g.slice()}))}};l.Qa=function(a){var b=w(a).toString();b in this.b?delete this.b[b]:this.a&&this.a.remove(a);this.yd(a);this.c()};l.yd=function(a){var b=w(a).toString();this.o[b].forEach(vc);delete this.o[b];var c=a.b;void 0!==c?delete this.f[c.toString()]:delete this.i[b];this.l(new Aq("removefeature",a))};
function Bq(a,b){for(var c in a.f)if(a.f[c]===b){delete a.f[c];break}}function Aq(a,b){Gc.call(this,a);this.feature=b}v(Aq,Gc);function Cq(a){Hg.call(this,{handleDownEvent:Dq,handleEvent:Eq,handleUpEvent:Fq});this.M=!1;this.ea=null;this.f=!1;this.pb=a.source?a.source:null;this.Ha=a.features?a.features:null;this.sg=a.snapTolerance?a.snapTolerance:12;this.K=a.type;this.b=Gq(this.K);this.xa=a.minPoints?a.minPoints:this.b===Hq?3:2;this.la=a.maxPoints?a.maxPoints:Infinity;this.Fc=a.finishCondition?a.finishCondition:Ge;var b=a.geometryFunction;if(!b)if("Circle"===this.K)b=function(a,b){b=b?b:new rq([NaN,NaN]);sq(b,a[0],Math.sqrt(ue(a[0],
a[1])));return b};else{var c,d=this.b;d===Iq?c=lf:d===Jq?c=E:d===Hq&&(c=A);b=function(a,b){b?d===Hq?b.Y([a[0].concat([a[0][0]])]):b.Y(a):b=new c(a);return b}}this.Ia=b;this.J=this.u=this.a=this.A=this.i=this.o=null;this.qb=a.clickTolerance?a.clickTolerance*a.clickTolerance:36;this.fa=new tq({source:new vq({useSpatialIndex:!1,wrapX:a.wrapX?a.wrapX:!1}),style:a.style?a.style:Kq()});this.Ka=a.geometryName;this.qg=a.condition?a.condition:Cg;this.Dc=a.freehand?Ge:a.freehandCondition?a.freehandCondition:
Dg;z(this,Pc("active"),this.rb,this)}v(Cq,Hg);function Kq(){var a=Gj();return function(b){return a[b.O().D()]}}Cq.prototype.setMap=function(a){Hg.prototype.setMap.call(this,a);this.rb()};function Eq(a){this.f=this.b!==Iq&&this.Dc(a);var b=!0;this.f&&"pointerdrag"===a.type&&null!==this.i?(Lq(this,a),b=!1):this.f&&"pointerdown"===a.type?b=!1:"pointermove"===a.type?b=Mq(this,a):"dblclick"===a.type&&(b=!1);return Ig.call(this,a)&&b}
function Dq(a){this.M=!this.f;return this.f?(this.ea=a.pixel,this.o||Nq(this,a),!0):this.qg(a)?(this.ea=a.pixel,!0):!1}function Fq(a){var b=!0;Mq(this,a);var c=this.b===Oq;this.M?(this.o?this.f||c?Pq(this):Qq(this,a)?this.Fc(a)&&Pq(this):Lq(this,a):(Nq(this,a),this.b===Iq&&Pq(this)),b=!1):this.f&&(this.o=null,Rq(this));return b}
function Mq(a,b){if(a.ea&&(!a.f&&a.M||a.f&&!a.M)){var c=a.ea,d=b.pixel,e=c[0]-d[0];c=c[1]-d[1];e=e*e+c*c;a.M=a.f?e>a.qb:e<=a.qb}a.o?(e=b.coordinate,c=a.i.O(),a.b===Iq?d=a.a:a.b===Hq?(d=a.a[0],d=d[d.length-1],Qq(a,b)&&(e=a.o.slice())):(d=a.a,d=d[d.length-1]),d[0]=e[0],d[1]=e[1],a.Ia(a.a,c),a.A&&a.A.O().Y(e),c instanceof A&&a.b!==Hq?(a.u||(a.u=new B(new E(null))),e=c.ee(0),b=a.u.O(),b.N(e.V,e.aa())):a.J&&(b=a.u.O(),b.Y(a.J)),Sq(a)):(b=b.coordinate.slice(),a.A?a.A.O().Y(b):(a.A=new B(new lf(b)),Sq(a)));
return!0}function Qq(a,b){var c=!1;if(a.i){var d=!1,e=[a.o];a.b===Jq?d=a.a.length>a.xa:a.b===Hq&&(d=a.a[0].length>a.xa,e=[a.a[0][0],a.a[0][a.a[0].length-2]]);if(d){d=b.map;for(var f=0,g=e.length;f<g;f++){var h=e[f],k=eg(d,h),m=b.pixel;c=m[0]-k[0];k=m[1]-k[1];if(c=Math.sqrt(c*c+k*k)<=(a.f?1:a.sg)){a.o=h;break}}}}return c}
function Nq(a,b){b=b.coordinate;a.o=b;a.b===Iq?a.a=b.slice():a.b===Hq?(a.a=[[b.slice(),b.slice()]],a.J=a.a[0]):(a.a=[b.slice(),b.slice()],a.b===Oq&&(a.J=a.a));a.J&&(a.u=new B(new E(a.J)));b=a.Ia(a.a);a.i=new B;a.Ka&&a.i.Za(a.Ka);a.i.Ba(b);Sq(a);a.l(new Tq("drawstart",a.i))}
function Lq(a,b){b=b.coordinate;var c=a.i.O(),d;if(a.b===Jq){a.o=b.slice();var e=a.a;e.length>=a.la&&(a.f?e.pop():d=!0);e.push(b.slice());a.Ia(e,c)}else a.b===Hq&&(e=a.a[0],e.length>=a.la&&(a.f?e.pop():d=!0),e.push(b.slice()),d&&(a.o=e[0]),a.Ia(a.a,c));Sq(a);d&&Pq(a)}
function Pq(a){var b=Rq(a),c=a.a,d=b.O();a.b===Jq?(c.pop(),a.Ia(c,d)):a.b===Hq&&(c[0].pop(),a.Ia(c,d),c=d.G());"MultiPoint"===a.K?b.Ba(new jl([c])):"MultiLineString"===a.K?b.Ba(new hl([c])):"MultiPolygon"===a.K&&b.Ba(new ll([c]));a.l(new Tq("drawend",b));a.Ha&&a.Ha.push(b);a.pb&&a.pb.Va(b)}function Rq(a){a.o=null;var b=a.i;b&&(a.i=null,a.A=null,a.u=null,a.fa.$().clear(!0));return b}Cq.prototype.mb=He;
function Sq(a){var b=[];a.i&&b.push(a.i);a.u&&b.push(a.u);a.A&&b.push(a.A);a=a.fa.$();a.clear(!0);a.Bb(b)}Cq.prototype.rb=function(){var a=this.C,b=this.get("active");a&&b||Rq(this);this.fa.setMap(b?a:null)};function Gq(a){var b;"Point"===a||"MultiPoint"===a?b=Iq:"LineString"===a||"MultiLineString"===a?b=Jq:"Polygon"===a||"MultiPolygon"===a?b=Hq:"Circle"===a&&(b=Oq);return b}var Iq="Point",Jq="LineString",Hq="Polygon",Oq="Circle";function Tq(a,b){Gc.call(this,a);this.feature=b}v(Tq,Gc);function Uq(a){Hg.call(this,{handleDownEvent:Vq,handleDragEvent:Wq,handleEvent:Xq,handleUpEvent:Yq});this.rb=a.condition?a.condition:Gg;this.Ka=function(a){var b=a.originalEvent;return b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey&&Bg(a)};this.pb=a.deleteCondition?a.deleteCondition:this.Ka;this.qb=a.insertVertexCondition?a.insertVertexCondition:Ge;this.Ha=this.b=null;this.xa=[0,0];this.u=this.J=!1;this.a=new Rj;this.fa=void 0!==a.pixelTolerance?a.pixelTolerance:10;this.i=this.la=!1;this.f=[];this.A=
new tq({source:new vq({useSpatialIndex:!1,wrapX:!!a.wrapX}),style:a.style?a.style:Zq(),updateWhileAnimating:!0,updateWhileInteracting:!0});this.ea={Point:this.ei,LineString:this.Je,LinearRing:this.Je,Polygon:this.fi,MultiPoint:this.ci,MultiLineString:this.bi,MultiPolygon:this.di,Circle:this.$h,GeometryCollection:this.ai};this.M=null;a.source?(this.M=a.source,a=new Sc(this.M.mc()),z(this.M,"addfeature",this.Yg,this),z(this.M,"removefeature",this.ah,this)):a=a.features;if(!a)throw Error("The modify interaction requires features or a source");
this.o=a;this.o.forEach(this.hd,this);z(this.o,"add",this.Yh,this);z(this.o,"remove",this.Zh,this);this.K=null}v(Uq,Hg);l=Uq.prototype;l.hd=function(a){var b=a.O();b&&b.D()in this.ea&&this.ea[b.D()].call(this,a,b);(b=this.C)&&b.b&&this.get("active")&&$q(this,this.xa,b);z(a,"change",this.Ie,this)};function ar(a,b){a.u||(a.u=!0,a.l(new br("modifystart",a.o,b)))}function cr(a,b){dr(a,b);a.b&&0===a.o.fb()&&(a.A.$().Qa(a.b),a.b=null);Ac(b,"change",a.Ie,a)}
function dr(a,b){a=a.a;var c=[];a.forEach(function(a){b===a.feature&&c.push(a)});for(var d=c.length-1;0<=d;--d)a.remove(c[d])}l.gb=function(a){this.b&&!a&&(this.A.$().Qa(this.b),this.b=null);Hg.prototype.gb.call(this,a)};l.setMap=function(a){this.A.setMap(a);Hg.prototype.setMap.call(this,a)};l.Yg=function(a){a.feature&&this.o.push(a.feature)};l.ah=function(a){a.feature&&this.o.remove(a.feature)};l.Yh=function(a){this.hd(a.element)};l.Ie=function(a){this.i||(a=a.target,cr(this,a),this.hd(a))};
l.Zh=function(a){cr(this,a.element)};l.ei=function(a,b){var c=b.G();a={feature:a,geometry:b,S:[c,c]};this.a.da(b.I(),a)};l.ci=function(a,b){var c=b.G(),d;var e=0;for(d=c.length;e<d;++e){var f=c[e];f={feature:a,geometry:b,depth:[e],index:e,S:[f,f]};this.a.da(b.I(),f)}};l.Je=function(a,b){var c=b.G(),d;var e=0;for(d=c.length-1;e<d;++e){var f=c.slice(e,e+2);var g={feature:a,geometry:b,index:e,S:f};this.a.da(Aa(f),g)}};
l.bi=function(a,b){var c=b.G(),d,e;var f=0;for(e=c.length;f<e;++f){var g=c[f];var h=0;for(d=g.length-1;h<d;++h){var k=g.slice(h,h+2);var m={feature:a,geometry:b,depth:[f],index:h,S:k};this.a.da(Aa(k),m)}}};l.fi=function(a,b){var c=b.G(),d,e;var f=0;for(e=c.length;f<e;++f){var g=c[f];var h=0;for(d=g.length-1;h<d;++h){var k=g.slice(h,h+2);var m={feature:a,geometry:b,depth:[f],index:h,S:k};this.a.da(Aa(k),m)}}};
l.di=function(a,b){var c=b.G(),d,e,f;var g=0;for(f=c.length;g<f;++g){var h=c[g];var k=0;for(e=h.length;k<e;++k){var m=h[k];var n=0;for(d=m.length-1;n<d;++n){var p=m.slice(n,n+2);var q={feature:a,geometry:b,depth:[k,g],index:n,S:p};this.a.da(Aa(p),q)}}}};l.$h=function(a,b){var c=b.ja(),d={feature:a,geometry:b,index:0,S:[c,c]};a={feature:a,geometry:b,index:1,S:[c,c]};d.Vc=a.Vc=[d,a];this.a.da(La(c),d);this.a.da(b.I(),a)};
l.ai=function(a,b){var c=b.a;for(b=0;b<c.length;++b)this.ea[c[b].D()].call(this,a,c[b])};function er(a,b){var c=a.b;c?c.O().Y(b):(c=new B(new lf(b)),a.b=c,a.A.$().Va(c))}function fr(a,b){return a.index-b.index}
function Vq(a){if(!this.rb(a))return!1;$q(this,a.pixel,a.map);var b=a.map.Ja(a.pixel);this.f.length=0;this.u=!1;var c=this.b;if(c){var d=[];c=c.O().G();var e=Aa([c]);e=Uj(this.a,e);var f={};e.sort(fr);for(var g=0,h=e.length;g<h;++g){var k=e[g],m=k.S,n=w(k.feature),p=k.depth;p&&(n+="-"+p.join("-"));f[n]||(f[n]=Array(2));if("Circle"===k.geometry.D()&&1===k.index)m=gr(b,k),re(m,c)&&!f[n][0]&&(this.f.push([k,0]),f[n][0]=k);else if(re(m[0],c)&&!f[n][0])this.f.push([k,0]),f[n][0]=k;else if(re(m[1],c)&&
!f[n][1]){if("LineString"!==k.geometry.D()&&"MultiLineString"!==k.geometry.D()||!f[n][0]||0!==f[n][0].index)this.f.push([k,1]),f[n][1]=k}else this.qb(a)&&w(m)in this.Ha&&!f[n][0]&&!f[n][1]&&d.push([k,c])}d.length&&ar(this,a);for(a=d.length-1;0<=a;--a)this.hh.apply(this,d[a])}return!!this.b}
function Wq(a){this.J=!1;ar(this,a);a=a.coordinate;for(var b=0,c=this.f.length;b<c;++b){var d=this.f[b],e=d[0],f=e.depth,g=e.geometry,h=e.S;for(d=d[1];a.length<g.ga();)a.push(h[d][a.length]);switch(g.D()){case "Point":var k=a;h[0]=h[1]=a;break;case "MultiPoint":k=g.G();k[e.index]=a;h[0]=h[1]=a;break;case "LineString":k=g.G();k[e.index+d]=a;h[d]=a;break;case "MultiLineString":k=g.G();k[f[0]][e.index+d]=a;h[d]=a;break;case "Polygon":k=g.G();k[f[0]][e.index+d]=a;h[d]=a;break;case "MultiPolygon":k=g.G();
k[f[1]][f[0]][e.index+d]=a;h[d]=a;break;case "Circle":h[0]=h[1]=a,0===e.index?(this.i=!0,g.Oa(a)):(this.i=!0,g.kf(ve(g.ja(),a))),this.i=!1}k&&(e=g,f=k,this.i=!0,e.Y(f),this.i=!1)}er(this,a)}function Yq(a){for(var b,c,d=this.f.length-1;0<=d;--d)if(b=this.f[d][0],c=b.geometry,"Circle"===c.D()){var e=c.ja(),f=b.Vc[0];b=b.Vc[1];f.S[0]=f.S[1]=e;b.S[0]=b.S[1]=e;Sj(this.a,La(e),f);Sj(this.a,c.I(),b)}else Sj(this.a,Aa(b.S),b);this.u&&(this.l(new br("modifyend",this.o,a)),this.u=!1);return!1}
function Xq(a){if(!(a instanceof qd))return!0;this.K=a;0<a.map.Z().a[1]||"pointermove"!=a.type||this.B||(this.xa=a.pixel,$q(this,a.pixel,a.map));if(this.b&&this.pb(a)){if("singleclick"==a.type&&this.J)var b=!0;else if(this.K&&"pointerdrag"!=this.K.type){var c=this.K;ar(this,c);var d=this.f,e={},f,g;for(g=d.length-1;0<=g;--g){var h=d[g];var k=h[0];b=w(k.feature);k.depth&&(b+="-"+k.depth.join("-"));b in e||(e[b]={});0===h[1]?(e[b].right=k,e[b].index=k.index):1==h[1]&&(e[b].left=k,e[b].index=k.index+
1)}for(b in e){var m=e[b].right;var n=e[b].left;g=e[b].index;var p=g-1;k=void 0!==n?n:m;0>p&&(p=0);h=k.geometry;var q=f=h.G();var t=!1;switch(h.D()){case "MultiLineString":2<f[k.depth[0]].length&&(f[k.depth[0]].splice(g,1),t=!0);break;case "LineString":2<f.length&&(f.splice(g,1),t=!0);break;case "MultiPolygon":q=q[k.depth[1]];case "Polygon":q=q[k.depth[0]],4<q.length&&(g==q.length-1&&(g=0),q.splice(g,1),t=!0,0===g&&(q.pop(),q.push(q[0]),p=q.length-1))}t&&(t=h,this.i=!0,t.Y(f),this.i=!1,f=[],void 0!==
n&&(this.a.remove(n),f.push(n.S[0])),void 0!==m&&(this.a.remove(m),f.push(m.S[1])),void 0!==n&&void 0!==m&&(n={depth:k.depth,feature:k.feature,geometry:k.geometry,index:p,S:f},this.a.da(Aa(n.S),n)),hr(this,h,g,k.depth,-1),this.b&&(this.A.$().Qa(this.b),this.b=null),d.length=0)}this.l(new br("modifyend",this.o,c));this.u=!1;b=!0}else b=!1;c=b}"singleclick"==a.type&&(this.J=!1);return Ig.call(this,a)&&!c}
function $q(a,b,c){function d(a,b){return ir(e,a)-ir(e,b)}var e=c.Ja(b),f=Ea(La(e),c.Z().za()*a.fa);f=Uj(a.a,f);if(0<f.length){f.sort(d);var g=f[0],h=g.S,k=gr(e,g),m=eg(c,k),n=ve(b,m);if(n<=a.fa){b={};if("Circle"===g.geometry.D()&&1===g.index)a.la=!0,er(a,k);else for(n=eg(c,h[0]),g=eg(c,h[1]),c=ue(m,n),m=ue(m,g),n=Math.sqrt(Math.min(c,m)),a.la=n<=a.fa,a.la&&(k=c>m?h[1]:h[0]),er(a,k),m=1,c=f.length;m<c;++m)if(k=f[m].S,re(h[0],k[0])&&re(h[1],k[1])||re(h[0],k[1])&&re(h[1],k[0]))b[w(k)]=!0;else break;
b[w(h)]=!0;a.Ha=b;return}}a.b&&(a.A.$().Qa(a.b),a.b=null)}function ir(a,b){var c=b.geometry;return"Circle"===c.D()&&1===b.index?(a=ue(c.ja(),a),c=Math.sqrt(a)-c.Jb(),c*c):we(a,b.S)}function gr(a,b){var c=b.geometry;"Circle"===c.D()&&1===b.index?(b=[NaN,NaN],c.Pa(a[0],a[1],b,Infinity),a=b):a=qe(a,b.S);return a}
l.hh=function(a,b){for(var c=a.S,d=a.feature,e=a.geometry,f=a.depth,g=a.index,h;b.length<e.ga();)b.push(0);switch(e.D()){case "MultiLineString":h=e.G();h[f[0]].splice(g+1,0,b);break;case "Polygon":h=e.G();h[f[0]].splice(g+1,0,b);break;case "MultiPolygon":h=e.G();h[f[1]][f[0]].splice(g+1,0,b);break;case "LineString":h=e.G();h.splice(g+1,0,b);break;default:return}this.i=!0;e.Y(h);this.i=!1;h=this.a;h.remove(a);hr(this,e,g,f,1);a={S:[c[0],b],feature:d,geometry:e,depth:f,index:g};h.da(Aa(a.S),a);this.f.push([a,
1]);b={S:[b,c[1]],feature:d,geometry:e,depth:f,index:g+1};h.da(Aa(b.S),b);this.f.push([b,0]);this.J=!0};function hr(a,b,c,d,e){Wj(a.a,b.I(),function(a){a.geometry===b&&(void 0===d||void 0===a.depth||Vb(a.depth,d))&&a.index>c&&(a.index+=e)})}function Zq(){var a=Gj();return function(){return a.Point}}function br(a,b,c){Gc.call(this,a);this.features=b;this.mapBrowserEvent=c}v(br,Gc);function jr(a){tg.call(this,{handleEvent:kr});a=a?a:{};this.u=a.condition?a.condition:Bg;this.B=a.addCondition?a.addCondition:He;this.M=a.removeCondition?a.removeCondition:He;this.X=a.toggleCondition?a.toggleCondition:Dg;this.o=a.multi?a.multi:!1;this.g=a.filter?a.filter:Ge;this.f=a.hitTolerance?a.hitTolerance:0;this.a=new tq({source:new vq({useSpatialIndex:!1,features:a.features,wrapX:a.wrapX}),style:a.style?a.style:lr(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(a.layers)if("function"===
typeof a.layers)a=a.layers;else{var b=a.layers;a=function(a){return 0<=b.indexOf(a)}}else a=Ge;this.i=a;this.b={};a=this.a.$().g;z(a,"add",this.A,this);z(a,"remove",this.K,this)}v(jr,tg);jr.prototype.J=function(){return this.a.$().g};
function kr(a){if(!this.u(a))return!0;var b=this.B(a),c=this.M(a),d=this.X(a),e=!b&&!c&&!d,f=a.map,g=this.a.$().g,h=[],k=[];if(e){bb(this.b);f.Wc(a.pixel,function(a,b){if(this.g(a,b))return k.push(a),a=w(a),this.b[a]=b,!this.o}.bind(this),{layerFilter:this.i,hitTolerance:this.f});for(e=g.fb()-1;0<=e;--e){f=g.oe(e);var m=k.indexOf(f);-1<m?k.splice(m,1):(g.remove(f),h.push(f))}0!==k.length&&Vc(g,k)}else{f.Wc(a.pixel,function(a,e){if(this.g(a,e))return!b&&!d||0<=g.a.indexOf(a)?(c||d)&&0<=g.a.indexOf(a)&&
(h.push(a),e=w(a),delete this.b[e]):(k.push(a),a=w(a),this.b[a]=e),!this.o}.bind(this),{layerFilter:this.i,hitTolerance:this.f});for(e=h.length-1;0<=e;--e)g.remove(h[e]);Vc(g,k)}(0<k.length||0<h.length)&&this.l(new mr(nr,k,h,a));return"pointermove"==a.type}jr.prototype.setMap=function(a){var b=this.C,c=this.a.$().g;b&&c.forEach(b.vf,b);tg.prototype.setMap.call(this,a);this.a.setMap(a);a&&c.forEach(a.rf,a)};
function lr(){var a=Gj();Ub(a.Polygon,a.LineString);Ub(a.GeometryCollection,a.LineString);return function(b){return b.O()?a[b.O().D()]:null}}jr.prototype.A=function(a){var b=this.C;b&&b.rf(a.element)};jr.prototype.K=function(a){var b=this.C;b&&b.vf(a.element)};function mr(a,b,c,d){Gc.call(this,a);this.selected=b;this.deselected=c;this.mapBrowserEvent=d}v(mr,Gc);var nr="select";function or(a){Hg.call(this,{handleEvent:pr,handleDownEvent:Ge,handleUpEvent:qr});a=a?a:{};this.i=a.source?a.source:null;this.K=void 0!==a.vertex?a.vertex:!0;this.u=void 0!==a.edge?a.edge:!0;this.f=a.features?a.features:null;this.fa=[];this.A={};this.M={};this.o={};this.J=null;this.b=void 0!==a.pixelTolerance?a.pixelTolerance:10;this.la=rr.bind(this);this.a=new Rj;this.ea={Point:this.mi,LineString:this.Me,LinearRing:this.Me,Polygon:this.ni,MultiPoint:this.ki,MultiLineString:this.ji,MultiPolygon:this.li,
GeometryCollection:this.ii,Circle:this.hi}}v(or,Hg);l=or.prototype;l.Va=function(a,b){b=void 0!==b?b:!0;var c=w(a),d=a.O();if(d){var e=this.ea[d.D()];e&&(this.M[c]=d.I(Ba()),e.call(this,a,d))}b&&(this.A[c]=z(a,"change",this.gi,this))};l.ug=function(a){this.Va(a)};l.vg=function(a){this.Qa(a)};l.Ke=function(a){if(a instanceof Aq)var b=a.feature;else a instanceof Yc&&(b=a.element);this.Va(b)};l.Le=function(a){if(a instanceof Aq)var b=a.feature;else a instanceof Yc&&(b=a.element);this.Qa(b)};
l.gi=function(a){a=a.target;if(this.B){var b=w(a);b in this.o||(this.o[b]=a)}else this.wf(a)};l.Qa=function(a,b){b=void 0!==b?b:!0;var c=w(a),d=this.M[c];if(d){var e=this.a,f=[];Wj(e,d,function(b){a===b.feature&&f.push(b)});for(d=f.length-1;0<=d;--d)e.remove(f[d])}b&&(vc(this.A[c]),delete this.A[c])};
l.setMap=function(a){var b=this.C,c=this.fa,d;this.f?d=this.f:this.i&&(d=this.i.mc());b&&(c.forEach(vc),c.length=0,d.forEach(this.vg,this));Hg.prototype.setMap.call(this,a);a&&(this.f?c.push(z(this.f,"add",this.Ke,this),z(this.f,"remove",this.Le,this)):this.i&&c.push(z(this.i,"addfeature",this.Ke,this),z(this.i,"removefeature",this.Le,this)),d.forEach(this.ug,this))};l.mb=He;
function sr(a,b,c,d){var e=d.Ja([b[0]-a.b,b[1]+a.b]),f=d.Ja([b[0]+a.b,b[1]-a.b]);e=Aa([e,f]);var g=Uj(a.a,e);a.K&&!a.u&&(g=g.filter(function(a){return"Circle"!==a.feature.O().D()}));var h=!1;e=!1;var k=f=null;if(0<g.length){a.J=c;g.sort(a.la);var m=g[0].S;h="Circle"===g[0].feature.O().D();if(a.K&&!a.u){if(c=eg(d,m[0]),h=eg(d,m[1]),c=ue(b,c),b=ue(b,h),h=Math.sqrt(Math.min(c,b)),h=h<=a.b)e=!0,f=c>b?m[1]:m[0],k=eg(d,f)}else a.u&&(f=h?pe(c,g[0].feature.O()):qe(c,m),k=eg(d,f),ve(b,k)<=a.b&&(e=!0,a.K&&
!h&&(c=eg(d,m[0]),h=eg(d,m[1]),c=ue(k,c),b=ue(k,h),h=Math.sqrt(Math.min(c,b)),h=h<=a.b)))&&(f=c>b?m[1]:m[0],k=eg(d,f));e&&(k=[Math.round(k[0]),Math.round(k[1])])}return{hj:e,vertex:f,qj:k}}l.wf=function(a){this.Qa(a,!1);this.Va(a,!1)};
l.hi=function(a,b){var c=b.ga(),d=b.V,e=new A(null,d);c*=33;for(var f=Array(c),g=0;g<c;g++)f[g]=0;e.N(d,f,[f.length]);d=b.ja();b=b.Jb();c=e.aa();f=e.V;g=e.ga();for(var h=e.Ma(),k=c.length/g-1,m,n,p=0;p<=k;++p)n=p*g,m=0+2*va(p,k)*Math.PI/k,c[n]=d[0]+b*Math.cos(m),c[n+1]=d[1]+b*Math.sin(m);e.N(f,c,h);e=e.G()[0];d=0;for(b=e.length-1;d<b;++d)c=e.slice(d,d+2),f={feature:a,S:c},this.a.da(Aa(c),f)};l.ii=function(a,b){var c=b.a;for(b=0;b<c.length;++b){var d=this.ea[c[b].D()];d&&d.call(this,a,c[b])}};
l.Me=function(a,b){b=b.G();var c;var d=0;for(c=b.length-1;d<c;++d){var e=b.slice(d,d+2);var f={feature:a,S:e};this.a.da(Aa(e),f)}};l.ji=function(a,b){b=b.G();var c,d;var e=0;for(d=b.length;e<d;++e){var f=b[e];var g=0;for(c=f.length-1;g<c;++g){var h=f.slice(g,g+2);var k={feature:a,S:h};this.a.da(Aa(h),k)}}};l.ki=function(a,b){var c=b.G(),d;var e=0;for(d=c.length;e<d;++e){var f=c[e];f={feature:a,S:[f,f]};this.a.da(b.I(),f)}};
l.li=function(a,b){b=b.G();var c,d,e;var f=0;for(e=b.length;f<e;++f){var g=b[f];var h=0;for(d=g.length;h<d;++h){var k=g[h];var m=0;for(c=k.length-1;m<c;++m){var n=k.slice(m,m+2);var p={feature:a,S:n};this.a.da(Aa(n),p)}}}};l.mi=function(a,b){var c=b.G();a={feature:a,S:[c,c]};this.a.da(b.I(),a)};l.ni=function(a,b){b=b.G();var c,d;var e=0;for(d=b.length;e<d;++e){var f=b[e];var g=0;for(c=f.length-1;g<c;++g){var h=f.slice(g,g+2);var k={feature:a,S:h};this.a.da(Aa(h),k)}}};
function pr(a){var b=sr(this,a.pixel,a.coordinate,a.map);b.hj&&(a.coordinate=b.vertex.slice(0,2),a.pixel=b.qj);return Ig.call(this,a)}function qr(){var a=cb(this.o);a.length&&(a.forEach(this.wf,this),this.o={});return!1}function rr(a,b){return we(this.J,a.S)-we(this.J,b.S)};function tr(a){a=a?a:{};var b=Za({},a);delete b.preload;delete b.useInterimTilesOnError;ig.call(this,b);this.set("preload",void 0!==a.preload?a.preload:0);this.set("useInterimTilesOnError",void 0!==a.useInterimTilesOnError?a.useInterimTilesOnError:!0);this.type="TILE"}v(tr,ig);tr.prototype.B=function(){return this.get("preload")};tr.prototype.u=function(){return this.get("useInterimTilesOnError")};function ur(a){a=a?a:{};var b=Za({},a);delete b.preload;delete b.useInterimTilesOnError;tq.call(this,b);this.set("preload",a.preload?a.preload:0);this.set("useInterimTilesOnError",a.useInterimTilesOnError?a.useInterimTilesOnError:!0);b=a.renderMode;x(void 0==b||"image"==b||"hybrid"==b||"vector"==b,28);a.declutter&&"image"==b&&(b="hybrid");this.o=b||"hybrid";this.type="VECTOR_TILE"}v(ur,tq);ur.prototype.B=function(){return this.get("preload")};ur.prototype.u=function(){return this.get("useInterimTilesOnError")};function vr(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(g){if(g)return a.replace(c,g[0].toString()).replace(d,g[1].toString()).replace(e,function(){return(-g[2]-1).toString()}).replace(f,function(){var a=b.c?b.c[g[0]]:null;x(a,55);return(a.U-a.R+1+g[2]).toString()})}}function wr(a,b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=vr(a[e],b);return xr(d)}function xr(a){return 1===a.length?a[0]:function(b,c,d){if(b)return a[va((b[1]<<b[0])+b[2],a.length)](b,c,d)}}
function yr(){}function zr(a){var b=[],c=/\{([a-z])-([a-z])\}/.exec(a);if(c){var d=c[2].charCodeAt(0),e;for(e=c[1].charCodeAt(0);e<=d;++e)b.push(a.replace(c[0],String.fromCharCode(e)));return b}if(c=c=/\{(\d+)-(\d+)\}/.exec(a)){d=parseInt(c[2],10);for(e=parseInt(c[1],10);e<=d;e++)b.push(a.replace(c[0],e.toString()));return b}b.push(a);return b};function Ar(a){vh.call(this,a)}v(Ar,vh);Ar.prototype.Db=function(a){for(var b,c;this.b>this.highWaterMark;){b=this.c.ob;c=b.ta[0].toString();var d;if(d=c in a)b=b.ta,d=qa(a[c],b[1],b[2]);if(d)break;else Cc(this.pop())}};function Br(a){if(0!==a.b){var b=a.a.eb.split("/").map(Number)[0];a.forEach(function(a){if(a.ta[0]!==b){var c=a.ta;this.remove(c[0]+"/"+c[1]+"/"+c[2]);Cc(a)}},a)}};function Cr(a){Xj.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state,wrapX:a.wrapX});this.Ha=void 0!==a.opaque?a.opaque:!1;this.Ka=void 0!==a.tilePixelRatio?a.tilePixelRatio:1;this.tileGrid=void 0!==a.tileGrid?a.tileGrid:null;this.a=new Ar(a.cacheSize);this.b=[0,0];this.eb="";this.X={transition:a.transition}}v(Cr,Xj);l=Cr.prototype;l.jd=function(){var a=this.a;return a.b>a.highWaterMark};l.Db=function(a,b){(a=this.cc(a))&&a.Db(b)};
function di(a,b,c,d,e){a=a.cc(b);if(!a)return!1;b=!0;for(var f,g,h=d.T;h<=d.W;++h)for(var k=d.R;k<=d.U;++k)f=c+"/"+h+"/"+k,g=!1,a.j.hasOwnProperty(f)&&(f=a.get(f),(g=2===f.state)&&(g=!1!==e(f))),g||(b=!1);return b}l.ae=function(){return 0};function Dr(a,b){a.eb!==b&&(a.eb=b,a.c())}l.$c=function(){return this.Ha};l.ya=function(a){if(this.tileGrid)a=this.tileGrid;else{var b=a.f;b||(b=rc(a),a.f=b);a=b}return a};l.cc=function(a){var b=this.C;return b&&!Mb(b,a)?null:this.a};l.Gb=function(){return this.Ka};
l.dc=function(a,b,c){c=this.ya(c);b=this.Gb(b);a=za(lc(c,a),this.b);return 1==b?a:ya(a,b,this.b)};function Er(a,b,c){var d=void 0!==c?c:a.C;c=a.ya(d);if(a.B&&d.b){var e=b;b=e[0];a=nc(c,e);d=sc(d);Ia(d,a[0],a[1])?b=e:(e=Xa(d),a[0]+=e*Math.ceil((d[0]-a[0])/e),b=mc(c,a[0],a[1],b,!1,void 0))}e=b[0];d=b[1];a=b[2];if(c.minZoom>e||e>c.maxZoom)c=!1;else{var f=c.I();c=(c=f?dc(c,f,e):c.c?c.c[e]:null)?qa(c,d,a):!0}return c?b:null}l.Kb=function(){this.a.clear();this.c()};l.yf=la;
function Fr(a,b){Gc.call(this,a);this.tile=b}v(Fr,Gc);function Gr(a){Cr.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX,transition:a.transition});this.tileLoadFunction=a.tileLoadFunction;this.tileUrlFunction=this.g?this.g.bind(this):yr;this.urls=null;if(a.urls){var b=a.urls;this.urls=b;var c=b.join("\n");Hr(this,this.g?this.g.bind(this):wr(b,this.tileGrid),c)}else a.url&&(b=a.url,c=this.urls=
zr(b),Hr(this,this.g?this.g.bind(this):wr(c,this.tileGrid),b));a.tileUrlFunction&&Hr(this,a.tileUrlFunction);this.A={}}v(Gr,Cr);Gr.prototype.M=function(a){a=a.target;var b=w(a),c=a.state;if(1==c){this.A[b]=!0;var d="tileloadstart"}else b in this.A&&(delete this.A[b],d=3==c?"tileloaderror":2==c||5==c?"tileloadend":void 0);void 0!=d&&this.l(new Fr(d,a))};function Hr(a,b,c){a.tileUrlFunction=b;Br(a.a);"undefined"!==typeof c?Dr(a,c):a.c()}
Gr.prototype.yf=function(a,b,c){a=a+"/"+b+"/"+c;this.a.j.hasOwnProperty(a)&&this.a.get(a)};function Ir(a){Gr.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:Jr,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX,transition:a.transition});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.tileClass=void 0!==a.tileClass?a.tileClass:Oj}v(Ir,Gr);l=Ir.prototype;
l.jd=function(){return Gr.prototype.jd.call(this)};l.Db=function(a,b){Gr.prototype.Db.call(this,a,b)};l.ae=function(){return this.be()};l.be=function(){return 0};l.$c=function(a){return Gr.prototype.$c.call(this,a)};l.ya=function(a){return Gr.prototype.ya.call(this,a)};l.cc=function(a){return Gr.prototype.cc.call(this,a)};
function Kr(a,b,c,d,e,f,g){b=[b,c,d];e=(c=Er(a,b,f))?a.tileUrlFunction(c,e,f):void 0;e=new a.tileClass(b,void 0!==e?0:4,void 0!==e?e:"",a.crossOrigin,a.tileLoadFunction,a.X);e.key=g;z(e,"change",a.M,a);return e}
l.kd=function(a,b,c,d,e){var f=this.C||e,g=a+"/"+b+"/"+c,h=this.eb;if(this.a.j.hasOwnProperty(g)){if(e=this.a.get(g),e.key!=h){var k=e;e=Kr(this,a,b,c,d,f,h);0==k.state?e.c=k.c:e.c=k;if(e.c){a=e.c;b=e;do{if(2==a.state){a.c=null;break}else 1==a.state?b=a:0==a.state?b.c=a.c:b=a;a=b.c}while(a)}a=this.a;b=e;a.get(g);a.j[g].ob=b}}else e=Kr(this,a,b,c,d,f,h),this.a.set(g,e);return e};function Jr(a,b){a.ba().src=b};function Lr(a){a=a||{};var b=void 0!==a.projection?a.projection:"EPSG:3857",c=void 0!==a.tileGrid?a.tileGrid:pc({extent:sc(b),maxZoom:a.maxZoom,minZoom:a.minZoom,tileSize:a.tileSize});Ir.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:a.opaque,projection:b,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:c,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,
wrapX:void 0!==a.wrapX?a.wrapX:!0,transition:a.transition})}v(Lr,Ir);function Mr(a){vq.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,wrapX:a.wrapX});this.resolution=void 0;this.distance=void 0!==a.distance?a.distance:20;this.features=[];this.geometryFunction=a.geometryFunction||function(a){a=a.O();x(a instanceof lf,10);return a};this.source=a.source;this.source.v("change",Mr.prototype.Kb,this)}v(Mr,vq);Mr.prototype.ed=function(a,b,c){this.source.ed(a,b,c);b!==this.resolution&&(this.clear(),this.resolution=b,Nr(this),this.Bb(this.features))};
Mr.prototype.X=function(a){this.distance=a;this.Kb()};Mr.prototype.Kb=function(){this.clear();Nr(this);this.Bb(this.features);vq.prototype.Kb.call(this)};
function Nr(a){if(void 0!==a.resolution){a.features.length=0;for(var b=Ba(),c=a.distance*a.resolution,d=a.source.mc(),e={},f=0,g=d.length;f<g;f++){var h=d[f];w(h).toString()in e||!(h=a.geometryFunction(h))||(h=h.G(),La(h,b),Ea(b,c,b),h=Uj(a.source.a,b),h=h.filter(function(a){a=w(a).toString();return a in e?!1:e[a]=!0}),a.features.push(Or(a,h)))}}}
function Or(a,b){for(var c=[0,0],d=b.length-1;0<=d;--d){var e=a.geometryFunction(b[d]);e?oe(c,e.G()):b.splice(d,1)}te(c,1/b.length);a=new B(new lf(c));a.set("features",b);return a};function Pr(a,b){var c=[];Object.keys(b).forEach(function(a){null!==b[a]&&void 0!==b[a]&&c.push(a+"="+encodeURIComponent(b[a]))});var d=c.join("&");a=a.replace(/[?&]$/,"");a=-1===a.indexOf("?")?a+"?":a+"&";return a+d};function Qr(a){a=a||{};var b;void 0!==a.attributions?b=a.attributions:b=['&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'];Lr.call(this,{attributions:b,cacheSize:a.cacheSize,crossOrigin:void 0!==a.crossOrigin?a.crossOrigin:"anonymous",opaque:void 0!==a.opaque?a.opaque:!0,maxZoom:void 0!==a.maxZoom?a.maxZoom:19,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileLoadFunction:a.tileLoadFunction,url:void 0!==a.url?a.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",
wrapX:a.wrapX})}v(Qr,Lr);yi.pd={};yi.pd.Gd=function(){};
(function(a){function b(a,b,c){if(g)return new ImageData(a,b,c);b=h.createImageData(b,c);b.data.set(a);return b}function c(a){var b=!0;try{new ImageData(10,10)}catch(n){b=!1}return function(c){var d=c.buffers,e=c.meta,f=c.width,g=c.height,h=d.length,k=d[0].byteLength;if(c.imageOps){k=Array(h);for(c=0;c<h;++c){var m=c;var n=new Uint8ClampedArray(d[c]);var G=f,R=g;n=b?new ImageData(n,G,R):{data:n,width:G,height:R};k[m]=n}f=a(k,e).data}else{f=new Uint8ClampedArray(k);g=Array(h);m=Array(h);for(c=0;c<
h;++c)g[c]=new Uint8ClampedArray(d[c]),m[c]=[0,0,0,0];for(d=0;d<k;d+=4){for(c=0;c<h;++c)n=g[c],m[c][0]=n[d],m[c][1]=n[d+1],m[c][2]=n[d+2],m[c][3]=n[d+3];c=a(m,e);f[d]=c[0];f[d+1]=c[1];f[d+2]=c[2];f[d+3]=c[3]}}return f.buffer}}function d(a,b){var d=Object.keys(a.lib||{}).map(function(b){return"var "+b+" = "+a.lib[b].toString()+";"}).concat(["var __minion__ = ("+c.toString()+")(",a.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);",
"  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]);d=URL.createObjectURL(new Blob(d,{type:"text/javascript"}));d=new Worker(d);d.addEventListener("message",b);return d}function e(a,b){var d=c(a.operation);return{postMessage:function(a){setTimeout(function(){b({data:{buffer:d(a),meta:a.meta}})},0)}}}function f(a){this.Gc=!!a.Ej;var b;0===a.threads?b=0:this.Gc?b=1:b=a.threads||1;var c=[];if(b)for(var f=0;f<b;++f)c[f]=d(a,this.Md.bind(this,f));else c[0]=e(a,this.Md.bind(this,
0));this.Wb=c;this.Nd=[];this.Vb=0;this.sb={};this.Hc=null}var g=!0;try{new ImageData(10,10)}catch(k){g=!1}var h=document.createElement("canvas").getContext("2d");f.prototype.Wf=function(){if(0===this.Vb&&0<this.Nd.length){var a=this.Hc=this.Nd.shift(),b=a.inputs[0].width,c=a.inputs[0].height,d=a.inputs.map(function(a){return a.data.buffer}),e=this.Wb.length;this.Vb=e;if(1===e)this.Wb[0].postMessage({buffers:d,meta:a.lh,imageOps:this.Gc,width:b,height:c},d);else for(var f=4*Math.ceil(a.inputs[0].data.length/
4/e),g=0;g<e;++g){for(var h=g*f,C=[],D=0,I=d.length;D<I;++D)C.push(d[g].slice(h,h+f));this.Wb[g].postMessage({buffers:C,meta:a.lh,imageOps:this.Gc,width:b,height:c},C)}}};f.prototype.Md=function(a,b){this.Dj||(this.sb[a]=b.data,--this.Vb,0===this.Vb&&this.Yf())};f.prototype.Yf=function(){var a=this.Hc,c=this.Wb.length;if(1===c){var d=new Uint8ClampedArray(this.sb[0].buffer);var e=this.sb[0].meta}else{var f=a.inputs[0].data.length;d=new Uint8ClampedArray(f);e=Array(f);f=4*Math.ceil(f/4/c);for(var g=
0;g<c;++g){var h=g*f;d.set(new Uint8ClampedArray(this.sb[g].buffer),h);e[g]=this.sb[g].meta}}this.Hc=null;this.sb={};a.callback(null,b(d,a.inputs[0].width,a.inputs[0].height),e);this.Wf()};a["default"]={Gd:f};a.Gd=f})(yi.pd=yi.pd||{});function Rr(a){a=a||{};Ir.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0,transition:a.transition});this.f=a.params||{};this.i=Ba();a=0;var b=[],c;for(c in this.f)b[a++]=c+"-"+this.f[c];Dr(this,b.join("/"))}v(Rr,Ir);Rr.prototype.Gb=function(a){return a};
Rr.prototype.g=function(a,b,c){var d=this.tileGrid;d||(d=this.ya(c));if(!(d.a.length<=a[0])){var e=hc(d,a,this.i),f=za(lc(d,a[0]),this.b);1!=b&&(f=ya(f,b,this.b));d={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Za(d,this.f);var g=this.urls;g?(c=c.La.split(":").pop(),d.SIZE=f[0]+","+f[1],d.BBOX=e.join(","),d.BBOXSR=c,d.IMAGESR=c,d.DPI=Math.round(d.DPI?d.DPI*b:90*b),a=(1==g.length?g[0]:g[va((a[1]<<a[0])+a[2],g.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),
a=Pr(a,d)):a=void 0;return a}};function Sr(a){a=a||{};var b=a.params||{};Ir.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:!("TRANSPARENT"in b?b.TRANSPARENT:1),projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0,transition:a.transition});this.o=void 0!==a.gutter?a.gutter:0;this.f=b;this.i=!0;this.u=a.serverType;
this.J=void 0!==a.hidpi?a.hidpi:!0;this.K=Ba();a:{a=(""+(this.f.VERSION||"1.3.0")).split(".");b=["1","3"];for(var c=0;c<Math.max(a.length,b.length);c++){var d=parseInt(a[c]||"0",10),e=parseInt(b[c]||"0",10);if(d>e){a=1;break a}if(e>d){a=-1;break a}}a=0}this.i=0<=a;a=0;b=[];for(var f in this.f)b[a++]=f+"-"+this.f[f];Dr(this,b.join("/"))}v(Sr,Ir);
Sr.prototype.fa=function(a,b,c,d){c=Fb(c);var e=this.C,f=this.tileGrid;f||(f=this.ya(c));var g=a[0],h=a[1],k=oc(f,b),m=b/f.a[k],n=ic(f,k),p=za(lc(f,k),f.g);g=m*Math.floor((g-n[0])/b+0)/p[0];b=m*Math.floor((h-n[1])/b+.5)/p[1];g=Math.floor(g);b=Math.floor(b);b=Zb(k,g,b,void 0);if(!(f.a.length<=b[0])){h=f.a[b[0]];k=hc(f,b,this.K);f=za(lc(f,b[0]),this.b);m=this.o;0!==m&&(f=xa(f,m,this.b),k=Ea(k,h*m,k));if(e&&e!==c){m=a;n=h;h=Pb(m,c,e);m=Db(c,n,m);n=c.l();void 0!==n&&(m*=n);n=e.l();void 0!==n&&(m/=n);
n=e.I();if(!n||Ia(n,h[0],h[1]))h=Db(e,m,h)/m,isFinite(h)&&0<h&&(m/=h);h=m;k=Qb(k,c,e);a=Pb(a,c,e)}m={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.f.LAYERS};Za(m,this.f,d);d=Math.floor((k[3]-a[1])/h);m[this.i?"I":"X"]=Math.floor((a[0]-k[0])/h);m[this.i?"J":"Y"]=d;return Tr(this,b,f,k,1,e||c,m)}};Sr.prototype.be=function(){return this.o};
function Tr(a,b,c,d,e,f,g){var h=a.urls;if(h){g.WIDTH=c[0];g.HEIGHT=c[1];g[a.i?"CRS":"SRS"]=f.La;"STYLES"in a.f||(g.STYLES="");if(1!=e)switch(a.u){case "geoserver":c=90*e+.5|0;g.FORMAT_OPTIONS="FORMAT_OPTIONS"in g?g.FORMAT_OPTIONS+(";dpi:"+c):"dpi:"+c;break;case "mapserver":g.MAP_RESOLUTION=90*e;break;case "carmentaserver":case "qgis":g.DPI=90*e;break;default:x(!1,52)}f=f.a;a.i&&"ne"==f.substr(0,2)&&(a=d[0],d[0]=d[1],d[1]=a,a=d[2],d[2]=d[3],d[3]=a);g.BBOX=d.join(",");return Pr(1==h.length?h[0]:h[va((b[1]<<
b[0])+b[2],h.length)],g)}}Sr.prototype.Gb=function(a){return this.J&&void 0!==this.u?a:1};Sr.prototype.g=function(a,b,c){var d=this.tileGrid;d||(d=this.ya(c));if(!(d.a.length<=a[0])){1==b||this.J&&void 0!==this.u||(b=1);var e=d.a[a[0]],f=hc(d,a,this.K);d=za(lc(d,a[0]),this.b);var g=this.o;0!==g&&(d=xa(d,g,this.b),f=Ea(f,e*g,f));1!=b&&(d=ya(d,b,this.b));e={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Za(e,this.f);return Tr(this,a,d,f,b,c,e)}};function Ur(a,b,c,d,e,f,g,h,k,m,n,p,q,t,u){Mj.call(this,a,b,u);this.i={};this.o={};this.j=m;this.a=[];this.C=c;this.v=f;this.b=[];this.H=[];if(f){var y=hc(k,f),C=k.a[a[0]];cc(h,y,oc(h,C),function(a){var b=Ua(y,hc(h,a)),c=h.I();c&&(b=Ua(b,c));.5<=Xa(b)/C&&.5<=Ta(b)/C&&(b=a.toString(),c=m[b],c||(c=g(a,n,p),c=m[b]=new q(a,void 0==c?4:0,void 0==c?"":c,d,e),this.H.push(z(c,"change",t))),c.a++,this.a.push(b))}.bind(this))}}v(Ur,Mj);l=Ur.prototype;
l.ca=function(){for(var a=0,b=this.a.length;a<b;++a){var c=this.a[a],d=this.j[c];d.a--;0==d.a&&(delete this.j[c],Cc(d))}this.a.length=0;this.j=null;this.b.forEach(vc);this.b.length=0;this.c&&Cc(this.c);this.state=5;Nj(this);this.H.forEach(vc);this.H.length=0;Mj.prototype.ca.call(this)};function tj(a,b){b=w(b).toString();b in a.i||(a.i[b]=Lf());return a.i[b]}l.ba=function(a){return-1==sj(this,a).Ad?null:tj(this,a).canvas};
function sj(a,b){b=w(b).toString();b in a.o||(a.o[b]={Zb:!1,zd:null,uc:-1,Ad:-1});return a.o[b]}l.Sa=function(){return this.a.join("/")+"-"+this.C};
l.load=function(){var a=0,b={};0==this.state&&vi(this,1);1==this.state&&this.a.forEach(function(c){var d=this.j[c];0==d.state&&(d.i=this.B,d.load());1==d.state&&(c=z(d,"change",function(){var c=d.state;if(2==c||3==c){var f=w(d);3==c?b[f]=!0:(--a,delete b[f]);0==a-Object.keys(b).length&&this.Zd()}}.bind(this)),this.b.push(c),++a)}.bind(this));0==a-Object.keys(b).length&&setTimeout(this.Zd.bind(this),0)};
l.Zd=function(){for(var a=this.a.length,b=0,c=a-1;0<=c;--c){var d=this.j[this.a[c]].state;2!=d&&--a;4==d&&++b}a==this.a.length?(this.b.forEach(vc),this.b.length=0,vi(this,2)):vi(this,b==this.a.length?4:3)};function Vr(a,b){a.i=$k(b,a.C,a.ui.bind(a),a.ti.bind(a))};function Wr(a){var b=a.projection||"EPSG:3857",c=a.extent||sc(b),d=a.tileGrid||pc({extent:c,maxZoom:a.maxZoom||22,minZoom:a.minZoom,tileSize:a.tileSize||512});Gr.call(this,{attributions:a.attributions,cacheSize:void 0!==a.cacheSize?a.cacheSize:128,extent:c,logo:a.logo,opaque:!1,projection:b,state:a.state,tileGrid:d,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:Vr,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:void 0===a.wrapX?!0:a.wrapX,transition:a.transition});this.o=a.format?
a.format:null;this.f={};this.u=void 0==a.overlaps?!0:a.overlaps;this.tileClass=a.tileClass?a.tileClass:ik;this.i={}}v(Wr,Gr);l=Wr.prototype;l.clear=function(){this.a.clear();this.f={}};l.kd=function(a,b,c,d,e){var f=a+"/"+b+"/"+c;if(this.a.j.hasOwnProperty(f))return this.a.get(f);a=[a,b,c];b=Er(this,a,e);d=new Ur(a,null!==b?0:4,this.j,this.o,this.tileLoadFunction,b,this.tileUrlFunction,this.tileGrid,this.ya(e),this.f,d,e,this.tileClass,this.M.bind(this),this.X);this.a.set(f,d);return d};
l.ya=function(a){var b=a.La,c=this.i[b];c||(c=this.tileGrid,c=this.i[b]=rc(a,void 0,c?lc(c,c.minZoom):void 0));return c};l.Gb=function(a){return a};l.dc=function(a,b,c){a=za(lc(this.ya(c),a));return[Math.round(a[0]*b),Math.round(a[1]*b)]};function Xr(a){this.i=a.matrixIds;$b.call(this,{extent:a.extent,origin:a.origin,origins:a.origins,resolutions:a.resolutions,tileSize:a.tileSize,tileSizes:a.tileSizes,sizes:a.sizes})}v(Xr,$b);function Yr(a){function b(a){a="KVP"==d?Pr(a,f):a.replace(/\{(\w+?)\}/g,function(a,b){return b.toLowerCase()in f?f[b.toLowerCase()]:a});return function(b){if(b){var c={TileMatrix:e.i[b[0]],TileCol:b[1],TileRow:-b[2]-1};Za(c,g);b=a;return b="KVP"==d?Pr(b,c):b.replace(/\{(\w+?)\}/g,function(a,b){return c[b]})}}}this.fa=void 0!==a.version?a.version:"1.0.0";this.o=void 0!==a.format?a.format:"image/jpeg";this.f=void 0!==a.dimensions?a.dimensions:{};this.u=a.layer;this.i=a.matrixSet;this.J=a.style;var c=
a.urls;void 0===c&&void 0!==a.url&&(c=zr(a.url));var d=this.K=void 0!==a.requestEncoding?a.requestEncoding:"KVP",e=a.tileGrid,f={layer:this.u,style:this.J,tilematrixset:this.i};"KVP"==d&&Za(f,{Service:"WMTS",Request:"GetTile",Version:this.fa,Format:this.o});var g=this.f,h=c&&0<c.length?xr(c.map(b)):yr;Ir.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,
tileGrid:e,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:h,urls:c,wrapX:void 0!==a.wrapX?a.wrapX:!1,transition:a.transition});Dr(this,Zr(this))}v(Yr,Ir);function Zr(a){var b=0,c=[],d;for(d in a.f)c[b++]=d+"-"+a.f[d];return c.join("/")};r("ol.Map",H);H.prototype.addInteraction=H.prototype.ag;H.prototype.addLayer=H.prototype.bg;H.prototype.addControl=H.prototype.$f;H.prototype.addOverlay=H.prototype.cg;H.prototype.dispatchEvent=H.prototype.l;H.prototype.forEachFeatureAtPixel=H.prototype.Wc;H.prototype.forEachLayerAtPixel=H.prototype.Ih;H.prototype.getLayers=H.prototype.Jh;H.prototype.getSize=H.prototype.wb;H.prototype.getTarget=H.prototype.cd;H.prototype.getOverlays=H.prototype.Eg;H.prototype.getView=H.prototype.Z;
H.prototype.removeControl=H.prototype.Yi;H.prototype.removeInteraction=H.prototype.Zi;H.prototype.removeOverlay=H.prototype.$i;H.prototype.on=H.prototype.v;H.prototype.once=H.prototype.once;H.prototype.un=H.prototype.ka;r("ol.proj.Projection",mb);mb.prototype.getExtent=mb.prototype.I;mb.prototype.getMetersPerUnit=mb.prototype.l;r("ol.proj.transform",Pb);r("ol.View",uf);uf.prototype.calculateExtent=uf.prototype.Sd;uf.prototype.getCenter=uf.prototype.ja;uf.prototype.getProjection=uf.prototype.Kh;
uf.prototype.getResolution=uf.prototype.za;uf.prototype.getResolutions=uf.prototype.Lh;uf.prototype.getZoom=uf.prototype.ge;uf.prototype.getZoomForResolution=uf.prototype.he;uf.prototype.on=uf.prototype.v;uf.prototype.setCenter=uf.prototype.Oa;uf.prototype.setZoom=uf.prototype.qf;uf.prototype.fit=uf.prototype.tg;uf.prototype.un=uf.prototype.ka;r("ol.extent.getBottomLeft",Qa);r("ol.extent.getTopLeft",Wa);r("ol.tilegrid.TileGrid",$b);r("ol.tilegrid.WMTS",Xr);r("ol.tilegrid.createXYZ",pc);
r("ol.style.Style",Bj);Bj.prototype.getGeometry=Bj.prototype.O;Bj.prototype.getText=Bj.prototype.ra;Bj.prototype.setZIndex=Bj.prototype.pf;r("ol.style.Circle",yj);r("ol.style.Fill",zj);zj.prototype.setColor=zj.prototype.l;r("ol.style.Icon",Nm);r("ol.style.Image",vj);r("ol.style.Stroke",Aj);Aj.prototype.setColor=Aj.prototype.ri;Aj.prototype.setLineCap=Aj.prototype.ej;Aj.prototype.setLineDash=Aj.prototype.setLineDash;Aj.prototype.setWidth=Aj.prototype.fj;r("ol.style.Text",Lj);Lj.prototype.setFont=Lj.prototype.dj;
Lj.prototype.getText=Lj.prototype.ra;Lj.prototype.setFill=Lj.prototype.jf;Lj.prototype.setStroke=Lj.prototype.mf;Lj.prototype.setText=Lj.prototype.nf;r("ol.Attribution",tc);r("ol.Geolocation",Ij);Ij.prototype.on=Ij.prototype.v;Ij.prototype.un=Ij.prototype.ka;Ij.prototype.getAccuracy=Ij.prototype.wg;Ij.prototype.getHeading=Ij.prototype.Ag;Ij.prototype.getPosition=Ij.prototype.Dh;Ij.prototype.getSpeed=Ij.prototype.Fg;Ij.prototype.getTracking=Ij.prototype.fe;Ij.prototype.setTracking=Ij.prototype.xc;
r("ol.Overlay",Zj);Zj.prototype.setPosition=Zj.prototype.qe;r("ol.control.Attribution",jg);jg.prototype.setCollapsed=jg.prototype.X;jg.prototype.setCollapsible=jg.prototype.ea;r("ol.control.MousePosition",kk);kk.prototype.setCoordinateFormat=kk.prototype.hf;r("ol.control.Zoom",og);r("ol.control.Rotate",mg);r("ol.control.ScaleLine",pk);r("ol.control.defaults",pg);r("ol.interaction.Draw",Cq);
r("ol.interaction.Draw.createBox",function(){return function(a,b){a=Aa(a);b=b||new A(null);b.Y([[Qa(a),[a[2],a[1]],[a[2],a[3]],Wa(a),Qa(a)]]);return b}});Cq.prototype.on=Cq.prototype.v;Cq.prototype.setActive=Cq.prototype.gb;Cq.prototype.un=Cq.prototype.ka;r("ol.interaction.Modify",Uq);Uq.prototype.on=Uq.prototype.v;Uq.prototype.setActive=Uq.prototype.gb;Uq.prototype.un=Uq.prototype.ka;r("ol.interaction.Select",jr);jr.prototype.on=jr.prototype.v;jr.prototype.setActive=jr.prototype.gb;
jr.prototype.un=jr.prototype.ka;jr.prototype.getFeatures=jr.prototype.J;r("ol.interaction.Snap",or);or.prototype.setActive=or.prototype.gb;r("ol.source.Source",Xj);Xj.prototype.on=Xj.prototype.v;jr.prototype.on=jr.prototype.v;Xj.prototype.getProperties=Xj.prototype.Fa;Xj.prototype.once=Xj.prototype.once;r("ol.source.OSM",Qr);r("ol.source.Tile",Cr);r("ol.source.TileArcGISRest",Rr);r("ol.source.TileWMS",Sr);Sr.prototype.getGetFeatureInfoUrl=Sr.prototype.fa;r("ol.source.Vector",vq);
vq.prototype.addFeature=vq.prototype.Va;vq.prototype.addFeatures=vq.prototype.Bb;vq.prototype.getFeatureById=vq.prototype.yg;vq.prototype.getFeatures=vq.prototype.mc;vq.prototype.getFormat=vq.prototype.pi;vq.prototype.removeFeature=vq.prototype.Qa;r("ol.source.VectorTile",Wr);vq.prototype.setProperties=vq.prototype.na;r("ol.source.WMTS",Yr);r("ol.source.XYZ",Lr);r("ol.source.Cluster",Mr);Mr.prototype.setDistance=Mr.prototype.X;ig.prototype.getSource=ig.prototype.$;ig.prototype.getProperties=ig.prototype.Fa;
ig.prototype.setSource=ig.prototype.lf;ig.prototype.un=ig.prototype.ka;Nf.prototype.getVisible=Nf.prototype.Hb;Nf.prototype.setVisible=Nf.prototype.oi;Nf.prototype.on=Nf.prototype.v;Nf.prototype.once=Nf.prototype.once;r("ol.layer.Tile",tr);r("ol.layer.Vector",tq);tq.prototype.set=tq.prototype.set;tq.prototype.setStyle=tq.prototype.K;r("ol.layer.VectorTile",ur);r("ol.layer.Group",Pf);r("ol.Feature",B);B.prototype.getGeometry=B.prototype.O;B.prototype.getGeometryName=B.prototype.zg;
B.prototype.getId=B.prototype.Bh;B.prototype.getProperties=B.prototype.Fa;B.prototype.getStyle=B.prototype.Ch;B.prototype.setId=B.prototype.lb;B.prototype.setProperties=B.prototype.na;B.prototype.setStyle=B.prototype.pe;B.prototype.setGeometry=B.prototype.Ba;B.prototype.setGeometryName=B.prototype.Za;B.prototype.on=B.prototype.v;B.prototype.unset=B.prototype.nj;Eo.prototype.get=Eo.prototype.get;Eo.prototype.getGeometry=Eo.prototype.O;Eo.prototype.getType=Eo.prototype.D;r("ol.Collection",Sc);
Sc.prototype.getArray=Sc.prototype.xg;Sc.prototype.getLength=Sc.prototype.fb;Sc.prototype.item=Sc.prototype.oe;Sc.prototype.on=Sc.prototype.v;r("ol.coordinate.createStringXY",function(a){return function(b){return b?"{x}, {y}".replace("{x}",b[0].toFixed(a)).replace("{y}",b[1].toFixed(a)):""}});r("ol.format.EsriJSON",pl);pl.prototype.readFeatures=pl.prototype.Ta;pl.prototype.writeFeature=pl.prototype.Cc;r("ol.format.GeoJSON",Dm);Dm.prototype.readFeature=Dm.prototype.Mb;Dm.prototype.readFeatures=Dm.prototype.Ta;
Dm.prototype.writeFeatureObject=Dm.prototype.zb;Dm.prototype.writeFeaturesObject=Dm.prototype.Cd;r("ol.format.MVT",Fo);r("ol.format.TopoJSON",Oo);Oo.prototype.readFeatures=Oo.prototype.Ta;r("ol.format.WKT",dp);dp.prototype.readFeature=dp.prototype.Mb;dp.prototype.readFeatures=dp.prototype.Ta;r("ol.format.WFS",Uo);Uo.prototype.readFeatures=Uo.prototype.Ta;Uo.prototype.readTransactionResponse=Uo.prototype.b;Uo.prototype.writeTransaction=Uo.prototype.g;r("ol.geom.Circle",rq);rq.prototype.clone=rq.prototype.clone;
rq.prototype.getCenter=rq.prototype.ja;rq.prototype.getRadius=rq.prototype.Jb;rq.prototype.getType=rq.prototype.D;r("ol.geom.Geometry",Qe);Qe.prototype.getExtent=Qe.prototype.I;Qe.prototype.on=Qe.prototype.v;Qe.prototype.transform=Qe.prototype.xb;r("ol.geom.GeometryCollection",Am);Am.prototype.getType=Am.prototype.D;r("ol.geom.LineString",E);E.prototype.appendCoordinate=E.prototype.dg;E.prototype.clone=E.prototype.clone;E.prototype.getCoordinateAt=E.prototype.$d;E.prototype.getCoordinateAtM=E.prototype.He;
E.prototype.getCoordinates=E.prototype.G;E.prototype.getFirstCoordinate=E.prototype.Fb;E.prototype.getLastCoordinate=E.prototype.Dg;E.prototype.getLength=E.prototype.Vh;E.prototype.getType=E.prototype.D;E.prototype.setCoordinates=E.prototype.Y;jf.prototype.getCoordinates=jf.prototype.G;r("ol.geom.MultiLineString",hl);hl.prototype.clone=hl.prototype.clone;E.prototype.getCoordinateAtM=E.prototype.He;hl.prototype.getCoordinates=hl.prototype.G;hl.prototype.getFirstCoordinate=hl.prototype.Fb;
hl.prototype.getLineStrings=hl.prototype.tb;hl.prototype.getType=hl.prototype.D;hl.prototype.setCoordinates=hl.prototype.Y;r("ol.geom.MultiPoint",jl);jl.prototype.clone=jl.prototype.clone;jl.prototype.getCoordinates=jl.prototype.G;jl.prototype.getFirstCoordinate=jl.prototype.Fb;jl.prototype.getType=jl.prototype.D;jl.prototype.setCoordinates=jl.prototype.Y;r("ol.geom.MultiPolygon",ll);ll.prototype.clone=ll.prototype.clone;ll.prototype.getCoordinates=ll.prototype.G;ll.prototype.getArea=ll.prototype.Wh;
ll.prototype.getFirstCoordinate=ll.prototype.Fb;ll.prototype.getInteriorPoints=ll.prototype.Cg;ll.prototype.getType=ll.prototype.D;ll.prototype.setCoordinates=ll.prototype.Y;r("ol.geom.Point",lf);lf.prototype.clone=lf.prototype.clone;lf.prototype.getCoordinates=lf.prototype.G;lf.prototype.getType=lf.prototype.D;lf.prototype.setCoordinates=lf.prototype.Y;r("ol.geom.Polygon",A);A.prototype.clone=A.prototype.clone;A.prototype.getArea=A.prototype.Xh;A.prototype.getCoordinates=A.prototype.G;
A.prototype.getFirstCoordinate=A.prototype.Fb;A.prototype.getInteriorPoint=A.prototype.Bg;A.prototype.getLinearRing=A.prototype.ee;A.prototype.getType=A.prototype.D;A.prototype.setCoordinates=A.prototype.Y;r("ol.Sphere",eb);r("ol.Sphere.getArea",jb);r("ol.Sphere.getLength",fb);r("ol.loadingstrategy.all",uq);r("ol.loadingstrategy.bbox",function(a){return[a]});
r("ol.loadingstrategy.tile",function(a){return function(b,c){c=oc(a,c);b=dc(a,b,c);var d=[];c=[c,0,0];for(c[1]=b.T;c[1]<=b.W;++c[1])for(c[2]=b.R;c[2]<=b.U;++c[2])d.push(hc(a,c));return d}});
  return OPENLAYERS.ol;
}));


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],30:[function(require,module,exports){
var mgrs = require('mgrs');

function Point(x, y, z) {
  if (!(this instanceof Point)) {
    return new Point(x, y, z);
  }
  if (Array.isArray(x)) {
    this.x = x[0];
    this.y = x[1];
    this.z = x[2] || 0.0;
  }else if(typeof x === 'object'){
    this.x = x.x;
    this.y = x.y;
    this.z = x.z || 0.0;
  } else if (typeof x === 'string' && typeof y === 'undefined') {
    var coords = x.split(',');
    this.x = parseFloat(coords[0], 10);
    this.y = parseFloat(coords[1], 10);
    this.z = parseFloat(coords[2], 10) || 0.0;
  }
  else {
    this.x = x;
    this.y = y;
    this.z = z || 0.0;
  }
  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');
}

Point.fromMGRS = function(mgrsStr) {
  return new Point(mgrs.toPoint(mgrsStr));
};
Point.prototype.toMGRS = function(accuracy) {
  return mgrs.forward([this.x, this.y], accuracy);
};
module.exports = Point;
},{"mgrs":28}],31:[function(require,module,exports){
var parseCode = require("./parseCode");
var extend = require('./extend');
var projections = require('./projections');
var deriveConstants = require('./deriveConstants');

function Projection(srsCode,callback) {
  if (!(this instanceof Projection)) {
    return new Projection(srsCode);
  }
  callback = callback || function(error){
    if(error){
      throw error;
    }
  };
  var json = parseCode(srsCode);
  if(typeof json !== 'object'){
    callback(srsCode);
    return;
  }
  var modifiedJSON = deriveConstants(json);
  var ourProj = Projection.projections.get(modifiedJSON.projName);
  if(ourProj){
    extend(this, modifiedJSON);
    extend(this, ourProj);
    this.init();
    callback(null, this);
  }else{
    callback(srsCode);
  }
}
Projection.projections = projections;
Projection.projections.start();
module.exports = Projection;

},{"./deriveConstants":62,"./extend":63,"./parseCode":67,"./projections":69}],32:[function(require,module,exports){
module.exports = function(crs, denorm, point) {
  var xin = point.x,
    yin = point.y,
    zin = point.z || 0.0;
  var v, t, i;
  for (i = 0; i < 3; i++) {
    if (denorm && i === 2 && point.z === undefined) {
      continue;
    }
    if (i === 0) {
      v = xin;
      t = 'x';
    }
    else if (i === 1) {
      v = yin;
      t = 'y';
    }
    else {
      v = zin;
      t = 'z';
    }
    switch (crs.axis[i]) {
    case 'e':
      point[t] = v;
      break;
    case 'w':
      point[t] = -v;
      break;
    case 'n':
      point[t] = v;
      break;
    case 's':
      point[t] = -v;
      break;
    case 'u':
      if (point[t] !== undefined) {
        point.z = v;
      }
      break;
    case 'd':
      if (point[t] !== undefined) {
        point.z = -v;
      }
      break;
    default:
      //console.log("ERROR: unknow axis ("+crs.axis[i]+") - check definition of "+crs.projName);
      return null;
    }
  }
  return point;
};

},{}],33:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var sign = require('./sign');

module.exports = function(x) {
  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));
};
},{"./sign":50}],34:[function(require,module,exports){
var TWO_PI = Math.PI * 2;
// SPI is slightly greater than Math.PI, so values that exceed the -180..180
// degree range by a tiny amount don't get wrapped. This prevents points that
// have drifted from their original location along the 180th meridian (due to
// floating point error) from changing their sign.
var SPI = 3.14159265359;
var sign = require('./sign');

module.exports = function(x) {
  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));
};
},{"./sign":50}],35:[function(require,module,exports){
module.exports = function(x) {
  if (Math.abs(x) > 1) {
    x = (x > 1) ? 1 : -1;
  }
  return Math.asin(x);
};
},{}],36:[function(require,module,exports){
module.exports = function(x) {
  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));
};
},{}],37:[function(require,module,exports){
module.exports = function(x) {
  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));
};
},{}],38:[function(require,module,exports){
module.exports = function(x) {
  return (0.05859375 * x * x * (1 + 0.75 * x));
};
},{}],39:[function(require,module,exports){
module.exports = function(x) {
  return (x * x * x * (35 / 3072));
};
},{}],40:[function(require,module,exports){
module.exports = function(a, e, sinphi) {
  var temp = e * sinphi;
  return a / Math.sqrt(1 - temp * temp);
};
},{}],41:[function(require,module,exports){
module.exports = function(ml, e0, e1, e2, e3) {
  var phi;
  var dphi;

  phi = ml / e0;
  for (var i = 0; i < 15; i++) {
    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));
    phi += dphi;
    if (Math.abs(dphi) <= 0.0000000001) {
      return phi;
    }
  }

  //..reportError("IMLFN-CONV:Latitude failed to converge after 15 iterations");
  return NaN;
};
},{}],42:[function(require,module,exports){
var HALF_PI = Math.PI/2;

module.exports = function(eccent, q) {
  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));
  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {
    if (q < 0) {
      return (-1 * HALF_PI);
    }
    else {
      return HALF_PI;
    }
  }
  //var phi = 0.5* q/(1-eccent*eccent);
  var phi = Math.asin(0.5 * q);
  var dphi;
  var sin_phi;
  var cos_phi;
  var con;
  for (var i = 0; i < 30; i++) {
    sin_phi = Math.sin(phi);
    cos_phi = Math.cos(phi);
    con = eccent * sin_phi;
    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));
    phi += dphi;
    if (Math.abs(dphi) <= 0.0000000001) {
      return phi;
    }
  }

  //console.log("IQSFN-CONV:Latitude failed to converge after 30 iterations");
  return NaN;
};
},{}],43:[function(require,module,exports){
module.exports = function(e0, e1, e2, e3, phi) {
  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));
};
},{}],44:[function(require,module,exports){
module.exports = function(eccent, sinphi, cosphi) {
  var con = eccent * sinphi;
  return cosphi / (Math.sqrt(1 - con * con));
};
},{}],45:[function(require,module,exports){
var HALF_PI = Math.PI/2;
module.exports = function(eccent, ts) {
  var eccnth = 0.5 * eccent;
  var con, dphi;
  var phi = HALF_PI - 2 * Math.atan(ts);
  for (var i = 0; i <= 15; i++) {
    con = eccent * Math.sin(phi);
    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;
    phi += dphi;
    if (Math.abs(dphi) <= 0.0000000001) {
      return phi;
    }
  }
  //console.log("phi2z has NoConvergence");
  return -9999;
};
},{}],46:[function(require,module,exports){
var C00 = 1;
var C02 = 0.25;
var C04 = 0.046875;
var C06 = 0.01953125;
var C08 = 0.01068115234375;
var C22 = 0.75;
var C44 = 0.46875;
var C46 = 0.01302083333333333333;
var C48 = 0.00712076822916666666;
var C66 = 0.36458333333333333333;
var C68 = 0.00569661458333333333;
var C88 = 0.3076171875;

module.exports = function(es) {
  var en = [];
  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));
  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));
  var t = es * es;
  en[2] = t * (C44 - es * (C46 + es * C48));
  t *= es;
  en[3] = t * (C66 - es * C68);
  en[4] = t * es * C88;
  return en;
};
},{}],47:[function(require,module,exports){
var pj_mlfn = require("./pj_mlfn");
var EPSLN = 1.0e-10;
var MAX_ITER = 20;
module.exports = function(arg, es, en) {
  var k = 1 / (1 - es);
  var phi = arg;
  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */
    var s = Math.sin(phi);
    var t = 1 - es * s * s;
    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;
    //phi -= t * (t * Math.sqrt(t)) * k;
    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;
    phi -= t;
    if (Math.abs(t) < EPSLN) {
      return phi;
    }
  }
  //..reportError("cass:pj_inv_mlfn: Convergence error");
  return phi;
};
},{"./pj_mlfn":48}],48:[function(require,module,exports){
module.exports = function(phi, sphi, cphi, en) {
  cphi *= sphi;
  sphi *= sphi;
  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));
};
},{}],49:[function(require,module,exports){
module.exports = function(eccent, sinphi) {
  var con;
  if (eccent > 1.0e-7) {
    con = eccent * sinphi;
    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));
  }
  else {
    return (2 * sinphi);
  }
};
},{}],50:[function(require,module,exports){
module.exports = function(x) {
  return x<0 ? -1 : 1;
};
},{}],51:[function(require,module,exports){
module.exports = function(esinp, exp) {
  return (Math.pow((1 - esinp) / (1 + esinp), exp));
};
},{}],52:[function(require,module,exports){
module.exports = function (array){
  var out = {
    x: array[0],
    y: array[1]
  };
  if (array.length>2) {
    out.z = array[2];
  }
  if (array.length>3) {
    out.m = array[3];
  }
  return out;
};
},{}],53:[function(require,module,exports){
var HALF_PI = Math.PI/2;

module.exports = function(eccent, phi, sinphi) {
  var con = eccent * sinphi;
  var com = 0.5 * eccent;
  con = Math.pow(((1 - con) / (1 + con)), com);
  return (Math.tan(0.5 * (HALF_PI - phi)) / con);
};
},{}],54:[function(require,module,exports){
exports.wgs84 = {
  towgs84: "0,0,0",
  ellipse: "WGS84",
  datumName: "WGS84"
};
exports.ch1903 = {
  towgs84: "674.374,15.056,405.346",
  ellipse: "bessel",
  datumName: "swiss"
};
exports.ggrs87 = {
  towgs84: "-199.87,74.79,246.62",
  ellipse: "GRS80",
  datumName: "Greek_Geodetic_Reference_System_1987"
};
exports.nad83 = {
  towgs84: "0,0,0",
  ellipse: "GRS80",
  datumName: "North_American_Datum_1983"
};
exports.nad27 = {
  nadgrids: "@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",
  ellipse: "clrk66",
  datumName: "North_American_Datum_1927"
};
exports.potsdam = {
  towgs84: "606.0,23.0,413.0",
  ellipse: "bessel",
  datumName: "Potsdam Rauenberg 1950 DHDN"
};
exports.carthage = {
  towgs84: "-263.0,6.0,431.0",
  ellipse: "clark80",
  datumName: "Carthage 1934 Tunisia"
};
exports.hermannskogel = {
  towgs84: "653.0,-212.0,449.0",
  ellipse: "bessel",
  datumName: "Hermannskogel"
};
exports.ire65 = {
  towgs84: "482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",
  ellipse: "mod_airy",
  datumName: "Ireland 1965"
};
exports.rassadiran = {
  towgs84: "-133.63,-157.5,-158.62",
  ellipse: "intl",
  datumName: "Rassadiran"
};
exports.nzgd49 = {
  towgs84: "59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",
  ellipse: "intl",
  datumName: "New Zealand Geodetic Datum 1949"
};
exports.osgb36 = {
  towgs84: "446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",
  ellipse: "airy",
  datumName: "Airy 1830"
};
exports.s_jtsk = {
  towgs84: "589,76,480",
  ellipse: 'bessel',
  datumName: 'S-JTSK (Ferro)'
};
exports.beduaram = {
  towgs84: '-106,-87,188',
  ellipse: 'clrk80',
  datumName: 'Beduaram'
};
exports.gunung_segara = {
  towgs84: '-403,684,41',
  ellipse: 'bessel',
  datumName: 'Gunung Segara Jakarta'
};
exports.rnb72 = {
  towgs84: "106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",
  ellipse: "intl",
  datumName: "Reseau National Belge 1972"
};
},{}],55:[function(require,module,exports){
exports.MERIT = {
  a: 6378137.0,
  rf: 298.257,
  ellipseName: "MERIT 1983"
};
exports.SGS85 = {
  a: 6378136.0,
  rf: 298.257,
  ellipseName: "Soviet Geodetic System 85"
};
exports.GRS80 = {
  a: 6378137.0,
  rf: 298.257222101,
  ellipseName: "GRS 1980(IUGG, 1980)"
};
exports.IAU76 = {
  a: 6378140.0,
  rf: 298.257,
  ellipseName: "IAU 1976"
};
exports.airy = {
  a: 6377563.396,
  b: 6356256.910,
  ellipseName: "Airy 1830"
};
exports.APL4 = {
  a: 6378137,
  rf: 298.25,
  ellipseName: "Appl. Physics. 1965"
};
exports.NWL9D = {
  a: 6378145.0,
  rf: 298.25,
  ellipseName: "Naval Weapons Lab., 1965"
};
exports.mod_airy = {
  a: 6377340.189,
  b: 6356034.446,
  ellipseName: "Modified Airy"
};
exports.andrae = {
  a: 6377104.43,
  rf: 300.0,
  ellipseName: "Andrae 1876 (Den., Iclnd.)"
};
exports.aust_SA = {
  a: 6378160.0,
  rf: 298.25,
  ellipseName: "Australian Natl & S. Amer. 1969"
};
exports.GRS67 = {
  a: 6378160.0,
  rf: 298.2471674270,
  ellipseName: "GRS 67(IUGG 1967)"
};
exports.bessel = {
  a: 6377397.155,
  rf: 299.1528128,
  ellipseName: "Bessel 1841"
};
exports.bess_nam = {
  a: 6377483.865,
  rf: 299.1528128,
  ellipseName: "Bessel 1841 (Namibia)"
};
exports.clrk66 = {
  a: 6378206.4,
  b: 6356583.8,
  ellipseName: "Clarke 1866"
};
exports.clrk80 = {
  a: 6378249.145,
  rf: 293.4663,
  ellipseName: "Clarke 1880 mod."
};
exports.clrk58 = {
  a: 6378293.645208759,
  rf: 294.2606763692654,
  ellipseName: "Clarke 1858"
};
exports.CPM = {
  a: 6375738.7,
  rf: 334.29,
  ellipseName: "Comm. des Poids et Mesures 1799"
};
exports.delmbr = {
  a: 6376428.0,
  rf: 311.5,
  ellipseName: "Delambre 1810 (Belgium)"
};
exports.engelis = {
  a: 6378136.05,
  rf: 298.2566,
  ellipseName: "Engelis 1985"
};
exports.evrst30 = {
  a: 6377276.345,
  rf: 300.8017,
  ellipseName: "Everest 1830"
};
exports.evrst48 = {
  a: 6377304.063,
  rf: 300.8017,
  ellipseName: "Everest 1948"
};
exports.evrst56 = {
  a: 6377301.243,
  rf: 300.8017,
  ellipseName: "Everest 1956"
};
exports.evrst69 = {
  a: 6377295.664,
  rf: 300.8017,
  ellipseName: "Everest 1969"
};
exports.evrstSS = {
  a: 6377298.556,
  rf: 300.8017,
  ellipseName: "Everest (Sabah & Sarawak)"
};
exports.fschr60 = {
  a: 6378166.0,
  rf: 298.3,
  ellipseName: "Fischer (Mercury Datum) 1960"
};
exports.fschr60m = {
  a: 6378155.0,
  rf: 298.3,
  ellipseName: "Fischer 1960"
};
exports.fschr68 = {
  a: 6378150.0,
  rf: 298.3,
  ellipseName: "Fischer 1968"
};
exports.helmert = {
  a: 6378200.0,
  rf: 298.3,
  ellipseName: "Helmert 1906"
};
exports.hough = {
  a: 6378270.0,
  rf: 297.0,
  ellipseName: "Hough"
};
exports.intl = {
  a: 6378388.0,
  rf: 297.0,
  ellipseName: "International 1909 (Hayford)"
};
exports.kaula = {
  a: 6378163.0,
  rf: 298.24,
  ellipseName: "Kaula 1961"
};
exports.lerch = {
  a: 6378139.0,
  rf: 298.257,
  ellipseName: "Lerch 1979"
};
exports.mprts = {
  a: 6397300.0,
  rf: 191.0,
  ellipseName: "Maupertius 1738"
};
exports.new_intl = {
  a: 6378157.5,
  b: 6356772.2,
  ellipseName: "New International 1967"
};
exports.plessis = {
  a: 6376523.0,
  rf: 6355863.0,
  ellipseName: "Plessis 1817 (France)"
};
exports.krass = {
  a: 6378245.0,
  rf: 298.3,
  ellipseName: "Krassovsky, 1942"
};
exports.SEasia = {
  a: 6378155.0,
  b: 6356773.3205,
  ellipseName: "Southeast Asia"
};
exports.walbeck = {
  a: 6376896.0,
  b: 6355834.8467,
  ellipseName: "Walbeck"
};
exports.WGS60 = {
  a: 6378165.0,
  rf: 298.3,
  ellipseName: "WGS 60"
};
exports.WGS66 = {
  a: 6378145.0,
  rf: 298.25,
  ellipseName: "WGS 66"
};
exports.WGS7 = {
  a: 6378135.0,
  rf: 298.26,
  ellipseName: "WGS 72"
};
exports.WGS84 = {
  a: 6378137.0,
  rf: 298.257223563,
  ellipseName: "WGS 84"
};
exports.sphere = {
  a: 6370997.0,
  b: 6370997.0,
  ellipseName: "Normal Sphere (r=6370997)"
};
},{}],56:[function(require,module,exports){
exports.greenwich = 0.0; //"0dE",
exports.lisbon = -9.131906111111; //"9d07'54.862\"W",
exports.paris = 2.337229166667; //"2d20'14.025\"E",
exports.bogota = -74.080916666667; //"74d04'51.3\"W",
exports.madrid = -3.687938888889; //"3d41'16.58\"W",
exports.rome = 12.452333333333; //"12d27'8.4\"E",
exports.bern = 7.439583333333; //"7d26'22.5\"E",
exports.jakarta = 106.807719444444; //"106d48'27.79\"E",
exports.ferro = -17.666666666667; //"17d40'W",
exports.brussels = 4.367975; //"4d22'4.71\"E",
exports.stockholm = 18.058277777778; //"18d3'29.8\"E",
exports.athens = 23.7163375; //"23d42'58.815\"E",
exports.oslo = 10.722916666667; //"10d43'22.5\"E"
},{}],57:[function(require,module,exports){
exports.ft = {to_meter: 0.3048};
exports['us-ft'] = {to_meter: 1200 / 3937};

},{}],58:[function(require,module,exports){
var proj = require('./Proj');
var transform = require('./transform');
var wgs84 = proj('WGS84');

function transformer(from, to, coords) {
  var transformedArray;
  if (Array.isArray(coords)) {
    transformedArray = transform(from, to, coords);
    if (coords.length === 3) {
      return [transformedArray.x, transformedArray.y, transformedArray.z];
    }
    else {
      return [transformedArray.x, transformedArray.y];
    }
  }
  else {
    return transform(from, to, coords);
  }
}

function checkProj(item) {
  if (item instanceof proj) {
    return item;
  }
  if (item.oProj) {
    return item.oProj;
  }
  return proj(item);
}
function proj4(fromProj, toProj, coord) {
  fromProj = checkProj(fromProj);
  var single = false;
  var obj;
  if (typeof toProj === 'undefined') {
    toProj = fromProj;
    fromProj = wgs84;
    single = true;
  }
  else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {
    coord = toProj;
    toProj = fromProj;
    fromProj = wgs84;
    single = true;
  }
  toProj = checkProj(toProj);
  if (coord) {
    return transformer(fromProj, toProj, coord);
  }
  else {
    obj = {
      forward: function(coords) {
        return transformer(fromProj, toProj, coords);
      },
      inverse: function(coords) {
        return transformer(toProj, fromProj, coords);
      }
    };
    if (single) {
      obj.oProj = toProj;
    }
    return obj;
  }
}
module.exports = proj4;
},{"./Proj":31,"./transform":95}],59:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var PJD_3PARAM = 1;
var PJD_7PARAM = 2;
var PJD_GRIDSHIFT = 3;
var PJD_WGS84 = 4; // WGS84 or equivalent
var PJD_NODATUM = 5; // WGS84 or equivalent
var SEC_TO_RAD = 4.84813681109535993589914102357e-6;
var AD_C = 1.0026000;
var COS_67P5 = 0.38268343236508977;
var datum = function(proj) {
  if (!(this instanceof datum)) {
    return new datum(proj);
  }
  this.datum_type = PJD_WGS84; //default setting
  if (!proj) {
    return;
  }
  if (proj.datumCode && proj.datumCode === 'none') {
    this.datum_type = PJD_NODATUM;
  }
  if (proj.datum_params) {
    for (var i = 0; i < proj.datum_params.length; i++) {
      proj.datum_params[i] = parseFloat(proj.datum_params[i]);
    }
    if (proj.datum_params[0] !== 0 || proj.datum_params[1] !== 0 || proj.datum_params[2] !== 0) {
      this.datum_type = PJD_3PARAM;
    }
    if (proj.datum_params.length > 3) {
      if (proj.datum_params[3] !== 0 || proj.datum_params[4] !== 0 || proj.datum_params[5] !== 0 || proj.datum_params[6] !== 0) {
        this.datum_type = PJD_7PARAM;
        proj.datum_params[3] *= SEC_TO_RAD;
        proj.datum_params[4] *= SEC_TO_RAD;
        proj.datum_params[5] *= SEC_TO_RAD;
        proj.datum_params[6] = (proj.datum_params[6] / 1000000.0) + 1.0;
      }
    }
  }
  // DGR 2011-03-21 : nadgrids support
  this.datum_type = proj.grids ? PJD_GRIDSHIFT : this.datum_type;

  this.a = proj.a; //datum object also uses these values
  this.b = proj.b;
  this.es = proj.es;
  this.ep2 = proj.ep2;
  this.datum_params = proj.datum_params;
  if (this.datum_type === PJD_GRIDSHIFT) {
    this.grids = proj.grids;
  }
};
datum.prototype = {


  /****************************************************************/
  // cs_compare_datums()
  //   Returns TRUE if the two datums match, otherwise FALSE.
  compare_datums: function(dest) {
    if (this.datum_type !== dest.datum_type) {
      return false; // false, datums are not equal
    }
    else if (this.a !== dest.a || Math.abs(this.es - dest.es) > 0.000000000050) {
      // the tolerence for es is to ensure that GRS80 and WGS84
      // are considered identical
      return false;
    }
    else if (this.datum_type === PJD_3PARAM) {
      return (this.datum_params[0] === dest.datum_params[0] && this.datum_params[1] === dest.datum_params[1] && this.datum_params[2] === dest.datum_params[2]);
    }
    else if (this.datum_type === PJD_7PARAM) {
      return (this.datum_params[0] === dest.datum_params[0] && this.datum_params[1] === dest.datum_params[1] && this.datum_params[2] === dest.datum_params[2] && this.datum_params[3] === dest.datum_params[3] && this.datum_params[4] === dest.datum_params[4] && this.datum_params[5] === dest.datum_params[5] && this.datum_params[6] === dest.datum_params[6]);
    }
    else if (this.datum_type === PJD_GRIDSHIFT || dest.datum_type === PJD_GRIDSHIFT) {
      //alert("ERROR: Grid shift transformations are not implemented.");
      //return false
      //DGR 2012-07-29 lazy ...
      return this.nadgrids === dest.nadgrids;
    }
    else {
      return true; // datums are equal
    }
  }, // cs_compare_datums()

  /*
   * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates
   * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),
   * according to the current ellipsoid parameters.
   *
   *    Latitude  : Geodetic latitude in radians                     (input)
   *    Longitude : Geodetic longitude in radians                    (input)
   *    Height    : Geodetic height, in meters                       (input)
   *    X         : Calculated Geocentric X coordinate, in meters    (output)
   *    Y         : Calculated Geocentric Y coordinate, in meters    (output)
   *    Z         : Calculated Geocentric Z coordinate, in meters    (output)
   *
   */
  geodetic_to_geocentric: function(p) {
    var Longitude = p.x;
    var Latitude = p.y;
    var Height = p.z ? p.z : 0; //Z value not always supplied
    var X; // output
    var Y;
    var Z;

    var Error_Code = 0; //  GEOCENT_NO_ERROR;
    var Rn; /*  Earth radius at location  */
    var Sin_Lat; /*  Math.sin(Latitude)  */
    var Sin2_Lat; /*  Square of Math.sin(Latitude)  */
    var Cos_Lat; /*  Math.cos(Latitude)  */

    /*
     ** Don't blow up if Latitude is just a little out of the value
     ** range as it may just be a rounding issue.  Also removed longitude
     ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.
     */
    if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {
      Latitude = -HALF_PI;
    }
    else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {
      Latitude = HALF_PI;
    }
    else if ((Latitude < -HALF_PI) || (Latitude > HALF_PI)) {
      /* Latitude out of range */
      //..reportError('geocent:lat out of range:' + Latitude);
      return null;
    }

    if (Longitude > Math.PI) {
      Longitude -= (2 * Math.PI);
    }
    Sin_Lat = Math.sin(Latitude);
    Cos_Lat = Math.cos(Latitude);
    Sin2_Lat = Sin_Lat * Sin_Lat;
    Rn = this.a / (Math.sqrt(1.0e0 - this.es * Sin2_Lat));
    X = (Rn + Height) * Cos_Lat * Math.cos(Longitude);
    Y = (Rn + Height) * Cos_Lat * Math.sin(Longitude);
    Z = ((Rn * (1 - this.es)) + Height) * Sin_Lat;

    p.x = X;
    p.y = Y;
    p.z = Z;
    return Error_Code;
  }, // cs_geodetic_to_geocentric()


  geocentric_to_geodetic: function(p) {
    /* local defintions and variables */
    /* end-criterium of loop, accuracy of sin(Latitude) */
    var genau = 1e-12;
    var genau2 = (genau * genau);
    var maxiter = 30;

    var P; /* distance between semi-minor axis and location */
    var RR; /* distance between center and location */
    var CT; /* sin of geocentric latitude */
    var ST; /* cos of geocentric latitude */
    var RX;
    var RK;
    var RN; /* Earth radius at location */
    var CPHI0; /* cos of start or old geodetic latitude in iterations */
    var SPHI0; /* sin of start or old geodetic latitude in iterations */
    var CPHI; /* cos of searched geodetic latitude */
    var SPHI; /* sin of searched geodetic latitude */
    var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */
    var At_Pole; /* indicates location is in polar region */
    var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */

    var X = p.x;
    var Y = p.y;
    var Z = p.z ? p.z : 0.0; //Z value not always supplied
    var Longitude;
    var Latitude;
    var Height;

    At_Pole = false;
    P = Math.sqrt(X * X + Y * Y);
    RR = Math.sqrt(X * X + Y * Y + Z * Z);

    /*      special cases for latitude and longitude */
    if (P / this.a < genau) {

      /*  special case, if P=0. (X=0., Y=0.) */
      At_Pole = true;
      Longitude = 0.0;

      /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis
       *  of ellipsoid (=center of mass), Latitude becomes PI/2 */
      if (RR / this.a < genau) {
        Latitude = HALF_PI;
        Height = -this.b;
        return;
      }
    }
    else {
      /*  ellipsoidal (geodetic) longitude
       *  interval: -PI < Longitude <= +PI */
      Longitude = Math.atan2(Y, X);
    }

    /* --------------------------------------------------------------
     * Following iterative algorithm was developped by
     * "Institut for Erdmessung", University of Hannover, July 1988.
     * Internet: www.ife.uni-hannover.de
     * Iterative computation of CPHI,SPHI and Height.
     * Iteration of CPHI and SPHI to 10**-12 radian resp.
     * 2*10**-7 arcsec.
     * --------------------------------------------------------------
     */
    CT = Z / RR;
    ST = P / RR;
    RX = 1.0 / Math.sqrt(1.0 - this.es * (2.0 - this.es) * ST * ST);
    CPHI0 = ST * (1.0 - this.es) * RX;
    SPHI0 = CT * RX;
    iter = 0;

    /* loop to find sin(Latitude) resp. Latitude
     * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */
    do {
      iter++;
      RN = this.a / Math.sqrt(1.0 - this.es * SPHI0 * SPHI0);

      /*  ellipsoidal (geodetic) height */
      Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - this.es * SPHI0 * SPHI0);

      RK = this.es * RN / (RN + Height);
      RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);
      CPHI = ST * (1.0 - RK) * RX;
      SPHI = CT * RX;
      SDPHI = SPHI * CPHI0 - CPHI * SPHI0;
      CPHI0 = CPHI;
      SPHI0 = SPHI;
    }
    while (SDPHI * SDPHI > genau2 && iter < maxiter);

    /*      ellipsoidal (geodetic) latitude */
    Latitude = Math.atan(SPHI / Math.abs(CPHI));

    p.x = Longitude;
    p.y = Latitude;
    p.z = Height;
    return p;
  }, // cs_geocentric_to_geodetic()

  /** Convert_Geocentric_To_Geodetic
   * The method used here is derived from 'An Improved Algorithm for
   * Geocentric to Geodetic Coordinate Conversion', by Ralph Toms, Feb 1996
   */
  geocentric_to_geodetic_noniter: function(p) {
    var X = p.x;
    var Y = p.y;
    var Z = p.z ? p.z : 0; //Z value not always supplied
    var Longitude;
    var Latitude;
    var Height;

    var W; /* distance from Z axis */
    var W2; /* square of distance from Z axis */
    var T0; /* initial estimate of vertical component */
    var T1; /* corrected estimate of vertical component */
    var S0; /* initial estimate of horizontal component */
    var S1; /* corrected estimate of horizontal component */
    var Sin_B0; /* Math.sin(B0), B0 is estimate of Bowring aux variable */
    var Sin3_B0; /* cube of Math.sin(B0) */
    var Cos_B0; /* Math.cos(B0) */
    var Sin_p1; /* Math.sin(phi1), phi1 is estimated latitude */
    var Cos_p1; /* Math.cos(phi1) */
    var Rn; /* Earth radius at location */
    var Sum; /* numerator of Math.cos(phi1) */
    var At_Pole; /* indicates location is in polar region */

    X = parseFloat(X); // cast from string to float
    Y = parseFloat(Y);
    Z = parseFloat(Z);

    At_Pole = false;
    if (X !== 0.0) {
      Longitude = Math.atan2(Y, X);
    }
    else {
      if (Y > 0) {
        Longitude = HALF_PI;
      }
      else if (Y < 0) {
        Longitude = -HALF_PI;
      }
      else {
        At_Pole = true;
        Longitude = 0.0;
        if (Z > 0.0) { /* north pole */
          Latitude = HALF_PI;
        }
        else if (Z < 0.0) { /* south pole */
          Latitude = -HALF_PI;
        }
        else { /* center of earth */
          Latitude = HALF_PI;
          Height = -this.b;
          return;
        }
      }
    }
    W2 = X * X + Y * Y;
    W = Math.sqrt(W2);
    T0 = Z * AD_C;
    S0 = Math.sqrt(T0 * T0 + W2);
    Sin_B0 = T0 / S0;
    Cos_B0 = W / S0;
    Sin3_B0 = Sin_B0 * Sin_B0 * Sin_B0;
    T1 = Z + this.b * this.ep2 * Sin3_B0;
    Sum = W - this.a * this.es * Cos_B0 * Cos_B0 * Cos_B0;
    S1 = Math.sqrt(T1 * T1 + Sum * Sum);
    Sin_p1 = T1 / S1;
    Cos_p1 = Sum / S1;
    Rn = this.a / Math.sqrt(1.0 - this.es * Sin_p1 * Sin_p1);
    if (Cos_p1 >= COS_67P5) {
      Height = W / Cos_p1 - Rn;
    }
    else if (Cos_p1 <= -COS_67P5) {
      Height = W / -Cos_p1 - Rn;
    }
    else {
      Height = Z / Sin_p1 + Rn * (this.es - 1.0);
    }
    if (At_Pole === false) {
      Latitude = Math.atan(Sin_p1 / Cos_p1);
    }

    p.x = Longitude;
    p.y = Latitude;
    p.z = Height;
    return p;
  }, // geocentric_to_geodetic_noniter()

  /****************************************************************/
  // pj_geocentic_to_wgs84( p )
  //  p = point to transform in geocentric coordinates (x,y,z)
  geocentric_to_wgs84: function(p) {

    if (this.datum_type === PJD_3PARAM) {
      // if( x[io] === HUGE_VAL )
      //    continue;
      p.x += this.datum_params[0];
      p.y += this.datum_params[1];
      p.z += this.datum_params[2];

    }
    else if (this.datum_type === PJD_7PARAM) {
      var Dx_BF = this.datum_params[0];
      var Dy_BF = this.datum_params[1];
      var Dz_BF = this.datum_params[2];
      var Rx_BF = this.datum_params[3];
      var Ry_BF = this.datum_params[4];
      var Rz_BF = this.datum_params[5];
      var M_BF = this.datum_params[6];
      // if( x[io] === HUGE_VAL )
      //    continue;
      var x_out = M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF;
      var y_out = M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF;
      var z_out = M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF;
      p.x = x_out;
      p.y = y_out;
      p.z = z_out;
    }
  }, // cs_geocentric_to_wgs84

  /****************************************************************/
  // pj_geocentic_from_wgs84()
  //  coordinate system definition,
  //  point to transform in geocentric coordinates (x,y,z)
  geocentric_from_wgs84: function(p) {

    if (this.datum_type === PJD_3PARAM) {
      //if( x[io] === HUGE_VAL )
      //    continue;
      p.x -= this.datum_params[0];
      p.y -= this.datum_params[1];
      p.z -= this.datum_params[2];

    }
    else if (this.datum_type === PJD_7PARAM) {
      var Dx_BF = this.datum_params[0];
      var Dy_BF = this.datum_params[1];
      var Dz_BF = this.datum_params[2];
      var Rx_BF = this.datum_params[3];
      var Ry_BF = this.datum_params[4];
      var Rz_BF = this.datum_params[5];
      var M_BF = this.datum_params[6];
      var x_tmp = (p.x - Dx_BF) / M_BF;
      var y_tmp = (p.y - Dy_BF) / M_BF;
      var z_tmp = (p.z - Dz_BF) / M_BF;
      //if( x[io] === HUGE_VAL )
      //    continue;

      p.x = x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp;
      p.y = -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp;
      p.z = Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp;
    } //cs_geocentric_from_wgs84()
  }
};

/** point object, nothing fancy, just allows values to be
    passed back and forth by reference rather than by value.
    Other point classes may be used as long as they have
    x and y properties, which will get modified in the transform method.
*/
module.exports = datum;

},{}],60:[function(require,module,exports){
var PJD_3PARAM = 1;
var PJD_7PARAM = 2;
var PJD_GRIDSHIFT = 3;
var PJD_NODATUM = 5; // WGS84 or equivalent
var SRS_WGS84_SEMIMAJOR = 6378137; // only used in grid shift transforms
var SRS_WGS84_ESQUARED = 0.006694379990141316; //DGR: 2012-07-29
module.exports = function(source, dest, point) {
  var wp, i, l;

  function checkParams(fallback) {
    return (fallback === PJD_3PARAM || fallback === PJD_7PARAM);
  }
  // Short cut if the datums are identical.
  if (source.compare_datums(dest)) {
    return point; // in this case, zero is sucess,
    // whereas cs_compare_datums returns 1 to indicate TRUE
    // confusing, should fix this
  }

  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest
  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {
    return point;
  }

  //DGR: 2012-07-29 : add nadgrids support (begin)
  var src_a = source.a;
  var src_es = source.es;

  var dst_a = dest.a;
  var dst_es = dest.es;

  var fallback = source.datum_type;
  // If this datum requires grid shifts, then apply it to geodetic coordinates.
  if (fallback === PJD_GRIDSHIFT) {
    if (this.apply_gridshift(source, 0, point) === 0) {
      source.a = SRS_WGS84_SEMIMAJOR;
      source.es = SRS_WGS84_ESQUARED;
    }
    else {
      // try 3 or 7 params transformation or nothing ?
      if (!source.datum_params) {
        source.a = src_a;
        source.es = source.es;
        return point;
      }
      wp = 1;
      for (i = 0, l = source.datum_params.length; i < l; i++) {
        wp *= source.datum_params[i];
      }
      if (wp === 0) {
        source.a = src_a;
        source.es = source.es;
        return point;
      }
      if (source.datum_params.length > 3) {
        fallback = PJD_7PARAM;
      }
      else {
        fallback = PJD_3PARAM;
      }
    }
  }
  if (dest.datum_type === PJD_GRIDSHIFT) {
    dest.a = SRS_WGS84_SEMIMAJOR;
    dest.es = SRS_WGS84_ESQUARED;
  }
  // Do we need to go through geocentric coordinates?
  if (source.es !== dest.es || source.a !== dest.a || checkParams(fallback) || checkParams(dest.datum_type)) {
    //DGR: 2012-07-29 : add nadgrids support (end)
    // Convert to geocentric coordinates.
    source.geodetic_to_geocentric(point);
    // CHECK_RETURN;
    // Convert between datums
    if (checkParams(source.datum_type)) {
      source.geocentric_to_wgs84(point);
      // CHECK_RETURN;
    }
    if (checkParams(dest.datum_type)) {
      dest.geocentric_from_wgs84(point);
      // CHECK_RETURN;
    }
    // Convert back to geodetic coordinates
    dest.geocentric_to_geodetic(point);
    // CHECK_RETURN;
  }
  // Apply grid shift to destination if required
  if (dest.datum_type === PJD_GRIDSHIFT) {
    this.apply_gridshift(dest, 1, point);
    // CHECK_RETURN;
  }

  source.a = src_a;
  source.es = src_es;
  dest.a = dst_a;
  dest.es = dst_es;

  return point;
};


},{}],61:[function(require,module,exports){
var globals = require('./global');
var parseProj = require('./projString');
var wkt = require('./wkt');

function defs(name) {
  /*global console*/
  var that = this;
  if (arguments.length === 2) {
    var def = arguments[1];
    if (typeof def === 'string') {
      if (def.charAt(0) === '+') {
        defs[name] = parseProj(arguments[1]);
      }
      else {
        defs[name] = wkt(arguments[1]);
      }
    } else {
      defs[name] = def;
    }
  }
  else if (arguments.length === 1) {
    if (Array.isArray(name)) {
      return name.map(function(v) {
        if (Array.isArray(v)) {
          defs.apply(that, v);
        }
        else {
          defs(v);
        }
      });
    }
    else if (typeof name === 'string') {
      if (name in defs) {
        return defs[name];
      }
    }
    else if ('EPSG' in name) {
      defs['EPSG:' + name.EPSG] = name;
    }
    else if ('ESRI' in name) {
      defs['ESRI:' + name.ESRI] = name;
    }
    else if ('IAU2000' in name) {
      defs['IAU2000:' + name.IAU2000] = name;
    }
    else {
      console.log(name);
    }
    return;
  }


}
globals(defs);
module.exports = defs;

},{"./global":64,"./projString":68,"./wkt":96}],62:[function(require,module,exports){
var Datum = require('./constants/Datum');
var Ellipsoid = require('./constants/Ellipsoid');
var extend = require('./extend');
var datum = require('./datum');
var EPSLN = 1.0e-10;
// ellipoid pj_set_ell.c
var SIXTH = 0.1666666666666666667;
/* 1/6 */
var RA4 = 0.04722222222222222222;
/* 17/360 */
var RA6 = 0.02215608465608465608;
module.exports = function(json) {
  // DGR 2011-03-20 : nagrids -> nadgrids
  if (json.datumCode && json.datumCode !== 'none') {
    var datumDef = Datum[json.datumCode];
    if (datumDef) {
      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;
      json.ellps = datumDef.ellipse;
      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;
    }
  }
  if (!json.a) { // do we have an ellipsoid?
    var ellipse = Ellipsoid[json.ellps] ? Ellipsoid[json.ellps] : Ellipsoid.WGS84;
    extend(json, ellipse);
  }
  if (json.rf && !json.b) {
    json.b = (1.0 - 1.0 / json.rf) * json.a;
  }
  if (json.rf === 0 || Math.abs(json.a - json.b) < EPSLN) {
    json.sphere = true;
    json.b = json.a;
  }
  json.a2 = json.a * json.a; // used in geocentric
  json.b2 = json.b * json.b; // used in geocentric
  json.es = (json.a2 - json.b2) / json.a2; // e ^ 2
  json.e = Math.sqrt(json.es); // eccentricity
  if (json.R_A) {
    json.a *= 1 - json.es * (SIXTH + json.es * (RA4 + json.es * RA6));
    json.a2 = json.a * json.a;
    json.b2 = json.b * json.b;
    json.es = 0;
  }
  json.ep2 = (json.a2 - json.b2) / json.b2; // used in geocentric
  if (!json.k0) {
    json.k0 = 1.0; //default value
  }
  //DGR 2010-11-12: axis
  if (!json.axis) {
    json.axis = "enu";
  }

  if (!json.datum) {
    json.datum = datum(json);
  }
  return json;
};

},{"./constants/Datum":54,"./constants/Ellipsoid":55,"./datum":59,"./extend":63}],63:[function(require,module,exports){
module.exports = function(destination, source) {
  destination = destination || {};
  var value, property;
  if (!source) {
    return destination;
  }
  for (property in source) {
    value = source[property];
    if (value !== undefined) {
      destination[property] = value;
    }
  }
  return destination;
};

},{}],64:[function(require,module,exports){
module.exports = function(defs) {
  defs('EPSG:4326', "+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");
  defs('EPSG:4269', "+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");
  defs('EPSG:3857', "+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");

  defs.WGS84 = defs['EPSG:4326'];
  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857
  defs.GOOGLE = defs['EPSG:3857'];
  defs['EPSG:900913'] = defs['EPSG:3857'];
  defs['EPSG:102113'] = defs['EPSG:3857'];
};

},{}],65:[function(require,module,exports){
var projs = [
  require('./projections/tmerc'),
  require('./projections/utm'),
  require('./projections/sterea'),
  require('./projections/stere'),
  require('./projections/somerc'),
  require('./projections/omerc'),
  require('./projections/lcc'),
  require('./projections/krovak'),
  require('./projections/cass'),
  require('./projections/laea'),
  require('./projections/aea'),
  require('./projections/gnom'),
  require('./projections/cea'),
  require('./projections/eqc'),
  require('./projections/poly'),
  require('./projections/nzmg'),
  require('./projections/mill'),
  require('./projections/sinu'),
  require('./projections/moll'),
  require('./projections/eqdc'),
  require('./projections/vandg'),
  require('./projections/aeqd')
];
module.exports = function(proj4){
  projs.forEach(function(proj){
    proj4.Proj.projections.add(proj);
  });
};
},{"./projections/aea":70,"./projections/aeqd":71,"./projections/cass":72,"./projections/cea":73,"./projections/eqc":74,"./projections/eqdc":75,"./projections/gnom":77,"./projections/krovak":78,"./projections/laea":79,"./projections/lcc":80,"./projections/mill":83,"./projections/moll":84,"./projections/nzmg":85,"./projections/omerc":86,"./projections/poly":87,"./projections/sinu":88,"./projections/somerc":89,"./projections/stere":90,"./projections/sterea":91,"./projections/tmerc":92,"./projections/utm":93,"./projections/vandg":94}],66:[function(require,module,exports){
var proj4 = require('./core');
proj4.defaultDatum = 'WGS84'; //default datum
proj4.Proj = require('./Proj');
proj4.WGS84 = new proj4.Proj('WGS84');
proj4.Point = require('./Point');
proj4.toPoint = require("./common/toPoint");
proj4.defs = require('./defs');
proj4.transform = require('./transform');
proj4.mgrs = require('mgrs');
proj4.version = require('../package.json').version;
require('./includedProjections')(proj4);
module.exports = proj4;
},{"../package.json":97,"./Point":30,"./Proj":31,"./common/toPoint":52,"./core":58,"./defs":61,"./includedProjections":65,"./transform":95,"mgrs":28}],67:[function(require,module,exports){
var defs = require('./defs');
var wkt = require('./wkt');
var projStr = require('./projString');
function testObj(code){
  return typeof code === 'string';
}
function testDef(code){
  return code in defs;
}
function testWKT(code){
  var codeWords = ['GEOGCS','GEOCCS','PROJCS','LOCAL_CS'];
  return codeWords.reduce(function(a,b){
    return a+1+code.indexOf(b);
  },0);
}
function testProj(code){
  return code[0] === '+';
}
function parse(code){
  if (testObj(code)) {
    //check to see if this is a WKT string
    if (testDef(code)) {
      return defs[code];
    }
    else if (testWKT(code)) {
      return wkt(code);
    }
    else if (testProj(code)) {
      return projStr(code);
    }
  }else{
    return code;
  }
}

module.exports = parse;
},{"./defs":61,"./projString":68,"./wkt":96}],68:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var PrimeMeridian = require('./constants/PrimeMeridian');
var units = require('./constants/units');

module.exports = function(defData) {
  var self = {};
  var paramObj = {};
  defData.split("+").map(function(v) {
    return v.trim();
  }).filter(function(a) {
    return a;
  }).forEach(function(a) {
    var split = a.split("=");
    split.push(true);
    paramObj[split[0].toLowerCase()] = split[1];
  });
  var paramName, paramVal, paramOutname;
  var params = {
    proj: 'projName',
    datum: 'datumCode',
    rf: function(v) {
      self.rf = parseFloat(v);
    },
    lat_0: function(v) {
      self.lat0 = v * D2R;
    },
    lat_1: function(v) {
      self.lat1 = v * D2R;
    },
    lat_2: function(v) {
      self.lat2 = v * D2R;
    },
    lat_ts: function(v) {
      self.lat_ts = v * D2R;
    },
    lon_0: function(v) {
      self.long0 = v * D2R;
    },
    lon_1: function(v) {
      self.long1 = v * D2R;
    },
    lon_2: function(v) {
      self.long2 = v * D2R;
    },
    alpha: function(v) {
      self.alpha = parseFloat(v) * D2R;
    },
    lonc: function(v) {
      self.longc = v * D2R;
    },
    x_0: function(v) {
      self.x0 = parseFloat(v);
    },
    y_0: function(v) {
      self.y0 = parseFloat(v);
    },
    k_0: function(v) {
      self.k0 = parseFloat(v);
    },
    k: function(v) {
      self.k0 = parseFloat(v);
    },
    a: function(v) {
      self.a = parseFloat(v);
    },
    b: function(v) {
      self.b = parseFloat(v);
    },
    r_a: function() {
      self.R_A = true;
    },
    zone: function(v) {
      self.zone = parseInt(v, 10);
    },
    south: function() {
      self.utmSouth = true;
    },
    towgs84: function(v) {
      self.datum_params = v.split(",").map(function(a) {
        return parseFloat(a);
      });
    },
    to_meter: function(v) {
      self.to_meter = parseFloat(v);
    },
    units: function(v) {
      self.units = v;
      if (units[v]) {
        self.to_meter = units[v].to_meter;
      }
    },
    from_greenwich: function(v) {
      self.from_greenwich = v * D2R;
    },
    pm: function(v) {
      self.from_greenwich = (PrimeMeridian[v] ? PrimeMeridian[v] : parseFloat(v)) * D2R;
    },
    nadgrids: function(v) {
      if (v === '@null') {
        self.datumCode = 'none';
      }
      else {
        self.nadgrids = v;
      }
    },
    axis: function(v) {
      var legalAxis = "ewnsud";
      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {
        self.axis = v;
      }
    }
  };
  for (paramName in paramObj) {
    paramVal = paramObj[paramName];
    if (paramName in params) {
      paramOutname = params[paramName];
      if (typeof paramOutname === 'function') {
        paramOutname(paramVal);
      }
      else {
        self[paramOutname] = paramVal;
      }
    }
    else {
      self[paramName] = paramVal;
    }
  }
  if(typeof self.datumCode === 'string' && self.datumCode !== "WGS84"){
    self.datumCode = self.datumCode.toLowerCase();
  }
  return self;
};

},{"./constants/PrimeMeridian":56,"./constants/units":57}],69:[function(require,module,exports){
var projs = [
  require('./projections/merc'),
  require('./projections/longlat')
];
var names = {};
var projStore = [];

function add(proj, i) {
  var len = projStore.length;
  if (!proj.names) {
    console.log(i);
    return true;
  }
  projStore[len] = proj;
  proj.names.forEach(function(n) {
    names[n.toLowerCase()] = len;
  });
  return this;
}

exports.add = add;

exports.get = function(name) {
  if (!name) {
    return false;
  }
  var n = name.toLowerCase();
  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {
    return projStore[names[n]];
  }
};
exports.start = function() {
  projs.forEach(add);
};

},{"./projections/longlat":81,"./projections/merc":82}],70:[function(require,module,exports){
var EPSLN = 1.0e-10;
var msfnz = require('../common/msfnz');
var qsfnz = require('../common/qsfnz');
var adjust_lon = require('../common/adjust_lon');
var asinz = require('../common/asinz');
exports.init = function() {

  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {
    return;
  }
  this.temp = this.b / this.a;
  this.es = 1 - Math.pow(this.temp, 2);
  this.e3 = Math.sqrt(this.es);

  this.sin_po = Math.sin(this.lat1);
  this.cos_po = Math.cos(this.lat1);
  this.t1 = this.sin_po;
  this.con = this.sin_po;
  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);
  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);

  this.sin_po = Math.sin(this.lat2);
  this.cos_po = Math.cos(this.lat2);
  this.t2 = this.sin_po;
  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);
  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);

  this.sin_po = Math.sin(this.lat0);
  this.cos_po = Math.cos(this.lat0);
  this.t3 = this.sin_po;
  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);

  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {
    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);
  }
  else {
    this.ns0 = this.con;
  }
  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;
  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;
};

/* Albers Conical Equal Area forward equations--mapping lat,long to x,y
  -------------------------------------------------------------------*/
exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  this.sin_phi = Math.sin(lat);
  this.cos_phi = Math.cos(lat);

  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);
  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;
  var theta = this.ns0 * adjust_lon(lon - this.long0);
  var x = rh1 * Math.sin(theta) + this.x0;
  var y = this.rh - rh1 * Math.cos(theta) + this.y0;

  p.x = x;
  p.y = y;
  return p;
};


exports.inverse = function(p) {
  var rh1, qs, con, theta, lon, lat;

  p.x -= this.x0;
  p.y = this.rh - p.y + this.y0;
  if (this.ns0 >= 0) {
    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);
    con = 1;
  }
  else {
    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);
    con = -1;
  }
  theta = 0;
  if (rh1 !== 0) {
    theta = Math.atan2(con * p.x, con * p.y);
  }
  con = rh1 * this.ns0 / this.a;
  if (this.sphere) {
    lat = Math.asin((this.c - con * con) / (2 * this.ns0));
  }
  else {
    qs = (this.c - con * con) / this.ns0;
    lat = this.phi1z(this.e3, qs);
  }

  lon = adjust_lon(theta / this.ns0 + this.long0);
  p.x = lon;
  p.y = lat;
  return p;
};

/* Function to compute phi1, the latitude for the inverse of the
   Albers Conical Equal-Area projection.
-------------------------------------------*/
exports.phi1z = function(eccent, qs) {
  var sinphi, cosphi, con, com, dphi;
  var phi = asinz(0.5 * qs);
  if (eccent < EPSLN) {
    return phi;
  }

  var eccnts = eccent * eccent;
  for (var i = 1; i <= 25; i++) {
    sinphi = Math.sin(phi);
    cosphi = Math.cos(phi);
    con = eccent * sinphi;
    com = 1 - con * con;
    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));
    phi = phi + dphi;
    if (Math.abs(dphi) <= 1e-7) {
      return phi;
    }
  }
  return null;
};
exports.names = ["Albers_Conic_Equal_Area", "Albers", "aea"];

},{"../common/adjust_lon":34,"../common/asinz":35,"../common/msfnz":44,"../common/qsfnz":49}],71:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var mlfn = require('../common/mlfn');
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var gN = require('../common/gN');
var asinz = require('../common/asinz');
var imlfn = require('../common/imlfn');
exports.init = function() {
  this.sin_p12 = Math.sin(this.lat0);
  this.cos_p12 = Math.cos(this.lat0);
};

exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var sinphi = Math.sin(p.y);
  var cosphi = Math.cos(p.y);
  var dlon = adjust_lon(lon - this.long0);
  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;
  if (this.sphere) {
    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {
      //North Pole case
      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);
      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);
      return p;
    }
    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {
      //South Pole case
      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);
      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);
      return p;
    }
    else {
      //default case
      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);
      c = Math.acos(cos_c);
      kp = c / Math.sin(c);
      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);
      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));
      return p;
    }
  }
  else {
    e0 = e0fn(this.es);
    e1 = e1fn(this.es);
    e2 = e2fn(this.es);
    e3 = e3fn(this.es);
    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {
      //North Pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      Ml = this.a * mlfn(e0, e1, e2, e3, lat);
      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);
      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);
      return p;
    }
    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {
      //South Pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      Ml = this.a * mlfn(e0, e1, e2, e3, lat);
      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);
      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);
      return p;
    }
    else {
      //Default case
      tanphi = sinphi / cosphi;
      Nl1 = gN(this.a, this.e, this.sin_p12);
      Nl = gN(this.a, this.e, sinphi);
      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));
      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));
      if (Az === 0) {
        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));
      }
      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {
        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));
      }
      else {
        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));
      }
      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);
      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);
      GH = G * H;
      Hs = H * H;
      s2 = s * s;
      s3 = s2 * s;
      s4 = s3 * s;
      s5 = s4 * s;
      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);
      p.x = this.x0 + c * Math.sin(Az);
      p.y = this.y0 + c * Math.cos(Az);
      return p;
    }
  }


};

exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;
  if (this.sphere) {
    rh = Math.sqrt(p.x * p.x + p.y * p.y);
    if (rh > (2 * HALF_PI * this.a)) {
      return;
    }
    z = rh / this.a;

    sinz = Math.sin(z);
    cosz = Math.cos(z);

    lon = this.long0;
    if (Math.abs(rh) <= EPSLN) {
      lat = this.lat0;
    }
    else {
      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);
      con = Math.abs(this.lat0) - HALF_PI;
      if (Math.abs(con) <= EPSLN) {
        if (this.lat0 >= 0) {
          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));
        }
        else {
          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));
        }
      }
      else {
        /*con = cosz - this.sin_p12 * Math.sin(lat);
        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {
          //no-op, just keep the lon value as is
        } else {
          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));
          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));
        }*/
        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));
      }
    }

    p.x = lon;
    p.y = lat;
    return p;
  }
  else {
    e0 = e0fn(this.es);
    e1 = e1fn(this.es);
    e2 = e2fn(this.es);
    e3 = e3fn(this.es);
    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {
      //North pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      rh = Math.sqrt(p.x * p.x + p.y * p.y);
      M = Mlp - rh;
      lat = imlfn(M / this.a, e0, e1, e2, e3);
      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));
      p.x = lon;
      p.y = lat;
      return p;
    }
    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {
      //South pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      rh = Math.sqrt(p.x * p.x + p.y * p.y);
      M = rh - Mlp;

      lat = imlfn(M / this.a, e0, e1, e2, e3);
      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));
      p.x = lon;
      p.y = lat;
      return p;
    }
    else {
      //default case
      rh = Math.sqrt(p.x * p.x + p.y * p.y);
      Az = Math.atan2(p.x, p.y);
      N1 = gN(this.a, this.e, this.sin_p12);
      cosAz = Math.cos(Az);
      tmp = this.e * this.cos_p12 * cosAz;
      A = -tmp * tmp / (1 - this.es);
      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);
      D = rh / N1;
      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;
      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;
      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);
      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));
      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));
      p.x = lon;
      p.y = lat;
      return p;
    }
  }

};
exports.names = ["Azimuthal_Equidistant", "aeqd"];

},{"../common/adjust_lon":34,"../common/asinz":35,"../common/e0fn":36,"../common/e1fn":37,"../common/e2fn":38,"../common/e3fn":39,"../common/gN":40,"../common/imlfn":41,"../common/mlfn":43}],72:[function(require,module,exports){
var mlfn = require('../common/mlfn');
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var gN = require('../common/gN');
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var imlfn = require('../common/imlfn');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
exports.init = function() {
  if (!this.sphere) {
    this.e0 = e0fn(this.es);
    this.e1 = e1fn(this.es);
    this.e2 = e2fn(this.es);
    this.e3 = e3fn(this.es);
    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);
  }
};



/* Cassini forward equations--mapping lat,long to x,y
  -----------------------------------------------------------------------*/
exports.forward = function(p) {

  /* Forward equations
      -----------------*/
  var x, y;
  var lam = p.x;
  var phi = p.y;
  lam = adjust_lon(lam - this.long0);

  if (this.sphere) {
    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));
    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);
  }
  else {
    //ellipsoid
    var sinphi = Math.sin(phi);
    var cosphi = Math.cos(phi);
    var nl = gN(this.a, this.e, sinphi);
    var tl = Math.tan(phi) * Math.tan(phi);
    var al = lam * Math.cos(phi);
    var asq = al * al;
    var cl = this.es * cosphi * cosphi / (1 - this.es);
    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);

    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));
    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);


  }

  p.x = x + this.x0;
  p.y = y + this.y0;
  return p;
};

/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var x = p.x / this.a;
  var y = p.y / this.a;
  var phi, lam;

  if (this.sphere) {
    var dd = y + this.lat0;
    phi = Math.asin(Math.sin(dd) * Math.cos(x));
    lam = Math.atan2(Math.tan(x), Math.cos(dd));
  }
  else {
    /* ellipsoid */
    var ml1 = this.ml0 / this.a + y;
    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);
    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {
      p.x = this.long0;
      p.y = HALF_PI;
      if (y < 0) {
        p.y *= -1;
      }
      return p;
    }
    var nl1 = gN(this.a, this.e, Math.sin(phi1));

    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);
    var tl1 = Math.pow(Math.tan(phi1), 2);
    var dl = x * this.a / nl1;
    var dsq = dl * dl;
    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);
    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);

  }

  p.x = adjust_lon(lam + this.long0);
  p.y = adjust_lat(phi);
  return p;

};
exports.names = ["Cassini", "Cassini_Soldner", "cass"];
},{"../common/adjust_lat":33,"../common/adjust_lon":34,"../common/e0fn":36,"../common/e1fn":37,"../common/e2fn":38,"../common/e3fn":39,"../common/gN":40,"../common/imlfn":41,"../common/mlfn":43}],73:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var qsfnz = require('../common/qsfnz');
var msfnz = require('../common/msfnz');
var iqsfnz = require('../common/iqsfnz');
/*
  reference:  
    "Cartographic Projection Procedures for the UNIX Environment-
    A User's Manual" by Gerald I. Evenden,
    USGS Open File Report 90-284and Release 4 Interim Reports (2003)
*/
exports.init = function() {
  //no-op
  if (!this.sphere) {
    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));
  }
};


/* Cylindrical Equal Area forward equations--mapping lat,long to x,y
    ------------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var x, y;
  /* Forward equations
      -----------------*/
  var dlon = adjust_lon(lon - this.long0);
  if (this.sphere) {
    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);
    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);
  }
  else {
    var qs = qsfnz(this.e, Math.sin(lat));
    x = this.x0 + this.a * this.k0 * dlon;
    y = this.y0 + this.a * qs * 0.5 / this.k0;
  }

  p.x = x;
  p.y = y;
  return p;
};

/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long
    ------------------------------------------------------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var lon, lat;

  if (this.sphere) {
    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));
    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));
  }
  else {
    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);
    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["cea"];

},{"../common/adjust_lon":34,"../common/iqsfnz":42,"../common/msfnz":44,"../common/qsfnz":49}],74:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
exports.init = function() {

  this.x0 = this.x0 || 0;
  this.y0 = this.y0 || 0;
  this.lat0 = this.lat0 || 0;
  this.long0 = this.long0 || 0;
  this.lat_ts = this.lat_ts || 0;
  this.title = this.title || "Equidistant Cylindrical (Plate Carre)";

  this.rc = Math.cos(this.lat_ts);
};


// forward equations--mapping lat,long to x,y
// -----------------------------------------------------------------
exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  var dlon = adjust_lon(lon - this.long0);
  var dlat = adjust_lat(lat - this.lat0);
  p.x = this.x0 + (this.a * dlon * this.rc);
  p.y = this.y0 + (this.a * dlat);
  return p;
};

// inverse equations--mapping x,y to lat/long
// -----------------------------------------------------------------
exports.inverse = function(p) {

  var x = p.x;
  var y = p.y;

  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));
  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));
  return p;
};
exports.names = ["Equirectangular", "Equidistant_Cylindrical", "eqc"];

},{"../common/adjust_lat":33,"../common/adjust_lon":34}],75:[function(require,module,exports){
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var msfnz = require('../common/msfnz');
var mlfn = require('../common/mlfn');
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var imlfn = require('../common/imlfn');
var EPSLN = 1.0e-10;
exports.init = function() {

  /* Place parameters in static storage for common use
      -------------------------------------------------*/
  // Standard Parallels cannot be equal and on opposite sides of the equator
  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {
    return;
  }
  this.lat2 = this.lat2 || this.lat1;
  this.temp = this.b / this.a;
  this.es = 1 - Math.pow(this.temp, 2);
  this.e = Math.sqrt(this.es);
  this.e0 = e0fn(this.es);
  this.e1 = e1fn(this.es);
  this.e2 = e2fn(this.es);
  this.e3 = e3fn(this.es);

  this.sinphi = Math.sin(this.lat1);
  this.cosphi = Math.cos(this.lat1);

  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);
  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);

  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {
    this.ns = this.sinphi;
  }
  else {
    this.sinphi = Math.sin(this.lat2);
    this.cosphi = Math.cos(this.lat2);
    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);
    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);
    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);
  }
  this.g = this.ml1 + this.ms1 / this.ns;
  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);
  this.rh = this.a * (this.g - this.ml0);
};


/* Equidistant Conic forward equations--mapping lat,long to x,y
  -----------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var rh1;

  /* Forward equations
      -----------------*/
  if (this.sphere) {
    rh1 = this.a * (this.g - lat);
  }
  else {
    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);
    rh1 = this.a * (this.g - ml);
  }
  var theta = this.ns * adjust_lon(lon - this.long0);
  var x = this.x0 + rh1 * Math.sin(theta);
  var y = this.y0 + this.rh - rh1 * Math.cos(theta);
  p.x = x;
  p.y = y;
  return p;
};

/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y = this.rh - p.y + this.y0;
  var con, rh1, lat, lon;
  if (this.ns >= 0) {
    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);
    con = 1;
  }
  else {
    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);
    con = -1;
  }
  var theta = 0;
  if (rh1 !== 0) {
    theta = Math.atan2(con * p.x, con * p.y);
  }

  if (this.sphere) {
    lon = adjust_lon(this.long0 + theta / this.ns);
    lat = adjust_lat(this.g - rh1 / this.a);
    p.x = lon;
    p.y = lat;
    return p;
  }
  else {
    var ml = this.g - rh1 / this.a;
    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);
    lon = adjust_lon(this.long0 + theta / this.ns);
    p.x = lon;
    p.y = lat;
    return p;
  }

};
exports.names = ["Equidistant_Conic", "eqdc"];

},{"../common/adjust_lat":33,"../common/adjust_lon":34,"../common/e0fn":36,"../common/e1fn":37,"../common/e2fn":38,"../common/e3fn":39,"../common/imlfn":41,"../common/mlfn":43,"../common/msfnz":44}],76:[function(require,module,exports){
var FORTPI = Math.PI/4;
var srat = require('../common/srat');
var HALF_PI = Math.PI/2;
var MAX_ITER = 20;
exports.init = function() {
  var sphi = Math.sin(this.lat0);
  var cphi = Math.cos(this.lat0);
  cphi *= cphi;
  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);
  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));
  this.phic0 = Math.asin(sphi / this.C);
  this.ratexp = 0.5 * this.C * this.e;
  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));
};

exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;

  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;
  p.x = this.C * lon;
  return p;
};

exports.inverse = function(p) {
  var DEL_TOL = 1e-14;
  var lon = p.x / this.C;
  var lat = p.y;
  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);
  for (var i = MAX_ITER; i > 0; --i) {
    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;
    if (Math.abs(lat - p.y) < DEL_TOL) {
      break;
    }
    p.y = lat;
  }
  /* convergence failed */
  if (!i) {
    return null;
  }
  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["gauss"];

},{"../common/srat":51}],77:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var EPSLN = 1.0e-10;
var asinz = require('../common/asinz');

/*
  reference:
    Wolfram Mathworld "Gnomonic Projection"
    http://mathworld.wolfram.com/GnomonicProjection.html
    Accessed: 12th November 2009
  */
exports.init = function() {

  /* Place parameters in static storage for common use
      -------------------------------------------------*/
  this.sin_p14 = Math.sin(this.lat0);
  this.cos_p14 = Math.cos(this.lat0);
  // Approximation for projecting points to the horizon (infinity)
  this.infinity_dist = 1000 * this.a;
  this.rc = 1;
};


/* Gnomonic forward equations--mapping lat,long to x,y
    ---------------------------------------------------*/
exports.forward = function(p) {
  var sinphi, cosphi; /* sin and cos value        */
  var dlon; /* delta longitude value      */
  var coslon; /* cos of longitude        */
  var ksp; /* scale factor          */
  var g;
  var x, y;
  var lon = p.x;
  var lat = p.y;
  /* Forward equations
      -----------------*/
  dlon = adjust_lon(lon - this.long0);

  sinphi = Math.sin(lat);
  cosphi = Math.cos(lat);

  coslon = Math.cos(dlon);
  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;
  ksp = 1;
  if ((g > 0) || (Math.abs(g) <= EPSLN)) {
    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;
    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;
  }
  else {

    // Point is in the opposing hemisphere and is unprojectable
    // We still need to return a reasonable point, so we project 
    // to infinity, on a bearing 
    // equivalent to the northern hemisphere equivalent
    // This is a reasonable approximation for short shapes and lines that 
    // straddle the horizon.

    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);
    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);

  }
  p.x = x;
  p.y = y;
  return p;
};


exports.inverse = function(p) {
  var rh; /* Rho */
  var sinc, cosc;
  var c;
  var lon, lat;

  /* Inverse equations
      -----------------*/
  p.x = (p.x - this.x0) / this.a;
  p.y = (p.y - this.y0) / this.a;

  p.x /= this.k0;
  p.y /= this.k0;

  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {
    c = Math.atan2(rh, this.rc);
    sinc = Math.sin(c);
    cosc = Math.cos(c);

    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);
    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);
    lon = adjust_lon(this.long0 + lon);
  }
  else {
    lat = this.phic0;
    lon = 0;
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["gnom"];

},{"../common/adjust_lon":34,"../common/asinz":35}],78:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
exports.init = function() {
  this.a = 6377397.155;
  this.es = 0.006674372230614;
  this.e = Math.sqrt(this.es);
  if (!this.lat0) {
    this.lat0 = 0.863937979737193;
  }
  if (!this.long0) {
    this.long0 = 0.7417649320975901 - 0.308341501185665;
  }
  /* if scale not set default to 0.9999 */
  if (!this.k0) {
    this.k0 = 0.9999;
  }
  this.s45 = 0.785398163397448; /* 45 */
  this.s90 = 2 * this.s45;
  this.fi0 = this.lat0;
  this.e2 = this.es;
  this.e = Math.sqrt(this.e2);
  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));
  this.uq = 1.04216856380474;
  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);
  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);
  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;
  this.k1 = this.k0;
  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));
  this.s0 = 1.37008346281555;
  this.n = Math.sin(this.s0);
  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);
  this.ad = this.s90 - this.uq;
};

/* ellipsoid */
/* calculate xy from lat/lon */
/* Constants, identical to inverse transform function */
exports.forward = function(p) {
  var gfi, u, deltav, s, d, eps, ro;
  var lon = p.x;
  var lat = p.y;
  var delta_lon = adjust_lon(lon - this.long0);
  /* Transformation */
  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));
  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);
  deltav = -delta_lon * this.alfa;
  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));
  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));
  eps = this.n * d;
  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);
  p.y = ro * Math.cos(eps) / 1;
  p.x = ro * Math.sin(eps) / 1;

  if (!this.czech) {
    p.y *= -1;
    p.x *= -1;
  }
  return (p);
};

/* calculate lat/lon from xy */
exports.inverse = function(p) {
  var u, deltav, s, d, eps, ro, fi1;
  var ok;

  /* Transformation */
  /* revert y, x*/
  var tmp = p.x;
  p.x = p.y;
  p.y = tmp;
  if (!this.czech) {
    p.y *= -1;
    p.x *= -1;
  }
  ro = Math.sqrt(p.x * p.x + p.y * p.y);
  eps = Math.atan2(p.y, p.x);
  d = eps / Math.sin(this.s0);
  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);
  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));
  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));
  p.x = this.long0 - deltav / this.alfa;
  fi1 = u;
  ok = 0;
  var iter = 0;
  do {
    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);
    if (Math.abs(fi1 - p.y) < 0.0000000001) {
      ok = 1;
    }
    fi1 = p.y;
    iter += 1;
  } while (ok === 0 && iter < 15);
  if (iter >= 15) {
    return null;
  }

  return (p);
};
exports.names = ["Krovak", "krovak"];

},{"../common/adjust_lon":34}],79:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var FORTPI = Math.PI/4;
var EPSLN = 1.0e-10;
var qsfnz = require('../common/qsfnz');
var adjust_lon = require('../common/adjust_lon');
/*
  reference
    "New Equal-Area Map Projections for Noncircular Regions", John P. Snyder,
    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.
  */

exports.S_POLE = 1;
exports.N_POLE = 2;
exports.EQUIT = 3;
exports.OBLIQ = 4;


/* Initialize the Lambert Azimuthal Equal Area projection
  ------------------------------------------------------*/
exports.init = function() {
  var t = Math.abs(this.lat0);
  if (Math.abs(t - HALF_PI) < EPSLN) {
    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;
  }
  else if (Math.abs(t) < EPSLN) {
    this.mode = this.EQUIT;
  }
  else {
    this.mode = this.OBLIQ;
  }
  if (this.es > 0) {
    var sinphi;

    this.qp = qsfnz(this.e, 1);
    this.mmf = 0.5 / (1 - this.es);
    this.apa = this.authset(this.es);
    switch (this.mode) {
    case this.N_POLE:
      this.dd = 1;
      break;
    case this.S_POLE:
      this.dd = 1;
      break;
    case this.EQUIT:
      this.rq = Math.sqrt(0.5 * this.qp);
      this.dd = 1 / this.rq;
      this.xmf = 1;
      this.ymf = 0.5 * this.qp;
      break;
    case this.OBLIQ:
      this.rq = Math.sqrt(0.5 * this.qp);
      sinphi = Math.sin(this.lat0);
      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;
      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);
      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);
      this.ymf = (this.xmf = this.rq) / this.dd;
      this.xmf *= this.dd;
      break;
    }
  }
  else {
    if (this.mode === this.OBLIQ) {
      this.sinph0 = Math.sin(this.lat0);
      this.cosph0 = Math.cos(this.lat0);
    }
  }
};

/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y
  -----------------------------------------------------------------------*/
exports.forward = function(p) {

  /* Forward equations
      -----------------*/
  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;
  var lam = p.x;
  var phi = p.y;

  lam = adjust_lon(lam - this.long0);

  if (this.sphere) {
    sinphi = Math.sin(phi);
    cosphi = Math.cos(phi);
    coslam = Math.cos(lam);
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;
      if (y <= EPSLN) {
        return null;
      }
      y = Math.sqrt(2 / y);
      x = y * cosphi * Math.sin(lam);
      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;
    }
    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {
      if (this.mode === this.N_POLE) {
        coslam = -coslam;
      }
      if (Math.abs(phi + this.phi0) < EPSLN) {
        return null;
      }
      y = FORTPI - phi * 0.5;
      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));
      x = y * Math.sin(lam);
      y *= coslam;
    }
  }
  else {
    sinb = 0;
    cosb = 0;
    b = 0;
    coslam = Math.cos(lam);
    sinlam = Math.sin(lam);
    sinphi = Math.sin(phi);
    q = qsfnz(this.e, sinphi);
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      sinb = q / this.qp;
      cosb = Math.sqrt(1 - sinb * sinb);
    }
    switch (this.mode) {
    case this.OBLIQ:
      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;
      break;
    case this.EQUIT:
      b = 1 + cosb * coslam;
      break;
    case this.N_POLE:
      b = HALF_PI + phi;
      q = this.qp - q;
      break;
    case this.S_POLE:
      b = phi - HALF_PI;
      q = this.qp + q;
      break;
    }
    if (Math.abs(b) < EPSLN) {
      return null;
    }
    switch (this.mode) {
    case this.OBLIQ:
    case this.EQUIT:
      b = Math.sqrt(2 / b);
      if (this.mode === this.OBLIQ) {
        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);
      }
      else {
        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;
      }
      x = this.xmf * b * cosb * sinlam;
      break;
    case this.N_POLE:
    case this.S_POLE:
      if (q >= 0) {
        x = (b = Math.sqrt(q)) * sinlam;
        y = coslam * ((this.mode === this.S_POLE) ? b : -b);
      }
      else {
        x = y = 0;
      }
      break;
    }
  }

  p.x = this.a * x + this.x0;
  p.y = this.a * y + this.y0;
  return p;
};

/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var x = p.x / this.a;
  var y = p.y / this.a;
  var lam, phi, cCe, sCe, q, rho, ab;

  if (this.sphere) {
    var cosz = 0,
      rh, sinz = 0;

    rh = Math.sqrt(x * x + y * y);
    phi = rh * 0.5;
    if (phi > 1) {
      return null;
    }
    phi = 2 * Math.asin(phi);
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      sinz = Math.sin(phi);
      cosz = Math.cos(phi);
    }
    switch (this.mode) {
    case this.EQUIT:
      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);
      x *= sinz;
      y = cosz * rh;
      break;
    case this.OBLIQ:
      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);
      x *= sinz * this.cosph0;
      y = (cosz - Math.sin(phi) * this.sinph0) * rh;
      break;
    case this.N_POLE:
      y = -y;
      phi = HALF_PI - phi;
      break;
    case this.S_POLE:
      phi -= HALF_PI;
      break;
    }
    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);
  }
  else {
    ab = 0;
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      x /= this.dd;
      y *= this.dd;
      rho = Math.sqrt(x * x + y * y);
      if (rho < EPSLN) {
        p.x = 0;
        p.y = this.phi0;
        return p;
      }
      sCe = 2 * Math.asin(0.5 * rho / this.rq);
      cCe = Math.cos(sCe);
      x *= (sCe = Math.sin(sCe));
      if (this.mode === this.OBLIQ) {
        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;
        q = this.qp * ab;
        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;
      }
      else {
        ab = y * sCe / rho;
        q = this.qp * ab;
        y = rho * cCe;
      }
    }
    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {
      if (this.mode === this.N_POLE) {
        y = -y;
      }
      q = (x * x + y * y);
      if (!q) {
        p.x = 0;
        p.y = this.phi0;
        return p;
      }
      ab = 1 - q / this.qp;
      if (this.mode === this.S_POLE) {
        ab = -ab;
      }
    }
    lam = Math.atan2(x, y);
    phi = this.authlat(Math.asin(ab), this.apa);
  }


  p.x = adjust_lon(this.long0 + lam);
  p.y = phi;
  return p;
};

/* determine latitude from authalic latitude */
exports.P00 = 0.33333333333333333333;
exports.P01 = 0.17222222222222222222;
exports.P02 = 0.10257936507936507936;
exports.P10 = 0.06388888888888888888;
exports.P11 = 0.06640211640211640211;
exports.P20 = 0.01641501294219154443;

exports.authset = function(es) {
  var t;
  var APA = [];
  APA[0] = es * this.P00;
  t = es * es;
  APA[0] += t * this.P01;
  APA[1] = t * this.P10;
  t *= es;
  APA[0] += t * this.P02;
  APA[1] += t * this.P11;
  APA[2] = t * this.P20;
  return APA;
};

exports.authlat = function(beta, APA) {
  var t = beta + beta;
  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));
};
exports.names = ["Lambert Azimuthal Equal Area", "Lambert_Azimuthal_Equal_Area", "laea"];

},{"../common/adjust_lon":34,"../common/qsfnz":49}],80:[function(require,module,exports){
var EPSLN = 1.0e-10;
var msfnz = require('../common/msfnz');
var tsfnz = require('../common/tsfnz');
var HALF_PI = Math.PI/2;
var sign = require('../common/sign');
var adjust_lon = require('../common/adjust_lon');
var phi2z = require('../common/phi2z');
exports.init = function() {

  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north
  //double c_lat;                   /* center latitude                      */
  //double c_lon;                   /* center longitude                     */
  //double lat1;                    /* first standard parallel              */
  //double lat2;                    /* second standard parallel             */
  //double r_maj;                   /* major axis                           */
  //double r_min;                   /* minor axis                           */
  //double false_east;              /* x offset in meters                   */
  //double false_north;             /* y offset in meters                   */

  if (!this.lat2) {
    this.lat2 = this.lat1;
  } //if lat2 is not defined
  if (!this.k0) {
    this.k0 = 1;
  }
  this.x0 = this.x0 || 0;
  this.y0 = this.y0 || 0;
  // Standard Parallels cannot be equal and on opposite sides of the equator
  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {
    return;
  }

  var temp = this.b / this.a;
  this.e = Math.sqrt(1 - temp * temp);

  var sin1 = Math.sin(this.lat1);
  var cos1 = Math.cos(this.lat1);
  var ms1 = msfnz(this.e, sin1, cos1);
  var ts1 = tsfnz(this.e, this.lat1, sin1);

  var sin2 = Math.sin(this.lat2);
  var cos2 = Math.cos(this.lat2);
  var ms2 = msfnz(this.e, sin2, cos2);
  var ts2 = tsfnz(this.e, this.lat2, sin2);

  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));

  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {
    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);
  }
  else {
    this.ns = sin1;
  }
  if (isNaN(this.ns)) {
    this.ns = sin1;
  }
  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));
  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);
  if (!this.title) {
    this.title = "Lambert Conformal Conic";
  }
};


// Lambert Conformal conic forward equations--mapping lat,long to x,y
// -----------------------------------------------------------------
exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  // singular cases :
  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {
    lat = sign(lat) * (HALF_PI - 2 * EPSLN);
  }

  var con = Math.abs(Math.abs(lat) - HALF_PI);
  var ts, rh1;
  if (con > EPSLN) {
    ts = tsfnz(this.e, lat, Math.sin(lat));
    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);
  }
  else {
    con = lat * this.ns;
    if (con <= 0) {
      return null;
    }
    rh1 = 0;
  }
  var theta = this.ns * adjust_lon(lon - this.long0);
  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;
  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;

  return p;
};

// Lambert Conformal Conic inverse equations--mapping x,y to lat/long
// -----------------------------------------------------------------
exports.inverse = function(p) {

  var rh1, con, ts;
  var lat, lon;
  var x = (p.x - this.x0) / this.k0;
  var y = (this.rh - (p.y - this.y0) / this.k0);
  if (this.ns > 0) {
    rh1 = Math.sqrt(x * x + y * y);
    con = 1;
  }
  else {
    rh1 = -Math.sqrt(x * x + y * y);
    con = -1;
  }
  var theta = 0;
  if (rh1 !== 0) {
    theta = Math.atan2((con * x), (con * y));
  }
  if ((rh1 !== 0) || (this.ns > 0)) {
    con = 1 / this.ns;
    ts = Math.pow((rh1 / (this.a * this.f0)), con);
    lat = phi2z(this.e, ts);
    if (lat === -9999) {
      return null;
    }
  }
  else {
    lat = -HALF_PI;
  }
  lon = adjust_lon(theta / this.ns + this.long0);

  p.x = lon;
  p.y = lat;
  return p;
};

exports.names = ["Lambert Tangential Conformal Conic Projection", "Lambert_Conformal_Conic", "Lambert_Conformal_Conic_2SP", "lcc"];

},{"../common/adjust_lon":34,"../common/msfnz":44,"../common/phi2z":45,"../common/sign":50,"../common/tsfnz":53}],81:[function(require,module,exports){
exports.init = function() {
  //no-op for longlat
};

function identity(pt) {
  return pt;
}
exports.forward = identity;
exports.inverse = identity;
exports.names = ["longlat", "identity"];

},{}],82:[function(require,module,exports){
var msfnz = require('../common/msfnz');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var R2D = 57.29577951308232088;
var adjust_lon = require('../common/adjust_lon');
var FORTPI = Math.PI/4;
var tsfnz = require('../common/tsfnz');
var phi2z = require('../common/phi2z');
exports.init = function() {
  var con = this.b / this.a;
  this.es = 1 - con * con;
  if(!('x0' in this)){
    this.x0 = 0;
  }
  if(!('y0' in this)){
    this.y0 = 0;
  }
  this.e = Math.sqrt(this.es);
  if (this.lat_ts) {
    if (this.sphere) {
      this.k0 = Math.cos(this.lat_ts);
    }
    else {
      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));
    }
  }
  else {
    if (!this.k0) {
      if (this.k) {
        this.k0 = this.k;
      }
      else {
        this.k0 = 1;
      }
    }
  }
};

/* Mercator forward equations--mapping lat,long to x,y
  --------------------------------------------------*/

exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  // convert to radians
  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {
    return null;
  }

  var x, y;
  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {
    return null;
  }
  else {
    if (this.sphere) {
      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);
      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));
    }
    else {
      var sinphi = Math.sin(lat);
      var ts = tsfnz(this.e, lat, sinphi);
      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);
      y = this.y0 - this.a * this.k0 * Math.log(ts);
    }
    p.x = x;
    p.y = y;
    return p;
  }
};


/* Mercator inverse equations--mapping x,y to lat/long
  --------------------------------------------------*/
exports.inverse = function(p) {

  var x = p.x - this.x0;
  var y = p.y - this.y0;
  var lon, lat;

  if (this.sphere) {
    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));
  }
  else {
    var ts = Math.exp(-y / (this.a * this.k0));
    lat = phi2z(this.e, ts);
    if (lat === -9999) {
      return null;
    }
  }
  lon = adjust_lon(this.long0 + x / (this.a * this.k0));

  p.x = lon;
  p.y = lat;
  return p;
};

exports.names = ["Mercator", "Popular Visualisation Pseudo Mercator", "Mercator_1SP", "Mercator_Auxiliary_Sphere", "merc"];

},{"../common/adjust_lon":34,"../common/msfnz":44,"../common/phi2z":45,"../common/tsfnz":53}],83:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
/*
  reference
    "New Equal-Area Map Projections for Noncircular Regions", John P. Snyder,
    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.
  */


/* Initialize the Miller Cylindrical projection
  -------------------------------------------*/
exports.init = function() {
  //no-op
};


/* Miller Cylindrical forward equations--mapping lat,long to x,y
    ------------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  /* Forward equations
      -----------------*/
  var dlon = adjust_lon(lon - this.long0);
  var x = this.x0 + this.a * dlon;
  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;

  p.x = x;
  p.y = y;
  return p;
};

/* Miller Cylindrical inverse equations--mapping x,y to lat/long
    ------------------------------------------------------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;

  var lon = adjust_lon(this.long0 + p.x / this.a);
  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Miller_Cylindrical", "mill"];

},{"../common/adjust_lon":34}],84:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var EPSLN = 1.0e-10;
exports.init = function() {};

/* Mollweide forward equations--mapping lat,long to x,y
    ----------------------------------------------------*/
exports.forward = function(p) {

  /* Forward equations
      -----------------*/
  var lon = p.x;
  var lat = p.y;

  var delta_lon = adjust_lon(lon - this.long0);
  var theta = lat;
  var con = Math.PI * Math.sin(lat);

  /* Iterate using the Newton-Raphson method to find theta
      -----------------------------------------------------*/
  for (var i = 0; true; i++) {
    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));
    theta += delta_theta;
    if (Math.abs(delta_theta) < EPSLN) {
      break;
    }
  }
  theta /= 2;

  /* If the latitude is 90 deg, force the x coordinate to be "0 + false easting"
       this is done here because of precision problems with "cos(theta)"
       --------------------------------------------------------------------------*/
  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {
    delta_lon = 0;
  }
  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;
  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;

  p.x = x;
  p.y = y;
  return p;
};

exports.inverse = function(p) {
  var theta;
  var arg;

  /* Inverse equations
      -----------------*/
  p.x -= this.x0;
  p.y -= this.y0;
  arg = p.y / (1.4142135623731 * this.a);

  /* Because of division by zero problems, 'arg' can not be 1.  Therefore
       a number very close to one is used instead.
       -------------------------------------------------------------------*/
  if (Math.abs(arg) > 0.999999999999) {
    arg = 0.999999999999;
  }
  theta = Math.asin(arg);
  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));
  if (lon < (-Math.PI)) {
    lon = -Math.PI;
  }
  if (lon > Math.PI) {
    lon = Math.PI;
  }
  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;
  if (Math.abs(arg) > 1) {
    arg = 1;
  }
  var lat = Math.asin(arg);

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Mollweide", "moll"];

},{"../common/adjust_lon":34}],85:[function(require,module,exports){
var SEC_TO_RAD = 4.84813681109535993589914102357e-6;
/*
  reference
    Department of Land and Survey Technical Circular 1973/32
      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf
    OSG Technical Report 4.1
      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf
  */

/**
 * iterations: Number of iterations to refine inverse transform.
 *     0 -> km accuracy
 *     1 -> m accuracy -- suitable for most mapping applications
 *     2 -> mm accuracy
 */
exports.iterations = 1;

exports.init = function() {
  this.A = [];
  this.A[1] = 0.6399175073;
  this.A[2] = -0.1358797613;
  this.A[3] = 0.063294409;
  this.A[4] = -0.02526853;
  this.A[5] = 0.0117879;
  this.A[6] = -0.0055161;
  this.A[7] = 0.0026906;
  this.A[8] = -0.001333;
  this.A[9] = 0.00067;
  this.A[10] = -0.00034;

  this.B_re = [];
  this.B_im = [];
  this.B_re[1] = 0.7557853228;
  this.B_im[1] = 0;
  this.B_re[2] = 0.249204646;
  this.B_im[2] = 0.003371507;
  this.B_re[3] = -0.001541739;
  this.B_im[3] = 0.041058560;
  this.B_re[4] = -0.10162907;
  this.B_im[4] = 0.01727609;
  this.B_re[5] = -0.26623489;
  this.B_im[5] = -0.36249218;
  this.B_re[6] = -0.6870983;
  this.B_im[6] = -1.1651967;

  this.C_re = [];
  this.C_im = [];
  this.C_re[1] = 1.3231270439;
  this.C_im[1] = 0;
  this.C_re[2] = -0.577245789;
  this.C_im[2] = -0.007809598;
  this.C_re[3] = 0.508307513;
  this.C_im[3] = -0.112208952;
  this.C_re[4] = -0.15094762;
  this.C_im[4] = 0.18200602;
  this.C_re[5] = 1.01418179;
  this.C_im[5] = 1.64497696;
  this.C_re[6] = 1.9660549;
  this.C_im[6] = 2.5127645;

  this.D = [];
  this.D[1] = 1.5627014243;
  this.D[2] = 0.5185406398;
  this.D[3] = -0.03333098;
  this.D[4] = -0.1052906;
  this.D[5] = -0.0368594;
  this.D[6] = 0.007317;
  this.D[7] = 0.01220;
  this.D[8] = 0.00394;
  this.D[9] = -0.0013;
};

/**
    New Zealand Map Grid Forward  - long/lat to x/y
    long/lat in radians
  */
exports.forward = function(p) {
  var n;
  var lon = p.x;
  var lat = p.y;

  var delta_lat = lat - this.lat0;
  var delta_lon = lon - this.long0;

  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda
  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.
  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;
  var d_lambda = delta_lon;
  var d_phi_n = 1; // d_phi^0

  var d_psi = 0;
  for (n = 1; n <= 10; n++) {
    d_phi_n = d_phi_n * d_phi;
    d_psi = d_psi + this.A[n] * d_phi_n;
  }

  // 2. Calculate theta
  var th_re = d_psi;
  var th_im = d_lambda;

  // 3. Calculate z
  var th_n_re = 1;
  var th_n_im = 0; // theta^0
  var th_n_re1;
  var th_n_im1;

  var z_re = 0;
  var z_im = 0;
  for (n = 1; n <= 6; n++) {
    th_n_re1 = th_n_re * th_re - th_n_im * th_im;
    th_n_im1 = th_n_im * th_re + th_n_re * th_im;
    th_n_re = th_n_re1;
    th_n_im = th_n_im1;
    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;
    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;
  }

  // 4. Calculate easting and northing
  p.x = (z_im * this.a) + this.x0;
  p.y = (z_re * this.a) + this.y0;

  return p;
};


/**
    New Zealand Map Grid Inverse  -  x/y to long/lat
  */
exports.inverse = function(p) {
  var n;
  var x = p.x;
  var y = p.y;

  var delta_x = x - this.x0;
  var delta_y = y - this.y0;

  // 1. Calculate z
  var z_re = delta_y / this.a;
  var z_im = delta_x / this.a;

  // 2a. Calculate theta - first approximation gives km accuracy
  var z_n_re = 1;
  var z_n_im = 0; // z^0
  var z_n_re1;
  var z_n_im1;

  var th_re = 0;
  var th_im = 0;
  for (n = 1; n <= 6; n++) {
    z_n_re1 = z_n_re * z_re - z_n_im * z_im;
    z_n_im1 = z_n_im * z_re + z_n_re * z_im;
    z_n_re = z_n_re1;
    z_n_im = z_n_im1;
    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;
    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;
  }

  // 2b. Iterate to refine the accuracy of the calculation
  //        0 iterations gives km accuracy
  //        1 iteration gives m accuracy -- good enough for most mapping applications
  //        2 iterations bives mm accuracy
  for (var i = 0; i < this.iterations; i++) {
    var th_n_re = th_re;
    var th_n_im = th_im;
    var th_n_re1;
    var th_n_im1;

    var num_re = z_re;
    var num_im = z_im;
    for (n = 2; n <= 6; n++) {
      th_n_re1 = th_n_re * th_re - th_n_im * th_im;
      th_n_im1 = th_n_im * th_re + th_n_re * th_im;
      th_n_re = th_n_re1;
      th_n_im = th_n_im1;
      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);
      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);
    }

    th_n_re = 1;
    th_n_im = 0;
    var den_re = this.B_re[1];
    var den_im = this.B_im[1];
    for (n = 2; n <= 6; n++) {
      th_n_re1 = th_n_re * th_re - th_n_im * th_im;
      th_n_im1 = th_n_im * th_re + th_n_re * th_im;
      th_n_re = th_n_re1;
      th_n_im = th_n_im1;
      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);
      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);
    }

    // Complex division
    var den2 = den_re * den_re + den_im * den_im;
    th_re = (num_re * den_re + num_im * den_im) / den2;
    th_im = (num_im * den_re - num_re * den_im) / den2;
  }

  // 3. Calculate d_phi              ...                                    // and d_lambda
  var d_psi = th_re;
  var d_lambda = th_im;
  var d_psi_n = 1; // d_psi^0

  var d_phi = 0;
  for (n = 1; n <= 9; n++) {
    d_psi_n = d_psi_n * d_psi;
    d_phi = d_phi + this.D[n] * d_psi_n;
  }

  // 4. Calculate latitude and longitude
  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.
  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);
  var lon = this.long0 + d_lambda;

  p.x = lon;
  p.y = lat;

  return p;
};
exports.names = ["New_Zealand_Map_Grid", "nzmg"];
},{}],86:[function(require,module,exports){
var tsfnz = require('../common/tsfnz');
var adjust_lon = require('../common/adjust_lon');
var phi2z = require('../common/phi2z');
var HALF_PI = Math.PI/2;
var FORTPI = Math.PI/4;
var EPSLN = 1.0e-10;

/* Initialize the Oblique Mercator  projection
    ------------------------------------------*/
exports.init = function() {
  this.no_off = this.no_off || false;
  this.no_rot = this.no_rot || false;

  if (isNaN(this.k0)) {
    this.k0 = 1;
  }
  var sinlat = Math.sin(this.lat0);
  var coslat = Math.cos(this.lat0);
  var con = this.e * sinlat;

  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));
  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);
  var t0 = tsfnz(this.e, this.lat0, sinlat);
  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));
  if (dl * dl < 1) {
    dl = 1;
  }
  var fl;
  var gl;
  if (!isNaN(this.longc)) {
    //Central point and azimuth method

    if (this.lat0 >= 0) {
      fl = dl + Math.sqrt(dl * dl - 1);
    }
    else {
      fl = dl - Math.sqrt(dl * dl - 1);
    }
    this.el = fl * Math.pow(t0, this.bl);
    gl = 0.5 * (fl - 1 / fl);
    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);
    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;

  }
  else {
    //2 points method
    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));
    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));
    if (this.lat0 >= 0) {
      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);
    }
    else {
      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);
    }
    var hl = Math.pow(t1, this.bl);
    var ll = Math.pow(t2, this.bl);
    fl = this.el / hl;
    gl = 0.5 * (fl - 1 / fl);
    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);
    var pl = (ll - hl) / (ll + hl);
    var dlon12 = adjust_lon(this.long1 - this.long2);
    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;
    this.long0 = adjust_lon(this.long0);
    var dlon10 = adjust_lon(this.long1 - this.long0);
    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);
    this.alpha = Math.asin(dl * Math.sin(this.gamma0));
  }

  if (this.no_off) {
    this.uc = 0;
  }
  else {
    if (this.lat0 >= 0) {
      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));
    }
    else {
      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));
    }
  }

};


/* Oblique Mercator forward equations--mapping lat,long to x,y
    ----------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var dlon = adjust_lon(lon - this.long0);
  var us, vs;
  var con;
  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {
    if (lat > 0) {
      con = -1;
    }
    else {
      con = 1;
    }
    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));
    us = -1 * con * HALF_PI * this.al / this.bl;
  }
  else {
    var t = tsfnz(this.e, lat, Math.sin(lat));
    var ql = this.el / Math.pow(t, this.bl);
    var sl = 0.5 * (ql - 1 / ql);
    var tl = 0.5 * (ql + 1 / ql);
    var vl = Math.sin(this.bl * (dlon));
    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;
    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {
      vs = Number.POSITIVE_INFINITY;
    }
    else {
      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;
    }
    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {
      us = this.al * this.bl * (dlon);
    }
    else {
      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;
    }
  }

  if (this.no_rot) {
    p.x = this.x0 + us;
    p.y = this.y0 + vs;
  }
  else {

    us -= this.uc;
    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);
    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);
  }
  return p;
};

exports.inverse = function(p) {
  var us, vs;
  if (this.no_rot) {
    vs = p.y - this.y0;
    us = p.x - this.x0;
  }
  else {
    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);
    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);
    us += this.uc;
  }
  var qp = Math.exp(-1 * this.bl * vs / this.al);
  var sp = 0.5 * (qp - 1 / qp);
  var tp = 0.5 * (qp + 1 / qp);
  var vp = Math.sin(this.bl * us / this.al);
  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;
  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);
  if (Math.abs(up - 1) < EPSLN) {
    p.x = this.long0;
    p.y = HALF_PI;
  }
  else if (Math.abs(up + 1) < EPSLN) {
    p.x = this.long0;
    p.y = -1 * HALF_PI;
  }
  else {
    p.y = phi2z(this.e, ts);
    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);
  }
  return p;
};

exports.names = ["Hotine_Oblique_Mercator", "Hotine Oblique Mercator", "Hotine_Oblique_Mercator_Azimuth_Natural_Origin", "Hotine_Oblique_Mercator_Azimuth_Center", "omerc"];
},{"../common/adjust_lon":34,"../common/phi2z":45,"../common/tsfnz":53}],87:[function(require,module,exports){
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var mlfn = require('../common/mlfn');
var EPSLN = 1.0e-10;
var gN = require('../common/gN');
var MAX_ITER = 20;
exports.init = function() {
  /* Place parameters in static storage for common use
      -------------------------------------------------*/
  this.temp = this.b / this.a;
  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles
  this.e = Math.sqrt(this.es);
  this.e0 = e0fn(this.es);
  this.e1 = e1fn(this.es);
  this.e2 = e2fn(this.es);
  this.e3 = e3fn(this.es);
  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas
};


/* Polyconic forward equations--mapping lat,long to x,y
    ---------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var x, y, el;
  var dlon = adjust_lon(lon - this.long0);
  el = dlon * Math.sin(lat);
  if (this.sphere) {
    if (Math.abs(lat) <= EPSLN) {
      x = this.a * dlon;
      y = -1 * this.a * this.lat0;
    }
    else {
      x = this.a * Math.sin(el) / Math.tan(lat);
      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));
    }
  }
  else {
    if (Math.abs(lat) <= EPSLN) {
      x = this.a * dlon;
      y = -1 * this.ml0;
    }
    else {
      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);
      x = nl * Math.sin(el);
      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));
    }

  }
  p.x = x + this.x0;
  p.y = y + this.y0;
  return p;
};


/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  var lon, lat, x, y, i;
  var al, bl;
  var phi, dphi;
  x = p.x - this.x0;
  y = p.y - this.y0;

  if (this.sphere) {
    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {
      lon = adjust_lon(x / this.a + this.long0);
      lat = 0;
    }
    else {
      al = this.lat0 + y / this.a;
      bl = x * x / this.a / this.a + al * al;
      phi = al;
      var tanphi;
      for (i = MAX_ITER; i; --i) {
        tanphi = Math.tan(phi);
        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);
        phi += dphi;
        if (Math.abs(dphi) <= EPSLN) {
          lat = phi;
          break;
        }
      }
      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));
    }
  }
  else {
    if (Math.abs(y + this.ml0) <= EPSLN) {
      lat = 0;
      lon = adjust_lon(this.long0 + x / this.a);
    }
    else {

      al = (this.ml0 + y) / this.a;
      bl = x * x / this.a / this.a + al * al;
      phi = al;
      var cl, mln, mlnp, ma;
      var con;
      for (i = MAX_ITER; i; --i) {
        con = this.e * Math.sin(phi);
        cl = Math.sqrt(1 - con * con) * Math.tan(phi);
        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);
        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);
        ma = mln / this.a;
        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);
        phi -= dphi;
        if (Math.abs(dphi) <= EPSLN) {
          lat = phi;
          break;
        }
      }

      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);
      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);
      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));
    }
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Polyconic", "poly"];
},{"../common/adjust_lat":33,"../common/adjust_lon":34,"../common/e0fn":36,"../common/e1fn":37,"../common/e2fn":38,"../common/e3fn":39,"../common/gN":40,"../common/mlfn":43}],88:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var pj_enfn = require('../common/pj_enfn');
var MAX_ITER = 20;
var pj_mlfn = require('../common/pj_mlfn');
var pj_inv_mlfn = require('../common/pj_inv_mlfn');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var asinz = require('../common/asinz');
exports.init = function() {
  /* Place parameters in static storage for common use
    -------------------------------------------------*/


  if (!this.sphere) {
    this.en = pj_enfn(this.es);
  }
  else {
    this.n = 1;
    this.m = 0;
    this.es = 0;
    this.C_y = Math.sqrt((this.m + 1) / this.n);
    this.C_x = this.C_y / (this.m + 1);
  }

};

/* Sinusoidal forward equations--mapping lat,long to x,y
  -----------------------------------------------------*/
exports.forward = function(p) {
  var x, y;
  var lon = p.x;
  var lat = p.y;
  /* Forward equations
    -----------------*/
  lon = adjust_lon(lon - this.long0);

  if (this.sphere) {
    if (!this.m) {
      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;
    }
    else {
      var k = this.n * Math.sin(lat);
      for (var i = MAX_ITER; i; --i) {
        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));
        lat -= V;
        if (Math.abs(V) < EPSLN) {
          break;
        }
      }
    }
    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));
    y = this.a * this.C_y * lat;

  }
  else {

    var s = Math.sin(lat);
    var c = Math.cos(lat);
    y = this.a * pj_mlfn(lat, s, c, this.en);
    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);
  }

  p.x = x;
  p.y = y;
  return p;
};

exports.inverse = function(p) {
  var lat, temp, lon, s;

  p.x -= this.x0;
  lon = p.x / this.a;
  p.y -= this.y0;
  lat = p.y / this.a;

  if (this.sphere) {
    lat /= this.C_y;
    lon = lon / (this.C_x * (this.m + Math.cos(lat)));
    if (this.m) {
      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);
    }
    else if (this.n !== 1) {
      lat = asinz(Math.sin(lat) / this.n);
    }
    lon = adjust_lon(lon + this.long0);
    lat = adjust_lat(lat);
  }
  else {
    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);
    s = Math.abs(lat);
    if (s < HALF_PI) {
      s = Math.sin(lat);
      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));
      //temp = this.long0 + p.x / (this.a * Math.cos(lat));
      lon = adjust_lon(temp);
    }
    else if ((s - EPSLN) < HALF_PI) {
      lon = this.long0;
    }
  }
  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Sinusoidal", "sinu"];
},{"../common/adjust_lat":33,"../common/adjust_lon":34,"../common/asinz":35,"../common/pj_enfn":46,"../common/pj_inv_mlfn":47,"../common/pj_mlfn":48}],89:[function(require,module,exports){
/*
  references:
    Formules et constantes pour le Calcul pour la
    projection cylindrique conforme à axe oblique et pour la transformation entre
    des systèmes de référence.
    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf
  */
exports.init = function() {
  var phy0 = this.lat0;
  this.lambda0 = this.long0;
  var sinPhy0 = Math.sin(phy0);
  var semiMajorAxis = this.a;
  var invF = this.rf;
  var flattening = 1 / invF;
  var e2 = 2 * flattening - Math.pow(flattening, 2);
  var e = this.e = Math.sqrt(e2);
  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));
  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));
  this.b0 = Math.asin(sinPhy0 / this.alpha);
  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));
  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));
  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));
  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;
};


exports.forward = function(p) {
  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));
  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));
  var S = -this.alpha * (Sa1 + Sa2) + this.K;

  // spheric latitude
  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);

  // spheric longitude
  var I = this.alpha * (p.x - this.lambda0);

  // psoeudo equatorial rotation
  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));

  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));

  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;
  p.x = this.R * rotI + this.x0;
  return p;
};

exports.inverse = function(p) {
  var Y = p.x - this.x0;
  var X = p.y - this.y0;

  var rotI = Y / this.R;
  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);

  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));
  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));

  var lambda = this.lambda0 + I / this.alpha;

  var S = 0;
  var phy = b;
  var prevPhy = -1000;
  var iteration = 0;
  while (Math.abs(phy - prevPhy) > 0.0000001) {
    if (++iteration > 20) {
      //...reportError("omercFwdInfinity");
      return;
    }
    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));
    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));
    prevPhy = phy;
    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;
  }

  p.x = lambda;
  p.y = phy;
  return p;
};

exports.names = ["somerc"];

},{}],90:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var sign = require('../common/sign');
var msfnz = require('../common/msfnz');
var tsfnz = require('../common/tsfnz');
var phi2z = require('../common/phi2z');
var adjust_lon = require('../common/adjust_lon');
exports.ssfn_ = function(phit, sinphi, eccen) {
  sinphi *= eccen;
  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));
};

exports.init = function() {
  this.coslat0 = Math.cos(this.lat0);
  this.sinlat0 = Math.sin(this.lat0);
  if (this.sphere) {
    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {
      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));
    }
  }
  else {
    if (Math.abs(this.coslat0) <= EPSLN) {
      if (this.lat0 > 0) {
        //North pole
        //trace('stere:north pole');
        this.con = 1;
      }
      else {
        //South pole
        //trace('stere:south pole');
        this.con = -1;
      }
    }
    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));
    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {
      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));
    }
    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);
    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;
    this.cosX0 = Math.cos(this.X0);
    this.sinX0 = Math.sin(this.X0);
  }
};

// Stereographic forward equations--mapping lat,long to x,y
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var sinlat = Math.sin(lat);
  var coslat = Math.cos(lat);
  var A, X, sinX, cosX, ts, rh;
  var dlon = adjust_lon(lon - this.long0);

  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {
    //case of the origine point
    //trace('stere:this is the origin point');
    p.x = NaN;
    p.y = NaN;
    return p;
  }
  if (this.sphere) {
    //trace('stere:sphere case');
    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));
    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;
    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;
    return p;
  }
  else {
    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;
    cosX = Math.cos(X);
    sinX = Math.sin(X);
    if (Math.abs(this.coslat0) <= EPSLN) {
      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);
      rh = 2 * this.a * this.k0 * ts / this.cons;
      p.x = this.x0 + rh * Math.sin(lon - this.long0);
      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);
      //trace(p.toString());
      return p;
    }
    else if (Math.abs(this.sinlat0) < EPSLN) {
      //Eq
      //trace('stere:equateur');
      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));
      p.y = A * sinX;
    }
    else {
      //other case
      //trace('stere:normal case');
      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));
      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;
    }
    p.x = A * cosX * Math.sin(dlon) + this.x0;
  }
  //trace(p.toString());
  return p;
};


//* Stereographic inverse equations--mapping x,y to lat/long
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var lon, lat, ts, ce, Chi;
  var rh = Math.sqrt(p.x * p.x + p.y * p.y);
  if (this.sphere) {
    var c = 2 * Math.atan(rh / (0.5 * this.a * this.k0));
    lon = this.long0;
    lat = this.lat0;
    if (rh <= EPSLN) {
      p.x = lon;
      p.y = lat;
      return p;
    }
    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);
    if (Math.abs(this.coslat0) < EPSLN) {
      if (this.lat0 > 0) {
        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));
      }
      else {
        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));
      }
    }
    else {
      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));
    }
    p.x = lon;
    p.y = lat;
    return p;
  }
  else {
    if (Math.abs(this.coslat0) <= EPSLN) {
      if (rh <= EPSLN) {
        lat = this.lat0;
        lon = this.long0;
        p.x = lon;
        p.y = lat;
        //trace(p.toString());
        return p;
      }
      p.x *= this.con;
      p.y *= this.con;
      ts = rh * this.cons / (2 * this.a * this.k0);
      lat = this.con * phi2z(this.e, ts);
      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));
    }
    else {
      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));
      lon = this.long0;
      if (rh <= EPSLN) {
        Chi = this.X0;
      }
      else {
        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);
        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));
      }
      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));
    }
  }
  p.x = lon;
  p.y = lat;

  //trace(p.toString());
  return p;

};
exports.names = ["stere", "Stereographic_South_Pole", "Polar Stereographic (variant B)"];

},{"../common/adjust_lon":34,"../common/msfnz":44,"../common/phi2z":45,"../common/sign":50,"../common/tsfnz":53}],91:[function(require,module,exports){
var gauss = require('./gauss');
var adjust_lon = require('../common/adjust_lon');
exports.init = function() {
  gauss.init.apply(this);
  if (!this.rc) {
    return;
  }
  this.sinc0 = Math.sin(this.phic0);
  this.cosc0 = Math.cos(this.phic0);
  this.R2 = 2 * this.rc;
  if (!this.title) {
    this.title = "Oblique Stereographic Alternative";
  }
};

exports.forward = function(p) {
  var sinc, cosc, cosl, k;
  p.x = adjust_lon(p.x - this.long0);
  gauss.forward.apply(this, [p]);
  sinc = Math.sin(p.y);
  cosc = Math.cos(p.y);
  cosl = Math.cos(p.x);
  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);
  p.x = k * cosc * Math.sin(p.x);
  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);
  p.x = this.a * p.x + this.x0;
  p.y = this.a * p.y + this.y0;
  return p;
};

exports.inverse = function(p) {
  var sinc, cosc, lon, lat, rho;
  p.x = (p.x - this.x0) / this.a;
  p.y = (p.y - this.y0) / this.a;

  p.x /= this.k0;
  p.y /= this.k0;
  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {
    var c = 2 * Math.atan2(rho, this.R2);
    sinc = Math.sin(c);
    cosc = Math.cos(c);
    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);
    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);
  }
  else {
    lat = this.phic0;
    lon = 0;
  }

  p.x = lon;
  p.y = lat;
  gauss.inverse.apply(this, [p]);
  p.x = adjust_lon(p.x + this.long0);
  return p;
};

exports.names = ["Stereographic_North_Pole", "Oblique_Stereographic", "Polar_Stereographic", "sterea","Oblique Stereographic Alternative"];

},{"../common/adjust_lon":34,"./gauss":76}],92:[function(require,module,exports){
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var mlfn = require('../common/mlfn');
var adjust_lon = require('../common/adjust_lon');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var sign = require('../common/sign');
var asinz = require('../common/asinz');

exports.init = function() {
  this.e0 = e0fn(this.es);
  this.e1 = e1fn(this.es);
  this.e2 = e2fn(this.es);
  this.e3 = e3fn(this.es);
  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);
};

/**
    Transverse Mercator Forward  - long/lat to x/y
    long/lat in radians
  */
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;

  var delta_lon = adjust_lon(lon - this.long0);
  var con;
  var x, y;
  var sin_phi = Math.sin(lat);
  var cos_phi = Math.cos(lat);

  if (this.sphere) {
    var b = cos_phi * Math.sin(delta_lon);
    if ((Math.abs(Math.abs(b) - 1)) < 0.0000000001) {
      return (93);
    }
    else {
      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b));
      con = Math.acos(cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - b * b));
      if (lat < 0) {
        con = -con;
      }
      y = this.a * this.k0 * (con - this.lat0);
    }
  }
  else {
    var al = cos_phi * delta_lon;
    var als = Math.pow(al, 2);
    var c = this.ep2 * Math.pow(cos_phi, 2);
    var tq = Math.tan(lat);
    var t = Math.pow(tq, 2);
    con = 1 - this.es * Math.pow(sin_phi, 2);
    var n = this.a / Math.sqrt(con);
    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat);

    x = this.k0 * n * al * (1 + als / 6 * (1 - t + c + als / 20 * (5 - 18 * t + Math.pow(t, 2) + 72 * c - 58 * this.ep2))) + this.x0;
    y = this.k0 * (ml - this.ml0 + n * tq * (als * (0.5 + als / 24 * (5 - t + 9 * c + 4 * Math.pow(c, 2) + als / 30 * (61 - 58 * t + Math.pow(t, 2) + 600 * c - 330 * this.ep2))))) + this.y0;

  }
  p.x = x;
  p.y = y;
  return p;
};

/**
    Transverse Mercator Inverse  -  x/y to long/lat
  */
exports.inverse = function(p) {
  var con, phi;
  var delta_phi;
  var i;
  var max_iter = 6;
  var lat, lon;

  if (this.sphere) {
    var f = Math.exp(p.x / (this.a * this.k0));
    var g = 0.5 * (f - 1 / f);
    var temp = this.lat0 + p.y / (this.a * this.k0);
    var h = Math.cos(temp);
    con = Math.sqrt((1 - h * h) / (1 + g * g));
    lat = asinz(con);
    if (temp < 0) {
      lat = -lat;
    }
    if ((g === 0) && (h === 0)) {
      lon = this.long0;
    }
    else {
      lon = adjust_lon(Math.atan2(g, h) + this.long0);
    }
  }
  else { // ellipsoidal form
    var x = p.x - this.x0;
    var y = p.y - this.y0;

    con = (this.ml0 + y / this.k0) / this.a;
    phi = con;
    for (i = 0; true; i++) {
      delta_phi = ((con + this.e1 * Math.sin(2 * phi) - this.e2 * Math.sin(4 * phi) + this.e3 * Math.sin(6 * phi)) / this.e0) - phi;
      phi += delta_phi;
      if (Math.abs(delta_phi) <= EPSLN) {
        break;
      }
      if (i >= max_iter) {
        return (95);
      }
    } // for()
    if (Math.abs(phi) < HALF_PI) {
      var sin_phi = Math.sin(phi);
      var cos_phi = Math.cos(phi);
      var tan_phi = Math.tan(phi);
      var c = this.ep2 * Math.pow(cos_phi, 2);
      var cs = Math.pow(c, 2);
      var t = Math.pow(tan_phi, 2);
      var ts = Math.pow(t, 2);
      con = 1 - this.es * Math.pow(sin_phi, 2);
      var n = this.a / Math.sqrt(con);
      var r = n * (1 - this.es) / con;
      var d = x / (n * this.k0);
      var ds = Math.pow(d, 2);
      lat = phi - (n * tan_phi * ds / r) * (0.5 - ds / 24 * (5 + 3 * t + 10 * c - 4 * cs - 9 * this.ep2 - ds / 30 * (61 + 90 * t + 298 * c + 45 * ts - 252 * this.ep2 - 3 * cs)));
      lon = adjust_lon(this.long0 + (d * (1 - ds / 6 * (1 + 2 * t + c - ds / 20 * (5 - 2 * c + 28 * t - 3 * cs + 8 * this.ep2 + 24 * ts))) / cos_phi));
    }
    else {
      lat = HALF_PI * sign(y);
      lon = this.long0;
    }
  }
  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Transverse_Mercator", "Transverse Mercator", "tmerc"];

},{"../common/adjust_lon":34,"../common/asinz":35,"../common/e0fn":36,"../common/e1fn":37,"../common/e2fn":38,"../common/e3fn":39,"../common/mlfn":43,"../common/sign":50}],93:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var tmerc = require('./tmerc');
exports.dependsOn = 'tmerc';
exports.init = function() {
  if (!this.zone) {
    return;
  }
  this.lat0 = 0;
  this.long0 = ((6 * Math.abs(this.zone)) - 183) * D2R;
  this.x0 = 500000;
  this.y0 = this.utmSouth ? 10000000 : 0;
  this.k0 = 0.9996;

  tmerc.init.apply(this);
  this.forward = tmerc.forward;
  this.inverse = tmerc.inverse;
};
exports.names = ["Universal Transverse Mercator System", "utm"];

},{"./tmerc":92}],94:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var asinz = require('../common/asinz');
/* Initialize the Van Der Grinten projection
  ----------------------------------------*/
exports.init = function() {
  //this.R = 6370997; //Radius of earth
  this.R = this.a;
};

exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  /* Forward equations
    -----------------*/
  var dlon = adjust_lon(lon - this.long0);
  var x, y;

  if (Math.abs(lat) <= EPSLN) {
    x = this.x0 + this.R * dlon;
    y = this.y0;
  }
  var theta = asinz(2 * Math.abs(lat / Math.PI));
  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {
    x = this.x0;
    if (lat >= 0) {
      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);
    }
    else {
      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);
    }
    //  return(OK);
  }
  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));
  var asq = al * al;
  var sinth = Math.sin(theta);
  var costh = Math.cos(theta);

  var g = costh / (sinth + costh - 1);
  var gsq = g * g;
  var m = g * (2 / sinth - 1);
  var msq = m * m;
  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);
  if (dlon < 0) {
    con = -con;
  }
  x = this.x0 + con;
  //con = Math.abs(con / (Math.PI * this.R));
  var q = asq + g;
  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);
  if (lat >= 0) {
    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);
    y = this.y0 + con;
  }
  else {
    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);
    y = this.y0 - con;
  }
  p.x = x;
  p.y = y;
  return p;
};

/* Van Der Grinten inverse equations--mapping x,y to lat/long
  ---------------------------------------------------------*/
exports.inverse = function(p) {
  var lon, lat;
  var xx, yy, xys, c1, c2, c3;
  var a1;
  var m1;
  var con;
  var th1;
  var d;

  /* inverse equations
    -----------------*/
  p.x -= this.x0;
  p.y -= this.y0;
  con = Math.PI * this.R;
  xx = p.x / con;
  yy = p.y / con;
  xys = xx * xx + yy * yy;
  c1 = -Math.abs(yy) * (1 + xys);
  c2 = c1 - 2 * yy * yy + xx * xx;
  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;
  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;
  a1 = (c1 - c2 * c2 / 3 / c3) / c3;
  m1 = 2 * Math.sqrt(-a1 / 3);
  con = ((3 * d) / a1) / m1;
  if (Math.abs(con) > 1) {
    if (con >= 0) {
      con = 1;
    }
    else {
      con = -1;
    }
  }
  th1 = Math.acos(con) / 3;
  if (p.y >= 0) {
    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;
  }
  else {
    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;
  }

  if (Math.abs(xx) < EPSLN) {
    lon = this.long0;
  }
  else {
    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Van_der_Grinten_I", "VanDerGrinten", "vandg"];
},{"../common/adjust_lon":34,"../common/asinz":35}],95:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var R2D = 57.29577951308232088;
var PJD_3PARAM = 1;
var PJD_7PARAM = 2;
var datum_transform = require('./datum_transform');
var adjust_axis = require('./adjust_axis');
var proj = require('./Proj');
var toPoint = require('./common/toPoint');
module.exports = function transform(source, dest, point) {
  var wgs84;
  if (Array.isArray(point)) {
    point = toPoint(point);
  }
  function checkNotWGS(source, dest) {
    return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== "WGS84");
  }

  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84
  if (source.datum && dest.datum && (checkNotWGS(source, dest) || checkNotWGS(dest, source))) {
    wgs84 = new proj('WGS84');
    transform(source, wgs84, point);
    source = wgs84;
  }
  // DGR, 2010/11/12
  if (source.axis !== "enu") {
    adjust_axis(source, false, point);
  }
  // Transform source points to long/lat, if they aren't already.
  if (source.projName === "longlat") {
    point.x *= D2R; // convert degrees to radians
    point.y *= D2R;
  }
  else {
    if (source.to_meter) {
      point.x *= source.to_meter;
      point.y *= source.to_meter;
    }
    source.inverse(point); // Convert Cartesian to longlat
  }
  // Adjust for the prime meridian if necessary
  if (source.from_greenwich) {
    point.x += source.from_greenwich;
  }

  // Convert datums if needed, and if possible.
  point = datum_transform(source.datum, dest.datum, point);

  // Adjust for the prime meridian if necessary
  if (dest.from_greenwich) {
    point.x -= dest.from_greenwich;
  }

  if (dest.projName === "longlat") {
    // convert radians to decimal degrees
    point.x *= R2D;
    point.y *= R2D;
  }
  else { // else project
    dest.forward(point);
    if (dest.to_meter) {
      point.x /= dest.to_meter;
      point.y /= dest.to_meter;
    }
  }

  // DGR, 2010/11/12
  if (dest.axis !== "enu") {
    adjust_axis(dest, true, point);
  }

  return point;
};
},{"./Proj":31,"./adjust_axis":32,"./common/toPoint":52,"./datum_transform":60}],96:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var extend = require('./extend');

function mapit(obj, key, v) {
  obj[key] = v.map(function(aa) {
    var o = {};
    sExpr(aa, o);
    return o;
  }).reduce(function(a, b) {
    return extend(a, b);
  }, {});
}

function sExpr(v, obj) {
  var key;
  if (!Array.isArray(v)) {
    obj[v] = true;
    return;
  }
  else {
    key = v.shift();
    if (key === 'PARAMETER') {
      key = v.shift();
    }
    if (v.length === 1) {
      if (Array.isArray(v[0])) {
        obj[key] = {};
        sExpr(v[0], obj[key]);
      }
      else {
        obj[key] = v[0];
      }
    }
    else if (!v.length) {
      obj[key] = true;
    }
    else if (key === 'TOWGS84') {
      obj[key] = v;
    }
    else {
      obj[key] = {};
      if (['UNIT', 'PRIMEM', 'VERT_DATUM'].indexOf(key) > -1) {
        obj[key] = {
          name: v[0].toLowerCase(),
          convert: v[1]
        };
        if (v.length === 3) {
          obj[key].auth = v[2];
        }
      }
      else if (key === 'SPHEROID') {
        obj[key] = {
          name: v[0],
          a: v[1],
          rf: v[2]
        };
        if (v.length === 4) {
          obj[key].auth = v[3];
        }
      }
      else if (['GEOGCS', 'GEOCCS', 'DATUM', 'VERT_CS', 'COMPD_CS', 'LOCAL_CS', 'FITTED_CS', 'LOCAL_DATUM'].indexOf(key) > -1) {
        v[0] = ['name', v[0]];
        mapit(obj, key, v);
      }
      else if (v.every(function(aa) {
        return Array.isArray(aa);
      })) {
        mapit(obj, key, v);
      }
      else {
        sExpr(v, obj[key]);
      }
    }
  }
}

function rename(obj, params) {
  var outName = params[0];
  var inName = params[1];
  if (!(outName in obj) && (inName in obj)) {
    obj[outName] = obj[inName];
    if (params.length === 3) {
      obj[outName] = params[2](obj[outName]);
    }
  }
}

function d2r(input) {
  return input * D2R;
}

function cleanWKT(wkt) {
  if (wkt.type === 'GEOGCS') {
    wkt.projName = 'longlat';
  }
  else if (wkt.type === 'LOCAL_CS') {
    wkt.projName = 'identity';
    wkt.local = true;
  }
  else {
    if (typeof wkt.PROJECTION === "object") {
      wkt.projName = Object.keys(wkt.PROJECTION)[0];
    }
    else {
      wkt.projName = wkt.PROJECTION;
    }
  }
  if (wkt.UNIT) {
    wkt.units = wkt.UNIT.name.toLowerCase();
    if (wkt.units === 'metre') {
      wkt.units = 'meter';
    }
    if (wkt.UNIT.convert) {
      wkt.to_meter = parseFloat(wkt.UNIT.convert, 10);
    }
  }

  if (wkt.GEOGCS) {
    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){
    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;
    //}
    if (wkt.GEOGCS.DATUM) {
      wkt.datumCode = wkt.GEOGCS.DATUM.name.toLowerCase();
    }
    else {
      wkt.datumCode = wkt.GEOGCS.name.toLowerCase();
    }
    if (wkt.datumCode.slice(0, 2) === 'd_') {
      wkt.datumCode = wkt.datumCode.slice(2);
    }
    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {
      wkt.datumCode = 'nzgd49';
    }
    if (wkt.datumCode === "wgs_1984") {
      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {
        wkt.sphere = true;
      }
      wkt.datumCode = 'wgs84';
    }
    if (wkt.datumCode.slice(-6) === '_ferro') {
      wkt.datumCode = wkt.datumCode.slice(0, - 6);
    }
    if (wkt.datumCode.slice(-8) === '_jakarta') {
      wkt.datumCode = wkt.datumCode.slice(0, - 8);
    }
    if (~wkt.datumCode.indexOf('belge')) {
      wkt.datumCode = "rnb72";
    }
    if (wkt.GEOGCS.DATUM && wkt.GEOGCS.DATUM.SPHEROID) {
      wkt.ellps = wkt.GEOGCS.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\_18/, 'clrk');
      if (wkt.ellps.toLowerCase().slice(0, 13) === "international") {
        wkt.ellps = 'intl';
      }

      wkt.a = wkt.GEOGCS.DATUM.SPHEROID.a;
      wkt.rf = parseFloat(wkt.GEOGCS.DATUM.SPHEROID.rf, 10);
    }
    if (~wkt.datumCode.indexOf('osgb_1936')) {
      wkt.datumCode = "osgb36";
    }
  }
  if (wkt.b && !isFinite(wkt.b)) {
    wkt.b = wkt.a;
  }

  function toMeter(input) {
    var ratio = wkt.to_meter || 1;
    return parseFloat(input, 10) * ratio;
  }
  var renamer = function(a) {
    return rename(wkt, a);
  };
  var list = [
    ['standard_parallel_1', 'Standard_Parallel_1'],
    ['standard_parallel_2', 'Standard_Parallel_2'],
    ['false_easting', 'False_Easting'],
    ['false_northing', 'False_Northing'],
    ['central_meridian', 'Central_Meridian'],
    ['latitude_of_origin', 'Latitude_Of_Origin'],
    ['latitude_of_origin', 'Central_Parallel'],
    ['scale_factor', 'Scale_Factor'],
    ['k0', 'scale_factor'],
    ['latitude_of_center', 'Latitude_of_center'],
    ['lat0', 'latitude_of_center', d2r],
    ['longitude_of_center', 'Longitude_Of_Center'],
    ['longc', 'longitude_of_center', d2r],
    ['x0', 'false_easting', toMeter],
    ['y0', 'false_northing', toMeter],
    ['long0', 'central_meridian', d2r],
    ['lat0', 'latitude_of_origin', d2r],
    ['lat0', 'standard_parallel_1', d2r],
    ['lat1', 'standard_parallel_1', d2r],
    ['lat2', 'standard_parallel_2', d2r],
    ['alpha', 'azimuth', d2r],
    ['srsCode', 'name']
  ];
  list.forEach(renamer);
  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === "Lambert_Azimuthal_Equal_Area")) {
    wkt.long0 = wkt.longc;
  }
  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {
    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);
    wkt.lat_ts = wkt.lat1;
  }
}
module.exports = function(wkt, self) {
  var lisp = JSON.parse(("," + wkt).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g, ',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g, ',"$1"]').replace(/,\["VERTCS".+/,''));
  var type = lisp.shift();
  var name = lisp.shift();
  lisp.unshift(['name', name]);
  lisp.unshift(['type', type]);
  lisp.unshift('output');
  var obj = {};
  sExpr(lisp, obj);
  cleanWKT(obj.output);
  return extend(self, obj.output);
};

},{"./extend":63}],97:[function(require,module,exports){
module.exports={
  "_args": [
    [
      {
        "raw": "proj4@2.3.10",
        "scope": null,
        "escapedName": "proj4",
        "name": "proj4",
        "rawSpec": "2.3.10",
        "spec": "2.3.10",
        "type": "version"
      },
      "C:\\Utv\\origo"
    ]
  ],
  "_from": "proj4@2.3.10",
  "_id": "proj4@2.3.10",
  "_inCache": true,
  "_location": "/proj4",
  "_nodeVersion": "0.12.5",
  "_npmUser": {
    "name": "ahocevar",
    "email": "andreas.hocevar@gmail.com"
  },
  "_npmVersion": "2.11.2",
  "_phantomChildren": {},
  "_requested": {
    "raw": "proj4@2.3.10",
    "scope": null,
    "escapedName": "proj4",
    "name": "proj4",
    "rawSpec": "2.3.10",
    "spec": "2.3.10",
    "type": "version"
  },
  "_requiredBy": [
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/proj4/-/proj4-2.3.10.tgz",
  "_shasum": "f6e66bdcca332c25a5e3d8ef265cfc9d7b60fd0c",
  "_shrinkwrap": null,
  "_spec": "proj4@2.3.10",
  "_where": "C:\\Utv\\origo",
  "author": "",
  "bugs": {
    "url": "https://github.com/proj4js/proj4js/issues"
  },
  "contributors": [
    {
      "name": "Mike Adair",
      "email": "madair@dmsolutions.ca"
    },
    {
      "name": "Richard Greenwood",
      "email": "rich@greenwoodmap.com"
    },
    {
      "name": "Calvin Metcalf",
      "email": "calvin.metcalf@gmail.com"
    },
    {
      "name": "Richard Marsden",
      "url": "http://www.winwaed.com"
    },
    {
      "name": "T. Mittan"
    },
    {
      "name": "D. Steinwand"
    },
    {
      "name": "S. Nelson"
    }
  ],
  "dependencies": {
    "mgrs": "~0.0.2"
  },
  "description": "Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",
  "devDependencies": {
    "browserify": "~3.24.5",
    "chai": "~1.8.1",
    "curl": "git://github.com/cujojs/curl.git",
    "grunt": "~0.4.2",
    "grunt-browserify": "~1.3.0",
    "grunt-cli": "~0.1.13",
    "grunt-contrib-connect": "~0.6.0",
    "grunt-contrib-jshint": "~0.8.0",
    "grunt-contrib-uglify": "~0.3.2",
    "grunt-mocha-phantomjs": "~0.4.0",
    "istanbul": "~0.2.4",
    "mocha": "~1.17.1",
    "tin": "~0.4.0"
  },
  "directories": {
    "test": "test",
    "doc": "docs"
  },
  "dist": {
    "shasum": "f6e66bdcca332c25a5e3d8ef265cfc9d7b60fd0c",
    "tarball": "https://registry.npmjs.org/proj4/-/proj4-2.3.10.tgz"
  },
  "gitHead": "ac03d1439491dc313da80985193f702ca471b3d0",
  "homepage": "https://github.com/proj4js/proj4js#readme",
  "jam": {
    "main": "dist/proj4.js",
    "include": [
      "dist/proj4.js",
      "README.md",
      "AUTHORS",
      "LICENSE.md"
    ]
  },
  "license": "MIT",
  "main": "lib/index.js",
  "maintainers": [
    {
      "name": "cwmma",
      "email": "calvin.metcalf@gmail.com"
    },
    {
      "name": "ahocevar",
      "email": "andreas.hocevar@gmail.com"
    }
  ],
  "name": "proj4",
  "optionalDependencies": {},
  "readme": "ERROR: No README data found!",
  "repository": {
    "type": "git",
    "url": "git://github.com/proj4js/proj4js.git"
  },
  "scripts": {
    "test": "./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"
  },
  "version": "2.3.10"
}

},{}],98:[function(require,module,exports){
(function (global){
"use strict";

window.proj4 = require('proj4');
global.jQuery = require("jquery");

var $ = require('jquery');
var Viewer = require('./src/viewer');
var mapLoader = require('./src/maploader');
var controlInitialiser = require('./src/controlinitialiser');

var origo = {};
origo.map = {};
origo.config = require('./conf/origoConfig');
origo.controls = require('./conf/origoControls');

origo.map.init = function(options, opt_config) {
  var config = opt_config ? $.extend(origo.config, opt_config) : origo.config;

  var map = mapLoader(options, config);
  if (map) {
    map.then(function(config) {
      init(config);
    })
    return Viewer;
  } else {
    return undefined;
  }
}

function init(config) {
  Viewer.init(config.el, config.options);

  //Init controls
  controlInitialiser(config.options.controls);
}

module.exports = origo;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./conf/origoConfig":1,"./conf/origoControls":2,"./src/controlinitialiser":102,"./src/maploader":147,"./src/viewer":205,"jquery":26,"proj4":66}],99:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Utils = require('./utils');
var Modal = require('./modal');

var $aboutButton;
var buttonText;
var title;
var content;

function init(opt_options) {
  var options = opt_options || {};
  buttonText = options.buttonText || 'Om kartan';
  title = options.title || 'Om kartan';
  content = options.content || '<p></p>';

  render();
  bindUIActions();
}

function render() {
  var el = Utils.createListButton({
    id: 'o-about',
    iconCls: 'o-icon-fa-info-circle',
    src: '#fa-info-circle',
    text: buttonText
  });
  $('#o-menutools').append(el);
  $aboutButton = $('#o-about-button');
}

function bindUIActions() {
  $aboutButton.on('click', function(e) {
    Modal.createModal('#o-map', {
      title: title,
      content: content
    });

    Modal.showModal();
    e.preventDefault();
  });
}

module.exports.init = init;

},{"./modal":151,"./utils":189,"jquery":26}],100:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var breakPoint = options.breakPoint || [768, 500];
  var attribution;
  map = Viewer.getMap();

  attribution = new ol.control.Attribution({
    collapsible: false
  });

  map.addControl(attribution);

  $(window).on('resize', checkSize);
  checkSize();

  function checkSize() {
    var mapSize = map.getSize();
    var collapsed = (mapSize[0] <= breakPoint[0] || mapSize[1] <= breakPoint[1]);
    attribution.setCollapsible(collapsed);
    attribution.setCollapsed(collapsed);
  }
}

module.exports.init = Init;

},{"./viewer":205,"jquery":26,"openlayers":29}],101:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<svg width='32px' height='32px' xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\" class=\"uil-ripple\">\r\n  <rect x=\"0\" y=\"0\" width=\"100\" height=\"100\" fill=\"none\" class=\"bk\"></rect>\r\n  <g>\r\n    <animate attributeName=\"opacity\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"0s\" keyTimes=\"0;0.33;1\" values=\"1;1;0\"></animate>\r\n      <circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"#000000\" fill=\"none\" stroke-width=\"6\" stroke-linecap=\"round\">\r\n        <animate attributeName=\"r\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"0s\" keyTimes=\"0;0.33;1\" values=\"0;22;44\"></animate>\r\n      </circle>\r\n  </g>\r\n      <g>\r\n        <animate attributeName=\"opacity\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"1s\" keyTimes=\"0;0.33;1\" values=\"1;1;0\"></animate>\r\n        <circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"#000\" fill=\"none\" stroke-width=\"6\" stroke-linecap=\"round\">\r\n          <animate attributeName=\"r\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"1s\" keyTimes=\"0;0.33;1\" values=\"0;22;44\"></animate>\r\n        </circle>\r\n      </g>\r\n</svg>\r\n";
},"useData":true});

},{"hbsfy/runtime":25}],102:[function(require,module,exports){
"use strict";

var controlInitialiser = function(controls) {
    var controlName, controlOptions;
    controls.forEach(function(control) {
        controlName = control.name;
        controlOptions = control.options || undefined;
        if (origo.controls.hasOwnProperty(controlName)) {
            controlOptions ? origo.controls[controlName].init(controlOptions) : origo.controls[controlName].init();
        }
    });
}


module.exports = controlInitialiser;

},{}],103:[function(require,module,exports){
 "use strict";

var $ = require('jquery');
var utils = require('./utils');

module.exports = function(target, items, options) {
  var dataAttribute = 'data-' + options.dataAttribute || 'default';
  var $target = $('#' + target);
  var activeItem = options.active || undefined;
  var activeCls = 'o-active';
  var ul;
  var li = [];
  var cls = 'o-dropdown-li';
  var icon = utils.createSvg({
    href: '#ic_check_24px',
    cls: 'o-icon-24'
  });
  render();
  addListener();

  function render() {
    items.forEach(function(item, index) {
      var obj = {
        cls: cls
      };
      var active = utils.createElement('span', icon, {
        cls: 'o-icon'
      });
      obj[dataAttribute] = item.value;
      if (item.value === activeItem) {
        obj.cls = activeCls;
      }
      li[index] = utils.createElement('li', item.name + active, obj);
    });
    ul = utils.createElement('ul', li.join(''), {
      cls: 'o-dropdown'
    });
    $target.append(ul);
  }

  function addListener() {
    $target.on('click', 'ul', function(e) {
      var $active = $(e.target);
      $target.trigger({
        type: 'changeDropdown',
        dataAttribute: $(e.target).data(options.dataAttribute)
      });
      toggleActive($active);
    });
  }

  function toggleActive($active) {
    $target.find('li').removeClass(activeCls);
    $active.addClass(activeCls);
  }
};

},{"./utils":189,"jquery":26}],104:[function(require,module,exports){
 "use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');
var editorToolbar = require('./editor/editortoolbar');

var $editorButton;

module.exports = function() {

  return {
    init: Init
  };
}();

function Init(opt_options) {
  var options = opt_options || {};
  var editableLayers = viewer.getLayersByProperty('editable', true, true);
  if (editableLayers.length) {
    options.editableLayers = editableLayers;
  }  
  options.autoSave = options.hasOwnProperty('autoSave') ? options.autoSave : true;
  options.autoForm = options.hasOwnProperty('autoForm') ? options.autoForm : false;
  options.currentLayer = options.defaultLayer || options.editableLayers[0];
  editorToolbar.init(options);
  render();
  $editorButton = $('#o-editor-button');
  bindUIActions();
}

function bindUIActions() {
  $editorButton.on('click', function(e) {
    $('.o-map').first().trigger({
      type: 'enableInteraction',
      interaction: 'editor'
    });
    this.blur();
    e.stopPropagation();
    e.preventDefault();
  });
}

function render() {
  var el = utils.createListButton({
    id: 'o-editor',
    iconCls: 'o-icon-fa-pencil',
    src: '#fa-pencil',
    text: 'Redigera'
  });
  $('#o-menutools').append(el);
}

},{"./editor/editortoolbar":112,"./utils":189,"./viewer":205,"jquery":26}],105:[function(require,module,exports){
/* ========================================================================
 * Copyright 2016 Origo
 * Licensed under BSD 2-Clause (https://github.com/origo-map/origo/blob/master/LICENSE.txt)
 * ======================================================================== */
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var editsStore = require('./editsstore')();
var dispatcher = require('./editDispatcher');

var format = new ol.format.EsriJSON();
var urlSuffix = {
  update: 'updateFeatures',
  insert: 'addFeatures',
  delete: 'deleteFeatures'
};

module.exports = function(transObj, layerName) {
  agsTransaction(transObj, layerName);
}

function writeAgsTransaction(features, options) {
  var data = {};

  if (options.type === 'delete') {
    var objectIds = features.map(function(feature) {
      return feature.getId();
    });
    data.objectIds = objectIds.join(',');
  } else {
    var agsFeatures = features.map(function(feature) {
      return format.writeFeature(feature, {
        featureProjection: options.projection
      });
    });
    data.features = '[' + agsFeatures + ']';
  }
  data.f = 'json';
  return data;
}

function agsTransaction(transObj, layerName) {
  var projection = viewer.getProjection();
  var layer = viewer.getLayer(layerName);
  var id = layer.get('id');
  var source = viewer.getMapSource()[layer.get('sourceName')];
  var types = Object.getOwnPropertyNames(transObj);
  var cb = {
    update: updateSuccess,
    insert: insertSuccess,
    delete: deleteSuccess
  };
  types.forEach(function(type) {
    if (transObj[type]) {
      var url = source.url  + '/' + id + '/' + urlSuffix[type];
      var datat = writeAgsTransaction(transObj[type], {
        projection: projection,
        type: type
      });
      $.ajax({
        type: "POST",
        url: url,
        data: datat,
        success: cb[type],
        error: error,
        context: this
      });
    }
  });

  function updateSuccess(data) {
    var feature = transObj.update;
    var result = JSON.parse(data);
    if (result) {
      if (result.updateResults.length > 0) {
        result.updateResults.forEach(function(update, index) {
          if (update.success !== true) {
            throwServerError(update.error);
          } else {
            dispatcher.emitChangeFeature({
              feature: [feature[index]],
              layerName: layerName,
              status: 'finished',
              action: 'update'
            });
          }
        });
      }
    } else {
      error();
    }
  }

  function insertSuccess(data) {
    var feature = transObj.insert;
    var result = JSON.parse(data);
    if (result) {
      if (result.addResults.length > 0) {
        result.addResults.forEach(function(insert, index) {
          if (insert.success !== true) {
            throwServerError(insert.error);
          } else {
            dispatcher.emitChangeFeature({
              feature: [feature[index]],
              layerName: layerName,
              status: 'finished',
              action: 'insert'
            });
            feature[index].set('objectId',insert.objectId);
            feature[index].setId(insert.objectId);
          }
        });
      }
    } else {
      error();
    }
  }

  function deleteSuccess(data) {
    var feature = transObj.delete;
    var result = JSON.parse(data);
    if (result) {
      if (result.deleteResults.length > 0) {
        result.deleteResults.forEach(function(deleted, index) {
          if (deleted.success !== true) {
            throwServerError(deleted.error);
          } else {
            dispatcher.emitChangeFeature({
              feature: [feature[index]],
              layerName: layerName,
              status: 'finished',
              action: 'delete'
            });
          }
        });
      }
    } else {
      error();
    }
  }

  function error(e) {
    var errorMsg = e ? (e.status + ' ' + e.statusText) : "";
    alert('Det inträffade ett fel när ändringarna skulle sparas till servern...<br><br>' +
      errorMsg);
  }

  function throwServerError(error) {
    alert(error.description + ' (' + error.code + ')');
  }
}

},{"../viewer":205,"./editDispatcher":107,"./editsstore":113,"jquery":26,"openlayers":29}],106:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('../viewer');
var dropDown = require('../dropdown');
var dispatcher = require('./editdispatcher');
var createElement = require('../utils').createElement;

module.exports = function drawTools(tools, defaultLayer) {
  var toolNames = {
    Polygon: 'Polygon',
    Point: 'Punkt',
    Line: 'Linje',
    box: 'Rektangel'
  };
  var defaultTools = tools || {};
  var drawTools = undefined;
  var currentLayer = defaultLayer;
  var map = viewer.getMap();
  var active = false;
  var activeCls = 'o-active';
  var target = 'editor-toolbar-draw-dropdown';
  render();
  addListener();

  function render() {
    var popover = createElement('div', '', {
      id: target,
      cls: 'o-popover'
    });
    $('#' + 'o-editor-draw').after(popover);
    setActive(false);
  }

  function addDropDown(options) {
    dropDown(options.target, options.selectOptions, {
      dataAttribute: 'shape',
      active: options.activeTool
    });
    $('#' + target).on('changeDropdown', function(e) {
      e.stopImmediatePropagation(e);
      dispatcher.emitChangeEditorShapes(e.dataAttribute);
      close();
    });
  }

  function addListener() {
    $(document).on('changeEdit', onChangeEdit);
    $(document).on('toggleEdit', onToggleEdit);
  }

  function setActive(state) {
    if (state) {
      if (drawTools.length > 1) {
        active = true;
        $('#' + target + ' ul').remove();
        addDropDown(createDropDownOptions());
        $('#' + target).addClass(activeCls);
        map.once('click', close);
      }
    } else {
      active = false;
      $('#' + target).removeClass(activeCls);
      map.un('click', close);
    }
  }

  function close() {
    if (active) {
      setActive(false);
    }
  }

  function onChangeEdit(e) {
    if (e.tool === 'draw' && e.active === true) {
      setDrawTools(currentLayer);
      setActive(true);
    } else if (e.tool === 'draw' && e.active === false) {
      setActive(false);
    }
    e.stopPropagation();
  }

  function onToggleEdit(e) {
    if (e.tool === 'edit' && e.currentLayer) {
      currentLayer = e.currentLayer;
    }
    e.stopPropagation();
  }

  function setDrawTools(layerName) {
    var layer = viewer.getLayer(layerName);
    var geometryType;
    drawTools = layer.get('drawTools') || [];
    if (layer.get('drawTools')) {
      drawTools = layer.get('drawTools');
    } else {
      geometryType = layer.get('geometryType');
      drawTools = defaultTools[geometryType] ? defaultTools[geometryType].slice(0) : [];
      drawTools.unshift(geometryType);
    }
  }

  function createDropDownOptions() {
    return {
      target: target,
      selectOptions: selectionModel(drawTools),
      activeTool: drawTools[0]
    };
  }

  function selectionModel(drawTools) {
    var selectOptions = drawTools.map(function(drawTool) {
      var obj = {};
      obj.name = toolNames[drawTool];
      obj.value = drawTool;
      return obj;
    });
    return selectOptions;
  }
}

},{"../dropdown":103,"../utils":189,"../viewer":205,"./editdispatcher":108,"jquery":26}],107:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = {
  emitChangeEdit: emitChangeEdit,
  emitChangeFeature: emitChangeFeature,
  emitToggleEdit: emitToggleEdit,
  emitEnableInteraction: emitEnableInteraction,
  emitEditsChange: emitEditsChange,
  emitChangeEditorShapes: emitChangeEditorShapes,
  emitChangeOfflineEdits: emitChangeOfflineEdits
}

function emitChangeEdit(tool, state) {
  $.event.trigger({
    type: 'changeEdit',
    tool: tool,
    active: state
  });
}

function emitChangeFeature(change) {
  $.event.trigger({
    type: 'changeFeature',
    feature: change.feature,
    layerName: change.layerName,
    action: change.action,
    status: change.status || 'pending'
  });
}

function emitToggleEdit(tool, opt_options) {
  var options = opt_options || {};
  var e = {
    type: 'toggleEdit',
    tool: tool
  };
  $.extend(e, options);
  $.event.trigger(e);
}

function emitEnableInteraction() {
  $.event.trigger({
    type: 'enableInteraction',
    interaction: 'editor'
  });
}

function emitEditsChange(edits) {
  $.event.trigger({
    type: 'editsChange',
    edits: edits
  });
}

function emitChangeEditorShapes(shape) {
  $.event.trigger({
    type: 'editorShapes',
    shape: shape
  });
}

function emitChangeOfflineEdits(edits, layerName) {
  $.event.trigger({
    type: 'changeOfflineEdits',
    edits: edits,
    layerName: layerName
  });
}

},{"jquery":26}],108:[function(require,module,exports){
arguments[4][107][0].apply(exports,arguments)
},{"dup":107,"jquery":26}],109:[function(require,module,exports){
"use strict";

module.exports = function createForm(obj) {
  var id = obj.elId.slice(1);
  var cls = obj.cls || '';
  cls += id;
  cls += obj.isVisible ? "" : " o-hidden";
  var label = obj.title;
  var val = obj.isVisible ? obj.val : '';
  var type = obj.type;
  var maxLength = obj.maxLength ? ' maxlength="' + obj.maxLength + '" ' : '';
  var dropdownOptions = obj.options || [];
  var el;
  var checked;
  var firstOption;
  switch (type) {
    case 'text':
      el = '<div><label>' + label + '</label><br><input type="text" id="' + id + '" value="' + val + '"' + maxLength + '></div>';
      break;
    case 'textarea':
      el = '<div><label>' + label + '</label><br><textarea id="' + id + '"' + maxLength + 'rows="3">' + val + '</textarea></div>';
      break;
    case 'checkbox':
      checked = val ? ' checked' : '';
      el = '<div class="o-form-checkbox"><label>' + label + '</label><input type="checkbox" id="' + id + '" value="' + val + '"' + checked + '></div>';
      break;
    case 'dropdown':
      firstOption;
      if (val) {
        firstOption = '<option value="' + val + '" selected>' + val + '</option>';
      } else {
        firstOption = '<option value="" selected>Välj</option>';
      }
      el = '<div class="' + cls + '"><label>' + label + '</label><br><select id=' + id + '>' + firstOption;
      for (var i = 0; i < dropdownOptions.length; i++) {
        el += '<option value="' + dropdownOptions[i] + '">' + dropdownOptions[i] + '</option>';
      }
      el += '</select></div>';
      break;
    case 'image':
      var imageClass = val ? '' : 'o-hidden';
      el = '<div class="' + cls + '"><label>' + label + '</label><br>';
      el += '<img src="' + val + '" id="image-upload" class="' + imageClass + '"/>';
      el += '<input type="file" id="' + id + '" value="' + val + '" accept="image/*">';
      el += '<input id="o-delete-image-button" class="' + imageClass + '" type="button" value="Ta bort bild">';
      el += '</div>';
      break;
  }
  return el;
}

},{}],110:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var modal = require('../modal');
var featureInfo = require('../featureinfo');
var editsStore = require('./editsstore')();
var generateUUID = require('../utils/generateuuid');
var transactionHandler = require('./transactionhandler');
var dispatcher = require('./editdispatcher');
var editForm = require('./editform');
var imageresizer = require('../utils/imageresizer');
var getImageOrientation = require('../utils/getimageorientation');
var shapes = require('./shapes');

var editLayers = {};
var autoSave = undefined;
var autoForm = undefined;
var editSource = undefined;
var geometryType = undefined;
var geometryName = undefined;
var map = undefined;
var currentLayer = undefined;
var editableLayers = undefined;
var attributes = undefined;
var title = undefined;
var draw = undefined;
var hasDraw = undefined;
var hasAttribute = undefined;
var hasSnap = undefined;
var select = undefined;
var modify = undefined;
var snap = undefined;
var tools = undefined;

module.exports = function(options) {
  map = viewer.getMap();
  currentLayer = options.currentLayer;
  editableLayers = options.editableLayers;
  tools = options.drawTools || [];

  //set edit properties for editable layers
  editLayers = setEditProps(options);
  editableLayers.forEach(function(layerName) {
    var layer = viewer.getLayer(layerName);
    verifyLayer(layerName);
    if (layerName === currentLayer && options.isActive) {
      dispatcher.emitEnableInteraction();
      setEditLayer(layerName);
    }
  });

  autoSave = options.autoSave;
  autoForm = options.autoForm;
  $(document).on('toggleEdit', onToggleEdit);
  $(document).on('changeEdit', onChangeEdit);
  $(document).on('editorShapes', onChangeShape);
}

function setEditLayer(layerName) {
  currentLayer = layerName;
  setInteractions();
}

function setInteractions(drawType) {
  var editLayer = editLayers[currentLayer];
  var drawOptions;
  editSource = editLayer.getSource();
  attributes = editLayer.get('attributes');
  title = editLayer.get('title') || 'Information';
  drawOptions = {
    source: editSource,
    type: editLayer.get('geometryType'),
    geometryName: editLayer.get('geometryName')
  };
  if (drawType) {
    $.extend(drawOptions, shapes(drawType));
  }
  removeInteractions();
  draw = new ol.interaction.Draw(drawOptions);
  hasDraw = false;
  hasAttribute = false;
  select = new ol.interaction.Select({
    layers: [editLayer]
  });
  modify = new ol.interaction.Modify({
    features: select.getFeatures()
  });
  map.addInteraction(select);
  map.addInteraction(modify);
  map.addInteraction(draw);
  modify.on('modifyend', onModifyEnd, this);
  draw.on('drawend', onDrawEnd, this);
  setActive();

  //If snap should be active then add snap internactions for all snap layers
  hasSnap = editLayer.get('snap');
  if (hasSnap) {
    var selectionSource = featureInfo.getSelectionLayer().getSource();
    var snapSources = editLayer.get('snapLayers') ? getSnapSources(editLayer.get('snapLayers')) : [editLayer.get('source')];
    snapSources.push(selectionSource);
    snap = addSnapInteraction(snapSources);
  }
}

function verifyLayer(layerName) {
  if (!(editLayers[layerName].get('geometryType'))) {
    addFeatureAddListener(layerName);
  }
}

function setGeometryProps(layer) {
  var layerName = layer.get('name');
  editLayers[layerName].set('geometryType', layer.getSource().getFeatures()[0].getGeometry().getType());
  if (layerName === currentLayer) {
    setEditLayer(layerName);
  }
}

function addFeatureAddListener(layerName) {
  var layer = viewer.getLayer(layerName);
  layer.getSource().once('addfeature', function(e) {
    setGeometryProps(layer);
  });
}

function setEditProps(options) {
  var initialValue = {};
  var result = editableLayers.reduce(function(layerProps, layerName) {
    var layer = viewer.getLayer(layerName);
    var snap = options.hasOwnProperty('snap') ? options.snap : true;
    var snapLayers = options.snapLayers || editableLayers;
    layer.set('snap', snap);
    layer.set('snapLayers', snapLayers);
    layerProps[layerName] = layer;
    return layerProps;
  }, initialValue);
  return result;
}

function isActive() {
  if (modify === undefined || select === undefined) {
    return false;
  } else {
    return true;
  }
}

function onDeleteSelected() {
  var features = select.getFeatures();

  // Make sure all features are loaded in the source
  editSource = editLayers[currentLayer].getSource();
  if (features.getLength() === 1) {
    var feature = features.item(0);
    var r = confirm('Är du säker på att du vill ta bort det här objektet?');
    if (r === true) {
      saveFeature({
        feature: feature,
        layerName: currentLayer,
        action: 'delete'
      });
      select.getFeatures().clear();
      editSource.removeFeature(editSource.getFeatureById(feature.getId()));
    }
  }
}

function onModifyEnd(evt) {
  var feature = evt.features.item(0);
  saveFeature({
    feature: feature,
    layerName: currentLayer,
    action: 'update'
  });
}

function onDrawEnd(evt) {
  var feature = evt.feature;
  var layer = viewer.getLayer(currentLayer);
  var attributes = getDefaultValues(layer.get('attributes'));
  feature.setProperties(attributes);
  feature.setId(generateUUID());
  editSource.addFeature(feature);
  setActive();
  hasDraw = false;
  saveFeature({
    feature: feature,
    layerName: currentLayer,
    action: 'insert'
  });
  dispatcher.emitChangeEdit('draw', false);
  if (autoForm) {
    editAttributes(feature);
  }
}

function cancelDraw() {
  setActive();
  hasDraw = false;
  dispatcher.emitChangeEdit('draw', false);
}

function onChangeShape(e) {
  setInteractions(e.shape);
  startDraw();
}

function cancelAttribute() {
  modal.closeModal();
  dispatcher.emitChangeEdit('attribute', false);
}

function onAttributesSave(feature, attributes) {
  $('#o-save-button').on('click', function(e) {
    var editEl = {};
    var fileReader;
    var imageData;
    var input;
    var file;
    var orientation;

    //Read values from form
    attributes.forEach(function(attribute) {

      //Get the input container class
      var containerClass = '.' + attribute.elId.slice(1);

      // If hidden element it should be excluded
      if ($(containerClass).hasClass('o-hidden') === false) {

        //Check if checkbox. If checkbox read state.
        if ($(attribute.elId).attr('type') === 'checkbox') {
          editEl[attribute.name] = $(attribute.elId).is(':checked') ? 1 : 0;
        }

        //Read value from input text, textarea or select
        else {
          editEl[attribute.name] = $(attribute.elId).val();
        }
      }

      //Check if file. If file, read and trigger resize
      if ($(attribute.elId).attr('type') === 'file') {
        input = $(attribute.elId)[0];
        file = input.files[0];

        if (file) {
          fileReader = new FileReader();
          fileReader.onload = function() {
            getImageOrientation(file, function(orientation) {
              imageresizer(fileReader.result, attribute, orientation, function(resized) {
                editEl[attribute.name] = resized;
                $(document).trigger('imageresized');
              });
            });
          }

          fileReader.readAsDataURL(file);
        } else {
          editEl[attribute.name] = $(attribute.elId).attr('value');
        }
      }
    });

    if (fileReader && fileReader.readyState == 1) {
      $(document).on('imageresized', function() {
        attributesSaveHandler(feature, editEl);
      });
    } else {
      attributesSaveHandler(feature, editEl);
    }

    modal.closeModal();
    $('#o-save-button').blur();
    e.preventDefault();
  });
}

function attributesSaveHandler(feature, formEl) {

  //get DOM values and set attribute values to feature
  attributes.forEach(function(attribute) {
    if (formEl.hasOwnProperty(attribute.name)) {
      feature.set(attribute.name, formEl[attribute.name]);
    }
  });
  saveFeature({
    feature: feature,
    layerName: currentLayer,
    action: 'update'
  });
}

function removeInteractions() {
  if (isActive()) {
    map.removeInteraction(modify);
    map.removeInteraction(select);
    map.removeInteraction(draw);
    if (snap) {
      snap.forEach(function(snapInteraction) {
        map.removeInteraction(snapInteraction);
      });
    }

    modify = undefined;
    select = undefined;
    draw = undefined;
    snap = undefined;
  }
}

function startDraw() {
  if (hasDraw !== true && isActive()) {
    setActive('draw');
    hasDraw = true;
    dispatcher.emitChangeEdit('draw', true);
  }
}

function addListener() {
  var fn = function(obj) {
    $(obj.elDependencyId).on(obj.eventType, function(e) {
      var containerClass = '.' + obj.elId.slice(1);
      if ($(obj.elDependencyId + (' option:selected')).text() === obj.requiredVal) {
        $(containerClass).removeClass('o-hidden');
      } else {
        $(containerClass).addClass('o-hidden');
      }
    });
  }

  return fn;
}

function addImageListener() {
  var fn = function(obj) {
    var fileReader = new FileReader();
    var containerClass = '.' + obj.elId.slice(1);
    $(obj.elId).on('change', function(e) {
      $(containerClass + ' img').removeClass('o-hidden');
      $(containerClass + ' input[type=button]').removeClass('o-hidden');

      if (this.files && this.files[0]) {
        fileReader.onload = function (e) {
          $(containerClass + ' img').attr('src', e.target.result);
        };

        fileReader.readAsDataURL(this.files[0]);
      }
    });

    $(containerClass + ' input[type=button]').on('click', function(e) {
      $(obj.elId).attr('value', '');
      $(containerClass + ' img').addClass('o-hidden');
      $(this).addClass('o-hidden');
    });
  }

  return fn;
}

function onToggleEdit(e) {
  e.stopPropagation();
  if (e.tool === 'draw') {
    if (hasDraw === false) {
      setInteractions();
      startDraw();
    } else {
      cancelDraw();
    }
  } else if (e.tool === 'attribute') {
    if (hasAttribute === false) {
      editAttributes();
    } else {
      cancelAttribute();
    }
  } else if (e.tool === 'delete') {
      onDeleteSelected();
  } else if (e.tool === 'edit') {
      setEditLayer(e.currentLayer);
  } else if (e.tool === 'cancel') {
      removeInteractions();
  } else if (e.tool === 'save') {
      saveFeatures();
  }
}

function onChangeEdit(e) {
  if (e.tool!== 'draw' && e.active) {
    cancelDraw();
  }
}

function getSnapSources(layers) {
  var sources = layers.map(function(layer) {
    return viewer.getLayer(layer).getSource();
  });

  return sources;
}

function addSnapInteraction(sources) {
  var snapInteractions = [];
  sources.forEach(function(source) {
    var interaction = new ol.interaction.Snap({
      source: source
    });
    snapInteractions.push(interaction);
    map.addInteraction(interaction);
  });
  return snapInteractions;
}

function setActive(editType) {
  switch (editType) {
    case 'modify':
      draw.setActive(false);
      modify.setActive(true);
      select.setActive(true);
      break;
    case 'draw':
      draw.setActive(true);
      modify.setActive(true);
      select.setActive(false);
      break;
    default:
      draw.setActive(false);
      hasDraw = false;
      modify.setActive(true);
      select.setActive(true);
      break;
  }
}

function editAttributes(feature) {
  var attributeObjects;
  var features;

  //Get attributes from the created, or the selected, feature and fill DOM elements with the values
  if (feature) {
    features = new ol.Collection();
    features.push(feature);
  } else {
    features = select.getFeatures();
  }
  if (features.getLength() === 1) {
    dispatcher.emitChangeEdit('attribute', true);
    var feature = features.item(0);
    if (attributes.length > 0) {

      //Create an array of defined attributes and corresponding values from selected feature
      attributeObjects = attributes.map(function(attributeObject) {
        var obj = {};
        $.extend(obj, attributeObject);
        obj.val = feature.get(obj.name) || '';
        if (obj.hasOwnProperty('constraint')) {
          var constraintProps = obj.constraint.split(':');
          if (constraintProps.length === 3) {
            obj.eventType = constraintProps[0];
            obj.dependencyVal = feature.get(constraintProps[1]);
            obj.requiredVal = constraintProps[2];
            obj.dependencyVal === obj.requiredVal ? obj.isVisible = true : obj.isVisible = false;
            obj.addListener = addListener();
            obj.elId = '#input-' + obj.name + '-' + obj.requiredVal;
            obj.elDependencyId = '#input-' + constraintProps[1];
          } else {
            alert('Villkor verkar inte vara rätt formulerat. Villkor formuleras enligt principen change:attribute:value');
          }
        } else if (obj.type === 'image') {
          obj.isVisible = true;
          obj.elId = '#input-' + obj.name;
          obj.addListener = addImageListener();
        } else {
          obj.isVisible = true;
          obj.elId = '#input-' + obj.name;
        }

        obj.formElement = editForm(obj);
        return obj;
      });

    }
    var formElement = attributeObjects.reduce(function(prev, next) {
      return prev + next.formElement;
    }, '');
    var form = '<form>' + formElement + '<br><div class="o-form-save"><input id="o-save-button" type="button" value="Ok"></input></div></form>';
    modal.createModal('#o-map', {
      title: title,
      content: form,
      static: true
    });
    modal.showModal();

    attributeObjects.forEach(function(obj) {
      if (obj.hasOwnProperty('addListener')) {
        obj.addListener(obj);
      }
    });

    onAttributesSave(feature, attributeObjects);
  }
}

function saveFeature(change) {
  dispatcher.emitChangeFeature(change);
  if (autoSave) {
    saveFeatures(change);
  }
}

function saveFeatures() {
  var edits = editsStore.getEdits();
  var layerNames = Object.getOwnPropertyNames(edits);
  layerNames.forEach(function(layerName) {
    var transaction = {
      insert: null,
      delete: null,
      update: null
    };
    var editTypes = Object.getOwnPropertyNames(edits[layerName]);
    editTypes.forEach(function(editType) {
      var layer = viewer.getLayer(layerName);
      var ids = edits[layerName][editType];
      var features;
      features = getFeaturesByIds(editType, layer, ids);
      if (features.length) {
        transaction[editType] = features;
      }
    });

    transactionHandler(transaction, layerName);
  });
}

function getFeaturesByIds(type, layer, ids) {
  var source = layer.getSource();
  var features = [];
  if (type === 'delete') {
    ids.forEach(function(id) {
      var dummy = new ol.Feature();
      dummy.setId(id);
      features.push(dummy);
    });
  } else {
    ids.forEach(function(id) {
      var feature;
      if (source.getFeatureById(id)) {
         feature = source.getFeatureById(id);
         feature.unset('bbox');
         features.push(feature);
      }
    });
  }

  return features;
}

function getDefaultValues(attributes) {
  return attributes.filter(function(attribute) {
      if (attribute.name && attribute.defaultValue) {
        return attribute;
      }
    })
    .reduce(function(prev, curr) {
      prev[curr.name] = curr.defaultValue
      return prev;
    },{});
}

},{"../featureinfo":118,"../modal":151,"../utils/generateuuid":191,"../utils/getimageorientation":192,"../utils/imageresizer":194,"../viewer":205,"./editdispatcher":108,"./editform":109,"./editsstore":113,"./shapes":115,"./transactionhandler":116,"jquery":26,"openlayers":29}],111:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('../viewer');
var dropDown = require('../dropdown');
var dispatcher = require('./editdispatcher');
var createElement = require('../utils').createElement;

module.exports = function editorLayers(editableLayers, opt_options) {
  var active = false;
  var activeCls = 'o-active';
  var target = 'editor-toolbar-layers-dropdown';
  var defaultOptions = {
    target: target,
    selectOptions: selectionModel(editableLayers),
    activeLayer: editableLayers[0]
  };
  var renderOptions = $.extend(defaultOptions, opt_options);

  render(renderOptions);
  addListener(target);

  function render(options) {
    var popover = createElement('div', '', {
      id: options.target,
      cls: 'o-popover'
    });
    $('#' + 'o-editor-layers').after(popover);
    dropDown(options.target, options.selectOptions, {
      dataAttribute: 'layer',
      active: options.activeLayer
    });
  }

  function addListener() {
    $('#' + target).on('changeDropdown', function(e) {
      e.stopImmediatePropagation(e);
      setActive(false);
      dispatcher.emitToggleEdit('edit', {
        currentLayer: e.dataAttribute
      });
    });
    $(document).on('toggleEdit', onToggleEdit);
    $(document).on('changeEdit', onChangeEdit);
  }

  function onToggleEdit(e) {
    if (e.tool === 'layers') {
      if (active) {
        setActive(false);
      } else {
        setActive(true);
      }
    }
    e.stopPropagation();
  }

  function onChangeEdit(e) {
    if (e.tool !== 'layers' && e.active === true) {
      setActive(false);
    }
    e.stopPropagation();
  }

  function setActive(state) {
    if (state) {
      active = true;
      $('#' + target).addClass(activeCls);
    } else {
      active = false;
      $('#' + target).removeClass(activeCls);
    }
    dispatcher.emitChangeEdit('layers', active);
  }

  function close() {
    if (active) {
      setActive(false);
    }
  }

  function selectionModel(layerNames) {
    var selectOptions = layerNames.map(function(layerName) {
      var obj = {};
      obj.name = viewer.getLayer(layerName).get('title');
      obj.value = layerName;
      return obj;
    });
    return selectOptions;
  }
}

},{"../dropdown":103,"../utils":189,"../viewer":205,"./editdispatcher":108,"jquery":26}],112:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var editortemplate = require("../templates/editortoolbar.template.handlebars");
var dispatcher = require('./editdispatcher');
var editHandler = require('./edithandler');
var editorLayers = require('./editorlayers');
var drawTools = require('./drawtools');

var activeClass = 'o-control-active';
var disableClass = 'o-disabled';
var currentLayer = undefined;
var editableLayers = undefined;
var $editAttribute = undefined;
var $editDraw = undefined;
var $editDelete = undefined;
var $editLayers = undefined;
var $editSave = undefined;
var $editClose = undefined;

module.exports = function() {

  return {
    init: Init
  };
}()

function Init(options) {
  currentLayer = options.currentLayer;
  editableLayers = options.editableLayers;

  editHandler(options);
  render();
  editorLayers(editableLayers, {
    activeLayer: currentLayer
  });
  drawTools(options.drawTools, currentLayer);

  $(document).on('enableInteraction', onEnableInteraction);
  $(document).on('changeEdit', onChangeEdit);
  $(document).on('editsChange', toggleSave);

  bindUIActions();

  if (options.isActive) {
    setActive(true);
  }
}

function render() {
  $("#o-tools-bottom").append(editortemplate());
  $editAttribute = $('#o-editor-attribute');
  $editDraw = $('#o-editor-draw');
  $editDelete = $('#o-editor-delete');
  $editLayers = $('#o-editor-layers');
  $editSave = $('#o-editor-save');
  $editClose = $('#o-editor-close');
}

function bindUIActions() {
  var self = this;
  $editDraw.on('click', function(e) {
    dispatcher.emitToggleEdit('draw');
    $editDraw.blur();
    e.preventDefault();
    return false;
  });
  $editAttribute.on('click', function(e) {
    dispatcher.emitToggleEdit('attribute');
    $editAttribute.blur();
    e.preventDefault();
  });
  $editDelete.on('click', function(e) {
    dispatcher.emitToggleEdit('delete');
    $editDelete.blur();
    e.preventDefault();
  });
  $editLayers.on('click', function(e) {
    dispatcher.emitToggleEdit('layers');
    $editLayers.blur();
    e.preventDefault();
  });
  $editSave.on('click', function(e) {
    dispatcher.emitToggleEdit('save');
    $editSave.blur();
    e.preventDefault();
  });
  $editClose.on('click', function(e) {
    $('.o-map').first().trigger({
      type: 'enableInteraction',
      interaction: 'featureInfo'
    });
    $editClose.blur();
    e.stopPropagation();
    e.preventDefault();
  });
}

function onEnableInteraction(e) {
  e.stopPropagation();
  if (e.interaction === 'editor') {
    setActive(true);
    dispatcher.emitToggleEdit('edit', {
      currentLayer: currentLayer
    });
  } else {
    setActive(false);
    dispatcher.emitToggleEdit('cancel');
  }
}

function setActive(state) {
  if (state === true) {
    $('#o-editor-toolbar').removeClass('o-hidden');
  } else {
    $('#o-editor-toolbar').addClass('o-hidden');
  }
}

function onChangeEdit(e) {
  if (e.tool === 'draw') {
    if (e.active === false) {
      $editDraw.removeClass(activeClass);
    } else {
      $editDraw.addClass(activeClass);
    }
  }
  if (e.tool === 'layers') {
    if (e.active === false) {
      $editLayers.removeClass(activeClass);
    } else {
      $editLayers.addClass(activeClass);
    }
  } else if (e.active) {
    $editLayers.removeClass(activeClass);
  }
}

function toggleSave(e) {
  if (e.edits) {
    if ($editSave.hasClass(disableClass)) {
      $editSave.removeClass(disableClass);
    }
  } else {
    $editSave.addClass(disableClass);
  }
}

},{"../templates/editortoolbar.template.handlebars":184,"../viewer":205,"./drawtools":106,"./editdispatcher":108,"./edithandler":110,"./editorlayers":111,"jquery":26,"openlayers":29}],113:[function(require,module,exports){
var $ = require('jquery');
var ol = require('openlayers');
var viewer = require('../viewer');
var dispatcher = require('./editdispatcher');

var editsStore = function featureStore() {
  var edits = {};

  $(document).on('changeFeature', featureChange);

  return {
    getEdits: getEdits,
    hasFeature: hasFeature
  };

  function addEdit(e) {
    if (e.action === 'insert') {
      addFeature('insert', e.feature, e.layerName);
    } else if (e.action === 'update') {
      if (hasFeature('insert', e.feature, e.layerName) === false) {
        addFeature('update', e.feature, e.layerName);
      }
    } else if (e.action === 'delete') {
      if (removeFeature('insert', e.feature, e.layerName) === false) {
        removeFeature('update', e.feature, e.layerName);
        addFeature('delete', e.feature, e.layerName);
      }
    }
    if (hasEdits() === true) {
      dispatcher.emitEditsChange(1);
    } else {
      dispatcher.emitEditsChange(0);
    }
  }

  function removeEdit(e) {
    if (e.feature.length) {
      e.feature.forEach(function(feature) {
        removeFeature(e.action, feature, e.layerName)
      });
    }
    if (hasEdits() === false) {
      dispatcher.emitEditsChange(0);
    }
  }

  function getEdits() {
    return edits;
  }

  function featureChange(e) {
    if (e.status === 'pending') {
      addEdit(e);
    } else if (e.status === 'finished') {
      removeEdit(e);
    }
  }

  function hasFeature(type, feature, layerName) {
    if (edits.hasOwnProperty(layerName)) {
      if (edits[layerName][type].indexOf(feature.getId()) > -1) {
        return true;
      }
    }
    return false;
  }

  function addFeature(type, feature, layerName) {
    if (edits.hasOwnProperty(layerName) === false) {
      edits[layerName] = createEditsObj();
    }
    if (hasFeature(type, feature, layerName) === false) {
      edits[layerName][type].push(feature.getId());
    }
  }

  function removeFeature(type, feature, layerName) {
    var index = 0;
    if (edits.hasOwnProperty(layerName)) {
      index = edits[layerName][type].indexOf(feature.getId());
      if (index > -1) {
        edits[layerName][type].splice(index, 1);
        isFinished(layerName);
        return true;
      }
    }
    return false;
  }

  function isFinished(layerName) {
    var editTypes;
    var finished = true;
    if (edits.hasOwnProperty(layerName)) {
      editTypes = Object.getOwnPropertyNames(edits[layerName]);
      editTypes.forEach(function(editType) {
        if (edits[layerName][editType].length) {
          finished = false;
          return finished;
        }
      });
      if (finished) {
        delete edits[layerName];
        return finished;
      }
    } else {
      return finished;
    }
  }

  function createEditsObj() {
    return {
      update: [],
      insert: [],
      delete: []
    }
  }

  function hasEdits() {
    if (Object.getOwnPropertyNames(edits).length) {
      return true;
    } else {
      return false;
    }
  }
}

module.exports = editsStore;

},{"../viewer":205,"./editdispatcher":108,"jquery":26,"openlayers":29}],114:[function(require,module,exports){
var dispatcher = require('./editdispatcher');

module.exports = function(transObj, layerName) {
  dispatcher.emitChangeOfflineEdits(transObj, layerName);
}

},{"./editdispatcher":108}],115:[function(require,module,exports){
"use strict";

var ol = require('openlayers');

module.exports = function(drawType) {
  var types = {
    box: {
      type: 'Circle',
      geometryFunction: ol.interaction.Draw.createBox()
    }
  };

  if (types.hasOwnProperty(drawType)) {
    return types[drawType];
  } else {
    return {};
  }
}

},{"openlayers":29}],116:[function(require,module,exports){
"use strict";

var viewer = require('../viewer');
var wfsTransaction = require('./wfstransaction');
var agsTransaction = require('./agstransaction');
var indexedDb = require('./indexeddb');
var transactions = {
  WFS: wfsTransaction,
  AGS_FEATURE: agsTransaction,
  OFFLINE: indexedDb
};

module.exports = function(transaction, layerName) {
  var type = viewer.getLayer(layerName).get('type');
  if (transactions.hasOwnProperty(type)) {
    transactions[type](transaction, layerName);
  }
}

},{"../viewer":205,"./agstransaction":105,"./indexeddb":114,"./wfstransaction":117}],117:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var editsStore = require('./editsstore')();
var dispatcher = require('./editdispatcher');

var format = new ol.format.WFS();
var serializer = new XMLSerializer();

module.exports = function(transObj, layerName) {
  return wfsTransaction(transObj, layerName);
}

function writeWfsTransaction(transObj, options) {
  var node = format.writeTransaction(transObj.insert, transObj.update, transObj.delete, options);
  return node;
}

function wfsTransaction(transObj, layerName) {
  var srsName = viewer.getProjectionCode();
  var layer = viewer.getLayer(layerName);
  var featureType = layer.get('featureType');
  var source = viewer.getMapSource()[layer.get('sourceName')];
  var options = {
    gmlOptions: {
      srsName: srsName
    },
    featureNS: source.workspace,
    featurePrefix: source.prefix || source.workspace,
    featureType: featureType
  };
  var node = writeWfsTransaction(transObj, options);
  return $.ajax({
    type: "POST",
    url: source.url,
    data: serializer.serializeToString(node),
    contentType: 'text/xml',
    success: success,
    error: error,
    context: this
  })
    .then(function(data) {
      var result = readResponse(data);
      var nr = 0;
      if (result) {
        nr += result.transactionSummary.totalUpdated;
        nr += result.transactionSummary.totalDeleted;
        nr += result.transactionSummary.totalInserted;
      }
      return nr;
    });

  function success(data) {
    var result = readResponse(data);
    var feature;
    if (result) {
      if (result.transactionSummary.totalUpdated > 0) {
        dispatcher.emitChangeFeature({
          feature: transObj.update,
          layerName: layerName,
          status: 'finished',
          action: 'update'
        });
      }

      if (result.transactionSummary.totalDeleted > 0) {
        dispatcher.emitChangeFeature({
          feature: transObj.delete,
          layerName: layerName,
          status: 'finished',
          action: 'delete'
        });
      }

      if (result.transactionSummary.totalInserted > 0) {
        feature = transObj.insert;
        dispatcher.emitChangeFeature({
          feature: transObj.insert,
          layerName: layerName,
          status: 'finished',
          action: 'insert'
        });
        var insertIds = result.insertIds;
        insertIds.forEach(function(insertId, index) {
          feature[index].setId(insertId);
        });
      }
    } else {
      error();
    }
  }

  function error(e) {
    var errorMsg = e ? (e.status + ' ' + e.statusText) : "";
    alert('Det inträffade ett fel när ändringarna skulle sparas till servern...\n' +
      errorMsg);
  }
}

function readResponse(data) {
  var result;
  if (window.Document && data instanceof Document && data.documentElement &&
    data.documentElement.localName === 'ExceptionReport') {
    alert(data.getElementsByTagNameNS(
      'http://www.opengis.net/ows', 'ExceptionText').item(0).textContent);
  } else {
    result = format.readTransactionResponse(data);
  }

  return result;
}

},{"../viewer":205,"./editdispatcher":108,"./editsstore":113,"jquery":26,"openlayers":29}],118:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var Popup = require('./popup');
var sidebar = require('./sidebar');
var maputils = require('./maputils');
var featurelayer = require('./featurelayer');
var style = require('./style')();
var styleTypes = require('./style/styletypes');
var getFeatureInfo = require('./getfeatureinfo');
var owlCarousel = require('../externs/owlcarousel-browserify');
owlCarousel.loadjQueryPlugin();

var selectionLayer = undefined;
var savedPin = undefined;
var options;
var map;
var pinning;
var pinStyle;
var selectionStyles;
var showOverlay;
var identifyTarget;
var clusterFeatureinfoLevel;
var overlay;
var hitTolerance;

function init(opt_options) {
  map = Viewer.getMap();

  options = opt_options || {};

  pinning = options.hasOwnProperty('pinning') ? options.pinning : true;
  var pinStyleOptions = options.hasOwnProperty('pinStyle') ? options.pinStyle : styleTypes.getStyle('pin');
  pinStyle = style.createStyleRule(pinStyleOptions)[0];
  savedPin = options.savedPin ? maputils.createPointFeature(opt_options.savedPin, pinStyle) : undefined;

  selectionStyles = style.createEditStyle();

  var savedSelection = options.savedSelection || undefined;
  var savedFeature = savedPin || savedSelection || undefined;
  selectionLayer = featurelayer(savedFeature, map);

  showOverlay = options.hasOwnProperty('overlay') ? options.overlay : true;

  if(showOverlay) {
    identifyTarget = 'overlay';
  }
  else {
    sidebar.init();
    identifyTarget = 'sidebar';
  }

  clusterFeatureinfoLevel = options.hasOwnProperty('clusterFeatureinfoLevel') ? options.clusterFeatureinfoLevel : 1;

  hitTolerance = options.hasOwnProperty('hitTolerance') ? options.hitTolerance : 0;

  map.on('click', onClick);
  $(document).on('enableInteraction', onEnableInteraction);

}

function getSelectionLayer() {
  return selectionLayer.getFeatureLayer();
}

function getSelection() {
  var selection = {};
  selection.geometryType = selectionLayer.getFeatures()[0].getGeometry().getType();
  selection.coordinates = selectionLayer.getFeatures()[0].getGeometry().getCoordinates();
  return selection;
}
function getPin() {
  return savedPin;
}
function getHitTolerance() {
  return hitTolerance;
}
function identify(items, target, coordinate) {
  clear();
  var content = items.map(function(i){
    return i.content;
  }).join('');
  content = '<div id="o-identify"><div id="o-identify-carousel" class="owl-carousel owl-theme">' + content + '</div></div>';
  switch (target) {
    case 'overlay':
      var popup = Popup('#o-map');
      overlay = new ol.Overlay({
        element: popup.getEl()
      });
      map.addOverlay(overlay);
      var geometry = items[0].feature.getGeometry();
      var coord;
      geometry.getType() == 'Point' ? coord = geometry.getCoordinates() : coord = coordinate;
      overlay.setPosition(coord);
      popup.setContent({content: content, title: items[0].title});
      popup.setVisibility(true);
      var owl = initCarousel('#o-identify-carousel', undefined, function(){
        var currentItem = this.owl.currentItem;
        selectionLayer.clearAndAdd(items[currentItem].feature.clone(), selectionStyles[items[currentItem].feature.getGeometry().getType()]);
        popup.setTitle(items[currentItem].title);
      });
      Viewer.autoPan();
      break;
    case 'sidebar':
      sidebar.setContent({content: content, title: items[0].title});
      sidebar.setVisibility(true);
      var owl = initCarousel('#o-identify-carousel', undefined, function(){
        var currentItem = this.owl.currentItem;
        selectionLayer.clearAndAdd(items[currentItem].feature.clone(), selectionStyles[items[currentItem].feature.getGeometry().getType()]);
        sidebar.setTitle(items[currentItem].title);
      });
      break;
  }
}
function onClick(evt) {
  savedPin = undefined;
  //Featurinfo in two steps. Concat serverside and clientside when serverside is finished
  var clientResult = getFeatureInfo.getFeaturesAtPixel(evt, clusterFeatureinfoLevel);
  //Abort if clientResult is false
  if(clientResult !== false) {
    getFeatureInfo.getFeaturesFromRemote(evt)
      .done(function(data) {
        var serverResult = data || [];
        var result = serverResult.concat(clientResult);
        if (result.length > 0) {
          selectionLayer.clear();
          identify(result, identifyTarget, evt.coordinate)
        }
        else if(selectionLayer.getFeatures().length > 0) {
          clear();
        }
        else if(pinning){
          sidebar.setVisibility(false);
          var resolution = map.getView().getResolution();
          setTimeout(function() {
            if(!maputils.checkZoomChange(resolution, map.getView().getResolution())) {
              savedPin = maputils.createPointFeature(evt.coordinate, pinStyle);
              selectionLayer.addFeature(savedPin);
            }
          }, 250);
        }
        else {
          console.log('No features identified');
        }
      });
  }
}
function setActive(state) {
  if(state === true) {
    map.on('click', onClick);
  }
  else {
    clear();
    map.un('click', onClick);
  }
}
function clear() {
  selectionLayer.clear();
  sidebar.setVisibility(false);
  if (overlay) {
    Viewer.removeOverlays(overlay);      
  }
  console.log("Clearing selection");
}
function onEnableInteraction(e) {
  if(e.interaction === 'featureInfo') {
    setActive(true);
  }
  else {
    setActive(false);
  }
}
function initCarousel(id, options, cb) {
  var carouselOptions = options || {
    navigation : true, // Show next and prev buttons
    slideSpeed : 300,
    paginationSpeed : 400,
    singleItem:true,
    rewindSpeed:200,
    navigationText: ['<svg class="o-icon-fa-chevron-left"><use xlink:href="#fa-chevron-left"></use></svg>', '<svg class="o-icon-fa-chevron-right"><use xlink:href="#fa-chevron-right"></use></svg>'],
    afterAction: cb
  };
  return $(id).owlCarousel(carouselOptions);
}

module.exports.init = init;
module.exports.clear = clear;
module.exports.getSelectionLayer = getSelectionLayer;
module.exports.getSelection = getSelection;
module.exports.getPin = getPin;
module.exports.getHitTolerance = getHitTolerance;
module.exports.identify = identify;

},{"../externs/owlcarousel-browserify":4,"./featurelayer":120,"./getfeatureinfo":128,"./maputils":149,"./popup":167,"./sidebar":175,"./style":177,"./style/styletypes":183,"./viewer":205,"jquery":26,"openlayers":29}],119:[function(require,module,exports){
"use strict";
var templates = {};
templates.default = require("./templates/featureinfotemplates/default");

function featureinfotemplates(template, attributes) {
    return templates[template](attributes);
}
module.exports = featureinfotemplates;

},{"./templates/featureinfotemplates/default":186}],120:[function(require,module,exports){
"use strict";

var ol = require('openlayers');

//create unmanaged layer
module.exports = function(features, map) {
  var collection = features ? [features] : [];
  var featureLayerStore = new ol.source.Vector({
      features: collection
  });
  var featureLayer = new ol.layer.Vector({
    source: featureLayerStore,
    map: map
  });
  return {
      addFeature: function addFeature(feature) {
          featureLayerStore.addFeature(feature);
      },
      getFeatures: function getFeatures() {
          return featureLayerStore.getFeatures();
      },
      getFeatureLayer: function getFeatureLayer() {
          return featureLayer;
      },
      getFeatureStore: function getFeatureStore() {
          return featureLayerStore;
      },
      clear: function clear() {
          featureLayerStore.clear();
      },
      clearAndAdd: function clearAndAdd(feature, style) {
          featureLayerStore.clear();
          featureLayer.setStyle(style);
          featureLayerStore.addFeature(feature);
      }
  }
}

},{"openlayers":29}],121:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var utils = require('./utils');
var permalink = require('./permalink/permalink');
var isEmbedded = require('./utils/isembedded');
var viewer = require('./viewer');

var tooltip;
var mapTarget;

function Init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-misc';
  mapTarget = viewer.getTarget();
  tooltip = options.tooltipText || 'Visa stor karta';

  render(target);
  bindUIActions();
}

function render(target) {
  var el = utils.createButton({
    id: 'o-fullscreen-button',
    cls: 'o-fullscreen-button',
    iconCls: 'o-icon-fa-expand',
    src: '#fa-expand',
    tooltipText: tooltip,
    tooltipPlacement: 'east'
  });
  if (isEmbedded(mapTarget)) {
    $(target).append(el);
  }
}

function bindUIActions() {
  $('#o-fullscreen-button button').click(function(e) {
    goFullScreen();
    $('#o-fullscreen-button button').blur();
    e.preventDefault();
  })
}

function goFullScreen() {
  var url = permalink.getPermalink();
  window.open(url);
}

module.exports.init = Init;

},{"./permalink/permalink":164,"./utils":189,"./utils/isembedded":195,"./viewer":205,"jquery":26}],122:[function(require,module,exports){
var getcenter = require('./geometry/getcenter');
var getarea = require('./geometry/getarea');

var geom = {};
geom.center = getcenter;
geom.area = getarea;

module.exports = geom;

},{"./geometry/getarea":123,"./geometry/getcenter":124}],123:[function(require,module,exports){
"use strict";

var round = require('../utils/round');

var getArea = function getArea(geometry_in, decimals) {
  var area = geometry_in.getArea ? geometry_in.getArea() : 0;
  if (decimals) {
    area = round(area, decimals);
  } else {
    area = round(area, '2');
  }
  return area;
}

module.exports = getArea;

},{"../utils/round":200}],124:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var Viewer = require('../viewer');

var getCenter = function getCenter(geometry_in, destination, axisOrientation) {
    var geometry = geometry_in.clone();

    if (destination) {
      geometry.transform(Viewer.getMap().getView().getProjection(), destination);
    }

    var type = geometry.getType();
    var center;
    switch (type) {
        case "Polygon":
            center = geometry.getInteriorPoint().getCoordinates();
            break;
        case "MultiPolygon":
            center = geometry.getInteriorPoints().getCoordinates()[0];
            break;
        case "Point":
            center = geometry.getCoordinates();
            break;
        case "MultiPoint":
            center = geometry[0].getCoordinates();
            break;
        case "LineString":
            center = geometry.getCoordinateAt(0.5);
            break;
        case "MultiLineString":
            center = geometry.getLineStrings()[0].getCoordinateAt(0.5);
            break;
        case "Circle":
            center = geometry.getCenter();
            break;
    }

    if (axisOrientation) {
      if (axisOrientation === 'reverse') {
        center.reverse();
      }
    }

    return center;
}

module.exports = getCenter;

},{"../viewer":205,"openlayers":29}],125:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var $geolocateButtonId = undefined;
var $geolocateButton = undefined;
var enabled = false;
var map = undefined;
var geolocation = undefined;
var marker = undefined;
var markerEl = undefined;
var baseUrl = undefined;
var zoomLevel;

function init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-navigation';
  map = viewer.getMap();
  baseUrl = viewer.getBaseUrl();
  zoomLevel = options.zoomLevel || viewer.getResolutions().length - 3 || 0;

  render(target);

  $geolocateButtonId = $('#o-geolocation-button');
  $geolocateButton = $('#o-geolocation-button button');

  markerEl = $('#o-geolocation_marker').get(0);
  marker = new ol.Overlay({
    positioning: 'center-center',
    element: markerEl,
    stopEvent: false
  });

  geolocation = new ol.Geolocation(({
    projection: map.getView().getProjection(),
    trackingOptions: {
      maximumAge: 10000,
      enableHighAccuracy: true,
      timeout: 600000
    }
  }));

  bindUIActions();
}

function render(target) {
  var tooltipText = 'Visa nuvarande position i kartan';
  var src = baseUrl + 'img/geolocation_marker.png';
  var markerImg = '<img id="o-geolocation_marker" src="' + src + '"/>';

  //Element for control
  var el = utils.createButton({
    id: 'o-geolocation-button',
    cls: 'o-geolocation-button',
    iconCls: 'o-icon-fa-location-arrow',
    src: '#fa-location-arrow',
    tooltipText: tooltipText,
    tooltipPlacement: 'east'
  });
  $(target).append(el);
  $('#o-map').prepend(markerImg);
}

function bindUIActions() {
  $geolocateButtonId.on('click', function(e) {
    enabled = false;
    toggle();
    $geolocateButton.blur();
    e.preventDefault();
  });
}

function toggle() {
  if ($geolocateButton.hasClass('o-geolocation-button-true')) {
    $geolocateButton.removeClass('o-geolocation-button-true');
    geolocation.setTracking(false);

    geolocation.un('change', updatePosition);
    map.removeOverlay(marker);
  } else {
    $geolocateButton.addClass('o-geolocation-button-true');
    map.addOverlay(marker);

    // Listen to position changes
    geolocation.on('change', updatePosition);
    geolocation.setTracking(true); // Start position tracking
  }
}

function updatePosition() {
  addPosition(getPositionVal());
}

function getPositionVal() {
  var current = {};
  current.position = geolocation.getPosition();
  current.accuracy = geolocation.getAccuracy();
  current.heading = geolocation.getHeading() || 0;
  current.speed = geolocation.getSpeed() || 0;
  current.m = Date.now();
  return current;
}

function addPosition(current) {
  var position = current.position;

  if (enabled === false && geolocation.getTracking()) {
    marker.setPosition(position);
    map.getView().animate({
      center: position,
      zoom: zoomLevel
    });
    enabled = true;
  } else if (geolocation.getTracking()) {
    marker.setPosition(position);
  }
}

module.exports.init = init;

},{"./utils":189,"./viewer":205,"jquery":26,"openlayers":29}],126:[function(require,module,exports){
"use strict";
var featureinfotemplates = require('./featureinfotemplates');
var replacer = require('../src/utils/replacer');
var geom = require('./geom');

module.exports = function(feature, layer) {
    var content = '<div><ul>';
    var attribute, li = '', title, val;
    //If layer is configured with attributes
    if(layer.get('attributes')) {
          //If attributes is string then use template named with the string
          if(typeof layer.get('attributes') === 'string') {
              //Use attributes with the template
              li = featureinfotemplates(layer.get('attributes'),feature.getProperties());
          }
          else {
              for(var i=0; i<layer.get('attributes').length; i++) {
                attribute = layer.get('attributes')[i];
                title = '';
                val = '';
                if (attribute['name']) {
                  if(feature.get(attribute['name'])) {
                      val = feature.get(attribute['name']);
                      if (attribute['title']) {
                        title = '<b>' + attribute['title'] + '</b>';
                      }
                      if (attribute['url']) {
                        if(feature.get(attribute['url'])) {
                        var url = createUrl(attribute['urlPrefix'], attribute['urlSuffix'], replacer.replace(feature.get(attribute['url']), feature.getProperties()));
                        val = '<a href="' + url + '" target="_blank">' +
                              feature.get(attribute['name']) +
                              '</a>';
                        }
                      }
                  }
                }
                else if (attribute['url']) {
                    if(feature.get(attribute['url'])) {
                        var text = attribute['html'] || attribute['url'];
                        var url = createUrl(attribute['urlPrefix'], attribute['urlSuffix'], replacer.replace(feature.get(attribute['url']), feature.getProperties()));
                        val = '<a href="' + url + '" target="_blank">' +
                              text +
                              '</a>';
                    }
                }
                else if (attribute['img']) {
                    if(feature.get(attribute['img'])) {
                        var url = createUrl(attribute['urlPrefix'], attribute['urlSuffix'], replacer.replace(feature.get(attribute['img']), feature.getProperties()));
                        var attribution = attribute['attribution'] ? '<div class="o-image-attribution">' + attribute['attribution'] + '</div>' : '';
                        val = '<div class="o-image-container">' +
                                  '<img src="' + url + '">' + attribution +
                              '</div>';
                    }
                }
                else if (attribute['html']) {
                  val = replacer.replace(attribute['html'], feature.getProperties(), {
                    helper: geom,
                    helperArg: feature.getGeometry()
                  });
                }

                var cls = ' class="' + attribute['cls'] + '" ' || '';

                li += '<li' + cls +'>' + title + val + '</li>';
              }
        }
    }
    else {
      //Clean feature attributes from non-wanted properties
      var attributes = filterObject(feature.getProperties(), ['FID_', 'geometry']);
      //Use attributes with the template
      li = featureinfotemplates('default',attributes);
    }
    content += li + '</ul></div>';
    return content;
}
function filterObject(obj, excludedKeys) {
    var result = {}, key;
    for (key in obj) {
        if(excludedKeys.indexOf(key) === -1) {
            result[key] = obj[key];
        }
    }
    return result;
}
function createUrl(prefix, suffix, url) {
    var p = prefix || '';
    var s = suffix || '';
    return p + url + s;
}

},{"../src/utils/replacer":199,"./featureinfotemplates":119,"./geom":122}],127:[function(require,module,exports){
var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');

var sourceType = {};
var projectionCode;
var source;

module.exports = function(id, layer) {
    projectionCode = viewer.getProjectionCode();
    source = viewer.getMapSource();
    var serverUrl = source[layer.get('sourceName')].url;
    var type = layer.get('type');
    //returns a promise with features as result
    return sourceType[type](id, layer, serverUrl);
}

sourceType.AGS_FEATURE = function agsFeature(id, layer, serverUrl) {
  var esriSrs = projectionCode.split(':').pop();
  var layerId = layer.get('id');
  var esrijsonFormat = new ol.format.EsriJSON();

  var url = serverUrl + '/' + layerId +
      '/query?f=json&' +
      'returnGeometry=true' +
      '&objectIds=' + id +
      '&geometryType=esriGeometryEnvelope'+
      '&inSR=' + esriSrs +
      '&outFields=*' +
      '&returnIdsOnly=false' +
      '&returnCountOnly=false' +
      '&geometryPrecision=2' +
      '&outSR=' + esriSrs;

  return $.ajax({
        url: url,
        dataType: 'jsonp'
  })
    .then(function(response) {
        if(response.error) {
            fail(response);
            return [];
        }
        else {
            var features = esrijsonFormat.readFeatures(response, {
                    featureProjection: viewer.getProjection()
            });
            return features;
        }
    }, fail
    );
}

sourceType.WFS = function(id, layer, serverUrl) {
  var geometryName = layer.get('geometryName');
  var format = new ol.format.GeoJSON({geometryName: geometryName});
  var url = serverUrl +'?';
  var data = 'service=WFS' +
      '&version=1.0.0' +
      '&request=GetFeature&typeName=' + layer.get('name') +
      '&outputFormat=json' +
      '&featureId=' + id;
  return $.ajax({
    url: url,
    data: data,
    type: 'POST',
    dataType: 'json'
  })
    .then(function(response) {
        return format.readFeatures(response);
    });
}

function fail(response) {
    if(response.error) {
        console.log(response.error.message + '\n' +
            response.error.details.join('\n'));
    }
}

},{"./viewer":205,"jquery":26,"openlayers":29}],128:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var maputils = require('./maputils');
var getAttributes = require('./getattributes');
var featureInfo = require('./featureinfo');

var map;

function getFeaturesFromRemote(evt) {
        map = Viewer.getMap();
        var requestResult = [];
        var requestPromises = getFeatureInfoRequests(evt).map(function(request) {
            return request.fn.then(function(feature) {
                var layer = Viewer.getLayer(request.layer);
                if(feature) {
                    requestResult.push({
                        title: layer.get('title'),
                        feature: feature,
                        content: getAttributes(feature, layer)
                    });
                    return requestResult;
                }
            });
        });
        return $.when.apply($, requestPromises).then(function(data) {
            return requestResult;
        });
}
function getFeatureInfoRequests(evt) {
    var requests = [];
    //Check for support of crossOrigin in image, absent in IE 8 and 9
    if('crossOrigin' in new(Image)) {
        map.forEachLayerAtPixel(evt.pixel, function(layer) {
            if (layer.get('queryable')) {
              var item = getGetFeatureInfoRequest(layer, evt.coordinate);
              if(item) {requests.push(item)};
            }
        });
    }
    //If canvas is tainted
    else if(isTainted(evt.pixel)) {
        var layers = Viewer.getQueryableLayers();
        layers.forEach(function(layer) {
            if (layer.get('queryable')) {

              //If layer is tainted, then create request for layer
              if(isTainted(evt.pixel, layer)) {
                  var item = getGetFeatureInfoRequest(layer, evt.coordinate);
                  if(item) {requests.push(item)};
              }

              //If layer is not tainted, test if layer hit at pixel
              else if(layerAtPixel(evt.pixel, layer)){
                  var item = getGetFeatureInfoRequest(layer, evt.coordinate);
                  if(item) {requests.push(item)};
              }
            }
        });
    }
    //If crossOrigin is not supported and canvas not tainted
    else {
        map.forEachLayerAtPixel(evt.pixel, function(layer) {
            if (layer.get('queryable') === true) {
              var item = getGetFeatureInfoRequest(layer, evt.coordinate);
              if (item) {
                requests.push(item)
              };
            }
        });
    }
    return requests;
}
function getGetFeatureInfoRequest(layer, coordinate) {
    var layerType = layer.get('type'),
    obj = {};
    obj.layer = layer.get('name');

    switch (layerType) {
      case 'WMTS':
        if(layer.get('featureinfoLayer')) {
            var featureinfoLayerName = layer.get('featureinfoLayer'),
            featureinfoLayer = Viewer.getLayer(featureinfoLayerName);
            return getGetFeatureInfoRequest(featureinfoLayer, coordinate);
        }
        else {
            return undefined;
        }
        break;
      case 'WMS':
        if(layer.get('featureinfoLayer')) {
            var featureinfoLayerName = layer.get('featureinfoLayer'),
            featureinfoLayer = Viewer.getLayer(featureinfoLayerName);
            return getGetFeatureInfoRequest(featureinfoLayer, coordinate);
        }
        else {
            obj.cb = "GEOJSON";
            obj.fn = getGetFeatureInfoUrl(layer, coordinate);
            return obj;
        }
        case 'AGS_TILE':
            if(layer.get('featureinfoLayer')) {
                var featureinfoLayerName = layer.get('featureinfoLayer'),
                featureinfoLayer = Viewer.getLayer(featureinfoLayerName);
                return getGetFeatureInfoRequest(featureinfoLayer, coordinate);
            }
            else {
                obj.fn = getAGSIdentifyUrl(layer, coordinate);
                return obj;
            }
      default:
        return undefined;
    }
}
function isTainted(pixel, layerFilter) {
    try {
        if(layerFilter) {
            map.forEachLayerAtPixel(pixel, function(layer) {
                return layerFilter === layer;
            });
        }
        else {
            map.forEachLayerAtPixel(pixel, function(layer) {});
        }
        return false;
    }
    catch(e) {
        console.log(e);
        return true;
    }
}
function layerAtPixel(pixel, matchLayer) {
    map.forEachLayerAtPixel(pixel, function(layer) {
        return matchLayer === layer;
    })
}
function getFeaturesAtPixel(evt, clusterFeatureinfoLevel) {
    map = Viewer.getMap();
    var result = [],
    cluster = false;
    map.forEachFeatureAtPixel(evt.pixel,
        function(feature, layer) {
          var l = layer;
          var queryable = false;
          if(layer) {
              queryable = layer.get('queryable');
          }
          if(feature.get('features')) {
              //If cluster
              var collection = feature.get('features');
              if (collection.length > 1) {
                var zoom = map.getView().getZoom();
                var zoomLimit = clusterFeatureinfoLevel === -1 ? Viewer.getResolutions().length : zoom + clusterFeatureinfoLevel;
                if(zoomLimit < Viewer.getResolutions().length) {
                    map.getView().setCenter(evt.coordinate);
                    map.getView().setZoom(zoom + 1);
                    cluster = true;
                    return true;
                }
                else {
                    collection.forEach(function(f) {
                          var item = {};
                          item.title = l.get('title');
                          item.feature = f;
                          item.content =  getAttributes(f,l);
                          result.push(item);
                    });
                }
              }
              else if(collection.length == 1 && queryable) {
                  var item = {};
                  item.title = l.get('title');
                  item.feature = collection[0];
                  item.content = getAttributes(collection[0],l);
                  result.push(item);
              }
          }
          else if(queryable) {
              var item = {};
              item.title = l.get('title');
              item.feature = feature;
              item.content = getAttributes(feature,l)
              result.push(item);
          }
        },
        {
          hitTolerance: featureInfo.getHitTolerance()
        });

    if(cluster) {
        return false;
    }
    else {
        return result;
    }
}
function getGetFeatureInfoUrl(layer, coordinate) {
    var url = layer.getSource().getGetFeatureInfoUrl(
    coordinate, map.getView().getResolution(), Viewer.getProjection(),
    {'INFO_FORMAT': 'application/json'});

    return $.ajax(url, {
      type: 'post'
    })
    .then(function(response) {
        if(response.error) {
            return [];
        }
        else {
            return maputils.geojsonToFeature(response);
        }
    }
    );
}
function getAGSIdentifyUrl(layer, coordinate) {
  var projectionCode = Viewer.getProjectionCode();
  var esriSrs = projectionCode.split(':').pop();
  var layerId = layer.get('id');
  var source = Viewer.getMapSource()[layer.get('sourceName')];
  var serverUrl = source.url;
  var esrijsonFormat = new ol.format.EsriJSON();
  var size = map.getSize();
  var tolerance = source.hasOwnProperty('tolerance') ? source.tolerance.toString() : 5;
  var extent = map.getView().calculateExtent(size);

  var url = serverUrl +
      '/identify?f=json&' +
      'returnGeometry=true' +
      '&geometryType=esriGeometryPoint'+
      '&sr=' + esriSrs +
      '&geometry=' + coordinate +
      '&outFields=*' +
      '&geometryPrecision=2' +
      '&tolerance=' + tolerance +
      '&layers=all:' + layerId +
      '&mapExtent=' + extent +
      '&imageDisplay=' + size + ',' + '96';

  return $.ajax({
        url: url,
        dataType: 'jsonp'
  })
    .then(function(response) {
        if(response.error) {
            return [];
        }
        else {
            var obj = {};
            obj.features = response.results;
            var features = esrijsonFormat.readFeatures(obj, {
                    featureProjection: Viewer.getProjection()
            });
            return features[0];
        }
    }
    );
}

module.exports.getFeaturesFromRemote = getFeaturesFromRemote;
module.exports.getFeaturesAtPixel = getFeaturesAtPixel;

},{"./featureinfo":118,"./getattributes":126,"./maputils":149,"./viewer":205,"jquery":26,"openlayers":29}],129:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');

var map;
var tooltip;
var extent;

function Init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-navigation';
  map = Viewer.getMap();
  tooltip = options.tooltipText || 'Zooma till hela kartan';
  extent = options.extent || map.getView().calculateExtent(map.getSize());
  render(target);
  bindUIActions();
}

function render(target) {
  var el = utils.createButton({
    id: 'o-home-button',
    iconCls: 'o-icon-fa-home',
    src: '#fa-home',
    tooltipText: tooltip
  });
  $(target).append(el);
}

function bindUIActions() {
  $('#o-home-button').on('click', function(e) {
    map.getView().fit(extent);
    $('#o-home-button button').blur();
    e.preventDefault();
  });
}

module.exports.init = Init;

},{"./utils":189,"./viewer":205,"jquery":26,"openlayers":29}],130:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');

var agsFeature = function agsFeature(layerOptions) {
  var agsDefault = {
    layerType: 'vector'
  };
  var sourceDefault = {};
  var agsOptions = $.extend(agsDefault, layerOptions);
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.sourceName]);
  sourceOptions.geometryName = agsOptions.geometryName;
  sourceOptions.filter = agsOptions.filter;
  sourceOptions.attribution = agsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.id = agsOptions.id;

  var agsSource = createSource(sourceOptions);
  return vector(agsOptions, agsSource);

  function createSource(options) {
    var vectorSource = null;
    var esriSrs = options.projectionCode.split(':').pop();
    var queryFilter = options.filter ? '&where=' + options.filter : '';
    var esrijsonFormat = new ol.format.EsriJSON();
    vectorSource = new ol.source.Vector({
      attributions: options.attribution,
      loader: function(extent, resolution, projection) {
        var that = this;
        var url = options.url + options.id +
          encodeURI('/query?f=json&' +
            'returnGeometry=true' +
            '&spatialRel=esriSpatialRelIntersects' +
            '&geometry=' + '{"xmin":' + extent[0] + ',"ymin":' +
              extent[1] + ',"xmax":' + extent[2] + ',"ymax":' + extent[3] +
              ',"spatialReference":{"wkid":' + esriSrs + '}}' +
            '&geometryType=esriGeometryEnvelope' +
            '&inSR=' + esriSrs + '&outFields=*' + '' +
            '&returnIdsOnly=false&returnCountOnly=false' +
            '&geometryPrecision=2' +
            '&outSR=' + esriSrs + queryFilter);
        $.ajax({
          url: url,
          dataType: 'jsonp',
          success: function(response) {
            if (response.error) {
              alert(response.error.message + '\n' +
                response.error.details.join('\n'));
            } else {

              // dataProjection will be read from document
              var features = esrijsonFormat.readFeatures(response, {
                featureProjection: projection
              });
              if (features.length > 0) {
                that.addFeatures(features);
              }
            }
          }
        });
      },
      strategy: ol.loadingstrategy.bbox
    });
    return vectorSource;
  }
}

module.exports = agsFeature;

},{"../viewer":205,"./vector":138,"jquery":26,"openlayers":29}],131:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var agsTile = function agsTile(layerOptions) {
  var agsDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {};
  var agsOptions = $.extend(agsDefault, layerOptions);
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  sourceOptions.attribution = agsOptions.attribution;
  sourceOptions.projection = viewer.getProjection();
  sourceOptions.params = agsOptions.params || {};
  sourceOptions.params.layers = "show:" + agsOptions.id;

  var agsSource = createSource(sourceOptions);
  return tile(agsOptions, agsSource);

  function createSource(options) {
    return new ol.source.TileArcGISRest({
      attributions: options.attribution,
      projection: options.projection,
      crossOrigin: 'anonymous',
      params: options.params,
      url: options.url
    });
  }
}

module.exports = agsTile;

},{"../viewer":205,"./tile":136,"jquery":26,"openlayers":29}],132:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var vector = require('./vector');

var featureLayer = function featureLayer(layerOptions) {
  var options = layerOptions;
  var sourceOptions = {};
  var vectorSource;
  sourceOptions.attribution = layerOptions.attribution;
  sourceOptions.features = layerOptions.features;

  vectorSource = createSource(sourceOptions);
  return vector(options, vectorSource);

  function createSource(options) {
    return new ol.source.Vector({
      attributions: options.attribution,
      features: options.features
    });
  }
}

module.exports = featureLayer;

},{"./vector":138,"openlayers":29}],133:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');
var isUrl = require('../utils/isurl');

var geojson = function geojson(layerOptions) {
  var baseUrl = viewer.getBaseUrl();
  var geojsonDefault = {
    layerType: 'vector'
  };
  var geojsonOptions = $.extend(geojsonDefault, layerOptions);
  var geojsonSource;
  var sourceOptions = {};
  sourceOptions.attribution = geojsonOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.sourceName = layerOptions.source;
  if (isUrl(geojsonOptions.source)) {
    sourceOptions.url = geojsonOptions.source;
  } else {
    geojsonOptions.sourceName = geojsonOptions.source;
    sourceOptions.url = baseUrl + geojsonOptions.source;
  }

  geojsonSource = createSource(sourceOptions);
  return vector(geojsonOptions, geojsonSource);

  function createSource(options) {
    return new ol.source.Vector({
      attributions: options.attribution,
      url: options.url,
      format: new ol.format.GeoJSON()
    });
  }
}

module.exports = geojson;

},{"../utils/isurl":196,"../viewer":205,"./vector":138,"jquery":26,"openlayers":29}],134:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');

var group = function group(layerOptions) {
  var groupDefault = {
    layerType: 'group',
    styleName: 'default'
  };
  var groupOptions = $.extend(groupDefault, layerOptions);
  return new ol.layer.Group(groupOptions);
}

module.exports = group;

},{"jquery":26,"openlayers":29}],135:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var tile = require('./tile');

var osm = function osm(layerOptions) {
  var osmDefault = {};
  var osmOptions = $.extend(osmDefault, layerOptions);

  var osmSource = createSource();
  return tile(osmOptions, osmSource);

  function createSource() {
    return new ol.source.OSM()
  }
}

module.exports = osm;

},{"./tile":136,"jquery":26,"openlayers":29}],136:[function(require,module,exports){
"use strict";

var ol = require('openlayers');

module.exports = function tile(options, source) {
  options.source = source;
  return new ol.layer.Tile(options);
}

},{"openlayers":29}],137:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');
var isUrl = require('../utils/isurl');

var topojson = function topojson(layerOptions) {
  var baseUrl = viewer.getBaseUrl();
  var topojsonDefault = {
    layerType: 'vector'
  };
  var topojsonOptions = $.extend(topojsonDefault, layerOptions);
  var topojsonSource;
  var sourceOptions = {};
  sourceOptions.attribution = topojsonOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.sourceName = layerOptions.source;
  if (isUrl(topojsonOptions.source)) {
    sourceOptions.url = topojsonOptions.source;
  } else {
    topojsonOptions.sourceName = topojsonOptions.source;
    sourceOptions.url = baseUrl + topojsonOptions.source;
  }

  topojsonSource = createSource(sourceOptions);
  return vector(topojsonOptions, topojsonSource);

  function createSource(options) {
    return new ol.source.Vector({
      attributions: options.attribution,
      url: options.url,
      format: new ol.format.TopoJSON({
        defaultDataProjection: options.projectionCode
      })
    });
  }
}

module.exports = topojson;

},{"../utils/isurl":196,"../viewer":205,"./vector":138,"jquery":26,"openlayers":29}],138:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var style = require('../style')();
var viewer = require('../viewer');

module.exports = function vector(options, source) {
  var vectorLayer;
  switch (options.layerType) {
    case 'vector':
      options.source = source;
      options.style = style.createStyle(options.style);
      vectorLayer = new ol.layer.Vector(options);
      break;
    case 'cluster':
      options.clusterOptions = options.clusterOptions || {};
      if(options.type === 'WFS' || options.type === 'AGS_FEATURE'){
        source.clusterOptions = viewer.getMapSource()[options.sourceName].clusterOptions || {};
      } else {
        source.clusterOptions = {};
      }
      var distance = 60;
      var clusterDistance = options.clusterOptions.clusterDistance || source.clusterOptions.clusterDistance || viewer.getClusterOptions().clusterDistance || distance;
      var clusterMaxZoom = options.clusterOptions.clusterMaxZoom || source.clusterOptions.clusterMaxZoom || viewer.getClusterOptions().clusterMaxZoom || viewer.getResolutions().length-1;
      var clusterInitialDistance = viewer.getSettings().zoom > clusterMaxZoom ? 0 : clusterDistance;
      var map = viewer.getMap();
      var view = map.getView();
      var maxZoom = view.getResolutions().length-1;
      options.source = new ol.source.Cluster({
        attributions: options.attribution,
        source: source,
        distance: clusterInitialDistance
      });
      options.source.setProperties({
        clusterDistance : clusterDistance,
        clusterMaxZoom : clusterMaxZoom
      });
      options.style = style.createStyle(options.style, options.clusterStyle);
      vectorLayer = new ol.layer.Vector(options);
      map.on('movestart', onMoveStart);

      function onMoveStart(evt) {
        var mapZoom = view.getZoomForResolution(evt.frameState.viewState.resolution);
        var clusterDistance = options.source.getProperties().clusterDistance || distance;
        var clusterMaxZoom = options.source.getProperties().clusterMaxZoom || maxZoom;
        map.once('moveend', function(evt) {
          var currentZoom = parseInt(view.getZoom(), 10);
          if (currentZoom !== mapZoom) {
            if (currentZoom >= clusterMaxZoom) {
              options.source.setDistance(0);
            } else if (currentZoom < clusterMaxZoom) {
              options.source.setDistance(clusterDistance);
            }
          }
        })
      }
      break;
    case 'image':
      options.source = new ol.source.ImageVector({
        source: source,
        style: style.createStyle(options.style)
      });
      vectorLayer = new ol.layer.Image(options);
      break;
    case 'vectortile':
      options.source = source;
      options.style = style.createStyle(options.style);
      vectorLayer = new ol.layer.VectorTile(options);
      break;
  }
  return vectorLayer;
}

},{"../style":177,"../viewer":205,"openlayers":29}],139:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');
var maputils = require('../maputils');

var vectortile = function vectortile(layerOptions) {
  var vectortileDefault = {
    layerType: 'vectortile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {};
  var vectortileOptions = $.extend(vectortileDefault, layerOptions);
  vectortileOptions.sourceName = vectortileOptions.name;
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  sourceOptions.attributions = vectortileOptions.attribution;
  sourceOptions.projection = viewer.getProjectionCode() || 'EPSG:3857';
  if(sourceOptions.tileGrid){
    sourceOptions.tileGrid = maputils.tileGrid(sourceOptions.tileGrid);
  } else {
    sourceOptions.tileGrid = viewer.getTileGrid();
  }
  
  var vectortileSource = createSource(sourceOptions, vectortileOptions);
  return vector(vectortileOptions, vectortileSource);
}

function createSource(options, vectortileOptions) {
  var format;
  switch(vectortileOptions.format) {
    case 'topojson':
    format = new ol.format.TopoJSON();
    break;
    case 'geojson':
    format = new ol.format.GeoJSON();
    break;
    case 'pbf':
    format = new ol.format.MVT();
    break;
  }
  if(vectortileOptions.layerURL){
    options.url += vectortileOptions.layerURL;
  }
  else {
    options.url += vectortileOptions.layerName + '@'  + vectortileOptions.gridset + '@' + vectortileOptions.format + '/{z}/{x}/{-y}.'+ vectortileOptions.format;
  }
  options.format = format;
  return new ol.source.VectorTile(options);
}

module.exports = vectortile;
},{"../maputils":149,"../viewer":205,"./vector":138,"jquery":26,"openlayers":29}],140:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');

var wfs = function wfs(layerOptions) {
  var wfsDefault = {
    layerType: 'vector'
  };
  var sourceDefault = {};
  var wfsOptions = $.extend(wfsDefault, layerOptions);
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.sourceName]);
  wfsOptions.featureType = sourceOptions.featureType = wfsOptions.id;
  sourceOptions.geometryName = wfsOptions.geometryName;
  sourceOptions.filter = wfsOptions.filter;
  sourceOptions.attribution = wfsOptions.attribution;
  sourceOptions.resolutions = viewer.getResolutions();
  sourceOptions.projectionCode = viewer.getProjectionCode();

  sourceOptions.strategy = layerOptions.strategy ? layerOptions.strategy : sourceOptions.strategy;
  switch (sourceOptions.strategy) {
    case 'all':
      sourceOptions.loadingstrategy = ol.loadingstrategy.all;
    break;
    case 'tile':
    sourceOptions.loadingstrategy = ol.loadingstrategy.tile(ol.tilegrid.createXYZ({
        maxZoom: sourceOptions.resolutions.length
      }));
    break;
    default:
    sourceOptions.loadingstrategy = ol.loadingstrategy.bbox;
    break;
  }
  var wfsSource = createSource(sourceOptions);
  return vector(wfsOptions, wfsSource);

  function createSource(options) {
    var vectorSource = null;
    var serverUrl = options.url;
    var queryFilter;

    //If cql filter then bbox must be used in the filter.
    if(options.strategy === 'all'){
      queryFilter = options.filter ? '&CQL_FILTER=' + options.filter : '';
    }
    else{
      queryFilter = options.filter ? '&CQL_FILTER=' + options.filter + ' AND BBOX(' + options.geometryName + ',' : '&BBOX=';
    }
    var bboxProjectionCode = options.filter ? "'" + options.projectionCode + "')" : options.projectionCode;
    vectorSource = new ol.source.Vector({
      attributions: options.attribution,
      format: new ol.format.GeoJSON({
        geometryName: options.geometryName
      }),
      loader: function(extent, resolution, projection) {
        var url = serverUrl +
          '?service=WFS&' +
          'version=1.1.0&request=GetFeature&typeName=' + options.featureType +
          '&outputFormat=application/json' +
          '&srsname=' + options.projectionCode;
        url += options.strategy === 'all' ? queryFilter : queryFilter + extent.join(',') + ',' + bboxProjectionCode;
        $.ajax({
            url: url,
            cache: false
          })
          .done(function(response) {
            vectorSource.addFeatures(vectorSource.getFormat().readFeatures(response));
          });
      },
      strategy: options.loadingstrategy
    });
    return vectorSource;
  }
}

module.exports = wfs;

},{"../viewer":205,"./vector":138,"jquery":26,"openlayers":29}],141:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var wms = function wms(layerOptions) {
  var wmsDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {
    version: '1.1.1',
    gutter: 0,
    format: 'image/png'
  };
  var wmsOptions = $.extend(wmsDefault, layerOptions);
  wmsOptions.name.split(':').pop();
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  sourceOptions.attribution = wmsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.id = wmsOptions.id;
  sourceOptions.tileGrid = viewer.getTileGrid();
  sourceOptions.format = wmsOptions.format ? wmsOptions.format : sourceOptions.format;

  var wmsSource = createSource(sourceOptions);
  return tile(wmsOptions, wmsSource);

  function createSource(options) {
    return new ol.source.TileWMS(({
      attributions: options.attribution,
      url: options.url,
      gutter: options.gutter,
      crossOrigin: 'anonymous',
      projection: options.projectionCode,
      tileGrid: options.tileGrid,
      params: {
        'LAYERS': options.id,
        'TILED': true,
        'VERSION': options.version,
        'FORMAT': options.format
      }
    }))
  }
}

module.exports = wms;

},{"../viewer":205,"./tile":136,"jquery":26,"openlayers":29}],142:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var wmts = function wmts(layerOptions) {
  var wmtsDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {
    matrixSet: viewer.getProjectionCode(),
    matrixIdsPrefix: viewer.getProjectionCode() + ':',
    format: 'image/png',
    resolutions: viewer.getResolutions(),
    tileSize: [256, 256]
  };
  var wmtsOptions = $.extend(wmtsDefault, layerOptions);
  wmtsOptions.name.split(':').pop();
  wmtsOptions.sourceName = wmtsOptions.name;
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  if (wmtsOptions.hasOwnProperty('format')) {
    sourceOptions.format = wmtsOptions.format;
  }
  sourceOptions.attribution = wmtsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.matrixIds = [];
  sourceOptions.resolutions.forEach(function(resolution, i) {
    sourceOptions.matrixIds[i] = sourceOptions.matrixIdsPrefix + i;
  });
  sourceOptions.projectionExtent = viewer.getProjection().getExtent();
  sourceOptions.id = wmtsOptions.id;

  var wmtsSource = createSource(sourceOptions);
  return tile(wmtsOptions, wmtsSource);

  function createSource(options) {
    return new ol.source.WMTS({
      crossOrigin: 'anonymous',
      attributions: options.attribution,
      url: options.url,
      projection: options.projectionCode,
      layer: options.id,
      matrixSet: options.matrixSet,
      format: options.format,
      tileGrid: new ol.tilegrid.WMTS({
        origin: options.origin || ol.extent.getTopLeft(options.projectionExtent),
        resolutions: options.resolutions,
        matrixIds: options.matrixIds,
        tileSize: options.tileSize
      }),
      style: 'default'
    })
  }
}

module.exports = wmts;

},{"../viewer":205,"./tile":136,"jquery":26,"openlayers":29}],143:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var xyz = function xyz(layerOptions) {
  var xyzDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {};
  var xyzOptions = $.extend(xyzDefault, layerOptions);
  xyzOptions.sourceName = xyzOptions.id;
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  sourceOptions.attributions = xyzOptions.attribution;
  sourceOptions.projection = viewer.getProjectionCode() || 'EPSG:3857';
  sourceOptions.tileGrid = viewer.getTileGrid();
  if(xyzOptions.layerURL){
    sourceOptions.url += xyzOptions.layerURL;
  }
  else {
    var format = sourceOptions.sourceName.split('.')[1],
      url = sourceOptions.sourceName.split('.')[0] + '/{z}/{x}/{y}.';
    url += format;
    sourceOptions.url = url;
  }
  var xyzSource = createSource(sourceOptions);
  return tile(xyzOptions, xyzSource);
}

function createSource(options) {
  options.crossOrigin = 'anonymous';
  return new ol.source.XYZ(options);
}

module.exports = xyz;

},{"../viewer":205,"./tile":136,"jquery":26,"openlayers":29}],144:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var mapUtils = require('./maputils');
var group = require('./layer/group');
var type = {};
var layerCreator;
type.WFS = require('./layer/wfs');
type.AGS_FEATURE = require('./layer/agsfeature');
type.TOPOJSON = require('./layer/topojson');
type.GEOJSON = require('./layer/geojson');
type.WMS = require('./layer/wms');
type.WMTS = require('./layer/wmts');
type.AGS_TILE = require('./layer/agstile');
type.XYZ = require('./layer/xyz');
type.OSM = require('./layer/osm');
type.VECTORTILE = require('./layer/vectortile');
type.FEATURE = require('./layer/featurelayer');
type.GROUP = groupLayer;

layerCreator = function layerCreator(opt_options) {
  var defaultOptions = {
    name: undefined,
    id: undefined,
    title: undefined,
    group: 'none',
    opacity: 1,
    geometryName: 'geom',
    geometryType: undefined,
    filter: undefined,
    layerType: undefined,
    legend: false,
    sourceName: undefined,
    attribution: undefined,
    style: 'default',
    styleName: undefined,
    queryable: true,
    minResolution: undefined,
    maxResolution: undefined,
    visible: false,
    type: undefined,
    extent: undefined,
    attributes: undefined,
    tileSize: viewer.getTileSize()
  };
  var projection = viewer.getProjection();
  var options = opt_options || {};
  var layerOptions = $.extend(defaultOptions, options);
  var name = layerOptions.name;
  layerOptions.minResolution = layerOptions.hasOwnProperty('minScale') ? mapUtils.scaleToResolution(layerOptions.minScale, projection): undefined;
  layerOptions.maxResolution = layerOptions.hasOwnProperty('maxScale') ? mapUtils.scaleToResolution(layerOptions.maxScale, projection): undefined;
  layerOptions.extent = layerOptions.extent || viewer.getExtent();
  layerOptions.sourceName = layerOptions.source;
  layerOptions.styleName = layerOptions.style;
  if (layerOptions.id === undefined) {
    layerOptions.id = name.split('__').shift();
  }

  layerOptions.name = name.split(':').pop();

  if (type.hasOwnProperty(layerOptions.type)) {
    return type[layerOptions.type](layerOptions, layerCreator);
  } else {
    console.log('Layer type is missing or layer type is not correct. Check your layer definition: ');
    console.log(layerOptions);
  }
}

function groupLayer(options) {
  var layers;
  var layerOptions;
  if (options.hasOwnProperty('layers')) {
    layers = options.layers.map(function(layer) {
      return layerCreator(layer);
    });

    layerOptions = {};
    layerOptions.layers = layers;
    return group($.extend(options, layerOptions));
  } else {
    console.log('Group layer has no layers');
  }
}

module.exports = layerCreator;

},{"./layer/agsfeature":130,"./layer/agstile":131,"./layer/featurelayer":132,"./layer/geojson":133,"./layer/group":134,"./layer/osm":135,"./layer/topojson":137,"./layer/vectortile":139,"./layer/wfs":140,"./layer/wms":141,"./layer/wmts":142,"./layer/xyz":143,"./maputils":149,"./viewer":205,"jquery":26}],145:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');
var modal = require('./modal');
var validateUrl = require('./utils/validateurl');

var symbolSize = 20;
var styleSettings;
var baseUrl;
var hasMapLegend;

function init(opt_options) {
  var options = opt_options || {};

  baseUrl = viewer.getBaseUrl();
  hasMapLegend = options.hasOwnProperty('hasMapLegend') ? options.hasMapLegend : true;
  styleSettings = viewer.getStyleSettings();

  render();
  addLegend(viewer.getGroups('top'));
}

function render() {
  $('#o-menutools').append('<li class="o-menu-item"><div class="o-menu-item-divider"></div><li>');
}

function getSymbol(style) {
  var symbol='';
  var s = style[0];
  if (s[0].hasOwnProperty('icon')) {
    var src = validateUrl(s[0].icon.src, baseUrl);
    // var scale = style.icon.scale || undefined;
    var format = s[0].format || 'png';
    if (format == 'png') {
      symbol = '<div class="o-legend-item-img"><img style="width: auto; height: 20px;" src="' + src + '"></div>'
    }
    else if (format == 'svg') {
      var o = '<object type="image/svg+xml" data="' + src + '" style="width: 20px;"></object>';
      var inlineStyle = 'background: url(' + src + ') no-repeat;width: 20px; height: 20px;background-size: 20px;';
      symbol = '<div class="o-legend-item-img">' + o + '</div>';
    }
  }
  else if (s[0].hasOwnProperty('fill')) {
    var fill = '';
    for(var i=0; i<s.length; i++) {
      fill += createFill(s[i]);
    }
    symbol += '<div class="o-legend-item-img"><svg height="' + symbolSize + '" width="' + symbolSize + '">';
    symbol += fill;
    symbol += '</svg></div>';
  }
  else if (s[0].hasOwnProperty('stroke')) {
    var stroke = '';
    for(var i=0; i<s.length; i++) {
      stroke += createStroke(s[i]);
    }
    symbol += '<div class="o-legend-item-img"><svg height="' + symbolSize + '" width="' + symbolSize + '">';
    symbol += stroke;
    symbol += '</svg></div>';
  }
  else if (s[0].hasOwnProperty('circle')) {
    var circle = '';
    for(var i=0; i<s.length; i++) {
      circle += createCircle(s[i]);
    }
    symbol += '<div class="o-legend-item-img"><svg height="' + symbolSize + '" width="' + symbolSize + '">';
    symbol += circle;
    symbol += '</svg></div>';
  }
  else if (s[0].hasOwnProperty('image')) {
    var src = validateUrl(s[0].image.src, baseUrl);
    var inlineStyle = 'background: url(' + src + ') no-repeat;width: 30px; height: 30px;background-size: 30px;';
    symbol = '<div class="o-legend-item-img" style="' + inlineStyle +'"></div>';
  }

  return symbol;
}

function createFill(fillProperties) {
  var f = fillProperties;
  var strokeWidth = 0;

  if(f.hasOwnProperty('stroke')) {
    strokeWidth = f.stroke.width >=3 ? 3 : f.stroke.width;
    var stroke = 'stroke:' + f.stroke.color + ';' || 'stroke:none;';
    stroke += 'stroke-width:' + strokeWidth + ';' || '';
    stroke += 'stroke-dasharray:' + f.stroke.lineDash + ';' || '';
  }

  var fillSize = symbolSize - 4; //-2-2
  var fill = '<rect x="2" y="2" rx="2" ry="2" width="' + fillSize + '" height="' + fillSize + '" ';
  fill += f.hasOwnProperty('fill') ? 'style="fill:' + f.fill.color + ';' : 'style="fill:none;';
  fill += stroke;
  fill += '"></rect>';

  return fill;
}

function createCircle(circleProperties) {
  var c = circleProperties.circle;
  var strokeWidth = 0;

  if(c.hasOwnProperty('stroke')) {
    strokeWidth = c.stroke.width >=3 ? 3 : c.stroke.width;
    var stroke = 'stroke:' + c.stroke.color + ';' || 'stroke:none;';
    stroke += 'stroke-width:' + strokeWidth + ';' || '';
  }

  var size = symbolSize/2;
  var fill = '<circle cx="' + size + '" cy="' + size + '" r="' + c.radius + '" ';
  fill += c.hasOwnProperty('fill') ? 'style="fill:' + c.fill.color + ';' : 'style="fill:none;';
  fill += stroke;
  fill += '"></circle>';

  return fill;
}

function createStroke(strokeProperties) {
  var s = strokeProperties;
  var strokeWidth = s.stroke.width > 4 ? 4 : s.stroke.width;
  strokeWidth = s.stroke.width < 2 ? 2 : strokeWidth;
  var stroke = '<line x1 = "2" y1= "' + (symbolSize-4).toString() + '" x2="' + (symbolSize-4).toString() + '" y2="2" ';
  stroke += 'style="';
  stroke += 'stroke:' + s.stroke.color + ';' || 'stroke:none;';
  stroke += 'stroke-width:' + strokeWidth + ';' || '';
  stroke += 'stroke-dasharray:' + s.stroke.lineDash + ';' || '';
  stroke += '"/>';

  return stroke;
}

function addAbstractButton(item) {
  var infoTextButton =  '<div class="o-legend-item-info o-abstract" id="o-legend-item-info-' + item + '">' +
                          '<svg class="o-icon-fa-info-circle"><use xlink:href="#fa-info-circle"></use></svg>' +
                        '</div>';
  return infoTextButton;
}

function createLegendItem(layerid, layerStyle, inSubgroup) {
  var layername = layerid.split('o-legend-').pop();
  var layer = viewer.getLayer(layername);
  var subClass = inSubgroup ? ' o-legend-subitem' : '';
  var legendItem = '';

  if (layerStyle && layerStyle[0][0].hasOwnProperty('filter')) {

    if (layerStyle[0][0].hasOwnProperty('legend')) {
      legendItem += '<li class="o-legend ' + layername + '">';
      legendItem += '<ul id="o-group-' + layername + '" class="o-legend-group o-ul-expand-false"><li class="' + layername + '" id="' + layerid + '">';
    } else {
      legendItem += '<li class="o-legend ' + layername + '" id="' + layerid + '">';
    }

    legendItem += '<div class ="o-legend-item' + subClass + '"><div class="o-checkbox">' +
                    '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                    '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                  '</div>';
    legendItem += '<div class="o-legend-item-title o-truncate">' + layer.get('title') + '</div>';

    if(layer.get('abstract')){
      legendItem += addAbstractButton(layername);
    }

    if (layerStyle[0][0].hasOwnProperty('legend')) {
      legendItem += '<div class="o-icon-expand o-icon-expand-false">' +
                      '<svg class="o-icon-fa-chevron-right">' +
                        '<use xlink:href="#fa-angle-double-right"></use>' +
                      '</svg>' +
                      '<svg class="o-icon-fa-chevron-down">' +
                        '<use xlink:href="#fa-angle-double-down"></use>' +
                      '</svg>' +
                    '</div>';
      legendItem += '</div></li>';

      layerStyle.forEach(function (styleArray) {
        legendItem += '<li class="o-legend ' + layername + '" id="' + layername + '"><div class ="o-legend-subitem">';
        legendItem += '<div class="o-checkbox o-checkbox-false"></div>';
        legendItem += layer.get('styleName') ? getSymbol([styleArray]) : '';
        legendItem += '<div class="o-legend-subitem-title">' + styleArray[0].legend + '</div></div></li>';
      });

      legendItem += '</ul></li>'
    }
  } else {
    legendItem += '<li class="o-legend ' + layername + '" id="' + layerid + '"><div class ="o-legend-item' + subClass + '"><div class="o-checkbox">' +
                    '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                    '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                  '</div>';
    legendItem +=  layer.get('styleName') ? getSymbol(styleSettings[layer.get('styleName')]) : '';
    legendItem += '<div class="o-legend-item-title o-truncate">' + layer.get('title') + '</div>';

    if(layer.get('abstract')){
      legendItem += addAbstractButton(layername);
    }

    legendItem += '</div></li>';
  }

  return legendItem;
}

function createGroup(group, parentGroup) {
  var legendGroup;
  var overlayGroup;
  var abstract = '';

  if (group.hasOwnProperty('overlayGroup')) {
    overlayGroup = group.name;
  }

  if (group.abstract) {
    abstract += addAbstractButton(group.name);
  }

  if (parentGroup) {
    var indent = $(parentGroup).parent().closest('ul').hasClass('o-legend-group') ? 'o-legend-indent' : '';

    legendGroup = '<li class="o-legend ' + group.name + ' o-top-item" id="' + group.name + '">' +
                    '<ul id="o-group-' + group.name + '" class="o-legend-group o-legend-subgroup ' + indent +'">' +
                      '<li class="o-legend-header o-legend-subheader ' + group.name + '" id="' + group.name + '"><div class="o-legend-item">' +
                        '<div class="o-checkbox">' +
                          '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                          '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                        '</div>' +
                        '<div class="o-legend-subgroup-title o-truncate">' +
                          group.title +
                        '</div>' +
                        '<div class="o-icon-expand">' +
                          '<svg class="o-icon-fa-chevron-right"><use xlink:href="#fa-angle-double-right"></use></svg>' +
                          '<svg class="o-icon-fa-chevron-down"><use xlink:href="#fa-angle-double-down"></use></svg>' +
                        '</div>' + abstract +
                      '</div></li>' +
                    '</ul>' +
                  '</li>';
    parentGroup.append(legendGroup);
  } else {
    legendGroup = '<li>' +
                    '<ul id="o-group-' + group.name + '" class="o-legend-group">' +
                      '<li class="o-legend-header"><div class="o-legend-item">' + group.title +
                        '<div class="o-icon-expand">' +
                          '<svg class="o-icon-fa-chevron-right"><use xlink:href="#fa-chevron-right"></use></svg>' +
                          '<svg class="o-icon-fa-chevron-down"><use xlink:href="#fa-chevron-down"></use></svg>' +
                        '</div>' + abstract +
                      '</div></li>' +
                    '</ul>' +
                  '</li>';
    $('#o-legendlist .o-legendlist').append(legendGroup);
  }

  if (group.expanded == true) {
    $('#o-group-' + group.name +' .o-icon-expand').addClass('o-icon-expand-true');
    $('#o-group-' + group.name +' .o-checkbox').addClass('o-checkbox-false');
  } else {
    $('#o-group-' + group.name +' .o-icon-expand').addClass('o-icon-expand-false');
    $('#o-group-' + group.name +' .o-checkbox').addClass('o-checkbox-false');
    $('#o-group-' + group.name).addClass('o-ul-expand-false');
  }

  $('#o-group-' + group.name + ' .o-legend-header').on('click', function(evt) {

    if ($(evt.target).closest('div').hasClass('o-checkbox')) {
      toggleSubGroupCheck($(this).parent(), true);
    } else if ($(evt.target).closest('div').hasClass('o-abstract')) {

    } else {
      toggleGroup($(this));
    }

    evt.preventDefault();
  });

  if (group.hasOwnProperty('groups')) {
    group.groups.forEach(function(subgroup) {
      createGroup(subgroup, $('#o-group-' + group.name));
    });
  }
}

function addLegend(groups) {
  var layers = viewer.getMap().getLayers().getArray();
  var overlayGroup;
  var item = '';

  //Add legend groups
  var legend = '<div id="o-legendlist"><ul class="o-legendlist"></ul></div>';
  $('#o-mapmenu').append(legend);

  groups.forEach(function(group) {
    createGroup(group);
  });

  //Add map legend unless set to false
  if(hasMapLegend) {
    var mapLegend = '<div id="o-map-legend"><ul id="o-legend-overlay"><li class="o-legend o-hidden"><div class ="o-toggle-button o-toggle-button-max">' +
                        '<svg class="o-icon-fa-angle-double-down"><use xlink:href="#fa-angle-double-down"></use></svg>' +
                        '<svg class="o-icon-fa-angle-double-up"><use xlink:href="#fa-angle-double-up"></use></svg>' +
                    '</div></li><li><ul id="o-overlay-list"></li></ul></ul><ul id="o-map-legend-background"></ul></div>';
    $('#o-map').append(mapLegend);

    //Add divider to map legend if not only background
    if(overlayGroup) {
      $('#o-map-legend-background').prepend('<div class="o-legend-item-divider"></div>');
    };
  }

  //Add layers to legend
  layers.forEach(function(layer) {

    var name = (layer.get('name'));
    var layerStyle = styleSettings[layer.get('styleName')];
    //Check if layer belongs to subgroup
    var inSubgroup = $('#o-group-' + layer.get('group')).closest('ul').parent().closest('ul').hasClass('o-legend-group');
    var title = '<div class="o-legend-item-title o-truncate">' + layer.get('title') + '</div>';
    var rootGroup;

    //Add abstract button
    if(layer.get('abstract')){
      title += addAbstractButton(name);
    }
    title += '</div></li>';

    //Append layer to group in legend. Add to default group if not defined.
    if(layer.get('group') == 'background') {

      //Append background layers to menu
      item = '<li class="o-legend ' + name + '" id="' + name + '"><div class ="o-legend-item"><div class="o-checkbox"><svg class="o-icon-fa-check"><use xlink:href="#fa-check"></use></svg></div>';
      item += title;
      $('#o-group-background .o-legend-header').after(item);

      //Append background layers to map legend
      item = '<li class="o-legend ' + name + '" id="o-legend-' + name + '"><div class ="o-legend-item">'
      item += layer.get('styleName') ? getSymbol(styleSettings[layer.get('styleName')]) : '';
      item += '</div>';
      $('#o-map-legend-background').prepend(item);

    } else if(layer.get('group') && ((layer.get('group') != 'none'))) {

      //Append layer to group
      item = createLegendItem(name, layerStyle, inSubgroup);
      if ($('#o-group-' + layer.get('group')).children('li.o-top-item:last').length) {
        $('#o-group-' + layer.get('group')).children('li.o-top-item:last').after(item);
      } else {
        $('#o-group-' + layer.get('group') + ' .o-legend-header').after(item);
      }

      if(layer.get('legend') == true || layer.getVisible(true)) {
        //Append to map legend
        item = '<li class="o-legend ' + name + '" id="o-legend-' + name + '"><div class ="o-legend-item"><div class="o-checkbox">' +
                  '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                  '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                '</div>';
        item += layer.get('styleName') ? getSymbol(styleSettings[layer.get('styleName')]) : '';
        item += title;
        $('#o-overlay-list').prepend(item);
      }
    }

    //Check map legend to make sure minimize button appears
    checkToggleOverlay();

    //Append class according to visiblity and if group is background
    if (layer.get('group') == 'background') {
      if (layer.getVisible()==true) {
        $('#' + name + ' .o-checkbox').addClass('o-check-true');
        $('#o-legend-' + name).addClass('o-check-true-img');
      } else {
        $('#' + name + ' .o-checkbox').addClass('o-check-false');
        $('#o-legend-' + name).addClass('o-check-false-img');
      }
    } else {
      if (layer.getVisible()==true) {
        $('.' + name + ' .o-checkbox').addClass('o-checkbox-true');

        if (inSubgroup) {
          rootGroup = $('#' + name).parents('ul [id^=o-group-]:last');
          if (!$(rootGroup).find('.o-icon-expand:first').hasClass('o-icon-expand-true')) {
            toggleGroup($(rootGroup).find('li.o-legend-header:first'));
          }

          toggleSubGroupCheck($('#' + name).parents('ul').has('.o-legend-header').first(), false);
        } else {
          $('#o-group-' + layer.get('group') + ' .o-icon-expand:first').removeClass('o-icon-expand-false');
          $('#o-group-' + layer.get('group') + ' .o-icon-expand:first').addClass('o-icon-expand-true');
          $('#o-group-' + layer.get('group')).removeClass('o-ul-expand-false');
        }

      } else {
        $('.' + name + ' .o-checkbox').addClass('o-checkbox-false');

        if (inSubgroup) {
          toggleSubGroupCheck($('#' + name).parents('ul').has('.o-legend-header').first(), false);
        }
      }
    }

    //Event listener for tick layer
    $('#' + name).on('click', function(evt) {
      if ($(evt.target).closest('div').hasClass('o-icon-expand')) {
        toggleGroup($(this));
      } else {
        $(this).each(function() {
          var that = this;
          toggleCheck($(that).attr("id"));
        });

        evt.preventDefault();
      }
    });

    $('#o-legend-' + name).on('click', function(evt) {
      $(this).each(function() {
        var that = this;
        toggleCheck($(that).attr("id"));
      });

      evt.preventDefault();
    });
  });

  $('.o-abstract').on('click', function(evt) {
    $(this).each(function() {
      var that = this;
      showAbstract($(that));
    });
    evt.stopPropagation();
    evt.preventDefault();
  });

  //Toggle map legend
  $('#o-legend-overlay .o-toggle-button').on('click', function(evt) {
    toggleOverlay();
    evt.preventDefault();
  });

  $('#o-map-legend-background li').on("mouseover", function (evt) {
    var legendId = $(evt.target).closest('li').attr('id');
    var layer = viewer.getLayer(legendId.split("o-legend-")[1]);
    $(this).attr('title', layer.get('title'));
  });
}

function onToggleCheck(layername) {
  //Event listener for tick layer
  $('#' + layername).on('click', function(evt) {
    $(this).each(function() {
      var that = this;
      toggleCheck($(that).attr("id"));
    });
    evt.preventDefault();
  });
}

function offToggleCheck(layername) {
  //Event listener for tick layer
  $('#' + layername).off('click', function(evt) {
    $(this).each(function() {
      var that = this;
      toggleCheck($(that).attr("id"));
    });

    evt.preventDefault();
  });
}

//Expand and minimize group
function toggleGroup(groupheader) {
  var group = groupheader.parent('.o-legend-group');
  var groupicon = $('#' + group.attr('id') + ' .o-icon-expand:first');

  if (groupicon.hasClass('o-icon-expand-false')) {
    groupicon.removeClass('o-icon-expand-false');
    groupicon.addClass('o-icon-expand-true');
    group.removeClass('o-ul-expand-false');
  } else {
    groupicon.removeClass('o-icon-expand-true');
    groupicon.addClass('o-icon-expand-false');
    group.addClass('o-ul-expand-false');
  }
}

//Toggle subgroups
function toggleSubGroupCheck(subgroup, toggleAll) {
  var subGroup = $(subgroup);
  var subLayers = subGroup.find('.o-legend-item.o-legend-subitem');
  var groupList = $('.o-legend-subgroup');

  if (toggleAll) {

    subLayers.each(function() {
      var layername = $(this).parent().attr('id');
      var layer = viewer.getLayer(layername);
      var layerid = $(this).parent().attr('class');
      var inMapLegend = layerid.split('o-legend-').length > 1 ? true : false;

      if (subGroup.children().first().find('.o-checkbox').hasClass('o-checkbox-true')) {
        $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-true');
        $('.' + layername + ' .o-checkbox').addClass('o-checkbox-false');

        if (inMapLegend == false) {
          offToggleCheck('o-legend-' + layername);
          $('#o-legend-' + layername).remove();
          layer.set('legend', false);
          checkToggleOverlay();
        }

        layer.setVisible(false);
      } else {

        if (inMapLegend == false && $('#o-legend-' + layername).length == 0) {
          $('#o-overlay-list').prepend(createLegendItem('o-legend-' + layername));
          onToggleCheck('o-legend-' + layername);
          checkToggleOverlay();
        }

        $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-false');
        $('.' + layername + ' .o-checkbox').addClass('o-checkbox-true');
        layer.setVisible(true);
        layer.set('legend', true);
      }
    });
  }

  groupList.each(function() {
    var subList = $(this).find('.o-legend-item.o-legend-subitem').has('.o-checkbox');
    var subListChecked = $(this).find('.o-legend-item.o-legend-subitem').has('.o-checkbox.o-checkbox-true');

    if (subListChecked.length) {
      $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-false');
      $(this).children().first().find('.o-checkbox').addClass('o-checkbox-true');

      if (subList.length != subListChecked.length) {
        $(this).children().first().find('.o-checkbox').addClass('o-checkbox-semi');
      } else {
        $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-semi');
      }

    } else {
      $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-true');
      $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-semi');
      $(this).children().first().find('.o-checkbox').addClass('o-checkbox-false');
    }
  });
}

//Toggle layers
function toggleCheck(layerid) {
  var layername = layerid.split('o-legend-').pop();
  var inMapLegend = layerid.split('o-legend-').length > 1 ? true : false;
  var layer = viewer.getLayer(layername);

  //Radio toggle for background
  if (layer.get('group') == 'background') {
    var groups = viewer.getGroup('background');

    groups.forEach(function(group) {
      group.setVisible(false);
      $('#' + group.get('name') + ' .o-checkbox').removeClass('o-check-true');
      $('#' + group.get('name') + ' .o-checkbox').addClass('o-check-false');
      //map legend
      $('#o-legend-' + group.get('name')).removeClass('o-check-true-img');
      $('#o-legend-' + group.get('name')).addClass('o-check-false-img');
    });

    layer.setVisible(true);
    $('#' + layername + ' .o-checkbox').removeClass('o-check-false');
    $('#' + layername + ' .o-checkbox').addClass('o-check-true');
    //map legend
    $('#o-legend-' + layername).removeClass('o-check-false-img');
    $('#o-legend-' + layername).addClass('o-check-true-img');
  } else { //Toggle check for all groups except background

    if ($('.' + layername + ' .o-checkbox').hasClass('o-checkbox-true')) {
      $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-true');
      $('.' + layername + ' .o-checkbox').addClass('o-checkbox-false');

      if (inMapLegend == false) {
        offToggleCheck('o-legend-' + layername);
        $('#o-legend-' + layername).remove();
        layer.set('legend', false);
        checkToggleOverlay();
      }

      layer.setVisible(false);
    } else {

      if (inMapLegend == false && $('#o-legend-' + layername).length == 0) {
        $('#o-overlay-list').prepend(createLegendItem('o-legend-' + layername));
        onToggleCheck('o-legend-' + layername);
        checkToggleOverlay();
      }

      $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-false');
      $('.' + layername + ' .o-checkbox').addClass('o-checkbox-true');
      layer.setVisible(true);
      layer.set('legend', true);
    }

    if ($('#' + layername).find('.o-legend-subitem').length > 0) {
      toggleSubGroupCheck($('#' + layername).parents('ul').has('.o-legend-header').first(), false);
    }
  }
}

function checkToggleOverlay() {
  if($('#o-overlay-list li').length > 1 && $('#o-legend-overlay >li:first-child').hasClass('o-hidden')) {
    $('#o-legend-overlay > li:first-child').removeClass('o-hidden');
  } else if($('#o-overlay-list li').length < 2) {
    $('#o-legend-overlay > li:first-child').addClass('o-hidden');

    if($('#o-overlay-list').length == 1 && $('#o-overlay-list').hasClass('o-hidden')) {
      $('#o-overlay-list').removeClass('o-hidden');
      toggleOverlay();
    }
  }
}

function toggleOverlay() {
  if($('#o-legend-overlay .o-toggle-button').hasClass('o-toggle-button-max')) {
    $('#o-legend-overlay .o-toggle-button').removeClass('o-toggle-button-max');
    $('#o-legend-overlay .o-toggle-button').addClass('o-toggle-button-min');
    $('#o-overlay-list').addClass('o-hidden');
  } else {
    $('#o-legend-overlay .o-toggle-button').removeClass('o-toggle-button-min');
    $('#o-legend-overlay .o-toggle-button').addClass('o-toggle-button-max');
    $('#o-overlay-list').removeClass('o-hidden');
  }
}

//Set content for info button popup
function showAbstract($abstractButton) {
  var layer;
  var $item = $abstractButton.closest('li');
  var layername = $abstractButton.attr('id').split('o-legend-item-info-').pop();
  var abstract = {
    title: '',
    content: ''
  };

  //If info button is connected group
  if ($item.hasClass('o-legend-header')) {
    var groups = viewer.getGroups();

    var group = $.grep(groups, function(obj) {
      return (obj.name == layername);
    });

    abstract.title = group[0].title;
    abstract.content = group[0].abstract
  } else { // If info button is connected to layer
    layer = viewer.getLayer(layername);
    abstract.title = layer.get('title');
    abstract.content = layer.get('abstract');
  }

  modal.createModal('#o-map', {title: abstract.title, content: abstract.content});
  modal.showModal();
}

module.exports.init = init;

},{"./modal":151,"./utils":189,"./utils/validateurl":204,"./viewer":205,"jquery":26}],146:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var utils = require('./utils');

var url;
var title;
var $linkButton;

function init(opt_options) {
  var options = opt_options || {};
  url = options.url;
  title = options.title;

  render();
  bindUIActions();
}

function render() {
  var el = utils.createListButton({
    id: 'o-link',
    iconCls: 'o-icon-fa-external-link',
    src: '#fa-external-link',
    text: title

  });
  $('#o-menutools').append(el);
  $linkButton = $('#o-link-button');
}

function bindUIActions() {
  $linkButton.on('click', function() {
    window.open(url);
  });
}

module.exports.init = init;

},{"./utils":189,"jquery":26}],147:[function(require,module,exports){
"use strict";
var $ = require('jquery');
var supports = require('./utils/supports');
var permalink = require('./permalink/permalink');
var getUrl = require('./utils/geturl');
var isUrl = require('./utils/isurl');
var trimUrl = require('./utils/trimurl');

var mapLoader = function(mapOptions, config) {

  var map = {};
  var mapEl = config.target;
  var format = 'json';
  var cors = config.crossOrigin;

  var urlParams = undefined;

  if (mapEl.substring(0, 1) !== '#') {
    mapEl = '#' + mapEl;
  }
  map.el = mapEl;

  // Check browser support
  if (supports('browser', mapEl) === false) {
    return undefined;
  }

  // Check if authorization is required before map options is loaded
  if (config.authorizationUrl) {
    return $.ajax({
        url: config.authorizationUrl
      })
      .then(function(data) {
        return loadMapOptions();
      });
  } else {
    return loadMapOptions();
  }

  function loadMapOptions() {
    if (typeof(mapOptions) === 'object') {
      if (window.location.hash) {
        urlParams = permalink.parsePermalink(window.location.href);
      }
      var baseUrl = config.baseUrl || '';
      map.options = $.extend(config, mapOptions);
      if (mapOptions.controls) {
        map.options.controls = config.defaultControls.concat(mapOptions.controls);
      } else {
        map.options.controls = config.defaultControls;
      }
      map.options.url = getUrl();
      map.options.map = undefined;
      map.options.params = urlParams;
      map.options.baseUrl = baseUrl;

      return $.when.apply($, loadSvgSprites(baseUrl, config))
        .then(function(sprites) {
          return map;
        });

    } else if (typeof(mapOptions) === 'string') {
      if (isUrl(mapOptions)) {
        urlParams = permalink.parsePermalink(mapOptions);
        var url = mapOptions.split('#')[0];
        var mapUrl = url;

        //remov file name if included in
        url = trimUrl(url);

        var baseUrl = config.baseUrl || url;
        var json = urlParams.map + '.json';
        url += json;
      } else {
        var json = mapOptions;
        if (window.location.hash) {
          urlParams = permalink.parsePermalink(window.location.href);
          if (urlParams.map) {
            json = urlParams.map + '.json';
          }
        }
        var baseUrl = config.baseUrl || '';
        var url = baseUrl + json;
        var mapUrl = getUrl();
      }

      return $.when.apply($, loadSvgSprites(baseUrl, config))
        .then(function(sprites) {
          return $.ajax({
              url: url,
              dataType: format
            })
            .then(function(data) {
              map.options = $.extend(config, data);
              if (data.controls) {
                map.options.controls = config.defaultControls.concat(data.controls);
              } else {
                map.options.controls = config.defaultControls;
              }
              map.options.url = mapUrl;
              map.options.map = json;
              map.options.params = urlParams;
              map.options.baseUrl = baseUrl;
              return map;
            });
        });
    }
  }
}

function loadSvgSprites(baseUrl, config) {
  var svgSprites = config.svgSprites;
  var svgPath = config.svgSpritePath;
  var svgPromises = [];
  svgSprites.forEach(function(sprite) {
    var promise = $.get(baseUrl + svgPath + sprite, function(data) {
        var div = document.createElement("div");
        div.innerHTML = new XMLSerializer().serializeToString(data.documentElement);
        document.body.insertBefore(div, document.body.childNodes[0]);
      });
    svgPromises.push(promise);
    return svgPromises;
  });
}

module.exports = mapLoader;

},{"./permalink/permalink":164,"./utils/geturl":193,"./utils/isurl":196,"./utils/supports":201,"./utils/trimurl":202,"jquery":26}],148:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var $menuButton, $closeButton, $mapMenu;

var symbolSize = 20;
var styleSettings;
var options;
var isActive;

function init(opt_options) {
    var breakPointSize;
    var breakPoint;

    options = opt_options || {};
    isActive = options.isActive || false;
    breakPointSize = options.breakPointSize || 'l';
    breakPoint  = viewer.getBreakPoints(breakPointSize);
    styleSettings = viewer.getStyleSettings();

    var el = utils.createButton({
        text: 'Meny',
        id: 'o-mapmenu-button',
        cls: 'o-mapmenu-button-true',
        iconCls: 'o-icon-fa-bars',
        src: '#fa-bars',
        tooltipText: 'Meny',
        tooltipPlacement: 'west'
    });
    $('#o-map').append(el);
    $menuButton = $('#o-mapmenu-button button');

    var menuEl = '<div id="o-mapmenu" class="o-mapmenu">' +
                    '<div class="o-block">' +
                      '<ul id="o-menutools">' +
                        '<li></li>' +
                      '</ul>'
                    '</div>' +
                  '</div>';
    $('#o-map').append(menuEl);
    $mapMenu = $('#o-mapmenu');

    var closeButton = utils.createButton({
        id: 'o-mapmenu-button-close',
        cls: 'o-no-boxshadow',
        iconCls: 'o-icon-menu-fa-times',
        src: '#fa-times',
        tooltipText: 'Stäng meny',
        tooltipPlacement: 'west'
    });
    $('#o-menutools').append(closeButton);
    $closeButton = $('#o-mapmenu-button-close');

    bindUIActions();

    if(isActive && $('#o-map').width() >= breakPoint[0]) {
      toggleMenu();
    }
}
function bindUIActions() {
    $menuButton.on('click', function(e) {
      	toggleMenu();
        $menuButton.blur();
        e.preventDefault();
    });
    $closeButton.on('click', function(e) {
      	toggleMenu();
        $closeButton.blur();
        e.preventDefault();
    });
}
function toggleMenu() {
    if($mapMenu.hasClass('o-mapmenu-show')){
      $mapMenu.removeClass('o-mapmenu-show');
    }
    else {
      $mapMenu.addClass('o-mapmenu-show');
    }
}
function getTarget() {
    return $mapMenu;
}

module.exports.init = init;
module.exports.toggleMenu = toggleMenu;
module.exports.getTarget = getTarget;

},{"./utils":189,"./viewer":205,"jquery":26}],149:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');

module.exports = {
  customProjection: function(projectionCode, extent) {
      return new ol.proj.Projection({
          code: projectionCode,
          extent: extent
      });
  },
  tileGrid: function(settings) {
    var extent = settings.extent || viewer.getExtent();
    var origin = settings.alignBottomLeft === false ? ol.extent.getTopLeft(extent) : ol.extent.getBottomLeft(extent);
    var resolutions = settings.resolutions || viewer.getResolutions();
    var tileSize = settings.tileSize || viewer.getTileSize();
    return new ol.tilegrid.TileGrid({
        extent: extent,
        origin: origin,
        resolutions: resolutions,
        tileSize: tileSize
    });
  },
  checkZoomChange: function checkZoomChange(resolution, currentResolution) {
      if(resolution !== currentResolution) {
        return true;
      }
      else {
        return false;
      }
  },
  createPointFeature: function createPointFeature(coordinate, style) {
      var feature = new ol.Feature({
          geometry: new ol.geom.Point(coordinate)
      });
      feature.setStyle(style);
      return feature;
  },
  geojsonToFeature: function geojsonToFeature(obj) {
      var vectorSource = new ol.source.Vector({
        features: (new ol.format.GeoJSON()).readFeatures(obj)
      });
      return vectorSource.getFeatures()[0];
  },
  wktToFeature: function wktToFeature(wkt, srsName) {
      var format = new ol.format.WKT();
      var feature = format.readFeature(wkt, {
        dataProjection: srsName,
        featureProjection: srsName
      });
      return feature;
  },
  zoomToExent: function zoomToExent(geometry, level) {
      var map = viewer.getMap();
      var view = map.getView();
      var maxZoom = level;
      var extent = geometry.getExtent();
      if(extent) {
          view.fit(extent, {maxZoom: maxZoom});
          return extent;
      }
      else {
        return undefined;
      }
  },
  getCenter: function getCenter(geometry) {
      var type = geometry.getType();
      var center;
      switch (type) {
          case "Polygon":
              center = geometry.getInteriorPoint().getCoordinates();
              break;
          case "MultiPolygon":
              center = geometry.getInteriorPoints()[0].getCoordinates();
              break;
          case "Point":
              center = geometry.getCoordinates();
              break;
          case "MultiPoint":
              center = geometry[0].getCoordinates();
              break;
          case "LineString":
              center = geometry.getCoordinateAt(0.5);
              break;
          case "MultiLineString":
              center = geometry.getLineStrings()[0].getCoordinateAt(0.5);
              break;
          case "Circle":
              center = geometry.getCenter();
              break;
      }
      return center;
  },
  scaleToResolution: function scaleToResolution(scale, projection) {
    var dpi = 25.4 / 0.28;
    var mpu = projection.getMetersPerUnit();
    var resolution = scale / (mpu * 39.37 * dpi);
    return resolution;
  }
}

},{"./viewer":205,"jquery":26,"openlayers":29}],150:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var style = require('./style')();
var styleTypes = require('./style/styletypes');

var map;
var options;
var activeButton;
var defaultButton;
var measure;
var type;
var sketch;
var measureTooltip;
var measureTooltipElement;
var measureStyleOptions;
var helpTooltip;
var helpTooltipElement;
var vector;
var source;
var label;
var overlayArray = [];
var drawStart = false;
var isActive = false;
var wgs84Sphere = new ol.Sphere(6378137);
var lengthTool;
var areaTool;

function init(opt_options) {
  options = opt_options || {};
  options.measureTools = options.measureTools || ["length", "area"];
  lengthTool = options.measureTools.indexOf('length') >= 0 ? true : false;
  areaTool = options.measureTools.indexOf('area') >= 0 ? true : false;
  options.default = options.default ? options.default : lengthTool ? "length" : "area";
  if(lengthTool || areaTool){
    var target = options.target || '#o-toolbar-maptools';
    map = Viewer.getMap();
    source = new ol.source.Vector();
    measureStyleOptions = styleTypes.getStyle('measure');

    //Drawn features
    vector = new ol.layer.Vector({
      source: source,
      name: 'measure',
      visible: false,
      zIndex: 6
    });

    map.addLayer(vector);

    $('.o-map').on('enableInteraction', onEnableInteraction);

    render(target);
    bindUIActions();
    if(options.default === 'area') {
      defaultButton = $('#o-measure-polygon-button button');
    } else if(options.default === 'length') {
      defaultButton = $('#o-measure-line-button button');
    }
  }
}

function onEnableInteraction(e) {
  if(e.interaction === 'measure') {
    $('#o-measure-button button').addClass('o-measure-button-true');
    if(lengthTool){$('#o-measure-line-button').removeClass('o-hidden');}
    if(areaTool){$('#o-measure-polygon-button').removeClass('o-hidden');}
    $('#o-measure-button').removeClass('tooltip');
    setActive(true);
    defaultButton.trigger('click');
  } else {
    if (activeButton) {
      activeButton.removeClass('o-measure-button-true');
    };

    $('#o-measure-button button').removeClass('o-measure-button-true');
    if(lengthTool){$('#o-measure-line-button').addClass('o-hidden');}
    if(areaTool){$('#o-measure-polygon-button').addClass('o-hidden');}
    $('#o-measure-button').addClass('tooltip');

    map.un('pointermove', pointerMoveHandler);
    map.un('click', pointerMoveHandler);
    map.removeInteraction(measure);
    vector.setVisible(false);
    Viewer.removeOverlays(overlayArray);
    vector.getSource().clear();
    setActive(false);
  }

}

function setActive(state) {
  if(state === true) {
    isActive = true;
  } else {
    isActive = false;
  }

}

function render(target) {
  
  if(lengthTool || areaTool){
    var toolbar = utils.createElement('div', '', {
      id: 'o-measure-toolbar',
      cls: 'o-toolbar-horizontal'
    });

    $(target).append(toolbar);

    var mb = utils.createButton({
      id: 'o-measure-button',
      cls: 'o-measure-button',
      iconCls: 'o-icon-steady-measure',
      src: '#steady-measure',
      tooltipText: 'Mät i kartan'
    });
    $('#' + 'o-measure-toolbar').append(mb);
  }
  
  if(lengthTool){
    var lb = utils.createButton({
      id: 'o-measure-line-button',
      cls: 'o-measure-type-button',
      iconCls: 'o-icon-minicons-line-vector',
      src: '#minicons-line-vector',
      tooltipText: 'Linje',
      tooltipPlacement: 'north'
    });
    $('#' + 'o-measure-toolbar').append(lb);
    $('#o-measure-line-button').addClass('o-hidden');
  }

  if(areaTool){
    var pb = utils.createButton({
      id: 'o-measure-polygon-button',
      cls: 'o-measure-type-button',
      iconCls: 'o-icon-minicons-square-vector',
      src: '#minicons-square-vector',
      tooltipText: 'Yta',
      tooltipPlacement: 'north'
    });
    $('#' + 'o-measure-toolbar').append(pb);
    $('#o-measure-polygon-button').addClass('o-hidden');
  }
}

function bindUIActions() {
  if(lengthTool || areaTool){
    $('#o-measure-button').on('click', function(e) {
      toggleMeasure();
      $('#o-measure-button button').blur();
      e.preventDefault();
    });
  }

  if(lengthTool){
    $('#o-measure-line-button').on('click', function(e) {
      type = 'LineString';
      toggleType($('#o-measure-line-button button'));
      $('#o-measure-line-button button').blur();
      e.preventDefault();
    });
  }

  if(areaTool){
    $('#o-measure-polygon-button').on('click', function(e) {
      type = 'Polygon';
      toggleType($('#o-measure-polygon-button button'));
      $('#o-measure-polygon-button button').blur();
      e.preventDefault();
    });
  }

}

function createStyle(feature, labelText) {
  var featureType = feature.getGeometry().getType();
  var measureStyle = featureType == 'LineString' ? style.createStyleRule(measureStyleOptions.linestring) : style.createStyleRule(measureStyleOptions.polygon);

  return measureStyle;
}

//Display and move tooltips with pointer
function pointerMoveHandler(evt) {
  if (evt.dragging) {
    return;
  }

  var helpMsg = 'Klicka för att börja mäta';
  var tooltipCoord = evt.coordinate;

  if (sketch) {
    var output;
    var geom = (sketch.getGeometry());

    if (geom instanceof ol.geom.Polygon) {
      output = formatArea(/** @type {ol.geom.Polygon} */ (geom));
      tooltipCoord = geom.getInteriorPoint().getCoordinates();
    } else if (geom instanceof ol.geom.LineString) {
      output = formatLength( /** @type {ol.geom.LineString} */ (geom));
      tooltipCoord = geom.getLastCoordinate();
    }

    measureTooltipElement.innerHTML = output;
    label = output;
    measureTooltip.setPosition(tooltipCoord);
  }

  if (evt.type == 'pointermove') {
    helpTooltipElement.innerHTML = helpMsg;
    helpTooltip.setPosition(evt.coordinate);
  }

};

function addInteraction() {
  vector.setVisible(true);

  measure = new ol.interaction.Draw({
    source: source,
    type: type,
    style: style.createStyleRule(measureStyleOptions.interaction)
  });

  map.addInteraction(measure);

  createMeasureTooltip();
  createHelpTooltip();

  map.on('pointermove', pointerMoveHandler);
  map.on('click', pointerMoveHandler);

  measure.on('drawstart', function(evt) {
    // set sketch
    drawStart = true;
    sketch = evt.feature;
    $(helpTooltipElement).addClass('o-hidden');
  }, this);

  measure.on('drawend', function(evt) {
    var feature = evt.feature;
    feature.setStyle(createStyle(feature));
    feature.getStyle()[0].getText().setText(label);
    $(measureTooltipElement).remove();
    // unset sketch
    sketch = null;
    // unset tooltip so that a new one can be created
    measureTooltipElement = null;
    createMeasureTooltip();
    $(helpTooltipElement).removeClass('o-hidden');
  }, this);

};

function createHelpTooltip() {
  if (helpTooltipElement) {
    helpTooltipElement.parentNode.removeChild(helpTooltipElement);
  }

  helpTooltipElement = document.createElement('div');
  helpTooltipElement.className = 'o-tooltip o-tooltip-measure';

  helpTooltip = new ol.Overlay({
    element: helpTooltipElement,
    offset: [15, 0],
    positioning: 'center-left',
  });

  overlayArray.push(helpTooltip);
  map.addOverlay(helpTooltip);
};

function createMeasureTooltip() {
  if (measureTooltipElement) {
    measureTooltipElement.parentNode.removeChild(measureTooltipElement);
  }

  measureTooltipElement = document.createElement('div');
  measureTooltipElement.className = 'o-tooltip o-tooltip-measure';

  measureTooltip = new ol.Overlay({
    element: measureTooltipElement,
    offset: [0, -15],
    positioning: 'bottom-center',
    stopEvent: false
  });

  overlayArray.push(measureTooltip);
  map.addOverlay(measureTooltip);
};

function formatLength(line) {
  var projection, length, output;
  projection = map.getView().getProjection();
  length = ol.Sphere.getLength(line, {projection: projection});
  if (length > 100) {
    output = (Math.round(length / 1000 * 100) / 100) +
      ' ' + 'km';
  } else {
    output = (Math.round(length * 100) / 100) +
      ' ' + 'm';
  }
  
  return output;
};

function formatArea(polygon) {
  var projection, area, output;
  projection = map.getView().getProjection();
  area = ol.Sphere.getArea(polygon, {projection: projection});
  if (area > 10000000) {
    output = (Math.round(area / 1000000 * 100) / 100) +
      ' ' + 'km<sup>2</sup>';
  } else if (area > 10000) {
    output = (Math.round(area / 10000 * 100) / 100) +
      ' ' + 'ha';
  } else {
    output = (Math.round(area * 100) / 100) +
      ' ' + 'm<sup>2</sup>';
  }

  var htmlElem = document.createElement('span');
  htmlElem.innerHTML = output;

  [].forEach.call(htmlElem.children, function(element) {
    if (element.tagName === 'SUP') {
      element.textContent = String.fromCharCode(element.textContent.charCodeAt(0) + 128);
    }
  })

  return htmlElem.textContent;
};

function toggleMeasure () {
  if (isActive) {
    $('.o-map').trigger({
      type: 'enableInteraction',
      interaction: 'featureInfo'
    });
  } else {
    $('.o-map').trigger({
      type: 'enableInteraction',
      interaction: 'measure'
    });
  }

};

function toggleType(button) {
  if (activeButton) {
    activeButton.removeClass('o-measure-button-true');
  }

  button.addClass('o-measure-button-true');
  activeButton = button;
  map.removeInteraction(measure);
  addInteraction();
};

module.exports.init = init;

},{"./style":177,"./style/styletypes":183,"./utils":189,"./viewer":205,"jquery":26,"openlayers":29}],151:[function(require,module,exports){
"use strict";
var $ = require('jquery');

var modal = function() {

  var isStatic = undefined;
  var $target = undefined;
  var modalEl = undefined;

  return {
    createModal: createModal,
    showModal: showModal,
    closeModal: closeModal
  };

  function render(title, content, cls) {
    modalEl = '<div id="o-modal" ' + 'class="' + cls + '">' +
      '<div class="o-modal-screen"></div>' +
      '<div class="o-modal">' +
      '<div class="o-close-button"><svg class="o-icon-fa-times"><use xlink:href="#fa-times"></use></svg></div>' +
      '<div class="o-modal-title">' + title + '</div>' +
      '<div class="o-modal-content">' + content + '</div>' +
      '</div>' +
      '</div>';
  }

  function bindUIActions() {
    if (isStatic === false) {
      $('.o-modal-screen, .o-close-button').click(function() {
        closeModal();
      });
    } else {
      $('.o-close-button').click(function() {
        closeModal();
      });
    }
  }

  function createModal(modalTarget, options) {
    var title = options.title || '';
    var content = options.content || '';
    var cls = options.cls || '';
    if (options.hasOwnProperty('static')) {
      isStatic = options.static;
    } else {
      isStatic = false;
    }
    render(title, content, cls);
    $target = $(modalTarget);

  }

  function showModal() {
    $target.prepend(modalEl);
    bindUIActions();
  }

  function closeModal() {
    $('#o-modal').remove();
  }
}

module.exports = modal();

},{"jquery":26}],152:[function(require,module,exports){
/* ========================================================================
 * Copyright 2016 Origo
 * Licensed under BSD 2-Clause (https://github.com/origo-map/origo/blob/master/LICENSE.txt)
 * ======================================================================== */
"use strict";

var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var downloader = require('./offline/downloader');
var downloadHandler = require('./offline/downloadhandler');
var offlineStore = require('./offline/offlinestore')();

var map = undefined;
var baseUrl = undefined;
var $offlineButton = undefined;

function Init(opt_options) {
  var options = opt_options || {};
  map = Viewer.getMap();
  baseUrl = Viewer.getBaseUrl();

  downloadHandler();

  render();
  bindUIActions();
}

function render() {
  var el = utils.createListButton({
    id: 'o-offline',
    iconCls: 'o-icon-fa-download',
    src: '#fa-download',
    text: 'Nedladdningar'
  });
  $('#o-menutools').append(el);
  $offlineButton = $('#o-offline-button');
}

function bindUIActions() {
  $offlineButton.on('click', function(e) {
    downloader(offlineStore.getOfflineLayers());
    e.preventDefault();
  });
}

module.exports.init = Init;

},{"./offline/downloader":153,"./offline/downloadhandler":155,"./offline/offlinestore":160,"./utils":189,"./viewer":205,"jquery":26}],153:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Viewer = require('../viewer');
var template = require("./downloader.template.handlebars");
var spinner = require("../components/spinner.handlebars");
var utils = require('../utils');
var dispatcher = require('./offlinedispatcher');

var toolbarPrefix = 'o-downloader-td-toolbar-';

var Downloader = function Downloader(layersObj) {
  render(layersObj);
  addListeners();

  function render(layersObj) {
    $('#o-map').prepend(template);
    renderRows(layersObj);

    bindUIActions();
  }

  function addListeners() {
    $(document).on('changeOfflineStart', onChangeOfflineStart);
    $(document).on('changeOfflineEnd', onChangeOfflineEnd);
  }

  function onChangeOfflineStart(e) {
    renderButtons('#' + toolbarPrefix + e.layerName, 'pending', e.layerName);
  }

  function onChangeOfflineEnd(e) {
    renderButtons('#' + toolbarPrefix + e.layerName, e.state, e.layerName);
  }

  function bindUIActions() {
    $('.o-downloader .o-close-button').on('click', function(evt) {
        closeDownloader();
        evt.preventDefault();
    });
  }

  function renderRows(layersObj) {
    var layerNames = Object.getOwnPropertyNames(layersObj);
    layerNames.forEach(function(layerName) {
      renderRow(layerName, layersObj);
    });
  }

  function renderRow(layerName, layersObj) {
    var layer = Viewer.getLayer(layerName);
    var tdTitle = utils.createElement('td', layer.get('title'),{});
    var toolbarId = toolbarPrefix + layerName;
    var toolbar = utils.createElement('div', '', {
      cls: 'o-toolbar-horizontal',
      style: 'text-align: right; float: right;',
      id: toolbarId
    });
    var tdToolbar = utils.createElement('td', toolbar, {});
    var row = tdTitle + tdToolbar;
    var cls = 'o-downloader-tr-' + layerName;
    var tr = utils.createElement('tr', row, {
      cls: cls
    });
    var state;
    $('.o-downloader .o-table').append(tr);
    state =  layersObj[layerName].downloaded === true ? 'offline' : 'download';
    renderButtons('#' + toolbarId, state, layerName);
  }

  function renderButtons(target, state, layerName) {
    $(target).empty();
    if (state === 'offline') {
      renderSync(target, layerName);
      renderRemove(target, layerName);
    } else if (state === 'download') {
      renderDownload(target, layerName);
    } else if (state === 'pending') {
      renderPending(target);
    }
  }

  function renderSync(target, layerName) {
    var id = 'o-downloader-refresh-' + layerName;
    var refresh = createButton({
      href: '#fa-refresh',
      cls: 'o-icon-fa-refresh',
      id: id
    });
    $(target).append(refresh);
    bindAction('#' + id, layerName, 'sync');
  }

  function renderRemove(target, layerName) {
    var id = 'o-downloader-trash-' + layerName;
    var trash = createButton({
      href: '#fa-trash',
      cls: 'o-icon-fa-trash',
      id: id
    });
    $(target).append(trash);
    bindAction('#' + id, layerName, 'remove');
  }

  function renderDownload(target, layerName) {
    var id = 'o-downloader-download-' + layerName;
    var download = createButton({
      href: '#fa-download',
      cls: 'o-icon-fa-download',
      id: id
    });
    $(target).append(download);
    bindAction('#' + id, layerName, 'download');
  }

  function renderPending(target) {
    var spinnerButton = utils.createElement('button', '', {
      cls: 'o-spinner'
    });
    $(target).append(spinnerButton);
    $('.o-spinner').append(spinner);
  }

  function createButton(obj) {
    var icon = utils.createSvg({
      href: obj.href,
      cls: obj.cls
    });
    return utils.createElement('button', icon, {
      id: obj.id
    });
  }

  function closeDownloader() {
    $('.o-downloader').remove();
  }

  function bindAction(target, layerName, type) {
    $(target).on('click', function(evt) {
      dispatcher.emitChangeDownload(layerName, type);
      evt.preventDefault();
      evt.stopPropagation();
    });
  }

}

module.exports = Downloader;

},{"../components/spinner.handlebars":101,"../utils":189,"../viewer":205,"./downloader.template.handlebars":154,"./offlinedispatcher":158,"jquery":26}],154:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<div class=\"o-container-fluid o-downloader\">\r\n  <div class=\"o-card\">\r\n    <div class=\"o-card-header o-text-center\">\r\n      <h6 class=\"o-card-heading\">Nedladdningar</h6>\r\n      <div class=\"o-close-button\">\r\n        <svg class=\"o-icon-fa-times\"><use xlink:href=\"#fa-times\"></use></svg>\r\n      </div>\r\n    </div>\r\n    <div class=\"o-card-content\">\r\n      <table class =\"o-table\">\r\n\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n";
},"useData":true});

},{"hbsfy/runtime":25}],155:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var layerCreator = require('../layercreator');
var offlineLayer = require('./offlinelayer')();
var downloadSources = require('./downloadsources');
var dispatcher = require('./offlinedispatcher');
var offlineStore = require('./offlinestore')();

var downloadErrorMsg = 'Det inträffade ett fel när lagret skulle hämtas. Är du ansluten till internet?'
var saveErrorMsg = 'Det inträffade ett fel när förändringarna skulle sparas. Försök igen senare.';
var invalidFormatMsg = 'Invalid format: ';

var downloadHandler = function downloadHandler() {
  $(document).on('changeDownload', onChangeDownload);
  offlineStore.init();

  function onChangeDownload(e) {
    e.stopImmediatePropagation();
    if (e.action === 'download') {
      download(e.layerName);
    } else if (e.action === 'sync') {
      sync(e.layerName);
    } else if (e.action === 'remove') {
      removeDownloaded(e.layerName);
    }
  }

  function removeDownloaded(layerName) {
    var layer = viewer.getLayer(layerName);
    var props = layer.getProperties();
    var source;
    dispatcher.emitChangeOfflineStart(layerName);
    props.style = props.styleName;
    props.source = props.sourceName;
    props.type = props.onlineType;
    source = layerCreator(props).getSource();
    layer.setSource(source);
    dispatcher.emitChangeOffline(layer.get('name'), 'remove');
  }

  function sync(layerName) {
    var offlineEdits = offlineStore.getOfflineEdits(layerName);
    dispatcher.emitChangeOfflineStart(layerName);
    if (offlineEdits) {
      offlineEdits
        .then(function(editItems) {
          saveToRemote(editItems, layerName)
            .then(function() {
              download(layerName);
            })
            .fail(function(err) {
              abort(layerName, saveErrorMsg, 'alert');
            });
        });
    } else {
      download(layerName);
    }
  }

  function saveToRemote(editItems, layerName) {
    var layer = viewer.getLayer(layerName);
    var transObj = {
      delete: [],
      insert: [],
      update: []
    };
    var ids = [];
    editItems.forEach(function(item) {
      var id = Object.getOwnPropertyNames(item)[0];
      var feature = layer.getSource().getFeatureById(id);
      var dummy;
      if (feature) {
        transObj[item[id]].push(feature);
        ids.push(id);
      } else if (item[id] === 'delete') {
        dummy = new ol.Feature();
        dummy.setId(id);
        transObj[item[id]].push(dummy);
        ids.push(id);
      }
    });

    return downloadSources[layer.get('onlineType')].transaction(transObj, layerName)
      .then(function(result) {
        if (result > 0) {
          dispatcher.emitChangeOffline(layer.get('name'), 'edits', ids);
        }
      });
  }

  function download(layerName) {
    var layer = viewer.getLayer(layerName);
    var type = layer.get('onlineType');
    dispatcher.emitChangeOfflineStart(layerName);
    if (downloadSources.hasOwnProperty(type)) {
      downloadSources[type].request(layer)
        .then(function(result) {
          offlineLayer.setOfflineSource(layerName, result);
          dispatcher.emitChangeOffline(layer.get('name'), 'download');
        })
        .fail(function(error) {
          abort(layerName, downloadErrorMsg, 'alert');
        });
    } else {
      error = 'Sorry, ' + type + ' is not available as on offline format';
      abort(layerName, invalidFormatMsg + type);
    }
  }

  function abort(layerName, error, isAlert) {
    var action;
    if (offlineStore.getOfflineLayer(layerName).downloaded) {
      action = 'offline';
    } else {
      action = 'download';
    }

    if (isAlert) {
      alert(error);
    } else {
      console.log(error);
    }

    dispatcher.emitChangeOfflineEnd(layerName, action);
  }
}

module.exports = downloadHandler;

},{"../layercreator":144,"../viewer":205,"./downloadsources":156,"./offlinedispatcher":158,"./offlinelayer":159,"./offlinestore":160,"jquery":26,"openlayers":29}],156:[function(require,module,exports){
"use strict";

var sources = {};
sources.WFS = require('./wfs');
sources.GEOJSON = require('./geojson');
sources.TOPOJSON = require('./topojson');

module.exports = sources;

},{"./geojson":157,"./topojson":161,"./wfs":163}],157:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var verifyFeatureIds = require('./verifyfeatureids');

var geojson = {};
geojson.request = function request(layer) {
  var source = layer.get('sourceName');
  var request = createRequest(source);
  return request;

  function createRequest(source) {
    var format = new ol.format.GeoJSON();
    var url = source;

    return $.ajax({
        url: url,
        cache: false
      })
      .then(function(response) {
        var features = format.readFeatures(response);
        features = verifyFeatureIds(features);
        return features;
      });
  }
}

module.exports = geojson;

},{"./verifyfeatureids":162,"jquery":26,"openlayers":29}],158:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = {
  emitChangeOffline: emitChangeOffline,
  emitChangeDownload: emitChangeDownload,
  emitChangeOfflineStart: emitChangeOfflineStart,
  emitChangeOfflineEnd: emitChangeOfflineEnd
}

function emitChangeOffline(layerName, action, ids) {
  $.event.trigger({
    type: 'changeOffline',
    layerName: layerName,
    action: action,
    ids: ids || undefined
  });
}

function emitChangeDownload(layerName, action) {
  $.event.trigger({
    type: 'changeDownload',
    layerName: layerName,
    action: action
  });
}

function emitChangeOfflineStart(layerName) {
  $.event.trigger({
    type: 'changeOfflineStart',
    layerName: layerName
  });
}

function emitChangeOfflineEnd(layerName, state) {
  $.event.trigger({
    type: 'changeOfflineEnd',
    layerName: layerName,
    state: state
  });
}

},{"jquery":26}],159:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('../viewer');
var layerCreator = require('../layercreator');

var offlineLayer = function offlineLayer() {

  return {
    setOfflineSource: setOfflineSource,
    setOnlineSource: setOnlineSource
  }

  function setOfflineSource(layerName, features) {
    var layer = viewer.getLayer(layerName);
    var source;
    var options;
    layer.set('type', 'OFFLINE');

    // Create a feature layer and get the source
    options = layer.getProperties();
    options.type = 'FEATURE';
    options.features = features;
    options.style = options.styleName;
    source = layerCreator(options).getSource();
    layer.setSource(source);
    return layer;
  }

  function setOnlineSource(layerName) {
    var layer = viewer.getLayer(layerName);
    var source;
    var options;

    // Create a layer with the online source and get the source
    layer.set('type', layer.get('onlineType'));
    options = layer.getProperties();
    options.source = options.sourceName;
    options.style = options.styleName;
    source = layerCreator(options).getSource();
    layer.setSource(source);
    return layer;
  }
}

module.exports = offlineLayer;

},{"../layercreator":144,"../viewer":205,"jquery":26}],160:[function(require,module,exports){
var $ = require('jquery');
var ol = require('openlayers');
var viewer = require('../viewer');
var localforage = require('localforage');
var offlineLayer = require('./offlinelayer')();
var dispatcher = require('./offlinedispatcher');
var editorDispatcher = require('../editor/editdispatcher');
var format = new ol.format.GeoJSON();
var storage = {};
var editsStorage = {};
var offlineLayers = {};
var storageName;
var editsStorageName;
var map;

function offlineStore() {

  return {
    getOfflineLayers: getOfflineLayers,
    getOfflineLayer: getOfflineLayer,
    getOfflineEdits: getOfflineEdits,
    getEditsItems: getEditsItems,
    init: Init
  };

  function Init(opt_options) {
    var options = opt_options || {};
    var layerNames;
    map = viewer.getMap();
    storageName = options.name || 'origo-layers';
    editsStorageName = options.editsName || 'origo-layers-edits';
    layerNames = viewer.getLayersByProperty('offline', true, true);
    setOfflineLayers(layerNames);
    storage = createInstances(layerNames, storageName);
    editsStorage = createInstances(layerNames, editsStorageName);
    initLayers();

    $(document).on('changeOffline', onChangeOffline);
    $(document).on('changeOfflineEdits', onChangeOfflineEdits);
  }

  function createInstances(layerNames, name) {
    var instances = {};
    layerNames.forEach(function(layerName) {
      instances[layerName] = localforage.createInstance({
        name: name,
        storeName: layerName
      });
    });

    return instances;
  }

  function getOfflineLayers() {
    return offlineLayers;
  }

  function getOfflineLayer(layerName) {
    return offlineLayers[layerName];
  }

  function getOfflineEdits(layerName) {
    if (offlineLayers[layerName].edits) {
      return getEditsItems(layerName);
    } else {
      return undefined;
    }
  }

  function setOfflineLayers(layerNames) {
    layerNames.forEach(function(layerName) {
      var layer = viewer.getLayer(layerName);
      layer.set('onlineType', layer.get('type'));
      offlineLayers[layerName] = createOfflineObj();
      offlineLayer.setOfflineSource(layerName, []);
    });
  }

  function onChangeOffline(e) {
    e.stopImmediatePropagation();
    if (e.action === 'download') {
      onDownload(e.layerName)
    } else if (e.action === 'edits') {
      ondEdits(e.layerName, e.ids);
    } else if (e.action === 'remove') {
      onRemove(e.layerName);
    }
  }

  function onChangeOfflineEdits(e) {
    e.stopImmediatePropagation();
    if (editsStorage[e.layerName]) {

    } else {
      editsStorage[e.layerName] = localforage.createInstance({
        name: editsStorageName,
        storeName: e.layerName
      });
    }
    if (e.edits.update) {
      saveUpdate(e.edits.update, e.layerName);
    }
    if (e.edits.insert) {
      saveInsert(e.edits.insert, e.layerName);
    }
    if (e.edits.delete) {
      saveDelete(e.edits.delete, e.layerName);
    }
  }

  function onDownload(layerName) {
    if (offlineLayers[layerName].downloaded) {
      storage[layerName].clear()
        .then(function() {
          saveFeaturesToStorage(layerName);
        });
    } else {
      saveFeaturesToStorage(layerName);
    }
  }

  function ondEdits(layerName, ids) {
    var promises = ids.map(function(id) {
      return removeFromEditsStorage(id, layerName);
    });
    return Promise.all(promises).then(function() {
      return true;
    });
  }

  function onRemove(layerName) {
    if (offlineLayers[layerName].edits) {
      var proceed = confirm('Du har fortfarande offline-ändringar som inte är sparade. Om du fortsätter kommer dessa att försvinna.');
      if (proceed) {
        removeDownloaded(layerName);
      }
    } else {
      removeDownloaded(layerName);
    }
  }

  function removeDownloaded(layerName) {
    if (offlineLayers[layerName]) {
      return storage[layerName].clear()
        .then(function() {
          setLayerOnline(layerName);
          dispatcher.emitChangeOfflineEnd(layerName, 'download');
        });
    }
  }

  function createOfflineObj() {
    return {
      downloaded: false,
      edits: false
    }
  }

  function setDownloaded(layerName, downloaded) {
    if (downloaded) {
      offlineLayers[layerName].downloaded = true;
    } else {
      offlineLayers[layerName].downloaded = false;
    }
  }

  function setEdits(layerName, edits) {
    if (edits) {
      offlineLayers[layerName].edits = true;
    } else {
      offlineLayers[layerName].edits = false;
    }
  }

  function saveFeaturesToStorage(layerName) {
    var features;
    if (storage[layerName]) {
      features = viewer.getLayer(layerName).getSource().getFeatures();
      setItems(layerName, features);
    } else {
      console.log(layerName + ' is missing in storage');
    }
  }

  function setItems(layerName, features) {
    var promises = features.map(function(feature) {
      var id = feature.getId();
      var obj = format.writeFeatureObject(feature);
      return storage[layerName].setItem(id, obj);
    });
    Promise.all(promises).then(function(results) {
      setLayerOffline(layerName, features);
      dispatcher.emitChangeOfflineEnd(layerName, 'offline');
    });
  }

  function getItems(layerName) {
    var layer = viewer.getLayer(layerName);
    var geometryName = layer.get('geometryName');
    var features = [];
    return storage[layerName].iterate(function(value, key, index) {
        var storedFeature = format.readFeature(value);
        var feature = restoreGeometryName(storedFeature, geometryName);
        features.push(feature);
      })
      .then(function() {
        return features;
      });
  }

  function getEditsItems(layerName) {
    var layer = viewer.getLayer(layerName);
    var items = [];
    return editsStorage[layerName].iterate(function(value, key, index) {
        var obj = {};
        obj[key] = value;
        items.push(obj);
      })
      .then(function() {
        return items;
      });
  }

  function initLayers() {
    var layerNames = Object.getOwnPropertyNames(storage);
    layerNames.forEach(function(layerName) {
      getItems(layerName).then(function(features) {
        var layer;
        if (features.length) {
          setLayerOffline(layerName, features);
        } else {
          setLayerOnline(layerName, features);
        }
      });
      getEditsItems(layerName).then(function(items) {
        var layer;
        if (items.length) {
          setEdits(layerName, true);
        } else {
          setEdits(layerName, false);
        }
      });
    });
  }

  function setLayerOffline(layerName, features) {
    offlineLayer.setOfflineSource(layerName, features);
    setDownloaded(layerName, true);
  }

  function setLayerOnline(layerName) {
    offlineLayer.setOnlineSource(layerName);
    setDownloaded(layerName, false);
  }

  function saveUpdate(updates, layerName) {
    updates.forEach(function(feature) {
      var id = feature.getId();
      var action = 'update';
      editsStorage[layerName].getItem(id)
        .then(function(result) {
          if (result === null) {
            saveToEditsStorage(feature, layerName, action);
          } else {
            saveFeatureToStorage(feature, layerName, action);
          }
        });
    });
  }

  function saveInsert(inserts, layerName) {
    inserts.forEach(function(feature) {
      var action = 'insert';
      saveToEditsStorage(feature, layerName, action);
    });
  }

  function saveDelete(deletes, layerName) {
    deletes.forEach(function(feature) {
      var id = feature.getId();
      var action = 'delete';
      editsStorage[layerName].getItem(id)
        .then(function(result) {
          if (result === null) {
            saveToEditsStorage(feature, layerName, action);
          } else if (result === 'insert') {
            removeFromEditsStorage(feature.getId(), layerName)
              .then(function() {
                emitChangeFeature(feature, layerName, action);
              });
          } else {
            saveFeatureToStorage(feature, layerName, action);
          }
        });
    });
  }

  function saveToEditsStorage(feature, layerName, action) {
    var id = feature.getId();
    editsStorage[layerName].setItem(id, action)
      .then(function() {
        setEdits(layerName, true);
        saveFeatureToStorage(feature, layerName, action);
      });
  }

  function removeFromEditsStorage(id, layerName) {
    return editsStorage[layerName].removeItem(id)
      .then(function() {
        editsStorage[layerName].length()
          .then(function(nr) {
            if (nr > 0) {
              setEdits(layerName, true);
            } else {
              setEdits(layerName, false);
            }
          });
      });
  }

  function saveFeatureToStorage(feature, layerName, action) {
    var id = feature.getId();
    storage[layerName].setItem(id, format.writeFeatureObject(feature))
      .then(function() {
        emitChangeFeature(feature, layerName, action);
      });
  }

  function emitChangeFeature(feature, layerName, action) {
    editorDispatcher.emitChangeFeature({
      feature: [feature],
      layerName: layerName,
      status: 'finished',
      action: action
    });
  }

  function restoreGeometryName(feature, geometryName) {
    var geometry = feature.getGeometry();
    feature.unset(feature.getGeometryName());
    feature.setGeometryName(geometryName);
    feature.setGeometry(geometry);
    return feature;
  }

}

module.exports = offlineStore;

},{"../editor/editdispatcher":108,"../viewer":205,"./offlinedispatcher":158,"./offlinelayer":159,"jquery":26,"localforage":27,"openlayers":29}],161:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var verifyFeatureIds = require('./verifyfeatureids');

var topoJson = {};
topoJson.request = function request(layer) {
  var source = layer.get('sourceName');
  var request = createRequest(source);
  return request;

  function createRequest(source) {
    var format = new ol.format.TopoJSON();
    var url = source;

    return $.ajax({
        url: url,
        cache: false
      })
      .then(function(response) {
        var features = format.readFeatures(response);
        features = verifyFeatureIds(features);
        return features;
      });
  }
}

module.exports = topoJson;

},{"./verifyfeatureids":162,"jquery":26,"openlayers":29}],162:[function(require,module,exports){
"use strict";
var generateUUID = require('../utils/generateuuid');

module.exports = function verifyFeatureIds(features) {
  if (features[0]) {
    if (features[0].getId() === undefined) {
      features.forEach(function(feature) {
        feature.setId(generateUUID());
      })
    }
  }

  return features;
}

},{"../utils/generateuuid":191}],163:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var wfsTransaction = require('../editor/wfstransaction');

var wfs = {};
wfs.request = function request(layer) {
  var sourceOptions = viewer.getMapSource()[layer.get('sourceName')];
  sourceOptions.featureType = layer.get('name').split('__').shift();
  sourceOptions.geometryName = layer.get('geometryName');
  sourceOptions.filter = layer.get('filter');
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.extent = layer.get('extent');
  sourceOptions.projectionCode = viewer.getProjectionCode();

  var request = createRequest(sourceOptions);
  return request;

  function createRequest(options) {
    var format = new ol.format.GeoJSON({
      geometryName: options.geometryName
    });

    var serverUrl = options.url;
    var queryFilter;
    var url;

    //If cql filter then bbox must be used in the filter.
    if (options.filter) {
      queryFilter = '&CQL_FILTER=' + options.filter +
        ' AND BBOX(' + options.geometryName + ',' +
        options.extent.join(',') + ',' +
        "'" + options.projectionCode + "')";
    } else {
      queryFilter = '&BBOX=' +
        options.extent.join(',') + ',' + options.projectionCode;
    }

    url = serverUrl +
      '?service=WFS&' +
      'version=1.1.0&request=GetFeature&typeName=' + options.featureType +
      '&outputFormat=application/json' +
      '&srsname=' + options.projectionCode +
      queryFilter;

    return $.ajax({
        url: url,
        cache: false
      })
      .then(function(response) {
        return format.readFeatures(response);
      });
  }
}

wfs.transaction = function(transObj, layerName) {
  return wfsTransaction(transObj, layerName);
}

module.exports = wfs;

},{"../editor/wfstransaction":117,"../viewer":205,"jquery":26,"openlayers":29}],164:[function(require,module,exports){
/*requires Modal.js*/
"use strict";

var permalinkParser = require('./permalinkparser');
var permalinkStore = require('./permalinkstore');
var urlparser =require('../utils/urlparser');

module.exports = function() {

return {
    getPermalink: function getPermalink(options) {
        var hash = urlparser.formatUrl(permalinkStore.getState());
        var url = permalinkStore.getUrl() + "#" + hash;
        return(url);
    },
    parsePermalink: function parsePermalink(url) {
        if(url.indexOf('#') > -1) {
            var urlSearch = url.split('#')[1];
            var urlParts = urlSearch.split('&');
            var urlAsObj = {};
            urlParts.forEach(function(part) {
                var key = part.split('=')[0];
                var val = part.split('=')[1];
                if(permalinkParser.hasOwnProperty(key)) {
                    urlAsObj[key] = permalinkParser[key](val);
                }
            });
            return urlAsObj;
        }
        else {
            return false;
        }
    }
};
}();

},{"../utils/urlparser":203,"./permalinkparser":165,"./permalinkstore":166}],165:[function(require,module,exports){
"use strict";
var urlparser = require('../utils/urlparser');

var layerModel = {
    v: {
      name: "visible",
      dataType: "boolean"
    },
    s: {
      name: "legend",
      dataType: "boolean"
    },
}

module.exports = {
  layers: function(layersStr) {
      var layers = layersStr.split(',');
      var layerObjects = {};
      layers.forEach(function(layer) {
          var obj = {};
          var layerObject = urlparser.objectify(layer,{topmost: "name"});
          Object.getOwnPropertyNames(layerObject).forEach(function(prop) {
              var val = layerObject[prop];
              if(layerModel.hasOwnProperty(prop)) {
                  var attribute = layerModel[prop];
                  obj[attribute.name] = urlparser.strBoolean(val);
              }
              else {
                  obj[prop] = val;
              }
          });
          layerObjects[obj.name] = obj;

      });
      return layerObjects;
  },
  zoom: function(zoomStr) {
      return parseInt(zoomStr);
  },
  center: function(centerStr) {
      var center = centerStr.split(",").map(function(coord) {
          return parseInt(coord);
      });
      return center;
  },
  selection: function(selectionStr) {
      return urlparser.strArrayify(selectionStr, {
        topmostName: "geometryType",
        arrName: "coordinates"}
      );
  },
  pin: function(pinStr) {
      return urlparser.strIntify(pinStr);
  },
  map: function(mapStr) {
      return mapStr;
  }
}

},{"../utils/urlparser":203}],166:[function(require,module,exports){
"use strict";

var viewer = require('../viewer');
var selection = require('../featureinfo')['getSelection'];
var getPin = require('../featureinfo')['getPin'];
var urlparser =require('../utils/urlparser');

var permalinkStore = {};
var state;
var url;

permalinkStore.getState = function getState() {
    state = {};
    var view = viewer.getMap().getView();
    var layers = viewer.getLayers();
    state.layers = getSaveLayers(layers);
    state.center = view.getCenter().map(function(coord) {
        return Math.round(coord);
    }).join();
    state.zoom = view.getZoom().toString();
    // state.selection = getSaveSelection(selection());
    if (getPin()) {
        state.pin = getPin().getGeometry().getCoordinates().map(function(coord) {
          return Math.round(coord);
        }).join();
    }
    if (viewer.getMapName()) {
        state.map = viewer.getMapName().split('.')[0];
    }
    return state;
}
permalinkStore.getUrl = function() {
    url = viewer.getUrl();
    return url;
}

function getSaveLayers(layers) {
    var saveLayers = [];
    layers.forEach(function(layer) {
        var saveLayer = {};
        saveLayer.v = layer.getVisible() === true ? 1 : 0;
        saveLayer.s = layer.get('legend') === true ? 1 : 0;
        if (saveLayer.s || saveLayer.v) {
            saveLayer.name = layer.get('name');
            saveLayers.push(urlparser.stringify(saveLayer, {topmost: 'name'}));
        }
    });
    return saveLayers;
}
function getSaveSelection(selection) {
    return urlparser.arrStringify(selection.coordinates, {topmost: selection.geometryType});
}

module.exports = permalinkStore;

},{"../featureinfo":118,"../utils/urlparser":203,"../viewer":205}],167:[function(require,module,exports){
"use strict";
var $ = require('jquery');

module.exports = function(target) {
    render(target);
    bindUIActions();
    return {
        getEl: getEl,
        setVisibility: setVisibility,
        setTitle: setTitle,
        setContent: setContent,
        closePopup: closePopup
    }
}
function render(target) {
  var pop = '<div id="o-popup">' +
      '<div class="o-popup o-card">' +
        '<div class="o-close-button"><svg class="o-icon-fa-times"><use xlink:href="#fa-times"></use></svg></div>' +
        '<div class="o-card-title"></div>' +
        '<div class="o-card-content"></div>' +
      '</div>' +
    '</div>';
  $(target).append(pop);
}
function bindUIActions() {
    $('#o-popup .o-popup .o-close-button').on('click', function(evt) {
        closePopup();
        evt.preventDefault();
    });
}
function getEl() {
    return $("#o-popup").get(0);
}
function setVisibility(visible) {
    visible == true ? $('#o-popup .o-popup').css('display', 'block') : $('#o-popup .o-popup').css('display', 'none');
}
function setTitle(title) {
    $('#o-popup .o-card-title').html(title);
}
function setContent(config) {
    config.title ? $('#o-popup .o-popup .o-card-title').html(config.title): $('#o-popup .o-popup .o-card-title').html('');
    config.content ? $('#o-popup .o-popup .o-card-content').html(config.content): $('#o-popup .o-popup .o-card-content').html('');
}
function closePopup() {
    setVisibility(false);
}

},{"jquery":26}],168:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var controlId = 'o-position';
var markerId = 'o-position-marker';
var toggleProjId = 'o-position-toggle-proj';
var coordsId = 'o-position-coords';
var coordsFindId = 'o-position-find';
var togglePositionId = 'o-toggle-position';
var characterError = 'Ogiltigt tecken för koordinat, vänligen försök igen.';
var extentError = 'Angivna koordinater ligger inte inom kartans utsträckning, vänligen försök igen.';
var map = undefined;
var view = undefined;
var consoleId = undefined;
var suffix = undefined;
var currentProjection = undefined;
var projections = undefined;
var projectionCodes = undefined;
var projection = undefined;
var mapProjection = undefined;
var precision = undefined;
var mousePositionActive = false;
var mousePositionControl;

function Init(opt_options) {
  var options = opt_options || {};
  var title = options.title || undefined;
  suffix = options.suffix || '';
  map = viewer.getMap();
  view = map.getView();
  projection = view.getProjection();
  mapProjection = viewer.getProjectionCode();
  consoleId = viewer.getConsoleId();
  projections = options.projections || {};
  projectionCodes = Object.getOwnPropertyNames(projections);
  if (title) {
    currentProjection = mapProjection;
    projections[currentProjection] = title;
    projectionCodes.unshift(mapProjection);
  } else if (projectionCodes.length) {
    currentProjection = projectionCodes[0];
  } else {
    alert('No title or projection is set for position');
  }
  setPrecision();

  render();
  bindUIActions();

  addMousePosition();
}

function render() {
  var icon = utils.createSvg({
    href: '#o_centerposition_24px',
    cls: 'o-icon-position'
  });
  var toggleButtons = utils.createElement('button', icon, {
    cls: 'o-position-center-button',
    id: togglePositionId
  });
  toggleButtons += utils.createElement('button', projections[currentProjection], {
    id: toggleProjId,
    cls: 'o-position-button',
    value: currentProjection
  });
  var coordsDiv = utils.createElement('div', '', {
    id: coordsId,
    cls: coordsId,
    style: 'padding-left: 5px;'
  });
  var coordsFind = utils.createElement('input', '', {
    id: coordsFindId,
    cls: coordsFindId,
    type: 'text',
    name: coordsFindId,
    style: 'padding-left: 5px;'
  });
  var controlContainer = utils.createElement('div', toggleButtons + coordsDiv + coordsFind, {
    id: controlId,
    cls: controlId,
    style: 'display: inline-block;'
  });
  $('#' + consoleId).append(controlContainer);
}

function bindUIActions() {
  $('#' + toggleProjId).on('click', onToggleProjection);
  $('#' + togglePositionId).on('click', onTogglePosition);
}

function addMousePosition() {
  mousePositionControl = new ol.control.MousePosition({
    coordinateFormat: ol.coordinate.createStringXY(precision),
    projection: currentProjection,
    target: document.getElementById(coordsId),
    undefinedHTML: '&nbsp;'
  });
  map.addControl(mousePositionControl);
  mousePositionActive = true;
  $('#' + coordsId).addClass('o-active');
}

function removeMousePosition() {
  map.removeControl(mousePositionControl);
  $('#' + coordsId).removeClass('o-active');
  mousePositionActive = false;
}

function addCenterPosition() {
  renderMarker();
  $('#' + togglePositionId).addClass('o-active');
  $('#' + coordsFindId).addClass('o-active');
  updateCoords(view.getCenter());
  view.on('change:center', onChangeCenter);
  $('#' + coordsFindId).on('keypress', onFind);
}

function removeCenterPosition() {
  view.un('change:center', onChangeCenter);
  clear();
  $('#' + coordsFindId).off('keypress', onFind);
  $('#' + markerId).remove();
  $('#' + togglePositionId).removeClass('o-active');
  $('#' + coordsFindId).removeClass('o-active');
}

function renderMarker() {
  var icon = utils.createSvg({
    href: '#o_centerposition_24px',
    cls: 'o-icon-position-marker'
  });
  var marker = utils.createElement('div', icon, {
    id: markerId,
    cls: markerId
  });
  $('#o-map').append(marker);
}

function findCoordinate() {
  var coords = $('#' + coordsFindId).val();
  var validated = validateCoordinate(coords);
  if (validated.length === 2) {
    map.getView().animate({
      center: validated,
      zoom: (viewer.getResolutions().length - 3)
    });
  }
}

function validateCoordinate(strCoords) {
  var extent = viewer.getExtent() || view.getProjection().getExtent();
  var inExtent;

  //validate numbers
  var coords = strCoords.split(',').map(function(coord) {
      return parseFloat(coord);
    })
    .filter(function(coord) {
      if (coord !== NaN) {
        return coord;
      }
    });
  if (coords.length !== 2) {
    alert(characterError);
    return [];
  }

  // transform
  if (currentProjection !== mapProjection) {
    coords = transformCoords(coords, currentProjection, mapProjection);
  }

  // validate coords within extent
  inExtent = coords[0] >= extent[0] && coords[1] >= extent[1];
  inExtent = inExtent && (coords[0] <= extent[2]) && (coords[1] <= extent[3]);
  if (inExtent) {
    return coords;
  } else {
    alert(extentError);
    return [];
  }
}

function toggleProjectionVal(val) {
  var index;
  var proj = undefined;
  index = projectionCodes.indexOf(val);
  if (index === projectionCodes.length - 1) {
    proj = projectionCodes[0];
  } else if (index < projectionCodes.length - 1) {
    proj = projectionCodes[index + 1];
  }
  return proj;
}

function clear() {
  writeCoords('');
}

function onTogglePosition() {
  if (mousePositionActive) {
    removeMousePosition();
    addCenterPosition();
  } else {
    addMousePosition();    
    removeCenterPosition();
  }
}

function onToggleProjection(e) {
  return function(event) {
    currentProjection = toggleProjectionVal(this.value);
    setPrecision();
    writeProjection(currentProjection);
    if (mousePositionActive) {
      removeMousePosition();
      addMousePosition();
    } else {
      updateCoords(view.getCenter());
    }
    this.blur();
    event.preventDefault();
  }.bind(this)(e);
}

function onChangeCenter() {
  updateCoords(view.getCenter());
}

function onFind(e) {
  if (e.which === 13) {
    findCoordinate();
  }
}

function round(coords) {
  if (precision) {
    return coords.map(function(coord) {
      return coord.toFixed(precision);
    });
  } else {
    return coords.map(function(coord) {
      return Math.round(coord);
    });
  }
}

function setPrecision() {
  if (currentProjection === 'EPSG:4326') {
    precision = 5;
  } else {
    precision = 0;
  }
}

function writeProjection() {
  $('#' + toggleProjId).val(currentProjection);
  $('#' + toggleProjId).text(projections[currentProjection]);
}

function transformCoords(coords, source, destination) {
  var geometry = new ol.Feature({
    geometry: new ol.geom.Point(coords)
  }).getGeometry();
  return geometry.transform(source, destination).getCoordinates();
}

function updateCoords(sourceCoords) {
  var coords = sourceCoords;
  var center;
  if (currentProjection !== mapProjection) {
    coords = transformCoords(coords, projection, currentProjection);
  }
  coords = round(coords);
  center = coords.join(', ') + suffix;
  writeCoords(center);
}

function writeCoords(coords) {
  $('#' + coordsFindId).val(coords);
}

module.exports.init = Init;

},{"./utils":189,"./viewer":205,"jquery":26,"openlayers":29}],169:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var template = require("./templates/print.handlebars");

var printWith = 800;
var $printButton;
var attribution;
var map;
var baseUrl;

function Init(opt_options) {
  var options = opt_options || {};
  attribution = options.attribution || '© Lantmäteriet Geodatasamverkan';
  map = Viewer.getMap();
  baseUrl = Viewer.getBaseUrl();

  render();
  bindUIActions();
}

function render() {
  var el = utils.createListButton({
    id: 'o-print',
    iconCls: 'o-icon-fa-print',
    src: '#fa-print',
    text: 'Skriv ut'
  });
  $('#o-menutools').append(el);
  $printButton = $('#o-print-button');
}

function bindUIActions() {
  $printButton.on('click', function(e) {
    $('#app-wrapper').append('<canvas id="o-print" style="display: none"></canvas>');
    createImage();
    e.preventDefault();
  });
}

function imageToPrint($printCanvas) {
  var imageCrop = new Image();
  try {
    imageCrop.src = $printCanvas.get(0).toDataURL("image/png");
  } catch (e) {
    console.log(e);
  } finally {
    var templateOptions = {};
    templateOptions.src = imageCrop.src;
    templateOptions.attribution = attribution;
    templateOptions.logoSrc = baseUrl + 'css/png/logo_print.png';
    var pw = template(templateOptions);
    var printWindow = window.open('', '', 'width=800,height=820');
    printWindow.document.write(pw);
    printWindow.document.close();
    setTimeout(function() {
      printWindow.print();
      setTimeout(function() {
        printWindow.close();
        $('#o-print').remove();
      }, 10);
    }, 200);
  }
}

function createImage() {
  var $canvas = $('canvas');
  var image = new Image();

  try {
    var imageUrl = $canvas.get(0).toDataURL("image/png");
  } catch (e) {
    console.log(e);
  } finally {

    // $printCanvas = copy of original map canvas
    var $printCanvas = $('#o-print');
    image.onload = function() {
      var ctxCanvas = $printCanvas[0].getContext('2d');

       //width of map canvas
      var sourceWidth = $canvas[0].width;

      //height of map canvas
      var sourceHeight = $canvas[0].height;

      //set the width of print canvas
      if (sourceWidth < printWith) {
        $printCanvas[0].width = sourceWidth;
      } else if (sourceWidth >= printWith) {
        $printCanvas[0].width = printWith;
      }

      //set the height of print canvas
      if (sourceHeight < printWith) {
        $printCanvas[0].height = sourceHeight;
      } else if (sourceWidth >= printWith) {
        $printCanvas[0].height = printWith;
      }

      ctxCanvas.drawImage(image, (sourceWidth / 2 - $printCanvas[0].width / 2), 0, $printCanvas[0].width, $printCanvas[0].height, 0, 0, $printCanvas[0].width, $printCanvas[0].height);
      imageToPrint($printCanvas);
    };
    image.src = imageUrl;
  }
}

module.exports.init = Init;

},{"./templates/print.handlebars":187,"./utils":189,"./viewer":205,"jquery":26}],170:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var rotateControl;
  var icon = utils.createSvg({
    href: '#origo-compass',
    cls: 'o-icon-compass'
  });
  map = Viewer.getMap();

  rotateControl = new ol.control.Rotate({
    label: $.parseHTML('<span>' + icon + '</span>')[0],
    tipLabel: ' ',
    target: 'o-toolbar-misc'
  });
  map.addControl(rotateControl);
}

module.exports.init = Init;

},{"./utils":189,"./viewer":205,"jquery":26,"openlayers":29}],171:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var numberFormatter = require('./utils/numberformatter');

var controlId = 'o-scale';
var consoleId;
var map;
var $console;
var isActive;
var scaleText;

function Init(opt_options) {
  var options = opt_options || {};
  map = Viewer.getMap();
  consoleId = Viewer.getConsoleId();
  scaleText = options.scaleText || 'Skala 1:';
  var initialState = options.hasOwnProperty('isActive') ? options.isActive : true;

  setActive(initialState);
  render();

  return {
    setActive: setActive
  }
}

function render() {
  var container = utils.createElement('div', '', {
    id: controlId,
    style: 'display: inline-block;'
  });
  $('#' + consoleId).append(container);
}

function setActive(state) {
  if (state === true) {
    map.on('movestart', onZoomChange);
    onZoomChange();
    isActive = true;
  } else if (state === false) {
    map.un('movestart', onZoomChange);
    isActive = false;
  }
}

function onZoomChange(evt) {
  map.once('moveend', function(e) {
    var view = map.getView();
    var resolution = evt ? evt.frameState.viewState.resolution : view.getResolution();
    var mapZoom = view.getZoomForResolution(resolution);
    var currentZoom = parseInt(view.getZoom(), 10);
    var currentResolution = view.getResolution();
    if (currentZoom !== mapZoom) {
      var scale = Viewer.getScale(currentResolution);
      $('#' + controlId).text(scaleText + numberFormatter(scale));
    }
  });
}

module.exports.init = Init;

},{"./utils":189,"./utils/numberformatter":197,"./viewer":205,"jquery":26}],172:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var Viewer = require('./viewer');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var target = options.target || 'o-tools-bottom';
  map = Viewer.getMap();

  var scaleLine = new ol.control.ScaleLine({
    target: target
  });
  map.addControl(scaleLine);
}

module.exports.init = Init;

},{"./viewer":205,"openlayers":29}],173:[function(require,module,exports){
'use strict';

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var wktToFeature = require('./maputils').wktToFeature;
var Popup = require('./popup');
var Awesomplete = require('awesomplete');
var getFeature = require('./getfeature');
var getAttributes = require('./getattributes');
var featureInfo = require('./featureinfo');
var mapUtils = require('./maputils');
var getCenter = require('./geometry/getcenter');
var utils = require('./utils');
var generateUUID = require('./utils/generateuuid');
var keyCodes = {
  9: 'tab',
  27: 'esc',
  37: 'left',
  39: 'right',
  13: 'enter',
  38: 'up',
  40: 'down'
};
var searchDb = {};
var map;
var name;
var northing;
var easting;
var geometryAttribute;
var idAttribute;
var layerNameAttribute;
var layerName;
var titleAttribute;
var contentAttribute;
var maxZoomLevel;
var url;
var title;
var hintText;
var projectionCode;
var overlay;
var limit;
var minLength;
var awesomplete;

function init(options) {
  name = options.searchAttribute;
  northing = options.northing || undefined;
  easting = options.easting || undefined;
  geometryAttribute = options.geometryAttribute;

  /** idAttribute in combination with layerNameAttribute
  must be defined if search result should be selected */
  idAttribute = options.idAttribute;
  layerNameAttribute = options.layerNameAttribute || undefined;
  layerName = options.layerName || undefined;
  url = options.url;
  title = options.title || '';
  titleAttribute = options.titleAttribute || undefined;
  contentAttribute = options.contentAttribute || undefined;
  maxZoomLevel = options.maxZoomLevel || Viewer.getResolutions().length - 2 || Viewer.getResolutions();
  limit = options.limit || 9;
  hintText = options.hintText || 'Sök...';
  minLength = options.minLength || 4;
  projectionCode = Viewer.getProjectionCode();

  map = Viewer.getMap();

  render();
  initAutocomplete();
  bindUIActions();
}

function render() {
  var el = '<div id="o-search-wrapper" class="o-search-wrapper">' +
    '<div id="o-search" class="o-search o-search-false">' +
    '<input id="hjl" class="o-search-field form-control" type="text" placeholder="' + hintText + '">' +
    '<button id="o-search-button">' +
    '<svg class="o-icon-fa-search">' +
    '<use xlink:href="#fa-search"></use>' +
    '</svg>' +
    '</button>' +
    '<button id="o-search-button-close">' +
    '<svg class="o-icon-search-fa-times">' +
    '<use xlink:href="#fa-times"></use>' +
    '</svg>' +
    '</button>' +
    '</div>' +
    '</div>';
  $('#o-map').append(el);
}

function bindUIActions() {
  document.getElementById('hjl').addEventListener("awesomplete-selectcomplete", selectHandler);

  $('#o-search .o-search-field').on('input', function() {
    if ($('#o-search .o-search-field').val() && $('#o-search').hasClass('o-search-false')) {
      $('#o-search').removeClass('o-search-false');
      $('#o-search').addClass('o-search-true');
      onClearSearch();
    } else if (!($('#o-search .o-search-field').val()) && $('#o-search').hasClass('o-search-true')) {
      $('#o-search').removeClass('o-search-true');
      $('#o-search').addClass('o-search-false');
    }
  });

  $('.o-search-field').on('blur', function(e) {
    $('.o-search-wrapper').removeClass('active');
    window.dispatchEvent(new Event('resize'));
  });
  $('.o-search-field').on('focus', function(e) {
    $('.o-search-wrapper').addClass('active');
    window.dispatchEvent(new Event('resize'));
  });

}

/*
The label property in Awesomplete is used to store the feature id. This way the properties
of each feature in the search response will be available in event handling.
The complete properties are stored in a tempory db called searchDb. This is a workaround
for a limit in Awesomplete that can only store data in the fields label and text.
The data-catogry attribute is used to make a layer division in the sugguestion list.
*/
function initAutocomplete() {
  var list;

  $.support.cors = true;

  var input = $("#o-search .o-search-field");
  awesomplete = new Awesomplete('#o-search .o-search-field', {
    minChars: minLength,
    autoFirst: false,
    sort: false,
    item: renderList,
    filter: function(suggestion, input) {
      return suggestion.value;
    }
  });

  var handler = function(data) {
    list = [];
    searchDb = {};
    if (data.length) {
      setSearchDb(data);
      if (name && layerNameAttribute) {
        list = groupToList(groupDb(searchDb));
      } else {
        list = dbToList(data);
      }
      awesomplete.list = list;
      awesomplete.evaluate();
    }
  };

  $(input).on("keyup", function(e) {
    var keyCode = e.keyCode;
    if (this.value.length >= minLength) {
      if (keyCode in keyCodes) {
        return;
      } else {
        makeRequest(handler, this);
      }
    }
  });
}

function dbToList() {
  var items = Object.keys(searchDb);
  return items.map(function(item) {
    return searchDb[item];
  });
}

function groupDb(data) {
  var group = {};
  var ids = Object.keys(data);
  ids.forEach(function(id) {
    var item = data[id];
    var type = item[layerNameAttribute];
    var header = false;
    if (type in group === false) {
      group[type] = [];
      item.header = Viewer.getLayer(type).get('title');
    }
    group[type].push(item);
  });
  return group;
}

function groupToList(group) {
  var types = Object.keys(group);
  var list = [];
  var selection = {};
  var nr = 0;
  var turn = 0;
  while (nr < limit && types.length) {
    types.slice().forEach(function(type) {
      if (nr < limit) {
        var item = group[type][turn];
        if (type in selection === false) {
          selection[type] = [];
        }
        selection[type][turn] = item;
        if (!group[type][turn + 1]) {
          types.splice(types.indexOf(type), 1);
        }
      }
      nr++;
    });
    turn++;
  }
  list = Object.keys(selection).reduce(function(previous, group) {
    return previous.concat(selection[group]);
  }, []);
  return list;
}

function setSearchDb(data) {
  data.forEach(function(item) {
    var id = generateUUID();
    item.label = id;
    item.value = item[name];
    searchDb[id] = item;
  });
}

function renderList(suggestion, input) {
  var item = searchDb[suggestion.label] || {};
  var header = 'header' in item ? '<div class="heading">' + item.header + '</div>' : '';
  var options = {};
  var html = input === '' ? suggestion.value : suggestion.value.replace(RegExp(Awesomplete.$.regExpEscape(input), "gi"), "<mark>$&</mark>");
  html = header + '<div class="suggestion">' + html + '</div>';
  options = {
    innerHTML: html,
    'aria-selected': 'false'
  };
  if ('header' in item) {
    options.className = 'header';
  }

  return Awesomplete.$.create("li", options);
}

function makeRequest(handler, obj) {
  $.ajax({
    url: url + '?q=' + encodeURI(obj.value),
    type: 'GET',
    dataType: 'json'
  }).then(handler);
}

function onClearSearch() {
  $('#o-search-button-close').on('click', function(e) {
    clearSearchResults();
    clear();
    $('#o-search').removeClass('o-search-true');
    $('#o-search').addClass('o-search-false');
    $('#o-search .o-search-field').val('');
    $('#o-search-button').blur();
    e.preventDefault();
  });
}

function showOverlay(data, coord) {
  var popup;
  var content;
  clear();
  popup = Popup('#o-map');
  overlay = new ol.Overlay({
    element: popup.getEl()
  });

  map.addOverlay(overlay);

  overlay.setPosition(coord);
  content = data[name];
  popup.setContent({
    content: content,
    title: title
  });
  popup.setVisibility(true);
  mapUtils.zoomToExent(new ol.geom.Point(coord), maxZoomLevel);
}

function showFeatureInfo(features, title, content) {
  var obj = {};
  obj.feature = features[0];
  obj.title = title;
  obj.content = content;
  clear();
  featureInfo.identify([obj], 'overlay', getCenter(features[0].getGeometry()));
  mapUtils.zoomToExent(features[0].getGeometry(), maxZoomLevel);
}

function clear() {
  featureInfo.clear();
  if (overlay) {
    Viewer.removeOverlays(overlay);
  }
}

function clearSearchResults() {
  awesomplete.list = [];
  setSearchDb([]);
}

/** There are several different ways to handle selected search result.
 * Option 1. Feature info is requested from a map service.
 * In this case idAttribute and layerNameAttribute must be provided.
 * A map service is used to get the geometry and attributes. The layer is defined
 * as an ordinary layer in the layer config section.
 * Option 2. Same as option 1 but for single layer search. layerName is defined
 * as an option and is not included in the search response.
 * In this case geometryAttribute and layerName must be provided.
 * Option 3. Complete feature info is included in the search result.
 * In this case titleAttribute, contentAttribute and geometryAttribute must be provided.
 * Option 4. This is a single table search. No layer is defined.
 * In this case geometryAttribute and title must be defined.
 * Option 5. Feature info is shown without selection in the map.
 * This is a simple single table search. In this case title, northing and easting
 * must be defined. */

function selectHandler(evt) {
  var id = evt.text.label;
  var data = searchDb[id];
  var layer;
  var id;
  var feature;
  var content;
  var coord;
  if (layerNameAttribute && idAttribute) {
    layer = Viewer.getLayer(data[layerNameAttribute]);
    id = data[idAttribute];
    getFeature(id, layer)
      .done(function(res) {
        var featureWkt;
        var coordWkt;
        if (res.length > 0) {
          showFeatureInfo(res, layer.get('title'), getAttributes(res[0], layer));
        }

        // Fallback if no geometry in response
        else if (geometryAttribute) {
          featureWkt = wktToFeature(data[geometryAttribute], projectionCode);
          coordWkt = featureWkt.getGeometry().getCoordinates();
          showOverlay(data, coordWkt);
        }
      });
  } else if (geometryAttribute && layerName) {
    feature = wktToFeature(data[geometryAttribute], projectionCode);
    layer = Viewer.getLayer(data[layerName]);
    showFeatureInfo([feature], layer.get('title'), getAttributes(feature, layer));
  } else if (titleAttribute && contentAttribute && geometryAttribute) {
    feature = wktToFeature(data[geometryAttribute], projectionCode);

    // Make sure the response is wrapped in a html element
    content = utils.createElement('div', data[contentAttribute]);
    showFeatureInfo([feature], data[titleAttribute], content);
  } else if (geometryAttribute && title) {
    feature = wktToFeature(data[geometryAttribute], projectionCode);
    content = utils.createElement('div', data[name]);
    showFeatureInfo([feature], title, content);
  } else if (easting && northing && title) {
    coord = [data[easting], data[northing]];
    showOverlay(data, coord);
  } else {
    console.log('Search options are missing');
  }
}

module.exports.init = init;

},{"./featureinfo":118,"./geometry/getcenter":124,"./getattributes":126,"./getfeature":127,"./maputils":149,"./popup":167,"./utils":189,"./utils/generateuuid":191,"./viewer":205,"awesomplete":5,"jquery":26,"openlayers":29}],174:[function(require,module,exports){
/*requires Modal.js*/
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var modal = require('./modal');
var mapmenu = require('./mapmenu');
var utils = require('./utils');
var permalink = require('./permalink/permalink');

var shareButton;

function init(){
    var el = utils.createListButton({
        id: 'o-share',
        iconCls: 'o-icon-fa-share-square-o',
        src: '#fa-share-square-o',
        text: 'Dela karta'
    });
    $('#o-menutools').append(el);
    shareButton = $('#o-share-button');
    bindUIActions();
}
function bindUIActions() {
    shareButton.on('click', function(e) {
        modal.createModal('#o-map', {title: 'Länk till karta', content: createContent()});
        modal.showModal();
        createLink(); //Add link to input
        mapmenu.toggleMenu();
        e.preventDefault();
    });
}
function createContent() {
    return '<div class="o-share-link"><input type="text"></div>' +
           '<i>Kopiera och klistra in länken för att dela kartan.</i>';
}
function createLink() {
    var url = permalink.getPermalink();
    $('.o-share-link input').val(url).select();
}

module.exports.init = init;

},{"./mapmenu":148,"./modal":151,"./permalink/permalink":164,"./utils":189,"./viewer":205,"jquery":26}],175:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var sidebar;

function init() {
    var el = '<div id="o-sidebar">' +
                '<div class="o-sidebar o-card">' +
                  '<div class="o-close-button"><svg class="o-icon-fa-times"><use xlink:href="#fa-times"></use></svg></div>' +
                  '<div class="o-card-title"></div>' +
                  '<div class="o-card-content"></div>' +
                '</div>' +
              '</div>';
    $('#o-map').append(el);
    sidebar = $('#o-sidebar');

    bindUIActions();
}
function bindUIActions() {
    $('#o-sidebar .o-sidebar .o-close-button').on('click', function(evt) {
        closeSidebar();
        evt.preventDefault();
    });
}
function setVisibility(visible) {
    visible == true ? $('#o-sidebar').addClass('o-sidebar-show') : $('#o-sidebar').removeClass('o-sidebar-show');
}
function setTitle(title) {
    $('#o-sidebar .o-card-title').html(title);
}
function setContent(config) {
    config.title ? $('#o-sidebar .o-sidebar .o-card-title').html(config.title): $('#o-sidebar .o-sidebar .o-card-title').html('');
    config.content ? $('#o-sidebar .o-sidebar .o-card-content').html(config.content): $('#o-sidebar .o-sidebar .o-card-content').html('');
}
function closeSidebar() {
    setVisibility(false);
}

module.exports.init = init;
module.exports.setVisibility = setVisibility;
module.exports.setTitle = setTitle;
module.exports.setContent = setContent;
module.exports.closeSidebar = closeSidebar;

},{"./utils":189,"./viewer":205,"jquery":26}],176:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Modal = require('./modal');
var viewer = require('./viewer');

var defaultTitle = 'Om kartan';
var defaultContent = '<p></p>';
var cls = 'o-splash';
var title;
var content;

function init(opt_options) {
  var options = opt_options || {};
  var url;
  title = options.title || defaultTitle;
  if (options.url) {
    url = viewer.getBaseUrl() + options.url;
    getContent(url)
      .done(function(data) {
        content = data;
        openModal();
      });
  } else {
    content = options.content || defaultContent;
    openModal();
  }
}

function getContent(url) {
  return $.get(url);
}

function openModal() {
  Modal.createModal('#o-map', {
    title: title,
    content: content,
    cls: cls
  });
  Modal.showModal();
}

module.exports.init = init;

},{"./modal":151,"./viewer":205,"jquery":26}],177:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var validateUrl = require('./utils/validateurl');
var styleFunctions = require('./style/stylefunctions');
var replacer = require('../src/utils/replacer');

var baseUrl;

var white = [255, 255, 255, 1];
var blue = [0, 153, 255, 1];
var width = 3;

//default edit style options
var editStyleOptions = {
  'Point': [{
    "circle": {
      "radius": 1,
      "stroke": {
        "color": blue,
        "width": 0
      },
      "fill": {
        "color": blue
      }
    }
  }],
  'LineString': [{
      'stroke': {
        color: white,
        width: width + 2
      }
    },
    {
      'stroke': {
        color: blue,
        width: width
      }
    }
  ],
  'Polygon': [{
      'stroke': {
        color: white,
        width: width + 2
      }
    },
    {
      'stroke': {
        color: blue,
        width: width
      }
    }
  ]
};

module.exports = function() {

  return {
    init: Init,
    createStyleOptions: createStyleOptions,
    createStyleList: createStyleList,
    createStyleRule: createStyleRule,
    createStyle: createStyle,
    styleFunction: styleFunction,
    createEditStyle: createEditStyle
  }
};

function Init() {
  baseUrl = Viewer.getBaseUrl();
}

function createStyleOptions(styleParams) {
  var styleOptions = {};
  if (styleParams.hasOwnProperty('geometry')) {
    switch (styleParams.geometry) {
      case 'centerPoint':
        styleOptions.geometry = function(feature) {
          var coordinates = feature.getGeometry().getInteriorPoints().getFirstCoordinate();
          return new ol.geom.Point(coordinates);
        }
        break;
      case 'endPoint':
        styleOptions.geometry = function(feature) {
          var coordinates = feature.getGeometry().getLastCoordinate();
          return new ol.geom.Point(coordinates);
        }
        break;
    }
  }
  if (styleParams.hasOwnProperty('zIndex')) {
    styleOptions.zIndex = styleParams.zIndex;
  }
  if (styleParams.hasOwnProperty('fill')) {
    styleOptions.fill = new ol.style.Fill(styleParams.fill);
  }
  if (styleParams.hasOwnProperty('stroke')) {
    styleOptions.stroke = new ol.style.Stroke(styleParams.stroke);
  }
  if (styleParams.hasOwnProperty('text')) {
    styleOptions.text = new ol.style.Text(styleParams.text);
    if (styleParams.text.hasOwnProperty('fill')) {
      styleOptions.text.setFill(new ol.style.Fill(styleParams.text.fill));
    }
    if (styleParams.text.hasOwnProperty('stroke')) {
      styleOptions.text.setStroke(new ol.style.Stroke(styleParams.text.stroke));
    }
  }
  if (styleParams.hasOwnProperty('icon')) {
    if (styleParams.icon.hasOwnProperty('src')) {
      styleParams.icon.src = validateUrl(styleParams.icon.src, baseUrl);
    }
    styleOptions.image = new ol.style.Icon(styleParams.icon);
  }
  if (styleParams.hasOwnProperty('circle')) {
    styleOptions.image = new ol.style.Circle({
      radius: styleParams.circle.radius,
      fill: new ol.style.Fill(styleParams.circle.fill) || undefined,
      stroke: new ol.style.Stroke(styleParams.circle.stroke) || undefined
    });
  }
  return styleOptions;
}

function createStyleList(styleOptions) {
  var styleList = [];
  //Create style for each rule
  for (var i = 0; i < styleOptions.length; i++) {
    var styleRule = [];
    var styleOption;
    //Check if rule is array, ie multiple styles for the rule
    if (styleOptions[i].constructor === Array) {
      for (var j = 0; j < styleOptions[i].length; j++) {
        styleOption = createStyleOptions(styleOptions[i][j]);
        styleRule.push(new ol.style.Style(styleOption));
      }
    }
    //If single style for rule
    else {
      styleOption = createStyleOptions(styleOptions[i]);
      styleRule = [new ol.style.Style(styleOption)];
    }

    styleList.push(styleRule);
  }
  return styleList;
}

function createStyle(styleName, clusterStyleName) {
  var styleSettings = Viewer.getStyleSettings()[styleName];
  if ($.isEmptyObject(styleSettings)) {
    alert('Style ' + styleName + ' is not defined');
  }
  if (styleSettings[0][0].hasOwnProperty("custom")) {
    var style = styleFunctions(styleSettings[0][0].custom, styleSettings[0][0].params);
    return style;
  } else {
    var clusterStyleSettings = Viewer.getStyleSettings()[clusterStyleName];
    var style = (function() {
      //Create style for each rule
      var styleList = createStyleList(styleSettings);
      if (clusterStyleSettings) {
        var clusterStyleList = createStyleList(clusterStyleSettings);
        return styleFunction(styleSettings, styleList, clusterStyleSettings, clusterStyleList);
      } else {
        return styleFunction(styleSettings, styleList);
      }

    })()
    return style;
  }
}

function createStyleRule(options) {
  var styleRule = [],
    styleOption;
  if (options.constructor === Array) {
    for (var i = 0; i < options.length; i++) {
      var styleOption = createStyleOptions(options[i]);
      styleRule.push(new ol.style.Style(styleOption));
    }
  }
  //If single style for rule
  else {
    styleOption = createStyleOptions(options);
    styleRule = [new ol.style.Style(styleOption)];
  }
  return styleRule;
}

function styleFunction(styleSettings, styleList, clusterStyleSettings, clusterStyleList) {
  var s = styleSettings;
  var resolutions = Viewer.getResolutions();
  var fn = function(feature, resolution) {
    var scale = Viewer.getScale(resolution);
    var styleL;
    //If size is larger than, it is a cluster
    var size = clusterStyleList ? feature.get('features').length : 1;
    if (size > 1 && resolution != resolutions[resolutions.length + 1]) {
      styleL = checkOptions(feature, scale, clusterStyleSettings, clusterStyleList, size.toString());
      // clusterStyleList[0].setText(size);
    } else {
      styleL = checkOptions(feature, scale, styleSettings, styleList);
    }
    return styleL;
  }
  return fn;
}

function createEditStyle() {
  return {
    'Point': createStyleRule(editStyleOptions['Point']),
    'MultiPoint': createStyleRule(editStyleOptions['Point']),
    'LineString': createStyleRule(editStyleOptions['LineString']),
    'MultiLineString': createStyleRule(editStyleOptions['LineString']),
    'Polygon': createStyleRule(editStyleOptions['Polygon']),
    'MultiPolygon': createStyleRule(editStyleOptions['Polygon'])
  };
}

function checkOptions(feature, scale, styleSettings, styleList, size) {
  var s = styleSettings;
  for (var j = 0; j < s.length; j++) {
    var styleL;
    if (Viewer.checkScale(scale, s[j][0].maxScale, s[j][0].minScale)) {
      s[j].some(function(element, index, array) {
        if (element.hasOwnProperty('text') && size) {
          styleList[j][index].getText().setText(size);
        } else if (element.hasOwnProperty('text')) {
          styleList[j][index].getText().setText(replacer.replace(element.text.text, feature.getProperties()));
        }
      });
      if (s[j][0].hasOwnProperty('filter')) {
        //find attribute vale between [] defined in styles
        var featAttr, expr, featMatch;
        var matches = s[j][0].filter.match(/\[(.*?)\]/);
        if (matches) {
          if (feature.get('features')) {
            feature = feature.get('features')[0];
          }
          featAttr = matches[1];
          expr = s[j][0].filter.split(']')[1];
          featMatch = feature.get(featAttr);
          expr = typeof featMatch == 'number' ? featMatch + expr : '"' + featMatch + '"' + expr;
        }
        if (eval(expr)) {
          styleL = styleList[j];
          return styleL;
        }
      } else {
        styleL = styleList[j];
        return styleL;
      }
    }
  }
}

},{"../src/utils/replacer":199,"./style/stylefunctions":181,"./utils/validateurl":204,"./viewer":205,"jquery":26,"openlayers":29}],178:[function(require,module,exports){
var colors = {
  'black': [0,0,0],
  'red': [255,59,48],
  'yellow': [255,204,0],
  'green': [0,255,0],
  'cyan': [0,255,255],
  'blue': [0,122,255],
  'magenta': [255,0,255],
  'default': [255,255,255]
};

module.exports = function getColor(colorName, alpha) {
  var color;
  if (colorName in colors) {
    color = colors[colorName];
  } else {
    color = colors.default;
  }
  if (alpha) {
    return color.concat(alpha);
  }
  return color;
};

},{}],179:[function(require,module,exports){
"use strict";

var measure = {
  linestring: [
    {
      'geometry': 'endPoint',
      'circle': {
        fill: {
          color: [0, 153, 255, 1]
        },
        stroke: {
          color: [0, 153, 255, 1],
          width: 1
        },
        radius: 3
      },
      'text': {
        font: 'bold 13px "Helvetica Neue", Helvetica, Arial, sans-serif',
        textBaseline: 'bottom',
        textAlign: 'center',
        offsetY: -4,
        fill: {color: [0, 153, 255, 1]},
        stroke: {color: [255, 255, 255, 0.8], width: 4}
      }
    },
    {
      'stroke': {
        color: [0, 153, 255, 1],
        width: 2
      }
    }
  ],
  polygon: [
    {
      'fill': {
        color: [255, 255, 255, 0.4]
      },
      'stroke': {
        color: [0, 153, 255, 1],
        width: 2
      },
      'text': {
        font: 'bold 13px "Helvetica Neue", Helvetica, Arial, sans-serif',
        textBaseline: 'middle',
        textAlign: 'center',
        fill: {color: [0, 153, 255, 1]},
        stroke: {color: [255, 255, 255, 0.8], width: 4}
      }
    }
  ],
  interaction: [
    {
      'fill': {
        color: [255, 255, 255, 0.2]
      },
      'stroke': {
        'color': [0, 0, 0, 0.5],
        'lineDash': [10, 10],
        'width': 2
      },
      'circle': {
        'radius': 5,
        'stroke': {
          'color': [0, 0, 0, 0.7]
        },
        'fill': {
          color: [255, 255, 255, 0.2]
        }
      }
    }
  ]
};

module.exports = measure;

},{}],180:[function(require,module,exports){
"use strict";

var pin = [
    {
      'icon': {
          anchor: [0.5, 32],
          anchorXUnits: 'fraction',
          anchorYUnits: 'pixels',
          src: 'img/png/drop_blue.png'
      }
    }
];

module.exports = pin;

},{}],181:[function(require,module,exports){
"use strict";

var defaultStyle = require('./stylefunctions/default');

var customStyles = {
  default: defaultStyle
};

module.exports = function styleFunctions(customStyle, params) {
  if (customStyle in customStyles) {
    return customStyles[customStyle](params);
  } else {
    return customStyles.default(params);
  }
};

},{"./stylefunctions/default":182}],182:[function(require,module,exports){
var ol = require('openlayers');
var getColor = require('../getcolor');

module.exports = function defaultStyle(params) {
  var fill = new ol.style.Fill({
    color: ''
  });
  var stroke = new ol.style.Stroke({
    color: '',
    width: 0.1,
    lineCap: 'square',
    lineJoin: 'round'
  });
  var noStroke = new ol.style.Stroke({
    color: '',
    width: 0.0
  });
  var overlayedStroke = new ol.style.Stroke({
    color: '',
    width: 0.1,
    lineCap: 'square',
    lineJoin: 'round'
  });
  var dashedStroke = new ol.style.Stroke({
    color: '',
    width: 1,
    lineDash: [1, 2]
  });
  var polygon = new ol.style.Style({
    fill: fill,
    zIndex: 1
  });
  var strokedPolygon = new ol.style.Style({
    fill: fill,
    stroke: stroke,
    zIndex: 2
  });
  var dashedPolygon = new ol.style.Style({
    fill: fill,
    stroke: dashedStroke,
    zIndex: 2
  });
  var line = new ol.style.Style({
    stroke: stroke,
    zIndex: 10
  });
  var overlayedLine = new ol.style.Style({
    stroke: overlayedStroke,
    zIndex: 11
  });
  var dashedLine = new ol.style.Style({
    stroke: dashedStroke,
    zIndex: 12
  });
  var point = new ol.style.Style({
    image: new ol.style.Circle({
      radius: 5,
      fill: fill,
      stroke: stroke
    }),
    zIndex: 50
  });
  var styles = [];

  return function(feature, resolution) {
    polygon.setZIndex(1);
    line.setZIndex(10);
    var length = 0;
    var geom = feature.getGeometry().getType();
    switch (geom) {
      case 'Polygon':
        stroke.setColor(getColor('blue'));
        stroke.setWidth(1);
        fill.setColor(getColor('blue', 0.8));
        styles[length++] = strokedPolygon;
        break;
      case 'MultiPolygon':
        stroke.setColor(getColor('blue'));
        stroke.setWidth(1);
        fill.setColor(getColor('blue', 0.8));
        styles[length++] = strokedPolygon;
        break;
      case 'LineString':
        stroke.setColor(getColor('red'));
        stroke.setWidth(1);
        styles[length++] = line;
        break;
      case 'MultiLineString':
        stroke.setColor(getColor('red'));
        stroke.setWidth(1);
        styles[length++] = line;
        break;
      case 'Point':
        stroke.setColor(getColor('yellow'));
        stroke.setWidth(1);
        fill.setColor(getColor('yellow', 0.8));
        styles[length++] = point;
        break;
      case 'MultiPoint':
        stroke.setColor(getColor('yellow'));
        stroke.setWidth(1);
        fill.setColor(getColor('yellow', 0.8));
        styles[length++] = point;
        break;
      default:
        stroke.setColor(getColor('blue'));
        stroke.setWidth(1);
        fill.setColor(getColor('blue', 0.8));
        styles[length++] = strokedPolygon;
        break;
    }
    styles.length = length;
    return styles;
  };
};

},{"../getcolor":178,"openlayers":29}],183:[function(require,module,exports){
"use strict";

var pin = require('./pin');
var measure = require('./measure');

module.exports = function() {

  var styleTypes = {};

  styleTypes.pin = pin;
  styleTypes.measure = measure;

  return {
    getStyle: function getStyle(type) {
      if(type) {
        return styleTypes[type];
      } else {
        console.log(type + ' is not a default style');
      }
    }
  }
}();

},{"./measure":179,"./pin":180}],184:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<div id=\"o-editor-toolbar\" class=\"o-editor-toolbar o-toolbar o-toolbar-horizontal o-padding-horizontal-8 o-rounded-top o-hidden\">\r\n    <div id=\"o-editor-toolbar-drawtools\" class=\"o-toolbar-horizontal\">\r\n      <div class=\"o-popover-container\">\r\n        <button id=\"o-editor-draw\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n          <svg class=\"o-icon-24\">\r\n              <use xlink:href=\"#ic_mode_edit_24px\"></use>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <button id=\"o-editor-attribute\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n      <svg class=\"o-icon-24\">\r\n          <use xlink:href=\"#ic_title_24px\"></use>\r\n      </svg>\r\n    </button>\r\n    <button id=\"o-editor-delete\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n      <svg class=\"o-icon-24\">\r\n          <use xlink:href=\"#ic_delete_24px\"></use>\r\n      </svg>\r\n    </button>\r\n    <div class=\"o-popover-container\">\r\n      <button id=\"o-editor-layers\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n        <svg class=\"o-icon-24\">\r\n            <use xlink:href=\"#ic_layers_24px\"></use>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n    <button id=\"o-editor-save\" class=\"o-button-lg o-disabled\" type=\"button\" name=\"button\">\r\n      <svg class=\"o-icon-24\">\r\n          <use xlink:href=\"#ic_save_24px\"></use>\r\n      </svg>\r\n    </button>\r\n    <button id=\"o-editor-close\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n        <svg class=\"o-icon-24\">\r\n            <use xlink:href=\"#ic_close_24px\"></use>\r\n        </svg>\r\n    </button>\r\n</div>\r\n";
},"useData":true});

},{"hbsfy/runtime":25}],185:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"1":function(container,depth0,helpers,partials,data) {
    var helper, alias1=container.escapeExpression;

  return "      <li><b>"
    + alias1(((helper = (helper = helpers.key || (data && data.key)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"key","hash":{},"data":data}) : helper)))
    + "</b> : "
    + alias1(container.lambda(depth0, depth0))
    + "</li>\r\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1;

  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : {},depth0,{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "");
},"useData":true});

},{"hbsfy/runtime":25}],186:[function(require,module,exports){
"use strict";

var defaultTemplate = require("./default.handlebars");

module.exports = function(attributes) {
  return defaultTemplate(attributes);
}

},{"./default.handlebars":185}],187:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=container.lambda, alias2=container.escapeExpression;

  return "<html>\r\n  <head>\r\n    <link href=\"css/print.css\" rel=\"stylesheet\">\r\n  </head>\r\n  <body>\r\n    <div class=\"o-print-logo\"><img src=\""
    + alias2(alias1((depth0 != null ? depth0.logoSrc : depth0), depth0))
    + "\"></div>\r\n    <div class=\"o-map-canvas\"><img src=\""
    + alias2(alias1((depth0 != null ? depth0.src : depth0), depth0))
    + "\"/></div>\r\n    <div class=\"o-print-attribution\">"
    + alias2(alias1((depth0 != null ? depth0.attribution : depth0), depth0))
    + "</div>\r\n  </body>\r\n</html>\r\n";
},"useData":true});

},{"hbsfy/runtime":25}],188:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"1":function(container,depth0,helpers,partials,data) {
    return "        <img src=\""
    + container.escapeExpression(container.lambda((depth0 != null ? depth0.img : depth0), depth0))
    + "\">\r\n";
},"3":function(container,depth0,helpers,partials,data) {
    var alias1=container.lambda, alias2=container.escapeExpression;

  return "        <a href=\""
    + alias2(alias1((depth0 != null ? depth0.url : depth0), depth0))
    + "\">"
    + alias2(alias1((depth0 != null ? depth0.urlText : depth0), depth0))
    + "</a>\r\n";
},"5":function(container,depth0,helpers,partials,data) {
    return "        <p>"
    + container.escapeExpression(container.lambda((depth0 != null ? depth0.text : depth0), depth0))
    + "</p>\r\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {};

  return "<div id=\"o-map\" class=\""
    + container.escapeExpression(container.lambda((depth0 != null ? depth0.mapClass : depth0), depth0))
    + "\">\r\n  <div id=\"o-tools-left\" class=\"o-container-absolute o-tools-left\">\r\n    <div id=\"o-toolbar-navigation\" class=\"o-toolbar-vertical o-toolbar-navigation\"></div>\r\n    <div id=\"o-toolbar-maptools\" class=\"o-toolbar-vertical o-toolbar-maptools\"></div>\r\n    <div id=\"o-toolbar-misc\" class=\"o-toolbar-vertical o-toolbar-misc\"></div>\r\n  </div>\r\n  <div id=\"o-tools-bottom\" class=\"o-tools-bottom\"></div>\r\n  <div id=\"o-footer\" class=\"o-footer\">\r\n    <div id=\"o-console\" class=\"o-footer-left\">&nbsp;</div>\r\n    <div class=\"o-footer-middle\">\r\n      <div class=\"o-footer-middle-content\">\r\n"
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.img : depth0),{"name":"if","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.url : depth0),{"name":"if","hash":{},"fn":container.program(3, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.text : depth0),{"name":"if","hash":{},"fn":container.program(5, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "      </div>\r\n    </div>\r\n    <div class=\"o-footer-right\">\r\n    </div>\r\n</div>\r\n";
},"useData":true});

},{"hbsfy/runtime":25}],189:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = {
    createButton: function(options) {
        var tooltip ='';
        var text ='';
        var cls = options.cls || '';
        var iconCls = options.iconCls || '';
        var placement = options.tooltipPlacement || 'east';
        if(options.text) {
            text = '<span class="o-button-text">' + options.text + '</span>';
        }
        if(options.tooltipText) {
            tooltip = '<span data-tooltip="' + options.tooltipText + '" data-placement="' + placement + '"></span>';
        }
        var el = '<div id="' + options.id + '" class="o-button-container o-tooltip">' +
                 '<button class="o-button ' + cls + '">' + text +
                    '<svg class="' + iconCls + '">' +
                        '<use xlink:href="' + options.src + '"></use>' +
                    '</svg>' +
                 '</button>' +
                 tooltip +
                 '</div>';
        return el;
    },
    createListButton: function(options) {
        var el = '<li>' +
                    '<div id="' + options.id + '-button" class="o-menu-button"' + '>' +
                        '<div class="o-button-icon">' +
                          '<svg class="' + options.iconCls + '">' +
                              '<use xlink:href="' + options.src + '"></use>' +
                          '</svg>' +
                        '</div>' +
                            options.text +
                        // '</div>' +
                    '</div>' +
                  '</li>';
        return el;
    },
    createElement: function(el, val, attributes) {
        var prefix = '<' + el;
        var suffix = '</' + el  + '>';
        var attributeNames = attributes ? Object.getOwnPropertyNames(attributes) : [];
        var attributeList = attributeNames.map(function(name) {
            var res = '';
            if (name === "cls") {
                res = ' ' + 'class'.concat('=', '"', attributes[name], '"');
            } else {
                res = ' ' + name.concat('=', '"', attributes[name],'"');
            }
            return res;
        });
        var element = prefix.concat(attributeList.join(' '), '>', val, suffix);
        return element;
    },
    createSvg: function(props) {
        var use = this.createElement('use', '', {
            'xlink:href': props.href
        });
        return this.createElement('svg', use, {
            cls: props.cls
        });
    }
}

},{"jquery":26}],190:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = function elQuery(targetObj, options) {
  var target = '.o-map';
  var prefix = options.breakPointsPrefix;
  var breakPoints = options.breakPoints;
  var breakNames = Object.getOwnPropertyNames(breakPoints);
  var breakCls = arrToObj(breakNames, prefix);
  var breakClsNames = breakNames.map(function(breakSize) {
    return breakCls[breakSize];
  });

  $(window).on('resize', onSizeChange);
  onSizeChange();

  function onSizeChange() {
    var mapSize = targetObj.getSize();
    var val = breakNames.reduce(function(prev, curr) {
      var height = breakPoints[curr][1];
      var width = breakPoints[curr][0];
      if (mapSize[0] <= width || mapSize[1] <= height) {
        if (!prev) {
          return curr;
        } else {
          return prev;
        }
      } else {
        return prev;
      }
    }, undefined);
    $(target).removeClass(breakClsNames.join(' '));
    if (val) {
      $(target).addClass(breakCls[val]);
    }
  }

  function arrToObj(arr, start) {
    var obj = {};
    var val = start;
    arr.slice().reverse().forEach(function(curr) {
      val += '-' + curr;
      obj[curr] = val;
    });
    return obj;
  }
}

},{"jquery":26}],191:[function(require,module,exports){
"use strict";


/**
Function to generate a unique id.
From Briguy37 http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript
*/
var generateUUID = function generateUUID() {
  var d = new Date().getTime();
  if (window.performance && typeof window.performance.now === "function") {
    d += performance.now(); //use high-precision timer if available
  }
  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = (d + Math.random() * 16) % 16 | 0;
    d = Math.floor(d / 16);
    return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);
  });
  return uuid;
}

module.exports = generateUUID;

},{}],192:[function(require,module,exports){
"use strict";

module.exports = function getimageorientation(file, callback) {
  var reader = new FileReader();
  reader.onload = function(e) {
    var view = new DataView(e.target.result);
    var length;
    var offset;
    var marker;
    var little;
    var tags;

    if (view.getUint16(0, false) != 0xFFD8) {
      return callback(-2);
    }

    length = view.byteLength;
    offset = 2;
    while (offset < length) {
      marker = view.getUint16(offset, false);
      offset += 2;
      if (marker == 0xFFE1) {
        if (view.getUint32(offset += 2, false) != 0x45786966) {
          return callback(-1);
        }

        little = view.getUint16(offset += 6, false) == 0x4949;
        offset += view.getUint32(offset + 4, little);
        tags = view.getUint16(offset, little);
        offset += 2;
        for (var i = 0; i < tags; i++) {
          if (view.getUint16(offset + (i * 12), little) == 0x0112) {
            return callback(view.getUint16(offset + (i * 12) + 8, little));
          }
        }

      } else if ((marker & 0xFF00) != 0xFF00) {
        break;
      } else {
        offset += view.getUint16(offset, false);
      }
    }

    return callback(-1);
  };
  reader.readAsArrayBuffer(file);
}

},{}],193:[function(require,module,exports){
"use strict";

module.exports = function getUrl() {
    return location.protocol +'//'+
            location.hostname +
            (location.port?":"+location.port:"") +
            location.pathname;
}

},{}],194:[function(require,module,exports){
"use strict";

module.exports = function imageresizer(imageData, opt_options, orientation, callback) {
  var fileType = imageData.split(';')[0].split('/')[1];
  var options = opt_options;
  var image = new Image();

  image.onload = function(imageEvent) {
    var canvas = document.createElement('canvas');
    var context = canvas.getContext('2d');
    var max_size = options.maxSize || 600;
    var width = image.width;
    var height = image.height;
    var translateWidth;
    var translateHeight;
    var rotation;
    var dataUrl;

    if (width > height) {
      if (width > max_size) {
        height *= max_size / width;
        width = max_size;
      }
    } else {
      if (height > max_size) {
        width *= max_size / height;
        height = max_size;
      }
    }

    canvas.width = width;
    canvas.height = height;

    if (orientation%2 === 0) {
      canvas.width = height;
      canvas.height = width;
    }

    switch (orientation) {
      case 1:
        translateWidth = 0;
        translateHeight = 0;
        rotation = 0;
        break;
      case 3:
        translateWidth = canvas.width;
        translateHeight = canvas.height;
        rotation = 180;
        break;
      case 6:
        translateWidth = canvas.width;
        translateHeight = 0;
        rotation = 90;
        break;
      case 8:
        translateWidth = 0;
        translateHeight = canvas.height;
        rotation = 270;
        break;
      default:
        translateWidth = 0;
        translateHeight = 0;
        rotation = 0;
        break;
    }

    context.translate(translateWidth,translateHeight);
    context.rotate(rotation*Math.PI/180);
    context.drawImage(image, 0, 0, width, height);
    dataUrl = canvas.toDataURL('image/' + fileType);
    callback(dataUrl);
  }

  image.src = imageData;
}

},{}],195:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = function isEmbedded(target) {
  if (window.top !== window.self || $(target).parent().is('BODY') === false) {
    return true;
  } else {
    return false;
  }
}

},{"jquery":26}],196:[function(require,module,exports){
"use strict";

module.exports = function isUrl(s) {
   var regexp = new RegExp('^(?:[a-z]+:)?//', 'i');
   return regexp.test(s);
}

},{}],197:[function(require,module,exports){
"use strict";

module.exports = function numberFormatter(numberToFormat) {
  var nr = numberToFormat;
  var length = nr.toString().length;
  if (length > 3) {
    var delimiter = ' '; //white space as delimiter

    //Round by factor
    if (nr >= 1000) {
      var factor = Math.pow(10, length) / 10000;
      nr = Math.round(nr / factor) * factor;
    }

    var nrStr = nr.toString();
    var a = [];
    while (nrStr.length > 3) {
      var n = nrStr.substr(nrStr.length - 3);
      a.unshift(n);
      nrStr = nrStr.substr(0, nrStr.length - 3);
    }
    if (nrStr.length > 0) {
      a.unshift(nrStr);
    }
    nrStr = a.join(delimiter);
    return nrStr;
  } else {
    return nr.toString();
  }
}

},{}],198:[function(require,module,exports){
"use strict";
var $ = require('jquery');
var utils = require('../utils');

module.exports = function renderError(type, el) {
  if (type === 'browser') {
    renderBrowserError(el);
  }

  function renderBrowserError(el) {
    var message = 'Det ser ut som att du använder en föråldrad webbläsare. Prova att uppgradera din webbläsare för att visa kartan.'
    var elMessage = utils.createElement('div', message, {
      cls: 'o-no-map-message'
    });
    var container = utils.createElement('div', elMessage, {
      cls: 'o-no-map'
    });
    $(function() {
      $(el).append(container);
    });
  }
}

},{"../utils":189,"jquery":26}],199:[function(require,module,exports){
"use strict";

var Replacer = function() {

  var start = undefined;
  var end = undefined;
  var helper = undefined;
  var helperNS = undefined;
  var helperArg = undefined;

  function replace(name, obj, options) {
      start = options.start || '{{';
      end = options.end || '}}';
      helper = options.helper || {};
      helperNS = options.helperNS || '@';
      helperArg = [options.helperArg] || [];

      var result = searchAndReplace(name, obj);
      return result;
  }

  function searchAndReplace(name, obj) {
      var regex = new RegExp(start + '(.*?)' +  end, "g");
      var matches = regex.exec(name);
      if(matches) {
          var val = obj.hasOwnProperty(matches[1]) ? obj[matches[1]] : '';
          if (!val) {
            var nsIndex = matches[0].indexOf(helperNS);
            if (nsIndex) {
              var helperParts = getArgs(matches[1]);
              var helperName = helperParts[1].substring(nsIndex - 1);
              var args = helperArg.concat(helperParts[0]);
              val = helper.hasOwnProperty(helperName) ? helper[helperName].apply(null, args).toString() : '';
            }
          }
          return searchAndReplace(name.replace(matches[0], val), obj);
      }
      else {
          return name;
      }
  }

  function getArgs(str) {
    var args = str.match(/\((.*?)\)/);
    if (args) {
      return [args[1].split(','), str.substring(0, args.index)];
    } else {
      return ['',str];
    }
  }

	return {
  		replace: function(name, obj, options) {
          var opt = options || {};
          return (replace(name, obj, opt));
  		}
	};

}

module.exports = Replacer();

},{}],200:[function(require,module,exports){
"use strict";

var round = function round(value, decimals) {
  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);
}

module.exports = round;

},{}],201:[function(require,module,exports){
"use strict";
var renderError = require('./rendererror');

module.exports = function supports(type, el) {
  var canvas = document.createElement('canvas').getContext;
  var requestAnimationFrame = window.requestAnimationFrame;
  if (!!canvas && !!requestAnimationFrame) {
    return true;
  } else {
    renderError('browser', el);
    return false;
  }
}

},{"./rendererror":198}],202:[function(require,module,exports){
"use strict";

module.exports = function trimUrl(url) {
  var trimmed;
  if (url.substring(url.lastIndexOf('/')).indexOf('.htm') !== -1) {
    trimmed = url.substring(0, url.lastIndexOf('/') + 1);
  } else if (url.substr(url.length - 1) !== '/') {
    trimmed = url + '/';
  } else {
    trimmed = url;
  }
  return trimmed;
}

},{}],203:[function(require,module,exports){
"use strict";

var urlparser = {};

urlparser.objectify = function(objString, opt_options) {
    var options = opt_options || {};
    var delimeter = options.delimeter || '/';
    var topmost = options.topmost || 'name';
    var parts = objString.split(delimeter);
    var obj = {};
    if(options.topmost) {
        if(parts[0]  === '') {
            console.log('Topmost value is missing');
        }
        else {
            obj[topmost] = parts[0];
        }
    }
    if(parts.length > 1) {
        for (var i = 1, ii = parts.length; i < ii; i += 2) {
            obj[parts[i]] = parts[i + 1];
        }
    }
    return obj;
}
urlparser.stringify = function(obj, opt_options) {
    var options = opt_options || {};
    var delimeter = options.delimeter || '/';
    var topmost = options.topmost || undefined;
    var objString = topmost ? obj[topmost] : '';
    for (var key in obj) {
        if(key !== topmost)
        objString += delimeter + key + delimeter + obj[key];
    }
    return objString;
}
urlparser.arrStringify = function(arr, opt_options) {
   var options = opt_options || {};
   var delimeter = options.delimeter || '/';
   var topmost = options.topmost || '';
   var arrString = topmost ? topmost + delimeter : '';
   if(typeof arr[0][0] === 'undefined') {
      arrString += arr.join(',');
   }
   else {
      var outer = arr.map(function(inner) {
          var res = inner.map(function(innerpart) {
              return innerpart.join('!');
          })
          return res.join(',');
      });
      arrString += outer.join(options.delimeter);
   }
   return arrString;
}
urlparser.strArrayify = function(str, opt_options) {
   var options = opt_options || {};
   var delimeter = options.delimeter || '/';
   var topmostName = opt_options.topmostName || 'topmost';
   var arrName = opt_options.arrName || 'arr';
   var topmost = str.substring(0, str.indexOf(delimeter));
   var arrStr = str.substring(str.indexOf(delimeter) + 1);
   var arr = arrStr.split(delimeter).map(function(el) {
        return el.split('!');
   });
   var obj = {};
   obj[topmostName] = topmost;
   obj[arrName] = arr;
   return obj;
}
urlparser.strIntify = function(str, opt_options) {
    var options = opt_options || {};
    var delimiter = options.delimiter || ',';
    var arr = str.split(delimiter);
    var strToInt = arr.map(function(el) {
        return parseInt(el);
    });
    return strToInt;
}
urlparser.strBoolean = function(str) {
    if(str === "1") {
        return true;
    }
    else if(str === "0") {
        return false;
    }
    else {
        console.log("String is not 1 or 0");
        return false;
    }
}
urlparser.formatUrl = function(obj) {
    var url = Object.getOwnPropertyNames(obj).reduce(function(prev, current) {
        current = prev ? "&" + current + "=" + obj[current] : current + "=" + obj[current];
        return prev + current;
    }, "");
    return url;
}

module.exports = urlparser;

},{}],204:[function(require,module,exports){
"use strict";
var isUrl = require('./isurl');

//Checks if str is a valid url. If not append str to baseUrl
module.exports = function validateUrl(str, baseUrl) {
   var url = isUrl(str) ? str : baseUrl + str;
   return url;
}

},{"./isurl":196}],205:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var template = require("./templates/viewer.handlebars");
var Modal = require('./modal');
var utils = require('./utils');
var isUrl = require('./utils/isurl');
var elQuery = require('./utils/elquery');
var featureinfo = require('./featureinfo');
var maputils = require('./maputils');
var style = require('./style')();
var layerCreator = require('./layercreator');

var map;
var template;
var settings = {
  projection: '',
  projectionCode: '',
  projectionExtent: '',
  extent: [],
  center: [0, 0],
  zoom: 0,
  resolutions: null,
  source: {},
  group: [],
  layers: [],
  styles: {},
  controls: [],
  featureInfoOverlay: undefined,
  editLayer: null
};
var urlParams;
var pageSettings;
var pageTemplate = {};

function init(el, mapOptions) {
  render(el, mapOptions);

  // Read and set projection
  if (mapOptions.hasOwnProperty('proj4Defs') && window.proj4) {
    var proj = mapOptions['proj4Defs'];

    //Register proj4 projection definitions
    for (var i = 0; i < proj.length; i++) {
      proj4.defs(proj[i].code, proj[i].projection);
      if (proj[i].hasOwnProperty('alias')) {
        proj4.defs(proj[i].alias, proj4.defs(proj[i].code));
      }
    }
  }
  settings.params = urlParams = mapOptions.params || {};
  settings.map = mapOptions.map;
  settings.url = mapOptions.url;
  settings.target = mapOptions.target;
  settings.baseUrl = mapOptions.baseUrl;
  settings.breakPoints = mapOptions.breakPoints;
  settings.extent = mapOptions.extent || undefined;
  settings.center = urlParams.center || mapOptions.center;
  settings.zoom = urlParams.zoom || mapOptions.zoom;
  mapOptions.tileGrid = mapOptions.tileGrid || {};
  settings.tileSize = mapOptions.tileGrid.tileSize ? [mapOptions.tileGrid.tileSize,mapOptions.tileGrid.tileSize] : [256,256];
  settings.alignBottomLeft = mapOptions.tileGrid.alignBottomLeft;

  if (mapOptions.hasOwnProperty('proj4Defs') || mapOptions.projectionCode=="EPSG:3857" || mapOptions.projectionCode=="EPSG:4326") {
    // Projection to be used in map
    settings.projectionCode = mapOptions.projectionCode || undefined;
    settings.projectionExtent = mapOptions.projectionExtent;
    settings.projection = new ol.proj.Projection({
      code: settings.projectionCode,
      extent: settings.projectionExtent,
      units: getUnits(settings.projectionCode)
    });
    settings.resolutions = mapOptions.resolutions || undefined;
    settings.tileGrid = maputils.tileGrid(settings);
  }

  settings.source = mapOptions.source;
  settings.groups = mapOptions.groups;
  settings.editLayer = mapOptions.editLayer;
  settings.styles = mapOptions.styles;
  settings.clusterOptions = mapOptions.clusterOptions || {};
  style.init();
  settings.controls = mapOptions.controls;
  settings.consoleId = mapOptions.consoleId || 'o-console';
  settings.featureinfoOptions = mapOptions.featureinfoOptions || {};
  settings.enableRotation = mapOptions.enableRotation === false ? false : true;

  //If url arguments, parse this settings
  if (window.location.search) {
    parseArg();
  }

  loadMap();
  settings.layers = createLayers(mapOptions.layers, urlParams.layers);
  addLayers(settings.layers);

  elQuery(map, {
    breakPoints: mapOptions.breakPoints,
    breakPointsPrefix: mapOptions.breakPointsPrefix,
  });

  if (urlParams.pin) {
    settings.featureinfoOptions.savedPin = urlParams.pin;
  }

  //This needs further development for proper handling in permalink
  else if (urlParams.selection) {
    settings.featureinfoOptions.savedSelection = new ol.Feature({
      geometry: new ol.geom[urlParams.selection.geometryType](urlParams.selection.coordinates)
    });
  }
  featureinfo.init(settings.featureinfoOptions);
}

function addLayers(layers) {
  layers.forEach(function(layer) {
    map.addLayer(layer);
  });
}

function createLayers(layerlist, savedLayers) {
  var layers = [];
  for (var i = layerlist.length - 1; i >= 0; i--) {
    var savedLayer = {};
    if (savedLayers) {
      savedLayer = savedLayers[layerlist[i].name.split(':').pop()] || {
        visible: false,
        legend: false
      };
      savedLayer.name = layerlist[i].name;
    }
    var layer = $.extend(layerlist[i], savedLayer);
    layers.push(layerCreator(layer));
  }
  return layers;
}

function loadMap() {
  map = new ol.Map({
    target: 'o-map',
    controls: [],
    view: new ol.View({
      extent: settings.extent || undefined,
      projection: settings.projection || undefined,
      center: settings.center,
      resolutions: settings.resolutions || undefined,
      zoom: settings.zoom,
      enableRotation: settings.enableRotation
    })
  });
}

function parseArg() {
  var str = window.location.search.substring(1);
  var elements = str.split("&");

  for (var i = 0; i < elements.length; i++) {

    //center coordinates
    if (i == 0) {
      var z = elements[i].split(",");
      settings.center[0] = parseInt(z[0]);
      settings.center[1] = parseInt(z[1]);
    } else if (i == 1) {
      settings.zoom = parseInt(elements[i]);
    } else if (i == 2) {
      var l = elements[i].split(";");
      var layers = settings.layers;
      var la, match;
      for (var j = 0; j < layers.length; j++) {
        match = 0;
        $.each(l, function(index, el) {
          la = el.split(",");
          if (layers[j].get('group')) {
            if ((layers[j].get('group') == 'background') && (la[0] == layers[j].get('name'))) {
              layers[j].setVisible(true);
              match = 1;
            } else if ((layers[j].get('group') == 'background') && (match == 0)) {
              layers[j].setVisible(false);
            } else if (la[0] == layers[j].get('name')) {
              if (la[1] == 1) {
                layers[j].set('legend', true);
                layers[j].setVisible(false);
              } else {
                layers[j].set('legend', true);
                layers[j].setVisible(true);
              }
            }
          }
        })
      }
    }
  }

}

function getSettings() {
  return settings;
}

function getExtent() {
  return settings.extent;
}

function getBaseUrl() {
  return settings.baseUrl;
}

function getBreakPoints(size) {
  return size && settings.breakPoints.hasOwnProperty(size) ? settings.breakPoints[size] : settings.breakPoints;
}

function getMapName() {
  return settings.map;
}

function getTileGrid() {
  return settings.tileGrid;
}

function getTileSize() {
  return settings.tileSize;
}

function getUrl() {
  return settings.url;
}

function getStyleSettings() {
  return settings.styles;
}

function getResolutions() {
  return settings.resolutions;
}

function getMapUrl() {
  var layerNames = '';
  var url;

  //delete search arguments if present
  if (window.location.search) {
    url = window.location.href.replace(window.location.search, '?');
  } else {
    url = window.location.href + '?';
  }
  var mapView = map.getView();
  var center = mapView.getCenter();
  for (var i = 0; i < 2; i++) {
    center[i] = parseInt(center[i]); //coordinates in integers
  }
  var zoom = mapView.getZoom();
  var layers = map.getLayers();

  //add layer if visible
  layers.forEach(function(el) {
    if (el.getVisible() == true) {
      layerNames += el.get('name') + ';';
    } else if (el.get('legend') == true) {
      layerNames += el.get('name') + ',1;';
    }
  })
  return url + center + '&' + zoom + '&' + layerNames.slice(0, layerNames.lastIndexOf(";"));
}

function getMap() {
  return map;
}

function getLayers() {
  return settings.layers;
}

function getLayersByProperty(key, val, byName) {
  var layers = map.getLayers().getArray().filter(function(layer) {
    if (layer.get(key)) {
      if (layer.get(key) === val) {
        return layer;
      }
    }
  });

  if (byName) {
    return layers.map(function(layer) {
      return layer.get('name');
    });
  } else {
    return layers;
  }
}

function getLayer(layername) {
  var layer = $.grep(settings.layers, function(obj) {
    return (obj.get('name') == layername);
  });
  return layer[0];
}

function getQueryableLayers() {
  var queryableLayers = settings.layers.filter(function(layer) {
    if (layer.get('queryable') && layer.getVisible()) {
      return layer;
    }
  });
  return queryableLayers;
}

function getGroup(group) {
  var group = $.grep(settings.layers, function(obj) {
    return (obj.get('group') == group);
  });
  return group;
}

function getGroups(opt) {
  if(opt == 'top') {
    return settings.groups;
  } else if (opt == 'sub') {
    return getSubgroups();
  } else {
    return settings.groups.concat(getSubgroups());
  }
}

function getSubgroups() {
  var subgroups = [];

  function findSubgroups(groups, n) {
    if (n >= groups.length) {
      return;
    }

    if (groups[n].groups) {
      groups[n].groups.forEach(function(subgroup) {
        subgroups.push(subgroup);
      });

      findSubgroups(groups[n].groups, 0);
    }

    findSubgroups(groups, n+1);
  }

  findSubgroups(settings.groups, 0);
  return subgroups;
}

function getProjectionCode() {
  return settings.projectionCode;
}

function getProjection() {
  return settings.projection;
}

function getMapSource() {
  return settings.source;
}

function getControlNames() {
  var controlNames = settings.controls.map(function(obj) {
    return obj.name;
  });
  return controlNames;
}

function getTarget() {
  return settings.target;
}

function getClusterOptions(){
  return settings.clusterOptions;
}

function checkScale(scale, maxScale, minScale) {
  if (maxScale || minScale) {

    // Alter 1: maxscale and minscale
    if (maxScale && minScale) {
      if ((scale > maxScale) && (scale < minScale)) {
        return true;
      }
    }

    // Alter 2: only maxscale
    else if (maxScale) {
      if (scale > maxScale) {
        return true;
      }
    }

    // Alter 3: only minscale
    else if (minScale) {
      if (scale < minScale) {
        return true;
      }
    }
  }

  // Alter 4: no scale limit
  else {
    return true;
  }
}

function getConsoleId() {
  return settings.consoleId;
}

function getScale(resolution) {
  var dpi = 25.4 / 0.28;
  var mpu = settings.projection.getMetersPerUnit();
  var scale = resolution * mpu * 39.37 * dpi;
  scale = Math.round(scale);
  return scale;
}

function getUnits(proj) {
  var units;
  switch(proj) {
    case 'EPSG:3857':
      units = 'm';
      break;
    case 'EPSG:4326':
      units = 'degrees';
      break;
    default:
      units = proj4.defs(proj) ? proj4.defs(proj).units : undefined;
  }
  return units;
}

function autoPan() {
  /*Workaround to remove when autopan implemented for overlays */
  var el = $('.o-popup');
  var center = map.getView().getCenter();
  var popupOffset = $(el).offset();
  var mapOffset = $('#' + map.getTarget()).offset();
  var offsetY = popupOffset.top - mapOffset.top;
  var mapSize = map.getSize();
  var offsetX = (mapOffset.left + mapSize[0]) - (popupOffset.left + $(el).outerWidth(true));

  // Check if mapmenu widget is used and opened
  var menuSize = 0;
  if (settings.controls.hasOwnProperty('mapmenu')) {
    menuSize = settings.controls.mapmenu.getTarget().offset().left > 0 ? mapSize[0] - settings.controls.mapmenu.getTarget().offset().left : menuSize = 0;
  }
  if (offsetY < 0 || offsetX < 0 + menuSize || offsetX > (mapSize[0] - $(el).outerWidth(true))) {
    var dx = 0,
      dy = 0;
    if (offsetX < 0 + menuSize) {
      dx = (-offsetX + menuSize) * map.getView().getResolution();
    }
    if (offsetX > (mapSize[0] - $(el).outerWidth(true))) {
      dx = -($(el).outerWidth(true) - (mapSize[0] - offsetX)) * map.getView().getResolution();
    }
    if (offsetY < 0) {
      dy = (-offsetY) * map.getView().getResolution();
    }
    map.getView().animate({
      center: ([center[0] + dx, center[1] + dy]),
	  duration:300
    });
  }
  /*End workaround*/
}

function removeOverlays(overlays) {
  if (overlays) {
    if (overlays.constructor === Array || overlays instanceof ol.Collection) {
      overlays.forEach(function(overlay) {
        map.removeOverlay(overlay);
      })
    } else {
      map.removeOverlay(overlays);
    }
  } else {
    map.getOverlays().clear();
  }
}

function render(el, mapOptions) {
  pageSettings = mapOptions.pageSettings;
  pageTemplate.mapClass = "o-map";

  if (pageSettings) {
    if (pageSettings.footer) {
      if (pageSettings.footer.hasOwnProperty('img')) {
        pageTemplate.img = pageSettings.footer.img;
      }
      if (pageSettings.footer.hasOwnProperty('text')) {
        pageTemplate.text = pageSettings.footer.text;
      }
      if (pageSettings.footer.hasOwnProperty('url')) {
        pageTemplate.url = pageSettings.footer.url;
      }
      if (pageSettings.footer.hasOwnProperty('urlText')) {
        pageTemplate.urlText = pageSettings.footer.urlText;
      }
    }
    if (pageSettings.mapGrid) {
      if (pageSettings.mapGrid.hasOwnProperty('visible') && pageSettings.mapGrid.visible === true) {
        pageTemplate.mapClass = "o-map o-map-grid";
      }
    }
  }

  $(el).html(template(pageTemplate));
}

module.exports.init = init;
module.exports.createLayers = createLayers;
module.exports.getBaseUrl = getBaseUrl;
module.exports.getBreakPoints = getBreakPoints;
module.exports.getExtent = getExtent;
module.exports.getSettings = getSettings;
module.exports.getStyleSettings = getStyleSettings;
module.exports.getMapUrl = getMapUrl;
module.exports.getMap = getMap;
module.exports.getLayers = getLayers;
module.exports.getLayersByProperty = getLayersByProperty;
module.exports.getLayer = getLayer;
module.exports.getControlNames = getControlNames;
module.exports.getQueryableLayers = getQueryableLayers;
module.exports.getGroup = getGroup;
module.exports.getGroups = getGroups;
module.exports.getProjectionCode = getProjectionCode;
module.exports.getProjection = getProjection;
module.exports.getMapSource = getMapSource;
module.exports.getResolutions = getResolutions;
module.exports.getScale = getScale;
module.exports.getTarget = getTarget;
module.exports.getClusterOptions = getClusterOptions;
module.exports.getTileGrid = getTileGrid;
module.exports.getTileSize = getTileSize;
module.exports.autoPan = autoPan;
module.exports.removeOverlays = removeOverlays;
module.exports.checkScale= checkScale;
module.exports.getMapName = getMapName;
module.exports.getConsoleId = getConsoleId;
module.exports.getUrl = getUrl;

},{"./featureinfo":118,"./layercreator":144,"./maputils":149,"./modal":151,"./style":177,"./templates/viewer.handlebars":188,"./utils":189,"./utils/elquery":190,"./utils/isurl":196,"jquery":26,"openlayers":29}],206:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var zoomControl;
  var target = options.target || 'o-toolbar-navigation';
  map = Viewer.getMap();

  zoomControl = new ol.control.Zoom({
    zoomInTipLabel: ' ',
    zoomOutTipLabel: ' ',
    zoomInLabel: $.parseHTML('<svg class="o-icon-fa-plus"><use xlink:href="#fa-plus"></use></svg>')[0],
    zoomOutLabel: $.parseHTML('<svg class="o-icon-fa-minus"><use xlink:href="#fa-minus"></use></svg>')[0],
    target: target
  });
  map.addControl(zoomControl);
}

module.exports.init = Init;

},{"./viewer":205,"jquery":26,"openlayers":29}]},{},[98])(98)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb25mL29yaWdvQ29uZmlnLmpzIiwiY29uZi9vcmlnb0NvbnRyb2xzLmpzIiwiZXh0ZXJucy9vd2wuY2Fyb3VzZWwubWluLmpzIiwiZXh0ZXJucy9vd2xjYXJvdXNlbC1icm93c2VyaWZ5LmpzIiwibm9kZV9tb2R1bGVzL2F3ZXNvbXBsZXRlL2F3ZXNvbXBsZXRlLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnMucnVudGltZS5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxiYXNlLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGRlY29yYXRvcnMuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcZGVjb3JhdG9yc1xcaW5saW5lLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGV4Y2VwdGlvbi5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxoZWxwZXJzLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGhlbHBlcnNcXGJsb2NrLWhlbHBlci1taXNzaW5nLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGhlbHBlcnNcXGVhY2guanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcaGVscGVyc1xcaGVscGVyLW1pc3NpbmcuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcaGVscGVyc1xcaWYuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcaGVscGVyc1xcbG9nLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGhlbHBlcnNcXGxvb2t1cC5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxoZWxwZXJzXFx3aXRoLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGxvZ2dlci5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcZGlzdFxcY2pzXFxoYW5kbGViYXJzXFxub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcbm8tY29uZmxpY3QuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xccnVudGltZS5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxzYWZlLXN0cmluZy5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFx1dGlscy5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL3J1bnRpbWUuanMiLCJub2RlX21vZHVsZXMvaGJzZnkvcnVudGltZS5qcyIsIm5vZGVfbW9kdWxlcy9qcXVlcnkvZGlzdC9qcXVlcnkuanMiLCJub2RlX21vZHVsZXMvbG9jYWxmb3JhZ2UvZGlzdC9sb2NhbGZvcmFnZS5qcyIsIm5vZGVfbW9kdWxlcy9tZ3JzL21ncnMuanMiLCJub2RlX21vZHVsZXMvb3BlbmxheWVycy9kaXN0L29sLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9Qb2ludC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvUHJvai5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvYWRqdXN0X2F4aXMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9hZGp1c3RfbGF0LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vYWRqdXN0X2xvbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL2FzaW56LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vZTBmbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL2UxZm4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9lMmZuLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vZTNmbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL2dOLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vaW1sZm4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9pcXNmbnouanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9tbGZuLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vbXNmbnouanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9waGkyei5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3BqX2VuZm4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9wal9pbnZfbWxmbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3BqX21sZm4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9xc2Zuei5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3NpZ24uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9zcmF0LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vdG9Qb2ludC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3RzZm56LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb25zdGFudHMvRGF0dW0uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbnN0YW50cy9FbGxpcHNvaWQuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbnN0YW50cy9QcmltZU1lcmlkaWFuLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb25zdGFudHMvdW5pdHMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvcmUuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2RhdHVtLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9kYXR1bV90cmFuc2Zvcm0uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2RlZnMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2Rlcml2ZUNvbnN0YW50cy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvZXh0ZW5kLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9nbG9iYWwuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2luY2x1ZGVkUHJvamVjdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wYXJzZUNvZGUuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2pTdHJpbmcuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9hZWEuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2FlcWQuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2Nhc3MuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2NlYS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvZXFjLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9lcWRjLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9nYXVzcy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvZ25vbS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMva3JvdmFrLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9sYWVhLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9sY2MuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2xvbmdsYXQuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL21lcmMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL21pbGwuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL21vbGwuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL256bWcuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL29tZXJjLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9wb2x5LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9zaW51LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9zb21lcmMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3N0ZXJlLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9zdGVyZWEuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3RtZXJjLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy91dG0uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3ZhbmRnLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi90cmFuc2Zvcm0uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3drdC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9wYWNrYWdlLmpzb24iLCJvcmlnby5qcyIsInNyYy9hYm91dC5qcyIsInNyYy9hdHRyaWJ1dGlvbi5qcyIsInNyYy9jb21wb25lbnRzL3NwaW5uZXIuaGFuZGxlYmFycyIsInNyYy9jb250cm9saW5pdGlhbGlzZXIuanMiLCJzcmMvZHJvcGRvd24uanMiLCJzcmMvZWRpdG9yLmpzIiwic3JjL2VkaXRvci9hZ3N0cmFuc2FjdGlvbi5qcyIsInNyYy9lZGl0b3IvZHJhd3Rvb2xzLmpzIiwic3JjL2VkaXRvci9lZGl0RGlzcGF0Y2hlci5qcyIsInNyYy9lZGl0b3IvZWRpdGZvcm0uanMiLCJzcmMvZWRpdG9yL2VkaXRoYW5kbGVyLmpzIiwic3JjL2VkaXRvci9lZGl0b3JsYXllcnMuanMiLCJzcmMvZWRpdG9yL2VkaXRvcnRvb2xiYXIuanMiLCJzcmMvZWRpdG9yL2VkaXRzc3RvcmUuanMiLCJzcmMvZWRpdG9yL2luZGV4ZWRkYi5qcyIsInNyYy9lZGl0b3Ivc2hhcGVzLmpzIiwic3JjL2VkaXRvci90cmFuc2FjdGlvbmhhbmRsZXIuanMiLCJzcmMvZWRpdG9yL3dmc3RyYW5zYWN0aW9uLmpzIiwic3JjL2ZlYXR1cmVpbmZvLmpzIiwic3JjL2ZlYXR1cmVpbmZvdGVtcGxhdGVzLmpzIiwic3JjL2ZlYXR1cmVsYXllci5qcyIsInNyYy9mdWxsc2NyZWVuLmpzIiwic3JjL2dlb20uanMiLCJzcmMvZ2VvbWV0cnkvZ2V0YXJlYS5qcyIsInNyYy9nZW9tZXRyeS9nZXRjZW50ZXIuanMiLCJzcmMvZ2VvcG9zaXRpb24uanMiLCJzcmMvZ2V0YXR0cmlidXRlcy5qcyIsInNyYy9nZXRmZWF0dXJlLmpzIiwic3JjL2dldGZlYXR1cmVpbmZvLmpzIiwic3JjL2hvbWUuanMiLCJzcmMvbGF5ZXIvYWdzZmVhdHVyZS5qcyIsInNyYy9sYXllci9hZ3N0aWxlLmpzIiwic3JjL2xheWVyL2ZlYXR1cmVsYXllci5qcyIsInNyYy9sYXllci9nZW9qc29uLmpzIiwic3JjL2xheWVyL2dyb3VwLmpzIiwic3JjL2xheWVyL29zbS5qcyIsInNyYy9sYXllci90aWxlLmpzIiwic3JjL2xheWVyL3RvcG9qc29uLmpzIiwic3JjL2xheWVyL3ZlY3Rvci5qcyIsInNyYy9sYXllci92ZWN0b3J0aWxlLmpzIiwic3JjL2xheWVyL3dmcy5qcyIsInNyYy9sYXllci93bXMuanMiLCJzcmMvbGF5ZXIvd210cy5qcyIsInNyYy9sYXllci94eXouanMiLCJzcmMvbGF5ZXJjcmVhdG9yLmpzIiwic3JjL2xlZ2VuZC5qcyIsInNyYy9saW5rLmpzIiwic3JjL21hcGxvYWRlci5qcyIsInNyYy9tYXBtZW51LmpzIiwic3JjL21hcHV0aWxzLmpzIiwic3JjL21lYXN1cmUuanMiLCJzcmMvbW9kYWwuanMiLCJzcmMvb2ZmbGluZS5qcyIsInNyYy9vZmZsaW5lL2Rvd25sb2FkZXIuanMiLCJzcmMvb2ZmbGluZS9kb3dubG9hZGVyLnRlbXBsYXRlLmhhbmRsZWJhcnMiLCJzcmMvb2ZmbGluZS9kb3dubG9hZGhhbmRsZXIuanMiLCJzcmMvb2ZmbGluZS9kb3dubG9hZHNvdXJjZXMuanMiLCJzcmMvb2ZmbGluZS9nZW9qc29uLmpzIiwic3JjL29mZmxpbmUvb2ZmbGluZWRpc3BhdGNoZXIuanMiLCJzcmMvb2ZmbGluZS9vZmZsaW5lbGF5ZXIuanMiLCJzcmMvb2ZmbGluZS9vZmZsaW5lc3RvcmUuanMiLCJzcmMvb2ZmbGluZS90b3BvanNvbi5qcyIsInNyYy9vZmZsaW5lL3ZlcmlmeWZlYXR1cmVpZHMuanMiLCJzcmMvb2ZmbGluZS93ZnMuanMiLCJzcmMvcGVybWFsaW5rL3Blcm1hbGluay5qcyIsInNyYy9wZXJtYWxpbmsvcGVybWFsaW5rcGFyc2VyLmpzIiwic3JjL3Blcm1hbGluay9wZXJtYWxpbmtzdG9yZS5qcyIsInNyYy9wb3B1cC5qcyIsInNyYy9wb3NpdGlvbi5qcyIsInNyYy9wcmludC5qcyIsInNyYy9yb3RhdGUuanMiLCJzcmMvc2NhbGUuanMiLCJzcmMvc2NhbGVsaW5lLmpzIiwic3JjL3NlYXJjaC5qcyIsInNyYy9zaGFyZW1hcC5qcyIsInNyYy9zaWRlYmFyLmpzIiwic3JjL3NwbGFzaC5qcyIsInNyYy9zdHlsZS5qcyIsInNyYy9zdHlsZS9nZXRjb2xvci5qcyIsInNyYy9zdHlsZS9tZWFzdXJlLmpzIiwic3JjL3N0eWxlL3Bpbi5qcyIsInNyYy9zdHlsZS9zdHlsZWZ1bmN0aW9ucy5qcyIsInNyYy9zdHlsZS9zdHlsZWZ1bmN0aW9ucy9kZWZhdWx0LmpzIiwic3JjL3N0eWxlL3N0eWxldHlwZXMuanMiLCJzcmMvdGVtcGxhdGVzL2VkaXRvcnRvb2xiYXIudGVtcGxhdGUuaGFuZGxlYmFycyIsInNyYy90ZW1wbGF0ZXMvZmVhdHVyZWluZm90ZW1wbGF0ZXMvZGVmYXVsdC5oYW5kbGViYXJzIiwic3JjL3RlbXBsYXRlcy9mZWF0dXJlaW5mb3RlbXBsYXRlcy9kZWZhdWx0LmpzIiwic3JjL3RlbXBsYXRlcy9wcmludC5oYW5kbGViYXJzIiwic3JjL3RlbXBsYXRlcy92aWV3ZXIuaGFuZGxlYmFycyIsInNyYy91dGlscy5qcyIsInNyYy91dGlscy9lbHF1ZXJ5LmpzIiwic3JjL3V0aWxzL2dlbmVyYXRldXVpZC5qcyIsInNyYy91dGlscy9nZXRpbWFnZW9yaWVudGF0aW9uLmpzIiwic3JjL3V0aWxzL2dldHVybC5qcyIsInNyYy91dGlscy9pbWFnZXJlc2l6ZXIuanMiLCJzcmMvdXRpbHMvaXNlbWJlZGRlZC5qcyIsInNyYy91dGlscy9pc3VybC5qcyIsInNyYy91dGlscy9udW1iZXJmb3JtYXR0ZXIuanMiLCJzcmMvdXRpbHMvcmVuZGVyZXJyb3IuanMiLCJzcmMvdXRpbHMvcmVwbGFjZXIuanMiLCJzcmMvdXRpbHMvcm91bmQuanMiLCJzcmMvdXRpbHMvc3VwcG9ydHMuanMiLCJzcmMvdXRpbHMvdHJpbXVybC5qcyIsInNyYy91dGlscy91cmxwYXJzZXIuanMiLCJzcmMvdXRpbHMvdmFsaWRhdGV1cmwuanMiLCJzcmMvdmlld2VyLmpzIiwic3JjL3pvb20uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs4QkNqZnNCLG1CQUFtQjs7SUFBN0IsSUFBSTs7Ozs7b0NBSU8sMEJBQTBCOzs7O21DQUMzQix3QkFBd0I7Ozs7K0JBQ3ZCLG9CQUFvQjs7SUFBL0IsS0FBSzs7aUNBQ1Esc0JBQXNCOztJQUFuQyxPQUFPOztvQ0FFSSwwQkFBMEI7Ozs7O0FBR2pELFNBQVMsTUFBTSxHQUFHO0FBQ2hCLE1BQUksRUFBRSxHQUFHLElBQUksSUFBSSxDQUFDLHFCQUFxQixFQUFFLENBQUM7O0FBRTFDLE9BQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLElBQUUsQ0FBQyxVQUFVLG9DQUFhLENBQUM7QUFDM0IsSUFBRSxDQUFDLFNBQVMsbUNBQVksQ0FBQztBQUN6QixJQUFFLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNqQixJQUFFLENBQUMsZ0JBQWdCLEdBQUcsS0FBSyxDQUFDLGdCQUFnQixDQUFDOztBQUU3QyxJQUFFLENBQUMsRUFBRSxHQUFHLE9BQU8sQ0FBQztBQUNoQixJQUFFLENBQUMsUUFBUSxHQUFHLFVBQVMsSUFBSSxFQUFFO0FBQzNCLFdBQU8sT0FBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7R0FDbkMsQ0FBQzs7QUFFRixTQUFPLEVBQUUsQ0FBQztDQUNYOztBQUVELElBQUksSUFBSSxHQUFHLE1BQU0sRUFBRSxDQUFDO0FBQ3BCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDOztBQUVyQixrQ0FBVyxJQUFJLENBQUMsQ0FBQzs7QUFFakIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLElBQUksQ0FBQzs7cUJBRVIsSUFBSTs7Ozs7Ozs7Ozs7OztxQkNwQ3lCLFNBQVM7O3lCQUMvQixhQUFhOzs7O3VCQUNFLFdBQVc7OzBCQUNSLGNBQWM7O3NCQUNuQyxVQUFVOzs7O0FBRXRCLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQzs7QUFDeEIsSUFBTSxpQkFBaUIsR0FBRyxDQUFDLENBQUM7OztBQUU1QixJQUFNLGdCQUFnQixHQUFHO0FBQzlCLEdBQUMsRUFBRSxhQUFhO0FBQ2hCLEdBQUMsRUFBRSxlQUFlO0FBQ2xCLEdBQUMsRUFBRSxlQUFlO0FBQ2xCLEdBQUMsRUFBRSxVQUFVO0FBQ2IsR0FBQyxFQUFFLGtCQUFrQjtBQUNyQixHQUFDLEVBQUUsaUJBQWlCO0FBQ3BCLEdBQUMsRUFBRSxVQUFVO0NBQ2QsQ0FBQzs7O0FBRUYsSUFBTSxVQUFVLEdBQUcsaUJBQWlCLENBQUM7O0FBRTlCLFNBQVMscUJBQXFCLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxVQUFVLEVBQUU7QUFDbkUsTUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLElBQUksRUFBRSxDQUFDO0FBQzdCLE1BQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxJQUFJLEVBQUUsQ0FBQztBQUMvQixNQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsSUFBSSxFQUFFLENBQUM7O0FBRW5DLGtDQUF1QixJQUFJLENBQUMsQ0FBQztBQUM3Qix3Q0FBMEIsSUFBSSxDQUFDLENBQUM7Q0FDakM7O0FBRUQscUJBQXFCLENBQUMsU0FBUyxHQUFHO0FBQ2hDLGFBQVcsRUFBRSxxQkFBcUI7O0FBRWxDLFFBQU0scUJBQVE7QUFDZCxLQUFHLEVBQUUsb0JBQU8sR0FBRzs7QUFFZixnQkFBYyxFQUFFLHdCQUFTLElBQUksRUFBRSxFQUFFLEVBQUU7QUFDakMsUUFBSSxnQkFBUyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssVUFBVSxFQUFFO0FBQ3RDLFVBQUksRUFBRSxFQUFFO0FBQUUsY0FBTSwyQkFBYyx5Q0FBeUMsQ0FBQyxDQUFDO09BQUU7QUFDM0Usb0JBQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztLQUM1QixNQUFNO0FBQ0wsVUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7S0FDekI7R0FDRjtBQUNELGtCQUFnQixFQUFFLDBCQUFTLElBQUksRUFBRTtBQUMvQixXQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDM0I7O0FBRUQsaUJBQWUsRUFBRSx5QkFBUyxJQUFJLEVBQUUsT0FBTyxFQUFFO0FBQ3ZDLFFBQUksZ0JBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLFVBQVUsRUFBRTtBQUN0QyxvQkFBTyxJQUFJLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzdCLE1BQU07QUFDTCxVQUFJLE9BQU8sT0FBTyxLQUFLLFdBQVcsRUFBRTtBQUNsQyxjQUFNLHlFQUEwRCxJQUFJLG9CQUFpQixDQUFDO09BQ3ZGO0FBQ0QsVUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUM7S0FDL0I7R0FDRjtBQUNELG1CQUFpQixFQUFFLDJCQUFTLElBQUksRUFBRTtBQUNoQyxXQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7R0FDNUI7O0FBRUQsbUJBQWlCLEVBQUUsMkJBQVMsSUFBSSxFQUFFLEVBQUUsRUFBRTtBQUNwQyxRQUFJLGdCQUFTLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxVQUFVLEVBQUU7QUFDdEMsVUFBSSxFQUFFLEVBQUU7QUFBRSxjQUFNLDJCQUFjLDRDQUE0QyxDQUFDLENBQUM7T0FBRTtBQUM5RSxvQkFBTyxJQUFJLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQy9CLE1BQU07QUFDTCxVQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztLQUM1QjtHQUNGO0FBQ0QscUJBQW1CLEVBQUUsNkJBQVMsSUFBSSxFQUFFO0FBQ2xDLFdBQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUM5QjtDQUNGLENBQUM7O0FBRUssSUFBSSxHQUFHLEdBQUcsb0JBQU8sR0FBRyxDQUFDOzs7UUFFcEIsV0FBVztRQUFFLE1BQU07Ozs7Ozs7Ozs7OztnQ0M3RUEscUJBQXFCOzs7O0FBRXpDLFNBQVMseUJBQXlCLENBQUMsUUFBUSxFQUFFO0FBQ2xELGdDQUFlLFFBQVEsQ0FBQyxDQUFDO0NBQzFCOzs7Ozs7OztxQkNKb0IsVUFBVTs7cUJBRWhCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsVUFBUyxFQUFFLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxPQUFPLEVBQUU7QUFDM0UsUUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDO0FBQ2IsUUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7QUFDbkIsV0FBSyxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7QUFDcEIsU0FBRyxHQUFHLFVBQVMsT0FBTyxFQUFFLE9BQU8sRUFBRTs7QUFFL0IsWUFBSSxRQUFRLEdBQUcsU0FBUyxDQUFDLFFBQVEsQ0FBQztBQUNsQyxpQkFBUyxDQUFDLFFBQVEsR0FBRyxjQUFPLEVBQUUsRUFBRSxRQUFRLEVBQUUsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzFELFlBQUksR0FBRyxHQUFHLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDL0IsaUJBQVMsQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0FBQzlCLGVBQU8sR0FBRyxDQUFDO09BQ1osQ0FBQztLQUNIOztBQUVELFNBQUssQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUM7O0FBRTdDLFdBQU8sR0FBRyxDQUFDO0dBQ1osQ0FBQyxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7QUNwQkQsSUFBTSxVQUFVLEdBQUcsQ0FBQyxhQUFhLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQzs7QUFFbkcsU0FBUyxTQUFTLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNoQyxNQUFJLEdBQUcsR0FBRyxJQUFJLElBQUksSUFBSSxDQUFDLEdBQUc7TUFDdEIsSUFBSSxZQUFBO01BQ0osTUFBTSxZQUFBLENBQUM7QUFDWCxNQUFJLEdBQUcsRUFBRTtBQUNQLFFBQUksR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQztBQUN0QixVQUFNLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7O0FBRTFCLFdBQU8sSUFBSSxLQUFLLEdBQUcsSUFBSSxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUM7R0FDeEM7O0FBRUQsTUFBSSxHQUFHLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQzs7O0FBRzFELE9BQUssSUFBSSxHQUFHLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxVQUFVLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxFQUFFO0FBQ2hELFFBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7R0FDOUM7OztBQUdELE1BQUksS0FBSyxDQUFDLGlCQUFpQixFQUFFO0FBQzNCLFNBQUssQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUM7R0FDMUM7O0FBRUQsTUFBSSxHQUFHLEVBQUU7QUFDUCxRQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUN2QixRQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztHQUN0QjtDQUNGOztBQUVELFNBQVMsQ0FBQyxTQUFTLEdBQUcsSUFBSSxLQUFLLEVBQUUsQ0FBQzs7cUJBRW5CLFNBQVM7Ozs7Ozs7Ozs7Ozs7eUNDbENlLGdDQUFnQzs7OzsyQkFDOUMsZ0JBQWdCOzs7O29DQUNQLDBCQUEwQjs7Ozt5QkFDckMsY0FBYzs7OzswQkFDYixlQUFlOzs7OzZCQUNaLGtCQUFrQjs7OzsyQkFDcEIsZ0JBQWdCOzs7O0FBRWxDLFNBQVMsc0JBQXNCLENBQUMsUUFBUSxFQUFFO0FBQy9DLHlDQUEyQixRQUFRLENBQUMsQ0FBQztBQUNyQywyQkFBYSxRQUFRLENBQUMsQ0FBQztBQUN2QixvQ0FBc0IsUUFBUSxDQUFDLENBQUM7QUFDaEMseUJBQVcsUUFBUSxDQUFDLENBQUM7QUFDckIsMEJBQVksUUFBUSxDQUFDLENBQUM7QUFDdEIsNkJBQWUsUUFBUSxDQUFDLENBQUM7QUFDekIsMkJBQWEsUUFBUSxDQUFDLENBQUM7Q0FDeEI7Ozs7Ozs7O3FCQ2hCcUQsVUFBVTs7cUJBRWpELFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsb0JBQW9CLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3ZFLFFBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPO1FBQ3pCLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUVwQixRQUFJLE9BQU8sS0FBSyxJQUFJLEVBQUU7QUFDcEIsYUFBTyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDakIsTUFBTSxJQUFJLE9BQU8sS0FBSyxLQUFLLElBQUksT0FBTyxJQUFJLElBQUksRUFBRTtBQUMvQyxhQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUN0QixNQUFNLElBQUksZUFBUSxPQUFPLENBQUMsRUFBRTtBQUMzQixVQUFJLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFO0FBQ3RCLFlBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNmLGlCQUFPLENBQUMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQzlCOztBQUVELGVBQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO09BQ2hELE1BQU07QUFDTCxlQUFPLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUN0QjtLQUNGLE1BQU07QUFDTCxVQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUMvQixZQUFJLElBQUksR0FBRyxtQkFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDckMsWUFBSSxDQUFDLFdBQVcsR0FBRyx5QkFBa0IsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzdFLGVBQU8sR0FBRyxFQUFDLElBQUksRUFBRSxJQUFJLEVBQUMsQ0FBQztPQUN4Qjs7QUFFRCxhQUFPLEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7S0FDN0I7R0FDRixDQUFDLENBQUM7Q0FDSjs7Ozs7Ozs7Ozs7OztxQkMvQjhFLFVBQVU7O3lCQUNuRSxjQUFjOzs7O3FCQUVyQixVQUFTLFFBQVEsRUFBRTtBQUNoQyxVQUFRLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxVQUFTLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDekQsUUFBSSxDQUFDLE9BQU8sRUFBRTtBQUNaLFlBQU0sMkJBQWMsNkJBQTZCLENBQUMsQ0FBQztLQUNwRDs7QUFFRCxRQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRTtRQUNmLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTztRQUN6QixDQUFDLEdBQUcsQ0FBQztRQUNMLEdBQUcsR0FBRyxFQUFFO1FBQ1IsSUFBSSxZQUFBO1FBQ0osV0FBVyxZQUFBLENBQUM7O0FBRWhCLFFBQUksT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFO0FBQy9CLGlCQUFXLEdBQUcseUJBQWtCLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDakY7O0FBRUQsUUFBSSxrQkFBVyxPQUFPLENBQUMsRUFBRTtBQUFFLGFBQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQUU7O0FBRTFELFFBQUksT0FBTyxDQUFDLElBQUksRUFBRTtBQUNoQixVQUFJLEdBQUcsbUJBQVksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ2xDOztBQUVELGFBQVMsYUFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFO0FBQ3pDLFVBQUksSUFBSSxFQUFFO0FBQ1IsWUFBSSxDQUFDLEdBQUcsR0FBRyxLQUFLLENBQUM7QUFDakIsWUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7QUFDbkIsWUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLEtBQUssQ0FBQyxDQUFDO0FBQ3pCLFlBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQzs7QUFFbkIsWUFBSSxXQUFXLEVBQUU7QUFDZixjQUFJLENBQUMsV0FBVyxHQUFHLFdBQVcsR0FBRyxLQUFLLENBQUM7U0FDeEM7T0FDRjs7QUFFRCxTQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDN0IsWUFBSSxFQUFFLElBQUk7QUFDVixtQkFBVyxFQUFFLG1CQUFZLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsV0FBVyxHQUFHLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQztPQUMvRSxDQUFDLENBQUM7S0FDSjs7QUFFRCxRQUFJLE9BQU8sSUFBSSxPQUFPLE9BQU8sS0FBSyxRQUFRLEVBQUU7QUFDMUMsVUFBSSxlQUFRLE9BQU8sQ0FBQyxFQUFFO0FBQ3BCLGFBQUssSUFBSSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3ZDLGNBQUksQ0FBQyxJQUFJLE9BQU8sRUFBRTtBQUNoQix5QkFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxLQUFLLE9BQU8sQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7V0FDL0M7U0FDRjtPQUNGLE1BQU07QUFDTCxZQUFJLFFBQVEsWUFBQSxDQUFDOztBQUViLGFBQUssSUFBSSxHQUFHLElBQUksT0FBTyxFQUFFO0FBQ3ZCLGNBQUksT0FBTyxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsRUFBRTs7OztBQUkvQixnQkFBSSxRQUFRLEtBQUssU0FBUyxFQUFFO0FBQzFCLDJCQUFhLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzthQUNoQztBQUNELG9CQUFRLEdBQUcsR0FBRyxDQUFDO0FBQ2YsYUFBQyxFQUFFLENBQUM7V0FDTDtTQUNGO0FBQ0QsWUFBSSxRQUFRLEtBQUssU0FBUyxFQUFFO0FBQzFCLHVCQUFhLENBQUMsUUFBUSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUM7U0FDdEM7T0FDRjtLQUNGOztBQUVELFFBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUNYLFNBQUcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDckI7O0FBRUQsV0FBTyxHQUFHLENBQUM7R0FDWixDQUFDLENBQUM7Q0FDSjs7Ozs7Ozs7Ozs7Ozt5QkM5RXFCLGNBQWM7Ozs7cUJBRXJCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsZUFBZSxFQUFFLGlDQUFnQztBQUN2RSxRQUFJLFNBQVMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFOztBQUUxQixhQUFPLFNBQVMsQ0FBQztLQUNsQixNQUFNOztBQUVMLFlBQU0sMkJBQWMsbUJBQW1CLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQyxDQUFDO0tBQ3ZGO0dBQ0YsQ0FBQyxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7cUJDWmlDLFVBQVU7O3FCQUU3QixVQUFTLFFBQVEsRUFBRTtBQUNoQyxVQUFRLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxVQUFTLFdBQVcsRUFBRSxPQUFPLEVBQUU7QUFDM0QsUUFBSSxrQkFBVyxXQUFXLENBQUMsRUFBRTtBQUFFLGlCQUFXLEdBQUcsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUFFOzs7OztBQUt0RSxRQUFJLEFBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsSUFBSSxDQUFDLFdBQVcsSUFBSyxlQUFRLFdBQVcsQ0FBQyxFQUFFO0FBQ3ZFLGFBQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUM5QixNQUFNO0FBQ0wsYUFBTyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3pCO0dBQ0YsQ0FBQyxDQUFDOztBQUVILFVBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFLFVBQVMsV0FBVyxFQUFFLE9BQU8sRUFBRTtBQUMvRCxXQUFPLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxXQUFXLEVBQUUsRUFBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLElBQUksRUFBQyxDQUFDLENBQUM7R0FDdkgsQ0FBQyxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7cUJDbkJjLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsS0FBSyxFQUFFLGtDQUFpQztBQUM5RCxRQUFJLElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQztRQUNsQixPQUFPLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7QUFDOUMsU0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzdDLFVBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7S0FDekI7O0FBRUQsUUFBSSxLQUFLLEdBQUcsQ0FBQyxDQUFDO0FBQ2QsUUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssSUFBSSxJQUFJLEVBQUU7QUFDOUIsV0FBSyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDO0tBQzVCLE1BQU0sSUFBSSxPQUFPLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksRUFBRTtBQUNyRCxXQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7S0FDNUI7QUFDRCxRQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxDQUFDOztBQUVoQixZQUFRLENBQUMsR0FBRyxNQUFBLENBQVosUUFBUSxFQUFTLElBQUksQ0FBQyxDQUFDO0dBQ3hCLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7O3FCQ2xCYyxVQUFTLFFBQVEsRUFBRTtBQUNoQyxVQUFRLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxVQUFTLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDckQsV0FBTyxHQUFHLElBQUksR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO0dBQzFCLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7O3FCQ0o4RSxVQUFVOztxQkFFMUUsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3pELFFBQUksa0JBQVcsT0FBTyxDQUFDLEVBQUU7QUFBRSxhQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUFFOztBQUUxRCxRQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUVwQixRQUFJLENBQUMsZUFBUSxPQUFPLENBQUMsRUFBRTtBQUNyQixVQUFJLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDO0FBQ3hCLFVBQUksT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFO0FBQy9CLFlBQUksR0FBRyxtQkFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDakMsWUFBSSxDQUFDLFdBQVcsR0FBRyx5QkFBa0IsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQ2hGOztBQUVELGFBQU8sRUFBRSxDQUFDLE9BQU8sRUFBRTtBQUNqQixZQUFJLEVBQUUsSUFBSTtBQUNWLG1CQUFXLEVBQUUsbUJBQVksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7T0FDaEUsQ0FBQyxDQUFDO0tBQ0osTUFBTTtBQUNMLGFBQU8sT0FBTyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUM5QjtHQUNGLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7O3FCQ3ZCcUIsU0FBUzs7QUFFL0IsSUFBSSxNQUFNLEdBQUc7QUFDWCxXQUFTLEVBQUUsQ0FBQyxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLENBQUM7QUFDN0MsT0FBSyxFQUFFLE1BQU07OztBQUdiLGFBQVcsRUFBRSxxQkFBUyxLQUFLLEVBQUU7QUFDM0IsUUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEVBQUU7QUFDN0IsVUFBSSxRQUFRLEdBQUcsZUFBUSxNQUFNLENBQUMsU0FBUyxFQUFFLEtBQUssQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDO0FBQzlELFVBQUksUUFBUSxJQUFJLENBQUMsRUFBRTtBQUNqQixhQUFLLEdBQUcsUUFBUSxDQUFDO09BQ2xCLE1BQU07QUFDTCxhQUFLLEdBQUcsUUFBUSxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztPQUM3QjtLQUNGOztBQUVELFdBQU8sS0FBSyxDQUFDO0dBQ2Q7OztBQUdELEtBQUcsRUFBRSxhQUFTLEtBQUssRUFBYztBQUMvQixTQUFLLEdBQUcsTUFBTSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQUMsQ0FBQzs7QUFFbEMsUUFBSSxPQUFPLE9BQU8sS0FBSyxXQUFXLElBQUksTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxFQUFFO0FBQy9FLFVBQUksTUFBTSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDckMsVUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsRUFBRTs7QUFDcEIsY0FBTSxHQUFHLEtBQUssQ0FBQztPQUNoQjs7d0NBUG1CLE9BQU87QUFBUCxlQUFPOzs7QUFRM0IsYUFBTyxDQUFDLE1BQU0sT0FBQyxDQUFmLE9BQU8sRUFBWSxPQUFPLENBQUMsQ0FBQztLQUM3QjtHQUNGO0NBQ0YsQ0FBQzs7cUJBRWEsTUFBTTs7Ozs7Ozs7Ozs7cUJDakNOLFVBQVMsVUFBVSxFQUFFOztBQUVsQyxNQUFJLElBQUksR0FBRyxPQUFPLE1BQU0sS0FBSyxXQUFXLEdBQUcsTUFBTSxHQUFHLE1BQU07TUFDdEQsV0FBVyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7O0FBRWxDLFlBQVUsQ0FBQyxVQUFVLEdBQUcsWUFBVztBQUNqQyxRQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssVUFBVSxFQUFFO0FBQ2xDLFVBQUksQ0FBQyxVQUFVLEdBQUcsV0FBVyxDQUFDO0tBQy9CO0FBQ0QsV0FBTyxVQUFVLENBQUM7R0FDbkIsQ0FBQztDQUNIOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3FCQ1pzQixTQUFTOztJQUFwQixLQUFLOzt5QkFDSyxhQUFhOzs7O29CQUM4QixRQUFROztBQUVsRSxTQUFTLGFBQWEsQ0FBQyxZQUFZLEVBQUU7QUFDMUMsTUFBTSxnQkFBZ0IsR0FBRyxZQUFZLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7TUFDdkQsZUFBZSwwQkFBb0IsQ0FBQzs7QUFFMUMsTUFBSSxnQkFBZ0IsS0FBSyxlQUFlLEVBQUU7QUFDeEMsUUFBSSxnQkFBZ0IsR0FBRyxlQUFlLEVBQUU7QUFDdEMsVUFBTSxlQUFlLEdBQUcsdUJBQWlCLGVBQWUsQ0FBQztVQUNuRCxnQkFBZ0IsR0FBRyx1QkFBaUIsZ0JBQWdCLENBQUMsQ0FBQztBQUM1RCxZQUFNLDJCQUFjLHlGQUF5RixHQUN2RyxxREFBcUQsR0FBRyxlQUFlLEdBQUcsbURBQW1ELEdBQUcsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDaEssTUFBTTs7QUFFTCxZQUFNLDJCQUFjLHdGQUF3RixHQUN0RyxpREFBaUQsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7S0FDbkY7R0FDRjtDQUNGOztBQUVNLFNBQVMsUUFBUSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7O0FBRTFDLE1BQUksQ0FBQyxHQUFHLEVBQUU7QUFDUixVQUFNLDJCQUFjLG1DQUFtQyxDQUFDLENBQUM7R0FDMUQ7QUFDRCxNQUFJLENBQUMsWUFBWSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRTtBQUN2QyxVQUFNLDJCQUFjLDJCQUEyQixHQUFHLE9BQU8sWUFBWSxDQUFDLENBQUM7R0FDeEU7O0FBRUQsY0FBWSxDQUFDLElBQUksQ0FBQyxTQUFTLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQzs7OztBQUlsRCxLQUFHLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsUUFBUSxDQUFDLENBQUM7O0FBRTVDLFdBQVMsb0JBQW9CLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDdkQsUUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFO0FBQ2hCLGFBQU8sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ2xELFVBQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNmLGVBQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDO09BQ3ZCO0tBQ0Y7O0FBRUQsV0FBTyxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUN0RSxRQUFJLE1BQU0sR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7O0FBRXhFLFFBQUksTUFBTSxJQUFJLElBQUksSUFBSSxHQUFHLENBQUMsT0FBTyxFQUFFO0FBQ2pDLGFBQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLFlBQVksQ0FBQyxlQUFlLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDekYsWUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztLQUMzRDtBQUNELFFBQUksTUFBTSxJQUFJLElBQUksRUFBRTtBQUNsQixVQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUU7QUFDbEIsWUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUMvQixhQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzVDLGNBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUU7QUFDNUIsa0JBQU07V0FDUDs7QUFFRCxlQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDdEM7QUFDRCxjQUFNLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztPQUMzQjtBQUNELGFBQU8sTUFBTSxDQUFDO0tBQ2YsTUFBTTtBQUNMLFlBQU0sMkJBQWMsY0FBYyxHQUFHLE9BQU8sQ0FBQyxJQUFJLEdBQUcsMERBQTBELENBQUMsQ0FBQztLQUNqSDtHQUNGOzs7QUFHRCxNQUFJLFNBQVMsR0FBRztBQUNkLFVBQU0sRUFBRSxnQkFBUyxHQUFHLEVBQUUsSUFBSSxFQUFFO0FBQzFCLFVBQUksRUFBRSxJQUFJLElBQUksR0FBRyxDQUFBLEFBQUMsRUFBRTtBQUNsQixjQUFNLDJCQUFjLEdBQUcsR0FBRyxJQUFJLEdBQUcsbUJBQW1CLEdBQUcsR0FBRyxDQUFDLENBQUM7T0FDN0Q7QUFDRCxhQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNsQjtBQUNELFVBQU0sRUFBRSxnQkFBUyxNQUFNLEVBQUUsSUFBSSxFQUFFO0FBQzdCLFVBQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDMUIsV0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUM1QixZQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksSUFBSSxFQUFFO0FBQ3hDLGlCQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUN4QjtPQUNGO0tBQ0Y7QUFDRCxVQUFNLEVBQUUsZ0JBQVMsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUNqQyxhQUFPLE9BQU8sT0FBTyxLQUFLLFVBQVUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxHQUFHLE9BQU8sQ0FBQztLQUN4RTs7QUFFRCxvQkFBZ0IsRUFBRSxLQUFLLENBQUMsZ0JBQWdCO0FBQ3hDLGlCQUFhLEVBQUUsb0JBQW9COztBQUVuQyxNQUFFLEVBQUUsWUFBUyxDQUFDLEVBQUU7QUFDZCxVQUFJLEdBQUcsR0FBRyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDMUIsU0FBRyxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO0FBQ3ZDLGFBQU8sR0FBRyxDQUFDO0tBQ1o7O0FBRUQsWUFBUSxFQUFFLEVBQUU7QUFDWixXQUFPLEVBQUUsaUJBQVMsQ0FBQyxFQUFFLElBQUksRUFBRSxtQkFBbUIsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFO0FBQ25FLFVBQUksY0FBYyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO1VBQ2pDLEVBQUUsR0FBRyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQ3BCLFVBQUksSUFBSSxJQUFJLE1BQU0sSUFBSSxXQUFXLElBQUksbUJBQW1CLEVBQUU7QUFDeEQsc0JBQWMsR0FBRyxXQUFXLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLG1CQUFtQixFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztPQUMzRixNQUFNLElBQUksQ0FBQyxjQUFjLEVBQUU7QUFDMUIsc0JBQWMsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO09BQzlEO0FBQ0QsYUFBTyxjQUFjLENBQUM7S0FDdkI7O0FBRUQsUUFBSSxFQUFFLGNBQVMsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUMzQixhQUFPLEtBQUssSUFBSSxLQUFLLEVBQUUsRUFBRTtBQUN2QixhQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQztPQUN2QjtBQUNELGFBQU8sS0FBSyxDQUFDO0tBQ2Q7QUFDRCxTQUFLLEVBQUUsZUFBUyxLQUFLLEVBQUUsTUFBTSxFQUFFO0FBQzdCLFVBQUksR0FBRyxHQUFHLEtBQUssSUFBSSxNQUFNLENBQUM7O0FBRTFCLFVBQUksS0FBSyxJQUFJLE1BQU0sSUFBSyxLQUFLLEtBQUssTUFBTSxBQUFDLEVBQUU7QUFDekMsV0FBRyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztPQUN2Qzs7QUFFRCxhQUFPLEdBQUcsQ0FBQztLQUNaOztBQUVELFFBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLElBQUk7QUFDakIsZ0JBQVksRUFBRSxZQUFZLENBQUMsUUFBUTtHQUNwQyxDQUFDOztBQUVGLFdBQVMsR0FBRyxDQUFDLE9BQU8sRUFBZ0I7UUFBZCxPQUFPLHlEQUFHLEVBQUU7O0FBQ2hDLFFBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7O0FBRXhCLE9BQUcsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDcEIsUUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLElBQUksWUFBWSxDQUFDLE9BQU8sRUFBRTtBQUM1QyxVQUFJLEdBQUcsUUFBUSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQztLQUNoQztBQUNELFFBQUksTUFBTSxZQUFBO1FBQ04sV0FBVyxHQUFHLFlBQVksQ0FBQyxjQUFjLEdBQUcsRUFBRSxHQUFHLFNBQVMsQ0FBQztBQUMvRCxRQUFJLFlBQVksQ0FBQyxTQUFTLEVBQUU7QUFDMUIsVUFBSSxPQUFPLENBQUMsTUFBTSxFQUFFO0FBQ2xCLGNBQU0sR0FBRyxPQUFPLEtBQUssT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQztPQUM1RixNQUFNO0FBQ0wsY0FBTSxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUM7T0FDcEI7S0FDRjs7QUFFRCxhQUFTLElBQUksQ0FBQyxPQUFPLGdCQUFlO0FBQ2xDLGFBQU8sRUFBRSxHQUFHLFlBQVksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLE9BQU8sRUFBRSxTQUFTLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxRQUFRLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztLQUNySDtBQUNELFFBQUksR0FBRyxpQkFBaUIsQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsT0FBTyxDQUFDLE1BQU0sSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3RHLFdBQU8sSUFBSSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztHQUMvQjtBQUNELEtBQUcsQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDOztBQUVqQixLQUFHLENBQUMsTUFBTSxHQUFHLFVBQVMsT0FBTyxFQUFFO0FBQzdCLFFBQUksQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFO0FBQ3BCLGVBQVMsQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQzs7QUFFbEUsVUFBSSxZQUFZLENBQUMsVUFBVSxFQUFFO0FBQzNCLGlCQUFTLENBQUMsUUFBUSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7T0FDdEU7QUFDRCxVQUFJLFlBQVksQ0FBQyxVQUFVLElBQUksWUFBWSxDQUFDLGFBQWEsRUFBRTtBQUN6RCxpQkFBUyxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxVQUFVLEVBQUUsR0FBRyxDQUFDLFVBQVUsQ0FBQyxDQUFDO09BQzVFO0tBQ0YsTUFBTTtBQUNMLGVBQVMsQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztBQUNwQyxlQUFTLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDdEMsZUFBUyxDQUFDLFVBQVUsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDO0tBQzNDO0dBQ0YsQ0FBQzs7QUFFRixLQUFHLENBQUMsTUFBTSxHQUFHLFVBQVMsQ0FBQyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFO0FBQ2xELFFBQUksWUFBWSxDQUFDLGNBQWMsSUFBSSxDQUFDLFdBQVcsRUFBRTtBQUMvQyxZQUFNLDJCQUFjLHdCQUF3QixDQUFDLENBQUM7S0FDL0M7QUFDRCxRQUFJLFlBQVksQ0FBQyxTQUFTLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDckMsWUFBTSwyQkFBYyx5QkFBeUIsQ0FBQyxDQUFDO0tBQ2hEOztBQUVELFdBQU8sV0FBVyxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0dBQ2pGLENBQUM7QUFDRixTQUFPLEdBQUcsQ0FBQztDQUNaOztBQUVNLFNBQVMsV0FBVyxDQUFDLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxtQkFBbUIsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFO0FBQzVGLFdBQVMsSUFBSSxDQUFDLE9BQU8sRUFBZ0I7UUFBZCxPQUFPLHlEQUFHLEVBQUU7O0FBQ2pDLFFBQUksYUFBYSxHQUFHLE1BQU0sQ0FBQztBQUMzQixRQUFJLE1BQU0sSUFBSSxPQUFPLEtBQUssTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQ25DLG1CQUFhLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7S0FDMUM7O0FBRUQsV0FBTyxFQUFFLENBQUMsU0FBUyxFQUNmLE9BQU8sRUFDUCxTQUFTLENBQUMsT0FBTyxFQUFFLFNBQVMsQ0FBQyxRQUFRLEVBQ3JDLE9BQU8sQ0FBQyxJQUFJLElBQUksSUFBSSxFQUNwQixXQUFXLElBQUksQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUN4RCxhQUFhLENBQUMsQ0FBQztHQUNwQjs7QUFFRCxNQUFJLEdBQUcsaUJBQWlCLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxXQUFXLENBQUMsQ0FBQzs7QUFFekUsTUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLENBQUM7QUFDakIsTUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDeEMsTUFBSSxDQUFDLFdBQVcsR0FBRyxtQkFBbUIsSUFBSSxDQUFDLENBQUM7QUFDNUMsU0FBTyxJQUFJLENBQUM7Q0FDYjs7QUFFTSxTQUFTLGNBQWMsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUN4RCxNQUFJLENBQUMsT0FBTyxFQUFFO0FBQ1osUUFBSSxPQUFPLENBQUMsSUFBSSxLQUFLLGdCQUFnQixFQUFFO0FBQ3JDLGFBQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO0tBQ3pDLE1BQU07QUFDTCxhQUFPLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDMUM7R0FDRixNQUFNLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRTs7QUFFekMsV0FBTyxDQUFDLElBQUksR0FBRyxPQUFPLENBQUM7QUFDdkIsV0FBTyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7R0FDckM7QUFDRCxTQUFPLE9BQU8sQ0FBQztDQUNoQjs7QUFFTSxTQUFTLGFBQWEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUN2RCxTQUFPLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQztBQUN2QixNQUFJLE9BQU8sQ0FBQyxHQUFHLEVBQUU7QUFDZixXQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDO0dBQ3ZFOztBQUVELE1BQUksWUFBWSxZQUFBLENBQUM7QUFDakIsTUFBSSxPQUFPLENBQUMsRUFBRSxJQUFJLE9BQU8sQ0FBQyxFQUFFLEtBQUssSUFBSSxFQUFFO0FBQ3JDLFdBQU8sQ0FBQyxJQUFJLEdBQUcsa0JBQVksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3pDLGdCQUFZLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDOztBQUUxRCxRQUFJLFlBQVksQ0FBQyxRQUFRLEVBQUU7QUFDekIsYUFBTyxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsUUFBUSxFQUFFLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQztLQUM5RTtHQUNGOztBQUVELE1BQUksT0FBTyxLQUFLLFNBQVMsSUFBSSxZQUFZLEVBQUU7QUFDekMsV0FBTyxHQUFHLFlBQVksQ0FBQztHQUN4Qjs7QUFFRCxNQUFJLE9BQU8sS0FBSyxTQUFTLEVBQUU7QUFDekIsVUFBTSwyQkFBYyxjQUFjLEdBQUcsT0FBTyxDQUFDLElBQUksR0FBRyxxQkFBcUIsQ0FBQyxDQUFDO0dBQzVFLE1BQU0sSUFBSSxPQUFPLFlBQVksUUFBUSxFQUFFO0FBQ3RDLFdBQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztHQUNsQztDQUNGOztBQUVNLFNBQVMsSUFBSSxHQUFHO0FBQUUsU0FBTyxFQUFFLENBQUM7Q0FBRTs7QUFFckMsU0FBUyxRQUFRLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRTtBQUMvQixNQUFJLENBQUMsSUFBSSxJQUFJLEVBQUUsTUFBTSxJQUFJLElBQUksQ0FBQSxBQUFDLEVBQUU7QUFDOUIsUUFBSSxHQUFHLElBQUksR0FBRyxrQkFBWSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDckMsUUFBSSxDQUFDLElBQUksR0FBRyxPQUFPLENBQUM7R0FDckI7QUFDRCxTQUFPLElBQUksQ0FBQztDQUNiOztBQUVELFNBQVMsaUJBQWlCLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUU7QUFDekUsTUFBSSxFQUFFLENBQUMsU0FBUyxFQUFFO0FBQ2hCLFFBQUksS0FBSyxHQUFHLEVBQUUsQ0FBQztBQUNmLFFBQUksR0FBRyxFQUFFLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0sSUFBSSxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUM1RixTQUFLLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQztHQUMzQjtBQUNELFNBQU8sSUFBSSxDQUFDO0NBQ2I7Ozs7Ozs7O0FDM1FELFNBQVMsVUFBVSxDQUFDLE1BQU0sRUFBRTtBQUMxQixNQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztDQUN0Qjs7QUFFRCxVQUFVLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxVQUFVLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxZQUFXO0FBQ3ZFLFNBQU8sRUFBRSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7Q0FDekIsQ0FBQzs7cUJBRWEsVUFBVTs7Ozs7Ozs7Ozs7Ozs7O0FDVHpCLElBQU0sTUFBTSxHQUFHO0FBQ2IsS0FBRyxFQUFFLE9BQU87QUFDWixLQUFHLEVBQUUsTUFBTTtBQUNYLEtBQUcsRUFBRSxNQUFNO0FBQ1gsS0FBRyxFQUFFLFFBQVE7QUFDYixLQUFHLEVBQUUsUUFBUTtBQUNiLEtBQUcsRUFBRSxRQUFRO0FBQ2IsS0FBRyxFQUFFLFFBQVE7Q0FDZCxDQUFDOztBQUVGLElBQU0sUUFBUSxHQUFHLFlBQVk7SUFDdkIsUUFBUSxHQUFHLFdBQVcsQ0FBQzs7QUFFN0IsU0FBUyxVQUFVLENBQUMsR0FBRyxFQUFFO0FBQ3ZCLFNBQU8sTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQ3BCOztBQUVNLFNBQVMsTUFBTSxDQUFDLEdBQUcsb0JBQW1CO0FBQzNDLE9BQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ3pDLFNBQUssSUFBSSxHQUFHLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFO0FBQzVCLFVBQUksTUFBTSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsRUFBRTtBQUMzRCxXQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO09BQzlCO0tBQ0Y7R0FDRjs7QUFFRCxTQUFPLEdBQUcsQ0FBQztDQUNaOztBQUVNLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDOzs7Ozs7QUFLaEQsSUFBSSxVQUFVLEdBQUcsb0JBQVMsS0FBSyxFQUFFO0FBQy9CLFNBQU8sT0FBTyxLQUFLLEtBQUssVUFBVSxDQUFDO0NBQ3BDLENBQUM7OztBQUdGLElBQUksVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0FBQ25CLFVBSU0sVUFBVSxHQUpoQixVQUFVLEdBQUcsVUFBUyxLQUFLLEVBQUU7QUFDM0IsV0FBTyxPQUFPLEtBQUssS0FBSyxVQUFVLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxtQkFBbUIsQ0FBQztHQUNwRixDQUFDO0NBQ0g7UUFDTyxVQUFVLEdBQVYsVUFBVTs7Ozs7QUFJWCxJQUFNLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxJQUFJLFVBQVMsS0FBSyxFQUFFO0FBQ3RELFNBQU8sQUFBQyxLQUFLLElBQUksT0FBTyxLQUFLLEtBQUssUUFBUSxHQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssZ0JBQWdCLEdBQUcsS0FBSyxDQUFDO0NBQ2pHLENBQUM7Ozs7O0FBR0ssU0FBUyxPQUFPLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRTtBQUNwQyxPQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxHQUFHLEdBQUcsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQ2hELFFBQUksS0FBSyxDQUFDLENBQUMsQ0FBQyxLQUFLLEtBQUssRUFBRTtBQUN0QixhQUFPLENBQUMsQ0FBQztLQUNWO0dBQ0Y7QUFDRCxTQUFPLENBQUMsQ0FBQyxDQUFDO0NBQ1g7O0FBR00sU0FBUyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7QUFDdkMsTUFBSSxPQUFPLE1BQU0sS0FBSyxRQUFRLEVBQUU7O0FBRTlCLFFBQUksTUFBTSxJQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7QUFDM0IsYUFBTyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7S0FDeEIsTUFBTSxJQUFJLE1BQU0sSUFBSSxJQUFJLEVBQUU7QUFDekIsYUFBTyxFQUFFLENBQUM7S0FDWCxNQUFNLElBQUksQ0FBQyxNQUFNLEVBQUU7QUFDbEIsYUFBTyxNQUFNLEdBQUcsRUFBRSxDQUFDO0tBQ3BCOzs7OztBQUtELFVBQU0sR0FBRyxFQUFFLEdBQUcsTUFBTSxDQUFDO0dBQ3RCOztBQUVELE1BQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFO0FBQUUsV0FBTyxNQUFNLENBQUM7R0FBRTtBQUM5QyxTQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0NBQzdDOztBQUVNLFNBQVMsT0FBTyxDQUFDLEtBQUssRUFBRTtBQUM3QixNQUFJLENBQUMsS0FBSyxJQUFJLEtBQUssS0FBSyxDQUFDLEVBQUU7QUFDekIsV0FBTyxJQUFJLENBQUM7R0FDYixNQUFNLElBQUksT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQy9DLFdBQU8sSUFBSSxDQUFDO0dBQ2IsTUFBTTtBQUNMLFdBQU8sS0FBSyxDQUFDO0dBQ2Q7Q0FDRjs7QUFFTSxTQUFTLFdBQVcsQ0FBQyxNQUFNLEVBQUU7QUFDbEMsTUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUMvQixPQUFLLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztBQUN2QixTQUFPLEtBQUssQ0FBQztDQUNkOztBQUVNLFNBQVMsV0FBVyxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUU7QUFDdkMsUUFBTSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7QUFDbEIsU0FBTyxNQUFNLENBQUM7Q0FDZjs7QUFFTSxTQUFTLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxFQUFFLEVBQUU7QUFDakQsU0FBTyxDQUFDLFdBQVcsR0FBRyxXQUFXLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQSxHQUFJLEVBQUUsQ0FBQztDQUNwRDs7OztBQzNHRDtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBOztBQ0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUMxL1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ3h3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDdHVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNsa0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ROQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaFNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNySkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNycEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVXQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25JQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaFNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1hBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1BBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzloQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IHtcclxuICBjcm9zc0RvbWFpbjogdHJ1ZSxcclxuICB0YXJnZXQ6ICcjYXBwLXdyYXBwZXInLFxyXG4gIHN2Z1Nwcml0ZVBhdGg6ICdjc3Mvc3ZnLycsXHJcbiAgc3ZnU3ByaXRlczogWydmYS1pY29ucy5zdmcnLCAnbWF0ZXJpYWwtaWNvbnMuc3ZnJywgJ21pc2NlbGxhbmVvdXMuc3ZnJywgJ29yaWdvLWljb25zLnN2ZycsICdjdXN0b20uc3ZnJ10sXHJcbiAgYnJlYWtQb2ludHM6IHtcclxuICAgIHhzOiBbMjQwLCAzMjBdLFxyXG4gICAgczogWzMyMCwgMzIwXSxcclxuICAgIG06IFs1MDAsIDUwMF0sXHJcbiAgICBsOiBbNzY4LCA1MDBdXHJcbiAgfSxcclxuICBicmVha1BvaW50c1ByZWZpeDogJ28tbWVkaWEnLFxyXG4gIGRlZmF1bHRDb250cm9sczogW1xyXG4gICAge1xyXG4gICAgICBcIm5hbWVcIjogXCJzY2FsZWxpbmVcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJuYW1lXCI6IFwiem9vbVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcIm5hbWVcIjogXCJyb3RhdGVcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJuYW1lXCI6IFwiYXR0cmlidXRpb25cIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgIFwibmFtZVwiOiBcImZ1bGxzY3JlZW5cIlxyXG4gICAgfVxyXG4gIF1cclxufVxyXG4iLCJ2YXIgY29udHJvbHMgPSB7fTtcclxuY29udHJvbHMuZ2VvcG9zaXRpb24gPSByZXF1aXJlKCcuLi9zcmMvZ2VvcG9zaXRpb24nKTtcclxuY29udHJvbHMubWFwbWVudSA9IHJlcXVpcmUoJy4uL3NyYy9tYXBtZW51Jyk7XHJcbmNvbnRyb2xzLnByaW50ID0gcmVxdWlyZSgnLi4vc3JjL3ByaW50Jyk7XHJcbmNvbnRyb2xzLnNoYXJlbWFwID0gcmVxdWlyZSgnLi4vc3JjL3NoYXJlbWFwJyk7XHJcbmNvbnRyb2xzLmxlZ2VuZCA9IHJlcXVpcmUoJy4uL3NyYy9sZWdlbmQnKTtcclxuY29udHJvbHMuc2VhcmNoID0gcmVxdWlyZSgnLi4vc3JjL3NlYXJjaCcpO1xyXG5jb250cm9scy5lZGl0b3IgPSByZXF1aXJlKCcuLi9zcmMvZWRpdG9yJyk7XHJcbmNvbnRyb2xzLmhvbWUgPSByZXF1aXJlKCcuLi9zcmMvaG9tZScpO1xyXG5jb250cm9scy5tZWFzdXJlID0gcmVxdWlyZSgnLi4vc3JjL21lYXN1cmUnKTtcclxuY29udHJvbHMuYWJvdXQgPSByZXF1aXJlKCcuLi9zcmMvYWJvdXQnKTtcclxuY29udHJvbHMuc2NhbGUgPSByZXF1aXJlKCcuLi9zcmMvc2NhbGUnKTtcclxuY29udHJvbHMub2ZmbGluZSA9IHJlcXVpcmUoJy4uL3NyYy9vZmZsaW5lJyk7XHJcbmNvbnRyb2xzLmxpbmsgPSByZXF1aXJlKCcuLi9zcmMvbGluaycpO1xyXG5jb250cm9scy5zY2FsZWxpbmUgPSByZXF1aXJlKCcuLi9zcmMvc2NhbGVsaW5lJyk7XHJcbmNvbnRyb2xzLnpvb20gPSByZXF1aXJlKCcuLi9zcmMvem9vbScpO1xyXG5jb250cm9scy5yb3RhdGUgPSByZXF1aXJlKCcuLi9zcmMvcm90YXRlJyk7XHJcbmNvbnRyb2xzLmF0dHJpYnV0aW9uID0gcmVxdWlyZSgnLi4vc3JjL2F0dHJpYnV0aW9uJyk7XHJcbmNvbnRyb2xzLnBvc2l0aW9uID0gcmVxdWlyZSgnLi4vc3JjL3Bvc2l0aW9uJyk7XHJcbmNvbnRyb2xzLmZ1bGxzY3JlZW4gPSByZXF1aXJlKCcuLi9zcmMvZnVsbHNjcmVlbicpO1xyXG5jb250cm9scy5zcGxhc2ggPSByZXF1aXJlKCcuLi9zcmMvc3BsYXNoJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRyb2xzO1xyXG4iLCJcImZ1bmN0aW9uXCIhPT10eXBlb2YgT2JqZWN0LmNyZWF0ZSYmKE9iamVjdC5jcmVhdGU9ZnVuY3Rpb24oZil7ZnVuY3Rpb24gZygpe31nLnByb3RvdHlwZT1mO3JldHVybiBuZXcgZ30pO1xyXG4oZnVuY3Rpb24oZixnLGspe3ZhciBsPXtpbml0OmZ1bmN0aW9uKGEsYil7dGhpcy4kZWxlbT1mKGIpO3RoaXMub3B0aW9ucz1mLmV4dGVuZCh7fSxmLmZuLm93bENhcm91c2VsLm9wdGlvbnMsdGhpcy4kZWxlbS5kYXRhKCksYSk7dGhpcy51c2VyT3B0aW9ucz1hO3RoaXMubG9hZENvbnRlbnQoKX0sbG9hZENvbnRlbnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBkLGU9XCJcIjtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYi5vcHRpb25zLmpzb25TdWNjZXNzKWIub3B0aW9ucy5qc29uU3VjY2Vzcy5hcHBseSh0aGlzLFthXSk7ZWxzZXtmb3IoZCBpbiBhLm93bClhLm93bC5oYXNPd25Qcm9wZXJ0eShkKSYmKGUrPWEub3dsW2RdLml0ZW0pO2IuJGVsZW0uaHRtbChlKX1iLmxvZ0luKCl9dmFyIGI9dGhpcyxlO1wiZnVuY3Rpb25cIj09PXR5cGVvZiBiLm9wdGlvbnMuYmVmb3JlSW5pdCYmYi5vcHRpb25zLmJlZm9yZUluaXQuYXBwbHkodGhpcyxbYi4kZWxlbV0pO1wic3RyaW5nXCI9PT10eXBlb2YgYi5vcHRpb25zLmpzb25QYXRoP1xyXG4oZT1iLm9wdGlvbnMuanNvblBhdGgsZi5nZXRKU09OKGUsYSkpOmIubG9nSW4oKX0sbG9nSW46ZnVuY3Rpb24oKXt0aGlzLiRlbGVtLmRhdGEoXCJvd2wtb3JpZ2luYWxTdHlsZXNcIix0aGlzLiRlbGVtLmF0dHIoXCJzdHlsZVwiKSk7dGhpcy4kZWxlbS5kYXRhKFwib3dsLW9yaWdpbmFsQ2xhc3Nlc1wiLHRoaXMuJGVsZW0uYXR0cihcImNsYXNzXCIpKTt0aGlzLiRlbGVtLmNzcyh7b3BhY2l0eTowfSk7dGhpcy5vcmlnbmFsSXRlbXM9dGhpcy5vcHRpb25zLml0ZW1zO3RoaXMuY2hlY2tCcm93c2VyKCk7dGhpcy53cmFwcGVyV2lkdGg9MDt0aGlzLmNoZWNrVmlzaWJsZT1udWxsO3RoaXMuc2V0VmFycygpfSxzZXRWYXJzOmZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuJGVsZW0uY2hpbGRyZW4oKS5sZW5ndGgpcmV0dXJuITE7dGhpcy5iYXNlQ2xhc3MoKTt0aGlzLmV2ZW50VHlwZXMoKTt0aGlzLiR1c2VySXRlbXM9dGhpcy4kZWxlbS5jaGlsZHJlbigpO3RoaXMuaXRlbXNBbW91bnQ9dGhpcy4kdXNlckl0ZW1zLmxlbmd0aDtcclxudGhpcy53cmFwSXRlbXMoKTt0aGlzLiRvd2xJdGVtcz10aGlzLiRlbGVtLmZpbmQoXCIub3dsLWl0ZW1cIik7dGhpcy4kb3dsV3JhcHBlcj10aGlzLiRlbGVtLmZpbmQoXCIub3dsLXdyYXBwZXJcIik7dGhpcy5wbGF5RGlyZWN0aW9uPVwibmV4dFwiO3RoaXMucHJldkl0ZW09MDt0aGlzLnByZXZBcnI9WzBdO3RoaXMuY3VycmVudEl0ZW09MDt0aGlzLmN1c3RvbUV2ZW50cygpO3RoaXMub25TdGFydHVwKCl9LG9uU3RhcnR1cDpmdW5jdGlvbigpe3RoaXMudXBkYXRlSXRlbXMoKTt0aGlzLmNhbGN1bGF0ZUFsbCgpO3RoaXMuYnVpbGRDb250cm9scygpO3RoaXMudXBkYXRlQ29udHJvbHMoKTt0aGlzLnJlc3BvbnNlKCk7dGhpcy5tb3ZlRXZlbnRzKCk7dGhpcy5zdG9wT25Ib3ZlcigpO3RoaXMub3dsU3RhdHVzKCk7ITEhPT10aGlzLm9wdGlvbnMudHJhbnNpdGlvblN0eWxlJiZ0aGlzLnRyYW5zaXRpb25UeXBlcyh0aGlzLm9wdGlvbnMudHJhbnNpdGlvblN0eWxlKTshMD09PXRoaXMub3B0aW9ucy5hdXRvUGxheSYmXHJcbih0aGlzLm9wdGlvbnMuYXV0b1BsYXk9NUUzKTt0aGlzLnBsYXkoKTt0aGlzLiRlbGVtLmZpbmQoXCIub3dsLXdyYXBwZXJcIikuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIik7dGhpcy4kZWxlbS5pcyhcIjp2aXNpYmxlXCIpP3RoaXMuJGVsZW0uY3NzKFwib3BhY2l0eVwiLDEpOnRoaXMud2F0Y2hWaXNpYmlsaXR5KCk7dGhpcy5vbnN0YXJ0dXA9ITE7dGhpcy5lYWNoTW92ZVVwZGF0ZSgpO1wiZnVuY3Rpb25cIj09PXR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXJJbml0JiZ0aGlzLm9wdGlvbnMuYWZ0ZXJJbml0LmFwcGx5KHRoaXMsW3RoaXMuJGVsZW1dKX0sZWFjaE1vdmVVcGRhdGU6ZnVuY3Rpb24oKXshMD09PXRoaXMub3B0aW9ucy5sYXp5TG9hZCYmdGhpcy5sYXp5TG9hZCgpOyEwPT09dGhpcy5vcHRpb25zLmF1dG9IZWlnaHQmJnRoaXMuYXV0b0hlaWdodCgpO3RoaXMub25WaXNpYmxlSXRlbXMoKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgdGhpcy5vcHRpb25zLmFmdGVyQWN0aW9uJiZ0aGlzLm9wdGlvbnMuYWZ0ZXJBY3Rpb24uYXBwbHkodGhpcyxcclxuW3RoaXMuJGVsZW1dKX0sdXBkYXRlVmFyczpmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09PXR5cGVvZiB0aGlzLm9wdGlvbnMuYmVmb3JlVXBkYXRlJiZ0aGlzLm9wdGlvbnMuYmVmb3JlVXBkYXRlLmFwcGx5KHRoaXMsW3RoaXMuJGVsZW1dKTt0aGlzLndhdGNoVmlzaWJpbGl0eSgpO3RoaXMudXBkYXRlSXRlbXMoKTt0aGlzLmNhbGN1bGF0ZUFsbCgpO3RoaXMudXBkYXRlUG9zaXRpb24oKTt0aGlzLnVwZGF0ZUNvbnRyb2xzKCk7dGhpcy5lYWNoTW92ZVVwZGF0ZSgpO1wiZnVuY3Rpb25cIj09PXR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXJVcGRhdGUmJnRoaXMub3B0aW9ucy5hZnRlclVwZGF0ZS5hcHBseSh0aGlzLFt0aGlzLiRlbGVtXSl9LHJlbG9hZDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7Zy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS51cGRhdGVWYXJzKCl9LDApfSx3YXRjaFZpc2liaWxpdHk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCExPT09YS4kZWxlbS5pcyhcIjp2aXNpYmxlXCIpKWEuJGVsZW0uY3NzKHtvcGFjaXR5OjB9KSxcclxuZy5jbGVhckludGVydmFsKGEuYXV0b1BsYXlJbnRlcnZhbCksZy5jbGVhckludGVydmFsKGEuY2hlY2tWaXNpYmxlKTtlbHNlIHJldHVybiExO2EuY2hlY2tWaXNpYmxlPWcuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXthLiRlbGVtLmlzKFwiOnZpc2libGVcIikmJihhLnJlbG9hZCgpLGEuJGVsZW0uYW5pbWF0ZSh7b3BhY2l0eToxfSwyMDApLGcuY2xlYXJJbnRlcnZhbChhLmNoZWNrVmlzaWJsZSkpfSw1MDApfSx3cmFwSXRlbXM6ZnVuY3Rpb24oKXt0aGlzLiR1c2VySXRlbXMud3JhcEFsbCgnPGRpdiBjbGFzcz1cIm93bC13cmFwcGVyXCI+Jykud3JhcCgnPGRpdiBjbGFzcz1cIm93bC1pdGVtXCI+PC9kaXY+Jyk7dGhpcy4kZWxlbS5maW5kKFwiLm93bC13cmFwcGVyXCIpLndyYXAoJzxkaXYgY2xhc3M9XCJvd2wtd3JhcHBlci1vdXRlclwiPicpO3RoaXMud3JhcHBlck91dGVyPXRoaXMuJGVsZW0uZmluZChcIi5vd2wtd3JhcHBlci1vdXRlclwiKTt0aGlzLiRlbGVtLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpfSxcclxuYmFzZUNsYXNzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbS5oYXNDbGFzcyh0aGlzLm9wdGlvbnMuYmFzZUNsYXNzKSxiPXRoaXMuJGVsZW0uaGFzQ2xhc3ModGhpcy5vcHRpb25zLnRoZW1lKTthfHx0aGlzLiRlbGVtLmFkZENsYXNzKHRoaXMub3B0aW9ucy5iYXNlQ2xhc3MpO2J8fHRoaXMuJGVsZW0uYWRkQ2xhc3ModGhpcy5vcHRpb25zLnRoZW1lKX0sdXBkYXRlSXRlbXM6ZnVuY3Rpb24oKXt2YXIgYSxiO2lmKCExPT09dGhpcy5vcHRpb25zLnJlc3BvbnNpdmUpcmV0dXJuITE7aWYoITA9PT10aGlzLm9wdGlvbnMuc2luZ2xlSXRlbSlyZXR1cm4gdGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3JpZ25hbEl0ZW1zPTEsdGhpcy5vcHRpb25zLml0ZW1zQ3VzdG9tPSExLHRoaXMub3B0aW9ucy5pdGVtc0Rlc2t0b3A9ITEsdGhpcy5vcHRpb25zLml0ZW1zRGVza3RvcFNtYWxsPSExLHRoaXMub3B0aW9ucy5pdGVtc1RhYmxldD0hMSx0aGlzLm9wdGlvbnMuaXRlbXNUYWJsZXRTbWFsbD1cclxuITEsdGhpcy5vcHRpb25zLml0ZW1zTW9iaWxlPSExO2E9Zih0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZUJhc2VXaWR0aCkud2lkdGgoKTthPih0aGlzLm9wdGlvbnMuaXRlbXNEZXNrdG9wWzBdfHx0aGlzLm9yaWduYWxJdGVtcykmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5vcmlnbmFsSXRlbXMpO2lmKCExIT09dGhpcy5vcHRpb25zLml0ZW1zQ3VzdG9tKWZvcih0aGlzLm9wdGlvbnMuaXRlbXNDdXN0b20uc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhWzBdLWJbMF19KSxiPTA7Yjx0aGlzLm9wdGlvbnMuaXRlbXNDdXN0b20ubGVuZ3RoO2IrPTEpdGhpcy5vcHRpb25zLml0ZW1zQ3VzdG9tW2JdWzBdPD1hJiYodGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3B0aW9ucy5pdGVtc0N1c3RvbVtiXVsxXSk7ZWxzZSBhPD10aGlzLm9wdGlvbnMuaXRlbXNEZXNrdG9wWzBdJiYhMSE9PXRoaXMub3B0aW9ucy5pdGVtc0Rlc2t0b3AmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5vcHRpb25zLml0ZW1zRGVza3RvcFsxXSksXHJcbmE8PXRoaXMub3B0aW9ucy5pdGVtc0Rlc2t0b3BTbWFsbFswXSYmITEhPT10aGlzLm9wdGlvbnMuaXRlbXNEZXNrdG9wU21hbGwmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5vcHRpb25zLml0ZW1zRGVza3RvcFNtYWxsWzFdKSxhPD10aGlzLm9wdGlvbnMuaXRlbXNUYWJsZXRbMF0mJiExIT09dGhpcy5vcHRpb25zLml0ZW1zVGFibGV0JiYodGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3B0aW9ucy5pdGVtc1RhYmxldFsxXSksYTw9dGhpcy5vcHRpb25zLml0ZW1zVGFibGV0U21hbGxbMF0mJiExIT09dGhpcy5vcHRpb25zLml0ZW1zVGFibGV0U21hbGwmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5vcHRpb25zLml0ZW1zVGFibGV0U21hbGxbMV0pLGE8PXRoaXMub3B0aW9ucy5pdGVtc01vYmlsZVswXSYmITEhPT10aGlzLm9wdGlvbnMuaXRlbXNNb2JpbGUmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5vcHRpb25zLml0ZW1zTW9iaWxlWzFdKTt0aGlzLm9wdGlvbnMuaXRlbXM+dGhpcy5pdGVtc0Ftb3VudCYmXHJcbiEwPT09dGhpcy5vcHRpb25zLml0ZW1zU2NhbGVVcCYmKHRoaXMub3B0aW9ucy5pdGVtcz10aGlzLml0ZW1zQW1vdW50KX0scmVzcG9uc2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGIsZTtpZighMCE9PWEub3B0aW9ucy5yZXNwb25zaXZlKXJldHVybiExO2U9ZihnKS53aWR0aCgpO2EucmVzaXplcj1mdW5jdGlvbigpe2YoZykud2lkdGgoKSE9PWUmJighMSE9PWEub3B0aW9ucy5hdXRvUGxheSYmZy5jbGVhckludGVydmFsKGEuYXV0b1BsYXlJbnRlcnZhbCksZy5jbGVhclRpbWVvdXQoYiksYj1nLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlPWYoZykud2lkdGgoKTthLnVwZGF0ZVZhcnMoKX0sYS5vcHRpb25zLnJlc3BvbnNpdmVSZWZyZXNoUmF0ZSkpfTtmKGcpLnJlc2l6ZShhLnJlc2l6ZXIpfSx1cGRhdGVQb3NpdGlvbjpmdW5jdGlvbigpe3RoaXMuanVtcFRvKHRoaXMuY3VycmVudEl0ZW0pOyExIT09dGhpcy5vcHRpb25zLmF1dG9QbGF5JiZ0aGlzLmNoZWNrQXAoKX0sYXBwZW5kSXRlbXNTaXplczpmdW5jdGlvbigpe3ZhciBhPVxyXG50aGlzLGI9MCxlPWEuaXRlbXNBbW91bnQtYS5vcHRpb25zLml0ZW1zO2EuJG93bEl0ZW1zLmVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9Zih0aGlzKTtkLmNzcyh7d2lkdGg6YS5pdGVtV2lkdGh9KS5kYXRhKFwib3dsLWl0ZW1cIixOdW1iZXIoYykpO2lmKDA9PT1jJWEub3B0aW9ucy5pdGVtc3x8Yz09PWUpYz5lfHwoYis9MSk7ZC5kYXRhKFwib3dsLXJvdW5kUGFnZXNcIixiKX0pfSxhcHBlbmRXcmFwcGVyU2l6ZXM6ZnVuY3Rpb24oKXt0aGlzLiRvd2xXcmFwcGVyLmNzcyh7d2lkdGg6dGhpcy4kb3dsSXRlbXMubGVuZ3RoKnRoaXMuaXRlbVdpZHRoKjIsbGVmdDowfSk7dGhpcy5hcHBlbmRJdGVtc1NpemVzKCl9LGNhbGN1bGF0ZUFsbDpmdW5jdGlvbigpe3RoaXMuY2FsY3VsYXRlV2lkdGgoKTt0aGlzLmFwcGVuZFdyYXBwZXJTaXplcygpO3RoaXMubG9vcHMoKTt0aGlzLm1heCgpfSxjYWxjdWxhdGVXaWR0aDpmdW5jdGlvbigpe3RoaXMuaXRlbVdpZHRoPU1hdGgucm91bmQodGhpcy4kZWxlbS53aWR0aCgpL1xyXG50aGlzLm9wdGlvbnMuaXRlbXMpfSxtYXg6ZnVuY3Rpb24oKXt2YXIgYT0tMSoodGhpcy5pdGVtc0Ftb3VudCp0aGlzLml0ZW1XaWR0aC10aGlzLm9wdGlvbnMuaXRlbXMqdGhpcy5pdGVtV2lkdGgpO3RoaXMub3B0aW9ucy5pdGVtcz50aGlzLml0ZW1zQW1vdW50P3RoaXMubWF4aW11bVBpeGVscz1hPXRoaXMubWF4aW11bUl0ZW09MDoodGhpcy5tYXhpbXVtSXRlbT10aGlzLml0ZW1zQW1vdW50LXRoaXMub3B0aW9ucy5pdGVtcyx0aGlzLm1heGltdW1QaXhlbHM9YSk7cmV0dXJuIGF9LG1pbjpmdW5jdGlvbigpe3JldHVybiAwfSxsb29wczpmdW5jdGlvbigpe3ZhciBhPTAsYj0wLGUsYzt0aGlzLnBvc2l0aW9uc0luQXJyYXk9WzBdO3RoaXMucGFnZXNJbkFycmF5PVtdO2ZvcihlPTA7ZTx0aGlzLml0ZW1zQW1vdW50O2UrPTEpYis9dGhpcy5pdGVtV2lkdGgsdGhpcy5wb3NpdGlvbnNJbkFycmF5LnB1c2goLWIpLCEwPT09dGhpcy5vcHRpb25zLnNjcm9sbFBlclBhZ2UmJihjPWYodGhpcy4kb3dsSXRlbXNbZV0pLFxyXG5jPWMuZGF0YShcIm93bC1yb3VuZFBhZ2VzXCIpLGMhPT1hJiYodGhpcy5wYWdlc0luQXJyYXlbYV09dGhpcy5wb3NpdGlvbnNJbkFycmF5W2VdLGE9YykpfSxidWlsZENvbnRyb2xzOmZ1bmN0aW9uKCl7aWYoITA9PT10aGlzLm9wdGlvbnMubmF2aWdhdGlvbnx8ITA9PT10aGlzLm9wdGlvbnMucGFnaW5hdGlvbil0aGlzLm93bENvbnRyb2xzPWYoJzxkaXYgY2xhc3M9XCJvd2wtY29udHJvbHNcIi8+JykudG9nZ2xlQ2xhc3MoXCJjbGlja2FibGVcIiwhdGhpcy5icm93c2VyLmlzVG91Y2gpLmFwcGVuZFRvKHRoaXMuJGVsZW0pOyEwPT09dGhpcy5vcHRpb25zLnBhZ2luYXRpb24mJnRoaXMuYnVpbGRQYWdpbmF0aW9uKCk7ITA9PT10aGlzLm9wdGlvbnMubmF2aWdhdGlvbiYmdGhpcy5idWlsZEJ1dHRvbnMoKX0sYnVpbGRCdXR0b25zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWYoJzxkaXYgY2xhc3M9XCJvd2wtYnV0dG9uc1wiLz4nKTthLm93bENvbnRyb2xzLmFwcGVuZChiKTthLmJ1dHRvblByZXY9XHJcbmYoXCI8ZGl2Lz5cIix7XCJjbGFzc1wiOlwib3dsLXByZXZcIixodG1sOmEub3B0aW9ucy5uYXZpZ2F0aW9uVGV4dFswXXx8XCJcIn0pO2EuYnV0dG9uTmV4dD1mKFwiPGRpdi8+XCIse1wiY2xhc3NcIjpcIm93bC1uZXh0XCIsaHRtbDphLm9wdGlvbnMubmF2aWdhdGlvblRleHRbMV18fFwiXCJ9KTtiLmFwcGVuZChhLmJ1dHRvblByZXYpLmFwcGVuZChhLmJ1dHRvbk5leHQpO2Iub24oXCJ0b3VjaHN0YXJ0Lm93bENvbnRyb2xzIG1vdXNlZG93bi5vd2xDb250cm9sc1wiLCdkaXZbY2xhc3NePVwib3dsXCJdJyxmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCl9KTtiLm9uKFwidG91Y2hlbmQub3dsQ29udHJvbHMgbW91c2V1cC5vd2xDb250cm9sc1wiLCdkaXZbY2xhc3NePVwib3dsXCJdJyxmdW5jdGlvbihiKXtiLnByZXZlbnREZWZhdWx0KCk7Zih0aGlzKS5oYXNDbGFzcyhcIm93bC1uZXh0XCIpP2EubmV4dCgpOmEucHJldigpfSl9LGJ1aWxkUGFnaW5hdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5wYWdpbmF0aW9uV3JhcHBlcj1cclxuZignPGRpdiBjbGFzcz1cIm93bC1wYWdpbmF0aW9uXCIvPicpO2Eub3dsQ29udHJvbHMuYXBwZW5kKGEucGFnaW5hdGlvbldyYXBwZXIpO2EucGFnaW5hdGlvbldyYXBwZXIub24oXCJ0b3VjaGVuZC5vd2xDb250cm9scyBtb3VzZXVwLm93bENvbnRyb2xzXCIsXCIub3dsLXBhZ2VcIixmdW5jdGlvbihiKXtiLnByZXZlbnREZWZhdWx0KCk7TnVtYmVyKGYodGhpcykuZGF0YShcIm93bC1wYWdlXCIpKSE9PWEuY3VycmVudEl0ZW0mJmEuZ29UbyhOdW1iZXIoZih0aGlzKS5kYXRhKFwib3dsLXBhZ2VcIikpLCEwKX0pfSx1cGRhdGVQYWdpbmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGEsYixlLGMsZCxnO2lmKCExPT09dGhpcy5vcHRpb25zLnBhZ2luYXRpb24pcmV0dXJuITE7dGhpcy5wYWdpbmF0aW9uV3JhcHBlci5odG1sKFwiXCIpO2E9MDtiPXRoaXMuaXRlbXNBbW91bnQtdGhpcy5pdGVtc0Ftb3VudCV0aGlzLm9wdGlvbnMuaXRlbXM7Zm9yKGM9MDtjPHRoaXMuaXRlbXNBbW91bnQ7Yys9MSkwPT09YyV0aGlzLm9wdGlvbnMuaXRlbXMmJlxyXG4oYSs9MSxiPT09YyYmKGU9dGhpcy5pdGVtc0Ftb3VudC10aGlzLm9wdGlvbnMuaXRlbXMpLGQ9ZihcIjxkaXYvPlwiLHtcImNsYXNzXCI6XCJvd2wtcGFnZVwifSksZz1mKFwiPHNwYW4+PC9zcGFuPlwiLHt0ZXh0OiEwPT09dGhpcy5vcHRpb25zLnBhZ2luYXRpb25OdW1iZXJzP2E6XCJcIixcImNsYXNzXCI6ITA9PT10aGlzLm9wdGlvbnMucGFnaW5hdGlvbk51bWJlcnM/XCJvd2wtbnVtYmVyc1wiOlwiXCJ9KSxkLmFwcGVuZChnKSxkLmRhdGEoXCJvd2wtcGFnZVwiLGI9PT1jP2U6YyksZC5kYXRhKFwib3dsLXJvdW5kUGFnZXNcIixhKSx0aGlzLnBhZ2luYXRpb25XcmFwcGVyLmFwcGVuZChkKSk7dGhpcy5jaGVja1BhZ2luYXRpb24oKX0sY2hlY2tQYWdpbmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighMT09PWEub3B0aW9ucy5wYWdpbmF0aW9uKXJldHVybiExO2EucGFnaW5hdGlvbldyYXBwZXIuZmluZChcIi5vd2wtcGFnZVwiKS5lYWNoKGZ1bmN0aW9uKCl7Zih0aGlzKS5kYXRhKFwib3dsLXJvdW5kUGFnZXNcIik9PT1cclxuZihhLiRvd2xJdGVtc1thLmN1cnJlbnRJdGVtXSkuZGF0YShcIm93bC1yb3VuZFBhZ2VzXCIpJiYoYS5wYWdpbmF0aW9uV3JhcHBlci5maW5kKFwiLm93bC1wYWdlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGYodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIikpfSl9LGNoZWNrTmF2aWdhdGlvbjpmdW5jdGlvbigpe2lmKCExPT09dGhpcy5vcHRpb25zLm5hdmlnYXRpb24pcmV0dXJuITE7ITE9PT10aGlzLm9wdGlvbnMucmV3aW5kTmF2JiYoMD09PXRoaXMuY3VycmVudEl0ZW0mJjA9PT10aGlzLm1heGltdW1JdGVtPyh0aGlzLmJ1dHRvblByZXYuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSx0aGlzLmJ1dHRvbk5leHQuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSk6MD09PXRoaXMuY3VycmVudEl0ZW0mJjAhPT10aGlzLm1heGltdW1JdGVtPyh0aGlzLmJ1dHRvblByZXYuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSx0aGlzLmJ1dHRvbk5leHQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSk6dGhpcy5jdXJyZW50SXRlbT09PVxyXG50aGlzLm1heGltdW1JdGVtPyh0aGlzLmJ1dHRvblByZXYucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSx0aGlzLmJ1dHRvbk5leHQuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSk6MCE9PXRoaXMuY3VycmVudEl0ZW0mJnRoaXMuY3VycmVudEl0ZW0hPT10aGlzLm1heGltdW1JdGVtJiYodGhpcy5idXR0b25QcmV2LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIiksdGhpcy5idXR0b25OZXh0LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIikpKX0sdXBkYXRlQ29udHJvbHM6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZVBhZ2luYXRpb24oKTt0aGlzLmNoZWNrTmF2aWdhdGlvbigpO3RoaXMub3dsQ29udHJvbHMmJih0aGlzLm9wdGlvbnMuaXRlbXM+PXRoaXMuaXRlbXNBbW91bnQ/dGhpcy5vd2xDb250cm9scy5oaWRlKCk6dGhpcy5vd2xDb250cm9scy5zaG93KCkpfSxkZXN0cm95Q29udHJvbHM6ZnVuY3Rpb24oKXt0aGlzLm93bENvbnRyb2xzJiZ0aGlzLm93bENvbnRyb2xzLnJlbW92ZSgpfSxuZXh0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNUcmFuc2l0aW9uKXJldHVybiExO1xyXG50aGlzLmN1cnJlbnRJdGVtKz0hMD09PXRoaXMub3B0aW9ucy5zY3JvbGxQZXJQYWdlP3RoaXMub3B0aW9ucy5pdGVtczoxO2lmKHRoaXMuY3VycmVudEl0ZW0+dGhpcy5tYXhpbXVtSXRlbSsoITA9PT10aGlzLm9wdGlvbnMuc2Nyb2xsUGVyUGFnZT90aGlzLm9wdGlvbnMuaXRlbXMtMTowKSlpZighMD09PXRoaXMub3B0aW9ucy5yZXdpbmROYXYpdGhpcy5jdXJyZW50SXRlbT0wLGE9XCJyZXdpbmRcIjtlbHNlIHJldHVybiB0aGlzLmN1cnJlbnRJdGVtPXRoaXMubWF4aW11bUl0ZW0sITE7dGhpcy5nb1RvKHRoaXMuY3VycmVudEl0ZW0sYSl9LHByZXY6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc1RyYW5zaXRpb24pcmV0dXJuITE7dGhpcy5jdXJyZW50SXRlbT0hMD09PXRoaXMub3B0aW9ucy5zY3JvbGxQZXJQYWdlJiYwPHRoaXMuY3VycmVudEl0ZW0mJnRoaXMuY3VycmVudEl0ZW08dGhpcy5vcHRpb25zLml0ZW1zPzA6dGhpcy5jdXJyZW50SXRlbS0oITA9PT10aGlzLm9wdGlvbnMuc2Nyb2xsUGVyUGFnZT9cclxudGhpcy5vcHRpb25zLml0ZW1zOjEpO2lmKDA+dGhpcy5jdXJyZW50SXRlbSlpZighMD09PXRoaXMub3B0aW9ucy5yZXdpbmROYXYpdGhpcy5jdXJyZW50SXRlbT10aGlzLm1heGltdW1JdGVtLGE9XCJyZXdpbmRcIjtlbHNlIHJldHVybiB0aGlzLmN1cnJlbnRJdGVtPTAsITE7dGhpcy5nb1RvKHRoaXMuY3VycmVudEl0ZW0sYSl9LGdvVG86ZnVuY3Rpb24oYSxiLGUpe3ZhciBjPXRoaXM7aWYoYy5pc1RyYW5zaXRpb24pcmV0dXJuITE7XCJmdW5jdGlvblwiPT09dHlwZW9mIGMub3B0aW9ucy5iZWZvcmVNb3ZlJiZjLm9wdGlvbnMuYmVmb3JlTW92ZS5hcHBseSh0aGlzLFtjLiRlbGVtXSk7YT49Yy5tYXhpbXVtSXRlbT9hPWMubWF4aW11bUl0ZW06MD49YSYmKGE9MCk7Yy5jdXJyZW50SXRlbT1jLm93bC5jdXJyZW50SXRlbT1hO2lmKCExIT09Yy5vcHRpb25zLnRyYW5zaXRpb25TdHlsZSYmXCJkcmFnXCIhPT1lJiYxPT09Yy5vcHRpb25zLml0ZW1zJiYhMD09PWMuYnJvd3Nlci5zdXBwb3J0M2QpcmV0dXJuIGMuc3dhcFNwZWVkKDApLFxyXG4hMD09PWMuYnJvd3Nlci5zdXBwb3J0M2Q/Yy50cmFuc2l0aW9uM2QoYy5wb3NpdGlvbnNJbkFycmF5W2FdKTpjLmNzczJzbGlkZShjLnBvc2l0aW9uc0luQXJyYXlbYV0sMSksYy5hZnRlckdvKCksYy5zaW5nbGVJdGVtVHJhbnNpdGlvbigpLCExO2E9Yy5wb3NpdGlvbnNJbkFycmF5W2FdOyEwPT09Yy5icm93c2VyLnN1cHBvcnQzZD8oYy5pc0NzczNGaW5pc2g9ITEsITA9PT1iPyhjLnN3YXBTcGVlZChcInBhZ2luYXRpb25TcGVlZFwiKSxnLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmlzQ3NzM0ZpbmlzaD0hMH0sYy5vcHRpb25zLnBhZ2luYXRpb25TcGVlZCkpOlwicmV3aW5kXCI9PT1iPyhjLnN3YXBTcGVlZChjLm9wdGlvbnMucmV3aW5kU3BlZWQpLGcuc2V0VGltZW91dChmdW5jdGlvbigpe2MuaXNDc3MzRmluaXNoPSEwfSxjLm9wdGlvbnMucmV3aW5kU3BlZWQpKTooYy5zd2FwU3BlZWQoXCJzbGlkZVNwZWVkXCIpLGcuc2V0VGltZW91dChmdW5jdGlvbigpe2MuaXNDc3MzRmluaXNoPSEwfSxcclxuYy5vcHRpb25zLnNsaWRlU3BlZWQpKSxjLnRyYW5zaXRpb24zZChhKSk6ITA9PT1iP2MuY3NzMnNsaWRlKGEsYy5vcHRpb25zLnBhZ2luYXRpb25TcGVlZCk6XCJyZXdpbmRcIj09PWI/Yy5jc3Myc2xpZGUoYSxjLm9wdGlvbnMucmV3aW5kU3BlZWQpOmMuY3NzMnNsaWRlKGEsYy5vcHRpb25zLnNsaWRlU3BlZWQpO2MuYWZ0ZXJHbygpfSxqdW1wVG86ZnVuY3Rpb24oYSl7XCJmdW5jdGlvblwiPT09dHlwZW9mIHRoaXMub3B0aW9ucy5iZWZvcmVNb3ZlJiZ0aGlzLm9wdGlvbnMuYmVmb3JlTW92ZS5hcHBseSh0aGlzLFt0aGlzLiRlbGVtXSk7YT49dGhpcy5tYXhpbXVtSXRlbXx8LTE9PT1hP2E9dGhpcy5tYXhpbXVtSXRlbTowPj1hJiYoYT0wKTt0aGlzLnN3YXBTcGVlZCgwKTshMD09PXRoaXMuYnJvd3Nlci5zdXBwb3J0M2Q/dGhpcy50cmFuc2l0aW9uM2QodGhpcy5wb3NpdGlvbnNJbkFycmF5W2FdKTp0aGlzLmNzczJzbGlkZSh0aGlzLnBvc2l0aW9uc0luQXJyYXlbYV0sMSk7dGhpcy5jdXJyZW50SXRlbT1cclxudGhpcy5vd2wuY3VycmVudEl0ZW09YTt0aGlzLmFmdGVyR28oKX0sYWZ0ZXJHbzpmdW5jdGlvbigpe3RoaXMucHJldkFyci5wdXNoKHRoaXMuY3VycmVudEl0ZW0pO3RoaXMucHJldkl0ZW09dGhpcy5vd2wucHJldkl0ZW09dGhpcy5wcmV2QXJyW3RoaXMucHJldkFyci5sZW5ndGgtMl07dGhpcy5wcmV2QXJyLnNoaWZ0KDApO3RoaXMucHJldkl0ZW0hPT10aGlzLmN1cnJlbnRJdGVtJiYodGhpcy5jaGVja1BhZ2luYXRpb24oKSx0aGlzLmNoZWNrTmF2aWdhdGlvbigpLHRoaXMuZWFjaE1vdmVVcGRhdGUoKSwhMSE9PXRoaXMub3B0aW9ucy5hdXRvUGxheSYmdGhpcy5jaGVja0FwKCkpO1wiZnVuY3Rpb25cIj09PXR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXJNb3ZlJiZ0aGlzLnByZXZJdGVtIT09dGhpcy5jdXJyZW50SXRlbSYmdGhpcy5vcHRpb25zLmFmdGVyTW92ZS5hcHBseSh0aGlzLFt0aGlzLiRlbGVtXSl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmFwU3RhdHVzPVwic3RvcFwiO2cuY2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9QbGF5SW50ZXJ2YWwpfSxcclxuY2hlY2tBcDpmdW5jdGlvbigpe1wic3RvcFwiIT09dGhpcy5hcFN0YXR1cyYmdGhpcy5wbGF5KCl9LHBsYXk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuYXBTdGF0dXM9XCJwbGF5XCI7aWYoITE9PT1hLm9wdGlvbnMuYXV0b1BsYXkpcmV0dXJuITE7Zy5jbGVhckludGVydmFsKGEuYXV0b1BsYXlJbnRlcnZhbCk7YS5hdXRvUGxheUludGVydmFsPWcuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXthLm5leHQoITApfSxhLm9wdGlvbnMuYXV0b1BsYXkpfSxzd2FwU3BlZWQ6ZnVuY3Rpb24oYSl7XCJzbGlkZVNwZWVkXCI9PT1hP3RoaXMuJG93bFdyYXBwZXIuY3NzKHRoaXMuYWRkQ3NzU3BlZWQodGhpcy5vcHRpb25zLnNsaWRlU3BlZWQpKTpcInBhZ2luYXRpb25TcGVlZFwiPT09YT90aGlzLiRvd2xXcmFwcGVyLmNzcyh0aGlzLmFkZENzc1NwZWVkKHRoaXMub3B0aW9ucy5wYWdpbmF0aW9uU3BlZWQpKTpcInN0cmluZ1wiIT09dHlwZW9mIGEmJnRoaXMuJG93bFdyYXBwZXIuY3NzKHRoaXMuYWRkQ3NzU3BlZWQoYSkpfSxcclxuYWRkQ3NzU3BlZWQ6ZnVuY3Rpb24oYSl7cmV0dXJue1wiLXdlYmtpdC10cmFuc2l0aW9uXCI6XCJhbGwgXCIrYStcIm1zIGVhc2VcIixcIi1tb3otdHJhbnNpdGlvblwiOlwiYWxsIFwiK2ErXCJtcyBlYXNlXCIsXCItby10cmFuc2l0aW9uXCI6XCJhbGwgXCIrYStcIm1zIGVhc2VcIix0cmFuc2l0aW9uOlwiYWxsIFwiK2ErXCJtcyBlYXNlXCJ9fSxyZW1vdmVUcmFuc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue1wiLXdlYmtpdC10cmFuc2l0aW9uXCI6XCJcIixcIi1tb3otdHJhbnNpdGlvblwiOlwiXCIsXCItby10cmFuc2l0aW9uXCI6XCJcIix0cmFuc2l0aW9uOlwiXCJ9fSxkb1RyYW5zbGF0ZTpmdW5jdGlvbihhKXtyZXR1cm57XCItd2Via2l0LXRyYW5zZm9ybVwiOlwidHJhbnNsYXRlM2QoXCIrYStcInB4LCAwcHgsIDBweClcIixcIi1tb3otdHJhbnNmb3JtXCI6XCJ0cmFuc2xhdGUzZChcIithK1wicHgsIDBweCwgMHB4KVwiLFwiLW8tdHJhbnNmb3JtXCI6XCJ0cmFuc2xhdGUzZChcIithK1wicHgsIDBweCwgMHB4KVwiLFwiLW1zLXRyYW5zZm9ybVwiOlwidHJhbnNsYXRlM2QoXCIrXHJcbmErXCJweCwgMHB4LCAwcHgpXCIsdHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrYStcInB4LCAwcHgsMHB4KVwifX0sdHJhbnNpdGlvbjNkOmZ1bmN0aW9uKGEpe3RoaXMuJG93bFdyYXBwZXIuY3NzKHRoaXMuZG9UcmFuc2xhdGUoYSkpfSxjc3MybW92ZTpmdW5jdGlvbihhKXt0aGlzLiRvd2xXcmFwcGVyLmNzcyh7bGVmdDphfSl9LGNzczJzbGlkZTpmdW5jdGlvbihhLGIpe3ZhciBlPXRoaXM7ZS5pc0Nzc0ZpbmlzaD0hMTtlLiRvd2xXcmFwcGVyLnN0b3AoITAsITApLmFuaW1hdGUoe2xlZnQ6YX0se2R1cmF0aW9uOmJ8fGUub3B0aW9ucy5zbGlkZVNwZWVkLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ZS5pc0Nzc0ZpbmlzaD0hMH19KX0sY2hlY2tCcm93c2VyOmZ1bmN0aW9uKCl7dmFyIGE9ay5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Euc3R5bGUuY3NzVGV4dD1cIiAgLW1vei10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCk7IC1tcy10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCk7IC1vLXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwcHgsIDBweCwgMHB4KTsgLXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCk7IHRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwcHgsIDBweCwgMHB4KVwiO1xyXG5hPWEuc3R5bGUuY3NzVGV4dC5tYXRjaCgvdHJhbnNsYXRlM2RcXCgwcHgsIDBweCwgMHB4XFwpL2cpO3RoaXMuYnJvd3Nlcj17c3VwcG9ydDNkOm51bGwhPT1hJiYxPT09YS5sZW5ndGgsaXNUb3VjaDpcIm9udG91Y2hzdGFydFwiaW4gZ3x8Zy5uYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50c319LG1vdmVFdmVudHM6ZnVuY3Rpb24oKXtpZighMSE9PXRoaXMub3B0aW9ucy5tb3VzZURyYWd8fCExIT09dGhpcy5vcHRpb25zLnRvdWNoRHJhZyl0aGlzLmdlc3R1cmVzKCksdGhpcy5kaXNhYmxlZEV2ZW50cygpfSxldmVudFR5cGVzOmZ1bmN0aW9uKCl7dmFyIGE9W1wic1wiLFwiZVwiLFwieFwiXTt0aGlzLmV2X3R5cGVzPXt9OyEwPT09dGhpcy5vcHRpb25zLm1vdXNlRHJhZyYmITA9PT10aGlzLm9wdGlvbnMudG91Y2hEcmFnP2E9W1widG91Y2hzdGFydC5vd2wgbW91c2Vkb3duLm93bFwiLFwidG91Y2htb3ZlLm93bCBtb3VzZW1vdmUub3dsXCIsXCJ0b3VjaGVuZC5vd2wgdG91Y2hjYW5jZWwub3dsIG1vdXNldXAub3dsXCJdOlxyXG4hMT09PXRoaXMub3B0aW9ucy5tb3VzZURyYWcmJiEwPT09dGhpcy5vcHRpb25zLnRvdWNoRHJhZz9hPVtcInRvdWNoc3RhcnQub3dsXCIsXCJ0b3VjaG1vdmUub3dsXCIsXCJ0b3VjaGVuZC5vd2wgdG91Y2hjYW5jZWwub3dsXCJdOiEwPT09dGhpcy5vcHRpb25zLm1vdXNlRHJhZyYmITE9PT10aGlzLm9wdGlvbnMudG91Y2hEcmFnJiYoYT1bXCJtb3VzZWRvd24ub3dsXCIsXCJtb3VzZW1vdmUub3dsXCIsXCJtb3VzZXVwLm93bFwiXSk7dGhpcy5ldl90eXBlcy5zdGFydD1hWzBdO3RoaXMuZXZfdHlwZXMubW92ZT1hWzFdO3RoaXMuZXZfdHlwZXMuZW5kPWFbMl19LGRpc2FibGVkRXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy4kZWxlbS5vbihcImRyYWdzdGFydC5vd2xcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCl9KTt0aGlzLiRlbGVtLm9uKFwibW91c2Vkb3duLmRpc2FibGVUZXh0U2VsZWN0XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGYoYS50YXJnZXQpLmlzKFwiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QsIG9wdGlvblwiKX0pfSxcclxuZ2VzdHVyZXM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2lmKHZvaWQgMCE9PWEudG91Y2hlcylyZXR1cm57eDphLnRvdWNoZXNbMF0ucGFnZVgseTphLnRvdWNoZXNbMF0ucGFnZVl9O2lmKHZvaWQgMD09PWEudG91Y2hlcyl7aWYodm9pZCAwIT09YS5wYWdlWClyZXR1cm57eDphLnBhZ2VYLHk6YS5wYWdlWX07aWYodm9pZCAwPT09YS5wYWdlWClyZXR1cm57eDphLmNsaWVudFgseTphLmNsaWVudFl9fX1mdW5jdGlvbiBiKGEpe1wib25cIj09PWE/KGYoaykub24oZC5ldl90eXBlcy5tb3ZlLGUpLGYoaykub24oZC5ldl90eXBlcy5lbmQsYykpOlwib2ZmXCI9PT1hJiYoZihrKS5vZmYoZC5ldl90eXBlcy5tb3ZlKSxmKGspLm9mZihkLmV2X3R5cGVzLmVuZCkpfWZ1bmN0aW9uIGUoYil7Yj1iLm9yaWdpbmFsRXZlbnR8fGJ8fGcuZXZlbnQ7ZC5uZXdQb3NYPWEoYikueC1oLm9mZnNldFg7ZC5uZXdQb3NZPWEoYikueS1oLm9mZnNldFk7ZC5uZXdSZWxhdGl2ZVg9ZC5uZXdQb3NYLWgucmVsYXRpdmVQb3M7XHJcblwiZnVuY3Rpb25cIj09PXR5cGVvZiBkLm9wdGlvbnMuc3RhcnREcmFnZ2luZyYmITAhPT1oLmRyYWdnaW5nJiYwIT09ZC5uZXdSZWxhdGl2ZVgmJihoLmRyYWdnaW5nPSEwLGQub3B0aW9ucy5zdGFydERyYWdnaW5nLmFwcGx5KGQsW2QuJGVsZW1dKSk7KDg8ZC5uZXdSZWxhdGl2ZVh8fC04PmQubmV3UmVsYXRpdmVYKSYmITA9PT1kLmJyb3dzZXIuaXNUb3VjaCYmKHZvaWQgMCE9PWIucHJldmVudERlZmF1bHQ/Yi5wcmV2ZW50RGVmYXVsdCgpOmIucmV0dXJuVmFsdWU9ITEsaC5zbGlkaW5nPSEwKTsoMTA8ZC5uZXdQb3NZfHwtMTA+ZC5uZXdQb3NZKSYmITE9PT1oLnNsaWRpbmcmJmYoaykub2ZmKFwidG91Y2htb3ZlLm93bFwiKTtkLm5ld1Bvc1g9TWF0aC5tYXgoTWF0aC5taW4oZC5uZXdQb3NYLGQubmV3UmVsYXRpdmVYLzUpLGQubWF4aW11bVBpeGVscytkLm5ld1JlbGF0aXZlWC81KTshMD09PWQuYnJvd3Nlci5zdXBwb3J0M2Q/ZC50cmFuc2l0aW9uM2QoZC5uZXdQb3NYKTpkLmNzczJtb3ZlKGQubmV3UG9zWCl9XHJcbmZ1bmN0aW9uIGMoYSl7YT1hLm9yaWdpbmFsRXZlbnR8fGF8fGcuZXZlbnQ7dmFyIGM7YS50YXJnZXQ9YS50YXJnZXR8fGEuc3JjRWxlbWVudDtoLmRyYWdnaW5nPSExOyEwIT09ZC5icm93c2VyLmlzVG91Y2gmJmQuJG93bFdyYXBwZXIucmVtb3ZlQ2xhc3MoXCJncmFiYmluZ1wiKTtkLmRyYWdEaXJlY3Rpb249MD5kLm5ld1JlbGF0aXZlWD9kLm93bC5kcmFnRGlyZWN0aW9uPVwibGVmdFwiOmQub3dsLmRyYWdEaXJlY3Rpb249XCJyaWdodFwiOzAhPT1kLm5ld1JlbGF0aXZlWCYmKGM9ZC5nZXROZXdQb3NpdGlvbigpLGQuZ29UbyhjLCExLFwiZHJhZ1wiKSxoLnRhcmdldEVsZW1lbnQ9PT1hLnRhcmdldCYmITAhPT1kLmJyb3dzZXIuaXNUb3VjaCYmKGYoYS50YXJnZXQpLm9uKFwiY2xpY2suZGlzYWJsZVwiLGZ1bmN0aW9uKGEpe2Euc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7YS5zdG9wUHJvcGFnYXRpb24oKTthLnByZXZlbnREZWZhdWx0KCk7ZihhLnRhcmdldCkub2ZmKFwiY2xpY2suZGlzYWJsZVwiKX0pLFxyXG5hPWYuX2RhdGEoYS50YXJnZXQsXCJldmVudHNcIikuY2xpY2ssYz1hLnBvcCgpLGEuc3BsaWNlKDAsMCxjKSkpO2IoXCJvZmZcIil9dmFyIGQ9dGhpcyxoPXtvZmZzZXRYOjAsb2Zmc2V0WTowLGJhc2VFbFdpZHRoOjAscmVsYXRpdmVQb3M6MCxwb3NpdGlvbjpudWxsLG1pblN3aXBlOm51bGwsbWF4U3dpcGU6bnVsbCxzbGlkaW5nOm51bGwsZGFyZ2dpbmc6bnVsbCx0YXJnZXRFbGVtZW50Om51bGx9O2QuaXNDc3NGaW5pc2g9ITA7ZC4kZWxlbS5vbihkLmV2X3R5cGVzLnN0YXJ0LFwiLm93bC13cmFwcGVyXCIsZnVuY3Rpb24oYyl7Yz1jLm9yaWdpbmFsRXZlbnR8fGN8fGcuZXZlbnQ7dmFyIGU7aWYoMz09PWMud2hpY2gpcmV0dXJuITE7aWYoIShkLml0ZW1zQW1vdW50PD1kLm9wdGlvbnMuaXRlbXMpKXtpZighMT09PWQuaXNDc3NGaW5pc2gmJiFkLm9wdGlvbnMuZHJhZ0JlZm9yZUFuaW1GaW5pc2h8fCExPT09ZC5pc0NzczNGaW5pc2gmJiFkLm9wdGlvbnMuZHJhZ0JlZm9yZUFuaW1GaW5pc2gpcmV0dXJuITE7XHJcbiExIT09ZC5vcHRpb25zLmF1dG9QbGF5JiZnLmNsZWFySW50ZXJ2YWwoZC5hdXRvUGxheUludGVydmFsKTshMD09PWQuYnJvd3Nlci5pc1RvdWNofHxkLiRvd2xXcmFwcGVyLmhhc0NsYXNzKFwiZ3JhYmJpbmdcIil8fGQuJG93bFdyYXBwZXIuYWRkQ2xhc3MoXCJncmFiYmluZ1wiKTtkLm5ld1Bvc1g9MDtkLm5ld1JlbGF0aXZlWD0wO2YodGhpcykuY3NzKGQucmVtb3ZlVHJhbnNpdGlvbigpKTtlPWYodGhpcykucG9zaXRpb24oKTtoLnJlbGF0aXZlUG9zPWUubGVmdDtoLm9mZnNldFg9YShjKS54LWUubGVmdDtoLm9mZnNldFk9YShjKS55LWUudG9wO2IoXCJvblwiKTtoLnNsaWRpbmc9ITE7aC50YXJnZXRFbGVtZW50PWMudGFyZ2V0fHxjLnNyY0VsZW1lbnR9fSl9LGdldE5ld1Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jbG9zZXN0SXRlbSgpO2E+dGhpcy5tYXhpbXVtSXRlbT9hPXRoaXMuY3VycmVudEl0ZW09dGhpcy5tYXhpbXVtSXRlbTowPD10aGlzLm5ld1Bvc1gmJih0aGlzLmN1cnJlbnRJdGVtPVxyXG5hPTApO3JldHVybiBhfSxjbG9zZXN0SXRlbTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj0hMD09PWEub3B0aW9ucy5zY3JvbGxQZXJQYWdlP2EucGFnZXNJbkFycmF5OmEucG9zaXRpb25zSW5BcnJheSxlPWEubmV3UG9zWCxjPW51bGw7Zi5lYWNoKGIsZnVuY3Rpb24oZCxnKXtlLWEuaXRlbVdpZHRoLzIwPmJbZCsxXSYmZS1hLml0ZW1XaWR0aC8yMDxnJiZcImxlZnRcIj09PWEubW92ZURpcmVjdGlvbigpPyhjPWcsYS5jdXJyZW50SXRlbT0hMD09PWEub3B0aW9ucy5zY3JvbGxQZXJQYWdlP2YuaW5BcnJheShjLGEucG9zaXRpb25zSW5BcnJheSk6ZCk6ZSthLml0ZW1XaWR0aC8yMDxnJiZlK2EuaXRlbVdpZHRoLzIwPihiW2QrMV18fGJbZF0tYS5pdGVtV2lkdGgpJiZcInJpZ2h0XCI9PT1hLm1vdmVEaXJlY3Rpb24oKSYmKCEwPT09YS5vcHRpb25zLnNjcm9sbFBlclBhZ2U/KGM9YltkKzFdfHxiW2IubGVuZ3RoLTFdLGEuY3VycmVudEl0ZW09Zi5pbkFycmF5KGMsYS5wb3NpdGlvbnNJbkFycmF5KSk6XHJcbihjPWJbZCsxXSxhLmN1cnJlbnRJdGVtPWQrMSkpfSk7cmV0dXJuIGEuY3VycmVudEl0ZW19LG1vdmVEaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgYTswPnRoaXMubmV3UmVsYXRpdmVYPyhhPVwicmlnaHRcIix0aGlzLnBsYXlEaXJlY3Rpb249XCJuZXh0XCIpOihhPVwibGVmdFwiLHRoaXMucGxheURpcmVjdGlvbj1cInByZXZcIik7cmV0dXJuIGF9LGN1c3RvbUV2ZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS4kZWxlbS5vbihcIm93bC5uZXh0XCIsZnVuY3Rpb24oKXthLm5leHQoKX0pO2EuJGVsZW0ub24oXCJvd2wucHJldlwiLGZ1bmN0aW9uKCl7YS5wcmV2KCl9KTthLiRlbGVtLm9uKFwib3dsLnBsYXlcIixmdW5jdGlvbihiLGUpe2Eub3B0aW9ucy5hdXRvUGxheT1lO2EucGxheSgpO2EuaG92ZXJTdGF0dXM9XCJwbGF5XCJ9KTthLiRlbGVtLm9uKFwib3dsLnN0b3BcIixmdW5jdGlvbigpe2Euc3RvcCgpO2EuaG92ZXJTdGF0dXM9XCJzdG9wXCJ9KTthLiRlbGVtLm9uKFwib3dsLmdvVG9cIixmdW5jdGlvbihiLGUpe2EuZ29UbyhlKX0pO1xyXG5hLiRlbGVtLm9uKFwib3dsLmp1bXBUb1wiLGZ1bmN0aW9uKGIsZSl7YS5qdW1wVG8oZSl9KX0sc3RvcE9uSG92ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzOyEwPT09YS5vcHRpb25zLnN0b3BPbkhvdmVyJiYhMCE9PWEuYnJvd3Nlci5pc1RvdWNoJiYhMSE9PWEub3B0aW9ucy5hdXRvUGxheSYmKGEuJGVsZW0ub24oXCJtb3VzZW92ZXJcIixmdW5jdGlvbigpe2Euc3RvcCgpfSksYS4kZWxlbS5vbihcIm1vdXNlb3V0XCIsZnVuY3Rpb24oKXtcInN0b3BcIiE9PWEuaG92ZXJTdGF0dXMmJmEucGxheSgpfSkpfSxsYXp5TG9hZDpmdW5jdGlvbigpe3ZhciBhLGIsZSxjLGQ7aWYoITE9PT10aGlzLm9wdGlvbnMubGF6eUxvYWQpcmV0dXJuITE7Zm9yKGE9MDthPHRoaXMuaXRlbXNBbW91bnQ7YSs9MSliPWYodGhpcy4kb3dsSXRlbXNbYV0pLFwibG9hZGVkXCIhPT1iLmRhdGEoXCJvd2wtbG9hZGVkXCIpJiYoZT1iLmRhdGEoXCJvd2wtaXRlbVwiKSxjPWIuZmluZChcIi5sYXp5T3dsXCIpLFwic3RyaW5nXCIhPT10eXBlb2YgYy5kYXRhKFwic3JjXCIpP1xyXG5iLmRhdGEoXCJvd2wtbG9hZGVkXCIsXCJsb2FkZWRcIik6KHZvaWQgMD09PWIuZGF0YShcIm93bC1sb2FkZWRcIikmJihjLmhpZGUoKSxiLmFkZENsYXNzKFwibG9hZGluZ1wiKS5kYXRhKFwib3dsLWxvYWRlZFwiLFwiY2hlY2tlZFwiKSksKGQ9ITA9PT10aGlzLm9wdGlvbnMubGF6eUZvbGxvdz9lPj10aGlzLmN1cnJlbnRJdGVtOiEwKSYmZTx0aGlzLmN1cnJlbnRJdGVtK3RoaXMub3B0aW9ucy5pdGVtcyYmYy5sZW5ndGgmJnRoaXMubGF6eVByZWxvYWQoYixjKSkpfSxsYXp5UHJlbG9hZDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGUoKXthLmRhdGEoXCJvd2wtbG9hZGVkXCIsXCJsb2FkZWRcIikucmVtb3ZlQ2xhc3MoXCJsb2FkaW5nXCIpO2IucmVtb3ZlQXR0cihcImRhdGEtc3JjXCIpO1wiZmFkZVwiPT09ZC5vcHRpb25zLmxhenlFZmZlY3Q/Yi5mYWRlSW4oNDAwKTpiLnNob3coKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgZC5vcHRpb25zLmFmdGVyTGF6eUxvYWQmJmQub3B0aW9ucy5hZnRlckxhenlMb2FkLmFwcGx5KHRoaXMsXHJcbltkLiRlbGVtXSl9ZnVuY3Rpb24gYygpe2YrPTE7ZC5jb21wbGV0ZUltZyhiLmdldCgwKSl8fCEwPT09az9lKCk6MTAwPj1mP2cuc2V0VGltZW91dChjLDEwMCk6ZSgpfXZhciBkPXRoaXMsZj0wLGs7XCJESVZcIj09PWIucHJvcChcInRhZ05hbWVcIik/KGIuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKFwiK2IuZGF0YShcInNyY1wiKStcIilcIiksaz0hMCk6YlswXS5zcmM9Yi5kYXRhKFwic3JjXCIpO2MoKX0sYXV0b0hlaWdodDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt2YXIgYT1mKGUuJG93bEl0ZW1zW2UuY3VycmVudEl0ZW1dKS5oZWlnaHQoKTtlLndyYXBwZXJPdXRlci5jc3MoXCJoZWlnaHRcIixhK1wicHhcIik7ZS53cmFwcGVyT3V0ZXIuaGFzQ2xhc3MoXCJhdXRvSGVpZ2h0XCIpfHxnLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLndyYXBwZXJPdXRlci5hZGRDbGFzcyhcImF1dG9IZWlnaHRcIil9LDApfWZ1bmN0aW9uIGIoKXtkKz0xO2UuY29tcGxldGVJbWcoYy5nZXQoMCkpP2EoKToxMDA+PWQ/Zy5zZXRUaW1lb3V0KGIsXHJcbjEwMCk6ZS53cmFwcGVyT3V0ZXIuY3NzKFwiaGVpZ2h0XCIsXCJcIil9dmFyIGU9dGhpcyxjPWYoZS4kb3dsSXRlbXNbZS5jdXJyZW50SXRlbV0pLmZpbmQoXCJpbWdcIiksZDt2b2lkIDAhPT1jLmdldCgwKT8oZD0wLGIoKSk6YSgpfSxjb21wbGV0ZUltZzpmdW5jdGlvbihhKXtyZXR1cm4hYS5jb21wbGV0ZXx8XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhLm5hdHVyYWxXaWR0aCYmMD09PWEubmF0dXJhbFdpZHRoPyExOiEwfSxvblZpc2libGVJdGVtczpmdW5jdGlvbigpe3ZhciBhOyEwPT09dGhpcy5vcHRpb25zLmFkZENsYXNzQWN0aXZlJiZ0aGlzLiRvd2xJdGVtcy5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTt0aGlzLnZpc2libGVJdGVtcz1bXTtmb3IoYT10aGlzLmN1cnJlbnRJdGVtO2E8dGhpcy5jdXJyZW50SXRlbSt0aGlzLm9wdGlvbnMuaXRlbXM7YSs9MSl0aGlzLnZpc2libGVJdGVtcy5wdXNoKGEpLCEwPT09dGhpcy5vcHRpb25zLmFkZENsYXNzQWN0aXZlJiZmKHRoaXMuJG93bEl0ZW1zW2FdKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxudGhpcy5vd2wudmlzaWJsZUl0ZW1zPXRoaXMudmlzaWJsZUl0ZW1zfSx0cmFuc2l0aW9uVHlwZXM6ZnVuY3Rpb24oYSl7dGhpcy5vdXRDbGFzcz1cIm93bC1cIithK1wiLW91dFwiO3RoaXMuaW5DbGFzcz1cIm93bC1cIithK1wiLWluXCJ9LHNpbmdsZUl0ZW1UcmFuc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEub3V0Q2xhc3MsZT1hLmluQ2xhc3MsYz1hLiRvd2xJdGVtcy5lcShhLmN1cnJlbnRJdGVtKSxkPWEuJG93bEl0ZW1zLmVxKGEucHJldkl0ZW0pLGY9TWF0aC5hYnMoYS5wb3NpdGlvbnNJbkFycmF5W2EuY3VycmVudEl0ZW1dKSthLnBvc2l0aW9uc0luQXJyYXlbYS5wcmV2SXRlbV0sZz1NYXRoLmFicyhhLnBvc2l0aW9uc0luQXJyYXlbYS5jdXJyZW50SXRlbV0pK2EuaXRlbVdpZHRoLzI7YS5pc1RyYW5zaXRpb249ITA7YS4kb3dsV3JhcHBlci5hZGRDbGFzcyhcIm93bC1vcmlnaW5cIikuY3NzKHtcIi13ZWJraXQtdHJhbnNmb3JtLW9yaWdpblwiOmcrXCJweFwiLFwiLW1vei1wZXJzcGVjdGl2ZS1vcmlnaW5cIjpnK1xyXG5cInB4XCIsXCJwZXJzcGVjdGl2ZS1vcmlnaW5cIjpnK1wicHhcIn0pO2QuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsbGVmdDpmK1wicHhcIn0pLmFkZENsYXNzKGIpLm9uKFwid2Via2l0QW5pbWF0aW9uRW5kIG9BbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kXCIsZnVuY3Rpb24oKXthLmVuZFByZXY9ITA7ZC5vZmYoXCJ3ZWJraXRBbmltYXRpb25FbmQgb0FuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmRcIik7YS5jbGVhclRyYW5zU3R5bGUoZCxiKX0pO2MuYWRkQ2xhc3MoZSkub24oXCJ3ZWJraXRBbmltYXRpb25FbmQgb0FuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmRcIixmdW5jdGlvbigpe2EuZW5kQ3VycmVudD0hMDtjLm9mZihcIndlYmtpdEFuaW1hdGlvbkVuZCBvQW5pbWF0aW9uRW5kIE1TQW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZFwiKTthLmNsZWFyVHJhbnNTdHlsZShjLGUpfSl9LGNsZWFyVHJhbnNTdHlsZTpmdW5jdGlvbihhLFxyXG5iKXthLmNzcyh7cG9zaXRpb246XCJcIixsZWZ0OlwiXCJ9KS5yZW1vdmVDbGFzcyhiKTt0aGlzLmVuZFByZXYmJnRoaXMuZW5kQ3VycmVudCYmKHRoaXMuJG93bFdyYXBwZXIucmVtb3ZlQ2xhc3MoXCJvd2wtb3JpZ2luXCIpLHRoaXMuaXNUcmFuc2l0aW9uPXRoaXMuZW5kQ3VycmVudD10aGlzLmVuZFByZXY9ITEpfSxvd2xTdGF0dXM6ZnVuY3Rpb24oKXt0aGlzLm93bD17dXNlck9wdGlvbnM6dGhpcy51c2VyT3B0aW9ucyxiYXNlRWxlbWVudDp0aGlzLiRlbGVtLHVzZXJJdGVtczp0aGlzLiR1c2VySXRlbXMsb3dsSXRlbXM6dGhpcy4kb3dsSXRlbXMsY3VycmVudEl0ZW06dGhpcy5jdXJyZW50SXRlbSxwcmV2SXRlbTp0aGlzLnByZXZJdGVtLHZpc2libGVJdGVtczp0aGlzLnZpc2libGVJdGVtcyxpc1RvdWNoOnRoaXMuYnJvd3Nlci5pc1RvdWNoLGJyb3dzZXI6dGhpcy5icm93c2VyLGRyYWdEaXJlY3Rpb246dGhpcy5kcmFnRGlyZWN0aW9ufX0sY2xlYXJFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLiRlbGVtLm9mZihcIi5vd2wgb3dsIG1vdXNlZG93bi5kaXNhYmxlVGV4dFNlbGVjdFwiKTtcclxuZihrKS5vZmYoXCIub3dsIG93bFwiKTtmKGcpLm9mZihcInJlc2l6ZVwiLHRoaXMucmVzaXplcil9LHVuV3JhcDpmdW5jdGlvbigpezAhPT10aGlzLiRlbGVtLmNoaWxkcmVuKCkubGVuZ3RoJiYodGhpcy4kb3dsV3JhcHBlci51bndyYXAoKSx0aGlzLiR1c2VySXRlbXMudW53cmFwKCkudW53cmFwKCksdGhpcy5vd2xDb250cm9scyYmdGhpcy5vd2xDb250cm9scy5yZW1vdmUoKSk7dGhpcy5jbGVhckV2ZW50cygpO3RoaXMuJGVsZW0uYXR0cihcInN0eWxlXCIsdGhpcy4kZWxlbS5kYXRhKFwib3dsLW9yaWdpbmFsU3R5bGVzXCIpfHxcIlwiKS5hdHRyKFwiY2xhc3NcIix0aGlzLiRlbGVtLmRhdGEoXCJvd2wtb3JpZ2luYWxDbGFzc2VzXCIpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuc3RvcCgpO2cuY2xlYXJJbnRlcnZhbCh0aGlzLmNoZWNrVmlzaWJsZSk7dGhpcy51bldyYXAoKTt0aGlzLiRlbGVtLnJlbW92ZURhdGEoKX0scmVpbml0OmZ1bmN0aW9uKGEpe2E9Zi5leHRlbmQoe30sdGhpcy51c2VyT3B0aW9ucyxcclxuYSk7dGhpcy51bldyYXAoKTt0aGlzLmluaXQoYSx0aGlzLiRlbGVtKX0sYWRkSXRlbTpmdW5jdGlvbihhLGIpe3ZhciBlO2lmKCFhKXJldHVybiExO2lmKDA9PT10aGlzLiRlbGVtLmNoaWxkcmVuKCkubGVuZ3RoKXJldHVybiB0aGlzLiRlbGVtLmFwcGVuZChhKSx0aGlzLnNldFZhcnMoKSwhMTt0aGlzLnVuV3JhcCgpO2U9dm9pZCAwPT09Ynx8LTE9PT1iPy0xOmI7ZT49dGhpcy4kdXNlckl0ZW1zLmxlbmd0aHx8LTE9PT1lP3RoaXMuJHVzZXJJdGVtcy5lcSgtMSkuYWZ0ZXIoYSk6dGhpcy4kdXNlckl0ZW1zLmVxKGUpLmJlZm9yZShhKTt0aGlzLnNldFZhcnMoKX0scmVtb3ZlSXRlbTpmdW5jdGlvbihhKXtpZigwPT09dGhpcy4kZWxlbS5jaGlsZHJlbigpLmxlbmd0aClyZXR1cm4hMTthPXZvaWQgMD09PWF8fC0xPT09YT8tMTphO3RoaXMudW5XcmFwKCk7dGhpcy4kdXNlckl0ZW1zLmVxKGEpLnJlbW92ZSgpO3RoaXMuc2V0VmFycygpfX07Zi5mbi5vd2xDYXJvdXNlbD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoITA9PT1cclxuZih0aGlzKS5kYXRhKFwib3dsLWluaXRcIikpcmV0dXJuITE7Zih0aGlzKS5kYXRhKFwib3dsLWluaXRcIiwhMCk7dmFyIGI9T2JqZWN0LmNyZWF0ZShsKTtiLmluaXQoYSx0aGlzKTtmLmRhdGEodGhpcyxcIm93bENhcm91c2VsXCIsYil9KX07Zi5mbi5vd2xDYXJvdXNlbC5vcHRpb25zPXtpdGVtczo1LGl0ZW1zQ3VzdG9tOiExLGl0ZW1zRGVza3RvcDpbMTE5OSw0XSxpdGVtc0Rlc2t0b3BTbWFsbDpbOTc5LDNdLGl0ZW1zVGFibGV0Ols3NjgsMl0saXRlbXNUYWJsZXRTbWFsbDohMSxpdGVtc01vYmlsZTpbNDc5LDFdLHNpbmdsZUl0ZW06ITEsaXRlbXNTY2FsZVVwOiExLHNsaWRlU3BlZWQ6MjAwLHBhZ2luYXRpb25TcGVlZDo4MDAscmV3aW5kU3BlZWQ6MUUzLGF1dG9QbGF5OiExLHN0b3BPbkhvdmVyOiExLG5hdmlnYXRpb246ITEsbmF2aWdhdGlvblRleHQ6W1wicHJldlwiLFwibmV4dFwiXSxyZXdpbmROYXY6ITAsc2Nyb2xsUGVyUGFnZTohMSxwYWdpbmF0aW9uOiEwLHBhZ2luYXRpb25OdW1iZXJzOiExLFxyXG5yZXNwb25zaXZlOiEwLHJlc3BvbnNpdmVSZWZyZXNoUmF0ZToyMDAscmVzcG9uc2l2ZUJhc2VXaWR0aDpnLGJhc2VDbGFzczpcIm93bC1jYXJvdXNlbFwiLHRoZW1lOlwib3dsLXRoZW1lXCIsbGF6eUxvYWQ6ITEsbGF6eUZvbGxvdzohMCxsYXp5RWZmZWN0OlwiZmFkZVwiLGF1dG9IZWlnaHQ6ITEsanNvblBhdGg6ITEsanNvblN1Y2Nlc3M6ITEsZHJhZ0JlZm9yZUFuaW1GaW5pc2g6ITAsbW91c2VEcmFnOiEwLHRvdWNoRHJhZzohMCxhZGRDbGFzc0FjdGl2ZTohMSx0cmFuc2l0aW9uU3R5bGU6ITEsYmVmb3JlVXBkYXRlOiExLGFmdGVyVXBkYXRlOiExLGJlZm9yZUluaXQ6ITEsYWZ0ZXJJbml0OiExLGJlZm9yZU1vdmU6ITEsYWZ0ZXJNb3ZlOiExLGFmdGVyQWN0aW9uOiExLHN0YXJ0RHJhZ2dpbmc6ITEsYWZ0ZXJMYXp5TG9hZDohMX19KShqUXVlcnksd2luZG93LGRvY3VtZW50KTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBcImxvYWRqUXVlcnlQbHVnaW5cIjogZnVuY3Rpb24oKSB7cmVxdWlyZShcIi4vb3dsLmNhcm91c2VsLm1pbi5qc1wiKTt9XHJcbn07XHJcbiIsIi8qKlxuICogU2ltcGxlLCBsaWdodHdlaWdodCwgdXNhYmxlIGxvY2FsIGF1dG9jb21wbGV0ZSBsaWJyYXJ5IGZvciBtb2Rlcm4gYnJvd3NlcnNcbiAqIEJlY2F1c2UgdGhlcmUgd2VyZW7igJl0IGVub3VnaCBhdXRvY29tcGxldGUgc2NyaXB0cyBpbiB0aGUgd29ybGQ/IEJlY2F1c2UgSeKAmW0gY29tcGxldGVseSBpbnNhbmUgYW5kIGhhdmUgTklIIHN5bmRyb21lPyBQcm9iYWJseSBib3RoLiA6UFxuICogQGF1dGhvciBMZWEgVmVyb3UgaHR0cDovL2xlYXZlcm91LmdpdGh1Yi5pby9hd2Vzb21wbGV0ZVxuICogTUlUIGxpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXG52YXIgXyA9IGZ1bmN0aW9uIChpbnB1dCwgbykge1xuXHR2YXIgbWUgPSB0aGlzO1xuXG5cdC8vIFNldHVwXG5cblx0dGhpcy5pc09wZW5lZCA9IGZhbHNlO1xuXG5cdHRoaXMuaW5wdXQgPSAkKGlucHV0KTtcblx0dGhpcy5pbnB1dC5zZXRBdHRyaWJ1dGUoXCJhdXRvY29tcGxldGVcIiwgXCJvZmZcIik7XG5cdHRoaXMuaW5wdXQuc2V0QXR0cmlidXRlKFwiYXJpYS1hdXRvY29tcGxldGVcIiwgXCJsaXN0XCIpO1xuXG5cdG8gPSBvIHx8IHt9O1xuXG5cdGNvbmZpZ3VyZSh0aGlzLCB7XG5cdFx0bWluQ2hhcnM6IDIsXG5cdFx0bWF4SXRlbXM6IDEwLFxuXHRcdGF1dG9GaXJzdDogZmFsc2UsXG5cdFx0ZGF0YTogXy5EQVRBLFxuXHRcdGZpbHRlcjogXy5GSUxURVJfQ09OVEFJTlMsXG5cdFx0c29ydDogby5zb3J0ID09PSBmYWxzZSA/IGZhbHNlIDogXy5TT1JUX0JZTEVOR1RILFxuXHRcdGl0ZW06IF8uSVRFTSxcblx0XHRyZXBsYWNlOiBfLlJFUExBQ0Vcblx0fSwgbyk7XG5cblx0dGhpcy5pbmRleCA9IC0xO1xuXG5cdC8vIENyZWF0ZSBuZWNlc3NhcnkgZWxlbWVudHNcblxuXHR0aGlzLmNvbnRhaW5lciA9ICQuY3JlYXRlKFwiZGl2XCIsIHtcblx0XHRjbGFzc05hbWU6IFwiYXdlc29tcGxldGVcIixcblx0XHRhcm91bmQ6IGlucHV0XG5cdH0pO1xuXG5cdHRoaXMudWwgPSAkLmNyZWF0ZShcInVsXCIsIHtcblx0XHRoaWRkZW46IFwiaGlkZGVuXCIsXG5cdFx0aW5zaWRlOiB0aGlzLmNvbnRhaW5lclxuXHR9KTtcblxuXHR0aGlzLnN0YXR1cyA9ICQuY3JlYXRlKFwic3BhblwiLCB7XG5cdFx0Y2xhc3NOYW1lOiBcInZpc3VhbGx5LWhpZGRlblwiLFxuXHRcdHJvbGU6IFwic3RhdHVzXCIsXG5cdFx0XCJhcmlhLWxpdmVcIjogXCJhc3NlcnRpdmVcIixcblx0XHRcImFyaWEtcmVsZXZhbnRcIjogXCJhZGRpdGlvbnNcIixcblx0XHRpbnNpZGU6IHRoaXMuY29udGFpbmVyXG5cdH0pO1xuXG5cdC8vIEJpbmQgZXZlbnRzXG5cblx0dGhpcy5fZXZlbnRzID0ge1xuXHRcdGlucHV0OiB7XG5cdFx0XHRcImlucHV0XCI6IHRoaXMuZXZhbHVhdGUuYmluZCh0aGlzKSxcblx0XHRcdFwiYmx1clwiOiB0aGlzLmNsb3NlLmJpbmQodGhpcywgeyByZWFzb246IFwiYmx1clwiIH0pLFxuXHRcdFx0XCJrZXlkb3duXCI6IGZ1bmN0aW9uKGV2dCkge1xuXHRcdFx0XHR2YXIgYyA9IGV2dC5rZXlDb2RlO1xuXG5cdFx0XHRcdC8vIElmIHRoZSBkcm9wZG93biBgdWxgIGlzIGluIHZpZXcsIHRoZW4gYWN0IG9uIGtleWRvd24gZm9yIHRoZSBmb2xsb3dpbmcga2V5czpcblx0XHRcdFx0Ly8gRW50ZXIgLyBFc2MgLyBVcCAvIERvd25cblx0XHRcdFx0aWYobWUub3BlbmVkKSB7XG5cdFx0XHRcdFx0aWYgKGMgPT09IDEzICYmIG1lLnNlbGVjdGVkKSB7IC8vIEVudGVyXG5cdFx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdG1lLnNlbGVjdCgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIGlmIChjID09PSAyNykgeyAvLyBFc2Ncblx0XHRcdFx0XHRcdG1lLmNsb3NlKHsgcmVhc29uOiBcImVzY1wiIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIGlmIChjID09PSAzOCB8fCBjID09PSA0MCkgeyAvLyBEb3duL1VwIGFycm93XG5cdFx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdG1lW2MgPT09IDM4PyBcInByZXZpb3VzXCIgOiBcIm5leHRcIl0oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdGZvcm06IHtcblx0XHRcdFwic3VibWl0XCI6IHRoaXMuY2xvc2UuYmluZCh0aGlzLCB7IHJlYXNvbjogXCJzdWJtaXRcIiB9KVxuXHRcdH0sXG5cdFx0dWw6IHtcblx0XHRcdFwibW91c2Vkb3duXCI6IGZ1bmN0aW9uKGV2dCkge1xuXHRcdFx0XHR2YXIgbGkgPSBldnQudGFyZ2V0O1xuXG5cdFx0XHRcdGlmIChsaSAhPT0gdGhpcykge1xuXG5cdFx0XHRcdFx0d2hpbGUgKGxpICYmICEvbGkvaS50ZXN0KGxpLm5vZGVOYW1lKSkge1xuXHRcdFx0XHRcdFx0bGkgPSBsaS5wYXJlbnROb2RlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChsaSAmJiBldnQuYnV0dG9uID09PSAwKSB7ICAvLyBPbmx5IHNlbGVjdCBvbiBsZWZ0IGNsaWNrXG5cdFx0XHRcdFx0XHRldnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdG1lLnNlbGVjdChsaSwgZXZ0LnRhcmdldCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXG5cdCQuYmluZCh0aGlzLmlucHV0LCB0aGlzLl9ldmVudHMuaW5wdXQpO1xuXHQkLmJpbmQodGhpcy5pbnB1dC5mb3JtLCB0aGlzLl9ldmVudHMuZm9ybSk7XG5cdCQuYmluZCh0aGlzLnVsLCB0aGlzLl9ldmVudHMudWwpO1xuXG5cdGlmICh0aGlzLmlucHV0Lmhhc0F0dHJpYnV0ZShcImxpc3RcIikpIHtcblx0XHR0aGlzLmxpc3QgPSBcIiNcIiArIHRoaXMuaW5wdXQuZ2V0QXR0cmlidXRlKFwibGlzdFwiKTtcblx0XHR0aGlzLmlucHV0LnJlbW92ZUF0dHJpYnV0ZShcImxpc3RcIik7XG5cdH1cblx0ZWxzZSB7XG5cdFx0dGhpcy5saXN0ID0gdGhpcy5pbnB1dC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWxpc3RcIikgfHwgby5saXN0IHx8IFtdO1xuXHR9XG5cblx0Xy5hbGwucHVzaCh0aGlzKTtcbn07XG5cbl8ucHJvdG90eXBlID0ge1xuXHRzZXQgbGlzdChsaXN0KSB7XG5cdFx0aWYgKEFycmF5LmlzQXJyYXkobGlzdCkpIHtcblx0XHRcdHRoaXMuX2xpc3QgPSBsaXN0O1xuXHRcdH1cblx0XHRlbHNlIGlmICh0eXBlb2YgbGlzdCA9PT0gXCJzdHJpbmdcIiAmJiBsaXN0LmluZGV4T2YoXCIsXCIpID4gLTEpIHtcblx0XHRcdFx0dGhpcy5fbGlzdCA9IGxpc3Quc3BsaXQoL1xccyosXFxzKi8pO1xuXHRcdH1cblx0XHRlbHNlIHsgLy8gRWxlbWVudCBvciBDU1Mgc2VsZWN0b3Jcblx0XHRcdGxpc3QgPSAkKGxpc3QpO1xuXG5cdFx0XHRpZiAobGlzdCAmJiBsaXN0LmNoaWxkcmVuKSB7XG5cdFx0XHRcdHZhciBpdGVtcyA9IFtdO1xuXHRcdFx0XHRzbGljZS5hcHBseShsaXN0LmNoaWxkcmVuKS5mb3JFYWNoKGZ1bmN0aW9uIChlbCkge1xuXHRcdFx0XHRcdGlmICghZWwuZGlzYWJsZWQpIHtcblx0XHRcdFx0XHRcdHZhciB0ZXh0ID0gZWwudGV4dENvbnRlbnQudHJpbSgpO1xuXHRcdFx0XHRcdFx0dmFyIHZhbHVlID0gZWwudmFsdWUgfHwgdGV4dDtcblx0XHRcdFx0XHRcdHZhciBsYWJlbCA9IGVsLmxhYmVsIHx8IHRleHQ7XG5cdFx0XHRcdFx0XHRpZiAodmFsdWUgIT09IFwiXCIpIHtcblx0XHRcdFx0XHRcdFx0aXRlbXMucHVzaCh7IGxhYmVsOiBsYWJlbCwgdmFsdWU6IHZhbHVlIH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdHRoaXMuX2xpc3QgPSBpdGVtcztcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCA9PT0gdGhpcy5pbnB1dCkge1xuXHRcdFx0dGhpcy5ldmFsdWF0ZSgpO1xuXHRcdH1cblx0fSxcblxuXHRnZXQgc2VsZWN0ZWQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuaW5kZXggPiAtMTtcblx0fSxcblxuXHRnZXQgb3BlbmVkKCkge1xuXHRcdHJldHVybiB0aGlzLmlzT3BlbmVkO1xuXHR9LFxuXG5cdGNsb3NlOiBmdW5jdGlvbiAobykge1xuXHRcdGlmICghdGhpcy5vcGVuZWQpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGlzLnVsLnNldEF0dHJpYnV0ZShcImhpZGRlblwiLCBcIlwiKTtcblx0XHR0aGlzLmlzT3BlbmVkID0gZmFsc2U7XG5cdFx0dGhpcy5pbmRleCA9IC0xO1xuXG5cdFx0JC5maXJlKHRoaXMuaW5wdXQsIFwiYXdlc29tcGxldGUtY2xvc2VcIiwgbyB8fCB7fSk7XG5cdH0sXG5cblx0b3BlbjogZnVuY3Rpb24gKCkge1xuXHRcdHRoaXMudWwucmVtb3ZlQXR0cmlidXRlKFwiaGlkZGVuXCIpO1xuXHRcdHRoaXMuaXNPcGVuZWQgPSB0cnVlO1xuXG5cdFx0aWYgKHRoaXMuYXV0b0ZpcnN0ICYmIHRoaXMuaW5kZXggPT09IC0xKSB7XG5cdFx0XHR0aGlzLmdvdG8oMCk7XG5cdFx0fVxuXG5cdFx0JC5maXJlKHRoaXMuaW5wdXQsIFwiYXdlc29tcGxldGUtb3BlblwiKTtcblx0fSxcblxuXHRkZXN0cm95OiBmdW5jdGlvbigpIHtcblx0XHQvL3JlbW92ZSBldmVudHMgZnJvbSB0aGUgaW5wdXQgYW5kIGl0cyBmb3JtXG5cdFx0JC51bmJpbmQodGhpcy5pbnB1dCwgdGhpcy5fZXZlbnRzLmlucHV0KTtcblx0XHQkLnVuYmluZCh0aGlzLmlucHV0LmZvcm0sIHRoaXMuX2V2ZW50cy5mb3JtKTtcblxuXHRcdC8vbW92ZSB0aGUgaW5wdXQgb3V0IG9mIHRoZSBhd2Vzb21wbGV0ZSBjb250YWluZXIgYW5kIHJlbW92ZSB0aGUgY29udGFpbmVyIGFuZCBpdHMgY2hpbGRyZW5cblx0XHR2YXIgcGFyZW50Tm9kZSA9IHRoaXMuY29udGFpbmVyLnBhcmVudE5vZGU7XG5cblx0XHRwYXJlbnROb2RlLmluc2VydEJlZm9yZSh0aGlzLmlucHV0LCB0aGlzLmNvbnRhaW5lcik7XG5cdFx0cGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG5cblx0XHQvL3JlbW92ZSBhdXRvY29tcGxldGUgYW5kIGFyaWEtYXV0b2NvbXBsZXRlIGF0dHJpYnV0ZXNcblx0XHR0aGlzLmlucHV0LnJlbW92ZUF0dHJpYnV0ZShcImF1dG9jb21wbGV0ZVwiKTtcblx0XHR0aGlzLmlucHV0LnJlbW92ZUF0dHJpYnV0ZShcImFyaWEtYXV0b2NvbXBsZXRlXCIpO1xuXG5cdFx0Ly9yZW1vdmUgdGhpcyBhd2Vzb21lcGxldGUgaW5zdGFuY2UgZnJvbSB0aGUgZ2xvYmFsIGFycmF5IG9mIGluc3RhbmNlc1xuXHRcdHZhciBpbmRleE9mQXdlc29tcGxldGUgPSBfLmFsbC5pbmRleE9mKHRoaXMpO1xuXG5cdFx0aWYgKGluZGV4T2ZBd2Vzb21wbGV0ZSAhPT0gLTEpIHtcblx0XHRcdF8uYWxsLnNwbGljZShpbmRleE9mQXdlc29tcGxldGUsIDEpO1xuXHRcdH1cblx0fSxcblxuXHRuZXh0OiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIGNvdW50ID0gdGhpcy51bC5jaGlsZHJlbi5sZW5ndGg7XG5cdFx0dGhpcy5nb3RvKHRoaXMuaW5kZXggPCBjb3VudCAtIDEgPyB0aGlzLmluZGV4ICsgMSA6IChjb3VudCA/IDAgOiAtMSkgKTtcblx0fSxcblxuXHRwcmV2aW91czogZnVuY3Rpb24gKCkge1xuXHRcdHZhciBjb3VudCA9IHRoaXMudWwuY2hpbGRyZW4ubGVuZ3RoO1xuXHRcdHZhciBwb3MgPSB0aGlzLmluZGV4IC0gMTtcblxuXHRcdHRoaXMuZ290byh0aGlzLnNlbGVjdGVkICYmIHBvcyAhPT0gLTEgPyBwb3MgOiBjb3VudCAtIDEpO1xuXHR9LFxuXG5cdC8vIFNob3VsZCBub3QgYmUgdXNlZCwgaGlnaGxpZ2h0cyBzcGVjaWZpYyBpdGVtIHdpdGhvdXQgYW55IGNoZWNrcyFcblx0Z290bzogZnVuY3Rpb24gKGkpIHtcblx0XHR2YXIgbGlzID0gdGhpcy51bC5jaGlsZHJlbjtcblxuXHRcdGlmICh0aGlzLnNlbGVjdGVkKSB7XG5cdFx0XHRsaXNbdGhpcy5pbmRleF0uc2V0QXR0cmlidXRlKFwiYXJpYS1zZWxlY3RlZFwiLCBcImZhbHNlXCIpO1xuXHRcdH1cblxuXHRcdHRoaXMuaW5kZXggPSBpO1xuXG5cdFx0aWYgKGkgPiAtMSAmJiBsaXMubGVuZ3RoID4gMCkge1xuXHRcdFx0bGlzW2ldLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwgXCJ0cnVlXCIpO1xuXHRcdFx0dGhpcy5zdGF0dXMudGV4dENvbnRlbnQgPSBsaXNbaV0udGV4dENvbnRlbnQ7XG5cblx0XHRcdC8vIHNjcm9sbCB0byBoaWdobGlnaHRlZCBlbGVtZW50IGluIGNhc2UgcGFyZW50J3MgaGVpZ2h0IGlzIGZpeGVkXG5cdFx0XHR0aGlzLnVsLnNjcm9sbFRvcCA9IGxpc1tpXS5vZmZzZXRUb3AgLSB0aGlzLnVsLmNsaWVudEhlaWdodCArIGxpc1tpXS5jbGllbnRIZWlnaHQ7XG5cblx0XHRcdCQuZmlyZSh0aGlzLmlucHV0LCBcImF3ZXNvbXBsZXRlLWhpZ2hsaWdodFwiLCB7XG5cdFx0XHRcdHRleHQ6IHRoaXMuc3VnZ2VzdGlvbnNbdGhpcy5pbmRleF1cblx0XHRcdH0pO1xuXHRcdH1cblx0fSxcblxuXHRzZWxlY3Q6IGZ1bmN0aW9uIChzZWxlY3RlZCwgb3JpZ2luKSB7XG5cdFx0aWYgKHNlbGVjdGVkKSB7XG5cdFx0XHR0aGlzLmluZGV4ID0gJC5zaWJsaW5nSW5kZXgoc2VsZWN0ZWQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzZWxlY3RlZCA9IHRoaXMudWwuY2hpbGRyZW5bdGhpcy5pbmRleF07XG5cdFx0fVxuXG5cdFx0aWYgKHNlbGVjdGVkKSB7XG5cdFx0XHR2YXIgc3VnZ2VzdGlvbiA9IHRoaXMuc3VnZ2VzdGlvbnNbdGhpcy5pbmRleF07XG5cblx0XHRcdHZhciBhbGxvd2VkID0gJC5maXJlKHRoaXMuaW5wdXQsIFwiYXdlc29tcGxldGUtc2VsZWN0XCIsIHtcblx0XHRcdFx0dGV4dDogc3VnZ2VzdGlvbixcblx0XHRcdFx0b3JpZ2luOiBvcmlnaW4gfHwgc2VsZWN0ZWRcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoYWxsb3dlZCkge1xuXHRcdFx0XHR0aGlzLnJlcGxhY2Uoc3VnZ2VzdGlvbik7XG5cdFx0XHRcdHRoaXMuY2xvc2UoeyByZWFzb246IFwic2VsZWN0XCIgfSk7XG5cdFx0XHRcdCQuZmlyZSh0aGlzLmlucHV0LCBcImF3ZXNvbXBsZXRlLXNlbGVjdGNvbXBsZXRlXCIsIHtcblx0XHRcdFx0XHR0ZXh0OiBzdWdnZXN0aW9uXG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRldmFsdWF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG1lID0gdGhpcztcblx0XHR2YXIgdmFsdWUgPSB0aGlzLmlucHV0LnZhbHVlO1xuXG5cdFx0aWYgKHZhbHVlLmxlbmd0aCA+PSB0aGlzLm1pbkNoYXJzICYmIHRoaXMuX2xpc3QubGVuZ3RoID4gMCkge1xuXHRcdFx0dGhpcy5pbmRleCA9IC0xO1xuXHRcdFx0Ly8gUG9wdWxhdGUgbGlzdCB3aXRoIG9wdGlvbnMgdGhhdCBtYXRjaFxuXHRcdFx0dGhpcy51bC5pbm5lckhUTUwgPSBcIlwiO1xuXG5cdFx0XHR0aGlzLnN1Z2dlc3Rpb25zID0gdGhpcy5fbGlzdFxuXHRcdFx0XHQubWFwKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFN1Z2dlc3Rpb24obWUuZGF0YShpdGVtLCB2YWx1ZSkpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHQuZmlsdGVyKGZ1bmN0aW9uKGl0ZW0pIHtcblx0XHRcdFx0XHRyZXR1cm4gbWUuZmlsdGVyKGl0ZW0sIHZhbHVlKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdGlmICh0aGlzLnNvcnQgIT09IGZhbHNlKSB7XG5cdFx0XHRcdHRoaXMuc3VnZ2VzdGlvbnMgPSB0aGlzLnN1Z2dlc3Rpb25zLnNvcnQodGhpcy5zb3J0KTtcblx0XHRcdH1cblxuXHRcdFx0dGhpcy5zdWdnZXN0aW9ucyA9IHRoaXMuc3VnZ2VzdGlvbnMuc2xpY2UoMCwgdGhpcy5tYXhJdGVtcyk7XG5cblx0XHRcdHRoaXMuc3VnZ2VzdGlvbnMuZm9yRWFjaChmdW5jdGlvbih0ZXh0KSB7XG5cdFx0XHRcdFx0bWUudWwuYXBwZW5kQ2hpbGQobWUuaXRlbSh0ZXh0LCB2YWx1ZSkpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0aWYgKHRoaXMudWwuY2hpbGRyZW4ubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdHRoaXMuY2xvc2UoeyByZWFzb246IFwibm9tYXRjaGVzXCIgfSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLm9wZW4oKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHR0aGlzLmNsb3NlKHsgcmVhc29uOiBcIm5vbWF0Y2hlc1wiIH0pO1xuXHRcdH1cblx0fVxufTtcblxuLy8gU3RhdGljIG1ldGhvZHMvcHJvcGVydGllc1xuXG5fLmFsbCA9IFtdO1xuXG5fLkZJTFRFUl9DT05UQUlOUyA9IGZ1bmN0aW9uICh0ZXh0LCBpbnB1dCkge1xuXHRyZXR1cm4gUmVnRXhwKCQucmVnRXhwRXNjYXBlKGlucHV0LnRyaW0oKSksIFwiaVwiKS50ZXN0KHRleHQpO1xufTtcblxuXy5GSUxURVJfU1RBUlRTV0lUSCA9IGZ1bmN0aW9uICh0ZXh0LCBpbnB1dCkge1xuXHRyZXR1cm4gUmVnRXhwKFwiXlwiICsgJC5yZWdFeHBFc2NhcGUoaW5wdXQudHJpbSgpKSwgXCJpXCIpLnRlc3QodGV4dCk7XG59O1xuXG5fLlNPUlRfQllMRU5HVEggPSBmdW5jdGlvbiAoYSwgYikge1xuXHRpZiAoYS5sZW5ndGggIT09IGIubGVuZ3RoKSB7XG5cdFx0cmV0dXJuIGEubGVuZ3RoIC0gYi5sZW5ndGg7XG5cdH1cblxuXHRyZXR1cm4gYSA8IGI/IC0xIDogMTtcbn07XG5cbl8uSVRFTSA9IGZ1bmN0aW9uICh0ZXh0LCBpbnB1dCkge1xuXHR2YXIgaHRtbCA9IGlucHV0LnRyaW0oKSA9PT0gXCJcIiA/IHRleHQgOiB0ZXh0LnJlcGxhY2UoUmVnRXhwKCQucmVnRXhwRXNjYXBlKGlucHV0LnRyaW0oKSksIFwiZ2lcIiksIFwiPG1hcms+JCY8L21hcms+XCIpO1xuXHRyZXR1cm4gJC5jcmVhdGUoXCJsaVwiLCB7XG5cdFx0aW5uZXJIVE1MOiBodG1sLFxuXHRcdFwiYXJpYS1zZWxlY3RlZFwiOiBcImZhbHNlXCJcblx0fSk7XG59O1xuXG5fLlJFUExBQ0UgPSBmdW5jdGlvbiAodGV4dCkge1xuXHR0aGlzLmlucHV0LnZhbHVlID0gdGV4dC52YWx1ZTtcbn07XG5cbl8uREFUQSA9IGZ1bmN0aW9uIChpdGVtLyosIGlucHV0Ki8pIHsgcmV0dXJuIGl0ZW07IH07XG5cbi8vIFByaXZhdGUgZnVuY3Rpb25zXG5cbmZ1bmN0aW9uIFN1Z2dlc3Rpb24oZGF0YSkge1xuXHR2YXIgbyA9IEFycmF5LmlzQXJyYXkoZGF0YSlcblx0ICA/IHsgbGFiZWw6IGRhdGFbMF0sIHZhbHVlOiBkYXRhWzFdIH1cblx0ICA6IHR5cGVvZiBkYXRhID09PSBcIm9iamVjdFwiICYmIFwibGFiZWxcIiBpbiBkYXRhICYmIFwidmFsdWVcIiBpbiBkYXRhID8gZGF0YSA6IHsgbGFiZWw6IGRhdGEsIHZhbHVlOiBkYXRhIH07XG5cblx0dGhpcy5sYWJlbCA9IG8ubGFiZWwgfHwgby52YWx1ZTtcblx0dGhpcy52YWx1ZSA9IG8udmFsdWU7XG59XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoU3VnZ2VzdGlvbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN0cmluZy5wcm90b3R5cGUpLCBcImxlbmd0aFwiLCB7XG5cdGdldDogZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzLmxhYmVsLmxlbmd0aDsgfVxufSk7XG5TdWdnZXN0aW9uLnByb3RvdHlwZS50b1N0cmluZyA9IFN1Z2dlc3Rpb24ucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbiAoKSB7XG5cdHJldHVybiBcIlwiICsgdGhpcy5sYWJlbDtcbn07XG5cbmZ1bmN0aW9uIGNvbmZpZ3VyZShpbnN0YW5jZSwgcHJvcGVydGllcywgbykge1xuXHRmb3IgKHZhciBpIGluIHByb3BlcnRpZXMpIHtcblx0XHR2YXIgaW5pdGlhbCA9IHByb3BlcnRpZXNbaV0sXG5cdFx0ICAgIGF0dHJWYWx1ZSA9IGluc3RhbmNlLmlucHV0LmdldEF0dHJpYnV0ZShcImRhdGEtXCIgKyBpLnRvTG93ZXJDYXNlKCkpO1xuXG5cdFx0aWYgKHR5cGVvZiBpbml0aWFsID09PSBcIm51bWJlclwiKSB7XG5cdFx0XHRpbnN0YW5jZVtpXSA9IHBhcnNlSW50KGF0dHJWYWx1ZSk7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGluaXRpYWwgPT09IGZhbHNlKSB7IC8vIEJvb2xlYW4gb3B0aW9ucyBtdXN0IGJlIGZhbHNlIGJ5IGRlZmF1bHQgYW55d2F5XG5cdFx0XHRpbnN0YW5jZVtpXSA9IGF0dHJWYWx1ZSAhPT0gbnVsbDtcblx0XHR9XG5cdFx0ZWxzZSBpZiAoaW5pdGlhbCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG5cdFx0XHRpbnN0YW5jZVtpXSA9IG51bGw7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0aW5zdGFuY2VbaV0gPSBhdHRyVmFsdWU7XG5cdFx0fVxuXG5cdFx0aWYgKCFpbnN0YW5jZVtpXSAmJiBpbnN0YW5jZVtpXSAhPT0gMCkge1xuXHRcdFx0aW5zdGFuY2VbaV0gPSAoaSBpbiBvKT8gb1tpXSA6IGluaXRpYWw7XG5cdFx0fVxuXHR9XG59XG5cbi8vIEhlbHBlcnNcblxudmFyIHNsaWNlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlO1xuXG5mdW5jdGlvbiAkKGV4cHIsIGNvbikge1xuXHRyZXR1cm4gdHlwZW9mIGV4cHIgPT09IFwic3RyaW5nXCI/IChjb24gfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3IoZXhwcikgOiBleHByIHx8IG51bGw7XG59XG5cbmZ1bmN0aW9uICQkKGV4cHIsIGNvbikge1xuXHRyZXR1cm4gc2xpY2UuY2FsbCgoY29uIHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKGV4cHIpKTtcbn1cblxuJC5jcmVhdGUgPSBmdW5jdGlvbih0YWcsIG8pIHtcblx0dmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KHRhZyk7XG5cblx0Zm9yICh2YXIgaSBpbiBvKSB7XG5cdFx0dmFyIHZhbCA9IG9baV07XG5cblx0XHRpZiAoaSA9PT0gXCJpbnNpZGVcIikge1xuXHRcdFx0JCh2YWwpLmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuXHRcdH1cblx0XHRlbHNlIGlmIChpID09PSBcImFyb3VuZFwiKSB7XG5cdFx0XHR2YXIgcmVmID0gJCh2YWwpO1xuXHRcdFx0cmVmLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsZW1lbnQsIHJlZik7XG5cdFx0XHRlbGVtZW50LmFwcGVuZENoaWxkKHJlZik7XG5cdFx0fVxuXHRcdGVsc2UgaWYgKGkgaW4gZWxlbWVudCkge1xuXHRcdFx0ZWxlbWVudFtpXSA9IHZhbDtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRlbGVtZW50LnNldEF0dHJpYnV0ZShpLCB2YWwpO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50O1xufTtcblxuJC5iaW5kID0gZnVuY3Rpb24oZWxlbWVudCwgbykge1xuXHRpZiAoZWxlbWVudCkge1xuXHRcdGZvciAodmFyIGV2ZW50IGluIG8pIHtcblx0XHRcdHZhciBjYWxsYmFjayA9IG9bZXZlbnRdO1xuXG5cdFx0XHRldmVudC5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59O1xuXG4kLnVuYmluZCA9IGZ1bmN0aW9uKGVsZW1lbnQsIG8pIHtcblx0aWYgKGVsZW1lbnQpIHtcblx0XHRmb3IgKHZhciBldmVudCBpbiBvKSB7XG5cdFx0XHR2YXIgY2FsbGJhY2sgPSBvW2V2ZW50XTtcblxuXHRcdFx0ZXZlbnQuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdGVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2FsbGJhY2spO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG59O1xuXG4kLmZpcmUgPSBmdW5jdGlvbih0YXJnZXQsIHR5cGUsIHByb3BlcnRpZXMpIHtcblx0dmFyIGV2dCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiSFRNTEV2ZW50c1wiKTtcblxuXHRldnQuaW5pdEV2ZW50KHR5cGUsIHRydWUsIHRydWUgKTtcblxuXHRmb3IgKHZhciBqIGluIHByb3BlcnRpZXMpIHtcblx0XHRldnRbal0gPSBwcm9wZXJ0aWVzW2pdO1xuXHR9XG5cblx0cmV0dXJuIHRhcmdldC5kaXNwYXRjaEV2ZW50KGV2dCk7XG59O1xuXG4kLnJlZ0V4cEVzY2FwZSA9IGZ1bmN0aW9uIChzKSB7XG5cdHJldHVybiBzLnJlcGxhY2UoL1stXFxcXF4kKis/LigpfFtcXF17fV0vZywgXCJcXFxcJCZcIik7XG59O1xuXG4kLnNpYmxpbmdJbmRleCA9IGZ1bmN0aW9uIChlbCkge1xuXHQvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHRmb3IgKHZhciBpID0gMDsgZWwgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nOyBpKyspO1xuXHRyZXR1cm4gaTtcbn07XG5cbi8vIEluaXRpYWxpemF0aW9uXG5cbmZ1bmN0aW9uIGluaXQoKSB7XG5cdCQkKFwiaW5wdXQuYXdlc29tcGxldGVcIikuZm9yRWFjaChmdW5jdGlvbiAoaW5wdXQpIHtcblx0XHRuZXcgXyhpbnB1dCk7XG5cdH0pO1xufVxuXG4vLyBBcmUgd2UgaW4gYSBicm93c2VyPyBDaGVjayBmb3IgRG9jdW1lbnQgY29uc3RydWN0b3JcbmlmICh0eXBlb2YgRG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0Ly8gRE9NIGFscmVhZHkgbG9hZGVkP1xuXHRpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIpIHtcblx0XHRpbml0KCk7XG5cdH1cblx0ZWxzZSB7XG5cdFx0Ly8gV2FpdCBmb3IgaXRcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLCBpbml0KTtcblx0fVxufVxuXG5fLiQgPSAkO1xuXy4kJCA9ICQkO1xuXG4vLyBNYWtlIHN1cmUgdG8gZXhwb3J0IEF3ZXNvbXBsZXRlIG9uIHNlbGYgd2hlbiBpbiBhIGJyb3dzZXJcbmlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRzZWxmLkF3ZXNvbXBsZXRlID0gXztcbn1cblxuLy8gRXhwb3NlIEF3ZXNvbXBsZXRlIGFzIGEgQ0pTIG1vZHVsZVxuaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0bW9kdWxlLmV4cG9ydHMgPSBfO1xufVxuXG5yZXR1cm4gXztcblxufSgpKTtcbiIsImltcG9ydCAqIGFzIGJhc2UgZnJvbSAnLi9oYW5kbGViYXJzL2Jhc2UnO1xuXG4vLyBFYWNoIG9mIHRoZXNlIGF1Z21lbnQgdGhlIEhhbmRsZWJhcnMgb2JqZWN0LiBObyBuZWVkIHRvIHNldHVwIGhlcmUuXG4vLyAoVGhpcyBpcyBkb25lIHRvIGVhc2lseSBzaGFyZSBjb2RlIGJldHdlZW4gY29tbW9uanMgYW5kIGJyb3dzZSBlbnZzKVxuaW1wb3J0IFNhZmVTdHJpbmcgZnJvbSAnLi9oYW5kbGViYXJzL3NhZmUtc3RyaW5nJztcbmltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi9oYW5kbGViYXJzL2V4Y2VwdGlvbic7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuL2hhbmRsZWJhcnMvdXRpbHMnO1xuaW1wb3J0ICogYXMgcnVudGltZSBmcm9tICcuL2hhbmRsZWJhcnMvcnVudGltZSc7XG5cbmltcG9ydCBub0NvbmZsaWN0IGZyb20gJy4vaGFuZGxlYmFycy9uby1jb25mbGljdCc7XG5cbi8vIEZvciBjb21wYXRpYmlsaXR5IGFuZCB1c2FnZSBvdXRzaWRlIG9mIG1vZHVsZSBzeXN0ZW1zLCBtYWtlIHRoZSBIYW5kbGViYXJzIG9iamVjdCBhIG5hbWVzcGFjZVxuZnVuY3Rpb24gY3JlYXRlKCkge1xuICBsZXQgaGIgPSBuZXcgYmFzZS5IYW5kbGViYXJzRW52aXJvbm1lbnQoKTtcblxuICBVdGlscy5leHRlbmQoaGIsIGJhc2UpO1xuICBoYi5TYWZlU3RyaW5nID0gU2FmZVN0cmluZztcbiAgaGIuRXhjZXB0aW9uID0gRXhjZXB0aW9uO1xuICBoYi5VdGlscyA9IFV0aWxzO1xuICBoYi5lc2NhcGVFeHByZXNzaW9uID0gVXRpbHMuZXNjYXBlRXhwcmVzc2lvbjtcblxuICBoYi5WTSA9IHJ1bnRpbWU7XG4gIGhiLnRlbXBsYXRlID0gZnVuY3Rpb24oc3BlYykge1xuICAgIHJldHVybiBydW50aW1lLnRlbXBsYXRlKHNwZWMsIGhiKTtcbiAgfTtcblxuICByZXR1cm4gaGI7XG59XG5cbmxldCBpbnN0ID0gY3JlYXRlKCk7XG5pbnN0LmNyZWF0ZSA9IGNyZWF0ZTtcblxubm9Db25mbGljdChpbnN0KTtcblxuaW5zdFsnZGVmYXVsdCddID0gaW5zdDtcblxuZXhwb3J0IGRlZmF1bHQgaW5zdDtcbiIsImltcG9ydCB7Y3JlYXRlRnJhbWUsIGV4dGVuZCwgdG9TdHJpbmd9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuL2V4Y2VwdGlvbic7XG5pbXBvcnQge3JlZ2lzdGVyRGVmYXVsdEhlbHBlcnN9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQge3JlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnN9IGZyb20gJy4vZGVjb3JhdG9ycyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4vbG9nZ2VyJztcblxuZXhwb3J0IGNvbnN0IFZFUlNJT04gPSAnNC4wLjUnO1xuZXhwb3J0IGNvbnN0IENPTVBJTEVSX1JFVklTSU9OID0gNztcblxuZXhwb3J0IGNvbnN0IFJFVklTSU9OX0NIQU5HRVMgPSB7XG4gIDE6ICc8PSAxLjAucmMuMicsIC8vIDEuMC5yYy4yIGlzIGFjdHVhbGx5IHJldjIgYnV0IGRvZXNuJ3QgcmVwb3J0IGl0XG4gIDI6ICc9PSAxLjAuMC1yYy4zJyxcbiAgMzogJz09IDEuMC4wLXJjLjQnLFxuICA0OiAnPT0gMS54LngnLFxuICA1OiAnPT0gMi4wLjAtYWxwaGEueCcsXG4gIDY6ICc+PSAyLjAuMC1iZXRhLjEnLFxuICA3OiAnPj0gNC4wLjAnXG59O1xuXG5jb25zdCBvYmplY3RUeXBlID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBIYW5kbGViYXJzRW52aXJvbm1lbnQoaGVscGVycywgcGFydGlhbHMsIGRlY29yYXRvcnMpIHtcbiAgdGhpcy5oZWxwZXJzID0gaGVscGVycyB8fCB7fTtcbiAgdGhpcy5wYXJ0aWFscyA9IHBhcnRpYWxzIHx8IHt9O1xuICB0aGlzLmRlY29yYXRvcnMgPSBkZWNvcmF0b3JzIHx8IHt9O1xuXG4gIHJlZ2lzdGVyRGVmYXVsdEhlbHBlcnModGhpcyk7XG4gIHJlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnModGhpcyk7XG59XG5cbkhhbmRsZWJhcnNFbnZpcm9ubWVudC5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBIYW5kbGViYXJzRW52aXJvbm1lbnQsXG5cbiAgbG9nZ2VyOiBsb2dnZXIsXG4gIGxvZzogbG9nZ2VyLmxvZyxcblxuICByZWdpc3RlckhlbHBlcjogZnVuY3Rpb24obmFtZSwgZm4pIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgaWYgKGZuKSB7IHRocm93IG5ldyBFeGNlcHRpb24oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgaGVscGVycycpOyB9XG4gICAgICBleHRlbmQodGhpcy5oZWxwZXJzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oZWxwZXJzW25hbWVdID0gZm47XG4gICAgfVxuICB9LFxuICB1bnJlZ2lzdGVySGVscGVyOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMuaGVscGVyc1tuYW1lXTtcbiAgfSxcblxuICByZWdpc3RlclBhcnRpYWw6IGZ1bmN0aW9uKG5hbWUsIHBhcnRpYWwpIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgZXh0ZW5kKHRoaXMucGFydGlhbHMsIG5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHBhcnRpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oYEF0dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYSBwYXJ0aWFsIGNhbGxlZCBcIiR7bmFtZX1cIiBhcyB1bmRlZmluZWRgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGFydGlhbHNbbmFtZV0gPSBwYXJ0aWFsO1xuICAgIH1cbiAgfSxcbiAgdW5yZWdpc3RlclBhcnRpYWw6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5wYXJ0aWFsc1tuYW1lXTtcbiAgfSxcblxuICByZWdpc3RlckRlY29yYXRvcjogZnVuY3Rpb24obmFtZSwgZm4pIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgaWYgKGZuKSB7IHRocm93IG5ldyBFeGNlcHRpb24oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgZGVjb3JhdG9ycycpOyB9XG4gICAgICBleHRlbmQodGhpcy5kZWNvcmF0b3JzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZWNvcmF0b3JzW25hbWVdID0gZm47XG4gICAgfVxuICB9LFxuICB1bnJlZ2lzdGVyRGVjb3JhdG9yOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMuZGVjb3JhdG9yc1tuYW1lXTtcbiAgfVxufTtcblxuZXhwb3J0IGxldCBsb2cgPSBsb2dnZXIubG9nO1xuXG5leHBvcnQge2NyZWF0ZUZyYW1lLCBsb2dnZXJ9O1xuIiwiaW1wb3J0IHJlZ2lzdGVySW5saW5lIGZyb20gJy4vZGVjb3JhdG9ycy9pbmxpbmUnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJEZWZhdWx0RGVjb3JhdG9ycyhpbnN0YW5jZSkge1xuICByZWdpc3RlcklubGluZShpbnN0YW5jZSk7XG59XG5cbiIsImltcG9ydCB7ZXh0ZW5kfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVyRGVjb3JhdG9yKCdpbmxpbmUnLCBmdW5jdGlvbihmbiwgcHJvcHMsIGNvbnRhaW5lciwgb3B0aW9ucykge1xuICAgIGxldCByZXQgPSBmbjtcbiAgICBpZiAoIXByb3BzLnBhcnRpYWxzKSB7XG4gICAgICBwcm9wcy5wYXJ0aWFscyA9IHt9O1xuICAgICAgcmV0ID0gZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFydGlhbHMgc3RhY2sgZnJhbWUgcHJpb3IgdG8gZXhlYy5cbiAgICAgICAgbGV0IG9yaWdpbmFsID0gY29udGFpbmVyLnBhcnRpYWxzO1xuICAgICAgICBjb250YWluZXIucGFydGlhbHMgPSBleHRlbmQoe30sIG9yaWdpbmFsLCBwcm9wcy5wYXJ0aWFscyk7XG4gICAgICAgIGxldCByZXQgPSBmbihjb250ZXh0LCBvcHRpb25zKTtcbiAgICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gb3JpZ2luYWw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHByb3BzLnBhcnRpYWxzW29wdGlvbnMuYXJnc1swXV0gPSBvcHRpb25zLmZuO1xuXG4gICAgcmV0dXJuIHJldDtcbiAgfSk7XG59XG4iLCJcbmNvbnN0IGVycm9yUHJvcHMgPSBbJ2Rlc2NyaXB0aW9uJywgJ2ZpbGVOYW1lJywgJ2xpbmVOdW1iZXInLCAnbWVzc2FnZScsICduYW1lJywgJ251bWJlcicsICdzdGFjayddO1xuXG5mdW5jdGlvbiBFeGNlcHRpb24obWVzc2FnZSwgbm9kZSkge1xuICBsZXQgbG9jID0gbm9kZSAmJiBub2RlLmxvYyxcbiAgICAgIGxpbmUsXG4gICAgICBjb2x1bW47XG4gIGlmIChsb2MpIHtcbiAgICBsaW5lID0gbG9jLnN0YXJ0LmxpbmU7XG4gICAgY29sdW1uID0gbG9jLnN0YXJ0LmNvbHVtbjtcblxuICAgIG1lc3NhZ2UgKz0gJyAtICcgKyBsaW5lICsgJzonICsgY29sdW1uO1xuICB9XG5cbiAgbGV0IHRtcCA9IEVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuXG4gIC8vIFVuZm9ydHVuYXRlbHkgZXJyb3JzIGFyZSBub3QgZW51bWVyYWJsZSBpbiBDaHJvbWUgKGF0IGxlYXN0KSwgc28gYGZvciBwcm9wIGluIHRtcGAgZG9lc24ndCB3b3JrLlxuICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBlcnJvclByb3BzLmxlbmd0aDsgaWR4KyspIHtcbiAgICB0aGlzW2Vycm9yUHJvcHNbaWR4XV0gPSB0bXBbZXJyb3JQcm9wc1tpZHhdXTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEV4Y2VwdGlvbik7XG4gIH1cblxuICBpZiAobG9jKSB7XG4gICAgdGhpcy5saW5lTnVtYmVyID0gbGluZTtcbiAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjtcbiAgfVxufVxuXG5FeGNlcHRpb24ucHJvdG90eXBlID0gbmV3IEVycm9yKCk7XG5cbmV4cG9ydCBkZWZhdWx0IEV4Y2VwdGlvbjtcbiIsImltcG9ydCByZWdpc3RlckJsb2NrSGVscGVyTWlzc2luZyBmcm9tICcuL2hlbHBlcnMvYmxvY2staGVscGVyLW1pc3NpbmcnO1xuaW1wb3J0IHJlZ2lzdGVyRWFjaCBmcm9tICcuL2hlbHBlcnMvZWFjaCc7XG5pbXBvcnQgcmVnaXN0ZXJIZWxwZXJNaXNzaW5nIGZyb20gJy4vaGVscGVycy9oZWxwZXItbWlzc2luZyc7XG5pbXBvcnQgcmVnaXN0ZXJJZiBmcm9tICcuL2hlbHBlcnMvaWYnO1xuaW1wb3J0IHJlZ2lzdGVyTG9nIGZyb20gJy4vaGVscGVycy9sb2cnO1xuaW1wb3J0IHJlZ2lzdGVyTG9va3VwIGZyb20gJy4vaGVscGVycy9sb29rdXAnO1xuaW1wb3J0IHJlZ2lzdGVyV2l0aCBmcm9tICcuL2hlbHBlcnMvd2l0aCc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckRlZmF1bHRIZWxwZXJzKGluc3RhbmNlKSB7XG4gIHJlZ2lzdGVyQmxvY2tIZWxwZXJNaXNzaW5nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJFYWNoKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJIZWxwZXJNaXNzaW5nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJJZihpbnN0YW5jZSk7XG4gIHJlZ2lzdGVyTG9nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJMb29rdXAoaW5zdGFuY2UpO1xuICByZWdpc3RlcldpdGgoaW5zdGFuY2UpO1xufVxuIiwiaW1wb3J0IHthcHBlbmRDb250ZXh0UGF0aCwgY3JlYXRlRnJhbWUsIGlzQXJyYXl9IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2Jsb2NrSGVscGVyTWlzc2luZycsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBsZXQgaW52ZXJzZSA9IG9wdGlvbnMuaW52ZXJzZSxcbiAgICAgICAgZm4gPSBvcHRpb25zLmZuO1xuXG4gICAgaWYgKGNvbnRleHQgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBmbih0aGlzKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRleHQgPT09IGZhbHNlIHx8IGNvbnRleHQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGludmVyc2UodGhpcyk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KGNvbnRleHQpKSB7XG4gICAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmlkcykge1xuICAgICAgICAgIG9wdGlvbnMuaWRzID0gW29wdGlvbnMubmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5zdGFuY2UuaGVscGVycy5lYWNoKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGludmVyc2UodGhpcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5pZHMpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgICAgICBkYXRhLmNvbnRleHRQYXRoID0gYXBwZW5kQ29udGV4dFBhdGgob3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoLCBvcHRpb25zLm5hbWUpO1xuICAgICAgICBvcHRpb25zID0ge2RhdGE6IGRhdGF9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm4oY29udGV4dCwgb3B0aW9ucyk7XG4gICAgfVxuICB9KTtcbn1cbiIsImltcG9ydCB7YXBwZW5kQ29udGV4dFBhdGgsIGJsb2NrUGFyYW1zLCBjcmVhdGVGcmFtZSwgaXNBcnJheSwgaXNGdW5jdGlvbn0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuLi9leGNlcHRpb24nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignZWFjaCcsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ011c3QgcGFzcyBpdGVyYXRvciB0byAjZWFjaCcpO1xuICAgIH1cblxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm4sXG4gICAgICAgIGludmVyc2UgPSBvcHRpb25zLmludmVyc2UsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICByZXQgPSAnJyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgY29udGV4dFBhdGg7XG5cbiAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7XG4gICAgICBjb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5pZHNbMF0pICsgJy4nO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQpKSB7IGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7IH1cblxuICAgIGlmIChvcHRpb25zLmRhdGEpIHtcbiAgICAgIGRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4ZWNJdGVyYXRpb24oZmllbGQsIGluZGV4LCBsYXN0KSB7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBkYXRhLmtleSA9IGZpZWxkO1xuICAgICAgICBkYXRhLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIGRhdGEuZmlyc3QgPSBpbmRleCA9PT0gMDtcbiAgICAgICAgZGF0YS5sYXN0ID0gISFsYXN0O1xuXG4gICAgICAgIGlmIChjb250ZXh0UGF0aCkge1xuICAgICAgICAgIGRhdGEuY29udGV4dFBhdGggPSBjb250ZXh0UGF0aCArIGZpZWxkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldCA9IHJldCArIGZuKGNvbnRleHRbZmllbGRdLCB7XG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIGJsb2NrUGFyYW1zOiBibG9ja1BhcmFtcyhbY29udGV4dFtmaWVsZF0sIGZpZWxkXSwgW2NvbnRleHRQYXRoICsgZmllbGQsIG51bGxdKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAoaXNBcnJheShjb250ZXh0KSkge1xuICAgICAgICBmb3IgKGxldCBqID0gY29udGV4dC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICBpZiAoaSBpbiBjb250ZXh0KSB7XG4gICAgICAgICAgICBleGVjSXRlcmF0aW9uKGksIGksIGkgPT09IGNvbnRleHQubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcHJpb3JLZXk7XG5cbiAgICAgICAgZm9yIChsZXQga2V5IGluIGNvbnRleHQpIHtcbiAgICAgICAgICBpZiAoY29udGV4dC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAvLyBXZSdyZSBydW5uaW5nIHRoZSBpdGVyYXRpb25zIG9uZSBzdGVwIG91dCBvZiBzeW5jIHNvIHdlIGNhbiBkZXRlY3RcbiAgICAgICAgICAgIC8vIHRoZSBsYXN0IGl0ZXJhdGlvbiB3aXRob3V0IGhhdmUgdG8gc2NhbiB0aGUgb2JqZWN0IHR3aWNlIGFuZCBjcmVhdGVcbiAgICAgICAgICAgIC8vIGFuIGl0ZXJtZWRpYXRlIGtleXMgYXJyYXkuXG4gICAgICAgICAgICBpZiAocHJpb3JLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBleGVjSXRlcmF0aW9uKHByaW9yS2V5LCBpIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmlvcktleSA9IGtleTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByaW9yS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBleGVjSXRlcmF0aW9uKHByaW9yS2V5LCBpIC0gMSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgcmV0ID0gaW52ZXJzZSh0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xuICB9KTtcbn1cbiIsImltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi4vZXhjZXB0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbigvKiBbYXJncywgXW9wdGlvbnMgKi8pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gQSBtaXNzaW5nIGZpZWxkIGluIGEge3tmb299fSBjb25zdHJ1Y3QuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTb21lb25lIGlzIGFjdHVhbGx5IHRyeWluZyB0byBjYWxsIHNvbWV0aGluZywgYmxvdyB1cC5cbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ01pc3NpbmcgaGVscGVyOiBcIicgKyBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLm5hbWUgKyAnXCInKTtcbiAgICB9XG4gIH0pO1xufVxuIiwiaW1wb3J0IHtpc0VtcHR5LCBpc0Z1bmN0aW9ufSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdpZicsIGZ1bmN0aW9uKGNvbmRpdGlvbmFsLCBvcHRpb25zKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oY29uZGl0aW9uYWwpKSB7IGNvbmRpdGlvbmFsID0gY29uZGl0aW9uYWwuY2FsbCh0aGlzKTsgfVxuXG4gICAgLy8gRGVmYXVsdCBiZWhhdmlvciBpcyB0byByZW5kZXIgdGhlIHBvc2l0aXZlIHBhdGggaWYgdGhlIHZhbHVlIGlzIHRydXRoeSBhbmQgbm90IGVtcHR5LlxuICAgIC8vIFRoZSBgaW5jbHVkZVplcm9gIG9wdGlvbiBtYXkgYmUgc2V0IHRvIHRyZWF0IHRoZSBjb25kdGlvbmFsIGFzIHB1cmVseSBub3QgZW1wdHkgYmFzZWQgb24gdGhlXG4gICAgLy8gYmVoYXZpb3Igb2YgaXNFbXB0eS4gRWZmZWN0aXZlbHkgdGhpcyBkZXRlcm1pbmVzIGlmIDAgaXMgaGFuZGxlZCBieSB0aGUgcG9zaXRpdmUgcGF0aCBvciBuZWdhdGl2ZS5cbiAgICBpZiAoKCFvcHRpb25zLmhhc2guaW5jbHVkZVplcm8gJiYgIWNvbmRpdGlvbmFsKSB8fCBpc0VtcHR5KGNvbmRpdGlvbmFsKSkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XG4gICAgfVxuICB9KTtcblxuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcigndW5sZXNzJywgZnVuY3Rpb24oY29uZGl0aW9uYWwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gaW5zdGFuY2UuaGVscGVyc1snaWYnXS5jYWxsKHRoaXMsIGNvbmRpdGlvbmFsLCB7Zm46IG9wdGlvbnMuaW52ZXJzZSwgaW52ZXJzZTogb3B0aW9ucy5mbiwgaGFzaDogb3B0aW9ucy5oYXNofSk7XG4gIH0pO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvZycsIGZ1bmN0aW9uKC8qIG1lc3NhZ2UsIG9wdGlvbnMgKi8pIHtcbiAgICBsZXQgYXJncyA9IFt1bmRlZmluZWRdLFxuICAgICAgICBvcHRpb25zID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xuICAgIH1cblxuICAgIGxldCBsZXZlbCA9IDE7XG4gICAgaWYgKG9wdGlvbnMuaGFzaC5sZXZlbCAhPSBudWxsKSB7XG4gICAgICBsZXZlbCA9IG9wdGlvbnMuaGFzaC5sZXZlbDtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmRhdGEubGV2ZWwgIT0gbnVsbCkge1xuICAgICAgbGV2ZWwgPSBvcHRpb25zLmRhdGEubGV2ZWw7XG4gICAgfVxuICAgIGFyZ3NbMF0gPSBsZXZlbDtcblxuICAgIGluc3RhbmNlLmxvZyguLi4gYXJncyk7XG4gIH0pO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvb2t1cCcsIGZ1bmN0aW9uKG9iaiwgZmllbGQpIHtcbiAgICByZXR1cm4gb2JqICYmIG9ialtmaWVsZF07XG4gIH0pO1xufVxuIiwiaW1wb3J0IHthcHBlbmRDb250ZXh0UGF0aCwgYmxvY2tQYXJhbXMsIGNyZWF0ZUZyYW1lLCBpc0VtcHR5LCBpc0Z1bmN0aW9ufSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCd3aXRoJywgZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQpKSB7IGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7IH1cblxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm47XG5cbiAgICBpZiAoIWlzRW1wdHkoY29udGV4dCkpIHtcbiAgICAgIGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmlkcykge1xuICAgICAgICBkYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICAgICAgZGF0YS5jb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5pZHNbMF0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm4oY29udGV4dCwge1xuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBibG9ja1BhcmFtczogYmxvY2tQYXJhbXMoW2NvbnRleHRdLCBbZGF0YSAmJiBkYXRhLmNvbnRleHRQYXRoXSlcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xuICAgIH1cbiAgfSk7XG59XG4iLCJpbXBvcnQge2luZGV4T2Z9IGZyb20gJy4vdXRpbHMnO1xuXG5sZXQgbG9nZ2VyID0ge1xuICBtZXRob2RNYXA6IFsnZGVidWcnLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJ10sXG4gIGxldmVsOiAnaW5mbycsXG5cbiAgLy8gTWFwcyBhIGdpdmVuIGxldmVsIHZhbHVlIHRvIHRoZSBgbWV0aG9kTWFwYCBpbmRleGVzIGFib3ZlLlxuICBsb29rdXBMZXZlbDogZnVuY3Rpb24obGV2ZWwpIHtcbiAgICBpZiAodHlwZW9mIGxldmVsID09PSAnc3RyaW5nJykge1xuICAgICAgbGV0IGxldmVsTWFwID0gaW5kZXhPZihsb2dnZXIubWV0aG9kTWFwLCBsZXZlbC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChsZXZlbE1hcCA+PSAwKSB7XG4gICAgICAgIGxldmVsID0gbGV2ZWxNYXA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXZlbCA9IHBhcnNlSW50KGxldmVsLCAxMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxldmVsO1xuICB9LFxuXG4gIC8vIENhbiBiZSBvdmVycmlkZGVuIGluIHRoZSBob3N0IGVudmlyb25tZW50XG4gIGxvZzogZnVuY3Rpb24obGV2ZWwsIC4uLm1lc3NhZ2UpIHtcbiAgICBsZXZlbCA9IGxvZ2dlci5sb29rdXBMZXZlbChsZXZlbCk7XG5cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGxvZ2dlci5sb29rdXBMZXZlbChsb2dnZXIubGV2ZWwpIDw9IGxldmVsKSB7XG4gICAgICBsZXQgbWV0aG9kID0gbG9nZ2VyLm1ldGhvZE1hcFtsZXZlbF07XG4gICAgICBpZiAoIWNvbnNvbGVbbWV0aG9kXSkgeyAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICBtZXRob2QgPSAnbG9nJztcbiAgICAgIH1cbiAgICAgIGNvbnNvbGVbbWV0aG9kXSguLi5tZXNzYWdlKTsgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4iLCIvKiBnbG9iYWwgd2luZG93ICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihIYW5kbGViYXJzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGxldCByb290ID0gdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB3aW5kb3csXG4gICAgICAkSGFuZGxlYmFycyA9IHJvb3QuSGFuZGxlYmFycztcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgSGFuZGxlYmFycy5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHJvb3QuSGFuZGxlYmFycyA9PT0gSGFuZGxlYmFycykge1xuICAgICAgcm9vdC5IYW5kbGViYXJzID0gJEhhbmRsZWJhcnM7XG4gICAgfVxuICAgIHJldHVybiBIYW5kbGViYXJzO1xuICB9O1xufVxuIiwiaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgRXhjZXB0aW9uIGZyb20gJy4vZXhjZXB0aW9uJztcbmltcG9ydCB7IENPTVBJTEVSX1JFVklTSU9OLCBSRVZJU0lPTl9DSEFOR0VTLCBjcmVhdGVGcmFtZSB9IGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1JldmlzaW9uKGNvbXBpbGVySW5mbykge1xuICBjb25zdCBjb21waWxlclJldmlzaW9uID0gY29tcGlsZXJJbmZvICYmIGNvbXBpbGVySW5mb1swXSB8fCAxLFxuICAgICAgICBjdXJyZW50UmV2aXNpb24gPSBDT01QSUxFUl9SRVZJU0lPTjtcblxuICBpZiAoY29tcGlsZXJSZXZpc2lvbiAhPT0gY3VycmVudFJldmlzaW9uKSB7XG4gICAgaWYgKGNvbXBpbGVyUmV2aXNpb24gPCBjdXJyZW50UmV2aXNpb24pIHtcbiAgICAgIGNvbnN0IHJ1bnRpbWVWZXJzaW9ucyA9IFJFVklTSU9OX0NIQU5HRVNbY3VycmVudFJldmlzaW9uXSxcbiAgICAgICAgICAgIGNvbXBpbGVyVmVyc2lvbnMgPSBSRVZJU0lPTl9DSEFOR0VTW2NvbXBpbGVyUmV2aXNpb25dO1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGVtcGxhdGUgd2FzIHByZWNvbXBpbGVkIHdpdGggYW4gb2xkZXIgdmVyc2lvbiBvZiBIYW5kbGViYXJzIHRoYW4gdGhlIGN1cnJlbnQgcnVudGltZS4gJyArXG4gICAgICAgICAgICAnUGxlYXNlIHVwZGF0ZSB5b3VyIHByZWNvbXBpbGVyIHRvIGEgbmV3ZXIgdmVyc2lvbiAoJyArIHJ1bnRpbWVWZXJzaW9ucyArICcpIG9yIGRvd25ncmFkZSB5b3VyIHJ1bnRpbWUgdG8gYW4gb2xkZXIgdmVyc2lvbiAoJyArIGNvbXBpbGVyVmVyc2lvbnMgKyAnKS4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIHRoZSBlbWJlZGRlZCB2ZXJzaW9uIGluZm8gc2luY2UgdGhlIHJ1bnRpbWUgZG9lc24ndCBrbm93IGFib3V0IHRoaXMgcmV2aXNpb24geWV0XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdUZW1wbGF0ZSB3YXMgcHJlY29tcGlsZWQgd2l0aCBhIG5ld2VyIHZlcnNpb24gb2YgSGFuZGxlYmFycyB0aGFuIHRoZSBjdXJyZW50IHJ1bnRpbWUuICcgK1xuICAgICAgICAgICAgJ1BsZWFzZSB1cGRhdGUgeW91ciBydW50aW1lIHRvIGEgbmV3ZXIgdmVyc2lvbiAoJyArIGNvbXBpbGVySW5mb1sxXSArICcpLicpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGUodGVtcGxhdGVTcGVjLCBlbnYpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKCFlbnYpIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdObyBlbnZpcm9ubWVudCBwYXNzZWQgdG8gdGVtcGxhdGUnKTtcbiAgfVxuICBpZiAoIXRlbXBsYXRlU3BlYyB8fCAhdGVtcGxhdGVTcGVjLm1haW4pIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdVbmtub3duIHRlbXBsYXRlIG9iamVjdDogJyArIHR5cGVvZiB0ZW1wbGF0ZVNwZWMpO1xuICB9XG5cbiAgdGVtcGxhdGVTcGVjLm1haW4uZGVjb3JhdG9yID0gdGVtcGxhdGVTcGVjLm1haW5fZDtcblxuICAvLyBOb3RlOiBVc2luZyBlbnYuVk0gcmVmZXJlbmNlcyByYXRoZXIgdGhhbiBsb2NhbCB2YXIgcmVmZXJlbmNlcyB0aHJvdWdob3V0IHRoaXMgc2VjdGlvbiB0byBhbGxvd1xuICAvLyBmb3IgZXh0ZXJuYWwgdXNlcnMgdG8gb3ZlcnJpZGUgdGhlc2UgYXMgcHN1ZWRvLXN1cHBvcnRlZCBBUElzLlxuICBlbnYuVk0uY2hlY2tSZXZpc2lvbih0ZW1wbGF0ZVNwZWMuY29tcGlsZXIpO1xuXG4gIGZ1bmN0aW9uIGludm9rZVBhcnRpYWxXcmFwcGVyKHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5oYXNoKSB7XG4gICAgICBjb250ZXh0ID0gVXRpbHMuZXh0ZW5kKHt9LCBjb250ZXh0LCBvcHRpb25zLmhhc2gpO1xuICAgICAgaWYgKG9wdGlvbnMuaWRzKSB7XG4gICAgICAgIG9wdGlvbnMuaWRzWzBdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJ0aWFsID0gZW52LlZNLnJlc29sdmVQYXJ0aWFsLmNhbGwodGhpcywgcGFydGlhbCwgY29udGV4dCwgb3B0aW9ucyk7XG4gICAgbGV0IHJlc3VsdCA9IGVudi5WTS5pbnZva2VQYXJ0aWFsLmNhbGwodGhpcywgcGFydGlhbCwgY29udGV4dCwgb3B0aW9ucyk7XG5cbiAgICBpZiAocmVzdWx0ID09IG51bGwgJiYgZW52LmNvbXBpbGUpIHtcbiAgICAgIG9wdGlvbnMucGFydGlhbHNbb3B0aW9ucy5uYW1lXSA9IGVudi5jb21waWxlKHBhcnRpYWwsIHRlbXBsYXRlU3BlYy5jb21waWxlck9wdGlvbnMsIGVudik7XG4gICAgICByZXN1bHQgPSBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV0oY29udGV4dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgaWYgKG9wdGlvbnMuaW5kZW50KSB7XG4gICAgICAgIGxldCBsaW5lcyA9IHJlc3VsdC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gbGluZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFsaW5lc1tpXSAmJiBpICsgMSA9PT0gbCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGluZXNbaV0gPSBvcHRpb25zLmluZGVudCArIGxpbmVzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IGxpbmVzLmpvaW4oJ1xcbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGhlIHBhcnRpYWwgJyArIG9wdGlvbnMubmFtZSArICcgY291bGQgbm90IGJlIGNvbXBpbGVkIHdoZW4gcnVubmluZyBpbiBydW50aW1lLW9ubHkgbW9kZScpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEp1c3QgYWRkIHdhdGVyXG4gIGxldCBjb250YWluZXIgPSB7XG4gICAgc3RyaWN0OiBmdW5jdGlvbihvYmosIG5hbWUpIHtcbiAgICAgIGlmICghKG5hbWUgaW4gb2JqKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdcIicgKyBuYW1lICsgJ1wiIG5vdCBkZWZpbmVkIGluICcgKyBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9ialtuYW1lXTtcbiAgICB9LFxuICAgIGxvb2t1cDogZnVuY3Rpb24oZGVwdGhzLCBuYW1lKSB7XG4gICAgICBjb25zdCBsZW4gPSBkZXB0aHMubGVuZ3RoO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoZGVwdGhzW2ldICYmIGRlcHRoc1tpXVtuYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGRlcHRoc1tpXVtuYW1lXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgbGFtYmRhOiBmdW5jdGlvbihjdXJyZW50LCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGN1cnJlbnQgPT09ICdmdW5jdGlvbicgPyBjdXJyZW50LmNhbGwoY29udGV4dCkgOiBjdXJyZW50O1xuICAgIH0sXG5cbiAgICBlc2NhcGVFeHByZXNzaW9uOiBVdGlscy5lc2NhcGVFeHByZXNzaW9uLFxuICAgIGludm9rZVBhcnRpYWw6IGludm9rZVBhcnRpYWxXcmFwcGVyLFxuXG4gICAgZm46IGZ1bmN0aW9uKGkpIHtcbiAgICAgIGxldCByZXQgPSB0ZW1wbGF0ZVNwZWNbaV07XG4gICAgICByZXQuZGVjb3JhdG9yID0gdGVtcGxhdGVTcGVjW2kgKyAnX2QnXTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcblxuICAgIHByb2dyYW1zOiBbXSxcbiAgICBwcm9ncmFtOiBmdW5jdGlvbihpLCBkYXRhLCBkZWNsYXJlZEJsb2NrUGFyYW1zLCBibG9ja1BhcmFtcywgZGVwdGhzKSB7XG4gICAgICBsZXQgcHJvZ3JhbVdyYXBwZXIgPSB0aGlzLnByb2dyYW1zW2ldLFxuICAgICAgICAgIGZuID0gdGhpcy5mbihpKTtcbiAgICAgIGlmIChkYXRhIHx8IGRlcHRocyB8fCBibG9ja1BhcmFtcyB8fCBkZWNsYXJlZEJsb2NrUGFyYW1zKSB7XG4gICAgICAgIHByb2dyYW1XcmFwcGVyID0gd3JhcFByb2dyYW0odGhpcywgaSwgZm4sIGRhdGEsIGRlY2xhcmVkQmxvY2tQYXJhbXMsIGJsb2NrUGFyYW1zLCBkZXB0aHMpO1xuICAgICAgfSBlbHNlIGlmICghcHJvZ3JhbVdyYXBwZXIpIHtcbiAgICAgICAgcHJvZ3JhbVdyYXBwZXIgPSB0aGlzLnByb2dyYW1zW2ldID0gd3JhcFByb2dyYW0odGhpcywgaSwgZm4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByb2dyYW1XcmFwcGVyO1xuICAgIH0sXG5cbiAgICBkYXRhOiBmdW5jdGlvbih2YWx1ZSwgZGVwdGgpIHtcbiAgICAgIHdoaWxlICh2YWx1ZSAmJiBkZXB0aC0tKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUuX3BhcmVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIG1lcmdlOiBmdW5jdGlvbihwYXJhbSwgY29tbW9uKSB7XG4gICAgICBsZXQgb2JqID0gcGFyYW0gfHwgY29tbW9uO1xuXG4gICAgICBpZiAocGFyYW0gJiYgY29tbW9uICYmIChwYXJhbSAhPT0gY29tbW9uKSkge1xuICAgICAgICBvYmogPSBVdGlscy5leHRlbmQoe30sIGNvbW1vbiwgcGFyYW0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG5cbiAgICBub29wOiBlbnYuVk0ubm9vcCxcbiAgICBjb21waWxlckluZm86IHRlbXBsYXRlU3BlYy5jb21waWxlclxuICB9O1xuXG4gIGZ1bmN0aW9uIHJldChjb250ZXh0LCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgZGF0YSA9IG9wdGlvbnMuZGF0YTtcblxuICAgIHJldC5fc2V0dXAob3B0aW9ucyk7XG4gICAgaWYgKCFvcHRpb25zLnBhcnRpYWwgJiYgdGVtcGxhdGVTcGVjLnVzZURhdGEpIHtcbiAgICAgIGRhdGEgPSBpbml0RGF0YShjb250ZXh0LCBkYXRhKTtcbiAgICB9XG4gICAgbGV0IGRlcHRocyxcbiAgICAgICAgYmxvY2tQYXJhbXMgPSB0ZW1wbGF0ZVNwZWMudXNlQmxvY2tQYXJhbXMgPyBbXSA6IHVuZGVmaW5lZDtcbiAgICBpZiAodGVtcGxhdGVTcGVjLnVzZURlcHRocykge1xuICAgICAgaWYgKG9wdGlvbnMuZGVwdGhzKSB7XG4gICAgICAgIGRlcHRocyA9IGNvbnRleHQgIT09IG9wdGlvbnMuZGVwdGhzWzBdID8gW2NvbnRleHRdLmNvbmNhdChvcHRpb25zLmRlcHRocykgOiBvcHRpb25zLmRlcHRocztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlcHRocyA9IFtjb250ZXh0XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWluKGNvbnRleHQvKiwgb3B0aW9ucyovKSB7XG4gICAgICByZXR1cm4gJycgKyB0ZW1wbGF0ZVNwZWMubWFpbihjb250YWluZXIsIGNvbnRleHQsIGNvbnRhaW5lci5oZWxwZXJzLCBjb250YWluZXIucGFydGlhbHMsIGRhdGEsIGJsb2NrUGFyYW1zLCBkZXB0aHMpO1xuICAgIH1cbiAgICBtYWluID0gZXhlY3V0ZURlY29yYXRvcnModGVtcGxhdGVTcGVjLm1haW4sIG1haW4sIGNvbnRhaW5lciwgb3B0aW9ucy5kZXB0aHMgfHwgW10sIGRhdGEsIGJsb2NrUGFyYW1zKTtcbiAgICByZXR1cm4gbWFpbihjb250ZXh0LCBvcHRpb25zKTtcbiAgfVxuICByZXQuaXNUb3AgPSB0cnVlO1xuXG4gIHJldC5fc2V0dXAgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLnBhcnRpYWwpIHtcbiAgICAgIGNvbnRhaW5lci5oZWxwZXJzID0gY29udGFpbmVyLm1lcmdlKG9wdGlvbnMuaGVscGVycywgZW52LmhlbHBlcnMpO1xuXG4gICAgICBpZiAodGVtcGxhdGVTcGVjLnVzZVBhcnRpYWwpIHtcbiAgICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gY29udGFpbmVyLm1lcmdlKG9wdGlvbnMucGFydGlhbHMsIGVudi5wYXJ0aWFscyk7XG4gICAgICB9XG4gICAgICBpZiAodGVtcGxhdGVTcGVjLnVzZVBhcnRpYWwgfHwgdGVtcGxhdGVTcGVjLnVzZURlY29yYXRvcnMpIHtcbiAgICAgICAgY29udGFpbmVyLmRlY29yYXRvcnMgPSBjb250YWluZXIubWVyZ2Uob3B0aW9ucy5kZWNvcmF0b3JzLCBlbnYuZGVjb3JhdG9ycyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lci5oZWxwZXJzID0gb3B0aW9ucy5oZWxwZXJzO1xuICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gb3B0aW9ucy5wYXJ0aWFscztcbiAgICAgIGNvbnRhaW5lci5kZWNvcmF0b3JzID0gb3B0aW9ucy5kZWNvcmF0b3JzO1xuICAgIH1cbiAgfTtcblxuICByZXQuX2NoaWxkID0gZnVuY3Rpb24oaSwgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocykge1xuICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlQmxvY2tQYXJhbXMgJiYgIWJsb2NrUGFyYW1zKSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdtdXN0IHBhc3MgYmxvY2sgcGFyYW1zJyk7XG4gICAgfVxuICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlRGVwdGhzICYmICFkZXB0aHMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ211c3QgcGFzcyBwYXJlbnQgZGVwdGhzJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHdyYXBQcm9ncmFtKGNvbnRhaW5lciwgaSwgdGVtcGxhdGVTcGVjW2ldLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKTtcbiAgfTtcbiAgcmV0dXJuIHJldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdyYXBQcm9ncmFtKGNvbnRhaW5lciwgaSwgZm4sIGRhdGEsIGRlY2xhcmVkQmxvY2tQYXJhbXMsIGJsb2NrUGFyYW1zLCBkZXB0aHMpIHtcbiAgZnVuY3Rpb24gcHJvZyhjb250ZXh0LCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgY3VycmVudERlcHRocyA9IGRlcHRocztcbiAgICBpZiAoZGVwdGhzICYmIGNvbnRleHQgIT09IGRlcHRoc1swXSkge1xuICAgICAgY3VycmVudERlcHRocyA9IFtjb250ZXh0XS5jb25jYXQoZGVwdGhzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm4oY29udGFpbmVyLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBjb250YWluZXIuaGVscGVycywgY29udGFpbmVyLnBhcnRpYWxzLFxuICAgICAgICBvcHRpb25zLmRhdGEgfHwgZGF0YSxcbiAgICAgICAgYmxvY2tQYXJhbXMgJiYgW29wdGlvbnMuYmxvY2tQYXJhbXNdLmNvbmNhdChibG9ja1BhcmFtcyksXG4gICAgICAgIGN1cnJlbnREZXB0aHMpO1xuICB9XG5cbiAgcHJvZyA9IGV4ZWN1dGVEZWNvcmF0b3JzKGZuLCBwcm9nLCBjb250YWluZXIsIGRlcHRocywgZGF0YSwgYmxvY2tQYXJhbXMpO1xuXG4gIHByb2cucHJvZ3JhbSA9IGk7XG4gIHByb2cuZGVwdGggPSBkZXB0aHMgPyBkZXB0aHMubGVuZ3RoIDogMDtcbiAgcHJvZy5ibG9ja1BhcmFtcyA9IGRlY2xhcmVkQmxvY2tQYXJhbXMgfHwgMDtcbiAgcmV0dXJuIHByb2c7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUGFydGlhbChwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gIGlmICghcGFydGlhbCkge1xuICAgIGlmIChvcHRpb25zLm5hbWUgPT09ICdAcGFydGlhbC1ibG9jaycpIHtcbiAgICAgIHBhcnRpYWwgPSBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydGlhbCA9IG9wdGlvbnMucGFydGlhbHNbb3B0aW9ucy5uYW1lXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIXBhcnRpYWwuY2FsbCAmJiAhb3B0aW9ucy5uYW1lKSB7XG4gICAgLy8gVGhpcyBpcyBhIGR5bmFtaWMgcGFydGlhbCB0aGF0IHJldHVybmVkIGEgc3RyaW5nXG4gICAgb3B0aW9ucy5uYW1lID0gcGFydGlhbDtcbiAgICBwYXJ0aWFsID0gb3B0aW9ucy5wYXJ0aWFsc1twYXJ0aWFsXTtcbiAgfVxuICByZXR1cm4gcGFydGlhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludm9rZVBhcnRpYWwocGFydGlhbCwgY29udGV4dCwgb3B0aW9ucykge1xuICBvcHRpb25zLnBhcnRpYWwgPSB0cnVlO1xuICBpZiAob3B0aW9ucy5pZHMpIHtcbiAgICBvcHRpb25zLmRhdGEuY29udGV4dFBhdGggPSBvcHRpb25zLmlkc1swXSB8fCBvcHRpb25zLmRhdGEuY29udGV4dFBhdGg7XG4gIH1cblxuICBsZXQgcGFydGlhbEJsb2NrO1xuICBpZiAob3B0aW9ucy5mbiAmJiBvcHRpb25zLmZuICE9PSBub29wKSB7XG4gICAgb3B0aW9ucy5kYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICBwYXJ0aWFsQmxvY2sgPSBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXSA9IG9wdGlvbnMuZm47XG5cbiAgICBpZiAocGFydGlhbEJsb2NrLnBhcnRpYWxzKSB7XG4gICAgICBvcHRpb25zLnBhcnRpYWxzID0gVXRpbHMuZXh0ZW5kKHt9LCBvcHRpb25zLnBhcnRpYWxzLCBwYXJ0aWFsQmxvY2sucGFydGlhbHMpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwYXJ0aWFsID09PSB1bmRlZmluZWQgJiYgcGFydGlhbEJsb2NrKSB7XG4gICAgcGFydGlhbCA9IHBhcnRpYWxCbG9jaztcbiAgfVxuXG4gIGlmIChwYXJ0aWFsID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdUaGUgcGFydGlhbCAnICsgb3B0aW9ucy5uYW1lICsgJyBjb3VsZCBub3QgYmUgZm91bmQnKTtcbiAgfSBlbHNlIGlmIChwYXJ0aWFsIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICByZXR1cm4gcGFydGlhbChjb250ZXh0LCBvcHRpb25zKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgcmV0dXJuICcnOyB9XG5cbmZ1bmN0aW9uIGluaXREYXRhKGNvbnRleHQsIGRhdGEpIHtcbiAgaWYgKCFkYXRhIHx8ICEoJ3Jvb3QnIGluIGRhdGEpKSB7XG4gICAgZGF0YSA9IGRhdGEgPyBjcmVhdGVGcmFtZShkYXRhKSA6IHt9O1xuICAgIGRhdGEucm9vdCA9IGNvbnRleHQ7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVEZWNvcmF0b3JzKGZuLCBwcm9nLCBjb250YWluZXIsIGRlcHRocywgZGF0YSwgYmxvY2tQYXJhbXMpIHtcbiAgaWYgKGZuLmRlY29yYXRvcikge1xuICAgIGxldCBwcm9wcyA9IHt9O1xuICAgIHByb2cgPSBmbi5kZWNvcmF0b3IocHJvZywgcHJvcHMsIGNvbnRhaW5lciwgZGVwdGhzICYmIGRlcHRoc1swXSwgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocyk7XG4gICAgVXRpbHMuZXh0ZW5kKHByb2csIHByb3BzKTtcbiAgfVxuICByZXR1cm4gcHJvZztcbn1cbiIsIi8vIEJ1aWxkIG91dCBvdXIgYmFzaWMgU2FmZVN0cmluZyB0eXBlXG5mdW5jdGlvbiBTYWZlU3RyaW5nKHN0cmluZykge1xuICB0aGlzLnN0cmluZyA9IHN0cmluZztcbn1cblxuU2FmZVN0cmluZy5wcm90b3R5cGUudG9TdHJpbmcgPSBTYWZlU3RyaW5nLnByb3RvdHlwZS50b0hUTUwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICcnICsgdGhpcy5zdHJpbmc7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTYWZlU3RyaW5nO1xuIiwiY29uc3QgZXNjYXBlID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiN4Mjc7JyxcbiAgJ2AnOiAnJiN4NjA7JyxcbiAgJz0nOiAnJiN4M0Q7J1xufTtcblxuY29uc3QgYmFkQ2hhcnMgPSAvWyY8PlwiJ2A9XS9nLFxuICAgICAgcG9zc2libGUgPSAvWyY8PlwiJ2A9XS87XG5cbmZ1bmN0aW9uIGVzY2FwZUNoYXIoY2hyKSB7XG4gIHJldHVybiBlc2NhcGVbY2hyXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChvYmovKiAsIC4uLnNvdXJjZSAqLykge1xuICBmb3IgKGxldCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IGtleSBpbiBhcmd1bWVudHNbaV0pIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXJndW1lbnRzW2ldLCBrZXkpKSB7XG4gICAgICAgIG9ialtrZXldID0gYXJndW1lbnRzW2ldW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZXhwb3J0IGxldCB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8vIFNvdXJjZWQgZnJvbSBsb2Rhc2hcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXN0aWVqcy9sb2Rhc2gvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHRcbi8qIGVzbGludC1kaXNhYmxlIGZ1bmMtc3R5bGUgKi9cbmxldCBpc0Z1bmN0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbn07XG4vLyBmYWxsYmFjayBmb3Igb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmlcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5pZiAoaXNGdW5jdGlvbigveC8pKSB7XG4gIGlzRnVuY3Rpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gIH07XG59XG5leHBvcnQge2lzRnVuY3Rpb259O1xuLyogZXNsaW50LWVuYWJsZSBmdW5jLXN0eWxlICovXG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSA/IHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nIDogZmFsc2U7XG59O1xuXG4vLyBPbGRlciBJRSB2ZXJzaW9ucyBkbyBub3QgZGlyZWN0bHkgc3VwcG9ydCBpbmRleE9mIHNvIHdlIG11c3QgaW1wbGVtZW50IG91ciBvd24sIHNhZGx5LlxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIHZhbHVlKSB7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChhcnJheVtpXSA9PT0gdmFsdWUpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZUV4cHJlc3Npb24oc3RyaW5nKSB7XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIC8vIGRvbid0IGVzY2FwZSBTYWZlU3RyaW5ncywgc2luY2UgdGhleSdyZSBhbHJlYWR5IHNhZmVcbiAgICBpZiAoc3RyaW5nICYmIHN0cmluZy50b0hUTUwpIHtcbiAgICAgIHJldHVybiBzdHJpbmcudG9IVE1MKCk7XG4gICAgfSBlbHNlIGlmIChzdHJpbmcgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH0gZWxzZSBpZiAoIXN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZyArICcnO1xuICAgIH1cblxuICAgIC8vIEZvcmNlIGEgc3RyaW5nIGNvbnZlcnNpb24gYXMgdGhpcyB3aWxsIGJlIGRvbmUgYnkgdGhlIGFwcGVuZCByZWdhcmRsZXNzIGFuZFxuICAgIC8vIHRoZSByZWdleCB0ZXN0IHdpbGwgZG8gdGhpcyB0cmFuc3BhcmVudGx5IGJlaGluZCB0aGUgc2NlbmVzLCBjYXVzaW5nIGlzc3VlcyBpZlxuICAgIC8vIGFuIG9iamVjdCdzIHRvIHN0cmluZyBoYXMgZXNjYXBlZCBjaGFyYWN0ZXJzIGluIGl0LlxuICAgIHN0cmluZyA9ICcnICsgc3RyaW5nO1xuICB9XG5cbiAgaWYgKCFwb3NzaWJsZS50ZXN0KHN0cmluZykpIHsgcmV0dXJuIHN0cmluZzsgfVxuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoYmFkQ2hhcnMsIGVzY2FwZUNoYXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcmFtZShvYmplY3QpIHtcbiAgbGV0IGZyYW1lID0gZXh0ZW5kKHt9LCBvYmplY3QpO1xuICBmcmFtZS5fcGFyZW50ID0gb2JqZWN0O1xuICByZXR1cm4gZnJhbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBibG9ja1BhcmFtcyhwYXJhbXMsIGlkcykge1xuICBwYXJhbXMucGF0aCA9IGlkcztcbiAgcmV0dXJuIHBhcmFtcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZENvbnRleHRQYXRoKGNvbnRleHRQYXRoLCBpZCkge1xuICByZXR1cm4gKGNvbnRleHRQYXRoID8gY29udGV4dFBhdGggKyAnLicgOiAnJykgKyBpZDtcbn1cbiIsIi8vIENyZWF0ZSBhIHNpbXBsZSBwYXRoIGFsaWFzIHRvIGFsbG93IGJyb3dzZXJpZnkgdG8gcmVzb2x2ZVxuLy8gdGhlIHJ1bnRpbWUgb24gYSBzdXBwb3J0ZWQgcGF0aC5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9kaXN0L2Nqcy9oYW5kbGViYXJzLnJ1bnRpbWUnKVsnZGVmYXVsdCddO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiaGFuZGxlYmFycy9ydW50aW1lXCIpW1wiZGVmYXVsdFwiXTtcbiIsIi8qIVxuICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2Mi4xLjRcbiAqIGh0dHA6Ly9qcXVlcnkuY29tL1xuICpcbiAqIEluY2x1ZGVzIFNpenpsZS5qc1xuICogaHR0cDovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiAyMDE1LTA0LTI4VDE2OjAxWlxuICovXG5cbihmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuXG5cdGlmICggdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Ly8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YFxuXHRcdC8vIGlzIHByZXNlbnQsIGV4ZWN1dGUgdGhlIGZhY3RvcnkgYW5kIGdldCBqUXVlcnkuXG5cdFx0Ly8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGBcblx0XHQvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy5cblx0XHQvLyBUaGlzIGFjY2VudHVhdGVzIHRoZSBuZWVkIGZvciB0aGUgY3JlYXRpb24gb2YgYSByZWFsIGB3aW5kb3dgLlxuXHRcdC8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIikod2luZG93KTtcblx0XHQvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLlxuXHRcdG1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmRvY3VtZW50ID9cblx0XHRcdGZhY3RvcnkoIGdsb2JhbCwgdHJ1ZSApIDpcblx0XHRcdGZ1bmN0aW9uKCB3ICkge1xuXHRcdFx0XHRpZiAoICF3LmRvY3VtZW50ICkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFjdG9yeSggdyApO1xuXHRcdFx0fTtcblx0fSBlbHNlIHtcblx0XHRmYWN0b3J5KCBnbG9iYWwgKTtcblx0fVxuXG4vLyBQYXNzIHRoaXMgaWYgd2luZG93IGlzIG5vdCBkZWZpbmVkIHlldFxufSh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7XG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3ggMTgrXG4vLyBDYW4ndCBiZSBpbiBzdHJpY3QgbW9kZSwgc2V2ZXJhbCBsaWJzIGluY2x1ZGluZyBBU1AuTkVUIHRyYWNlXG4vLyB0aGUgc3RhY2sgdmlhIGFyZ3VtZW50cy5jYWxsZXIuY2FsbGVlIGFuZCBGaXJlZm94IGRpZXMgaWZcbi8vIHlvdSB0cnkgdG8gdHJhY2UgdGhyb3VnaCBcInVzZSBzdHJpY3RcIiBjYWxsIGNoYWlucy4gKCMxMzMzNSlcbi8vXG5cbnZhciBhcnIgPSBbXTtcblxudmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG52YXIgY29uY2F0ID0gYXJyLmNvbmNhdDtcblxudmFyIHB1c2ggPSBhcnIucHVzaDtcblxudmFyIGluZGV4T2YgPSBhcnIuaW5kZXhPZjtcblxudmFyIGNsYXNzMnR5cGUgPSB7fTtcblxudmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcblxudmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBzdXBwb3J0ID0ge307XG5cblxuXG52YXJcblx0Ly8gVXNlIHRoZSBjb3JyZWN0IGRvY3VtZW50IGFjY29yZGluZ2x5IHdpdGggd2luZG93IGFyZ3VtZW50IChzYW5kYm94KVxuXHRkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCxcblxuXHR2ZXJzaW9uID0gXCIyLjEuNFwiLFxuXG5cdC8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5XG5cdGpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHQvLyBUaGUgalF1ZXJ5IG9iamVjdCBpcyBhY3R1YWxseSBqdXN0IHRoZSBpbml0IGNvbnN0cnVjdG9yICdlbmhhbmNlZCdcblx0XHQvLyBOZWVkIGluaXQgaWYgalF1ZXJ5IGlzIGNhbGxlZCAoanVzdCBhbGxvdyBlcnJvciB0byBiZSB0aHJvd24gaWYgbm90IGluY2x1ZGVkKVxuXHRcdHJldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoIHNlbGVjdG9yLCBjb250ZXh0ICk7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjFcblx0Ly8gTWFrZSBzdXJlIHdlIHRyaW0gQk9NIGFuZCBOQlNQXG5cdHJ0cmltID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFxuXG5cdC8vIE1hdGNoZXMgZGFzaGVkIHN0cmluZyBmb3IgY2FtZWxpemluZ1xuXHRybXNQcmVmaXggPSAvXi1tcy0vLFxuXHRyZGFzaEFscGhhID0gLy0oW1xcZGEtel0pL2dpLFxuXG5cdC8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcblx0ZmNhbWVsQ2FzZSA9IGZ1bmN0aW9uKCBhbGwsIGxldHRlciApIHtcblx0XHRyZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG5cdH07XG5cbmpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7XG5cdC8vIFRoZSBjdXJyZW50IHZlcnNpb24gb2YgalF1ZXJ5IGJlaW5nIHVzZWRcblx0anF1ZXJ5OiB2ZXJzaW9uLFxuXG5cdGNvbnN0cnVjdG9yOiBqUXVlcnksXG5cblx0Ly8gU3RhcnQgd2l0aCBhbiBlbXB0eSBzZWxlY3RvclxuXHRzZWxlY3RvcjogXCJcIixcblxuXHQvLyBUaGUgZGVmYXVsdCBsZW5ndGggb2YgYSBqUXVlcnkgb2JqZWN0IGlzIDBcblx0bGVuZ3RoOiAwLFxuXG5cdHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gR2V0IHRoZSBOdGggZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldCBPUlxuXHQvLyBHZXQgdGhlIHdob2xlIG1hdGNoZWQgZWxlbWVudCBzZXQgYXMgYSBjbGVhbiBhcnJheVxuXHRnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7XG5cdFx0cmV0dXJuIG51bSAhPSBudWxsID9cblxuXHRcdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIG9uZSBlbGVtZW50IGZyb20gdGhlIHNldFxuXHRcdFx0KCBudW0gPCAwID8gdGhpc1sgbnVtICsgdGhpcy5sZW5ndGggXSA6IHRoaXNbIG51bSBdICkgOlxuXG5cdFx0XHQvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBpbiBhIGNsZWFuIGFycmF5XG5cdFx0XHRzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gVGFrZSBhbiBhcnJheSBvZiBlbGVtZW50cyBhbmQgcHVzaCBpdCBvbnRvIHRoZSBzdGFja1xuXHQvLyAocmV0dXJuaW5nIHRoZSBuZXcgbWF0Y2hlZCBlbGVtZW50IHNldClcblx0cHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cblx0XHQvLyBCdWlsZCBhIG5ldyBqUXVlcnkgbWF0Y2hlZCBlbGVtZW50IHNldFxuXHRcdHZhciByZXQgPSBqUXVlcnkubWVyZ2UoIHRoaXMuY29uc3RydWN0b3IoKSwgZWxlbXMgKTtcblxuXHRcdC8vIEFkZCB0aGUgb2xkIG9iamVjdCBvbnRvIHRoZSBzdGFjayAoYXMgYSByZWZlcmVuY2UpXG5cdFx0cmV0LnByZXZPYmplY3QgPSB0aGlzO1xuXHRcdHJldC5jb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuXG5cdFx0Ly8gUmV0dXJuIHRoZSBuZXdseS1mb3JtZWQgZWxlbWVudCBzZXRcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdC8vIEV4ZWN1dGUgYSBjYWxsYmFjayBmb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBzZXQuXG5cdC8vIChZb3UgY2FuIHNlZWQgdGhlIGFyZ3VtZW50cyB3aXRoIGFuIGFycmF5IG9mIGFyZ3MsIGJ1dCB0aGlzIGlzXG5cdC8vIG9ubHkgdXNlZCBpbnRlcm5hbGx5Lilcblx0ZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrLCBhcmdzICkge1xuXHRcdHJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2ssIGFyZ3MgKTtcblx0fSxcblxuXHRtYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5tYXAodGhpcywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApO1xuXHRcdH0pKTtcblx0fSxcblxuXHRzbGljZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTtcblx0fSxcblxuXHRmaXJzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIDAgKTtcblx0fSxcblxuXHRsYXN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggLTEgKTtcblx0fSxcblxuXHRlcTogZnVuY3Rpb24oIGkgKSB7XG5cdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0aiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzW2pdIF0gOiBbXSApO1xuXHR9LFxuXG5cdGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKG51bGwpO1xuXHR9LFxuXG5cdC8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS5cblx0Ly8gQmVoYXZlcyBsaWtlIGFuIEFycmF5J3MgbWV0aG9kLCBub3QgbGlrZSBhIGpRdWVyeSBtZXRob2QuXG5cdHB1c2g6IHB1c2gsXG5cdHNvcnQ6IGFyci5zb3J0LFxuXHRzcGxpY2U6IGFyci5zcGxpY2Vcbn07XG5cbmpRdWVyeS5leHRlbmQgPSBqUXVlcnkuZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG5cdHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbMF0gfHwge30sXG5cdFx0aSA9IDEsXG5cdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XHRkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cblx0XHQvLyBTa2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307XG5cdFx0aSsrO1xuXHR9XG5cblx0Ly8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG5cdGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24odGFyZ2V0KSApIHtcblx0XHR0YXJnZXQgPSB7fTtcblx0fVxuXG5cdC8vIEV4dGVuZCBqUXVlcnkgaXRzZWxmIGlmIG9ubHkgb25lIGFyZ3VtZW50IGlzIHBhc3NlZFxuXHRpZiAoIGkgPT09IGxlbmd0aCApIHtcblx0XHR0YXJnZXQgPSB0aGlzO1xuXHRcdGktLTtcblx0fVxuXG5cdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAoIChvcHRpb25zID0gYXJndW1lbnRzWyBpIF0pICE9IG51bGwgKSB7XG5cdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRcdHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuXHRcdFx0XHRjb3B5ID0gb3B0aW9uc1sgbmFtZSBdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0aWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcblx0XHRcdFx0aWYgKCBkZWVwICYmIGNvcHkgJiYgKCBqUXVlcnkuaXNQbGFpbk9iamVjdChjb3B5KSB8fCAoY29weUlzQXJyYXkgPSBqUXVlcnkuaXNBcnJheShjb3B5KSkgKSApIHtcblx0XHRcdFx0XHRpZiAoIGNvcHlJc0FycmF5ICkge1xuXHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc0FycmF5KHNyYykgPyBzcmMgOiBbXTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBqUXVlcnkuZXh0ZW5kKCBkZWVwLCBjbG9uZSwgY29weSApO1xuXG5cdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0fSBlbHNlIGlmICggY29weSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0gY29weTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdHJldHVybiB0YXJnZXQ7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0Ly8gVW5pcXVlIGZvciBlYWNoIGNvcHkgb2YgalF1ZXJ5IG9uIHRoZSBwYWdlXG5cdGV4cGFuZG86IFwialF1ZXJ5XCIgKyAoIHZlcnNpb24gKyBNYXRoLnJhbmRvbSgpICkucmVwbGFjZSggL1xcRC9nLCBcIlwiICksXG5cblx0Ly8gQXNzdW1lIGpRdWVyeSBpcyByZWFkeSB3aXRob3V0IHRoZSByZWFkeSBtb2R1bGVcblx0aXNSZWFkeTogdHJ1ZSxcblxuXHRlcnJvcjogZnVuY3Rpb24oIG1zZyApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoIG1zZyApO1xuXHR9LFxuXG5cdG5vb3A6IGZ1bmN0aW9uKCkge30sXG5cblx0aXNGdW5jdGlvbjogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnR5cGUob2JqKSA9PT0gXCJmdW5jdGlvblwiO1xuXHR9LFxuXG5cdGlzQXJyYXk6IEFycmF5LmlzQXJyYXksXG5cblx0aXNXaW5kb3c6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0cmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdztcblx0fSxcblxuXHRpc051bWVyaWM6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0Ly8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKG51bGx8dHJ1ZXxmYWxzZXxcIlwiKVxuXHRcdC8vIC4uLmJ1dCBtaXNpbnRlcnByZXRzIGxlYWRpbmctbnVtYmVyIHN0cmluZ3MsIHBhcnRpY3VsYXJseSBoZXggbGl0ZXJhbHMgKFwiMHguLi5cIilcblx0XHQvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU5cblx0XHQvLyBhZGRpbmcgMSBjb3JyZWN0cyBsb3NzIG9mIHByZWNpc2lvbiBmcm9tIHBhcnNlRmxvYXQgKCMxNTEwMClcblx0XHRyZXR1cm4gIWpRdWVyeS5pc0FycmF5KCBvYmogKSAmJiAob2JqIC0gcGFyc2VGbG9hdCggb2JqICkgKyAxKSA+PSAwO1xuXHR9LFxuXG5cdGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0Ly8gTm90IHBsYWluIG9iamVjdHM6XG5cdFx0Ly8gLSBBbnkgb2JqZWN0IG9yIHZhbHVlIHdob3NlIGludGVybmFsIFtbQ2xhc3NdXSBwcm9wZXJ0eSBpcyBub3QgXCJbb2JqZWN0IE9iamVjdF1cIlxuXHRcdC8vIC0gRE9NIG5vZGVzXG5cdFx0Ly8gLSB3aW5kb3dcblx0XHRpZiAoIGpRdWVyeS50eXBlKCBvYmogKSAhPT0gXCJvYmplY3RcIiB8fCBvYmoubm9kZVR5cGUgfHwgalF1ZXJ5LmlzV2luZG93KCBvYmogKSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoIG9iai5jb25zdHJ1Y3RvciAmJlxuXHRcdFx0XHQhaGFzT3duLmNhbGwoIG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwiaXNQcm90b3R5cGVPZlwiICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlIGZ1bmN0aW9uIGhhc24ndCByZXR1cm5lZCBhbHJlYWR5LCB3ZSdyZSBjb25maWRlbnQgdGhhdFxuXHRcdC8vIHxvYmp8IGlzIGEgcGxhaW4gb2JqZWN0LCBjcmVhdGVkIGJ5IHt9IG9yIGNvbnN0cnVjdGVkIHdpdGggbmV3IE9iamVjdFxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIG5hbWU7XG5cdFx0Zm9yICggbmFtZSBpbiBvYmogKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdHR5cGU6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0aWYgKCBvYmogPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiBvYmogKyBcIlwiO1xuXHRcdH1cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMCwgaU9TPDYgKGZ1bmN0aW9uaXNoIFJlZ0V4cClcblx0XHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgP1xuXHRcdFx0Y2xhc3MydHlwZVsgdG9TdHJpbmcuY2FsbChvYmopIF0gfHwgXCJvYmplY3RcIiA6XG5cdFx0XHR0eXBlb2Ygb2JqO1xuXHR9LFxuXG5cdC8vIEV2YWx1YXRlcyBhIHNjcmlwdCBpbiBhIGdsb2JhbCBjb250ZXh0XG5cdGdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBjb2RlICkge1xuXHRcdHZhciBzY3JpcHQsXG5cdFx0XHRpbmRpcmVjdCA9IGV2YWw7XG5cblx0XHRjb2RlID0galF1ZXJ5LnRyaW0oIGNvZGUgKTtcblxuXHRcdGlmICggY29kZSApIHtcblx0XHRcdC8vIElmIHRoZSBjb2RlIGluY2x1ZGVzIGEgdmFsaWQsIHByb2xvZ3VlIHBvc2l0aW9uXG5cdFx0XHQvLyBzdHJpY3QgbW9kZSBwcmFnbWEsIGV4ZWN1dGUgY29kZSBieSBpbmplY3RpbmcgYVxuXHRcdFx0Ly8gc2NyaXB0IHRhZyBpbnRvIHRoZSBkb2N1bWVudC5cblx0XHRcdGlmICggY29kZS5pbmRleE9mKFwidXNlIHN0cmljdFwiKSA9PT0gMSApIHtcblx0XHRcdFx0c2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblx0XHRcdFx0c2NyaXB0LnRleHQgPSBjb2RlO1xuXHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHQgKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBzY3JpcHQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBPdGhlcndpc2UsIGF2b2lkIHRoZSBET00gbm9kZSBjcmVhdGlvbiwgaW5zZXJ0aW9uXG5cdFx0XHQvLyBhbmQgcmVtb3ZhbCBieSB1c2luZyBhbiBpbmRpcmVjdCBnbG9iYWwgZXZhbFxuXHRcdFx0XHRpbmRpcmVjdCggY29kZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKVxuXHRjYW1lbENhc2U6IGZ1bmN0aW9uKCBzdHJpbmcgKSB7XG5cdFx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG5cdH0sXG5cblx0bm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHR9LFxuXG5cdC8vIGFyZ3MgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0ZWFjaDogZnVuY3Rpb24oIG9iaiwgY2FsbGJhY2ssIGFyZ3MgKSB7XG5cdFx0dmFyIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBvYmoubGVuZ3RoLFxuXHRcdFx0aXNBcnJheSA9IGlzQXJyYXlsaWtlKCBvYmogKTtcblxuXHRcdGlmICggYXJncyApIHtcblx0XHRcdGlmICggaXNBcnJheSApIHtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5hcHBseSggb2JqWyBpIF0sIGFyZ3MgKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KCBvYmpbIGkgXSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEEgc3BlY2lhbCwgZmFzdCwgY2FzZSBmb3IgdGhlIG1vc3QgY29tbW9uIHVzZSBvZiBlYWNoXG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICggaXNBcnJheSApIHtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApO1xuXG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xXG5cdHRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdHJldHVybiB0ZXh0ID09IG51bGwgP1xuXHRcdFx0XCJcIiA6XG5cdFx0XHQoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcblx0fSxcblxuXHQvLyByZXN1bHRzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHtcblx0XHR2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTtcblxuXHRcdGlmICggYXJyICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGlzQXJyYXlsaWtlKCBPYmplY3QoYXJyKSApICkge1xuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIHJldCxcblx0XHRcdFx0XHR0eXBlb2YgYXJyID09PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRbIGFyciBdIDogYXJyXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwdXNoLmNhbGwoIHJldCwgYXJyICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHRpbkFycmF5OiBmdW5jdGlvbiggZWxlbSwgYXJyLCBpICkge1xuXHRcdHJldHVybiBhcnIgPT0gbnVsbCA/IC0xIDogaW5kZXhPZi5jYWxsKCBhcnIsIGVsZW0sIGkgKTtcblx0fSxcblxuXHRtZXJnZTogZnVuY3Rpb24oIGZpcnN0LCBzZWNvbmQgKSB7XG5cdFx0dmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxuXHRcdFx0aiA9IDAsXG5cdFx0XHRpID0gZmlyc3QubGVuZ3RoO1xuXG5cdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGogXTtcblx0XHR9XG5cblx0XHRmaXJzdC5sZW5ndGggPSBpO1xuXG5cdFx0cmV0dXJuIGZpcnN0O1xuXHR9LFxuXG5cdGdyZXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGludmVydCApIHtcblx0XHR2YXIgY2FsbGJhY2tJbnZlcnNlLFxuXHRcdFx0bWF0Y2hlcyA9IFtdLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRjYWxsYmFja0V4cGVjdCA9ICFpbnZlcnQ7XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgb25seSBzYXZpbmcgdGhlIGl0ZW1zXG5cdFx0Ly8gdGhhdCBwYXNzIHRoZSB2YWxpZGF0b3IgZnVuY3Rpb25cblx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdGNhbGxiYWNrSW52ZXJzZSA9ICFjYWxsYmFjayggZWxlbXNbIGkgXSwgaSApO1xuXHRcdFx0aWYgKCBjYWxsYmFja0ludmVyc2UgIT09IGNhbGxiYWNrRXhwZWN0ICkge1xuXHRcdFx0XHRtYXRjaGVzLnB1c2goIGVsZW1zWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbWF0Y2hlcztcblx0fSxcblxuXHQvLyBhcmcgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBhcmcgKSB7XG5cdFx0dmFyIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRpc0FycmF5ID0gaXNBcnJheWxpa2UoIGVsZW1zICksXG5cdFx0XHRyZXQgPSBbXTtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzXG5cdFx0aWYgKCBpc0FycmF5ICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gR28gdGhyb3VnaCBldmVyeSBrZXkgb24gdGhlIG9iamVjdCxcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICggaSBpbiBlbGVtcyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRcdHJldHVybiBjb25jYXQuYXBwbHkoIFtdLCByZXQgKTtcblx0fSxcblxuXHQvLyBBIGdsb2JhbCBHVUlEIGNvdW50ZXIgZm9yIG9iamVjdHNcblx0Z3VpZDogMSxcblxuXHQvLyBCaW5kIGEgZnVuY3Rpb24gdG8gYSBjb250ZXh0LCBvcHRpb25hbGx5IHBhcnRpYWxseSBhcHBseWluZyBhbnlcblx0Ly8gYXJndW1lbnRzLlxuXHRwcm94eTogZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkge1xuXHRcdHZhciB0bXAsIGFyZ3MsIHByb3h5O1xuXG5cdFx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHRtcCA9IGZuWyBjb250ZXh0IF07XG5cdFx0XHRjb250ZXh0ID0gZm47XG5cdFx0XHRmbiA9IHRtcDtcblx0XHR9XG5cblx0XHQvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlY1xuXHRcdC8vIHRoaXMgdGhyb3dzIGEgVHlwZUVycm9yLCBidXQgd2Ugd2lsbCBqdXN0IHJldHVybiB1bmRlZmluZWQuXG5cdFx0aWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIGZuICkgKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIFNpbXVsYXRlZCBiaW5kXG5cdFx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMiApO1xuXHRcdHByb3h5ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gZm4uYXBwbHkoIGNvbnRleHQgfHwgdGhpcywgYXJncy5jb25jYXQoIHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTtcblx0XHR9O1xuXG5cdFx0Ly8gU2V0IHRoZSBndWlkIG9mIHVuaXF1ZSBoYW5kbGVyIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGhhbmRsZXIsIHNvIGl0IGNhbiBiZSByZW1vdmVkXG5cdFx0cHJveHkuZ3VpZCA9IGZuLmd1aWQgPSBmbi5ndWlkIHx8IGpRdWVyeS5ndWlkKys7XG5cblx0XHRyZXR1cm4gcHJveHk7XG5cdH0sXG5cblx0bm93OiBEYXRlLm5vdyxcblxuXHQvLyBqUXVlcnkuc3VwcG9ydCBpcyBub3QgdXNlZCBpbiBDb3JlIGJ1dCBvdGhlciBwcm9qZWN0cyBhdHRhY2ggdGhlaXJcblx0Ly8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC5cblx0c3VwcG9ydDogc3VwcG9ydFxufSk7XG5cbi8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcFxualF1ZXJ5LmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbihpLCBuYW1lKSB7XG5cdGNsYXNzMnR5cGVbIFwiW29iamVjdCBcIiArIG5hbWUgKyBcIl1cIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xufSk7XG5cbmZ1bmN0aW9uIGlzQXJyYXlsaWtlKCBvYmogKSB7XG5cblx0Ly8gU3VwcG9ydDogaU9TIDguMiAobm90IHJlcHJvZHVjaWJsZSBpbiBzaW11bGF0b3IpXG5cdC8vIGBpbmAgY2hlY2sgdXNlZCB0byBwcmV2ZW50IEpJVCBlcnJvciAoZ2gtMjE0NSlcblx0Ly8gaGFzT3duIGlzbid0IHVzZWQgaGVyZSBkdWUgdG8gZmFsc2UgbmVnYXRpdmVzXG5cdC8vIHJlZ2FyZGluZyBOb2RlbGlzdCBsZW5ndGggaW4gSUVcblx0dmFyIGxlbmd0aCA9IFwibGVuZ3RoXCIgaW4gb2JqICYmIG9iai5sZW5ndGgsXG5cdFx0dHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblxuXHRpZiAoIHR5cGUgPT09IFwiZnVuY3Rpb25cIiB8fCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGlmICggb2JqLm5vZGVUeXBlID09PSAxICYmIGxlbmd0aCApIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHJldHVybiB0eXBlID09PSBcImFycmF5XCIgfHwgbGVuZ3RoID09PSAwIHx8XG5cdFx0dHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajtcbn1cbnZhciBTaXp6bGUgPVxuLyohXG4gKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4yLjAtcHJlXG4gKiBodHRwOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCAyMDA4LCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTQtMTItMTZcbiAqL1xuKGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbnZhciBpLFxuXHRzdXBwb3J0LFxuXHRFeHByLFxuXHRnZXRUZXh0LFxuXHRpc1hNTCxcblx0dG9rZW5pemUsXG5cdGNvbXBpbGUsXG5cdHNlbGVjdCxcblx0b3V0ZXJtb3N0Q29udGV4dCxcblx0c29ydElucHV0LFxuXHRoYXNEdXBsaWNhdGUsXG5cblx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRzZXREb2N1bWVudCxcblx0ZG9jdW1lbnQsXG5cdGRvY0VsZW0sXG5cdGRvY3VtZW50SXNIVE1MLFxuXHRyYnVnZ3lRU0EsXG5cdHJidWdneU1hdGNoZXMsXG5cdG1hdGNoZXMsXG5cdGNvbnRhaW5zLFxuXG5cdC8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGFcblx0ZXhwYW5kbyA9IFwic2l6emxlXCIgKyAxICogbmV3IERhdGUoKSxcblx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRkaXJydW5zID0gMCxcblx0ZG9uZSA9IDAsXG5cdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHR0b2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0Y29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9LFxuXG5cdC8vIEdlbmVyYWwtcHVycG9zZSBjb25zdGFudHNcblx0TUFYX05FR0FUSVZFID0gMSA8PCAzMSxcblxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdGhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksXG5cdGFyciA9IFtdLFxuXHRwb3AgPSBhcnIucG9wLFxuXHRwdXNoX25hdGl2ZSA9IGFyci5wdXNoLFxuXHRwdXNoID0gYXJyLnB1c2gsXG5cdHNsaWNlID0gYXJyLnNsaWNlLFxuXHQvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0Ly8gaHR0cDovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdGluZGV4T2YgPSBmdW5jdGlvbiggbGlzdCwgZWxlbSApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGlmICggbGlzdFtpXSA9PT0gZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fSxcblxuXHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblxuXHQvLyBSZWd1bGFyIGV4cHJlc3Npb25zXG5cblx0Ly8gV2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyN3aGl0ZXNwYWNlXG5cdHdoaXRlc3BhY2UgPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc3ludGF4LyNjaGFyYWN0ZXJzXG5cdGNoYXJhY3RlckVuY29kaW5nID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixcblxuXHQvLyBMb29zZWx5IG1vZGVsZWQgb24gQ1NTIGlkZW50aWZpZXIgY2hhcmFjdGVyc1xuXHQvLyBBbiB1bnF1b3RlZCB2YWx1ZSBzaG91bGQgYmUgYSBDU1MgaWRlbnRpZmllciBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuXHQvLyBQcm9wZXIgc3ludGF4OiBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXJcblx0aWRlbnRpZmllciA9IGNoYXJhY3RlckVuY29kaW5nLnJlcGxhY2UoIFwid1wiLCBcIncjXCIgKSxcblxuXHQvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcblx0YXR0cmlidXRlcyA9IFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gT3BlcmF0b3IgKGNhcHR1cmUgMilcblx0XHRcIiooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIFwiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG5cdFx0XCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFwiKlxcXFxdXCIsXG5cblx0cHNldWRvcyA9IFwiOihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpKD86XFxcXCgoXCIgK1xuXHRcdC8vIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHNlbGVjdG9ycyBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBwcmVGaWx0ZXIsIHByZWZlciBhcmd1bWVudHM6XG5cdFx0Ly8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpXG5cdFx0XCIoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXxcIiArXG5cdFx0Ly8gMi4gc2ltcGxlIChjYXB0dXJlIDYpXG5cdFx0XCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBhdHRyaWJ1dGVzICsgXCIpKil8XCIgK1xuXHRcdC8vIDMuIGFueXRoaW5nIGVsc2UgKGNhcHR1cmUgMilcblx0XHRcIi4qXCIgK1xuXHRcdFwiKVxcXFwpfClcIixcblxuXHQvLyBMZWFkaW5nIGFuZCBub24tZXNjYXBlZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBjYXB0dXJpbmcgc29tZSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHByZWNlZGluZyB0aGUgbGF0dGVyXG5cdHJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArIFwiK1wiLCBcImdcIiApLFxuXHRydHJpbSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIiArIHdoaXRlc3BhY2UgKyBcIiskXCIsIFwiZ1wiICksXG5cblx0cmNvbW1hID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqLFwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cdHJjb21iaW5hdG9ycyA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKihbPit+XXxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXG5cdHJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCBcIj1cIiArIHdoaXRlc3BhY2UgKyBcIiooW15cXFxcXSdcXFwiXSo/KVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsIFwiZ1wiICksXG5cblx0cnBzZXVkbyA9IG5ldyBSZWdFeHAoIHBzZXVkb3MgKSxcblx0cmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCBcIl5cIiArIGlkZW50aWZpZXIgKyBcIiRcIiApLFxuXG5cdG1hdGNoRXhwciA9IHtcblx0XHRcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKVwiICksXG5cdFx0XCJDTEFTU1wiOiBuZXcgUmVnRXhwKCBcIl5cXFxcLihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpXCIgKSxcblx0XHRcIlRBR1wiOiBuZXcgUmVnRXhwKCBcIl4oXCIgKyBjaGFyYWN0ZXJFbmNvZGluZy5yZXBsYWNlKCBcIndcIiwgXCJ3KlwiICkgKyBcIilcIiApLFxuXHRcdFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcblx0XHRcIlBTRVVET1wiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHBzZXVkb3MgKSxcblx0XHRcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWystXXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihcXFxcZCspfCkpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KVwiLCBcImlcIiApLFxuXHRcdFwiYm9vbFwiOiBuZXcgUmVnRXhwKCBcIl4oPzpcIiArIGJvb2xlYW5zICsgXCIpJFwiLCBcImlcIiApLFxuXHRcdC8vIEZvciB1c2UgaW4gbGlicmFyaWVzIGltcGxlbWVudGluZyAuaXMoKVxuXHRcdC8vIFdlIHVzZSB0aGlzIGZvciBQT1MgbWF0Y2hpbmcgaW4gYHNlbGVjdGBcblx0XHRcIm5lZWRzQ29udGV4dFwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIgK1xuXHRcdFx0d2hpdGVzcGFjZSArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG5cdH0sXG5cblx0cmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJoZWFkZXIgPSAvXmhcXGQkL2ksXG5cblx0cm5hdGl2ZSA9IC9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXG5cblx0Ly8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzXG5cdHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblxuXHRyc2libGluZyA9IC9bK35dLyxcblx0cmVzY2FwZSA9IC8nfFxcXFwvZyxcblxuXHQvLyBDU1MgZXNjYXBlcyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzXG5cdHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICsgXCI/fChcIiArIHdoaXRlc3BhY2UgKyBcIil8LilcIiwgXCJpZ1wiICksXG5cdGZ1bmVzY2FwZSA9IGZ1bmN0aW9uKCBfLCBlc2NhcGVkLCBlc2NhcGVkV2hpdGVzcGFjZSApIHtcblx0XHR2YXIgaGlnaCA9IFwiMHhcIiArIGVzY2FwZWQgLSAweDEwMDAwO1xuXHRcdC8vIE5hTiBtZWFucyBub24tY29kZXBvaW50XG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyNFxuXHRcdC8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgK1wiMHhcIlxuXHRcdHJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID9cblx0XHRcdGVzY2FwZWQgOlxuXHRcdFx0aGlnaCA8IDAgP1xuXHRcdFx0XHQvLyBCTVAgY29kZXBvaW50XG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOlxuXHRcdFx0XHQvLyBTdXBwbGVtZW50YWwgUGxhbmUgY29kZXBvaW50IChzdXJyb2dhdGUgcGFpcilcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7XG5cdH0sXG5cblx0Ly8gVXNlZCBmb3IgaWZyYW1lc1xuXHQvLyBTZWUgc2V0RG9jdW1lbnQoKVxuXHQvLyBSZW1vdmluZyB0aGUgZnVuY3Rpb24gd3JhcHBlciBjYXVzZXMgYSBcIlBlcm1pc3Npb24gRGVuaWVkXCJcblx0Ly8gZXJyb3IgaW4gSUVcblx0dW5sb2FkSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHNldERvY3VtZW50KCk7XG5cdH07XG5cbi8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG50cnkge1xuXHRwdXNoLmFwcGx5KFxuXHRcdChhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSxcblx0XHRwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuXHQpO1xuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMFxuXHQvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5XG5cdGFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7XG59IGNhdGNoICggZSApIHtcblx0cHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggP1xuXG5cdFx0Ly8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGVcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTtcblx0XHR9IDpcblxuXHRcdC8vIFN1cHBvcnQ6IElFPDlcblx0XHQvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5XG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0dmFyIGogPSB0YXJnZXQubGVuZ3RoLFxuXHRcdFx0XHRpID0gMDtcblx0XHRcdC8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aFxuXHRcdFx0d2hpbGUgKCAodGFyZ2V0W2orK10gPSBlbHNbaSsrXSkgKSB7fVxuXHRcdFx0dGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIG1hdGNoLCBlbGVtLCBtLCBub2RlVHlwZSxcblx0XHQvLyBRU0EgdmFyc1xuXHRcdGksIGdyb3Vwcywgb2xkLCBuaWQsIG5ld0NvbnRleHQsIG5ld1NlbGVjdG9yO1xuXG5cdGlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXG5cdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblx0bm9kZVR5cGUgPSBjb250ZXh0Lm5vZGVUeXBlO1xuXG5cdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHtcblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0aWYgKCAhc2VlZCAmJiBkb2N1bWVudElzSFRNTCApIHtcblxuXHRcdC8vIFRyeSB0byBzaG9ydGN1dCBmaW5kIG9wZXJhdGlvbnMgd2hlbiBwb3NzaWJsZSAoZS5nLiwgbm90IHVuZGVyIERvY3VtZW50RnJhZ21lbnQpXG5cdFx0aWYgKCBub2RlVHlwZSAhPT0gMTEgJiYgKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHtcblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCIjSURcIilcblx0XHRcdGlmICggKG0gPSBtYXRjaFsxXSkgKSB7XG5cdFx0XHRcdGlmICggbm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKTtcblx0XHRcdFx0XHQvLyBDaGVjayBwYXJlbnROb2RlIHRvIGNhdGNoIHdoZW4gQmxhY2tiZXJyeSA0LjYgcmV0dXJuc1xuXHRcdFx0XHRcdC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgKGpRdWVyeSAjNjk2Mylcblx0XHRcdFx0XHRpZiAoIGVsZW0gJiYgZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIElFLCBPcGVyYSwgYW5kIFdlYmtpdCByZXR1cm4gaXRlbXNcblx0XHRcdFx0XHRcdC8vIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0aWYgKCBlbGVtLmlkID09PSBtICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDb250ZXh0IGlzIG5vdCBhIGRvY3VtZW50XG5cdFx0XHRcdFx0aWYgKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgJiYgKGVsZW0gPSBjb250ZXh0Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgJiZcblx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiYgZWxlbS5pZCA9PT0gbSApIHtcblx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCJUQUdcIilcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzJdICkge1xuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHQvLyBTcGVlZC11cDogU2l6emxlKFwiLkNMQVNTXCIpXG5cdFx0XHR9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFFTQSBwYXRoXG5cdFx0aWYgKCBzdXBwb3J0LnFzYSAmJiAoIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkpICkge1xuXHRcdFx0bmlkID0gb2xkID0gZXhwYW5kbztcblx0XHRcdG5ld0NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0bmV3U2VsZWN0b3IgPSBub2RlVHlwZSAhPT0gMSAmJiBzZWxlY3RvcjtcblxuXHRcdFx0Ly8gcVNBIHdvcmtzIHN0cmFuZ2VseSBvbiBFbGVtZW50LXJvb3RlZCBxdWVyaWVzXG5cdFx0XHQvLyBXZSBjYW4gd29yayBhcm91bmQgdGhpcyBieSBzcGVjaWZ5aW5nIGFuIGV4dHJhIElEIG9uIHRoZSByb290XG5cdFx0XHQvLyBhbmQgd29ya2luZyB1cCBmcm9tIHRoZXJlIChUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhlIHRlY2huaXF1ZSlcblx0XHRcdC8vIElFIDggZG9lc24ndCB3b3JrIG9uIG9iamVjdCBlbGVtZW50c1xuXHRcdFx0aWYgKCBub2RlVHlwZSA9PT0gMSAmJiBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRcdGdyb3VwcyA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXG5cdFx0XHRcdGlmICggKG9sZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKFwiaWRcIikpICkge1xuXHRcdFx0XHRcdG5pZCA9IG9sZC5yZXBsYWNlKCByZXNjYXBlLCBcIlxcXFwkJlwiICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29udGV4dC5zZXRBdHRyaWJ1dGUoIFwiaWRcIiwgbmlkICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmlkID0gXCJbaWQ9J1wiICsgbmlkICsgXCInXSBcIjtcblxuXHRcdFx0XHRpID0gZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0Z3JvdXBzW2ldID0gbmlkICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmV3Q29udGV4dCA9IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHQ7XG5cdFx0XHRcdG5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oXCIsXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG5ld1NlbGVjdG9yICkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsXG5cdFx0XHRcdFx0XHRuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHR9IGNhdGNoKHFzYUVycm9yKSB7XG5cdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0aWYgKCAhb2xkICkge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBBbGwgb3RoZXJzXG5cdHJldHVybiBzZWxlY3QoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApO1xufVxuXG4vKipcbiAqIENyZWF0ZSBrZXktdmFsdWUgY2FjaGVzIG9mIGxpbWl0ZWQgc2l6ZVxuICogQHJldHVybnMge0Z1bmN0aW9uKHN0cmluZywgT2JqZWN0KX0gUmV0dXJucyB0aGUgT2JqZWN0IGRhdGEgYWZ0ZXIgc3RvcmluZyBpdCBvbiBpdHNlbGYgd2l0aFxuICpcdHByb3BlcnR5IG5hbWUgdGhlIChzcGFjZS1zdWZmaXhlZCkgc3RyaW5nIGFuZCAoaWYgdGhlIGNhY2hlIGlzIGxhcmdlciB0aGFuIEV4cHIuY2FjaGVMZW5ndGgpXG4gKlx0ZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeVxuICovXG5mdW5jdGlvbiBjcmVhdGVDYWNoZSgpIHtcblx0dmFyIGtleXMgPSBbXTtcblxuXHRmdW5jdGlvbiBjYWNoZSgga2V5LCB2YWx1ZSApIHtcblx0XHQvLyBVc2UgKGtleSArIFwiIFwiKSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aCBuYXRpdmUgcHJvdG90eXBlIHByb3BlcnRpZXMgKHNlZSBJc3N1ZSAjMTU3KVxuXHRcdGlmICgga2V5cy5wdXNoKCBrZXkgKyBcIiBcIiApID4gRXhwci5jYWNoZUxlbmd0aCApIHtcblx0XHRcdC8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllc1xuXHRcdFx0ZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTtcblx0XHR9XG5cdFx0cmV0dXJuIChjYWNoZVsga2V5ICsgXCIgXCIgXSA9IHZhbHVlKTtcblx0fVxuXHRyZXR1cm4gY2FjaGU7XG59XG5cbi8qKlxuICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtYXJrXG4gKi9cbmZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7XG5cdGZuWyBleHBhbmRvIF0gPSB0cnVlO1xuXHRyZXR1cm4gZm47XG59XG5cbi8qKlxuICogU3VwcG9ydCB0ZXN0aW5nIHVzaW5nIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBkaXYgYW5kIGV4cGVjdHMgYSBib29sZWFuIHJlc3VsdFxuICovXG5mdW5jdGlvbiBhc3NlcnQoIGZuICkge1xuXHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuXHR0cnkge1xuXHRcdHJldHVybiAhIWZuKCBkaXYgKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSBmaW5hbGx5IHtcblx0XHQvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHRcblx0XHRpZiAoIGRpdi5wYXJlbnROb2RlICkge1xuXHRcdFx0ZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGRpdiApO1xuXHRcdH1cblx0XHQvLyByZWxlYXNlIG1lbW9yeSBpbiBJRVxuXHRcdGRpdiA9IG51bGw7XG5cdH1cbn1cblxuLyoqXG4gKiBBZGRzIHRoZSBzYW1lIGhhbmRsZXIgZm9yIGFsbCBvZiB0aGUgc3BlY2lmaWVkIGF0dHJzXG4gKiBAcGFyYW0ge1N0cmluZ30gYXR0cnMgUGlwZS1zZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBtZXRob2QgdGhhdCB3aWxsIGJlIGFwcGxpZWRcbiAqL1xuZnVuY3Rpb24gYWRkSGFuZGxlKCBhdHRycywgaGFuZGxlciApIHtcblx0dmFyIGFyciA9IGF0dHJzLnNwbGl0KFwifFwiKSxcblx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdEV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5nc1xuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYlxuICovXG5mdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7XG5cdHZhciBjdXIgPSBiICYmIGEsXG5cdFx0ZGlmZiA9IGN1ciAmJiBhLm5vZGVUeXBlID09PSAxICYmIGIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdCggfmIuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICkgLVxuXHRcdFx0KCB+YS5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKTtcblxuXHQvLyBVc2UgSUUgc291cmNlSW5kZXggaWYgYXZhaWxhYmxlIG9uIGJvdGggbm9kZXNcblx0aWYgKCBkaWZmICkge1xuXHRcdHJldHVybiBkaWZmO1xuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgYiBmb2xsb3dzIGFcblx0aWYgKCBjdXIgKSB7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHtcblx0XHRcdGlmICggY3VyID09PSBiICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGEgPyAxIDogLTE7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGJ1dHRvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvblBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiAobmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCIpICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5mdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggYXJndW1lbnQgKSB7XG5cdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdHZhciBqLFxuXHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblxuXHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHtcblx0XHRcdFx0XHRzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcbiAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHQvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0XG5cdC8vIChzdWNoIGFzIGxvYWRpbmcgaWZyYW1lcyBpbiBJRSAtICM0ODMzKVxuXHR2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcblx0cmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gXCJIVE1MXCIgOiBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICovXG5zZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuXHR2YXIgaGFzQ29tcGFyZSwgcGFyZW50LFxuXHRcdGRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYztcblxuXHQvLyBJZiBubyBkb2N1bWVudCBhbmQgZG9jdW1lbnRFbGVtZW50IGlzIGF2YWlsYWJsZSwgcmV0dXJuXG5cdGlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9XG5cblx0Ly8gU2V0IG91ciBkb2N1bWVudFxuXHRkb2N1bWVudCA9IGRvYztcblx0ZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdHBhcmVudCA9IGRvYy5kZWZhdWx0VmlldztcblxuXHQvLyBTdXBwb3J0OiBJRT44XG5cdC8vIElmIGlmcmFtZSBkb2N1bWVudCBpcyBhc3NpZ25lZCB0byBcImRvY3VtZW50XCIgdmFyaWFibGUgYW5kIGlmIGlmcmFtZSBoYXMgYmVlbiByZWxvYWRlZCxcblx0Ly8gSUUgd2lsbCB0aHJvdyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBhY2Nlc3NpbmcgXCJkb2N1bWVudFwiIHZhcmlhYmxlLCBzZWUgalF1ZXJ5ICMxMzkzNlxuXHQvLyBJRTYtOCBkbyBub3Qgc3VwcG9ydCB0aGUgZGVmYXVsdFZpZXcgcHJvcGVydHkgc28gcGFyZW50IHdpbGwgYmUgdW5kZWZpbmVkXG5cdGlmICggcGFyZW50ICYmIHBhcmVudCAhPT0gcGFyZW50LnRvcCApIHtcblx0XHQvLyBJRTExIGRvZXMgbm90IGhhdmUgYXR0YWNoRXZlbnQsIHNvIGFsbCBtdXN0IHN1ZmZlclxuXHRcdGlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJ1bmxvYWRcIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTtcblx0XHR9IGVsc2UgaWYgKCBwYXJlbnQuYXR0YWNoRXZlbnQgKSB7XG5cdFx0XHRwYXJlbnQuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlciApO1xuXHRcdH1cblx0fVxuXG5cdC8qIFN1cHBvcnQgdGVzdHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jICk7XG5cblx0LyogQXR0cmlidXRlc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gU3VwcG9ydDogSUU8OFxuXHQvLyBWZXJpZnkgdGhhdCBnZXRBdHRyaWJ1dGUgcmVhbGx5IHJldHVybnMgYXR0cmlidXRlcyBhbmQgbm90IHByb3BlcnRpZXNcblx0Ly8gKGV4Y2VwdGluZyBJRTggYm9vbGVhbnMpXG5cdHN1cHBvcnQuYXR0cmlidXRlcyA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5jbGFzc05hbWUgPSBcImlcIjtcblx0XHRyZXR1cm4gIWRpdi5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIik7XG5cdH0pO1xuXG5cdC8qIGdldEVsZW1lbnQocylCeSpcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSByZXR1cm5zIG9ubHkgZWxlbWVudHNcblx0c3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5hcHBlbmRDaGlsZCggZG9jLmNyZWF0ZUNvbW1lbnQoXCJcIikgKTtcblx0XHRyZXR1cm4gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBTdXBwb3J0OiBJRTw5XG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTtcblxuXHQvLyBTdXBwb3J0OiBJRTwxMFxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcblx0Ly8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbWF0aWNhbGx5LXNldCBuYW1lcyxcblx0Ly8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0XG5cdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbztcblx0XHRyZXR1cm4gIWRvYy5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jLmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBJRCBmaW5kIGFuZCBmaWx0ZXJcblx0aWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG5cdFx0RXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHR2YXIgbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XG5cdFx0XHRcdC8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zXG5cdFx0XHRcdC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgIzY5NjNcblx0XHRcdFx0cmV0dXJuIG0gJiYgbS5wYXJlbnROb2RlID8gWyBtIF0gOiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHQvLyBTdXBwb3J0OiBJRTYvN1xuXHRcdC8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXRcblx0XHRkZWxldGUgRXhwci5maW5kW1wiSURcIl07XG5cblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gIGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7XG5cdFx0XHRcdHJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fVxuXG5cdC8vIFRhZ1xuXHRFeHByLmZpbmRbXCJUQUdcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID9cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBEb2N1bWVudEZyYWdtZW50IG5vZGVzIGRvbid0IGhhdmUgZ0VCVE5cblx0XHRcdH0gZWxzZSBpZiAoIHN1cHBvcnQucXNhICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTtcblx0XHRcdH1cblx0XHR9IDpcblxuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0dG1wID0gW10sXG5cdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHQvLyBCeSBoYXBweSBjb2luY2lkZW5jZSwgYSAoYnJva2VuKSBnRUJUTiBhcHBlYXJzIG9uIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgdG9vXG5cdFx0XHRcdHJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50c1xuXHRcdFx0aWYgKCB0YWcgPT09IFwiKlwiICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHR0bXAucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0bXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHR9O1xuXG5cdC8vIENsYXNzXG5cdEV4cHIuZmluZFtcIkNMQVNTXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7XG5cdFx0aWYgKCBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0fTtcblxuXHQvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0XG5cblx0Ly8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSlcblx0cmJ1Z2d5TWF0Y2hlcyA9IFtdO1xuXG5cdC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG5cdC8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvclxuXHQvLyB3aGVuZXZlciBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgaXMgYWNjZXNzZWQgb24gYW4gaWZyYW1lXG5cdC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG5cdC8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM3OFxuXHRyYnVnZ3lRU0EgPSBbXTtcblxuXHRpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jLnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG5cdFx0Ly8gQnVpbGQgUVNBIHJlZ2V4XG5cdFx0Ly8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZVxuXHRcdFx0Ly8gVGhpcyBpcyB0byB0ZXN0IElFJ3MgdHJlYXRtZW50IG9mIG5vdCBleHBsaWNpdGx5XG5cdFx0XHQvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcblx0XHRcdC8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoXG5cdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaW5uZXJIVE1MID0gXCI8YSBpZD0nXCIgKyBleHBhbmRvICsgXCInPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBpZD0nXCIgKyBleHBhbmRvICsgXCItXFxmXScgbXNhbGxvd2NhcHR1cmU9Jyc+XCIgK1xuXHRcdFx0XHRcIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcblx0XHRcdC8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj1cblx0XHRcdC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuXHRcdFx0Ly8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlsqXiRdPVwiICsgd2hpdGVzcGFjZSArIFwiKig/OicnfFxcXCJcXFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCBcInZhbHVlXCIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseVxuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuMissIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS43K1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW2lkfj1cIiArIGV4cGFuZG8gKyBcIi1dXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwifj1cIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIjpjaGVja2VkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCssIGlPUyA4K1xuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNjg1MVxuXHRcdFx0Ly8gSW4tcGFnZSBgc2VsZWN0b3IjaWQgc2liaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggXCJhI1wiICsgZXhwYW5kbyArIFwiKypcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIuIy4rWyt+XVwiKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzXG5cdFx0XHQvLyBUaGUgdHlwZSBhbmQgbmFtZSBhdHRyaWJ1dGVzIGFyZSByZXN0cmljdGVkIGR1cmluZyAuaW5uZXJIVE1MIGFzc2lnbm1lbnRcblx0XHRcdHZhciBpbnB1dCA9IGRvYy5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0XHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcImhpZGRlblwiICk7XG5cdFx0XHRkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJEXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGVcblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIm5hbWVcIiArIHdoaXRlc3BhY2UgKyBcIipbKl4kfCF+XT89XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRkYgMy41IC0gOmVuYWJsZWQvOmRpc2FibGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGhpZGRlbiBlbGVtZW50cyBhcmUgc3RpbGwgZW5hYmxlZClcblx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPcGVyYSAxMC0xMSBkb2VzIG5vdCB0aHJvdyBvbiBwb3N0LWNvbW1hIGludmFsaWQgcHNldWRvc1xuXHRcdFx0ZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpO1xuXHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIsLio6XCIpO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKCAoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgPSBybmF0aXZlLnRlc3QoIChtYXRjaGVzID0gZG9jRWxlbS5tYXRjaGVzIHx8XG5cdFx0ZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ub01hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IpICkpICkge1xuXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdC8vIG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgKElFIDkpXG5cdFx0XHRzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBkaXYsIFwiZGl2XCIgKTtcblxuXHRcdFx0Ly8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvblxuXHRcdFx0Ly8gR2Vja28gZG9lcyBub3QgZXJyb3IsIHJldHVybnMgZmFsc2UgaW5zdGVhZFxuXHRcdFx0bWF0Y2hlcy5jYWxsKCBkaXYsIFwiW3MhPScnXTp4XCIgKTtcblx0XHRcdHJidWdneU1hdGNoZXMucHVzaCggXCIhPVwiLCBwc2V1ZG9zICk7XG5cdFx0fSk7XG5cdH1cblxuXHRyYnVnZ3lRU0EgPSByYnVnZ3lRU0EubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneVFTQS5qb2luKFwifFwiKSApO1xuXHRyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKFwifFwiKSApO1xuXG5cdC8qIENvbnRhaW5zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0aGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApO1xuXG5cdC8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlclxuXHQvLyBQdXJwb3NlZnVsbHkgZG9lcyBub3QgaW1wbGVtZW50IGluY2x1c2l2ZSBkZXNjZW5kZW50XG5cdC8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmXG5cdGNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHR2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLFxuXHRcdFx0XHRidXAgPSBiICYmIGIucGFyZW50Tm9kZTtcblx0XHRcdHJldHVybiBhID09PSBidXAgfHwgISEoIGJ1cCAmJiBidXAubm9kZVR5cGUgPT09IDEgJiYgKFxuXHRcdFx0XHRhZG93bi5jb250YWlucyA/XG5cdFx0XHRcdFx0YWRvd24uY29udGFpbnMoIGJ1cCApIDpcblx0XHRcdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTZcblx0XHRcdCkpO1xuXHRcdH0gOlxuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0aWYgKCBiICkge1xuXHRcdFx0XHR3aGlsZSAoIChiID0gYi5wYXJlbnROb2RlKSApIHtcblx0XHRcdFx0XHRpZiAoIGIgPT09IGEgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdC8qIFNvcnRpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIERvY3VtZW50IG9yZGVyIHNvcnRpbmdcblx0c29ydE9yZGVyID0gaGFzQ29tcGFyZSA/XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXG5cdFx0Ly8gRmxhZyBmb3IgZHVwbGljYXRlIHJlbW92YWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBvbiBtZXRob2QgZXhpc3RlbmNlIGlmIG9ubHkgb25lIGlucHV0IGhhcyBjb21wYXJlRG9jdW1lbnRQb3NpdGlvblxuXHRcdHZhciBjb21wYXJlID0gIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtcblx0XHRpZiAoIGNvbXBhcmUgKSB7XG5cdFx0XHRyZXR1cm4gY29tcGFyZTtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgcG9zaXRpb24gaWYgYm90aCBpbnB1dHMgYmVsb25nIHRvIHRoZSBzYW1lIGRvY3VtZW50XG5cdFx0Y29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PT0gKCBiLm93bmVyRG9jdW1lbnQgfHwgYiApID9cblx0XHRcdGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGIgKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSB3ZSBrbm93IHRoZXkgYXJlIGRpc2Nvbm5lY3RlZFxuXHRcdFx0MTtcblxuXHRcdC8vIERpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdGlmICggY29tcGFyZSAmIDEgfHxcblx0XHRcdCghc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlKSApIHtcblxuXHRcdFx0Ly8gQ2hvb3NlIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaXMgcmVsYXRlZCB0byBvdXIgcHJlZmVycmVkIGRvY3VtZW50XG5cdFx0XHRpZiAoIGEgPT09IGRvYyB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGIgPT09IGRvYyB8fCBiLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGIpICkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXJcblx0XHRcdHJldHVybiBzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbXBhcmUgJiA0ID8gLTEgOiAxO1xuXHR9IDpcblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0Ly8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbFxuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdXAgPSBhLnBhcmVudE5vZGUsXG5cdFx0XHRidXAgPSBiLnBhcmVudE5vZGUsXG5cdFx0XHRhcCA9IFsgYSBdLFxuXHRcdFx0YnAgPSBbIGIgXTtcblxuXHRcdC8vIFBhcmVudGxlc3Mgbm9kZXMgYXJlIGVpdGhlciBkb2N1bWVudHMgb3IgZGlzY29ubmVjdGVkXG5cdFx0aWYgKCAhYXVwIHx8ICFidXAgKSB7XG5cdFx0XHRyZXR1cm4gYSA9PT0gZG9jID8gLTEgOlxuXHRcdFx0XHRiID09PSBkb2MgPyAxIDpcblx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRidXAgPyAxIDpcblx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHR9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdGN1ciA9IGE7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YXAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXHRcdGN1ciA9IGI7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHR3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHtcblx0XHRcdGkrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gaSA/XG5cdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3Rcblx0XHRcdGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG5cdFx0XHRicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHQwO1xuXHR9O1xuXG5cdHJldHVybiBkb2M7XG59O1xuXG5TaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHtcblx0cmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTtcbn07XG5cblNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0Ly8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkXG5cdGV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsIFwiPSckMSddXCIgKTtcblxuXHRpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0KCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuXHRcdCggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuXHRcdHRyeSB7XG5cdFx0XHR2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cblx0XHRcdC8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRcdGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcblx0XHRcdFx0XHQvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuXHRcdFx0XHRcdC8vIGZyYWdtZW50IGluIElFIDlcblx0XHRcdFx0XHRlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHt9XG5cdH1cblxuXHRyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwO1xufTtcblxuU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXHRyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTtcbn07XG5cblNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdHZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sXG5cdFx0Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpXG5cdFx0dmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0Zm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDpcblx0XHRcdHVuZGVmaW5lZDtcblxuXHRyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgP1xuXHRcdHZhbCA6XG5cdFx0c3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDpcblx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xufTtcblxuU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgbXNnICk7XG59O1xuXG4vKipcbiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzXG4gKi9cblNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG5cdHZhciBlbGVtLFxuXHRcdGR1cGxpY2F0ZXMgPSBbXSxcblx0XHRqID0gMCxcblx0XHRpID0gMDtcblxuXHQvLyBVbmxlc3Mgd2UgKmtub3cqIHdlIGNhbiBkZXRlY3QgZHVwbGljYXRlcywgYXNzdW1lIHRoZWlyIHByZXNlbmNlXG5cdGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG5cdHNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApO1xuXHRyZXN1bHRzLnNvcnQoIHNvcnRPcmRlciApO1xuXG5cdGlmICggaGFzRHVwbGljYXRlICkge1xuXHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0aWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7XG5cdFx0XHRcdGogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHNcblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvc2l6emxlL3B1bGwvMjI1XG5cdHNvcnRJbnB1dCA9IG51bGw7XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW1cbiAqL1xuZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBub2RlLFxuXHRcdHJldCA9IFwiXCIsXG5cdFx0aSA9IDAsXG5cdFx0bm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdGlmICggIW5vZGVUeXBlICkge1xuXHRcdC8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5XG5cdFx0d2hpbGUgKCAobm9kZSA9IGVsZW1baSsrXSkgKSB7XG5cdFx0XHQvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2Rlc1xuXHRcdFx0cmV0ICs9IGdldFRleHQoIG5vZGUgKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHtcblx0XHQvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzXG5cdFx0Ly8gaW5uZXJUZXh0IHVzYWdlIHJlbW92ZWQgZm9yIGNvbnNpc3RlbmN5IG9mIG5ldyBsaW5lcyAoalF1ZXJ5ICMxMTE1Mylcblx0XHRpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdHJldCArPSBnZXRUZXh0KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMyB8fCBub2RlVHlwZSA9PT0gNCApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVmFsdWU7XG5cdH1cblx0Ly8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzXG5cblx0cmV0dXJuIHJldDtcbn07XG5cbkV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXG5cdC8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlclxuXHRjYWNoZUxlbmd0aDogNTAsXG5cblx0Y3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cblx0bWF0Y2g6IG1hdGNoRXhwcixcblxuXHRhdHRySGFuZGxlOiB7fSxcblxuXHRmaW5kOiB7fSxcblxuXHRyZWxhdGl2ZToge1xuXHRcdFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCIgXCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiB9LFxuXHRcdFwiK1wiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIn5cIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIgfVxuXHR9LFxuXG5cdHByZUZpbHRlcjoge1xuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdC8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkXG5cdFx0XHRtYXRjaFszXSA9ICggbWF0Y2hbM10gfHwgbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdGlmICggbWF0Y2hbMl0gPT09IFwifj1cIiApIHtcblx0XHRcdFx0bWF0Y2hbM10gPSBcIiBcIiArIG1hdGNoWzNdICsgXCIgXCI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgNCApO1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdC8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbXCJDSElMRFwiXVxuXHRcdFx0XHQxIHR5cGUgKG9ubHl8bnRofC4uLilcblx0XHRcdFx0MiB3aGF0IChjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHQzIGFyZ3VtZW50IChldmVufG9kZHxcXGQqfFxcZCpuKFsrLV1cXGQrKT98Li4uKVxuXHRcdFx0XHQ0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xcZCpufClcblx0XHRcdFx0NSBzaWduIG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ2IHggb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDcgc2lnbiBvZiB5LWNvbXBvbmVudFxuXHRcdFx0XHQ4IHkgb2YgeS1jb21wb25lbnRcblx0XHRcdCovXG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gXCJudGhcIiApIHtcblx0XHRcdFx0Ly8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnRcblx0XHRcdFx0aWYgKCAhbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxEXG5cdFx0XHRcdC8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzFcblx0XHRcdFx0bWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09IFwiZXZlblwiIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICkgKTtcblx0XHRcdFx0bWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApO1xuXG5cdFx0XHQvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaDtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0dmFyIGV4Y2Vzcyxcblx0XHRcdFx0dW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07XG5cblx0XHRcdGlmICggbWF0Y2hFeHByW1wiQ0hJTERcIl0udGVzdCggbWF0Y2hbMF0gKSApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG5cdFx0XHRpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRtYXRjaFsyXSA9IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCI7XG5cblx0XHRcdC8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCB1bnF1b3RlZCAmJiBycHNldWRvLnRlc3QoIHVucXVvdGVkICkgJiZcblx0XHRcdFx0Ly8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcblx0XHRcdFx0KGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJlxuXHRcdFx0XHQvLyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNsb3NpbmcgcGFyZW50aGVzaXNcblx0XHRcdFx0KGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7XG5cblx0XHRcdFx0Ly8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXhcblx0XHRcdFx0bWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHRcdG1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudClcblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgMyApO1xuXHRcdH1cblx0fSxcblxuXHRmaWx0ZXI6IHtcblxuXHRcdFwiVEFHXCI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkge1xuXHRcdFx0dmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lO1xuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNMQVNTXCI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArIFwiIFwiIF07XG5cblx0XHRcdHJldHVybiBwYXR0ZXJuIHx8XG5cdFx0XHRcdChwYXR0ZXJuID0gbmV3IFJlZ0V4cCggXCIoXnxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIGNsYXNzTmFtZSArIFwiKFwiICsgd2hpdGVzcGFjZSArIFwifCQpXCIgKSkgJiZcblx0XHRcdFx0Y2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIgJiYgZWxlbS5jbGFzc05hbWUgfHwgdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIiApO1xuXHRcdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHRcdGlmICggcmVzdWx0ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIiE9XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhb3BlcmF0b3IgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQgKz0gXCJcIjtcblxuXHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiPVwiID8gcmVzdWx0ID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiIT1cIiA/IHJlc3VsdCAhPT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIl49XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA9PT0gMCA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiKj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiQ9XCIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIn49XCIgPyAoIFwiIFwiICsgcmVzdWx0LnJlcGxhY2UoIHJ3aGl0ZXNwYWNlLCBcIiBcIiApICsgXCIgXCIgKS5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcInw9XCIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArIFwiLVwiIDpcblx0XHRcdFx0XHRmYWxzZTtcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIHR5cGUsIHdoYXQsIGFyZ3VtZW50LCBmaXJzdCwgbGFzdCApIHtcblx0XHRcdHZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09IFwibnRoXCIsXG5cdFx0XHRcdGZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSBcImxhc3RcIixcblx0XHRcdFx0b2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cblx0XHRcdHJldHVybiBmaXJzdCA9PT0gMSAmJiBsYXN0ID09PSAwID9cblxuXHRcdFx0XHQvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0fSA6XG5cblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgY2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIGRpZmYsIG5vZGVJbmRleCwgc3RhcnQsXG5cdFx0XHRcdFx0XHRkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLFxuXHRcdFx0XHRcdFx0cGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLFxuXHRcdFx0XHRcdFx0bmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHR1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZTtcblxuXHRcdFx0XHRcdGlmICggcGFyZW50ICkge1xuXG5cdFx0XHRcdFx0XHQvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0XHRpZiAoIHNpbXBsZSApIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBkaXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggb2ZUeXBlID8gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDogbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbylcblx0XHRcdFx0XHRcdFx0XHRzdGFydCA9IGRpciA9IHR5cGUgPT09IFwib25seVwiICYmICFzdGFydCAmJiBcIm5leHRTaWJsaW5nXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07XG5cblx0XHRcdFx0XHRcdC8vIG5vbi14bWwgOm50aC1jaGlsZCguLi4pIHN0b3JlcyBjYWNoZSBkYXRhIG9uIGBwYXJlbnRgXG5cdFx0XHRcdFx0XHRpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNlZWsgYGVsZW1gIGZyb20gYSBwcmV2aW91c2x5LWNhY2hlZCBpbmRleFxuXHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gcGFyZW50WyBleHBhbmRvIF0gfHwgKHBhcmVudFsgZXhwYW5kbyBdID0ge30pO1xuXHRcdFx0XHRcdFx0XHRjYWNoZSA9IG91dGVyQ2FjaGVbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbMF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbMV07XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBjYWNoZVswXSA9PT0gZGlycnVucyAmJiBjYWNoZVsyXTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHNlZWtpbmcgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVha1xuXHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgbm9kZUluZGV4LCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gVXNlIHByZXZpb3VzbHktY2FjaGVkIGVsZW1lbnQgaW5kZXggaWYgYXZhaWxhYmxlXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB1c2VDYWNoZSAmJiAoY2FjaGUgPSAoZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSkpWyB0eXBlIF0pICYmIGNhY2hlWzBdID09PSBkaXJydW5zICkge1xuXHRcdFx0XHRcdFx0XHRkaWZmID0gY2FjaGVbMV07XG5cblx0XHRcdFx0XHRcdC8vIHhtbCA6bnRoLWNoaWxkKC4uLikgb3IgOm50aC1sYXN0LWNoaWxkKC4uLikgb3IgOm50aCgtbGFzdCk/LW9mLXR5cGUoLi4uKVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggKCBvZlR5cGUgPyBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOiBub2RlLm5vZGVUeXBlID09PSAxICkgJiYgKytkaWZmICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0KG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pKVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEluY29ycG9yYXRlIHRoZSBvZmZzZXQsIHRoZW4gY2hlY2sgYWdhaW5zdCBjeWNsZSBzaXplXG5cdFx0XHRcdFx0XHRkaWZmIC09IGxhc3Q7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGlmZiA9PT0gZmlyc3QgfHwgKCBkaWZmICUgZmlyc3QgPT09IDAgJiYgZGlmZiAvIGZpcnN0ID49IDAgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkge1xuXHRcdFx0Ly8gcHNldWRvLWNsYXNzIG5hbWVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzXG5cdFx0XHQvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVyc1xuXHRcdFx0Ly8gUmVtZW1iZXIgdGhhdCBzZXRGaWx0ZXJzIGluaGVyaXRzIGZyb20gcHNldWRvc1xuXHRcdFx0dmFyIGFyZ3MsXG5cdFx0XHRcdGZuID0gRXhwci5wc2V1ZG9zWyBwc2V1ZG8gXSB8fCBFeHByLnNldEZpbHRlcnNbIHBzZXVkby50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIiArIHBzZXVkbyApO1xuXG5cdFx0XHQvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0XG5cdFx0XHQvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvblxuXHRcdFx0Ly8ganVzdCBhcyBTaXp6bGUgZG9lc1xuXHRcdFx0aWYgKCBmblsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRyZXR1cm4gZm4oIGFyZ3VtZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEJ1dCBtYWludGFpbiBzdXBwb3J0IGZvciBvbGQgc2lnbmF0dXJlc1xuXHRcdFx0aWYgKCBmbi5sZW5ndGggPiAxICkge1xuXHRcdFx0XHRhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgXCJcIiwgYXJndW1lbnQgXTtcblx0XHRcdFx0cmV0dXJuIEV4cHIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eSggcHNldWRvLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0XHRcdFx0dmFyIGlkeCxcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZCA9IGZuKCBzZWVkLCBhcmd1bWVudCApLFxuXHRcdFx0XHRcdFx0XHRpID0gbWF0Y2hlZC5sZW5ndGg7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWR4ID0gaW5kZXhPZiggc2VlZCwgbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0XHRzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pIDpcblx0XHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBmbiggZWxlbSwgMCwgYXJncyApO1xuXHRcdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmbjtcblx0XHR9XG5cdH0sXG5cblx0cHNldWRvczoge1xuXHRcdC8vIFBvdGVudGlhbGx5IGNvbXBsZXggcHNldWRvc1xuXHRcdFwibm90XCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHQvLyBUcmltIHRoZSBzZWxlY3RvciBwYXNzZWQgdG8gY29tcGlsZVxuXHRcdFx0Ly8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmdcblx0XHRcdC8vIHNwYWNlcyBhcyBjb21iaW5hdG9yc1xuXHRcdFx0dmFyIGlucHV0ID0gW10sXG5cdFx0XHRcdHJlc3VsdHMgPSBbXSxcblx0XHRcdFx0bWF0Y2hlciA9IGNvbXBpbGUoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSApO1xuXG5cdFx0XHRyZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID9cblx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdFx0XHR1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksXG5cdFx0XHRcdFx0XHRpID0gc2VlZC5sZW5ndGg7XG5cblx0XHRcdFx0XHQvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgXG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0c2VlZFtpXSA9ICEobWF0Y2hlc1tpXSA9IGVsZW0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkgOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdGlucHV0WzBdID0gZWxlbTtcblx0XHRcdFx0XHRtYXRjaGVyKCBpbnB1dCwgbnVsbCwgeG1sLCByZXN1bHRzICk7XG5cdFx0XHRcdFx0Ly8gRG9uJ3Qga2VlcCB0aGUgZWxlbWVudCAoaXNzdWUgIzI5OSlcblx0XHRcdFx0XHRpbnB1dFswXSA9IG51bGw7XG5cdFx0XHRcdFx0cmV0dXJuICFyZXN1bHRzLnBvcCgpO1xuXHRcdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0XCJoYXNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiY29udGFpbnNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS50ZXh0Q29udGVudCB8fCBlbGVtLmlubmVyVGV4dCB8fCBnZXRUZXh0KCBlbGVtICkgKS5pbmRleE9mKCB0ZXh0ICkgPiAtMTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBcIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3Jcblx0XHQvLyBpcyBiYXNlZCBzb2xlbHkgb24gdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZVxuXHRcdC8vIGJlaW5nIGVxdWFsIHRvIHRoZSBpZGVudGlmaWVyIEMsXG5cdFx0Ly8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBcIi1cIi5cblx0XHQvLyBUaGUgbWF0Y2hpbmcgb2YgQyBhZ2FpbnN0IHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUgaXMgcGVyZm9ybWVkIGNhc2UtaW5zZW5zaXRpdmVseS5cblx0XHQvLyBUaGUgaWRlbnRpZmllciBDIGRvZXMgbm90IGhhdmUgdG8gYmUgYSB2YWxpZCBsYW5ndWFnZSBuYW1lLlwiXG5cdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkb1xuXHRcdFwibGFuZ1wiOiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBsYW5nICkge1xuXHRcdFx0Ly8gbGFuZyB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllclxuXHRcdFx0aWYgKCAhcmlkZW50aWZpZXIudGVzdChsYW5nIHx8IFwiXCIpICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgbGFuZzogXCIgKyBsYW5nICk7XG5cdFx0XHR9XG5cdFx0XHRsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBlbGVtTGFuZztcblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdGlmICggKGVsZW1MYW5nID0gZG9jdW1lbnRJc0hUTUwgP1xuXHRcdFx0XHRcdFx0ZWxlbS5sYW5nIDpcblx0XHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIikgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKSApIHtcblxuXHRcdFx0XHRcdFx0ZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW1MYW5nID09PSBsYW5nIHx8IGVsZW1MYW5nLmluZGV4T2YoIGxhbmcgKyBcIi1cIiApID09PSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB3aGlsZSAoIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBNaXNjZWxsYW5lb3VzXG5cdFx0XCJ0YXJnZXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDtcblx0XHRcdHJldHVybiBoYXNoICYmIGhhc2guc2xpY2UoIDEgKSA9PT0gZWxlbS5pZDtcblx0XHR9LFxuXG5cdFx0XCJyb290XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY0VsZW07XG5cdFx0fSxcblxuXHRcdFwiZm9jdXNcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoIWRvY3VtZW50Lmhhc0ZvY3VzIHx8IGRvY3VtZW50Lmhhc0ZvY3VzKCkpICYmICEhKGVsZW0udHlwZSB8fCBlbGVtLmhyZWYgfHwgfmVsZW0udGFiSW5kZXgpO1xuXHRcdH0sXG5cblx0XHQvLyBCb29sZWFuIHByb3BlcnRpZXNcblx0XHRcImVuYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZmFsc2U7XG5cdFx0fSxcblxuXHRcdFwiZGlzYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJjaGVja2VkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gSW4gQ1NTMywgOmNoZWNrZWQgc2hvdWxkIHJldHVybiBib3RoIGNoZWNrZWQgYW5kIHNlbGVjdGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0dmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIChub2RlTmFtZSA9PT0gXCJpbnB1dFwiICYmICEhZWxlbS5jaGVja2VkKSB8fCAobm9kZU5hbWUgPT09IFwib3B0aW9uXCIgJiYgISFlbGVtLnNlbGVjdGVkKTtcblx0XHR9LFxuXG5cdFx0XCJzZWxlY3RlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEFjY2Vzc2luZyB0aGlzIHByb3BlcnR5IG1ha2VzIHNlbGVjdGVkLWJ5LWRlZmF1bHRcblx0XHRcdC8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHlcblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRlbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGVsZW0uc2VsZWN0ZWQgPT09IHRydWU7XG5cdFx0fSxcblxuXHRcdC8vIENvbnRlbnRzXG5cdFx0XCJlbXB0eVwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jZW1wdHktcHNldWRvXG5cdFx0XHQvLyA6ZW1wdHkgaXMgbmVnYXRlZCBieSBlbGVtZW50ICgxKSBvciBjb250ZW50IG5vZGVzICh0ZXh0OiAzOyBjZGF0YTogNDsgZW50aXR5IHJlZjogNSksXG5cdFx0XHQvLyAgIGJ1dCBub3QgYnkgb3RoZXJzIChjb21tZW50OiA4OyBwcm9jZXNzaW5nIGluc3RydWN0aW9uOiA3OyBldGMuKVxuXHRcdFx0Ly8gbm9kZVR5cGUgPCA2IHdvcmtzIGJlY2F1c2UgYXR0cmlidXRlcyAoMikgZG8gbm90IGFwcGVhciBhcyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA8IDYgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJwYXJlbnRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gIUV4cHIucHNldWRvc1tcImVtcHR5XCJdKCBlbGVtICk7XG5cdFx0fSxcblxuXHRcdC8vIEVsZW1lbnQvaW5wdXQgdHlwZXNcblx0XHRcImhlYWRlclwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaGVhZGVyLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJpbnB1dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaW5wdXRzLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJidXR0b25cIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgJiYgZWxlbS50eXBlID09PSBcImJ1dHRvblwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCI7XG5cdFx0fSxcblxuXHRcdFwidGV4dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBhdHRyO1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICYmXG5cdFx0XHRcdGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCIgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTw4XG5cdFx0XHRcdC8vIE5ldyBIVE1MNSBhdHRyaWJ1dGUgdmFsdWVzIChlLmcuLCBcInNlYXJjaFwiKSBhcHBlYXIgd2l0aCBlbGVtLnR5cGUgPT09IFwidGV4dFwiXG5cdFx0XHRcdCggKGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZShcInR5cGVcIikpID09IG51bGwgfHwgYXR0ci50b0xvd2VyQ2FzZSgpID09PSBcInRleHRcIiApO1xuXHRcdH0sXG5cblx0XHQvLyBQb3NpdGlvbi1pbi1jb2xsZWN0aW9uXG5cdFx0XCJmaXJzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIFsgMCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJsYXN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIFsgbGVuZ3RoIC0gMSBdO1xuXHRcdH0pLFxuXG5cdFx0XCJlcVwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHRyZXR1cm4gWyBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50IF07XG5cdFx0fSksXG5cblx0XHRcImV2ZW5cIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcIm9kZFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwibHRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyAtLWkgPj0gMDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJndFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7ICsraSA8IGxlbmd0aDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pXG5cdH1cbn07XG5cbkV4cHIucHNldWRvc1tcIm50aFwiXSA9IEV4cHIucHNldWRvc1tcImVxXCJdO1xuXG4vLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvc1xuZm9yICggaSBpbiB7IHJhZGlvOiB0cnVlLCBjaGVja2JveDogdHJ1ZSwgZmlsZTogdHJ1ZSwgcGFzc3dvcmQ6IHRydWUsIGltYWdlOiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTtcbn1cbmZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIHJlc2V0OiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlQnV0dG9uUHNldWRvKCBpICk7XG59XG5cbi8vIEVhc3kgQVBJIGZvciBjcmVhdGluZyBuZXcgc2V0RmlsdGVyc1xuZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9XG5zZXRGaWx0ZXJzLnByb3RvdHlwZSA9IEV4cHIuZmlsdGVycyA9IEV4cHIucHNldWRvcztcbkV4cHIuc2V0RmlsdGVycyA9IG5ldyBzZXRGaWx0ZXJzKCk7XG5cbnRva2VuaXplID0gU2l6emxlLnRva2VuaXplID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBwYXJzZU9ubHkgKSB7XG5cdHZhciBtYXRjaGVkLCBtYXRjaCwgdG9rZW5zLCB0eXBlLFxuXHRcdHNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsXG5cdFx0Y2FjaGVkID0gdG9rZW5DYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggY2FjaGVkICkge1xuXHRcdHJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7XG5cdH1cblxuXHRzb0ZhciA9IHNlbGVjdG9yO1xuXHRncm91cHMgPSBbXTtcblx0cHJlRmlsdGVycyA9IEV4cHIucHJlRmlsdGVyO1xuXG5cdHdoaWxlICggc29GYXIgKSB7XG5cblx0XHQvLyBDb21tYSBhbmQgZmlyc3QgcnVuXG5cdFx0aWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRpZiAoIG1hdGNoICkge1xuXHRcdFx0XHQvLyBEb24ndCBjb25zdW1lIHRyYWlsaW5nIGNvbW1hcyBhcyB2YWxpZFxuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFswXS5sZW5ndGggKSB8fCBzb0Zhcjtcblx0XHRcdH1cblx0XHRcdGdyb3Vwcy5wdXNoKCAodG9rZW5zID0gW10pICk7XG5cdFx0fVxuXG5cdFx0bWF0Y2hlZCA9IGZhbHNlO1xuXG5cdFx0Ly8gQ29tYmluYXRvcnNcblx0XHRpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHtcblx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0Ly8gQ2FzdCBkZXNjZW5kYW50IGNvbWJpbmF0b3JzIHRvIHNwYWNlXG5cdFx0XHRcdHR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCBcIiBcIiApXG5cdFx0XHR9KTtcblx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0Ly8gRmlsdGVyc1xuXHRcdGZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7XG5cdFx0XHRpZiAoIChtYXRjaCA9IG1hdGNoRXhwclsgdHlwZSBdLmV4ZWMoIHNvRmFyICkpICYmICghcHJlRmlsdGVyc1sgdHlwZSBdIHx8XG5cdFx0XHRcdChtYXRjaCA9IHByZUZpbHRlcnNbIHR5cGUgXSggbWF0Y2ggKSkpICkge1xuXHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0bWF0Y2hlczogbWF0Y2hcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCAhbWF0Y2hlZCApIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2Vzc1xuXHQvLyBpZiB3ZSdyZSBqdXN0IHBhcnNpbmdcblx0Ly8gT3RoZXJ3aXNlLCB0aHJvdyBhbiBlcnJvciBvciByZXR1cm4gdG9rZW5zXG5cdHJldHVybiBwYXJzZU9ubHkgP1xuXHRcdHNvRmFyLmxlbmd0aCA6XG5cdFx0c29GYXIgP1xuXHRcdFx0U2l6emxlLmVycm9yKCBzZWxlY3RvciApIDpcblx0XHRcdC8vIENhY2hlIHRoZSB0b2tlbnNcblx0XHRcdHRva2VuQ2FjaGUoIHNlbGVjdG9yLCBncm91cHMgKS5zbGljZSggMCApO1xufTtcblxuZnVuY3Rpb24gdG9TZWxlY3RvciggdG9rZW5zICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRzZWxlY3RvciA9IFwiXCI7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdHNlbGVjdG9yICs9IHRva2Vuc1tpXS52YWx1ZTtcblx0fVxuXHRyZXR1cm4gc2VsZWN0b3I7XG59XG5cbmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7XG5cdHZhciBkaXIgPSBjb21iaW5hdG9yLmRpcixcblx0XHRjaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBkaXIgPT09IFwicGFyZW50Tm9kZVwiLFxuXHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXG5cdHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIG9sZENhY2hlLCBvdXRlckNhY2hlLFxuXHRcdFx0XHRuZXdDYWNoZSA9IFsgZGlycnVucywgZG9uZU5hbWUgXTtcblxuXHRcdFx0Ly8gV2UgY2FuJ3Qgc2V0IGFyYml0cmFyeSBkYXRhIG9uIFhNTCBub2Rlcywgc28gdGhleSBkb24ndCBiZW5lZml0IGZyb20gZGlyIGNhY2hpbmdcblx0XHRcdGlmICggeG1sICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXHRcdFx0XHRcdFx0aWYgKCAob2xkQ2FjaGUgPSBvdXRlckNhY2hlWyBkaXIgXSkgJiZcblx0XHRcdFx0XHRcdFx0b2xkQ2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBvbGRDYWNoZVsgMSBdID09PSBkb25lTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBBc3NpZ24gdG8gbmV3Q2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKG5ld0NhY2hlWyAyIF0gPSBvbGRDYWNoZVsgMiBdKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFJldXNlIG5ld2NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZVsgZGlyIF0gPSBuZXdDYWNoZTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmdcblx0XHRcdFx0XHRcdFx0aWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHtcblx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IDpcblx0XHRtYXRjaGVyc1swXTtcbn1cblxuZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApO1xuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHR2YXIgZWxlbSxcblx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuXHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0aWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdG5ld1VubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdGlmICggbWFwcGVkICkge1xuXHRcdFx0XHRcdG1hcC5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmV3VW5tYXRjaGVkO1xufVxuXG5mdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7XG5cdGlmICggcG9zdEZpbHRlciAmJiAhcG9zdEZpbHRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG5cdH1cblx0aWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApO1xuXHR9XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHtcblx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0cG9zdE1hcCA9IFtdLFxuXHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHRcblx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCBcIipcIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSxcblxuXHRcdFx0Ly8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uXG5cdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRlbGVtcyxcblxuXHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuXHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cblx0XHRcdFx0XHQvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3Nhcnlcblx0XHRcdFx0XHRbXSA6XG5cblx0XHRcdFx0XHQvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHlcblx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0bWF0Y2hlckluO1xuXG5cdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRtYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHBvc3RGaWx0ZXJcblx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdHBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTtcblxuXHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0aSA9IHRlbXAubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkge1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0dGVtcCA9IFtdO1xuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiZcblx0XHRcdFx0XHRcdCh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHtcblxuXHRcdFx0XHRcdFx0c2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkXG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXJPdXQgPSBjb25kZW5zZShcblx0XHRcdFx0bWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/XG5cdFx0XHRcdFx0bWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDpcblx0XHRcdFx0XHRtYXRjaGVyT3V0XG5cdFx0XHQpO1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHR2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcblx0XHRpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbXCIgXCJdLFxuXHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuXHRcdC8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpXG5cdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHQoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuXHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblx0XHRcdC8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0Y2hlY2tDb250ZXh0ID0gbnVsbDtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSBdO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHtcblx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7XG5cblx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0Ly8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nXG5cdFx0XHRcdGogPSArK2k7XG5cdFx0XHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSxcblx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHRcdHRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0pXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG5cdFx0XHRcdFx0bWF0Y2hlcixcblx0XHRcdFx0XHRpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkge1xuXHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdHN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHtcblx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRpID0gXCIwXCIsXG5cdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0Y29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG5cdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBvdXRlcm1vc3QgKSxcblx0XHRcdFx0Ly8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXJcblx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksXG5cdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ICE9PSBkb2N1bWVudCAmJiBjb250ZXh0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0c1xuXHRcdFx0Ly8gS2VlcCBgaWAgYSBzdHJpbmcgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzIHNvIGBtYXRjaGVkQ291bnRgIHdpbGwgYmUgXCIwMFwiIGJlbG93XG5cdFx0XHQvLyBTdXBwb3J0OiBJRTw5LCBTYWZhcmlcblx0XHRcdC8vIFRvbGVyYXRlIE5vZGVMaXN0IHByb3BlcnRpZXMgKElFOiBcImxlbmd0aFwiOyBTYWZhcmk6IDxudW1iZXI+KSBtYXRjaGluZyBlbGVtZW50cyBieSBpZFxuXHRcdFx0Zm9yICggOyBpICE9PSBsZW4gJiYgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGJ5RWxlbWVudCAmJiBlbGVtICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBlbGVtZW50TWF0Y2hlcnNbaisrXSkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuXHRcdFx0XHRpZiAoIGJ5U2V0ICkge1xuXHRcdFx0XHRcdC8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnNcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzXG5cdFx0XHRtYXRjaGVkQ291bnQgKz0gaTtcblx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0Ly8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuXHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXNcblx0XHRcdFx0XHRzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHNcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXG5cdFx0XHRcdC8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZ1xuXHRcdFx0XHRpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiZcblx0XHRcdFx0XHQoIG1hdGNoZWRDb3VudCArIHNldE1hdGNoZXJzLmxlbmd0aCApID4gMSApIHtcblxuXHRcdFx0XHRcdFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdW5tYXRjaGVkO1xuXHRcdH07XG5cblx0cmV0dXJuIGJ5U2V0ID9cblx0XHRtYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDpcblx0XHRzdXBlck1hdGNoZXI7XG59XG5cbmNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdHZhciBpLFxuXHRcdHNldE1hdGNoZXJzID0gW10sXG5cdFx0ZWxlbWVudE1hdGNoZXJzID0gW10sXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggIWNhY2hlZCApIHtcblx0XHQvLyBHZW5lcmF0ZSBhIGZ1bmN0aW9uIG9mIHJlY3Vyc2l2ZSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjaGVjayBlYWNoIGVsZW1lbnRcblx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0fVxuXHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRjYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTtcblx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApO1xuXG5cdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0Y2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdH1cblx0cmV0dXJuIGNhY2hlZDtcbn07XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3RcbiAqL1xuc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsXG5cdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBubyBzZWVkIGFuZCBvbmx5IG9uZSBncm91cFxuXHRpZiAoIG1hdGNoLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdC8vIFRha2UgYSBzaG9ydGN1dCBhbmQgc2V0IHRoZSBjb250ZXh0IGlmIHRoZSByb290IHNlbGVjdG9yIGlzIGFuIElEXG5cdFx0dG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApO1xuXHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdFx0c3VwcG9ydC5nZXRCeUlkICYmIGNvbnRleHQubm9kZVR5cGUgPT09IDkgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHRcdFx0RXhwci5yZWxhdGl2ZVsgdG9rZW5zWzFdLnR5cGUgXSApIHtcblxuXHRcdFx0Y29udGV4dCA9ICggRXhwci5maW5kW1wiSURcIl0oIHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZShydW5lc2NhcGUsIGZ1bmVzY2FwZSksIGNvbnRleHQgKSB8fCBbXSApWzBdO1xuXHRcdFx0aWYgKCAhY29udGV4dCApIHtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdC8vIFByZWNvbXBpbGVkIG1hdGNoZXJzIHdpbGwgc3RpbGwgdmVyaWZ5IGFuY2VzdHJ5LCBzbyBzdGVwIHVwIGEgbGV2ZWxcblx0XHRcdH0gZWxzZSBpZiAoIGNvbXBpbGVkICkge1xuXHRcdFx0XHRjb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGZXRjaCBhIHNlZWQgc2V0IGZvciByaWdodC10by1sZWZ0IG1hdGNoaW5nXG5cdFx0aSA9IG1hdGNoRXhwcltcIm5lZWRzQ29udGV4dFwiXS50ZXN0KCBzZWxlY3RvciApID8gMCA6IHRva2Vucy5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0b2tlbiA9IHRva2Vuc1tpXTtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgd2UgaGl0IGEgY29tYmluYXRvclxuXHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyAodHlwZSA9IHRva2VuLnR5cGUpIF0gKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAoZmluZCA9IEV4cHIuZmluZFsgdHlwZSBdKSApIHtcblx0XHRcdFx0Ly8gU2VhcmNoLCBleHBhbmRpbmcgY29udGV4dCBmb3IgbGVhZGluZyBzaWJsaW5nIGNvbWJpbmF0b3JzXG5cdFx0XHRcdGlmICggKHNlZWQgPSBmaW5kKFxuXHRcdFx0XHRcdHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSxcblx0XHRcdFx0XHRyc2libGluZy50ZXN0KCB0b2tlbnNbMF0udHlwZSApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdFx0XHRcdCkpICkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgc2VlZCBpcyBlbXB0eSBvciBubyB0b2tlbnMgcmVtYWluLCB3ZSBjYW4gcmV0dXJuIGVhcmx5XG5cdFx0XHRcdFx0dG9rZW5zLnNwbGljZSggaSwgMSApO1xuXHRcdFx0XHRcdHNlbGVjdG9yID0gc2VlZC5sZW5ndGggJiYgdG9TZWxlY3RvciggdG9rZW5zICk7XG5cdFx0XHRcdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIENvbXBpbGUgYW5kIGV4ZWN1dGUgYSBmaWx0ZXJpbmcgZnVuY3Rpb24gaWYgb25lIGlzIG5vdCBwcm92aWRlZFxuXHQvLyBQcm92aWRlIGBtYXRjaGAgdG8gYXZvaWQgcmV0b2tlbml6YXRpb24gaWYgd2UgbW9kaWZpZWQgdGhlIHNlbGVjdG9yIGFib3ZlXG5cdCggY29tcGlsZWQgfHwgY29tcGlsZSggc2VsZWN0b3IsIG1hdGNoICkgKShcblx0XHRzZWVkLFxuXHRcdGNvbnRleHQsXG5cdFx0IWRvY3VtZW50SXNIVE1MLFxuXHRcdHJlc3VsdHMsXG5cdFx0cnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dFxuXHQpO1xuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8vIE9uZS10aW1lIGFzc2lnbm1lbnRzXG5cbi8vIFNvcnQgc3RhYmlsaXR5XG5zdXBwb3J0LnNvcnRTdGFibGUgPSBleHBhbmRvLnNwbGl0KFwiXCIpLnNvcnQoIHNvcnRPcmRlciApLmpvaW4oXCJcIikgPT09IGV4cGFuZG87XG5cbi8vIFN1cHBvcnQ6IENocm9tZSAxNC0zNStcbi8vIEFsd2F5cyBhc3N1bWUgZHVwbGljYXRlcyBpZiB0aGV5IGFyZW4ndCBwYXNzZWQgdG8gdGhlIGNvbXBhcmlzb24gZnVuY3Rpb25cbnN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcyA9ICEhaGFzRHVwbGljYXRlO1xuXG4vLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnRcbnNldERvY3VtZW50KCk7XG5cbi8vIFN1cHBvcnQ6IFdlYmtpdDw1MzcuMzIgLSBTYWZhcmkgNi4wLjMvQ2hyb21lIDI1IChmaXhlZCBpbiBDaHJvbWUgMjcpXG4vLyBEZXRhY2hlZCBub2RlcyBjb25mb3VuZGluZ2x5IGZvbGxvdyAqZWFjaCBvdGhlcipcbnN1cHBvcnQuc29ydERldGFjaGVkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYxICkge1xuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGRpdjEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgKSAmIDE7XG59KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHhcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8YSBocmVmPScjJz48L2E+XCI7XG5cdHJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiA7XG59KSApIHtcblx0YWRkSGFuZGxlKCBcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidHlwZVwiID8gMSA6IDIgKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG5pZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8aW5wdXQvPlwiO1xuXHRkaXYuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuXHRyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRyZXR1cm4gZGl2LmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG59KSApIHtcblx0YWRkSGFuZGxlKCBib29sZWFucywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciB2YWw7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdID09PSB0cnVlID8gbmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0fVxuXHR9KTtcbn1cblxucmV0dXJuIFNpenpsZTtcblxufSkoIHdpbmRvdyApO1xuXG5cblxualF1ZXJ5LmZpbmQgPSBTaXp6bGU7XG5qUXVlcnkuZXhwciA9IFNpenpsZS5zZWxlY3RvcnM7XG5qUXVlcnkuZXhwcltcIjpcIl0gPSBqUXVlcnkuZXhwci5wc2V1ZG9zO1xualF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xualF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDtcbmpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDtcbmpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcblxuXG5cbnZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXG52YXIgcnNpbmdsZVRhZyA9ICgvXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8pO1xuXG5cblxudmFyIHJpc1NpbXBsZSA9IC9eLlteOiNcXFtcXC4sXSokLztcblxuLy8gSW1wbGVtZW50IHRoZSBpZGVudGljYWwgZnVuY3Rpb25hbGl0eSBmb3IgZmlsdGVyIGFuZCBub3RcbmZ1bmN0aW9uIHdpbm5vdyggZWxlbWVudHMsIHF1YWxpZmllciwgbm90ICkge1xuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdC8qIGpzaGludCAtVzAxOCAqL1xuXHRcdFx0cmV0dXJuICEhcXVhbGlmaWVyLmNhbGwoIGVsZW0sIGksIGVsZW0gKSAhPT0gbm90O1xuXHRcdH0pO1xuXG5cdH1cblxuXHRpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGlmICggdHlwZW9mIHF1YWxpZmllciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRpZiAoIHJpc1NpbXBsZS50ZXN0KCBxdWFsaWZpZXIgKSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcblx0XHR9XG5cblx0XHRxdWFsaWZpZXIgPSBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzICk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gKCBpbmRleE9mLmNhbGwoIHF1YWxpZmllciwgZWxlbSApID49IDAgKSAhPT0gbm90O1xuXHR9KTtcbn1cblxualF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkge1xuXHR2YXIgZWxlbSA9IGVsZW1zWyAwIF07XG5cblx0aWYgKCBub3QgKSB7XG5cdFx0ZXhwciA9IFwiOm5vdChcIiArIGV4cHIgKyBcIilcIjtcblx0fVxuXG5cdHJldHVybiBlbGVtcy5sZW5ndGggPT09IDEgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSA/XG5cdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBlbGVtLCBleHByICkgPyBbIGVsZW0gXSA6IFtdIDpcblx0XHRqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDE7XG5cdFx0fSkpO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGZpbmQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgaSxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0cmV0ID0gW10sXG5cdFx0XHRzZWxmID0gdGhpcztcblxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSkgKTtcblx0XHR9XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0alF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApO1xuXHRcdH1cblxuXHRcdC8vIE5lZWRlZCBiZWNhdXNlICQoIHNlbGVjdG9yLCBjb250ZXh0ICkgYmVjb21lcyAkKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKVxuXHRcdHJldCA9IHRoaXMucHVzaFN0YWNrKCBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTtcblx0XHRyZXQuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArIFwiIFwiICsgc2VsZWN0b3IgOiBzZWxlY3Rvcjtcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXHRmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyh0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UpICk7XG5cdH0sXG5cdG5vdDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlKSApO1xuXHR9LFxuXHRpczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiAhIXdpbm5vdyhcblx0XHRcdHRoaXMsXG5cblx0XHRcdC8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXRcblx0XHRcdC8vIHNvICQoXCJwOmZpcnN0XCIpLmlzKFwicDpsYXN0XCIpIHdvbid0IHJldHVybiB0cnVlIGZvciBhIGRvYyB3aXRoIHR3byBcInBcIi5cblx0XHRcdHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgP1xuXHRcdFx0XHRqUXVlcnkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHRzZWxlY3RvciB8fCBbXSxcblx0XHRcdGZhbHNlXG5cdFx0KS5sZW5ndGg7XG5cdH1cbn0pO1xuXG5cbi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0XG5cblxuLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG52YXIgcm9vdGpRdWVyeSxcblxuXHQvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5nc1xuXHQvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpXG5cdC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuXHRycXVpY2tFeHByID0gL14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sXG5cblx0aW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHZhciBtYXRjaCwgZWxlbTtcblxuXHRcdC8vIEhBTkRMRTogJChcIlwiKSwgJChudWxsKSwgJCh1bmRlZmluZWQpLCAkKGZhbHNlKVxuXHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIEhUTUwgc3RyaW5nc1xuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0aWYgKCBzZWxlY3RvclswXSA9PT0gXCI8XCIgJiYgc2VsZWN0b3JbIHNlbGVjdG9yLmxlbmd0aCAtIDEgXSA9PT0gXCI+XCIgJiYgc2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cdFx0XHRcdC8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrXG5cdFx0XHRcdG1hdGNoID0gWyBudWxsLCBzZWxlY3RvciwgbnVsbCBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWF0Y2ggaHRtbCBvciBtYWtlIHN1cmUgbm8gY29udGV4dCBpcyBzcGVjaWZpZWQgZm9yICNpZFxuXHRcdFx0aWYgKCBtYXRjaCAmJiAobWF0Y2hbMV0gfHwgIWNvbnRleHQpICkge1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRpZiAoIG1hdGNoWzFdICkge1xuXHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFswXSA6IGNvbnRleHQ7XG5cblx0XHRcdFx0XHQvLyBPcHRpb24gdG8gcnVuIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHQvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcywgalF1ZXJ5LnBhcnNlSFRNTChcblx0XHRcdFx0XHRcdG1hdGNoWzFdLFxuXHRcdFx0XHRcdFx0Y29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCxcblx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHQpICk7XG5cblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0aWYgKCByc2luZ2xlVGFnLnRlc3QoIG1hdGNoWzFdICkgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvbnRleHQgKSApIHtcblx0XHRcdFx0XHRcdGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcblx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXNbIG1hdGNoIF0oIGNvbnRleHRbIG1hdGNoIF0gKTtcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgb3RoZXJ3aXNlIHNldCBhcyBhdHRyaWJ1dGVzXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKCNpZClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWzJdICk7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBCbGFja2JlcnJ5IDQuNlxuXHRcdFx0XHRcdC8vIGdFQklEIHJldHVybnMgbm9kZXMgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAoIzY5NjMpXG5cdFx0XHRcdFx0aWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRcdC8vIEluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0XG5cdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0XHR0aGlzWzBdID0gZWxlbTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0aGlzLmNvbnRleHQgPSBkb2N1bWVudDtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsICQoLi4uKSlcblx0XHRcdH0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkge1xuXHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3RqUXVlcnkgKS5maW5kKCBzZWxlY3RvciApO1xuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dClcblx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSEFORExFOiAkKERPTUVsZW1lbnQpXG5cdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSB0aGlzWzBdID0gc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHQvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHlcblx0XHR9IGVsc2UgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggc2VsZWN0b3IgKSApIHtcblx0XHRcdHJldHVybiB0eXBlb2Ygcm9vdGpRdWVyeS5yZWFkeSAhPT0gXCJ1bmRlZmluZWRcIiA/XG5cdFx0XHRcdHJvb3RqUXVlcnkucmVhZHkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdHNlbGVjdG9yKCBqUXVlcnkgKTtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yLnNlbGVjdG9yICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3Iuc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSBzZWxlY3Rvci5jb250ZXh0O1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHR9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG5cdC8vIE1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0XG5cdGd1YXJhbnRlZWRVbmlxdWUgPSB7XG5cdFx0Y2hpbGRyZW46IHRydWUsXG5cdFx0Y29udGVudHM6IHRydWUsXG5cdFx0bmV4dDogdHJ1ZSxcblx0XHRwcmV2OiB0cnVlXG5cdH07XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRkaXI6IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkge1xuXHRcdHZhciBtYXRjaGVkID0gW10sXG5cdFx0XHR0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7XG5cblx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdGlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0bWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9LFxuXG5cdHNpYmxpbmc6IGZ1bmN0aW9uKCBuLCBlbGVtICkge1xuXHRcdHZhciBtYXRjaGVkID0gW107XG5cblx0XHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdFx0aWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7XG5cdFx0XHRcdG1hdGNoZWQucHVzaCggbiApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGhhczogZnVuY3Rpb24oIHRhcmdldCApIHtcblx0XHR2YXIgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG5cdFx0XHRsID0gdGFyZ2V0cy5sZW5ndGg7XG5cblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCB0aGlzLCB0YXJnZXRzW2ldICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdG1hdGNoZWQgPSBbXSxcblx0XHRcdHBvcyA9IHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgfHwgdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3JzLCBjb250ZXh0IHx8IHRoaXMuY29udGV4dCApIDpcblx0XHRcdFx0MDtcblxuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGZvciAoIGN1ciA9IHRoaXNbaV07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXHRcdFx0XHQvLyBBbHdheXMgc2tpcCBkb2N1bWVudCBmcmFnbWVudHNcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAocG9zID9cblx0XHRcdFx0XHRwb3MuaW5kZXgoY3VyKSA+IC0xIDpcblxuXHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdGN1ci5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGN1ciwgc2VsZWN0b3JzKSkgKSB7XG5cblx0XHRcdFx0XHRtYXRjaGVkLnB1c2goIGN1ciApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlKCBtYXRjaGVkICkgOiBtYXRjaGVkICk7XG5cdH0sXG5cblx0Ly8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpbiB0aGUgc2V0XG5cdGluZGV4OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50XG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTtcblx0XHR9XG5cblx0XHQvLyBJbmRleCBpbiBzZWxlY3RvclxuXHRcdGlmICggdHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdGhpc1sgMCBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gTG9jYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZGVzaXJlZCBlbGVtZW50XG5cdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggdGhpcyxcblxuXHRcdFx0Ly8gSWYgaXQgcmVjZWl2ZXMgYSBqUXVlcnkgb2JqZWN0LCB0aGUgZmlyc3QgZWxlbWVudCBpcyB1c2VkXG5cdFx0XHRlbGVtLmpxdWVyeSA/IGVsZW1bIDAgXSA6IGVsZW1cblx0XHQpO1xuXHR9LFxuXG5cdGFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayhcblx0XHRcdGpRdWVyeS51bmlxdWUoXG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApIClcblx0XHRcdClcblx0XHQpO1xuXHR9LFxuXG5cdGFkZEJhY2s6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzZWxlY3Rvcilcblx0XHQpO1xuXHR9XG59KTtcblxuZnVuY3Rpb24gc2libGluZyggY3VyLCBkaXIgKSB7XG5cdHdoaWxlICggKGN1ciA9IGN1cltkaXJdKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRyZXR1cm4gY3VyO1xufVxuXG5qUXVlcnkuZWFjaCh7XG5cdHBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRyZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xuXHR9LFxuXHRwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0fSxcblx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicGFyZW50Tm9kZVwiLCB1bnRpbCApO1xuXHR9LFxuXHRuZXh0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXY6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiICk7XG5cdH0sXG5cdG5leHRBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiwgdW50aWwgKTtcblx0fSxcblx0cHJldlVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnNpYmxpbmcoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApO1xuXHR9LFxuXHRjaGlsZHJlbjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5zaWJsaW5nKCBlbGVtLmZpcnN0Q2hpbGQgKTtcblx0fSxcblx0Y29udGVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBlbGVtLmNvbnRlbnREb2N1bWVudCB8fCBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcblx0fVxufSwgZnVuY3Rpb24oIG5hbWUsIGZuICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTtcblxuXHRcdGlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gXCJVbnRpbFwiICkge1xuXHRcdFx0c2VsZWN0b3IgPSB1bnRpbDtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG1hdGNoZWQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgbWF0Y2hlZCApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuXHRcdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcblx0XHRcdGlmICggIWd1YXJhbnRlZWRVbmlxdWVbIG5hbWUgXSApIHtcblx0XHRcdFx0alF1ZXJ5LnVuaXF1ZSggbWF0Y2hlZCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuXHRcdFx0aWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRtYXRjaGVkLnJldmVyc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQgKTtcblx0fTtcbn0pO1xudmFyIHJub3R3aGl0ZSA9ICgvXFxTKy9nKTtcblxuXG5cbi8vIFN0cmluZyB0byBPYmplY3Qgb3B0aW9ucyBmb3JtYXQgY2FjaGVcbnZhciBvcHRpb25zQ2FjaGUgPSB7fTtcblxuLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXMgYW5kIHN0b3JlIGluIGNhY2hlXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkge1xuXHR2YXIgb2JqZWN0ID0gb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gPSB7fTtcblx0alF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHtcblx0XHRvYmplY3RbIGZsYWcgXSA9IHRydWU7XG5cdH0pO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdCggb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gfHwgY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApICkgOlxuXHRcdGpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cblx0dmFyIC8vIExhc3QgZmlyZSB2YWx1ZSAoZm9yIG5vbi1mb3JnZXR0YWJsZSBsaXN0cylcblx0XHRtZW1vcnksXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblx0XHQvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCBpcyBjdXJyZW50bHkgZmlyaW5nXG5cdFx0ZmlyaW5nLFxuXHRcdC8vIEZpcnN0IGNhbGxiYWNrIHRvIGZpcmUgKHVzZWQgaW50ZXJuYWxseSBieSBhZGQgYW5kIGZpcmVXaXRoKVxuXHRcdGZpcmluZ1N0YXJ0LFxuXHRcdC8vIEVuZCBvZiB0aGUgbG9vcCB3aGVuIGZpcmluZ1xuXHRcdGZpcmluZ0xlbmd0aCxcblx0XHQvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSByZW1vdmUgaWYgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4LFxuXHRcdC8vIEFjdHVhbCBjYWxsYmFjayBsaXN0XG5cdFx0bGlzdCA9IFtdLFxuXHRcdC8vIFN0YWNrIG9mIGZpcmUgY2FsbHMgZm9yIHJlcGVhdGFibGUgbGlzdHNcblx0XHRzdGFjayA9ICFvcHRpb25zLm9uY2UgJiYgW10sXG5cdFx0Ly8gRmlyZSBjYWxsYmFja3Ncblx0XHRmaXJlID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0XHRtZW1vcnkgPSBvcHRpb25zLm1lbW9yeSAmJiBkYXRhO1xuXHRcdFx0ZmlyZWQgPSB0cnVlO1xuXHRcdFx0ZmlyaW5nSW5kZXggPSBmaXJpbmdTdGFydCB8fCAwO1xuXHRcdFx0ZmlyaW5nU3RhcnQgPSAwO1xuXHRcdFx0ZmlyaW5nTGVuZ3RoID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRmaXJpbmcgPSB0cnVlO1xuXHRcdFx0Zm9yICggOyBsaXN0ICYmIGZpcmluZ0luZGV4IDwgZmlyaW5nTGVuZ3RoOyBmaXJpbmdJbmRleCsrICkge1xuXHRcdFx0XHRpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIGRhdGFbIDAgXSwgZGF0YVsgMSBdICkgPT09IGZhbHNlICYmIG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cdFx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7IC8vIFRvIHByZXZlbnQgZnVydGhlciBjYWxscyB1c2luZyBhZGRcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZmlyaW5nID0gZmFsc2U7XG5cdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdGlmICggc3RhY2sgKSB7XG5cdFx0XHRcdFx0aWYgKCBzdGFjay5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCBzdGFjay5zaGlmdCgpICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYuZGlzYWJsZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdHNlbGYgPSB7XG5cdFx0XHQvLyBBZGQgYSBjYWxsYmFjayBvciBhIGNvbGxlY3Rpb24gb2YgY2FsbGJhY2tzIHRvIHRoZSBsaXN0XG5cdFx0XHRhZGQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0Ly8gRmlyc3QsIHdlIHNhdmUgdGhlIGN1cnJlbnQgbGVuZ3RoXG5cdFx0XHRcdFx0dmFyIHN0YXJ0ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0KGZ1bmN0aW9uIGFkZCggYXJncyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0XHR2YXIgdHlwZSA9IGpRdWVyeS50eXBlKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxpc3QucHVzaCggYXJnICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEluc3BlY3QgcmVjdXJzaXZlbHlcblx0XHRcdFx0XHRcdFx0XHRhZGQoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KSggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0Ly8gRG8gd2UgbmVlZCB0byBhZGQgdGhlIGNhbGxiYWNrcyB0byB0aGVcblx0XHRcdFx0XHQvLyBjdXJyZW50IGZpcmluZyBiYXRjaD9cblx0XHRcdFx0XHRpZiAoIGZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmluZ0xlbmd0aCA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0XHRcdC8vIFdpdGggbWVtb3J5LCBpZiB3ZSdyZSBub3QgZmlyaW5nIHRoZW5cblx0XHRcdFx0XHQvLyB3ZSBzaG91bGQgY2FsbCByaWdodCBhd2F5XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggbWVtb3J5ICkge1xuXHRcdFx0XHRcdFx0ZmlyaW5nU3RhcnQgPSBzdGFydDtcblx0XHRcdFx0XHRcdGZpcmUoIG1lbW9yeSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBSZW1vdmUgYSBjYWxsYmFjayBmcm9tIHRoZSBsaXN0XG5cdFx0XHRyZW1vdmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdHZhciBpbmRleDtcblx0XHRcdFx0XHRcdHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0XHRsaXN0LnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG5cdFx0XHRcdFx0XHRcdGlmICggZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nTGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZmlyaW5nTGVuZ3RoLS07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleC0tO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG5cdFx0XHQvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cblx0XHRcdGhhczogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRyZXR1cm4gZm4gPyBqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDogISEoIGxpc3QgJiYgbGlzdC5sZW5ndGggKTtcblx0XHRcdH0sXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0ZmlyaW5nTGVuZ3RoID0gMDtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSGF2ZSB0aGUgbGlzdCBkbyBub3RoaW5nIGFueW1vcmVcblx0XHRcdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsaXN0ID0gc3RhY2sgPSBtZW1vcnkgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIElzIGl0IGRpc2FibGVkP1xuXHRcdFx0ZGlzYWJsZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gIWxpc3Q7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gTG9jayB0aGUgbGlzdCBpbiBpdHMgY3VycmVudCBzdGF0ZVxuXHRcdFx0bG9jazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHN0YWNrID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRpZiAoICFtZW1vcnkgKSB7XG5cdFx0XHRcdFx0c2VsZi5kaXNhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSXMgaXQgbG9ja2VkP1xuXHRcdFx0bG9ja2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICFzdGFjaztcblx0XHRcdH0sXG5cdFx0XHQvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzXG5cdFx0XHRmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG5cdFx0XHRcdGlmICggbGlzdCAmJiAoICFmaXJlZCB8fCBzdGFjayApICkge1xuXHRcdFx0XHRcdGFyZ3MgPSBhcmdzIHx8IFtdO1xuXHRcdFx0XHRcdGFyZ3MgPSBbIGNvbnRleHQsIGFyZ3Muc2xpY2UgPyBhcmdzLnNsaWNlKCkgOiBhcmdzIF07XG5cdFx0XHRcdFx0aWYgKCBmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRzdGFjay5wdXNoKCBhcmdzICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGZpcmUoIGFyZ3MgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHNcblx0XHRcdGZpcmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRmaXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0cmV0dXJuIHNlbGY7XG59O1xuXG5cbmpRdWVyeS5leHRlbmQoe1xuXG5cdERlZmVycmVkOiBmdW5jdGlvbiggZnVuYyApIHtcblx0XHR2YXIgdHVwbGVzID0gW1xuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgbGlzdGVuZXIgbGlzdCwgZmluYWwgc3RhdGVcblx0XHRcdFx0WyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZWplY3RlZFwiIF0sXG5cdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpIF1cblx0XHRcdF0sXG5cdFx0XHRzdGF0ZSA9IFwicGVuZGluZ1wiLFxuXHRcdFx0cHJvbWlzZSA9IHtcblx0XHRcdFx0c3RhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YWx3YXlzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XHRcdFx0dGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cdFx0XHRcdFx0cmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIGkgXSApICYmIGZuc1sgaSBdO1xuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXJcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzFdIF0oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IHByb21pc2UgPyBuZXdEZWZlci5wcm9taXNlKCkgOiB0aGlzLCBmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGZucyA9IG51bGw7XG5cdFx0XHRcdFx0fSkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG5cdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWZlcnJlZCA9IHt9O1xuXG5cdFx0Ly8gS2VlcCBwaXBlIGZvciBiYWNrLWNvbXBhdFxuXHRcdHByb21pc2UucGlwZSA9IHByb21pc2UudGhlbjtcblxuXHRcdC8vIEFkZCBsaXN0LXNwZWNpZmljIG1ldGhvZHNcblx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHR2YXIgbGlzdCA9IHR1cGxlWyAyIF0sXG5cdFx0XHRcdHN0YXRlU3RyaW5nID0gdHVwbGVbIDMgXTtcblxuXHRcdFx0Ly8gcHJvbWlzZVsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdID0gbGlzdC5hZGRcblx0XHRcdHByb21pc2VbIHR1cGxlWzFdIF0gPSBsaXN0LmFkZDtcblxuXHRcdFx0Ly8gSGFuZGxlIHN0YXRlXG5cdFx0XHRpZiAoIHN0YXRlU3RyaW5nICkge1xuXHRcdFx0XHRsaXN0LmFkZChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvLyBzdGF0ZSA9IFsgcmVzb2x2ZWQgfCByZWplY3RlZCBdXG5cdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblxuXHRcdFx0XHQvLyBbIHJlamVjdF9saXN0IHwgcmVzb2x2ZV9saXN0IF0uZGlzYWJsZTsgcHJvZ3Jlc3NfbGlzdC5sb2NrXG5cdFx0XHRcdH0sIHR1cGxlc1sgaSBeIDEgXVsgMiBdLmRpc2FibGUsIHR1cGxlc1sgMiBdWyAyIF0ubG9jayApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBkZWZlcnJlZFsgcmVzb2x2ZSB8IHJlamVjdCB8IG5vdGlmeSBdXG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHByb21pc2UgOiB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9O1xuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzBdICsgXCJXaXRoXCIgXSA9IGxpc3QuZmlyZVdpdGg7XG5cdFx0fSk7XG5cblx0XHQvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2Vcblx0XHRwcm9taXNlLnByb21pc2UoIGRlZmVycmVkICk7XG5cblx0XHQvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG5cdFx0aWYgKCBmdW5jICkge1xuXHRcdFx0ZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcblx0XHR9XG5cblx0XHQvLyBBbGwgZG9uZSFcblx0XHRyZXR1cm4gZGVmZXJyZWQ7XG5cdH0sXG5cblx0Ly8gRGVmZXJyZWQgaGVscGVyXG5cdHdoZW46IGZ1bmN0aW9uKCBzdWJvcmRpbmF0ZSAvKiAsIC4uLiwgc3Vib3JkaW5hdGVOICovICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdHJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcblx0XHRcdGxlbmd0aCA9IHJlc29sdmVWYWx1ZXMubGVuZ3RoLFxuXG5cdFx0XHQvLyB0aGUgY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzXG5cdFx0XHRyZW1haW5pbmcgPSBsZW5ndGggIT09IDEgfHwgKCBzdWJvcmRpbmF0ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggc3Vib3JkaW5hdGUucHJvbWlzZSApICkgPyBsZW5ndGggOiAwLFxuXG5cdFx0XHQvLyB0aGUgbWFzdGVyIERlZmVycmVkLiBJZiByZXNvbHZlVmFsdWVzIGNvbnNpc3Qgb2Ygb25seSBhIHNpbmdsZSBEZWZlcnJlZCwganVzdCB1c2UgdGhhdC5cblx0XHRcdGRlZmVycmVkID0gcmVtYWluaW5nID09PSAxID8gc3Vib3JkaW5hdGUgOiBqUXVlcnkuRGVmZXJyZWQoKSxcblxuXHRcdFx0Ly8gVXBkYXRlIGZ1bmN0aW9uIGZvciBib3RoIHJlc29sdmUgYW5kIHByb2dyZXNzIHZhbHVlc1xuXHRcdFx0dXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpLCBjb250ZXh0cywgdmFsdWVzICkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdGNvbnRleHRzWyBpIF0gPSB0aGlzO1xuXHRcdFx0XHRcdHZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuXHRcdFx0XHRcdGlmICggdmFsdWVzID09PSBwcm9ncmVzc1ZhbHVlcyApIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCAhKCAtLXJlbWFpbmluZyApICkge1xuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXG5cdFx0XHRwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzO1xuXG5cdFx0Ly8gQWRkIGxpc3RlbmVycyB0byBEZWZlcnJlZCBzdWJvcmRpbmF0ZXM7IHRyZWF0IG90aGVycyBhcyByZXNvbHZlZFxuXHRcdGlmICggbGVuZ3RoID4gMSApIHtcblx0XHRcdHByb2dyZXNzVmFsdWVzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdHByb2dyZXNzQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuXHRcdFx0cmVzb2x2ZUNvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIHJlc29sdmVWYWx1ZXNbIGkgXSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggcmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRyZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSgpXG5cdFx0XHRcdFx0XHQuZG9uZSggdXBkYXRlRnVuYyggaSwgcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICkgKVxuXHRcdFx0XHRcdFx0LmZhaWwoIGRlZmVycmVkLnJlamVjdCApXG5cdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIHVwZGF0ZUZ1bmMoIGksIHByb2dyZXNzQ29udGV4dHMsIHByb2dyZXNzVmFsdWVzICkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQtLXJlbWFpbmluZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIHdlJ3JlIG5vdCB3YWl0aW5nIG9uIGFueXRoaW5nLCByZXNvbHZlIHRoZSBtYXN0ZXJcblx0XHRpZiAoICFyZW1haW5pbmcgKSB7XG5cdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblx0fVxufSk7XG5cblxuLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5XG52YXIgcmVhZHlMaXN0O1xuXG5qUXVlcnkuZm4ucmVhZHkgPSBmdW5jdGlvbiggZm4gKSB7XG5cdC8vIEFkZCB0aGUgY2FsbGJhY2tcblx0alF1ZXJ5LnJlYWR5LnByb21pc2UoKS5kb25lKCBmbiApO1xuXG5cdHJldHVybiB0aGlzO1xufTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG5cdGlzUmVhZHk6IGZhbHNlLFxuXG5cdC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcblx0Ly8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODFcblx0cmVhZHlXYWl0OiAxLFxuXG5cdC8vIEhvbGQgKG9yIHJlbGVhc2UpIHRoZSByZWFkeSBldmVudFxuXHRob2xkUmVhZHk6IGZ1bmN0aW9uKCBob2xkICkge1xuXHRcdGlmICggaG9sZCApIHtcblx0XHRcdGpRdWVyeS5yZWFkeVdhaXQrKztcblx0XHR9IGVsc2Uge1xuXHRcdFx0alF1ZXJ5LnJlYWR5KCB0cnVlICk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHlcblx0cmVhZHk6IGZ1bmN0aW9uKCB3YWl0ICkge1xuXG5cdFx0Ly8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeVxuXHRcdGlmICggd2FpdCA9PT0gdHJ1ZSA/IC0talF1ZXJ5LnJlYWR5V2FpdCA6IGpRdWVyeS5pc1JlYWR5ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuXHRcdGpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTtcblxuXHRcdC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG5cdFx0aWYgKCB3YWl0ICE9PSB0cnVlICYmIC0talF1ZXJ5LnJlYWR5V2FpdCA+IDAgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucyBib3VuZCwgdG8gZXhlY3V0ZVxuXHRcdHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblxuXHRcdC8vIFRyaWdnZXIgYW55IGJvdW5kIHJlYWR5IGV2ZW50c1xuXHRcdGlmICggalF1ZXJ5LmZuLnRyaWdnZXJIYW5kbGVyICkge1xuXHRcdFx0alF1ZXJ5KCBkb2N1bWVudCApLnRyaWdnZXJIYW5kbGVyKCBcInJlYWR5XCIgKTtcblx0XHRcdGpRdWVyeSggZG9jdW1lbnQgKS5vZmYoIFwicmVhZHlcIiApO1xuXHRcdH1cblx0fVxufSk7XG5cbi8qKlxuICogVGhlIHJlYWR5IGV2ZW50IGhhbmRsZXIgYW5kIHNlbGYgY2xlYW51cCBtZXRob2RcbiAqL1xuZnVuY3Rpb24gY29tcGxldGVkKCkge1xuXHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblx0alF1ZXJ5LnJlYWR5KCk7XG59XG5cbmpRdWVyeS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oIG9iaiApIHtcblx0aWYgKCAhcmVhZHlMaXN0ICkge1xuXG5cdFx0cmVhZHlMaXN0ID0galF1ZXJ5LkRlZmVycmVkKCk7XG5cblx0XHQvLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvY3VtZW50KS5yZWFkeSgpIGlzIGNhbGxlZCBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cblx0XHQvLyBXZSBvbmNlIHRyaWVkIHRvIHVzZSByZWFkeVN0YXRlIFwiaW50ZXJhY3RpdmVcIiBoZXJlLCBidXQgaXQgY2F1c2VkIGlzc3VlcyBsaWtlIHRoZSBvbmVcblx0XHQvLyBkaXNjb3ZlcmVkIGJ5IENocmlzUyBoZXJlOiBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjI4MiNjb21tZW50OjE1XG5cdFx0aWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgKSB7XG5cdFx0XHQvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHlcblx0XHRcdHNldFRpbWVvdXQoIGpRdWVyeS5yZWFkeSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSBoYW5keSBldmVudCBjYWxsYmFja1xuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblxuXHRcdFx0Ly8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVhZHlMaXN0LnByb21pc2UoIG9iaiApO1xufTtcblxuLy8gS2ljayBvZmYgdGhlIERPTSByZWFkeSBjaGVjayBldmVuIGlmIHRoZSB1c2VyIGRvZXMgbm90XG5qUXVlcnkucmVhZHkucHJvbWlzZSgpO1xuXG5cblxuXG4vLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbi8vIFRoZSB2YWx1ZS9zIGNhbiBvcHRpb25hbGx5IGJlIGV4ZWN1dGVkIGlmIGl0J3MgYSBmdW5jdGlvblxudmFyIGFjY2VzcyA9IGpRdWVyeS5hY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBlbGVtcy5sZW5ndGgsXG5cdFx0YnVsayA9IGtleSA9PSBudWxsO1xuXG5cdC8vIFNldHMgbWFueSB2YWx1ZXNcblx0aWYgKCBqUXVlcnkudHlwZSgga2V5ICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblx0XHRmb3IgKCBpIGluIGtleSApIHtcblx0XHRcdGpRdWVyeS5hY2Nlc3MoIGVsZW1zLCBmbiwgaSwga2V5W2ldLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7XG5cdFx0fVxuXG5cdC8vIFNldHMgb25lIHZhbHVlXG5cdH0gZWxzZSBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblxuXHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmF3ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGJ1bGsgKSB7XG5cdFx0XHQvLyBCdWxrIG9wZXJhdGlvbnMgcnVuIGFnYWluc3QgdGhlIGVudGlyZSBzZXRcblx0XHRcdGlmICggcmF3ICkge1xuXHRcdFx0XHRmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTtcblx0XHRcdFx0Zm4gPSBudWxsO1xuXG5cdFx0XHQvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRidWxrID0gZm47XG5cdFx0XHRcdGZuID0gZnVuY3Rpb24oIGVsZW0sIGtleSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRmbiggZWxlbXNbaV0sIGtleSwgcmF3ID8gdmFsdWUgOiB2YWx1ZS5jYWxsKCBlbGVtc1tpXSwgaSwgZm4oIGVsZW1zW2ldLCBrZXkgKSApICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNoYWluYWJsZSA/XG5cdFx0ZWxlbXMgOlxuXG5cdFx0Ly8gR2V0c1xuXHRcdGJ1bGsgP1xuXHRcdFx0Zm4uY2FsbCggZWxlbXMgKSA6XG5cdFx0XHRsZW4gPyBmbiggZWxlbXNbMF0sIGtleSApIDogZW1wdHlHZXQ7XG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIG9iamVjdCBjYW4gaGF2ZSBkYXRhXG4gKi9cbmpRdWVyeS5hY2NlcHREYXRhID0gZnVuY3Rpb24oIG93bmVyICkge1xuXHQvLyBBY2NlcHRzIG9ubHk6XG5cdC8vICAtIE5vZGVcblx0Ly8gICAgLSBOb2RlLkVMRU1FTlRfTk9ERVxuXHQvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERVxuXHQvLyAgLSBPYmplY3Rcblx0Ly8gICAgLSBBbnlcblx0LyoganNoaW50IC1XMDE4ICovXG5cdHJldHVybiBvd25lci5ub2RlVHlwZSA9PT0gMSB8fCBvd25lci5ub2RlVHlwZSA9PT0gOSB8fCAhKCArb3duZXIubm9kZVR5cGUgKTtcbn07XG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LFxuXHQvLyBPbGQgV2ViS2l0IGRvZXMgbm90IGhhdmUgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zL2ZyZWV6ZSBtZXRob2QsXG5cdC8vIHJldHVybiBuZXcgZW1wdHkgb2JqZWN0IGluc3RlYWQgd2l0aCBubyBbW3NldF1dIGFjY2Vzc29yXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcy5jYWNoZSA9IHt9LCAwLCB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9XG5cdH0pO1xuXG5cdHRoaXMuZXhwYW5kbyA9IGpRdWVyeS5leHBhbmRvICsgRGF0YS51aWQrKztcbn1cblxuRGF0YS51aWQgPSAxO1xuRGF0YS5hY2NlcHRzID0galF1ZXJ5LmFjY2VwdERhdGE7XG5cbkRhdGEucHJvdG90eXBlID0ge1xuXHRrZXk6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHQvLyBXZSBjYW4gYWNjZXB0IGRhdGEgZm9yIG5vbi1lbGVtZW50IG5vZGVzIGluIG1vZGVybiBicm93c2Vycyxcblx0XHQvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LlxuXHRcdC8vIEFsd2F5cyByZXR1cm4gdGhlIGtleSBmb3IgYSBmcm96ZW4gb2JqZWN0LlxuXHRcdGlmICggIURhdGEuYWNjZXB0cyggb3duZXIgKSApIHtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBkZXNjcmlwdG9yID0ge30sXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGUga2V5XG5cdFx0XHR1bmxvY2sgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRpZiAoICF1bmxvY2sgKSB7XG5cdFx0XHR1bmxvY2sgPSBEYXRhLnVpZCsrO1xuXG5cdFx0XHQvLyBTZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSwgbm9uLXdyaXRhYmxlIHByb3BlcnR5XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkZXNjcmlwdG9yWyB0aGlzLmV4cGFuZG8gXSA9IHsgdmFsdWU6IHVubG9jayB9O1xuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyggb3duZXIsIGRlc2NyaXB0b3IgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0XG5cdFx0XHQvLyBGYWxsYmFjayB0byBhIGxlc3Mgc2VjdXJlIGRlZmluaXRpb25cblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRkZXNjcmlwdG9yWyB0aGlzLmV4cGFuZG8gXSA9IHVubG9jaztcblx0XHRcdFx0alF1ZXJ5LmV4dGVuZCggb3duZXIsIGRlc2NyaXB0b3IgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBFbnN1cmUgdGhlIGNhY2hlIG9iamVjdFxuXHRcdGlmICggIXRoaXMuY2FjaGVbIHVubG9jayBdICkge1xuXHRcdFx0dGhpcy5jYWNoZVsgdW5sb2NrIF0gPSB7fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdW5sb2NrO1xuXHR9LFxuXHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0dmFyIHByb3AsXG5cdFx0XHQvLyBUaGVyZSBtYXkgYmUgYW4gdW5sb2NrIGFzc2lnbmVkIHRvIHRoaXMgbm9kZSxcblx0XHRcdC8vIGlmIHRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIFwib3duZXJcIiwgY3JlYXRlIG9uZSBpbmxpbmVcblx0XHRcdC8vIGFuZCBzZXQgdGhlIHVubG9jayBhcyB0aG91Z2ggYW4gb3duZXIgZW50cnkgaGFkIGFsd2F5cyBleGlzdGVkXG5cdFx0XHR1bmxvY2sgPSB0aGlzLmtleSggb3duZXIgKSxcblx0XHRcdGNhY2hlID0gdGhpcy5jYWNoZVsgdW5sb2NrIF07XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIGtleSwgdmFsdWUgXSBhcmdzXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGNhY2hlWyBkYXRhIF0gPSB2YWx1ZTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwgeyBwcm9wZXJ0aWVzIH0gXSBhcmdzXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEZyZXNoIGFzc2lnbm1lbnRzIGJ5IG9iamVjdCBhcmUgc2hhbGxvdyBjb3BpZWRcblx0XHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5leHRlbmQoIHRoaXMuY2FjaGVbIHVubG9jayBdLCBkYXRhICk7XG5cdFx0XHQvLyBPdGhlcndpc2UsIGNvcHkgdGhlIHByb3BlcnRpZXMgb25lLWJ5LW9uZSB0byB0aGUgY2FjaGUgb2JqZWN0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBwcm9wIGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0Y2FjaGVbIHByb3AgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2FjaGU7XG5cdH0sXG5cdGdldDogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0Ly8gRWl0aGVyIGEgdmFsaWQgY2FjaGUgaXMgZm91bmQsIG9yIHdpbGwgYmUgY3JlYXRlZC5cblx0XHQvLyBOZXcgY2FjaGVzIHdpbGwgYmUgY3JlYXRlZCBhbmQgdGhlIHVubG9jayByZXR1cm5lZCxcblx0XHQvLyBhbGxvd2luZyBkaXJlY3QgYWNjZXNzIHRvIHRoZSBuZXdseSBjcmVhdGVkXG5cdFx0Ly8gZW1wdHkgZGF0YSBvYmplY3QuIEEgdmFsaWQgb3duZXIgb2JqZWN0IG11c3QgYmUgcHJvdmlkZWQuXG5cdFx0dmFyIGNhY2hlID0gdGhpcy5jYWNoZVsgdGhpcy5rZXkoIG93bmVyICkgXTtcblxuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRjYWNoZSA6IGNhY2hlWyBrZXkgXTtcblx0fSxcblx0YWNjZXNzOiBmdW5jdGlvbiggb3duZXIsIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIHN0b3JlZDtcblx0XHQvLyBJbiBjYXNlcyB3aGVyZSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIE5vIGtleSB3YXMgc3BlY2lmaWVkXG5cdFx0Ly8gICAyLiBBIHN0cmluZyBrZXkgd2FzIHNwZWNpZmllZCwgYnV0IG5vIHZhbHVlIHByb3ZpZGVkXG5cdFx0Ly9cblx0XHQvLyBUYWtlIHRoZSBcInJlYWRcIiBwYXRoIGFuZCBhbGxvdyB0aGUgZ2V0IG1ldGhvZCB0byBkZXRlcm1pbmVcblx0XHQvLyB3aGljaCB2YWx1ZSB0byByZXR1cm4sIHJlc3BlY3RpdmVseSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIFRoZSBlbnRpcmUgY2FjaGUgb2JqZWN0XG5cdFx0Ly8gICAyLiBUaGUgZGF0YSBzdG9yZWQgYXQgdGhlIGtleVxuXHRcdC8vXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHQoKGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiKSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSApIHtcblxuXHRcdFx0c3RvcmVkID0gdGhpcy5nZXQoIG93bmVyLCBrZXkgKTtcblxuXHRcdFx0cmV0dXJuIHN0b3JlZCAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0c3RvcmVkIDogdGhpcy5nZXQoIG93bmVyLCBqUXVlcnkuY2FtZWxDYXNlKGtleSkgKTtcblx0XHR9XG5cblx0XHQvLyBbKl1XaGVuIHRoZSBrZXkgaXMgbm90IGEgc3RyaW5nLCBvciBib3RoIGEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vIGFyZSBzcGVjaWZpZWQsIHNldCBvciBleHRlbmQgKGV4aXN0aW5nIG9iamVjdHMpIHdpdGggZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBBbiBvYmplY3Qgb2YgcHJvcGVydGllc1xuXHRcdC8vICAgMi4gQSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly9cblx0XHR0aGlzLnNldCggb3duZXIsIGtleSwgdmFsdWUgKTtcblxuXHRcdC8vIFNpbmNlIHRoZSBcInNldFwiIHBhdGggY2FuIGhhdmUgdHdvIHBvc3NpYmxlIGVudHJ5IHBvaW50c1xuXHRcdC8vIHJldHVybiB0aGUgZXhwZWN0ZWQgZGF0YSBiYXNlZCBvbiB3aGljaCBwYXRoIHdhcyB0YWtlblsqXVxuXHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBrZXk7XG5cdH0sXG5cdHJlbW92ZTogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGNhbWVsLFxuXHRcdFx0dW5sb2NrID0gdGhpcy5rZXkoIG93bmVyICksXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGVbIHVubG9jayBdO1xuXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHRoaXMuY2FjaGVbIHVubG9jayBdID0ge307XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIGtleSApICkge1xuXHRcdFx0XHQvLyBJZiBcIm5hbWVcIiBpcyBhbiBhcnJheSBvZiBrZXlzLi4uXG5cdFx0XHRcdC8vIFdoZW4gZGF0YSBpcyBpbml0aWFsbHkgY3JlYXRlZCwgdmlhIChcImtleVwiLCBcInZhbFwiKSBzaWduYXR1cmUsXG5cdFx0XHRcdC8vIGtleXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlLlxuXHRcdFx0XHQvLyBTaW5jZSB0aGVyZSBpcyBubyB3YXkgdG8gdGVsbCBfaG93XyBhIGtleSB3YXMgYWRkZWQsIHJlbW92ZVxuXHRcdFx0XHQvLyBib3RoIHBsYWluIGtleSBhbmQgY2FtZWxDYXNlIGtleS4gIzEyNzg2XG5cdFx0XHRcdC8vIFRoaXMgd2lsbCBvbmx5IHBlbmFsaXplIHRoZSBhcnJheSBhcmd1bWVudCBwYXRoLlxuXHRcdFx0XHRuYW1lID0ga2V5LmNvbmNhdCgga2V5Lm1hcCggalF1ZXJ5LmNhbWVsQ2FzZSApICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYW1lbCA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXHRcdFx0XHQvLyBUcnkgdGhlIHN0cmluZyBhcyBhIGtleSBiZWZvcmUgYW55IG1hbmlwdWxhdGlvblxuXHRcdFx0XHRpZiAoIGtleSBpbiBjYWNoZSApIHtcblx0XHRcdFx0XHRuYW1lID0gWyBrZXksIGNhbWVsIF07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gSWYgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0cywgdXNlIGl0LlxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgY3JlYXRlIGFuIGFycmF5IGJ5IG1hdGNoaW5nIG5vbi13aGl0ZXNwYWNlXG5cdFx0XHRcdFx0bmFtZSA9IGNhbWVsO1xuXHRcdFx0XHRcdG5hbWUgPSBuYW1lIGluIGNhY2hlID9cblx0XHRcdFx0XHRcdFsgbmFtZSBdIDogKCBuYW1lLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGkgPSBuYW1lLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRkZWxldGUgY2FjaGVbIG5hbWVbIGkgXSBdO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0aGFzRGF0YTogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdHJldHVybiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoXG5cdFx0XHR0aGlzLmNhY2hlWyBvd25lclsgdGhpcy5leHBhbmRvIF0gXSB8fCB7fVxuXHRcdCk7XG5cdH0sXG5cdGRpc2NhcmQ6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHRpZiAoIG93bmVyWyB0aGlzLmV4cGFuZG8gXSApIHtcblx0XHRcdGRlbGV0ZSB0aGlzLmNhY2hlWyBvd25lclsgdGhpcy5leHBhbmRvIF0gXTtcblx0XHR9XG5cdH1cbn07XG52YXIgZGF0YV9wcml2ID0gbmV3IERhdGEoKTtcblxudmFyIGRhdGFfdXNlciA9IG5ldyBEYXRhKCk7XG5cblxuXG4vL1x0SW1wbGVtZW50YXRpb24gU3VtbWFyeVxuLy9cbi8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG4vL1x0Mi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlXG4vL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG4vL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cbi8vXHQ0LiBfTmV2ZXJfIGV4cG9zZSBcInByaXZhdGVcIiBkYXRhIHRvIHVzZXIgY29kZSAoVE9ETzogRHJvcCBfZGF0YSwgX3JlbW92ZURhdGEpXG4vL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG4vL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cbnZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdHJtdWx0aURhc2ggPSAvKFtBLVpdKS9nO1xuXG5mdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkge1xuXHR2YXIgbmFtZTtcblxuXHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55XG5cdC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuXHRpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdG5hbWUgPSBcImRhdGEtXCIgKyBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgXCItJDFcIiApLnRvTG93ZXJDYXNlKCk7XG5cdFx0ZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGF0YSA9IGRhdGEgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6XG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJmYWxzZVwiID8gZmFsc2UgOlxuXHRcdFx0XHRcdGRhdGEgPT09IFwibnVsbFwiID8gbnVsbCA6XG5cdFx0XHRcdFx0Ly8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcblx0XHRcdFx0XHQrZGF0YSArIFwiXCIgPT09IGRhdGEgPyArZGF0YSA6XG5cdFx0XHRcdFx0cmJyYWNlLnRlc3QoIGRhdGEgKSA/IGpRdWVyeS5wYXJzZUpTT04oIGRhdGEgKSA6XG5cdFx0XHRcdFx0ZGF0YTtcblx0XHRcdH0gY2F0Y2goIGUgKSB7fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2Ugc2V0IHRoZSBkYXRhIHNvIGl0IGlzbid0IGNoYW5nZWQgbGF0ZXJcblx0XHRcdGRhdGFfdXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZGF0YTtcbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cdGhhc0RhdGE6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkYXRhX3VzZXIuaGFzRGF0YSggZWxlbSApIHx8IGRhdGFfcHJpdi5oYXNEYXRhKCBlbGVtICk7XG5cdH0sXG5cblx0ZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFfdXNlci5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhX3VzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH0sXG5cblx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0Ly8gd2l0aCBkaXJlY3QgY2FsbHMgdG8gZGF0YV9wcml2IG1ldGhvZHMsIHRoZXNlIGNhbiBiZSBkZXByZWNhdGVkLlxuXHRfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdHZhciBpLCBuYW1lLCBkYXRhLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGF0dHJzID0gZWxlbSAmJiBlbGVtLmF0dHJpYnV0ZXM7XG5cblx0XHQvLyBHZXRzIGFsbCB2YWx1ZXNcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0gKTtcblxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgIWRhdGFfcHJpdi5nZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIgKSApIHtcblx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTExK1xuXHRcdFx0XHRcdFx0Ly8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpXG5cdFx0XHRcdFx0XHRpZiAoIGF0dHJzWyBpIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7XG5cdFx0XHRcdFx0XHRcdGlmICggbmFtZS5pbmRleE9mKCBcImRhdGEtXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZS5zbGljZSg1KSApO1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhX3ByaXYuc2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0cyBtdWx0aXBsZSB2YWx1ZXNcblx0XHRpZiAoIHR5cGVvZiBrZXkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhX3VzZXIuc2V0KCB0aGlzLCBrZXkgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBkYXRhLFxuXHRcdFx0XHRjYW1lbEtleSA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXG5cdFx0XHQvLyBUaGUgY2FsbGluZyBqUXVlcnkgb2JqZWN0IChlbGVtZW50IG1hdGNoZXMpIGlzIG5vdCBlbXB0eVxuXHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdC8vIGB2YWx1ZWAgcGFyYW1ldGVyIHdhcyBub3QgdW5kZWZpbmVkLiBBbiBlbXB0eSBqUXVlcnkgb2JqZWN0XG5cdFx0XHQvLyB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBmb3IgZWxlbSA9IHRoaXNbIDAgXSB3aGljaCB3aWxsXG5cdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0aWYgKCBlbGVtICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gZ2V0IGRhdGEgZnJvbSB0aGUgY2FjaGVcblx0XHRcdFx0Ly8gd2l0aCB0aGUga2V5IGFzLWlzXG5cdFx0XHRcdGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlXG5cdFx0XHRcdC8vIHdpdGggdGhlIGtleSBjYW1lbGl6ZWRcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0sIGNhbWVsS2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBcImRpc2NvdmVyXCIgdGhlIGRhdGEgaW5cblx0XHRcdFx0Ly8gSFRNTDUgY3VzdG9tIGRhdGEtKiBhdHRyc1xuXHRcdFx0XHRkYXRhID0gZGF0YUF0dHIoIGVsZW0sIGNhbWVsS2V5LCB1bmRlZmluZWQgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXZSB0cmllZCByZWFsbHkgaGFyZCwgYnV0IHRoZSBkYXRhIGRvZXNuJ3QgZXhpc3QuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHRoZSBkYXRhLi4uXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIEZpcnN0LCBhdHRlbXB0IHRvIHN0b3JlIGEgY29weSBvciByZWZlcmVuY2Ugb2YgYW55XG5cdFx0XHRcdC8vIGRhdGEgdGhhdCBtaWdodCd2ZSBiZWVuIHN0b3JlIHdpdGggYSBjYW1lbENhc2VkIGtleS5cblx0XHRcdFx0dmFyIGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCB0aGlzLCBjYW1lbEtleSApO1xuXG5cdFx0XHRcdC8vIEZvciBIVE1MNSBkYXRhLSogYXR0cmlidXRlIGludGVyb3AsIHdlIGhhdmUgdG9cblx0XHRcdFx0Ly8gc3RvcmUgcHJvcGVydHkgbmFtZXMgd2l0aCBkYXNoZXMgaW4gYSBjYW1lbENhc2UgZm9ybS5cblx0XHRcdFx0Ly8gVGhpcyBtaWdodCBub3QgYXBwbHkgdG8gYWxsIHByb3BlcnRpZXMuLi4qXG5cdFx0XHRcdGRhdGFfdXNlci5zZXQoIHRoaXMsIGNhbWVsS2V5LCB2YWx1ZSApO1xuXG5cdFx0XHRcdC8vICouLi4gSW4gdGhlIGNhc2Ugb2YgcHJvcGVydGllcyB0aGF0IG1pZ2h0IF9hY3R1YWxseV9cblx0XHRcdFx0Ly8gaGF2ZSBkYXNoZXMsIHdlIG5lZWQgdG8gYWxzbyBzdG9yZSBhIGNvcHkgb2YgdGhhdFxuXHRcdFx0XHQvLyB1bmNoYW5nZWQgcHJvcGVydHkuXG5cdFx0XHRcdGlmICgga2V5LmluZGV4T2YoXCItXCIpICE9PSAtMSAmJiBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0ZGF0YV91c2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEsIG51bGwsIHRydWUgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRkYXRhX3VzZXIucmVtb3ZlKCB0aGlzLCBrZXkgKTtcblx0XHR9KTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmV4dGVuZCh7XG5cdHF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgcXVldWU7XG5cblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHR0eXBlID0gKCB0eXBlIHx8IFwiZnhcIiApICsgXCJxdWV1ZVwiO1xuXHRcdFx0cXVldWUgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdC8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXBcblx0XHRcdGlmICggZGF0YSApIHtcblx0XHRcdFx0aWYgKCAhcXVldWUgfHwgalF1ZXJ5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIHR5cGUsIGpRdWVyeS5tYWtlQXJyYXkoZGF0YSkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBkYXRhICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBxdWV1ZSB8fCBbXTtcblx0XHR9XG5cdH0sXG5cblx0ZGVxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCBlbGVtLCB0eXBlICksXG5cdFx0XHRzdGFydExlbmd0aCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKSxcblx0XHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCB0eXBlICksXG5cdFx0XHRuZXh0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCBlbGVtLCB0eXBlICk7XG5cdFx0XHR9O1xuXG5cdFx0Ly8gSWYgdGhlIGZ4IHF1ZXVlIGlzIGRlcXVldWVkLCBhbHdheXMgcmVtb3ZlIHRoZSBwcm9ncmVzcyBzZW50aW5lbFxuXHRcdGlmICggZm4gPT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0c3RhcnRMZW5ndGgtLTtcblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXG5cdFx0XHQvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nXG5cdFx0XHQvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiApIHtcblx0XHRcdFx0cXVldWUudW5zaGlmdCggXCJpbnByb2dyZXNzXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2xlYXIgdXAgdGhlIGxhc3QgcXVldWUgc3RvcCBmdW5jdGlvblxuXHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRmbi5jYWxsKCBlbGVtLCBuZXh0LCBob29rcyApO1xuXHRcdH1cblxuXHRcdGlmICggIXN0YXJ0TGVuZ3RoICYmIGhvb2tzICkge1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBOb3QgcHVibGljIC0gZ2VuZXJhdGUgYSBxdWV1ZUhvb2tzIG9iamVjdCwgb3IgcmV0dXJuIHRoZSBjdXJyZW50IG9uZVxuXHRfcXVldWVIb29rczogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dmFyIGtleSA9IHR5cGUgKyBcInF1ZXVlSG9va3NcIjtcblx0XHRyZXR1cm4gZGF0YV9wcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YV9wcml2LmFjY2VzcyggZWxlbSwga2V5LCB7XG5cdFx0XHRlbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgWyB0eXBlICsgXCJxdWV1ZVwiLCBrZXkgXSApO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRxdWV1ZTogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHNldHRlciA9IDI7XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZGF0YSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gXCJmeFwiO1xuXHRcdFx0c2V0dGVyLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1swXSwgdHlwZSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBkYXRhID09PSB1bmRlZmluZWQgP1xuXHRcdFx0dGhpcyA6XG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSBhIGhvb2tzIGZvciB0aGlzIHF1ZXVlXG5cdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApO1xuXG5cdFx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICYmIHF1ZXVlWzBdICE9PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fSxcblx0ZGVxdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSk7XG5cdH0sXG5cdGNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0fSxcblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtZW50c1sgaSBdLCB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgKTtcblx0XHRcdGlmICggdG1wICYmIHRtcC5lbXB0eSApIHtcblx0XHRcdFx0Y291bnQrKztcblx0XHRcdFx0dG1wLmVtcHR5LmFkZCggcmVzb2x2ZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXNvbHZlKCk7XG5cdFx0cmV0dXJuIGRlZmVyLnByb21pc2UoIG9iaiApO1xuXHR9XG59KTtcbnZhciBwbnVtID0gKC9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvKS5zb3VyY2U7XG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGlzSGlkZGVuID0gZnVuY3Rpb24oIGVsZW0sIGVsICkge1xuXHRcdC8vIGlzSGlkZGVuIG1pZ2h0IGJlIGNhbGxlZCBmcm9tIGpRdWVyeSNmaWx0ZXIgZnVuY3Rpb247XG5cdFx0Ly8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50XG5cdFx0ZWxlbSA9IGVsIHx8IGVsZW07XG5cdFx0cmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgPT09IFwibm9uZVwiIHx8ICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXHR9O1xuXG52YXIgcmNoZWNrYWJsZVR5cGUgPSAoL14oPzpjaGVja2JveHxyYWRpbykkL2kpO1xuXG5cblxuKGZ1bmN0aW9uKCkge1xuXHR2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0ZGl2ID0gZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApLFxuXHRcdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cblx0Ly8gU3VwcG9ydDogU2FmYXJpPD01LjFcblx0Ly8gQ2hlY2sgc3RhdGUgbG9zdCBpZiB0aGUgbmFtZSBpcyBzZXQgKCMxMTIxNylcblx0Ly8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKVxuXHQvLyBgbmFtZWAgYW5kIGB0eXBlYCBtdXN0IHVzZSAuc2V0QXR0cmlidXRlIGZvciBXV0EgKCMxNDkwMSlcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJyYWRpb1wiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwidFwiICk7XG5cblx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApO1xuXG5cdC8vIFN1cHBvcnQ6IFNhZmFyaTw9NS4xLCBBbmRyb2lkPDQuMlxuXHQvLyBPbGRlciBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHNcblx0c3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkO1xuXG5cdC8vIFN1cHBvcnQ6IElFPD0xMStcblx0Ly8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcblx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtcbn0pKCk7XG52YXIgc3RydW5kZWZpbmVkID0gdHlwZW9mIHVuZGVmaW5lZDtcblxuXG5cbnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXMgPSBcIm9uZm9jdXNpblwiIGluIHdpbmRvdztcblxuXG52YXJcblx0cmtleUV2ZW50ID0gL15rZXkvLFxuXHRybW91c2VFdmVudCA9IC9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLFxuXHRyZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxcblx0cnR5cGVuYW1lc3BhY2UgPSAvXihbXi5dKikoPzpcXC4oLispfCkkLztcblxuZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpIHtcblx0cmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJldHVybkZhbHNlKCkge1xuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHR9IGNhdGNoICggZXJyICkgeyB9XG59XG5cbi8qXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBldmVudHMgLS0gbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuXG4gKiBQcm9wcyB0byBEZWFuIEVkd2FyZHMnIGFkZEV2ZW50IGxpYnJhcnkgZm9yIG1hbnkgb2YgdGhlIGlkZWFzLlxuICovXG5qUXVlcnkuZXZlbnQgPSB7XG5cblx0Z2xvYmFsOiB7fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgZGF0YSwgc2VsZWN0b3IgKSB7XG5cblx0XHR2YXIgaGFuZGxlT2JqSW4sIGV2ZW50SGFuZGxlLCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YV9wcml2LmdldCggZWxlbSApO1xuXG5cdFx0Ly8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cylcblx0XHRpZiAoICFlbGVtRGF0YSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRpZiAoIGhhbmRsZXIuaGFuZGxlciApIHtcblx0XHRcdGhhbmRsZU9iakluID0gaGFuZGxlcjtcblx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0c2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3Rvcjtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXJcblx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdH1cblxuXHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRpZiAoICEoZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzKSApIHtcblx0XHRcdGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyA9IHt9O1xuXHRcdH1cblx0XHRpZiAoICEoZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUpICkge1xuXHRcdFx0ZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gc3RydW5kZWZpbmVkICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIG11bHRpcGxlIGV2ZW50cyBzZXBhcmF0ZWQgYnkgYSBzcGFjZVxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFRoZXJlICptdXN0KiBiZSBhIHR5cGUsIG5vIGF0dGFjaGluZyBuYW1lc3BhY2Utb25seSBoYW5kbGVyc1xuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGV2ZW50IGNoYW5nZXMgaXRzIHR5cGUsIHVzZSB0aGUgc3BlY2lhbCBldmVudCBoYW5kbGVycyBmb3IgdGhlIGNoYW5nZWQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIElmIHNlbGVjdG9yIGRlZmluZWQsIGRldGVybWluZSBzcGVjaWFsIGV2ZW50IGFwaSB0eXBlLCBvdGhlcndpc2UgZ2l2ZW4gdHlwZVxuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXG5cdFx0XHQvLyBVcGRhdGUgc3BlY2lhbCBiYXNlZCBvbiBuZXdseSByZXNldCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gaGFuZGxlT2JqIGlzIHBhc3NlZCB0byBhbGwgZXZlbnQgaGFuZGxlcnNcblx0XHRcdGhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoe1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRvcmlnVHlwZTogb3JpZ1R5cGUsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdGhhbmRsZXI6IGhhbmRsZXIsXG5cdFx0XHRcdGd1aWQ6IGhhbmRsZXIuZ3VpZCxcblx0XHRcdFx0c2VsZWN0b3I6IHNlbGVjdG9yLFxuXHRcdFx0XHRuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuXHRcdFx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbihcIi5cIilcblx0XHRcdH0sIGhhbmRsZU9iakluICk7XG5cblx0XHRcdC8vIEluaXQgdGhlIGV2ZW50IGhhbmRsZXIgcXVldWUgaWYgd2UncmUgdGhlIGZpcnN0XG5cdFx0XHRpZiAoICEoaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSkgKSB7XG5cdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cblx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHwgc3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdFx0XHRcdGVsZW0uYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZXZlbnRIYW5kbGUsIGZhbHNlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdHNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXG5cdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdGpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7XG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdHJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7XG5cblx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YV9wcml2Lmhhc0RhdGEoIGVsZW0gKSAmJiBkYXRhX3ByaXYuZ2V0KCBlbGVtICk7XG5cblx0XHRpZiAoICFlbGVtRGF0YSB8fCAhKGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cykgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFVuYmluZCBhbGwgZXZlbnRzIChvbiB0aGlzIG5hbWVzcGFjZSwgaWYgcHJvdmlkZWQpIGZvciB0aGUgZWxlbWVudFxuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSArIHR5cGVzWyB0IF0sIGhhbmRsZXIsIHNlbGVjdG9yLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXHRcdFx0aGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSB8fCBbXTtcblx0XHRcdHRtcCA9IHRtcFsyXSAmJiBuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikgKyBcIihcXFxcLnwkKVwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuXHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHQoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG5cdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuXHRcdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaiwgMSApO1xuXG5cdFx0XHRcdFx0aWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LS07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG5cdFx0XHRcdFx0XHRzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdFxuXHRcdFx0Ly8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG5cdFx0XHRpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnRlYXJkb3duIHx8IHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWxldGUgZXZlbnRzWyB0eXBlIF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWRcblx0XHRpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHtcblx0XHRcdGRlbGV0ZSBlbGVtRGF0YS5oYW5kbGU7XG5cdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBcImV2ZW50c1wiICk7XG5cdFx0fVxuXHR9LFxuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCBldmVudCwgZGF0YSwgZWxlbSwgb25seUhhbmRsZXJzICkge1xuXG5cdFx0dmFyIGksIGN1ciwgdG1wLCBidWJibGVUeXBlLCBvbnR5cGUsIGhhbmRsZSwgc3BlY2lhbCxcblx0XHRcdGV2ZW50UGF0aCA9IFsgZWxlbSB8fCBkb2N1bWVudCBdLFxuXHRcdFx0dHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcblx0XHRcdG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdChcIi5cIikgOiBbXTtcblxuXHRcdGN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXG5cdFx0Ly8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3dcblx0XHRpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlLmluZGV4T2YoXCIuXCIpID49IDAgKSB7XG5cdFx0XHQvLyBOYW1lc3BhY2VkIHRyaWdnZXI7IGNyZWF0ZSBhIHJlZ2V4cCB0byBtYXRjaCBldmVudCB0eXBlIGluIGhhbmRsZSgpXG5cdFx0XHRuYW1lc3BhY2VzID0gdHlwZS5zcGxpdChcIi5cIik7XG5cdFx0XHR0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpO1xuXHRcdFx0bmFtZXNwYWNlcy5zb3J0KCk7XG5cdFx0fVxuXHRcdG9udHlwZSA9IHR5cGUuaW5kZXhPZihcIjpcIikgPCAwICYmIFwib25cIiArIHR5cGU7XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcblx0XHRldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdGV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gXCJvYmplY3RcIiAmJiBldmVudCApO1xuXG5cdFx0Ly8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuXHRcdGV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzO1xuXHRcdGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbihcIi5cIik7XG5cdFx0ZXZlbnQubmFtZXNwYWNlX3JlID0gZXZlbnQubmFtZXNwYWNlID9cblx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKSArIFwiKFxcXFwufCQpXCIgKSA6XG5cdFx0XHRudWxsO1xuXG5cdFx0Ly8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkXG5cdFx0ZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuXHRcdGlmICggIWV2ZW50LnRhcmdldCApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGVsZW07XG5cdFx0fVxuXG5cdFx0Ly8gQ2xvbmUgYW55IGluY29taW5nIGRhdGEgYW5kIHByZXBlbmQgdGhlIGV2ZW50LCBjcmVhdGluZyB0aGUgaGFuZGxlciBhcmcgbGlzdFxuXHRcdGRhdGEgPSBkYXRhID09IG51bGwgP1xuXHRcdFx0WyBldmVudCBdIDpcblx0XHRcdGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEsIFsgZXZlbnQgXSApO1xuXG5cdFx0Ly8gQWxsb3cgc3BlY2lhbCBldmVudHMgdG8gZHJhdyBvdXRzaWRlIHRoZSBsaW5lc1xuXHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiBzcGVjaWFsLnRyaWdnZXIgJiYgc3BlY2lhbC50cmlnZ2VyLmFwcGx5KCBlbGVtLCBkYXRhICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBldmVudCBwcm9wYWdhdGlvbiBwYXRoIGluIGFkdmFuY2UsIHBlciBXM0MgZXZlbnRzIHNwZWMgKCM5OTUxKVxuXHRcdC8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpXG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFzcGVjaWFsLm5vQnViYmxlICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0YnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG5cdFx0XHRpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuXHRcdFx0XHRjdXIgPSBjdXIucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuXHRcdFx0XHR0bXAgPSBjdXI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuXHRcdFx0aWYgKCB0bXAgPT09IChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKGN1ciA9IGV2ZW50UGF0aFtpKytdKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuXHRcdFx0ZXZlbnQudHlwZSA9IGkgPiAxID9cblx0XHRcdFx0YnViYmxlVHlwZSA6XG5cdFx0XHRcdHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuXHRcdFx0Ly8galF1ZXJ5IGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9ICggZGF0YV9wcml2LmdldCggY3VyLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdICYmIGRhdGFfcHJpdi5nZXQoIGN1ciwgXCJoYW5kbGVcIiApO1xuXHRcdFx0aWYgKCBoYW5kbGUgKSB7XG5cdFx0XHRcdGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5hdGl2ZSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSBvbnR5cGUgJiYgY3VyWyBvbnR5cGUgXTtcblx0XHRcdGlmICggaGFuZGxlICYmIGhhbmRsZS5hcHBseSAmJiBqUXVlcnkuYWNjZXB0RGF0YSggY3VyICkgKSB7XG5cdFx0XHRcdGV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xuXG5cdFx0Ly8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vd1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cblx0XHRcdGlmICggKCFzcGVjaWFsLl9kZWZhdWx0IHx8IHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZSkgJiZcblx0XHRcdFx0alF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblxuXHRcdFx0XHQvLyBDYWxsIGEgbmF0aXZlIERPTSBtZXRob2Qgb24gdGhlIHRhcmdldCB3aXRoIHRoZSBzYW1lIG5hbWUgbmFtZSBhcyB0aGUgZXZlbnQuXG5cdFx0XHRcdC8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MClcblx0XHRcdFx0aWYgKCBvbnR5cGUgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIGVsZW1bIHR5cGUgXSApICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2Rcblx0XHRcdFx0XHR0bXAgPSBlbGVtWyBvbnR5cGUgXTtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7XG5cdFx0XHRcdFx0ZWxlbVsgdHlwZSBdKCk7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSB0bXA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRkaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0ZXZlbnQgPSBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApO1xuXG5cdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLFxuXHRcdFx0aGFuZGxlclF1ZXVlID0gW10sXG5cdFx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cdFx0XHRoYW5kbGVycyA9ICggZGF0YV9wcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG5cdFx0Ly8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcblx0XHRhcmdzWzBdID0gZXZlbnQ7XG5cdFx0ZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzO1xuXG5cdFx0Ly8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuXHRcdGlmICggc3BlY2lhbC5wcmVEaXNwYXRjaCAmJiBzcGVjaWFsLnByZURpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBoYW5kbGVyc1xuXHRcdGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblxuXHRcdC8vIFJ1biBkZWxlZ2F0ZXMgZmlyc3Q7IHRoZXkgbWF5IHdhbnQgdG8gc3RvcCBwcm9wYWdhdGlvbiBiZW5lYXRoIHVzXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAobWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0pICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0ZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblxuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoIChoYW5kbGVPYmogPSBtYXRjaGVkLmhhbmRsZXJzWyBqKysgXSkgJiYgIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdFx0Ly8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvciAyKSBoYXZlIG5hbWVzcGFjZShzKVxuXHRcdFx0XHQvLyBhIHN1YnNldCBvciBlcXVhbCB0byB0aG9zZSBpbiB0aGUgYm91bmQgZXZlbnQgKGJvdGggY2FuIGhhdmUgbm8gbmFtZXNwYWNlKS5cblx0XHRcdFx0aWYgKCAhZXZlbnQubmFtZXNwYWNlX3JlIHx8IGV2ZW50Lm5hbWVzcGFjZV9yZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7XG5cblx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0ZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG5cdFx0XHRcdFx0cmV0ID0gKCAoalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9KS5oYW5kbGUgfHwgaGFuZGxlT2JqLmhhbmRsZXIgKVxuXHRcdFx0XHRcdFx0XHQuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdGlmICggKGV2ZW50LnJlc3VsdCA9IHJldCkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG5cdFx0aWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHtcblx0XHRcdHNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRoYW5kbGVyczogZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVycyApIHtcblx0XHR2YXIgaSwgbWF0Y2hlcywgc2VsLCBoYW5kbGVPYmosXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuXHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICgjMTMxODApXG5cdFx0Ly8gQXZvaWQgbm9uLWxlZnQtY2xpY2sgYnViYmxpbmcgaW4gRmlyZWZveCAoIzM4NjEpXG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50ICYmIGN1ci5ub2RlVHlwZSAmJiAoIWV2ZW50LmJ1dHRvbiB8fCBldmVudC50eXBlICE9PSBcImNsaWNrXCIpICkge1xuXG5cdFx0XHRmb3IgKCA7IGN1ciAhPT0gdGhpczsgY3VyID0gY3VyLnBhcmVudE5vZGUgfHwgdGhpcyApIHtcblxuXHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0aWYgKCBjdXIuZGlzYWJsZWQgIT09IHRydWUgfHwgZXZlbnQudHlwZSAhPT0gXCJjbGlja1wiICkge1xuXHRcdFx0XHRcdG1hdGNoZXMgPSBbXTtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG5cdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID49IDAgOlxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG1hdGNoZXMubGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBtYXRjaGVzIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnNcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRoYW5kbGVyUXVldWUucHVzaCh7IGVsZW06IHRoaXMsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBoYW5kbGVyUXVldWU7XG5cdH0sXG5cblx0Ly8gSW5jbHVkZXMgc29tZSBldmVudCBwcm9wcyBzaGFyZWQgYnkgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnRcblx0cHJvcHM6IFwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLFxuXG5cdGZpeEhvb2tzOiB7fSxcblxuXHRrZXlIb29rczoge1xuXHRcdHByb3BzOiBcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXG5cdFx0XHQvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcblx0XHRcdGlmICggZXZlbnQud2hpY2ggPT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnQud2hpY2ggPSBvcmlnaW5hbC5jaGFyQ29kZSAhPSBudWxsID8gb3JpZ2luYWwuY2hhckNvZGUgOiBvcmlnaW5hbC5rZXlDb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZXZlbnQ7XG5cdFx0fVxuXHR9LFxuXG5cdG1vdXNlSG9va3M6IHtcblx0XHRwcm9wczogXCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXHRcdFx0dmFyIGV2ZW50RG9jLCBkb2MsIGJvZHksXG5cdFx0XHRcdGJ1dHRvbiA9IG9yaWdpbmFsLmJ1dHRvbjtcblxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHBhZ2VYL1kgaWYgbWlzc2luZyBhbmQgY2xpZW50WC9ZIGF2YWlsYWJsZVxuXHRcdFx0aWYgKCBldmVudC5wYWdlWCA9PSBudWxsICYmIG9yaWdpbmFsLmNsaWVudFggIT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnREb2MgPSBldmVudC50YXJnZXQub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudDtcblx0XHRcdFx0ZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdFx0XHRib2R5ID0gZXZlbnREb2MuYm9keTtcblxuXHRcdFx0XHRldmVudC5wYWdlWCA9IG9yaWdpbmFsLmNsaWVudFggKyAoIGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwICkgLSAoIGRvYyAmJiBkb2MuY2xpZW50TGVmdCB8fCBib2R5ICYmIGJvZHkuY2xpZW50TGVmdCB8fCAwICk7XG5cdFx0XHRcdGV2ZW50LnBhZ2VZID0gb3JpZ2luYWwuY2xpZW50WSArICggZG9jICYmIGRvYy5zY3JvbGxUb3AgIHx8IGJvZHkgJiYgYm9keS5zY3JvbGxUb3AgIHx8IDAgKSAtICggZG9jICYmIGRvYy5jbGllbnRUb3AgIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgIHx8IDAgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuXHRcdFx0Ly8gTm90ZTogYnV0dG9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyBkb24ndCB1c2UgaXRcblx0XHRcdGlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRldmVudC53aGljaCA9ICggYnV0dG9uICYgMSA/IDEgOiAoIGJ1dHRvbiAmIDIgPyAzIDogKCBidXR0b24gJiA0ID8gMiA6IDAgKSApICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cdH0sXG5cblx0Zml4OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSApIHtcblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgYSB3cml0YWJsZSBjb3B5IG9mIHRoZSBldmVudCBvYmplY3QgYW5kIG5vcm1hbGl6ZSBzb21lIHByb3BlcnRpZXNcblx0XHR2YXIgaSwgcHJvcCwgY29weSxcblx0XHRcdHR5cGUgPSBldmVudC50eXBlLFxuXHRcdFx0b3JpZ2luYWxFdmVudCA9IGV2ZW50LFxuXHRcdFx0Zml4SG9vayA9IHRoaXMuZml4SG9va3NbIHR5cGUgXTtcblxuXHRcdGlmICggIWZpeEhvb2sgKSB7XG5cdFx0XHR0aGlzLmZpeEhvb2tzWyB0eXBlIF0gPSBmaXhIb29rID1cblx0XHRcdFx0cm1vdXNlRXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5tb3VzZUhvb2tzIDpcblx0XHRcdFx0cmtleUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMua2V5SG9va3MgOlxuXHRcdFx0XHR7fTtcblx0XHR9XG5cdFx0Y29weSA9IGZpeEhvb2sucHJvcHMgPyB0aGlzLnByb3BzLmNvbmNhdCggZml4SG9vay5wcm9wcyApIDogdGhpcy5wcm9wcztcblxuXHRcdGV2ZW50ID0gbmV3IGpRdWVyeS5FdmVudCggb3JpZ2luYWxFdmVudCApO1xuXG5cdFx0aSA9IGNvcHkubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0cHJvcCA9IGNvcHlbIGkgXTtcblx0XHRcdGV2ZW50WyBwcm9wIF0gPSBvcmlnaW5hbEV2ZW50WyBwcm9wIF07XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogQ29yZG92YSAyLjUgKFdlYktpdCkgKCMxMzI1NSlcblx0XHQvLyBBbGwgZXZlbnRzIHNob3VsZCBoYXZlIGEgdGFyZ2V0OyBDb3Jkb3ZhIGRldmljZXJlYWR5IGRvZXNuJ3Rcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBkb2N1bWVudDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgNi4wKywgQ2hyb21lPDI4XG5cdFx0Ly8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0Mylcblx0XHRpZiAoIGV2ZW50LnRhcmdldC5ub2RlVHlwZSA9PT0gMyApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmaXhIb29rLmZpbHRlciA/IGZpeEhvb2suZmlsdGVyKCBldmVudCwgb3JpZ2luYWxFdmVudCApIDogZXZlbnQ7XG5cdH0sXG5cblx0c3BlY2lhbDoge1xuXHRcdGxvYWQ6IHtcblx0XHRcdC8vIFByZXZlbnQgdHJpZ2dlcmVkIGltYWdlLmxvYWQgZXZlbnRzIGZyb20gYnViYmxpbmcgdG8gd2luZG93LmxvYWRcblx0XHRcdG5vQnViYmxlOiB0cnVlXG5cdFx0fSxcblx0XHRmb2N1czoge1xuXHRcdFx0Ly8gRmlyZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG5cdFx0XHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c2luXCJcblx0XHR9LFxuXHRcdGJsdXI6IHtcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMgPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5ibHVyICkge1xuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c291dFwiXG5cdFx0fSxcblx0XHRjbGljazoge1xuXHRcdFx0Ly8gRm9yIGNoZWNrYm94LCBmaXJlIG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHRcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgJiYgalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR0aGlzLmNsaWNrKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBGb3IgY3Jvc3MtYnJvd3NlciBjb25zaXN0ZW5jeSwgZG9uJ3QgZmlyZSBuYXRpdmUgLmNsaWNrKCkgb24gbGlua3Ncblx0XHRcdF9kZWZhdWx0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkubm9kZU5hbWUoIGV2ZW50LnRhcmdldCwgXCJhXCIgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmVmb3JldW5sb2FkOiB7XG5cdFx0XHRwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDIwK1xuXHRcdFx0XHQvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuXG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHNpbXVsYXRlOiBmdW5jdGlvbiggdHlwZSwgZWxlbSwgZXZlbnQsIGJ1YmJsZSApIHtcblx0XHQvLyBQaWdneWJhY2sgb24gYSBkb25vciBldmVudCB0byBzaW11bGF0ZSBhIGRpZmZlcmVudCBvbmUuXG5cdFx0Ly8gRmFrZSBvcmlnaW5hbEV2ZW50IHRvIGF2b2lkIGRvbm9yJ3Mgc3RvcFByb3BhZ2F0aW9uLCBidXQgaWYgdGhlXG5cdFx0Ly8gc2ltdWxhdGVkIGV2ZW50IHByZXZlbnRzIGRlZmF1bHQgdGhlbiB3ZSBkbyB0aGUgc2FtZSBvbiB0aGUgZG9ub3IuXG5cdFx0dmFyIGUgPSBqUXVlcnkuZXh0ZW5kKFxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCgpLFxuXHRcdFx0ZXZlbnQsXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGlzU2ltdWxhdGVkOiB0cnVlLFxuXHRcdFx0XHRvcmlnaW5hbEV2ZW50OiB7fVxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0aWYgKCBidWJibGUgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuZGlzcGF0Y2guY2FsbCggZWxlbSwgZSApO1xuXHRcdH1cblx0XHRpZiAoIGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcblx0aWYgKCBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0ZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUsIGZhbHNlICk7XG5cdH1cbn07XG5cbmpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkge1xuXHQvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcblx0aWYgKCAhKHRoaXMgaW5zdGFuY2VvZiBqUXVlcnkuRXZlbnQpICkge1xuXHRcdHJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBFdmVudCBvYmplY3Rcblx0aWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7XG5cdFx0dGhpcy5vcmlnaW5hbEV2ZW50ID0gc3JjO1xuXHRcdHRoaXMudHlwZSA9IHNyYy50eXBlO1xuXG5cdFx0Ly8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWRcblx0XHQvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS5cblx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8XG5cdFx0XHRcdHNyYy5kZWZhdWx0UHJldmVudGVkID09PSB1bmRlZmluZWQgJiZcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0XHRcdFx0c3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRyZXR1cm5UcnVlIDpcblx0XHRcdHJldHVybkZhbHNlO1xuXG5cdC8vIEV2ZW50IHR5cGVcblx0fSBlbHNlIHtcblx0XHR0aGlzLnR5cGUgPSBzcmM7XG5cdH1cblxuXHQvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuXHRpZiAoIHByb3BzICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZVxuXHR0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTtcblxuXHQvLyBNYXJrIGl0IGFzIGZpeGVkXG5cdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbmpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7XG5cdGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG5cdGlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXG5cdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnByZXZlbnREZWZhdWx0ICkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblx0c3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmIGUuc3RvcFByb3BhZ2F0aW9uICkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiApIHtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcblx0fVxufTtcblxuLy8gQ3JlYXRlIG1vdXNlZW50ZXIvbGVhdmUgZXZlbnRzIHVzaW5nIG1vdXNlb3Zlci9vdXQgYW5kIGV2ZW50LXRpbWUgY2hlY2tzXG4vLyBTdXBwb3J0OiBDaHJvbWUgMTUrXG5qUXVlcnkuZWFjaCh7XG5cdG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG5cdG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIixcblx0cG9pbnRlcmVudGVyOiBcInBvaW50ZXJvdmVyXCIsXG5cdHBvaW50ZXJsZWF2ZTogXCJwb2ludGVyb3V0XCJcbn0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBvcmlnIF0gPSB7XG5cdFx0ZGVsZWdhdGVUeXBlOiBmaXgsXG5cdFx0YmluZFR5cGU6IGZpeCxcblxuXHRcdGhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIHJldCxcblx0XHRcdFx0dGFyZ2V0ID0gdGhpcyxcblx0XHRcdFx0cmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsXG5cdFx0XHRcdGhhbmRsZU9iaiA9IGV2ZW50LmhhbmRsZU9iajtcblxuXHRcdFx0Ly8gRm9yIG1vdXNlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuXHRcdFx0Ly8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcblx0XHRcdGlmICggIXJlbGF0ZWQgfHwgKHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSkgKSB7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7XG5cdFx0XHRcdHJldCA9IGhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGZpeDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3gsIENocm9tZSwgU2FmYXJpXG4vLyBDcmVhdGUgXCJidWJibGluZ1wiIGZvY3VzIGFuZCBibHVyIGV2ZW50c1xuaWYgKCAhc3VwcG9ydC5mb2N1c2luQnViYmxlcyApIHtcblx0alF1ZXJ5LmVhY2goeyBmb2N1czogXCJmb2N1c2luXCIsIGJsdXI6IFwiZm9jdXNvdXRcIiB9LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXG5cdFx0Ly8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXRcblx0XHR2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0alF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSwgdHJ1ZSApO1xuXHRcdFx0fTtcblxuXHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YV9wcml2LmFjY2VzcyggZG9jLCBmaXggKTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4LCAoIGF0dGFjaGVzIHx8IDAgKSArIDEgKTtcblx0XHRcdH0sXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4ICkgLSAxO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZG9jLCBmaXggKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4LCBhdHRhY2hlcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fSk7XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXG5cdG9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgLypJTlRFUk5BTCovIG9uZSApIHtcblx0XHR2YXIgb3JpZ0ZuLCB0eXBlO1xuXG5cdFx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHQvLyAoIHR5cGVzLU9iamVjdCwgc2VsZWN0b3IsIGRhdGEgKVxuXHRcdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdC8vICggdHlwZXMtT2JqZWN0LCBkYXRhIClcblx0XHRcdFx0ZGF0YSA9IGRhdGEgfHwgc2VsZWN0b3I7XG5cdFx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0dGhpcy5vbiggdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHtcblx0XHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyAoIHR5cGVzLCBzZWxlY3RvciwgZm4gKVxuXHRcdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyAoIHR5cGVzLCBkYXRhLCBmbiApXG5cdFx0XHRcdGZuID0gZGF0YTtcblx0XHRcdFx0ZGF0YSA9IHNlbGVjdG9yO1xuXHRcdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdH0gZWxzZSBpZiAoICFmbiApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdGlmICggb25lID09PSAxICkge1xuXHRcdFx0b3JpZ0ZuID0gZm47XG5cdFx0XHRmbiA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0Ly8gQ2FuIHVzZSBhbiBlbXB0eSBzZXQsIHNpbmNlIGV2ZW50IGNvbnRhaW5zIHRoZSBpbmZvXG5cdFx0XHRcdGpRdWVyeSgpLm9mZiggZXZlbnQgKTtcblx0XHRcdFx0cmV0dXJuIG9yaWdGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHR9O1xuXHRcdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0XHR9KTtcblx0fSxcblx0b25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgMSApO1xuXHR9LFxuXHRvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkge1xuXHRcdHZhciBoYW5kbGVPYmosIHR5cGU7XG5cdFx0aWYgKCB0eXBlcyAmJiB0eXBlcy5wcmV2ZW50RGVmYXVsdCAmJiB0eXBlcy5oYW5kbGVPYmogKSB7XG5cdFx0XHQvLyAoIGV2ZW50ICkgIGRpc3BhdGNoZWQgalF1ZXJ5LkV2ZW50XG5cdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKFxuXHRcdFx0XHRoYW5kbGVPYmoubmFtZXNwYWNlID8gaGFuZGxlT2JqLm9yaWdUeXBlICsgXCIuXCIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDogaGFuZGxlT2JqLm9yaWdUeXBlLFxuXHRcdFx0XHRoYW5kbGVPYmouc2VsZWN0b3IsXG5cdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRcdHRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCB0aGlzICk7XG5cdFx0fSk7XG5cdH0sXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgZWxlbSA9IHRoaXNbMF07XG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7XG5cdFx0fVxuXHR9XG59KTtcblxuXG52YXJcblx0cnhodG1sVGFnID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLFxuXHRydGFnTmFtZSA9IC88KFtcXHc6XSspLyxcblx0cmh0bWwgPSAvPHwmIz9cXHcrOy8sXG5cdHJub0lubmVyaHRtbCA9IC88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksXG5cdC8vIGNoZWNrZWQ9XCJjaGVja2VkXCIgb3IgY2hlY2tlZFxuXHRyY2hlY2tlZCA9IC9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksXG5cdHJzY3JpcHRUeXBlID0gL14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxcblx0cnNjcmlwdFR5cGVNYXNrZWQgPSAvXnRydWVcXC8oLiopLyxcblx0cmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLFxuXG5cdC8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG5cdHdyYXBNYXAgPSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRvcHRpb246IFsgMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCIgXSxcblxuXHRcdHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcblx0XHRjb2w6IFsgMiwgXCI8dGFibGU+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuXHRcdHRyOiBbIDIsIFwiPHRhYmxlPjx0Ym9keT5cIiwgXCI8L3Rib2R5PjwvdGFibGU+XCIgXSxcblx0XHR0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cblx0XHRfZGVmYXVsdDogWyAwLCBcIlwiLCBcIlwiIF1cblx0fTtcblxuLy8gU3VwcG9ydDogSUU5XG53cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG5cbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuLy8gU3VwcG9ydDogMS54IGNvbXBhdGliaWxpdHlcbi8vIE1hbmlwdWxhdGluZyB0YWJsZXMgcmVxdWlyZXMgYSB0Ym9keVxuZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuXHRyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdGpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSA/XG5cblx0XHRlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF0gfHxcblx0XHRcdGVsZW0uYXBwZW5kQ2hpbGQoIGVsZW0ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikgKSA6XG5cdFx0ZWxlbTtcbn1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHtcblx0ZWxlbS50eXBlID0gKGVsZW0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKSAhPT0gbnVsbCkgKyBcIi9cIiArIGVsZW0udHlwZTtcblx0cmV0dXJuIGVsZW07XG59XG5mdW5jdGlvbiByZXN0b3JlU2NyaXB0KCBlbGVtICkge1xuXHR2YXIgbWF0Y2ggPSByc2NyaXB0VHlwZU1hc2tlZC5leGVjKCBlbGVtLnR5cGUgKTtcblxuXHRpZiAoIG1hdGNoICkge1xuXHRcdGVsZW0udHlwZSA9IG1hdGNoWyAxIF07XG5cdH0gZWxzZSB7XG5cdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuZnVuY3Rpb24gc2V0R2xvYmFsRXZhbCggZWxlbXMsIHJlZkVsZW1lbnRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZGF0YV9wcml2LnNldChcblx0XHRcdGVsZW1zWyBpIF0sIFwiZ2xvYmFsRXZhbFwiLCAhcmVmRWxlbWVudHMgfHwgZGF0YV9wcml2LmdldCggcmVmRWxlbWVudHNbIGkgXSwgXCJnbG9iYWxFdmFsXCIgKVxuXHRcdCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2xvbmVDb3B5RXZlbnQoIHNyYywgZGVzdCApIHtcblx0dmFyIGksIGwsIHR5cGUsIHBkYXRhT2xkLCBwZGF0YUN1ciwgdWRhdGFPbGQsIHVkYXRhQ3VyLCBldmVudHM7XG5cblx0aWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIDEuIENvcHkgcHJpdmF0ZSBkYXRhOiBldmVudHMsIGhhbmRsZXJzLCBldGMuXG5cdGlmICggZGF0YV9wcml2Lmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHBkYXRhT2xkID0gZGF0YV9wcml2LmFjY2Vzcyggc3JjICk7XG5cdFx0cGRhdGFDdXIgPSBkYXRhX3ByaXYuc2V0KCBkZXN0LCBwZGF0YU9sZCApO1xuXHRcdGV2ZW50cyA9IHBkYXRhT2xkLmV2ZW50cztcblxuXHRcdGlmICggZXZlbnRzICkge1xuXHRcdFx0ZGVsZXRlIHBkYXRhQ3VyLmhhbmRsZTtcblx0XHRcdHBkYXRhQ3VyLmV2ZW50cyA9IHt9O1xuXG5cdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBldmVudHNbIHR5cGUgXS5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZGVzdCwgdHlwZSwgZXZlbnRzWyB0eXBlIF1bIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gMi4gQ29weSB1c2VyIGRhdGFcblx0aWYgKCBkYXRhX3VzZXIuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0dWRhdGFPbGQgPSBkYXRhX3VzZXIuYWNjZXNzKCBzcmMgKTtcblx0XHR1ZGF0YUN1ciA9IGpRdWVyeS5leHRlbmQoIHt9LCB1ZGF0YU9sZCApO1xuXG5cdFx0ZGF0YV91c2VyLnNldCggZGVzdCwgdWRhdGFDdXIgKTtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcblx0dmFyIHJldCA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPyBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgfHwgXCIqXCIgKSA6XG5cdFx0XHRjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgPyBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdFtdO1xuXG5cdHJldHVybiB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSA/XG5cdFx0alF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICkgOlxuXHRcdHJldDtcbn1cblxuLy8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5mdW5jdGlvbiBmaXhJbnB1dCggc3JjLCBkZXN0ICkge1xuXHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gRmFpbHMgdG8gcGVyc2lzdCB0aGUgY2hlY2tlZCBzdGF0ZSBvZiBhIGNsb25lZCBjaGVja2JveCBvciByYWRpbyBidXR0b24uXG5cdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG5cdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG5cdH1cbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cdGNsb25lOiBmdW5jdGlvbiggZWxlbSwgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0dmFyIGksIGwsIHNyY0VsZW1lbnRzLCBkZXN0RWxlbWVudHMsXG5cdFx0XHRjbG9uZSA9IGVsZW0uY2xvbmVOb2RlKCB0cnVlICksXG5cdFx0XHRpblBhZ2UgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXG5cdFx0Ly8gRml4IElFIGNsb25pbmcgaXNzdWVzXG5cdFx0aWYgKCAhc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCAmJiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgZWxlbS5ub2RlVHlwZSA9PT0gMTEgKSAmJlxuXHRcdFx0XHQhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cblx0XHRcdC8vIFdlIGVzY2hldyBTaXp6bGUgaGVyZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uczogaHR0cDovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG5cdFx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7XG5cdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXG5cdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuXHRcdGlmICggZGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG5cdFx0XHRcdGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG5cdFx0aWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdHJldHVybiBjbG9uZTtcblx0fSxcblxuXHRidWlsZEZyYWdtZW50OiBmdW5jdGlvbiggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiApIHtcblx0XHR2YXIgZWxlbSwgdG1wLCB0YWcsIHdyYXAsIGNvbnRhaW5zLCBqLFxuXHRcdFx0ZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRcdG5vZGVzID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRlbGVtID0gZWxlbXNbIGkgXTtcblxuXHRcdFx0aWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cblx0XHRcdFx0Ly8gQWRkIG5vZGVzIGRpcmVjdGx5XG5cdFx0XHRcdGlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdCwgUGhhbnRvbUpTXG5cdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIGVsZW0ubm9kZVR5cGUgPyBbIGVsZW0gXSA6IGVsZW0gKTtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcblx0XHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0XHRub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0bXAgPSB0bXAgfHwgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudChcImRpdlwiKSApO1xuXG5cdFx0XHRcdFx0Ly8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuXHRcdFx0XHRcdHRhZyA9ICggcnRhZ05hbWUuZXhlYyggZWxlbSApIHx8IFsgXCJcIiwgXCJcIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHRcdHRtcC5pbm5lckhUTUwgPSB3cmFwWyAxIF0gKyBlbGVtLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApICsgd3JhcFsgMiBdO1xuXG5cdFx0XHRcdFx0Ly8gRGVzY2VuZCB0aHJvdWdoIHdyYXBwZXJzIHRvIHRoZSByaWdodCBjb250ZW50XG5cdFx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0XHRcdHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXQsIFBoYW50b21KU1xuXHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCB0bXAuY2hpbGROb2RlcyApO1xuXG5cdFx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0XHR0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRcdFx0Ly8gRW5zdXJlIHRoZSBjcmVhdGVkIG5vZGVzIGFyZSBvcnBoYW5lZCAoIzEyMzkyKVxuXHRcdFx0XHRcdHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XG5cdFx0ZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoZWxlbSA9IG5vZGVzWyBpKysgXSkgKSB7XG5cblx0XHRcdC8vICM0MDg3IC0gSWYgb3JpZ2luIGFuZCBkZXN0aW5hdGlvbiBlbGVtZW50cyBhcmUgdGhlIHNhbWUsIGFuZCB0aGlzIGlzXG5cdFx0XHQvLyB0aGF0IGVsZW1lbnQsIGRvIG5vdCBkbyBhbnl0aGluZ1xuXHRcdFx0aWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApICE9PSAtMSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdFx0Ly8gQXBwZW5kIHRvIGZyYWdtZW50XG5cdFx0XHR0bXAgPSBnZXRBbGwoIGZyYWdtZW50LmFwcGVuZENoaWxkKCBlbGVtICksIFwic2NyaXB0XCIgKTtcblxuXHRcdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdFx0aWYgKCBjb250YWlucyApIHtcblx0XHRcdFx0c2V0R2xvYmFsRXZhbCggdG1wICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhcHR1cmUgZXhlY3V0YWJsZXNcblx0XHRcdGlmICggc2NyaXB0cyApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSB0bXBbIGorKyBdKSApIHtcblx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCBcIlwiICkgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZnJhZ21lbnQ7XG5cdH0sXG5cblx0Y2xlYW5EYXRhOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cdFx0dmFyIGRhdGEsIGVsZW0sIHR5cGUsIGtleSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IGVsZW1zWyBpIF0pICE9PSB1bmRlZmluZWQ7IGkrKyApIHtcblx0XHRcdGlmICggalF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0a2V5ID0gZWxlbVsgZGF0YV9wcml2LmV4cGFuZG8gXTtcblxuXHRcdFx0XHRpZiAoIGtleSAmJiAoZGF0YSA9IGRhdGFfcHJpdi5jYWNoZVsga2V5IF0pICkge1xuXHRcdFx0XHRcdGlmICggZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCB0eXBlIGluIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZFxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIGRhdGFfcHJpdi5jYWNoZVsga2V5IF0gKSB7XG5cdFx0XHRcdFx0XHQvLyBEaXNjYXJkIGFueSByZW1haW5pbmcgYHByaXZhdGVgIGRhdGFcblx0XHRcdFx0XHRcdGRlbGV0ZSBkYXRhX3ByaXYuY2FjaGVbIGtleSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gRGlzY2FyZCBhbnkgcmVtYWluaW5nIGB1c2VyYCBkYXRhXG5cdFx0XHRkZWxldGUgZGF0YV91c2VyLmNhY2hlWyBlbGVtWyBkYXRhX3VzZXIuZXhwYW5kbyBdIF07XG5cdFx0fVxuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHRleHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS50ZXh0KCB0aGlzICkgOlxuXHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRcdHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG5cdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHByZXBlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRiZWZvcmU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHJlbW92ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCBrZWVwRGF0YSAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcblx0XHR2YXIgZWxlbSxcblx0XHRcdGVsZW1zID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgdGhpcyApIDogdGhpcyxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRpZiAoICFrZWVwRGF0YSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0gKSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0aWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkge1xuXHRcdFx0XHRcdHNldEdsb2JhbEV2YWwoIGdldEFsbCggZWxlbSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IChlbGVtID0gdGhpc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXG5cdFx0XHRcdC8vIFJlbW92ZSBhbnkgcmVtYWluaW5nIG5vZGVzXG5cdFx0XHRcdGVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0ZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50cztcblx0XHRkZWVwRGF0YUFuZEV2ZW50cyA9IGRlZXBEYXRhQW5kRXZlbnRzID09IG51bGwgPyBkYXRhQW5kRXZlbnRzIDogZGVlcERhdGFBbmRFdmVudHM7XG5cblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmNsb25lKCB0aGlzLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApO1xuXHRcdH0pO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoKCBlICkge31cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHR0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApO1xuXHRcdFx0fVxuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBhcmcgPSBhcmd1bWVudHNbIDAgXTtcblxuXHRcdC8vIE1ha2UgdGhlIGNoYW5nZXMsIHJlcGxhY2luZyBlYWNoIGNvbnRleHQgZWxlbWVudCB3aXRoIHRoZSBuZXcgY29udGVudFxuXHRcdHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRhcmcgPSB0aGlzLnBhcmVudE5vZGU7XG5cblx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggdGhpcyApICk7XG5cblx0XHRcdGlmICggYXJnICkge1xuXHRcdFx0XHRhcmcucmVwbGFjZUNoaWxkKCBlbGVtLCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBGb3JjZSByZW1vdmFsIGlmIHRoZXJlIHdhcyBubyBuZXcgY29udGVudCAoZS5nLiwgZnJvbSBlbXB0eSBhcmd1bWVudHMpXG5cdFx0cmV0dXJuIGFyZyAmJiAoYXJnLmxlbmd0aCB8fCBhcmcubm9kZVR5cGUpID8gdGhpcyA6IHRoaXMucmVtb3ZlKCk7XG5cdH0sXG5cblx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVtb3ZlKCBzZWxlY3RvciwgdHJ1ZSApO1xuXHR9LFxuXG5cdGRvbU1hbmlwOiBmdW5jdGlvbiggYXJncywgY2FsbGJhY2sgKSB7XG5cblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0YXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTtcblxuXHRcdHZhciBmcmFnbWVudCwgZmlyc3QsIHNjcmlwdHMsIGhhc1NjcmlwdHMsIG5vZGUsIGRvYyxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0c2V0ID0gdGhpcyxcblx0XHRcdGlOb0Nsb25lID0gbCAtIDEsXG5cdFx0XHR2YWx1ZSA9IGFyZ3NbIDAgXSxcblx0XHRcdGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRcdGlmICggaXNGdW5jdGlvbiB8fFxuXHRcdFx0XHQoIGwgPiAxICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0XHRcdHZhciBzZWxmID0gc2V0LmVxKCBpbmRleCApO1xuXHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdFx0YXJnc1sgMCBdID0gdmFsdWUuY2FsbCggdGhpcywgaW5kZXgsIHNlbGYuaHRtbCgpICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2VsZi5kb21NYW5pcCggYXJncywgY2FsbGJhY2sgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICggbCApIHtcblx0XHRcdGZyYWdtZW50ID0galF1ZXJ5LmJ1aWxkRnJhZ21lbnQoIGFyZ3MsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50LCBmYWxzZSwgdGhpcyApO1xuXHRcdFx0Zmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRpZiAoIGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICkge1xuXHRcdFx0XHRmcmFnbWVudCA9IGZpcnN0O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGZpcnN0ICkge1xuXHRcdFx0XHRzY3JpcHRzID0galF1ZXJ5Lm1hcCggZ2V0QWxsKCBmcmFnbWVudCwgXCJzY3JpcHRcIiApLCBkaXNhYmxlU2NyaXB0ICk7XG5cdFx0XHRcdGhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDtcblxuXHRcdFx0XHQvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtIGluc3RlYWQgb2YgdGhlIGZpcnN0IGJlY2F1c2UgaXQgY2FuIGVuZCB1cFxuXHRcdFx0XHQvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLlxuXHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IGZyYWdtZW50O1xuXG5cdFx0XHRcdFx0aWYgKCBpICE9PSBpTm9DbG9uZSApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblxuXHRcdFx0XHRcdFx0Ly8gS2VlcCByZWZlcmVuY2VzIHRvIGNsb25lZCBzY3JpcHRzIGZvciBsYXRlciByZXN0b3JhdGlvblxuXHRcdFx0XHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdFxuXHRcdFx0XHRcdFx0XHQvLyBqUXVlcnkubWVyZ2UgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKCB0aGlzWyBpIF0sIG5vZGUsIGkgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblx0XHRcdFx0XHRkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50O1xuXG5cdFx0XHRcdFx0Ly8gUmVlbmFibGUgc2NyaXB0c1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTtcblxuXHRcdFx0XHRcdC8vIEV2YWx1YXRlIGV4ZWN1dGFibGUgc2NyaXB0cyBvbiBmaXJzdCBkb2N1bWVudCBpbnNlcnRpb25cblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBzY3JpcHRzWyBpIF07XG5cdFx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCBcIlwiICkgJiZcblx0XHRcdFx0XHRcdFx0IWRhdGFfcHJpdi5hY2Nlc3MoIG5vZGUsIFwiZ2xvYmFsRXZhbFwiICkgJiYgalF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUuc3JjICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuX2V2YWxVcmwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoIHJjbGVhblNjcmlwdCwgXCJcIiApICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKHtcblx0YXBwZW5kVG86IFwiYXBwZW5kXCIsXG5cdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdGluc2VydEJlZm9yZTogXCJiZWZvcmVcIixcblx0aW5zZXJ0QWZ0ZXI6IFwiYWZ0ZXJcIixcblx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG59LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBlbGVtcyxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0aW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuXHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0ZWxlbXMgPSBpID09PSBsYXN0ID8gdGhpcyA6IHRoaXMuY2xvbmUoIHRydWUgKTtcblx0XHRcdGpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXRcblx0XHRcdC8vIC5nZXQoKSBiZWNhdXNlIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Ncblx0XHRcdHB1c2guYXBwbHkoIHJldCwgZWxlbXMuZ2V0KCkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldCApO1xuXHR9O1xufSk7XG5cblxudmFyIGlmcmFtZSxcblx0ZWxlbWRpc3BsYXkgPSB7fTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYWN0dWFsIGRpc3BsYXkgb2YgYSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBub2RlTmFtZSBvZiB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3RcbiAqL1xuLy8gQ2FsbGVkIG9ubHkgZnJvbSB3aXRoaW4gZGVmYXVsdERpc3BsYXlcbmZ1bmN0aW9uIGFjdHVhbERpc3BsYXkoIG5hbWUsIGRvYyApIHtcblx0dmFyIHN0eWxlLFxuXHRcdGVsZW0gPSBqUXVlcnkoIGRvYy5jcmVhdGVFbGVtZW50KCBuYW1lICkgKS5hcHBlbmRUbyggZG9jLmJvZHkgKSxcblxuXHRcdC8vIGdldERlZmF1bHRDb21wdXRlZFN0eWxlIG1pZ2h0IGJlIHJlbGlhYmx5IHVzZWQgb25seSBvbiBhdHRhY2hlZCBlbGVtZW50XG5cdFx0ZGlzcGxheSA9IHdpbmRvdy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSAmJiAoIHN0eWxlID0gd2luZG93LmdldERlZmF1bHRDb21wdXRlZFN0eWxlKCBlbGVtWyAwIF0gKSApID9cblxuXHRcdFx0Ly8gVXNlIG9mIHRoaXMgbWV0aG9kIGlzIGEgdGVtcG9yYXJ5IGZpeCAobW9yZSBsaWtlIG9wdGltaXphdGlvbikgdW50aWwgc29tZXRoaW5nIGJldHRlciBjb21lcyBhbG9uZyxcblx0XHRcdC8vIHNpbmNlIGl0IHdhcyByZW1vdmVkIGZyb20gc3BlY2lmaWNhdGlvbiBhbmQgc3VwcG9ydGVkIG9ubHkgaW4gRkZcblx0XHRcdHN0eWxlLmRpc3BsYXkgOiBqUXVlcnkuY3NzKCBlbGVtWyAwIF0sIFwiZGlzcGxheVwiICk7XG5cblx0Ly8gV2UgZG9uJ3QgaGF2ZSBhbnkgZGF0YSBzdG9yZWQgb24gdGhlIGVsZW1lbnQsXG5cdC8vIHNvIHVzZSBcImRldGFjaFwiIG1ldGhvZCBhcyBmYXN0IHdheSB0byBnZXQgcmlkIG9mIHRoZSBlbGVtZW50XG5cdGVsZW0uZGV0YWNoKCk7XG5cblx0cmV0dXJuIGRpc3BsYXk7XG59XG5cbi8qKlxuICogVHJ5IHRvIGRldGVybWluZSB0aGUgZGVmYXVsdCBkaXNwbGF5IHZhbHVlIG9mIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVxuICovXG5mdW5jdGlvbiBkZWZhdWx0RGlzcGxheSggbm9kZU5hbWUgKSB7XG5cdHZhciBkb2MgPSBkb2N1bWVudCxcblx0XHRkaXNwbGF5ID0gZWxlbWRpc3BsYXlbIG5vZGVOYW1lIF07XG5cblx0aWYgKCAhZGlzcGxheSApIHtcblx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXG5cdFx0Ly8gSWYgdGhlIHNpbXBsZSB3YXkgZmFpbHMsIHJlYWQgZnJvbSBpbnNpZGUgYW4gaWZyYW1lXG5cdFx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiB8fCAhZGlzcGxheSApIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSBhbHJlYWR5LWNyZWF0ZWQgaWZyYW1lIGlmIHBvc3NpYmxlXG5cdFx0XHRpZnJhbWUgPSAoaWZyYW1lIHx8IGpRdWVyeSggXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIgKSkuYXBwZW5kVG8oIGRvYy5kb2N1bWVudEVsZW1lbnQgKTtcblxuXHRcdFx0Ly8gQWx3YXlzIHdyaXRlIGEgbmV3IEhUTUwgc2tlbGV0b24gc28gV2Via2l0IGFuZCBGaXJlZm94IGRvbid0IGNob2tlIG9uIHJldXNlXG5cdFx0XHRkb2MgPSBpZnJhbWVbIDAgXS5jb250ZW50RG9jdW1lbnQ7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFXG5cdFx0XHRkb2Mud3JpdGUoKTtcblx0XHRcdGRvYy5jbG9zZSgpO1xuXG5cdFx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXHRcdFx0aWZyYW1lLmRldGFjaCgpO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHRoZSBjb3JyZWN0IGRlZmF1bHQgZGlzcGxheVxuXHRcdGVsZW1kaXNwbGF5WyBub2RlTmFtZSBdID0gZGlzcGxheTtcblx0fVxuXG5cdHJldHVybiBkaXNwbGF5O1xufVxudmFyIHJtYXJnaW4gPSAoL15tYXJnaW4vKTtcblxudmFyIHJudW1ub25weCA9IG5ldyBSZWdFeHAoIFwiXihcIiArIHBudW0gKyBcIikoPyFweClbYS16JV0rJFwiLCBcImlcIiApO1xuXG52YXIgZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0Ly8gU3VwcG9ydDogSUU8PTExKywgRmlyZWZveDw9MzArICgjMTUwOTgsICMxNDE1MClcblx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHQvLyBGRiBtZWFud2hpbGUgdGhyb3dzIG9uIGZyYW1lIGVsZW1lbnRzIHRocm91Z2ggXCJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlXCJcblx0XHRpZiAoIGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5vcGVuZXIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKTtcblx0fTtcblxuXG5cbmZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdHZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cblx0Ly8gU3VwcG9ydDogSUU5XG5cdC8vIGdldFByb3BlcnR5VmFsdWUgaXMgb25seSBuZWVkZWQgZm9yIC5jc3MoJ2ZpbHRlcicpICgjMTI1MzcpXG5cdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0cmV0ID0gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF07XG5cdH1cblxuXHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0aWYgKCByZXQgPT09IFwiXCIgJiYgIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7XG5cdFx0XHRyZXQgPSBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBpT1MgPCA2XG5cdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdC8vIGlPUyA8IDYgKGF0IGxlYXN0KSByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIGEgbGFyZ2VyIHNldCBvZiB2YWx1ZXMsIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHNcblx0XHQvLyB0aGlzIGlzIGFnYWluc3QgdGhlIENTU09NIGRyYWZ0IHNwZWM6IGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXNcblx0XHRpZiAoIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiBybWFyZ2luLnRlc3QoIG5hbWUgKSApIHtcblxuXHRcdFx0Ly8gUmVtZW1iZXIgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXHRcdFx0d2lkdGggPSBzdHlsZS53aWR0aDtcblx0XHRcdG1pbldpZHRoID0gc3R5bGUubWluV2lkdGg7XG5cdFx0XHRtYXhXaWR0aCA9IHN0eWxlLm1heFdpZHRoO1xuXG5cdFx0XHQvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IHN0eWxlLm1heFdpZHRoID0gc3R5bGUud2lkdGggPSByZXQ7XG5cdFx0XHRyZXQgPSBjb21wdXRlZC53aWR0aDtcblxuXHRcdFx0Ly8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuXHRcdFx0c3R5bGUud2lkdGggPSB3aWR0aDtcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7XG5cdFx0XHRzdHlsZS5tYXhXaWR0aCA9IG1heFdpZHRoO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXQgIT09IHVuZGVmaW5lZCA/XG5cdFx0Ly8gU3VwcG9ydDogSUVcblx0XHQvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLlxuXHRcdHJldCArIFwiXCIgOlxuXHRcdHJldDtcbn1cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG5cdC8vIERlZmluZSB0aGUgaG9vaywgd2UnbGwgY2hlY2sgb24gdGhlIGZpcnN0IHJ1biBpZiBpdCdzIHJlYWxseSBuZWVkZWQuXG5cdHJldHVybiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggY29uZGl0aW9uRm4oKSApIHtcblx0XHRcdFx0Ly8gSG9vayBub3QgbmVlZGVkIChvciBpdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgaXQgZHVlXG5cdFx0XHRcdC8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC5cblx0XHRcdFx0ZGVsZXRlIHRoaXMuZ2V0O1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLlxuXHRcdFx0cmV0dXJuICh0aGlzLmdldCA9IGhvb2tGbikuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fTtcbn1cblxuXG4oZnVuY3Rpb24oKSB7XG5cdHZhciBwaXhlbFBvc2l0aW9uVmFsLCBib3hTaXppbmdSZWxpYWJsZVZhbCxcblx0XHRkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuXHRcdGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cblx0aWYgKCAhZGl2LnN0eWxlICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gU3R5bGUgb2YgY2xvbmVkIGVsZW1lbnQgYWZmZWN0cyBzb3VyY2UgZWxlbWVudCBjbG9uZWQgKCM4OTA4KVxuXHRkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdGRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiXCI7XG5cdHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cblx0Y29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBcImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O1wiICtcblx0XHRcInBvc2l0aW9uOmFic29sdXRlXCI7XG5cdGNvbnRhaW5lci5hcHBlbmRDaGlsZCggZGl2ICk7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVQaXhlbFBvc2l0aW9uQW5kQm94U2l6aW5nUmVsaWFibGUoKSB7XG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjNcblx0XHRcdC8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZ1xuXHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtcIiArXG5cdFx0XHRcImJveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO1wiICtcblx0XHRcdFwiYm9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGVcIjtcblx0XHRkaXYuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdHZhciBkaXZTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBkaXYsIG51bGwgKTtcblx0XHRwaXhlbFBvc2l0aW9uVmFsID0gZGl2U3R5bGUudG9wICE9PSBcIjElXCI7XG5cdFx0Ym94U2l6aW5nUmVsaWFibGVWYWwgPSBkaXZTdHlsZS53aWR0aCA9PT0gXCI0cHhcIjtcblxuXHRcdGRvY0VsZW0ucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogbm9kZS5qcyBqc2RvbVxuXHQvLyBEb24ndCBhc3N1bWUgdGhhdCBnZXRDb21wdXRlZFN0eWxlIGlzIGEgcHJvcGVydHkgb2YgdGhlIGdsb2JhbCBvYmplY3Rcblx0aWYgKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCBzdXBwb3J0LCB7XG5cdFx0XHRwaXhlbFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBUaGlzIHRlc3QgaXMgZXhlY3V0ZWQgb25seSBvbmNlIGJ1dCB3ZSBzdGlsbCBkbyBtZW1vaXppbmdcblx0XHRcdFx0Ly8gc2luY2Ugd2UgY2FuIHVzZSB0aGUgYm94U2l6aW5nUmVsaWFibGUgcHJlLWNvbXB1dGluZy5cblx0XHRcdFx0Ly8gTm8gbmVlZCB0byBjaGVjayBpZiB0aGUgdGVzdCB3YXMgYWxyZWFkeSBwZXJmb3JtZWQsIHRob3VnaC5cblx0XHRcdFx0Y29tcHV0ZVBpeGVsUG9zaXRpb25BbmRCb3hTaXppbmdSZWxpYWJsZSgpO1xuXHRcdFx0XHRyZXR1cm4gcGl4ZWxQb3NpdGlvblZhbDtcblx0XHRcdH0sXG5cdFx0XHRib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggYm94U2l6aW5nUmVsaWFibGVWYWwgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRjb21wdXRlUGl4ZWxQb3NpdGlvbkFuZEJveFNpemluZ1JlbGlhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO1xuXHRcdFx0fSxcblx0XHRcdHJlbGlhYmxlTWFyZ2luUmlnaHQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdC8vIENoZWNrIGlmIGRpdiB3aXRoIGV4cGxpY2l0IHdpZHRoIGFuZCBubyBtYXJnaW4tcmlnaHQgaW5jb3JyZWN0bHlcblx0XHRcdFx0Ly8gZ2V0cyBjb21wdXRlZCBtYXJnaW4tcmlnaHQgYmFzZWQgb24gd2lkdGggb2YgY29udGFpbmVyLiAoIzMzMzMpXG5cdFx0XHRcdC8vIFdlYktpdCBCdWcgMTMzNDMgLSBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgd3JvbmcgdmFsdWUgZm9yIG1hcmdpbi1yaWdodFxuXHRcdFx0XHQvLyBUaGlzIHN1cHBvcnQgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBvbmNlIHNvIG5vIG1lbW9pemluZyBpcyBuZWVkZWQuXG5cdFx0XHRcdHZhciByZXQsXG5cdFx0XHRcdFx0bWFyZ2luRGl2ID0gZGl2LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKTtcblxuXHRcdFx0XHQvLyBSZXNldCBDU1M6IGJveC1zaXppbmc7IGRpc3BsYXk7IG1hcmdpbjsgYm9yZGVyOyBwYWRkaW5nXG5cdFx0XHRcdG1hcmdpbkRpdi5zdHlsZS5jc3NUZXh0ID0gZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjksIEFuZHJvaWQgMi4zXG5cdFx0XHRcdFx0Ly8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nXG5cdFx0XHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wiICtcblx0XHRcdFx0XHRcImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIjtcblx0XHRcdFx0bWFyZ2luRGl2LnN0eWxlLm1hcmdpblJpZ2h0ID0gbWFyZ2luRGl2LnN0eWxlLndpZHRoID0gXCIwXCI7XG5cdFx0XHRcdGRpdi5zdHlsZS53aWR0aCA9IFwiMXB4XCI7XG5cdFx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApO1xuXG5cdFx0XHRcdHJldCA9ICFwYXJzZUZsb2F0KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggbWFyZ2luRGl2LCBudWxsICkubWFyZ2luUmlnaHQgKTtcblxuXHRcdFx0XHRkb2NFbGVtLnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblx0XHRcdFx0ZGl2LnJlbW92ZUNoaWxkKCBtYXJnaW5EaXYgKTtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KSgpO1xuXG5cbi8vIEEgbWV0aG9kIGZvciBxdWlja2x5IHN3YXBwaW5nIGluL291dCBDU1MgcHJvcGVydGllcyB0byBnZXQgY29ycmVjdCBjYWxjdWxhdGlvbnMuXG5qUXVlcnkuc3dhcCA9IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncyApIHtcblx0dmFyIHJldCwgbmFtZSxcblx0XHRvbGQgPSB7fTtcblxuXHQvLyBSZW1lbWJlciB0aGUgb2xkIHZhbHVlcywgYW5kIGluc2VydCB0aGUgbmV3IG9uZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdG9sZFsgbmFtZSBdID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTtcblx0fVxuXG5cdHJldCA9IGNhbGxiYWNrLmFwcGx5KCBlbGVtLCBhcmdzIHx8IFtdICk7XG5cblx0Ly8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTtcblx0fVxuXG5cdHJldHVybiByZXQ7XG59O1xuXG5cbnZhclxuXHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHQvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXlcblx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXHRybnVtc3BsaXQgPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKC4qKSRcIiwgXCJpXCIgKSxcblx0cnJlbE51bSA9IG5ldyBSZWdFeHAoIFwiXihbKy1dKT0oXCIgKyBwbnVtICsgXCIpXCIsIFwiaVwiICksXG5cblx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRsZXR0ZXJTcGFjaW5nOiBcIjBcIixcblx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdH0sXG5cblx0Y3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiT1wiLCBcIk1velwiLCBcIm1zXCIgXTtcblxuLy8gUmV0dXJuIGEgY3NzIHByb3BlcnR5IG1hcHBlZCB0byBhIHBvdGVudGlhbGx5IHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuZnVuY3Rpb24gdmVuZG9yUHJvcE5hbWUoIHN0eWxlLCBuYW1lICkge1xuXG5cdC8vIFNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkXG5cdGlmICggbmFtZSBpbiBzdHlsZSApIHtcblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXG5cdC8vIENoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXNcblx0dmFyIGNhcE5hbWUgPSBuYW1lWzBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpLFxuXHRcdG9yaWdOYW1lID0gbmFtZSxcblx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRpZiAoIG5hbWUgaW4gc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm4gbmFtZTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gb3JpZ05hbWU7XG59XG5cbmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cdHZhciBtYXRjaGVzID0gcm51bXNwbGl0LmV4ZWMoIHZhbHVlICk7XG5cdHJldHVybiBtYXRjaGVzID9cblx0XHQvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCBcInN1YnRyYWN0XCIsIGUuZy4sIHdoZW4gdXNlZCBhcyBpbiBjc3NIb29rc1xuXHRcdE1hdGgubWF4KCAwLCBtYXRjaGVzWyAxIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAyIF0gfHwgXCJweFwiICkgOlxuXHRcdHZhbHVlO1xufVxuXG5mdW5jdGlvbiBhdWdtZW50V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEsIGlzQm9yZGVyQm94LCBzdHlsZXMgKSB7XG5cdHZhciBpID0gZXh0cmEgPT09ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSA/XG5cdFx0Ly8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSByaWdodCBtZWFzdXJlbWVudCwgYXZvaWQgYXVnbWVudGF0aW9uXG5cdFx0NCA6XG5cdFx0Ly8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllc1xuXHRcdG5hbWUgPT09IFwid2lkdGhcIiA/IDEgOiAwLFxuXG5cdFx0dmFsID0gMDtcblxuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG5cdFx0Ly8gQm90aCBib3ggbW9kZWxzIGV4Y2x1ZGUgbWFyZ2luLCBzbyBhZGQgaXQgaWYgd2Ugd2FudCBpdFxuXHRcdGlmICggZXh0cmEgPT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHR2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgZXh0cmEgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0JvcmRlckJveCApIHtcblx0XHRcdC8vIGJvcmRlci1ib3ggaW5jbHVkZXMgcGFkZGluZywgc28gcmVtb3ZlIGl0IGlmIHdlIHdhbnQgY29udGVudFxuXHRcdFx0aWYgKCBleHRyYSA9PT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXJcblx0XHRcdGlmICggZXh0cmEgIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50LCBzbyBhZGQgcGFkZGluZ1xuXHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50IG5vciBwYWRkaW5nLCBzbyBhZGQgYm9yZGVyXG5cdFx0XHRpZiAoIGV4dHJhICE9PSBcInBhZGRpbmdcIiApIHtcblx0XHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHZhbDtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKSB7XG5cblx0Ly8gU3RhcnQgd2l0aCBvZmZzZXQgcHJvcGVydHksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGJvcmRlci1ib3ggdmFsdWVcblx0dmFyIHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlLFxuXHRcdHZhbCA9IG5hbWUgPT09IFwid2lkdGhcIiA/IGVsZW0ub2Zmc2V0V2lkdGggOiBlbGVtLm9mZnNldEhlaWdodCxcblx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHRpc0JvcmRlckJveCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cblx0Ly8gU29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkXG5cdC8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NVxuXHQvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2Njhcblx0aWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHQvLyBGYWxsIGJhY2sgdG8gY29tcHV0ZWQgdGhlbiB1bmNvbXB1dGVkIGNzcyBpZiBuZWNlc3Nhcnlcblx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdGlmICggdmFsIDwgMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdHZhbCA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBDb21wdXRlZCB1bml0IGlzIG5vdCBwaXhlbHMuIFN0b3AgaGVyZSBhbmQgcmV0dXJuLlxuXHRcdGlmICggcm51bW5vbnB4LnRlc3QodmFsKSApIHtcblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXNcblx0XHQvLyBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzaWxlbnRseSBmYWxscyBiYWNrIHRvIHRoZSByZWxpYWJsZSBlbGVtLnN0eWxlXG5cdFx0dmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmXG5cdFx0XHQoIHN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSB8fCB2YWwgPT09IGVsZW0uc3R5bGVbIG5hbWUgXSApO1xuXG5cdFx0Ly8gTm9ybWFsaXplIFwiXCIsIGF1dG8sIGFuZCBwcmVwYXJlIGZvciBleHRyYVxuXHRcdHZhbCA9IHBhcnNlRmxvYXQoIHZhbCApIHx8IDA7XG5cdH1cblxuXHQvLyBVc2UgdGhlIGFjdGl2ZSBib3gtc2l6aW5nIG1vZGVsIHRvIGFkZC9zdWJ0cmFjdCBpcnJlbGV2YW50IHN0eWxlc1xuXHRyZXR1cm4gKCB2YWwgK1xuXHRcdGF1Z21lbnRXaWR0aE9ySGVpZ2h0KFxuXHRcdFx0ZWxlbSxcblx0XHRcdG5hbWUsXG5cdFx0XHRleHRyYSB8fCAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICksXG5cdFx0XHR2YWx1ZUlzQm9yZGVyQm94LFxuXHRcdFx0c3R5bGVzXG5cdFx0KVxuXHQpICsgXCJweFwiO1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7XG5cdHZhciBkaXNwbGF5LCBlbGVtLCBoaWRkZW4sXG5cdFx0dmFsdWVzID0gW10sXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcblx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0dmFsdWVzWyBpbmRleCBdID0gZGF0YV9wcml2LmdldCggZWxlbSwgXCJvbGRkaXNwbGF5XCIgKTtcblx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdGlmICggc2hvdyApIHtcblx0XHRcdC8vIFJlc2V0IHRoZSBpbmxpbmUgZGlzcGxheSBvZiB0aGlzIGVsZW1lbnQgdG8gbGVhcm4gaWYgaXQgaXNcblx0XHRcdC8vIGJlaW5nIGhpZGRlbiBieSBjYXNjYWRlZCBydWxlcyBvciBub3Rcblx0XHRcdGlmICggIXZhbHVlc1sgaW5kZXggXSAmJiBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGVsZW1lbnRzIHdoaWNoIGhhdmUgYmVlbiBvdmVycmlkZGVuIHdpdGggZGlzcGxheTogbm9uZVxuXHRcdFx0Ly8gaW4gYSBzdHlsZXNoZWV0IHRvIHdoYXRldmVyIHRoZSBkZWZhdWx0IGJyb3dzZXIgc3R5bGUgaXNcblx0XHRcdC8vIGZvciBzdWNoIGFuIGVsZW1lbnRcblx0XHRcdGlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmIGlzSGlkZGVuKCBlbGVtICkgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBkZWZhdWx0RGlzcGxheShlbGVtLm5vZGVOYW1lKSApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRoaWRkZW4gPSBpc0hpZGRlbiggZWxlbSApO1xuXG5cdFx0XHRpZiAoIGRpc3BsYXkgIT09IFwibm9uZVwiIHx8ICFoaWRkZW4gKSB7XG5cdFx0XHRcdGRhdGFfcHJpdi5zZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBoaWRkZW4gPyBkaXNwbGF5IDogalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFNldCB0aGUgZGlzcGxheSBvZiBtb3N0IG9mIHRoZSBlbGVtZW50cyBpbiBhIHNlY29uZCBsb29wXG5cdC8vIHRvIGF2b2lkIHRoZSBjb25zdGFudCByZWZsb3dcblx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0aWYgKCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoICFzaG93IHx8IGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IHZhbHVlc1sgaW5kZXggXSB8fCBcIlwiIDogXCJub25lXCI7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRzO1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHQvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcblx0Ly8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG5cdGNzc0hvb2tzOiB7XG5cdFx0b3BhY2l0eToge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eVxuXHRcdFx0XHRcdHZhciByZXQgPSBjdXJDU1MoIGVsZW0sIFwib3BhY2l0eVwiICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiMVwiIDogcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkIFwicHhcIiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzXG5cdGNzc051bWJlcjoge1xuXHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJmbGV4R3Jvd1wiOiB0cnVlLFxuXHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFwibGluZUhlaWdodFwiOiB0cnVlLFxuXHRcdFwib3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwib3JkZXJcIjogdHJ1ZSxcblx0XHRcIm9ycGhhbnNcIjogdHJ1ZSxcblx0XHRcIndpZG93c1wiOiB0cnVlLFxuXHRcdFwiekluZGV4XCI6IHRydWUsXG5cdFx0XCJ6b29tXCI6IHRydWVcblx0fSxcblxuXHQvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlXG5cdC8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWVcblx0Y3NzUHJvcHM6IHtcblx0XHRcImZsb2F0XCI6IFwiY3NzRmxvYXRcIlxuXHR9LFxuXG5cdC8vIEdldCBhbmQgc2V0IHRoZSBzdHlsZSBwcm9wZXJ0eSBvbiBhIERPTSBOb2RlXG5cdHN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkge1xuXG5cdFx0Ly8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0dmFyIHJldCwgdHlwZSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRcdG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwgKCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuXHRcdC8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG5cdFx0XHQvLyBDb252ZXJ0IFwiKz1cIiBvciBcIi09XCIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgJiYgKHJldCA9IHJyZWxOdW0uZXhlYyggdmFsdWUgKSkgKSB7XG5cdFx0XHRcdHZhbHVlID0gKCByZXRbMV0gKyAxICkgKiByZXRbMl0gKyBwYXJzZUZsb2F0KCBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICkgKTtcblx0XHRcdFx0Ly8gRml4ZXMgYnVnICM5MjM3XG5cdFx0XHRcdHR5cGUgPSBcIm51bWJlclwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCBudWxsIGFuZCBOYU4gdmFsdWVzIGFyZW4ndCBzZXQgKCM3MTE2KVxuXHRcdFx0aWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIG51bWJlciwgYWRkICdweCcgdG8gdGhlIChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwibnVtYmVyXCIgJiYgIWpRdWVyeS5jc3NOdW1iZXJbIG9yaWdOYW1lIF0gKSB7XG5cdFx0XHRcdHZhbHVlICs9IFwicHhcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHRcdFx0Ly8gYmFja2dyb3VuZC0qIHByb3BzIGFmZmVjdCBvcmlnaW5hbCBjbG9uZSdzIHZhbHVlc1xuXHRcdFx0aWYgKCAhc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgJiYgdmFsdWUgPT09IFwiXCIgJiYgbmFtZS5pbmRleE9mKCBcImJhY2tncm91bmRcIiApID09PSAwICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gXCJpbmhlcml0XCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZVxuXHRcdFx0aWYgKCAhaG9va3MgfHwgIShcInNldFwiIGluIGhvb2tzKSB8fCAodmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgZmFsc2UsIGV4dHJhICkpICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE90aGVyd2lzZSBqdXN0IGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgc3R5bGUgb2JqZWN0XG5cdFx0XHRyZXR1cm4gc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0Y3NzOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZXh0cmEsIHN0eWxlcyApIHtcblx0XHR2YXIgdmFsLCBudW0sIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWVcblx0XHRuYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8ICggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIGVsZW0uc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuXHRcdC8vIFRyeSBwcmVmaXhlZCBuYW1lIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIG5hbWVcblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSwgaWYgYSB3YXkgdG8gZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBleGlzdHMsIHVzZSB0aGF0XG5cdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBcIm5vcm1hbFwiIHRvIGNvbXB1dGVkIHZhbHVlXG5cdFx0aWYgKCB2YWwgPT09IFwibm9ybWFsXCIgJiYgbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0gKSB7XG5cdFx0XHR2YWwgPSBjc3NOb3JtYWxUcmFuc2Zvcm1bIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIG51bWVyaWMgaWYgZm9yY2VkIG9yIGEgcXVhbGlmaWVyIHdhcyBwcm92aWRlZCBhbmQgdmFsIGxvb2tzIG51bWVyaWNcblx0XHRpZiAoIGV4dHJhID09PSBcIlwiIHx8IGV4dHJhICkge1xuXHRcdFx0bnVtID0gcGFyc2VGbG9hdCggdmFsICk7XG5cdFx0XHRyZXR1cm4gZXh0cmEgPT09IHRydWUgfHwgalF1ZXJ5LmlzTnVtZXJpYyggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0XHRcdC8vIENlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbVxuXHRcdFx0XHQvLyBidXQgaXQgbXVzdCBoYXZlIGEgY3VycmVudCBkaXNwbGF5IHN0eWxlIHRoYXQgd291bGQgYmVuZWZpdFxuXHRcdFx0XHRyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKSAmJiBlbGVtLm9mZnNldFdpZHRoID09PSAwID9cblx0XHRcdFx0XHRqUXVlcnkuc3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0Z2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIGV4dHJhICkge1xuXHRcdFx0dmFyIHN0eWxlcyA9IGV4dHJhICYmIGdldFN0eWxlcyggZWxlbSApO1xuXHRcdFx0cmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgZXh0cmEgP1xuXHRcdFx0XHRhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdG5hbWUsXG5cdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0XHRzdHlsZXNcblx0XHRcdFx0KSA6IDBcblx0XHRcdCk7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5qUXVlcnkuY3NzSG9va3MubWFyZ2luUmlnaHQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodCxcblx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnN3YXAoIGVsZW0sIHsgXCJkaXNwbGF5XCI6IFwiaW5saW5lLWJsb2NrXCIgfSxcblx0XHRcdFx0Y3VyQ1NTLCBbIGVsZW0sIFwibWFyZ2luUmlnaHRcIiBdICk7XG5cdFx0fVxuXHR9XG4pO1xuXG4vLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzXG5qUXVlcnkuZWFjaCh7XG5cdG1hcmdpbjogXCJcIixcblx0cGFkZGluZzogXCJcIixcblx0Ym9yZGVyOiBcIldpZHRoXCJcbn0sIGZ1bmN0aW9uKCBwcmVmaXgsIHN1ZmZpeCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHtcblx0XHRleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBpID0gMCxcblx0XHRcdFx0ZXhwYW5kZWQgPSB7fSxcblxuXHRcdFx0XHQvLyBBc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmdcblx0XHRcdFx0cGFydHMgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS5zcGxpdChcIiBcIikgOiBbIHZhbHVlIF07XG5cblx0XHRcdGZvciAoIDsgaSA8IDQ7IGkrKyApIHtcblx0XHRcdFx0ZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPVxuXHRcdFx0XHRcdHBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV4cGFuZGVkO1xuXHRcdH1cblx0fTtcblxuXHRpZiAoICFybWFyZ2luLnRlc3QoIHByZWZpeCApICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHN0eWxlcywgbGVuLFxuXHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7XG5cdFx0XHRcdGxlbiA9IG5hbWUubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdG1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBtYXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApO1xuXHRcdH0sIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXHRzaG93OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTtcblx0fSxcblx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzICk7XG5cdH0sXG5cdHRvZ2dsZTogZnVuY3Rpb24oIHN0YXRlICkge1xuXHRcdGlmICggdHlwZW9mIHN0YXRlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGlmICggaXNIaWRkZW4oIHRoaXMgKSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KTtcblxuXG5mdW5jdGlvbiBUd2VlbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKSB7XG5cdHJldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICk7XG59XG5qUXVlcnkuVHdlZW4gPSBUd2VlbjtcblxuVHdlZW4ucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogVHdlZW4sXG5cdGluaXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZywgdW5pdCApIHtcblx0XHR0aGlzLmVsZW0gPSBlbGVtO1xuXHRcdHRoaXMucHJvcCA9IHByb3A7XG5cdFx0dGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgXCJzd2luZ1wiO1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKTtcblx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHR0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApO1xuXHR9LFxuXHRjdXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRyZXR1cm4gaG9va3MgJiYgaG9va3MuZ2V0ID9cblx0XHRcdGhvb2tzLmdldCggdGhpcyApIDpcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQoIHRoaXMgKTtcblx0fSxcblx0cnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHR2YXIgZWFzZWQsXG5cdFx0XHRob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKFxuXHRcdFx0XHRwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb25cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50O1xuXHRcdH1cblx0XHR0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5zdGVwICkge1xuXHRcdFx0dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgaG9va3Muc2V0ICkge1xuXHRcdFx0aG9va3Muc2V0KCB0aGlzICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQoIHRoaXMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cblR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTtcblxuVHdlZW4ucHJvcEhvb2tzID0ge1xuXHRfZGVmYXVsdDoge1xuXHRcdGdldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0dmFyIHJlc3VsdDtcblxuXHRcdFx0aWYgKCB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gIT0gbnVsbCAmJlxuXHRcdFx0XHQoIXR3ZWVuLmVsZW0uc3R5bGUgfHwgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwpICkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHlcblx0XHRcdC8vIGF0dGVtcHQgYSBwYXJzZUZsb2F0IGFuZCBmYWxsYmFjayB0byBhIHN0cmluZyBpZiB0aGUgcGFyc2UgZmFpbHMuXG5cdFx0XHQvLyBTaW1wbGUgdmFsdWVzIHN1Y2ggYXMgXCIxMHB4XCIgYXJlIHBhcnNlZCB0byBGbG9hdDtcblx0XHRcdC8vIGNvbXBsZXggdmFsdWVzIHN1Y2ggYXMgXCJyb3RhdGUoMXJhZClcIiBhcmUgcmV0dXJuZWQgYXMtaXMuXG5cdFx0XHRyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCBcIlwiICk7XG5cdFx0XHQvLyBFbXB0eSBzdHJpbmdzLCBudWxsLCB1bmRlZmluZWQgYW5kIFwiYXV0b1wiIGFyZSBjb252ZXJ0ZWQgdG8gMC5cblx0XHRcdHJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gXCJhdXRvXCIgPyAwIDogcmVzdWx0O1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0XHQvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC5cblx0XHRcdC8vIFVzZSBjc3NIb29rIGlmIGl0cyB0aGVyZS5cblx0XHRcdC8vIFVzZSAuc3R5bGUgaWYgYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUuXG5cdFx0XHRpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7XG5cdFx0XHR9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLnN0eWxlICYmICggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8IGpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLy8gU3VwcG9ydDogSUU5XG4vLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHtcblx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5lYXNpbmcgPSB7XG5cdGxpbmVhcjogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHA7XG5cdH0sXG5cdHN3aW5nOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyO1xuXHR9XG59O1xuXG5qUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcblxuLy8gQmFjayBDb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnRcbmpRdWVyeS5meC5zdGVwID0ge307XG5cblxuXG5cbnZhclxuXHRmeE5vdywgdGltZXJJZCxcblx0cmZ4dHlwZXMgPSAvXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sXG5cdHJmeG51bSA9IG5ldyBSZWdFeHAoIFwiXig/OihbKy1dKT18KShcIiArIHBudW0gKyBcIikoW2EteiVdKikkXCIsIFwiaVwiICksXG5cdHJydW4gPSAvcXVldWVIb29rcyQvLFxuXHRhbmltYXRpb25QcmVmaWx0ZXJzID0gWyBkZWZhdWx0UHJlZmlsdGVyIF0sXG5cdHR3ZWVuZXJzID0ge1xuXHRcdFwiKlwiOiBbIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcblx0XHRcdHZhciB0d2VlbiA9IHRoaXMuY3JlYXRlVHdlZW4oIHByb3AsIHZhbHVlICksXG5cdFx0XHRcdHRhcmdldCA9IHR3ZWVuLmN1cigpLFxuXHRcdFx0XHRwYXJ0cyA9IHJmeG51bS5leGVjKCB2YWx1ZSApLFxuXHRcdFx0XHR1bml0ID0gcGFydHMgJiYgcGFydHNbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKSxcblxuXHRcdFx0XHQvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlc1xuXHRcdFx0XHRzdGFydCA9ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdIHx8IHVuaXQgIT09IFwicHhcIiAmJiArdGFyZ2V0ICkgJiZcblx0XHRcdFx0XHRyZnhudW0uZXhlYyggalF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgcHJvcCApICksXG5cdFx0XHRcdHNjYWxlID0gMSxcblx0XHRcdFx0bWF4SXRlcmF0aW9ucyA9IDIwO1xuXG5cdFx0XHRpZiAoIHN0YXJ0ICYmIHN0YXJ0WyAzIF0gIT09IHVuaXQgKSB7XG5cdFx0XHRcdC8vIFRydXN0IHVuaXRzIHJlcG9ydGVkIGJ5IGpRdWVyeS5jc3Ncblx0XHRcdFx0dW5pdCA9IHVuaXQgfHwgc3RhcnRbIDMgXTtcblxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uXG5cdFx0XHRcdHBhcnRzID0gcGFydHMgfHwgW107XG5cblx0XHRcdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRcdFx0c3RhcnQgPSArdGFyZ2V0IHx8IDE7XG5cblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdC8vIElmIHByZXZpb3VzIGl0ZXJhdGlvbiB6ZXJvZWQgb3V0LCBkb3VibGUgdW50aWwgd2UgZ2V0ICpzb21ldGhpbmcqLlxuXHRcdFx0XHRcdC8vIFVzZSBzdHJpbmcgZm9yIGRvdWJsaW5nIHNvIHdlIGRvbid0IGFjY2lkZW50YWxseSBzZWUgc2NhbGUgYXMgdW5jaGFuZ2VkIGJlbG93XG5cdFx0XHRcdFx0c2NhbGUgPSBzY2FsZSB8fCBcIi41XCI7XG5cblx0XHRcdFx0XHQvLyBBZGp1c3QgYW5kIGFwcGx5XG5cdFx0XHRcdFx0c3RhcnQgPSBzdGFydCAvIHNjYWxlO1xuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgcHJvcCwgc3RhcnQgKyB1bml0ICk7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHNjYWxlLCB0b2xlcmF0aW5nIHplcm8gb3IgTmFOIGZyb20gdHdlZW4uY3VyKCksXG5cdFx0XHRcdC8vIGJyZWFrIHRoZSBsb29wIGlmIHNjYWxlIGlzIHVuY2hhbmdlZCBvciBwZXJmZWN0LCBvciBpZiB3ZSd2ZSBqdXN0IGhhZCBlbm91Z2hcblx0XHRcdFx0fSB3aGlsZSAoIHNjYWxlICE9PSAoc2NhbGUgPSB0d2Vlbi5jdXIoKSAvIHRhcmdldCkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVwZGF0ZSB0d2VlbiBwcm9wZXJ0aWVzXG5cdFx0XHRpZiAoIHBhcnRzICkge1xuXHRcdFx0XHRzdGFydCA9IHR3ZWVuLnN0YXJ0ID0gK3N0YXJ0IHx8ICt0YXJnZXQgfHwgMDtcblx0XHRcdFx0dHdlZW4udW5pdCA9IHVuaXQ7XG5cdFx0XHRcdC8vIElmIGEgKz0vLT0gdG9rZW4gd2FzIHByb3ZpZGVkLCB3ZSdyZSBkb2luZyBhIHJlbGF0aXZlIGFuaW1hdGlvblxuXHRcdFx0XHR0d2Vlbi5lbmQgPSBwYXJ0c1sgMSBdID9cblx0XHRcdFx0XHRzdGFydCArICggcGFydHNbIDEgXSArIDEgKSAqIHBhcnRzWyAyIF0gOlxuXHRcdFx0XHRcdCtwYXJ0c1sgMiBdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fSBdXG5cdH07XG5cbi8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHlcbmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdGZ4Tm93ID0gdW5kZWZpbmVkO1xuXHR9KTtcblx0cmV0dXJuICggZnhOb3cgPSBqUXVlcnkubm93KCkgKTtcbn1cblxuLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cbmZ1bmN0aW9uIGdlbkZ4KCB0eXBlLCBpbmNsdWRlV2lkdGggKSB7XG5cdHZhciB3aGljaCxcblx0XHRpID0gMCxcblx0XHRhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH07XG5cblx0Ly8gSWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLFxuXHQvLyBvdGhlcndpc2Ugc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodFxuXHRpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcblx0Zm9yICggOyBpIDwgNCA7IGkgKz0gMiAtIGluY2x1ZGVXaWR0aCApIHtcblx0XHR3aGljaCA9IGNzc0V4cGFuZFsgaSBdO1xuXHRcdGF0dHJzWyBcIm1hcmdpblwiICsgd2hpY2ggXSA9IGF0dHJzWyBcInBhZGRpbmdcIiArIHdoaWNoIF0gPSB0eXBlO1xuXHR9XG5cblx0aWYgKCBpbmNsdWRlV2lkdGggKSB7XG5cdFx0YXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTtcblx0fVxuXG5cdHJldHVybiBhdHRycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7XG5cdHZhciB0d2Vlbixcblx0XHRjb2xsZWN0aW9uID0gKCB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCB0d2VlbmVyc1sgXCIqXCIgXSApLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoICh0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApKSApIHtcblxuXHRcdFx0Ly8gV2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHlcblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlciggZWxlbSwgcHJvcHMsIG9wdHMgKSB7XG5cdC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cblx0dmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIHR3ZWVuLCBob29rcywgb2xkZmlyZSwgZGlzcGxheSwgY2hlY2tEaXNwbGF5LFxuXHRcdGFuaW0gPSB0aGlzLFxuXHRcdG9yaWcgPSB7fSxcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGUsXG5cdFx0aGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbiggZWxlbSApLFxuXHRcdGRhdGFTaG93ID0gZGF0YV9wcml2LmdldCggZWxlbSwgXCJmeHNob3dcIiApO1xuXG5cdC8vIEhhbmRsZSBxdWV1ZTogZmFsc2UgcHJvbWlzZXNcblx0aWYgKCAhb3B0cy5xdWV1ZSApIHtcblx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgXCJmeFwiICk7XG5cdFx0aWYgKCBob29rcy51bnF1ZXVlZCA9PSBudWxsICkge1xuXHRcdFx0aG9va3MudW5xdWV1ZWQgPSAwO1xuXHRcdFx0b2xkZmlyZSA9IGhvb2tzLmVtcHR5LmZpcmU7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggIWhvb2tzLnVucXVldWVkICkge1xuXHRcdFx0XHRcdG9sZGZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0aG9va3MudW5xdWV1ZWQrKztcblxuXHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gRW5zdXJlIHRoZSBjb21wbGV0ZSBoYW5kbGVyIGlzIGNhbGxlZCBiZWZvcmUgdGhpcyBjb21wbGV0ZXNcblx0XHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRob29rcy51bnF1ZXVlZC0tO1xuXHRcdFx0XHRpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sIFwiZnhcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gSGVpZ2h0L3dpZHRoIG92ZXJmbG93IHBhc3Ncblx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCJoZWlnaHRcIiBpbiBwcm9wcyB8fCBcIndpZHRoXCIgaW4gcHJvcHMgKSApIHtcblx0XHQvLyBNYWtlIHN1cmUgdGhhdCBub3RoaW5nIHNuZWFrcyBvdXRcblx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFOS0xMCBkbyBub3Rcblx0XHQvLyBjaGFuZ2UgdGhlIG92ZXJmbG93IGF0dHJpYnV0ZSB3aGVuIG92ZXJmbG93WCBhbmRcblx0XHQvLyBvdmVyZmxvd1kgYXJlIHNldCB0byB0aGUgc2FtZSB2YWx1ZVxuXHRcdG9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdO1xuXG5cdFx0Ly8gU2V0IGRpc3BsYXkgcHJvcGVydHkgdG8gaW5saW5lLWJsb2NrIGZvciBoZWlnaHQvd2lkdGhcblx0XHQvLyBhbmltYXRpb25zIG9uIGlubGluZSBlbGVtZW50cyB0aGF0IGFyZSBoYXZpbmcgd2lkdGgvaGVpZ2h0IGFuaW1hdGVkXG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cblx0XHQvLyBUZXN0IGRlZmF1bHQgZGlzcGxheSBpZiBkaXNwbGF5IGlzIGN1cnJlbnRseSBcIm5vbmVcIlxuXHRcdGNoZWNrRGlzcGxheSA9IGRpc3BsYXkgPT09IFwibm9uZVwiID9cblx0XHRcdGRhdGFfcHJpdi5nZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiICkgfHwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXk7XG5cblx0XHRpZiAoIGNoZWNrRGlzcGxheSA9PT0gXCJpbmxpbmVcIiAmJiBqUXVlcnkuY3NzKCBlbGVtLCBcImZsb2F0XCIgKSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRzdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHR9XG5cdH1cblxuXHRpZiAoIG9wdHMub3ZlcmZsb3cgKSB7XG5cdFx0c3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBzaG93L2hpZGUgcGFzc1xuXHRmb3IgKCBwcm9wIGluIHByb3BzICkge1xuXHRcdHZhbHVlID0gcHJvcHNbIHByb3AgXTtcblx0XHRpZiAoIHJmeHR5cGVzLmV4ZWMoIHZhbHVlICkgKSB7XG5cdFx0XHRkZWxldGUgcHJvcHNbIHByb3AgXTtcblx0XHRcdHRvZ2dsZSA9IHRvZ2dsZSB8fCB2YWx1ZSA9PT0gXCJ0b2dnbGVcIjtcblx0XHRcdGlmICggdmFsdWUgPT09ICggaGlkZGVuID8gXCJoaWRlXCIgOiBcInNob3dcIiApICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZXJlIGlzIGRhdGFTaG93IGxlZnQgb3ZlciBmcm9tIGEgc3RvcHBlZCBoaWRlIG9yIHNob3cgYW5kIHdlIGFyZSBnb2luZyB0byBwcm9jZWVkIHdpdGggc2hvdywgd2Ugc2hvdWxkIHByZXRlbmQgdG8gYmUgaGlkZGVuXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApO1xuXG5cdFx0Ly8gQW55IG5vbi1meCB2YWx1ZSBzdG9wcyB1cyBmcm9tIHJlc3RvcmluZyB0aGUgb3JpZ2luYWwgZGlzcGxheSB2YWx1ZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5ID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7XG5cdFx0aWYgKCBkYXRhU2hvdyApIHtcblx0XHRcdGlmICggXCJoaWRkZW5cIiBpbiBkYXRhU2hvdyApIHtcblx0XHRcdFx0aGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhU2hvdyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIFwiZnhzaG93XCIsIHt9ICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcmUgc3RhdGUgaWYgaXRzIHRvZ2dsZSAtIGVuYWJsZXMgLnN0b3AoKS50b2dnbGUoKSB0byBcInJldmVyc2VcIlxuXHRcdGlmICggdG9nZ2xlICkge1xuXHRcdFx0ZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjtcblx0XHR9XG5cdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRqUXVlcnkoIGVsZW0gKS5zaG93KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW0uZG9uZShmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5KCBlbGVtICkuaGlkZSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGFuaW0uZG9uZShmdW5jdGlvbigpIHtcblx0XHRcdHZhciBwcm9wO1xuXG5cdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cdFx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0dHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTtcblxuXHRcdFx0aWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7XG5cdFx0XHRcdGRhdGFTaG93WyBwcm9wIF0gPSB0d2Vlbi5zdGFydDtcblx0XHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdFx0dHdlZW4uZW5kID0gdHdlZW4uc3RhcnQ7XG5cdFx0XHRcdFx0dHdlZW4uc3RhcnQgPSBwcm9wID09PSBcIndpZHRoXCIgfHwgcHJvcCA9PT0gXCJoZWlnaHRcIiA/IDEgOiAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdC8vIElmIHRoaXMgaXMgYSBub29wIGxpa2UgLmhpZGUoKS5oaWRlKCksIHJlc3RvcmUgYW4gb3ZlcndyaXR0ZW4gZGlzcGxheSB2YWx1ZVxuXHR9IGVsc2UgaWYgKCAoZGlzcGxheSA9PT0gXCJub25lXCIgPyBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApIDogZGlzcGxheSkgPT09IFwiaW5saW5lXCIgKSB7XG5cdFx0c3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvcEZpbHRlciggcHJvcHMsIHNwZWNpYWxFYXNpbmcgKSB7XG5cdHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cblx0Ly8gY2FtZWxDYXNlLCBzcGVjaWFsRWFzaW5nIGFuZCBleHBhbmQgY3NzSG9vayBwYXNzXG5cdGZvciAoIGluZGV4IGluIHByb3BzICkge1xuXHRcdG5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBpbmRleCApO1xuXHRcdGVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTtcblx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdO1xuXHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRlYXNpbmcgPSB2YWx1ZVsgMSBdO1xuXHRcdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyAwIF07XG5cdFx0fVxuXG5cdFx0aWYgKCBpbmRleCAhPT0gbmFtZSApIHtcblx0XHRcdHByb3BzWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgaW5kZXggXTtcblx0XHR9XG5cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdO1xuXHRcdGlmICggaG9va3MgJiYgXCJleHBhbmRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBuYW1lIF07XG5cblx0XHRcdC8vIE5vdCBxdWl0ZSAkLmV4dGVuZCwgdGhpcyB3b24ndCBvdmVyd3JpdGUgZXhpc3Rpbmcga2V5cy5cblx0XHRcdC8vIFJldXNpbmcgJ2luZGV4JyBiZWNhdXNlIHdlIGhhdmUgdGhlIGNvcnJlY3QgXCJuYW1lXCJcblx0XHRcdGZvciAoIGluZGV4IGluIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICEoIGluZGV4IGluIHByb3BzICkgKSB7XG5cdFx0XHRcdFx0cHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTtcblx0XHRcdFx0XHRzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwZWNpYWxFYXNpbmdbIG5hbWUgXSA9IGVhc2luZztcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkge1xuXHR2YXIgcmVzdWx0LFxuXHRcdHN0b3BwZWQsXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGFuaW1hdGlvblByZWZpbHRlcnMubGVuZ3RoLFxuXHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCkuYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdC8vIERvbid0IG1hdGNoIGVsZW0gaW4gdGhlIDphbmltYXRlZCBzZWxlY3RvclxuXHRcdFx0ZGVsZXRlIHRpY2suZWxlbTtcblx0XHR9KSxcblx0XHR0aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRcdHJlbWFpbmluZyA9IE1hdGgubWF4KCAwLCBhbmltYXRpb24uc3RhcnRUaW1lICsgYW5pbWF0aW9uLmR1cmF0aW9uIC0gY3VycmVudFRpbWUgKSxcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCAyLjNcblx0XHRcdFx0Ly8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KVxuXHRcdFx0XHR0ZW1wID0gcmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9uIHx8IDAsXG5cdFx0XHRcdHBlcmNlbnQgPSAxIC0gdGVtcCxcblx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRsZW5ndGggPSBhbmltYXRpb24udHdlZW5zLmxlbmd0aDtcblxuXHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCBwZXJjZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBwZXJjZW50LCByZW1haW5pbmcgXSk7XG5cblx0XHRcdGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uIF0gKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSh7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0cHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksXG5cdFx0XHRvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7IHNwZWNpYWxFYXNpbmc6IHt9IH0sIG9wdGlvbnMgKSxcblx0XHRcdG9yaWdpbmFsUHJvcGVydGllczogcHJvcGVydGllcyxcblx0XHRcdG9yaWdpbmFsT3B0aW9uczogb3B0aW9ucyxcblx0XHRcdHN0YXJ0VGltZTogZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuXHRcdFx0dHdlZW5zOiBbXSxcblx0XHRcdGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiggcHJvcCwgZW5kICkge1xuXHRcdFx0XHR2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsXG5cdFx0XHRcdFx0XHRhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBnb3RvRW5kICkge1xuXHRcdFx0XHR2YXIgaW5kZXggPSAwLFxuXHRcdFx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydFxuXHRcdFx0XHRcdGxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWU7IG90aGVyd2lzZSwgcmVqZWN0XG5cdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9KSxcblx0XHRwcm9wcyA9IGFuaW1hdGlvbi5wcm9wcztcblxuXHRwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApO1xuXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuXHRcdHJlc3VsdCA9IGFuaW1hdGlvblByZWZpbHRlcnNbIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBlbGVtLCBwcm9wcywgYW5pbWF0aW9uLm9wdHMgKTtcblx0XHRpZiAoIHJlc3VsdCApIHtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXHR9XG5cblx0alF1ZXJ5Lm1hcCggcHJvcHMsIGNyZWF0ZVR3ZWVuLCBhbmltYXRpb24gKTtcblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkge1xuXHRcdGFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApO1xuXHR9XG5cblx0alF1ZXJ5LmZ4LnRpbWVyKFxuXHRcdGpRdWVyeS5leHRlbmQoIHRpY2ssIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRhbmltOiBhbmltYXRpb24sXG5cdFx0XHRxdWV1ZTogYW5pbWF0aW9uLm9wdHMucXVldWVcblx0XHR9KVxuXHQpO1xuXG5cdC8vIGF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zXG5cdHJldHVybiBhbmltYXRpb24ucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzIClcblx0XHQuZG9uZSggYW5pbWF0aW9uLm9wdHMuZG9uZSwgYW5pbWF0aW9uLm9wdHMuY29tcGxldGUgKVxuXHRcdC5mYWlsKCBhbmltYXRpb24ub3B0cy5mYWlsIClcblx0XHQuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTtcbn1cblxualF1ZXJ5LkFuaW1hdGlvbiA9IGpRdWVyeS5leHRlbmQoIEFuaW1hdGlvbiwge1xuXG5cdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcHJvcHMgKSApIHtcblx0XHRcdGNhbGxiYWNrID0gcHJvcHM7XG5cdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvcHMgPSBwcm9wcy5zcGxpdChcIiBcIik7XG5cdFx0fVxuXG5cdFx0dmFyIHByb3AsXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdHByb3AgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRcdHR3ZWVuZXJzWyBwcm9wIF0gPSB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdO1xuXHRcdFx0dHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH1cblx0fSxcblxuXHRwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHtcblx0XHRpZiAoIHByZXBlbmQgKSB7XG5cdFx0XHRhbmltYXRpb25QcmVmaWx0ZXJzLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW1hdGlvblByZWZpbHRlcnMucHVzaCggY2FsbGJhY2sgKTtcblx0XHR9XG5cdH1cbn0pO1xuXG5qUXVlcnkuc3BlZWQgPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgZm4gKSB7XG5cdHZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09IFwib2JqZWN0XCIgPyBqUXVlcnkuZXh0ZW5kKCB7fSwgc3BlZWQgKSA6IHtcblx0XHRjb21wbGV0ZTogZm4gfHwgIWZuICYmIGVhc2luZyB8fFxuXHRcdFx0alF1ZXJ5LmlzRnVuY3Rpb24oIHNwZWVkICkgJiYgc3BlZWQsXG5cdFx0ZHVyYXRpb246IHNwZWVkLFxuXHRcdGVhc2luZzogZm4gJiYgZWFzaW5nIHx8IGVhc2luZyAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24oIGVhc2luZyApICYmIGVhc2luZ1xuXHR9O1xuXG5cdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5vZmYgPyAwIDogdHlwZW9mIG9wdC5kdXJhdGlvbiA9PT0gXCJudW1iZXJcIiA/IG9wdC5kdXJhdGlvbiA6XG5cdFx0b3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgPyBqUXVlcnkuZnguc3BlZWRzWyBvcHQuZHVyYXRpb24gXSA6IGpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7XG5cblx0Ly8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gXCJmeFwiXG5cdGlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkge1xuXHRcdG9wdC5xdWV1ZSA9IFwiZnhcIjtcblx0fVxuXG5cdC8vIFF1ZXVlaW5nXG5cdG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cblx0b3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBvcHQ7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0ZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXG5cdFx0Ly8gU2hvdyBhbnkgaGlkZGVuIGVsZW1lbnRzIGFmdGVyIHNldHRpbmcgb3BhY2l0eSB0byAwXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBpc0hpZGRlbiApLmNzcyggXCJvcGFjaXR5XCIsIDAgKS5zaG93KClcblxuXHRcdFx0Ly8gQW5pbWF0ZSB0byB0aGUgdmFsdWUgc3BlY2lmaWVkXG5cdFx0XHQuZW5kKCkuYW5pbWF0ZSh7IG9wYWNpdHk6IHRvIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH0sXG5cdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHR2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLFxuXHRcdFx0b3B0YWxsID0galF1ZXJ5LnNwZWVkKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApLFxuXHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3Rcblx0XHRcdFx0dmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApO1xuXG5cdFx0XHRcdC8vIEVtcHR5IGFuaW1hdGlvbnMsIG9yIGZpbmlzaGluZyByZXNvbHZlcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRpZiAoIGVtcHR5IHx8IGRhdGFfcHJpdi5nZXQoIHRoaXMsIFwiZmluaXNoXCIgKSApIHtcblx0XHRcdFx0XHRhbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uO1xuXG5cdFx0cmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0dGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDpcblx0XHRcdHRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTtcblx0fSxcblx0c3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG5cdFx0dmFyIHN0b3BRdWV1ZSA9IGZ1bmN0aW9uKCBob29rcyApIHtcblx0XHRcdHZhciBzdG9wID0gaG9va3Muc3RvcDtcblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0c3RvcCggZ290b0VuZCApO1xuXHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0Z290b0VuZCA9IGNsZWFyUXVldWU7XG5cdFx0XHRjbGVhclF1ZXVlID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZGVxdWV1ZSA9IHRydWUsXG5cdFx0XHRcdGluZGV4ID0gdHlwZSAhPSBudWxsICYmIHR5cGUgKyBcInF1ZXVlSG9va3NcIixcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0ZGF0YSA9IGRhdGFfcHJpdi5nZXQoIHRoaXMgKTtcblxuXHRcdFx0aWYgKCBpbmRleCApIHtcblx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCApIHtcblx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaW5kZXggaW4gZGF0YSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICYmIHJydW4udGVzdCggaW5kZXggKSApIHtcblx0XHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmICh0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlKSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7XG5cdFx0XHRcdFx0ZGVxdWV1ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZC5cblx0XHRcdC8vIFRpbWVycyBjdXJyZW50bHkgd2lsbCBjYWxsIHRoZWlyIGNvbXBsZXRlIGNhbGxiYWNrcywgd2hpY2hcblx0XHRcdC8vIHdpbGwgZGVxdWV1ZSBidXQgb25seSBpZiB0aGV5IHdlcmUgZ290b0VuZC5cblx0XHRcdGlmICggZGVxdWV1ZSB8fCAhZ290b0VuZCApIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblx0ZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRpZiAoIHR5cGUgIT09IGZhbHNlICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4LFxuXHRcdFx0XHRkYXRhID0gZGF0YV9wcml2LmdldCggdGhpcyApLFxuXHRcdFx0XHRxdWV1ZSA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlXCIgXSxcblx0XHRcdFx0aG9va3MgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgXSxcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0bGVuZ3RoID0gcXVldWUgPyBxdWV1ZS5sZW5ndGggOiAwO1xuXG5cdFx0XHQvLyBFbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhXG5cdFx0XHRkYXRhLmZpbmlzaCA9IHRydWU7XG5cblx0XHRcdC8vIEVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuXHRcdFx0alF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBbXSApO1xuXG5cdFx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnN0b3AgKSB7XG5cdFx0XHRcdGhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYWN0aXZlIGFuaW1hdGlvbnMsIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7XG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggdHJ1ZSApO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdGlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkge1xuXHRcdFx0XHRcdHF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVHVybiBvZmYgZmluaXNoaW5nIGZsYWdcblx0XHRcdGRlbGV0ZSBkYXRhLmZpbmlzaDtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJ0b2dnbGVcIiwgXCJzaG93XCIsIFwiaGlkZVwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSBcImJvb2xlYW5cIiA/XG5cdFx0XHRjc3NGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICkgOlxuXHRcdFx0dGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9O1xufSk7XG5cbi8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcbmpRdWVyeS5lYWNoKHtcblx0c2xpZGVEb3duOiBnZW5GeChcInNob3dcIiksXG5cdHNsaWRlVXA6IGdlbkZ4KFwiaGlkZVwiKSxcblx0c2xpZGVUb2dnbGU6IGdlbkZ4KFwidG9nZ2xlXCIpLFxuXHRmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcblx0ZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuXHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxufSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0pO1xuXG5qUXVlcnkudGltZXJzID0gW107XG5qUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgdGltZXIsXG5cdFx0aSA9IDAsXG5cdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycztcblxuXHRmeE5vdyA9IGpRdWVyeS5ub3coKTtcblxuXHRmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7XG5cdFx0dGltZXIgPSB0aW1lcnNbIGkgXTtcblx0XHQvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWRcblx0XHRpZiAoICF0aW1lcigpICYmIHRpbWVyc1sgaSBdID09PSB0aW1lciApIHtcblx0XHRcdHRpbWVycy5zcGxpY2UoIGktLSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIXRpbWVycy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0b3AoKTtcblx0fVxuXHRmeE5vdyA9IHVuZGVmaW5lZDtcbn07XG5cbmpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcblx0alF1ZXJ5LnRpbWVycy5wdXNoKCB0aW1lciApO1xuXHRpZiAoIHRpbWVyKCkgKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0YXJ0KCk7XG5cdH0gZWxzZSB7XG5cdFx0alF1ZXJ5LnRpbWVycy5wb3AoKTtcblx0fVxufTtcblxualF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5cbmpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRpZiAoICF0aW1lcklkICkge1xuXHRcdHRpbWVySWQgPSBzZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApO1xuXHR9XG59O1xuXG5qUXVlcnkuZnguc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRjbGVhckludGVydmFsKCB0aW1lcklkICk7XG5cdHRpbWVySWQgPSBudWxsO1xufTtcblxualF1ZXJ5LmZ4LnNwZWVkcyA9IHtcblx0c2xvdzogNjAwLFxuXHRmYXN0OiAyMDAsXG5cdC8vIERlZmF1bHQgc3BlZWRcblx0X2RlZmF1bHQ6IDQwMFxufTtcblxuXG4vLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG4vLyBodHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvXG5qUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHtcblx0dGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTtcblx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7XG5cdFx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG5cdFx0aG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XG5cdFx0fTtcblx0fSk7XG59O1xuXG5cbihmdW5jdGlvbigpIHtcblx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICksXG5cdFx0c2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzZWxlY3RcIiApLFxuXHRcdG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvcHRpb25cIiApICk7XG5cblx0aW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcblxuXHQvLyBTdXBwb3J0OiBpT1M8PTUuMSwgQW5kcm9pZDw9NC4yK1xuXHQvLyBEZWZhdWx0IHZhbHVlIGZvciBhIGNoZWNrYm94IHNob3VsZCBiZSBcIm9uXCJcblx0c3VwcG9ydC5jaGVja09uID0gaW5wdXQudmFsdWUgIT09IFwiXCI7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBNdXN0IGFjY2VzcyBzZWxlY3RlZEluZGV4IHRvIG1ha2UgZGVmYXVsdCBvcHRpb25zIHNlbGVjdFxuXHRzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8PTIuM1xuXHQvLyBPcHRpb25zIGluc2lkZSBkaXNhYmxlZCBzZWxlY3RzIGFyZSBpbmNvcnJlY3RseSBtYXJrZWQgYXMgZGlzYWJsZWRcblx0c2VsZWN0LmRpc2FibGVkID0gdHJ1ZTtcblx0c3VwcG9ydC5vcHREaXNhYmxlZCA9ICFvcHQuZGlzYWJsZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBBbiBpbnB1dCBsb3NlcyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpb1xuXHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRpbnB1dC52YWx1ZSA9IFwidFwiO1xuXHRpbnB1dC50eXBlID0gXCJyYWRpb1wiO1xuXHRzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gXCJ0XCI7XG59KSgpO1xuXG5cbnZhciBub2RlSG9vaywgYm9vbEhvb2ssXG5cdGF0dHJIYW5kbGUgPSBqUXVlcnkuZXhwci5hdHRySGFuZGxlO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0YXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRhdHRyOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBkb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBGYWxsYmFjayB0byBwcm9wIHdoZW4gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZFxuXHRcdGlmICggdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlID09PSBzdHJ1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGF0dHJpYnV0ZXMgYXJlIGxvd2VyY2FzZVxuXHRcdC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblx0XHRcdG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5hdHRySG9va3NbIG5hbWUgXSB8fFxuXHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiBub2RlSG9vayApO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcblx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdH1cblxuXHRcdH0gZWxzZSBpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdFx0cmV0dXJuIHJldCA9PSBudWxsID9cblx0XHRcdFx0dW5kZWZpbmVkIDpcblx0XHRcdFx0cmV0O1xuXHRcdH1cblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0dmFyIG5hbWUsIHByb3BOYW1lLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICk7XG5cblx0XHRpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0d2hpbGUgKCAobmFtZSA9IGF0dHJOYW1lc1tpKytdKSApIHtcblx0XHRcdFx0cHJvcE5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cblx0XHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGdldCBzcGVjaWFsIHRyZWF0bWVudCAoIzEwODcwKVxuXHRcdFx0XHRpZiAoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRcdC8vIFNldCBjb3JyZXNwb25kaW5nIHByb3BlcnR5IHRvIGZhbHNlXG5cdFx0XHRcdFx0ZWxlbVsgcHJvcE5hbWUgXSA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0YXR0ckhvb2tzOiB7XG5cdFx0dHlwZToge1xuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggIXN1cHBvcnQucmFkaW9WYWx1ZSAmJiB2YWx1ZSA9PT0gXCJyYWRpb1wiICYmXG5cdFx0XHRcdFx0alF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR2YXIgdmFsID0gZWxlbS52YWx1ZTtcblx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIHZhbHVlICk7XG5cdFx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnZhbHVlID0gdmFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG4vLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzXG5ib29sSG9vayA9IHtcblx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG5cdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHQvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlXG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgbmFtZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxufTtcbmpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1xcdysvZyApLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGdldHRlciA9IGF0dHJIYW5kbGVbIG5hbWUgXSB8fCBqUXVlcnkuZmluZC5hdHRyO1xuXG5cdGF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgcmV0LCBoYW5kbGU7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHQvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wIGJ5IHRlbXBvcmFyaWx5IHJlbW92aW5nIHRoaXMgZnVuY3Rpb24gZnJvbSB0aGUgZ2V0dGVyXG5cdFx0XHRoYW5kbGUgPSBhdHRySGFuZGxlWyBuYW1lIF07XG5cdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSByZXQ7XG5cdFx0XHRyZXQgPSBnZXR0ZXIoIGVsZW0sIG5hbWUsIGlzWE1MICkgIT0gbnVsbCA/XG5cdFx0XHRcdG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSBoYW5kbGU7XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH07XG59KTtcblxuXG5cblxudmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0cHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0ZGVsZXRlIHRoaXNbIGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZSBdO1xuXHRcdH0pO1xuXHR9XG59KTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdHByb3BGaXg6IHtcblx0XHRcImZvclwiOiBcImh0bWxGb3JcIixcblx0XHRcImNsYXNzXCI6IFwiY2xhc3NOYW1lXCJcblx0fSxcblxuXHRwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsIG5vdHhtbCxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIERvbid0IGdldC9zZXQgcHJvcGVydGllcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoICFlbGVtIHx8IG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG5vdHhtbCA9IG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKTtcblxuXHRcdGlmICggbm90eG1sICkge1xuXHRcdFx0Ly8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rc1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkpICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRyZXQgOlxuXHRcdFx0XHQoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCA/XG5cdFx0XHRcdHJldCA6XG5cdFx0XHRcdGVsZW1bIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0cHJvcEhvb2tzOiB7XG5cdFx0dGFiSW5kZXg6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmhhc0F0dHJpYnV0ZSggXCJ0YWJpbmRleFwiICkgfHwgcmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHwgZWxlbS5ocmVmID9cblx0XHRcdFx0XHRlbGVtLnRhYkluZGV4IDpcblx0XHRcdFx0XHQtMTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG5pZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkge1xuXHRqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH07XG59XG5cbmpRdWVyeS5lYWNoKFtcblx0XCJ0YWJJbmRleFwiLFxuXHRcInJlYWRPbmx5XCIsXG5cdFwibWF4TGVuZ3RoXCIsXG5cdFwiY2VsbFNwYWNpbmdcIixcblx0XCJjZWxsUGFkZGluZ1wiLFxuXHRcInJvd1NwYW5cIixcblx0XCJjb2xTcGFuXCIsXG5cdFwidXNlTWFwXCIsXG5cdFwiZnJhbWVCb3JkZXJcIixcblx0XCJjb250ZW50RWRpdGFibGVcIlxuXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7XG59KTtcblxuXG5cblxudmFyIHJjbGFzcyA9IC9bXFx0XFxyXFxuXFxmXS9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdHByb2NlZWQgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmFkZENsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCB0aGlzLmNsYXNzTmFtZSApICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIHByb2NlZWQgKSB7XG5cdFx0XHQvLyBUaGUgZGlzanVuY3Rpb24gaGVyZSBpcyBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIHJlbW92ZUNsYXNzKVxuXHRcdFx0Y2xhc3NlcyA9ICggdmFsdWUgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGVsZW0gPSB0aGlzWyBpIF07XG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBlbGVtLmNsYXNzTmFtZSA/XG5cdFx0XHRcdFx0KCBcIiBcIiArIGVsZW0uY2xhc3NOYW1lICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICkgOlxuXHRcdFx0XHRcdFwiIFwiXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoY2xhenogPSBjbGFzc2VzW2orK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgKz0gY2xhenogKyBcIiBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBvbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmNsYXNzTmFtZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uY2xhc3NOYW1lID0gZmluYWxWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRyZW1vdmVDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0cHJvY2VlZCA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aDtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgdGhpcy5jbGFzc05hbWUgKSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmICggcHJvY2VlZCApIHtcblx0XHRcdGNsYXNzZXMgPSAoIHZhbHVlIHx8IFwiXCIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdO1xuXHRcdFx0XHQvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKVxuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggZWxlbS5jbGFzc05hbWUgP1xuXHRcdFx0XHRcdCggXCIgXCIgKyBlbGVtLmNsYXNzTmFtZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApIDpcblx0XHRcdFx0XHRcIlwiXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoY2xhenogPSBjbGFzc2VzW2orK10pICkge1xuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPj0gMCApIHtcblx0XHRcdFx0XHRcdFx0Y3VyID0gY3VyLnJlcGxhY2UoIFwiIFwiICsgY2xhenogKyBcIiBcIiwgXCIgXCIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSB2YWx1ZSA/IGpRdWVyeS50cmltKCBjdXIgKSA6IFwiXCI7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmNsYXNzTmFtZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uY2xhc3NOYW1lID0gZmluYWxWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR0b2dnbGVDbGFzczogZnVuY3Rpb24oIHZhbHVlLCBzdGF0ZVZhbCApIHtcblx0XHR2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuXHRcdGlmICggdHlwZW9mIHN0YXRlVmFsID09PSBcImJvb2xlYW5cIiAmJiB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKCB2YWx1ZS5jYWxsKHRoaXMsIGksIHRoaXMuY2xhc3NOYW1lLCBzdGF0ZVZhbCksIHN0YXRlVmFsICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyBUb2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lc1xuXHRcdFx0XHR2YXIgY2xhc3NOYW1lLFxuXHRcdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHRcdHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0XHRjbGFzc05hbWVzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0XHRcdHdoaWxlICggKGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdKSApIHtcblx0XHRcdFx0XHQvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3Rcblx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gc3RydW5kZWZpbmVkIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0XHRpZiAoIHRoaXMuY2xhc3NOYW1lICkge1xuXHRcdFx0XHRcdC8vIHN0b3JlIGNsYXNzTmFtZSBpZiBzZXRcblx0XHRcdFx0XHRkYXRhX3ByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgdGhpcy5jbGFzc05hbWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXG5cdFx0XHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXG5cdFx0XHRcdC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cblx0XHRcdFx0dGhpcy5jbGFzc05hbWUgPSB0aGlzLmNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgPyBcIlwiIDogZGF0YV9wcml2LmdldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdGhhc0NsYXNzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGNsYXNzTmFtZSA9IFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoO1xuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGlmICggdGhpc1tpXS5ub2RlVHlwZSA9PT0gMSAmJiAoXCIgXCIgKyB0aGlzW2ldLmNsYXNzTmFtZSArIFwiIFwiKS5yZXBsYWNlKHJjbGFzcywgXCIgXCIpLmluZGV4T2YoIGNsYXNzTmFtZSApID49IDAgKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufSk7XG5cblxuXG5cbnZhciBycmV0dXJuID0gL1xcci9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0dmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsIGlzRnVuY3Rpb24sXG5cdFx0XHRlbGVtID0gdGhpc1swXTtcblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyBlbGVtLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBcInZhbHVlXCIgKSkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0ID0gZWxlbS52YWx1ZTtcblxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIHJldCA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0Ly8gSGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuXHRcdFx0XHRcdHJldC5yZXBsYWNlKHJyZXR1cm4sIFwiXCIpIDpcblx0XHRcdFx0XHQvLyBIYW5kbGUgY2FzZXMgd2hlcmUgdmFsdWUgaXMgbnVsbC91bmRlZiBvciBudW1iZXJcblx0XHRcdFx0XHRyZXQgPT0gbnVsbCA/IFwiXCIgOiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIHZhbDtcblxuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWwgKz0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHR2YWwgPSBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSArIFwiXCI7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0Ly8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmdcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoXCJzZXRcIiBpbiBob29rcykgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsIFwidmFsdWVcIiApID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHRoaXMudmFsdWUgPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0dmFsSG9va3M6IHtcblx0XHRvcHRpb246IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInZhbHVlXCIgKTtcblx0XHRcdFx0cmV0dXJuIHZhbCAhPSBudWxsID9cblx0XHRcdFx0XHR2YWwgOlxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFMTAtMTErXG5cdFx0XHRcdFx0Ly8gb3B0aW9uLnRleHQgdGhyb3dzIGV4Y2VwdGlvbnMgKCMxNDY4NiwgIzE0ODU4KVxuXHRcdFx0XHRcdGpRdWVyeS50cmltKCBqUXVlcnkudGV4dCggZWxlbSApICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWxlY3Q6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWx1ZSwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0aW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0b25lID0gZWxlbS50eXBlID09PSBcInNlbGVjdC1vbmVcIiB8fCBpbmRleCA8IDAsXG5cdFx0XHRcdFx0dmFsdWVzID0gb25lID8gbnVsbCA6IFtdLFxuXHRcdFx0XHRcdG1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLFxuXHRcdFx0XHRcdGkgPSBpbmRleCA8IDAgP1xuXHRcdFx0XHRcdFx0bWF4IDpcblx0XHRcdFx0XHRcdG9uZSA/IGluZGV4IDogMDtcblxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8vIElFNi05IGRvZXNuJ3QgdXBkYXRlIHNlbGVjdGVkIGFmdGVyIGZvcm0gcmVzZXQgKCMyNTUxKVxuXHRcdFx0XHRcdGlmICggKCBvcHRpb24uc2VsZWN0ZWQgfHwgaSA9PT0gaW5kZXggKSAmJlxuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHRcdFx0XHRcdCggc3VwcG9ydC5vcHREaXNhYmxlZCA/ICFvcHRpb24uZGlzYWJsZWQgOiBvcHRpb24uZ2V0QXR0cmlidXRlKCBcImRpc2FibGVkXCIgKSA9PT0gbnVsbCApICYmXG5cdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8ICFqUXVlcnkubm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIgKSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uXG5cdFx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeSggb3B0aW9uICkudmFsKCk7XG5cblx0XHRcdFx0XHRcdC8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzXG5cdFx0XHRcdFx0XHRpZiAoIG9uZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0dmFsdWVzLnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHR2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLFxuXHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cdFx0XHRcdFx0aWYgKCAob3B0aW9uLnNlbGVjdGVkID0galF1ZXJ5LmluQXJyYXkoIG9wdGlvbi52YWx1ZSwgdmFsdWVzICkgPj0gMCkgKSB7XG5cdFx0XHRcdFx0XHRvcHRpb25TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcmNlIGJyb3dzZXJzIHRvIGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBub24tbWF0Y2hpbmcgdmFsdWUgaXMgc2V0XG5cdFx0XHRcdGlmICggIW9wdGlvblNldCApIHtcblx0XHRcdFx0XHRlbGVtLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSk7XG5cbi8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyXG5qUXVlcnkuZWFjaChbIFwicmFkaW9cIiwgXCJjaGVja2JveFwiIF0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXSA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0uY2hlY2tlZCA9IGpRdWVyeS5pbkFycmF5KCBqUXVlcnkoZWxlbSkudmFsKCksIHZhbHVlICkgPj0gMCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0aWYgKCAhc3VwcG9ydC5jaGVja09uICkge1xuXHRcdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdLmdldCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwidmFsdWVcIikgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG4vLyBSZXR1cm4galF1ZXJ5IGZvciBhdHRyaWJ1dGVzLW9ubHkgaW5jbHVzaW9uXG5cblxualF1ZXJ5LmVhY2goIChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIFwiICtcblx0XCJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBcIiArXG5cdFwiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiKS5zcGxpdChcIiBcIiksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXG5cdC8vIEhhbmRsZSBldmVudCBiaW5kaW5nXG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/XG5cdFx0XHR0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDpcblx0XHRcdHRoaXMudHJpZ2dlciggbmFtZSApO1xuXHR9O1xufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7XG5cdFx0cmV0dXJuIHRoaXMubW91c2VlbnRlciggZm5PdmVyICkubW91c2VsZWF2ZSggZm5PdXQgfHwgZm5PdmVyICk7XG5cdH0sXG5cblx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApO1xuXHR9LFxuXG5cdGRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHtcblx0XHQvLyAoIG5hbWVzcGFjZSApIG9yICggc2VsZWN0b3IsIHR5cGVzIFssIGZuXSApXG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyB0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDogdGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XG5cdH1cbn0pO1xuXG5cbnZhciBub25jZSA9IGpRdWVyeS5ub3coKTtcblxudmFyIHJxdWVyeSA9ICgvXFw/Lyk7XG5cblxuXG4vLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuLy8gV29ya2Fyb3VuZCBmYWlsdXJlIHRvIHN0cmluZy1jYXN0IG51bGwgaW5wdXRcbmpRdWVyeS5wYXJzZUpTT04gPSBmdW5jdGlvbiggZGF0YSApIHtcblx0cmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKyBcIlwiICk7XG59O1xuXG5cbi8vIENyb3NzLWJyb3dzZXIgeG1sIHBhcnNpbmdcbmpRdWVyeS5wYXJzZVhNTCA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHR2YXIgeG1sLCB0bXA7XG5cdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRTlcblx0dHJ5IHtcblx0XHR0bXAgPSBuZXcgRE9NUGFyc2VyKCk7XG5cdFx0eG1sID0gdG1wLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHhtbCA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwicGFyc2VyZXJyb3JcIiApLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHR9XG5cdHJldHVybiB4bWw7XG59O1xuXG5cbnZhclxuXHRyaGFzaCA9IC8jLiokLyxcblx0cnRzID0gLyhbPyZdKV89W14mXSovLFxuXHRyaGVhZGVycyA9IC9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvbWcsXG5cdC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuXHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcblx0cnByb3RvY29sID0gL15cXC9cXC8vLFxuXHRydXJsID0gL14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sXG5cblx0LyogUHJlZmlsdGVyc1xuXHQgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuXHQgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOlxuXHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdCAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcblx0ICogMykga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHRwcmVmaWx0ZXJzID0ge30sXG5cblx0LyogVHJhbnNwb3J0cyBiaW5kaW5nc1xuXHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHR0cmFuc3BvcnRzID0ge30sXG5cblx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdGFsbFR5cGVzID0gXCIqL1wiLmNvbmNhdCggXCIqXCIgKSxcblxuXHQvLyBEb2N1bWVudCBsb2NhdGlvblxuXHRhamF4TG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZixcblxuXHQvLyBTZWdtZW50IGxvY2F0aW9uIGludG8gcGFydHNcblx0YWpheExvY1BhcnRzID0gcnVybC5leGVjKCBhamF4TG9jYXRpb24udG9Mb3dlckNhc2UoKSApIHx8IFtdO1xuXG4vLyBCYXNlIFwiY29uc3RydWN0b3JcIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0XG5mdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHtcblxuXHQvLyBkYXRhVHlwZUV4cHJlc3Npb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIFwiKlwiXG5cdHJldHVybiBmdW5jdGlvbiggZGF0YVR5cGVFeHByZXNzaW9uLCBmdW5jICkge1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjtcblx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdH1cblxuXHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0ZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZnVuYyApICkge1xuXHRcdFx0Ly8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvblxuXHRcdFx0d2hpbGUgKCAoZGF0YVR5cGUgPSBkYXRhVHlwZXNbaSsrXSkgKSB7XG5cdFx0XHRcdC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmICggZGF0YVR5cGVbMF0gPT09IFwiK1wiICkge1xuXHRcdFx0XHRcdGRhdGFUeXBlID0gZGF0YVR5cGUuc2xpY2UoIDEgKSB8fCBcIipcIjtcblx0XHRcdFx0XHQoc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdKS51bnNoaWZ0KCBmdW5jICk7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdChzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10pLnB1c2goIGZ1bmMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5mdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG5cdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTtcblxuXHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHR2YXIgc2VsZWN0ZWQ7XG5cdFx0aW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcblx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcblx0XHRcdGlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiYgIXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXHRcdFx0XHRvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdGluc3BlY3QoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIGlmICggc2Vla2luZ1RyYW5zcG9ydCApIHtcblx0XHRcdFx0cmV0dXJuICEoIHNlbGVjdGVkID0gZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBzZWxlY3RlZDtcblx0fVxuXG5cdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xufVxuXG4vLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcbi8vIHRoYXQgdGFrZXMgXCJmbGF0XCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpXG4vLyBGaXhlcyAjOTg4N1xuZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdHZhciBrZXksIGRlZXAsXG5cdFx0ZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9O1xuXG5cdGZvciAoIGtleSBpbiBzcmMgKSB7XG5cdFx0aWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoZGVlcCA9IHt9KSApIClbIGtleSBdID0gc3JjWyBrZXkgXTtcblx0XHR9XG5cdH1cblx0aWYgKCBkZWVwICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRydWUsIHRhcmdldCwgZGVlcCApO1xuXHR9XG5cblx0cmV0dXJuIHRhcmdldDtcbn1cblxuLyogSGFuZGxlcyByZXNwb25zZXMgdG8gYW4gYWpheCByZXF1ZXN0OlxuICogLSBmaW5kcyB0aGUgcmlnaHQgZGF0YVR5cGUgKG1lZGlhdGVzIGJldHdlZW4gY29udGVudC10eXBlIGFuZCBleHBlY3RlZCBkYXRhVHlwZSlcbiAqIC0gcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuICovXG5mdW5jdGlvbiBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICkge1xuXG5cdHZhciBjdCwgdHlwZSwgZmluYWxEYXRhVHlwZSwgZmlyc3REYXRhVHlwZSxcblx0XHRjb250ZW50cyA9IHMuY29udGVudHMsXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXM7XG5cblx0Ly8gUmVtb3ZlIGF1dG8gZGF0YVR5cGUgYW5kIGdldCBjb250ZW50LXR5cGUgaW4gdGhlIHByb2Nlc3Ncblx0d2hpbGUgKCBkYXRhVHlwZXNbIDAgXSA9PT0gXCIqXCIgKSB7XG5cdFx0ZGF0YVR5cGVzLnNoaWZ0KCk7XG5cdFx0aWYgKCBjdCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0Y3QgPSBzLm1pbWVUeXBlIHx8IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpO1xuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRpZiAoIGN0ICkge1xuXHRcdGZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7XG5cdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdHlwZSApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHJlc3BvbnNlIGZvciB0aGUgZXhwZWN0ZWQgZGF0YVR5cGVcblx0aWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7XG5cdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHR9IGVsc2Uge1xuXHRcdC8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXNcblx0XHRmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHtcblx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWzBdIF0gKSB7XG5cdFx0XHRcdGZpbmFsRGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmICggIWZpcnN0RGF0YVR5cGUgKSB7XG5cdFx0XHRcdGZpcnN0RGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmVcblx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHR9XG5cblx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHQvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZFxuXHQvLyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkge1xuXHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIGZpbmFsRGF0YVR5cGUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3BvbnNlc1sgZmluYWxEYXRhVHlwZSBdO1xuXHR9XG59XG5cbi8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2VcbiAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7XG5cdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdGNvbnZlcnRlcnMgPSB7fSxcblx0XHQvLyBXb3JrIHdpdGggYSBjb3B5IG9mIGRhdGFUeXBlcyBpbiBjYXNlIHdlIG5lZWQgdG8gbW9kaWZ5IGl0IGZvciBjb252ZXJzaW9uXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTtcblxuXHQvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXNcblx0aWYgKCBkYXRhVHlwZXNbIDEgXSApIHtcblx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdGNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07XG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG5cdHdoaWxlICggY3VycmVudCApIHtcblxuXHRcdGlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkge1xuXHRcdFx0anFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWRcblx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTtcblx0XHR9XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0XHRpZiAoIGN1cnJlbnQgKSB7XG5cblx0XHQvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvXG5cdFx0XHRpZiAoIGN1cnJlbnQgPT09IFwiKlwiICkge1xuXG5cdFx0XHRcdGN1cnJlbnQgPSBwcmV2O1xuXG5cdFx0XHQvLyBDb252ZXJ0IHJlc3BvbnNlIGlmIHByZXYgZGF0YVR5cGUgaXMgbm9uLWF1dG8gYW5kIGRpZmZlcnMgZnJvbSBjdXJyZW50XG5cdFx0XHR9IGVsc2UgaWYgKCBwcmV2ICE9PSBcIipcIiAmJiBwcmV2ICE9PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdC8vIFNlZWsgYSBkaXJlY3QgY29udmVydGVyXG5cdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyBjdXJyZW50IF0gfHwgY29udmVydGVyc1sgXCIqIFwiICsgY3VycmVudCBdO1xuXG5cdFx0XHRcdC8vIElmIG5vbmUgZm91bmQsIHNlZWsgYSBwYWlyXG5cdFx0XHRcdGlmICggIWNvbnYgKSB7XG5cdFx0XHRcdFx0Zm9yICggY29udjIgaW4gY29udmVydGVycyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSWYgY29udjIgb3V0cHV0cyBjdXJyZW50XG5cdFx0XHRcdFx0XHR0bXAgPSBjb252Mi5zcGxpdCggXCIgXCIgKTtcblx0XHRcdFx0XHRcdGlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gSWYgcHJldiBjYW4gYmUgY29udmVydGVkIHRvIGFjY2VwdGVkIGlucHV0XG5cdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyB0bXBbIDAgXSBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0Y29udmVydGVyc1sgXCIqIFwiICsgdG1wWyAwIF0gXTtcblx0XHRcdFx0XHRcdFx0aWYgKCBjb252ICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIENvbmRlbnNlIGVxdWl2YWxlbmNlIGNvbnZlcnRlcnNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgPT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgY29udjIgXTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaW5zZXJ0IHRoZSBpbnRlcm1lZGlhdGUgZGF0YVR5cGVcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudCA9IHRtcFsgMCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXBwbHkgY29udmVydGVyIChpZiBub3QgYW4gZXF1aXZhbGVuY2UpXG5cdFx0XHRcdGlmICggY29udiAhPT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdC8vIFVubGVzcyBlcnJvcnMgYXJlIGFsbG93ZWQgdG8gYnViYmxlLCBjYXRjaCBhbmQgcmV0dXJuIHRoZW1cblx0XHRcdFx0XHRpZiAoIGNvbnYgJiYgc1sgXCJ0aHJvd3NcIiBdICkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHsgc3RhdGU6IFwicGFyc2VyZXJyb3JcIiwgZXJyb3I6IGNvbnYgPyBlIDogXCJObyBjb252ZXJzaW9uIGZyb20gXCIgKyBwcmV2ICsgXCIgdG8gXCIgKyBjdXJyZW50IH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc3RhdGU6IFwic3VjY2Vzc1wiLCBkYXRhOiByZXNwb25zZSB9O1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHQvLyBDb3VudGVyIGZvciBob2xkaW5nIHRoZSBudW1iZXIgb2YgYWN0aXZlIHF1ZXJpZXNcblx0YWN0aXZlOiAwLFxuXG5cdC8vIExhc3QtTW9kaWZpZWQgaGVhZGVyIGNhY2hlIGZvciBuZXh0IHJlcXVlc3Rcblx0bGFzdE1vZGlmaWVkOiB7fSxcblx0ZXRhZzoge30sXG5cblx0YWpheFNldHRpbmdzOiB7XG5cdFx0dXJsOiBhamF4TG9jYXRpb24sXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBhamF4TG9jUGFydHNbIDEgXSApLFxuXHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRwcm9jZXNzRGF0YTogdHJ1ZSxcblx0XHRhc3luYzogdHJ1ZSxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblx0XHQvKlxuXHRcdHRpbWVvdXQ6IDAsXG5cdFx0ZGF0YTogbnVsbCxcblx0XHRkYXRhVHlwZTogbnVsbCxcblx0XHR1c2VybmFtZTogbnVsbCxcblx0XHRwYXNzd29yZDogbnVsbCxcblx0XHRjYWNoZTogbnVsbCxcblx0XHR0aHJvd3M6IGZhbHNlLFxuXHRcdHRyYWRpdGlvbmFsOiBmYWxzZSxcblx0XHRoZWFkZXJzOiB7fSxcblx0XHQqL1xuXG5cdFx0YWNjZXB0czoge1xuXHRcdFx0XCIqXCI6IGFsbFR5cGVzLFxuXHRcdFx0dGV4dDogXCJ0ZXh0L3BsYWluXCIsXG5cdFx0XHRodG1sOiBcInRleHQvaHRtbFwiLFxuXHRcdFx0eG1sOiBcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixcblx0XHRcdGpzb246IFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJcblx0XHR9LFxuXG5cdFx0Y29udGVudHM6IHtcblx0XHRcdHhtbDogL3htbC8sXG5cdFx0XHRodG1sOiAvaHRtbC8sXG5cdFx0XHRqc29uOiAvanNvbi9cblx0XHR9LFxuXG5cdFx0cmVzcG9uc2VGaWVsZHM6IHtcblx0XHRcdHhtbDogXCJyZXNwb25zZVhNTFwiLFxuXHRcdFx0dGV4dDogXCJyZXNwb25zZVRleHRcIixcblx0XHRcdGpzb246IFwicmVzcG9uc2VKU09OXCJcblx0XHR9LFxuXG5cdFx0Ly8gRGF0YSBjb252ZXJ0ZXJzXG5cdFx0Ly8gS2V5cyBzZXBhcmF0ZSBzb3VyY2UgKG9yIGNhdGNoYWxsIFwiKlwiKSBhbmQgZGVzdGluYXRpb24gdHlwZXMgd2l0aCBhIHNpbmdsZSBzcGFjZVxuXHRcdGNvbnZlcnRlcnM6IHtcblxuXHRcdFx0Ly8gQ29udmVydCBhbnl0aGluZyB0byB0ZXh0XG5cdFx0XHRcIiogdGV4dFwiOiBTdHJpbmcsXG5cblx0XHRcdC8vIFRleHQgdG8gaHRtbCAodHJ1ZSA9IG5vIHRyYW5zZm9ybWF0aW9uKVxuXHRcdFx0XCJ0ZXh0IGh0bWxcIjogdHJ1ZSxcblxuXHRcdFx0Ly8gRXZhbHVhdGUgdGV4dCBhcyBhIGpzb24gZXhwcmVzc2lvblxuXHRcdFx0XCJ0ZXh0IGpzb25cIjogalF1ZXJ5LnBhcnNlSlNPTixcblxuXHRcdFx0Ly8gUGFyc2UgdGV4dCBhcyB4bWxcblx0XHRcdFwidGV4dCB4bWxcIjogalF1ZXJ5LnBhcnNlWE1MXG5cdFx0fSxcblxuXHRcdC8vIEZvciBvcHRpb25zIHRoYXQgc2hvdWxkbid0IGJlIGRlZXAgZXh0ZW5kZWQ6XG5cdFx0Ly8geW91IGNhbiBhZGQgeW91ciBvd24gY3VzdG9tIG9wdGlvbnMgaGVyZSBpZlxuXHRcdC8vIGFuZCB3aGVuIHlvdSBjcmVhdGUgb25lIHRoYXQgc2hvdWxkbid0IGJlXG5cdFx0Ly8gZGVlcCBleHRlbmRlZCAoc2VlIGFqYXhFeHRlbmQpXG5cdFx0ZmxhdE9wdGlvbnM6IHtcblx0XHRcdHVybDogdHJ1ZSxcblx0XHRcdGNvbnRleHQ6IHRydWVcblx0XHR9XG5cdH0sXG5cblx0Ly8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXRcblx0Ly8gd2l0aCBib3RoIGFqYXhTZXR0aW5ncyBhbmQgc2V0dGluZ3MgZmllbGRzLlxuXHQvLyBJZiB0YXJnZXQgaXMgb21pdHRlZCwgd3JpdGVzIGludG8gYWpheFNldHRpbmdzLlxuXHRhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkge1xuXHRcdHJldHVybiBzZXR0aW5ncyA/XG5cblx0XHRcdC8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0XG5cdFx0XHRhamF4RXh0ZW5kKCBhamF4RXh0ZW5kKCB0YXJnZXQsIGpRdWVyeS5hamF4U2V0dGluZ3MgKSwgc2V0dGluZ3MgKSA6XG5cblx0XHRcdC8vIEV4dGVuZGluZyBhamF4U2V0dGluZ3Ncblx0XHRcdGFqYXhFeHRlbmQoIGpRdWVyeS5hamF4U2V0dGluZ3MsIHRhcmdldCApO1xuXHR9LFxuXG5cdGFqYXhQcmVmaWx0ZXI6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycyApLFxuXHRhamF4VHJhbnNwb3J0OiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMgKSxcblxuXHQvLyBNYWluIG1ldGhvZFxuXHRhamF4OiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkge1xuXG5cdFx0Ly8gSWYgdXJsIGlzIGFuIG9iamVjdCwgc2ltdWxhdGUgcHJlLTEuNSBzaWduYXR1cmVcblx0XHRpZiAoIHR5cGVvZiB1cmwgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRvcHRpb25zID0gdXJsO1xuXHRcdFx0dXJsID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIEZvcmNlIG9wdGlvbnMgdG8gYmUgYW4gb2JqZWN0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0XHR2YXIgdHJhbnNwb3J0LFxuXHRcdFx0Ly8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuXHRcdFx0Y2FjaGVVUkwsXG5cdFx0XHQvLyBSZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRyZXNwb25zZUhlYWRlcnMsXG5cdFx0XHQvLyB0aW1lb3V0IGhhbmRsZVxuXHRcdFx0dGltZW91dFRpbWVyLFxuXHRcdFx0Ly8gQ3Jvc3MtZG9tYWluIGRldGVjdGlvbiB2YXJzXG5cdFx0XHRwYXJ0cyxcblx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0ZmlyZUdsb2JhbHMsXG5cdFx0XHQvLyBMb29wIHZhcmlhYmxlXG5cdFx0XHRpLFxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuXHRcdFx0cyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG5cdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cdFx0XHQvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uXG5cdFx0XHRnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiYgKCBjYWxsYmFja0NvbnRleHQubm9kZVR5cGUgfHwgY2FsbGJhY2tDb250ZXh0LmpxdWVyeSApID9cblx0XHRcdFx0alF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG5cdFx0XHRcdGpRdWVyeS5ldmVudCxcblx0XHRcdC8vIERlZmVycmVkc1xuXHRcdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0c3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcblx0XHRcdC8vIEhlYWRlcnMgKHRoZXkgYXJlIHNlbnQgYWxsIGF0IG9uY2UpXG5cdFx0XHRyZXF1ZXN0SGVhZGVycyA9IHt9LFxuXHRcdFx0cmVxdWVzdEhlYWRlcnNOYW1lcyA9IHt9LFxuXHRcdFx0Ly8gVGhlIGpxWEhSIHN0YXRlXG5cdFx0XHRzdGF0ZSA9IDAsXG5cdFx0XHQvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2Vcblx0XHRcdHN0ckFib3J0ID0gXCJjYW5jZWxlZFwiLFxuXHRcdFx0Ly8gRmFrZSB4aHJcblx0XHRcdGpxWEhSID0ge1xuXHRcdFx0XHRyZWFkeVN0YXRlOiAwLFxuXG5cdFx0XHRcdC8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWRcblx0XHRcdFx0Z2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRcdFx0dmFyIG1hdGNoO1xuXHRcdFx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICFyZXNwb25zZUhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlSGVhZGVycyA9IHt9O1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnNbIG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlID09PSAyID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYWNoZXMgdGhlIGhlYWRlclxuXHRcdFx0XHRzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0dmFyIGxuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0bmFtZSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG5cdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0aWYgKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFjayBpbiBhIHdheSB0aGF0IHByZXNlcnZlcyBvbGQgb25lc1xuXHRcdFx0XHRcdFx0XHRcdHN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApLmNvbXBsZXRlID0gY29tcGxldGVEZWZlcnJlZC5hZGQ7XG5cdFx0anFYSFIuc3VjY2VzcyA9IGpxWEhSLmRvbmU7XG5cdFx0anFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsO1xuXG5cdFx0Ly8gUmVtb3ZlIGhhc2ggY2hhcmFjdGVyICgjNzUzMTogYW5kIHN0cmluZyBwcm9tb3Rpb24pXG5cdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHQvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGVcblx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgYWpheExvY2F0aW9uICkgKyBcIlwiICkucmVwbGFjZSggcmhhc2gsIFwiXCIgKVxuXHRcdFx0LnJlcGxhY2UoIHJwcm90b2NvbCwgYWpheExvY1BhcnRzWyAxIF0gKyBcIi8vXCIgKTtcblxuXHRcdC8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNFxuXHRcdHMudHlwZSA9IG9wdGlvbnMubWV0aG9kIHx8IG9wdGlvbnMudHlwZSB8fCBzLm1ldGhvZCB8fCBzLnR5cGU7XG5cblx0XHQvLyBFeHRyYWN0IGRhdGFUeXBlcyBsaXN0XG5cdFx0cy5kYXRhVHlwZXMgPSBqUXVlcnkudHJpbSggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXG5cdFx0Ly8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHdlIGhhdmUgYSBwcm90b2NvbDpob3N0OnBvcnQgbWlzbWF0Y2hcblx0XHRpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHtcblx0XHRcdHBhcnRzID0gcnVybC5leGVjKCBzLnVybC50b0xvd2VyQ2FzZSgpICk7XG5cdFx0XHRzLmNyb3NzRG9tYWluID0gISEoIHBhcnRzICYmXG5cdFx0XHRcdCggcGFydHNbIDEgXSAhPT0gYWpheExvY1BhcnRzWyAxIF0gfHwgcGFydHNbIDIgXSAhPT0gYWpheExvY1BhcnRzWyAyIF0gfHxcblx0XHRcdFx0XHQoIHBhcnRzWyAzIF0gfHwgKCBwYXJ0c1sgMSBdID09PSBcImh0dHA6XCIgPyBcIjgwXCIgOiBcIjQ0M1wiICkgKSAhPT1cblx0XHRcdFx0XHRcdCggYWpheExvY1BhcnRzWyAzIF0gfHwgKCBhamF4TG9jUGFydHNbIDEgXSA9PT0gXCJodHRwOlwiID8gXCI4MFwiIDogXCI0NDNcIiApICkgKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcblx0XHRpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHByZWZpbHRlcnNcblx0XHRpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlXG5cdFx0aWYgKCBzdGF0ZSA9PT0gMiApIHtcblx0XHRcdHJldHVybiBqcVhIUjtcblx0XHR9XG5cblx0XHQvLyBXZSBjYW4gZmlyZSBnbG9iYWwgZXZlbnRzIGFzIG9mIG5vdyBpZiBhc2tlZCB0b1xuXHRcdC8vIERvbid0IGZpcmUgZXZlbnRzIGlmIGpRdWVyeS5ldmVudCBpcyB1bmRlZmluZWQgaW4gYW4gQU1ELXVzYWdlIHNjZW5hcmlvICgjMTUxMTgpXG5cdFx0ZmlyZUdsb2JhbHMgPSBqUXVlcnkuZXZlbnQgJiYgcy5nbG9iYWw7XG5cblx0XHQvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzXG5cdFx0aWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKTtcblx0XHR9XG5cblx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cblx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHRjYWNoZVVSTCA9IHMudXJsO1xuXG5cdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cblx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdGlmICggcy5kYXRhICkge1xuXHRcdFx0XHRjYWNoZVVSTCA9ICggcy51cmwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YSApO1xuXHRcdFx0XHQvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG5cdFx0XHRcdGRlbGV0ZSBzLmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBhbnRpLWNhY2hlIGluIHVybCBpZiBuZWVkZWRcblx0XHRcdGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdHMudXJsID0gcnRzLnRlc3QoIGNhY2hlVVJMICkgP1xuXG5cdFx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYWxyZWFkeSBhICdfJyBwYXJhbWV0ZXIsIHNldCBpdHMgdmFsdWVcblx0XHRcdFx0XHRjYWNoZVVSTC5yZXBsYWNlKCBydHMsIFwiJDFfPVwiICsgbm9uY2UrKyApIDpcblxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSBhZGQgb25lIHRvIHRoZSBlbmRcblx0XHRcdFx0XHRjYWNoZVVSTCArICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyBub25jZSsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG5cdFx0XHRcIkFjY2VwdFwiLFxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gP1xuXHRcdFx0XHRzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gKyAoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuXHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHQpO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcblx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJiAoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IHN0YXRlID09PSAyICkgKSB7XG5cdFx0XHQvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm5cblx0XHRcdHJldHVybiBqcVhIUi5hYm9ydCgpO1xuXHRcdH1cblxuXHRcdC8vIEFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuXHRcdHN0ckFib3J0ID0gXCJhYm9ydFwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzXG5cdFx0Zm9yICggaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9ICkge1xuXHRcdFx0anFYSFJbIGkgXSggc1sgaSBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0aWYgKCAhdHJhbnNwb3J0ICkge1xuXHRcdFx0ZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cblx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdH1cblx0XHRcdC8vIFRpbWVvdXRcblx0XHRcdGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuXHRcdFx0XHR0aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGpxWEhSLmFib3J0KFwidGltZW91dFwiKTtcblx0XHRcdFx0fSwgcy50aW1lb3V0ICk7XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHN0YXRlID0gMTtcblx0XHRcdFx0dHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0Ly8gUHJvcGFnYXRlIGV4Y2VwdGlvbiBhcyBlcnJvciBpZiBub3QgZG9uZVxuXHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRkb25lKCAtMSwgZSApO1xuXHRcdFx0XHQvLyBTaW1wbHkgcmV0aHJvdyBvdGhlcndpc2Vcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lXG5cdFx0ZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7XG5cdFx0XHR2YXIgaXNTdWNjZXNzLCBzdWNjZXNzLCBlcnJvciwgcmVzcG9uc2UsIG1vZGlmaWVkLFxuXHRcdFx0XHRzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDtcblxuXHRcdFx0Ly8gQ2FsbGVkIG9uY2Vcblx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdGUgaXMgXCJkb25lXCIgbm93XG5cdFx0XHRzdGF0ZSA9IDI7XG5cblx0XHRcdC8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzXG5cdFx0XHRpZiAoIHRpbWVvdXRUaW1lciApIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGVyZWZlcmVuY2UgdHJhbnNwb3J0IGZvciBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb25cblx0XHRcdC8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpXG5cdFx0XHR0cmFuc3BvcnQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdC8vIENhY2hlIHJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgXCJcIjtcblxuXHRcdFx0Ly8gU2V0IHJlYWR5U3RhdGVcblx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSBzdGF0dXMgPiAwID8gNCA6IDA7XG5cblx0XHRcdC8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsXG5cdFx0XHRpc1N1Y2Nlc3MgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCB8fCBzdGF0dXMgPT09IDMwNDtcblxuXHRcdFx0Ly8gR2V0IHJlc3BvbnNlIGRhdGFcblx0XHRcdGlmICggcmVzcG9uc2VzICkge1xuXHRcdFx0XHRyZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udmVydCBubyBtYXR0ZXIgd2hhdCAodGhhdCB3YXkgcmVzcG9uc2VYWFggZmllbGRzIGFyZSBhbHdheXMgc2V0KVxuXHRcdFx0cmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTtcblxuXHRcdFx0Ly8gSWYgc3VjY2Vzc2Z1bCwgaGFuZGxlIHR5cGUgY2hhaW5pbmdcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXG5cdFx0XHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0XHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIG5vIGNvbnRlbnRcblx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09IFwiSEVBRFwiICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG5cdFx0XHRcdC8vIGlmIG5vdCBtb2RpZmllZFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcblx0XHRcdFx0XHRzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuXHRcdFx0XHRcdGlzU3VjY2VzcyA9ICFlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHQgYW5kIG5vcm1hbGl6ZSBmb3Igbm9uLWFib3J0c1xuXHRcdFx0XHRlcnJvciA9IHN0YXR1c1RleHQ7XG5cdFx0XHRcdGlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcImVycm9yXCI7XG5cdFx0XHRcdFx0aWYgKCBzdGF0dXMgPCAwICkge1xuXHRcdFx0XHRcdFx0c3RhdHVzID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGRhdGEgZm9yIHRoZSBmYWtlIHhociBvYmplY3Rcblx0XHRcdGpxWEhSLnN0YXR1cyA9IHN0YXR1cztcblx0XHRcdGpxWEhSLnN0YXR1c1RleHQgPSAoIG5hdGl2ZVN0YXR1c1RleHQgfHwgc3RhdHVzVGV4dCApICsgXCJcIjtcblxuXHRcdFx0Ly8gU3VjY2Vzcy9FcnJvclxuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsgc3VjY2Vzcywgc3RhdHVzVGV4dCwganFYSFIgXSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0LCBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRqcVhIUi5zdGF0dXNDb2RlKCBzdGF0dXNDb2RlICk7XG5cdFx0XHRzdGF0dXNDb2RlID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggaXNTdWNjZXNzID8gXCJhamF4U3VjY2Vzc1wiIDogXCJhamF4RXJyb3JcIixcblx0XHRcdFx0XHRbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb21wbGV0ZVxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZC5maXJlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0IF0gKTtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheENvbXBsZXRlXCIsIFsganFYSFIsIHMgXSApO1xuXHRcdFx0XHQvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXJcblx0XHRcdFx0aWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpxWEhSO1xuXHR9LFxuXG5cdGdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBcImpzb25cIiApO1xuXHR9LFxuXG5cdGdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuXHR9XG59KTtcblxualF1ZXJ5LmVhY2goIFsgXCJnZXRcIiwgXCJwb3N0XCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHtcblx0alF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkge1xuXHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZGF0YSApICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgY2FsbGJhY2s7XG5cdFx0XHRjYWxsYmFjayA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkuYWpheCh7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSk7XG5cdH07XG59KTtcblxuXG5qUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsICkge1xuXHRyZXR1cm4galF1ZXJ5LmFqYXgoe1xuXHRcdHVybDogdXJsLFxuXHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ZGF0YVR5cGU6IFwic2NyaXB0XCIsXG5cdFx0YXN5bmM6IGZhbHNlLFxuXHRcdGdsb2JhbDogZmFsc2UsXG5cdFx0XCJ0aHJvd3NcIjogdHJ1ZVxuXHR9KTtcbn07XG5cblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXNbIDAgXSApIHtcblxuXHRcdFx0Ly8gVGhlIGVsZW1lbnRzIHRvIHdyYXAgdGhlIHRhcmdldCBhcm91bmRcblx0XHRcdHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApO1xuXG5cdFx0XHRpZiAoIHRoaXNbIDAgXS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR3cmFwLmluc2VydEJlZm9yZSggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHdyYXAubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IHRoaXM7XG5cblx0XHRcdFx0d2hpbGUgKCBlbGVtLmZpcnN0RWxlbWVudENoaWxkICkge1xuXHRcdFx0XHRcdGVsZW0gPSBlbGVtLmZpcnN0RWxlbWVudENoaWxkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0XHR9KS5hcHBlbmQoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cblx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0d3JhcDogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0dmFyIGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApO1xuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGlzRnVuY3Rpb24gPyBodG1sLmNhbGwodGhpcywgaSkgOiBodG1sICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0dW53cmFwOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImJvZHlcIiApICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZXBsYWNlV2l0aCggdGhpcy5jaGlsZE5vZGVzICk7XG5cdFx0XHR9XG5cdFx0fSkuZW5kKCk7XG5cdH1cbn0pO1xuXG5cbmpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdC8vIFN1cHBvcnQ6IE9wZXJhIDw9IDEyLjEyXG5cdC8vIE9wZXJhIHJlcG9ydHMgb2Zmc2V0V2lkdGhzIGFuZCBvZmZzZXRIZWlnaHRzIGxlc3MgdGhhbiB6ZXJvIG9uIHNvbWUgZWxlbWVudHNcblx0cmV0dXJuIGVsZW0ub2Zmc2V0V2lkdGggPD0gMCAmJiBlbGVtLm9mZnNldEhlaWdodCA8PSAwO1xufTtcbmpRdWVyeS5leHByLmZpbHRlcnMudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gIWpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuKCBlbGVtICk7XG59O1xuXG5cblxuXG52YXIgcjIwID0gLyUyMC9nLFxuXHRyYnJhY2tldCA9IC9cXFtcXF0kLyxcblx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHR2YXIgbmFtZTtcblxuXHRpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHtcblx0XHQvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cblx0XHRqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHtcblx0XHRcdGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG5cdFx0XHRcdC8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci5cblx0XHRcdFx0YWRkKCBwcmVmaXgsIHYgKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG5cdFx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgPyBpIDogXCJcIiApICsgXCJdXCIsIHYsIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHR9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgalF1ZXJ5LnR5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuXHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cblx0fSBlbHNlIHtcblx0XHQvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uXG5cdFx0YWRkKCBwcmVmaXgsIG9iaiApO1xuXHR9XG59XG5cbi8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mXG4vLyBrZXkvdmFsdWVzIGludG8gYSBxdWVyeSBzdHJpbmdcbmpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHtcblx0dmFyIHByZWZpeCxcblx0XHRzID0gW10sXG5cdFx0YWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0XHQvLyBJZiB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBpbnZva2UgaXQgYW5kIHJldHVybiBpdHMgdmFsdWVcblx0XHRcdHZhbHVlID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgPyB2YWx1ZSgpIDogKCB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICk7XG5cdFx0XHRzWyBzLmxlbmd0aCBdID0gZW5jb2RlVVJJQ29tcG9uZW50KCBrZXkgKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSApO1xuXHRcdH07XG5cblx0Ly8gU2V0IHRyYWRpdGlvbmFsIHRvIHRydWUgZm9yIGpRdWVyeSA8PSAxLjMuMiBiZWhhdmlvci5cblx0aWYgKCB0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdHRyYWRpdGlvbmFsID0galF1ZXJ5LmFqYXhTZXR0aW5ncyAmJiBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO1xuXHR9XG5cblx0Ly8gSWYgYW4gYXJyYXkgd2FzIHBhc3NlZCBpbiwgYXNzdW1lIHRoYXQgaXQgaXMgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cy5cblx0aWYgKCBqUXVlcnkuaXNBcnJheSggYSApIHx8ICggYS5qcXVlcnkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBhICkgKSApIHtcblx0XHQvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHNcblx0XHRqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRhZGQoIHRoaXMubmFtZSwgdGhpcy52YWx1ZSApO1xuXHRcdH0pO1xuXG5cdH0gZWxzZSB7XG5cdFx0Ly8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcblx0XHQvLyBkaWQgaXQpLCBvdGhlcndpc2UgZW5jb2RlIHBhcmFtcyByZWN1cnNpdmVseS5cblx0XHRmb3IgKCBwcmVmaXggaW4gYSApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvblxuXHRyZXR1cm4gcy5qb2luKCBcIiZcIiApLnJlcGxhY2UoIHIyMCwgXCIrXCIgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnkucGFyYW0oIHRoaXMuc2VyaWFsaXplQXJyYXkoKSApO1xuXHR9LFxuXHRzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gQ2FuIGFkZCBwcm9wSG9vayBmb3IgXCJlbGVtZW50c1wiIHRvIGZpbHRlciBvciBhZGQgZm9ybSBlbGVtZW50c1xuXHRcdFx0dmFyIGVsZW1lbnRzID0galF1ZXJ5LnByb3AoIHRoaXMsIFwiZWxlbWVudHNcIiApO1xuXHRcdFx0cmV0dXJuIGVsZW1lbnRzID8galF1ZXJ5Lm1ha2VBcnJheSggZWxlbWVudHMgKSA6IHRoaXM7XG5cdFx0fSlcblx0XHQuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLnR5cGU7XG5cblx0XHRcdC8vIFVzZSAuaXMoIFwiOmRpc2FibGVkXCIgKSBzbyB0aGF0IGZpZWxkc2V0W2Rpc2FibGVkXSB3b3Jrc1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoIFwiOmRpc2FibGVkXCIgKSAmJlxuXHRcdFx0XHRyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmXG5cdFx0XHRcdCggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTtcblx0XHR9KVxuXHRcdC5tYXAoZnVuY3Rpb24oIGksIGVsZW0gKSB7XG5cdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cblx0XHRcdHJldHVybiB2YWwgPT0gbnVsbCA/XG5cdFx0XHRcdG51bGwgOlxuXHRcdFx0XHRqUXVlcnkuaXNBcnJheSggdmFsICkgP1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbCApIHtcblx0XHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9KS5nZXQoKTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdH0gY2F0Y2goIGUgKSB7fVxufTtcblxudmFyIHhocklkID0gMCxcblx0eGhyQ2FsbGJhY2tzID0ge30sXG5cdHhoclN1Y2Nlc3NTdGF0dXMgPSB7XG5cdFx0Ly8gZmlsZSBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyBjb2RlIDAsIGFzc3VtZSAyMDBcblx0XHQwOiAyMDAsXG5cdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0Ly8gIzE0NTA6IHNvbWV0aW1lcyBJRSByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0XG5cdFx0MTIyMzogMjA0XG5cdH0sXG5cdHhoclN1cHBvcnRlZCA9IGpRdWVyeS5hamF4U2V0dGluZ3MueGhyKCk7XG5cbi8vIFN1cHBvcnQ6IElFOVxuLy8gT3BlbiByZXF1ZXN0cyBtdXN0IGJlIG1hbnVhbGx5IGFib3J0ZWQgb24gdW5sb2FkICgjNTI4MClcbi8vIFNlZSBodHRwczovL3N1cHBvcnQubWljcm9zb2Z0LmNvbS9rYi8yODU2NzQ2IGZvciBtb3JlIGluZm9cbmlmICggd2luZG93LmF0dGFjaEV2ZW50ICkge1xuXHR3aW5kb3cuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgZnVuY3Rpb24oKSB7XG5cdFx0Zm9yICggdmFyIGtleSBpbiB4aHJDYWxsYmFja3MgKSB7XG5cdFx0XHR4aHJDYWxsYmFja3NbIGtleSBdKCk7XG5cdFx0fVxuXHR9KTtcbn1cblxuc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCBcIndpdGhDcmVkZW50aWFsc1wiIGluIHhoclN1cHBvcnRlZCApO1xuc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cbmpRdWVyeS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHR2YXIgY2FsbGJhY2s7XG5cblx0Ly8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuXHRpZiAoIHN1cHBvcnQuY29ycyB8fCB4aHJTdXBwb3J0ZWQgJiYgIW9wdGlvbnMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0dmFyIGksXG5cdFx0XHRcdFx0eGhyID0gb3B0aW9ucy54aHIoKSxcblx0XHRcdFx0XHRpZCA9ICsreGhySWQ7XG5cblx0XHRcdFx0eGhyLm9wZW4oIG9wdGlvbnMudHlwZSwgb3B0aW9ucy51cmwsIG9wdGlvbnMuYXN5bmMsIG9wdGlvbnMudXNlcm5hbWUsIG9wdGlvbnMucGFzc3dvcmQgKTtcblxuXHRcdFx0XHQvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0Zm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRcdHhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHtcblx0XHRcdFx0XHR4aHIub3ZlcnJpZGVNaW1lVHlwZSggb3B0aW9ucy5taW1lVHlwZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcblx0XHRcdFx0Ly8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZVxuXHRcdFx0XHQvLyBha2luIHRvIGEgamlnc2F3IHB1enpsZSwgd2Ugc2ltcGx5IG5ldmVyIHNldCBpdCB0byBiZSBzdXJlLlxuXHRcdFx0XHQvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcblx0XHRcdFx0Ly8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuXG5cdFx0XHRcdGlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gJiYgIWhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdICkge1xuXHRcdFx0XHRcdGhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2V0IGhlYWRlcnNcblx0XHRcdFx0Zm9yICggaSBpbiBoZWFkZXJzICkge1xuXHRcdFx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBoZWFkZXJzWyBpIF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHhockNhbGxiYWNrc1sgaWQgXTtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSB4aHIub25sb2FkID0geGhyLm9uZXJyb3IgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBcImVycm9yXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBmaWxlOiBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyAwOyBzZWUgIzg2MDUsICMxNDIwN1xuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0XG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblx0XHRcdFx0XHRcdFx0XHRcdHhoclN1Y2Nlc3NTdGF0dXNbIHhoci5zdGF0dXMgXSB8fCB4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHQsXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFjY2Vzc2luZyBiaW5hcnktZGF0YSByZXNwb25zZVRleHQgdGhyb3dzIGFuIGV4Y2VwdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gKCMxMTQyNilcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ID09PSBcInN0cmluZ1wiID8ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB4aHIucmVzcG9uc2VUZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHR9IDogdW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHR4aHIub25sb2FkID0gY2FsbGJhY2soKTtcblx0XHRcdFx0eGhyLm9uZXJyb3IgPSBjYWxsYmFjayhcImVycm9yXCIpO1xuXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgYWJvcnQgY2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSB4aHJDYWxsYmFja3NbIGlkIF0gPSBjYWxsYmFjayhcImFib3J0XCIpO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gRG8gc2VuZCB0aGUgcmVxdWVzdCAodGhpcyBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uKVxuXHRcdFx0XHRcdHhoci5zZW5kKCBvcHRpb25zLmhhc0NvbnRlbnQgJiYgb3B0aW9ucy5kYXRhIHx8IG51bGwgKTtcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdFx0Ly8gIzE0NjgzOiBPbmx5IHJldGhyb3cgaWYgdGhpcyBoYXNuJ3QgYmVlbiBub3RpZmllZCBhcyBhbiBlcnJvciB5ZXRcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSk7XG5cblxuXG5cbi8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlXG5qUXVlcnkuYWpheFNldHVwKHtcblx0YWNjZXB0czoge1xuXHRcdHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwiXG5cdH0sXG5cdGNvbnRlbnRzOiB7XG5cdFx0c2NyaXB0OiAvKD86amF2YXxlY21hKXNjcmlwdC9cblx0fSxcblx0Y29udmVydGVyczoge1xuXHRcdFwidGV4dCBzY3JpcHRcIjogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggdGV4dCApO1xuXHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0fVxuXHR9XG59KTtcblxuLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBjcm9zc0RvbWFpblxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRzLmNhY2hlID0gZmFsc2U7XG5cdH1cblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMudHlwZSA9IFwiR0VUXCI7XG5cdH1cbn0pO1xuXG4vLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnRcbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblx0Ly8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiByZXF1ZXN0c1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0dmFyIHNjcmlwdCwgY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBfLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0c2NyaXB0ID0galF1ZXJ5KFwiPHNjcmlwdD5cIikucHJvcCh7XG5cdFx0XHRcdFx0YXN5bmM6IHRydWUsXG5cdFx0XHRcdFx0Y2hhcnNldDogcy5zY3JpcHRDaGFyc2V0LFxuXHRcdFx0XHRcdHNyYzogcy51cmxcblx0XHRcdFx0fSkub24oXG5cdFx0XHRcdFx0XCJsb2FkIGVycm9yXCIsXG5cdFx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkge1xuXHRcdFx0XHRcdFx0c2NyaXB0LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0aWYgKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCBldnQudHlwZSA9PT0gXCJlcnJvclwiID8gNDA0IDogMjAwLCBldnQudHlwZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0WyAwIF0gKTtcblx0XHRcdH0sXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG52YXIgb2xkQ2FsbGJhY2tzID0gW10sXG5cdHJqc29ucCA9IC8oPSlcXD8oPz0mfCQpfFxcP1xcPy87XG5cbi8vIERlZmF1bHQganNvbnAgc2V0dGluZ3NcbmpRdWVyeS5hamF4U2V0dXAoe1xuXHRqc29ucDogXCJjYWxsYmFja1wiLFxuXHRqc29ucENhbGxiYWNrOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgY2FsbGJhY2sgPSBvbGRDYWxsYmFja3MucG9wKCkgfHwgKCBqUXVlcnkuZXhwYW5kbyArIFwiX1wiICsgKCBub25jZSsrICkgKTtcblx0XHR0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTtcblx0XHRyZXR1cm4gY2FsbGJhY2s7XG5cdH1cbn0pO1xuXG4vLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHNcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcImpzb24ganNvbnBcIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkge1xuXG5cdHZhciBjYWxsYmFja05hbWUsIG92ZXJ3cml0dGVuLCByZXNwb25zZUNvbnRhaW5lcixcblx0XHRqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgP1xuXHRcdFx0XCJ1cmxcIiA6XG5cdFx0XHR0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICYmICEoIHMuY29udGVudFR5cGUgfHwgXCJcIiApLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikgJiYgcmpzb25wLnRlc3QoIHMuZGF0YSApICYmIFwiZGF0YVwiXG5cdFx0KTtcblxuXHQvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgXCJqc29ucFwiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0XG5cdGlmICgganNvblByb3AgfHwgcy5kYXRhVHlwZXNbIDAgXSA9PT0gXCJqc29ucFwiICkge1xuXG5cdFx0Ly8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdFxuXHRcdGNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2soKSA6XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHQvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhXG5cdFx0aWYgKCBqc29uUHJvcCApIHtcblx0XHRcdHNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgXCIkMVwiICsgY2FsbGJhY2tOYW1lICk7XG5cdFx0fSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb25cblx0XHRzLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7XG5cdFx0XHRcdGpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgXCIgd2FzIG5vdCBjYWxsZWRcIiApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG5cdFx0fTtcblxuXHRcdC8vIGZvcmNlIGpzb24gZGF0YVR5cGVcblx0XHRzLmRhdGFUeXBlc1sgMCBdID0gXCJqc29uXCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrXG5cdFx0b3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdO1xuXHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzO1xuXHRcdH07XG5cblx0XHQvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycylcblx0XHRqcVhIUi5hbHdheXMoZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBSZXN0b3JlIHByZWV4aXN0aW5nIHZhbHVlXG5cdFx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gb3ZlcndyaXR0ZW47XG5cblx0XHRcdC8vIFNhdmUgYmFjayBhcyBmcmVlXG5cdFx0XHRpZiAoIHNbIGNhbGxiYWNrTmFtZSBdICkge1xuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmRcblx0XHRcdFx0cy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO1xuXG5cdFx0XHRcdC8vIHNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2Vcblx0XHRcdFx0b2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2Vcblx0XHRcdGlmICggcmVzcG9uc2VDb250YWluZXIgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7XG5cdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0fSk7XG5cblx0XHQvLyBEZWxlZ2F0ZSB0byBzY3JpcHRcblx0XHRyZXR1cm4gXCJzY3JpcHRcIjtcblx0fVxufSk7XG5cblxuXG5cbi8vIGRhdGE6IHN0cmluZyBvZiBodG1sXG4vLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsIGRlZmF1bHRzIHRvIGRvY3VtZW50XG4vLyBrZWVwU2NyaXB0cyAob3B0aW9uYWwpOiBJZiB0cnVlLCB3aWxsIGluY2x1ZGUgc2NyaXB0cyBwYXNzZWQgaW4gdGhlIGh0bWwgc3RyaW5nXG5qUXVlcnkucGFyc2VIVE1MID0gZnVuY3Rpb24oIGRhdGEsIGNvbnRleHQsIGtlZXBTY3JpcHRzICkge1xuXHRpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGtlZXBTY3JpcHRzID0gY29udGV4dDtcblx0XHRjb250ZXh0ID0gZmFsc2U7XG5cdH1cblx0Y29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cblx0dmFyIHBhcnNlZCA9IHJzaW5nbGVUYWcuZXhlYyggZGF0YSApLFxuXHRcdHNjcmlwdHMgPSAha2VlcFNjcmlwdHMgJiYgW107XG5cblx0Ly8gU2luZ2xlIHRhZ1xuXHRpZiAoIHBhcnNlZCApIHtcblx0XHRyZXR1cm4gWyBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIHBhcnNlZFsxXSApIF07XG5cdH1cblxuXHRwYXJzZWQgPSBqUXVlcnkuYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblxuXHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcbn07XG5cblxuLy8gS2VlcCBhIGNvcHkgb2YgdGhlIG9sZCBsb2FkIG1ldGhvZFxudmFyIF9sb2FkID0galF1ZXJ5LmZuLmxvYWQ7XG5cbi8qKlxuICogTG9hZCBhIHVybCBpbnRvIGEgcGFnZVxuICovXG5qUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7XG5cdGlmICggdHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIiAmJiBfbG9hZCApIHtcblx0XHRyZXR1cm4gX2xvYWQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHR9XG5cblx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRzZWxmID0gdGhpcyxcblx0XHRvZmYgPSB1cmwuaW5kZXhPZihcIiBcIik7XG5cblx0aWYgKCBvZmYgPj0gMCApIHtcblx0XHRzZWxlY3RvciA9IGpRdWVyeS50cmltKCB1cmwuc2xpY2UoIG9mZiApICk7XG5cdFx0dXJsID0gdXJsLnNsaWNlKCAwLCBvZmYgKTtcblx0fVxuXG5cdC8vIElmIGl0J3MgYSBmdW5jdGlvblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwYXJhbXMgKSApIHtcblxuXHRcdC8vIFdlIGFzc3VtZSB0aGF0IGl0J3MgdGhlIGNhbGxiYWNrXG5cdFx0Y2FsbGJhY2sgPSBwYXJhbXM7XG5cdFx0cGFyYW1zID0gdW5kZWZpbmVkO1xuXG5cdC8vIE90aGVyd2lzZSwgYnVpbGQgYSBwYXJhbSBzdHJpbmdcblx0fSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0dHlwZSA9IFwiUE9TVFwiO1xuXHR9XG5cblx0Ly8gSWYgd2UgaGF2ZSBlbGVtZW50cyB0byBtb2RpZnksIG1ha2UgdGhlIHJlcXVlc3Rcblx0aWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7XG5cdFx0alF1ZXJ5LmFqYXgoe1xuXHRcdFx0dXJsOiB1cmwsXG5cblx0XHRcdC8vIGlmIFwidHlwZVwiIHZhcmlhYmxlIGlzIHVuZGVmaW5lZCwgdGhlbiBcIkdFVFwiIG1ldGhvZCB3aWxsIGJlIHVzZWRcblx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRkYXRhVHlwZTogXCJodG1sXCIsXG5cdFx0XHRkYXRhOiBwYXJhbXNcblx0XHR9KS5kb25lKGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7XG5cblx0XHRcdC8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFja1xuXHRcdFx0cmVzcG9uc2UgPSBhcmd1bWVudHM7XG5cblx0XHRcdHNlbGYuaHRtbCggc2VsZWN0b3IgP1xuXG5cdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHQvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnNcblx0XHRcdFx0alF1ZXJ5KFwiPGRpdj5cIikuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0XG5cdFx0XHRcdHJlc3BvbnNlVGV4dCApO1xuXG5cdFx0fSkuY29tcGxldGUoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xuXHRcdFx0c2VsZi5lYWNoKCBjYWxsYmFjaywgcmVzcG9uc2UgfHwgWyBqcVhIUi5yZXNwb25zZVRleHQsIHN0YXR1cywganFYSFIgXSApO1xuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5cblxuXG4vLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50c1xualF1ZXJ5LmVhY2goIFsgXCJhamF4U3RhcnRcIiwgXCJhamF4U3RvcFwiLCBcImFqYXhDb21wbGV0ZVwiLCBcImFqYXhFcnJvclwiLCBcImFqYXhTdWNjZXNzXCIsIFwiYWpheFNlbmRcIiBdLCBmdW5jdGlvbiggaSwgdHlwZSApIHtcblx0alF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdH07XG59KTtcblxuXG5cblxualF1ZXJ5LmV4cHIuZmlsdGVycy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmdyZXAoalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiBlbGVtID09PSBmbi5lbGVtO1xuXHR9KS5sZW5ndGg7XG59O1xuXG5cblxuXG52YXIgZG9jRWxlbSA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbi8qKlxuICogR2V0cyBhIHdpbmRvdyBmcm9tIGFuIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmlzV2luZG93KCBlbGVtICkgPyBlbGVtIDogZWxlbS5ub2RlVHlwZSA9PT0gOSAmJiBlbGVtLmRlZmF1bHRWaWV3O1xufVxuXG5qUXVlcnkub2Zmc2V0ID0ge1xuXHRzZXRPZmZzZXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBpICkge1xuXHRcdHZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sXG5cdFx0XHRwb3NpdGlvbiA9IGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApLFxuXHRcdFx0Y3VyRWxlbSA9IGpRdWVyeSggZWxlbSApLFxuXHRcdFx0cHJvcHMgPSB7fTtcblxuXHRcdC8vIFNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW1cblx0XHRpZiAoIHBvc2l0aW9uID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcblx0XHR9XG5cblx0XHRjdXJPZmZzZXQgPSBjdXJFbGVtLm9mZnNldCgpO1xuXHRcdGN1ckNTU1RvcCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwidG9wXCIgKTtcblx0XHRjdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJsZWZ0XCIgKTtcblx0XHRjYWxjdWxhdGVQb3NpdGlvbiA9ICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkgJiZcblx0XHRcdCggY3VyQ1NTVG9wICsgY3VyQ1NTTGVmdCApLmluZGV4T2YoXCJhdXRvXCIpID4gLTE7XG5cblx0XHQvLyBOZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlclxuXHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG5cdFx0XHRjdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTtcblx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7XG5cdFx0XHRjdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuXHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMuY2FsbCggZWxlbSwgaSwgY3VyT2Zmc2V0ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDtcblx0XHR9XG5cdFx0aWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLmxlZnQgPSAoIG9wdGlvbnMubGVmdCAtIGN1ck9mZnNldC5sZWZ0ICkgKyBjdXJMZWZ0O1xuXHRcdH1cblxuXHRcdGlmICggXCJ1c2luZ1wiIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0b2Zmc2V0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0dGhpcyA6XG5cdFx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHR2YXIgZG9jRWxlbSwgd2luLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGJveCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH0sXG5cdFx0XHRkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblxuXHRcdGlmICggIWRvYyApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuXHRcdC8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRpc2Nvbm5lY3RlZCBET00gbm9kZVxuXHRcdGlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkge1xuXHRcdFx0cmV0dXJuIGJveDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBCbGFja0JlcnJ5IDUsIGlPUyAzIChvcmlnaW5hbCBpUGhvbmUpXG5cdFx0Ly8gSWYgd2UgZG9uJ3QgaGF2ZSBnQkNSLCBqdXN0IHVzZSAwLDAgcmF0aGVyIHRoYW4gZXJyb3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gc3RydW5kZWZpbmVkICkge1xuXHRcdFx0Ym94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR9XG5cdFx0d2luID0gZ2V0V2luZG93KCBkb2MgKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBib3gudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRUb3AsXG5cdFx0XHRsZWZ0OiBib3gubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsZW0uY2xpZW50TGVmdFxuXHRcdH07XG5cdH0sXG5cblx0cG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIXRoaXNbIDAgXSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0cGFyZW50T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblxuXHRcdC8vIEZpeGVkIGVsZW1lbnRzIGFyZSBvZmZzZXQgZnJvbSB3aW5kb3cgKHBhcmVudE9mZnNldCA9IHt0b3A6MCwgbGVmdDogMH0sIGJlY2F1c2UgaXQgaXMgaXRzIG9ubHkgb2Zmc2V0IHBhcmVudFxuXHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcblx0XHRcdC8vIEFzc3VtZSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdGhlcmUgd2hlbiBjb21wdXRlZCBwb3NpdGlvbiBpcyBmaXhlZFxuXHRcdFx0b2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBHZXQgKnJlYWwqIG9mZnNldFBhcmVudFxuXHRcdFx0b2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQoKTtcblxuXHRcdFx0Ly8gR2V0IGNvcnJlY3Qgb2Zmc2V0c1xuXHRcdFx0b2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTtcblx0XHRcdGlmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50WyAwIF0sIFwiaHRtbFwiICkgKSB7XG5cdFx0XHRcdHBhcmVudE9mZnNldCA9IG9mZnNldFBhcmVudC5vZmZzZXQoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIG9mZnNldFBhcmVudCBib3JkZXJzXG5cdFx0XHRwYXJlbnRPZmZzZXQudG9wICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlclRvcFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdHBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlckxlZnRXaWR0aFwiLCB0cnVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2luc1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5Ub3BcIiwgdHJ1ZSApLFxuXHRcdFx0bGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luTGVmdFwiLCB0cnVlIClcblx0XHR9O1xuXHR9LFxuXG5cdG9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50IHx8IGRvY0VsZW07XG5cblx0XHRcdHdoaWxlICggb2Zmc2V0UGFyZW50ICYmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50LCBcImh0bWxcIiApICYmIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSApIHtcblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2NFbGVtO1xuXHRcdH0pO1xuXHR9XG59KTtcblxuLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdHZhciB0b3AgPSBcInBhZ2VZT2Zmc2V0XCIgPT09IHByb3A7XG5cblx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkge1xuXHRcdFx0dmFyIHdpbiA9IGdldFdpbmRvdyggZWxlbSApO1xuXG5cdFx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gd2luID8gd2luWyBwcm9wIF0gOiBlbGVtWyBtZXRob2QgXTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB3aW4gKSB7XG5cdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHQhdG9wID8gdmFsIDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuXHRcdFx0XHRcdHRvcCA/IHZhbCA6IHdpbmRvdy5wYWdlWU9mZnNldFxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdH1cblx0XHR9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCwgbnVsbCApO1xuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IFNhZmFyaTw3KywgQ2hyb21lPDM3K1xuLy8gQWRkIHRoZSB0b3AvbGVmdCBjc3NIb29rcyB1c2luZyBqUXVlcnkuZm4ucG9zaXRpb25cbi8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NFxuLy8gQmxpbmsgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MjgwXG4vLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0O1xuLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmVcbmpRdWVyeS5lYWNoKCBbIFwidG9wXCIsIFwibGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwcm9wICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7XG5cdFx0XHRcdC8vIElmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldFxuXHRcdFx0XHRyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArIFwicHhcIiA6XG5cdFx0XHRcdFx0Y29tcHV0ZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xufSk7XG5cblxuLy8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBIZWlnaHQ6IFwiaGVpZ2h0XCIsIFdpZHRoOiBcIndpZHRoXCIgfSwgZnVuY3Rpb24oIG5hbWUsIHR5cGUgKSB7XG5cdGpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6IFwiaW5uZXJcIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsIFwiXCI6IFwib3V0ZXJcIiArIG5hbWUgfSwgZnVuY3Rpb24oIGRlZmF1bHRFeHRyYSwgZnVuY05hbWUgKSB7XG5cdFx0Ly8gTWFyZ2luIGlzIG9ubHkgZm9yIG91dGVySGVpZ2h0LCBvdXRlcldpZHRoXG5cdFx0alF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgY2hhaW5hYmxlID0gYXJndW1lbnRzLmxlbmd0aCAmJiAoIGRlZmF1bHRFeHRyYSB8fCB0eXBlb2YgbWFyZ2luICE9PSBcImJvb2xlYW5cIiApLFxuXHRcdFx0XHRleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/IFwibWFyZ2luXCIgOiBcImJvcmRlclwiICk7XG5cblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGRvYztcblxuXHRcdFx0XHRpZiAoIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXHRcdFx0XHRcdC8vIEFzIG9mIDUvOC8yMDEyIHRoaXMgd2lsbCB5aWVsZCBpbmNvcnJlY3QgcmVzdWx0cyBmb3IgTW9iaWxlIFNhZmFyaSwgYnV0IHRoZXJlXG5cdFx0XHRcdFx0Ly8gaXNuJ3QgYSB3aG9sZSBsb3Qgd2UgY2FuIGRvLiBTZWUgcHVsbCByZXF1ZXN0IGF0IHRoaXMgVVJMIGZvciBkaXNjdXNzaW9uOlxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNzY0XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBcImNsaWVudFwiICsgbmFtZSBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGRvY3VtZW50IHdpZHRoIG9yIGhlaWdodFxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sXG5cdFx0XHRcdFx0Ly8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcInNjcm9sbFwiICsgbmFtZSBdLCBkb2NbIFwic2Nyb2xsXCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGRvY1sgXCJjbGllbnRcIiArIG5hbWUgXVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdFx0Ly8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdFxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOlxuXG5cdFx0XHRcdFx0Ly8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7XG5cdFx0XHR9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSwgbnVsbCApO1xuXHRcdH07XG5cdH0pO1xufSk7XG5cblxuLy8gVGhlIG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXRcbmpRdWVyeS5mbi5zaXplID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzLmxlbmd0aDtcbn07XG5cbmpRdWVyeS5mbi5hbmRTZWxmID0galF1ZXJ5LmZuLmFkZEJhY2s7XG5cblxuXG5cbi8vIFJlZ2lzdGVyIGFzIGEgbmFtZWQgQU1EIG1vZHVsZSwgc2luY2UgalF1ZXJ5IGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuLy8gZmlsZXMgdGhhdCBtYXkgdXNlIGRlZmluZSwgYnV0IG5vdCB2aWEgYSBwcm9wZXIgY29uY2F0ZW5hdGlvbiBzY3JpcHQgdGhhdFxuLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0XG4vLyB3YXkgdG8gcmVnaXN0ZXIuIExvd2VyY2FzZSBqcXVlcnkgaXMgdXNlZCBiZWNhdXNlIEFNRCBtb2R1bGUgbmFtZXMgYXJlXG4vLyBkZXJpdmVkIGZyb20gZmlsZSBuYW1lcywgYW5kIGpRdWVyeSBpcyBub3JtYWxseSBkZWxpdmVyZWQgaW4gYSBsb3dlcmNhc2Vcbi8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50c1xuLy8gdG8gY2FsbCBub0NvbmZsaWN0IHRvIGhpZGUgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSwgaXQgd2lsbCB3b3JrLlxuXG4vLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZFxuLy8gZGVjbGFyZSB0aGVtc2VsdmVzIGFzIGFub255bW91cyBtb2R1bGVzLCBhbmQgYXZvaWQgc2V0dGluZyBhIGdsb2JhbCBpZiBhblxuLy8gQU1EIGxvYWRlciBpcyBwcmVzZW50LiBqUXVlcnkgaXMgYSBzcGVjaWFsIGNhc2UuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub25cblxuaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblx0ZGVmaW5lKCBcImpxdWVyeVwiLCBbXSwgZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeTtcblx0fSk7XG59XG5cblxuXG5cbnZhclxuXHQvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0X2pRdWVyeSA9IHdpbmRvdy5qUXVlcnksXG5cblx0Ly8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XyQgPSB3aW5kb3cuJDtcblxualF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHtcblx0aWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy4kID0gXyQ7XG5cdH1cblxuXHRpZiAoIGRlZXAgJiYgd2luZG93LmpRdWVyeSA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5O1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeTtcbn07XG5cbi8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4gQU1EXG4vLyAoIzcxMDIjY29tbWVudDoxMCwgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC81NTcpXG4vLyBhbmQgQ29tbW9uSlMgZm9yIGJyb3dzZXIgZW11bGF0b3JzICgjMTM1NjYpXG5pZiAoIHR5cGVvZiBub0dsb2JhbCA9PT0gc3RydW5kZWZpbmVkICkge1xuXHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG59XG5cblxuXG5cbnJldHVybiBqUXVlcnk7XG5cbn0pKTtcbiIsIi8qIVxuICAgIGxvY2FsRm9yYWdlIC0tIE9mZmxpbmUgU3RvcmFnZSwgSW1wcm92ZWRcbiAgICBWZXJzaW9uIDEuNS4wXG4gICAgaHR0cHM6Ly9sb2NhbGZvcmFnZS5naXRodWIuaW8vbG9jYWxGb3JhZ2VcbiAgICAoYykgMjAxMy0yMDE3IE1vemlsbGEsIEFwYWNoZSBMaWNlbnNlIDIuMFxuKi9cbihmdW5jdGlvbihmKXtpZih0eXBlb2YgZXhwb3J0cz09PVwib2JqZWN0XCImJnR5cGVvZiBtb2R1bGUhPT1cInVuZGVmaW5lZFwiKXttb2R1bGUuZXhwb3J0cz1mKCl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09XCJmdW5jdGlvblwiJiZkZWZpbmUuYW1kKXtkZWZpbmUoW10sZil9ZWxzZXt2YXIgZztpZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIil7Zz1nbG9iYWx9ZWxzZSBpZih0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCIpe2c9c2VsZn1lbHNle2c9dGhpc31nLmxvY2FsZm9yYWdlID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IChmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsIGYpfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xudmFyIE11dGF0aW9uID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG5cbnZhciBzY2hlZHVsZURyYWluO1xuXG57XG4gIGlmIChNdXRhdGlvbikge1xuICAgIHZhciBjYWxsZWQgPSAwO1xuICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbihuZXh0VGljayk7XG4gICAgdmFyIGVsZW1lbnQgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCwge1xuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuICAgIH0pO1xuICAgIHNjaGVkdWxlRHJhaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBlbGVtZW50LmRhdGEgPSAoY2FsbGVkID0gKytjYWxsZWQgJSAyKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKCFnbG9iYWwuc2V0SW1tZWRpYXRlICYmIHR5cGVvZiBnbG9iYWwuTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGNoYW5uZWwgPSBuZXcgZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKCk7XG4gICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBuZXh0VGljaztcbiAgICBzY2hlZHVsZURyYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKCdkb2N1bWVudCcgaW4gZ2xvYmFsICYmICdvbnJlYWR5c3RhdGVjaGFuZ2UnIGluIGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSkge1xuICAgIHNjaGVkdWxlRHJhaW4gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgIHZhciBzY3JpcHRFbCA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIHNjcmlwdEVsLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmV4dFRpY2soKTtcblxuICAgICAgICBzY3JpcHRFbC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICBzY3JpcHRFbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdEVsKTtcbiAgICAgICAgc2NyaXB0RWwgPSBudWxsO1xuICAgICAgfTtcbiAgICAgIGdsb2JhbC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2NyaXB0RWwpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgc2NoZWR1bGVEcmFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldFRpbWVvdXQobmV4dFRpY2ssIDApO1xuICAgIH07XG4gIH1cbn1cblxudmFyIGRyYWluaW5nO1xudmFyIHF1ZXVlID0gW107XG4vL25hbWVkIG5leHRUaWNrIGZvciBsZXNzIGNvbmZ1c2luZyBzdGFjayB0cmFjZXNcbmZ1bmN0aW9uIG5leHRUaWNrKCkge1xuICBkcmFpbmluZyA9IHRydWU7XG4gIHZhciBpLCBvbGRRdWV1ZTtcbiAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgd2hpbGUgKGxlbikge1xuICAgIG9sZFF1ZXVlID0gcXVldWU7XG4gICAgcXVldWUgPSBbXTtcbiAgICBpID0gLTE7XG4gICAgd2hpbGUgKCsraSA8IGxlbikge1xuICAgICAgb2xkUXVldWVbaV0oKTtcbiAgICB9XG4gICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICB9XG4gIGRyYWluaW5nID0gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW1tZWRpYXRlO1xuZnVuY3Rpb24gaW1tZWRpYXRlKHRhc2spIHtcbiAgaWYgKHF1ZXVlLnB1c2godGFzaykgPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgc2NoZWR1bGVEcmFpbigpO1xuICB9XG59XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxufSx7fV0sMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgaW1tZWRpYXRlID0gX2RlcmVxXygxKTtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIElOVEVSTkFMKCkge31cblxudmFyIGhhbmRsZXJzID0ge307XG5cbnZhciBSRUpFQ1RFRCA9IFsnUkVKRUNURUQnXTtcbnZhciBGVUxGSUxMRUQgPSBbJ0ZVTEZJTExFRCddO1xudmFyIFBFTkRJTkcgPSBbJ1BFTkRJTkcnXTtcblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzID0gUHJvbWlzZTtcblxuZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xuICBpZiAodHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncmVzb2x2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cbiAgdGhpcy5zdGF0ZSA9IFBFTkRJTkc7XG4gIHRoaXMucXVldWUgPSBbXTtcbiAgdGhpcy5vdXRjb21lID0gdm9pZCAwO1xuICBpZiAocmVzb2x2ZXIgIT09IElOVEVSTkFMKSB7XG4gICAgc2FmZWx5UmVzb2x2ZVRoZW5hYmxlKHRoaXMsIHJlc29sdmVyKTtcbiAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZVtcImNhdGNoXCJdID0gZnVuY3Rpb24gKG9uUmVqZWN0ZWQpIHtcbiAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTtcbn07XG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIGlmICh0eXBlb2Ygb25GdWxmaWxsZWQgIT09ICdmdW5jdGlvbicgJiYgdGhpcy5zdGF0ZSA9PT0gRlVMRklMTEVEIHx8XG4gICAgdHlwZW9mIG9uUmVqZWN0ZWQgIT09ICdmdW5jdGlvbicgJiYgdGhpcy5zdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB2YXIgcHJvbWlzZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKElOVEVSTkFMKTtcbiAgaWYgKHRoaXMuc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzLnN0YXRlID09PSBGVUxGSUxMRUQgPyBvbkZ1bGZpbGxlZCA6IG9uUmVqZWN0ZWQ7XG4gICAgdW53cmFwKHByb21pc2UsIHJlc29sdmVyLCB0aGlzLm91dGNvbWUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucXVldWUucHVzaChuZXcgUXVldWVJdGVtKHByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSk7XG4gIH1cblxuICByZXR1cm4gcHJvbWlzZTtcbn07XG5mdW5jdGlvbiBRdWV1ZUl0ZW0ocHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgaWYgKHR5cGVvZiBvbkZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMub25GdWxmaWxsZWQgPSBvbkZ1bGZpbGxlZDtcbiAgICB0aGlzLmNhbGxGdWxmaWxsZWQgPSB0aGlzLm90aGVyQ2FsbEZ1bGZpbGxlZDtcbiAgfVxuICBpZiAodHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLm9uUmVqZWN0ZWQgPSBvblJlamVjdGVkO1xuICAgIHRoaXMuY2FsbFJlamVjdGVkID0gdGhpcy5vdGhlckNhbGxSZWplY3RlZDtcbiAgfVxufVxuUXVldWVJdGVtLnByb3RvdHlwZS5jYWxsRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIGhhbmRsZXJzLnJlc29sdmUodGhpcy5wcm9taXNlLCB2YWx1ZSk7XG59O1xuUXVldWVJdGVtLnByb3RvdHlwZS5vdGhlckNhbGxGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgdW53cmFwKHRoaXMucHJvbWlzZSwgdGhpcy5vbkZ1bGZpbGxlZCwgdmFsdWUpO1xufTtcblF1ZXVlSXRlbS5wcm90b3R5cGUuY2FsbFJlamVjdGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIGhhbmRsZXJzLnJlamVjdCh0aGlzLnByb21pc2UsIHZhbHVlKTtcbn07XG5RdWV1ZUl0ZW0ucHJvdG90eXBlLm90aGVyQ2FsbFJlamVjdGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHVud3JhcCh0aGlzLnByb21pc2UsIHRoaXMub25SZWplY3RlZCwgdmFsdWUpO1xufTtcblxuZnVuY3Rpb24gdW53cmFwKHByb21pc2UsIGZ1bmMsIHZhbHVlKSB7XG4gIGltbWVkaWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldHVyblZhbHVlO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm5WYWx1ZSA9IGZ1bmModmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBoYW5kbGVycy5yZWplY3QocHJvbWlzZSwgZSk7XG4gICAgfVxuICAgIGlmIChyZXR1cm5WYWx1ZSA9PT0gcHJvbWlzZSkge1xuICAgICAgaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCByZXNvbHZlIHByb21pc2Ugd2l0aCBpdHNlbGYnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhbmRsZXJzLnJlc29sdmUocHJvbWlzZSwgcmV0dXJuVmFsdWUpO1xuICAgIH1cbiAgfSk7XG59XG5cbmhhbmRsZXJzLnJlc29sdmUgPSBmdW5jdGlvbiAoc2VsZiwgdmFsdWUpIHtcbiAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKGdldFRoZW4sIHZhbHVlKTtcbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdlcnJvcicpIHtcbiAgICByZXR1cm4gaGFuZGxlcnMucmVqZWN0KHNlbGYsIHJlc3VsdC52YWx1ZSk7XG4gIH1cbiAgdmFyIHRoZW5hYmxlID0gcmVzdWx0LnZhbHVlO1xuXG4gIGlmICh0aGVuYWJsZSkge1xuICAgIHNhZmVseVJlc29sdmVUaGVuYWJsZShzZWxmLCB0aGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgc2VsZi5zdGF0ZSA9IEZVTEZJTExFRDtcbiAgICBzZWxmLm91dGNvbWUgPSB2YWx1ZTtcbiAgICB2YXIgaSA9IC0xO1xuICAgIHZhciBsZW4gPSBzZWxmLnF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZSAoKytpIDwgbGVuKSB7XG4gICAgICBzZWxmLnF1ZXVlW2ldLmNhbGxGdWxmaWxsZWQodmFsdWUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2VsZjtcbn07XG5oYW5kbGVycy5yZWplY3QgPSBmdW5jdGlvbiAoc2VsZiwgZXJyb3IpIHtcbiAgc2VsZi5zdGF0ZSA9IFJFSkVDVEVEO1xuICBzZWxmLm91dGNvbWUgPSBlcnJvcjtcbiAgdmFyIGkgPSAtMTtcbiAgdmFyIGxlbiA9IHNlbGYucXVldWUubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbGVuKSB7XG4gICAgc2VsZi5xdWV1ZVtpXS5jYWxsUmVqZWN0ZWQoZXJyb3IpO1xuICB9XG4gIHJldHVybiBzZWxmO1xufTtcblxuZnVuY3Rpb24gZ2V0VGhlbihvYmopIHtcbiAgLy8gTWFrZSBzdXJlIHdlIG9ubHkgYWNjZXNzIHRoZSBhY2Nlc3NvciBvbmNlIGFzIHJlcXVpcmVkIGJ5IHRoZSBzcGVjXG4gIHZhciB0aGVuID0gb2JqICYmIG9iai50aGVuO1xuICBpZiAob2JqICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGFwcHlUaGVuKCkge1xuICAgICAgdGhlbi5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzYWZlbHlSZXNvbHZlVGhlbmFibGUoc2VsZiwgdGhlbmFibGUpIHtcbiAgLy8gRWl0aGVyIGZ1bGZpbGwsIHJlamVjdCBvciByZWplY3Qgd2l0aCBlcnJvclxuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIG9uRXJyb3IodmFsdWUpIHtcbiAgICBpZiAoY2FsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGxlZCA9IHRydWU7XG4gICAgaGFuZGxlcnMucmVqZWN0KHNlbGYsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU3VjY2Vzcyh2YWx1ZSkge1xuICAgIGlmIChjYWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FsbGVkID0gdHJ1ZTtcbiAgICBoYW5kbGVycy5yZXNvbHZlKHNlbGYsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyeVRvVW53cmFwKCkge1xuICAgIHRoZW5hYmxlKG9uU3VjY2Vzcywgb25FcnJvcik7XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godHJ5VG9VbndyYXApO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgIG9uRXJyb3IocmVzdWx0LnZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlDYXRjaChmdW5jLCB2YWx1ZSkge1xuICB2YXIgb3V0ID0ge307XG4gIHRyeSB7XG4gICAgb3V0LnZhbHVlID0gZnVuYyh2YWx1ZSk7XG4gICAgb3V0LnN0YXR1cyA9ICdzdWNjZXNzJztcbiAgfSBjYXRjaCAoZSkge1xuICAgIG91dC5zdGF0dXMgPSAnZXJyb3InO1xuICAgIG91dC52YWx1ZSA9IGU7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0cy5yZXNvbHZlID0gcmVzb2x2ZTtcbmZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgdGhpcykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4gaGFuZGxlcnMucmVzb2x2ZShuZXcgdGhpcyhJTlRFUk5BTCksIHZhbHVlKTtcbn1cblxuZXhwb3J0cy5yZWplY3QgPSByZWplY3Q7XG5mdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gIHZhciBwcm9taXNlID0gbmV3IHRoaXMoSU5URVJOQUwpO1xuICByZXR1cm4gaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG59XG5cbmV4cG9ydHMuYWxsID0gYWxsO1xuZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyYWJsZSkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICByZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcignbXVzdCBiZSBhbiBhcnJheScpKTtcbiAgfVxuXG4gIHZhciBsZW4gPSBpdGVyYWJsZS5sZW5ndGg7XG4gIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgaWYgKCFsZW4pIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtcbiAgfVxuXG4gIHZhciB2YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgdmFyIHJlc29sdmVkID0gMDtcbiAgdmFyIGkgPSAtMTtcbiAgdmFyIHByb21pc2UgPSBuZXcgdGhpcyhJTlRFUk5BTCk7XG5cbiAgd2hpbGUgKCsraSA8IGxlbikge1xuICAgIGFsbFJlc29sdmVyKGl0ZXJhYmxlW2ldLCBpKTtcbiAgfVxuICByZXR1cm4gcHJvbWlzZTtcbiAgZnVuY3Rpb24gYWxsUmVzb2x2ZXIodmFsdWUsIGkpIHtcbiAgICBzZWxmLnJlc29sdmUodmFsdWUpLnRoZW4ocmVzb2x2ZUZyb21BbGwsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBmdW5jdGlvbiByZXNvbHZlRnJvbUFsbChvdXRWYWx1ZSkge1xuICAgICAgdmFsdWVzW2ldID0gb3V0VmFsdWU7XG4gICAgICBpZiAoKytyZXNvbHZlZCA9PT0gbGVuICYmICFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaGFuZGxlcnMucmVzb2x2ZShwcm9taXNlLCB2YWx1ZXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnRzLnJhY2UgPSByYWNlO1xuZnVuY3Rpb24gcmFjZShpdGVyYWJsZSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcmFibGUpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ211c3QgYmUgYW4gYXJyYXknKSk7XG4gIH1cblxuICB2YXIgbGVuID0gaXRlcmFibGUubGVuZ3RoO1xuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIGlmICghbGVuKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZShbXSk7XG4gIH1cblxuICB2YXIgaSA9IC0xO1xuICB2YXIgcHJvbWlzZSA9IG5ldyB0aGlzKElOVEVSTkFMKTtcblxuICB3aGlsZSAoKytpIDwgbGVuKSB7XG4gICAgcmVzb2x2ZXIoaXRlcmFibGVbaV0pO1xuICB9XG4gIHJldHVybiBwcm9taXNlO1xuICBmdW5jdGlvbiByZXNvbHZlcih2YWx1ZSkge1xuICAgIHNlbGYucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgIGhhbmRsZXJzLnJlc29sdmUocHJvbWlzZSwgcmVzcG9uc2UpO1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG59LHtcIjFcIjoxfV0sMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5pZiAodHlwZW9mIGdsb2JhbC5Qcm9taXNlICE9PSAnZnVuY3Rpb24nKSB7XG4gIGdsb2JhbC5Qcm9taXNlID0gX2RlcmVxXygyKTtcbn1cblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG59LHtcIjJcIjoyfV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gZ2V0SURCKCkge1xuICAgIC8qIGdsb2JhbCBpbmRleGVkREIsd2Via2l0SW5kZXhlZERCLG1vekluZGV4ZWREQixPSW5kZXhlZERCLG1zSW5kZXhlZERCICovXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbmRleGVkREIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhlZERCO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygd2Via2l0SW5kZXhlZERCICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHdlYmtpdEluZGV4ZWREQjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG1vekluZGV4ZWREQiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBtb3pJbmRleGVkREI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBPSW5kZXhlZERCICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIE9JbmRleGVkREI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBtc0luZGV4ZWREQiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBtc0luZGV4ZWREQjtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG59XG5cbnZhciBpZGIgPSBnZXRJREIoKTtcblxuZnVuY3Rpb24gaXNJbmRleGVkREJWYWxpZCgpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBJbml0aWFsaXplIEluZGV4ZWREQjsgZmFsbCBiYWNrIHRvIHZlbmRvci1wcmVmaXhlZCB2ZXJzaW9uc1xuICAgICAgICAvLyBpZiBuZWVkZWQuXG4gICAgICAgIGlmICghaWRiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgbWltaWMgUG91Y2hEQiBoZXJlO1xuICAgICAgICAvL1xuICAgICAgICAvLyBXZSB0ZXN0IGZvciBvcGVuRGF0YWJhc2UgYmVjYXVzZSBJRSBNb2JpbGUgaWRlbnRpZmllcyBpdHNlbGZcbiAgICAgICAgLy8gYXMgU2FmYXJpLiBPaCB0aGUgbHVsei4uLlxuICAgICAgICB2YXIgaXNTYWZhcmkgPSB0eXBlb2Ygb3BlbkRhdGFiYXNlICE9PSAndW5kZWZpbmVkJyAmJiAvKFNhZmFyaXxpUGhvbmV8aVBhZHxpUG9kKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL0Nocm9tZS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL0JsYWNrQmVycnkvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTtcblxuICAgICAgICB2YXIgaGFzRmV0Y2ggPSB0eXBlb2YgZmV0Y2ggPT09ICdmdW5jdGlvbicgJiYgZmV0Y2gudG9TdHJpbmcoKS5pbmRleE9mKCdbbmF0aXZlIGNvZGUnKSAhPT0gLTE7XG5cbiAgICAgICAgLy8gU2FmYXJpIDwxMC4xIGRvZXMgbm90IG1lZXQgb3VyIHJlcXVpcmVtZW50cyBmb3IgSURCIHN1cHBvcnQgKCM1NTcyKVxuICAgICAgICAvLyBzaW5jZSBTYWZhcmkgMTAuMSBzaGlwcGVkIHdpdGggZmV0Y2gsIHdlIGNhbiB1c2UgdGhhdCB0byBkZXRlY3QgaXRcbiAgICAgICAgcmV0dXJuICghaXNTYWZhcmkgfHwgaGFzRmV0Y2gpICYmIHR5cGVvZiBpbmRleGVkREIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIC8vIHNvbWUgb3V0ZGF0ZWQgaW1wbGVtZW50YXRpb25zIG9mIElEQiB0aGF0IGFwcGVhciBvbiBTYW1zdW5nXG4gICAgICAgIC8vIGFuZCBIVEMgQW5kcm9pZCBkZXZpY2VzIDw0LjQgYXJlIG1pc3NpbmcgSURCS2V5UmFuZ2VcbiAgICAgICAgdHlwZW9mIElEQktleVJhbmdlICE9PSAndW5kZWZpbmVkJztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzV2ViU1FMVmFsaWQoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvcGVuRGF0YWJhc2UgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTG9jYWxTdG9yYWdlVmFsaWQoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnICYmICdzZXRJdGVtJyBpbiBsb2NhbFN0b3JhZ2UgJiYgbG9jYWxTdG9yYWdlLnNldEl0ZW07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG4vLyBBYnN0cmFjdHMgY29uc3RydWN0aW5nIGEgQmxvYiBvYmplY3QsIHNvIGl0IGFsc28gd29ya3MgaW4gb2xkZXJcbi8vIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCB0aGUgbmF0aXZlIEJsb2IgY29uc3RydWN0b3IuIChpLmUuXG4vLyBvbGQgUXRXZWJLaXQgdmVyc2lvbnMsIGF0IGxlYXN0KS5cbi8vIEFic3RyYWN0cyBjb25zdHJ1Y3RpbmcgYSBCbG9iIG9iamVjdCwgc28gaXQgYWxzbyB3b3JrcyBpbiBvbGRlclxuLy8gYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IHRoZSBuYXRpdmUgQmxvYiBjb25zdHJ1Y3Rvci4gKGkuZS5cbi8vIG9sZCBRdFdlYktpdCB2ZXJzaW9ucywgYXQgbGVhc3QpLlxuZnVuY3Rpb24gY3JlYXRlQmxvYihwYXJ0cywgcHJvcGVydGllcykge1xuICAgIC8qIGdsb2JhbCBCbG9iQnVpbGRlcixNU0Jsb2JCdWlsZGVyLE1vekJsb2JCdWlsZGVyLFdlYktpdEJsb2JCdWlsZGVyICovXG4gICAgcGFydHMgPSBwYXJ0cyB8fCBbXTtcbiAgICBwcm9wZXJ0aWVzID0gcHJvcGVydGllcyB8fCB7fTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IEJsb2IocGFydHMsIHByb3BlcnRpZXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUubmFtZSAhPT0gJ1R5cGVFcnJvcicpIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIEJ1aWxkZXIgPSB0eXBlb2YgQmxvYkJ1aWxkZXIgIT09ICd1bmRlZmluZWQnID8gQmxvYkJ1aWxkZXIgOiB0eXBlb2YgTVNCbG9iQnVpbGRlciAhPT0gJ3VuZGVmaW5lZCcgPyBNU0Jsb2JCdWlsZGVyIDogdHlwZW9mIE1vekJsb2JCdWlsZGVyICE9PSAndW5kZWZpbmVkJyA/IE1vekJsb2JCdWlsZGVyIDogV2ViS2l0QmxvYkJ1aWxkZXI7XG4gICAgICAgIHZhciBidWlsZGVyID0gbmV3IEJ1aWxkZXIoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgYnVpbGRlci5hcHBlbmQocGFydHNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWlsZGVyLmdldEJsb2IocHJvcGVydGllcy50eXBlKTtcbiAgICB9XG59XG5cbi8vIFRoaXMgaXMgQ29tbW9uSlMgYmVjYXVzZSBsaWUgaXMgYW4gZXh0ZXJuYWwgZGVwZW5kZW5jeSwgc28gUm9sbHVwXG4vLyBjYW4ganVzdCBpZ25vcmUgaXQuXG5pZiAodHlwZW9mIFByb21pc2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gSW4gdGhlIFwibm9wcm9taXNlc1wiIGJ1aWxkIHRoaXMgd2lsbCBqdXN0IHRocm93IGlmIHlvdSBkb24ndCBoYXZlXG4gICAgLy8gYSBnbG9iYWwgcHJvbWlzZSBvYmplY3QsIGJ1dCBpdCB3b3VsZCB0aHJvdyBhbnl3YXkgbGF0ZXIuXG4gICAgX2RlcmVxXygzKTtcbn1cbnZhciBQcm9taXNlJDEgPSBQcm9taXNlO1xuXG5mdW5jdGlvbiBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVUd29DYWxsYmFja3MocHJvbWlzZSwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHByb21pc2UudGhlbihjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBlcnJvckNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHByb21pc2VbXCJjYXRjaFwiXShlcnJvckNhbGxiYWNrKTtcbiAgICB9XG59XG5cbi8vIFNvbWUgY29kZSBvcmlnaW5hbGx5IGZyb20gYXN5bmNfc3RvcmFnZS5qcyBpblxuLy8gW0dhaWFdKGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhLWIyZy9nYWlhKS5cblxudmFyIERFVEVDVF9CTE9CX1NVUFBPUlRfU1RPUkUgPSAnbG9jYWwtZm9yYWdlLWRldGVjdC1ibG9iLXN1cHBvcnQnO1xudmFyIHN1cHBvcnRzQmxvYnM7XG52YXIgZGJDb250ZXh0cztcbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8vIFRyYW5zZm9ybSBhIGJpbmFyeSBzdHJpbmcgdG8gYW4gYXJyYXkgYnVmZmVyLCBiZWNhdXNlIG90aGVyd2lzZVxuLy8gd2VpcmQgc3R1ZmYgaGFwcGVucyB3aGVuIHlvdSB0cnkgdG8gd29yayB3aXRoIHRoZSBiaW5hcnkgc3RyaW5nIGRpcmVjdGx5LlxuLy8gSXQgaXMga25vd24uXG4vLyBGcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTQ5Njc2NDcvIChjb250aW51ZXMgb24gbmV4dCBsaW5lKVxuLy8gZW5jb2RlLWRlY29kZS1pbWFnZS13aXRoLWJhc2U2NC1icmVha3MtaW1hZ2UgKDIwMTMtMDQtMjEpXG5mdW5jdGlvbiBfYmluU3RyaW5nVG9BcnJheUJ1ZmZlcihiaW4pIHtcbiAgICB2YXIgbGVuZ3RoID0gYmluLmxlbmd0aDtcbiAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKGxlbmd0aCk7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcnJbaV0gPSBiaW4uY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ1Zjtcbn1cblxuLy9cbi8vIEJsb2JzIGFyZSBub3Qgc3VwcG9ydGVkIGluIGFsbCB2ZXJzaW9ucyBvZiBJbmRleGVkREIsIG5vdGFibHlcbi8vIENocm9tZSA8MzcgYW5kIEFuZHJvaWQgPDUuIEluIHRob3NlIHZlcnNpb25zLCBzdG9yaW5nIGEgYmxvYiB3aWxsIHRocm93LlxuLy9cbi8vIFZhcmlvdXMgb3RoZXIgYmxvYiBidWdzIGV4aXN0IGluIENocm9tZSB2MzctNDIgKGluY2x1c2l2ZSkuXG4vLyBEZXRlY3RpbmcgdGhlbSBpcyBleHBlbnNpdmUgYW5kIGNvbmZ1c2luZyB0byB1c2VycywgYW5kIENocm9tZSAzNy00MlxuLy8gaXMgYXQgdmVyeSBsb3cgdXNhZ2Ugd29ybGR3aWRlLCBzbyB3ZSBkbyBhIGhhY2t5IHVzZXJBZ2VudCBjaGVjayBpbnN0ZWFkLlxuLy9cbi8vIGNvbnRlbnQtdHlwZSBidWc6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00MDgxMjBcbi8vIDQwNCBidWc6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDc5MTZcbi8vIEZpbGVSZWFkZXIgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDQ3ODM2XG4vL1xuLy8gQ29kZSBib3Jyb3dlZCBmcm9tIFBvdWNoREIuIFNlZTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3VjaGRiL3BvdWNoZGIvYmxvYi9tYXN0ZXIvcGFja2FnZXMvbm9kZV9tb2R1bGVzL3BvdWNoZGItYWRhcHRlci1pZGIvc3JjL2Jsb2JTdXBwb3J0LmpzXG4vL1xuZnVuY3Rpb24gX2NoZWNrQmxvYlN1cHBvcnRXaXRob3V0Q2FjaGluZyhpZGIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICB2YXIgdHhuID0gaWRiLnRyYW5zYWN0aW9uKERFVEVDVF9CTE9CX1NVUFBPUlRfU1RPUkUsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgdmFyIGJsb2IgPSBjcmVhdGVCbG9iKFsnJ10pO1xuICAgICAgICB0eG4ub2JqZWN0U3RvcmUoREVURUNUX0JMT0JfU1VQUE9SVF9TVE9SRSkucHV0KGJsb2IsICdrZXknKTtcblxuICAgICAgICB0eG4ub25hYm9ydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgdHJhbnNhY3Rpb24gYWJvcnRzIG5vdyBpdHMgZHVlIHRvIG5vdCBiZWluZyBhYmxlIHRvXG4gICAgICAgICAgICAvLyB3cml0ZSB0byB0aGUgZGF0YWJhc2UsIGxpa2VseSBkdWUgdG8gdGhlIGRpc2sgYmVpbmcgZnVsbFxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHR4bi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1hdGNoZWRDaHJvbWUgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcXC8oXFxkKykvKTtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkRWRnZSA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0VkZ2VcXC8vKTtcbiAgICAgICAgICAgIC8vIE1TIEVkZ2UgcHJldGVuZHMgdG8gYmUgQ2hyb21lIDQyOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9oaDg2OTMwMSUyOHY9dnMuODUlMjkuYXNweFxuICAgICAgICAgICAgcmVzb2x2ZShtYXRjaGVkRWRnZSB8fCAhbWF0Y2hlZENocm9tZSB8fCBwYXJzZUludChtYXRjaGVkQ2hyb21lWzFdLCAxMCkgPj0gNDMpO1xuICAgICAgICB9O1xuICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIGVycm9yLCBzbyBhc3N1bWUgdW5zdXBwb3J0ZWRcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gX2NoZWNrQmxvYlN1cHBvcnQoaWRiKSB7XG4gICAgaWYgKHR5cGVvZiBzdXBwb3J0c0Jsb2JzID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UkMS5yZXNvbHZlKHN1cHBvcnRzQmxvYnMpO1xuICAgIH1cbiAgICByZXR1cm4gX2NoZWNrQmxvYlN1cHBvcnRXaXRob3V0Q2FjaGluZyhpZGIpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHN1cHBvcnRzQmxvYnMgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHN1cHBvcnRzQmxvYnM7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIF9kZWZlclJlYWRpbmVzcyhkYkluZm8pIHtcbiAgICB2YXIgZGJDb250ZXh0ID0gZGJDb250ZXh0c1tkYkluZm8ubmFtZV07XG5cbiAgICAvLyBDcmVhdGUgYSBkZWZlcnJlZCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IGRhdGFiYXNlIG9wZXJhdGlvbi5cbiAgICB2YXIgZGVmZXJyZWRPcGVyYXRpb24gPSB7fTtcblxuICAgIGRlZmVycmVkT3BlcmF0aW9uLnByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIGRlZmVycmVkT3BlcmF0aW9uLnJlc29sdmUgPSByZXNvbHZlO1xuICAgIH0pO1xuXG4gICAgLy8gRW5xdWV1ZSB0aGUgZGVmZXJyZWQgb3BlcmF0aW9uLlxuICAgIGRiQ29udGV4dC5kZWZlcnJlZE9wZXJhdGlvbnMucHVzaChkZWZlcnJlZE9wZXJhdGlvbik7XG5cbiAgICAvLyBDaGFpbiBpdHMgcHJvbWlzZSB0byB0aGUgZGF0YWJhc2UgcmVhZGluZXNzLlxuICAgIGlmICghZGJDb250ZXh0LmRiUmVhZHkpIHtcbiAgICAgICAgZGJDb250ZXh0LmRiUmVhZHkgPSBkZWZlcnJlZE9wZXJhdGlvbi5wcm9taXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRiQ29udGV4dC5kYlJlYWR5ID0gZGJDb250ZXh0LmRiUmVhZHkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWRPcGVyYXRpb24ucHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfYWR2YW5jZVJlYWRpbmVzcyhkYkluZm8pIHtcbiAgICB2YXIgZGJDb250ZXh0ID0gZGJDb250ZXh0c1tkYkluZm8ubmFtZV07XG5cbiAgICAvLyBEZXF1ZXVlIGEgZGVmZXJyZWQgb3BlcmF0aW9uLlxuICAgIHZhciBkZWZlcnJlZE9wZXJhdGlvbiA9IGRiQ29udGV4dC5kZWZlcnJlZE9wZXJhdGlvbnMucG9wKCk7XG5cbiAgICAvLyBSZXNvbHZlIGl0cyBwcm9taXNlICh3aGljaCBpcyBwYXJ0IG9mIHRoZSBkYXRhYmFzZSByZWFkaW5lc3NcbiAgICAvLyBjaGFpbiBvZiBwcm9taXNlcykuXG4gICAgaWYgKGRlZmVycmVkT3BlcmF0aW9uKSB7XG4gICAgICAgIGRlZmVycmVkT3BlcmF0aW9uLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9nZXRDb25uZWN0aW9uKGRiSW5mbywgdXBncmFkZU5lZWRlZCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblxuICAgICAgICBpZiAoZGJJbmZvLmRiKSB7XG4gICAgICAgICAgICBpZiAodXBncmFkZU5lZWRlZCkge1xuICAgICAgICAgICAgICAgIF9kZWZlclJlYWRpbmVzcyhkYkluZm8pO1xuICAgICAgICAgICAgICAgIGRiSW5mby5kYi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYkluZm8uZGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRiQXJncyA9IFtkYkluZm8ubmFtZV07XG5cbiAgICAgICAgaWYgKHVwZ3JhZGVOZWVkZWQpIHtcbiAgICAgICAgICAgIGRiQXJncy5wdXNoKGRiSW5mby52ZXJzaW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvcGVucmVxID0gaWRiLm9wZW4uYXBwbHkoaWRiLCBkYkFyZ3MpO1xuXG4gICAgICAgIGlmICh1cGdyYWRlTmVlZGVkKSB7XG4gICAgICAgICAgICBvcGVucmVxLm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRiID0gb3BlbnJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoZGJJbmZvLnN0b3JlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLm9sZFZlcnNpb24gPD0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkZWQgd2hlbiBzdXBwb3J0IGZvciBibG9iIHNoaW1zIHdhcyBhZGRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoREVURUNUX0JMT0JfU1VQUE9SVF9TVE9SRSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXgubmFtZSA9PT0gJ0NvbnN0cmFpbnRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVGhlIGRhdGFiYXNlIFwiJyArIGRiSW5mby5uYW1lICsgJ1wiJyArICcgaGFzIGJlZW4gdXBncmFkZWQgZnJvbSB2ZXJzaW9uICcgKyBlLm9sZFZlcnNpb24gKyAnIHRvIHZlcnNpb24gJyArIGUubmV3VmVyc2lvbiArICcsIGJ1dCB0aGUgc3RvcmFnZSBcIicgKyBkYkluZm8uc3RvcmVOYW1lICsgJ1wiIGFscmVhZHkgZXhpc3RzLicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgb3BlbnJlcS5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJlamVjdChvcGVucmVxLmVycm9yKTtcbiAgICAgICAgfTtcblxuICAgICAgICBvcGVucmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc29sdmUob3BlbnJlcS5yZXN1bHQpO1xuICAgICAgICAgICAgX2FkdmFuY2VSZWFkaW5lc3MoZGJJbmZvKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gX2dldE9yaWdpbmFsQ29ubmVjdGlvbihkYkluZm8pIHtcbiAgICByZXR1cm4gX2dldENvbm5lY3Rpb24oZGJJbmZvLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIF9nZXRVcGdyYWRlZENvbm5lY3Rpb24oZGJJbmZvKSB7XG4gICAgcmV0dXJuIF9nZXRDb25uZWN0aW9uKGRiSW5mbywgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIF9pc1VwZ3JhZGVOZWVkZWQoZGJJbmZvLCBkZWZhdWx0VmVyc2lvbikge1xuICAgIGlmICghZGJJbmZvLmRiKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBpc05ld1N0b3JlID0gIWRiSW5mby5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKGRiSW5mby5zdG9yZU5hbWUpO1xuICAgIHZhciBpc0Rvd25ncmFkZSA9IGRiSW5mby52ZXJzaW9uIDwgZGJJbmZvLmRiLnZlcnNpb247XG4gICAgdmFyIGlzVXBncmFkZSA9IGRiSW5mby52ZXJzaW9uID4gZGJJbmZvLmRiLnZlcnNpb247XG5cbiAgICBpZiAoaXNEb3duZ3JhZGUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHZlcnNpb24gaXMgbm90IHRoZSBkZWZhdWx0IG9uZVxuICAgICAgICAvLyB0aGVuIHdhcm4gZm9yIGltcG9zc2libGUgZG93bmdyYWRlLlxuICAgICAgICBpZiAoZGJJbmZvLnZlcnNpb24gIT09IGRlZmF1bHRWZXJzaW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBkYXRhYmFzZSBcIicgKyBkYkluZm8ubmFtZSArICdcIicgKyAnIGNhblxcJ3QgYmUgZG93bmdyYWRlZCBmcm9tIHZlcnNpb24gJyArIGRiSW5mby5kYi52ZXJzaW9uICsgJyB0byB2ZXJzaW9uICcgKyBkYkluZm8udmVyc2lvbiArICcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWxpZ24gdGhlIHZlcnNpb25zIHRvIHByZXZlbnQgZXJyb3JzLlxuICAgICAgICBkYkluZm8udmVyc2lvbiA9IGRiSW5mby5kYi52ZXJzaW9uO1xuICAgIH1cblxuICAgIGlmIChpc1VwZ3JhZGUgfHwgaXNOZXdTdG9yZSkge1xuICAgICAgICAvLyBJZiB0aGUgc3RvcmUgaXMgbmV3IHRoZW4gaW5jcmVtZW50IHRoZSB2ZXJzaW9uIChpZiBuZWVkZWQpLlxuICAgICAgICAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhbiBcInVwZ3JhZGVuZWVkZWRcIiBldmVudCB3aGljaCBpcyByZXF1aXJlZFxuICAgICAgICAvLyBmb3IgY3JlYXRpbmcgYSBzdG9yZS5cbiAgICAgICAgaWYgKGlzTmV3U3RvcmUpIHtcbiAgICAgICAgICAgIHZhciBpbmNWZXJzaW9uID0gZGJJbmZvLmRiLnZlcnNpb24gKyAxO1xuICAgICAgICAgICAgaWYgKGluY1ZlcnNpb24gPiBkYkluZm8udmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGRiSW5mby52ZXJzaW9uID0gaW5jVmVyc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLy8gZW5jb2RlIGEgYmxvYiBmb3IgaW5kZXhlZGRiIGVuZ2luZXMgdGhhdCBkb24ndCBzdXBwb3J0IGJsb2JzXG5mdW5jdGlvbiBfZW5jb2RlQmxvYihibG9iKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJ0b2EoZS50YXJnZXQucmVzdWx0IHx8ICcnKTtcbiAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgIF9fbG9jYWxfZm9yYWdlX2VuY29kZWRfYmxvYjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBiYXNlNjQsXG4gICAgICAgICAgICAgICAgdHlwZTogYmxvYi50eXBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhibG9iKTtcbiAgICB9KTtcbn1cblxuLy8gZGVjb2RlIGFuIGVuY29kZWQgYmxvYlxuZnVuY3Rpb24gX2RlY29kZUJsb2IoZW5jb2RlZEJsb2IpIHtcbiAgICB2YXIgYXJyYXlCdWZmID0gX2JpblN0cmluZ1RvQXJyYXlCdWZmZXIoYXRvYihlbmNvZGVkQmxvYi5kYXRhKSk7XG4gICAgcmV0dXJuIGNyZWF0ZUJsb2IoW2FycmF5QnVmZl0sIHsgdHlwZTogZW5jb2RlZEJsb2IudHlwZSB9KTtcbn1cblxuLy8gaXMgdGhpcyBvbmUgb2Ygb3VyIGZhbmN5IGVuY29kZWQgYmxvYnM/XG5mdW5jdGlvbiBfaXNFbmNvZGVkQmxvYih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB2YWx1ZS5fX2xvY2FsX2ZvcmFnZV9lbmNvZGVkX2Jsb2I7XG59XG5cbi8vIFNwZWNpYWxpemUgdGhlIGRlZmF1bHQgYHJlYWR5KClgIGZ1bmN0aW9uIGJ5IG1ha2luZyBpdCBkZXBlbmRlbnRcbi8vIG9uIHRoZSBjdXJyZW50IGRhdGFiYXNlIG9wZXJhdGlvbnMuIFRodXMsIHRoZSBkcml2ZXIgd2lsbCBiZSBhY3R1YWxseVxuLy8gcmVhZHkgd2hlbiBpdCdzIGJlZW4gaW5pdGlhbGl6ZWQgKGRlZmF1bHQpICphbmQqIHRoZXJlIGFyZSBubyBwZW5kaW5nXG4vLyBvcGVyYXRpb25zIG9uIHRoZSBkYXRhYmFzZSAoaW5pdGlhdGVkIGJ5IHNvbWUgb3RoZXIgaW5zdGFuY2VzKS5cbmZ1bmN0aW9uIF9mdWxseVJlYWR5KGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBzZWxmLl9pbml0UmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiQ29udGV4dCA9IGRiQ29udGV4dHNbc2VsZi5fZGJJbmZvLm5hbWVdO1xuXG4gICAgICAgIGlmIChkYkNvbnRleHQgJiYgZGJDb250ZXh0LmRiUmVhZHkpIHtcbiAgICAgICAgICAgIHJldHVybiBkYkNvbnRleHQuZGJSZWFkeTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyhwcm9taXNlLCBjYWxsYmFjaywgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBPcGVuIHRoZSBJbmRleGVkREIgZGF0YWJhc2UgKGF1dG9tYXRpY2FsbHkgY3JlYXRlcyBvbmUgaWYgb25lIGRpZG4ndFxuLy8gcHJldmlvdXNseSBleGlzdCksIHVzaW5nIGFueSBvcHRpb25zIHNldCBpbiB0aGUgY29uZmlnLlxuZnVuY3Rpb24gX2luaXRTdG9yYWdlKG9wdGlvbnMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGRiSW5mbyA9IHtcbiAgICAgICAgZGI6IG51bGxcbiAgICB9O1xuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBkYkluZm9baV0gPSBvcHRpb25zW2ldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBhIHNpbmdsZXRvbiBjb250YWluZXIgZm9yIGFsbCBydW5uaW5nIGxvY2FsRm9yYWdlcy5cbiAgICBpZiAoIWRiQ29udGV4dHMpIHtcbiAgICAgICAgZGJDb250ZXh0cyA9IHt9O1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgY3VycmVudCBjb250ZXh0IG9mIHRoZSBkYXRhYmFzZTtcbiAgICB2YXIgZGJDb250ZXh0ID0gZGJDb250ZXh0c1tkYkluZm8ubmFtZV07XG5cbiAgICAvLyAuLi5vciBjcmVhdGUgYSBuZXcgY29udGV4dC5cbiAgICBpZiAoIWRiQ29udGV4dCkge1xuICAgICAgICBkYkNvbnRleHQgPSB7XG4gICAgICAgICAgICAvLyBSdW5uaW5nIGxvY2FsRm9yYWdlcyBzaGFyaW5nIGEgZGF0YWJhc2UuXG4gICAgICAgICAgICBmb3JhZ2VzOiBbXSxcbiAgICAgICAgICAgIC8vIFNoYXJlZCBkYXRhYmFzZS5cbiAgICAgICAgICAgIGRiOiBudWxsLFxuICAgICAgICAgICAgLy8gRGF0YWJhc2UgcmVhZGluZXNzIChwcm9taXNlKS5cbiAgICAgICAgICAgIGRiUmVhZHk6IG51bGwsXG4gICAgICAgICAgICAvLyBEZWZlcnJlZCBvcGVyYXRpb25zIG9uIHRoZSBkYXRhYmFzZS5cbiAgICAgICAgICAgIGRlZmVycmVkT3BlcmF0aW9uczogW11cbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVnaXN0ZXIgdGhlIG5ldyBjb250ZXh0IGluIHRoZSBnbG9iYWwgY29udGFpbmVyLlxuICAgICAgICBkYkNvbnRleHRzW2RiSW5mby5uYW1lXSA9IGRiQ29udGV4dDtcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RlciBpdHNlbGYgYXMgYSBydW5uaW5nIGxvY2FsRm9yYWdlIGluIHRoZSBjdXJyZW50IGNvbnRleHQuXG4gICAgZGJDb250ZXh0LmZvcmFnZXMucHVzaChzZWxmKTtcblxuICAgIC8vIFJlcGxhY2UgdGhlIGRlZmF1bHQgYHJlYWR5KClgIGZ1bmN0aW9uIHdpdGggdGhlIHNwZWNpYWxpemVkIG9uZS5cbiAgICBpZiAoIXNlbGYuX2luaXRSZWFkeSkge1xuICAgICAgICBzZWxmLl9pbml0UmVhZHkgPSBzZWxmLnJlYWR5O1xuICAgICAgICBzZWxmLnJlYWR5ID0gX2Z1bGx5UmVhZHk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuIGFycmF5IG9mIGluaXRpYWxpemF0aW9uIHN0YXRlcyBvZiB0aGUgcmVsYXRlZCBsb2NhbEZvcmFnZXMuXG4gICAgdmFyIGluaXRQcm9taXNlcyA9IFtdO1xuXG4gICAgZnVuY3Rpb24gaWdub3JlRXJyb3JzKCkge1xuICAgICAgICAvLyBEb24ndCBoYW5kbGUgZXJyb3JzIGhlcmUsXG4gICAgICAgIC8vIGp1c3QgbWFrZXMgc3VyZSByZWxhdGVkIGxvY2FsRm9yYWdlcyBhcmVuJ3QgcGVuZGluZy5cbiAgICAgICAgcmV0dXJuIFByb21pc2UkMS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBkYkNvbnRleHQuZm9yYWdlcy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZm9yYWdlID0gZGJDb250ZXh0LmZvcmFnZXNbal07XG4gICAgICAgIGlmIChmb3JhZ2UgIT09IHNlbGYpIHtcbiAgICAgICAgICAgIC8vIERvbid0IHdhaXQgZm9yIGl0c2VsZi4uLlxuICAgICAgICAgICAgaW5pdFByb21pc2VzLnB1c2goZm9yYWdlLl9pbml0UmVhZHkoKVtcImNhdGNoXCJdKGlnbm9yZUVycm9ycykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGFrZSBhIHNuYXBzaG90IG9mIHRoZSByZWxhdGVkIGxvY2FsRm9yYWdlcy5cbiAgICB2YXIgZm9yYWdlcyA9IGRiQ29udGV4dC5mb3JhZ2VzLnNsaWNlKDApO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgY29ubmVjdGlvbiBwcm9jZXNzIG9ubHkgd2hlblxuICAgIC8vIGFsbCB0aGUgcmVsYXRlZCBsb2NhbEZvcmFnZXMgYXJlbid0IHBlbmRpbmcuXG4gICAgcmV0dXJuIFByb21pc2UkMS5hbGwoaW5pdFByb21pc2VzKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGJJbmZvLmRiID0gZGJDb250ZXh0LmRiO1xuICAgICAgICAvLyBHZXQgdGhlIGNvbm5lY3Rpb24gb3Igb3BlbiBhIG5ldyBvbmUgd2l0aG91dCB1cGdyYWRlLlxuICAgICAgICByZXR1cm4gX2dldE9yaWdpbmFsQ29ubmVjdGlvbihkYkluZm8pO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRiKSB7XG4gICAgICAgIGRiSW5mby5kYiA9IGRiO1xuICAgICAgICBpZiAoX2lzVXBncmFkZU5lZWRlZChkYkluZm8sIHNlbGYuX2RlZmF1bHRDb25maWcudmVyc2lvbikpIHtcbiAgICAgICAgICAgIC8vIFJlb3BlbiB0aGUgZGF0YWJhc2UgZm9yIHVwZ3JhZGluZy5cbiAgICAgICAgICAgIHJldHVybiBfZ2V0VXBncmFkZWRDb25uZWN0aW9uKGRiSW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRiO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRiKSB7XG4gICAgICAgIGRiSW5mby5kYiA9IGRiQ29udGV4dC5kYiA9IGRiO1xuICAgICAgICBzZWxmLl9kYkluZm8gPSBkYkluZm87XG4gICAgICAgIC8vIFNoYXJlIHRoZSBmaW5hbCBjb25uZWN0aW9uIGFtb25nc3QgcmVsYXRlZCBsb2NhbEZvcmFnZXMuXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZm9yYWdlcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgdmFyIGZvcmFnZSA9IGZvcmFnZXNba107XG4gICAgICAgICAgICBpZiAoZm9yYWdlICE9PSBzZWxmKSB7XG4gICAgICAgICAgICAgICAgLy8gU2VsZiBpcyBhbHJlYWR5IHVwLXRvLWRhdGUuXG4gICAgICAgICAgICAgICAgZm9yYWdlLl9kYkluZm8uZGIgPSBkYkluZm8uZGI7XG4gICAgICAgICAgICAgICAgZm9yYWdlLl9kYkluZm8udmVyc2lvbiA9IGRiSW5mby52ZXJzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEl0ZW0oa2V5LCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIENhc3QgdGhlIGtleSB0byBhIHN0cmluZywgYXMgdGhhdCdzIGFsbCB3ZSBjYW4gc2V0IGFzIGEga2V5LlxuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLndhcm4oa2V5ICsgJyB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgICBrZXkgPSBTdHJpbmcoa2V5KTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGRiSW5mby5zdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKGRiSW5mby5zdG9yZU5hbWUpO1xuICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLmdldChrZXkpO1xuXG4gICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoX2lzRW5jb2RlZEJsb2IodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX2RlY29kZUJsb2IodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChyZXEuZXJyb3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gSXRlcmF0ZSBvdmVyIGFsbCBpdGVtcyBzdG9yZWQgaW4gZGF0YWJhc2UuXG5mdW5jdGlvbiBpdGVyYXRlKGl0ZXJhdG9yLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSBkYkluZm8uZGIudHJhbnNhY3Rpb24oZGJJbmZvLnN0b3JlTmFtZSwgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoZGJJbmZvLnN0b3JlTmFtZSk7XG5cbiAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZS5vcGVuQ3Vyc29yKCk7XG4gICAgICAgICAgICB2YXIgaXRlcmF0aW9uTnVtYmVyID0gMTtcblxuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxLnJlc3VsdDtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY3Vyc29yLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2lzRW5jb2RlZEJsb2IodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IF9kZWNvZGVCbG9iKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IodmFsdWUsIGN1cnNvci5rZXksIGl0ZXJhdGlvbk51bWJlcisrKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcltcImNvbnRpbnVlXCJdKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuXG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGRiSW5mbztcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgaWYgKHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBCbG9iXScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NoZWNrQmxvYlN1cHBvcnQoZGJJbmZvLmRiKS50aGVuKGZ1bmN0aW9uIChibG9iU3VwcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmxvYlN1cHBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2VuY29kZUJsb2IodmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uID0gZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGRiSW5mby5zdG9yZU5hbWUsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKGRiSW5mby5zdG9yZU5hbWUpO1xuICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLnB1dCh2YWx1ZSwga2V5KTtcblxuICAgICAgICAgICAgLy8gVGhlIHJlYXNvbiB3ZSBkb24ndCBfc2F2ZV8gbnVsbCBpcyBiZWNhdXNlIElFIDEwIGRvZXNcbiAgICAgICAgICAgIC8vIG5vdCBzdXBwb3J0IHNhdmluZyB0aGUgYG51bGxgIHR5cGUgaW4gSW5kZXhlZERCLiBIb3dcbiAgICAgICAgICAgIC8vIGlyb25pYywgZ2l2ZW4gdGhlIGJ1ZyBiZWxvdyFcbiAgICAgICAgICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvbG9jYWxGb3JhZ2UvaXNzdWVzLzE2MVxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2FzdCB0byB1bmRlZmluZWQgc28gdGhlIHZhbHVlIHBhc3NlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrL3Byb21pc2UgaXMgdGhlIHNhbWUgYXMgd2hhdCBvbmUgd291bGQgZ2V0IG91dFxuICAgICAgICAgICAgICAgIC8vIG9mIGBnZXRJdGVtKClgIGxhdGVyLiBUaGlzIGxlYWRzIHRvIHNvbWUgd2VpcmRuZXNzXG4gICAgICAgICAgICAgICAgLy8gKHNldEl0ZW0oJ2ZvbycsIHVuZGVmaW5lZCkgd2lsbCByZXR1cm4gYG51bGxgKSwgYnV0XG4gICAgICAgICAgICAgICAgLy8gaXQncyBub3QgbXkgZmF1bHQgbG9jYWxTdG9yYWdlIGlzIG91ciBiYXNlbGluZSBhbmQgdGhhdFxuICAgICAgICAgICAgICAgIC8vIGl0J3Mgd2VpcmQuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uYWJvcnQgPSB0cmFuc2FjdGlvbi5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBlcnIgPSByZXEuZXJyb3IgPyByZXEuZXJyb3IgOiByZXEudHJhbnNhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVJdGVtKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiA9IGRiSW5mby5kYi50cmFuc2FjdGlvbihkYkluZm8uc3RvcmVOYW1lLCAncmVhZHdyaXRlJyk7XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShkYkluZm8uc3RvcmVOYW1lKTtcblxuICAgICAgICAgICAgLy8gV2UgdXNlIGEgR3J1bnQgdGFzayB0byBtYWtlIHRoaXMgc2FmZSBmb3IgSUUgYW5kIHNvbWVcbiAgICAgICAgICAgIC8vIHZlcnNpb25zIG9mIEFuZHJvaWQgKGluY2x1ZGluZyB0aG9zZSB1c2VkIGJ5IENvcmRvdmEpLlxuICAgICAgICAgICAgLy8gTm9ybWFsbHkgSUUgd29uJ3QgbGlrZSBgLmRlbGV0ZSgpYCBhbmQgd2lsbCBpbnNpc3Qgb25cbiAgICAgICAgICAgIC8vIHVzaW5nIGBbJ2RlbGV0ZSddKClgLCBidXQgd2UgaGF2ZSBhIGJ1aWxkIHN0ZXAgdGhhdFxuICAgICAgICAgICAgLy8gZml4ZXMgdGhpcyBmb3IgdXMgbm93LlxuICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlW1wiZGVsZXRlXCJdKGtleSk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBUaGUgcmVxdWVzdCB3aWxsIGJlIGFsc28gYmUgYWJvcnRlZCBpZiB3ZSd2ZSBleGNlZWRlZCBvdXIgc3RvcmFnZVxuICAgICAgICAgICAgLy8gc3BhY2UuXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBlcnIgPSByZXEuZXJyb3IgPyByZXEuZXJyb3IgOiByZXEudHJhbnNhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBjbGVhcihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb24gPSBkYkluZm8uZGIudHJhbnNhY3Rpb24oZGJJbmZvLnN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpO1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoZGJJbmZvLnN0b3JlTmFtZSk7XG4gICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUuY2xlYXIoKTtcblxuICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmFib3J0ID0gdHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyID0gcmVxLmVycm9yID8gcmVxLmVycm9yIDogcmVxLnRyYW5zYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbGVuZ3RoKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IGRiSW5mby5kYi50cmFuc2FjdGlvbihkYkluZm8uc3RvcmVOYW1lLCAncmVhZG9ubHknKS5vYmplY3RTdG9yZShkYkluZm8uc3RvcmVOYW1lKTtcbiAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZS5jb3VudCgpO1xuXG4gICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVxLnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGtleShuLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmIChuIDwgMCkge1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IGRiSW5mby5kYi50cmFuc2FjdGlvbihkYkluZm8uc3RvcmVOYW1lLCAncmVhZG9ubHknKS5vYmplY3RTdG9yZShkYkluZm8uc3RvcmVOYW1lKTtcblxuICAgICAgICAgICAgdmFyIGFkdmFuY2VkID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUub3BlbkN1cnNvcigpO1xuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIG1lYW5zIHRoZXJlIHdlcmVuJ3QgZW5vdWdoIGtleXNcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0aGUgZmlyc3Qga2V5LCByZXR1cm4gaXQgaWYgdGhhdCdzIHdoYXQgdGhleVxuICAgICAgICAgICAgICAgICAgICAvLyB3YW50ZWQuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY3Vyc29yLmtleSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhZHZhbmNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBhc2sgdGhlIGN1cnNvciB0byBza2lwIGFoZWFkIG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY29yZHMuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuYWR2YW5jZShuKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gd2UgZ2V0IGhlcmUsIHdlJ3ZlIGdvdCB0aGUgbnRoIGtleS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY3Vyc29yLmtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGtleXMoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGRiSW5mby5zdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKGRiSW5mby5zdG9yZU5hbWUpO1xuXG4gICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUub3BlbkN1cnNvcigpO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcblxuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxLnJlc3VsdDtcblxuICAgICAgICAgICAgICAgIGlmICghY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoa2V5cyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goY3Vyc29yLmtleSk7XG4gICAgICAgICAgICAgICAgY3Vyc29yW1wiY29udGludWVcIl0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChyZXEuZXJyb3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIGFzeW5jU3RvcmFnZSA9IHtcbiAgICBfZHJpdmVyOiAnYXN5bmNTdG9yYWdlJyxcbiAgICBfaW5pdFN0b3JhZ2U6IF9pbml0U3RvcmFnZSxcbiAgICBpdGVyYXRlOiBpdGVyYXRlLFxuICAgIGdldEl0ZW06IGdldEl0ZW0sXG4gICAgc2V0SXRlbTogc2V0SXRlbSxcbiAgICByZW1vdmVJdGVtOiByZW1vdmVJdGVtLFxuICAgIGNsZWFyOiBjbGVhcixcbiAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICBrZXk6IGtleSxcbiAgICBrZXlzOiBrZXlzXG59O1xuXG4vLyBTYWRseSwgdGhlIGJlc3Qgd2F5IHRvIHNhdmUgYmluYXJ5IGRhdGEgaW4gV2ViU1FML2xvY2FsU3RvcmFnZSBpcyBzZXJpYWxpemluZ1xuLy8gaXQgdG8gQmFzZTY0LCBzbyB0aGlzIGlzIGhvdyB3ZSBzdG9yZSBpdCB0byBwcmV2ZW50IHZlcnkgc3RyYW5nZSBlcnJvcnMgd2l0aCBsZXNzXG4vLyB2ZXJib3NlIHdheXMgb2YgYmluYXJ5IDwtPiBzdHJpbmcgZGF0YSBzdG9yYWdlLlxudmFyIEJBU0VfQ0hBUlMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cbnZhciBCTE9CX1RZUEVfUFJFRklYID0gJ35+bG9jYWxfZm9yYWdlX3R5cGV+JztcbnZhciBCTE9CX1RZUEVfUFJFRklYX1JFR0VYID0gL15+fmxvY2FsX2ZvcmFnZV90eXBlfihbXn5dKyl+LztcblxudmFyIFNFUklBTElaRURfTUFSS0VSID0gJ19fbGZzY19fOic7XG52YXIgU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIID0gU0VSSUFMSVpFRF9NQVJLRVIubGVuZ3RoO1xuXG4vLyBPTUcgdGhlIHNlcmlhbGl6YXRpb25zIVxudmFyIFRZUEVfQVJSQVlCVUZGRVIgPSAnYXJiZic7XG52YXIgVFlQRV9CTE9CID0gJ2Jsb2InO1xudmFyIFRZUEVfSU5UOEFSUkFZID0gJ3NpMDgnO1xudmFyIFRZUEVfVUlOVDhBUlJBWSA9ICd1aTA4JztcbnZhciBUWVBFX1VJTlQ4Q0xBTVBFREFSUkFZID0gJ3VpYzgnO1xudmFyIFRZUEVfSU5UMTZBUlJBWSA9ICdzaTE2JztcbnZhciBUWVBFX0lOVDMyQVJSQVkgPSAnc2kzMic7XG52YXIgVFlQRV9VSU5UMTZBUlJBWSA9ICd1cjE2JztcbnZhciBUWVBFX1VJTlQzMkFSUkFZID0gJ3VpMzInO1xudmFyIFRZUEVfRkxPQVQzMkFSUkFZID0gJ2ZsMzInO1xudmFyIFRZUEVfRkxPQVQ2NEFSUkFZID0gJ2ZsNjQnO1xudmFyIFRZUEVfU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIID0gU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIICsgVFlQRV9BUlJBWUJVRkZFUi5sZW5ndGg7XG5cbnZhciB0b1N0cmluZyQxID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuZnVuY3Rpb24gc3RyaW5nVG9CdWZmZXIoc2VyaWFsaXplZFN0cmluZykge1xuICAgIC8vIEZpbGwgdGhlIHN0cmluZyBpbnRvIGEgQXJyYXlCdWZmZXIuXG4gICAgdmFyIGJ1ZmZlckxlbmd0aCA9IHNlcmlhbGl6ZWRTdHJpbmcubGVuZ3RoICogMC43NTtcbiAgICB2YXIgbGVuID0gc2VyaWFsaXplZFN0cmluZy5sZW5ndGg7XG4gICAgdmFyIGk7XG4gICAgdmFyIHAgPSAwO1xuICAgIHZhciBlbmNvZGVkMSwgZW5jb2RlZDIsIGVuY29kZWQzLCBlbmNvZGVkNDtcblxuICAgIGlmIChzZXJpYWxpemVkU3RyaW5nW3NlcmlhbGl6ZWRTdHJpbmcubGVuZ3RoIC0gMV0gPT09ICc9Jykge1xuICAgICAgICBidWZmZXJMZW5ndGgtLTtcbiAgICAgICAgaWYgKHNlcmlhbGl6ZWRTdHJpbmdbc2VyaWFsaXplZFN0cmluZy5sZW5ndGggLSAyXSA9PT0gJz0nKSB7XG4gICAgICAgICAgICBidWZmZXJMZW5ndGgtLTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyTGVuZ3RoKTtcbiAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgICAgIGVuY29kZWQxID0gQkFTRV9DSEFSUy5pbmRleE9mKHNlcmlhbGl6ZWRTdHJpbmdbaV0pO1xuICAgICAgICBlbmNvZGVkMiA9IEJBU0VfQ0hBUlMuaW5kZXhPZihzZXJpYWxpemVkU3RyaW5nW2kgKyAxXSk7XG4gICAgICAgIGVuY29kZWQzID0gQkFTRV9DSEFSUy5pbmRleE9mKHNlcmlhbGl6ZWRTdHJpbmdbaSArIDJdKTtcbiAgICAgICAgZW5jb2RlZDQgPSBCQVNFX0NIQVJTLmluZGV4T2Yoc2VyaWFsaXplZFN0cmluZ1tpICsgM10pO1xuXG4gICAgICAgIC8qanNsaW50IGJpdHdpc2U6IHRydWUgKi9cbiAgICAgICAgYnl0ZXNbcCsrXSA9IGVuY29kZWQxIDw8IDIgfCBlbmNvZGVkMiA+PiA0O1xuICAgICAgICBieXRlc1twKytdID0gKGVuY29kZWQyICYgMTUpIDw8IDQgfCBlbmNvZGVkMyA+PiAyO1xuICAgICAgICBieXRlc1twKytdID0gKGVuY29kZWQzICYgMykgPDwgNiB8IGVuY29kZWQ0ICYgNjM7XG4gICAgfVxuICAgIHJldHVybiBidWZmZXI7XG59XG5cbi8vIENvbnZlcnRzIGEgYnVmZmVyIHRvIGEgc3RyaW5nIHRvIHN0b3JlLCBzZXJpYWxpemVkLCBpbiB0aGUgYmFja2VuZFxuLy8gc3RvcmFnZSBsaWJyYXJ5LlxuZnVuY3Rpb24gYnVmZmVyVG9TdHJpbmcoYnVmZmVyKSB7XG4gICAgLy8gYmFzZTY0LWFycmF5YnVmZmVyXG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICB2YXIgYmFzZTY0U3RyaW5nID0gJyc7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgLypqc2xpbnQgYml0d2lzZTogdHJ1ZSAqL1xuICAgICAgICBiYXNlNjRTdHJpbmcgKz0gQkFTRV9DSEFSU1tieXRlc1tpXSA+PiAyXTtcbiAgICAgICAgYmFzZTY0U3RyaW5nICs9IEJBU0VfQ0hBUlNbKGJ5dGVzW2ldICYgMykgPDwgNCB8IGJ5dGVzW2kgKyAxXSA+PiA0XTtcbiAgICAgICAgYmFzZTY0U3RyaW5nICs9IEJBU0VfQ0hBUlNbKGJ5dGVzW2kgKyAxXSAmIDE1KSA8PCAyIHwgYnl0ZXNbaSArIDJdID4+IDZdO1xuICAgICAgICBiYXNlNjRTdHJpbmcgKz0gQkFTRV9DSEFSU1tieXRlc1tpICsgMl0gJiA2M107XG4gICAgfVxuXG4gICAgaWYgKGJ5dGVzLmxlbmd0aCAlIDMgPT09IDIpIHtcbiAgICAgICAgYmFzZTY0U3RyaW5nID0gYmFzZTY0U3RyaW5nLnN1YnN0cmluZygwLCBiYXNlNjRTdHJpbmcubGVuZ3RoIC0gMSkgKyAnPSc7XG4gICAgfSBlbHNlIGlmIChieXRlcy5sZW5ndGggJSAzID09PSAxKSB7XG4gICAgICAgIGJhc2U2NFN0cmluZyA9IGJhc2U2NFN0cmluZy5zdWJzdHJpbmcoMCwgYmFzZTY0U3RyaW5nLmxlbmd0aCAtIDIpICsgJz09JztcbiAgICB9XG5cbiAgICByZXR1cm4gYmFzZTY0U3RyaW5nO1xufVxuXG4vLyBTZXJpYWxpemUgYSB2YWx1ZSwgYWZ0ZXJ3YXJkcyBleGVjdXRpbmcgYSBjYWxsYmFjayAod2hpY2ggdXN1YWxseVxuLy8gaW5zdHJ1Y3RzIHRoZSBgc2V0SXRlbSgpYCBjYWxsYmFjay9wcm9taXNlIHRvIGJlIGV4ZWN1dGVkKS4gVGhpcyBpcyBob3dcbi8vIHdlIHN0b3JlIGJpbmFyeSBkYXRhIHdpdGggbG9jYWxTdG9yYWdlLlxuZnVuY3Rpb24gc2VyaWFsaXplKHZhbHVlLCBjYWxsYmFjaykge1xuICAgIHZhciB2YWx1ZVR5cGUgPSAnJztcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgdmFsdWVUeXBlID0gdG9TdHJpbmckMS5jYWxsKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBDYW5ub3QgdXNlIGB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyYCBvciBzdWNoIGhlcmUsIGFzIHRoZXNlXG4gICAgLy8gY2hlY2tzIGZhaWwgd2hlbiBydW5uaW5nIHRoZSB0ZXN0cyB1c2luZyBjYXNwZXIuanMuLi5cbiAgICAvL1xuICAgIC8vIFRPRE86IFNlZSB3aHkgdGhvc2UgdGVzdHMgZmFpbCBhbmQgdXNlIGEgYmV0dGVyIHNvbHV0aW9uLlxuICAgIGlmICh2YWx1ZSAmJiAodmFsdWVUeXBlID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nIHx8IHZhbHVlLmJ1ZmZlciAmJiB0b1N0cmluZyQxLmNhbGwodmFsdWUuYnVmZmVyKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykpIHtcbiAgICAgICAgLy8gQ29udmVydCBiaW5hcnkgYXJyYXlzIHRvIGEgc3RyaW5nIGFuZCBwcmVmaXggdGhlIHN0cmluZyB3aXRoXG4gICAgICAgIC8vIGEgc3BlY2lhbCBtYXJrZXIuXG4gICAgICAgIHZhciBidWZmZXI7XG4gICAgICAgIHZhciBtYXJrZXIgPSBTRVJJQUxJWkVEX01BUktFUjtcblxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgYnVmZmVyID0gdmFsdWU7XG4gICAgICAgICAgICBtYXJrZXIgKz0gVFlQRV9BUlJBWUJVRkZFUjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJ1ZmZlciA9IHZhbHVlLmJ1ZmZlcjtcblxuICAgICAgICAgICAgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgSW50OEFycmF5XScpIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIgKz0gVFlQRV9JTlQ4QVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgVWludDhBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfVUlOVDhBUlJBWTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVUeXBlID09PSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfVUlOVDhDTEFNUEVEQVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgSW50MTZBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfSU5UMTZBUlJBWTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVUeXBlID09PSAnW29iamVjdCBVaW50MTZBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfVUlOVDE2QVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgSW50MzJBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfSU5UMzJBUlJBWTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVUeXBlID09PSAnW29iamVjdCBVaW50MzJBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfVUlOVDMyQVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScpIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIgKz0gVFlQRV9GTE9BVDMyQVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScpIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIgKz0gVFlQRV9GTE9BVDY0QVJSQVk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcignRmFpbGVkIHRvIGdldCB0eXBlIGZvciBCaW5hcnlBcnJheScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNhbGxiYWNrKG1hcmtlciArIGJ1ZmZlclRvU3RyaW5nKGJ1ZmZlcikpO1xuICAgIH0gZWxzZSBpZiAodmFsdWVUeXBlID09PSAnW29iamVjdCBCbG9iXScpIHtcbiAgICAgICAgLy8gQ29udmVyIHRoZSBibG9iIHRvIGEgYmluYXJ5QXJyYXkgYW5kIHRoZW4gdG8gYSBzdHJpbmcuXG4gICAgICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIEJhY2t3YXJkcy1jb21wYXRpYmxlIHByZWZpeCBmb3IgdGhlIGJsb2IgdHlwZS5cbiAgICAgICAgICAgIHZhciBzdHIgPSBCTE9CX1RZUEVfUFJFRklYICsgdmFsdWUudHlwZSArICd+JyArIGJ1ZmZlclRvU3RyaW5nKHRoaXMucmVzdWx0KTtcblxuICAgICAgICAgICAgY2FsbGJhY2soU0VSSUFMSVpFRF9NQVJLRVIgKyBUWVBFX0JMT0IgKyBzdHIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjYWxsYmFjayhKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3QgY29udmVydCB2YWx1ZSBpbnRvIGEgSlNPTiBzdHJpbmc6IFwiLCB2YWx1ZSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBEZXNlcmlhbGl6ZSBkYXRhIHdlJ3ZlIGluc2VydGVkIGludG8gYSB2YWx1ZSBjb2x1bW4vZmllbGQuIFdlIHBsYWNlXG4vLyBzcGVjaWFsIG1hcmtlcnMgaW50byBvdXIgc3RyaW5ncyB0byBtYXJrIHRoZW0gYXMgZW5jb2RlZDsgdGhpcyBpc24ndFxuLy8gYXMgbmljZSBhcyBhIG1ldGEgZmllbGQsIGJ1dCBpdCdzIHRoZSBvbmx5IHNhbmUgdGhpbmcgd2UgY2FuIGRvIHdoaWxzdFxuLy8ga2VlcGluZyBsb2NhbFN0b3JhZ2Ugc3VwcG9ydCBpbnRhY3QuXG4vL1xuLy8gT2Z0ZW50aW1lcyB0aGlzIHdpbGwganVzdCBkZXNlcmlhbGl6ZSBKU09OIGNvbnRlbnQsIGJ1dCBpZiB3ZSBoYXZlIGFcbi8vIHNwZWNpYWwgbWFya2VyIChTRVJJQUxJWkVEX01BUktFUiwgZGVmaW5lZCBhYm92ZSksIHdlIHdpbGwgZXh0cmFjdFxuLy8gc29tZSBraW5kIG9mIGFycmF5YnVmZmVyL2JpbmFyeSBkYXRhL3R5cGVkIGFycmF5IG91dCBvZiB0aGUgc3RyaW5nLlxuZnVuY3Rpb24gZGVzZXJpYWxpemUodmFsdWUpIHtcbiAgICAvLyBJZiB3ZSBoYXZlbid0IG1hcmtlZCB0aGlzIHN0cmluZyBhcyBiZWluZyBzcGVjaWFsbHkgc2VyaWFsaXplZCAoaS5lLlxuICAgIC8vIHNvbWV0aGluZyBvdGhlciB0aGFuIHNlcmlhbGl6ZWQgSlNPTiksIHdlIGNhbiBqdXN0IHJldHVybiBpdCBhbmQgYmVcbiAgICAvLyBkb25lIHdpdGggaXQuXG4gICAgaWYgKHZhbHVlLnN1YnN0cmluZygwLCBTRVJJQUxJWkVEX01BUktFUl9MRU5HVEgpICE9PSBTRVJJQUxJWkVEX01BUktFUikge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gVGhlIGZvbGxvd2luZyBjb2RlIGRlYWxzIHdpdGggZGVzZXJpYWxpemluZyBzb21lIGtpbmQgb2YgQmxvYiBvclxuICAgIC8vIFR5cGVkQXJyYXkuIEZpcnN0IHdlIHNlcGFyYXRlIG91dCB0aGUgdHlwZSBvZiBkYXRhIHdlJ3JlIGRlYWxpbmdcbiAgICAvLyB3aXRoIGZyb20gdGhlIGRhdGEgaXRzZWxmLlxuICAgIHZhciBzZXJpYWxpemVkU3RyaW5nID0gdmFsdWUuc3Vic3RyaW5nKFRZUEVfU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIKTtcbiAgICB2YXIgdHlwZSA9IHZhbHVlLnN1YnN0cmluZyhTRVJJQUxJWkVEX01BUktFUl9MRU5HVEgsIFRZUEVfU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIKTtcblxuICAgIHZhciBibG9iVHlwZTtcbiAgICAvLyBCYWNrd2FyZHMtY29tcGF0aWJsZSBibG9iIHR5cGUgc2VyaWFsaXphdGlvbiBzdHJhdGVneS5cbiAgICAvLyBEQnMgY3JlYXRlZCB3aXRoIG9sZGVyIHZlcnNpb25zIG9mIGxvY2FsRm9yYWdlIHdpbGwgc2ltcGx5IG5vdCBoYXZlIHRoZSBibG9iIHR5cGUuXG4gICAgaWYgKHR5cGUgPT09IFRZUEVfQkxPQiAmJiBCTE9CX1RZUEVfUFJFRklYX1JFR0VYLnRlc3Qoc2VyaWFsaXplZFN0cmluZykpIHtcbiAgICAgICAgdmFyIG1hdGNoZXIgPSBzZXJpYWxpemVkU3RyaW5nLm1hdGNoKEJMT0JfVFlQRV9QUkVGSVhfUkVHRVgpO1xuICAgICAgICBibG9iVHlwZSA9IG1hdGNoZXJbMV07XG4gICAgICAgIHNlcmlhbGl6ZWRTdHJpbmcgPSBzZXJpYWxpemVkU3RyaW5nLnN1YnN0cmluZyhtYXRjaGVyWzBdLmxlbmd0aCk7XG4gICAgfVxuICAgIHZhciBidWZmZXIgPSBzdHJpbmdUb0J1ZmZlcihzZXJpYWxpemVkU3RyaW5nKTtcblxuICAgIC8vIFJldHVybiB0aGUgcmlnaHQgdHlwZSBiYXNlZCBvbiB0aGUgY29kZS90eXBlIHNldCBkdXJpbmdcbiAgICAvLyBzZXJpYWxpemF0aW9uLlxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFRZUEVfQVJSQVlCVUZGRVI6XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgICBjYXNlIFRZUEVfQkxPQjpcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVCbG9iKFtidWZmZXJdLCB7IHR5cGU6IGJsb2JUeXBlIH0pO1xuICAgICAgICBjYXNlIFRZUEVfSU5UOEFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSBUWVBFX1VJTlQ4QVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSBUWVBFX1VJTlQ4Q0xBTVBFREFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OENsYW1wZWRBcnJheShidWZmZXIpO1xuICAgICAgICBjYXNlIFRZUEVfSU5UMTZBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW50MTZBcnJheShidWZmZXIpO1xuICAgICAgICBjYXNlIFRZUEVfVUlOVDE2QVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9JTlQzMkFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9VSU5UMzJBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSBUWVBFX0ZMT0FUMzJBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9GTE9BVDY0QVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0NjRBcnJheShidWZmZXIpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtvd24gdHlwZTogJyArIHR5cGUpO1xuICAgIH1cbn1cblxudmFyIGxvY2FsZm9yYWdlU2VyaWFsaXplciA9IHtcbiAgICBzZXJpYWxpemU6IHNlcmlhbGl6ZSxcbiAgICBkZXNlcmlhbGl6ZTogZGVzZXJpYWxpemUsXG4gICAgc3RyaW5nVG9CdWZmZXI6IHN0cmluZ1RvQnVmZmVyLFxuICAgIGJ1ZmZlclRvU3RyaW5nOiBidWZmZXJUb1N0cmluZ1xufTtcblxuLypcbiAqIEluY2x1ZGVzIGNvZGUgZnJvbTpcbiAqXG4gKiBiYXNlNjQtYXJyYXlidWZmZXJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9uaWtsYXN2aC9iYXNlNjQtYXJyYXlidWZmZXJcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgTmlrbGFzIHZvbiBIZXJ0emVuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKi9cbi8vIE9wZW4gdGhlIFdlYlNRTCBkYXRhYmFzZSAoYXV0b21hdGljYWxseSBjcmVhdGVzIG9uZSBpZiBvbmUgZGlkbid0XG4vLyBwcmV2aW91c2x5IGV4aXN0KSwgdXNpbmcgYW55IG9wdGlvbnMgc2V0IGluIHRoZSBjb25maWcuXG5mdW5jdGlvbiBfaW5pdFN0b3JhZ2UkMShvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkYkluZm8gPSB7XG4gICAgICAgIGRiOiBudWxsXG4gICAgfTtcblxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgIGZvciAodmFyIGkgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgZGJJbmZvW2ldID0gdHlwZW9mIG9wdGlvbnNbaV0gIT09ICdzdHJpbmcnID8gb3B0aW9uc1tpXS50b1N0cmluZygpIDogb3B0aW9uc1tpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBkYkluZm9Qcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIE9wZW4gdGhlIGRhdGFiYXNlOyB0aGUgb3BlbkRhdGFiYXNlIEFQSSB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgICAgICAgLy8gY3JlYXRlIGl0IGZvciB1cyBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGJJbmZvLmRiID0gb3BlbkRhdGFiYXNlKGRiSW5mby5uYW1lLCBTdHJpbmcoZGJJbmZvLnZlcnNpb24pLCBkYkluZm8uZGVzY3JpcHRpb24sIGRiSW5mby5zaXplKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBvdXIga2V5L3ZhbHVlIHRhYmxlIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdC5leGVjdXRlU3FsKCdDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyAnICsgZGJJbmZvLnN0b3JlTmFtZSArICcgKGlkIElOVEVHRVIgUFJJTUFSWSBLRVksIGtleSB1bmlxdWUsIHZhbHVlKScsIFtdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fZGJJbmZvID0gZGJJbmZvO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkYkluZm8uc2VyaWFsaXplciA9IGxvY2FsZm9yYWdlU2VyaWFsaXplcjtcbiAgICByZXR1cm4gZGJJbmZvUHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gZ2V0SXRlbSQxKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnU0VMRUNUICogRlJPTSAnICsgZGJJbmZvLnN0b3JlTmFtZSArICcgV0hFUkUga2V5ID0gPyBMSU1JVCAxJywgW2tleV0sIGZ1bmN0aW9uICh0LCByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXN1bHRzLnJvd3MubGVuZ3RoID8gcmVzdWx0cy5yb3dzLml0ZW0oMCkudmFsdWUgOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGlzIGlzIHNlcmlhbGl6ZWQgY29udGVudCB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIHVucGFjay5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZGJJbmZvLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAodCwgZXJyb3IpIHtcblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGl0ZXJhdGUkMShpdGVyYXRvciwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuXG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB0LmV4ZWN1dGVTcWwoJ1NFTEVDVCAqIEZST00gJyArIGRiSW5mby5zdG9yZU5hbWUsIFtdLCBmdW5jdGlvbiAodCwgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IHJlc3VsdHMucm93cztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHJvd3MubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gcm93cy5pdGVtKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZW0udmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGlzIGlzIHNlcmlhbGl6ZWQgY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byB1bnBhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZGJJbmZvLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gaXRlcmF0b3IocmVzdWx0LCBpdGVtLmtleSwgaSArIDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2b2lkKDApIHByZXZlbnRzIHByb2JsZW1zIHdpdGggcmVkZWZpbml0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvZiBgdW5kZWZpbmVkYC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX3NldEl0ZW0oa2V5LCB2YWx1ZSwgY2FsbGJhY2ssIHJldHJpZXNMZWZ0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gQ2FzdCB0aGUga2V5IHRvIGEgc3RyaW5nLCBhcyB0aGF0J3MgYWxsIHdlIGNhbiBzZXQgYXMgYSBrZXkuXG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihrZXkgKyAnIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgICAgIGtleSA9IFN0cmluZyhrZXkpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFRoZSBsb2NhbFN0b3JhZ2UgQVBJIGRvZXNuJ3QgcmV0dXJuIHVuZGVmaW5lZCB2YWx1ZXMgaW4gYW5cbiAgICAgICAgICAgIC8vIFwiZXhwZWN0ZWRcIiB3YXksIHNvIHVuZGVmaW5lZCBpcyBhbHdheXMgY2FzdCB0byBudWxsIGluIGFsbFxuICAgICAgICAgICAgLy8gZHJpdmVycy4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS9sb2NhbEZvcmFnZS9wdWxsLzQyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgb3JpZ2luYWwgdmFsdWUgdG8gcGFzcyB0byB0aGUgY2FsbGJhY2suXG4gICAgICAgICAgICB2YXIgb3JpZ2luYWxWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgZGJJbmZvLnNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLCBmdW5jdGlvbiAodmFsdWUsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LmV4ZWN1dGVTcWwoJ0lOU0VSVCBPUiBSRVBMQUNFIElOVE8gJyArIGRiSW5mby5zdG9yZU5hbWUgKyAnIChrZXksIHZhbHVlKSBWQUxVRVMgKD8sID8pJywgW2tleSwgdmFsdWVdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvcmlnaW5hbFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHNxbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNhY3Rpb24gZmFpbGVkOyBjaGVja1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gc2VlIGlmIGl0J3MgYSBxdW90YSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcWxFcnJvci5jb2RlID09PSBzcWxFcnJvci5RVU9UQV9FUlIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSByZWplY3QgdGhlIGNhbGxiYWNrIG91dHJpZ2h0IGZvciBub3csIGJ1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3Mgd29ydGggdHJ5aW5nIHRvIHJlLXJ1biB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXZlbiBpZiB0aGUgdXNlciBhY2NlcHRzIHRoZSBwcm9tcHQgdG8gdXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbW9yZSBzdG9yYWdlIG9uIFNhZmFyaSwgdGhpcyBlcnJvciB3aWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmUgY2FsbGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHJlLXJ1biB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldHJpZXNMZWZ0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF9zZXRJdGVtLmFwcGx5KHNlbGYsIFtrZXksIG9yaWdpbmFsVmFsdWUsIGNhbGxiYWNrLCByZXRyaWVzTGVmdCAtIDFdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHNxbEVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHNldEl0ZW0kMShrZXksIHZhbHVlLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBfc2V0SXRlbS5hcHBseSh0aGlzLCBba2V5LCB2YWx1ZSwgY2FsbGJhY2ssIDFdKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSXRlbSQxKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnREVMRVRFIEZST00gJyArIGRiSW5mby5zdG9yZU5hbWUgKyAnIFdIRVJFIGtleSA9ID8nLCBba2V5XSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBEZWxldGVzIGV2ZXJ5IGl0ZW0gaW4gdGhlIHRhYmxlLlxuLy8gVE9ETzogRmluZCBvdXQgaWYgdGhpcyByZXNldHMgdGhlIEFVVE9fSU5DUkVNRU5UIG51bWJlci5cbmZ1bmN0aW9uIGNsZWFyJDEoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdC5leGVjdXRlU3FsKCdERUxFVEUgRlJPTSAnICsgZGJJbmZvLnN0b3JlTmFtZSwgW10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIERvZXMgYSBzaW1wbGUgYENPVU5UKGtleSlgIHRvIGdldCB0aGUgbnVtYmVyIG9mIGl0ZW1zIHN0b3JlZCBpblxuLy8gbG9jYWxGb3JhZ2UuXG5mdW5jdGlvbiBsZW5ndGgkMShjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAvLyBBaGhoLCBTUUwgbWFrZXMgdGhpcyBvbmUgc29vb29vbyBlYXN5LlxuICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnU0VMRUNUIENPVU5UKGtleSkgYXMgYyBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lLCBbXSwgZnVuY3Rpb24gKHQsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3VsdHMucm93cy5pdGVtKDApLmM7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gUmV0dXJuIHRoZSBrZXkgbG9jYXRlZCBhdCBrZXkgaW5kZXggWDsgZXNzZW50aWFsbHkgZ2V0cyB0aGUga2V5IGZyb20gYVxuLy8gYFdIRVJFIGlkID0gP2AuIFRoaXMgaXMgdGhlIG1vc3QgZWZmaWNpZW50IHdheSBJIGNhbiB0aGluayB0byBpbXBsZW1lbnRcbi8vIHRoaXMgcmFyZWx5LXVzZWQgKGluIG15IGV4cGVyaWVuY2UpIHBhcnQgb2YgdGhlIEFQSSwgYnV0IGl0IGNhbiBzZWVtXG4vLyBpbmNvbnNpc3RlbnQsIGJlY2F1c2Ugd2UgZG8gYElOU0VSVCBPUiBSRVBMQUNFIElOVE9gIG9uIGBzZXRJdGVtKClgLCBzb1xuLy8gdGhlIElEIG9mIGVhY2gga2V5IHdpbGwgY2hhbmdlIGV2ZXJ5IHRpbWUgaXQncyB1cGRhdGVkLiBQZXJoYXBzIGEgc3RvcmVkXG4vLyBwcm9jZWR1cmUgZm9yIHRoZSBgc2V0SXRlbSgpYCBTUUwgd291bGQgc29sdmUgdGhpcyBwcm9ibGVtP1xuLy8gVE9ETzogRG9uJ3QgY2hhbmdlIElEIG9uIGBzZXRJdGVtKClgLlxuZnVuY3Rpb24ga2V5JDEobiwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdC5leGVjdXRlU3FsKCdTRUxFQ1Qga2V5IEZST00gJyArIGRiSW5mby5zdG9yZU5hbWUgKyAnIFdIRVJFIGlkID0gPyBMSU1JVCAxJywgW24gKyAxXSwgZnVuY3Rpb24gKHQsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3VsdHMucm93cy5sZW5ndGggPyByZXN1bHRzLnJvd3MuaXRlbSgwKS5rZXkgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24ga2V5cyQxKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnU0VMRUNUIGtleSBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lLCBbXSwgZnVuY3Rpb24gKHQsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdHMucm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKHJlc3VsdHMucm93cy5pdGVtKGkpLmtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGtleXMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIHdlYlNRTFN0b3JhZ2UgPSB7XG4gICAgX2RyaXZlcjogJ3dlYlNRTFN0b3JhZ2UnLFxuICAgIF9pbml0U3RvcmFnZTogX2luaXRTdG9yYWdlJDEsXG4gICAgaXRlcmF0ZTogaXRlcmF0ZSQxLFxuICAgIGdldEl0ZW06IGdldEl0ZW0kMSxcbiAgICBzZXRJdGVtOiBzZXRJdGVtJDEsXG4gICAgcmVtb3ZlSXRlbTogcmVtb3ZlSXRlbSQxLFxuICAgIGNsZWFyOiBjbGVhciQxLFxuICAgIGxlbmd0aDogbGVuZ3RoJDEsXG4gICAga2V5OiBrZXkkMSxcbiAgICBrZXlzOiBrZXlzJDFcbn07XG5cbi8vIENvbmZpZyB0aGUgbG9jYWxTdG9yYWdlIGJhY2tlbmQsIHVzaW5nIG9wdGlvbnMgc2V0IGluIHRoZSBjb25maWcuXG5mdW5jdGlvbiBfaW5pdFN0b3JhZ2UkMihvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkYkluZm8gPSB7fTtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGRiSW5mb1tpXSA9IG9wdGlvbnNbaV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkYkluZm8ua2V5UHJlZml4ID0gZGJJbmZvLm5hbWUgKyAnLyc7XG5cbiAgICBpZiAoZGJJbmZvLnN0b3JlTmFtZSAhPT0gc2VsZi5fZGVmYXVsdENvbmZpZy5zdG9yZU5hbWUpIHtcbiAgICAgICAgZGJJbmZvLmtleVByZWZpeCArPSBkYkluZm8uc3RvcmVOYW1lICsgJy8nO1xuICAgIH1cblxuICAgIHNlbGYuX2RiSW5mbyA9IGRiSW5mbztcbiAgICBkYkluZm8uc2VyaWFsaXplciA9IGxvY2FsZm9yYWdlU2VyaWFsaXplcjtcblxuICAgIHJldHVybiBQcm9taXNlJDEucmVzb2x2ZSgpO1xufVxuXG4vLyBSZW1vdmUgYWxsIGtleXMgZnJvbSB0aGUgZGF0YXN0b3JlLCBlZmZlY3RpdmVseSBkZXN0cm95aW5nIGFsbCBkYXRhIGluXG4vLyB0aGUgYXBwJ3Mga2V5L3ZhbHVlIHN0b3JlIVxuZnVuY3Rpb24gY2xlYXIkMihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleVByZWZpeCA9IHNlbGYuX2RiSW5mby5rZXlQcmVmaXg7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IGxvY2FsU3RvcmFnZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGxvY2FsU3RvcmFnZS5rZXkoaSk7XG5cbiAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihrZXlQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gUmV0cmlldmUgYW4gaXRlbSBmcm9tIHRoZSBzdG9yZS4gVW5saWtlIHRoZSBvcmlnaW5hbCBhc3luY19zdG9yYWdlXG4vLyBsaWJyYXJ5IGluIEdhaWEsIHdlIGRvbid0IG1vZGlmeSByZXR1cm4gdmFsdWVzIGF0IGFsbC4gSWYgYSBrZXkncyB2YWx1ZVxuLy8gaXMgYHVuZGVmaW5lZGAsIHdlIHBhc3MgdGhhdCB2YWx1ZSB0byB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXG5mdW5jdGlvbiBnZXRJdGVtJDIoa2V5LCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIENhc3QgdGhlIGtleSB0byBhIHN0cmluZywgYXMgdGhhdCdzIGFsbCB3ZSBjYW4gc2V0IGFzIGEga2V5LlxuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLndhcm4oa2V5ICsgJyB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgICBrZXkgPSBTdHJpbmcoa2V5KTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgdmFyIHJlc3VsdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGRiSW5mby5rZXlQcmVmaXggKyBrZXkpO1xuXG4gICAgICAgIC8vIElmIGEgcmVzdWx0IHdhcyBmb3VuZCwgcGFyc2UgaXQgZnJvbSB0aGUgc2VyaWFsaXplZFxuICAgICAgICAvLyBzdHJpbmcgaW50byBhIEpTIG9iamVjdC4gSWYgcmVzdWx0IGlzbid0IHRydXRoeSwgdGhlIGtleVxuICAgICAgICAvLyBpcyBsaWtlbHkgdW5kZWZpbmVkIGFuZCB3ZSdsbCBwYXNzIGl0IHN0cmFpZ2h0IHRvIHRoZVxuICAgICAgICAvLyBjYWxsYmFjay5cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gZGJJbmZvLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUocmVzdWx0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBJdGVyYXRlIG92ZXIgYWxsIGl0ZW1zIGluIHRoZSBzdG9yZS5cbmZ1bmN0aW9uIGl0ZXJhdGUkMihpdGVyYXRvciwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgdmFyIGtleVByZWZpeCA9IGRiSW5mby5rZXlQcmVmaXg7XG4gICAgICAgIHZhciBrZXlQcmVmaXhMZW5ndGggPSBrZXlQcmVmaXgubGVuZ3RoO1xuICAgICAgICB2YXIgbGVuZ3RoID0gbG9jYWxTdG9yYWdlLmxlbmd0aDtcblxuICAgICAgICAvLyBXZSB1c2UgYSBkZWRpY2F0ZWQgaXRlcmF0b3IgaW5zdGVhZCBvZiB0aGUgYGlgIHZhcmlhYmxlIGJlbG93XG4gICAgICAgIC8vIHNvIG90aGVyIGtleXMgd2UgZmV0Y2ggaW4gbG9jYWxTdG9yYWdlIGFyZW4ndCBjb3VudGVkIGluXG4gICAgICAgIC8vIHRoZSBgaXRlcmF0aW9uTnVtYmVyYCBhcmd1bWVudCBwYXNzZWQgdG8gdGhlIGBpdGVyYXRlKClgXG4gICAgICAgIC8vIGNhbGxiYWNrLlxuICAgICAgICAvL1xuICAgICAgICAvLyBTZWU6IGdpdGh1Yi5jb20vbW96aWxsYS9sb2NhbEZvcmFnZS9wdWxsLzQzNSNkaXNjdXNzaW9uX3IzODA2MTUzMFxuICAgICAgICB2YXIgaXRlcmF0aW9uTnVtYmVyID0gMTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gbG9jYWxTdG9yYWdlLmtleShpKTtcbiAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihrZXlQcmVmaXgpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuXG4gICAgICAgICAgICAvLyBJZiBhIHJlc3VsdCB3YXMgZm91bmQsIHBhcnNlIGl0IGZyb20gdGhlIHNlcmlhbGl6ZWRcbiAgICAgICAgICAgIC8vIHN0cmluZyBpbnRvIGEgSlMgb2JqZWN0LiBJZiByZXN1bHQgaXNuJ3QgdHJ1dGh5LCB0aGVcbiAgICAgICAgICAgIC8vIGtleSBpcyBsaWtlbHkgdW5kZWZpbmVkIGFuZCB3ZSdsbCBwYXNzIGl0IHN0cmFpZ2h0XG4gICAgICAgICAgICAvLyB0byB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGRiSW5mby5zZXJpYWxpemVyLmRlc2VyaWFsaXplKHZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFsdWUgPSBpdGVyYXRvcih2YWx1ZSwga2V5LnN1YnN0cmluZyhrZXlQcmVmaXhMZW5ndGgpLCBpdGVyYXRpb25OdW1iZXIrKyk7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBTYW1lIGFzIGxvY2FsU3RvcmFnZSdzIGtleSgpIG1ldGhvZCwgZXhjZXB0IHRha2VzIGEgY2FsbGJhY2suXG5mdW5jdGlvbiBrZXkkMihuLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGxvY2FsU3RvcmFnZS5rZXkobik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBwcmVmaXggZnJvbSB0aGUga2V5LCBpZiBhIGtleSBpcyBmb3VuZC5cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnN1YnN0cmluZyhkYkluZm8ua2V5UHJlZml4Lmxlbmd0aCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24ga2V5cyQyKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwcm9taXNlID0gc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICB2YXIgbGVuZ3RoID0gbG9jYWxTdG9yYWdlLmxlbmd0aDtcbiAgICAgICAgdmFyIGtleXMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmtleShpKS5pbmRleE9mKGRiSW5mby5rZXlQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGxvY2FsU3RvcmFnZS5rZXkoaSkuc3Vic3RyaW5nKGRiSW5mby5rZXlQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFN1cHBseSB0aGUgbnVtYmVyIG9mIGtleXMgaW4gdGhlIGRhdGFzdG9yZSB0byB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXG5mdW5jdGlvbiBsZW5ndGgkMihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYua2V5cygpLnRoZW4oZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgcmV0dXJuIGtleXMubGVuZ3RoO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gUmVtb3ZlIGFuIGl0ZW0gZnJvbSB0aGUgc3RvcmUsIG5pY2UgYW5kIHNpbXBsZS5cbmZ1bmN0aW9uIHJlbW92ZUl0ZW0kMihrZXksIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gQ2FzdCB0aGUga2V5IHRvIGEgc3RyaW5nLCBhcyB0aGF0J3MgYWxsIHdlIGNhbiBzZXQgYXMgYSBrZXkuXG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihrZXkgKyAnIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgICAgIGtleSA9IFN0cmluZyhrZXkpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShkYkluZm8ua2V5UHJlZml4ICsga2V5KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFNldCBhIGtleSdzIHZhbHVlIGFuZCBydW4gYW4gb3B0aW9uYWwgY2FsbGJhY2sgb25jZSB0aGUgdmFsdWUgaXMgc2V0LlxuLy8gVW5saWtlIEdhaWEncyBpbXBsZW1lbnRhdGlvbiwgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIHBhc3NlZCB0aGUgdmFsdWUsXG4vLyBpbiBjYXNlIHlvdSB3YW50IHRvIG9wZXJhdGUgb24gdGhhdCB2YWx1ZSBvbmx5IGFmdGVyIHlvdSdyZSBzdXJlIGl0XG4vLyBzYXZlZCwgb3Igc29tZXRoaW5nIGxpa2UgdGhhdC5cbmZ1bmN0aW9uIHNldEl0ZW0kMihrZXksIHZhbHVlLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIENhc3QgdGhlIGtleSB0byBhIHN0cmluZywgYXMgdGhhdCdzIGFsbCB3ZSBjYW4gc2V0IGFzIGEga2V5LlxuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLndhcm4oa2V5ICsgJyB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgICBrZXkgPSBTdHJpbmcoa2V5KTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQ29udmVydCB1bmRlZmluZWQgdmFsdWVzIHRvIG51bGwuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL2xvY2FsRm9yYWdlL3B1bGwvNDJcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNhdmUgdGhlIG9yaWdpbmFsIHZhbHVlIHRvIHBhc3MgdG8gdGhlIGNhbGxiYWNrLlxuICAgICAgICB2YXIgb3JpZ2luYWxWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICBkYkluZm8uc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oZGJJbmZvLmtleVByZWZpeCArIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvcmlnaW5hbFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlIGNhcGFjaXR5IGV4Y2VlZGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogTWFrZSB0aGlzIGEgc3BlY2lmaWMgZXJyb3IvZXZlbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5uYW1lID09PSAnUXVvdGFFeGNlZWRlZEVycm9yJyB8fCBlLm5hbWUgPT09ICdOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgbG9jYWxTdG9yYWdlV3JhcHBlciA9IHtcbiAgICBfZHJpdmVyOiAnbG9jYWxTdG9yYWdlV3JhcHBlcicsXG4gICAgX2luaXRTdG9yYWdlOiBfaW5pdFN0b3JhZ2UkMixcbiAgICAvLyBEZWZhdWx0IEFQSSwgZnJvbSBHYWlhL2xvY2FsU3RvcmFnZS5cbiAgICBpdGVyYXRlOiBpdGVyYXRlJDIsXG4gICAgZ2V0SXRlbTogZ2V0SXRlbSQyLFxuICAgIHNldEl0ZW06IHNldEl0ZW0kMixcbiAgICByZW1vdmVJdGVtOiByZW1vdmVJdGVtJDIsXG4gICAgY2xlYXI6IGNsZWFyJDIsXG4gICAgbGVuZ3RoOiBsZW5ndGgkMixcbiAgICBrZXk6IGtleSQyLFxuICAgIGtleXM6IGtleXMkMlxufTtcblxuLy8gQ3VzdG9tIGRyaXZlcnMgYXJlIHN0b3JlZCBoZXJlIHdoZW4gYGRlZmluZURyaXZlcigpYCBpcyBjYWxsZWQuXG4vLyBUaGV5IGFyZSBzaGFyZWQgYWNyb3NzIGFsbCBpbnN0YW5jZXMgb2YgbG9jYWxGb3JhZ2UuXG52YXIgQ3VzdG9tRHJpdmVycyA9IHt9O1xuXG52YXIgRHJpdmVyVHlwZSA9IHtcbiAgICBJTkRFWEVEREI6ICdhc3luY1N0b3JhZ2UnLFxuICAgIExPQ0FMU1RPUkFHRTogJ2xvY2FsU3RvcmFnZVdyYXBwZXInLFxuICAgIFdFQlNRTDogJ3dlYlNRTFN0b3JhZ2UnXG59O1xuXG52YXIgRGVmYXVsdERyaXZlck9yZGVyID0gW0RyaXZlclR5cGUuSU5ERVhFRERCLCBEcml2ZXJUeXBlLldFQlNRTCwgRHJpdmVyVHlwZS5MT0NBTFNUT1JBR0VdO1xuXG52YXIgTGlicmFyeU1ldGhvZHMgPSBbJ2NsZWFyJywgJ2dldEl0ZW0nLCAnaXRlcmF0ZScsICdrZXknLCAna2V5cycsICdsZW5ndGgnLCAncmVtb3ZlSXRlbScsICdzZXRJdGVtJ107XG5cbnZhciBEZWZhdWx0Q29uZmlnID0ge1xuICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICBkcml2ZXI6IERlZmF1bHREcml2ZXJPcmRlci5zbGljZSgpLFxuICAgIG5hbWU6ICdsb2NhbGZvcmFnZScsXG4gICAgLy8gRGVmYXVsdCBEQiBzaXplIGlzIF9KVVNUIFVOREVSXyA1TUIsIGFzIGl0J3MgdGhlIGhpZ2hlc3Qgc2l6ZVxuICAgIC8vIHdlIGNhbiB1c2Ugd2l0aG91dCBhIHByb21wdC5cbiAgICBzaXplOiA0OTgwNzM2LFxuICAgIHN0b3JlTmFtZTogJ2tleXZhbHVlcGFpcnMnLFxuICAgIHZlcnNpb246IDEuMFxufTtcblxudmFyIGRyaXZlclN1cHBvcnQgPSB7fTtcbi8vIENoZWNrIHRvIHNlZSBpZiBJbmRleGVkREIgaXMgYXZhaWxhYmxlIGFuZCBpZiBpdCBpcyB0aGUgbGF0ZXN0XG4vLyBpbXBsZW1lbnRhdGlvbjsgaXQncyBvdXIgcHJlZmVycmVkIGJhY2tlbmQgbGlicmFyeS4gV2UgdXNlIFwiX3NwZWNfdGVzdFwiXG4vLyBhcyB0aGUgbmFtZSBvZiB0aGUgZGF0YWJhc2UgYmVjYXVzZSBpdCdzIG5vdCB0aGUgb25lIHdlJ2xsIG9wZXJhdGUgb24sXG4vLyBidXQgaXQncyB1c2VmdWwgdG8gbWFrZSBzdXJlIGl0cyB1c2luZyB0aGUgcmlnaHQgc3BlYy5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvbG9jYWxGb3JhZ2UvaXNzdWVzLzEyOFxuZHJpdmVyU3VwcG9ydFtEcml2ZXJUeXBlLklOREVYRUREQl0gPSBpc0luZGV4ZWREQlZhbGlkKCk7XG5cbmRyaXZlclN1cHBvcnRbRHJpdmVyVHlwZS5XRUJTUUxdID0gaXNXZWJTUUxWYWxpZCgpO1xuXG5kcml2ZXJTdXBwb3J0W0RyaXZlclR5cGUuTE9DQUxTVE9SQUdFXSA9IGlzTG9jYWxTdG9yYWdlVmFsaWQoKTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcmcpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5mdW5jdGlvbiBjYWxsV2hlblJlYWR5KGxvY2FsRm9yYWdlSW5zdGFuY2UsIGxpYnJhcnlNZXRob2QpIHtcbiAgICBsb2NhbEZvcmFnZUluc3RhbmNlW2xpYnJhcnlNZXRob2RdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2FyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHJldHVybiBsb2NhbEZvcmFnZUluc3RhbmNlLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxGb3JhZ2VJbnN0YW5jZVtsaWJyYXJ5TWV0aG9kXS5hcHBseShsb2NhbEZvcmFnZUluc3RhbmNlLCBfYXJncyk7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGV4dGVuZCgpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICAgIGlmIChhcmcpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBhcmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJnLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoYXJnW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMF1ba2V5XSA9IGFyZ1trZXldLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMF1ba2V5XSA9IGFyZ1trZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFyZ3VtZW50c1swXTtcbn1cblxuZnVuY3Rpb24gaXNMaWJyYXJ5RHJpdmVyKGRyaXZlck5hbWUpIHtcbiAgICBmb3IgKHZhciBkcml2ZXIgaW4gRHJpdmVyVHlwZSkge1xuICAgICAgICBpZiAoRHJpdmVyVHlwZS5oYXNPd25Qcm9wZXJ0eShkcml2ZXIpICYmIERyaXZlclR5cGVbZHJpdmVyXSA9PT0gZHJpdmVyTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBMb2NhbEZvcmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMb2NhbEZvcmFnZShvcHRpb25zKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2NhbEZvcmFnZSk7XG5cbiAgICAgICAgdGhpcy5JTkRFWEVEREIgPSBEcml2ZXJUeXBlLklOREVYRUREQjtcbiAgICAgICAgdGhpcy5MT0NBTFNUT1JBR0UgPSBEcml2ZXJUeXBlLkxPQ0FMU1RPUkFHRTtcbiAgICAgICAgdGhpcy5XRUJTUUwgPSBEcml2ZXJUeXBlLldFQlNRTDtcblxuICAgICAgICB0aGlzLl9kZWZhdWx0Q29uZmlnID0gZXh0ZW5kKHt9LCBEZWZhdWx0Q29uZmlnKTtcbiAgICAgICAgdGhpcy5fY29uZmlnID0gZXh0ZW5kKHt9LCB0aGlzLl9kZWZhdWx0Q29uZmlnLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5fZHJpdmVyU2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5faW5pdERyaXZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuX3JlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2RiSW5mbyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fd3JhcExpYnJhcnlNZXRob2RzV2l0aFJlYWR5KCk7XG4gICAgICAgIHRoaXMuc2V0RHJpdmVyKHRoaXMuX2NvbmZpZy5kcml2ZXIpW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge30pO1xuICAgIH1cblxuICAgIC8vIFNldCBhbnkgY29uZmlnIHZhbHVlcyBmb3IgbG9jYWxGb3JhZ2U7IGNhbiBiZSBjYWxsZWQgYW55dGltZSBiZWZvcmVcbiAgICAvLyB0aGUgZmlyc3QgQVBJIGNhbGwgKGUuZy4gYGdldEl0ZW1gLCBgc2V0SXRlbWApLlxuICAgIC8vIFdlIGxvb3AgdGhyb3VnaCBvcHRpb25zIHNvIHdlIGRvbid0IG92ZXJ3cml0ZSBleGlzdGluZyBjb25maWdcbiAgICAvLyB2YWx1ZXMuXG5cblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5jb25maWcgPSBmdW5jdGlvbiBjb25maWcob3B0aW9ucykge1xuICAgICAgICAvLyBJZiB0aGUgb3B0aW9ucyBhcmd1bWVudCBpcyBhbiBvYmplY3QsIHdlIHVzZSBpdCB0byBzZXQgdmFsdWVzLlxuICAgICAgICAvLyBPdGhlcndpc2UsIHdlIHJldHVybiBlaXRoZXIgYSBzcGVjaWZpZWQgY29uZmlnIHZhbHVlIG9yIGFsbFxuICAgICAgICAvLyBjb25maWcgdmFsdWVzLlxuICAgICAgICBpZiAoKHR5cGVvZiBvcHRpb25zID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvcHRpb25zKSkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAvLyBJZiBsb2NhbGZvcmFnZSBpcyByZWFkeSBhbmQgZnVsbHkgaW5pdGlhbGl6ZWQsIHdlIGNhbid0IHNldFxuICAgICAgICAgICAgLy8gYW55IG5ldyBjb25maWd1cmF0aW9uIHZhbHVlcy4gSW5zdGVhZCwgd2UgcmV0dXJuIGFuIGVycm9yLlxuICAgICAgICAgICAgaWYgKHRoaXMuX3JlYWR5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihcIkNhbid0IGNhbGwgY29uZmlnKCkgYWZ0ZXIgbG9jYWxmb3JhZ2UgXCIgKyAnaGFzIGJlZW4gdXNlZC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09ICdzdG9yZU5hbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbaV0gPSBvcHRpb25zW2ldLnJlcGxhY2UoL1xcVy9nLCAnXycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpID09PSAndmVyc2lvbicgJiYgdHlwZW9mIG9wdGlvbnNbaV0gIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0RhdGFiYXNlIHZlcnNpb24gbXVzdCBiZSBhIG51bWJlci4nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9jb25maWdbaV0gPSBvcHRpb25zW2ldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBhZnRlciBhbGwgY29uZmlnIG9wdGlvbnMgYXJlIHNldCBhbmRcbiAgICAgICAgICAgIC8vIHRoZSBkcml2ZXIgb3B0aW9uIGlzIHVzZWQsIHRyeSBzZXR0aW5nIGl0XG4gICAgICAgICAgICBpZiAoJ2RyaXZlcicgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmRyaXZlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldERyaXZlcih0aGlzLl9jb25maWcuZHJpdmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnW29wdGlvbnNdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2VkIHRvIGRlZmluZSBhIGN1c3RvbSBkcml2ZXIsIHNoYXJlZCBhY3Jvc3MgYWxsIGluc3RhbmNlcyBvZlxuICAgIC8vIGxvY2FsRm9yYWdlLlxuXG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuZGVmaW5lRHJpdmVyID0gZnVuY3Rpb24gZGVmaW5lRHJpdmVyKGRyaXZlck9iamVjdCwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyaXZlck5hbWUgPSBkcml2ZXJPYmplY3QuX2RyaXZlcjtcbiAgICAgICAgICAgICAgICB2YXIgY29tcGxpYW5jZUVycm9yID0gbmV3IEVycm9yKCdDdXN0b20gZHJpdmVyIG5vdCBjb21wbGlhbnQ7IHNlZSAnICsgJ2h0dHBzOi8vbW96aWxsYS5naXRodWIuaW8vbG9jYWxGb3JhZ2UvI2RlZmluZWRyaXZlcicpO1xuICAgICAgICAgICAgICAgIHZhciBuYW1pbmdFcnJvciA9IG5ldyBFcnJvcignQ3VzdG9tIGRyaXZlciBuYW1lIGFscmVhZHkgaW4gdXNlOiAnICsgZHJpdmVyT2JqZWN0Ll9kcml2ZXIpO1xuXG4gICAgICAgICAgICAgICAgLy8gQSBkcml2ZXIgbmFtZSBzaG91bGQgYmUgZGVmaW5lZCBhbmQgbm90IG92ZXJsYXAgd2l0aCB0aGVcbiAgICAgICAgICAgICAgICAvLyBsaWJyYXJ5LWRlZmluZWQsIGRlZmF1bHQgZHJpdmVycy5cbiAgICAgICAgICAgICAgICBpZiAoIWRyaXZlck9iamVjdC5fZHJpdmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChjb21wbGlhbmNlRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc0xpYnJhcnlEcml2ZXIoZHJpdmVyT2JqZWN0Ll9kcml2ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuYW1pbmdFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VzdG9tRHJpdmVyTWV0aG9kcyA9IExpYnJhcnlNZXRob2RzLmNvbmNhdCgnX2luaXRTdG9yYWdlJyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXN0b21Ecml2ZXJNZXRob2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21Ecml2ZXJNZXRob2QgPSBjdXN0b21Ecml2ZXJNZXRob2RzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1c3RvbURyaXZlck1ldGhvZCB8fCAhZHJpdmVyT2JqZWN0W2N1c3RvbURyaXZlck1ldGhvZF0gfHwgdHlwZW9mIGRyaXZlck9iamVjdFtjdXN0b21Ecml2ZXJNZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoY29tcGxpYW5jZUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBzdXBwb3J0UHJvbWlzZSA9IFByb21pc2UkMS5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICgnX3N1cHBvcnQnIGluIGRyaXZlck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZHJpdmVyT2JqZWN0Ll9zdXBwb3J0ICYmIHR5cGVvZiBkcml2ZXJPYmplY3QuX3N1cHBvcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRQcm9taXNlID0gZHJpdmVyT2JqZWN0Ll9zdXBwb3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0UHJvbWlzZSA9IFByb21pc2UkMS5yZXNvbHZlKCEhZHJpdmVyT2JqZWN0Ll9zdXBwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN1cHBvcnRQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHN1cHBvcnRSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJpdmVyU3VwcG9ydFtkcml2ZXJOYW1lXSA9IHN1cHBvcnRSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIEN1c3RvbURyaXZlcnNbZHJpdmVyTmFtZV0gPSBkcml2ZXJPYmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyhwcm9taXNlLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuZHJpdmVyID0gZnVuY3Rpb24gZHJpdmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZHJpdmVyIHx8IG51bGw7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5nZXREcml2ZXIgPSBmdW5jdGlvbiBnZXREcml2ZXIoZHJpdmVyTmFtZSwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZ2V0RHJpdmVyUHJvbWlzZSA9IFByb21pc2UkMS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoaXNMaWJyYXJ5RHJpdmVyKGRyaXZlck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChkcml2ZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5JTkRFWEVEREI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXN5bmNTdG9yYWdlO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIHNlbGYuTE9DQUxTVE9SQUdFOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZVdyYXBwZXI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5XRUJTUUw6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2ViU1FMU3RvcmFnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEN1c3RvbURyaXZlcnNbZHJpdmVyTmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ3VzdG9tRHJpdmVyc1tkcml2ZXJOYW1lXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEcml2ZXIgbm90IGZvdW5kLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyhnZXREcml2ZXJQcm9taXNlLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBnZXREcml2ZXJQcm9taXNlO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuZ2V0U2VyaWFsaXplciA9IGZ1bmN0aW9uIGdldFNlcmlhbGl6ZXIoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlcmlhbGl6ZXJQcm9taXNlID0gUHJvbWlzZSQxLnJlc29sdmUobG9jYWxmb3JhZ2VTZXJpYWxpemVyKTtcbiAgICAgICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyhzZXJpYWxpemVyUHJvbWlzZSwgY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gc2VyaWFsaXplclByb21pc2U7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5yZWFkeSA9IGZ1bmN0aW9uIHJlYWR5KGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB2YXIgcHJvbWlzZSA9IHNlbGYuX2RyaXZlclNldC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl9yZWFkeSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNlbGYuX3JlYWR5ID0gc2VsZi5faW5pdERyaXZlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVhZHk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4ZWN1dGVUd29DYWxsYmFja3MocHJvbWlzZSwgY2FsbGJhY2ssIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5zZXREcml2ZXIgPSBmdW5jdGlvbiBzZXREcml2ZXIoZHJpdmVycywgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGlmICghaXNBcnJheShkcml2ZXJzKSkge1xuICAgICAgICAgICAgZHJpdmVycyA9IFtkcml2ZXJzXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdXBwb3J0ZWREcml2ZXJzID0gdGhpcy5fZ2V0U3VwcG9ydGVkRHJpdmVycyhkcml2ZXJzKTtcblxuICAgICAgICBmdW5jdGlvbiBzZXREcml2ZXJUb0NvbmZpZygpIHtcbiAgICAgICAgICAgIHNlbGYuX2NvbmZpZy5kcml2ZXIgPSBzZWxmLmRyaXZlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZXh0ZW5kU2VsZldpdGhEcml2ZXIoZHJpdmVyKSB7XG4gICAgICAgICAgICBzZWxmLl9leHRlbmQoZHJpdmVyKTtcbiAgICAgICAgICAgIHNldERyaXZlclRvQ29uZmlnKCk7XG5cbiAgICAgICAgICAgIHNlbGYuX3JlYWR5ID0gc2VsZi5faW5pdFN0b3JhZ2Uoc2VsZi5fY29uZmlnKTtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9yZWFkeTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluaXREcml2ZXIoc3VwcG9ydGVkRHJpdmVycykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudERyaXZlckluZGV4ID0gMDtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRyaXZlclByb21pc2VMb29wKCkge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY3VycmVudERyaXZlckluZGV4IDwgc3VwcG9ydGVkRHJpdmVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcml2ZXJOYW1lID0gc3VwcG9ydGVkRHJpdmVyc1tjdXJyZW50RHJpdmVySW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERyaXZlckluZGV4Kys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RiSW5mbyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZWFkeSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldERyaXZlcihkcml2ZXJOYW1lKS50aGVuKGV4dGVuZFNlbGZXaXRoRHJpdmVyKVtcImNhdGNoXCJdKGRyaXZlclByb21pc2VMb29wKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNldERyaXZlclRvQ29uZmlnKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcignTm8gYXZhaWxhYmxlIHN0b3JhZ2UgbWV0aG9kIGZvdW5kLicpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9kcml2ZXJTZXQgPSBQcm9taXNlJDEucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RyaXZlclNldDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZHJpdmVyUHJvbWlzZUxvb3AoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGVyZSBtaWdodCBiZSBhIGRyaXZlciBpbml0aWFsaXphdGlvbiBpbiBwcm9ncmVzc1xuICAgICAgICAvLyBzbyB3YWl0IGZvciBpdCB0byBmaW5pc2ggaW4gb3JkZXIgdG8gYXZvaWQgYSBwb3NzaWJsZVxuICAgICAgICAvLyByYWNlIGNvbmRpdGlvbiB0byBzZXQgX2RiSW5mb1xuICAgICAgICB2YXIgb2xkRHJpdmVyU2V0RG9uZSA9IHRoaXMuX2RyaXZlclNldCAhPT0gbnVsbCA/IHRoaXMuX2RyaXZlclNldFtcImNhdGNoXCJdKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlJDEucmVzb2x2ZSgpO1xuICAgICAgICB9KSA6IFByb21pc2UkMS5yZXNvbHZlKCk7XG5cbiAgICAgICAgdGhpcy5fZHJpdmVyU2V0ID0gb2xkRHJpdmVyU2V0RG9uZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkcml2ZXJOYW1lID0gc3VwcG9ydGVkRHJpdmVyc1swXTtcbiAgICAgICAgICAgIHNlbGYuX2RiSW5mbyA9IG51bGw7XG4gICAgICAgICAgICBzZWxmLl9yZWFkeSA9IG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiBzZWxmLmdldERyaXZlcihkcml2ZXJOYW1lKS50aGVuKGZ1bmN0aW9uIChkcml2ZXIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9kcml2ZXIgPSBkcml2ZXIuX2RyaXZlcjtcbiAgICAgICAgICAgICAgICBzZXREcml2ZXJUb0NvbmZpZygpO1xuICAgICAgICAgICAgICAgIHNlbGYuX3dyYXBMaWJyYXJ5TWV0aG9kc1dpdGhSZWFkeSgpO1xuICAgICAgICAgICAgICAgIHNlbGYuX2luaXREcml2ZXIgPSBpbml0RHJpdmVyKHN1cHBvcnRlZERyaXZlcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0RHJpdmVyVG9Db25maWcoKTtcbiAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcignTm8gYXZhaWxhYmxlIHN0b3JhZ2UgbWV0aG9kIGZvdW5kLicpO1xuICAgICAgICAgICAgc2VsZi5fZHJpdmVyU2V0ID0gUHJvbWlzZSQxLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZHJpdmVyU2V0O1xuICAgICAgICB9KTtcblxuICAgICAgICBleGVjdXRlVHdvQ2FsbGJhY2tzKHRoaXMuX2RyaXZlclNldCwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gdGhpcy5fZHJpdmVyU2V0O1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuc3VwcG9ydHMgPSBmdW5jdGlvbiBzdXBwb3J0cyhkcml2ZXJOYW1lKSB7XG4gICAgICAgIHJldHVybiAhIWRyaXZlclN1cHBvcnRbZHJpdmVyTmFtZV07XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5fZXh0ZW5kID0gZnVuY3Rpb24gX2V4dGVuZChsaWJyYXJ5TWV0aG9kc0FuZFByb3BlcnRpZXMpIHtcbiAgICAgICAgZXh0ZW5kKHRoaXMsIGxpYnJhcnlNZXRob2RzQW5kUHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5fZ2V0U3VwcG9ydGVkRHJpdmVycyA9IGZ1bmN0aW9uIF9nZXRTdXBwb3J0ZWREcml2ZXJzKGRyaXZlcnMpIHtcbiAgICAgICAgdmFyIHN1cHBvcnRlZERyaXZlcnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRyaXZlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBkcml2ZXJOYW1lID0gZHJpdmVyc1tpXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN1cHBvcnRzKGRyaXZlck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkRHJpdmVycy5wdXNoKGRyaXZlck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWREcml2ZXJzO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuX3dyYXBMaWJyYXJ5TWV0aG9kc1dpdGhSZWFkeSA9IGZ1bmN0aW9uIF93cmFwTGlicmFyeU1ldGhvZHNXaXRoUmVhZHkoKSB7XG4gICAgICAgIC8vIEFkZCBhIHN0dWIgZm9yIGVhY2ggZHJpdmVyIEFQSSBtZXRob2QgdGhhdCBkZWxheXMgdGhlIGNhbGwgdG8gdGhlXG4gICAgICAgIC8vIGNvcnJlc3BvbmRpbmcgZHJpdmVyIG1ldGhvZCB1bnRpbCBsb2NhbEZvcmFnZSBpcyByZWFkeS4gVGhlc2Ugc3R1YnNcbiAgICAgICAgLy8gd2lsbCBiZSByZXBsYWNlZCBieSB0aGUgZHJpdmVyIG1ldGhvZHMgYXMgc29vbiBhcyB0aGUgZHJpdmVyIGlzXG4gICAgICAgIC8vIGxvYWRlZCwgc28gdGhlcmUgaXMgbm8gcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IExpYnJhcnlNZXRob2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjYWxsV2hlblJlYWR5KHRoaXMsIExpYnJhcnlNZXRob2RzW2ldKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuY3JlYXRlSW5zdGFuY2UgPSBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgTG9jYWxGb3JhZ2Uob3B0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBMb2NhbEZvcmFnZTtcbn0oKTtcblxuLy8gVGhlIGFjdHVhbCBsb2NhbEZvcmFnZSBvYmplY3QgdGhhdCB3ZSBleHBvc2UgYXMgYSBtb2R1bGUgb3IgdmlhIGFcbi8vIGdsb2JhbC4gSXQncyBleHRlbmRlZCBieSBwdWxsaW5nIGluIG9uZSBvZiBvdXIgb3RoZXIgbGlicmFyaWVzLlxuXG5cbnZhciBsb2NhbGZvcmFnZV9qcyA9IG5ldyBMb2NhbEZvcmFnZSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGxvY2FsZm9yYWdlX2pzO1xuXG59LHtcIjNcIjozfV19LHt9LFs0XSkoNClcbn0pOyIsIlxuXG5cbi8qKlxuICogVVRNIHpvbmVzIGFyZSBncm91cGVkLCBhbmQgYXNzaWduZWQgdG8gb25lIG9mIGEgZ3JvdXAgb2YgNlxuICogc2V0cy5cbiAqXG4gKiB7aW50fSBAcHJpdmF0ZVxuICovXG52YXIgTlVNXzEwMEtfU0VUUyA9IDY7XG5cbi8qKlxuICogVGhlIGNvbHVtbiBsZXR0ZXJzIChmb3IgZWFzdGluZykgb2YgdGhlIGxvd2VyIGxlZnQgdmFsdWUsIHBlclxuICogc2V0LlxuICpcbiAqIHtzdHJpbmd9IEBwcml2YXRlXG4gKi9cbnZhciBTRVRfT1JJR0lOX0NPTFVNTl9MRVRURVJTID0gJ0FKU0FKUyc7XG5cbi8qKlxuICogVGhlIHJvdyBsZXR0ZXJzIChmb3Igbm9ydGhpbmcpIG9mIHRoZSBsb3dlciBsZWZ0IHZhbHVlLCBwZXJcbiAqIHNldC5cbiAqXG4gKiB7c3RyaW5nfSBAcHJpdmF0ZVxuICovXG52YXIgU0VUX09SSUdJTl9ST1dfTEVUVEVSUyA9ICdBRkFGQUYnO1xuXG52YXIgQSA9IDY1OyAvLyBBXG52YXIgSSA9IDczOyAvLyBJXG52YXIgTyA9IDc5OyAvLyBPXG52YXIgViA9IDg2OyAvLyBWXG52YXIgWiA9IDkwOyAvLyBaXG5cbi8qKlxuICogQ29udmVyc2lvbiBvZiBsYXQvbG9uIHRvIE1HUlMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGxsIE9iamVjdCBsaXRlcmFsIHdpdGggbGF0IGFuZCBsb24gcHJvcGVydGllcyBvbiBhXG4gKiAgICAgV0dTODQgZWxsaXBzb2lkLlxuICogQHBhcmFtIHtpbnR9IGFjY3VyYWN5IEFjY3VyYWN5IGluIGRpZ2l0cyAoNSBmb3IgMSBtLCA0IGZvciAxMCBtLCAzIGZvclxuICogICAgICAxMDAgbSwgMiBmb3IgMTAwMCBtIG9yIDEgZm9yIDEwMDAwIG0pLiBPcHRpb25hbCwgZGVmYXVsdCBpcyA1LlxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgTUdSUyBzdHJpbmcgZm9yIHRoZSBnaXZlbiBsb2NhdGlvbiBhbmQgYWNjdXJhY3kuXG4gKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKGxsLCBhY2N1cmFjeSkge1xuICBhY2N1cmFjeSA9IGFjY3VyYWN5IHx8IDU7IC8vIGRlZmF1bHQgYWNjdXJhY3kgMW1cbiAgcmV0dXJuIGVuY29kZShMTHRvVVRNKHtcbiAgICBsYXQ6IGxsWzFdLFxuICAgIGxvbjogbGxbMF1cbiAgfSksIGFjY3VyYWN5KTtcbn07XG5cbi8qKlxuICogQ29udmVyc2lvbiBvZiBNR1JTIHRvIGxhdC9sb24uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1ncnMgTUdSUyBzdHJpbmcuXG4gKiBAcmV0dXJuIHthcnJheX0gQW4gYXJyYXkgd2l0aCBsZWZ0IChsb25naXR1ZGUpLCBib3R0b20gKGxhdGl0dWRlKSwgcmlnaHRcbiAqICAgICAobG9uZ2l0dWRlKSBhbmQgdG9wIChsYXRpdHVkZSkgdmFsdWVzIGluIFdHUzg0LCByZXByZXNlbnRpbmcgdGhlXG4gKiAgICAgYm91bmRpbmcgYm94IGZvciB0aGUgcHJvdmlkZWQgTUdSUyByZWZlcmVuY2UuXG4gKi9cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKG1ncnMpIHtcbiAgdmFyIGJib3ggPSBVVE10b0xMKGRlY29kZShtZ3JzLnRvVXBwZXJDYXNlKCkpKTtcbiAgaWYgKGJib3gubGF0ICYmIGJib3gubG9uKSB7XG4gICAgcmV0dXJuIFtiYm94LmxvbiwgYmJveC5sYXQsIGJib3gubG9uLCBiYm94LmxhdF07XG4gIH1cbiAgcmV0dXJuIFtiYm94LmxlZnQsIGJib3guYm90dG9tLCBiYm94LnJpZ2h0LCBiYm94LnRvcF07XG59O1xuXG5leHBvcnRzLnRvUG9pbnQgPSBmdW5jdGlvbihtZ3JzKSB7XG4gIHZhciBiYm94ID0gVVRNdG9MTChkZWNvZGUobWdycy50b1VwcGVyQ2FzZSgpKSk7XG4gIGlmIChiYm94LmxhdCAmJiBiYm94Lmxvbikge1xuICAgIHJldHVybiBbYmJveC5sb24sIGJib3gubGF0XTtcbiAgfVxuICByZXR1cm4gWyhiYm94LmxlZnQgKyBiYm94LnJpZ2h0KSAvIDIsIChiYm94LnRvcCArIGJib3guYm90dG9tKSAvIDJdO1xufTtcbi8qKlxuICogQ29udmVyc2lvbiBmcm9tIGRlZ3JlZXMgdG8gcmFkaWFucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IGRlZyB0aGUgYW5nbGUgaW4gZGVncmVlcy5cbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGFuZ2xlIGluIHJhZGlhbnMuXG4gKi9cbmZ1bmN0aW9uIGRlZ1RvUmFkKGRlZykge1xuICByZXR1cm4gKGRlZyAqIChNYXRoLlBJIC8gMTgwLjApKTtcbn1cblxuLyoqXG4gKiBDb252ZXJzaW9uIGZyb20gcmFkaWFucyB0byBkZWdyZWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIHRoZSBhbmdsZSBpbiByYWRpYW5zLlxuICogQHJldHVybiB7bnVtYmVyfSB0aGUgYW5nbGUgaW4gZGVncmVlcy5cbiAqL1xuZnVuY3Rpb24gcmFkVG9EZWcocmFkKSB7XG4gIHJldHVybiAoMTgwLjAgKiAocmFkIC8gTWF0aC5QSSkpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgc2V0IG9mIExvbmdpdHVkZSBhbmQgTGF0aXR1ZGUgY28tb3JkaW5hdGVzIHRvIFVUTVxuICogdXNpbmcgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IGxsIE9iamVjdCBsaXRlcmFsIHdpdGggbGF0IGFuZCBsb24gcHJvcGVydGllc1xuICogICAgIHJlcHJlc2VudGluZyB0aGUgV0dTODQgY29vcmRpbmF0ZSB0byBiZSBjb252ZXJ0ZWQuXG4gKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCBsaXRlcmFsIGNvbnRhaW5pbmcgdGhlIFVUTSB2YWx1ZSB3aXRoIGVhc3RpbmcsXG4gKiAgICAgbm9ydGhpbmcsIHpvbmVOdW1iZXIgYW5kIHpvbmVMZXR0ZXIgcHJvcGVydGllcywgYW5kIGFuIG9wdGlvbmFsXG4gKiAgICAgYWNjdXJhY3kgcHJvcGVydHkgaW4gZGlnaXRzLiBSZXR1cm5zIG51bGwgaWYgdGhlIGNvbnZlcnNpb24gZmFpbGVkLlxuICovXG5mdW5jdGlvbiBMTHRvVVRNKGxsKSB7XG4gIHZhciBMYXQgPSBsbC5sYXQ7XG4gIHZhciBMb25nID0gbGwubG9uO1xuICB2YXIgYSA9IDYzNzgxMzcuMDsgLy9lbGxpcC5yYWRpdXM7XG4gIHZhciBlY2NTcXVhcmVkID0gMC4wMDY2OTQzODsgLy9lbGxpcC5lY2NzcTtcbiAgdmFyIGswID0gMC45OTk2O1xuICB2YXIgTG9uZ09yaWdpbjtcbiAgdmFyIGVjY1ByaW1lU3F1YXJlZDtcbiAgdmFyIE4sIFQsIEMsIEEsIE07XG4gIHZhciBMYXRSYWQgPSBkZWdUb1JhZChMYXQpO1xuICB2YXIgTG9uZ1JhZCA9IGRlZ1RvUmFkKExvbmcpO1xuICB2YXIgTG9uZ09yaWdpblJhZDtcbiAgdmFyIFpvbmVOdW1iZXI7XG4gIC8vIChpbnQpXG4gIFpvbmVOdW1iZXIgPSBNYXRoLmZsb29yKChMb25nICsgMTgwKSAvIDYpICsgMTtcblxuICAvL01ha2Ugc3VyZSB0aGUgbG9uZ2l0dWRlIDE4MC4wMCBpcyBpbiBab25lIDYwXG4gIGlmIChMb25nID09PSAxODApIHtcbiAgICBab25lTnVtYmVyID0gNjA7XG4gIH1cblxuICAvLyBTcGVjaWFsIHpvbmUgZm9yIE5vcndheVxuICBpZiAoTGF0ID49IDU2LjAgJiYgTGF0IDwgNjQuMCAmJiBMb25nID49IDMuMCAmJiBMb25nIDwgMTIuMCkge1xuICAgIFpvbmVOdW1iZXIgPSAzMjtcbiAgfVxuXG4gIC8vIFNwZWNpYWwgem9uZXMgZm9yIFN2YWxiYXJkXG4gIGlmIChMYXQgPj0gNzIuMCAmJiBMYXQgPCA4NC4wKSB7XG4gICAgaWYgKExvbmcgPj0gMC4wICYmIExvbmcgPCA5LjApIHtcbiAgICAgIFpvbmVOdW1iZXIgPSAzMTtcbiAgICB9XG4gICAgZWxzZSBpZiAoTG9uZyA+PSA5LjAgJiYgTG9uZyA8IDIxLjApIHtcbiAgICAgIFpvbmVOdW1iZXIgPSAzMztcbiAgICB9XG4gICAgZWxzZSBpZiAoTG9uZyA+PSAyMS4wICYmIExvbmcgPCAzMy4wKSB7XG4gICAgICBab25lTnVtYmVyID0gMzU7XG4gICAgfVxuICAgIGVsc2UgaWYgKExvbmcgPj0gMzMuMCAmJiBMb25nIDwgNDIuMCkge1xuICAgICAgWm9uZU51bWJlciA9IDM3O1xuICAgIH1cbiAgfVxuXG4gIExvbmdPcmlnaW4gPSAoWm9uZU51bWJlciAtIDEpICogNiAtIDE4MCArIDM7IC8vKzMgcHV0cyBvcmlnaW5cbiAgLy8gaW4gbWlkZGxlIG9mXG4gIC8vIHpvbmVcbiAgTG9uZ09yaWdpblJhZCA9IGRlZ1RvUmFkKExvbmdPcmlnaW4pO1xuXG4gIGVjY1ByaW1lU3F1YXJlZCA9IChlY2NTcXVhcmVkKSAvICgxIC0gZWNjU3F1YXJlZCk7XG5cbiAgTiA9IGEgLyBNYXRoLnNxcnQoMSAtIGVjY1NxdWFyZWQgKiBNYXRoLnNpbihMYXRSYWQpICogTWF0aC5zaW4oTGF0UmFkKSk7XG4gIFQgPSBNYXRoLnRhbihMYXRSYWQpICogTWF0aC50YW4oTGF0UmFkKTtcbiAgQyA9IGVjY1ByaW1lU3F1YXJlZCAqIE1hdGguY29zKExhdFJhZCkgKiBNYXRoLmNvcyhMYXRSYWQpO1xuICBBID0gTWF0aC5jb3MoTGF0UmFkKSAqIChMb25nUmFkIC0gTG9uZ09yaWdpblJhZCk7XG5cbiAgTSA9IGEgKiAoKDEgLSBlY2NTcXVhcmVkIC8gNCAtIDMgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDY0IC0gNSAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDI1NikgKiBMYXRSYWQgLSAoMyAqIGVjY1NxdWFyZWQgLyA4ICsgMyAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkIC8gMzIgKyA0NSAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDEwMjQpICogTWF0aC5zaW4oMiAqIExhdFJhZCkgKyAoMTUgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDI1NiArIDQ1ICogZWNjU3F1YXJlZCAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkIC8gMTAyNCkgKiBNYXRoLnNpbig0ICogTGF0UmFkKSAtICgzNSAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDMwNzIpICogTWF0aC5zaW4oNiAqIExhdFJhZCkpO1xuXG4gIHZhciBVVE1FYXN0aW5nID0gKGswICogTiAqIChBICsgKDEgLSBUICsgQykgKiBBICogQSAqIEEgLyA2LjAgKyAoNSAtIDE4ICogVCArIFQgKiBUICsgNzIgKiBDIC0gNTggKiBlY2NQcmltZVNxdWFyZWQpICogQSAqIEEgKiBBICogQSAqIEEgLyAxMjAuMCkgKyA1MDAwMDAuMCk7XG5cbiAgdmFyIFVUTU5vcnRoaW5nID0gKGswICogKE0gKyBOICogTWF0aC50YW4oTGF0UmFkKSAqIChBICogQSAvIDIgKyAoNSAtIFQgKyA5ICogQyArIDQgKiBDICogQykgKiBBICogQSAqIEEgKiBBIC8gMjQuMCArICg2MSAtIDU4ICogVCArIFQgKiBUICsgNjAwICogQyAtIDMzMCAqIGVjY1ByaW1lU3F1YXJlZCkgKiBBICogQSAqIEEgKiBBICogQSAqIEEgLyA3MjAuMCkpKTtcbiAgaWYgKExhdCA8IDAuMCkge1xuICAgIFVUTU5vcnRoaW5nICs9IDEwMDAwMDAwLjA7IC8vMTAwMDAwMDAgbWV0ZXIgb2Zmc2V0IGZvclxuICAgIC8vIHNvdXRoZXJuIGhlbWlzcGhlcmVcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbm9ydGhpbmc6IE1hdGgucm91bmQoVVRNTm9ydGhpbmcpLFxuICAgIGVhc3Rpbmc6IE1hdGgucm91bmQoVVRNRWFzdGluZyksXG4gICAgem9uZU51bWJlcjogWm9uZU51bWJlcixcbiAgICB6b25lTGV0dGVyOiBnZXRMZXR0ZXJEZXNpZ25hdG9yKExhdClcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBVVE0gY29vcmRzIHRvIGxhdC9sb25nLCB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLiBUaGlzIGlzIGEgY29udmVuaWVuY2VcbiAqIGNsYXNzIHdoZXJlIHRoZSBab25lIGNhbiBiZSBzcGVjaWZpZWQgYXMgYSBzaW5nbGUgc3RyaW5nIGVnLlwiNjBOXCIgd2hpY2hcbiAqIGlzIHRoZW4gYnJva2VuIGRvd24gaW50byB0aGUgWm9uZU51bWJlciBhbmQgWm9uZUxldHRlci5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IHV0bSBBbiBvYmplY3QgbGl0ZXJhbCB3aXRoIG5vcnRoaW5nLCBlYXN0aW5nLCB6b25lTnVtYmVyXG4gKiAgICAgYW5kIHpvbmVMZXR0ZXIgcHJvcGVydGllcy4gSWYgYW4gb3B0aW9uYWwgYWNjdXJhY3kgcHJvcGVydHkgaXNcbiAqICAgICBwcm92aWRlZCAoaW4gbWV0ZXJzKSwgYSBib3VuZGluZyBib3ggd2lsbCBiZSByZXR1cm5lZCBpbnN0ZWFkIG9mXG4gKiAgICAgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZS5cbiAqIEByZXR1cm4ge29iamVjdH0gQW4gb2JqZWN0IGxpdGVyYWwgY29udGFpbmluZyBlaXRoZXIgbGF0IGFuZCBsb24gdmFsdWVzXG4gKiAgICAgKGlmIG5vIGFjY3VyYWN5IHdhcyBwcm92aWRlZCksIG9yIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdCB2YWx1ZXNcbiAqICAgICBmb3IgdGhlIGJvdW5kaW5nIGJveCBjYWxjdWxhdGVkIGFjY29yZGluZyB0byB0aGUgcHJvdmlkZWQgYWNjdXJhY3kuXG4gKiAgICAgUmV0dXJucyBudWxsIGlmIHRoZSBjb252ZXJzaW9uIGZhaWxlZC5cbiAqL1xuZnVuY3Rpb24gVVRNdG9MTCh1dG0pIHtcblxuICB2YXIgVVRNTm9ydGhpbmcgPSB1dG0ubm9ydGhpbmc7XG4gIHZhciBVVE1FYXN0aW5nID0gdXRtLmVhc3Rpbmc7XG4gIHZhciB6b25lTGV0dGVyID0gdXRtLnpvbmVMZXR0ZXI7XG4gIHZhciB6b25lTnVtYmVyID0gdXRtLnpvbmVOdW1iZXI7XG4gIC8vIGNoZWNrIHRoZSBab25lTnVtbWJlciBpcyB2YWxpZFxuICBpZiAoem9uZU51bWJlciA8IDAgfHwgem9uZU51bWJlciA+IDYwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgazAgPSAwLjk5OTY7XG4gIHZhciBhID0gNjM3ODEzNy4wOyAvL2VsbGlwLnJhZGl1cztcbiAgdmFyIGVjY1NxdWFyZWQgPSAwLjAwNjY5NDM4OyAvL2VsbGlwLmVjY3NxO1xuICB2YXIgZWNjUHJpbWVTcXVhcmVkO1xuICB2YXIgZTEgPSAoMSAtIE1hdGguc3FydCgxIC0gZWNjU3F1YXJlZCkpIC8gKDEgKyBNYXRoLnNxcnQoMSAtIGVjY1NxdWFyZWQpKTtcbiAgdmFyIE4xLCBUMSwgQzEsIFIxLCBELCBNO1xuICB2YXIgTG9uZ09yaWdpbjtcbiAgdmFyIG11LCBwaGkxUmFkO1xuXG4gIC8vIHJlbW92ZSA1MDAsMDAwIG1ldGVyIG9mZnNldCBmb3IgbG9uZ2l0dWRlXG4gIHZhciB4ID0gVVRNRWFzdGluZyAtIDUwMDAwMC4wO1xuICB2YXIgeSA9IFVUTU5vcnRoaW5nO1xuXG4gIC8vIFdlIG11c3Qga25vdyBzb21laG93IGlmIHdlIGFyZSBpbiB0aGUgTm9ydGhlcm4gb3IgU291dGhlcm5cbiAgLy8gaGVtaXNwaGVyZSwgdGhpcyBpcyB0aGUgb25seSB0aW1lIHdlIHVzZSB0aGUgbGV0dGVyIFNvIGV2ZW5cbiAgLy8gaWYgdGhlIFpvbmUgbGV0dGVyIGlzbid0IGV4YWN0bHkgY29ycmVjdCBpdCBzaG91bGQgaW5kaWNhdGVcbiAgLy8gdGhlIGhlbWlzcGhlcmUgY29ycmVjdGx5XG4gIGlmICh6b25lTGV0dGVyIDwgJ04nKSB7XG4gICAgeSAtPSAxMDAwMDAwMC4wOyAvLyByZW1vdmUgMTAsMDAwLDAwMCBtZXRlciBvZmZzZXQgdXNlZFxuICAgIC8vIGZvciBzb3V0aGVybiBoZW1pc3BoZXJlXG4gIH1cblxuICAvLyBUaGVyZSBhcmUgNjAgem9uZXMgd2l0aCB6b25lIDEgYmVpbmcgYXQgV2VzdCAtMTgwIHRvIC0xNzRcbiAgTG9uZ09yaWdpbiA9ICh6b25lTnVtYmVyIC0gMSkgKiA2IC0gMTgwICsgMzsgLy8gKzMgcHV0cyBvcmlnaW5cbiAgLy8gaW4gbWlkZGxlIG9mXG4gIC8vIHpvbmVcblxuICBlY2NQcmltZVNxdWFyZWQgPSAoZWNjU3F1YXJlZCkgLyAoMSAtIGVjY1NxdWFyZWQpO1xuXG4gIE0gPSB5IC8gazA7XG4gIG11ID0gTSAvIChhICogKDEgLSBlY2NTcXVhcmVkIC8gNCAtIDMgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDY0IC0gNSAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDI1NikpO1xuXG4gIHBoaTFSYWQgPSBtdSArICgzICogZTEgLyAyIC0gMjcgKiBlMSAqIGUxICogZTEgLyAzMikgKiBNYXRoLnNpbigyICogbXUpICsgKDIxICogZTEgKiBlMSAvIDE2IC0gNTUgKiBlMSAqIGUxICogZTEgKiBlMSAvIDMyKSAqIE1hdGguc2luKDQgKiBtdSkgKyAoMTUxICogZTEgKiBlMSAqIGUxIC8gOTYpICogTWF0aC5zaW4oNiAqIG11KTtcbiAgLy8gZG91YmxlIHBoaTEgPSBQcm9qTWF0aC5yYWRUb0RlZyhwaGkxUmFkKTtcblxuICBOMSA9IGEgLyBNYXRoLnNxcnQoMSAtIGVjY1NxdWFyZWQgKiBNYXRoLnNpbihwaGkxUmFkKSAqIE1hdGguc2luKHBoaTFSYWQpKTtcbiAgVDEgPSBNYXRoLnRhbihwaGkxUmFkKSAqIE1hdGgudGFuKHBoaTFSYWQpO1xuICBDMSA9IGVjY1ByaW1lU3F1YXJlZCAqIE1hdGguY29zKHBoaTFSYWQpICogTWF0aC5jb3MocGhpMVJhZCk7XG4gIFIxID0gYSAqICgxIC0gZWNjU3F1YXJlZCkgLyBNYXRoLnBvdygxIC0gZWNjU3F1YXJlZCAqIE1hdGguc2luKHBoaTFSYWQpICogTWF0aC5zaW4ocGhpMVJhZCksIDEuNSk7XG4gIEQgPSB4IC8gKE4xICogazApO1xuXG4gIHZhciBsYXQgPSBwaGkxUmFkIC0gKE4xICogTWF0aC50YW4ocGhpMVJhZCkgLyBSMSkgKiAoRCAqIEQgLyAyIC0gKDUgKyAzICogVDEgKyAxMCAqIEMxIC0gNCAqIEMxICogQzEgLSA5ICogZWNjUHJpbWVTcXVhcmVkKSAqIEQgKiBEICogRCAqIEQgLyAyNCArICg2MSArIDkwICogVDEgKyAyOTggKiBDMSArIDQ1ICogVDEgKiBUMSAtIDI1MiAqIGVjY1ByaW1lU3F1YXJlZCAtIDMgKiBDMSAqIEMxKSAqIEQgKiBEICogRCAqIEQgKiBEICogRCAvIDcyMCk7XG4gIGxhdCA9IHJhZFRvRGVnKGxhdCk7XG5cbiAgdmFyIGxvbiA9IChEIC0gKDEgKyAyICogVDEgKyBDMSkgKiBEICogRCAqIEQgLyA2ICsgKDUgLSAyICogQzEgKyAyOCAqIFQxIC0gMyAqIEMxICogQzEgKyA4ICogZWNjUHJpbWVTcXVhcmVkICsgMjQgKiBUMSAqIFQxKSAqIEQgKiBEICogRCAqIEQgKiBEIC8gMTIwKSAvIE1hdGguY29zKHBoaTFSYWQpO1xuICBsb24gPSBMb25nT3JpZ2luICsgcmFkVG9EZWcobG9uKTtcblxuICB2YXIgcmVzdWx0O1xuICBpZiAodXRtLmFjY3VyYWN5KSB7XG4gICAgdmFyIHRvcFJpZ2h0ID0gVVRNdG9MTCh7XG4gICAgICBub3J0aGluZzogdXRtLm5vcnRoaW5nICsgdXRtLmFjY3VyYWN5LFxuICAgICAgZWFzdGluZzogdXRtLmVhc3RpbmcgKyB1dG0uYWNjdXJhY3ksXG4gICAgICB6b25lTGV0dGVyOiB1dG0uem9uZUxldHRlcixcbiAgICAgIHpvbmVOdW1iZXI6IHV0bS56b25lTnVtYmVyXG4gICAgfSk7XG4gICAgcmVzdWx0ID0ge1xuICAgICAgdG9wOiB0b3BSaWdodC5sYXQsXG4gICAgICByaWdodDogdG9wUmlnaHQubG9uLFxuICAgICAgYm90dG9tOiBsYXQsXG4gICAgICBsZWZ0OiBsb25cbiAgICB9O1xuICB9XG4gIGVsc2Uge1xuICAgIHJlc3VsdCA9IHtcbiAgICAgIGxhdDogbGF0LFxuICAgICAgbG9uOiBsb25cbiAgICB9O1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgTUdSUyBsZXR0ZXIgZGVzaWduYXRvciBmb3IgdGhlIGdpdmVuIGxhdGl0dWRlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbGF0IFRoZSBsYXRpdHVkZSBpbiBXR1M4NCB0byBnZXQgdGhlIGxldHRlciBkZXNpZ25hdG9yXG4gKiAgICAgZm9yLlxuICogQHJldHVybiB7Y2hhcn0gVGhlIGxldHRlciBkZXNpZ25hdG9yLlxuICovXG5mdW5jdGlvbiBnZXRMZXR0ZXJEZXNpZ25hdG9yKGxhdCkge1xuICAvL1RoaXMgaXMgaGVyZSBhcyBhbiBlcnJvciBmbGFnIHRvIHNob3cgdGhhdCB0aGUgTGF0aXR1ZGUgaXNcbiAgLy9vdXRzaWRlIE1HUlMgbGltaXRzXG4gIHZhciBMZXR0ZXJEZXNpZ25hdG9yID0gJ1onO1xuXG4gIGlmICgoODQgPj0gbGF0KSAmJiAobGF0ID49IDcyKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnWCc7XG4gIH1cbiAgZWxzZSBpZiAoKDcyID4gbGF0KSAmJiAobGF0ID49IDY0KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnVyc7XG4gIH1cbiAgZWxzZSBpZiAoKDY0ID4gbGF0KSAmJiAobGF0ID49IDU2KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnVic7XG4gIH1cbiAgZWxzZSBpZiAoKDU2ID4gbGF0KSAmJiAobGF0ID49IDQ4KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnVSc7XG4gIH1cbiAgZWxzZSBpZiAoKDQ4ID4gbGF0KSAmJiAobGF0ID49IDQwKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnVCc7XG4gIH1cbiAgZWxzZSBpZiAoKDQwID4gbGF0KSAmJiAobGF0ID49IDMyKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnUyc7XG4gIH1cbiAgZWxzZSBpZiAoKDMyID4gbGF0KSAmJiAobGF0ID49IDI0KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnUic7XG4gIH1cbiAgZWxzZSBpZiAoKDI0ID4gbGF0KSAmJiAobGF0ID49IDE2KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnUSc7XG4gIH1cbiAgZWxzZSBpZiAoKDE2ID4gbGF0KSAmJiAobGF0ID49IDgpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdQJztcbiAgfVxuICBlbHNlIGlmICgoOCA+IGxhdCkgJiYgKGxhdCA+PSAwKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnTic7XG4gIH1cbiAgZWxzZSBpZiAoKDAgPiBsYXQpICYmIChsYXQgPj0gLTgpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdNJztcbiAgfVxuICBlbHNlIGlmICgoLTggPiBsYXQpICYmIChsYXQgPj0gLTE2KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnTCc7XG4gIH1cbiAgZWxzZSBpZiAoKC0xNiA+IGxhdCkgJiYgKGxhdCA+PSAtMjQpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdLJztcbiAgfVxuICBlbHNlIGlmICgoLTI0ID4gbGF0KSAmJiAobGF0ID49IC0zMikpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ0onO1xuICB9XG4gIGVsc2UgaWYgKCgtMzIgPiBsYXQpICYmIChsYXQgPj0gLTQwKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnSCc7XG4gIH1cbiAgZWxzZSBpZiAoKC00MCA+IGxhdCkgJiYgKGxhdCA+PSAtNDgpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdHJztcbiAgfVxuICBlbHNlIGlmICgoLTQ4ID4gbGF0KSAmJiAobGF0ID49IC01NikpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ0YnO1xuICB9XG4gIGVsc2UgaWYgKCgtNTYgPiBsYXQpICYmIChsYXQgPj0gLTY0KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnRSc7XG4gIH1cbiAgZWxzZSBpZiAoKC02NCA+IGxhdCkgJiYgKGxhdCA+PSAtNzIpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdEJztcbiAgfVxuICBlbHNlIGlmICgoLTcyID4gbGF0KSAmJiAobGF0ID49IC04MCkpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ0MnO1xuICB9XG4gIHJldHVybiBMZXR0ZXJEZXNpZ25hdG9yO1xufVxuXG4vKipcbiAqIEVuY29kZXMgYSBVVE0gbG9jYXRpb24gYXMgTUdSUyBzdHJpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSB1dG0gQW4gb2JqZWN0IGxpdGVyYWwgd2l0aCBlYXN0aW5nLCBub3J0aGluZyxcbiAqICAgICB6b25lTGV0dGVyLCB6b25lTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYWNjdXJhY3kgQWNjdXJhY3kgaW4gZGlnaXRzICgxLTUpLlxuICogQHJldHVybiB7c3RyaW5nfSBNR1JTIHN0cmluZyBmb3IgdGhlIGdpdmVuIFVUTSBsb2NhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZW5jb2RlKHV0bSwgYWNjdXJhY3kpIHtcbiAgLy8gcHJlcGVuZCB3aXRoIGxlYWRpbmcgemVyb2VzXG4gIHZhciBzZWFzdGluZyA9IFwiMDAwMDBcIiArIHV0bS5lYXN0aW5nLFxuICAgIHNub3J0aGluZyA9IFwiMDAwMDBcIiArIHV0bS5ub3J0aGluZztcblxuICByZXR1cm4gdXRtLnpvbmVOdW1iZXIgKyB1dG0uem9uZUxldHRlciArIGdldDEwMGtJRCh1dG0uZWFzdGluZywgdXRtLm5vcnRoaW5nLCB1dG0uem9uZU51bWJlcikgKyBzZWFzdGluZy5zdWJzdHIoc2Vhc3RpbmcubGVuZ3RoIC0gNSwgYWNjdXJhY3kpICsgc25vcnRoaW5nLnN1YnN0cihzbm9ydGhpbmcubGVuZ3RoIC0gNSwgYWNjdXJhY3kpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdHdvIGxldHRlciAxMDBrIGRlc2lnbmF0b3IgZm9yIGEgZ2l2ZW4gVVRNIGVhc3RpbmcsXG4gKiBub3J0aGluZyBhbmQgem9uZSBudW1iZXIgdmFsdWUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBlYXN0aW5nXG4gKiBAcGFyYW0ge251bWJlcn0gbm9ydGhpbmdcbiAqIEBwYXJhbSB7bnVtYmVyfSB6b25lTnVtYmVyXG4gKiBAcmV0dXJuIHRoZSB0d28gbGV0dGVyIDEwMGsgZGVzaWduYXRvciBmb3IgdGhlIGdpdmVuIFVUTSBsb2NhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0MTAwa0lEKGVhc3RpbmcsIG5vcnRoaW5nLCB6b25lTnVtYmVyKSB7XG4gIHZhciBzZXRQYXJtID0gZ2V0MTAwa1NldEZvclpvbmUoem9uZU51bWJlcik7XG4gIHZhciBzZXRDb2x1bW4gPSBNYXRoLmZsb29yKGVhc3RpbmcgLyAxMDAwMDApO1xuICB2YXIgc2V0Um93ID0gTWF0aC5mbG9vcihub3J0aGluZyAvIDEwMDAwMCkgJSAyMDtcbiAgcmV0dXJuIGdldExldHRlcjEwMGtJRChzZXRDb2x1bW4sIHNldFJvdywgc2V0UGFybSk7XG59XG5cbi8qKlxuICogR2l2ZW4gYSBVVE0gem9uZSBudW1iZXIsIGZpZ3VyZSBvdXQgdGhlIE1HUlMgMTAwSyBzZXQgaXQgaXMgaW4uXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIEFuIFVUTSB6b25lIG51bWJlci5cbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIDEwMGsgc2V0IHRoZSBVVE0gem9uZSBpcyBpbi5cbiAqL1xuZnVuY3Rpb24gZ2V0MTAwa1NldEZvclpvbmUoaSkge1xuICB2YXIgc2V0UGFybSA9IGkgJSBOVU1fMTAwS19TRVRTO1xuICBpZiAoc2V0UGFybSA9PT0gMCkge1xuICAgIHNldFBhcm0gPSBOVU1fMTAwS19TRVRTO1xuICB9XG5cbiAgcmV0dXJuIHNldFBhcm07XG59XG5cbi8qKlxuICogR2V0IHRoZSB0d28tbGV0dGVyIE1HUlMgMTAwayBkZXNpZ25hdG9yIGdpdmVuIGluZm9ybWF0aW9uXG4gKiB0cmFuc2xhdGVkIGZyb20gdGhlIFVUTSBub3J0aGluZywgZWFzdGluZyBhbmQgem9uZSBudW1iZXIuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2x1bW4gdGhlIGNvbHVtbiBpbmRleCBhcyBpdCByZWxhdGVzIHRvIHRoZSBNR1JTXG4gKiAgICAgICAgMTAwayBzZXQgc3ByZWFkc2hlZXQsIGNyZWF0ZWQgZnJvbSB0aGUgVVRNIGVhc3RpbmcuXG4gKiAgICAgICAgVmFsdWVzIGFyZSAxLTguXG4gKiBAcGFyYW0ge251bWJlcn0gcm93IHRoZSByb3cgaW5kZXggYXMgaXQgcmVsYXRlcyB0byB0aGUgTUdSUyAxMDBrIHNldFxuICogICAgICAgIHNwcmVhZHNoZWV0LCBjcmVhdGVkIGZyb20gdGhlIFVUTSBub3J0aGluZyB2YWx1ZS4gVmFsdWVzXG4gKiAgICAgICAgYXJlIGZyb20gMC0xOS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBwYXJtIHRoZSBzZXQgYmxvY2ssIGFzIGl0IHJlbGF0ZXMgdG8gdGhlIE1HUlMgMTAwayBzZXRcbiAqICAgICAgICBzcHJlYWRzaGVldCwgY3JlYXRlZCBmcm9tIHRoZSBVVE0gem9uZS4gVmFsdWVzIGFyZSBmcm9tXG4gKiAgICAgICAgMS02MC5cbiAqIEByZXR1cm4gdHdvIGxldHRlciBNR1JTIDEwMGsgY29kZS5cbiAqL1xuZnVuY3Rpb24gZ2V0TGV0dGVyMTAwa0lEKGNvbHVtbiwgcm93LCBwYXJtKSB7XG4gIC8vIGNvbE9yaWdpbiBhbmQgcm93T3JpZ2luIGFyZSB0aGUgbGV0dGVycyBhdCB0aGUgb3JpZ2luIG9mIHRoZSBzZXRcbiAgdmFyIGluZGV4ID0gcGFybSAtIDE7XG4gIHZhciBjb2xPcmlnaW4gPSBTRVRfT1JJR0lOX0NPTFVNTl9MRVRURVJTLmNoYXJDb2RlQXQoaW5kZXgpO1xuICB2YXIgcm93T3JpZ2luID0gU0VUX09SSUdJTl9ST1dfTEVUVEVSUy5jaGFyQ29kZUF0KGluZGV4KTtcblxuICAvLyBjb2xJbnQgYW5kIHJvd0ludCBhcmUgdGhlIGxldHRlcnMgdG8gYnVpbGQgdG8gcmV0dXJuXG4gIHZhciBjb2xJbnQgPSBjb2xPcmlnaW4gKyBjb2x1bW4gLSAxO1xuICB2YXIgcm93SW50ID0gcm93T3JpZ2luICsgcm93O1xuICB2YXIgcm9sbG92ZXIgPSBmYWxzZTtcblxuICBpZiAoY29sSW50ID4gWikge1xuICAgIGNvbEludCA9IGNvbEludCAtIFogKyBBIC0gMTtcbiAgICByb2xsb3ZlciA9IHRydWU7XG4gIH1cblxuICBpZiAoY29sSW50ID09PSBJIHx8IChjb2xPcmlnaW4gPCBJICYmIGNvbEludCA+IEkpIHx8ICgoY29sSW50ID4gSSB8fCBjb2xPcmlnaW4gPCBJKSAmJiByb2xsb3ZlcikpIHtcbiAgICBjb2xJbnQrKztcbiAgfVxuXG4gIGlmIChjb2xJbnQgPT09IE8gfHwgKGNvbE9yaWdpbiA8IE8gJiYgY29sSW50ID4gTykgfHwgKChjb2xJbnQgPiBPIHx8IGNvbE9yaWdpbiA8IE8pICYmIHJvbGxvdmVyKSkge1xuICAgIGNvbEludCsrO1xuXG4gICAgaWYgKGNvbEludCA9PT0gSSkge1xuICAgICAgY29sSW50Kys7XG4gICAgfVxuICB9XG5cbiAgaWYgKGNvbEludCA+IFopIHtcbiAgICBjb2xJbnQgPSBjb2xJbnQgLSBaICsgQSAtIDE7XG4gIH1cblxuICBpZiAocm93SW50ID4gVikge1xuICAgIHJvd0ludCA9IHJvd0ludCAtIFYgKyBBIC0gMTtcbiAgICByb2xsb3ZlciA9IHRydWU7XG4gIH1cbiAgZWxzZSB7XG4gICAgcm9sbG92ZXIgPSBmYWxzZTtcbiAgfVxuXG4gIGlmICgoKHJvd0ludCA9PT0gSSkgfHwgKChyb3dPcmlnaW4gPCBJKSAmJiAocm93SW50ID4gSSkpKSB8fCAoKChyb3dJbnQgPiBJKSB8fCAocm93T3JpZ2luIDwgSSkpICYmIHJvbGxvdmVyKSkge1xuICAgIHJvd0ludCsrO1xuICB9XG5cbiAgaWYgKCgocm93SW50ID09PSBPKSB8fCAoKHJvd09yaWdpbiA8IE8pICYmIChyb3dJbnQgPiBPKSkpIHx8ICgoKHJvd0ludCA+IE8pIHx8IChyb3dPcmlnaW4gPCBPKSkgJiYgcm9sbG92ZXIpKSB7XG4gICAgcm93SW50Kys7XG5cbiAgICBpZiAocm93SW50ID09PSBJKSB7XG4gICAgICByb3dJbnQrKztcbiAgICB9XG4gIH1cblxuICBpZiAocm93SW50ID4gVikge1xuICAgIHJvd0ludCA9IHJvd0ludCAtIFYgKyBBIC0gMTtcbiAgfVxuXG4gIHZhciB0d29MZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbEludCkgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKHJvd0ludCk7XG4gIHJldHVybiB0d29MZXR0ZXI7XG59XG5cbi8qKlxuICogRGVjb2RlIHRoZSBVVE0gcGFyYW1ldGVycyBmcm9tIGEgTUdSUyBzdHJpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZ3JzU3RyaW5nIGFuIFVQUEVSQ0FTRSBjb29yZGluYXRlIHN0cmluZyBpcyBleHBlY3RlZC5cbiAqIEByZXR1cm4ge29iamVjdH0gQW4gb2JqZWN0IGxpdGVyYWwgd2l0aCBlYXN0aW5nLCBub3J0aGluZywgem9uZUxldHRlcixcbiAqICAgICB6b25lTnVtYmVyIGFuZCBhY2N1cmFjeSAoaW4gbWV0ZXJzKSBwcm9wZXJ0aWVzLlxuICovXG5mdW5jdGlvbiBkZWNvZGUobWdyc1N0cmluZykge1xuXG4gIGlmIChtZ3JzU3RyaW5nICYmIG1ncnNTdHJpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgKFwiTUdSU1BvaW50IGNvdmVydGluZyBmcm9tIG5vdGhpbmdcIik7XG4gIH1cblxuICB2YXIgbGVuZ3RoID0gbWdyc1N0cmluZy5sZW5ndGg7XG5cbiAgdmFyIGh1bksgPSBudWxsO1xuICB2YXIgc2IgPSBcIlwiO1xuICB2YXIgdGVzdENoYXI7XG4gIHZhciBpID0gMDtcblxuICAvLyBnZXQgWm9uZSBudW1iZXJcbiAgd2hpbGUgKCEoL1tBLVpdLykudGVzdCh0ZXN0Q2hhciA9IG1ncnNTdHJpbmcuY2hhckF0KGkpKSkge1xuICAgIGlmIChpID49IDIpIHtcbiAgICAgIHRocm93IChcIk1HUlNQb2ludCBiYWQgY29udmVyc2lvbiBmcm9tOiBcIiArIG1ncnNTdHJpbmcpO1xuICAgIH1cbiAgICBzYiArPSB0ZXN0Q2hhcjtcbiAgICBpKys7XG4gIH1cblxuICB2YXIgem9uZU51bWJlciA9IHBhcnNlSW50KHNiLCAxMCk7XG5cbiAgaWYgKGkgPT09IDAgfHwgaSArIDMgPiBsZW5ndGgpIHtcbiAgICAvLyBBIGdvb2QgTUdSUyBzdHJpbmcgaGFzIHRvIGJlIDQtNSBkaWdpdHMgbG9uZyxcbiAgICAvLyAjI0FBQS8jQUFBIGF0IGxlYXN0LlxuICAgIHRocm93IChcIk1HUlNQb2ludCBiYWQgY29udmVyc2lvbiBmcm9tOiBcIiArIG1ncnNTdHJpbmcpO1xuICB9XG5cbiAgdmFyIHpvbmVMZXR0ZXIgPSBtZ3JzU3RyaW5nLmNoYXJBdChpKyspO1xuXG4gIC8vIFNob3VsZCB3ZSBjaGVjayB0aGUgem9uZSBsZXR0ZXIgaGVyZT8gV2h5IG5vdC5cbiAgaWYgKHpvbmVMZXR0ZXIgPD0gJ0EnIHx8IHpvbmVMZXR0ZXIgPT09ICdCJyB8fCB6b25lTGV0dGVyID09PSAnWScgfHwgem9uZUxldHRlciA+PSAnWicgfHwgem9uZUxldHRlciA9PT0gJ0knIHx8IHpvbmVMZXR0ZXIgPT09ICdPJykge1xuICAgIHRocm93IChcIk1HUlNQb2ludCB6b25lIGxldHRlciBcIiArIHpvbmVMZXR0ZXIgKyBcIiBub3QgaGFuZGxlZDogXCIgKyBtZ3JzU3RyaW5nKTtcbiAgfVxuXG4gIGh1bksgPSBtZ3JzU3RyaW5nLnN1YnN0cmluZyhpLCBpICs9IDIpO1xuXG4gIHZhciBzZXQgPSBnZXQxMDBrU2V0Rm9yWm9uZSh6b25lTnVtYmVyKTtcblxuICB2YXIgZWFzdDEwMGsgPSBnZXRFYXN0aW5nRnJvbUNoYXIoaHVuSy5jaGFyQXQoMCksIHNldCk7XG4gIHZhciBub3J0aDEwMGsgPSBnZXROb3J0aGluZ0Zyb21DaGFyKGh1bksuY2hhckF0KDEpLCBzZXQpO1xuXG4gIC8vIFdlIGhhdmUgYSBidWcgd2hlcmUgdGhlIG5vcnRoaW5nIG1heSBiZSAyMDAwMDAwIHRvbyBsb3cuXG4gIC8vIEhvd1xuICAvLyBkbyB3ZSBrbm93IHdoZW4gdG8gcm9sbCBvdmVyP1xuXG4gIHdoaWxlIChub3J0aDEwMGsgPCBnZXRNaW5Ob3J0aGluZyh6b25lTGV0dGVyKSkge1xuICAgIG5vcnRoMTAwayArPSAyMDAwMDAwO1xuICB9XG5cbiAgLy8gY2FsY3VsYXRlIHRoZSBjaGFyIGluZGV4IGZvciBlYXN0aW5nL25vcnRoaW5nIHNlcGFyYXRvclxuICB2YXIgcmVtYWluZGVyID0gbGVuZ3RoIC0gaTtcblxuICBpZiAocmVtYWluZGVyICUgMiAhPT0gMCkge1xuICAgIHRocm93IChcIk1HUlNQb2ludCBoYXMgdG8gaGF2ZSBhbiBldmVuIG51bWJlciBcXG5vZiBkaWdpdHMgYWZ0ZXIgdGhlIHpvbmUgbGV0dGVyIGFuZCB0d28gMTAwa20gbGV0dGVycyAtIGZyb250IFxcbmhhbGYgZm9yIGVhc3RpbmcgbWV0ZXJzLCBzZWNvbmQgaGFsZiBmb3IgXFxubm9ydGhpbmcgbWV0ZXJzXCIgKyBtZ3JzU3RyaW5nKTtcbiAgfVxuXG4gIHZhciBzZXAgPSByZW1haW5kZXIgLyAyO1xuXG4gIHZhciBzZXBFYXN0aW5nID0gMC4wO1xuICB2YXIgc2VwTm9ydGhpbmcgPSAwLjA7XG4gIHZhciBhY2N1cmFjeUJvbnVzLCBzZXBFYXN0aW5nU3RyaW5nLCBzZXBOb3J0aGluZ1N0cmluZywgZWFzdGluZywgbm9ydGhpbmc7XG4gIGlmIChzZXAgPiAwKSB7XG4gICAgYWNjdXJhY3lCb251cyA9IDEwMDAwMC4wIC8gTWF0aC5wb3coMTAsIHNlcCk7XG4gICAgc2VwRWFzdGluZ1N0cmluZyA9IG1ncnNTdHJpbmcuc3Vic3RyaW5nKGksIGkgKyBzZXApO1xuICAgIHNlcEVhc3RpbmcgPSBwYXJzZUZsb2F0KHNlcEVhc3RpbmdTdHJpbmcpICogYWNjdXJhY3lCb251cztcbiAgICBzZXBOb3J0aGluZ1N0cmluZyA9IG1ncnNTdHJpbmcuc3Vic3RyaW5nKGkgKyBzZXApO1xuICAgIHNlcE5vcnRoaW5nID0gcGFyc2VGbG9hdChzZXBOb3J0aGluZ1N0cmluZykgKiBhY2N1cmFjeUJvbnVzO1xuICB9XG5cbiAgZWFzdGluZyA9IHNlcEVhc3RpbmcgKyBlYXN0MTAwaztcbiAgbm9ydGhpbmcgPSBzZXBOb3J0aGluZyArIG5vcnRoMTAwaztcblxuICByZXR1cm4ge1xuICAgIGVhc3Rpbmc6IGVhc3RpbmcsXG4gICAgbm9ydGhpbmc6IG5vcnRoaW5nLFxuICAgIHpvbmVMZXR0ZXI6IHpvbmVMZXR0ZXIsXG4gICAgem9uZU51bWJlcjogem9uZU51bWJlcixcbiAgICBhY2N1cmFjeTogYWNjdXJhY3lCb251c1xuICB9O1xufVxuXG4vKipcbiAqIEdpdmVuIHRoZSBmaXJzdCBsZXR0ZXIgZnJvbSBhIHR3by1sZXR0ZXIgTUdSUyAxMDBrIHpvbmUsIGFuZCBnaXZlbiB0aGVcbiAqIE1HUlMgdGFibGUgc2V0IGZvciB0aGUgem9uZSBudW1iZXIsIGZpZ3VyZSBvdXQgdGhlIGVhc3RpbmcgdmFsdWUgdGhhdFxuICogc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSBvdGhlciwgc2Vjb25kYXJ5IGVhc3RpbmcgdmFsdWUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Y2hhcn0gZSBUaGUgZmlyc3QgbGV0dGVyIGZyb20gYSB0d28tbGV0dGVyIE1HUlMgMTAwwrRrIHpvbmUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2V0IFRoZSBNR1JTIHRhYmxlIHNldCBmb3IgdGhlIHpvbmUgbnVtYmVyLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZWFzdGluZyB2YWx1ZSBmb3IgdGhlIGdpdmVuIGxldHRlciBhbmQgc2V0LlxuICovXG5mdW5jdGlvbiBnZXRFYXN0aW5nRnJvbUNoYXIoZSwgc2V0KSB7XG4gIC8vIGNvbE9yaWdpbiBpcyB0aGUgbGV0dGVyIGF0IHRoZSBvcmlnaW4gb2YgdGhlIHNldCBmb3IgdGhlXG4gIC8vIGNvbHVtblxuICB2YXIgY3VyQ29sID0gU0VUX09SSUdJTl9DT0xVTU5fTEVUVEVSUy5jaGFyQ29kZUF0KHNldCAtIDEpO1xuICB2YXIgZWFzdGluZ1ZhbHVlID0gMTAwMDAwLjA7XG4gIHZhciByZXdpbmRNYXJrZXIgPSBmYWxzZTtcblxuICB3aGlsZSAoY3VyQ29sICE9PSBlLmNoYXJDb2RlQXQoMCkpIHtcbiAgICBjdXJDb2wrKztcbiAgICBpZiAoY3VyQ29sID09PSBJKSB7XG4gICAgICBjdXJDb2wrKztcbiAgICB9XG4gICAgaWYgKGN1ckNvbCA9PT0gTykge1xuICAgICAgY3VyQ29sKys7XG4gICAgfVxuICAgIGlmIChjdXJDb2wgPiBaKSB7XG4gICAgICBpZiAocmV3aW5kTWFya2VyKSB7XG4gICAgICAgIHRocm93IChcIkJhZCBjaGFyYWN0ZXI6IFwiICsgZSk7XG4gICAgICB9XG4gICAgICBjdXJDb2wgPSBBO1xuICAgICAgcmV3aW5kTWFya2VyID0gdHJ1ZTtcbiAgICB9XG4gICAgZWFzdGluZ1ZhbHVlICs9IDEwMDAwMC4wO1xuICB9XG5cbiAgcmV0dXJuIGVhc3RpbmdWYWx1ZTtcbn1cblxuLyoqXG4gKiBHaXZlbiB0aGUgc2Vjb25kIGxldHRlciBmcm9tIGEgdHdvLWxldHRlciBNR1JTIDEwMGsgem9uZSwgYW5kIGdpdmVuIHRoZVxuICogTUdSUyB0YWJsZSBzZXQgZm9yIHRoZSB6b25lIG51bWJlciwgZmlndXJlIG91dCB0aGUgbm9ydGhpbmcgdmFsdWUgdGhhdFxuICogc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSBvdGhlciwgc2Vjb25kYXJ5IG5vcnRoaW5nIHZhbHVlLiBZb3UgaGF2ZSB0b1xuICogcmVtZW1iZXIgdGhhdCBOb3J0aGluZ3MgYXJlIGRldGVybWluZWQgZnJvbSB0aGUgZXF1YXRvciwgYW5kIHRoZSB2ZXJ0aWNhbFxuICogY3ljbGUgb2YgbGV0dGVycyBtZWFuIGEgMjAwMDAwMCBhZGRpdGlvbmFsIG5vcnRoaW5nIG1ldGVycy4gVGhpcyBoYXBwZW5zXG4gKiBhcHByb3guIGV2ZXJ5IDE4IGRlZ3JlZXMgb2YgbGF0aXR1ZGUuIFRoaXMgbWV0aG9kIGRvZXMgKk5PVCogY291bnQgYW55XG4gKiBhZGRpdGlvbmFsIG5vcnRoaW5ncy4gWW91IGhhdmUgdG8gZmlndXJlIG91dCBob3cgbWFueSAyMDAwMDAwIG1ldGVycyBuZWVkXG4gKiB0byBiZSBhZGRlZCBmb3IgdGhlIHpvbmUgbGV0dGVyIG9mIHRoZSBNR1JTIGNvb3JkaW5hdGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Y2hhcn0gbiBTZWNvbmQgbGV0dGVyIG9mIHRoZSBNR1JTIDEwMGsgem9uZVxuICogQHBhcmFtIHtudW1iZXJ9IHNldCBUaGUgTUdSUyB0YWJsZSBzZXQgbnVtYmVyLCB3aGljaCBpcyBkZXBlbmRlbnQgb24gdGhlXG4gKiAgICAgVVRNIHpvbmUgbnVtYmVyLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbm9ydGhpbmcgdmFsdWUgZm9yIHRoZSBnaXZlbiBsZXR0ZXIgYW5kIHNldC5cbiAqL1xuZnVuY3Rpb24gZ2V0Tm9ydGhpbmdGcm9tQ2hhcihuLCBzZXQpIHtcblxuICBpZiAobiA+ICdWJykge1xuICAgIHRocm93IChcIk1HUlNQb2ludCBnaXZlbiBpbnZhbGlkIE5vcnRoaW5nIFwiICsgbik7XG4gIH1cblxuICAvLyByb3dPcmlnaW4gaXMgdGhlIGxldHRlciBhdCB0aGUgb3JpZ2luIG9mIHRoZSBzZXQgZm9yIHRoZVxuICAvLyBjb2x1bW5cbiAgdmFyIGN1clJvdyA9IFNFVF9PUklHSU5fUk9XX0xFVFRFUlMuY2hhckNvZGVBdChzZXQgLSAxKTtcbiAgdmFyIG5vcnRoaW5nVmFsdWUgPSAwLjA7XG4gIHZhciByZXdpbmRNYXJrZXIgPSBmYWxzZTtcblxuICB3aGlsZSAoY3VyUm93ICE9PSBuLmNoYXJDb2RlQXQoMCkpIHtcbiAgICBjdXJSb3crKztcbiAgICBpZiAoY3VyUm93ID09PSBJKSB7XG4gICAgICBjdXJSb3crKztcbiAgICB9XG4gICAgaWYgKGN1clJvdyA9PT0gTykge1xuICAgICAgY3VyUm93Kys7XG4gICAgfVxuICAgIC8vIGZpeGluZyBhIGJ1ZyBtYWtpbmcgd2hvbGUgYXBwbGljYXRpb24gaGFuZyBpbiB0aGlzIGxvb3BcbiAgICAvLyB3aGVuICduJyBpcyBhIHdyb25nIGNoYXJhY3RlclxuICAgIGlmIChjdXJSb3cgPiBWKSB7XG4gICAgICBpZiAocmV3aW5kTWFya2VyKSB7IC8vIG1ha2luZyBzdXJlIHRoYXQgdGhpcyBsb29wIGVuZHNcbiAgICAgICAgdGhyb3cgKFwiQmFkIGNoYXJhY3RlcjogXCIgKyBuKTtcbiAgICAgIH1cbiAgICAgIGN1clJvdyA9IEE7XG4gICAgICByZXdpbmRNYXJrZXIgPSB0cnVlO1xuICAgIH1cbiAgICBub3J0aGluZ1ZhbHVlICs9IDEwMDAwMC4wO1xuICB9XG5cbiAgcmV0dXJuIG5vcnRoaW5nVmFsdWU7XG59XG5cbi8qKlxuICogVGhlIGZ1bmN0aW9uIGdldE1pbk5vcnRoaW5nIHJldHVybnMgdGhlIG1pbmltdW0gbm9ydGhpbmcgdmFsdWUgb2YgYSBNR1JTXG4gKiB6b25lLlxuICpcbiAqIFBvcnRlZCBmcm9tIEdlb3RyYW5zJyBjIExhdHRpdHVkZV9CYW5kX1ZhbHVlIHN0cnVjdHVyZSB0YWJsZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtjaGFyfSB6b25lTGV0dGVyIFRoZSBNR1JTIHpvbmUgdG8gZ2V0IHRoZSBtaW4gbm9ydGhpbmcgZm9yLlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBnZXRNaW5Ob3J0aGluZyh6b25lTGV0dGVyKSB7XG4gIHZhciBub3J0aGluZztcbiAgc3dpdGNoICh6b25lTGV0dGVyKSB7XG4gIGNhc2UgJ0MnOlxuICAgIG5vcnRoaW5nID0gMTEwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdEJzpcbiAgICBub3J0aGluZyA9IDIwMDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnRSc6XG4gICAgbm9ydGhpbmcgPSAyODAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ0YnOlxuICAgIG5vcnRoaW5nID0gMzcwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdHJzpcbiAgICBub3J0aGluZyA9IDQ2MDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnSCc6XG4gICAgbm9ydGhpbmcgPSA1NTAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ0onOlxuICAgIG5vcnRoaW5nID0gNjQwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdLJzpcbiAgICBub3J0aGluZyA9IDczMDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnTCc6XG4gICAgbm9ydGhpbmcgPSA4MjAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ00nOlxuICAgIG5vcnRoaW5nID0gOTEwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdOJzpcbiAgICBub3J0aGluZyA9IDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnUCc6XG4gICAgbm9ydGhpbmcgPSA4MDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnUSc6XG4gICAgbm9ydGhpbmcgPSAxNzAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ1InOlxuICAgIG5vcnRoaW5nID0gMjYwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdTJzpcbiAgICBub3J0aGluZyA9IDM1MDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnVCc6XG4gICAgbm9ydGhpbmcgPSA0NDAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ1UnOlxuICAgIG5vcnRoaW5nID0gNTMwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdWJzpcbiAgICBub3J0aGluZyA9IDYyMDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnVyc6XG4gICAgbm9ydGhpbmcgPSA3MDAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ1gnOlxuICAgIG5vcnRoaW5nID0gNzkwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBkZWZhdWx0OlxuICAgIG5vcnRoaW5nID0gLTEuMDtcbiAgfVxuICBpZiAobm9ydGhpbmcgPj0gMC4wKSB7XG4gICAgcmV0dXJuIG5vcnRoaW5nO1xuICB9XG4gIGVsc2Uge1xuICAgIHRocm93IChcIkludmFsaWQgem9uZSBsZXR0ZXI6IFwiICsgem9uZUxldHRlcik7XG4gIH1cblxufVxuIiwiLy8gT3BlbkxheWVycy4gU2VlIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvXG4vLyBMaWNlbnNlOiBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vb3BlbmxheWVycy9vcGVubGF5ZXJzL21hc3Rlci9MSUNFTlNFLm1kXG47KGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIHtcbiAgICByb290Lm9sID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIE9QRU5MQVlFUlMgPSB7fTtcbiAgdmFyIGwsYWE9XCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmRlZmluZVByb3BlcnRpZXM/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXthIT1BcnJheS5wcm90b3R5cGUmJmEhPU9iamVjdC5wcm90b3R5cGUmJihhW2JdPWMudmFsdWUpfSxiYT1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3c9PT10aGlzP3RoaXM6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCYmbnVsbCE9Z2xvYmFsP2dsb2JhbDp0aGlzO2Z1bmN0aW9uIGNhKGEsYil7aWYoYil7dmFyIGM9YmE7YT1hLnNwbGl0KFwiLlwiKTtmb3IodmFyIGQ9MDtkPGEubGVuZ3RoLTE7ZCsrKXt2YXIgZT1hW2RdO2UgaW4gY3x8KGNbZV09e30pO2M9Y1tlXX1hPWFbYS5sZW5ndGgtMV07ZD1jW2FdO2I9YihkKTtiIT1kJiZudWxsIT1iJiZhYShjLGEse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpifSl9fVxuY2EoXCJNYXRoLmNvc2hcIixmdW5jdGlvbihhKXtpZihhKXJldHVybiBhO3ZhciBiPU1hdGguZXhwO3JldHVybiBmdW5jdGlvbihhKXthPU51bWJlcihhKTtyZXR1cm4oYihhKStiKC1hKSkvMn19KTtmdW5jdGlvbiBkYSgpe2RhPWZ1bmN0aW9uKCl7fTtiYS5TeW1ib2x8fChiYS5TeW1ib2w9ZWEpfXZhciBlYT1mdW5jdGlvbigpe3ZhciBhPTA7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVyblwianNjb21wX3N5bWJvbF9cIisoYnx8XCJcIikrYSsrfX0oKTtmdW5jdGlvbiBmYSgpe2RhKCk7dmFyIGE9YmEuU3ltYm9sLml0ZXJhdG9yO2F8fChhPWJhLlN5bWJvbC5pdGVyYXRvcj1iYS5TeW1ib2woXCJpdGVyYXRvclwiKSk7XCJmdW5jdGlvblwiIT10eXBlb2YgQXJyYXkucHJvdG90eXBlW2FdJiZhYShBcnJheS5wcm90b3R5cGUsYSx7Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLHZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGhhKHRoaXMpfX0pO2ZhPWZ1bmN0aW9uKCl7fX1cbmZ1bmN0aW9uIGhhKGEpe3ZhciBiPTA7cmV0dXJuIGlhKGZ1bmN0aW9uKCl7cmV0dXJuIGI8YS5sZW5ndGg/e2RvbmU6ITEsdmFsdWU6YVtiKytdfTp7ZG9uZTohMH19KX1mdW5jdGlvbiBpYShhKXtmYSgpO2E9e25leHQ6YX07YVtiYS5TeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3JldHVybiBhfWZ1bmN0aW9uIGphKGEsYil7ZmEoKTthIGluc3RhbmNlb2YgU3RyaW5nJiYoYSs9XCJcIik7dmFyIGM9MCxkPXtuZXh0OmZ1bmN0aW9uKCl7aWYoYzxhLmxlbmd0aCl7dmFyIGU9YysrO3JldHVybnt2YWx1ZTpiKGUsYVtlXSksZG9uZTohMX19ZC5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJue2RvbmU6ITAsdmFsdWU6dm9pZCAwfX07cmV0dXJuIGQubmV4dCgpfX07ZFtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIGR9O3JldHVybiBkfVxuY2EoXCJBcnJheS5wcm90b3R5cGUua2V5c1wiLGZ1bmN0aW9uKGEpe3JldHVybiBhP2E6ZnVuY3Rpb24oKXtyZXR1cm4gamEodGhpcyxmdW5jdGlvbihhKXtyZXR1cm4gYX0pfX0pO2NhKFwiQXJyYXkucHJvdG90eXBlLnZhbHVlc1wiLGZ1bmN0aW9uKGEpe3JldHVybiBhP2E6ZnVuY3Rpb24oKXtyZXR1cm4gamEodGhpcyxmdW5jdGlvbihhLGMpe3JldHVybiBjfSl9fSk7Y2EoXCJPYmplY3QuaXNcIixmdW5jdGlvbihhKXtyZXR1cm4gYT9hOmZ1bmN0aW9uKGEsYyl7cmV0dXJuIGE9PT1jPzAhPT1hfHwxL2E9PT0xL2M6YSE9PWEmJmMhPT1jfX0pO3ZhciBrYT10aGlzO1xuZnVuY3Rpb24gcihhLGIpe3ZhciBjPU9QRU5MQVlFUlM7YT1hLnNwbGl0KFwiLlwiKTtjPWN8fGthO2FbMF1pbiBjfHwhYy5leGVjU2NyaXB0fHxjLmV4ZWNTY3JpcHQoXCJ2YXIgXCIrYVswXSk7Zm9yKHZhciBkO2EubGVuZ3RoJiYoZD1hLnNoaWZ0KCkpOylhLmxlbmd0aHx8dm9pZCAwPT09Yj9jW2RdJiZjW2RdIT09T2JqZWN0LnByb3RvdHlwZVtkXT9jPWNbZF06Yz1jW2RdPXt9OmNbZF09Yn07ZnVuY3Rpb24gdihhLGIpe2EucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYi5wcm90b3R5cGUpO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWF9ZnVuY3Rpb24gbGEoKXt9ZnVuY3Rpb24gdyhhKXtyZXR1cm4gYS5zaXx8KGEuc2k9KyttYSl9dmFyIG1hPTA7ZnVuY3Rpb24gbmEoYSl7dGhpcy5tZXNzYWdlPVwiQXNzZXJ0aW9uIGZhaWxlZC4gU2VlIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvZW4vbGF0ZXN0L2RvYy9lcnJvcnMvI1wiK2ErXCIgZm9yIGRldGFpbHMuXCI7dGhpcy5jb2RlPWE7dGhpcy5uYW1lPVwiQXNzZXJ0aW9uRXJyb3JcIn12KG5hLEVycm9yKTtmdW5jdGlvbiBvYShhLGIsYyxkKXt0aGlzLlQ9YTt0aGlzLlc9Yjt0aGlzLlI9Yzt0aGlzLlU9ZH1mdW5jdGlvbiBwYShhLGIsYyxkLGUpe3JldHVybiB2b2lkIDAhPT1lPyhlLlQ9YSxlLlc9YixlLlI9YyxlLlU9ZCxlKTpuZXcgb2EoYSxiLGMsZCl9ZnVuY3Rpb24gcWEoYSxiLGMpe3JldHVybiBhLlQ8PWImJmI8PWEuVyYmYS5SPD1jJiZjPD1hLlV9O2Z1bmN0aW9uIHgoYSxiKXtpZighYSl0aHJvdyBuZXcgbmEoYik7fTtmdW5jdGlvbiByYShhLGIsYyl7cmV0dXJuIE1hdGgubWluKE1hdGgubWF4KGEsYiksYyl9dmFyIHNhPWZ1bmN0aW9uKCl7dmFyIGE7XCJjb3NoXCJpbiBNYXRoP2E9TWF0aC5jb3NoOmE9ZnVuY3Rpb24oYSl7YT1NYXRoLmV4cChhKTtyZXR1cm4oYSsxL2EpLzJ9O3JldHVybiBhfSgpO2Z1bmN0aW9uIHRhKGEsYixjLGQpe2E9Yy1hO2I9ZC1iO3JldHVybiBhKmErYipifWZ1bmN0aW9uIHVhKGEpe3JldHVybiBhKk1hdGguUEkvMTgwfWZ1bmN0aW9uIHZhKGEsYil7YSU9YjtyZXR1cm4gMD5hKmI/YStiOmF9ZnVuY3Rpb24gd2EoYSxiLGMpe3JldHVybiBhK2MqKGItYSl9O2Z1bmN0aW9uIHhhKGEsYixjKXt2b2lkIDA9PT1jJiYoYz1bMCwwXSk7Y1swXT1hWzBdKzIqYjtjWzFdPWFbMV0rMipiO3JldHVybiBjfWZ1bmN0aW9uIHlhKGEsYixjKXt2b2lkIDA9PT1jJiYoYz1bMCwwXSk7Y1swXT1hWzBdKmIrLjV8MDtjWzFdPWFbMV0qYisuNXwwO3JldHVybiBjfWZ1bmN0aW9uIHphKGEsYil7aWYoQXJyYXkuaXNBcnJheShhKSlyZXR1cm4gYTt2b2lkIDA9PT1iP2I9W2EsYV06YlswXT1iWzFdPWE7cmV0dXJuIGJ9O2Z1bmN0aW9uIEFhKGEpe2Zvcih2YXIgYj1CYSgpLGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpRGEoYixhW2NdKTtyZXR1cm4gYn1mdW5jdGlvbiBFYShhLGIsYyl7cmV0dXJuIGM/KGNbMF09YVswXS1iLGNbMV09YVsxXS1iLGNbMl09YVsyXStiLGNbM109YVszXStiLGMpOlthWzBdLWIsYVsxXS1iLGFbMl0rYixhWzNdK2JdfWZ1bmN0aW9uIEZhKGEsYil7cmV0dXJuIGI/KGJbMF09YVswXSxiWzFdPWFbMV0sYlsyXT1hWzJdLGJbM109YVszXSxiKTphLnNsaWNlKCl9ZnVuY3Rpb24gR2EoYSxiLGMpe2I9YjxhWzBdP2FbMF0tYjphWzJdPGI/Yi1hWzJdOjA7YT1jPGFbMV0/YVsxXS1jOmFbM108Yz9jLWFbM106MDtyZXR1cm4gYipiK2EqYX1mdW5jdGlvbiBIYShhLGIpe3JldHVybiBhWzBdPD1iWzBdJiZiWzJdPD1hWzJdJiZhWzFdPD1iWzFdJiZiWzNdPD1hWzNdfWZ1bmN0aW9uIElhKGEsYixjKXtyZXR1cm4gYVswXTw9YiYmYjw9YVsyXSYmYVsxXTw9YyYmYzw9YVszXX1cbmZ1bmN0aW9uIEJhKCl7cmV0dXJuW0luZmluaXR5LEluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHldfWZ1bmN0aW9uIEphKGEsYixjLGQsZSl7cmV0dXJuIGU/KGVbMF09YSxlWzFdPWIsZVsyXT1jLGVbM109ZCxlKTpbYSxiLGMsZF19ZnVuY3Rpb24gS2EoYSl7cmV0dXJuIEphKEluZmluaXR5LEluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHksYSl9ZnVuY3Rpb24gTGEoYSxiKXt2YXIgYz1hWzBdO2E9YVsxXTtyZXR1cm4gSmEoYyxhLGMsYSxiKX1mdW5jdGlvbiBOYShhLGIsYyxkLGUpe2ZvcihlPUthKGUpO2I8YztiKz1kKXt2YXIgZj1lLGc9YVtiXSxoPWFbYisxXTtmWzBdPU1hdGgubWluKGZbMF0sZyk7ZlsxXT1NYXRoLm1pbihmWzFdLGgpO2ZbMl09TWF0aC5tYXgoZlsyXSxnKTtmWzNdPU1hdGgubWF4KGZbM10saCl9cmV0dXJuIGV9ZnVuY3Rpb24gT2EoYSxiKXtyZXR1cm4gYVswXT09YlswXSYmYVsyXT09YlsyXSYmYVsxXT09YlsxXSYmYVszXT09YlszXX1cbmZ1bmN0aW9uIFBhKGEsYil7YlswXTxhWzBdJiYoYVswXT1iWzBdKTtiWzJdPmFbMl0mJihhWzJdPWJbMl0pO2JbMV08YVsxXSYmKGFbMV09YlsxXSk7YlszXT5hWzNdJiYoYVszXT1iWzNdKX1mdW5jdGlvbiBEYShhLGIpe2JbMF08YVswXSYmKGFbMF09YlswXSk7YlswXT5hWzJdJiYoYVsyXT1iWzBdKTtiWzFdPGFbMV0mJihhWzFdPWJbMV0pO2JbMV0+YVszXSYmKGFbM109YlsxXSl9ZnVuY3Rpb24gUWEoYSl7cmV0dXJuW2FbMF0sYVsxXV19ZnVuY3Rpb24gUmEoYSl7cmV0dXJuWyhhWzBdK2FbMl0pLzIsKGFbMV0rYVszXSkvMl19XG5mdW5jdGlvbiBTYShhLGIsYyxkLGUpe3ZhciBmPWIqZFswXS8yO2Q9YipkWzFdLzI7Yj1NYXRoLmNvcyhjKTt2YXIgZz1NYXRoLnNpbihjKTtjPWYqYjtmKj1nO2IqPWQ7dmFyIGg9ZCpnLGs9YVswXSxtPWFbMV07YT1rLWMraDtkPWstYy1oO2c9aytjLWg7Yz1rK2MraDtoPW0tZi1iO2s9bS1mK2I7dmFyIG49bStmK2I7Zj1tK2YtYjtyZXR1cm4gSmEoTWF0aC5taW4oYSxkLGcsYyksTWF0aC5taW4oaCxrLG4sZiksTWF0aC5tYXgoYSxkLGcsYyksTWF0aC5tYXgoaCxrLG4sZiksZSl9ZnVuY3Rpb24gVGEoYSl7cmV0dXJuIGFbM10tYVsxXX1mdW5jdGlvbiBVYShhLGIpe3ZhciBjPUJhKCk7VmEoYSxiKSYmKGNbMF09YVswXT5iWzBdP2FbMF06YlswXSxjWzFdPWFbMV0+YlsxXT9hWzFdOmJbMV0sY1syXT1hWzJdPGJbMl0/YVsyXTpiWzJdLGNbM109YVszXTxiWzNdP2FbM106YlszXSk7cmV0dXJuIGN9ZnVuY3Rpb24gV2EoYSl7cmV0dXJuW2FbMF0sYVszXV19XG5mdW5jdGlvbiBYYShhKXtyZXR1cm4gYVsyXS1hWzBdfWZ1bmN0aW9uIFZhKGEsYil7cmV0dXJuIGFbMF08PWJbMl0mJmFbMl0+PWJbMF0mJmFbMV08PWJbM10mJmFbM10+PWJbMV19ZnVuY3Rpb24gWWEoYSl7cmV0dXJuIGFbMl08YVswXXx8YVszXTxhWzFdfTt2YXIgWmE9XCJmdW5jdGlvblwiPT09dHlwZW9mIE9iamVjdC5hc3NpZ24/T2JqZWN0LmFzc2lnbjpmdW5jdGlvbihhLGIpe2lmKHZvaWQgMD09PWF8fG51bGw9PT1hKXRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY29udmVydCB1bmRlZmluZWQgb3IgbnVsbCB0byBvYmplY3RcIik7Zm9yKHZhciBjPU9iamVjdChhKSxkPTEsZT1hcmd1bWVudHMubGVuZ3RoO2Q8ZTsrK2Qpe3ZhciBmPWFyZ3VtZW50c1tkXTtpZih2b2lkIDAhPT1mJiZudWxsIT09Zilmb3IodmFyIGcgaW4gZilmLmhhc093blByb3BlcnR5KGcpJiYoY1tnXT1mW2ddKX1yZXR1cm4gY307ZnVuY3Rpb24gYmIoYSl7Zm9yKHZhciBiIGluIGEpZGVsZXRlIGFbYl19ZnVuY3Rpb24gY2IoYSl7dmFyIGI9W10sYztmb3IoYyBpbiBhKWIucHVzaChhW2NdKTtyZXR1cm4gYn1mdW5jdGlvbiBkYihhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4hMTtyZXR1cm4hYn07LypcblxuIExhdGl0dWRlL2xvbmdpdHVkZSBzcGhlcmljYWwgZ2VvZGVzeSBmb3JtdWxhZSB0YWtlbiBmcm9tXG4gaHR0cDovL3d3dy5tb3ZhYmxlLXR5cGUuY28udWsvc2NyaXB0cy9sYXRsb25nLmh0bWxcbiBMaWNlbnNlZCB1bmRlciBDQy1CWS0zLjAuXG4qL1xuZnVuY3Rpb24gZWIoYSl7dGhpcy5yYWRpdXM9YX1lYi5wcm90b3R5cGUub2Zmc2V0PWZ1bmN0aW9uKGEsYixjKXt2YXIgZD11YShhWzFdKTtiLz10aGlzLnJhZGl1czt2YXIgZT1NYXRoLmFzaW4oTWF0aC5zaW4oZCkqTWF0aC5jb3MoYikrTWF0aC5jb3MoZCkqTWF0aC5zaW4oYikqTWF0aC5jb3MoYykpO3JldHVyblsxODAqKHVhKGFbMF0pK01hdGguYXRhbjIoTWF0aC5zaW4oYykqTWF0aC5zaW4oYikqTWF0aC5jb3MoZCksTWF0aC5jb3MoYiktTWF0aC5zaW4oZCkqTWF0aC5zaW4oZSkpKS9NYXRoLlBJLDE4MCplL01hdGguUEldfTtcbmZ1bmN0aW9uIGZiKGEsYil7dmFyIGM9Ynx8e30sZD1jLnJhZGl1c3x8NjM3MTAwOC44O2M9Yy5wcm9qZWN0aW9ufHxcIkVQU0c6Mzg1N1wiO2E9YS5jbG9uZSgpLnhiKGMsXCJFUFNHOjQzMjZcIik7dmFyIGU9YS5EKCk7Yz0wO3ZhciBmO3N3aXRjaChlKXtjYXNlIFwiUG9pbnRcIjpjYXNlIFwiTXVsdGlQb2ludFwiOmJyZWFrO2Nhc2UgXCJMaW5lU3RyaW5nXCI6Y2FzZSBcIkxpbmVhclJpbmdcIjpiPWEuRygpO2M9Z2IoYixkKTticmVhaztjYXNlIFwiTXVsdGlMaW5lU3RyaW5nXCI6Y2FzZSBcIlBvbHlnb25cIjpiPWEuRygpO2E9MDtmb3IoZT1iLmxlbmd0aDthPGU7KythKWMrPWdiKGJbYV0sZCk7YnJlYWs7Y2FzZSBcIk11bHRpUG9seWdvblwiOmI9YS5HKCk7YT0wO2ZvcihlPWIubGVuZ3RoO2E8ZTsrK2Epe3ZhciBnPWJbYV07dmFyIGg9MDtmb3IoZj1nLmxlbmd0aDtoPGY7KytoKWMrPWdiKGdbaF0sZCl9YnJlYWs7Y2FzZSBcIkdlb21ldHJ5Q29sbGVjdGlvblwiOmQ9aGIoYS5hKTthPTA7Zm9yKGU9ZC5sZW5ndGg7YTxcbmU7KythKWMrPWZiKGRbYV0sYik7YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcihcIlVuc3VwcG9ydGVkIGdlb21ldHJ5IHR5cGU6IFwiK2UpO31yZXR1cm4gY31mdW5jdGlvbiBnYihhLGIpe2Zvcih2YXIgYz0wLGQ9MCxlPWEubGVuZ3RoO2Q8ZS0xOysrZCljKz1pYihhW2RdLGFbZCsxXSxiKTtyZXR1cm4gY31mdW5jdGlvbiBpYihhLGIsYyl7dmFyIGQ9dWEoYVsxXSksZT11YShiWzFdKSxmPShlLWQpLzI7YT11YShiWzBdLWFbMF0pLzI7ZD1NYXRoLnNpbihmKSpNYXRoLnNpbihmKStNYXRoLnNpbihhKSpNYXRoLnNpbihhKSpNYXRoLmNvcyhkKSpNYXRoLmNvcyhlKTtyZXR1cm4gMipjKk1hdGguYXRhbjIoTWF0aC5zcXJ0KGQpLE1hdGguc3FydCgxLWQpKX1cbmZ1bmN0aW9uIGpiKGEsYil7dmFyIGM9Ynx8e30sZD1jLnJhZGl1c3x8NjM3MTAwOC44O2M9Yy5wcm9qZWN0aW9ufHxcIkVQU0c6Mzg1N1wiO2E9YS5jbG9uZSgpLnhiKGMsXCJFUFNHOjQzMjZcIik7dmFyIGU9YS5EKCk7Yz0wO3ZhciBmO3N3aXRjaChlKXtjYXNlIFwiUG9pbnRcIjpjYXNlIFwiTXVsdGlQb2ludFwiOmNhc2UgXCJMaW5lU3RyaW5nXCI6Y2FzZSBcIk11bHRpTGluZVN0cmluZ1wiOmNhc2UgXCJMaW5lYXJSaW5nXCI6YnJlYWs7Y2FzZSBcIlBvbHlnb25cIjpiPWEuRygpO2M9TWF0aC5hYnMoa2IoYlswXSxkKSk7YT0xO2ZvcihlPWIubGVuZ3RoO2E8ZTsrK2EpYy09TWF0aC5hYnMoa2IoYlthXSxkKSk7YnJlYWs7Y2FzZSBcIk11bHRpUG9seWdvblwiOmI9YS5HKCk7YT0wO2ZvcihlPWIubGVuZ3RoO2E8ZTsrK2Epe3ZhciBnPWJbYV07Yys9TWF0aC5hYnMoa2IoZ1swXSxkKSk7dmFyIGg9MTtmb3IoZj1nLmxlbmd0aDtoPGY7KytoKWMtPU1hdGguYWJzKGtiKGdbaF0sZCkpfWJyZWFrO2Nhc2UgXCJHZW9tZXRyeUNvbGxlY3Rpb25cIjpkPVxuaGIoYS5hKTthPTA7Zm9yKGU9ZC5sZW5ndGg7YTxlOysrYSljKz1qYihkW2FdLGIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlOiBcIitlKTt9cmV0dXJuIGN9ZnVuY3Rpb24ga2IoYSxiKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoLGU9YVtkLTFdWzBdLGY9YVtkLTFdWzFdLGc9MDtnPGQ7ZysrKXt2YXIgaD1hW2ddWzBdLGs9YVtnXVsxXTtjKz11YShoLWUpKigyK01hdGguc2luKHVhKGYpKStNYXRoLnNpbih1YShrKSkpO2U9aDtmPWt9cmV0dXJuIGMqYipiLzJ9O3ZhciBsYj17fTtsYi5kZWdyZWVzPTEyNzQxOTk0Kk1hdGguUEkvMzYwO2xiLmZ0PS4zMDQ4O2xiLm09MTtsYltcInVzLWZ0XCJdPTEyMDAvMzkzNztmdW5jdGlvbiBtYihhKXt0aGlzLkxhPWEuY29kZTt0aGlzLmM9YS51bml0czt0aGlzLmc9dm9pZCAwIT09YS5leHRlbnQ/YS5leHRlbnQ6bnVsbDt0aGlzLkJkPXZvaWQgMCE9PWEud29ybGRFeHRlbnQ/YS53b3JsZEV4dGVudDpudWxsO3RoaXMuYT12b2lkIDAhPT1hLmF4aXNPcmllbnRhdGlvbj9hLmF4aXNPcmllbnRhdGlvbjpcImVudVwiO3RoaXMuYj12b2lkIDAhPT1hLmdsb2JhbD9hLmdsb2JhbDohMTt0aGlzLmo9ISghdGhpcy5ifHwhdGhpcy5nKTt0aGlzLmk9YS5nZXRQb2ludFJlc29sdXRpb247dGhpcy5mPW51bGw7dGhpcy52PWEubWV0ZXJzUGVyVW5pdDt2YXIgYj1hLmNvZGUsYz13aW5kb3cucHJvajQ7XCJmdW5jdGlvblwiPT10eXBlb2YgYyYmKGI9Yy5kZWZzKGIpLHZvaWQgMCE9PWImJih2b2lkIDAhPT1iLmF4aXMmJnZvaWQgMD09PWEuYXhpc09yaWVudGF0aW9uJiYodGhpcy5hPWIuYXhpcyksdm9pZCAwPT09YS5tZXRlcnNQZXJVbml0JiYodGhpcy52PWIudG9fbWV0ZXIpLFxudm9pZCAwPT09YS51bml0cyYmKHRoaXMuYz1iLnVuaXRzKSkpfW1iLnByb3RvdHlwZS5JPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ307bWIucHJvdG90eXBlLmw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52fHxsYlt0aGlzLmNdfTtmdW5jdGlvbiBuYihhKXttYi5jYWxsKHRoaXMse2NvZGU6YSx1bml0czpcIm1cIixleHRlbnQ6b2IsZ2xvYmFsOiEwLHdvcmxkRXh0ZW50OnBiLGdldFBvaW50UmVzb2x1dGlvbjpmdW5jdGlvbihhLGMpe3JldHVybiBhL3NhKGNbMV0vNjM3ODEzNyl9fSl9dihuYixtYik7dmFyIHFiPTYzNzgxMzcqTWF0aC5QSSxvYj1bLXFiLC1xYixxYixxYl0scGI9Wy0xODAsLTg1LDE4MCw4NV0scmI9W25ldyBuYihcIkVQU0c6Mzg1N1wiKSxuZXcgbmIoXCJFUFNHOjEwMjEwMFwiKSxuZXcgbmIoXCJFUFNHOjEwMjExM1wiKSxuZXcgbmIoXCJFUFNHOjkwMDkxM1wiKSxuZXcgbmIoXCJ1cm46b2djOmRlZjpjcnM6RVBTRzo2LjE4OjM6Mzg1N1wiKSxuZXcgbmIoXCJ1cm46b2djOmRlZjpjcnM6RVBTRzo6Mzg1N1wiKSxuZXcgbmIoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjMzg1N1wiKV07XG5mdW5jdGlvbiBzYihhLGIsYyl7dmFyIGQ9YS5sZW5ndGg7Yz0xPGM/YzoyO3ZvaWQgMD09PWImJigyPGM/Yj1hLnNsaWNlKCk6Yj1BcnJheShkKSk7Zm9yKHZhciBlPTA7ZTxkO2UrPWMpe2JbZV09cWIqYVtlXS8xODA7dmFyIGY9NjM3ODEzNypNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJKihhW2UrMV0rOTApLzM2MCkpO2Y+cWI/Zj1xYjpmPC1xYiYmKGY9LXFiKTtiW2UrMV09Zn1yZXR1cm4gYn1mdW5jdGlvbiB0YihhLGIsYyl7dmFyIGQ9YS5sZW5ndGg7Yz0xPGM/YzoyO3ZvaWQgMD09PWImJigyPGM/Yj1hLnNsaWNlKCk6Yj1BcnJheShkKSk7Zm9yKHZhciBlPTA7ZTxkO2UrPWMpYltlXT0xODAqYVtlXS9xYixiW2UrMV09MzYwKk1hdGguYXRhbihNYXRoLmV4cChhW2UrMV0vNjM3ODEzNykpL01hdGguUEktOTA7cmV0dXJuIGJ9O2Z1bmN0aW9uIHViKGEsYil7bWIuY2FsbCh0aGlzLHtjb2RlOmEsdW5pdHM6XCJkZWdyZWVzXCIsZXh0ZW50OnZiLGF4aXNPcmllbnRhdGlvbjpiLGdsb2JhbDohMCxtZXRlcnNQZXJVbml0OndiLHdvcmxkRXh0ZW50OnZifSl9dih1YixtYik7dmFyIHZiPVstMTgwLC05MCwxODAsOTBdLHdiPTYzNzgxMzcqTWF0aC5QSS8xODAseGI9W25ldyB1YihcIkNSUzo4NFwiKSxuZXcgdWIoXCJFUFNHOjQzMjZcIixcIm5ldVwiKSxuZXcgdWIoXCJ1cm46b2djOmRlZjpjcnM6RVBTRzo6NDMyNlwiLFwibmV1XCIpLG5ldyB1YihcInVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2XCIsXCJuZXVcIiksbmV3IHViKFwidXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODRcIiksbmV3IHViKFwidXJuOm9nYzpkZWY6Y3JzOk9HQzoyOjg0XCIpLG5ldyB1YihcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCM0MzI2XCIsXCJuZXVcIiksbmV3IHViKFwidXJuOngtb2djOmRlZjpjcnM6RVBTRzo0MzI2XCIsXCJuZXVcIildO3ZhciB5Yj17fTt2YXIgemI9e307ZnVuY3Rpb24gQWIoYSxiLGMpe2E9YS5MYTtiPWIuTGE7YSBpbiB6Ynx8KHpiW2FdPXt9KTt6YlthXVtiXT1jfWZ1bmN0aW9uIEJiKGEsYil7dmFyIGM7YSBpbiB6YiYmYiBpbiB6YlthXSYmKGM9emJbYV1bYl0pO3JldHVybiBjfTt2YXIgQ2I9bmV3IGViKDYzNzEwMDguOCk7ZnVuY3Rpb24gRGIoYSxiLGMsZCl7YT1GYihhKTt2YXIgZT1hLmk7ZT9iPWUoYixjKTpcImRlZ3JlZXNcIj09YS5jJiYhZHx8XCJkZWdyZWVzXCI9PWR8fChlPUdiKGEsRmIoXCJFUFNHOjQzMjZcIikpLGI9W2NbMF0tYi8yLGNbMV0sY1swXStiLzIsY1sxXSxjWzBdLGNbMV0tYi8yLGNbMF0sY1sxXStiLzJdLGI9ZShiLGIsMiksYj0oaWIoYi5zbGljZSgwLDIpLGIuc2xpY2UoMiw0KSxDYi5yYWRpdXMpK2liKGIuc2xpY2UoNCw2KSxiLnNsaWNlKDYsOCksQ2IucmFkaXVzKSkvMixhPWQ/bGJbZF06YS5sKCksdm9pZCAwIT09YSYmKGIvPWEpKTtyZXR1cm4gYn1mdW5jdGlvbiBIYihhKXthLmZvckVhY2goSWIpO2EuZm9yRWFjaChmdW5jdGlvbihiKXthLmZvckVhY2goZnVuY3Rpb24oYSl7YiE9PWEmJkFiKGIsYSxKYil9KX0pfWZ1bmN0aW9uIEliKGEpe3liW2EuTGFdPWE7QWIoYSxhLEpiKX1cbmZ1bmN0aW9uIEtiKGEpe3JldHVybiBhP1wic3RyaW5nXCI9PT10eXBlb2YgYT9GYihhKTphOkZiKFwiRVBTRzozODU3XCIpfWZ1bmN0aW9uIExiKGEpe3JldHVybiBmdW5jdGlvbihiLGMsZCl7dmFyIGU9Yi5sZW5ndGg7ZD12b2lkIDAhPT1kP2Q6MjtjPXZvaWQgMCE9PWM/YzpBcnJheShlKTt2YXIgZjtmb3IoZj0wO2Y8ZTtmKz1kKXt2YXIgZz1hKFtiW2ZdLGJbZisxXV0pO2NbZl09Z1swXTtjW2YrMV09Z1sxXTtmb3IoZz1kLTE7Mjw9ZzstLWcpY1tmK2ddPWJbZitnXX1yZXR1cm4gY319ZnVuY3Rpb24gRmIoYSl7dmFyIGI9bnVsbDtpZihhIGluc3RhbmNlb2YgbWIpYj1hO2Vsc2UgaWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhJiYoYj15YlthXXx8bnVsbCwhYikpe3ZhciBjPXdpbmRvdy5wcm9qNDtcImZ1bmN0aW9uXCI9PXR5cGVvZiBjJiZ2b2lkIDAhPT1jLmRlZnMoYSkmJihiPW5ldyBtYih7Y29kZTphfSksSWIoYikpfXJldHVybiBifVxuZnVuY3Rpb24gTWIoYSxiKXtpZihhPT09YilyZXR1cm4hMDt2YXIgYz1hLmM9PT1iLmM7cmV0dXJuIGEuTGE9PT1iLkxhP2M6R2IoYSxiKT09PUpiJiZjfWZ1bmN0aW9uIE5iKGEsYil7YT1GYihhKTtiPUZiKGIpO3JldHVybiBHYihhLGIpfWZ1bmN0aW9uIEdiKGEsYil7dmFyIGM9YS5MYSxkPWIuTGEsZT1CYihjLGQpO2lmKCFlKXt2YXIgZj13aW5kb3cucHJvajQ7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZil7dmFyIGc9Zi5kZWZzKGMpLGg9Zi5kZWZzKGQpO3ZvaWQgMCE9PWcmJnZvaWQgMCE9PWgmJihnPT09aD9IYihbYixhXSk6KGY9ZihkLGMpLGU9Zi5mb3J3YXJkLGY9Zi5pbnZlcnNlLGI9RmIoYiksYT1GYihhKSxBYihiLGEsTGIoZSkpLEFiKGEsYixMYihmKSkpLGU9QmIoYyxkKSl9fWV8fChlPU9iKTtyZXR1cm4gZX1cbmZ1bmN0aW9uIE9iKGEsYil7aWYodm9pZCAwIT09YiYmYSE9PWIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyliW2NdPWFbY107YT1ifXJldHVybiBhfWZ1bmN0aW9uIEpiKGEsYil7aWYodm9pZCAwIT09Yil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWJbY109YVtjXTthPWJ9ZWxzZSBhPWEuc2xpY2UoKTtyZXR1cm4gYX1mdW5jdGlvbiBQYihhLGIsYyl7cmV0dXJuIE5iKGIsYykoYSx2b2lkIDAsYS5sZW5ndGgpfVxuZnVuY3Rpb24gUWIoYSxiLGMpe2I9TmIoYixjKTthPVthWzBdLGFbMV0sYVswXSxhWzNdLGFbMl0sYVsxXSxhWzJdLGFbM11dO2IoYSxhLDIpO2M9W2FbMF0sYVsyXSxhWzRdLGFbNl1dO3ZhciBkPVthWzFdLGFbM10sYVs1XSxhWzddXTthPU1hdGgubWluLmFwcGx5KG51bGwsYyk7Yj1NYXRoLm1pbi5hcHBseShudWxsLGQpO2M9TWF0aC5tYXguYXBwbHkobnVsbCxjKTtkPU1hdGgubWF4LmFwcGx5KG51bGwsZCk7cmV0dXJuIEphKGEsYixjLGQsdm9pZCAwKX1IYihyYik7SGIoeGIpO3hiLmZvckVhY2goZnVuY3Rpb24oYSl7cmIuZm9yRWFjaChmdW5jdGlvbihiKXtBYihhLGIsc2IpO0FiKGIsYSx0Yil9KX0pO2Z1bmN0aW9uIFJiKGEsYil7cmV0dXJuIGE+Yj8xOmE8Yj8tMTowfWZ1bmN0aW9uIFNiKGEsYixjKXt2YXIgZD1hLmxlbmd0aDtpZihhWzBdPD1iKXJldHVybiAwO2lmKCEoYjw9YVtkLTFdKSlpZigwPGMpZm9yKGM9MTtjPGQ7KytjKXtpZihhW2NdPGIpcmV0dXJuIGMtMX1lbHNlIGlmKDA+Yylmb3IoYz0xO2M8ZDsrK2Mpe2lmKGFbY108PWIpcmV0dXJuIGN9ZWxzZSBmb3IoYz0xO2M8ZDsrK2Mpe2lmKGFbY109PWIpcmV0dXJuIGM7aWYoYVtjXTxiKXJldHVybiBhW2MtMV0tYjxiLWFbY10/Yy0xOmN9cmV0dXJuIGQtMX1mdW5jdGlvbiBVYihhLGIpe3ZhciBjPUFycmF5LmlzQXJyYXkoYik/YjpbYl0sZD1jLmxlbmd0aDtmb3IoYj0wO2I8ZDtiKyspYVthLmxlbmd0aF09Y1tiXX1mdW5jdGlvbiBWYihhLGIpe3ZhciBjPWEubGVuZ3RoO2lmKGMhPT1iLmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGQ9MDtkPGM7ZCsrKWlmKGFbZF0hPT1iW2RdKXJldHVybiExO3JldHVybiEwfVxuZnVuY3Rpb24gV2IoYSl7dmFyIGI9WGIsYz1hLmxlbmd0aCxkPUFycmF5KGEubGVuZ3RoKSxlO2ZvcihlPTA7ZTxjO2UrKylkW2VdPXtpbmRleDplLHZhbHVlOmFbZV19O2Quc29ydChmdW5jdGlvbihhLGMpe3JldHVybiBiKGEudmFsdWUsYy52YWx1ZSl8fGEuaW5kZXgtYy5pbmRleH0pO2ZvcihlPTA7ZTxhLmxlbmd0aDtlKyspYVtlXT1kW2VdLnZhbHVlfWZ1bmN0aW9uIFliKGEsYil7dmFyIGM9Ynx8UmI7cmV0dXJuIGEuZXZlcnkoZnVuY3Rpb24oYixlKXtpZigwPT09ZSlyZXR1cm4hMDtiPWMoYVtlLTFdLGIpO3JldHVybiEoMDxifHwwPT09Yil9KX07ZnVuY3Rpb24gWmIoYSxiLGMsZCl7cmV0dXJuIHZvaWQgMCE9PWQ/KGRbMF09YSxkWzFdPWIsZFsyXT1jLGQpOlthLGIsY119O2Z1bmN0aW9uICRiKGEpe3RoaXMubWluWm9vbT12b2lkIDAhPT1hLm1pblpvb20/YS5taW5ab29tOjA7dGhpcy5hPWEucmVzb2x1dGlvbnM7eChZYih0aGlzLmEsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi1hfSksMTcpO2lmKCFhLm9yaWdpbnMpZm9yKHZhciBiPTAsYz10aGlzLmEubGVuZ3RoLTE7YjxjOysrYilpZighZCl2YXIgZD10aGlzLmFbYl0vdGhpcy5hW2IrMV07ZWxzZSBpZih0aGlzLmFbYl0vdGhpcy5hW2IrMV0hPT1kKXtkPXZvaWQgMDticmVha310aGlzLnY9ZDt0aGlzLm1heFpvb209dGhpcy5hLmxlbmd0aC0xO3RoaXMubD12b2lkIDAhPT1hLm9yaWdpbj9hLm9yaWdpbjpudWxsO3RoaXMuaj1udWxsO3ZvaWQgMCE9PWEub3JpZ2lucyYmKHRoaXMuaj1hLm9yaWdpbnMseCh0aGlzLmoubGVuZ3RoPT10aGlzLmEubGVuZ3RoLDIwKSk7ZD1hLmV4dGVudDt2b2lkIDA9PT1kfHx0aGlzLmx8fHRoaXMuanx8KHRoaXMubD1XYShkKSk7eCghdGhpcy5sJiZ0aGlzLmp8fHRoaXMubCYmXG4hdGhpcy5qLDE4KTt0aGlzLmI9bnVsbDt2b2lkIDAhPT1hLnRpbGVTaXplcyYmKHRoaXMuYj1hLnRpbGVTaXplcyx4KHRoaXMuYi5sZW5ndGg9PXRoaXMuYS5sZW5ndGgsMTkpKTt0aGlzLmY9dm9pZCAwIT09YS50aWxlU2l6ZT9hLnRpbGVTaXplOnRoaXMuYj9udWxsOjI1Njt4KCF0aGlzLmYmJnRoaXMuYnx8dGhpcy5mJiYhdGhpcy5iLDIyKTt0aGlzLm89dm9pZCAwIT09ZD9kOm51bGw7dGhpcy5jPW51bGw7dGhpcy5nPVswLDBdO3ZvaWQgMCE9PWEuc2l6ZXM/dGhpcy5jPWEuc2l6ZXMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBuZXcgb2EoTWF0aC5taW4oMCxhWzBdKSxNYXRoLm1heChhWzBdLTEsLTEpLE1hdGgubWluKDAsYVsxXSksTWF0aC5tYXgoYVsxXS0xLC0xKSl9LHRoaXMpOmQmJmFjKHRoaXMsZCl9dmFyIGJjPVswLDAsMF07XG5mdW5jdGlvbiBjYyhhLGIsYyxkKXthPWRjKGEsYixjKTtiPWEuVDtmb3IodmFyIGU9YS5XO2I8PWU7KytiKWZvcih2YXIgZj1hLlIsZz1hLlU7Zjw9ZzsrK2YpZChbYyxiLGZdKX1mdW5jdGlvbiBmYyhhLGIsYyxkLGUpe3ZhciBmPW51bGwsZz1iWzBdLTE7aWYoMj09PWEudil7dmFyIGg9YlsxXTt2YXIgaz1iWzJdfWVsc2UgZj1oYyhhLGIsZSk7Zm9yKDtnPj1hLm1pblpvb207KXsyPT09YS52PyhoPU1hdGguZmxvb3IoaC8yKSxrPU1hdGguZmxvb3Ioay8yKSxiPXBhKGgsaCxrLGssZCkpOmI9ZGMoYSxmLGcsZCk7aWYoYy5jYWxsKG51bGwsZyxiKSlicmVhazstLWd9fSRiLnByb3RvdHlwZS5JPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub307ZnVuY3Rpb24gaWMoYSxiKXtyZXR1cm4gYS5sP2EubDphLmpbYl19XG5mdW5jdGlvbiBqYyhhLGIsYyxkKXtpZihiWzBdPGEubWF4Wm9vbSl7aWYoMj09PWEudilyZXR1cm4gYT0yKmJbMV0sYj0yKmJbMl0scGEoYSxhKzEsYixiKzEsYyk7ZD1oYyhhLGIsZCk7cmV0dXJuIGRjKGEsZCxiWzBdKzEsYyl9cmV0dXJuIG51bGx9ZnVuY3Rpb24ga2MoYSxiLGMpe3ZhciBkPWljKGEsYiksZT1hLmFbYl07YT16YShsYyhhLGIpLGEuZyk7cmV0dXJuIEphKGRbMF0rYy5UKmFbMF0qZSxkWzFdK2MuUiphWzFdKmUsZFswXSsoYy5XKzEpKmFbMF0qZSxkWzFdKyhjLlUrMSkqYVsxXSplLHZvaWQgMCl9ZnVuY3Rpb24gZGMoYSxiLGMsZCl7bWMoYSxiWzBdLGJbMV0sYywhMSxiYyk7dmFyIGU9YmNbMV0sZj1iY1syXTttYyhhLGJbMl0sYlszXSxjLCEwLGJjKTtyZXR1cm4gcGEoZSxiY1sxXSxmLGJjWzJdLGQpfVxuZnVuY3Rpb24gbmMoYSxiKXt2YXIgYz1pYyhhLGJbMF0pLGQ9YS5hW2JbMF1dO2E9emEobGMoYSxiWzBdKSxhLmcpO3JldHVybltjWzBdKyhiWzFdKy41KSphWzBdKmQsY1sxXSsoYlsyXSsuNSkqYVsxXSpkXX1mdW5jdGlvbiBoYyhhLGIsYyl7dmFyIGQ9aWMoYSxiWzBdKSxlPWEuYVtiWzBdXTthPXphKGxjKGEsYlswXSksYS5nKTt2YXIgZj1kWzBdK2JbMV0qYVswXSplO2I9ZFsxXStiWzJdKmFbMV0qZTtyZXR1cm4gSmEoZixiLGYrYVswXSplLGIrYVsxXSplLGMpfWZ1bmN0aW9uIG1jKGEsYixjLGQsZSxmKXt2YXIgZz1pYyhhLGQpLGg9YS5hW2RdO2E9emEobGMoYSxkKSxhLmcpO2I9TWF0aC5mbG9vcigoYi1nWzBdKS9oKyhlPy41OjApKS9hWzBdO2M9TWF0aC5mbG9vcigoYy1nWzFdKS9oKyhlPzA6LjUpKS9hWzFdO2U/KGI9TWF0aC5jZWlsKGIpLTEsYz1NYXRoLmNlaWwoYyktMSk6KGI9TWF0aC5mbG9vcihiKSxjPU1hdGguZmxvb3IoYykpO3JldHVybiBaYihkLGIsYyxmKX1cbmZ1bmN0aW9uIGxjKGEsYil7cmV0dXJuIGEuZj9hLmY6YS5iW2JdfWZ1bmN0aW9uIG9jKGEsYixjKXtyZXR1cm4gcmEoU2IoYS5hLGIsY3x8MCksYS5taW5ab29tLGEubWF4Wm9vbSl9ZnVuY3Rpb24gYWMoYSxiKXtmb3IodmFyIGM9YS5hLmxlbmd0aCxkPUFycmF5KGMpLGU9YS5taW5ab29tO2U8YzsrK2UpZFtlXT1kYyhhLGIsZSk7YS5jPWR9O2Z1bmN0aW9uIHBjKGEpe3ZhciBiPXt9O1phKGIsdm9pZCAwIT09YT9hOnt9KTt2b2lkIDA9PT1iLmV4dGVudCYmKGIuZXh0ZW50PUZiKFwiRVBTRzozODU3XCIpLkkoKSk7Yi5yZXNvbHV0aW9ucz1xYyhiLmV4dGVudCxiLm1heFpvb20sYi50aWxlU2l6ZSk7ZGVsZXRlIGIubWF4Wm9vbTtyZXR1cm4gbmV3ICRiKGIpfWZ1bmN0aW9uIHFjKGEsYixjKXtiPXZvaWQgMCE9PWI/Yjo0Mjt2YXIgZD1UYShhKTthPVhhKGEpO2M9emEodm9pZCAwIT09Yz9jOjI1Nik7Yz1NYXRoLm1heChhL2NbMF0sZC9jWzFdKTtiKz0xO2Q9QXJyYXkoYik7Zm9yKGE9MDthPGI7KythKWRbYV09Yy9NYXRoLnBvdygyLGEpO3JldHVybiBkfWZ1bmN0aW9uIHJjKGEsYixjKXthPXNjKGEpO2I9cWMoYSxiLGMpO3JldHVybiBuZXcgJGIoe2V4dGVudDphLG9yaWdpbjpXYShhKSxyZXNvbHV0aW9uczpiLHRpbGVTaXplOmN9KX1cbmZ1bmN0aW9uIHNjKGEpe2E9RmIoYSk7dmFyIGI9YS5JKCk7Ynx8KGE9MTgwKmxiLmRlZ3JlZXMvYS5sKCksYj1KYSgtYSwtYSxhLGEpKTtyZXR1cm4gYn07ZnVuY3Rpb24gdGMoYSl7dGhpcy5sZT1hLmh0bWx9O2Z1bmN0aW9uIHVjKGEpe2Z1bmN0aW9uIGIoYil7dmFyIGM9YS5saXN0ZW5lcixlPWEuUWR8fGEudGFyZ2V0O2EuVGQmJnZjKGEpO3JldHVybiBjLmNhbGwoZSxiKX1yZXR1cm4gYS5SZD1ifWZ1bmN0aW9uIHdjKGEsYixjLGQpe2Zvcih2YXIgZSxmPTAsZz1hLmxlbmd0aDtmPGc7KytmKWlmKGU9YVtmXSxlLmxpc3RlbmVyPT09YiYmZS5RZD09PWMpcmV0dXJuIGQmJihlLmRlbGV0ZUluZGV4PWYpLGV9ZnVuY3Rpb24geGMoYSxiKXtyZXR1cm4oYT1hLlJhKT9hW2JdOnZvaWQgMH1mdW5jdGlvbiB5YyhhKXt2YXIgYj1hLlJhO2J8fChiPWEuUmE9e30pO3JldHVybiBifVxuZnVuY3Rpb24gemMoYSxiKXt2YXIgYz14YyhhLGIpO2lmKGMpe2Zvcih2YXIgZD0wLGU9Yy5sZW5ndGg7ZDxlOysrZClhLnJlbW92ZUV2ZW50TGlzdGVuZXIoYixjW2RdLlJkKSxiYihjW2RdKTtjLmxlbmd0aD0wO2lmKGM9YS5SYSlkZWxldGUgY1tiXSwwPT09T2JqZWN0LmtleXMoYykubGVuZ3RoJiZkZWxldGUgYS5SYX19ZnVuY3Rpb24geihhLGIsYyxkLGUpe3ZhciBmPXljKGEpLGc9ZltiXTtnfHwoZz1mW2JdPVtdKTsoZj13YyhnLGMsZCwhMSkpP2V8fChmLlRkPSExKTooZj17UWQ6ZCxUZDohIWUsbGlzdGVuZXI6Yyx0YXJnZXQ6YSx0eXBlOmJ9LGEuYWRkRXZlbnRMaXN0ZW5lcihiLHVjKGYpKSxnLnB1c2goZikpO3JldHVybiBmfWZ1bmN0aW9uIEFjKGEsYixjLGQpeyhhPXhjKGEsYikpJiYoYz13YyhhLGMsZCwhMCkpJiZ2YyhjKX1cbmZ1bmN0aW9uIHZjKGEpe2lmKGEmJmEudGFyZ2V0KXthLnRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGEudHlwZSxhLlJkKTt2YXIgYj14YyhhLnRhcmdldCxhLnR5cGUpO2lmKGIpe3ZhciBjPVwiZGVsZXRlSW5kZXhcImluIGE/YS5kZWxldGVJbmRleDpiLmluZGV4T2YoYSk7LTEhPT1jJiZiLnNwbGljZShjLDEpOzA9PT1iLmxlbmd0aCYmemMoYS50YXJnZXQsYS50eXBlKX1iYihhKX19O2Z1bmN0aW9uIEJjKCl7fUJjLnByb3RvdHlwZS4kYT0hMTtmdW5jdGlvbiBDYyhhKXthLiRhfHwoYS4kYT0hMCxhLmNhKCkpfUJjLnByb3RvdHlwZS5jYT1sYTtmdW5jdGlvbiBHYyhhKXt0aGlzLnR5cGU9YTt0aGlzLnRhcmdldD1udWxsfUdjLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1HYy5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5JaT0hMH07ZnVuY3Rpb24gSmMoYSl7YS5zdG9wUHJvcGFnYXRpb24oKX07ZnVuY3Rpb24gS2MoKXt0aGlzLkdhPXt9O3RoaXMuQ2E9e307dGhpcy5pYT17fX12KEtjLEJjKTtLYy5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuaWFbYV07Y3x8KGM9dGhpcy5pYVthXT1bXSk7LTE9PT1jLmluZGV4T2YoYikmJmMucHVzaChiKX07XG5LYy5wcm90b3R5cGUubD1mdW5jdGlvbihhKXt2YXIgYj1cInN0cmluZ1wiPT09dHlwZW9mIGE/bmV3IEdjKGEpOmE7YT1iLnR5cGU7Yi50YXJnZXQ9dGhpczt2YXIgYz10aGlzLmlhW2FdO2lmKGMpe2EgaW4gdGhpcy5DYXx8KHRoaXMuQ2FbYV09MCx0aGlzLkdhW2FdPTApOysrdGhpcy5DYVthXTtmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2Q8ZTsrK2QpaWYoITE9PT1jW2RdLmNhbGwodGhpcyxiKXx8Yi5JaSl7dmFyIGY9ITE7YnJlYWt9LS10aGlzLkNhW2FdO2lmKDA9PT10aGlzLkNhW2FdKXtiPXRoaXMuR2FbYV07Zm9yKGRlbGV0ZSB0aGlzLkdhW2FdO2ItLTspdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGEsbGEpO2RlbGV0ZSB0aGlzLkNhW2FdfXJldHVybiBmfX07S2MucHJvdG90eXBlLmNhPWZ1bmN0aW9uKCl7dmFyIGE9eWModGhpcyksYjtmb3IoYiBpbiBhKXpjKHRoaXMsYil9O1xuZnVuY3Rpb24gTGMoYSxiKXtyZXR1cm4gYj9iIGluIGEuaWE6MDxPYmplY3Qua2V5cyhhLmlhKS5sZW5ndGh9S2MucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmlhW2FdO2MmJihiPWMuaW5kZXhPZihiKSxhIGluIHRoaXMuR2E/KGNbYl09bGEsKyt0aGlzLkdhW2FdKTooYy5zcGxpY2UoYiwxKSwwPT09Yy5sZW5ndGgmJmRlbGV0ZSB0aGlzLmlhW2FdKSl9O2Z1bmN0aW9uIE1jKCl7S2MuY2FsbCh0aGlzKTt0aGlzLmo9MH12KE1jLEtjKTtNYy5wcm90b3R5cGUuYz1mdW5jdGlvbigpeysrdGhpcy5qO3RoaXMubChcImNoYW5nZVwiKX07TWMucHJvdG90eXBlLnY9ZnVuY3Rpb24oYSxiLGMpe2lmKEFycmF5LmlzQXJyYXkoYSkpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPUFycmF5KGQpLGY9MDtmPGQ7KytmKWVbZl09eih0aGlzLGFbZl0sYixjKTtyZXR1cm4gZX1yZXR1cm4geih0aGlzLGEsYixjKX07TWMucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oYSxiLGMpe2lmKEFycmF5LmlzQXJyYXkoYSkpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPUFycmF5KGQpLGY9MDtmPGQ7KytmKWVbZl09eih0aGlzLGFbZl0sYixjLCEwKTtyZXR1cm4gZX1yZXR1cm4geih0aGlzLGEsYixjLCEwKX07XG5NYy5wcm90b3R5cGUua2E9ZnVuY3Rpb24oYSxiLGMpe2lmKEFycmF5LmlzQXJyYXkoYSkpZm9yKHZhciBkPTAsZT1hLmxlbmd0aDtkPGU7KytkKUFjKHRoaXMsYVtkXSxiLGMpO2Vsc2UgQWModGhpcyxhLGIsYyl9O2Z1bmN0aW9uIE5jKGEpe01jLmNhbGwodGhpcyk7dyh0aGlzKTt0aGlzLkg9e307dm9pZCAwIT09YSYmdGhpcy5uYShhKX12KE5jLE1jKTt2YXIgT2M9e307ZnVuY3Rpb24gUGMoYSl7cmV0dXJuIE9jLmhhc093blByb3BlcnR5KGEpP09jW2FdOk9jW2FdPVwiY2hhbmdlOlwiK2F9bD1OYy5wcm90b3R5cGU7bC5nZXQ9ZnVuY3Rpb24oYSl7dmFyIGI7dGhpcy5ILmhhc093blByb3BlcnR5KGEpJiYoYj10aGlzLkhbYV0pO3JldHVybiBifTtsLkZhPWZ1bmN0aW9uKCl7cmV0dXJuIFphKHt9LHRoaXMuSCl9O2Z1bmN0aW9uIFFjKGEsYixjKXt2YXIgZD1QYyhiKTthLmwobmV3IFJjKGQsYixjKSk7YS5sKG5ldyBSYyhcInByb3BlcnR5Y2hhbmdlXCIsYixjKSl9bC5zZXQ9ZnVuY3Rpb24oYSxiLGMpe2M/dGhpcy5IW2FdPWI6KGM9dGhpcy5IW2FdLHRoaXMuSFthXT1iLGMhPT1iJiZRYyh0aGlzLGEsYykpfTtsLm5hPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjIGluIGEpdGhpcy5zZXQoYyxhW2NdLGIpfTtcbmwubmo9ZnVuY3Rpb24oYSxiKXtpZihhIGluIHRoaXMuSCl7dmFyIGM9dGhpcy5IW2FdO2RlbGV0ZSB0aGlzLkhbYV07Ynx8UWModGhpcyxhLGMpfX07ZnVuY3Rpb24gUmMoYSxiLGMpe0djLmNhbGwodGhpcyxhKTt0aGlzLmtleT1iO3RoaXMub2xkVmFsdWU9Y312KFJjLEdjKTtmdW5jdGlvbiBTYyhhLGIpe05jLmNhbGwodGhpcyk7dGhpcy5iPSEhKGJ8fHt9KS51bmlxdWU7dGhpcy5hPWE/YTpbXTtpZih0aGlzLmIpZm9yKGE9MCxiPXRoaXMuYS5sZW5ndGg7YTxiOysrYSlUYyh0aGlzLHRoaXMuYVthXSxhKTtVYyh0aGlzKX12KFNjLE5jKTtsPVNjLnByb3RvdHlwZTtsLmNsZWFyPWZ1bmN0aW9uKCl7Zm9yKDswPHRoaXMuZmIoKTspdGhpcy5wb3AoKX07ZnVuY3Rpb24gVmMoYSxiKXt2YXIgYzt2YXIgZD0wO2ZvcihjPWIubGVuZ3RoO2Q8YzsrK2QpYS5wdXNoKGJbZF0pfWwuZm9yRWFjaD1mdW5jdGlvbihhLGIpe2E9Yj9hLmJpbmQoYik6YTtiPXRoaXMuYTtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2M8ZDsrK2MpYShiW2NdLGMsYil9O2wueGc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hfTtsLm9lPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmFbYV19O2wuZmI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoV2MpfTtcbmwucG9wPWZ1bmN0aW9uKCl7cmV0dXJuIFhjKHRoaXMsdGhpcy5mYigpLTEpfTtsLnB1c2g9ZnVuY3Rpb24oYSl7dGhpcy5iJiZUYyh0aGlzLGEpO3ZhciBiPXRoaXMuZmIoKTt0aGlzLmImJlRjKHRoaXMsYSk7dGhpcy5hLnNwbGljZShiLDAsYSk7VWModGhpcyk7dGhpcy5sKG5ldyBZYyhcImFkZFwiLGEpKTtyZXR1cm4gdGhpcy5mYigpfTtsLnJlbW92ZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmEsYzt2YXIgZD0wO2ZvcihjPWIubGVuZ3RoO2Q8YzsrK2QpaWYoYltkXT09PWEpcmV0dXJuIFhjKHRoaXMsZCl9O2Z1bmN0aW9uIFhjKGEsYil7dmFyIGM9YS5hW2JdO2EuYS5zcGxpY2UoYiwxKTtVYyhhKTthLmwobmV3IFljKFwicmVtb3ZlXCIsYykpO3JldHVybiBjfWZ1bmN0aW9uIFVjKGEpe2Euc2V0KFdjLGEuYS5sZW5ndGgpfVxuZnVuY3Rpb24gVGMoYSxiLGMpe2Zvcih2YXIgZD0wLGU9YS5hLmxlbmd0aDtkPGU7KytkKWlmKGEuYVtkXT09PWImJmQhPT1jKXRocm93IG5ldyBuYSg1OCk7fXZhciBXYz1cImxlbmd0aFwiO2Z1bmN0aW9uIFljKGEsYil7R2MuY2FsbCh0aGlzLGEpO3RoaXMuZWxlbWVudD1ifXYoWWMsR2MpO2Z1bmN0aW9uIFpjKGEsYixjKXtHYy5jYWxsKHRoaXMsYSk7dGhpcy5tYXA9Yjt0aGlzLmZyYW1lU3RhdGU9dm9pZCAwIT09Yz9jOm51bGx9dihaYyxHYyk7ZnVuY3Rpb24gJGMoYSxiLGMsZCxlKXtaYy5jYWxsKHRoaXMsYSxiLGUpO3RoaXMub3JpZ2luYWxFdmVudD1jO3RoaXMucGl4ZWw9YWQoYixjKTt0aGlzLmNvb3JkaW5hdGU9Yi5KYSh0aGlzLnBpeGVsKTt0aGlzLmRyYWdnaW5nPXZvaWQgMCE9PWQ/ZDohMX12KCRjLFpjKTskYy5wcm90b3R5cGUucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtaYy5wcm90b3R5cGUucHJldmVudERlZmF1bHQuY2FsbCh0aGlzKTt0aGlzLm9yaWdpbmFsRXZlbnQucHJldmVudERlZmF1bHQoKX07JGMucHJvdG90eXBlLnN0b3BQcm9wYWdhdGlvbj1mdW5jdGlvbigpe1pjLnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb24uY2FsbCh0aGlzKTt0aGlzLm9yaWdpbmFsRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCl9O3ZhciBiZD1cInVuZGVmaW5lZFwiIT09dHlwZW9mIG5hdmlnYXRvcj9uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk6XCJcIixmZD0tMSE9PWJkLmluZGV4T2YoXCJmaXJlZm94XCIpLGdkPS0xIT09YmQuaW5kZXhPZihcInNhZmFyaVwiKSYmLTE9PWJkLmluZGV4T2YoXCJjaHJvbVwiKSxoZD0tMSE9PWJkLmluZGV4T2YoXCJ3ZWJraXRcIikmJi0xPT1iZC5pbmRleE9mKFwiZWRnZVwiKSxpZD0tMSE9PWJkLmluZGV4T2YoXCJtYWNpbnRvc2hcIiksamQ9d2luZG93LmRldmljZVBpeGVsUmF0aW98fDEsa2Q9ITE7KGZ1bmN0aW9uKCl7aWYoIShcIkhUTUxDYW52YXNFbGVtZW50XCJpbiB3aW5kb3cpKXJldHVybiExO3RyeXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQ0FOVkFTXCIpLmdldENvbnRleHQoXCIyZFwiKTtyZXR1cm4gYT8odm9pZCAwIT09YS5zZXRMaW5lRGFzaCYmKGtkPSEwKSwhMCk6ITF9Y2F0Y2goYil7cmV0dXJuITF9fSkoKTtcbnZhciBsZD1cImdlb2xvY2F0aW9uXCJpbiBuYXZpZ2F0b3IsbWQ9XCJvbnRvdWNoc3RhcnRcImluIHdpbmRvdyxuZD1cIlBvaW50ZXJFdmVudFwiaW4gd2luZG93LG9kPSEhbmF2aWdhdG9yLm1zUG9pbnRlckVuYWJsZWQ7dmFyIHBkPXtDajpcInNpbmdsZWNsaWNrXCIscmo6XCJjbGlja1wiLHNqOlwiZGJsY2xpY2tcIix2ajpcInBvaW50ZXJkcmFnXCIseWo6XCJwb2ludGVybW92ZVwiLHVqOlwicG9pbnRlcmRvd25cIixCajpcInBvaW50ZXJ1cFwiLEFqOlwicG9pbnRlcm92ZXJcIix6ajpcInBvaW50ZXJvdXRcIix3ajpcInBvaW50ZXJlbnRlclwiLHhqOlwicG9pbnRlcmxlYXZlXCIsdGo6XCJwb2ludGVyY2FuY2VsXCJ9O2Z1bmN0aW9uIHFkKGEsYixjLGQsZSl7JGMuY2FsbCh0aGlzLGEsYixjLmEsZCxlKTt0aGlzLmE9Y312KHFkLCRjKTtmdW5jdGlvbiByZChhLGIpe3RoaXMuYT1hO3RoaXMuYj1ifTtmdW5jdGlvbiBzZChhKXtyZC5jYWxsKHRoaXMsYSx7bW91c2Vkb3duOnRoaXMubWgsbW91c2Vtb3ZlOnRoaXMubmgsbW91c2V1cDp0aGlzLnFoLG1vdXNlb3Zlcjp0aGlzLnBoLG1vdXNlb3V0OnRoaXMub2h9KTt0aGlzLmM9YS5jO3RoaXMubD1bXX12KHNkLHJkKTtmdW5jdGlvbiB0ZChhLGIpe2E9YS5sO3ZhciBjPWIuY2xpZW50WDtiPWIuY2xpZW50WTtmb3IodmFyIGQ9MCxlPWEubGVuZ3RoLGY7ZDxlJiYoZj1hW2RdKTtkKyspe3ZhciBnPU1hdGguYWJzKGItZlsxXSk7aWYoMjU+PU1hdGguYWJzKGMtZlswXSkmJjI1Pj1nKXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIHVkKGEpe3ZhciBiPXZkKGEsYSksYz1iLnByZXZlbnREZWZhdWx0O2IucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXthLnByZXZlbnREZWZhdWx0KCk7YygpfTtiLnBvaW50ZXJJZD0xO2IuaXNQcmltYXJ5PSEwO2IucG9pbnRlclR5cGU9XCJtb3VzZVwiO3JldHVybiBifWw9c2QucHJvdG90eXBlO1xubC5taD1mdW5jdGlvbihhKXtpZighdGQodGhpcyxhKSl7KDEpLnRvU3RyaW5nKClpbiB0aGlzLmMmJnRoaXMuY2FuY2VsKGEpO3ZhciBiPXVkKGEpO3RoaXMuY1soMSkudG9TdHJpbmcoKV09YTt3ZCh0aGlzLmEsXCJwb2ludGVyZG93blwiLGIsYSl9fTtsLm5oPWZ1bmN0aW9uKGEpe2lmKCF0ZCh0aGlzLGEpKXt2YXIgYj11ZChhKTt3ZCh0aGlzLmEsXCJwb2ludGVybW92ZVwiLGIsYSl9fTtsLnFoPWZ1bmN0aW9uKGEpe2lmKCF0ZCh0aGlzLGEpKXt2YXIgYj10aGlzLmNbKDEpLnRvU3RyaW5nKCldO2ImJmIuYnV0dG9uPT09YS5idXR0b24mJihiPXVkKGEpLHdkKHRoaXMuYSxcInBvaW50ZXJ1cFwiLGIsYSksZGVsZXRlIHRoaXMuY1soMSkudG9TdHJpbmcoKV0pfX07bC5waD1mdW5jdGlvbihhKXtpZighdGQodGhpcyxhKSl7dmFyIGI9dWQoYSk7eGQodGhpcy5hLGIsYSl9fTtsLm9oPWZ1bmN0aW9uKGEpe2lmKCF0ZCh0aGlzLGEpKXt2YXIgYj11ZChhKTt5ZCh0aGlzLmEsYixhKX19O1xubC5jYW5jZWw9ZnVuY3Rpb24oYSl7dmFyIGI9dWQoYSk7dGhpcy5hLmNhbmNlbChiLGEpO2RlbGV0ZSB0aGlzLmNbKDEpLnRvU3RyaW5nKCldfTtmdW5jdGlvbiB6ZChhKXtyZC5jYWxsKHRoaXMsYSx7TVNQb2ludGVyRG93bjp0aGlzLnZoLE1TUG9pbnRlck1vdmU6dGhpcy53aCxNU1BvaW50ZXJVcDp0aGlzLnpoLE1TUG9pbnRlck91dDp0aGlzLnhoLE1TUG9pbnRlck92ZXI6dGhpcy55aCxNU1BvaW50ZXJDYW5jZWw6dGhpcy51aCxNU0dvdFBvaW50ZXJDYXB0dXJlOnRoaXMuc2gsTVNMb3N0UG9pbnRlckNhcHR1cmU6dGhpcy50aH0pO3RoaXMuYz1hLmM7dGhpcy5sPVtcIlwiLFwidW5hdmFpbGFibGVcIixcInRvdWNoXCIsXCJwZW5cIixcIm1vdXNlXCJdfXYoemQscmQpO2Z1bmN0aW9uIEFkKGEsYil7dmFyIGM9YjtcIm51bWJlclwiPT09dHlwZW9mIGIucG9pbnRlclR5cGUmJihjPXZkKGIsYiksYy5wb2ludGVyVHlwZT1hLmxbYi5wb2ludGVyVHlwZV0pO3JldHVybiBjfWw9emQucHJvdG90eXBlO1xubC52aD1mdW5jdGlvbihhKXt0aGlzLmNbYS5wb2ludGVySWQudG9TdHJpbmcoKV09YTt2YXIgYj1BZCh0aGlzLGEpO3dkKHRoaXMuYSxcInBvaW50ZXJkb3duXCIsYixhKX07bC53aD1mdW5jdGlvbihhKXt2YXIgYj1BZCh0aGlzLGEpO3dkKHRoaXMuYSxcInBvaW50ZXJtb3ZlXCIsYixhKX07bC56aD1mdW5jdGlvbihhKXt2YXIgYj1BZCh0aGlzLGEpO3dkKHRoaXMuYSxcInBvaW50ZXJ1cFwiLGIsYSk7ZGVsZXRlIHRoaXMuY1thLnBvaW50ZXJJZC50b1N0cmluZygpXX07bC54aD1mdW5jdGlvbihhKXt2YXIgYj1BZCh0aGlzLGEpO3lkKHRoaXMuYSxiLGEpfTtsLnloPWZ1bmN0aW9uKGEpe3ZhciBiPUFkKHRoaXMsYSk7eGQodGhpcy5hLGIsYSl9O2wudWg9ZnVuY3Rpb24oYSl7dmFyIGI9QWQodGhpcyxhKTt0aGlzLmEuY2FuY2VsKGIsYSk7ZGVsZXRlIHRoaXMuY1thLnBvaW50ZXJJZC50b1N0cmluZygpXX07XG5sLnRoPWZ1bmN0aW9uKGEpe3RoaXMuYS5sKG5ldyBCZChcImxvc3Rwb2ludGVyY2FwdHVyZVwiLGEsYSkpfTtsLnNoPWZ1bmN0aW9uKGEpe3RoaXMuYS5sKG5ldyBCZChcImdvdHBvaW50ZXJjYXB0dXJlXCIsYSxhKSl9O2Z1bmN0aW9uIENkKGEpe3JkLmNhbGwodGhpcyxhLHtwb2ludGVyZG93bjp0aGlzLkJpLHBvaW50ZXJtb3ZlOnRoaXMuQ2kscG9pbnRlcnVwOnRoaXMuRmkscG9pbnRlcm91dDp0aGlzLkRpLHBvaW50ZXJvdmVyOnRoaXMuRWkscG9pbnRlcmNhbmNlbDp0aGlzLkFpLGdvdHBvaW50ZXJjYXB0dXJlOnRoaXMuSGcsbG9zdHBvaW50ZXJjYXB0dXJlOnRoaXMuamh9KX12KENkLHJkKTtsPUNkLnByb3RvdHlwZTtsLkJpPWZ1bmN0aW9uKGEpe0RkKHRoaXMuYSxhKX07bC5DaT1mdW5jdGlvbihhKXtEZCh0aGlzLmEsYSl9O2wuRmk9ZnVuY3Rpb24oYSl7RGQodGhpcy5hLGEpfTtsLkRpPWZ1bmN0aW9uKGEpe0RkKHRoaXMuYSxhKX07bC5FaT1mdW5jdGlvbihhKXtEZCh0aGlzLmEsYSl9O2wuQWk9ZnVuY3Rpb24oYSl7RGQodGhpcy5hLGEpfTtsLmpoPWZ1bmN0aW9uKGEpe0RkKHRoaXMuYSxhKX07bC5IZz1mdW5jdGlvbihhKXtEZCh0aGlzLmEsYSl9O2Z1bmN0aW9uIEJkKGEsYixjKXtHYy5jYWxsKHRoaXMsYSk7dGhpcy5hPWI7YT1jP2M6e307dGhpcy5idXR0b25zPUVkKGEpO3RoaXMucHJlc3N1cmU9RmQoYSx0aGlzLmJ1dHRvbnMpO3RoaXMuYnViYmxlcz1cImJ1YmJsZXNcImluIGE/YS5idWJibGVzOiExO3RoaXMuY2FuY2VsYWJsZT1cImNhbmNlbGFibGVcImluIGE/YS5jYW5jZWxhYmxlOiExO3RoaXMudmlldz1cInZpZXdcImluIGE/YS52aWV3Om51bGw7dGhpcy5kZXRhaWw9XCJkZXRhaWxcImluIGE/YS5kZXRhaWw6bnVsbDt0aGlzLnNjcmVlblg9XCJzY3JlZW5YXCJpbiBhP2Euc2NyZWVuWDowO3RoaXMuc2NyZWVuWT1cInNjcmVlbllcImluIGE/YS5zY3JlZW5ZOjA7dGhpcy5jbGllbnRYPVwiY2xpZW50WFwiaW4gYT9hLmNsaWVudFg6MDt0aGlzLmNsaWVudFk9XCJjbGllbnRZXCJpbiBhP2EuY2xpZW50WTowO3RoaXMuY3RybEtleT1cImN0cmxLZXlcImluIGE/YS5jdHJsS2V5OiExO3RoaXMuYWx0S2V5PVwiYWx0S2V5XCJpbiBhP2EuYWx0S2V5OiExO3RoaXMuc2hpZnRLZXk9XG5cInNoaWZ0S2V5XCJpbiBhP2Euc2hpZnRLZXk6ITE7dGhpcy5tZXRhS2V5PVwibWV0YUtleVwiaW4gYT9hLm1ldGFLZXk6ITE7dGhpcy5idXR0b249XCJidXR0b25cImluIGE/YS5idXR0b246MDt0aGlzLnJlbGF0ZWRUYXJnZXQ9XCJyZWxhdGVkVGFyZ2V0XCJpbiBhP2EucmVsYXRlZFRhcmdldDpudWxsO3RoaXMucG9pbnRlcklkPVwicG9pbnRlcklkXCJpbiBhP2EucG9pbnRlcklkOjA7dGhpcy53aWR0aD1cIndpZHRoXCJpbiBhP2Eud2lkdGg6MDt0aGlzLmhlaWdodD1cImhlaWdodFwiaW4gYT9hLmhlaWdodDowO3RoaXMudGlsdFg9XCJ0aWx0WFwiaW4gYT9hLnRpbHRYOjA7dGhpcy50aWx0WT1cInRpbHRZXCJpbiBhP2EudGlsdFk6MDt0aGlzLnBvaW50ZXJUeXBlPVwicG9pbnRlclR5cGVcImluIGE/YS5wb2ludGVyVHlwZTpcIlwiO3RoaXMuaXNQcmltYXJ5PVwiaXNQcmltYXJ5XCJpbiBhP2EuaXNQcmltYXJ5OiExO2IucHJldmVudERlZmF1bHQmJih0aGlzLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7Yi5wcmV2ZW50RGVmYXVsdCgpfSl9XG52KEJkLEdjKTtmdW5jdGlvbiBFZChhKXtpZihhLmJ1dHRvbnN8fEdkKWE9YS5idXR0b25zO2Vsc2Ugc3dpdGNoKGEud2hpY2gpe2Nhc2UgMTphPTE7YnJlYWs7Y2FzZSAyOmE9NDticmVhaztjYXNlIDM6YT0yO2JyZWFrO2RlZmF1bHQ6YT0wfXJldHVybiBhfWZ1bmN0aW9uIEZkKGEsYil7dmFyIGM9MDthLnByZXNzdXJlP2M9YS5wcmVzc3VyZTpjPWI/LjU6MDtyZXR1cm4gY312YXIgR2Q9ITE7dHJ5e0dkPTE9PT0obmV3IE1vdXNlRXZlbnQoXCJjbGlja1wiLHtidXR0b25zOjF9KSkuYnV0dG9uc31jYXRjaChhKXt9O2Z1bmN0aW9uIEhkKGEsYil7cmQuY2FsbCh0aGlzLGEse3RvdWNoc3RhcnQ6dGhpcy5taix0b3VjaG1vdmU6dGhpcy5saix0b3VjaGVuZDp0aGlzLmtqLHRvdWNoY2FuY2VsOnRoaXMuamp9KTt0aGlzLmM9YS5jO3RoaXMuZj1iO3RoaXMubD12b2lkIDA7dGhpcy5nPTA7dGhpcy5qPXZvaWQgMH12KEhkLHJkKTtsPUhkLnByb3RvdHlwZTtsLmdmPWZ1bmN0aW9uKCl7dGhpcy5nPTA7dGhpcy5qPXZvaWQgMH07XG5mdW5jdGlvbiBJZChhLGIsYyl7Yj12ZChiLGMpO2IucG9pbnRlcklkPWMuaWRlbnRpZmllcisyO2IuYnViYmxlcz0hMDtiLmNhbmNlbGFibGU9ITA7Yi5kZXRhaWw9YS5nO2IuYnV0dG9uPTA7Yi5idXR0b25zPTE7Yi53aWR0aD1jLndlYmtpdFJhZGl1c1h8fGMucmFkaXVzWHx8MDtiLmhlaWdodD1jLndlYmtpdFJhZGl1c1l8fGMucmFkaXVzWXx8MDtiLnByZXNzdXJlPWMud2Via2l0Rm9yY2V8fGMuZm9yY2V8fC41O2IuaXNQcmltYXJ5PWEubD09PWMuaWRlbnRpZmllcjtiLnBvaW50ZXJUeXBlPVwidG91Y2hcIjtiLmNsaWVudFg9Yy5jbGllbnRYO2IuY2xpZW50WT1jLmNsaWVudFk7Yi5zY3JlZW5YPWMuc2NyZWVuWDtiLnNjcmVlblk9Yy5zY3JlZW5ZO3JldHVybiBifVxuZnVuY3Rpb24gUWQoYSxiLGMpe2Z1bmN0aW9uIGQoKXtiLnByZXZlbnREZWZhdWx0KCl9dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYi5jaGFuZ2VkVG91Y2hlcyksZj1lLmxlbmd0aCxnO2ZvcihnPTA7ZzxmOysrZyl7dmFyIGg9SWQoYSxiLGVbZ10pO2gucHJldmVudERlZmF1bHQ9ZDtjLmNhbGwoYSxiLGgpfX1cbmwubWo9ZnVuY3Rpb24oYSl7dmFyIGI9YS50b3VjaGVzLGM9T2JqZWN0LmtleXModGhpcy5jKSxkPWMubGVuZ3RoO2lmKGQ+PWIubGVuZ3RoKXt2YXIgZT1bXSxmO2ZvcihmPTA7ZjxkOysrZil7dmFyIGc9Y1tmXTt2YXIgaD10aGlzLmNbZ107dmFyIGs7aWYoIShrPTE9PWcpKWE6e2Zvcih2YXIgbT1iLmxlbmd0aCxuPTA7bjxtO24rKylpZihrPWJbbl0say5pZGVudGlmaWVyPT09Zy0yKXtrPSEwO2JyZWFrIGF9az0hMX1rfHxlLnB1c2goaC5vdXQpfWZvcihmPTA7ZjxlLmxlbmd0aDsrK2YpdGhpcy5LYyhhLGVbZl0pfWI9YS5jaGFuZ2VkVG91Y2hlc1swXTtjPU9iamVjdC5rZXlzKHRoaXMuYykubGVuZ3RoO2lmKDA9PT1jfHwxPT09YyYmKDEpLnRvU3RyaW5nKClpbiB0aGlzLmMpdGhpcy5sPWIuaWRlbnRpZmllcix2b2lkIDAhPT10aGlzLmomJmNsZWFyVGltZW91dCh0aGlzLmopO1JkKHRoaXMsYSk7dGhpcy5nKys7UWQodGhpcyxhLHRoaXMud2kpfTtcbmwud2k9ZnVuY3Rpb24oYSxiKXt0aGlzLmNbYi5wb2ludGVySWRdPXt0YXJnZXQ6Yi50YXJnZXQsb3V0OmIsVGU6Yi50YXJnZXR9O3ZhciBjPXRoaXMuYTtiLmJ1YmJsZXM9ITA7d2QoYyxcInBvaW50ZXJvdmVyXCIsYixhKTtjPXRoaXMuYTtiLmJ1YmJsZXM9ITE7d2QoYyxcInBvaW50ZXJlbnRlclwiLGIsYSk7d2QodGhpcy5hLFwicG9pbnRlcmRvd25cIixiLGEpfTtsLmxqPWZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTtRZCh0aGlzLGEsdGhpcy5yaCl9O1xubC5yaD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuY1tiLnBvaW50ZXJJZF07aWYoYyl7dmFyIGQ9Yy5vdXQsZT1jLlRlO3dkKHRoaXMuYSxcInBvaW50ZXJtb3ZlXCIsYixhKTtkJiZlIT09Yi50YXJnZXQmJihkLnJlbGF0ZWRUYXJnZXQ9Yi50YXJnZXQsYi5yZWxhdGVkVGFyZ2V0PWUsZC50YXJnZXQ9ZSxiLnRhcmdldD8oeWQodGhpcy5hLGQsYSkseGQodGhpcy5hLGIsYSkpOihiLnRhcmdldD1lLGIucmVsYXRlZFRhcmdldD1udWxsLHRoaXMuS2MoYSxiKSkpO2Mub3V0PWI7Yy5UZT1iLnRhcmdldH19O2wua2o9ZnVuY3Rpb24oYSl7UmQodGhpcyxhKTtRZCh0aGlzLGEsdGhpcy5vail9O1xubC5vaj1mdW5jdGlvbihhLGIpe3dkKHRoaXMuYSxcInBvaW50ZXJ1cFwiLGIsYSk7dGhpcy5hLm91dChiLGEpO1NkKHRoaXMuYSxiLGEpO2RlbGV0ZSB0aGlzLmNbYi5wb2ludGVySWRdO2IuaXNQcmltYXJ5JiYodGhpcy5sPXZvaWQgMCx0aGlzLmo9c2V0VGltZW91dCh0aGlzLmdmLmJpbmQodGhpcyksMjAwKSl9O2wuamo9ZnVuY3Rpb24oYSl7UWQodGhpcyxhLHRoaXMuS2MpfTtsLktjPWZ1bmN0aW9uKGEsYil7dGhpcy5hLmNhbmNlbChiLGEpO3RoaXMuYS5vdXQoYixhKTtTZCh0aGlzLmEsYixhKTtkZWxldGUgdGhpcy5jW2IucG9pbnRlcklkXTtiLmlzUHJpbWFyeSYmKHRoaXMubD12b2lkIDAsdGhpcy5qPXNldFRpbWVvdXQodGhpcy5nZi5iaW5kKHRoaXMpLDIwMCkpfTtcbmZ1bmN0aW9uIFJkKGEsYil7dmFyIGM9YS5mLmw7Yj1iLmNoYW5nZWRUb3VjaGVzWzBdO2lmKGEubD09PWIuaWRlbnRpZmllcil7dmFyIGQ9W2IuY2xpZW50WCxiLmNsaWVudFldO2MucHVzaChkKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGE9Yy5pbmRleE9mKGQpOy0xPGEmJmMuc3BsaWNlKGEsMSl9LDI1MDApfX07ZnVuY3Rpb24gVGQoYSl7S2MuY2FsbCh0aGlzKTt0aGlzLmc9YTt0aGlzLmM9e307dGhpcy5iPXt9O3RoaXMuYT1bXTtuZD9VZCh0aGlzLG5ldyBDZCh0aGlzKSk6b2Q/VWQodGhpcyxuZXcgemQodGhpcykpOihhPW5ldyBzZCh0aGlzKSxVZCh0aGlzLGEpLG1kJiZVZCh0aGlzLG5ldyBIZCh0aGlzLGEpKSk7YT10aGlzLmEubGVuZ3RoO2Zvcih2YXIgYixjPTA7YzxhO2MrKyliPXRoaXMuYVtjXSxWZCh0aGlzLE9iamVjdC5rZXlzKGIuYikpfXYoVGQsS2MpO2Z1bmN0aW9uIFVkKGEsYil7dmFyIGM9T2JqZWN0LmtleXMoYi5iKTtjJiYoYy5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciBjPWIuYlthXTtjJiYodGhpcy5iW2FdPWMuYmluZChiKSl9LGEpLGEuYS5wdXNoKGIpKX1UZC5wcm90b3R5cGUuaj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmJbYS50eXBlXTtiJiZiKGEpfTtcbmZ1bmN0aW9uIFZkKGEsYil7Yi5mb3JFYWNoKGZ1bmN0aW9uKGEpe3oodGhpcy5nLGEsdGhpcy5qLHRoaXMpfSxhKX1mdW5jdGlvbiBXZChhLGIpe2IuZm9yRWFjaChmdW5jdGlvbihhKXtBYyh0aGlzLmcsYSx0aGlzLmosdGhpcyl9LGEpfWZ1bmN0aW9uIHZkKGEsYil7Zm9yKHZhciBjPXt9LGQsZT0wLGY9WGQubGVuZ3RoO2U8ZjtlKyspZD1YZFtlXVswXSxjW2RdPWFbZF18fGJbZF18fFhkW2VdWzFdO3JldHVybiBjfWZ1bmN0aW9uIFNkKGEsYixjKXtiLmJ1YmJsZXM9ITE7d2QoYSxcInBvaW50ZXJsZWF2ZVwiLGIsYyl9VGQucHJvdG90eXBlLm91dD1mdW5jdGlvbihhLGIpe2EuYnViYmxlcz0hMDt3ZCh0aGlzLFwicG9pbnRlcm91dFwiLGEsYil9O1RkLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oYSxiKXt3ZCh0aGlzLFwicG9pbnRlcmNhbmNlbFwiLGEsYil9O1xuZnVuY3Rpb24geWQoYSxiLGMpe2Eub3V0KGIsYyk7dmFyIGQ9Yi50YXJnZXQsZT1iLnJlbGF0ZWRUYXJnZXQ7ZCYmZSYmZC5jb250YWlucyhlKXx8U2QoYSxiLGMpfWZ1bmN0aW9uIHhkKGEsYixjKXtiLmJ1YmJsZXM9ITA7d2QoYSxcInBvaW50ZXJvdmVyXCIsYixjKTt2YXIgZD1iLnRhcmdldCxlPWIucmVsYXRlZFRhcmdldDtkJiZlJiZkLmNvbnRhaW5zKGUpfHwoYi5idWJibGVzPSExLHdkKGEsXCJwb2ludGVyZW50ZXJcIixiLGMpKX1mdW5jdGlvbiB3ZChhLGIsYyxkKXthLmwobmV3IEJkKGIsZCxjKSl9ZnVuY3Rpb24gRGQoYSxiKXthLmwobmV3IEJkKGIudHlwZSxiLGIpKX1UZC5wcm90b3R5cGUuY2E9ZnVuY3Rpb24oKXtmb3IodmFyIGE9dGhpcy5hLmxlbmd0aCxiLGM9MDtjPGE7YysrKWI9dGhpcy5hW2NdLFdkKHRoaXMsT2JqZWN0LmtleXMoYi5iKSk7S2MucHJvdG90eXBlLmNhLmNhbGwodGhpcyl9O1xudmFyIFhkPVtbXCJidWJibGVzXCIsITFdLFtcImNhbmNlbGFibGVcIiwhMV0sW1widmlld1wiLG51bGxdLFtcImRldGFpbFwiLG51bGxdLFtcInNjcmVlblhcIiwwXSxbXCJzY3JlZW5ZXCIsMF0sW1wiY2xpZW50WFwiLDBdLFtcImNsaWVudFlcIiwwXSxbXCJjdHJsS2V5XCIsITFdLFtcImFsdEtleVwiLCExXSxbXCJzaGlmdEtleVwiLCExXSxbXCJtZXRhS2V5XCIsITFdLFtcImJ1dHRvblwiLDBdLFtcInJlbGF0ZWRUYXJnZXRcIixudWxsXSxbXCJidXR0b25zXCIsMF0sW1wicG9pbnRlcklkXCIsMF0sW1wid2lkdGhcIiwwXSxbXCJoZWlnaHRcIiwwXSxbXCJwcmVzc3VyZVwiLDBdLFtcInRpbHRYXCIsMF0sW1widGlsdFlcIiwwXSxbXCJwb2ludGVyVHlwZVwiLFwiXCJdLFtcImh3VGltZXN0YW1wXCIsMF0sW1wiaXNQcmltYXJ5XCIsITFdLFtcInR5cGVcIixcIlwiXSxbXCJ0YXJnZXRcIixudWxsXSxbXCJjdXJyZW50VGFyZ2V0XCIsbnVsbF0sW1wid2hpY2hcIiwwXV07ZnVuY3Rpb24gWWQoYSxiKXtLYy5jYWxsKHRoaXMpO3RoaXMuYz1hO3RoaXMuZj0wO3RoaXMudj0hMTt0aGlzLmI9W107dGhpcy5CPWI/YipqZDpqZDt0aGlzLmo9bnVsbDthPXRoaXMuYy5hO3RoaXMuQz0wO3RoaXMuSD17fTt0aGlzLmc9bmV3IFRkKGEpO3RoaXMuYT1udWxsO3RoaXMuaT16KHRoaXMuZyxcInBvaW50ZXJkb3duXCIsdGhpcy5UZyx0aGlzKTt0aGlzLm89eih0aGlzLmcsXCJwb2ludGVybW92ZVwiLHRoaXMuWGksdGhpcyl9dihZZCxLYyk7ZnVuY3Rpb24gWmQoYSxiKXt2YXIgYz1uZXcgcWQoXCJjbGlja1wiLGEuYyxiKTthLmwoYyk7MCE9PWEuZj8oY2xlYXJUaW1lb3V0KGEuZiksYS5mPTAsYz1uZXcgcWQoXCJkYmxjbGlja1wiLGEuYyxiKSxhLmwoYykpOmEuZj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5mPTA7dmFyIGE9bmV3IHFkKFwic2luZ2xlY2xpY2tcIix0aGlzLmMsYik7dGhpcy5sKGEpfS5iaW5kKGEpLDI1MCl9XG5mdW5jdGlvbiAkZChhLGIpe1wicG9pbnRlcnVwXCI9PWIudHlwZXx8XCJwb2ludGVyY2FuY2VsXCI9PWIudHlwZT9kZWxldGUgYS5IW2IucG9pbnRlcklkXTpcInBvaW50ZXJkb3duXCI9PWIudHlwZSYmKGEuSFtiLnBvaW50ZXJJZF09ITApO2EuQz1PYmplY3Qua2V5cyhhLkgpLmxlbmd0aH1sPVlkLnByb3RvdHlwZTtsLmplPWZ1bmN0aW9uKGEpeyRkKHRoaXMsYSk7dmFyIGI9bmV3IHFkKFwicG9pbnRlcnVwXCIsdGhpcy5jLGEpO3RoaXMubChiKTshdGhpcy52JiYwPT09YS5idXR0b24mJlpkKHRoaXMsdGhpcy5qKTswPT09dGhpcy5DJiYodGhpcy5iLmZvckVhY2godmMpLHRoaXMuYi5sZW5ndGg9MCx0aGlzLnY9ITEsdGhpcy5qPW51bGwsQ2ModGhpcy5hKSx0aGlzLmE9bnVsbCl9O1xubC5UZz1mdW5jdGlvbihhKXskZCh0aGlzLGEpO3ZhciBiPW5ldyBxZChcInBvaW50ZXJkb3duXCIsdGhpcy5jLGEpO3RoaXMubChiKTt0aGlzLmo9YTswPT09dGhpcy5iLmxlbmd0aCYmKHRoaXMuYT1uZXcgVGQoZG9jdW1lbnQpLHRoaXMuYi5wdXNoKHoodGhpcy5hLFwicG9pbnRlcm1vdmVcIix0aGlzLkhoLHRoaXMpLHoodGhpcy5hLFwicG9pbnRlcnVwXCIsdGhpcy5qZSx0aGlzKSx6KHRoaXMuZyxcInBvaW50ZXJjYW5jZWxcIix0aGlzLmplLHRoaXMpKSl9O2wuSGg9ZnVuY3Rpb24oYSl7aWYoYWUodGhpcyxhKSl7dGhpcy52PSEwO3ZhciBiPW5ldyBxZChcInBvaW50ZXJkcmFnXCIsdGhpcy5jLGEsdGhpcy52KTt0aGlzLmwoYil9YS5wcmV2ZW50RGVmYXVsdCgpfTtsLlhpPWZ1bmN0aW9uKGEpe3RoaXMubChuZXcgcWQoYS50eXBlLHRoaXMuYyxhLCEoIXRoaXMuanx8IWFlKHRoaXMsYSkpKSl9O1xuZnVuY3Rpb24gYWUoYSxiKXtyZXR1cm4gTWF0aC5hYnMoYi5jbGllbnRYLWEuai5jbGllbnRYKT5hLkJ8fE1hdGguYWJzKGIuY2xpZW50WS1hLmouY2xpZW50WSk+YS5CfWwuY2E9ZnVuY3Rpb24oKXt0aGlzLm8mJih2Yyh0aGlzLm8pLHRoaXMubz1udWxsKTt0aGlzLmkmJih2Yyh0aGlzLmkpLHRoaXMuaT1udWxsKTt0aGlzLmIuZm9yRWFjaCh2Yyk7dGhpcy5iLmxlbmd0aD0wO3RoaXMuYSYmKENjKHRoaXMuYSksdGhpcy5hPW51bGwpO3RoaXMuZyYmKENjKHRoaXMuZyksdGhpcy5nPW51bGwpO0tjLnByb3RvdHlwZS5jYS5jYWxsKHRoaXMpfTtmdW5jdGlvbiBiZShhLGIpe3RoaXMuaT1hO3RoaXMuaj1iO3RoaXMuYT1bXTt0aGlzLmM9W107dGhpcy5sPXt9fWJlLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3RoaXMuYS5sZW5ndGg9MDt0aGlzLmMubGVuZ3RoPTA7YmIodGhpcy5sKX07YmUucHJvdG90eXBlLmY9ZnVuY3Rpb24oYSl7eCghKHRoaXMuaihhKWluIHRoaXMubCksMzEpO3ZhciBiPXRoaXMuaShhKTtyZXR1cm4gSW5maW5pdHkhPWI/KHRoaXMuYS5wdXNoKGEpLHRoaXMuYy5wdXNoKGIpLHRoaXMubFt0aGlzLmooYSldPSEwLGNlKHRoaXMsMCx0aGlzLmEubGVuZ3RoLTEpLCEwKTohMX07ZnVuY3Rpb24gZGUoYSxiKXtmb3IodmFyIGM9YS5hLGQ9YS5jLGU9Yy5sZW5ndGgsZj1jW2JdLGc9ZFtiXSxoPWI7YjxlPj4xOyl7dmFyIGs9MipiKzEsbT0yKmIrMjtrPW08ZSYmZFttXTxkW2tdP206aztjW2JdPWNba107ZFtiXT1kW2tdO2I9a31jW2JdPWY7ZFtiXT1nO2NlKGEsaCxiKX1cbmZ1bmN0aW9uIGNlKGEsYixjKXt2YXIgZD1hLmE7YT1hLmM7Zm9yKHZhciBlPWRbY10sZj1hW2NdO2M+Yjspe3ZhciBnPWMtMT4+MTtpZihhW2ddPmYpZFtjXT1kW2ddLGFbY109YVtnXSxjPWc7ZWxzZSBicmVha31kW2NdPWU7YVtjXT1mfTtmdW5jdGlvbiBlZShhLGIpe2JlLmNhbGwodGhpcyxmdW5jdGlvbihiKXtyZXR1cm4gYS5hcHBseShudWxsLGIpfSxmdW5jdGlvbihhKXtyZXR1cm4gYVswXS5TYSgpfSk7dGhpcy5vPWI7dGhpcy5nPTA7dGhpcy5iPXt9fXYoZWUsYmUpO2VlLnByb3RvdHlwZS5mPWZ1bmN0aW9uKGEpe3ZhciBiPWJlLnByb3RvdHlwZS5mLmNhbGwodGhpcyxhKTtiJiZ6KGFbMF0sXCJjaGFuZ2VcIix0aGlzLnYsdGhpcyk7cmV0dXJuIGJ9O2VlLnByb3RvdHlwZS52PWZ1bmN0aW9uKGEpe2E9YS50YXJnZXQ7dmFyIGI9YS5zdGF0ZTtpZigyPT09Ynx8Mz09PWJ8fDQ9PT1ifHw1PT09YilBYyhhLFwiY2hhbmdlXCIsdGhpcy52LHRoaXMpLGE9YS5TYSgpLGEgaW4gdGhpcy5iJiYoZGVsZXRlIHRoaXMuYlthXSwtLXRoaXMuZyksdGhpcy5vKCl9O2Z1bmN0aW9uIGZlKGEpe3JldHVybiBmdW5jdGlvbihiKXtpZihiKXJldHVybltyYShiWzBdLGFbMF0sYVsyXSkscmEoYlsxXSxhWzFdLGFbM10pXX19ZnVuY3Rpb24gZ2UoYSl7cmV0dXJuIGF9O2Z1bmN0aW9uIGhlKGEpe3JldHVybiBmdW5jdGlvbihiLGMsZCl7aWYodm9pZCAwIT09YilyZXR1cm4gYj1TYihhLGIsZCksYj1yYShiK2MsMCxhLmxlbmd0aC0xKSxjPU1hdGguZmxvb3IoYiksYiE9YyYmYzxhLmxlbmd0aC0xP2FbY10vTWF0aC5wb3coYVtjXS9hW2MrMV0sYi1jKTphW2NdfX1mdW5jdGlvbiBpZShhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGQsZSxmKXtpZih2b2lkIDAhPT1kKXJldHVybiBkPU1hdGgubWF4KE1hdGguZmxvb3IoTWF0aC5sb2coYi9kKS9NYXRoLmxvZyhhKSsoLWYvMisuNSkpK2UsMCksdm9pZCAwIT09YyYmKGQ9TWF0aC5taW4oZCxjKSksYi9NYXRoLnBvdyhhLGQpfX07ZnVuY3Rpb24gamUoYSl7aWYodm9pZCAwIT09YSlyZXR1cm4gMH1mdW5jdGlvbiBrZShhLGIpe2lmKHZvaWQgMCE9PWEpcmV0dXJuIGErYn1mdW5jdGlvbiBsZShhKXt2YXIgYj0yKk1hdGguUEkvYTtyZXR1cm4gZnVuY3Rpb24oYSxkKXtpZih2b2lkIDAhPT1hKXJldHVybiBhPU1hdGguZmxvb3IoKGErZCkvYisuNSkqYn19ZnVuY3Rpb24gbWUoKXt2YXIgYT11YSg1KTtyZXR1cm4gZnVuY3Rpb24oYixjKXtpZih2b2lkIDAhPT1iKXJldHVybiBNYXRoLmFicyhiK2MpPD1hPzA6YitjfX07ZnVuY3Rpb24gbmUoYSl7YT1cIlwiK2E7dmFyIGI9YS5pbmRleE9mKFwiLlwiKTtiPS0xPT09Yj9hLmxlbmd0aDpiO3JldHVybiAyPGI/YTpBcnJheSgzLWIpLmpvaW4oXCIwXCIpK2F9O2Z1bmN0aW9uIG9lKGEsYil7YVswXSs9YlswXTthWzFdKz1iWzFdfWZ1bmN0aW9uIHBlKGEsYil7dmFyIGM9Yi5KYigpLGQ9Yi5qYSgpO2I9ZFswXTtkPWRbMV07dmFyIGU9YVswXS1iO2E9YVsxXS1kOzA9PT1lJiYwPT09YSYmKGU9MSk7dmFyIGY9TWF0aC5zcXJ0KGUqZSthKmEpO3JldHVybltiK2MqZS9mLGQrYyphL2ZdfWZ1bmN0aW9uIHFlKGEsYil7dmFyIGM9YVswXTthPWFbMV07dmFyIGQ9YlswXSxlPWJbMV07Yj1kWzBdO2Q9ZFsxXTt2YXIgZj1lWzBdO2U9ZVsxXTt2YXIgZz1mLWIsaD1lLWQ7Yz0wPT09ZyYmMD09PWg/MDooZyooYy1iKStoKihhLWQpKS8oZypnK2gqaHx8MCk7MD49Yz8oYT1iLGM9ZCk6MTw9Yz8oYT1mLGM9ZSk6KGE9YitjKmcsYz1kK2MqaCk7cmV0dXJuW2EsY119ZnVuY3Rpb24gcmUoYSxiKXtmb3IodmFyIGM9ITAsZD1hLmxlbmd0aC0xOzA8PWQ7LS1kKWlmKGFbZF0hPWJbZF0pe2M9ITE7YnJlYWt9cmV0dXJuIGN9XG5mdW5jdGlvbiBzZShhLGIpe3ZhciBjPU1hdGguY29zKGIpO2I9TWF0aC5zaW4oYik7dmFyIGQ9YVsxXSpjK2FbMF0qYjthWzBdPWFbMF0qYy1hWzFdKmI7YVsxXT1kfWZ1bmN0aW9uIHRlKGEsYil7YVswXSo9YjthWzFdKj1ifWZ1bmN0aW9uIHVlKGEsYil7dmFyIGM9YVswXS1iWzBdO2E9YVsxXS1iWzFdO3JldHVybiBjKmMrYSphfWZ1bmN0aW9uIHZlKGEsYil7cmV0dXJuIE1hdGguc3FydCh1ZShhLGIpKX1mdW5jdGlvbiB3ZShhLGIpe3JldHVybiB1ZShhLHFlKGEsYikpfTtmdW5jdGlvbiB4ZShhKXtyZXR1cm4gMS1NYXRoLnBvdygxLWEsMyl9ZnVuY3Rpb24gRWUoYSl7cmV0dXJuIDMqYSphLTIqYSphKmF9ZnVuY3Rpb24gRmUoYSl7cmV0dXJuIGF9O2Z1bmN0aW9uIEdlKCl7cmV0dXJuITB9ZnVuY3Rpb24gSGUoKXtyZXR1cm4hMX07ZnVuY3Rpb24gSWUoYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz1mP2Y6W10saD0wO2I8YztiKz1kKXt2YXIgaz1hW2JdLG09YVtiKzFdO2dbaCsrXT1lWzBdKmsrZVsyXSptK2VbNF07Z1toKytdPWVbMV0qaytlWzNdKm0rZVs1XX1mJiZnLmxlbmd0aCE9aCYmKGcubGVuZ3RoPWgpO3JldHVybiBnfTt2YXIgSmU9QXJyYXkoNik7ZnVuY3Rpb24gS2UoKXtyZXR1cm5bMSwwLDAsMSwwLDBdfWZ1bmN0aW9uIExlKGEsYil7dmFyIGM9YVswXSxkPWFbMV0sZT1hWzJdLGY9YVszXSxnPWFbNF0saD1hWzVdLGs9YlswXSxtPWJbMV0sbj1iWzJdLHA9YlszXSxxPWJbNF07Yj1iWzVdO2FbMF09YyprK2UqbTthWzFdPWQqaytmKm07YVsyXT1jKm4rZSpwO2FbM109ZCpuK2YqcDthWzRdPWMqcStlKmIrZzthWzVdPWQqcStmKmIraH1mdW5jdGlvbiBNZShhLGIsYyxkLGUpe2FbMF09YjthWzFdPTA7YVsyXT0wO2FbM109YzthWzRdPWQ7YVs1XT1lO3JldHVybiBhfWZ1bmN0aW9uIE5lKGEsYil7YVswXT1iWzBdO2FbMV09YlsxXTthWzJdPWJbMl07YVszXT1iWzNdO2FbNF09Yls0XTthWzVdPWJbNV07cmV0dXJuIGF9ZnVuY3Rpb24gT2UoYSxiKXt2YXIgYz1iWzBdLGQ9YlsxXTtiWzBdPWFbMF0qYythWzJdKmQrYVs0XTtiWzFdPWFbMV0qYythWzNdKmQrYVs1XTtyZXR1cm4gYn1cbmZ1bmN0aW9uIFBlKGEsYixjLGQsZSxmLGcsaCl7dmFyIGs9TWF0aC5zaW4oZik7Zj1NYXRoLmNvcyhmKTthWzBdPWQqZjthWzFdPWUqazthWzJdPS1kKms7YVszXT1lKmY7YVs0XT1nKmQqZi1oKmQqaytiO2FbNV09ZyplKmsraCplKmYrYztyZXR1cm4gYX07ZnVuY3Rpb24gUWUoKXtOYy5jYWxsKHRoaXMpO3RoaXMuQz1CYSgpO3RoaXMuQj0tMTt0aGlzLmc9e307dGhpcy5vPXRoaXMuZj0wO3RoaXMuWD1LZSgpfXYoUWUsTmMpO1FlLnByb3RvdHlwZS5JPWZ1bmN0aW9uKGEpe3RoaXMuQiE9dGhpcy5qJiYodGhpcy5DPXRoaXMuWWIodGhpcy5DKSx0aGlzLkI9dGhpcy5qKTt2YXIgYj10aGlzLkM7YT8oYVswXT1iWzBdLGFbMV09YlsxXSxhWzJdPWJbMl0sYVszXT1iWzNdKTphPWI7cmV0dXJuIGF9O1FlLnByb3RvdHlwZS54Yj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuWDthPUZiKGEpO3ZhciBkPVwidGlsZS1waXhlbHNcIj09YS5jP2Z1bmN0aW9uKGQsZixnKXt2YXIgZT1hLkkoKSxrPWEuQmQ7ZT1UYShrKS9UYShlKTtQZShjLGtbMF0sa1szXSxlLC1lLDAsMCwwKTtJZShkLDAsZC5sZW5ndGgsZyxjLGYpO3JldHVybiBOYihhLGIpKGQsZixnKX06TmIoYSxiKTt0aGlzLkNiKGQpO3JldHVybiB0aGlzfTtmdW5jdGlvbiBSZSgpe1FlLmNhbGwodGhpcyk7dGhpcy5WPVwiWFlcIjt0aGlzLmE9Mjt0aGlzLnM9bnVsbH12KFJlLFFlKTtmdW5jdGlvbiBTZShhKXt2YXIgYjtcIlhZXCI9PWE/Yj0yOlwiWFlaXCI9PWF8fFwiWFlNXCI9PWE/Yj0zOlwiWFlaTVwiPT1hJiYoYj00KTtyZXR1cm4gYn1sPVJlLnByb3RvdHlwZTtsLlliPWZ1bmN0aW9uKGEpe3JldHVybiBOYSh0aGlzLnMsMCx0aGlzLnMubGVuZ3RoLHRoaXMuYSxhKX07bC5GYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnMuc2xpY2UoMCx0aGlzLmEpfTtsLmFhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc307bC5EZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnMuc2xpY2UodGhpcy5zLmxlbmd0aC10aGlzLmEpfTtcbmwuYmM9ZnVuY3Rpb24oYSl7dGhpcy5vIT10aGlzLmomJihiYih0aGlzLmcpLHRoaXMuZj0wLHRoaXMubz10aGlzLmopO2lmKDA+YXx8MCE9PXRoaXMuZiYmYTw9dGhpcy5mKXJldHVybiB0aGlzO3ZhciBiPWEudG9TdHJpbmcoKTtpZih0aGlzLmcuaGFzT3duUHJvcGVydHkoYikpcmV0dXJuIHRoaXMuZ1tiXTt2YXIgYz10aGlzLnViKGEpO2lmKGMuYWEoKS5sZW5ndGg8dGhpcy5zLmxlbmd0aClyZXR1cm4gdGhpcy5nW2JdPWM7dGhpcy5mPWE7cmV0dXJuIHRoaXN9O2wudWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307bC5nYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2Z1bmN0aW9uIFRlKGEsYixjKXthLmE9U2UoYik7YS5WPWI7YS5zPWN9XG5mdW5jdGlvbiBVZShhLGIsYyxkKXtpZihiKWM9U2UoYik7ZWxzZXtmb3IoYj0wO2I8ZDsrK2Ipe2lmKDA9PT1jLmxlbmd0aCl7YS5WPVwiWFlcIjthLmE9MjtyZXR1cm59Yz1jWzBdfWM9Yy5sZW5ndGg7dmFyIGU7Mj09Yz9lPVwiWFlcIjozPT1jP2U9XCJYWVpcIjo0PT1jJiYoZT1cIlhZWk1cIik7Yj1lfWEuVj1iO2EuYT1jfWwuQ2I9ZnVuY3Rpb24oYSl7dGhpcy5zJiYoYSh0aGlzLnMsdGhpcy5zLHRoaXMuYSksdGhpcy5jKCkpfTtcbmwucm90YXRlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hYSgpO2lmKGMpe3ZhciBkPWMubGVuZ3RoLGU9dGhpcy5nYSgpLGY9Yz9jOltdLGc9TWF0aC5jb3MoYSk7YT1NYXRoLnNpbihhKTt2YXIgaD1iWzBdO2I9YlsxXTtmb3IodmFyIGs9MCxtPTA7bTxkO20rPWUpe3ZhciBuPWNbbV0taCxwPWNbbSsxXS1iO2ZbaysrXT1oK24qZy1wKmE7ZltrKytdPWIrbiphK3AqZztmb3Iobj1tKzI7bjxtK2U7KytuKWZbaysrXT1jW25dfWMmJmYubGVuZ3RoIT1rJiYoZi5sZW5ndGg9ayk7dGhpcy5jKCl9fTtcbmwuc2NhbGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWI7dm9pZCAwPT09ZCYmKGQ9YSk7dmFyIGU9YztlfHwoZT1SYSh0aGlzLkkoKSkpO2lmKGM9dGhpcy5hYSgpKXtiPWMubGVuZ3RoO3ZhciBmPXRoaXMuZ2EoKSxnPWM/YzpbXSxoPWVbMF07ZT1lWzFdO2Zvcih2YXIgaz0wLG09MDttPGI7bSs9Zil7dmFyIG49Y1ttXS1oLHA9Y1ttKzFdLWU7Z1trKytdPWgrYSpuO2dbaysrXT1lK2QqcDtmb3Iobj1tKzI7bjxtK2Y7KytuKWdbaysrXT1jW25dfWMmJmcubGVuZ3RoIT1rJiYoZy5sZW5ndGg9ayk7dGhpcy5jKCl9fTtmdW5jdGlvbiBWZShhLGIsYyxkKXt2YXIgZT0wLGY7dmFyIGc9MDtmb3IoZj1jLmxlbmd0aDtnPGY7KytnKXtmb3IodmFyIGg9Y1tnXSxrPTAsbT1hW2gtZF0sbj1hW2gtZCsxXTtiPGg7Yis9ZCl7dmFyIHA9YVtiXSxxPWFbYisxXTtrKz1uKnAtbSpxO209cDtuPXF9ZSs9ay8yO2I9aH1yZXR1cm4gZX07ZnVuY3Rpb24gV2UoYSxiLGMsZCxlLGYsZyl7dmFyIGg9YVtiXSxrPWFbYisxXSxtPWFbY10taCxuPWFbYysxXS1rO2lmKDAhPT1tfHwwIT09bilpZihmPSgoZS1oKSptKyhmLWspKm4pLyhtKm0rbipuKSwxPGYpYj1jO2Vsc2UgaWYoMDxmKXtmb3IoZT0wO2U8ZDsrK2UpZ1tlXT13YShhW2IrZV0sYVtjK2VdLGYpO2cubGVuZ3RoPWQ7cmV0dXJufWZvcihlPTA7ZTxkOysrZSlnW2VdPWFbYitlXTtnLmxlbmd0aD1kfWZ1bmN0aW9uIFhlKGEsYixjLGQsZSl7dmFyIGY9YVtiXSxnPWFbYisxXTtmb3IoYis9ZDtiPGM7Yis9ZCl7dmFyIGg9YVtiXSxrPWFbYisxXTtmPXRhKGYsZyxoLGspO2Y+ZSYmKGU9Zik7Zj1oO2c9a31yZXR1cm4gZX1mdW5jdGlvbiBZZShhLGIsYyxkLGUpe3ZhciBmO3ZhciBnPTA7Zm9yKGY9Yy5sZW5ndGg7ZzxmOysrZyl7dmFyIGg9Y1tnXTtlPVhlKGEsYixoLGQsZSk7Yj1ofXJldHVybiBlfVxuZnVuY3Rpb24gWmUoYSxiLGMsZCxlLGYsZyxoLGssbSxuKXtpZihiPT1jKXJldHVybiBtO2lmKDA9PT1lKXt2YXIgcD10YShnLGgsYVtiXSxhW2IrMV0pO2lmKHA8bSl7Zm9yKG49MDtuPGQ7KytuKWtbbl09YVtiK25dO2subGVuZ3RoPWQ7cmV0dXJuIHB9cmV0dXJuIG19Zm9yKHZhciBxPW4/bjpbTmFOLE5hTl0sdD1iK2Q7dDxjOylpZihXZShhLHQtZCx0LGQsZyxoLHEpLHA9dGEoZyxoLHFbMF0scVsxXSkscDxtKXttPXA7Zm9yKG49MDtuPGQ7KytuKWtbbl09cVtuXTtrLmxlbmd0aD1kO3QrPWR9ZWxzZSB0Kz1kKk1hdGgubWF4KChNYXRoLnNxcnQocCktTWF0aC5zcXJ0KG0pKS9lfDAsMSk7aWYoZiYmKFdlKGEsYy1kLGIsZCxnLGgscSkscD10YShnLGgscVswXSxxWzFdKSxwPG0pKXttPXA7Zm9yKG49MDtuPGQ7KytuKWtbbl09cVtuXTtrLmxlbmd0aD1kfXJldHVybiBtfVxuZnVuY3Rpb24gJGUoYSxiLGMsZCxlLGYsZyxoLGssbSxuKXtuPW4/bjpbTmFOLE5hTl07dmFyIHA7dmFyIHE9MDtmb3IocD1jLmxlbmd0aDtxPHA7KytxKXt2YXIgdD1jW3FdO209WmUoYSxiLHQsZCxlLGYsZyxoLGssbSxuKTtiPXR9cmV0dXJuIG19O2Z1bmN0aW9uIGFmKGEsYil7dmFyIGM9MCxkO3ZhciBlPTA7Zm9yKGQ9Yi5sZW5ndGg7ZTxkOysrZSlhW2MrK109YltlXTtyZXR1cm4gY31mdW5jdGlvbiBiZihhLGIsYyxkKXt2YXIgZTt2YXIgZj0wO2ZvcihlPWMubGVuZ3RoO2Y8ZTsrK2Ype3ZhciBnPWNbZl0saDtmb3IoaD0wO2g8ZDsrK2gpYVtiKytdPWdbaF19cmV0dXJuIGJ9ZnVuY3Rpb24gY2YoYSxiLGMsZCxlKXtlPWU/ZTpbXTt2YXIgZj0wLGc7dmFyIGg9MDtmb3IoZz1jLmxlbmd0aDtoPGc7KytoKWI9YmYoYSxiLGNbaF0sZCksZVtmKytdPWI7ZS5sZW5ndGg9ZjtyZXR1cm4gZX07ZnVuY3Rpb24gZGYoYSxiLGMsZCxlKXtlPXZvaWQgMCE9PWU/ZTpbXTtmb3IodmFyIGY9MDtiPGM7Yis9ZCllW2YrK109YS5zbGljZShiLGIrZCk7ZS5sZW5ndGg9ZjtyZXR1cm4gZX1mdW5jdGlvbiBlZihhLGIsYyxkLGUpe2U9dm9pZCAwIT09ZT9lOltdO3ZhciBmPTAsZzt2YXIgaD0wO2ZvcihnPWMubGVuZ3RoO2g8ZzsrK2gpe3ZhciBrPWNbaF07ZVtmKytdPWRmKGEsYixrLGQsZVtmXSk7Yj1rfWUubGVuZ3RoPWY7cmV0dXJuIGV9ZnVuY3Rpb24gZmYoYSxiLGMsZCxlKXtlPXZvaWQgMCE9PWU/ZTpbXTt2YXIgZj0wLGc7dmFyIGg9MDtmb3IoZz1jLmxlbmd0aDtoPGc7KytoKXt2YXIgaz1jW2hdO2VbZisrXT1lZihhLGIsayxkLGVbZl0pO2I9a1trLmxlbmd0aC0xXX1lLmxlbmd0aD1mO3JldHVybiBlfTtmdW5jdGlvbiBnZihhLGIsYyxkLGUsZixnKXt2YXIgaD0oYy1iKS9kO2lmKDM+aCl7Zm9yKDtiPGM7Yis9ZClmW2crK109YVtiXSxmW2crK109YVtiKzFdO3JldHVybiBnfXZhciBrPUFycmF5KGgpO2tbMF09MTtrW2gtMV09MTtjPVtiLGMtZF07Zm9yKHZhciBtPTAsbjswPGMubGVuZ3RoOyl7dmFyIHA9Yy5wb3AoKSxxPWMucG9wKCksdD0wLHU9YVtxXSx5PWFbcSsxXSxDPWFbcF0sRD1hW3ArMV07Zm9yKG49cStkO248cDtuKz1kKXt2YXIgST1hW25dO3ZhciBHPWFbbisxXSxSPXUsTD15LEo9Qy1SLFY9RC1MO2lmKDAhPT1KfHwwIT09Vil7dmFyIEs9KChJLVIpKkorKEctTCkqVikvKEoqSitWKlYpOzE8Sz8oUj1DLEw9RCk6MDxLJiYoUis9SipLLEwrPVYqSyl9ST10YShJLEcsUixMKTtJPnQmJihtPW4sdD1JKX10PmUmJihrWyhtLWIpL2RdPTEscStkPG0mJmMucHVzaChxLG0pLG0rZDxwJiZjLnB1c2gobSxwKSl9Zm9yKG49MDtuPGg7KytuKWtbbl0mJihmW2crK109YVtiK24qZF0sXG5mW2crK109YVtiK24qZCsxXSk7cmV0dXJuIGd9XG5mdW5jdGlvbiBoZihhLGIsYyxkLGUsZixnLGgpe3ZhciBrO3ZhciBtPTA7Zm9yKGs9Yy5sZW5ndGg7bTxrOysrbSl7dmFyIG49Y1ttXTthOnt2YXIgcD1hLHE9bix0PWQsdT1lLHk9ZixDPWc7aWYoYiE9cSl7dmFyIEQ9dSpNYXRoLnJvdW5kKHBbYl0vdSksST11Kk1hdGgucm91bmQocFtiKzFdL3UpO2IrPXQ7eVtDKytdPUQ7eVtDKytdPUk7ZG97dmFyIEc9dSpNYXRoLnJvdW5kKHBbYl0vdSk7Zz11Kk1hdGgucm91bmQocFtiKzFdL3UpO2IrPXQ7aWYoYj09cSl7eVtDKytdPUc7eVtDKytdPWc7Zz1DO2JyZWFrIGF9fXdoaWxlKEc9PUQmJmc9PUkpO2Zvcig7YjxxOyl7dmFyIFI9dSpNYXRoLnJvdW5kKHBbYl0vdSk7dmFyIEw9dSpNYXRoLnJvdW5kKHBbYisxXS91KTtiKz10O2lmKFIhPUd8fEwhPWcpe3ZhciBKPUctRCxWPWctSSxLPVItRCxQPUwtSTtKKlA9PVYqSyYmKDA+SiYmSzxKfHxKPT1LfHwwPEomJks+SikmJigwPlYmJlA8Vnx8Vj09UHx8MDxWJiZQPlYpfHwoeVtDKytdPUcsXG55W0MrK109ZyxEPUcsST1nKTtHPVI7Zz1MfX15W0MrK109Rzt5W0MrK109Z31nPUN9aC5wdXNoKGcpO2I9bn1yZXR1cm4gZ307ZnVuY3Rpb24gamYoYSxiKXtSZS5jYWxsKHRoaXMpO3RoaXMuYj10aGlzLmk9LTE7dGhpcy5ZKGEsYil9dihqZixSZSk7bD1qZi5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBqZihudWxsKTtrZihhLHRoaXMuVix0aGlzLnMuc2xpY2UoKSk7cmV0dXJuIGF9O2wuUGE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoZDxHYSh0aGlzLkkoKSxhLGIpKXJldHVybiBkO3RoaXMuYiE9dGhpcy5qJiYodGhpcy5pPU1hdGguc3FydChYZSh0aGlzLnMsMCx0aGlzLnMubGVuZ3RoLHRoaXMuYSwwKSksdGhpcy5iPXRoaXMuaik7cmV0dXJuIFplKHRoaXMucywwLHRoaXMucy5sZW5ndGgsdGhpcy5hLHRoaXMuaSwhMCxhLGIsYyxkKX07bC5HPWZ1bmN0aW9uKCl7cmV0dXJuIGRmKHRoaXMucywwLHRoaXMucy5sZW5ndGgsdGhpcy5hKX07XG5sLnViPWZ1bmN0aW9uKGEpe3ZhciBiPVtdO2IubGVuZ3RoPWdmKHRoaXMucywwLHRoaXMucy5sZW5ndGgsdGhpcy5hLGEsYiwwKTthPW5ldyBqZihudWxsKTtrZihhLFwiWFlcIixiKTtyZXR1cm4gYX07bC5EPWZ1bmN0aW9uKCl7cmV0dXJuXCJMaW5lYXJSaW5nXCJ9O2wuWT1mdW5jdGlvbihhLGIpe2E/KFVlKHRoaXMsYixhLDEpLHRoaXMuc3x8KHRoaXMucz1bXSksdGhpcy5zLmxlbmd0aD1iZih0aGlzLnMsMCxhLHRoaXMuYSksdGhpcy5jKCkpOmtmKHRoaXMsXCJYWVwiLG51bGwpfTtmdW5jdGlvbiBrZihhLGIsYyl7VGUoYSxiLGMpO2EuYygpfTtmdW5jdGlvbiBsZihhLGIpe1JlLmNhbGwodGhpcyk7dGhpcy5ZKGEsYil9dihsZixSZSk7bD1sZi5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBsZihudWxsKTthLk4odGhpcy5WLHRoaXMucy5zbGljZSgpKTtyZXR1cm4gYX07bC5QYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLnM7YT10YShhLGIsZVswXSxlWzFdKTtpZihhPGQpe2Q9dGhpcy5hO2ZvcihiPTA7YjxkOysrYiljW2JdPWVbYl07Yy5sZW5ndGg9ZDtyZXR1cm4gYX1yZXR1cm4gZH07bC5HPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucz90aGlzLnMuc2xpY2UoKTpbXX07bC5ZYj1mdW5jdGlvbihhKXtyZXR1cm4gTGEodGhpcy5zLGEpfTtsLkQ9ZnVuY3Rpb24oKXtyZXR1cm5cIlBvaW50XCJ9O2wuWT1mdW5jdGlvbihhLGIpe2E/KFVlKHRoaXMsYixhLDApLHRoaXMuc3x8KHRoaXMucz1bXSksdGhpcy5zLmxlbmd0aD1hZih0aGlzLnMsYSksdGhpcy5jKCkpOnRoaXMuTihcIlhZXCIsbnVsbCl9O1xubC5OPWZ1bmN0aW9uKGEsYil7VGUodGhpcyxhLGIpO3RoaXMuYygpfTtmdW5jdGlvbiBtZihhLGIsYyxkLGUsZil7Zm9yKHZhciBnPTAsaD1hW2MtZF0saz1hW2MtZCsxXTtiPGM7Yis9ZCl7dmFyIG09YVtiXSxuPWFbYisxXTtrPD1mP24+ZiYmMDwobS1oKSooZi1rKS0oZS1oKSoobi1rKSYmZysrOm48PWYmJjA+KG0taCkqKGYtayktKGUtaCkqKG4taykmJmctLTtoPW07az1ufXJldHVybiAwIT09Z307ZnVuY3Rpb24gbmYoYSxiLGMsZCxlLGYsZyl7dmFyIGgsaz1lW2YrMV0sbT1bXSxuPWNbMF07dmFyIHA9YVtuLWRdO3ZhciBxPWFbbi1kKzFdO2ZvcihoPWI7aDxuO2grPWQpe3ZhciB0PWFbaF07dmFyIHU9YVtoKzFdO2lmKGs8PXEmJnU8PWt8fHE8PWsmJms8PXUpcD0oay1xKS8odS1xKSoodC1wKStwLG0ucHVzaChwKTtwPXQ7cT11fW49TmFOO3E9LUluZmluaXR5O20uc29ydChSYik7cD1tWzBdO2g9MTtmb3IodT1tLmxlbmd0aDtoPHU7KytoKXt0PW1baF07dmFyIHk9TWF0aC5hYnModC1wKTtpZih5PnEpe3A9KHArdCkvMjt2YXIgQzthOmlmKDAhPT1jLmxlbmd0aCYmbWYoYSxiLGNbMF0sZCxwLGspKXt2YXIgRD0xO2ZvcihDPWMubGVuZ3RoO0Q8QzsrK0QpaWYobWYoYSxjW0QtMV0sY1tEXSxkLHAsaykpe0M9ITE7YnJlYWsgYX1DPSEwfWVsc2UgQz0hMTtDJiYobj1wLHE9eSl9cD10fWlzTmFOKG4pJiYobj1lW2ZdKTtyZXR1cm4gZz8oZy5wdXNoKG4sayxxKSxnKTpbbixrLHFdfVxuO2Z1bmN0aW9uIG9mKGEsYixjLGQpe2Zvcih2YXIgZT0wLGY9YVtjLWRdLGc9YVtjLWQrMV07YjxjO2IrPWQpe3ZhciBoPWFbYl0saz1hW2IrMV07ZSs9KGgtZikqKGsrZyk7Zj1oO2c9a31yZXR1cm4gMDxlfWZ1bmN0aW9uIHBmKGEsYixjLGQpe3ZhciBlPTA7ZD12b2lkIDAhPT1kP2Q6ITE7dmFyIGY7dmFyIGc9MDtmb3IoZj1iLmxlbmd0aDtnPGY7KytnKXt2YXIgaD1iW2ddO2U9b2YoYSxlLGgsYyk7aWYoMD09PWcpe2lmKGQmJmV8fCFkJiYhZSlyZXR1cm4hMX1lbHNlIGlmKGQmJiFlfHwhZCYmZSlyZXR1cm4hMTtlPWh9cmV0dXJuITB9XG5mdW5jdGlvbiBxZihhLGIsYyxkLGUpe2U9dm9pZCAwIT09ZT9lOiExO3ZhciBmO3ZhciBnPTA7Zm9yKGY9Yy5sZW5ndGg7ZzxmOysrZyl7dmFyIGg9Y1tnXSxrPW9mKGEsYixoLGQpO2lmKDA9PT1nP2UmJmt8fCFlJiYhazplJiYha3x8IWUmJmspe2s9YTtmb3IodmFyIG09aCxuPWQ7YjxtLW47KXt2YXIgcDtmb3IocD0wO3A8bjsrK3Ape3ZhciBxPWtbYitwXTtrW2IrcF09a1ttLW4rcF07a1ttLW4rcF09cX1iKz1uO20tPW59fWI9aH1yZXR1cm4gYn1mdW5jdGlvbiByZihhLGIsYyxkKXt2YXIgZT0wLGY7dmFyIGc9MDtmb3IoZj1iLmxlbmd0aDtnPGY7KytnKWU9cWYoYSxlLGJbZ10sYyxkKTtyZXR1cm4gZX07ZnVuY3Rpb24gQShhLGIpe1JlLmNhbGwodGhpcyk7dGhpcy5iPVtdO3RoaXMudT0tMTt0aGlzLkE9bnVsbDt0aGlzLk09dGhpcy5KPXRoaXMuSz0tMTt0aGlzLmk9bnVsbDt0aGlzLlkoYSxiKX12KEEsUmUpO2w9QS5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBBKG51bGwpO2EuTih0aGlzLlYsdGhpcy5zLnNsaWNlKCksdGhpcy5iLnNsaWNlKCkpO3JldHVybiBhfTtsLlBhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8R2EodGhpcy5JKCksYSxiKSlyZXR1cm4gZDt0aGlzLkohPXRoaXMuaiYmKHRoaXMuSz1NYXRoLnNxcnQoWWUodGhpcy5zLDAsdGhpcy5iLHRoaXMuYSwwKSksdGhpcy5KPXRoaXMuaik7cmV0dXJuICRlKHRoaXMucywwLHRoaXMuYix0aGlzLmEsdGhpcy5LLCEwLGEsYixjLGQpfTtsLlhoPWZ1bmN0aW9uKCl7cmV0dXJuIFZlKHRoaXMuWGEoKSwwLHRoaXMuYix0aGlzLmEpfTtcbmwuRz1mdW5jdGlvbihhKXtpZih2b2lkIDAhPT1hKXt2YXIgYj10aGlzLlhhKCkuc2xpY2UoKTtxZihiLDAsdGhpcy5iLHRoaXMuYSxhKX1lbHNlIGI9dGhpcy5zO3JldHVybiBlZihiLDAsdGhpcy5iLHRoaXMuYSl9O2wuTWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ifTtsLmFjPWZ1bmN0aW9uKCl7aWYodGhpcy51IT10aGlzLmope3ZhciBhPVJhKHRoaXMuSSgpKTt0aGlzLkE9bmYodGhpcy5YYSgpLDAsdGhpcy5iLHRoaXMuYSxhLDApO3RoaXMudT10aGlzLmp9cmV0dXJuIHRoaXMuQX07bC5CZz1mdW5jdGlvbigpe3JldHVybiBuZXcgbGYodGhpcy5hYygpLFwiWFlNXCIpfTtsLmVlPWZ1bmN0aW9uKGEpe2lmKDA+YXx8dGhpcy5iLmxlbmd0aDw9YSlyZXR1cm4gbnVsbDt2YXIgYj1uZXcgamYobnVsbCk7a2YoYix0aGlzLlYsdGhpcy5zLnNsaWNlKDA9PT1hPzA6dGhpcy5iW2EtMV0sdGhpcy5iW2FdKSk7cmV0dXJuIGJ9O1xuZnVuY3Rpb24gc2YoYSl7dmFyIGI9YS5WLGM9YS5zO2E9YS5iO3ZhciBkPVtdLGU9MCxmO3ZhciBnPTA7Zm9yKGY9YS5sZW5ndGg7ZzxmOysrZyl7dmFyIGg9YVtnXSxrPW5ldyBqZihudWxsKTtrZihrLGIsYy5zbGljZShlLGgpKTtkLnB1c2goayk7ZT1ofXJldHVybiBkfWwuWGE9ZnVuY3Rpb24oKXtpZih0aGlzLk0hPXRoaXMuail7dmFyIGE9dGhpcy5zO3BmKGEsdGhpcy5iLHRoaXMuYSk/dGhpcy5pPWE6KHRoaXMuaT1hLnNsaWNlKCksdGhpcy5pLmxlbmd0aD1xZih0aGlzLmksMCx0aGlzLmIsdGhpcy5hKSk7dGhpcy5NPXRoaXMuan1yZXR1cm4gdGhpcy5pfTtsLnViPWZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W107Yi5sZW5ndGg9aGYodGhpcy5zLDAsdGhpcy5iLHRoaXMuYSxNYXRoLnNxcnQoYSksYiwwLGMpO2E9bmV3IEEobnVsbCk7YS5OKFwiWFlcIixiLGMpO3JldHVybiBhfTtsLkQ9ZnVuY3Rpb24oKXtyZXR1cm5cIlBvbHlnb25cIn07XG5sLlk9ZnVuY3Rpb24oYSxiKXthPyhVZSh0aGlzLGIsYSwyKSx0aGlzLnN8fCh0aGlzLnM9W10pLGE9Y2YodGhpcy5zLDAsYSx0aGlzLmEsdGhpcy5iKSx0aGlzLnMubGVuZ3RoPTA9PT1hLmxlbmd0aD8wOmFbYS5sZW5ndGgtMV0sdGhpcy5jKCkpOnRoaXMuTihcIlhZXCIsbnVsbCx0aGlzLmIpfTtsLk49ZnVuY3Rpb24oYSxiLGMpe1RlKHRoaXMsYSxiKTt0aGlzLmI9Yzt0aGlzLmMoKX07ZnVuY3Rpb24gdGYoYSl7dmFyIGI9YVswXSxjPWFbMV0sZD1hWzJdO2E9YVszXTtiPVtiLGMsYixhLGQsYSxkLGMsYixjXTtjPW5ldyBBKG51bGwpO2MuTihcIlhZXCIsYixbYi5sZW5ndGhdKTtyZXR1cm4gY307ZnVuY3Rpb24gdWYoYSl7TmMuY2FsbCh0aGlzKTthPVphKHt9LGEpO3RoaXMuYT1bMCwwXTt0aGlzLmc9W107dGhpcy5CYz10aGlzLkJjLmJpbmQodGhpcyk7dGhpcy51PUtiKGEucHJvamVjdGlvbik7dmFyIGI9e307Yi5jZW50ZXI9dm9pZCAwIT09YS5jZW50ZXI/YS5jZW50ZXI6bnVsbDt2YXIgYz12b2lkIDAhPT1hLm1pblpvb20/YS5taW5ab29tOjA7dmFyIGQ9dm9pZCAwIT09YS5tYXhab29tP2EubWF4Wm9vbToyODt2YXIgZT12b2lkIDAhPT1hLnpvb21GYWN0b3I/YS56b29tRmFjdG9yOjI7aWYodm9pZCAwIT09YS5yZXNvbHV0aW9ucyl7ZD1hLnJlc29sdXRpb25zO3ZhciBmPWRbMF07dmFyIGc9ZFtkLmxlbmd0aC0xXTtkPWhlKGQpfWVsc2V7Zj1LYihhLnByb2plY3Rpb24pO2c9Zi5JKCk7dmFyIGg9KGc/TWF0aC5tYXgoWGEoZyksVGEoZykpOjM2MCpsYi5kZWdyZWVzL2YubCgpKS8yNTYvTWF0aC5wb3coMiwwKSxrPWgvTWF0aC5wb3coMiwyOCk7Zj1hLm1heFJlc29sdXRpb247XG52b2lkIDAhPT1mP2M9MDpmPWgvTWF0aC5wb3coZSxjKTtnPWEubWluUmVzb2x1dGlvbjt2b2lkIDA9PT1nJiYoZz12b2lkIDAhPT1hLm1heFpvb20/dm9pZCAwIT09YS5tYXhSZXNvbHV0aW9uP2YvTWF0aC5wb3coZSxkKTpoL01hdGgucG93KGUsZCk6ayk7ZD1jK01hdGguZmxvb3IoTWF0aC5sb2coZi9nKS9NYXRoLmxvZyhlKSk7Zz1mL01hdGgucG93KGUsZC1jKTtkPWllKGUsZixkLWMpfXRoaXMuZj1mO3RoaXMuQj1nO3RoaXMuQT1lO3RoaXMuaT1hLnJlc29sdXRpb25zO3RoaXMubz1jOyh2b2lkIDAhPT1hLmVuYWJsZVJvdGF0aW9uP2EuZW5hYmxlUm90YXRpb246MSk/KGM9YS5jb25zdHJhaW5Sb3RhdGlvbixjPXZvaWQgMD09PWN8fCEwPT09Yz9tZSgpOiExPT09Yz9rZTpcIm51bWJlclwiPT09dHlwZW9mIGM/bGUoYyk6a2UpOmM9amU7dGhpcy5iPXtjZW50ZXI6dm9pZCAwIT09YS5leHRlbnQ/ZmUoYS5leHRlbnQpOmdlLHJlc29sdXRpb246ZCxyb3RhdGlvbjpjfTt2b2lkIDAhPT1cbmEucmVzb2x1dGlvbj9iLnJlc29sdXRpb249YS5yZXNvbHV0aW9uOnZvaWQgMCE9PWEuem9vbSYmKGIucmVzb2x1dGlvbj10aGlzLmNvbnN0cmFpblJlc29sdXRpb24odGhpcy5mLGEuem9vbS10aGlzLm8pKTtiLnJvdGF0aW9uPXZvaWQgMCE9PWEucm90YXRpb24/YS5yb3RhdGlvbjowO3RoaXMubmEoYil9dih1ZixOYyk7bD11Zi5wcm90b3R5cGU7XG5sLmFuaW1hdGU9ZnVuY3Rpb24oYSl7dmFyIGI9YXJndW1lbnRzLmxlbmd0aDtpZigxPGImJlwiZnVuY3Rpb25cIj09PXR5cGVvZiBhcmd1bWVudHNbYi0xXSl7dmFyIGM9YXJndW1lbnRzW2ItMV07LS1ifWlmKHZmKHRoaXMpKXtmb3IodmFyIGQ9RGF0ZS5ub3coKSxlPXRoaXMuamEoKS5zbGljZSgpLGY9dGhpcy56YSgpLGc9d2YodGhpcyksaD1bXSxrPTA7azxiOysrayl7dmFyIG09YXJndW1lbnRzW2tdLG49e3N0YXJ0OmQsY29tcGxldGU6ITEsYW5jaG9yOm0uYW5jaG9yLGR1cmF0aW9uOnZvaWQgMCE9PW0uZHVyYXRpb24/bS5kdXJhdGlvbjoxRTMsZWFzaW5nOm0uZWFzaW5nfHxFZX07bS5jZW50ZXImJihuLlBiPWUsbi5SYj1tLmNlbnRlcixlPW4uUmIpO3ZvaWQgMCE9PW0uem9vbT8obi5RYj1mLG4ubmI9dGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKHRoaXMuZixtLnpvb20tdGhpcy5vLDApLGY9bi5uYik6bS5yZXNvbHV0aW9uJiYobi5RYj1mLG4ubmI9bS5yZXNvbHV0aW9uLGY9bi5uYik7XG52b2lkIDAhPT1tLnJvdGF0aW9uJiYobi55Yz1nLG4uU2I9ZysodmEobS5yb3RhdGlvbi1nK01hdGguUEksMipNYXRoLlBJKS1NYXRoLlBJKSxnPW4uU2IpO24uY2FsbGJhY2s9YztuLlBiJiZuLlJiJiYhcmUobi5QYixuLlJiKXx8bi5RYiE9PW4ubmJ8fG4ueWMhPT1uLlNiP2QrPW4uZHVyYXRpb246bi5jb21wbGV0ZT0hMDtoLnB1c2gobil9dGhpcy5nLnB1c2goaCk7eGYodGhpcywwLDEpO3RoaXMuQmMoKX1lbHNlIGI9YXJndW1lbnRzW2ItMV0sYi5jZW50ZXImJnRoaXMuT2EoYi5jZW50ZXIpLHZvaWQgMCE9PWIuem9vbSYmdGhpcy5xZihiLnpvb20pLHZvaWQgMCE9PWIucm90YXRpb24mJnlmKHRoaXMsYi5yb3RhdGlvbiksYyYmYyghMCl9O2Z1bmN0aW9uIHpmKGEpe3hmKGEsMCwtYS5hWzBdKTtmb3IodmFyIGI9MCxjPWEuZy5sZW5ndGg7YjxjOysrYil7dmFyIGQ9YS5nW2JdO2RbMF0uY2FsbGJhY2smJmRbMF0uY2FsbGJhY2soITEpfWEuZy5sZW5ndGg9MH1cbmwuQmM9ZnVuY3Rpb24oKXt2b2lkIDAhPT10aGlzLkMmJihjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLkMpLHRoaXMuQz12b2lkIDApO2lmKDA8dGhpcy5hWzBdKXtmb3IodmFyIGE9RGF0ZS5ub3coKSxiPSExLGM9dGhpcy5nLmxlbmd0aC0xOzA8PWM7LS1jKXtmb3IodmFyIGQ9dGhpcy5nW2NdLGU9ITAsZj0wLGc9ZC5sZW5ndGg7ZjxnOysrZil7dmFyIGg9ZFtmXTtpZighaC5jb21wbGV0ZSl7Yj1hLWguc3RhcnQ7Yj0wPGguZHVyYXRpb24/Yi9oLmR1cmF0aW9uOjE7MTw9Yj8oaC5jb21wbGV0ZT0hMCxiPTEpOmU9ITE7Yj1oLmVhc2luZyhiKTtpZihoLlBiKXt2YXIgaz1oLlBiWzBdLG09aC5QYlsxXTt0aGlzLnNldChcImNlbnRlclwiLFtrK2IqKGguUmJbMF0tayksbStiKihoLlJiWzFdLW0pXSl9aC5RYiYmaC5uYiYmKGs9MT09PWI/aC5uYjpoLlFiK2IqKGgubmItaC5RYiksaC5hbmNob3ImJnRoaXMuc2V0KFwiY2VudGVyXCIsQWYodGhpcyxrLGguYW5jaG9yKSksdGhpcy5zZXQoXCJyZXNvbHV0aW9uXCIsXG5rKSk7dm9pZCAwIT09aC55YyYmdm9pZCAwIT09aC5TYiYmKGI9MT09PWI/dmEoaC5TYitNYXRoLlBJLDIqTWF0aC5QSSktTWF0aC5QSTpoLnljK2IqKGguU2ItaC55YyksaC5hbmNob3ImJnRoaXMuc2V0KFwiY2VudGVyXCIsQmYodGhpcyxiLGguYW5jaG9yKSksdGhpcy5zZXQoXCJyb3RhdGlvblwiLGIpKTtiPSEwO2lmKCFoLmNvbXBsZXRlKWJyZWFrfX1lJiYodGhpcy5nW2NdPW51bGwseGYodGhpcywwLC0xKSwoZD1kWzBdLmNhbGxiYWNrKSYmZCghMCkpfXRoaXMuZz10aGlzLmcuZmlsdGVyKEJvb2xlYW4pO2ImJnZvaWQgMD09PXRoaXMuQyYmKHRoaXMuQz1yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5CYykpfX07ZnVuY3Rpb24gQmYoYSxiLGMpe3ZhciBkPWEuamEoKTtpZih2b2lkIDAhPT1kKXt2YXIgZT1bZFswXS1jWzBdLGRbMV0tY1sxXV07c2UoZSxiLXdmKGEpKTtvZShlLGMpfXJldHVybiBlfVxuZnVuY3Rpb24gQWYoYSxiLGMpe3ZhciBkLGU9YS5qYSgpO2E9YS56YSgpO3ZvaWQgMCE9PWUmJnZvaWQgMCE9PWEmJihkPVtjWzBdLWIqKGNbMF0tZVswXSkvYSxjWzFdLWIqKGNbMV0tZVsxXSkvYV0pO3JldHVybiBkfWZ1bmN0aW9uIENmKGEpe3ZhciBiPVsxMDAsMTAwXTthPScub2wtdmlld3BvcnRbZGF0YS12aWV3PVwiJyt3KGEpKydcIl0nO2lmKGE9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhKSlhPWdldENvbXB1dGVkU3R5bGUoYSksYlswXT1wYXJzZUludChhLndpZHRoLDEwKSxiWzFdPXBhcnNlSW50KGEuaGVpZ2h0LDEwKTtyZXR1cm4gYn1sLmNvbnN0cmFpblJlc29sdXRpb249ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLmIucmVzb2x1dGlvbihhLGJ8fDAsY3x8MCl9O2wuY29uc3RyYWluUm90YXRpb249ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5iLnJvdGF0aW9uKGEsYnx8MCl9O2wuamE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJjZW50ZXJcIil9O1xubC5TZD1mdW5jdGlvbihhKXthPWF8fENmKHRoaXMpO3ZhciBiPXRoaXMuamEoKTt4KGIsMSk7dmFyIGM9dGhpcy56YSgpO3godm9pZCAwIT09YywyKTt2YXIgZD13Zih0aGlzKTt4KHZvaWQgMCE9PWQsMyk7cmV0dXJuIFNhKGIsYyxkLGEpfTtsLktoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudX07bC56YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInJlc29sdXRpb25cIil9O2wuTGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pfTtmdW5jdGlvbiBJZihhLGIsYyl7YT1jfHxDZihhKTtyZXR1cm4gTWF0aC5tYXgoWGEoYikvYVswXSxUYShiKS9hWzFdKX1mdW5jdGlvbiB3ZihhKXtyZXR1cm4gYS5nZXQoXCJyb3RhdGlvblwiKX1mdW5jdGlvbiBKZihhKXt2YXIgYj1hLmphKCksYz1hLnUsZD1hLnphKCksZT13ZihhKTtyZXR1cm57Y2VudGVyOmIuc2xpY2UoKSxwcm9qZWN0aW9uOnZvaWQgMCE9PWM/YzpudWxsLHJlc29sdXRpb246ZCxyb3RhdGlvbjplLHpvb206YS5nZSgpfX1cbmwuZ2U9ZnVuY3Rpb24oKXt2YXIgYSxiPXRoaXMuemEoKTt2b2lkIDAhPT1iJiYoYT10aGlzLmhlKGIpKTtyZXR1cm4gYX07bC5oZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLm98fDA7aWYodGhpcy5pKXt2YXIgYz1TYih0aGlzLmksYSwxKTtiKz1jO3ZhciBkPXRoaXMuaVtjXTtjPWM9PXRoaXMuaS5sZW5ndGgtMT8yOmQvdGhpcy5pW2MrMV19ZWxzZSBkPXRoaXMuZixjPXRoaXMuQTtyZXR1cm4gYitNYXRoLmxvZyhkL2EpL01hdGgubG9nKGMpfTtcbmwudGc9ZnVuY3Rpb24oYSxiKXtiPWJ8fHt9O3ZhciBjPWIuc2l6ZTtjfHwoYz1DZih0aGlzKSk7aWYoYSBpbnN0YW5jZW9mIFJlKWlmKFwiQ2lyY2xlXCI9PT1hLkQoKSl7YT1hLkkoKTt2YXIgZD10ZihhKTtkLnJvdGF0ZSh3Zih0aGlzKSxSYShhKSl9ZWxzZSBkPWE7ZWxzZSB4KEFycmF5LmlzQXJyYXkoYSksMjQpLHgoIVlhKGEpLDI1KSxkPXRmKGEpO3ZhciBlPXZvaWQgMCE9PWIucGFkZGluZz9iLnBhZGRpbmc6WzAsMCwwLDBdLGY9dm9pZCAwIT09Yi5jb25zdHJhaW5SZXNvbHV0aW9uP2IuY29uc3RyYWluUmVzb2x1dGlvbjohMCxnPXZvaWQgMCE9PWIubmVhcmVzdD9iLm5lYXJlc3Q6ITEsaDt2b2lkIDAhPT1iLm1pblJlc29sdXRpb24/aD1iLm1pblJlc29sdXRpb246dm9pZCAwIT09Yi5tYXhab29tP2g9dGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKHRoaXMuZixiLm1heFpvb20tdGhpcy5vLDApOmg9MDt2YXIgaz1kLmFhKCksbT13Zih0aGlzKTthPU1hdGguY29zKC1tKTttPU1hdGguc2luKC1tKTtcbnZhciBuPUluZmluaXR5LHA9SW5maW5pdHkscT0tSW5maW5pdHksdD0tSW5maW5pdHk7ZD1kLmdhKCk7Zm9yKHZhciB1PTAseT1rLmxlbmd0aDt1PHk7dSs9ZCl7dmFyIEM9a1t1XSphLWtbdSsxXSptLEQ9a1t1XSptK2tbdSsxXSphO249TWF0aC5taW4obixDKTtwPU1hdGgubWluKHAsRCk7cT1NYXRoLm1heChxLEMpO3Q9TWF0aC5tYXgodCxEKX1jPUlmKHRoaXMsW24scCxxLHRdLFtjWzBdLWVbMV0tZVszXSxjWzFdLWVbMF0tZVsyXV0pO2M9aXNOYU4oYyk/aDpNYXRoLm1heChjLGgpO2YmJihoPXRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihjLDAsMCksIWcmJmg8YyYmKGg9dGhpcy5jb25zdHJhaW5SZXNvbHV0aW9uKGgsLTEsMCkpLGM9aCk7bT0tbTtoPShuK3EpLzIrKGVbMV0tZVszXSkvMipjO2U9KHArdCkvMisoZVswXS1lWzJdKS8yKmM7YT1baCphLWUqbSxlKmEraCptXTtlPWIuY2FsbGJhY2s/Yi5jYWxsYmFjazpsYTt2b2lkIDAhPT1iLmR1cmF0aW9uP3RoaXMuYW5pbWF0ZSh7cmVzb2x1dGlvbjpjLFxuY2VudGVyOmEsZHVyYXRpb246Yi5kdXJhdGlvbixlYXNpbmc6Yi5lYXNpbmd9LGUpOihLZih0aGlzLGMpLHRoaXMuT2EoYSksc2V0VGltZW91dChlLmJpbmQodm9pZCAwLCEwKSwwKSl9O2Z1bmN0aW9uIHZmKGEpe3JldHVybiEhYS5qYSgpJiZ2b2lkIDAhPT1hLnphKCl9bC5yb3RhdGU9ZnVuY3Rpb24oYSxiKXt2b2lkIDAhPT1iJiYoYj1CZih0aGlzLGEsYiksdGhpcy5PYShiKSk7eWYodGhpcyxhKX07bC5PYT1mdW5jdGlvbihhKXt0aGlzLnNldChcImNlbnRlclwiLGEpOzA8dGhpcy5hWzBdJiZ6Zih0aGlzKX07ZnVuY3Rpb24geGYoYSxiLGMpe2EuYVtiXSs9YzthLmMoKX1mdW5jdGlvbiBLZihhLGIpe2Euc2V0KFwicmVzb2x1dGlvblwiLGIpOzA8YS5hWzBdJiZ6ZihhKX1mdW5jdGlvbiB5ZihhLGIpe2Euc2V0KFwicm90YXRpb25cIixiKTswPGEuYVswXSYmemYoYSl9bC5xZj1mdW5jdGlvbihhKXtLZih0aGlzLHRoaXMuY29uc3RyYWluUmVzb2x1dGlvbih0aGlzLmYsYS10aGlzLm8sMCkpfTtmdW5jdGlvbiBMZihhLGIpe3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJDQU5WQVNcIik7YSYmKGMud2lkdGg9YSk7YiYmKGMuaGVpZ2h0PWIpO3JldHVybiBjLmdldENvbnRleHQoXCIyZFwiKX1mdW5jdGlvbiBNZihhKXthJiZhLnBhcmVudE5vZGUmJmEucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChhKX07ZnVuY3Rpb24gTmYoYSl7TmMuY2FsbCh0aGlzKTt2YXIgYj1aYSh7fSxhKTtiLm9wYWNpdHk9dm9pZCAwIT09YS5vcGFjaXR5P2Eub3BhY2l0eToxO2IudmlzaWJsZT12b2lkIDAhPT1hLnZpc2libGU/YS52aXNpYmxlOiEwO2IuekluZGV4PXZvaWQgMCE9PWEuekluZGV4P2EuekluZGV4OjA7Yi5tYXhSZXNvbHV0aW9uPXZvaWQgMCE9PWEubWF4UmVzb2x1dGlvbj9hLm1heFJlc29sdXRpb246SW5maW5pdHk7Yi5taW5SZXNvbHV0aW9uPXZvaWQgMCE9PWEubWluUmVzb2x1dGlvbj9hLm1pblJlc29sdXRpb246MDt0aGlzLm5hKGIpO3RoaXMuYT17bGF5ZXI6dGhpcyxmZDohMH19dihOZixOYyk7bD1OZi5wcm90b3R5cGU7bC5EPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudHlwZX07XG5mdW5jdGlvbiBPZihhKXthLmEub3BhY2l0eT1yYShhLmdldChcIm9wYWNpdHlcIiksMCwxKTthLmEuaWo9YS5iZCgpO2EuYS52aXNpYmxlPWEuSGIoKTthLmEuZXh0ZW50PWEuSSgpO2EuYS56SW5kZXg9YS5zYSgpO2EuYS5tYXhSZXNvbHV0aW9uPWEuZ2V0KFwibWF4UmVzb2x1dGlvblwiKTthLmEubWluUmVzb2x1dGlvbj1NYXRoLm1heChhLmdldChcIm1pblJlc29sdXRpb25cIiksMCk7cmV0dXJuIGEuYX1sLkk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJleHRlbnRcIil9O2wuSGI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJ2aXNpYmxlXCIpfTtsLnNhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwiekluZGV4XCIpfTtsLm9pPWZ1bmN0aW9uKGEpe3RoaXMuc2V0KFwidmlzaWJsZVwiLGEpfTtsLnBmPWZ1bmN0aW9uKGEpe3RoaXMuc2V0KFwiekluZGV4XCIsYSl9O2Z1bmN0aW9uIFBmKGEpe3ZhciBiPWF8fHt9O2E9WmEoe30sYik7ZGVsZXRlIGEubGF5ZXJzO2I9Yi5sYXllcnM7TmYuY2FsbCh0aGlzLGEpO3RoaXMuZz1bXTt0aGlzLmI9e307eih0aGlzLFBjKFFmKSx0aGlzLk5nLHRoaXMpO2I/QXJyYXkuaXNBcnJheShiKT9iPW5ldyBTYyhiLnNsaWNlKCkse3VuaXF1ZTohMH0pOngoYiBpbnN0YW5jZW9mIFNjLDQzKTpiPW5ldyBTYyh2b2lkIDAse3VuaXF1ZTohMH0pO3RoaXMuc2V0KFFmLGIpfXYoUGYsTmYpO2w9UGYucHJvdG90eXBlO2wuZmM9ZnVuY3Rpb24oKXt0aGlzLmMoKX07XG5sLk5nPWZ1bmN0aW9uKCl7dGhpcy5nLmZvckVhY2godmMpO3RoaXMuZy5sZW5ndGg9MDt2YXIgYT10aGlzLmdldChRZik7dGhpcy5nLnB1c2goeihhLFwiYWRkXCIsdGhpcy5NZyx0aGlzKSx6KGEsXCJyZW1vdmVcIix0aGlzLk9nLHRoaXMpKTtmb3IodmFyIGIgaW4gdGhpcy5iKXRoaXMuYltiXS5mb3JFYWNoKHZjKTtiYih0aGlzLmIpO2E9YS5hO3ZhciBjO2I9MDtmb3IoYz1hLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1hW2JdO3RoaXMuYlt3KGQpLnRvU3RyaW5nKCldPVt6KGQsXCJwcm9wZXJ0eWNoYW5nZVwiLHRoaXMuZmMsdGhpcykseihkLFwiY2hhbmdlXCIsdGhpcy5mYyx0aGlzKV19dGhpcy5jKCl9O2wuTWc9ZnVuY3Rpb24oYSl7YT1hLmVsZW1lbnQ7dmFyIGI9dyhhKS50b1N0cmluZygpO3RoaXMuYltiXT1beihhLFwicHJvcGVydHljaGFuZ2VcIix0aGlzLmZjLHRoaXMpLHooYSxcImNoYW5nZVwiLHRoaXMuZmMsdGhpcyldO3RoaXMuYygpfTtcbmwuT2c9ZnVuY3Rpb24oYSl7YT13KGEuZWxlbWVudCkudG9TdHJpbmcoKTt0aGlzLmJbYV0uZm9yRWFjaCh2Yyk7ZGVsZXRlIHRoaXMuYlthXTt0aGlzLmMoKX07bC5aYz1mdW5jdGlvbihhKXt2YXIgYj12b2lkIDAhPT1hP2E6W10sYz1iLmxlbmd0aDt0aGlzLmdldChRZikuZm9yRWFjaChmdW5jdGlvbihhKXthLlpjKGIpfSk7YT1PZih0aGlzKTt2YXIgZDtmb3IoZD1iLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT1iW2NdO2Uub3BhY2l0eSo9YS5vcGFjaXR5O2UudmlzaWJsZT1lLnZpc2libGUmJmEudmlzaWJsZTtlLm1heFJlc29sdXRpb249TWF0aC5taW4oZS5tYXhSZXNvbHV0aW9uLGEubWF4UmVzb2x1dGlvbik7ZS5taW5SZXNvbHV0aW9uPU1hdGgubWF4KGUubWluUmVzb2x1dGlvbixhLm1pblJlc29sdXRpb24pO3ZvaWQgMCE9PWEuZXh0ZW50JiYoZS5leHRlbnQ9dm9pZCAwIT09ZS5leHRlbnQ/VWEoZS5leHRlbnQsYS5leHRlbnQpOmEuZXh0ZW50KX1yZXR1cm4gYn07bC5iZD1mdW5jdGlvbigpe3JldHVyblwicmVhZHlcIn07XG52YXIgUWY9XCJsYXllcnNcIjt2YXIgUmY9W10sU2Y9W107ZnVuY3Rpb24gVGYoYSxiKXtzd2l0Y2goYSl7Y2FzZSBcIk1BUF9SRU5ERVJFUlwiOmE9UmY7YS5wdXNoKGIpO2JyZWFrO2Nhc2UgXCJMQVlFUl9SRU5ERVJFUlwiOmE9U2Y7YS5wdXNoKGIpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbnN1cHBvcnRlZCBwbHVnaW4gdHlwZTogXCIrYSk7fX1mdW5jdGlvbiBVZigpe2Zvcih2YXIgYT1bVmYsV2YsWGYsWWZdLGI9MCxjPWEubGVuZ3RoO2I8YzsrK2IpVGYoXCJMQVlFUl9SRU5ERVJFUlwiLGFbYl0pfTtmdW5jdGlvbiBaZihhKXtOYy5jYWxsKHRoaXMpO3ZhciBiPSRmKGEpO3RoaXMucWI9dm9pZCAwIT09YS5sb2FkVGlsZXNXaGlsZUFuaW1hdGluZz9hLmxvYWRUaWxlc1doaWxlQW5pbWF0aW5nOiExO3RoaXMucmI9dm9pZCAwIT09YS5sb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nP2EubG9hZFRpbGVzV2hpbGVJbnRlcmFjdGluZzohMTt0aGlzLkRjPXZvaWQgMCE9PWEucGl4ZWxSYXRpbz9hLnBpeGVsUmF0aW86amQ7dGhpcy5GYz1iLmxvZ29zO3RoaXMuSGE9ZnVuY3Rpb24oKXt0aGlzLm89dm9pZCAwO3RoaXMuYmouY2FsbCh0aGlzLERhdGUubm93KCkpfS5iaW5kKHRoaXMpO3RoaXMuS2E9S2UoKTt0aGlzLkpjPUtlKCk7dGhpcy5wYj0wO3RoaXMuQT10aGlzLko9dGhpcy5LPXRoaXMuZj10aGlzLmI9bnVsbDt0aGlzLmE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKTt0aGlzLmEuY2xhc3NOYW1lPVwib2wtdmlld3BvcnRcIisobWQ/XCIgb2wtdG91Y2hcIjpcIlwiKTt0aGlzLmEuc3R5bGUucG9zaXRpb249XG5cInJlbGF0aXZlXCI7dGhpcy5hLnN0eWxlLm92ZXJmbG93PVwiaGlkZGVuXCI7dGhpcy5hLnN0eWxlLndpZHRoPVwiMTAwJVwiO3RoaXMuYS5zdHlsZS5oZWlnaHQ9XCIxMDAlXCI7dGhpcy5hLnN0eWxlLm1zVG91Y2hBY3Rpb249XCJub25lXCI7dGhpcy5hLnN0eWxlLnRvdWNoQWN0aW9uPVwibm9uZVwiO3RoaXMudT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO3RoaXMudS5jbGFzc05hbWU9XCJvbC1vdmVybGF5Y29udGFpbmVyXCI7dGhpcy5hLmFwcGVuZENoaWxkKHRoaXMudSk7dGhpcy5CPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7dGhpcy5CLmNsYXNzTmFtZT1cIm9sLW92ZXJsYXljb250YWluZXItc3RvcGV2ZW50XCI7Zm9yKHZhciBjPVwiY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIHRvdWNoc3RhcnQgTVNQb2ludGVyRG93biBwb2ludGVyZG93biBtb3VzZXdoZWVsIHdoZWVsXCIuc3BsaXQoXCIgXCIpLGQ9MCxlPWMubGVuZ3RoO2Q8ZTsrK2Qpeih0aGlzLkIsY1tkXSxKYyk7dGhpcy5hLmFwcGVuZENoaWxkKHRoaXMuQik7XG50aGlzLmZhPW5ldyBZZCh0aGlzLGEubW92ZVRvbGVyYW5jZSk7Zm9yKHZhciBmIGluIHBkKXoodGhpcy5mYSxwZFtmXSx0aGlzLmllLHRoaXMpO3RoaXMuZWE9Yi5rZXlib2FyZEV2ZW50VGFyZ2V0O3RoaXMuQz1udWxsO3oodGhpcy5hLFwid2hlZWxcIix0aGlzLnZiLHRoaXMpO3oodGhpcy5hLFwibW91c2V3aGVlbFwiLHRoaXMudmIsdGhpcyk7dGhpcy5jb250cm9scz1iLmNvbnRyb2xzfHxuZXcgU2M7dGhpcy5pbnRlcmFjdGlvbnM9Yi5pbnRlcmFjdGlvbnN8fG5ldyBTYzt0aGlzLmk9Yi5vdmVybGF5czt0aGlzLlVlPXt9O3RoaXMuamI9Yi5raC5jcmVhdGUodGhpcy5hLHRoaXMpO3RoaXMuTT1udWxsO3RoaXMubGE9W107dGhpcy54YT1uZXcgZWUodGhpcy5HZy5iaW5kKHRoaXMpLHRoaXMuZGguYmluZCh0aGlzKSk7dGhpcy5YPXt9O3oodGhpcyxQYyhcImxheWVyZ3JvdXBcIiksdGhpcy5LZyx0aGlzKTt6KHRoaXMsUGMoXCJ2aWV3XCIpLHRoaXMuZmgsdGhpcyk7eih0aGlzLFBjKFwic2l6ZVwiKSxcbnRoaXMuWGcsdGhpcyk7eih0aGlzLFBjKFwidGFyZ2V0XCIpLHRoaXMuYmgsdGhpcyk7dGhpcy5uYShiLnZhbHVlcyk7dGhpcy5jb250cm9scy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Euc2V0TWFwKHRoaXMpfSx0aGlzKTt6KHRoaXMuY29udHJvbHMsXCJhZGRcIixmdW5jdGlvbihhKXthLmVsZW1lbnQuc2V0TWFwKHRoaXMpfSx0aGlzKTt6KHRoaXMuY29udHJvbHMsXCJyZW1vdmVcIixmdW5jdGlvbihhKXthLmVsZW1lbnQuc2V0TWFwKG51bGwpfSx0aGlzKTt0aGlzLmludGVyYWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Euc2V0TWFwKHRoaXMpfSx0aGlzKTt6KHRoaXMuaW50ZXJhY3Rpb25zLFwiYWRkXCIsZnVuY3Rpb24oYSl7YS5lbGVtZW50LnNldE1hcCh0aGlzKX0sdGhpcyk7eih0aGlzLmludGVyYWN0aW9ucyxcInJlbW92ZVwiLGZ1bmN0aW9uKGEpe2EuZWxlbWVudC5zZXRNYXAobnVsbCl9LHRoaXMpO3RoaXMuaS5mb3JFYWNoKHRoaXMuUGQsdGhpcyk7eih0aGlzLmksXCJhZGRcIixmdW5jdGlvbihhKXt0aGlzLlBkKGEuZWxlbWVudCl9LFxudGhpcyk7eih0aGlzLmksXCJyZW1vdmVcIixmdW5jdGlvbihhKXt2YXIgYj1hLmVsZW1lbnQuaWQ7dm9pZCAwIT09YiYmZGVsZXRlIHRoaXMuVWVbYi50b1N0cmluZygpXTthLmVsZW1lbnQuc2V0TWFwKG51bGwpfSx0aGlzKX12KFpmLE5jKTtsPVpmLnByb3RvdHlwZTtsLiRmPWZ1bmN0aW9uKGEpe3RoaXMuY29udHJvbHMucHVzaChhKX07bC5hZz1mdW5jdGlvbihhKXt0aGlzLmludGVyYWN0aW9ucy5wdXNoKGEpfTtsLmJnPWZ1bmN0aW9uKGEpe2FnKHRoaXMpLmdldChRZikucHVzaChhKX07bC5jZz1mdW5jdGlvbihhKXt0aGlzLmkucHVzaChhKX07bC5QZD1mdW5jdGlvbihhKXt2YXIgYj1hLmlkO3ZvaWQgMCE9PWImJih0aGlzLlVlW2IudG9TdHJpbmcoKV09YSk7YS5zZXRNYXAodGhpcyl9O1xubC5jYT1mdW5jdGlvbigpe0NjKHRoaXMuZmEpO0NjKHRoaXMuamIpO0FjKHRoaXMuYSxcIndoZWVsXCIsdGhpcy52Yix0aGlzKTtBYyh0aGlzLmEsXCJtb3VzZXdoZWVsXCIsdGhpcy52Yix0aGlzKTt2b2lkIDAhPT10aGlzLmcmJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLHRoaXMuZywhMSksdGhpcy5nPXZvaWQgMCk7dGhpcy5vJiYoY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5vKSx0aGlzLm89dm9pZCAwKTt0aGlzLnNldChcInRhcmdldFwiLG51bGwpO05jLnByb3RvdHlwZS5jYS5jYWxsKHRoaXMpfTtsLldjPWZ1bmN0aW9uKGEsYixjKXtpZih0aGlzLmIpcmV0dXJuIGE9dGhpcy5KYShhKSxjPXZvaWQgMCE9PWM/Yzp7fSx0aGlzLmpiLkVhKGEsdGhpcy5iLHZvaWQgMCE9PWMuaGl0VG9sZXJhbmNlP2MuaGl0VG9sZXJhbmNlKnRoaXMuYi5waXhlbFJhdGlvOjAsYixudWxsLHZvaWQgMCE9PWMubGF5ZXJGaWx0ZXI/Yy5sYXllckZpbHRlcjpHZSxudWxsKX07XG5sLkloPWZ1bmN0aW9uKGEsYixjLGQsZSl7aWYodGhpcy5iKXthOnt2YXIgZj10aGlzLmpiLGc9dGhpcy5iO2M9dm9pZCAwIT09Yz9jOm51bGw7ZD12b2lkIDAhPT1kP2Q6R2U7ZT12b2lkIDAhPT1lP2U6bnVsbDt2YXIgaD1nLnZpZXdTdGF0ZS5yZXNvbHV0aW9uLGs9Zy5sYXllclN0YXRlc0FycmF5LG09ay5sZW5ndGg7YT1PZShnLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLGEuc2xpY2UoKSk7Zm9yKC0tbTswPD1tOy0tbSl7dmFyIG49a1ttXTt2YXIgcD1uLmxheWVyO2lmKGJnKG4saCkmJmQuY2FsbChlLHApJiYobj1jZyhmLHApLkMoYSxnLGIsYykpKXtiPW47YnJlYWsgYX19Yj12b2lkIDB9cmV0dXJuIGJ9fTtmdW5jdGlvbiBhZChhLGIpe2E9YS5hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2I9Yi5jaGFuZ2VkVG91Y2hlcz9iLmNoYW5nZWRUb3VjaGVzWzBdOmI7cmV0dXJuW2IuY2xpZW50WC1hLmxlZnQsYi5jbGllbnRZLWEudG9wXX1sLmNkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwidGFyZ2V0XCIpfTtcbmZ1bmN0aW9uIGRnKGEpe2E9YS5jZCgpO3JldHVybiB2b2lkIDAhPT1hP1wic3RyaW5nXCI9PT10eXBlb2YgYT9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKTphOm51bGx9bC5KYT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmI7cmV0dXJuIGI/T2UoYi5waXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybSxhLnNsaWNlKCkpOm51bGx9O2wuRWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pfTtmdW5jdGlvbiBhZyhhKXtyZXR1cm4gYS5nZXQoXCJsYXllcmdyb3VwXCIpfWwuSmg9ZnVuY3Rpb24oKXtyZXR1cm4gYWcodGhpcykuZ2V0KFFmKX07ZnVuY3Rpb24gZWcoYSxiKXtyZXR1cm4oYT1hLmIpP09lKGEuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sYi5zbGljZSgwLDIpKTpudWxsfWwuYWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qYn07bC53Yj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInNpemVcIil9O2wuWj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInZpZXdcIil9O1xubC5HZz1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLmI7aWYoIShlJiZiIGluIGUud2FudGVkVGlsZXMmJmUud2FudGVkVGlsZXNbYl1bYS5TYSgpXSkpcmV0dXJuIEluZmluaXR5O2E9Y1swXS1lLmZvY3VzWzBdO2M9Y1sxXS1lLmZvY3VzWzFdO3JldHVybiA2NTUzNipNYXRoLmxvZyhkKStNYXRoLnNxcnQoYSphK2MqYykvZH07bC52Yj1mdW5jdGlvbihhLGIpe2E9bmV3ICRjKGJ8fGEudHlwZSx0aGlzLGEpO3RoaXMuaWUoYSl9O2wuaWU9ZnVuY3Rpb24oYSl7aWYodGhpcy5iKXt0aGlzLk09YS5jb29yZGluYXRlO2EuZnJhbWVTdGF0ZT10aGlzLmI7dmFyIGI9dGhpcy5pbnRlcmFjdGlvbnMuYSxjO2lmKCExIT09dGhpcy5sKGEpKWZvcihjPWIubGVuZ3RoLTE7MDw9YztjLS0pe3ZhciBkPWJbY107aWYoZC5nZXQoXCJhY3RpdmVcIikmJiFkLmhhbmRsZUV2ZW50KGEpKWJyZWFrfX19O1xubC5XZz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYixiPXRoaXMueGE7aWYoMCE9PWIuYS5sZW5ndGgpe3ZhciBjPTE2LGQ9YztpZihhKXt2YXIgZT1hLnZpZXdIaW50cztlWzBdJiYoYz10aGlzLnFiPzg6MCxkPTIpO2VbMV0mJihjPXRoaXMucmI/ODowLGQ9Mil9aWYoYi5nPGMpe2U9Yi5pO3ZhciBmPWIuYSxnPWIuYyxoPTAsaz1mLmxlbmd0aCxtO2ZvcihtPTA7bTxrOysrbSl7dmFyIG49ZlttXTt2YXIgcD1lKG4pO0luZmluaXR5PT1wP2RlbGV0ZSBiLmxbYi5qKG4pXTooZ1toXT1wLGZbaCsrXT1uKX1mLmxlbmd0aD1oO2cubGVuZ3RoPWg7Zm9yKGU9KGIuYS5sZW5ndGg+PjEpLTE7MDw9ZTtlLS0pZGUoYixlKTtlPTA7Zm9yKGY9ITE7Yi5nPGMmJmU8ZCYmMDxiLmEubGVuZ3RoOylnPWIsaz1nLmEsbj1nLmMsaD1rWzBdLDE9PWsubGVuZ3RoPyhrLmxlbmd0aD0wLG4ubGVuZ3RoPTApOihrWzBdPWsucG9wKCksblswXT1uLnBvcCgpLGRlKGcsMCkpLGs9Zy5qKGgpLGRlbGV0ZSBnLmxba10sXG5oPWhbMF0saz1oLlNhKCksZz1oLnN0YXRlLDU9PT1nP2Y9ITA6MCE9PWd8fGsgaW4gYi5ifHwoYi5iW2tdPSEwLCsrYi5nLCsrZSxoLmxvYWQoKSk7MD09PWUmJmYmJmIubygpfX1iPXRoaXMubGE7ZD0wO2ZvcihjPWIubGVuZ3RoO2Q8YzsrK2QpYltkXSh0aGlzLGEpO2IubGVuZ3RoPTB9O2wuWGc9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcigpfTtcbmwuYmg9ZnVuY3Rpb24oKXt2YXIgYTt0aGlzLmNkKCkmJihhPWRnKHRoaXMpKTtpZih0aGlzLkMpe2Zvcih2YXIgYj0wLGM9dGhpcy5DLmxlbmd0aDtiPGM7KytiKXZjKHRoaXMuQ1tiXSk7dGhpcy5DPW51bGx9YT8oYS5hcHBlbmRDaGlsZCh0aGlzLmEpLGE9dGhpcy5lYT90aGlzLmVhOmEsdGhpcy5DPVt6KGEsXCJrZXlkb3duXCIsdGhpcy52Yix0aGlzKSx6KGEsXCJrZXlwcmVzc1wiLHRoaXMudmIsdGhpcyldLHRoaXMuZ3x8KHRoaXMuZz10aGlzLnhmLmJpbmQodGhpcyksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLmcsITEpKSk6KE1mKHRoaXMuYSksdm9pZCAwIT09dGhpcy5nJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLmcsITEpLHRoaXMuZz12b2lkIDApKTt0aGlzLnhmKCl9O2wuZGg9ZnVuY3Rpb24oKXt0aGlzLnJlbmRlcigpfTtsLmtlPWZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoKX07XG5sLmZoPWZ1bmN0aW9uKCl7dGhpcy5LJiYodmModGhpcy5LKSx0aGlzLks9bnVsbCk7dGhpcy5KJiYodmModGhpcy5KKSx0aGlzLko9bnVsbCk7dmFyIGE9dGhpcy5aKCk7YSYmKHRoaXMuYS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXZpZXdcIix3KGEpKSx0aGlzLks9eihhLFwicHJvcGVydHljaGFuZ2VcIix0aGlzLmtlLHRoaXMpLHRoaXMuSj16KGEsXCJjaGFuZ2VcIix0aGlzLmtlLHRoaXMpKTt0aGlzLnJlbmRlcigpfTtsLktnPWZ1bmN0aW9uKCl7dGhpcy5BJiYodGhpcy5BLmZvckVhY2godmMpLHRoaXMuQT1udWxsKTt2YXIgYT1hZyh0aGlzKTthJiYodGhpcy5BPVt6KGEsXCJwcm9wZXJ0eWNoYW5nZVwiLHRoaXMucmVuZGVyLHRoaXMpLHooYSxcImNoYW5nZVwiLHRoaXMucmVuZGVyLHRoaXMpXSk7dGhpcy5yZW5kZXIoKX07bC5yZW5kZXI9ZnVuY3Rpb24oKXt2b2lkIDA9PT10aGlzLm8mJih0aGlzLm89cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuSGEpKX07bC5ZaT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5jb250cm9scy5yZW1vdmUoYSl9O1xubC5aaT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5pbnRlcmFjdGlvbnMucmVtb3ZlKGEpfTtsLiRpPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmkucmVtb3ZlKGEpfTtcbmwuYmo9ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLndiKCksZD10aGlzLlooKSxlPUJhKCksZj10aGlzLmIsZz1udWxsO2lmKHZvaWQgMCE9PWMmJjA8Y1swXSYmMDxjWzFdJiZkJiZ2ZihkKSl7Zz10aGlzLmI/dGhpcy5iLnZpZXdIaW50czp2b2lkIDA7dm9pZCAwIT09Zz8oZ1swXT1kLmFbMF0sZ1sxXT1kLmFbMV0pOmc9ZC5hLnNsaWNlKCk7dmFyIGg9YWcodGhpcykuWmMoKSxrPXt9O3ZhciBtPTA7Zm9yKGI9aC5sZW5ndGg7bTxiOysrbSlrW3coaFttXS5sYXllcildPWhbbV07bT1KZihkKTtnPXthbmltYXRlOiExLGF0dHJpYnV0aW9uczp7fSxjb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybTp0aGlzLkthLGV4dGVudDplLGZvY3VzOnRoaXMuTT90aGlzLk06bS5jZW50ZXIsaW5kZXg6dGhpcy5wYisrLGxheWVyU3RhdGVzOmssbGF5ZXJTdGF0ZXNBcnJheTpoLGxvZ29zOlphKHt9LHRoaXMuRmMpLHBpeGVsUmF0aW86dGhpcy5EYyxwaXhlbFRvQ29vcmRpbmF0ZVRyYW5zZm9ybTp0aGlzLkpjLFxucG9zdFJlbmRlckZ1bmN0aW9uczpbXSxzaXplOmMsc2tpcHBlZEZlYXR1cmVVaWRzOnRoaXMuWCx0aWxlUXVldWU6dGhpcy54YSx0aW1lOmEsdXNlZFRpbGVzOnt9LHZpZXdTdGF0ZTptLHZpZXdIaW50czpnLHdhbnRlZFRpbGVzOnt9fX1nJiYoZy5leHRlbnQ9U2EobS5jZW50ZXIsbS5yZXNvbHV0aW9uLG0ucm90YXRpb24sZy5zaXplLGUpKTt0aGlzLmI9Zzt0aGlzLmpiLmZmKGcpO2cmJihnLmFuaW1hdGUmJnRoaXMucmVuZGVyKCksQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkodGhpcy5sYSxnLnBvc3RSZW5kZXJGdW5jdGlvbnMpLCFmfHx0aGlzLmYmJihZYSh0aGlzLmYpfHxPYShnLmV4dGVudCx0aGlzLmYpKXx8KHRoaXMubChuZXcgWmMoXCJtb3Zlc3RhcnRcIix0aGlzLGYpKSx0aGlzLmY9S2EodGhpcy5mKSksIXRoaXMuZnx8Zy52aWV3SGludHNbMF18fGcudmlld0hpbnRzWzFdfHxPYShnLmV4dGVudCx0aGlzLmYpfHwodGhpcy5sKG5ldyBaYyhcIm1vdmVlbmRcIix0aGlzLGcpKSxcbkZhKGcuZXh0ZW50LHRoaXMuZikpKTt0aGlzLmwobmV3IFpjKFwicG9zdHJlbmRlclwiLHRoaXMsZykpO3NldFRpbWVvdXQodGhpcy5XZy5iaW5kKHRoaXMpLDApfTtsLnJmPWZ1bmN0aW9uKGEpe2E9dyhhKS50b1N0cmluZygpO3RoaXMuWFthXT0hMDt0aGlzLnJlbmRlcigpfTtcbmwueGY9ZnVuY3Rpb24oKXt2YXIgYT1kZyh0aGlzKTtpZihhKXt2YXIgYj1nZXRDb21wdXRlZFN0eWxlKGEpO3RoaXMuc2V0KFwic2l6ZVwiLFthLm9mZnNldFdpZHRoLXBhcnNlRmxvYXQoYi5ib3JkZXJMZWZ0V2lkdGgpLXBhcnNlRmxvYXQoYi5wYWRkaW5nTGVmdCktcGFyc2VGbG9hdChiLnBhZGRpbmdSaWdodCktcGFyc2VGbG9hdChiLmJvcmRlclJpZ2h0V2lkdGgpLGEub2Zmc2V0SGVpZ2h0LXBhcnNlRmxvYXQoYi5ib3JkZXJUb3BXaWR0aCktcGFyc2VGbG9hdChiLnBhZGRpbmdUb3ApLXBhcnNlRmxvYXQoYi5wYWRkaW5nQm90dG9tKS1wYXJzZUZsb2F0KGIuYm9yZGVyQm90dG9tV2lkdGgpXSl9ZWxzZSB0aGlzLnNldChcInNpemVcIix2b2lkIDApfTtsLnZmPWZ1bmN0aW9uKGEpe2E9dyhhKS50b1N0cmluZygpO2RlbGV0ZSB0aGlzLlhbYV07dGhpcy5yZW5kZXIoKX07dmFyIGZnPVtcImNhbnZhc1wiLFwid2ViZ2xcIl07XG5mdW5jdGlvbiAkZihhKXt2YXIgYj1udWxsO3ZvaWQgMCE9PWEua2V5Ym9hcmRFdmVudFRhcmdldCYmKGI9XCJzdHJpbmdcIj09PXR5cGVvZiBhLmtleWJvYXJkRXZlbnRUYXJnZXQ/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5rZXlib2FyZEV2ZW50VGFyZ2V0KTphLmtleWJvYXJkRXZlbnRUYXJnZXQpO3ZhciBjPXt9LGQ9e307aWYodm9pZCAwPT09YS5sb2dvfHxcImJvb2xlYW5cIj09PXR5cGVvZiBhLmxvZ28mJmEubG9nbylkW1wiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDQUFBQUFnQ0FNQUFBQkVwSXJHQUFBQUEzTkNTVlFJQ0FqYjRVL2dBQUFBQ1hCSVdYTUFBQUhHQUFBQnhnRVh3ZnBHQUFBQUdYUkZXSFJUYjJaMGQyRnlaUUIzZDNjdWFXNXJjMk5oY0dVdWIzSm5tKzQ4R2dBQUFoTlFURlJGLy8vL0FQLy9BSUNBZ1AvL0FGVlZRRUNBLy8vL0sxVlZTYmJiWUwvZkowNWlkc1RZSkZ0YmJjamJKbGxtWnN6V1dNVE9JRmhvSGxOaVpzelRhOURkVWNITkhsTmxWOFhSSVZkaWFzclVIbFpqSVZaamFNblZIMVJsSUZSa0gxUmtIMVpsYXN2WWFzdlhWc1BRSDFWa2FjblZhOHZXSVZaaklGUmpWTVBRYThyWElWVmtYc1hSc052ZUlGVmtJRlpsSVZWajNlRGVoNkdtYk12WEgxWmtJRlJrYThyV2JNdlhJRlZrSUZWaklGVmtiTXZXSDFWamJNdldJRlZsYmN2V0lGVmxhOHZWSUZWa2JNdldiTXZWSDFWa2JNdldJRlZsYmN2V0lGVmtiY3ZWYk12V2pOUGJJRlZrVThMUHdNek5JRlZrYmN6V0lGVmtic3ZXYk12WElGVmtSbkI4YmN2VzIrVGtXOFhSSUZWa0lsWmxKVmxvSmxwb0tseHJMbDl0TW1Kd09XZDBPbWgxUlhGOFRuZUNUM2lEVUhpRFU4TFBWTUxQVmNMUFZjUFFWc1BQVnNQUVY4UFFXTVRRV3NUUVc4VFFYTVhTWHNYUlg0U05YOGJTWU1mVFljZlRZc2ZUWThqVVpjZlNac25VYUlxVGFjclZhc3JWYThqVGE4cldiSTJWYk12V2JjdldkSk9iZGN2VWRzelVkOHZWZUphZWU4N1lmYzNXZ0p5amhxR25pdERZamFhcmxkUFpucksyb05iYm9yVzVvOWJibzlmYnBMYTZxOW5kckwzQXJ0bmRzY0REdXR6ZnU4Zkp3Tjdnd3Q3Z3hjL1F5dUhoeStIaXplSGkwTmZYMCtQajE5emIxK1RqMnVYazI5L2UzdUxnMytMaDMrYmw0dVhqNHVmbDQrZmw1T2ZsNXVmbDV1am01K2pteVNEbkJBQUFBRnAwVWs1VEFBRUNBZ01FQkFZSENBME5EZzRVR1JvZ0lpTW1LU3NzTHpVN1BrSkpUMUpUVkZsaVkyaHJkSFozZm9TRmhZZUpqWTJRa3B1Z3FiRzF0cmU1dzh6UTA5WFkzdVhuNit6eDh2VDA5dmY0K1BqNStmcjYvUDM5L2YzK2d6N1NzQUFBQVZWSlJFRlVPTXRqWUtBN0VCRG53Q1BMck9iUzFCUmlMb0pMbnRlNkNReThGTEhMQ3pzMlFVRzRGalo1R2JjbUJERGp4SkJYRFd4Q0JyYjhhTTR6YmtJRHpwTFluQWNFOVZYbEpTV2xaUlUxM2tvSWVXNTdtR3g1WGpvTVpFVXF3eFdZUWFRYlN6TFNrWUdmS0ZTZTBRTXNYNVdiamdZMFlTNE1CcGxlbUk0QmRHQlcrRFExMWVaaXltZnFRdVhaSWpxd3lhZFBOb1NaNEwrMEZWTTZlK29HSTZnOGE5aUtOVDNvOGtWek5relJnNWxnbDdwNHd5UlVMOVl0MmpBeFZoNm1RQ29nYWU2R21mbEk4cDByMTNWRldUSEJRMHJXUFc3YWhnV1ZjUG0rOWN1TG95eTRrQ0pEekNtNmQ4UFNGb2gwenZRTkM1T2pESmhRb3BQUEpxcGgxZG9KQlVENXRua2JaaVVFcWFDbkIzYlRxTFRGRzFiUG43MWt3NGIrR0ZkcExFbEtJelJ4eGdZZ1dOWWM1U0NFTlZIS2VVYWx0SGRYeDBkWjh1QkkxaEoyVVVEZ3E4MkNNMk13S2VpYnFBdlNPN01DQUJxMHdYRVBpcVdFQUFBQUFFbEZUa1N1UW1DQ1wiXT1cblwiaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9cIjtlbHNle3ZhciBlPWEubG9nbztcInN0cmluZ1wiPT09dHlwZW9mIGU/ZFtlXT1cIlwiOmUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD9kW3coZSkudG9TdHJpbmcoKV09ZTplJiYoeChcInN0cmluZ1wiPT10eXBlb2YgZS5ocmVmLDQ0KSx4KFwic3RyaW5nXCI9PXR5cGVvZiBlLnNyYyw0NSksZFtlLnNyY109ZS5ocmVmKX1lPWEubGF5ZXJzIGluc3RhbmNlb2YgUGY/YS5sYXllcnM6bmV3IFBmKHtsYXllcnM6YS5sYXllcnN9KTtjLmxheWVyZ3JvdXA9ZTtjLnRhcmdldD1hLnRhcmdldDtjLnZpZXc9dm9pZCAwIT09YS52aWV3P2EudmlldzpuZXcgdWY7dmFyIGY7dm9pZCAwIT09YS5yZW5kZXJlcj8oQXJyYXkuaXNBcnJheShhLnJlbmRlcmVyKT9mPWEucmVuZGVyZXI6XCJzdHJpbmdcIj09PXR5cGVvZiBhLnJlbmRlcmVyP2Y9W2EucmVuZGVyZXJdOngoITEsNDYpLDA8PWYuaW5kZXhPZihcImRvbVwiKSYmKGY9Zi5jb25jYXQoZmcpKSk6Zj1mZztlPTA7dmFyIGc9XG5mLmxlbmd0aDthOmZvcig7ZTxnOysrZSlmb3IodmFyIGg9ZltlXSxrPTAsbT1SZi5sZW5ndGg7azxtOysrayl7dmFyIG49UmZba107aWYobi5oYW5kbGVzKGgpKXt2YXIgcD1uO2JyZWFrIGF9fWlmKCFwKXRocm93IEVycm9yKFwiVW5hYmxlIHRvIGNyZWF0ZSBhIG1hcCByZW5kZXJlciBmb3IgdHlwZXM6IFwiK2Yuam9pbihcIiwgXCIpKTtpZih2b2lkIDAhPT1hLmNvbnRyb2xzKWlmKEFycmF5LmlzQXJyYXkoYS5jb250cm9scykpdmFyIHE9bmV3IFNjKGEuY29udHJvbHMuc2xpY2UoKSk7ZWxzZSB4KGEuY29udHJvbHMgaW5zdGFuY2VvZiBTYyw0NykscT1hLmNvbnRyb2xzO2lmKHZvaWQgMCE9PWEuaW50ZXJhY3Rpb25zKWlmKEFycmF5LmlzQXJyYXkoYS5pbnRlcmFjdGlvbnMpKXZhciB0PW5ldyBTYyhhLmludGVyYWN0aW9ucy5zbGljZSgpKTtlbHNlIHgoYS5pbnRlcmFjdGlvbnMgaW5zdGFuY2VvZiBTYyw0OCksdD1hLmludGVyYWN0aW9uczt2b2lkIDAhPT1hLm92ZXJsYXlzP0FycmF5LmlzQXJyYXkoYS5vdmVybGF5cyk/XG5hPW5ldyBTYyhhLm92ZXJsYXlzLnNsaWNlKCkpOih4KGEub3ZlcmxheXMgaW5zdGFuY2VvZiBTYyw0OSksYT1hLm92ZXJsYXlzKTphPW5ldyBTYztyZXR1cm57Y29udHJvbHM6cSxpbnRlcmFjdGlvbnM6dCxrZXlib2FyZEV2ZW50VGFyZ2V0OmIsbG9nb3M6ZCxvdmVybGF5czphLGtoOnAsdmFsdWVzOmN9fTtmdW5jdGlvbiBnZyhhKXtOYy5jYWxsKHRoaXMpO3RoaXMuZWxlbWVudD1hLmVsZW1lbnQ/YS5lbGVtZW50Om51bGw7dGhpcy5nPXRoaXMuSj1udWxsO3RoaXMuQz1bXTt0aGlzLnJlbmRlcj1hLnJlbmRlcj9hLnJlbmRlcjpsYTthLnRhcmdldCYmKGE9YS50YXJnZXQsdGhpcy5KPVwic3RyaW5nXCI9PT10eXBlb2YgYT9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChhKTphKX12KGdnLE5jKTtnZy5wcm90b3R5cGUuY2E9ZnVuY3Rpb24oKXtNZih0aGlzLmVsZW1lbnQpO05jLnByb3RvdHlwZS5jYS5jYWxsKHRoaXMpfTtcbmdnLnByb3RvdHlwZS5zZXRNYXA9ZnVuY3Rpb24oYSl7dGhpcy5nJiZNZih0aGlzLmVsZW1lbnQpO2Zvcih2YXIgYj0wLGM9dGhpcy5DLmxlbmd0aDtiPGM7KytiKXZjKHRoaXMuQ1tiXSk7dGhpcy5DLmxlbmd0aD0wO2lmKHRoaXMuZz1hKSh0aGlzLko/dGhpcy5KOmEuQikuYXBwZW5kQ2hpbGQodGhpcy5lbGVtZW50KSx0aGlzLnJlbmRlciE9PWxhJiZ0aGlzLkMucHVzaCh6KGEsXCJwb3N0cmVuZGVyXCIsdGhpcy5yZW5kZXIsdGhpcykpLGEucmVuZGVyKCl9O3ZhciBoZz1mdW5jdGlvbigpe3ZhciBhLGI9e307cmV0dXJuIGZ1bmN0aW9uKGMpe2F8fChhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikuc3R5bGUpO2lmKCEoYyBpbiBiKSl7YS5mb250PWM7dmFyIGQ9YS5mb250RmFtaWx5O2EuZm9udD1cIlwiO2lmKCFkKXJldHVybiBudWxsO2JbY109ZC5zcGxpdCgvLFxccz8vKX1yZXR1cm4gYltjXX19KCk7ZnVuY3Rpb24gaWcoYSl7dmFyIGI9WmEoe30sYSk7ZGVsZXRlIGIuc291cmNlO05mLmNhbGwodGhpcyxiKTt0aGlzLkM9dGhpcy5mPXRoaXMuZz1udWxsO2EubWFwJiZ0aGlzLnNldE1hcChhLm1hcCk7eih0aGlzLFBjKFwic291cmNlXCIpLHRoaXMuJGcsdGhpcyk7dGhpcy5sZihhLnNvdXJjZT9hLnNvdXJjZTpudWxsKX12KGlnLE5mKTtmdW5jdGlvbiBiZyhhLGIpe3JldHVybiBhLnZpc2libGUmJmI+PWEubWluUmVzb2x1dGlvbiYmYjxhLm1heFJlc29sdXRpb259bD1pZy5wcm90b3R5cGU7bC5aYz1mdW5jdGlvbihhKXthPWE/YTpbXTthLnB1c2goT2YodGhpcykpO3JldHVybiBhfTtsLiQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJzb3VyY2VcIil8fG51bGx9O2wuYmQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLiQoKTtyZXR1cm4gYT9hLnhhOlwidW5kZWZpbmVkXCJ9O2wuWmc9ZnVuY3Rpb24oKXt0aGlzLmMoKX07XG5sLiRnPWZ1bmN0aW9uKCl7dGhpcy5DJiYodmModGhpcy5DKSx0aGlzLkM9bnVsbCk7dmFyIGE9dGhpcy4kKCk7YSYmKHRoaXMuQz16KGEsXCJjaGFuZ2VcIix0aGlzLlpnLHRoaXMpKTt0aGlzLmMoKX07bC5zZXRNYXA9ZnVuY3Rpb24oYSl7dGhpcy5nJiYodmModGhpcy5nKSx0aGlzLmc9bnVsbCk7YXx8dGhpcy5jKCk7dGhpcy5mJiYodmModGhpcy5mKSx0aGlzLmY9bnVsbCk7YSYmKHRoaXMuZz16KGEsXCJwcmVjb21wb3NlXCIsZnVuY3Rpb24oYSl7dmFyIGI9T2YodGhpcyk7Yi5mZD0hMTtiLnpJbmRleD1JbmZpbml0eTthLmZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNBcnJheS5wdXNoKGIpO2EuZnJhbWVTdGF0ZS5sYXllclN0YXRlc1t3KHRoaXMpXT1ifSx0aGlzKSx0aGlzLmY9eih0aGlzLFwiY2hhbmdlXCIsYS5yZW5kZXIsYSksdGhpcy5jKCkpfTtsLmxmPWZ1bmN0aW9uKGEpe3RoaXMuc2V0KFwic291cmNlXCIsYSl9O2Z1bmN0aW9uIGpnKGEpe2E9YT9hOnt9O3RoaXMuaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiVUxcIik7dGhpcy5mPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJMSVwiKTt0aGlzLmkuYXBwZW5kQ2hpbGQodGhpcy5mKTt0aGlzLmYuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjt0aGlzLmE9dm9pZCAwIT09YS5jb2xsYXBzZWQ/YS5jb2xsYXBzZWQ6ITA7dGhpcy5iPXZvaWQgMCE9PWEuY29sbGFwc2libGU/YS5jb2xsYXBzaWJsZTohMDt0aGlzLmJ8fCh0aGlzLmE9ITEpO3ZhciBiPXZvaWQgMCE9PWEuY2xhc3NOYW1lP2EuY2xhc3NOYW1lOlwib2wtYXR0cmlidXRpb25cIixjPXZvaWQgMCE9PWEudGlwTGFiZWw/YS50aXBMYWJlbDpcIkF0dHJpYnV0aW9uc1wiLGQ9dm9pZCAwIT09YS5jb2xsYXBzZUxhYmVsP2EuY29sbGFwc2VMYWJlbDpcIlxcdTAwYmJcIjtcInN0cmluZ1wiPT09dHlwZW9mIGQ/KHRoaXMubz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSx0aGlzLm8udGV4dENvbnRlbnQ9ZCk6dGhpcy5vPVxuZDtkPXZvaWQgMCE9PWEubGFiZWw/YS5sYWJlbDpcImlcIjtcInN0cmluZ1wiPT09dHlwZW9mIGQ/KHRoaXMuQj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSx0aGlzLkIudGV4dENvbnRlbnQ9ZCk6dGhpcy5CPWQ7dmFyIGU9dGhpcy5iJiYhdGhpcy5hP3RoaXMubzp0aGlzLkI7ZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2Quc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiYnV0dG9uXCIpO2QudGl0bGU9YztkLmFwcGVuZENoaWxkKGUpO3ooZCxcImNsaWNrXCIsdGhpcy5NLHRoaXMpO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjLmNsYXNzTmFtZT1iK1wiIG9sLXVuc2VsZWN0YWJsZSBvbC1jb250cm9sXCIrKHRoaXMuYSYmdGhpcy5iP1wiIG9sLWNvbGxhcHNlZFwiOlwiXCIpKyh0aGlzLmI/XCJcIjpcIiBvbC11bmNvbGxhcHNpYmxlXCIpO2MuYXBwZW5kQ2hpbGQodGhpcy5pKTtjLmFwcGVuZENoaWxkKGQpO2dnLmNhbGwodGhpcyx7ZWxlbWVudDpjLHJlbmRlcjphLnJlbmRlcj9cbmEucmVuZGVyOmtnLHRhcmdldDphLnRhcmdldH0pO3RoaXMuQT1bXTt0aGlzLnU9ITA7dGhpcy5LPXt9fXYoamcsZ2cpO1xuZnVuY3Rpb24ga2coYSl7aWYoYT1hLmZyYW1lU3RhdGUpe2Zvcih2YXIgYj17fSxjPVtdLGQ9YS5sYXllclN0YXRlc0FycmF5LGU9YS52aWV3U3RhdGUucmVzb2x1dGlvbixmPTAsZz1kLmxlbmd0aDtmPGc7KytmKXt2YXIgaD1kW2ZdO2lmKGJnKGgsZSkmJihoPWgubGF5ZXIuJCgpKSYmKGg9aC5lYSkmJihoPWgoYSkpKWlmKEFycmF5LmlzQXJyYXkoaCkpZm9yKHZhciBrPTAsbT1oLmxlbmd0aDtrPG07KytrKWhba11pbiBifHwoYy5wdXNoKGhba10pLGJbaFtrXV09ITApO2Vsc2UgaCBpbiBifHwoYy5wdXNoKGgpLGJbaF09ITApfWlmKCFWYihjLHRoaXMuQSkpe2Zvcig7dGhpcy5pLmxhc3RDaGlsZCE9PXRoaXMuZjspdGhpcy5pLnJlbW92ZUNoaWxkKHRoaXMuaS5sYXN0Q2hpbGQpO2I9MDtmb3IoZD1jLmxlbmd0aDtiPGQ7KytiKWU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkxJXCIpLGUuaW5uZXJIVE1MPWNbYl0sdGhpcy5pLmFwcGVuZENoaWxkKGUpOzA9PT1jLmxlbmd0aCYmMDxcbnRoaXMuQS5sZW5ndGg/dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvbC1sb2dvLW9ubHlcIik6MD09PXRoaXMuQS5sZW5ndGgmJjA8Yy5sZW5ndGgmJnRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwib2wtbG9nby1vbmx5XCIpO2I9MDxjLmxlbmd0aHx8IWRiKGEubG9nb3MpO3RoaXMudSE9YiYmKHRoaXMuZWxlbWVudC5zdHlsZS5kaXNwbGF5PWI/XCJcIjpcIm5vbmVcIix0aGlzLnU9Yik7dGhpcy5BPWM7YT1hLmxvZ29zO2M9dGhpcy5LO2ZvcihwIGluIGMpcCBpbiBhfHwoTWYoY1twXSksZGVsZXRlIGNbcF0pO2Zvcih2YXIgbiBpbiBhKWlmKGQ9YVtuXSxkIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJih0aGlzLmYuYXBwZW5kQ2hpbGQoZCksY1tuXT1kKSwhKG4gaW4gYykpe3ZhciBwPW5ldyBJbWFnZTtwLnNyYz1uO1wiXCI9PT1kP2I9cDooYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYVwiKSxiLmhyZWY9ZCxiLmFwcGVuZENoaWxkKHApKTt0aGlzLmYuYXBwZW5kQ2hpbGQoYik7Y1tuXT1cbmJ9dGhpcy5mLnN0eWxlLmRpc3BsYXk9ZGIoYSk/XCJub25lXCI6XCJcIn19ZWxzZSB0aGlzLnUmJih0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnU9ITEpfWpnLnByb3RvdHlwZS5NPWZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTtsZyh0aGlzKX07ZnVuY3Rpb24gbGcoYSl7YS5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJvbC1jb2xsYXBzZWRcIik7aWYoYS5hKXt2YXIgYj1hLkIsYz1iLnBhcmVudE5vZGU7YyYmYy5yZXBsYWNlQ2hpbGQoYS5vLGIpfWVsc2UgYj1hLm8sKGM9Yi5wYXJlbnROb2RlKSYmYy5yZXBsYWNlQ2hpbGQoYS5CLGIpO2EuYT0hYS5hfWpnLnByb3RvdHlwZS5lYT1mdW5jdGlvbihhKXt0aGlzLmIhPT1hJiYodGhpcy5iPWEsdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJvbC11bmNvbGxhcHNpYmxlXCIpLCFhJiZ0aGlzLmEmJmxnKHRoaXMpKX07XG5qZy5wcm90b3R5cGUuWD1mdW5jdGlvbihhKXt0aGlzLmImJnRoaXMuYSE9PWEmJmxnKHRoaXMpfTtmdW5jdGlvbiBtZyhhKXthPWE/YTp7fTt2YXIgYj12b2lkIDAhPT1hLmNsYXNzTmFtZT9hLmNsYXNzTmFtZTpcIm9sLXJvdGF0ZVwiLGM9dm9pZCAwIT09YS5sYWJlbD9hLmxhYmVsOlwiXFx1MjFlN1wiO3RoaXMuYT1udWxsO1wic3RyaW5nXCI9PT10eXBlb2YgYz8odGhpcy5hPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuYS5jbGFzc05hbWU9XCJvbC1jb21wYXNzXCIsdGhpcy5hLnRleHRDb250ZW50PWMpOih0aGlzLmE9Yyx0aGlzLmEuY2xhc3NMaXN0LmFkZChcIm9sLWNvbXBhc3NcIikpO3ZhciBkPWEudGlwTGFiZWw/YS50aXBMYWJlbDpcIlJlc2V0IHJvdGF0aW9uXCI7Yz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2MuY2xhc3NOYW1lPWIrXCItcmVzZXRcIjtjLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImJ1dHRvblwiKTtjLnRpdGxlPWQ7Yy5hcHBlbmRDaGlsZCh0aGlzLmEpO3ooYyxcImNsaWNrXCIsbWcucHJvdG90eXBlLkIsdGhpcyk7ZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuZC5jbGFzc05hbWU9YitcIiBvbC11bnNlbGVjdGFibGUgb2wtY29udHJvbFwiO2QuYXBwZW5kQ2hpbGQoYyk7Yj1hLnJlbmRlcj9hLnJlbmRlcjpuZzt0aGlzLmY9YS5yZXNldE5vcnRoP2EucmVzZXROb3J0aDp2b2lkIDA7Z2cuY2FsbCh0aGlzLHtlbGVtZW50OmQscmVuZGVyOmIsdGFyZ2V0OmEudGFyZ2V0fSk7dGhpcy5pPXZvaWQgMCE9PWEuZHVyYXRpb24/YS5kdXJhdGlvbjoyNTA7dGhpcy5iPXZvaWQgMCE9PWEuYXV0b0hpZGU/YS5hdXRvSGlkZTohMDt0aGlzLm89dm9pZCAwO3RoaXMuYiYmdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvbC1oaWRkZW5cIil9dihtZyxnZyk7bWcucHJvdG90eXBlLkI9ZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpO3ZvaWQgMCE9PXRoaXMuZj90aGlzLmYoKTooYT10aGlzLmcuWigpKSYmdm9pZCAwIT09d2YoYSkmJigwPHRoaXMuaT9hLmFuaW1hdGUoe3JvdGF0aW9uOjAsZHVyYXRpb246dGhpcy5pLGVhc2luZzp4ZX0pOnlmKGEsMCkpfTtcbmZ1bmN0aW9uIG5nKGEpe2lmKGE9YS5mcmFtZVN0YXRlKXthPWEudmlld1N0YXRlLnJvdGF0aW9uO2lmKGEhPXRoaXMubyl7dmFyIGI9XCJyb3RhdGUoXCIrYStcInJhZClcIjtpZih0aGlzLmIpe3ZhciBjPXRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJvbC1oaWRkZW5cIik7Y3x8MCE9PWE/YyYmMCE9PWEmJnRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwib2wtaGlkZGVuXCIpOnRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib2wtaGlkZGVuXCIpfXRoaXMuYS5zdHlsZS5tc1RyYW5zZm9ybT1iO3RoaXMuYS5zdHlsZS53ZWJraXRUcmFuc2Zvcm09Yjt0aGlzLmEuc3R5bGUudHJhbnNmb3JtPWJ9dGhpcy5vPWF9fTtmdW5jdGlvbiBvZyhhKXthPWE/YTp7fTt2YXIgYj12b2lkIDAhPT1hLmNsYXNzTmFtZT9hLmNsYXNzTmFtZTpcIm9sLXpvb21cIixjPXZvaWQgMCE9PWEuZGVsdGE/YS5kZWx0YToxLGQ9dm9pZCAwIT09YS56b29tSW5MYWJlbD9hLnpvb21JbkxhYmVsOlwiK1wiLGU9dm9pZCAwIT09YS56b29tT3V0TGFiZWw/YS56b29tT3V0TGFiZWw6XCJcXHUyMjEyXCIsZj12b2lkIDAhPT1hLnpvb21JblRpcExhYmVsP2Euem9vbUluVGlwTGFiZWw6XCJab29tIGluXCIsZz12b2lkIDAhPT1hLnpvb21PdXRUaXBMYWJlbD9hLnpvb21PdXRUaXBMYWJlbDpcIlpvb20gb3V0XCIsaD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2guY2xhc3NOYW1lPWIrXCItaW5cIjtoLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImJ1dHRvblwiKTtoLnRpdGxlPWY7aC5hcHBlbmRDaGlsZChcInN0cmluZ1wiPT09dHlwZW9mIGQ/ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZCk6ZCk7eihoLFwiY2xpY2tcIixvZy5wcm90b3R5cGUuYi5iaW5kKHRoaXMsXG5jKSk7ZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2QuY2xhc3NOYW1lPWIrXCItb3V0XCI7ZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJidXR0b25cIik7ZC50aXRsZT1nO2QuYXBwZW5kQ2hpbGQoXCJzdHJpbmdcIj09PXR5cGVvZiBlP2RvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUpOmUpO3ooZCxcImNsaWNrXCIsb2cucHJvdG90eXBlLmIuYmluZCh0aGlzLC1jKSk7Yz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuY2xhc3NOYW1lPWIrXCIgb2wtdW5zZWxlY3RhYmxlIG9sLWNvbnRyb2xcIjtjLmFwcGVuZENoaWxkKGgpO2MuYXBwZW5kQ2hpbGQoZCk7Z2cuY2FsbCh0aGlzLHtlbGVtZW50OmMsdGFyZ2V0OmEudGFyZ2V0fSk7dGhpcy5hPXZvaWQgMCE9PWEuZHVyYXRpb24/YS5kdXJhdGlvbjoyNTB9dihvZyxnZyk7XG5vZy5wcm90b3R5cGUuYj1mdW5jdGlvbihhLGIpe2IucHJldmVudERlZmF1bHQoKTtpZihiPXRoaXMuZy5aKCkpe3ZhciBjPWIuemEoKTtjJiYoYT1iLmNvbnN0cmFpblJlc29sdXRpb24oYyxhKSwwPHRoaXMuYT8oMDxiLmFbMF0mJnpmKGIpLGIuYW5pbWF0ZSh7cmVzb2x1dGlvbjphLGR1cmF0aW9uOnRoaXMuYSxlYXNpbmc6eGV9KSk6S2YoYixhKSl9fTtmdW5jdGlvbiBwZyhhKXthPWE/YTp7fTt2YXIgYj1uZXcgU2M7KHZvaWQgMCE9PWEuem9vbT9hLnpvb206MSkmJmIucHVzaChuZXcgb2coYS56b29tT3B0aW9ucykpOyh2b2lkIDAhPT1hLnJvdGF0ZT9hLnJvdGF0ZToxKSYmYi5wdXNoKG5ldyBtZyhhLnJvdGF0ZU9wdGlvbnMpKTsodm9pZCAwIT09YS5hdHRyaWJ1dGlvbj9hLmF0dHJpYnV0aW9uOjEpJiZiLnB1c2gobmV3IGpnKGEuYXR0cmlidXRpb25PcHRpb25zKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIHFnKCl7dGhpcy5hPVtdO3RoaXMuYz10aGlzLmw9MH1mdW5jdGlvbiByZyhhKXthLmEubGVuZ3RoPTA7YS5sPTA7YS5jPTB9ZnVuY3Rpb24gc2coYSl7aWYoNj5hLmEubGVuZ3RoKXJldHVybiExO3ZhciBiPURhdGUubm93KCktMTAwLGM9YS5hLmxlbmd0aC0zO2lmKGEuYVtjKzJdPGIpcmV0dXJuITE7Zm9yKHZhciBkPWMtMzswPGQmJmEuYVtkKzJdPmI7KWQtPTM7Yj1hLmFbYysyXS1hLmFbZCsyXTtpZihiPDFFMy82MClyZXR1cm4hMTt2YXIgZT1hLmFbY10tYS5hW2RdO2M9YS5hW2MrMV0tYS5hW2QrMV07YS5sPU1hdGguYXRhbjIoYyxlKTthLmM9TWF0aC5zcXJ0KGUqZStjKmMpL2I7cmV0dXJuLjA1PGEuY307ZnVuY3Rpb24gdGcoYSl7TmMuY2FsbCh0aGlzKTt0aGlzLkM9bnVsbDt0aGlzLmdiKCEwKTt0aGlzLmhhbmRsZUV2ZW50PWEuaGFuZGxlRXZlbnR9dih0ZyxOYyk7dGcucHJvdG90eXBlLmdiPWZ1bmN0aW9uKGEpe3RoaXMuc2V0KFwiYWN0aXZlXCIsYSl9O3RnLnByb3RvdHlwZS5zZXRNYXA9ZnVuY3Rpb24oYSl7dGhpcy5DPWF9O2Z1bmN0aW9uIHVnKGEsYixjLGQpe2lmKHZvaWQgMCE9PWIpe3ZhciBlPXdmKGEpLGY9YS5qYSgpO3ZvaWQgMCE9PWUmJmYmJjA8ZD9hLmFuaW1hdGUoe3JvdGF0aW9uOmIsYW5jaG9yOmMsZHVyYXRpb246ZCxlYXNpbmc6eGV9KTphLnJvdGF0ZShiLGMpfX1cbmZ1bmN0aW9uIHZnKGEsYixjLGQpe3ZhciBlPWEuemEoKTtiPWEuY29uc3RyYWluUmVzb2x1dGlvbihlLGIsMCk7aWYoYyYmdm9pZCAwIT09YiYmYiE9PWUpe3ZhciBmPWEuamEoKTtjPUFmKGEsYixjKTtjPWEuYi5jZW50ZXIoYyk7Yz1bKGIqZlswXS1lKmNbMF0pLyhiLWUpLChiKmZbMV0tZSpjWzFdKS8oYi1lKV19d2coYSxiLGMsZCl9ZnVuY3Rpb24gd2coYSxiLGMsZCl7aWYoYil7dmFyIGU9YS56YSgpLGY9YS5qYSgpO3ZvaWQgMCE9PWUmJmYmJmIhPT1lJiZkP2EuYW5pbWF0ZSh7cmVzb2x1dGlvbjpiLGFuY2hvcjpjLGR1cmF0aW9uOmQsZWFzaW5nOnhlfSk6KGMmJihjPUFmKGEsYixjKSxhLk9hKGMpKSxLZihhLGIpKX19O2Z1bmN0aW9uIHhnKGEpe2E9YT9hOnt9O3RoaXMuYT1hLmRlbHRhP2EuZGVsdGE6MTt0Zy5jYWxsKHRoaXMse2hhbmRsZUV2ZW50OnlnfSk7dGhpcy5iPXZvaWQgMCE9PWEuZHVyYXRpb24/YS5kdXJhdGlvbjoyNTB9dih4Zyx0Zyk7ZnVuY3Rpb24geWcoYSl7dmFyIGI9ITEsYz1hLm9yaWdpbmFsRXZlbnQ7aWYoXCJkYmxjbGlja1wiPT1hLnR5cGUpe2I9YS5jb29yZGluYXRlO2M9Yy5zaGlmdEtleT8tdGhpcy5hOnRoaXMuYTt2YXIgZD1hLm1hcC5aKCk7dmcoZCxjLGIsdGhpcy5iKTthLnByZXZlbnREZWZhdWx0KCk7Yj0hMH1yZXR1cm4hYn07ZnVuY3Rpb24gemcoYSl7YT1hLm9yaWdpbmFsRXZlbnQ7cmV0dXJuIGEuYWx0S2V5JiYhKGEubWV0YUtleXx8YS5jdHJsS2V5KSYmYS5zaGlmdEtleX1mdW5jdGlvbiBBZyhhKXthPWEub3JpZ2luYWxFdmVudDtyZXR1cm4gMD09YS5idXR0b24mJiEoaGQmJmlkJiZhLmN0cmxLZXkpfWZ1bmN0aW9uIEJnKGEpe3JldHVyblwic2luZ2xlY2xpY2tcIj09YS50eXBlfWZ1bmN0aW9uIENnKGEpe2E9YS5vcmlnaW5hbEV2ZW50O3JldHVybiFhLmFsdEtleSYmIShhLm1ldGFLZXl8fGEuY3RybEtleSkmJiFhLnNoaWZ0S2V5fWZ1bmN0aW9uIERnKGEpe2E9YS5vcmlnaW5hbEV2ZW50O3JldHVybiFhLmFsdEtleSYmIShhLm1ldGFLZXl8fGEuY3RybEtleSkmJmEuc2hpZnRLZXl9ZnVuY3Rpb24gRWcoYSl7YT1hLm9yaWdpbmFsRXZlbnQudGFyZ2V0LnRhZ05hbWU7cmV0dXJuXCJJTlBVVFwiIT09YSYmXCJTRUxFQ1RcIiE9PWEmJlwiVEVYVEFSRUFcIiE9PWF9XG5mdW5jdGlvbiBGZyhhKXt4KGEuYSw1Nik7cmV0dXJuXCJtb3VzZVwiPT1hLmEucG9pbnRlclR5cGV9ZnVuY3Rpb24gR2coYSl7YT1hLmE7cmV0dXJuIGEuaXNQcmltYXJ5JiYwPT09YS5idXR0b259O2Z1bmN0aW9uIEhnKGEpe2E9YT9hOnt9O3RnLmNhbGwodGhpcyx7aGFuZGxlRXZlbnQ6YS5oYW5kbGVFdmVudD9hLmhhbmRsZUV2ZW50OklnfSk7dGhpcy5KYz1hLmhhbmRsZURvd25FdmVudD9hLmhhbmRsZURvd25FdmVudDpIZTt0aGlzLmVnPWEuaGFuZGxlRHJhZ0V2ZW50P2EuaGFuZGxlRHJhZ0V2ZW50OmxhO3RoaXMuZmc9YS5oYW5kbGVNb3ZlRXZlbnQ/YS5oYW5kbGVNb3ZlRXZlbnQ6bGE7dGhpcy5wZz1hLmhhbmRsZVVwRXZlbnQ/YS5oYW5kbGVVcEV2ZW50OkhlO3RoaXMuQj0hMTt0aGlzLlg9e307dGhpcy5nPVtdfXYoSGcsdGcpO2Z1bmN0aW9uIEpnKGEpe2Zvcih2YXIgYj1hLmxlbmd0aCxjPTAsZD0wLGU9MDtlPGI7ZSsrKWMrPWFbZV0uY2xpZW50WCxkKz1hW2VdLmNsaWVudFk7cmV0dXJuW2MvYixkL2JdfVxuZnVuY3Rpb24gSWcoYSl7aWYoIShhIGluc3RhbmNlb2YgcWQpKXJldHVybiEwO3ZhciBiPSExLGM9YS50eXBlO2lmKFwicG9pbnRlcmRvd25cIj09PWN8fFwicG9pbnRlcmRyYWdcIj09PWN8fFwicG9pbnRlcnVwXCI9PT1jKXtjPWEuYTt2YXIgZD1jLnBvaW50ZXJJZC50b1N0cmluZygpO1wicG9pbnRlcnVwXCI9PWEudHlwZT9kZWxldGUgdGhpcy5YW2RdOlwicG9pbnRlcmRvd25cIj09YS50eXBlP3RoaXMuWFtkXT1jOmQgaW4gdGhpcy5YJiYodGhpcy5YW2RdPWMpO3RoaXMuZz1jYih0aGlzLlgpfXRoaXMuQj9cInBvaW50ZXJkcmFnXCI9PWEudHlwZT90aGlzLmVnKGEpOlwicG9pbnRlcnVwXCI9PWEudHlwZSYmKHRoaXMuQj10aGlzLnBnKGEpJiYwPHRoaXMuZy5sZW5ndGgpOlwicG9pbnRlcmRvd25cIj09YS50eXBlPyh0aGlzLkI9YT10aGlzLkpjKGEpLGI9dGhpcy5tYihhKSk6XCJwb2ludGVybW92ZVwiPT1hLnR5cGUmJnRoaXMuZmcoYSk7cmV0dXJuIWJ9SGcucHJvdG90eXBlLm1iPWZ1bmN0aW9uKGEpe3JldHVybiBhfTtmdW5jdGlvbiBLZyhhKXtIZy5jYWxsKHRoaXMse2hhbmRsZURvd25FdmVudDpMZyxoYW5kbGVEcmFnRXZlbnQ6TWcsaGFuZGxlVXBFdmVudDpOZ30pO2E9YT9hOnt9O3RoaXMuYT1hLmtpbmV0aWM7dGhpcy5iPW51bGw7dGhpcy5vPWEuY29uZGl0aW9uP2EuY29uZGl0aW9uOkNnO3RoaXMuZj0hMX12KEtnLEhnKTtmdW5jdGlvbiBNZyhhKXt2YXIgYj10aGlzLmcsYz1KZyhiKTtpZihiLmxlbmd0aD09dGhpcy5pKXtpZih0aGlzLmEmJnRoaXMuYS5hLnB1c2goY1swXSxjWzFdLERhdGUubm93KCkpLHRoaXMuYil7dmFyIGQ9dGhpcy5iWzBdLWNbMF0sZT1jWzFdLXRoaXMuYlsxXTthPWEubWFwLlooKTt2YXIgZj1KZihhKTtkPVtkLGVdO3RlKGQsZi5yZXNvbHV0aW9uKTtzZShkLGYucm90YXRpb24pO29lKGQsZi5jZW50ZXIpO2Q9YS5iLmNlbnRlcihkKTthLk9hKGQpfX1lbHNlIHRoaXMuYSYmcmcodGhpcy5hKTt0aGlzLmI9Yzt0aGlzLmk9Yi5sZW5ndGh9XG5mdW5jdGlvbiBOZyhhKXt2YXIgYj1hLm1hcDthPWIuWigpO2lmKDA9PT10aGlzLmcubGVuZ3RoKXtpZighdGhpcy5mJiZ0aGlzLmEmJnNnKHRoaXMuYSkpe3ZhciBjPSguMDUtdGhpcy5hLmMpLy0uMDA1O3ZhciBkPXRoaXMuYS5sLGU9YS5qYSgpO2U9ZWcoYixlKTtiPWIuSmEoW2VbMF0tYypNYXRoLmNvcyhkKSxlWzFdLWMqTWF0aC5zaW4oZCldKTthLmFuaW1hdGUoe2NlbnRlcjphLmIuY2VudGVyKGIpLGR1cmF0aW9uOjUwMCxlYXNpbmc6eGV9KX14ZihhLDEsLTEpO3JldHVybiExfXRoaXMuYSYmcmcodGhpcy5hKTt0aGlzLmI9bnVsbDtyZXR1cm4hMH1cbmZ1bmN0aW9uIExnKGEpe2lmKDA8dGhpcy5nLmxlbmd0aCYmdGhpcy5vKGEpKXt2YXIgYj1hLm1hcC5aKCk7dGhpcy5iPW51bGw7dGhpcy5CfHx4ZihiLDEsMSk7MDxiLmFbMF0mJmIuT2EoYS5mcmFtZVN0YXRlLnZpZXdTdGF0ZS5jZW50ZXIpO3RoaXMuYSYmcmcodGhpcy5hKTt0aGlzLmY9MTx0aGlzLmcubGVuZ3RoO3JldHVybiEwfXJldHVybiExfUtnLnByb3RvdHlwZS5tYj1IZTtmdW5jdGlvbiBPZyhhKXthPWE/YTp7fTtIZy5jYWxsKHRoaXMse2hhbmRsZURvd25FdmVudDpQZyxoYW5kbGVEcmFnRXZlbnQ6UWcsaGFuZGxlVXBFdmVudDpSZ30pO3RoaXMuYj1hLmNvbmRpdGlvbj9hLmNvbmRpdGlvbjp6Zzt0aGlzLmE9dm9pZCAwO3RoaXMuZj12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246MjUwfXYoT2csSGcpO2Z1bmN0aW9uIFFnKGEpe2lmKEZnKGEpKXt2YXIgYj1hLm1hcCxjPWIuWigpO2lmKGMuYi5yb3RhdGlvbiE9PWplKXtiPWIud2IoKTthPWEucGl4ZWw7YT1NYXRoLmF0YW4yKGJbMV0vMi1hWzFdLGFbMF0tYlswXS8yKTtpZih2b2lkIDAhPT10aGlzLmEpe2I9YS10aGlzLmE7dmFyIGQ9d2YoYyk7dWcoYyxkLWIpfXRoaXMuYT1hfX19XG5mdW5jdGlvbiBSZyhhKXtpZighRmcoYSkpcmV0dXJuITA7YT1hLm1hcC5aKCk7eGYoYSwxLC0xKTt2YXIgYj13ZihhKSxjPXRoaXMuZjtiPWEuY29uc3RyYWluUm90YXRpb24oYiwwKTt1ZyhhLGIsdm9pZCAwLGMpO3JldHVybiExfWZ1bmN0aW9uIFBnKGEpe3JldHVybiBGZyhhKSYmQWcoYSkmJnRoaXMuYihhKT8oeGYoYS5tYXAuWigpLDEsMSksdGhpcy5hPXZvaWQgMCwhMCk6ITF9T2cucHJvdG90eXBlLm1iPUhlO2Z1bmN0aW9uIFNnKGEpe3RoaXMuYmI9bnVsbDt0aGlzLmM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0aGlzLmMuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiO3RoaXMuYy5jbGFzc05hbWU9XCJvbC1ib3ggXCIrYTt0aGlzLmw9dGhpcy5qPXRoaXMuYT1udWxsfXYoU2csQmMpO1NnLnByb3RvdHlwZS5jYT1mdW5jdGlvbigpe3RoaXMuc2V0TWFwKG51bGwpfTtmdW5jdGlvbiBUZyhhKXt2YXIgYj1hLmosYz1hLmw7YT1hLmMuc3R5bGU7YS5sZWZ0PU1hdGgubWluKGJbMF0sY1swXSkrXCJweFwiO2EudG9wPU1hdGgubWluKGJbMV0sY1sxXSkrXCJweFwiO2Eud2lkdGg9TWF0aC5hYnMoY1swXS1iWzBdKStcInB4XCI7YS5oZWlnaHQ9TWF0aC5hYnMoY1sxXS1iWzFdKStcInB4XCJ9XG5TZy5wcm90b3R5cGUuc2V0TWFwPWZ1bmN0aW9uKGEpe2lmKHRoaXMuYSl7dGhpcy5hLnUucmVtb3ZlQ2hpbGQodGhpcy5jKTt2YXIgYj10aGlzLmMuc3R5bGU7Yi5sZWZ0PWIudG9wPWIud2lkdGg9Yi5oZWlnaHQ9XCJpbmhlcml0XCJ9KHRoaXMuYT1hKSYmdGhpcy5hLnUuYXBwZW5kQ2hpbGQodGhpcy5jKX07ZnVuY3Rpb24gVWcoYSl7dmFyIGI9YS5qLGM9YS5sO2I9W2IsW2JbMF0sY1sxXV0sYyxbY1swXSxiWzFdXV0ubWFwKGEuYS5KYSxhLmEpO2JbNF09YlswXS5zbGljZSgpO2EuYmI/YS5iYi5ZKFtiXSk6YS5iYj1uZXcgQShbYl0pfVNnLnByb3RvdHlwZS5PPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmJ9O2Z1bmN0aW9uIFZnKGEpe0hnLmNhbGwodGhpcyx7aGFuZGxlRG93bkV2ZW50OldnLGhhbmRsZURyYWdFdmVudDpYZyxoYW5kbGVVcEV2ZW50OllnfSk7YT1hP2E6e307dGhpcy5hPW5ldyBTZyhhLmNsYXNzTmFtZXx8XCJvbC1kcmFnYm94XCIpO3RoaXMubz12b2lkIDAhPT1hLm1pbkFyZWE/YS5taW5BcmVhOjY0O3RoaXMuYj1udWxsO3RoaXMudT1hLmNvbmRpdGlvbj9hLmNvbmRpdGlvbjpHZTt0aGlzLmk9YS5ib3hFbmRDb25kaXRpb24/YS5ib3hFbmRDb25kaXRpb246Wmd9dihWZyxIZyk7ZnVuY3Rpb24gWmcoYSxiLGMpe2E9Y1swXS1iWzBdO2I9Y1sxXS1iWzFdO3JldHVybiBhKmErYipiPj10aGlzLm99ZnVuY3Rpb24gWGcoYSl7aWYoRmcoYSkpe3ZhciBiPXRoaXMuYSxjPWEucGl4ZWw7Yi5qPXRoaXMuYjtiLmw9YztVZyhiKTtUZyhiKTt0aGlzLmwobmV3ICRnKGFoLGEuY29vcmRpbmF0ZSxhKSl9fVZnLnByb3RvdHlwZS5PPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5PKCl9O1xuVmcucHJvdG90eXBlLmY9bGE7ZnVuY3Rpb24gWWcoYSl7aWYoIUZnKGEpKXJldHVybiEwO3RoaXMuYS5zZXRNYXAobnVsbCk7dGhpcy5pKGEsdGhpcy5iLGEucGl4ZWwpJiYodGhpcy5mKGEpLHRoaXMubChuZXcgJGcoYmgsYS5jb29yZGluYXRlLGEpKSk7cmV0dXJuITF9ZnVuY3Rpb24gV2coYSl7aWYoRmcoYSkmJkFnKGEpJiZ0aGlzLnUoYSkpe3RoaXMuYj1hLnBpeGVsO3RoaXMuYS5zZXRNYXAoYS5tYXApO3ZhciBiPXRoaXMuYSxjPXRoaXMuYjtiLmo9dGhpcy5iO2IubD1jO1VnKGIpO1RnKGIpO3RoaXMubChuZXcgJGcoY2gsYS5jb29yZGluYXRlLGEpKTtyZXR1cm4hMH1yZXR1cm4hMX12YXIgY2g9XCJib3hzdGFydFwiLGFoPVwiYm94ZHJhZ1wiLGJoPVwiYm94ZW5kXCI7ZnVuY3Rpb24gJGcoYSxiLGMpe0djLmNhbGwodGhpcyxhKTt0aGlzLmNvb3JkaW5hdGU9Yjt0aGlzLm1hcEJyb3dzZXJFdmVudD1jfXYoJGcsR2MpO2Z1bmN0aW9uIGRoKGEpe2E9YT9hOnt9O3ZhciBiPWEuY29uZGl0aW9uP2EuY29uZGl0aW9uOkRnO3RoaXMuQT12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246MjAwO3RoaXMuSj12b2lkIDAhPT1hLm91dD9hLm91dDohMTtWZy5jYWxsKHRoaXMse2NvbmRpdGlvbjpiLGNsYXNzTmFtZTphLmNsYXNzTmFtZXx8XCJvbC1kcmFnem9vbVwifSl9dihkaCxWZyk7XG5kaC5wcm90b3R5cGUuZj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuQyxiPWEuWigpLGM9YS53YigpLGQ9dGhpcy5PKCkuSSgpO2lmKHRoaXMuSil7dmFyIGU9Yi5TZChjKTtkPVtlZyhhLFFhKGQpKSxlZyhhLFtkWzJdLGRbM11dKV07YT1LYSh2b2lkIDApO3ZhciBmO3ZhciBnPTA7Zm9yKGY9ZC5sZW5ndGg7ZzxmOysrZylEYShhLGRbZ10pO2E9MS9JZihiLGEsYyk7ZD0oZVsyXS1lWzBdKS8yKihhLTEpO2E9KGVbM10tZVsxXSkvMiooYS0xKTtlWzBdLT1kO2VbMl0rPWQ7ZVsxXS09YTtlWzNdKz1hO2Q9ZX1jPWIuY29uc3RyYWluUmVzb2x1dGlvbihJZihiLGQsYykpO2U9UmEoZCk7ZT1iLmIuY2VudGVyKGUpO2IuYW5pbWF0ZSh7cmVzb2x1dGlvbjpjLGNlbnRlcjplLGR1cmF0aW9uOnRoaXMuQSxlYXNpbmc6eGV9KX07ZnVuY3Rpb24gZWgoYSl7dGcuY2FsbCh0aGlzLHtoYW5kbGVFdmVudDpmaH0pO2E9YXx8e307dGhpcy5hPWZ1bmN0aW9uKGEpe3JldHVybiBDZyhhKSYmRWcoYSl9O3RoaXMuYj12b2lkIDAhPT1hLmNvbmRpdGlvbj9hLmNvbmRpdGlvbjp0aGlzLmE7dGhpcy5nPXZvaWQgMCE9PWEuZHVyYXRpb24/YS5kdXJhdGlvbjoxMDA7dGhpcy5mPXZvaWQgMCE9PWEucGl4ZWxEZWx0YT9hLnBpeGVsRGVsdGE6MTI4fXYoZWgsdGcpO1xuZnVuY3Rpb24gZmgoYSl7dmFyIGI9ITE7aWYoXCJrZXlkb3duXCI9PWEudHlwZSl7dmFyIGM9YS5vcmlnaW5hbEV2ZW50LmtleUNvZGU7aWYodGhpcy5iKGEpJiYoNDA9PWN8fDM3PT1jfHwzOT09Y3x8Mzg9PWMpKXtiPWEubWFwLlooKTt2YXIgZD1iLnphKCkqdGhpcy5mLGU9MCxmPTA7NDA9PWM/Zj0tZDozNz09Yz9lPS1kOjM5PT1jP2U9ZDpmPWQ7ZD1bZSxmXTtzZShkLHdmKGIpKTtjPXRoaXMuZztpZihlPWIuamEoKSlkPWIuYi5jZW50ZXIoW2VbMF0rZFswXSxlWzFdK2RbMV1dKSxjP2IuYW5pbWF0ZSh7ZHVyYXRpb246YyxlYXNpbmc6RmUsY2VudGVyOmR9KTpiLk9hKGQpO2EucHJldmVudERlZmF1bHQoKTtiPSEwfX1yZXR1cm4hYn07ZnVuY3Rpb24gZ2goYSl7dGcuY2FsbCh0aGlzLHtoYW5kbGVFdmVudDpoaH0pO2E9YT9hOnt9O3RoaXMuYj1hLmNvbmRpdGlvbj9hLmNvbmRpdGlvbjpFZzt0aGlzLmE9YS5kZWx0YT9hLmRlbHRhOjE7dGhpcy5nPXZvaWQgMCE9PWEuZHVyYXRpb24/YS5kdXJhdGlvbjoxMDB9dihnaCx0Zyk7ZnVuY3Rpb24gaGgoYSl7dmFyIGI9ITE7aWYoXCJrZXlkb3duXCI9PWEudHlwZXx8XCJrZXlwcmVzc1wiPT1hLnR5cGUpe3ZhciBjPWEub3JpZ2luYWxFdmVudC5jaGFyQ29kZTshdGhpcy5iKGEpfHw0MyE9YyYmNDUhPWN8fChiPTQzPT1jP3RoaXMuYTotdGhpcy5hLGM9YS5tYXAuWigpLHZnKGMsYix2b2lkIDAsdGhpcy5nKSxhLnByZXZlbnREZWZhdWx0KCksYj0hMCl9cmV0dXJuIWJ9O2Z1bmN0aW9uIGloKGEpe3RnLmNhbGwodGhpcyx7aGFuZGxlRXZlbnQ6amh9KTthPWF8fHt9O3RoaXMuZz0wO3RoaXMuQj12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246MjUwO3RoaXMuSz12b2lkIDAhPT1hLnRpbWVvdXQ/YS50aW1lb3V0OjgwO3RoaXMuTT12b2lkIDAhPT1hLnVzZUFuY2hvcj9hLnVzZUFuY2hvcjohMDt0aGlzLko9YS5jb25zdHJhaW5SZXNvbHV0aW9ufHwhMTt0aGlzLmE9bnVsbDt0aGlzLmk9dGhpcy5mPXRoaXMubz10aGlzLmI9dm9pZCAwfXYoaWgsdGcpO1xuZnVuY3Rpb24gamgoYSl7dmFyIGI9YS50eXBlO2lmKFwid2hlZWxcIiE9PWImJlwibW91c2V3aGVlbFwiIT09YilyZXR1cm4hMDthLnByZXZlbnREZWZhdWx0KCk7Yj1hLm1hcDt2YXIgYz1hLm9yaWdpbmFsRXZlbnQ7dGhpcy5NJiYodGhpcy5hPWEuY29vcmRpbmF0ZSk7aWYoXCJ3aGVlbFwiPT1hLnR5cGUpe3ZhciBkPWMuZGVsdGFZO2ZkJiZjLmRlbHRhTW9kZT09PVdoZWVsRXZlbnQuRE9NX0RFTFRBX1BJWEVMJiYoZC89amQpO2MuZGVsdGFNb2RlPT09V2hlZWxFdmVudC5ET01fREVMVEFfTElORSYmKGQqPTQwKX1lbHNlXCJtb3VzZXdoZWVsXCI9PWEudHlwZSYmKGQ9LWMud2hlZWxEZWx0YVksZ2QmJihkLz0zKSk7aWYoMD09PWQpcmV0dXJuITE7YT1EYXRlLm5vdygpO3ZvaWQgMD09PXRoaXMuYiYmKHRoaXMuYj1hKTtpZighdGhpcy5mfHw0MDA8YS10aGlzLmIpdGhpcy5mPTQ+TWF0aC5hYnMoZCk/a2g6bGg7aWYodGhpcy5mPT09a2gpe2I9Yi5aKCk7dGhpcy5pP2NsZWFyVGltZW91dCh0aGlzLmkpOlxueGYoYiwxLDEpO3RoaXMuaT1zZXRUaW1lb3V0KHRoaXMudS5iaW5kKHRoaXMpLDQwMCk7Yz1iLnphKCkqTWF0aC5wb3coMixkLzMwMCk7dmFyIGU9Yi5CLGY9Yi5mLGc9MDtjPGU/KGM9TWF0aC5tYXgoYyxlLzEuNSksZz0xKTpjPmYmJihjPU1hdGgubWluKGMsMS41KmYpLGc9LTEpO2lmKHRoaXMuYSl7dmFyIGg9QWYoYixjLHRoaXMuYSk7Yi5PYShiLmIuY2VudGVyKGgpKX1LZihiLGMpOzA9PT1nJiZ0aGlzLkomJmIuYW5pbWF0ZSh7cmVzb2x1dGlvbjpiLmNvbnN0cmFpblJlc29sdXRpb24oYywwPGQ/LTE6MSksZWFzaW5nOnhlLGFuY2hvcjp0aGlzLmEsZHVyYXRpb246dGhpcy5CfSk7MDxnP2IuYW5pbWF0ZSh7cmVzb2x1dGlvbjplLGVhc2luZzp4ZSxhbmNob3I6dGhpcy5hLGR1cmF0aW9uOjUwMH0pOjA+ZyYmYi5hbmltYXRlKHtyZXNvbHV0aW9uOmYsZWFzaW5nOnhlLGFuY2hvcjp0aGlzLmEsZHVyYXRpb246NTAwfSk7dGhpcy5iPWE7cmV0dXJuITF9dGhpcy5nKz1kO2Q9TWF0aC5tYXgodGhpcy5LLVxuKGEtdGhpcy5iKSwwKTtjbGVhclRpbWVvdXQodGhpcy5vKTt0aGlzLm89c2V0VGltZW91dCh0aGlzLkEuYmluZCh0aGlzLGIpLGQpO3JldHVybiExfWloLnByb3RvdHlwZS51PWZ1bmN0aW9uKCl7dGhpcy5pPXZvaWQgMDt4Zih0aGlzLkMuWigpLDEsLTEpfTtpaC5wcm90b3R5cGUuQT1mdW5jdGlvbihhKXthPWEuWigpOzA8YS5hWzBdJiZ6ZihhKTt2ZyhhLC1yYSh0aGlzLmcsLTEsMSksdGhpcy5hLHRoaXMuQik7dGhpcy5mPXZvaWQgMDt0aGlzLmc9MDt0aGlzLmE9bnVsbDt0aGlzLm89dGhpcy5iPXZvaWQgMH07dmFyIGtoPVwidHJhY2twYWRcIixsaD1cIndoZWVsXCI7ZnVuY3Rpb24gbWgoYSl7SGcuY2FsbCh0aGlzLHtoYW5kbGVEb3duRXZlbnQ6bmgsaGFuZGxlRHJhZ0V2ZW50Om9oLGhhbmRsZVVwRXZlbnQ6cGh9KTthPWF8fHt9O3RoaXMuYj1udWxsO3RoaXMuZj12b2lkIDA7dGhpcy5hPSExO3RoaXMuaT0wO3RoaXMudT12b2lkIDAhPT1hLnRocmVzaG9sZD9hLnRocmVzaG9sZDouMzt0aGlzLm89dm9pZCAwIT09YS5kdXJhdGlvbj9hLmR1cmF0aW9uOjI1MH12KG1oLEhnKTtcbmZ1bmN0aW9uIG9oKGEpe3ZhciBiPTAsYz10aGlzLmdbMF0sZD10aGlzLmdbMV07Yz1NYXRoLmF0YW4yKGQuY2xpZW50WS1jLmNsaWVudFksZC5jbGllbnRYLWMuY2xpZW50WCk7dm9pZCAwIT09dGhpcy5mJiYoYj1jLXRoaXMuZix0aGlzLmkrPWIsIXRoaXMuYSYmTWF0aC5hYnModGhpcy5pKT50aGlzLnUmJih0aGlzLmE9ITApKTt0aGlzLmY9YzthPWEubWFwO2M9YS5aKCk7aWYoYy5iLnJvdGF0aW9uIT09amUpe2Q9YS5hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3ZhciBlPUpnKHRoaXMuZyk7ZVswXS09ZC5sZWZ0O2VbMV0tPWQudG9wO3RoaXMuYj1hLkphKGUpO3RoaXMuYSYmKGQ9d2YoYyksYS5yZW5kZXIoKSx1ZyhjLGQrYix0aGlzLmIpKX19XG5mdW5jdGlvbiBwaChhKXtpZigyPnRoaXMuZy5sZW5ndGgpe2E9YS5tYXAuWigpO3hmKGEsMSwtMSk7aWYodGhpcy5hKXt2YXIgYj13ZihhKSxjPXRoaXMuYixkPXRoaXMubztiPWEuY29uc3RyYWluUm90YXRpb24oYiwwKTt1ZyhhLGIsYyxkKX1yZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBuaChhKXtyZXR1cm4gMjw9dGhpcy5nLmxlbmd0aD8oYT1hLm1hcCx0aGlzLmI9bnVsbCx0aGlzLmY9dm9pZCAwLHRoaXMuYT0hMSx0aGlzLmk9MCx0aGlzLkJ8fHhmKGEuWigpLDEsMSksITApOiExfW1oLnByb3RvdHlwZS5tYj1IZTtmdW5jdGlvbiBxaChhKXtIZy5jYWxsKHRoaXMse2hhbmRsZURvd25FdmVudDpyaCxoYW5kbGVEcmFnRXZlbnQ6c2gsaGFuZGxlVXBFdmVudDp0aH0pO2E9YT9hOnt9O3RoaXMuaT1hLmNvbnN0cmFpblJlc29sdXRpb258fCExO3RoaXMuYj1udWxsO3RoaXMubz12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246NDAwO3RoaXMuYT12b2lkIDA7dGhpcy5mPTF9dihxaCxIZyk7XG5mdW5jdGlvbiBzaChhKXt2YXIgYj0xLGM9dGhpcy5nWzBdLGQ9dGhpcy5nWzFdLGU9Yy5jbGllbnRYLWQuY2xpZW50WDtjPWMuY2xpZW50WS1kLmNsaWVudFk7ZT1NYXRoLnNxcnQoZSplK2MqYyk7dm9pZCAwIT09dGhpcy5hJiYoYj10aGlzLmEvZSk7dGhpcy5hPWU7YT1hLm1hcDtlPWEuWigpO2Q9ZS56YSgpO3ZhciBmPWUuZixnPWUuQjtjPWQqYjtjPmY/KGI9Zi9kLGM9Zik6YzxnJiYoYj1nL2QsYz1nKTsxIT1iJiYodGhpcy5mPWIpO2I9YS5hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2Q9SmcodGhpcy5nKTtkWzBdLT1iLmxlZnQ7ZFsxXS09Yi50b3A7dGhpcy5iPWEuSmEoZCk7YS5yZW5kZXIoKTt3ZyhlLGMsdGhpcy5iKX1cbmZ1bmN0aW9uIHRoKGEpe2lmKDI+dGhpcy5nLmxlbmd0aCl7YT1hLm1hcC5aKCk7eGYoYSwxLC0xKTt2YXIgYj1hLnphKCk7aWYodGhpcy5pfHxiPGEuQnx8Yj5hLmYpe3ZhciBjPXRoaXMuYixkPXRoaXMubztiPWEuY29uc3RyYWluUmVzb2x1dGlvbihiLDAsdGhpcy5mLTEpO3dnKGEsYixjLGQpfXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIHJoKGEpe3JldHVybiAyPD10aGlzLmcubGVuZ3RoPyhhPWEubWFwLHRoaXMuYj1udWxsLHRoaXMuYT12b2lkIDAsdGhpcy5mPTEsdGhpcy5CfHx4ZihhLlooKSwxLDEpLCEwKTohMX1xaC5wcm90b3R5cGUubWI9SGU7ZnVuY3Rpb24gdWgoYSxiLGMsZCxlKXtHYy5jYWxsKHRoaXMsYSk7dGhpcy52ZWN0b3JDb250ZXh0PWI7dGhpcy5mcmFtZVN0YXRlPWM7dGhpcy5jb250ZXh0PWQ7dGhpcy5nbENvbnRleHQ9ZX12KHVoLEdjKTtmdW5jdGlvbiB2aChhKXtLYy5jYWxsKHRoaXMpO3RoaXMuaGlnaFdhdGVyTWFyaz12b2lkIDAhPT1hP2E6MjA0ODt0aGlzLmI9MDt0aGlzLmo9e307dGhpcy5hPXRoaXMuYz1udWxsfXYodmgsS2MpO2w9dmgucHJvdG90eXBlO2wuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmI9MDt0aGlzLmo9e307dGhpcy5hPXRoaXMuYz1udWxsO3RoaXMubChcImNsZWFyXCIpfTtsLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5jO2M7KWEuY2FsbChiLGMub2IsYy5lYix0aGlzKSxjPWMud2F9O2wuZ2V0PWZ1bmN0aW9uKGEpe2E9dGhpcy5qW2FdO3godm9pZCAwIT09YSwxNSk7aWYoYT09PXRoaXMuYSlyZXR1cm4gYS5vYjthPT09dGhpcy5jPyh0aGlzLmM9dGhpcy5jLndhLHRoaXMuYy5OYT1udWxsKTooYS53YS5OYT1hLk5hLGEuTmEud2E9YS53YSk7YS53YT1udWxsO2EuTmE9dGhpcy5hO3RoaXMuYT10aGlzLmEud2E9YTtyZXR1cm4gYS5vYn07XG5sLnJlbW92ZT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmpbYV07eCh2b2lkIDAhPT1iLDE1KTtpZihiPT09dGhpcy5hKXtpZih0aGlzLmE9Yi5OYSl0aGlzLmEud2E9bnVsbH1lbHNlIGlmKGI9PT10aGlzLmMpe2lmKHRoaXMuYz1iLndhKXRoaXMuYy5OYT1udWxsfWVsc2UgYi53YS5OYT1iLk5hLGIuTmEud2E9Yi53YTtkZWxldGUgdGhpcy5qW2FdOy0tdGhpcy5iO3JldHVybiBiLm9ifTtsLnBvcD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYztkZWxldGUgdGhpcy5qW2EuZWJdO2Eud2EmJihhLndhLk5hPW51bGwpO3RoaXMuYz1hLndhO3RoaXMuY3x8KHRoaXMuYT1udWxsKTstLXRoaXMuYjtyZXR1cm4gYS5vYn07bC5zZXQ9ZnVuY3Rpb24oYSxiKXt4KCEoYSBpbiB0aGlzLmopLDE2KTtiPXtlYjphLHdhOm51bGwsTmE6dGhpcy5hLG9iOmJ9O3RoaXMuYT90aGlzLmEud2E9Yjp0aGlzLmM9Yjt0aGlzLmE9Yjt0aGlzLmpbYV09YjsrK3RoaXMuYn07dmFyIHdoPVswLDAsMCwxXSx4aD1bXSx5aD1bMCwwLDAsMV0semg9bmV3IHZoLEFoPXt9LEJoPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gYShhKXtlfHwoZT1MZigxLDEpLGUuZm9udD1cIjMycHggbW9ub3NwYWNlXCIsZz1lLm1lYXN1cmVUZXh0KFwid215dHppbFdNWVRaSUxAIy8mPyQlMTBcIikud2lkdGgpO3ZhciBiPSEwO1wibW9ub3NwYWNlXCIhPWEmJihlLmZvbnQ9XCIzMnB4IFwiK2ErXCIsbW9ub3NwYWNlXCIsYj1lLm1lYXN1cmVUZXh0KFwid215dHppbFdNWVRaSUxAIy8mPyQlMTBcIikud2lkdGghPWcsZS5mb250PVwiMzJweCBtb25vc3BhY2VcIik7cmV0dXJuIGJ9ZnVuY3Rpb24gYigpe3ZhciBiPSEwLGU7Zm9yKGUgaW4gYyk2MD5jW2VdJiYoYShlKT8oY1tlXT02MCxkLmNsZWFyKCkpOigrK2NbZV0sYj0hMSkpO2ImJih3aW5kb3cuY2xlYXJJbnRlcnZhbChmKSxmPXZvaWQgMCl9dmFyIGM9QWgsZD16aCxlLGYsZztyZXR1cm4gZnVuY3Rpb24oZCl7aWYoZD1oZyhkKSlmb3IodmFyIGU9MCxnPWQubGVuZ3RoO2U8XG5nOysrZSl7dmFyIGg9ZFtlXTtoIGluIGN8fChjW2hdPTYwLGEoaCl8fChjW2hdPTAsdm9pZCAwPT09ZiYmKGY9d2luZG93LnNldEludGVydmFsKGIsMzIpKSkpfX19KCk7ZnVuY3Rpb24gQ2goYSxiLGMsZCl7MCE9PWImJihhLnRyYW5zbGF0ZShjLGQpLGEucm90YXRlKGIpLGEudHJhbnNsYXRlKC1jLC1kKSl9dmFyIERoPUtlKCk7ZnVuY3Rpb24gRWgoYSxiLGMsZCxlLGYsZyxoLGssbSxuKXtpZigxIT1jKXt2YXIgcD1hLmdsb2JhbEFscGhhO2EuZ2xvYmFsQWxwaGE9cCpjfWImJmEuc2V0VHJhbnNmb3JtLmFwcGx5KGEsYik7YS5kcmF3SW1hZ2UoZCxlLGYsZyxoLGssbSxnKm4saCpuKTtwJiYoYS5nbG9iYWxBbHBoYT1wKTtiJiZhLnNldFRyYW5zZm9ybS5hcHBseShhLERoKX07dmFyIEZoPS9eIyg/OlswLTlhLWZdezMsNH0pezEsMn0kL2ksR2g9L14oW2Etel0qKSQvaTtmdW5jdGlvbiBPaChhKXtpZihcInN0cmluZ1wiIT09dHlwZW9mIGEpe3ZhciBiPWFbMF07YiE9KGJ8MCkmJihiPWIrLjV8MCk7dmFyIGM9YVsxXTtjIT0oY3wwKSYmKGM9YysuNXwwKTt2YXIgZD1hWzJdO2QhPShkfDApJiYoZD1kKy41fDApO2E9XCJyZ2JhKFwiK2IrXCIsXCIrYytcIixcIitkK1wiLFwiKyh2b2lkIDA9PT1hWzNdPzE6YVszXSkrXCIpXCJ9cmV0dXJuIGF9XG52YXIgUWg9ZnVuY3Rpb24oKXt2YXIgYT17fSxiPTA7cmV0dXJuIGZ1bmN0aW9uKGMpe2lmKGEuaGFzT3duUHJvcGVydHkoYykpdmFyIGQ9YVtjXTtlbHNle2lmKDEwMjQ8PWIpe2Q9MDtmb3IodmFyIGUgaW4gYSkwPT09KGQrKyYzKSYmKGRlbGV0ZSBhW2VdLC0tYil9ZD1jO0doLmV4ZWMoZCkmJihlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZS5zdHlsZS5jb2xvcj1kLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZSksZD1nZXRDb21wdXRlZFN0eWxlKGUpLmNvbG9yLGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoZSkpO2lmKEZoLmV4ZWMoZCkpe2U9ZC5sZW5ndGgtMTt2YXIgZj00Pj1lPzE6Mjt2YXIgZz00PT09ZXx8OD09PWU7ZT1wYXJzZUludChkLnN1YnN0cigxKzAqZixmKSwxNik7dmFyIGg9cGFyc2VJbnQoZC5zdWJzdHIoMSsxKmYsZiksMTYpO3ZhciBrPXBhcnNlSW50KGQuc3Vic3RyKDErMipmLGYpLDE2KTtkPWc/cGFyc2VJbnQoZC5zdWJzdHIoMSszKmYsZiksXG4xNik6MjU1OzE9PWYmJihlPShlPDw0KStlLGg9KGg8PDQpK2gsaz0oazw8NCkrayxnJiYoZD0oZDw8NCkrZCkpO2Y9W2UsaCxrLGQvMjU1XX1lbHNlIDA9PWQuaW5kZXhPZihcInJnYmEoXCIpPyhkPWQuc2xpY2UoNSwtMSkuc3BsaXQoXCIsXCIpLm1hcChOdW1iZXIpLGY9UGgoZCkpOjA9PWQuaW5kZXhPZihcInJnYihcIik/KGQ9ZC5zbGljZSg0LC0xKS5zcGxpdChcIixcIikubWFwKE51bWJlciksZC5wdXNoKDEpLGY9UGgoZCkpOngoITEsMTQpO2Q9ZjthW2NdPWQ7KytifXJldHVybiBkfX0oKTtmdW5jdGlvbiBQaChhKXt2YXIgYj1bXTtiWzBdPXJhKGFbMF0rLjV8MCwwLDI1NSk7YlsxXT1yYShhWzFdKy41fDAsMCwyNTUpO2JbMl09cmEoYVsyXSsuNXwwLDAsMjU1KTtiWzNdPXJhKGFbM10sMCwxKTtyZXR1cm4gYn07ZnVuY3Rpb24gUmgoYSl7cmV0dXJuXCJzdHJpbmdcIj09PXR5cGVvZiBhfHxhIGluc3RhbmNlb2YgQ2FudmFzUGF0dGVybnx8YSBpbnN0YW5jZW9mIENhbnZhc0dyYWRpZW50P2E6T2goYSl9O2Z1bmN0aW9uIFNoKCl7fWw9U2gucHJvdG90eXBlO2wuV2Q9ZnVuY3Rpb24oKXt9O2wuTmM9ZnVuY3Rpb24oKXt9O2wuT2M9ZnVuY3Rpb24oKXt9O2wuUGM9ZnVuY3Rpb24oKXt9O2wuUWM9ZnVuY3Rpb24oKXt9O2wuUmM9ZnVuY3Rpb24oKXt9O2wuU2M9ZnVuY3Rpb24oKXt9O2wuVGM9ZnVuY3Rpb24oKXt9O2wuV2E9ZnVuY3Rpb24oKXt9O2wua2I9ZnVuY3Rpb24oKXt9O2wud2M9ZnVuY3Rpb24oKXt9O2wuVWE9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFRoKGEsYixjLGQsZSl7dGhpcy5sPWE7dGhpcy5nPWI7dGhpcy5iPWM7dGhpcy5DPWQ7dGhpcy5LYT1lO3RoaXMuTD10aGlzLmE9dGhpcy5jPXRoaXMuSz10aGlzLko9dGhpcy5DYT1udWxsO3RoaXMuTT10aGlzLkdhPXRoaXMubz10aGlzLkE9dGhpcy51PXRoaXMuQj0wO3RoaXMuWD0hMTt0aGlzLmo9dGhpcy5lYT0wO3RoaXMuUmE9ITE7dGhpcy5pYT0wO3RoaXMuaGE9XCJcIjt0aGlzLmxhPXRoaXMuZmE9MDt0aGlzLiRhPSExO3RoaXMuaT10aGlzLnhhPTA7dGhpcy5rYT10aGlzLnY9dGhpcy5mPW51bGw7dGhpcy5IPVtdO3RoaXMuSGE9S2UoKX12KFRoLFNoKTtcbmZ1bmN0aW9uIFVoKGEsYixjKXtpZihhLkwpe2I9SWUoYiwwLGMsMixhLkMsYS5IKTtjPWEubDt2YXIgZD1hLkhhLGU9Yy5nbG9iYWxBbHBoYTsxIT1hLm8mJihjLmdsb2JhbEFscGhhPWUqYS5vKTt2YXIgZj1hLmVhO2EuWCYmKGYrPWEuS2EpO3ZhciBnO3ZhciBoPTA7Zm9yKGc9Yi5sZW5ndGg7aDxnO2grPTIpe3ZhciBrPWJbaF0tYS5CLG09YltoKzFdLWEudTthLlJhJiYoaz1NYXRoLnJvdW5kKGspLG09TWF0aC5yb3VuZChtKSk7aWYoMCE9PWZ8fDEhPWEuail7dmFyIG49aythLkIscD1tK2EudTtQZShkLG4scCxhLmosYS5qLGYsLW4sLXApO2Muc2V0VHJhbnNmb3JtLmFwcGx5KGMsZCl9Yy5kcmF3SW1hZ2UoYS5MLGEuR2EsYS5NLGEuaWEsYS5BLGssbSxhLmlhLGEuQSl9MD09PWYmJjE9PWEuanx8Yy5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApOzEhPWEubyYmKGMuZ2xvYmFsQWxwaGE9ZSl9fVxuZnVuY3Rpb24gVmgoYSxiLGMsZCl7dmFyIGU9MDtpZihhLmthJiZcIlwiIT09YS5oYSl7YS5mJiZXaChhLGEuZik7YS52JiZYaChhLGEudik7dmFyIGY9YS5rYSxnPWEubCxoPWEuSyxrPWYudGV4dEFsaWduP2YudGV4dEFsaWduOlwiY2VudGVyXCI7aD8oaC5mb250IT1mLmZvbnQmJihoLmZvbnQ9Zy5mb250PWYuZm9udCksaC50ZXh0QWxpZ24hPWsmJihoLnRleHRBbGlnbj1rKSxoLnRleHRCYXNlbGluZSE9Zi50ZXh0QmFzZWxpbmUmJihoLnRleHRCYXNlbGluZT1nLnRleHRCYXNlbGluZT1mLnRleHRCYXNlbGluZSkpOihnLmZvbnQ9Zi5mb250LGcudGV4dEFsaWduPWssZy50ZXh0QmFzZWxpbmU9Zi50ZXh0QmFzZWxpbmUsYS5LPXtmb250OmYuZm9udCx0ZXh0QWxpZ246ayx0ZXh0QmFzZWxpbmU6Zi50ZXh0QmFzZWxpbmV9KTtiPUllKGIsZSxjLGQsYS5DLGEuSCk7Zj1hLmw7Zz1hLnhhO2ZvcihhLiRhJiYoZys9YS5LYSk7ZTxjO2UrPWQpe2g9YltlXSthLmZhO2s9YltlKzFdK2EubGE7aWYoMCE9PVxuZ3x8MSE9YS5pKXt2YXIgbT1QZShhLkhhLGgsayxhLmksYS5pLGcsLWgsLWspO2Yuc2V0VHJhbnNmb3JtLmFwcGx5KGYsbSl9YS52JiZmLnN0cm9rZVRleHQoYS5oYSxoLGspO2EuZiYmZi5maWxsVGV4dChhLmhhLGgsayl9MD09PWcmJjE9PWEuaXx8Zi5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApfX1mdW5jdGlvbiBZaChhLGIsYyxkLGUsZil7dmFyIGc9YS5sO2E9SWUoYixjLGQsZSxhLkMsYS5IKTtnLm1vdmVUbyhhWzBdLGFbMV0pO2I9YS5sZW5ndGg7ZiYmKGItPTIpO2ZvcihjPTI7YzxiO2MrPTIpZy5saW5lVG8oYVtjXSxhW2MrMV0pO2YmJmcuY2xvc2VQYXRoKCk7cmV0dXJuIGR9ZnVuY3Rpb24gWmgoYSxiLGMsZCxlKXt2YXIgZjt2YXIgZz0wO2ZvcihmPWQubGVuZ3RoO2c8ZjsrK2cpYz1ZaChhLGIsYyxkW2ddLGUsITApO3JldHVybiBjfWw9VGgucHJvdG90eXBlO1xubC5OYz1mdW5jdGlvbihhKXtpZihWYSh0aGlzLmIsYS5JKCkpKXtpZih0aGlzLmN8fHRoaXMuYSl7dGhpcy5jJiZXaCh0aGlzLHRoaXMuYyk7dGhpcy5hJiZYaCh0aGlzLHRoaXMuYSk7dmFyIGI9dGhpcy5DO3ZhciBjPXRoaXMuSCxkPWEuYWEoKTtiPWQ/SWUoZCwwLGQubGVuZ3RoLGEuZ2EoKSxiLGMpOm51bGw7Yz1iWzJdLWJbMF07ZD1iWzNdLWJbMV07Yz1NYXRoLnNxcnQoYypjK2QqZCk7ZD10aGlzLmw7ZC5iZWdpblBhdGgoKTtkLmFyYyhiWzBdLGJbMV0sYywwLDIqTWF0aC5QSSk7dGhpcy5jJiZkLmZpbGwoKTt0aGlzLmEmJmQuc3Ryb2tlKCl9XCJcIiE9PXRoaXMuaGEmJlZoKHRoaXMsYS5qYSgpLDIsMil9fTtsLlNjPWZ1bmN0aW9uKGEpe3ZhciBiPWEuYWEoKTthPWEuZ2EoKTt0aGlzLkwmJlVoKHRoaXMsYixiLmxlbmd0aCk7XCJcIiE9PXRoaXMuaGEmJlZoKHRoaXMsYixiLmxlbmd0aCxhKX07XG5sLlFjPWZ1bmN0aW9uKGEpe3ZhciBiPWEuYWEoKTthPWEuZ2EoKTt0aGlzLkwmJlVoKHRoaXMsYixiLmxlbmd0aCk7XCJcIiE9PXRoaXMuaGEmJlZoKHRoaXMsYixiLmxlbmd0aCxhKX07bC5PYz1mdW5jdGlvbihhKXtpZihWYSh0aGlzLmIsYS5JKCkpKXtpZih0aGlzLmEpe1hoKHRoaXMsdGhpcy5hKTt2YXIgYj10aGlzLmwsYz1hLmFhKCk7Yi5iZWdpblBhdGgoKTtZaCh0aGlzLGMsMCxjLmxlbmd0aCxhLmdhKCksITEpO2Iuc3Ryb2tlKCl9XCJcIiE9PXRoaXMuaGEmJihhPWEuWGMoKSxWaCh0aGlzLGEsMiwyKSl9fTtcbmwuUGM9ZnVuY3Rpb24oYSl7dmFyIGI9YS5JKCk7aWYoVmEodGhpcy5iLGIpKXtpZih0aGlzLmEpe1hoKHRoaXMsdGhpcy5hKTtiPXRoaXMubDt2YXIgYz1hLmFhKCksZD0wLGU9YS5NYSgpLGY9YS5nYSgpO2IuYmVnaW5QYXRoKCk7dmFyIGc7dmFyIGg9MDtmb3IoZz1lLmxlbmd0aDtoPGc7KytoKWQ9WWgodGhpcyxjLGQsZVtoXSxmLCExKTtiLnN0cm9rZSgpfVwiXCIhPT10aGlzLmhhJiYoYT1hLlljKCksVmgodGhpcyxhLGEubGVuZ3RoLDIpKX19O2wuVGM9ZnVuY3Rpb24oYSl7aWYoVmEodGhpcy5iLGEuSSgpKSl7aWYodGhpcy5hfHx0aGlzLmMpe3RoaXMuYyYmV2godGhpcyx0aGlzLmMpO3RoaXMuYSYmWGgodGhpcyx0aGlzLmEpO3ZhciBiPXRoaXMubDtiLmJlZ2luUGF0aCgpO1poKHRoaXMsYS5YYSgpLDAsYS5NYSgpLGEuZ2EoKSk7dGhpcy5jJiZiLmZpbGwoKTt0aGlzLmEmJmIuc3Ryb2tlKCl9XCJcIiE9PXRoaXMuaGEmJihhPWEuYWMoKSxWaCh0aGlzLGEsMiwyKSl9fTtcbmwuUmM9ZnVuY3Rpb24oYSl7aWYoVmEodGhpcy5iLGEuSSgpKSl7aWYodGhpcy5hfHx0aGlzLmMpe3RoaXMuYyYmV2godGhpcyx0aGlzLmMpO3RoaXMuYSYmWGgodGhpcyx0aGlzLmEpO3ZhciBiPXRoaXMubCxjPSRoKGEpLGQ9MCxlPWEuRWIoKSxmPWEuZ2EoKSxnO2IuYmVnaW5QYXRoKCk7dmFyIGg9MDtmb3IoZz1lLmxlbmd0aDtoPGc7KytoKWQ9WmgodGhpcyxjLGQsZVtoXSxmKTt0aGlzLmMmJmIuZmlsbCgpO3RoaXMuYSYmYi5zdHJva2UoKX1cIlwiIT09dGhpcy5oYSYmKGE9YWkoYSksVmgodGhpcyxhLGEubGVuZ3RoLDIpKX19O2Z1bmN0aW9uIFdoKGEsYil7dmFyIGM9YS5sLGQ9YS5DYTtkP2QuZmlsbFN0eWxlIT1iLmZpbGxTdHlsZSYmKGQuZmlsbFN0eWxlPWMuZmlsbFN0eWxlPWIuZmlsbFN0eWxlKTooYy5maWxsU3R5bGU9Yi5maWxsU3R5bGUsYS5DYT17ZmlsbFN0eWxlOmIuZmlsbFN0eWxlfSl9XG5mdW5jdGlvbiBYaChhLGIpe3ZhciBjPWEubCxkPWEuSjtkPyhkLmxpbmVDYXAhPWIubGluZUNhcCYmKGQubGluZUNhcD1jLmxpbmVDYXA9Yi5saW5lQ2FwKSxrZCYmKFZiKGQubGluZURhc2gsYi5saW5lRGFzaCl8fGMuc2V0TGluZURhc2goZC5saW5lRGFzaD1iLmxpbmVEYXNoKSxkLmxpbmVEYXNoT2Zmc2V0IT1iLmxpbmVEYXNoT2Zmc2V0JiYoZC5saW5lRGFzaE9mZnNldD1jLmxpbmVEYXNoT2Zmc2V0PWIubGluZURhc2hPZmZzZXQpKSxkLmxpbmVKb2luIT1iLmxpbmVKb2luJiYoZC5saW5lSm9pbj1jLmxpbmVKb2luPWIubGluZUpvaW4pLGQubGluZVdpZHRoIT1iLmxpbmVXaWR0aCYmKGQubGluZVdpZHRoPWMubGluZVdpZHRoPWIubGluZVdpZHRoKSxkLm1pdGVyTGltaXQhPWIubWl0ZXJMaW1pdCYmKGQubWl0ZXJMaW1pdD1jLm1pdGVyTGltaXQ9Yi5taXRlckxpbWl0KSxkLnN0cm9rZVN0eWxlIT1iLnN0cm9rZVN0eWxlJiYoZC5zdHJva2VTdHlsZT1jLnN0cm9rZVN0eWxlPWIuc3Ryb2tlU3R5bGUpKTpcbihjLmxpbmVDYXA9Yi5saW5lQ2FwLGtkJiYoYy5zZXRMaW5lRGFzaChiLmxpbmVEYXNoKSxjLmxpbmVEYXNoT2Zmc2V0PWIubGluZURhc2hPZmZzZXQpLGMubGluZUpvaW49Yi5saW5lSm9pbixjLmxpbmVXaWR0aD1iLmxpbmVXaWR0aCxjLm1pdGVyTGltaXQ9Yi5taXRlckxpbWl0LGMuc3Ryb2tlU3R5bGU9Yi5zdHJva2VTdHlsZSxhLko9e2xpbmVDYXA6Yi5saW5lQ2FwLGxpbmVEYXNoOmIubGluZURhc2gsbGluZURhc2hPZmZzZXQ6Yi5saW5lRGFzaE9mZnNldCxsaW5lSm9pbjpiLmxpbmVKb2luLGxpbmVXaWR0aDpiLmxpbmVXaWR0aCxtaXRlckxpbWl0OmIubWl0ZXJMaW1pdCxzdHJva2VTdHlsZTpiLnN0cm9rZVN0eWxlfSl9XG5sLmtiPWZ1bmN0aW9uKGEsYil7YT8oYT1hLmEsdGhpcy5jPXtmaWxsU3R5bGU6UmgoYT9hOndoKX0pOnRoaXMuYz1udWxsO2lmKGIpe2E9Yi5jO3ZhciBjPWIuYixkPWIubCxlPWIuZyxmPWIuZixnPWIuajtiPWIudjt0aGlzLmE9e2xpbmVDYXA6dm9pZCAwIT09Yz9jOlwicm91bmRcIixsaW5lRGFzaDpkP2Q6eGgsbGluZURhc2hPZmZzZXQ6ZT9lOjAsbGluZUpvaW46dm9pZCAwIT09Zj9mOlwicm91bmRcIixsaW5lV2lkdGg6dGhpcy5nKih2b2lkIDAhPT1nP2c6MSksbWl0ZXJMaW1pdDp2b2lkIDAhPT1iP2I6MTAsc3Ryb2tlU3R5bGU6UmgoYT9hOnloKX19ZWxzZSB0aGlzLmE9bnVsbH07XG5sLndjPWZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPWEuJGIoKSxjPWEuYmEoMSksZD1hLm9jKCksZT1hLnliKCk7dGhpcy5CPWJbMF07dGhpcy51PWJbMV07dGhpcy5BPWVbMV07dGhpcy5MPWM7dGhpcy5vPWEuYjt0aGlzLkdhPWRbMF07dGhpcy5NPWRbMV07dGhpcy5YPWEuQjt0aGlzLmVhPWEuaTt0aGlzLmo9YS5qKnRoaXMuZzt0aGlzLlJhPWEubzt0aGlzLmlhPWVbMF19ZWxzZSB0aGlzLkw9bnVsbH07XG5sLlVhPWZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPWEudWEoKTtiPyhiPWIuYSx0aGlzLmY9e2ZpbGxTdHlsZTpSaChiP2I6d2gpfSk6dGhpcy5mPW51bGw7dmFyIGM9YS5xYSgpO2lmKGMpe2I9Yy5jO3ZhciBkPWMuYixlPWMubCxmPWMuZyxnPWMuZixoPWMuajtjPWMudjt0aGlzLnY9e2xpbmVDYXA6dm9pZCAwIT09ZD9kOlwicm91bmRcIixsaW5lRGFzaDplP2U6eGgsbGluZURhc2hPZmZzZXQ6Zj9mOjAsbGluZUpvaW46dm9pZCAwIT09Zz9nOlwicm91bmRcIixsaW5lV2lkdGg6dm9pZCAwIT09aD9oOjEsbWl0ZXJMaW1pdDp2b2lkIDAhPT1jP2M6MTAsc3Ryb2tlU3R5bGU6UmgoYj9iOnloKX19ZWxzZSB0aGlzLnY9bnVsbDtiPWEuYTtkPWEubDtlPWEuajtmPWEuYjtnPWEuZztoPWEuYztjPWEucmEoKTt2YXIgaz1hLmY7YT1hLnY7dGhpcy5rYT17Zm9udDp2b2lkIDAhPT1iP2I6XCIxMHB4IHNhbnMtc2VyaWZcIix0ZXh0QWxpZ246dm9pZCAwIT09az9rOlwiY2VudGVyXCIsdGV4dEJhc2VsaW5lOnZvaWQgMCE9PVxuYT9hOlwibWlkZGxlXCJ9O3RoaXMuaGE9dm9pZCAwIT09Yz9jOlwiXCI7dGhpcy5mYT12b2lkIDAhPT1kP3RoaXMuZypkOjA7dGhpcy5sYT12b2lkIDAhPT1lP3RoaXMuZyplOjA7dGhpcy4kYT12b2lkIDAhPT1mP2Y6ITE7dGhpcy54YT12b2lkIDAhPT1nP2c6MDt0aGlzLmk9dGhpcy5nKih2b2lkIDAhPT1oP2g6MSl9ZWxzZSB0aGlzLmhhPVwiXCJ9O2Z1bmN0aW9uIGJpKGEpe01jLmNhbGwodGhpcyk7dGhpcy5hPWF9dihiaSxNYyk7YmkucHJvdG90eXBlLkVhPWxhO2Z1bmN0aW9uIGNpKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlKXtyZXR1cm4gZGkoYSxiLGQsZSxmdW5jdGlvbihhKXtjW2RdfHwoY1tkXT17fSk7Y1tkXVthLnRhLnRvU3RyaW5nKCldPWF9KX19YmkucHJvdG90eXBlLmVhPWZ1bmN0aW9uKGEpezI9PT1hLnRhcmdldC5hKCkmJmVpKHRoaXMpfTtmdW5jdGlvbiBlaShhKXt2YXIgYj1hLmE7Yi5IYigpJiZcInJlYWR5XCI9PWIuYmQoKSYmYS5jKCl9ZnVuY3Rpb24gZmkoYSxiKXtiLmpkKCkmJmEucG9zdFJlbmRlckZ1bmN0aW9ucy5wdXNoKGZ1bmN0aW9uKGEsYixlKXtiPXcoYSkudG9TdHJpbmcoKTtiIGluIGUudXNlZFRpbGVzJiZhLkRiKGUudmlld1N0YXRlLnByb2plY3Rpb24sZS51c2VkVGlsZXNbYl0pfS5iaW5kKG51bGwsYikpfVxuZnVuY3Rpb24gZ2koYSxiKXtiPWIubGE7dm9pZCAwIT09YiYmKFwic3RyaW5nXCI9PT10eXBlb2YgYj9hLmxvZ29zW2JdPVwiXCI6YiYmKHgoXCJzdHJpbmdcIj09dHlwZW9mIGIuaHJlZiw0NCkseChcInN0cmluZ1wiPT10eXBlb2YgYi5zcmMsNDUpLGEubG9nb3NbYi5zcmNdPWIuaHJlZikpfWZ1bmN0aW9uIGhpKGEsYixjLGQpe2I9dyhiKS50b1N0cmluZygpO2M9Yy50b1N0cmluZygpO2IgaW4gYT9jIGluIGFbYl0/KGE9YVtiXVtjXSxkLlQ8YS5UJiYoYS5UPWQuVCksZC5XPmEuVyYmKGEuVz1kLlcpLGQuUjxhLlImJihhLlI9ZC5SKSxkLlU+YS5VJiYoYS5VPWQuVSkpOmFbYl1bY109ZDooYVtiXT17fSxhW2JdW2NdPWQpfVxuZnVuY3Rpb24gaWkoYSxiLGMsZCxlLGYsZyxoKXt2YXIgaz13KGIpLnRvU3RyaW5nKCk7ayBpbiBhLndhbnRlZFRpbGVzfHwoYS53YW50ZWRUaWxlc1trXT17fSk7dmFyIG09YS53YW50ZWRUaWxlc1trXTthPWEudGlsZVF1ZXVlO3ZhciBuLHAscTtmb3IocT1jLm1pblpvb207cTw9ZzsrK3Epe3ZhciB0PWRjKGMsZixxLHQpO3ZhciB1PWMuYVtxXTtmb3Iobj10LlQ7bjw9dC5XOysrbilmb3IocD10LlI7cDw9dC5VOysrcClpZihnLXE8PWgpe3ZhciB5PWIua2QocSxuLHAsZCxlKTswPT15LnN0YXRlJiYobVt5LlNhKCldPSEwLHkuU2EoKWluIGEubHx8YS5mKFt5LGssbmMoYyx5LnRhKSx1XSkpfWVsc2UgYi55ZihxLG4scCxlKX19O2Z1bmN0aW9uIGppKGEpe2JpLmNhbGwodGhpcyxhKTt0aGlzLmZhPUtlKCl9dihqaSxiaSk7ZnVuY3Rpb24ga2koYSxiLGMpe3ZhciBkPWIucGl4ZWxSYXRpbyxlPWIuc2l6ZVswXSpkLGY9Yi5zaXplWzFdKmQsZz1iLnZpZXdTdGF0ZS5yb3RhdGlvbixoPVdhKGMpLGs9W2NbMl0sY1szXV0sbT1bY1syXSxjWzFdXTtjPVFhKGMpO09lKGIuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0saCk7T2UoYi5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSxrKTtPZShiLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLG0pO09lKGIuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sYyk7YS5zYXZlKCk7Q2goYSwtZyxlLzIsZi8yKTthLmJlZ2luUGF0aCgpO2EubW92ZVRvKGhbMF0qZCxoWzFdKmQpO2EubGluZVRvKGtbMF0qZCxrWzFdKmQpO2EubGluZVRvKG1bMF0qZCxtWzFdKmQpO2EubGluZVRvKGNbMF0qZCxjWzFdKmQpO2EuY2xpcCgpO0NoKGEsZyxlLzIsZi8yKX1cbmZ1bmN0aW9uIGxpKGEsYixjLGQsZSl7dmFyIGY9YS5hO2lmKExjKGYsYikpe3ZhciBnPWQuc2l6ZVswXSpkLnBpeGVsUmF0aW8saD1kLnNpemVbMV0qZC5waXhlbFJhdGlvLGs9ZC52aWV3U3RhdGUucm90YXRpb247Q2goYywtayxnLzIsaC8yKTthPXZvaWQgMCE9PWU/ZTptaShhLGQsMCk7Zi5sKG5ldyB1aChiLG5ldyBUaChjLGQucGl4ZWxSYXRpbyxkLmV4dGVudCxhLGQudmlld1N0YXRlLnJvdGF0aW9uKSxkLGMsbnVsbCkpO0NoKGMsayxnLzIsaC8yKX19amkucHJvdG90eXBlLkM9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5FYShhLGIsMCxHZSx0aGlzKSlyZXR1cm4gYy5jYWxsKGQsdGhpcy5hLG51bGwpfTtqaS5wcm90b3R5cGUucGM9ZnVuY3Rpb24oYSxiLGMsZCl7bGkodGhpcyxcInBvc3Rjb21wb3NlXCIsYSxiLGQpfTtcbmZ1bmN0aW9uIG1pKGEsYixjKXt2YXIgZD1iLnZpZXdTdGF0ZSxlPWIucGl4ZWxSYXRpbyxmPWUvZC5yZXNvbHV0aW9uO3JldHVybiBQZShhLmZhLGUqYi5zaXplWzBdLzIsZSpiLnNpemVbMV0vMixmLC1mLC1kLnJvdGF0aW9uLC1kLmNlbnRlclswXStjLC1kLmNlbnRlclsxXSl9O2Z1bmN0aW9uIG5pKGEpe2ppLmNhbGwodGhpcyxhKTt0aGlzLkg9S2UoKTt0aGlzLmk9bnVsbH12KG5pLGppKTtuaS5wcm90b3R5cGUuVWQ9ZnVuY3Rpb24oYSxiLGMpe2xpKHRoaXMsXCJwcmVjb21wb3NlXCIsYyxhLHZvaWQgMCk7dmFyIGQ9dGhpcy5iYSgpO2lmKGQpe3ZhciBlPWIuZXh0ZW50LGY9dm9pZCAwIT09ZSYmIUhhKGUsYS5leHRlbnQpJiZWYShlLGEuZXh0ZW50KTtmJiZraShjLGEsZSk7ZT10aGlzLkIoKTt2YXIgZz1jLmdsb2JhbEFscGhhO2MuZ2xvYmFsQWxwaGE9Yi5vcGFjaXR5O2MuZHJhd0ltYWdlKGQsMCwwLCtkLndpZHRoLCtkLmhlaWdodCxNYXRoLnJvdW5kKGVbNF0pLE1hdGgucm91bmQoZVs1XSksTWF0aC5yb3VuZChkLndpZHRoKmVbMF0pLE1hdGgucm91bmQoZC5oZWlnaHQqZVszXSkpO2MuZ2xvYmFsQWxwaGE9ZztmJiZjLnJlc3RvcmUoKX10aGlzLnBjKGMsYSxiKX07XG5uaS5wcm90b3R5cGUuRWE9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj10aGlzLmE7cmV0dXJuIGYuJCgpLkVhKGEsYi52aWV3U3RhdGUucmVzb2x1dGlvbixiLnZpZXdTdGF0ZS5yb3RhdGlvbixjLGIuc2tpcHBlZEZlYXR1cmVVaWRzLGZ1bmN0aW9uKGEpe3JldHVybiBkLmNhbGwoZSxhLGYpfSl9O1xubmkucHJvdG90eXBlLkM9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5iYSgpKXtpZih0aGlzLmEuJCgpLkVhIT09bGEpcmV0dXJuIGppLnByb3RvdHlwZS5DLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT1PZSh0aGlzLkgsYS5zbGljZSgpKTt0ZShlLGIudmlld1N0YXRlLnJlc29sdXRpb24vdGhpcy5nKTt0aGlzLml8fCh0aGlzLmk9TGYoMSwxKSk7dGhpcy5pLmNsZWFyUmVjdCgwLDAsMSwxKTt0aGlzLmkuZHJhd0ltYWdlKHRoaXMuYmEoKSxlWzBdLGVbMV0sMSwxLDAsMCwxLDEpO2U9dGhpcy5pLmdldEltYWdlRGF0YSgwLDAsMSwxKS5kYXRhO2lmKDA8ZVszXSlyZXR1cm4gYy5jYWxsKGQsdGhpcy5hLGUpfX07ZnVuY3Rpb24gVmYoYSl7bmkuY2FsbCh0aGlzLGEpO3RoaXMuTD1udWxsO3RoaXMuYj1LZSgpfXYoVmYsbmkpO1ZmLmhhbmRsZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cImNhbnZhc1wiPT09YSYmXCJJTUFHRVwiPT09Yi5EKCl9O1ZmLmNyZWF0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgVmYoYil9O1ZmLnByb3RvdHlwZS5iYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLkw/dGhpcy5MLmJhKCk6bnVsbH07VmYucHJvdG90eXBlLkI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ifTtcblZmLnByb3RvdHlwZS5MYj1mdW5jdGlvbihhLGIpe3ZhciBjPWEucGl4ZWxSYXRpbyxkPWEuc2l6ZSxlPWEudmlld1N0YXRlLGY9ZS5jZW50ZXIsZz1lLnJlc29sdXRpb24saD10aGlzLmEuJCgpLGs9YS52aWV3SGludHM7dmFyIG09YS5leHRlbnQ7dm9pZCAwIT09Yi5leHRlbnQmJihtPVVhKG0sYi5leHRlbnQpKTtpZigha1swXSYmIWtbMV0mJiFZYShtKSl7Yj1lLnByb2plY3Rpb247KGU9aC5DKSYmKGI9ZSk7aWYoYj1tPWguYmEobSxnLGMsYikpYj1tLGU9Yi5hKCksMiE9ZSYmMyE9ZSYmeihiLFwiY2hhbmdlXCIsdGhpcy5lYSx0aGlzKSwwPT1lJiYoYi5sb2FkKCksZT1iLmEoKSksYj0yPT1lO2ImJih0aGlzLkw9bSl9dGhpcy5MJiYobT10aGlzLkwsZT1tLkkoKSxiPW0uaigpLG09bS5jKCksaz1jKmIvKGcqbSksZT1QZSh0aGlzLmIsYypkWzBdLzIsYypkWzFdLzIsayxrLDAsbSooZVswXS1mWzBdKS9iLG0qKGZbMV0tZVszXSkvYiksUGUodGhpcy5ILGMqZFswXS8yLWVbNF0sYypkWzFdL1xuMi1lWzVdLGMvZywtYy9nLDAsLWZbMF0sLWZbMV0pLGdpKGEsaCksdGhpcy5nPWIqYy9tKTtyZXR1cm4hIXRoaXMuTH07ZnVuY3Rpb24gb2koKXt0aGlzLmE9e307dGhpcy5jPTB9b2kucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5hPXt9O3RoaXMuYz0wfTtvaS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEsYixjKXthPWIrXCI6XCIrYStcIjpcIisoYz9PaChjKTpcIm51bGxcIik7cmV0dXJuIGEgaW4gdGhpcy5hP3RoaXMuYVthXTpudWxsfTtvaS5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuYVtiK1wiOlwiK2ErXCI6XCIrKGM/T2goYyk6XCJudWxsXCIpXT1kOysrdGhpcy5jfTt2YXIgcGk9bmV3IG9pO2Z1bmN0aW9uIHFpKGEsYil7dGhpcy5nPWI7dGhpcy5jPXt9O3RoaXMuaj17fX12KHFpLEJjKTtsPXFpLnByb3RvdHlwZTtsLmNhPWZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMuYylDYyh0aGlzLmNbYV0pfTtmdW5jdGlvbiByaSgpe2lmKDMyPHBpLmMpe3ZhciBhPTAsYjtmb3IoYiBpbiBwaS5hKXt2YXIgYz1waS5hW2JdOzAhPT0oYSsrJjMpfHxMYyhjKXx8KGRlbGV0ZSBwaS5hW2JdLC0tcGkuYyl9fX1cbmwuRWE9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7ZnVuY3Rpb24gaChhLGMpe3ZhciBmPXcoYSkudG9TdHJpbmcoKSxnPWIubGF5ZXJTdGF0ZXNbdyhjKV0uZmQ7aWYoIShmIGluIGIuc2tpcHBlZEZlYXR1cmVVaWRzKXx8ZylyZXR1cm4gZC5jYWxsKGUsYSxnP2M6bnVsbCl9dmFyIGssbT1iLnZpZXdTdGF0ZSxuPW0ucmVzb2x1dGlvbixwPW0ucHJvamVjdGlvbjttPWE7aWYocC5qKXtwPXAuSSgpO3ZhciBxPVhhKHApLHQ9YVswXTtpZih0PHBbMF18fHQ+cFsyXSltPVt0K3EqTWF0aC5jZWlsKChwWzBdLXQpL3EpLGFbMV1dfXA9Yi5sYXllclN0YXRlc0FycmF5O2ZvcihxPXAubGVuZ3RoLTE7MDw9cTstLXEpe3ZhciB1PXBbcV07dD11LmxheWVyO2lmKGJnKHUsbikmJmYuY2FsbChnLHQpJiYodT1jZyh0aGlzLHQpLHQuJCgpJiYoaz11LkVhKHQuJCgpLkI/bTphLGIsYyxoLGUpKSxrKSlyZXR1cm4ga319O1xuZnVuY3Rpb24gY2coYSxiKXt2YXIgYz13KGIpLnRvU3RyaW5nKCk7aWYoYyBpbiBhLmMpcmV0dXJuIGEuY1tjXTtmb3IodmFyIGQsZT1hLkQoKSxmPTAsZz1TZi5sZW5ndGg7ZjxnOysrZil7dmFyIGg9U2ZbZl07aWYoaC5oYW5kbGVzKGUsYikpe2Q9aC5jcmVhdGUoYSxiKTticmVha319aWYoZClhLmNbY109ZCxhLmpbY109eihkLFwiY2hhbmdlXCIsYS5MZyxhKTtlbHNlIHRocm93IEVycm9yKFwiVW5hYmxlIHRvIGNyZWF0ZSByZW5kZXJlciBmb3IgbGF5ZXI6IFwiK2IuRCgpKTtyZXR1cm4gZH1sLkxnPWZ1bmN0aW9uKCl7dGhpcy5nLnJlbmRlcigpfTtsLmZmPWxhO2wuYWo9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gdGhpcy5jKWlmKCEoYiYmYyBpbiBiLmxheWVyU3RhdGVzKSl7YT1jO3ZhciBkPXRoaXMuY1thXTtkZWxldGUgdGhpcy5jW2FdO3ZjKHRoaXMualthXSk7ZGVsZXRlIHRoaXMualthXTtDYyhkKX19O1xuZnVuY3Rpb24gWGIoYSxiKXtyZXR1cm4gYS56SW5kZXgtYi56SW5kZXh9O2Z1bmN0aW9uIHNpKGEsYil7cWkuY2FsbCh0aGlzLDAsYik7dGhpcy5iPUxmKCk7dGhpcy5hPXRoaXMuYi5jYW52YXM7dGhpcy5hLnN0eWxlLndpZHRoPVwiMTAwJVwiO3RoaXMuYS5zdHlsZS5oZWlnaHQ9XCIxMDAlXCI7dGhpcy5hLnN0eWxlLmRpc3BsYXk9XCJibG9ja1wiO3RoaXMuYS5jbGFzc05hbWU9XCJvbC11bnNlbGVjdGFibGVcIjthLmluc2VydEJlZm9yZSh0aGlzLmEsYS5jaGlsZE5vZGVzWzBdfHxudWxsKTt0aGlzLmw9ITA7dGhpcy5mPUtlKCl9dihzaSxxaSk7c2kuaGFuZGxlcz1mdW5jdGlvbihhKXtyZXR1cm5cImNhbnZhc1wiPT09YX07c2kuY3JlYXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBzaShhLGIpfTtcbmZ1bmN0aW9uIHRpKGEsYixjKXt2YXIgZD1hLmcsZT1hLmI7aWYoTGMoZCxiKSl7dmFyIGY9Yy5leHRlbnQsZz1jLnBpeGVsUmF0aW8saD1jLnZpZXdTdGF0ZS5yb3RhdGlvbixrPWMudmlld1N0YXRlLG09Yy5waXhlbFJhdGlvL2sucmVzb2x1dGlvbjthPVBlKGEuZixhLmEud2lkdGgvMixhLmEuaGVpZ2h0LzIsbSwtbSwtay5yb3RhdGlvbiwtay5jZW50ZXJbMF0sLWsuY2VudGVyWzFdKTtkLmwobmV3IHVoKGIsbmV3IFRoKGUsZyxmLGEsaCksYyxlLG51bGwpKX19c2kucHJvdG90eXBlLkQ9ZnVuY3Rpb24oKXtyZXR1cm5cImNhbnZhc1wifTtcbnNpLnByb3RvdHlwZS5mZj1mdW5jdGlvbihhKXtpZihhKXt2YXIgYj10aGlzLmIsYz1hLnBpeGVsUmF0aW8sZD1NYXRoLnJvdW5kKGEuc2l6ZVswXSpjKSxlPU1hdGgucm91bmQoYS5zaXplWzFdKmMpO3RoaXMuYS53aWR0aCE9ZHx8dGhpcy5hLmhlaWdodCE9ZT8odGhpcy5hLndpZHRoPWQsdGhpcy5hLmhlaWdodD1lKTpiLmNsZWFyUmVjdCgwLDAsZCxlKTtjPWEudmlld1N0YXRlLnJvdGF0aW9uO3ZhciBmPWEudmlld1N0YXRlLGc9YS5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSxoPWEucGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm07UGUoZyxhLnNpemVbMF0vMixhLnNpemVbMV0vMiwxL2YucmVzb2x1dGlvbiwtMS9mLnJlc29sdXRpb24sLWYucm90YXRpb24sLWYuY2VudGVyWzBdLC1mLmNlbnRlclsxXSk7Zj1OZShoLGcpO2c9ZlswXSpmWzNdLWZbMV0qZlsyXTt4KDAhPT1nLDMyKTtoPWZbMF07dmFyIGs9ZlsxXSxtPWZbMl0sbj1mWzNdLHA9Zls0XSxxPWZbNV07ZlswXT1uL1xuZztmWzFdPS1rL2c7ZlsyXT0tbS9nO2ZbM109aC9nO2ZbNF09KG0qcS1uKnApL2c7Zls1XT0tKGgqcS1rKnApL2c7dGkodGhpcyxcInByZWNvbXBvc2VcIixhKTtmPWEubGF5ZXJTdGF0ZXNBcnJheTtXYihmKTtjJiYoYi5zYXZlKCksQ2goYixjLGQvMixlLzIpKTtkPWEudmlld1N0YXRlLnJlc29sdXRpb247ZT0wO2ZvcihnPWYubGVuZ3RoO2U8ZzsrK2UpaD1mW2VdLGs9aC5sYXllcixrPWNnKHRoaXMsayksYmcoaCxkKSYmXCJyZWFkeVwiPT1oLmlqJiZrLkxiKGEsaCkmJmsuVWQoYSxoLGIpO2MmJmIucmVzdG9yZSgpO3RpKHRoaXMsXCJwb3N0Y29tcG9zZVwiLGEpO3RoaXMubHx8KHRoaXMuYS5zdHlsZS5kaXNwbGF5PVwiXCIsdGhpcy5sPSEwKTtmb3IodmFyIHQgaW4gdGhpcy5jKWlmKCEodCBpbiBhLmxheWVyU3RhdGVzKSl7YS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2godGhpcy5hai5iaW5kKHRoaXMpKTticmVha31hLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaChyaSl9ZWxzZSB0aGlzLmwmJlxuKHRoaXMuYS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMubD0hMSl9O2Z1bmN0aW9uIFdmKGEpe25pLmNhbGwodGhpcyxhKTt0aGlzLmNvbnRleHQ9bnVsbD09PXRoaXMuY29udGV4dD9udWxsOkxmKCk7dGhpcy5iPW51bGw7dGhpcy5mPVtdO3RoaXMuTT1CYSgpO3RoaXMueGE9bmV3IG9hKDAsMCwwLDApO3RoaXMudT1LZSgpO3RoaXMuWD0wfXYoV2YsbmkpO1dmLmhhbmRsZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm5cImNhbnZhc1wiPT09YSYmXCJUSUxFXCI9PT1iLkQoKX07V2YuY3JlYXRlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBXZihiKX07ZnVuY3Rpb24gdWkoYSxiKXtiPWIuc3RhdGU7YT1hLmEudSgpO3JldHVybiAyPT1ifHw0PT1ifHwzPT1iJiYhYX1cbldmLnByb3RvdHlwZS5MYj1mdW5jdGlvbihhLGIpe3ZhciBjPWEucGl4ZWxSYXRpbyxkPWEuc2l6ZSxlPWEudmlld1N0YXRlLGY9ZS5wcm9qZWN0aW9uLGc9ZS5yZXNvbHV0aW9uO2U9ZS5jZW50ZXI7dmFyIGg9dGhpcy5hLGs9aC4kKCksbT1rLmosbj1rLnlhKGYpLHA9b2MobixnLHRoaXMuWCkscT1uLmFbcF0sdD1NYXRoLnJvdW5kKGcvcSl8fDEsdT1hLmV4dGVudDt2b2lkIDAhPT1iLmV4dGVudCYmKHU9VWEodSxiLmV4dGVudCkpO2lmKFlhKHUpKXJldHVybiExO3ZhciB5PWRjKG4sdSxwKSxDPWtjKG4scCx5KSxEPWsuR2IoYyksST17fTtJW3BdPXt9O3ZhciBHPWNpKGssZixJKSxSPXRoaXMuTSxMPXRoaXMueGEsSj0hMSxWLEs7Zm9yKFY9eS5UO1Y8PXkuVzsrK1YpZm9yKEs9eS5SO0s8PXkuVTsrK0spe3ZhciBQPWsua2QocCxWLEssYyxmKTszPT1QLnN0YXRlJiYoaC51KCk/MDxoLkIoKSYmKEo9ITApOnZpKFAsMikpO3VpKHRoaXMsUCl8fChQPXdpKFApKTtpZih1aSh0aGlzLFxuUCkpe3ZhciBGPXcodGhpcyk7aWYoMj09UC5zdGF0ZSl7SVtwXVtQLnRhLnRvU3RyaW5nKCldPVA7dmFyIE1hPVAuZz8tMSE9PVAuZltGXTohMTtKfHwhTWEmJi0xIT09dGhpcy5mLmluZGV4T2YoUCl8fChKPSEwKX1pZigxPT09eGkoUCxGLGEudGltZSkpY29udGludWV9Rj1qYyhuLFAudGEsTCxSKTtNYT0hMTtGJiYoTWE9RyhwKzEsRikpO01hfHxmYyhuLFAudGEsRyxMLFIpfVA9YS52aWV3SGludHM7UD1QWzBdfHxQWzFdO2lmKCEodGhpcy5nJiYxNjxEYXRlLm5vdygpLWEudGltZSYmUHx8IUomJnRoaXMuYiYmSGEodGhpcy5iLHUpJiZ0aGlzLnVjPT1tJiZ0PT10aGlzLkomJihQfHxxKmMvRCp0PT10aGlzLmcpKSl7aWYoUD10aGlzLmNvbnRleHQpSz1rLmRjKHAsYyxmKSxWPU1hdGgucm91bmQoKHkuVy15LlQrMSkqS1swXS90KSxLPU1hdGgucm91bmQoKHkuVS15LlIrMSkqS1sxXS90KSxKPVAuY2FudmFzLEoud2lkdGghPVZ8fEouaGVpZ2h0IT1LPyh0aGlzLko9dCxKLndpZHRoPVxuVixKLmhlaWdodD1LKToodGhpcy5iJiYhT2EoQyx0aGlzLmIpJiZQLmNsZWFyUmVjdCgwLDAsVixLKSx0PXRoaXMuSik7dGhpcy5mLmxlbmd0aD0wO0o9T2JqZWN0LmtleXMoSSkubWFwKE51bWJlcik7Si5zb3J0KGZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9PT1wPzE6Yj09PXA/LTE6YT5iPzE6YTxiPy0xOjB9KTtGPTA7Zm9yKE1hPUoubGVuZ3RoO0Y8TWE7KytGKXtMPUpbRl07Rz1rLmRjKEwsYyxmKTtQPW4uYVtMXTt2YXIgRWM9UC9xO3ZhciBlYz1EKmsuYWUoZik7dmFyIENhPUlbTF07Zm9yKHZhciBGYyBpbiBDYSl7UD1DYVtGY107Sz1oYyhuLFAudGEsUik7Vj0oS1swXS1DWzBdKS9xKkQvdDtLPShDWzNdLUtbM10pL3EqRC90O3ZhciBKZD1HWzBdKkVjL3Q7dmFyIGFiPUdbMV0qRWMvdDt0aGlzLlVjKFAsYSxiLFYsSyxKZCxhYixlYyxwPT09TCk7dGhpcy5mLnB1c2goUCl9fXRoaXMudWM9bTt0aGlzLmc9cSpjL0QqdDt0aGlzLmI9Q31iPXRoaXMuZy9nO2I9UGUodGhpcy51LGMqXG5kWzBdLzIsYypkWzFdLzIsYixiLDAsKHRoaXMuYlswXS1lWzBdKS90aGlzLmcqYywoZVsxXS10aGlzLmJbM10pL3RoaXMuZypjKTtQZSh0aGlzLkgsYypkWzBdLzItYls0XSxjKmRbMV0vMi1iWzVdLGMvZywtYy9nLDAsLWVbMF0sLWVbMV0pO2hpKGEudXNlZFRpbGVzLGsscCx5KTtpaShhLGssbixjLGYsdSxwLGguQigpKTtmaShhLGspO2dpKGEsayk7cmV0dXJuIDA8dGhpcy5mLmxlbmd0aH07XG5XZi5wcm90b3R5cGUuVWM9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyxoLGspe2lmKGM9YS5iYSh0aGlzLmEpKXt2YXIgbT13KHRoaXMpLG49az94aShhLG0sYi50aW1lKToxOzEhPT1ufHx0aGlzLmEuJCgpLiRjKGIudmlld1N0YXRlLnByb2plY3Rpb24pfHx0aGlzLmNvbnRleHQuY2xlYXJSZWN0KGQsZSxmLGcpO3ZhciBwPW4hPT10aGlzLmNvbnRleHQuZ2xvYmFsQWxwaGE7cCYmKHRoaXMuY29udGV4dC5zYXZlKCksdGhpcy5jb250ZXh0Lmdsb2JhbEFscGhhPW4pO3RoaXMuY29udGV4dC5kcmF3SW1hZ2UoYyxoLGgsYy53aWR0aC0yKmgsYy5oZWlnaHQtMipoLGQsZSxmLGcpO3AmJnRoaXMuY29udGV4dC5yZXN0b3JlKCk7MSE9PW4/Yi5hbmltYXRlPSEwOmsmJmEuZyYmKGEuZlttXT0tMSl9fTtXZi5wcm90b3R5cGUuYmE9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnRleHQ7cmV0dXJuIGE/YS5jYW52YXM6bnVsbH07V2YucHJvdG90eXBlLkI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51fTt2YXIgeWk9e2hiOmZ1bmN0aW9uKCl7fX07XG4oZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGUsZixnLGgpe2Y9Znx8MDtnPWd8fGEubGVuZ3RoLTE7Zm9yKGg9aHx8ZDtnPmY7KXtpZig2MDA8Zy1mKXt2YXIgaz1nLWYrMSxuPWUtZisxLG09TWF0aC5sb2coaykscD0uNSpNYXRoLmV4cCgyKm0vMyk7bT0uNSpNYXRoLnNxcnQobSpwKihrLXApL2spKigwPm4tay8yPy0xOjEpO2IoYSxlLE1hdGgubWF4KGYsTWF0aC5mbG9vcihlLW4qcC9rK20pKSxNYXRoLm1pbihnLE1hdGguZmxvb3IoZSsoay1uKSpwL2srbSkpLGgpfWs9YVtlXTtuPWY7cD1nO2MoYSxmLGUpO2ZvcigwPGgoYVtnXSxrKSYmYyhhLGYsZyk7bjxwOyl7YyhhLG4scCk7bisrO2ZvcihwLS07MD5oKGFbbl0sayk7KW4rKztmb3IoOzA8aChhW3BdLGspOylwLS19MD09PWgoYVtmXSxrKT9jKGEsZixwKToocCsrLGMoYSxwLGcpKTtwPD1lJiYoZj1wKzEpO2U8PXAmJihnPXAtMSl9fWZ1bmN0aW9uIGMoYSxiLGMpe3ZhciBkPWFbYl07YVtiXT1hW2NdO2FbY109ZH1mdW5jdGlvbiBkKGEsXG5iKXtyZXR1cm4gYTxiPy0xOmE+Yj8xOjB9ZnVuY3Rpb24gZShhLGIpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGUpKXJldHVybiBuZXcgZShhLGIpO3RoaXMuSWM9TWF0aC5tYXgoNCxhfHw5KTt0aGlzLkxkPU1hdGgubWF4KDIsTWF0aC5jZWlsKC40KnRoaXMuSWMpKTtiJiZ0aGlzLlhmKGIpO3RoaXMuY2xlYXIoKX1mdW5jdGlvbiBmKGEsYil7ZyhhLDAsYS5jaGlsZHJlbi5sZW5ndGgsYixhKX1mdW5jdGlvbiBnKGEsYixjLGQsZSl7ZXx8KGU9dShudWxsKSk7ZS5UPUluZmluaXR5O2UuUj1JbmZpbml0eTtlLlc9LUluZmluaXR5O2UuVT0tSW5maW5pdHk7Zm9yKHZhciBmO2I8YztiKyspZj1hLmNoaWxkcmVuW2JdLGgoZSxhLnZhP2QoZik6Zik7cmV0dXJuIGV9ZnVuY3Rpb24gaChhLGIpe2EuVD1NYXRoLm1pbihhLlQsYi5UKTthLlI9TWF0aC5taW4oYS5SLGIuUik7YS5XPU1hdGgubWF4KGEuVyxiLlcpO2EuVT1NYXRoLm1heChhLlUsYi5VKX1mdW5jdGlvbiBrKGEsYil7cmV0dXJuIGEuVC1cbmIuVH1mdW5jdGlvbiBtKGEsYil7cmV0dXJuIGEuUi1iLlJ9ZnVuY3Rpb24gbihhKXtyZXR1cm4oYS5XLWEuVCkqKGEuVS1hLlIpfWZ1bmN0aW9uIHAoYSl7cmV0dXJuIGEuVy1hLlQrKGEuVS1hLlIpfWZ1bmN0aW9uIHEoYSxiKXtyZXR1cm4gYS5UPD1iLlQmJmEuUjw9Yi5SJiZiLlc8PWEuVyYmYi5VPD1hLlV9ZnVuY3Rpb24gdChhLGIpe3JldHVybiBiLlQ8PWEuVyYmYi5SPD1hLlUmJmIuVz49YS5UJiZiLlU+PWEuUn1mdW5jdGlvbiB1KGEpe3JldHVybntjaGlsZHJlbjphLGhlaWdodDoxLHZhOiEwLFQ6SW5maW5pdHksUjpJbmZpbml0eSxXOi1JbmZpbml0eSxVOi1JbmZpbml0eX19ZnVuY3Rpb24geShhLGIsYyxkLGUpe2Zvcih2YXIgZj1bYixjXSxnO2YubGVuZ3RoOyljPWYucG9wKCksYj1mLnBvcCgpLGMtYjw9ZHx8KGc9YitNYXRoLmNlaWwoKGMtYikvZC8yKSpkLEMoYSxnLGIsYyxlKSxmLnB1c2goYixnLGcsYykpfXZhciBDPWI7ZS5wcm90b3R5cGU9e2FsbDpmdW5jdGlvbigpe3JldHVybiB0aGlzLkhkKHRoaXMuZGF0YSxcbltdKX0sc2VhcmNoOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZGF0YSxjPVtdLGQ9dGhpcy5EYTtpZighdChhLGIpKXJldHVybiBjO2Zvcih2YXIgZT1bXSxmLGcsaCxrO2I7KXtmPTA7Zm9yKGc9Yi5jaGlsZHJlbi5sZW5ndGg7ZjxnO2YrKyloPWIuY2hpbGRyZW5bZl0saz1iLnZhP2QoaCk6aCx0KGEsaykmJihiLnZhP2MucHVzaChoKTpxKGEsayk/dGhpcy5IZChoLGMpOmUucHVzaChoKSk7Yj1lLnBvcCgpfXJldHVybiBjfSxnZzpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmRhdGEsYz10aGlzLkRhO2lmKCF0KGEsYikpcmV0dXJuITE7Zm9yKHZhciBkPVtdLGUsZixnLGg7Yjspe2U9MDtmb3IoZj1iLmNoaWxkcmVuLmxlbmd0aDtlPGY7ZSsrKWlmKGc9Yi5jaGlsZHJlbltlXSxoPWIudmE/YyhnKTpnLHQoYSxoKSl7aWYoYi52YXx8cShhLGgpKXJldHVybiEwO2QucHVzaChnKX1iPWQucG9wKCl9cmV0dXJuITF9LGxvYWQ6ZnVuY3Rpb24oYSl7aWYoIWF8fCFhLmxlbmd0aClyZXR1cm4gdGhpcztcbmlmKGEubGVuZ3RoPHRoaXMuTGQpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmRhKGFbYl0pO3JldHVybiB0aGlzfWE9dGhpcy5KZChhLnNsaWNlKCksMCxhLmxlbmd0aC0xLDApO3RoaXMuZGF0YS5jaGlsZHJlbi5sZW5ndGg/dGhpcy5kYXRhLmhlaWdodD09PWEuaGVpZ2h0P3RoaXMuT2QodGhpcy5kYXRhLGEpOih0aGlzLmRhdGEuaGVpZ2h0PGEuaGVpZ2h0JiYoYj10aGlzLmRhdGEsdGhpcy5kYXRhPWEsYT1iKSx0aGlzLktkKGEsdGhpcy5kYXRhLmhlaWdodC1hLmhlaWdodC0xLCEwKSk6dGhpcy5kYXRhPWE7cmV0dXJuIHRoaXN9LGRhOmZ1bmN0aW9uKGEpe2EmJnRoaXMuS2QoYSx0aGlzLmRhdGEuaGVpZ2h0LTEpO3JldHVybiB0aGlzfSxjbGVhcjpmdW5jdGlvbigpe3RoaXMuZGF0YT11KFtdKTtyZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIHRoaXM7Zm9yKHZhciBjPXRoaXMuZGF0YSxkPXRoaXMuRGEoYSksZT1bXSxmPVxuW10sZyxoLGssbjtjfHxlLmxlbmd0aDspe2N8fChjPWUucG9wKCksaD1lW2UubGVuZ3RoLTFdLGc9Zi5wb3AoKSxuPSEwKTtpZihjLnZhKXthOntrPWE7dmFyIG09Yy5jaGlsZHJlbixwPWI7aWYocCl7Zm9yKHZhciB0PTA7dDxtLmxlbmd0aDt0KyspaWYocChrLG1bdF0pKXtrPXQ7YnJlYWsgYX1rPS0xfWVsc2Ugaz1tLmluZGV4T2Yoayl9aWYoLTEhPT1rKXtjLmNoaWxkcmVuLnNwbGljZShrLDEpO2UucHVzaChjKTt0aGlzLlZmKGUpO2JyZWFrfX1ufHxjLnZhfHwhcShjLGQpP2g/KGcrKyxjPWguY2hpbGRyZW5bZ10sbj0hMSk6Yz1udWxsOihlLnB1c2goYyksZi5wdXNoKGcpLGc9MCxoPWMsYz1jLmNoaWxkcmVuWzBdKX1yZXR1cm4gdGhpc30sRGE6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LExjOmssTWM6bSx0b0pTT046ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfSxIZDpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthOylhLnZhP2IucHVzaC5hcHBseShiLGEuY2hpbGRyZW4pOlxuYy5wdXNoLmFwcGx5KGMsYS5jaGlsZHJlbiksYT1jLnBvcCgpO3JldHVybiBifSxKZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jLWIrMSxnPXRoaXMuSWM7aWYoZTw9Zyl7dmFyIGg9dShhLnNsaWNlKGIsYysxKSk7ZihoLHRoaXMuRGEpO3JldHVybiBofWR8fChkPU1hdGguY2VpbChNYXRoLmxvZyhlKS9NYXRoLmxvZyhnKSksZz1NYXRoLmNlaWwoZS9NYXRoLnBvdyhnLGQtMSkpKTtoPXUoW10pO2gudmE9ITE7aC5oZWlnaHQ9ZDtlPU1hdGguY2VpbChlL2cpO2c9ZSpNYXRoLmNlaWwoTWF0aC5zcXJ0KGcpKTt2YXIgaztmb3IoeShhLGIsYyxnLHRoaXMuTGMpO2I8PWM7Yis9Zyl7dmFyIG49TWF0aC5taW4oYitnLTEsYyk7eShhLGIsbixlLHRoaXMuTWMpO2ZvcihrPWI7azw9bjtrKz1lKXt2YXIgbT1NYXRoLm1pbihrK2UtMSxuKTtoLmNoaWxkcmVuLnB1c2godGhpcy5KZChhLGssbSxkLTEpKX19ZihoLHRoaXMuRGEpO3JldHVybiBofSxVZjpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGUsXG5mLGcsaCxrLG0scCxxOzspe2QucHVzaChiKTtpZihiLnZhfHxkLmxlbmd0aC0xPT09YylicmVhaztwPXE9SW5maW5pdHk7ZT0wO2ZvcihmPWIuY2hpbGRyZW4ubGVuZ3RoO2U8ZjtlKyspZz1iLmNoaWxkcmVuW2VdLGs9bihnKSxtPShNYXRoLm1heChnLlcsYS5XKS1NYXRoLm1pbihnLlQsYS5UKSkqKE1hdGgubWF4KGcuVSxhLlUpLU1hdGgubWluKGcuUixhLlIpKS1rLG08cT8ocT1tLHA9azxwP2s6cCxoPWcpOm09PT1xJiZrPHAmJihwPWssaD1nKTtiPWh8fGIuY2hpbGRyZW5bMF19cmV0dXJuIGJ9LEtkOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLkRhO2M9Yz9hOmQoYSk7ZD1bXTt2YXIgZT10aGlzLlVmKGMsdGhpcy5kYXRhLGIsZCk7ZS5jaGlsZHJlbi5wdXNoKGEpO2ZvcihoKGUsYyk7MDw9YjspaWYoZFtiXS5jaGlsZHJlbi5sZW5ndGg+dGhpcy5JYyl0aGlzLlpmKGQsYiksYi0tO2Vsc2UgYnJlYWs7dGhpcy5SZihjLGQsYil9LFpmOmZ1bmN0aW9uKGEsYil7dmFyIGM9YVtiXSxcbmQ9Yy5jaGlsZHJlbi5sZW5ndGgsZT10aGlzLkxkO3RoaXMuU2YoYyxlLGQpO2Q9dGhpcy5UZihjLGUsZCk7ZD11KGMuY2hpbGRyZW4uc3BsaWNlKGQsYy5jaGlsZHJlbi5sZW5ndGgtZCkpO2QuaGVpZ2h0PWMuaGVpZ2h0O2QudmE9Yy52YTtmKGMsdGhpcy5EYSk7ZihkLHRoaXMuRGEpO2I/YVtiLTFdLmNoaWxkcmVuLnB1c2goZCk6dGhpcy5PZChjLGQpfSxPZDpmdW5jdGlvbihhLGIpe3RoaXMuZGF0YT11KFthLGJdKTt0aGlzLmRhdGEuaGVpZ2h0PWEuaGVpZ2h0KzE7dGhpcy5kYXRhLnZhPSExO2YodGhpcy5kYXRhLHRoaXMuRGEpfSxUZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTt2YXIgZj1lPUluZmluaXR5O2ZvcihkPWI7ZDw9Yy1iO2QrKyl7dmFyIGg9ZyhhLDAsZCx0aGlzLkRhKTt2YXIgaz1nKGEsZCxjLHRoaXMuRGEpO3ZhciBtPU1hdGgubWF4KDAsTWF0aC5taW4oaC5XLGsuVyktTWF0aC5tYXgoaC5ULGsuVCkpKk1hdGgubWF4KDAsTWF0aC5taW4oaC5VLGsuVSktTWF0aC5tYXgoaC5SLFxuay5SKSk7aD1uKGgpK24oayk7aWYobTxmKXtmPW07dmFyIHA9ZDtlPWg8ZT9oOmV9ZWxzZSBtPT09ZiYmaDxlJiYoZT1oLHA9ZCl9cmV0dXJuIHB9LFNmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLnZhP3RoaXMuTGM6ayxlPWEudmE/dGhpcy5NYzptLGY9dGhpcy5JZChhLGIsYyxkKTtiPXRoaXMuSWQoYSxiLGMsZSk7ZjxiJiZhLmNoaWxkcmVuLnNvcnQoZCl9LElkOmZ1bmN0aW9uKGEsYixjLGQpe2EuY2hpbGRyZW4uc29ydChkKTtkPXRoaXMuRGE7dmFyIGU9ZyhhLDAsYixkKSxmPWcoYSxjLWIsYyxkKSxrPXAoZSkrcChmKSxuO2ZvcihuPWI7bjxjLWI7bisrKXt2YXIgbT1hLmNoaWxkcmVuW25dO2goZSxhLnZhP2QobSk6bSk7ays9cChlKX1mb3Iobj1jLWItMTtuPj1iO24tLSltPWEuY2hpbGRyZW5bbl0saChmLGEudmE/ZChtKTptKSxrKz1wKGYpO3JldHVybiBrfSxSZjpmdW5jdGlvbihhLGIsYyl7Zm9yKDswPD1jO2MtLSloKGJbY10sYSl9LFZmOmZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1cbmEubGVuZ3RoLTEsYzswPD1iO2ItLSkwPT09YVtiXS5jaGlsZHJlbi5sZW5ndGg/MDxiPyhjPWFbYi0xXS5jaGlsZHJlbixjLnNwbGljZShjLmluZGV4T2YoYVtiXSksMSkpOnRoaXMuY2xlYXIoKTpmKGFbYl0sdGhpcy5EYSl9LFhmOmZ1bmN0aW9uKGEpe3ZhciBiPVtcInJldHVybiBhXCIsXCIgLSBiXCIsXCI7XCJdO3RoaXMuTGM9bmV3IEZ1bmN0aW9uKFwiYVwiLFwiYlwiLGIuam9pbihhWzBdKSk7dGhpcy5NYz1uZXcgRnVuY3Rpb24oXCJhXCIsXCJiXCIsYi5qb2luKGFbMV0pKTt0aGlzLkRhPW5ldyBGdW5jdGlvbihcImFcIixcInJldHVybiB7bWluWDogYVwiK2FbMF0rXCIsIG1pblk6IGFcIithWzFdK1wiLCBtYXhYOiBhXCIrYVsyXStcIiwgbWF4WTogYVwiK2FbM10rXCJ9O1wiKX19O2FbXCJkZWZhdWx0XCJdPWV9KSh5aS5oYj15aS5oYnx8e30pO3lpLmhiPXlpLmhiLmRlZmF1bHQ7ZnVuY3Rpb24gemkoKXt9O2Z1bmN0aW9uIEFpKGEsYixjLGQpe3ZhciBlPWFbYl0sZj1hW2IrMV0sZz0wO2ZvcihiKz1kO2I8YztiKz1kKXt2YXIgaD1hW2JdLGs9YVtiKzFdO2crPU1hdGguc3FydCgoaC1lKSooaC1lKSsoay1mKSooay1mKSk7ZT1oO2Y9a31yZXR1cm4gZ307ZnVuY3Rpb24gQmkoYSxiLGMsZCxlLGYpe3RoaXMuWD1mO3RoaXMuZmE9QmEoKTt0aGlzLiRhPWE7dGhpcy5SYT1iO3RoaXMub3ZlcmxhcHM9ZTt0aGlzLnBpeGVsUmF0aW89ZDt0aGlzLko9MDt0aGlzLnJlc29sdXRpb249Yzt0aGlzLmI9dGhpcy5DYT10aGlzLmthPW51bGw7dGhpcy5jPVtdO3RoaXMuY29vcmRpbmF0ZXM9W107dGhpcy5lYT17fTt0aGlzLk09S2UoKTt0aGlzLmE9W107dGhpcy5pYT1udWxsO3RoaXMuc3RhdGU9e307dGhpcy5sYT1LZSgpfXYoQmksU2gpO1xuZnVuY3Rpb24gQ2koYSxiLGMsZCxlLGYsZyxoLGssbSxuLHAscSx0LHUseSl7dmFyIEM9YS5sYTtmKj10O2cqPXQ7Yy09ZjtkLT1nO3UmJihjPU1hdGgucm91bmQoYyksZD1NYXRoLnJvdW5kKGQpKTt1PXkrbj5lLndpZHRoP2Uud2lkdGgtbjp5O2s9aytwPmUuaGVpZ2h0P2UuaGVpZ2h0LXA6azthPWEuZmE7eT1udWxsOzAhPT1xPyhmPWMrZixnPWQrZyx5PVBlKEMsZixnLDEsMSxxLC1mLC1nKSxLYShhKSxEYShhLE9lKEMsW2MsZF0pKSxEYShhLE9lKEMsW2MrdSxkXSkpLERhKGEsT2UoQyxbYyt1LGQra10pKSxEYShhLE9lKEMsW2MsZCt1XSkpKTpKYShjLGQsYyt1KnQsZCtrKnQsYSk7cT1iLmNhbnZhcztxPWFbMF08PXEud2lkdGgmJjA8PWFbMl0mJmFbMV08PXEuaGVpZ2h0JiYwPD1hWzNdO2lmKGgpe2lmKHF8fDEhPWhbNF0pUGEoaCxhKSxoLnB1c2gocT9bYix5P3kuc2xpY2UoMCk6bnVsbCxtLGUsbixwLHUsayxjLGQsdF06bnVsbCl9ZWxzZSBxJiZFaChiLHksbSxlLG4scCx1LFxuayxjLGQsdCl9ZnVuY3Rpb24gRGkoYSxiKXt2YXIgYz1hLnBpeGVsUmF0aW87cmV0dXJuIDE9PWM/YjpiLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYSpjfSl9XG5mdW5jdGlvbiBFaShhLGIsYyxkLGUsZixnKXt2YXIgaD1hLmNvb3JkaW5hdGVzLmxlbmd0aCxrPUZpKGEpO2cmJihjKz1lKTtnPVtiW2NdLGJbYysxXV07dmFyIG09W05hTixOYU5dLG49ITAscDtmb3IocD1jK2U7cDxkO3ArPWUpe21bMF09YltwXTttWzFdPWJbcCsxXTt2YXIgcT1rWzFdO3ZhciB0PWtbMl0sdT1rWzNdLHk9bVswXSxDPW1bMV0sRD0wO3k8a1swXT9EfD0xNjp5PnQmJihEfD00KTtDPHE/RHw9ODpDPnUmJihEfD0yKTswPT09RCYmKEQ9MSk7cT1EO3EhPT1JPyhuJiYoYS5jb29yZGluYXRlc1toKytdPWdbMF0sYS5jb29yZGluYXRlc1toKytdPWdbMV0pLGEuY29vcmRpbmF0ZXNbaCsrXT1tWzBdLGEuY29vcmRpbmF0ZXNbaCsrXT1tWzFdLG49ITEpOjE9PT1xPyhhLmNvb3JkaW5hdGVzW2grK109bVswXSxhLmNvb3JkaW5hdGVzW2grK109bVsxXSxuPSExKTpuPSEwO2dbMF09bVswXTtnWzFdPW1bMV07dmFyIEk9cX1pZihmJiZufHxwPT09YytlKWEuY29vcmRpbmF0ZXNbaCsrXT1cbmdbMF0sYS5jb29yZGluYXRlc1toKytdPWdbMV07cmV0dXJuIGh9ZnVuY3Rpb24gR2koYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz0wLGg9ZC5sZW5ndGg7ZzxoOysrZyl7dmFyIGs9ZFtnXTtjPUVpKGEsYixjLGssZSwhMSwhMSk7Zi5wdXNoKGMpO2M9a31yZXR1cm4gY31sPUJpLnByb3RvdHlwZTtcbmwuV2Q9ZnVuY3Rpb24oYSxiLGMpe0hpKHRoaXMsYik7dmFyIGQ9YS5EKCksZT1hLmdhKCksZj10aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCxnO2lmKFwiTXVsdGlQb2x5Z29uXCI9PWQpe2Q9JGgoYSk7dmFyIGg9W107Zm9yKHZhciBrPWEuRWIoKSxtPWc9MCxuPWsubGVuZ3RoO208bjsrK20pe3ZhciBwPVtdO2c9R2kodGhpcyxkLGcsa1ttXSxlLHApO2gucHVzaChwKX10aGlzLmMucHVzaChbNCxmLGgsYSxjLGZmXSl9ZWxzZVwiUG9seWdvblwiPT1kfHxcIk11bHRpTGluZVN0cmluZ1wiPT1kPyhoPVtdLGQ9XCJQb2x5Z29uXCI9PWQ/YS5YYSgpOmEuYWEoKSxHaSh0aGlzLGQsMCxhLk1hKCksZSxoKSx0aGlzLmMucHVzaChbNCxmLGgsYSxjLGVmXSkpOlwiTGluZVN0cmluZ1wiPT1kfHxcIk11bHRpUG9pbnRcIj09ZD8oZD1hLmFhKCksZT1FaSh0aGlzLGQsMCxkLmxlbmd0aCxlLCExLCExKSx0aGlzLmMucHVzaChbNCxmLGUsYSxjLGRmXSkpOlwiUG9pbnRcIj09ZCYmKGQ9YS5hYSgpLHRoaXMuY29vcmRpbmF0ZXMucHVzaChkWzBdLFxuZFsxXSksZT10aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCx0aGlzLmMucHVzaChbNCxmLGUsYSxjXSkpO0lpKHRoaXMsYil9O2Z1bmN0aW9uIEhpKGEsYil7YS5rYT1bMCxiLDBdO2EuYy5wdXNoKGEua2EpO2EuQ2E9WzAsYiwwXTthLmEucHVzaChhLkNhKX1sLnBhPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5HYSl7dmFyIGM9T2UodGhpcy5NLHRoaXMuR2Euc2xpY2UoKSk7YS50cmFuc2xhdGUoY1swXSxjWzFdKTthLnJvdGF0ZShiKX1hLmZpbGwoKTt0aGlzLkdhJiZhLnNldFRyYW5zZm9ybS5hcHBseShhLERoKX07ZnVuY3Rpb24gSmkoYSxiKXtpZihiJiY1PGIubGVuZ3RoKXt2YXIgYz1iWzRdO2lmKDE9PWN8fGM9PWIubGVuZ3RoLTUpe2M9e1Q6YlswXSxSOmJbMV0sVzpiWzJdLFU6YlszXX07aWYoIWEuWC5nZyhjKSlmb3IoYS5YLmRhKGMpLGE9NSxjPWIubGVuZ3RoO2E8YzsrK2EpYlthXSYmRWguYXBwbHkodm9pZCAwLGJbYV0pO2IubGVuZ3RoPTU7S2EoYil9fX1cbmZ1bmN0aW9uIEtpKGEsYixjLGQsZSxmLGcsaCl7aWYoYS5pYSYmVmIoYyxhLk0pKXZhciBrPWEuaWE7ZWxzZSBhLmlhfHwoYS5pYT1bXSksaz1JZShhLmNvb3JkaW5hdGVzLDAsYS5jb29yZGluYXRlcy5sZW5ndGgsMixjLGEuaWEpLE5lKGEuTSxjKTtmb3IodmFyIG09IWRiKGUpLG49MCxwPWYubGVuZ3RoLHEsdCx1LHksQyxELEksRyxSLEw9MCxKPTAsVj1hLmVhLEs9e2NvbnRleHQ6YixwaXhlbFJhdGlvOmEucGl4ZWxSYXRpbyxyZXNvbHV0aW9uOmEucmVzb2x1dGlvbixyb3RhdGlvbjpkfSxQPWEuYyE9Znx8YS5vdmVybGFwcz8wOjIwMDtuPHA7KXt2YXIgRj1mW25dO3N3aXRjaChGWzBdKXtjYXNlIDA6dmFyIE1hPUZbMV07bSYmZVt3KE1hKS50b1N0cmluZygpXXx8IU1hLk8oKT9uPUZbMl06dm9pZCAwPT09aHx8VmEoaCxNYS5PKCkuSSgpKT8rK246bj1GWzJdKzE7YnJlYWs7Y2FzZSAxOkw+UCYmKGEucGEoYixkKSxMPTApO0o+UCYmKGIuc3Ryb2tlKCksSj0wKTtMfHxKfHwoYi5iZWdpblBhdGgoKSxcbkM9RD1OYU4pOysrbjticmVhaztjYXNlIDI6cT1GWzFdO3ZhciBFYz1rW3FdLGVjPWtbcSsxXSxDYT1rW3ErMl0tRWMsRmM9a1txKzNdLWVjLEpkPU1hdGguc3FydChDYSpDYStGYypGYyk7Yi5tb3ZlVG8oRWMrSmQsZWMpO2IuYXJjKEVjLGVjLEpkLDAsMipNYXRoLlBJLCEwKTsrK247YnJlYWs7Y2FzZSAzOmIuY2xvc2VQYXRoKCk7KytuO2JyZWFrO2Nhc2UgNDpxPUZbMV07dD1GWzJdO3ZhciBhYj1GWzRdLCRhPTY9PUYubGVuZ3RoP0ZbNV06dm9pZCAwO0suZ2VvbWV0cnk9RlszXTtLLmZlYXR1cmU9TWE7biBpbiBWfHwoVltuXT1bXSk7dmFyIERjPVZbbl07JGE/JGEoayxxLHQsMixEYyk6KERjWzBdPWtbcV0sRGNbMV09a1txKzFdLERjLmxlbmd0aD0yKTthYihEYyxLKTsrK247YnJlYWs7Y2FzZSA2OnE9RlsxXTt0PUZbMl07dmFyIEtkPUZbM107dT1GWzRdO3k9Rls1XTtSPUZbNl07dmFyIHllPUZbN10sSGg9Rls4XSxIYz1GWzldLG5vPUZbMTBdLHVrPUZbMTJdLG9vPUZbMTNdLFxucG89RlsxNF0scW89RlsxNV07Zm9yKEZbMTFdJiYodWsrPWQpO3E8dDtxKz0yKUNpKGEsYixrW3FdLGtbcSsxXSxLZCx1LHksUix5ZSxIaCxIYyxubyx1ayxvbyxwbyxxbyk7SmkoYSxSKTsrK247YnJlYWs7Y2FzZSA1OnZhciB2az1GWzFdLHdrPUZbMl0sSWg9RlszXTtSPUZbNF07dmFyIHJvPUZbNV0sc289Rls2XSx0bz1GWzddLHhrPUZbOF0seWs9Rls5XSx1bz1GWzEwXSx6az1GWzExXSxBaz1GWzEyXSx2bz1GWzEzXSxCaz1GWzE0XSxDaz1BaShrLHZrLHdrLDIpLERrPXhrKEFrKTtpZihyb3x8RGs8PUNrKXthOnt2YXIgRGY9dm9pZCAwLGNkPXZvaWQgMCxJYz1rLFRiPXZrLEVrPXdrLEZrPUFrLHdvPXhrLEdrPShDay1Eaykqdm8seG89dG8sSmg9W10semU9SWNbVGJdPkljW0VrLTJdLEhrPUZrLmxlbmd0aCxBZT1JY1tUYl0sQmU9SWNbVGIrMV07VGIrPTI7Zm9yKHZhciBMZD1JY1tUYl0sTWQ9SWNbVGIrMV0sS2g9MCxFZj1NYXRoLnNxcnQoTWF0aC5wb3coTGQtQWUsMikrTWF0aC5wb3coTWQtXG5CZSwyKSksZGQ9XCJcIixMaD0wLEZmPTA7RmY8SGs7KytGZil7dmFyIHlvPXplP0hrLUZmLTE6RmY7dmFyIE1oPUZrLmNoYXJBdCh5byk7ZGQ9emU/TWgrZGQ6ZGQrTWg7dmFyIE5kPXdvKGRkKS1MaDtMaCs9TmQ7Zm9yKHZhciBJaz1HaytOZC8yO1RiPEVrLTImJktoK0VmPElrOylBZT1MZCxCZT1NZCxUYis9MixMZD1JY1tUYl0sTWQ9SWNbVGIrMV0sS2grPUVmLEVmPU1hdGguc3FydChNYXRoLnBvdyhMZC1BZSwyKStNYXRoLnBvdyhNZC1CZSwyKSk7dmFyIHpvPUlrLUtoLE9kPU1hdGguYXRhbjIoTWQtQmUsTGQtQWUpO3plJiYoT2QrPTA8T2Q/LU1hdGguUEk6TWF0aC5QSSk7aWYodm9pZCAwIT09RGYpe3ZhciBHZj1PZC1EZjtHZis9R2Y+TWF0aC5QST8tMipNYXRoLlBJOkdmPC1NYXRoLlBJPzIqTWF0aC5QSTowO2lmKE1hdGguYWJzKEdmKT54byl7dmFyIFBkPW51bGw7YnJlYWsgYX19dmFyIEprPXpvL0VmLEtrPXdhKEFlLExkLEprKSxMaz13YShCZSxNZCxKayk7RGY9PU9kPyh6ZSYmXG4oY2RbMF09S2ssY2RbMV09TGssY2RbMl09TmQvMiksY2RbNF09ZGQpOihkZD1NaCxMaD1OZCxjZD1bS2ssTGssTmQvMixPZCxkZF0semU/SmgudW5zaGlmdChjZCk6SmgucHVzaChjZCksRGY9T2QpO0drKz1OZH1QZD1KaH1pZihQZCl7dmFyIEhmO2lmKHVvKXt2YXIgZWQ9MDtmb3IoSGY9UGQubGVuZ3RoO2VkPEhmOysrZWQpe3ZhciBFYj1QZFtlZF07dmFyIE5oPUViWzRdO3ZhciBnYz1hLmJhKE5oLCExLCEwKTt1PUViWzJdK3prO3k9SWgqZ2MuaGVpZ2h0KzIqKC41LUloKSp6ay15aztDaShhLGIsRWJbMF0sRWJbMV0sZ2MsdSx5LFIsZ2MuaGVpZ2h0LDEsMCwwLEViWzNdLEJrLCExLGdjLndpZHRoKX19aWYoc28pZm9yKGVkPTAsSGY9UGQubGVuZ3RoO2VkPEhmOysrZWQpRWI9UGRbZWRdLE5oPUViWzRdLGdjPWEuYmEoTmgsITAsITEpLHU9RWJbMl0seT1JaCpnYy5oZWlnaHQteWssQ2koYSxiLEViWzBdLEViWzFdLGdjLHUseSxSLGdjLmhlaWdodCwxLDAsMCxFYlszXSxCaywhMSxcbmdjLndpZHRoKX19SmkoYSxSKTsrK247YnJlYWs7Y2FzZSA3OmlmKHZvaWQgMCE9PWcpe01hPUZbMV07dmFyIE1rPWcoTWEpO2lmKE1rKXJldHVybiBNa30rK247YnJlYWs7Y2FzZSA4OlA/TCsrOmEucGEoYixkKTsrK247YnJlYWs7Y2FzZSA5OnE9RlsxXTt0PUZbMl07dmFyIENlPWtbcV07dmFyIERlPWtbcSsxXTtJPUNlKy41fDA7Rz1EZSsuNXwwO2lmKEkhPT1DfHxHIT09RCliLm1vdmVUbyhDZSxEZSksQz1JLEQ9Rztmb3IocSs9MjtxPHQ7cSs9MilpZihDZT1rW3FdLERlPWtbcSsxXSxJPUNlKy41fDAsRz1EZSsuNXwwLHE9PXQtMnx8SSE9PUN8fEchPT1EKWIubGluZVRvKENlLERlKSxDPUksRD1HOysrbjticmVhaztjYXNlIDEwOmEuR2E9RlsyXTtMJiYoYS5wYShiLGQpLEw9MCxKJiYoYi5zdHJva2UoKSxKPTApKTtiLmZpbGxTdHlsZT1GWzFdOysrbjticmVhaztjYXNlIDExOkomJihiLnN0cm9rZSgpLEo9MCk7Yi5zdHJva2VTdHlsZT1GWzFdO2IubGluZVdpZHRoPUZbMl07Yi5saW5lQ2FwPVxuRlszXTtiLmxpbmVKb2luPUZbNF07Yi5taXRlckxpbWl0PUZbNV07a2QmJihiLmxpbmVEYXNoT2Zmc2V0PUZbN10sYi5zZXRMaW5lRGFzaChGWzZdKSk7KytuO2JyZWFrO2Nhc2UgMTI6UD9KKys6Yi5zdHJva2UoKTsrK247YnJlYWs7ZGVmYXVsdDorK259fUwmJmEucGEoYixkKTtKJiZiLnN0cm9rZSgpfWwuWWE9ZnVuY3Rpb24oYSxiLGMsZCl7S2kodGhpcyxhLGIsYyxkLHRoaXMuYyx2b2lkIDAsdm9pZCAwKX07ZnVuY3Rpb24gTGkoYSl7dmFyIGI9YS5hO2IucmV2ZXJzZSgpO3ZhciBjLGQ9Yi5sZW5ndGgsZT0tMTtmb3IoYz0wO2M8ZDsrK2Mpe3ZhciBmPWJbY107dmFyIGc9ZlswXTtpZig3PT1nKWU9YztlbHNlIGlmKDA9PWcpe2ZbMl09YztmPWEuYTtmb3IoZz1jO2U8Zzspe3ZhciBoPWZbZV07ZltlXT1mW2ddO2ZbZ109aDsrK2U7LS1nfWU9LTF9fX1cbmwua2I9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnN0YXRlO2E/KGE9YS5hLGMuZmlsbFN0eWxlPVJoKGE/YTp3aCkpOmMuZmlsbFN0eWxlPXZvaWQgMDtiPyhhPWIuYyxjLnN0cm9rZVN0eWxlPVJoKGE/YTp5aCksYT1iLmIsYy5saW5lQ2FwPXZvaWQgMCE9PWE/YTpcInJvdW5kXCIsYT1iLmwsYy5saW5lRGFzaD1hP2Euc2xpY2UoKTp4aCxhPWIuZyxjLmxpbmVEYXNoT2Zmc2V0PWE/YTowLGE9Yi5mLGMubGluZUpvaW49dm9pZCAwIT09YT9hOlwicm91bmRcIixhPWIuaixjLmxpbmVXaWR0aD12b2lkIDAhPT1hP2E6MSxiPWIudixjLm1pdGVyTGltaXQ9dm9pZCAwIT09Yj9iOjEwLGMubGluZVdpZHRoPnRoaXMuSiYmKHRoaXMuSj1jLmxpbmVXaWR0aCx0aGlzLmI9bnVsbCkpOihjLnN0cm9rZVN0eWxlPXZvaWQgMCxjLmxpbmVDYXA9dm9pZCAwLGMubGluZURhc2g9bnVsbCxjLmxpbmVEYXNoT2Zmc2V0PXZvaWQgMCxjLmxpbmVKb2luPXZvaWQgMCxjLmxpbmVXaWR0aD12b2lkIDAsYy5taXRlckxpbWl0PVxudm9pZCAwKX07ZnVuY3Rpb24gTWkoYSxiLGMpe3ZhciBkPWIuc3Ryb2tlU3R5bGUsZT1iLmxpbmVDYXAsZj1iLmxpbmVEYXNoLGc9Yi5saW5lRGFzaE9mZnNldCxoPWIubGluZUpvaW4saz1iLmxpbmVXaWR0aCxtPWIubWl0ZXJMaW1pdDtiLm9nPT1kJiZiLmlnPT1lJiZWYihiLmpnLGYpJiZiLmtnPT1nJiZiLmxnPT1oJiZiLm1nPT1rJiZiLm5nPT1tfHwoYyYmKHZvaWQgMCE9Yi5JYiYmYi5JYiE9YS5jb29yZGluYXRlcy5sZW5ndGgmJihhLmMucHVzaChbMTJdKSxiLkliPWEuY29vcmRpbmF0ZXMubGVuZ3RoKSxiLkliPTApLGEuYy5wdXNoKFsxMSxkLGsqYS5waXhlbFJhdGlvLGUsaCxtLERpKGEsZiksZyphLnBpeGVsUmF0aW9dKSxjJiZhLmMucHVzaChbMV0pLGIub2c9ZCxiLmlnPWUsYi5qZz1mLGIua2c9ZyxiLmxnPWgsYi5tZz1rLGIubmc9bSl9XG5mdW5jdGlvbiBJaShhLGIpe2Eua2FbMl09YS5jLmxlbmd0aDthLmthPW51bGw7YS5DYVsyXT1hLmEubGVuZ3RoO2EuQ2E9bnVsbDtiPVs3LGJdO2EuYy5wdXNoKGIpO2EuYS5wdXNoKGIpfWwubGM9bGE7ZnVuY3Rpb24gRmkoYSl7YS5ifHwoYS5iPUZhKGEuUmEpLDA8YS5KJiZFYShhLmIsYS5yZXNvbHV0aW9uKihhLkorMSkvMixhLmIpKTtyZXR1cm4gYS5ifTtmdW5jdGlvbiBOaShhLGIsYyxkLGUsZil7QmkuY2FsbCh0aGlzLGEsYixjLGQsZSxmKTt0aGlzLkw9dGhpcy5LPXRoaXMuQT1udWxsO3RoaXMuQz10aGlzLkg9dGhpcy5vPXRoaXMuaT10aGlzLnY9dGhpcy51PXRoaXMuQj10aGlzLmY9dGhpcy5nPXRoaXMuaj10aGlzLmw9dm9pZCAwfXYoTmksQmkpO1xuTmkucHJvdG90eXBlLlNjPWZ1bmN0aW9uKGEsYil7aWYodGhpcy5MKXtIaSh0aGlzLGIpO3ZhciBjPWEuYWEoKSxkPXRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO2E9RWkodGhpcyxjLDAsYy5sZW5ndGgsYS5nYSgpLCExLCExKTt0aGlzLmMucHVzaChbNixkLGEsdGhpcy5MLHRoaXMubCx0aGlzLmosdGhpcy5BLHRoaXMuZyx0aGlzLmYsdGhpcy5CLHRoaXMudSx0aGlzLnYsdGhpcy5pLHRoaXMubyp0aGlzLnBpeGVsUmF0aW8sdGhpcy5ILHRoaXMuQ10pO3RoaXMuYS5wdXNoKFs2LGQsYSx0aGlzLkssdGhpcy5sLHRoaXMuaix0aGlzLkEsdGhpcy5nLHRoaXMuZix0aGlzLkIsdGhpcy51LHRoaXMudix0aGlzLmksdGhpcy5vLHRoaXMuSCx0aGlzLkNdKTtJaSh0aGlzLGIpfX07XG5OaS5wcm90b3R5cGUuUWM9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLkwpe0hpKHRoaXMsYik7dmFyIGM9YS5hYSgpLGQ9dGhpcy5jb29yZGluYXRlcy5sZW5ndGg7YT1FaSh0aGlzLGMsMCxjLmxlbmd0aCxhLmdhKCksITEsITEpO3RoaXMuYy5wdXNoKFs2LGQsYSx0aGlzLkwsdGhpcy5sLHRoaXMuaix0aGlzLkEsdGhpcy5nLHRoaXMuZix0aGlzLkIsdGhpcy51LHRoaXMudix0aGlzLmksdGhpcy5vKnRoaXMucGl4ZWxSYXRpbyx0aGlzLkgsdGhpcy5DXSk7dGhpcy5hLnB1c2goWzYsZCxhLHRoaXMuSyx0aGlzLmwsdGhpcy5qLHRoaXMuQSx0aGlzLmcsdGhpcy5mLHRoaXMuQix0aGlzLnUsdGhpcy52LHRoaXMuaSx0aGlzLm8sdGhpcy5ILHRoaXMuQ10pO0lpKHRoaXMsYil9fTtcbk5pLnByb3RvdHlwZS5sYz1mdW5jdGlvbigpe0xpKHRoaXMpO3RoaXMuaj10aGlzLmw9dm9pZCAwO3RoaXMuTD10aGlzLks9bnVsbDt0aGlzLkM9dGhpcy5IPXRoaXMuaT10aGlzLnY9dGhpcy51PXRoaXMuQj10aGlzLmY9dGhpcy5vPXRoaXMuZz12b2lkIDB9O05pLnByb3RvdHlwZS53Yz1mdW5jdGlvbihhLGIpe3ZhciBjPWEuJGIoKSxkPWEueWIoKSxlPWEuU2UoMSksZj1hLmJhKDEpLGc9YS5vYygpO3RoaXMubD1jWzBdO3RoaXMuaj1jWzFdO3RoaXMuQT1iO3RoaXMuSz1lO3RoaXMuTD1mO3RoaXMuZz1kWzFdO3RoaXMuZj1hLmI7dGhpcy5CPWdbMF07dGhpcy51PWdbMV07dGhpcy52PWEuQjt0aGlzLmk9YS5pO3RoaXMubz1hLmo7dGhpcy5IPWEubzt0aGlzLkM9ZFswXX07ZnVuY3Rpb24gT2koYSxiLGMsZCxlLGYpe0JpLmNhbGwodGhpcyxhLGIsYyxkLGUsZil9dihPaSxCaSk7ZnVuY3Rpb24gUGkoYSxiLGMsZCxlKXt2YXIgZj1hLmNvb3JkaW5hdGVzLmxlbmd0aDtiPUVpKGEsYixjLGQsZSwhMSwhMSk7Zj1bOSxmLGJdO2EuYy5wdXNoKGYpO2EuYS5wdXNoKGYpO3JldHVybiBkfU9pLnByb3RvdHlwZS5PYz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc3RhdGUsZD1jLmxpbmVXaWR0aDt2b2lkIDAhPT1jLnN0cm9rZVN0eWxlJiZ2b2lkIDAhPT1kJiYoTWkodGhpcyxjLCEwKSxIaSh0aGlzLGIpLHRoaXMuYS5wdXNoKFsxMSxjLnN0cm9rZVN0eWxlLGMubGluZVdpZHRoLGMubGluZUNhcCxjLmxpbmVKb2luLGMubWl0ZXJMaW1pdCxjLmxpbmVEYXNoLGMubGluZURhc2hPZmZzZXRdLFsxXSksYz1hLmFhKCksUGkodGhpcyxjLDAsYy5sZW5ndGgsYS5nYSgpKSx0aGlzLmEucHVzaChbMTJdKSxJaSh0aGlzLGIpKX07XG5PaS5wcm90b3R5cGUuUGM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLnN0YXRlLGQ9Yy5saW5lV2lkdGg7aWYodm9pZCAwIT09Yy5zdHJva2VTdHlsZSYmdm9pZCAwIT09ZCl7TWkodGhpcyxjLCEwKTtIaSh0aGlzLGIpO3RoaXMuYS5wdXNoKFsxMSxjLnN0cm9rZVN0eWxlLGMubGluZVdpZHRoLGMubGluZUNhcCxjLmxpbmVKb2luLGMubWl0ZXJMaW1pdCxjLmxpbmVEYXNoLGMubGluZURhc2hPZmZzZXRdLFsxXSk7Yz1hLk1hKCk7ZD1hLmFhKCk7YT1hLmdhKCk7dmFyIGU9MCxmO3ZhciBnPTA7Zm9yKGY9Yy5sZW5ndGg7ZzxmOysrZyllPVBpKHRoaXMsZCxlLGNbZ10sYSk7dGhpcy5hLnB1c2goWzEyXSk7SWkodGhpcyxiKX19O09pLnByb3RvdHlwZS5sYz1mdW5jdGlvbigpe3ZhciBhPXRoaXMuc3RhdGU7dm9pZCAwIT1hLkliJiZhLkliIT10aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCYmdGhpcy5jLnB1c2goWzEyXSk7TGkodGhpcyk7dGhpcy5zdGF0ZT1udWxsfTtmdW5jdGlvbiBRaShhLGIsYyxkLGUsZil7QmkuY2FsbCh0aGlzLGEsYixjLGQsZSxmKX12KFFpLEJpKTtmdW5jdGlvbiBSaShhLGIsYyxkLGUpe3ZhciBmPWEuc3RhdGUsZz12b2lkIDAhPT1mLmZpbGxTdHlsZTtmPXZvaWQgMCE9Zi5zdHJva2VTdHlsZTt2YXIgaD1kLmxlbmd0aCxrPVsxXTthLmMucHVzaChrKTthLmEucHVzaChrKTtmb3Ioaz0wO2s8aDsrK2spe3ZhciBtPWRba10sbj1hLmNvb3JkaW5hdGVzLmxlbmd0aDtjPUVpKGEsYixjLG0sZSwhMCwhZik7Yz1bOSxuLGNdO2EuYy5wdXNoKGMpO2EuYS5wdXNoKGMpO2YmJihjPVszXSxhLmMucHVzaChjKSxhLmEucHVzaChjKSk7Yz1tfWI9WzhdO2EuYS5wdXNoKGIpO2cmJmEuYy5wdXNoKGIpO2YmJihnPVsxMl0sYS5jLnB1c2goZyksYS5hLnB1c2goZykpO3JldHVybiBjfVxuUWkucHJvdG90eXBlLk5jPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5zdGF0ZSxkPWMuc3Ryb2tlU3R5bGU7aWYodm9pZCAwIT09Yy5maWxsU3R5bGV8fHZvaWQgMCE9PWQpe1NpKHRoaXMsYSk7SGkodGhpcyxiKTt0aGlzLmEucHVzaChbMTAsT2god2gpXSk7dm9pZCAwIT09Yy5zdHJva2VTdHlsZSYmdGhpcy5hLnB1c2goWzExLGMuc3Ryb2tlU3R5bGUsYy5saW5lV2lkdGgsYy5saW5lQ2FwLGMubGluZUpvaW4sYy5taXRlckxpbWl0LGMubGluZURhc2gsYy5saW5lRGFzaE9mZnNldF0pO3ZhciBlPWEuYWEoKTtkPXRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO0VpKHRoaXMsZSwwLGUubGVuZ3RoLGEuZ2EoKSwhMSwhMSk7YT1bMV07ZD1bMixkXTt0aGlzLmMucHVzaChhLGQpO3RoaXMuYS5wdXNoKGEsZCk7YT1bOF07dGhpcy5hLnB1c2goYSk7dm9pZCAwIT09Yy5maWxsU3R5bGUmJnRoaXMuYy5wdXNoKGEpO3ZvaWQgMCE9PWMuc3Ryb2tlU3R5bGUmJihjPVsxMl0sdGhpcy5jLnB1c2goYyksXG50aGlzLmEucHVzaChjKSk7SWkodGhpcyxiKX19O1FpLnByb3RvdHlwZS5UYz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc3RhdGU7U2kodGhpcyxhKTtIaSh0aGlzLGIpO3RoaXMuYS5wdXNoKFsxMCxPaCh3aCldKTt2b2lkIDAhPT1jLnN0cm9rZVN0eWxlJiZ0aGlzLmEucHVzaChbMTEsYy5zdHJva2VTdHlsZSxjLmxpbmVXaWR0aCxjLmxpbmVDYXAsYy5saW5lSm9pbixjLm1pdGVyTGltaXQsYy5saW5lRGFzaCxjLmxpbmVEYXNoT2Zmc2V0XSk7Yz1hLk1hKCk7dmFyIGQ9YS5YYSgpO1JpKHRoaXMsZCwwLGMsYS5nYSgpKTtJaSh0aGlzLGIpfTtcblFpLnByb3RvdHlwZS5SYz1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuc3RhdGUsZD1jLnN0cm9rZVN0eWxlO2lmKHZvaWQgMCE9PWMuZmlsbFN0eWxlfHx2b2lkIDAhPT1kKXtTaSh0aGlzLGEpO0hpKHRoaXMsYik7dGhpcy5hLnB1c2goWzEwLE9oKHdoKV0pO3ZvaWQgMCE9PWMuc3Ryb2tlU3R5bGUmJnRoaXMuYS5wdXNoKFsxMSxjLnN0cm9rZVN0eWxlLGMubGluZVdpZHRoLGMubGluZUNhcCxjLmxpbmVKb2luLGMubWl0ZXJMaW1pdCxjLmxpbmVEYXNoLGMubGluZURhc2hPZmZzZXRdKTtjPWEuRWIoKTtkPSRoKGEpO2E9YS5nYSgpO3ZhciBlPTAsZjt2YXIgZz0wO2ZvcihmPWMubGVuZ3RoO2c8ZjsrK2cpZT1SaSh0aGlzLGQsZSxjW2ddLGEpO0lpKHRoaXMsYil9fTtcblFpLnByb3RvdHlwZS5sYz1mdW5jdGlvbigpe0xpKHRoaXMpO3RoaXMuc3RhdGU9bnVsbDt2YXIgYT10aGlzLiRhO2lmKDAhPT1hKXt2YXIgYj10aGlzLmNvb3JkaW5hdGVzLGM7dmFyIGQ9MDtmb3IoYz1iLmxlbmd0aDtkPGM7KytkKWJbZF09YSpNYXRoLnJvdW5kKGJbZF0vYSl9fTtmdW5jdGlvbiBTaShhLGIpe3ZhciBjPWEuc3RhdGUsZD1jLmZpbGxTdHlsZTtpZih2b2lkIDAhPT1kJiYoXCJzdHJpbmdcIiE9PXR5cGVvZiBkfHxjLmhnIT1kKSl7dmFyIGU9WzEwLGRdO1wic3RyaW5nXCIhPT10eXBlb2YgZCYmKGI9Yi5JKCksZS5wdXNoKFtiWzBdLGJbM11dKSk7YS5jLnB1c2goZSk7Yy5oZz1jLmZpbGxTdHlsZX12b2lkIDAhPT1jLnN0cm9rZVN0eWxlJiZNaShhLGMsITEpfTt2YXIgVGk9XCJQb2x5Z29uIENpcmNsZSBMaW5lU3RyaW5nIEltYWdlIFRleHQgRGVmYXVsdFwiLnNwbGl0KFwiIFwiKSxVaT17bGVmdDowLGVuZDowLGNlbnRlcjouNSxyaWdodDoxLHN0YXJ0OjEsdG9wOjAsbWlkZGxlOi41LGhhbmdpbmc6LjIsYWxwaGFiZXRpYzouOCxpZGVvZ3JhcGhpYzouOCxib3R0b206MX07ZnVuY3Rpb24gVmkoYSxiLGMsZCxlLGYpe0JpLmNhbGwodGhpcyxhLGIsYyxkLGUsZik7dGhpcy5oYT1cIlwiO3RoaXMuZj10aGlzLmk9MDt0aGlzLm89dm9pZCAwO3RoaXMuSD0wO3RoaXMubD10aGlzLmo9bnVsbDt0aGlzLmc9e307dGhpcy5CPXRoaXMuQz10aGlzLnU9XCJcIjt0aGlzLkE9e319dihWaSxCaSk7XG52YXIgV2k9ZnVuY3Rpb24oKXt2YXIgYSxiPXt9O3JldHVybiBmdW5jdGlvbihjKXt2YXIgZD1iW2NdO3ZvaWQgMD09ZCYmKGF8fChhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLGEudGV4dENvbnRlbnQ9XCJNXCIsYS5zdHlsZS5tYXJnaW49YS5zdHlsZS5wYWRkaW5nPVwiMCAhaW1wb3J0YW50XCIsYS5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlICFpbXBvcnRhbnRcIixhLnN0eWxlLmxlZnQ9XCItOTk5OTlweCAhaW1wb3J0YW50XCIpLGEuc3R5bGUuZm9udD1jLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSksZD1iW2NdPWEub2Zmc2V0SGVpZ2h0LGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYSkpO3JldHVybiBkfX0oKSxYaT1mdW5jdGlvbigpe3ZhciBhLGI7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7YXx8KGE9TGYoMSwxKSk7YyE9YiYmKGI9YS5mb250PWMpO3JldHVybiBhLm1lYXN1cmVUZXh0KGQpLndpZHRofX0oKTtcblZpLnByb3RvdHlwZS5XYT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuaixkPXRoaXMubCxlPXRoaXMuZztpZihcIlwiIT09dGhpcy5oYSYmZSYmKGN8fGQpKXtjPXRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO3ZhciBmPWEuRCgpO2Q9bnVsbDt2YXIgZz0yLGg9MjtpZihcImxpbmVcIj09PWUucGxhY2VtZW50KXtpZighVmEoRmkodGhpcyksYS5JKCkpKXJldHVybjtkPWEuYWEoKTtoPWEuZ2EoKTtpZihcIkxpbmVTdHJpbmdcIj09Zil2YXIgaz1bZC5sZW5ndGhdO2Vsc2UgaWYoXCJNdWx0aUxpbmVTdHJpbmdcIj09ZilrPWEuTWEoKTtlbHNlIGlmKFwiUG9seWdvblwiPT1mKWs9YS5NYSgpLnNsaWNlKDAsMSk7ZWxzZSBpZihcIk11bHRpUG9seWdvblwiPT1mKXt2YXIgbT1hLkViKCk7az1bXTtnPTA7Zm9yKGE9bS5sZW5ndGg7ZzxhOysrZylrLnB1c2gobVtnXVswXSl9SGkodGhpcyxiKTthPWUudGV4dEFsaWduO3ZhciBuPTAscDttPTA7Zm9yKGY9ay5sZW5ndGg7bTxmOysrbSl7aWYodm9pZCAwPT1hKXtmb3IodmFyIHEsXG50LHU9dm9pZCAwLHk9dm9pZCAwLEM9Zz10PXE9dm9pZCAwLEQ9cD1uLEk9MCxHPTAsUj1uO248a1ttXTtuKz1oKXt2YXIgTD1kW25dLEo9ZFtuKzFdO3ZvaWQgMCE9PXQmJih0PUwtdCxxPUotcSxnPU1hdGguc3FydCh0KnQrcSpxKSx2b2lkIDAhPT15JiYoRys9Qyx1PU1hdGguYWNvcygoeSp0K3UqcSkvKEMqZykpLHU+ZS5tYXhBbmdsZSYmKEc+SSYmKEk9RyxwPVIsRD1uKSxHPTAsUj1uLWgpKSxDPWcseT10LHU9cSk7dD1MO3E9Sn1nPUcrZz5JP1tSLG5dOltwLERdO249Z1swXTtwPWdbMV19ZWxzZSBwPWtbbV07Zm9yKGc9bjtnPHA7Zys9aCl0aGlzLmNvb3JkaW5hdGVzLnB1c2goZFtnXSxkW2crMV0pO2c9dGhpcy5jb29yZGluYXRlcy5sZW5ndGg7bj1rW21dO1lpKHRoaXMsYyxnLHRoaXMudik7Yz1nfX1lbHNle2s9dGhpcy5iYSh0aGlzLmhhLCEhdGhpcy5qLCEhdGhpcy5sKTttPWsud2lkdGgvdGhpcy5waXhlbFJhdGlvO3N3aXRjaChmKXtjYXNlIFwiUG9pbnRcIjpjYXNlIFwiTXVsdGlQb2ludFwiOmQ9XG5hLmFhKCk7Zz1kLmxlbmd0aDticmVhaztjYXNlIFwiTGluZVN0cmluZ1wiOmQ9YS5YYygpO2JyZWFrO2Nhc2UgXCJDaXJjbGVcIjpkPWEuamEoKTticmVhaztjYXNlIFwiTXVsdGlMaW5lU3RyaW5nXCI6ZD1hLlljKCk7Zz1kLmxlbmd0aDticmVhaztjYXNlIFwiUG9seWdvblwiOmQ9YS5hYygpO2lmKCFlLmV4Y2VlZExlbmd0aCYmZFsyXS90aGlzLnJlc29sdXRpb248bSlyZXR1cm47aD0zO2JyZWFrO2Nhc2UgXCJNdWx0aVBvbHlnb25cIjpmPWFpKGEpO2Q9W107Zz0wO2ZvcihhPWYubGVuZ3RoO2c8YTtnKz0zKShlLmV4Y2VlZExlbmd0aHx8ZltnKzJdL3RoaXMucmVzb2x1dGlvbj49bSkmJmQucHVzaChmW2ddLGZbZysxXSk7Zz1kLmxlbmd0aDtpZigwPT1nKXJldHVybn1nPUVpKHRoaXMsZCwwLGcsaCwhMSwhMSk7SGkodGhpcyxiKTtlPWM7Yz1nO2E9dGhpcy5nO209dGhpcy5sO2Q9dGhpcy5waXhlbFJhdGlvO2g9VWlbYS50ZXh0QWxpZ258fFwiY2VudGVyXCJdO2E9VWlbYS50ZXh0QmFzZWxpbmVdO209XG5tJiZtLmxpbmVXaWR0aD9tLmxpbmVXaWR0aDowO2g9aCprLndpZHRoL2QrMiooLjUtaCkqbTthPWEqay5oZWlnaHQvZCsyKiguNS1hKSptO3RoaXMuYy5wdXNoKFs2LGUsYyxrLChoLXRoaXMuaSkqZCwoYS10aGlzLmYpKmQsdGhpcy52LGsuaGVpZ2h0LDEsMCwwLHRoaXMubyx0aGlzLkgsMSwhMCxrLndpZHRoXSk7dGhpcy5hLnB1c2goWzYsZSxjLGssKGgtdGhpcy5pKSpkLChhLXRoaXMuZikqZCx0aGlzLnYsay5oZWlnaHQsMSwwLDAsdGhpcy5vLHRoaXMuSCwxL2QsITAsay53aWR0aF0pfUlpKHRoaXMsYil9fTtcblZpLnByb3RvdHlwZS5iYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9KGM/dGhpcy5COlwiXCIpK3RoaXMudSthKyhiP3RoaXMuQzpcIlwiKTtpZighemguai5oYXNPd25Qcm9wZXJ0eShkKSl7dmFyIGU9dGhpcy5sLGY9dGhpcy5qLGc9dGhpcy5nLGg9Zy5zY2FsZSp0aGlzLnBpeGVsUmF0aW8saz1VaVtnLnRleHRBbGlnbnx8XCJjZW50ZXJcIl0sbT1jJiZlLmxpbmVXaWR0aD9lLmxpbmVXaWR0aDowO2E9YS5zcGxpdChcIlxcblwiKTt2YXIgbj1hLmxlbmd0aCxwPVtdLHE9Zy5mb250O3ZhciB0PWEubGVuZ3RoO3ZhciB1PTA7dmFyIHk7Zm9yKHk9MDt5PHQ7Kyt5KXt2YXIgQz1YaShxLGFbeV0pO3U9TWF0aC5tYXgodSxDKTtwLnB1c2goQyl9dD11O3E9V2koZy5mb250KTt0PUxmKE1hdGguY2VpbCgodCttKSpoKSxNYXRoLmNlaWwoKHEqbittKSpoKSk7Zm9yKHU9dC5jYW52YXM7emguYj56aC5oaWdoV2F0ZXJNYXJrOyl6aC5wb3AoKTt6aC5zZXQoZCx1KTsxIT1oJiZ0LnNjYWxlKGgsaCk7dC5mb250PVxuZy5mb250O2MmJih0LnN0cm9rZVN0eWxlPWUuc3Ryb2tlU3R5bGUsdC5saW5lV2lkdGg9bSooZ2Q/aDoxKSx0LmxpbmVDYXA9ZS5saW5lQ2FwLHQubGluZUpvaW49ZS5saW5lSm9pbix0Lm1pdGVyTGltaXQ9ZS5taXRlckxpbWl0LGtkJiZlLmxpbmVEYXNoLmxlbmd0aCYmKHQuc2V0TGluZURhc2goZS5saW5lRGFzaCksdC5saW5lRGFzaE9mZnNldD1lLmxpbmVEYXNoT2Zmc2V0KSk7YiYmKHQuZmlsbFN0eWxlPWYuZmlsbFN0eWxlKTt0LnRleHRCYXNlbGluZT1cInRvcFwiO3QudGV4dEFsaWduPVwiY2VudGVyXCI7ZT0uNS1rO2g9ayp1LndpZHRoL2grZSptO2lmKGMpZm9yKGM9MDtjPG47KytjKXQuc3Ryb2tlVGV4dChhW2NdLGgrZSpwW2NdLC41Km0rYypxKTtpZihiKWZvcihjPTA7YzxuOysrYyl0LmZpbGxUZXh0KGFbY10saCtlKnBbY10sLjUqbStjKnEpfXJldHVybiB6aC5nZXQoZCl9O1xuZnVuY3Rpb24gWWkoYSxiLGMsZCl7dmFyIGU9YS5waXhlbFJhdGlvLGY9YS5sLGc9ISFhLmosaD0hIWYsaz1hLmcsbT1VaVtrLnRleHRCYXNlbGluZV0sbj1hLmYqZSxwPVVpW2sudGV4dEFsaWdufHxcImNlbnRlclwiXSxxPWEuaGEsdD1rLmZvbnQsdT1rLnNjYWxlO2Y9Zj9mLmxpbmVXaWR0aCp1LzI6MDt2YXIgeT1hLkE7YS5jLnB1c2goWzUsYixjLG0sZCxrLmV4Y2VlZExlbmd0aCxnLGsubWF4QW5nbGUsZnVuY3Rpb24oYSl7dmFyIGI9eVthXTtifHwoYj15W2FdPVhpKHQsYSkpO3JldHVybiBiKnUqZX0sbixoLGYqZSxxLHAsMV0pO2EuYS5wdXNoKFs1LGIsYyxtLGQsay5leGNlZWRMZW5ndGgsZyxrLm1heEFuZ2xlLGZ1bmN0aW9uKGEpe3ZhciBiPXlbYV07Ynx8KGI9eVthXT1YaSh0LGEpKTtyZXR1cm4gYip1fSxuLGgsZixxLHAsMS9lXSl9XG5WaS5wcm90b3R5cGUuVWE9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2lmKGEpe3RoaXMudj1iOyhkPWEudWEoKSk/KGI9dGhpcy5qLGJ8fChiPXRoaXMuaj17fSksYi5maWxsU3R5bGU9UmgoZC5hfHx3aCkpOmI9dGhpcy5qPW51bGw7aWYoYz1hLnFhKCkpe2Q9dGhpcy5sO2R8fChkPXRoaXMubD17fSk7dmFyIGU9Yy5sLGY9Yy5nLGc9Yy5qLGg9Yy52O2QubGluZUNhcD1jLmJ8fFwicm91bmRcIjtkLmxpbmVEYXNoPWU/ZS5zbGljZSgpOnhoO2QubGluZURhc2hPZmZzZXQ9dm9pZCAwPT09Zj8wOmY7ZC5saW5lSm9pbj1jLmZ8fFwicm91bmRcIjtkLmxpbmVXaWR0aD12b2lkIDA9PT1nPzE6ZztkLm1pdGVyTGltaXQ9dm9pZCAwPT09aD8xMDpoO2Quc3Ryb2tlU3R5bGU9UmgoYy5jfHx5aCl9ZWxzZSBkPXRoaXMubD1udWxsO2M9dGhpcy5nO2U9YS5hfHxcIjEwcHggc2Fucy1zZXJpZlwiO0JoKGUpO2Y9YS5jO2MuZXhjZWVkTGVuZ3RoPWEuaTtjLmZvbnQ9ZTtjLm1heEFuZ2xlPWEubztjLnBsYWNlbWVudD1cbmEuSDtjLnRleHRBbGlnbj1hLmY7Yy50ZXh0QmFzZWxpbmU9YS52fHxcIm1pZGRsZVwiO2Muc2NhbGU9dm9pZCAwPT09Zj8xOmY7ZT1hLmw7Zj1hLmo7Zz1hLmI7aD1hLmc7dGhpcy5oYT1hLnJhKCl8fFwiXCI7dGhpcy5pPXZvaWQgMD09PWU/MDplO3RoaXMuZj12b2lkIDA9PT1mPzA6Zjt0aGlzLm89dm9pZCAwPT09Zz8hMTpnO3RoaXMuSD12b2lkIDA9PT1oPzA6aDt0aGlzLkI9ZD8oXCJzdHJpbmdcIj09dHlwZW9mIGQuc3Ryb2tlU3R5bGU/ZC5zdHJva2VTdHlsZTp3KGQuc3Ryb2tlU3R5bGUpKStkLmxpbmVDYXArZC5saW5lRGFzaE9mZnNldCtcInxcIitkLmxpbmVXaWR0aCtkLmxpbmVKb2luK2QubWl0ZXJMaW1pdCtcIltcIitkLmxpbmVEYXNoLmpvaW4oKStcIl1cIjpcIlwiO3RoaXMudT1jLmZvbnQrKGMudGV4dEFsaWdufHxcIj9cIikrYy5zY2FsZTt0aGlzLkM9Yj9cInN0cmluZ1wiPT10eXBlb2YgYi5maWxsU3R5bGU/Yi5maWxsU3R5bGU6XCJ8XCIrdyhiLmZpbGxTdHlsZSk6XCJcIn1lbHNlIHRoaXMuaGE9XCJcIn07ZnVuY3Rpb24gWmkoYSxiLGMsZCxlLGYsZyl7dGhpcy5qPWY7dGhpcy5sPW51bGw7dGhpcy5IPWE7dGhpcy5jPWI7dGhpcy52PWU7dGhpcy5pPWQ7dGhpcy5vPWM7dGhpcy5iPWc7dGhpcy5hPXt9O3RoaXMuZz1MZigxLDEpO3RoaXMuZj1LZSgpfXYoWmksemkpO3ZhciAkaT17MDpbWyEwXV19O2Z1bmN0aW9uIGFqKGEsYixjKXt2YXIgZCxlPU1hdGguZmxvb3IoYS5sZW5ndGgvMik7aWYoYj49ZSlmb3IoZD1lO2Q8YjtkKyspYVtkXVtjXT0hMDtlbHNlIGlmKGI8ZSlmb3IoZD1iKzE7ZDxlO2QrKylhW2RdW2NdPSEwfVxuZnVuY3Rpb24gYmooYSl7aWYodm9pZCAwIT09JGlbYV0pcmV0dXJuICRpW2FdO2Zvcih2YXIgYj0yKmErMSxjPUFycmF5KGIpLGQ9MDtkPGI7ZCsrKWNbZF09QXJyYXkoYik7Yj1hO2Zvcih2YXIgZT1kPTA7Yj49ZDspYWooYyxhK2IsYStkKSxhaihjLGErZCxhK2IpLGFqKGMsYS1kLGErYiksYWooYyxhLWIsYStkKSxhaihjLGEtYixhLWQpLGFqKGMsYS1kLGEtYiksYWooYyxhK2QsYS1iKSxhaihjLGErYixhLWQpLGQrKyxlKz0xKzIqZCwwPDIqKGUtYikrMSYmKC0tYixlKz0xLTIqYik7cmV0dXJuICRpW2FdPWN9ZnVuY3Rpb24gY2ooYSxiLGMsZCxlKXtmb3IodmFyIGY9T2JqZWN0LmtleXMoYSkubWFwKE51bWJlcikuc29ydChSYiksZz0wLGg9Zi5sZW5ndGg7ZzxoOysrZylmb3IodmFyIGs9YVtmW2ddLnRvU3RyaW5nKCldLG09ay5sZW5ndGgtMTswPD1tOyl7dmFyIG49a1ttLS1dLHA9a1ttLS1dO2lmKG49S2kocCxiLG4sYyx7fSxwLmEsZCxlKSlyZXR1cm4gbn19XG5mdW5jdGlvbiBkaihhLGIpe3ZhciBjPW51bGw7YS5qJiYoYj8oYz1hLmwsY1s0XSsrKTooYz1hLmw9QmEoKSxjLnB1c2goMSkpKTtyZXR1cm4gY31mdW5jdGlvbiBlaihhKXtmb3IodmFyIGIgaW4gYS5hKXt2YXIgYz1hLmFbYl0sZDtmb3IoZCBpbiBjKWNbZF0ubGMoKX19XG5aaS5wcm90b3R5cGUuRWE9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7ZnVuY3Rpb24gaChhKXtmb3IodmFyIGI9bi5nZXRJbWFnZURhdGEoMCwwLGssaykuZGF0YSxjPTA7YzxrO2MrKylmb3IodmFyIGQ9MDtkPGs7ZCsrKWlmKHFbY11bZF0mJjA8Yls0KihkKmsrYykrM10pe2lmKGE9ZihhKSlyZXR1cm4gYTtuLmNsZWFyUmVjdCgwLDAsayxrKTtyZXR1cm59fWQ9TWF0aC5yb3VuZChkKTt2YXIgaz0yKmQrMSxtPVBlKHRoaXMuZixkKy41LGQrLjUsMS9iLC0xL2IsLWMsLWFbMF0sLWFbMV0pLG49dGhpcy5nO24uY2FudmFzLndpZHRoIT09a3x8bi5jYW52YXMuaGVpZ2h0IT09az8obi5jYW52YXMud2lkdGg9ayxuLmNhbnZhcy5oZWlnaHQ9ayk6bi5jbGVhclJlY3QoMCwwLGssayk7aWYodm9pZCAwIT09dGhpcy5iKXt2YXIgcD1CYSgpO0RhKHAsYSk7RWEocCxiKih0aGlzLmIrZCkscCl9dmFyIHE9YmooZCk7YT1maih0aGlzLG4sbSxjLGUsaCxwLGcpOyFhJiZnJiYoYT1jaihnLG4sYyxcbmgscCkpO3JldHVybiBhfTtmdW5jdGlvbiBnaihhLGIpe3ZhciBjPWEuYzthPWNbMF07dmFyIGQ9Y1sxXSxlPWNbMl07Yz1jWzNdO2E9W2EsZCxhLGMsZSxjLGUsZF07SWUoYSwwLDgsMixiLGEpO3JldHVybiBhfWZ1bmN0aW9uIGhqKGEsYixjKXt2YXIgZD12b2lkIDAhPT1iP2IudG9TdHJpbmcoKTpcIjBcIjtiPWEuYVtkXTt2b2lkIDA9PT1iJiYoYj17fSxhLmFbZF09Yik7ZD1iW2NdO3ZvaWQgMD09PWQmJihkPW5ldyBpaltjXShhLkgsYS5jLGEubyxhLmksYS52LGEuaiksYltjXT1kKTtyZXR1cm4gZH1cblppLnByb3RvdHlwZS5ZYT1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGc9T2JqZWN0LmtleXModGhpcy5hKS5tYXAoTnVtYmVyKTtnLnNvcnQoUmIpO2Euc2F2ZSgpO3ZhciBoPWdqKHRoaXMsYik7YS5iZWdpblBhdGgoKTthLm1vdmVUbyhoWzBdLGhbMV0pO2EubGluZVRvKGhbMl0saFszXSk7YS5saW5lVG8oaFs0XSxoWzVdKTthLmxpbmVUbyhoWzZdLGhbN10pO2EuY2xpcCgpO2U9ZT9lOlRpO3ZhciBrLG07aD0wO2ZvcihrPWcubGVuZ3RoO2g8azsrK2gpe3ZhciBuPWdbaF0udG9TdHJpbmcoKTt2YXIgcD10aGlzLmFbbl07dmFyIHE9MDtmb3IobT1lLmxlbmd0aDtxPG07KytxKXt2YXIgdD1lW3FdO3ZhciB1PXBbdF07dm9pZCAwIT09dSYmKCFmfHxcIkltYWdlXCIhPXQmJlwiVGV4dFwiIT10P3UuWWEoYSxiLGMsZCk6KHQ9ZltuXSk/dC5wdXNoKHUsYi5zbGljZSgwKSk6ZltuXT1bdSxiLnNsaWNlKDApXSl9fWEucmVzdG9yZSgpfTtcbmZ1bmN0aW9uIGZqKGEsYixjLGQsZSxmLGcsaCl7dmFyIGs9T2JqZWN0LmtleXMoYS5hKS5tYXAoTnVtYmVyKTtrLnNvcnQoUmIpO3ZhciBtLG47Zm9yKG09ay5sZW5ndGgtMTswPD1tOy0tbSl7dmFyIHA9a1ttXS50b1N0cmluZygpO3ZhciBxPWEuYVtwXTtmb3Iobj1UaS5sZW5ndGgtMTswPD1uOy0tbil7dmFyIHQ9VGlbbl07dmFyIHU9cVt0XTtpZih2b2lkIDAhPT11KWlmKCFofHxcIkltYWdlXCIhPXQmJlwiVGV4dFwiIT10KXtpZih1PUtpKHUsYixjLGQsZSx1LmEsZixnKSlyZXR1cm4gdX1lbHNlKHQ9aFtwXSk/dC5wdXNoKHUsYy5zbGljZSgwKSk6aFtwXT1bdSxjLnNsaWNlKDApXX19fXZhciBpaj17Q2lyY2xlOlFpLERlZmF1bHQ6QmksSW1hZ2U6TmksTGluZVN0cmluZzpPaSxQb2x5Z29uOlFpLFRleHQ6Vml9O2Z1bmN0aW9uIGpqKGEsYil7cmV0dXJuIHcoYSktdyhiKX1mdW5jdGlvbiBraihhLGIpe2E9LjUqYS9iO3JldHVybiBhKmF9ZnVuY3Rpb24gbGooYSxiLGMsZCxlLGYpe3ZhciBnPSExLGg7aWYoaD1jLmJhKCkpe3ZhciBrPWgubmMoKTsyPT1rfHwzPT1rP2gudWYoZSxmKTooMD09ayYmaC5sb2FkKCksaC5uZShlLGYpLGc9ITApfWlmKGU9KDAsYy5JYSkoYikpaWYoZD1lLmJjKGQpLGMuYWQoKSltaihhLGQsYyxiKTtlbHNlKDAsbmpbZC5EKCldKShhLGQsYyxiKTtyZXR1cm4gZ31mdW5jdGlvbiBtaihhLGIsYyxkKXtpZihcIkdlb21ldHJ5Q29sbGVjdGlvblwiPT1iLkQoKSl7Yj1oYihiLmEpO2Zvcih2YXIgZT0wLGY9Yi5sZW5ndGg7ZTxmOysrZSltaihhLGJbZV0sYyxkKX1lbHNlIGhqKGEsYy5zYSgpLFwiRGVmYXVsdFwiKS5XZChiLGQsYy5hZCgpKX1cbnZhciBuaj17UG9pbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yy5iYSgpO2lmKGUpe2lmKDIhPWUubmMoKSlyZXR1cm47dmFyIGY9aGooYSxjLnNhKCksXCJJbWFnZVwiKTtmLndjKGUsZGooYSwhMSkpO2YuU2MoYixkKX1pZihmPWMucmEoKSljPWhqKGEsYy5zYSgpLFwiVGV4dFwiKSxjLlVhKGYsZGooYSwhIWUpKSxjLldhKGIsZCl9LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yy5xYSgpO2lmKGUpe3ZhciBmPWhqKGEsYy5zYSgpLFwiTGluZVN0cmluZ1wiKTtmLmtiKG51bGwsZSk7Zi5PYyhiLGQpfWlmKGU9Yy5yYSgpKWM9aGooYSxjLnNhKCksXCJUZXh0XCIpLGMuVWEoZSxkaihhLCExKSksYy5XYShiLGQpfSxQb2x5Z29uOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMudWEoKSxmPWMucWEoKTtpZihlfHxmKXt2YXIgZz1oaihhLGMuc2EoKSxcIlBvbHlnb25cIik7Zy5rYihlLGYpO2cuVGMoYixkKX1pZihlPWMucmEoKSljPWhqKGEsYy5zYSgpLFwiVGV4dFwiKSxjLlVhKGUsZGooYSxcbiExKSksYy5XYShiLGQpfSxNdWx0aVBvaW50OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMuYmEoKTtpZihlKXtpZigyIT1lLm5jKCkpcmV0dXJuO3ZhciBmPWhqKGEsYy5zYSgpLFwiSW1hZ2VcIik7Zi53YyhlLGRqKGEsITEpKTtmLlFjKGIsZCl9aWYoZj1jLnJhKCkpYz1oaihhLGMuc2EoKSxcIlRleHRcIiksYy5VYShmLGRqKGEsISFlKSksYy5XYShiLGQpfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yy5xYSgpO2lmKGUpe3ZhciBmPWhqKGEsYy5zYSgpLFwiTGluZVN0cmluZ1wiKTtmLmtiKG51bGwsZSk7Zi5QYyhiLGQpfWlmKGU9Yy5yYSgpKWM9aGooYSxjLnNhKCksXCJUZXh0XCIpLGMuVWEoZSxkaihhLCExKSksYy5XYShiLGQpfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yy51YSgpLGY9Yy5xYSgpO2lmKGZ8fGUpe3ZhciBnPWhqKGEsYy5zYSgpLFwiUG9seWdvblwiKTtnLmtiKGUsZik7Zy5SYyhiLGQpfWlmKGU9Yy5yYSgpKWM9aGooYSxcbmMuc2EoKSxcIlRleHRcIiksYy5VYShlLGRqKGEsITEpKSxjLldhKGIsZCl9LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihhLGIsYyxkKXtiPWIuYTt2YXIgZTt2YXIgZj0wO2ZvcihlPWIubGVuZ3RoO2Y8ZTsrK2YpKDAsbmpbYltmXS5EKCldKShhLGJbZl0sYyxkKX0sQ2lyY2xlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMudWEoKSxmPWMucWEoKTtpZihlfHxmKXt2YXIgZz1oaihhLGMuc2EoKSxcIkNpcmNsZVwiKTtnLmtiKGUsZik7Zy5OYyhiLGQpfWlmKGU9Yy5yYSgpKWM9aGooYSxjLnNhKCksXCJUZXh0XCIpLGMuVWEoZSxkaihhLCExKSksYy5XYShiLGQpfX07ZnVuY3Rpb24gWGYoYSl7amkuY2FsbCh0aGlzLGEpO3RoaXMuZz1hLmI/eWkuaGIoOSk6bnVsbDt0aGlzLmY9ITE7dGhpcy51PS0xO3RoaXMuQj1OYU47dGhpcy5vPUJhKCk7dGhpcy5iPXRoaXMuSD1udWxsO3RoaXMuaT1MZigpO3ooemgsXCJjbGVhclwiLHRoaXMuTmUsdGhpcyl9dihYZixqaSk7WGYuaGFuZGxlcz1mdW5jdGlvbihhLGIpe3JldHVyblwiY2FudmFzXCI9PT1hJiZcIlZFQ1RPUlwiPT09Yi5EKCl9O1hmLmNyZWF0ZT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgWGYoYil9O2w9WGYucHJvdG90eXBlO2wuY2E9ZnVuY3Rpb24oKXtBYyh6aCxcImNsZWFyXCIsdGhpcy5OZSx0aGlzKTtqaS5wcm90b3R5cGUuY2EuY2FsbCh0aGlzKX07XG5sLlVkPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLmV4dGVudCxlPWEucGl4ZWxSYXRpbyxmPWIuZmQ/YS5za2lwcGVkRmVhdHVyZVVpZHM6e30sZz1hLnZpZXdTdGF0ZSxoPWcucHJvamVjdGlvbixrPWcucm90YXRpb24sbT1oLkkoKSxuPXRoaXMuYS4kKCkscD1taSh0aGlzLGEsMCk7bGkodGhpcyxcInByZWNvbXBvc2VcIixjLGEscCk7dmFyIHE9Yi5leHRlbnQ7KGc9dm9pZCAwIT09cSkmJmtpKGMsYSxxKTt2YXIgdD10aGlzLmI7aWYodCYmIWRiKHQuYSkpe3ZhciB1PXE9MCx5PTEhPT1iLm9wYWNpdHksQz1MYyh0aGlzLmEsXCJyZW5kZXJcIik7aWYoeXx8Qyl7dmFyIEQ9Yy5jYW52YXMud2lkdGg7dmFyIEk9Yy5jYW52YXMuaGVpZ2h0O2lmKGspe3ZhciBHPU1hdGgucm91bmQoTWF0aC5zcXJ0KEQqRCtJKkkpKTtxPShHLUQpLzI7dT0oRy1JKS8yO0Q9ST1HfXRoaXMuaS5jYW52YXMud2lkdGg9RDt0aGlzLmkuY2FudmFzLmhlaWdodD1JO0Q9dGhpcy5pfWVsc2UgRD1jO0k9RC5nbG9iYWxBbHBoYTtcbnl8fChELmdsb2JhbEFscGhhPWIub3BhY2l0eSk7RCE9YyYmRC50cmFuc2xhdGUocSx1KTtHPWEuc2l6ZVswXSplO2UqPWEuc2l6ZVsxXTtDaChELC1rLEcvMixlLzIpO3QuWWEoRCxwLGssZik7aWYobi5CJiZoLmomJiFIYShtLGQpKXtoPWRbMF07bj1YYShtKTtmb3IodmFyIFI9MDtoPG1bMF07KS0tUixwPW4qUixwPW1pKHRoaXMsYSxwKSx0LllhKEQscCxrLGYpLGgrPW47Uj0wO2ZvcihoPWRbMl07aD5tWzJdOykrK1IscD1uKlIscD1taSh0aGlzLGEscCksdC5ZYShELHAsayxmKSxoLT1uO3A9bWkodGhpcyxhLDApfUNoKEQsayxHLzIsZS8yKTtEIT1jJiYoQyYmbGkodGhpcyxcInJlbmRlclwiLEQsYSxwKSx5PyhkPWMuZ2xvYmFsQWxwaGEsYy5nbG9iYWxBbHBoYT1iLm9wYWNpdHksYy5kcmF3SW1hZ2UoRC5jYW52YXMsLXEsLXUpLGMuZ2xvYmFsQWxwaGE9ZCk6Yy5kcmF3SW1hZ2UoRC5jYW52YXMsLXEsLXUpLEQudHJhbnNsYXRlKC1xLC11KSk7eXx8KEQuZ2xvYmFsQWxwaGE9SSl9ZyYmXG5jLnJlc3RvcmUoKTt0aGlzLmcmJnRoaXMuZy5jbGVhcigpO3RoaXMucGMoYyxhLGIscCl9O2wuRWE9ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZih0aGlzLmIpe3ZhciBmPXRoaXMuYSxnPXt9O2E9dGhpcy5iLkVhKGEsYi52aWV3U3RhdGUucmVzb2x1dGlvbixiLnZpZXdTdGF0ZS5yb3RhdGlvbixjLHt9LGZ1bmN0aW9uKGEpe3ZhciBiPXcoYSkudG9TdHJpbmcoKTtpZighKGIgaW4gZykpcmV0dXJuIGdbYl09ITAsZC5jYWxsKGUsYSxmKX0sZi5iP3t9Om51bGwpO3RoaXMuZyYmdGhpcy5nLmNsZWFyKCk7cmV0dXJuIGF9fTtsLk5lPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hO2EuSGIoKSYmdGhpcy5iJiZhLmMoKX07bC5PZT1mdW5jdGlvbigpe2VpKHRoaXMpfTtcbmwuTGI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hLGM9Yi4kKCk7Z2koYSxjKTt2YXIgZD1hLnZpZXdIaW50c1swXSxlPWEudmlld0hpbnRzWzFdLGY9Yi5NLGc9Yi5YO2lmKCF0aGlzLmYmJiFmJiZkfHwhZyYmZSlyZXR1cm4hMDtmPWEuZXh0ZW50O3ZhciBoPWEudmlld1N0YXRlO2c9aC5wcm9qZWN0aW9uO3ZhciBrPWgucmVzb2x1dGlvbixtPWEucGl4ZWxSYXRpbztkPWIuajt2YXIgbj1iLmk7ZT1iLmdldChvaik7dm9pZCAwPT09ZSYmKGU9amopO2Y9RWEoZixuKmspO249aC5wcm9qZWN0aW9uLkkoKTtjLkImJmgucHJvamVjdGlvbi5qJiYhSGEobixhLmV4dGVudCkmJihhPU1hdGgubWF4KFhhKGYpLzIsWGEobikpLGZbMF09blswXS1hLGZbMl09blsyXSthKTtpZighdGhpcy5mJiZ0aGlzLkI9PWsmJnRoaXMudT09ZCYmdGhpcy5IPT1lJiZIYSh0aGlzLm8sZikpcmV0dXJuITA7dGhpcy5iPW51bGw7dGhpcy5mPSExO3ZhciBwPW5ldyBaaSguNSprL20sZixrLG0sYy5NLHRoaXMuZyxcbmIuaSk7Yy5lZChmLGssZyk7YT1mdW5jdGlvbihhKXt2YXIgYz1hLmNiKCk7aWYoYyl2YXIgZD1jLmNhbGwoYSxrKTtlbHNlKGM9Yi5jYigpKSYmKGQ9YyhhLGspKTtpZihkKXtpZihkKXtjPSExO2lmKEFycmF5LmlzQXJyYXkoZCkpZm9yKHZhciBlPTAsZj1kLmxlbmd0aDtlPGY7KytlKWM9bGoocCxhLGRbZV0sa2ooayxtKSx0aGlzLk9lLHRoaXMpfHxjO2Vsc2UgYz1saihwLGEsZCxraihrLG0pLHRoaXMuT2UsdGhpcyk7YT1jfWVsc2UgYT0hMTt0aGlzLmY9dGhpcy5mfHxhfX0uYmluZCh0aGlzKTtpZihlKXt2YXIgcT1bXTtwaihjLGYsZnVuY3Rpb24oYSl7cS5wdXNoKGEpfSx0aGlzKTtxLnNvcnQoZSk7Yz0wO2ZvcihnPXEubGVuZ3RoO2M8ZzsrK2MpYShxW2NdKX1lbHNlIHBqKGMsZixhLHRoaXMpO2VqKHApO3RoaXMuQj1rO3RoaXMudT1kO3RoaXMuSD1lO3RoaXMubz1mO3RoaXMuYj1wO3JldHVybiEwfTtmdW5jdGlvbiBZZihhKXt0aGlzLmNvbnRleHQ9bnVsbDtXZi5jYWxsKHRoaXMsYSk7dGhpcy5vPWEuYj95aS5oYig5KTpudWxsO3RoaXMuQT0hMTt0aGlzLmxhPUtlKCk7dGhpcy5YPVwidmVjdG9yXCI9PWEubz8xOjA7eih6aCxcImNsZWFyXCIsdGhpcy5QZSx0aGlzKX12KFlmLFdmKTtZZi5oYW5kbGVzPWZ1bmN0aW9uKGEsYil7cmV0dXJuXCJjYW52YXNcIj09PWEmJlwiVkVDVE9SX1RJTEVcIj09PWIuRCgpfTtZZi5jcmVhdGU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFlmKGIpfTt2YXIgcWo9e2ltYWdlOltcIlBvbHlnb25cIixcIkNpcmNsZVwiLFwiTGluZVN0cmluZ1wiLFwiSW1hZ2VcIixcIlRleHRcIl0saHlicmlkOltcIlBvbHlnb25cIixcIkxpbmVTdHJpbmdcIl19LHJqPXtpbWFnZTpbXCJEZWZhdWx0XCJdLGh5YnJpZDpbXCJJbWFnZVwiLFwiVGV4dFwiLFwiRGVmYXVsdFwiXSx2ZWN0b3I6VGl9O2w9WWYucHJvdG90eXBlO2wuY2E9ZnVuY3Rpb24oKXtBYyh6aCxcImNsZWFyXCIsdGhpcy5QZSx0aGlzKTtXZi5wcm90b3R5cGUuY2EuY2FsbCh0aGlzKX07XG5sLkxiPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5hLGQ9Yy5qO3RoaXMuSyE9ZCYmKHRoaXMuZi5sZW5ndGg9MCxjPWMubyx0aGlzLmNvbnRleHR8fFwidmVjdG9yXCI9PWN8fCh0aGlzLmNvbnRleHQ9TGYoKSksdGhpcy5jb250ZXh0JiZcInZlY3RvclwiPT1jJiYodGhpcy5jb250ZXh0PW51bGwpKTt0aGlzLks9ZDtyZXR1cm4gV2YucHJvdG90eXBlLkxiLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07XG5sLlVjPWZ1bmN0aW9uKGEsYixjLGQsZSxmLGcsaCxrKXt2YXIgbT1hLG49dGhpcy5hLHA9Yi5waXhlbFJhdGlvLHE9Yi52aWV3U3RhdGUucHJvamVjdGlvbix0PW4uaix1PW4uZ2V0KG9qKXx8bnVsbCx5PXNqKG0sbik7aWYoeS5aYnx8eS51YyE9dHx8eS56ZCE9dSl7dmFyIEM9bi4kKCksRD1DLnRpbGVHcmlkLEk9Qy55YShxKSxHPUkuYVttLnRhWzBdXTtJPWhjKEksbS52KTtmb3IodmFyIFI9MCxMPW0uYS5sZW5ndGg7UjxMOysrUil7dmFyIEo9bS5qW20uYVtSXV07aWYoMyE9Si5zdGF0ZSl7dmFyIFY9aGMoRCxKLnRhKSxLPVVhKEksViksUD1PYShWLEspP251bGw6RWEoSyxuLmkqRyksRj1KLm8sTWE9ITE7TWIocSxGKXx8KE1hPSEwLEoubz1xKTt5LlpiPSExO0s9bmV3IFppKDAsSyxHLHAsQy51LHRoaXMubyxuLmkpO3ZhciBFYz1raihHLHApLGVjPUouajt1JiZ1IT09eS56ZCYmZWMuc29ydCh1KTtmb3IodmFyIENhLEZjPTAsSmQ9ZWMubGVuZ3RoO0ZjPEpkOysrRmMpe0NhPWVjW0ZjXTtcbmlmKE1hKXtpZihcInRpbGUtcGl4ZWxzXCI9PUYuYyl7Ri5CZD1WO3ZhciBhYj1GLCRhPUouSSgpO2FiLmc9JGE7YWIuaj0hKCFhYi5ifHwhJGEpfUNhLk8oKS54YihGLHEpfWlmKCFQfHxWYShQLENhLkkoKSkpaWYoJGE9dm9pZCAwLChhYj1DYS5jYigpKT8kYT1hYi5jYWxsKENhLEcpOihhYj1uLmNiKCkpJiYoJGE9YWIoQ2EsRykpLCRhKXthYj1FYzt2YXIgRGM9SztpZigkYSl7dmFyIEtkPSExO2lmKEFycmF5LmlzQXJyYXkoJGEpKWZvcih2YXIgeWU9MCxIaD0kYS5sZW5ndGg7eWU8SGg7Kyt5ZSlLZD1saihEYyxDYSwkYVt5ZV0sYWIsdGhpcy5RZSx0aGlzKXx8S2Q7ZWxzZSBLZD1saihEYyxDYSwkYSxhYix0aGlzLlFlLHRoaXMpO0NhPUtkfWVsc2UgQ2E9ITE7dGhpcy5BPXRoaXMuQXx8Q2E7eS5aYj15LlpifHxDYX19ZWooSyk7Zm9yKHZhciBIYyBpbiBLLmEpO1Y9bS50YS50b1N0cmluZygpO1A9SztKLmJbdyhuKStcIixcIitWXT1QfX15LnVjPXQ7eS56ZD11fWlmKHRoaXMuY29udGV4dCl7eT1cbmI7bj10aGlzLmE7cT1zaihtLG4pO3Q9bi5qO2lmKChwPXFqW24ub10pJiZxLkFkIT09dClmb3IocS5BZD10LEM9bS52LEc9Q1swXSxxPXkucGl4ZWxSYXRpbyxIYz1uLiQoKSxEPUhjLnlhKHkudmlld1N0YXRlLnByb2plY3Rpb24pLHQ9RC5hW0ddLHU9dGoobSxuKSx5PUhjLmRjKEcscSx5LnZpZXdTdGF0ZS5wcm9qZWN0aW9uKSx1LmNhbnZhcy53aWR0aD15WzBdLHUuY2FudmFzLmhlaWdodD15WzFdLHk9aGMoRCxDKSxDPTAsRD1tLmEubGVuZ3RoO0M8RDsrK0MpRz1tLmpbbS5hW0NdXSwzIT1HLnN0YXRlJiYoSGM9cS90LEk9TWUodGhpcy5sYSwxLDEsMCwwKSxMZShJLE1lKEplLEhjLC1IYywwLDApKSxMZShJLE1lKEplLDEsMSwteVswXSwteVszXSkpLHVqKEcsbixtLnRhLnRvU3RyaW5nKCkpLllhKHUsSSwwLHt9LHApKTtXZi5wcm90b3R5cGUuVWMuYXBwbHkodGhpcyxhcmd1bWVudHMpfX07XG5sLkVhPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9Yi52aWV3U3RhdGUucmVzb2x1dGlvbixnPWIudmlld1N0YXRlLnJvdGF0aW9uO2M9dm9pZCAwPT1jPzA6Yzt2YXIgaD10aGlzLmEsaz1oLmI/e306bnVsbCxtPXt9LG49dGhpcy5mO2I9aC4kKCkueWEoYi52aWV3U3RhdGUucHJvamVjdGlvbik7dmFyIHA7dmFyIHE9MDtmb3IocD1uLmxlbmd0aDtxPHA7KytxKXt2YXIgdD1uW3FdO3ZhciB1PXQudjt1PWhjKGIsdSx0aGlzLk0pO3ZhciB5PUVhKHUsYypmLHkpO2lmKElhKHksYVswXSxhWzFdKSl7dT0wO2Zvcih2YXIgQz10LmEubGVuZ3RoO3U8QzsrK3Upe3ZhciBEPXQualt0LmFbdV1dO2lmKDMhPUQuc3RhdGUpe0Q9dWooRCxoLHQudGEudG9TdHJpbmcoKSk7dmFyIEk9SXx8RC5FYShhLGYsZyxjLHt9LGZ1bmN0aW9uKGEpe3ZhciBiPXcoYSkudG9TdHJpbmcoKTtpZighKGIgaW4gbSkpcmV0dXJuIG1bYl09ITAsZC5jYWxsKGUsYSxoKX0sayl9fX19dGhpcy5vJiZ0aGlzLm8uY2xlYXIoKTtcbnJldHVybiBJfTtsLlBlPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hO2EuSGIoKSYmdm9pZCAwIT09dGhpcy5LJiZhLmMoKX07bC5RZT1mdW5jdGlvbigpe2VpKHRoaXMpfTtcbmwucGM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuYSxlPWQuYj97fTpudWxsLGY9ZC4kKCksZz1kLm8saD1yaltnXSxrPWIucGl4ZWxSYXRpbyxtPWIudmlld1N0YXRlLnJvdGF0aW9uLG49Yi5zaXplO0NoKGEsLW0sTWF0aC5yb3VuZChrKm5bMF0vMiksTWF0aC5yb3VuZChrKm5bMV0vMikpO2s9dGhpcy5mO2Y9Zi55YShiLnZpZXdTdGF0ZS5wcm9qZWN0aW9uKTtuPVtdO2Zvcih2YXIgcD1bXSxxPWsubGVuZ3RoLTE7MDw9cTstLXEpe3ZhciB0PWtbcV07aWYoNSE9dC5zdGF0ZSlmb3IodmFyIHU9dC50YSx5PWhjKGYsdSlbMF0taGMoZix0LnYpWzBdLEM9dm9pZCAwLEQ9MCxJPXQuYS5sZW5ndGg7RDxJOysrRCl7dmFyIEc9dC5qW3QuYVtEXV07aWYoMyE9Ry5zdGF0ZSl7dmFyIFI9dWooRyxkLHUudG9TdHJpbmcoKSksTDtpZighKEw9XCJ2ZWN0b3JcIj09ZykpYTp7TD12b2lkIDA7Zm9yKEwgaW4gUi5hKWZvcih2YXIgSj1SLmFbTF0sVj0wLEs9aC5sZW5ndGg7VjxLOysrVilpZihoW1ZdaW5cbkope0w9ITA7YnJlYWsgYX1MPSExfWlmKEwpe0N8fChDPW1pKHRoaXMsYix5KSk7Rz1HLnRhWzBdO0w9Z2ooUixDKTthLnNhdmUoKTthLmdsb2JhbEFscGhhPWMub3BhY2l0eTtKPTA7Zm9yKFY9bi5sZW5ndGg7SjxWOysrSilLPW5bSl0sRzxwW0pdJiYoYS5iZWdpblBhdGgoKSxhLm1vdmVUbyhMWzBdLExbMV0pLGEubGluZVRvKExbMl0sTFszXSksYS5saW5lVG8oTFs0XSxMWzVdKSxhLmxpbmVUbyhMWzZdLExbN10pLGEubW92ZVRvKEtbNl0sS1s3XSksYS5saW5lVG8oS1s0XSxLWzVdKSxhLmxpbmVUbyhLWzJdLEtbM10pLGEubGluZVRvKEtbMF0sS1sxXSksYS5jbGlwKCkpO1IuWWEoYSxDLG0se30saCxlKTthLnJlc3RvcmUoKTtuLnB1c2goTCk7cC5wdXNoKEcpfX19fWlmKGUpe2Q9YTtnPU9iamVjdC5rZXlzKGUpLm1hcChOdW1iZXIpLnNvcnQoUmIpO2g9MDtmb3Ioaz1nLmxlbmd0aDtoPGs7KytoKWZvcihmPWVbZ1toXS50b1N0cmluZygpXSxuPTAscD1mLmxlbmd0aDtuPHA7KXE9XG5mW24rK10sdD1mW24rK10scS5ZYShkLHQsbSx7fSk7dGhpcy5vLmNsZWFyKCl9V2YucHJvdG90eXBlLnBjLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07VGYoXCJNQVBfUkVOREVSRVJcIixzaSk7VWYoKTtmdW5jdGlvbiB2aihhKXt0aGlzLmI9YS5vcGFjaXR5O3RoaXMuQj1hLnJvdGF0ZVdpdGhWaWV3O3RoaXMuaT1hLnJvdGF0aW9uO3RoaXMuaj1hLnNjYWxlO3RoaXMubz1hLnNuYXBUb1BpeGVsfTtmdW5jdGlvbiB3aihhKXt0aGlzLkM9dGhpcy52PXRoaXMuYz1udWxsO3RoaXMucGE9dm9pZCAwIT09YS5maWxsP2EuZmlsbDpudWxsO3RoaXMuaWE9WzAsMF07dGhpcy5mPWEucG9pbnRzO3RoaXMuYT12b2lkIDAhPT1hLnJhZGl1cz9hLnJhZGl1czphLnJhZGl1czE7dGhpcy5sPWEucmFkaXVzMjt0aGlzLmc9dm9pZCAwIT09YS5hbmdsZT9hLmFuZ2xlOjA7dGhpcy5vYT12b2lkIDAhPT1hLnN0cm9rZT9hLnN0cm9rZTpudWxsO3RoaXMudT10aGlzLmthPXRoaXMuQT1udWxsO3RoaXMuSD1hLmF0bGFzTWFuYWdlcjt4aih0aGlzLHRoaXMuSCk7dmouY2FsbCh0aGlzLHtvcGFjaXR5OjEscm90YXRlV2l0aFZpZXc6dm9pZCAwIT09YS5yb3RhdGVXaXRoVmlldz9hLnJvdGF0ZVdpdGhWaWV3OiExLHJvdGF0aW9uOnZvaWQgMCE9PWEucm90YXRpb24/YS5yb3RhdGlvbjowLHNjYWxlOjEsc25hcFRvUGl4ZWw6dm9pZCAwIT09YS5zbmFwVG9QaXhlbD9hLnNuYXBUb1BpeGVsOiEwfSl9XG52KHdqLHZqKTtsPXdqLnByb3RvdHlwZTtsLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHdqKHtmaWxsOnRoaXMudWEoKT90aGlzLnVhKCkuY2xvbmUoKTp2b2lkIDAscG9pbnRzOnRoaXMuZixyYWRpdXM6dGhpcy5hLHJhZGl1czI6dGhpcy5sLGFuZ2xlOnRoaXMuZyxzbmFwVG9QaXhlbDp0aGlzLm8sc3Ryb2tlOnRoaXMucWEoKT90aGlzLnFhKCkuY2xvbmUoKTp2b2lkIDAscm90YXRpb246dGhpcy5pLHJvdGF0ZVdpdGhWaWV3OnRoaXMuQixhdGxhc01hbmFnZXI6dGhpcy5IfSk7YS5iPXRoaXMuYjthLmo9dGhpcy5qO3JldHVybiBhfTtsLiRiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQX07bC51YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhfTtsLlNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQ307bC5iYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZ9O2wuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51fTtsLm5jPWZ1bmN0aW9uKCl7cmV0dXJuIDJ9O2wub2M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pYX07XG5sLnliPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2F9O2wucWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vYX07bC5uZT1mdW5jdGlvbigpe307bC5sb2FkPWZ1bmN0aW9uKCl7fTtsLnVmPWZ1bmN0aW9uKCl7fTtcbmZ1bmN0aW9uIHhqKGEsYil7dmFyIGM9XCJcIixkPVwiXCIsZT0wLGY9bnVsbCxnPTAsaD0wO2lmKGEub2Epe3ZhciBrPWEub2EuYztudWxsPT09ayYmKGs9eWgpO2s9Umgoayk7aD1hLm9hLmo7dm9pZCAwPT09aCYmKGg9MSk7Zj1hLm9hLmw7Zz1hLm9hLmc7a2R8fChmPW51bGwsZz0wKTtkPWEub2EuZjt2b2lkIDA9PT1kJiYoZD1cInJvdW5kXCIpO2M9YS5vYS5iO3ZvaWQgMD09PWMmJihjPVwicm91bmRcIik7ZT1hLm9hLnY7dm9pZCAwPT09ZSYmKGU9MTApfXZhciBtPTIqKGEuYStoKSsxO2M9e3N0cm9rZVN0eWxlOmssc2Y6aCxzaXplOm0sbGluZUNhcDpjLGxpbmVEYXNoOmYsbGluZURhc2hPZmZzZXQ6ZyxsaW5lSm9pbjpkLG1pdGVyTGltaXQ6ZX07aWYodm9pZCAwPT09Yil7dmFyIG49TGYobSxtKTthLnY9bi5jYW52YXM7Yj1tPWEudi53aWR0aDthLllkKGMsbiwwLDApO2EucGE/YS5DPWEudjoobj1MZihjLnNpemUsYy5zaXplKSxhLkM9bi5jYW52YXMsYS5YZChjLG4sMCwwKSl9ZWxzZSBtPVxuTWF0aC5yb3VuZChtKSwoZD0hYS5wYSkmJihuPWEuWGQuYmluZChhLGMpKSxhLm9hPyhlPWEub2Esdm9pZCAwPT09ZS5hJiYoZS5hPVwic1wiLGUuYT1lLmM/XCJzdHJpbmdcIj09PXR5cGVvZiBlLmM/ZS5hK2UuYzplLmErdyhlLmMpLnRvU3RyaW5nKCk6ZS5hK1wiLVwiLGUuYSs9XCIsXCIrKHZvaWQgMCE9PWUuYj9lLmIudG9TdHJpbmcoKTpcIi1cIikrXCIsXCIrKGUubD9lLmwudG9TdHJpbmcoKTpcIi1cIikrXCIsXCIrKHZvaWQgMCE9PWUuZz9lLmc6XCItXCIpK1wiLFwiKyh2b2lkIDAhPT1lLmY/ZS5mOlwiLVwiKStcIixcIisodm9pZCAwIT09ZS52P2Uudi50b1N0cmluZygpOlwiLVwiKStcIixcIisodm9pZCAwIT09ZS5qP2Uuai50b1N0cmluZygpOlwiLVwiKSksZT1lLmEpOmU9XCItXCIsYS5wYT8oZj1hLnBhLHZvaWQgMD09PWYuYyYmKGYuYz1mLmEgaW5zdGFuY2VvZiBDYW52YXNQYXR0ZXJufHxmLmEgaW5zdGFuY2VvZiBDYW52YXNHcmFkaWVudD93KGYuYSkudG9TdHJpbmcoKTpcImZcIisoZi5hP09oKGYuYSk6XCItXCIpKSxmPWYuYyk6XG5mPVwiLVwiLGEuYyYmZT09YS5jWzFdJiZmPT1hLmNbMl0mJmEuYT09YS5jWzNdJiZhLmw9PWEuY1s0XSYmYS5nPT1hLmNbNV0mJmEuZj09YS5jWzZdfHwoYS5jPVtcInJcIitlK2YrKHZvaWQgMCE9PWEuYT9hLmEudG9TdHJpbmcoKTpcIi1cIikrKHZvaWQgMCE9PWEubD9hLmwudG9TdHJpbmcoKTpcIi1cIikrKHZvaWQgMCE9PWEuZz9hLmcudG9TdHJpbmcoKTpcIi1cIikrKHZvaWQgMCE9PWEuZj9hLmYudG9TdHJpbmcoKTpcIi1cIiksZSxmLGEuYSxhLmwsYS5nLGEuZl0pLG49Yi5hZGQoYS5jWzBdLG0sbSxhLllkLmJpbmQoYSxjKSxuKSxhLnY9bi5pbWFnZSxhLmlhPVtuLm9mZnNldFgsbi5vZmZzZXRZXSxiPW4uaW1hZ2Uud2lkdGgsYS5DPWQ/bi5hOmEudjthLkE9W20vMixtLzJdO2Eua2E9W20sbV07YS51PVtiLGJdfVxubC5ZZD1mdW5jdGlvbihhLGIsYyxkKXtiLnNldFRyYW5zZm9ybSgxLDAsMCwxLDAsMCk7Yi50cmFuc2xhdGUoYyxkKTtiLmJlZ2luUGF0aCgpO3ZhciBlPXRoaXMuZjtpZihJbmZpbml0eT09PWUpYi5hcmMoYS5zaXplLzIsYS5zaXplLzIsdGhpcy5hLDAsMipNYXRoLlBJLCEwKTtlbHNle3ZhciBmPXZvaWQgMCE9PXRoaXMubD90aGlzLmw6dGhpcy5hO2YhPT10aGlzLmEmJihlKj0yKTtmb3IoYz0wO2M8PWU7YysrKXtkPTIqYypNYXRoLlBJL2UtTWF0aC5QSS8yK3RoaXMuZzt2YXIgZz0wPT09YyUyP3RoaXMuYTpmO2IubGluZVRvKGEuc2l6ZS8yK2cqTWF0aC5jb3MoZCksYS5zaXplLzIrZypNYXRoLnNpbihkKSl9fXRoaXMucGEmJihjPXRoaXMucGEuYSxudWxsPT09YyYmKGM9d2gpLGIuZmlsbFN0eWxlPVJoKGMpLGIuZmlsbCgpKTt0aGlzLm9hJiYoYi5zdHJva2VTdHlsZT1hLnN0cm9rZVN0eWxlLGIubGluZVdpZHRoPWEuc2YsYS5saW5lRGFzaCYmKGIuc2V0TGluZURhc2goYS5saW5lRGFzaCksXG5iLmxpbmVEYXNoT2Zmc2V0PWEubGluZURhc2hPZmZzZXQpLGIubGluZUNhcD1hLmxpbmVDYXAsYi5saW5lSm9pbj1hLmxpbmVKb2luLGIubWl0ZXJMaW1pdD1hLm1pdGVyTGltaXQsYi5zdHJva2UoKSk7Yi5jbG9zZVBhdGgoKX07XG5sLlhkPWZ1bmN0aW9uKGEsYixjLGQpe2Iuc2V0VHJhbnNmb3JtKDEsMCwwLDEsMCwwKTtiLnRyYW5zbGF0ZShjLGQpO2IuYmVnaW5QYXRoKCk7Yz10aGlzLmY7aWYoSW5maW5pdHk9PT1jKWIuYXJjKGEuc2l6ZS8yLGEuc2l6ZS8yLHRoaXMuYSwwLDIqTWF0aC5QSSwhMCk7ZWxzZXtkPXZvaWQgMCE9PXRoaXMubD90aGlzLmw6dGhpcy5hO2QhPT10aGlzLmEmJihjKj0yKTt2YXIgZTtmb3IoZT0wO2U8PWM7ZSsrKXt2YXIgZj0yKmUqTWF0aC5QSS9jLU1hdGguUEkvMit0aGlzLmc7dmFyIGc9MD09PWUlMj90aGlzLmE6ZDtiLmxpbmVUbyhhLnNpemUvMitnKk1hdGguY29zKGYpLGEuc2l6ZS8yK2cqTWF0aC5zaW4oZikpfX1iLmZpbGxTdHlsZT13aDtiLmZpbGwoKTt0aGlzLm9hJiYoYi5zdHJva2VTdHlsZT1hLnN0cm9rZVN0eWxlLGIubGluZVdpZHRoPWEuc2YsYS5saW5lRGFzaCYmKGIuc2V0TGluZURhc2goYS5saW5lRGFzaCksYi5saW5lRGFzaE9mZnNldD1hLmxpbmVEYXNoT2Zmc2V0KSxcbmIuc3Ryb2tlKCkpO2IuY2xvc2VQYXRoKCl9O2Z1bmN0aW9uIHlqKGEpe2E9YXx8e307d2ouY2FsbCh0aGlzLHtwb2ludHM6SW5maW5pdHksZmlsbDphLmZpbGwscmFkaXVzOmEucmFkaXVzLHNuYXBUb1BpeGVsOmEuc25hcFRvUGl4ZWwsc3Ryb2tlOmEuc3Ryb2tlLGF0bGFzTWFuYWdlcjphLmF0bGFzTWFuYWdlcn0pfXYoeWosd2opO3lqLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyB5aih7ZmlsbDp0aGlzLnVhKCk/dGhpcy51YSgpLmNsb25lKCk6dm9pZCAwLHN0cm9rZTp0aGlzLnFhKCk/dGhpcy5xYSgpLmNsb25lKCk6dm9pZCAwLHJhZGl1czp0aGlzLmEsc25hcFRvUGl4ZWw6dGhpcy5vLGF0bGFzTWFuYWdlcjp0aGlzLkh9KTthLmI9dGhpcy5iO2Euaj10aGlzLmo7cmV0dXJuIGF9O3lqLnByb3RvdHlwZS5rZj1mdW5jdGlvbihhKXt0aGlzLmE9YTt4aih0aGlzLHRoaXMuSCl9O2Z1bmN0aW9uIHpqKGEpe2E9YXx8e307dGhpcy5hPXZvaWQgMCE9PWEuY29sb3I/YS5jb2xvcjpudWxsO3RoaXMuYz12b2lkIDB9emoucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hO3JldHVybiBuZXcgemooe2NvbG9yOmEmJmEuc2xpY2U/YS5zbGljZSgpOmF8fHZvaWQgMH0pfTt6ai5wcm90b3R5cGUubD1mdW5jdGlvbihhKXt0aGlzLmE9YTt0aGlzLmM9dm9pZCAwfTtmdW5jdGlvbiBBaihhKXthPWF8fHt9O3RoaXMuYz12b2lkIDAhPT1hLmNvbG9yP2EuY29sb3I6bnVsbDt0aGlzLmI9YS5saW5lQ2FwO3RoaXMubD12b2lkIDAhPT1hLmxpbmVEYXNoP2EubGluZURhc2g6bnVsbDt0aGlzLmc9YS5saW5lRGFzaE9mZnNldDt0aGlzLmY9YS5saW5lSm9pbjt0aGlzLnY9YS5taXRlckxpbWl0O3RoaXMuaj1hLndpZHRoO3RoaXMuYT12b2lkIDB9bD1Bai5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYztyZXR1cm4gbmV3IEFqKHtjb2xvcjphJiZhLnNsaWNlP2Euc2xpY2UoKTphfHx2b2lkIDAsbGluZUNhcDp0aGlzLmIsbGluZURhc2g6dGhpcy5sP3RoaXMubC5zbGljZSgpOnZvaWQgMCxsaW5lRGFzaE9mZnNldDp0aGlzLmcsbGluZUpvaW46dGhpcy5mLG1pdGVyTGltaXQ6dGhpcy52LHdpZHRoOnRoaXMuan0pfTtsLnJpPWZ1bmN0aW9uKGEpe3RoaXMuYz1hO3RoaXMuYT12b2lkIDB9O1xubC5laj1mdW5jdGlvbihhKXt0aGlzLmI9YTt0aGlzLmE9dm9pZCAwfTtsLnNldExpbmVEYXNoPWZ1bmN0aW9uKGEpe3RoaXMubD1hO3RoaXMuYT12b2lkIDB9O2wuZmo9ZnVuY3Rpb24oYSl7dGhpcy5qPWE7dGhpcy5hPXZvaWQgMH07ZnVuY3Rpb24gQmooYSl7YT1hfHx7fTt0aGlzLmJiPW51bGw7dGhpcy5JYT1Dajt2b2lkIDAhPT1hLmdlb21ldHJ5JiZ0aGlzLkJhKGEuZ2VvbWV0cnkpO3RoaXMucGE9dm9pZCAwIT09YS5maWxsP2EuZmlsbDpudWxsO3RoaXMuTD12b2lkIDAhPT1hLmltYWdlP2EuaW1hZ2U6bnVsbDt0aGlzLmpiPXZvaWQgMCE9PWEucmVuZGVyZXI/YS5yZW5kZXJlcjpudWxsO3RoaXMub2E9dm9pZCAwIT09YS5zdHJva2U/YS5zdHJva2U6bnVsbDt0aGlzLmhhPXZvaWQgMCE9PWEudGV4dD9hLnRleHQ6bnVsbDt0aGlzLkFmPWEuekluZGV4fWw9QmoucHJvdG90eXBlO1xubC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuTygpO2EmJmEuY2xvbmUmJihhPWEuY2xvbmUoKSk7cmV0dXJuIG5ldyBCaih7Z2VvbWV0cnk6YSxmaWxsOnRoaXMudWEoKT90aGlzLnVhKCkuY2xvbmUoKTp2b2lkIDAsaW1hZ2U6dGhpcy5iYSgpP3RoaXMuYmEoKS5jbG9uZSgpOnZvaWQgMCxzdHJva2U6dGhpcy5xYSgpP3RoaXMucWEoKS5jbG9uZSgpOnZvaWQgMCx0ZXh0OnRoaXMucmEoKT90aGlzLnJhKCkuY2xvbmUoKTp2b2lkIDAsekluZGV4OnRoaXMuc2EoKX0pfTtsLmFkPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuamJ9O2wuTz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJifTtsLnVhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGF9O2wuamY9ZnVuY3Rpb24oYSl7dGhpcy5wYT1hfTtsLmJhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTH07bC5xYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm9hfTtsLm1mPWZ1bmN0aW9uKGEpe3RoaXMub2E9YX07bC5yYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmhhfTtcbmwubmY9ZnVuY3Rpb24oYSl7dGhpcy5oYT1hfTtsLnNhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQWZ9O2wuQmE9ZnVuY3Rpb24oYSl7XCJmdW5jdGlvblwiPT09dHlwZW9mIGE/dGhpcy5JYT1hOlwic3RyaW5nXCI9PT10eXBlb2YgYT90aGlzLklhPWZ1bmN0aW9uKGIpe3JldHVybiBiLmdldChhKX06YT92b2lkIDAhPT1hJiYodGhpcy5JYT1mdW5jdGlvbigpe3JldHVybiBhfSk6dGhpcy5JYT1Dajt0aGlzLmJiPWF9O2wucGY9ZnVuY3Rpb24oYSl7dGhpcy5BZj1hfTtmdW5jdGlvbiBEaihhKXtpZihcImZ1bmN0aW9uXCIhPT10eXBlb2YgYSl7aWYoQXJyYXkuaXNBcnJheShhKSl2YXIgYj1hO2Vsc2UgeChhIGluc3RhbmNlb2YgQmosNDEpLGI9W2FdO2E9ZnVuY3Rpb24oKXtyZXR1cm4gYn19cmV0dXJuIGF9dmFyIEVqPW51bGw7XG5mdW5jdGlvbiBGaigpe2lmKCFFail7dmFyIGE9bmV3IHpqKHtjb2xvcjpcInJnYmEoMjU1LDI1NSwyNTUsMC40KVwifSksYj1uZXcgQWooe2NvbG9yOlwiIzMzOTlDQ1wiLHdpZHRoOjEuMjV9KTtFaj1bbmV3IEJqKHtpbWFnZTpuZXcgeWooe2ZpbGw6YSxzdHJva2U6YixyYWRpdXM6NX0pLGZpbGw6YSxzdHJva2U6Yn0pXX1yZXR1cm4gRWp9XG5mdW5jdGlvbiBHaigpe3ZhciBhPXt9LGI9WzI1NSwyNTUsMjU1LDFdLGM9WzAsMTUzLDI1NSwxXTthLlBvbHlnb249W25ldyBCaih7ZmlsbDpuZXcgemooe2NvbG9yOlsyNTUsMjU1LDI1NSwuNV19KX0pXTthLk11bHRpUG9seWdvbj1hLlBvbHlnb247YS5MaW5lU3RyaW5nPVtuZXcgQmooe3N0cm9rZTpuZXcgQWooe2NvbG9yOmIsd2lkdGg6NX0pfSksbmV3IEJqKHtzdHJva2U6bmV3IEFqKHtjb2xvcjpjLHdpZHRoOjN9KX0pXTthLk11bHRpTGluZVN0cmluZz1hLkxpbmVTdHJpbmc7YS5DaXJjbGU9YS5Qb2x5Z29uLmNvbmNhdChhLkxpbmVTdHJpbmcpO2EuUG9pbnQ9W25ldyBCaih7aW1hZ2U6bmV3IHlqKHtyYWRpdXM6NixmaWxsOm5ldyB6aih7Y29sb3I6Y30pLHN0cm9rZTpuZXcgQWooe2NvbG9yOmIsd2lkdGg6MS41fSl9KSx6SW5kZXg6SW5maW5pdHl9KV07YS5NdWx0aVBvaW50PWEuUG9pbnQ7YS5HZW9tZXRyeUNvbGxlY3Rpb249YS5Qb2x5Z29uLmNvbmNhdChhLkxpbmVTdHJpbmcsXG5hLlBvaW50KTtyZXR1cm4gYX1mdW5jdGlvbiBDaihhKXtyZXR1cm4gYS5PKCl9O2Z1bmN0aW9uIEIoYSl7TmMuY2FsbCh0aGlzKTt0aGlzLmI9dm9pZCAwO3RoaXMuYT1cImdlb21ldHJ5XCI7dGhpcy5mPW51bGw7dGhpcy5pPXZvaWQgMDt0aGlzLmc9bnVsbDt6KHRoaXMsUGModGhpcy5hKSx0aGlzLmVjLHRoaXMpO3ZvaWQgMCE9PWEmJihhIGluc3RhbmNlb2YgUWV8fCFhP3RoaXMuQmEoYSk6dGhpcy5uYShhKSl9dihCLE5jKTtsPUIucHJvdG90eXBlO2wuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgQih0aGlzLkZhKCkpO2EuWmEodGhpcy5hKTt2YXIgYj10aGlzLk8oKTtiJiZhLkJhKGIuY2xvbmUoKSk7KGI9dGhpcy5mKSYmYS5wZShiKTtyZXR1cm4gYX07bC5PPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KHRoaXMuYSl9O2wuQmg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ifTtsLnpnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYX07bC5DaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmZ9O2wuY2I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pfTtsLkpnPWZ1bmN0aW9uKCl7dGhpcy5jKCl9O1xubC5lYz1mdW5jdGlvbigpe3RoaXMuZyYmKHZjKHRoaXMuZyksdGhpcy5nPW51bGwpO3ZhciBhPXRoaXMuTygpO2EmJih0aGlzLmc9eihhLFwiY2hhbmdlXCIsdGhpcy5KZyx0aGlzKSk7dGhpcy5jKCl9O2wuQmE9ZnVuY3Rpb24oYSl7dGhpcy5zZXQodGhpcy5hLGEpfTtsLnBlPWZ1bmN0aW9uKGEpe3RoaXMuaT0odGhpcy5mPWEpP0hqKGEpOnZvaWQgMDt0aGlzLmMoKX07bC5sYj1mdW5jdGlvbihhKXt0aGlzLmI9YTt0aGlzLmMoKX07bC5aYT1mdW5jdGlvbihhKXtBYyh0aGlzLFBjKHRoaXMuYSksdGhpcy5lYyx0aGlzKTt0aGlzLmE9YTt6KHRoaXMsUGModGhpcy5hKSx0aGlzLmVjLHRoaXMpO3RoaXMuZWMoKX07XG5mdW5jdGlvbiBIaihhKXt2YXIgYjtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSkyPT1hLmxlbmd0aD9iPWZ1bmN0aW9uKGIpe3JldHVybiBhKHRoaXMsYil9OmI9YTtlbHNle2lmKEFycmF5LmlzQXJyYXkoYSkpdmFyIGM9YTtlbHNlIHgoYSBpbnN0YW5jZW9mIEJqLDQxKSxjPVthXTtiPWZ1bmN0aW9uKCl7cmV0dXJuIGN9fXJldHVybiBifTtmdW5jdGlvbiBJaihhKXtOYy5jYWxsKHRoaXMpO2E9YXx8e307dGhpcy5hPW51bGw7dGhpcy5nPU9iO3RoaXMuZj1uZXcgZWIoNjM3ODEzNyk7dGhpcy5iPXZvaWQgMDt6KHRoaXMsUGMoXCJwcm9qZWN0aW9uXCIpLHRoaXMuRWgsdGhpcyk7eih0aGlzLFBjKFwidHJhY2tpbmdcIiksdGhpcy5laCx0aGlzKTt2b2lkIDAhPT1hLnByb2plY3Rpb24mJnRoaXMuc2V0KFwicHJvamVjdGlvblwiLEZiKGEucHJvamVjdGlvbikpO3ZvaWQgMCE9PWEudHJhY2tpbmdPcHRpb25zJiZ0aGlzLnNldChcInRyYWNraW5nT3B0aW9uc1wiLGEudHJhY2tpbmdPcHRpb25zKTt0aGlzLnhjKHZvaWQgMCE9PWEudHJhY2tpbmc/YS50cmFja2luZzohMSl9dihJaixOYyk7bD1Jai5wcm90b3R5cGU7bC5jYT1mdW5jdGlvbigpe3RoaXMueGMoITEpO05jLnByb3RvdHlwZS5jYS5jYWxsKHRoaXMpfTtcbmwuRWg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldChcInByb2plY3Rpb25cIik7YSYmKHRoaXMuZz1HYihGYihcIkVQU0c6NDMyNlwiKSxhKSx0aGlzLmEmJnRoaXMuc2V0KFwicG9zaXRpb25cIix0aGlzLmcodGhpcy5hKSkpfTtsLmVoPWZ1bmN0aW9uKCl7aWYobGQpe3ZhciBhPXRoaXMuZmUoKTthJiZ2b2lkIDA9PT10aGlzLmI/dGhpcy5iPW5hdmlnYXRvci5nZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uKHRoaXMuR2kuYmluZCh0aGlzKSx0aGlzLkhpLmJpbmQodGhpcyksdGhpcy5nZXQoXCJ0cmFja2luZ09wdGlvbnNcIikpOmF8fHZvaWQgMD09PXRoaXMuYnx8KG5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHRoaXMuYiksdGhpcy5iPXZvaWQgMCl9fTtcbmwuR2k9ZnVuY3Rpb24oYSl7dmFyIGI9YS5jb29yZHM7dGhpcy5zZXQoXCJhY2N1cmFjeVwiLGIuYWNjdXJhY3kpO3RoaXMuc2V0KFwiYWx0aXR1ZGVcIixudWxsPT09Yi5hbHRpdHVkZT92b2lkIDA6Yi5hbHRpdHVkZSk7dGhpcy5zZXQoXCJhbHRpdHVkZUFjY3VyYWN5XCIsbnVsbD09PWIuYWx0aXR1ZGVBY2N1cmFjeT92b2lkIDA6Yi5hbHRpdHVkZUFjY3VyYWN5KTt0aGlzLnNldChcImhlYWRpbmdcIixudWxsPT09Yi5oZWFkaW5nP3ZvaWQgMDp1YShiLmhlYWRpbmcpKTt0aGlzLmE/KHRoaXMuYVswXT1iLmxvbmdpdHVkZSx0aGlzLmFbMV09Yi5sYXRpdHVkZSk6dGhpcy5hPVtiLmxvbmdpdHVkZSxiLmxhdGl0dWRlXTthPXRoaXMuZyh0aGlzLmEpO3RoaXMuc2V0KFwicG9zaXRpb25cIixhKTt0aGlzLnNldChcInNwZWVkXCIsbnVsbD09PWIuc3BlZWQ/dm9pZCAwOmIuc3BlZWQpO2E9dGhpcy5mO3ZhciBjPXRoaXMuYSxkPWIuYWNjdXJhY3k7Yj1bXTt2YXIgZTtmb3IoZT0wOzMyPmU7KytlKVViKGIsYS5vZmZzZXQoYyxcbmQsMipNYXRoLlBJKmUvMzIpKTtiLnB1c2goYlswXSxiWzFdKTthPW5ldyBBKG51bGwpO2EuTihcIlhZXCIsYixbYi5sZW5ndGhdKTthLkNiKHRoaXMuZyk7dGhpcy5zZXQoXCJhY2N1cmFjeUdlb21ldHJ5XCIsYSk7dGhpcy5jKCl9O2wuSGk9ZnVuY3Rpb24oYSl7YS50eXBlPVwiZXJyb3JcIjt0aGlzLnhjKCExKTt0aGlzLmwoYSl9O2wud2c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJhY2N1cmFjeVwiKX07bC5BZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcImhlYWRpbmdcIil9O2wuRGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJwb3NpdGlvblwiKX07bC5GZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInNwZWVkXCIpfTtsLmZlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwidHJhY2tpbmdcIil9O2wueGM9ZnVuY3Rpb24oYSl7dGhpcy5zZXQoXCJ0cmFja2luZ1wiLGEpfTtmdW5jdGlvbiBKaihhLGIsYyxkLGUsZil7dmFyIGc9TmFOLGg9TmFOLGs9KGMtYikvZDtpZigxPT09aylnPWFbYl0saD1hW2IrMV07ZWxzZSBpZigyPT1rKWc9KDEtZSkqYVtiXStlKmFbYitkXSxoPSgxLWUpKmFbYisxXStlKmFbYitkKzFdO2Vsc2UgaWYoMCE9PWspe2g9YVtiXTtrPWFbYisxXTt2YXIgbT0wO2c9WzBdO3ZhciBuO2ZvcihuPWIrZDtuPGM7bis9ZCl7dmFyIHA9YVtuXSxxPWFbbisxXTttKz1NYXRoLnNxcnQoKHAtaCkqKHAtaCkrKHEtaykqKHEtaykpO2cucHVzaChtKTtoPXA7az1xfWM9ZSptO2s9MDttPWcubGVuZ3RoO2ZvcihuPSExO2s8bTspZT1rKyhtLWs+PjEpLGg9K1JiKGdbZV0sYyksMD5oP2s9ZSsxOihtPWUsbj0haCk7ZT1uP2s6fms7MD5lPyhjPShjLWdbLWUtMl0pLyhnWy1lLTFdLWdbLWUtMl0pLGIrPSgtZS0yKSpkLGc9d2EoYVtiXSxhW2IrZF0sYyksaD13YShhW2IrMV0sYVtiK2QrMV0sYykpOihnPWFbYitlKmRdLGg9YVtiK2UqZCsxXSl9cmV0dXJuIGY/XG4oZlswXT1nLGZbMV09aCxmKTpbZyxoXX1mdW5jdGlvbiBLaihhLGIsYyxkLGUpe2lmKDA9PWIpcmV0dXJuIG51bGw7aWYoZDxhWzArYy0xXSlyZXR1cm4gZT8oYj1hLnNsaWNlKDAsMCtjKSxiW2MtMV09ZCxiKTpudWxsO2lmKGFbYi0xXTxkKXJldHVybiBlPyhiPWEuc2xpY2UoYi1jLGIpLGJbYy0xXT1kLGIpOm51bGw7aWYoZD09YVswK2MtMV0pcmV0dXJuIGEuc2xpY2UoMCwwK2MpO2U9MC9jO2ZvcihiLz1jO2U8Yjspe3ZhciBmPWUrYj4+MTtkPGFbKGYrMSkqYy0xXT9iPWY6ZT1mKzF9Yj1hW2UqYy0xXTtpZihkPT1iKXJldHVybiBhLnNsaWNlKChlLTEpKmMsKGUtMSkqYytjKTtmPShkLWIpLyhhWyhlKzEpKmMtMV0tYik7Yj1bXTt2YXIgZztmb3IoZz0wO2c8Yy0xOysrZyliLnB1c2god2EoYVsoZS0xKSpjK2ddLGFbZSpjK2ddLGYpKTtiLnB1c2goZCk7cmV0dXJuIGJ9O2Z1bmN0aW9uIEUoYSxiKXtSZS5jYWxsKHRoaXMpO3RoaXMuYj1udWxsO3RoaXMudT10aGlzLkE9dGhpcy5pPS0xO3RoaXMuWShhLGIpfXYoRSxSZSk7bD1FLnByb3RvdHlwZTtsLmRnPWZ1bmN0aW9uKGEpe3RoaXMucz9VYih0aGlzLnMsYSk6dGhpcy5zPWEuc2xpY2UoKTt0aGlzLmMoKX07bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBFKG51bGwpO2EuTih0aGlzLlYsdGhpcy5zLnNsaWNlKCkpO3JldHVybiBhfTtsLlBhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8R2EodGhpcy5JKCksYSxiKSlyZXR1cm4gZDt0aGlzLnUhPXRoaXMuaiYmKHRoaXMuQT1NYXRoLnNxcnQoWGUodGhpcy5zLDAsdGhpcy5zLmxlbmd0aCx0aGlzLmEsMCkpLHRoaXMudT10aGlzLmopO3JldHVybiBaZSh0aGlzLnMsMCx0aGlzLnMubGVuZ3RoLHRoaXMuYSx0aGlzLkEsITEsYSxiLGMsZCl9O1xubC5IZT1mdW5jdGlvbihhLGIpe3JldHVyblwiWFlNXCIhPXRoaXMuViYmXCJYWVpNXCIhPXRoaXMuVj9udWxsOktqKHRoaXMucyx0aGlzLnMubGVuZ3RoLHRoaXMuYSxhLHZvaWQgMCE9PWI/YjohMSl9O2wuRz1mdW5jdGlvbigpe3JldHVybiBkZih0aGlzLnMsMCx0aGlzLnMubGVuZ3RoLHRoaXMuYSl9O2wuJGQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSmoodGhpcy5zLDAsdGhpcy5zLmxlbmd0aCx0aGlzLmEsYSxiKX07bC5WaD1mdW5jdGlvbigpe3JldHVybiBBaSh0aGlzLnMsMCx0aGlzLnMubGVuZ3RoLHRoaXMuYSl9O2wuWGM9ZnVuY3Rpb24oKXt0aGlzLmkhPXRoaXMuaiYmKHRoaXMuYj10aGlzLiRkKC41LHRoaXMuYiksdGhpcy5pPXRoaXMuaik7cmV0dXJuIHRoaXMuYn07bC51Yj1mdW5jdGlvbihhKXt2YXIgYj1bXTtiLmxlbmd0aD1nZih0aGlzLnMsMCx0aGlzLnMubGVuZ3RoLHRoaXMuYSxhLGIsMCk7YT1uZXcgRShudWxsKTthLk4oXCJYWVwiLGIpO3JldHVybiBhfTtsLkQ9ZnVuY3Rpb24oKXtyZXR1cm5cIkxpbmVTdHJpbmdcIn07XG5sLlk9ZnVuY3Rpb24oYSxiKXthPyhVZSh0aGlzLGIsYSwxKSx0aGlzLnN8fCh0aGlzLnM9W10pLHRoaXMucy5sZW5ndGg9YmYodGhpcy5zLDAsYSx0aGlzLmEpLHRoaXMuYygpKTp0aGlzLk4oXCJYWVwiLG51bGwpfTtsLk49ZnVuY3Rpb24oYSxiKXtUZSh0aGlzLGEsYik7dGhpcy5jKCl9O2Z1bmN0aW9uIExqKGEpe2E9YXx8e307dGhpcy5hPWEuZm9udDt0aGlzLmc9YS5yb3RhdGlvbjt0aGlzLmI9YS5yb3RhdGVXaXRoVmlldzt0aGlzLmM9YS5zY2FsZTt0aGlzLmhhPWEudGV4dDt0aGlzLmY9YS50ZXh0QWxpZ247dGhpcy52PWEudGV4dEJhc2VsaW5lO3RoaXMucGE9dm9pZCAwIT09YS5maWxsP2EuZmlsbDpuZXcgemooe2NvbG9yOlwiIzMzM1wifSk7dGhpcy5vPXZvaWQgMCE9PWEubWF4QW5nbGU/YS5tYXhBbmdsZTpNYXRoLlBJLzQ7dGhpcy5IPXZvaWQgMCE9PWEucGxhY2VtZW50P2EucGxhY2VtZW50OlwicG9pbnRcIjt0aGlzLmk9dm9pZCAwIT09YS5leGNlZWRMZW5ndGg/YS5leGNlZWRMZW5ndGg6ITE7dGhpcy5vYT12b2lkIDAhPT1hLnN0cm9rZT9hLnN0cm9rZTpudWxsO3RoaXMubD12b2lkIDAhPT1hLm9mZnNldFg/YS5vZmZzZXRYOjA7dGhpcy5qPXZvaWQgMCE9PWEub2Zmc2V0WT9hLm9mZnNldFk6MH1sPUxqLnByb3RvdHlwZTtcbmwuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IExqKHtmb250OnRoaXMuYSxwbGFjZW1lbnQ6dGhpcy5ILG1heEFuZ2xlOnRoaXMubyxleGNlZWRMZW5ndGg6dGhpcy5pLHJvdGF0aW9uOnRoaXMuZyxyb3RhdGVXaXRoVmlldzp0aGlzLmIsc2NhbGU6dGhpcy5jLHRleHQ6dGhpcy5yYSgpLHRleHRBbGlnbjp0aGlzLmYsdGV4dEJhc2VsaW5lOnRoaXMudixmaWxsOnRoaXMudWEoKT90aGlzLnVhKCkuY2xvbmUoKTp2b2lkIDAsc3Ryb2tlOnRoaXMucWEoKT90aGlzLnFhKCkuY2xvbmUoKTp2b2lkIDAsb2Zmc2V0WDp0aGlzLmwsb2Zmc2V0WTp0aGlzLmp9KX07bC51YT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhfTtsLnFhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub2F9O2wucmE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oYX07bC5kaj1mdW5jdGlvbihhKXt0aGlzLmE9YX07bC5qZj1mdW5jdGlvbihhKXt0aGlzLnBhPWF9O2wubWY9ZnVuY3Rpb24oYSl7dGhpcy5vYT1hfTtcbmwubmY9ZnVuY3Rpb24oYSl7dGhpcy5oYT1hfTtmdW5jdGlvbiBNaihhLGIsYyl7S2MuY2FsbCh0aGlzKTtjPWM/Yzp7fTt0aGlzLnRhPWE7dGhpcy5zdGF0ZT1iO3RoaXMuYz1udWxsO3RoaXMua2V5PVwiXCI7dGhpcy5nPXZvaWQgMD09PWMudHJhbnNpdGlvbj8yNTA6Yy50cmFuc2l0aW9uO3RoaXMuZj17fX12KE1qLEtjKTtmdW5jdGlvbiBOaihhKXthLmwoXCJjaGFuZ2VcIil9TWoucHJvdG90eXBlLlNhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2V5K1wiL1wiK3RoaXMudGF9O2Z1bmN0aW9uIHdpKGEpe2lmKCFhLmMpcmV0dXJuIGE7dmFyIGI9YS5jO2Rve2lmKDI9PWIuc3RhdGUpcmV0dXJuIGI7Yj1iLmN9d2hpbGUoYik7cmV0dXJuIGF9ZnVuY3Rpb24gdmkoYSxiKXthLnN0YXRlPWI7TmooYSl9XG5mdW5jdGlvbiB4aShhLGIsYyl7aWYoIWEuZylyZXR1cm4gMTt2YXIgZD1hLmZbYl07aWYoIWQpZD1jLGEuZltiXT1kO2Vsc2UgaWYoLTE9PT1kKXJldHVybiAxO2I9Yy1kKzFFMy82MDtyZXR1cm4gYj49YS5nPzE6TWF0aC5wb3coYi9hLmcsMyl9O2Z1bmN0aW9uIE9qKGEsYixjLGQsZSxmKXtNai5jYWxsKHRoaXMsYSxiLGYpO3RoaXMuaj1jO3RoaXMuTD1uZXcgSW1hZ2U7bnVsbCE9PWQmJih0aGlzLkwuY3Jvc3NPcmlnaW49ZCk7dGhpcy5hPW51bGw7dGhpcy5iPWV9dihPaixNaik7bD1Pai5wcm90b3R5cGU7bC5jYT1mdW5jdGlvbigpezE9PXRoaXMuc3RhdGUmJihQaih0aGlzKSx0aGlzLkw9UWooKSk7dGhpcy5jJiZDYyh0aGlzLmMpO3RoaXMuc3RhdGU9NTtOaih0aGlzKTtNai5wcm90b3R5cGUuY2EuY2FsbCh0aGlzKX07bC5iYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLkx9O2wuU2E9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qfTtsLkZoPWZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT0zO1BqKHRoaXMpO3RoaXMuTD1RaigpO05qKHRoaXMpfTtsLkdoPWZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT10aGlzLkwubmF0dXJhbFdpZHRoJiZ0aGlzLkwubmF0dXJhbEhlaWdodD8yOjQ7UGoodGhpcyk7TmoodGhpcyl9O1xubC5sb2FkPWZ1bmN0aW9uKCl7aWYoMD09dGhpcy5zdGF0ZXx8Mz09dGhpcy5zdGF0ZSl0aGlzLnN0YXRlPTEsTmoodGhpcyksdGhpcy5hPVt6KHRoaXMuTCxcImVycm9yXCIsdGhpcy5GaCx0aGlzLCEwKSx6KHRoaXMuTCxcImxvYWRcIix0aGlzLkdoLHRoaXMsITApXSx0aGlzLmIodGhpcyx0aGlzLmopfTtmdW5jdGlvbiBQaihhKXthLmEuZm9yRWFjaCh2Yyk7YS5hPW51bGx9ZnVuY3Rpb24gUWooKXt2YXIgYT1MZigxLDEpO2EuZmlsbFN0eWxlPVwicmdiYSgwLDAsMCwwKVwiO2EuZmlsbFJlY3QoMCwwLDEsMSk7cmV0dXJuIGEuY2FudmFzfTtmdW5jdGlvbiBSaihhKXt0aGlzLmM9eWkuaGIoYSk7dGhpcy5hPXt9fWw9UmoucHJvdG90eXBlO2wuZGE9ZnVuY3Rpb24oYSxiKXthPXtUOmFbMF0sUjphWzFdLFc6YVsyXSxVOmFbM10sdmFsdWU6Yn07dGhpcy5jLmRhKGEpO3RoaXMuYVt3KGIpXT1hfTtsLmxvYWQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9QXJyYXkoYi5sZW5ndGgpLGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF0sZz1iW2RdO2Y9e1Q6ZlswXSxSOmZbMV0sVzpmWzJdLFU6ZlszXSx2YWx1ZTpnfTtjW2RdPWY7dGhpcy5hW3coZyldPWZ9dGhpcy5jLmxvYWQoYyl9O2wucmVtb3ZlPWZ1bmN0aW9uKGEpe2E9dyhhKTt2YXIgYj10aGlzLmFbYV07ZGVsZXRlIHRoaXMuYVthXTtyZXR1cm4gbnVsbCE9PXRoaXMuYy5yZW1vdmUoYil9O2Z1bmN0aW9uIFNqKGEsYixjKXt2YXIgZD1hLmFbdyhjKV07T2EoW2QuVCxkLlIsZC5XLGQuVV0sYil8fChhLnJlbW92ZShjKSxhLmRhKGIsYykpfVxuZnVuY3Rpb24gVGooYSl7cmV0dXJuIGEuYy5hbGwoKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudmFsdWV9KX1mdW5jdGlvbiBVaihhLGIpe3JldHVybiBhLmMuc2VhcmNoKHtUOmJbMF0sUjpiWzFdLFc6YlsyXSxVOmJbM119KS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudmFsdWV9KX1sLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVmooVGoodGhpcyksYSxiKX07ZnVuY3Rpb24gV2ooYSxiLGMsZCl7cmV0dXJuIFZqKFVqKGEsYiksYyxkKX1mdW5jdGlvbiBWaihhLGIsYyl7Zm9yKHZhciBkLGU9MCxmPWEubGVuZ3RoO2U8ZiYmIShkPWIuY2FsbChjLGFbZV0pKTtlKyspO3JldHVybiBkfWwuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmMuY2xlYXIoKTt0aGlzLmE9e319O2wuST1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmMuZGF0YTtyZXR1cm4gSmEoYi5ULGIuUixiLlcsYi5VLGEpfTtcbmwuY29uY2F0PWZ1bmN0aW9uKGEpe3RoaXMuYy5sb2FkKGEuYy5hbGwoKSk7Zm9yKHZhciBiIGluIGEuYSl0aGlzLmFbYnwwXT1hLmFbYnwwXX07ZnVuY3Rpb24gWGooYSl7TmMuY2FsbCh0aGlzKTt0aGlzLkM9RmIoYS5wcm9qZWN0aW9uKTt0aGlzLmVhPVlqKGEuYXR0cmlidXRpb25zKTt0aGlzLmxhPWEubG9nbzt0aGlzLnhhPXZvaWQgMCE9PWEuc3RhdGU/YS5zdGF0ZTpcInJlYWR5XCI7dGhpcy5CPXZvaWQgMCE9PWEud3JhcFg/YS53cmFwWDohMX12KFhqLE5jKTtmdW5jdGlvbiBZaihhKXtpZighYSlyZXR1cm4gbnVsbDtpZihhIGluc3RhbmNlb2YgdGMpcmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuW2EubGVdfTtpZihBcnJheS5pc0FycmF5KGEpKXtpZihhWzBdaW5zdGFuY2VvZiB0Yyl7dmFyIGI9YS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEubGV9KTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYn19YS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyB0Yyh7aHRtbDphfSl9KTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19cmV0dXJuXCJmdW5jdGlvblwiPT09dHlwZW9mIGE/YTpmdW5jdGlvbigpe3JldHVyblthXX19XG5Yai5wcm90b3R5cGUuRWE9bGE7WGoucHJvdG90eXBlLktiPWZ1bmN0aW9uKCl7dGhpcy5jKCl9O1RmKFwiTUFQX1JFTkRFUkVSXCIsc2kpO1VmKCk7XG5mdW5jdGlvbiBIKGEpe2E9WmEoe30sYSk7YS5jb250cm9sc3x8KGEuY29udHJvbHM9cGcoKSk7aWYoIWEuaW50ZXJhY3Rpb25zKXt2YXIgYj1hLGM9e30sZD1uZXcgU2MsZT1uZXcgcWc7KHZvaWQgMCE9PWMuYWx0U2hpZnREcmFnUm90YXRlP2MuYWx0U2hpZnREcmFnUm90YXRlOjEpJiZkLnB1c2gobmV3IE9nKTsodm9pZCAwIT09Yy5kb3VibGVDbGlja1pvb20/Yy5kb3VibGVDbGlja1pvb206MSkmJmQucHVzaChuZXcgeGcoe2RlbHRhOmMuem9vbURlbHRhLGR1cmF0aW9uOmMuem9vbUR1cmF0aW9ufSkpOyh2b2lkIDAhPT1jLmRyYWdQYW4/Yy5kcmFnUGFuOjEpJiZkLnB1c2gobmV3IEtnKHtraW5ldGljOmV9KSk7KHZvaWQgMCE9PWMucGluY2hSb3RhdGU/Yy5waW5jaFJvdGF0ZToxKSYmZC5wdXNoKG5ldyBtaCk7KHZvaWQgMCE9PWMucGluY2hab29tP2MucGluY2hab29tOjEpJiZkLnB1c2gobmV3IHFoKHtjb25zdHJhaW5SZXNvbHV0aW9uOmMuY29uc3RyYWluUmVzb2x1dGlvbixkdXJhdGlvbjpjLnpvb21EdXJhdGlvbn0pKTtcbmlmKHZvaWQgMCE9PWMua2V5Ym9hcmQ/Yy5rZXlib2FyZDoxKWQucHVzaChuZXcgZWgpLGQucHVzaChuZXcgZ2goe2RlbHRhOmMuem9vbURlbHRhLGR1cmF0aW9uOmMuem9vbUR1cmF0aW9ufSkpOyh2b2lkIDAhPT1jLm1vdXNlV2hlZWxab29tP2MubW91c2VXaGVlbFpvb206MSkmJmQucHVzaChuZXcgaWgoe2NvbnN0cmFpblJlc29sdXRpb246Yy5jb25zdHJhaW5SZXNvbHV0aW9uLGR1cmF0aW9uOmMuem9vbUR1cmF0aW9ufSkpOyh2b2lkIDAhPT1jLnNoaWZ0RHJhZ1pvb20/Yy5zaGlmdERyYWdab29tOjEpJiZkLnB1c2gobmV3IGRoKHtkdXJhdGlvbjpjLnpvb21EdXJhdGlvbn0pKTtiLmludGVyYWN0aW9ucz1kfVpmLmNhbGwodGhpcyxhKX12KEgsWmYpO2Z1bmN0aW9uIFpqKGEpe05jLmNhbGwodGhpcyk7dGhpcy5pZD1hLmlkO3RoaXMuaW5zZXJ0Rmlyc3Q9dm9pZCAwIT09YS5pbnNlcnRGaXJzdD9hLmluc2VydEZpcnN0OiEwO3RoaXMuc3RvcEV2ZW50PXZvaWQgMCE9PWEuc3RvcEV2ZW50P2Euc3RvcEV2ZW50OiEwO3RoaXMuZWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO3RoaXMuZWxlbWVudC5jbGFzc05hbWU9dm9pZCAwIT09YS5jbGFzc05hbWU/YS5jbGFzc05hbWU6XCJvbC1vdmVybGF5LWNvbnRhaW5lciBvbC1zZWxlY3RhYmxlXCI7dGhpcy5lbGVtZW50LnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjt0aGlzLmF1dG9QYW49dm9pZCAwIT09YS5hdXRvUGFuP2EuYXV0b1BhbjohMTt0aGlzLmF1dG9QYW5BbmltYXRpb249YS5hdXRvUGFuQW5pbWF0aW9ufHx7fTt0aGlzLmF1dG9QYW5NYXJnaW49dm9pZCAwIT09YS5hdXRvUGFuTWFyZ2luP2EuYXV0b1Bhbk1hcmdpbjoyMDt0aGlzLmE9e1hiOlwiXCIsZ2M6XCJcIix2YzpcIlwiLFxuQWM6XCJcIix2aXNpYmxlOiEwfTt0aGlzLmI9bnVsbDt6KHRoaXMsUGMoYWspLHRoaXMuSWcsdGhpcyk7eih0aGlzLFBjKGJrKSx0aGlzLlBnLHRoaXMpO3oodGhpcyxQYyhjayksdGhpcy5TZyx0aGlzKTt6KHRoaXMsUGMoZGspLHRoaXMuVWcsdGhpcyk7eih0aGlzLFBjKGVrKSx0aGlzLlZnLHRoaXMpO3ZvaWQgMCE9PWEuZWxlbWVudCYmdGhpcy5zZXQoYWssYS5lbGVtZW50KTt0aGlzLnNldChjayx2b2lkIDAhPT1hLm9mZnNldD9hLm9mZnNldDpbMCwwXSk7dGhpcy5zZXQoZWssdm9pZCAwIT09YS5wb3NpdGlvbmluZz9hLnBvc2l0aW9uaW5nOlwidG9wLWxlZnRcIik7dm9pZCAwIT09YS5wb3NpdGlvbiYmdGhpcy5xZShhLnBvc2l0aW9uKX12KFpqLE5jKTtsPVpqLnByb3RvdHlwZTtsLklnPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuZWxlbWVudDthLmxhc3RDaGlsZDspYS5yZW1vdmVDaGlsZChhLmxhc3RDaGlsZCk7KGE9dGhpcy5nZXQoYWspKSYmdGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGEpfTtcbmwuUGc9ZnVuY3Rpb24oKXt0aGlzLmImJihNZih0aGlzLmVsZW1lbnQpLHZjKHRoaXMuYiksdGhpcy5iPW51bGwpO3ZhciBhPXRoaXMuZ2V0KGJrKTthJiYodGhpcy5iPXooYSxcInBvc3RyZW5kZXJcIix0aGlzLnJlbmRlcix0aGlzKSxmayh0aGlzKSxhPXRoaXMuc3RvcEV2ZW50P2EuQjphLnUsdGhpcy5pbnNlcnRGaXJzdD9hLmluc2VydEJlZm9yZSh0aGlzLmVsZW1lbnQsYS5jaGlsZE5vZGVzWzBdfHxudWxsKTphLmFwcGVuZENoaWxkKHRoaXMuZWxlbWVudCkpfTtsLnJlbmRlcj1mdW5jdGlvbigpe2ZrKHRoaXMpfTtsLlNnPWZ1bmN0aW9uKCl7ZmsodGhpcyl9O1xubC5VZz1mdW5jdGlvbigpe2ZrKHRoaXMpO2lmKHRoaXMuZ2V0KGRrKSYmdGhpcy5hdXRvUGFuKXt2YXIgYT10aGlzLmdldChiayk7aWYoYSYmZGcoYSkpe3ZhciBiPWdrKGRnKGEpLGEud2IoKSksYz10aGlzLmdldChhayksZD1jLm9mZnNldFdpZHRoLGU9Z2V0Q29tcHV0ZWRTdHlsZShjKTtkKz1wYXJzZUludChlLm1hcmdpbkxlZnQsMTApK3BhcnNlSW50KGUubWFyZ2luUmlnaHQsMTApO2U9Yy5vZmZzZXRIZWlnaHQ7dmFyIGY9Z2V0Q29tcHV0ZWRTdHlsZShjKTtlKz1wYXJzZUludChmLm1hcmdpblRvcCwxMCkrcGFyc2VJbnQoZi5tYXJnaW5Cb3R0b20sMTApO3ZhciBnPWdrKGMsW2QsZV0pO2M9dGhpcy5hdXRvUGFuTWFyZ2luO0hhKGIsZyl8fChkPWdbMF0tYlswXSxlPWJbMl0tZ1syXSxmPWdbMV0tYlsxXSxnPWJbM10tZ1szXSxiPVswLDBdLDA+ZD9iWzBdPWQtYzowPmUmJihiWzBdPU1hdGguYWJzKGUpK2MpLDA+Zj9iWzFdPWYtYzowPmcmJihiWzFdPU1hdGguYWJzKGcpK2MpLFxuMD09PWJbMF0mJjA9PT1iWzFdKXx8KGM9YS5aKCkuamEoKSxjPWVnKGEsYyksYj1bY1swXStiWzBdLGNbMV0rYlsxXV0sYS5aKCkuYW5pbWF0ZSh7Y2VudGVyOmEuSmEoYiksZHVyYXRpb246dGhpcy5hdXRvUGFuQW5pbWF0aW9uLmR1cmF0aW9uLGVhc2luZzp0aGlzLmF1dG9QYW5BbmltYXRpb24uZWFzaW5nfSkpfX19O2wuVmc9ZnVuY3Rpb24oKXtmayh0aGlzKX07bC5zZXRNYXA9ZnVuY3Rpb24oYSl7dGhpcy5zZXQoYmssYSl9O2wucWU9ZnVuY3Rpb24oYSl7dGhpcy5zZXQoZGssYSl9O2Z1bmN0aW9uIGdrKGEsYil7dmFyIGM9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTthPWMubGVmdCt3aW5kb3cucGFnZVhPZmZzZXQ7Yz1jLnRvcCt3aW5kb3cucGFnZVlPZmZzZXQ7cmV0dXJuW2EsYyxhK2JbMF0sYytiWzFdXX1mdW5jdGlvbiBoayhhLGIpe2EuYS52aXNpYmxlIT09YiYmKGEuZWxlbWVudC5zdHlsZS5kaXNwbGF5PWI/XCJcIjpcIm5vbmVcIixhLmEudmlzaWJsZT1iKX1cbmZ1bmN0aW9uIGZrKGEpe3ZhciBiPWEuZ2V0KGJrKSxjPWEuZ2V0KGRrKTtpZihiJiZiLmImJmMpe2M9ZWcoYixjKTt2YXIgZD1iLndiKCk7Yj1hLmVsZW1lbnQuc3R5bGU7dmFyIGU9YS5nZXQoY2spLGY9YS5nZXQoZWspO2hrKGEsITApO3ZhciBnPWVbMF07ZT1lWzFdO2lmKFwiYm90dG9tLXJpZ2h0XCI9PWZ8fFwiY2VudGVyLXJpZ2h0XCI9PWZ8fFwidG9wLXJpZ2h0XCI9PWYpXCJcIiE9PWEuYS5nYyYmKGEuYS5nYz1iLmxlZnQ9XCJcIiksZz1NYXRoLnJvdW5kKGRbMF0tY1swXS1nKStcInB4XCIsYS5hLnZjIT1nJiYoYS5hLnZjPWIucmlnaHQ9Zyk7ZWxzZXtcIlwiIT09YS5hLnZjJiYoYS5hLnZjPWIucmlnaHQ9XCJcIik7aWYoXCJib3R0b20tY2VudGVyXCI9PWZ8fFwiY2VudGVyLWNlbnRlclwiPT1mfHxcInRvcC1jZW50ZXJcIj09ZilnLT1hLmVsZW1lbnQub2Zmc2V0V2lkdGgvMjtnPU1hdGgucm91bmQoY1swXStnKStcInB4XCI7YS5hLmdjIT1nJiYoYS5hLmdjPWIubGVmdD1nKX1pZihcImJvdHRvbS1sZWZ0XCI9PWZ8fFxuXCJib3R0b20tY2VudGVyXCI9PWZ8fFwiYm90dG9tLXJpZ2h0XCI9PWYpXCJcIiE9PWEuYS5BYyYmKGEuYS5BYz1iLnRvcD1cIlwiKSxjPU1hdGgucm91bmQoZFsxXS1jWzFdLWUpK1wicHhcIixhLmEuWGIhPWMmJihhLmEuWGI9Yi5ib3R0b209Yyk7ZWxzZXtcIlwiIT09YS5hLlhiJiYoYS5hLlhiPWIuYm90dG9tPVwiXCIpO2lmKFwiY2VudGVyLWxlZnRcIj09Znx8XCJjZW50ZXItY2VudGVyXCI9PWZ8fFwiY2VudGVyLXJpZ2h0XCI9PWYpZS09YS5lbGVtZW50Lm9mZnNldEhlaWdodC8yO2M9TWF0aC5yb3VuZChjWzFdK2UpK1wicHhcIjthLmEuQWMhPWMmJihhLmEuQWM9Yi50b3A9Yyl9fWVsc2UgaGsoYSwhMSl9dmFyIGFrPVwiZWxlbWVudFwiLGJrPVwibWFwXCIsY2s9XCJvZmZzZXRcIixkaz1cInBvc2l0aW9uXCIsZWs9XCJwb3NpdGlvbmluZ1wiO2Z1bmN0aW9uIGlrKGEsYixjLGQsZSxmKXtNai5jYWxsKHRoaXMsYSxiLGYpO3RoaXMuYT0wO3RoaXMudj1udWxsO3RoaXMuQz1kO3RoaXMuaj1udWxsO3RoaXMuYj17fTt0aGlzLkI9ZTt0aGlzLkg9Y312KGlrLE1qKTtsPWlrLnByb3RvdHlwZTtsLmNhPWZ1bmN0aW9uKCl7dGhpcy5qPW51bGw7dGhpcy5iPXt9O3RoaXMuc3RhdGU9NTtOaih0aGlzKTtNai5wcm90b3R5cGUuY2EuY2FsbCh0aGlzKX07bC5JPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudnx8amt9O2wuU2E9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5IfTtmdW5jdGlvbiB1aihhLGIsYyl7cmV0dXJuIGEuYlt3KGIpK1wiLFwiK2NdfWwubG9hZD1mdW5jdGlvbigpezA9PXRoaXMuc3RhdGUmJih2aSh0aGlzLDEpLHRoaXMuQih0aGlzLHRoaXMuSCksdGhpcy5pKG51bGwsTmFOLG51bGwpKX07bC51aT1mdW5jdGlvbihhLGIsYyl7dGhpcy5vPWI7dGhpcy5qPWE7dmkodGhpcywyKTt0aGlzLnY9Y307XG5sLnRpPWZ1bmN0aW9uKCl7dmkodGhpcywzKX07dmFyIGprPVswLDAsNDA5Niw0MDk2XTtmdW5jdGlvbiBrayhhKXthPWE/YTp7fTt2YXIgYj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO2IuY2xhc3NOYW1lPXZvaWQgMCE9PWEuY2xhc3NOYW1lP2EuY2xhc3NOYW1lOlwib2wtbW91c2UtcG9zaXRpb25cIjtnZy5jYWxsKHRoaXMse2VsZW1lbnQ6YixyZW5kZXI6YS5yZW5kZXI/YS5yZW5kZXI6bGssdGFyZ2V0OmEudGFyZ2V0fSk7eih0aGlzLFBjKG1rKSx0aGlzLk1oLHRoaXMpO2EuY29vcmRpbmF0ZUZvcm1hdCYmdGhpcy5oZihhLmNvb3JkaW5hdGVGb3JtYXQpO2EucHJvamVjdGlvbiYmdGhpcy5zZXQobWssRmIoYS5wcm9qZWN0aW9uKSk7dGhpcy5vPXZvaWQgMCE9PWEudW5kZWZpbmVkSFRNTD9hLnVuZGVmaW5lZEhUTUw6XCJcIjt0aGlzLmk9Yi5pbm5lckhUTUw7dGhpcy5mPXRoaXMuYj10aGlzLmE9bnVsbH12KGtrLGdnKTtcbmZ1bmN0aW9uIGxrKGEpe2E9YS5mcmFtZVN0YXRlO2E/dGhpcy5hIT1hLnZpZXdTdGF0ZS5wcm9qZWN0aW9uJiYodGhpcy5hPWEudmlld1N0YXRlLnByb2plY3Rpb24sdGhpcy5iPW51bGwpOnRoaXMuYT1udWxsO25rKHRoaXMsdGhpcy5mKX1sPWtrLnByb3RvdHlwZTtsLk1oPWZ1bmN0aW9uKCl7dGhpcy5iPW51bGx9O2wuUWc9ZnVuY3Rpb24oYSl7dGhpcy5mPWFkKHRoaXMuZyxhKTtuayh0aGlzLHRoaXMuZil9O2wuUmc9ZnVuY3Rpb24oKXtuayh0aGlzLG51bGwpO3RoaXMuZj1udWxsfTtsLnNldE1hcD1mdW5jdGlvbihhKXtnZy5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcyxhKTthJiYoYT1hLmEsdGhpcy5DLnB1c2goeihhLFwibW91c2Vtb3ZlXCIsdGhpcy5RZyx0aGlzKSx6KGEsXCJtb3VzZW91dFwiLHRoaXMuUmcsdGhpcykpKX07bC5oZj1mdW5jdGlvbihhKXt0aGlzLnNldChvayxhKX07XG5mdW5jdGlvbiBuayhhLGIpe3ZhciBjPWEubztpZihiJiZhLmEpe2lmKCFhLmIpe3ZhciBkPWEuZ2V0KG1rKTthLmI9ZD9HYihhLmEsZCk6T2J9aWYoYj1hLmcuSmEoYikpYS5iKGIsYiksYz0oYz1hLmdldChvaykpP2MoYik6Yi50b1N0cmluZygpfWEuaSYmYz09YS5pfHwoYS5lbGVtZW50LmlubmVySFRNTD1jLGEuaT1jKX12YXIgbWs9XCJwcm9qZWN0aW9uXCIsb2s9XCJjb29yZGluYXRlRm9ybWF0XCI7ZnVuY3Rpb24gcGsoYSl7YT1hP2E6e307dmFyIGI9dm9pZCAwIT09YS5jbGFzc05hbWU/YS5jbGFzc05hbWU6XCJvbC1zY2FsZS1saW5lXCI7dGhpcy5mPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7dGhpcy5mLmNsYXNzTmFtZT1iK1wiLWlubmVyXCI7dGhpcy5hPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7dGhpcy5hLmNsYXNzTmFtZT1iK1wiIG9sLXVuc2VsZWN0YWJsZVwiO3RoaXMuYS5hcHBlbmRDaGlsZCh0aGlzLmYpO3RoaXMubz1udWxsO3RoaXMuaT12b2lkIDAhPT1hLm1pbldpZHRoP2EubWluV2lkdGg6NjQ7dGhpcy5iPSExO3RoaXMudT12b2lkIDA7dGhpcy5CPVwiXCI7Z2cuY2FsbCh0aGlzLHtlbGVtZW50OnRoaXMuYSxyZW5kZXI6YS5yZW5kZXI/YS5yZW5kZXI6cWssdGFyZ2V0OmEudGFyZ2V0fSk7eih0aGlzLFBjKHJrKSx0aGlzLkEsdGhpcyk7dGhpcy5zZXQocmssYS51bml0c3x8XCJtZXRyaWNcIil9dihwayxnZyk7dmFyIHNrPVsxLDIsNV07XG5mdW5jdGlvbiBxayhhKXsoYT1hLmZyYW1lU3RhdGUpP3RoaXMubz1hLnZpZXdTdGF0ZTp0aGlzLm89bnVsbDt0ayh0aGlzKX1way5wcm90b3R5cGUuQT1mdW5jdGlvbigpe3RrKHRoaXMpfTtcbmZ1bmN0aW9uIHRrKGEpe3ZhciBiPWEubztpZihiKXt2YXIgYz1iLmNlbnRlcixkPWIucHJvamVjdGlvbixlPWEuZ2V0KHJrKTtiPURiKGQsYi5yZXNvbHV0aW9uLGMsXCJkZWdyZWVzXCI9PWU/XCJkZWdyZWVzXCI6XCJtXCIpO3ZhciBmPWEuaSpiO2M9XCJcIjtcImRlZ3JlZXNcIj09ZT8oYz1sYi5kZWdyZWVzLFwiZGVncmVlc1wiPT1kLmM/Zio9YzpiLz1jLGY8Yy82MD8oYz1cIlxcdTIwMzNcIixiKj0zNjAwKTpmPGM/KGM9XCJcXHUyMDMyXCIsYio9NjApOmM9XCJcXHUwMGIwXCIpOlwiaW1wZXJpYWxcIj09ZT8uOTE0ND5mPyhjPVwiaW5cIixiLz0uMDI1NCk6MTYwOS4zNDQ+Zj8oYz1cImZ0XCIsYi89LjMwNDgpOihjPVwibWlcIixiLz0xNjA5LjM0NCk6XCJuYXV0aWNhbFwiPT1lPyhiLz0xODUyLGM9XCJubVwiKTpcIm1ldHJpY1wiPT1lPy4wMDE+Zj8oYz1cIlxcdTAzYmNtXCIsYio9MUU2KToxPmY/KGM9XCJtbVwiLGIqPTFFMyk6MUUzPmY/Yz1cIm1cIjooYz1cImttXCIsYi89MUUzKTpcInVzXCI9PWU/LjkxNDQ+Zj8oYz1cImluXCIsYio9MzkuMzcpOjE2MDkuMzQ0PlxuZj8oYz1cImZ0XCIsYi89LjMwNDgwMDYxKTooYz1cIm1pXCIsYi89MTYwOS4zNDcyKTp4KCExLDMzKTtmb3IoZT0zKk1hdGguZmxvb3IoTWF0aC5sb2coYS5pKmIpL01hdGgubG9nKDEwKSk7Oyl7Zj1za1soZSUzKzMpJTNdKk1hdGgucG93KDEwLE1hdGguZmxvb3IoZS8zKSk7ZD1NYXRoLnJvdW5kKGYvYik7aWYoaXNOYU4oZCkpe2EuYS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO2EuYj0hMTtyZXR1cm59aWYoZD49YS5pKWJyZWFrOysrZX1iPWYrXCIgXCIrYzthLkIhPWImJihhLmYuaW5uZXJIVE1MPWIsYS5CPWIpO2EudSE9ZCYmKGEuZi5zdHlsZS53aWR0aD1kK1wicHhcIixhLnU9ZCk7YS5ifHwoYS5hLnN0eWxlLmRpc3BsYXk9XCJcIixhLmI9ITApfWVsc2UgYS5iJiYoYS5hLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsYS5iPSExKX12YXIgcms9XCJ1bml0c1wiO3ZhciBOaz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudChcIlwiLFwiXCIsbnVsbCk7ZnVuY3Rpb24gT2soYSxiKXtyZXR1cm4gTmsuY3JlYXRlRWxlbWVudE5TKGEsYil9ZnVuY3Rpb24gUGsoYSl7cmV0dXJuIFFrKGEsITEsW10pLmpvaW4oXCJcIil9ZnVuY3Rpb24gUWsoYSxiLGMpe2lmKGEubm9kZVR5cGU9PU5vZGUuQ0RBVEFfU0VDVElPTl9OT0RFfHxhLm5vZGVUeXBlPT1Ob2RlLlRFWFRfTk9ERSliP2MucHVzaChTdHJpbmcoYS5ub2RlVmFsdWUpLnJlcGxhY2UoLyhcXHJcXG58XFxyfFxcbikvZyxcIlwiKSk6Yy5wdXNoKGEubm9kZVZhbHVlKTtlbHNlIGZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylRayhhLGIsYyk7cmV0dXJuIGN9ZnVuY3Rpb24gUmsoYSl7cmV0dXJuKG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhhLFwiYXBwbGljYXRpb24veG1sXCIpfVxuZnVuY3Rpb24gTShhLGIpe3JldHVybiBmdW5jdGlvbihjLGQpe2M9YS5jYWxsKHZvaWQgMCE9PWI/Yjp0aGlzLGMsZCk7dm9pZCAwIT09YyYmZFtkLmxlbmd0aC0xXS5wdXNoKGMpfX1mdW5jdGlvbiBTayhhLGIpe3JldHVybiBmdW5jdGlvbihjLGQpe2M9YS5jYWxsKHZvaWQgMCE9PWI/Yjp0aGlzLGMsZCk7dm9pZCAwIT09YyYmKGRbZC5sZW5ndGgtMV09Yyl9fWZ1bmN0aW9uIFRrKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe3ZhciBkPWEuY2FsbCh0aGlzLGIsYyk7aWYodm9pZCAwIT09ZCl7Yz1jW2MubGVuZ3RoLTFdO2I9Yi5sb2NhbE5hbWU7dmFyIGU7YiBpbiBjP2U9Y1tiXTplPWNbYl09W107ZS5wdXNoKGQpfX19ZnVuY3Rpb24gTihhLGIpe3JldHVybiBmdW5jdGlvbihjLGQpe3ZhciBlPWEuY2FsbCh0aGlzLGMsZCk7dm9pZCAwIT09ZSYmKGRbZC5sZW5ndGgtMV1bdm9pZCAwIT09Yj9iOmMubG9jYWxOYW1lXT1lKX19XG5mdW5jdGlvbiBPKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMsZCxlKXthLmNhbGwodm9pZCAwIT09Yj9iOnRoaXMsYyxkLGUpO2VbZS5sZW5ndGgtMV0ubm9kZS5hcHBlbmRDaGlsZChjKX19ZnVuY3Rpb24gVWsoYSl7dmFyIGIsYztyZXR1cm4gZnVuY3Rpb24oZCxlLGYpe2lmKHZvaWQgMD09PWIpe2I9e307dmFyIGc9e307Z1tkLmxvY2FsTmFtZV09YTtiW2QubmFtZXNwYWNlVVJJXT1nO2M9VmsoZC5sb2NhbE5hbWUpfVdrKGIsYyxlLGYpfX1mdW5jdGlvbiBWayhhLGIpe3JldHVybiBmdW5jdGlvbihjLGQsZSl7Yz1kW2QubGVuZ3RoLTFdLm5vZGU7ZD1hO3ZvaWQgMD09PWQmJihkPWUpO2U9Yjt2b2lkIDA9PT1iJiYoZT1jLm5hbWVzcGFjZVVSSSk7cmV0dXJuIE9rKGUsZCl9fXZhciBYaz1WaygpO2Z1bmN0aW9uIFlrKGEsYil7Zm9yKHZhciBjPWIubGVuZ3RoLGQ9QXJyYXkoYyksZT0wO2U8YzsrK2UpZFtlXT1hW2JbZV1dO3JldHVybiBkfVxuZnVuY3Rpb24gUShhLGIsYyl7Yz12b2lkIDAhPT1jP2M6e307dmFyIGQ7dmFyIGU9MDtmb3IoZD1hLmxlbmd0aDtlPGQ7KytlKWNbYVtlXV09YjtyZXR1cm4gY31mdW5jdGlvbiBaayhhLGIsYyxkKXtmb3IoYj1iLmZpcnN0RWxlbWVudENoaWxkO2I7Yj1iLm5leHRFbGVtZW50U2libGluZyl7dmFyIGU9YVtiLm5hbWVzcGFjZVVSSV07dm9pZCAwIT09ZSYmKGU9ZVtiLmxvY2FsTmFtZV0sdm9pZCAwIT09ZSYmZS5jYWxsKGQsYixjKSl9fWZ1bmN0aW9uIFMoYSxiLGMsZCxlKXtkLnB1c2goYSk7WmsoYixjLGQsZSk7cmV0dXJuIGQucG9wKCl9ZnVuY3Rpb24gV2soYSxiLGMsZCxlLGYpe2Zvcih2YXIgZz0odm9pZCAwIT09ZT9lOmMpLmxlbmd0aCxoLGssbT0wO208ZzsrK20paD1jW21dLHZvaWQgMCE9PWgmJihrPWIuY2FsbChmLGgsZCx2b2lkIDAhPT1lP2VbbV06dm9pZCAwKSx2b2lkIDAhPT1rJiZhW2submFtZXNwYWNlVVJJXVtrLmxvY2FsTmFtZV0uY2FsbChmLGssaCxkKSl9XG5mdW5jdGlvbiBUKGEsYixjLGQsZSxmLGcpe2UucHVzaChhKTtXayhiLGMsZCxlLGYsZyk7ZS5wb3AoKX07ZnVuY3Rpb24gJGsoYSxiLGMsZCl7cmV0dXJuIGZ1bmN0aW9uKGUsZixnKXt2YXIgaD1uZXcgWE1MSHR0cFJlcXVlc3Q7aC5vcGVuKFwiR0VUXCIsXCJmdW5jdGlvblwiPT09dHlwZW9mIGE/YShlLGYsZyk6YSwhMCk7XCJhcnJheWJ1ZmZlclwiPT1iLkQoKSYmKGgucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIik7aC5vbmxvYWQ9ZnVuY3Rpb24oKXtpZighaC5zdGF0dXN8fDIwMDw9aC5zdGF0dXMmJjMwMD5oLnN0YXR1cyl7dmFyIGE9Yi5EKCk7aWYoXCJqc29uXCI9PWF8fFwidGV4dFwiPT1hKXZhciBlPWgucmVzcG9uc2VUZXh0O2Vsc2VcInhtbFwiPT1hPyhlPWgucmVzcG9uc2VYTUwpfHwoZT1SayhoLnJlc3BvbnNlVGV4dCkpOlwiYXJyYXlidWZmZXJcIj09YSYmKGU9aC5yZXNwb25zZSk7ZT9jLmNhbGwodGhpcyxiLlRhKGUse2ZlYXR1cmVQcm9qZWN0aW9uOmd9KSxiLk9iKGUpLGIuZGUoKSk6ZC5jYWxsKHRoaXMpfWVsc2UgZC5jYWxsKHRoaXMpfS5iaW5kKHRoaXMpO2gub25lcnJvcj1mdW5jdGlvbigpe2QuY2FsbCh0aGlzKX0uYmluZCh0aGlzKTtcbmguc2VuZCgpfX1mdW5jdGlvbiBhbChhLGIpe3JldHVybiAkayhhLGIsZnVuY3Rpb24oYSl7dGhpcy5CYihhKX0sbGEpfTtmdW5jdGlvbiBibCgpe3RoaXMubD10aGlzLmRlZmF1bHREYXRhUHJvamVjdGlvbj1udWxsfWZ1bmN0aW9uIGNsKGEsYixjKXt2YXIgZDtjJiYoZD17ZGF0YVByb2plY3Rpb246Yy5kYXRhUHJvamVjdGlvbj9jLmRhdGFQcm9qZWN0aW9uOmEuT2IoYiksZmVhdHVyZVByb2plY3Rpb246Yy5mZWF0dXJlUHJvamVjdGlvbn0pO3JldHVybiBkbChhLGQpfWZ1bmN0aW9uIGRsKGEsYil7cmV0dXJuIFphKHtkYXRhUHJvamVjdGlvbjphLmRlZmF1bHREYXRhUHJvamVjdGlvbixmZWF0dXJlUHJvamVjdGlvbjphLmx9LGIpfWJsLnByb3RvdHlwZS5kZT1mdW5jdGlvbigpe3JldHVybiBudWxsfTtcbmZ1bmN0aW9uIGVsKGEsYixjKXt2YXIgZD1jP0ZiKGMuZmVhdHVyZVByb2plY3Rpb24pOm51bGwsZT1jP0ZiKGMuZGF0YVByb2plY3Rpb24pOm51bGwsZjtkJiZlJiYhTWIoZCxlKT9hIGluc3RhbmNlb2YgUWU/Zj0oYj9hLmNsb25lKCk6YSkueGIoYj9kOmUsYj9lOmQpOmY9UWIoYSxlLGQpOmY9YTtpZihiJiZjJiZ2b2lkIDAhPT1jLmRlY2ltYWxzKXt2YXIgZz1NYXRoLnBvdygxMCxjLmRlY2ltYWxzKTtmPT09YSYmKGY9Zi5jbG9uZSgpKTtmLkNiKGZ1bmN0aW9uKGEpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjOysrYilhW2JdPU1hdGgucm91bmQoYVtiXSpnKS9nO3JldHVybiBhfSl9cmV0dXJuIGZ9O2Z1bmN0aW9uIGZsKCl7YmwuY2FsbCh0aGlzKX12KGZsLGJsKTtmdW5jdGlvbiBnbChhKXtyZXR1cm5cInN0cmluZ1wiPT09dHlwZW9mIGE/KGE9SlNPTi5wYXJzZShhKSk/YTpudWxsOm51bGwhPT1hP2E6bnVsbH1sPWZsLnByb3RvdHlwZTtsLkQ9ZnVuY3Rpb24oKXtyZXR1cm5cImpzb25cIn07bC5NYj1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLmliKGdsKGEpLGNsKHRoaXMsYSxiKSl9O2wuVGE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5yZChnbChhKSxjbCh0aGlzLGEsYikpfTtsLk9iPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnZkKGdsKGEpKX07bC5DYz1mdW5jdGlvbihhLGIpe3JldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnpiKGEsYikpfTtmdW5jdGlvbiBobChhLGIpe1JlLmNhbGwodGhpcyk7dGhpcy5iPVtdO3RoaXMuaT10aGlzLnU9LTE7dGhpcy5ZKGEsYil9dihobCxSZSk7bD1obC5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBobChudWxsKTthLk4odGhpcy5WLHRoaXMucy5zbGljZSgpLHRoaXMuYi5zbGljZSgpKTtyZXR1cm4gYX07bC5QYT1mdW5jdGlvbihhLGIsYyxkKXtpZihkPEdhKHRoaXMuSSgpLGEsYikpcmV0dXJuIGQ7dGhpcy5pIT10aGlzLmomJih0aGlzLnU9TWF0aC5zcXJ0KFllKHRoaXMucywwLHRoaXMuYix0aGlzLmEsMCkpLHRoaXMuaT10aGlzLmopO3JldHVybiAkZSh0aGlzLnMsMCx0aGlzLmIsdGhpcy5hLHRoaXMudSwhMSxhLGIsYyxkKX07bC5HPWZ1bmN0aW9uKCl7cmV0dXJuIGVmKHRoaXMucywwLHRoaXMuYix0aGlzLmEpfTtsLk1hPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYn07XG5sLnRiPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zLGI9dGhpcy5iLGM9dGhpcy5WLGQ9W10sZT0wLGY7dmFyIGc9MDtmb3IoZj1iLmxlbmd0aDtnPGY7KytnKXt2YXIgaD1iW2ddLGs9bmV3IEUobnVsbCk7ay5OKGMsYS5zbGljZShlLGgpKTtkLnB1c2goayk7ZT1ofXJldHVybiBkfTtsLlljPWZ1bmN0aW9uKCl7dmFyIGE9W10sYj10aGlzLnMsYz0wLGQ9dGhpcy5iLGU9dGhpcy5hLGY7dmFyIGc9MDtmb3IoZj1kLmxlbmd0aDtnPGY7KytnKXt2YXIgaD1kW2ddO2M9SmooYixjLGgsZSwuNSk7VWIoYSxjKTtjPWh9cmV0dXJuIGF9O2wudWI9ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPXRoaXMucyxlPXRoaXMuYixmPXRoaXMuYSxnPTAsaD0wLGs7dmFyIG09MDtmb3Ioaz1lLmxlbmd0aDttPGs7KyttKXt2YXIgbj1lW21dO2g9Z2YoZCxnLG4sZixhLGIsaCk7Yy5wdXNoKGgpO2c9bn1iLmxlbmd0aD1oO2E9bmV3IGhsKG51bGwpO2EuTihcIlhZXCIsYixjKTtyZXR1cm4gYX07bC5EPWZ1bmN0aW9uKCl7cmV0dXJuXCJNdWx0aUxpbmVTdHJpbmdcIn07XG5sLlk9ZnVuY3Rpb24oYSxiKXthPyhVZSh0aGlzLGIsYSwyKSx0aGlzLnN8fCh0aGlzLnM9W10pLGE9Y2YodGhpcy5zLDAsYSx0aGlzLmEsdGhpcy5iKSx0aGlzLnMubGVuZ3RoPTA9PT1hLmxlbmd0aD8wOmFbYS5sZW5ndGgtMV0sdGhpcy5jKCkpOnRoaXMuTihcIlhZXCIsbnVsbCx0aGlzLmIpfTtsLk49ZnVuY3Rpb24oYSxiLGMpe1RlKHRoaXMsYSxiKTt0aGlzLmI9Yzt0aGlzLmMoKX07ZnVuY3Rpb24gaWwoYSxiKXt2YXIgYz1hLlYsZD1bXSxlPVtdLGY7dmFyIGc9MDtmb3IoZj1iLmxlbmd0aDtnPGY7KytnKXt2YXIgaD1iW2ddOzA9PT1nJiYoYz1oLlYpO1ViKGQsaC5hYSgpKTtlLnB1c2goZC5sZW5ndGgpfWEuTihjLGQsZSl9O2Z1bmN0aW9uIGpsKGEsYil7UmUuY2FsbCh0aGlzKTt0aGlzLlkoYSxiKX12KGpsLFJlKTtsPWpsLnByb3RvdHlwZTtsLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGpsKG51bGwpO2EuTih0aGlzLlYsdGhpcy5zLnNsaWNlKCkpO3JldHVybiBhfTtsLlBhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8R2EodGhpcy5JKCksYSxiKSlyZXR1cm4gZDt2YXIgZT10aGlzLnMsZj10aGlzLmEsZzt2YXIgaD0wO2ZvcihnPWUubGVuZ3RoO2g8ZztoKz1mKXt2YXIgaz10YShhLGIsZVtoXSxlW2grMV0pO2lmKGs8ZCl7ZD1rO2ZvcihrPTA7azxmOysrayljW2tdPWVbaCtrXTtjLmxlbmd0aD1mfX1yZXR1cm4gZH07bC5HPWZ1bmN0aW9uKCl7cmV0dXJuIGRmKHRoaXMucywwLHRoaXMucy5sZW5ndGgsdGhpcy5hKX07XG5mdW5jdGlvbiBrbChhKXt2YXIgYj1hLnMsYz1hLlY7YT1hLmE7dmFyIGQ9W10sZTt2YXIgZj0wO2ZvcihlPWIubGVuZ3RoO2Y8ZTtmKz1hKXt2YXIgZz1uZXcgbGYobnVsbCk7Zy5OKGMsYi5zbGljZShmLGYrYSkpO2QucHVzaChnKX1yZXR1cm4gZH1sLkQ9ZnVuY3Rpb24oKXtyZXR1cm5cIk11bHRpUG9pbnRcIn07bC5ZPWZ1bmN0aW9uKGEsYil7YT8oVWUodGhpcyxiLGEsMSksdGhpcy5zfHwodGhpcy5zPVtdKSx0aGlzLnMubGVuZ3RoPWJmKHRoaXMucywwLGEsdGhpcy5hKSx0aGlzLmMoKSk6dGhpcy5OKFwiWFlcIixudWxsKX07bC5OPWZ1bmN0aW9uKGEsYil7VGUodGhpcyxhLGIpO3RoaXMuYygpfTtmdW5jdGlvbiBsbChhLGIpe1JlLmNhbGwodGhpcyk7dGhpcy5iPVtdO3RoaXMudT0tMTt0aGlzLkE9bnVsbDt0aGlzLk09dGhpcy5KPXRoaXMuSz0tMTt0aGlzLmk9bnVsbDt0aGlzLlkoYSxiKX12KGxsLFJlKTtsPWxsLnByb3RvdHlwZTtsLmNsb25lPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPW5ldyBsbChudWxsKSxiPXRoaXMuYi5sZW5ndGgsYz1BcnJheShiKSxkPTA7ZDxiOysrZCljW2RdPXRoaXMuYltkXS5zbGljZSgpO2EuTih0aGlzLlYsdGhpcy5zLnNsaWNlKCksYyk7cmV0dXJuIGF9O1xubC5QYT1mdW5jdGlvbihhLGIsYyxkKXtpZihkPEdhKHRoaXMuSSgpLGEsYikpcmV0dXJuIGQ7aWYodGhpcy5KIT10aGlzLmope3ZhciBlPXRoaXMuYixmPTAsZz0wLGg7dmFyIGs9MDtmb3IoaD1lLmxlbmd0aDtrPGg7KytrKXt2YXIgbT1lW2tdO2c9WWUodGhpcy5zLGYsbSx0aGlzLmEsZyk7Zj1tW20ubGVuZ3RoLTFdfXRoaXMuSz1NYXRoLnNxcnQoZyk7dGhpcy5KPXRoaXMuan1lPSRoKHRoaXMpO2Y9dGhpcy5iO2c9dGhpcy5hO2s9dGhpcy5LO2g9MDttPVtOYU4sTmFOXTt2YXIgbjt2YXIgcD0wO2ZvcihuPWYubGVuZ3RoO3A8bjsrK3Ape3ZhciBxPWZbcF07ZD0kZShlLGgscSxnLGssITAsYSxiLGMsZCxtKTtoPXFbcS5sZW5ndGgtMV19cmV0dXJuIGR9O2wuV2g9ZnVuY3Rpb24oKXt2YXIgYT0kaCh0aGlzKSxiPXRoaXMuYixjPTAsZD0wLGU7dmFyIGY9MDtmb3IoZT1iLmxlbmd0aDtmPGU7KytmKXt2YXIgZz1iW2ZdO2QrPVZlKGEsYyxnLHRoaXMuYSk7Yz1nW2cubGVuZ3RoLTFdfXJldHVybiBkfTtcbmwuRz1mdW5jdGlvbihhKXtpZih2b2lkIDAhPT1hKXt2YXIgYj0kaCh0aGlzKS5zbGljZSgpO3JmKGIsdGhpcy5iLHRoaXMuYSxhKX1lbHNlIGI9dGhpcy5zO3JldHVybiBmZihiLDAsdGhpcy5iLHRoaXMuYSl9O2wuRWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ifTtmdW5jdGlvbiBhaShhKXtpZihhLnUhPWEuail7dmFyIGI9YS5zLGM9YS5iLGQ9YS5hLGU9MCxmPVtdLGc7dmFyIGg9MDtmb3IoZz1jLmxlbmd0aDtoPGc7KytoKXt2YXIgaz1jW2hdO2U9TmEoYixlLGtbMF0sZCk7Zi5wdXNoKChlWzBdK2VbMl0pLzIsKGVbMV0rZVszXSkvMik7ZT1rW2subGVuZ3RoLTFdfWI9JGgoYSk7Yz1hLmI7ZD1hLmE7aD0wO2c9W107az0wO2ZvcihlPWMubGVuZ3RoO2s8ZTsrK2spe3ZhciBtPWNba107Zz1uZihiLGgsbSxkLGYsMiprLGcpO2g9bVttLmxlbmd0aC0xXX1hLkE9ZzthLnU9YS5qfXJldHVybiBhLkF9XG5sLkNnPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IGpsKG51bGwpO2EuTihcIlhZTVwiLGFpKHRoaXMpLnNsaWNlKCkpO3JldHVybiBhfTtmdW5jdGlvbiAkaChhKXtpZihhLk0hPWEuail7dmFyIGI9YS5zO2E6e3ZhciBjPWEuYjt2YXIgZDt2YXIgZT0wO2ZvcihkPWMubGVuZ3RoO2U8ZDsrK2UpaWYoIXBmKGIsY1tlXSxhLmEsdm9pZCAwKSl7Yz0hMTticmVhayBhfWM9ITB9Yz9hLmk9YjooYS5pPWIuc2xpY2UoKSxhLmkubGVuZ3RoPXJmKGEuaSxhLmIsYS5hKSk7YS5NPWEuan1yZXR1cm4gYS5pfWwudWI9ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXSxkPXRoaXMucyxlPXRoaXMuYixmPXRoaXMuYTthPU1hdGguc3FydChhKTt2YXIgZz0wLGg9MCxrO3ZhciBtPTA7Zm9yKGs9ZS5sZW5ndGg7bTxrOysrbSl7dmFyIG49ZVttXSxwPVtdO2g9aGYoZCxnLG4sZixhLGIsaCxwKTtjLnB1c2gocCk7Zz1uW24ubGVuZ3RoLTFdfWIubGVuZ3RoPWg7ZD1uZXcgbGwobnVsbCk7ZC5OKFwiWFlcIixiLGMpO3JldHVybiBkfTtcbmZ1bmN0aW9uIG1sKGEpe3ZhciBiPWEuVixjPWEuczthPWEuYjt2YXIgZD1bXSxlPTAsZixnO3ZhciBoPTA7Zm9yKGY9YS5sZW5ndGg7aDxmOysraCl7dmFyIGs9YVtoXS5zbGljZSgpLG09a1trLmxlbmd0aC0xXTtpZigwIT09ZSl7dmFyIG49MDtmb3IoZz1rLmxlbmd0aDtuPGc7KytuKWtbbl0tPWV9bj1uZXcgQShudWxsKTtuLk4oYixjLnNsaWNlKGUsbSksayk7ZC5wdXNoKG4pO2U9bX1yZXR1cm4gZH1sLkQ9ZnVuY3Rpb24oKXtyZXR1cm5cIk11bHRpUG9seWdvblwifTtcbmwuWT1mdW5jdGlvbihhLGIpe2lmKGEpe1VlKHRoaXMsYixhLDMpO3RoaXMuc3x8KHRoaXMucz1bXSk7Yj10aGlzLnM7dmFyIGM9dGhpcy5hLGQ9dGhpcy5iLGU9MDtkPWQ/ZDpbXTt2YXIgZj0wLGc7dmFyIGg9MDtmb3IoZz1hLmxlbmd0aDtoPGc7KytoKWU9Y2YoYixlLGFbaF0sYyxkW2ZdKSxkW2YrK109ZSxlPWVbZS5sZW5ndGgtMV07ZC5sZW5ndGg9ZjswPT09ZC5sZW5ndGg/dGhpcy5zLmxlbmd0aD0wOihhPWRbZC5sZW5ndGgtMV0sdGhpcy5zLmxlbmd0aD0wPT09YS5sZW5ndGg/MDphW2EubGVuZ3RoLTFdKTt0aGlzLmMoKX1lbHNlIHRoaXMuTihcIlhZXCIsbnVsbCx0aGlzLmIpfTtsLk49ZnVuY3Rpb24oYSxiLGMpe1RlKHRoaXMsYSxiKTt0aGlzLmI9Yzt0aGlzLmMoKX07XG5mdW5jdGlvbiBubChhLGIpe3ZhciBjPWEuVixkPVtdLGU9W10sZjt2YXIgZz0wO2ZvcihmPWIubGVuZ3RoO2c8ZjsrK2cpe3ZhciBoPWJbZ107MD09PWcmJihjPWguVik7dmFyIGs9ZC5sZW5ndGg7dmFyIG09aC5NYSgpO3ZhciBuO3ZhciBwPTA7Zm9yKG49bS5sZW5ndGg7cDxuOysrcCltW3BdKz1rO1ViKGQsaC5hYSgpKTtlLnB1c2gobSl9YS5OKGMsZCxlKX07ZnVuY3Rpb24gcGwoYSl7YT1hP2E6e307YmwuY2FsbCh0aGlzKTt0aGlzLmE9YS5nZW9tZXRyeU5hbWV9dihwbCxmbCk7ZnVuY3Rpb24gcWwoYSl7dmFyIGI9XCJYWVwiOyEwPT09YS5oYXNaJiYhMD09PWEuaGFzTT9iPVwiWFlaTVwiOiEwPT09YS5oYXNaP2I9XCJYWVpcIjohMD09PWEuaGFzTSYmKGI9XCJYWU1cIik7cmV0dXJuIGJ9ZnVuY3Rpb24gcmwoYSl7YT1hLlY7cmV0dXJue2hhc1o6XCJYWVpcIj09PWF8fFwiWFlaTVwiPT09YSxoYXNNOlwiWFlNXCI9PT1hfHxcIlhZWk1cIj09PWF9fVxudmFyIHNsPXtQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gdm9pZCAwIT09YS5tJiZ2b2lkIDAhPT1hLno/bmV3IGxmKFthLngsYS55LGEueixhLm1dLFwiWFlaTVwiKTp2b2lkIDAhPT1hLno/bmV3IGxmKFthLngsYS55LGEuel0sXCJYWVpcIik6dm9pZCAwIT09YS5tP25ldyBsZihbYS54LGEueSxhLm1dLFwiWFlNXCIpOm5ldyBsZihbYS54LGEueV0pfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgRShhLnBhdGhzWzBdLHFsKGEpKX0sUG9seWdvbjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IEEoYS5yaW5ncyxxbChhKSl9LE11bHRpUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBqbChhLnBvaW50cyxxbChhKSl9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGhsKGEucGF0aHMscWwoYSkpfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBsbChhLnJpbmdzLHFsKGEpKX19LHRsPXtQb2ludDpmdW5jdGlvbihhKXt2YXIgYj1hLkcoKSxjO1xuYT1hLlY7XCJYWVpcIj09PWE/Yz17eDpiWzBdLHk6YlsxXSx6OmJbMl19OlwiWFlNXCI9PT1hP2M9e3g6YlswXSx5OmJbMV0sbTpiWzJdfTpcIlhZWk1cIj09PWE/Yz17eDpiWzBdLHk6YlsxXSx6OmJbMl0sbTpiWzNdfTpcIlhZXCI9PT1hP2M9e3g6YlswXSx5OmJbMV19OngoITEsMzQpO3JldHVybiBjfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXJsKGEpO3JldHVybntoYXNaOmIuaGFzWixoYXNNOmIuaGFzTSxwYXRoczpbYS5HKCldfX0sUG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj1ybChhKTtyZXR1cm57aGFzWjpiLmhhc1osaGFzTTpiLmhhc00scmluZ3M6YS5HKCExKX19LE11bHRpUG9pbnQ6ZnVuY3Rpb24oYSl7dmFyIGI9cmwoYSk7cmV0dXJue2hhc1o6Yi5oYXNaLGhhc006Yi5oYXNNLHBvaW50czphLkcoKX19LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihhKXt2YXIgYj1ybChhKTtyZXR1cm57aGFzWjpiLmhhc1osaGFzTTpiLmhhc00scGF0aHM6YS5HKCl9fSxNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSl7dmFyIGI9XG5ybChhKTthPWEuRyghMSk7Zm9yKHZhciBjPVtdLGQ9MDtkPGEubGVuZ3RoO2QrKylmb3IodmFyIGU9YVtkXS5sZW5ndGgtMTswPD1lO2UtLSljLnB1c2goYVtkXVtlXSk7cmV0dXJue2hhc1o6Yi5oYXNaLGhhc006Yi5oYXNNLHJpbmdzOmN9fX07bD1wbC5wcm90b3R5cGU7XG5sLmliPWZ1bmN0aW9uKGEsYil7dmFyIGM7aWYoYz1hLmdlb21ldHJ5KXtpZihcIm51bWJlclwiPT09dHlwZW9mIGMueCYmXCJudW1iZXJcIj09PXR5cGVvZiBjLnkpdmFyIGQ9XCJQb2ludFwiO2Vsc2UgaWYoYy5wb2ludHMpZD1cIk11bHRpUG9pbnRcIjtlbHNlIGlmKGMucGF0aHMpZD0xPT09Yy5wYXRocy5sZW5ndGg/XCJMaW5lU3RyaW5nXCI6XCJNdWx0aUxpbmVTdHJpbmdcIjtlbHNlIGlmKGMucmluZ3Mpe3ZhciBlPWMucmluZ3MsZj1xbChjKSxnPVtdLGg9W107ZD1bXTt2YXIgazt2YXIgbT0wO2ZvcihrPWUubGVuZ3RoO208azsrK20pZy5sZW5ndGg9MCxiZihnLDAsZVttXSxmLmxlbmd0aCksb2YoZywwLGcubGVuZ3RoLGYubGVuZ3RoKT9oLnB1c2goW2VbbV1dKTpkLnB1c2goZVttXSk7Zm9yKDtkLmxlbmd0aDspe2U9ZC5zaGlmdCgpO2Y9ITE7Zm9yKG09aC5sZW5ndGgtMTswPD1tO20tLSlpZihIYSgobmV3IGpmKGhbbV1bMF0pKS5JKCksKG5ldyBqZihlKSkuSSgpKSl7aFttXS5wdXNoKGUpO2Y9XG4hMDticmVha31mfHxoLnB1c2goW2UucmV2ZXJzZSgpXSl9Yz1aYSh7fSxjKTsxPT09aC5sZW5ndGg/KGQ9XCJQb2x5Z29uXCIsYy5yaW5ncz1oWzBdKTooZD1cIk11bHRpUG9seWdvblwiLGMucmluZ3M9aCl9Yz1lbCgoMCxzbFtkXSkoYyksITEsYil9ZWxzZSBjPW51bGw7aD1uZXcgQjt0aGlzLmEmJmguWmEodGhpcy5hKTtoLkJhKGMpO2ImJmIuZGQmJmEuYXR0cmlidXRlc1tiLmRkXSYmaC5sYihhLmF0dHJpYnV0ZXNbYi5kZF0pO2EuYXR0cmlidXRlcyYmaC5uYShhLmF0dHJpYnV0ZXMpO3JldHVybiBofTtsLnJkPWZ1bmN0aW9uKGEsYil7Yj1iP2I6e307aWYoYS5mZWF0dXJlcyl7dmFyIGM9W10sZD1hLmZlYXR1cmVzLGU7Yi5kZD1hLm9iamVjdElkRmllbGROYW1lO2E9MDtmb3IoZT1kLmxlbmd0aDthPGU7KythKWMucHVzaCh0aGlzLmliKGRbYV0sYikpO3JldHVybiBjfXJldHVyblt0aGlzLmliKGEsYildfTtcbmwudmQ9ZnVuY3Rpb24oYSl7cmV0dXJuIGEuc3BhdGlhbFJlZmVyZW5jZSYmYS5zcGF0aWFsUmVmZXJlbmNlLndraWQ/RmIoXCJFUFNHOlwiK2Euc3BhdGlhbFJlZmVyZW5jZS53a2lkKTpudWxsfTtsLnpiPWZ1bmN0aW9uKGEsYil7Yj1kbCh0aGlzLGIpO3ZhciBjPXt9LGQ9YS5PKCk7aWYoZCl7dmFyIGU9YjtkPSgwLHRsW2QuRCgpXSkoZWwoZCwhMCxlKSxlKTtjLmdlb21ldHJ5PWQ7YiYmYi5mZWF0dXJlUHJvamVjdGlvbiYmKGMuZ2VvbWV0cnkuc3BhdGlhbFJlZmVyZW5jZT17d2tpZDpGYihiLmZlYXR1cmVQcm9qZWN0aW9uKS5MYS5zcGxpdChcIjpcIikucG9wKCl9KX1iPWEuRmEoKTtkZWxldGUgYlthLmFdO2MuYXR0cmlidXRlcz1kYihiKT97fTpiO3JldHVybiBjfTtsLkNkPWZ1bmN0aW9uKGEsYil7Yj1kbCh0aGlzLGIpO3ZhciBjPVtdLGQ7dmFyIGU9MDtmb3IoZD1hLmxlbmd0aDtlPGQ7KytlKWMucHVzaCh0aGlzLnpiKGFbZV0sYikpO3JldHVybntmZWF0dXJlczpjfX07ZnVuY3Rpb24gdWwoKXt0aGlzLmY9bmV3IFhNTFNlcmlhbGl6ZXI7YmwuY2FsbCh0aGlzKX12KHVsLGJsKTtsPXVsLnByb3RvdHlwZTtsLkQ9ZnVuY3Rpb24oKXtyZXR1cm5cInhtbFwifTtsLk1iPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEgaW5zdGFuY2VvZiBEb2N1bWVudD92bCh0aGlzLGEsYik6YSBpbnN0YW5jZW9mIE5vZGU/bnVsbDpcInN0cmluZ1wiPT09dHlwZW9mIGE/KGE9UmsoYSksdmwodGhpcyxhLGIpKTpudWxsfTtmdW5jdGlvbiB2bChhLGIsYyl7YT13bChhLGIsYyk7cmV0dXJuIDA8YS5sZW5ndGg/YVswXTpudWxsfWwuVGE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSBpbnN0YW5jZW9mIERvY3VtZW50P3dsKHRoaXMsYSxiKTphIGluc3RhbmNlb2YgTm9kZT90aGlzLnFkKGEsYik6XCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPVJrKGEpLHdsKHRoaXMsYSxiKSk6W119O1xuZnVuY3Rpb24gd2woYSxiLGMpe3ZhciBkPVtdO2ZvcihiPWIuZmlyc3RDaGlsZDtiO2I9Yi5uZXh0U2libGluZyliLm5vZGVUeXBlPT1Ob2RlLkVMRU1FTlRfTk9ERSYmVWIoZCxhLnFkKGIsYykpO3JldHVybiBkfWwuT2I9ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBEb2N1bWVudD90aGlzLnVkKGEpOmEgaW5zdGFuY2VvZiBOb2RlP3RoaXMudGMoYSk6XCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPVJrKGEpLHRoaXMudWQoYSkpOm51bGx9O2wudWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb259O2wudGM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb259O2wuQ2M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5mLnNlcmlhbGl6ZVRvU3RyaW5nKG51bGwpfTtmdW5jdGlvbiBVKGEpe2E9YT9hOnt9O3RoaXMuZmVhdHVyZVR5cGU9YS5mZWF0dXJlVHlwZTt0aGlzLmZlYXR1cmVOUz1hLmZlYXR1cmVOUzt0aGlzLnNyc05hbWU9YS5zcnNOYW1lO3RoaXMuc2NoZW1hTG9jYXRpb249XCJcIjt0aGlzLmE9e307dGhpcy5hW1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIl09e2ZlYXR1cmVNZW1iZXI6U2soVS5wcm90b3R5cGUuTmIpLGZlYXR1cmVNZW1iZXJzOlNrKFUucHJvdG90eXBlLk5iKX07dWwuY2FsbCh0aGlzKX12KFUsdWwpO3ZhciB4bD0vXltcXHNcXHhhMF0qJC87bD1VLnByb3RvdHlwZTtcbmwuTmI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxvY2FsTmFtZSxkPW51bGw7aWYoXCJGZWF0dXJlQ29sbGVjdGlvblwiPT1jKVwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnNcIj09PWEubmFtZXNwYWNlVVJJP2Q9UyhbXSx0aGlzLmEsYSxiLHRoaXMpOmQ9UyhudWxsLHRoaXMuYSxhLGIsdGhpcyk7ZWxzZSBpZihcImZlYXR1cmVNZW1iZXJzXCI9PWN8fFwiZmVhdHVyZU1lbWJlclwiPT1jKXt2YXIgZT1iWzBdLGY9ZS5mZWF0dXJlVHlwZSxnPWUuZmVhdHVyZU5TLGg7aWYoIWYmJmEuY2hpbGROb2Rlcyl7Zj1bXTtnPXt9O3ZhciBrPTA7Zm9yKGg9YS5jaGlsZE5vZGVzLmxlbmd0aDtrPGg7KytrKXt2YXIgbT1hLmNoaWxkTm9kZXNba107aWYoMT09PW0ubm9kZVR5cGUpe3ZhciBuPW0ubm9kZU5hbWUuc3BsaXQoXCI6XCIpLnBvcCgpO2lmKC0xPT09Zi5pbmRleE9mKG4pKXt2YXIgcD1cIlwiLHE9MDttPW0ubmFtZXNwYWNlVVJJO2Zvcih2YXIgdCBpbiBnKXtpZihnW3RdPT09bSl7cD10O2JyZWFrfSsrcX1wfHxcbihwPVwicFwiK3EsZ1twXT1tKTtmLnB1c2gocCtcIjpcIituKX19fVwiZmVhdHVyZU1lbWJlclwiIT1jJiYoZS5mZWF0dXJlVHlwZT1mLGUuZmVhdHVyZU5TPWcpfVwic3RyaW5nXCI9PT10eXBlb2YgZyYmKGs9ZyxnPXt9LGcucDA9ayk7ZT17fTtmPUFycmF5LmlzQXJyYXkoZik/ZjpbZl07Zm9yKHZhciB1IGluIGcpe249e307az0wO2ZvcihoPWYubGVuZ3RoO2s8aDsrK2spKC0xPT09ZltrXS5pbmRleE9mKFwiOlwiKT9cInAwXCI6ZltrXS5zcGxpdChcIjpcIilbMF0pPT09dSYmKG5bZltrXS5zcGxpdChcIjpcIikucG9wKCldPVwiZmVhdHVyZU1lbWJlcnNcIj09Yz9NKHRoaXMuWWUsdGhpcyk6U2sodGhpcy5ZZSx0aGlzKSk7ZVtnW3VdXT1ufVwiZmVhdHVyZU1lbWJlclwiPT1jP2Q9Uyh2b2lkIDAsZSxhLGIpOmQ9UyhbXSxlLGEsYil9bnVsbD09PWQmJihkPVtdKTtyZXR1cm4gZH07XG5mdW5jdGlvbiB5bChhLGIsYyl7dmFyIGQ9Y1swXTtkLnNyc05hbWU9Yi5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIpO2Quc3JzRGltZW5zaW9uPWIuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKFwic3JzRGltZW5zaW9uXCIpO2lmKGE9UyhudWxsLGEuRmQsYixjLGEpKXJldHVybiBlbChhLCExLGQpfVxubC5ZZT1mdW5jdGlvbihhLGIpe3ZhciBjOyhjPWEuZ2V0QXR0cmlidXRlKFwiZmlkXCIpKXx8KGM9YS5nZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCIsXCJpZFwiKXx8XCJcIik7dmFyIGQ9e30sZTtmb3IoYT1hLmZpcnN0RWxlbWVudENoaWxkO2E7YT1hLm5leHRFbGVtZW50U2libGluZyl7dmFyIGY9YS5sb2NhbE5hbWU7aWYoMD09PWEuY2hpbGROb2Rlcy5sZW5ndGh8fDE9PT1hLmNoaWxkTm9kZXMubGVuZ3RoJiYoMz09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZXx8ND09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSkpe3ZhciBnPVBrKGEpO3hsLnRlc3QoZykmJihnPXZvaWQgMCk7ZFtmXT1nfWVsc2VcImJvdW5kZWRCeVwiIT09ZiYmKGU9ZiksZFtmXT15bCh0aGlzLGEsYil9Yj1uZXcgQihkKTtlJiZiLlphKGUpO2MmJmIubGIoYyk7cmV0dXJuIGJ9O1xubC5kZj1mdW5jdGlvbihhLGIpe2lmKGE9dGhpcy5xYyhhLGIpKXJldHVybiBiPW5ldyBsZihudWxsKSxiLk4oXCJYWVpcIixhKSxifTtsLmJmPWZ1bmN0aW9uKGEsYil7aWYoYT1TKFtdLHRoaXMuSWYsYSxiLHRoaXMpKXJldHVybiBuZXcgamwoYSl9O2wuYWY9ZnVuY3Rpb24oYSxiKXtpZihhPVMoW10sdGhpcy5IZixhLGIsdGhpcykpcmV0dXJuIGI9bmV3IGhsKG51bGwpLGlsKGIsYSksYn07bC5jZj1mdW5jdGlvbihhLGIpe2lmKGE9UyhbXSx0aGlzLkpmLGEsYix0aGlzKSlyZXR1cm4gYj1uZXcgbGwobnVsbCksbmwoYixhKSxifTtsLlZlPWZ1bmN0aW9uKGEsYil7WmsodGhpcy5NZixhLGIsdGhpcyl9O2wubWU9ZnVuY3Rpb24oYSxiKXtaayh0aGlzLkZmLGEsYix0aGlzKX07bC5XZT1mdW5jdGlvbihhLGIpe1prKHRoaXMuTmYsYSxiLHRoaXMpfTtsLnJjPWZ1bmN0aW9uKGEsYil7aWYoYT10aGlzLnFjKGEsYikpcmV0dXJuIGI9bmV3IEUobnVsbCksYi5OKFwiWFlaXCIsYSksYn07XG5sLk5pPWZ1bmN0aW9uKGEsYil7aWYoYT1TKG51bGwsdGhpcy5UYixhLGIsdGhpcykpcmV0dXJuIGF9O2wuJGU9ZnVuY3Rpb24oYSxiKXtpZihhPXRoaXMucWMoYSxiKSlyZXR1cm4gYj1uZXcgamYobnVsbCksa2YoYixcIlhZWlwiLGEpLGJ9O2wuc2M9ZnVuY3Rpb24oYSxiKXtpZigoYT1TKFtudWxsXSx0aGlzLkVjLGEsYix0aGlzKSkmJmFbMF0pe2I9bmV3IEEobnVsbCk7dmFyIGM9YVswXSxkPVtjLmxlbmd0aF0sZTt2YXIgZj0xO2ZvcihlPWEubGVuZ3RoO2Y8ZTsrK2YpVWIoYyxhW2ZdKSxkLnB1c2goYy5sZW5ndGgpO2IuTihcIlhZWlwiLGMsZCk7cmV0dXJuIGJ9fTtsLnFjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFMobnVsbCx0aGlzLlRiLGEsYix0aGlzKX07bC5JZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntwb2ludE1lbWJlcjpNKFUucHJvdG90eXBlLlZlKSxwb2ludE1lbWJlcnM6TShVLnByb3RvdHlwZS5WZSl9fTtcbmwuSGY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7bGluZVN0cmluZ01lbWJlcjpNKFUucHJvdG90eXBlLm1lKSxsaW5lU3RyaW5nTWVtYmVyczpNKFUucHJvdG90eXBlLm1lKX19O2wuSmY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7cG9seWdvbk1lbWJlcjpNKFUucHJvdG90eXBlLldlKSxwb2x5Z29uTWVtYmVyczpNKFUucHJvdG90eXBlLldlKX19O2wuTWY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7UG9pbnQ6TShVLnByb3RvdHlwZS5xYyl9fTtsLkZmPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e0xpbmVTdHJpbmc6TShVLnByb3RvdHlwZS5yYyl9fTtsLk5mPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e1BvbHlnb246TShVLnByb3RvdHlwZS5zYyl9fTtsLlViPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e0xpbmVhclJpbmc6U2soVS5wcm90b3R5cGUuTmkpfX07XG5sLnFkPWZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZlYXR1cmVUeXBlOnRoaXMuZmVhdHVyZVR5cGUsZmVhdHVyZU5TOnRoaXMuZmVhdHVyZU5TfTtiJiZaYShjLGNsKHRoaXMsYSxiKSk7cmV0dXJuIHRoaXMuTmIoYSxbY10pfHxbXX07bC50Yz1mdW5jdGlvbihhKXtyZXR1cm4gRmIodGhpcy5zcnNOYW1lP3RoaXMuc3JzTmFtZTphLmZpcnN0RWxlbWVudENoaWxkLmdldEF0dHJpYnV0ZShcInNyc05hbWVcIikpfTtmdW5jdGlvbiB6bChhKXthPVBrKGEpO3JldHVybiBBbChhKX1mdW5jdGlvbiBBbChhKXtpZihhPS9eXFxzKih0cnVlfDEpfChmYWxzZXwwKVxccyokLy5leGVjKGEpKXJldHVybiB2b2lkIDAhPT1hWzFdfHwhMX1mdW5jdGlvbiBCbChhKXthPVBrKGEpO2E9RGF0ZS5wYXJzZShhKTtyZXR1cm4gaXNOYU4oYSk/dm9pZCAwOmEvMUUzfWZ1bmN0aW9uIENsKGEpe2E9UGsoYSk7cmV0dXJuIERsKGEpfWZ1bmN0aW9uIERsKGEpe2lmKGE9L15cXHMqKFsrXFwtXT9cXGQqXFwuP1xcZCsoPzplWytcXC1dP1xcZCspPylcXHMqJC9pLmV4ZWMoYSkpcmV0dXJuIHBhcnNlRmxvYXQoYVsxXSl9ZnVuY3Rpb24gRWwoYSl7YT1QayhhKTtyZXR1cm4gRmwoYSl9ZnVuY3Rpb24gRmwoYSl7aWYoYT0vXlxccyooXFxkKylcXHMqJC8uZXhlYyhhKSlyZXR1cm4gcGFyc2VJbnQoYVsxXSwxMCl9ZnVuY3Rpb24gVyhhKXtyZXR1cm4gUGsoYSkudHJpbSgpfWZ1bmN0aW9uIEdsKGEsYil7WChhLGI/XCIxXCI6XCIwXCIpfVxuZnVuY3Rpb24gSGwoYSxiKXthLmFwcGVuZENoaWxkKE5rLmNyZWF0ZVRleHROb2RlKGIudG9QcmVjaXNpb24oKSkpfWZ1bmN0aW9uIElsKGEsYil7YS5hcHBlbmRDaGlsZChOay5jcmVhdGVUZXh0Tm9kZShiLnRvU3RyaW5nKCkpKX1mdW5jdGlvbiBYKGEsYil7YS5hcHBlbmRDaGlsZChOay5jcmVhdGVUZXh0Tm9kZShiKSl9O2Z1bmN0aW9uIFkoYSl7YT1hP2E6e307VS5jYWxsKHRoaXMsYSk7dGhpcy5zY2hlbWFMb2NhdGlvbj1hLnNjaGVtYUxvY2F0aW9uP2Euc2NoZW1hTG9jYXRpb246XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbCBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC9nbWwvMy4xLjEvcHJvZmlsZXMvZ21sc2ZQcm9maWxlLzEuMC4wL2dtbHNmLnhzZFwiO3RoaXMuaGFzWj12b2lkIDAhPT1hLmhhc1o/YS5oYXNaOiExfXYoWSxVKTtsPVkucHJvdG90eXBlO2wuUmk9ZnVuY3Rpb24oYSxiKXtpZihhPVMoW10sdGhpcy5HZixhLGIsdGhpcykpcmV0dXJuIGI9bmV3IGhsKG51bGwpLGlsKGIsYSksYn07bC5TaT1mdW5jdGlvbihhLGIpe2lmKGE9UyhbXSx0aGlzLktmLGEsYix0aGlzKSlyZXR1cm4gYj1uZXcgbGwobnVsbCksbmwoYixhKSxifTtsLlZkPWZ1bmN0aW9uKGEsYil7WmsodGhpcy5DZixhLGIsdGhpcyl9O2wudGY9ZnVuY3Rpb24oYSxiKXtaayh0aGlzLlBmLGEsYix0aGlzKX07XG5sLlRpPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoW251bGxdLHRoaXMuTGYsYSxiLHRoaXMpfTtsLlZpPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoW251bGxdLHRoaXMuT2YsYSxiLHRoaXMpfTtsLlVpPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoW251bGxdLHRoaXMuRWMsYSxiLHRoaXMpfTtsLlFpPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoW251bGxdLHRoaXMuVGIsYSxiLHRoaXMpfTtsLmloPWZ1bmN0aW9uKGEsYil7KGE9Uyh2b2lkIDAsdGhpcy5VYixhLGIsdGhpcykpJiZiW2IubGVuZ3RoLTFdLnB1c2goYSl9O2wucmc9ZnVuY3Rpb24oYSxiKXsoYT1TKHZvaWQgMCx0aGlzLlViLGEsYix0aGlzKSkmJihiW2IubGVuZ3RoLTFdWzBdPWEpfTtcbmwuZWY9ZnVuY3Rpb24oYSxiKXtpZigoYT1TKFtudWxsXSx0aGlzLlFmLGEsYix0aGlzKSkmJmFbMF0pe2I9bmV3IEEobnVsbCk7dmFyIGM9YVswXSxkPVtjLmxlbmd0aF0sZTt2YXIgZj0xO2ZvcihlPWEubGVuZ3RoO2Y8ZTsrK2YpVWIoYyxhW2ZdKSxkLnB1c2goYy5sZW5ndGgpO2IuTihcIlhZWlwiLGMsZCk7cmV0dXJuIGJ9fTtsLlhlPWZ1bmN0aW9uKGEsYil7aWYoYT1TKFtudWxsXSx0aGlzLkRmLGEsYix0aGlzKSlyZXR1cm4gYj1uZXcgRShudWxsKSxiLk4oXCJYWVpcIixhKSxifTtsLk1pPWZ1bmN0aW9uKGEsYil7YT1TKFtudWxsXSx0aGlzLkVmLGEsYix0aGlzKTtyZXR1cm4gSmEoYVsxXVswXSxhWzFdWzFdLGFbMl1bMF0sYVsyXVsxXSl9O1xubC5PaT1mdW5jdGlvbihhLGIpe3ZhciBjPVBrKGEpLGQ9L15cXHMqKFsrXFwtXT9cXGQqXFwuP1xcZCsoPzpbZUVdWytcXC1dP1xcZCspPylcXHMqLzthPVtdO2Zvcih2YXIgZTtlPWQuZXhlYyhjKTspYS5wdXNoKHBhcnNlRmxvYXQoZVsxXSkpLGM9Yy5zdWJzdHIoZVswXS5sZW5ndGgpO2lmKFwiXCI9PT1jKXtiPWJbMF0uc3JzTmFtZTtjPVwiZW51XCI7YiYmKGM9RmIoYikuYSk7aWYoXCJuZXVcIj09PWMpZm9yKGI9MCxjPWEubGVuZ3RoO2I8YztiKz0zKWQ9YVtiXSxhW2JdPWFbYisxXSxhW2IrMV09ZDtiPWEubGVuZ3RoOzI9PWImJmEucHVzaCgwKTtpZigwIT09YilyZXR1cm4gYX19O1xubC50ZD1mdW5jdGlvbihhLGIpe3ZhciBjPVBrKGEpLnJlcGxhY2UoL15cXHMqfFxccyokL2csXCJcIik7Yj1iWzBdO3ZhciBkPWIuc3JzTmFtZSxlPWIuc3JzRGltZW5zaW9uO2I9XCJlbnVcIjtkJiYoYj1GYihkKS5hKTtjPWMuc3BsaXQoL1xccysvKTtkPTI7YS5nZXRBdHRyaWJ1dGUoXCJzcnNEaW1lbnNpb25cIik/ZD1GbChhLmdldEF0dHJpYnV0ZShcInNyc0RpbWVuc2lvblwiKSk6YS5nZXRBdHRyaWJ1dGUoXCJkaW1lbnNpb25cIik/ZD1GbChhLmdldEF0dHJpYnV0ZShcImRpbWVuc2lvblwiKSk6YS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcInNyc0RpbWVuc2lvblwiKT9kPUZsKGEucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJzcnNEaW1lbnNpb25cIikpOmUmJihkPUZsKGUpKTtmb3IodmFyIGYsZz1bXSxoPTAsaz1jLmxlbmd0aDtoPGs7aCs9ZClhPXBhcnNlRmxvYXQoY1toXSksZT1wYXJzZUZsb2F0KGNbaCsxXSksZj0zPT09ZD9wYXJzZUZsb2F0KGNbaCsyXSk6MCxcImVuXCI9PT1iLnN1YnN0cigwLDIpP1xuZy5wdXNoKGEsZSxmKTpnLnB1c2goZSxhLGYpO3JldHVybiBnfTtsLlRiPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e3BvczpTayhZLnByb3RvdHlwZS5PaSkscG9zTGlzdDpTayhZLnByb3RvdHlwZS50ZCl9fTtsLkVjPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2ludGVyaW9yOlkucHJvdG90eXBlLmloLGV4dGVyaW9yOlkucHJvdG90eXBlLnJnfX07XG5sLkZkPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e1BvaW50OlNrKFUucHJvdG90eXBlLmRmKSxNdWx0aVBvaW50OlNrKFUucHJvdG90eXBlLmJmKSxMaW5lU3RyaW5nOlNrKFUucHJvdG90eXBlLnJjKSxNdWx0aUxpbmVTdHJpbmc6U2soVS5wcm90b3R5cGUuYWYpLExpbmVhclJpbmc6U2soVS5wcm90b3R5cGUuJGUpLFBvbHlnb246U2soVS5wcm90b3R5cGUuc2MpLE11bHRpUG9seWdvbjpTayhVLnByb3RvdHlwZS5jZiksU3VyZmFjZTpTayhZLnByb3RvdHlwZS5lZiksTXVsdGlTdXJmYWNlOlNrKFkucHJvdG90eXBlLlNpKSxDdXJ2ZTpTayhZLnByb3RvdHlwZS5YZSksTXVsdGlDdXJ2ZTpTayhZLnByb3RvdHlwZS5SaSksRW52ZWxvcGU6U2soWS5wcm90b3R5cGUuTWkpfX07bC5HZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntjdXJ2ZU1lbWJlcjpNKFkucHJvdG90eXBlLlZkKSxjdXJ2ZU1lbWJlcnM6TShZLnByb3RvdHlwZS5WZCl9fTtcbmwuS2Y9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7c3VyZmFjZU1lbWJlcjpNKFkucHJvdG90eXBlLnRmKSxzdXJmYWNlTWVtYmVyczpNKFkucHJvdG90eXBlLnRmKX19O2wuQ2Y9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7TGluZVN0cmluZzpNKFUucHJvdG90eXBlLnJjKSxDdXJ2ZTpNKFkucHJvdG90eXBlLlhlKX19O2wuUGY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7UG9seWdvbjpNKFUucHJvdG90eXBlLnNjKSxTdXJmYWNlOk0oWS5wcm90b3R5cGUuZWYpfX07bC5RZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntwYXRjaGVzOlNrKFkucHJvdG90eXBlLlRpKX19O2wuRGY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7c2VnbWVudHM6U2soWS5wcm90b3R5cGUuVmkpfX07bC5FZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntsb3dlckNvcm5lcjpNKFkucHJvdG90eXBlLnRkKSx1cHBlckNvcm5lcjpNKFkucHJvdG90eXBlLnRkKX19O1xubC5MZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntQb2x5Z29uUGF0Y2g6U2soWS5wcm90b3R5cGUuVWkpfX07bC5PZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntMaW5lU3RyaW5nU2VnbWVudDpTayhZLnByb3RvdHlwZS5RaSl9fTtmdW5jdGlvbiBKbChhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXTtjPWQuaGFzWjthLnNldEF0dHJpYnV0ZShcInNyc0RpbWVuc2lvblwiLGM/MzoyKTtkPWQuc3JzTmFtZTtiPWIuRygpO2Zvcih2YXIgZT1iLmxlbmd0aCxmPUFycmF5KGUpLGcsaD0wO2g8ZTsrK2gpe2c9YltoXTt2YXIgaz1oLG09YyxuPVwiZW51XCI7ZCYmKG49RmIoZCkuYSk7bj1cImVuXCI9PT1uLnN1YnN0cigwLDIpP2dbMF0rXCIgXCIrZ1sxXTpnWzFdK1wiIFwiK2dbMF07bSYmKG4rPVwiIFwiKyhnWzJdfHwwKSk7ZltrXT1ufVgoYSxmLmpvaW4oXCIgXCIpKX1cbmwuRWU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0uc3JzTmFtZTtkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtkPU9rKGEubmFtZXNwYWNlVVJJLFwicG9zXCIpO2EuYXBwZW5kQ2hpbGQoZCk7Yz1jW2MubGVuZ3RoLTFdO2E9Yy5oYXNaO2Quc2V0QXR0cmlidXRlKFwic3JzRGltZW5zaW9uXCIsYT8zOjIpO3ZhciBlPWMuc3JzTmFtZTtjPVwiZW51XCI7ZSYmKGM9RmIoZSkuYSk7Yj1iLkcoKTtjPVwiZW5cIj09PWMuc3Vic3RyKDAsMik/YlswXStcIiBcIitiWzFdOmJbMV0rXCIgXCIrYlswXTthJiYoYys9XCIgXCIrKGJbMl18fDApKTtYKGQsYyl9O3ZhciBLbD17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntsb3dlckNvcm5lcjpPKFgpLHVwcGVyQ29ybmVyOk8oWCl9fTtsPVkucHJvdG90eXBlO1xubC5TaD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXS5zcnNOYW1lO2QmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGQpO1Qoe25vZGU6YX0sS2wsWGssW2JbMF0rXCIgXCIrYlsxXSxiWzJdK1wiIFwiK2JbM11dLGMsW1wibG93ZXJDb3JuZXJcIixcInVwcGVyQ29ybmVyXCJdLHRoaXMpfTtsLkJlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLnNyc05hbWU7ZCYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZCk7ZD1PayhhLm5hbWVzcGFjZVVSSSxcInBvc0xpc3RcIik7YS5hcHBlbmRDaGlsZChkKTtKbChkLGIsYyl9O2wuUmg9ZnVuY3Rpb24oYSxiKXthPWJbYi5sZW5ndGgtMV07Yj1hLm5vZGU7dmFyIGM9YS5leHRlcmlvcldyaXR0ZW47dm9pZCAwPT09YyYmKGEuZXh0ZXJpb3JXcml0dGVuPSEwKTtyZXR1cm4gT2soYi5uYW1lc3BhY2VVUkksdm9pZCAwIT09Yz9cImludGVyaW9yXCI6XCJleHRlcmlvclwiKX07XG5sLmtjPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9ZC5oYXNaO2Q9ZC5zcnNOYW1lO1wiUG9seWdvblBhdGNoXCIhPT1hLm5vZGVOYW1lJiZkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtcIlBvbHlnb25cIj09PWEubm9kZU5hbWV8fFwiUG9seWdvblBhdGNoXCI9PT1hLm5vZGVOYW1lPyhiPXNmKGIpLFQoe25vZGU6YSxoYXNaOmUsc3JzTmFtZTpkfSxMbCx0aGlzLlJoLGIsYyx2b2lkIDAsdGhpcykpOlwiU3VyZmFjZVwiPT09YS5ub2RlTmFtZSYmKGU9T2soYS5uYW1lc3BhY2VVUkksXCJwYXRjaGVzXCIpLGEuYXBwZW5kQ2hpbGQoZSksYT1PayhlLm5hbWVzcGFjZVVSSSxcIlBvbHlnb25QYXRjaFwiKSxlLmFwcGVuZENoaWxkKGEpLHRoaXMua2MoYSxiLGMpKX07XG5sLmpjPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLnNyc05hbWU7XCJMaW5lU3RyaW5nU2VnbWVudFwiIT09YS5ub2RlTmFtZSYmZCYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZCk7XCJMaW5lU3RyaW5nXCI9PT1hLm5vZGVOYW1lfHxcIkxpbmVTdHJpbmdTZWdtZW50XCI9PT1hLm5vZGVOYW1lPyhkPU9rKGEubmFtZXNwYWNlVVJJLFwicG9zTGlzdFwiKSxhLmFwcGVuZENoaWxkKGQpLEpsKGQsYixjKSk6XCJDdXJ2ZVwiPT09YS5ub2RlTmFtZSYmKGQ9T2soYS5uYW1lc3BhY2VVUkksXCJzZWdtZW50c1wiKSxhLmFwcGVuZENoaWxkKGQpLGE9T2soZC5uYW1lc3BhY2VVUkksXCJMaW5lU3RyaW5nU2VnbWVudFwiKSxkLmFwcGVuZENoaWxkKGEpLHRoaXMuamMoYSxiLGMpKX07XG5sLkRlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9ZC5oYXNaLGY9ZC5zcnNOYW1lO2Q9ZC5zdXJmYWNlO2YmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGYpO2I9bWwoYik7VCh7bm9kZTphLGhhc1o6ZSxzcnNOYW1lOmYsc3VyZmFjZTpkfSxNbCx0aGlzLmosYixjLHZvaWQgMCx0aGlzKX07bC5UaD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXSxlPWQuc3JzTmFtZTtkPWQuaGFzWjtlJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixlKTtiPWtsKGIpO1Qoe25vZGU6YSxoYXNaOmQsc3JzTmFtZTplfSxObCxWayhcInBvaW50TWVtYmVyXCIpLGIsYyx2b2lkIDAsdGhpcyl9O1xubC5DZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXSxlPWQuaGFzWixmPWQuc3JzTmFtZTtkPWQuY3VydmU7ZiYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZik7Yj1iLnRiKCk7VCh7bm9kZTphLGhhc1o6ZSxzcnNOYW1lOmYsY3VydmU6ZH0sT2wsdGhpcy5qLGIsYyx2b2lkIDAsdGhpcyl9O2wuRmU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPU9rKGEubmFtZXNwYWNlVVJJLFwiTGluZWFyUmluZ1wiKTthLmFwcGVuZENoaWxkKGQpO3RoaXMuQmUoZCxiLGMpfTtsLkdlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmMoYixjKTtkJiYoYS5hcHBlbmRDaGlsZChkKSx0aGlzLmtjKGQsYixjKSl9O2wuVWg9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPU9rKGEubmFtZXNwYWNlVVJJLFwiUG9pbnRcIik7YS5hcHBlbmRDaGlsZChkKTt0aGlzLkVlKGQsYixjKX07XG5sLkFlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmMoYixjKTtkJiYoYS5hcHBlbmRDaGlsZChkKSx0aGlzLmpjKGQsYixjKSl9O2wuemU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1aYSh7fSxkKTtlLm5vZGU9YTt2YXIgZjtBcnJheS5pc0FycmF5KGIpP2QuZGF0YVByb2plY3Rpb24/Zj1RYihiLGQuZmVhdHVyZVByb2plY3Rpb24sZC5kYXRhUHJvamVjdGlvbik6Zj1iOmY9ZWwoYiwhMCxkKTtUKGUsUGwsdGhpcy5jLFtmXSxjLHZvaWQgMCx0aGlzKX07XG52YXIgTWw9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7c3VyZmFjZU1lbWJlcjpPKFkucHJvdG90eXBlLkdlKSxwb2x5Z29uTWVtYmVyOk8oWS5wcm90b3R5cGUuR2UpfX0sTmw9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7cG9pbnRNZW1iZXI6TyhZLnByb3RvdHlwZS5VaCl9fSxPbD17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntsaW5lU3RyaW5nTWVtYmVyOk8oWS5wcm90b3R5cGUuQWUpLGN1cnZlTWVtYmVyOk8oWS5wcm90b3R5cGUuQWUpfX0sTGw9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7ZXh0ZXJpb3I6TyhZLnByb3RvdHlwZS5GZSksaW50ZXJpb3I6TyhZLnByb3RvdHlwZS5GZSl9fSxQbD17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntDdXJ2ZTpPKFkucHJvdG90eXBlLmpjKSxNdWx0aUN1cnZlOk8oWS5wcm90b3R5cGUuQ2UpLFBvaW50Ok8oWS5wcm90b3R5cGUuRWUpLE11bHRpUG9pbnQ6TyhZLnByb3RvdHlwZS5UaCksXG5MaW5lU3RyaW5nOk8oWS5wcm90b3R5cGUuamMpLE11bHRpTGluZVN0cmluZzpPKFkucHJvdG90eXBlLkNlKSxMaW5lYXJSaW5nOk8oWS5wcm90b3R5cGUuQmUpLFBvbHlnb246TyhZLnByb3RvdHlwZS5rYyksTXVsdGlQb2x5Z29uOk8oWS5wcm90b3R5cGUuRGUpLFN1cmZhY2U6TyhZLnByb3RvdHlwZS5rYyksTXVsdGlTdXJmYWNlOk8oWS5wcm90b3R5cGUuRGUpLEVudmVsb3BlOk8oWS5wcm90b3R5cGUuU2gpfX0sUWw9e011bHRpTGluZVN0cmluZzpcImxpbmVTdHJpbmdNZW1iZXJcIixNdWx0aUN1cnZlOlwiY3VydmVNZW1iZXJcIixNdWx0aVBvbHlnb246XCJwb2x5Z29uTWVtYmVyXCIsTXVsdGlTdXJmYWNlOlwic3VyZmFjZU1lbWJlclwifTtZLnByb3RvdHlwZS5qPWZ1bmN0aW9uKGEsYil7cmV0dXJuIE9rKFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIixRbFtiW2IubGVuZ3RoLTFdLm5vZGUubm9kZU5hbWVdKX07XG5ZLnByb3RvdHlwZS5jPWZ1bmN0aW9uKGEsYil7dmFyIGM9YltiLmxlbmd0aC0xXTtiPWMubXVsdGlTdXJmYWNlO3ZhciBkPWMuc3VyZmFjZSxlPWMuY3VydmU7Yz1jLm11bHRpQ3VydmU7QXJyYXkuaXNBcnJheShhKT9hPVwiRW52ZWxvcGVcIjooYT1hLkQoKSxcIk11bHRpUG9seWdvblwiPT09YSYmITA9PT1iP2E9XCJNdWx0aVN1cmZhY2VcIjpcIlBvbHlnb25cIj09PWEmJiEwPT09ZD9hPVwiU3VyZmFjZVwiOlwiTGluZVN0cmluZ1wiPT09YSYmITA9PT1lP2E9XCJDdXJ2ZVwiOlwiTXVsdGlMaW5lU3RyaW5nXCI9PT1hJiYhMD09PWMmJihhPVwiTXVsdGlDdXJ2ZVwiKSk7cmV0dXJuIE9rKFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIixhKX07ZnVuY3Rpb24gUmwoYSl7YT1hP2E6e307VS5jYWxsKHRoaXMsYSk7dGhpcy5hW1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIl0uZmVhdHVyZU1lbWJlcj1NKFUucHJvdG90eXBlLk5iKTt0aGlzLnNjaGVtYUxvY2F0aW9uPWEuc2NoZW1hTG9jYXRpb24/YS5zY2hlbWFMb2NhdGlvbjpcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L2dtbC8yLjEuMi9mZWF0dXJlLnhzZFwifXYoUmwsVSk7bD1SbC5wcm90b3R5cGU7XG5sLlplPWZ1bmN0aW9uKGEsYil7YT1QayhhKS5yZXBsYWNlKC9eXFxzKnxcXHMqJC9nLFwiXCIpO3ZhciBjPWJbMF0uc3JzTmFtZTtiPVwiZW51XCI7YyYmKGM9RmIoYykpJiYoYj1jLmEpO2E9YS50cmltKCkuc3BsaXQoL1xccysvKTtmb3IodmFyIGQsZSxmPVtdLGc9MCxoPWEubGVuZ3RoO2c8aDtnKyspZT1hW2ddLnNwbGl0KC8sKy8pLGM9cGFyc2VGbG9hdChlWzBdKSxkPXBhcnNlRmxvYXQoZVsxXSksZT0zPT09ZS5sZW5ndGg/cGFyc2VGbG9hdChlWzJdKTowLFwiZW5cIj09PWIuc3Vic3RyKDAsMik/Zi5wdXNoKGMsZCxlKTpmLnB1c2goZCxjLGUpO3JldHVybiBmfTtsLktpPWZ1bmN0aW9uKGEsYil7YT1TKFtudWxsXSx0aGlzLkJmLGEsYix0aGlzKTtyZXR1cm4gSmEoYVsxXVswXSxhWzFdWzFdLGFbMV1bM10sYVsxXVs0XSl9O2wuZ2g9ZnVuY3Rpb24oYSxiKXsoYT1TKHZvaWQgMCx0aGlzLlViLGEsYix0aGlzKSkmJmJbYi5sZW5ndGgtMV0ucHVzaChhKX07XG5sLnZpPWZ1bmN0aW9uKGEsYil7KGE9Uyh2b2lkIDAsdGhpcy5VYixhLGIsdGhpcykpJiYoYltiLmxlbmd0aC0xXVswXT1hKX07bC5UYj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntjb29yZGluYXRlczpTayhSbC5wcm90b3R5cGUuWmUpfX07bC5FYz17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntpbm5lckJvdW5kYXJ5SXM6UmwucHJvdG90eXBlLmdoLG91dGVyQm91bmRhcnlJczpSbC5wcm90b3R5cGUudml9fTtsLkJmPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2Nvb3JkaW5hdGVzOk0oUmwucHJvdG90eXBlLlplKX19O1xubC5GZD17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntQb2ludDpTayhVLnByb3RvdHlwZS5kZiksTXVsdGlQb2ludDpTayhVLnByb3RvdHlwZS5iZiksTGluZVN0cmluZzpTayhVLnByb3RvdHlwZS5yYyksTXVsdGlMaW5lU3RyaW5nOlNrKFUucHJvdG90eXBlLmFmKSxMaW5lYXJSaW5nOlNrKFUucHJvdG90eXBlLiRlKSxQb2x5Z29uOlNrKFUucHJvdG90eXBlLnNjKSxNdWx0aVBvbHlnb246U2soVS5wcm90b3R5cGUuY2YpLEJveDpTayhSbC5wcm90b3R5cGUuS2kpfX07XG5sLmdkPWZ1bmN0aW9uKGEsYil7dmFyIGM9YltiLmxlbmd0aC0xXTtiPWMubXVsdGlTdXJmYWNlO3ZhciBkPWMuc3VyZmFjZTtjPWMubXVsdGlDdXJ2ZTtBcnJheS5pc0FycmF5KGEpP2E9XCJFbnZlbG9wZVwiOihhPWEuRCgpLFwiTXVsdGlQb2x5Z29uXCI9PT1hJiYhMD09PWI/YT1cIk11bHRpU3VyZmFjZVwiOlwiUG9seWdvblwiPT09YSYmITA9PT1kP2E9XCJTdXJmYWNlXCI6XCJNdWx0aUxpbmVTdHJpbmdcIj09PWEmJiEwPT09YyYmKGE9XCJNdWx0aUN1cnZlXCIpKTtyZXR1cm4gT2soXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiLGEpfTtsLnJlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9WmEoe30sZCk7ZS5ub2RlPWE7dmFyIGY7QXJyYXkuaXNBcnJheShiKT9kLmRhdGFQcm9qZWN0aW9uP2Y9UWIoYixkLmZlYXR1cmVQcm9qZWN0aW9uLGQuZGF0YVByb2plY3Rpb24pOmY9YjpmPWVsKGIsITAsZCk7VChlLFNsLHRoaXMuZ2QsW2ZdLGMsdm9pZCAwLHRoaXMpfTtcbmwuaGM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0uc3JzTmFtZTtcIkxpbmVTdHJpbmdTZWdtZW50XCIhPT1hLm5vZGVOYW1lJiZkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtcIkxpbmVTdHJpbmdcIj09PWEubm9kZU5hbWV8fFwiTGluZVN0cmluZ1NlZ21lbnRcIj09PWEubm9kZU5hbWU/KGQ9VGwoYS5uYW1lc3BhY2VVUkkpLGEuYXBwZW5kQ2hpbGQoZCksVWwoZCxiLGMpKTpcIkN1cnZlXCI9PT1hLm5vZGVOYW1lJiYoZD1PayhhLm5hbWVzcGFjZVVSSSxcInNlZ21lbnRzXCIpLGEuYXBwZW5kQ2hpbGQoZCksYT1PayhkLm5hbWVzcGFjZVVSSSxcIkxpbmVTdHJpbmdTZWdtZW50XCIpLGQuYXBwZW5kQ2hpbGQoYSksdGhpcy5oYyhhLGIsYykpfTtmdW5jdGlvbiBUbChhKXthPU9rKGEsXCJjb29yZGluYXRlc1wiKTthLnNldEF0dHJpYnV0ZShcImRlY2ltYWxcIixcIi5cIik7YS5zZXRBdHRyaWJ1dGUoXCJjc1wiLFwiLFwiKTthLnNldEF0dHJpYnV0ZShcInRzXCIsXCIgXCIpO3JldHVybiBhfVxuZnVuY3Rpb24gVWwoYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV07Yz1kLmhhc1o7ZD1kLnNyc05hbWU7Yj1iLkcoKTtmb3IodmFyIGU9Yi5sZW5ndGgsZj1BcnJheShlKSxnLGg9MDtoPGU7KytoKWc9YltoXSxmW2hdPVZsKGcsZCxjKTtYKGEsZi5qb2luKFwiIFwiKSl9XG5sLmljPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9ZC5oYXNaO2Q9ZC5zcnNOYW1lO1wiUG9seWdvblBhdGNoXCIhPT1hLm5vZGVOYW1lJiZkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtcIlBvbHlnb25cIj09PWEubm9kZU5hbWV8fFwiUG9seWdvblBhdGNoXCI9PT1hLm5vZGVOYW1lPyhiPXNmKGIpLFQoe25vZGU6YSxoYXNaOmUsc3JzTmFtZTpkfSxXbCx0aGlzLk5oLGIsYyx2b2lkIDAsdGhpcykpOlwiU3VyZmFjZVwiPT09YS5ub2RlTmFtZSYmKGU9T2soYS5uYW1lc3BhY2VVUkksXCJwYXRjaGVzXCIpLGEuYXBwZW5kQ2hpbGQoZSksYT1PayhlLm5hbWVzcGFjZVVSSSxcIlBvbHlnb25QYXRjaFwiKSxlLmFwcGVuZENoaWxkKGEpLHRoaXMuaWMoYSxiLGMpKX07XG5sLk5oPWZ1bmN0aW9uKGEsYil7YT1iW2IubGVuZ3RoLTFdO2I9YS5ub2RlO3ZhciBjPWEuZXh0ZXJpb3JXcml0dGVuO3ZvaWQgMD09PWMmJihhLmV4dGVyaW9yV3JpdHRlbj0hMCk7cmV0dXJuIE9rKGIubmFtZXNwYWNlVVJJLHZvaWQgMCE9PWM/XCJpbm5lckJvdW5kYXJ5SXNcIjpcIm91dGVyQm91bmRhcnlJc1wiKX07bC54ZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9T2soYS5uYW1lc3BhY2VVUkksXCJMaW5lYXJSaW5nXCIpO2EuYXBwZW5kQ2hpbGQoZCk7dGhpcy50ZShkLGIsYyl9O2Z1bmN0aW9uIFZsKGEsYixjKXt2YXIgZD1cImVudVwiO2ImJihkPUZiKGIpLmEpO2I9XCJlblwiPT09ZC5zdWJzdHIoMCwyKT9hWzBdK1wiLFwiK2FbMV06YVsxXStcIixcIithWzBdO2MmJihiKz1cIixcIisoYVsyXXx8MCkpO3JldHVybiBifVxubC51ZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXSxlPWQuaGFzWixmPWQuc3JzTmFtZTtkPWQuY3VydmU7ZiYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZik7Yj1iLnRiKCk7VCh7bm9kZTphLGhhc1o6ZSxzcnNOYW1lOmYsY3VydmU6ZH0sWGwsdGhpcy5jLGIsYyx2b2lkIDAsdGhpcyl9O2wud2U9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV07Yz1kLmhhc1o7dmFyIGU9ZC5zcnNOYW1lO2UmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGUpO2Q9VGwoYS5uYW1lc3BhY2VVUkkpO2EuYXBwZW5kQ2hpbGQoZCk7YT1iLkcoKTthPVZsKGEsZSxjKTtYKGQsYSl9O2wuUGg9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLmhhc1o7KGQ9ZC5zcnNOYW1lKSYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZCk7Yj1rbChiKTtUKHtub2RlOmEsaGFzWjplLHNyc05hbWU6ZH0sWWwsVmsoXCJwb2ludE1lbWJlclwiKSxiLGMsdm9pZCAwLHRoaXMpfTtcbmwuUWg9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPU9rKGEubmFtZXNwYWNlVVJJLFwiUG9pbnRcIik7YS5hcHBlbmRDaGlsZChkKTt0aGlzLndlKGQsYixjKX07bC5zZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5nZChiLGMpO2QmJihhLmFwcGVuZENoaWxkKGQpLHRoaXMuaGMoZCxiLGMpKX07bC50ZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXS5zcnNOYW1lO2QmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGQpO2Q9VGwoYS5uYW1lc3BhY2VVUkkpO2EuYXBwZW5kQ2hpbGQoZCk7VWwoZCxiLGMpfTtsLnZlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9ZC5oYXNaLGY9ZC5zcnNOYW1lO2Q9ZC5zdXJmYWNlO2YmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGYpO2I9bWwoYik7VCh7bm9kZTphLGhhc1o6ZSxzcnNOYW1lOmYsc3VyZmFjZTpkfSxabCx0aGlzLmMsYixjLHZvaWQgMCx0aGlzKX07XG5sLnllPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmdkKGIsYyk7ZCYmKGEuYXBwZW5kQ2hpbGQoZCksdGhpcy5pYyhkLGIsYykpfTtsLk9oPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLnNyc05hbWU7ZCYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZCk7VCh7bm9kZTphfSwkbCxYayxbYlswXStcIiBcIitiWzFdLGJbMl0rXCIgXCIrYlszXV0sYyxbXCJsb3dlckNvcm5lclwiLFwidXBwZXJDb3JuZXJcIl0sdGhpcyl9O1xudmFyIFNsPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e0N1cnZlOk8oUmwucHJvdG90eXBlLmhjKSxNdWx0aUN1cnZlOk8oUmwucHJvdG90eXBlLnVlKSxQb2ludDpPKFJsLnByb3RvdHlwZS53ZSksTXVsdGlQb2ludDpPKFJsLnByb3RvdHlwZS5QaCksTGluZVN0cmluZzpPKFJsLnByb3RvdHlwZS5oYyksTXVsdGlMaW5lU3RyaW5nOk8oUmwucHJvdG90eXBlLnVlKSxMaW5lYXJSaW5nOk8oUmwucHJvdG90eXBlLnRlKSxQb2x5Z29uOk8oUmwucHJvdG90eXBlLmljKSxNdWx0aVBvbHlnb246TyhSbC5wcm90b3R5cGUudmUpLFN1cmZhY2U6TyhSbC5wcm90b3R5cGUuaWMpLE11bHRpU3VyZmFjZTpPKFJsLnByb3RvdHlwZS52ZSksRW52ZWxvcGU6TyhSbC5wcm90b3R5cGUuT2gpfX0sV2w9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7b3V0ZXJCb3VuZGFyeUlzOk8oUmwucHJvdG90eXBlLnhlKSxpbm5lckJvdW5kYXJ5SXM6TyhSbC5wcm90b3R5cGUueGUpfX0sWWw9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7cG9pbnRNZW1iZXI6TyhSbC5wcm90b3R5cGUuUWgpfX0sXG5YbD17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntsaW5lU3RyaW5nTWVtYmVyOk8oUmwucHJvdG90eXBlLnNlKSxjdXJ2ZU1lbWJlcjpPKFJsLnByb3RvdHlwZS5zZSl9fTtSbC5wcm90b3R5cGUuYz1mdW5jdGlvbihhLGIpe3JldHVybiBPayhcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCIsYW1bYltiLmxlbmd0aC0xXS5ub2RlLm5vZGVOYW1lXSl9O3ZhciBhbT17TXVsdGlMaW5lU3RyaW5nOlwibGluZVN0cmluZ01lbWJlclwiLE11bHRpQ3VydmU6XCJjdXJ2ZU1lbWJlclwiLE11bHRpUG9seWdvbjpcInBvbHlnb25NZW1iZXJcIixNdWx0aVN1cmZhY2U6XCJzdXJmYWNlTWVtYmVyXCJ9LFpsPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e3N1cmZhY2VNZW1iZXI6TyhSbC5wcm90b3R5cGUueWUpLHBvbHlnb25NZW1iZXI6TyhSbC5wcm90b3R5cGUueWUpfX0sJGw9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7bG93ZXJDb3JuZXI6TyhYKSx1cHBlckNvcm5lcjpPKFgpfX07dmFyIGJtPVtudWxsLFwiaHR0cDovL3d3dy50b3BvZ3JhZml4LmNvbS9HUFgvMS8wXCIsXCJodHRwOi8vd3d3LnRvcG9ncmFmaXguY29tL0dQWC8xLzFcIl07ZnVuY3Rpb24gY20oYSxiLGMsZCl7YS5wdXNoKHBhcnNlRmxvYXQoYy5nZXRBdHRyaWJ1dGUoXCJsb25cIikpLHBhcnNlRmxvYXQoYy5nZXRBdHRyaWJ1dGUoXCJsYXRcIikpKTtcImVsZVwiaW4gZD8oYS5wdXNoKGQuZWxlKSxkZWxldGUgZC5lbGUsYi5oYXNaPSEwKTphLnB1c2goMCk7XCJ0aW1lXCJpbiBkPyhhLnB1c2goZC50aW1lKSxkZWxldGUgZC50aW1lLGIuaGFzTT0hMCk6YS5wdXNoKDApO3JldHVybiBhfVxuZnVuY3Rpb24gZG0oYSxiLGMpe3ZhciBkPVwiWFlcIixlPTI7YS5oYXNaJiZhLmhhc00/KGQ9XCJYWVpNXCIsZT00KTphLmhhc1o/KGQ9XCJYWVpcIixlPTMpOmEuaGFzTSYmKGQ9XCJYWU1cIixlPTMpO2lmKDQhPT1lKXt2YXIgZjt2YXIgZz0wO2ZvcihmPWIubGVuZ3RoLzQ7ZzxmO2crKyliW2cqZV09Yls0KmddLGJbZyplKzFdPWJbNCpnKzFdLGEuaGFzWiYmKGJbZyplKzJdPWJbNCpnKzJdKSxhLmhhc00mJihiW2cqZSsyXT1iWzQqZyszXSk7Yi5sZW5ndGg9Yi5sZW5ndGgvNCplO2lmKGMpZm9yKGc9MCxmPWMubGVuZ3RoO2c8ZjtnKyspY1tnXT1jW2ddLzQqZX1yZXR1cm4gZH1mdW5jdGlvbiBlbShhLGIpe3ZhciBjPWJbYi5sZW5ndGgtMV0sZD1hLmdldEF0dHJpYnV0ZShcImhyZWZcIik7bnVsbCE9PWQmJihjLmxpbms9ZCk7WmsoZm0sYSxiKX1mdW5jdGlvbiBnbShhLGIpe2JbYi5sZW5ndGgtMV0uZXh0ZW5zaW9uc05vZGVfPWF9XG5RKGJtLHtydGU6TShmdW5jdGlvbihhLGIpe3ZhciBjPWJbMF07aWYoYT1TKHtmbGF0Q29vcmRpbmF0ZXM6W10sbGF5b3V0T3B0aW9uczp7fX0saG0sYSxiKSl7Yj1hLmZsYXRDb29yZGluYXRlcztkZWxldGUgYS5mbGF0Q29vcmRpbmF0ZXM7dmFyIGQ9YS5sYXlvdXRPcHRpb25zO2RlbGV0ZSBhLmxheW91dE9wdGlvbnM7ZD1kbShkLGIpO3ZhciBlPW5ldyBFKG51bGwpO2UuTihkLGIpO2VsKGUsITEsYyk7Yz1uZXcgQihlKTtjLm5hKGEpO3JldHVybiBjfX0pLHRyazpNKGZ1bmN0aW9uKGEsYil7dmFyIGM9YlswXTtpZihhPVMoe2ZsYXRDb29yZGluYXRlczpbXSxlbmRzOltdLGxheW91dE9wdGlvbnM6e319LGltLGEsYikpe2I9YS5mbGF0Q29vcmRpbmF0ZXM7ZGVsZXRlIGEuZmxhdENvb3JkaW5hdGVzO3ZhciBkPWEuZW5kcztkZWxldGUgYS5lbmRzO3ZhciBlPWEubGF5b3V0T3B0aW9ucztkZWxldGUgYS5sYXlvdXRPcHRpb25zO2U9ZG0oZSxiLGQpO3ZhciBmPW5ldyBobChudWxsKTtcbmYuTihlLGIsZCk7ZWwoZiwhMSxjKTtjPW5ldyBCKGYpO2MubmEoYSk7cmV0dXJuIGN9fSksd3B0Ok0oZnVuY3Rpb24oYSxiKXt2YXIgYz1iWzBdO2lmKGI9Uyh7fSxqbSxhLGIpKXt2YXIgZD17fTthPWNtKFtdLGQsYSxiKTtkPWRtKGQsYSk7YT1uZXcgbGYoYSxkKTtlbChhLCExLGMpO2M9bmV3IEIoYSk7Yy5uYShiKTtyZXR1cm4gY319KX0pO1xudmFyIGZtPVEoYm0se3RleHQ6TihXLFwibGlua1RleHRcIiksdHlwZTpOKFcsXCJsaW5rVHlwZVwiKX0pLGhtPVEoYm0se25hbWU6TihXKSxjbXQ6TihXKSxkZXNjOk4oVyksc3JjOk4oVyksbGluazplbSxudW1iZXI6TihFbCksZXh0ZW5zaW9uczpnbSx0eXBlOk4oVykscnRlcHQ6ZnVuY3Rpb24oYSxiKXt2YXIgYz1TKHt9LGttLGEsYik7YyYmKGI9YltiLmxlbmd0aC0xXSxjbShiLmZsYXRDb29yZGluYXRlcyxiLmxheW91dE9wdGlvbnMsYSxjKSl9fSksa209UShibSx7ZWxlOk4oQ2wpLHRpbWU6TihCbCl9KSxpbT1RKGJtLHtuYW1lOk4oVyksY210Ok4oVyksZGVzYzpOKFcpLHNyYzpOKFcpLGxpbms6ZW0sbnVtYmVyOk4oRWwpLHR5cGU6TihXKSxleHRlbnNpb25zOmdtLHRya3NlZzpmdW5jdGlvbihhLGIpe3ZhciBjPWJbYi5sZW5ndGgtMV07WmsobG0sYSxiKTtjLmVuZHMucHVzaChjLmZsYXRDb29yZGluYXRlcy5sZW5ndGgpfX0pLGxtPVEoYm0se3Rya3B0OmZ1bmN0aW9uKGEsYil7dmFyIGM9XG5TKHt9LG1tLGEsYik7YyYmKGI9YltiLmxlbmd0aC0xXSxjbShiLmZsYXRDb29yZGluYXRlcyxiLmxheW91dE9wdGlvbnMsYSxjKSl9fSksbW09UShibSx7ZWxlOk4oQ2wpLHRpbWU6TihCbCl9KSxqbT1RKGJtLHtlbGU6TihDbCksdGltZTpOKEJsKSxtYWd2YXI6TihDbCksZ2VvaWRoZWlnaHQ6TihDbCksbmFtZTpOKFcpLGNtdDpOKFcpLGRlc2M6TihXKSxzcmM6TihXKSxsaW5rOmVtLHN5bTpOKFcpLHR5cGU6TihXKSxmaXg6TihXKSxzYXQ6TihFbCksaGRvcDpOKENsKSx2ZG9wOk4oQ2wpLHBkb3A6TihDbCksYWdlb2ZkZ3BzZGF0YTpOKENsKSxkZ3BzaWQ6TihFbCksZXh0ZW5zaW9uczpnbX0pO2Z1bmN0aW9uIG5tKGEsYixjKXthLnNldEF0dHJpYnV0ZShcImhyZWZcIixiKTtiPWNbYy5sZW5ndGgtMV0ucHJvcGVydGllcztUKHtub2RlOmF9LG9tLFhrLFtiLmxpbmtUZXh0LGIubGlua1R5cGVdLGMscG0pfVxuZnVuY3Rpb24gcW0oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLm5vZGUubmFtZXNwYWNlVVJJLGY9ZC5wcm9wZXJ0aWVzO2Euc2V0QXR0cmlidXRlTlMobnVsbCxcImxhdFwiLGJbMV0pO2Euc2V0QXR0cmlidXRlTlMobnVsbCxcImxvblwiLGJbMF0pO3N3aXRjaChkLmdlb21ldHJ5TGF5b3V0KXtjYXNlIFwiWFlaTVwiOjAhPT1iWzNdJiYoZi50aW1lPWJbM10pO2Nhc2UgXCJYWVpcIjowIT09YlsyXSYmKGYuZWxlPWJbMl0pO2JyZWFrO2Nhc2UgXCJYWU1cIjowIT09YlsyXSYmKGYudGltZT1iWzJdKX1iPVwicnRlcHRcIj09YS5ub2RlTmFtZT9ybVtlXTpzbVtlXTtkPVlrKGYsYik7VCh7bm9kZTphLHByb3BlcnRpZXM6Zn0sdG0sWGssZCxjLGIpfVxudmFyIHBtPVtcInRleHRcIixcInR5cGVcIl0sb209UShibSx7dGV4dDpPKFgpLHR5cGU6TyhYKX0pLHVtPVEoYm0sXCJuYW1lIGNtdCBkZXNjIHNyYyBsaW5rIG51bWJlciB0eXBlIHJ0ZXB0XCIuc3BsaXQoXCIgXCIpKSx2bT1RKGJtLHtuYW1lOk8oWCksY210Ok8oWCksZGVzYzpPKFgpLHNyYzpPKFgpLGxpbms6TyhubSksbnVtYmVyOk8oSWwpLHR5cGU6TyhYKSxydGVwdDpVayhPKHFtKSl9KSxybT1RKGJtLFtcImVsZVwiLFwidGltZVwiXSksd209UShibSxcIm5hbWUgY210IGRlc2Mgc3JjIGxpbmsgbnVtYmVyIHR5cGUgdHJrc2VnXCIuc3BsaXQoXCIgXCIpKSx6bT1RKGJtLHtuYW1lOk8oWCksY210Ok8oWCksZGVzYzpPKFgpLHNyYzpPKFgpLGxpbms6TyhubSksbnVtYmVyOk8oSWwpLHR5cGU6TyhYKSx0cmtzZWc6VWsoTyhmdW5jdGlvbihhLGIsYyl7VCh7bm9kZTphLGdlb21ldHJ5TGF5b3V0OmIuVixwcm9wZXJ0aWVzOnt9fSx4bSx5bSxiLkcoKSxjKX0pKX0pLHltPVZrKFwidHJrcHRcIikseG09UShibSx7dHJrcHQ6TyhxbSl9KSxcbnNtPVEoYm0sXCJlbGUgdGltZSBtYWd2YXIgZ2VvaWRoZWlnaHQgbmFtZSBjbXQgZGVzYyBzcmMgbGluayBzeW0gdHlwZSBmaXggc2F0IGhkb3AgdmRvcCBwZG9wIGFnZW9mZGdwc2RhdGEgZGdwc2lkXCIuc3BsaXQoXCIgXCIpKSx0bT1RKGJtLHtlbGU6TyhIbCksdGltZTpPKGZ1bmN0aW9uKGEsYil7Yj1uZXcgRGF0ZSgxRTMqYik7YS5hcHBlbmRDaGlsZChOay5jcmVhdGVUZXh0Tm9kZShiLmdldFVUQ0Z1bGxZZWFyKCkrXCItXCIrbmUoYi5nZXRVVENNb250aCgpKzEpK1wiLVwiK25lKGIuZ2V0VVRDRGF0ZSgpKStcIlRcIituZShiLmdldFVUQ0hvdXJzKCkpK1wiOlwiK25lKGIuZ2V0VVRDTWludXRlcygpKStcIjpcIituZShiLmdldFVUQ1NlY29uZHMoKSkrXCJaXCIpKX0pLG1hZ3ZhcjpPKEhsKSxnZW9pZGhlaWdodDpPKEhsKSxuYW1lOk8oWCksY210Ok8oWCksZGVzYzpPKFgpLHNyYzpPKFgpLGxpbms6TyhubSksc3ltOk8oWCksdHlwZTpPKFgpLGZpeDpPKFgpLHNhdDpPKElsKSxoZG9wOk8oSGwpLHZkb3A6TyhIbCksXG5wZG9wOk8oSGwpLGFnZW9mZGdwc2RhdGE6TyhIbCksZGdwc2lkOk8oSWwpfSk7XG5RKGJtLHtydGU6TyhmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1swXSxlPWIuRmEoKTthPXtub2RlOmEscHJvcGVydGllczplfTtpZihiPWIuTygpKWI9ZWwoYiwhMCxkKSxhLmdlb21ldHJ5TGF5b3V0PWIuVixlLnJ0ZXB0PWIuRygpO2Q9dW1bY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07ZT1ZayhlLGQpO1QoYSx2bSxYayxlLGMsZCl9KSx0cms6TyhmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1swXSxlPWIuRmEoKTthPXtub2RlOmEscHJvcGVydGllczplfTtpZihiPWIuTygpKWI9ZWwoYiwhMCxkKSxlLnRya3NlZz1iLnRiKCk7ZD13bVtjW2MubGVuZ3RoLTFdLm5vZGUubmFtZXNwYWNlVVJJXTtlPVlrKGUsZCk7VChhLHptLFhrLGUsYyxkKX0pLHdwdDpPKGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jWzBdLGU9Y1tjLmxlbmd0aC0xXTtlLnByb3BlcnRpZXM9Yi5GYSgpO2lmKGI9Yi5PKCkpYj1lbChiLCEwLGQpLGUuZ2VvbWV0cnlMYXlvdXQ9Yi5WLHFtKGEsYi5HKCksYyl9KX0pO2Z1bmN0aW9uIEFtKGEpe1FlLmNhbGwodGhpcyk7dGhpcy5hPWE/YTpudWxsO0JtKHRoaXMpfXYoQW0sUWUpO2Z1bmN0aW9uIGhiKGEpe3ZhciBiPVtdLGM7dmFyIGQ9MDtmb3IoYz1hLmxlbmd0aDtkPGM7KytkKWIucHVzaChhW2RdLmNsb25lKCkpO3JldHVybiBifWZ1bmN0aW9uIENtKGEpe3ZhciBiO2lmKGEuYSl7dmFyIGM9MDtmb3IoYj1hLmEubGVuZ3RoO2M8YjsrK2MpQWMoYS5hW2NdLFwiY2hhbmdlXCIsYS5jLGEpfX1mdW5jdGlvbiBCbShhKXt2YXIgYjtpZihhLmEpe3ZhciBjPTA7Zm9yKGI9YS5hLmxlbmd0aDtjPGI7KytjKXooYS5hW2NdLFwiY2hhbmdlXCIsYS5jLGEpfX1sPUFtLnByb3RvdHlwZTtsLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IEFtKG51bGwpLGI9aGIodGhpcy5hKTtDbShhKTthLmE9YjtCbShhKTthLmMoKTtyZXR1cm4gYX07XG5sLlBhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8R2EodGhpcy5JKCksYSxiKSlyZXR1cm4gZDt2YXIgZT10aGlzLmEsZjt2YXIgZz0wO2ZvcihmPWUubGVuZ3RoO2c8ZjsrK2cpZD1lW2ddLlBhKGEsYixjLGQpO3JldHVybiBkfTtsLlliPWZ1bmN0aW9uKGEpe0thKGEpO2Zvcih2YXIgYj10aGlzLmEsYz0wLGQ9Yi5sZW5ndGg7YzxkOysrYylQYShhLGJbY10uSSgpKTtyZXR1cm4gYX07XG5sLmJjPWZ1bmN0aW9uKGEpe3RoaXMubyE9dGhpcy5qJiYoYmIodGhpcy5nKSx0aGlzLmY9MCx0aGlzLm89dGhpcy5qKTtpZigwPmF8fDAhPT10aGlzLmYmJmE8dGhpcy5mKXJldHVybiB0aGlzO3ZhciBiPWEudG9TdHJpbmcoKTtpZih0aGlzLmcuaGFzT3duUHJvcGVydHkoYikpcmV0dXJuIHRoaXMuZ1tiXTt2YXIgYz1bXSxkPXRoaXMuYSxlPSExLGY7dmFyIGc9MDtmb3IoZj1kLmxlbmd0aDtnPGY7KytnKXt2YXIgaD1kW2ddLGs9aC5iYyhhKTtjLnB1c2goayk7ayE9PWgmJihlPSEwKX1pZihlKXJldHVybiBhPW5ldyBBbShudWxsKSxDbShhKSxhLmE9YyxCbShhKSxhLmMoKSx0aGlzLmdbYl09YTt0aGlzLmY9YTtyZXR1cm4gdGhpc307bC5EPWZ1bmN0aW9uKCl7cmV0dXJuXCJHZW9tZXRyeUNvbGxlY3Rpb25cIn07bC5yb3RhdGU9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5hLGQ9MCxlPWMubGVuZ3RoO2Q8ZTsrK2QpY1tkXS5yb3RhdGUoYSxiKTt0aGlzLmMoKX07XG5sLnNjYWxlPWZ1bmN0aW9uKGEsYixjKXtjfHwoYz1SYSh0aGlzLkkoKSkpO2Zvcih2YXIgZD10aGlzLmEsZT0wLGY9ZC5sZW5ndGg7ZTxmOysrZSlkW2VdLnNjYWxlKGEsYixjKTt0aGlzLmMoKX07bC5DYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmEsYzt2YXIgZD0wO2ZvcihjPWIubGVuZ3RoO2Q8YzsrK2QpYltkXS5DYihhKTt0aGlzLmMoKX07bC5jYT1mdW5jdGlvbigpe0NtKHRoaXMpO1FlLnByb3RvdHlwZS5jYS5jYWxsKHRoaXMpfTtmdW5jdGlvbiBEbShhKXthPWE/YTp7fTtibC5jYWxsKHRoaXMpO3RoaXMuZGVmYXVsdERhdGFQcm9qZWN0aW9uPUZiKGEuZGVmYXVsdERhdGFQcm9qZWN0aW9uP2EuZGVmYXVsdERhdGFQcm9qZWN0aW9uOlwiRVBTRzo0MzI2XCIpO2EuZmVhdHVyZVByb2plY3Rpb24mJih0aGlzLmw9RmIoYS5mZWF0dXJlUHJvamVjdGlvbikpO3RoaXMuYT1hLmdlb21ldHJ5TmFtZTt0aGlzLmM9YS5leHRyYWN0R2VvbWV0cnlOYW1lfXYoRG0sZmwpO2Z1bmN0aW9uIEVtKGEsYil7cmV0dXJuIGE/ZWwoKDAsRm1bYS50eXBlXSkoYSksITEsYik6bnVsbH1mdW5jdGlvbiBHbShhLGIpe3JldHVybigwLEhtW2EuRCgpXSkoZWwoYSwhMCxiKSxiKX1cbnZhciBGbT17UG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBsZihhLmNvb3JkaW5hdGVzKX0sTGluZVN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IEUoYS5jb29yZGluYXRlcyl9LFBvbHlnb246ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBBKGEuY29vcmRpbmF0ZXMpfSxNdWx0aVBvaW50OmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgamwoYS5jb29yZGluYXRlcyl9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGhsKGEuY29vcmRpbmF0ZXMpfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBsbChhLmNvb3JkaW5hdGVzKX0sR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7YT1hLmdlb21ldHJpZXMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBFbShhLGIpfSk7cmV0dXJuIG5ldyBBbShhKX19LEhtPXtQb2ludDpmdW5jdGlvbihhKXtyZXR1cm57dHlwZTpcIlBvaW50XCIsY29vcmRpbmF0ZXM6YS5HKCl9fSxMaW5lU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybnt0eXBlOlwiTGluZVN0cmluZ1wiLFxuY29vcmRpbmF0ZXM6YS5HKCl9fSxQb2x5Z29uOmZ1bmN0aW9uKGEsYil7aWYoYil2YXIgYz1iLnJpZ2h0SGFuZGVkO3JldHVybnt0eXBlOlwiUG9seWdvblwiLGNvb3JkaW5hdGVzOmEuRyhjKX19LE11bHRpUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJue3R5cGU6XCJNdWx0aVBvaW50XCIsY29vcmRpbmF0ZXM6YS5HKCl9fSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJue3R5cGU6XCJNdWx0aUxpbmVTdHJpbmdcIixjb29yZGluYXRlczphLkcoKX19LE11bHRpUG9seWdvbjpmdW5jdGlvbihhLGIpe2lmKGIpdmFyIGM9Yi5yaWdodEhhbmRlZDtyZXR1cm57dHlwZTpcIk11bHRpUG9seWdvblwiLGNvb3JkaW5hdGVzOmEuRyhjKX19LEdlb21ldHJ5Q29sbGVjdGlvbjpmdW5jdGlvbihhLGIpe3JldHVybnt0eXBlOlwiR2VvbWV0cnlDb2xsZWN0aW9uXCIsZ2VvbWV0cmllczphLmEubWFwKGZ1bmN0aW9uKGEpe3ZhciBjPVphKHt9LGIpO2RlbGV0ZSBjLmZlYXR1cmVQcm9qZWN0aW9uO3JldHVybiBHbShhLFxuYyl9KX19LENpcmNsZTpmdW5jdGlvbigpe3JldHVybnt0eXBlOlwiR2VvbWV0cnlDb2xsZWN0aW9uXCIsZ2VvbWV0cmllczpbXX19fTtsPURtLnByb3RvdHlwZTtsLmliPWZ1bmN0aW9uKGEsYil7YT1cIkZlYXR1cmVcIj09PWEudHlwZT9hOnt0eXBlOlwiRmVhdHVyZVwiLGdlb21ldHJ5OmF9O2I9RW0oYS5nZW9tZXRyeSxiKTt2YXIgYz1uZXcgQjt0aGlzLmE/Yy5aYSh0aGlzLmEpOnRoaXMuYyYmdm9pZCAwIT09YS5nZW9tZXRyeV9uYW1lJiZjLlphKGEuZ2VvbWV0cnlfbmFtZSk7Yy5CYShiKTt2b2lkIDAhPT1hLmlkJiZjLmxiKGEuaWQpO2EucHJvcGVydGllcyYmYy5uYShhLnByb3BlcnRpZXMpO3JldHVybiBjfTtcbmwucmQ9ZnVuY3Rpb24oYSxiKXtpZihcIkZlYXR1cmVDb2xsZWN0aW9uXCI9PT1hLnR5cGUpe3ZhciBjPVtdO2E9YS5mZWF0dXJlczt2YXIgZDt2YXIgZT0wO2ZvcihkPWEubGVuZ3RoO2U8ZDsrK2UpYy5wdXNoKHRoaXMuaWIoYVtlXSxiKSl9ZWxzZSBjPVt0aGlzLmliKGEsYildO3JldHVybiBjfTtsLnZkPWZ1bmN0aW9uKGEpe2E9YS5jcnM7dmFyIGI7YT9cIm5hbWVcIj09YS50eXBlP2I9RmIoYS5wcm9wZXJ0aWVzLm5hbWUpOngoITEsMzYpOmI9dGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb247cmV0dXJuIGJ9O2wuemI9ZnVuY3Rpb24oYSxiKXtiPWRsKHRoaXMsYik7dmFyIGM9e3R5cGU6XCJGZWF0dXJlXCJ9LGQ9YS5iO3ZvaWQgMCE9PWQmJihjLmlkPWQpOyhkPWEuTygpKT9jLmdlb21ldHJ5PUdtKGQsYik6Yy5nZW9tZXRyeT1udWxsO2I9YS5GYSgpO2RlbGV0ZSBiW2EuYV07ZGIoYik/Yy5wcm9wZXJ0aWVzPW51bGw6Yy5wcm9wZXJ0aWVzPWI7cmV0dXJuIGN9O1xubC5DZD1mdW5jdGlvbihhLGIpe2I9ZGwodGhpcyxiKTt2YXIgYz1bXSxkO3ZhciBlPTA7Zm9yKGQ9YS5sZW5ndGg7ZTxkOysrZSljLnB1c2godGhpcy56YihhW2VdLGIpKTtyZXR1cm57dHlwZTpcIkZlYXR1cmVDb2xsZWN0aW9uXCIsZmVhdHVyZXM6Y319O2Z1bmN0aW9uIEltKCl7YmwuY2FsbCh0aGlzKX12KEltLGJsKTtsPUltLnByb3RvdHlwZTtsLkQ9ZnVuY3Rpb24oKXtyZXR1cm5cInRleHRcIn07bC5NYj1mdW5jdGlvbihhLGIpe2I9ZGwodGhpcyxiKTsoYT1KbShcInN0cmluZ1wiPT09dHlwZW9mIGE/YTpcIlwiLGIpKT8oYj1uZXcgQixiLkJhKGEpLGE9Yik6YT1udWxsO3JldHVybiBhfTtsLlRhPWZ1bmN0aW9uKGEsYil7dmFyIGM9ZGwodGhpcyxiKTtiPVtdO2E9Sm0oXCJzdHJpbmdcIj09PXR5cGVvZiBhP2E6XCJcIixjKTt0aGlzLmEmJlwiR2VvbWV0cnlDb2xsZWN0aW9uXCI9PWEuRCgpP2I9YS5hOmI9W2FdO2M9W107Zm9yKHZhciBkPTAsZT1iLmxlbmd0aDtkPGU7KytkKWE9bmV3IEIsYS5CYShiW2RdKSxjLnB1c2goYSk7cmV0dXJuIGN9O2wuT2I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb259O2wuQ2M9ZnVuY3Rpb24oYSxiKXtiPWRsKHRoaXMsYik7cmV0dXJuKGE9YS5PKCkpP0ttKGVsKGEsITAsYikpOlwiXCJ9O2Z1bmN0aW9uIExtKGEsYixjLGQsZSxmKXtLYy5jYWxsKHRoaXMpO3RoaXMuZj1udWxsO3RoaXMuTD1hP2E6bmV3IEltYWdlO251bGwhPT1kJiYodGhpcy5MLmNyb3NzT3JpZ2luPWQpO3RoaXMuaj1mP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJDQU5WQVNcIik6bnVsbDt0aGlzLmc9Zjt0aGlzLmI9bnVsbDt0aGlzLmM9ZTt0aGlzLmE9Yzt0aGlzLnY9Yjt0aGlzLmk9ITE7Mj09dGhpcy5jJiZNbSh0aGlzKX12KExtLEtjKTtmdW5jdGlvbiBNbShhKXt2YXIgYj1MZigxLDEpO3RyeXtiLmRyYXdJbWFnZShhLkwsMCwwKSxiLmdldEltYWdlRGF0YSgwLDAsMSwxKX1jYXRjaChjKXthLmk9ITB9fUxtLnByb3RvdHlwZS5vPWZ1bmN0aW9uKCl7dGhpcy5jPTM7dGhpcy5iLmZvckVhY2godmMpO3RoaXMuYj1udWxsO3RoaXMubChcImNoYW5nZVwiKX07XG5MbS5wcm90b3R5cGUuSD1mdW5jdGlvbigpe3RoaXMuYz0yO3RoaXMuYSYmKHRoaXMuTC53aWR0aD10aGlzLmFbMF0sdGhpcy5MLmhlaWdodD10aGlzLmFbMV0pO3RoaXMuYT1bdGhpcy5MLndpZHRoLHRoaXMuTC5oZWlnaHRdO3RoaXMuYi5mb3JFYWNoKHZjKTt0aGlzLmI9bnVsbDtNbSh0aGlzKTtpZighdGhpcy5pJiZudWxsIT09dGhpcy5nKXt0aGlzLmoud2lkdGg9dGhpcy5MLndpZHRoO3RoaXMuai5oZWlnaHQ9dGhpcy5MLmhlaWdodDt2YXIgYT10aGlzLmouZ2V0Q29udGV4dChcIjJkXCIpO2EuZHJhd0ltYWdlKHRoaXMuTCwwLDApO2Zvcih2YXIgYj1hLmdldEltYWdlRGF0YSgwLDAsdGhpcy5MLndpZHRoLHRoaXMuTC5oZWlnaHQpLGM9Yi5kYXRhLGQ9dGhpcy5nWzBdLzI1NSxlPXRoaXMuZ1sxXS8yNTUsZj10aGlzLmdbMl0vMjU1LGc9MCxoPWMubGVuZ3RoO2c8aDtnKz00KWNbZ10qPWQsY1tnKzFdKj1lLGNbZysyXSo9ZjthLnB1dEltYWdlRGF0YShiLDAsMCl9dGhpcy5sKFwiY2hhbmdlXCIpfTtcbkxtLnByb3RvdHlwZS5iYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmo/dGhpcy5qOnRoaXMuTH07TG0ucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oKXtpZigwPT10aGlzLmMpe3RoaXMuYz0xO3RoaXMuYj1beih0aGlzLkwsXCJlcnJvclwiLHRoaXMubyx0aGlzLCEwKSx6KHRoaXMuTCxcImxvYWRcIix0aGlzLkgsdGhpcywhMCldO3RyeXt0aGlzLkwuc3JjPXRoaXMudn1jYXRjaChhKXt0aGlzLm8oKX19fTtmdW5jdGlvbiBObShhKXthPWF8fHt9O3RoaXMuZz12b2lkIDAhPT1hLmFuY2hvcj9hLmFuY2hvcjpbLjUsLjVdO3RoaXMudj1udWxsO3RoaXMuYz12b2lkIDAhPT1hLmFuY2hvck9yaWdpbj9hLmFuY2hvck9yaWdpbjpcInRvcC1sZWZ0XCI7dGhpcy51PXZvaWQgMCE9PWEuYW5jaG9yWFVuaXRzP2EuYW5jaG9yWFVuaXRzOlwiZnJhY3Rpb25cIjt0aGlzLkE9dm9pZCAwIT09YS5hbmNob3JZVW5pdHM/YS5hbmNob3JZVW5pdHM6XCJmcmFjdGlvblwiO3RoaXMuaWE9dm9pZCAwIT09YS5jcm9zc09yaWdpbj9hLmNyb3NzT3JpZ2luOm51bGw7dmFyIGI9dm9pZCAwIT09YS5pbWc/YS5pbWc6bnVsbCxjPXZvaWQgMCE9PWEuaW1nU2l6ZT9hLmltZ1NpemU6bnVsbCxkPWEuc3JjO3goISh2b2lkIDAhPT1kJiZiKSw0KTt4KCFifHxiJiZjLDUpO3ZvaWQgMCE9PWQmJjAhPT1kLmxlbmd0aHx8IWJ8fChkPWIuc3JjfHx3KGIpLnRvU3RyaW5nKCkpO3godm9pZCAwIT09ZCYmMDxkLmxlbmd0aCw2KTt2YXIgZT1cbnZvaWQgMCE9PWEuc3JjPzA6MjtpZih2b2lkIDAhPT1hLmNvbG9yKXt2YXIgZj1hLmNvbG9yO2Y9QXJyYXkuaXNBcnJheShmKT9mOlFoKGYpfWVsc2UgZj1udWxsO3RoaXMuZj1mO2Y9dGhpcy5pYTt2YXIgZz10aGlzLmYsaD1waS5nZXQoZCxmLGcpO2h8fChoPW5ldyBMbShiLGQsYyxmLGUsZykscGkuc2V0KGQsZixnLGgpKTt0aGlzLmE9aDt0aGlzLmthPXZvaWQgMCE9PWEub2Zmc2V0P2Eub2Zmc2V0OlswLDBdO3RoaXMubD12b2lkIDAhPT1hLm9mZnNldE9yaWdpbj9hLm9mZnNldE9yaWdpbjpcInRvcC1sZWZ0XCI7dGhpcy5IPW51bGw7dGhpcy5DPXZvaWQgMCE9PWEuc2l6ZT9hLnNpemU6bnVsbDt2ai5jYWxsKHRoaXMse29wYWNpdHk6dm9pZCAwIT09YS5vcGFjaXR5P2Eub3BhY2l0eToxLHJvdGF0aW9uOnZvaWQgMCE9PWEucm90YXRpb24/YS5yb3RhdGlvbjowLHNjYWxlOnZvaWQgMCE9PWEuc2NhbGU/YS5zY2FsZToxLHNuYXBUb1BpeGVsOnZvaWQgMCE9PWEuc25hcFRvUGl4ZWw/XG5hLnNuYXBUb1BpeGVsOiEwLHJvdGF0ZVdpdGhWaWV3OnZvaWQgMCE9PWEucm90YXRlV2l0aFZpZXc/YS5yb3RhdGVXaXRoVmlldzohMX0pfXYoTm0sdmopO2w9Tm0ucHJvdG90eXBlO2wuY2xvbmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IE5tKHthbmNob3I6dGhpcy5nLnNsaWNlKCksYW5jaG9yT3JpZ2luOnRoaXMuYyxhbmNob3JYVW5pdHM6dGhpcy51LGFuY2hvcllVbml0czp0aGlzLkEsY3Jvc3NPcmlnaW46dGhpcy5pYSxjb2xvcjp0aGlzLmYmJnRoaXMuZi5zbGljZT90aGlzLmYuc2xpY2UoKTp0aGlzLmZ8fHZvaWQgMCxzcmM6dGhpcy5hLnYsb2Zmc2V0OnRoaXMua2Euc2xpY2UoKSxvZmZzZXRPcmlnaW46dGhpcy5sLHNpemU6bnVsbCE9PXRoaXMuQz90aGlzLkMuc2xpY2UoKTp2b2lkIDAsb3BhY2l0eTp0aGlzLmIsc2NhbGU6dGhpcy5qLHNuYXBUb1BpeGVsOnRoaXMubyxyb3RhdGlvbjp0aGlzLmkscm90YXRlV2l0aFZpZXc6dGhpcy5CfSl9O1xubC4kYj1mdW5jdGlvbigpe2lmKHRoaXMudilyZXR1cm4gdGhpcy52O3ZhciBhPXRoaXMuZyxiPXRoaXMueWIoKTtpZihcImZyYWN0aW9uXCI9PXRoaXMudXx8XCJmcmFjdGlvblwiPT10aGlzLkEpe2lmKCFiKXJldHVybiBudWxsO2E9dGhpcy5nLnNsaWNlKCk7XCJmcmFjdGlvblwiPT10aGlzLnUmJihhWzBdKj1iWzBdKTtcImZyYWN0aW9uXCI9PXRoaXMuQSYmKGFbMV0qPWJbMV0pfWlmKFwidG9wLWxlZnRcIiE9dGhpcy5jKXtpZighYilyZXR1cm4gbnVsbDthPT09dGhpcy5nJiYoYT10aGlzLmcuc2xpY2UoKSk7aWYoXCJ0b3AtcmlnaHRcIj09dGhpcy5jfHxcImJvdHRvbS1yaWdodFwiPT10aGlzLmMpYVswXT0tYVswXStiWzBdO2lmKFwiYm90dG9tLWxlZnRcIj09dGhpcy5jfHxcImJvdHRvbS1yaWdodFwiPT10aGlzLmMpYVsxXT0tYVsxXStiWzFdfXJldHVybiB0aGlzLnY9YX07bC5iYT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hLmJhKGEpfTtsLmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5hfTtcbmwubmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hLmN9O2wuU2U9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmE7aWYoIWEuZilpZihhLmkpe3ZhciBiPWEuYVswXSxjPWEuYVsxXSxkPUxmKGIsYyk7ZC5maWxsUmVjdCgwLDAsYixjKTthLmY9ZC5jYW52YXN9ZWxzZSBhLmY9YS5MO3JldHVybiBhLmZ9O2wub2M9ZnVuY3Rpb24oKXtpZih0aGlzLkgpcmV0dXJuIHRoaXMuSDt2YXIgYT10aGlzLmthO2lmKFwidG9wLWxlZnRcIiE9dGhpcy5sKXt2YXIgYj10aGlzLnliKCksYz10aGlzLmEuYTtpZighYnx8IWMpcmV0dXJuIG51bGw7YT1hLnNsaWNlKCk7aWYoXCJ0b3AtcmlnaHRcIj09dGhpcy5sfHxcImJvdHRvbS1yaWdodFwiPT10aGlzLmwpYVswXT1jWzBdLWJbMF0tYVswXTtpZihcImJvdHRvbS1sZWZ0XCI9PXRoaXMubHx8XCJib3R0b20tcmlnaHRcIj09dGhpcy5sKWFbMV09Y1sxXS1iWzFdLWFbMV19cmV0dXJuIHRoaXMuSD1hfTtsLnliPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQz90aGlzLkM6dGhpcy5hLmF9O1xubC5uZT1mdW5jdGlvbihhLGIpe3JldHVybiB6KHRoaXMuYSxcImNoYW5nZVwiLGEsYil9O2wubG9hZD1mdW5jdGlvbigpe3RoaXMuYS5sb2FkKCl9O2wudWY9ZnVuY3Rpb24oYSxiKXtBYyh0aGlzLmEsXCJjaGFuZ2VcIixhLGIpfTt2YXIgT209W1wiaHR0cDovL3d3dy5nb29nbGUuY29tL2ttbC9leHQvMi4yXCJdLFo9W251bGwsXCJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4wXCIsXCJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4xXCIsXCJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4yXCIsXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2ttbC8yLjJcIl0sUG09e2ZyYWN0aW9uOlwiZnJhY3Rpb25cIixwaXhlbHM6XCJwaXhlbHNcIixpbnNldFBpeGVsczpcInBpeGVsc1wifTtmdW5jdGlvbiBRbShhKXthPVBrKGEpO2lmKGE9L15cXHMqIz9cXHMqKFswLTlBLUZhLWZdezh9KVxccyokLy5leGVjKGEpKXJldHVybiBhPWFbMV0sW3BhcnNlSW50KGEuc3Vic3RyKDYsMiksMTYpLHBhcnNlSW50KGEuc3Vic3RyKDQsMiksMTYpLHBhcnNlSW50KGEuc3Vic3RyKDIsMiksMTYpLHBhcnNlSW50KGEuc3Vic3RyKDAsMiksMTYpLzI1NV19XG5mdW5jdGlvbiBSbShhKXthPVBrKGEpO2Zvcih2YXIgYj1bXSxjPS9eXFxzKihbK1xcLV0/XFxkKlxcLj9cXGQrKD86ZVsrXFwtXT9cXGQrKT8pXFxzKixcXHMqKFsrXFwtXT9cXGQqXFwuP1xcZCsoPzplWytcXC1dP1xcZCspPykoPzpcXHMqLFxccyooWytcXC1dP1xcZCpcXC4/XFxkKyg/OmVbK1xcLV0/XFxkKyk/KSk/XFxzKi9pLGQ7ZD1jLmV4ZWMoYSk7KWIucHVzaChwYXJzZUZsb2F0KGRbMV0pLHBhcnNlRmxvYXQoZFsyXSksZFszXT9wYXJzZUZsb2F0KGRbM10pOjApLGE9YS5zdWJzdHIoZFswXS5sZW5ndGgpO2lmKFwiXCI9PT1hKXJldHVybiBifWZ1bmN0aW9uIFNtKGEpe3ZhciBiPVBrKGEpLnRyaW0oKTthPWEuYmFzZVVSSTthJiZcImFib3V0OmJsYW5rXCIhPWF8fChhPXdpbmRvdy5sb2NhdGlvbi5ocmVmKTtyZXR1cm4gYT8obmV3IFVSTChiLGEpKS5ocmVmOmJ9ZnVuY3Rpb24gVG0oYSl7cmV0dXJuIENsKGEpfWZ1bmN0aW9uIFVtKGEsYil7cmV0dXJuIFMobnVsbCxWbSxhLGIpfVxuZnVuY3Rpb24gV20oYSxiKXtpZihiPVMoe3M6W10semY6W119LFhtLGEsYikpe2E9Yi5zO2I9Yi56Zjt2YXIgYzt2YXIgZD0wO2ZvcihjPU1hdGgubWluKGEubGVuZ3RoLGIubGVuZ3RoKTtkPGM7KytkKWFbNCpkKzNdPWJbZF07Yj1uZXcgRShudWxsKTtiLk4oXCJYWVpNXCIsYSk7cmV0dXJuIGJ9fWZ1bmN0aW9uIFltKGEsYil7dmFyIGM9Uyh7fSxabSxhLGIpO2lmKGE9UyhudWxsLCRtLGEsYikpcmV0dXJuIGI9bmV3IEUobnVsbCksYi5OKFwiWFlaXCIsYSksYi5uYShjKSxifWZ1bmN0aW9uIGFuKGEsYil7dmFyIGM9Uyh7fSxabSxhLGIpO2lmKGE9UyhudWxsLCRtLGEsYikpcmV0dXJuIGI9bmV3IEEobnVsbCksYi5OKFwiWFlaXCIsYSxbYS5sZW5ndGhdKSxiLm5hKGMpLGJ9XG5mdW5jdGlvbiBibihhLGIpe2E9UyhbXSxjbixhLGIpO2lmKCFhKXJldHVybiBudWxsO2lmKDA9PT1hLmxlbmd0aClyZXR1cm4gbmV3IEFtKGEpO3ZhciBjPSEwLGQ9YVswXS5EKCksZTt2YXIgZj0xO2ZvcihlPWEubGVuZ3RoO2Y8ZTsrK2YpaWYoYj1hW2ZdLGIuRCgpIT1kKXtjPSExO2JyZWFrfWlmKGMpaWYoXCJQb2ludFwiPT1kKXt2YXIgZz1hWzBdO2M9Zy5WO2Q9Zy5hYSgpO2Y9MTtmb3IoZT1hLmxlbmd0aDtmPGU7KytmKWI9YVtmXSxVYihkLGIuYWEoKSk7Zz1uZXcgamwobnVsbCk7Zy5OKGMsZCk7ZG4oZyxhKX1lbHNlXCJMaW5lU3RyaW5nXCI9PWQ/KGc9bmV3IGhsKG51bGwpLGlsKGcsYSksZG4oZyxhKSk6XCJQb2x5Z29uXCI9PWQ/KGc9bmV3IGxsKG51bGwpLG5sKGcsYSksZG4oZyxhKSk6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09ZD9nPW5ldyBBbShhKTp4KCExLDM3KTtlbHNlIGc9bmV3IEFtKGEpO3JldHVybiBnfVxuZnVuY3Rpb24gZW4oYSxiKXt2YXIgYz1TKHt9LFptLGEsYik7aWYoYT1TKG51bGwsJG0sYSxiKSlyZXR1cm4gYj1uZXcgbGYobnVsbCksYi5OKFwiWFlaXCIsYSksYi5uYShjKSxifWZ1bmN0aW9uIGZuKGEsYil7dmFyIGM9Uyh7fSxabSxhLGIpO2lmKChhPVMoW251bGxdLGduLGEsYikpJiZhWzBdKXtiPW5ldyBBKG51bGwpO3ZhciBkPWFbMF0sZT1bZC5sZW5ndGhdLGY7dmFyIGc9MTtmb3IoZj1hLmxlbmd0aDtnPGY7KytnKVViKGQsYVtnXSksZS5wdXNoKGQubGVuZ3RoKTtiLk4oXCJYWVpcIixkLGUpO2IubmEoYyk7cmV0dXJuIGJ9fVxuZnVuY3Rpb24gaG4oYSxiKXtiPVMoe30sam4sYSxiKTtpZighYilyZXR1cm4gbnVsbDthPVwiZmlsbFN0eWxlXCJpbiBiP2IuZmlsbFN0eWxlOnZvaWQgMDt2YXIgYz1iLmZpbGw7dm9pZCAwPT09Y3x8Y3x8KGE9bnVsbCk7Yz1cImltYWdlU3R5bGVcImluIGI/Yi5pbWFnZVN0eWxlOnZvaWQgMDt2b2lkIDA9PWMmJihjPXZvaWQgMCk7dmFyIGQ9XCJ0ZXh0U3R5bGVcImluIGI/Yi50ZXh0U3R5bGU6dm9pZCAwLGU9XCJzdHJva2VTdHlsZVwiaW4gYj9iLnN0cm9rZVN0eWxlOnZvaWQgMDtiPWIub3V0bGluZTt2b2lkIDA9PT1ifHxifHwoZT1udWxsKTtyZXR1cm5bbmV3IEJqKHtmaWxsOmEsaW1hZ2U6YyxzdHJva2U6ZSx0ZXh0OmQsekluZGV4OnZvaWQgMH0pXX1cbmZ1bmN0aW9uIGRuKGEsYil7dmFyIGM9Yi5sZW5ndGgsZD1BcnJheShiLmxlbmd0aCksZT1BcnJheShiLmxlbmd0aCksZj1BcnJheShiLmxlbmd0aCksZyxoLGs7dmFyIG09aD1rPSExO2ZvcihnPTA7ZzxjOysrZyl7dmFyIG49YltnXTtkW2ddPW4uZ2V0KFwiZXh0cnVkZVwiKTtlW2ddPW4uZ2V0KFwidGVzc2VsbGF0ZVwiKTtmW2ddPW4uZ2V0KFwiYWx0aXR1ZGVNb2RlXCIpO209bXx8dm9pZCAwIT09ZFtnXTtoPWh8fHZvaWQgMCE9PWVbZ107az1rfHxmW2ddfW0mJmEuc2V0KFwiZXh0cnVkZVwiLGQpO2gmJmEuc2V0KFwidGVzc2VsbGF0ZVwiLGUpO2smJmEuc2V0KFwiYWx0aXR1ZGVNb2RlXCIsZil9ZnVuY3Rpb24ga24oYSxiKXtaayhsbixhLGIpfWZ1bmN0aW9uIG1uKGEsYil7Wmsobm4sYSxiKX1cbnZhciBvbj1RKFose2Rpc3BsYXlOYW1lOk4oVyksdmFsdWU6TihXKX0pLGxuPVEoWix7RGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtaayhvbixhLGIpO2E9YltiLmxlbmd0aC0xXTtudWxsIT09Yz9hW2NdPWEudmFsdWU6bnVsbCE9PWEuZGlzcGxheU5hbWUmJihhW2EuZGlzcGxheU5hbWVdPWEudmFsdWUpO2RlbGV0ZSBhLnZhbHVlfSxTY2hlbWFEYXRhOmZ1bmN0aW9uKGEsYil7WmsocG4sYSxiKX19KSxubj1RKFose0xhdExvbkFsdEJveDpmdW5jdGlvbihhLGIpe2lmKGE9Uyh7fSxxbixhLGIpKWI9YltiLmxlbmd0aC0xXSxiLmV4dGVudD1bcGFyc2VGbG9hdChhLndlc3QpLHBhcnNlRmxvYXQoYS5zb3V0aCkscGFyc2VGbG9hdChhLmVhc3QpLHBhcnNlRmxvYXQoYS5ub3J0aCldLGIuYWx0aXR1ZGVNb2RlPWEuYWx0aXR1ZGVNb2RlLGIubWluQWx0aXR1ZGU9cGFyc2VGbG9hdChhLm1pbkFsdGl0dWRlKSxiLm1heEFsdGl0dWRlPXBhcnNlRmxvYXQoYS5tYXhBbHRpdHVkZSl9LFxuTG9kOmZ1bmN0aW9uKGEsYil7aWYoYT1TKHt9LHJuLGEsYikpYj1iW2IubGVuZ3RoLTFdLGIubWluTG9kUGl4ZWxzPXBhcnNlRmxvYXQoYS5taW5Mb2RQaXhlbHMpLGIubWF4TG9kUGl4ZWxzPXBhcnNlRmxvYXQoYS5tYXhMb2RQaXhlbHMpLGIubWluRmFkZUV4dGVudD1wYXJzZUZsb2F0KGEubWluRmFkZUV4dGVudCksYi5tYXhGYWRlRXh0ZW50PXBhcnNlRmxvYXQoYS5tYXhGYWRlRXh0ZW50KX19KSxxbj1RKFose2FsdGl0dWRlTW9kZTpOKFcpLG1pbkFsdGl0dWRlOk4oQ2wpLG1heEFsdGl0dWRlOk4oQ2wpLG5vcnRoOk4oQ2wpLHNvdXRoOk4oQ2wpLGVhc3Q6TihDbCksd2VzdDpOKENsKX0pLHJuPVEoWix7bWluTG9kUGl4ZWxzOk4oQ2wpLG1heExvZFBpeGVsczpOKENsKSxtaW5GYWRlRXh0ZW50Ok4oQ2wpLG1heEZhZGVFeHRlbnQ6TihDbCl9KSxabT1RKFose2V4dHJ1ZGU6Tih6bCksdGVzc2VsbGF0ZTpOKHpsKSxhbHRpdHVkZU1vZGU6TihXKX0pLFZtPVEoWix7Y29vcmRpbmF0ZXM6U2soUm0pfSksXG5nbj1RKFose2lubmVyQm91bmRhcnlJczpmdW5jdGlvbihhLGIpeyhhPVModm9pZCAwLHNuLGEsYikpJiZiW2IubGVuZ3RoLTFdLnB1c2goYSl9LG91dGVyQm91bmRhcnlJczpmdW5jdGlvbihhLGIpeyhhPVModm9pZCAwLHRuLGEsYikpJiYoYltiLmxlbmd0aC0xXVswXT1hKX19KSxYbT1RKFose3doZW46ZnVuY3Rpb24oYSxiKXtiPWJbYi5sZW5ndGgtMV0uemY7YT1QayhhKTthPURhdGUucGFyc2UoYSk7Yi5wdXNoKGlzTmFOKGEpPzA6YSl9fSxRKE9tLHtjb29yZDpmdW5jdGlvbihhLGIpe2I9YltiLmxlbmd0aC0xXS5zO2E9UGsoYSk7KGE9L15cXHMqKFsrXFwtXT9cXGQrKD86XFwuXFxkKik/KD86ZVsrXFwtXT9cXGQqKT8pXFxzKyhbK1xcLV0/XFxkKyg/OlxcLlxcZCopPyg/OmVbK1xcLV0/XFxkKik/KVxccysoWytcXC1dP1xcZCsoPzpcXC5cXGQqKT8oPzplWytcXC1dP1xcZCopPylcXHMqJC9pLmV4ZWMoYSkpP2IucHVzaChwYXJzZUZsb2F0KGFbMV0pLHBhcnNlRmxvYXQoYVsyXSkscGFyc2VGbG9hdChhWzNdKSwwKTpcbmIucHVzaCgwLDAsMCwwKX19KSksJG09UShaLHtjb29yZGluYXRlczpTayhSbSl9KSx1bj1RKFose2hyZWY6TihTbSl9LFEoT20se3g6TihDbCkseTpOKENsKSx3Ok4oQ2wpLGg6TihDbCl9KSksdm49UShaLHtJY29uOk4oZnVuY3Rpb24oYSxiKXtyZXR1cm4oYT1TKHt9LHVuLGEsYikpP2E6bnVsbH0pLGhlYWRpbmc6TihDbCksaG90U3BvdDpOKGZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKFwieHVuaXRzXCIpLGM9YS5nZXRBdHRyaWJ1dGUoXCJ5dW5pdHNcIik7dmFyIGQ9XCJpbnNldFBpeGVsc1wiIT09Yj9cImluc2V0UGl4ZWxzXCIhPT1jP1wiYm90dG9tLWxlZnRcIjpcInRvcC1sZWZ0XCI6XCJpbnNldFBpeGVsc1wiIT09Yz9cImJvdHRvbS1yaWdodFwiOlwidG9wLXJpZ2h0XCI7cmV0dXJue3g6cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZShcInhcIikpLERkOlBtW2JdLHk6cGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZShcInlcIikpLEVkOlBtW2NdLG9yaWdpbjpkfX0pLHNjYWxlOk4oVG0pfSksc249UShaLFxue0xpbmVhclJpbmc6U2soVW0pfSksd249UShaLHtjb2xvcjpOKFFtKSxzY2FsZTpOKFRtKX0pLHhuPVEoWix7Y29sb3I6TihRbSksd2lkdGg6TihDbCl9KSxjbj1RKFose0xpbmVTdHJpbmc6TShZbSksTGluZWFyUmluZzpNKGFuKSxNdWx0aUdlb21ldHJ5Ok0oYm4pLFBvaW50Ok0oZW4pLFBvbHlnb246TShmbil9KSx5bj1RKE9tLHtUcmFjazpNKFdtKX0pO1EoWix7RXh0ZW5kZWREYXRhOmtuLFJlZ2lvbjptbixMaW5rOmZ1bmN0aW9uKGEsYil7Wmsoem4sYSxiKX0sYWRkcmVzczpOKFcpLGRlc2NyaXB0aW9uOk4oVyksbmFtZTpOKFcpLG9wZW46Tih6bCkscGhvbmVOdW1iZXI6TihXKSx2aXNpYmlsaXR5Ok4oemwpfSk7dmFyIHpuPVEoWix7aHJlZjpOKFNtKX0pLHRuPVEoWix7TGluZWFyUmluZzpTayhVbSl9KSxBbj1RKFose1N0eWxlOk4oaG4pLGtleTpOKFcpLHN0eWxlVXJsOk4oU20pfSk7XG5RKFose0V4dGVuZGVkRGF0YTprbixSZWdpb246bW4sTXVsdGlHZW9tZXRyeTpOKGJuLFwiZ2VvbWV0cnlcIiksTGluZVN0cmluZzpOKFltLFwiZ2VvbWV0cnlcIiksTGluZWFyUmluZzpOKGFuLFwiZ2VvbWV0cnlcIiksUG9pbnQ6TihlbixcImdlb21ldHJ5XCIpLFBvbHlnb246TihmbixcImdlb21ldHJ5XCIpLFN0eWxlOk4oaG4pLFN0eWxlTWFwOmZ1bmN0aW9uKGEsYil7aWYoYT1TKHZvaWQgMCxCbixhLGIpKWI9YltiLmxlbmd0aC0xXSxBcnJheS5pc0FycmF5KGEpP2IuU3R5bGU9YTpcInN0cmluZ1wiPT09dHlwZW9mIGE/Yi5zdHlsZVVybD1hOngoITEsMzgpfSxhZGRyZXNzOk4oVyksZGVzY3JpcHRpb246TihXKSxuYW1lOk4oVyksb3BlbjpOKHpsKSxwaG9uZU51bWJlcjpOKFcpLHN0eWxlVXJsOk4oU20pLHZpc2liaWxpdHk6Tih6bCl9LFEoT20se011bHRpVHJhY2s6TihmdW5jdGlvbihhLGIpe2lmKGE9UyhbXSx5bixhLGIpKXJldHVybiBiPW5ldyBobChudWxsKSxpbChiLGEpLGJ9LFwiZ2VvbWV0cnlcIiksXG5UcmFjazpOKFdtLFwiZ2VvbWV0cnlcIil9KSk7XG52YXIgQ249UShaLHtjb2xvcjpOKFFtKSxmaWxsOk4oemwpLG91dGxpbmU6Tih6bCl9KSxwbj1RKFose1NpbXBsZURhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmdldEF0dHJpYnV0ZShcIm5hbWVcIik7bnVsbCE9PWMmJihhPVcoYSksYltiLmxlbmd0aC0xXVtjXT1hKX19KSxqbj1RKFose0ljb25TdHlsZTpmdW5jdGlvbihhLGIpe2lmKGE9Uyh7fSx2bixhLGIpKXtiPWJbYi5sZW5ndGgtMV07dmFyIGM9XCJJY29uXCJpbiBhP2EuSWNvbjp7fSxkPSEoXCJJY29uXCJpbiBhKXx8MDxPYmplY3Qua2V5cyhjKS5sZW5ndGgsZSxmPWMuaHJlZjtmP2U9ZjpkJiYoZT12b2lkIDApO2Y9XCJib3R0b20tbGVmdFwiO3ZhciBnPWEuaG90U3BvdDtpZihnKXt2YXIgaD1bZy54LGcueV07dmFyIGs9Zy5EZDt2YXIgbT1nLkVkO2Y9Zy5vcmlnaW59ZWxzZSB2b2lkIDA9PT1lP209az1oPXZvaWQgMDovXmh0dHA6XFwvXFwvbWFwc1xcLig/Omdvb2dsZXxnc3RhdGljKVxcLmNvbVxcLy8udGVzdChlKSYmKGg9Wy41LDBdLG09XG5rPVwiZnJhY3Rpb25cIik7dmFyIG47Zz1jLng7dmFyIHA9Yy55O3ZvaWQgMCE9PWcmJnZvaWQgMCE9PXAmJihuPVtnLHBdKTt2YXIgcTtnPWMudztjPWMuaDt2b2lkIDAhPT1nJiZ2b2lkIDAhPT1jJiYocT1bZyxjXSk7dmFyIHQ7Yz1hLmhlYWRpbmc7dm9pZCAwIT09YyYmKHQ9dWEoYykpO2E9YS5zY2FsZTtkPyh2b2lkIDA9PWUmJihxPXZvaWQgMCx2b2lkIDA9PT1hJiYoYT12b2lkIDApKSxlPW5ldyBObSh7YW5jaG9yOmgsYW5jaG9yT3JpZ2luOmYsYW5jaG9yWFVuaXRzOmssYW5jaG9yWVVuaXRzOm0sY3Jvc3NPcmlnaW46XCJhbm9ueW1vdXNcIixvZmZzZXQ6bixvZmZzZXRPcmlnaW46XCJib3R0b20tbGVmdFwiLHJvdGF0aW9uOnQsc2NhbGU6YSxzaXplOnEsc3JjOmV9KSxiLmltYWdlU3R5bGU9ZSk6Yi5pbWFnZVN0eWxlPXZvaWQgMH19LExhYmVsU3R5bGU6ZnVuY3Rpb24oYSxiKXsoYT1TKHt9LHduLGEsYikpJiYoYltiLmxlbmd0aC0xXS50ZXh0U3R5bGU9bmV3IExqKHtmaWxsOm5ldyB6aih7Y29sb3I6XCJjb2xvclwiaW5cbmE/YS5jb2xvcjp2b2lkIDB9KSxzY2FsZTphLnNjYWxlfSkpfSxMaW5lU3R5bGU6ZnVuY3Rpb24oYSxiKXsoYT1TKHt9LHhuLGEsYikpJiYoYltiLmxlbmd0aC0xXS5zdHJva2VTdHlsZT1uZXcgQWooe2NvbG9yOlwiY29sb3JcImluIGE/YS5jb2xvcjp2b2lkIDAsd2lkdGg6XCJ3aWR0aFwiaW4gYT9hLndpZHRoOjF9KSl9LFBvbHlTdHlsZTpmdW5jdGlvbihhLGIpe2lmKGE9Uyh7fSxDbixhLGIpKXtiPWJbYi5sZW5ndGgtMV07Yi5maWxsU3R5bGU9bmV3IHpqKHtjb2xvcjpcImNvbG9yXCJpbiBhP2EuY29sb3I6dm9pZCAwfSk7dmFyIGM9YS5maWxsO3ZvaWQgMCE9PWMmJihiLmZpbGw9Yyk7YT1hLm91dGxpbmU7dm9pZCAwIT09YSYmKGIub3V0bGluZT1hKX19fSksQm49UShaLHtQYWlyOmZ1bmN0aW9uKGEsYil7aWYoYT1TKHt9LEFuLGEsYikpe3ZhciBjPWEua2V5O2MmJlwibm9ybWFsXCI9PWMmJigoYz1hLnN0eWxlVXJsKSYmKGJbYi5sZW5ndGgtMV09YyksKGE9YS5TdHlsZSkmJihiW2IubGVuZ3RoLVxuMV09YSkpfX19KTtmdW5jdGlvbiBEbihhLGIpe2I9QXJyYXkuaXNBcnJheShiKT9iOlFoKGIpO2I9WzI1NSooND09Yi5sZW5ndGg/YlszXToxKSxiWzJdLGJbMV0sYlswXV07dmFyIGM7Zm9yKGM9MDs0PmM7KytjKXt2YXIgZD1wYXJzZUludChiW2NdLDEwKS50b1N0cmluZygxNik7YltjXT0xPT1kLmxlbmd0aD9cIjBcIitkOmR9WChhLGIuam9pbihcIlwiKSl9ZnVuY3Rpb24gRW4oYSxiLGMpe2E9e25vZGU6YX07dmFyIGQ9Yi5EKCk7aWYoXCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09ZCl7dmFyIGU9aGIoYi5hKTt2YXIgZj1Gbn1lbHNlXCJNdWx0aVBvaW50XCI9PWQ/KGU9a2woYiksZj1Hbik6XCJNdWx0aUxpbmVTdHJpbmdcIj09ZD8oZT1iLnRiKCksZj1Ibik6XCJNdWx0aVBvbHlnb25cIj09ZD8oZT1tbChiKSxmPUluKTp4KCExLDM5KTtUKGEsSm4sZixlLGMpfWZ1bmN0aW9uIEtuKGEsYixjKXtUKHtub2RlOmF9LExuLE1uLFtiXSxjKX1cbmZ1bmN0aW9uIE5uKGEsYixjKXt2YXIgZD17bm9kZTphfTtiLmImJmEuc2V0QXR0cmlidXRlKFwiaWRcIixiLmIpO2E9Yi5GYSgpO3ZhciBlPXthZGRyZXNzOjEsZGVzY3JpcHRpb246MSxuYW1lOjEsb3BlbjoxLHBob25lTnVtYmVyOjEsc3R5bGVVcmw6MSx2aXNpYmlsaXR5OjF9O2VbYi5hXT0xO3ZhciBmPU9iamVjdC5rZXlzKGF8fHt9KS5zb3J0KCkuZmlsdGVyKGZ1bmN0aW9uKGEpe3JldHVybiFlW2FdfSk7aWYoMDxmLmxlbmd0aCl7dmFyIGc9WWsoYSxmKTtUKGQsT24sUG4sW3tuYW1lczpmLHZhbHVlczpnfV0sYyl9aWYoZj1iLmNiKCkpaWYoZj1mLmNhbGwoYiwwKSlmPUFycmF5LmlzQXJyYXkoZik/ZlswXTpmLHRoaXMuYSYmKGEuU3R5bGU9ZiksKGY9Zi5yYSgpKSYmKGEubmFtZT1mLnJhKCkpO2Y9UW5bY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07YT1ZayhhLGYpO1QoZCxPbixYayxhLGMsZik7YT1jWzBdOyhiPWIuTygpKSYmKGI9ZWwoYiwhMCxhKSk7VChkLE9uLFxuRm4sW2JdLGMpfWZ1bmN0aW9uIFJuKGEsYixjKXt2YXIgZD1iLmFhKCk7YT17bm9kZTphfTthLmxheW91dD1iLlY7YS5zdHJpZGU9Yi5nYSgpO2I9Yi5GYSgpO2IuY29vcmRpbmF0ZXM9ZDtkPVNuW2NbYy5sZW5ndGgtMV0ubm9kZS5uYW1lc3BhY2VVUkldO2I9WWsoYixkKTtUKGEsVG4sWGssYixjLGQpfWZ1bmN0aW9uIFVuKGEsYixjKXtiPXNmKGIpO3ZhciBkPWIuc2hpZnQoKTthPXtub2RlOmF9O1QoYSxWbixXbixiLGMpO1QoYSxWbixYbixbZF0sYyl9ZnVuY3Rpb24gWW4oYSxiKXtIbChhLE1hdGgucm91bmQoMUU2KmIpLzFFNil9UShaLFtcIkRvY3VtZW50XCIsXCJQbGFjZW1hcmtcIl0pO1EoWix7RG9jdW1lbnQ6TyhmdW5jdGlvbihhLGIsYyl7VCh7bm9kZTphfSxabiwkbixiLGMsdm9pZCAwLHRoaXMpfSksUGxhY2VtYXJrOk8oTm4pfSk7XG52YXIgWm49UShaLHtQbGFjZW1hcms6TyhObil9KSxhbz1RKFose0RhdGE6TyhmdW5jdGlvbihhLGIsYyl7YS5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsYi5uYW1lKTthPXtub2RlOmF9O2I9Yi52YWx1ZTtcIm9iamVjdFwiPT10eXBlb2YgYj8obnVsbCE9PWImJmIuZGlzcGxheU5hbWUmJlQoYSxhbyxYayxbYi5kaXNwbGF5TmFtZV0sYyxbXCJkaXNwbGF5TmFtZVwiXSksbnVsbCE9PWImJmIudmFsdWUmJlQoYSxhbyxYayxbYi52YWx1ZV0sYyxbXCJ2YWx1ZVwiXSkpOlQoYSxhbyxYayxbYl0sYyxbXCJ2YWx1ZVwiXSl9KSx2YWx1ZTpPKGZ1bmN0aW9uKGEsYil7WChhLGIpfSksZGlzcGxheU5hbWU6TyhmdW5jdGlvbihhLGIpe2EuYXBwZW5kQ2hpbGQoTmsuY3JlYXRlQ0RBVEFTZWN0aW9uKGIpKX0pfSksYm89e1BvaW50OlwiUG9pbnRcIixMaW5lU3RyaW5nOlwiTGluZVN0cmluZ1wiLExpbmVhclJpbmc6XCJMaW5lYXJSaW5nXCIsUG9seWdvbjpcIlBvbHlnb25cIixNdWx0aVBvaW50OlwiTXVsdGlHZW9tZXRyeVwiLE11bHRpTGluZVN0cmluZzpcIk11bHRpR2VvbWV0cnlcIixcbk11bHRpUG9seWdvbjpcIk11bHRpR2VvbWV0cnlcIixHZW9tZXRyeUNvbGxlY3Rpb246XCJNdWx0aUdlb21ldHJ5XCJ9LGNvPVEoWixbXCJocmVmXCJdLFEoT20sW1wieFwiLFwieVwiLFwid1wiLFwiaFwiXSkpLGVvPVEoWix7aHJlZjpPKFgpfSxRKE9tLHt4Ok8oSGwpLHk6TyhIbCksdzpPKEhsKSxoOk8oSGwpfSkpLGZvPVEoWixbXCJzY2FsZVwiLFwiaGVhZGluZ1wiLFwiSWNvblwiLFwiaG90U3BvdFwiXSksaG89UShaLHtJY29uOk8oZnVuY3Rpb24oYSxiLGMpe2E9e25vZGU6YX07dmFyIGQ9Y29bY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV0sZT1ZayhiLGQpO1QoYSxlbyxYayxlLGMsZCk7ZD1jb1tPbVswXV07ZT1ZayhiLGQpO1QoYSxlbyxnbyxlLGMsZCl9KSxoZWFkaW5nOk8oSGwpLGhvdFNwb3Q6TyhmdW5jdGlvbihhLGIpe2Euc2V0QXR0cmlidXRlKFwieFwiLGIueCk7YS5zZXRBdHRyaWJ1dGUoXCJ5XCIsYi55KTthLnNldEF0dHJpYnV0ZShcInh1bml0c1wiLGIuRGQpO2Euc2V0QXR0cmlidXRlKFwieXVuaXRzXCIsXG5iLkVkKX0pLHNjYWxlOk8oWW4pfSksaW89UShaLFtcImNvbG9yXCIsXCJzY2FsZVwiXSksam89UShaLHtjb2xvcjpPKERuKSxzY2FsZTpPKFluKX0pLGtvPVEoWixbXCJjb2xvclwiLFwid2lkdGhcIl0pLGxvPVEoWix7Y29sb3I6TyhEbiksd2lkdGg6TyhIbCl9KSxMbj1RKFose0xpbmVhclJpbmc6TyhSbil9KSxKbj1RKFose0xpbmVTdHJpbmc6TyhSbiksUG9pbnQ6TyhSbiksUG9seWdvbjpPKFVuKSxHZW9tZXRyeUNvbGxlY3Rpb246TyhFbil9KSxRbj1RKFosXCJuYW1lIG9wZW4gdmlzaWJpbGl0eSBhZGRyZXNzIHBob25lTnVtYmVyIGRlc2NyaXB0aW9uIHN0eWxlVXJsIFN0eWxlXCIuc3BsaXQoXCIgXCIpKSxPbj1RKFose0V4dGVuZGVkRGF0YTpPKGZ1bmN0aW9uKGEsYixjKXthPXtub2RlOmF9O3ZhciBkPWIubmFtZXM7Yj1iLnZhbHVlcztmb3IodmFyIGU9ZC5sZW5ndGgsZj0wO2Y8ZTtmKyspVChhLGFvLG1vLFt7bmFtZTpkW2ZdLHZhbHVlOmJbZl19XSxjKX0pLE11bHRpR2VvbWV0cnk6TyhFbiksXG5MaW5lU3RyaW5nOk8oUm4pLExpbmVhclJpbmc6TyhSbiksUG9pbnQ6TyhSbiksUG9seWdvbjpPKFVuKSxTdHlsZTpPKGZ1bmN0aW9uKGEsYixjKXthPXtub2RlOmF9O3ZhciBkPXt9LGU9Yi51YSgpLGY9Yi5xYSgpLGc9Yi5iYSgpO2I9Yi5yYSgpO2cgaW5zdGFuY2VvZiBObSYmKGQuSWNvblN0eWxlPWcpO2ImJihkLkxhYmVsU3R5bGU9Yik7ZiYmKGQuTGluZVN0eWxlPWYpO2UmJihkLlBvbHlTdHlsZT1lKTtiPUFvW2NbYy5sZW5ndGgtMV0ubm9kZS5uYW1lc3BhY2VVUkldO2Q9WWsoZCxiKTtUKGEsQm8sWGssZCxjLGIpfSksYWRkcmVzczpPKFgpLGRlc2NyaXB0aW9uOk8oWCksbmFtZTpPKFgpLG9wZW46TyhHbCkscGhvbmVOdW1iZXI6TyhYKSxzdHlsZVVybDpPKFgpLHZpc2liaWxpdHk6TyhHbCl9KSxTbj1RKFosW1wiZXh0cnVkZVwiLFwidGVzc2VsbGF0ZVwiLFwiYWx0aXR1ZGVNb2RlXCIsXCJjb29yZGluYXRlc1wiXSksVG49UShaLHtleHRydWRlOk8oR2wpLHRlc3NlbGxhdGU6TyhHbCksYWx0aXR1ZGVNb2RlOk8oWCksXG5jb29yZGluYXRlczpPKGZ1bmN0aW9uKGEsYixjKXtjPWNbYy5sZW5ndGgtMV07dmFyIGQ9Yy5sYXlvdXQ7Yz1jLnN0cmlkZTt2YXIgZTtcIlhZXCI9PWR8fFwiWFlNXCI9PWQ/ZT0yOlwiWFlaXCI9PWR8fFwiWFlaTVwiPT1kP2U9Mzp4KCExLDM0KTt2YXIgZixnPWIubGVuZ3RoLGg9XCJcIjtpZigwPGcpe2grPWJbMF07Zm9yKGQ9MTtkPGU7KytkKWgrPVwiLFwiK2JbZF07Zm9yKGY9YztmPGc7Zis9Yylmb3IoaCs9XCIgXCIrYltmXSxkPTE7ZDxlOysrZCloKz1cIixcIitiW2YrZF19WChhLGgpfSl9KSxWbj1RKFose291dGVyQm91bmRhcnlJczpPKEtuKSxpbm5lckJvdW5kYXJ5SXM6TyhLbil9KSxDbz1RKFose2NvbG9yOk8oRG4pfSksQW89UShaLFtcIkljb25TdHlsZVwiLFwiTGFiZWxTdHlsZVwiLFwiTGluZVN0eWxlXCIsXCJQb2x5U3R5bGVcIl0pLEJvPVEoWix7SWNvblN0eWxlOk8oZnVuY3Rpb24oYSxiLGMpe2E9e25vZGU6YX07dmFyIGQ9e30sZT1iLnliKCksZj1iLmNlKCksZz17aHJlZjpiLmEudn07aWYoZSl7Zy53PVxuZVswXTtnLmg9ZVsxXTt2YXIgaD1iLiRiKCksaz1iLm9jKCk7ayYmZiYmMCE9PWtbMF0mJmtbMV0hPT1lWzFdJiYoZy54PWtbMF0sZy55PWZbMV0tKGtbMV0rZVsxXSkpOyFofHxoWzBdPT09ZVswXS8yJiZoWzFdPT09ZVsxXS8yfHwoZC5ob3RTcG90PXt4OmhbMF0sRGQ6XCJwaXhlbHNcIix5OmVbMV0taFsxXSxFZDpcInBpeGVsc1wifSl9ZC5JY29uPWc7ZT1iLmo7MSE9PWUmJihkLnNjYWxlPWUpO2I9Yi5pOzAhPT1iJiYoZC5oZWFkaW5nPWIpO2I9Zm9bY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07ZD1ZayhkLGIpO1QoYSxobyxYayxkLGMsYil9KSxMYWJlbFN0eWxlOk8oZnVuY3Rpb24oYSxiLGMpe2E9e25vZGU6YX07dmFyIGQ9e30sZT1iLnVhKCk7ZSYmKGQuY29sb3I9ZS5hKTsoYj1iLmMpJiYxIT09YiYmKGQuc2NhbGU9Yik7Yj1pb1tjW2MubGVuZ3RoLTFdLm5vZGUubmFtZXNwYWNlVVJJXTtkPVlrKGQsYik7VChhLGpvLFhrLGQsYyxiKX0pLExpbmVTdHlsZTpPKGZ1bmN0aW9uKGEsXG5iLGMpe2E9e25vZGU6YX07dmFyIGQ9a29bY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07Yj1Zayh7Y29sb3I6Yi5jLHdpZHRoOmIuan0sZCk7VChhLGxvLFhrLGIsYyxkKX0pLFBvbHlTdHlsZTpPKGZ1bmN0aW9uKGEsYixjKXtUKHtub2RlOmF9LENvLERvLFtiLmFdLGMpfSl9KTtmdW5jdGlvbiBnbyhhLGIsYyl7cmV0dXJuIE9rKE9tWzBdLFwiZ3g6XCIrYyl9ZnVuY3Rpb24gJG4oYSxiKXtyZXR1cm4gT2soYltiLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSSxcIlBsYWNlbWFya1wiKX1mdW5jdGlvbiBGbihhLGIpe2lmKGEpcmV0dXJuIE9rKGJbYi5sZW5ndGgtMV0ubm9kZS5uYW1lc3BhY2VVUkksYm9bYS5EKCldKX1cbnZhciBEbz1WayhcImNvbG9yXCIpLG1vPVZrKFwiRGF0YVwiKSxQbj1WayhcIkV4dGVuZGVkRGF0YVwiKSxXbj1WayhcImlubmVyQm91bmRhcnlJc1wiKSxHbj1WayhcIlBvaW50XCIpLEhuPVZrKFwiTGluZVN0cmluZ1wiKSxNbj1WayhcIkxpbmVhclJpbmdcIiksSW49VmsoXCJQb2x5Z29uXCIpLFhuPVZrKFwib3V0ZXJCb3VuZGFyeUlzXCIpO3lpLkFiPWZ1bmN0aW9uKCl7fTtcbihmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3RoaXMuYWI9QXJyYXlCdWZmZXIuaXNWaWV3JiZBcnJheUJ1ZmZlci5pc1ZpZXcoYSk/YTpuZXcgVWludDhBcnJheShhfHwwKTt0aGlzLnR5cGU9dGhpcy5QPTA7dGhpcy5sZW5ndGg9dGhpcy5hYi5sZW5ndGh9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9Yy5hYjt2YXIgZj1lW2MuUCsrXTt2YXIgZz0oZiYxMTIpPj40O2lmKDEyOD5mKXJldHVybiBkKGEsZyxiKTtmPWVbYy5QKytdO2d8PShmJjEyNyk8PDM7aWYoMTI4PmYpcmV0dXJuIGQoYSxnLGIpO2Y9ZVtjLlArK107Z3w9KGYmMTI3KTw8MTA7aWYoMTI4PmYpcmV0dXJuIGQoYSxnLGIpO2Y9ZVtjLlArK107Z3w9KGYmMTI3KTw8MTc7aWYoMTI4PmYpcmV0dXJuIGQoYSxnLGIpO2Y9ZVtjLlArK107Z3w9KGYmMTI3KTw8MjQ7aWYoMTI4PmYpcmV0dXJuIGQoYSxnLGIpO2Y9ZVtjLlArK107aWYoMTI4PmYpcmV0dXJuIGQoYSxnfChmJjEpPDwzMSxiKTt0aHJvdyBFcnJvcihcIkV4cGVjdGVkIHZhcmludCBub3QgbW9yZSB0aGFuIDEwIGJ5dGVzXCIpO31cbmZ1bmN0aW9uIGQoYSxiLGMpe3JldHVybiBjPzQyOTQ5NjcyOTYqYisoYT4+PjApOjQyOTQ5NjcyOTYqKGI+Pj4wKSsoYT4+PjApfXZhciBlPXtyZWFkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9OCplLWQtMTt2YXIgZz0oMTw8ZiktMSxoPWc+PjEsaz0tNztlPWM/ZS0xOjA7dmFyIG09Yz8tMToxLHk9YVtiK2VdO2UrPW07Yz15JigxPDwtayktMTt5Pj49LWs7Zm9yKGsrPWY7MDxrO2M9MjU2KmMrYVtiK2VdLGUrPW0say09OCk7Zj1jJigxPDwtayktMTtjPj49LWs7Zm9yKGsrPWQ7MDxrO2Y9MjU2KmYrYVtiK2VdLGUrPW0say09OCk7aWYoMD09PWMpYz0xLWg7ZWxzZXtpZihjPT09ZylyZXR1cm4gZj9OYU46SW5maW5pdHkqKHk/LTE6MSk7Zis9TWF0aC5wb3coMixkKTtjLT1ofXJldHVybih5Py0xOjEpKmYqTWF0aC5wb3coMixjLWQpfSx3cml0ZTpmdW5jdGlvbihhLGIsYyxkLGUsbil7dmFyIGYsZz04Km4tZS0xLGg9KDE8PGcpLTEsaz1oPj4xLG09MjM9PT1lP01hdGgucG93KDIsXG4tMjQpLU1hdGgucG93KDIsLTc3KTowO249ZD8wOm4tMTt2YXIgQz1kPzE6LTEsRD0wPmJ8fDA9PT1iJiYwPjEvYj8xOjA7Yj1NYXRoLmFicyhiKTtpc05hTihiKXx8SW5maW5pdHk9PT1iPyhiPWlzTmFOKGIpPzE6MCxkPWgpOihkPU1hdGguZmxvb3IoTWF0aC5sb2coYikvTWF0aC5MTjIpLDE+YiooZj1NYXRoLnBvdygyLC1kKSkmJihkLS0sZio9MiksYj0xPD1kK2s/YittL2Y6YittKk1hdGgucG93KDIsMS1rKSwyPD1iKmYmJihkKyssZi89MiksZCtrPj1oPyhiPTAsZD1oKToxPD1kK2s/KGI9KGIqZi0xKSpNYXRoLnBvdygyLGUpLGQrPWspOihiPWIqTWF0aC5wb3coMixrLTEpKk1hdGgucG93KDIsZSksZD0wKSk7Zm9yKDs4PD1lO2FbYytuXT1iJjI1NSxuKz1DLGIvPTI1NixlLT04KTtkPWQ8PGV8Yjtmb3IoZys9ZTswPGc7YVtjK25dPWQmMjU1LG4rPUMsZC89MjU2LGctPTgpO2FbYytuLUNdfD0xMjgqRH19O2Iuaj0wO2IubD0xO2IuYT0yO2IuYz01O2IucHJvdG90eXBlPXtzZDpmdW5jdGlvbihhLFxuYixjKXtmb3IoYz1jfHx0aGlzLmxlbmd0aDt0aGlzLlA8Yzspe3ZhciBkPXRoaXMubWEoKSxlPWQ+PjMsZj10aGlzLlA7dGhpcy50eXBlPWQmNzthKGUsYix0aGlzKTt0aGlzLlA9PT1mJiZ0aGlzLmdqKGQpfXJldHVybiBifSxQaTpmdW5jdGlvbigpe3ZhciBhPWUucmVhZCh0aGlzLmFiLHRoaXMuUCwhMCwyMyw0KTt0aGlzLlArPTQ7cmV0dXJuIGF9LExpOmZ1bmN0aW9uKCl7dmFyIGE9ZS5yZWFkKHRoaXMuYWIsdGhpcy5QLCEwLDUyLDgpO3RoaXMuUCs9ODtyZXR1cm4gYX0sbWE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hYjt2YXIgZD1iW3RoaXMuUCsrXTt2YXIgZT1kJjEyNztpZigxMjg+ZClyZXR1cm4gZTtkPWJbdGhpcy5QKytdO2V8PShkJjEyNyk8PDc7aWYoMTI4PmQpcmV0dXJuIGU7ZD1iW3RoaXMuUCsrXTtlfD0oZCYxMjcpPDwxNDtpZigxMjg+ZClyZXR1cm4gZTtkPWJbdGhpcy5QKytdO2V8PShkJjEyNyk8PDIxO2lmKDEyOD5kKXJldHVybiBlO2Q9Ylt0aGlzLlBdO3JldHVybiBjKGV8XG4oZCYxNSk8PDI4LGEsdGhpcyl9LFdpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWEoITApfSx3ZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMubWEoKTtyZXR1cm4gMT09PWElMj8oYSsxKS8tMjphLzJ9LEppOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLm1hKCl9LHhkOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMubWEoKSt0aGlzLlAsYj10aGlzLmFiLGM9XCJcIixkPXRoaXMuUDtkPGE7KXt2YXIgZT1iW2RdLG49bnVsbCxwPTIzOTxlPzQ6MjIzPGU/MzoxOTE8ZT8yOjE7aWYoZCtwPmEpYnJlYWs7aWYoMT09PXApMTI4PmUmJihuPWUpO2Vsc2UgaWYoMj09PXApe3ZhciBxPWJbZCsxXTsxMjg9PT0ocSYxOTIpJiYobj0oZSYzMSk8PDZ8cSY2MywxMjc+PW4mJihuPW51bGwpKX1lbHNlIGlmKDM9PT1wKXtxPWJbZCsxXTt2YXIgdD1iW2QrMl07MTI4PT09KHEmMTkyKSYmMTI4PT09KHQmMTkyKSYmKG49KGUmMTUpPDwxMnwocSY2Myk8PDZ8dCY2MywyMDQ3Pj1ufHw1NTI5Njw9biYmNTczNDM+PVxubikmJihuPW51bGwpfWVsc2UgaWYoND09PXApe3E9YltkKzFdO3Q9YltkKzJdO3ZhciB1PWJbZCszXTsxMjg9PT0ocSYxOTIpJiYxMjg9PT0odCYxOTIpJiYxMjg9PT0odSYxOTIpJiYobj0oZSYxNSk8PDE4fChxJjYzKTw8MTJ8KHQmNjMpPDw2fHUmNjMsNjU1MzU+PW58fDExMTQxMTI8PW4pJiYobj1udWxsKX1udWxsPT09bj8obj02NTUzMyxwPTEpOjY1NTM1PG4mJihuLT02NTUzNixjKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG4+Pj4xMCYxMDIzfDU1Mjk2KSxuPTU2MzIwfG4mMTAyMyk7Yys9U3RyaW5nLmZyb21DaGFyQ29kZShuKTtkKz1wfXRoaXMuUD1hO3JldHVybiBjfSxnajpmdW5jdGlvbihhKXthJj03O2lmKGE9PT1iLmopZm9yKDsxMjc8dGhpcy5hYlt0aGlzLlArK107KTtlbHNlIGlmKGE9PT1iLmEpdGhpcy5QPXRoaXMubWEoKSt0aGlzLlA7ZWxzZSBpZihhPT09Yi5jKXRoaXMuUCs9NDtlbHNlIGlmKGE9PT1iLmwpdGhpcy5QKz04O2Vsc2UgdGhyb3cgRXJyb3IoXCJVbmltcGxlbWVudGVkIHR5cGU6IFwiK1xuYSk7fX07YVtcImRlZmF1bHRcIl09Yn0pKHlpLkFiPXlpLkFifHx7fSk7eWkuQWI9eWkuQWIuZGVmYXVsdDtmdW5jdGlvbiBFbyhhLGIsYyxkKXt0aGlzLmc9YTt0aGlzLmE9Yjt0aGlzLmM9dGhpcy5qPW51bGw7dGhpcy5sPWM7dGhpcy52PWQ7dGhpcy5mPUtlKCl9bD1Fby5wcm90b3R5cGU7bC5nZXQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudlthXX07bC5NYT1Fby5wcm90b3R5cGUuRWI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sfTtsLkk9ZnVuY3Rpb24oKXt0aGlzLmJ8fCh0aGlzLmI9XCJQb2ludFwiPT09dGhpcy5nP0xhKHRoaXMuYSk6TmEodGhpcy5hLDAsdGhpcy5hLmxlbmd0aCwyKSk7cmV0dXJuIHRoaXMuYn07bC5hYz1mdW5jdGlvbigpe2lmKCF0aGlzLmope3ZhciBhPVJhKHRoaXMuSSgpKTt0aGlzLmo9bmYodGhpcy5hLDAsdGhpcy5sLDIsYSwwKX1yZXR1cm4gdGhpcy5qfTtsLlhjPWZ1bmN0aW9uKCl7dGhpcy5jfHwodGhpcy5jPUpqKHRoaXMuYSwwLHRoaXMuYS5sZW5ndGgsMiwuNSkpO3JldHVybiB0aGlzLmN9O1xubC5ZYz1mdW5jdGlvbigpe2lmKCF0aGlzLmMpe3RoaXMuYz1bXTtmb3IodmFyIGE9dGhpcy5hLGI9MCxjPXRoaXMubCxkPTAsZT1jLmxlbmd0aDtkPGU7KytkKXt2YXIgZj1jW2RdO2I9SmooYSxiLGYsMiwuNSk7VWIodGhpcy5jLGIpO2I9Zn19cmV0dXJuIHRoaXMuY307bC5YYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2wuYWE9RW8ucHJvdG90eXBlLlhhO2wuTz1mdW5jdGlvbigpe3JldHVybiB0aGlzfTtsLmJjPUVvLnByb3RvdHlwZS5PO2wuZ2E9ZnVuY3Rpb24oKXtyZXR1cm4gMn07bC5jYj1sYTtsLkQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nfTtsLnhiPWZ1bmN0aW9uKGEpe3ZhciBiPWEuSSgpO2E9YS5CZDtiPVRhKGEpL1RhKGIpO3ZhciBjPXRoaXMuZjtQZShjLGFbMF0sYVszXSxiLC1iLDAsMCwwKTtJZSh0aGlzLmEsMCx0aGlzLmEubGVuZ3RoLDIsYyx0aGlzLmEpfTtmdW5jdGlvbiBGbyhhKXtibC5jYWxsKHRoaXMpO2E9YT9hOnt9O3RoaXMuZGVmYXVsdERhdGFQcm9qZWN0aW9uPW5ldyBtYih7Y29kZTpcIkVQU0c6Mzg1N1wiLHVuaXRzOlwidGlsZS1waXhlbHNcIn0pO3RoaXMuYT1hLmZlYXR1cmVDbGFzcz9hLmZlYXR1cmVDbGFzczpFbzt0aGlzLmo9YS5nZW9tZXRyeU5hbWU7dGhpcy5iPWEubGF5ZXJOYW1lP2EubGF5ZXJOYW1lOlwibGF5ZXJcIjt0aGlzLmc9YS5sYXllcnM/YS5sYXllcnM6bnVsbDt0aGlzLmM9bnVsbH12KEZvLGJsKTtmdW5jdGlvbiBHbyhhLGIsYyl7aWYoMz09PWEpe2E9e2tleXM6W10sdmFsdWVzOltdLGZlYXR1cmVzOltdfTt2YXIgZD1jLm1hKCkrYy5QO2Muc2QoSG8sYSxkKTthLmxlbmd0aD1hLmZlYXR1cmVzLmxlbmd0aDthLmxlbmd0aCYmKGJbYS5uYW1lXT1hKX19XG5mdW5jdGlvbiBIbyhhLGIsYyl7aWYoMTU9PT1hKWIudmVyc2lvbj1jLm1hKCk7ZWxzZSBpZigxPT09YSliLm5hbWU9Yy54ZCgpO2Vsc2UgaWYoNT09PWEpYi5leHRlbnQ9Yy5tYSgpO2Vsc2UgaWYoMj09PWEpYi5mZWF0dXJlcy5wdXNoKGMuUCk7ZWxzZSBpZigzPT09YSliLmtleXMucHVzaChjLnhkKCkpO2Vsc2UgaWYoND09PWEpe2E9bnVsbDtmb3IodmFyIGQ9Yy5tYSgpK2MuUDtjLlA8ZDspYT1jLm1hKCk+PjMsYT0xPT09YT9jLnhkKCk6Mj09PWE/Yy5QaSgpOjM9PT1hP2MuTGkoKTo0PT09YT9jLldpKCk6NT09PWE/Yy5tYSgpOjY9PT1hP2Mud2QoKTo3PT09YT9jLkppKCk6bnVsbDtiLnZhbHVlcy5wdXNoKGEpfX1cbmZ1bmN0aW9uIElvKGEsYixjKXtpZigxPT1hKWIuaWQ9Yy5tYSgpO2Vsc2UgaWYoMj09YSlmb3IoYT1jLm1hKCkrYy5QO2MuUDxhOyl7dmFyIGQ9Yi5sYXllci5rZXlzW2MubWEoKV0sZT1iLmxheWVyLnZhbHVlc1tjLm1hKCldO2IucHJvcGVydGllc1tkXT1lfWVsc2UgMz09YT9iLnR5cGU9Yy5tYSgpOjQ9PWEmJihiLmdlb21ldHJ5PWMuUCl9XG5mdW5jdGlvbiBKbyhhLGIsYyl7dmFyIGQ9Yy50eXBlO2lmKDA9PT1kKXJldHVybiBudWxsO3ZhciBlPWMuaWQsZj1jLnByb3BlcnRpZXM7ZlthLmJdPWMubGF5ZXIubmFtZTt2YXIgZz1bXTt2YXIgaD1bXSxrPWg7Yi5QPWMuZ2VvbWV0cnk7Yz1iLm1hKCkrYi5QO2Zvcih2YXIgbT0xLG49MCxwPTAscT0wLHQ9MCx1PTA7Yi5QPGM7KW58fChuPWIubWEoKSxtPW4mNyxuPj49Myksbi0tLDE9PT1tfHwyPT09bT8ocCs9Yi53ZCgpLHErPWIud2QoKSwxPT09bSYmdD51JiYoay5wdXNoKHQpLHU9dCksZy5wdXNoKHAscSksdCs9Mik6Nz09PW0/dD51JiYoZy5wdXNoKGdbdV0sZ1t1KzFdKSx0Kz0yKTp4KCExLDU5KTt0PnUmJmsucHVzaCh0KTtiPWgubGVuZ3RoO3ZhciB5OzE9PT1kP3k9MT09PWI/XCJQb2ludFwiOlwiTXVsdGlQb2ludFwiOjI9PT1kP3k9MT09PWI/XCJMaW5lU3RyaW5nXCI6XCJNdWx0aUxpbmVTdHJpbmdcIjozPT09ZCYmKHk9XCJQb2x5Z29uXCIpO2Q9eTtpZihhLmE9PT1FbylnPW5ldyBhLmEoZCxcbmcsaCxmLGUpO2Vsc2V7aWYoXCJQb2x5Z29uXCI9PWQpe2Q9W107az1iPXk9MDtmb3IoYz1oLmxlbmd0aDtrPGM7KytrKW09aFtrXSxvZihnLHksbSwyKXx8KGQucHVzaChoLnNsaWNlKGIsaykpLGI9aykseT1tOzE8ZC5sZW5ndGg/KGg9ZCxkPW5ldyBsbChudWxsKSk6ZD1uZXcgQShudWxsKX1lbHNlIGQ9XCJQb2ludFwiPT09ZD9uZXcgbGYobnVsbCk6XCJMaW5lU3RyaW5nXCI9PT1kP25ldyBFKG51bGwpOlwiUG9seWdvblwiPT09ZD9uZXcgQShudWxsKTpcIk11bHRpUG9pbnRcIj09PWQ/bmV3IGpsKG51bGwpOlwiTXVsdGlMaW5lU3RyaW5nXCI9PT1kP25ldyBobChudWxsKTpudWxsO2QuTihcIlhZXCIsZyxoKTtnPW5ldyBhLmE7YS5qJiZnLlphKGEuaik7YT1lbChkLCExLGRsKGEsdm9pZCAwKSk7Zy5CYShhKTtnLmxiKGUpO2cubmEoZil9cmV0dXJuIGd9bD1Gby5wcm90b3R5cGU7bC5kZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmN9O2wuRD1mdW5jdGlvbigpe3JldHVyblwiYXJyYXlidWZmZXJcIn07XG5sLlRhPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuZzthPW5ldyB5aS5BYihhKTt2YXIgYz1hLnNkKEdvLHt9KSxkPVtdLGU7Zm9yKGUgaW4gYylpZighYnx8LTEhPWIuaW5kZXhPZihlKSl7dmFyIGY9Y1tlXTtmb3IodmFyIGcsaD0wLGs9Zi5sZW5ndGg7aDxrOysraCl7Zz1hO3ZhciBtPWY7Zy5QPW0uZmVhdHVyZXNbaF07dmFyIG49Zy5tYSgpK2cuUDttPXtsYXllcjptLHR5cGU6MCxwcm9wZXJ0aWVzOnt9fTtnLnNkKElvLG0sbik7Zz1tO2QucHVzaChKbyh0aGlzLGEsZykpfXRoaXMuYz1mP1swLDAsZi5leHRlbnQsZi5leHRlbnRdOm51bGx9cmV0dXJuIGR9O2wuT2I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb259O2wuTWI9ZnVuY3Rpb24oKXt9O2wuQ2M9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIEtvKGEsYil7YltiLmxlbmd0aC0xXS56Y1thLmdldEF0dHJpYnV0ZShcImtcIildPWEuZ2V0QXR0cmlidXRlKFwidlwiKX12YXIgTG89W251bGxdLE1vPVEoTG8se25kOmZ1bmN0aW9uKGEsYil7YltiLmxlbmd0aC0xXS5BaC5wdXNoKGEuZ2V0QXR0cmlidXRlKFwicmVmXCIpKX0sdGFnOktvfSk7XG5RKExvLHtub2RlOmZ1bmN0aW9uKGEsYil7dmFyIGM9YlswXSxkPWJbYi5sZW5ndGgtMV0sZT1hLmdldEF0dHJpYnV0ZShcImlkXCIpLGY9W3BhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoXCJsb25cIikpLHBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoXCJsYXRcIikpXTtkLkZqW2VdPWY7YT1TKHt6Yzp7fX0sTm8sYSxiKTtkYihhLnpjKXx8KGY9bmV3IGxmKGYpLGVsKGYsITEsYyksYz1uZXcgQihmKSxjLmxiKGUpLGMubmEoYS56YyksZC5mZWF0dXJlcy5wdXNoKGMpKX0sd2F5OmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoXCJpZFwiKTthPVMoe2lkOmMsQWg6W10semM6e319LE1vLGEsYik7YltiLmxlbmd0aC0xXS5Hai5wdXNoKGEpfX0pO3ZhciBObz1RKExvLHt0YWc6S299KTtmdW5jdGlvbiBPbyhhKXthPWE/YTp7fTtibC5jYWxsKHRoaXMpO3RoaXMuYz1hLmxheWVyTmFtZTt0aGlzLmE9YS5sYXllcnM/YS5sYXllcnM6bnVsbDt0aGlzLmRlZmF1bHREYXRhUHJvamVjdGlvbj1GYihhLmRlZmF1bHREYXRhUHJvamVjdGlvbj9hLmRlZmF1bHREYXRhUHJvamVjdGlvbjpcIkVQU0c6NDMyNlwiKX12KE9vLGZsKTtmdW5jdGlvbiBQbyhhLGIpe3ZhciBjPVtdLGQsZTt2YXIgZj0wO2ZvcihlPWEubGVuZ3RoO2Y8ZTsrK2Ype3ZhciBnPWFbZl07MDxmJiZjLnBvcCgpOzA8PWc/ZD1iW2ddOmQ9Ylt+Z10uc2xpY2UoKS5yZXZlcnNlKCk7Yy5wdXNoLmFwcGx5KGMsZCl9YT0wO2ZvcihiPWMubGVuZ3RoO2E8YjsrK2EpY1thXT1jW2FdLnNsaWNlKCk7cmV0dXJuIGN9XG5mdW5jdGlvbiBRbyhhLGIsYyxkLGUsZixnKXthPWEuZ2VvbWV0cmllczt2YXIgaD1bXSxrO3ZhciBtPTA7Zm9yKGs9YS5sZW5ndGg7bTxrOysrbSloW21dPVJvKGFbbV0sYixjLGQsZSxmLGcpO3JldHVybiBofWZ1bmN0aW9uIFJvKGEsYixjLGQsZSxmLGcpe3ZhciBoPWEudHlwZSxrPVNvW2hdO2M9XCJQb2ludFwiPT09aHx8XCJNdWx0aVBvaW50XCI9PT1oP2soYSxjLGQpOmsoYSxiKTtiPW5ldyBCO2IuQmEoZWwoYywhMSxnKSk7dm9pZCAwIT09YS5pZCYmYi5sYihhLmlkKTthPWEucHJvcGVydGllcztlJiYoYXx8KGE9e30pLGFbZV09Zik7YSYmYi5uYShhKTtyZXR1cm4gYn1cbk9vLnByb3RvdHlwZS5yZD1mdW5jdGlvbihhLGIpe2lmKFwiVG9wb2xvZ3lcIj09YS50eXBlKXt2YXIgYz1udWxsLGQ9bnVsbDtpZihhLnRyYW5zZm9ybSl7dmFyIGU9YS50cmFuc2Zvcm07Yz1lLnNjYWxlO2Q9ZS50cmFuc2xhdGV9dmFyIGY9YS5hcmNzO2lmKGUpe2U9Yzt2YXIgZz1kLGg7dmFyIGs9MDtmb3IoaD1mLmxlbmd0aDtrPGg7KytrKXt2YXIgbSxuPWZba10scD1lLHE9Zyx0PTAsdT0wO3ZhciB5PTA7Zm9yKG09bi5sZW5ndGg7eTxtOysreSl7dmFyIEM9blt5XTt0Kz1DWzBdO3UrPUNbMV07Q1swXT10O0NbMV09dTtUbyhDLHAscSl9fX1lPVtdO2E9YS5vYmplY3RzO2c9dGhpcy5jO2Zvcih2YXIgRCBpbiBhKXRoaXMuYSYmLTE9PXRoaXMuYS5pbmRleE9mKEQpfHwoXCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09PWFbRF0udHlwZT8oaz1hW0RdLGUucHVzaC5hcHBseShlLFFvKGssZixjLGQsZyxELGIpKSk6KGs9YVtEXSxlLnB1c2goUm8oayxmLGMsZCxnLEQsYikpKSk7cmV0dXJuIGV9cmV0dXJuW119O1xuZnVuY3Rpb24gVG8oYSxiLGMpe2FbMF09YVswXSpiWzBdK2NbMF07YVsxXT1hWzFdKmJbMV0rY1sxXX1Pby5wcm90b3R5cGUudmQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb259O1xudmFyIFNvPXtQb2ludDpmdW5jdGlvbihhLGIsYyl7YT1hLmNvb3JkaW5hdGVzO2ImJmMmJlRvKGEsYixjKTtyZXR1cm4gbmV3IGxmKGEpfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYil7YT1QbyhhLmFyY3MsYik7cmV0dXJuIG5ldyBFKGEpfSxQb2x5Z29uOmZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZDt2YXIgZT0wO2ZvcihkPWEuYXJjcy5sZW5ndGg7ZTxkOysrZSljW2VdPVBvKGEuYXJjc1tlXSxiKTtyZXR1cm4gbmV3IEEoYyl9LE11bHRpUG9pbnQ6ZnVuY3Rpb24oYSxiLGMpe2E9YS5jb29yZGluYXRlczt2YXIgZDtpZihiJiZjKXt2YXIgZT0wO2ZvcihkPWEubGVuZ3RoO2U8ZDsrK2UpVG8oYVtlXSxiLGMpfXJldHVybiBuZXcgamwoYSl9LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ7dmFyIGU9MDtmb3IoZD1hLmFyY3MubGVuZ3RoO2U8ZDsrK2UpY1tlXT1QbyhhLmFyY3NbZV0sYik7cmV0dXJuIG5ldyBobChjKX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKGEsXG5iKXt2YXIgYz1bXSxkLGU7dmFyIGY9MDtmb3IoZT1hLmFyY3MubGVuZ3RoO2Y8ZTsrK2Ype3ZhciBnPWEuYXJjc1tmXTt2YXIgaD1bXTt2YXIgaz0wO2ZvcihkPWcubGVuZ3RoO2s8ZDsrK2spaFtrXT1QbyhnW2tdLGIpO2NbZl09aH1yZXR1cm4gbmV3IGxsKGMpfX07T28ucHJvdG90eXBlLnpiPWZ1bmN0aW9uKCl7fTtPby5wcm90b3R5cGUuQ2Q9ZnVuY3Rpb24oKXt9O09vLnByb3RvdHlwZS5pYj1mdW5jdGlvbigpe307ZnVuY3Rpb24gVW8oYSl7YT1hP2E6e307dGhpcy5qPWEuZmVhdHVyZVR5cGU7dGhpcy5jPWEuZmVhdHVyZU5TO3RoaXMuYT1hLmdtbEZvcm1hdD9hLmdtbEZvcm1hdDpuZXcgWTt1bC5jYWxsKHRoaXMpfXYoVW8sdWwpO3ZhciBWbz17XCIxLjEuMFwiOlwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnMgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvd2ZzLzEuMS4wL3dmcy54c2RcIixcIjEuMC4wXCI6XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dmcyBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC93ZnMvMS4wLjAvd2ZzLnhzZFwifTtcblVvLnByb3RvdHlwZS5xZD1mdW5jdGlvbihhLGIpe3ZhciBjPXtmZWF0dXJlVHlwZTp0aGlzLmosZmVhdHVyZU5TOnRoaXMuY307WmEoYyxjbCh0aGlzLGEsYj9iOnt9KSk7Yj1bY107dGhpcy5hLmFbXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiXS5mZWF0dXJlTWVtYmVyPU0oVS5wcm90b3R5cGUuTmIpOyhhPVMoW10sdGhpcy5hLmEsYSxiLHRoaXMuYSkpfHwoYT1bXSk7cmV0dXJuIGF9O1VvLnByb3RvdHlwZS5iPWZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBEb2N1bWVudClyZXR1cm4gV28oYSk7aWYoYSBpbnN0YW5jZW9mIE5vZGUpcmV0dXJuIFMoe30sWG8sYSxbXSk7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybiBhPVJrKGEpLFdvKGEpfTtcbnZhciBZbz17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dmc1wiOnt0b3RhbEluc2VydGVkOk4oRWwpLHRvdGFsVXBkYXRlZDpOKEVsKSx0b3RhbERlbGV0ZWQ6TihFbCl9fSxabz17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nY1wiOntGZWF0dXJlSWQ6TShmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJmaWRcIil9KX19LCRvPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzXCI6e0ZlYXR1cmU6ZnVuY3Rpb24oYSxiKXtaayhabyxhLGIpfX19LFhvPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzXCI6e1RyYW5zYWN0aW9uU3VtbWFyeTpOKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoe30sWW8sYSxiKX0sXCJ0cmFuc2FjdGlvblN1bW1hcnlcIiksSW5zZXJ0UmVzdWx0czpOKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoW10sJG8sYSxiKX0sXCJpbnNlcnRJZHNcIil9fTtcbmZ1bmN0aW9uIFdvKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPT1Ob2RlLkVMRU1FTlRfTk9ERSlyZXR1cm4gUyh7fSxYbyxhLFtdKX1mdW5jdGlvbiBhcChhLGIpe3ZhciBjPU9rKFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2NcIixcIkZpbHRlclwiKSxkPU9rKFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vZ2NcIixcIkZlYXR1cmVJZFwiKTtjLmFwcGVuZENoaWxkKGQpO2Quc2V0QXR0cmlidXRlKFwiZmlkXCIsYik7YS5hcHBlbmRDaGlsZChjKX1mdW5jdGlvbiBicChhLGIpe2E9KGE/YTpcImZlYXR1cmVcIikrXCI6XCI7cmV0dXJuIDA9PT1iLmluZGV4T2YoYSk/YjphK2J9XG52YXIgY3A9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnNcIjp7SW5zZXJ0Ok8oZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLmdtbFZlcnNpb247ZD1PayhkLmZlYXR1cmVOUyxkLmZlYXR1cmVUeXBlKTthLmFwcGVuZENoaWxkKGQpO2lmKDI9PT1lKXt2YXIgZj1SbC5wcm90b3R5cGU7KGE9Yi5iKSYmZC5zZXRBdHRyaWJ1dGUoXCJmaWRcIixhKTthPWNbYy5sZW5ndGgtMV07ZT1hLmZlYXR1cmVOUzt2YXIgZz1iLmE7YS5BYXx8KGEuQWE9e30sYS5BYVtlXT17fSk7dmFyIGg9Yi5GYSgpO2I9W107dmFyIGs9W107Zm9yKG4gaW4gaCl7dmFyIG09aFtuXTtudWxsIT09bSYmKGIucHVzaChuKSxrLnB1c2gobSksbj09Z3x8bSBpbnN0YW5jZW9mIFFlP24gaW4gYS5BYVtlXXx8KGEuQWFbZV1bbl09TyhmLnJlLGYpKTpuIGluIGEuQWFbZV18fChhLkFhW2VdW25dPU8oWCkpKX12YXIgbj1aYSh7fSxhKX1lbHNle249WS5wcm90b3R5cGU7KGE9Yi5iKSYmZC5zZXRBdHRyaWJ1dGUoXCJmaWRcIixcbmEpO2E9Y1tjLmxlbmd0aC0xXTtlPWEuZmVhdHVyZU5TO2c9Yi5hO2EuQWF8fChhLkFhPXt9LGEuQWFbZV09e30pO2g9Yi5GYSgpO2I9W107az1bXTtmb3IoZiBpbiBoKW09aFtmXSxudWxsIT09bSYmKGIucHVzaChmKSxrLnB1c2gobSksZj09Z3x8bSBpbnN0YW5jZW9mIFFlP2YgaW4gYS5BYVtlXXx8KGEuQWFbZV1bZl09TyhuLnplLG4pKTpmIGluIGEuQWFbZV18fChhLkFhW2VdW2ZdPU8oWCkpKTtuPVphKHt9LGEpfW4ubm9kZT1kO1QobixhLkFhLFZrKHZvaWQgMCxlKSxrLGMsYil9KSxVcGRhdGU6TyhmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXTt4KHZvaWQgMCE9PWIuYiwyNyk7dmFyIGU9ZC5mZWF0dXJlUHJlZml4LGY9ZC5mZWF0dXJlTlMsZz1iLmE7YS5zZXRBdHRyaWJ1dGUoXCJ0eXBlTmFtZVwiLGJwKGUsZC5mZWF0dXJlVHlwZSkpO2Euc2V0QXR0cmlidXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3htbG5zL1wiLFwieG1sbnM6XCIrZSxmKTtlPWIuYjtpZih2b2lkIDAhPT1cbmUpe2Y9T2JqZWN0LmtleXMoYi5IKTtmb3IodmFyIGg9W10saz0wLG09Zi5sZW5ndGg7azxtO2srKyl7dmFyIG49Yi5nZXQoZltrXSk7aWYodm9pZCAwIT09bil7dmFyIHA9ZltrXTtuIGluc3RhbmNlb2YgUWUmJihwPWcpO2gucHVzaCh7bmFtZTpwLHZhbHVlOm59KX19VCh7Z21sVmVyc2lvbjpkLmdtbFZlcnNpb24sbm9kZTphLGhhc1o6ZC5oYXNaLHNyc05hbWU6ZC5zcnNOYW1lfSxjcCxWayhcIlByb3BlcnR5XCIpLGgsYyk7YXAoYSxlKX19KSxEZWxldGU6TyhmdW5jdGlvbihhLGIsYyl7Yz1jW2MubGVuZ3RoLTFdO3godm9pZCAwIT09Yi5iLDI2KTt2YXIgZD1jLmZlYXR1cmVQcmVmaXgsZT1jLmZlYXR1cmVOUzthLnNldEF0dHJpYnV0ZShcInR5cGVOYW1lXCIsYnAoZCxjLmZlYXR1cmVUeXBlKSk7YS5zZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCIsXCJ4bWxuczpcIitkLGUpO2I9Yi5iO3ZvaWQgMCE9PWImJmFwKGEsYil9KSxQcm9wZXJ0eTpPKGZ1bmN0aW9uKGEsXG5iLGMpe3ZhciBkPU9rKFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnNcIixcIk5hbWVcIiksZT1jW2MubGVuZ3RoLTFdLmdtbFZlcnNpb247YS5hcHBlbmRDaGlsZChkKTtYKGQsYi5uYW1lKTt2b2lkIDAhPT1iLnZhbHVlJiZudWxsIT09Yi52YWx1ZSYmKGQ9T2soXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dmc1wiLFwiVmFsdWVcIiksYS5hcHBlbmRDaGlsZChkKSxiLnZhbHVlIGluc3RhbmNlb2YgUWU/Mj09PWU/UmwucHJvdG90eXBlLnJlKGQsYi52YWx1ZSxjKTpZLnByb3RvdHlwZS56ZShkLGIudmFsdWUsYyk6WChkLGIudmFsdWUpKX0pLE5hdGl2ZTpPKGZ1bmN0aW9uKGEsYil7Yi5waiYmYS5zZXRBdHRyaWJ1dGUoXCJ2ZW5kb3JJZFwiLGIucGopO3ZvaWQgMCE9PWIuY2omJmEuc2V0QXR0cmlidXRlKFwic2FmZVRvSWdub3JlXCIsYi5jaik7dm9pZCAwIT09Yi52YWx1ZSYmWChhLGIudmFsdWUpfSl9fTtcblVvLnByb3RvdHlwZS5nPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPVtdLGY9T2soXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dmc1wiLFwiVHJhbnNhY3Rpb25cIiksZz1kLnZlcnNpb24/ZC52ZXJzaW9uOlwiMS4xLjBcIixoPVwiMS4wLjBcIj09PWc/MjozO2Yuc2V0QXR0cmlidXRlKFwic2VydmljZVwiLFwiV0ZTXCIpO2Yuc2V0QXR0cmlidXRlKFwidmVyc2lvblwiLGcpO2lmKGQpe3ZhciBrPWQuZ21sT3B0aW9ucz9kLmdtbE9wdGlvbnM6e307ZC5oYW5kbGUmJmYuc2V0QXR0cmlidXRlKFwiaGFuZGxlXCIsZC5oYW5kbGUpfWYuc2V0QXR0cmlidXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZVwiLFwieHNpOnNjaGVtYUxvY2F0aW9uXCIsVm9bZ10pO3ZhciBtPWQuZmVhdHVyZVByZWZpeD9kLmZlYXR1cmVQcmVmaXg6XCJmZWF0dXJlXCI7YSYmKGc9e25vZGU6ZixmZWF0dXJlTlM6ZC5mZWF0dXJlTlMsZmVhdHVyZVR5cGU6ZC5mZWF0dXJlVHlwZSxmZWF0dXJlUHJlZml4Om0sZ21sVmVyc2lvbjpoLFxuaGFzWjpkLmhhc1osc3JzTmFtZTpkLnNyc05hbWV9LFphKGcsayksVChnLGNwLFZrKFwiSW5zZXJ0XCIpLGEsZSkpO2ImJihnPXtub2RlOmYsZmVhdHVyZU5TOmQuZmVhdHVyZU5TLGZlYXR1cmVUeXBlOmQuZmVhdHVyZVR5cGUsZmVhdHVyZVByZWZpeDptLGdtbFZlcnNpb246aCxoYXNaOmQuaGFzWixzcnNOYW1lOmQuc3JzTmFtZX0sWmEoZyxrKSxUKGcsY3AsVmsoXCJVcGRhdGVcIiksYixlKSk7YyYmVCh7bm9kZTpmLGZlYXR1cmVOUzpkLmZlYXR1cmVOUyxmZWF0dXJlVHlwZTpkLmZlYXR1cmVUeXBlLGZlYXR1cmVQcmVmaXg6bSxnbWxWZXJzaW9uOmgsc3JzTmFtZTpkLnNyc05hbWV9LGNwLFZrKFwiRGVsZXRlXCIpLGMsZSk7ZC5uYXRpdmVFbGVtZW50cyYmVCh7bm9kZTpmLGZlYXR1cmVOUzpkLmZlYXR1cmVOUyxmZWF0dXJlVHlwZTpkLmZlYXR1cmVUeXBlLGZlYXR1cmVQcmVmaXg6bSxnbWxWZXJzaW9uOmgsc3JzTmFtZTpkLnNyc05hbWV9LGNwLFZrKFwiTmF0aXZlXCIpLGQubmF0aXZlRWxlbWVudHMsXG5lKTtyZXR1cm4gZn07VW8ucHJvdG90eXBlLnVkPWZ1bmN0aW9uKGEpe2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylpZihhLm5vZGVUeXBlPT1Ob2RlLkVMRU1FTlRfTk9ERSlyZXR1cm4gdGhpcy50YyhhKTtyZXR1cm4gbnVsbH07VW8ucHJvdG90eXBlLnRjPWZ1bmN0aW9uKGEpe2lmKGEuZmlyc3RFbGVtZW50Q2hpbGQmJmEuZmlyc3RFbGVtZW50Q2hpbGQuZmlyc3RFbGVtZW50Q2hpbGQpZm9yKGE9YS5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZCxhPWEuZmlyc3RFbGVtZW50Q2hpbGQ7YTthPWEubmV4dEVsZW1lbnRTaWJsaW5nKWlmKDAhPT1hLmNoaWxkTm9kZXMubGVuZ3RoJiYoMSE9PWEuY2hpbGROb2Rlcy5sZW5ndGh8fDMhPT1hLmZpcnN0Q2hpbGQubm9kZVR5cGUpKXt2YXIgYj1be31dO3lsKHRoaXMuYSxhLGIpO3JldHVybiBGYihiLnBvcCgpLnNyc05hbWUpfXJldHVybiBudWxsfTtmdW5jdGlvbiBkcChhKXthPWE/YTp7fTtibC5jYWxsKHRoaXMpO3RoaXMuYT12b2lkIDAhPT1hLnNwbGl0Q29sbGVjdGlvbj9hLnNwbGl0Q29sbGVjdGlvbjohMX12KGRwLEltKTtmdW5jdGlvbiBlcChhKXthPWEuRygpO3JldHVybiAwPT09YS5sZW5ndGg/XCJcIjphLmpvaW4oXCIgXCIpfWZ1bmN0aW9uIGZwKGEpe2E9YS5HKCk7Zm9yKHZhciBiPVtdLGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpYi5wdXNoKGFbY10uam9pbihcIiBcIikpO3JldHVybiBiLmpvaW4oXCIsXCIpfWZ1bmN0aW9uIGdwKGEpe3ZhciBiPVtdO2E9c2YoYSk7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWIucHVzaChcIihcIitmcChhW2NdKStcIilcIik7cmV0dXJuIGIuam9pbihcIixcIil9XG5mdW5jdGlvbiBLbShhKXt2YXIgYj1hLkQoKSxjPSgwLGhwW2JdKShhKTtiPWIudG9VcHBlckNhc2UoKTtpZihhIGluc3RhbmNlb2YgUmUpe2E9YS5WO3ZhciBkPVwiXCI7aWYoXCJYWVpcIj09PWF8fFwiWFlaTVwiPT09YSlkKz1cIlpcIjtpZihcIlhZTVwiPT09YXx8XCJYWVpNXCI9PT1hKWQrPVwiTVwiO2E9ZDswPGEubGVuZ3RoJiYoYis9XCIgXCIrYSl9cmV0dXJuIDA9PT1jLmxlbmd0aD9iK1wiIEVNUFRZXCI6YitcIihcIitjK1wiKVwifVxudmFyIGhwPXtQb2ludDplcCxMaW5lU3RyaW5nOmZwLFBvbHlnb246Z3AsTXVsdGlQb2ludDpmdW5jdGlvbihhKXt2YXIgYj1bXTthPWtsKGEpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyliLnB1c2goXCIoXCIrZXAoYVtjXSkrXCIpXCIpO3JldHVybiBiLmpvaW4oXCIsXCIpfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9W107YT1hLnRiKCk7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWIucHVzaChcIihcIitmcChhW2NdKStcIilcIik7cmV0dXJuIGIuam9pbihcIixcIil9LE11bHRpUG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj1bXTthPW1sKGEpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyliLnB1c2goXCIoXCIrZ3AoYVtjXSkrXCIpXCIpO3JldHVybiBiLmpvaW4oXCIsXCIpfSxHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9W107YT1oYihhLmEpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyliLnB1c2goS20oYVtjXSkpO3JldHVybiBiLmpvaW4oXCIsXCIpfX07XG5mdW5jdGlvbiBKbShhLGIpe2E9bmV3IGlwKG5ldyBqcChhKSk7a3AoYSk7cmV0dXJuKGE9bHAoYSkpP2VsKGEsITEsYik6bnVsbH1mdW5jdGlvbiBqcChhKXt0aGlzLmM9YTt0aGlzLmE9LTF9XG5mdW5jdGlvbiBtcChhKXt2YXIgYj1hLmMuY2hhckF0KCsrYS5hKSxjPXtwb3NpdGlvbjphLmEsdmFsdWU6Yn07aWYoXCIoXCI9PWIpYy50eXBlPTI7ZWxzZSBpZihcIixcIj09YiljLnR5cGU9NTtlbHNlIGlmKFwiKVwiPT1iKWMudHlwZT0zO2Vsc2UgaWYoXCIwXCI8PWImJlwiOVwiPj1ifHxcIi5cIj09Ynx8XCItXCI9PWIpe2MudHlwZT00O2I9YS5hO3ZhciBkPSExLGU9ITE7ZG97aWYoXCIuXCI9PWYpZD0hMDtlbHNlIGlmKFwiZVwiPT1mfHxcIkVcIj09ZillPSEwO3ZhciBmPWEuYy5jaGFyQXQoKythLmEpfXdoaWxlKFwiMFwiPD1mJiZcIjlcIj49Znx8XCIuXCI9PWYmJih2b2lkIDA9PT1kfHwhZCl8fCFlJiYoXCJlXCI9PWZ8fFwiRVwiPT1mKXx8ZSYmKFwiLVwiPT1mfHxcIitcIj09ZikpO2E9cGFyc2VGbG9hdChhLmMuc3Vic3RyaW5nKGIsYS5hLS0pKTtjLnZhbHVlPWF9ZWxzZSBpZihcImFcIjw9YiYmXCJ6XCI+PWJ8fFwiQVwiPD1iJiZcIlpcIj49Yil7Yy50eXBlPTE7Yj1hLmE7ZG8gZj1hLmMuY2hhckF0KCsrYS5hKTt3aGlsZShcImFcIjw9ZiYmXCJ6XCI+PVxuZnx8XCJBXCI8PWYmJlwiWlwiPj1mKTthPWEuYy5zdWJzdHJpbmcoYixhLmEtLSkudG9VcHBlckNhc2UoKTtjLnZhbHVlPWF9ZWxzZXtpZihcIiBcIj09Ynx8XCJcXHRcIj09Ynx8XCJcXHJcIj09Ynx8XCJcXG5cIj09YilyZXR1cm4gbXAoYSk7aWYoXCJcIj09PWIpYy50eXBlPTY7ZWxzZSB0aHJvdyBFcnJvcihcIlVuZXhwZWN0ZWQgY2hhcmFjdGVyOiBcIitiKTt9cmV0dXJuIGN9ZnVuY3Rpb24gaXAoYSl7dGhpcy5sPWE7dGhpcy5jPVwiWFlcIn1mdW5jdGlvbiBrcChhKXthLmE9bXAoYS5sKX1mdW5jdGlvbiBucChhLGIpeyhiPWEuYS50eXBlPT1iKSYma3AoYSk7cmV0dXJuIGJ9XG5mdW5jdGlvbiBscChhKXt2YXIgYj1hLmE7aWYobnAoYSwxKSl7Yj1iLnZhbHVlO3ZhciBjPVwiWFlcIixkPWEuYTsxPT1hLmEudHlwZSYmKGQ9ZC52YWx1ZSxcIlpcIj09PWQ/Yz1cIlhZWlwiOlwiTVwiPT09ZD9jPVwiWFlNXCI6XCJaTVwiPT09ZCYmKGM9XCJYWVpNXCIpLFwiWFlcIiE9PWMmJmtwKGEpKTthLmM9YztpZihcIkdFT01FVFJZQ09MTEVDVElPTlwiPT1iKXthOntpZihucChhLDIpKXtiPVtdO2RvIGIucHVzaChscChhKSk7d2hpbGUobnAoYSw1KSk7aWYobnAoYSwzKSl7YT1iO2JyZWFrIGF9fWVsc2UgaWYob3AoYSkpe2E9W107YnJlYWsgYX10aHJvdyBFcnJvcihwcChhKSk7fXJldHVybiBuZXcgQW0oYSl9ZD1xcFtiXTtjPXJwW2JdO2lmKCFkfHwhYyl0aHJvdyBFcnJvcihcIkludmFsaWQgZ2VvbWV0cnkgdHlwZTogXCIrYik7Yj1kLmNhbGwoYSk7cmV0dXJuIG5ldyBjKGIsYS5jKX10aHJvdyBFcnJvcihwcChhKSk7fWw9aXAucHJvdG90eXBlO1xubC5tZD1mdW5jdGlvbigpe2lmKG5wKHRoaXMsMikpe3ZhciBhPXNwKHRoaXMpO2lmKG5wKHRoaXMsMykpcmV0dXJuIGF9ZWxzZSBpZihvcCh0aGlzKSlyZXR1cm4gbnVsbDt0aHJvdyBFcnJvcihwcCh0aGlzKSk7fTtsLmxkPWZ1bmN0aW9uKCl7aWYobnAodGhpcywyKSl7dmFyIGE9dHAodGhpcyk7aWYobnAodGhpcywzKSlyZXR1cm4gYX1lbHNlIGlmKG9wKHRoaXMpKXJldHVybltdO3Rocm93IEVycm9yKHBwKHRoaXMpKTt9O2wub2Q9ZnVuY3Rpb24oKXtpZihucCh0aGlzLDIpKXt2YXIgYT11cCh0aGlzKTtpZihucCh0aGlzLDMpKXJldHVybiBhfWVsc2UgaWYob3AodGhpcykpcmV0dXJuW107dGhyb3cgRXJyb3IocHAodGhpcykpO307XG5sLnlpPWZ1bmN0aW9uKCl7aWYobnAodGhpcywyKSl7dmFyIGE7aWYoMj09dGhpcy5hLnR5cGUpZm9yKGE9W3RoaXMubWQoKV07bnAodGhpcyw1KTspYS5wdXNoKHRoaXMubWQoKSk7ZWxzZSBhPXRwKHRoaXMpO2lmKG5wKHRoaXMsMykpcmV0dXJuIGF9ZWxzZSBpZihvcCh0aGlzKSlyZXR1cm5bXTt0aHJvdyBFcnJvcihwcCh0aGlzKSk7fTtsLnhpPWZ1bmN0aW9uKCl7aWYobnAodGhpcywyKSl7dmFyIGE9dXAodGhpcyk7aWYobnAodGhpcywzKSlyZXR1cm4gYX1lbHNlIGlmKG9wKHRoaXMpKXJldHVybltdO3Rocm93IEVycm9yKHBwKHRoaXMpKTt9O2wuemk9ZnVuY3Rpb24oKXtpZihucCh0aGlzLDIpKXtmb3IodmFyIGE9W3RoaXMub2QoKV07bnAodGhpcyw1KTspYS5wdXNoKHRoaXMub2QoKSk7aWYobnAodGhpcywzKSlyZXR1cm4gYX1lbHNlIGlmKG9wKHRoaXMpKXJldHVybltdO3Rocm93IEVycm9yKHBwKHRoaXMpKTt9O1xuZnVuY3Rpb24gc3AoYSl7Zm9yKHZhciBiPVtdLGM9YS5jLmxlbmd0aCxkPTA7ZDxjOysrZCl7dmFyIGU9YS5hO2lmKG5wKGEsNCkpYi5wdXNoKGUudmFsdWUpO2Vsc2UgYnJlYWt9aWYoYi5sZW5ndGg9PWMpcmV0dXJuIGI7dGhyb3cgRXJyb3IocHAoYSkpO31mdW5jdGlvbiB0cChhKXtmb3IodmFyIGI9W3NwKGEpXTtucChhLDUpOyliLnB1c2goc3AoYSkpO3JldHVybiBifWZ1bmN0aW9uIHVwKGEpe2Zvcih2YXIgYj1bYS5sZCgpXTtucChhLDUpOyliLnB1c2goYS5sZCgpKTtyZXR1cm4gYn1mdW5jdGlvbiBvcChhKXt2YXIgYj0xPT1hLmEudHlwZSYmXCJFTVBUWVwiPT1hLmEudmFsdWU7YiYma3AoYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gcHAoYSl7cmV0dXJuXCJVbmV4cGVjdGVkIGBcIithLmEudmFsdWUrXCJgIGF0IHBvc2l0aW9uIFwiK2EuYS5wb3NpdGlvbitcIiBpbiBgXCIrYS5sLmMrXCJgXCJ9XG52YXIgcnA9e1BPSU5UOmxmLExJTkVTVFJJTkc6RSxQT0xZR09OOkEsTVVMVElQT0lOVDpqbCxNVUxUSUxJTkVTVFJJTkc6aGwsTVVMVElQT0xZR09OOmxsfSxxcD17UE9JTlQ6aXAucHJvdG90eXBlLm1kLExJTkVTVFJJTkc6aXAucHJvdG90eXBlLmxkLFBPTFlHT046aXAucHJvdG90eXBlLm9kLE1VTFRJUE9JTlQ6aXAucHJvdG90eXBlLnlpLE1VTFRJTElORVNUUklORzppcC5wcm90b3R5cGUueGksTVVMVElQT0xZR09OOmlwLnByb3RvdHlwZS56aX07ZnVuY3Rpb24gdnAoYSl7cmV0dXJuIGEuZ2V0QXR0cmlidXRlTlMoXCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIsXCJocmVmXCIpfTtmdW5jdGlvbiB3cChhLGIpe3JldHVybiBTKHt9LHhwLGEsYil9ZnVuY3Rpb24geXAoYSxiKXtyZXR1cm4gUyh7fSx6cCxhLGIpfWZ1bmN0aW9uIEFwKGEsYil7aWYoYj13cChhLGIpKXJldHVybiBhPVtGbChhLmdldEF0dHJpYnV0ZShcIndpZHRoXCIpKSxGbChhLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKSldLGIuc2l6ZT1hLGJ9ZnVuY3Rpb24gQnAoYSxiKXtyZXR1cm4gUyhbXSxDcCxhLGIpfXZhciBEcD1bbnVsbCxcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd21zXCJdO1EoRHAse1NlcnZpY2U6TihmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LEVwLGEsYil9KSxDYXBhYmlsaXR5Ok4oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyh7fSxGcCxhLGIpfSl9KTtcbnZhciBGcD1RKERwLHtSZXF1ZXN0Ok4oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyh7fSxHcCxhLGIpfSksRXhjZXB0aW9uOk4oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyhbXSxIcCxhLGIpfSksTGF5ZXI6TihmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LElwLGEsYil9KX0pLEVwPVEoRHAse05hbWU6TihXKSxUaXRsZTpOKFcpLEFic3RyYWN0Ok4oVyksS2V5d29yZExpc3Q6TihCcCksT25saW5lUmVzb3VyY2U6Tih2cCksQ29udGFjdEluZm9ybWF0aW9uOk4oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyh7fSxKcCxhLGIpfSksRmVlczpOKFcpLEFjY2Vzc0NvbnN0cmFpbnRzOk4oVyksTGF5ZXJMaW1pdDpOKEVsKSxNYXhXaWR0aDpOKEVsKSxNYXhIZWlnaHQ6TihFbCl9KSxKcD1RKERwLHtDb250YWN0UGVyc29uUHJpbWFyeTpOKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoe30sS3AsYSxiKX0pLENvbnRhY3RQb3NpdGlvbjpOKFcpLENvbnRhY3RBZGRyZXNzOk4oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyh7fSxcbkxwLGEsYil9KSxDb250YWN0Vm9pY2VUZWxlcGhvbmU6TihXKSxDb250YWN0RmFjc2ltaWxlVGVsZXBob25lOk4oVyksQ29udGFjdEVsZWN0cm9uaWNNYWlsQWRkcmVzczpOKFcpfSksS3A9UShEcCx7Q29udGFjdFBlcnNvbjpOKFcpLENvbnRhY3RPcmdhbml6YXRpb246TihXKX0pLExwPVEoRHAse0FkZHJlc3NUeXBlOk4oVyksQWRkcmVzczpOKFcpLENpdHk6TihXKSxTdGF0ZU9yUHJvdmluY2U6TihXKSxQb3N0Q29kZTpOKFcpLENvdW50cnk6TihXKX0pLEhwPVEoRHAse0Zvcm1hdDpNKFcpfSksSXA9UShEcCx7TmFtZTpOKFcpLFRpdGxlOk4oVyksQWJzdHJhY3Q6TihXKSxLZXl3b3JkTGlzdDpOKEJwKSxDUlM6VGsoVyksRVhfR2VvZ3JhcGhpY0JvdW5kaW5nQm94Ok4oZnVuY3Rpb24oYSxiKXt2YXIgYz1TKHt9LE1wLGEsYik7aWYoYyl7YT1jLndlc3RCb3VuZExvbmdpdHVkZTtiPWMuc291dGhCb3VuZExhdGl0dWRlO3ZhciBkPWMuZWFzdEJvdW5kTG9uZ2l0dWRlO2M9Yy5ub3J0aEJvdW5kTGF0aXR1ZGU7XG5pZih2b2lkIDAhPT1hJiZ2b2lkIDAhPT1iJiZ2b2lkIDAhPT1kJiZ2b2lkIDAhPT1jKXJldHVyblthLGIsZCxjXX19KSxCb3VuZGluZ0JveDpUayhmdW5jdGlvbihhKXt2YXIgYj1bRGwoYS5nZXRBdHRyaWJ1dGUoXCJtaW54XCIpKSxEbChhLmdldEF0dHJpYnV0ZShcIm1pbnlcIikpLERsKGEuZ2V0QXR0cmlidXRlKFwibWF4eFwiKSksRGwoYS5nZXRBdHRyaWJ1dGUoXCJtYXh5XCIpKV0sYz1bRGwoYS5nZXRBdHRyaWJ1dGUoXCJyZXN4XCIpKSxEbChhLmdldEF0dHJpYnV0ZShcInJlc3lcIikpXTtyZXR1cm57Y3JzOmEuZ2V0QXR0cmlidXRlKFwiQ1JTXCIpLGV4dGVudDpiLHJlczpjfX0pLERpbWVuc2lvbjpUayhmdW5jdGlvbihhKXtyZXR1cm57bmFtZTphLmdldEF0dHJpYnV0ZShcIm5hbWVcIiksdW5pdHM6YS5nZXRBdHRyaWJ1dGUoXCJ1bml0c1wiKSx1bml0U3ltYm9sOmEuZ2V0QXR0cmlidXRlKFwidW5pdFN5bWJvbFwiKSxcImRlZmF1bHRcIjphLmdldEF0dHJpYnV0ZShcImRlZmF1bHRcIiksbXVsdGlwbGVWYWx1ZXM6QWwoYS5nZXRBdHRyaWJ1dGUoXCJtdWx0aXBsZVZhbHVlc1wiKSksXG5uZWFyZXN0VmFsdWU6QWwoYS5nZXRBdHRyaWJ1dGUoXCJuZWFyZXN0VmFsdWVcIikpLGN1cnJlbnQ6QWwoYS5nZXRBdHRyaWJ1dGUoXCJjdXJyZW50XCIpKSx2YWx1ZXM6VyhhKX19KSxBdHRyaWJ1dGlvbjpOKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoe30sTnAsYSxiKX0pLEF1dGhvcml0eVVSTDpUayhmdW5jdGlvbihhLGIpe2lmKGI9d3AoYSxiKSlyZXR1cm4gYi5uYW1lPWEuZ2V0QXR0cmlidXRlKFwibmFtZVwiKSxifSksSWRlbnRpZmllcjpUayhXKSxNZXRhZGF0YVVSTDpUayhmdW5jdGlvbihhLGIpe2lmKGI9d3AoYSxiKSlyZXR1cm4gYi50eXBlPWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSxifSksRGF0YVVSTDpUayh3cCksRmVhdHVyZUxpc3RVUkw6VGsod3ApLFN0eWxlOlRrKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoe30sT3AsYSxiKX0pLE1pblNjYWxlRGVub21pbmF0b3I6TihDbCksTWF4U2NhbGVEZW5vbWluYXRvcjpOKENsKSxMYXllcjpUayhmdW5jdGlvbihhLGIpe3ZhciBjPWJbYi5sZW5ndGgtXG4xXSxkPVMoe30sSXAsYSxiKTtpZihkKXJldHVybiBiPUFsKGEuZ2V0QXR0cmlidXRlKFwicXVlcnlhYmxlXCIpKSx2b2lkIDA9PT1iJiYoYj1jLnF1ZXJ5YWJsZSksZC5xdWVyeWFibGU9dm9pZCAwIT09Yj9iOiExLGI9RmwoYS5nZXRBdHRyaWJ1dGUoXCJjYXNjYWRlZFwiKSksdm9pZCAwPT09YiYmKGI9Yy5jYXNjYWRlZCksZC5jYXNjYWRlZD1iLGI9QWwoYS5nZXRBdHRyaWJ1dGUoXCJvcGFxdWVcIikpLHZvaWQgMD09PWImJihiPWMub3BhcXVlKSxkLm9wYXF1ZT12b2lkIDAhPT1iP2I6ITEsYj1BbChhLmdldEF0dHJpYnV0ZShcIm5vU3Vic2V0c1wiKSksdm9pZCAwPT09YiYmKGI9Yy5ub1N1YnNldHMpLGQubm9TdWJzZXRzPXZvaWQgMCE9PWI/YjohMSwoYj1EbChhLmdldEF0dHJpYnV0ZShcImZpeGVkV2lkdGhcIikpKXx8KGI9Yy5maXhlZFdpZHRoKSxkLmZpeGVkV2lkdGg9YiwoYT1EbChhLmdldEF0dHJpYnV0ZShcImZpeGVkSGVpZ2h0XCIpKSl8fChhPWMuZml4ZWRIZWlnaHQpLGQuZml4ZWRIZWlnaHQ9XG5hLFtcIlN0eWxlXCIsXCJDUlNcIixcIkF1dGhvcml0eVVSTFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EgaW4gYyYmKGRbYV09KGRbYV18fFtdKS5jb25jYXQoY1thXSkpfSksXCJFWF9HZW9ncmFwaGljQm91bmRpbmdCb3ggQm91bmRpbmdCb3ggRGltZW5zaW9uIEF0dHJpYnV0aW9uIE1pblNjYWxlRGVub21pbmF0b3IgTWF4U2NhbGVEZW5vbWluYXRvclwiLnNwbGl0KFwiIFwiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2EgaW4gZHx8KGRbYV09Y1thXSl9KSxkfSl9KSxOcD1RKERwLHtUaXRsZTpOKFcpLE9ubGluZVJlc291cmNlOk4odnApLExvZ29VUkw6TihBcCl9KSxNcD1RKERwLHt3ZXN0Qm91bmRMb25naXR1ZGU6TihDbCksZWFzdEJvdW5kTG9uZ2l0dWRlOk4oQ2wpLHNvdXRoQm91bmRMYXRpdHVkZTpOKENsKSxub3J0aEJvdW5kTGF0aXR1ZGU6TihDbCl9KSxHcD1RKERwLHtHZXRDYXBhYmlsaXRpZXM6Tih5cCksR2V0TWFwOk4oeXApLEdldEZlYXR1cmVJbmZvOk4oeXApfSksenA9UShEcCx7Rm9ybWF0OlRrKFcpLFxuRENQVHlwZTpUayhmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LFBwLGEsYil9KX0pLFBwPVEoRHAse0hUVFA6TihmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LFFwLGEsYil9KX0pLFFwPVEoRHAse0dldDpOKHdwKSxQb3N0Ok4od3ApfSksT3A9UShEcCx7TmFtZTpOKFcpLFRpdGxlOk4oVyksQWJzdHJhY3Q6TihXKSxMZWdlbmRVUkw6VGsoQXApLFN0eWxlU2hlZXRVUkw6Tih3cCksU3R5bGVVUkw6Tih3cCl9KSx4cD1RKERwLHtGb3JtYXQ6TihXKSxPbmxpbmVSZXNvdXJjZTpOKHZwKX0pLENwPVEoRHAse0tleXdvcmQ6TShXKX0pO3ZhciBScD1bbnVsbCxcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzLzEuMVwiXTtRKFJwLHtTZXJ2aWNlSWRlbnRpZmljYXRpb246TihmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LFNwLGEsYil9KSxTZXJ2aWNlUHJvdmlkZXI6TihmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LFRwLGEsYil9KSxPcGVyYXRpb25zTWV0YWRhdGE6TihmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LFVwLGEsYil9KX0pO1xudmFyIFZwPVEoUnAse0RlbGl2ZXJ5UG9pbnQ6TihXKSxDaXR5Ok4oVyksQWRtaW5pc3RyYXRpdmVBcmVhOk4oVyksUG9zdGFsQ29kZTpOKFcpLENvdW50cnk6TihXKSxFbGVjdHJvbmljTWFpbEFkZHJlc3M6TihXKX0pLFdwPVEoUnAse1ZhbHVlOlRrKGZ1bmN0aW9uKGEpe3JldHVybiBXKGEpfSl9KSxYcD1RKFJwLHtBbGxvd2VkVmFsdWVzOk4oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyh7fSxXcCxhLGIpfSl9KSxacD1RKFJwLHtQaG9uZTpOKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoe30sWXAsYSxiKX0pLEFkZHJlc3M6TihmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LFZwLGEsYil9KX0pLGFxPVEoUnAse0hUVFA6TihmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LCRwLGEsYil9KX0pLCRwPVEoUnAse0dldDpUayhmdW5jdGlvbihhLGIpe3ZhciBjPXZwKGEpO2lmKGMpcmV0dXJuIFMoe2hyZWY6Y30sYnEsYSxiKX0pLFBvc3Q6dm9pZCAwfSksY3E9UShScCx7RENQOk4oZnVuY3Rpb24oYSxcbmIpe3JldHVybiBTKHt9LGFxLGEsYil9KX0pLFVwPVEoUnAse09wZXJhdGlvbjpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTsoYT1TKHt9LGNxLGEsYikpJiYoYltiLmxlbmd0aC0xXVtjXT1hKX19KSxZcD1RKFJwLHtWb2ljZTpOKFcpLEZhY3NpbWlsZTpOKFcpfSksYnE9UShScCx7Q29uc3RyYWludDpUayhmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtpZihjKXJldHVybiBTKHtuYW1lOmN9LFhwLGEsYil9KX0pLGRxPVEoUnAse0luZGl2aWR1YWxOYW1lOk4oVyksUG9zaXRpb25OYW1lOk4oVyksQ29udGFjdEluZm86TihmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LFpwLGEsYil9KX0pLFNwPVEoUnAse0Fic3RyYWN0Ok4oVyksQWNjZXNzQ29uc3RyYWludHM6TihXKSxGZWVzOk4oVyksVGl0bGU6TihXKSxTZXJ2aWNlVHlwZVZlcnNpb246TihXKSxTZXJ2aWNlVHlwZTpOKFcpfSksVHA9UShScCx7UHJvdmlkZXJOYW1lOk4oVyksXG5Qcm92aWRlclNpdGU6Tih2cCksU2VydmljZUNvbnRhY3Q6TihmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LGRxLGEsYil9KX0pO2Z1bmN0aW9uIGVxKGEpe3ZhciBiPVcoYSkuc3BsaXQoXCIgXCIpO2lmKGImJjI9PWIubGVuZ3RoJiYoYT0rYlswXSxiPStiWzFdLCFpc05hTihhKSYmIWlzTmFOKGIpKSlyZXR1cm5bYSxiXX12YXIgZnE9W251bGwsXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dtdHMvMS4wXCJdLGdxPVtudWxsLFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xXCJdO1EoZnEse0NvbnRlbnRzOk4oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyh7fSxocSxhLGIpfSl9KTtcbnZhciBocT1RKGZxLHtMYXllcjpUayhmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LGlxLGEsYil9KSxUaWxlTWF0cml4U2V0OlRrKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoe30sanEsYSxiKX0pfSksaXE9UShmcSx7U3R5bGU6VGsoZnVuY3Rpb24oYSxiKXtpZihiPVMoe30sa3EsYSxiKSlyZXR1cm4gYT1cInRydWVcIj09PWEuZ2V0QXR0cmlidXRlKFwiaXNEZWZhdWx0XCIpLGIuaXNEZWZhdWx0PWEsYn0pLEZvcm1hdDpUayhXKSxUaWxlTWF0cml4U2V0TGluazpUayhmdW5jdGlvbihhLGIpe3JldHVybiBTKHt9LGxxLGEsYil9KSxEaW1lbnNpb246VGsoZnVuY3Rpb24oYSxiKXtyZXR1cm4gUyh7fSxtcSxhLGIpfSksUmVzb3VyY2VVUkw6VGsoZnVuY3Rpb24oYSl7dmFyIGI9YS5nZXRBdHRyaWJ1dGUoXCJmb3JtYXRcIiksYz1hLmdldEF0dHJpYnV0ZShcInRlbXBsYXRlXCIpO2E9YS5nZXRBdHRyaWJ1dGUoXCJyZXNvdXJjZVR5cGVcIik7dmFyIGQ9e307YiYmKGQuZm9ybWF0PWIpO2MmJihkLnRlbXBsYXRlPVxuYyk7YSYmKGQucmVzb3VyY2VUeXBlPWEpO3JldHVybiBkfSl9LFEoZ3Ese1RpdGxlOk4oVyksQWJzdHJhY3Q6TihXKSxXR1M4NEJvdW5kaW5nQm94Ok4oZnVuY3Rpb24oYSxiKXthPVMoW10sbnEsYSxiKTtpZigyPT1hLmxlbmd0aClyZXR1cm4gQWEoYSl9KSxJZGVudGlmaWVyOk4oVyl9KSksa3E9UShmcSx7TGVnZW5kVVJMOlRrKGZ1bmN0aW9uKGEpe3ZhciBiPXt9O2IuZm9ybWF0PWEuZ2V0QXR0cmlidXRlKFwiZm9ybWF0XCIpO2IuaHJlZj12cChhKTtyZXR1cm4gYn0pfSxRKGdxLHtUaXRsZTpOKFcpLElkZW50aWZpZXI6TihXKX0pKSxscT1RKGZxLHtUaWxlTWF0cml4U2V0Ok4oVyksVGlsZU1hdHJpeFNldExpbWl0czpOKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoW10sb3EsYSxiKX0pfSksb3E9UShmcSx7VGlsZU1hdHJpeExpbWl0czpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoe30scHEsYSxiKX0pfSkscHE9UShmcSx7VGlsZU1hdHJpeDpOKFcpLE1pblRpbGVSb3c6TihFbCksTWF4VGlsZVJvdzpOKEVsKSxcbk1pblRpbGVDb2w6TihFbCksTWF4VGlsZUNvbDpOKEVsKX0pLG1xPVEoZnEse0RlZmF1bHQ6TihXKSxWYWx1ZTpUayhXKX0sUShncSx7SWRlbnRpZmllcjpOKFcpfSkpLG5xPVEoZ3Ese0xvd2VyQ29ybmVyOk0oZXEpLFVwcGVyQ29ybmVyOk0oZXEpfSksanE9UShmcSx7V2VsbEtub3duU2NhbGVTZXQ6TihXKSxUaWxlTWF0cml4OlRrKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFMoe30scXEsYSxiKX0pfSxRKGdxLHtTdXBwb3J0ZWRDUlM6TihXKSxJZGVudGlmaWVyOk4oVyl9KSkscXE9UShmcSx7VG9wTGVmdENvcm5lcjpOKGVxKSxTY2FsZURlbm9taW5hdG9yOk4oQ2wpLFRpbGVXaWR0aDpOKEVsKSxUaWxlSGVpZ2h0Ok4oRWwpLE1hdHJpeFdpZHRoOk4oRWwpLE1hdHJpeEhlaWdodDpOKEVsKX0sUShncSx7SWRlbnRpZmllcjpOKFcpfSkpO2Z1bmN0aW9uIHJxKGEsYixjKXtSZS5jYWxsKHRoaXMpO3NxKHRoaXMsYSxiP2I6MCxjKX12KHJxLFJlKTtsPXJxLnByb3RvdHlwZTtsLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IHJxKG51bGwpO1RlKGEsdGhpcy5WLHRoaXMucy5zbGljZSgpKTthLmMoKTtyZXR1cm4gYX07bC5QYT1mdW5jdGlvbihhLGIsYyxkKXt2YXIgZT10aGlzLnM7YS09ZVswXTt2YXIgZj1iLWVbMV07Yj1hKmErZipmO2lmKGI8ZCl7aWYoMD09PWIpZm9yKGQ9MDtkPHRoaXMuYTsrK2QpY1tkXT1lW2RdO2Vsc2UgZm9yKGQ9dGhpcy5KYigpL01hdGguc3FydChiKSxjWzBdPWVbMF0rZCphLGNbMV09ZVsxXStkKmYsZD0yO2Q8dGhpcy5hOysrZCljW2RdPWVbZF07Yy5sZW5ndGg9dGhpcy5hO3JldHVybiBifXJldHVybiBkfTtsLmphPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucy5zbGljZSgwLHRoaXMuYSl9O1xubC5ZYj1mdW5jdGlvbihhKXt2YXIgYj10aGlzLnMsYz1iW3RoaXMuYV0tYlswXTtyZXR1cm4gSmEoYlswXS1jLGJbMV0tYyxiWzBdK2MsYlsxXStjLGEpfTtsLkpiPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5zW3RoaXMuYV0tdGhpcy5zWzBdLGI9dGhpcy5zW3RoaXMuYSsxXS10aGlzLnNbMV07cmV0dXJuIE1hdGguc3FydChhKmErYipiKX07bC5EPWZ1bmN0aW9uKCl7cmV0dXJuXCJDaXJjbGVcIn07bC5PYT1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmEsYz1hLnNsaWNlKCk7Y1tiXT1jWzBdKyh0aGlzLnNbYl0tdGhpcy5zWzBdKTt2YXIgZDtmb3IoZD0xO2Q8YjsrK2QpY1tiK2RdPWFbZF07VGUodGhpcyx0aGlzLlYsYyk7dGhpcy5jKCl9O1xuZnVuY3Rpb24gc3EoYSxiLGMsZCl7aWYoYil7VWUoYSxkLGIsMCk7YS5zfHwoYS5zPVtdKTtkPWEucztiPWFmKGQsYik7ZFtiKytdPWRbMF0rYzt2YXIgZTtjPTE7Zm9yKGU9YS5hO2M8ZTsrK2MpZFtiKytdPWRbY107ZC5sZW5ndGg9Yn1lbHNlIFRlKGEsXCJYWVwiLG51bGwpO2EuYygpfWwuRz1mdW5jdGlvbigpe307bC5ZPWZ1bmN0aW9uKCl7fTtsLmtmPWZ1bmN0aW9uKGEpe3RoaXMuc1t0aGlzLmFdPXRoaXMuc1swXSthO3RoaXMuYygpfTtmdW5jdGlvbiB0cShhKXthPWE/YTp7fTt2YXIgYj1aYSh7fSxhKTtkZWxldGUgYi5zdHlsZTtkZWxldGUgYi5yZW5kZXJCdWZmZXI7ZGVsZXRlIGIudXBkYXRlV2hpbGVBbmltYXRpbmc7ZGVsZXRlIGIudXBkYXRlV2hpbGVJbnRlcmFjdGluZztpZy5jYWxsKHRoaXMsYik7dGhpcy5iPXZvaWQgMCE9PWEuZGVjbHV0dGVyP2EuZGVjbHV0dGVyOiExO3RoaXMuaT12b2lkIDAhPT1hLnJlbmRlckJ1ZmZlcj9hLnJlbmRlckJ1ZmZlcjoxMDA7dGhpcy5KPW51bGw7dGhpcy5BPXZvaWQgMDt0aGlzLksoYS5zdHlsZSk7dGhpcy5NPXZvaWQgMCE9PWEudXBkYXRlV2hpbGVBbmltYXRpbmc/YS51cGRhdGVXaGlsZUFuaW1hdGluZzohMTt0aGlzLlg9dm9pZCAwIT09YS51cGRhdGVXaGlsZUludGVyYWN0aW5nP2EudXBkYXRlV2hpbGVJbnRlcmFjdGluZzohMTt0aGlzLnR5cGU9XCJWRUNUT1JcIn12KHRxLGlnKTt0cS5wcm90b3R5cGUuY2I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5BfTtcbnRxLnByb3RvdHlwZS5LPWZ1bmN0aW9uKGEpe3RoaXMuSj12b2lkIDAhPT1hP2E6Rmo7dGhpcy5BPW51bGw9PT1hP3ZvaWQgMDpEaih0aGlzLkopO3RoaXMuYygpfTt2YXIgb2o9XCJyZW5kZXJPcmRlclwiO2Z1bmN0aW9uIHVxKCl7cmV0dXJuW1stSW5maW5pdHksLUluZmluaXR5LEluZmluaXR5LEluZmluaXR5XV19O2Z1bmN0aW9uIHZxKGEpe2E9YXx8e307WGouY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YS5hdHRyaWJ1dGlvbnMsbG9nbzphLmxvZ28scHJvamVjdGlvbjp2b2lkIDAsc3RhdGU6XCJyZWFkeVwiLHdyYXBYOnZvaWQgMCE9PWEud3JhcFg/YS53cmFwWDohMH0pO3RoaXMuQT1sYTt0aGlzLnU9YS5mb3JtYXQ7dGhpcy5NPXZvaWQgMD09YS5vdmVybGFwcz8hMDphLm92ZXJsYXBzO3RoaXMuSz1hLnVybDt2b2lkIDAhPT1hLmxvYWRlcj90aGlzLkE9YS5sb2FkZXI6dm9pZCAwIT09dGhpcy5LJiYoeCh0aGlzLnUsNyksdGhpcy5BPWFsKHRoaXMuSyx0aGlzLnUpKTt0aGlzLmZhPXZvaWQgMCE9PWEuc3RyYXRlZ3k/YS5zdHJhdGVneTp1cTt2YXIgYj12b2lkIDAhPT1hLnVzZVNwYXRpYWxJbmRleD9hLnVzZVNwYXRpYWxJbmRleDohMDt0aGlzLmE9Yj9uZXcgUmo6bnVsbDt0aGlzLko9bmV3IFJqO3RoaXMuYj17fTt0aGlzLmY9e307dGhpcy5pPXt9O3RoaXMubz17fTt0aGlzLmc9bnVsbDtpZihhLmZlYXR1cmVzIGluc3RhbmNlb2ZcblNjKXt2YXIgYz1hLmZlYXR1cmVzO3ZhciBkPWMuYX1lbHNlIEFycmF5LmlzQXJyYXkoYS5mZWF0dXJlcykmJihkPWEuZmVhdHVyZXMpO2J8fHZvaWQgMCE9PWN8fChjPW5ldyBTYyhkKSk7dm9pZCAwIT09ZCYmd3EodGhpcyxkKTt2b2lkIDAhPT1jJiZ4cSh0aGlzLGMpfXYodnEsWGopO2w9dnEucHJvdG90eXBlO2wuVmE9ZnVuY3Rpb24oYSl7dmFyIGI9dyhhKS50b1N0cmluZygpO2lmKHlxKHRoaXMsYixhKSl7enEodGhpcyxiLGEpO3ZhciBjPWEuTygpO2M/KGI9Yy5JKCksdGhpcy5hJiZ0aGlzLmEuZGEoYixhKSk6dGhpcy5iW2JdPWE7dGhpcy5sKG5ldyBBcShcImFkZGZlYXR1cmVcIixhKSl9dGhpcy5jKCl9O2Z1bmN0aW9uIHpxKGEsYixjKXthLm9bYl09W3ooYyxcImNoYW5nZVwiLGEuUmUsYSkseihjLFwicHJvcGVydHljaGFuZ2VcIixhLlJlLGEpXX1cbmZ1bmN0aW9uIHlxKGEsYixjKXt2YXIgZD0hMCxlPWMuYjt2b2lkIDAhPT1lP2UudG9TdHJpbmcoKWluIGEuZj9kPSExOmEuZltlLnRvU3RyaW5nKCldPWM6KHgoIShiIGluIGEuaSksMzApLGEuaVtiXT1jKTtyZXR1cm4gZH1sLkJiPWZ1bmN0aW9uKGEpe3dxKHRoaXMsYSk7dGhpcy5jKCl9O2Z1bmN0aW9uIHdxKGEsYil7dmFyIGMsZD1bXSxlPVtdLGY9W107dmFyIGc9MDtmb3IoYz1iLmxlbmd0aDtnPGM7ZysrKXt2YXIgaD1iW2ddO3ZhciBrPXcoaCkudG9TdHJpbmcoKTt5cShhLGssaCkmJmUucHVzaChoKX1nPTA7Zm9yKGM9ZS5sZW5ndGg7ZzxjO2crKyloPWVbZ10saz13KGgpLnRvU3RyaW5nKCksenEoYSxrLGgpLChiPWguTygpKT8oaz1iLkkoKSxkLnB1c2goayksZi5wdXNoKGgpKTphLmJba109aDthLmEmJmEuYS5sb2FkKGQsZik7Zz0wO2ZvcihjPWUubGVuZ3RoO2c8YztnKyspYS5sKG5ldyBBcShcImFkZGZlYXR1cmVcIixlW2ddKSl9XG5mdW5jdGlvbiB4cShhLGIpe3ZhciBjPSExO3ooYSxcImFkZGZlYXR1cmVcIixmdW5jdGlvbihhKXtjfHwoYz0hMCxiLnB1c2goYS5mZWF0dXJlKSxjPSExKX0pO3ooYSxcInJlbW92ZWZlYXR1cmVcIixmdW5jdGlvbihhKXtjfHwoYz0hMCxiLnJlbW92ZShhLmZlYXR1cmUpLGM9ITEpfSk7eihiLFwiYWRkXCIsZnVuY3Rpb24oYSl7Y3x8KGM9ITAsdGhpcy5WYShhLmVsZW1lbnQpLGM9ITEpfSxhKTt6KGIsXCJyZW1vdmVcIixmdW5jdGlvbihhKXtjfHwoYz0hMCx0aGlzLlFhKGEuZWxlbWVudCksYz0hMSl9LGEpO2EuZz1ifVxubC5jbGVhcj1mdW5jdGlvbihhKXtpZihhKXtmb3IodmFyIGIgaW4gdGhpcy5vKXRoaXMub1tiXS5mb3JFYWNoKHZjKTt0aGlzLmd8fCh0aGlzLm89e30sdGhpcy5mPXt9LHRoaXMuaT17fSl9ZWxzZSBpZih0aGlzLmEpe3RoaXMuYS5mb3JFYWNoKHRoaXMueWQsdGhpcyk7Zm9yKHZhciBjIGluIHRoaXMuYil0aGlzLnlkKHRoaXMuYltjXSl9dGhpcy5nJiZ0aGlzLmcuY2xlYXIoKTt0aGlzLmEmJnRoaXMuYS5jbGVhcigpO3RoaXMuSi5jbGVhcigpO3RoaXMuYj17fTt0aGlzLmwobmV3IEFxKFwiY2xlYXJcIikpO3RoaXMuYygpfTtmdW5jdGlvbiBwaihhLGIsYyxkKXthLmE/V2ooYS5hLGIsYyxkKTphLmcmJmEuZy5mb3JFYWNoKGMsZCl9bC5tYz1mdW5jdGlvbigpe2lmKHRoaXMuZyl2YXIgYT10aGlzLmcuYTtlbHNlIHRoaXMuYSYmKGE9VGoodGhpcy5hKSxkYih0aGlzLmIpfHxVYihhLGNiKHRoaXMuYikpKTtyZXR1cm4gYX07bC5JPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmEuSShhKX07XG5sLnlnPWZ1bmN0aW9uKGEpe2E9dGhpcy5mW2EudG9TdHJpbmcoKV07cmV0dXJuIHZvaWQgMCE9PWE/YTpudWxsfTtsLnBpPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudX07bC5SZT1mdW5jdGlvbihhKXthPWEudGFyZ2V0O3ZhciBiPXcoYSkudG9TdHJpbmcoKSxjPWEuTygpO2M/KGM9Yy5JKCksYiBpbiB0aGlzLmI/KGRlbGV0ZSB0aGlzLmJbYl0sdGhpcy5hJiZ0aGlzLmEuZGEoYyxhKSk6dGhpcy5hJiZTaih0aGlzLmEsYyxhKSk6YiBpbiB0aGlzLmJ8fCh0aGlzLmEmJnRoaXMuYS5yZW1vdmUoYSksdGhpcy5iW2JdPWEpO2M9YS5iO3ZvaWQgMCE9PWM/KGM9Yy50b1N0cmluZygpLGIgaW4gdGhpcy5pPyhkZWxldGUgdGhpcy5pW2JdLHRoaXMuZltjXT1hKTp0aGlzLmZbY10hPT1hJiYoQnEodGhpcyxhKSx0aGlzLmZbY109YSkpOmIgaW4gdGhpcy5pfHwoQnEodGhpcyxhKSx0aGlzLmlbYl09YSk7dGhpcy5jKCk7dGhpcy5sKG5ldyBBcShcImNoYW5nZWZlYXR1cmVcIixhKSl9O1xubC5lZD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy5KO2E9dGhpcy5mYShhLGIpO3ZhciBlO3ZhciBmPTA7Zm9yKGU9YS5sZW5ndGg7ZjxlOysrZil7dmFyIGc9YVtmXTtXaihkLGcsZnVuY3Rpb24oYSl7cmV0dXJuIEhhKGEuZXh0ZW50LGcpfSl8fCh0aGlzLkEuY2FsbCh0aGlzLGcsYixjKSxkLmRhKGcse2V4dGVudDpnLnNsaWNlKCl9KSl9fTtsLlFhPWZ1bmN0aW9uKGEpe3ZhciBiPXcoYSkudG9TdHJpbmcoKTtiIGluIHRoaXMuYj9kZWxldGUgdGhpcy5iW2JdOnRoaXMuYSYmdGhpcy5hLnJlbW92ZShhKTt0aGlzLnlkKGEpO3RoaXMuYygpfTtsLnlkPWZ1bmN0aW9uKGEpe3ZhciBiPXcoYSkudG9TdHJpbmcoKTt0aGlzLm9bYl0uZm9yRWFjaCh2Yyk7ZGVsZXRlIHRoaXMub1tiXTt2YXIgYz1hLmI7dm9pZCAwIT09Yz9kZWxldGUgdGhpcy5mW2MudG9TdHJpbmcoKV06ZGVsZXRlIHRoaXMuaVtiXTt0aGlzLmwobmV3IEFxKFwicmVtb3ZlZmVhdHVyZVwiLGEpKX07XG5mdW5jdGlvbiBCcShhLGIpe2Zvcih2YXIgYyBpbiBhLmYpaWYoYS5mW2NdPT09Yil7ZGVsZXRlIGEuZltjXTticmVha319ZnVuY3Rpb24gQXEoYSxiKXtHYy5jYWxsKHRoaXMsYSk7dGhpcy5mZWF0dXJlPWJ9dihBcSxHYyk7ZnVuY3Rpb24gQ3EoYSl7SGcuY2FsbCh0aGlzLHtoYW5kbGVEb3duRXZlbnQ6RHEsaGFuZGxlRXZlbnQ6RXEsaGFuZGxlVXBFdmVudDpGcX0pO3RoaXMuTT0hMTt0aGlzLmVhPW51bGw7dGhpcy5mPSExO3RoaXMucGI9YS5zb3VyY2U/YS5zb3VyY2U6bnVsbDt0aGlzLkhhPWEuZmVhdHVyZXM/YS5mZWF0dXJlczpudWxsO3RoaXMuc2c9YS5zbmFwVG9sZXJhbmNlP2Euc25hcFRvbGVyYW5jZToxMjt0aGlzLks9YS50eXBlO3RoaXMuYj1HcSh0aGlzLkspO3RoaXMueGE9YS5taW5Qb2ludHM/YS5taW5Qb2ludHM6dGhpcy5iPT09SHE/MzoyO3RoaXMubGE9YS5tYXhQb2ludHM/YS5tYXhQb2ludHM6SW5maW5pdHk7dGhpcy5GYz1hLmZpbmlzaENvbmRpdGlvbj9hLmZpbmlzaENvbmRpdGlvbjpHZTt2YXIgYj1hLmdlb21ldHJ5RnVuY3Rpb247aWYoIWIpaWYoXCJDaXJjbGVcIj09PXRoaXMuSyliPWZ1bmN0aW9uKGEsYil7Yj1iP2I6bmV3IHJxKFtOYU4sTmFOXSk7c3EoYixhWzBdLE1hdGguc3FydCh1ZShhWzBdLFxuYVsxXSkpKTtyZXR1cm4gYn07ZWxzZXt2YXIgYyxkPXRoaXMuYjtkPT09SXE/Yz1sZjpkPT09SnE/Yz1FOmQ9PT1IcSYmKGM9QSk7Yj1mdW5jdGlvbihhLGIpe2I/ZD09PUhxP2IuWShbYVswXS5jb25jYXQoW2FbMF1bMF1dKV0pOmIuWShhKTpiPW5ldyBjKGEpO3JldHVybiBifX10aGlzLklhPWI7dGhpcy5KPXRoaXMudT10aGlzLmE9dGhpcy5BPXRoaXMuaT10aGlzLm89bnVsbDt0aGlzLnFiPWEuY2xpY2tUb2xlcmFuY2U/YS5jbGlja1RvbGVyYW5jZSphLmNsaWNrVG9sZXJhbmNlOjM2O3RoaXMuZmE9bmV3IHRxKHtzb3VyY2U6bmV3IHZxKHt1c2VTcGF0aWFsSW5kZXg6ITEsd3JhcFg6YS53cmFwWD9hLndyYXBYOiExfSksc3R5bGU6YS5zdHlsZT9hLnN0eWxlOktxKCl9KTt0aGlzLkthPWEuZ2VvbWV0cnlOYW1lO3RoaXMucWc9YS5jb25kaXRpb24/YS5jb25kaXRpb246Q2c7dGhpcy5EYz1hLmZyZWVoYW5kP0dlOmEuZnJlZWhhbmRDb25kaXRpb24/YS5mcmVlaGFuZENvbmRpdGlvbjpcbkRnO3oodGhpcyxQYyhcImFjdGl2ZVwiKSx0aGlzLnJiLHRoaXMpfXYoQ3EsSGcpO2Z1bmN0aW9uIEtxKCl7dmFyIGE9R2ooKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGFbYi5PKCkuRCgpXX19Q3EucHJvdG90eXBlLnNldE1hcD1mdW5jdGlvbihhKXtIZy5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcyxhKTt0aGlzLnJiKCl9O2Z1bmN0aW9uIEVxKGEpe3RoaXMuZj10aGlzLmIhPT1JcSYmdGhpcy5EYyhhKTt2YXIgYj0hMDt0aGlzLmYmJlwicG9pbnRlcmRyYWdcIj09PWEudHlwZSYmbnVsbCE9PXRoaXMuaT8oTHEodGhpcyxhKSxiPSExKTp0aGlzLmYmJlwicG9pbnRlcmRvd25cIj09PWEudHlwZT9iPSExOlwicG9pbnRlcm1vdmVcIj09PWEudHlwZT9iPU1xKHRoaXMsYSk6XCJkYmxjbGlja1wiPT09YS50eXBlJiYoYj0hMSk7cmV0dXJuIElnLmNhbGwodGhpcyxhKSYmYn1cbmZ1bmN0aW9uIERxKGEpe3RoaXMuTT0hdGhpcy5mO3JldHVybiB0aGlzLmY/KHRoaXMuZWE9YS5waXhlbCx0aGlzLm98fE5xKHRoaXMsYSksITApOnRoaXMucWcoYSk/KHRoaXMuZWE9YS5waXhlbCwhMCk6ITF9ZnVuY3Rpb24gRnEoYSl7dmFyIGI9ITA7TXEodGhpcyxhKTt2YXIgYz10aGlzLmI9PT1PcTt0aGlzLk0/KHRoaXMubz90aGlzLmZ8fGM/UHEodGhpcyk6UXEodGhpcyxhKT90aGlzLkZjKGEpJiZQcSh0aGlzKTpMcSh0aGlzLGEpOihOcSh0aGlzLGEpLHRoaXMuYj09PUlxJiZQcSh0aGlzKSksYj0hMSk6dGhpcy5mJiYodGhpcy5vPW51bGwsUnEodGhpcykpO3JldHVybiBifVxuZnVuY3Rpb24gTXEoYSxiKXtpZihhLmVhJiYoIWEuZiYmYS5NfHxhLmYmJiFhLk0pKXt2YXIgYz1hLmVhLGQ9Yi5waXhlbCxlPWNbMF0tZFswXTtjPWNbMV0tZFsxXTtlPWUqZStjKmM7YS5NPWEuZj9lPmEucWI6ZTw9YS5xYn1hLm8/KGU9Yi5jb29yZGluYXRlLGM9YS5pLk8oKSxhLmI9PT1JcT9kPWEuYTphLmI9PT1IcT8oZD1hLmFbMF0sZD1kW2QubGVuZ3RoLTFdLFFxKGEsYikmJihlPWEuby5zbGljZSgpKSk6KGQ9YS5hLGQ9ZFtkLmxlbmd0aC0xXSksZFswXT1lWzBdLGRbMV09ZVsxXSxhLklhKGEuYSxjKSxhLkEmJmEuQS5PKCkuWShlKSxjIGluc3RhbmNlb2YgQSYmYS5iIT09SHE/KGEudXx8KGEudT1uZXcgQihuZXcgRShudWxsKSkpLGU9Yy5lZSgwKSxiPWEudS5PKCksYi5OKGUuVixlLmFhKCkpKTphLkomJihiPWEudS5PKCksYi5ZKGEuSikpLFNxKGEpKTooYj1iLmNvb3JkaW5hdGUuc2xpY2UoKSxhLkE/YS5BLk8oKS5ZKGIpOihhLkE9bmV3IEIobmV3IGxmKGIpKSxTcShhKSkpO1xucmV0dXJuITB9ZnVuY3Rpb24gUXEoYSxiKXt2YXIgYz0hMTtpZihhLmkpe3ZhciBkPSExLGU9W2Eub107YS5iPT09SnE/ZD1hLmEubGVuZ3RoPmEueGE6YS5iPT09SHEmJihkPWEuYVswXS5sZW5ndGg+YS54YSxlPVthLmFbMF1bMF0sYS5hWzBdW2EuYVswXS5sZW5ndGgtMl1dKTtpZihkKXtkPWIubWFwO2Zvcih2YXIgZj0wLGc9ZS5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9ZVtmXSxrPWVnKGQsaCksbT1iLnBpeGVsO2M9bVswXS1rWzBdO2s9bVsxXS1rWzFdO2lmKGM9TWF0aC5zcXJ0KGMqYytrKmspPD0oYS5mPzE6YS5zZykpe2Eubz1oO2JyZWFrfX19fXJldHVybiBjfVxuZnVuY3Rpb24gTnEoYSxiKXtiPWIuY29vcmRpbmF0ZTthLm89YjthLmI9PT1JcT9hLmE9Yi5zbGljZSgpOmEuYj09PUhxPyhhLmE9W1tiLnNsaWNlKCksYi5zbGljZSgpXV0sYS5KPWEuYVswXSk6KGEuYT1bYi5zbGljZSgpLGIuc2xpY2UoKV0sYS5iPT09T3EmJihhLko9YS5hKSk7YS5KJiYoYS51PW5ldyBCKG5ldyBFKGEuSikpKTtiPWEuSWEoYS5hKTthLmk9bmV3IEI7YS5LYSYmYS5pLlphKGEuS2EpO2EuaS5CYShiKTtTcShhKTthLmwobmV3IFRxKFwiZHJhd3N0YXJ0XCIsYS5pKSl9XG5mdW5jdGlvbiBMcShhLGIpe2I9Yi5jb29yZGluYXRlO3ZhciBjPWEuaS5PKCksZDtpZihhLmI9PT1KcSl7YS5vPWIuc2xpY2UoKTt2YXIgZT1hLmE7ZS5sZW5ndGg+PWEubGEmJihhLmY/ZS5wb3AoKTpkPSEwKTtlLnB1c2goYi5zbGljZSgpKTthLklhKGUsYyl9ZWxzZSBhLmI9PT1IcSYmKGU9YS5hWzBdLGUubGVuZ3RoPj1hLmxhJiYoYS5mP2UucG9wKCk6ZD0hMCksZS5wdXNoKGIuc2xpY2UoKSksZCYmKGEubz1lWzBdKSxhLklhKGEuYSxjKSk7U3EoYSk7ZCYmUHEoYSl9XG5mdW5jdGlvbiBQcShhKXt2YXIgYj1ScShhKSxjPWEuYSxkPWIuTygpO2EuYj09PUpxPyhjLnBvcCgpLGEuSWEoYyxkKSk6YS5iPT09SHEmJihjWzBdLnBvcCgpLGEuSWEoYyxkKSxjPWQuRygpKTtcIk11bHRpUG9pbnRcIj09PWEuSz9iLkJhKG5ldyBqbChbY10pKTpcIk11bHRpTGluZVN0cmluZ1wiPT09YS5LP2IuQmEobmV3IGhsKFtjXSkpOlwiTXVsdGlQb2x5Z29uXCI9PT1hLksmJmIuQmEobmV3IGxsKFtjXSkpO2EubChuZXcgVHEoXCJkcmF3ZW5kXCIsYikpO2EuSGEmJmEuSGEucHVzaChiKTthLnBiJiZhLnBiLlZhKGIpfWZ1bmN0aW9uIFJxKGEpe2Eubz1udWxsO3ZhciBiPWEuaTtiJiYoYS5pPW51bGwsYS5BPW51bGwsYS51PW51bGwsYS5mYS4kKCkuY2xlYXIoITApKTtyZXR1cm4gYn1DcS5wcm90b3R5cGUubWI9SGU7XG5mdW5jdGlvbiBTcShhKXt2YXIgYj1bXTthLmkmJmIucHVzaChhLmkpO2EudSYmYi5wdXNoKGEudSk7YS5BJiZiLnB1c2goYS5BKTthPWEuZmEuJCgpO2EuY2xlYXIoITApO2EuQmIoYil9Q3EucHJvdG90eXBlLnJiPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5DLGI9dGhpcy5nZXQoXCJhY3RpdmVcIik7YSYmYnx8UnEodGhpcyk7dGhpcy5mYS5zZXRNYXAoYj9hOm51bGwpfTtmdW5jdGlvbiBHcShhKXt2YXIgYjtcIlBvaW50XCI9PT1hfHxcIk11bHRpUG9pbnRcIj09PWE/Yj1JcTpcIkxpbmVTdHJpbmdcIj09PWF8fFwiTXVsdGlMaW5lU3RyaW5nXCI9PT1hP2I9SnE6XCJQb2x5Z29uXCI9PT1hfHxcIk11bHRpUG9seWdvblwiPT09YT9iPUhxOlwiQ2lyY2xlXCI9PT1hJiYoYj1PcSk7cmV0dXJuIGJ9dmFyIElxPVwiUG9pbnRcIixKcT1cIkxpbmVTdHJpbmdcIixIcT1cIlBvbHlnb25cIixPcT1cIkNpcmNsZVwiO2Z1bmN0aW9uIFRxKGEsYil7R2MuY2FsbCh0aGlzLGEpO3RoaXMuZmVhdHVyZT1ifXYoVHEsR2MpO2Z1bmN0aW9uIFVxKGEpe0hnLmNhbGwodGhpcyx7aGFuZGxlRG93bkV2ZW50OlZxLGhhbmRsZURyYWdFdmVudDpXcSxoYW5kbGVFdmVudDpYcSxoYW5kbGVVcEV2ZW50OllxfSk7dGhpcy5yYj1hLmNvbmRpdGlvbj9hLmNvbmRpdGlvbjpHZzt0aGlzLkthPWZ1bmN0aW9uKGEpe3ZhciBiPWEub3JpZ2luYWxFdmVudDtyZXR1cm4gYi5hbHRLZXkmJiEoYi5tZXRhS2V5fHxiLmN0cmxLZXkpJiYhYi5zaGlmdEtleSYmQmcoYSl9O3RoaXMucGI9YS5kZWxldGVDb25kaXRpb24/YS5kZWxldGVDb25kaXRpb246dGhpcy5LYTt0aGlzLnFiPWEuaW5zZXJ0VmVydGV4Q29uZGl0aW9uP2EuaW5zZXJ0VmVydGV4Q29uZGl0aW9uOkdlO3RoaXMuSGE9dGhpcy5iPW51bGw7dGhpcy54YT1bMCwwXTt0aGlzLnU9dGhpcy5KPSExO3RoaXMuYT1uZXcgUmo7dGhpcy5mYT12b2lkIDAhPT1hLnBpeGVsVG9sZXJhbmNlP2EucGl4ZWxUb2xlcmFuY2U6MTA7dGhpcy5pPXRoaXMubGE9ITE7dGhpcy5mPVtdO3RoaXMuQT1cbm5ldyB0cSh7c291cmNlOm5ldyB2cSh7dXNlU3BhdGlhbEluZGV4OiExLHdyYXBYOiEhYS53cmFwWH0pLHN0eWxlOmEuc3R5bGU/YS5zdHlsZTpacSgpLHVwZGF0ZVdoaWxlQW5pbWF0aW5nOiEwLHVwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc6ITB9KTt0aGlzLmVhPXtQb2ludDp0aGlzLmVpLExpbmVTdHJpbmc6dGhpcy5KZSxMaW5lYXJSaW5nOnRoaXMuSmUsUG9seWdvbjp0aGlzLmZpLE11bHRpUG9pbnQ6dGhpcy5jaSxNdWx0aUxpbmVTdHJpbmc6dGhpcy5iaSxNdWx0aVBvbHlnb246dGhpcy5kaSxDaXJjbGU6dGhpcy4kaCxHZW9tZXRyeUNvbGxlY3Rpb246dGhpcy5haX07dGhpcy5NPW51bGw7YS5zb3VyY2U/KHRoaXMuTT1hLnNvdXJjZSxhPW5ldyBTYyh0aGlzLk0ubWMoKSkseih0aGlzLk0sXCJhZGRmZWF0dXJlXCIsdGhpcy5ZZyx0aGlzKSx6KHRoaXMuTSxcInJlbW92ZWZlYXR1cmVcIix0aGlzLmFoLHRoaXMpKTphPWEuZmVhdHVyZXM7aWYoIWEpdGhyb3cgRXJyb3IoXCJUaGUgbW9kaWZ5IGludGVyYWN0aW9uIHJlcXVpcmVzIGZlYXR1cmVzIG9yIGEgc291cmNlXCIpO1xudGhpcy5vPWE7dGhpcy5vLmZvckVhY2godGhpcy5oZCx0aGlzKTt6KHRoaXMubyxcImFkZFwiLHRoaXMuWWgsdGhpcyk7eih0aGlzLm8sXCJyZW1vdmVcIix0aGlzLlpoLHRoaXMpO3RoaXMuSz1udWxsfXYoVXEsSGcpO2w9VXEucHJvdG90eXBlO2wuaGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5PKCk7YiYmYi5EKClpbiB0aGlzLmVhJiZ0aGlzLmVhW2IuRCgpXS5jYWxsKHRoaXMsYSxiKTsoYj10aGlzLkMpJiZiLmImJnRoaXMuZ2V0KFwiYWN0aXZlXCIpJiYkcSh0aGlzLHRoaXMueGEsYik7eihhLFwiY2hhbmdlXCIsdGhpcy5JZSx0aGlzKX07ZnVuY3Rpb24gYXIoYSxiKXthLnV8fChhLnU9ITAsYS5sKG5ldyBicihcIm1vZGlmeXN0YXJ0XCIsYS5vLGIpKSl9ZnVuY3Rpb24gY3IoYSxiKXtkcihhLGIpO2EuYiYmMD09PWEuby5mYigpJiYoYS5BLiQoKS5RYShhLmIpLGEuYj1udWxsKTtBYyhiLFwiY2hhbmdlXCIsYS5JZSxhKX1cbmZ1bmN0aW9uIGRyKGEsYil7YT1hLmE7dmFyIGM9W107YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2I9PT1hLmZlYXR1cmUmJmMucHVzaChhKX0pO2Zvcih2YXIgZD1jLmxlbmd0aC0xOzA8PWQ7LS1kKWEucmVtb3ZlKGNbZF0pfWwuZ2I9ZnVuY3Rpb24oYSl7dGhpcy5iJiYhYSYmKHRoaXMuQS4kKCkuUWEodGhpcy5iKSx0aGlzLmI9bnVsbCk7SGcucHJvdG90eXBlLmdiLmNhbGwodGhpcyxhKX07bC5zZXRNYXA9ZnVuY3Rpb24oYSl7dGhpcy5BLnNldE1hcChhKTtIZy5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcyxhKX07bC5ZZz1mdW5jdGlvbihhKXthLmZlYXR1cmUmJnRoaXMuby5wdXNoKGEuZmVhdHVyZSl9O2wuYWg9ZnVuY3Rpb24oYSl7YS5mZWF0dXJlJiZ0aGlzLm8ucmVtb3ZlKGEuZmVhdHVyZSl9O2wuWWg9ZnVuY3Rpb24oYSl7dGhpcy5oZChhLmVsZW1lbnQpfTtsLkllPWZ1bmN0aW9uKGEpe3RoaXMuaXx8KGE9YS50YXJnZXQsY3IodGhpcyxhKSx0aGlzLmhkKGEpKX07XG5sLlpoPWZ1bmN0aW9uKGEpe2NyKHRoaXMsYS5lbGVtZW50KX07bC5laT1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRygpO2E9e2ZlYXR1cmU6YSxnZW9tZXRyeTpiLFM6W2MsY119O3RoaXMuYS5kYShiLkkoKSxhKX07bC5jaT1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRygpLGQ7dmFyIGU9MDtmb3IoZD1jLmxlbmd0aDtlPGQ7KytlKXt2YXIgZj1jW2VdO2Y9e2ZlYXR1cmU6YSxnZW9tZXRyeTpiLGRlcHRoOltlXSxpbmRleDplLFM6W2YsZl19O3RoaXMuYS5kYShiLkkoKSxmKX19O2wuSmU9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLkcoKSxkO3ZhciBlPTA7Zm9yKGQ9Yy5sZW5ndGgtMTtlPGQ7KytlKXt2YXIgZj1jLnNsaWNlKGUsZSsyKTt2YXIgZz17ZmVhdHVyZTphLGdlb21ldHJ5OmIsaW5kZXg6ZSxTOmZ9O3RoaXMuYS5kYShBYShmKSxnKX19O1xubC5iaT1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRygpLGQsZTt2YXIgZj0wO2ZvcihlPWMubGVuZ3RoO2Y8ZTsrK2Ype3ZhciBnPWNbZl07dmFyIGg9MDtmb3IoZD1nLmxlbmd0aC0xO2g8ZDsrK2gpe3ZhciBrPWcuc2xpY2UoaCxoKzIpO3ZhciBtPXtmZWF0dXJlOmEsZ2VvbWV0cnk6YixkZXB0aDpbZl0saW5kZXg6aCxTOmt9O3RoaXMuYS5kYShBYShrKSxtKX19fTtsLmZpPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5HKCksZCxlO3ZhciBmPTA7Zm9yKGU9Yy5sZW5ndGg7ZjxlOysrZil7dmFyIGc9Y1tmXTt2YXIgaD0wO2ZvcihkPWcubGVuZ3RoLTE7aDxkOysraCl7dmFyIGs9Zy5zbGljZShoLGgrMik7dmFyIG09e2ZlYXR1cmU6YSxnZW9tZXRyeTpiLGRlcHRoOltmXSxpbmRleDpoLFM6a307dGhpcy5hLmRhKEFhKGspLG0pfX19O1xubC5kaT1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRygpLGQsZSxmO3ZhciBnPTA7Zm9yKGY9Yy5sZW5ndGg7ZzxmOysrZyl7dmFyIGg9Y1tnXTt2YXIgaz0wO2ZvcihlPWgubGVuZ3RoO2s8ZTsrK2spe3ZhciBtPWhba107dmFyIG49MDtmb3IoZD1tLmxlbmd0aC0xO248ZDsrK24pe3ZhciBwPW0uc2xpY2UobixuKzIpO3ZhciBxPXtmZWF0dXJlOmEsZ2VvbWV0cnk6YixkZXB0aDpbayxnXSxpbmRleDpuLFM6cH07dGhpcy5hLmRhKEFhKHApLHEpfX19fTtsLiRoPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5qYSgpLGQ9e2ZlYXR1cmU6YSxnZW9tZXRyeTpiLGluZGV4OjAsUzpbYyxjXX07YT17ZmVhdHVyZTphLGdlb21ldHJ5OmIsaW5kZXg6MSxTOltjLGNdfTtkLlZjPWEuVmM9W2QsYV07dGhpcy5hLmRhKExhKGMpLGQpO3RoaXMuYS5kYShiLkkoKSxhKX07XG5sLmFpPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5hO2ZvcihiPTA7YjxjLmxlbmd0aDsrK2IpdGhpcy5lYVtjW2JdLkQoKV0uY2FsbCh0aGlzLGEsY1tiXSl9O2Z1bmN0aW9uIGVyKGEsYil7dmFyIGM9YS5iO2M/Yy5PKCkuWShiKTooYz1uZXcgQihuZXcgbGYoYikpLGEuYj1jLGEuQS4kKCkuVmEoYykpfWZ1bmN0aW9uIGZyKGEsYil7cmV0dXJuIGEuaW5kZXgtYi5pbmRleH1cbmZ1bmN0aW9uIFZxKGEpe2lmKCF0aGlzLnJiKGEpKXJldHVybiExOyRxKHRoaXMsYS5waXhlbCxhLm1hcCk7dmFyIGI9YS5tYXAuSmEoYS5waXhlbCk7dGhpcy5mLmxlbmd0aD0wO3RoaXMudT0hMTt2YXIgYz10aGlzLmI7aWYoYyl7dmFyIGQ9W107Yz1jLk8oKS5HKCk7dmFyIGU9QWEoW2NdKTtlPVVqKHRoaXMuYSxlKTt2YXIgZj17fTtlLnNvcnQoZnIpO2Zvcih2YXIgZz0wLGg9ZS5sZW5ndGg7ZzxoOysrZyl7dmFyIGs9ZVtnXSxtPWsuUyxuPXcoay5mZWF0dXJlKSxwPWsuZGVwdGg7cCYmKG4rPVwiLVwiK3Auam9pbihcIi1cIikpO2Zbbl18fChmW25dPUFycmF5KDIpKTtpZihcIkNpcmNsZVwiPT09ay5nZW9tZXRyeS5EKCkmJjE9PT1rLmluZGV4KW09Z3IoYixrKSxyZShtLGMpJiYhZltuXVswXSYmKHRoaXMuZi5wdXNoKFtrLDBdKSxmW25dWzBdPWspO2Vsc2UgaWYocmUobVswXSxjKSYmIWZbbl1bMF0pdGhpcy5mLnB1c2goW2ssMF0pLGZbbl1bMF09aztlbHNlIGlmKHJlKG1bMV0sYykmJlxuIWZbbl1bMV0pe2lmKFwiTGluZVN0cmluZ1wiIT09ay5nZW9tZXRyeS5EKCkmJlwiTXVsdGlMaW5lU3RyaW5nXCIhPT1rLmdlb21ldHJ5LkQoKXx8IWZbbl1bMF18fDAhPT1mW25dWzBdLmluZGV4KXRoaXMuZi5wdXNoKFtrLDFdKSxmW25dWzFdPWt9ZWxzZSB0aGlzLnFiKGEpJiZ3KG0paW4gdGhpcy5IYSYmIWZbbl1bMF0mJiFmW25dWzFdJiZkLnB1c2goW2ssY10pfWQubGVuZ3RoJiZhcih0aGlzLGEpO2ZvcihhPWQubGVuZ3RoLTE7MDw9YTstLWEpdGhpcy5oaC5hcHBseSh0aGlzLGRbYV0pfXJldHVybiEhdGhpcy5ifVxuZnVuY3Rpb24gV3EoYSl7dGhpcy5KPSExO2FyKHRoaXMsYSk7YT1hLmNvb3JkaW5hdGU7Zm9yKHZhciBiPTAsYz10aGlzLmYubGVuZ3RoO2I8YzsrK2Ipe3ZhciBkPXRoaXMuZltiXSxlPWRbMF0sZj1lLmRlcHRoLGc9ZS5nZW9tZXRyeSxoPWUuUztmb3IoZD1kWzFdO2EubGVuZ3RoPGcuZ2EoKTspYS5wdXNoKGhbZF1bYS5sZW5ndGhdKTtzd2l0Y2goZy5EKCkpe2Nhc2UgXCJQb2ludFwiOnZhciBrPWE7aFswXT1oWzFdPWE7YnJlYWs7Y2FzZSBcIk11bHRpUG9pbnRcIjprPWcuRygpO2tbZS5pbmRleF09YTtoWzBdPWhbMV09YTticmVhaztjYXNlIFwiTGluZVN0cmluZ1wiOms9Zy5HKCk7a1tlLmluZGV4K2RdPWE7aFtkXT1hO2JyZWFrO2Nhc2UgXCJNdWx0aUxpbmVTdHJpbmdcIjprPWcuRygpO2tbZlswXV1bZS5pbmRleCtkXT1hO2hbZF09YTticmVhaztjYXNlIFwiUG9seWdvblwiOms9Zy5HKCk7a1tmWzBdXVtlLmluZGV4K2RdPWE7aFtkXT1hO2JyZWFrO2Nhc2UgXCJNdWx0aVBvbHlnb25cIjprPWcuRygpO1xua1tmWzFdXVtmWzBdXVtlLmluZGV4K2RdPWE7aFtkXT1hO2JyZWFrO2Nhc2UgXCJDaXJjbGVcIjpoWzBdPWhbMV09YSwwPT09ZS5pbmRleD8odGhpcy5pPSEwLGcuT2EoYSkpOih0aGlzLmk9ITAsZy5rZih2ZShnLmphKCksYSkpKSx0aGlzLmk9ITF9ayYmKGU9ZyxmPWssdGhpcy5pPSEwLGUuWShmKSx0aGlzLmk9ITEpfWVyKHRoaXMsYSl9ZnVuY3Rpb24gWXEoYSl7Zm9yKHZhciBiLGMsZD10aGlzLmYubGVuZ3RoLTE7MDw9ZDstLWQpaWYoYj10aGlzLmZbZF1bMF0sYz1iLmdlb21ldHJ5LFwiQ2lyY2xlXCI9PT1jLkQoKSl7dmFyIGU9Yy5qYSgpLGY9Yi5WY1swXTtiPWIuVmNbMV07Zi5TWzBdPWYuU1sxXT1lO2IuU1swXT1iLlNbMV09ZTtTaih0aGlzLmEsTGEoZSksZik7U2oodGhpcy5hLGMuSSgpLGIpfWVsc2UgU2oodGhpcy5hLEFhKGIuUyksYik7dGhpcy51JiYodGhpcy5sKG5ldyBicihcIm1vZGlmeWVuZFwiLHRoaXMubyxhKSksdGhpcy51PSExKTtyZXR1cm4hMX1cbmZ1bmN0aW9uIFhxKGEpe2lmKCEoYSBpbnN0YW5jZW9mIHFkKSlyZXR1cm4hMDt0aGlzLks9YTswPGEubWFwLlooKS5hWzFdfHxcInBvaW50ZXJtb3ZlXCIhPWEudHlwZXx8dGhpcy5CfHwodGhpcy54YT1hLnBpeGVsLCRxKHRoaXMsYS5waXhlbCxhLm1hcCkpO2lmKHRoaXMuYiYmdGhpcy5wYihhKSl7aWYoXCJzaW5nbGVjbGlja1wiPT1hLnR5cGUmJnRoaXMuSil2YXIgYj0hMDtlbHNlIGlmKHRoaXMuSyYmXCJwb2ludGVyZHJhZ1wiIT10aGlzLksudHlwZSl7dmFyIGM9dGhpcy5LO2FyKHRoaXMsYyk7dmFyIGQ9dGhpcy5mLGU9e30sZixnO2ZvcihnPWQubGVuZ3RoLTE7MDw9ZzstLWcpe3ZhciBoPWRbZ107dmFyIGs9aFswXTtiPXcoay5mZWF0dXJlKTtrLmRlcHRoJiYoYis9XCItXCIray5kZXB0aC5qb2luKFwiLVwiKSk7YiBpbiBlfHwoZVtiXT17fSk7MD09PWhbMV0/KGVbYl0ucmlnaHQ9ayxlW2JdLmluZGV4PWsuaW5kZXgpOjE9PWhbMV0mJihlW2JdLmxlZnQ9ayxlW2JdLmluZGV4PWsuaW5kZXgrXG4xKX1mb3IoYiBpbiBlKXt2YXIgbT1lW2JdLnJpZ2h0O3ZhciBuPWVbYl0ubGVmdDtnPWVbYl0uaW5kZXg7dmFyIHA9Zy0xO2s9dm9pZCAwIT09bj9uOm07MD5wJiYocD0wKTtoPWsuZ2VvbWV0cnk7dmFyIHE9Zj1oLkcoKTt2YXIgdD0hMTtzd2l0Y2goaC5EKCkpe2Nhc2UgXCJNdWx0aUxpbmVTdHJpbmdcIjoyPGZbay5kZXB0aFswXV0ubGVuZ3RoJiYoZltrLmRlcHRoWzBdXS5zcGxpY2UoZywxKSx0PSEwKTticmVhaztjYXNlIFwiTGluZVN0cmluZ1wiOjI8Zi5sZW5ndGgmJihmLnNwbGljZShnLDEpLHQ9ITApO2JyZWFrO2Nhc2UgXCJNdWx0aVBvbHlnb25cIjpxPXFbay5kZXB0aFsxXV07Y2FzZSBcIlBvbHlnb25cIjpxPXFbay5kZXB0aFswXV0sNDxxLmxlbmd0aCYmKGc9PXEubGVuZ3RoLTEmJihnPTApLHEuc3BsaWNlKGcsMSksdD0hMCwwPT09ZyYmKHEucG9wKCkscS5wdXNoKHFbMF0pLHA9cS5sZW5ndGgtMSkpfXQmJih0PWgsdGhpcy5pPSEwLHQuWShmKSx0aGlzLmk9ITEsZj1bXSx2b2lkIDAhPT1cbm4mJih0aGlzLmEucmVtb3ZlKG4pLGYucHVzaChuLlNbMF0pKSx2b2lkIDAhPT1tJiYodGhpcy5hLnJlbW92ZShtKSxmLnB1c2gobS5TWzFdKSksdm9pZCAwIT09biYmdm9pZCAwIT09bSYmKG49e2RlcHRoOmsuZGVwdGgsZmVhdHVyZTprLmZlYXR1cmUsZ2VvbWV0cnk6ay5nZW9tZXRyeSxpbmRleDpwLFM6Zn0sdGhpcy5hLmRhKEFhKG4uUyksbikpLGhyKHRoaXMsaCxnLGsuZGVwdGgsLTEpLHRoaXMuYiYmKHRoaXMuQS4kKCkuUWEodGhpcy5iKSx0aGlzLmI9bnVsbCksZC5sZW5ndGg9MCl9dGhpcy5sKG5ldyBicihcIm1vZGlmeWVuZFwiLHRoaXMubyxjKSk7dGhpcy51PSExO2I9ITB9ZWxzZSBiPSExO2M9Yn1cInNpbmdsZWNsaWNrXCI9PWEudHlwZSYmKHRoaXMuSj0hMSk7cmV0dXJuIElnLmNhbGwodGhpcyxhKSYmIWN9XG5mdW5jdGlvbiAkcShhLGIsYyl7ZnVuY3Rpb24gZChhLGIpe3JldHVybiBpcihlLGEpLWlyKGUsYil9dmFyIGU9Yy5KYShiKSxmPUVhKExhKGUpLGMuWigpLnphKCkqYS5mYSk7Zj1VaihhLmEsZik7aWYoMDxmLmxlbmd0aCl7Zi5zb3J0KGQpO3ZhciBnPWZbMF0saD1nLlMsaz1ncihlLGcpLG09ZWcoYyxrKSxuPXZlKGIsbSk7aWYobjw9YS5mYSl7Yj17fTtpZihcIkNpcmNsZVwiPT09Zy5nZW9tZXRyeS5EKCkmJjE9PT1nLmluZGV4KWEubGE9ITAsZXIoYSxrKTtlbHNlIGZvcihuPWVnKGMsaFswXSksZz1lZyhjLGhbMV0pLGM9dWUobSxuKSxtPXVlKG0sZyksbj1NYXRoLnNxcnQoTWF0aC5taW4oYyxtKSksYS5sYT1uPD1hLmZhLGEubGEmJihrPWM+bT9oWzFdOmhbMF0pLGVyKGEsayksbT0xLGM9Zi5sZW5ndGg7bTxjOysrbSlpZihrPWZbbV0uUyxyZShoWzBdLGtbMF0pJiZyZShoWzFdLGtbMV0pfHxyZShoWzBdLGtbMV0pJiZyZShoWzFdLGtbMF0pKWJbdyhrKV09ITA7ZWxzZSBicmVhaztcbmJbdyhoKV09ITA7YS5IYT1iO3JldHVybn19YS5iJiYoYS5BLiQoKS5RYShhLmIpLGEuYj1udWxsKX1mdW5jdGlvbiBpcihhLGIpe3ZhciBjPWIuZ2VvbWV0cnk7cmV0dXJuXCJDaXJjbGVcIj09PWMuRCgpJiYxPT09Yi5pbmRleD8oYT11ZShjLmphKCksYSksYz1NYXRoLnNxcnQoYSktYy5KYigpLGMqYyk6d2UoYSxiLlMpfWZ1bmN0aW9uIGdyKGEsYil7dmFyIGM9Yi5nZW9tZXRyeTtcIkNpcmNsZVwiPT09Yy5EKCkmJjE9PT1iLmluZGV4PyhiPVtOYU4sTmFOXSxjLlBhKGFbMF0sYVsxXSxiLEluZmluaXR5KSxhPWIpOmE9cWUoYSxiLlMpO3JldHVybiBhfVxubC5oaD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLlMsZD1hLmZlYXR1cmUsZT1hLmdlb21ldHJ5LGY9YS5kZXB0aCxnPWEuaW5kZXgsaDtiLmxlbmd0aDxlLmdhKCk7KWIucHVzaCgwKTtzd2l0Y2goZS5EKCkpe2Nhc2UgXCJNdWx0aUxpbmVTdHJpbmdcIjpoPWUuRygpO2hbZlswXV0uc3BsaWNlKGcrMSwwLGIpO2JyZWFrO2Nhc2UgXCJQb2x5Z29uXCI6aD1lLkcoKTtoW2ZbMF1dLnNwbGljZShnKzEsMCxiKTticmVhaztjYXNlIFwiTXVsdGlQb2x5Z29uXCI6aD1lLkcoKTtoW2ZbMV1dW2ZbMF1dLnNwbGljZShnKzEsMCxiKTticmVhaztjYXNlIFwiTGluZVN0cmluZ1wiOmg9ZS5HKCk7aC5zcGxpY2UoZysxLDAsYik7YnJlYWs7ZGVmYXVsdDpyZXR1cm59dGhpcy5pPSEwO2UuWShoKTt0aGlzLmk9ITE7aD10aGlzLmE7aC5yZW1vdmUoYSk7aHIodGhpcyxlLGcsZiwxKTthPXtTOltjWzBdLGJdLGZlYXR1cmU6ZCxnZW9tZXRyeTplLGRlcHRoOmYsaW5kZXg6Z307aC5kYShBYShhLlMpLGEpO3RoaXMuZi5wdXNoKFthLFxuMV0pO2I9e1M6W2IsY1sxXV0sZmVhdHVyZTpkLGdlb21ldHJ5OmUsZGVwdGg6ZixpbmRleDpnKzF9O2guZGEoQWEoYi5TKSxiKTt0aGlzLmYucHVzaChbYiwwXSk7dGhpcy5KPSEwfTtmdW5jdGlvbiBocihhLGIsYyxkLGUpe1dqKGEuYSxiLkkoKSxmdW5jdGlvbihhKXthLmdlb21ldHJ5PT09YiYmKHZvaWQgMD09PWR8fHZvaWQgMD09PWEuZGVwdGh8fFZiKGEuZGVwdGgsZCkpJiZhLmluZGV4PmMmJihhLmluZGV4Kz1lKX0pfWZ1bmN0aW9uIFpxKCl7dmFyIGE9R2ooKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5Qb2ludH19ZnVuY3Rpb24gYnIoYSxiLGMpe0djLmNhbGwodGhpcyxhKTt0aGlzLmZlYXR1cmVzPWI7dGhpcy5tYXBCcm93c2VyRXZlbnQ9Y312KGJyLEdjKTtmdW5jdGlvbiBqcihhKXt0Zy5jYWxsKHRoaXMse2hhbmRsZUV2ZW50OmtyfSk7YT1hP2E6e307dGhpcy51PWEuY29uZGl0aW9uP2EuY29uZGl0aW9uOkJnO3RoaXMuQj1hLmFkZENvbmRpdGlvbj9hLmFkZENvbmRpdGlvbjpIZTt0aGlzLk09YS5yZW1vdmVDb25kaXRpb24/YS5yZW1vdmVDb25kaXRpb246SGU7dGhpcy5YPWEudG9nZ2xlQ29uZGl0aW9uP2EudG9nZ2xlQ29uZGl0aW9uOkRnO3RoaXMubz1hLm11bHRpP2EubXVsdGk6ITE7dGhpcy5nPWEuZmlsdGVyP2EuZmlsdGVyOkdlO3RoaXMuZj1hLmhpdFRvbGVyYW5jZT9hLmhpdFRvbGVyYW5jZTowO3RoaXMuYT1uZXcgdHEoe3NvdXJjZTpuZXcgdnEoe3VzZVNwYXRpYWxJbmRleDohMSxmZWF0dXJlczphLmZlYXR1cmVzLHdyYXBYOmEud3JhcFh9KSxzdHlsZTphLnN0eWxlP2Euc3R5bGU6bHIoKSx1cGRhdGVXaGlsZUFuaW1hdGluZzohMCx1cGRhdGVXaGlsZUludGVyYWN0aW5nOiEwfSk7aWYoYS5sYXllcnMpaWYoXCJmdW5jdGlvblwiPT09XG50eXBlb2YgYS5sYXllcnMpYT1hLmxheWVycztlbHNle3ZhciBiPWEubGF5ZXJzO2E9ZnVuY3Rpb24oYSl7cmV0dXJuIDA8PWIuaW5kZXhPZihhKX19ZWxzZSBhPUdlO3RoaXMuaT1hO3RoaXMuYj17fTthPXRoaXMuYS4kKCkuZzt6KGEsXCJhZGRcIix0aGlzLkEsdGhpcyk7eihhLFwicmVtb3ZlXCIsdGhpcy5LLHRoaXMpfXYoanIsdGcpO2pyLnByb3RvdHlwZS5KPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS4kKCkuZ307XG5mdW5jdGlvbiBrcihhKXtpZighdGhpcy51KGEpKXJldHVybiEwO3ZhciBiPXRoaXMuQihhKSxjPXRoaXMuTShhKSxkPXRoaXMuWChhKSxlPSFiJiYhYyYmIWQsZj1hLm1hcCxnPXRoaXMuYS4kKCkuZyxoPVtdLGs9W107aWYoZSl7YmIodGhpcy5iKTtmLldjKGEucGl4ZWwsZnVuY3Rpb24oYSxiKXtpZih0aGlzLmcoYSxiKSlyZXR1cm4gay5wdXNoKGEpLGE9dyhhKSx0aGlzLmJbYV09YiwhdGhpcy5vfS5iaW5kKHRoaXMpLHtsYXllckZpbHRlcjp0aGlzLmksaGl0VG9sZXJhbmNlOnRoaXMuZn0pO2ZvcihlPWcuZmIoKS0xOzA8PWU7LS1lKXtmPWcub2UoZSk7dmFyIG09ay5pbmRleE9mKGYpOy0xPG0/ay5zcGxpY2UobSwxKTooZy5yZW1vdmUoZiksaC5wdXNoKGYpKX0wIT09ay5sZW5ndGgmJlZjKGcsayl9ZWxzZXtmLldjKGEucGl4ZWwsZnVuY3Rpb24oYSxlKXtpZih0aGlzLmcoYSxlKSlyZXR1cm4hYiYmIWR8fDA8PWcuYS5pbmRleE9mKGEpPyhjfHxkKSYmMDw9Zy5hLmluZGV4T2YoYSkmJlxuKGgucHVzaChhKSxlPXcoYSksZGVsZXRlIHRoaXMuYltlXSk6KGsucHVzaChhKSxhPXcoYSksdGhpcy5iW2FdPWUpLCF0aGlzLm99LmJpbmQodGhpcykse2xheWVyRmlsdGVyOnRoaXMuaSxoaXRUb2xlcmFuY2U6dGhpcy5mfSk7Zm9yKGU9aC5sZW5ndGgtMTswPD1lOy0tZSlnLnJlbW92ZShoW2VdKTtWYyhnLGspfSgwPGsubGVuZ3RofHwwPGgubGVuZ3RoKSYmdGhpcy5sKG5ldyBtcihucixrLGgsYSkpO3JldHVyblwicG9pbnRlcm1vdmVcIj09YS50eXBlfWpyLnByb3RvdHlwZS5zZXRNYXA9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5DLGM9dGhpcy5hLiQoKS5nO2ImJmMuZm9yRWFjaChiLnZmLGIpO3RnLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLGEpO3RoaXMuYS5zZXRNYXAoYSk7YSYmYy5mb3JFYWNoKGEucmYsYSl9O1xuZnVuY3Rpb24gbHIoKXt2YXIgYT1HaigpO1ViKGEuUG9seWdvbixhLkxpbmVTdHJpbmcpO1ViKGEuR2VvbWV0cnlDb2xsZWN0aW9uLGEuTGluZVN0cmluZyk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiLk8oKT9hW2IuTygpLkQoKV06bnVsbH19anIucHJvdG90eXBlLkE9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5DO2ImJmIucmYoYS5lbGVtZW50KX07anIucHJvdG90eXBlLks9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5DO2ImJmIudmYoYS5lbGVtZW50KX07ZnVuY3Rpb24gbXIoYSxiLGMsZCl7R2MuY2FsbCh0aGlzLGEpO3RoaXMuc2VsZWN0ZWQ9Yjt0aGlzLmRlc2VsZWN0ZWQ9Yzt0aGlzLm1hcEJyb3dzZXJFdmVudD1kfXYobXIsR2MpO3ZhciBucj1cInNlbGVjdFwiO2Z1bmN0aW9uIG9yKGEpe0hnLmNhbGwodGhpcyx7aGFuZGxlRXZlbnQ6cHIsaGFuZGxlRG93bkV2ZW50OkdlLGhhbmRsZVVwRXZlbnQ6cXJ9KTthPWE/YTp7fTt0aGlzLmk9YS5zb3VyY2U/YS5zb3VyY2U6bnVsbDt0aGlzLks9dm9pZCAwIT09YS52ZXJ0ZXg/YS52ZXJ0ZXg6ITA7dGhpcy51PXZvaWQgMCE9PWEuZWRnZT9hLmVkZ2U6ITA7dGhpcy5mPWEuZmVhdHVyZXM/YS5mZWF0dXJlczpudWxsO3RoaXMuZmE9W107dGhpcy5BPXt9O3RoaXMuTT17fTt0aGlzLm89e307dGhpcy5KPW51bGw7dGhpcy5iPXZvaWQgMCE9PWEucGl4ZWxUb2xlcmFuY2U/YS5waXhlbFRvbGVyYW5jZToxMDt0aGlzLmxhPXJyLmJpbmQodGhpcyk7dGhpcy5hPW5ldyBSajt0aGlzLmVhPXtQb2ludDp0aGlzLm1pLExpbmVTdHJpbmc6dGhpcy5NZSxMaW5lYXJSaW5nOnRoaXMuTWUsUG9seWdvbjp0aGlzLm5pLE11bHRpUG9pbnQ6dGhpcy5raSxNdWx0aUxpbmVTdHJpbmc6dGhpcy5qaSxNdWx0aVBvbHlnb246dGhpcy5saSxcbkdlb21ldHJ5Q29sbGVjdGlvbjp0aGlzLmlpLENpcmNsZTp0aGlzLmhpfX12KG9yLEhnKTtsPW9yLnByb3RvdHlwZTtsLlZhPWZ1bmN0aW9uKGEsYil7Yj12b2lkIDAhPT1iP2I6ITA7dmFyIGM9dyhhKSxkPWEuTygpO2lmKGQpe3ZhciBlPXRoaXMuZWFbZC5EKCldO2UmJih0aGlzLk1bY109ZC5JKEJhKCkpLGUuY2FsbCh0aGlzLGEsZCkpfWImJih0aGlzLkFbY109eihhLFwiY2hhbmdlXCIsdGhpcy5naSx0aGlzKSl9O2wudWc9ZnVuY3Rpb24oYSl7dGhpcy5WYShhKX07bC52Zz1mdW5jdGlvbihhKXt0aGlzLlFhKGEpfTtsLktlPWZ1bmN0aW9uKGEpe2lmKGEgaW5zdGFuY2VvZiBBcSl2YXIgYj1hLmZlYXR1cmU7ZWxzZSBhIGluc3RhbmNlb2YgWWMmJihiPWEuZWxlbWVudCk7dGhpcy5WYShiKX07bC5MZT1mdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgQXEpdmFyIGI9YS5mZWF0dXJlO2Vsc2UgYSBpbnN0YW5jZW9mIFljJiYoYj1hLmVsZW1lbnQpO3RoaXMuUWEoYil9O1xubC5naT1mdW5jdGlvbihhKXthPWEudGFyZ2V0O2lmKHRoaXMuQil7dmFyIGI9dyhhKTtiIGluIHRoaXMub3x8KHRoaXMub1tiXT1hKX1lbHNlIHRoaXMud2YoYSl9O2wuUWE9ZnVuY3Rpb24oYSxiKXtiPXZvaWQgMCE9PWI/YjohMDt2YXIgYz13KGEpLGQ9dGhpcy5NW2NdO2lmKGQpe3ZhciBlPXRoaXMuYSxmPVtdO1dqKGUsZCxmdW5jdGlvbihiKXthPT09Yi5mZWF0dXJlJiZmLnB1c2goYil9KTtmb3IoZD1mLmxlbmd0aC0xOzA8PWQ7LS1kKWUucmVtb3ZlKGZbZF0pfWImJih2Yyh0aGlzLkFbY10pLGRlbGV0ZSB0aGlzLkFbY10pfTtcbmwuc2V0TWFwPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuQyxjPXRoaXMuZmEsZDt0aGlzLmY/ZD10aGlzLmY6dGhpcy5pJiYoZD10aGlzLmkubWMoKSk7YiYmKGMuZm9yRWFjaCh2YyksYy5sZW5ndGg9MCxkLmZvckVhY2godGhpcy52Zyx0aGlzKSk7SGcucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsYSk7YSYmKHRoaXMuZj9jLnB1c2goeih0aGlzLmYsXCJhZGRcIix0aGlzLktlLHRoaXMpLHoodGhpcy5mLFwicmVtb3ZlXCIsdGhpcy5MZSx0aGlzKSk6dGhpcy5pJiZjLnB1c2goeih0aGlzLmksXCJhZGRmZWF0dXJlXCIsdGhpcy5LZSx0aGlzKSx6KHRoaXMuaSxcInJlbW92ZWZlYXR1cmVcIix0aGlzLkxlLHRoaXMpKSxkLmZvckVhY2godGhpcy51Zyx0aGlzKSl9O2wubWI9SGU7XG5mdW5jdGlvbiBzcihhLGIsYyxkKXt2YXIgZT1kLkphKFtiWzBdLWEuYixiWzFdK2EuYl0pLGY9ZC5KYShbYlswXSthLmIsYlsxXS1hLmJdKTtlPUFhKFtlLGZdKTt2YXIgZz1VaihhLmEsZSk7YS5LJiYhYS51JiYoZz1nLmZpbHRlcihmdW5jdGlvbihhKXtyZXR1cm5cIkNpcmNsZVwiIT09YS5mZWF0dXJlLk8oKS5EKCl9KSk7dmFyIGg9ITE7ZT0hMTt2YXIgaz1mPW51bGw7aWYoMDxnLmxlbmd0aCl7YS5KPWM7Zy5zb3J0KGEubGEpO3ZhciBtPWdbMF0uUztoPVwiQ2lyY2xlXCI9PT1nWzBdLmZlYXR1cmUuTygpLkQoKTtpZihhLksmJiFhLnUpe2lmKGM9ZWcoZCxtWzBdKSxoPWVnKGQsbVsxXSksYz11ZShiLGMpLGI9dWUoYixoKSxoPU1hdGguc3FydChNYXRoLm1pbihjLGIpKSxoPWg8PWEuYillPSEwLGY9Yz5iP21bMV06bVswXSxrPWVnKGQsZil9ZWxzZSBhLnUmJihmPWg/cGUoYyxnWzBdLmZlYXR1cmUuTygpKTpxZShjLG0pLGs9ZWcoZCxmKSx2ZShiLGspPD1hLmImJihlPSEwLGEuSyYmXG4haCYmKGM9ZWcoZCxtWzBdKSxoPWVnKGQsbVsxXSksYz11ZShrLGMpLGI9dWUoayxoKSxoPU1hdGguc3FydChNYXRoLm1pbihjLGIpKSxoPWg8PWEuYikpKSYmKGY9Yz5iP21bMV06bVswXSxrPWVnKGQsZikpO2UmJihrPVtNYXRoLnJvdW5kKGtbMF0pLE1hdGgucm91bmQoa1sxXSldKX1yZXR1cm57aGo6ZSx2ZXJ0ZXg6ZixxajprfX1sLndmPWZ1bmN0aW9uKGEpe3RoaXMuUWEoYSwhMSk7dGhpcy5WYShhLCExKX07XG5sLmhpPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5nYSgpLGQ9Yi5WLGU9bmV3IEEobnVsbCxkKTtjKj0zMztmb3IodmFyIGY9QXJyYXkoYyksZz0wO2c8YztnKyspZltnXT0wO2UuTihkLGYsW2YubGVuZ3RoXSk7ZD1iLmphKCk7Yj1iLkpiKCk7Yz1lLmFhKCk7Zj1lLlY7Zz1lLmdhKCk7Zm9yKHZhciBoPWUuTWEoKSxrPWMubGVuZ3RoL2ctMSxtLG4scD0wO3A8PWs7KytwKW49cCpnLG09MCsyKnZhKHAsaykqTWF0aC5QSS9rLGNbbl09ZFswXStiKk1hdGguY29zKG0pLGNbbisxXT1kWzFdK2IqTWF0aC5zaW4obSk7ZS5OKGYsYyxoKTtlPWUuRygpWzBdO2Q9MDtmb3IoYj1lLmxlbmd0aC0xO2Q8YjsrK2QpYz1lLnNsaWNlKGQsZCsyKSxmPXtmZWF0dXJlOmEsUzpjfSx0aGlzLmEuZGEoQWEoYyksZil9O2wuaWk9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmE7Zm9yKGI9MDtiPGMubGVuZ3RoOysrYil7dmFyIGQ9dGhpcy5lYVtjW2JdLkQoKV07ZCYmZC5jYWxsKHRoaXMsYSxjW2JdKX19O1xubC5NZT1mdW5jdGlvbihhLGIpe2I9Yi5HKCk7dmFyIGM7dmFyIGQ9MDtmb3IoYz1iLmxlbmd0aC0xO2Q8YzsrK2Qpe3ZhciBlPWIuc2xpY2UoZCxkKzIpO3ZhciBmPXtmZWF0dXJlOmEsUzplfTt0aGlzLmEuZGEoQWEoZSksZil9fTtsLmppPWZ1bmN0aW9uKGEsYil7Yj1iLkcoKTt2YXIgYyxkO3ZhciBlPTA7Zm9yKGQ9Yi5sZW5ndGg7ZTxkOysrZSl7dmFyIGY9YltlXTt2YXIgZz0wO2ZvcihjPWYubGVuZ3RoLTE7ZzxjOysrZyl7dmFyIGg9Zi5zbGljZShnLGcrMik7dmFyIGs9e2ZlYXR1cmU6YSxTOmh9O3RoaXMuYS5kYShBYShoKSxrKX19fTtsLmtpPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5HKCksZDt2YXIgZT0wO2ZvcihkPWMubGVuZ3RoO2U8ZDsrK2Upe3ZhciBmPWNbZV07Zj17ZmVhdHVyZTphLFM6W2YsZl19O3RoaXMuYS5kYShiLkkoKSxmKX19O1xubC5saT1mdW5jdGlvbihhLGIpe2I9Yi5HKCk7dmFyIGMsZCxlO3ZhciBmPTA7Zm9yKGU9Yi5sZW5ndGg7ZjxlOysrZil7dmFyIGc9YltmXTt2YXIgaD0wO2ZvcihkPWcubGVuZ3RoO2g8ZDsrK2gpe3ZhciBrPWdbaF07dmFyIG09MDtmb3IoYz1rLmxlbmd0aC0xO208YzsrK20pe3ZhciBuPWsuc2xpY2UobSxtKzIpO3ZhciBwPXtmZWF0dXJlOmEsUzpufTt0aGlzLmEuZGEoQWEobikscCl9fX19O2wubWk9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLkcoKTthPXtmZWF0dXJlOmEsUzpbYyxjXX07dGhpcy5hLmRhKGIuSSgpLGEpfTtsLm5pPWZ1bmN0aW9uKGEsYil7Yj1iLkcoKTt2YXIgYyxkO3ZhciBlPTA7Zm9yKGQ9Yi5sZW5ndGg7ZTxkOysrZSl7dmFyIGY9YltlXTt2YXIgZz0wO2ZvcihjPWYubGVuZ3RoLTE7ZzxjOysrZyl7dmFyIGg9Zi5zbGljZShnLGcrMik7dmFyIGs9e2ZlYXR1cmU6YSxTOmh9O3RoaXMuYS5kYShBYShoKSxrKX19fTtcbmZ1bmN0aW9uIHByKGEpe3ZhciBiPXNyKHRoaXMsYS5waXhlbCxhLmNvb3JkaW5hdGUsYS5tYXApO2IuaGomJihhLmNvb3JkaW5hdGU9Yi52ZXJ0ZXguc2xpY2UoMCwyKSxhLnBpeGVsPWIucWopO3JldHVybiBJZy5jYWxsKHRoaXMsYSl9ZnVuY3Rpb24gcXIoKXt2YXIgYT1jYih0aGlzLm8pO2EubGVuZ3RoJiYoYS5mb3JFYWNoKHRoaXMud2YsdGhpcyksdGhpcy5vPXt9KTtyZXR1cm4hMX1mdW5jdGlvbiBycihhLGIpe3JldHVybiB3ZSh0aGlzLkosYS5TKS13ZSh0aGlzLkosYi5TKX07ZnVuY3Rpb24gdHIoYSl7YT1hP2E6e307dmFyIGI9WmEoe30sYSk7ZGVsZXRlIGIucHJlbG9hZDtkZWxldGUgYi51c2VJbnRlcmltVGlsZXNPbkVycm9yO2lnLmNhbGwodGhpcyxiKTt0aGlzLnNldChcInByZWxvYWRcIix2b2lkIDAhPT1hLnByZWxvYWQ/YS5wcmVsb2FkOjApO3RoaXMuc2V0KFwidXNlSW50ZXJpbVRpbGVzT25FcnJvclwiLHZvaWQgMCE9PWEudXNlSW50ZXJpbVRpbGVzT25FcnJvcj9hLnVzZUludGVyaW1UaWxlc09uRXJyb3I6ITApO3RoaXMudHlwZT1cIlRJTEVcIn12KHRyLGlnKTt0ci5wcm90b3R5cGUuQj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInByZWxvYWRcIil9O3RyLnByb3RvdHlwZS51PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwidXNlSW50ZXJpbVRpbGVzT25FcnJvclwiKX07ZnVuY3Rpb24gdXIoYSl7YT1hP2E6e307dmFyIGI9WmEoe30sYSk7ZGVsZXRlIGIucHJlbG9hZDtkZWxldGUgYi51c2VJbnRlcmltVGlsZXNPbkVycm9yO3RxLmNhbGwodGhpcyxiKTt0aGlzLnNldChcInByZWxvYWRcIixhLnByZWxvYWQ/YS5wcmVsb2FkOjApO3RoaXMuc2V0KFwidXNlSW50ZXJpbVRpbGVzT25FcnJvclwiLGEudXNlSW50ZXJpbVRpbGVzT25FcnJvcj9hLnVzZUludGVyaW1UaWxlc09uRXJyb3I6ITApO2I9YS5yZW5kZXJNb2RlO3godm9pZCAwPT1ifHxcImltYWdlXCI9PWJ8fFwiaHlicmlkXCI9PWJ8fFwidmVjdG9yXCI9PWIsMjgpO2EuZGVjbHV0dGVyJiZcImltYWdlXCI9PWImJihiPVwiaHlicmlkXCIpO3RoaXMubz1ifHxcImh5YnJpZFwiO3RoaXMudHlwZT1cIlZFQ1RPUl9USUxFXCJ9dih1cix0cSk7dXIucHJvdG90eXBlLkI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJwcmVsb2FkXCIpfTt1ci5wcm90b3R5cGUudT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInVzZUludGVyaW1UaWxlc09uRXJyb3JcIil9O2Z1bmN0aW9uIHZyKGEsYil7dmFyIGM9L1xce3pcXH0vZyxkPS9cXHt4XFx9L2csZT0vXFx7eVxcfS9nLGY9L1xcey15XFx9L2c7cmV0dXJuIGZ1bmN0aW9uKGcpe2lmKGcpcmV0dXJuIGEucmVwbGFjZShjLGdbMF0udG9TdHJpbmcoKSkucmVwbGFjZShkLGdbMV0udG9TdHJpbmcoKSkucmVwbGFjZShlLGZ1bmN0aW9uKCl7cmV0dXJuKC1nWzJdLTEpLnRvU3RyaW5nKCl9KS5yZXBsYWNlKGYsZnVuY3Rpb24oKXt2YXIgYT1iLmM/Yi5jW2dbMF1dOm51bGw7eChhLDU1KTtyZXR1cm4oYS5VLWEuUisxK2dbMl0pLnRvU3RyaW5nKCl9KX19ZnVuY3Rpb24gd3IoYSxiKXtmb3IodmFyIGM9YS5sZW5ndGgsZD1BcnJheShjKSxlPTA7ZTxjOysrZSlkW2VdPXZyKGFbZV0sYik7cmV0dXJuIHhyKGQpfWZ1bmN0aW9uIHhyKGEpe3JldHVybiAxPT09YS5sZW5ndGg/YVswXTpmdW5jdGlvbihiLGMsZCl7aWYoYilyZXR1cm4gYVt2YSgoYlsxXTw8YlswXSkrYlsyXSxhLmxlbmd0aCldKGIsYyxkKX19XG5mdW5jdGlvbiB5cigpe31mdW5jdGlvbiB6cihhKXt2YXIgYj1bXSxjPS9cXHsoW2Etel0pLShbYS16XSlcXH0vLmV4ZWMoYSk7aWYoYyl7dmFyIGQ9Y1syXS5jaGFyQ29kZUF0KDApLGU7Zm9yKGU9Y1sxXS5jaGFyQ29kZUF0KDApO2U8PWQ7KytlKWIucHVzaChhLnJlcGxhY2UoY1swXSxTdHJpbmcuZnJvbUNoYXJDb2RlKGUpKSk7cmV0dXJuIGJ9aWYoYz1jPS9cXHsoXFxkKyktKFxcZCspXFx9Ly5leGVjKGEpKXtkPXBhcnNlSW50KGNbMl0sMTApO2ZvcihlPXBhcnNlSW50KGNbMV0sMTApO2U8PWQ7ZSsrKWIucHVzaChhLnJlcGxhY2UoY1swXSxlLnRvU3RyaW5nKCkpKTtyZXR1cm4gYn1iLnB1c2goYSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIEFyKGEpe3ZoLmNhbGwodGhpcyxhKX12KEFyLHZoKTtBci5wcm90b3R5cGUuRGI9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGM7dGhpcy5iPnRoaXMuaGlnaFdhdGVyTWFyazspe2I9dGhpcy5jLm9iO2M9Yi50YVswXS50b1N0cmluZygpO3ZhciBkO2lmKGQ9YyBpbiBhKWI9Yi50YSxkPXFhKGFbY10sYlsxXSxiWzJdKTtpZihkKWJyZWFrO2Vsc2UgQ2ModGhpcy5wb3AoKSl9fTtmdW5jdGlvbiBCcihhKXtpZigwIT09YS5iKXt2YXIgYj1hLmEuZWIuc3BsaXQoXCIvXCIpLm1hcChOdW1iZXIpWzBdO2EuZm9yRWFjaChmdW5jdGlvbihhKXtpZihhLnRhWzBdIT09Yil7dmFyIGM9YS50YTt0aGlzLnJlbW92ZShjWzBdK1wiL1wiK2NbMV0rXCIvXCIrY1syXSk7Q2MoYSl9fSxhKX19O2Z1bmN0aW9uIENyKGEpe1hqLmNhbGwodGhpcyx7YXR0cmlidXRpb25zOmEuYXR0cmlidXRpb25zLGV4dGVudDphLmV4dGVudCxsb2dvOmEubG9nbyxwcm9qZWN0aW9uOmEucHJvamVjdGlvbixzdGF0ZTphLnN0YXRlLHdyYXBYOmEud3JhcFh9KTt0aGlzLkhhPXZvaWQgMCE9PWEub3BhcXVlP2Eub3BhcXVlOiExO3RoaXMuS2E9dm9pZCAwIT09YS50aWxlUGl4ZWxSYXRpbz9hLnRpbGVQaXhlbFJhdGlvOjE7dGhpcy50aWxlR3JpZD12b2lkIDAhPT1hLnRpbGVHcmlkP2EudGlsZUdyaWQ6bnVsbDt0aGlzLmE9bmV3IEFyKGEuY2FjaGVTaXplKTt0aGlzLmI9WzAsMF07dGhpcy5lYj1cIlwiO3RoaXMuWD17dHJhbnNpdGlvbjphLnRyYW5zaXRpb259fXYoQ3IsWGopO2w9Q3IucHJvdG90eXBlO2wuamQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmE7cmV0dXJuIGEuYj5hLmhpZ2hXYXRlck1hcmt9O2wuRGI9ZnVuY3Rpb24oYSxiKXsoYT10aGlzLmNjKGEpKSYmYS5EYihiKX07XG5mdW5jdGlvbiBkaShhLGIsYyxkLGUpe2E9YS5jYyhiKTtpZighYSlyZXR1cm4hMTtiPSEwO2Zvcih2YXIgZixnLGg9ZC5UO2g8PWQuVzsrK2gpZm9yKHZhciBrPWQuUjtrPD1kLlU7KytrKWY9YytcIi9cIitoK1wiL1wiK2ssZz0hMSxhLmouaGFzT3duUHJvcGVydHkoZikmJihmPWEuZ2V0KGYpLChnPTI9PT1mLnN0YXRlKSYmKGc9ITEhPT1lKGYpKSksZ3x8KGI9ITEpO3JldHVybiBifWwuYWU9ZnVuY3Rpb24oKXtyZXR1cm4gMH07ZnVuY3Rpb24gRHIoYSxiKXthLmViIT09YiYmKGEuZWI9YixhLmMoKSl9bC4kYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLkhhfTtsLnlhPWZ1bmN0aW9uKGEpe2lmKHRoaXMudGlsZUdyaWQpYT10aGlzLnRpbGVHcmlkO2Vsc2V7dmFyIGI9YS5mO2J8fChiPXJjKGEpLGEuZj1iKTthPWJ9cmV0dXJuIGF9O2wuY2M9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5DO3JldHVybiBiJiYhTWIoYixhKT9udWxsOnRoaXMuYX07bC5HYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLkthfTtcbmwuZGM9ZnVuY3Rpb24oYSxiLGMpe2M9dGhpcy55YShjKTtiPXRoaXMuR2IoYik7YT16YShsYyhjLGEpLHRoaXMuYik7cmV0dXJuIDE9PWI/YTp5YShhLGIsdGhpcy5iKX07ZnVuY3Rpb24gRXIoYSxiLGMpe3ZhciBkPXZvaWQgMCE9PWM/YzphLkM7Yz1hLnlhKGQpO2lmKGEuQiYmZC5iKXt2YXIgZT1iO2I9ZVswXTthPW5jKGMsZSk7ZD1zYyhkKTtJYShkLGFbMF0sYVsxXSk/Yj1lOihlPVhhKGQpLGFbMF0rPWUqTWF0aC5jZWlsKChkWzBdLWFbMF0pL2UpLGI9bWMoYyxhWzBdLGFbMV0sYiwhMSx2b2lkIDApKX1lPWJbMF07ZD1iWzFdO2E9YlsyXTtpZihjLm1pblpvb20+ZXx8ZT5jLm1heFpvb20pYz0hMTtlbHNle3ZhciBmPWMuSSgpO2M9KGM9Zj9kYyhjLGYsZSk6Yy5jP2MuY1tlXTpudWxsKT9xYShjLGQsYSk6ITB9cmV0dXJuIGM/YjpudWxsfWwuS2I9ZnVuY3Rpb24oKXt0aGlzLmEuY2xlYXIoKTt0aGlzLmMoKX07bC55Zj1sYTtcbmZ1bmN0aW9uIEZyKGEsYil7R2MuY2FsbCh0aGlzLGEpO3RoaXMudGlsZT1ifXYoRnIsR2MpO2Z1bmN0aW9uIEdyKGEpe0NyLmNhbGwodGhpcyx7YXR0cmlidXRpb25zOmEuYXR0cmlidXRpb25zLGNhY2hlU2l6ZTphLmNhY2hlU2l6ZSxleHRlbnQ6YS5leHRlbnQsbG9nbzphLmxvZ28sb3BhcXVlOmEub3BhcXVlLHByb2plY3Rpb246YS5wcm9qZWN0aW9uLHN0YXRlOmEuc3RhdGUsdGlsZUdyaWQ6YS50aWxlR3JpZCx0aWxlUGl4ZWxSYXRpbzphLnRpbGVQaXhlbFJhdGlvLHdyYXBYOmEud3JhcFgsdHJhbnNpdGlvbjphLnRyYW5zaXRpb259KTt0aGlzLnRpbGVMb2FkRnVuY3Rpb249YS50aWxlTG9hZEZ1bmN0aW9uO3RoaXMudGlsZVVybEZ1bmN0aW9uPXRoaXMuZz90aGlzLmcuYmluZCh0aGlzKTp5cjt0aGlzLnVybHM9bnVsbDtpZihhLnVybHMpe3ZhciBiPWEudXJsczt0aGlzLnVybHM9Yjt2YXIgYz1iLmpvaW4oXCJcXG5cIik7SHIodGhpcyx0aGlzLmc/dGhpcy5nLmJpbmQodGhpcyk6d3IoYix0aGlzLnRpbGVHcmlkKSxjKX1lbHNlIGEudXJsJiYoYj1hLnVybCxjPXRoaXMudXJscz1cbnpyKGIpLEhyKHRoaXMsdGhpcy5nP3RoaXMuZy5iaW5kKHRoaXMpOndyKGMsdGhpcy50aWxlR3JpZCksYikpO2EudGlsZVVybEZ1bmN0aW9uJiZIcih0aGlzLGEudGlsZVVybEZ1bmN0aW9uKTt0aGlzLkE9e319dihHcixDcik7R3IucHJvdG90eXBlLk09ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDt2YXIgYj13KGEpLGM9YS5zdGF0ZTtpZigxPT1jKXt0aGlzLkFbYl09ITA7dmFyIGQ9XCJ0aWxlbG9hZHN0YXJ0XCJ9ZWxzZSBiIGluIHRoaXMuQSYmKGRlbGV0ZSB0aGlzLkFbYl0sZD0zPT1jP1widGlsZWxvYWRlcnJvclwiOjI9PWN8fDU9PWM/XCJ0aWxlbG9hZGVuZFwiOnZvaWQgMCk7dm9pZCAwIT1kJiZ0aGlzLmwobmV3IEZyKGQsYSkpfTtmdW5jdGlvbiBIcihhLGIsYyl7YS50aWxlVXJsRnVuY3Rpb249YjtCcihhLmEpO1widW5kZWZpbmVkXCIhPT10eXBlb2YgYz9EcihhLGMpOmEuYygpfVxuR3IucHJvdG90eXBlLnlmPWZ1bmN0aW9uKGEsYixjKXthPWErXCIvXCIrYitcIi9cIitjO3RoaXMuYS5qLmhhc093blByb3BlcnR5KGEpJiZ0aGlzLmEuZ2V0KGEpfTtmdW5jdGlvbiBJcihhKXtHci5jYWxsKHRoaXMse2F0dHJpYnV0aW9uczphLmF0dHJpYnV0aW9ucyxjYWNoZVNpemU6YS5jYWNoZVNpemUsZXh0ZW50OmEuZXh0ZW50LGxvZ286YS5sb2dvLG9wYXF1ZTphLm9wYXF1ZSxwcm9qZWN0aW9uOmEucHJvamVjdGlvbixzdGF0ZTphLnN0YXRlLHRpbGVHcmlkOmEudGlsZUdyaWQsdGlsZUxvYWRGdW5jdGlvbjphLnRpbGVMb2FkRnVuY3Rpb24/YS50aWxlTG9hZEZ1bmN0aW9uOkpyLHRpbGVQaXhlbFJhdGlvOmEudGlsZVBpeGVsUmF0aW8sdGlsZVVybEZ1bmN0aW9uOmEudGlsZVVybEZ1bmN0aW9uLHVybDphLnVybCx1cmxzOmEudXJscyx3cmFwWDphLndyYXBYLHRyYW5zaXRpb246YS50cmFuc2l0aW9ufSk7dGhpcy5jcm9zc09yaWdpbj12b2lkIDAhPT1hLmNyb3NzT3JpZ2luP2EuY3Jvc3NPcmlnaW46bnVsbDt0aGlzLnRpbGVDbGFzcz12b2lkIDAhPT1hLnRpbGVDbGFzcz9hLnRpbGVDbGFzczpPan12KElyLEdyKTtsPUlyLnByb3RvdHlwZTtcbmwuamQ9ZnVuY3Rpb24oKXtyZXR1cm4gR3IucHJvdG90eXBlLmpkLmNhbGwodGhpcyl9O2wuRGI9ZnVuY3Rpb24oYSxiKXtHci5wcm90b3R5cGUuRGIuY2FsbCh0aGlzLGEsYil9O2wuYWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iZSgpfTtsLmJlPWZ1bmN0aW9uKCl7cmV0dXJuIDB9O2wuJGM9ZnVuY3Rpb24oYSl7cmV0dXJuIEdyLnByb3RvdHlwZS4kYy5jYWxsKHRoaXMsYSl9O2wueWE9ZnVuY3Rpb24oYSl7cmV0dXJuIEdyLnByb3RvdHlwZS55YS5jYWxsKHRoaXMsYSl9O2wuY2M9ZnVuY3Rpb24oYSl7cmV0dXJuIEdyLnByb3RvdHlwZS5jYy5jYWxsKHRoaXMsYSl9O1xuZnVuY3Rpb24gS3IoYSxiLGMsZCxlLGYsZyl7Yj1bYixjLGRdO2U9KGM9RXIoYSxiLGYpKT9hLnRpbGVVcmxGdW5jdGlvbihjLGUsZik6dm9pZCAwO2U9bmV3IGEudGlsZUNsYXNzKGIsdm9pZCAwIT09ZT8wOjQsdm9pZCAwIT09ZT9lOlwiXCIsYS5jcm9zc09yaWdpbixhLnRpbGVMb2FkRnVuY3Rpb24sYS5YKTtlLmtleT1nO3ooZSxcImNoYW5nZVwiLGEuTSxhKTtyZXR1cm4gZX1cbmwua2Q9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj10aGlzLkN8fGUsZz1hK1wiL1wiK2IrXCIvXCIrYyxoPXRoaXMuZWI7aWYodGhpcy5hLmouaGFzT3duUHJvcGVydHkoZykpe2lmKGU9dGhpcy5hLmdldChnKSxlLmtleSE9aCl7dmFyIGs9ZTtlPUtyKHRoaXMsYSxiLGMsZCxmLGgpOzA9PWsuc3RhdGU/ZS5jPWsuYzplLmM9aztpZihlLmMpe2E9ZS5jO2I9ZTtkb3tpZigyPT1hLnN0YXRlKXthLmM9bnVsbDticmVha31lbHNlIDE9PWEuc3RhdGU/Yj1hOjA9PWEuc3RhdGU/Yi5jPWEuYzpiPWE7YT1iLmN9d2hpbGUoYSl9YT10aGlzLmE7Yj1lO2EuZ2V0KGcpO2EualtnXS5vYj1ifX1lbHNlIGU9S3IodGhpcyxhLGIsYyxkLGYsaCksdGhpcy5hLnNldChnLGUpO3JldHVybiBlfTtmdW5jdGlvbiBKcihhLGIpe2EuYmEoKS5zcmM9Yn07ZnVuY3Rpb24gTHIoYSl7YT1hfHx7fTt2YXIgYj12b2lkIDAhPT1hLnByb2plY3Rpb24/YS5wcm9qZWN0aW9uOlwiRVBTRzozODU3XCIsYz12b2lkIDAhPT1hLnRpbGVHcmlkP2EudGlsZUdyaWQ6cGMoe2V4dGVudDpzYyhiKSxtYXhab29tOmEubWF4Wm9vbSxtaW5ab29tOmEubWluWm9vbSx0aWxlU2l6ZTphLnRpbGVTaXplfSk7SXIuY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YS5hdHRyaWJ1dGlvbnMsY2FjaGVTaXplOmEuY2FjaGVTaXplLGNyb3NzT3JpZ2luOmEuY3Jvc3NPcmlnaW4sbG9nbzphLmxvZ28sb3BhcXVlOmEub3BhcXVlLHByb2plY3Rpb246YixyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDphLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLHRpbGVHcmlkOmMsdGlsZUxvYWRGdW5jdGlvbjphLnRpbGVMb2FkRnVuY3Rpb24sdGlsZVBpeGVsUmF0aW86YS50aWxlUGl4ZWxSYXRpbyx0aWxlVXJsRnVuY3Rpb246YS50aWxlVXJsRnVuY3Rpb24sdXJsOmEudXJsLHVybHM6YS51cmxzLFxud3JhcFg6dm9pZCAwIT09YS53cmFwWD9hLndyYXBYOiEwLHRyYW5zaXRpb246YS50cmFuc2l0aW9ufSl9dihMcixJcik7ZnVuY3Rpb24gTXIoYSl7dnEuY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YS5hdHRyaWJ1dGlvbnMsZXh0ZW50OmEuZXh0ZW50LGxvZ286YS5sb2dvLHByb2plY3Rpb246YS5wcm9qZWN0aW9uLHdyYXBYOmEud3JhcFh9KTt0aGlzLnJlc29sdXRpb249dm9pZCAwO3RoaXMuZGlzdGFuY2U9dm9pZCAwIT09YS5kaXN0YW5jZT9hLmRpc3RhbmNlOjIwO3RoaXMuZmVhdHVyZXM9W107dGhpcy5nZW9tZXRyeUZ1bmN0aW9uPWEuZ2VvbWV0cnlGdW5jdGlvbnx8ZnVuY3Rpb24oYSl7YT1hLk8oKTt4KGEgaW5zdGFuY2VvZiBsZiwxMCk7cmV0dXJuIGF9O3RoaXMuc291cmNlPWEuc291cmNlO3RoaXMuc291cmNlLnYoXCJjaGFuZ2VcIixNci5wcm90b3R5cGUuS2IsdGhpcyl9dihNcix2cSk7TXIucHJvdG90eXBlLmVkPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnNvdXJjZS5lZChhLGIsYyk7YiE9PXRoaXMucmVzb2x1dGlvbiYmKHRoaXMuY2xlYXIoKSx0aGlzLnJlc29sdXRpb249YixOcih0aGlzKSx0aGlzLkJiKHRoaXMuZmVhdHVyZXMpKX07XG5Nci5wcm90b3R5cGUuWD1mdW5jdGlvbihhKXt0aGlzLmRpc3RhbmNlPWE7dGhpcy5LYigpfTtNci5wcm90b3R5cGUuS2I9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCk7TnIodGhpcyk7dGhpcy5CYih0aGlzLmZlYXR1cmVzKTt2cS5wcm90b3R5cGUuS2IuY2FsbCh0aGlzKX07XG5mdW5jdGlvbiBOcihhKXtpZih2b2lkIDAhPT1hLnJlc29sdXRpb24pe2EuZmVhdHVyZXMubGVuZ3RoPTA7Zm9yKHZhciBiPUJhKCksYz1hLmRpc3RhbmNlKmEucmVzb2x1dGlvbixkPWEuc291cmNlLm1jKCksZT17fSxmPTAsZz1kLmxlbmd0aDtmPGc7ZisrKXt2YXIgaD1kW2ZdO3coaCkudG9TdHJpbmcoKWluIGV8fCEoaD1hLmdlb21ldHJ5RnVuY3Rpb24oaCkpfHwoaD1oLkcoKSxMYShoLGIpLEVhKGIsYyxiKSxoPVVqKGEuc291cmNlLmEsYiksaD1oLmZpbHRlcihmdW5jdGlvbihhKXthPXcoYSkudG9TdHJpbmcoKTtyZXR1cm4gYSBpbiBlPyExOmVbYV09ITB9KSxhLmZlYXR1cmVzLnB1c2goT3IoYSxoKSkpfX19XG5mdW5jdGlvbiBPcihhLGIpe2Zvcih2YXIgYz1bMCwwXSxkPWIubGVuZ3RoLTE7MDw9ZDstLWQpe3ZhciBlPWEuZ2VvbWV0cnlGdW5jdGlvbihiW2RdKTtlP29lKGMsZS5HKCkpOmIuc3BsaWNlKGQsMSl9dGUoYywxL2IubGVuZ3RoKTthPW5ldyBCKG5ldyBsZihjKSk7YS5zZXQoXCJmZWF0dXJlc1wiLGIpO3JldHVybiBhfTtmdW5jdGlvbiBQcihhLGIpe3ZhciBjPVtdO09iamVjdC5rZXlzKGIpLmZvckVhY2goZnVuY3Rpb24oYSl7bnVsbCE9PWJbYV0mJnZvaWQgMCE9PWJbYV0mJmMucHVzaChhK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChiW2FdKSl9KTt2YXIgZD1jLmpvaW4oXCImXCIpO2E9YS5yZXBsYWNlKC9bPyZdJC8sXCJcIik7YT0tMT09PWEuaW5kZXhPZihcIj9cIik/YStcIj9cIjphK1wiJlwiO3JldHVybiBhK2R9O2Z1bmN0aW9uIFFyKGEpe2E9YXx8e307dmFyIGI7dm9pZCAwIT09YS5hdHRyaWJ1dGlvbnM/Yj1hLmF0dHJpYnV0aW9uczpiPVsnJmNvcHk7IDxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnMuJ107THIuY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YixjYWNoZVNpemU6YS5jYWNoZVNpemUsY3Jvc3NPcmlnaW46dm9pZCAwIT09YS5jcm9zc09yaWdpbj9hLmNyb3NzT3JpZ2luOlwiYW5vbnltb3VzXCIsb3BhcXVlOnZvaWQgMCE9PWEub3BhcXVlP2Eub3BhcXVlOiEwLG1heFpvb206dm9pZCAwIT09YS5tYXhab29tP2EubWF4Wm9vbToxOSxyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDphLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLHRpbGVMb2FkRnVuY3Rpb246YS50aWxlTG9hZEZ1bmN0aW9uLHVybDp2b2lkIDAhPT1hLnVybD9hLnVybDpcImh0dHBzOi8ve2EtY30udGlsZS5vcGVuc3RyZWV0bWFwLm9yZy97en0ve3h9L3t5fS5wbmdcIixcbndyYXBYOmEud3JhcFh9KX12KFFyLExyKTt5aS5wZD17fTt5aS5wZC5HZD1mdW5jdGlvbigpe307XG4oZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyl7aWYoZylyZXR1cm4gbmV3IEltYWdlRGF0YShhLGIsYyk7Yj1oLmNyZWF0ZUltYWdlRGF0YShiLGMpO2IuZGF0YS5zZXQoYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXt2YXIgYj0hMDt0cnl7bmV3IEltYWdlRGF0YSgxMCwxMCl9Y2F0Y2gobil7Yj0hMX1yZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9Yy5idWZmZXJzLGU9Yy5tZXRhLGY9Yy53aWR0aCxnPWMuaGVpZ2h0LGg9ZC5sZW5ndGgsaz1kWzBdLmJ5dGVMZW5ndGg7aWYoYy5pbWFnZU9wcyl7az1BcnJheShoKTtmb3IoYz0wO2M8aDsrK2Mpe3ZhciBtPWM7dmFyIG49bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGRbY10pO3ZhciBHPWYsUj1nO249Yj9uZXcgSW1hZ2VEYXRhKG4sRyxSKTp7ZGF0YTpuLHdpZHRoOkcsaGVpZ2h0OlJ9O2tbbV09bn1mPWEoayxlKS5kYXRhfWVsc2V7Zj1uZXcgVWludDhDbGFtcGVkQXJyYXkoayk7Zz1BcnJheShoKTttPUFycmF5KGgpO2ZvcihjPTA7Yzxcbmg7KytjKWdbY109bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGRbY10pLG1bY109WzAsMCwwLDBdO2ZvcihkPTA7ZDxrO2QrPTQpe2ZvcihjPTA7YzxoOysrYyluPWdbY10sbVtjXVswXT1uW2RdLG1bY11bMV09bltkKzFdLG1bY11bMl09bltkKzJdLG1bY11bM109bltkKzNdO2M9YShtLGUpO2ZbZF09Y1swXTtmW2QrMV09Y1sxXTtmW2QrMl09Y1syXTtmW2QrM109Y1szXX19cmV0dXJuIGYuYnVmZmVyfX1mdW5jdGlvbiBkKGEsYil7dmFyIGQ9T2JqZWN0LmtleXMoYS5saWJ8fHt9KS5tYXAoZnVuY3Rpb24oYil7cmV0dXJuXCJ2YXIgXCIrYitcIiA9IFwiK2EubGliW2JdLnRvU3RyaW5nKCkrXCI7XCJ9KS5jb25jYXQoW1widmFyIF9fbWluaW9uX18gPSAoXCIrYy50b1N0cmluZygpK1wiKShcIixhLm9wZXJhdGlvbi50b1N0cmluZygpLFwiKTtcIiwnc2VsZi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbihldmVudCkgeycsXCIgIHZhciBidWZmZXIgPSBfX21pbmlvbl9fKGV2ZW50LmRhdGEpO1wiLFxuXCIgIHNlbGYucG9zdE1lc3NhZ2Uoe2J1ZmZlcjogYnVmZmVyLCBtZXRhOiBldmVudC5kYXRhLm1ldGF9LCBbYnVmZmVyXSk7XCIsXCJ9KTtcIl0pO2Q9VVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihkLHt0eXBlOlwidGV4dC9qYXZhc2NyaXB0XCJ9KSk7ZD1uZXcgV29ya2VyKGQpO2QuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixiKTtyZXR1cm4gZH1mdW5jdGlvbiBlKGEsYil7dmFyIGQ9YyhhLm9wZXJhdGlvbik7cmV0dXJue3Bvc3RNZXNzYWdlOmZ1bmN0aW9uKGEpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiKHtkYXRhOntidWZmZXI6ZChhKSxtZXRhOmEubWV0YX19KX0sMCl9fX1mdW5jdGlvbiBmKGEpe3RoaXMuR2M9ISFhLkVqO3ZhciBiOzA9PT1hLnRocmVhZHM/Yj0wOnRoaXMuR2M/Yj0xOmI9YS50aHJlYWRzfHwxO3ZhciBjPVtdO2lmKGIpZm9yKHZhciBmPTA7ZjxiOysrZiljW2ZdPWQoYSx0aGlzLk1kLmJpbmQodGhpcyxmKSk7ZWxzZSBjWzBdPWUoYSx0aGlzLk1kLmJpbmQodGhpcyxcbjApKTt0aGlzLldiPWM7dGhpcy5OZD1bXTt0aGlzLlZiPTA7dGhpcy5zYj17fTt0aGlzLkhjPW51bGx9dmFyIGc9ITA7dHJ5e25ldyBJbWFnZURhdGEoMTAsMTApfWNhdGNoKGspe2c9ITF9dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwiMmRcIik7Zi5wcm90b3R5cGUuV2Y9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5WYiYmMDx0aGlzLk5kLmxlbmd0aCl7dmFyIGE9dGhpcy5IYz10aGlzLk5kLnNoaWZ0KCksYj1hLmlucHV0c1swXS53aWR0aCxjPWEuaW5wdXRzWzBdLmhlaWdodCxkPWEuaW5wdXRzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRhLmJ1ZmZlcn0pLGU9dGhpcy5XYi5sZW5ndGg7dGhpcy5WYj1lO2lmKDE9PT1lKXRoaXMuV2JbMF0ucG9zdE1lc3NhZ2Uoe2J1ZmZlcnM6ZCxtZXRhOmEubGgsaW1hZ2VPcHM6dGhpcy5HYyx3aWR0aDpiLGhlaWdodDpjfSxkKTtlbHNlIGZvcih2YXIgZj00Kk1hdGguY2VpbChhLmlucHV0c1swXS5kYXRhLmxlbmd0aC9cbjQvZSksZz0wO2c8ZTsrK2cpe2Zvcih2YXIgaD1nKmYsQz1bXSxEPTAsST1kLmxlbmd0aDtEPEk7KytEKUMucHVzaChkW2ddLnNsaWNlKGgsaCtmKSk7dGhpcy5XYltnXS5wb3N0TWVzc2FnZSh7YnVmZmVyczpDLG1ldGE6YS5saCxpbWFnZU9wczp0aGlzLkdjLHdpZHRoOmIsaGVpZ2h0OmN9LEMpfX19O2YucHJvdG90eXBlLk1kPWZ1bmN0aW9uKGEsYil7dGhpcy5Eanx8KHRoaXMuc2JbYV09Yi5kYXRhLC0tdGhpcy5WYiwwPT09dGhpcy5WYiYmdGhpcy5ZZigpKX07Zi5wcm90b3R5cGUuWWY9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLkhjLGM9dGhpcy5XYi5sZW5ndGg7aWYoMT09PWMpe3ZhciBkPW5ldyBVaW50OENsYW1wZWRBcnJheSh0aGlzLnNiWzBdLmJ1ZmZlcik7dmFyIGU9dGhpcy5zYlswXS5tZXRhfWVsc2V7dmFyIGY9YS5pbnB1dHNbMF0uZGF0YS5sZW5ndGg7ZD1uZXcgVWludDhDbGFtcGVkQXJyYXkoZik7ZT1BcnJheShmKTtmPTQqTWF0aC5jZWlsKGYvNC9jKTtmb3IodmFyIGc9XG4wO2c8YzsrK2cpe3ZhciBoPWcqZjtkLnNldChuZXcgVWludDhDbGFtcGVkQXJyYXkodGhpcy5zYltnXS5idWZmZXIpLGgpO2VbZ109dGhpcy5zYltnXS5tZXRhfX10aGlzLkhjPW51bGw7dGhpcy5zYj17fTthLmNhbGxiYWNrKG51bGwsYihkLGEuaW5wdXRzWzBdLndpZHRoLGEuaW5wdXRzWzBdLmhlaWdodCksZSk7dGhpcy5XZigpfTthW1wiZGVmYXVsdFwiXT17R2Q6Zn07YS5HZD1mfSkoeWkucGQ9eWkucGR8fHt9KTtmdW5jdGlvbiBScihhKXthPWF8fHt9O0lyLmNhbGwodGhpcyx7YXR0cmlidXRpb25zOmEuYXR0cmlidXRpb25zLGNhY2hlU2l6ZTphLmNhY2hlU2l6ZSxjcm9zc09yaWdpbjphLmNyb3NzT3JpZ2luLGxvZ286YS5sb2dvLHByb2plY3Rpb246YS5wcm9qZWN0aW9uLHJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkOmEucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQsdGlsZUdyaWQ6YS50aWxlR3JpZCx0aWxlTG9hZEZ1bmN0aW9uOmEudGlsZUxvYWRGdW5jdGlvbix1cmw6YS51cmwsdXJsczphLnVybHMsd3JhcFg6dm9pZCAwIT09YS53cmFwWD9hLndyYXBYOiEwLHRyYW5zaXRpb246YS50cmFuc2l0aW9ufSk7dGhpcy5mPWEucGFyYW1zfHx7fTt0aGlzLmk9QmEoKTthPTA7dmFyIGI9W10sYztmb3IoYyBpbiB0aGlzLmYpYlthKytdPWMrXCItXCIrdGhpcy5mW2NdO0RyKHRoaXMsYi5qb2luKFwiL1wiKSl9dihScixJcik7UnIucHJvdG90eXBlLkdiPWZ1bmN0aW9uKGEpe3JldHVybiBhfTtcblJyLnByb3RvdHlwZS5nPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnRpbGVHcmlkO2R8fChkPXRoaXMueWEoYykpO2lmKCEoZC5hLmxlbmd0aDw9YVswXSkpe3ZhciBlPWhjKGQsYSx0aGlzLmkpLGY9emEobGMoZCxhWzBdKSx0aGlzLmIpOzEhPWImJihmPXlhKGYsYix0aGlzLmIpKTtkPXtGOlwiaW1hZ2VcIixGT1JNQVQ6XCJQTkczMlwiLFRSQU5TUEFSRU5UOiEwfTtaYShkLHRoaXMuZik7dmFyIGc9dGhpcy51cmxzO2c/KGM9Yy5MYS5zcGxpdChcIjpcIikucG9wKCksZC5TSVpFPWZbMF0rXCIsXCIrZlsxXSxkLkJCT1g9ZS5qb2luKFwiLFwiKSxkLkJCT1hTUj1jLGQuSU1BR0VTUj1jLGQuRFBJPU1hdGgucm91bmQoZC5EUEk/ZC5EUEkqYjo5MCpiKSxhPSgxPT1nLmxlbmd0aD9nWzBdOmdbdmEoKGFbMV08PGFbMF0pK2FbMl0sZy5sZW5ndGgpXSkucmVwbGFjZSgvTWFwU2VydmVyXFwvPyQvLFwiTWFwU2VydmVyL2V4cG9ydFwiKS5yZXBsYWNlKC9JbWFnZVNlcnZlclxcLz8kLyxcIkltYWdlU2VydmVyL2V4cG9ydEltYWdlXCIpLFxuYT1QcihhLGQpKTphPXZvaWQgMDtyZXR1cm4gYX19O2Z1bmN0aW9uIFNyKGEpe2E9YXx8e307dmFyIGI9YS5wYXJhbXN8fHt9O0lyLmNhbGwodGhpcyx7YXR0cmlidXRpb25zOmEuYXR0cmlidXRpb25zLGNhY2hlU2l6ZTphLmNhY2hlU2l6ZSxjcm9zc09yaWdpbjphLmNyb3NzT3JpZ2luLGxvZ286YS5sb2dvLG9wYXF1ZTohKFwiVFJBTlNQQVJFTlRcImluIGI/Yi5UUkFOU1BBUkVOVDoxKSxwcm9qZWN0aW9uOmEucHJvamVjdGlvbixyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDphLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLHRpbGVDbGFzczphLnRpbGVDbGFzcyx0aWxlR3JpZDphLnRpbGVHcmlkLHRpbGVMb2FkRnVuY3Rpb246YS50aWxlTG9hZEZ1bmN0aW9uLHVybDphLnVybCx1cmxzOmEudXJscyx3cmFwWDp2b2lkIDAhPT1hLndyYXBYP2Eud3JhcFg6ITAsdHJhbnNpdGlvbjphLnRyYW5zaXRpb259KTt0aGlzLm89dm9pZCAwIT09YS5ndXR0ZXI/YS5ndXR0ZXI6MDt0aGlzLmY9Yjt0aGlzLmk9ITA7dGhpcy51PWEuc2VydmVyVHlwZTtcbnRoaXMuSj12b2lkIDAhPT1hLmhpZHBpP2EuaGlkcGk6ITA7dGhpcy5LPUJhKCk7YTp7YT0oXCJcIisodGhpcy5mLlZFUlNJT058fFwiMS4zLjBcIikpLnNwbGl0KFwiLlwiKTtiPVtcIjFcIixcIjNcIl07Zm9yKHZhciBjPTA7YzxNYXRoLm1heChhLmxlbmd0aCxiLmxlbmd0aCk7YysrKXt2YXIgZD1wYXJzZUludChhW2NdfHxcIjBcIiwxMCksZT1wYXJzZUludChiW2NdfHxcIjBcIiwxMCk7aWYoZD5lKXthPTE7YnJlYWsgYX1pZihlPmQpe2E9LTE7YnJlYWsgYX19YT0wfXRoaXMuaT0wPD1hO2E9MDtiPVtdO2Zvcih2YXIgZiBpbiB0aGlzLmYpYlthKytdPWYrXCItXCIrdGhpcy5mW2ZdO0RyKHRoaXMsYi5qb2luKFwiL1wiKSl9dihTcixJcik7XG5Tci5wcm90b3R5cGUuZmE9ZnVuY3Rpb24oYSxiLGMsZCl7Yz1GYihjKTt2YXIgZT10aGlzLkMsZj10aGlzLnRpbGVHcmlkO2Z8fChmPXRoaXMueWEoYykpO3ZhciBnPWFbMF0saD1hWzFdLGs9b2MoZixiKSxtPWIvZi5hW2tdLG49aWMoZixrKSxwPXphKGxjKGYsayksZi5nKTtnPW0qTWF0aC5mbG9vcigoZy1uWzBdKS9iKzApL3BbMF07Yj1tKk1hdGguZmxvb3IoKGgtblsxXSkvYisuNSkvcFsxXTtnPU1hdGguZmxvb3IoZyk7Yj1NYXRoLmZsb29yKGIpO2I9WmIoayxnLGIsdm9pZCAwKTtpZighKGYuYS5sZW5ndGg8PWJbMF0pKXtoPWYuYVtiWzBdXTtrPWhjKGYsYix0aGlzLkspO2Y9emEobGMoZixiWzBdKSx0aGlzLmIpO209dGhpcy5vOzAhPT1tJiYoZj14YShmLG0sdGhpcy5iKSxrPUVhKGssaCptLGspKTtpZihlJiZlIT09Yyl7bT1hO249aDtoPVBiKG0sYyxlKTttPURiKGMsbixtKTtuPWMubCgpO3ZvaWQgMCE9PW4mJihtKj1uKTtuPWUubCgpO3ZvaWQgMCE9PW4mJihtLz1uKTtcbm49ZS5JKCk7aWYoIW58fElhKG4saFswXSxoWzFdKSloPURiKGUsbSxoKS9tLGlzRmluaXRlKGgpJiYwPGgmJihtLz1oKTtoPW07az1RYihrLGMsZSk7YT1QYihhLGMsZSl9bT17U0VSVklDRTpcIldNU1wiLFZFUlNJT046XCIxLjMuMFwiLFJFUVVFU1Q6XCJHZXRGZWF0dXJlSW5mb1wiLEZPUk1BVDpcImltYWdlL3BuZ1wiLFRSQU5TUEFSRU5UOiEwLFFVRVJZX0xBWUVSUzp0aGlzLmYuTEFZRVJTfTtaYShtLHRoaXMuZixkKTtkPU1hdGguZmxvb3IoKGtbM10tYVsxXSkvaCk7bVt0aGlzLmk/XCJJXCI6XCJYXCJdPU1hdGguZmxvb3IoKGFbMF0ta1swXSkvaCk7bVt0aGlzLmk/XCJKXCI6XCJZXCJdPWQ7cmV0dXJuIFRyKHRoaXMsYixmLGssMSxlfHxjLG0pfX07U3IucHJvdG90eXBlLmJlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMub307XG5mdW5jdGlvbiBUcihhLGIsYyxkLGUsZixnKXt2YXIgaD1hLnVybHM7aWYoaCl7Zy5XSURUSD1jWzBdO2cuSEVJR0hUPWNbMV07Z1thLmk/XCJDUlNcIjpcIlNSU1wiXT1mLkxhO1wiU1RZTEVTXCJpbiBhLmZ8fChnLlNUWUxFUz1cIlwiKTtpZigxIT1lKXN3aXRjaChhLnUpe2Nhc2UgXCJnZW9zZXJ2ZXJcIjpjPTkwKmUrLjV8MDtnLkZPUk1BVF9PUFRJT05TPVwiRk9STUFUX09QVElPTlNcImluIGc/Zy5GT1JNQVRfT1BUSU9OUysoXCI7ZHBpOlwiK2MpOlwiZHBpOlwiK2M7YnJlYWs7Y2FzZSBcIm1hcHNlcnZlclwiOmcuTUFQX1JFU09MVVRJT049OTAqZTticmVhaztjYXNlIFwiY2FybWVudGFzZXJ2ZXJcIjpjYXNlIFwicWdpc1wiOmcuRFBJPTkwKmU7YnJlYWs7ZGVmYXVsdDp4KCExLDUyKX1mPWYuYTthLmkmJlwibmVcIj09Zi5zdWJzdHIoMCwyKSYmKGE9ZFswXSxkWzBdPWRbMV0sZFsxXT1hLGE9ZFsyXSxkWzJdPWRbM10sZFszXT1hKTtnLkJCT1g9ZC5qb2luKFwiLFwiKTtyZXR1cm4gUHIoMT09aC5sZW5ndGg/aFswXTpoW3ZhKChiWzFdPDxcbmJbMF0pK2JbMl0saC5sZW5ndGgpXSxnKX19U3IucHJvdG90eXBlLkdiPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLkomJnZvaWQgMCE9PXRoaXMudT9hOjF9O1NyLnByb3RvdHlwZS5nPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLnRpbGVHcmlkO2R8fChkPXRoaXMueWEoYykpO2lmKCEoZC5hLmxlbmd0aDw9YVswXSkpezE9PWJ8fHRoaXMuSiYmdm9pZCAwIT09dGhpcy51fHwoYj0xKTt2YXIgZT1kLmFbYVswXV0sZj1oYyhkLGEsdGhpcy5LKTtkPXphKGxjKGQsYVswXSksdGhpcy5iKTt2YXIgZz10aGlzLm87MCE9PWcmJihkPXhhKGQsZyx0aGlzLmIpLGY9RWEoZixlKmcsZikpOzEhPWImJihkPXlhKGQsYix0aGlzLmIpKTtlPXtTRVJWSUNFOlwiV01TXCIsVkVSU0lPTjpcIjEuMy4wXCIsUkVRVUVTVDpcIkdldE1hcFwiLEZPUk1BVDpcImltYWdlL3BuZ1wiLFRSQU5TUEFSRU5UOiEwfTtaYShlLHRoaXMuZik7cmV0dXJuIFRyKHRoaXMsYSxkLGYsYixjLGUpfX07ZnVuY3Rpb24gVXIoYSxiLGMsZCxlLGYsZyxoLGssbSxuLHAscSx0LHUpe01qLmNhbGwodGhpcyxhLGIsdSk7dGhpcy5pPXt9O3RoaXMubz17fTt0aGlzLmo9bTt0aGlzLmE9W107dGhpcy5DPWM7dGhpcy52PWY7dGhpcy5iPVtdO3RoaXMuSD1bXTtpZihmKXt2YXIgeT1oYyhrLGYpLEM9ay5hW2FbMF1dO2NjKGgseSxvYyhoLEMpLGZ1bmN0aW9uKGEpe3ZhciBiPVVhKHksaGMoaCxhKSksYz1oLkkoKTtjJiYoYj1VYShiLGMpKTsuNTw9WGEoYikvQyYmLjU8PVRhKGIpL0MmJihiPWEudG9TdHJpbmcoKSxjPW1bYl0sY3x8KGM9ZyhhLG4scCksYz1tW2JdPW5ldyBxKGEsdm9pZCAwPT1jPzQ6MCx2b2lkIDA9PWM/XCJcIjpjLGQsZSksdGhpcy5ILnB1c2goeihjLFwiY2hhbmdlXCIsdCkpKSxjLmErKyx0aGlzLmEucHVzaChiKSl9LmJpbmQodGhpcykpfX12KFVyLE1qKTtsPVVyLnByb3RvdHlwZTtcbmwuY2E9ZnVuY3Rpb24oKXtmb3IodmFyIGE9MCxiPXRoaXMuYS5sZW5ndGg7YTxiOysrYSl7dmFyIGM9dGhpcy5hW2FdLGQ9dGhpcy5qW2NdO2QuYS0tOzA9PWQuYSYmKGRlbGV0ZSB0aGlzLmpbY10sQ2MoZCkpfXRoaXMuYS5sZW5ndGg9MDt0aGlzLmo9bnVsbDt0aGlzLmIuZm9yRWFjaCh2Yyk7dGhpcy5iLmxlbmd0aD0wO3RoaXMuYyYmQ2ModGhpcy5jKTt0aGlzLnN0YXRlPTU7TmoodGhpcyk7dGhpcy5ILmZvckVhY2godmMpO3RoaXMuSC5sZW5ndGg9MDtNai5wcm90b3R5cGUuY2EuY2FsbCh0aGlzKX07ZnVuY3Rpb24gdGooYSxiKXtiPXcoYikudG9TdHJpbmcoKTtiIGluIGEuaXx8KGEuaVtiXT1MZigpKTtyZXR1cm4gYS5pW2JdfWwuYmE9ZnVuY3Rpb24oYSl7cmV0dXJuLTE9PXNqKHRoaXMsYSkuQWQ/bnVsbDp0aih0aGlzLGEpLmNhbnZhc307XG5mdW5jdGlvbiBzaihhLGIpe2I9dyhiKS50b1N0cmluZygpO2IgaW4gYS5vfHwoYS5vW2JdPXtaYjohMSx6ZDpudWxsLHVjOi0xLEFkOi0xfSk7cmV0dXJuIGEub1tiXX1sLlNhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYS5qb2luKFwiL1wiKStcIi1cIit0aGlzLkN9O1xubC5sb2FkPWZ1bmN0aW9uKCl7dmFyIGE9MCxiPXt9OzA9PXRoaXMuc3RhdGUmJnZpKHRoaXMsMSk7MT09dGhpcy5zdGF0ZSYmdGhpcy5hLmZvckVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9dGhpcy5qW2NdOzA9PWQuc3RhdGUmJihkLmk9dGhpcy5CLGQubG9hZCgpKTsxPT1kLnN0YXRlJiYoYz16KGQsXCJjaGFuZ2VcIixmdW5jdGlvbigpe3ZhciBjPWQuc3RhdGU7aWYoMj09Y3x8Mz09Yyl7dmFyIGY9dyhkKTszPT1jP2JbZl09ITA6KC0tYSxkZWxldGUgYltmXSk7MD09YS1PYmplY3Qua2V5cyhiKS5sZW5ndGgmJnRoaXMuWmQoKX19LmJpbmQodGhpcykpLHRoaXMuYi5wdXNoKGMpLCsrYSl9LmJpbmQodGhpcykpOzA9PWEtT2JqZWN0LmtleXMoYikubGVuZ3RoJiZzZXRUaW1lb3V0KHRoaXMuWmQuYmluZCh0aGlzKSwwKX07XG5sLlpkPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuYS5sZW5ndGgsYj0wLGM9YS0xOzA8PWM7LS1jKXt2YXIgZD10aGlzLmpbdGhpcy5hW2NdXS5zdGF0ZTsyIT1kJiYtLWE7ND09ZCYmKytifWE9PXRoaXMuYS5sZW5ndGg/KHRoaXMuYi5mb3JFYWNoKHZjKSx0aGlzLmIubGVuZ3RoPTAsdmkodGhpcywyKSk6dmkodGhpcyxiPT10aGlzLmEubGVuZ3RoPzQ6Myl9O2Z1bmN0aW9uIFZyKGEsYil7YS5pPSRrKGIsYS5DLGEudWkuYmluZChhKSxhLnRpLmJpbmQoYSkpfTtmdW5jdGlvbiBXcihhKXt2YXIgYj1hLnByb2plY3Rpb258fFwiRVBTRzozODU3XCIsYz1hLmV4dGVudHx8c2MoYiksZD1hLnRpbGVHcmlkfHxwYyh7ZXh0ZW50OmMsbWF4Wm9vbTphLm1heFpvb218fDIyLG1pblpvb206YS5taW5ab29tLHRpbGVTaXplOmEudGlsZVNpemV8fDUxMn0pO0dyLmNhbGwodGhpcyx7YXR0cmlidXRpb25zOmEuYXR0cmlidXRpb25zLGNhY2hlU2l6ZTp2b2lkIDAhPT1hLmNhY2hlU2l6ZT9hLmNhY2hlU2l6ZToxMjgsZXh0ZW50OmMsbG9nbzphLmxvZ28sb3BhcXVlOiExLHByb2plY3Rpb246YixzdGF0ZTphLnN0YXRlLHRpbGVHcmlkOmQsdGlsZUxvYWRGdW5jdGlvbjphLnRpbGVMb2FkRnVuY3Rpb24/YS50aWxlTG9hZEZ1bmN0aW9uOlZyLHRpbGVVcmxGdW5jdGlvbjphLnRpbGVVcmxGdW5jdGlvbix1cmw6YS51cmwsdXJsczphLnVybHMsd3JhcFg6dm9pZCAwPT09YS53cmFwWD8hMDphLndyYXBYLHRyYW5zaXRpb246YS50cmFuc2l0aW9ufSk7dGhpcy5vPWEuZm9ybWF0P1xuYS5mb3JtYXQ6bnVsbDt0aGlzLmY9e307dGhpcy51PXZvaWQgMD09YS5vdmVybGFwcz8hMDphLm92ZXJsYXBzO3RoaXMudGlsZUNsYXNzPWEudGlsZUNsYXNzP2EudGlsZUNsYXNzOmlrO3RoaXMuaT17fX12KFdyLEdyKTtsPVdyLnByb3RvdHlwZTtsLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5hLmNsZWFyKCk7dGhpcy5mPXt9fTtsLmtkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YStcIi9cIitiK1wiL1wiK2M7aWYodGhpcy5hLmouaGFzT3duUHJvcGVydHkoZikpcmV0dXJuIHRoaXMuYS5nZXQoZik7YT1bYSxiLGNdO2I9RXIodGhpcyxhLGUpO2Q9bmV3IFVyKGEsbnVsbCE9PWI/MDo0LHRoaXMuaix0aGlzLm8sdGhpcy50aWxlTG9hZEZ1bmN0aW9uLGIsdGhpcy50aWxlVXJsRnVuY3Rpb24sdGhpcy50aWxlR3JpZCx0aGlzLnlhKGUpLHRoaXMuZixkLGUsdGhpcy50aWxlQ2xhc3MsdGhpcy5NLmJpbmQodGhpcyksdGhpcy5YKTt0aGlzLmEuc2V0KGYsZCk7cmV0dXJuIGR9O1xubC55YT1mdW5jdGlvbihhKXt2YXIgYj1hLkxhLGM9dGhpcy5pW2JdO2N8fChjPXRoaXMudGlsZUdyaWQsYz10aGlzLmlbYl09cmMoYSx2b2lkIDAsYz9sYyhjLGMubWluWm9vbSk6dm9pZCAwKSk7cmV0dXJuIGN9O2wuR2I9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9O2wuZGM9ZnVuY3Rpb24oYSxiLGMpe2E9emEobGModGhpcy55YShjKSxhKSk7cmV0dXJuW01hdGgucm91bmQoYVswXSpiKSxNYXRoLnJvdW5kKGFbMV0qYildfTtmdW5jdGlvbiBYcihhKXt0aGlzLmk9YS5tYXRyaXhJZHM7JGIuY2FsbCh0aGlzLHtleHRlbnQ6YS5leHRlbnQsb3JpZ2luOmEub3JpZ2luLG9yaWdpbnM6YS5vcmlnaW5zLHJlc29sdXRpb25zOmEucmVzb2x1dGlvbnMsdGlsZVNpemU6YS50aWxlU2l6ZSx0aWxlU2l6ZXM6YS50aWxlU2l6ZXMsc2l6ZXM6YS5zaXplc30pfXYoWHIsJGIpO2Z1bmN0aW9uIFlyKGEpe2Z1bmN0aW9uIGIoYSl7YT1cIktWUFwiPT1kP1ByKGEsZik6YS5yZXBsYWNlKC9cXHsoXFx3Kz8pXFx9L2csZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b0xvd2VyQ2FzZSgpaW4gZj9mW2IudG9Mb3dlckNhc2UoKV06YX0pO3JldHVybiBmdW5jdGlvbihiKXtpZihiKXt2YXIgYz17VGlsZU1hdHJpeDplLmlbYlswXV0sVGlsZUNvbDpiWzFdLFRpbGVSb3c6LWJbMl0tMX07WmEoYyxnKTtiPWE7cmV0dXJuIGI9XCJLVlBcIj09ZD9QcihiLGMpOmIucmVwbGFjZSgvXFx7KFxcdys/KVxcfS9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGNbYl19KX19fXRoaXMuZmE9dm9pZCAwIT09YS52ZXJzaW9uP2EudmVyc2lvbjpcIjEuMC4wXCI7dGhpcy5vPXZvaWQgMCE9PWEuZm9ybWF0P2EuZm9ybWF0OlwiaW1hZ2UvanBlZ1wiO3RoaXMuZj12b2lkIDAhPT1hLmRpbWVuc2lvbnM/YS5kaW1lbnNpb25zOnt9O3RoaXMudT1hLmxheWVyO3RoaXMuaT1hLm1hdHJpeFNldDt0aGlzLko9YS5zdHlsZTt2YXIgYz1cbmEudXJsczt2b2lkIDA9PT1jJiZ2b2lkIDAhPT1hLnVybCYmKGM9enIoYS51cmwpKTt2YXIgZD10aGlzLks9dm9pZCAwIT09YS5yZXF1ZXN0RW5jb2Rpbmc/YS5yZXF1ZXN0RW5jb2Rpbmc6XCJLVlBcIixlPWEudGlsZUdyaWQsZj17bGF5ZXI6dGhpcy51LHN0eWxlOnRoaXMuSix0aWxlbWF0cml4c2V0OnRoaXMuaX07XCJLVlBcIj09ZCYmWmEoZix7U2VydmljZTpcIldNVFNcIixSZXF1ZXN0OlwiR2V0VGlsZVwiLFZlcnNpb246dGhpcy5mYSxGb3JtYXQ6dGhpcy5vfSk7dmFyIGc9dGhpcy5mLGg9YyYmMDxjLmxlbmd0aD94cihjLm1hcChiKSk6eXI7SXIuY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YS5hdHRyaWJ1dGlvbnMsY2FjaGVTaXplOmEuY2FjaGVTaXplLGNyb3NzT3JpZ2luOmEuY3Jvc3NPcmlnaW4sbG9nbzphLmxvZ28scHJvamVjdGlvbjphLnByb2plY3Rpb24scmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ6YS5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCx0aWxlQ2xhc3M6YS50aWxlQ2xhc3MsXG50aWxlR3JpZDplLHRpbGVMb2FkRnVuY3Rpb246YS50aWxlTG9hZEZ1bmN0aW9uLHRpbGVQaXhlbFJhdGlvOmEudGlsZVBpeGVsUmF0aW8sdGlsZVVybEZ1bmN0aW9uOmgsdXJsczpjLHdyYXBYOnZvaWQgMCE9PWEud3JhcFg/YS53cmFwWDohMSx0cmFuc2l0aW9uOmEudHJhbnNpdGlvbn0pO0RyKHRoaXMsWnIodGhpcykpfXYoWXIsSXIpO2Z1bmN0aW9uIFpyKGEpe3ZhciBiPTAsYz1bXSxkO2ZvcihkIGluIGEuZiljW2IrK109ZCtcIi1cIithLmZbZF07cmV0dXJuIGMuam9pbihcIi9cIil9O3IoXCJvbC5NYXBcIixIKTtILnByb3RvdHlwZS5hZGRJbnRlcmFjdGlvbj1ILnByb3RvdHlwZS5hZztILnByb3RvdHlwZS5hZGRMYXllcj1ILnByb3RvdHlwZS5iZztILnByb3RvdHlwZS5hZGRDb250cm9sPUgucHJvdG90eXBlLiRmO0gucHJvdG90eXBlLmFkZE92ZXJsYXk9SC5wcm90b3R5cGUuY2c7SC5wcm90b3R5cGUuZGlzcGF0Y2hFdmVudD1ILnByb3RvdHlwZS5sO0gucHJvdG90eXBlLmZvckVhY2hGZWF0dXJlQXRQaXhlbD1ILnByb3RvdHlwZS5XYztILnByb3RvdHlwZS5mb3JFYWNoTGF5ZXJBdFBpeGVsPUgucHJvdG90eXBlLkloO0gucHJvdG90eXBlLmdldExheWVycz1ILnByb3RvdHlwZS5KaDtILnByb3RvdHlwZS5nZXRTaXplPUgucHJvdG90eXBlLndiO0gucHJvdG90eXBlLmdldFRhcmdldD1ILnByb3RvdHlwZS5jZDtILnByb3RvdHlwZS5nZXRPdmVybGF5cz1ILnByb3RvdHlwZS5FZztILnByb3RvdHlwZS5nZXRWaWV3PUgucHJvdG90eXBlLlo7XG5ILnByb3RvdHlwZS5yZW1vdmVDb250cm9sPUgucHJvdG90eXBlLllpO0gucHJvdG90eXBlLnJlbW92ZUludGVyYWN0aW9uPUgucHJvdG90eXBlLlppO0gucHJvdG90eXBlLnJlbW92ZU92ZXJsYXk9SC5wcm90b3R5cGUuJGk7SC5wcm90b3R5cGUub249SC5wcm90b3R5cGUudjtILnByb3RvdHlwZS5vbmNlPUgucHJvdG90eXBlLm9uY2U7SC5wcm90b3R5cGUudW49SC5wcm90b3R5cGUua2E7cihcIm9sLnByb2ouUHJvamVjdGlvblwiLG1iKTttYi5wcm90b3R5cGUuZ2V0RXh0ZW50PW1iLnByb3RvdHlwZS5JO21iLnByb3RvdHlwZS5nZXRNZXRlcnNQZXJVbml0PW1iLnByb3RvdHlwZS5sO3IoXCJvbC5wcm9qLnRyYW5zZm9ybVwiLFBiKTtyKFwib2wuVmlld1wiLHVmKTt1Zi5wcm90b3R5cGUuY2FsY3VsYXRlRXh0ZW50PXVmLnByb3RvdHlwZS5TZDt1Zi5wcm90b3R5cGUuZ2V0Q2VudGVyPXVmLnByb3RvdHlwZS5qYTt1Zi5wcm90b3R5cGUuZ2V0UHJvamVjdGlvbj11Zi5wcm90b3R5cGUuS2g7XG51Zi5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbj11Zi5wcm90b3R5cGUuemE7dWYucHJvdG90eXBlLmdldFJlc29sdXRpb25zPXVmLnByb3RvdHlwZS5MaDt1Zi5wcm90b3R5cGUuZ2V0Wm9vbT11Zi5wcm90b3R5cGUuZ2U7dWYucHJvdG90eXBlLmdldFpvb21Gb3JSZXNvbHV0aW9uPXVmLnByb3RvdHlwZS5oZTt1Zi5wcm90b3R5cGUub249dWYucHJvdG90eXBlLnY7dWYucHJvdG90eXBlLnNldENlbnRlcj11Zi5wcm90b3R5cGUuT2E7dWYucHJvdG90eXBlLnNldFpvb209dWYucHJvdG90eXBlLnFmO3VmLnByb3RvdHlwZS5maXQ9dWYucHJvdG90eXBlLnRnO3VmLnByb3RvdHlwZS51bj11Zi5wcm90b3R5cGUua2E7cihcIm9sLmV4dGVudC5nZXRCb3R0b21MZWZ0XCIsUWEpO3IoXCJvbC5leHRlbnQuZ2V0VG9wTGVmdFwiLFdhKTtyKFwib2wudGlsZWdyaWQuVGlsZUdyaWRcIiwkYik7cihcIm9sLnRpbGVncmlkLldNVFNcIixYcik7cihcIm9sLnRpbGVncmlkLmNyZWF0ZVhZWlwiLHBjKTtcbnIoXCJvbC5zdHlsZS5TdHlsZVwiLEJqKTtCai5wcm90b3R5cGUuZ2V0R2VvbWV0cnk9QmoucHJvdG90eXBlLk87QmoucHJvdG90eXBlLmdldFRleHQ9QmoucHJvdG90eXBlLnJhO0JqLnByb3RvdHlwZS5zZXRaSW5kZXg9QmoucHJvdG90eXBlLnBmO3IoXCJvbC5zdHlsZS5DaXJjbGVcIix5aik7cihcIm9sLnN0eWxlLkZpbGxcIix6aik7emoucHJvdG90eXBlLnNldENvbG9yPXpqLnByb3RvdHlwZS5sO3IoXCJvbC5zdHlsZS5JY29uXCIsTm0pO3IoXCJvbC5zdHlsZS5JbWFnZVwiLHZqKTtyKFwib2wuc3R5bGUuU3Ryb2tlXCIsQWopO0FqLnByb3RvdHlwZS5zZXRDb2xvcj1Bai5wcm90b3R5cGUucmk7QWoucHJvdG90eXBlLnNldExpbmVDYXA9QWoucHJvdG90eXBlLmVqO0FqLnByb3RvdHlwZS5zZXRMaW5lRGFzaD1Bai5wcm90b3R5cGUuc2V0TGluZURhc2g7QWoucHJvdG90eXBlLnNldFdpZHRoPUFqLnByb3RvdHlwZS5majtyKFwib2wuc3R5bGUuVGV4dFwiLExqKTtMai5wcm90b3R5cGUuc2V0Rm9udD1Mai5wcm90b3R5cGUuZGo7XG5Mai5wcm90b3R5cGUuZ2V0VGV4dD1Mai5wcm90b3R5cGUucmE7TGoucHJvdG90eXBlLnNldEZpbGw9TGoucHJvdG90eXBlLmpmO0xqLnByb3RvdHlwZS5zZXRTdHJva2U9TGoucHJvdG90eXBlLm1mO0xqLnByb3RvdHlwZS5zZXRUZXh0PUxqLnByb3RvdHlwZS5uZjtyKFwib2wuQXR0cmlidXRpb25cIix0Yyk7cihcIm9sLkdlb2xvY2F0aW9uXCIsSWopO0lqLnByb3RvdHlwZS5vbj1Jai5wcm90b3R5cGUudjtJai5wcm90b3R5cGUudW49SWoucHJvdG90eXBlLmthO0lqLnByb3RvdHlwZS5nZXRBY2N1cmFjeT1Jai5wcm90b3R5cGUud2c7SWoucHJvdG90eXBlLmdldEhlYWRpbmc9SWoucHJvdG90eXBlLkFnO0lqLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1Jai5wcm90b3R5cGUuRGg7SWoucHJvdG90eXBlLmdldFNwZWVkPUlqLnByb3RvdHlwZS5GZztJai5wcm90b3R5cGUuZ2V0VHJhY2tpbmc9SWoucHJvdG90eXBlLmZlO0lqLnByb3RvdHlwZS5zZXRUcmFja2luZz1Jai5wcm90b3R5cGUueGM7XG5yKFwib2wuT3ZlcmxheVwiLFpqKTtaai5wcm90b3R5cGUuc2V0UG9zaXRpb249WmoucHJvdG90eXBlLnFlO3IoXCJvbC5jb250cm9sLkF0dHJpYnV0aW9uXCIsamcpO2pnLnByb3RvdHlwZS5zZXRDb2xsYXBzZWQ9amcucHJvdG90eXBlLlg7amcucHJvdG90eXBlLnNldENvbGxhcHNpYmxlPWpnLnByb3RvdHlwZS5lYTtyKFwib2wuY29udHJvbC5Nb3VzZVBvc2l0aW9uXCIsa2spO2trLnByb3RvdHlwZS5zZXRDb29yZGluYXRlRm9ybWF0PWtrLnByb3RvdHlwZS5oZjtyKFwib2wuY29udHJvbC5ab29tXCIsb2cpO3IoXCJvbC5jb250cm9sLlJvdGF0ZVwiLG1nKTtyKFwib2wuY29udHJvbC5TY2FsZUxpbmVcIixwayk7cihcIm9sLmNvbnRyb2wuZGVmYXVsdHNcIixwZyk7cihcIm9sLmludGVyYWN0aW9uLkRyYXdcIixDcSk7XG5yKFwib2wuaW50ZXJhY3Rpb24uRHJhdy5jcmVhdGVCb3hcIixmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihhLGIpe2E9QWEoYSk7Yj1ifHxuZXcgQShudWxsKTtiLlkoW1tRYShhKSxbYVsyXSxhWzFdXSxbYVsyXSxhWzNdXSxXYShhKSxRYShhKV1dKTtyZXR1cm4gYn19KTtDcS5wcm90b3R5cGUub249Q3EucHJvdG90eXBlLnY7Q3EucHJvdG90eXBlLnNldEFjdGl2ZT1DcS5wcm90b3R5cGUuZ2I7Q3EucHJvdG90eXBlLnVuPUNxLnByb3RvdHlwZS5rYTtyKFwib2wuaW50ZXJhY3Rpb24uTW9kaWZ5XCIsVXEpO1VxLnByb3RvdHlwZS5vbj1VcS5wcm90b3R5cGUudjtVcS5wcm90b3R5cGUuc2V0QWN0aXZlPVVxLnByb3RvdHlwZS5nYjtVcS5wcm90b3R5cGUudW49VXEucHJvdG90eXBlLmthO3IoXCJvbC5pbnRlcmFjdGlvbi5TZWxlY3RcIixqcik7anIucHJvdG90eXBlLm9uPWpyLnByb3RvdHlwZS52O2pyLnByb3RvdHlwZS5zZXRBY3RpdmU9anIucHJvdG90eXBlLmdiO1xuanIucHJvdG90eXBlLnVuPWpyLnByb3RvdHlwZS5rYTtqci5wcm90b3R5cGUuZ2V0RmVhdHVyZXM9anIucHJvdG90eXBlLko7cihcIm9sLmludGVyYWN0aW9uLlNuYXBcIixvcik7b3IucHJvdG90eXBlLnNldEFjdGl2ZT1vci5wcm90b3R5cGUuZ2I7cihcIm9sLnNvdXJjZS5Tb3VyY2VcIixYaik7WGoucHJvdG90eXBlLm9uPVhqLnByb3RvdHlwZS52O2pyLnByb3RvdHlwZS5vbj1qci5wcm90b3R5cGUudjtYai5wcm90b3R5cGUuZ2V0UHJvcGVydGllcz1Yai5wcm90b3R5cGUuRmE7WGoucHJvdG90eXBlLm9uY2U9WGoucHJvdG90eXBlLm9uY2U7cihcIm9sLnNvdXJjZS5PU01cIixRcik7cihcIm9sLnNvdXJjZS5UaWxlXCIsQ3IpO3IoXCJvbC5zb3VyY2UuVGlsZUFyY0dJU1Jlc3RcIixScik7cihcIm9sLnNvdXJjZS5UaWxlV01TXCIsU3IpO1NyLnByb3RvdHlwZS5nZXRHZXRGZWF0dXJlSW5mb1VybD1Tci5wcm90b3R5cGUuZmE7cihcIm9sLnNvdXJjZS5WZWN0b3JcIix2cSk7XG52cS5wcm90b3R5cGUuYWRkRmVhdHVyZT12cS5wcm90b3R5cGUuVmE7dnEucHJvdG90eXBlLmFkZEZlYXR1cmVzPXZxLnByb3RvdHlwZS5CYjt2cS5wcm90b3R5cGUuZ2V0RmVhdHVyZUJ5SWQ9dnEucHJvdG90eXBlLnlnO3ZxLnByb3RvdHlwZS5nZXRGZWF0dXJlcz12cS5wcm90b3R5cGUubWM7dnEucHJvdG90eXBlLmdldEZvcm1hdD12cS5wcm90b3R5cGUucGk7dnEucHJvdG90eXBlLnJlbW92ZUZlYXR1cmU9dnEucHJvdG90eXBlLlFhO3IoXCJvbC5zb3VyY2UuVmVjdG9yVGlsZVwiLFdyKTt2cS5wcm90b3R5cGUuc2V0UHJvcGVydGllcz12cS5wcm90b3R5cGUubmE7cihcIm9sLnNvdXJjZS5XTVRTXCIsWXIpO3IoXCJvbC5zb3VyY2UuWFlaXCIsTHIpO3IoXCJvbC5zb3VyY2UuQ2x1c3RlclwiLE1yKTtNci5wcm90b3R5cGUuc2V0RGlzdGFuY2U9TXIucHJvdG90eXBlLlg7aWcucHJvdG90eXBlLmdldFNvdXJjZT1pZy5wcm90b3R5cGUuJDtpZy5wcm90b3R5cGUuZ2V0UHJvcGVydGllcz1pZy5wcm90b3R5cGUuRmE7XG5pZy5wcm90b3R5cGUuc2V0U291cmNlPWlnLnByb3RvdHlwZS5sZjtpZy5wcm90b3R5cGUudW49aWcucHJvdG90eXBlLmthO05mLnByb3RvdHlwZS5nZXRWaXNpYmxlPU5mLnByb3RvdHlwZS5IYjtOZi5wcm90b3R5cGUuc2V0VmlzaWJsZT1OZi5wcm90b3R5cGUub2k7TmYucHJvdG90eXBlLm9uPU5mLnByb3RvdHlwZS52O05mLnByb3RvdHlwZS5vbmNlPU5mLnByb3RvdHlwZS5vbmNlO3IoXCJvbC5sYXllci5UaWxlXCIsdHIpO3IoXCJvbC5sYXllci5WZWN0b3JcIix0cSk7dHEucHJvdG90eXBlLnNldD10cS5wcm90b3R5cGUuc2V0O3RxLnByb3RvdHlwZS5zZXRTdHlsZT10cS5wcm90b3R5cGUuSztyKFwib2wubGF5ZXIuVmVjdG9yVGlsZVwiLHVyKTtyKFwib2wubGF5ZXIuR3JvdXBcIixQZik7cihcIm9sLkZlYXR1cmVcIixCKTtCLnByb3RvdHlwZS5nZXRHZW9tZXRyeT1CLnByb3RvdHlwZS5PO0IucHJvdG90eXBlLmdldEdlb21ldHJ5TmFtZT1CLnByb3RvdHlwZS56ZztcbkIucHJvdG90eXBlLmdldElkPUIucHJvdG90eXBlLkJoO0IucHJvdG90eXBlLmdldFByb3BlcnRpZXM9Qi5wcm90b3R5cGUuRmE7Qi5wcm90b3R5cGUuZ2V0U3R5bGU9Qi5wcm90b3R5cGUuQ2g7Qi5wcm90b3R5cGUuc2V0SWQ9Qi5wcm90b3R5cGUubGI7Qi5wcm90b3R5cGUuc2V0UHJvcGVydGllcz1CLnByb3RvdHlwZS5uYTtCLnByb3RvdHlwZS5zZXRTdHlsZT1CLnByb3RvdHlwZS5wZTtCLnByb3RvdHlwZS5zZXRHZW9tZXRyeT1CLnByb3RvdHlwZS5CYTtCLnByb3RvdHlwZS5zZXRHZW9tZXRyeU5hbWU9Qi5wcm90b3R5cGUuWmE7Qi5wcm90b3R5cGUub249Qi5wcm90b3R5cGUudjtCLnByb3RvdHlwZS51bnNldD1CLnByb3RvdHlwZS5uajtFby5wcm90b3R5cGUuZ2V0PUVvLnByb3RvdHlwZS5nZXQ7RW8ucHJvdG90eXBlLmdldEdlb21ldHJ5PUVvLnByb3RvdHlwZS5PO0VvLnByb3RvdHlwZS5nZXRUeXBlPUVvLnByb3RvdHlwZS5EO3IoXCJvbC5Db2xsZWN0aW9uXCIsU2MpO1xuU2MucHJvdG90eXBlLmdldEFycmF5PVNjLnByb3RvdHlwZS54ZztTYy5wcm90b3R5cGUuZ2V0TGVuZ3RoPVNjLnByb3RvdHlwZS5mYjtTYy5wcm90b3R5cGUuaXRlbT1TYy5wcm90b3R5cGUub2U7U2MucHJvdG90eXBlLm9uPVNjLnByb3RvdHlwZS52O3IoXCJvbC5jb29yZGluYXRlLmNyZWF0ZVN0cmluZ1hZXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiP1wie3h9LCB7eX1cIi5yZXBsYWNlKFwie3h9XCIsYlswXS50b0ZpeGVkKGEpKS5yZXBsYWNlKFwie3l9XCIsYlsxXS50b0ZpeGVkKGEpKTpcIlwifX0pO3IoXCJvbC5mb3JtYXQuRXNyaUpTT05cIixwbCk7cGwucHJvdG90eXBlLnJlYWRGZWF0dXJlcz1wbC5wcm90b3R5cGUuVGE7cGwucHJvdG90eXBlLndyaXRlRmVhdHVyZT1wbC5wcm90b3R5cGUuQ2M7cihcIm9sLmZvcm1hdC5HZW9KU09OXCIsRG0pO0RtLnByb3RvdHlwZS5yZWFkRmVhdHVyZT1EbS5wcm90b3R5cGUuTWI7RG0ucHJvdG90eXBlLnJlYWRGZWF0dXJlcz1EbS5wcm90b3R5cGUuVGE7XG5EbS5wcm90b3R5cGUud3JpdGVGZWF0dXJlT2JqZWN0PURtLnByb3RvdHlwZS56YjtEbS5wcm90b3R5cGUud3JpdGVGZWF0dXJlc09iamVjdD1EbS5wcm90b3R5cGUuQ2Q7cihcIm9sLmZvcm1hdC5NVlRcIixGbyk7cihcIm9sLmZvcm1hdC5Ub3BvSlNPTlwiLE9vKTtPby5wcm90b3R5cGUucmVhZEZlYXR1cmVzPU9vLnByb3RvdHlwZS5UYTtyKFwib2wuZm9ybWF0LldLVFwiLGRwKTtkcC5wcm90b3R5cGUucmVhZEZlYXR1cmU9ZHAucHJvdG90eXBlLk1iO2RwLnByb3RvdHlwZS5yZWFkRmVhdHVyZXM9ZHAucHJvdG90eXBlLlRhO3IoXCJvbC5mb3JtYXQuV0ZTXCIsVW8pO1VvLnByb3RvdHlwZS5yZWFkRmVhdHVyZXM9VW8ucHJvdG90eXBlLlRhO1VvLnByb3RvdHlwZS5yZWFkVHJhbnNhY3Rpb25SZXNwb25zZT1Vby5wcm90b3R5cGUuYjtVby5wcm90b3R5cGUud3JpdGVUcmFuc2FjdGlvbj1Vby5wcm90b3R5cGUuZztyKFwib2wuZ2VvbS5DaXJjbGVcIixycSk7cnEucHJvdG90eXBlLmNsb25lPXJxLnByb3RvdHlwZS5jbG9uZTtcbnJxLnByb3RvdHlwZS5nZXRDZW50ZXI9cnEucHJvdG90eXBlLmphO3JxLnByb3RvdHlwZS5nZXRSYWRpdXM9cnEucHJvdG90eXBlLkpiO3JxLnByb3RvdHlwZS5nZXRUeXBlPXJxLnByb3RvdHlwZS5EO3IoXCJvbC5nZW9tLkdlb21ldHJ5XCIsUWUpO1FlLnByb3RvdHlwZS5nZXRFeHRlbnQ9UWUucHJvdG90eXBlLkk7UWUucHJvdG90eXBlLm9uPVFlLnByb3RvdHlwZS52O1FlLnByb3RvdHlwZS50cmFuc2Zvcm09UWUucHJvdG90eXBlLnhiO3IoXCJvbC5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvblwiLEFtKTtBbS5wcm90b3R5cGUuZ2V0VHlwZT1BbS5wcm90b3R5cGUuRDtyKFwib2wuZ2VvbS5MaW5lU3RyaW5nXCIsRSk7RS5wcm90b3R5cGUuYXBwZW5kQ29vcmRpbmF0ZT1FLnByb3RvdHlwZS5kZztFLnByb3RvdHlwZS5jbG9uZT1FLnByb3RvdHlwZS5jbG9uZTtFLnByb3RvdHlwZS5nZXRDb29yZGluYXRlQXQ9RS5wcm90b3R5cGUuJGQ7RS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUF0TT1FLnByb3RvdHlwZS5IZTtcbkUucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPUUucHJvdG90eXBlLkc7RS5wcm90b3R5cGUuZ2V0Rmlyc3RDb29yZGluYXRlPUUucHJvdG90eXBlLkZiO0UucHJvdG90eXBlLmdldExhc3RDb29yZGluYXRlPUUucHJvdG90eXBlLkRnO0UucHJvdG90eXBlLmdldExlbmd0aD1FLnByb3RvdHlwZS5WaDtFLnByb3RvdHlwZS5nZXRUeXBlPUUucHJvdG90eXBlLkQ7RS5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXM9RS5wcm90b3R5cGUuWTtqZi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9amYucHJvdG90eXBlLkc7cihcIm9sLmdlb20uTXVsdGlMaW5lU3RyaW5nXCIsaGwpO2hsLnByb3RvdHlwZS5jbG9uZT1obC5wcm90b3R5cGUuY2xvbmU7RS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUF0TT1FLnByb3RvdHlwZS5IZTtobC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9aGwucHJvdG90eXBlLkc7aGwucHJvdG90eXBlLmdldEZpcnN0Q29vcmRpbmF0ZT1obC5wcm90b3R5cGUuRmI7XG5obC5wcm90b3R5cGUuZ2V0TGluZVN0cmluZ3M9aGwucHJvdG90eXBlLnRiO2hsLnByb3RvdHlwZS5nZXRUeXBlPWhsLnByb3RvdHlwZS5EO2hsLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcz1obC5wcm90b3R5cGUuWTtyKFwib2wuZ2VvbS5NdWx0aVBvaW50XCIsamwpO2psLnByb3RvdHlwZS5jbG9uZT1qbC5wcm90b3R5cGUuY2xvbmU7amwucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWpsLnByb3RvdHlwZS5HO2psLnByb3RvdHlwZS5nZXRGaXJzdENvb3JkaW5hdGU9amwucHJvdG90eXBlLkZiO2psLnByb3RvdHlwZS5nZXRUeXBlPWpsLnByb3RvdHlwZS5EO2psLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcz1qbC5wcm90b3R5cGUuWTtyKFwib2wuZ2VvbS5NdWx0aVBvbHlnb25cIixsbCk7bGwucHJvdG90eXBlLmNsb25lPWxsLnByb3RvdHlwZS5jbG9uZTtsbC5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9bGwucHJvdG90eXBlLkc7bGwucHJvdG90eXBlLmdldEFyZWE9bGwucHJvdG90eXBlLldoO1xubGwucHJvdG90eXBlLmdldEZpcnN0Q29vcmRpbmF0ZT1sbC5wcm90b3R5cGUuRmI7bGwucHJvdG90eXBlLmdldEludGVyaW9yUG9pbnRzPWxsLnByb3RvdHlwZS5DZztsbC5wcm90b3R5cGUuZ2V0VHlwZT1sbC5wcm90b3R5cGUuRDtsbC5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXM9bGwucHJvdG90eXBlLlk7cihcIm9sLmdlb20uUG9pbnRcIixsZik7bGYucHJvdG90eXBlLmNsb25lPWxmLnByb3RvdHlwZS5jbG9uZTtsZi5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9bGYucHJvdG90eXBlLkc7bGYucHJvdG90eXBlLmdldFR5cGU9bGYucHJvdG90eXBlLkQ7bGYucHJvdG90eXBlLnNldENvb3JkaW5hdGVzPWxmLnByb3RvdHlwZS5ZO3IoXCJvbC5nZW9tLlBvbHlnb25cIixBKTtBLnByb3RvdHlwZS5jbG9uZT1BLnByb3RvdHlwZS5jbG9uZTtBLnByb3RvdHlwZS5nZXRBcmVhPUEucHJvdG90eXBlLlhoO0EucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPUEucHJvdG90eXBlLkc7XG5BLnByb3RvdHlwZS5nZXRGaXJzdENvb3JkaW5hdGU9QS5wcm90b3R5cGUuRmI7QS5wcm90b3R5cGUuZ2V0SW50ZXJpb3JQb2ludD1BLnByb3RvdHlwZS5CZztBLnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nPUEucHJvdG90eXBlLmVlO0EucHJvdG90eXBlLmdldFR5cGU9QS5wcm90b3R5cGUuRDtBLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcz1BLnByb3RvdHlwZS5ZO3IoXCJvbC5TcGhlcmVcIixlYik7cihcIm9sLlNwaGVyZS5nZXRBcmVhXCIsamIpO3IoXCJvbC5TcGhlcmUuZ2V0TGVuZ3RoXCIsZmIpO3IoXCJvbC5sb2FkaW5nc3RyYXRlZ3kuYWxsXCIsdXEpO3IoXCJvbC5sb2FkaW5nc3RyYXRlZ3kuYmJveFwiLGZ1bmN0aW9uKGEpe3JldHVyblthXX0pO1xucihcIm9sLmxvYWRpbmdzdHJhdGVneS50aWxlXCIsZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7Yz1vYyhhLGMpO2I9ZGMoYSxiLGMpO3ZhciBkPVtdO2M9W2MsMCwwXTtmb3IoY1sxXT1iLlQ7Y1sxXTw9Yi5XOysrY1sxXSlmb3IoY1syXT1iLlI7Y1syXTw9Yi5VOysrY1syXSlkLnB1c2goaGMoYSxjKSk7cmV0dXJuIGR9fSk7XG4gIHJldHVybiBPUEVOTEFZRVJTLm9sO1xufSkpO1xuXG4iLCJ2YXIgbWdycyA9IHJlcXVpcmUoJ21ncnMnKTtcblxuZnVuY3Rpb24gUG9pbnQoeCwgeSwgeikge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUG9pbnQpKSB7XG4gICAgcmV0dXJuIG5ldyBQb2ludCh4LCB5LCB6KTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheSh4KSkge1xuICAgIHRoaXMueCA9IHhbMF07XG4gICAgdGhpcy55ID0geFsxXTtcbiAgICB0aGlzLnogPSB4WzJdIHx8IDAuMDtcbiAgfWVsc2UgaWYodHlwZW9mIHggPT09ICdvYmplY3QnKXtcbiAgICB0aGlzLnggPSB4Lng7XG4gICAgdGhpcy55ID0geC55O1xuICAgIHRoaXMueiA9IHgueiB8fCAwLjA7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHggPT09ICdzdHJpbmcnICYmIHR5cGVvZiB5ID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBjb29yZHMgPSB4LnNwbGl0KCcsJyk7XG4gICAgdGhpcy54ID0gcGFyc2VGbG9hdChjb29yZHNbMF0sIDEwKTtcbiAgICB0aGlzLnkgPSBwYXJzZUZsb2F0KGNvb3Jkc1sxXSwgMTApO1xuICAgIHRoaXMueiA9IHBhcnNlRmxvYXQoY29vcmRzWzJdLCAxMCkgfHwgMC4wO1xuICB9XG4gIGVsc2Uge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6IHx8IDAuMDtcbiAgfVxuICBjb25zb2xlLndhcm4oJ3Byb2o0LlBvaW50IHdpbGwgYmUgcmVtb3ZlZCBpbiB2ZXJzaW9uIDMsIHVzZSBwcm9qNC50b1BvaW50Jyk7XG59XG5cblBvaW50LmZyb21NR1JTID0gZnVuY3Rpb24obWdyc1N0cikge1xuICByZXR1cm4gbmV3IFBvaW50KG1ncnMudG9Qb2ludChtZ3JzU3RyKSk7XG59O1xuUG9pbnQucHJvdG90eXBlLnRvTUdSUyA9IGZ1bmN0aW9uKGFjY3VyYWN5KSB7XG4gIHJldHVybiBtZ3JzLmZvcndhcmQoW3RoaXMueCwgdGhpcy55XSwgYWNjdXJhY3kpO1xufTtcbm1vZHVsZS5leHBvcnRzID0gUG9pbnQ7IiwidmFyIHBhcnNlQ29kZSA9IHJlcXVpcmUoXCIuL3BhcnNlQ29kZVwiKTtcbnZhciBleHRlbmQgPSByZXF1aXJlKCcuL2V4dGVuZCcpO1xudmFyIHByb2plY3Rpb25zID0gcmVxdWlyZSgnLi9wcm9qZWN0aW9ucycpO1xudmFyIGRlcml2ZUNvbnN0YW50cyA9IHJlcXVpcmUoJy4vZGVyaXZlQ29uc3RhbnRzJyk7XG5cbmZ1bmN0aW9uIFByb2plY3Rpb24oc3JzQ29kZSxjYWxsYmFjaykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgUHJvamVjdGlvbikpIHtcbiAgICByZXR1cm4gbmV3IFByb2plY3Rpb24oc3JzQ29kZSk7XG4gIH1cbiAgY2FsbGJhY2sgPSBjYWxsYmFjayB8fCBmdW5jdGlvbihlcnJvcil7XG4gICAgaWYoZXJyb3Ipe1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9O1xuICB2YXIganNvbiA9IHBhcnNlQ29kZShzcnNDb2RlKTtcbiAgaWYodHlwZW9mIGpzb24gIT09ICdvYmplY3QnKXtcbiAgICBjYWxsYmFjayhzcnNDb2RlKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG1vZGlmaWVkSlNPTiA9IGRlcml2ZUNvbnN0YW50cyhqc29uKTtcbiAgdmFyIG91clByb2ogPSBQcm9qZWN0aW9uLnByb2plY3Rpb25zLmdldChtb2RpZmllZEpTT04ucHJvak5hbWUpO1xuICBpZihvdXJQcm9qKXtcbiAgICBleHRlbmQodGhpcywgbW9kaWZpZWRKU09OKTtcbiAgICBleHRlbmQodGhpcywgb3VyUHJvaik7XG4gICAgdGhpcy5pbml0KCk7XG4gICAgY2FsbGJhY2sobnVsbCwgdGhpcyk7XG4gIH1lbHNle1xuICAgIGNhbGxiYWNrKHNyc0NvZGUpO1xuICB9XG59XG5Qcm9qZWN0aW9uLnByb2plY3Rpb25zID0gcHJvamVjdGlvbnM7XG5Qcm9qZWN0aW9uLnByb2plY3Rpb25zLnN0YXJ0KCk7XG5tb2R1bGUuZXhwb3J0cyA9IFByb2plY3Rpb247XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGNycywgZGVub3JtLCBwb2ludCkge1xuICB2YXIgeGluID0gcG9pbnQueCxcbiAgICB5aW4gPSBwb2ludC55LFxuICAgIHppbiA9IHBvaW50LnogfHwgMC4wO1xuICB2YXIgdiwgdCwgaTtcbiAgZm9yIChpID0gMDsgaSA8IDM7IGkrKykge1xuICAgIGlmIChkZW5vcm0gJiYgaSA9PT0gMiAmJiBwb2ludC56ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgdiA9IHhpbjtcbiAgICAgIHQgPSAneCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKGkgPT09IDEpIHtcbiAgICAgIHYgPSB5aW47XG4gICAgICB0ID0gJ3knO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHYgPSB6aW47XG4gICAgICB0ID0gJ3onO1xuICAgIH1cbiAgICBzd2l0Y2ggKGNycy5heGlzW2ldKSB7XG4gICAgY2FzZSAnZSc6XG4gICAgICBwb2ludFt0XSA9IHY7XG4gICAgICBicmVhaztcbiAgICBjYXNlICd3JzpcbiAgICAgIHBvaW50W3RdID0gLXY7XG4gICAgICBicmVhaztcbiAgICBjYXNlICduJzpcbiAgICAgIHBvaW50W3RdID0gdjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3MnOlxuICAgICAgcG9pbnRbdF0gPSAtdjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3UnOlxuICAgICAgaWYgKHBvaW50W3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcG9pbnQueiA9IHY7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICBjYXNlICdkJzpcbiAgICAgIGlmIChwb2ludFt0XSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBvaW50LnogPSAtdjtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICAvL2NvbnNvbGUubG9nKFwiRVJST1I6IHVua25vdyBheGlzIChcIitjcnMuYXhpc1tpXStcIikgLSBjaGVjayBkZWZpbml0aW9uIG9mIFwiK2Nycy5wcm9qTmFtZSk7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBvaW50O1xufTtcbiIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIHNpZ24gPSByZXF1aXJlKCcuL3NpZ24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiAoTWF0aC5hYnMoeCkgPCBIQUxGX1BJKSA/IHggOiAoeCAtIChzaWduKHgpICogTWF0aC5QSSkpO1xufTsiLCJ2YXIgVFdPX1BJID0gTWF0aC5QSSAqIDI7XG4vLyBTUEkgaXMgc2xpZ2h0bHkgZ3JlYXRlciB0aGFuIE1hdGguUEksIHNvIHZhbHVlcyB0aGF0IGV4Y2VlZCB0aGUgLTE4MC4uMTgwXG4vLyBkZWdyZWUgcmFuZ2UgYnkgYSB0aW55IGFtb3VudCBkb24ndCBnZXQgd3JhcHBlZC4gVGhpcyBwcmV2ZW50cyBwb2ludHMgdGhhdFxuLy8gaGF2ZSBkcmlmdGVkIGZyb20gdGhlaXIgb3JpZ2luYWwgbG9jYXRpb24gYWxvbmcgdGhlIDE4MHRoIG1lcmlkaWFuIChkdWUgdG9cbi8vIGZsb2F0aW5nIHBvaW50IGVycm9yKSBmcm9tIGNoYW5naW5nIHRoZWlyIHNpZ24uXG52YXIgU1BJID0gMy4xNDE1OTI2NTM1OTtcbnZhciBzaWduID0gcmVxdWlyZSgnLi9zaWduJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oeCkge1xuICByZXR1cm4gKE1hdGguYWJzKHgpIDw9IFNQSSkgPyB4IDogKHggLSAoc2lnbih4KSAqIFRXT19QSSkpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHgpIHtcbiAgaWYgKE1hdGguYWJzKHgpID4gMSkge1xuICAgIHggPSAoeCA+IDEpID8gMSA6IC0xO1xuICB9XG4gIHJldHVybiBNYXRoLmFzaW4oeCk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oeCkge1xuICByZXR1cm4gKDEgLSAwLjI1ICogeCAqICgxICsgeCAvIDE2ICogKDMgKyAxLjI1ICogeCkpKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiAoMC4zNzUgKiB4ICogKDEgKyAwLjI1ICogeCAqICgxICsgMC40Njg3NSAqIHgpKSk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oeCkge1xuICByZXR1cm4gKDAuMDU4NTkzNzUgKiB4ICogeCAqICgxICsgMC43NSAqIHgpKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiAoeCAqIHggKiB4ICogKDM1IC8gMzA3MikpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGEsIGUsIHNpbnBoaSkge1xuICB2YXIgdGVtcCA9IGUgKiBzaW5waGk7XG4gIHJldHVybiBhIC8gTWF0aC5zcXJ0KDEgLSB0ZW1wICogdGVtcCk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obWwsIGUwLCBlMSwgZTIsIGUzKSB7XG4gIHZhciBwaGk7XG4gIHZhciBkcGhpO1xuXG4gIHBoaSA9IG1sIC8gZTA7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgMTU7IGkrKykge1xuICAgIGRwaGkgPSAobWwgLSAoZTAgKiBwaGkgLSBlMSAqIE1hdGguc2luKDIgKiBwaGkpICsgZTIgKiBNYXRoLnNpbig0ICogcGhpKSAtIGUzICogTWF0aC5zaW4oNiAqIHBoaSkpKSAvIChlMCAtIDIgKiBlMSAqIE1hdGguY29zKDIgKiBwaGkpICsgNCAqIGUyICogTWF0aC5jb3MoNCAqIHBoaSkgLSA2ICogZTMgKiBNYXRoLmNvcyg2ICogcGhpKSk7XG4gICAgcGhpICs9IGRwaGk7XG4gICAgaWYgKE1hdGguYWJzKGRwaGkpIDw9IDAuMDAwMDAwMDAwMSkge1xuICAgICAgcmV0dXJuIHBoaTtcbiAgICB9XG4gIH1cblxuICAvLy4ucmVwb3J0RXJyb3IoXCJJTUxGTi1DT05WOkxhdGl0dWRlIGZhaWxlZCB0byBjb252ZXJnZSBhZnRlciAxNSBpdGVyYXRpb25zXCIpO1xuICByZXR1cm4gTmFOO1xufTsiLCJ2YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlY2NlbnQsIHEpIHtcbiAgdmFyIHRlbXAgPSAxIC0gKDEgLSBlY2NlbnQgKiBlY2NlbnQpIC8gKDIgKiBlY2NlbnQpICogTWF0aC5sb2coKDEgLSBlY2NlbnQpIC8gKDEgKyBlY2NlbnQpKTtcbiAgaWYgKE1hdGguYWJzKE1hdGguYWJzKHEpIC0gdGVtcCkgPCAxLjBFLTYpIHtcbiAgICBpZiAocSA8IDApIHtcbiAgICAgIHJldHVybiAoLTEgKiBIQUxGX1BJKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gSEFMRl9QSTtcbiAgICB9XG4gIH1cbiAgLy92YXIgcGhpID0gMC41KiBxLygxLWVjY2VudCplY2NlbnQpO1xuICB2YXIgcGhpID0gTWF0aC5hc2luKDAuNSAqIHEpO1xuICB2YXIgZHBoaTtcbiAgdmFyIHNpbl9waGk7XG4gIHZhciBjb3NfcGhpO1xuICB2YXIgY29uO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IDMwOyBpKyspIHtcbiAgICBzaW5fcGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICBjb3NfcGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICBjb24gPSBlY2NlbnQgKiBzaW5fcGhpO1xuICAgIGRwaGkgPSBNYXRoLnBvdygxIC0gY29uICogY29uLCAyKSAvICgyICogY29zX3BoaSkgKiAocSAvICgxIC0gZWNjZW50ICogZWNjZW50KSAtIHNpbl9waGkgLyAoMSAtIGNvbiAqIGNvbikgKyAwLjUgLyBlY2NlbnQgKiBNYXRoLmxvZygoMSAtIGNvbikgLyAoMSArIGNvbikpKTtcbiAgICBwaGkgKz0gZHBoaTtcbiAgICBpZiAoTWF0aC5hYnMoZHBoaSkgPD0gMC4wMDAwMDAwMDAxKSB7XG4gICAgICByZXR1cm4gcGhpO1xuICAgIH1cbiAgfVxuXG4gIC8vY29uc29sZS5sb2coXCJJUVNGTi1DT05WOkxhdGl0dWRlIGZhaWxlZCB0byBjb252ZXJnZSBhZnRlciAzMCBpdGVyYXRpb25zXCIpO1xuICByZXR1cm4gTmFOO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGUwLCBlMSwgZTIsIGUzLCBwaGkpIHtcbiAgcmV0dXJuIChlMCAqIHBoaSAtIGUxICogTWF0aC5zaW4oMiAqIHBoaSkgKyBlMiAqIE1hdGguc2luKDQgKiBwaGkpIC0gZTMgKiBNYXRoLnNpbig2ICogcGhpKSk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZWNjZW50LCBzaW5waGksIGNvc3BoaSkge1xuICB2YXIgY29uID0gZWNjZW50ICogc2lucGhpO1xuICByZXR1cm4gY29zcGhpIC8gKE1hdGguc3FydCgxIC0gY29uICogY29uKSk7XG59OyIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlY2NlbnQsIHRzKSB7XG4gIHZhciBlY2NudGggPSAwLjUgKiBlY2NlbnQ7XG4gIHZhciBjb24sIGRwaGk7XG4gIHZhciBwaGkgPSBIQUxGX1BJIC0gMiAqIE1hdGguYXRhbih0cyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDw9IDE1OyBpKyspIHtcbiAgICBjb24gPSBlY2NlbnQgKiBNYXRoLnNpbihwaGkpO1xuICAgIGRwaGkgPSBIQUxGX1BJIC0gMiAqIE1hdGguYXRhbih0cyAqIChNYXRoLnBvdygoKDEgLSBjb24pIC8gKDEgKyBjb24pKSwgZWNjbnRoKSkpIC0gcGhpO1xuICAgIHBoaSArPSBkcGhpO1xuICAgIGlmIChNYXRoLmFicyhkcGhpKSA8PSAwLjAwMDAwMDAwMDEpIHtcbiAgICAgIHJldHVybiBwaGk7XG4gICAgfVxuICB9XG4gIC8vY29uc29sZS5sb2coXCJwaGkyeiBoYXMgTm9Db252ZXJnZW5jZVwiKTtcbiAgcmV0dXJuIC05OTk5O1xufTsiLCJ2YXIgQzAwID0gMTtcbnZhciBDMDIgPSAwLjI1O1xudmFyIEMwNCA9IDAuMDQ2ODc1O1xudmFyIEMwNiA9IDAuMDE5NTMxMjU7XG52YXIgQzA4ID0gMC4wMTA2ODExNTIzNDM3NTtcbnZhciBDMjIgPSAwLjc1O1xudmFyIEM0NCA9IDAuNDY4NzU7XG52YXIgQzQ2ID0gMC4wMTMwMjA4MzMzMzMzMzMzMzMzMztcbnZhciBDNDggPSAwLjAwNzEyMDc2ODIyOTE2NjY2NjY2O1xudmFyIEM2NiA9IDAuMzY0NTgzMzMzMzMzMzMzMzMzMzM7XG52YXIgQzY4ID0gMC4wMDU2OTY2MTQ1ODMzMzMzMzMzMztcbnZhciBDODggPSAwLjMwNzYxNzE4NzU7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXMpIHtcbiAgdmFyIGVuID0gW107XG4gIGVuWzBdID0gQzAwIC0gZXMgKiAoQzAyICsgZXMgKiAoQzA0ICsgZXMgKiAoQzA2ICsgZXMgKiBDMDgpKSk7XG4gIGVuWzFdID0gZXMgKiAoQzIyIC0gZXMgKiAoQzA0ICsgZXMgKiAoQzA2ICsgZXMgKiBDMDgpKSk7XG4gIHZhciB0ID0gZXMgKiBlcztcbiAgZW5bMl0gPSB0ICogKEM0NCAtIGVzICogKEM0NiArIGVzICogQzQ4KSk7XG4gIHQgKj0gZXM7XG4gIGVuWzNdID0gdCAqIChDNjYgLSBlcyAqIEM2OCk7XG4gIGVuWzRdID0gdCAqIGVzICogQzg4O1xuICByZXR1cm4gZW47XG59OyIsInZhciBwal9tbGZuID0gcmVxdWlyZShcIi4vcGpfbWxmblwiKTtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG52YXIgTUFYX0lURVIgPSAyMDtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYXJnLCBlcywgZW4pIHtcbiAgdmFyIGsgPSAxIC8gKDEgLSBlcyk7XG4gIHZhciBwaGkgPSBhcmc7XG4gIGZvciAodmFyIGkgPSBNQVhfSVRFUjsgaTsgLS1pKSB7IC8qIHJhcmVseSBnb2VzIG92ZXIgMiBpdGVyYXRpb25zICovXG4gICAgdmFyIHMgPSBNYXRoLnNpbihwaGkpO1xuICAgIHZhciB0ID0gMSAtIGVzICogcyAqIHM7XG4gICAgLy90ID0gdGhpcy5wal9tbGZuKHBoaSwgcywgTWF0aC5jb3MocGhpKSwgZW4pIC0gYXJnO1xuICAgIC8vcGhpIC09IHQgKiAodCAqIE1hdGguc3FydCh0KSkgKiBrO1xuICAgIHQgPSAocGpfbWxmbihwaGksIHMsIE1hdGguY29zKHBoaSksIGVuKSAtIGFyZykgKiAodCAqIE1hdGguc3FydCh0KSkgKiBrO1xuICAgIHBoaSAtPSB0O1xuICAgIGlmIChNYXRoLmFicyh0KSA8IEVQU0xOKSB7XG4gICAgICByZXR1cm4gcGhpO1xuICAgIH1cbiAgfVxuICAvLy4ucmVwb3J0RXJyb3IoXCJjYXNzOnBqX2ludl9tbGZuOiBDb252ZXJnZW5jZSBlcnJvclwiKTtcbiAgcmV0dXJuIHBoaTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihwaGksIHNwaGksIGNwaGksIGVuKSB7XG4gIGNwaGkgKj0gc3BoaTtcbiAgc3BoaSAqPSBzcGhpO1xuICByZXR1cm4gKGVuWzBdICogcGhpIC0gY3BoaSAqIChlblsxXSArIHNwaGkgKiAoZW5bMl0gKyBzcGhpICogKGVuWzNdICsgc3BoaSAqIGVuWzRdKSkpKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlY2NlbnQsIHNpbnBoaSkge1xuICB2YXIgY29uO1xuICBpZiAoZWNjZW50ID4gMS4wZS03KSB7XG4gICAgY29uID0gZWNjZW50ICogc2lucGhpO1xuICAgIHJldHVybiAoKDEgLSBlY2NlbnQgKiBlY2NlbnQpICogKHNpbnBoaSAvICgxIC0gY29uICogY29uKSAtICgwLjUgLyBlY2NlbnQpICogTWF0aC5sb2coKDEgLSBjb24pIC8gKDEgKyBjb24pKSkpO1xuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiAoMiAqIHNpbnBoaSk7XG4gIH1cbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiB4PDAgPyAtMSA6IDE7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZXNpbnAsIGV4cCkge1xuICByZXR1cm4gKE1hdGgucG93KCgxIC0gZXNpbnApIC8gKDEgKyBlc2lucCksIGV4cCkpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChhcnJheSl7XG4gIHZhciBvdXQgPSB7XG4gICAgeDogYXJyYXlbMF0sXG4gICAgeTogYXJyYXlbMV1cbiAgfTtcbiAgaWYgKGFycmF5Lmxlbmd0aD4yKSB7XG4gICAgb3V0LnogPSBhcnJheVsyXTtcbiAgfVxuICBpZiAoYXJyYXkubGVuZ3RoPjMpIHtcbiAgICBvdXQubSA9IGFycmF5WzNdO1xuICB9XG4gIHJldHVybiBvdXQ7XG59OyIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGVjY2VudCwgcGhpLCBzaW5waGkpIHtcbiAgdmFyIGNvbiA9IGVjY2VudCAqIHNpbnBoaTtcbiAgdmFyIGNvbSA9IDAuNSAqIGVjY2VudDtcbiAgY29uID0gTWF0aC5wb3coKCgxIC0gY29uKSAvICgxICsgY29uKSksIGNvbSk7XG4gIHJldHVybiAoTWF0aC50YW4oMC41ICogKEhBTEZfUEkgLSBwaGkpKSAvIGNvbik7XG59OyIsImV4cG9ydHMud2dzODQgPSB7XG4gIHRvd2dzODQ6IFwiMCwwLDBcIixcbiAgZWxsaXBzZTogXCJXR1M4NFwiLFxuICBkYXR1bU5hbWU6IFwiV0dTODRcIlxufTtcbmV4cG9ydHMuY2gxOTAzID0ge1xuICB0b3dnczg0OiBcIjY3NC4zNzQsMTUuMDU2LDQwNS4zNDZcIixcbiAgZWxsaXBzZTogXCJiZXNzZWxcIixcbiAgZGF0dW1OYW1lOiBcInN3aXNzXCJcbn07XG5leHBvcnRzLmdncnM4NyA9IHtcbiAgdG93Z3M4NDogXCItMTk5Ljg3LDc0Ljc5LDI0Ni42MlwiLFxuICBlbGxpcHNlOiBcIkdSUzgwXCIsXG4gIGRhdHVtTmFtZTogXCJHcmVla19HZW9kZXRpY19SZWZlcmVuY2VfU3lzdGVtXzE5ODdcIlxufTtcbmV4cG9ydHMubmFkODMgPSB7XG4gIHRvd2dzODQ6IFwiMCwwLDBcIixcbiAgZWxsaXBzZTogXCJHUlM4MFwiLFxuICBkYXR1bU5hbWU6IFwiTm9ydGhfQW1lcmljYW5fRGF0dW1fMTk4M1wiXG59O1xuZXhwb3J0cy5uYWQyNyA9IHtcbiAgbmFkZ3JpZHM6IFwiQGNvbnVzLEBhbGFza2EsQG50djJfMC5nc2IsQG50djFfY2FuLmRhdFwiLFxuICBlbGxpcHNlOiBcImNscms2NlwiLFxuICBkYXR1bU5hbWU6IFwiTm9ydGhfQW1lcmljYW5fRGF0dW1fMTkyN1wiXG59O1xuZXhwb3J0cy5wb3RzZGFtID0ge1xuICB0b3dnczg0OiBcIjYwNi4wLDIzLjAsNDEzLjBcIixcbiAgZWxsaXBzZTogXCJiZXNzZWxcIixcbiAgZGF0dW1OYW1lOiBcIlBvdHNkYW0gUmF1ZW5iZXJnIDE5NTAgREhETlwiXG59O1xuZXhwb3J0cy5jYXJ0aGFnZSA9IHtcbiAgdG93Z3M4NDogXCItMjYzLjAsNi4wLDQzMS4wXCIsXG4gIGVsbGlwc2U6IFwiY2xhcms4MFwiLFxuICBkYXR1bU5hbWU6IFwiQ2FydGhhZ2UgMTkzNCBUdW5pc2lhXCJcbn07XG5leHBvcnRzLmhlcm1hbm5za29nZWwgPSB7XG4gIHRvd2dzODQ6IFwiNjUzLjAsLTIxMi4wLDQ0OS4wXCIsXG4gIGVsbGlwc2U6IFwiYmVzc2VsXCIsXG4gIGRhdHVtTmFtZTogXCJIZXJtYW5uc2tvZ2VsXCJcbn07XG5leHBvcnRzLmlyZTY1ID0ge1xuICB0b3dnczg0OiBcIjQ4Mi41MzAsLTEzMC41OTYsNTY0LjU1NywtMS4wNDIsLTAuMjE0LC0wLjYzMSw4LjE1XCIsXG4gIGVsbGlwc2U6IFwibW9kX2FpcnlcIixcbiAgZGF0dW1OYW1lOiBcIklyZWxhbmQgMTk2NVwiXG59O1xuZXhwb3J0cy5yYXNzYWRpcmFuID0ge1xuICB0b3dnczg0OiBcIi0xMzMuNjMsLTE1Ny41LC0xNTguNjJcIixcbiAgZWxsaXBzZTogXCJpbnRsXCIsXG4gIGRhdHVtTmFtZTogXCJSYXNzYWRpcmFuXCJcbn07XG5leHBvcnRzLm56Z2Q0OSA9IHtcbiAgdG93Z3M4NDogXCI1OS40NywtNS4wNCwxODcuNDQsMC40NywtMC4xLDEuMDI0LC00LjU5OTNcIixcbiAgZWxsaXBzZTogXCJpbnRsXCIsXG4gIGRhdHVtTmFtZTogXCJOZXcgWmVhbGFuZCBHZW9kZXRpYyBEYXR1bSAxOTQ5XCJcbn07XG5leHBvcnRzLm9zZ2IzNiA9IHtcbiAgdG93Z3M4NDogXCI0NDYuNDQ4LC0xMjUuMTU3LDU0Mi4wNjAsMC4xNTAyLDAuMjQ3MCwwLjg0MjEsLTIwLjQ4OTRcIixcbiAgZWxsaXBzZTogXCJhaXJ5XCIsXG4gIGRhdHVtTmFtZTogXCJBaXJ5IDE4MzBcIlxufTtcbmV4cG9ydHMuc19qdHNrID0ge1xuICB0b3dnczg0OiBcIjU4OSw3Niw0ODBcIixcbiAgZWxsaXBzZTogJ2Jlc3NlbCcsXG4gIGRhdHVtTmFtZTogJ1MtSlRTSyAoRmVycm8pJ1xufTtcbmV4cG9ydHMuYmVkdWFyYW0gPSB7XG4gIHRvd2dzODQ6ICctMTA2LC04NywxODgnLFxuICBlbGxpcHNlOiAnY2xyazgwJyxcbiAgZGF0dW1OYW1lOiAnQmVkdWFyYW0nXG59O1xuZXhwb3J0cy5ndW51bmdfc2VnYXJhID0ge1xuICB0b3dnczg0OiAnLTQwMyw2ODQsNDEnLFxuICBlbGxpcHNlOiAnYmVzc2VsJyxcbiAgZGF0dW1OYW1lOiAnR3VudW5nIFNlZ2FyYSBKYWthcnRhJ1xufTtcbmV4cG9ydHMucm5iNzIgPSB7XG4gIHRvd2dzODQ6IFwiMTA2Ljg2OSwtNTIuMjk3OCwxMDMuNzI0LC0wLjMzNjU3LDAuNDU2OTU1LC0xLjg0MjE4LDFcIixcbiAgZWxsaXBzZTogXCJpbnRsXCIsXG4gIGRhdHVtTmFtZTogXCJSZXNlYXUgTmF0aW9uYWwgQmVsZ2UgMTk3MlwiXG59OyIsImV4cG9ydHMuTUVSSVQgPSB7XG4gIGE6IDYzNzgxMzcuMCxcbiAgcmY6IDI5OC4yNTcsXG4gIGVsbGlwc2VOYW1lOiBcIk1FUklUIDE5ODNcIlxufTtcbmV4cG9ydHMuU0dTODUgPSB7XG4gIGE6IDYzNzgxMzYuMCxcbiAgcmY6IDI5OC4yNTcsXG4gIGVsbGlwc2VOYW1lOiBcIlNvdmlldCBHZW9kZXRpYyBTeXN0ZW0gODVcIlxufTtcbmV4cG9ydHMuR1JTODAgPSB7XG4gIGE6IDYzNzgxMzcuMCxcbiAgcmY6IDI5OC4yNTcyMjIxMDEsXG4gIGVsbGlwc2VOYW1lOiBcIkdSUyAxOTgwKElVR0csIDE5ODApXCJcbn07XG5leHBvcnRzLklBVTc2ID0ge1xuICBhOiA2Mzc4MTQwLjAsXG4gIHJmOiAyOTguMjU3LFxuICBlbGxpcHNlTmFtZTogXCJJQVUgMTk3NlwiXG59O1xuZXhwb3J0cy5haXJ5ID0ge1xuICBhOiA2Mzc3NTYzLjM5NixcbiAgYjogNjM1NjI1Ni45MTAsXG4gIGVsbGlwc2VOYW1lOiBcIkFpcnkgMTgzMFwiXG59O1xuZXhwb3J0cy5BUEw0ID0ge1xuICBhOiA2Mzc4MTM3LFxuICByZjogMjk4LjI1LFxuICBlbGxpcHNlTmFtZTogXCJBcHBsLiBQaHlzaWNzLiAxOTY1XCJcbn07XG5leHBvcnRzLk5XTDlEID0ge1xuICBhOiA2Mzc4MTQ1LjAsXG4gIHJmOiAyOTguMjUsXG4gIGVsbGlwc2VOYW1lOiBcIk5hdmFsIFdlYXBvbnMgTGFiLiwgMTk2NVwiXG59O1xuZXhwb3J0cy5tb2RfYWlyeSA9IHtcbiAgYTogNjM3NzM0MC4xODksXG4gIGI6IDYzNTYwMzQuNDQ2LFxuICBlbGxpcHNlTmFtZTogXCJNb2RpZmllZCBBaXJ5XCJcbn07XG5leHBvcnRzLmFuZHJhZSA9IHtcbiAgYTogNjM3NzEwNC40MyxcbiAgcmY6IDMwMC4wLFxuICBlbGxpcHNlTmFtZTogXCJBbmRyYWUgMTg3NiAoRGVuLiwgSWNsbmQuKVwiXG59O1xuZXhwb3J0cy5hdXN0X1NBID0ge1xuICBhOiA2Mzc4MTYwLjAsXG4gIHJmOiAyOTguMjUsXG4gIGVsbGlwc2VOYW1lOiBcIkF1c3RyYWxpYW4gTmF0bCAmIFMuIEFtZXIuIDE5NjlcIlxufTtcbmV4cG9ydHMuR1JTNjcgPSB7XG4gIGE6IDYzNzgxNjAuMCxcbiAgcmY6IDI5OC4yNDcxNjc0MjcwLFxuICBlbGxpcHNlTmFtZTogXCJHUlMgNjcoSVVHRyAxOTY3KVwiXG59O1xuZXhwb3J0cy5iZXNzZWwgPSB7XG4gIGE6IDYzNzczOTcuMTU1LFxuICByZjogMjk5LjE1MjgxMjgsXG4gIGVsbGlwc2VOYW1lOiBcIkJlc3NlbCAxODQxXCJcbn07XG5leHBvcnRzLmJlc3NfbmFtID0ge1xuICBhOiA2Mzc3NDgzLjg2NSxcbiAgcmY6IDI5OS4xNTI4MTI4LFxuICBlbGxpcHNlTmFtZTogXCJCZXNzZWwgMTg0MSAoTmFtaWJpYSlcIlxufTtcbmV4cG9ydHMuY2xyazY2ID0ge1xuICBhOiA2Mzc4MjA2LjQsXG4gIGI6IDYzNTY1ODMuOCxcbiAgZWxsaXBzZU5hbWU6IFwiQ2xhcmtlIDE4NjZcIlxufTtcbmV4cG9ydHMuY2xyazgwID0ge1xuICBhOiA2Mzc4MjQ5LjE0NSxcbiAgcmY6IDI5My40NjYzLFxuICBlbGxpcHNlTmFtZTogXCJDbGFya2UgMTg4MCBtb2QuXCJcbn07XG5leHBvcnRzLmNscms1OCA9IHtcbiAgYTogNjM3ODI5My42NDUyMDg3NTksXG4gIHJmOiAyOTQuMjYwNjc2MzY5MjY1NCxcbiAgZWxsaXBzZU5hbWU6IFwiQ2xhcmtlIDE4NThcIlxufTtcbmV4cG9ydHMuQ1BNID0ge1xuICBhOiA2Mzc1NzM4LjcsXG4gIHJmOiAzMzQuMjksXG4gIGVsbGlwc2VOYW1lOiBcIkNvbW0uIGRlcyBQb2lkcyBldCBNZXN1cmVzIDE3OTlcIlxufTtcbmV4cG9ydHMuZGVsbWJyID0ge1xuICBhOiA2Mzc2NDI4LjAsXG4gIHJmOiAzMTEuNSxcbiAgZWxsaXBzZU5hbWU6IFwiRGVsYW1icmUgMTgxMCAoQmVsZ2l1bSlcIlxufTtcbmV4cG9ydHMuZW5nZWxpcyA9IHtcbiAgYTogNjM3ODEzNi4wNSxcbiAgcmY6IDI5OC4yNTY2LFxuICBlbGxpcHNlTmFtZTogXCJFbmdlbGlzIDE5ODVcIlxufTtcbmV4cG9ydHMuZXZyc3QzMCA9IHtcbiAgYTogNjM3NzI3Ni4zNDUsXG4gIHJmOiAzMDAuODAxNyxcbiAgZWxsaXBzZU5hbWU6IFwiRXZlcmVzdCAxODMwXCJcbn07XG5leHBvcnRzLmV2cnN0NDggPSB7XG4gIGE6IDYzNzczMDQuMDYzLFxuICByZjogMzAwLjgwMTcsXG4gIGVsbGlwc2VOYW1lOiBcIkV2ZXJlc3QgMTk0OFwiXG59O1xuZXhwb3J0cy5ldnJzdDU2ID0ge1xuICBhOiA2Mzc3MzAxLjI0MyxcbiAgcmY6IDMwMC44MDE3LFxuICBlbGxpcHNlTmFtZTogXCJFdmVyZXN0IDE5NTZcIlxufTtcbmV4cG9ydHMuZXZyc3Q2OSA9IHtcbiAgYTogNjM3NzI5NS42NjQsXG4gIHJmOiAzMDAuODAxNyxcbiAgZWxsaXBzZU5hbWU6IFwiRXZlcmVzdCAxOTY5XCJcbn07XG5leHBvcnRzLmV2cnN0U1MgPSB7XG4gIGE6IDYzNzcyOTguNTU2LFxuICByZjogMzAwLjgwMTcsXG4gIGVsbGlwc2VOYW1lOiBcIkV2ZXJlc3QgKFNhYmFoICYgU2FyYXdhaylcIlxufTtcbmV4cG9ydHMuZnNjaHI2MCA9IHtcbiAgYTogNjM3ODE2Ni4wLFxuICByZjogMjk4LjMsXG4gIGVsbGlwc2VOYW1lOiBcIkZpc2NoZXIgKE1lcmN1cnkgRGF0dW0pIDE5NjBcIlxufTtcbmV4cG9ydHMuZnNjaHI2MG0gPSB7XG4gIGE6IDYzNzgxNTUuMCxcbiAgcmY6IDI5OC4zLFxuICBlbGxpcHNlTmFtZTogXCJGaXNjaGVyIDE5NjBcIlxufTtcbmV4cG9ydHMuZnNjaHI2OCA9IHtcbiAgYTogNjM3ODE1MC4wLFxuICByZjogMjk4LjMsXG4gIGVsbGlwc2VOYW1lOiBcIkZpc2NoZXIgMTk2OFwiXG59O1xuZXhwb3J0cy5oZWxtZXJ0ID0ge1xuICBhOiA2Mzc4MjAwLjAsXG4gIHJmOiAyOTguMyxcbiAgZWxsaXBzZU5hbWU6IFwiSGVsbWVydCAxOTA2XCJcbn07XG5leHBvcnRzLmhvdWdoID0ge1xuICBhOiA2Mzc4MjcwLjAsXG4gIHJmOiAyOTcuMCxcbiAgZWxsaXBzZU5hbWU6IFwiSG91Z2hcIlxufTtcbmV4cG9ydHMuaW50bCA9IHtcbiAgYTogNjM3ODM4OC4wLFxuICByZjogMjk3LjAsXG4gIGVsbGlwc2VOYW1lOiBcIkludGVybmF0aW9uYWwgMTkwOSAoSGF5Zm9yZClcIlxufTtcbmV4cG9ydHMua2F1bGEgPSB7XG4gIGE6IDYzNzgxNjMuMCxcbiAgcmY6IDI5OC4yNCxcbiAgZWxsaXBzZU5hbWU6IFwiS2F1bGEgMTk2MVwiXG59O1xuZXhwb3J0cy5sZXJjaCA9IHtcbiAgYTogNjM3ODEzOS4wLFxuICByZjogMjk4LjI1NyxcbiAgZWxsaXBzZU5hbWU6IFwiTGVyY2ggMTk3OVwiXG59O1xuZXhwb3J0cy5tcHJ0cyA9IHtcbiAgYTogNjM5NzMwMC4wLFxuICByZjogMTkxLjAsXG4gIGVsbGlwc2VOYW1lOiBcIk1hdXBlcnRpdXMgMTczOFwiXG59O1xuZXhwb3J0cy5uZXdfaW50bCA9IHtcbiAgYTogNjM3ODE1Ny41LFxuICBiOiA2MzU2NzcyLjIsXG4gIGVsbGlwc2VOYW1lOiBcIk5ldyBJbnRlcm5hdGlvbmFsIDE5NjdcIlxufTtcbmV4cG9ydHMucGxlc3NpcyA9IHtcbiAgYTogNjM3NjUyMy4wLFxuICByZjogNjM1NTg2My4wLFxuICBlbGxpcHNlTmFtZTogXCJQbGVzc2lzIDE4MTcgKEZyYW5jZSlcIlxufTtcbmV4cG9ydHMua3Jhc3MgPSB7XG4gIGE6IDYzNzgyNDUuMCxcbiAgcmY6IDI5OC4zLFxuICBlbGxpcHNlTmFtZTogXCJLcmFzc292c2t5LCAxOTQyXCJcbn07XG5leHBvcnRzLlNFYXNpYSA9IHtcbiAgYTogNjM3ODE1NS4wLFxuICBiOiA2MzU2NzczLjMyMDUsXG4gIGVsbGlwc2VOYW1lOiBcIlNvdXRoZWFzdCBBc2lhXCJcbn07XG5leHBvcnRzLndhbGJlY2sgPSB7XG4gIGE6IDYzNzY4OTYuMCxcbiAgYjogNjM1NTgzNC44NDY3LFxuICBlbGxpcHNlTmFtZTogXCJXYWxiZWNrXCJcbn07XG5leHBvcnRzLldHUzYwID0ge1xuICBhOiA2Mzc4MTY1LjAsXG4gIHJmOiAyOTguMyxcbiAgZWxsaXBzZU5hbWU6IFwiV0dTIDYwXCJcbn07XG5leHBvcnRzLldHUzY2ID0ge1xuICBhOiA2Mzc4MTQ1LjAsXG4gIHJmOiAyOTguMjUsXG4gIGVsbGlwc2VOYW1lOiBcIldHUyA2NlwiXG59O1xuZXhwb3J0cy5XR1M3ID0ge1xuICBhOiA2Mzc4MTM1LjAsXG4gIHJmOiAyOTguMjYsXG4gIGVsbGlwc2VOYW1lOiBcIldHUyA3MlwiXG59O1xuZXhwb3J0cy5XR1M4NCA9IHtcbiAgYTogNjM3ODEzNy4wLFxuICByZjogMjk4LjI1NzIyMzU2MyxcbiAgZWxsaXBzZU5hbWU6IFwiV0dTIDg0XCJcbn07XG5leHBvcnRzLnNwaGVyZSA9IHtcbiAgYTogNjM3MDk5Ny4wLFxuICBiOiA2MzcwOTk3LjAsXG4gIGVsbGlwc2VOYW1lOiBcIk5vcm1hbCBTcGhlcmUgKHI9NjM3MDk5NylcIlxufTsiLCJleHBvcnRzLmdyZWVud2ljaCA9IDAuMDsgLy9cIjBkRVwiLFxuZXhwb3J0cy5saXNib24gPSAtOS4xMzE5MDYxMTExMTE7IC8vXCI5ZDA3JzU0Ljg2MlxcXCJXXCIsXG5leHBvcnRzLnBhcmlzID0gMi4zMzcyMjkxNjY2Njc7IC8vXCIyZDIwJzE0LjAyNVxcXCJFXCIsXG5leHBvcnRzLmJvZ290YSA9IC03NC4wODA5MTY2NjY2Njc7IC8vXCI3NGQwNCc1MS4zXFxcIldcIixcbmV4cG9ydHMubWFkcmlkID0gLTMuNjg3OTM4ODg4ODg5OyAvL1wiM2Q0MScxNi41OFxcXCJXXCIsXG5leHBvcnRzLnJvbWUgPSAxMi40NTIzMzMzMzMzMzM7IC8vXCIxMmQyNyc4LjRcXFwiRVwiLFxuZXhwb3J0cy5iZXJuID0gNy40Mzk1ODMzMzMzMzM7IC8vXCI3ZDI2JzIyLjVcXFwiRVwiLFxuZXhwb3J0cy5qYWthcnRhID0gMTA2LjgwNzcxOTQ0NDQ0NDsgLy9cIjEwNmQ0OCcyNy43OVxcXCJFXCIsXG5leHBvcnRzLmZlcnJvID0gLTE3LjY2NjY2NjY2NjY2NzsgLy9cIjE3ZDQwJ1dcIixcbmV4cG9ydHMuYnJ1c3NlbHMgPSA0LjM2Nzk3NTsgLy9cIjRkMjInNC43MVxcXCJFXCIsXG5leHBvcnRzLnN0b2NraG9sbSA9IDE4LjA1ODI3Nzc3Nzc3ODsgLy9cIjE4ZDMnMjkuOFxcXCJFXCIsXG5leHBvcnRzLmF0aGVucyA9IDIzLjcxNjMzNzU7IC8vXCIyM2Q0Mic1OC44MTVcXFwiRVwiLFxuZXhwb3J0cy5vc2xvID0gMTAuNzIyOTE2NjY2NjY3OyAvL1wiMTBkNDMnMjIuNVxcXCJFXCIiLCJleHBvcnRzLmZ0ID0ge3RvX21ldGVyOiAwLjMwNDh9O1xuZXhwb3J0c1sndXMtZnQnXSA9IHt0b19tZXRlcjogMTIwMCAvIDM5Mzd9O1xuIiwidmFyIHByb2ogPSByZXF1aXJlKCcuL1Byb2onKTtcbnZhciB0cmFuc2Zvcm0gPSByZXF1aXJlKCcuL3RyYW5zZm9ybScpO1xudmFyIHdnczg0ID0gcHJvaignV0dTODQnKTtcblxuZnVuY3Rpb24gdHJhbnNmb3JtZXIoZnJvbSwgdG8sIGNvb3Jkcykge1xuICB2YXIgdHJhbnNmb3JtZWRBcnJheTtcbiAgaWYgKEFycmF5LmlzQXJyYXkoY29vcmRzKSkge1xuICAgIHRyYW5zZm9ybWVkQXJyYXkgPSB0cmFuc2Zvcm0oZnJvbSwgdG8sIGNvb3Jkcyk7XG4gICAgaWYgKGNvb3Jkcy5sZW5ndGggPT09IDMpIHtcbiAgICAgIHJldHVybiBbdHJhbnNmb3JtZWRBcnJheS54LCB0cmFuc2Zvcm1lZEFycmF5LnksIHRyYW5zZm9ybWVkQXJyYXkuel07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIFt0cmFuc2Zvcm1lZEFycmF5LngsIHRyYW5zZm9ybWVkQXJyYXkueV07XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHJldHVybiB0cmFuc2Zvcm0oZnJvbSwgdG8sIGNvb3Jkcyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tQcm9qKGl0ZW0pIHtcbiAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBwcm9qKSB7XG4gICAgcmV0dXJuIGl0ZW07XG4gIH1cbiAgaWYgKGl0ZW0ub1Byb2opIHtcbiAgICByZXR1cm4gaXRlbS5vUHJvajtcbiAgfVxuICByZXR1cm4gcHJvaihpdGVtKTtcbn1cbmZ1bmN0aW9uIHByb2o0KGZyb21Qcm9qLCB0b1Byb2osIGNvb3JkKSB7XG4gIGZyb21Qcm9qID0gY2hlY2tQcm9qKGZyb21Qcm9qKTtcbiAgdmFyIHNpbmdsZSA9IGZhbHNlO1xuICB2YXIgb2JqO1xuICBpZiAodHlwZW9mIHRvUHJvaiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB0b1Byb2ogPSBmcm9tUHJvajtcbiAgICBmcm9tUHJvaiA9IHdnczg0O1xuICAgIHNpbmdsZSA9IHRydWU7XG4gIH1cbiAgZWxzZSBpZiAodHlwZW9mIHRvUHJvai54ICE9PSAndW5kZWZpbmVkJyB8fCBBcnJheS5pc0FycmF5KHRvUHJvaikpIHtcbiAgICBjb29yZCA9IHRvUHJvajtcbiAgICB0b1Byb2ogPSBmcm9tUHJvajtcbiAgICBmcm9tUHJvaiA9IHdnczg0O1xuICAgIHNpbmdsZSA9IHRydWU7XG4gIH1cbiAgdG9Qcm9qID0gY2hlY2tQcm9qKHRvUHJvaik7XG4gIGlmIChjb29yZCkge1xuICAgIHJldHVybiB0cmFuc2Zvcm1lcihmcm9tUHJvaiwgdG9Qcm9qLCBjb29yZCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgb2JqID0ge1xuICAgICAgZm9yd2FyZDogZnVuY3Rpb24oY29vcmRzKSB7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lcihmcm9tUHJvaiwgdG9Qcm9qLCBjb29yZHMpO1xuICAgICAgfSxcbiAgICAgIGludmVyc2U6IGZ1bmN0aW9uKGNvb3Jkcykge1xuICAgICAgICByZXR1cm4gdHJhbnNmb3JtZXIodG9Qcm9qLCBmcm9tUHJvaiwgY29vcmRzKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGlmIChzaW5nbGUpIHtcbiAgICAgIG9iai5vUHJvaiA9IHRvUHJvajtcbiAgICB9XG4gICAgcmV0dXJuIG9iajtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBwcm9qNDsiLCJ2YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBQSkRfM1BBUkFNID0gMTtcbnZhciBQSkRfN1BBUkFNID0gMjtcbnZhciBQSkRfR1JJRFNISUZUID0gMztcbnZhciBQSkRfV0dTODQgPSA0OyAvLyBXR1M4NCBvciBlcXVpdmFsZW50XG52YXIgUEpEX05PREFUVU0gPSA1OyAvLyBXR1M4NCBvciBlcXVpdmFsZW50XG52YXIgU0VDX1RPX1JBRCA9IDQuODQ4MTM2ODExMDk1MzU5OTM1ODk5MTQxMDIzNTdlLTY7XG52YXIgQURfQyA9IDEuMDAyNjAwMDtcbnZhciBDT1NfNjdQNSA9IDAuMzgyNjgzNDMyMzY1MDg5Nzc7XG52YXIgZGF0dW0gPSBmdW5jdGlvbihwcm9qKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBkYXR1bSkpIHtcbiAgICByZXR1cm4gbmV3IGRhdHVtKHByb2opO1xuICB9XG4gIHRoaXMuZGF0dW1fdHlwZSA9IFBKRF9XR1M4NDsgLy9kZWZhdWx0IHNldHRpbmdcbiAgaWYgKCFwcm9qKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChwcm9qLmRhdHVtQ29kZSAmJiBwcm9qLmRhdHVtQ29kZSA9PT0gJ25vbmUnKSB7XG4gICAgdGhpcy5kYXR1bV90eXBlID0gUEpEX05PREFUVU07XG4gIH1cbiAgaWYgKHByb2ouZGF0dW1fcGFyYW1zKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9qLmRhdHVtX3BhcmFtcy5sZW5ndGg7IGkrKykge1xuICAgICAgcHJvai5kYXR1bV9wYXJhbXNbaV0gPSBwYXJzZUZsb2F0KHByb2ouZGF0dW1fcGFyYW1zW2ldKTtcbiAgICB9XG4gICAgaWYgKHByb2ouZGF0dW1fcGFyYW1zWzBdICE9PSAwIHx8IHByb2ouZGF0dW1fcGFyYW1zWzFdICE9PSAwIHx8IHByb2ouZGF0dW1fcGFyYW1zWzJdICE9PSAwKSB7XG4gICAgICB0aGlzLmRhdHVtX3R5cGUgPSBQSkRfM1BBUkFNO1xuICAgIH1cbiAgICBpZiAocHJvai5kYXR1bV9wYXJhbXMubGVuZ3RoID4gMykge1xuICAgICAgaWYgKHByb2ouZGF0dW1fcGFyYW1zWzNdICE9PSAwIHx8IHByb2ouZGF0dW1fcGFyYW1zWzRdICE9PSAwIHx8IHByb2ouZGF0dW1fcGFyYW1zWzVdICE9PSAwIHx8IHByb2ouZGF0dW1fcGFyYW1zWzZdICE9PSAwKSB7XG4gICAgICAgIHRoaXMuZGF0dW1fdHlwZSA9IFBKRF83UEFSQU07XG4gICAgICAgIHByb2ouZGF0dW1fcGFyYW1zWzNdICo9IFNFQ19UT19SQUQ7XG4gICAgICAgIHByb2ouZGF0dW1fcGFyYW1zWzRdICo9IFNFQ19UT19SQUQ7XG4gICAgICAgIHByb2ouZGF0dW1fcGFyYW1zWzVdICo9IFNFQ19UT19SQUQ7XG4gICAgICAgIHByb2ouZGF0dW1fcGFyYW1zWzZdID0gKHByb2ouZGF0dW1fcGFyYW1zWzZdIC8gMTAwMDAwMC4wKSArIDEuMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gREdSIDIwMTEtMDMtMjEgOiBuYWRncmlkcyBzdXBwb3J0XG4gIHRoaXMuZGF0dW1fdHlwZSA9IHByb2ouZ3JpZHMgPyBQSkRfR1JJRFNISUZUIDogdGhpcy5kYXR1bV90eXBlO1xuXG4gIHRoaXMuYSA9IHByb2ouYTsgLy9kYXR1bSBvYmplY3QgYWxzbyB1c2VzIHRoZXNlIHZhbHVlc1xuICB0aGlzLmIgPSBwcm9qLmI7XG4gIHRoaXMuZXMgPSBwcm9qLmVzO1xuICB0aGlzLmVwMiA9IHByb2ouZXAyO1xuICB0aGlzLmRhdHVtX3BhcmFtcyA9IHByb2ouZGF0dW1fcGFyYW1zO1xuICBpZiAodGhpcy5kYXR1bV90eXBlID09PSBQSkRfR1JJRFNISUZUKSB7XG4gICAgdGhpcy5ncmlkcyA9IHByb2ouZ3JpZHM7XG4gIH1cbn07XG5kYXR1bS5wcm90b3R5cGUgPSB7XG5cblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgLy8gY3NfY29tcGFyZV9kYXR1bXMoKVxuICAvLyAgIFJldHVybnMgVFJVRSBpZiB0aGUgdHdvIGRhdHVtcyBtYXRjaCwgb3RoZXJ3aXNlIEZBTFNFLlxuICBjb21wYXJlX2RhdHVtczogZnVuY3Rpb24oZGVzdCkge1xuICAgIGlmICh0aGlzLmRhdHVtX3R5cGUgIT09IGRlc3QuZGF0dW1fdHlwZSkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBmYWxzZSwgZGF0dW1zIGFyZSBub3QgZXF1YWxcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5hICE9PSBkZXN0LmEgfHwgTWF0aC5hYnModGhpcy5lcyAtIGRlc3QuZXMpID4gMC4wMDAwMDAwMDAwNTApIHtcbiAgICAgIC8vIHRoZSB0b2xlcmVuY2UgZm9yIGVzIGlzIHRvIGVuc3VyZSB0aGF0IEdSUzgwIGFuZCBXR1M4NFxuICAgICAgLy8gYXJlIGNvbnNpZGVyZWQgaWRlbnRpY2FsXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZGF0dW1fdHlwZSA9PT0gUEpEXzNQQVJBTSkge1xuICAgICAgcmV0dXJuICh0aGlzLmRhdHVtX3BhcmFtc1swXSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbMF0gJiYgdGhpcy5kYXR1bV9wYXJhbXNbMV0gPT09IGRlc3QuZGF0dW1fcGFyYW1zWzFdICYmIHRoaXMuZGF0dW1fcGFyYW1zWzJdID09PSBkZXN0LmRhdHVtX3BhcmFtc1syXSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZGF0dW1fdHlwZSA9PT0gUEpEXzdQQVJBTSkge1xuICAgICAgcmV0dXJuICh0aGlzLmRhdHVtX3BhcmFtc1swXSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbMF0gJiYgdGhpcy5kYXR1bV9wYXJhbXNbMV0gPT09IGRlc3QuZGF0dW1fcGFyYW1zWzFdICYmIHRoaXMuZGF0dW1fcGFyYW1zWzJdID09PSBkZXN0LmRhdHVtX3BhcmFtc1syXSAmJiB0aGlzLmRhdHVtX3BhcmFtc1szXSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbM10gJiYgdGhpcy5kYXR1bV9wYXJhbXNbNF0gPT09IGRlc3QuZGF0dW1fcGFyYW1zWzRdICYmIHRoaXMuZGF0dW1fcGFyYW1zWzVdID09PSBkZXN0LmRhdHVtX3BhcmFtc1s1XSAmJiB0aGlzLmRhdHVtX3BhcmFtc1s2XSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbNl0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmRhdHVtX3R5cGUgPT09IFBKRF9HUklEU0hJRlQgfHwgZGVzdC5kYXR1bV90eXBlID09PSBQSkRfR1JJRFNISUZUKSB7XG4gICAgICAvL2FsZXJ0KFwiRVJST1I6IEdyaWQgc2hpZnQgdHJhbnNmb3JtYXRpb25zIGFyZSBub3QgaW1wbGVtZW50ZWQuXCIpO1xuICAgICAgLy9yZXR1cm4gZmFsc2VcbiAgICAgIC8vREdSIDIwMTItMDctMjkgbGF6eSAuLi5cbiAgICAgIHJldHVybiB0aGlzLm5hZGdyaWRzID09PSBkZXN0Lm5hZGdyaWRzO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlOyAvLyBkYXR1bXMgYXJlIGVxdWFsXG4gICAgfVxuICB9LCAvLyBjc19jb21wYXJlX2RhdHVtcygpXG5cbiAgLypcbiAgICogVGhlIGZ1bmN0aW9uIENvbnZlcnRfR2VvZGV0aWNfVG9fR2VvY2VudHJpYyBjb252ZXJ0cyBnZW9kZXRpYyBjb29yZGluYXRlc1xuICAgKiAobGF0aXR1ZGUsIGxvbmdpdHVkZSwgYW5kIGhlaWdodCkgdG8gZ2VvY2VudHJpYyBjb29yZGluYXRlcyAoWCwgWSwgWiksXG4gICAqIGFjY29yZGluZyB0byB0aGUgY3VycmVudCBlbGxpcHNvaWQgcGFyYW1ldGVycy5cbiAgICpcbiAgICogICAgTGF0aXR1ZGUgIDogR2VvZGV0aWMgbGF0aXR1ZGUgaW4gcmFkaWFucyAgICAgICAgICAgICAgICAgICAgIChpbnB1dClcbiAgICogICAgTG9uZ2l0dWRlIDogR2VvZGV0aWMgbG9uZ2l0dWRlIGluIHJhZGlhbnMgICAgICAgICAgICAgICAgICAgIChpbnB1dClcbiAgICogICAgSGVpZ2h0ICAgIDogR2VvZGV0aWMgaGVpZ2h0LCBpbiBtZXRlcnMgICAgICAgICAgICAgICAgICAgICAgIChpbnB1dClcbiAgICogICAgWCAgICAgICAgIDogQ2FsY3VsYXRlZCBHZW9jZW50cmljIFggY29vcmRpbmF0ZSwgaW4gbWV0ZXJzICAgIChvdXRwdXQpXG4gICAqICAgIFkgICAgICAgICA6IENhbGN1bGF0ZWQgR2VvY2VudHJpYyBZIGNvb3JkaW5hdGUsIGluIG1ldGVycyAgICAob3V0cHV0KVxuICAgKiAgICBaICAgICAgICAgOiBDYWxjdWxhdGVkIEdlb2NlbnRyaWMgWiBjb29yZGluYXRlLCBpbiBtZXRlcnMgICAgKG91dHB1dClcbiAgICpcbiAgICovXG4gIGdlb2RldGljX3RvX2dlb2NlbnRyaWM6IGZ1bmN0aW9uKHApIHtcbiAgICB2YXIgTG9uZ2l0dWRlID0gcC54O1xuICAgIHZhciBMYXRpdHVkZSA9IHAueTtcbiAgICB2YXIgSGVpZ2h0ID0gcC56ID8gcC56IDogMDsgLy9aIHZhbHVlIG5vdCBhbHdheXMgc3VwcGxpZWRcbiAgICB2YXIgWDsgLy8gb3V0cHV0XG4gICAgdmFyIFk7XG4gICAgdmFyIFo7XG5cbiAgICB2YXIgRXJyb3JfQ29kZSA9IDA7IC8vICBHRU9DRU5UX05PX0VSUk9SO1xuICAgIHZhciBSbjsgLyogIEVhcnRoIHJhZGl1cyBhdCBsb2NhdGlvbiAgKi9cbiAgICB2YXIgU2luX0xhdDsgLyogIE1hdGguc2luKExhdGl0dWRlKSAgKi9cbiAgICB2YXIgU2luMl9MYXQ7IC8qICBTcXVhcmUgb2YgTWF0aC5zaW4oTGF0aXR1ZGUpICAqL1xuICAgIHZhciBDb3NfTGF0OyAvKiAgTWF0aC5jb3MoTGF0aXR1ZGUpICAqL1xuXG4gICAgLypcbiAgICAgKiogRG9uJ3QgYmxvdyB1cCBpZiBMYXRpdHVkZSBpcyBqdXN0IGEgbGl0dGxlIG91dCBvZiB0aGUgdmFsdWVcbiAgICAgKiogcmFuZ2UgYXMgaXQgbWF5IGp1c3QgYmUgYSByb3VuZGluZyBpc3N1ZS4gIEFsc28gcmVtb3ZlZCBsb25naXR1ZGVcbiAgICAgKiogdGVzdCwgaXQgc2hvdWxkIGJlIHdyYXBwZWQgYnkgTWF0aC5jb3MoKSBhbmQgTWF0aC5zaW4oKS4gIE5GVyBmb3IgUFJPSi40LCBTZXAvMjAwMS5cbiAgICAgKi9cbiAgICBpZiAoTGF0aXR1ZGUgPCAtSEFMRl9QSSAmJiBMYXRpdHVkZSA+IC0xLjAwMSAqIEhBTEZfUEkpIHtcbiAgICAgIExhdGl0dWRlID0gLUhBTEZfUEk7XG4gICAgfVxuICAgIGVsc2UgaWYgKExhdGl0dWRlID4gSEFMRl9QSSAmJiBMYXRpdHVkZSA8IDEuMDAxICogSEFMRl9QSSkge1xuICAgICAgTGF0aXR1ZGUgPSBIQUxGX1BJO1xuICAgIH1cbiAgICBlbHNlIGlmICgoTGF0aXR1ZGUgPCAtSEFMRl9QSSkgfHwgKExhdGl0dWRlID4gSEFMRl9QSSkpIHtcbiAgICAgIC8qIExhdGl0dWRlIG91dCBvZiByYW5nZSAqL1xuICAgICAgLy8uLnJlcG9ydEVycm9yKCdnZW9jZW50OmxhdCBvdXQgb2YgcmFuZ2U6JyArIExhdGl0dWRlKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGlmIChMb25naXR1ZGUgPiBNYXRoLlBJKSB7XG4gICAgICBMb25naXR1ZGUgLT0gKDIgKiBNYXRoLlBJKTtcbiAgICB9XG4gICAgU2luX0xhdCA9IE1hdGguc2luKExhdGl0dWRlKTtcbiAgICBDb3NfTGF0ID0gTWF0aC5jb3MoTGF0aXR1ZGUpO1xuICAgIFNpbjJfTGF0ID0gU2luX0xhdCAqIFNpbl9MYXQ7XG4gICAgUm4gPSB0aGlzLmEgLyAoTWF0aC5zcXJ0KDEuMGUwIC0gdGhpcy5lcyAqIFNpbjJfTGF0KSk7XG4gICAgWCA9IChSbiArIEhlaWdodCkgKiBDb3NfTGF0ICogTWF0aC5jb3MoTG9uZ2l0dWRlKTtcbiAgICBZID0gKFJuICsgSGVpZ2h0KSAqIENvc19MYXQgKiBNYXRoLnNpbihMb25naXR1ZGUpO1xuICAgIFogPSAoKFJuICogKDEgLSB0aGlzLmVzKSkgKyBIZWlnaHQpICogU2luX0xhdDtcblxuICAgIHAueCA9IFg7XG4gICAgcC55ID0gWTtcbiAgICBwLnogPSBaO1xuICAgIHJldHVybiBFcnJvcl9Db2RlO1xuICB9LCAvLyBjc19nZW9kZXRpY190b19nZW9jZW50cmljKClcblxuXG4gIGdlb2NlbnRyaWNfdG9fZ2VvZGV0aWM6IGZ1bmN0aW9uKHApIHtcbiAgICAvKiBsb2NhbCBkZWZpbnRpb25zIGFuZCB2YXJpYWJsZXMgKi9cbiAgICAvKiBlbmQtY3JpdGVyaXVtIG9mIGxvb3AsIGFjY3VyYWN5IG9mIHNpbihMYXRpdHVkZSkgKi9cbiAgICB2YXIgZ2VuYXUgPSAxZS0xMjtcbiAgICB2YXIgZ2VuYXUyID0gKGdlbmF1ICogZ2VuYXUpO1xuICAgIHZhciBtYXhpdGVyID0gMzA7XG5cbiAgICB2YXIgUDsgLyogZGlzdGFuY2UgYmV0d2VlbiBzZW1pLW1pbm9yIGF4aXMgYW5kIGxvY2F0aW9uICovXG4gICAgdmFyIFJSOyAvKiBkaXN0YW5jZSBiZXR3ZWVuIGNlbnRlciBhbmQgbG9jYXRpb24gKi9cbiAgICB2YXIgQ1Q7IC8qIHNpbiBvZiBnZW9jZW50cmljIGxhdGl0dWRlICovXG4gICAgdmFyIFNUOyAvKiBjb3Mgb2YgZ2VvY2VudHJpYyBsYXRpdHVkZSAqL1xuICAgIHZhciBSWDtcbiAgICB2YXIgUks7XG4gICAgdmFyIFJOOyAvKiBFYXJ0aCByYWRpdXMgYXQgbG9jYXRpb24gKi9cbiAgICB2YXIgQ1BISTA7IC8qIGNvcyBvZiBzdGFydCBvciBvbGQgZ2VvZGV0aWMgbGF0aXR1ZGUgaW4gaXRlcmF0aW9ucyAqL1xuICAgIHZhciBTUEhJMDsgLyogc2luIG9mIHN0YXJ0IG9yIG9sZCBnZW9kZXRpYyBsYXRpdHVkZSBpbiBpdGVyYXRpb25zICovXG4gICAgdmFyIENQSEk7IC8qIGNvcyBvZiBzZWFyY2hlZCBnZW9kZXRpYyBsYXRpdHVkZSAqL1xuICAgIHZhciBTUEhJOyAvKiBzaW4gb2Ygc2VhcmNoZWQgZ2VvZGV0aWMgbGF0aXR1ZGUgKi9cbiAgICB2YXIgU0RQSEk7IC8qIGVuZC1jcml0ZXJpdW06IGFkZGl0aW9uLXRoZW9yZW0gb2Ygc2luKExhdGl0dWRlKGl0ZXIpLUxhdGl0dWRlKGl0ZXItMSkpICovXG4gICAgdmFyIEF0X1BvbGU7IC8qIGluZGljYXRlcyBsb2NhdGlvbiBpcyBpbiBwb2xhciByZWdpb24gKi9cbiAgICB2YXIgaXRlcjsgLyogIyBvZiBjb250aW5vdXMgaXRlcmF0aW9uLCBtYXguIDMwIGlzIGFsd2F5cyBlbm91Z2ggKHMuYS4pICovXG5cbiAgICB2YXIgWCA9IHAueDtcbiAgICB2YXIgWSA9IHAueTtcbiAgICB2YXIgWiA9IHAueiA/IHAueiA6IDAuMDsgLy9aIHZhbHVlIG5vdCBhbHdheXMgc3VwcGxpZWRcbiAgICB2YXIgTG9uZ2l0dWRlO1xuICAgIHZhciBMYXRpdHVkZTtcbiAgICB2YXIgSGVpZ2h0O1xuXG4gICAgQXRfUG9sZSA9IGZhbHNlO1xuICAgIFAgPSBNYXRoLnNxcnQoWCAqIFggKyBZICogWSk7XG4gICAgUlIgPSBNYXRoLnNxcnQoWCAqIFggKyBZICogWSArIFogKiBaKTtcblxuICAgIC8qICAgICAgc3BlY2lhbCBjYXNlcyBmb3IgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSAqL1xuICAgIGlmIChQIC8gdGhpcy5hIDwgZ2VuYXUpIHtcblxuICAgICAgLyogIHNwZWNpYWwgY2FzZSwgaWYgUD0wLiAoWD0wLiwgWT0wLikgKi9cbiAgICAgIEF0X1BvbGUgPSB0cnVlO1xuICAgICAgTG9uZ2l0dWRlID0gMC4wO1xuXG4gICAgICAvKiAgaWYgKFgsWSxaKT0oMC4sMC4sMC4pIHRoZW4gSGVpZ2h0IGJlY29tZXMgc2VtaS1taW5vciBheGlzXG4gICAgICAgKiAgb2YgZWxsaXBzb2lkICg9Y2VudGVyIG9mIG1hc3MpLCBMYXRpdHVkZSBiZWNvbWVzIFBJLzIgKi9cbiAgICAgIGlmIChSUiAvIHRoaXMuYSA8IGdlbmF1KSB7XG4gICAgICAgIExhdGl0dWRlID0gSEFMRl9QSTtcbiAgICAgICAgSGVpZ2h0ID0gLXRoaXMuYjtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8qICBlbGxpcHNvaWRhbCAoZ2VvZGV0aWMpIGxvbmdpdHVkZVxuICAgICAgICogIGludGVydmFsOiAtUEkgPCBMb25naXR1ZGUgPD0gK1BJICovXG4gICAgICBMb25naXR1ZGUgPSBNYXRoLmF0YW4yKFksIFgpO1xuICAgIH1cblxuICAgIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICogRm9sbG93aW5nIGl0ZXJhdGl2ZSBhbGdvcml0aG0gd2FzIGRldmVsb3BwZWQgYnlcbiAgICAgKiBcIkluc3RpdHV0IGZvciBFcmRtZXNzdW5nXCIsIFVuaXZlcnNpdHkgb2YgSGFubm92ZXIsIEp1bHkgMTk4OC5cbiAgICAgKiBJbnRlcm5ldDogd3d3LmlmZS51bmktaGFubm92ZXIuZGVcbiAgICAgKiBJdGVyYXRpdmUgY29tcHV0YXRpb24gb2YgQ1BISSxTUEhJIGFuZCBIZWlnaHQuXG4gICAgICogSXRlcmF0aW9uIG9mIENQSEkgYW5kIFNQSEkgdG8gMTAqKi0xMiByYWRpYW4gcmVzcC5cbiAgICAgKiAyKjEwKiotNyBhcmNzZWMuXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKi9cbiAgICBDVCA9IFogLyBSUjtcbiAgICBTVCA9IFAgLyBSUjtcbiAgICBSWCA9IDEuMCAvIE1hdGguc3FydCgxLjAgLSB0aGlzLmVzICogKDIuMCAtIHRoaXMuZXMpICogU1QgKiBTVCk7XG4gICAgQ1BISTAgPSBTVCAqICgxLjAgLSB0aGlzLmVzKSAqIFJYO1xuICAgIFNQSEkwID0gQ1QgKiBSWDtcbiAgICBpdGVyID0gMDtcblxuICAgIC8qIGxvb3AgdG8gZmluZCBzaW4oTGF0aXR1ZGUpIHJlc3AuIExhdGl0dWRlXG4gICAgICogdW50aWwgfHNpbihMYXRpdHVkZShpdGVyKS1MYXRpdHVkZShpdGVyLTEpKXwgPCBnZW5hdSAqL1xuICAgIGRvIHtcbiAgICAgIGl0ZXIrKztcbiAgICAgIFJOID0gdGhpcy5hIC8gTWF0aC5zcXJ0KDEuMCAtIHRoaXMuZXMgKiBTUEhJMCAqIFNQSEkwKTtcblxuICAgICAgLyogIGVsbGlwc29pZGFsIChnZW9kZXRpYykgaGVpZ2h0ICovXG4gICAgICBIZWlnaHQgPSBQICogQ1BISTAgKyBaICogU1BISTAgLSBSTiAqICgxLjAgLSB0aGlzLmVzICogU1BISTAgKiBTUEhJMCk7XG5cbiAgICAgIFJLID0gdGhpcy5lcyAqIFJOIC8gKFJOICsgSGVpZ2h0KTtcbiAgICAgIFJYID0gMS4wIC8gTWF0aC5zcXJ0KDEuMCAtIFJLICogKDIuMCAtIFJLKSAqIFNUICogU1QpO1xuICAgICAgQ1BISSA9IFNUICogKDEuMCAtIFJLKSAqIFJYO1xuICAgICAgU1BISSA9IENUICogUlg7XG4gICAgICBTRFBISSA9IFNQSEkgKiBDUEhJMCAtIENQSEkgKiBTUEhJMDtcbiAgICAgIENQSEkwID0gQ1BISTtcbiAgICAgIFNQSEkwID0gU1BISTtcbiAgICB9XG4gICAgd2hpbGUgKFNEUEhJICogU0RQSEkgPiBnZW5hdTIgJiYgaXRlciA8IG1heGl0ZXIpO1xuXG4gICAgLyogICAgICBlbGxpcHNvaWRhbCAoZ2VvZGV0aWMpIGxhdGl0dWRlICovXG4gICAgTGF0aXR1ZGUgPSBNYXRoLmF0YW4oU1BISSAvIE1hdGguYWJzKENQSEkpKTtcblxuICAgIHAueCA9IExvbmdpdHVkZTtcbiAgICBwLnkgPSBMYXRpdHVkZTtcbiAgICBwLnogPSBIZWlnaHQ7XG4gICAgcmV0dXJuIHA7XG4gIH0sIC8vIGNzX2dlb2NlbnRyaWNfdG9fZ2VvZGV0aWMoKVxuXG4gIC8qKiBDb252ZXJ0X0dlb2NlbnRyaWNfVG9fR2VvZGV0aWNcbiAgICogVGhlIG1ldGhvZCB1c2VkIGhlcmUgaXMgZGVyaXZlZCBmcm9tICdBbiBJbXByb3ZlZCBBbGdvcml0aG0gZm9yXG4gICAqIEdlb2NlbnRyaWMgdG8gR2VvZGV0aWMgQ29vcmRpbmF0ZSBDb252ZXJzaW9uJywgYnkgUmFscGggVG9tcywgRmViIDE5OTZcbiAgICovXG4gIGdlb2NlbnRyaWNfdG9fZ2VvZGV0aWNfbm9uaXRlcjogZnVuY3Rpb24ocCkge1xuICAgIHZhciBYID0gcC54O1xuICAgIHZhciBZID0gcC55O1xuICAgIHZhciBaID0gcC56ID8gcC56IDogMDsgLy9aIHZhbHVlIG5vdCBhbHdheXMgc3VwcGxpZWRcbiAgICB2YXIgTG9uZ2l0dWRlO1xuICAgIHZhciBMYXRpdHVkZTtcbiAgICB2YXIgSGVpZ2h0O1xuXG4gICAgdmFyIFc7IC8qIGRpc3RhbmNlIGZyb20gWiBheGlzICovXG4gICAgdmFyIFcyOyAvKiBzcXVhcmUgb2YgZGlzdGFuY2UgZnJvbSBaIGF4aXMgKi9cbiAgICB2YXIgVDA7IC8qIGluaXRpYWwgZXN0aW1hdGUgb2YgdmVydGljYWwgY29tcG9uZW50ICovXG4gICAgdmFyIFQxOyAvKiBjb3JyZWN0ZWQgZXN0aW1hdGUgb2YgdmVydGljYWwgY29tcG9uZW50ICovXG4gICAgdmFyIFMwOyAvKiBpbml0aWFsIGVzdGltYXRlIG9mIGhvcml6b250YWwgY29tcG9uZW50ICovXG4gICAgdmFyIFMxOyAvKiBjb3JyZWN0ZWQgZXN0aW1hdGUgb2YgaG9yaXpvbnRhbCBjb21wb25lbnQgKi9cbiAgICB2YXIgU2luX0IwOyAvKiBNYXRoLnNpbihCMCksIEIwIGlzIGVzdGltYXRlIG9mIEJvd3JpbmcgYXV4IHZhcmlhYmxlICovXG4gICAgdmFyIFNpbjNfQjA7IC8qIGN1YmUgb2YgTWF0aC5zaW4oQjApICovXG4gICAgdmFyIENvc19CMDsgLyogTWF0aC5jb3MoQjApICovXG4gICAgdmFyIFNpbl9wMTsgLyogTWF0aC5zaW4ocGhpMSksIHBoaTEgaXMgZXN0aW1hdGVkIGxhdGl0dWRlICovXG4gICAgdmFyIENvc19wMTsgLyogTWF0aC5jb3MocGhpMSkgKi9cbiAgICB2YXIgUm47IC8qIEVhcnRoIHJhZGl1cyBhdCBsb2NhdGlvbiAqL1xuICAgIHZhciBTdW07IC8qIG51bWVyYXRvciBvZiBNYXRoLmNvcyhwaGkxKSAqL1xuICAgIHZhciBBdF9Qb2xlOyAvKiBpbmRpY2F0ZXMgbG9jYXRpb24gaXMgaW4gcG9sYXIgcmVnaW9uICovXG5cbiAgICBYID0gcGFyc2VGbG9hdChYKTsgLy8gY2FzdCBmcm9tIHN0cmluZyB0byBmbG9hdFxuICAgIFkgPSBwYXJzZUZsb2F0KFkpO1xuICAgIFogPSBwYXJzZUZsb2F0KFopO1xuXG4gICAgQXRfUG9sZSA9IGZhbHNlO1xuICAgIGlmIChYICE9PSAwLjApIHtcbiAgICAgIExvbmdpdHVkZSA9IE1hdGguYXRhbjIoWSwgWCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKFkgPiAwKSB7XG4gICAgICAgIExvbmdpdHVkZSA9IEhBTEZfUEk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChZIDwgMCkge1xuICAgICAgICBMb25naXR1ZGUgPSAtSEFMRl9QSTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBBdF9Qb2xlID0gdHJ1ZTtcbiAgICAgICAgTG9uZ2l0dWRlID0gMC4wO1xuICAgICAgICBpZiAoWiA+IDAuMCkgeyAvKiBub3J0aCBwb2xlICovXG4gICAgICAgICAgTGF0aXR1ZGUgPSBIQUxGX1BJO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFogPCAwLjApIHsgLyogc291dGggcG9sZSAqL1xuICAgICAgICAgIExhdGl0dWRlID0gLUhBTEZfUEk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8qIGNlbnRlciBvZiBlYXJ0aCAqL1xuICAgICAgICAgIExhdGl0dWRlID0gSEFMRl9QSTtcbiAgICAgICAgICBIZWlnaHQgPSAtdGhpcy5iO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBXMiA9IFggKiBYICsgWSAqIFk7XG4gICAgVyA9IE1hdGguc3FydChXMik7XG4gICAgVDAgPSBaICogQURfQztcbiAgICBTMCA9IE1hdGguc3FydChUMCAqIFQwICsgVzIpO1xuICAgIFNpbl9CMCA9IFQwIC8gUzA7XG4gICAgQ29zX0IwID0gVyAvIFMwO1xuICAgIFNpbjNfQjAgPSBTaW5fQjAgKiBTaW5fQjAgKiBTaW5fQjA7XG4gICAgVDEgPSBaICsgdGhpcy5iICogdGhpcy5lcDIgKiBTaW4zX0IwO1xuICAgIFN1bSA9IFcgLSB0aGlzLmEgKiB0aGlzLmVzICogQ29zX0IwICogQ29zX0IwICogQ29zX0IwO1xuICAgIFMxID0gTWF0aC5zcXJ0KFQxICogVDEgKyBTdW0gKiBTdW0pO1xuICAgIFNpbl9wMSA9IFQxIC8gUzE7XG4gICAgQ29zX3AxID0gU3VtIC8gUzE7XG4gICAgUm4gPSB0aGlzLmEgLyBNYXRoLnNxcnQoMS4wIC0gdGhpcy5lcyAqIFNpbl9wMSAqIFNpbl9wMSk7XG4gICAgaWYgKENvc19wMSA+PSBDT1NfNjdQNSkge1xuICAgICAgSGVpZ2h0ID0gVyAvIENvc19wMSAtIFJuO1xuICAgIH1cbiAgICBlbHNlIGlmIChDb3NfcDEgPD0gLUNPU182N1A1KSB7XG4gICAgICBIZWlnaHQgPSBXIC8gLUNvc19wMSAtIFJuO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIEhlaWdodCA9IFogLyBTaW5fcDEgKyBSbiAqICh0aGlzLmVzIC0gMS4wKTtcbiAgICB9XG4gICAgaWYgKEF0X1BvbGUgPT09IGZhbHNlKSB7XG4gICAgICBMYXRpdHVkZSA9IE1hdGguYXRhbihTaW5fcDEgLyBDb3NfcDEpO1xuICAgIH1cblxuICAgIHAueCA9IExvbmdpdHVkZTtcbiAgICBwLnkgPSBMYXRpdHVkZTtcbiAgICBwLnogPSBIZWlnaHQ7XG4gICAgcmV0dXJuIHA7XG4gIH0sIC8vIGdlb2NlbnRyaWNfdG9fZ2VvZGV0aWNfbm9uaXRlcigpXG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIC8vIHBqX2dlb2NlbnRpY190b193Z3M4NCggcCApXG4gIC8vICBwID0gcG9pbnQgdG8gdHJhbnNmb3JtIGluIGdlb2NlbnRyaWMgY29vcmRpbmF0ZXMgKHgseSx6KVxuICBnZW9jZW50cmljX3RvX3dnczg0OiBmdW5jdGlvbihwKSB7XG5cbiAgICBpZiAodGhpcy5kYXR1bV90eXBlID09PSBQSkRfM1BBUkFNKSB7XG4gICAgICAvLyBpZiggeFtpb10gPT09IEhVR0VfVkFMIClcbiAgICAgIC8vICAgIGNvbnRpbnVlO1xuICAgICAgcC54ICs9IHRoaXMuZGF0dW1fcGFyYW1zWzBdO1xuICAgICAgcC55ICs9IHRoaXMuZGF0dW1fcGFyYW1zWzFdO1xuICAgICAgcC56ICs9IHRoaXMuZGF0dW1fcGFyYW1zWzJdO1xuXG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZGF0dW1fdHlwZSA9PT0gUEpEXzdQQVJBTSkge1xuICAgICAgdmFyIER4X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbMF07XG4gICAgICB2YXIgRHlfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1sxXTtcbiAgICAgIHZhciBEel9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzJdO1xuICAgICAgdmFyIFJ4X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbM107XG4gICAgICB2YXIgUnlfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1s0XTtcbiAgICAgIHZhciBSel9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzVdO1xuICAgICAgdmFyIE1fQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1s2XTtcbiAgICAgIC8vIGlmKCB4W2lvXSA9PT0gSFVHRV9WQUwgKVxuICAgICAgLy8gICAgY29udGludWU7XG4gICAgICB2YXIgeF9vdXQgPSBNX0JGICogKHAueCAtIFJ6X0JGICogcC55ICsgUnlfQkYgKiBwLnopICsgRHhfQkY7XG4gICAgICB2YXIgeV9vdXQgPSBNX0JGICogKFJ6X0JGICogcC54ICsgcC55IC0gUnhfQkYgKiBwLnopICsgRHlfQkY7XG4gICAgICB2YXIgel9vdXQgPSBNX0JGICogKC1SeV9CRiAqIHAueCArIFJ4X0JGICogcC55ICsgcC56KSArIER6X0JGO1xuICAgICAgcC54ID0geF9vdXQ7XG4gICAgICBwLnkgPSB5X291dDtcbiAgICAgIHAueiA9IHpfb3V0O1xuICAgIH1cbiAgfSwgLy8gY3NfZ2VvY2VudHJpY190b193Z3M4NFxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAvLyBwal9nZW9jZW50aWNfZnJvbV93Z3M4NCgpXG4gIC8vICBjb29yZGluYXRlIHN5c3RlbSBkZWZpbml0aW9uLFxuICAvLyAgcG9pbnQgdG8gdHJhbnNmb3JtIGluIGdlb2NlbnRyaWMgY29vcmRpbmF0ZXMgKHgseSx6KVxuICBnZW9jZW50cmljX2Zyb21fd2dzODQ6IGZ1bmN0aW9uKHApIHtcblxuICAgIGlmICh0aGlzLmRhdHVtX3R5cGUgPT09IFBKRF8zUEFSQU0pIHtcbiAgICAgIC8vaWYoIHhbaW9dID09PSBIVUdFX1ZBTCApXG4gICAgICAvLyAgICBjb250aW51ZTtcbiAgICAgIHAueCAtPSB0aGlzLmRhdHVtX3BhcmFtc1swXTtcbiAgICAgIHAueSAtPSB0aGlzLmRhdHVtX3BhcmFtc1sxXTtcbiAgICAgIHAueiAtPSB0aGlzLmRhdHVtX3BhcmFtc1syXTtcblxuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmRhdHVtX3R5cGUgPT09IFBKRF83UEFSQU0pIHtcbiAgICAgIHZhciBEeF9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzBdO1xuICAgICAgdmFyIER5X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbMV07XG4gICAgICB2YXIgRHpfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1syXTtcbiAgICAgIHZhciBSeF9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzNdO1xuICAgICAgdmFyIFJ5X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbNF07XG4gICAgICB2YXIgUnpfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1s1XTtcbiAgICAgIHZhciBNX0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbNl07XG4gICAgICB2YXIgeF90bXAgPSAocC54IC0gRHhfQkYpIC8gTV9CRjtcbiAgICAgIHZhciB5X3RtcCA9IChwLnkgLSBEeV9CRikgLyBNX0JGO1xuICAgICAgdmFyIHpfdG1wID0gKHAueiAtIER6X0JGKSAvIE1fQkY7XG4gICAgICAvL2lmKCB4W2lvXSA9PT0gSFVHRV9WQUwgKVxuICAgICAgLy8gICAgY29udGludWU7XG5cbiAgICAgIHAueCA9IHhfdG1wICsgUnpfQkYgKiB5X3RtcCAtIFJ5X0JGICogel90bXA7XG4gICAgICBwLnkgPSAtUnpfQkYgKiB4X3RtcCArIHlfdG1wICsgUnhfQkYgKiB6X3RtcDtcbiAgICAgIHAueiA9IFJ5X0JGICogeF90bXAgLSBSeF9CRiAqIHlfdG1wICsgel90bXA7XG4gICAgfSAvL2NzX2dlb2NlbnRyaWNfZnJvbV93Z3M4NCgpXG4gIH1cbn07XG5cbi8qKiBwb2ludCBvYmplY3QsIG5vdGhpbmcgZmFuY3ksIGp1c3QgYWxsb3dzIHZhbHVlcyB0byBiZVxuICAgIHBhc3NlZCBiYWNrIGFuZCBmb3J0aCBieSByZWZlcmVuY2UgcmF0aGVyIHRoYW4gYnkgdmFsdWUuXG4gICAgT3RoZXIgcG9pbnQgY2xhc3NlcyBtYXkgYmUgdXNlZCBhcyBsb25nIGFzIHRoZXkgaGF2ZVxuICAgIHggYW5kIHkgcHJvcGVydGllcywgd2hpY2ggd2lsbCBnZXQgbW9kaWZpZWQgaW4gdGhlIHRyYW5zZm9ybSBtZXRob2QuXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBkYXR1bTtcbiIsInZhciBQSkRfM1BBUkFNID0gMTtcbnZhciBQSkRfN1BBUkFNID0gMjtcbnZhciBQSkRfR1JJRFNISUZUID0gMztcbnZhciBQSkRfTk9EQVRVTSA9IDU7IC8vIFdHUzg0IG9yIGVxdWl2YWxlbnRcbnZhciBTUlNfV0dTODRfU0VNSU1BSk9SID0gNjM3ODEzNzsgLy8gb25seSB1c2VkIGluIGdyaWQgc2hpZnQgdHJhbnNmb3Jtc1xudmFyIFNSU19XR1M4NF9FU1FVQVJFRCA9IDAuMDA2Njk0Mzc5OTkwMTQxMzE2OyAvL0RHUjogMjAxMi0wNy0yOVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihzb3VyY2UsIGRlc3QsIHBvaW50KSB7XG4gIHZhciB3cCwgaSwgbDtcblxuICBmdW5jdGlvbiBjaGVja1BhcmFtcyhmYWxsYmFjaykge1xuICAgIHJldHVybiAoZmFsbGJhY2sgPT09IFBKRF8zUEFSQU0gfHwgZmFsbGJhY2sgPT09IFBKRF83UEFSQU0pO1xuICB9XG4gIC8vIFNob3J0IGN1dCBpZiB0aGUgZGF0dW1zIGFyZSBpZGVudGljYWwuXG4gIGlmIChzb3VyY2UuY29tcGFyZV9kYXR1bXMoZGVzdCkpIHtcbiAgICByZXR1cm4gcG9pbnQ7IC8vIGluIHRoaXMgY2FzZSwgemVybyBpcyBzdWNlc3MsXG4gICAgLy8gd2hlcmVhcyBjc19jb21wYXJlX2RhdHVtcyByZXR1cm5zIDEgdG8gaW5kaWNhdGUgVFJVRVxuICAgIC8vIGNvbmZ1c2luZywgc2hvdWxkIGZpeCB0aGlzXG4gIH1cblxuICAvLyBFeHBsaWNpdGx5IHNraXAgZGF0dW0gdHJhbnNmb3JtIGJ5IHNldHRpbmcgJ2RhdHVtPW5vbmUnIGFzIHBhcmFtZXRlciBmb3IgZWl0aGVyIHNvdXJjZSBvciBkZXN0XG4gIGlmIChzb3VyY2UuZGF0dW1fdHlwZSA9PT0gUEpEX05PREFUVU0gfHwgZGVzdC5kYXR1bV90eXBlID09PSBQSkRfTk9EQVRVTSkge1xuICAgIHJldHVybiBwb2ludDtcbiAgfVxuXG4gIC8vREdSOiAyMDEyLTA3LTI5IDogYWRkIG5hZGdyaWRzIHN1cHBvcnQgKGJlZ2luKVxuICB2YXIgc3JjX2EgPSBzb3VyY2UuYTtcbiAgdmFyIHNyY19lcyA9IHNvdXJjZS5lcztcblxuICB2YXIgZHN0X2EgPSBkZXN0LmE7XG4gIHZhciBkc3RfZXMgPSBkZXN0LmVzO1xuXG4gIHZhciBmYWxsYmFjayA9IHNvdXJjZS5kYXR1bV90eXBlO1xuICAvLyBJZiB0aGlzIGRhdHVtIHJlcXVpcmVzIGdyaWQgc2hpZnRzLCB0aGVuIGFwcGx5IGl0IHRvIGdlb2RldGljIGNvb3JkaW5hdGVzLlxuICBpZiAoZmFsbGJhY2sgPT09IFBKRF9HUklEU0hJRlQpIHtcbiAgICBpZiAodGhpcy5hcHBseV9ncmlkc2hpZnQoc291cmNlLCAwLCBwb2ludCkgPT09IDApIHtcbiAgICAgIHNvdXJjZS5hID0gU1JTX1dHUzg0X1NFTUlNQUpPUjtcbiAgICAgIHNvdXJjZS5lcyA9IFNSU19XR1M4NF9FU1FVQVJFRDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyB0cnkgMyBvciA3IHBhcmFtcyB0cmFuc2Zvcm1hdGlvbiBvciBub3RoaW5nID9cbiAgICAgIGlmICghc291cmNlLmRhdHVtX3BhcmFtcykge1xuICAgICAgICBzb3VyY2UuYSA9IHNyY19hO1xuICAgICAgICBzb3VyY2UuZXMgPSBzb3VyY2UuZXM7XG4gICAgICAgIHJldHVybiBwb2ludDtcbiAgICAgIH1cbiAgICAgIHdwID0gMTtcbiAgICAgIGZvciAoaSA9IDAsIGwgPSBzb3VyY2UuZGF0dW1fcGFyYW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB3cCAqPSBzb3VyY2UuZGF0dW1fcGFyYW1zW2ldO1xuICAgICAgfVxuICAgICAgaWYgKHdwID09PSAwKSB7XG4gICAgICAgIHNvdXJjZS5hID0gc3JjX2E7XG4gICAgICAgIHNvdXJjZS5lcyA9IHNvdXJjZS5lcztcbiAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgfVxuICAgICAgaWYgKHNvdXJjZS5kYXR1bV9wYXJhbXMubGVuZ3RoID4gMykge1xuICAgICAgICBmYWxsYmFjayA9IFBKRF83UEFSQU07XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZmFsbGJhY2sgPSBQSkRfM1BBUkFNO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBpZiAoZGVzdC5kYXR1bV90eXBlID09PSBQSkRfR1JJRFNISUZUKSB7XG4gICAgZGVzdC5hID0gU1JTX1dHUzg0X1NFTUlNQUpPUjtcbiAgICBkZXN0LmVzID0gU1JTX1dHUzg0X0VTUVVBUkVEO1xuICB9XG4gIC8vIERvIHdlIG5lZWQgdG8gZ28gdGhyb3VnaCBnZW9jZW50cmljIGNvb3JkaW5hdGVzP1xuICBpZiAoc291cmNlLmVzICE9PSBkZXN0LmVzIHx8IHNvdXJjZS5hICE9PSBkZXN0LmEgfHwgY2hlY2tQYXJhbXMoZmFsbGJhY2spIHx8IGNoZWNrUGFyYW1zKGRlc3QuZGF0dW1fdHlwZSkpIHtcbiAgICAvL0RHUjogMjAxMi0wNy0yOSA6IGFkZCBuYWRncmlkcyBzdXBwb3J0IChlbmQpXG4gICAgLy8gQ29udmVydCB0byBnZW9jZW50cmljIGNvb3JkaW5hdGVzLlxuICAgIHNvdXJjZS5nZW9kZXRpY190b19nZW9jZW50cmljKHBvaW50KTtcbiAgICAvLyBDSEVDS19SRVRVUk47XG4gICAgLy8gQ29udmVydCBiZXR3ZWVuIGRhdHVtc1xuICAgIGlmIChjaGVja1BhcmFtcyhzb3VyY2UuZGF0dW1fdHlwZSkpIHtcbiAgICAgIHNvdXJjZS5nZW9jZW50cmljX3RvX3dnczg0KHBvaW50KTtcbiAgICAgIC8vIENIRUNLX1JFVFVSTjtcbiAgICB9XG4gICAgaWYgKGNoZWNrUGFyYW1zKGRlc3QuZGF0dW1fdHlwZSkpIHtcbiAgICAgIGRlc3QuZ2VvY2VudHJpY19mcm9tX3dnczg0KHBvaW50KTtcbiAgICAgIC8vIENIRUNLX1JFVFVSTjtcbiAgICB9XG4gICAgLy8gQ29udmVydCBiYWNrIHRvIGdlb2RldGljIGNvb3JkaW5hdGVzXG4gICAgZGVzdC5nZW9jZW50cmljX3RvX2dlb2RldGljKHBvaW50KTtcbiAgICAvLyBDSEVDS19SRVRVUk47XG4gIH1cbiAgLy8gQXBwbHkgZ3JpZCBzaGlmdCB0byBkZXN0aW5hdGlvbiBpZiByZXF1aXJlZFxuICBpZiAoZGVzdC5kYXR1bV90eXBlID09PSBQSkRfR1JJRFNISUZUKSB7XG4gICAgdGhpcy5hcHBseV9ncmlkc2hpZnQoZGVzdCwgMSwgcG9pbnQpO1xuICAgIC8vIENIRUNLX1JFVFVSTjtcbiAgfVxuXG4gIHNvdXJjZS5hID0gc3JjX2E7XG4gIHNvdXJjZS5lcyA9IHNyY19lcztcbiAgZGVzdC5hID0gZHN0X2E7XG4gIGRlc3QuZXMgPSBkc3RfZXM7XG5cbiAgcmV0dXJuIHBvaW50O1xufTtcblxuIiwidmFyIGdsb2JhbHMgPSByZXF1aXJlKCcuL2dsb2JhbCcpO1xudmFyIHBhcnNlUHJvaiA9IHJlcXVpcmUoJy4vcHJvalN0cmluZycpO1xudmFyIHdrdCA9IHJlcXVpcmUoJy4vd2t0Jyk7XG5cbmZ1bmN0aW9uIGRlZnMobmFtZSkge1xuICAvKmdsb2JhbCBjb25zb2xlKi9cbiAgdmFyIHRoYXQgPSB0aGlzO1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIHZhciBkZWYgPSBhcmd1bWVudHNbMV07XG4gICAgaWYgKHR5cGVvZiBkZWYgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAoZGVmLmNoYXJBdCgwKSA9PT0gJysnKSB7XG4gICAgICAgIGRlZnNbbmFtZV0gPSBwYXJzZVByb2ooYXJndW1lbnRzWzFdKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBkZWZzW25hbWVdID0gd2t0KGFyZ3VtZW50c1sxXSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlZnNbbmFtZV0gPSBkZWY7XG4gICAgfVxuICB9XG4gIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShuYW1lKSkge1xuICAgICAgcmV0dXJuIG5hbWUubWFwKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodikpIHtcbiAgICAgICAgICBkZWZzLmFwcGx5KHRoYXQsIHYpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRlZnModik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChuYW1lIGluIGRlZnMpIHtcbiAgICAgICAgcmV0dXJuIGRlZnNbbmFtZV07XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKCdFUFNHJyBpbiBuYW1lKSB7XG4gICAgICBkZWZzWydFUFNHOicgKyBuYW1lLkVQU0ddID0gbmFtZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoJ0VTUkknIGluIG5hbWUpIHtcbiAgICAgIGRlZnNbJ0VTUkk6JyArIG5hbWUuRVNSSV0gPSBuYW1lO1xuICAgIH1cbiAgICBlbHNlIGlmICgnSUFVMjAwMCcgaW4gbmFtZSkge1xuICAgICAgZGVmc1snSUFVMjAwMDonICsgbmFtZS5JQVUyMDAwXSA9IG5hbWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc29sZS5sb2cobmFtZSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG5cbn1cbmdsb2JhbHMoZGVmcyk7XG5tb2R1bGUuZXhwb3J0cyA9IGRlZnM7XG4iLCJ2YXIgRGF0dW0gPSByZXF1aXJlKCcuL2NvbnN0YW50cy9EYXR1bScpO1xudmFyIEVsbGlwc29pZCA9IHJlcXVpcmUoJy4vY29uc3RhbnRzL0VsbGlwc29pZCcpO1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJy4vZXh0ZW5kJyk7XG52YXIgZGF0dW0gPSByZXF1aXJlKCcuL2RhdHVtJyk7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xuLy8gZWxsaXBvaWQgcGpfc2V0X2VsbC5jXG52YXIgU0lYVEggPSAwLjE2NjY2NjY2NjY2NjY2NjY2Njc7XG4vKiAxLzYgKi9cbnZhciBSQTQgPSAwLjA0NzIyMjIyMjIyMjIyMjIyMjIyO1xuLyogMTcvMzYwICovXG52YXIgUkE2ID0gMC4wMjIxNTYwODQ2NTYwODQ2NTYwODtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oanNvbikge1xuICAvLyBER1IgMjAxMS0wMy0yMCA6IG5hZ3JpZHMgLT4gbmFkZ3JpZHNcbiAgaWYgKGpzb24uZGF0dW1Db2RlICYmIGpzb24uZGF0dW1Db2RlICE9PSAnbm9uZScpIHtcbiAgICB2YXIgZGF0dW1EZWYgPSBEYXR1bVtqc29uLmRhdHVtQ29kZV07XG4gICAgaWYgKGRhdHVtRGVmKSB7XG4gICAgICBqc29uLmRhdHVtX3BhcmFtcyA9IGRhdHVtRGVmLnRvd2dzODQgPyBkYXR1bURlZi50b3dnczg0LnNwbGl0KCcsJykgOiBudWxsO1xuICAgICAganNvbi5lbGxwcyA9IGRhdHVtRGVmLmVsbGlwc2U7XG4gICAgICBqc29uLmRhdHVtTmFtZSA9IGRhdHVtRGVmLmRhdHVtTmFtZSA/IGRhdHVtRGVmLmRhdHVtTmFtZSA6IGpzb24uZGF0dW1Db2RlO1xuICAgIH1cbiAgfVxuICBpZiAoIWpzb24uYSkgeyAvLyBkbyB3ZSBoYXZlIGFuIGVsbGlwc29pZD9cbiAgICB2YXIgZWxsaXBzZSA9IEVsbGlwc29pZFtqc29uLmVsbHBzXSA/IEVsbGlwc29pZFtqc29uLmVsbHBzXSA6IEVsbGlwc29pZC5XR1M4NDtcbiAgICBleHRlbmQoanNvbiwgZWxsaXBzZSk7XG4gIH1cbiAgaWYgKGpzb24ucmYgJiYgIWpzb24uYikge1xuICAgIGpzb24uYiA9ICgxLjAgLSAxLjAgLyBqc29uLnJmKSAqIGpzb24uYTtcbiAgfVxuICBpZiAoanNvbi5yZiA9PT0gMCB8fCBNYXRoLmFicyhqc29uLmEgLSBqc29uLmIpIDwgRVBTTE4pIHtcbiAgICBqc29uLnNwaGVyZSA9IHRydWU7XG4gICAganNvbi5iID0ganNvbi5hO1xuICB9XG4gIGpzb24uYTIgPSBqc29uLmEgKiBqc29uLmE7IC8vIHVzZWQgaW4gZ2VvY2VudHJpY1xuICBqc29uLmIyID0ganNvbi5iICoganNvbi5iOyAvLyB1c2VkIGluIGdlb2NlbnRyaWNcbiAganNvbi5lcyA9IChqc29uLmEyIC0ganNvbi5iMikgLyBqc29uLmEyOyAvLyBlIF4gMlxuICBqc29uLmUgPSBNYXRoLnNxcnQoanNvbi5lcyk7IC8vIGVjY2VudHJpY2l0eVxuICBpZiAoanNvbi5SX0EpIHtcbiAgICBqc29uLmEgKj0gMSAtIGpzb24uZXMgKiAoU0lYVEggKyBqc29uLmVzICogKFJBNCArIGpzb24uZXMgKiBSQTYpKTtcbiAgICBqc29uLmEyID0ganNvbi5hICoganNvbi5hO1xuICAgIGpzb24uYjIgPSBqc29uLmIgKiBqc29uLmI7XG4gICAganNvbi5lcyA9IDA7XG4gIH1cbiAganNvbi5lcDIgPSAoanNvbi5hMiAtIGpzb24uYjIpIC8ganNvbi5iMjsgLy8gdXNlZCBpbiBnZW9jZW50cmljXG4gIGlmICghanNvbi5rMCkge1xuICAgIGpzb24uazAgPSAxLjA7IC8vZGVmYXVsdCB2YWx1ZVxuICB9XG4gIC8vREdSIDIwMTAtMTEtMTI6IGF4aXNcbiAgaWYgKCFqc29uLmF4aXMpIHtcbiAgICBqc29uLmF4aXMgPSBcImVudVwiO1xuICB9XG5cbiAgaWYgKCFqc29uLmRhdHVtKSB7XG4gICAganNvbi5kYXR1bSA9IGRhdHVtKGpzb24pO1xuICB9XG4gIHJldHVybiBqc29uO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZGVzdGluYXRpb24sIHNvdXJjZSkge1xuICBkZXN0aW5hdGlvbiA9IGRlc3RpbmF0aW9uIHx8IHt9O1xuICB2YXIgdmFsdWUsIHByb3BlcnR5O1xuICBpZiAoIXNvdXJjZSkge1xuICAgIHJldHVybiBkZXN0aW5hdGlvbjtcbiAgfVxuICBmb3IgKHByb3BlcnR5IGluIHNvdXJjZSkge1xuICAgIHZhbHVlID0gc291cmNlW3Byb3BlcnR5XTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgZGVzdGluYXRpb25bcHJvcGVydHldID0gdmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBkZXN0aW5hdGlvbjtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRlZnMpIHtcbiAgZGVmcygnRVBTRzo0MzI2JywgXCIrdGl0bGU9V0dTIDg0IChsb25nL2xhdCkgK3Byb2o9bG9uZ2xhdCArZWxscHM9V0dTODQgK2RhdHVtPVdHUzg0ICt1bml0cz1kZWdyZWVzXCIpO1xuICBkZWZzKCdFUFNHOjQyNjknLCBcIit0aXRsZT1OQUQ4MyAobG9uZy9sYXQpICtwcm9qPWxvbmdsYXQgK2E9NjM3ODEzNy4wICtiPTYzNTY3NTIuMzE0MTQwMzYgK2VsbHBzPUdSUzgwICtkYXR1bT1OQUQ4MyArdW5pdHM9ZGVncmVlc1wiKTtcbiAgZGVmcygnRVBTRzozODU3JywgXCIrdGl0bGU9V0dTIDg0IC8gUHNldWRvLU1lcmNhdG9yICtwcm9qPW1lcmMgK2E9NjM3ODEzNyArYj02Mzc4MTM3ICtsYXRfdHM9MC4wICtsb25fMD0wLjAgK3hfMD0wLjAgK3lfMD0wICtrPTEuMCArdW5pdHM9bSArbmFkZ3JpZHM9QG51bGwgK25vX2RlZnNcIik7XG5cbiAgZGVmcy5XR1M4NCA9IGRlZnNbJ0VQU0c6NDMyNiddO1xuICBkZWZzWydFUFNHOjM3ODUnXSA9IGRlZnNbJ0VQU0c6Mzg1NyddOyAvLyBtYWludGFpbiBiYWNrd2FyZCBjb21wYXQsIG9mZmljaWFsIGNvZGUgaXMgMzg1N1xuICBkZWZzLkdPT0dMRSA9IGRlZnNbJ0VQU0c6Mzg1NyddO1xuICBkZWZzWydFUFNHOjkwMDkxMyddID0gZGVmc1snRVBTRzozODU3J107XG4gIGRlZnNbJ0VQU0c6MTAyMTEzJ10gPSBkZWZzWydFUFNHOjM4NTcnXTtcbn07XG4iLCJ2YXIgcHJvanMgPSBbXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvdG1lcmMnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy91dG0nKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9zdGVyZWEnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9zdGVyZScpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL3NvbWVyYycpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL29tZXJjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvbGNjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMva3JvdmFrJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvY2FzcycpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL2xhZWEnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9hZWEnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9nbm9tJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvY2VhJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvZXFjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvcG9seScpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL256bWcnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9taWxsJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvc2ludScpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL21vbGwnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9lcWRjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvdmFuZGcnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9hZXFkJylcbl07XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHByb2o0KXtcbiAgcHJvanMuZm9yRWFjaChmdW5jdGlvbihwcm9qKXtcbiAgICBwcm9qNC5Qcm9qLnByb2plY3Rpb25zLmFkZChwcm9qKTtcbiAgfSk7XG59OyIsInZhciBwcm9qNCA9IHJlcXVpcmUoJy4vY29yZScpO1xucHJvajQuZGVmYXVsdERhdHVtID0gJ1dHUzg0JzsgLy9kZWZhdWx0IGRhdHVtXG5wcm9qNC5Qcm9qID0gcmVxdWlyZSgnLi9Qcm9qJyk7XG5wcm9qNC5XR1M4NCA9IG5ldyBwcm9qNC5Qcm9qKCdXR1M4NCcpO1xucHJvajQuUG9pbnQgPSByZXF1aXJlKCcuL1BvaW50Jyk7XG5wcm9qNC50b1BvaW50ID0gcmVxdWlyZShcIi4vY29tbW9uL3RvUG9pbnRcIik7XG5wcm9qNC5kZWZzID0gcmVxdWlyZSgnLi9kZWZzJyk7XG5wcm9qNC50cmFuc2Zvcm0gPSByZXF1aXJlKCcuL3RyYW5zZm9ybScpO1xucHJvajQubWdycyA9IHJlcXVpcmUoJ21ncnMnKTtcbnByb2o0LnZlcnNpb24gPSByZXF1aXJlKCcuLi9wYWNrYWdlLmpzb24nKS52ZXJzaW9uO1xucmVxdWlyZSgnLi9pbmNsdWRlZFByb2plY3Rpb25zJykocHJvajQpO1xubW9kdWxlLmV4cG9ydHMgPSBwcm9qNDsiLCJ2YXIgZGVmcyA9IHJlcXVpcmUoJy4vZGVmcycpO1xudmFyIHdrdCA9IHJlcXVpcmUoJy4vd2t0Jyk7XG52YXIgcHJvalN0ciA9IHJlcXVpcmUoJy4vcHJvalN0cmluZycpO1xuZnVuY3Rpb24gdGVzdE9iaihjb2RlKXtcbiAgcmV0dXJuIHR5cGVvZiBjb2RlID09PSAnc3RyaW5nJztcbn1cbmZ1bmN0aW9uIHRlc3REZWYoY29kZSl7XG4gIHJldHVybiBjb2RlIGluIGRlZnM7XG59XG5mdW5jdGlvbiB0ZXN0V0tUKGNvZGUpe1xuICB2YXIgY29kZVdvcmRzID0gWydHRU9HQ1MnLCdHRU9DQ1MnLCdQUk9KQ1MnLCdMT0NBTF9DUyddO1xuICByZXR1cm4gY29kZVdvcmRzLnJlZHVjZShmdW5jdGlvbihhLGIpe1xuICAgIHJldHVybiBhKzErY29kZS5pbmRleE9mKGIpO1xuICB9LDApO1xufVxuZnVuY3Rpb24gdGVzdFByb2ooY29kZSl7XG4gIHJldHVybiBjb2RlWzBdID09PSAnKyc7XG59XG5mdW5jdGlvbiBwYXJzZShjb2RlKXtcbiAgaWYgKHRlc3RPYmooY29kZSkpIHtcbiAgICAvL2NoZWNrIHRvIHNlZSBpZiB0aGlzIGlzIGEgV0tUIHN0cmluZ1xuICAgIGlmICh0ZXN0RGVmKGNvZGUpKSB7XG4gICAgICByZXR1cm4gZGVmc1tjb2RlXTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGVzdFdLVChjb2RlKSkge1xuICAgICAgcmV0dXJuIHdrdChjb2RlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGVzdFByb2ooY29kZSkpIHtcbiAgICAgIHJldHVybiBwcm9qU3RyKGNvZGUpO1xuICAgIH1cbiAgfWVsc2V7XG4gICAgcmV0dXJuIGNvZGU7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwYXJzZTsiLCJ2YXIgRDJSID0gMC4wMTc0NTMyOTI1MTk5NDMyOTU3NztcbnZhciBQcmltZU1lcmlkaWFuID0gcmVxdWlyZSgnLi9jb25zdGFudHMvUHJpbWVNZXJpZGlhbicpO1xudmFyIHVuaXRzID0gcmVxdWlyZSgnLi9jb25zdGFudHMvdW5pdHMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkZWZEYXRhKSB7XG4gIHZhciBzZWxmID0ge307XG4gIHZhciBwYXJhbU9iaiA9IHt9O1xuICBkZWZEYXRhLnNwbGl0KFwiK1wiKS5tYXAoZnVuY3Rpb24odikge1xuICAgIHJldHVybiB2LnRyaW0oKTtcbiAgfSkuZmlsdGVyKGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gYTtcbiAgfSkuZm9yRWFjaChmdW5jdGlvbihhKSB7XG4gICAgdmFyIHNwbGl0ID0gYS5zcGxpdChcIj1cIik7XG4gICAgc3BsaXQucHVzaCh0cnVlKTtcbiAgICBwYXJhbU9ialtzcGxpdFswXS50b0xvd2VyQ2FzZSgpXSA9IHNwbGl0WzFdO1xuICB9KTtcbiAgdmFyIHBhcmFtTmFtZSwgcGFyYW1WYWwsIHBhcmFtT3V0bmFtZTtcbiAgdmFyIHBhcmFtcyA9IHtcbiAgICBwcm9qOiAncHJvak5hbWUnLFxuICAgIGRhdHVtOiAnZGF0dW1Db2RlJyxcbiAgICByZjogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5yZiA9IHBhcnNlRmxvYXQodik7XG4gICAgfSxcbiAgICBsYXRfMDogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5sYXQwID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGxhdF8xOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmxhdDEgPSB2ICogRDJSO1xuICAgIH0sXG4gICAgbGF0XzI6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYubGF0MiA9IHYgKiBEMlI7XG4gICAgfSxcbiAgICBsYXRfdHM6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYubGF0X3RzID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGxvbl8wOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmxvbmcwID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGxvbl8xOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmxvbmcxID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGxvbl8yOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmxvbmcyID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGFscGhhOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmFscGhhID0gcGFyc2VGbG9hdCh2KSAqIEQyUjtcbiAgICB9LFxuICAgIGxvbmM6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYubG9uZ2MgPSB2ICogRDJSO1xuICAgIH0sXG4gICAgeF8wOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLngwID0gcGFyc2VGbG9hdCh2KTtcbiAgICB9LFxuICAgIHlfMDogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi55MCA9IHBhcnNlRmxvYXQodik7XG4gICAgfSxcbiAgICBrXzA6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYuazAgPSBwYXJzZUZsb2F0KHYpO1xuICAgIH0sXG4gICAgazogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5rMCA9IHBhcnNlRmxvYXQodik7XG4gICAgfSxcbiAgICBhOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmEgPSBwYXJzZUZsb2F0KHYpO1xuICAgIH0sXG4gICAgYjogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5iID0gcGFyc2VGbG9hdCh2KTtcbiAgICB9LFxuICAgIHJfYTogZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLlJfQSA9IHRydWU7XG4gICAgfSxcbiAgICB6b25lOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLnpvbmUgPSBwYXJzZUludCh2LCAxMCk7XG4gICAgfSxcbiAgICBzb3V0aDogZnVuY3Rpb24oKSB7XG4gICAgICBzZWxmLnV0bVNvdXRoID0gdHJ1ZTtcbiAgICB9LFxuICAgIHRvd2dzODQ6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYuZGF0dW1fcGFyYW1zID0gdi5zcGxpdChcIixcIikubWFwKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoYSk7XG4gICAgICB9KTtcbiAgICB9LFxuICAgIHRvX21ldGVyOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLnRvX21ldGVyID0gcGFyc2VGbG9hdCh2KTtcbiAgICB9LFxuICAgIHVuaXRzOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLnVuaXRzID0gdjtcbiAgICAgIGlmICh1bml0c1t2XSkge1xuICAgICAgICBzZWxmLnRvX21ldGVyID0gdW5pdHNbdl0udG9fbWV0ZXI7XG4gICAgICB9XG4gICAgfSxcbiAgICBmcm9tX2dyZWVud2ljaDogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5mcm9tX2dyZWVud2ljaCA9IHYgKiBEMlI7XG4gICAgfSxcbiAgICBwbTogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5mcm9tX2dyZWVud2ljaCA9IChQcmltZU1lcmlkaWFuW3ZdID8gUHJpbWVNZXJpZGlhblt2XSA6IHBhcnNlRmxvYXQodikpICogRDJSO1xuICAgIH0sXG4gICAgbmFkZ3JpZHM6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIGlmICh2ID09PSAnQG51bGwnKSB7XG4gICAgICAgIHNlbGYuZGF0dW1Db2RlID0gJ25vbmUnO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHNlbGYubmFkZ3JpZHMgPSB2O1xuICAgICAgfVxuICAgIH0sXG4gICAgYXhpczogZnVuY3Rpb24odikge1xuICAgICAgdmFyIGxlZ2FsQXhpcyA9IFwiZXduc3VkXCI7XG4gICAgICBpZiAodi5sZW5ndGggPT09IDMgJiYgbGVnYWxBeGlzLmluZGV4T2Yodi5zdWJzdHIoMCwgMSkpICE9PSAtMSAmJiBsZWdhbEF4aXMuaW5kZXhPZih2LnN1YnN0cigxLCAxKSkgIT09IC0xICYmIGxlZ2FsQXhpcy5pbmRleE9mKHYuc3Vic3RyKDIsIDEpKSAhPT0gLTEpIHtcbiAgICAgICAgc2VsZi5heGlzID0gdjtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIGZvciAocGFyYW1OYW1lIGluIHBhcmFtT2JqKSB7XG4gICAgcGFyYW1WYWwgPSBwYXJhbU9ialtwYXJhbU5hbWVdO1xuICAgIGlmIChwYXJhbU5hbWUgaW4gcGFyYW1zKSB7XG4gICAgICBwYXJhbU91dG5hbWUgPSBwYXJhbXNbcGFyYW1OYW1lXTtcbiAgICAgIGlmICh0eXBlb2YgcGFyYW1PdXRuYW1lID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHBhcmFtT3V0bmFtZShwYXJhbVZhbCk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc2VsZltwYXJhbU91dG5hbWVdID0gcGFyYW1WYWw7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc2VsZltwYXJhbU5hbWVdID0gcGFyYW1WYWw7XG4gICAgfVxuICB9XG4gIGlmKHR5cGVvZiBzZWxmLmRhdHVtQ29kZSA9PT0gJ3N0cmluZycgJiYgc2VsZi5kYXR1bUNvZGUgIT09IFwiV0dTODRcIil7XG4gICAgc2VsZi5kYXR1bUNvZGUgPSBzZWxmLmRhdHVtQ29kZS50b0xvd2VyQ2FzZSgpO1xuICB9XG4gIHJldHVybiBzZWxmO1xufTtcbiIsInZhciBwcm9qcyA9IFtcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9tZXJjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvbG9uZ2xhdCcpXG5dO1xudmFyIG5hbWVzID0ge307XG52YXIgcHJvalN0b3JlID0gW107XG5cbmZ1bmN0aW9uIGFkZChwcm9qLCBpKSB7XG4gIHZhciBsZW4gPSBwcm9qU3RvcmUubGVuZ3RoO1xuICBpZiAoIXByb2oubmFtZXMpIHtcbiAgICBjb25zb2xlLmxvZyhpKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBwcm9qU3RvcmVbbGVuXSA9IHByb2o7XG4gIHByb2oubmFtZXMuZm9yRWFjaChmdW5jdGlvbihuKSB7XG4gICAgbmFtZXNbbi50b0xvd2VyQ2FzZSgpXSA9IGxlbjtcbiAgfSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5leHBvcnRzLmFkZCA9IGFkZDtcblxuZXhwb3J0cy5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gIGlmICghbmFtZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgbiA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKHR5cGVvZiBuYW1lc1tuXSAhPT0gJ3VuZGVmaW5lZCcgJiYgcHJvalN0b3JlW25hbWVzW25dXSkge1xuICAgIHJldHVybiBwcm9qU3RvcmVbbmFtZXNbbl1dO1xuICB9XG59O1xuZXhwb3J0cy5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICBwcm9qcy5mb3JFYWNoKGFkZCk7XG59O1xuIiwidmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBtc2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tc2ZueicpO1xudmFyIHFzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3FzZm56Jyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgYXNpbnogPSByZXF1aXJlKCcuLi9jb21tb24vYXNpbnonKTtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gIGlmIChNYXRoLmFicyh0aGlzLmxhdDEgKyB0aGlzLmxhdDIpIDwgRVBTTE4pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy50ZW1wID0gdGhpcy5iIC8gdGhpcy5hO1xuICB0aGlzLmVzID0gMSAtIE1hdGgucG93KHRoaXMudGVtcCwgMik7XG4gIHRoaXMuZTMgPSBNYXRoLnNxcnQodGhpcy5lcyk7XG5cbiAgdGhpcy5zaW5fcG8gPSBNYXRoLnNpbih0aGlzLmxhdDEpO1xuICB0aGlzLmNvc19wbyA9IE1hdGguY29zKHRoaXMubGF0MSk7XG4gIHRoaXMudDEgPSB0aGlzLnNpbl9wbztcbiAgdGhpcy5jb24gPSB0aGlzLnNpbl9wbztcbiAgdGhpcy5tczEgPSBtc2Zueih0aGlzLmUzLCB0aGlzLnNpbl9wbywgdGhpcy5jb3NfcG8pO1xuICB0aGlzLnFzMSA9IHFzZm56KHRoaXMuZTMsIHRoaXMuc2luX3BvLCB0aGlzLmNvc19wbyk7XG5cbiAgdGhpcy5zaW5fcG8gPSBNYXRoLnNpbih0aGlzLmxhdDIpO1xuICB0aGlzLmNvc19wbyA9IE1hdGguY29zKHRoaXMubGF0Mik7XG4gIHRoaXMudDIgPSB0aGlzLnNpbl9wbztcbiAgdGhpcy5tczIgPSBtc2Zueih0aGlzLmUzLCB0aGlzLnNpbl9wbywgdGhpcy5jb3NfcG8pO1xuICB0aGlzLnFzMiA9IHFzZm56KHRoaXMuZTMsIHRoaXMuc2luX3BvLCB0aGlzLmNvc19wbyk7XG5cbiAgdGhpcy5zaW5fcG8gPSBNYXRoLnNpbih0aGlzLmxhdDApO1xuICB0aGlzLmNvc19wbyA9IE1hdGguY29zKHRoaXMubGF0MCk7XG4gIHRoaXMudDMgPSB0aGlzLnNpbl9wbztcbiAgdGhpcy5xczAgPSBxc2Zueih0aGlzLmUzLCB0aGlzLnNpbl9wbywgdGhpcy5jb3NfcG8pO1xuXG4gIGlmIChNYXRoLmFicyh0aGlzLmxhdDEgLSB0aGlzLmxhdDIpID4gRVBTTE4pIHtcbiAgICB0aGlzLm5zMCA9ICh0aGlzLm1zMSAqIHRoaXMubXMxIC0gdGhpcy5tczIgKiB0aGlzLm1zMikgLyAodGhpcy5xczIgLSB0aGlzLnFzMSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgdGhpcy5uczAgPSB0aGlzLmNvbjtcbiAgfVxuICB0aGlzLmMgPSB0aGlzLm1zMSAqIHRoaXMubXMxICsgdGhpcy5uczAgKiB0aGlzLnFzMTtcbiAgdGhpcy5yaCA9IHRoaXMuYSAqIE1hdGguc3FydCh0aGlzLmMgLSB0aGlzLm5zMCAqIHRoaXMucXMwKSAvIHRoaXMubnMwO1xufTtcblxuLyogQWxiZXJzIENvbmljYWwgRXF1YWwgQXJlYSBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG5cbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcblxuICB0aGlzLnNpbl9waGkgPSBNYXRoLnNpbihsYXQpO1xuICB0aGlzLmNvc19waGkgPSBNYXRoLmNvcyhsYXQpO1xuXG4gIHZhciBxcyA9IHFzZm56KHRoaXMuZTMsIHRoaXMuc2luX3BoaSwgdGhpcy5jb3NfcGhpKTtcbiAgdmFyIHJoMSA9IHRoaXMuYSAqIE1hdGguc3FydCh0aGlzLmMgLSB0aGlzLm5zMCAqIHFzKSAvIHRoaXMubnMwO1xuICB2YXIgdGhldGEgPSB0aGlzLm5zMCAqIGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciB4ID0gcmgxICogTWF0aC5zaW4odGhldGEpICsgdGhpcy54MDtcbiAgdmFyIHkgPSB0aGlzLnJoIC0gcmgxICogTWF0aC5jb3ModGhldGEpICsgdGhpcy55MDtcblxuICBwLnggPSB4O1xuICBwLnkgPSB5O1xuICByZXR1cm4gcDtcbn07XG5cblxuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICB2YXIgcmgxLCBxcywgY29uLCB0aGV0YSwgbG9uLCBsYXQ7XG5cbiAgcC54IC09IHRoaXMueDA7XG4gIHAueSA9IHRoaXMucmggLSBwLnkgKyB0aGlzLnkwO1xuICBpZiAodGhpcy5uczAgPj0gMCkge1xuICAgIHJoMSA9IE1hdGguc3FydChwLnggKiBwLnggKyBwLnkgKiBwLnkpO1xuICAgIGNvbiA9IDE7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmgxID0gLU1hdGguc3FydChwLnggKiBwLnggKyBwLnkgKiBwLnkpO1xuICAgIGNvbiA9IC0xO1xuICB9XG4gIHRoZXRhID0gMDtcbiAgaWYgKHJoMSAhPT0gMCkge1xuICAgIHRoZXRhID0gTWF0aC5hdGFuMihjb24gKiBwLngsIGNvbiAqIHAueSk7XG4gIH1cbiAgY29uID0gcmgxICogdGhpcy5uczAgLyB0aGlzLmE7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGxhdCA9IE1hdGguYXNpbigodGhpcy5jIC0gY29uICogY29uKSAvICgyICogdGhpcy5uczApKTtcbiAgfVxuICBlbHNlIHtcbiAgICBxcyA9ICh0aGlzLmMgLSBjb24gKiBjb24pIC8gdGhpcy5uczA7XG4gICAgbGF0ID0gdGhpcy5waGkxeih0aGlzLmUzLCBxcyk7XG4gIH1cblxuICBsb24gPSBhZGp1c3RfbG9uKHRoZXRhIC8gdGhpcy5uczAgKyB0aGlzLmxvbmcwKTtcbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcblxuLyogRnVuY3Rpb24gdG8gY29tcHV0ZSBwaGkxLCB0aGUgbGF0aXR1ZGUgZm9yIHRoZSBpbnZlcnNlIG9mIHRoZVxuICAgQWxiZXJzIENvbmljYWwgRXF1YWwtQXJlYSBwcm9qZWN0aW9uLlxuLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLnBoaTF6ID0gZnVuY3Rpb24oZWNjZW50LCBxcykge1xuICB2YXIgc2lucGhpLCBjb3NwaGksIGNvbiwgY29tLCBkcGhpO1xuICB2YXIgcGhpID0gYXNpbnooMC41ICogcXMpO1xuICBpZiAoZWNjZW50IDwgRVBTTE4pIHtcbiAgICByZXR1cm4gcGhpO1xuICB9XG5cbiAgdmFyIGVjY250cyA9IGVjY2VudCAqIGVjY2VudDtcbiAgZm9yICh2YXIgaSA9IDE7IGkgPD0gMjU7IGkrKykge1xuICAgIHNpbnBoaSA9IE1hdGguc2luKHBoaSk7XG4gICAgY29zcGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICBjb24gPSBlY2NlbnQgKiBzaW5waGk7XG4gICAgY29tID0gMSAtIGNvbiAqIGNvbjtcbiAgICBkcGhpID0gMC41ICogY29tICogY29tIC8gY29zcGhpICogKHFzIC8gKDEgLSBlY2NudHMpIC0gc2lucGhpIC8gY29tICsgMC41IC8gZWNjZW50ICogTWF0aC5sb2coKDEgLSBjb24pIC8gKDEgKyBjb24pKSk7XG4gICAgcGhpID0gcGhpICsgZHBoaTtcbiAgICBpZiAoTWF0aC5hYnMoZHBoaSkgPD0gMWUtNykge1xuICAgICAgcmV0dXJuIHBoaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIkFsYmVyc19Db25pY19FcXVhbF9BcmVhXCIsIFwiQWxiZXJzXCIsIFwiYWVhXCJdO1xuIiwidmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIG1sZm4gPSByZXF1aXJlKCcuLi9jb21tb24vbWxmbicpO1xudmFyIGUwZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTBmbicpO1xudmFyIGUxZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTFmbicpO1xudmFyIGUyZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTJmbicpO1xudmFyIGUzZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTNmbicpO1xudmFyIGdOID0gcmVxdWlyZSgnLi4vY29tbW9uL2dOJyk7XG52YXIgYXNpbnogPSByZXF1aXJlKCcuLi9jb21tb24vYXNpbnonKTtcbnZhciBpbWxmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9pbWxmbicpO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuc2luX3AxMiA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gIHRoaXMuY29zX3AxMiA9IE1hdGguY29zKHRoaXMubGF0MCk7XG59O1xuXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciBzaW5waGkgPSBNYXRoLnNpbihwLnkpO1xuICB2YXIgY29zcGhpID0gTWF0aC5jb3MocC55KTtcbiAgdmFyIGRsb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICB2YXIgZTAsIGUxLCBlMiwgZTMsIE1scCwgTWwsIHRhbnBoaSwgTmwxLCBObCwgcHNpLCBBeiwgRywgSCwgR0gsIEhzLCBjLCBrcCwgY29zX2MsIHMsIHMyLCBzMywgczQsIHM1O1xuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBpZiAoTWF0aC5hYnModGhpcy5zaW5fcDEyIC0gMSkgPD0gRVBTTE4pIHtcbiAgICAgIC8vTm9ydGggUG9sZSBjYXNlXG4gICAgICBwLnggPSB0aGlzLngwICsgdGhpcy5hICogKEhBTEZfUEkgLSBsYXQpICogTWF0aC5zaW4oZGxvbik7XG4gICAgICBwLnkgPSB0aGlzLnkwIC0gdGhpcy5hICogKEhBTEZfUEkgLSBsYXQpICogTWF0aC5jb3MoZGxvbik7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZWxzZSBpZiAoTWF0aC5hYnModGhpcy5zaW5fcDEyICsgMSkgPD0gRVBTTE4pIHtcbiAgICAgIC8vU291dGggUG9sZSBjYXNlXG4gICAgICBwLnggPSB0aGlzLngwICsgdGhpcy5hICogKEhBTEZfUEkgKyBsYXQpICogTWF0aC5zaW4oZGxvbik7XG4gICAgICBwLnkgPSB0aGlzLnkwICsgdGhpcy5hICogKEhBTEZfUEkgKyBsYXQpICogTWF0aC5jb3MoZGxvbik7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvL2RlZmF1bHQgY2FzZVxuICAgICAgY29zX2MgPSB0aGlzLnNpbl9wMTIgKiBzaW5waGkgKyB0aGlzLmNvc19wMTIgKiBjb3NwaGkgKiBNYXRoLmNvcyhkbG9uKTtcbiAgICAgIGMgPSBNYXRoLmFjb3MoY29zX2MpO1xuICAgICAga3AgPSBjIC8gTWF0aC5zaW4oYyk7XG4gICAgICBwLnggPSB0aGlzLngwICsgdGhpcy5hICoga3AgKiBjb3NwaGkgKiBNYXRoLnNpbihkbG9uKTtcbiAgICAgIHAueSA9IHRoaXMueTAgKyB0aGlzLmEgKiBrcCAqICh0aGlzLmNvc19wMTIgKiBzaW5waGkgLSB0aGlzLnNpbl9wMTIgKiBjb3NwaGkgKiBNYXRoLmNvcyhkbG9uKSk7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgZTAgPSBlMGZuKHRoaXMuZXMpO1xuICAgIGUxID0gZTFmbih0aGlzLmVzKTtcbiAgICBlMiA9IGUyZm4odGhpcy5lcyk7XG4gICAgZTMgPSBlM2ZuKHRoaXMuZXMpO1xuICAgIGlmIChNYXRoLmFicyh0aGlzLnNpbl9wMTIgLSAxKSA8PSBFUFNMTikge1xuICAgICAgLy9Ob3J0aCBQb2xlIGNhc2VcbiAgICAgIE1scCA9IHRoaXMuYSAqIG1sZm4oZTAsIGUxLCBlMiwgZTMsIEhBTEZfUEkpO1xuICAgICAgTWwgPSB0aGlzLmEgKiBtbGZuKGUwLCBlMSwgZTIsIGUzLCBsYXQpO1xuICAgICAgcC54ID0gdGhpcy54MCArIChNbHAgLSBNbCkgKiBNYXRoLnNpbihkbG9uKTtcbiAgICAgIHAueSA9IHRoaXMueTAgLSAoTWxwIC0gTWwpICogTWF0aC5jb3MoZGxvbik7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZWxzZSBpZiAoTWF0aC5hYnModGhpcy5zaW5fcDEyICsgMSkgPD0gRVBTTE4pIHtcbiAgICAgIC8vU291dGggUG9sZSBjYXNlXG4gICAgICBNbHAgPSB0aGlzLmEgKiBtbGZuKGUwLCBlMSwgZTIsIGUzLCBIQUxGX1BJKTtcbiAgICAgIE1sID0gdGhpcy5hICogbWxmbihlMCwgZTEsIGUyLCBlMywgbGF0KTtcbiAgICAgIHAueCA9IHRoaXMueDAgKyAoTWxwICsgTWwpICogTWF0aC5zaW4oZGxvbik7XG4gICAgICBwLnkgPSB0aGlzLnkwICsgKE1scCArIE1sKSAqIE1hdGguY29zKGRsb24pO1xuICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy9EZWZhdWx0IGNhc2VcbiAgICAgIHRhbnBoaSA9IHNpbnBoaSAvIGNvc3BoaTtcbiAgICAgIE5sMSA9IGdOKHRoaXMuYSwgdGhpcy5lLCB0aGlzLnNpbl9wMTIpO1xuICAgICAgTmwgPSBnTih0aGlzLmEsIHRoaXMuZSwgc2lucGhpKTtcbiAgICAgIHBzaSA9IE1hdGguYXRhbigoMSAtIHRoaXMuZXMpICogdGFucGhpICsgdGhpcy5lcyAqIE5sMSAqIHRoaXMuc2luX3AxMiAvIChObCAqIGNvc3BoaSkpO1xuICAgICAgQXogPSBNYXRoLmF0YW4yKE1hdGguc2luKGRsb24pLCB0aGlzLmNvc19wMTIgKiBNYXRoLnRhbihwc2kpIC0gdGhpcy5zaW5fcDEyICogTWF0aC5jb3MoZGxvbikpO1xuICAgICAgaWYgKEF6ID09PSAwKSB7XG4gICAgICAgIHMgPSBNYXRoLmFzaW4odGhpcy5jb3NfcDEyICogTWF0aC5zaW4ocHNpKSAtIHRoaXMuc2luX3AxMiAqIE1hdGguY29zKHBzaSkpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoTWF0aC5hYnMoTWF0aC5hYnMoQXopIC0gTWF0aC5QSSkgPD0gRVBTTE4pIHtcbiAgICAgICAgcyA9IC1NYXRoLmFzaW4odGhpcy5jb3NfcDEyICogTWF0aC5zaW4ocHNpKSAtIHRoaXMuc2luX3AxMiAqIE1hdGguY29zKHBzaSkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHMgPSBNYXRoLmFzaW4oTWF0aC5zaW4oZGxvbikgKiBNYXRoLmNvcyhwc2kpIC8gTWF0aC5zaW4oQXopKTtcbiAgICAgIH1cbiAgICAgIEcgPSB0aGlzLmUgKiB0aGlzLnNpbl9wMTIgLyBNYXRoLnNxcnQoMSAtIHRoaXMuZXMpO1xuICAgICAgSCA9IHRoaXMuZSAqIHRoaXMuY29zX3AxMiAqIE1hdGguY29zKEF6KSAvIE1hdGguc3FydCgxIC0gdGhpcy5lcyk7XG4gICAgICBHSCA9IEcgKiBIO1xuICAgICAgSHMgPSBIICogSDtcbiAgICAgIHMyID0gcyAqIHM7XG4gICAgICBzMyA9IHMyICogcztcbiAgICAgIHM0ID0gczMgKiBzO1xuICAgICAgczUgPSBzNCAqIHM7XG4gICAgICBjID0gTmwxICogcyAqICgxIC0gczIgKiBIcyAqICgxIC0gSHMpIC8gNiArIHMzIC8gOCAqIEdIICogKDEgLSAyICogSHMpICsgczQgLyAxMjAgKiAoSHMgKiAoNCAtIDcgKiBIcykgLSAzICogRyAqIEcgKiAoMSAtIDcgKiBIcykpIC0gczUgLyA0OCAqIEdIKTtcbiAgICAgIHAueCA9IHRoaXMueDAgKyBjICogTWF0aC5zaW4oQXopO1xuICAgICAgcC55ID0gdGhpcy55MCArIGMgKiBNYXRoLmNvcyhBeik7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gIH1cblxuXG59O1xuXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgdmFyIHJoLCB6LCBzaW56LCBjb3N6LCBsb24sIGxhdCwgY29uLCBlMCwgZTEsIGUyLCBlMywgTWxwLCBNLCBOMSwgcHNpLCBBeiwgY29zQXosIHRtcCwgQSwgQiwgRCwgRWUsIEY7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHJoID0gTWF0aC5zcXJ0KHAueCAqIHAueCArIHAueSAqIHAueSk7XG4gICAgaWYgKHJoID4gKDIgKiBIQUxGX1BJICogdGhpcy5hKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB6ID0gcmggLyB0aGlzLmE7XG5cbiAgICBzaW56ID0gTWF0aC5zaW4oeik7XG4gICAgY29zeiA9IE1hdGguY29zKHopO1xuXG4gICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICBpZiAoTWF0aC5hYnMocmgpIDw9IEVQU0xOKSB7XG4gICAgICBsYXQgPSB0aGlzLmxhdDA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbGF0ID0gYXNpbnooY29zeiAqIHRoaXMuc2luX3AxMiArIChwLnkgKiBzaW56ICogdGhpcy5jb3NfcDEyKSAvIHJoKTtcbiAgICAgIGNvbiA9IE1hdGguYWJzKHRoaXMubGF0MCkgLSBIQUxGX1BJO1xuICAgICAgaWYgKE1hdGguYWJzKGNvbikgPD0gRVBTTE4pIHtcbiAgICAgICAgaWYgKHRoaXMubGF0MCA+PSAwKSB7XG4gICAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLngsIC0gcC55KSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwIC0gTWF0aC5hdGFuMigtcC54LCBwLnkpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIC8qY29uID0gY29zeiAtIHRoaXMuc2luX3AxMiAqIE1hdGguc2luKGxhdCk7XG4gICAgICAgIGlmICgoTWF0aC5hYnMoY29uKSA8IEVQU0xOKSAmJiAoTWF0aC5hYnMocC54KSA8IEVQU0xOKSkge1xuICAgICAgICAgIC8vbm8tb3AsIGp1c3Qga2VlcCB0aGUgbG9uIHZhbHVlIGFzIGlzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIHRlbXAgPSBNYXRoLmF0YW4yKChwLnggKiBzaW56ICogdGhpcy5jb3NfcDEyKSwgKGNvbiAqIHJoKSk7XG4gICAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMigocC54ICogc2lueiAqIHRoaXMuY29zX3AxMiksIChjb24gKiByaCkpKTtcbiAgICAgICAgfSovXG4gICAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXRhbjIocC54ICogc2lueiwgcmggKiB0aGlzLmNvc19wMTIgKiBjb3N6IC0gcC55ICogdGhpcy5zaW5fcDEyICogc2lueikpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHAueCA9IGxvbjtcbiAgICBwLnkgPSBsYXQ7XG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgZWxzZSB7XG4gICAgZTAgPSBlMGZuKHRoaXMuZXMpO1xuICAgIGUxID0gZTFmbih0aGlzLmVzKTtcbiAgICBlMiA9IGUyZm4odGhpcy5lcyk7XG4gICAgZTMgPSBlM2ZuKHRoaXMuZXMpO1xuICAgIGlmIChNYXRoLmFicyh0aGlzLnNpbl9wMTIgLSAxKSA8PSBFUFNMTikge1xuICAgICAgLy9Ob3J0aCBwb2xlIGNhc2VcbiAgICAgIE1scCA9IHRoaXMuYSAqIG1sZm4oZTAsIGUxLCBlMiwgZTMsIEhBTEZfUEkpO1xuICAgICAgcmggPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICAgIE0gPSBNbHAgLSByaDtcbiAgICAgIGxhdCA9IGltbGZuKE0gLyB0aGlzLmEsIGUwLCBlMSwgZTIsIGUzKTtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXRhbjIocC54LCAtIDEgKiBwLnkpKTtcbiAgICAgIHAueCA9IGxvbjtcbiAgICAgIHAueSA9IGxhdDtcbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBlbHNlIGlmIChNYXRoLmFicyh0aGlzLnNpbl9wMTIgKyAxKSA8PSBFUFNMTikge1xuICAgICAgLy9Tb3V0aCBwb2xlIGNhc2VcbiAgICAgIE1scCA9IHRoaXMuYSAqIG1sZm4oZTAsIGUxLCBlMiwgZTMsIEhBTEZfUEkpO1xuICAgICAgcmggPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICAgIE0gPSByaCAtIE1scDtcblxuICAgICAgbGF0ID0gaW1sZm4oTSAvIHRoaXMuYSwgZTAsIGUxLCBlMiwgZTMpO1xuICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLngsIHAueSkpO1xuICAgICAgcC54ID0gbG9uO1xuICAgICAgcC55ID0gbGF0O1xuICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy9kZWZhdWx0IGNhc2VcbiAgICAgIHJoID0gTWF0aC5zcXJ0KHAueCAqIHAueCArIHAueSAqIHAueSk7XG4gICAgICBBeiA9IE1hdGguYXRhbjIocC54LCBwLnkpO1xuICAgICAgTjEgPSBnTih0aGlzLmEsIHRoaXMuZSwgdGhpcy5zaW5fcDEyKTtcbiAgICAgIGNvc0F6ID0gTWF0aC5jb3MoQXopO1xuICAgICAgdG1wID0gdGhpcy5lICogdGhpcy5jb3NfcDEyICogY29zQXo7XG4gICAgICBBID0gLXRtcCAqIHRtcCAvICgxIC0gdGhpcy5lcyk7XG4gICAgICBCID0gMyAqIHRoaXMuZXMgKiAoMSAtIEEpICogdGhpcy5zaW5fcDEyICogdGhpcy5jb3NfcDEyICogY29zQXogLyAoMSAtIHRoaXMuZXMpO1xuICAgICAgRCA9IHJoIC8gTjE7XG4gICAgICBFZSA9IEQgLSBBICogKDEgKyBBKSAqIE1hdGgucG93KEQsIDMpIC8gNiAtIEIgKiAoMSArIDMgKiBBKSAqIE1hdGgucG93KEQsIDQpIC8gMjQ7XG4gICAgICBGID0gMSAtIEEgKiBFZSAqIEVlIC8gMiAtIEQgKiBFZSAqIEVlICogRWUgLyA2O1xuICAgICAgcHNpID0gTWF0aC5hc2luKHRoaXMuc2luX3AxMiAqIE1hdGguY29zKEVlKSArIHRoaXMuY29zX3AxMiAqIE1hdGguc2luKEVlKSAqIGNvc0F6KTtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXNpbihNYXRoLnNpbihBeikgKiBNYXRoLnNpbihFZSkgLyBNYXRoLmNvcyhwc2kpKSk7XG4gICAgICBsYXQgPSBNYXRoLmF0YW4oKDEgLSB0aGlzLmVzICogRiAqIHRoaXMuc2luX3AxMiAvIE1hdGguc2luKHBzaSkpICogTWF0aC50YW4ocHNpKSAvICgxIC0gdGhpcy5lcykpO1xuICAgICAgcC54ID0gbG9uO1xuICAgICAgcC55ID0gbGF0O1xuICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICB9XG5cbn07XG5leHBvcnRzLm5hbWVzID0gW1wiQXppbXV0aGFsX0VxdWlkaXN0YW50XCIsIFwiYWVxZFwiXTtcbiIsInZhciBtbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL21sZm4nKTtcbnZhciBlMGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UwZm4nKTtcbnZhciBlMWZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UxZm4nKTtcbnZhciBlMmZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UyZm4nKTtcbnZhciBlM2ZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UzZm4nKTtcbnZhciBnTiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9nTicpO1xudmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIGFkanVzdF9sYXQgPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xhdCcpO1xudmFyIGltbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2ltbGZuJyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCF0aGlzLnNwaGVyZSkge1xuICAgIHRoaXMuZTAgPSBlMGZuKHRoaXMuZXMpO1xuICAgIHRoaXMuZTEgPSBlMWZuKHRoaXMuZXMpO1xuICAgIHRoaXMuZTIgPSBlMmZuKHRoaXMuZXMpO1xuICAgIHRoaXMuZTMgPSBlM2ZuKHRoaXMuZXMpO1xuICAgIHRoaXMubWwwID0gdGhpcy5hICogbWxmbih0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzLCB0aGlzLmxhdDApO1xuICB9XG59O1xuXG5cblxuLyogQ2Fzc2luaSBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuXG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHZhciB4LCB5O1xuICB2YXIgbGFtID0gcC54O1xuICB2YXIgcGhpID0gcC55O1xuICBsYW0gPSBhZGp1c3RfbG9uKGxhbSAtIHRoaXMubG9uZzApO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHggPSB0aGlzLmEgKiBNYXRoLmFzaW4oTWF0aC5jb3MocGhpKSAqIE1hdGguc2luKGxhbSkpO1xuICAgIHkgPSB0aGlzLmEgKiAoTWF0aC5hdGFuMihNYXRoLnRhbihwaGkpLCBNYXRoLmNvcyhsYW0pKSAtIHRoaXMubGF0MCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgLy9lbGxpcHNvaWRcbiAgICB2YXIgc2lucGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICB2YXIgY29zcGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICB2YXIgbmwgPSBnTih0aGlzLmEsIHRoaXMuZSwgc2lucGhpKTtcbiAgICB2YXIgdGwgPSBNYXRoLnRhbihwaGkpICogTWF0aC50YW4ocGhpKTtcbiAgICB2YXIgYWwgPSBsYW0gKiBNYXRoLmNvcyhwaGkpO1xuICAgIHZhciBhc3EgPSBhbCAqIGFsO1xuICAgIHZhciBjbCA9IHRoaXMuZXMgKiBjb3NwaGkgKiBjb3NwaGkgLyAoMSAtIHRoaXMuZXMpO1xuICAgIHZhciBtbCA9IHRoaXMuYSAqIG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgcGhpKTtcblxuICAgIHggPSBubCAqIGFsICogKDEgLSBhc3EgKiB0bCAqICgxIC8gNiAtICg4IC0gdGwgKyA4ICogY2wpICogYXNxIC8gMTIwKSk7XG4gICAgeSA9IG1sIC0gdGhpcy5tbDAgKyBubCAqIHNpbnBoaSAvIGNvc3BoaSAqIGFzcSAqICgwLjUgKyAoNSAtIHRsICsgNiAqIGNsKSAqIGFzcSAvIDI0KTtcblxuXG4gIH1cblxuICBwLnggPSB4ICsgdGhpcy54MDtcbiAgcC55ID0geSArIHRoaXMueTA7XG4gIHJldHVybiBwO1xufTtcblxuLyogSW52ZXJzZSBlcXVhdGlvbnNcbiAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICBwLnggLT0gdGhpcy54MDtcbiAgcC55IC09IHRoaXMueTA7XG4gIHZhciB4ID0gcC54IC8gdGhpcy5hO1xuICB2YXIgeSA9IHAueSAvIHRoaXMuYTtcbiAgdmFyIHBoaSwgbGFtO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHZhciBkZCA9IHkgKyB0aGlzLmxhdDA7XG4gICAgcGhpID0gTWF0aC5hc2luKE1hdGguc2luKGRkKSAqIE1hdGguY29zKHgpKTtcbiAgICBsYW0gPSBNYXRoLmF0YW4yKE1hdGgudGFuKHgpLCBNYXRoLmNvcyhkZCkpO1xuICB9XG4gIGVsc2Uge1xuICAgIC8qIGVsbGlwc29pZCAqL1xuICAgIHZhciBtbDEgPSB0aGlzLm1sMCAvIHRoaXMuYSArIHk7XG4gICAgdmFyIHBoaTEgPSBpbWxmbihtbDEsIHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMpO1xuICAgIGlmIChNYXRoLmFicyhNYXRoLmFicyhwaGkxKSAtIEhBTEZfUEkpIDw9IEVQU0xOKSB7XG4gICAgICBwLnggPSB0aGlzLmxvbmcwO1xuICAgICAgcC55ID0gSEFMRl9QSTtcbiAgICAgIGlmICh5IDwgMCkge1xuICAgICAgICBwLnkgKj0gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgdmFyIG5sMSA9IGdOKHRoaXMuYSwgdGhpcy5lLCBNYXRoLnNpbihwaGkxKSk7XG5cbiAgICB2YXIgcmwxID0gbmwxICogbmwxICogbmwxIC8gdGhpcy5hIC8gdGhpcy5hICogKDEgLSB0aGlzLmVzKTtcbiAgICB2YXIgdGwxID0gTWF0aC5wb3coTWF0aC50YW4ocGhpMSksIDIpO1xuICAgIHZhciBkbCA9IHggKiB0aGlzLmEgLyBubDE7XG4gICAgdmFyIGRzcSA9IGRsICogZGw7XG4gICAgcGhpID0gcGhpMSAtIG5sMSAqIE1hdGgudGFuKHBoaTEpIC8gcmwxICogZGwgKiBkbCAqICgwLjUgLSAoMSArIDMgKiB0bDEpICogZGwgKiBkbCAvIDI0KTtcbiAgICBsYW0gPSBkbCAqICgxIC0gZHNxICogKHRsMSAvIDMgKyAoMSArIDMgKiB0bDEpICogdGwxICogZHNxIC8gMTUpKSAvIE1hdGguY29zKHBoaTEpO1xuXG4gIH1cblxuICBwLnggPSBhZGp1c3RfbG9uKGxhbSArIHRoaXMubG9uZzApO1xuICBwLnkgPSBhZGp1c3RfbGF0KHBoaSk7XG4gIHJldHVybiBwO1xuXG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIkNhc3NpbmlcIiwgXCJDYXNzaW5pX1NvbGRuZXJcIiwgXCJjYXNzXCJdOyIsInZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBxc2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9xc2ZueicpO1xudmFyIG1zZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL21zZm56Jyk7XG52YXIgaXFzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL2lxc2ZueicpO1xuLypcbiAgcmVmZXJlbmNlOiAgXG4gICAgXCJDYXJ0b2dyYXBoaWMgUHJvamVjdGlvbiBQcm9jZWR1cmVzIGZvciB0aGUgVU5JWCBFbnZpcm9ubWVudC1cbiAgICBBIFVzZXIncyBNYW51YWxcIiBieSBHZXJhbGQgSS4gRXZlbmRlbixcbiAgICBVU0dTIE9wZW4gRmlsZSBSZXBvcnQgOTAtMjg0YW5kIFJlbGVhc2UgNCBJbnRlcmltIFJlcG9ydHMgKDIwMDMpXG4qL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIC8vbm8tb3BcbiAgaWYgKCF0aGlzLnNwaGVyZSkge1xuICAgIHRoaXMuazAgPSBtc2Zueih0aGlzLmUsIE1hdGguc2luKHRoaXMubGF0X3RzKSwgTWF0aC5jb3ModGhpcy5sYXRfdHMpKTtcbiAgfVxufTtcblxuXG4vKiBDeWxpbmRyaWNhbCBFcXVhbCBBcmVhIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciB4LCB5O1xuICAvKiBGb3J3YXJkIGVxdWF0aW9uc1xuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHggPSB0aGlzLngwICsgdGhpcy5hICogZGxvbiAqIE1hdGguY29zKHRoaXMubGF0X3RzKTtcbiAgICB5ID0gdGhpcy55MCArIHRoaXMuYSAqIE1hdGguc2luKGxhdCkgLyBNYXRoLmNvcyh0aGlzLmxhdF90cyk7XG4gIH1cbiAgZWxzZSB7XG4gICAgdmFyIHFzID0gcXNmbnoodGhpcy5lLCBNYXRoLnNpbihsYXQpKTtcbiAgICB4ID0gdGhpcy54MCArIHRoaXMuYSAqIHRoaXMuazAgKiBkbG9uO1xuICAgIHkgPSB0aGlzLnkwICsgdGhpcy5hICogcXMgKiAwLjUgLyB0aGlzLmswO1xuICB9XG5cbiAgcC54ID0geDtcbiAgcC55ID0geTtcbiAgcmV0dXJuIHA7XG59O1xuXG4vKiBDeWxpbmRyaWNhbCBFcXVhbCBBcmVhIGludmVyc2UgZXF1YXRpb25zLS1tYXBwaW5nIHgseSB0byBsYXQvbG9uZ1xuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgdmFyIGxvbiwgbGF0O1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIChwLnggLyB0aGlzLmEpIC8gTWF0aC5jb3ModGhpcy5sYXRfdHMpKTtcbiAgICBsYXQgPSBNYXRoLmFzaW4oKHAueSAvIHRoaXMuYSkgKiBNYXRoLmNvcyh0aGlzLmxhdF90cykpO1xuICB9XG4gIGVsc2Uge1xuICAgIGxhdCA9IGlxc2Zueih0aGlzLmUsIDIgKiBwLnkgKiB0aGlzLmswIC8gdGhpcy5hKTtcbiAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBwLnggLyAodGhpcy5hICogdGhpcy5rMCkpO1xuICB9XG5cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJjZWFcIl07XG4iLCJ2YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgYWRqdXN0X2xhdCA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbGF0Jyk7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICB0aGlzLngwID0gdGhpcy54MCB8fCAwO1xuICB0aGlzLnkwID0gdGhpcy55MCB8fCAwO1xuICB0aGlzLmxhdDAgPSB0aGlzLmxhdDAgfHwgMDtcbiAgdGhpcy5sb25nMCA9IHRoaXMubG9uZzAgfHwgMDtcbiAgdGhpcy5sYXRfdHMgPSB0aGlzLmxhdF90cyB8fCAwO1xuICB0aGlzLnRpdGxlID0gdGhpcy50aXRsZSB8fCBcIkVxdWlkaXN0YW50IEN5bGluZHJpY2FsIChQbGF0ZSBDYXJyZSlcIjtcblxuICB0aGlzLnJjID0gTWF0aC5jb3ModGhpcy5sYXRfdHMpO1xufTtcblxuXG4vLyBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG5cbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcblxuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciBkbGF0ID0gYWRqdXN0X2xhdChsYXQgLSB0aGlzLmxhdDApO1xuICBwLnggPSB0aGlzLngwICsgKHRoaXMuYSAqIGRsb24gKiB0aGlzLnJjKTtcbiAgcC55ID0gdGhpcy55MCArICh0aGlzLmEgKiBkbGF0KTtcbiAgcmV0dXJuIHA7XG59O1xuXG4vLyBpbnZlcnNlIGVxdWF0aW9ucy0tbWFwcGluZyB4LHkgdG8gbGF0L2xvbmdcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG5cbiAgdmFyIHggPSBwLng7XG4gIHZhciB5ID0gcC55O1xuXG4gIHAueCA9IGFkanVzdF9sb24odGhpcy5sb25nMCArICgoeCAtIHRoaXMueDApIC8gKHRoaXMuYSAqIHRoaXMucmMpKSk7XG4gIHAueSA9IGFkanVzdF9sYXQodGhpcy5sYXQwICsgKCh5IC0gdGhpcy55MCkgLyAodGhpcy5hKSkpO1xuICByZXR1cm4gcDtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiRXF1aXJlY3Rhbmd1bGFyXCIsIFwiRXF1aWRpc3RhbnRfQ3lsaW5kcmljYWxcIiwgXCJlcWNcIl07XG4iLCJ2YXIgZTBmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMGZuJyk7XG52YXIgZTFmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMWZuJyk7XG52YXIgZTJmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMmZuJyk7XG52YXIgZTNmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lM2ZuJyk7XG52YXIgbXNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vbXNmbnonKTtcbnZhciBtbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL21sZm4nKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBhZGp1c3RfbGF0ID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sYXQnKTtcbnZhciBpbWxmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9pbWxmbicpO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gIC8qIFBsYWNlIHBhcmFtZXRlcnMgaW4gc3RhdGljIHN0b3JhZ2UgZm9yIGNvbW1vbiB1c2VcbiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICAvLyBTdGFuZGFyZCBQYXJhbGxlbHMgY2Fubm90IGJlIGVxdWFsIGFuZCBvbiBvcHBvc2l0ZSBzaWRlcyBvZiB0aGUgZXF1YXRvclxuICBpZiAoTWF0aC5hYnModGhpcy5sYXQxICsgdGhpcy5sYXQyKSA8IEVQU0xOKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMubGF0MiA9IHRoaXMubGF0MiB8fCB0aGlzLmxhdDE7XG4gIHRoaXMudGVtcCA9IHRoaXMuYiAvIHRoaXMuYTtcbiAgdGhpcy5lcyA9IDEgLSBNYXRoLnBvdyh0aGlzLnRlbXAsIDIpO1xuICB0aGlzLmUgPSBNYXRoLnNxcnQodGhpcy5lcyk7XG4gIHRoaXMuZTAgPSBlMGZuKHRoaXMuZXMpO1xuICB0aGlzLmUxID0gZTFmbih0aGlzLmVzKTtcbiAgdGhpcy5lMiA9IGUyZm4odGhpcy5lcyk7XG4gIHRoaXMuZTMgPSBlM2ZuKHRoaXMuZXMpO1xuXG4gIHRoaXMuc2lucGhpID0gTWF0aC5zaW4odGhpcy5sYXQxKTtcbiAgdGhpcy5jb3NwaGkgPSBNYXRoLmNvcyh0aGlzLmxhdDEpO1xuXG4gIHRoaXMubXMxID0gbXNmbnoodGhpcy5lLCB0aGlzLnNpbnBoaSwgdGhpcy5jb3NwaGkpO1xuICB0aGlzLm1sMSA9IG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgdGhpcy5sYXQxKTtcblxuICBpZiAoTWF0aC5hYnModGhpcy5sYXQxIC0gdGhpcy5sYXQyKSA8IEVQU0xOKSB7XG4gICAgdGhpcy5ucyA9IHRoaXMuc2lucGhpO1xuICB9XG4gIGVsc2Uge1xuICAgIHRoaXMuc2lucGhpID0gTWF0aC5zaW4odGhpcy5sYXQyKTtcbiAgICB0aGlzLmNvc3BoaSA9IE1hdGguY29zKHRoaXMubGF0Mik7XG4gICAgdGhpcy5tczIgPSBtc2Zueih0aGlzLmUsIHRoaXMuc2lucGhpLCB0aGlzLmNvc3BoaSk7XG4gICAgdGhpcy5tbDIgPSBtbGZuKHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMsIHRoaXMubGF0Mik7XG4gICAgdGhpcy5ucyA9ICh0aGlzLm1zMSAtIHRoaXMubXMyKSAvICh0aGlzLm1sMiAtIHRoaXMubWwxKTtcbiAgfVxuICB0aGlzLmcgPSB0aGlzLm1sMSArIHRoaXMubXMxIC8gdGhpcy5ucztcbiAgdGhpcy5tbDAgPSBtbGZuKHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMsIHRoaXMubGF0MCk7XG4gIHRoaXMucmggPSB0aGlzLmEgKiAodGhpcy5nIC0gdGhpcy5tbDApO1xufTtcblxuXG4vKiBFcXVpZGlzdGFudCBDb25pYyBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICB2YXIgcmgxO1xuXG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHJoMSA9IHRoaXMuYSAqICh0aGlzLmcgLSBsYXQpO1xuICB9XG4gIGVsc2Uge1xuICAgIHZhciBtbCA9IG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgbGF0KTtcbiAgICByaDEgPSB0aGlzLmEgKiAodGhpcy5nIC0gbWwpO1xuICB9XG4gIHZhciB0aGV0YSA9IHRoaXMubnMgKiBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICB2YXIgeCA9IHRoaXMueDAgKyByaDEgKiBNYXRoLnNpbih0aGV0YSk7XG4gIHZhciB5ID0gdGhpcy55MCArIHRoaXMucmggLSByaDEgKiBNYXRoLmNvcyh0aGV0YSk7XG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG4gIHJldHVybiBwO1xufTtcblxuLyogSW52ZXJzZSBlcXVhdGlvbnNcbiAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICBwLnggLT0gdGhpcy54MDtcbiAgcC55ID0gdGhpcy5yaCAtIHAueSArIHRoaXMueTA7XG4gIHZhciBjb24sIHJoMSwgbGF0LCBsb247XG4gIGlmICh0aGlzLm5zID49IDApIHtcbiAgICByaDEgPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICBjb24gPSAxO1xuICB9XG4gIGVsc2Uge1xuICAgIHJoMSA9IC1NYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICBjb24gPSAtMTtcbiAgfVxuICB2YXIgdGhldGEgPSAwO1xuICBpZiAocmgxICE9PSAwKSB7XG4gICAgdGhldGEgPSBNYXRoLmF0YW4yKGNvbiAqIHAueCwgY29uICogcC55KTtcbiAgfVxuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIHRoZXRhIC8gdGhpcy5ucyk7XG4gICAgbGF0ID0gYWRqdXN0X2xhdCh0aGlzLmcgLSByaDEgLyB0aGlzLmEpO1xuICAgIHAueCA9IGxvbjtcbiAgICBwLnkgPSBsYXQ7XG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgZWxzZSB7XG4gICAgdmFyIG1sID0gdGhpcy5nIC0gcmgxIC8gdGhpcy5hO1xuICAgIGxhdCA9IGltbGZuKG1sLCB0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzKTtcbiAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyB0aGV0YSAvIHRoaXMubnMpO1xuICAgIHAueCA9IGxvbjtcbiAgICBwLnkgPSBsYXQ7XG4gICAgcmV0dXJuIHA7XG4gIH1cblxufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJFcXVpZGlzdGFudF9Db25pY1wiLCBcImVxZGNcIl07XG4iLCJ2YXIgRk9SVFBJID0gTWF0aC5QSS80O1xudmFyIHNyYXQgPSByZXF1aXJlKCcuLi9jb21tb24vc3JhdCcpO1xudmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG52YXIgTUFYX0lURVIgPSAyMDtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgc3BoaSA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gIHZhciBjcGhpID0gTWF0aC5jb3ModGhpcy5sYXQwKTtcbiAgY3BoaSAqPSBjcGhpO1xuICB0aGlzLnJjID0gTWF0aC5zcXJ0KDEgLSB0aGlzLmVzKSAvICgxIC0gdGhpcy5lcyAqIHNwaGkgKiBzcGhpKTtcbiAgdGhpcy5DID0gTWF0aC5zcXJ0KDEgKyB0aGlzLmVzICogY3BoaSAqIGNwaGkgLyAoMSAtIHRoaXMuZXMpKTtcbiAgdGhpcy5waGljMCA9IE1hdGguYXNpbihzcGhpIC8gdGhpcy5DKTtcbiAgdGhpcy5yYXRleHAgPSAwLjUgKiB0aGlzLkMgKiB0aGlzLmU7XG4gIHRoaXMuSyA9IE1hdGgudGFuKDAuNSAqIHRoaXMucGhpYzAgKyBGT1JUUEkpIC8gKE1hdGgucG93KE1hdGgudGFuKDAuNSAqIHRoaXMubGF0MCArIEZPUlRQSSksIHRoaXMuQykgKiBzcmF0KHRoaXMuZSAqIHNwaGksIHRoaXMucmF0ZXhwKSk7XG59O1xuXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG5cbiAgcC55ID0gMiAqIE1hdGguYXRhbih0aGlzLksgKiBNYXRoLnBvdyhNYXRoLnRhbigwLjUgKiBsYXQgKyBGT1JUUEkpLCB0aGlzLkMpICogc3JhdCh0aGlzLmUgKiBNYXRoLnNpbihsYXQpLCB0aGlzLnJhdGV4cCkpIC0gSEFMRl9QSTtcbiAgcC54ID0gdGhpcy5DICogbG9uO1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIERFTF9UT0wgPSAxZS0xNDtcbiAgdmFyIGxvbiA9IHAueCAvIHRoaXMuQztcbiAgdmFyIGxhdCA9IHAueTtcbiAgdmFyIG51bSA9IE1hdGgucG93KE1hdGgudGFuKDAuNSAqIGxhdCArIEZPUlRQSSkgLyB0aGlzLkssIDEgLyB0aGlzLkMpO1xuICBmb3IgKHZhciBpID0gTUFYX0lURVI7IGkgPiAwOyAtLWkpIHtcbiAgICBsYXQgPSAyICogTWF0aC5hdGFuKG51bSAqIHNyYXQodGhpcy5lICogTWF0aC5zaW4ocC55KSwgLSAwLjUgKiB0aGlzLmUpKSAtIEhBTEZfUEk7XG4gICAgaWYgKE1hdGguYWJzKGxhdCAtIHAueSkgPCBERUxfVE9MKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgcC55ID0gbGF0O1xuICB9XG4gIC8qIGNvbnZlcmdlbmNlIGZhaWxlZCAqL1xuICBpZiAoIWkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcImdhdXNzXCJdO1xuIiwidmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBhc2lueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hc2lueicpO1xuXG4vKlxuICByZWZlcmVuY2U6XG4gICAgV29sZnJhbSBNYXRod29ybGQgXCJHbm9tb25pYyBQcm9qZWN0aW9uXCJcbiAgICBodHRwOi8vbWF0aHdvcmxkLndvbGZyYW0uY29tL0dub21vbmljUHJvamVjdGlvbi5odG1sXG4gICAgQWNjZXNzZWQ6IDEydGggTm92ZW1iZXIgMjAwOVxuICAqL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgLyogUGxhY2UgcGFyYW1ldGVycyBpbiBzdGF0aWMgc3RvcmFnZSBmb3IgY29tbW9uIHVzZVxuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIHRoaXMuc2luX3AxNCA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gIHRoaXMuY29zX3AxNCA9IE1hdGguY29zKHRoaXMubGF0MCk7XG4gIC8vIEFwcHJveGltYXRpb24gZm9yIHByb2plY3RpbmcgcG9pbnRzIHRvIHRoZSBob3Jpem9uIChpbmZpbml0eSlcbiAgdGhpcy5pbmZpbml0eV9kaXN0ID0gMTAwMCAqIHRoaXMuYTtcbiAgdGhpcy5yYyA9IDE7XG59O1xuXG5cbi8qIEdub21vbmljIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBzaW5waGksIGNvc3BoaTsgLyogc2luIGFuZCBjb3MgdmFsdWUgICAgICAgICovXG4gIHZhciBkbG9uOyAvKiBkZWx0YSBsb25naXR1ZGUgdmFsdWUgICAgICAqL1xuICB2YXIgY29zbG9uOyAvKiBjb3Mgb2YgbG9uZ2l0dWRlICAgICAgICAqL1xuICB2YXIga3NwOyAvKiBzY2FsZSBmYWN0b3IgICAgICAgICAgKi9cbiAgdmFyIGc7XG4gIHZhciB4LCB5O1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICAvKiBGb3J3YXJkIGVxdWF0aW9uc1xuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICBkbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcblxuICBzaW5waGkgPSBNYXRoLnNpbihsYXQpO1xuICBjb3NwaGkgPSBNYXRoLmNvcyhsYXQpO1xuXG4gIGNvc2xvbiA9IE1hdGguY29zKGRsb24pO1xuICBnID0gdGhpcy5zaW5fcDE0ICogc2lucGhpICsgdGhpcy5jb3NfcDE0ICogY29zcGhpICogY29zbG9uO1xuICBrc3AgPSAxO1xuICBpZiAoKGcgPiAwKSB8fCAoTWF0aC5hYnMoZykgPD0gRVBTTE4pKSB7XG4gICAgeCA9IHRoaXMueDAgKyB0aGlzLmEgKiBrc3AgKiBjb3NwaGkgKiBNYXRoLnNpbihkbG9uKSAvIGc7XG4gICAgeSA9IHRoaXMueTAgKyB0aGlzLmEgKiBrc3AgKiAodGhpcy5jb3NfcDE0ICogc2lucGhpIC0gdGhpcy5zaW5fcDE0ICogY29zcGhpICogY29zbG9uKSAvIGc7XG4gIH1cbiAgZWxzZSB7XG5cbiAgICAvLyBQb2ludCBpcyBpbiB0aGUgb3Bwb3NpbmcgaGVtaXNwaGVyZSBhbmQgaXMgdW5wcm9qZWN0YWJsZVxuICAgIC8vIFdlIHN0aWxsIG5lZWQgdG8gcmV0dXJuIGEgcmVhc29uYWJsZSBwb2ludCwgc28gd2UgcHJvamVjdCBcbiAgICAvLyB0byBpbmZpbml0eSwgb24gYSBiZWFyaW5nIFxuICAgIC8vIGVxdWl2YWxlbnQgdG8gdGhlIG5vcnRoZXJuIGhlbWlzcGhlcmUgZXF1aXZhbGVudFxuICAgIC8vIFRoaXMgaXMgYSByZWFzb25hYmxlIGFwcHJveGltYXRpb24gZm9yIHNob3J0IHNoYXBlcyBhbmQgbGluZXMgdGhhdCBcbiAgICAvLyBzdHJhZGRsZSB0aGUgaG9yaXpvbi5cblxuICAgIHggPSB0aGlzLngwICsgdGhpcy5pbmZpbml0eV9kaXN0ICogY29zcGhpICogTWF0aC5zaW4oZGxvbik7XG4gICAgeSA9IHRoaXMueTAgKyB0aGlzLmluZmluaXR5X2Rpc3QgKiAodGhpcy5jb3NfcDE0ICogc2lucGhpIC0gdGhpcy5zaW5fcDE0ICogY29zcGhpICogY29zbG9uKTtcblxuICB9XG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG4gIHJldHVybiBwO1xufTtcblxuXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciByaDsgLyogUmhvICovXG4gIHZhciBzaW5jLCBjb3NjO1xuICB2YXIgYztcbiAgdmFyIGxvbiwgbGF0O1xuXG4gIC8qIEludmVyc2UgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHAueCA9IChwLnggLSB0aGlzLngwKSAvIHRoaXMuYTtcbiAgcC55ID0gKHAueSAtIHRoaXMueTApIC8gdGhpcy5hO1xuXG4gIHAueCAvPSB0aGlzLmswO1xuICBwLnkgLz0gdGhpcy5rMDtcblxuICBpZiAoKHJoID0gTWF0aC5zcXJ0KHAueCAqIHAueCArIHAueSAqIHAueSkpKSB7XG4gICAgYyA9IE1hdGguYXRhbjIocmgsIHRoaXMucmMpO1xuICAgIHNpbmMgPSBNYXRoLnNpbihjKTtcbiAgICBjb3NjID0gTWF0aC5jb3MoYyk7XG5cbiAgICBsYXQgPSBhc2lueihjb3NjICogdGhpcy5zaW5fcDE0ICsgKHAueSAqIHNpbmMgKiB0aGlzLmNvc19wMTQpIC8gcmgpO1xuICAgIGxvbiA9IE1hdGguYXRhbjIocC54ICogc2luYywgcmggKiB0aGlzLmNvc19wMTQgKiBjb3NjIC0gcC55ICogdGhpcy5zaW5fcDE0ICogc2luYyk7XG4gICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgbG9uKTtcbiAgfVxuICBlbHNlIHtcbiAgICBsYXQgPSB0aGlzLnBoaWMwO1xuICAgIGxvbiA9IDA7XG4gIH1cblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcImdub21cIl07XG4iLCJ2YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5hID0gNjM3NzM5Ny4xNTU7XG4gIHRoaXMuZXMgPSAwLjAwNjY3NDM3MjIzMDYxNDtcbiAgdGhpcy5lID0gTWF0aC5zcXJ0KHRoaXMuZXMpO1xuICBpZiAoIXRoaXMubGF0MCkge1xuICAgIHRoaXMubGF0MCA9IDAuODYzOTM3OTc5NzM3MTkzO1xuICB9XG4gIGlmICghdGhpcy5sb25nMCkge1xuICAgIHRoaXMubG9uZzAgPSAwLjc0MTc2NDkzMjA5NzU5MDEgLSAwLjMwODM0MTUwMTE4NTY2NTtcbiAgfVxuICAvKiBpZiBzY2FsZSBub3Qgc2V0IGRlZmF1bHQgdG8gMC45OTk5ICovXG4gIGlmICghdGhpcy5rMCkge1xuICAgIHRoaXMuazAgPSAwLjk5OTk7XG4gIH1cbiAgdGhpcy5zNDUgPSAwLjc4NTM5ODE2MzM5NzQ0ODsgLyogNDUgKi9cbiAgdGhpcy5zOTAgPSAyICogdGhpcy5zNDU7XG4gIHRoaXMuZmkwID0gdGhpcy5sYXQwO1xuICB0aGlzLmUyID0gdGhpcy5lcztcbiAgdGhpcy5lID0gTWF0aC5zcXJ0KHRoaXMuZTIpO1xuICB0aGlzLmFsZmEgPSBNYXRoLnNxcnQoMSArICh0aGlzLmUyICogTWF0aC5wb3coTWF0aC5jb3ModGhpcy5maTApLCA0KSkgLyAoMSAtIHRoaXMuZTIpKTtcbiAgdGhpcy51cSA9IDEuMDQyMTY4NTYzODA0NzQ7XG4gIHRoaXMudTAgPSBNYXRoLmFzaW4oTWF0aC5zaW4odGhpcy5maTApIC8gdGhpcy5hbGZhKTtcbiAgdGhpcy5nID0gTWF0aC5wb3coKDEgKyB0aGlzLmUgKiBNYXRoLnNpbih0aGlzLmZpMCkpIC8gKDEgLSB0aGlzLmUgKiBNYXRoLnNpbih0aGlzLmZpMCkpLCB0aGlzLmFsZmEgKiB0aGlzLmUgLyAyKTtcbiAgdGhpcy5rID0gTWF0aC50YW4odGhpcy51MCAvIDIgKyB0aGlzLnM0NSkgLyBNYXRoLnBvdyhNYXRoLnRhbih0aGlzLmZpMCAvIDIgKyB0aGlzLnM0NSksIHRoaXMuYWxmYSkgKiB0aGlzLmc7XG4gIHRoaXMuazEgPSB0aGlzLmswO1xuICB0aGlzLm4wID0gdGhpcy5hICogTWF0aC5zcXJ0KDEgLSB0aGlzLmUyKSAvICgxIC0gdGhpcy5lMiAqIE1hdGgucG93KE1hdGguc2luKHRoaXMuZmkwKSwgMikpO1xuICB0aGlzLnMwID0gMS4zNzAwODM0NjI4MTU1NTtcbiAgdGhpcy5uID0gTWF0aC5zaW4odGhpcy5zMCk7XG4gIHRoaXMucm8wID0gdGhpcy5rMSAqIHRoaXMubjAgLyBNYXRoLnRhbih0aGlzLnMwKTtcbiAgdGhpcy5hZCA9IHRoaXMuczkwIC0gdGhpcy51cTtcbn07XG5cbi8qIGVsbGlwc29pZCAqL1xuLyogY2FsY3VsYXRlIHh5IGZyb20gbGF0L2xvbiAqL1xuLyogQ29uc3RhbnRzLCBpZGVudGljYWwgdG8gaW52ZXJzZSB0cmFuc2Zvcm0gZnVuY3Rpb24gKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGdmaSwgdSwgZGVsdGF2LCBzLCBkLCBlcHMsIHJvO1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICB2YXIgZGVsdGFfbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgLyogVHJhbnNmb3JtYXRpb24gKi9cbiAgZ2ZpID0gTWF0aC5wb3coKCgxICsgdGhpcy5lICogTWF0aC5zaW4obGF0KSkgLyAoMSAtIHRoaXMuZSAqIE1hdGguc2luKGxhdCkpKSwgKHRoaXMuYWxmYSAqIHRoaXMuZSAvIDIpKTtcbiAgdSA9IDIgKiAoTWF0aC5hdGFuKHRoaXMuayAqIE1hdGgucG93KE1hdGgudGFuKGxhdCAvIDIgKyB0aGlzLnM0NSksIHRoaXMuYWxmYSkgLyBnZmkpIC0gdGhpcy5zNDUpO1xuICBkZWx0YXYgPSAtZGVsdGFfbG9uICogdGhpcy5hbGZhO1xuICBzID0gTWF0aC5hc2luKE1hdGguY29zKHRoaXMuYWQpICogTWF0aC5zaW4odSkgKyBNYXRoLnNpbih0aGlzLmFkKSAqIE1hdGguY29zKHUpICogTWF0aC5jb3MoZGVsdGF2KSk7XG4gIGQgPSBNYXRoLmFzaW4oTWF0aC5jb3ModSkgKiBNYXRoLnNpbihkZWx0YXYpIC8gTWF0aC5jb3MocykpO1xuICBlcHMgPSB0aGlzLm4gKiBkO1xuICBybyA9IHRoaXMucm8wICogTWF0aC5wb3coTWF0aC50YW4odGhpcy5zMCAvIDIgKyB0aGlzLnM0NSksIHRoaXMubikgLyBNYXRoLnBvdyhNYXRoLnRhbihzIC8gMiArIHRoaXMuczQ1KSwgdGhpcy5uKTtcbiAgcC55ID0gcm8gKiBNYXRoLmNvcyhlcHMpIC8gMTtcbiAgcC54ID0gcm8gKiBNYXRoLnNpbihlcHMpIC8gMTtcblxuICBpZiAoIXRoaXMuY3plY2gpIHtcbiAgICBwLnkgKj0gLTE7XG4gICAgcC54ICo9IC0xO1xuICB9XG4gIHJldHVybiAocCk7XG59O1xuXG4vKiBjYWxjdWxhdGUgbGF0L2xvbiBmcm9tIHh5ICovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciB1LCBkZWx0YXYsIHMsIGQsIGVwcywgcm8sIGZpMTtcbiAgdmFyIG9rO1xuXG4gIC8qIFRyYW5zZm9ybWF0aW9uICovXG4gIC8qIHJldmVydCB5LCB4Ki9cbiAgdmFyIHRtcCA9IHAueDtcbiAgcC54ID0gcC55O1xuICBwLnkgPSB0bXA7XG4gIGlmICghdGhpcy5jemVjaCkge1xuICAgIHAueSAqPSAtMTtcbiAgICBwLnggKj0gLTE7XG4gIH1cbiAgcm8gPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgZXBzID0gTWF0aC5hdGFuMihwLnksIHAueCk7XG4gIGQgPSBlcHMgLyBNYXRoLnNpbih0aGlzLnMwKTtcbiAgcyA9IDIgKiAoTWF0aC5hdGFuKE1hdGgucG93KHRoaXMucm8wIC8gcm8sIDEgLyB0aGlzLm4pICogTWF0aC50YW4odGhpcy5zMCAvIDIgKyB0aGlzLnM0NSkpIC0gdGhpcy5zNDUpO1xuICB1ID0gTWF0aC5hc2luKE1hdGguY29zKHRoaXMuYWQpICogTWF0aC5zaW4ocykgLSBNYXRoLnNpbih0aGlzLmFkKSAqIE1hdGguY29zKHMpICogTWF0aC5jb3MoZCkpO1xuICBkZWx0YXYgPSBNYXRoLmFzaW4oTWF0aC5jb3MocykgKiBNYXRoLnNpbihkKSAvIE1hdGguY29zKHUpKTtcbiAgcC54ID0gdGhpcy5sb25nMCAtIGRlbHRhdiAvIHRoaXMuYWxmYTtcbiAgZmkxID0gdTtcbiAgb2sgPSAwO1xuICB2YXIgaXRlciA9IDA7XG4gIGRvIHtcbiAgICBwLnkgPSAyICogKE1hdGguYXRhbihNYXRoLnBvdyh0aGlzLmssIC0gMSAvIHRoaXMuYWxmYSkgKiBNYXRoLnBvdyhNYXRoLnRhbih1IC8gMiArIHRoaXMuczQ1KSwgMSAvIHRoaXMuYWxmYSkgKiBNYXRoLnBvdygoMSArIHRoaXMuZSAqIE1hdGguc2luKGZpMSkpIC8gKDEgLSB0aGlzLmUgKiBNYXRoLnNpbihmaTEpKSwgdGhpcy5lIC8gMikpIC0gdGhpcy5zNDUpO1xuICAgIGlmIChNYXRoLmFicyhmaTEgLSBwLnkpIDwgMC4wMDAwMDAwMDAxKSB7XG4gICAgICBvayA9IDE7XG4gICAgfVxuICAgIGZpMSA9IHAueTtcbiAgICBpdGVyICs9IDE7XG4gIH0gd2hpbGUgKG9rID09PSAwICYmIGl0ZXIgPCAxNSk7XG4gIGlmIChpdGVyID49IDE1KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICByZXR1cm4gKHApO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJLcm92YWtcIiwgXCJrcm92YWtcIl07XG4iLCJ2YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBGT1JUUEkgPSBNYXRoLlBJLzQ7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIHFzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3FzZm56Jyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG4vKlxuICByZWZlcmVuY2VcbiAgICBcIk5ldyBFcXVhbC1BcmVhIE1hcCBQcm9qZWN0aW9ucyBmb3IgTm9uY2lyY3VsYXIgUmVnaW9uc1wiLCBKb2huIFAuIFNueWRlcixcbiAgICBUaGUgQW1lcmljYW4gQ2FydG9ncmFwaGVyLCBWb2wgMTUsIE5vLiA0LCBPY3RvYmVyIDE5ODgsIHBwLiAzNDEtMzU1LlxuICAqL1xuXG5leHBvcnRzLlNfUE9MRSA9IDE7XG5leHBvcnRzLk5fUE9MRSA9IDI7XG5leHBvcnRzLkVRVUlUID0gMztcbmV4cG9ydHMuT0JMSVEgPSA0O1xuXG5cbi8qIEluaXRpYWxpemUgdGhlIExhbWJlcnQgQXppbXV0aGFsIEVxdWFsIEFyZWEgcHJvamVjdGlvblxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciB0ID0gTWF0aC5hYnModGhpcy5sYXQwKTtcbiAgaWYgKE1hdGguYWJzKHQgLSBIQUxGX1BJKSA8IEVQU0xOKSB7XG4gICAgdGhpcy5tb2RlID0gdGhpcy5sYXQwIDwgMCA/IHRoaXMuU19QT0xFIDogdGhpcy5OX1BPTEU7XG4gIH1cbiAgZWxzZSBpZiAoTWF0aC5hYnModCkgPCBFUFNMTikge1xuICAgIHRoaXMubW9kZSA9IHRoaXMuRVFVSVQ7XG4gIH1cbiAgZWxzZSB7XG4gICAgdGhpcy5tb2RlID0gdGhpcy5PQkxJUTtcbiAgfVxuICBpZiAodGhpcy5lcyA+IDApIHtcbiAgICB2YXIgc2lucGhpO1xuXG4gICAgdGhpcy5xcCA9IHFzZm56KHRoaXMuZSwgMSk7XG4gICAgdGhpcy5tbWYgPSAwLjUgLyAoMSAtIHRoaXMuZXMpO1xuICAgIHRoaXMuYXBhID0gdGhpcy5hdXRoc2V0KHRoaXMuZXMpO1xuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgY2FzZSB0aGlzLk5fUE9MRTpcbiAgICAgIHRoaXMuZGQgPSAxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLlNfUE9MRTpcbiAgICAgIHRoaXMuZGQgPSAxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLkVRVUlUOlxuICAgICAgdGhpcy5ycSA9IE1hdGguc3FydCgwLjUgKiB0aGlzLnFwKTtcbiAgICAgIHRoaXMuZGQgPSAxIC8gdGhpcy5ycTtcbiAgICAgIHRoaXMueG1mID0gMTtcbiAgICAgIHRoaXMueW1mID0gMC41ICogdGhpcy5xcDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgdGhpcy5PQkxJUTpcbiAgICAgIHRoaXMucnEgPSBNYXRoLnNxcnQoMC41ICogdGhpcy5xcCk7XG4gICAgICBzaW5waGkgPSBNYXRoLnNpbih0aGlzLmxhdDApO1xuICAgICAgdGhpcy5zaW5iMSA9IHFzZm56KHRoaXMuZSwgc2lucGhpKSAvIHRoaXMucXA7XG4gICAgICB0aGlzLmNvc2IxID0gTWF0aC5zcXJ0KDEgLSB0aGlzLnNpbmIxICogdGhpcy5zaW5iMSk7XG4gICAgICB0aGlzLmRkID0gTWF0aC5jb3ModGhpcy5sYXQwKSAvIChNYXRoLnNxcnQoMSAtIHRoaXMuZXMgKiBzaW5waGkgKiBzaW5waGkpICogdGhpcy5ycSAqIHRoaXMuY29zYjEpO1xuICAgICAgdGhpcy55bWYgPSAodGhpcy54bWYgPSB0aGlzLnJxKSAvIHRoaXMuZGQ7XG4gICAgICB0aGlzLnhtZiAqPSB0aGlzLmRkO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuT0JMSVEpIHtcbiAgICAgIHRoaXMuc2lucGgwID0gTWF0aC5zaW4odGhpcy5sYXQwKTtcbiAgICAgIHRoaXMuY29zcGgwID0gTWF0aC5jb3ModGhpcy5sYXQwKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qIExhbWJlcnQgQXppbXV0aGFsIEVxdWFsIEFyZWEgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcblxuICAvKiBGb3J3YXJkIGVxdWF0aW9uc1xuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICB2YXIgeCwgeSwgY29zbGFtLCBzaW5sYW0sIHNpbnBoaSwgcSwgc2luYiwgY29zYiwgYiwgY29zcGhpO1xuICB2YXIgbGFtID0gcC54O1xuICB2YXIgcGhpID0gcC55O1xuXG4gIGxhbSA9IGFkanVzdF9sb24obGFtIC0gdGhpcy5sb25nMCk7XG5cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgc2lucGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICBjb3NwaGkgPSBNYXRoLmNvcyhwaGkpO1xuICAgIGNvc2xhbSA9IE1hdGguY29zKGxhbSk7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gdGhpcy5PQkxJUSB8fCB0aGlzLm1vZGUgPT09IHRoaXMuRVFVSVQpIHtcbiAgICAgIHkgPSAodGhpcy5tb2RlID09PSB0aGlzLkVRVUlUKSA/IDEgKyBjb3NwaGkgKiBjb3NsYW0gOiAxICsgdGhpcy5zaW5waDAgKiBzaW5waGkgKyB0aGlzLmNvc3BoMCAqIGNvc3BoaSAqIGNvc2xhbTtcbiAgICAgIGlmICh5IDw9IEVQU0xOKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgeSA9IE1hdGguc3FydCgyIC8geSk7XG4gICAgICB4ID0geSAqIGNvc3BoaSAqIE1hdGguc2luKGxhbSk7XG4gICAgICB5ICo9ICh0aGlzLm1vZGUgPT09IHRoaXMuRVFVSVQpID8gc2lucGhpIDogdGhpcy5jb3NwaDAgKiBzaW5waGkgLSB0aGlzLnNpbnBoMCAqIGNvc3BoaSAqIGNvc2xhbTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5tb2RlID09PSB0aGlzLk5fUE9MRSB8fCB0aGlzLm1vZGUgPT09IHRoaXMuU19QT0xFKSB7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSB0aGlzLk5fUE9MRSkge1xuICAgICAgICBjb3NsYW0gPSAtY29zbGFtO1xuICAgICAgfVxuICAgICAgaWYgKE1hdGguYWJzKHBoaSArIHRoaXMucGhpMCkgPCBFUFNMTikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIHkgPSBGT1JUUEkgLSBwaGkgKiAwLjU7XG4gICAgICB5ID0gMiAqICgodGhpcy5tb2RlID09PSB0aGlzLlNfUE9MRSkgPyBNYXRoLmNvcyh5KSA6IE1hdGguc2luKHkpKTtcbiAgICAgIHggPSB5ICogTWF0aC5zaW4obGFtKTtcbiAgICAgIHkgKj0gY29zbGFtO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBzaW5iID0gMDtcbiAgICBjb3NiID0gMDtcbiAgICBiID0gMDtcbiAgICBjb3NsYW0gPSBNYXRoLmNvcyhsYW0pO1xuICAgIHNpbmxhbSA9IE1hdGguc2luKGxhbSk7XG4gICAgc2lucGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICBxID0gcXNmbnoodGhpcy5lLCBzaW5waGkpO1xuICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuT0JMSVEgfHwgdGhpcy5tb2RlID09PSB0aGlzLkVRVUlUKSB7XG4gICAgICBzaW5iID0gcSAvIHRoaXMucXA7XG4gICAgICBjb3NiID0gTWF0aC5zcXJ0KDEgLSBzaW5iICogc2luYik7XG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgY2FzZSB0aGlzLk9CTElROlxuICAgICAgYiA9IDEgKyB0aGlzLnNpbmIxICogc2luYiArIHRoaXMuY29zYjEgKiBjb3NiICogY29zbGFtO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLkVRVUlUOlxuICAgICAgYiA9IDEgKyBjb3NiICogY29zbGFtO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLk5fUE9MRTpcbiAgICAgIGIgPSBIQUxGX1BJICsgcGhpO1xuICAgICAgcSA9IHRoaXMucXAgLSBxO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLlNfUE9MRTpcbiAgICAgIGIgPSBwaGkgLSBIQUxGX1BJO1xuICAgICAgcSA9IHRoaXMucXAgKyBxO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChNYXRoLmFicyhiKSA8IEVQU0xOKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICBjYXNlIHRoaXMuT0JMSVE6XG4gICAgY2FzZSB0aGlzLkVRVUlUOlxuICAgICAgYiA9IE1hdGguc3FydCgyIC8gYik7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSB0aGlzLk9CTElRKSB7XG4gICAgICAgIHkgPSB0aGlzLnltZiAqIGIgKiAodGhpcy5jb3NiMSAqIHNpbmIgLSB0aGlzLnNpbmIxICogY29zYiAqIGNvc2xhbSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgeSA9IChiID0gTWF0aC5zcXJ0KDIgLyAoMSArIGNvc2IgKiBjb3NsYW0pKSkgKiBzaW5iICogdGhpcy55bWY7XG4gICAgICB9XG4gICAgICB4ID0gdGhpcy54bWYgKiBiICogY29zYiAqIHNpbmxhbTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgdGhpcy5OX1BPTEU6XG4gICAgY2FzZSB0aGlzLlNfUE9MRTpcbiAgICAgIGlmIChxID49IDApIHtcbiAgICAgICAgeCA9IChiID0gTWF0aC5zcXJ0KHEpKSAqIHNpbmxhbTtcbiAgICAgICAgeSA9IGNvc2xhbSAqICgodGhpcy5tb2RlID09PSB0aGlzLlNfUE9MRSkgPyBiIDogLWIpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHggPSB5ID0gMDtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHAueCA9IHRoaXMuYSAqIHggKyB0aGlzLngwO1xuICBwLnkgPSB0aGlzLmEgKiB5ICsgdGhpcy55MDtcbiAgcmV0dXJuIHA7XG59O1xuXG4vKiBJbnZlcnNlIGVxdWF0aW9uc1xuICAtLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgdmFyIHggPSBwLnggLyB0aGlzLmE7XG4gIHZhciB5ID0gcC55IC8gdGhpcy5hO1xuICB2YXIgbGFtLCBwaGksIGNDZSwgc0NlLCBxLCByaG8sIGFiO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHZhciBjb3N6ID0gMCxcbiAgICAgIHJoLCBzaW56ID0gMDtcblxuICAgIHJoID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xuICAgIHBoaSA9IHJoICogMC41O1xuICAgIGlmIChwaGkgPiAxKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcGhpID0gMiAqIE1hdGguYXNpbihwaGkpO1xuICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuT0JMSVEgfHwgdGhpcy5tb2RlID09PSB0aGlzLkVRVUlUKSB7XG4gICAgICBzaW56ID0gTWF0aC5zaW4ocGhpKTtcbiAgICAgIGNvc3ogPSBNYXRoLmNvcyhwaGkpO1xuICAgIH1cbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgIGNhc2UgdGhpcy5FUVVJVDpcbiAgICAgIHBoaSA9IChNYXRoLmFicyhyaCkgPD0gRVBTTE4pID8gMCA6IE1hdGguYXNpbih5ICogc2lueiAvIHJoKTtcbiAgICAgIHggKj0gc2luejtcbiAgICAgIHkgPSBjb3N6ICogcmg7XG4gICAgICBicmVhaztcbiAgICBjYXNlIHRoaXMuT0JMSVE6XG4gICAgICBwaGkgPSAoTWF0aC5hYnMocmgpIDw9IEVQU0xOKSA/IHRoaXMucGhpMCA6IE1hdGguYXNpbihjb3N6ICogdGhpcy5zaW5waDAgKyB5ICogc2lueiAqIHRoaXMuY29zcGgwIC8gcmgpO1xuICAgICAgeCAqPSBzaW56ICogdGhpcy5jb3NwaDA7XG4gICAgICB5ID0gKGNvc3ogLSBNYXRoLnNpbihwaGkpICogdGhpcy5zaW5waDApICogcmg7XG4gICAgICBicmVhaztcbiAgICBjYXNlIHRoaXMuTl9QT0xFOlxuICAgICAgeSA9IC15O1xuICAgICAgcGhpID0gSEFMRl9QSSAtIHBoaTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgdGhpcy5TX1BPTEU6XG4gICAgICBwaGkgLT0gSEFMRl9QSTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBsYW0gPSAoeSA9PT0gMCAmJiAodGhpcy5tb2RlID09PSB0aGlzLkVRVUlUIHx8IHRoaXMubW9kZSA9PT0gdGhpcy5PQkxJUSkpID8gMCA6IE1hdGguYXRhbjIoeCwgeSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgYWIgPSAwO1xuICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuT0JMSVEgfHwgdGhpcy5tb2RlID09PSB0aGlzLkVRVUlUKSB7XG4gICAgICB4IC89IHRoaXMuZGQ7XG4gICAgICB5ICo9IHRoaXMuZGQ7XG4gICAgICByaG8gPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgICBpZiAocmhvIDwgRVBTTE4pIHtcbiAgICAgICAgcC54ID0gMDtcbiAgICAgICAgcC55ID0gdGhpcy5waGkwO1xuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH1cbiAgICAgIHNDZSA9IDIgKiBNYXRoLmFzaW4oMC41ICogcmhvIC8gdGhpcy5ycSk7XG4gICAgICBjQ2UgPSBNYXRoLmNvcyhzQ2UpO1xuICAgICAgeCAqPSAoc0NlID0gTWF0aC5zaW4oc0NlKSk7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSB0aGlzLk9CTElRKSB7XG4gICAgICAgIGFiID0gY0NlICogdGhpcy5zaW5iMSArIHkgKiBzQ2UgKiB0aGlzLmNvc2IxIC8gcmhvO1xuICAgICAgICBxID0gdGhpcy5xcCAqIGFiO1xuICAgICAgICB5ID0gcmhvICogdGhpcy5jb3NiMSAqIGNDZSAtIHkgKiB0aGlzLnNpbmIxICogc0NlO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGFiID0geSAqIHNDZSAvIHJobztcbiAgICAgICAgcSA9IHRoaXMucXAgKiBhYjtcbiAgICAgICAgeSA9IHJobyAqIGNDZTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5tb2RlID09PSB0aGlzLk5fUE9MRSB8fCB0aGlzLm1vZGUgPT09IHRoaXMuU19QT0xFKSB7XG4gICAgICBpZiAodGhpcy5tb2RlID09PSB0aGlzLk5fUE9MRSkge1xuICAgICAgICB5ID0gLXk7XG4gICAgICB9XG4gICAgICBxID0gKHggKiB4ICsgeSAqIHkpO1xuICAgICAgaWYgKCFxKSB7XG4gICAgICAgIHAueCA9IDA7XG4gICAgICAgIHAueSA9IHRoaXMucGhpMDtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9XG4gICAgICBhYiA9IDEgLSBxIC8gdGhpcy5xcDtcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuU19QT0xFKSB7XG4gICAgICAgIGFiID0gLWFiO1xuICAgICAgfVxuICAgIH1cbiAgICBsYW0gPSBNYXRoLmF0YW4yKHgsIHkpO1xuICAgIHBoaSA9IHRoaXMuYXV0aGxhdChNYXRoLmFzaW4oYWIpLCB0aGlzLmFwYSk7XG4gIH1cblxuXG4gIHAueCA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIGxhbSk7XG4gIHAueSA9IHBoaTtcbiAgcmV0dXJuIHA7XG59O1xuXG4vKiBkZXRlcm1pbmUgbGF0aXR1ZGUgZnJvbSBhdXRoYWxpYyBsYXRpdHVkZSAqL1xuZXhwb3J0cy5QMDAgPSAwLjMzMzMzMzMzMzMzMzMzMzMzMzMzO1xuZXhwb3J0cy5QMDEgPSAwLjE3MjIyMjIyMjIyMjIyMjIyMjIyO1xuZXhwb3J0cy5QMDIgPSAwLjEwMjU3OTM2NTA3OTM2NTA3OTM2O1xuZXhwb3J0cy5QMTAgPSAwLjA2Mzg4ODg4ODg4ODg4ODg4ODg4O1xuZXhwb3J0cy5QMTEgPSAwLjA2NjQwMjExNjQwMjExNjQwMjExO1xuZXhwb3J0cy5QMjAgPSAwLjAxNjQxNTAxMjk0MjE5MTU0NDQzO1xuXG5leHBvcnRzLmF1dGhzZXQgPSBmdW5jdGlvbihlcykge1xuICB2YXIgdDtcbiAgdmFyIEFQQSA9IFtdO1xuICBBUEFbMF0gPSBlcyAqIHRoaXMuUDAwO1xuICB0ID0gZXMgKiBlcztcbiAgQVBBWzBdICs9IHQgKiB0aGlzLlAwMTtcbiAgQVBBWzFdID0gdCAqIHRoaXMuUDEwO1xuICB0ICo9IGVzO1xuICBBUEFbMF0gKz0gdCAqIHRoaXMuUDAyO1xuICBBUEFbMV0gKz0gdCAqIHRoaXMuUDExO1xuICBBUEFbMl0gPSB0ICogdGhpcy5QMjA7XG4gIHJldHVybiBBUEE7XG59O1xuXG5leHBvcnRzLmF1dGhsYXQgPSBmdW5jdGlvbihiZXRhLCBBUEEpIHtcbiAgdmFyIHQgPSBiZXRhICsgYmV0YTtcbiAgcmV0dXJuIChiZXRhICsgQVBBWzBdICogTWF0aC5zaW4odCkgKyBBUEFbMV0gKiBNYXRoLnNpbih0ICsgdCkgKyBBUEFbMl0gKiBNYXRoLnNpbih0ICsgdCArIHQpKTtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiTGFtYmVydCBBemltdXRoYWwgRXF1YWwgQXJlYVwiLCBcIkxhbWJlcnRfQXppbXV0aGFsX0VxdWFsX0FyZWFcIiwgXCJsYWVhXCJdO1xuIiwidmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBtc2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tc2ZueicpO1xudmFyIHRzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3RzZm56Jyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBzaWduID0gcmVxdWlyZSgnLi4vY29tbW9uL3NpZ24nKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBwaGkyeiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9waGkyeicpO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgLy8gYXJyYXkgb2Y6ICByX21haixyX21pbixsYXQxLGxhdDIsY19sb24sY19sYXQsZmFsc2VfZWFzdCxmYWxzZV9ub3J0aFxuICAvL2RvdWJsZSBjX2xhdDsgICAgICAgICAgICAgICAgICAgLyogY2VudGVyIGxhdGl0dWRlICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8vZG91YmxlIGNfbG9uOyAgICAgICAgICAgICAgICAgICAvKiBjZW50ZXIgbG9uZ2l0dWRlICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLy9kb3VibGUgbGF0MTsgICAgICAgICAgICAgICAgICAgIC8qIGZpcnN0IHN0YW5kYXJkIHBhcmFsbGVsICAgICAgICAgICAgICAqL1xuICAvL2RvdWJsZSBsYXQyOyAgICAgICAgICAgICAgICAgICAgLyogc2Vjb25kIHN0YW5kYXJkIHBhcmFsbGVsICAgICAgICAgICAgICovXG4gIC8vZG91YmxlIHJfbWFqOyAgICAgICAgICAgICAgICAgICAvKiBtYWpvciBheGlzICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLy9kb3VibGUgcl9taW47ICAgICAgICAgICAgICAgICAgIC8qIG1pbm9yIGF4aXMgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvL2RvdWJsZSBmYWxzZV9lYXN0OyAgICAgICAgICAgICAgLyogeCBvZmZzZXQgaW4gbWV0ZXJzICAgICAgICAgICAgICAgICAgICovXG4gIC8vZG91YmxlIGZhbHNlX25vcnRoOyAgICAgICAgICAgICAvKiB5IG9mZnNldCBpbiBtZXRlcnMgICAgICAgICAgICAgICAgICAgKi9cblxuICBpZiAoIXRoaXMubGF0Mikge1xuICAgIHRoaXMubGF0MiA9IHRoaXMubGF0MTtcbiAgfSAvL2lmIGxhdDIgaXMgbm90IGRlZmluZWRcbiAgaWYgKCF0aGlzLmswKSB7XG4gICAgdGhpcy5rMCA9IDE7XG4gIH1cbiAgdGhpcy54MCA9IHRoaXMueDAgfHwgMDtcbiAgdGhpcy55MCA9IHRoaXMueTAgfHwgMDtcbiAgLy8gU3RhbmRhcmQgUGFyYWxsZWxzIGNhbm5vdCBiZSBlcXVhbCBhbmQgb24gb3Bwb3NpdGUgc2lkZXMgb2YgdGhlIGVxdWF0b3JcbiAgaWYgKE1hdGguYWJzKHRoaXMubGF0MSArIHRoaXMubGF0MikgPCBFUFNMTikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciB0ZW1wID0gdGhpcy5iIC8gdGhpcy5hO1xuICB0aGlzLmUgPSBNYXRoLnNxcnQoMSAtIHRlbXAgKiB0ZW1wKTtcblxuICB2YXIgc2luMSA9IE1hdGguc2luKHRoaXMubGF0MSk7XG4gIHZhciBjb3MxID0gTWF0aC5jb3ModGhpcy5sYXQxKTtcbiAgdmFyIG1zMSA9IG1zZm56KHRoaXMuZSwgc2luMSwgY29zMSk7XG4gIHZhciB0czEgPSB0c2Zueih0aGlzLmUsIHRoaXMubGF0MSwgc2luMSk7XG5cbiAgdmFyIHNpbjIgPSBNYXRoLnNpbih0aGlzLmxhdDIpO1xuICB2YXIgY29zMiA9IE1hdGguY29zKHRoaXMubGF0Mik7XG4gIHZhciBtczIgPSBtc2Zueih0aGlzLmUsIHNpbjIsIGNvczIpO1xuICB2YXIgdHMyID0gdHNmbnoodGhpcy5lLCB0aGlzLmxhdDIsIHNpbjIpO1xuXG4gIHZhciB0czAgPSB0c2Zueih0aGlzLmUsIHRoaXMubGF0MCwgTWF0aC5zaW4odGhpcy5sYXQwKSk7XG5cbiAgaWYgKE1hdGguYWJzKHRoaXMubGF0MSAtIHRoaXMubGF0MikgPiBFUFNMTikge1xuICAgIHRoaXMubnMgPSBNYXRoLmxvZyhtczEgLyBtczIpIC8gTWF0aC5sb2codHMxIC8gdHMyKTtcbiAgfVxuICBlbHNlIHtcbiAgICB0aGlzLm5zID0gc2luMTtcbiAgfVxuICBpZiAoaXNOYU4odGhpcy5ucykpIHtcbiAgICB0aGlzLm5zID0gc2luMTtcbiAgfVxuICB0aGlzLmYwID0gbXMxIC8gKHRoaXMubnMgKiBNYXRoLnBvdyh0czEsIHRoaXMubnMpKTtcbiAgdGhpcy5yaCA9IHRoaXMuYSAqIHRoaXMuZjAgKiBNYXRoLnBvdyh0czAsIHRoaXMubnMpO1xuICBpZiAoIXRoaXMudGl0bGUpIHtcbiAgICB0aGlzLnRpdGxlID0gXCJMYW1iZXJ0IENvbmZvcm1hbCBDb25pY1wiO1xuICB9XG59O1xuXG5cbi8vIExhbWJlcnQgQ29uZm9ybWFsIGNvbmljIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcblxuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuXG4gIC8vIHNpbmd1bGFyIGNhc2VzIDpcbiAgaWYgKE1hdGguYWJzKDIgKiBNYXRoLmFicyhsYXQpIC0gTWF0aC5QSSkgPD0gRVBTTE4pIHtcbiAgICBsYXQgPSBzaWduKGxhdCkgKiAoSEFMRl9QSSAtIDIgKiBFUFNMTik7XG4gIH1cblxuICB2YXIgY29uID0gTWF0aC5hYnMoTWF0aC5hYnMobGF0KSAtIEhBTEZfUEkpO1xuICB2YXIgdHMsIHJoMTtcbiAgaWYgKGNvbiA+IEVQU0xOKSB7XG4gICAgdHMgPSB0c2Zueih0aGlzLmUsIGxhdCwgTWF0aC5zaW4obGF0KSk7XG4gICAgcmgxID0gdGhpcy5hICogdGhpcy5mMCAqIE1hdGgucG93KHRzLCB0aGlzLm5zKTtcbiAgfVxuICBlbHNlIHtcbiAgICBjb24gPSBsYXQgKiB0aGlzLm5zO1xuICAgIGlmIChjb24gPD0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJoMSA9IDA7XG4gIH1cbiAgdmFyIHRoZXRhID0gdGhpcy5ucyAqIGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHAueCA9IHRoaXMuazAgKiAocmgxICogTWF0aC5zaW4odGhldGEpKSArIHRoaXMueDA7XG4gIHAueSA9IHRoaXMuazAgKiAodGhpcy5yaCAtIHJoMSAqIE1hdGguY29zKHRoZXRhKSkgKyB0aGlzLnkwO1xuXG4gIHJldHVybiBwO1xufTtcblxuLy8gTGFtYmVydCBDb25mb3JtYWwgQ29uaWMgaW52ZXJzZSBlcXVhdGlvbnMtLW1hcHBpbmcgeCx5IHRvIGxhdC9sb25nXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuXG4gIHZhciByaDEsIGNvbiwgdHM7XG4gIHZhciBsYXQsIGxvbjtcbiAgdmFyIHggPSAocC54IC0gdGhpcy54MCkgLyB0aGlzLmswO1xuICB2YXIgeSA9ICh0aGlzLnJoIC0gKHAueSAtIHRoaXMueTApIC8gdGhpcy5rMCk7XG4gIGlmICh0aGlzLm5zID4gMCkge1xuICAgIHJoMSA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICBjb24gPSAxO1xuICB9XG4gIGVsc2Uge1xuICAgIHJoMSA9IC1NYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgY29uID0gLTE7XG4gIH1cbiAgdmFyIHRoZXRhID0gMDtcbiAgaWYgKHJoMSAhPT0gMCkge1xuICAgIHRoZXRhID0gTWF0aC5hdGFuMigoY29uICogeCksIChjb24gKiB5KSk7XG4gIH1cbiAgaWYgKChyaDEgIT09IDApIHx8ICh0aGlzLm5zID4gMCkpIHtcbiAgICBjb24gPSAxIC8gdGhpcy5ucztcbiAgICB0cyA9IE1hdGgucG93KChyaDEgLyAodGhpcy5hICogdGhpcy5mMCkpLCBjb24pO1xuICAgIGxhdCA9IHBoaTJ6KHRoaXMuZSwgdHMpO1xuICAgIGlmIChsYXQgPT09IC05OTk5KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgbGF0ID0gLUhBTEZfUEk7XG4gIH1cbiAgbG9uID0gYWRqdXN0X2xvbih0aGV0YSAvIHRoaXMubnMgKyB0aGlzLmxvbmcwKTtcblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuXG5leHBvcnRzLm5hbWVzID0gW1wiTGFtYmVydCBUYW5nZW50aWFsIENvbmZvcm1hbCBDb25pYyBQcm9qZWN0aW9uXCIsIFwiTGFtYmVydF9Db25mb3JtYWxfQ29uaWNcIiwgXCJMYW1iZXJ0X0NvbmZvcm1hbF9Db25pY18yU1BcIiwgXCJsY2NcIl07XG4iLCJleHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgLy9uby1vcCBmb3IgbG9uZ2xhdFxufTtcblxuZnVuY3Rpb24gaWRlbnRpdHkocHQpIHtcbiAgcmV0dXJuIHB0O1xufVxuZXhwb3J0cy5mb3J3YXJkID0gaWRlbnRpdHk7XG5leHBvcnRzLmludmVyc2UgPSBpZGVudGl0eTtcbmV4cG9ydHMubmFtZXMgPSBbXCJsb25nbGF0XCIsIFwiaWRlbnRpdHlcIl07XG4iLCJ2YXIgbXNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vbXNmbnonKTtcbnZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBSMkQgPSA1Ny4yOTU3Nzk1MTMwODIzMjA4ODtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBGT1JUUEkgPSBNYXRoLlBJLzQ7XG52YXIgdHNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vdHNmbnonKTtcbnZhciBwaGkyeiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9waGkyeicpO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBjb24gPSB0aGlzLmIgLyB0aGlzLmE7XG4gIHRoaXMuZXMgPSAxIC0gY29uICogY29uO1xuICBpZighKCd4MCcgaW4gdGhpcykpe1xuICAgIHRoaXMueDAgPSAwO1xuICB9XG4gIGlmKCEoJ3kwJyBpbiB0aGlzKSl7XG4gICAgdGhpcy55MCA9IDA7XG4gIH1cbiAgdGhpcy5lID0gTWF0aC5zcXJ0KHRoaXMuZXMpO1xuICBpZiAodGhpcy5sYXRfdHMpIHtcbiAgICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICAgIHRoaXMuazAgPSBNYXRoLmNvcyh0aGlzLmxhdF90cyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5rMCA9IG1zZm56KHRoaXMuZSwgTWF0aC5zaW4odGhpcy5sYXRfdHMpLCBNYXRoLmNvcyh0aGlzLmxhdF90cykpO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBpZiAoIXRoaXMuazApIHtcbiAgICAgIGlmICh0aGlzLmspIHtcbiAgICAgICAgdGhpcy5rMCA9IHRoaXMuaztcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmswID0gMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qIE1lcmNhdG9yIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcbiAgLy8gY29udmVydCB0byByYWRpYW5zXG4gIGlmIChsYXQgKiBSMkQgPiA5MCAmJiBsYXQgKiBSMkQgPCAtOTAgJiYgbG9uICogUjJEID4gMTgwICYmIGxvbiAqIFIyRCA8IC0xODApIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHZhciB4LCB5O1xuICBpZiAoTWF0aC5hYnMoTWF0aC5hYnMobGF0KSAtIEhBTEZfUEkpIDw9IEVQU0xOKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgICB4ID0gdGhpcy54MCArIHRoaXMuYSAqIHRoaXMuazAgKiBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICAgICAgeSA9IHRoaXMueTAgKyB0aGlzLmEgKiB0aGlzLmswICogTWF0aC5sb2coTWF0aC50YW4oRk9SVFBJICsgMC41ICogbGF0KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdmFyIHNpbnBoaSA9IE1hdGguc2luKGxhdCk7XG4gICAgICB2YXIgdHMgPSB0c2Zueih0aGlzLmUsIGxhdCwgc2lucGhpKTtcbiAgICAgIHggPSB0aGlzLngwICsgdGhpcy5hICogdGhpcy5rMCAqIGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gICAgICB5ID0gdGhpcy55MCAtIHRoaXMuYSAqIHRoaXMuazAgKiBNYXRoLmxvZyh0cyk7XG4gICAgfVxuICAgIHAueCA9IHg7XG4gICAgcC55ID0geTtcbiAgICByZXR1cm4gcDtcbiAgfVxufTtcblxuXG4vKiBNZXJjYXRvciBpbnZlcnNlIGVxdWF0aW9ucy0tbWFwcGluZyB4LHkgdG8gbGF0L2xvbmdcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuXG4gIHZhciB4ID0gcC54IC0gdGhpcy54MDtcbiAgdmFyIHkgPSBwLnkgLSB0aGlzLnkwO1xuICB2YXIgbG9uLCBsYXQ7XG5cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgbGF0ID0gSEFMRl9QSSAtIDIgKiBNYXRoLmF0YW4oTWF0aC5leHAoLXkgLyAodGhpcy5hICogdGhpcy5rMCkpKTtcbiAgfVxuICBlbHNlIHtcbiAgICB2YXIgdHMgPSBNYXRoLmV4cCgteSAvICh0aGlzLmEgKiB0aGlzLmswKSk7XG4gICAgbGF0ID0gcGhpMnoodGhpcy5lLCB0cyk7XG4gICAgaWYgKGxhdCA9PT0gLTk5OTkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyB4IC8gKHRoaXMuYSAqIHRoaXMuazApKTtcblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuXG5leHBvcnRzLm5hbWVzID0gW1wiTWVyY2F0b3JcIiwgXCJQb3B1bGFyIFZpc3VhbGlzYXRpb24gUHNldWRvIE1lcmNhdG9yXCIsIFwiTWVyY2F0b3JfMVNQXCIsIFwiTWVyY2F0b3JfQXV4aWxpYXJ5X1NwaGVyZVwiLCBcIm1lcmNcIl07XG4iLCJ2YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG4vKlxuICByZWZlcmVuY2VcbiAgICBcIk5ldyBFcXVhbC1BcmVhIE1hcCBQcm9qZWN0aW9ucyBmb3IgTm9uY2lyY3VsYXIgUmVnaW9uc1wiLCBKb2huIFAuIFNueWRlcixcbiAgICBUaGUgQW1lcmljYW4gQ2FydG9ncmFwaGVyLCBWb2wgMTUsIE5vLiA0LCBPY3RvYmVyIDE5ODgsIHBwLiAzNDEtMzU1LlxuICAqL1xuXG5cbi8qIEluaXRpYWxpemUgdGhlIE1pbGxlciBDeWxpbmRyaWNhbCBwcm9qZWN0aW9uXG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIC8vbm8tb3Bcbn07XG5cblxuLyogTWlsbGVyIEN5bGluZHJpY2FsIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHZhciBkbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgdmFyIHggPSB0aGlzLngwICsgdGhpcy5hICogZGxvbjtcbiAgdmFyIHkgPSB0aGlzLnkwICsgdGhpcy5hICogTWF0aC5sb2coTWF0aC50YW4oKE1hdGguUEkgLyA0KSArIChsYXQgLyAyLjUpKSkgKiAxLjI1O1xuXG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG4gIHJldHVybiBwO1xufTtcblxuLyogTWlsbGVyIEN5bGluZHJpY2FsIGludmVyc2UgZXF1YXRpb25zLS1tYXBwaW5nIHgseSB0byBsYXQvbG9uZ1xuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcblxuICB2YXIgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgcC54IC8gdGhpcy5hKTtcbiAgdmFyIGxhdCA9IDIuNSAqIChNYXRoLmF0YW4oTWF0aC5leHAoMC44ICogcC55IC8gdGhpcy5hKSkgLSBNYXRoLlBJIC8gNCk7XG5cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJNaWxsZXJfQ3lsaW5kcmljYWxcIiwgXCJtaWxsXCJdO1xuIiwidmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge307XG5cbi8qIE1vbGx3ZWlkZSBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcblxuICAvKiBGb3J3YXJkIGVxdWF0aW9uc1xuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuXG4gIHZhciBkZWx0YV9sb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICB2YXIgdGhldGEgPSBsYXQ7XG4gIHZhciBjb24gPSBNYXRoLlBJICogTWF0aC5zaW4obGF0KTtcblxuICAvKiBJdGVyYXRlIHVzaW5nIHRoZSBOZXd0b24tUmFwaHNvbiBtZXRob2QgdG8gZmluZCB0aGV0YVxuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuICBmb3IgKHZhciBpID0gMDsgdHJ1ZTsgaSsrKSB7XG4gICAgdmFyIGRlbHRhX3RoZXRhID0gLSh0aGV0YSArIE1hdGguc2luKHRoZXRhKSAtIGNvbikgLyAoMSArIE1hdGguY29zKHRoZXRhKSk7XG4gICAgdGhldGEgKz0gZGVsdGFfdGhldGE7XG4gICAgaWYgKE1hdGguYWJzKGRlbHRhX3RoZXRhKSA8IEVQU0xOKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgdGhldGEgLz0gMjtcblxuICAvKiBJZiB0aGUgbGF0aXR1ZGUgaXMgOTAgZGVnLCBmb3JjZSB0aGUgeCBjb29yZGluYXRlIHRvIGJlIFwiMCArIGZhbHNlIGVhc3RpbmdcIlxuICAgICAgIHRoaXMgaXMgZG9uZSBoZXJlIGJlY2F1c2Ugb2YgcHJlY2lzaW9uIHByb2JsZW1zIHdpdGggXCJjb3ModGhldGEpXCJcbiAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIGlmIChNYXRoLlBJIC8gMiAtIE1hdGguYWJzKGxhdCkgPCBFUFNMTikge1xuICAgIGRlbHRhX2xvbiA9IDA7XG4gIH1cbiAgdmFyIHggPSAwLjkwMDMxNjMxNjE1OCAqIHRoaXMuYSAqIGRlbHRhX2xvbiAqIE1hdGguY29zKHRoZXRhKSArIHRoaXMueDA7XG4gIHZhciB5ID0gMS40MTQyMTM1NjIzNzMxICogdGhpcy5hICogTWF0aC5zaW4odGhldGEpICsgdGhpcy55MDtcblxuICBwLnggPSB4O1xuICBwLnkgPSB5O1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHRoZXRhO1xuICB2YXIgYXJnO1xuXG4gIC8qIEludmVyc2UgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgYXJnID0gcC55IC8gKDEuNDE0MjEzNTYyMzczMSAqIHRoaXMuYSk7XG5cbiAgLyogQmVjYXVzZSBvZiBkaXZpc2lvbiBieSB6ZXJvIHByb2JsZW1zLCAnYXJnJyBjYW4gbm90IGJlIDEuICBUaGVyZWZvcmVcbiAgICAgICBhIG51bWJlciB2ZXJ5IGNsb3NlIHRvIG9uZSBpcyB1c2VkIGluc3RlYWQuXG4gICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIGlmIChNYXRoLmFicyhhcmcpID4gMC45OTk5OTk5OTk5OTkpIHtcbiAgICBhcmcgPSAwLjk5OTk5OTk5OTk5OTtcbiAgfVxuICB0aGV0YSA9IE1hdGguYXNpbihhcmcpO1xuICB2YXIgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgKHAueCAvICgwLjkwMDMxNjMxNjE1OCAqIHRoaXMuYSAqIE1hdGguY29zKHRoZXRhKSkpKTtcbiAgaWYgKGxvbiA8ICgtTWF0aC5QSSkpIHtcbiAgICBsb24gPSAtTWF0aC5QSTtcbiAgfVxuICBpZiAobG9uID4gTWF0aC5QSSkge1xuICAgIGxvbiA9IE1hdGguUEk7XG4gIH1cbiAgYXJnID0gKDIgKiB0aGV0YSArIE1hdGguc2luKDIgKiB0aGV0YSkpIC8gTWF0aC5QSTtcbiAgaWYgKE1hdGguYWJzKGFyZykgPiAxKSB7XG4gICAgYXJnID0gMTtcbiAgfVxuICB2YXIgbGF0ID0gTWF0aC5hc2luKGFyZyk7XG5cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJNb2xsd2VpZGVcIiwgXCJtb2xsXCJdO1xuIiwidmFyIFNFQ19UT19SQUQgPSA0Ljg0ODEzNjgxMTA5NTM1OTkzNTg5OTE0MTAyMzU3ZS02O1xuLypcbiAgcmVmZXJlbmNlXG4gICAgRGVwYXJ0bWVudCBvZiBMYW5kIGFuZCBTdXJ2ZXkgVGVjaG5pY2FsIENpcmN1bGFyIDE5NzMvMzJcbiAgICAgIGh0dHA6Ly93d3cubGluei5nb3Z0Lm56L2RvY3MvbWlzY2VsbGFuZW91cy9uei1tYXAtZGVmaW5pdGlvbi5wZGZcbiAgICBPU0cgVGVjaG5pY2FsIFJlcG9ydCA0LjFcbiAgICAgIGh0dHA6Ly93d3cubGluei5nb3Z0Lm56L2RvY3MvbWlzY2VsbGFuZW91cy9uem1nLnBkZlxuICAqL1xuXG4vKipcbiAqIGl0ZXJhdGlvbnM6IE51bWJlciBvZiBpdGVyYXRpb25zIHRvIHJlZmluZSBpbnZlcnNlIHRyYW5zZm9ybS5cbiAqICAgICAwIC0+IGttIGFjY3VyYWN5XG4gKiAgICAgMSAtPiBtIGFjY3VyYWN5IC0tIHN1aXRhYmxlIGZvciBtb3N0IG1hcHBpbmcgYXBwbGljYXRpb25zXG4gKiAgICAgMiAtPiBtbSBhY2N1cmFjeVxuICovXG5leHBvcnRzLml0ZXJhdGlvbnMgPSAxO1xuXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5BID0gW107XG4gIHRoaXMuQVsxXSA9IDAuNjM5OTE3NTA3MztcbiAgdGhpcy5BWzJdID0gLTAuMTM1ODc5NzYxMztcbiAgdGhpcy5BWzNdID0gMC4wNjMyOTQ0MDk7XG4gIHRoaXMuQVs0XSA9IC0wLjAyNTI2ODUzO1xuICB0aGlzLkFbNV0gPSAwLjAxMTc4Nzk7XG4gIHRoaXMuQVs2XSA9IC0wLjAwNTUxNjE7XG4gIHRoaXMuQVs3XSA9IDAuMDAyNjkwNjtcbiAgdGhpcy5BWzhdID0gLTAuMDAxMzMzO1xuICB0aGlzLkFbOV0gPSAwLjAwMDY3O1xuICB0aGlzLkFbMTBdID0gLTAuMDAwMzQ7XG5cbiAgdGhpcy5CX3JlID0gW107XG4gIHRoaXMuQl9pbSA9IFtdO1xuICB0aGlzLkJfcmVbMV0gPSAwLjc1NTc4NTMyMjg7XG4gIHRoaXMuQl9pbVsxXSA9IDA7XG4gIHRoaXMuQl9yZVsyXSA9IDAuMjQ5MjA0NjQ2O1xuICB0aGlzLkJfaW1bMl0gPSAwLjAwMzM3MTUwNztcbiAgdGhpcy5CX3JlWzNdID0gLTAuMDAxNTQxNzM5O1xuICB0aGlzLkJfaW1bM10gPSAwLjA0MTA1ODU2MDtcbiAgdGhpcy5CX3JlWzRdID0gLTAuMTAxNjI5MDc7XG4gIHRoaXMuQl9pbVs0XSA9IDAuMDE3Mjc2MDk7XG4gIHRoaXMuQl9yZVs1XSA9IC0wLjI2NjIzNDg5O1xuICB0aGlzLkJfaW1bNV0gPSAtMC4zNjI0OTIxODtcbiAgdGhpcy5CX3JlWzZdID0gLTAuNjg3MDk4MztcbiAgdGhpcy5CX2ltWzZdID0gLTEuMTY1MTk2NztcblxuICB0aGlzLkNfcmUgPSBbXTtcbiAgdGhpcy5DX2ltID0gW107XG4gIHRoaXMuQ19yZVsxXSA9IDEuMzIzMTI3MDQzOTtcbiAgdGhpcy5DX2ltWzFdID0gMDtcbiAgdGhpcy5DX3JlWzJdID0gLTAuNTc3MjQ1Nzg5O1xuICB0aGlzLkNfaW1bMl0gPSAtMC4wMDc4MDk1OTg7XG4gIHRoaXMuQ19yZVszXSA9IDAuNTA4MzA3NTEzO1xuICB0aGlzLkNfaW1bM10gPSAtMC4xMTIyMDg5NTI7XG4gIHRoaXMuQ19yZVs0XSA9IC0wLjE1MDk0NzYyO1xuICB0aGlzLkNfaW1bNF0gPSAwLjE4MjAwNjAyO1xuICB0aGlzLkNfcmVbNV0gPSAxLjAxNDE4MTc5O1xuICB0aGlzLkNfaW1bNV0gPSAxLjY0NDk3Njk2O1xuICB0aGlzLkNfcmVbNl0gPSAxLjk2NjA1NDk7XG4gIHRoaXMuQ19pbVs2XSA9IDIuNTEyNzY0NTtcblxuICB0aGlzLkQgPSBbXTtcbiAgdGhpcy5EWzFdID0gMS41NjI3MDE0MjQzO1xuICB0aGlzLkRbMl0gPSAwLjUxODU0MDYzOTg7XG4gIHRoaXMuRFszXSA9IC0wLjAzMzMzMDk4O1xuICB0aGlzLkRbNF0gPSAtMC4xMDUyOTA2O1xuICB0aGlzLkRbNV0gPSAtMC4wMzY4NTk0O1xuICB0aGlzLkRbNl0gPSAwLjAwNzMxNztcbiAgdGhpcy5EWzddID0gMC4wMTIyMDtcbiAgdGhpcy5EWzhdID0gMC4wMDM5NDtcbiAgdGhpcy5EWzldID0gLTAuMDAxMztcbn07XG5cbi8qKlxuICAgIE5ldyBaZWFsYW5kIE1hcCBHcmlkIEZvcndhcmQgIC0gbG9uZy9sYXQgdG8geC95XG4gICAgbG9uZy9sYXQgaW4gcmFkaWFuc1xuICAqL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuICB2YXIgbjtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcblxuICB2YXIgZGVsdGFfbGF0ID0gbGF0IC0gdGhpcy5sYXQwO1xuICB2YXIgZGVsdGFfbG9uID0gbG9uIC0gdGhpcy5sb25nMDtcblxuICAvLyAxLiBDYWxjdWxhdGUgZF9waGkgYW5kIGRfcHNpICAgIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIGRfbGFtYmRhXG4gIC8vIEZvciB0aGlzIGFsZ29yaXRobSwgZGVsdGFfbGF0aXR1ZGUgaXMgaW4gc2Vjb25kcyBvZiBhcmMgeCAxMC01LCBzbyB3ZSBuZWVkIHRvIHNjYWxlIHRvIHRob3NlIHVuaXRzLiBMb25naXR1ZGUgaXMgcmFkaWFucy5cbiAgdmFyIGRfcGhpID0gZGVsdGFfbGF0IC8gU0VDX1RPX1JBRCAqIDFFLTU7XG4gIHZhciBkX2xhbWJkYSA9IGRlbHRhX2xvbjtcbiAgdmFyIGRfcGhpX24gPSAxOyAvLyBkX3BoaV4wXG5cbiAgdmFyIGRfcHNpID0gMDtcbiAgZm9yIChuID0gMTsgbiA8PSAxMDsgbisrKSB7XG4gICAgZF9waGlfbiA9IGRfcGhpX24gKiBkX3BoaTtcbiAgICBkX3BzaSA9IGRfcHNpICsgdGhpcy5BW25dICogZF9waGlfbjtcbiAgfVxuXG4gIC8vIDIuIENhbGN1bGF0ZSB0aGV0YVxuICB2YXIgdGhfcmUgPSBkX3BzaTtcbiAgdmFyIHRoX2ltID0gZF9sYW1iZGE7XG5cbiAgLy8gMy4gQ2FsY3VsYXRlIHpcbiAgdmFyIHRoX25fcmUgPSAxO1xuICB2YXIgdGhfbl9pbSA9IDA7IC8vIHRoZXRhXjBcbiAgdmFyIHRoX25fcmUxO1xuICB2YXIgdGhfbl9pbTE7XG5cbiAgdmFyIHpfcmUgPSAwO1xuICB2YXIgel9pbSA9IDA7XG4gIGZvciAobiA9IDE7IG4gPD0gNjsgbisrKSB7XG4gICAgdGhfbl9yZTEgPSB0aF9uX3JlICogdGhfcmUgLSB0aF9uX2ltICogdGhfaW07XG4gICAgdGhfbl9pbTEgPSB0aF9uX2ltICogdGhfcmUgKyB0aF9uX3JlICogdGhfaW07XG4gICAgdGhfbl9yZSA9IHRoX25fcmUxO1xuICAgIHRoX25faW0gPSB0aF9uX2ltMTtcbiAgICB6X3JlID0gel9yZSArIHRoaXMuQl9yZVtuXSAqIHRoX25fcmUgLSB0aGlzLkJfaW1bbl0gKiB0aF9uX2ltO1xuICAgIHpfaW0gPSB6X2ltICsgdGhpcy5CX2ltW25dICogdGhfbl9yZSArIHRoaXMuQl9yZVtuXSAqIHRoX25faW07XG4gIH1cblxuICAvLyA0LiBDYWxjdWxhdGUgZWFzdGluZyBhbmQgbm9ydGhpbmdcbiAgcC54ID0gKHpfaW0gKiB0aGlzLmEpICsgdGhpcy54MDtcbiAgcC55ID0gKHpfcmUgKiB0aGlzLmEpICsgdGhpcy55MDtcblxuICByZXR1cm4gcDtcbn07XG5cblxuLyoqXG4gICAgTmV3IFplYWxhbmQgTWFwIEdyaWQgSW52ZXJzZSAgLSAgeC95IHRvIGxvbmcvbGF0XG4gICovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBuO1xuICB2YXIgeCA9IHAueDtcbiAgdmFyIHkgPSBwLnk7XG5cbiAgdmFyIGRlbHRhX3ggPSB4IC0gdGhpcy54MDtcbiAgdmFyIGRlbHRhX3kgPSB5IC0gdGhpcy55MDtcblxuICAvLyAxLiBDYWxjdWxhdGUgelxuICB2YXIgel9yZSA9IGRlbHRhX3kgLyB0aGlzLmE7XG4gIHZhciB6X2ltID0gZGVsdGFfeCAvIHRoaXMuYTtcblxuICAvLyAyYS4gQ2FsY3VsYXRlIHRoZXRhIC0gZmlyc3QgYXBwcm94aW1hdGlvbiBnaXZlcyBrbSBhY2N1cmFjeVxuICB2YXIgel9uX3JlID0gMTtcbiAgdmFyIHpfbl9pbSA9IDA7IC8vIHpeMFxuICB2YXIgel9uX3JlMTtcbiAgdmFyIHpfbl9pbTE7XG5cbiAgdmFyIHRoX3JlID0gMDtcbiAgdmFyIHRoX2ltID0gMDtcbiAgZm9yIChuID0gMTsgbiA8PSA2OyBuKyspIHtcbiAgICB6X25fcmUxID0gel9uX3JlICogel9yZSAtIHpfbl9pbSAqIHpfaW07XG4gICAgel9uX2ltMSA9IHpfbl9pbSAqIHpfcmUgKyB6X25fcmUgKiB6X2ltO1xuICAgIHpfbl9yZSA9IHpfbl9yZTE7XG4gICAgel9uX2ltID0gel9uX2ltMTtcbiAgICB0aF9yZSA9IHRoX3JlICsgdGhpcy5DX3JlW25dICogel9uX3JlIC0gdGhpcy5DX2ltW25dICogel9uX2ltO1xuICAgIHRoX2ltID0gdGhfaW0gKyB0aGlzLkNfaW1bbl0gKiB6X25fcmUgKyB0aGlzLkNfcmVbbl0gKiB6X25faW07XG4gIH1cblxuICAvLyAyYi4gSXRlcmF0ZSB0byByZWZpbmUgdGhlIGFjY3VyYWN5IG9mIHRoZSBjYWxjdWxhdGlvblxuICAvLyAgICAgICAgMCBpdGVyYXRpb25zIGdpdmVzIGttIGFjY3VyYWN5XG4gIC8vICAgICAgICAxIGl0ZXJhdGlvbiBnaXZlcyBtIGFjY3VyYWN5IC0tIGdvb2QgZW5vdWdoIGZvciBtb3N0IG1hcHBpbmcgYXBwbGljYXRpb25zXG4gIC8vICAgICAgICAyIGl0ZXJhdGlvbnMgYml2ZXMgbW0gYWNjdXJhY3lcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLml0ZXJhdGlvbnM7IGkrKykge1xuICAgIHZhciB0aF9uX3JlID0gdGhfcmU7XG4gICAgdmFyIHRoX25faW0gPSB0aF9pbTtcbiAgICB2YXIgdGhfbl9yZTE7XG4gICAgdmFyIHRoX25faW0xO1xuXG4gICAgdmFyIG51bV9yZSA9IHpfcmU7XG4gICAgdmFyIG51bV9pbSA9IHpfaW07XG4gICAgZm9yIChuID0gMjsgbiA8PSA2OyBuKyspIHtcbiAgICAgIHRoX25fcmUxID0gdGhfbl9yZSAqIHRoX3JlIC0gdGhfbl9pbSAqIHRoX2ltO1xuICAgICAgdGhfbl9pbTEgPSB0aF9uX2ltICogdGhfcmUgKyB0aF9uX3JlICogdGhfaW07XG4gICAgICB0aF9uX3JlID0gdGhfbl9yZTE7XG4gICAgICB0aF9uX2ltID0gdGhfbl9pbTE7XG4gICAgICBudW1fcmUgPSBudW1fcmUgKyAobiAtIDEpICogKHRoaXMuQl9yZVtuXSAqIHRoX25fcmUgLSB0aGlzLkJfaW1bbl0gKiB0aF9uX2ltKTtcbiAgICAgIG51bV9pbSA9IG51bV9pbSArIChuIC0gMSkgKiAodGhpcy5CX2ltW25dICogdGhfbl9yZSArIHRoaXMuQl9yZVtuXSAqIHRoX25faW0pO1xuICAgIH1cblxuICAgIHRoX25fcmUgPSAxO1xuICAgIHRoX25faW0gPSAwO1xuICAgIHZhciBkZW5fcmUgPSB0aGlzLkJfcmVbMV07XG4gICAgdmFyIGRlbl9pbSA9IHRoaXMuQl9pbVsxXTtcbiAgICBmb3IgKG4gPSAyOyBuIDw9IDY7IG4rKykge1xuICAgICAgdGhfbl9yZTEgPSB0aF9uX3JlICogdGhfcmUgLSB0aF9uX2ltICogdGhfaW07XG4gICAgICB0aF9uX2ltMSA9IHRoX25faW0gKiB0aF9yZSArIHRoX25fcmUgKiB0aF9pbTtcbiAgICAgIHRoX25fcmUgPSB0aF9uX3JlMTtcbiAgICAgIHRoX25faW0gPSB0aF9uX2ltMTtcbiAgICAgIGRlbl9yZSA9IGRlbl9yZSArIG4gKiAodGhpcy5CX3JlW25dICogdGhfbl9yZSAtIHRoaXMuQl9pbVtuXSAqIHRoX25faW0pO1xuICAgICAgZGVuX2ltID0gZGVuX2ltICsgbiAqICh0aGlzLkJfaW1bbl0gKiB0aF9uX3JlICsgdGhpcy5CX3JlW25dICogdGhfbl9pbSk7XG4gICAgfVxuXG4gICAgLy8gQ29tcGxleCBkaXZpc2lvblxuICAgIHZhciBkZW4yID0gZGVuX3JlICogZGVuX3JlICsgZGVuX2ltICogZGVuX2ltO1xuICAgIHRoX3JlID0gKG51bV9yZSAqIGRlbl9yZSArIG51bV9pbSAqIGRlbl9pbSkgLyBkZW4yO1xuICAgIHRoX2ltID0gKG51bV9pbSAqIGRlbl9yZSAtIG51bV9yZSAqIGRlbl9pbSkgLyBkZW4yO1xuICB9XG5cbiAgLy8gMy4gQ2FsY3VsYXRlIGRfcGhpICAgICAgICAgICAgICAuLi4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZF9sYW1iZGFcbiAgdmFyIGRfcHNpID0gdGhfcmU7XG4gIHZhciBkX2xhbWJkYSA9IHRoX2ltO1xuICB2YXIgZF9wc2lfbiA9IDE7IC8vIGRfcHNpXjBcblxuICB2YXIgZF9waGkgPSAwO1xuICBmb3IgKG4gPSAxOyBuIDw9IDk7IG4rKykge1xuICAgIGRfcHNpX24gPSBkX3BzaV9uICogZF9wc2k7XG4gICAgZF9waGkgPSBkX3BoaSArIHRoaXMuRFtuXSAqIGRfcHNpX247XG4gIH1cblxuICAvLyA0LiBDYWxjdWxhdGUgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZVxuICAvLyBkX3BoaSBpcyBjYWxjdWF0ZWQgaW4gc2Vjb25kIG9mIGFyYyAqIDEwXi01LCBzbyB3ZSBuZWVkIHRvIHNjYWxlIGJhY2sgdG8gcmFkaWFucy4gZF9sYW1iZGEgaXMgaW4gcmFkaWFucy5cbiAgdmFyIGxhdCA9IHRoaXMubGF0MCArIChkX3BoaSAqIFNFQ19UT19SQUQgKiAxRTUpO1xuICB2YXIgbG9uID0gdGhpcy5sb25nMCArIGRfbGFtYmRhO1xuXG4gIHAueCA9IGxvbjtcbiAgcC55ID0gbGF0O1xuXG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJOZXdfWmVhbGFuZF9NYXBfR3JpZFwiLCBcIm56bWdcIl07IiwidmFyIHRzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3RzZm56Jyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgcGhpMnogPSByZXF1aXJlKCcuLi9jb21tb24vcGhpMnonKTtcbnZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIEZPUlRQSSA9IE1hdGguUEkvNDtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG5cbi8qIEluaXRpYWxpemUgdGhlIE9ibGlxdWUgTWVyY2F0b3IgIHByb2plY3Rpb25cbiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMubm9fb2ZmID0gdGhpcy5ub19vZmYgfHwgZmFsc2U7XG4gIHRoaXMubm9fcm90ID0gdGhpcy5ub19yb3QgfHwgZmFsc2U7XG5cbiAgaWYgKGlzTmFOKHRoaXMuazApKSB7XG4gICAgdGhpcy5rMCA9IDE7XG4gIH1cbiAgdmFyIHNpbmxhdCA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gIHZhciBjb3NsYXQgPSBNYXRoLmNvcyh0aGlzLmxhdDApO1xuICB2YXIgY29uID0gdGhpcy5lICogc2lubGF0O1xuXG4gIHRoaXMuYmwgPSBNYXRoLnNxcnQoMSArIHRoaXMuZXMgLyAoMSAtIHRoaXMuZXMpICogTWF0aC5wb3coY29zbGF0LCA0KSk7XG4gIHRoaXMuYWwgPSB0aGlzLmEgKiB0aGlzLmJsICogdGhpcy5rMCAqIE1hdGguc3FydCgxIC0gdGhpcy5lcykgLyAoMSAtIGNvbiAqIGNvbik7XG4gIHZhciB0MCA9IHRzZm56KHRoaXMuZSwgdGhpcy5sYXQwLCBzaW5sYXQpO1xuICB2YXIgZGwgPSB0aGlzLmJsIC8gY29zbGF0ICogTWF0aC5zcXJ0KCgxIC0gdGhpcy5lcykgLyAoMSAtIGNvbiAqIGNvbikpO1xuICBpZiAoZGwgKiBkbCA8IDEpIHtcbiAgICBkbCA9IDE7XG4gIH1cbiAgdmFyIGZsO1xuICB2YXIgZ2w7XG4gIGlmICghaXNOYU4odGhpcy5sb25nYykpIHtcbiAgICAvL0NlbnRyYWwgcG9pbnQgYW5kIGF6aW11dGggbWV0aG9kXG5cbiAgICBpZiAodGhpcy5sYXQwID49IDApIHtcbiAgICAgIGZsID0gZGwgKyBNYXRoLnNxcnQoZGwgKiBkbCAtIDEpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGZsID0gZGwgLSBNYXRoLnNxcnQoZGwgKiBkbCAtIDEpO1xuICAgIH1cbiAgICB0aGlzLmVsID0gZmwgKiBNYXRoLnBvdyh0MCwgdGhpcy5ibCk7XG4gICAgZ2wgPSAwLjUgKiAoZmwgLSAxIC8gZmwpO1xuICAgIHRoaXMuZ2FtbWEwID0gTWF0aC5hc2luKE1hdGguc2luKHRoaXMuYWxwaGEpIC8gZGwpO1xuICAgIHRoaXMubG9uZzAgPSB0aGlzLmxvbmdjIC0gTWF0aC5hc2luKGdsICogTWF0aC50YW4odGhpcy5nYW1tYTApKSAvIHRoaXMuYmw7XG5cbiAgfVxuICBlbHNlIHtcbiAgICAvLzIgcG9pbnRzIG1ldGhvZFxuICAgIHZhciB0MSA9IHRzZm56KHRoaXMuZSwgdGhpcy5sYXQxLCBNYXRoLnNpbih0aGlzLmxhdDEpKTtcbiAgICB2YXIgdDIgPSB0c2Zueih0aGlzLmUsIHRoaXMubGF0MiwgTWF0aC5zaW4odGhpcy5sYXQyKSk7XG4gICAgaWYgKHRoaXMubGF0MCA+PSAwKSB7XG4gICAgICB0aGlzLmVsID0gKGRsICsgTWF0aC5zcXJ0KGRsICogZGwgLSAxKSkgKiBNYXRoLnBvdyh0MCwgdGhpcy5ibCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5lbCA9IChkbCAtIE1hdGguc3FydChkbCAqIGRsIC0gMSkpICogTWF0aC5wb3codDAsIHRoaXMuYmwpO1xuICAgIH1cbiAgICB2YXIgaGwgPSBNYXRoLnBvdyh0MSwgdGhpcy5ibCk7XG4gICAgdmFyIGxsID0gTWF0aC5wb3codDIsIHRoaXMuYmwpO1xuICAgIGZsID0gdGhpcy5lbCAvIGhsO1xuICAgIGdsID0gMC41ICogKGZsIC0gMSAvIGZsKTtcbiAgICB2YXIgamwgPSAodGhpcy5lbCAqIHRoaXMuZWwgLSBsbCAqIGhsKSAvICh0aGlzLmVsICogdGhpcy5lbCArIGxsICogaGwpO1xuICAgIHZhciBwbCA9IChsbCAtIGhsKSAvIChsbCArIGhsKTtcbiAgICB2YXIgZGxvbjEyID0gYWRqdXN0X2xvbih0aGlzLmxvbmcxIC0gdGhpcy5sb25nMik7XG4gICAgdGhpcy5sb25nMCA9IDAuNSAqICh0aGlzLmxvbmcxICsgdGhpcy5sb25nMikgLSBNYXRoLmF0YW4oamwgKiBNYXRoLnRhbigwLjUgKiB0aGlzLmJsICogKGRsb24xMikpIC8gcGwpIC8gdGhpcy5ibDtcbiAgICB0aGlzLmxvbmcwID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwKTtcbiAgICB2YXIgZGxvbjEwID0gYWRqdXN0X2xvbih0aGlzLmxvbmcxIC0gdGhpcy5sb25nMCk7XG4gICAgdGhpcy5nYW1tYTAgPSBNYXRoLmF0YW4oTWF0aC5zaW4odGhpcy5ibCAqIChkbG9uMTApKSAvIGdsKTtcbiAgICB0aGlzLmFscGhhID0gTWF0aC5hc2luKGRsICogTWF0aC5zaW4odGhpcy5nYW1tYTApKTtcbiAgfVxuXG4gIGlmICh0aGlzLm5vX29mZikge1xuICAgIHRoaXMudWMgPSAwO1xuICB9XG4gIGVsc2Uge1xuICAgIGlmICh0aGlzLmxhdDAgPj0gMCkge1xuICAgICAgdGhpcy51YyA9IHRoaXMuYWwgLyB0aGlzLmJsICogTWF0aC5hdGFuMihNYXRoLnNxcnQoZGwgKiBkbCAtIDEpLCBNYXRoLmNvcyh0aGlzLmFscGhhKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy51YyA9IC0xICogdGhpcy5hbCAvIHRoaXMuYmwgKiBNYXRoLmF0YW4yKE1hdGguc3FydChkbCAqIGRsIC0gMSksIE1hdGguY29zKHRoaXMuYWxwaGEpKTtcbiAgICB9XG4gIH1cblxufTtcblxuXG4vKiBPYmxpcXVlIE1lcmNhdG9yIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciB1cywgdnM7XG4gIHZhciBjb247XG4gIGlmIChNYXRoLmFicyhNYXRoLmFicyhsYXQpIC0gSEFMRl9QSSkgPD0gRVBTTE4pIHtcbiAgICBpZiAobGF0ID4gMCkge1xuICAgICAgY29uID0gLTE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uID0gMTtcbiAgICB9XG4gICAgdnMgPSB0aGlzLmFsIC8gdGhpcy5ibCAqIE1hdGgubG9nKE1hdGgudGFuKEZPUlRQSSArIGNvbiAqIHRoaXMuZ2FtbWEwICogMC41KSk7XG4gICAgdXMgPSAtMSAqIGNvbiAqIEhBTEZfUEkgKiB0aGlzLmFsIC8gdGhpcy5ibDtcbiAgfVxuICBlbHNlIHtcbiAgICB2YXIgdCA9IHRzZm56KHRoaXMuZSwgbGF0LCBNYXRoLnNpbihsYXQpKTtcbiAgICB2YXIgcWwgPSB0aGlzLmVsIC8gTWF0aC5wb3codCwgdGhpcy5ibCk7XG4gICAgdmFyIHNsID0gMC41ICogKHFsIC0gMSAvIHFsKTtcbiAgICB2YXIgdGwgPSAwLjUgKiAocWwgKyAxIC8gcWwpO1xuICAgIHZhciB2bCA9IE1hdGguc2luKHRoaXMuYmwgKiAoZGxvbikpO1xuICAgIHZhciB1bCA9IChzbCAqIE1hdGguc2luKHRoaXMuZ2FtbWEwKSAtIHZsICogTWF0aC5jb3ModGhpcy5nYW1tYTApKSAvIHRsO1xuICAgIGlmIChNYXRoLmFicyhNYXRoLmFicyh1bCkgLSAxKSA8PSBFUFNMTikge1xuICAgICAgdnMgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdnMgPSAwLjUgKiB0aGlzLmFsICogTWF0aC5sb2coKDEgLSB1bCkgLyAoMSArIHVsKSkgLyB0aGlzLmJsO1xuICAgIH1cbiAgICBpZiAoTWF0aC5hYnMoTWF0aC5jb3ModGhpcy5ibCAqIChkbG9uKSkpIDw9IEVQU0xOKSB7XG4gICAgICB1cyA9IHRoaXMuYWwgKiB0aGlzLmJsICogKGRsb24pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHVzID0gdGhpcy5hbCAqIE1hdGguYXRhbjIoc2wgKiBNYXRoLmNvcyh0aGlzLmdhbW1hMCkgKyB2bCAqIE1hdGguc2luKHRoaXMuZ2FtbWEwKSwgTWF0aC5jb3ModGhpcy5ibCAqIGRsb24pKSAvIHRoaXMuYmw7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRoaXMubm9fcm90KSB7XG4gICAgcC54ID0gdGhpcy54MCArIHVzO1xuICAgIHAueSA9IHRoaXMueTAgKyB2cztcbiAgfVxuICBlbHNlIHtcblxuICAgIHVzIC09IHRoaXMudWM7XG4gICAgcC54ID0gdGhpcy54MCArIHZzICogTWF0aC5jb3ModGhpcy5hbHBoYSkgKyB1cyAqIE1hdGguc2luKHRoaXMuYWxwaGEpO1xuICAgIHAueSA9IHRoaXMueTAgKyB1cyAqIE1hdGguY29zKHRoaXMuYWxwaGEpIC0gdnMgKiBNYXRoLnNpbih0aGlzLmFscGhhKTtcbiAgfVxuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHVzLCB2cztcbiAgaWYgKHRoaXMubm9fcm90KSB7XG4gICAgdnMgPSBwLnkgLSB0aGlzLnkwO1xuICAgIHVzID0gcC54IC0gdGhpcy54MDtcbiAgfVxuICBlbHNlIHtcbiAgICB2cyA9IChwLnggLSB0aGlzLngwKSAqIE1hdGguY29zKHRoaXMuYWxwaGEpIC0gKHAueSAtIHRoaXMueTApICogTWF0aC5zaW4odGhpcy5hbHBoYSk7XG4gICAgdXMgPSAocC55IC0gdGhpcy55MCkgKiBNYXRoLmNvcyh0aGlzLmFscGhhKSArIChwLnggLSB0aGlzLngwKSAqIE1hdGguc2luKHRoaXMuYWxwaGEpO1xuICAgIHVzICs9IHRoaXMudWM7XG4gIH1cbiAgdmFyIHFwID0gTWF0aC5leHAoLTEgKiB0aGlzLmJsICogdnMgLyB0aGlzLmFsKTtcbiAgdmFyIHNwID0gMC41ICogKHFwIC0gMSAvIHFwKTtcbiAgdmFyIHRwID0gMC41ICogKHFwICsgMSAvIHFwKTtcbiAgdmFyIHZwID0gTWF0aC5zaW4odGhpcy5ibCAqIHVzIC8gdGhpcy5hbCk7XG4gIHZhciB1cCA9ICh2cCAqIE1hdGguY29zKHRoaXMuZ2FtbWEwKSArIHNwICogTWF0aC5zaW4odGhpcy5nYW1tYTApKSAvIHRwO1xuICB2YXIgdHMgPSBNYXRoLnBvdyh0aGlzLmVsIC8gTWF0aC5zcXJ0KCgxICsgdXApIC8gKDEgLSB1cCkpLCAxIC8gdGhpcy5ibCk7XG4gIGlmIChNYXRoLmFicyh1cCAtIDEpIDwgRVBTTE4pIHtcbiAgICBwLnggPSB0aGlzLmxvbmcwO1xuICAgIHAueSA9IEhBTEZfUEk7XG4gIH1cbiAgZWxzZSBpZiAoTWF0aC5hYnModXAgKyAxKSA8IEVQU0xOKSB7XG4gICAgcC54ID0gdGhpcy5sb25nMDtcbiAgICBwLnkgPSAtMSAqIEhBTEZfUEk7XG4gIH1cbiAgZWxzZSB7XG4gICAgcC55ID0gcGhpMnoodGhpcy5lLCB0cyk7XG4gICAgcC54ID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwIC0gTWF0aC5hdGFuMihzcCAqIE1hdGguY29zKHRoaXMuZ2FtbWEwKSAtIHZwICogTWF0aC5zaW4odGhpcy5nYW1tYTApLCBNYXRoLmNvcyh0aGlzLmJsICogdXMgLyB0aGlzLmFsKSkgLyB0aGlzLmJsKTtcbiAgfVxuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMubmFtZXMgPSBbXCJIb3RpbmVfT2JsaXF1ZV9NZXJjYXRvclwiLCBcIkhvdGluZSBPYmxpcXVlIE1lcmNhdG9yXCIsIFwiSG90aW5lX09ibGlxdWVfTWVyY2F0b3JfQXppbXV0aF9OYXR1cmFsX09yaWdpblwiLCBcIkhvdGluZV9PYmxpcXVlX01lcmNhdG9yX0F6aW11dGhfQ2VudGVyXCIsIFwib21lcmNcIl07IiwidmFyIGUwZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTBmbicpO1xudmFyIGUxZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTFmbicpO1xudmFyIGUyZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTJmbicpO1xudmFyIGUzZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTNmbicpO1xudmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIGFkanVzdF9sYXQgPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xhdCcpO1xudmFyIG1sZm4gPSByZXF1aXJlKCcuLi9jb21tb24vbWxmbicpO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBnTiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9nTicpO1xudmFyIE1BWF9JVEVSID0gMjA7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgLyogUGxhY2UgcGFyYW1ldGVycyBpbiBzdGF0aWMgc3RvcmFnZSBmb3IgY29tbW9uIHVzZVxuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIHRoaXMudGVtcCA9IHRoaXMuYiAvIHRoaXMuYTtcbiAgdGhpcy5lcyA9IDEgLSBNYXRoLnBvdyh0aGlzLnRlbXAsIDIpOyAvLyBkZXZhaXQgZXRyZSBkYW5zIHRtZXJjLmpzIG1haXMgbiB5IGVzdCBwYXMgZG9uYyBqZSBjb21tZW50ZSBzaW5vbiByZXRvdXIgZGUgdmFsZXVycyBudWxsZXNcbiAgdGhpcy5lID0gTWF0aC5zcXJ0KHRoaXMuZXMpO1xuICB0aGlzLmUwID0gZTBmbih0aGlzLmVzKTtcbiAgdGhpcy5lMSA9IGUxZm4odGhpcy5lcyk7XG4gIHRoaXMuZTIgPSBlMmZuKHRoaXMuZXMpO1xuICB0aGlzLmUzID0gZTNmbih0aGlzLmVzKTtcbiAgdGhpcy5tbDAgPSB0aGlzLmEgKiBtbGZuKHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMsIHRoaXMubGF0MCk7IC8vc2kgcXVlIGRlcyB6ZXJvcyBsZSBjYWxjdWwgbmUgc2UgZmFpdCBwYXNcbn07XG5cblxuLyogUG9seWNvbmljIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciB4LCB5LCBlbDtcbiAgdmFyIGRsb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICBlbCA9IGRsb24gKiBNYXRoLnNpbihsYXQpO1xuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBpZiAoTWF0aC5hYnMobGF0KSA8PSBFUFNMTikge1xuICAgICAgeCA9IHRoaXMuYSAqIGRsb247XG4gICAgICB5ID0gLTEgKiB0aGlzLmEgKiB0aGlzLmxhdDA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgeCA9IHRoaXMuYSAqIE1hdGguc2luKGVsKSAvIE1hdGgudGFuKGxhdCk7XG4gICAgICB5ID0gdGhpcy5hICogKGFkanVzdF9sYXQobGF0IC0gdGhpcy5sYXQwKSArICgxIC0gTWF0aC5jb3MoZWwpKSAvIE1hdGgudGFuKGxhdCkpO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBpZiAoTWF0aC5hYnMobGF0KSA8PSBFUFNMTikge1xuICAgICAgeCA9IHRoaXMuYSAqIGRsb247XG4gICAgICB5ID0gLTEgKiB0aGlzLm1sMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YXIgbmwgPSBnTih0aGlzLmEsIHRoaXMuZSwgTWF0aC5zaW4obGF0KSkgLyBNYXRoLnRhbihsYXQpO1xuICAgICAgeCA9IG5sICogTWF0aC5zaW4oZWwpO1xuICAgICAgeSA9IHRoaXMuYSAqIG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgbGF0KSAtIHRoaXMubWwwICsgbmwgKiAoMSAtIE1hdGguY29zKGVsKSk7XG4gICAgfVxuXG4gIH1cbiAgcC54ID0geCArIHRoaXMueDA7XG4gIHAueSA9IHkgKyB0aGlzLnkwO1xuICByZXR1cm4gcDtcbn07XG5cblxuLyogSW52ZXJzZSBlcXVhdGlvbnNcbiAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICB2YXIgbG9uLCBsYXQsIHgsIHksIGk7XG4gIHZhciBhbCwgYmw7XG4gIHZhciBwaGksIGRwaGk7XG4gIHggPSBwLnggLSB0aGlzLngwO1xuICB5ID0gcC55IC0gdGhpcy55MDtcblxuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBpZiAoTWF0aC5hYnMoeSArIHRoaXMuYSAqIHRoaXMubGF0MCkgPD0gRVBTTE4pIHtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24oeCAvIHRoaXMuYSArIHRoaXMubG9uZzApO1xuICAgICAgbGF0ID0gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBhbCA9IHRoaXMubGF0MCArIHkgLyB0aGlzLmE7XG4gICAgICBibCA9IHggKiB4IC8gdGhpcy5hIC8gdGhpcy5hICsgYWwgKiBhbDtcbiAgICAgIHBoaSA9IGFsO1xuICAgICAgdmFyIHRhbnBoaTtcbiAgICAgIGZvciAoaSA9IE1BWF9JVEVSOyBpOyAtLWkpIHtcbiAgICAgICAgdGFucGhpID0gTWF0aC50YW4ocGhpKTtcbiAgICAgICAgZHBoaSA9IC0xICogKGFsICogKHBoaSAqIHRhbnBoaSArIDEpIC0gcGhpIC0gMC41ICogKHBoaSAqIHBoaSArIGJsKSAqIHRhbnBoaSkgLyAoKHBoaSAtIGFsKSAvIHRhbnBoaSAtIDEpO1xuICAgICAgICBwaGkgKz0gZHBoaTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGRwaGkpIDw9IEVQU0xOKSB7XG4gICAgICAgICAgbGF0ID0gcGhpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyAoTWF0aC5hc2luKHggKiBNYXRoLnRhbihwaGkpIC8gdGhpcy5hKSkgLyBNYXRoLnNpbihsYXQpKTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKE1hdGguYWJzKHkgKyB0aGlzLm1sMCkgPD0gRVBTTE4pIHtcbiAgICAgIGxhdCA9IDA7XG4gICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyB4IC8gdGhpcy5hKTtcbiAgICB9XG4gICAgZWxzZSB7XG5cbiAgICAgIGFsID0gKHRoaXMubWwwICsgeSkgLyB0aGlzLmE7XG4gICAgICBibCA9IHggKiB4IC8gdGhpcy5hIC8gdGhpcy5hICsgYWwgKiBhbDtcbiAgICAgIHBoaSA9IGFsO1xuICAgICAgdmFyIGNsLCBtbG4sIG1sbnAsIG1hO1xuICAgICAgdmFyIGNvbjtcbiAgICAgIGZvciAoaSA9IE1BWF9JVEVSOyBpOyAtLWkpIHtcbiAgICAgICAgY29uID0gdGhpcy5lICogTWF0aC5zaW4ocGhpKTtcbiAgICAgICAgY2wgPSBNYXRoLnNxcnQoMSAtIGNvbiAqIGNvbikgKiBNYXRoLnRhbihwaGkpO1xuICAgICAgICBtbG4gPSB0aGlzLmEgKiBtbGZuKHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMsIHBoaSk7XG4gICAgICAgIG1sbnAgPSB0aGlzLmUwIC0gMiAqIHRoaXMuZTEgKiBNYXRoLmNvcygyICogcGhpKSArIDQgKiB0aGlzLmUyICogTWF0aC5jb3MoNCAqIHBoaSkgLSA2ICogdGhpcy5lMyAqIE1hdGguY29zKDYgKiBwaGkpO1xuICAgICAgICBtYSA9IG1sbiAvIHRoaXMuYTtcbiAgICAgICAgZHBoaSA9IChhbCAqIChjbCAqIG1hICsgMSkgLSBtYSAtIDAuNSAqIGNsICogKG1hICogbWEgKyBibCkpIC8gKHRoaXMuZXMgKiBNYXRoLnNpbigyICogcGhpKSAqIChtYSAqIG1hICsgYmwgLSAyICogYWwgKiBtYSkgLyAoNCAqIGNsKSArIChhbCAtIG1hKSAqIChjbCAqIG1sbnAgLSAyIC8gTWF0aC5zaW4oMiAqIHBoaSkpIC0gbWxucCk7XG4gICAgICAgIHBoaSAtPSBkcGhpO1xuICAgICAgICBpZiAoTWF0aC5hYnMoZHBoaSkgPD0gRVBTTE4pIHtcbiAgICAgICAgICBsYXQgPSBwaGk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy9sYXQ9cGhpNHoodGhpcy5lLHRoaXMuZTAsdGhpcy5lMSx0aGlzLmUyLHRoaXMuZTMsYWwsYmwsMCwwKTtcbiAgICAgIGNsID0gTWF0aC5zcXJ0KDEgLSB0aGlzLmVzICogTWF0aC5wb3coTWF0aC5zaW4obGF0KSwgMikpICogTWF0aC50YW4obGF0KTtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXNpbih4ICogY2wgLyB0aGlzLmEpIC8gTWF0aC5zaW4obGF0KSk7XG4gICAgfVxuICB9XG5cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJQb2x5Y29uaWNcIiwgXCJwb2x5XCJdOyIsInZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBhZGp1c3RfbGF0ID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sYXQnKTtcbnZhciBwal9lbmZuID0gcmVxdWlyZSgnLi4vY29tbW9uL3BqX2VuZm4nKTtcbnZhciBNQVhfSVRFUiA9IDIwO1xudmFyIHBqX21sZm4gPSByZXF1aXJlKCcuLi9jb21tb24vcGpfbWxmbicpO1xudmFyIHBqX2ludl9tbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL3BqX2ludl9tbGZuJyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG52YXIgYXNpbnogPSByZXF1aXJlKCcuLi9jb21tb24vYXNpbnonKTtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAvKiBQbGFjZSBwYXJhbWV0ZXJzIGluIHN0YXRpYyBzdG9yYWdlIGZvciBjb21tb24gdXNlXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblxuICBpZiAoIXRoaXMuc3BoZXJlKSB7XG4gICAgdGhpcy5lbiA9IHBqX2VuZm4odGhpcy5lcyk7XG4gIH1cbiAgZWxzZSB7XG4gICAgdGhpcy5uID0gMTtcbiAgICB0aGlzLm0gPSAwO1xuICAgIHRoaXMuZXMgPSAwO1xuICAgIHRoaXMuQ195ID0gTWF0aC5zcXJ0KCh0aGlzLm0gKyAxKSAvIHRoaXMubik7XG4gICAgdGhpcy5DX3ggPSB0aGlzLkNfeSAvICh0aGlzLm0gKyAxKTtcbiAgfVxuXG59O1xuXG4vKiBTaW51c29pZGFsIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciB4LCB5O1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICAvKiBGb3J3YXJkIGVxdWF0aW9uc1xuICAgIC0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcblxuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBpZiAoIXRoaXMubSkge1xuICAgICAgbGF0ID0gdGhpcy5uICE9PSAxID8gTWF0aC5hc2luKHRoaXMubiAqIE1hdGguc2luKGxhdCkpIDogbGF0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHZhciBrID0gdGhpcy5uICogTWF0aC5zaW4obGF0KTtcbiAgICAgIGZvciAodmFyIGkgPSBNQVhfSVRFUjsgaTsgLS1pKSB7XG4gICAgICAgIHZhciBWID0gKHRoaXMubSAqIGxhdCArIE1hdGguc2luKGxhdCkgLSBrKSAvICh0aGlzLm0gKyBNYXRoLmNvcyhsYXQpKTtcbiAgICAgICAgbGF0IC09IFY7XG4gICAgICAgIGlmIChNYXRoLmFicyhWKSA8IEVQU0xOKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgeCA9IHRoaXMuYSAqIHRoaXMuQ194ICogbG9uICogKHRoaXMubSArIE1hdGguY29zKGxhdCkpO1xuICAgIHkgPSB0aGlzLmEgKiB0aGlzLkNfeSAqIGxhdDtcblxuICB9XG4gIGVsc2Uge1xuXG4gICAgdmFyIHMgPSBNYXRoLnNpbihsYXQpO1xuICAgIHZhciBjID0gTWF0aC5jb3MobGF0KTtcbiAgICB5ID0gdGhpcy5hICogcGpfbWxmbihsYXQsIHMsIGMsIHRoaXMuZW4pO1xuICAgIHggPSB0aGlzLmEgKiBsb24gKiBjIC8gTWF0aC5zcXJ0KDEgLSB0aGlzLmVzICogcyAqIHMpO1xuICB9XG5cbiAgcC54ID0geDtcbiAgcC55ID0geTtcbiAgcmV0dXJuIHA7XG59O1xuXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsYXQsIHRlbXAsIGxvbiwgcztcblxuICBwLnggLT0gdGhpcy54MDtcbiAgbG9uID0gcC54IC8gdGhpcy5hO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgbGF0ID0gcC55IC8gdGhpcy5hO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGxhdCAvPSB0aGlzLkNfeTtcbiAgICBsb24gPSBsb24gLyAodGhpcy5DX3ggKiAodGhpcy5tICsgTWF0aC5jb3MobGF0KSkpO1xuICAgIGlmICh0aGlzLm0pIHtcbiAgICAgIGxhdCA9IGFzaW56KCh0aGlzLm0gKiBsYXQgKyBNYXRoLnNpbihsYXQpKSAvIHRoaXMubik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMubiAhPT0gMSkge1xuICAgICAgbGF0ID0gYXNpbnooTWF0aC5zaW4obGF0KSAvIHRoaXMubik7XG4gICAgfVxuICAgIGxvbiA9IGFkanVzdF9sb24obG9uICsgdGhpcy5sb25nMCk7XG4gICAgbGF0ID0gYWRqdXN0X2xhdChsYXQpO1xuICB9XG4gIGVsc2Uge1xuICAgIGxhdCA9IHBqX2ludl9tbGZuKHAueSAvIHRoaXMuYSwgdGhpcy5lcywgdGhpcy5lbik7XG4gICAgcyA9IE1hdGguYWJzKGxhdCk7XG4gICAgaWYgKHMgPCBIQUxGX1BJKSB7XG4gICAgICBzID0gTWF0aC5zaW4obGF0KTtcbiAgICAgIHRlbXAgPSB0aGlzLmxvbmcwICsgcC54ICogTWF0aC5zcXJ0KDEgLSB0aGlzLmVzICogcyAqIHMpIC8gKHRoaXMuYSAqIE1hdGguY29zKGxhdCkpO1xuICAgICAgLy90ZW1wID0gdGhpcy5sb25nMCArIHAueCAvICh0aGlzLmEgKiBNYXRoLmNvcyhsYXQpKTtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGVtcCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChzIC0gRVBTTE4pIDwgSEFMRl9QSSkge1xuICAgICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICB9XG4gIH1cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJTaW51c29pZGFsXCIsIFwic2ludVwiXTsiLCIvKlxuICByZWZlcmVuY2VzOlxuICAgIEZvcm11bGVzIGV0IGNvbnN0YW50ZXMgcG91ciBsZSBDYWxjdWwgcG91ciBsYVxuICAgIHByb2plY3Rpb24gY3lsaW5kcmlxdWUgY29uZm9ybWUgw6AgYXhlIG9ibGlxdWUgZXQgcG91ciBsYSB0cmFuc2Zvcm1hdGlvbiBlbnRyZVxuICAgIGRlcyBzeXN0w6htZXMgZGUgcsOpZsOpcmVuY2UuXG4gICAgaHR0cDovL3d3dy5zd2lzc3RvcG8uYWRtaW4uY2gvaW50ZXJuZXQvc3dpc3N0b3BvL2ZyL2hvbWUvdG9waWNzL3N1cnZleS9zeXMvcmVmc3lzL3N3aXR6ZXJsYW5kLnBhcnN5c3JlbGF0ZWQxLjMxMjE2LmRvd25sb2FkTGlzdC43NzAwNC5Eb3dubG9hZEZpbGUudG1wL3N3aXNzcHJvamVjdGlvbmZyLnBkZlxuICAqL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBwaHkwID0gdGhpcy5sYXQwO1xuICB0aGlzLmxhbWJkYTAgPSB0aGlzLmxvbmcwO1xuICB2YXIgc2luUGh5MCA9IE1hdGguc2luKHBoeTApO1xuICB2YXIgc2VtaU1ham9yQXhpcyA9IHRoaXMuYTtcbiAgdmFyIGludkYgPSB0aGlzLnJmO1xuICB2YXIgZmxhdHRlbmluZyA9IDEgLyBpbnZGO1xuICB2YXIgZTIgPSAyICogZmxhdHRlbmluZyAtIE1hdGgucG93KGZsYXR0ZW5pbmcsIDIpO1xuICB2YXIgZSA9IHRoaXMuZSA9IE1hdGguc3FydChlMik7XG4gIHRoaXMuUiA9IHRoaXMuazAgKiBzZW1pTWFqb3JBeGlzICogTWF0aC5zcXJ0KDEgLSBlMikgLyAoMSAtIGUyICogTWF0aC5wb3coc2luUGh5MCwgMikpO1xuICB0aGlzLmFscGhhID0gTWF0aC5zcXJ0KDEgKyBlMiAvICgxIC0gZTIpICogTWF0aC5wb3coTWF0aC5jb3MocGh5MCksIDQpKTtcbiAgdGhpcy5iMCA9IE1hdGguYXNpbihzaW5QaHkwIC8gdGhpcy5hbHBoYSk7XG4gIHZhciBrMSA9IE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyA0ICsgdGhpcy5iMCAvIDIpKTtcbiAgdmFyIGsyID0gTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAvIDQgKyBwaHkwIC8gMikpO1xuICB2YXIgazMgPSBNYXRoLmxvZygoMSArIGUgKiBzaW5QaHkwKSAvICgxIC0gZSAqIHNpblBoeTApKTtcbiAgdGhpcy5LID0gazEgLSB0aGlzLmFscGhhICogazIgKyB0aGlzLmFscGhhICogZSAvIDIgKiBrMztcbn07XG5cblxuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuICB2YXIgU2ExID0gTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAvIDQgLSBwLnkgLyAyKSk7XG4gIHZhciBTYTIgPSB0aGlzLmUgLyAyICogTWF0aC5sb2coKDEgKyB0aGlzLmUgKiBNYXRoLnNpbihwLnkpKSAvICgxIC0gdGhpcy5lICogTWF0aC5zaW4ocC55KSkpO1xuICB2YXIgUyA9IC10aGlzLmFscGhhICogKFNhMSArIFNhMikgKyB0aGlzLks7XG5cbiAgLy8gc3BoZXJpYyBsYXRpdHVkZVxuICB2YXIgYiA9IDIgKiAoTWF0aC5hdGFuKE1hdGguZXhwKFMpKSAtIE1hdGguUEkgLyA0KTtcblxuICAvLyBzcGhlcmljIGxvbmdpdHVkZVxuICB2YXIgSSA9IHRoaXMuYWxwaGEgKiAocC54IC0gdGhpcy5sYW1iZGEwKTtcblxuICAvLyBwc29ldWRvIGVxdWF0b3JpYWwgcm90YXRpb25cbiAgdmFyIHJvdEkgPSBNYXRoLmF0YW4oTWF0aC5zaW4oSSkgLyAoTWF0aC5zaW4odGhpcy5iMCkgKiBNYXRoLnRhbihiKSArIE1hdGguY29zKHRoaXMuYjApICogTWF0aC5jb3MoSSkpKTtcblxuICB2YXIgcm90QiA9IE1hdGguYXNpbihNYXRoLmNvcyh0aGlzLmIwKSAqIE1hdGguc2luKGIpIC0gTWF0aC5zaW4odGhpcy5iMCkgKiBNYXRoLmNvcyhiKSAqIE1hdGguY29zKEkpKTtcblxuICBwLnkgPSB0aGlzLlIgLyAyICogTWF0aC5sb2coKDEgKyBNYXRoLnNpbihyb3RCKSkgLyAoMSAtIE1hdGguc2luKHJvdEIpKSkgKyB0aGlzLnkwO1xuICBwLnggPSB0aGlzLlIgKiByb3RJICsgdGhpcy54MDtcbiAgcmV0dXJuIHA7XG59O1xuXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBZID0gcC54IC0gdGhpcy54MDtcbiAgdmFyIFggPSBwLnkgLSB0aGlzLnkwO1xuXG4gIHZhciByb3RJID0gWSAvIHRoaXMuUjtcbiAgdmFyIHJvdEIgPSAyICogKE1hdGguYXRhbihNYXRoLmV4cChYIC8gdGhpcy5SKSkgLSBNYXRoLlBJIC8gNCk7XG5cbiAgdmFyIGIgPSBNYXRoLmFzaW4oTWF0aC5jb3ModGhpcy5iMCkgKiBNYXRoLnNpbihyb3RCKSArIE1hdGguc2luKHRoaXMuYjApICogTWF0aC5jb3Mocm90QikgKiBNYXRoLmNvcyhyb3RJKSk7XG4gIHZhciBJID0gTWF0aC5hdGFuKE1hdGguc2luKHJvdEkpIC8gKE1hdGguY29zKHRoaXMuYjApICogTWF0aC5jb3Mocm90SSkgLSBNYXRoLnNpbih0aGlzLmIwKSAqIE1hdGgudGFuKHJvdEIpKSk7XG5cbiAgdmFyIGxhbWJkYSA9IHRoaXMubGFtYmRhMCArIEkgLyB0aGlzLmFscGhhO1xuXG4gIHZhciBTID0gMDtcbiAgdmFyIHBoeSA9IGI7XG4gIHZhciBwcmV2UGh5ID0gLTEwMDA7XG4gIHZhciBpdGVyYXRpb24gPSAwO1xuICB3aGlsZSAoTWF0aC5hYnMocGh5IC0gcHJldlBoeSkgPiAwLjAwMDAwMDEpIHtcbiAgICBpZiAoKytpdGVyYXRpb24gPiAyMCkge1xuICAgICAgLy8uLi5yZXBvcnRFcnJvcihcIm9tZXJjRndkSW5maW5pdHlcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vUyA9IE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyA0ICsgcGh5IC8gMikpO1xuICAgIFMgPSAxIC8gdGhpcy5hbHBoYSAqIChNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJIC8gNCArIGIgLyAyKSkgLSB0aGlzLkspICsgdGhpcy5lICogTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAvIDQgKyBNYXRoLmFzaW4odGhpcy5lICogTWF0aC5zaW4ocGh5KSkgLyAyKSk7XG4gICAgcHJldlBoeSA9IHBoeTtcbiAgICBwaHkgPSAyICogTWF0aC5hdGFuKE1hdGguZXhwKFMpKSAtIE1hdGguUEkgLyAyO1xuICB9XG5cbiAgcC54ID0gbGFtYmRhO1xuICBwLnkgPSBwaHk7XG4gIHJldHVybiBwO1xufTtcblxuZXhwb3J0cy5uYW1lcyA9IFtcInNvbWVyY1wiXTtcbiIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBzaWduID0gcmVxdWlyZSgnLi4vY29tbW9uL3NpZ24nKTtcbnZhciBtc2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tc2ZueicpO1xudmFyIHRzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3RzZm56Jyk7XG52YXIgcGhpMnogPSByZXF1aXJlKCcuLi9jb21tb24vcGhpMnonKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbmV4cG9ydHMuc3Nmbl8gPSBmdW5jdGlvbihwaGl0LCBzaW5waGksIGVjY2VuKSB7XG4gIHNpbnBoaSAqPSBlY2NlbjtcbiAgcmV0dXJuIChNYXRoLnRhbigwLjUgKiAoSEFMRl9QSSArIHBoaXQpKSAqIE1hdGgucG93KCgxIC0gc2lucGhpKSAvICgxICsgc2lucGhpKSwgMC41ICogZWNjZW4pKTtcbn07XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmNvc2xhdDAgPSBNYXRoLmNvcyh0aGlzLmxhdDApO1xuICB0aGlzLnNpbmxhdDAgPSBNYXRoLnNpbih0aGlzLmxhdDApO1xuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBpZiAodGhpcy5rMCA9PT0gMSAmJiAhaXNOYU4odGhpcy5sYXRfdHMpICYmIE1hdGguYWJzKHRoaXMuY29zbGF0MCkgPD0gRVBTTE4pIHtcbiAgICAgIHRoaXMuazAgPSAwLjUgKiAoMSArIHNpZ24odGhpcy5sYXQwKSAqIE1hdGguc2luKHRoaXMubGF0X3RzKSk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLmNvc2xhdDApIDw9IEVQU0xOKSB7XG4gICAgICBpZiAodGhpcy5sYXQwID4gMCkge1xuICAgICAgICAvL05vcnRoIHBvbGVcbiAgICAgICAgLy90cmFjZSgnc3RlcmU6bm9ydGggcG9sZScpO1xuICAgICAgICB0aGlzLmNvbiA9IDE7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLy9Tb3V0aCBwb2xlXG4gICAgICAgIC8vdHJhY2UoJ3N0ZXJlOnNvdXRoIHBvbGUnKTtcbiAgICAgICAgdGhpcy5jb24gPSAtMTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jb25zID0gTWF0aC5zcXJ0KE1hdGgucG93KDEgKyB0aGlzLmUsIDEgKyB0aGlzLmUpICogTWF0aC5wb3coMSAtIHRoaXMuZSwgMSAtIHRoaXMuZSkpO1xuICAgIGlmICh0aGlzLmswID09PSAxICYmICFpc05hTih0aGlzLmxhdF90cykgJiYgTWF0aC5hYnModGhpcy5jb3NsYXQwKSA8PSBFUFNMTikge1xuICAgICAgdGhpcy5rMCA9IDAuNSAqIHRoaXMuY29ucyAqIG1zZm56KHRoaXMuZSwgTWF0aC5zaW4odGhpcy5sYXRfdHMpLCBNYXRoLmNvcyh0aGlzLmxhdF90cykpIC8gdHNmbnoodGhpcy5lLCB0aGlzLmNvbiAqIHRoaXMubGF0X3RzLCB0aGlzLmNvbiAqIE1hdGguc2luKHRoaXMubGF0X3RzKSk7XG4gICAgfVxuICAgIHRoaXMubXMxID0gbXNmbnoodGhpcy5lLCB0aGlzLnNpbmxhdDAsIHRoaXMuY29zbGF0MCk7XG4gICAgdGhpcy5YMCA9IDIgKiBNYXRoLmF0YW4odGhpcy5zc2ZuXyh0aGlzLmxhdDAsIHRoaXMuc2lubGF0MCwgdGhpcy5lKSkgLSBIQUxGX1BJO1xuICAgIHRoaXMuY29zWDAgPSBNYXRoLmNvcyh0aGlzLlgwKTtcbiAgICB0aGlzLnNpblgwID0gTWF0aC5zaW4odGhpcy5YMCk7XG4gIH1cbn07XG5cbi8vIFN0ZXJlb2dyYXBoaWMgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciBzaW5sYXQgPSBNYXRoLnNpbihsYXQpO1xuICB2YXIgY29zbGF0ID0gTWF0aC5jb3MobGF0KTtcbiAgdmFyIEEsIFgsIHNpblgsIGNvc1gsIHRzLCByaDtcbiAgdmFyIGRsb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuXG4gIGlmIChNYXRoLmFicyhNYXRoLmFicyhsb24gLSB0aGlzLmxvbmcwKSAtIE1hdGguUEkpIDw9IEVQU0xOICYmIE1hdGguYWJzKGxhdCArIHRoaXMubGF0MCkgPD0gRVBTTE4pIHtcbiAgICAvL2Nhc2Ugb2YgdGhlIG9yaWdpbmUgcG9pbnRcbiAgICAvL3RyYWNlKCdzdGVyZTp0aGlzIGlzIHRoZSBvcmlnaW4gcG9pbnQnKTtcbiAgICBwLnggPSBOYU47XG4gICAgcC55ID0gTmFOO1xuICAgIHJldHVybiBwO1xuICB9XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIC8vdHJhY2UoJ3N0ZXJlOnNwaGVyZSBjYXNlJyk7XG4gICAgQSA9IDIgKiB0aGlzLmswIC8gKDEgKyB0aGlzLnNpbmxhdDAgKiBzaW5sYXQgKyB0aGlzLmNvc2xhdDAgKiBjb3NsYXQgKiBNYXRoLmNvcyhkbG9uKSk7XG4gICAgcC54ID0gdGhpcy5hICogQSAqIGNvc2xhdCAqIE1hdGguc2luKGRsb24pICsgdGhpcy54MDtcbiAgICBwLnkgPSB0aGlzLmEgKiBBICogKHRoaXMuY29zbGF0MCAqIHNpbmxhdCAtIHRoaXMuc2lubGF0MCAqIGNvc2xhdCAqIE1hdGguY29zKGRsb24pKSArIHRoaXMueTA7XG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgZWxzZSB7XG4gICAgWCA9IDIgKiBNYXRoLmF0YW4odGhpcy5zc2ZuXyhsYXQsIHNpbmxhdCwgdGhpcy5lKSkgLSBIQUxGX1BJO1xuICAgIGNvc1ggPSBNYXRoLmNvcyhYKTtcbiAgICBzaW5YID0gTWF0aC5zaW4oWCk7XG4gICAgaWYgKE1hdGguYWJzKHRoaXMuY29zbGF0MCkgPD0gRVBTTE4pIHtcbiAgICAgIHRzID0gdHNmbnoodGhpcy5lLCBsYXQgKiB0aGlzLmNvbiwgdGhpcy5jb24gKiBzaW5sYXQpO1xuICAgICAgcmggPSAyICogdGhpcy5hICogdGhpcy5rMCAqIHRzIC8gdGhpcy5jb25zO1xuICAgICAgcC54ID0gdGhpcy54MCArIHJoICogTWF0aC5zaW4obG9uIC0gdGhpcy5sb25nMCk7XG4gICAgICBwLnkgPSB0aGlzLnkwIC0gdGhpcy5jb24gKiByaCAqIE1hdGguY29zKGxvbiAtIHRoaXMubG9uZzApO1xuICAgICAgLy90cmFjZShwLnRvU3RyaW5nKCkpO1xuICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICAgIGVsc2UgaWYgKE1hdGguYWJzKHRoaXMuc2lubGF0MCkgPCBFUFNMTikge1xuICAgICAgLy9FcVxuICAgICAgLy90cmFjZSgnc3RlcmU6ZXF1YXRldXInKTtcbiAgICAgIEEgPSAyICogdGhpcy5hICogdGhpcy5rMCAvICgxICsgY29zWCAqIE1hdGguY29zKGRsb24pKTtcbiAgICAgIHAueSA9IEEgKiBzaW5YO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vb3RoZXIgY2FzZVxuICAgICAgLy90cmFjZSgnc3RlcmU6bm9ybWFsIGNhc2UnKTtcbiAgICAgIEEgPSAyICogdGhpcy5hICogdGhpcy5rMCAqIHRoaXMubXMxIC8gKHRoaXMuY29zWDAgKiAoMSArIHRoaXMuc2luWDAgKiBzaW5YICsgdGhpcy5jb3NYMCAqIGNvc1ggKiBNYXRoLmNvcyhkbG9uKSkpO1xuICAgICAgcC55ID0gQSAqICh0aGlzLmNvc1gwICogc2luWCAtIHRoaXMuc2luWDAgKiBjb3NYICogTWF0aC5jb3MoZGxvbikpICsgdGhpcy55MDtcbiAgICB9XG4gICAgcC54ID0gQSAqIGNvc1ggKiBNYXRoLnNpbihkbG9uKSArIHRoaXMueDA7XG4gIH1cbiAgLy90cmFjZShwLnRvU3RyaW5nKCkpO1xuICByZXR1cm4gcDtcbn07XG5cblxuLy8qIFN0ZXJlb2dyYXBoaWMgaW52ZXJzZSBlcXVhdGlvbnMtLW1hcHBpbmcgeCx5IHRvIGxhdC9sb25nXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgdmFyIGxvbiwgbGF0LCB0cywgY2UsIENoaTtcbiAgdmFyIHJoID0gTWF0aC5zcXJ0KHAueCAqIHAueCArIHAueSAqIHAueSk7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHZhciBjID0gMiAqIE1hdGguYXRhbihyaCAvICgwLjUgKiB0aGlzLmEgKiB0aGlzLmswKSk7XG4gICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICBsYXQgPSB0aGlzLmxhdDA7XG4gICAgaWYgKHJoIDw9IEVQU0xOKSB7XG4gICAgICBwLnggPSBsb247XG4gICAgICBwLnkgPSBsYXQ7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgbGF0ID0gTWF0aC5hc2luKE1hdGguY29zKGMpICogdGhpcy5zaW5sYXQwICsgcC55ICogTWF0aC5zaW4oYykgKiB0aGlzLmNvc2xhdDAgLyByaCk7XG4gICAgaWYgKE1hdGguYWJzKHRoaXMuY29zbGF0MCkgPCBFUFNMTikge1xuICAgICAgaWYgKHRoaXMubGF0MCA+IDApIHtcbiAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLngsIC0gMSAqIHAueSkpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXRhbjIocC54LCBwLnkpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBNYXRoLmF0YW4yKHAueCAqIE1hdGguc2luKGMpLCByaCAqIHRoaXMuY29zbGF0MCAqIE1hdGguY29zKGMpIC0gcC55ICogdGhpcy5zaW5sYXQwICogTWF0aC5zaW4oYykpKTtcbiAgICB9XG4gICAgcC54ID0gbG9uO1xuICAgIHAueSA9IGxhdDtcbiAgICByZXR1cm4gcDtcbiAgfVxuICBlbHNlIHtcbiAgICBpZiAoTWF0aC5hYnModGhpcy5jb3NsYXQwKSA8PSBFUFNMTikge1xuICAgICAgaWYgKHJoIDw9IEVQU0xOKSB7XG4gICAgICAgIGxhdCA9IHRoaXMubGF0MDtcbiAgICAgICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICAgICAgcC54ID0gbG9uO1xuICAgICAgICBwLnkgPSBsYXQ7XG4gICAgICAgIC8vdHJhY2UocC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuIHA7XG4gICAgICB9XG4gICAgICBwLnggKj0gdGhpcy5jb247XG4gICAgICBwLnkgKj0gdGhpcy5jb247XG4gICAgICB0cyA9IHJoICogdGhpcy5jb25zIC8gKDIgKiB0aGlzLmEgKiB0aGlzLmswKTtcbiAgICAgIGxhdCA9IHRoaXMuY29uICogcGhpMnoodGhpcy5lLCB0cyk7XG4gICAgICBsb24gPSB0aGlzLmNvbiAqIGFkanVzdF9sb24odGhpcy5jb24gKiB0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLngsIC0gMSAqIHAueSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNlID0gMiAqIE1hdGguYXRhbihyaCAqIHRoaXMuY29zWDAgLyAoMiAqIHRoaXMuYSAqIHRoaXMuazAgKiB0aGlzLm1zMSkpO1xuICAgICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICAgIGlmIChyaCA8PSBFUFNMTikge1xuICAgICAgICBDaGkgPSB0aGlzLlgwO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIENoaSA9IE1hdGguYXNpbihNYXRoLmNvcyhjZSkgKiB0aGlzLnNpblgwICsgcC55ICogTWF0aC5zaW4oY2UpICogdGhpcy5jb3NYMCAvIHJoKTtcbiAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLnggKiBNYXRoLnNpbihjZSksIHJoICogdGhpcy5jb3NYMCAqIE1hdGguY29zKGNlKSAtIHAueSAqIHRoaXMuc2luWDAgKiBNYXRoLnNpbihjZSkpKTtcbiAgICAgIH1cbiAgICAgIGxhdCA9IC0xICogcGhpMnoodGhpcy5lLCBNYXRoLnRhbigwLjUgKiAoSEFMRl9QSSArIENoaSkpKTtcbiAgICB9XG4gIH1cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG5cbiAgLy90cmFjZShwLnRvU3RyaW5nKCkpO1xuICByZXR1cm4gcDtcblxufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJzdGVyZVwiLCBcIlN0ZXJlb2dyYXBoaWNfU291dGhfUG9sZVwiLCBcIlBvbGFyIFN0ZXJlb2dyYXBoaWMgKHZhcmlhbnQgQilcIl07XG4iLCJ2YXIgZ2F1c3MgPSByZXF1aXJlKCcuL2dhdXNzJyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgZ2F1c3MuaW5pdC5hcHBseSh0aGlzKTtcbiAgaWYgKCF0aGlzLnJjKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMuc2luYzAgPSBNYXRoLnNpbih0aGlzLnBoaWMwKTtcbiAgdGhpcy5jb3NjMCA9IE1hdGguY29zKHRoaXMucGhpYzApO1xuICB0aGlzLlIyID0gMiAqIHRoaXMucmM7XG4gIGlmICghdGhpcy50aXRsZSkge1xuICAgIHRoaXMudGl0bGUgPSBcIk9ibGlxdWUgU3RlcmVvZ3JhcGhpYyBBbHRlcm5hdGl2ZVwiO1xuICB9XG59O1xuXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBzaW5jLCBjb3NjLCBjb3NsLCBrO1xuICBwLnggPSBhZGp1c3RfbG9uKHAueCAtIHRoaXMubG9uZzApO1xuICBnYXVzcy5mb3J3YXJkLmFwcGx5KHRoaXMsIFtwXSk7XG4gIHNpbmMgPSBNYXRoLnNpbihwLnkpO1xuICBjb3NjID0gTWF0aC5jb3MocC55KTtcbiAgY29zbCA9IE1hdGguY29zKHAueCk7XG4gIGsgPSB0aGlzLmswICogdGhpcy5SMiAvICgxICsgdGhpcy5zaW5jMCAqIHNpbmMgKyB0aGlzLmNvc2MwICogY29zYyAqIGNvc2wpO1xuICBwLnggPSBrICogY29zYyAqIE1hdGguc2luKHAueCk7XG4gIHAueSA9IGsgKiAodGhpcy5jb3NjMCAqIHNpbmMgLSB0aGlzLnNpbmMwICogY29zYyAqIGNvc2wpO1xuICBwLnggPSB0aGlzLmEgKiBwLnggKyB0aGlzLngwO1xuICBwLnkgPSB0aGlzLmEgKiBwLnkgKyB0aGlzLnkwO1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHNpbmMsIGNvc2MsIGxvbiwgbGF0LCByaG87XG4gIHAueCA9IChwLnggLSB0aGlzLngwKSAvIHRoaXMuYTtcbiAgcC55ID0gKHAueSAtIHRoaXMueTApIC8gdGhpcy5hO1xuXG4gIHAueCAvPSB0aGlzLmswO1xuICBwLnkgLz0gdGhpcy5rMDtcbiAgaWYgKChyaG8gPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KSkpIHtcbiAgICB2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKHJobywgdGhpcy5SMik7XG4gICAgc2luYyA9IE1hdGguc2luKGMpO1xuICAgIGNvc2MgPSBNYXRoLmNvcyhjKTtcbiAgICBsYXQgPSBNYXRoLmFzaW4oY29zYyAqIHRoaXMuc2luYzAgKyBwLnkgKiBzaW5jICogdGhpcy5jb3NjMCAvIHJobyk7XG4gICAgbG9uID0gTWF0aC5hdGFuMihwLnggKiBzaW5jLCByaG8gKiB0aGlzLmNvc2MwICogY29zYyAtIHAueSAqIHRoaXMuc2luYzAgKiBzaW5jKTtcbiAgfVxuICBlbHNlIHtcbiAgICBsYXQgPSB0aGlzLnBoaWMwO1xuICAgIGxvbiA9IDA7XG4gIH1cblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgZ2F1c3MuaW52ZXJzZS5hcHBseSh0aGlzLCBbcF0pO1xuICBwLnggPSBhZGp1c3RfbG9uKHAueCArIHRoaXMubG9uZzApO1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMubmFtZXMgPSBbXCJTdGVyZW9ncmFwaGljX05vcnRoX1BvbGVcIiwgXCJPYmxpcXVlX1N0ZXJlb2dyYXBoaWNcIiwgXCJQb2xhcl9TdGVyZW9ncmFwaGljXCIsIFwic3RlcmVhXCIsXCJPYmxpcXVlIFN0ZXJlb2dyYXBoaWMgQWx0ZXJuYXRpdmVcIl07XG4iLCJ2YXIgZTBmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMGZuJyk7XG52YXIgZTFmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMWZuJyk7XG52YXIgZTJmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMmZuJyk7XG52YXIgZTNmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lM2ZuJyk7XG52YXIgbWxmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tbGZuJyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG52YXIgc2lnbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9zaWduJyk7XG52YXIgYXNpbnogPSByZXF1aXJlKCcuLi9jb21tb24vYXNpbnonKTtcblxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuZTAgPSBlMGZuKHRoaXMuZXMpO1xuICB0aGlzLmUxID0gZTFmbih0aGlzLmVzKTtcbiAgdGhpcy5lMiA9IGUyZm4odGhpcy5lcyk7XG4gIHRoaXMuZTMgPSBlM2ZuKHRoaXMuZXMpO1xuICB0aGlzLm1sMCA9IHRoaXMuYSAqIG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgdGhpcy5sYXQwKTtcbn07XG5cbi8qKlxuICAgIFRyYW5zdmVyc2UgTWVyY2F0b3IgRm9yd2FyZCAgLSBsb25nL2xhdCB0byB4L3lcbiAgICBsb25nL2xhdCBpbiByYWRpYW5zXG4gICovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG5cbiAgdmFyIGRlbHRhX2xvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciBjb247XG4gIHZhciB4LCB5O1xuICB2YXIgc2luX3BoaSA9IE1hdGguc2luKGxhdCk7XG4gIHZhciBjb3NfcGhpID0gTWF0aC5jb3MobGF0KTtcblxuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICB2YXIgYiA9IGNvc19waGkgKiBNYXRoLnNpbihkZWx0YV9sb24pO1xuICAgIGlmICgoTWF0aC5hYnMoTWF0aC5hYnMoYikgLSAxKSkgPCAwLjAwMDAwMDAwMDEpIHtcbiAgICAgIHJldHVybiAoOTMpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHggPSAwLjUgKiB0aGlzLmEgKiB0aGlzLmswICogTWF0aC5sb2coKDEgKyBiKSAvICgxIC0gYikpO1xuICAgICAgY29uID0gTWF0aC5hY29zKGNvc19waGkgKiBNYXRoLmNvcyhkZWx0YV9sb24pIC8gTWF0aC5zcXJ0KDEgLSBiICogYikpO1xuICAgICAgaWYgKGxhdCA8IDApIHtcbiAgICAgICAgY29uID0gLWNvbjtcbiAgICAgIH1cbiAgICAgIHkgPSB0aGlzLmEgKiB0aGlzLmswICogKGNvbiAtIHRoaXMubGF0MCk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHZhciBhbCA9IGNvc19waGkgKiBkZWx0YV9sb247XG4gICAgdmFyIGFscyA9IE1hdGgucG93KGFsLCAyKTtcbiAgICB2YXIgYyA9IHRoaXMuZXAyICogTWF0aC5wb3coY29zX3BoaSwgMik7XG4gICAgdmFyIHRxID0gTWF0aC50YW4obGF0KTtcbiAgICB2YXIgdCA9IE1hdGgucG93KHRxLCAyKTtcbiAgICBjb24gPSAxIC0gdGhpcy5lcyAqIE1hdGgucG93KHNpbl9waGksIDIpO1xuICAgIHZhciBuID0gdGhpcy5hIC8gTWF0aC5zcXJ0KGNvbik7XG4gICAgdmFyIG1sID0gdGhpcy5hICogbWxmbih0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzLCBsYXQpO1xuXG4gICAgeCA9IHRoaXMuazAgKiBuICogYWwgKiAoMSArIGFscyAvIDYgKiAoMSAtIHQgKyBjICsgYWxzIC8gMjAgKiAoNSAtIDE4ICogdCArIE1hdGgucG93KHQsIDIpICsgNzIgKiBjIC0gNTggKiB0aGlzLmVwMikpKSArIHRoaXMueDA7XG4gICAgeSA9IHRoaXMuazAgKiAobWwgLSB0aGlzLm1sMCArIG4gKiB0cSAqIChhbHMgKiAoMC41ICsgYWxzIC8gMjQgKiAoNSAtIHQgKyA5ICogYyArIDQgKiBNYXRoLnBvdyhjLCAyKSArIGFscyAvIDMwICogKDYxIC0gNTggKiB0ICsgTWF0aC5wb3codCwgMikgKyA2MDAgKiBjIC0gMzMwICogdGhpcy5lcDIpKSkpKSArIHRoaXMueTA7XG5cbiAgfVxuICBwLnggPSB4O1xuICBwLnkgPSB5O1xuICByZXR1cm4gcDtcbn07XG5cbi8qKlxuICAgIFRyYW5zdmVyc2UgTWVyY2F0b3IgSW52ZXJzZSAgLSAgeC95IHRvIGxvbmcvbGF0XG4gICovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBjb24sIHBoaTtcbiAgdmFyIGRlbHRhX3BoaTtcbiAgdmFyIGk7XG4gIHZhciBtYXhfaXRlciA9IDY7XG4gIHZhciBsYXQsIGxvbjtcblxuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICB2YXIgZiA9IE1hdGguZXhwKHAueCAvICh0aGlzLmEgKiB0aGlzLmswKSk7XG4gICAgdmFyIGcgPSAwLjUgKiAoZiAtIDEgLyBmKTtcbiAgICB2YXIgdGVtcCA9IHRoaXMubGF0MCArIHAueSAvICh0aGlzLmEgKiB0aGlzLmswKTtcbiAgICB2YXIgaCA9IE1hdGguY29zKHRlbXApO1xuICAgIGNvbiA9IE1hdGguc3FydCgoMSAtIGggKiBoKSAvICgxICsgZyAqIGcpKTtcbiAgICBsYXQgPSBhc2lueihjb24pO1xuICAgIGlmICh0ZW1wIDwgMCkge1xuICAgICAgbGF0ID0gLWxhdDtcbiAgICB9XG4gICAgaWYgKChnID09PSAwKSAmJiAoaCA9PT0gMCkpIHtcbiAgICAgIGxvbiA9IHRoaXMubG9uZzA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbG9uID0gYWRqdXN0X2xvbihNYXRoLmF0YW4yKGcsIGgpICsgdGhpcy5sb25nMCk7XG4gICAgfVxuICB9XG4gIGVsc2UgeyAvLyBlbGxpcHNvaWRhbCBmb3JtXG4gICAgdmFyIHggPSBwLnggLSB0aGlzLngwO1xuICAgIHZhciB5ID0gcC55IC0gdGhpcy55MDtcblxuICAgIGNvbiA9ICh0aGlzLm1sMCArIHkgLyB0aGlzLmswKSAvIHRoaXMuYTtcbiAgICBwaGkgPSBjb247XG4gICAgZm9yIChpID0gMDsgdHJ1ZTsgaSsrKSB7XG4gICAgICBkZWx0YV9waGkgPSAoKGNvbiArIHRoaXMuZTEgKiBNYXRoLnNpbigyICogcGhpKSAtIHRoaXMuZTIgKiBNYXRoLnNpbig0ICogcGhpKSArIHRoaXMuZTMgKiBNYXRoLnNpbig2ICogcGhpKSkgLyB0aGlzLmUwKSAtIHBoaTtcbiAgICAgIHBoaSArPSBkZWx0YV9waGk7XG4gICAgICBpZiAoTWF0aC5hYnMoZGVsdGFfcGhpKSA8PSBFUFNMTikge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChpID49IG1heF9pdGVyKSB7XG4gICAgICAgIHJldHVybiAoOTUpO1xuICAgICAgfVxuICAgIH0gLy8gZm9yKClcbiAgICBpZiAoTWF0aC5hYnMocGhpKSA8IEhBTEZfUEkpIHtcbiAgICAgIHZhciBzaW5fcGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICAgIHZhciBjb3NfcGhpID0gTWF0aC5jb3MocGhpKTtcbiAgICAgIHZhciB0YW5fcGhpID0gTWF0aC50YW4ocGhpKTtcbiAgICAgIHZhciBjID0gdGhpcy5lcDIgKiBNYXRoLnBvdyhjb3NfcGhpLCAyKTtcbiAgICAgIHZhciBjcyA9IE1hdGgucG93KGMsIDIpO1xuICAgICAgdmFyIHQgPSBNYXRoLnBvdyh0YW5fcGhpLCAyKTtcbiAgICAgIHZhciB0cyA9IE1hdGgucG93KHQsIDIpO1xuICAgICAgY29uID0gMSAtIHRoaXMuZXMgKiBNYXRoLnBvdyhzaW5fcGhpLCAyKTtcbiAgICAgIHZhciBuID0gdGhpcy5hIC8gTWF0aC5zcXJ0KGNvbik7XG4gICAgICB2YXIgciA9IG4gKiAoMSAtIHRoaXMuZXMpIC8gY29uO1xuICAgICAgdmFyIGQgPSB4IC8gKG4gKiB0aGlzLmswKTtcbiAgICAgIHZhciBkcyA9IE1hdGgucG93KGQsIDIpO1xuICAgICAgbGF0ID0gcGhpIC0gKG4gKiB0YW5fcGhpICogZHMgLyByKSAqICgwLjUgLSBkcyAvIDI0ICogKDUgKyAzICogdCArIDEwICogYyAtIDQgKiBjcyAtIDkgKiB0aGlzLmVwMiAtIGRzIC8gMzAgKiAoNjEgKyA5MCAqIHQgKyAyOTggKiBjICsgNDUgKiB0cyAtIDI1MiAqIHRoaXMuZXAyIC0gMyAqIGNzKSkpO1xuICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgKGQgKiAoMSAtIGRzIC8gNiAqICgxICsgMiAqIHQgKyBjIC0gZHMgLyAyMCAqICg1IC0gMiAqIGMgKyAyOCAqIHQgLSAzICogY3MgKyA4ICogdGhpcy5lcDIgKyAyNCAqIHRzKSkpIC8gY29zX3BoaSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxhdCA9IEhBTEZfUEkgKiBzaWduKHkpO1xuICAgICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICB9XG4gIH1cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJUcmFuc3ZlcnNlX01lcmNhdG9yXCIsIFwiVHJhbnN2ZXJzZSBNZXJjYXRvclwiLCBcInRtZXJjXCJdO1xuIiwidmFyIEQyUiA9IDAuMDE3NDUzMjkyNTE5OTQzMjk1Nzc7XG52YXIgdG1lcmMgPSByZXF1aXJlKCcuL3RtZXJjJyk7XG5leHBvcnRzLmRlcGVuZHNPbiA9ICd0bWVyYyc7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgaWYgKCF0aGlzLnpvbmUpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5sYXQwID0gMDtcbiAgdGhpcy5sb25nMCA9ICgoNiAqIE1hdGguYWJzKHRoaXMuem9uZSkpIC0gMTgzKSAqIEQyUjtcbiAgdGhpcy54MCA9IDUwMDAwMDtcbiAgdGhpcy55MCA9IHRoaXMudXRtU291dGggPyAxMDAwMDAwMCA6IDA7XG4gIHRoaXMuazAgPSAwLjk5OTY7XG5cbiAgdG1lcmMuaW5pdC5hcHBseSh0aGlzKTtcbiAgdGhpcy5mb3J3YXJkID0gdG1lcmMuZm9yd2FyZDtcbiAgdGhpcy5pbnZlcnNlID0gdG1lcmMuaW52ZXJzZTtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiVW5pdmVyc2FsIFRyYW5zdmVyc2UgTWVyY2F0b3IgU3lzdGVtXCIsIFwidXRtXCJdO1xuIiwidmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIGFzaW56ID0gcmVxdWlyZSgnLi4vY29tbW9uL2FzaW56Jyk7XG4vKiBJbml0aWFsaXplIHRoZSBWYW4gRGVyIEdyaW50ZW4gcHJvamVjdGlvblxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAvL3RoaXMuUiA9IDYzNzA5OTc7IC8vUmFkaXVzIG9mIGVhcnRoXG4gIHRoaXMuUiA9IHRoaXMuYTtcbn07XG5cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcblxuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuXG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciB4LCB5O1xuXG4gIGlmIChNYXRoLmFicyhsYXQpIDw9IEVQU0xOKSB7XG4gICAgeCA9IHRoaXMueDAgKyB0aGlzLlIgKiBkbG9uO1xuICAgIHkgPSB0aGlzLnkwO1xuICB9XG4gIHZhciB0aGV0YSA9IGFzaW56KDIgKiBNYXRoLmFicyhsYXQgLyBNYXRoLlBJKSk7XG4gIGlmICgoTWF0aC5hYnMoZGxvbikgPD0gRVBTTE4pIHx8IChNYXRoLmFicyhNYXRoLmFicyhsYXQpIC0gSEFMRl9QSSkgPD0gRVBTTE4pKSB7XG4gICAgeCA9IHRoaXMueDA7XG4gICAgaWYgKGxhdCA+PSAwKSB7XG4gICAgICB5ID0gdGhpcy55MCArIE1hdGguUEkgKiB0aGlzLlIgKiBNYXRoLnRhbigwLjUgKiB0aGV0YSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgeSA9IHRoaXMueTAgKyBNYXRoLlBJICogdGhpcy5SICogLU1hdGgudGFuKDAuNSAqIHRoZXRhKTtcbiAgICB9XG4gICAgLy8gIHJldHVybihPSyk7XG4gIH1cbiAgdmFyIGFsID0gMC41ICogTWF0aC5hYnMoKE1hdGguUEkgLyBkbG9uKSAtIChkbG9uIC8gTWF0aC5QSSkpO1xuICB2YXIgYXNxID0gYWwgKiBhbDtcbiAgdmFyIHNpbnRoID0gTWF0aC5zaW4odGhldGEpO1xuICB2YXIgY29zdGggPSBNYXRoLmNvcyh0aGV0YSk7XG5cbiAgdmFyIGcgPSBjb3N0aCAvIChzaW50aCArIGNvc3RoIC0gMSk7XG4gIHZhciBnc3EgPSBnICogZztcbiAgdmFyIG0gPSBnICogKDIgLyBzaW50aCAtIDEpO1xuICB2YXIgbXNxID0gbSAqIG07XG4gIHZhciBjb24gPSBNYXRoLlBJICogdGhpcy5SICogKGFsICogKGcgLSBtc3EpICsgTWF0aC5zcXJ0KGFzcSAqIChnIC0gbXNxKSAqIChnIC0gbXNxKSAtIChtc3EgKyBhc3EpICogKGdzcSAtIG1zcSkpKSAvIChtc3EgKyBhc3EpO1xuICBpZiAoZGxvbiA8IDApIHtcbiAgICBjb24gPSAtY29uO1xuICB9XG4gIHggPSB0aGlzLngwICsgY29uO1xuICAvL2NvbiA9IE1hdGguYWJzKGNvbiAvIChNYXRoLlBJICogdGhpcy5SKSk7XG4gIHZhciBxID0gYXNxICsgZztcbiAgY29uID0gTWF0aC5QSSAqIHRoaXMuUiAqIChtICogcSAtIGFsICogTWF0aC5zcXJ0KChtc3EgKyBhc3EpICogKGFzcSArIDEpIC0gcSAqIHEpKSAvIChtc3EgKyBhc3EpO1xuICBpZiAobGF0ID49IDApIHtcbiAgICAvL3kgPSB0aGlzLnkwICsgTWF0aC5QSSAqIHRoaXMuUiAqIE1hdGguc3FydCgxIC0gY29uICogY29uIC0gMiAqIGFsICogY29uKTtcbiAgICB5ID0gdGhpcy55MCArIGNvbjtcbiAgfVxuICBlbHNlIHtcbiAgICAvL3kgPSB0aGlzLnkwIC0gTWF0aC5QSSAqIHRoaXMuUiAqIE1hdGguc3FydCgxIC0gY29uICogY29uIC0gMiAqIGFsICogY29uKTtcbiAgICB5ID0gdGhpcy55MCAtIGNvbjtcbiAgfVxuICBwLnggPSB4O1xuICBwLnkgPSB5O1xuICByZXR1cm4gcDtcbn07XG5cbi8qIFZhbiBEZXIgR3JpbnRlbiBpbnZlcnNlIGVxdWF0aW9ucy0tbWFwcGluZyB4LHkgdG8gbGF0L2xvbmdcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiwgbGF0O1xuICB2YXIgeHgsIHl5LCB4eXMsIGMxLCBjMiwgYzM7XG4gIHZhciBhMTtcbiAgdmFyIG0xO1xuICB2YXIgY29uO1xuICB2YXIgdGgxO1xuICB2YXIgZDtcblxuICAvKiBpbnZlcnNlIGVxdWF0aW9uc1xuICAgIC0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgcC54IC09IHRoaXMueDA7XG4gIHAueSAtPSB0aGlzLnkwO1xuICBjb24gPSBNYXRoLlBJICogdGhpcy5SO1xuICB4eCA9IHAueCAvIGNvbjtcbiAgeXkgPSBwLnkgLyBjb247XG4gIHh5cyA9IHh4ICogeHggKyB5eSAqIHl5O1xuICBjMSA9IC1NYXRoLmFicyh5eSkgKiAoMSArIHh5cyk7XG4gIGMyID0gYzEgLSAyICogeXkgKiB5eSArIHh4ICogeHg7XG4gIGMzID0gLTIgKiBjMSArIDEgKyAyICogeXkgKiB5eSArIHh5cyAqIHh5cztcbiAgZCA9IHl5ICogeXkgLyBjMyArICgyICogYzIgKiBjMiAqIGMyIC8gYzMgLyBjMyAvIGMzIC0gOSAqIGMxICogYzIgLyBjMyAvIGMzKSAvIDI3O1xuICBhMSA9IChjMSAtIGMyICogYzIgLyAzIC8gYzMpIC8gYzM7XG4gIG0xID0gMiAqIE1hdGguc3FydCgtYTEgLyAzKTtcbiAgY29uID0gKCgzICogZCkgLyBhMSkgLyBtMTtcbiAgaWYgKE1hdGguYWJzKGNvbikgPiAxKSB7XG4gICAgaWYgKGNvbiA+PSAwKSB7XG4gICAgICBjb24gPSAxO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbiA9IC0xO1xuICAgIH1cbiAgfVxuICB0aDEgPSBNYXRoLmFjb3MoY29uKSAvIDM7XG4gIGlmIChwLnkgPj0gMCkge1xuICAgIGxhdCA9ICgtbTEgKiBNYXRoLmNvcyh0aDEgKyBNYXRoLlBJIC8gMykgLSBjMiAvIDMgLyBjMykgKiBNYXRoLlBJO1xuICB9XG4gIGVsc2Uge1xuICAgIGxhdCA9IC0oLW0xICogTWF0aC5jb3ModGgxICsgTWF0aC5QSSAvIDMpIC0gYzIgLyAzIC8gYzMpICogTWF0aC5QSTtcbiAgfVxuXG4gIGlmIChNYXRoLmFicyh4eCkgPCBFUFNMTikge1xuICAgIGxvbiA9IHRoaXMubG9uZzA7XG4gIH1cbiAgZWxzZSB7XG4gICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5QSSAqICh4eXMgLSAxICsgTWF0aC5zcXJ0KDEgKyAyICogKHh4ICogeHggLSB5eSAqIHl5KSArIHh5cyAqIHh5cykpIC8gMiAvIHh4KTtcbiAgfVxuXG4gIHAueCA9IGxvbjtcbiAgcC55ID0gbGF0O1xuICByZXR1cm4gcDtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiVmFuX2Rlcl9HcmludGVuX0lcIiwgXCJWYW5EZXJHcmludGVuXCIsIFwidmFuZGdcIl07IiwidmFyIEQyUiA9IDAuMDE3NDUzMjkyNTE5OTQzMjk1Nzc7XG52YXIgUjJEID0gNTcuMjk1Nzc5NTEzMDgyMzIwODg7XG52YXIgUEpEXzNQQVJBTSA9IDE7XG52YXIgUEpEXzdQQVJBTSA9IDI7XG52YXIgZGF0dW1fdHJhbnNmb3JtID0gcmVxdWlyZSgnLi9kYXR1bV90cmFuc2Zvcm0nKTtcbnZhciBhZGp1c3RfYXhpcyA9IHJlcXVpcmUoJy4vYWRqdXN0X2F4aXMnKTtcbnZhciBwcm9qID0gcmVxdWlyZSgnLi9Qcm9qJyk7XG52YXIgdG9Qb2ludCA9IHJlcXVpcmUoJy4vY29tbW9uL3RvUG9pbnQnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJhbnNmb3JtKHNvdXJjZSwgZGVzdCwgcG9pbnQpIHtcbiAgdmFyIHdnczg0O1xuICBpZiAoQXJyYXkuaXNBcnJheShwb2ludCkpIHtcbiAgICBwb2ludCA9IHRvUG9pbnQocG9pbnQpO1xuICB9XG4gIGZ1bmN0aW9uIGNoZWNrTm90V0dTKHNvdXJjZSwgZGVzdCkge1xuICAgIHJldHVybiAoKHNvdXJjZS5kYXR1bS5kYXR1bV90eXBlID09PSBQSkRfM1BBUkFNIHx8IHNvdXJjZS5kYXR1bS5kYXR1bV90eXBlID09PSBQSkRfN1BBUkFNKSAmJiBkZXN0LmRhdHVtQ29kZSAhPT0gXCJXR1M4NFwiKTtcbiAgfVxuXG4gIC8vIFdvcmthcm91bmQgZm9yIGRhdHVtIHNoaWZ0cyB0b3dnczg0LCBpZiBlaXRoZXIgc291cmNlIG9yIGRlc3RpbmF0aW9uIHByb2plY3Rpb24gaXMgbm90IHdnczg0XG4gIGlmIChzb3VyY2UuZGF0dW0gJiYgZGVzdC5kYXR1bSAmJiAoY2hlY2tOb3RXR1Moc291cmNlLCBkZXN0KSB8fCBjaGVja05vdFdHUyhkZXN0LCBzb3VyY2UpKSkge1xuICAgIHdnczg0ID0gbmV3IHByb2ooJ1dHUzg0Jyk7XG4gICAgdHJhbnNmb3JtKHNvdXJjZSwgd2dzODQsIHBvaW50KTtcbiAgICBzb3VyY2UgPSB3Z3M4NDtcbiAgfVxuICAvLyBER1IsIDIwMTAvMTEvMTJcbiAgaWYgKHNvdXJjZS5heGlzICE9PSBcImVudVwiKSB7XG4gICAgYWRqdXN0X2F4aXMoc291cmNlLCBmYWxzZSwgcG9pbnQpO1xuICB9XG4gIC8vIFRyYW5zZm9ybSBzb3VyY2UgcG9pbnRzIHRvIGxvbmcvbGF0LCBpZiB0aGV5IGFyZW4ndCBhbHJlYWR5LlxuICBpZiAoc291cmNlLnByb2pOYW1lID09PSBcImxvbmdsYXRcIikge1xuICAgIHBvaW50LnggKj0gRDJSOyAvLyBjb252ZXJ0IGRlZ3JlZXMgdG8gcmFkaWFuc1xuICAgIHBvaW50LnkgKj0gRDJSO1xuICB9XG4gIGVsc2Uge1xuICAgIGlmIChzb3VyY2UudG9fbWV0ZXIpIHtcbiAgICAgIHBvaW50LnggKj0gc291cmNlLnRvX21ldGVyO1xuICAgICAgcG9pbnQueSAqPSBzb3VyY2UudG9fbWV0ZXI7XG4gICAgfVxuICAgIHNvdXJjZS5pbnZlcnNlKHBvaW50KTsgLy8gQ29udmVydCBDYXJ0ZXNpYW4gdG8gbG9uZ2xhdFxuICB9XG4gIC8vIEFkanVzdCBmb3IgdGhlIHByaW1lIG1lcmlkaWFuIGlmIG5lY2Vzc2FyeVxuICBpZiAoc291cmNlLmZyb21fZ3JlZW53aWNoKSB7XG4gICAgcG9pbnQueCArPSBzb3VyY2UuZnJvbV9ncmVlbndpY2g7XG4gIH1cblxuICAvLyBDb252ZXJ0IGRhdHVtcyBpZiBuZWVkZWQsIGFuZCBpZiBwb3NzaWJsZS5cbiAgcG9pbnQgPSBkYXR1bV90cmFuc2Zvcm0oc291cmNlLmRhdHVtLCBkZXN0LmRhdHVtLCBwb2ludCk7XG5cbiAgLy8gQWRqdXN0IGZvciB0aGUgcHJpbWUgbWVyaWRpYW4gaWYgbmVjZXNzYXJ5XG4gIGlmIChkZXN0LmZyb21fZ3JlZW53aWNoKSB7XG4gICAgcG9pbnQueCAtPSBkZXN0LmZyb21fZ3JlZW53aWNoO1xuICB9XG5cbiAgaWYgKGRlc3QucHJvak5hbWUgPT09IFwibG9uZ2xhdFwiKSB7XG4gICAgLy8gY29udmVydCByYWRpYW5zIHRvIGRlY2ltYWwgZGVncmVlc1xuICAgIHBvaW50LnggKj0gUjJEO1xuICAgIHBvaW50LnkgKj0gUjJEO1xuICB9XG4gIGVsc2UgeyAvLyBlbHNlIHByb2plY3RcbiAgICBkZXN0LmZvcndhcmQocG9pbnQpO1xuICAgIGlmIChkZXN0LnRvX21ldGVyKSB7XG4gICAgICBwb2ludC54IC89IGRlc3QudG9fbWV0ZXI7XG4gICAgICBwb2ludC55IC89IGRlc3QudG9fbWV0ZXI7XG4gICAgfVxuICB9XG5cbiAgLy8gREdSLCAyMDEwLzExLzEyXG4gIGlmIChkZXN0LmF4aXMgIT09IFwiZW51XCIpIHtcbiAgICBhZGp1c3RfYXhpcyhkZXN0LCB0cnVlLCBwb2ludCk7XG4gIH1cblxuICByZXR1cm4gcG9pbnQ7XG59OyIsInZhciBEMlIgPSAwLjAxNzQ1MzI5MjUxOTk0MzI5NTc3O1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJy4vZXh0ZW5kJyk7XG5cbmZ1bmN0aW9uIG1hcGl0KG9iaiwga2V5LCB2KSB7XG4gIG9ialtrZXldID0gdi5tYXAoZnVuY3Rpb24oYWEpIHtcbiAgICB2YXIgbyA9IHt9O1xuICAgIHNFeHByKGFhLCBvKTtcbiAgICByZXR1cm4gbztcbiAgfSkucmVkdWNlKGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gZXh0ZW5kKGEsIGIpO1xuICB9LCB7fSk7XG59XG5cbmZ1bmN0aW9uIHNFeHByKHYsIG9iaikge1xuICB2YXIga2V5O1xuICBpZiAoIUFycmF5LmlzQXJyYXkodikpIHtcbiAgICBvYmpbdl0gPSB0cnVlO1xuICAgIHJldHVybjtcbiAgfVxuICBlbHNlIHtcbiAgICBrZXkgPSB2LnNoaWZ0KCk7XG4gICAgaWYgKGtleSA9PT0gJ1BBUkFNRVRFUicpIHtcbiAgICAgIGtleSA9IHYuc2hpZnQoKTtcbiAgICB9XG4gICAgaWYgKHYubGVuZ3RoID09PSAxKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2WzBdKSkge1xuICAgICAgICBvYmpba2V5XSA9IHt9O1xuICAgICAgICBzRXhwcih2WzBdLCBvYmpba2V5XSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgb2JqW2tleV0gPSB2WzBdO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICghdi5sZW5ndGgpIHtcbiAgICAgIG9ialtrZXldID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoa2V5ID09PSAnVE9XR1M4NCcpIHtcbiAgICAgIG9ialtrZXldID0gdjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBvYmpba2V5XSA9IHt9O1xuICAgICAgaWYgKFsnVU5JVCcsICdQUklNRU0nLCAnVkVSVF9EQVRVTSddLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAgICAgIG9ialtrZXldID0ge1xuICAgICAgICAgIG5hbWU6IHZbMF0udG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBjb252ZXJ0OiB2WzFdXG4gICAgICAgIH07XG4gICAgICAgIGlmICh2Lmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgIG9ialtrZXldLmF1dGggPSB2WzJdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChrZXkgPT09ICdTUEhFUk9JRCcpIHtcbiAgICAgICAgb2JqW2tleV0gPSB7XG4gICAgICAgICAgbmFtZTogdlswXSxcbiAgICAgICAgICBhOiB2WzFdLFxuICAgICAgICAgIHJmOiB2WzJdXG4gICAgICAgIH07XG4gICAgICAgIGlmICh2Lmxlbmd0aCA9PT0gNCkge1xuICAgICAgICAgIG9ialtrZXldLmF1dGggPSB2WzNdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChbJ0dFT0dDUycsICdHRU9DQ1MnLCAnREFUVU0nLCAnVkVSVF9DUycsICdDT01QRF9DUycsICdMT0NBTF9DUycsICdGSVRURURfQ1MnLCAnTE9DQUxfREFUVU0nXS5pbmRleE9mKGtleSkgPiAtMSkge1xuICAgICAgICB2WzBdID0gWyduYW1lJywgdlswXV07XG4gICAgICAgIG1hcGl0KG9iaiwga2V5LCB2KTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHYuZXZlcnkoZnVuY3Rpb24oYWEpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYWEpO1xuICAgICAgfSkpIHtcbiAgICAgICAgbWFwaXQob2JqLCBrZXksIHYpO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHNFeHByKHYsIG9ialtrZXldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuYW1lKG9iaiwgcGFyYW1zKSB7XG4gIHZhciBvdXROYW1lID0gcGFyYW1zWzBdO1xuICB2YXIgaW5OYW1lID0gcGFyYW1zWzFdO1xuICBpZiAoIShvdXROYW1lIGluIG9iaikgJiYgKGluTmFtZSBpbiBvYmopKSB7XG4gICAgb2JqW291dE5hbWVdID0gb2JqW2luTmFtZV07XG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDMpIHtcbiAgICAgIG9ialtvdXROYW1lXSA9IHBhcmFtc1syXShvYmpbb3V0TmFtZV0pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBkMnIoaW5wdXQpIHtcbiAgcmV0dXJuIGlucHV0ICogRDJSO1xufVxuXG5mdW5jdGlvbiBjbGVhbldLVCh3a3QpIHtcbiAgaWYgKHdrdC50eXBlID09PSAnR0VPR0NTJykge1xuICAgIHdrdC5wcm9qTmFtZSA9ICdsb25nbGF0JztcbiAgfVxuICBlbHNlIGlmICh3a3QudHlwZSA9PT0gJ0xPQ0FMX0NTJykge1xuICAgIHdrdC5wcm9qTmFtZSA9ICdpZGVudGl0eSc7XG4gICAgd2t0LmxvY2FsID0gdHJ1ZTtcbiAgfVxuICBlbHNlIHtcbiAgICBpZiAodHlwZW9mIHdrdC5QUk9KRUNUSU9OID09PSBcIm9iamVjdFwiKSB7XG4gICAgICB3a3QucHJvak5hbWUgPSBPYmplY3Qua2V5cyh3a3QuUFJPSkVDVElPTilbMF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgd2t0LnByb2pOYW1lID0gd2t0LlBST0pFQ1RJT047XG4gICAgfVxuICB9XG4gIGlmICh3a3QuVU5JVCkge1xuICAgIHdrdC51bml0cyA9IHdrdC5VTklULm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAod2t0LnVuaXRzID09PSAnbWV0cmUnKSB7XG4gICAgICB3a3QudW5pdHMgPSAnbWV0ZXInO1xuICAgIH1cbiAgICBpZiAod2t0LlVOSVQuY29udmVydCkge1xuICAgICAgd2t0LnRvX21ldGVyID0gcGFyc2VGbG9hdCh3a3QuVU5JVC5jb252ZXJ0LCAxMCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHdrdC5HRU9HQ1MpIHtcbiAgICAvL2lmKHdrdC5HRU9HQ1MuUFJJTUVNJiZ3a3QuR0VPR0NTLlBSSU1FTS5jb252ZXJ0KXtcbiAgICAvLyAgd2t0LmZyb21fZ3JlZW53aWNoPXdrdC5HRU9HQ1MuUFJJTUVNLmNvbnZlcnQqRDJSO1xuICAgIC8vfVxuICAgIGlmICh3a3QuR0VPR0NTLkRBVFVNKSB7XG4gICAgICB3a3QuZGF0dW1Db2RlID0gd2t0LkdFT0dDUy5EQVRVTS5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgd2t0LmRhdHVtQ29kZSA9IHdrdC5HRU9HQ1MubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cbiAgICBpZiAod2t0LmRhdHVtQ29kZS5zbGljZSgwLCAyKSA9PT0gJ2RfJykge1xuICAgICAgd2t0LmRhdHVtQ29kZSA9IHdrdC5kYXR1bUNvZGUuc2xpY2UoMik7XG4gICAgfVxuICAgIGlmICh3a3QuZGF0dW1Db2RlID09PSAnbmV3X3plYWxhbmRfZ2VvZGV0aWNfZGF0dW1fMTk0OScgfHwgd2t0LmRhdHVtQ29kZSA9PT0gJ25ld196ZWFsYW5kXzE5NDknKSB7XG4gICAgICB3a3QuZGF0dW1Db2RlID0gJ256Z2Q0OSc7XG4gICAgfVxuICAgIGlmICh3a3QuZGF0dW1Db2RlID09PSBcIndnc18xOTg0XCIpIHtcbiAgICAgIGlmICh3a3QuUFJPSkVDVElPTiA9PT0gJ01lcmNhdG9yX0F1eGlsaWFyeV9TcGhlcmUnKSB7XG4gICAgICAgIHdrdC5zcGhlcmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgd2t0LmRhdHVtQ29kZSA9ICd3Z3M4NCc7XG4gICAgfVxuICAgIGlmICh3a3QuZGF0dW1Db2RlLnNsaWNlKC02KSA9PT0gJ19mZXJybycpIHtcbiAgICAgIHdrdC5kYXR1bUNvZGUgPSB3a3QuZGF0dW1Db2RlLnNsaWNlKDAsIC0gNik7XG4gICAgfVxuICAgIGlmICh3a3QuZGF0dW1Db2RlLnNsaWNlKC04KSA9PT0gJ19qYWthcnRhJykge1xuICAgICAgd2t0LmRhdHVtQ29kZSA9IHdrdC5kYXR1bUNvZGUuc2xpY2UoMCwgLSA4KTtcbiAgICB9XG4gICAgaWYgKH53a3QuZGF0dW1Db2RlLmluZGV4T2YoJ2JlbGdlJykpIHtcbiAgICAgIHdrdC5kYXR1bUNvZGUgPSBcInJuYjcyXCI7XG4gICAgfVxuICAgIGlmICh3a3QuR0VPR0NTLkRBVFVNICYmIHdrdC5HRU9HQ1MuREFUVU0uU1BIRVJPSUQpIHtcbiAgICAgIHdrdC5lbGxwcyA9IHdrdC5HRU9HQ1MuREFUVU0uU1BIRVJPSUQubmFtZS5yZXBsYWNlKCdfMTknLCAnJykucmVwbGFjZSgvW0NjXWxhcmtlXFxfMTgvLCAnY2xyaycpO1xuICAgICAgaWYgKHdrdC5lbGxwcy50b0xvd2VyQ2FzZSgpLnNsaWNlKDAsIDEzKSA9PT0gXCJpbnRlcm5hdGlvbmFsXCIpIHtcbiAgICAgICAgd2t0LmVsbHBzID0gJ2ludGwnO1xuICAgICAgfVxuXG4gICAgICB3a3QuYSA9IHdrdC5HRU9HQ1MuREFUVU0uU1BIRVJPSUQuYTtcbiAgICAgIHdrdC5yZiA9IHBhcnNlRmxvYXQod2t0LkdFT0dDUy5EQVRVTS5TUEhFUk9JRC5yZiwgMTApO1xuICAgIH1cbiAgICBpZiAofndrdC5kYXR1bUNvZGUuaW5kZXhPZignb3NnYl8xOTM2JykpIHtcbiAgICAgIHdrdC5kYXR1bUNvZGUgPSBcIm9zZ2IzNlwiO1xuICAgIH1cbiAgfVxuICBpZiAod2t0LmIgJiYgIWlzRmluaXRlKHdrdC5iKSkge1xuICAgIHdrdC5iID0gd2t0LmE7XG4gIH1cblxuICBmdW5jdGlvbiB0b01ldGVyKGlucHV0KSB7XG4gICAgdmFyIHJhdGlvID0gd2t0LnRvX21ldGVyIHx8IDE7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoaW5wdXQsIDEwKSAqIHJhdGlvO1xuICB9XG4gIHZhciByZW5hbWVyID0gZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiByZW5hbWUod2t0LCBhKTtcbiAgfTtcbiAgdmFyIGxpc3QgPSBbXG4gICAgWydzdGFuZGFyZF9wYXJhbGxlbF8xJywgJ1N0YW5kYXJkX1BhcmFsbGVsXzEnXSxcbiAgICBbJ3N0YW5kYXJkX3BhcmFsbGVsXzInLCAnU3RhbmRhcmRfUGFyYWxsZWxfMiddLFxuICAgIFsnZmFsc2VfZWFzdGluZycsICdGYWxzZV9FYXN0aW5nJ10sXG4gICAgWydmYWxzZV9ub3J0aGluZycsICdGYWxzZV9Ob3J0aGluZyddLFxuICAgIFsnY2VudHJhbF9tZXJpZGlhbicsICdDZW50cmFsX01lcmlkaWFuJ10sXG4gICAgWydsYXRpdHVkZV9vZl9vcmlnaW4nLCAnTGF0aXR1ZGVfT2ZfT3JpZ2luJ10sXG4gICAgWydsYXRpdHVkZV9vZl9vcmlnaW4nLCAnQ2VudHJhbF9QYXJhbGxlbCddLFxuICAgIFsnc2NhbGVfZmFjdG9yJywgJ1NjYWxlX0ZhY3RvciddLFxuICAgIFsnazAnLCAnc2NhbGVfZmFjdG9yJ10sXG4gICAgWydsYXRpdHVkZV9vZl9jZW50ZXInLCAnTGF0aXR1ZGVfb2ZfY2VudGVyJ10sXG4gICAgWydsYXQwJywgJ2xhdGl0dWRlX29mX2NlbnRlcicsIGQycl0sXG4gICAgWydsb25naXR1ZGVfb2ZfY2VudGVyJywgJ0xvbmdpdHVkZV9PZl9DZW50ZXInXSxcbiAgICBbJ2xvbmdjJywgJ2xvbmdpdHVkZV9vZl9jZW50ZXInLCBkMnJdLFxuICAgIFsneDAnLCAnZmFsc2VfZWFzdGluZycsIHRvTWV0ZXJdLFxuICAgIFsneTAnLCAnZmFsc2Vfbm9ydGhpbmcnLCB0b01ldGVyXSxcbiAgICBbJ2xvbmcwJywgJ2NlbnRyYWxfbWVyaWRpYW4nLCBkMnJdLFxuICAgIFsnbGF0MCcsICdsYXRpdHVkZV9vZl9vcmlnaW4nLCBkMnJdLFxuICAgIFsnbGF0MCcsICdzdGFuZGFyZF9wYXJhbGxlbF8xJywgZDJyXSxcbiAgICBbJ2xhdDEnLCAnc3RhbmRhcmRfcGFyYWxsZWxfMScsIGQycl0sXG4gICAgWydsYXQyJywgJ3N0YW5kYXJkX3BhcmFsbGVsXzInLCBkMnJdLFxuICAgIFsnYWxwaGEnLCAnYXppbXV0aCcsIGQycl0sXG4gICAgWydzcnNDb2RlJywgJ25hbWUnXVxuICBdO1xuICBsaXN0LmZvckVhY2gocmVuYW1lcik7XG4gIGlmICghd2t0LmxvbmcwICYmIHdrdC5sb25nYyAmJiAod2t0LnByb2pOYW1lID09PSAnQWxiZXJzX0NvbmljX0VxdWFsX0FyZWEnIHx8IHdrdC5wcm9qTmFtZSA9PT0gXCJMYW1iZXJ0X0F6aW11dGhhbF9FcXVhbF9BcmVhXCIpKSB7XG4gICAgd2t0LmxvbmcwID0gd2t0LmxvbmdjO1xuICB9XG4gIGlmICghd2t0LmxhdF90cyAmJiB3a3QubGF0MSAmJiAod2t0LnByb2pOYW1lID09PSAnU3RlcmVvZ3JhcGhpY19Tb3V0aF9Qb2xlJyB8fCB3a3QucHJvak5hbWUgPT09ICdQb2xhciBTdGVyZW9ncmFwaGljICh2YXJpYW50IEIpJykpIHtcbiAgICB3a3QubGF0MCA9IGQycih3a3QubGF0MSA+IDAgPyA5MCA6IC05MCk7XG4gICAgd2t0LmxhdF90cyA9IHdrdC5sYXQxO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHdrdCwgc2VsZikge1xuICB2YXIgbGlzcCA9IEpTT04ucGFyc2UoKFwiLFwiICsgd2t0KS5yZXBsYWNlKC9cXHMqXFwsXFxzKihbQS1aXzAtOV0rPykoXFxbKS9nLCAnLFtcIiQxXCIsJykuc2xpY2UoMSkucmVwbGFjZSgvXFxzKlxcLFxccyooW0EtWl8wLTldKz8pXFxdL2csICcsXCIkMVwiXScpLnJlcGxhY2UoLyxcXFtcIlZFUlRDU1wiLisvLCcnKSk7XG4gIHZhciB0eXBlID0gbGlzcC5zaGlmdCgpO1xuICB2YXIgbmFtZSA9IGxpc3Auc2hpZnQoKTtcbiAgbGlzcC51bnNoaWZ0KFsnbmFtZScsIG5hbWVdKTtcbiAgbGlzcC51bnNoaWZ0KFsndHlwZScsIHR5cGVdKTtcbiAgbGlzcC51bnNoaWZ0KCdvdXRwdXQnKTtcbiAgdmFyIG9iaiA9IHt9O1xuICBzRXhwcihsaXNwLCBvYmopO1xuICBjbGVhbldLVChvYmoub3V0cHV0KTtcbiAgcmV0dXJuIGV4dGVuZChzZWxmLCBvYmoub3V0cHV0KTtcbn07XG4iLCJtb2R1bGUuZXhwb3J0cz17XG4gIFwiX2FyZ3NcIjogW1xuICAgIFtcbiAgICAgIHtcbiAgICAgICAgXCJyYXdcIjogXCJwcm9qNEAyLjMuMTBcIixcbiAgICAgICAgXCJzY29wZVwiOiBudWxsLFxuICAgICAgICBcImVzY2FwZWROYW1lXCI6IFwicHJvajRcIixcbiAgICAgICAgXCJuYW1lXCI6IFwicHJvajRcIixcbiAgICAgICAgXCJyYXdTcGVjXCI6IFwiMi4zLjEwXCIsXG4gICAgICAgIFwic3BlY1wiOiBcIjIuMy4xMFwiLFxuICAgICAgICBcInR5cGVcIjogXCJ2ZXJzaW9uXCJcbiAgICAgIH0sXG4gICAgICBcIkM6XFxcXFV0dlxcXFxvcmlnb1wiXG4gICAgXVxuICBdLFxuICBcIl9mcm9tXCI6IFwicHJvajRAMi4zLjEwXCIsXG4gIFwiX2lkXCI6IFwicHJvajRAMi4zLjEwXCIsXG4gIFwiX2luQ2FjaGVcIjogdHJ1ZSxcbiAgXCJfbG9jYXRpb25cIjogXCIvcHJvajRcIixcbiAgXCJfbm9kZVZlcnNpb25cIjogXCIwLjEyLjVcIixcbiAgXCJfbnBtVXNlclwiOiB7XG4gICAgXCJuYW1lXCI6IFwiYWhvY2V2YXJcIixcbiAgICBcImVtYWlsXCI6IFwiYW5kcmVhcy5ob2NldmFyQGdtYWlsLmNvbVwiXG4gIH0sXG4gIFwiX25wbVZlcnNpb25cIjogXCIyLjExLjJcIixcbiAgXCJfcGhhbnRvbUNoaWxkcmVuXCI6IHt9LFxuICBcIl9yZXF1ZXN0ZWRcIjoge1xuICAgIFwicmF3XCI6IFwicHJvajRAMi4zLjEwXCIsXG4gICAgXCJzY29wZVwiOiBudWxsLFxuICAgIFwiZXNjYXBlZE5hbWVcIjogXCJwcm9qNFwiLFxuICAgIFwibmFtZVwiOiBcInByb2o0XCIsXG4gICAgXCJyYXdTcGVjXCI6IFwiMi4zLjEwXCIsXG4gICAgXCJzcGVjXCI6IFwiMi4zLjEwXCIsXG4gICAgXCJ0eXBlXCI6IFwidmVyc2lvblwiXG4gIH0sXG4gIFwiX3JlcXVpcmVkQnlcIjogW1xuICAgIFwiL1wiXG4gIF0sXG4gIFwiX3Jlc29sdmVkXCI6IFwiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvcHJvajQvLS9wcm9qNC0yLjMuMTAudGd6XCIsXG4gIFwiX3NoYXN1bVwiOiBcImY2ZTY2YmRjY2EzMzJjMjVhNWUzZDhlZjI2NWNmYzlkN2I2MGZkMGNcIixcbiAgXCJfc2hyaW5rd3JhcFwiOiBudWxsLFxuICBcIl9zcGVjXCI6IFwicHJvajRAMi4zLjEwXCIsXG4gIFwiX3doZXJlXCI6IFwiQzpcXFxcVXR2XFxcXG9yaWdvXCIsXG4gIFwiYXV0aG9yXCI6IFwiXCIsXG4gIFwiYnVnc1wiOiB7XG4gICAgXCJ1cmxcIjogXCJodHRwczovL2dpdGh1Yi5jb20vcHJvajRqcy9wcm9qNGpzL2lzc3Vlc1wiXG4gIH0sXG4gIFwiY29udHJpYnV0b3JzXCI6IFtcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJNaWtlIEFkYWlyXCIsXG4gICAgICBcImVtYWlsXCI6IFwibWFkYWlyQGRtc29sdXRpb25zLmNhXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIlJpY2hhcmQgR3JlZW53b29kXCIsXG4gICAgICBcImVtYWlsXCI6IFwicmljaEBncmVlbndvb2RtYXAuY29tXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIkNhbHZpbiBNZXRjYWxmXCIsXG4gICAgICBcImVtYWlsXCI6IFwiY2FsdmluLm1ldGNhbGZAZ21haWwuY29tXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIlJpY2hhcmQgTWFyc2RlblwiLFxuICAgICAgXCJ1cmxcIjogXCJodHRwOi8vd3d3LndpbndhZWQuY29tXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIlQuIE1pdHRhblwiXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJELiBTdGVpbndhbmRcIlxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiUy4gTmVsc29uXCJcbiAgICB9XG4gIF0sXG4gIFwiZGVwZW5kZW5jaWVzXCI6IHtcbiAgICBcIm1ncnNcIjogXCJ+MC4wLjJcIlxuICB9LFxuICBcImRlc2NyaXB0aW9uXCI6IFwiUHJvajRqcyBpcyBhIEphdmFTY3JpcHQgbGlicmFyeSB0byB0cmFuc2Zvcm0gcG9pbnQgY29vcmRpbmF0ZXMgZnJvbSBvbmUgY29vcmRpbmF0ZSBzeXN0ZW0gdG8gYW5vdGhlciwgaW5jbHVkaW5nIGRhdHVtIHRyYW5zZm9ybWF0aW9ucy5cIixcbiAgXCJkZXZEZXBlbmRlbmNpZXNcIjoge1xuICAgIFwiYnJvd3NlcmlmeVwiOiBcIn4zLjI0LjVcIixcbiAgICBcImNoYWlcIjogXCJ+MS44LjFcIixcbiAgICBcImN1cmxcIjogXCJnaXQ6Ly9naXRodWIuY29tL2N1am9qcy9jdXJsLmdpdFwiLFxuICAgIFwiZ3J1bnRcIjogXCJ+MC40LjJcIixcbiAgICBcImdydW50LWJyb3dzZXJpZnlcIjogXCJ+MS4zLjBcIixcbiAgICBcImdydW50LWNsaVwiOiBcIn4wLjEuMTNcIixcbiAgICBcImdydW50LWNvbnRyaWItY29ubmVjdFwiOiBcIn4wLjYuMFwiLFxuICAgIFwiZ3J1bnQtY29udHJpYi1qc2hpbnRcIjogXCJ+MC44LjBcIixcbiAgICBcImdydW50LWNvbnRyaWItdWdsaWZ5XCI6IFwifjAuMy4yXCIsXG4gICAgXCJncnVudC1tb2NoYS1waGFudG9tanNcIjogXCJ+MC40LjBcIixcbiAgICBcImlzdGFuYnVsXCI6IFwifjAuMi40XCIsXG4gICAgXCJtb2NoYVwiOiBcIn4xLjE3LjFcIixcbiAgICBcInRpblwiOiBcIn4wLjQuMFwiXG4gIH0sXG4gIFwiZGlyZWN0b3JpZXNcIjoge1xuICAgIFwidGVzdFwiOiBcInRlc3RcIixcbiAgICBcImRvY1wiOiBcImRvY3NcIlxuICB9LFxuICBcImRpc3RcIjoge1xuICAgIFwic2hhc3VtXCI6IFwiZjZlNjZiZGNjYTMzMmMyNWE1ZTNkOGVmMjY1Y2ZjOWQ3YjYwZmQwY1wiLFxuICAgIFwidGFyYmFsbFwiOiBcImh0dHBzOi8vcmVnaXN0cnkubnBtanMub3JnL3Byb2o0Ly0vcHJvajQtMi4zLjEwLnRnelwiXG4gIH0sXG4gIFwiZ2l0SGVhZFwiOiBcImFjMDNkMTQzOTQ5MWRjMzEzZGE4MDk4NTE5M2Y3MDJjYTQ3MWIzZDBcIixcbiAgXCJob21lcGFnZVwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9wcm9qNGpzL3Byb2o0anMjcmVhZG1lXCIsXG4gIFwiamFtXCI6IHtcbiAgICBcIm1haW5cIjogXCJkaXN0L3Byb2o0LmpzXCIsXG4gICAgXCJpbmNsdWRlXCI6IFtcbiAgICAgIFwiZGlzdC9wcm9qNC5qc1wiLFxuICAgICAgXCJSRUFETUUubWRcIixcbiAgICAgIFwiQVVUSE9SU1wiLFxuICAgICAgXCJMSUNFTlNFLm1kXCJcbiAgICBdXG4gIH0sXG4gIFwibGljZW5zZVwiOiBcIk1JVFwiLFxuICBcIm1haW5cIjogXCJsaWIvaW5kZXguanNcIixcbiAgXCJtYWludGFpbmVyc1wiOiBbXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiY3dtbWFcIixcbiAgICAgIFwiZW1haWxcIjogXCJjYWx2aW4ubWV0Y2FsZkBnbWFpbC5jb21cIlxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiYWhvY2V2YXJcIixcbiAgICAgIFwiZW1haWxcIjogXCJhbmRyZWFzLmhvY2V2YXJAZ21haWwuY29tXCJcbiAgICB9XG4gIF0sXG4gIFwibmFtZVwiOiBcInByb2o0XCIsXG4gIFwib3B0aW9uYWxEZXBlbmRlbmNpZXNcIjoge30sXG4gIFwicmVhZG1lXCI6IFwiRVJST1I6IE5vIFJFQURNRSBkYXRhIGZvdW5kIVwiLFxuICBcInJlcG9zaXRvcnlcIjoge1xuICAgIFwidHlwZVwiOiBcImdpdFwiLFxuICAgIFwidXJsXCI6IFwiZ2l0Oi8vZ2l0aHViLmNvbS9wcm9qNGpzL3Byb2o0anMuZ2l0XCJcbiAgfSxcbiAgXCJzY3JpcHRzXCI6IHtcbiAgICBcInRlc3RcIjogXCIuL25vZGVfbW9kdWxlcy9pc3RhbmJ1bC9saWIvY2xpLmpzIHRlc3QgLi9ub2RlX21vZHVsZXMvbW9jaGEvYmluL19tb2NoYSB0ZXN0L3Rlc3QuanNcIlxuICB9LFxuICBcInZlcnNpb25cIjogXCIyLjMuMTBcIlxufVxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG53aW5kb3cucHJvajQgPSByZXF1aXJlKCdwcm9qNCcpO1xyXG5nbG9iYWwualF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3NyYy92aWV3ZXInKTtcclxudmFyIG1hcExvYWRlciA9IHJlcXVpcmUoJy4vc3JjL21hcGxvYWRlcicpO1xyXG52YXIgY29udHJvbEluaXRpYWxpc2VyID0gcmVxdWlyZSgnLi9zcmMvY29udHJvbGluaXRpYWxpc2VyJyk7XHJcblxyXG52YXIgb3JpZ28gPSB7fTtcclxub3JpZ28ubWFwID0ge307XHJcbm9yaWdvLmNvbmZpZyA9IHJlcXVpcmUoJy4vY29uZi9vcmlnb0NvbmZpZycpO1xyXG5vcmlnby5jb250cm9scyA9IHJlcXVpcmUoJy4vY29uZi9vcmlnb0NvbnRyb2xzJyk7XHJcblxyXG5vcmlnby5tYXAuaW5pdCA9IGZ1bmN0aW9uKG9wdGlvbnMsIG9wdF9jb25maWcpIHtcclxuICB2YXIgY29uZmlnID0gb3B0X2NvbmZpZyA/ICQuZXh0ZW5kKG9yaWdvLmNvbmZpZywgb3B0X2NvbmZpZykgOiBvcmlnby5jb25maWc7XHJcblxyXG4gIHZhciBtYXAgPSBtYXBMb2FkZXIob3B0aW9ucywgY29uZmlnKTtcclxuICBpZiAobWFwKSB7XHJcbiAgICBtYXAudGhlbihmdW5jdGlvbihjb25maWcpIHtcclxuICAgICAgaW5pdChjb25maWcpO1xyXG4gICAgfSlcclxuICAgIHJldHVybiBWaWV3ZXI7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0KGNvbmZpZykge1xyXG4gIFZpZXdlci5pbml0KGNvbmZpZy5lbCwgY29uZmlnLm9wdGlvbnMpO1xyXG5cclxuICAvL0luaXQgY29udHJvbHNcclxuICBjb250cm9sSW5pdGlhbGlzZXIoY29uZmlnLm9wdGlvbnMuY29udHJvbHMpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG9yaWdvO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xudmFyIFV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xudmFyIE1vZGFsID0gcmVxdWlyZSgnLi9tb2RhbCcpO1xuXG52YXIgJGFib3V0QnV0dG9uO1xudmFyIGJ1dHRvblRleHQ7XG52YXIgdGl0bGU7XG52YXIgY29udGVudDtcblxuZnVuY3Rpb24gaW5pdChvcHRfb3B0aW9ucykge1xuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xuICBidXR0b25UZXh0ID0gb3B0aW9ucy5idXR0b25UZXh0IHx8ICdPbSBrYXJ0YW4nO1xuICB0aXRsZSA9IG9wdGlvbnMudGl0bGUgfHwgJ09tIGthcnRhbic7XG4gIGNvbnRlbnQgPSBvcHRpb25zLmNvbnRlbnQgfHwgJzxwPjwvcD4nO1xuXG4gIHJlbmRlcigpO1xuICBiaW5kVUlBY3Rpb25zKCk7XG59XG5cbmZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgdmFyIGVsID0gVXRpbHMuY3JlYXRlTGlzdEJ1dHRvbih7XG4gICAgaWQ6ICdvLWFib3V0JyxcbiAgICBpY29uQ2xzOiAnby1pY29uLWZhLWluZm8tY2lyY2xlJyxcbiAgICBzcmM6ICcjZmEtaW5mby1jaXJjbGUnLFxuICAgIHRleHQ6IGJ1dHRvblRleHRcbiAgfSk7XG4gICQoJyNvLW1lbnV0b29scycpLmFwcGVuZChlbCk7XG4gICRhYm91dEJ1dHRvbiA9ICQoJyNvLWFib3V0LWJ1dHRvbicpO1xufVxuXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xuICAkYWJvdXRCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgIE1vZGFsLmNyZWF0ZU1vZGFsKCcjby1tYXAnLCB7XG4gICAgICB0aXRsZTogdGl0bGUsXG4gICAgICBjb250ZW50OiBjb250ZW50XG4gICAgfSk7XG5cbiAgICBNb2RhbC5zaG93TW9kYWwoKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gaW5pdDtcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxuXHJcbnZhciBtYXA7XHJcblxyXG5mdW5jdGlvbiBJbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICB2YXIgYnJlYWtQb2ludCA9IG9wdGlvbnMuYnJlYWtQb2ludCB8fCBbNzY4LCA1MDBdO1xyXG4gIHZhciBhdHRyaWJ1dGlvbjtcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcblxyXG4gIGF0dHJpYnV0aW9uID0gbmV3IG9sLmNvbnRyb2wuQXR0cmlidXRpb24oe1xyXG4gICAgY29sbGFwc2libGU6IGZhbHNlXHJcbiAgfSk7XHJcblxyXG4gIG1hcC5hZGRDb250cm9sKGF0dHJpYnV0aW9uKTtcclxuXHJcbiAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCBjaGVja1NpemUpO1xyXG4gIGNoZWNrU2l6ZSgpO1xyXG5cclxuICBmdW5jdGlvbiBjaGVja1NpemUoKSB7XHJcbiAgICB2YXIgbWFwU2l6ZSA9IG1hcC5nZXRTaXplKCk7XHJcbiAgICB2YXIgY29sbGFwc2VkID0gKG1hcFNpemVbMF0gPD0gYnJlYWtQb2ludFswXSB8fCBtYXBTaXplWzFdIDw9IGJyZWFrUG9pbnRbMV0pO1xyXG4gICAgYXR0cmlidXRpb24uc2V0Q29sbGFwc2libGUoY29sbGFwc2VkKTtcclxuICAgIGF0dHJpYnV0aW9uLnNldENvbGxhcHNlZChjb2xsYXBzZWQpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IEluaXQ7XHJcbiIsIi8vIGhic2Z5IGNvbXBpbGVkIEhhbmRsZWJhcnMgdGVtcGxhdGVcbnZhciBIYW5kbGViYXJzQ29tcGlsZXIgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnNDb21waWxlci50ZW1wbGF0ZSh7XCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCI8c3ZnIHdpZHRoPSczMnB4JyBoZWlnaHQ9JzMycHgnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAwIDEwMCAxMDBcXFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XFxcInhNaWRZTWlkXFxcIiBjbGFzcz1cXFwidWlsLXJpcHBsZVxcXCI+XFxyXFxuICA8cmVjdCB4PVxcXCIwXFxcIiB5PVxcXCIwXFxcIiB3aWR0aD1cXFwiMTAwXFxcIiBoZWlnaHQ9XFxcIjEwMFxcXCIgZmlsbD1cXFwibm9uZVxcXCIgY2xhc3M9XFxcImJrXFxcIj48L3JlY3Q+XFxyXFxuICA8Zz5cXHJcXG4gICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT1cXFwib3BhY2l0eVxcXCIgZHVyPVxcXCIyc1xcXCIgcmVwZWF0Q291bnQ9XFxcImluZGVmaW5pdGVcXFwiIGJlZ2luPVxcXCIwc1xcXCIga2V5VGltZXM9XFxcIjA7MC4zMzsxXFxcIiB2YWx1ZXM9XFxcIjE7MTswXFxcIj48L2FuaW1hdGU+XFxyXFxuICAgICAgPGNpcmNsZSBjeD1cXFwiNTBcXFwiIGN5PVxcXCI1MFxcXCIgcj1cXFwiNDBcXFwiIHN0cm9rZT1cXFwiIzAwMDAwMFxcXCIgZmlsbD1cXFwibm9uZVxcXCIgc3Ryb2tlLXdpZHRoPVxcXCI2XFxcIiBzdHJva2UtbGluZWNhcD1cXFwicm91bmRcXFwiPlxcclxcbiAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT1cXFwiclxcXCIgZHVyPVxcXCIyc1xcXCIgcmVwZWF0Q291bnQ9XFxcImluZGVmaW5pdGVcXFwiIGJlZ2luPVxcXCIwc1xcXCIga2V5VGltZXM9XFxcIjA7MC4zMzsxXFxcIiB2YWx1ZXM9XFxcIjA7MjI7NDRcXFwiPjwvYW5pbWF0ZT5cXHJcXG4gICAgICA8L2NpcmNsZT5cXHJcXG4gIDwvZz5cXHJcXG4gICAgICA8Zz5cXHJcXG4gICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9XFxcIm9wYWNpdHlcXFwiIGR1cj1cXFwiMnNcXFwiIHJlcGVhdENvdW50PVxcXCJpbmRlZmluaXRlXFxcIiBiZWdpbj1cXFwiMXNcXFwiIGtleVRpbWVzPVxcXCIwOzAuMzM7MVxcXCIgdmFsdWVzPVxcXCIxOzE7MFxcXCI+PC9hbmltYXRlPlxcclxcbiAgICAgICAgPGNpcmNsZSBjeD1cXFwiNTBcXFwiIGN5PVxcXCI1MFxcXCIgcj1cXFwiNDBcXFwiIHN0cm9rZT1cXFwiIzAwMFxcXCIgZmlsbD1cXFwibm9uZVxcXCIgc3Ryb2tlLXdpZHRoPVxcXCI2XFxcIiBzdHJva2UtbGluZWNhcD1cXFwicm91bmRcXFwiPlxcclxcbiAgICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPVxcXCJyXFxcIiBkdXI9XFxcIjJzXFxcIiByZXBlYXRDb3VudD1cXFwiaW5kZWZpbml0ZVxcXCIgYmVnaW49XFxcIjFzXFxcIiBrZXlUaW1lcz1cXFwiMDswLjMzOzFcXFwiIHZhbHVlcz1cXFwiMDsyMjs0NFxcXCI+PC9hbmltYXRlPlxcclxcbiAgICAgICAgPC9jaXJjbGU+XFxyXFxuICAgICAgPC9nPlxcclxcbjwvc3ZnPlxcclxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBjb250cm9sSW5pdGlhbGlzZXIgPSBmdW5jdGlvbihjb250cm9scykge1xyXG4gICAgdmFyIGNvbnRyb2xOYW1lLCBjb250cm9sT3B0aW9ucztcclxuICAgIGNvbnRyb2xzLmZvckVhY2goZnVuY3Rpb24oY29udHJvbCkge1xyXG4gICAgICAgIGNvbnRyb2xOYW1lID0gY29udHJvbC5uYW1lO1xyXG4gICAgICAgIGNvbnRyb2xPcHRpb25zID0gY29udHJvbC5vcHRpb25zIHx8IHVuZGVmaW5lZDtcclxuICAgICAgICBpZiAob3JpZ28uY29udHJvbHMuaGFzT3duUHJvcGVydHkoY29udHJvbE5hbWUpKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xPcHRpb25zID8gb3JpZ28uY29udHJvbHNbY29udHJvbE5hbWVdLmluaXQoY29udHJvbE9wdGlvbnMpIDogb3JpZ28uY29udHJvbHNbY29udHJvbE5hbWVdLmluaXQoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gY29udHJvbEluaXRpYWxpc2VyO1xyXG4iLCIgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRhcmdldCwgaXRlbXMsIG9wdGlvbnMpIHtcclxuICB2YXIgZGF0YUF0dHJpYnV0ZSA9ICdkYXRhLScgKyBvcHRpb25zLmRhdGFBdHRyaWJ1dGUgfHwgJ2RlZmF1bHQnO1xyXG4gIHZhciAkdGFyZ2V0ID0gJCgnIycgKyB0YXJnZXQpO1xyXG4gIHZhciBhY3RpdmVJdGVtID0gb3B0aW9ucy5hY3RpdmUgfHwgdW5kZWZpbmVkO1xyXG4gIHZhciBhY3RpdmVDbHMgPSAnby1hY3RpdmUnO1xyXG4gIHZhciB1bDtcclxuICB2YXIgbGkgPSBbXTtcclxuICB2YXIgY2xzID0gJ28tZHJvcGRvd24tbGknO1xyXG4gIHZhciBpY29uID0gdXRpbHMuY3JlYXRlU3ZnKHtcclxuICAgIGhyZWY6ICcjaWNfY2hlY2tfMjRweCcsXHJcbiAgICBjbHM6ICdvLWljb24tMjQnXHJcbiAgfSk7XHJcbiAgcmVuZGVyKCk7XHJcbiAgYWRkTGlzdGVuZXIoKTtcclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpbmRleCkge1xyXG4gICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgIGNsczogY2xzXHJcbiAgICAgIH07XHJcbiAgICAgIHZhciBhY3RpdmUgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdzcGFuJywgaWNvbiwge1xyXG4gICAgICAgIGNsczogJ28taWNvbidcclxuICAgICAgfSk7XHJcbiAgICAgIG9ialtkYXRhQXR0cmlidXRlXSA9IGl0ZW0udmFsdWU7XHJcbiAgICAgIGlmIChpdGVtLnZhbHVlID09PSBhY3RpdmVJdGVtKSB7XHJcbiAgICAgICAgb2JqLmNscyA9IGFjdGl2ZUNscztcclxuICAgICAgfVxyXG4gICAgICBsaVtpbmRleF0gPSB1dGlscy5jcmVhdGVFbGVtZW50KCdsaScsIGl0ZW0ubmFtZSArIGFjdGl2ZSwgb2JqKTtcclxuICAgIH0pO1xyXG4gICAgdWwgPSB1dGlscy5jcmVhdGVFbGVtZW50KCd1bCcsIGxpLmpvaW4oJycpLCB7XHJcbiAgICAgIGNsczogJ28tZHJvcGRvd24nXHJcbiAgICB9KTtcclxuICAgICR0YXJnZXQuYXBwZW5kKHVsKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZExpc3RlbmVyKCkge1xyXG4gICAgJHRhcmdldC5vbignY2xpY2snLCAndWwnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIHZhciAkYWN0aXZlID0gJChlLnRhcmdldCk7XHJcbiAgICAgICR0YXJnZXQudHJpZ2dlcih7XHJcbiAgICAgICAgdHlwZTogJ2NoYW5nZURyb3Bkb3duJyxcclxuICAgICAgICBkYXRhQXR0cmlidXRlOiAkKGUudGFyZ2V0KS5kYXRhKG9wdGlvbnMuZGF0YUF0dHJpYnV0ZSlcclxuICAgICAgfSk7XHJcbiAgICAgIHRvZ2dsZUFjdGl2ZSgkYWN0aXZlKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gdG9nZ2xlQWN0aXZlKCRhY3RpdmUpIHtcclxuICAgICR0YXJnZXQuZmluZCgnbGknKS5yZW1vdmVDbGFzcyhhY3RpdmVDbHMpO1xyXG4gICAgJGFjdGl2ZS5hZGRDbGFzcyhhY3RpdmVDbHMpO1xyXG4gIH1cclxufTtcclxuIiwiIFwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIGVkaXRvclRvb2xiYXIgPSByZXF1aXJlKCcuL2VkaXRvci9lZGl0b3J0b29sYmFyJyk7XHJcblxyXG52YXIgJGVkaXRvckJ1dHRvbjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpbml0OiBJbml0XHJcbiAgfTtcclxufSgpO1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIGVkaXRhYmxlTGF5ZXJzID0gdmlld2VyLmdldExheWVyc0J5UHJvcGVydHkoJ2VkaXRhYmxlJywgdHJ1ZSwgdHJ1ZSk7XHJcbiAgaWYgKGVkaXRhYmxlTGF5ZXJzLmxlbmd0aCkge1xyXG4gICAgb3B0aW9ucy5lZGl0YWJsZUxheWVycyA9IGVkaXRhYmxlTGF5ZXJzO1xyXG4gIH0gIFxyXG4gIG9wdGlvbnMuYXV0b1NhdmUgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdhdXRvU2F2ZScpID8gb3B0aW9ucy5hdXRvU2F2ZSA6IHRydWU7XHJcbiAgb3B0aW9ucy5hdXRvRm9ybSA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2F1dG9Gb3JtJykgPyBvcHRpb25zLmF1dG9Gb3JtIDogZmFsc2U7XHJcbiAgb3B0aW9ucy5jdXJyZW50TGF5ZXIgPSBvcHRpb25zLmRlZmF1bHRMYXllciB8fCBvcHRpb25zLmVkaXRhYmxlTGF5ZXJzWzBdO1xyXG4gIGVkaXRvclRvb2xiYXIuaW5pdChvcHRpb25zKTtcclxuICByZW5kZXIoKTtcclxuICAkZWRpdG9yQnV0dG9uID0gJCgnI28tZWRpdG9yLWJ1dHRvbicpO1xyXG4gIGJpbmRVSUFjdGlvbnMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkZWRpdG9yQnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICQoJy5vLW1hcCcpLmZpcnN0KCkudHJpZ2dlcih7XHJcbiAgICAgIHR5cGU6ICdlbmFibGVJbnRlcmFjdGlvbicsXHJcbiAgICAgIGludGVyYWN0aW9uOiAnZWRpdG9yJ1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLmJsdXIoKTtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICB2YXIgZWwgPSB1dGlscy5jcmVhdGVMaXN0QnV0dG9uKHtcclxuICAgIGlkOiAnby1lZGl0b3InLFxyXG4gICAgaWNvbkNsczogJ28taWNvbi1mYS1wZW5jaWwnLFxyXG4gICAgc3JjOiAnI2ZhLXBlbmNpbCcsXHJcbiAgICB0ZXh0OiAnUmVkaWdlcmEnXHJcbiAgfSk7XHJcbiAgJCgnI28tbWVudXRvb2xzJykuYXBwZW5kKGVsKTtcclxufVxyXG4iLCIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogQ29weXJpZ2h0IDIwMTYgT3JpZ29cclxuICogTGljZW5zZWQgdW5kZXIgQlNEIDItQ2xhdXNlIChodHRwczovL2dpdGh1Yi5jb20vb3JpZ28tbWFwL29yaWdvL2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0KVxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGVkaXRzU3RvcmUgPSByZXF1aXJlKCcuL2VkaXRzc3RvcmUnKSgpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZWRpdERpc3BhdGNoZXInKTtcclxuXHJcbnZhciBmb3JtYXQgPSBuZXcgb2wuZm9ybWF0LkVzcmlKU09OKCk7XHJcbnZhciB1cmxTdWZmaXggPSB7XHJcbiAgdXBkYXRlOiAndXBkYXRlRmVhdHVyZXMnLFxyXG4gIGluc2VydDogJ2FkZEZlYXR1cmVzJyxcclxuICBkZWxldGU6ICdkZWxldGVGZWF0dXJlcydcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSkge1xyXG4gIGFnc1RyYW5zYWN0aW9uKHRyYW5zT2JqLCBsYXllck5hbWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3cml0ZUFnc1RyYW5zYWN0aW9uKGZlYXR1cmVzLCBvcHRpb25zKSB7XHJcbiAgdmFyIGRhdGEgPSB7fTtcclxuXHJcbiAgaWYgKG9wdGlvbnMudHlwZSA9PT0gJ2RlbGV0ZScpIHtcclxuICAgIHZhciBvYmplY3RJZHMgPSBmZWF0dXJlcy5tYXAoZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICByZXR1cm4gZmVhdHVyZS5nZXRJZCgpO1xyXG4gICAgfSk7XHJcbiAgICBkYXRhLm9iamVjdElkcyA9IG9iamVjdElkcy5qb2luKCcsJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHZhciBhZ3NGZWF0dXJlcyA9IGZlYXR1cmVzLm1hcChmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgIHJldHVybiBmb3JtYXQud3JpdGVGZWF0dXJlKGZlYXR1cmUsIHtcclxuICAgICAgICBmZWF0dXJlUHJvamVjdGlvbjogb3B0aW9ucy5wcm9qZWN0aW9uXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgICBkYXRhLmZlYXR1cmVzID0gJ1snICsgYWdzRmVhdHVyZXMgKyAnXSc7XHJcbiAgfVxyXG4gIGRhdGEuZiA9ICdqc29uJztcclxuICByZXR1cm4gZGF0YTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWdzVHJhbnNhY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSkge1xyXG4gIHZhciBwcm9qZWN0aW9uID0gdmlld2VyLmdldFByb2plY3Rpb24oKTtcclxuICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICB2YXIgaWQgPSBsYXllci5nZXQoJ2lkJyk7XHJcbiAgdmFyIHNvdXJjZSA9IHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllci5nZXQoJ3NvdXJjZU5hbWUnKV07XHJcbiAgdmFyIHR5cGVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModHJhbnNPYmopO1xyXG4gIHZhciBjYiA9IHtcclxuICAgIHVwZGF0ZTogdXBkYXRlU3VjY2VzcyxcclxuICAgIGluc2VydDogaW5zZXJ0U3VjY2VzcyxcclxuICAgIGRlbGV0ZTogZGVsZXRlU3VjY2Vzc1xyXG4gIH07XHJcbiAgdHlwZXMuZm9yRWFjaChmdW5jdGlvbih0eXBlKSB7XHJcbiAgICBpZiAodHJhbnNPYmpbdHlwZV0pIHtcclxuICAgICAgdmFyIHVybCA9IHNvdXJjZS51cmwgICsgJy8nICsgaWQgKyAnLycgKyB1cmxTdWZmaXhbdHlwZV07XHJcbiAgICAgIHZhciBkYXRhdCA9IHdyaXRlQWdzVHJhbnNhY3Rpb24odHJhbnNPYmpbdHlwZV0sIHtcclxuICAgICAgICBwcm9qZWN0aW9uOiBwcm9qZWN0aW9uLFxyXG4gICAgICAgIHR5cGU6IHR5cGVcclxuICAgICAgfSk7XHJcbiAgICAgICQuYWpheCh7XHJcbiAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgZGF0YTogZGF0YXQsXHJcbiAgICAgICAgc3VjY2VzczogY2JbdHlwZV0sXHJcbiAgICAgICAgZXJyb3I6IGVycm9yLFxyXG4gICAgICAgIGNvbnRleHQ6IHRoaXNcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGZ1bmN0aW9uIHVwZGF0ZVN1Y2Nlc3MoZGF0YSkge1xyXG4gICAgdmFyIGZlYXR1cmUgPSB0cmFuc09iai51cGRhdGU7XHJcbiAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgaWYgKHJlc3VsdC51cGRhdGVSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZXN1bHQudXBkYXRlUmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uKHVwZGF0ZSwgaW5kZXgpIHtcclxuICAgICAgICAgIGlmICh1cGRhdGUuc3VjY2VzcyAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aHJvd1NlcnZlckVycm9yKHVwZGF0ZS5lcnJvcik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VGZWF0dXJlKHtcclxuICAgICAgICAgICAgICBmZWF0dXJlOiBbZmVhdHVyZVtpbmRleF1dLFxyXG4gICAgICAgICAgICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLFxyXG4gICAgICAgICAgICAgIHN0YXR1czogJ2ZpbmlzaGVkJyxcclxuICAgICAgICAgICAgICBhY3Rpb246ICd1cGRhdGUnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlcnJvcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaW5zZXJ0U3VjY2VzcyhkYXRhKSB7XHJcbiAgICB2YXIgZmVhdHVyZSA9IHRyYW5zT2JqLmluc2VydDtcclxuICAgIHZhciByZXN1bHQgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICBpZiAocmVzdWx0LmFkZFJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJlc3VsdC5hZGRSZXN1bHRzLmZvckVhY2goZnVuY3Rpb24oaW5zZXJ0LCBpbmRleCkge1xyXG4gICAgICAgICAgaWYgKGluc2VydC5zdWNjZXNzICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgIHRocm93U2VydmVyRXJyb3IoaW5zZXJ0LmVycm9yKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUZlYXR1cmUoe1xyXG4gICAgICAgICAgICAgIGZlYXR1cmU6IFtmZWF0dXJlW2luZGV4XV0sXHJcbiAgICAgICAgICAgICAgbGF5ZXJOYW1lOiBsYXllck5hbWUsXHJcbiAgICAgICAgICAgICAgc3RhdHVzOiAnZmluaXNoZWQnLFxyXG4gICAgICAgICAgICAgIGFjdGlvbjogJ2luc2VydCdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGZlYXR1cmVbaW5kZXhdLnNldCgnb2JqZWN0SWQnLGluc2VydC5vYmplY3RJZCk7XHJcbiAgICAgICAgICAgIGZlYXR1cmVbaW5kZXhdLnNldElkKGluc2VydC5vYmplY3RJZCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9yKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkZWxldGVTdWNjZXNzKGRhdGEpIHtcclxuICAgIHZhciBmZWF0dXJlID0gdHJhbnNPYmouZGVsZXRlO1xyXG4gICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIGlmIChyZXN1bHQuZGVsZXRlUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmVzdWx0LmRlbGV0ZVJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbihkZWxldGVkLCBpbmRleCkge1xyXG4gICAgICAgICAgaWYgKGRlbGV0ZWQuc3VjY2VzcyAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aHJvd1NlcnZlckVycm9yKGRlbGV0ZWQuZXJyb3IpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRmVhdHVyZSh7XHJcbiAgICAgICAgICAgICAgZmVhdHVyZTogW2ZlYXR1cmVbaW5kZXhdXSxcclxuICAgICAgICAgICAgICBsYXllck5hbWU6IGxheWVyTmFtZSxcclxuICAgICAgICAgICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXHJcbiAgICAgICAgICAgICAgYWN0aW9uOiAnZGVsZXRlJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXJyb3IoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGVycm9yKGUpIHtcclxuICAgIHZhciBlcnJvck1zZyA9IGUgPyAoZS5zdGF0dXMgKyAnICcgKyBlLnN0YXR1c1RleHQpIDogXCJcIjtcclxuICAgIGFsZXJ0KCdEZXQgaW50csOkZmZhZGUgZXR0IGZlbCBuw6RyIMOkbmRyaW5nYXJuYSBza3VsbGUgc3BhcmFzIHRpbGwgc2VydmVybi4uLjxicj48YnI+JyArXHJcbiAgICAgIGVycm9yTXNnKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRocm93U2VydmVyRXJyb3IoZXJyb3IpIHtcclxuICAgIGFsZXJ0KGVycm9yLmRlc2NyaXB0aW9uICsgJyAoJyArIGVycm9yLmNvZGUgKyAnKScpO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGRyb3BEb3duID0gcmVxdWlyZSgnLi4vZHJvcGRvd24nKTtcclxudmFyIGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL2VkaXRkaXNwYXRjaGVyJyk7XHJcbnZhciBjcmVhdGVFbGVtZW50ID0gcmVxdWlyZSgnLi4vdXRpbHMnKS5jcmVhdGVFbGVtZW50O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkcmF3VG9vbHModG9vbHMsIGRlZmF1bHRMYXllcikge1xyXG4gIHZhciB0b29sTmFtZXMgPSB7XHJcbiAgICBQb2x5Z29uOiAnUG9seWdvbicsXHJcbiAgICBQb2ludDogJ1B1bmt0JyxcclxuICAgIExpbmU6ICdMaW5qZScsXHJcbiAgICBib3g6ICdSZWt0YW5nZWwnXHJcbiAgfTtcclxuICB2YXIgZGVmYXVsdFRvb2xzID0gdG9vbHMgfHwge307XHJcbiAgdmFyIGRyYXdUb29scyA9IHVuZGVmaW5lZDtcclxuICB2YXIgY3VycmVudExheWVyID0gZGVmYXVsdExheWVyO1xyXG4gIHZhciBtYXAgPSB2aWV3ZXIuZ2V0TWFwKCk7XHJcbiAgdmFyIGFjdGl2ZSA9IGZhbHNlO1xyXG4gIHZhciBhY3RpdmVDbHMgPSAnby1hY3RpdmUnO1xyXG4gIHZhciB0YXJnZXQgPSAnZWRpdG9yLXRvb2xiYXItZHJhdy1kcm9wZG93bic7XHJcbiAgcmVuZGVyKCk7XHJcbiAgYWRkTGlzdGVuZXIoKTtcclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICAgdmFyIHBvcG92ZXIgPSBjcmVhdGVFbGVtZW50KCdkaXYnLCAnJywge1xyXG4gICAgICBpZDogdGFyZ2V0LFxyXG4gICAgICBjbHM6ICdvLXBvcG92ZXInXHJcbiAgICB9KTtcclxuICAgICQoJyMnICsgJ28tZWRpdG9yLWRyYXcnKS5hZnRlcihwb3BvdmVyKTtcclxuICAgIHNldEFjdGl2ZShmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhZGREcm9wRG93bihvcHRpb25zKSB7XHJcbiAgICBkcm9wRG93bihvcHRpb25zLnRhcmdldCwgb3B0aW9ucy5zZWxlY3RPcHRpb25zLCB7XHJcbiAgICAgIGRhdGFBdHRyaWJ1dGU6ICdzaGFwZScsXHJcbiAgICAgIGFjdGl2ZTogb3B0aW9ucy5hY3RpdmVUb29sXHJcbiAgICB9KTtcclxuICAgICQoJyMnICsgdGFyZ2V0KS5vbignY2hhbmdlRHJvcGRvd24nLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKGUpO1xyXG4gICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VFZGl0b3JTaGFwZXMoZS5kYXRhQXR0cmlidXRlKTtcclxuICAgICAgY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkTGlzdGVuZXIoKSB7XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlRWRpdCcsIG9uQ2hhbmdlRWRpdCk7XHJcbiAgICAkKGRvY3VtZW50KS5vbigndG9nZ2xlRWRpdCcsIG9uVG9nZ2xlRWRpdCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUpIHtcclxuICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICBpZiAoZHJhd1Rvb2xzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICBhY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICQoJyMnICsgdGFyZ2V0ICsgJyB1bCcpLnJlbW92ZSgpO1xyXG4gICAgICAgIGFkZERyb3BEb3duKGNyZWF0ZURyb3BEb3duT3B0aW9ucygpKTtcclxuICAgICAgICAkKCcjJyArIHRhcmdldCkuYWRkQ2xhc3MoYWN0aXZlQ2xzKTtcclxuICAgICAgICBtYXAub25jZSgnY2xpY2snLCBjbG9zZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAkKCcjJyArIHRhcmdldCkucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xzKTtcclxuICAgICAgbWFwLnVuKCdjbGljaycsIGNsb3NlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNsb3NlKCkge1xyXG4gICAgaWYgKGFjdGl2ZSkge1xyXG4gICAgICBzZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25DaGFuZ2VFZGl0KGUpIHtcclxuICAgIGlmIChlLnRvb2wgPT09ICdkcmF3JyAmJiBlLmFjdGl2ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICBzZXREcmF3VG9vbHMoY3VycmVudExheWVyKTtcclxuICAgICAgc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgfSBlbHNlIGlmIChlLnRvb2wgPT09ICdkcmF3JyAmJiBlLmFjdGl2ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgIH1cclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvblRvZ2dsZUVkaXQoZSkge1xyXG4gICAgaWYgKGUudG9vbCA9PT0gJ2VkaXQnICYmIGUuY3VycmVudExheWVyKSB7XHJcbiAgICAgIGN1cnJlbnRMYXllciA9IGUuY3VycmVudExheWVyO1xyXG4gICAgfVxyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldERyYXdUb29scyhsYXllck5hbWUpIHtcclxuICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmFyIGdlb21ldHJ5VHlwZTtcclxuICAgIGRyYXdUb29scyA9IGxheWVyLmdldCgnZHJhd1Rvb2xzJykgfHwgW107XHJcbiAgICBpZiAobGF5ZXIuZ2V0KCdkcmF3VG9vbHMnKSkge1xyXG4gICAgICBkcmF3VG9vbHMgPSBsYXllci5nZXQoJ2RyYXdUb29scycpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZ2VvbWV0cnlUeXBlID0gbGF5ZXIuZ2V0KCdnZW9tZXRyeVR5cGUnKTtcclxuICAgICAgZHJhd1Rvb2xzID0gZGVmYXVsdFRvb2xzW2dlb21ldHJ5VHlwZV0gPyBkZWZhdWx0VG9vbHNbZ2VvbWV0cnlUeXBlXS5zbGljZSgwKSA6IFtdO1xyXG4gICAgICBkcmF3VG9vbHMudW5zaGlmdChnZW9tZXRyeVR5cGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlRHJvcERvd25PcHRpb25zKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdGFyZ2V0OiB0YXJnZXQsXHJcbiAgICAgIHNlbGVjdE9wdGlvbnM6IHNlbGVjdGlvbk1vZGVsKGRyYXdUb29scyksXHJcbiAgICAgIGFjdGl2ZVRvb2w6IGRyYXdUb29sc1swXVxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNlbGVjdGlvbk1vZGVsKGRyYXdUb29scykge1xyXG4gICAgdmFyIHNlbGVjdE9wdGlvbnMgPSBkcmF3VG9vbHMubWFwKGZ1bmN0aW9uKGRyYXdUb29sKSB7XHJcbiAgICAgIHZhciBvYmogPSB7fTtcclxuICAgICAgb2JqLm5hbWUgPSB0b29sTmFtZXNbZHJhd1Rvb2xdO1xyXG4gICAgICBvYmoudmFsdWUgPSBkcmF3VG9vbDtcclxuICAgICAgcmV0dXJuIG9iajtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHNlbGVjdE9wdGlvbnM7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGVtaXRDaGFuZ2VFZGl0OiBlbWl0Q2hhbmdlRWRpdCxcclxuICBlbWl0Q2hhbmdlRmVhdHVyZTogZW1pdENoYW5nZUZlYXR1cmUsXHJcbiAgZW1pdFRvZ2dsZUVkaXQ6IGVtaXRUb2dnbGVFZGl0LFxyXG4gIGVtaXRFbmFibGVJbnRlcmFjdGlvbjogZW1pdEVuYWJsZUludGVyYWN0aW9uLFxyXG4gIGVtaXRFZGl0c0NoYW5nZTogZW1pdEVkaXRzQ2hhbmdlLFxyXG4gIGVtaXRDaGFuZ2VFZGl0b3JTaGFwZXM6IGVtaXRDaGFuZ2VFZGl0b3JTaGFwZXMsXHJcbiAgZW1pdENoYW5nZU9mZmxpbmVFZGl0czogZW1pdENoYW5nZU9mZmxpbmVFZGl0c1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0Q2hhbmdlRWRpdCh0b29sLCBzdGF0ZSkge1xyXG4gICQuZXZlbnQudHJpZ2dlcih7XHJcbiAgICB0eXBlOiAnY2hhbmdlRWRpdCcsXHJcbiAgICB0b29sOiB0b29sLFxyXG4gICAgYWN0aXZlOiBzdGF0ZVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0Q2hhbmdlRmVhdHVyZShjaGFuZ2UpIHtcclxuICAkLmV2ZW50LnRyaWdnZXIoe1xyXG4gICAgdHlwZTogJ2NoYW5nZUZlYXR1cmUnLFxyXG4gICAgZmVhdHVyZTogY2hhbmdlLmZlYXR1cmUsXHJcbiAgICBsYXllck5hbWU6IGNoYW5nZS5sYXllck5hbWUsXHJcbiAgICBhY3Rpb246IGNoYW5nZS5hY3Rpb24sXHJcbiAgICBzdGF0dXM6IGNoYW5nZS5zdGF0dXMgfHwgJ3BlbmRpbmcnXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRUb2dnbGVFZGl0KHRvb2wsIG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICB2YXIgZSA9IHtcclxuICAgIHR5cGU6ICd0b2dnbGVFZGl0JyxcclxuICAgIHRvb2w6IHRvb2xcclxuICB9O1xyXG4gICQuZXh0ZW5kKGUsIG9wdGlvbnMpO1xyXG4gICQuZXZlbnQudHJpZ2dlcihlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdEVuYWJsZUludGVyYWN0aW9uKCkge1xyXG4gICQuZXZlbnQudHJpZ2dlcih7XHJcbiAgICB0eXBlOiAnZW5hYmxlSW50ZXJhY3Rpb24nLFxyXG4gICAgaW50ZXJhY3Rpb246ICdlZGl0b3InXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRFZGl0c0NoYW5nZShlZGl0cykge1xyXG4gICQuZXZlbnQudHJpZ2dlcih7XHJcbiAgICB0eXBlOiAnZWRpdHNDaGFuZ2UnLFxyXG4gICAgZWRpdHM6IGVkaXRzXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRDaGFuZ2VFZGl0b3JTaGFwZXMoc2hhcGUpIHtcclxuICAkLmV2ZW50LnRyaWdnZXIoe1xyXG4gICAgdHlwZTogJ2VkaXRvclNoYXBlcycsXHJcbiAgICBzaGFwZTogc2hhcGVcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdENoYW5nZU9mZmxpbmVFZGl0cyhlZGl0cywgbGF5ZXJOYW1lKSB7XHJcbiAgJC5ldmVudC50cmlnZ2VyKHtcclxuICAgIHR5cGU6ICdjaGFuZ2VPZmZsaW5lRWRpdHMnLFxyXG4gICAgZWRpdHM6IGVkaXRzLFxyXG4gICAgbGF5ZXJOYW1lOiBsYXllck5hbWVcclxuICB9KTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gY3JlYXRlRm9ybShvYmopIHtcclxuICB2YXIgaWQgPSBvYmouZWxJZC5zbGljZSgxKTtcclxuICB2YXIgY2xzID0gb2JqLmNscyB8fCAnJztcclxuICBjbHMgKz0gaWQ7XHJcbiAgY2xzICs9IG9iai5pc1Zpc2libGUgPyBcIlwiIDogXCIgby1oaWRkZW5cIjtcclxuICB2YXIgbGFiZWwgPSBvYmoudGl0bGU7XHJcbiAgdmFyIHZhbCA9IG9iai5pc1Zpc2libGUgPyBvYmoudmFsIDogJyc7XHJcbiAgdmFyIHR5cGUgPSBvYmoudHlwZTtcclxuICB2YXIgbWF4TGVuZ3RoID0gb2JqLm1heExlbmd0aCA/ICcgbWF4bGVuZ3RoPVwiJyArIG9iai5tYXhMZW5ndGggKyAnXCIgJyA6ICcnO1xyXG4gIHZhciBkcm9wZG93bk9wdGlvbnMgPSBvYmoub3B0aW9ucyB8fCBbXTtcclxuICB2YXIgZWw7XHJcbiAgdmFyIGNoZWNrZWQ7XHJcbiAgdmFyIGZpcnN0T3B0aW9uO1xyXG4gIHN3aXRjaCAodHlwZSkge1xyXG4gICAgY2FzZSAndGV4dCc6XHJcbiAgICAgIGVsID0gJzxkaXY+PGxhYmVsPicgKyBsYWJlbCArICc8L2xhYmVsPjxicj48aW5wdXQgdHlwZT1cInRleHRcIiBpZD1cIicgKyBpZCArICdcIiB2YWx1ZT1cIicgKyB2YWwgKyAnXCInICsgbWF4TGVuZ3RoICsgJz48L2Rpdj4nO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3RleHRhcmVhJzpcclxuICAgICAgZWwgPSAnPGRpdj48bGFiZWw+JyArIGxhYmVsICsgJzwvbGFiZWw+PGJyPjx0ZXh0YXJlYSBpZD1cIicgKyBpZCArICdcIicgKyBtYXhMZW5ndGggKyAncm93cz1cIjNcIj4nICsgdmFsICsgJzwvdGV4dGFyZWE+PC9kaXY+JztcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdjaGVja2JveCc6XHJcbiAgICAgIGNoZWNrZWQgPSB2YWwgPyAnIGNoZWNrZWQnIDogJyc7XHJcbiAgICAgIGVsID0gJzxkaXYgY2xhc3M9XCJvLWZvcm0tY2hlY2tib3hcIj48bGFiZWw+JyArIGxhYmVsICsgJzwvbGFiZWw+PGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGlkPVwiJyArIGlkICsgJ1wiIHZhbHVlPVwiJyArIHZhbCArICdcIicgKyBjaGVja2VkICsgJz48L2Rpdj4nO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2Ryb3Bkb3duJzpcclxuICAgICAgZmlyc3RPcHRpb247XHJcbiAgICAgIGlmICh2YWwpIHtcclxuICAgICAgICBmaXJzdE9wdGlvbiA9ICc8b3B0aW9uIHZhbHVlPVwiJyArIHZhbCArICdcIiBzZWxlY3RlZD4nICsgdmFsICsgJzwvb3B0aW9uPic7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgZmlyc3RPcHRpb24gPSAnPG9wdGlvbiB2YWx1ZT1cIlwiIHNlbGVjdGVkPlbDpGxqPC9vcHRpb24+JztcclxuICAgICAgfVxyXG4gICAgICBlbCA9ICc8ZGl2IGNsYXNzPVwiJyArIGNscyArICdcIj48bGFiZWw+JyArIGxhYmVsICsgJzwvbGFiZWw+PGJyPjxzZWxlY3QgaWQ9JyArIGlkICsgJz4nICsgZmlyc3RPcHRpb247XHJcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZHJvcGRvd25PcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgZWwgKz0gJzxvcHRpb24gdmFsdWU9XCInICsgZHJvcGRvd25PcHRpb25zW2ldICsgJ1wiPicgKyBkcm9wZG93bk9wdGlvbnNbaV0gKyAnPC9vcHRpb24+JztcclxuICAgICAgfVxyXG4gICAgICBlbCArPSAnPC9zZWxlY3Q+PC9kaXY+JztcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdpbWFnZSc6XHJcbiAgICAgIHZhciBpbWFnZUNsYXNzID0gdmFsID8gJycgOiAnby1oaWRkZW4nO1xyXG4gICAgICBlbCA9ICc8ZGl2IGNsYXNzPVwiJyArIGNscyArICdcIj48bGFiZWw+JyArIGxhYmVsICsgJzwvbGFiZWw+PGJyPic7XHJcbiAgICAgIGVsICs9ICc8aW1nIHNyYz1cIicgKyB2YWwgKyAnXCIgaWQ9XCJpbWFnZS11cGxvYWRcIiBjbGFzcz1cIicgKyBpbWFnZUNsYXNzICsgJ1wiLz4nO1xyXG4gICAgICBlbCArPSAnPGlucHV0IHR5cGU9XCJmaWxlXCIgaWQ9XCInICsgaWQgKyAnXCIgdmFsdWU9XCInICsgdmFsICsgJ1wiIGFjY2VwdD1cImltYWdlLypcIj4nO1xyXG4gICAgICBlbCArPSAnPGlucHV0IGlkPVwiby1kZWxldGUtaW1hZ2UtYnV0dG9uXCIgY2xhc3M9XCInICsgaW1hZ2VDbGFzcyArICdcIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJUYSBib3J0IGJpbGRcIj4nO1xyXG4gICAgICBlbCArPSAnPC9kaXY+JztcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG4gIHJldHVybiBlbDtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgbW9kYWwgPSByZXF1aXJlKCcuLi9tb2RhbCcpO1xyXG52YXIgZmVhdHVyZUluZm8gPSByZXF1aXJlKCcuLi9mZWF0dXJlaW5mbycpO1xyXG52YXIgZWRpdHNTdG9yZSA9IHJlcXVpcmUoJy4vZWRpdHNzdG9yZScpKCk7XHJcbnZhciBnZW5lcmF0ZVVVSUQgPSByZXF1aXJlKCcuLi91dGlscy9nZW5lcmF0ZXV1aWQnKTtcclxudmFyIHRyYW5zYWN0aW9uSGFuZGxlciA9IHJlcXVpcmUoJy4vdHJhbnNhY3Rpb25oYW5kbGVyJyk7XHJcbnZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9lZGl0ZGlzcGF0Y2hlcicpO1xyXG52YXIgZWRpdEZvcm0gPSByZXF1aXJlKCcuL2VkaXRmb3JtJyk7XHJcbnZhciBpbWFnZXJlc2l6ZXIgPSByZXF1aXJlKCcuLi91dGlscy9pbWFnZXJlc2l6ZXInKTtcclxudmFyIGdldEltYWdlT3JpZW50YXRpb24gPSByZXF1aXJlKCcuLi91dGlscy9nZXRpbWFnZW9yaWVudGF0aW9uJyk7XHJcbnZhciBzaGFwZXMgPSByZXF1aXJlKCcuL3NoYXBlcycpO1xyXG5cclxudmFyIGVkaXRMYXllcnMgPSB7fTtcclxudmFyIGF1dG9TYXZlID0gdW5kZWZpbmVkO1xyXG52YXIgYXV0b0Zvcm0gPSB1bmRlZmluZWQ7XHJcbnZhciBlZGl0U291cmNlID0gdW5kZWZpbmVkO1xyXG52YXIgZ2VvbWV0cnlUeXBlID0gdW5kZWZpbmVkO1xyXG52YXIgZ2VvbWV0cnlOYW1lID0gdW5kZWZpbmVkO1xyXG52YXIgbWFwID0gdW5kZWZpbmVkO1xyXG52YXIgY3VycmVudExheWVyID0gdW5kZWZpbmVkO1xyXG52YXIgZWRpdGFibGVMYXllcnMgPSB1bmRlZmluZWQ7XHJcbnZhciBhdHRyaWJ1dGVzID0gdW5kZWZpbmVkO1xyXG52YXIgdGl0bGUgPSB1bmRlZmluZWQ7XHJcbnZhciBkcmF3ID0gdW5kZWZpbmVkO1xyXG52YXIgaGFzRHJhdyA9IHVuZGVmaW5lZDtcclxudmFyIGhhc0F0dHJpYnV0ZSA9IHVuZGVmaW5lZDtcclxudmFyIGhhc1NuYXAgPSB1bmRlZmluZWQ7XHJcbnZhciBzZWxlY3QgPSB1bmRlZmluZWQ7XHJcbnZhciBtb2RpZnkgPSB1bmRlZmluZWQ7XHJcbnZhciBzbmFwID0gdW5kZWZpbmVkO1xyXG52YXIgdG9vbHMgPSB1bmRlZmluZWQ7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICBtYXAgPSB2aWV3ZXIuZ2V0TWFwKCk7XHJcbiAgY3VycmVudExheWVyID0gb3B0aW9ucy5jdXJyZW50TGF5ZXI7XHJcbiAgZWRpdGFibGVMYXllcnMgPSBvcHRpb25zLmVkaXRhYmxlTGF5ZXJzO1xyXG4gIHRvb2xzID0gb3B0aW9ucy5kcmF3VG9vbHMgfHwgW107XHJcblxyXG4gIC8vc2V0IGVkaXQgcHJvcGVydGllcyBmb3IgZWRpdGFibGUgbGF5ZXJzXHJcbiAgZWRpdExheWVycyA9IHNldEVkaXRQcm9wcyhvcHRpb25zKTtcclxuICBlZGl0YWJsZUxheWVycy5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2ZXJpZnlMYXllcihsYXllck5hbWUpO1xyXG4gICAgaWYgKGxheWVyTmFtZSA9PT0gY3VycmVudExheWVyICYmIG9wdGlvbnMuaXNBY3RpdmUpIHtcclxuICAgICAgZGlzcGF0Y2hlci5lbWl0RW5hYmxlSW50ZXJhY3Rpb24oKTtcclxuICAgICAgc2V0RWRpdExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGF1dG9TYXZlID0gb3B0aW9ucy5hdXRvU2F2ZTtcclxuICBhdXRvRm9ybSA9IG9wdGlvbnMuYXV0b0Zvcm07XHJcbiAgJChkb2N1bWVudCkub24oJ3RvZ2dsZUVkaXQnLCBvblRvZ2dsZUVkaXQpO1xyXG4gICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VFZGl0Jywgb25DaGFuZ2VFZGl0KTtcclxuICAkKGRvY3VtZW50KS5vbignZWRpdG9yU2hhcGVzJywgb25DaGFuZ2VTaGFwZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEVkaXRMYXllcihsYXllck5hbWUpIHtcclxuICBjdXJyZW50TGF5ZXIgPSBsYXllck5hbWU7XHJcbiAgc2V0SW50ZXJhY3Rpb25zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEludGVyYWN0aW9ucyhkcmF3VHlwZSkge1xyXG4gIHZhciBlZGl0TGF5ZXIgPSBlZGl0TGF5ZXJzW2N1cnJlbnRMYXllcl07XHJcbiAgdmFyIGRyYXdPcHRpb25zO1xyXG4gIGVkaXRTb3VyY2UgPSBlZGl0TGF5ZXIuZ2V0U291cmNlKCk7XHJcbiAgYXR0cmlidXRlcyA9IGVkaXRMYXllci5nZXQoJ2F0dHJpYnV0ZXMnKTtcclxuICB0aXRsZSA9IGVkaXRMYXllci5nZXQoJ3RpdGxlJykgfHwgJ0luZm9ybWF0aW9uJztcclxuICBkcmF3T3B0aW9ucyA9IHtcclxuICAgIHNvdXJjZTogZWRpdFNvdXJjZSxcclxuICAgIHR5cGU6IGVkaXRMYXllci5nZXQoJ2dlb21ldHJ5VHlwZScpLFxyXG4gICAgZ2VvbWV0cnlOYW1lOiBlZGl0TGF5ZXIuZ2V0KCdnZW9tZXRyeU5hbWUnKVxyXG4gIH07XHJcbiAgaWYgKGRyYXdUeXBlKSB7XHJcbiAgICAkLmV4dGVuZChkcmF3T3B0aW9ucywgc2hhcGVzKGRyYXdUeXBlKSk7XHJcbiAgfVxyXG4gIHJlbW92ZUludGVyYWN0aW9ucygpO1xyXG4gIGRyYXcgPSBuZXcgb2wuaW50ZXJhY3Rpb24uRHJhdyhkcmF3T3B0aW9ucyk7XHJcbiAgaGFzRHJhdyA9IGZhbHNlO1xyXG4gIGhhc0F0dHJpYnV0ZSA9IGZhbHNlO1xyXG4gIHNlbGVjdCA9IG5ldyBvbC5pbnRlcmFjdGlvbi5TZWxlY3Qoe1xyXG4gICAgbGF5ZXJzOiBbZWRpdExheWVyXVxyXG4gIH0pO1xyXG4gIG1vZGlmeSA9IG5ldyBvbC5pbnRlcmFjdGlvbi5Nb2RpZnkoe1xyXG4gICAgZmVhdHVyZXM6IHNlbGVjdC5nZXRGZWF0dXJlcygpXHJcbiAgfSk7XHJcbiAgbWFwLmFkZEludGVyYWN0aW9uKHNlbGVjdCk7XHJcbiAgbWFwLmFkZEludGVyYWN0aW9uKG1vZGlmeSk7XHJcbiAgbWFwLmFkZEludGVyYWN0aW9uKGRyYXcpO1xyXG4gIG1vZGlmeS5vbignbW9kaWZ5ZW5kJywgb25Nb2RpZnlFbmQsIHRoaXMpO1xyXG4gIGRyYXcub24oJ2RyYXdlbmQnLCBvbkRyYXdFbmQsIHRoaXMpO1xyXG4gIHNldEFjdGl2ZSgpO1xyXG5cclxuICAvL0lmIHNuYXAgc2hvdWxkIGJlIGFjdGl2ZSB0aGVuIGFkZCBzbmFwIGludGVybmFjdGlvbnMgZm9yIGFsbCBzbmFwIGxheWVyc1xyXG4gIGhhc1NuYXAgPSBlZGl0TGF5ZXIuZ2V0KCdzbmFwJyk7XHJcbiAgaWYgKGhhc1NuYXApIHtcclxuICAgIHZhciBzZWxlY3Rpb25Tb3VyY2UgPSBmZWF0dXJlSW5mby5nZXRTZWxlY3Rpb25MYXllcigpLmdldFNvdXJjZSgpO1xyXG4gICAgdmFyIHNuYXBTb3VyY2VzID0gZWRpdExheWVyLmdldCgnc25hcExheWVycycpID8gZ2V0U25hcFNvdXJjZXMoZWRpdExheWVyLmdldCgnc25hcExheWVycycpKSA6IFtlZGl0TGF5ZXIuZ2V0KCdzb3VyY2UnKV07XHJcbiAgICBzbmFwU291cmNlcy5wdXNoKHNlbGVjdGlvblNvdXJjZSk7XHJcbiAgICBzbmFwID0gYWRkU25hcEludGVyYWN0aW9uKHNuYXBTb3VyY2VzKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZlcmlmeUxheWVyKGxheWVyTmFtZSkge1xyXG4gIGlmICghKGVkaXRMYXllcnNbbGF5ZXJOYW1lXS5nZXQoJ2dlb21ldHJ5VHlwZScpKSkge1xyXG4gICAgYWRkRmVhdHVyZUFkZExpc3RlbmVyKGxheWVyTmFtZSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRHZW9tZXRyeVByb3BzKGxheWVyKSB7XHJcbiAgdmFyIGxheWVyTmFtZSA9IGxheWVyLmdldCgnbmFtZScpO1xyXG4gIGVkaXRMYXllcnNbbGF5ZXJOYW1lXS5zZXQoJ2dlb21ldHJ5VHlwZScsIGxheWVyLmdldFNvdXJjZSgpLmdldEZlYXR1cmVzKClbMF0uZ2V0R2VvbWV0cnkoKS5nZXRUeXBlKCkpO1xyXG4gIGlmIChsYXllck5hbWUgPT09IGN1cnJlbnRMYXllcikge1xyXG4gICAgc2V0RWRpdExheWVyKGxheWVyTmFtZSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRGZWF0dXJlQWRkTGlzdGVuZXIobGF5ZXJOYW1lKSB7XHJcbiAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgbGF5ZXIuZ2V0U291cmNlKCkub25jZSgnYWRkZmVhdHVyZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgIHNldEdlb21ldHJ5UHJvcHMobGF5ZXIpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRFZGl0UHJvcHMob3B0aW9ucykge1xyXG4gIHZhciBpbml0aWFsVmFsdWUgPSB7fTtcclxuICB2YXIgcmVzdWx0ID0gZWRpdGFibGVMYXllcnMucmVkdWNlKGZ1bmN0aW9uKGxheWVyUHJvcHMsIGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2YXIgc25hcCA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3NuYXAnKSA/IG9wdGlvbnMuc25hcCA6IHRydWU7XHJcbiAgICB2YXIgc25hcExheWVycyA9IG9wdGlvbnMuc25hcExheWVycyB8fCBlZGl0YWJsZUxheWVycztcclxuICAgIGxheWVyLnNldCgnc25hcCcsIHNuYXApO1xyXG4gICAgbGF5ZXIuc2V0KCdzbmFwTGF5ZXJzJywgc25hcExheWVycyk7XHJcbiAgICBsYXllclByb3BzW2xheWVyTmFtZV0gPSBsYXllcjtcclxuICAgIHJldHVybiBsYXllclByb3BzO1xyXG4gIH0sIGluaXRpYWxWYWx1ZSk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZnVuY3Rpb24gaXNBY3RpdmUoKSB7XHJcbiAgaWYgKG1vZGlmeSA9PT0gdW5kZWZpbmVkIHx8IHNlbGVjdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25EZWxldGVTZWxlY3RlZCgpIHtcclxuICB2YXIgZmVhdHVyZXMgPSBzZWxlY3QuZ2V0RmVhdHVyZXMoKTtcclxuXHJcbiAgLy8gTWFrZSBzdXJlIGFsbCBmZWF0dXJlcyBhcmUgbG9hZGVkIGluIHRoZSBzb3VyY2VcclxuICBlZGl0U291cmNlID0gZWRpdExheWVyc1tjdXJyZW50TGF5ZXJdLmdldFNvdXJjZSgpO1xyXG4gIGlmIChmZWF0dXJlcy5nZXRMZW5ndGgoKSA9PT0gMSkge1xyXG4gICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlcy5pdGVtKDApO1xyXG4gICAgdmFyIHIgPSBjb25maXJtKCfDhHIgZHUgc8Oka2VyIHDDpSBhdHQgZHUgdmlsbCB0YSBib3J0IGRldCBow6RyIG9iamVrdGV0PycpO1xyXG4gICAgaWYgKHIgPT09IHRydWUpIHtcclxuICAgICAgc2F2ZUZlYXR1cmUoe1xyXG4gICAgICAgIGZlYXR1cmU6IGZlYXR1cmUsXHJcbiAgICAgICAgbGF5ZXJOYW1lOiBjdXJyZW50TGF5ZXIsXHJcbiAgICAgICAgYWN0aW9uOiAnZGVsZXRlJ1xyXG4gICAgICB9KTtcclxuICAgICAgc2VsZWN0LmdldEZlYXR1cmVzKCkuY2xlYXIoKTtcclxuICAgICAgZWRpdFNvdXJjZS5yZW1vdmVGZWF0dXJlKGVkaXRTb3VyY2UuZ2V0RmVhdHVyZUJ5SWQoZmVhdHVyZS5nZXRJZCgpKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvbk1vZGlmeUVuZChldnQpIHtcclxuICB2YXIgZmVhdHVyZSA9IGV2dC5mZWF0dXJlcy5pdGVtKDApO1xyXG4gIHNhdmVGZWF0dXJlKHtcclxuICAgIGZlYXR1cmU6IGZlYXR1cmUsXHJcbiAgICBsYXllck5hbWU6IGN1cnJlbnRMYXllcixcclxuICAgIGFjdGlvbjogJ3VwZGF0ZSdcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25EcmF3RW5kKGV2dCkge1xyXG4gIHZhciBmZWF0dXJlID0gZXZ0LmZlYXR1cmU7XHJcbiAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGN1cnJlbnRMYXllcik7XHJcbiAgdmFyIGF0dHJpYnV0ZXMgPSBnZXREZWZhdWx0VmFsdWVzKGxheWVyLmdldCgnYXR0cmlidXRlcycpKTtcclxuICBmZWF0dXJlLnNldFByb3BlcnRpZXMoYXR0cmlidXRlcyk7XHJcbiAgZmVhdHVyZS5zZXRJZChnZW5lcmF0ZVVVSUQoKSk7XHJcbiAgZWRpdFNvdXJjZS5hZGRGZWF0dXJlKGZlYXR1cmUpO1xyXG4gIHNldEFjdGl2ZSgpO1xyXG4gIGhhc0RyYXcgPSBmYWxzZTtcclxuICBzYXZlRmVhdHVyZSh7XHJcbiAgICBmZWF0dXJlOiBmZWF0dXJlLFxyXG4gICAgbGF5ZXJOYW1lOiBjdXJyZW50TGF5ZXIsXHJcbiAgICBhY3Rpb246ICdpbnNlcnQnXHJcbiAgfSk7XHJcbiAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRWRpdCgnZHJhdycsIGZhbHNlKTtcclxuICBpZiAoYXV0b0Zvcm0pIHtcclxuICAgIGVkaXRBdHRyaWJ1dGVzKGZlYXR1cmUpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY2FuY2VsRHJhdygpIHtcclxuICBzZXRBY3RpdmUoKTtcclxuICBoYXNEcmF3ID0gZmFsc2U7XHJcbiAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRWRpdCgnZHJhdycsIGZhbHNlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25DaGFuZ2VTaGFwZShlKSB7XHJcbiAgc2V0SW50ZXJhY3Rpb25zKGUuc2hhcGUpO1xyXG4gIHN0YXJ0RHJhdygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYW5jZWxBdHRyaWJ1dGUoKSB7XHJcbiAgbW9kYWwuY2xvc2VNb2RhbCgpO1xyXG4gIGRpc3BhdGNoZXIuZW1pdENoYW5nZUVkaXQoJ2F0dHJpYnV0ZScsIGZhbHNlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25BdHRyaWJ1dGVzU2F2ZShmZWF0dXJlLCBhdHRyaWJ1dGVzKSB7XHJcbiAgJCgnI28tc2F2ZS1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICB2YXIgZWRpdEVsID0ge307XHJcbiAgICB2YXIgZmlsZVJlYWRlcjtcclxuICAgIHZhciBpbWFnZURhdGE7XHJcbiAgICB2YXIgaW5wdXQ7XHJcbiAgICB2YXIgZmlsZTtcclxuICAgIHZhciBvcmllbnRhdGlvbjtcclxuXHJcbiAgICAvL1JlYWQgdmFsdWVzIGZyb20gZm9ybVxyXG4gICAgYXR0cmlidXRlcy5mb3JFYWNoKGZ1bmN0aW9uKGF0dHJpYnV0ZSkge1xyXG5cclxuICAgICAgLy9HZXQgdGhlIGlucHV0IGNvbnRhaW5lciBjbGFzc1xyXG4gICAgICB2YXIgY29udGFpbmVyQ2xhc3MgPSAnLicgKyBhdHRyaWJ1dGUuZWxJZC5zbGljZSgxKTtcclxuXHJcbiAgICAgIC8vIElmIGhpZGRlbiBlbGVtZW50IGl0IHNob3VsZCBiZSBleGNsdWRlZFxyXG4gICAgICBpZiAoJChjb250YWluZXJDbGFzcykuaGFzQ2xhc3MoJ28taGlkZGVuJykgPT09IGZhbHNlKSB7XHJcblxyXG4gICAgICAgIC8vQ2hlY2sgaWYgY2hlY2tib3guIElmIGNoZWNrYm94IHJlYWQgc3RhdGUuXHJcbiAgICAgICAgaWYgKCQoYXR0cmlidXRlLmVsSWQpLmF0dHIoJ3R5cGUnKSA9PT0gJ2NoZWNrYm94Jykge1xyXG4gICAgICAgICAgZWRpdEVsW2F0dHJpYnV0ZS5uYW1lXSA9ICQoYXR0cmlidXRlLmVsSWQpLmlzKCc6Y2hlY2tlZCcpID8gMSA6IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1JlYWQgdmFsdWUgZnJvbSBpbnB1dCB0ZXh0LCB0ZXh0YXJlYSBvciBzZWxlY3RcclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgIGVkaXRFbFthdHRyaWJ1dGUubmFtZV0gPSAkKGF0dHJpYnV0ZS5lbElkKS52YWwoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vQ2hlY2sgaWYgZmlsZS4gSWYgZmlsZSwgcmVhZCBhbmQgdHJpZ2dlciByZXNpemVcclxuICAgICAgaWYgKCQoYXR0cmlidXRlLmVsSWQpLmF0dHIoJ3R5cGUnKSA9PT0gJ2ZpbGUnKSB7XHJcbiAgICAgICAgaW5wdXQgPSAkKGF0dHJpYnV0ZS5lbElkKVswXTtcclxuICAgICAgICBmaWxlID0gaW5wdXQuZmlsZXNbMF07XHJcblxyXG4gICAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgICBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGdldEltYWdlT3JpZW50YXRpb24oZmlsZSwgZnVuY3Rpb24ob3JpZW50YXRpb24pIHtcclxuICAgICAgICAgICAgICBpbWFnZXJlc2l6ZXIoZmlsZVJlYWRlci5yZXN1bHQsIGF0dHJpYnV0ZSwgb3JpZW50YXRpb24sIGZ1bmN0aW9uKHJlc2l6ZWQpIHtcclxuICAgICAgICAgICAgICAgIGVkaXRFbFthdHRyaWJ1dGUubmFtZV0gPSByZXNpemVkO1xyXG4gICAgICAgICAgICAgICAgJChkb2N1bWVudCkudHJpZ2dlcignaW1hZ2VyZXNpemVkJyk7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG5cclxuICAgICAgICAgIGZpbGVSZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgZWRpdEVsW2F0dHJpYnV0ZS5uYW1lXSA9ICQoYXR0cmlidXRlLmVsSWQpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoZmlsZVJlYWRlciAmJiBmaWxlUmVhZGVyLnJlYWR5U3RhdGUgPT0gMSkge1xyXG4gICAgICAkKGRvY3VtZW50KS5vbignaW1hZ2VyZXNpemVkJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgYXR0cmlidXRlc1NhdmVIYW5kbGVyKGZlYXR1cmUsIGVkaXRFbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYXR0cmlidXRlc1NhdmVIYW5kbGVyKGZlYXR1cmUsIGVkaXRFbCk7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kYWwuY2xvc2VNb2RhbCgpO1xyXG4gICAgJCgnI28tc2F2ZS1idXR0b24nKS5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGF0dHJpYnV0ZXNTYXZlSGFuZGxlcihmZWF0dXJlLCBmb3JtRWwpIHtcclxuXHJcbiAgLy9nZXQgRE9NIHZhbHVlcyBhbmQgc2V0IGF0dHJpYnV0ZSB2YWx1ZXMgdG8gZmVhdHVyZVxyXG4gIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihhdHRyaWJ1dGUpIHtcclxuICAgIGlmIChmb3JtRWwuaGFzT3duUHJvcGVydHkoYXR0cmlidXRlLm5hbWUpKSB7XHJcbiAgICAgIGZlYXR1cmUuc2V0KGF0dHJpYnV0ZS5uYW1lLCBmb3JtRWxbYXR0cmlidXRlLm5hbWVdKTtcclxuICAgIH1cclxuICB9KTtcclxuICBzYXZlRmVhdHVyZSh7XHJcbiAgICBmZWF0dXJlOiBmZWF0dXJlLFxyXG4gICAgbGF5ZXJOYW1lOiBjdXJyZW50TGF5ZXIsXHJcbiAgICBhY3Rpb246ICd1cGRhdGUnXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUludGVyYWN0aW9ucygpIHtcclxuICBpZiAoaXNBY3RpdmUoKSkge1xyXG4gICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKG1vZGlmeSk7XHJcbiAgICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24oc2VsZWN0KTtcclxuICAgIG1hcC5yZW1vdmVJbnRlcmFjdGlvbihkcmF3KTtcclxuICAgIGlmIChzbmFwKSB7XHJcbiAgICAgIHNuYXAuZm9yRWFjaChmdW5jdGlvbihzbmFwSW50ZXJhY3Rpb24pIHtcclxuICAgICAgICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24oc25hcEludGVyYWN0aW9uKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgbW9kaWZ5ID0gdW5kZWZpbmVkO1xyXG4gICAgc2VsZWN0ID0gdW5kZWZpbmVkO1xyXG4gICAgZHJhdyA9IHVuZGVmaW5lZDtcclxuICAgIHNuYXAgPSB1bmRlZmluZWQ7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzdGFydERyYXcoKSB7XHJcbiAgaWYgKGhhc0RyYXcgIT09IHRydWUgJiYgaXNBY3RpdmUoKSkge1xyXG4gICAgc2V0QWN0aXZlKCdkcmF3Jyk7XHJcbiAgICBoYXNEcmF3ID0gdHJ1ZTtcclxuICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUVkaXQoJ2RyYXcnLCB0cnVlKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZExpc3RlbmVyKCkge1xyXG4gIHZhciBmbiA9IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgJChvYmouZWxEZXBlbmRlbmN5SWQpLm9uKG9iai5ldmVudFR5cGUsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdmFyIGNvbnRhaW5lckNsYXNzID0gJy4nICsgb2JqLmVsSWQuc2xpY2UoMSk7XHJcbiAgICAgIGlmICgkKG9iai5lbERlcGVuZGVuY3lJZCArICgnIG9wdGlvbjpzZWxlY3RlZCcpKS50ZXh0KCkgPT09IG9iai5yZXF1aXJlZFZhbCkge1xyXG4gICAgICAgICQoY29udGFpbmVyQ2xhc3MpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoY29udGFpbmVyQ2xhc3MpLmFkZENsYXNzKCdvLWhpZGRlbicpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBmbjtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkSW1hZ2VMaXN0ZW5lcigpIHtcclxuICB2YXIgZm4gPSBmdW5jdGlvbihvYmopIHtcclxuICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICAgIHZhciBjb250YWluZXJDbGFzcyA9ICcuJyArIG9iai5lbElkLnNsaWNlKDEpO1xyXG4gICAgJChvYmouZWxJZCkub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgJChjb250YWluZXJDbGFzcyArICcgaW1nJykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICAgICQoY29udGFpbmVyQ2xhc3MgKyAnIGlucHV0W3R5cGU9YnV0dG9uXScpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG5cclxuICAgICAgaWYgKHRoaXMuZmlsZXMgJiYgdGhpcy5maWxlc1swXSkge1xyXG4gICAgICAgIGZpbGVSZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICQoY29udGFpbmVyQ2xhc3MgKyAnIGltZycpLmF0dHIoJ3NyYycsIGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZmlsZVJlYWRlci5yZWFkQXNEYXRhVVJMKHRoaXMuZmlsZXNbMF0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKGNvbnRhaW5lckNsYXNzICsgJyBpbnB1dFt0eXBlPWJ1dHRvbl0nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICQob2JqLmVsSWQpLmF0dHIoJ3ZhbHVlJywgJycpO1xyXG4gICAgICAkKGNvbnRhaW5lckNsYXNzICsgJyBpbWcnKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxuICAgICAgJCh0aGlzKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZuO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblRvZ2dsZUVkaXQoZSkge1xyXG4gIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgaWYgKGUudG9vbCA9PT0gJ2RyYXcnKSB7XHJcbiAgICBpZiAoaGFzRHJhdyA9PT0gZmFsc2UpIHtcclxuICAgICAgc2V0SW50ZXJhY3Rpb25zKCk7XHJcbiAgICAgIHN0YXJ0RHJhdygpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY2FuY2VsRHJhdygpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAoZS50b29sID09PSAnYXR0cmlidXRlJykge1xyXG4gICAgaWYgKGhhc0F0dHJpYnV0ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgZWRpdEF0dHJpYnV0ZXMoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhbmNlbEF0dHJpYnV0ZSgpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAoZS50b29sID09PSAnZGVsZXRlJykge1xyXG4gICAgICBvbkRlbGV0ZVNlbGVjdGVkKCk7XHJcbiAgfSBlbHNlIGlmIChlLnRvb2wgPT09ICdlZGl0Jykge1xyXG4gICAgICBzZXRFZGl0TGF5ZXIoZS5jdXJyZW50TGF5ZXIpO1xyXG4gIH0gZWxzZSBpZiAoZS50b29sID09PSAnY2FuY2VsJykge1xyXG4gICAgICByZW1vdmVJbnRlcmFjdGlvbnMoKTtcclxuICB9IGVsc2UgaWYgKGUudG9vbCA9PT0gJ3NhdmUnKSB7XHJcbiAgICAgIHNhdmVGZWF0dXJlcygpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25DaGFuZ2VFZGl0KGUpIHtcclxuICBpZiAoZS50b29sIT09ICdkcmF3JyAmJiBlLmFjdGl2ZSkge1xyXG4gICAgY2FuY2VsRHJhdygpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U25hcFNvdXJjZXMobGF5ZXJzKSB7XHJcbiAgdmFyIHNvdXJjZXMgPSBsYXllcnMubWFwKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICByZXR1cm4gdmlld2VyLmdldExheWVyKGxheWVyKS5nZXRTb3VyY2UoKTtcclxuICB9KTtcclxuXHJcbiAgcmV0dXJuIHNvdXJjZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFNuYXBJbnRlcmFjdGlvbihzb3VyY2VzKSB7XHJcbiAgdmFyIHNuYXBJbnRlcmFjdGlvbnMgPSBbXTtcclxuICBzb3VyY2VzLmZvckVhY2goZnVuY3Rpb24oc291cmNlKSB7XHJcbiAgICB2YXIgaW50ZXJhY3Rpb24gPSBuZXcgb2wuaW50ZXJhY3Rpb24uU25hcCh7XHJcbiAgICAgIHNvdXJjZTogc291cmNlXHJcbiAgICB9KTtcclxuICAgIHNuYXBJbnRlcmFjdGlvbnMucHVzaChpbnRlcmFjdGlvbik7XHJcbiAgICBtYXAuYWRkSW50ZXJhY3Rpb24oaW50ZXJhY3Rpb24pO1xyXG4gIH0pO1xyXG4gIHJldHVybiBzbmFwSW50ZXJhY3Rpb25zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRBY3RpdmUoZWRpdFR5cGUpIHtcclxuICBzd2l0Y2ggKGVkaXRUeXBlKSB7XHJcbiAgICBjYXNlICdtb2RpZnknOlxyXG4gICAgICBkcmF3LnNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICAgIG1vZGlmeS5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgIHNlbGVjdC5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnZHJhdyc6XHJcbiAgICAgIGRyYXcuc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgICBtb2RpZnkuc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgICBzZWxlY3Quc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgICBkcmF3LnNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICAgIGhhc0RyYXcgPSBmYWxzZTtcclxuICAgICAgbW9kaWZ5LnNldEFjdGl2ZSh0cnVlKTtcclxuICAgICAgc2VsZWN0LnNldEFjdGl2ZSh0cnVlKTtcclxuICAgICAgYnJlYWs7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBlZGl0QXR0cmlidXRlcyhmZWF0dXJlKSB7XHJcbiAgdmFyIGF0dHJpYnV0ZU9iamVjdHM7XHJcbiAgdmFyIGZlYXR1cmVzO1xyXG5cclxuICAvL0dldCBhdHRyaWJ1dGVzIGZyb20gdGhlIGNyZWF0ZWQsIG9yIHRoZSBzZWxlY3RlZCwgZmVhdHVyZSBhbmQgZmlsbCBET00gZWxlbWVudHMgd2l0aCB0aGUgdmFsdWVzXHJcbiAgaWYgKGZlYXR1cmUpIHtcclxuICAgIGZlYXR1cmVzID0gbmV3IG9sLkNvbGxlY3Rpb24oKTtcclxuICAgIGZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGZlYXR1cmVzID0gc2VsZWN0LmdldEZlYXR1cmVzKCk7XHJcbiAgfVxyXG4gIGlmIChmZWF0dXJlcy5nZXRMZW5ndGgoKSA9PT0gMSkge1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRWRpdCgnYXR0cmlidXRlJywgdHJ1ZSk7XHJcbiAgICB2YXIgZmVhdHVyZSA9IGZlYXR1cmVzLml0ZW0oMCk7XHJcbiAgICBpZiAoYXR0cmlidXRlcy5sZW5ndGggPiAwKSB7XHJcblxyXG4gICAgICAvL0NyZWF0ZSBhbiBhcnJheSBvZiBkZWZpbmVkIGF0dHJpYnV0ZXMgYW5kIGNvcnJlc3BvbmRpbmcgdmFsdWVzIGZyb20gc2VsZWN0ZWQgZmVhdHVyZVxyXG4gICAgICBhdHRyaWJ1dGVPYmplY3RzID0gYXR0cmlidXRlcy5tYXAoZnVuY3Rpb24oYXR0cmlidXRlT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgICQuZXh0ZW5kKG9iaiwgYXR0cmlidXRlT2JqZWN0KTtcclxuICAgICAgICBvYmoudmFsID0gZmVhdHVyZS5nZXQob2JqLm5hbWUpIHx8ICcnO1xyXG4gICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoJ2NvbnN0cmFpbnQnKSkge1xyXG4gICAgICAgICAgdmFyIGNvbnN0cmFpbnRQcm9wcyA9IG9iai5jb25zdHJhaW50LnNwbGl0KCc6Jyk7XHJcbiAgICAgICAgICBpZiAoY29uc3RyYWludFByb3BzLmxlbmd0aCA9PT0gMykge1xyXG4gICAgICAgICAgICBvYmouZXZlbnRUeXBlID0gY29uc3RyYWludFByb3BzWzBdO1xyXG4gICAgICAgICAgICBvYmouZGVwZW5kZW5jeVZhbCA9IGZlYXR1cmUuZ2V0KGNvbnN0cmFpbnRQcm9wc1sxXSk7XHJcbiAgICAgICAgICAgIG9iai5yZXF1aXJlZFZhbCA9IGNvbnN0cmFpbnRQcm9wc1syXTtcclxuICAgICAgICAgICAgb2JqLmRlcGVuZGVuY3lWYWwgPT09IG9iai5yZXF1aXJlZFZhbCA/IG9iai5pc1Zpc2libGUgPSB0cnVlIDogb2JqLmlzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBvYmouYWRkTGlzdGVuZXIgPSBhZGRMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICBvYmouZWxJZCA9ICcjaW5wdXQtJyArIG9iai5uYW1lICsgJy0nICsgb2JqLnJlcXVpcmVkVmFsO1xyXG4gICAgICAgICAgICBvYmouZWxEZXBlbmRlbmN5SWQgPSAnI2lucHV0LScgKyBjb25zdHJhaW50UHJvcHNbMV07XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbGVydCgnVmlsbGtvciB2ZXJrYXIgaW50ZSB2YXJhIHLDpHR0IGZvcm11bGVyYXQuIFZpbGxrb3IgZm9ybXVsZXJhcyBlbmxpZ3QgcHJpbmNpcGVuIGNoYW5nZTphdHRyaWJ1dGU6dmFsdWUnKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKG9iai50eXBlID09PSAnaW1hZ2UnKSB7XHJcbiAgICAgICAgICBvYmouaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgIG9iai5lbElkID0gJyNpbnB1dC0nICsgb2JqLm5hbWU7XHJcbiAgICAgICAgICBvYmouYWRkTGlzdGVuZXIgPSBhZGRJbWFnZUxpc3RlbmVyKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIG9iai5pc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgb2JqLmVsSWQgPSAnI2lucHV0LScgKyBvYmoubmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG9iai5mb3JtRWxlbWVudCA9IGVkaXRGb3JtKG9iaik7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG4gICAgdmFyIGZvcm1FbGVtZW50ID0gYXR0cmlidXRlT2JqZWN0cy5yZWR1Y2UoZnVuY3Rpb24ocHJldiwgbmV4dCkge1xyXG4gICAgICByZXR1cm4gcHJldiArIG5leHQuZm9ybUVsZW1lbnQ7XHJcbiAgICB9LCAnJyk7XHJcbiAgICB2YXIgZm9ybSA9ICc8Zm9ybT4nICsgZm9ybUVsZW1lbnQgKyAnPGJyPjxkaXYgY2xhc3M9XCJvLWZvcm0tc2F2ZVwiPjxpbnB1dCBpZD1cIm8tc2F2ZS1idXR0b25cIiB0eXBlPVwiYnV0dG9uXCIgdmFsdWU9XCJPa1wiPjwvaW5wdXQ+PC9kaXY+PC9mb3JtPic7XHJcbiAgICBtb2RhbC5jcmVhdGVNb2RhbCgnI28tbWFwJywge1xyXG4gICAgICB0aXRsZTogdGl0bGUsXHJcbiAgICAgIGNvbnRlbnQ6IGZvcm0sXHJcbiAgICAgIHN0YXRpYzogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBtb2RhbC5zaG93TW9kYWwoKTtcclxuXHJcbiAgICBhdHRyaWJ1dGVPYmplY3RzLmZvckVhY2goZnVuY3Rpb24ob2JqKSB7XHJcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoJ2FkZExpc3RlbmVyJykpIHtcclxuICAgICAgICBvYmouYWRkTGlzdGVuZXIob2JqKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgb25BdHRyaWJ1dGVzU2F2ZShmZWF0dXJlLCBhdHRyaWJ1dGVPYmplY3RzKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhdmVGZWF0dXJlKGNoYW5nZSkge1xyXG4gIGRpc3BhdGNoZXIuZW1pdENoYW5nZUZlYXR1cmUoY2hhbmdlKTtcclxuICBpZiAoYXV0b1NhdmUpIHtcclxuICAgIHNhdmVGZWF0dXJlcyhjaGFuZ2UpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2F2ZUZlYXR1cmVzKCkge1xyXG4gIHZhciBlZGl0cyA9IGVkaXRzU3RvcmUuZ2V0RWRpdHMoKTtcclxuICB2YXIgbGF5ZXJOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGVkaXRzKTtcclxuICBsYXllck5hbWVzLmZvckVhY2goZnVuY3Rpb24obGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgdHJhbnNhY3Rpb24gPSB7XHJcbiAgICAgIGluc2VydDogbnVsbCxcclxuICAgICAgZGVsZXRlOiBudWxsLFxyXG4gICAgICB1cGRhdGU6IG51bGxcclxuICAgIH07XHJcbiAgICB2YXIgZWRpdFR5cGVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZWRpdHNbbGF5ZXJOYW1lXSk7XHJcbiAgICBlZGl0VHlwZXMuZm9yRWFjaChmdW5jdGlvbihlZGl0VHlwZSkge1xyXG4gICAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgICAgdmFyIGlkcyA9IGVkaXRzW2xheWVyTmFtZV1bZWRpdFR5cGVdO1xyXG4gICAgICB2YXIgZmVhdHVyZXM7XHJcbiAgICAgIGZlYXR1cmVzID0gZ2V0RmVhdHVyZXNCeUlkcyhlZGl0VHlwZSwgbGF5ZXIsIGlkcyk7XHJcbiAgICAgIGlmIChmZWF0dXJlcy5sZW5ndGgpIHtcclxuICAgICAgICB0cmFuc2FjdGlvbltlZGl0VHlwZV0gPSBmZWF0dXJlcztcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdHJhbnNhY3Rpb25IYW5kbGVyKHRyYW5zYWN0aW9uLCBsYXllck5hbWUpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGZWF0dXJlc0J5SWRzKHR5cGUsIGxheWVyLCBpZHMpIHtcclxuICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0U291cmNlKCk7XHJcbiAgdmFyIGZlYXR1cmVzID0gW107XHJcbiAgaWYgKHR5cGUgPT09ICdkZWxldGUnKSB7XHJcbiAgICBpZHMuZm9yRWFjaChmdW5jdGlvbihpZCkge1xyXG4gICAgICB2YXIgZHVtbXkgPSBuZXcgb2wuRmVhdHVyZSgpO1xyXG4gICAgICBkdW1teS5zZXRJZChpZCk7XHJcbiAgICAgIGZlYXR1cmVzLnB1c2goZHVtbXkpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGlkcy5mb3JFYWNoKGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgIHZhciBmZWF0dXJlO1xyXG4gICAgICBpZiAoc291cmNlLmdldEZlYXR1cmVCeUlkKGlkKSkge1xyXG4gICAgICAgICBmZWF0dXJlID0gc291cmNlLmdldEZlYXR1cmVCeUlkKGlkKTtcclxuICAgICAgICAgZmVhdHVyZS51bnNldCgnYmJveCcpO1xyXG4gICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBmZWF0dXJlcztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RGVmYXVsdFZhbHVlcyhhdHRyaWJ1dGVzKSB7XHJcbiAgcmV0dXJuIGF0dHJpYnV0ZXMuZmlsdGVyKGZ1bmN0aW9uKGF0dHJpYnV0ZSkge1xyXG4gICAgICBpZiAoYXR0cmlidXRlLm5hbWUgJiYgYXR0cmlidXRlLmRlZmF1bHRWYWx1ZSkge1xyXG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGU7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgICAucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cnIpIHtcclxuICAgICAgcHJldltjdXJyLm5hbWVdID0gY3Vyci5kZWZhdWx0VmFsdWVcclxuICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICB9LHt9KTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGRyb3BEb3duID0gcmVxdWlyZSgnLi4vZHJvcGRvd24nKTtcclxudmFyIGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL2VkaXRkaXNwYXRjaGVyJyk7XHJcbnZhciBjcmVhdGVFbGVtZW50ID0gcmVxdWlyZSgnLi4vdXRpbHMnKS5jcmVhdGVFbGVtZW50O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlZGl0b3JMYXllcnMoZWRpdGFibGVMYXllcnMsIG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIGFjdGl2ZSA9IGZhbHNlO1xyXG4gIHZhciBhY3RpdmVDbHMgPSAnby1hY3RpdmUnO1xyXG4gIHZhciB0YXJnZXQgPSAnZWRpdG9yLXRvb2xiYXItbGF5ZXJzLWRyb3Bkb3duJztcclxuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICB0YXJnZXQ6IHRhcmdldCxcclxuICAgIHNlbGVjdE9wdGlvbnM6IHNlbGVjdGlvbk1vZGVsKGVkaXRhYmxlTGF5ZXJzKSxcclxuICAgIGFjdGl2ZUxheWVyOiBlZGl0YWJsZUxheWVyc1swXVxyXG4gIH07XHJcbiAgdmFyIHJlbmRlck9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0T3B0aW9ucywgb3B0X29wdGlvbnMpO1xyXG5cclxuICByZW5kZXIocmVuZGVyT3B0aW9ucyk7XHJcbiAgYWRkTGlzdGVuZXIodGFyZ2V0KTtcclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyKG9wdGlvbnMpIHtcclxuICAgIHZhciBwb3BvdmVyID0gY3JlYXRlRWxlbWVudCgnZGl2JywgJycsIHtcclxuICAgICAgaWQ6IG9wdGlvbnMudGFyZ2V0LFxyXG4gICAgICBjbHM6ICdvLXBvcG92ZXInXHJcbiAgICB9KTtcclxuICAgICQoJyMnICsgJ28tZWRpdG9yLWxheWVycycpLmFmdGVyKHBvcG92ZXIpO1xyXG4gICAgZHJvcERvd24ob3B0aW9ucy50YXJnZXQsIG9wdGlvbnMuc2VsZWN0T3B0aW9ucywge1xyXG4gICAgICBkYXRhQXR0cmlidXRlOiAnbGF5ZXInLFxyXG4gICAgICBhY3RpdmU6IG9wdGlvbnMuYWN0aXZlTGF5ZXJcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkTGlzdGVuZXIoKSB7XHJcbiAgICAkKCcjJyArIHRhcmdldCkub24oJ2NoYW5nZURyb3Bkb3duJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbihlKTtcclxuICAgICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgICAgZGlzcGF0Y2hlci5lbWl0VG9nZ2xlRWRpdCgnZWRpdCcsIHtcclxuICAgICAgICBjdXJyZW50TGF5ZXI6IGUuZGF0YUF0dHJpYnV0ZVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgJChkb2N1bWVudCkub24oJ3RvZ2dsZUVkaXQnLCBvblRvZ2dsZUVkaXQpO1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZUVkaXQnLCBvbkNoYW5nZUVkaXQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25Ub2dnbGVFZGl0KGUpIHtcclxuICAgIGlmIChlLnRvb2wgPT09ICdsYXllcnMnKSB7XHJcbiAgICAgIGlmIChhY3RpdmUpIHtcclxuICAgICAgICBzZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNldEFjdGl2ZSh0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uQ2hhbmdlRWRpdChlKSB7XHJcbiAgICBpZiAoZS50b29sICE9PSAnbGF5ZXJzJyAmJiBlLmFjdGl2ZSA9PT0gdHJ1ZSkge1xyXG4gICAgICBzZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgfVxyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldEFjdGl2ZShzdGF0ZSkge1xyXG4gICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgIGFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICQoJyMnICsgdGFyZ2V0KS5hZGRDbGFzcyhhY3RpdmVDbHMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICQoJyMnICsgdGFyZ2V0KS5yZW1vdmVDbGFzcyhhY3RpdmVDbHMpO1xyXG4gICAgfVxyXG4gICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRWRpdCgnbGF5ZXJzJywgYWN0aXZlKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNsb3NlKCkge1xyXG4gICAgaWYgKGFjdGl2ZSkge1xyXG4gICAgICBzZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VsZWN0aW9uTW9kZWwobGF5ZXJOYW1lcykge1xyXG4gICAgdmFyIHNlbGVjdE9wdGlvbnMgPSBsYXllck5hbWVzLm1hcChmdW5jdGlvbihsYXllck5hbWUpIHtcclxuICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICBvYmoubmFtZSA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpLmdldCgndGl0bGUnKTtcclxuICAgICAgb2JqLnZhbHVlID0gbGF5ZXJOYW1lO1xyXG4gICAgICByZXR1cm4gb2JqO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc2VsZWN0T3B0aW9ucztcclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGVkaXRvcnRlbXBsYXRlID0gcmVxdWlyZShcIi4uL3RlbXBsYXRlcy9lZGl0b3J0b29sYmFyLnRlbXBsYXRlLmhhbmRsZWJhcnNcIik7XHJcbnZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9lZGl0ZGlzcGF0Y2hlcicpO1xyXG52YXIgZWRpdEhhbmRsZXIgPSByZXF1aXJlKCcuL2VkaXRoYW5kbGVyJyk7XHJcbnZhciBlZGl0b3JMYXllcnMgPSByZXF1aXJlKCcuL2VkaXRvcmxheWVycycpO1xyXG52YXIgZHJhd1Rvb2xzID0gcmVxdWlyZSgnLi9kcmF3dG9vbHMnKTtcclxuXHJcbnZhciBhY3RpdmVDbGFzcyA9ICdvLWNvbnRyb2wtYWN0aXZlJztcclxudmFyIGRpc2FibGVDbGFzcyA9ICdvLWRpc2FibGVkJztcclxudmFyIGN1cnJlbnRMYXllciA9IHVuZGVmaW5lZDtcclxudmFyIGVkaXRhYmxlTGF5ZXJzID0gdW5kZWZpbmVkO1xyXG52YXIgJGVkaXRBdHRyaWJ1dGUgPSB1bmRlZmluZWQ7XHJcbnZhciAkZWRpdERyYXcgPSB1bmRlZmluZWQ7XHJcbnZhciAkZWRpdERlbGV0ZSA9IHVuZGVmaW5lZDtcclxudmFyICRlZGl0TGF5ZXJzID0gdW5kZWZpbmVkO1xyXG52YXIgJGVkaXRTYXZlID0gdW5kZWZpbmVkO1xyXG52YXIgJGVkaXRDbG9zZSA9IHVuZGVmaW5lZDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpbml0OiBJbml0XHJcbiAgfTtcclxufSgpXHJcblxyXG5mdW5jdGlvbiBJbml0KG9wdGlvbnMpIHtcclxuICBjdXJyZW50TGF5ZXIgPSBvcHRpb25zLmN1cnJlbnRMYXllcjtcclxuICBlZGl0YWJsZUxheWVycyA9IG9wdGlvbnMuZWRpdGFibGVMYXllcnM7XHJcblxyXG4gIGVkaXRIYW5kbGVyKG9wdGlvbnMpO1xyXG4gIHJlbmRlcigpO1xyXG4gIGVkaXRvckxheWVycyhlZGl0YWJsZUxheWVycywge1xyXG4gICAgYWN0aXZlTGF5ZXI6IGN1cnJlbnRMYXllclxyXG4gIH0pO1xyXG4gIGRyYXdUb29scyhvcHRpb25zLmRyYXdUb29scywgY3VycmVudExheWVyKTtcclxuXHJcbiAgJChkb2N1bWVudCkub24oJ2VuYWJsZUludGVyYWN0aW9uJywgb25FbmFibGVJbnRlcmFjdGlvbik7XHJcbiAgJChkb2N1bWVudCkub24oJ2NoYW5nZUVkaXQnLCBvbkNoYW5nZUVkaXQpO1xyXG4gICQoZG9jdW1lbnQpLm9uKCdlZGl0c0NoYW5nZScsIHRvZ2dsZVNhdmUpO1xyXG5cclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcblxyXG4gIGlmIChvcHRpb25zLmlzQWN0aXZlKSB7XHJcbiAgICBzZXRBY3RpdmUodHJ1ZSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgJChcIiNvLXRvb2xzLWJvdHRvbVwiKS5hcHBlbmQoZWRpdG9ydGVtcGxhdGUoKSk7XHJcbiAgJGVkaXRBdHRyaWJ1dGUgPSAkKCcjby1lZGl0b3ItYXR0cmlidXRlJyk7XHJcbiAgJGVkaXREcmF3ID0gJCgnI28tZWRpdG9yLWRyYXcnKTtcclxuICAkZWRpdERlbGV0ZSA9ICQoJyNvLWVkaXRvci1kZWxldGUnKTtcclxuICAkZWRpdExheWVycyA9ICQoJyNvLWVkaXRvci1sYXllcnMnKTtcclxuICAkZWRpdFNhdmUgPSAkKCcjby1lZGl0b3Itc2F2ZScpO1xyXG4gICRlZGl0Q2xvc2UgPSAkKCcjby1lZGl0b3ItY2xvc2UnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgJGVkaXREcmF3Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGRpc3BhdGNoZXIuZW1pdFRvZ2dsZUVkaXQoJ2RyYXcnKTtcclxuICAgICRlZGl0RHJhdy5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfSk7XHJcbiAgJGVkaXRBdHRyaWJ1dGUub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0VG9nZ2xlRWRpdCgnYXR0cmlidXRlJyk7XHJcbiAgICAkZWRpdEF0dHJpYnV0ZS5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbiAgJGVkaXREZWxldGUub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0VG9nZ2xlRWRpdCgnZGVsZXRlJyk7XHJcbiAgICAkZWRpdERlbGV0ZS5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbiAgJGVkaXRMYXllcnMub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0VG9nZ2xlRWRpdCgnbGF5ZXJzJyk7XHJcbiAgICAkZWRpdExheWVycy5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbiAgJGVkaXRTYXZlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGRpc3BhdGNoZXIuZW1pdFRvZ2dsZUVkaXQoJ3NhdmUnKTtcclxuICAgICRlZGl0U2F2ZS5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbiAgJGVkaXRDbG9zZS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAkKCcuby1tYXAnKS5maXJzdCgpLnRyaWdnZXIoe1xyXG4gICAgICB0eXBlOiAnZW5hYmxlSW50ZXJhY3Rpb24nLFxyXG4gICAgICBpbnRlcmFjdGlvbjogJ2ZlYXR1cmVJbmZvJ1xyXG4gICAgfSk7XHJcbiAgICAkZWRpdENsb3NlLmJsdXIoKTtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uRW5hYmxlSW50ZXJhY3Rpb24oZSkge1xyXG4gIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgaWYgKGUuaW50ZXJhY3Rpb24gPT09ICdlZGl0b3InKSB7XHJcbiAgICBzZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRUb2dnbGVFZGl0KCdlZGl0Jywge1xyXG4gICAgICBjdXJyZW50TGF5ZXI6IGN1cnJlbnRMYXllclxyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRUb2dnbGVFZGl0KCdjYW5jZWwnKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEFjdGl2ZShzdGF0ZSkge1xyXG4gIGlmIChzdGF0ZSA9PT0gdHJ1ZSkge1xyXG4gICAgJCgnI28tZWRpdG9yLXRvb2xiYXInKS5yZW1vdmVDbGFzcygnby1oaWRkZW4nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgJCgnI28tZWRpdG9yLXRvb2xiYXInKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQ2hhbmdlRWRpdChlKSB7XHJcbiAgaWYgKGUudG9vbCA9PT0gJ2RyYXcnKSB7XHJcbiAgICBpZiAoZS5hY3RpdmUgPT09IGZhbHNlKSB7XHJcbiAgICAgICRlZGl0RHJhdy5yZW1vdmVDbGFzcyhhY3RpdmVDbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkZWRpdERyYXcuYWRkQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoZS50b29sID09PSAnbGF5ZXJzJykge1xyXG4gICAgaWYgKGUuYWN0aXZlID09PSBmYWxzZSkge1xyXG4gICAgICAkZWRpdExheWVycy5yZW1vdmVDbGFzcyhhY3RpdmVDbGFzcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkZWRpdExheWVycy5hZGRDbGFzcyhhY3RpdmVDbGFzcyk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChlLmFjdGl2ZSkge1xyXG4gICAgJGVkaXRMYXllcnMucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlU2F2ZShlKSB7XHJcbiAgaWYgKGUuZWRpdHMpIHtcclxuICAgIGlmICgkZWRpdFNhdmUuaGFzQ2xhc3MoZGlzYWJsZUNsYXNzKSkge1xyXG4gICAgICAkZWRpdFNhdmUucmVtb3ZlQ2xhc3MoZGlzYWJsZUNsYXNzKTtcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgJGVkaXRTYXZlLmFkZENsYXNzKGRpc2FibGVDbGFzcyk7XHJcbiAgfVxyXG59XHJcbiIsInZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZWRpdGRpc3BhdGNoZXInKTtcclxuXHJcbnZhciBlZGl0c1N0b3JlID0gZnVuY3Rpb24gZmVhdHVyZVN0b3JlKCkge1xyXG4gIHZhciBlZGl0cyA9IHt9O1xyXG5cclxuICAkKGRvY3VtZW50KS5vbignY2hhbmdlRmVhdHVyZScsIGZlYXR1cmVDaGFuZ2UpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZ2V0RWRpdHM6IGdldEVkaXRzLFxyXG4gICAgaGFzRmVhdHVyZTogaGFzRmVhdHVyZVxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIGFkZEVkaXQoZSkge1xyXG4gICAgaWYgKGUuYWN0aW9uID09PSAnaW5zZXJ0Jykge1xyXG4gICAgICBhZGRGZWF0dXJlKCdpbnNlcnQnLCBlLmZlYXR1cmUsIGUubGF5ZXJOYW1lKTtcclxuICAgIH0gZWxzZSBpZiAoZS5hY3Rpb24gPT09ICd1cGRhdGUnKSB7XHJcbiAgICAgIGlmIChoYXNGZWF0dXJlKCdpbnNlcnQnLCBlLmZlYXR1cmUsIGUubGF5ZXJOYW1lKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICBhZGRGZWF0dXJlKCd1cGRhdGUnLCBlLmZlYXR1cmUsIGUubGF5ZXJOYW1lKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIGlmIChlLmFjdGlvbiA9PT0gJ2RlbGV0ZScpIHtcclxuICAgICAgaWYgKHJlbW92ZUZlYXR1cmUoJ2luc2VydCcsIGUuZmVhdHVyZSwgZS5sYXllck5hbWUpID09PSBmYWxzZSkge1xyXG4gICAgICAgIHJlbW92ZUZlYXR1cmUoJ3VwZGF0ZScsIGUuZmVhdHVyZSwgZS5sYXllck5hbWUpO1xyXG4gICAgICAgIGFkZEZlYXR1cmUoJ2RlbGV0ZScsIGUuZmVhdHVyZSwgZS5sYXllck5hbWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoaGFzRWRpdHMoKSA9PT0gdHJ1ZSkge1xyXG4gICAgICBkaXNwYXRjaGVyLmVtaXRFZGl0c0NoYW5nZSgxKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRpc3BhdGNoZXIuZW1pdEVkaXRzQ2hhbmdlKDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlRWRpdChlKSB7XHJcbiAgICBpZiAoZS5mZWF0dXJlLmxlbmd0aCkge1xyXG4gICAgICBlLmZlYXR1cmUuZm9yRWFjaChmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgICAgcmVtb3ZlRmVhdHVyZShlLmFjdGlvbiwgZmVhdHVyZSwgZS5sYXllck5hbWUpXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGhhc0VkaXRzKCkgPT09IGZhbHNlKSB7XHJcbiAgICAgIGRpc3BhdGNoZXIuZW1pdEVkaXRzQ2hhbmdlKDApO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0RWRpdHMoKSB7XHJcbiAgICByZXR1cm4gZWRpdHM7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBmZWF0dXJlQ2hhbmdlKGUpIHtcclxuICAgIGlmIChlLnN0YXR1cyA9PT0gJ3BlbmRpbmcnKSB7XHJcbiAgICAgIGFkZEVkaXQoZSk7XHJcbiAgICB9IGVsc2UgaWYgKGUuc3RhdHVzID09PSAnZmluaXNoZWQnKSB7XHJcbiAgICAgIHJlbW92ZUVkaXQoZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYXNGZWF0dXJlKHR5cGUsIGZlYXR1cmUsIGxheWVyTmFtZSkge1xyXG4gICAgaWYgKGVkaXRzLmhhc093blByb3BlcnR5KGxheWVyTmFtZSkpIHtcclxuICAgICAgaWYgKGVkaXRzW2xheWVyTmFtZV1bdHlwZV0uaW5kZXhPZihmZWF0dXJlLmdldElkKCkpID4gLTEpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkRmVhdHVyZSh0eXBlLCBmZWF0dXJlLCBsYXllck5hbWUpIHtcclxuICAgIGlmIChlZGl0cy5oYXNPd25Qcm9wZXJ0eShsYXllck5hbWUpID09PSBmYWxzZSkge1xyXG4gICAgICBlZGl0c1tsYXllck5hbWVdID0gY3JlYXRlRWRpdHNPYmooKTtcclxuICAgIH1cclxuICAgIGlmIChoYXNGZWF0dXJlKHR5cGUsIGZlYXR1cmUsIGxheWVyTmFtZSkgPT09IGZhbHNlKSB7XHJcbiAgICAgIGVkaXRzW2xheWVyTmFtZV1bdHlwZV0ucHVzaChmZWF0dXJlLmdldElkKCkpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlRmVhdHVyZSh0eXBlLCBmZWF0dXJlLCBsYXllck5hbWUpIHtcclxuICAgIHZhciBpbmRleCA9IDA7XHJcbiAgICBpZiAoZWRpdHMuaGFzT3duUHJvcGVydHkobGF5ZXJOYW1lKSkge1xyXG4gICAgICBpbmRleCA9IGVkaXRzW2xheWVyTmFtZV1bdHlwZV0uaW5kZXhPZihmZWF0dXJlLmdldElkKCkpO1xyXG4gICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgIGVkaXRzW2xheWVyTmFtZV1bdHlwZV0uc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICBpc0ZpbmlzaGVkKGxheWVyTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzRmluaXNoZWQobGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgZWRpdFR5cGVzO1xyXG4gICAgdmFyIGZpbmlzaGVkID0gdHJ1ZTtcclxuICAgIGlmIChlZGl0cy5oYXNPd25Qcm9wZXJ0eShsYXllck5hbWUpKSB7XHJcbiAgICAgIGVkaXRUeXBlcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGVkaXRzW2xheWVyTmFtZV0pO1xyXG4gICAgICBlZGl0VHlwZXMuZm9yRWFjaChmdW5jdGlvbihlZGl0VHlwZSkge1xyXG4gICAgICAgIGlmIChlZGl0c1tsYXllck5hbWVdW2VkaXRUeXBlXS5sZW5ndGgpIHtcclxuICAgICAgICAgIGZpbmlzaGVkID0gZmFsc2U7XHJcbiAgICAgICAgICByZXR1cm4gZmluaXNoZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgaWYgKGZpbmlzaGVkKSB7XHJcbiAgICAgICAgZGVsZXRlIGVkaXRzW2xheWVyTmFtZV07XHJcbiAgICAgICAgcmV0dXJuIGZpbmlzaGVkO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmluaXNoZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVFZGl0c09iaigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVwZGF0ZTogW10sXHJcbiAgICAgIGluc2VydDogW10sXHJcbiAgICAgIGRlbGV0ZTogW11cclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGhhc0VkaXRzKCkge1xyXG4gICAgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGVkaXRzKS5sZW5ndGgpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGVkaXRzU3RvcmU7XHJcbiIsInZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9lZGl0ZGlzcGF0Y2hlcicpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0cmFuc09iaiwgbGF5ZXJOYW1lKSB7XHJcbiAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlT2ZmbGluZUVkaXRzKHRyYW5zT2JqLCBsYXllck5hbWUpO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkcmF3VHlwZSkge1xyXG4gIHZhciB0eXBlcyA9IHtcclxuICAgIGJveDoge1xyXG4gICAgICB0eXBlOiAnQ2lyY2xlJyxcclxuICAgICAgZ2VvbWV0cnlGdW5jdGlvbjogb2wuaW50ZXJhY3Rpb24uRHJhdy5jcmVhdGVCb3goKVxyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIGlmICh0eXBlcy5oYXNPd25Qcm9wZXJ0eShkcmF3VHlwZSkpIHtcclxuICAgIHJldHVybiB0eXBlc1tkcmF3VHlwZV07XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiB7fTtcclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciB3ZnNUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vd2ZzdHJhbnNhY3Rpb24nKTtcclxudmFyIGFnc1RyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9hZ3N0cmFuc2FjdGlvbicpO1xyXG52YXIgaW5kZXhlZERiID0gcmVxdWlyZSgnLi9pbmRleGVkZGInKTtcclxudmFyIHRyYW5zYWN0aW9ucyA9IHtcclxuICBXRlM6IHdmc1RyYW5zYWN0aW9uLFxyXG4gIEFHU19GRUFUVVJFOiBhZ3NUcmFuc2FjdGlvbixcclxuICBPRkZMSU5FOiBpbmRleGVkRGJcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odHJhbnNhY3Rpb24sIGxheWVyTmFtZSkge1xyXG4gIHZhciB0eXBlID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSkuZ2V0KCd0eXBlJyk7XHJcbiAgaWYgKHRyYW5zYWN0aW9ucy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xyXG4gICAgdHJhbnNhY3Rpb25zW3R5cGVdKHRyYW5zYWN0aW9uLCBsYXllck5hbWUpO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgZWRpdHNTdG9yZSA9IHJlcXVpcmUoJy4vZWRpdHNzdG9yZScpKCk7XHJcbnZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9lZGl0ZGlzcGF0Y2hlcicpO1xyXG5cclxudmFyIGZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuV0ZTKCk7XHJcbnZhciBzZXJpYWxpemVyID0gbmV3IFhNTFNlcmlhbGl6ZXIoKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSkge1xyXG4gIHJldHVybiB3ZnNUcmFuc2FjdGlvbih0cmFuc09iaiwgbGF5ZXJOYW1lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVXZnNUcmFuc2FjdGlvbih0cmFuc09iaiwgb3B0aW9ucykge1xyXG4gIHZhciBub2RlID0gZm9ybWF0LndyaXRlVHJhbnNhY3Rpb24odHJhbnNPYmouaW5zZXJ0LCB0cmFuc09iai51cGRhdGUsIHRyYW5zT2JqLmRlbGV0ZSwgb3B0aW9ucyk7XHJcbiAgcmV0dXJuIG5vZGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdmc1RyYW5zYWN0aW9uKHRyYW5zT2JqLCBsYXllck5hbWUpIHtcclxuICB2YXIgc3JzTmFtZSA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG4gIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gIHZhciBmZWF0dXJlVHlwZSA9IGxheWVyLmdldCgnZmVhdHVyZVR5cGUnKTtcclxuICB2YXIgc291cmNlID0gdmlld2VyLmdldE1hcFNvdXJjZSgpW2xheWVyLmdldCgnc291cmNlTmFtZScpXTtcclxuICB2YXIgb3B0aW9ucyA9IHtcclxuICAgIGdtbE9wdGlvbnM6IHtcclxuICAgICAgc3JzTmFtZTogc3JzTmFtZVxyXG4gICAgfSxcclxuICAgIGZlYXR1cmVOUzogc291cmNlLndvcmtzcGFjZSxcclxuICAgIGZlYXR1cmVQcmVmaXg6IHNvdXJjZS5wcmVmaXggfHwgc291cmNlLndvcmtzcGFjZSxcclxuICAgIGZlYXR1cmVUeXBlOiBmZWF0dXJlVHlwZVxyXG4gIH07XHJcbiAgdmFyIG5vZGUgPSB3cml0ZVdmc1RyYW5zYWN0aW9uKHRyYW5zT2JqLCBvcHRpb25zKTtcclxuICByZXR1cm4gJC5hamF4KHtcclxuICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgdXJsOiBzb3VyY2UudXJsLFxyXG4gICAgZGF0YTogc2VyaWFsaXplci5zZXJpYWxpemVUb1N0cmluZyhub2RlKSxcclxuICAgIGNvbnRlbnRUeXBlOiAndGV4dC94bWwnLFxyXG4gICAgc3VjY2Vzczogc3VjY2VzcyxcclxuICAgIGVycm9yOiBlcnJvcixcclxuICAgIGNvbnRleHQ6IHRoaXNcclxuICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICB2YXIgcmVzdWx0ID0gcmVhZFJlc3BvbnNlKGRhdGEpO1xyXG4gICAgICB2YXIgbnIgPSAwO1xyXG4gICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgbnIgKz0gcmVzdWx0LnRyYW5zYWN0aW9uU3VtbWFyeS50b3RhbFVwZGF0ZWQ7XHJcbiAgICAgICAgbnIgKz0gcmVzdWx0LnRyYW5zYWN0aW9uU3VtbWFyeS50b3RhbERlbGV0ZWQ7XHJcbiAgICAgICAgbnIgKz0gcmVzdWx0LnRyYW5zYWN0aW9uU3VtbWFyeS50b3RhbEluc2VydGVkO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBucjtcclxuICAgIH0pO1xyXG5cclxuICBmdW5jdGlvbiBzdWNjZXNzKGRhdGEpIHtcclxuICAgIHZhciByZXN1bHQgPSByZWFkUmVzcG9uc2UoZGF0YSk7XHJcbiAgICB2YXIgZmVhdHVyZTtcclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgaWYgKHJlc3VsdC50cmFuc2FjdGlvblN1bW1hcnkudG90YWxVcGRhdGVkID4gMCkge1xyXG4gICAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUZlYXR1cmUoe1xyXG4gICAgICAgICAgZmVhdHVyZTogdHJhbnNPYmoudXBkYXRlLFxyXG4gICAgICAgICAgbGF5ZXJOYW1lOiBsYXllck5hbWUsXHJcbiAgICAgICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXHJcbiAgICAgICAgICBhY3Rpb246ICd1cGRhdGUnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmIChyZXN1bHQudHJhbnNhY3Rpb25TdW1tYXJ5LnRvdGFsRGVsZXRlZCA+IDApIHtcclxuICAgICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VGZWF0dXJlKHtcclxuICAgICAgICAgIGZlYXR1cmU6IHRyYW5zT2JqLmRlbGV0ZSxcclxuICAgICAgICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLFxyXG4gICAgICAgICAgc3RhdHVzOiAnZmluaXNoZWQnLFxyXG4gICAgICAgICAgYWN0aW9uOiAnZGVsZXRlJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocmVzdWx0LnRyYW5zYWN0aW9uU3VtbWFyeS50b3RhbEluc2VydGVkID4gMCkge1xyXG4gICAgICAgIGZlYXR1cmUgPSB0cmFuc09iai5pbnNlcnQ7XHJcbiAgICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRmVhdHVyZSh7XHJcbiAgICAgICAgICBmZWF0dXJlOiB0cmFuc09iai5pbnNlcnQsXHJcbiAgICAgICAgICBsYXllck5hbWU6IGxheWVyTmFtZSxcclxuICAgICAgICAgIHN0YXR1czogJ2ZpbmlzaGVkJyxcclxuICAgICAgICAgIGFjdGlvbjogJ2luc2VydCdcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgaW5zZXJ0SWRzID0gcmVzdWx0Lmluc2VydElkcztcclxuICAgICAgICBpbnNlcnRJZHMuZm9yRWFjaChmdW5jdGlvbihpbnNlcnRJZCwgaW5kZXgpIHtcclxuICAgICAgICAgIGZlYXR1cmVbaW5kZXhdLnNldElkKGluc2VydElkKTtcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXJyb3IoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGVycm9yKGUpIHtcclxuICAgIHZhciBlcnJvck1zZyA9IGUgPyAoZS5zdGF0dXMgKyAnICcgKyBlLnN0YXR1c1RleHQpIDogXCJcIjtcclxuICAgIGFsZXJ0KCdEZXQgaW50csOkZmZhZGUgZXR0IGZlbCBuw6RyIMOkbmRyaW5nYXJuYSBza3VsbGUgc3BhcmFzIHRpbGwgc2VydmVybi4uLlxcbicgK1xyXG4gICAgICBlcnJvck1zZyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiByZWFkUmVzcG9uc2UoZGF0YSkge1xyXG4gIHZhciByZXN1bHQ7XHJcbiAgaWYgKHdpbmRvdy5Eb2N1bWVudCAmJiBkYXRhIGluc3RhbmNlb2YgRG9jdW1lbnQgJiYgZGF0YS5kb2N1bWVudEVsZW1lbnQgJiZcclxuICAgIGRhdGEuZG9jdW1lbnRFbGVtZW50LmxvY2FsTmFtZSA9PT0gJ0V4Y2VwdGlvblJlcG9ydCcpIHtcclxuICAgIGFsZXJ0KGRhdGEuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyhcclxuICAgICAgJ2h0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzJywgJ0V4Y2VwdGlvblRleHQnKS5pdGVtKDApLnRleHRDb250ZW50KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVzdWx0ID0gZm9ybWF0LnJlYWRUcmFuc2FjdGlvblJlc3BvbnNlKGRhdGEpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciBQb3B1cCA9IHJlcXVpcmUoJy4vcG9wdXAnKTtcclxudmFyIHNpZGViYXIgPSByZXF1aXJlKCcuL3NpZGViYXInKTtcclxudmFyIG1hcHV0aWxzID0gcmVxdWlyZSgnLi9tYXB1dGlscycpO1xyXG52YXIgZmVhdHVyZWxheWVyID0gcmVxdWlyZSgnLi9mZWF0dXJlbGF5ZXInKTtcclxudmFyIHN0eWxlID0gcmVxdWlyZSgnLi9zdHlsZScpKCk7XHJcbnZhciBzdHlsZVR5cGVzID0gcmVxdWlyZSgnLi9zdHlsZS9zdHlsZXR5cGVzJyk7XHJcbnZhciBnZXRGZWF0dXJlSW5mbyA9IHJlcXVpcmUoJy4vZ2V0ZmVhdHVyZWluZm8nKTtcclxudmFyIG93bENhcm91c2VsID0gcmVxdWlyZSgnLi4vZXh0ZXJucy9vd2xjYXJvdXNlbC1icm93c2VyaWZ5Jyk7XHJcbm93bENhcm91c2VsLmxvYWRqUXVlcnlQbHVnaW4oKTtcclxuXHJcbnZhciBzZWxlY3Rpb25MYXllciA9IHVuZGVmaW5lZDtcclxudmFyIHNhdmVkUGluID0gdW5kZWZpbmVkO1xyXG52YXIgb3B0aW9ucztcclxudmFyIG1hcDtcclxudmFyIHBpbm5pbmc7XHJcbnZhciBwaW5TdHlsZTtcclxudmFyIHNlbGVjdGlvblN0eWxlcztcclxudmFyIHNob3dPdmVybGF5O1xyXG52YXIgaWRlbnRpZnlUYXJnZXQ7XHJcbnZhciBjbHVzdGVyRmVhdHVyZWluZm9MZXZlbDtcclxudmFyIG92ZXJsYXk7XHJcbnZhciBoaXRUb2xlcmFuY2U7XHJcblxyXG5mdW5jdGlvbiBpbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG5cclxuICBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcblxyXG4gIHBpbm5pbmcgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdwaW5uaW5nJykgPyBvcHRpb25zLnBpbm5pbmcgOiB0cnVlO1xyXG4gIHZhciBwaW5TdHlsZU9wdGlvbnMgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdwaW5TdHlsZScpID8gb3B0aW9ucy5waW5TdHlsZSA6IHN0eWxlVHlwZXMuZ2V0U3R5bGUoJ3BpbicpO1xyXG4gIHBpblN0eWxlID0gc3R5bGUuY3JlYXRlU3R5bGVSdWxlKHBpblN0eWxlT3B0aW9ucylbMF07XHJcbiAgc2F2ZWRQaW4gPSBvcHRpb25zLnNhdmVkUGluID8gbWFwdXRpbHMuY3JlYXRlUG9pbnRGZWF0dXJlKG9wdF9vcHRpb25zLnNhdmVkUGluLCBwaW5TdHlsZSkgOiB1bmRlZmluZWQ7XHJcblxyXG4gIHNlbGVjdGlvblN0eWxlcyA9IHN0eWxlLmNyZWF0ZUVkaXRTdHlsZSgpO1xyXG5cclxuICB2YXIgc2F2ZWRTZWxlY3Rpb24gPSBvcHRpb25zLnNhdmVkU2VsZWN0aW9uIHx8IHVuZGVmaW5lZDtcclxuICB2YXIgc2F2ZWRGZWF0dXJlID0gc2F2ZWRQaW4gfHwgc2F2ZWRTZWxlY3Rpb24gfHwgdW5kZWZpbmVkO1xyXG4gIHNlbGVjdGlvbkxheWVyID0gZmVhdHVyZWxheWVyKHNhdmVkRmVhdHVyZSwgbWFwKTtcclxuXHJcbiAgc2hvd092ZXJsYXkgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdvdmVybGF5JykgPyBvcHRpb25zLm92ZXJsYXkgOiB0cnVlO1xyXG5cclxuICBpZihzaG93T3ZlcmxheSkge1xyXG4gICAgaWRlbnRpZnlUYXJnZXQgPSAnb3ZlcmxheSc7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgc2lkZWJhci5pbml0KCk7XHJcbiAgICBpZGVudGlmeVRhcmdldCA9ICdzaWRlYmFyJztcclxuICB9XHJcblxyXG4gIGNsdXN0ZXJGZWF0dXJlaW5mb0xldmVsID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWwnKSA/IG9wdGlvbnMuY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWwgOiAxO1xyXG5cclxuICBoaXRUb2xlcmFuY2UgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdoaXRUb2xlcmFuY2UnKSA/IG9wdGlvbnMuaGl0VG9sZXJhbmNlIDogMDtcclxuXHJcbiAgbWFwLm9uKCdjbGljaycsIG9uQ2xpY2spO1xyXG4gICQoZG9jdW1lbnQpLm9uKCdlbmFibGVJbnRlcmFjdGlvbicsIG9uRW5hYmxlSW50ZXJhY3Rpb24pO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uTGF5ZXIoKSB7XHJcbiAgcmV0dXJuIHNlbGVjdGlvbkxheWVyLmdldEZlYXR1cmVMYXllcigpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTZWxlY3Rpb24oKSB7XHJcbiAgdmFyIHNlbGVjdGlvbiA9IHt9O1xyXG4gIHNlbGVjdGlvbi5nZW9tZXRyeVR5cGUgPSBzZWxlY3Rpb25MYXllci5nZXRGZWF0dXJlcygpWzBdLmdldEdlb21ldHJ5KCkuZ2V0VHlwZSgpO1xyXG4gIHNlbGVjdGlvbi5jb29yZGluYXRlcyA9IHNlbGVjdGlvbkxheWVyLmdldEZlYXR1cmVzKClbMF0uZ2V0R2VvbWV0cnkoKS5nZXRDb29yZGluYXRlcygpO1xyXG4gIHJldHVybiBzZWxlY3Rpb247XHJcbn1cclxuZnVuY3Rpb24gZ2V0UGluKCkge1xyXG4gIHJldHVybiBzYXZlZFBpbjtcclxufVxyXG5mdW5jdGlvbiBnZXRIaXRUb2xlcmFuY2UoKSB7XHJcbiAgcmV0dXJuIGhpdFRvbGVyYW5jZTtcclxufVxyXG5mdW5jdGlvbiBpZGVudGlmeShpdGVtcywgdGFyZ2V0LCBjb29yZGluYXRlKSB7XHJcbiAgY2xlYXIoKTtcclxuICB2YXIgY29udGVudCA9IGl0ZW1zLm1hcChmdW5jdGlvbihpKXtcclxuICAgIHJldHVybiBpLmNvbnRlbnQ7XHJcbiAgfSkuam9pbignJyk7XHJcbiAgY29udGVudCA9ICc8ZGl2IGlkPVwiby1pZGVudGlmeVwiPjxkaXYgaWQ9XCJvLWlkZW50aWZ5LWNhcm91c2VsXCIgY2xhc3M9XCJvd2wtY2Fyb3VzZWwgb3dsLXRoZW1lXCI+JyArIGNvbnRlbnQgKyAnPC9kaXY+PC9kaXY+JztcclxuICBzd2l0Y2ggKHRhcmdldCkge1xyXG4gICAgY2FzZSAnb3ZlcmxheSc6XHJcbiAgICAgIHZhciBwb3B1cCA9IFBvcHVwKCcjby1tYXAnKTtcclxuICAgICAgb3ZlcmxheSA9IG5ldyBvbC5PdmVybGF5KHtcclxuICAgICAgICBlbGVtZW50OiBwb3B1cC5nZXRFbCgpXHJcbiAgICAgIH0pO1xyXG4gICAgICBtYXAuYWRkT3ZlcmxheShvdmVybGF5KTtcclxuICAgICAgdmFyIGdlb21ldHJ5ID0gaXRlbXNbMF0uZmVhdHVyZS5nZXRHZW9tZXRyeSgpO1xyXG4gICAgICB2YXIgY29vcmQ7XHJcbiAgICAgIGdlb21ldHJ5LmdldFR5cGUoKSA9PSAnUG9pbnQnID8gY29vcmQgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpIDogY29vcmQgPSBjb29yZGluYXRlO1xyXG4gICAgICBvdmVybGF5LnNldFBvc2l0aW9uKGNvb3JkKTtcclxuICAgICAgcG9wdXAuc2V0Q29udGVudCh7Y29udGVudDogY29udGVudCwgdGl0bGU6IGl0ZW1zWzBdLnRpdGxlfSk7XHJcbiAgICAgIHBvcHVwLnNldFZpc2liaWxpdHkodHJ1ZSk7XHJcbiAgICAgIHZhciBvd2wgPSBpbml0Q2Fyb3VzZWwoJyNvLWlkZW50aWZ5LWNhcm91c2VsJywgdW5kZWZpbmVkLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRoaXMub3dsLmN1cnJlbnRJdGVtO1xyXG4gICAgICAgIHNlbGVjdGlvbkxheWVyLmNsZWFyQW5kQWRkKGl0ZW1zW2N1cnJlbnRJdGVtXS5mZWF0dXJlLmNsb25lKCksIHNlbGVjdGlvblN0eWxlc1tpdGVtc1tjdXJyZW50SXRlbV0uZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKV0pO1xyXG4gICAgICAgIHBvcHVwLnNldFRpdGxlKGl0ZW1zW2N1cnJlbnRJdGVtXS50aXRsZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBWaWV3ZXIuYXV0b1BhbigpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ3NpZGViYXInOlxyXG4gICAgICBzaWRlYmFyLnNldENvbnRlbnQoe2NvbnRlbnQ6IGNvbnRlbnQsIHRpdGxlOiBpdGVtc1swXS50aXRsZX0pO1xyXG4gICAgICBzaWRlYmFyLnNldFZpc2liaWxpdHkodHJ1ZSk7XHJcbiAgICAgIHZhciBvd2wgPSBpbml0Q2Fyb3VzZWwoJyNvLWlkZW50aWZ5LWNhcm91c2VsJywgdW5kZWZpbmVkLCBmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBjdXJyZW50SXRlbSA9IHRoaXMub3dsLmN1cnJlbnRJdGVtO1xyXG4gICAgICAgIHNlbGVjdGlvbkxheWVyLmNsZWFyQW5kQWRkKGl0ZW1zW2N1cnJlbnRJdGVtXS5mZWF0dXJlLmNsb25lKCksIHNlbGVjdGlvblN0eWxlc1tpdGVtc1tjdXJyZW50SXRlbV0uZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKV0pO1xyXG4gICAgICAgIHNpZGViYXIuc2V0VGl0bGUoaXRlbXNbY3VycmVudEl0ZW1dLnRpdGxlKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBvbkNsaWNrKGV2dCkge1xyXG4gIHNhdmVkUGluID0gdW5kZWZpbmVkO1xyXG4gIC8vRmVhdHVyaW5mbyBpbiB0d28gc3RlcHMuIENvbmNhdCBzZXJ2ZXJzaWRlIGFuZCBjbGllbnRzaWRlIHdoZW4gc2VydmVyc2lkZSBpcyBmaW5pc2hlZFxyXG4gIHZhciBjbGllbnRSZXN1bHQgPSBnZXRGZWF0dXJlSW5mby5nZXRGZWF0dXJlc0F0UGl4ZWwoZXZ0LCBjbHVzdGVyRmVhdHVyZWluZm9MZXZlbCk7XHJcbiAgLy9BYm9ydCBpZiBjbGllbnRSZXN1bHQgaXMgZmFsc2VcclxuICBpZihjbGllbnRSZXN1bHQgIT09IGZhbHNlKSB7XHJcbiAgICBnZXRGZWF0dXJlSW5mby5nZXRGZWF0dXJlc0Zyb21SZW1vdGUoZXZ0KVxyXG4gICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgdmFyIHNlcnZlclJlc3VsdCA9IGRhdGEgfHwgW107XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHNlcnZlclJlc3VsdC5jb25jYXQoY2xpZW50UmVzdWx0KTtcclxuICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIHNlbGVjdGlvbkxheWVyLmNsZWFyKCk7XHJcbiAgICAgICAgICBpZGVudGlmeShyZXN1bHQsIGlkZW50aWZ5VGFyZ2V0LCBldnQuY29vcmRpbmF0ZSlcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZihzZWxlY3Rpb25MYXllci5nZXRGZWF0dXJlcygpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgIGNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYocGlubmluZyl7XHJcbiAgICAgICAgICBzaWRlYmFyLnNldFZpc2liaWxpdHkoZmFsc2UpO1xyXG4gICAgICAgICAgdmFyIHJlc29sdXRpb24gPSBtYXAuZ2V0VmlldygpLmdldFJlc29sdXRpb24oKTtcclxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmKCFtYXB1dGlscy5jaGVja1pvb21DaGFuZ2UocmVzb2x1dGlvbiwgbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCkpKSB7XHJcbiAgICAgICAgICAgICAgc2F2ZWRQaW4gPSBtYXB1dGlscy5jcmVhdGVQb2ludEZlYXR1cmUoZXZ0LmNvb3JkaW5hdGUsIHBpblN0eWxlKTtcclxuICAgICAgICAgICAgICBzZWxlY3Rpb25MYXllci5hZGRGZWF0dXJlKHNhdmVkUGluKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSwgMjUwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnTm8gZmVhdHVyZXMgaWRlbnRpZmllZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldEFjdGl2ZShzdGF0ZSkge1xyXG4gIGlmKHN0YXRlID09PSB0cnVlKSB7XHJcbiAgICBtYXAub24oJ2NsaWNrJywgb25DbGljayk7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgY2xlYXIoKTtcclxuICAgIG1hcC51bignY2xpY2snLCBvbkNsaWNrKTtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgc2VsZWN0aW9uTGF5ZXIuY2xlYXIoKTtcclxuICBzaWRlYmFyLnNldFZpc2liaWxpdHkoZmFsc2UpO1xyXG4gIGlmIChvdmVybGF5KSB7XHJcbiAgICBWaWV3ZXIucmVtb3ZlT3ZlcmxheXMob3ZlcmxheSk7ICAgICAgXHJcbiAgfVxyXG4gIGNvbnNvbGUubG9nKFwiQ2xlYXJpbmcgc2VsZWN0aW9uXCIpO1xyXG59XHJcbmZ1bmN0aW9uIG9uRW5hYmxlSW50ZXJhY3Rpb24oZSkge1xyXG4gIGlmKGUuaW50ZXJhY3Rpb24gPT09ICdmZWF0dXJlSW5mbycpIHtcclxuICAgIHNldEFjdGl2ZSh0cnVlKTtcclxuICB9XHJcbiAgZWxzZSB7XHJcbiAgICBzZXRBY3RpdmUoZmFsc2UpO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBpbml0Q2Fyb3VzZWwoaWQsIG9wdGlvbnMsIGNiKSB7XHJcbiAgdmFyIGNhcm91c2VsT3B0aW9ucyA9IG9wdGlvbnMgfHwge1xyXG4gICAgbmF2aWdhdGlvbiA6IHRydWUsIC8vIFNob3cgbmV4dCBhbmQgcHJldiBidXR0b25zXHJcbiAgICBzbGlkZVNwZWVkIDogMzAwLFxyXG4gICAgcGFnaW5hdGlvblNwZWVkIDogNDAwLFxyXG4gICAgc2luZ2xlSXRlbTp0cnVlLFxyXG4gICAgcmV3aW5kU3BlZWQ6MjAwLFxyXG4gICAgbmF2aWdhdGlvblRleHQ6IFsnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGV2cm9uLWxlZnRcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtY2hldnJvbi1sZWZ0XCI+PC91c2U+PC9zdmc+JywgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hldnJvbi1yaWdodFwiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1jaGV2cm9uLXJpZ2h0XCI+PC91c2U+PC9zdmc+J10sXHJcbiAgICBhZnRlckFjdGlvbjogY2JcclxuICB9O1xyXG4gIHJldHVybiAkKGlkKS5vd2xDYXJvdXNlbChjYXJvdXNlbE9wdGlvbnMpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gaW5pdDtcclxubW9kdWxlLmV4cG9ydHMuY2xlYXIgPSBjbGVhcjtcclxubW9kdWxlLmV4cG9ydHMuZ2V0U2VsZWN0aW9uTGF5ZXIgPSBnZXRTZWxlY3Rpb25MYXllcjtcclxubW9kdWxlLmV4cG9ydHMuZ2V0U2VsZWN0aW9uID0gZ2V0U2VsZWN0aW9uO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRQaW4gPSBnZXRQaW47XHJcbm1vZHVsZS5leHBvcnRzLmdldEhpdFRvbGVyYW5jZSA9IGdldEhpdFRvbGVyYW5jZTtcclxubW9kdWxlLmV4cG9ydHMuaWRlbnRpZnkgPSBpZGVudGlmeTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciB0ZW1wbGF0ZXMgPSB7fTtcclxudGVtcGxhdGVzLmRlZmF1bHQgPSByZXF1aXJlKFwiLi90ZW1wbGF0ZXMvZmVhdHVyZWluZm90ZW1wbGF0ZXMvZGVmYXVsdFwiKTtcclxuXHJcbmZ1bmN0aW9uIGZlYXR1cmVpbmZvdGVtcGxhdGVzKHRlbXBsYXRlLCBhdHRyaWJ1dGVzKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGVzW3RlbXBsYXRlXShhdHRyaWJ1dGVzKTtcclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IGZlYXR1cmVpbmZvdGVtcGxhdGVzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxuXHJcbi8vY3JlYXRlIHVubWFuYWdlZCBsYXllclxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZlYXR1cmVzLCBtYXApIHtcclxuICB2YXIgY29sbGVjdGlvbiA9IGZlYXR1cmVzID8gW2ZlYXR1cmVzXSA6IFtdO1xyXG4gIHZhciBmZWF0dXJlTGF5ZXJTdG9yZSA9IG5ldyBvbC5zb3VyY2UuVmVjdG9yKHtcclxuICAgICAgZmVhdHVyZXM6IGNvbGxlY3Rpb25cclxuICB9KTtcclxuICB2YXIgZmVhdHVyZUxheWVyID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XHJcbiAgICBzb3VyY2U6IGZlYXR1cmVMYXllclN0b3JlLFxyXG4gICAgbWFwOiBtYXBcclxuICB9KTtcclxuICByZXR1cm4ge1xyXG4gICAgICBhZGRGZWF0dXJlOiBmdW5jdGlvbiBhZGRGZWF0dXJlKGZlYXR1cmUpIHtcclxuICAgICAgICAgIGZlYXR1cmVMYXllclN0b3JlLmFkZEZlYXR1cmUoZmVhdHVyZSk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldEZlYXR1cmVzOiBmdW5jdGlvbiBnZXRGZWF0dXJlcygpIHtcclxuICAgICAgICAgIHJldHVybiBmZWF0dXJlTGF5ZXJTdG9yZS5nZXRGZWF0dXJlcygpO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRGZWF0dXJlTGF5ZXI6IGZ1bmN0aW9uIGdldEZlYXR1cmVMYXllcigpIHtcclxuICAgICAgICAgIHJldHVybiBmZWF0dXJlTGF5ZXI7XHJcbiAgICAgIH0sXHJcbiAgICAgIGdldEZlYXR1cmVTdG9yZTogZnVuY3Rpb24gZ2V0RmVhdHVyZVN0b3JlKCkge1xyXG4gICAgICAgICAgcmV0dXJuIGZlYXR1cmVMYXllclN0b3JlO1xyXG4gICAgICB9LFxyXG4gICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgICAgICAgICBmZWF0dXJlTGF5ZXJTdG9yZS5jbGVhcigpO1xyXG4gICAgICB9LFxyXG4gICAgICBjbGVhckFuZEFkZDogZnVuY3Rpb24gY2xlYXJBbmRBZGQoZmVhdHVyZSwgc3R5bGUpIHtcclxuICAgICAgICAgIGZlYXR1cmVMYXllclN0b3JlLmNsZWFyKCk7XHJcbiAgICAgICAgICBmZWF0dXJlTGF5ZXIuc2V0U3R5bGUoc3R5bGUpO1xyXG4gICAgICAgICAgZmVhdHVyZUxheWVyU3RvcmUuYWRkRmVhdHVyZShmZWF0dXJlKTtcclxuICAgICAgfVxyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIHBlcm1hbGluayA9IHJlcXVpcmUoJy4vcGVybWFsaW5rL3Blcm1hbGluaycpO1xyXG52YXIgaXNFbWJlZGRlZCA9IHJlcXVpcmUoJy4vdXRpbHMvaXNlbWJlZGRlZCcpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxuXHJcbnZhciB0b29sdGlwO1xyXG52YXIgbWFwVGFyZ2V0O1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8ICcjby10b29sYmFyLW1pc2MnO1xyXG4gIG1hcFRhcmdldCA9IHZpZXdlci5nZXRUYXJnZXQoKTtcclxuICB0b29sdGlwID0gb3B0aW9ucy50b29sdGlwVGV4dCB8fCAnVmlzYSBzdG9yIGthcnRhJztcclxuXHJcbiAgcmVuZGVyKHRhcmdldCk7XHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIodGFyZ2V0KSB7XHJcbiAgdmFyIGVsID0gdXRpbHMuY3JlYXRlQnV0dG9uKHtcclxuICAgIGlkOiAnby1mdWxsc2NyZWVuLWJ1dHRvbicsXHJcbiAgICBjbHM6ICdvLWZ1bGxzY3JlZW4tYnV0dG9uJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tZmEtZXhwYW5kJyxcclxuICAgIHNyYzogJyNmYS1leHBhbmQnLFxyXG4gICAgdG9vbHRpcFRleHQ6IHRvb2x0aXAsXHJcbiAgICB0b29sdGlwUGxhY2VtZW50OiAnZWFzdCdcclxuICB9KTtcclxuICBpZiAoaXNFbWJlZGRlZChtYXBUYXJnZXQpKSB7XHJcbiAgICAkKHRhcmdldCkuYXBwZW5kKGVsKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgJCgnI28tZnVsbHNjcmVlbi1idXR0b24gYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZ29GdWxsU2NyZWVuKCk7XHJcbiAgICAkKCcjby1mdWxsc2NyZWVuLWJ1dHRvbiBidXR0b24nKS5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZ29GdWxsU2NyZWVuKCkge1xyXG4gIHZhciB1cmwgPSBwZXJtYWxpbmsuZ2V0UGVybWFsaW5rKCk7XHJcbiAgd2luZG93Lm9wZW4odXJsKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IEluaXQ7XHJcbiIsInZhciBnZXRjZW50ZXIgPSByZXF1aXJlKCcuL2dlb21ldHJ5L2dldGNlbnRlcicpO1xyXG52YXIgZ2V0YXJlYSA9IHJlcXVpcmUoJy4vZ2VvbWV0cnkvZ2V0YXJlYScpO1xyXG5cclxudmFyIGdlb20gPSB7fTtcclxuZ2VvbS5jZW50ZXIgPSBnZXRjZW50ZXI7XHJcbmdlb20uYXJlYSA9IGdldGFyZWE7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdlb207XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHJvdW5kID0gcmVxdWlyZSgnLi4vdXRpbHMvcm91bmQnKTtcclxuXHJcbnZhciBnZXRBcmVhID0gZnVuY3Rpb24gZ2V0QXJlYShnZW9tZXRyeV9pbiwgZGVjaW1hbHMpIHtcclxuICB2YXIgYXJlYSA9IGdlb21ldHJ5X2luLmdldEFyZWEgPyBnZW9tZXRyeV9pbi5nZXRBcmVhKCkgOiAwO1xyXG4gIGlmIChkZWNpbWFscykge1xyXG4gICAgYXJlYSA9IHJvdW5kKGFyZWEsIGRlY2ltYWxzKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXJlYSA9IHJvdW5kKGFyZWEsICcyJyk7XHJcbiAgfVxyXG4gIHJldHVybiBhcmVhO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdldEFyZWE7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcblxyXG52YXIgZ2V0Q2VudGVyID0gZnVuY3Rpb24gZ2V0Q2VudGVyKGdlb21ldHJ5X2luLCBkZXN0aW5hdGlvbiwgYXhpc09yaWVudGF0aW9uKSB7XHJcbiAgICB2YXIgZ2VvbWV0cnkgPSBnZW9tZXRyeV9pbi5jbG9uZSgpO1xyXG5cclxuICAgIGlmIChkZXN0aW5hdGlvbikge1xyXG4gICAgICBnZW9tZXRyeS50cmFuc2Zvcm0oVmlld2VyLmdldE1hcCgpLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCksIGRlc3RpbmF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcclxuICAgIHZhciBjZW50ZXI7XHJcbiAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICBjYXNlIFwiUG9seWdvblwiOlxyXG4gICAgICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeS5nZXRJbnRlcmlvclBvaW50KCkuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIk11bHRpUG9seWdvblwiOlxyXG4gICAgICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeS5nZXRJbnRlcmlvclBvaW50cygpLmdldENvb3JkaW5hdGVzKClbMF07XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJQb2ludFwiOlxyXG4gICAgICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiTXVsdGlQb2ludFwiOlxyXG4gICAgICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeVswXS5nZXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiTGluZVN0cmluZ1wiOlxyXG4gICAgICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeS5nZXRDb29yZGluYXRlQXQoMC41KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIk11bHRpTGluZVN0cmluZ1wiOlxyXG4gICAgICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeS5nZXRMaW5lU3RyaW5ncygpWzBdLmdldENvb3JkaW5hdGVBdCgwLjUpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiQ2lyY2xlXCI6XHJcbiAgICAgICAgICAgIGNlbnRlciA9IGdlb21ldHJ5LmdldENlbnRlcigpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYXhpc09yaWVudGF0aW9uKSB7XHJcbiAgICAgIGlmIChheGlzT3JpZW50YXRpb24gPT09ICdyZXZlcnNlJykge1xyXG4gICAgICAgIGNlbnRlci5yZXZlcnNlKCk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2VudGVyO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdldENlbnRlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG52YXIgJGdlb2xvY2F0ZUJ1dHRvbklkID0gdW5kZWZpbmVkO1xyXG52YXIgJGdlb2xvY2F0ZUJ1dHRvbiA9IHVuZGVmaW5lZDtcclxudmFyIGVuYWJsZWQgPSBmYWxzZTtcclxudmFyIG1hcCA9IHVuZGVmaW5lZDtcclxudmFyIGdlb2xvY2F0aW9uID0gdW5kZWZpbmVkO1xyXG52YXIgbWFya2VyID0gdW5kZWZpbmVkO1xyXG52YXIgbWFya2VyRWwgPSB1bmRlZmluZWQ7XHJcbnZhciBiYXNlVXJsID0gdW5kZWZpbmVkO1xyXG52YXIgem9vbUxldmVsO1xyXG5cclxuZnVuY3Rpb24gaW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8ICcjby10b29sYmFyLW5hdmlnYXRpb24nO1xyXG4gIG1hcCA9IHZpZXdlci5nZXRNYXAoKTtcclxuICBiYXNlVXJsID0gdmlld2VyLmdldEJhc2VVcmwoKTtcclxuICB6b29tTGV2ZWwgPSBvcHRpb25zLnpvb21MZXZlbCB8fCB2aWV3ZXIuZ2V0UmVzb2x1dGlvbnMoKS5sZW5ndGggLSAzIHx8IDA7XHJcblxyXG4gIHJlbmRlcih0YXJnZXQpO1xyXG5cclxuICAkZ2VvbG9jYXRlQnV0dG9uSWQgPSAkKCcjby1nZW9sb2NhdGlvbi1idXR0b24nKTtcclxuICAkZ2VvbG9jYXRlQnV0dG9uID0gJCgnI28tZ2VvbG9jYXRpb24tYnV0dG9uIGJ1dHRvbicpO1xyXG5cclxuICBtYXJrZXJFbCA9ICQoJyNvLWdlb2xvY2F0aW9uX21hcmtlcicpLmdldCgwKTtcclxuICBtYXJrZXIgPSBuZXcgb2wuT3ZlcmxheSh7XHJcbiAgICBwb3NpdGlvbmluZzogJ2NlbnRlci1jZW50ZXInLFxyXG4gICAgZWxlbWVudDogbWFya2VyRWwsXHJcbiAgICBzdG9wRXZlbnQ6IGZhbHNlXHJcbiAgfSk7XHJcblxyXG4gIGdlb2xvY2F0aW9uID0gbmV3IG9sLkdlb2xvY2F0aW9uKCh7XHJcbiAgICBwcm9qZWN0aW9uOiBtYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKSxcclxuICAgIHRyYWNraW5nT3B0aW9uczoge1xyXG4gICAgICBtYXhpbXVtQWdlOiAxMDAwMCxcclxuICAgICAgZW5hYmxlSGlnaEFjY3VyYWN5OiB0cnVlLFxyXG4gICAgICB0aW1lb3V0OiA2MDAwMDBcclxuICAgIH1cclxuICB9KSk7XHJcblxyXG4gIGJpbmRVSUFjdGlvbnMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKHRhcmdldCkge1xyXG4gIHZhciB0b29sdGlwVGV4dCA9ICdWaXNhIG51dmFyYW5kZSBwb3NpdGlvbiBpIGthcnRhbic7XHJcbiAgdmFyIHNyYyA9IGJhc2VVcmwgKyAnaW1nL2dlb2xvY2F0aW9uX21hcmtlci5wbmcnO1xyXG4gIHZhciBtYXJrZXJJbWcgPSAnPGltZyBpZD1cIm8tZ2VvbG9jYXRpb25fbWFya2VyXCIgc3JjPVwiJyArIHNyYyArICdcIi8+JztcclxuXHJcbiAgLy9FbGVtZW50IGZvciBjb250cm9sXHJcbiAgdmFyIGVsID0gdXRpbHMuY3JlYXRlQnV0dG9uKHtcclxuICAgIGlkOiAnby1nZW9sb2NhdGlvbi1idXR0b24nLFxyXG4gICAgY2xzOiAnby1nZW9sb2NhdGlvbi1idXR0b24nLFxyXG4gICAgaWNvbkNsczogJ28taWNvbi1mYS1sb2NhdGlvbi1hcnJvdycsXHJcbiAgICBzcmM6ICcjZmEtbG9jYXRpb24tYXJyb3cnLFxyXG4gICAgdG9vbHRpcFRleHQ6IHRvb2x0aXBUZXh0LFxyXG4gICAgdG9vbHRpcFBsYWNlbWVudDogJ2Vhc3QnXHJcbiAgfSk7XHJcbiAgJCh0YXJnZXQpLmFwcGVuZChlbCk7XHJcbiAgJCgnI28tbWFwJykucHJlcGVuZChtYXJrZXJJbWcpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICRnZW9sb2NhdGVCdXR0b25JZC5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICBlbmFibGVkID0gZmFsc2U7XHJcbiAgICB0b2dnbGUoKTtcclxuICAgICRnZW9sb2NhdGVCdXR0b24uYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGUoKSB7XHJcbiAgaWYgKCRnZW9sb2NhdGVCdXR0b24uaGFzQ2xhc3MoJ28tZ2VvbG9jYXRpb24tYnV0dG9uLXRydWUnKSkge1xyXG4gICAgJGdlb2xvY2F0ZUJ1dHRvbi5yZW1vdmVDbGFzcygnby1nZW9sb2NhdGlvbi1idXR0b24tdHJ1ZScpO1xyXG4gICAgZ2VvbG9jYXRpb24uc2V0VHJhY2tpbmcoZmFsc2UpO1xyXG5cclxuICAgIGdlb2xvY2F0aW9uLnVuKCdjaGFuZ2UnLCB1cGRhdGVQb3NpdGlvbik7XHJcbiAgICBtYXAucmVtb3ZlT3ZlcmxheShtYXJrZXIpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAkZ2VvbG9jYXRlQnV0dG9uLmFkZENsYXNzKCdvLWdlb2xvY2F0aW9uLWJ1dHRvbi10cnVlJyk7XHJcbiAgICBtYXAuYWRkT3ZlcmxheShtYXJrZXIpO1xyXG5cclxuICAgIC8vIExpc3RlbiB0byBwb3NpdGlvbiBjaGFuZ2VzXHJcbiAgICBnZW9sb2NhdGlvbi5vbignY2hhbmdlJywgdXBkYXRlUG9zaXRpb24pO1xyXG4gICAgZ2VvbG9jYXRpb24uc2V0VHJhY2tpbmcodHJ1ZSk7IC8vIFN0YXJ0IHBvc2l0aW9uIHRyYWNraW5nXHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVQb3NpdGlvbigpIHtcclxuICBhZGRQb3NpdGlvbihnZXRQb3NpdGlvblZhbCgpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UG9zaXRpb25WYWwoKSB7XHJcbiAgdmFyIGN1cnJlbnQgPSB7fTtcclxuICBjdXJyZW50LnBvc2l0aW9uID0gZ2VvbG9jYXRpb24uZ2V0UG9zaXRpb24oKTtcclxuICBjdXJyZW50LmFjY3VyYWN5ID0gZ2VvbG9jYXRpb24uZ2V0QWNjdXJhY3koKTtcclxuICBjdXJyZW50LmhlYWRpbmcgPSBnZW9sb2NhdGlvbi5nZXRIZWFkaW5nKCkgfHwgMDtcclxuICBjdXJyZW50LnNwZWVkID0gZ2VvbG9jYXRpb24uZ2V0U3BlZWQoKSB8fCAwO1xyXG4gIGN1cnJlbnQubSA9IERhdGUubm93KCk7XHJcbiAgcmV0dXJuIGN1cnJlbnQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZFBvc2l0aW9uKGN1cnJlbnQpIHtcclxuICB2YXIgcG9zaXRpb24gPSBjdXJyZW50LnBvc2l0aW9uO1xyXG5cclxuICBpZiAoZW5hYmxlZCA9PT0gZmFsc2UgJiYgZ2VvbG9jYXRpb24uZ2V0VHJhY2tpbmcoKSkge1xyXG4gICAgbWFya2VyLnNldFBvc2l0aW9uKHBvc2l0aW9uKTtcclxuICAgIG1hcC5nZXRWaWV3KCkuYW5pbWF0ZSh7XHJcbiAgICAgIGNlbnRlcjogcG9zaXRpb24sXHJcbiAgICAgIHpvb206IHpvb21MZXZlbFxyXG4gICAgfSk7XHJcbiAgICBlbmFibGVkID0gdHJ1ZTtcclxuICB9IGVsc2UgaWYgKGdlb2xvY2F0aW9uLmdldFRyYWNraW5nKCkpIHtcclxuICAgIG1hcmtlci5zZXRQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gaW5pdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBmZWF0dXJlaW5mb3RlbXBsYXRlcyA9IHJlcXVpcmUoJy4vZmVhdHVyZWluZm90ZW1wbGF0ZXMnKTtcclxudmFyIHJlcGxhY2VyID0gcmVxdWlyZSgnLi4vc3JjL3V0aWxzL3JlcGxhY2VyJyk7XHJcbnZhciBnZW9tID0gcmVxdWlyZSgnLi9nZW9tJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZlYXR1cmUsIGxheWVyKSB7XHJcbiAgICB2YXIgY29udGVudCA9ICc8ZGl2Pjx1bD4nO1xyXG4gICAgdmFyIGF0dHJpYnV0ZSwgbGkgPSAnJywgdGl0bGUsIHZhbDtcclxuICAgIC8vSWYgbGF5ZXIgaXMgY29uZmlndXJlZCB3aXRoIGF0dHJpYnV0ZXNcclxuICAgIGlmKGxheWVyLmdldCgnYXR0cmlidXRlcycpKSB7XHJcbiAgICAgICAgICAvL0lmIGF0dHJpYnV0ZXMgaXMgc3RyaW5nIHRoZW4gdXNlIHRlbXBsYXRlIG5hbWVkIHdpdGggdGhlIHN0cmluZ1xyXG4gICAgICAgICAgaWYodHlwZW9mIGxheWVyLmdldCgnYXR0cmlidXRlcycpID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgIC8vVXNlIGF0dHJpYnV0ZXMgd2l0aCB0aGUgdGVtcGxhdGVcclxuICAgICAgICAgICAgICBsaSA9IGZlYXR1cmVpbmZvdGVtcGxhdGVzKGxheWVyLmdldCgnYXR0cmlidXRlcycpLGZlYXR1cmUuZ2V0UHJvcGVydGllcygpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpPGxheWVyLmdldCgnYXR0cmlidXRlcycpLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGUgPSBsYXllci5nZXQoJ2F0dHJpYnV0ZXMnKVtpXTtcclxuICAgICAgICAgICAgICAgIHRpdGxlID0gJyc7XHJcbiAgICAgICAgICAgICAgICB2YWwgPSAnJztcclxuICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVbJ25hbWUnXSkge1xyXG4gICAgICAgICAgICAgICAgICBpZihmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ25hbWUnXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IGZlYXR1cmUuZ2V0KGF0dHJpYnV0ZVsnbmFtZSddKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVbJ3RpdGxlJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSAnPGI+JyArIGF0dHJpYnV0ZVsndGl0bGUnXSArICc8L2I+JztcclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVbJ3VybCddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGZlYXR1cmUuZ2V0KGF0dHJpYnV0ZVsndXJsJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBjcmVhdGVVcmwoYXR0cmlidXRlWyd1cmxQcmVmaXgnXSwgYXR0cmlidXRlWyd1cmxTdWZmaXgnXSwgcmVwbGFjZXIucmVwbGFjZShmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ3VybCddKSwgZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gJzxhIGhyZWY9XCInICsgdXJsICsgJ1wiIHRhcmdldD1cIl9ibGFua1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ25hbWUnXSkgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9hPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXR0cmlidXRlWyd1cmwnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGZlYXR1cmUuZ2V0KGF0dHJpYnV0ZVsndXJsJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gYXR0cmlidXRlWydodG1sJ10gfHwgYXR0cmlidXRlWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IGNyZWF0ZVVybChhdHRyaWJ1dGVbJ3VybFByZWZpeCddLCBhdHRyaWJ1dGVbJ3VybFN1ZmZpeCddLCByZXBsYWNlci5yZXBsYWNlKGZlYXR1cmUuZ2V0KGF0dHJpYnV0ZVsndXJsJ10pLCBmZWF0dXJlLmdldFByb3BlcnRpZXMoKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSAnPGEgaHJlZj1cIicgKyB1cmwgKyAnXCIgdGFyZ2V0PVwiX2JsYW5rXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9hPic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXR0cmlidXRlWydpbWcnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGZlYXR1cmUuZ2V0KGF0dHJpYnV0ZVsnaW1nJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBjcmVhdGVVcmwoYXR0cmlidXRlWyd1cmxQcmVmaXgnXSwgYXR0cmlidXRlWyd1cmxTdWZmaXgnXSwgcmVwbGFjZXIucmVwbGFjZShmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ2ltZyddKSwgZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0aW9uID0gYXR0cmlidXRlWydhdHRyaWJ1dGlvbiddID8gJzxkaXYgY2xhc3M9XCJvLWltYWdlLWF0dHJpYnV0aW9uXCI+JyArIGF0dHJpYnV0ZVsnYXR0cmlidXRpb24nXSArICc8L2Rpdj4nIDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9ICc8ZGl2IGNsYXNzPVwiby1pbWFnZS1jb250YWluZXJcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW1nIHNyYz1cIicgKyB1cmwgKyAnXCI+JyArIGF0dHJpYnV0aW9uICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoYXR0cmlidXRlWydodG1sJ10pIHtcclxuICAgICAgICAgICAgICAgICAgdmFsID0gcmVwbGFjZXIucmVwbGFjZShhdHRyaWJ1dGVbJ2h0bWwnXSwgZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCksIHtcclxuICAgICAgICAgICAgICAgICAgICBoZWxwZXI6IGdlb20sXHJcbiAgICAgICAgICAgICAgICAgICAgaGVscGVyQXJnOiBmZWF0dXJlLmdldEdlb21ldHJ5KClcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGNscyA9ICcgY2xhc3M9XCInICsgYXR0cmlidXRlWydjbHMnXSArICdcIiAnIHx8ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIGxpICs9ICc8bGknICsgY2xzICsnPicgKyB0aXRsZSArIHZhbCArICc8L2xpPic7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAvL0NsZWFuIGZlYXR1cmUgYXR0cmlidXRlcyBmcm9tIG5vbi13YW50ZWQgcHJvcGVydGllc1xyXG4gICAgICB2YXIgYXR0cmlidXRlcyA9IGZpbHRlck9iamVjdChmZWF0dXJlLmdldFByb3BlcnRpZXMoKSwgWydGSURfJywgJ2dlb21ldHJ5J10pO1xyXG4gICAgICAvL1VzZSBhdHRyaWJ1dGVzIHdpdGggdGhlIHRlbXBsYXRlXHJcbiAgICAgIGxpID0gZmVhdHVyZWluZm90ZW1wbGF0ZXMoJ2RlZmF1bHQnLGF0dHJpYnV0ZXMpO1xyXG4gICAgfVxyXG4gICAgY29udGVudCArPSBsaSArICc8L3VsPjwvZGl2Pic7XHJcbiAgICByZXR1cm4gY29udGVudDtcclxufVxyXG5mdW5jdGlvbiBmaWx0ZXJPYmplY3Qob2JqLCBleGNsdWRlZEtleXMpIHtcclxuICAgIHZhciByZXN1bHQgPSB7fSwga2V5O1xyXG4gICAgZm9yIChrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYoZXhjbHVkZWRLZXlzLmluZGV4T2Yoa2V5KSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmVzdWx0W2tleV0gPSBvYmpba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZVVybChwcmVmaXgsIHN1ZmZpeCwgdXJsKSB7XHJcbiAgICB2YXIgcCA9IHByZWZpeCB8fCAnJztcclxuICAgIHZhciBzID0gc3VmZml4IHx8ICcnO1xyXG4gICAgcmV0dXJuIHAgKyB1cmwgKyBzO1xyXG59XHJcbiIsInZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcblxyXG52YXIgc291cmNlVHlwZSA9IHt9O1xyXG52YXIgcHJvamVjdGlvbkNvZGU7XHJcbnZhciBzb3VyY2U7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGlkLCBsYXllcikge1xyXG4gICAgcHJvamVjdGlvbkNvZGUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICAgIHNvdXJjZSA9IHZpZXdlci5nZXRNYXBTb3VyY2UoKTtcclxuICAgIHZhciBzZXJ2ZXJVcmwgPSBzb3VyY2VbbGF5ZXIuZ2V0KCdzb3VyY2VOYW1lJyldLnVybDtcclxuICAgIHZhciB0eXBlID0gbGF5ZXIuZ2V0KCd0eXBlJyk7XHJcbiAgICAvL3JldHVybnMgYSBwcm9taXNlIHdpdGggZmVhdHVyZXMgYXMgcmVzdWx0XHJcbiAgICByZXR1cm4gc291cmNlVHlwZVt0eXBlXShpZCwgbGF5ZXIsIHNlcnZlclVybCk7XHJcbn1cclxuXHJcbnNvdXJjZVR5cGUuQUdTX0ZFQVRVUkUgPSBmdW5jdGlvbiBhZ3NGZWF0dXJlKGlkLCBsYXllciwgc2VydmVyVXJsKSB7XHJcbiAgdmFyIGVzcmlTcnMgPSBwcm9qZWN0aW9uQ29kZS5zcGxpdCgnOicpLnBvcCgpO1xyXG4gIHZhciBsYXllcklkID0gbGF5ZXIuZ2V0KCdpZCcpO1xyXG4gIHZhciBlc3JpanNvbkZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuRXNyaUpTT04oKTtcclxuXHJcbiAgdmFyIHVybCA9IHNlcnZlclVybCArICcvJyArIGxheWVySWQgK1xyXG4gICAgICAnL3F1ZXJ5P2Y9anNvbiYnICtcclxuICAgICAgJ3JldHVybkdlb21ldHJ5PXRydWUnICtcclxuICAgICAgJyZvYmplY3RJZHM9JyArIGlkICtcclxuICAgICAgJyZnZW9tZXRyeVR5cGU9ZXNyaUdlb21ldHJ5RW52ZWxvcGUnK1xyXG4gICAgICAnJmluU1I9JyArIGVzcmlTcnMgK1xyXG4gICAgICAnJm91dEZpZWxkcz0qJyArXHJcbiAgICAgICcmcmV0dXJuSWRzT25seT1mYWxzZScgK1xyXG4gICAgICAnJnJldHVybkNvdW50T25seT1mYWxzZScgK1xyXG4gICAgICAnJmdlb21ldHJ5UHJlY2lzaW9uPTInICtcclxuICAgICAgJyZvdXRTUj0nICsgZXNyaVNycztcclxuXHJcbiAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29ucCdcclxuICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBpZihyZXNwb25zZS5lcnJvcikge1xyXG4gICAgICAgICAgICBmYWlsKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIGZlYXR1cmVzID0gZXNyaWpzb25Gb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVByb2plY3Rpb246IHZpZXdlci5nZXRQcm9qZWN0aW9uKClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmZWF0dXJlcztcclxuICAgICAgICB9XHJcbiAgICB9LCBmYWlsXHJcbiAgICApO1xyXG59XHJcblxyXG5zb3VyY2VUeXBlLldGUyA9IGZ1bmN0aW9uKGlkLCBsYXllciwgc2VydmVyVXJsKSB7XHJcbiAgdmFyIGdlb21ldHJ5TmFtZSA9IGxheWVyLmdldCgnZ2VvbWV0cnlOYW1lJyk7XHJcbiAgdmFyIGZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuR2VvSlNPTih7Z2VvbWV0cnlOYW1lOiBnZW9tZXRyeU5hbWV9KTtcclxuICB2YXIgdXJsID0gc2VydmVyVXJsICsnPyc7XHJcbiAgdmFyIGRhdGEgPSAnc2VydmljZT1XRlMnICtcclxuICAgICAgJyZ2ZXJzaW9uPTEuMC4wJyArXHJcbiAgICAgICcmcmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVOYW1lPScgKyBsYXllci5nZXQoJ25hbWUnKSArXHJcbiAgICAgICcmb3V0cHV0Rm9ybWF0PWpzb24nICtcclxuICAgICAgJyZmZWF0dXJlSWQ9JyArIGlkO1xyXG4gIHJldHVybiAkLmFqYXgoe1xyXG4gICAgdXJsOiB1cmwsXHJcbiAgICBkYXRhOiBkYXRhLFxyXG4gICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgZGF0YVR5cGU6ICdqc29uJ1xyXG4gIH0pXHJcbiAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBmb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmYWlsKHJlc3BvbnNlKSB7XHJcbiAgICBpZihyZXNwb25zZS5lcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmVycm9yLm1lc3NhZ2UgKyAnXFxuJyArXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLmVycm9yLmRldGFpbHMuam9pbignXFxuJykpO1xyXG4gICAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgbWFwdXRpbHMgPSByZXF1aXJlKCcuL21hcHV0aWxzJyk7XHJcbnZhciBnZXRBdHRyaWJ1dGVzID0gcmVxdWlyZSgnLi9nZXRhdHRyaWJ1dGVzJyk7XHJcbnZhciBmZWF0dXJlSW5mbyA9IHJlcXVpcmUoJy4vZmVhdHVyZWluZm8nKTtcclxuXHJcbnZhciBtYXA7XHJcblxyXG5mdW5jdGlvbiBnZXRGZWF0dXJlc0Zyb21SZW1vdGUoZXZ0KSB7XHJcbiAgICAgICAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG4gICAgICAgIHZhciByZXF1ZXN0UmVzdWx0ID0gW107XHJcbiAgICAgICAgdmFyIHJlcXVlc3RQcm9taXNlcyA9IGdldEZlYXR1cmVJbmZvUmVxdWVzdHMoZXZ0KS5tYXAoZnVuY3Rpb24ocmVxdWVzdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdC5mbi50aGVuKGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsYXllciA9IFZpZXdlci5nZXRMYXllcihyZXF1ZXN0LmxheWVyKTtcclxuICAgICAgICAgICAgICAgIGlmKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0UmVzdWx0LnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogbGF5ZXIuZ2V0KCd0aXRsZScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBnZXRBdHRyaWJ1dGVzKGZlYXR1cmUsIGxheWVyKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gJC53aGVuLmFwcGx5KCQsIHJlcXVlc3RQcm9taXNlcykudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXF1ZXN0UmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEZlYXR1cmVJbmZvUmVxdWVzdHMoZXZ0KSB7XHJcbiAgICB2YXIgcmVxdWVzdHMgPSBbXTtcclxuICAgIC8vQ2hlY2sgZm9yIHN1cHBvcnQgb2YgY3Jvc3NPcmlnaW4gaW4gaW1hZ2UsIGFic2VudCBpbiBJRSA4IGFuZCA5XHJcbiAgICBpZignY3Jvc3NPcmlnaW4nIGluIG5ldyhJbWFnZSkpIHtcclxuICAgICAgICBtYXAuZm9yRWFjaExheWVyQXRQaXhlbChldnQucGl4ZWwsIGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgICAgICAgIGlmIChsYXllci5nZXQoJ3F1ZXJ5YWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBnZXRHZXRGZWF0dXJlSW5mb1JlcXVlc3QobGF5ZXIsIGV2dC5jb29yZGluYXRlKTtcclxuICAgICAgICAgICAgICBpZihpdGVtKSB7cmVxdWVzdHMucHVzaChpdGVtKX07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vSWYgY2FudmFzIGlzIHRhaW50ZWRcclxuICAgIGVsc2UgaWYoaXNUYWludGVkKGV2dC5waXhlbCkpIHtcclxuICAgICAgICB2YXIgbGF5ZXJzID0gVmlld2VyLmdldFF1ZXJ5YWJsZUxheWVycygpO1xyXG4gICAgICAgIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgICAgICAgIGlmIChsYXllci5nZXQoJ3F1ZXJ5YWJsZScpKSB7XHJcblxyXG4gICAgICAgICAgICAgIC8vSWYgbGF5ZXIgaXMgdGFpbnRlZCwgdGhlbiBjcmVhdGUgcmVxdWVzdCBmb3IgbGF5ZXJcclxuICAgICAgICAgICAgICBpZihpc1RhaW50ZWQoZXZ0LnBpeGVsLCBsYXllcikpIHtcclxuICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBnZXRHZXRGZWF0dXJlSW5mb1JlcXVlc3QobGF5ZXIsIGV2dC5jb29yZGluYXRlKTtcclxuICAgICAgICAgICAgICAgICAgaWYoaXRlbSkge3JlcXVlc3RzLnB1c2goaXRlbSl9O1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgLy9JZiBsYXllciBpcyBub3QgdGFpbnRlZCwgdGVzdCBpZiBsYXllciBoaXQgYXQgcGl4ZWxcclxuICAgICAgICAgICAgICBlbHNlIGlmKGxheWVyQXRQaXhlbChldnQucGl4ZWwsIGxheWVyKSl7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGxheWVyLCBldnQuY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmKGl0ZW0pIHtyZXF1ZXN0cy5wdXNoKGl0ZW0pfTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8vSWYgY3Jvc3NPcmlnaW4gaXMgbm90IHN1cHBvcnRlZCBhbmQgY2FudmFzIG5vdCB0YWludGVkXHJcbiAgICBlbHNlIHtcclxuICAgICAgICBtYXAuZm9yRWFjaExheWVyQXRQaXhlbChldnQucGl4ZWwsIGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgICAgICAgIGlmIChsYXllci5nZXQoJ3F1ZXJ5YWJsZScpID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgdmFyIGl0ZW0gPSBnZXRHZXRGZWF0dXJlSW5mb1JlcXVlc3QobGF5ZXIsIGV2dC5jb29yZGluYXRlKTtcclxuICAgICAgICAgICAgICBpZiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdHMucHVzaChpdGVtKVxyXG4gICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXF1ZXN0cztcclxufVxyXG5mdW5jdGlvbiBnZXRHZXRGZWF0dXJlSW5mb1JlcXVlc3QobGF5ZXIsIGNvb3JkaW5hdGUpIHtcclxuICAgIHZhciBsYXllclR5cGUgPSBsYXllci5nZXQoJ3R5cGUnKSxcclxuICAgIG9iaiA9IHt9O1xyXG4gICAgb2JqLmxheWVyID0gbGF5ZXIuZ2V0KCduYW1lJyk7XHJcblxyXG4gICAgc3dpdGNoIChsYXllclR5cGUpIHtcclxuICAgICAgY2FzZSAnV01UUyc6XHJcbiAgICAgICAgaWYobGF5ZXIuZ2V0KCdmZWF0dXJlaW5mb0xheWVyJykpIHtcclxuICAgICAgICAgICAgdmFyIGZlYXR1cmVpbmZvTGF5ZXJOYW1lID0gbGF5ZXIuZ2V0KCdmZWF0dXJlaW5mb0xheWVyJyksXHJcbiAgICAgICAgICAgIGZlYXR1cmVpbmZvTGF5ZXIgPSBWaWV3ZXIuZ2V0TGF5ZXIoZmVhdHVyZWluZm9MYXllck5hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGZlYXR1cmVpbmZvTGF5ZXIsIGNvb3JkaW5hdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ1dNUyc6XHJcbiAgICAgICAgaWYobGF5ZXIuZ2V0KCdmZWF0dXJlaW5mb0xheWVyJykpIHtcclxuICAgICAgICAgICAgdmFyIGZlYXR1cmVpbmZvTGF5ZXJOYW1lID0gbGF5ZXIuZ2V0KCdmZWF0dXJlaW5mb0xheWVyJyksXHJcbiAgICAgICAgICAgIGZlYXR1cmVpbmZvTGF5ZXIgPSBWaWV3ZXIuZ2V0TGF5ZXIoZmVhdHVyZWluZm9MYXllck5hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGZlYXR1cmVpbmZvTGF5ZXIsIGNvb3JkaW5hdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JqLmNiID0gXCJHRU9KU09OXCI7XHJcbiAgICAgICAgICAgIG9iai5mbiA9IGdldEdldEZlYXR1cmVJbmZvVXJsKGxheWVyLCBjb29yZGluYXRlKTtcclxuICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2FzZSAnQUdTX1RJTEUnOlxyXG4gICAgICAgICAgICBpZihsYXllci5nZXQoJ2ZlYXR1cmVpbmZvTGF5ZXInKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZlYXR1cmVpbmZvTGF5ZXJOYW1lID0gbGF5ZXIuZ2V0KCdmZWF0dXJlaW5mb0xheWVyJyksXHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlaW5mb0xheWVyID0gVmlld2VyLmdldExheWVyKGZlYXR1cmVpbmZvTGF5ZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBnZXRHZXRGZWF0dXJlSW5mb1JlcXVlc3QoZmVhdHVyZWluZm9MYXllciwgY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmouZm4gPSBnZXRBR1NJZGVudGlmeVVybChsYXllciwgY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1RhaW50ZWQocGl4ZWwsIGxheWVyRmlsdGVyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGlmKGxheWVyRmlsdGVyKSB7XHJcbiAgICAgICAgICAgIG1hcC5mb3JFYWNoTGF5ZXJBdFBpeGVsKHBpeGVsLCBmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxheWVyRmlsdGVyID09PSBsYXllcjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBtYXAuZm9yRWFjaExheWVyQXRQaXhlbChwaXhlbCwgZnVuY3Rpb24obGF5ZXIpIHt9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY2F0Y2goZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGxheWVyQXRQaXhlbChwaXhlbCwgbWF0Y2hMYXllcikge1xyXG4gICAgbWFwLmZvckVhY2hMYXllckF0UGl4ZWwocGl4ZWwsIGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG1hdGNoTGF5ZXIgPT09IGxheWVyO1xyXG4gICAgfSlcclxufVxyXG5mdW5jdGlvbiBnZXRGZWF0dXJlc0F0UGl4ZWwoZXZ0LCBjbHVzdGVyRmVhdHVyZWluZm9MZXZlbCkge1xyXG4gICAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG4gICAgdmFyIHJlc3VsdCA9IFtdLFxyXG4gICAgY2x1c3RlciA9IGZhbHNlO1xyXG4gICAgbWFwLmZvckVhY2hGZWF0dXJlQXRQaXhlbChldnQucGl4ZWwsXHJcbiAgICAgICAgZnVuY3Rpb24oZmVhdHVyZSwgbGF5ZXIpIHtcclxuICAgICAgICAgIHZhciBsID0gbGF5ZXI7XHJcbiAgICAgICAgICB2YXIgcXVlcnlhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICBpZihsYXllcikge1xyXG4gICAgICAgICAgICAgIHF1ZXJ5YWJsZSA9IGxheWVyLmdldCgncXVlcnlhYmxlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBpZihmZWF0dXJlLmdldCgnZmVhdHVyZXMnKSkge1xyXG4gICAgICAgICAgICAgIC8vSWYgY2x1c3RlclxyXG4gICAgICAgICAgICAgIHZhciBjb2xsZWN0aW9uID0gZmVhdHVyZS5nZXQoJ2ZlYXR1cmVzJyk7XHJcbiAgICAgICAgICAgICAgaWYgKGNvbGxlY3Rpb24ubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHpvb20gPSBtYXAuZ2V0VmlldygpLmdldFpvb20oKTtcclxuICAgICAgICAgICAgICAgIHZhciB6b29tTGltaXQgPSBjbHVzdGVyRmVhdHVyZWluZm9MZXZlbCA9PT0gLTEgPyBWaWV3ZXIuZ2V0UmVzb2x1dGlvbnMoKS5sZW5ndGggOiB6b29tICsgY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWw7XHJcbiAgICAgICAgICAgICAgICBpZih6b29tTGltaXQgPCBWaWV3ZXIuZ2V0UmVzb2x1dGlvbnMoKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXAuZ2V0VmlldygpLnNldENlbnRlcihldnQuY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRab29tKHpvb20gKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICBjbHVzdGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24uZm9yRWFjaChmdW5jdGlvbihmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGl0ZW0gPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnRpdGxlID0gbC5nZXQoJ3RpdGxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5mZWF0dXJlID0gZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmNvbnRlbnQgPSAgZ2V0QXR0cmlidXRlcyhmLGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICBlbHNlIGlmKGNvbGxlY3Rpb24ubGVuZ3RoID09IDEgJiYgcXVlcnlhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0ge307XHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0udGl0bGUgPSBsLmdldCgndGl0bGUnKTtcclxuICAgICAgICAgICAgICAgICAgaXRlbS5mZWF0dXJlID0gY29sbGVjdGlvblswXTtcclxuICAgICAgICAgICAgICAgICAgaXRlbS5jb250ZW50ID0gZ2V0QXR0cmlidXRlcyhjb2xsZWN0aW9uWzBdLGwpO1xyXG4gICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIGlmKHF1ZXJ5YWJsZSkge1xyXG4gICAgICAgICAgICAgIHZhciBpdGVtID0ge307XHJcbiAgICAgICAgICAgICAgaXRlbS50aXRsZSA9IGwuZ2V0KCd0aXRsZScpO1xyXG4gICAgICAgICAgICAgIGl0ZW0uZmVhdHVyZSA9IGZlYXR1cmU7XHJcbiAgICAgICAgICAgICAgaXRlbS5jb250ZW50ID0gZ2V0QXR0cmlidXRlcyhmZWF0dXJlLGwpXHJcbiAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICBoaXRUb2xlcmFuY2U6IGZlYXR1cmVJbmZvLmdldEhpdFRvbGVyYW5jZSgpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgaWYoY2x1c3Rlcikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2V0R2V0RmVhdHVyZUluZm9VcmwobGF5ZXIsIGNvb3JkaW5hdGUpIHtcclxuICAgIHZhciB1cmwgPSBsYXllci5nZXRTb3VyY2UoKS5nZXRHZXRGZWF0dXJlSW5mb1VybChcclxuICAgIGNvb3JkaW5hdGUsIG1hcC5nZXRWaWV3KCkuZ2V0UmVzb2x1dGlvbigpLCBWaWV3ZXIuZ2V0UHJvamVjdGlvbigpLFxyXG4gICAgeydJTkZPX0ZPUk1BVCc6ICdhcHBsaWNhdGlvbi9qc29uJ30pO1xyXG5cclxuICAgIHJldHVybiAkLmFqYXgodXJsLCB7XHJcbiAgICAgIHR5cGU6ICdwb3N0J1xyXG4gICAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgaWYocmVzcG9uc2UuZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG1hcHV0aWxzLmdlb2pzb25Ub0ZlYXR1cmUocmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICk7XHJcbn1cclxuZnVuY3Rpb24gZ2V0QUdTSWRlbnRpZnlVcmwobGF5ZXIsIGNvb3JkaW5hdGUpIHtcclxuICB2YXIgcHJvamVjdGlvbkNvZGUgPSBWaWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICB2YXIgZXNyaVNycyA9IHByb2plY3Rpb25Db2RlLnNwbGl0KCc6JykucG9wKCk7XHJcbiAgdmFyIGxheWVySWQgPSBsYXllci5nZXQoJ2lkJyk7XHJcbiAgdmFyIHNvdXJjZSA9IFZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllci5nZXQoJ3NvdXJjZU5hbWUnKV07XHJcbiAgdmFyIHNlcnZlclVybCA9IHNvdXJjZS51cmw7XHJcbiAgdmFyIGVzcmlqc29uRm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5Fc3JpSlNPTigpO1xyXG4gIHZhciBzaXplID0gbWFwLmdldFNpemUoKTtcclxuICB2YXIgdG9sZXJhbmNlID0gc291cmNlLmhhc093blByb3BlcnR5KCd0b2xlcmFuY2UnKSA/IHNvdXJjZS50b2xlcmFuY2UudG9TdHJpbmcoKSA6IDU7XHJcbiAgdmFyIGV4dGVudCA9IG1hcC5nZXRWaWV3KCkuY2FsY3VsYXRlRXh0ZW50KHNpemUpO1xyXG5cclxuICB2YXIgdXJsID0gc2VydmVyVXJsICtcclxuICAgICAgJy9pZGVudGlmeT9mPWpzb24mJyArXHJcbiAgICAgICdyZXR1cm5HZW9tZXRyeT10cnVlJyArXHJcbiAgICAgICcmZ2VvbWV0cnlUeXBlPWVzcmlHZW9tZXRyeVBvaW50JytcclxuICAgICAgJyZzcj0nICsgZXNyaVNycyArXHJcbiAgICAgICcmZ2VvbWV0cnk9JyArIGNvb3JkaW5hdGUgK1xyXG4gICAgICAnJm91dEZpZWxkcz0qJyArXHJcbiAgICAgICcmZ2VvbWV0cnlQcmVjaXNpb249MicgK1xyXG4gICAgICAnJnRvbGVyYW5jZT0nICsgdG9sZXJhbmNlICtcclxuICAgICAgJyZsYXllcnM9YWxsOicgKyBsYXllcklkICtcclxuICAgICAgJyZtYXBFeHRlbnQ9JyArIGV4dGVudCArXHJcbiAgICAgICcmaW1hZ2VEaXNwbGF5PScgKyBzaXplICsgJywnICsgJzk2JztcclxuXHJcbiAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29ucCdcclxuICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICBpZihyZXNwb25zZS5lcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB2YXIgb2JqID0ge307XHJcbiAgICAgICAgICAgIG9iai5mZWF0dXJlcyA9IHJlc3BvbnNlLnJlc3VsdHM7XHJcbiAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IGVzcmlqc29uRm9ybWF0LnJlYWRGZWF0dXJlcyhvYmosIHtcclxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlUHJvamVjdGlvbjogVmlld2VyLmdldFByb2plY3Rpb24oKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZlYXR1cmVzWzBdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgICk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmdldEZlYXR1cmVzRnJvbVJlbW90ZSA9IGdldEZlYXR1cmVzRnJvbVJlbW90ZTtcclxubW9kdWxlLmV4cG9ydHMuZ2V0RmVhdHVyZXNBdFBpeGVsID0gZ2V0RmVhdHVyZXNBdFBpeGVsO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbnZhciBtYXA7XHJcbnZhciB0b29sdGlwO1xyXG52YXIgZXh0ZW50O1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8ICcjby10b29sYmFyLW5hdmlnYXRpb24nO1xyXG4gIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuICB0b29sdGlwID0gb3B0aW9ucy50b29sdGlwVGV4dCB8fCAnWm9vbWEgdGlsbCBoZWxhIGthcnRhbic7XHJcbiAgZXh0ZW50ID0gb3B0aW9ucy5leHRlbnQgfHwgbWFwLmdldFZpZXcoKS5jYWxjdWxhdGVFeHRlbnQobWFwLmdldFNpemUoKSk7XHJcbiAgcmVuZGVyKHRhcmdldCk7XHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIodGFyZ2V0KSB7XHJcbiAgdmFyIGVsID0gdXRpbHMuY3JlYXRlQnV0dG9uKHtcclxuICAgIGlkOiAnby1ob21lLWJ1dHRvbicsXHJcbiAgICBpY29uQ2xzOiAnby1pY29uLWZhLWhvbWUnLFxyXG4gICAgc3JjOiAnI2ZhLWhvbWUnLFxyXG4gICAgdG9vbHRpcFRleHQ6IHRvb2x0aXBcclxuICB9KTtcclxuICAkKHRhcmdldCkuYXBwZW5kKGVsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkKCcjby1ob21lLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIG1hcC5nZXRWaWV3KCkuZml0KGV4dGVudCk7XHJcbiAgICAkKCcjby1ob21lLWJ1dHRvbiBidXR0b24nKS5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgdmVjdG9yID0gcmVxdWlyZSgnLi92ZWN0b3InKTtcclxuXHJcbnZhciBhZ3NGZWF0dXJlID0gZnVuY3Rpb24gYWdzRmVhdHVyZShsYXllck9wdGlvbnMpIHtcclxuICB2YXIgYWdzRGVmYXVsdCA9IHtcclxuICAgIGxheWVyVHlwZTogJ3ZlY3RvcidcclxuICB9O1xyXG4gIHZhciBzb3VyY2VEZWZhdWx0ID0ge307XHJcbiAgdmFyIGFnc09wdGlvbnMgPSAkLmV4dGVuZChhZ3NEZWZhdWx0LCBsYXllck9wdGlvbnMpO1xyXG4gIHZhciBzb3VyY2VPcHRpb25zID0gJC5leHRlbmQoc291cmNlRGVmYXVsdCwgdmlld2VyLmdldE1hcFNvdXJjZSgpW2xheWVyT3B0aW9ucy5zb3VyY2VOYW1lXSk7XHJcbiAgc291cmNlT3B0aW9ucy5nZW9tZXRyeU5hbWUgPSBhZ3NPcHRpb25zLmdlb21ldHJ5TmFtZTtcclxuICBzb3VyY2VPcHRpb25zLmZpbHRlciA9IGFnc09wdGlvbnMuZmlsdGVyO1xyXG4gIHNvdXJjZU9wdGlvbnMuYXR0cmlidXRpb24gPSBhZ3NPcHRpb25zLmF0dHJpYnV0aW9uO1xyXG4gIHNvdXJjZU9wdGlvbnMucHJvamVjdGlvbkNvZGUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICBzb3VyY2VPcHRpb25zLmlkID0gYWdzT3B0aW9ucy5pZDtcclxuXHJcbiAgdmFyIGFnc1NvdXJjZSA9IGNyZWF0ZVNvdXJjZShzb3VyY2VPcHRpb25zKTtcclxuICByZXR1cm4gdmVjdG9yKGFnc09wdGlvbnMsIGFnc1NvdXJjZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVNvdXJjZShvcHRpb25zKSB7XHJcbiAgICB2YXIgdmVjdG9yU291cmNlID0gbnVsbDtcclxuICAgIHZhciBlc3JpU3JzID0gb3B0aW9ucy5wcm9qZWN0aW9uQ29kZS5zcGxpdCgnOicpLnBvcCgpO1xyXG4gICAgdmFyIHF1ZXJ5RmlsdGVyID0gb3B0aW9ucy5maWx0ZXIgPyAnJndoZXJlPScgKyBvcHRpb25zLmZpbHRlciA6ICcnO1xyXG4gICAgdmFyIGVzcmlqc29uRm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5Fc3JpSlNPTigpO1xyXG4gICAgdmVjdG9yU291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xyXG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb24sXHJcbiAgICAgIGxvYWRlcjogZnVuY3Rpb24oZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgIHZhciB1cmwgPSBvcHRpb25zLnVybCArIG9wdGlvbnMuaWQgK1xyXG4gICAgICAgICAgZW5jb2RlVVJJKCcvcXVlcnk/Zj1qc29uJicgK1xyXG4gICAgICAgICAgICAncmV0dXJuR2VvbWV0cnk9dHJ1ZScgK1xyXG4gICAgICAgICAgICAnJnNwYXRpYWxSZWw9ZXNyaVNwYXRpYWxSZWxJbnRlcnNlY3RzJyArXHJcbiAgICAgICAgICAgICcmZ2VvbWV0cnk9JyArICd7XCJ4bWluXCI6JyArIGV4dGVudFswXSArICcsXCJ5bWluXCI6JyArXHJcbiAgICAgICAgICAgICAgZXh0ZW50WzFdICsgJyxcInhtYXhcIjonICsgZXh0ZW50WzJdICsgJyxcInltYXhcIjonICsgZXh0ZW50WzNdICtcclxuICAgICAgICAgICAgICAnLFwic3BhdGlhbFJlZmVyZW5jZVwiOntcIndraWRcIjonICsgZXNyaVNycyArICd9fScgK1xyXG4gICAgICAgICAgICAnJmdlb21ldHJ5VHlwZT1lc3JpR2VvbWV0cnlFbnZlbG9wZScgK1xyXG4gICAgICAgICAgICAnJmluU1I9JyArIGVzcmlTcnMgKyAnJm91dEZpZWxkcz0qJyArICcnICtcclxuICAgICAgICAgICAgJyZyZXR1cm5JZHNPbmx5PWZhbHNlJnJldHVybkNvdW50T25seT1mYWxzZScgK1xyXG4gICAgICAgICAgICAnJmdlb21ldHJ5UHJlY2lzaW9uPTInICtcclxuICAgICAgICAgICAgJyZvdXRTUj0nICsgZXNyaVNycyArIHF1ZXJ5RmlsdGVyKTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICBkYXRhVHlwZTogJ2pzb25wJyxcclxuICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgIGFsZXJ0KHJlc3BvbnNlLmVycm9yLm1lc3NhZ2UgKyAnXFxuJyArXHJcbiAgICAgICAgICAgICAgICByZXNwb25zZS5lcnJvci5kZXRhaWxzLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgLy8gZGF0YVByb2plY3Rpb24gd2lsbCBiZSByZWFkIGZyb20gZG9jdW1lbnRcclxuICAgICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSBlc3JpanNvbkZvcm1hdC5yZWFkRmVhdHVyZXMocmVzcG9uc2UsIHtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiBwcm9qZWN0aW9uXHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgaWYgKGZlYXR1cmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoYXQuYWRkRmVhdHVyZXMoZmVhdHVyZXMpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBzdHJhdGVneTogb2wubG9hZGluZ3N0cmF0ZWd5LmJib3hcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZlY3RvclNvdXJjZTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gYWdzRmVhdHVyZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHRpbGUgPSByZXF1aXJlKCcuL3RpbGUnKTtcclxuXHJcbnZhciBhZ3NUaWxlID0gZnVuY3Rpb24gYWdzVGlsZShsYXllck9wdGlvbnMpIHtcclxuICB2YXIgYWdzRGVmYXVsdCA9IHtcclxuICAgIGxheWVyVHlwZTogJ3RpbGUnLFxyXG4gICAgZmVhdHVyZWluZm9MYXllcjogdW5kZWZpbmVkXHJcbiAgfTtcclxuICB2YXIgc291cmNlRGVmYXVsdCA9IHt9O1xyXG4gIHZhciBhZ3NPcHRpb25zID0gJC5leHRlbmQoYWdzRGVmYXVsdCwgbGF5ZXJPcHRpb25zKTtcclxuICB2YXIgc291cmNlT3B0aW9ucyA9ICQuZXh0ZW5kKHNvdXJjZURlZmF1bHQsIHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllck9wdGlvbnMuc291cmNlXSk7XHJcbiAgc291cmNlT3B0aW9ucy5hdHRyaWJ1dGlvbiA9IGFnc09wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uID0gdmlld2VyLmdldFByb2plY3Rpb24oKTtcclxuICBzb3VyY2VPcHRpb25zLnBhcmFtcyA9IGFnc09wdGlvbnMucGFyYW1zIHx8IHt9O1xyXG4gIHNvdXJjZU9wdGlvbnMucGFyYW1zLmxheWVycyA9IFwic2hvdzpcIiArIGFnc09wdGlvbnMuaWQ7XHJcblxyXG4gIHZhciBhZ3NTb3VyY2UgPSBjcmVhdGVTb3VyY2Uoc291cmNlT3B0aW9ucyk7XHJcbiAgcmV0dXJuIHRpbGUoYWdzT3B0aW9ucywgYWdzU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgb2wuc291cmNlLlRpbGVBcmNHSVNSZXN0KHtcclxuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9uLFxyXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb24sXHJcbiAgICAgIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcclxuICAgICAgcGFyYW1zOiBvcHRpb25zLnBhcmFtcyxcclxuICAgICAgdXJsOiBvcHRpb25zLnVybFxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGFnc1RpbGU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgdmVjdG9yID0gcmVxdWlyZSgnLi92ZWN0b3InKTtcclxuXHJcbnZhciBmZWF0dXJlTGF5ZXIgPSBmdW5jdGlvbiBmZWF0dXJlTGF5ZXIobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBsYXllck9wdGlvbnM7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSB7fTtcclxuICB2YXIgdmVjdG9yU291cmNlO1xyXG4gIHNvdXJjZU9wdGlvbnMuYXR0cmlidXRpb24gPSBsYXllck9wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5mZWF0dXJlcyA9IGxheWVyT3B0aW9ucy5mZWF0dXJlcztcclxuXHJcbiAgdmVjdG9yU291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB2ZWN0b3Iob3B0aW9ucywgdmVjdG9yU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgZmVhdHVyZXM6IG9wdGlvbnMuZmVhdHVyZXNcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmZWF0dXJlTGF5ZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciB2ZWN0b3IgPSByZXF1aXJlKCcuL3ZlY3RvcicpO1xyXG52YXIgaXNVcmwgPSByZXF1aXJlKCcuLi91dGlscy9pc3VybCcpO1xyXG5cclxudmFyIGdlb2pzb24gPSBmdW5jdGlvbiBnZW9qc29uKGxheWVyT3B0aW9ucykge1xyXG4gIHZhciBiYXNlVXJsID0gdmlld2VyLmdldEJhc2VVcmwoKTtcclxuICB2YXIgZ2VvanNvbkRlZmF1bHQgPSB7XHJcbiAgICBsYXllclR5cGU6ICd2ZWN0b3InXHJcbiAgfTtcclxuICB2YXIgZ2VvanNvbk9wdGlvbnMgPSAkLmV4dGVuZChnZW9qc29uRGVmYXVsdCwgbGF5ZXJPcHRpb25zKTtcclxuICB2YXIgZ2VvanNvblNvdXJjZTtcclxuICB2YXIgc291cmNlT3B0aW9ucyA9IHt9O1xyXG4gIHNvdXJjZU9wdGlvbnMuYXR0cmlidXRpb24gPSBnZW9qc29uT3B0aW9ucy5hdHRyaWJ1dGlvbjtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgc291cmNlT3B0aW9ucy5zb3VyY2VOYW1lID0gbGF5ZXJPcHRpb25zLnNvdXJjZTtcclxuICBpZiAoaXNVcmwoZ2VvanNvbk9wdGlvbnMuc291cmNlKSkge1xyXG4gICAgc291cmNlT3B0aW9ucy51cmwgPSBnZW9qc29uT3B0aW9ucy5zb3VyY2U7XHJcbiAgfSBlbHNlIHtcclxuICAgIGdlb2pzb25PcHRpb25zLnNvdXJjZU5hbWUgPSBnZW9qc29uT3B0aW9ucy5zb3VyY2U7XHJcbiAgICBzb3VyY2VPcHRpb25zLnVybCA9IGJhc2VVcmwgKyBnZW9qc29uT3B0aW9ucy5zb3VyY2U7XHJcbiAgfVxyXG5cclxuICBnZW9qc29uU291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB2ZWN0b3IoZ2VvanNvbk9wdGlvbnMsIGdlb2pzb25Tb3VyY2UpO1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVTb3VyY2Uob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIG5ldyBvbC5zb3VyY2UuVmVjdG9yKHtcclxuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9uLFxyXG4gICAgICB1cmw6IG9wdGlvbnMudXJsLFxyXG4gICAgICBmb3JtYXQ6IG5ldyBvbC5mb3JtYXQuR2VvSlNPTigpXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2VvanNvbjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcblxyXG52YXIgZ3JvdXAgPSBmdW5jdGlvbiBncm91cChsYXllck9wdGlvbnMpIHtcclxuICB2YXIgZ3JvdXBEZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAnZ3JvdXAnLFxyXG4gICAgc3R5bGVOYW1lOiAnZGVmYXVsdCdcclxuICB9O1xyXG4gIHZhciBncm91cE9wdGlvbnMgPSAkLmV4dGVuZChncm91cERlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgcmV0dXJuIG5ldyBvbC5sYXllci5Hcm91cChncm91cE9wdGlvbnMpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdyb3VwO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHRpbGUgPSByZXF1aXJlKCcuL3RpbGUnKTtcclxuXHJcbnZhciBvc20gPSBmdW5jdGlvbiBvc20obGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIG9zbURlZmF1bHQgPSB7fTtcclxuICB2YXIgb3NtT3B0aW9ucyA9ICQuZXh0ZW5kKG9zbURlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcblxyXG4gIHZhciBvc21Tb3VyY2UgPSBjcmVhdGVTb3VyY2UoKTtcclxuICByZXR1cm4gdGlsZShvc21PcHRpb25zLCBvc21Tb3VyY2UpO1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVTb3VyY2UoKSB7XHJcbiAgICByZXR1cm4gbmV3IG9sLnNvdXJjZS5PU00oKVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBvc207XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0aWxlKG9wdGlvbnMsIHNvdXJjZSkge1xyXG4gIG9wdGlvbnMuc291cmNlID0gc291cmNlO1xyXG4gIHJldHVybiBuZXcgb2wubGF5ZXIuVGlsZShvcHRpb25zKTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgdmVjdG9yID0gcmVxdWlyZSgnLi92ZWN0b3InKTtcclxudmFyIGlzVXJsID0gcmVxdWlyZSgnLi4vdXRpbHMvaXN1cmwnKTtcclxuXHJcbnZhciB0b3BvanNvbiA9IGZ1bmN0aW9uIHRvcG9qc29uKGxheWVyT3B0aW9ucykge1xyXG4gIHZhciBiYXNlVXJsID0gdmlld2VyLmdldEJhc2VVcmwoKTtcclxuICB2YXIgdG9wb2pzb25EZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAndmVjdG9yJ1xyXG4gIH07XHJcbiAgdmFyIHRvcG9qc29uT3B0aW9ucyA9ICQuZXh0ZW5kKHRvcG9qc29uRGVmYXVsdCwgbGF5ZXJPcHRpb25zKTtcclxuICB2YXIgdG9wb2pzb25Tb3VyY2U7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSB7fTtcclxuICBzb3VyY2VPcHRpb25zLmF0dHJpYnV0aW9uID0gdG9wb2pzb25PcHRpb25zLmF0dHJpYnV0aW9uO1xyXG4gIHNvdXJjZU9wdGlvbnMucHJvamVjdGlvbkNvZGUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICBzb3VyY2VPcHRpb25zLnNvdXJjZU5hbWUgPSBsYXllck9wdGlvbnMuc291cmNlO1xyXG4gIGlmIChpc1VybCh0b3BvanNvbk9wdGlvbnMuc291cmNlKSkge1xyXG4gICAgc291cmNlT3B0aW9ucy51cmwgPSB0b3BvanNvbk9wdGlvbnMuc291cmNlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0b3BvanNvbk9wdGlvbnMuc291cmNlTmFtZSA9IHRvcG9qc29uT3B0aW9ucy5zb3VyY2U7XHJcbiAgICBzb3VyY2VPcHRpb25zLnVybCA9IGJhc2VVcmwgKyB0b3BvanNvbk9wdGlvbnMuc291cmNlO1xyXG4gIH1cclxuXHJcbiAgdG9wb2pzb25Tb3VyY2UgPSBjcmVhdGVTb3VyY2Uoc291cmNlT3B0aW9ucyk7XHJcbiAgcmV0dXJuIHZlY3Rvcih0b3BvanNvbk9wdGlvbnMsIHRvcG9qc29uU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgdXJsOiBvcHRpb25zLnVybCxcclxuICAgICAgZm9ybWF0OiBuZXcgb2wuZm9ybWF0LlRvcG9KU09OKHtcclxuICAgICAgICBkZWZhdWx0RGF0YVByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbkNvZGVcclxuICAgICAgfSlcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB0b3BvanNvbjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciBzdHlsZSA9IHJlcXVpcmUoJy4uL3N0eWxlJykoKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB2ZWN0b3Iob3B0aW9ucywgc291cmNlKSB7XHJcbiAgdmFyIHZlY3RvckxheWVyO1xyXG4gIHN3aXRjaCAob3B0aW9ucy5sYXllclR5cGUpIHtcclxuICAgIGNhc2UgJ3ZlY3Rvcic6XHJcbiAgICAgIG9wdGlvbnMuc291cmNlID0gc291cmNlO1xyXG4gICAgICBvcHRpb25zLnN0eWxlID0gc3R5bGUuY3JlYXRlU3R5bGUob3B0aW9ucy5zdHlsZSk7XHJcbiAgICAgIHZlY3RvckxheWVyID0gbmV3IG9sLmxheWVyLlZlY3RvcihvcHRpb25zKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdjbHVzdGVyJzpcclxuICAgICAgb3B0aW9ucy5jbHVzdGVyT3B0aW9ucyA9IG9wdGlvbnMuY2x1c3Rlck9wdGlvbnMgfHwge307XHJcbiAgICAgIGlmKG9wdGlvbnMudHlwZSA9PT0gJ1dGUycgfHwgb3B0aW9ucy50eXBlID09PSAnQUdTX0ZFQVRVUkUnKXtcclxuICAgICAgICBzb3VyY2UuY2x1c3Rlck9wdGlvbnMgPSB2aWV3ZXIuZ2V0TWFwU291cmNlKClbb3B0aW9ucy5zb3VyY2VOYW1lXS5jbHVzdGVyT3B0aW9ucyB8fCB7fTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzb3VyY2UuY2x1c3Rlck9wdGlvbnMgPSB7fTtcclxuICAgICAgfVxyXG4gICAgICB2YXIgZGlzdGFuY2UgPSA2MDtcclxuICAgICAgdmFyIGNsdXN0ZXJEaXN0YW5jZSA9IG9wdGlvbnMuY2x1c3Rlck9wdGlvbnMuY2x1c3RlckRpc3RhbmNlIHx8IHNvdXJjZS5jbHVzdGVyT3B0aW9ucy5jbHVzdGVyRGlzdGFuY2UgfHwgdmlld2VyLmdldENsdXN0ZXJPcHRpb25zKCkuY2x1c3RlckRpc3RhbmNlIHx8IGRpc3RhbmNlO1xyXG4gICAgICB2YXIgY2x1c3Rlck1heFpvb20gPSBvcHRpb25zLmNsdXN0ZXJPcHRpb25zLmNsdXN0ZXJNYXhab29tIHx8IHNvdXJjZS5jbHVzdGVyT3B0aW9ucy5jbHVzdGVyTWF4Wm9vbSB8fCB2aWV3ZXIuZ2V0Q2x1c3Rlck9wdGlvbnMoKS5jbHVzdGVyTWF4Wm9vbSB8fCB2aWV3ZXIuZ2V0UmVzb2x1dGlvbnMoKS5sZW5ndGgtMTtcclxuICAgICAgdmFyIGNsdXN0ZXJJbml0aWFsRGlzdGFuY2UgPSB2aWV3ZXIuZ2V0U2V0dGluZ3MoKS56b29tID4gY2x1c3Rlck1heFpvb20gPyAwIDogY2x1c3RlckRpc3RhbmNlO1xyXG4gICAgICB2YXIgbWFwID0gdmlld2VyLmdldE1hcCgpO1xyXG4gICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XHJcbiAgICAgIHZhciBtYXhab29tID0gdmlldy5nZXRSZXNvbHV0aW9ucygpLmxlbmd0aC0xO1xyXG4gICAgICBvcHRpb25zLnNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuQ2x1c3Rlcih7XHJcbiAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9uLFxyXG4gICAgICAgIHNvdXJjZTogc291cmNlLFxyXG4gICAgICAgIGRpc3RhbmNlOiBjbHVzdGVySW5pdGlhbERpc3RhbmNlXHJcbiAgICAgIH0pO1xyXG4gICAgICBvcHRpb25zLnNvdXJjZS5zZXRQcm9wZXJ0aWVzKHtcclxuICAgICAgICBjbHVzdGVyRGlzdGFuY2UgOiBjbHVzdGVyRGlzdGFuY2UsXHJcbiAgICAgICAgY2x1c3Rlck1heFpvb20gOiBjbHVzdGVyTWF4Wm9vbVxyXG4gICAgICB9KTtcclxuICAgICAgb3B0aW9ucy5zdHlsZSA9IHN0eWxlLmNyZWF0ZVN0eWxlKG9wdGlvbnMuc3R5bGUsIG9wdGlvbnMuY2x1c3RlclN0eWxlKTtcclxuICAgICAgdmVjdG9yTGF5ZXIgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKG9wdGlvbnMpO1xyXG4gICAgICBtYXAub24oJ21vdmVzdGFydCcsIG9uTW92ZVN0YXJ0KTtcclxuXHJcbiAgICAgIGZ1bmN0aW9uIG9uTW92ZVN0YXJ0KGV2dCkge1xyXG4gICAgICAgIHZhciBtYXBab29tID0gdmlldy5nZXRab29tRm9yUmVzb2x1dGlvbihldnQuZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbik7XHJcbiAgICAgICAgdmFyIGNsdXN0ZXJEaXN0YW5jZSA9IG9wdGlvbnMuc291cmNlLmdldFByb3BlcnRpZXMoKS5jbHVzdGVyRGlzdGFuY2UgfHwgZGlzdGFuY2U7XHJcbiAgICAgICAgdmFyIGNsdXN0ZXJNYXhab29tID0gb3B0aW9ucy5zb3VyY2UuZ2V0UHJvcGVydGllcygpLmNsdXN0ZXJNYXhab29tIHx8IG1heFpvb207XHJcbiAgICAgICAgbWFwLm9uY2UoJ21vdmVlbmQnLCBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICAgIHZhciBjdXJyZW50Wm9vbSA9IHBhcnNlSW50KHZpZXcuZ2V0Wm9vbSgpLCAxMCk7XHJcbiAgICAgICAgICBpZiAoY3VycmVudFpvb20gIT09IG1hcFpvb20pIHtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRab29tID49IGNsdXN0ZXJNYXhab29tKSB7XHJcbiAgICAgICAgICAgICAgb3B0aW9ucy5zb3VyY2Uuc2V0RGlzdGFuY2UoMCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFpvb20gPCBjbHVzdGVyTWF4Wm9vbSkge1xyXG4gICAgICAgICAgICAgIG9wdGlvbnMuc291cmNlLnNldERpc3RhbmNlKGNsdXN0ZXJEaXN0YW5jZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnaW1hZ2UnOlxyXG4gICAgICBvcHRpb25zLnNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuSW1hZ2VWZWN0b3Ioe1xyXG4gICAgICAgIHNvdXJjZTogc291cmNlLFxyXG4gICAgICAgIHN0eWxlOiBzdHlsZS5jcmVhdGVTdHlsZShvcHRpb25zLnN0eWxlKVxyXG4gICAgICB9KTtcclxuICAgICAgdmVjdG9yTGF5ZXIgPSBuZXcgb2wubGF5ZXIuSW1hZ2Uob3B0aW9ucyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAndmVjdG9ydGlsZSc6XHJcbiAgICAgIG9wdGlvbnMuc291cmNlID0gc291cmNlO1xyXG4gICAgICBvcHRpb25zLnN0eWxlID0gc3R5bGUuY3JlYXRlU3R5bGUob3B0aW9ucy5zdHlsZSk7XHJcbiAgICAgIHZlY3RvckxheWVyID0gbmV3IG9sLmxheWVyLlZlY3RvclRpbGUob3B0aW9ucyk7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxuICByZXR1cm4gdmVjdG9yTGF5ZXI7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHZlY3RvciA9IHJlcXVpcmUoJy4vdmVjdG9yJyk7XHJcbnZhciBtYXB1dGlscyA9IHJlcXVpcmUoJy4uL21hcHV0aWxzJyk7XHJcblxyXG52YXIgdmVjdG9ydGlsZSA9IGZ1bmN0aW9uIHZlY3RvcnRpbGUobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIHZlY3RvcnRpbGVEZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAndmVjdG9ydGlsZScsXHJcbiAgICBmZWF0dXJlaW5mb0xheWVyOiB1bmRlZmluZWRcclxuICB9O1xyXG4gIHZhciBzb3VyY2VEZWZhdWx0ID0ge307XHJcbiAgdmFyIHZlY3RvcnRpbGVPcHRpb25zID0gJC5leHRlbmQodmVjdG9ydGlsZURlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgdmVjdG9ydGlsZU9wdGlvbnMuc291cmNlTmFtZSA9IHZlY3RvcnRpbGVPcHRpb25zLm5hbWU7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSAkLmV4dGVuZChzb3VyY2VEZWZhdWx0LCB2aWV3ZXIuZ2V0TWFwU291cmNlKClbbGF5ZXJPcHRpb25zLnNvdXJjZV0pO1xyXG4gIHNvdXJjZU9wdGlvbnMuYXR0cmlidXRpb25zID0gdmVjdG9ydGlsZU9wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCkgfHwgJ0VQU0c6Mzg1Nyc7XHJcbiAgaWYoc291cmNlT3B0aW9ucy50aWxlR3JpZCl7XHJcbiAgICBzb3VyY2VPcHRpb25zLnRpbGVHcmlkID0gbWFwdXRpbHMudGlsZUdyaWQoc291cmNlT3B0aW9ucy50aWxlR3JpZCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHNvdXJjZU9wdGlvbnMudGlsZUdyaWQgPSB2aWV3ZXIuZ2V0VGlsZUdyaWQoKTtcclxuICB9XHJcbiAgXHJcbiAgdmFyIHZlY3RvcnRpbGVTb3VyY2UgPSBjcmVhdGVTb3VyY2Uoc291cmNlT3B0aW9ucywgdmVjdG9ydGlsZU9wdGlvbnMpO1xyXG4gIHJldHVybiB2ZWN0b3IodmVjdG9ydGlsZU9wdGlvbnMsIHZlY3RvcnRpbGVTb3VyY2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTb3VyY2Uob3B0aW9ucywgdmVjdG9ydGlsZU9wdGlvbnMpIHtcclxuICB2YXIgZm9ybWF0O1xyXG4gIHN3aXRjaCh2ZWN0b3J0aWxlT3B0aW9ucy5mb3JtYXQpIHtcclxuICAgIGNhc2UgJ3RvcG9qc29uJzpcclxuICAgIGZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuVG9wb0pTT04oKTtcclxuICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnZ2VvanNvbic6XHJcbiAgICBmb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oKTtcclxuICAgIGJyZWFrO1xyXG4gICAgY2FzZSAncGJmJzpcclxuICAgIGZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuTVZUKCk7XHJcbiAgICBicmVhaztcclxuICB9XHJcbiAgaWYodmVjdG9ydGlsZU9wdGlvbnMubGF5ZXJVUkwpe1xyXG4gICAgb3B0aW9ucy51cmwgKz0gdmVjdG9ydGlsZU9wdGlvbnMubGF5ZXJVUkw7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgb3B0aW9ucy51cmwgKz0gdmVjdG9ydGlsZU9wdGlvbnMubGF5ZXJOYW1lICsgJ0AnICArIHZlY3RvcnRpbGVPcHRpb25zLmdyaWRzZXQgKyAnQCcgKyB2ZWN0b3J0aWxlT3B0aW9ucy5mb3JtYXQgKyAnL3t6fS97eH0vey15fS4nKyB2ZWN0b3J0aWxlT3B0aW9ucy5mb3JtYXQ7XHJcbiAgfVxyXG4gIG9wdGlvbnMuZm9ybWF0ID0gZm9ybWF0O1xyXG4gIHJldHVybiBuZXcgb2wuc291cmNlLlZlY3RvclRpbGUob3B0aW9ucyk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdmVjdG9ydGlsZTsiLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciB2ZWN0b3IgPSByZXF1aXJlKCcuL3ZlY3RvcicpO1xyXG5cclxudmFyIHdmcyA9IGZ1bmN0aW9uIHdmcyhsYXllck9wdGlvbnMpIHtcclxuICB2YXIgd2ZzRGVmYXVsdCA9IHtcclxuICAgIGxheWVyVHlwZTogJ3ZlY3RvcidcclxuICB9O1xyXG4gIHZhciBzb3VyY2VEZWZhdWx0ID0ge307XHJcbiAgdmFyIHdmc09wdGlvbnMgPSAkLmV4dGVuZCh3ZnNEZWZhdWx0LCBsYXllck9wdGlvbnMpO1xyXG4gIHZhciBzb3VyY2VPcHRpb25zID0gJC5leHRlbmQoc291cmNlRGVmYXVsdCwgdmlld2VyLmdldE1hcFNvdXJjZSgpW2xheWVyT3B0aW9ucy5zb3VyY2VOYW1lXSk7XHJcbiAgd2ZzT3B0aW9ucy5mZWF0dXJlVHlwZSA9IHNvdXJjZU9wdGlvbnMuZmVhdHVyZVR5cGUgPSB3ZnNPcHRpb25zLmlkO1xyXG4gIHNvdXJjZU9wdGlvbnMuZ2VvbWV0cnlOYW1lID0gd2ZzT3B0aW9ucy5nZW9tZXRyeU5hbWU7XHJcbiAgc291cmNlT3B0aW9ucy5maWx0ZXIgPSB3ZnNPcHRpb25zLmZpbHRlcjtcclxuICBzb3VyY2VPcHRpb25zLmF0dHJpYnV0aW9uID0gd2ZzT3B0aW9ucy5hdHRyaWJ1dGlvbjtcclxuICBzb3VyY2VPcHRpb25zLnJlc29sdXRpb25zID0gdmlld2VyLmdldFJlc29sdXRpb25zKCk7XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uQ29kZSA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG5cclxuICBzb3VyY2VPcHRpb25zLnN0cmF0ZWd5ID0gbGF5ZXJPcHRpb25zLnN0cmF0ZWd5ID8gbGF5ZXJPcHRpb25zLnN0cmF0ZWd5IDogc291cmNlT3B0aW9ucy5zdHJhdGVneTtcclxuICBzd2l0Y2ggKHNvdXJjZU9wdGlvbnMuc3RyYXRlZ3kpIHtcclxuICAgIGNhc2UgJ2FsbCc6XHJcbiAgICAgIHNvdXJjZU9wdGlvbnMubG9hZGluZ3N0cmF0ZWd5ID0gb2wubG9hZGluZ3N0cmF0ZWd5LmFsbDtcclxuICAgIGJyZWFrO1xyXG4gICAgY2FzZSAndGlsZSc6XHJcbiAgICBzb3VyY2VPcHRpb25zLmxvYWRpbmdzdHJhdGVneSA9IG9sLmxvYWRpbmdzdHJhdGVneS50aWxlKG9sLnRpbGVncmlkLmNyZWF0ZVhZWih7XHJcbiAgICAgICAgbWF4Wm9vbTogc291cmNlT3B0aW9ucy5yZXNvbHV0aW9ucy5sZW5ndGhcclxuICAgICAgfSkpO1xyXG4gICAgYnJlYWs7XHJcbiAgICBkZWZhdWx0OlxyXG4gICAgc291cmNlT3B0aW9ucy5sb2FkaW5nc3RyYXRlZ3kgPSBvbC5sb2FkaW5nc3RyYXRlZ3kuYmJveDtcclxuICAgIGJyZWFrO1xyXG4gIH1cclxuICB2YXIgd2ZzU291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB2ZWN0b3Iod2ZzT3B0aW9ucywgd2ZzU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHZhciB2ZWN0b3JTb3VyY2UgPSBudWxsO1xyXG4gICAgdmFyIHNlcnZlclVybCA9IG9wdGlvbnMudXJsO1xyXG4gICAgdmFyIHF1ZXJ5RmlsdGVyO1xyXG5cclxuICAgIC8vSWYgY3FsIGZpbHRlciB0aGVuIGJib3ggbXVzdCBiZSB1c2VkIGluIHRoZSBmaWx0ZXIuXHJcbiAgICBpZihvcHRpb25zLnN0cmF0ZWd5ID09PSAnYWxsJyl7XHJcbiAgICAgIHF1ZXJ5RmlsdGVyID0gb3B0aW9ucy5maWx0ZXIgPyAnJkNRTF9GSUxURVI9JyArIG9wdGlvbnMuZmlsdGVyIDogJyc7XHJcbiAgICB9XHJcbiAgICBlbHNle1xyXG4gICAgICBxdWVyeUZpbHRlciA9IG9wdGlvbnMuZmlsdGVyID8gJyZDUUxfRklMVEVSPScgKyBvcHRpb25zLmZpbHRlciArICcgQU5EIEJCT1goJyArIG9wdGlvbnMuZ2VvbWV0cnlOYW1lICsgJywnIDogJyZCQk9YPSc7XHJcbiAgICB9XHJcbiAgICB2YXIgYmJveFByb2plY3Rpb25Db2RlID0gb3B0aW9ucy5maWx0ZXIgPyBcIidcIiArIG9wdGlvbnMucHJvamVjdGlvbkNvZGUgKyBcIicpXCIgOiBvcHRpb25zLnByb2plY3Rpb25Db2RlO1xyXG4gICAgdmVjdG9yU291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xyXG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb24sXHJcbiAgICAgIGZvcm1hdDogbmV3IG9sLmZvcm1hdC5HZW9KU09OKHtcclxuICAgICAgICBnZW9tZXRyeU5hbWU6IG9wdGlvbnMuZ2VvbWV0cnlOYW1lXHJcbiAgICAgIH0pLFxyXG4gICAgICBsb2FkZXI6IGZ1bmN0aW9uKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikge1xyXG4gICAgICAgIHZhciB1cmwgPSBzZXJ2ZXJVcmwgK1xyXG4gICAgICAgICAgJz9zZXJ2aWNlPVdGUyYnICtcclxuICAgICAgICAgICd2ZXJzaW9uPTEuMS4wJnJlcXVlc3Q9R2V0RmVhdHVyZSZ0eXBlTmFtZT0nICsgb3B0aW9ucy5mZWF0dXJlVHlwZSArXHJcbiAgICAgICAgICAnJm91dHB1dEZvcm1hdD1hcHBsaWNhdGlvbi9qc29uJyArXHJcbiAgICAgICAgICAnJnNyc25hbWU9JyArIG9wdGlvbnMucHJvamVjdGlvbkNvZGU7XHJcbiAgICAgICAgdXJsICs9IG9wdGlvbnMuc3RyYXRlZ3kgPT09ICdhbGwnID8gcXVlcnlGaWx0ZXIgOiBxdWVyeUZpbHRlciArIGV4dGVudC5qb2luKCcsJykgKyAnLCcgKyBiYm94UHJvamVjdGlvbkNvZGU7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHZlY3RvclNvdXJjZS5hZGRGZWF0dXJlcyh2ZWN0b3JTb3VyY2UuZ2V0Rm9ybWF0KCkucmVhZEZlYXR1cmVzKHJlc3BvbnNlKSk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgc3RyYXRlZ3k6IG9wdGlvbnMubG9hZGluZ3N0cmF0ZWd5XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2ZWN0b3JTb3VyY2U7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHdmcztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHRpbGUgPSByZXF1aXJlKCcuL3RpbGUnKTtcclxuXHJcbnZhciB3bXMgPSBmdW5jdGlvbiB3bXMobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIHdtc0RlZmF1bHQgPSB7XHJcbiAgICBsYXllclR5cGU6ICd0aWxlJyxcclxuICAgIGZlYXR1cmVpbmZvTGF5ZXI6IHVuZGVmaW5lZFxyXG4gIH07XHJcbiAgdmFyIHNvdXJjZURlZmF1bHQgPSB7XHJcbiAgICB2ZXJzaW9uOiAnMS4xLjEnLFxyXG4gICAgZ3V0dGVyOiAwLFxyXG4gICAgZm9ybWF0OiAnaW1hZ2UvcG5nJ1xyXG4gIH07XHJcbiAgdmFyIHdtc09wdGlvbnMgPSAkLmV4dGVuZCh3bXNEZWZhdWx0LCBsYXllck9wdGlvbnMpO1xyXG4gIHdtc09wdGlvbnMubmFtZS5zcGxpdCgnOicpLnBvcCgpO1xyXG4gIHZhciBzb3VyY2VPcHRpb25zID0gJC5leHRlbmQoc291cmNlRGVmYXVsdCwgdmlld2VyLmdldE1hcFNvdXJjZSgpW2xheWVyT3B0aW9ucy5zb3VyY2VdKTtcclxuICBzb3VyY2VPcHRpb25zLmF0dHJpYnV0aW9uID0gd21zT3B0aW9ucy5hdHRyaWJ1dGlvbjtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgc291cmNlT3B0aW9ucy5pZCA9IHdtc09wdGlvbnMuaWQ7XHJcbiAgc291cmNlT3B0aW9ucy50aWxlR3JpZCA9IHZpZXdlci5nZXRUaWxlR3JpZCgpO1xyXG4gIHNvdXJjZU9wdGlvbnMuZm9ybWF0ID0gd21zT3B0aW9ucy5mb3JtYXQgPyB3bXNPcHRpb25zLmZvcm1hdCA6IHNvdXJjZU9wdGlvbnMuZm9ybWF0O1xyXG5cclxuICB2YXIgd21zU291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB0aWxlKHdtc09wdGlvbnMsIHdtc1NvdXJjZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVNvdXJjZShvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gbmV3IG9sLnNvdXJjZS5UaWxlV01TKCh7XHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgdXJsOiBvcHRpb25zLnVybCxcclxuICAgICAgZ3V0dGVyOiBvcHRpb25zLmd1dHRlcixcclxuICAgICAgY3Jvc3NPcmlnaW46ICdhbm9ueW1vdXMnLFxyXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb25Db2RlLFxyXG4gICAgICB0aWxlR3JpZDogb3B0aW9ucy50aWxlR3JpZCxcclxuICAgICAgcGFyYW1zOiB7XHJcbiAgICAgICAgJ0xBWUVSUyc6IG9wdGlvbnMuaWQsXHJcbiAgICAgICAgJ1RJTEVEJzogdHJ1ZSxcclxuICAgICAgICAnVkVSU0lPTic6IG9wdGlvbnMudmVyc2lvbixcclxuICAgICAgICAnRk9STUFUJzogb3B0aW9ucy5mb3JtYXRcclxuICAgICAgfVxyXG4gICAgfSkpXHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHdtcztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHRpbGUgPSByZXF1aXJlKCcuL3RpbGUnKTtcclxuXHJcbnZhciB3bXRzID0gZnVuY3Rpb24gd210cyhsYXllck9wdGlvbnMpIHtcclxuICB2YXIgd210c0RlZmF1bHQgPSB7XHJcbiAgICBsYXllclR5cGU6ICd0aWxlJyxcclxuICAgIGZlYXR1cmVpbmZvTGF5ZXI6IHVuZGVmaW5lZFxyXG4gIH07XHJcbiAgdmFyIHNvdXJjZURlZmF1bHQgPSB7XHJcbiAgICBtYXRyaXhTZXQ6IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpLFxyXG4gICAgbWF0cml4SWRzUHJlZml4OiB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKSArICc6JyxcclxuICAgIGZvcm1hdDogJ2ltYWdlL3BuZycsXHJcbiAgICByZXNvbHV0aW9uczogdmlld2VyLmdldFJlc29sdXRpb25zKCksXHJcbiAgICB0aWxlU2l6ZTogWzI1NiwgMjU2XVxyXG4gIH07XHJcbiAgdmFyIHdtdHNPcHRpb25zID0gJC5leHRlbmQod210c0RlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgd210c09wdGlvbnMubmFtZS5zcGxpdCgnOicpLnBvcCgpO1xyXG4gIHdtdHNPcHRpb25zLnNvdXJjZU5hbWUgPSB3bXRzT3B0aW9ucy5uYW1lO1xyXG4gIHZhciBzb3VyY2VPcHRpb25zID0gJC5leHRlbmQoc291cmNlRGVmYXVsdCwgdmlld2VyLmdldE1hcFNvdXJjZSgpW2xheWVyT3B0aW9ucy5zb3VyY2VdKTtcclxuICBpZiAod210c09wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2Zvcm1hdCcpKSB7XHJcbiAgICBzb3VyY2VPcHRpb25zLmZvcm1hdCA9IHdtdHNPcHRpb25zLmZvcm1hdDtcclxuICB9XHJcbiAgc291cmNlT3B0aW9ucy5hdHRyaWJ1dGlvbiA9IHdtdHNPcHRpb25zLmF0dHJpYnV0aW9uO1xyXG4gIHNvdXJjZU9wdGlvbnMucHJvamVjdGlvbkNvZGUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICBzb3VyY2VPcHRpb25zLm1hdHJpeElkcyA9IFtdO1xyXG4gIHNvdXJjZU9wdGlvbnMucmVzb2x1dGlvbnMuZm9yRWFjaChmdW5jdGlvbihyZXNvbHV0aW9uLCBpKSB7XHJcbiAgICBzb3VyY2VPcHRpb25zLm1hdHJpeElkc1tpXSA9IHNvdXJjZU9wdGlvbnMubWF0cml4SWRzUHJlZml4ICsgaTtcclxuICB9KTtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25FeHRlbnQgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbigpLmdldEV4dGVudCgpO1xyXG4gIHNvdXJjZU9wdGlvbnMuaWQgPSB3bXRzT3B0aW9ucy5pZDtcclxuXHJcbiAgdmFyIHdtdHNTb3VyY2UgPSBjcmVhdGVTb3VyY2Uoc291cmNlT3B0aW9ucyk7XHJcbiAgcmV0dXJuIHRpbGUod210c09wdGlvbnMsIHdtdHNTb3VyY2UpO1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVTb3VyY2Uob3B0aW9ucykge1xyXG4gICAgcmV0dXJuIG5ldyBvbC5zb3VyY2UuV01UUyh7XHJcbiAgICAgIGNyb3NzT3JpZ2luOiAnYW5vbnltb3VzJyxcclxuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9uLFxyXG4gICAgICB1cmw6IG9wdGlvbnMudXJsLFxyXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb25Db2RlLFxyXG4gICAgICBsYXllcjogb3B0aW9ucy5pZCxcclxuICAgICAgbWF0cml4U2V0OiBvcHRpb25zLm1hdHJpeFNldCxcclxuICAgICAgZm9ybWF0OiBvcHRpb25zLmZvcm1hdCxcclxuICAgICAgdGlsZUdyaWQ6IG5ldyBvbC50aWxlZ3JpZC5XTVRTKHtcclxuICAgICAgICBvcmlnaW46IG9wdGlvbnMub3JpZ2luIHx8IG9sLmV4dGVudC5nZXRUb3BMZWZ0KG9wdGlvbnMucHJvamVjdGlvbkV4dGVudCksXHJcbiAgICAgICAgcmVzb2x1dGlvbnM6IG9wdGlvbnMucmVzb2x1dGlvbnMsXHJcbiAgICAgICAgbWF0cml4SWRzOiBvcHRpb25zLm1hdHJpeElkcyxcclxuICAgICAgICB0aWxlU2l6ZTogb3B0aW9ucy50aWxlU2l6ZVxyXG4gICAgICB9KSxcclxuICAgICAgc3R5bGU6ICdkZWZhdWx0J1xyXG4gICAgfSlcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gd210cztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHRpbGUgPSByZXF1aXJlKCcuL3RpbGUnKTtcclxuXHJcbnZhciB4eXogPSBmdW5jdGlvbiB4eXoobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIHh5ekRlZmF1bHQgPSB7XHJcbiAgICBsYXllclR5cGU6ICd0aWxlJyxcclxuICAgIGZlYXR1cmVpbmZvTGF5ZXI6IHVuZGVmaW5lZFxyXG4gIH07XHJcbiAgdmFyIHNvdXJjZURlZmF1bHQgPSB7fTtcclxuICB2YXIgeHl6T3B0aW9ucyA9ICQuZXh0ZW5kKHh5ekRlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgeHl6T3B0aW9ucy5zb3VyY2VOYW1lID0geHl6T3B0aW9ucy5pZDtcclxuICB2YXIgc291cmNlT3B0aW9ucyA9ICQuZXh0ZW5kKHNvdXJjZURlZmF1bHQsIHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllck9wdGlvbnMuc291cmNlXSk7XHJcbiAgc291cmNlT3B0aW9ucy5hdHRyaWJ1dGlvbnMgPSB4eXpPcHRpb25zLmF0dHJpYnV0aW9uO1xyXG4gIHNvdXJjZU9wdGlvbnMucHJvamVjdGlvbiA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpIHx8ICdFUFNHOjM4NTcnO1xyXG4gIHNvdXJjZU9wdGlvbnMudGlsZUdyaWQgPSB2aWV3ZXIuZ2V0VGlsZUdyaWQoKTtcclxuICBpZih4eXpPcHRpb25zLmxheWVyVVJMKXtcclxuICAgIHNvdXJjZU9wdGlvbnMudXJsICs9IHh5ek9wdGlvbnMubGF5ZXJVUkw7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgdmFyIGZvcm1hdCA9IHNvdXJjZU9wdGlvbnMuc291cmNlTmFtZS5zcGxpdCgnLicpWzFdLFxyXG4gICAgICB1cmwgPSBzb3VyY2VPcHRpb25zLnNvdXJjZU5hbWUuc3BsaXQoJy4nKVswXSArICcve3p9L3t4fS97eX0uJztcclxuICAgIHVybCArPSBmb3JtYXQ7XHJcbiAgICBzb3VyY2VPcHRpb25zLnVybCA9IHVybDtcclxuICB9XHJcbiAgdmFyIHh5elNvdXJjZSA9IGNyZWF0ZVNvdXJjZShzb3VyY2VPcHRpb25zKTtcclxuICByZXR1cm4gdGlsZSh4eXpPcHRpb25zLCB4eXpTb3VyY2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTb3VyY2Uob3B0aW9ucykge1xyXG4gIG9wdGlvbnMuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJztcclxuICByZXR1cm4gbmV3IG9sLnNvdXJjZS5YWVoob3B0aW9ucyk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0geHl6O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgbWFwVXRpbHMgPSByZXF1aXJlKCcuL21hcHV0aWxzJyk7XHJcbnZhciBncm91cCA9IHJlcXVpcmUoJy4vbGF5ZXIvZ3JvdXAnKTtcclxudmFyIHR5cGUgPSB7fTtcclxudmFyIGxheWVyQ3JlYXRvcjtcclxudHlwZS5XRlMgPSByZXF1aXJlKCcuL2xheWVyL3dmcycpO1xyXG50eXBlLkFHU19GRUFUVVJFID0gcmVxdWlyZSgnLi9sYXllci9hZ3NmZWF0dXJlJyk7XHJcbnR5cGUuVE9QT0pTT04gPSByZXF1aXJlKCcuL2xheWVyL3RvcG9qc29uJyk7XHJcbnR5cGUuR0VPSlNPTiA9IHJlcXVpcmUoJy4vbGF5ZXIvZ2VvanNvbicpO1xyXG50eXBlLldNUyA9IHJlcXVpcmUoJy4vbGF5ZXIvd21zJyk7XHJcbnR5cGUuV01UUyA9IHJlcXVpcmUoJy4vbGF5ZXIvd210cycpO1xyXG50eXBlLkFHU19USUxFID0gcmVxdWlyZSgnLi9sYXllci9hZ3N0aWxlJyk7XHJcbnR5cGUuWFlaID0gcmVxdWlyZSgnLi9sYXllci94eXonKTtcclxudHlwZS5PU00gPSByZXF1aXJlKCcuL2xheWVyL29zbScpO1xyXG50eXBlLlZFQ1RPUlRJTEUgPSByZXF1aXJlKCcuL2xheWVyL3ZlY3RvcnRpbGUnKTtcclxudHlwZS5GRUFUVVJFID0gcmVxdWlyZSgnLi9sYXllci9mZWF0dXJlbGF5ZXInKTtcclxudHlwZS5HUk9VUCA9IGdyb3VwTGF5ZXI7XHJcblxyXG5sYXllckNyZWF0b3IgPSBmdW5jdGlvbiBsYXllckNyZWF0b3Iob3B0X29wdGlvbnMpIHtcclxuICB2YXIgZGVmYXVsdE9wdGlvbnMgPSB7XHJcbiAgICBuYW1lOiB1bmRlZmluZWQsXHJcbiAgICBpZDogdW5kZWZpbmVkLFxyXG4gICAgdGl0bGU6IHVuZGVmaW5lZCxcclxuICAgIGdyb3VwOiAnbm9uZScsXHJcbiAgICBvcGFjaXR5OiAxLFxyXG4gICAgZ2VvbWV0cnlOYW1lOiAnZ2VvbScsXHJcbiAgICBnZW9tZXRyeVR5cGU6IHVuZGVmaW5lZCxcclxuICAgIGZpbHRlcjogdW5kZWZpbmVkLFxyXG4gICAgbGF5ZXJUeXBlOiB1bmRlZmluZWQsXHJcbiAgICBsZWdlbmQ6IGZhbHNlLFxyXG4gICAgc291cmNlTmFtZTogdW5kZWZpbmVkLFxyXG4gICAgYXR0cmlidXRpb246IHVuZGVmaW5lZCxcclxuICAgIHN0eWxlOiAnZGVmYXVsdCcsXHJcbiAgICBzdHlsZU5hbWU6IHVuZGVmaW5lZCxcclxuICAgIHF1ZXJ5YWJsZTogdHJ1ZSxcclxuICAgIG1pblJlc29sdXRpb246IHVuZGVmaW5lZCxcclxuICAgIG1heFJlc29sdXRpb246IHVuZGVmaW5lZCxcclxuICAgIHZpc2libGU6IGZhbHNlLFxyXG4gICAgdHlwZTogdW5kZWZpbmVkLFxyXG4gICAgZXh0ZW50OiB1bmRlZmluZWQsXHJcbiAgICBhdHRyaWJ1dGVzOiB1bmRlZmluZWQsXHJcbiAgICB0aWxlU2l6ZTogdmlld2VyLmdldFRpbGVTaXplKClcclxuICB9O1xyXG4gIHZhciBwcm9qZWN0aW9uID0gdmlld2VyLmdldFByb2plY3Rpb24oKTtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciBsYXllck9wdGlvbnMgPSAkLmV4dGVuZChkZWZhdWx0T3B0aW9ucywgb3B0aW9ucyk7XHJcbiAgdmFyIG5hbWUgPSBsYXllck9wdGlvbnMubmFtZTtcclxuICBsYXllck9wdGlvbnMubWluUmVzb2x1dGlvbiA9IGxheWVyT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnbWluU2NhbGUnKSA/IG1hcFV0aWxzLnNjYWxlVG9SZXNvbHV0aW9uKGxheWVyT3B0aW9ucy5taW5TY2FsZSwgcHJvamVjdGlvbik6IHVuZGVmaW5lZDtcclxuICBsYXllck9wdGlvbnMubWF4UmVzb2x1dGlvbiA9IGxheWVyT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnbWF4U2NhbGUnKSA/IG1hcFV0aWxzLnNjYWxlVG9SZXNvbHV0aW9uKGxheWVyT3B0aW9ucy5tYXhTY2FsZSwgcHJvamVjdGlvbik6IHVuZGVmaW5lZDtcclxuICBsYXllck9wdGlvbnMuZXh0ZW50ID0gbGF5ZXJPcHRpb25zLmV4dGVudCB8fCB2aWV3ZXIuZ2V0RXh0ZW50KCk7XHJcbiAgbGF5ZXJPcHRpb25zLnNvdXJjZU5hbWUgPSBsYXllck9wdGlvbnMuc291cmNlO1xyXG4gIGxheWVyT3B0aW9ucy5zdHlsZU5hbWUgPSBsYXllck9wdGlvbnMuc3R5bGU7XHJcbiAgaWYgKGxheWVyT3B0aW9ucy5pZCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICBsYXllck9wdGlvbnMuaWQgPSBuYW1lLnNwbGl0KCdfXycpLnNoaWZ0KCk7XHJcbiAgfVxyXG5cclxuICBsYXllck9wdGlvbnMubmFtZSA9IG5hbWUuc3BsaXQoJzonKS5wb3AoKTtcclxuXHJcbiAgaWYgKHR5cGUuaGFzT3duUHJvcGVydHkobGF5ZXJPcHRpb25zLnR5cGUpKSB7XHJcbiAgICByZXR1cm4gdHlwZVtsYXllck9wdGlvbnMudHlwZV0obGF5ZXJPcHRpb25zLCBsYXllckNyZWF0b3IpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZygnTGF5ZXIgdHlwZSBpcyBtaXNzaW5nIG9yIGxheWVyIHR5cGUgaXMgbm90IGNvcnJlY3QuIENoZWNrIHlvdXIgbGF5ZXIgZGVmaW5pdGlvbjogJyk7XHJcbiAgICBjb25zb2xlLmxvZyhsYXllck9wdGlvbnMpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ3JvdXBMYXllcihvcHRpb25zKSB7XHJcbiAgdmFyIGxheWVycztcclxuICB2YXIgbGF5ZXJPcHRpb25zO1xyXG4gIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdsYXllcnMnKSkge1xyXG4gICAgbGF5ZXJzID0gb3B0aW9ucy5sYXllcnMubWFwKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgIHJldHVybiBsYXllckNyZWF0b3IobGF5ZXIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgbGF5ZXJPcHRpb25zID0ge307XHJcbiAgICBsYXllck9wdGlvbnMubGF5ZXJzID0gbGF5ZXJzO1xyXG4gICAgcmV0dXJuIGdyb3VwKCQuZXh0ZW5kKG9wdGlvbnMsIGxheWVyT3B0aW9ucykpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBjb25zb2xlLmxvZygnR3JvdXAgbGF5ZXIgaGFzIG5vIGxheWVycycpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBsYXllckNyZWF0b3I7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIG1vZGFsID0gcmVxdWlyZSgnLi9tb2RhbCcpO1xyXG52YXIgdmFsaWRhdGVVcmwgPSByZXF1aXJlKCcuL3V0aWxzL3ZhbGlkYXRldXJsJyk7XHJcblxyXG52YXIgc3ltYm9sU2l6ZSA9IDIwO1xyXG52YXIgc3R5bGVTZXR0aW5ncztcclxudmFyIGJhc2VVcmw7XHJcbnZhciBoYXNNYXBMZWdlbmQ7XHJcblxyXG5mdW5jdGlvbiBpbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuXHJcbiAgYmFzZVVybCA9IHZpZXdlci5nZXRCYXNlVXJsKCk7XHJcbiAgaGFzTWFwTGVnZW5kID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaGFzTWFwTGVnZW5kJykgPyBvcHRpb25zLmhhc01hcExlZ2VuZCA6IHRydWU7XHJcbiAgc3R5bGVTZXR0aW5ncyA9IHZpZXdlci5nZXRTdHlsZVNldHRpbmdzKCk7XHJcblxyXG4gIHJlbmRlcigpO1xyXG4gIGFkZExlZ2VuZCh2aWV3ZXIuZ2V0R3JvdXBzKCd0b3AnKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAkKCcjby1tZW51dG9vbHMnKS5hcHBlbmQoJzxsaSBjbGFzcz1cIm8tbWVudS1pdGVtXCI+PGRpdiBjbGFzcz1cIm8tbWVudS1pdGVtLWRpdmlkZXJcIj48L2Rpdj48bGk+Jyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFN5bWJvbChzdHlsZSkge1xyXG4gIHZhciBzeW1ib2w9Jyc7XHJcbiAgdmFyIHMgPSBzdHlsZVswXTtcclxuICBpZiAoc1swXS5oYXNPd25Qcm9wZXJ0eSgnaWNvbicpKSB7XHJcbiAgICB2YXIgc3JjID0gdmFsaWRhdGVVcmwoc1swXS5pY29uLnNyYywgYmFzZVVybCk7XHJcbiAgICAvLyB2YXIgc2NhbGUgPSBzdHlsZS5pY29uLnNjYWxlIHx8IHVuZGVmaW5lZDtcclxuICAgIHZhciBmb3JtYXQgPSBzWzBdLmZvcm1hdCB8fCAncG5nJztcclxuICAgIGlmIChmb3JtYXQgPT0gJ3BuZycpIHtcclxuICAgICAgc3ltYm9sID0gJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLWltZ1wiPjxpbWcgc3R5bGU9XCJ3aWR0aDogYXV0bzsgaGVpZ2h0OiAyMHB4O1wiIHNyYz1cIicgKyBzcmMgKyAnXCI+PC9kaXY+J1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZm9ybWF0ID09ICdzdmcnKSB7XHJcbiAgICAgIHZhciBvID0gJzxvYmplY3QgdHlwZT1cImltYWdlL3N2Zyt4bWxcIiBkYXRhPVwiJyArIHNyYyArICdcIiBzdHlsZT1cIndpZHRoOiAyMHB4O1wiPjwvb2JqZWN0Pic7XHJcbiAgICAgIHZhciBpbmxpbmVTdHlsZSA9ICdiYWNrZ3JvdW5kOiB1cmwoJyArIHNyYyArICcpIG5vLXJlcGVhdDt3aWR0aDogMjBweDsgaGVpZ2h0OiAyMHB4O2JhY2tncm91bmQtc2l6ZTogMjBweDsnO1xyXG4gICAgICBzeW1ib2wgPSAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0taW1nXCI+JyArIG8gKyAnPC9kaXY+JztcclxuICAgIH1cclxuICB9XHJcbiAgZWxzZSBpZiAoc1swXS5oYXNPd25Qcm9wZXJ0eSgnZmlsbCcpKSB7XHJcbiAgICB2YXIgZmlsbCA9ICcnO1xyXG4gICAgZm9yKHZhciBpPTA7IGk8cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBmaWxsICs9IGNyZWF0ZUZpbGwoc1tpXSk7XHJcbiAgICB9XHJcbiAgICBzeW1ib2wgKz0gJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLWltZ1wiPjxzdmcgaGVpZ2h0PVwiJyArIHN5bWJvbFNpemUgKyAnXCIgd2lkdGg9XCInICsgc3ltYm9sU2l6ZSArICdcIj4nO1xyXG4gICAgc3ltYm9sICs9IGZpbGw7XHJcbiAgICBzeW1ib2wgKz0gJzwvc3ZnPjwvZGl2Pic7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKHNbMF0uaGFzT3duUHJvcGVydHkoJ3N0cm9rZScpKSB7XHJcbiAgICB2YXIgc3Ryb2tlID0gJyc7XHJcbiAgICBmb3IodmFyIGk9MDsgaTxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHN0cm9rZSArPSBjcmVhdGVTdHJva2Uoc1tpXSk7XHJcbiAgICB9XHJcbiAgICBzeW1ib2wgKz0gJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLWltZ1wiPjxzdmcgaGVpZ2h0PVwiJyArIHN5bWJvbFNpemUgKyAnXCIgd2lkdGg9XCInICsgc3ltYm9sU2l6ZSArICdcIj4nO1xyXG4gICAgc3ltYm9sICs9IHN0cm9rZTtcclxuICAgIHN5bWJvbCArPSAnPC9zdmc+PC9kaXY+JztcclxuICB9XHJcbiAgZWxzZSBpZiAoc1swXS5oYXNPd25Qcm9wZXJ0eSgnY2lyY2xlJykpIHtcclxuICAgIHZhciBjaXJjbGUgPSAnJztcclxuICAgIGZvcih2YXIgaT0wOyBpPHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgY2lyY2xlICs9IGNyZWF0ZUNpcmNsZShzW2ldKTtcclxuICAgIH1cclxuICAgIHN5bWJvbCArPSAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0taW1nXCI+PHN2ZyBoZWlnaHQ9XCInICsgc3ltYm9sU2l6ZSArICdcIiB3aWR0aD1cIicgKyBzeW1ib2xTaXplICsgJ1wiPic7XHJcbiAgICBzeW1ib2wgKz0gY2lyY2xlO1xyXG4gICAgc3ltYm9sICs9ICc8L3N2Zz48L2Rpdj4nO1xyXG4gIH1cclxuICBlbHNlIGlmIChzWzBdLmhhc093blByb3BlcnR5KCdpbWFnZScpKSB7XHJcbiAgICB2YXIgc3JjID0gdmFsaWRhdGVVcmwoc1swXS5pbWFnZS5zcmMsIGJhc2VVcmwpO1xyXG4gICAgdmFyIGlubGluZVN0eWxlID0gJ2JhY2tncm91bmQ6IHVybCgnICsgc3JjICsgJykgbm8tcmVwZWF0O3dpZHRoOiAzMHB4OyBoZWlnaHQ6IDMwcHg7YmFja2dyb3VuZC1zaXplOiAzMHB4Oyc7XHJcbiAgICBzeW1ib2wgPSAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0taW1nXCIgc3R5bGU9XCInICsgaW5saW5lU3R5bGUgKydcIj48L2Rpdj4nO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHN5bWJvbDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlRmlsbChmaWxsUHJvcGVydGllcykge1xyXG4gIHZhciBmID0gZmlsbFByb3BlcnRpZXM7XHJcbiAgdmFyIHN0cm9rZVdpZHRoID0gMDtcclxuXHJcbiAgaWYoZi5oYXNPd25Qcm9wZXJ0eSgnc3Ryb2tlJykpIHtcclxuICAgIHN0cm9rZVdpZHRoID0gZi5zdHJva2Uud2lkdGggPj0zID8gMyA6IGYuc3Ryb2tlLndpZHRoO1xyXG4gICAgdmFyIHN0cm9rZSA9ICdzdHJva2U6JyArIGYuc3Ryb2tlLmNvbG9yICsgJzsnIHx8ICdzdHJva2U6bm9uZTsnO1xyXG4gICAgc3Ryb2tlICs9ICdzdHJva2Utd2lkdGg6JyArIHN0cm9rZVdpZHRoICsgJzsnIHx8ICcnO1xyXG4gICAgc3Ryb2tlICs9ICdzdHJva2UtZGFzaGFycmF5OicgKyBmLnN0cm9rZS5saW5lRGFzaCArICc7JyB8fCAnJztcclxuICB9XHJcblxyXG4gIHZhciBmaWxsU2l6ZSA9IHN5bWJvbFNpemUgLSA0OyAvLy0yLTJcclxuICB2YXIgZmlsbCA9ICc8cmVjdCB4PVwiMlwiIHk9XCIyXCIgcng9XCIyXCIgcnk9XCIyXCIgd2lkdGg9XCInICsgZmlsbFNpemUgKyAnXCIgaGVpZ2h0PVwiJyArIGZpbGxTaXplICsgJ1wiICc7XHJcbiAgZmlsbCArPSBmLmhhc093blByb3BlcnR5KCdmaWxsJykgPyAnc3R5bGU9XCJmaWxsOicgKyBmLmZpbGwuY29sb3IgKyAnOycgOiAnc3R5bGU9XCJmaWxsOm5vbmU7JztcclxuICBmaWxsICs9IHN0cm9rZTtcclxuICBmaWxsICs9ICdcIj48L3JlY3Q+JztcclxuXHJcbiAgcmV0dXJuIGZpbGw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUNpcmNsZShjaXJjbGVQcm9wZXJ0aWVzKSB7XHJcbiAgdmFyIGMgPSBjaXJjbGVQcm9wZXJ0aWVzLmNpcmNsZTtcclxuICB2YXIgc3Ryb2tlV2lkdGggPSAwO1xyXG5cclxuICBpZihjLmhhc093blByb3BlcnR5KCdzdHJva2UnKSkge1xyXG4gICAgc3Ryb2tlV2lkdGggPSBjLnN0cm9rZS53aWR0aCA+PTMgPyAzIDogYy5zdHJva2Uud2lkdGg7XHJcbiAgICB2YXIgc3Ryb2tlID0gJ3N0cm9rZTonICsgYy5zdHJva2UuY29sb3IgKyAnOycgfHwgJ3N0cm9rZTpub25lOyc7XHJcbiAgICBzdHJva2UgKz0gJ3N0cm9rZS13aWR0aDonICsgc3Ryb2tlV2lkdGggKyAnOycgfHwgJyc7XHJcbiAgfVxyXG5cclxuICB2YXIgc2l6ZSA9IHN5bWJvbFNpemUvMjtcclxuICB2YXIgZmlsbCA9ICc8Y2lyY2xlIGN4PVwiJyArIHNpemUgKyAnXCIgY3k9XCInICsgc2l6ZSArICdcIiByPVwiJyArIGMucmFkaXVzICsgJ1wiICc7XHJcbiAgZmlsbCArPSBjLmhhc093blByb3BlcnR5KCdmaWxsJykgPyAnc3R5bGU9XCJmaWxsOicgKyBjLmZpbGwuY29sb3IgKyAnOycgOiAnc3R5bGU9XCJmaWxsOm5vbmU7JztcclxuICBmaWxsICs9IHN0cm9rZTtcclxuICBmaWxsICs9ICdcIj48L2NpcmNsZT4nO1xyXG5cclxuICByZXR1cm4gZmlsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3Ryb2tlKHN0cm9rZVByb3BlcnRpZXMpIHtcclxuICB2YXIgcyA9IHN0cm9rZVByb3BlcnRpZXM7XHJcbiAgdmFyIHN0cm9rZVdpZHRoID0gcy5zdHJva2Uud2lkdGggPiA0ID8gNCA6IHMuc3Ryb2tlLndpZHRoO1xyXG4gIHN0cm9rZVdpZHRoID0gcy5zdHJva2Uud2lkdGggPCAyID8gMiA6IHN0cm9rZVdpZHRoO1xyXG4gIHZhciBzdHJva2UgPSAnPGxpbmUgeDEgPSBcIjJcIiB5MT0gXCInICsgKHN5bWJvbFNpemUtNCkudG9TdHJpbmcoKSArICdcIiB4Mj1cIicgKyAoc3ltYm9sU2l6ZS00KS50b1N0cmluZygpICsgJ1wiIHkyPVwiMlwiICc7XHJcbiAgc3Ryb2tlICs9ICdzdHlsZT1cIic7XHJcbiAgc3Ryb2tlICs9ICdzdHJva2U6JyArIHMuc3Ryb2tlLmNvbG9yICsgJzsnIHx8ICdzdHJva2U6bm9uZTsnO1xyXG4gIHN0cm9rZSArPSAnc3Ryb2tlLXdpZHRoOicgKyBzdHJva2VXaWR0aCArICc7JyB8fCAnJztcclxuICBzdHJva2UgKz0gJ3N0cm9rZS1kYXNoYXJyYXk6JyArIHMuc3Ryb2tlLmxpbmVEYXNoICsgJzsnIHx8ICcnO1xyXG4gIHN0cm9rZSArPSAnXCIvPic7XHJcblxyXG4gIHJldHVybiBzdHJva2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEFic3RyYWN0QnV0dG9uKGl0ZW0pIHtcclxuICB2YXIgaW5mb1RleHRCdXR0b24gPSAgJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLWluZm8gby1hYnN0cmFjdFwiIGlkPVwiby1sZWdlbmQtaXRlbS1pbmZvLScgKyBpdGVtICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWluZm8tY2lyY2xlXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWluZm8tY2lyY2xlXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gIHJldHVybiBpbmZvVGV4dEJ1dHRvbjtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlTGVnZW5kSXRlbShsYXllcmlkLCBsYXllclN0eWxlLCBpblN1Ymdyb3VwKSB7XHJcbiAgdmFyIGxheWVybmFtZSA9IGxheWVyaWQuc3BsaXQoJ28tbGVnZW5kLScpLnBvcCgpO1xyXG4gIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllcm5hbWUpO1xyXG4gIHZhciBzdWJDbGFzcyA9IGluU3ViZ3JvdXAgPyAnIG8tbGVnZW5kLXN1Yml0ZW0nIDogJyc7XHJcbiAgdmFyIGxlZ2VuZEl0ZW0gPSAnJztcclxuXHJcbiAgaWYgKGxheWVyU3R5bGUgJiYgbGF5ZXJTdHlsZVswXVswXS5oYXNPd25Qcm9wZXJ0eSgnZmlsdGVyJykpIHtcclxuXHJcbiAgICBpZiAobGF5ZXJTdHlsZVswXVswXS5oYXNPd25Qcm9wZXJ0eSgnbGVnZW5kJykpIHtcclxuICAgICAgbGVnZW5kSXRlbSArPSAnPGxpIGNsYXNzPVwiby1sZWdlbmQgJyArIGxheWVybmFtZSArICdcIj4nO1xyXG4gICAgICBsZWdlbmRJdGVtICs9ICc8dWwgaWQ9XCJvLWdyb3VwLScgKyBsYXllcm5hbWUgKyAnXCIgY2xhc3M9XCJvLWxlZ2VuZC1ncm91cCBvLXVsLWV4cGFuZC1mYWxzZVwiPjxsaSBjbGFzcz1cIicgKyBsYXllcm5hbWUgKyAnXCIgaWQ9XCInICsgbGF5ZXJpZCArICdcIj4nO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGVnZW5kSXRlbSArPSAnPGxpIGNsYXNzPVwiby1sZWdlbmQgJyArIGxheWVybmFtZSArICdcIiBpZD1cIicgKyBsYXllcmlkICsgJ1wiPic7XHJcbiAgICB9XHJcblxyXG4gICAgbGVnZW5kSXRlbSArPSAnPGRpdiBjbGFzcyA9XCJvLWxlZ2VuZC1pdGVtJyArIHN1YkNsYXNzICsgJ1wiPjxkaXYgY2xhc3M9XCJvLWNoZWNrYm94XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtc3F1YXJlLW9cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtc3F1YXJlLW9cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGVjay1zcXVhcmUtb1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1jaGVjay1zcXVhcmUtb1wiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgIGxlZ2VuZEl0ZW0gKz0gJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtLXRpdGxlIG8tdHJ1bmNhdGVcIj4nICsgbGF5ZXIuZ2V0KCd0aXRsZScpICsgJzwvZGl2Pic7XHJcblxyXG4gICAgaWYobGF5ZXIuZ2V0KCdhYnN0cmFjdCcpKXtcclxuICAgICAgbGVnZW5kSXRlbSArPSBhZGRBYnN0cmFjdEJ1dHRvbihsYXllcm5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChsYXllclN0eWxlWzBdWzBdLmhhc093blByb3BlcnR5KCdsZWdlbmQnKSkge1xyXG4gICAgICBsZWdlbmRJdGVtICs9ICc8ZGl2IGNsYXNzPVwiby1pY29uLWV4cGFuZCBvLWljb24tZXhwYW5kLWZhbHNlXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGV2cm9uLXJpZ2h0XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dXNlIHhsaW5rOmhyZWY9XCIjZmEtYW5nbGUtZG91YmxlLXJpZ2h0XCI+PC91c2U+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGV2cm9uLWRvd25cIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx1c2UgeGxpbms6aHJlZj1cIiNmYS1hbmdsZS1kb3VibGUtZG93blwiPjwvdXNlPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJzwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICBsZWdlbmRJdGVtICs9ICc8L2Rpdj48L2xpPic7XHJcblxyXG4gICAgICBsYXllclN0eWxlLmZvckVhY2goZnVuY3Rpb24gKHN0eWxlQXJyYXkpIHtcclxuICAgICAgICBsZWdlbmRJdGVtICs9ICc8bGkgY2xhc3M9XCJvLWxlZ2VuZCAnICsgbGF5ZXJuYW1lICsgJ1wiIGlkPVwiJyArIGxheWVybmFtZSArICdcIj48ZGl2IGNsYXNzID1cIm8tbGVnZW5kLXN1Yml0ZW1cIj4nO1xyXG4gICAgICAgIGxlZ2VuZEl0ZW0gKz0gJzxkaXYgY2xhc3M9XCJvLWNoZWNrYm94IG8tY2hlY2tib3gtZmFsc2VcIj48L2Rpdj4nO1xyXG4gICAgICAgIGxlZ2VuZEl0ZW0gKz0gbGF5ZXIuZ2V0KCdzdHlsZU5hbWUnKSA/IGdldFN5bWJvbChbc3R5bGVBcnJheV0pIDogJyc7XHJcbiAgICAgICAgbGVnZW5kSXRlbSArPSAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLXN1Yml0ZW0tdGl0bGVcIj4nICsgc3R5bGVBcnJheVswXS5sZWdlbmQgKyAnPC9kaXY+PC9kaXY+PC9saT4nO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGxlZ2VuZEl0ZW0gKz0gJzwvdWw+PC9saT4nXHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgIGxlZ2VuZEl0ZW0gKz0gJzxsaSBjbGFzcz1cIm8tbGVnZW5kICcgKyBsYXllcm5hbWUgKyAnXCIgaWQ9XCInICsgbGF5ZXJpZCArICdcIj48ZGl2IGNsYXNzID1cIm8tbGVnZW5kLWl0ZW0nICsgc3ViQ2xhc3MgKyAnXCI+PGRpdiBjbGFzcz1cIm8tY2hlY2tib3hcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1zcXVhcmUtb1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1zcXVhcmUtb1wiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZWNrLXNxdWFyZS1vXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWNoZWNrLXNxdWFyZS1vXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgbGVnZW5kSXRlbSArPSAgbGF5ZXIuZ2V0KCdzdHlsZU5hbWUnKSA/IGdldFN5bWJvbChzdHlsZVNldHRpbmdzW2xheWVyLmdldCgnc3R5bGVOYW1lJyldKSA6ICcnO1xyXG4gICAgbGVnZW5kSXRlbSArPSAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0tdGl0bGUgby10cnVuY2F0ZVwiPicgKyBsYXllci5nZXQoJ3RpdGxlJykgKyAnPC9kaXY+JztcclxuXHJcbiAgICBpZihsYXllci5nZXQoJ2Fic3RyYWN0Jykpe1xyXG4gICAgICBsZWdlbmRJdGVtICs9IGFkZEFic3RyYWN0QnV0dG9uKGxheWVybmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgbGVnZW5kSXRlbSArPSAnPC9kaXY+PC9saT4nO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGxlZ2VuZEl0ZW07XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUdyb3VwKGdyb3VwLCBwYXJlbnRHcm91cCkge1xyXG4gIHZhciBsZWdlbmRHcm91cDtcclxuICB2YXIgb3ZlcmxheUdyb3VwO1xyXG4gIHZhciBhYnN0cmFjdCA9ICcnO1xyXG5cclxuICBpZiAoZ3JvdXAuaGFzT3duUHJvcGVydHkoJ292ZXJsYXlHcm91cCcpKSB7XHJcbiAgICBvdmVybGF5R3JvdXAgPSBncm91cC5uYW1lO1xyXG4gIH1cclxuXHJcbiAgaWYgKGdyb3VwLmFic3RyYWN0KSB7XHJcbiAgICBhYnN0cmFjdCArPSBhZGRBYnN0cmFjdEJ1dHRvbihncm91cC5uYW1lKTtcclxuICB9XHJcblxyXG4gIGlmIChwYXJlbnRHcm91cCkge1xyXG4gICAgdmFyIGluZGVudCA9ICQocGFyZW50R3JvdXApLnBhcmVudCgpLmNsb3Nlc3QoJ3VsJykuaGFzQ2xhc3MoJ28tbGVnZW5kLWdyb3VwJykgPyAnby1sZWdlbmQtaW5kZW50JyA6ICcnO1xyXG5cclxuICAgIGxlZ2VuZEdyb3VwID0gJzxsaSBjbGFzcz1cIm8tbGVnZW5kICcgKyBncm91cC5uYW1lICsgJyBvLXRvcC1pdGVtXCIgaWQ9XCInICsgZ3JvdXAubmFtZSArICdcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHVsIGlkPVwiby1ncm91cC0nICsgZ3JvdXAubmFtZSArICdcIiBjbGFzcz1cIm8tbGVnZW5kLWdyb3VwIG8tbGVnZW5kLXN1Ymdyb3VwICcgKyBpbmRlbnQgKydcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICc8bGkgY2xhc3M9XCJvLWxlZ2VuZC1oZWFkZXIgby1sZWdlbmQtc3ViaGVhZGVyICcgKyBncm91cC5uYW1lICsgJ1wiIGlkPVwiJyArIGdyb3VwLm5hbWUgKyAnXCI+PGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW1cIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWNoZWNrYm94XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtc3F1YXJlLW9cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtc3F1YXJlLW9cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGVjay1zcXVhcmUtb1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1jaGVjay1zcXVhcmUtb1wiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtc3ViZ3JvdXAtdGl0bGUgby10cnVuY2F0ZVwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwLnRpdGxlICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8taWNvbi1leHBhbmRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGV2cm9uLXJpZ2h0XCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWFuZ2xlLWRvdWJsZS1yaWdodFwiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZXZyb24tZG93blwiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1hbmdsZS1kb3VibGUtZG93blwiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArIGFic3RyYWN0ICtcclxuICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2xpPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3VsPicgK1xyXG4gICAgICAgICAgICAgICAgICAnPC9saT4nO1xyXG4gICAgcGFyZW50R3JvdXAuYXBwZW5kKGxlZ2VuZEdyb3VwKTtcclxuICB9IGVsc2Uge1xyXG4gICAgbGVnZW5kR3JvdXAgPSAnPGxpPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8dWwgaWQ9XCJvLWdyb3VwLScgKyBncm91cC5uYW1lICsgJ1wiIGNsYXNzPVwiby1sZWdlbmQtZ3JvdXBcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICc8bGkgY2xhc3M9XCJvLWxlZ2VuZC1oZWFkZXJcIj48ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbVwiPicgKyBncm91cC50aXRsZSArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiby1pY29uLWV4cGFuZFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZXZyb24tcmlnaHRcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtY2hldnJvbi1yaWdodFwiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZXZyb24tZG93blwiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1jaGV2cm9uLWRvd25cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgKyBhYnN0cmFjdCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9saT4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC91bD4nICtcclxuICAgICAgICAgICAgICAgICAgJzwvbGk+JztcclxuICAgICQoJyNvLWxlZ2VuZGxpc3QgLm8tbGVnZW5kbGlzdCcpLmFwcGVuZChsZWdlbmRHcm91cCk7XHJcbiAgfVxyXG5cclxuICBpZiAoZ3JvdXAuZXhwYW5kZWQgPT0gdHJ1ZSkge1xyXG4gICAgJCgnI28tZ3JvdXAtJyArIGdyb3VwLm5hbWUgKycgLm8taWNvbi1leHBhbmQnKS5hZGRDbGFzcygnby1pY29uLWV4cGFuZC10cnVlJyk7XHJcbiAgICAkKCcjby1ncm91cC0nICsgZ3JvdXAubmFtZSArJyAuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrYm94LWZhbHNlJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgICQoJyNvLWdyb3VwLScgKyBncm91cC5uYW1lICsnIC5vLWljb24tZXhwYW5kJykuYWRkQ2xhc3MoJ28taWNvbi1leHBhbmQtZmFsc2UnKTtcclxuICAgICQoJyNvLWdyb3VwLScgKyBncm91cC5uYW1lICsnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2tib3gtZmFsc2UnKTtcclxuICAgICQoJyNvLWdyb3VwLScgKyBncm91cC5uYW1lKS5hZGRDbGFzcygnby11bC1leHBhbmQtZmFsc2UnKTtcclxuICB9XHJcblxyXG4gICQoJyNvLWdyb3VwLScgKyBncm91cC5uYW1lICsgJyAuby1sZWdlbmQtaGVhZGVyJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcblxyXG4gICAgaWYgKCQoZXZ0LnRhcmdldCkuY2xvc2VzdCgnZGl2JykuaGFzQ2xhc3MoJ28tY2hlY2tib3gnKSkge1xyXG4gICAgICB0b2dnbGVTdWJHcm91cENoZWNrKCQodGhpcykucGFyZW50KCksIHRydWUpO1xyXG4gICAgfSBlbHNlIGlmICgkKGV2dC50YXJnZXQpLmNsb3Nlc3QoJ2RpdicpLmhhc0NsYXNzKCdvLWFic3RyYWN0JykpIHtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0b2dnbGVHcm91cCgkKHRoaXMpKTtcclxuICAgIH1cclxuXHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxuXHJcbiAgaWYgKGdyb3VwLmhhc093blByb3BlcnR5KCdncm91cHMnKSkge1xyXG4gICAgZ3JvdXAuZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24oc3ViZ3JvdXApIHtcclxuICAgICAgY3JlYXRlR3JvdXAoc3ViZ3JvdXAsICQoJyNvLWdyb3VwLScgKyBncm91cC5uYW1lKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZExlZ2VuZChncm91cHMpIHtcclxuICB2YXIgbGF5ZXJzID0gdmlld2VyLmdldE1hcCgpLmdldExheWVycygpLmdldEFycmF5KCk7XHJcbiAgdmFyIG92ZXJsYXlHcm91cDtcclxuICB2YXIgaXRlbSA9ICcnO1xyXG5cclxuICAvL0FkZCBsZWdlbmQgZ3JvdXBzXHJcbiAgdmFyIGxlZ2VuZCA9ICc8ZGl2IGlkPVwiby1sZWdlbmRsaXN0XCI+PHVsIGNsYXNzPVwiby1sZWdlbmRsaXN0XCI+PC91bD48L2Rpdj4nO1xyXG4gICQoJyNvLW1hcG1lbnUnKS5hcHBlbmQobGVnZW5kKTtcclxuXHJcbiAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgIGNyZWF0ZUdyb3VwKGdyb3VwKTtcclxuICB9KTtcclxuXHJcbiAgLy9BZGQgbWFwIGxlZ2VuZCB1bmxlc3Mgc2V0IHRvIGZhbHNlXHJcbiAgaWYoaGFzTWFwTGVnZW5kKSB7XHJcbiAgICB2YXIgbWFwTGVnZW5kID0gJzxkaXYgaWQ9XCJvLW1hcC1sZWdlbmRcIj48dWwgaWQ9XCJvLWxlZ2VuZC1vdmVybGF5XCI+PGxpIGNsYXNzPVwiby1sZWdlbmQgby1oaWRkZW5cIj48ZGl2IGNsYXNzID1cIm8tdG9nZ2xlLWJ1dHRvbiBvLXRvZ2dsZS1idXR0b24tbWF4XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWFuZ2xlLWRvdWJsZS1kb3duXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWFuZ2xlLWRvdWJsZS1kb3duXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWFuZ2xlLWRvdWJsZS11cFwiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1hbmdsZS1kb3VibGUtdXBcIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+PC9saT48bGk+PHVsIGlkPVwiby1vdmVybGF5LWxpc3RcIj48L2xpPjwvdWw+PC91bD48dWwgaWQ9XCJvLW1hcC1sZWdlbmQtYmFja2dyb3VuZFwiPjwvdWw+PC9kaXY+JztcclxuICAgICQoJyNvLW1hcCcpLmFwcGVuZChtYXBMZWdlbmQpO1xyXG5cclxuICAgIC8vQWRkIGRpdmlkZXIgdG8gbWFwIGxlZ2VuZCBpZiBub3Qgb25seSBiYWNrZ3JvdW5kXHJcbiAgICBpZihvdmVybGF5R3JvdXApIHtcclxuICAgICAgJCgnI28tbWFwLWxlZ2VuZC1iYWNrZ3JvdW5kJykucHJlcGVuZCgnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0tZGl2aWRlclwiPjwvZGl2PicpO1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIC8vQWRkIGxheWVycyB0byBsZWdlbmRcclxuICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xyXG5cclxuICAgIHZhciBuYW1lID0gKGxheWVyLmdldCgnbmFtZScpKTtcclxuICAgIHZhciBsYXllclN0eWxlID0gc3R5bGVTZXR0aW5nc1tsYXllci5nZXQoJ3N0eWxlTmFtZScpXTtcclxuICAgIC8vQ2hlY2sgaWYgbGF5ZXIgYmVsb25ncyB0byBzdWJncm91cFxyXG4gICAgdmFyIGluU3ViZ3JvdXAgPSAkKCcjby1ncm91cC0nICsgbGF5ZXIuZ2V0KCdncm91cCcpKS5jbG9zZXN0KCd1bCcpLnBhcmVudCgpLmNsb3Nlc3QoJ3VsJykuaGFzQ2xhc3MoJ28tbGVnZW5kLWdyb3VwJyk7XHJcbiAgICB2YXIgdGl0bGUgPSAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0tdGl0bGUgby10cnVuY2F0ZVwiPicgKyBsYXllci5nZXQoJ3RpdGxlJykgKyAnPC9kaXY+JztcclxuICAgIHZhciByb290R3JvdXA7XHJcblxyXG4gICAgLy9BZGQgYWJzdHJhY3QgYnV0dG9uXHJcbiAgICBpZihsYXllci5nZXQoJ2Fic3RyYWN0Jykpe1xyXG4gICAgICB0aXRsZSArPSBhZGRBYnN0cmFjdEJ1dHRvbihuYW1lKTtcclxuICAgIH1cclxuICAgIHRpdGxlICs9ICc8L2Rpdj48L2xpPic7XHJcblxyXG4gICAgLy9BcHBlbmQgbGF5ZXIgdG8gZ3JvdXAgaW4gbGVnZW5kLiBBZGQgdG8gZGVmYXVsdCBncm91cCBpZiBub3QgZGVmaW5lZC5cclxuICAgIGlmKGxheWVyLmdldCgnZ3JvdXAnKSA9PSAnYmFja2dyb3VuZCcpIHtcclxuXHJcbiAgICAgIC8vQXBwZW5kIGJhY2tncm91bmQgbGF5ZXJzIHRvIG1lbnVcclxuICAgICAgaXRlbSA9ICc8bGkgY2xhc3M9XCJvLWxlZ2VuZCAnICsgbmFtZSArICdcIiBpZD1cIicgKyBuYW1lICsgJ1wiPjxkaXYgY2xhc3MgPVwiby1sZWdlbmQtaXRlbVwiPjxkaXYgY2xhc3M9XCJvLWNoZWNrYm94XCI+PHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGVja1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1jaGVja1wiPjwvdXNlPjwvc3ZnPjwvZGl2Pic7XHJcbiAgICAgIGl0ZW0gKz0gdGl0bGU7XHJcbiAgICAgICQoJyNvLWdyb3VwLWJhY2tncm91bmQgLm8tbGVnZW5kLWhlYWRlcicpLmFmdGVyKGl0ZW0pO1xyXG5cclxuICAgICAgLy9BcHBlbmQgYmFja2dyb3VuZCBsYXllcnMgdG8gbWFwIGxlZ2VuZFxyXG4gICAgICBpdGVtID0gJzxsaSBjbGFzcz1cIm8tbGVnZW5kICcgKyBuYW1lICsgJ1wiIGlkPVwiby1sZWdlbmQtJyArIG5hbWUgKyAnXCI+PGRpdiBjbGFzcyA9XCJvLWxlZ2VuZC1pdGVtXCI+J1xyXG4gICAgICBpdGVtICs9IGxheWVyLmdldCgnc3R5bGVOYW1lJykgPyBnZXRTeW1ib2woc3R5bGVTZXR0aW5nc1tsYXllci5nZXQoJ3N0eWxlTmFtZScpXSkgOiAnJztcclxuICAgICAgaXRlbSArPSAnPC9kaXY+JztcclxuICAgICAgJCgnI28tbWFwLWxlZ2VuZC1iYWNrZ3JvdW5kJykucHJlcGVuZChpdGVtKTtcclxuXHJcbiAgICB9IGVsc2UgaWYobGF5ZXIuZ2V0KCdncm91cCcpICYmICgobGF5ZXIuZ2V0KCdncm91cCcpICE9ICdub25lJykpKSB7XHJcblxyXG4gICAgICAvL0FwcGVuZCBsYXllciB0byBncm91cFxyXG4gICAgICBpdGVtID0gY3JlYXRlTGVnZW5kSXRlbShuYW1lLCBsYXllclN0eWxlLCBpblN1Ymdyb3VwKTtcclxuICAgICAgaWYgKCQoJyNvLWdyb3VwLScgKyBsYXllci5nZXQoJ2dyb3VwJykpLmNoaWxkcmVuKCdsaS5vLXRvcC1pdGVtOmxhc3QnKS5sZW5ndGgpIHtcclxuICAgICAgICAkKCcjby1ncm91cC0nICsgbGF5ZXIuZ2V0KCdncm91cCcpKS5jaGlsZHJlbignbGkuby10b3AtaXRlbTpsYXN0JykuYWZ0ZXIoaXRlbSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCgnI28tZ3JvdXAtJyArIGxheWVyLmdldCgnZ3JvdXAnKSArICcgLm8tbGVnZW5kLWhlYWRlcicpLmFmdGVyKGl0ZW0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZihsYXllci5nZXQoJ2xlZ2VuZCcpID09IHRydWUgfHwgbGF5ZXIuZ2V0VmlzaWJsZSh0cnVlKSkge1xyXG4gICAgICAgIC8vQXBwZW5kIHRvIG1hcCBsZWdlbmRcclxuICAgICAgICBpdGVtID0gJzxsaSBjbGFzcz1cIm8tbGVnZW5kICcgKyBuYW1lICsgJ1wiIGlkPVwiby1sZWdlbmQtJyArIG5hbWUgKyAnXCI+PGRpdiBjbGFzcyA9XCJvLWxlZ2VuZC1pdGVtXCI+PGRpdiBjbGFzcz1cIm8tY2hlY2tib3hcIj4nICtcclxuICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtc3F1YXJlLW9cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtc3F1YXJlLW9cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hlY2stc3F1YXJlLW9cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtY2hlY2stc3F1YXJlLW9cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgIGl0ZW0gKz0gbGF5ZXIuZ2V0KCdzdHlsZU5hbWUnKSA/IGdldFN5bWJvbChzdHlsZVNldHRpbmdzW2xheWVyLmdldCgnc3R5bGVOYW1lJyldKSA6ICcnO1xyXG4gICAgICAgIGl0ZW0gKz0gdGl0bGU7XHJcbiAgICAgICAgJCgnI28tb3ZlcmxheS1saXN0JykucHJlcGVuZChpdGVtKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vQ2hlY2sgbWFwIGxlZ2VuZCB0byBtYWtlIHN1cmUgbWluaW1pemUgYnV0dG9uIGFwcGVhcnNcclxuICAgIGNoZWNrVG9nZ2xlT3ZlcmxheSgpO1xyXG5cclxuICAgIC8vQXBwZW5kIGNsYXNzIGFjY29yZGluZyB0byB2aXNpYmxpdHkgYW5kIGlmIGdyb3VwIGlzIGJhY2tncm91bmRcclxuICAgIGlmIChsYXllci5nZXQoJ2dyb3VwJykgPT0gJ2JhY2tncm91bmQnKSB7XHJcbiAgICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCk9PXRydWUpIHtcclxuICAgICAgICAkKCcjJyArIG5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2stdHJ1ZScpO1xyXG4gICAgICAgICQoJyNvLWxlZ2VuZC0nICsgbmFtZSkuYWRkQ2xhc3MoJ28tY2hlY2stdHJ1ZS1pbWcnKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcjJyArIG5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2stZmFsc2UnKTtcclxuICAgICAgICAkKCcjby1sZWdlbmQtJyArIG5hbWUpLmFkZENsYXNzKCdvLWNoZWNrLWZhbHNlLWltZycpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAobGF5ZXIuZ2V0VmlzaWJsZSgpPT10cnVlKSB7XHJcbiAgICAgICAgJCgnLicgKyBuYW1lICsgJyAuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrYm94LXRydWUnKTtcclxuXHJcbiAgICAgICAgaWYgKGluU3ViZ3JvdXApIHtcclxuICAgICAgICAgIHJvb3RHcm91cCA9ICQoJyMnICsgbmFtZSkucGFyZW50cygndWwgW2lkXj1vLWdyb3VwLV06bGFzdCcpO1xyXG4gICAgICAgICAgaWYgKCEkKHJvb3RHcm91cCkuZmluZCgnLm8taWNvbi1leHBhbmQ6Zmlyc3QnKS5oYXNDbGFzcygnby1pY29uLWV4cGFuZC10cnVlJykpIHtcclxuICAgICAgICAgICAgdG9nZ2xlR3JvdXAoJChyb290R3JvdXApLmZpbmQoJ2xpLm8tbGVnZW5kLWhlYWRlcjpmaXJzdCcpKTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICB0b2dnbGVTdWJHcm91cENoZWNrKCQoJyMnICsgbmFtZSkucGFyZW50cygndWwnKS5oYXMoJy5vLWxlZ2VuZC1oZWFkZXInKS5maXJzdCgpLCBmYWxzZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICQoJyNvLWdyb3VwLScgKyBsYXllci5nZXQoJ2dyb3VwJykgKyAnIC5vLWljb24tZXhwYW5kOmZpcnN0JykucmVtb3ZlQ2xhc3MoJ28taWNvbi1leHBhbmQtZmFsc2UnKTtcclxuICAgICAgICAgICQoJyNvLWdyb3VwLScgKyBsYXllci5nZXQoJ2dyb3VwJykgKyAnIC5vLWljb24tZXhwYW5kOmZpcnN0JykuYWRkQ2xhc3MoJ28taWNvbi1leHBhbmQtdHJ1ZScpO1xyXG4gICAgICAgICAgJCgnI28tZ3JvdXAtJyArIGxheWVyLmdldCgnZ3JvdXAnKSkucmVtb3ZlQ2xhc3MoJ28tdWwtZXhwYW5kLWZhbHNlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcuJyArIG5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2tib3gtZmFsc2UnKTtcclxuXHJcbiAgICAgICAgaWYgKGluU3ViZ3JvdXApIHtcclxuICAgICAgICAgIHRvZ2dsZVN1Ykdyb3VwQ2hlY2soJCgnIycgKyBuYW1lKS5wYXJlbnRzKCd1bCcpLmhhcygnLm8tbGVnZW5kLWhlYWRlcicpLmZpcnN0KCksIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvL0V2ZW50IGxpc3RlbmVyIGZvciB0aWNrIGxheWVyXHJcbiAgICAkKCcjJyArIG5hbWUpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBpZiAoJChldnQudGFyZ2V0KS5jbG9zZXN0KCdkaXYnKS5oYXNDbGFzcygnby1pY29uLWV4cGFuZCcpKSB7XHJcbiAgICAgICAgdG9nZ2xlR3JvdXAoJCh0aGlzKSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICAgICAgdG9nZ2xlQ2hlY2soJCh0aGF0KS5hdHRyKFwiaWRcIikpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI28tbGVnZW5kLScgKyBuYW1lKS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuICAgICAgJCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB0b2dnbGVDaGVjaygkKHRoYXQpLmF0dHIoXCJpZFwiKSk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgJCgnLm8tYWJzdHJhY3QnKS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuICAgICQodGhpcykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xyXG4gICAgICBzaG93QWJzdHJhY3QoJCh0aGF0KSk7XHJcbiAgICB9KTtcclxuICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG5cclxuICAvL1RvZ2dsZSBtYXAgbGVnZW5kXHJcbiAgJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgdG9nZ2xlT3ZlcmxheSgpO1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcblxyXG4gICQoJyNvLW1hcC1sZWdlbmQtYmFja2dyb3VuZCBsaScpLm9uKFwibW91c2VvdmVyXCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgIHZhciBsZWdlbmRJZCA9ICQoZXZ0LnRhcmdldCkuY2xvc2VzdCgnbGknKS5hdHRyKCdpZCcpO1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxlZ2VuZElkLnNwbGl0KFwiby1sZWdlbmQtXCIpWzFdKTtcclxuICAgICQodGhpcykuYXR0cigndGl0bGUnLCBsYXllci5nZXQoJ3RpdGxlJykpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblRvZ2dsZUNoZWNrKGxheWVybmFtZSkge1xyXG4gIC8vRXZlbnQgbGlzdGVuZXIgZm9yIHRpY2sgbGF5ZXJcclxuICAkKCcjJyArIGxheWVybmFtZSkub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdG9nZ2xlQ2hlY2soJCh0aGF0KS5hdHRyKFwiaWRcIikpO1xyXG4gICAgfSk7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb2ZmVG9nZ2xlQ2hlY2sobGF5ZXJuYW1lKSB7XHJcbiAgLy9FdmVudCBsaXN0ZW5lciBmb3IgdGljayBsYXllclxyXG4gICQoJyMnICsgbGF5ZXJuYW1lKS5vZmYoJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdG9nZ2xlQ2hlY2soJCh0aGF0KS5hdHRyKFwiaWRcIikpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vRXhwYW5kIGFuZCBtaW5pbWl6ZSBncm91cFxyXG5mdW5jdGlvbiB0b2dnbGVHcm91cChncm91cGhlYWRlcikge1xyXG4gIHZhciBncm91cCA9IGdyb3VwaGVhZGVyLnBhcmVudCgnLm8tbGVnZW5kLWdyb3VwJyk7XHJcbiAgdmFyIGdyb3VwaWNvbiA9ICQoJyMnICsgZ3JvdXAuYXR0cignaWQnKSArICcgLm8taWNvbi1leHBhbmQ6Zmlyc3QnKTtcclxuXHJcbiAgaWYgKGdyb3VwaWNvbi5oYXNDbGFzcygnby1pY29uLWV4cGFuZC1mYWxzZScpKSB7XHJcbiAgICBncm91cGljb24ucmVtb3ZlQ2xhc3MoJ28taWNvbi1leHBhbmQtZmFsc2UnKTtcclxuICAgIGdyb3VwaWNvbi5hZGRDbGFzcygnby1pY29uLWV4cGFuZC10cnVlJyk7XHJcbiAgICBncm91cC5yZW1vdmVDbGFzcygnby11bC1leHBhbmQtZmFsc2UnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZ3JvdXBpY29uLnJlbW92ZUNsYXNzKCdvLWljb24tZXhwYW5kLXRydWUnKTtcclxuICAgIGdyb3VwaWNvbi5hZGRDbGFzcygnby1pY29uLWV4cGFuZC1mYWxzZScpO1xyXG4gICAgZ3JvdXAuYWRkQ2xhc3MoJ28tdWwtZXhwYW5kLWZhbHNlJyk7XHJcbiAgfVxyXG59XHJcblxyXG4vL1RvZ2dsZSBzdWJncm91cHNcclxuZnVuY3Rpb24gdG9nZ2xlU3ViR3JvdXBDaGVjayhzdWJncm91cCwgdG9nZ2xlQWxsKSB7XHJcbiAgdmFyIHN1Ykdyb3VwID0gJChzdWJncm91cCk7XHJcbiAgdmFyIHN1YkxheWVycyA9IHN1Ykdyb3VwLmZpbmQoJy5vLWxlZ2VuZC1pdGVtLm8tbGVnZW5kLXN1Yml0ZW0nKTtcclxuICB2YXIgZ3JvdXBMaXN0ID0gJCgnLm8tbGVnZW5kLXN1Ymdyb3VwJyk7XHJcblxyXG4gIGlmICh0b2dnbGVBbGwpIHtcclxuXHJcbiAgICBzdWJMYXllcnMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGxheWVybmFtZSA9ICQodGhpcykucGFyZW50KCkuYXR0cignaWQnKTtcclxuICAgICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVybmFtZSk7XHJcbiAgICAgIHZhciBsYXllcmlkID0gJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdjbGFzcycpO1xyXG4gICAgICB2YXIgaW5NYXBMZWdlbmQgPSBsYXllcmlkLnNwbGl0KCdvLWxlZ2VuZC0nKS5sZW5ndGggPiAxID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKHN1Ykdyb3VwLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLmhhc0NsYXNzKCdvLWNoZWNrYm94LXRydWUnKSkge1xyXG4gICAgICAgICQoJy4nICsgbGF5ZXJuYW1lICsgJyAuby1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdvLWNoZWNrYm94LXRydWUnKTtcclxuICAgICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG5cclxuICAgICAgICBpZiAoaW5NYXBMZWdlbmQgPT0gZmFsc2UpIHtcclxuICAgICAgICAgIG9mZlRvZ2dsZUNoZWNrKCdvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKTtcclxuICAgICAgICAgICQoJyNvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKS5yZW1vdmUoKTtcclxuICAgICAgICAgIGxheWVyLnNldCgnbGVnZW5kJywgZmFsc2UpO1xyXG4gICAgICAgICAgY2hlY2tUb2dnbGVPdmVybGF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsYXllci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgaWYgKGluTWFwTGVnZW5kID09IGZhbHNlICYmICQoJyNvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgJCgnI28tb3ZlcmxheS1saXN0JykucHJlcGVuZChjcmVhdGVMZWdlbmRJdGVtKCdvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKSk7XHJcbiAgICAgICAgICBvblRvZ2dsZUNoZWNrKCdvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKTtcclxuICAgICAgICAgIGNoZWNrVG9nZ2xlT3ZlcmxheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLicgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2tib3gtZmFsc2UnKTtcclxuICAgICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC10cnVlJyk7XHJcbiAgICAgICAgbGF5ZXIuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICBsYXllci5zZXQoJ2xlZ2VuZCcsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdyb3VwTGlzdC5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHN1Ykxpc3QgPSAkKHRoaXMpLmZpbmQoJy5vLWxlZ2VuZC1pdGVtLm8tbGVnZW5kLXN1Yml0ZW0nKS5oYXMoJy5vLWNoZWNrYm94Jyk7XHJcbiAgICB2YXIgc3ViTGlzdENoZWNrZWQgPSAkKHRoaXMpLmZpbmQoJy5vLWxlZ2VuZC1pdGVtLm8tbGVnZW5kLXN1Yml0ZW0nKS5oYXMoJy5vLWNoZWNrYm94Lm8tY2hlY2tib3gtdHJ1ZScpO1xyXG5cclxuICAgIGlmIChzdWJMaXN0Q2hlY2tlZC5sZW5ndGgpIHtcclxuICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmZpcnN0KCkuZmluZCgnLm8tY2hlY2tib3gnKS5yZW1vdmVDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG4gICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrYm94LXRydWUnKTtcclxuXHJcbiAgICAgIGlmIChzdWJMaXN0Lmxlbmd0aCAhPSBzdWJMaXN0Q2hlY2tlZC5sZW5ndGgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrYm94LXNlbWknKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdvLWNoZWNrYm94LXNlbWknKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQodGhpcykuY2hpbGRyZW4oKS5maXJzdCgpLmZpbmQoJy5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2tib3gtdHJ1ZScpO1xyXG4gICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdvLWNoZWNrYm94LXNlbWknKTtcclxuICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmZpcnN0KCkuZmluZCgnLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vL1RvZ2dsZSBsYXllcnNcclxuZnVuY3Rpb24gdG9nZ2xlQ2hlY2sobGF5ZXJpZCkge1xyXG4gIHZhciBsYXllcm5hbWUgPSBsYXllcmlkLnNwbGl0KCdvLWxlZ2VuZC0nKS5wb3AoKTtcclxuICB2YXIgaW5NYXBMZWdlbmQgPSBsYXllcmlkLnNwbGl0KCdvLWxlZ2VuZC0nKS5sZW5ndGggPiAxID8gdHJ1ZSA6IGZhbHNlO1xyXG4gIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllcm5hbWUpO1xyXG5cclxuICAvL1JhZGlvIHRvZ2dsZSBmb3IgYmFja2dyb3VuZFxyXG4gIGlmIChsYXllci5nZXQoJ2dyb3VwJykgPT0gJ2JhY2tncm91bmQnKSB7XHJcbiAgICB2YXIgZ3JvdXBzID0gdmlld2VyLmdldEdyb3VwKCdiYWNrZ3JvdW5kJyk7XHJcblxyXG4gICAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgZ3JvdXAuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICQoJyMnICsgZ3JvdXAuZ2V0KCduYW1lJykgKyAnIC5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2stdHJ1ZScpO1xyXG4gICAgICAkKCcjJyArIGdyb3VwLmdldCgnbmFtZScpICsgJyAuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrLWZhbHNlJyk7XHJcbiAgICAgIC8vbWFwIGxlZ2VuZFxyXG4gICAgICAkKCcjby1sZWdlbmQtJyArIGdyb3VwLmdldCgnbmFtZScpKS5yZW1vdmVDbGFzcygnby1jaGVjay10cnVlLWltZycpO1xyXG4gICAgICAkKCcjby1sZWdlbmQtJyArIGdyb3VwLmdldCgnbmFtZScpKS5hZGRDbGFzcygnby1jaGVjay1mYWxzZS1pbWcnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAkKCcjJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5yZW1vdmVDbGFzcygnby1jaGVjay1mYWxzZScpO1xyXG4gICAgJCgnIycgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2stdHJ1ZScpO1xyXG4gICAgLy9tYXAgbGVnZW5kXHJcbiAgICAkKCcjby1sZWdlbmQtJyArIGxheWVybmFtZSkucmVtb3ZlQ2xhc3MoJ28tY2hlY2stZmFsc2UtaW1nJyk7XHJcbiAgICAkKCcjby1sZWdlbmQtJyArIGxheWVybmFtZSkuYWRkQ2xhc3MoJ28tY2hlY2stdHJ1ZS1pbWcnKTtcclxuICB9IGVsc2UgeyAvL1RvZ2dsZSBjaGVjayBmb3IgYWxsIGdyb3VwcyBleGNlcHQgYmFja2dyb3VuZFxyXG5cclxuICAgIGlmICgkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5oYXNDbGFzcygnby1jaGVja2JveC10cnVlJykpIHtcclxuICAgICAgJCgnLicgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2tib3gtdHJ1ZScpO1xyXG4gICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG5cclxuICAgICAgaWYgKGluTWFwTGVnZW5kID09IGZhbHNlKSB7XHJcbiAgICAgICAgb2ZmVG9nZ2xlQ2hlY2soJ28tbGVnZW5kLScgKyBsYXllcm5hbWUpO1xyXG4gICAgICAgICQoJyNvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKS5yZW1vdmUoKTtcclxuICAgICAgICBsYXllci5zZXQoJ2xlZ2VuZCcsIGZhbHNlKTtcclxuICAgICAgICBjaGVja1RvZ2dsZU92ZXJsYXkoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGF5ZXIuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgaWYgKGluTWFwTGVnZW5kID09IGZhbHNlICYmICQoJyNvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICQoJyNvLW92ZXJsYXktbGlzdCcpLnByZXBlbmQoY3JlYXRlTGVnZW5kSXRlbSgnby1sZWdlbmQtJyArIGxheWVybmFtZSkpO1xyXG4gICAgICAgIG9uVG9nZ2xlQ2hlY2soJ28tbGVnZW5kLScgKyBsYXllcm5hbWUpO1xyXG4gICAgICAgIGNoZWNrVG9nZ2xlT3ZlcmxheSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5yZW1vdmVDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG4gICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC10cnVlJyk7XHJcbiAgICAgIGxheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgIGxheWVyLnNldCgnbGVnZW5kJywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCQoJyMnICsgbGF5ZXJuYW1lKS5maW5kKCcuby1sZWdlbmQtc3ViaXRlbScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgdG9nZ2xlU3ViR3JvdXBDaGVjaygkKCcjJyArIGxheWVybmFtZSkucGFyZW50cygndWwnKS5oYXMoJy5vLWxlZ2VuZC1oZWFkZXInKS5maXJzdCgpLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1RvZ2dsZU92ZXJsYXkoKSB7XHJcbiAgaWYoJCgnI28tb3ZlcmxheS1saXN0IGxpJykubGVuZ3RoID4gMSAmJiAkKCcjby1sZWdlbmQtb3ZlcmxheSA+bGk6Zmlyc3QtY2hpbGQnKS5oYXNDbGFzcygnby1oaWRkZW4nKSkge1xyXG4gICAgJCgnI28tbGVnZW5kLW92ZXJsYXkgPiBsaTpmaXJzdC1jaGlsZCcpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG4gIH0gZWxzZSBpZigkKCcjby1vdmVybGF5LWxpc3QgbGknKS5sZW5ndGggPCAyKSB7XHJcbiAgICAkKCcjby1sZWdlbmQtb3ZlcmxheSA+IGxpOmZpcnN0LWNoaWxkJykuYWRkQ2xhc3MoJ28taGlkZGVuJyk7XHJcblxyXG4gICAgaWYoJCgnI28tb3ZlcmxheS1saXN0JykubGVuZ3RoID09IDEgJiYgJCgnI28tb3ZlcmxheS1saXN0JykuaGFzQ2xhc3MoJ28taGlkZGVuJykpIHtcclxuICAgICAgJCgnI28tb3ZlcmxheS1saXN0JykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICAgIHRvZ2dsZU92ZXJsYXkoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZU92ZXJsYXkoKSB7XHJcbiAgaWYoJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLmhhc0NsYXNzKCdvLXRvZ2dsZS1idXR0b24tbWF4JykpIHtcclxuICAgICQoJyNvLWxlZ2VuZC1vdmVybGF5IC5vLXRvZ2dsZS1idXR0b24nKS5yZW1vdmVDbGFzcygnby10b2dnbGUtYnV0dG9uLW1heCcpO1xyXG4gICAgJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLmFkZENsYXNzKCdvLXRvZ2dsZS1idXR0b24tbWluJyk7XHJcbiAgICAkKCcjby1vdmVybGF5LWxpc3QnKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdvLXRvZ2dsZS1idXR0b24tbWluJyk7XHJcbiAgICAkKCcjby1sZWdlbmQtb3ZlcmxheSAuby10b2dnbGUtYnV0dG9uJykuYWRkQ2xhc3MoJ28tdG9nZ2xlLWJ1dHRvbi1tYXgnKTtcclxuICAgICQoJyNvLW92ZXJsYXktbGlzdCcpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG4gIH1cclxufVxyXG5cclxuLy9TZXQgY29udGVudCBmb3IgaW5mbyBidXR0b24gcG9wdXBcclxuZnVuY3Rpb24gc2hvd0Fic3RyYWN0KCRhYnN0cmFjdEJ1dHRvbikge1xyXG4gIHZhciBsYXllcjtcclxuICB2YXIgJGl0ZW0gPSAkYWJzdHJhY3RCdXR0b24uY2xvc2VzdCgnbGknKTtcclxuICB2YXIgbGF5ZXJuYW1lID0gJGFic3RyYWN0QnV0dG9uLmF0dHIoJ2lkJykuc3BsaXQoJ28tbGVnZW5kLWl0ZW0taW5mby0nKS5wb3AoKTtcclxuICB2YXIgYWJzdHJhY3QgPSB7XHJcbiAgICB0aXRsZTogJycsXHJcbiAgICBjb250ZW50OiAnJ1xyXG4gIH07XHJcblxyXG4gIC8vSWYgaW5mbyBidXR0b24gaXMgY29ubmVjdGVkIGdyb3VwXHJcbiAgaWYgKCRpdGVtLmhhc0NsYXNzKCdvLWxlZ2VuZC1oZWFkZXInKSkge1xyXG4gICAgdmFyIGdyb3VwcyA9IHZpZXdlci5nZXRHcm91cHMoKTtcclxuXHJcbiAgICB2YXIgZ3JvdXAgPSAkLmdyZXAoZ3JvdXBzLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgcmV0dXJuIChvYmoubmFtZSA9PSBsYXllcm5hbWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYWJzdHJhY3QudGl0bGUgPSBncm91cFswXS50aXRsZTtcclxuICAgIGFic3RyYWN0LmNvbnRlbnQgPSBncm91cFswXS5hYnN0cmFjdFxyXG4gIH0gZWxzZSB7IC8vIElmIGluZm8gYnV0dG9uIGlzIGNvbm5lY3RlZCB0byBsYXllclxyXG4gICAgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJuYW1lKTtcclxuICAgIGFic3RyYWN0LnRpdGxlID0gbGF5ZXIuZ2V0KCd0aXRsZScpO1xyXG4gICAgYWJzdHJhY3QuY29udGVudCA9IGxheWVyLmdldCgnYWJzdHJhY3QnKTtcclxuICB9XHJcblxyXG4gIG1vZGFsLmNyZWF0ZU1vZGFsKCcjby1tYXAnLCB7dGl0bGU6IGFic3RyYWN0LnRpdGxlLCBjb250ZW50OiBhYnN0cmFjdC5jb250ZW50fSk7XHJcbiAgbW9kYWwuc2hvd01vZGFsKCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBpbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbnZhciB1cmw7XHJcbnZhciB0aXRsZTtcclxudmFyICRsaW5rQnV0dG9uO1xyXG5cclxuZnVuY3Rpb24gaW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdXJsID0gb3B0aW9ucy51cmw7XHJcbiAgdGl0bGUgPSBvcHRpb25zLnRpdGxlO1xyXG5cclxuICByZW5kZXIoKTtcclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICB2YXIgZWwgPSB1dGlscy5jcmVhdGVMaXN0QnV0dG9uKHtcclxuICAgIGlkOiAnby1saW5rJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tZmEtZXh0ZXJuYWwtbGluaycsXHJcbiAgICBzcmM6ICcjZmEtZXh0ZXJuYWwtbGluaycsXHJcbiAgICB0ZXh0OiB0aXRsZVxyXG5cclxuICB9KTtcclxuICAkKCcjby1tZW51dG9vbHMnKS5hcHBlbmQoZWwpO1xyXG4gICRsaW5rQnV0dG9uID0gJCgnI28tbGluay1idXR0b24nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkbGlua0J1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgIHdpbmRvdy5vcGVuKHVybCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBpbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHN1cHBvcnRzID0gcmVxdWlyZSgnLi91dGlscy9zdXBwb3J0cycpO1xyXG52YXIgcGVybWFsaW5rID0gcmVxdWlyZSgnLi9wZXJtYWxpbmsvcGVybWFsaW5rJyk7XHJcbnZhciBnZXRVcmwgPSByZXF1aXJlKCcuL3V0aWxzL2dldHVybCcpO1xyXG52YXIgaXNVcmwgPSByZXF1aXJlKCcuL3V0aWxzL2lzdXJsJyk7XHJcbnZhciB0cmltVXJsID0gcmVxdWlyZSgnLi91dGlscy90cmltdXJsJyk7XHJcblxyXG52YXIgbWFwTG9hZGVyID0gZnVuY3Rpb24obWFwT3B0aW9ucywgY29uZmlnKSB7XHJcblxyXG4gIHZhciBtYXAgPSB7fTtcclxuICB2YXIgbWFwRWwgPSBjb25maWcudGFyZ2V0O1xyXG4gIHZhciBmb3JtYXQgPSAnanNvbic7XHJcbiAgdmFyIGNvcnMgPSBjb25maWcuY3Jvc3NPcmlnaW47XHJcblxyXG4gIHZhciB1cmxQYXJhbXMgPSB1bmRlZmluZWQ7XHJcblxyXG4gIGlmIChtYXBFbC5zdWJzdHJpbmcoMCwgMSkgIT09ICcjJykge1xyXG4gICAgbWFwRWwgPSAnIycgKyBtYXBFbDtcclxuICB9XHJcbiAgbWFwLmVsID0gbWFwRWw7XHJcblxyXG4gIC8vIENoZWNrIGJyb3dzZXIgc3VwcG9ydFxyXG4gIGlmIChzdXBwb3J0cygnYnJvd3NlcicsIG1hcEVsKSA9PT0gZmFsc2UpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiBhdXRob3JpemF0aW9uIGlzIHJlcXVpcmVkIGJlZm9yZSBtYXAgb3B0aW9ucyBpcyBsb2FkZWRcclxuICBpZiAoY29uZmlnLmF1dGhvcml6YXRpb25VcmwpIHtcclxuICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogY29uZmlnLmF1dGhvcml6YXRpb25VcmxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBsb2FkTWFwT3B0aW9ucygpO1xyXG4gICAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGxvYWRNYXBPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBsb2FkTWFwT3B0aW9ucygpIHtcclxuICAgIGlmICh0eXBlb2YobWFwT3B0aW9ucykgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCkge1xyXG4gICAgICAgIHVybFBhcmFtcyA9IHBlcm1hbGluay5wYXJzZVBlcm1hbGluayh3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGJhc2VVcmwgPSBjb25maWcuYmFzZVVybCB8fCAnJztcclxuICAgICAgbWFwLm9wdGlvbnMgPSAkLmV4dGVuZChjb25maWcsIG1hcE9wdGlvbnMpO1xyXG4gICAgICBpZiAobWFwT3B0aW9ucy5jb250cm9scykge1xyXG4gICAgICAgIG1hcC5vcHRpb25zLmNvbnRyb2xzID0gY29uZmlnLmRlZmF1bHRDb250cm9scy5jb25jYXQobWFwT3B0aW9ucy5jb250cm9scyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbWFwLm9wdGlvbnMuY29udHJvbHMgPSBjb25maWcuZGVmYXVsdENvbnRyb2xzO1xyXG4gICAgICB9XHJcbiAgICAgIG1hcC5vcHRpb25zLnVybCA9IGdldFVybCgpO1xyXG4gICAgICBtYXAub3B0aW9ucy5tYXAgPSB1bmRlZmluZWQ7XHJcbiAgICAgIG1hcC5vcHRpb25zLnBhcmFtcyA9IHVybFBhcmFtcztcclxuICAgICAgbWFwLm9wdGlvbnMuYmFzZVVybCA9IGJhc2VVcmw7XHJcblxyXG4gICAgICByZXR1cm4gJC53aGVuLmFwcGx5KCQsIGxvYWRTdmdTcHJpdGVzKGJhc2VVcmwsIGNvbmZpZykpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc3ByaXRlcykge1xyXG4gICAgICAgICAgcmV0dXJuIG1hcDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZihtYXBPcHRpb25zKSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgaWYgKGlzVXJsKG1hcE9wdGlvbnMpKSB7XHJcbiAgICAgICAgdXJsUGFyYW1zID0gcGVybWFsaW5rLnBhcnNlUGVybWFsaW5rKG1hcE9wdGlvbnMpO1xyXG4gICAgICAgIHZhciB1cmwgPSBtYXBPcHRpb25zLnNwbGl0KCcjJylbMF07XHJcbiAgICAgICAgdmFyIG1hcFVybCA9IHVybDtcclxuXHJcbiAgICAgICAgLy9yZW1vdiBmaWxlIG5hbWUgaWYgaW5jbHVkZWQgaW5cclxuICAgICAgICB1cmwgPSB0cmltVXJsKHVybCk7XHJcblxyXG4gICAgICAgIHZhciBiYXNlVXJsID0gY29uZmlnLmJhc2VVcmwgfHwgdXJsO1xyXG4gICAgICAgIHZhciBqc29uID0gdXJsUGFyYW1zLm1hcCArICcuanNvbic7XHJcbiAgICAgICAgdXJsICs9IGpzb247XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdmFyIGpzb24gPSBtYXBPcHRpb25zO1xyXG4gICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCkge1xyXG4gICAgICAgICAgdXJsUGFyYW1zID0gcGVybWFsaW5rLnBhcnNlUGVybWFsaW5rKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxuICAgICAgICAgIGlmICh1cmxQYXJhbXMubWFwKSB7XHJcbiAgICAgICAgICAgIGpzb24gPSB1cmxQYXJhbXMubWFwICsgJy5qc29uJztcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGJhc2VVcmwgPSBjb25maWcuYmFzZVVybCB8fCAnJztcclxuICAgICAgICB2YXIgdXJsID0gYmFzZVVybCArIGpzb247XHJcbiAgICAgICAgdmFyIG1hcFVybCA9IGdldFVybCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gJC53aGVuLmFwcGx5KCQsIGxvYWRTdmdTcHJpdGVzKGJhc2VVcmwsIGNvbmZpZykpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc3ByaXRlcykge1xyXG4gICAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgZGF0YVR5cGU6IGZvcm1hdFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgbWFwLm9wdGlvbnMgPSAkLmV4dGVuZChjb25maWcsIGRhdGEpO1xyXG4gICAgICAgICAgICAgIGlmIChkYXRhLmNvbnRyb2xzKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAub3B0aW9ucy5jb250cm9scyA9IGNvbmZpZy5kZWZhdWx0Q29udHJvbHMuY29uY2F0KGRhdGEuY29udHJvbHMpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXAub3B0aW9ucy5jb250cm9scyA9IGNvbmZpZy5kZWZhdWx0Q29udHJvbHM7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIG1hcC5vcHRpb25zLnVybCA9IG1hcFVybDtcclxuICAgICAgICAgICAgICBtYXAub3B0aW9ucy5tYXAgPSBqc29uO1xyXG4gICAgICAgICAgICAgIG1hcC5vcHRpb25zLnBhcmFtcyA9IHVybFBhcmFtcztcclxuICAgICAgICAgICAgICBtYXAub3B0aW9ucy5iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICAgICAgICByZXR1cm4gbWFwO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRTdmdTcHJpdGVzKGJhc2VVcmwsIGNvbmZpZykge1xyXG4gIHZhciBzdmdTcHJpdGVzID0gY29uZmlnLnN2Z1Nwcml0ZXM7XHJcbiAgdmFyIHN2Z1BhdGggPSBjb25maWcuc3ZnU3ByaXRlUGF0aDtcclxuICB2YXIgc3ZnUHJvbWlzZXMgPSBbXTtcclxuICBzdmdTcHJpdGVzLmZvckVhY2goZnVuY3Rpb24oc3ByaXRlKSB7XHJcbiAgICB2YXIgcHJvbWlzZSA9ICQuZ2V0KGJhc2VVcmwgKyBzdmdQYXRoICsgc3ByaXRlLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoZGF0YS5kb2N1bWVudEVsZW1lbnQpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGRpdiwgZG9jdW1lbnQuYm9keS5jaGlsZE5vZGVzWzBdKTtcclxuICAgICAgfSk7XHJcbiAgICBzdmdQcm9taXNlcy5wdXNoKHByb21pc2UpO1xyXG4gICAgcmV0dXJuIHN2Z1Byb21pc2VzO1xyXG4gIH0pO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1hcExvYWRlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxudmFyICRtZW51QnV0dG9uLCAkY2xvc2VCdXR0b24sICRtYXBNZW51O1xyXG5cclxudmFyIHN5bWJvbFNpemUgPSAyMDtcclxudmFyIHN0eWxlU2V0dGluZ3M7XHJcbnZhciBvcHRpb25zO1xyXG52YXIgaXNBY3RpdmU7XHJcblxyXG5mdW5jdGlvbiBpbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgICB2YXIgYnJlYWtQb2ludFNpemU7XHJcbiAgICB2YXIgYnJlYWtQb2ludDtcclxuXHJcbiAgICBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgICBpc0FjdGl2ZSA9IG9wdGlvbnMuaXNBY3RpdmUgfHwgZmFsc2U7XHJcbiAgICBicmVha1BvaW50U2l6ZSA9IG9wdGlvbnMuYnJlYWtQb2ludFNpemUgfHwgJ2wnO1xyXG4gICAgYnJlYWtQb2ludCAgPSB2aWV3ZXIuZ2V0QnJlYWtQb2ludHMoYnJlYWtQb2ludFNpemUpO1xyXG4gICAgc3R5bGVTZXR0aW5ncyA9IHZpZXdlci5nZXRTdHlsZVNldHRpbmdzKCk7XHJcblxyXG4gICAgdmFyIGVsID0gdXRpbHMuY3JlYXRlQnV0dG9uKHtcclxuICAgICAgICB0ZXh0OiAnTWVueScsXHJcbiAgICAgICAgaWQ6ICdvLW1hcG1lbnUtYnV0dG9uJyxcclxuICAgICAgICBjbHM6ICdvLW1hcG1lbnUtYnV0dG9uLXRydWUnLFxyXG4gICAgICAgIGljb25DbHM6ICdvLWljb24tZmEtYmFycycsXHJcbiAgICAgICAgc3JjOiAnI2ZhLWJhcnMnLFxyXG4gICAgICAgIHRvb2x0aXBUZXh0OiAnTWVueScsXHJcbiAgICAgICAgdG9vbHRpcFBsYWNlbWVudDogJ3dlc3QnXHJcbiAgICB9KTtcclxuICAgICQoJyNvLW1hcCcpLmFwcGVuZChlbCk7XHJcbiAgICAkbWVudUJ1dHRvbiA9ICQoJyNvLW1hcG1lbnUtYnV0dG9uIGJ1dHRvbicpO1xyXG5cclxuICAgIHZhciBtZW51RWwgPSAnPGRpdiBpZD1cIm8tbWFwbWVudVwiIGNsYXNzPVwiby1tYXBtZW51XCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWJsb2NrXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPHVsIGlkPVwiby1tZW51dG9vbHNcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxsaT48L2xpPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJzwvdWw+J1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAkKCcjby1tYXAnKS5hcHBlbmQobWVudUVsKTtcclxuICAgICRtYXBNZW51ID0gJCgnI28tbWFwbWVudScpO1xyXG5cclxuICAgIHZhciBjbG9zZUJ1dHRvbiA9IHV0aWxzLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICAgICAgaWQ6ICdvLW1hcG1lbnUtYnV0dG9uLWNsb3NlJyxcclxuICAgICAgICBjbHM6ICdvLW5vLWJveHNoYWRvdycsXHJcbiAgICAgICAgaWNvbkNsczogJ28taWNvbi1tZW51LWZhLXRpbWVzJyxcclxuICAgICAgICBzcmM6ICcjZmEtdGltZXMnLFxyXG4gICAgICAgIHRvb2x0aXBUZXh0OiAnU3TDpG5nIG1lbnknLFxyXG4gICAgICAgIHRvb2x0aXBQbGFjZW1lbnQ6ICd3ZXN0J1xyXG4gICAgfSk7XHJcbiAgICAkKCcjby1tZW51dG9vbHMnKS5hcHBlbmQoY2xvc2VCdXR0b24pO1xyXG4gICAgJGNsb3NlQnV0dG9uID0gJCgnI28tbWFwbWVudS1idXR0b24tY2xvc2UnKTtcclxuXHJcbiAgICBiaW5kVUlBY3Rpb25zKCk7XHJcblxyXG4gICAgaWYoaXNBY3RpdmUgJiYgJCgnI28tbWFwJykud2lkdGgoKSA+PSBicmVha1BvaW50WzBdKSB7XHJcbiAgICAgIHRvZ2dsZU1lbnUoKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICAgJG1lbnVCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICBcdHRvZ2dsZU1lbnUoKTtcclxuICAgICAgICAkbWVudUJ1dHRvbi5ibHVyKCk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICAkY2xvc2VCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICBcdHRvZ2dsZU1lbnUoKTtcclxuICAgICAgICAkY2xvc2VCdXR0b24uYmx1cigpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7XHJcbiAgICBpZigkbWFwTWVudS5oYXNDbGFzcygnby1tYXBtZW51LXNob3cnKSl7XHJcbiAgICAgICRtYXBNZW51LnJlbW92ZUNsYXNzKCdvLW1hcG1lbnUtc2hvdycpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICRtYXBNZW51LmFkZENsYXNzKCdvLW1hcG1lbnUtc2hvdycpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFRhcmdldCgpIHtcclxuICAgIHJldHVybiAkbWFwTWVudTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbm1vZHVsZS5leHBvcnRzLnRvZ2dsZU1lbnUgPSB0b2dnbGVNZW51O1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRUYXJnZXQgPSBnZXRUYXJnZXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGN1c3RvbVByb2plY3Rpb246IGZ1bmN0aW9uKHByb2plY3Rpb25Db2RlLCBleHRlbnQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBvbC5wcm9qLlByb2plY3Rpb24oe1xyXG4gICAgICAgICAgY29kZTogcHJvamVjdGlvbkNvZGUsXHJcbiAgICAgICAgICBleHRlbnQ6IGV4dGVudFxyXG4gICAgICB9KTtcclxuICB9LFxyXG4gIHRpbGVHcmlkOiBmdW5jdGlvbihzZXR0aW5ncykge1xyXG4gICAgdmFyIGV4dGVudCA9IHNldHRpbmdzLmV4dGVudCB8fCB2aWV3ZXIuZ2V0RXh0ZW50KCk7XHJcbiAgICB2YXIgb3JpZ2luID0gc2V0dGluZ3MuYWxpZ25Cb3R0b21MZWZ0ID09PSBmYWxzZSA/IG9sLmV4dGVudC5nZXRUb3BMZWZ0KGV4dGVudCkgOiBvbC5leHRlbnQuZ2V0Qm90dG9tTGVmdChleHRlbnQpO1xyXG4gICAgdmFyIHJlc29sdXRpb25zID0gc2V0dGluZ3MucmVzb2x1dGlvbnMgfHwgdmlld2VyLmdldFJlc29sdXRpb25zKCk7XHJcbiAgICB2YXIgdGlsZVNpemUgPSBzZXR0aW5ncy50aWxlU2l6ZSB8fCB2aWV3ZXIuZ2V0VGlsZVNpemUoKTtcclxuICAgIHJldHVybiBuZXcgb2wudGlsZWdyaWQuVGlsZUdyaWQoe1xyXG4gICAgICAgIGV4dGVudDogZXh0ZW50LFxyXG4gICAgICAgIG9yaWdpbjogb3JpZ2luLFxyXG4gICAgICAgIHJlc29sdXRpb25zOiByZXNvbHV0aW9ucyxcclxuICAgICAgICB0aWxlU2l6ZTogdGlsZVNpemVcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgY2hlY2tab29tQ2hhbmdlOiBmdW5jdGlvbiBjaGVja1pvb21DaGFuZ2UocmVzb2x1dGlvbiwgY3VycmVudFJlc29sdXRpb24pIHtcclxuICAgICAgaWYocmVzb2x1dGlvbiAhPT0gY3VycmVudFJlc29sdXRpb24pIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICB9LFxyXG4gIGNyZWF0ZVBvaW50RmVhdHVyZTogZnVuY3Rpb24gY3JlYXRlUG9pbnRGZWF0dXJlKGNvb3JkaW5hdGUsIHN0eWxlKSB7XHJcbiAgICAgIHZhciBmZWF0dXJlID0gbmV3IG9sLkZlYXR1cmUoe1xyXG4gICAgICAgICAgZ2VvbWV0cnk6IG5ldyBvbC5nZW9tLlBvaW50KGNvb3JkaW5hdGUpXHJcbiAgICAgIH0pO1xyXG4gICAgICBmZWF0dXJlLnNldFN0eWxlKHN0eWxlKTtcclxuICAgICAgcmV0dXJuIGZlYXR1cmU7XHJcbiAgfSxcclxuICBnZW9qc29uVG9GZWF0dXJlOiBmdW5jdGlvbiBnZW9qc29uVG9GZWF0dXJlKG9iaikge1xyXG4gICAgICB2YXIgdmVjdG9yU291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xyXG4gICAgICAgIGZlYXR1cmVzOiAobmV3IG9sLmZvcm1hdC5HZW9KU09OKCkpLnJlYWRGZWF0dXJlcyhvYmopXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gdmVjdG9yU291cmNlLmdldEZlYXR1cmVzKClbMF07XHJcbiAgfSxcclxuICB3a3RUb0ZlYXR1cmU6IGZ1bmN0aW9uIHdrdFRvRmVhdHVyZSh3a3QsIHNyc05hbWUpIHtcclxuICAgICAgdmFyIGZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuV0tUKCk7XHJcbiAgICAgIHZhciBmZWF0dXJlID0gZm9ybWF0LnJlYWRGZWF0dXJlKHdrdCwge1xyXG4gICAgICAgIGRhdGFQcm9qZWN0aW9uOiBzcnNOYW1lLFxyXG4gICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiBzcnNOYW1lXHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4gZmVhdHVyZTtcclxuICB9LFxyXG4gIHpvb21Ub0V4ZW50OiBmdW5jdGlvbiB6b29tVG9FeGVudChnZW9tZXRyeSwgbGV2ZWwpIHtcclxuICAgICAgdmFyIG1hcCA9IHZpZXdlci5nZXRNYXAoKTtcclxuICAgICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xyXG4gICAgICB2YXIgbWF4Wm9vbSA9IGxldmVsO1xyXG4gICAgICB2YXIgZXh0ZW50ID0gZ2VvbWV0cnkuZ2V0RXh0ZW50KCk7XHJcbiAgICAgIGlmKGV4dGVudCkge1xyXG4gICAgICAgICAgdmlldy5maXQoZXh0ZW50LCB7bWF4Wm9vbTogbWF4Wm9vbX0pO1xyXG4gICAgICAgICAgcmV0dXJuIGV4dGVudDtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICB9XHJcbiAgfSxcclxuICBnZXRDZW50ZXI6IGZ1bmN0aW9uIGdldENlbnRlcihnZW9tZXRyeSkge1xyXG4gICAgICB2YXIgdHlwZSA9IGdlb21ldHJ5LmdldFR5cGUoKTtcclxuICAgICAgdmFyIGNlbnRlcjtcclxuICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICBjYXNlIFwiUG9seWdvblwiOlxyXG4gICAgICAgICAgICAgIGNlbnRlciA9IGdlb21ldHJ5LmdldEludGVyaW9yUG9pbnQoKS5nZXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBcIk11bHRpUG9seWdvblwiOlxyXG4gICAgICAgICAgICAgIGNlbnRlciA9IGdlb21ldHJ5LmdldEludGVyaW9yUG9pbnRzKClbMF0uZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJQb2ludFwiOlxyXG4gICAgICAgICAgICAgIGNlbnRlciA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiTXVsdGlQb2ludFwiOlxyXG4gICAgICAgICAgICAgIGNlbnRlciA9IGdlb21ldHJ5WzBdLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiTGluZVN0cmluZ1wiOlxyXG4gICAgICAgICAgICAgIGNlbnRlciA9IGdlb21ldHJ5LmdldENvb3JkaW5hdGVBdCgwLjUpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBcIk11bHRpTGluZVN0cmluZ1wiOlxyXG4gICAgICAgICAgICAgIGNlbnRlciA9IGdlb21ldHJ5LmdldExpbmVTdHJpbmdzKClbMF0uZ2V0Q29vcmRpbmF0ZUF0KDAuNSk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiQ2lyY2xlXCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0Q2VudGVyKCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGNlbnRlcjtcclxuICB9LFxyXG4gIHNjYWxlVG9SZXNvbHV0aW9uOiBmdW5jdGlvbiBzY2FsZVRvUmVzb2x1dGlvbihzY2FsZSwgcHJvamVjdGlvbikge1xyXG4gICAgdmFyIGRwaSA9IDI1LjQgLyAwLjI4O1xyXG4gICAgdmFyIG1wdSA9IHByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xyXG4gICAgdmFyIHJlc29sdXRpb24gPSBzY2FsZSAvIChtcHUgKiAzOS4zNyAqIGRwaSk7XHJcbiAgICByZXR1cm4gcmVzb2x1dGlvbjtcclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbnZhciBzdHlsZSA9IHJlcXVpcmUoJy4vc3R5bGUnKSgpO1xyXG52YXIgc3R5bGVUeXBlcyA9IHJlcXVpcmUoJy4vc3R5bGUvc3R5bGV0eXBlcycpO1xyXG5cclxudmFyIG1hcDtcclxudmFyIG9wdGlvbnM7XHJcbnZhciBhY3RpdmVCdXR0b247XHJcbnZhciBkZWZhdWx0QnV0dG9uO1xyXG52YXIgbWVhc3VyZTtcclxudmFyIHR5cGU7XHJcbnZhciBza2V0Y2g7XHJcbnZhciBtZWFzdXJlVG9vbHRpcDtcclxudmFyIG1lYXN1cmVUb29sdGlwRWxlbWVudDtcclxudmFyIG1lYXN1cmVTdHlsZU9wdGlvbnM7XHJcbnZhciBoZWxwVG9vbHRpcDtcclxudmFyIGhlbHBUb29sdGlwRWxlbWVudDtcclxudmFyIHZlY3RvcjtcclxudmFyIHNvdXJjZTtcclxudmFyIGxhYmVsO1xyXG52YXIgb3ZlcmxheUFycmF5ID0gW107XHJcbnZhciBkcmF3U3RhcnQgPSBmYWxzZTtcclxudmFyIGlzQWN0aXZlID0gZmFsc2U7XHJcbnZhciB3Z3M4NFNwaGVyZSA9IG5ldyBvbC5TcGhlcmUoNjM3ODEzNyk7XHJcbnZhciBsZW5ndGhUb29sO1xyXG52YXIgYXJlYVRvb2w7XHJcblxyXG5mdW5jdGlvbiBpbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIG9wdGlvbnMubWVhc3VyZVRvb2xzID0gb3B0aW9ucy5tZWFzdXJlVG9vbHMgfHwgW1wibGVuZ3RoXCIsIFwiYXJlYVwiXTtcclxuICBsZW5ndGhUb29sID0gb3B0aW9ucy5tZWFzdXJlVG9vbHMuaW5kZXhPZignbGVuZ3RoJykgPj0gMCA/IHRydWUgOiBmYWxzZTtcclxuICBhcmVhVG9vbCA9IG9wdGlvbnMubWVhc3VyZVRvb2xzLmluZGV4T2YoJ2FyZWEnKSA+PSAwID8gdHJ1ZSA6IGZhbHNlO1xyXG4gIG9wdGlvbnMuZGVmYXVsdCA9IG9wdGlvbnMuZGVmYXVsdCA/IG9wdGlvbnMuZGVmYXVsdCA6IGxlbmd0aFRvb2wgPyBcImxlbmd0aFwiIDogXCJhcmVhXCI7XHJcbiAgaWYobGVuZ3RoVG9vbCB8fCBhcmVhVG9vbCl7XHJcbiAgICB2YXIgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgJyNvLXRvb2xiYXItbWFwdG9vbHMnO1xyXG4gICAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG4gICAgc291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3IoKTtcclxuICAgIG1lYXN1cmVTdHlsZU9wdGlvbnMgPSBzdHlsZVR5cGVzLmdldFN0eWxlKCdtZWFzdXJlJyk7XHJcblxyXG4gICAgLy9EcmF3biBmZWF0dXJlc1xyXG4gICAgdmVjdG9yID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XHJcbiAgICAgIHNvdXJjZTogc291cmNlLFxyXG4gICAgICBuYW1lOiAnbWVhc3VyZScsXHJcbiAgICAgIHZpc2libGU6IGZhbHNlLFxyXG4gICAgICB6SW5kZXg6IDZcclxuICAgIH0pO1xyXG5cclxuICAgIG1hcC5hZGRMYXllcih2ZWN0b3IpO1xyXG5cclxuICAgICQoJy5vLW1hcCcpLm9uKCdlbmFibGVJbnRlcmFjdGlvbicsIG9uRW5hYmxlSW50ZXJhY3Rpb24pO1xyXG5cclxuICAgIHJlbmRlcih0YXJnZXQpO1xyXG4gICAgYmluZFVJQWN0aW9ucygpO1xyXG4gICAgaWYob3B0aW9ucy5kZWZhdWx0ID09PSAnYXJlYScpIHtcclxuICAgICAgZGVmYXVsdEJ1dHRvbiA9ICQoJyNvLW1lYXN1cmUtcG9seWdvbi1idXR0b24gYnV0dG9uJyk7XHJcbiAgICB9IGVsc2UgaWYob3B0aW9ucy5kZWZhdWx0ID09PSAnbGVuZ3RoJykge1xyXG4gICAgICBkZWZhdWx0QnV0dG9uID0gJCgnI28tbWVhc3VyZS1saW5lLWJ1dHRvbiBidXR0b24nKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uRW5hYmxlSW50ZXJhY3Rpb24oZSkge1xyXG4gIGlmKGUuaW50ZXJhY3Rpb24gPT09ICdtZWFzdXJlJykge1xyXG4gICAgJCgnI28tbWVhc3VyZS1idXR0b24gYnV0dG9uJykuYWRkQ2xhc3MoJ28tbWVhc3VyZS1idXR0b24tdHJ1ZScpO1xyXG4gICAgaWYobGVuZ3RoVG9vbCl7JCgnI28tbWVhc3VyZS1saW5lLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO31cclxuICAgIGlmKGFyZWFUb29sKXskKCcjby1tZWFzdXJlLXBvbHlnb24tYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7fVxyXG4gICAgJCgnI28tbWVhc3VyZS1idXR0b24nKS5yZW1vdmVDbGFzcygndG9vbHRpcCcpO1xyXG4gICAgc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgZGVmYXVsdEJ1dHRvbi50cmlnZ2VyKCdjbGljaycpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpZiAoYWN0aXZlQnV0dG9uKSB7XHJcbiAgICAgIGFjdGl2ZUJ1dHRvbi5yZW1vdmVDbGFzcygnby1tZWFzdXJlLWJ1dHRvbi10cnVlJyk7XHJcbiAgICB9O1xyXG5cclxuICAgICQoJyNvLW1lYXN1cmUtYnV0dG9uIGJ1dHRvbicpLnJlbW92ZUNsYXNzKCdvLW1lYXN1cmUtYnV0dG9uLXRydWUnKTtcclxuICAgIGlmKGxlbmd0aFRvb2wpeyQoJyNvLW1lYXN1cmUtbGluZS1idXR0b24nKS5hZGRDbGFzcygnby1oaWRkZW4nKTt9XHJcbiAgICBpZihhcmVhVG9vbCl7JCgnI28tbWVhc3VyZS1wb2x5Z29uLWJ1dHRvbicpLmFkZENsYXNzKCdvLWhpZGRlbicpO31cclxuICAgICQoJyNvLW1lYXN1cmUtYnV0dG9uJykuYWRkQ2xhc3MoJ3Rvb2x0aXAnKTtcclxuXHJcbiAgICBtYXAudW4oJ3BvaW50ZXJtb3ZlJywgcG9pbnRlck1vdmVIYW5kbGVyKTtcclxuICAgIG1hcC51bignY2xpY2snLCBwb2ludGVyTW92ZUhhbmRsZXIpO1xyXG4gICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKG1lYXN1cmUpO1xyXG4gICAgdmVjdG9yLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgVmlld2VyLnJlbW92ZU92ZXJsYXlzKG92ZXJsYXlBcnJheSk7XHJcbiAgICB2ZWN0b3IuZ2V0U291cmNlKCkuY2xlYXIoKTtcclxuICAgIHNldEFjdGl2ZShmYWxzZSk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0QWN0aXZlKHN0YXRlKSB7XHJcbiAgaWYoc3RhdGUgPT09IHRydWUpIHtcclxuICAgIGlzQWN0aXZlID0gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgaXNBY3RpdmUgPSBmYWxzZTtcclxuICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIodGFyZ2V0KSB7XHJcbiAgXHJcbiAgaWYobGVuZ3RoVG9vbCB8fCBhcmVhVG9vbCl7XHJcbiAgICB2YXIgdG9vbGJhciA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsICcnLCB7XHJcbiAgICAgIGlkOiAnby1tZWFzdXJlLXRvb2xiYXInLFxyXG4gICAgICBjbHM6ICdvLXRvb2xiYXItaG9yaXpvbnRhbCdcclxuICAgIH0pO1xyXG5cclxuICAgICQodGFyZ2V0KS5hcHBlbmQodG9vbGJhcik7XHJcblxyXG4gICAgdmFyIG1iID0gdXRpbHMuY3JlYXRlQnV0dG9uKHtcclxuICAgICAgaWQ6ICdvLW1lYXN1cmUtYnV0dG9uJyxcclxuICAgICAgY2xzOiAnby1tZWFzdXJlLWJ1dHRvbicsXHJcbiAgICAgIGljb25DbHM6ICdvLWljb24tc3RlYWR5LW1lYXN1cmUnLFxyXG4gICAgICBzcmM6ICcjc3RlYWR5LW1lYXN1cmUnLFxyXG4gICAgICB0b29sdGlwVGV4dDogJ03DpHQgaSBrYXJ0YW4nXHJcbiAgICB9KTtcclxuICAgICQoJyMnICsgJ28tbWVhc3VyZS10b29sYmFyJykuYXBwZW5kKG1iKTtcclxuICB9XHJcbiAgXHJcbiAgaWYobGVuZ3RoVG9vbCl7XHJcbiAgICB2YXIgbGIgPSB1dGlscy5jcmVhdGVCdXR0b24oe1xyXG4gICAgICBpZDogJ28tbWVhc3VyZS1saW5lLWJ1dHRvbicsXHJcbiAgICAgIGNsczogJ28tbWVhc3VyZS10eXBlLWJ1dHRvbicsXHJcbiAgICAgIGljb25DbHM6ICdvLWljb24tbWluaWNvbnMtbGluZS12ZWN0b3InLFxyXG4gICAgICBzcmM6ICcjbWluaWNvbnMtbGluZS12ZWN0b3InLFxyXG4gICAgICB0b29sdGlwVGV4dDogJ0xpbmplJyxcclxuICAgICAgdG9vbHRpcFBsYWNlbWVudDogJ25vcnRoJ1xyXG4gICAgfSk7XHJcbiAgICAkKCcjJyArICdvLW1lYXN1cmUtdG9vbGJhcicpLmFwcGVuZChsYik7XHJcbiAgICAkKCcjby1tZWFzdXJlLWxpbmUtYnV0dG9uJykuYWRkQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgfVxyXG5cclxuICBpZihhcmVhVG9vbCl7XHJcbiAgICB2YXIgcGIgPSB1dGlscy5jcmVhdGVCdXR0b24oe1xyXG4gICAgICBpZDogJ28tbWVhc3VyZS1wb2x5Z29uLWJ1dHRvbicsXHJcbiAgICAgIGNsczogJ28tbWVhc3VyZS10eXBlLWJ1dHRvbicsXHJcbiAgICAgIGljb25DbHM6ICdvLWljb24tbWluaWNvbnMtc3F1YXJlLXZlY3RvcicsXHJcbiAgICAgIHNyYzogJyNtaW5pY29ucy1zcXVhcmUtdmVjdG9yJyxcclxuICAgICAgdG9vbHRpcFRleHQ6ICdZdGEnLFxyXG4gICAgICB0b29sdGlwUGxhY2VtZW50OiAnbm9ydGgnXHJcbiAgICB9KTtcclxuICAgICQoJyMnICsgJ28tbWVhc3VyZS10b29sYmFyJykuYXBwZW5kKHBiKTtcclxuICAgICQoJyNvLW1lYXN1cmUtcG9seWdvbi1idXR0b24nKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgaWYobGVuZ3RoVG9vbCB8fCBhcmVhVG9vbCl7XHJcbiAgICAkKCcjby1tZWFzdXJlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgdG9nZ2xlTWVhc3VyZSgpO1xyXG4gICAgICAkKCcjby1tZWFzdXJlLWJ1dHRvbiBidXR0b24nKS5ibHVyKCk7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaWYobGVuZ3RoVG9vbCl7XHJcbiAgICAkKCcjby1tZWFzdXJlLWxpbmUtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICB0eXBlID0gJ0xpbmVTdHJpbmcnO1xyXG4gICAgICB0b2dnbGVUeXBlKCQoJyNvLW1lYXN1cmUtbGluZS1idXR0b24gYnV0dG9uJykpO1xyXG4gICAgICAkKCcjby1tZWFzdXJlLWxpbmUtYnV0dG9uIGJ1dHRvbicpLmJsdXIoKTtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBpZihhcmVhVG9vbCl7XHJcbiAgICAkKCcjby1tZWFzdXJlLXBvbHlnb24tYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICB0eXBlID0gJ1BvbHlnb24nO1xyXG4gICAgICB0b2dnbGVUeXBlKCQoJyNvLW1lYXN1cmUtcG9seWdvbi1idXR0b24gYnV0dG9uJykpO1xyXG4gICAgICAkKCcjby1tZWFzdXJlLXBvbHlnb24tYnV0dG9uIGJ1dHRvbicpLmJsdXIoKTtcclxuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3R5bGUoZmVhdHVyZSwgbGFiZWxUZXh0KSB7XHJcbiAgdmFyIGZlYXR1cmVUeXBlID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKTtcclxuICB2YXIgbWVhc3VyZVN0eWxlID0gZmVhdHVyZVR5cGUgPT0gJ0xpbmVTdHJpbmcnID8gc3R5bGUuY3JlYXRlU3R5bGVSdWxlKG1lYXN1cmVTdHlsZU9wdGlvbnMubGluZXN0cmluZykgOiBzdHlsZS5jcmVhdGVTdHlsZVJ1bGUobWVhc3VyZVN0eWxlT3B0aW9ucy5wb2x5Z29uKTtcclxuXHJcbiAgcmV0dXJuIG1lYXN1cmVTdHlsZTtcclxufVxyXG5cclxuLy9EaXNwbGF5IGFuZCBtb3ZlIHRvb2x0aXBzIHdpdGggcG9pbnRlclxyXG5mdW5jdGlvbiBwb2ludGVyTW92ZUhhbmRsZXIoZXZ0KSB7XHJcbiAgaWYgKGV2dC5kcmFnZ2luZykge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdmFyIGhlbHBNc2cgPSAnS2xpY2thIGbDtnIgYXR0IGLDtnJqYSBtw6R0YSc7XHJcbiAgdmFyIHRvb2x0aXBDb29yZCA9IGV2dC5jb29yZGluYXRlO1xyXG5cclxuICBpZiAoc2tldGNoKSB7XHJcbiAgICB2YXIgb3V0cHV0O1xyXG4gICAgdmFyIGdlb20gPSAoc2tldGNoLmdldEdlb21ldHJ5KCkpO1xyXG5cclxuICAgIGlmIChnZW9tIGluc3RhbmNlb2Ygb2wuZ2VvbS5Qb2x5Z29uKSB7XHJcbiAgICAgIG91dHB1dCA9IGZvcm1hdEFyZWEoLyoqIEB0eXBlIHtvbC5nZW9tLlBvbHlnb259ICovIChnZW9tKSk7XHJcbiAgICAgIHRvb2x0aXBDb29yZCA9IGdlb20uZ2V0SW50ZXJpb3JQb2ludCgpLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICB9IGVsc2UgaWYgKGdlb20gaW5zdGFuY2VvZiBvbC5nZW9tLkxpbmVTdHJpbmcpIHtcclxuICAgICAgb3V0cHV0ID0gZm9ybWF0TGVuZ3RoKCAvKiogQHR5cGUge29sLmdlb20uTGluZVN0cmluZ30gKi8gKGdlb20pKTtcclxuICAgICAgdG9vbHRpcENvb3JkID0gZ2VvbS5nZXRMYXN0Q29vcmRpbmF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudC5pbm5lckhUTUwgPSBvdXRwdXQ7XHJcbiAgICBsYWJlbCA9IG91dHB1dDtcclxuICAgIG1lYXN1cmVUb29sdGlwLnNldFBvc2l0aW9uKHRvb2x0aXBDb29yZCk7XHJcbiAgfVxyXG5cclxuICBpZiAoZXZ0LnR5cGUgPT0gJ3BvaW50ZXJtb3ZlJykge1xyXG4gICAgaGVscFRvb2x0aXBFbGVtZW50LmlubmVySFRNTCA9IGhlbHBNc2c7XHJcbiAgICBoZWxwVG9vbHRpcC5zZXRQb3NpdGlvbihldnQuY29vcmRpbmF0ZSk7XHJcbiAgfVxyXG5cclxufTtcclxuXHJcbmZ1bmN0aW9uIGFkZEludGVyYWN0aW9uKCkge1xyXG4gIHZlY3Rvci5zZXRWaXNpYmxlKHRydWUpO1xyXG5cclxuICBtZWFzdXJlID0gbmV3IG9sLmludGVyYWN0aW9uLkRyYXcoe1xyXG4gICAgc291cmNlOiBzb3VyY2UsXHJcbiAgICB0eXBlOiB0eXBlLFxyXG4gICAgc3R5bGU6IHN0eWxlLmNyZWF0ZVN0eWxlUnVsZShtZWFzdXJlU3R5bGVPcHRpb25zLmludGVyYWN0aW9uKVxyXG4gIH0pO1xyXG5cclxuICBtYXAuYWRkSW50ZXJhY3Rpb24obWVhc3VyZSk7XHJcblxyXG4gIGNyZWF0ZU1lYXN1cmVUb29sdGlwKCk7XHJcbiAgY3JlYXRlSGVscFRvb2x0aXAoKTtcclxuXHJcbiAgbWFwLm9uKCdwb2ludGVybW92ZScsIHBvaW50ZXJNb3ZlSGFuZGxlcik7XHJcbiAgbWFwLm9uKCdjbGljaycsIHBvaW50ZXJNb3ZlSGFuZGxlcik7XHJcblxyXG4gIG1lYXN1cmUub24oJ2RyYXdzdGFydCcsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgLy8gc2V0IHNrZXRjaFxyXG4gICAgZHJhd1N0YXJ0ID0gdHJ1ZTtcclxuICAgIHNrZXRjaCA9IGV2dC5mZWF0dXJlO1xyXG4gICAgJChoZWxwVG9vbHRpcEVsZW1lbnQpLmFkZENsYXNzKCdvLWhpZGRlbicpO1xyXG4gIH0sIHRoaXMpO1xyXG5cclxuICBtZWFzdXJlLm9uKCdkcmF3ZW5kJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICB2YXIgZmVhdHVyZSA9IGV2dC5mZWF0dXJlO1xyXG4gICAgZmVhdHVyZS5zZXRTdHlsZShjcmVhdGVTdHlsZShmZWF0dXJlKSk7XHJcbiAgICBmZWF0dXJlLmdldFN0eWxlKClbMF0uZ2V0VGV4dCgpLnNldFRleHQobGFiZWwpO1xyXG4gICAgJChtZWFzdXJlVG9vbHRpcEVsZW1lbnQpLnJlbW92ZSgpO1xyXG4gICAgLy8gdW5zZXQgc2tldGNoXHJcbiAgICBza2V0Y2ggPSBudWxsO1xyXG4gICAgLy8gdW5zZXQgdG9vbHRpcCBzbyB0aGF0IGEgbmV3IG9uZSBjYW4gYmUgY3JlYXRlZFxyXG4gICAgbWVhc3VyZVRvb2x0aXBFbGVtZW50ID0gbnVsbDtcclxuICAgIGNyZWF0ZU1lYXN1cmVUb29sdGlwKCk7XHJcbiAgICAkKGhlbHBUb29sdGlwRWxlbWVudCkucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgfSwgdGhpcyk7XHJcblxyXG59O1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlSGVscFRvb2x0aXAoKSB7XHJcbiAgaWYgKGhlbHBUb29sdGlwRWxlbWVudCkge1xyXG4gICAgaGVscFRvb2x0aXBFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaGVscFRvb2x0aXBFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGhlbHBUb29sdGlwRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGhlbHBUb29sdGlwRWxlbWVudC5jbGFzc05hbWUgPSAnby10b29sdGlwIG8tdG9vbHRpcC1tZWFzdXJlJztcclxuXHJcbiAgaGVscFRvb2x0aXAgPSBuZXcgb2wuT3ZlcmxheSh7XHJcbiAgICBlbGVtZW50OiBoZWxwVG9vbHRpcEVsZW1lbnQsXHJcbiAgICBvZmZzZXQ6IFsxNSwgMF0sXHJcbiAgICBwb3NpdGlvbmluZzogJ2NlbnRlci1sZWZ0JyxcclxuICB9KTtcclxuXHJcbiAgb3ZlcmxheUFycmF5LnB1c2goaGVscFRvb2x0aXApO1xyXG4gIG1hcC5hZGRPdmVybGF5KGhlbHBUb29sdGlwKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU1lYXN1cmVUb29sdGlwKCkge1xyXG4gIGlmIChtZWFzdXJlVG9vbHRpcEVsZW1lbnQpIHtcclxuICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG1lYXN1cmVUb29sdGlwRWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBtZWFzdXJlVG9vbHRpcEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBtZWFzdXJlVG9vbHRpcEVsZW1lbnQuY2xhc3NOYW1lID0gJ28tdG9vbHRpcCBvLXRvb2x0aXAtbWVhc3VyZSc7XHJcblxyXG4gIG1lYXN1cmVUb29sdGlwID0gbmV3IG9sLk92ZXJsYXkoe1xyXG4gICAgZWxlbWVudDogbWVhc3VyZVRvb2x0aXBFbGVtZW50LFxyXG4gICAgb2Zmc2V0OiBbMCwgLTE1XSxcclxuICAgIHBvc2l0aW9uaW5nOiAnYm90dG9tLWNlbnRlcicsXHJcbiAgICBzdG9wRXZlbnQ6IGZhbHNlXHJcbiAgfSk7XHJcblxyXG4gIG92ZXJsYXlBcnJheS5wdXNoKG1lYXN1cmVUb29sdGlwKTtcclxuICBtYXAuYWRkT3ZlcmxheShtZWFzdXJlVG9vbHRpcCk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRMZW5ndGgobGluZSkge1xyXG4gIHZhciBwcm9qZWN0aW9uLCBsZW5ndGgsIG91dHB1dDtcclxuICBwcm9qZWN0aW9uID0gbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCk7XHJcbiAgbGVuZ3RoID0gb2wuU3BoZXJlLmdldExlbmd0aChsaW5lLCB7cHJvamVjdGlvbjogcHJvamVjdGlvbn0pO1xyXG4gIGlmIChsZW5ndGggPiAxMDApIHtcclxuICAgIG91dHB1dCA9IChNYXRoLnJvdW5kKGxlbmd0aCAvIDEwMDAgKiAxMDApIC8gMTAwKSArXHJcbiAgICAgICcgJyArICdrbSc7XHJcbiAgfSBlbHNlIHtcclxuICAgIG91dHB1dCA9IChNYXRoLnJvdW5kKGxlbmd0aCAqIDEwMCkgLyAxMDApICtcclxuICAgICAgJyAnICsgJ20nO1xyXG4gIH1cclxuICBcclxuICByZXR1cm4gb3V0cHV0O1xyXG59O1xyXG5cclxuZnVuY3Rpb24gZm9ybWF0QXJlYShwb2x5Z29uKSB7XHJcbiAgdmFyIHByb2plY3Rpb24sIGFyZWEsIG91dHB1dDtcclxuICBwcm9qZWN0aW9uID0gbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCk7XHJcbiAgYXJlYSA9IG9sLlNwaGVyZS5nZXRBcmVhKHBvbHlnb24sIHtwcm9qZWN0aW9uOiBwcm9qZWN0aW9ufSk7XHJcbiAgaWYgKGFyZWEgPiAxMDAwMDAwMCkge1xyXG4gICAgb3V0cHV0ID0gKE1hdGgucm91bmQoYXJlYSAvIDEwMDAwMDAgKiAxMDApIC8gMTAwKSArXHJcbiAgICAgICcgJyArICdrbTxzdXA+Mjwvc3VwPic7XHJcbiAgfSBlbHNlIGlmIChhcmVhID4gMTAwMDApIHtcclxuICAgIG91dHB1dCA9IChNYXRoLnJvdW5kKGFyZWEgLyAxMDAwMCAqIDEwMCkgLyAxMDApICtcclxuICAgICAgJyAnICsgJ2hhJztcclxuICB9IGVsc2Uge1xyXG4gICAgb3V0cHV0ID0gKE1hdGgucm91bmQoYXJlYSAqIDEwMCkgLyAxMDApICtcclxuICAgICAgJyAnICsgJ208c3VwPjI8L3N1cD4nO1xyXG4gIH1cclxuXHJcbiAgdmFyIGh0bWxFbGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gIGh0bWxFbGVtLmlubmVySFRNTCA9IG91dHB1dDtcclxuXHJcbiAgW10uZm9yRWFjaC5jYWxsKGh0bWxFbGVtLmNoaWxkcmVuLCBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICBpZiAoZWxlbWVudC50YWdOYW1lID09PSAnU1VQJykge1xyXG4gICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gU3RyaW5nLmZyb21DaGFyQ29kZShlbGVtZW50LnRleHRDb250ZW50LmNoYXJDb2RlQXQoMCkgKyAxMjgpO1xyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIHJldHVybiBodG1sRWxlbS50ZXh0Q29udGVudDtcclxufTtcclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZU1lYXN1cmUgKCkge1xyXG4gIGlmIChpc0FjdGl2ZSkge1xyXG4gICAgJCgnLm8tbWFwJykudHJpZ2dlcih7XHJcbiAgICAgIHR5cGU6ICdlbmFibGVJbnRlcmFjdGlvbicsXHJcbiAgICAgIGludGVyYWN0aW9uOiAnZmVhdHVyZUluZm8nXHJcbiAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgJCgnLm8tbWFwJykudHJpZ2dlcih7XHJcbiAgICAgIHR5cGU6ICdlbmFibGVJbnRlcmFjdGlvbicsXHJcbiAgICAgIGludGVyYWN0aW9uOiAnbWVhc3VyZSdcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbn07XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVUeXBlKGJ1dHRvbikge1xyXG4gIGlmIChhY3RpdmVCdXR0b24pIHtcclxuICAgIGFjdGl2ZUJ1dHRvbi5yZW1vdmVDbGFzcygnby1tZWFzdXJlLWJ1dHRvbi10cnVlJyk7XHJcbiAgfVxyXG5cclxuICBidXR0b24uYWRkQ2xhc3MoJ28tbWVhc3VyZS1idXR0b24tdHJ1ZScpO1xyXG4gIGFjdGl2ZUJ1dHRvbiA9IGJ1dHRvbjtcclxuICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24obWVhc3VyZSk7XHJcbiAgYWRkSW50ZXJhY3Rpb24oKTtcclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBpbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuXHJcbnZhciBtb2RhbCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICB2YXIgaXNTdGF0aWMgPSB1bmRlZmluZWQ7XHJcbiAgdmFyICR0YXJnZXQgPSB1bmRlZmluZWQ7XHJcbiAgdmFyIG1vZGFsRWwgPSB1bmRlZmluZWQ7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBjcmVhdGVNb2RhbDogY3JlYXRlTW9kYWwsXHJcbiAgICBzaG93TW9kYWw6IHNob3dNb2RhbCxcclxuICAgIGNsb3NlTW9kYWw6IGNsb3NlTW9kYWxcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiByZW5kZXIodGl0bGUsIGNvbnRlbnQsIGNscykge1xyXG4gICAgbW9kYWxFbCA9ICc8ZGl2IGlkPVwiby1tb2RhbFwiICcgKyAnY2xhc3M9XCInICsgY2xzICsgJ1wiPicgK1xyXG4gICAgICAnPGRpdiBjbGFzcz1cIm8tbW9kYWwtc2NyZWVuXCI+PC9kaXY+JyArXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiby1tb2RhbFwiPicgK1xyXG4gICAgICAnPGRpdiBjbGFzcz1cIm8tY2xvc2UtYnV0dG9uXCI+PHN2ZyBjbGFzcz1cIm8taWNvbi1mYS10aW1lc1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS10aW1lc1wiPjwvdXNlPjwvc3ZnPjwvZGl2PicgK1xyXG4gICAgICAnPGRpdiBjbGFzcz1cIm8tbW9kYWwtdGl0bGVcIj4nICsgdGl0bGUgKyAnPC9kaXY+JyArXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiby1tb2RhbC1jb250ZW50XCI+JyArIGNvbnRlbnQgKyAnPC9kaXY+JyArXHJcbiAgICAgICc8L2Rpdj4nICtcclxuICAgICAgJzwvZGl2Pic7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICAgaWYgKGlzU3RhdGljID09PSBmYWxzZSkge1xyXG4gICAgICAkKCcuby1tb2RhbC1zY3JlZW4sIC5vLWNsb3NlLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNsb3NlTW9kYWwoKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAkKCcuby1jbG9zZS1idXR0b24nKS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICAgICBjbG9zZU1vZGFsKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlTW9kYWwobW9kYWxUYXJnZXQsIG9wdGlvbnMpIHtcclxuICAgIHZhciB0aXRsZSA9IG9wdGlvbnMudGl0bGUgfHwgJyc7XHJcbiAgICB2YXIgY29udGVudCA9IG9wdGlvbnMuY29udGVudCB8fCAnJztcclxuICAgIHZhciBjbHMgPSBvcHRpb25zLmNscyB8fCAnJztcclxuICAgIGlmIChvcHRpb25zLmhhc093blByb3BlcnR5KCdzdGF0aWMnKSkge1xyXG4gICAgICBpc1N0YXRpYyA9IG9wdGlvbnMuc3RhdGljO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaXNTdGF0aWMgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHJlbmRlcih0aXRsZSwgY29udGVudCwgY2xzKTtcclxuICAgICR0YXJnZXQgPSAkKG1vZGFsVGFyZ2V0KTtcclxuXHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzaG93TW9kYWwoKSB7XHJcbiAgICAkdGFyZ2V0LnByZXBlbmQobW9kYWxFbCk7XHJcbiAgICBiaW5kVUlBY3Rpb25zKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbG9zZU1vZGFsKCkge1xyXG4gICAgJCgnI28tbW9kYWwnKS5yZW1vdmUoKTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gbW9kYWwoKTtcclxuIiwiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqIENvcHlyaWdodCAyMDE2IE9yaWdvXHJcbiAqIExpY2Vuc2VkIHVuZGVyIEJTRCAyLUNsYXVzZSAoaHR0cHM6Ly9naXRodWIuY29tL29yaWdvLW1hcC9vcmlnby9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dClcclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIGRvd25sb2FkZXIgPSByZXF1aXJlKCcuL29mZmxpbmUvZG93bmxvYWRlcicpO1xyXG52YXIgZG93bmxvYWRIYW5kbGVyID0gcmVxdWlyZSgnLi9vZmZsaW5lL2Rvd25sb2FkaGFuZGxlcicpO1xyXG52YXIgb2ZmbGluZVN0b3JlID0gcmVxdWlyZSgnLi9vZmZsaW5lL29mZmxpbmVzdG9yZScpKCk7XHJcblxyXG52YXIgbWFwID0gdW5kZWZpbmVkO1xyXG52YXIgYmFzZVVybCA9IHVuZGVmaW5lZDtcclxudmFyICRvZmZsaW5lQnV0dG9uID0gdW5kZWZpbmVkO1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG4gIGJhc2VVcmwgPSBWaWV3ZXIuZ2V0QmFzZVVybCgpO1xyXG5cclxuICBkb3dubG9hZEhhbmRsZXIoKTtcclxuXHJcbiAgcmVuZGVyKCk7XHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgdmFyIGVsID0gdXRpbHMuY3JlYXRlTGlzdEJ1dHRvbih7XHJcbiAgICBpZDogJ28tb2ZmbGluZScsXHJcbiAgICBpY29uQ2xzOiAnby1pY29uLWZhLWRvd25sb2FkJyxcclxuICAgIHNyYzogJyNmYS1kb3dubG9hZCcsXHJcbiAgICB0ZXh0OiAnTmVkbGFkZG5pbmdhcidcclxuICB9KTtcclxuICAkKCcjby1tZW51dG9vbHMnKS5hcHBlbmQoZWwpO1xyXG4gICRvZmZsaW5lQnV0dG9uID0gJCgnI28tb2ZmbGluZS1idXR0b24nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkb2ZmbGluZUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICBkb3dubG9hZGVyKG9mZmxpbmVTdG9yZS5nZXRPZmZsaW5lTGF5ZXJzKCkpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gSW5pdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciB0ZW1wbGF0ZSA9IHJlcXVpcmUoXCIuL2Rvd25sb2FkZXIudGVtcGxhdGUuaGFuZGxlYmFyc1wiKTtcclxudmFyIHNwaW5uZXIgPSByZXF1aXJlKFwiLi4vY29tcG9uZW50cy9zcGlubmVyLmhhbmRsZWJhcnNcIik7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XHJcbnZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9vZmZsaW5lZGlzcGF0Y2hlcicpO1xyXG5cclxudmFyIHRvb2xiYXJQcmVmaXggPSAnby1kb3dubG9hZGVyLXRkLXRvb2xiYXItJztcclxuXHJcbnZhciBEb3dubG9hZGVyID0gZnVuY3Rpb24gRG93bmxvYWRlcihsYXllcnNPYmopIHtcclxuICByZW5kZXIobGF5ZXJzT2JqKTtcclxuICBhZGRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyKGxheWVyc09iaikge1xyXG4gICAgJCgnI28tbWFwJykucHJlcGVuZCh0ZW1wbGF0ZSk7XHJcbiAgICByZW5kZXJSb3dzKGxheWVyc09iaik7XHJcblxyXG4gICAgYmluZFVJQWN0aW9ucygpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkTGlzdGVuZXJzKCkge1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZU9mZmxpbmVTdGFydCcsIG9uQ2hhbmdlT2ZmbGluZVN0YXJ0KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VPZmZsaW5lRW5kJywgb25DaGFuZ2VPZmZsaW5lRW5kKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uQ2hhbmdlT2ZmbGluZVN0YXJ0KGUpIHtcclxuICAgIHJlbmRlckJ1dHRvbnMoJyMnICsgdG9vbGJhclByZWZpeCArIGUubGF5ZXJOYW1lLCAncGVuZGluZycsIGUubGF5ZXJOYW1lKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uQ2hhbmdlT2ZmbGluZUVuZChlKSB7XHJcbiAgICByZW5kZXJCdXR0b25zKCcjJyArIHRvb2xiYXJQcmVmaXggKyBlLmxheWVyTmFtZSwgZS5zdGF0ZSwgZS5sYXllck5hbWUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAgICQoJy5vLWRvd25sb2FkZXIgLm8tY2xvc2UtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgY2xvc2VEb3dubG9hZGVyKCk7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclJvd3MobGF5ZXJzT2JqKSB7XHJcbiAgICB2YXIgbGF5ZXJOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGxheWVyc09iaik7XHJcbiAgICBsYXllck5hbWVzLmZvckVhY2goZnVuY3Rpb24obGF5ZXJOYW1lKSB7XHJcbiAgICAgIHJlbmRlclJvdyhsYXllck5hbWUsIGxheWVyc09iaik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclJvdyhsYXllck5hbWUsIGxheWVyc09iaikge1xyXG4gICAgdmFyIGxheWVyID0gVmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2YXIgdGRUaXRsZSA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3RkJywgbGF5ZXIuZ2V0KCd0aXRsZScpLHt9KTtcclxuICAgIHZhciB0b29sYmFySWQgPSB0b29sYmFyUHJlZml4ICsgbGF5ZXJOYW1lO1xyXG4gICAgdmFyIHRvb2xiYXIgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCAnJywge1xyXG4gICAgICBjbHM6ICdvLXRvb2xiYXItaG9yaXpvbnRhbCcsXHJcbiAgICAgIHN0eWxlOiAndGV4dC1hbGlnbjogcmlnaHQ7IGZsb2F0OiByaWdodDsnLFxyXG4gICAgICBpZDogdG9vbGJhcklkXHJcbiAgICB9KTtcclxuICAgIHZhciB0ZFRvb2xiYXIgPSB1dGlscy5jcmVhdGVFbGVtZW50KCd0ZCcsIHRvb2xiYXIsIHt9KTtcclxuICAgIHZhciByb3cgPSB0ZFRpdGxlICsgdGRUb29sYmFyO1xyXG4gICAgdmFyIGNscyA9ICdvLWRvd25sb2FkZXItdHItJyArIGxheWVyTmFtZTtcclxuICAgIHZhciB0ciA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3RyJywgcm93LCB7XHJcbiAgICAgIGNsczogY2xzXHJcbiAgICB9KTtcclxuICAgIHZhciBzdGF0ZTtcclxuICAgICQoJy5vLWRvd25sb2FkZXIgLm8tdGFibGUnKS5hcHBlbmQodHIpO1xyXG4gICAgc3RhdGUgPSAgbGF5ZXJzT2JqW2xheWVyTmFtZV0uZG93bmxvYWRlZCA9PT0gdHJ1ZSA/ICdvZmZsaW5lJyA6ICdkb3dubG9hZCc7XHJcbiAgICByZW5kZXJCdXR0b25zKCcjJyArIHRvb2xiYXJJZCwgc3RhdGUsIGxheWVyTmFtZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJCdXR0b25zKHRhcmdldCwgc3RhdGUsIGxheWVyTmFtZSkge1xyXG4gICAgJCh0YXJnZXQpLmVtcHR5KCk7XHJcbiAgICBpZiAoc3RhdGUgPT09ICdvZmZsaW5lJykge1xyXG4gICAgICByZW5kZXJTeW5jKHRhcmdldCwgbGF5ZXJOYW1lKTtcclxuICAgICAgcmVuZGVyUmVtb3ZlKHRhcmdldCwgbGF5ZXJOYW1lKTtcclxuICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdkb3dubG9hZCcpIHtcclxuICAgICAgcmVuZGVyRG93bmxvYWQodGFyZ2V0LCBsYXllck5hbWUpO1xyXG4gICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ3BlbmRpbmcnKSB7XHJcbiAgICAgIHJlbmRlclBlbmRpbmcodGFyZ2V0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclN5bmModGFyZ2V0LCBsYXllck5hbWUpIHtcclxuICAgIHZhciBpZCA9ICdvLWRvd25sb2FkZXItcmVmcmVzaC0nICsgbGF5ZXJOYW1lO1xyXG4gICAgdmFyIHJlZnJlc2ggPSBjcmVhdGVCdXR0b24oe1xyXG4gICAgICBocmVmOiAnI2ZhLXJlZnJlc2gnLFxyXG4gICAgICBjbHM6ICdvLWljb24tZmEtcmVmcmVzaCcsXHJcbiAgICAgIGlkOiBpZFxyXG4gICAgfSk7XHJcbiAgICAkKHRhcmdldCkuYXBwZW5kKHJlZnJlc2gpO1xyXG4gICAgYmluZEFjdGlvbignIycgKyBpZCwgbGF5ZXJOYW1lLCAnc3luYycpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyUmVtb3ZlKHRhcmdldCwgbGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgaWQgPSAnby1kb3dubG9hZGVyLXRyYXNoLScgKyBsYXllck5hbWU7XHJcbiAgICB2YXIgdHJhc2ggPSBjcmVhdGVCdXR0b24oe1xyXG4gICAgICBocmVmOiAnI2ZhLXRyYXNoJyxcclxuICAgICAgY2xzOiAnby1pY29uLWZhLXRyYXNoJyxcclxuICAgICAgaWQ6IGlkXHJcbiAgICB9KTtcclxuICAgICQodGFyZ2V0KS5hcHBlbmQodHJhc2gpO1xyXG4gICAgYmluZEFjdGlvbignIycgKyBpZCwgbGF5ZXJOYW1lLCAncmVtb3ZlJyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJEb3dubG9hZCh0YXJnZXQsIGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGlkID0gJ28tZG93bmxvYWRlci1kb3dubG9hZC0nICsgbGF5ZXJOYW1lO1xyXG4gICAgdmFyIGRvd25sb2FkID0gY3JlYXRlQnV0dG9uKHtcclxuICAgICAgaHJlZjogJyNmYS1kb3dubG9hZCcsXHJcbiAgICAgIGNsczogJ28taWNvbi1mYS1kb3dubG9hZCcsXHJcbiAgICAgIGlkOiBpZFxyXG4gICAgfSk7XHJcbiAgICAkKHRhcmdldCkuYXBwZW5kKGRvd25sb2FkKTtcclxuICAgIGJpbmRBY3Rpb24oJyMnICsgaWQsIGxheWVyTmFtZSwgJ2Rvd25sb2FkJyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJQZW5kaW5nKHRhcmdldCkge1xyXG4gICAgdmFyIHNwaW5uZXJCdXR0b24gPSB1dGlscy5jcmVhdGVFbGVtZW50KCdidXR0b24nLCAnJywge1xyXG4gICAgICBjbHM6ICdvLXNwaW5uZXInXHJcbiAgICB9KTtcclxuICAgICQodGFyZ2V0KS5hcHBlbmQoc3Bpbm5lckJ1dHRvbik7XHJcbiAgICAkKCcuby1zcGlubmVyJykuYXBwZW5kKHNwaW5uZXIpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlQnV0dG9uKG9iaikge1xyXG4gICAgdmFyIGljb24gPSB1dGlscy5jcmVhdGVTdmcoe1xyXG4gICAgICBocmVmOiBvYmouaHJlZixcclxuICAgICAgY2xzOiBvYmouY2xzXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB1dGlscy5jcmVhdGVFbGVtZW50KCdidXR0b24nLCBpY29uLCB7XHJcbiAgICAgIGlkOiBvYmouaWRcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2xvc2VEb3dubG9hZGVyKCkge1xyXG4gICAgJCgnLm8tZG93bmxvYWRlcicpLnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYmluZEFjdGlvbih0YXJnZXQsIGxheWVyTmFtZSwgdHlwZSkge1xyXG4gICAgJCh0YXJnZXQpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VEb3dubG9hZChsYXllck5hbWUsIHR5cGUpO1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBEb3dubG9hZGVyO1xyXG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiby1jb250YWluZXItZmx1aWQgby1kb3dubG9hZGVyXFxcIj5cXHJcXG4gIDxkaXYgY2xhc3M9XFxcIm8tY2FyZFxcXCI+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcIm8tY2FyZC1oZWFkZXIgby10ZXh0LWNlbnRlclxcXCI+XFxyXFxuICAgICAgPGg2IGNsYXNzPVxcXCJvLWNhcmQtaGVhZGluZ1xcXCI+TmVkbGFkZG5pbmdhcjwvaDY+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiby1jbG9zZS1idXR0b25cXFwiPlxcclxcbiAgICAgICAgPHN2ZyBjbGFzcz1cXFwiby1pY29uLWZhLXRpbWVzXFxcIj48dXNlIHhsaW5rOmhyZWY9XFxcIiNmYS10aW1lc1xcXCI+PC91c2U+PC9zdmc+XFxyXFxuICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJvLWNhcmQtY29udGVudFxcXCI+XFxyXFxuICAgICAgPHRhYmxlIGNsYXNzID1cXFwiby10YWJsZVxcXCI+XFxyXFxuXFxyXFxuICAgICAgPC90YWJsZT5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICA8L2Rpdj5cXHJcXG48L2Rpdj5cXHJcXG5cIjtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGxheWVyQ3JlYXRvciA9IHJlcXVpcmUoJy4uL2xheWVyY3JlYXRvcicpO1xyXG52YXIgb2ZmbGluZUxheWVyID0gcmVxdWlyZSgnLi9vZmZsaW5lbGF5ZXInKSgpO1xyXG52YXIgZG93bmxvYWRTb3VyY2VzID0gcmVxdWlyZSgnLi9kb3dubG9hZHNvdXJjZXMnKTtcclxudmFyIGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL29mZmxpbmVkaXNwYXRjaGVyJyk7XHJcbnZhciBvZmZsaW5lU3RvcmUgPSByZXF1aXJlKCcuL29mZmxpbmVzdG9yZScpKCk7XHJcblxyXG52YXIgZG93bmxvYWRFcnJvck1zZyA9ICdEZXQgaW50csOkZmZhZGUgZXR0IGZlbCBuw6RyIGxhZ3JldCBza3VsbGUgaMOkbXRhcy4gw4RyIGR1IGFuc2x1dGVuIHRpbGwgaW50ZXJuZXQ/J1xyXG52YXIgc2F2ZUVycm9yTXNnID0gJ0RldCBpbnRyw6RmZmFkZSBldHQgZmVsIG7DpHIgZsO2csOkbmRyaW5nYXJuYSBza3VsbGUgc3BhcmFzLiBGw7Zyc8O2ayBpZ2VuIHNlbmFyZS4nO1xyXG52YXIgaW52YWxpZEZvcm1hdE1zZyA9ICdJbnZhbGlkIGZvcm1hdDogJztcclxuXHJcbnZhciBkb3dubG9hZEhhbmRsZXIgPSBmdW5jdGlvbiBkb3dubG9hZEhhbmRsZXIoKSB7XHJcbiAgJChkb2N1bWVudCkub24oJ2NoYW5nZURvd25sb2FkJywgb25DaGFuZ2VEb3dubG9hZCk7XHJcbiAgb2ZmbGluZVN0b3JlLmluaXQoKTtcclxuXHJcbiAgZnVuY3Rpb24gb25DaGFuZ2VEb3dubG9hZChlKSB7XHJcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKGUuYWN0aW9uID09PSAnZG93bmxvYWQnKSB7XHJcbiAgICAgIGRvd25sb2FkKGUubGF5ZXJOYW1lKTtcclxuICAgIH0gZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdzeW5jJykge1xyXG4gICAgICBzeW5jKGUubGF5ZXJOYW1lKTtcclxuICAgIH0gZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdyZW1vdmUnKSB7XHJcbiAgICAgIHJlbW92ZURvd25sb2FkZWQoZS5sYXllck5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlRG93bmxvYWRlZChsYXllck5hbWUpIHtcclxuICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmFyIHByb3BzID0gbGF5ZXIuZ2V0UHJvcGVydGllcygpO1xyXG4gICAgdmFyIHNvdXJjZTtcclxuICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmVTdGFydChsYXllck5hbWUpO1xyXG4gICAgcHJvcHMuc3R5bGUgPSBwcm9wcy5zdHlsZU5hbWU7XHJcbiAgICBwcm9wcy5zb3VyY2UgPSBwcm9wcy5zb3VyY2VOYW1lO1xyXG4gICAgcHJvcHMudHlwZSA9IHByb3BzLm9ubGluZVR5cGU7XHJcbiAgICBzb3VyY2UgPSBsYXllckNyZWF0b3IocHJvcHMpLmdldFNvdXJjZSgpO1xyXG4gICAgbGF5ZXIuc2V0U291cmNlKHNvdXJjZSk7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VPZmZsaW5lKGxheWVyLmdldCgnbmFtZScpLCAncmVtb3ZlJyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzeW5jKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIG9mZmxpbmVFZGl0cyA9IG9mZmxpbmVTdG9yZS5nZXRPZmZsaW5lRWRpdHMobGF5ZXJOYW1lKTtcclxuICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmVTdGFydChsYXllck5hbWUpO1xyXG4gICAgaWYgKG9mZmxpbmVFZGl0cykge1xyXG4gICAgICBvZmZsaW5lRWRpdHNcclxuICAgICAgICAudGhlbihmdW5jdGlvbihlZGl0SXRlbXMpIHtcclxuICAgICAgICAgIHNhdmVUb1JlbW90ZShlZGl0SXRlbXMsIGxheWVyTmFtZSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgZG93bmxvYWQobGF5ZXJOYW1lKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZhaWwoZnVuY3Rpb24oZXJyKSB7XHJcbiAgICAgICAgICAgICAgYWJvcnQobGF5ZXJOYW1lLCBzYXZlRXJyb3JNc2csICdhbGVydCcpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGRvd25sb2FkKGxheWVyTmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzYXZlVG9SZW1vdGUoZWRpdEl0ZW1zLCBsYXllck5hbWUpIHtcclxuICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmFyIHRyYW5zT2JqID0ge1xyXG4gICAgICBkZWxldGU6IFtdLFxyXG4gICAgICBpbnNlcnQ6IFtdLFxyXG4gICAgICB1cGRhdGU6IFtdXHJcbiAgICB9O1xyXG4gICAgdmFyIGlkcyA9IFtdO1xyXG4gICAgZWRpdEl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xyXG4gICAgICB2YXIgaWQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhpdGVtKVswXTtcclxuICAgICAgdmFyIGZlYXR1cmUgPSBsYXllci5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlQnlJZChpZCk7XHJcbiAgICAgIHZhciBkdW1teTtcclxuICAgICAgaWYgKGZlYXR1cmUpIHtcclxuICAgICAgICB0cmFuc09ialtpdGVtW2lkXV0ucHVzaChmZWF0dXJlKTtcclxuICAgICAgICBpZHMucHVzaChpZCk7XHJcbiAgICAgIH0gZWxzZSBpZiAoaXRlbVtpZF0gPT09ICdkZWxldGUnKSB7XHJcbiAgICAgICAgZHVtbXkgPSBuZXcgb2wuRmVhdHVyZSgpO1xyXG4gICAgICAgIGR1bW15LnNldElkKGlkKTtcclxuICAgICAgICB0cmFuc09ialtpdGVtW2lkXV0ucHVzaChkdW1teSk7XHJcbiAgICAgICAgaWRzLnB1c2goaWQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gZG93bmxvYWRTb3VyY2VzW2xheWVyLmdldCgnb25saW5lVHlwZScpXS50cmFuc2FjdGlvbih0cmFuc09iaiwgbGF5ZXJOYW1lKVxyXG4gICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICBpZiAocmVzdWx0ID4gMCkge1xyXG4gICAgICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlT2ZmbGluZShsYXllci5nZXQoJ25hbWUnKSwgJ2VkaXRzJywgaWRzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZG93bmxvYWQobGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZhciB0eXBlID0gbGF5ZXIuZ2V0KCdvbmxpbmVUeXBlJyk7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VPZmZsaW5lU3RhcnQobGF5ZXJOYW1lKTtcclxuICAgIGlmIChkb3dubG9hZFNvdXJjZXMuaGFzT3duUHJvcGVydHkodHlwZSkpIHtcclxuICAgICAgZG93bmxvYWRTb3VyY2VzW3R5cGVdLnJlcXVlc3QobGF5ZXIpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICBvZmZsaW5lTGF5ZXIuc2V0T2ZmbGluZVNvdXJjZShsYXllck5hbWUsIHJlc3VsdCk7XHJcbiAgICAgICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VPZmZsaW5lKGxheWVyLmdldCgnbmFtZScpLCAnZG93bmxvYWQnKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgICBhYm9ydChsYXllck5hbWUsIGRvd25sb2FkRXJyb3JNc2csICdhbGVydCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXJyb3IgPSAnU29ycnksICcgKyB0eXBlICsgJyBpcyBub3QgYXZhaWxhYmxlIGFzIG9uIG9mZmxpbmUgZm9ybWF0JztcclxuICAgICAgYWJvcnQobGF5ZXJOYW1lLCBpbnZhbGlkRm9ybWF0TXNnICsgdHlwZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhYm9ydChsYXllck5hbWUsIGVycm9yLCBpc0FsZXJ0KSB7XHJcbiAgICB2YXIgYWN0aW9uO1xyXG4gICAgaWYgKG9mZmxpbmVTdG9yZS5nZXRPZmZsaW5lTGF5ZXIobGF5ZXJOYW1lKS5kb3dubG9hZGVkKSB7XHJcbiAgICAgIGFjdGlvbiA9ICdvZmZsaW5lJztcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFjdGlvbiA9ICdkb3dubG9hZCc7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGlzQWxlcnQpIHtcclxuICAgICAgYWxlcnQoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmVFbmQobGF5ZXJOYW1lLCBhY3Rpb24pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBkb3dubG9hZEhhbmRsZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHNvdXJjZXMgPSB7fTtcclxuc291cmNlcy5XRlMgPSByZXF1aXJlKCcuL3dmcycpO1xyXG5zb3VyY2VzLkdFT0pTT04gPSByZXF1aXJlKCcuL2dlb2pzb24nKTtcclxuc291cmNlcy5UT1BPSlNPTiA9IHJlcXVpcmUoJy4vdG9wb2pzb24nKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gc291cmNlcztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZlcmlmeUZlYXR1cmVJZHMgPSByZXF1aXJlKCcuL3ZlcmlmeWZlYXR1cmVpZHMnKTtcclxuXHJcbnZhciBnZW9qc29uID0ge307XHJcbmdlb2pzb24ucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QobGF5ZXIpIHtcclxuICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0KCdzb3VyY2VOYW1lJyk7XHJcbiAgdmFyIHJlcXVlc3QgPSBjcmVhdGVSZXF1ZXN0KHNvdXJjZSk7XHJcbiAgcmV0dXJuIHJlcXVlc3Q7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3Qoc291cmNlKSB7XHJcbiAgICB2YXIgZm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5HZW9KU09OKCk7XHJcbiAgICB2YXIgdXJsID0gc291cmNlO1xyXG5cclxuICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIHZhciBmZWF0dXJlcyA9IGZvcm1hdC5yZWFkRmVhdHVyZXMocmVzcG9uc2UpO1xyXG4gICAgICAgIGZlYXR1cmVzID0gdmVyaWZ5RmVhdHVyZUlkcyhmZWF0dXJlcyk7XHJcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZ2VvanNvbjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgZW1pdENoYW5nZU9mZmxpbmU6IGVtaXRDaGFuZ2VPZmZsaW5lLFxyXG4gIGVtaXRDaGFuZ2VEb3dubG9hZDogZW1pdENoYW5nZURvd25sb2FkLFxyXG4gIGVtaXRDaGFuZ2VPZmZsaW5lU3RhcnQ6IGVtaXRDaGFuZ2VPZmZsaW5lU3RhcnQsXHJcbiAgZW1pdENoYW5nZU9mZmxpbmVFbmQ6IGVtaXRDaGFuZ2VPZmZsaW5lRW5kXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRDaGFuZ2VPZmZsaW5lKGxheWVyTmFtZSwgYWN0aW9uLCBpZHMpIHtcclxuICAkLmV2ZW50LnRyaWdnZXIoe1xyXG4gICAgdHlwZTogJ2NoYW5nZU9mZmxpbmUnLFxyXG4gICAgbGF5ZXJOYW1lOiBsYXllck5hbWUsXHJcbiAgICBhY3Rpb246IGFjdGlvbixcclxuICAgIGlkczogaWRzIHx8IHVuZGVmaW5lZFxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0Q2hhbmdlRG93bmxvYWQobGF5ZXJOYW1lLCBhY3Rpb24pIHtcclxuICAkLmV2ZW50LnRyaWdnZXIoe1xyXG4gICAgdHlwZTogJ2NoYW5nZURvd25sb2FkJyxcclxuICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLFxyXG4gICAgYWN0aW9uOiBhY3Rpb25cclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdENoYW5nZU9mZmxpbmVTdGFydChsYXllck5hbWUpIHtcclxuICAkLmV2ZW50LnRyaWdnZXIoe1xyXG4gICAgdHlwZTogJ2NoYW5nZU9mZmxpbmVTdGFydCcsXHJcbiAgICBsYXllck5hbWU6IGxheWVyTmFtZVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0Q2hhbmdlT2ZmbGluZUVuZChsYXllck5hbWUsIHN0YXRlKSB7XHJcbiAgJC5ldmVudC50cmlnZ2VyKHtcclxuICAgIHR5cGU6ICdjaGFuZ2VPZmZsaW5lRW5kJyxcclxuICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLFxyXG4gICAgc3RhdGU6IHN0YXRlXHJcbiAgfSk7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBsYXllckNyZWF0b3IgPSByZXF1aXJlKCcuLi9sYXllcmNyZWF0b3InKTtcclxuXHJcbnZhciBvZmZsaW5lTGF5ZXIgPSBmdW5jdGlvbiBvZmZsaW5lTGF5ZXIoKSB7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzZXRPZmZsaW5lU291cmNlOiBzZXRPZmZsaW5lU291cmNlLFxyXG4gICAgc2V0T25saW5lU291cmNlOiBzZXRPbmxpbmVTb3VyY2VcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldE9mZmxpbmVTb3VyY2UobGF5ZXJOYW1lLCBmZWF0dXJlcykge1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2YXIgc291cmNlO1xyXG4gICAgdmFyIG9wdGlvbnM7XHJcbiAgICBsYXllci5zZXQoJ3R5cGUnLCAnT0ZGTElORScpO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIGZlYXR1cmUgbGF5ZXIgYW5kIGdldCB0aGUgc291cmNlXHJcbiAgICBvcHRpb25zID0gbGF5ZXIuZ2V0UHJvcGVydGllcygpO1xyXG4gICAgb3B0aW9ucy50eXBlID0gJ0ZFQVRVUkUnO1xyXG4gICAgb3B0aW9ucy5mZWF0dXJlcyA9IGZlYXR1cmVzO1xyXG4gICAgb3B0aW9ucy5zdHlsZSA9IG9wdGlvbnMuc3R5bGVOYW1lO1xyXG4gICAgc291cmNlID0gbGF5ZXJDcmVhdG9yKG9wdGlvbnMpLmdldFNvdXJjZSgpO1xyXG4gICAgbGF5ZXIuc2V0U291cmNlKHNvdXJjZSk7XHJcbiAgICByZXR1cm4gbGF5ZXI7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRPbmxpbmVTb3VyY2UobGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZhciBzb3VyY2U7XHJcbiAgICB2YXIgb3B0aW9ucztcclxuXHJcbiAgICAvLyBDcmVhdGUgYSBsYXllciB3aXRoIHRoZSBvbmxpbmUgc291cmNlIGFuZCBnZXQgdGhlIHNvdXJjZVxyXG4gICAgbGF5ZXIuc2V0KCd0eXBlJywgbGF5ZXIuZ2V0KCdvbmxpbmVUeXBlJykpO1xyXG4gICAgb3B0aW9ucyA9IGxheWVyLmdldFByb3BlcnRpZXMoKTtcclxuICAgIG9wdGlvbnMuc291cmNlID0gb3B0aW9ucy5zb3VyY2VOYW1lO1xyXG4gICAgb3B0aW9ucy5zdHlsZSA9IG9wdGlvbnMuc3R5bGVOYW1lO1xyXG4gICAgc291cmNlID0gbGF5ZXJDcmVhdG9yKG9wdGlvbnMpLmdldFNvdXJjZSgpO1xyXG4gICAgbGF5ZXIuc2V0U291cmNlKHNvdXJjZSk7XHJcbiAgICByZXR1cm4gbGF5ZXI7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG9mZmxpbmVMYXllcjtcclxuIiwidmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBsb2NhbGZvcmFnZSA9IHJlcXVpcmUoJ2xvY2FsZm9yYWdlJyk7XHJcbnZhciBvZmZsaW5lTGF5ZXIgPSByZXF1aXJlKCcuL29mZmxpbmVsYXllcicpKCk7XHJcbnZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9vZmZsaW5lZGlzcGF0Y2hlcicpO1xyXG52YXIgZWRpdG9yRGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4uL2VkaXRvci9lZGl0ZGlzcGF0Y2hlcicpO1xyXG52YXIgZm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5HZW9KU09OKCk7XHJcbnZhciBzdG9yYWdlID0ge307XHJcbnZhciBlZGl0c1N0b3JhZ2UgPSB7fTtcclxudmFyIG9mZmxpbmVMYXllcnMgPSB7fTtcclxudmFyIHN0b3JhZ2VOYW1lO1xyXG52YXIgZWRpdHNTdG9yYWdlTmFtZTtcclxudmFyIG1hcDtcclxuXHJcbmZ1bmN0aW9uIG9mZmxpbmVTdG9yZSgpIHtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdldE9mZmxpbmVMYXllcnM6IGdldE9mZmxpbmVMYXllcnMsXHJcbiAgICBnZXRPZmZsaW5lTGF5ZXI6IGdldE9mZmxpbmVMYXllcixcclxuICAgIGdldE9mZmxpbmVFZGl0czogZ2V0T2ZmbGluZUVkaXRzLFxyXG4gICAgZ2V0RWRpdHNJdGVtczogZ2V0RWRpdHNJdGVtcyxcclxuICAgIGluaXQ6IEluaXRcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBJbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gICAgdmFyIGxheWVyTmFtZXM7XHJcbiAgICBtYXAgPSB2aWV3ZXIuZ2V0TWFwKCk7XHJcbiAgICBzdG9yYWdlTmFtZSA9IG9wdGlvbnMubmFtZSB8fCAnb3JpZ28tbGF5ZXJzJztcclxuICAgIGVkaXRzU3RvcmFnZU5hbWUgPSBvcHRpb25zLmVkaXRzTmFtZSB8fCAnb3JpZ28tbGF5ZXJzLWVkaXRzJztcclxuICAgIGxheWVyTmFtZXMgPSB2aWV3ZXIuZ2V0TGF5ZXJzQnlQcm9wZXJ0eSgnb2ZmbGluZScsIHRydWUsIHRydWUpO1xyXG4gICAgc2V0T2ZmbGluZUxheWVycyhsYXllck5hbWVzKTtcclxuICAgIHN0b3JhZ2UgPSBjcmVhdGVJbnN0YW5jZXMobGF5ZXJOYW1lcywgc3RvcmFnZU5hbWUpO1xyXG4gICAgZWRpdHNTdG9yYWdlID0gY3JlYXRlSW5zdGFuY2VzKGxheWVyTmFtZXMsIGVkaXRzU3RvcmFnZU5hbWUpO1xyXG4gICAgaW5pdExheWVycygpO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VPZmZsaW5lJywgb25DaGFuZ2VPZmZsaW5lKTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VPZmZsaW5lRWRpdHMnLCBvbkNoYW5nZU9mZmxpbmVFZGl0cyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZXMobGF5ZXJOYW1lcywgbmFtZSkge1xyXG4gICAgdmFyIGluc3RhbmNlcyA9IHt9O1xyXG4gICAgbGF5ZXJOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyTmFtZSkge1xyXG4gICAgICBpbnN0YW5jZXNbbGF5ZXJOYW1lXSA9IGxvY2FsZm9yYWdlLmNyZWF0ZUluc3RhbmNlKHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIHN0b3JlTmFtZTogbGF5ZXJOYW1lXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGluc3RhbmNlcztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldE9mZmxpbmVMYXllcnMoKSB7XHJcbiAgICByZXR1cm4gb2ZmbGluZUxheWVycztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldE9mZmxpbmVMYXllcihsYXllck5hbWUpIHtcclxuICAgIHJldHVybiBvZmZsaW5lTGF5ZXJzW2xheWVyTmFtZV07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRPZmZsaW5lRWRpdHMobGF5ZXJOYW1lKSB7XHJcbiAgICBpZiAob2ZmbGluZUxheWVyc1tsYXllck5hbWVdLmVkaXRzKSB7XHJcbiAgICAgIHJldHVybiBnZXRFZGl0c0l0ZW1zKGxheWVyTmFtZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0T2ZmbGluZUxheWVycyhsYXllck5hbWVzKSB7XHJcbiAgICBsYXllck5hbWVzLmZvckVhY2goZnVuY3Rpb24obGF5ZXJOYW1lKSB7XHJcbiAgICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgICBsYXllci5zZXQoJ29ubGluZVR5cGUnLCBsYXllci5nZXQoJ3R5cGUnKSk7XHJcbiAgICAgIG9mZmxpbmVMYXllcnNbbGF5ZXJOYW1lXSA9IGNyZWF0ZU9mZmxpbmVPYmooKTtcclxuICAgICAgb2ZmbGluZUxheWVyLnNldE9mZmxpbmVTb3VyY2UobGF5ZXJOYW1lLCBbXSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uQ2hhbmdlT2ZmbGluZShlKSB7XHJcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKGUuYWN0aW9uID09PSAnZG93bmxvYWQnKSB7XHJcbiAgICAgIG9uRG93bmxvYWQoZS5sYXllck5hbWUpXHJcbiAgICB9IGVsc2UgaWYgKGUuYWN0aW9uID09PSAnZWRpdHMnKSB7XHJcbiAgICAgIG9uZEVkaXRzKGUubGF5ZXJOYW1lLCBlLmlkcyk7XHJcbiAgICB9IGVsc2UgaWYgKGUuYWN0aW9uID09PSAncmVtb3ZlJykge1xyXG4gICAgICBvblJlbW92ZShlLmxheWVyTmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkNoYW5nZU9mZmxpbmVFZGl0cyhlKSB7XHJcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG4gICAgaWYgKGVkaXRzU3RvcmFnZVtlLmxheWVyTmFtZV0pIHtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlZGl0c1N0b3JhZ2VbZS5sYXllck5hbWVdID0gbG9jYWxmb3JhZ2UuY3JlYXRlSW5zdGFuY2Uoe1xyXG4gICAgICAgIG5hbWU6IGVkaXRzU3RvcmFnZU5hbWUsXHJcbiAgICAgICAgc3RvcmVOYW1lOiBlLmxheWVyTmFtZVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChlLmVkaXRzLnVwZGF0ZSkge1xyXG4gICAgICBzYXZlVXBkYXRlKGUuZWRpdHMudXBkYXRlLCBlLmxheWVyTmFtZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZS5lZGl0cy5pbnNlcnQpIHtcclxuICAgICAgc2F2ZUluc2VydChlLmVkaXRzLmluc2VydCwgZS5sYXllck5hbWUpO1xyXG4gICAgfVxyXG4gICAgaWYgKGUuZWRpdHMuZGVsZXRlKSB7XHJcbiAgICAgIHNhdmVEZWxldGUoZS5lZGl0cy5kZWxldGUsIGUubGF5ZXJOYW1lKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uRG93bmxvYWQobGF5ZXJOYW1lKSB7XHJcbiAgICBpZiAob2ZmbGluZUxheWVyc1tsYXllck5hbWVdLmRvd25sb2FkZWQpIHtcclxuICAgICAgc3RvcmFnZVtsYXllck5hbWVdLmNsZWFyKClcclxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNhdmVGZWF0dXJlc1RvU3RvcmFnZShsYXllck5hbWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2F2ZUZlYXR1cmVzVG9TdG9yYWdlKGxheWVyTmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbmRFZGl0cyhsYXllck5hbWUsIGlkcykge1xyXG4gICAgdmFyIHByb21pc2VzID0gaWRzLm1hcChmdW5jdGlvbihpZCkge1xyXG4gICAgICByZXR1cm4gcmVtb3ZlRnJvbUVkaXRzU3RvcmFnZShpZCwgbGF5ZXJOYW1lKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25SZW1vdmUobGF5ZXJOYW1lKSB7XHJcbiAgICBpZiAob2ZmbGluZUxheWVyc1tsYXllck5hbWVdLmVkaXRzKSB7XHJcbiAgICAgIHZhciBwcm9jZWVkID0gY29uZmlybSgnRHUgaGFyIGZvcnRmYXJhbmRlIG9mZmxpbmUtw6RuZHJpbmdhciBzb20gaW50ZSDDpHIgc3BhcmFkZS4gT20gZHUgZm9ydHPDpHR0ZXIga29tbWVyIGRlc3NhIGF0dCBmw7Zyc3Zpbm5hLicpO1xyXG4gICAgICBpZiAocHJvY2VlZCkge1xyXG4gICAgICAgIHJlbW92ZURvd25sb2FkZWQobGF5ZXJOYW1lKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVtb3ZlRG93bmxvYWRlZChsYXllck5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlRG93bmxvYWRlZChsYXllck5hbWUpIHtcclxuICAgIGlmIChvZmZsaW5lTGF5ZXJzW2xheWVyTmFtZV0pIHtcclxuICAgICAgcmV0dXJuIHN0b3JhZ2VbbGF5ZXJOYW1lXS5jbGVhcigpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICBzZXRMYXllck9ubGluZShsYXllck5hbWUpO1xyXG4gICAgICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlT2ZmbGluZUVuZChsYXllck5hbWUsICdkb3dubG9hZCcpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlT2ZmbGluZU9iaigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGRvd25sb2FkZWQ6IGZhbHNlLFxyXG4gICAgICBlZGl0czogZmFsc2VcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldERvd25sb2FkZWQobGF5ZXJOYW1lLCBkb3dubG9hZGVkKSB7XHJcbiAgICBpZiAoZG93bmxvYWRlZCkge1xyXG4gICAgICBvZmZsaW5lTGF5ZXJzW2xheWVyTmFtZV0uZG93bmxvYWRlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvZmZsaW5lTGF5ZXJzW2xheWVyTmFtZV0uZG93bmxvYWRlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0RWRpdHMobGF5ZXJOYW1lLCBlZGl0cykge1xyXG4gICAgaWYgKGVkaXRzKSB7XHJcbiAgICAgIG9mZmxpbmVMYXllcnNbbGF5ZXJOYW1lXS5lZGl0cyA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBvZmZsaW5lTGF5ZXJzW2xheWVyTmFtZV0uZWRpdHMgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNhdmVGZWF0dXJlc1RvU3RvcmFnZShsYXllck5hbWUpIHtcclxuICAgIHZhciBmZWF0dXJlcztcclxuICAgIGlmIChzdG9yYWdlW2xheWVyTmFtZV0pIHtcclxuICAgICAgZmVhdHVyZXMgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKS5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlcygpO1xyXG4gICAgICBzZXRJdGVtcyhsYXllck5hbWUsIGZlYXR1cmVzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGxheWVyTmFtZSArICcgaXMgbWlzc2luZyBpbiBzdG9yYWdlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRJdGVtcyhsYXllck5hbWUsIGZlYXR1cmVzKSB7XHJcbiAgICB2YXIgcHJvbWlzZXMgPSBmZWF0dXJlcy5tYXAoZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XHJcbiAgICAgIHZhciBvYmogPSBmb3JtYXQud3JpdGVGZWF0dXJlT2JqZWN0KGZlYXR1cmUpO1xyXG4gICAgICByZXR1cm4gc3RvcmFnZVtsYXllck5hbWVdLnNldEl0ZW0oaWQsIG9iaik7XHJcbiAgICB9KTtcclxuICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKHJlc3VsdHMpIHtcclxuICAgICAgc2V0TGF5ZXJPZmZsaW5lKGxheWVyTmFtZSwgZmVhdHVyZXMpO1xyXG4gICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VPZmZsaW5lRW5kKGxheWVyTmFtZSwgJ29mZmxpbmUnKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0SXRlbXMobGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZhciBnZW9tZXRyeU5hbWUgPSBsYXllci5nZXQoJ2dlb21ldHJ5TmFtZScpO1xyXG4gICAgdmFyIGZlYXR1cmVzID0gW107XHJcbiAgICByZXR1cm4gc3RvcmFnZVtsYXllck5hbWVdLml0ZXJhdGUoZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgpIHtcclxuICAgICAgICB2YXIgc3RvcmVkRmVhdHVyZSA9IGZvcm1hdC5yZWFkRmVhdHVyZSh2YWx1ZSk7XHJcbiAgICAgICAgdmFyIGZlYXR1cmUgPSByZXN0b3JlR2VvbWV0cnlOYW1lKHN0b3JlZEZlYXR1cmUsIGdlb21ldHJ5TmFtZSk7XHJcbiAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldEVkaXRzSXRlbXMobGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZhciBpdGVtcyA9IFtdO1xyXG4gICAgcmV0dXJuIGVkaXRzU3RvcmFnZVtsYXllck5hbWVdLml0ZXJhdGUoZnVuY3Rpb24odmFsdWUsIGtleSwgaW5kZXgpIHtcclxuICAgICAgICB2YXIgb2JqID0ge307XHJcbiAgICAgICAgb2JqW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICBpdGVtcy5wdXNoKG9iaik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpbml0TGF5ZXJzKCkge1xyXG4gICAgdmFyIGxheWVyTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzdG9yYWdlKTtcclxuICAgIGxheWVyTmFtZXMuZm9yRWFjaChmdW5jdGlvbihsYXllck5hbWUpIHtcclxuICAgICAgZ2V0SXRlbXMobGF5ZXJOYW1lKS50aGVuKGZ1bmN0aW9uKGZlYXR1cmVzKSB7XHJcbiAgICAgICAgdmFyIGxheWVyO1xyXG4gICAgICAgIGlmIChmZWF0dXJlcy5sZW5ndGgpIHtcclxuICAgICAgICAgIHNldExheWVyT2ZmbGluZShsYXllck5hbWUsIGZlYXR1cmVzKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2V0TGF5ZXJPbmxpbmUobGF5ZXJOYW1lLCBmZWF0dXJlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgZ2V0RWRpdHNJdGVtcyhsYXllck5hbWUpLnRoZW4oZnVuY3Rpb24oaXRlbXMpIHtcclxuICAgICAgICB2YXIgbGF5ZXI7XHJcbiAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgc2V0RWRpdHMobGF5ZXJOYW1lLCB0cnVlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2V0RWRpdHMobGF5ZXJOYW1lLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0TGF5ZXJPZmZsaW5lKGxheWVyTmFtZSwgZmVhdHVyZXMpIHtcclxuICAgIG9mZmxpbmVMYXllci5zZXRPZmZsaW5lU291cmNlKGxheWVyTmFtZSwgZmVhdHVyZXMpO1xyXG4gICAgc2V0RG93bmxvYWRlZChsYXllck5hbWUsIHRydWUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0TGF5ZXJPbmxpbmUobGF5ZXJOYW1lKSB7XHJcbiAgICBvZmZsaW5lTGF5ZXIuc2V0T25saW5lU291cmNlKGxheWVyTmFtZSk7XHJcbiAgICBzZXREb3dubG9hZGVkKGxheWVyTmFtZSwgZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2F2ZVVwZGF0ZSh1cGRhdGVzLCBsYXllck5hbWUpIHtcclxuICAgIHVwZGF0ZXMuZm9yRWFjaChmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgIHZhciBpZCA9IGZlYXR1cmUuZ2V0SWQoKTtcclxuICAgICAgdmFyIGFjdGlvbiA9ICd1cGRhdGUnO1xyXG4gICAgICBlZGl0c1N0b3JhZ2VbbGF5ZXJOYW1lXS5nZXRJdGVtKGlkKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBzYXZlVG9FZGl0c1N0b3JhZ2UoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2F2ZUZlYXR1cmVUb1N0b3JhZ2UoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzYXZlSW5zZXJ0KGluc2VydHMsIGxheWVyTmFtZSkge1xyXG4gICAgaW5zZXJ0cy5mb3JFYWNoKGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgdmFyIGFjdGlvbiA9ICdpbnNlcnQnO1xyXG4gICAgICBzYXZlVG9FZGl0c1N0b3JhZ2UoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzYXZlRGVsZXRlKGRlbGV0ZXMsIGxheWVyTmFtZSkge1xyXG4gICAgZGVsZXRlcy5mb3JFYWNoKGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgdmFyIGlkID0gZmVhdHVyZS5nZXRJZCgpO1xyXG4gICAgICB2YXIgYWN0aW9uID0gJ2RlbGV0ZSc7XHJcbiAgICAgIGVkaXRzU3RvcmFnZVtsYXllck5hbWVdLmdldEl0ZW0oaWQpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNhdmVUb0VkaXRzU3RvcmFnZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbik7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCA9PT0gJ2luc2VydCcpIHtcclxuICAgICAgICAgICAgcmVtb3ZlRnJvbUVkaXRzU3RvcmFnZShmZWF0dXJlLmdldElkKCksIGxheWVyTmFtZSlcclxuICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGVtaXRDaGFuZ2VGZWF0dXJlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHNhdmVGZWF0dXJlVG9TdG9yYWdlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2F2ZVRvRWRpdHNTdG9yYWdlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKSB7XHJcbiAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XHJcbiAgICBlZGl0c1N0b3JhZ2VbbGF5ZXJOYW1lXS5zZXRJdGVtKGlkLCBhY3Rpb24pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHNldEVkaXRzKGxheWVyTmFtZSwgdHJ1ZSk7XHJcbiAgICAgICAgc2F2ZUZlYXR1cmVUb1N0b3JhZ2UoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZUZyb21FZGl0c1N0b3JhZ2UoaWQsIGxheWVyTmFtZSkge1xyXG4gICAgcmV0dXJuIGVkaXRzU3RvcmFnZVtsYXllck5hbWVdLnJlbW92ZUl0ZW0oaWQpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGVkaXRzU3RvcmFnZVtsYXllck5hbWVdLmxlbmd0aCgpXHJcbiAgICAgICAgICAudGhlbihmdW5jdGlvbihucikge1xyXG4gICAgICAgICAgICBpZiAobnIgPiAwKSB7XHJcbiAgICAgICAgICAgICAgc2V0RWRpdHMobGF5ZXJOYW1lLCB0cnVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICBzZXRFZGl0cyhsYXllck5hbWUsIGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2F2ZUZlYXR1cmVUb1N0b3JhZ2UoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pIHtcclxuICAgIHZhciBpZCA9IGZlYXR1cmUuZ2V0SWQoKTtcclxuICAgIHN0b3JhZ2VbbGF5ZXJOYW1lXS5zZXRJdGVtKGlkLCBmb3JtYXQud3JpdGVGZWF0dXJlT2JqZWN0KGZlYXR1cmUpKVxyXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICBlbWl0Q2hhbmdlRmVhdHVyZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZW1pdENoYW5nZUZlYXR1cmUoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pIHtcclxuICAgIGVkaXRvckRpc3BhdGNoZXIuZW1pdENoYW5nZUZlYXR1cmUoe1xyXG4gICAgICBmZWF0dXJlOiBbZmVhdHVyZV0sXHJcbiAgICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLFxyXG4gICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXHJcbiAgICAgIGFjdGlvbjogYWN0aW9uXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlc3RvcmVHZW9tZXRyeU5hbWUoZmVhdHVyZSwgZ2VvbWV0cnlOYW1lKSB7XHJcbiAgICB2YXIgZ2VvbWV0cnkgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCk7XHJcbiAgICBmZWF0dXJlLnVuc2V0KGZlYXR1cmUuZ2V0R2VvbWV0cnlOYW1lKCkpO1xyXG4gICAgZmVhdHVyZS5zZXRHZW9tZXRyeU5hbWUoZ2VvbWV0cnlOYW1lKTtcclxuICAgIGZlYXR1cmUuc2V0R2VvbWV0cnkoZ2VvbWV0cnkpO1xyXG4gICAgcmV0dXJuIGZlYXR1cmU7XHJcbiAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBvZmZsaW5lU3RvcmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2ZXJpZnlGZWF0dXJlSWRzID0gcmVxdWlyZSgnLi92ZXJpZnlmZWF0dXJlaWRzJyk7XHJcblxyXG52YXIgdG9wb0pzb24gPSB7fTtcclxudG9wb0pzb24ucmVxdWVzdCA9IGZ1bmN0aW9uIHJlcXVlc3QobGF5ZXIpIHtcclxuICB2YXIgc291cmNlID0gbGF5ZXIuZ2V0KCdzb3VyY2VOYW1lJyk7XHJcbiAgdmFyIHJlcXVlc3QgPSBjcmVhdGVSZXF1ZXN0KHNvdXJjZSk7XHJcbiAgcmV0dXJuIHJlcXVlc3Q7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3Qoc291cmNlKSB7XHJcbiAgICB2YXIgZm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5Ub3BvSlNPTigpO1xyXG4gICAgdmFyIHVybCA9IHNvdXJjZTtcclxuXHJcbiAgICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBjYWNoZTogZmFsc2VcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICB2YXIgZmVhdHVyZXMgPSBmb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlKTtcclxuICAgICAgICBmZWF0dXJlcyA9IHZlcmlmeUZlYXR1cmVJZHMoZmVhdHVyZXMpO1xyXG4gICAgICAgIHJldHVybiBmZWF0dXJlcztcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHRvcG9Kc29uO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIGdlbmVyYXRlVVVJRCA9IHJlcXVpcmUoJy4uL3V0aWxzL2dlbmVyYXRldXVpZCcpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB2ZXJpZnlGZWF0dXJlSWRzKGZlYXR1cmVzKSB7XHJcbiAgaWYgKGZlYXR1cmVzWzBdKSB7XHJcbiAgICBpZiAoZmVhdHVyZXNbMF0uZ2V0SWQoKSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGZlYXR1cmVzLmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICAgIGZlYXR1cmUuc2V0SWQoZ2VuZXJhdGVVVUlEKCkpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGZlYXR1cmVzO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHdmc1RyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi4vZWRpdG9yL3dmc3RyYW5zYWN0aW9uJyk7XHJcblxyXG52YXIgd2ZzID0ge307XHJcbndmcy5yZXF1ZXN0ID0gZnVuY3Rpb24gcmVxdWVzdChsYXllcikge1xyXG4gIHZhciBzb3VyY2VPcHRpb25zID0gdmlld2VyLmdldE1hcFNvdXJjZSgpW2xheWVyLmdldCgnc291cmNlTmFtZScpXTtcclxuICBzb3VyY2VPcHRpb25zLmZlYXR1cmVUeXBlID0gbGF5ZXIuZ2V0KCduYW1lJykuc3BsaXQoJ19fJykuc2hpZnQoKTtcclxuICBzb3VyY2VPcHRpb25zLmdlb21ldHJ5TmFtZSA9IGxheWVyLmdldCgnZ2VvbWV0cnlOYW1lJyk7XHJcbiAgc291cmNlT3B0aW9ucy5maWx0ZXIgPSBsYXllci5nZXQoJ2ZpbHRlcicpO1xyXG4gIHNvdXJjZU9wdGlvbnMucHJvamVjdGlvbkNvZGUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICBzb3VyY2VPcHRpb25zLmV4dGVudCA9IGxheWVyLmdldCgnZXh0ZW50Jyk7XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uQ29kZSA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG5cclxuICB2YXIgcmVxdWVzdCA9IGNyZWF0ZVJlcXVlc3Qoc291cmNlT3B0aW9ucyk7XHJcbiAgcmV0dXJuIHJlcXVlc3Q7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVJlcXVlc3Qob3B0aW9ucykge1xyXG4gICAgdmFyIGZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuR2VvSlNPTih7XHJcbiAgICAgIGdlb21ldHJ5TmFtZTogb3B0aW9ucy5nZW9tZXRyeU5hbWVcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBzZXJ2ZXJVcmwgPSBvcHRpb25zLnVybDtcclxuICAgIHZhciBxdWVyeUZpbHRlcjtcclxuICAgIHZhciB1cmw7XHJcblxyXG4gICAgLy9JZiBjcWwgZmlsdGVyIHRoZW4gYmJveCBtdXN0IGJlIHVzZWQgaW4gdGhlIGZpbHRlci5cclxuICAgIGlmIChvcHRpb25zLmZpbHRlcikge1xyXG4gICAgICBxdWVyeUZpbHRlciA9ICcmQ1FMX0ZJTFRFUj0nICsgb3B0aW9ucy5maWx0ZXIgK1xyXG4gICAgICAgICcgQU5EIEJCT1goJyArIG9wdGlvbnMuZ2VvbWV0cnlOYW1lICsgJywnICtcclxuICAgICAgICBvcHRpb25zLmV4dGVudC5qb2luKCcsJykgKyAnLCcgK1xyXG4gICAgICAgIFwiJ1wiICsgb3B0aW9ucy5wcm9qZWN0aW9uQ29kZSArIFwiJylcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHF1ZXJ5RmlsdGVyID0gJyZCQk9YPScgK1xyXG4gICAgICAgIG9wdGlvbnMuZXh0ZW50LmpvaW4oJywnKSArICcsJyArIG9wdGlvbnMucHJvamVjdGlvbkNvZGU7XHJcbiAgICB9XHJcblxyXG4gICAgdXJsID0gc2VydmVyVXJsICtcclxuICAgICAgJz9zZXJ2aWNlPVdGUyYnICtcclxuICAgICAgJ3ZlcnNpb249MS4xLjAmcmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVOYW1lPScgKyBvcHRpb25zLmZlYXR1cmVUeXBlICtcclxuICAgICAgJyZvdXRwdXRGb3JtYXQ9YXBwbGljYXRpb24vanNvbicgK1xyXG4gICAgICAnJnNyc25hbWU9JyArIG9wdGlvbnMucHJvamVjdGlvbkNvZGUgK1xyXG4gICAgICBxdWVyeUZpbHRlcjtcclxuXHJcbiAgICByZXR1cm4gJC5hamF4KHtcclxuICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICBjYWNoZTogZmFsc2VcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gZm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxud2ZzLnRyYW5zYWN0aW9uID0gZnVuY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSkge1xyXG4gIHJldHVybiB3ZnNUcmFuc2FjdGlvbih0cmFuc09iaiwgbGF5ZXJOYW1lKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB3ZnM7XHJcbiIsIi8qcmVxdWlyZXMgTW9kYWwuanMqL1xyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBwZXJtYWxpbmtQYXJzZXIgPSByZXF1aXJlKCcuL3Blcm1hbGlua3BhcnNlcicpO1xyXG52YXIgcGVybWFsaW5rU3RvcmUgPSByZXF1aXJlKCcuL3Blcm1hbGlua3N0b3JlJyk7XHJcbnZhciB1cmxwYXJzZXIgPXJlcXVpcmUoJy4uL3V0aWxzL3VybHBhcnNlcicpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbnJldHVybiB7XHJcbiAgICBnZXRQZXJtYWxpbms6IGZ1bmN0aW9uIGdldFBlcm1hbGluayhvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIGhhc2ggPSB1cmxwYXJzZXIuZm9ybWF0VXJsKHBlcm1hbGlua1N0b3JlLmdldFN0YXRlKCkpO1xyXG4gICAgICAgIHZhciB1cmwgPSBwZXJtYWxpbmtTdG9yZS5nZXRVcmwoKSArIFwiI1wiICsgaGFzaDtcclxuICAgICAgICByZXR1cm4odXJsKTtcclxuICAgIH0sXHJcbiAgICBwYXJzZVBlcm1hbGluazogZnVuY3Rpb24gcGFyc2VQZXJtYWxpbmsodXJsKSB7XHJcbiAgICAgICAgaWYodXJsLmluZGV4T2YoJyMnKSA+IC0xKSB7XHJcbiAgICAgICAgICAgIHZhciB1cmxTZWFyY2ggPSB1cmwuc3BsaXQoJyMnKVsxXTtcclxuICAgICAgICAgICAgdmFyIHVybFBhcnRzID0gdXJsU2VhcmNoLnNwbGl0KCcmJyk7XHJcbiAgICAgICAgICAgIHZhciB1cmxBc09iaiA9IHt9O1xyXG4gICAgICAgICAgICB1cmxQYXJ0cy5mb3JFYWNoKGZ1bmN0aW9uKHBhcnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBwYXJ0LnNwbGl0KCc9JylbMF07XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gcGFydC5zcGxpdCgnPScpWzFdO1xyXG4gICAgICAgICAgICAgICAgaWYocGVybWFsaW5rUGFyc2VyLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB1cmxBc09ialtrZXldID0gcGVybWFsaW5rUGFyc2VyW2tleV0odmFsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiB1cmxBc09iajtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbn0oKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciB1cmxwYXJzZXIgPSByZXF1aXJlKCcuLi91dGlscy91cmxwYXJzZXInKTtcclxuXHJcbnZhciBsYXllck1vZGVsID0ge1xyXG4gICAgdjoge1xyXG4gICAgICBuYW1lOiBcInZpc2libGVcIixcclxuICAgICAgZGF0YVR5cGU6IFwiYm9vbGVhblwiXHJcbiAgICB9LFxyXG4gICAgczoge1xyXG4gICAgICBuYW1lOiBcImxlZ2VuZFwiLFxyXG4gICAgICBkYXRhVHlwZTogXCJib29sZWFuXCJcclxuICAgIH0sXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGxheWVyczogZnVuY3Rpb24obGF5ZXJzU3RyKSB7XHJcbiAgICAgIHZhciBsYXllcnMgPSBsYXllcnNTdHIuc3BsaXQoJywnKTtcclxuICAgICAgdmFyIGxheWVyT2JqZWN0cyA9IHt9O1xyXG4gICAgICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgICAgdmFyIGxheWVyT2JqZWN0ID0gdXJscGFyc2VyLm9iamVjdGlmeShsYXllcix7dG9wbW9zdDogXCJuYW1lXCJ9KTtcclxuICAgICAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGxheWVyT2JqZWN0KS5mb3JFYWNoKGZ1bmN0aW9uKHByb3ApIHtcclxuICAgICAgICAgICAgICB2YXIgdmFsID0gbGF5ZXJPYmplY3RbcHJvcF07XHJcbiAgICAgICAgICAgICAgaWYobGF5ZXJNb2RlbC5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlID0gbGF5ZXJNb2RlbFtwcm9wXTtcclxuICAgICAgICAgICAgICAgICAgb2JqW2F0dHJpYnV0ZS5uYW1lXSA9IHVybHBhcnNlci5zdHJCb29sZWFuKHZhbCk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBvYmpbcHJvcF0gPSB2YWw7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBsYXllck9iamVjdHNbb2JqLm5hbWVdID0gb2JqO1xyXG5cclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBsYXllck9iamVjdHM7XHJcbiAgfSxcclxuICB6b29tOiBmdW5jdGlvbih6b29tU3RyKSB7XHJcbiAgICAgIHJldHVybiBwYXJzZUludCh6b29tU3RyKTtcclxuICB9LFxyXG4gIGNlbnRlcjogZnVuY3Rpb24oY2VudGVyU3RyKSB7XHJcbiAgICAgIHZhciBjZW50ZXIgPSBjZW50ZXJTdHIuc3BsaXQoXCIsXCIpLm1hcChmdW5jdGlvbihjb29yZCkge1xyXG4gICAgICAgICAgcmV0dXJuIHBhcnNlSW50KGNvb3JkKTtcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBjZW50ZXI7XHJcbiAgfSxcclxuICBzZWxlY3Rpb246IGZ1bmN0aW9uKHNlbGVjdGlvblN0cikge1xyXG4gICAgICByZXR1cm4gdXJscGFyc2VyLnN0ckFycmF5aWZ5KHNlbGVjdGlvblN0ciwge1xyXG4gICAgICAgIHRvcG1vc3ROYW1lOiBcImdlb21ldHJ5VHlwZVwiLFxyXG4gICAgICAgIGFyck5hbWU6IFwiY29vcmRpbmF0ZXNcIn1cclxuICAgICAgKTtcclxuICB9LFxyXG4gIHBpbjogZnVuY3Rpb24ocGluU3RyKSB7XHJcbiAgICAgIHJldHVybiB1cmxwYXJzZXIuc3RySW50aWZ5KHBpblN0cik7XHJcbiAgfSxcclxuICBtYXA6IGZ1bmN0aW9uKG1hcFN0cikge1xyXG4gICAgICByZXR1cm4gbWFwU3RyO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHNlbGVjdGlvbiA9IHJlcXVpcmUoJy4uL2ZlYXR1cmVpbmZvJylbJ2dldFNlbGVjdGlvbiddO1xyXG52YXIgZ2V0UGluID0gcmVxdWlyZSgnLi4vZmVhdHVyZWluZm8nKVsnZ2V0UGluJ107XHJcbnZhciB1cmxwYXJzZXIgPXJlcXVpcmUoJy4uL3V0aWxzL3VybHBhcnNlcicpO1xyXG5cclxudmFyIHBlcm1hbGlua1N0b3JlID0ge307XHJcbnZhciBzdGF0ZTtcclxudmFyIHVybDtcclxuXHJcbnBlcm1hbGlua1N0b3JlLmdldFN0YXRlID0gZnVuY3Rpb24gZ2V0U3RhdGUoKSB7XHJcbiAgICBzdGF0ZSA9IHt9O1xyXG4gICAgdmFyIHZpZXcgPSB2aWV3ZXIuZ2V0TWFwKCkuZ2V0VmlldygpO1xyXG4gICAgdmFyIGxheWVycyA9IHZpZXdlci5nZXRMYXllcnMoKTtcclxuICAgIHN0YXRlLmxheWVycyA9IGdldFNhdmVMYXllcnMobGF5ZXJzKTtcclxuICAgIHN0YXRlLmNlbnRlciA9IHZpZXcuZ2V0Q2VudGVyKCkubWFwKGZ1bmN0aW9uKGNvb3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoY29vcmQpO1xyXG4gICAgfSkuam9pbigpO1xyXG4gICAgc3RhdGUuem9vbSA9IHZpZXcuZ2V0Wm9vbSgpLnRvU3RyaW5nKCk7XHJcbiAgICAvLyBzdGF0ZS5zZWxlY3Rpb24gPSBnZXRTYXZlU2VsZWN0aW9uKHNlbGVjdGlvbigpKTtcclxuICAgIGlmIChnZXRQaW4oKSkge1xyXG4gICAgICAgIHN0YXRlLnBpbiA9IGdldFBpbigpLmdldEdlb21ldHJ5KCkuZ2V0Q29vcmRpbmF0ZXMoKS5tYXAoZnVuY3Rpb24oY29vcmQpIHtcclxuICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGNvb3JkKTtcclxuICAgICAgICB9KS5qb2luKCk7XHJcbiAgICB9XHJcbiAgICBpZiAodmlld2VyLmdldE1hcE5hbWUoKSkge1xyXG4gICAgICAgIHN0YXRlLm1hcCA9IHZpZXdlci5nZXRNYXBOYW1lKCkuc3BsaXQoJy4nKVswXTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdGF0ZTtcclxufVxyXG5wZXJtYWxpbmtTdG9yZS5nZXRVcmwgPSBmdW5jdGlvbigpIHtcclxuICAgIHVybCA9IHZpZXdlci5nZXRVcmwoKTtcclxuICAgIHJldHVybiB1cmw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFNhdmVMYXllcnMobGF5ZXJzKSB7XHJcbiAgICB2YXIgc2F2ZUxheWVycyA9IFtdO1xyXG4gICAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgICAgICB2YXIgc2F2ZUxheWVyID0ge307XHJcbiAgICAgICAgc2F2ZUxheWVyLnYgPSBsYXllci5nZXRWaXNpYmxlKCkgPT09IHRydWUgPyAxIDogMDtcclxuICAgICAgICBzYXZlTGF5ZXIucyA9IGxheWVyLmdldCgnbGVnZW5kJykgPT09IHRydWUgPyAxIDogMDtcclxuICAgICAgICBpZiAoc2F2ZUxheWVyLnMgfHwgc2F2ZUxheWVyLnYpIHtcclxuICAgICAgICAgICAgc2F2ZUxheWVyLm5hbWUgPSBsYXllci5nZXQoJ25hbWUnKTtcclxuICAgICAgICAgICAgc2F2ZUxheWVycy5wdXNoKHVybHBhcnNlci5zdHJpbmdpZnkoc2F2ZUxheWVyLCB7dG9wbW9zdDogJ25hbWUnfSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHNhdmVMYXllcnM7XHJcbn1cclxuZnVuY3Rpb24gZ2V0U2F2ZVNlbGVjdGlvbihzZWxlY3Rpb24pIHtcclxuICAgIHJldHVybiB1cmxwYXJzZXIuYXJyU3RyaW5naWZ5KHNlbGVjdGlvbi5jb29yZGluYXRlcywge3RvcG1vc3Q6IHNlbGVjdGlvbi5nZW9tZXRyeVR5cGV9KTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBwZXJtYWxpbmtTdG9yZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRhcmdldCkge1xyXG4gICAgcmVuZGVyKHRhcmdldCk7XHJcbiAgICBiaW5kVUlBY3Rpb25zKCk7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGdldEVsOiBnZXRFbCxcclxuICAgICAgICBzZXRWaXNpYmlsaXR5OiBzZXRWaXNpYmlsaXR5LFxyXG4gICAgICAgIHNldFRpdGxlOiBzZXRUaXRsZSxcclxuICAgICAgICBzZXRDb250ZW50OiBzZXRDb250ZW50LFxyXG4gICAgICAgIGNsb3NlUG9wdXA6IGNsb3NlUG9wdXBcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiByZW5kZXIodGFyZ2V0KSB7XHJcbiAgdmFyIHBvcCA9ICc8ZGl2IGlkPVwiby1wb3B1cFwiPicgK1xyXG4gICAgICAnPGRpdiBjbGFzcz1cIm8tcG9wdXAgby1jYXJkXCI+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWNsb3NlLWJ1dHRvblwiPjxzdmcgY2xhc3M9XCJvLWljb24tZmEtdGltZXNcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtdGltZXNcIj48L3VzZT48L3N2Zz48L2Rpdj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cIm8tY2FyZC10aXRsZVwiPjwvZGl2PicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiby1jYXJkLWNvbnRlbnRcIj48L2Rpdj4nICtcclxuICAgICAgJzwvZGl2PicgK1xyXG4gICAgJzwvZGl2Pic7XHJcbiAgJCh0YXJnZXQpLmFwcGVuZChwb3ApO1xyXG59XHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgICAkKCcjby1wb3B1cCAuby1wb3B1cCAuby1jbG9zZS1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICBjbG9zZVBvcHVwKCk7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRFbCgpIHtcclxuICAgIHJldHVybiAkKFwiI28tcG9wdXBcIikuZ2V0KDApO1xyXG59XHJcbmZ1bmN0aW9uIHNldFZpc2liaWxpdHkodmlzaWJsZSkge1xyXG4gICAgdmlzaWJsZSA9PSB0cnVlID8gJCgnI28tcG9wdXAgLm8tcG9wdXAnKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKSA6ICQoJyNvLXBvcHVwIC5vLXBvcHVwJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxufVxyXG5mdW5jdGlvbiBzZXRUaXRsZSh0aXRsZSkge1xyXG4gICAgJCgnI28tcG9wdXAgLm8tY2FyZC10aXRsZScpLmh0bWwodGl0bGUpO1xyXG59XHJcbmZ1bmN0aW9uIHNldENvbnRlbnQoY29uZmlnKSB7XHJcbiAgICBjb25maWcudGl0bGUgPyAkKCcjby1wb3B1cCAuby1wb3B1cCAuby1jYXJkLXRpdGxlJykuaHRtbChjb25maWcudGl0bGUpOiAkKCcjby1wb3B1cCAuby1wb3B1cCAuby1jYXJkLXRpdGxlJykuaHRtbCgnJyk7XHJcbiAgICBjb25maWcuY29udGVudCA/ICQoJyNvLXBvcHVwIC5vLXBvcHVwIC5vLWNhcmQtY29udGVudCcpLmh0bWwoY29uZmlnLmNvbnRlbnQpOiAkKCcjby1wb3B1cCAuby1wb3B1cCAuby1jYXJkLWNvbnRlbnQnKS5odG1sKCcnKTtcclxufVxyXG5mdW5jdGlvbiBjbG9zZVBvcHVwKCkge1xyXG4gICAgc2V0VmlzaWJpbGl0eShmYWxzZSk7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG52YXIgY29udHJvbElkID0gJ28tcG9zaXRpb24nO1xyXG52YXIgbWFya2VySWQgPSAnby1wb3NpdGlvbi1tYXJrZXInO1xyXG52YXIgdG9nZ2xlUHJvaklkID0gJ28tcG9zaXRpb24tdG9nZ2xlLXByb2onO1xyXG52YXIgY29vcmRzSWQgPSAnby1wb3NpdGlvbi1jb29yZHMnO1xyXG52YXIgY29vcmRzRmluZElkID0gJ28tcG9zaXRpb24tZmluZCc7XHJcbnZhciB0b2dnbGVQb3NpdGlvbklkID0gJ28tdG9nZ2xlLXBvc2l0aW9uJztcclxudmFyIGNoYXJhY3RlckVycm9yID0gJ09naWx0aWd0IHRlY2tlbiBmw7ZyIGtvb3JkaW5hdCwgdsOkbmxpZ2VuIGbDtnJzw7ZrIGlnZW4uJztcclxudmFyIGV4dGVudEVycm9yID0gJ0FuZ2l2bmEga29vcmRpbmF0ZXIgbGlnZ2VyIGludGUgaW5vbSBrYXJ0YW5zIHV0c3Ryw6Rja25pbmcsIHbDpG5saWdlbiBmw7Zyc8O2ayBpZ2VuLic7XHJcbnZhciBtYXAgPSB1bmRlZmluZWQ7XHJcbnZhciB2aWV3ID0gdW5kZWZpbmVkO1xyXG52YXIgY29uc29sZUlkID0gdW5kZWZpbmVkO1xyXG52YXIgc3VmZml4ID0gdW5kZWZpbmVkO1xyXG52YXIgY3VycmVudFByb2plY3Rpb24gPSB1bmRlZmluZWQ7XHJcbnZhciBwcm9qZWN0aW9ucyA9IHVuZGVmaW5lZDtcclxudmFyIHByb2plY3Rpb25Db2RlcyA9IHVuZGVmaW5lZDtcclxudmFyIHByb2plY3Rpb24gPSB1bmRlZmluZWQ7XHJcbnZhciBtYXBQcm9qZWN0aW9uID0gdW5kZWZpbmVkO1xyXG52YXIgcHJlY2lzaW9uID0gdW5kZWZpbmVkO1xyXG52YXIgbW91c2VQb3NpdGlvbkFjdGl2ZSA9IGZhbHNlO1xyXG52YXIgbW91c2VQb3NpdGlvbkNvbnRyb2w7XHJcblxyXG5mdW5jdGlvbiBJbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICB2YXIgdGl0bGUgPSBvcHRpb25zLnRpdGxlIHx8IHVuZGVmaW5lZDtcclxuICBzdWZmaXggPSBvcHRpb25zLnN1ZmZpeCB8fCAnJztcclxuICBtYXAgPSB2aWV3ZXIuZ2V0TWFwKCk7XHJcbiAgdmlldyA9IG1hcC5nZXRWaWV3KCk7XHJcbiAgcHJvamVjdGlvbiA9IHZpZXcuZ2V0UHJvamVjdGlvbigpO1xyXG4gIG1hcFByb2plY3Rpb24gPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICBjb25zb2xlSWQgPSB2aWV3ZXIuZ2V0Q29uc29sZUlkKCk7XHJcbiAgcHJvamVjdGlvbnMgPSBvcHRpb25zLnByb2plY3Rpb25zIHx8IHt9O1xyXG4gIHByb2plY3Rpb25Db2RlcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb2plY3Rpb25zKTtcclxuICBpZiAodGl0bGUpIHtcclxuICAgIGN1cnJlbnRQcm9qZWN0aW9uID0gbWFwUHJvamVjdGlvbjtcclxuICAgIHByb2plY3Rpb25zW2N1cnJlbnRQcm9qZWN0aW9uXSA9IHRpdGxlO1xyXG4gICAgcHJvamVjdGlvbkNvZGVzLnVuc2hpZnQobWFwUHJvamVjdGlvbik7XHJcbiAgfSBlbHNlIGlmIChwcm9qZWN0aW9uQ29kZXMubGVuZ3RoKSB7XHJcbiAgICBjdXJyZW50UHJvamVjdGlvbiA9IHByb2plY3Rpb25Db2Rlc1swXTtcclxuICB9IGVsc2Uge1xyXG4gICAgYWxlcnQoJ05vIHRpdGxlIG9yIHByb2plY3Rpb24gaXMgc2V0IGZvciBwb3NpdGlvbicpO1xyXG4gIH1cclxuICBzZXRQcmVjaXNpb24oKTtcclxuXHJcbiAgcmVuZGVyKCk7XHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG5cclxuICBhZGRNb3VzZVBvc2l0aW9uKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICB2YXIgaWNvbiA9IHV0aWxzLmNyZWF0ZVN2Zyh7XHJcbiAgICBocmVmOiAnI29fY2VudGVycG9zaXRpb25fMjRweCcsXHJcbiAgICBjbHM6ICdvLWljb24tcG9zaXRpb24nXHJcbiAgfSk7XHJcbiAgdmFyIHRvZ2dsZUJ1dHRvbnMgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdidXR0b24nLCBpY29uLCB7XHJcbiAgICBjbHM6ICdvLXBvc2l0aW9uLWNlbnRlci1idXR0b24nLFxyXG4gICAgaWQ6IHRvZ2dsZVBvc2l0aW9uSWRcclxuICB9KTtcclxuICB0b2dnbGVCdXR0b25zICs9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIHByb2plY3Rpb25zW2N1cnJlbnRQcm9qZWN0aW9uXSwge1xyXG4gICAgaWQ6IHRvZ2dsZVByb2pJZCxcclxuICAgIGNsczogJ28tcG9zaXRpb24tYnV0dG9uJyxcclxuICAgIHZhbHVlOiBjdXJyZW50UHJvamVjdGlvblxyXG4gIH0pO1xyXG4gIHZhciBjb29yZHNEaXYgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCAnJywge1xyXG4gICAgaWQ6IGNvb3Jkc0lkLFxyXG4gICAgY2xzOiBjb29yZHNJZCxcclxuICAgIHN0eWxlOiAncGFkZGluZy1sZWZ0OiA1cHg7J1xyXG4gIH0pO1xyXG4gIHZhciBjb29yZHNGaW5kID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnaW5wdXQnLCAnJywge1xyXG4gICAgaWQ6IGNvb3Jkc0ZpbmRJZCxcclxuICAgIGNsczogY29vcmRzRmluZElkLFxyXG4gICAgdHlwZTogJ3RleHQnLFxyXG4gICAgbmFtZTogY29vcmRzRmluZElkLFxyXG4gICAgc3R5bGU6ICdwYWRkaW5nLWxlZnQ6IDVweDsnXHJcbiAgfSk7XHJcbiAgdmFyIGNvbnRyb2xDb250YWluZXIgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCB0b2dnbGVCdXR0b25zICsgY29vcmRzRGl2ICsgY29vcmRzRmluZCwge1xyXG4gICAgaWQ6IGNvbnRyb2xJZCxcclxuICAgIGNsczogY29udHJvbElkLFxyXG4gICAgc3R5bGU6ICdkaXNwbGF5OiBpbmxpbmUtYmxvY2s7J1xyXG4gIH0pO1xyXG4gICQoJyMnICsgY29uc29sZUlkKS5hcHBlbmQoY29udHJvbENvbnRhaW5lcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgJCgnIycgKyB0b2dnbGVQcm9qSWQpLm9uKCdjbGljaycsIG9uVG9nZ2xlUHJvamVjdGlvbik7XHJcbiAgJCgnIycgKyB0b2dnbGVQb3NpdGlvbklkKS5vbignY2xpY2snLCBvblRvZ2dsZVBvc2l0aW9uKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkTW91c2VQb3NpdGlvbigpIHtcclxuICBtb3VzZVBvc2l0aW9uQ29udHJvbCA9IG5ldyBvbC5jb250cm9sLk1vdXNlUG9zaXRpb24oe1xyXG4gICAgY29vcmRpbmF0ZUZvcm1hdDogb2wuY29vcmRpbmF0ZS5jcmVhdGVTdHJpbmdYWShwcmVjaXNpb24pLFxyXG4gICAgcHJvamVjdGlvbjogY3VycmVudFByb2plY3Rpb24sXHJcbiAgICB0YXJnZXQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvb3Jkc0lkKSxcclxuICAgIHVuZGVmaW5lZEhUTUw6ICcmbmJzcDsnXHJcbiAgfSk7XHJcbiAgbWFwLmFkZENvbnRyb2wobW91c2VQb3NpdGlvbkNvbnRyb2wpO1xyXG4gIG1vdXNlUG9zaXRpb25BY3RpdmUgPSB0cnVlO1xyXG4gICQoJyMnICsgY29vcmRzSWQpLmFkZENsYXNzKCdvLWFjdGl2ZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVNb3VzZVBvc2l0aW9uKCkge1xyXG4gIG1hcC5yZW1vdmVDb250cm9sKG1vdXNlUG9zaXRpb25Db250cm9sKTtcclxuICAkKCcjJyArIGNvb3Jkc0lkKS5yZW1vdmVDbGFzcygnby1hY3RpdmUnKTtcclxuICBtb3VzZVBvc2l0aW9uQWN0aXZlID0gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZENlbnRlclBvc2l0aW9uKCkge1xyXG4gIHJlbmRlck1hcmtlcigpO1xyXG4gICQoJyMnICsgdG9nZ2xlUG9zaXRpb25JZCkuYWRkQ2xhc3MoJ28tYWN0aXZlJyk7XHJcbiAgJCgnIycgKyBjb29yZHNGaW5kSWQpLmFkZENsYXNzKCdvLWFjdGl2ZScpO1xyXG4gIHVwZGF0ZUNvb3Jkcyh2aWV3LmdldENlbnRlcigpKTtcclxuICB2aWV3Lm9uKCdjaGFuZ2U6Y2VudGVyJywgb25DaGFuZ2VDZW50ZXIpO1xyXG4gICQoJyMnICsgY29vcmRzRmluZElkKS5vbigna2V5cHJlc3MnLCBvbkZpbmQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVDZW50ZXJQb3NpdGlvbigpIHtcclxuICB2aWV3LnVuKCdjaGFuZ2U6Y2VudGVyJywgb25DaGFuZ2VDZW50ZXIpO1xyXG4gIGNsZWFyKCk7XHJcbiAgJCgnIycgKyBjb29yZHNGaW5kSWQpLm9mZigna2V5cHJlc3MnLCBvbkZpbmQpO1xyXG4gICQoJyMnICsgbWFya2VySWQpLnJlbW92ZSgpO1xyXG4gICQoJyMnICsgdG9nZ2xlUG9zaXRpb25JZCkucmVtb3ZlQ2xhc3MoJ28tYWN0aXZlJyk7XHJcbiAgJCgnIycgKyBjb29yZHNGaW5kSWQpLnJlbW92ZUNsYXNzKCdvLWFjdGl2ZScpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJNYXJrZXIoKSB7XHJcbiAgdmFyIGljb24gPSB1dGlscy5jcmVhdGVTdmcoe1xyXG4gICAgaHJlZjogJyNvX2NlbnRlcnBvc2l0aW9uXzI0cHgnLFxyXG4gICAgY2xzOiAnby1pY29uLXBvc2l0aW9uLW1hcmtlcidcclxuICB9KTtcclxuICB2YXIgbWFya2VyID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2JywgaWNvbiwge1xyXG4gICAgaWQ6IG1hcmtlcklkLFxyXG4gICAgY2xzOiBtYXJrZXJJZFxyXG4gIH0pO1xyXG4gICQoJyNvLW1hcCcpLmFwcGVuZChtYXJrZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaW5kQ29vcmRpbmF0ZSgpIHtcclxuICB2YXIgY29vcmRzID0gJCgnIycgKyBjb29yZHNGaW5kSWQpLnZhbCgpO1xyXG4gIHZhciB2YWxpZGF0ZWQgPSB2YWxpZGF0ZUNvb3JkaW5hdGUoY29vcmRzKTtcclxuICBpZiAodmFsaWRhdGVkLmxlbmd0aCA9PT0gMikge1xyXG4gICAgbWFwLmdldFZpZXcoKS5hbmltYXRlKHtcclxuICAgICAgY2VudGVyOiB2YWxpZGF0ZWQsXHJcbiAgICAgIHpvb206ICh2aWV3ZXIuZ2V0UmVzb2x1dGlvbnMoKS5sZW5ndGggLSAzKVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvb3JkaW5hdGUoc3RyQ29vcmRzKSB7XHJcbiAgdmFyIGV4dGVudCA9IHZpZXdlci5nZXRFeHRlbnQoKSB8fCB2aWV3LmdldFByb2plY3Rpb24oKS5nZXRFeHRlbnQoKTtcclxuICB2YXIgaW5FeHRlbnQ7XHJcblxyXG4gIC8vdmFsaWRhdGUgbnVtYmVyc1xyXG4gIHZhciBjb29yZHMgPSBzdHJDb29yZHMuc3BsaXQoJywnKS5tYXAoZnVuY3Rpb24oY29vcmQpIHtcclxuICAgICAgcmV0dXJuIHBhcnNlRmxvYXQoY29vcmQpO1xyXG4gICAgfSlcclxuICAgIC5maWx0ZXIoZnVuY3Rpb24oY29vcmQpIHtcclxuICAgICAgaWYgKGNvb3JkICE9PSBOYU4pIHtcclxuICAgICAgICByZXR1cm4gY29vcmQ7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIGlmIChjb29yZHMubGVuZ3RoICE9PSAyKSB7XHJcbiAgICBhbGVydChjaGFyYWN0ZXJFcnJvcik7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG5cclxuICAvLyB0cmFuc2Zvcm1cclxuICBpZiAoY3VycmVudFByb2plY3Rpb24gIT09IG1hcFByb2plY3Rpb24pIHtcclxuICAgIGNvb3JkcyA9IHRyYW5zZm9ybUNvb3Jkcyhjb29yZHMsIGN1cnJlbnRQcm9qZWN0aW9uLCBtYXBQcm9qZWN0aW9uKTtcclxuICB9XHJcblxyXG4gIC8vIHZhbGlkYXRlIGNvb3JkcyB3aXRoaW4gZXh0ZW50XHJcbiAgaW5FeHRlbnQgPSBjb29yZHNbMF0gPj0gZXh0ZW50WzBdICYmIGNvb3Jkc1sxXSA+PSBleHRlbnRbMV07XHJcbiAgaW5FeHRlbnQgPSBpbkV4dGVudCAmJiAoY29vcmRzWzBdIDw9IGV4dGVudFsyXSkgJiYgKGNvb3Jkc1sxXSA8PSBleHRlbnRbM10pO1xyXG4gIGlmIChpbkV4dGVudCkge1xyXG4gICAgcmV0dXJuIGNvb3JkcztcclxuICB9IGVsc2Uge1xyXG4gICAgYWxlcnQoZXh0ZW50RXJyb3IpO1xyXG4gICAgcmV0dXJuIFtdO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlUHJvamVjdGlvblZhbCh2YWwpIHtcclxuICB2YXIgaW5kZXg7XHJcbiAgdmFyIHByb2ogPSB1bmRlZmluZWQ7XHJcbiAgaW5kZXggPSBwcm9qZWN0aW9uQ29kZXMuaW5kZXhPZih2YWwpO1xyXG4gIGlmIChpbmRleCA9PT0gcHJvamVjdGlvbkNvZGVzLmxlbmd0aCAtIDEpIHtcclxuICAgIHByb2ogPSBwcm9qZWN0aW9uQ29kZXNbMF07XHJcbiAgfSBlbHNlIGlmIChpbmRleCA8IHByb2plY3Rpb25Db2Rlcy5sZW5ndGggLSAxKSB7XHJcbiAgICBwcm9qID0gcHJvamVjdGlvbkNvZGVzW2luZGV4ICsgMV07XHJcbiAgfVxyXG4gIHJldHVybiBwcm9qO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbGVhcigpIHtcclxuICB3cml0ZUNvb3JkcygnJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uVG9nZ2xlUG9zaXRpb24oKSB7XHJcbiAgaWYgKG1vdXNlUG9zaXRpb25BY3RpdmUpIHtcclxuICAgIHJlbW92ZU1vdXNlUG9zaXRpb24oKTtcclxuICAgIGFkZENlbnRlclBvc2l0aW9uKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFkZE1vdXNlUG9zaXRpb24oKTsgICAgXHJcbiAgICByZW1vdmVDZW50ZXJQb3NpdGlvbigpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25Ub2dnbGVQcm9qZWN0aW9uKGUpIHtcclxuICByZXR1cm4gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgIGN1cnJlbnRQcm9qZWN0aW9uID0gdG9nZ2xlUHJvamVjdGlvblZhbCh0aGlzLnZhbHVlKTtcclxuICAgIHNldFByZWNpc2lvbigpO1xyXG4gICAgd3JpdGVQcm9qZWN0aW9uKGN1cnJlbnRQcm9qZWN0aW9uKTtcclxuICAgIGlmIChtb3VzZVBvc2l0aW9uQWN0aXZlKSB7XHJcbiAgICAgIHJlbW92ZU1vdXNlUG9zaXRpb24oKTtcclxuICAgICAgYWRkTW91c2VQb3NpdGlvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdXBkYXRlQ29vcmRzKHZpZXcuZ2V0Q2VudGVyKCkpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5ibHVyKCk7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0uYmluZCh0aGlzKShlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25DaGFuZ2VDZW50ZXIoKSB7XHJcbiAgdXBkYXRlQ29vcmRzKHZpZXcuZ2V0Q2VudGVyKCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkZpbmQoZSkge1xyXG4gIGlmIChlLndoaWNoID09PSAxMykge1xyXG4gICAgZmluZENvb3JkaW5hdGUoKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJvdW5kKGNvb3Jkcykge1xyXG4gIGlmIChwcmVjaXNpb24pIHtcclxuICAgIHJldHVybiBjb29yZHMubWFwKGZ1bmN0aW9uKGNvb3JkKSB7XHJcbiAgICAgIHJldHVybiBjb29yZC50b0ZpeGVkKHByZWNpc2lvbik7XHJcbiAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGNvb3Jkcy5tYXAoZnVuY3Rpb24oY29vcmQpIHtcclxuICAgICAgcmV0dXJuIE1hdGgucm91bmQoY29vcmQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRQcmVjaXNpb24oKSB7XHJcbiAgaWYgKGN1cnJlbnRQcm9qZWN0aW9uID09PSAnRVBTRzo0MzI2Jykge1xyXG4gICAgcHJlY2lzaW9uID0gNTtcclxuICB9IGVsc2Uge1xyXG4gICAgcHJlY2lzaW9uID0gMDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlUHJvamVjdGlvbigpIHtcclxuICAkKCcjJyArIHRvZ2dsZVByb2pJZCkudmFsKGN1cnJlbnRQcm9qZWN0aW9uKTtcclxuICAkKCcjJyArIHRvZ2dsZVByb2pJZCkudGV4dChwcm9qZWN0aW9uc1tjdXJyZW50UHJvamVjdGlvbl0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0cmFuc2Zvcm1Db29yZHMoY29vcmRzLCBzb3VyY2UsIGRlc3RpbmF0aW9uKSB7XHJcbiAgdmFyIGdlb21ldHJ5ID0gbmV3IG9sLkZlYXR1cmUoe1xyXG4gICAgZ2VvbWV0cnk6IG5ldyBvbC5nZW9tLlBvaW50KGNvb3JkcylcclxuICB9KS5nZXRHZW9tZXRyeSgpO1xyXG4gIHJldHVybiBnZW9tZXRyeS50cmFuc2Zvcm0oc291cmNlLCBkZXN0aW5hdGlvbikuZ2V0Q29vcmRpbmF0ZXMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlQ29vcmRzKHNvdXJjZUNvb3Jkcykge1xyXG4gIHZhciBjb29yZHMgPSBzb3VyY2VDb29yZHM7XHJcbiAgdmFyIGNlbnRlcjtcclxuICBpZiAoY3VycmVudFByb2plY3Rpb24gIT09IG1hcFByb2plY3Rpb24pIHtcclxuICAgIGNvb3JkcyA9IHRyYW5zZm9ybUNvb3Jkcyhjb29yZHMsIHByb2plY3Rpb24sIGN1cnJlbnRQcm9qZWN0aW9uKTtcclxuICB9XHJcbiAgY29vcmRzID0gcm91bmQoY29vcmRzKTtcclxuICBjZW50ZXIgPSBjb29yZHMuam9pbignLCAnKSArIHN1ZmZpeDtcclxuICB3cml0ZUNvb3JkcyhjZW50ZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3cml0ZUNvb3Jkcyhjb29yZHMpIHtcclxuICAkKCcjJyArIGNvb3Jkc0ZpbmRJZCkudmFsKGNvb3Jkcyk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbnZhciB0ZW1wbGF0ZSA9IHJlcXVpcmUoXCIuL3RlbXBsYXRlcy9wcmludC5oYW5kbGViYXJzXCIpO1xyXG5cclxudmFyIHByaW50V2l0aCA9IDgwMDtcclxudmFyICRwcmludEJ1dHRvbjtcclxudmFyIGF0dHJpYnV0aW9uO1xyXG52YXIgbWFwO1xyXG52YXIgYmFzZVVybDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIGF0dHJpYnV0aW9uID0gb3B0aW9ucy5hdHRyaWJ1dGlvbiB8fCAnwqkgTGFudG3DpHRlcmlldCBHZW9kYXRhc2FtdmVya2FuJztcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcbiAgYmFzZVVybCA9IFZpZXdlci5nZXRCYXNlVXJsKCk7XHJcblxyXG4gIHJlbmRlcigpO1xyXG4gIGJpbmRVSUFjdGlvbnMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gIHZhciBlbCA9IHV0aWxzLmNyZWF0ZUxpc3RCdXR0b24oe1xyXG4gICAgaWQ6ICdvLXByaW50JyxcclxuICAgIGljb25DbHM6ICdvLWljb24tZmEtcHJpbnQnLFxyXG4gICAgc3JjOiAnI2ZhLXByaW50JyxcclxuICAgIHRleHQ6ICdTa3JpdiB1dCdcclxuICB9KTtcclxuICAkKCcjby1tZW51dG9vbHMnKS5hcHBlbmQoZWwpO1xyXG4gICRwcmludEJ1dHRvbiA9ICQoJyNvLXByaW50LWJ1dHRvbicpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICRwcmludEJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAkKCcjYXBwLXdyYXBwZXInKS5hcHBlbmQoJzxjYW52YXMgaWQ9XCJvLXByaW50XCIgc3R5bGU9XCJkaXNwbGF5OiBub25lXCI+PC9jYW52YXM+Jyk7XHJcbiAgICBjcmVhdGVJbWFnZSgpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbWFnZVRvUHJpbnQoJHByaW50Q2FudmFzKSB7XHJcbiAgdmFyIGltYWdlQ3JvcCA9IG5ldyBJbWFnZSgpO1xyXG4gIHRyeSB7XHJcbiAgICBpbWFnZUNyb3Auc3JjID0gJHByaW50Q2FudmFzLmdldCgwKS50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5sb2coZSk7XHJcbiAgfSBmaW5hbGx5IHtcclxuICAgIHZhciB0ZW1wbGF0ZU9wdGlvbnMgPSB7fTtcclxuICAgIHRlbXBsYXRlT3B0aW9ucy5zcmMgPSBpbWFnZUNyb3Auc3JjO1xyXG4gICAgdGVtcGxhdGVPcHRpb25zLmF0dHJpYnV0aW9uID0gYXR0cmlidXRpb247XHJcbiAgICB0ZW1wbGF0ZU9wdGlvbnMubG9nb1NyYyA9IGJhc2VVcmwgKyAnY3NzL3BuZy9sb2dvX3ByaW50LnBuZyc7XHJcbiAgICB2YXIgcHcgPSB0ZW1wbGF0ZSh0ZW1wbGF0ZU9wdGlvbnMpO1xyXG4gICAgdmFyIHByaW50V2luZG93ID0gd2luZG93Lm9wZW4oJycsICcnLCAnd2lkdGg9ODAwLGhlaWdodD04MjAnKTtcclxuICAgIHByaW50V2luZG93LmRvY3VtZW50LndyaXRlKHB3KTtcclxuICAgIHByaW50V2luZG93LmRvY3VtZW50LmNsb3NlKCk7XHJcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICBwcmludFdpbmRvdy5wcmludCgpO1xyXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHByaW50V2luZG93LmNsb3NlKCk7XHJcbiAgICAgICAgJCgnI28tcHJpbnQnKS5yZW1vdmUoKTtcclxuICAgICAgfSwgMTApO1xyXG4gICAgfSwgMjAwKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUltYWdlKCkge1xyXG4gIHZhciAkY2FudmFzID0gJCgnY2FudmFzJyk7XHJcbiAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICB2YXIgaW1hZ2VVcmwgPSAkY2FudmFzLmdldCgwKS50b0RhdGFVUkwoXCJpbWFnZS9wbmdcIik7XHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgY29uc29sZS5sb2coZSk7XHJcbiAgfSBmaW5hbGx5IHtcclxuXHJcbiAgICAvLyAkcHJpbnRDYW52YXMgPSBjb3B5IG9mIG9yaWdpbmFsIG1hcCBjYW52YXNcclxuICAgIHZhciAkcHJpbnRDYW52YXMgPSAkKCcjby1wcmludCcpO1xyXG4gICAgaW1hZ2Uub25sb2FkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciBjdHhDYW52YXMgPSAkcHJpbnRDYW52YXNbMF0uZ2V0Q29udGV4dCgnMmQnKTtcclxuXHJcbiAgICAgICAvL3dpZHRoIG9mIG1hcCBjYW52YXNcclxuICAgICAgdmFyIHNvdXJjZVdpZHRoID0gJGNhbnZhc1swXS53aWR0aDtcclxuXHJcbiAgICAgIC8vaGVpZ2h0IG9mIG1hcCBjYW52YXNcclxuICAgICAgdmFyIHNvdXJjZUhlaWdodCA9ICRjYW52YXNbMF0uaGVpZ2h0O1xyXG5cclxuICAgICAgLy9zZXQgdGhlIHdpZHRoIG9mIHByaW50IGNhbnZhc1xyXG4gICAgICBpZiAoc291cmNlV2lkdGggPCBwcmludFdpdGgpIHtcclxuICAgICAgICAkcHJpbnRDYW52YXNbMF0ud2lkdGggPSBzb3VyY2VXaWR0aDtcclxuICAgICAgfSBlbHNlIGlmIChzb3VyY2VXaWR0aCA+PSBwcmludFdpdGgpIHtcclxuICAgICAgICAkcHJpbnRDYW52YXNbMF0ud2lkdGggPSBwcmludFdpdGg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vc2V0IHRoZSBoZWlnaHQgb2YgcHJpbnQgY2FudmFzXHJcbiAgICAgIGlmIChzb3VyY2VIZWlnaHQgPCBwcmludFdpdGgpIHtcclxuICAgICAgICAkcHJpbnRDYW52YXNbMF0uaGVpZ2h0ID0gc291cmNlSGVpZ2h0O1xyXG4gICAgICB9IGVsc2UgaWYgKHNvdXJjZVdpZHRoID49IHByaW50V2l0aCkge1xyXG4gICAgICAgICRwcmludENhbnZhc1swXS5oZWlnaHQgPSBwcmludFdpdGg7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGN0eENhbnZhcy5kcmF3SW1hZ2UoaW1hZ2UsIChzb3VyY2VXaWR0aCAvIDIgLSAkcHJpbnRDYW52YXNbMF0ud2lkdGggLyAyKSwgMCwgJHByaW50Q2FudmFzWzBdLndpZHRoLCAkcHJpbnRDYW52YXNbMF0uaGVpZ2h0LCAwLCAwLCAkcHJpbnRDYW52YXNbMF0ud2lkdGgsICRwcmludENhbnZhc1swXS5oZWlnaHQpO1xyXG4gICAgICBpbWFnZVRvUHJpbnQoJHByaW50Q2FudmFzKTtcclxuICAgIH07XHJcbiAgICBpbWFnZS5zcmMgPSBpbWFnZVVybDtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbnZhciBtYXA7XHJcblxyXG5mdW5jdGlvbiBJbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICB2YXIgcm90YXRlQ29udHJvbDtcclxuICB2YXIgaWNvbiA9IHV0aWxzLmNyZWF0ZVN2Zyh7XHJcbiAgICBocmVmOiAnI29yaWdvLWNvbXBhc3MnLFxyXG4gICAgY2xzOiAnby1pY29uLWNvbXBhc3MnXHJcbiAgfSk7XHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG5cclxuICByb3RhdGVDb250cm9sID0gbmV3IG9sLmNvbnRyb2wuUm90YXRlKHtcclxuICAgIGxhYmVsOiAkLnBhcnNlSFRNTCgnPHNwYW4+JyArIGljb24gKyAnPC9zcGFuPicpWzBdLFxyXG4gICAgdGlwTGFiZWw6ICcgJyxcclxuICAgIHRhcmdldDogJ28tdG9vbGJhci1taXNjJ1xyXG4gIH0pO1xyXG4gIG1hcC5hZGRDb250cm9sKHJvdGF0ZUNvbnRyb2wpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gSW5pdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG52YXIgbnVtYmVyRm9ybWF0dGVyID0gcmVxdWlyZSgnLi91dGlscy9udW1iZXJmb3JtYXR0ZXInKTtcclxuXHJcbnZhciBjb250cm9sSWQgPSAnby1zY2FsZSc7XHJcbnZhciBjb25zb2xlSWQ7XHJcbnZhciBtYXA7XHJcbnZhciAkY29uc29sZTtcclxudmFyIGlzQWN0aXZlO1xyXG52YXIgc2NhbGVUZXh0O1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG4gIGNvbnNvbGVJZCA9IFZpZXdlci5nZXRDb25zb2xlSWQoKTtcclxuICBzY2FsZVRleHQgPSBvcHRpb25zLnNjYWxlVGV4dCB8fCAnU2thbGEgMTonO1xyXG4gIHZhciBpbml0aWFsU3RhdGUgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdpc0FjdGl2ZScpID8gb3B0aW9ucy5pc0FjdGl2ZSA6IHRydWU7XHJcblxyXG4gIHNldEFjdGl2ZShpbml0aWFsU3RhdGUpO1xyXG4gIHJlbmRlcigpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc2V0QWN0aXZlOiBzZXRBY3RpdmVcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICB2YXIgY29udGFpbmVyID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2JywgJycsIHtcclxuICAgIGlkOiBjb250cm9sSWQsXHJcbiAgICBzdHlsZTogJ2Rpc3BsYXk6IGlubGluZS1ibG9jazsnXHJcbiAgfSk7XHJcbiAgJCgnIycgKyBjb25zb2xlSWQpLmFwcGVuZChjb250YWluZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUpIHtcclxuICBpZiAoc3RhdGUgPT09IHRydWUpIHtcclxuICAgIG1hcC5vbignbW92ZXN0YXJ0Jywgb25ab29tQ2hhbmdlKTtcclxuICAgIG9uWm9vbUNoYW5nZSgpO1xyXG4gICAgaXNBY3RpdmUgPSB0cnVlO1xyXG4gIH0gZWxzZSBpZiAoc3RhdGUgPT09IGZhbHNlKSB7XHJcbiAgICBtYXAudW4oJ21vdmVzdGFydCcsIG9uWm9vbUNoYW5nZSk7XHJcbiAgICBpc0FjdGl2ZSA9IGZhbHNlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25ab29tQ2hhbmdlKGV2dCkge1xyXG4gIG1hcC5vbmNlKCdtb3ZlZW5kJywgZnVuY3Rpb24oZSkge1xyXG4gICAgdmFyIHZpZXcgPSBtYXAuZ2V0VmlldygpO1xyXG4gICAgdmFyIHJlc29sdXRpb24gPSBldnQgPyBldnQuZnJhbWVTdGF0ZS52aWV3U3RhdGUucmVzb2x1dGlvbiA6IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xyXG4gICAgdmFyIG1hcFpvb20gPSB2aWV3LmdldFpvb21Gb3JSZXNvbHV0aW9uKHJlc29sdXRpb24pO1xyXG4gICAgdmFyIGN1cnJlbnRab29tID0gcGFyc2VJbnQodmlldy5nZXRab29tKCksIDEwKTtcclxuICAgIHZhciBjdXJyZW50UmVzb2x1dGlvbiA9IHZpZXcuZ2V0UmVzb2x1dGlvbigpO1xyXG4gICAgaWYgKGN1cnJlbnRab29tICE9PSBtYXBab29tKSB7XHJcbiAgICAgIHZhciBzY2FsZSA9IFZpZXdlci5nZXRTY2FsZShjdXJyZW50UmVzb2x1dGlvbik7XHJcbiAgICAgICQoJyMnICsgY29udHJvbElkKS50ZXh0KHNjYWxlVGV4dCArIG51bWJlckZvcm1hdHRlcihzY2FsZSkpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gSW5pdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG5cclxudmFyIG1hcDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCAnby10b29scy1ib3R0b20nO1xyXG4gIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuXHJcbiAgdmFyIHNjYWxlTGluZSA9IG5ldyBvbC5jb250cm9sLlNjYWxlTGluZSh7XHJcbiAgICB0YXJnZXQ6IHRhcmdldFxyXG4gIH0pO1xyXG4gIG1hcC5hZGRDb250cm9sKHNjYWxlTGluZSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgd2t0VG9GZWF0dXJlID0gcmVxdWlyZSgnLi9tYXB1dGlscycpLndrdFRvRmVhdHVyZTtcclxudmFyIFBvcHVwID0gcmVxdWlyZSgnLi9wb3B1cCcpO1xyXG52YXIgQXdlc29tcGxldGUgPSByZXF1aXJlKCdhd2Vzb21wbGV0ZScpO1xyXG52YXIgZ2V0RmVhdHVyZSA9IHJlcXVpcmUoJy4vZ2V0ZmVhdHVyZScpO1xyXG52YXIgZ2V0QXR0cmlidXRlcyA9IHJlcXVpcmUoJy4vZ2V0YXR0cmlidXRlcycpO1xyXG52YXIgZmVhdHVyZUluZm8gPSByZXF1aXJlKCcuL2ZlYXR1cmVpbmZvJyk7XHJcbnZhciBtYXBVdGlscyA9IHJlcXVpcmUoJy4vbWFwdXRpbHMnKTtcclxudmFyIGdldENlbnRlciA9IHJlcXVpcmUoJy4vZ2VvbWV0cnkvZ2V0Y2VudGVyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIGdlbmVyYXRlVVVJRCA9IHJlcXVpcmUoJy4vdXRpbHMvZ2VuZXJhdGV1dWlkJyk7XHJcbnZhciBrZXlDb2RlcyA9IHtcclxuICA5OiAndGFiJyxcclxuICAyNzogJ2VzYycsXHJcbiAgMzc6ICdsZWZ0JyxcclxuICAzOTogJ3JpZ2h0JyxcclxuICAxMzogJ2VudGVyJyxcclxuICAzODogJ3VwJyxcclxuICA0MDogJ2Rvd24nXHJcbn07XHJcbnZhciBzZWFyY2hEYiA9IHt9O1xyXG52YXIgbWFwO1xyXG52YXIgbmFtZTtcclxudmFyIG5vcnRoaW5nO1xyXG52YXIgZWFzdGluZztcclxudmFyIGdlb21ldHJ5QXR0cmlidXRlO1xyXG52YXIgaWRBdHRyaWJ1dGU7XHJcbnZhciBsYXllck5hbWVBdHRyaWJ1dGU7XHJcbnZhciBsYXllck5hbWU7XHJcbnZhciB0aXRsZUF0dHJpYnV0ZTtcclxudmFyIGNvbnRlbnRBdHRyaWJ1dGU7XHJcbnZhciBtYXhab29tTGV2ZWw7XHJcbnZhciB1cmw7XHJcbnZhciB0aXRsZTtcclxudmFyIGhpbnRUZXh0O1xyXG52YXIgcHJvamVjdGlvbkNvZGU7XHJcbnZhciBvdmVybGF5O1xyXG52YXIgbGltaXQ7XHJcbnZhciBtaW5MZW5ndGg7XHJcbnZhciBhd2Vzb21wbGV0ZTtcclxuXHJcbmZ1bmN0aW9uIGluaXQob3B0aW9ucykge1xyXG4gIG5hbWUgPSBvcHRpb25zLnNlYXJjaEF0dHJpYnV0ZTtcclxuICBub3J0aGluZyA9IG9wdGlvbnMubm9ydGhpbmcgfHwgdW5kZWZpbmVkO1xyXG4gIGVhc3RpbmcgPSBvcHRpb25zLmVhc3RpbmcgfHwgdW5kZWZpbmVkO1xyXG4gIGdlb21ldHJ5QXR0cmlidXRlID0gb3B0aW9ucy5nZW9tZXRyeUF0dHJpYnV0ZTtcclxuXHJcbiAgLyoqIGlkQXR0cmlidXRlIGluIGNvbWJpbmF0aW9uIHdpdGggbGF5ZXJOYW1lQXR0cmlidXRlXHJcbiAgbXVzdCBiZSBkZWZpbmVkIGlmIHNlYXJjaCByZXN1bHQgc2hvdWxkIGJlIHNlbGVjdGVkICovXHJcbiAgaWRBdHRyaWJ1dGUgPSBvcHRpb25zLmlkQXR0cmlidXRlO1xyXG4gIGxheWVyTmFtZUF0dHJpYnV0ZSA9IG9wdGlvbnMubGF5ZXJOYW1lQXR0cmlidXRlIHx8IHVuZGVmaW5lZDtcclxuICBsYXllck5hbWUgPSBvcHRpb25zLmxheWVyTmFtZSB8fCB1bmRlZmluZWQ7XHJcbiAgdXJsID0gb3B0aW9ucy51cmw7XHJcbiAgdGl0bGUgPSBvcHRpb25zLnRpdGxlIHx8ICcnO1xyXG4gIHRpdGxlQXR0cmlidXRlID0gb3B0aW9ucy50aXRsZUF0dHJpYnV0ZSB8fCB1bmRlZmluZWQ7XHJcbiAgY29udGVudEF0dHJpYnV0ZSA9IG9wdGlvbnMuY29udGVudEF0dHJpYnV0ZSB8fCB1bmRlZmluZWQ7XHJcbiAgbWF4Wm9vbUxldmVsID0gb3B0aW9ucy5tYXhab29tTGV2ZWwgfHwgVmlld2VyLmdldFJlc29sdXRpb25zKCkubGVuZ3RoIC0gMiB8fCBWaWV3ZXIuZ2V0UmVzb2x1dGlvbnMoKTtcclxuICBsaW1pdCA9IG9wdGlvbnMubGltaXQgfHwgOTtcclxuICBoaW50VGV4dCA9IG9wdGlvbnMuaGludFRleHQgfHwgJ1PDtmsuLi4nO1xyXG4gIG1pbkxlbmd0aCA9IG9wdGlvbnMubWluTGVuZ3RoIHx8IDQ7XHJcbiAgcHJvamVjdGlvbkNvZGUgPSBWaWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuXHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG5cclxuICByZW5kZXIoKTtcclxuICBpbml0QXV0b2NvbXBsZXRlKCk7XHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgdmFyIGVsID0gJzxkaXYgaWQ9XCJvLXNlYXJjaC13cmFwcGVyXCIgY2xhc3M9XCJvLXNlYXJjaC13cmFwcGVyXCI+JyArXHJcbiAgICAnPGRpdiBpZD1cIm8tc2VhcmNoXCIgY2xhc3M9XCJvLXNlYXJjaCBvLXNlYXJjaC1mYWxzZVwiPicgK1xyXG4gICAgJzxpbnB1dCBpZD1cImhqbFwiIGNsYXNzPVwiby1zZWFyY2gtZmllbGQgZm9ybS1jb250cm9sXCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIicgKyBoaW50VGV4dCArICdcIj4nICtcclxuICAgICc8YnV0dG9uIGlkPVwiby1zZWFyY2gtYnV0dG9uXCI+JyArXHJcbiAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1zZWFyY2hcIj4nICtcclxuICAgICc8dXNlIHhsaW5rOmhyZWY9XCIjZmEtc2VhcmNoXCI+PC91c2U+JyArXHJcbiAgICAnPC9zdmc+JyArXHJcbiAgICAnPC9idXR0b24+JyArXHJcbiAgICAnPGJ1dHRvbiBpZD1cIm8tc2VhcmNoLWJ1dHRvbi1jbG9zZVwiPicgK1xyXG4gICAgJzxzdmcgY2xhc3M9XCJvLWljb24tc2VhcmNoLWZhLXRpbWVzXCI+JyArXHJcbiAgICAnPHVzZSB4bGluazpocmVmPVwiI2ZhLXRpbWVzXCI+PC91c2U+JyArXHJcbiAgICAnPC9zdmc+JyArXHJcbiAgICAnPC9idXR0b24+JyArXHJcbiAgICAnPC9kaXY+JyArXHJcbiAgICAnPC9kaXY+JztcclxuICAkKCcjby1tYXAnKS5hcHBlbmQoZWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdoamwnKS5hZGRFdmVudExpc3RlbmVyKFwiYXdlc29tcGxldGUtc2VsZWN0Y29tcGxldGVcIiwgc2VsZWN0SGFuZGxlcik7XHJcblxyXG4gICQoJyNvLXNlYXJjaCAuby1zZWFyY2gtZmllbGQnKS5vbignaW5wdXQnLCBmdW5jdGlvbigpIHtcclxuICAgIGlmICgkKCcjby1zZWFyY2ggLm8tc2VhcmNoLWZpZWxkJykudmFsKCkgJiYgJCgnI28tc2VhcmNoJykuaGFzQ2xhc3MoJ28tc2VhcmNoLWZhbHNlJykpIHtcclxuICAgICAgJCgnI28tc2VhcmNoJykucmVtb3ZlQ2xhc3MoJ28tc2VhcmNoLWZhbHNlJyk7XHJcbiAgICAgICQoJyNvLXNlYXJjaCcpLmFkZENsYXNzKCdvLXNlYXJjaC10cnVlJyk7XHJcbiAgICAgIG9uQ2xlYXJTZWFyY2goKTtcclxuICAgIH0gZWxzZSBpZiAoISgkKCcjby1zZWFyY2ggLm8tc2VhcmNoLWZpZWxkJykudmFsKCkpICYmICQoJyNvLXNlYXJjaCcpLmhhc0NsYXNzKCdvLXNlYXJjaC10cnVlJykpIHtcclxuICAgICAgJCgnI28tc2VhcmNoJykucmVtb3ZlQ2xhc3MoJ28tc2VhcmNoLXRydWUnKTtcclxuICAgICAgJCgnI28tc2VhcmNoJykuYWRkQ2xhc3MoJ28tc2VhcmNoLWZhbHNlJyk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gICQoJy5vLXNlYXJjaC1maWVsZCcpLm9uKCdibHVyJywgZnVuY3Rpb24oZSkge1xyXG4gICAgJCgnLm8tc2VhcmNoLXdyYXBwZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3Jlc2l6ZScpKTtcclxuICB9KTtcclxuICAkKCcuby1zZWFyY2gtZmllbGQnKS5vbignZm9jdXMnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAkKCcuby1zZWFyY2gtd3JhcHBlcicpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudCgncmVzaXplJykpO1xyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuLypcclxuVGhlIGxhYmVsIHByb3BlcnR5IGluIEF3ZXNvbXBsZXRlIGlzIHVzZWQgdG8gc3RvcmUgdGhlIGZlYXR1cmUgaWQuIFRoaXMgd2F5IHRoZSBwcm9wZXJ0aWVzXHJcbm9mIGVhY2ggZmVhdHVyZSBpbiB0aGUgc2VhcmNoIHJlc3BvbnNlIHdpbGwgYmUgYXZhaWxhYmxlIGluIGV2ZW50IGhhbmRsaW5nLlxyXG5UaGUgY29tcGxldGUgcHJvcGVydGllcyBhcmUgc3RvcmVkIGluIGEgdGVtcG9yeSBkYiBjYWxsZWQgc2VhcmNoRGIuIFRoaXMgaXMgYSB3b3JrYXJvdW5kXHJcbmZvciBhIGxpbWl0IGluIEF3ZXNvbXBsZXRlIHRoYXQgY2FuIG9ubHkgc3RvcmUgZGF0YSBpbiB0aGUgZmllbGRzIGxhYmVsIGFuZCB0ZXh0LlxyXG5UaGUgZGF0YS1jYXRvZ3J5IGF0dHJpYnV0ZSBpcyB1c2VkIHRvIG1ha2UgYSBsYXllciBkaXZpc2lvbiBpbiB0aGUgc3VnZ3Vlc3Rpb24gbGlzdC5cclxuKi9cclxuZnVuY3Rpb24gaW5pdEF1dG9jb21wbGV0ZSgpIHtcclxuICB2YXIgbGlzdDtcclxuXHJcbiAgJC5zdXBwb3J0LmNvcnMgPSB0cnVlO1xyXG5cclxuICB2YXIgaW5wdXQgPSAkKFwiI28tc2VhcmNoIC5vLXNlYXJjaC1maWVsZFwiKTtcclxuICBhd2Vzb21wbGV0ZSA9IG5ldyBBd2Vzb21wbGV0ZSgnI28tc2VhcmNoIC5vLXNlYXJjaC1maWVsZCcsIHtcclxuICAgIG1pbkNoYXJzOiBtaW5MZW5ndGgsXHJcbiAgICBhdXRvRmlyc3Q6IGZhbHNlLFxyXG4gICAgc29ydDogZmFsc2UsXHJcbiAgICBpdGVtOiByZW5kZXJMaXN0LFxyXG4gICAgZmlsdGVyOiBmdW5jdGlvbihzdWdnZXN0aW9uLCBpbnB1dCkge1xyXG4gICAgICByZXR1cm4gc3VnZ2VzdGlvbi52YWx1ZTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICBsaXN0ID0gW107XHJcbiAgICBzZWFyY2hEYiA9IHt9O1xyXG4gICAgaWYgKGRhdGEubGVuZ3RoKSB7XHJcbiAgICAgIHNldFNlYXJjaERiKGRhdGEpO1xyXG4gICAgICBpZiAobmFtZSAmJiBsYXllck5hbWVBdHRyaWJ1dGUpIHtcclxuICAgICAgICBsaXN0ID0gZ3JvdXBUb0xpc3QoZ3JvdXBEYihzZWFyY2hEYikpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxpc3QgPSBkYlRvTGlzdChkYXRhKTtcclxuICAgICAgfVxyXG4gICAgICBhd2Vzb21wbGV0ZS5saXN0ID0gbGlzdDtcclxuICAgICAgYXdlc29tcGxldGUuZXZhbHVhdGUoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICAkKGlucHV0KS5vbihcImtleXVwXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlO1xyXG4gICAgaWYgKHRoaXMudmFsdWUubGVuZ3RoID49IG1pbkxlbmd0aCkge1xyXG4gICAgICBpZiAoa2V5Q29kZSBpbiBrZXlDb2Rlcykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBtYWtlUmVxdWVzdChoYW5kbGVyLCB0aGlzKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkYlRvTGlzdCgpIHtcclxuICB2YXIgaXRlbXMgPSBPYmplY3Qua2V5cyhzZWFyY2hEYik7XHJcbiAgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICByZXR1cm4gc2VhcmNoRGJbaXRlbV07XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdyb3VwRGIoZGF0YSkge1xyXG4gIHZhciBncm91cCA9IHt9O1xyXG4gIHZhciBpZHMgPSBPYmplY3Qua2V5cyhkYXRhKTtcclxuICBpZHMuZm9yRWFjaChmdW5jdGlvbihpZCkge1xyXG4gICAgdmFyIGl0ZW0gPSBkYXRhW2lkXTtcclxuICAgIHZhciB0eXBlID0gaXRlbVtsYXllck5hbWVBdHRyaWJ1dGVdO1xyXG4gICAgdmFyIGhlYWRlciA9IGZhbHNlO1xyXG4gICAgaWYgKHR5cGUgaW4gZ3JvdXAgPT09IGZhbHNlKSB7XHJcbiAgICAgIGdyb3VwW3R5cGVdID0gW107XHJcbiAgICAgIGl0ZW0uaGVhZGVyID0gVmlld2VyLmdldExheWVyKHR5cGUpLmdldCgndGl0bGUnKTtcclxuICAgIH1cclxuICAgIGdyb3VwW3R5cGVdLnB1c2goaXRlbSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGdyb3VwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBncm91cFRvTGlzdChncm91cCkge1xyXG4gIHZhciB0eXBlcyA9IE9iamVjdC5rZXlzKGdyb3VwKTtcclxuICB2YXIgbGlzdCA9IFtdO1xyXG4gIHZhciBzZWxlY3Rpb24gPSB7fTtcclxuICB2YXIgbnIgPSAwO1xyXG4gIHZhciB0dXJuID0gMDtcclxuICB3aGlsZSAobnIgPCBsaW1pdCAmJiB0eXBlcy5sZW5ndGgpIHtcclxuICAgIHR5cGVzLnNsaWNlKCkuZm9yRWFjaChmdW5jdGlvbih0eXBlKSB7XHJcbiAgICAgIGlmIChuciA8IGxpbWl0KSB7XHJcbiAgICAgICAgdmFyIGl0ZW0gPSBncm91cFt0eXBlXVt0dXJuXTtcclxuICAgICAgICBpZiAodHlwZSBpbiBzZWxlY3Rpb24gPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICBzZWxlY3Rpb25bdHlwZV0gPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZWN0aW9uW3R5cGVdW3R1cm5dID0gaXRlbTtcclxuICAgICAgICBpZiAoIWdyb3VwW3R5cGVdW3R1cm4gKyAxXSkge1xyXG4gICAgICAgICAgdHlwZXMuc3BsaWNlKHR5cGVzLmluZGV4T2YodHlwZSksIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBucisrO1xyXG4gICAgfSk7XHJcbiAgICB0dXJuKys7XHJcbiAgfVxyXG4gIGxpc3QgPSBPYmplY3Qua2V5cyhzZWxlY3Rpb24pLnJlZHVjZShmdW5jdGlvbihwcmV2aW91cywgZ3JvdXApIHtcclxuICAgIHJldHVybiBwcmV2aW91cy5jb25jYXQoc2VsZWN0aW9uW2dyb3VwXSk7XHJcbiAgfSwgW10pO1xyXG4gIHJldHVybiBsaXN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRTZWFyY2hEYihkYXRhKSB7XHJcbiAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcclxuICAgIHZhciBpZCA9IGdlbmVyYXRlVVVJRCgpO1xyXG4gICAgaXRlbS5sYWJlbCA9IGlkO1xyXG4gICAgaXRlbS52YWx1ZSA9IGl0ZW1bbmFtZV07XHJcbiAgICBzZWFyY2hEYltpZF0gPSBpdGVtO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXJMaXN0KHN1Z2dlc3Rpb24sIGlucHV0KSB7XHJcbiAgdmFyIGl0ZW0gPSBzZWFyY2hEYltzdWdnZXN0aW9uLmxhYmVsXSB8fCB7fTtcclxuICB2YXIgaGVhZGVyID0gJ2hlYWRlcicgaW4gaXRlbSA/ICc8ZGl2IGNsYXNzPVwiaGVhZGluZ1wiPicgKyBpdGVtLmhlYWRlciArICc8L2Rpdj4nIDogJyc7XHJcbiAgdmFyIG9wdGlvbnMgPSB7fTtcclxuICB2YXIgaHRtbCA9IGlucHV0ID09PSAnJyA/IHN1Z2dlc3Rpb24udmFsdWUgOiBzdWdnZXN0aW9uLnZhbHVlLnJlcGxhY2UoUmVnRXhwKEF3ZXNvbXBsZXRlLiQucmVnRXhwRXNjYXBlKGlucHV0KSwgXCJnaVwiKSwgXCI8bWFyaz4kJjwvbWFyaz5cIik7XHJcbiAgaHRtbCA9IGhlYWRlciArICc8ZGl2IGNsYXNzPVwic3VnZ2VzdGlvblwiPicgKyBodG1sICsgJzwvZGl2Pic7XHJcbiAgb3B0aW9ucyA9IHtcclxuICAgIGlubmVySFRNTDogaHRtbCxcclxuICAgICdhcmlhLXNlbGVjdGVkJzogJ2ZhbHNlJ1xyXG4gIH07XHJcbiAgaWYgKCdoZWFkZXInIGluIGl0ZW0pIHtcclxuICAgIG9wdGlvbnMuY2xhc3NOYW1lID0gJ2hlYWRlcic7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gQXdlc29tcGxldGUuJC5jcmVhdGUoXCJsaVwiLCBvcHRpb25zKTtcclxufVxyXG5cclxuZnVuY3Rpb24gbWFrZVJlcXVlc3QoaGFuZGxlciwgb2JqKSB7XHJcbiAgJC5hamF4KHtcclxuICAgIHVybDogdXJsICsgJz9xPScgKyBlbmNvZGVVUkkob2JqLnZhbHVlKSxcclxuICAgIHR5cGU6ICdHRVQnLFxyXG4gICAgZGF0YVR5cGU6ICdqc29uJ1xyXG4gIH0pLnRoZW4oaGFuZGxlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQ2xlYXJTZWFyY2goKSB7XHJcbiAgJCgnI28tc2VhcmNoLWJ1dHRvbi1jbG9zZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGNsZWFyU2VhcmNoUmVzdWx0cygpO1xyXG4gICAgY2xlYXIoKTtcclxuICAgICQoJyNvLXNlYXJjaCcpLnJlbW92ZUNsYXNzKCdvLXNlYXJjaC10cnVlJyk7XHJcbiAgICAkKCcjby1zZWFyY2gnKS5hZGRDbGFzcygnby1zZWFyY2gtZmFsc2UnKTtcclxuICAgICQoJyNvLXNlYXJjaCAuby1zZWFyY2gtZmllbGQnKS52YWwoJycpO1xyXG4gICAgJCgnI28tc2VhcmNoLWJ1dHRvbicpLmJsdXIoKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2hvd092ZXJsYXkoZGF0YSwgY29vcmQpIHtcclxuICB2YXIgcG9wdXA7XHJcbiAgdmFyIGNvbnRlbnQ7XHJcbiAgY2xlYXIoKTtcclxuICBwb3B1cCA9IFBvcHVwKCcjby1tYXAnKTtcclxuICBvdmVybGF5ID0gbmV3IG9sLk92ZXJsYXkoe1xyXG4gICAgZWxlbWVudDogcG9wdXAuZ2V0RWwoKVxyXG4gIH0pO1xyXG5cclxuICBtYXAuYWRkT3ZlcmxheShvdmVybGF5KTtcclxuXHJcbiAgb3ZlcmxheS5zZXRQb3NpdGlvbihjb29yZCk7XHJcbiAgY29udGVudCA9IGRhdGFbbmFtZV07XHJcbiAgcG9wdXAuc2V0Q29udGVudCh7XHJcbiAgICBjb250ZW50OiBjb250ZW50LFxyXG4gICAgdGl0bGU6IHRpdGxlXHJcbiAgfSk7XHJcbiAgcG9wdXAuc2V0VmlzaWJpbGl0eSh0cnVlKTtcclxuICBtYXBVdGlscy56b29tVG9FeGVudChuZXcgb2wuZ2VvbS5Qb2ludChjb29yZCksIG1heFpvb21MZXZlbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNob3dGZWF0dXJlSW5mbyhmZWF0dXJlcywgdGl0bGUsIGNvbnRlbnQpIHtcclxuICB2YXIgb2JqID0ge307XHJcbiAgb2JqLmZlYXR1cmUgPSBmZWF0dXJlc1swXTtcclxuICBvYmoudGl0bGUgPSB0aXRsZTtcclxuICBvYmouY29udGVudCA9IGNvbnRlbnQ7XHJcbiAgY2xlYXIoKTtcclxuICBmZWF0dXJlSW5mby5pZGVudGlmeShbb2JqXSwgJ292ZXJsYXknLCBnZXRDZW50ZXIoZmVhdHVyZXNbMF0uZ2V0R2VvbWV0cnkoKSkpO1xyXG4gIG1hcFV0aWxzLnpvb21Ub0V4ZW50KGZlYXR1cmVzWzBdLmdldEdlb21ldHJ5KCksIG1heFpvb21MZXZlbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gIGZlYXR1cmVJbmZvLmNsZWFyKCk7XHJcbiAgaWYgKG92ZXJsYXkpIHtcclxuICAgIFZpZXdlci5yZW1vdmVPdmVybGF5cyhvdmVybGF5KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyU2VhcmNoUmVzdWx0cygpIHtcclxuICBhd2Vzb21wbGV0ZS5saXN0ID0gW107XHJcbiAgc2V0U2VhcmNoRGIoW10pO1xyXG59XHJcblxyXG4vKiogVGhlcmUgYXJlIHNldmVyYWwgZGlmZmVyZW50IHdheXMgdG8gaGFuZGxlIHNlbGVjdGVkIHNlYXJjaCByZXN1bHQuXHJcbiAqIE9wdGlvbiAxLiBGZWF0dXJlIGluZm8gaXMgcmVxdWVzdGVkIGZyb20gYSBtYXAgc2VydmljZS5cclxuICogSW4gdGhpcyBjYXNlIGlkQXR0cmlidXRlIGFuZCBsYXllck5hbWVBdHRyaWJ1dGUgbXVzdCBiZSBwcm92aWRlZC5cclxuICogQSBtYXAgc2VydmljZSBpcyB1c2VkIHRvIGdldCB0aGUgZ2VvbWV0cnkgYW5kIGF0dHJpYnV0ZXMuIFRoZSBsYXllciBpcyBkZWZpbmVkXHJcbiAqIGFzIGFuIG9yZGluYXJ5IGxheWVyIGluIHRoZSBsYXllciBjb25maWcgc2VjdGlvbi5cclxuICogT3B0aW9uIDIuIFNhbWUgYXMgb3B0aW9uIDEgYnV0IGZvciBzaW5nbGUgbGF5ZXIgc2VhcmNoLiBsYXllck5hbWUgaXMgZGVmaW5lZFxyXG4gKiBhcyBhbiBvcHRpb24gYW5kIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgc2VhcmNoIHJlc3BvbnNlLlxyXG4gKiBJbiB0aGlzIGNhc2UgZ2VvbWV0cnlBdHRyaWJ1dGUgYW5kIGxheWVyTmFtZSBtdXN0IGJlIHByb3ZpZGVkLlxyXG4gKiBPcHRpb24gMy4gQ29tcGxldGUgZmVhdHVyZSBpbmZvIGlzIGluY2x1ZGVkIGluIHRoZSBzZWFyY2ggcmVzdWx0LlxyXG4gKiBJbiB0aGlzIGNhc2UgdGl0bGVBdHRyaWJ1dGUsIGNvbnRlbnRBdHRyaWJ1dGUgYW5kIGdlb21ldHJ5QXR0cmlidXRlIG11c3QgYmUgcHJvdmlkZWQuXHJcbiAqIE9wdGlvbiA0LiBUaGlzIGlzIGEgc2luZ2xlIHRhYmxlIHNlYXJjaC4gTm8gbGF5ZXIgaXMgZGVmaW5lZC5cclxuICogSW4gdGhpcyBjYXNlIGdlb21ldHJ5QXR0cmlidXRlIGFuZCB0aXRsZSBtdXN0IGJlIGRlZmluZWQuXHJcbiAqIE9wdGlvbiA1LiBGZWF0dXJlIGluZm8gaXMgc2hvd24gd2l0aG91dCBzZWxlY3Rpb24gaW4gdGhlIG1hcC5cclxuICogVGhpcyBpcyBhIHNpbXBsZSBzaW5nbGUgdGFibGUgc2VhcmNoLiBJbiB0aGlzIGNhc2UgdGl0bGUsIG5vcnRoaW5nIGFuZCBlYXN0aW5nXHJcbiAqIG11c3QgYmUgZGVmaW5lZC4gKi9cclxuXHJcbmZ1bmN0aW9uIHNlbGVjdEhhbmRsZXIoZXZ0KSB7XHJcbiAgdmFyIGlkID0gZXZ0LnRleHQubGFiZWw7XHJcbiAgdmFyIGRhdGEgPSBzZWFyY2hEYltpZF07XHJcbiAgdmFyIGxheWVyO1xyXG4gIHZhciBpZDtcclxuICB2YXIgZmVhdHVyZTtcclxuICB2YXIgY29udGVudDtcclxuICB2YXIgY29vcmQ7XHJcbiAgaWYgKGxheWVyTmFtZUF0dHJpYnV0ZSAmJiBpZEF0dHJpYnV0ZSkge1xyXG4gICAgbGF5ZXIgPSBWaWV3ZXIuZ2V0TGF5ZXIoZGF0YVtsYXllck5hbWVBdHRyaWJ1dGVdKTtcclxuICAgIGlkID0gZGF0YVtpZEF0dHJpYnV0ZV07XHJcbiAgICBnZXRGZWF0dXJlKGlkLCBsYXllcilcclxuICAgICAgLmRvbmUoZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgICAgdmFyIGZlYXR1cmVXa3Q7XHJcbiAgICAgICAgdmFyIGNvb3JkV2t0O1xyXG4gICAgICAgIGlmIChyZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgc2hvd0ZlYXR1cmVJbmZvKHJlcywgbGF5ZXIuZ2V0KCd0aXRsZScpLCBnZXRBdHRyaWJ1dGVzKHJlc1swXSwgbGF5ZXIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZhbGxiYWNrIGlmIG5vIGdlb21ldHJ5IGluIHJlc3BvbnNlXHJcbiAgICAgICAgZWxzZSBpZiAoZ2VvbWV0cnlBdHRyaWJ1dGUpIHtcclxuICAgICAgICAgIGZlYXR1cmVXa3QgPSB3a3RUb0ZlYXR1cmUoZGF0YVtnZW9tZXRyeUF0dHJpYnV0ZV0sIHByb2plY3Rpb25Db2RlKTtcclxuICAgICAgICAgIGNvb3JkV2t0ID0gZmVhdHVyZVdrdC5nZXRHZW9tZXRyeSgpLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICBzaG93T3ZlcmxheShkYXRhLCBjb29yZFdrdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9IGVsc2UgaWYgKGdlb21ldHJ5QXR0cmlidXRlICYmIGxheWVyTmFtZSkge1xyXG4gICAgZmVhdHVyZSA9IHdrdFRvRmVhdHVyZShkYXRhW2dlb21ldHJ5QXR0cmlidXRlXSwgcHJvamVjdGlvbkNvZGUpO1xyXG4gICAgbGF5ZXIgPSBWaWV3ZXIuZ2V0TGF5ZXIoZGF0YVtsYXllck5hbWVdKTtcclxuICAgIHNob3dGZWF0dXJlSW5mbyhbZmVhdHVyZV0sIGxheWVyLmdldCgndGl0bGUnKSwgZ2V0QXR0cmlidXRlcyhmZWF0dXJlLCBsYXllcikpO1xyXG4gIH0gZWxzZSBpZiAodGl0bGVBdHRyaWJ1dGUgJiYgY29udGVudEF0dHJpYnV0ZSAmJiBnZW9tZXRyeUF0dHJpYnV0ZSkge1xyXG4gICAgZmVhdHVyZSA9IHdrdFRvRmVhdHVyZShkYXRhW2dlb21ldHJ5QXR0cmlidXRlXSwgcHJvamVjdGlvbkNvZGUpO1xyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgcmVzcG9uc2UgaXMgd3JhcHBlZCBpbiBhIGh0bWwgZWxlbWVudFxyXG4gICAgY29udGVudCA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIGRhdGFbY29udGVudEF0dHJpYnV0ZV0pO1xyXG4gICAgc2hvd0ZlYXR1cmVJbmZvKFtmZWF0dXJlXSwgZGF0YVt0aXRsZUF0dHJpYnV0ZV0sIGNvbnRlbnQpO1xyXG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnlBdHRyaWJ1dGUgJiYgdGl0bGUpIHtcclxuICAgIGZlYXR1cmUgPSB3a3RUb0ZlYXR1cmUoZGF0YVtnZW9tZXRyeUF0dHJpYnV0ZV0sIHByb2plY3Rpb25Db2RlKTtcclxuICAgIGNvbnRlbnQgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCBkYXRhW25hbWVdKTtcclxuICAgIHNob3dGZWF0dXJlSW5mbyhbZmVhdHVyZV0sIHRpdGxlLCBjb250ZW50KTtcclxuICB9IGVsc2UgaWYgKGVhc3RpbmcgJiYgbm9ydGhpbmcgJiYgdGl0bGUpIHtcclxuICAgIGNvb3JkID0gW2RhdGFbZWFzdGluZ10sIGRhdGFbbm9ydGhpbmddXTtcclxuICAgIHNob3dPdmVybGF5KGRhdGEsIGNvb3JkKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coJ1NlYXJjaCBvcHRpb25zIGFyZSBtaXNzaW5nJyk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gaW5pdDtcclxuIiwiLypyZXF1aXJlcyBNb2RhbC5qcyovXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciBtb2RhbCA9IHJlcXVpcmUoJy4vbW9kYWwnKTtcclxudmFyIG1hcG1lbnUgPSByZXF1aXJlKCcuL21hcG1lbnUnKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG52YXIgcGVybWFsaW5rID0gcmVxdWlyZSgnLi9wZXJtYWxpbmsvcGVybWFsaW5rJyk7XHJcblxyXG52YXIgc2hhcmVCdXR0b247XHJcblxyXG5mdW5jdGlvbiBpbml0KCl7XHJcbiAgICB2YXIgZWwgPSB1dGlscy5jcmVhdGVMaXN0QnV0dG9uKHtcclxuICAgICAgICBpZDogJ28tc2hhcmUnLFxyXG4gICAgICAgIGljb25DbHM6ICdvLWljb24tZmEtc2hhcmUtc3F1YXJlLW8nLFxyXG4gICAgICAgIHNyYzogJyNmYS1zaGFyZS1zcXVhcmUtbycsXHJcbiAgICAgICAgdGV4dDogJ0RlbGEga2FydGEnXHJcbiAgICB9KTtcclxuICAgICQoJyNvLW1lbnV0b29scycpLmFwcGVuZChlbCk7XHJcbiAgICBzaGFyZUJ1dHRvbiA9ICQoJyNvLXNoYXJlLWJ1dHRvbicpO1xyXG4gICAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgICBzaGFyZUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgbW9kYWwuY3JlYXRlTW9kYWwoJyNvLW1hcCcsIHt0aXRsZTogJ0zDpG5rIHRpbGwga2FydGEnLCBjb250ZW50OiBjcmVhdGVDb250ZW50KCl9KTtcclxuICAgICAgICBtb2RhbC5zaG93TW9kYWwoKTtcclxuICAgICAgICBjcmVhdGVMaW5rKCk7IC8vQWRkIGxpbmsgdG8gaW5wdXRcclxuICAgICAgICBtYXBtZW51LnRvZ2dsZU1lbnUoKTtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVDb250ZW50KCkge1xyXG4gICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiby1zaGFyZS1saW5rXCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgJzxpPktvcGllcmEgb2NoIGtsaXN0cmEgaW4gbMOkbmtlbiBmw7ZyIGF0dCBkZWxhIGthcnRhbi48L2k+JztcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVMaW5rKCkge1xyXG4gICAgdmFyIHVybCA9IHBlcm1hbGluay5nZXRQZXJtYWxpbmsoKTtcclxuICAgICQoJy5vLXNoYXJlLWxpbmsgaW5wdXQnKS52YWwodXJsKS5zZWxlY3QoKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbnZhciBzaWRlYmFyO1xyXG5cclxuZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIHZhciBlbCA9ICc8ZGl2IGlkPVwiby1zaWRlYmFyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8tc2lkZWJhciBvLWNhcmRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWNsb3NlLWJ1dHRvblwiPjxzdmcgY2xhc3M9XCJvLWljb24tZmEtdGltZXNcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtdGltZXNcIj48L3VzZT48L3N2Zz48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWNhcmQtdGl0bGVcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWNhcmQtY29udGVudFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgJCgnI28tbWFwJykuYXBwZW5kKGVsKTtcclxuICAgIHNpZGViYXIgPSAkKCcjby1zaWRlYmFyJyk7XHJcblxyXG4gICAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgICAkKCcjby1zaWRlYmFyIC5vLXNpZGViYXIgLm8tY2xvc2UtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgY2xvc2VTaWRlYmFyKCk7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBzZXRWaXNpYmlsaXR5KHZpc2libGUpIHtcclxuICAgIHZpc2libGUgPT0gdHJ1ZSA/ICQoJyNvLXNpZGViYXInKS5hZGRDbGFzcygnby1zaWRlYmFyLXNob3cnKSA6ICQoJyNvLXNpZGViYXInKS5yZW1vdmVDbGFzcygnby1zaWRlYmFyLXNob3cnKTtcclxufVxyXG5mdW5jdGlvbiBzZXRUaXRsZSh0aXRsZSkge1xyXG4gICAgJCgnI28tc2lkZWJhciAuby1jYXJkLXRpdGxlJykuaHRtbCh0aXRsZSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0Q29udGVudChjb25maWcpIHtcclxuICAgIGNvbmZpZy50aXRsZSA/ICQoJyNvLXNpZGViYXIgLm8tc2lkZWJhciAuby1jYXJkLXRpdGxlJykuaHRtbChjb25maWcudGl0bGUpOiAkKCcjby1zaWRlYmFyIC5vLXNpZGViYXIgLm8tY2FyZC10aXRsZScpLmh0bWwoJycpO1xyXG4gICAgY29uZmlnLmNvbnRlbnQgPyAkKCcjby1zaWRlYmFyIC5vLXNpZGViYXIgLm8tY2FyZC1jb250ZW50JykuaHRtbChjb25maWcuY29udGVudCk6ICQoJyNvLXNpZGViYXIgLm8tc2lkZWJhciAuby1jYXJkLWNvbnRlbnQnKS5odG1sKCcnKTtcclxufVxyXG5mdW5jdGlvbiBjbG9zZVNpZGViYXIoKSB7XHJcbiAgICBzZXRWaXNpYmlsaXR5KGZhbHNlKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbm1vZHVsZS5leHBvcnRzLnNldFZpc2liaWxpdHkgPSBzZXRWaXNpYmlsaXR5O1xyXG5tb2R1bGUuZXhwb3J0cy5zZXRUaXRsZSA9IHNldFRpdGxlO1xyXG5tb2R1bGUuZXhwb3J0cy5zZXRDb250ZW50ID0gc2V0Q29udGVudDtcclxubW9kdWxlLmV4cG9ydHMuY2xvc2VTaWRlYmFyID0gY2xvc2VTaWRlYmFyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBNb2RhbCA9IHJlcXVpcmUoJy4vbW9kYWwnKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcblxyXG52YXIgZGVmYXVsdFRpdGxlID0gJ09tIGthcnRhbic7XHJcbnZhciBkZWZhdWx0Q29udGVudCA9ICc8cD48L3A+JztcclxudmFyIGNscyA9ICdvLXNwbGFzaCc7XHJcbnZhciB0aXRsZTtcclxudmFyIGNvbnRlbnQ7XHJcblxyXG5mdW5jdGlvbiBpbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICB2YXIgdXJsO1xyXG4gIHRpdGxlID0gb3B0aW9ucy50aXRsZSB8fCBkZWZhdWx0VGl0bGU7XHJcbiAgaWYgKG9wdGlvbnMudXJsKSB7XHJcbiAgICB1cmwgPSB2aWV3ZXIuZ2V0QmFzZVVybCgpICsgb3B0aW9ucy51cmw7XHJcbiAgICBnZXRDb250ZW50KHVybClcclxuICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGNvbnRlbnQgPSBkYXRhO1xyXG4gICAgICAgIG9wZW5Nb2RhbCgpO1xyXG4gICAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29udGVudCA9IG9wdGlvbnMuY29udGVudCB8fCBkZWZhdWx0Q29udGVudDtcclxuICAgIG9wZW5Nb2RhbCgpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29udGVudCh1cmwpIHtcclxuICByZXR1cm4gJC5nZXQodXJsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3Blbk1vZGFsKCkge1xyXG4gIE1vZGFsLmNyZWF0ZU1vZGFsKCcjby1tYXAnLCB7XHJcbiAgICB0aXRsZTogdGl0bGUsXHJcbiAgICBjb250ZW50OiBjb250ZW50LFxyXG4gICAgY2xzOiBjbHNcclxuICB9KTtcclxuICBNb2RhbC5zaG93TW9kYWwoKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHZhbGlkYXRlVXJsID0gcmVxdWlyZSgnLi91dGlscy92YWxpZGF0ZXVybCcpO1xyXG52YXIgc3R5bGVGdW5jdGlvbnMgPSByZXF1aXJlKCcuL3N0eWxlL3N0eWxlZnVuY3Rpb25zJyk7XHJcbnZhciByZXBsYWNlciA9IHJlcXVpcmUoJy4uL3NyYy91dGlscy9yZXBsYWNlcicpO1xyXG5cclxudmFyIGJhc2VVcmw7XHJcblxyXG52YXIgd2hpdGUgPSBbMjU1LCAyNTUsIDI1NSwgMV07XHJcbnZhciBibHVlID0gWzAsIDE1MywgMjU1LCAxXTtcclxudmFyIHdpZHRoID0gMztcclxuXHJcbi8vZGVmYXVsdCBlZGl0IHN0eWxlIG9wdGlvbnNcclxudmFyIGVkaXRTdHlsZU9wdGlvbnMgPSB7XHJcbiAgJ1BvaW50JzogW3tcclxuICAgIFwiY2lyY2xlXCI6IHtcclxuICAgICAgXCJyYWRpdXNcIjogMSxcclxuICAgICAgXCJzdHJva2VcIjoge1xyXG4gICAgICAgIFwiY29sb3JcIjogYmx1ZSxcclxuICAgICAgICBcIndpZHRoXCI6IDBcclxuICAgICAgfSxcclxuICAgICAgXCJmaWxsXCI6IHtcclxuICAgICAgICBcImNvbG9yXCI6IGJsdWVcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1dLFxyXG4gICdMaW5lU3RyaW5nJzogW3tcclxuICAgICAgJ3N0cm9rZSc6IHtcclxuICAgICAgICBjb2xvcjogd2hpdGUsXHJcbiAgICAgICAgd2lkdGg6IHdpZHRoICsgMlxyXG4gICAgICB9XHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAnc3Ryb2tlJzoge1xyXG4gICAgICAgIGNvbG9yOiBibHVlLFxyXG4gICAgICAgIHdpZHRoOiB3aWR0aFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgXSxcclxuICAnUG9seWdvbic6IFt7XHJcbiAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgY29sb3I6IHdoaXRlLFxyXG4gICAgICAgIHdpZHRoOiB3aWR0aCArIDJcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgJ3N0cm9rZSc6IHtcclxuICAgICAgICBjb2xvcjogYmx1ZSxcclxuICAgICAgICB3aWR0aDogd2lkdGhcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBpbml0OiBJbml0LFxyXG4gICAgY3JlYXRlU3R5bGVPcHRpb25zOiBjcmVhdGVTdHlsZU9wdGlvbnMsXHJcbiAgICBjcmVhdGVTdHlsZUxpc3Q6IGNyZWF0ZVN0eWxlTGlzdCxcclxuICAgIGNyZWF0ZVN0eWxlUnVsZTogY3JlYXRlU3R5bGVSdWxlLFxyXG4gICAgY3JlYXRlU3R5bGU6IGNyZWF0ZVN0eWxlLFxyXG4gICAgc3R5bGVGdW5jdGlvbjogc3R5bGVGdW5jdGlvbixcclxuICAgIGNyZWF0ZUVkaXRTdHlsZTogY3JlYXRlRWRpdFN0eWxlXHJcbiAgfVxyXG59O1xyXG5cclxuZnVuY3Rpb24gSW5pdCgpIHtcclxuICBiYXNlVXJsID0gVmlld2VyLmdldEJhc2VVcmwoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3R5bGVPcHRpb25zKHN0eWxlUGFyYW1zKSB7XHJcbiAgdmFyIHN0eWxlT3B0aW9ucyA9IHt9O1xyXG4gIGlmIChzdHlsZVBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnZ2VvbWV0cnknKSkge1xyXG4gICAgc3dpdGNoIChzdHlsZVBhcmFtcy5nZW9tZXRyeSkge1xyXG4gICAgICBjYXNlICdjZW50ZXJQb2ludCc6XHJcbiAgICAgICAgc3R5bGVPcHRpb25zLmdlb21ldHJ5ID0gZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldEludGVyaW9yUG9pbnRzKCkuZ2V0Rmlyc3RDb29yZGluYXRlKCk7XHJcbiAgICAgICAgICByZXR1cm4gbmV3IG9sLmdlb20uUG9pbnQoY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnZW5kUG9pbnQnOlxyXG4gICAgICAgIHN0eWxlT3B0aW9ucy5nZW9tZXRyeSA9IGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgICAgIHZhciBjb29yZGluYXRlcyA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRMYXN0Q29vcmRpbmF0ZSgpO1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBvbC5nZW9tLlBvaW50KGNvb3JkaW5hdGVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmIChzdHlsZVBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnekluZGV4JykpIHtcclxuICAgIHN0eWxlT3B0aW9ucy56SW5kZXggPSBzdHlsZVBhcmFtcy56SW5kZXg7XHJcbiAgfVxyXG4gIGlmIChzdHlsZVBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnZmlsbCcpKSB7XHJcbiAgICBzdHlsZU9wdGlvbnMuZmlsbCA9IG5ldyBvbC5zdHlsZS5GaWxsKHN0eWxlUGFyYW1zLmZpbGwpO1xyXG4gIH1cclxuICBpZiAoc3R5bGVQYXJhbXMuaGFzT3duUHJvcGVydHkoJ3N0cm9rZScpKSB7XHJcbiAgICBzdHlsZU9wdGlvbnMuc3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZShzdHlsZVBhcmFtcy5zdHJva2UpO1xyXG4gIH1cclxuICBpZiAoc3R5bGVQYXJhbXMuaGFzT3duUHJvcGVydHkoJ3RleHQnKSkge1xyXG4gICAgc3R5bGVPcHRpb25zLnRleHQgPSBuZXcgb2wuc3R5bGUuVGV4dChzdHlsZVBhcmFtcy50ZXh0KTtcclxuICAgIGlmIChzdHlsZVBhcmFtcy50ZXh0Lmhhc093blByb3BlcnR5KCdmaWxsJykpIHtcclxuICAgICAgc3R5bGVPcHRpb25zLnRleHQuc2V0RmlsbChuZXcgb2wuc3R5bGUuRmlsbChzdHlsZVBhcmFtcy50ZXh0LmZpbGwpKTtcclxuICAgIH1cclxuICAgIGlmIChzdHlsZVBhcmFtcy50ZXh0Lmhhc093blByb3BlcnR5KCdzdHJva2UnKSkge1xyXG4gICAgICBzdHlsZU9wdGlvbnMudGV4dC5zZXRTdHJva2UobmV3IG9sLnN0eWxlLlN0cm9rZShzdHlsZVBhcmFtcy50ZXh0LnN0cm9rZSkpO1xyXG4gICAgfVxyXG4gIH1cclxuICBpZiAoc3R5bGVQYXJhbXMuaGFzT3duUHJvcGVydHkoJ2ljb24nKSkge1xyXG4gICAgaWYgKHN0eWxlUGFyYW1zLmljb24uaGFzT3duUHJvcGVydHkoJ3NyYycpKSB7XHJcbiAgICAgIHN0eWxlUGFyYW1zLmljb24uc3JjID0gdmFsaWRhdGVVcmwoc3R5bGVQYXJhbXMuaWNvbi5zcmMsIGJhc2VVcmwpO1xyXG4gICAgfVxyXG4gICAgc3R5bGVPcHRpb25zLmltYWdlID0gbmV3IG9sLnN0eWxlLkljb24oc3R5bGVQYXJhbXMuaWNvbik7XHJcbiAgfVxyXG4gIGlmIChzdHlsZVBhcmFtcy5oYXNPd25Qcm9wZXJ0eSgnY2lyY2xlJykpIHtcclxuICAgIHN0eWxlT3B0aW9ucy5pbWFnZSA9IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xyXG4gICAgICByYWRpdXM6IHN0eWxlUGFyYW1zLmNpcmNsZS5yYWRpdXMsXHJcbiAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHN0eWxlUGFyYW1zLmNpcmNsZS5maWxsKSB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZShzdHlsZVBhcmFtcy5jaXJjbGUuc3Ryb2tlKSB8fCB1bmRlZmluZWRcclxuICAgIH0pO1xyXG4gIH1cclxuICByZXR1cm4gc3R5bGVPcHRpb25zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTdHlsZUxpc3Qoc3R5bGVPcHRpb25zKSB7XHJcbiAgdmFyIHN0eWxlTGlzdCA9IFtdO1xyXG4gIC8vQ3JlYXRlIHN0eWxlIGZvciBlYWNoIHJ1bGVcclxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlT3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgdmFyIHN0eWxlUnVsZSA9IFtdO1xyXG4gICAgdmFyIHN0eWxlT3B0aW9uO1xyXG4gICAgLy9DaGVjayBpZiBydWxlIGlzIGFycmF5LCBpZSBtdWx0aXBsZSBzdHlsZXMgZm9yIHRoZSBydWxlXHJcbiAgICBpZiAoc3R5bGVPcHRpb25zW2ldLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xyXG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHN0eWxlT3B0aW9uc1tpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgIHN0eWxlT3B0aW9uID0gY3JlYXRlU3R5bGVPcHRpb25zKHN0eWxlT3B0aW9uc1tpXVtqXSk7XHJcbiAgICAgICAgc3R5bGVSdWxlLnB1c2gobmV3IG9sLnN0eWxlLlN0eWxlKHN0eWxlT3B0aW9uKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vSWYgc2luZ2xlIHN0eWxlIGZvciBydWxlXHJcbiAgICBlbHNlIHtcclxuICAgICAgc3R5bGVPcHRpb24gPSBjcmVhdGVTdHlsZU9wdGlvbnMoc3R5bGVPcHRpb25zW2ldKTtcclxuICAgICAgc3R5bGVSdWxlID0gW25ldyBvbC5zdHlsZS5TdHlsZShzdHlsZU9wdGlvbildO1xyXG4gICAgfVxyXG5cclxuICAgIHN0eWxlTGlzdC5wdXNoKHN0eWxlUnVsZSk7XHJcbiAgfVxyXG4gIHJldHVybiBzdHlsZUxpc3Q7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlKHN0eWxlTmFtZSwgY2x1c3RlclN0eWxlTmFtZSkge1xyXG4gIHZhciBzdHlsZVNldHRpbmdzID0gVmlld2VyLmdldFN0eWxlU2V0dGluZ3MoKVtzdHlsZU5hbWVdO1xyXG4gIGlmICgkLmlzRW1wdHlPYmplY3Qoc3R5bGVTZXR0aW5ncykpIHtcclxuICAgIGFsZXJ0KCdTdHlsZSAnICsgc3R5bGVOYW1lICsgJyBpcyBub3QgZGVmaW5lZCcpO1xyXG4gIH1cclxuICBpZiAoc3R5bGVTZXR0aW5nc1swXVswXS5oYXNPd25Qcm9wZXJ0eShcImN1c3RvbVwiKSkge1xyXG4gICAgdmFyIHN0eWxlID0gc3R5bGVGdW5jdGlvbnMoc3R5bGVTZXR0aW5nc1swXVswXS5jdXN0b20sIHN0eWxlU2V0dGluZ3NbMF1bMF0ucGFyYW1zKTtcclxuICAgIHJldHVybiBzdHlsZTtcclxuICB9IGVsc2Uge1xyXG4gICAgdmFyIGNsdXN0ZXJTdHlsZVNldHRpbmdzID0gVmlld2VyLmdldFN0eWxlU2V0dGluZ3MoKVtjbHVzdGVyU3R5bGVOYW1lXTtcclxuICAgIHZhciBzdHlsZSA9IChmdW5jdGlvbigpIHtcclxuICAgICAgLy9DcmVhdGUgc3R5bGUgZm9yIGVhY2ggcnVsZVxyXG4gICAgICB2YXIgc3R5bGVMaXN0ID0gY3JlYXRlU3R5bGVMaXN0KHN0eWxlU2V0dGluZ3MpO1xyXG4gICAgICBpZiAoY2x1c3RlclN0eWxlU2V0dGluZ3MpIHtcclxuICAgICAgICB2YXIgY2x1c3RlclN0eWxlTGlzdCA9IGNyZWF0ZVN0eWxlTGlzdChjbHVzdGVyU3R5bGVTZXR0aW5ncyk7XHJcbiAgICAgICAgcmV0dXJuIHN0eWxlRnVuY3Rpb24oc3R5bGVTZXR0aW5ncywgc3R5bGVMaXN0LCBjbHVzdGVyU3R5bGVTZXR0aW5ncywgY2x1c3RlclN0eWxlTGlzdCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHN0eWxlRnVuY3Rpb24oc3R5bGVTZXR0aW5ncywgc3R5bGVMaXN0KTtcclxuICAgICAgfVxyXG5cclxuICAgIH0pKClcclxuICAgIHJldHVybiBzdHlsZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlUnVsZShvcHRpb25zKSB7XHJcbiAgdmFyIHN0eWxlUnVsZSA9IFtdLFxyXG4gICAgc3R5bGVPcHRpb247XHJcbiAgaWYgKG9wdGlvbnMuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIHN0eWxlT3B0aW9uID0gY3JlYXRlU3R5bGVPcHRpb25zKG9wdGlvbnNbaV0pO1xyXG4gICAgICBzdHlsZVJ1bGUucHVzaChuZXcgb2wuc3R5bGUuU3R5bGUoc3R5bGVPcHRpb24pKTtcclxuICAgIH1cclxuICB9XHJcbiAgLy9JZiBzaW5nbGUgc3R5bGUgZm9yIHJ1bGVcclxuICBlbHNlIHtcclxuICAgIHN0eWxlT3B0aW9uID0gY3JlYXRlU3R5bGVPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgc3R5bGVSdWxlID0gW25ldyBvbC5zdHlsZS5TdHlsZShzdHlsZU9wdGlvbildO1xyXG4gIH1cclxuICByZXR1cm4gc3R5bGVSdWxlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKHN0eWxlU2V0dGluZ3MsIHN0eWxlTGlzdCwgY2x1c3RlclN0eWxlU2V0dGluZ3MsIGNsdXN0ZXJTdHlsZUxpc3QpIHtcclxuICB2YXIgcyA9IHN0eWxlU2V0dGluZ3M7XHJcbiAgdmFyIHJlc29sdXRpb25zID0gVmlld2VyLmdldFJlc29sdXRpb25zKCk7XHJcbiAgdmFyIGZuID0gZnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbikge1xyXG4gICAgdmFyIHNjYWxlID0gVmlld2VyLmdldFNjYWxlKHJlc29sdXRpb24pO1xyXG4gICAgdmFyIHN0eWxlTDtcclxuICAgIC8vSWYgc2l6ZSBpcyBsYXJnZXIgdGhhbiwgaXQgaXMgYSBjbHVzdGVyXHJcbiAgICB2YXIgc2l6ZSA9IGNsdXN0ZXJTdHlsZUxpc3QgPyBmZWF0dXJlLmdldCgnZmVhdHVyZXMnKS5sZW5ndGggOiAxO1xyXG4gICAgaWYgKHNpemUgPiAxICYmIHJlc29sdXRpb24gIT0gcmVzb2x1dGlvbnNbcmVzb2x1dGlvbnMubGVuZ3RoICsgMV0pIHtcclxuICAgICAgc3R5bGVMID0gY2hlY2tPcHRpb25zKGZlYXR1cmUsIHNjYWxlLCBjbHVzdGVyU3R5bGVTZXR0aW5ncywgY2x1c3RlclN0eWxlTGlzdCwgc2l6ZS50b1N0cmluZygpKTtcclxuICAgICAgLy8gY2x1c3RlclN0eWxlTGlzdFswXS5zZXRUZXh0KHNpemUpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc3R5bGVMID0gY2hlY2tPcHRpb25zKGZlYXR1cmUsIHNjYWxlLCBzdHlsZVNldHRpbmdzLCBzdHlsZUxpc3QpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0eWxlTDtcclxuICB9XHJcbiAgcmV0dXJuIGZuO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVFZGl0U3R5bGUoKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgICdQb2ludCc6IGNyZWF0ZVN0eWxlUnVsZShlZGl0U3R5bGVPcHRpb25zWydQb2ludCddKSxcclxuICAgICdNdWx0aVBvaW50JzogY3JlYXRlU3R5bGVSdWxlKGVkaXRTdHlsZU9wdGlvbnNbJ1BvaW50J10pLFxyXG4gICAgJ0xpbmVTdHJpbmcnOiBjcmVhdGVTdHlsZVJ1bGUoZWRpdFN0eWxlT3B0aW9uc1snTGluZVN0cmluZyddKSxcclxuICAgICdNdWx0aUxpbmVTdHJpbmcnOiBjcmVhdGVTdHlsZVJ1bGUoZWRpdFN0eWxlT3B0aW9uc1snTGluZVN0cmluZyddKSxcclxuICAgICdQb2x5Z29uJzogY3JlYXRlU3R5bGVSdWxlKGVkaXRTdHlsZU9wdGlvbnNbJ1BvbHlnb24nXSksXHJcbiAgICAnTXVsdGlQb2x5Z29uJzogY3JlYXRlU3R5bGVSdWxlKGVkaXRTdHlsZU9wdGlvbnNbJ1BvbHlnb24nXSlcclxuICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja09wdGlvbnMoZmVhdHVyZSwgc2NhbGUsIHN0eWxlU2V0dGluZ3MsIHN0eWxlTGlzdCwgc2l6ZSkge1xyXG4gIHZhciBzID0gc3R5bGVTZXR0aW5ncztcclxuICBmb3IgKHZhciBqID0gMDsgaiA8IHMubGVuZ3RoOyBqKyspIHtcclxuICAgIHZhciBzdHlsZUw7XHJcbiAgICBpZiAoVmlld2VyLmNoZWNrU2NhbGUoc2NhbGUsIHNbal1bMF0ubWF4U2NhbGUsIHNbal1bMF0ubWluU2NhbGUpKSB7XHJcbiAgICAgIHNbal0uc29tZShmdW5jdGlvbihlbGVtZW50LCBpbmRleCwgYXJyYXkpIHtcclxuICAgICAgICBpZiAoZWxlbWVudC5oYXNPd25Qcm9wZXJ0eSgndGV4dCcpICYmIHNpemUpIHtcclxuICAgICAgICAgIHN0eWxlTGlzdFtqXVtpbmRleF0uZ2V0VGV4dCgpLnNldFRleHQoc2l6ZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChlbGVtZW50Lmhhc093blByb3BlcnR5KCd0ZXh0JykpIHtcclxuICAgICAgICAgIHN0eWxlTGlzdFtqXVtpbmRleF0uZ2V0VGV4dCgpLnNldFRleHQocmVwbGFjZXIucmVwbGFjZShlbGVtZW50LnRleHQudGV4dCwgZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCkpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBpZiAoc1tqXVswXS5oYXNPd25Qcm9wZXJ0eSgnZmlsdGVyJykpIHtcclxuICAgICAgICAvL2ZpbmQgYXR0cmlidXRlIHZhbGUgYmV0d2VlbiBbXSBkZWZpbmVkIGluIHN0eWxlc1xyXG4gICAgICAgIHZhciBmZWF0QXR0ciwgZXhwciwgZmVhdE1hdGNoO1xyXG4gICAgICAgIHZhciBtYXRjaGVzID0gc1tqXVswXS5maWx0ZXIubWF0Y2goL1xcWyguKj8pXFxdLyk7XHJcbiAgICAgICAgaWYgKG1hdGNoZXMpIHtcclxuICAgICAgICAgIGlmIChmZWF0dXJlLmdldCgnZmVhdHVyZXMnKSkge1xyXG4gICAgICAgICAgICBmZWF0dXJlID0gZmVhdHVyZS5nZXQoJ2ZlYXR1cmVzJylbMF07XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBmZWF0QXR0ciA9IG1hdGNoZXNbMV07XHJcbiAgICAgICAgICBleHByID0gc1tqXVswXS5maWx0ZXIuc3BsaXQoJ10nKVsxXTtcclxuICAgICAgICAgIGZlYXRNYXRjaCA9IGZlYXR1cmUuZ2V0KGZlYXRBdHRyKTtcclxuICAgICAgICAgIGV4cHIgPSB0eXBlb2YgZmVhdE1hdGNoID09ICdudW1iZXInID8gZmVhdE1hdGNoICsgZXhwciA6ICdcIicgKyBmZWF0TWF0Y2ggKyAnXCInICsgZXhwcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV2YWwoZXhwcikpIHtcclxuICAgICAgICAgIHN0eWxlTCA9IHN0eWxlTGlzdFtqXTtcclxuICAgICAgICAgIHJldHVybiBzdHlsZUw7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0eWxlTCA9IHN0eWxlTGlzdFtqXTtcclxuICAgICAgICByZXR1cm4gc3R5bGVMO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsInZhciBjb2xvcnMgPSB7XHJcbiAgJ2JsYWNrJzogWzAsMCwwXSxcclxuICAncmVkJzogWzI1NSw1OSw0OF0sXHJcbiAgJ3llbGxvdyc6IFsyNTUsMjA0LDBdLFxyXG4gICdncmVlbic6IFswLDI1NSwwXSxcclxuICAnY3lhbic6IFswLDI1NSwyNTVdLFxyXG4gICdibHVlJzogWzAsMTIyLDI1NV0sXHJcbiAgJ21hZ2VudGEnOiBbMjU1LDAsMjU1XSxcclxuICAnZGVmYXVsdCc6IFsyNTUsMjU1LDI1NV1cclxufTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZ2V0Q29sb3IoY29sb3JOYW1lLCBhbHBoYSkge1xyXG4gIHZhciBjb2xvcjtcclxuICBpZiAoY29sb3JOYW1lIGluIGNvbG9ycykge1xyXG4gICAgY29sb3IgPSBjb2xvcnNbY29sb3JOYW1lXTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29sb3IgPSBjb2xvcnMuZGVmYXVsdDtcclxuICB9XHJcbiAgaWYgKGFscGhhKSB7XHJcbiAgICByZXR1cm4gY29sb3IuY29uY2F0KGFscGhhKTtcclxuICB9XHJcbiAgcmV0dXJuIGNvbG9yO1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBtZWFzdXJlID0ge1xyXG4gIGxpbmVzdHJpbmc6IFtcclxuICAgIHtcclxuICAgICAgJ2dlb21ldHJ5JzogJ2VuZFBvaW50JyxcclxuICAgICAgJ2NpcmNsZSc6IHtcclxuICAgICAgICBmaWxsOiB7XHJcbiAgICAgICAgICBjb2xvcjogWzAsIDE1MywgMjU1LCAxXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3Ryb2tlOiB7XHJcbiAgICAgICAgICBjb2xvcjogWzAsIDE1MywgMjU1LCAxXSxcclxuICAgICAgICAgIHdpZHRoOiAxXHJcbiAgICAgICAgfSxcclxuICAgICAgICByYWRpdXM6IDNcclxuICAgICAgfSxcclxuICAgICAgJ3RleHQnOiB7XHJcbiAgICAgICAgZm9udDogJ2JvbGQgMTNweCBcIkhlbHZldGljYSBOZXVlXCIsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYnLFxyXG4gICAgICAgIHRleHRCYXNlbGluZTogJ2JvdHRvbScsXHJcbiAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICBvZmZzZXRZOiAtNCxcclxuICAgICAgICBmaWxsOiB7Y29sb3I6IFswLCAxNTMsIDI1NSwgMV19LFxyXG4gICAgICAgIHN0cm9rZToge2NvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMC44XSwgd2lkdGg6IDR9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgY29sb3I6IFswLCAxNTMsIDI1NSwgMV0sXHJcbiAgICAgICAgd2lkdGg6IDJcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF0sXHJcbiAgcG9seWdvbjogW1xyXG4gICAge1xyXG4gICAgICAnZmlsbCc6IHtcclxuICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDAuNF1cclxuICAgICAgfSxcclxuICAgICAgJ3N0cm9rZSc6IHtcclxuICAgICAgICBjb2xvcjogWzAsIDE1MywgMjU1LCAxXSxcclxuICAgICAgICB3aWR0aDogMlxyXG4gICAgICB9LFxyXG4gICAgICAndGV4dCc6IHtcclxuICAgICAgICBmb250OiAnYm9sZCAxM3B4IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZicsXHJcbiAgICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJyxcclxuICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgIGZpbGw6IHtjb2xvcjogWzAsIDE1MywgMjU1LCAxXX0sXHJcbiAgICAgICAgc3Ryb2tlOiB7Y29sb3I6IFsyNTUsIDI1NSwgMjU1LCAwLjhdLCB3aWR0aDogNH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF0sXHJcbiAgaW50ZXJhY3Rpb246IFtcclxuICAgIHtcclxuICAgICAgJ2ZpbGwnOiB7XHJcbiAgICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAwLjJdXHJcbiAgICAgIH0sXHJcbiAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgJ2NvbG9yJzogWzAsIDAsIDAsIDAuNV0sXHJcbiAgICAgICAgJ2xpbmVEYXNoJzogWzEwLCAxMF0sXHJcbiAgICAgICAgJ3dpZHRoJzogMlxyXG4gICAgICB9LFxyXG4gICAgICAnY2lyY2xlJzoge1xyXG4gICAgICAgICdyYWRpdXMnOiA1LFxyXG4gICAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgICAnY29sb3InOiBbMCwgMCwgMCwgMC43XVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ2ZpbGwnOiB7XHJcbiAgICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDAuMl1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBdXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1lYXN1cmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHBpbiA9IFtcclxuICAgIHtcclxuICAgICAgJ2ljb24nOiB7XHJcbiAgICAgICAgICBhbmNob3I6IFswLjUsIDMyXSxcclxuICAgICAgICAgIGFuY2hvclhVbml0czogJ2ZyYWN0aW9uJyxcclxuICAgICAgICAgIGFuY2hvcllVbml0czogJ3BpeGVscycsXHJcbiAgICAgICAgICBzcmM6ICdpbWcvcG5nL2Ryb3BfYmx1ZS5wbmcnXHJcbiAgICAgIH1cclxuICAgIH1cclxuXTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcGluO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBkZWZhdWx0U3R5bGUgPSByZXF1aXJlKCcuL3N0eWxlZnVuY3Rpb25zL2RlZmF1bHQnKTtcclxuXHJcbnZhciBjdXN0b21TdHlsZXMgPSB7XHJcbiAgZGVmYXVsdDogZGVmYXVsdFN0eWxlXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0eWxlRnVuY3Rpb25zKGN1c3RvbVN0eWxlLCBwYXJhbXMpIHtcclxuICBpZiAoY3VzdG9tU3R5bGUgaW4gY3VzdG9tU3R5bGVzKSB7XHJcbiAgICByZXR1cm4gY3VzdG9tU3R5bGVzW2N1c3RvbVN0eWxlXShwYXJhbXMpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gY3VzdG9tU3R5bGVzLmRlZmF1bHQocGFyYW1zKTtcclxuICB9XHJcbn07XHJcbiIsInZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyIGdldENvbG9yID0gcmVxdWlyZSgnLi4vZ2V0Y29sb3InKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZGVmYXVsdFN0eWxlKHBhcmFtcykge1xyXG4gIHZhciBmaWxsID0gbmV3IG9sLnN0eWxlLkZpbGwoe1xyXG4gICAgY29sb3I6ICcnXHJcbiAgfSk7XHJcbiAgdmFyIHN0cm9rZSA9IG5ldyBvbC5zdHlsZS5TdHJva2Uoe1xyXG4gICAgY29sb3I6ICcnLFxyXG4gICAgd2lkdGg6IDAuMSxcclxuICAgIGxpbmVDYXA6ICdzcXVhcmUnLFxyXG4gICAgbGluZUpvaW46ICdyb3VuZCdcclxuICB9KTtcclxuICB2YXIgbm9TdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcclxuICAgIGNvbG9yOiAnJyxcclxuICAgIHdpZHRoOiAwLjBcclxuICB9KTtcclxuICB2YXIgb3ZlcmxheWVkU3Ryb2tlID0gbmV3IG9sLnN0eWxlLlN0cm9rZSh7XHJcbiAgICBjb2xvcjogJycsXHJcbiAgICB3aWR0aDogMC4xLFxyXG4gICAgbGluZUNhcDogJ3NxdWFyZScsXHJcbiAgICBsaW5lSm9pbjogJ3JvdW5kJ1xyXG4gIH0pO1xyXG4gIHZhciBkYXNoZWRTdHJva2UgPSBuZXcgb2wuc3R5bGUuU3Ryb2tlKHtcclxuICAgIGNvbG9yOiAnJyxcclxuICAgIHdpZHRoOiAxLFxyXG4gICAgbGluZURhc2g6IFsxLCAyXVxyXG4gIH0pO1xyXG4gIHZhciBwb2x5Z29uID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgIGZpbGw6IGZpbGwsXHJcbiAgICB6SW5kZXg6IDFcclxuICB9KTtcclxuICB2YXIgc3Ryb2tlZFBvbHlnb24gPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgZmlsbDogZmlsbCxcclxuICAgIHN0cm9rZTogc3Ryb2tlLFxyXG4gICAgekluZGV4OiAyXHJcbiAgfSk7XHJcbiAgdmFyIGRhc2hlZFBvbHlnb24gPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgZmlsbDogZmlsbCxcclxuICAgIHN0cm9rZTogZGFzaGVkU3Ryb2tlLFxyXG4gICAgekluZGV4OiAyXHJcbiAgfSk7XHJcbiAgdmFyIGxpbmUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgc3Ryb2tlOiBzdHJva2UsXHJcbiAgICB6SW5kZXg6IDEwXHJcbiAgfSk7XHJcbiAgdmFyIG92ZXJsYXllZExpbmUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgc3Ryb2tlOiBvdmVybGF5ZWRTdHJva2UsXHJcbiAgICB6SW5kZXg6IDExXHJcbiAgfSk7XHJcbiAgdmFyIGRhc2hlZExpbmUgPSBuZXcgb2wuc3R5bGUuU3R5bGUoe1xyXG4gICAgc3Ryb2tlOiBkYXNoZWRTdHJva2UsXHJcbiAgICB6SW5kZXg6IDEyXHJcbiAgfSk7XHJcbiAgdmFyIHBvaW50ID0gbmV3IG9sLnN0eWxlLlN0eWxlKHtcclxuICAgIGltYWdlOiBuZXcgb2wuc3R5bGUuQ2lyY2xlKHtcclxuICAgICAgcmFkaXVzOiA1LFxyXG4gICAgICBmaWxsOiBmaWxsLFxyXG4gICAgICBzdHJva2U6IHN0cm9rZVxyXG4gICAgfSksXHJcbiAgICB6SW5kZXg6IDUwXHJcbiAgfSk7XHJcbiAgdmFyIHN0eWxlcyA9IFtdO1xyXG5cclxuICByZXR1cm4gZnVuY3Rpb24oZmVhdHVyZSwgcmVzb2x1dGlvbikge1xyXG4gICAgcG9seWdvbi5zZXRaSW5kZXgoMSk7XHJcbiAgICBsaW5lLnNldFpJbmRleCgxMCk7XHJcbiAgICB2YXIgbGVuZ3RoID0gMDtcclxuICAgIHZhciBnZW9tID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKTtcclxuICAgIHN3aXRjaCAoZ2VvbSkge1xyXG4gICAgICBjYXNlICdQb2x5Z29uJzpcclxuICAgICAgICBzdHJva2Uuc2V0Q29sb3IoZ2V0Q29sb3IoJ2JsdWUnKSk7XHJcbiAgICAgICAgc3Ryb2tlLnNldFdpZHRoKDEpO1xyXG4gICAgICAgIGZpbGwuc2V0Q29sb3IoZ2V0Q29sb3IoJ2JsdWUnLCAwLjgpKTtcclxuICAgICAgICBzdHlsZXNbbGVuZ3RoKytdID0gc3Ryb2tlZFBvbHlnb247XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ011bHRpUG9seWdvbic6XHJcbiAgICAgICAgc3Ryb2tlLnNldENvbG9yKGdldENvbG9yKCdibHVlJykpO1xyXG4gICAgICAgIHN0cm9rZS5zZXRXaWR0aCgxKTtcclxuICAgICAgICBmaWxsLnNldENvbG9yKGdldENvbG9yKCdibHVlJywgMC44KSk7XHJcbiAgICAgICAgc3R5bGVzW2xlbmd0aCsrXSA9IHN0cm9rZWRQb2x5Z29uO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdMaW5lU3RyaW5nJzpcclxuICAgICAgICBzdHJva2Uuc2V0Q29sb3IoZ2V0Q29sb3IoJ3JlZCcpKTtcclxuICAgICAgICBzdHJva2Uuc2V0V2lkdGgoMSk7XHJcbiAgICAgICAgc3R5bGVzW2xlbmd0aCsrXSA9IGxpbmU7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgJ011bHRpTGluZVN0cmluZyc6XHJcbiAgICAgICAgc3Ryb2tlLnNldENvbG9yKGdldENvbG9yKCdyZWQnKSk7XHJcbiAgICAgICAgc3Ryb2tlLnNldFdpZHRoKDEpO1xyXG4gICAgICAgIHN0eWxlc1tsZW5ndGgrK10gPSBsaW5lO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdQb2ludCc6XHJcbiAgICAgICAgc3Ryb2tlLnNldENvbG9yKGdldENvbG9yKCd5ZWxsb3cnKSk7XHJcbiAgICAgICAgc3Ryb2tlLnNldFdpZHRoKDEpO1xyXG4gICAgICAgIGZpbGwuc2V0Q29sb3IoZ2V0Q29sb3IoJ3llbGxvdycsIDAuOCkpO1xyXG4gICAgICAgIHN0eWxlc1tsZW5ndGgrK10gPSBwb2ludDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAnTXVsdGlQb2ludCc6XHJcbiAgICAgICAgc3Ryb2tlLnNldENvbG9yKGdldENvbG9yKCd5ZWxsb3cnKSk7XHJcbiAgICAgICAgc3Ryb2tlLnNldFdpZHRoKDEpO1xyXG4gICAgICAgIGZpbGwuc2V0Q29sb3IoZ2V0Q29sb3IoJ3llbGxvdycsIDAuOCkpO1xyXG4gICAgICAgIHN0eWxlc1tsZW5ndGgrK10gPSBwb2ludDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICBzdHJva2Uuc2V0Q29sb3IoZ2V0Q29sb3IoJ2JsdWUnKSk7XHJcbiAgICAgICAgc3Ryb2tlLnNldFdpZHRoKDEpO1xyXG4gICAgICAgIGZpbGwuc2V0Q29sb3IoZ2V0Q29sb3IoJ2JsdWUnLCAwLjgpKTtcclxuICAgICAgICBzdHlsZXNbbGVuZ3RoKytdID0gc3Ryb2tlZFBvbHlnb247XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcbiAgICBzdHlsZXMubGVuZ3RoID0gbGVuZ3RoO1xyXG4gICAgcmV0dXJuIHN0eWxlcztcclxuICB9O1xyXG59O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBwaW4gPSByZXF1aXJlKCcuL3BpbicpO1xyXG52YXIgbWVhc3VyZSA9IHJlcXVpcmUoJy4vbWVhc3VyZScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgdmFyIHN0eWxlVHlwZXMgPSB7fTtcclxuXHJcbiAgc3R5bGVUeXBlcy5waW4gPSBwaW47XHJcbiAgc3R5bGVUeXBlcy5tZWFzdXJlID0gbWVhc3VyZTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdldFN0eWxlOiBmdW5jdGlvbiBnZXRTdHlsZSh0eXBlKSB7XHJcbiAgICAgIGlmKHR5cGUpIHtcclxuICAgICAgICByZXR1cm4gc3R5bGVUeXBlc1t0eXBlXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0eXBlICsgJyBpcyBub3QgYSBkZWZhdWx0IHN0eWxlJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0oKTtcclxuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnNDb21waWxlciA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKHtcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIjxkaXYgaWQ9XFxcIm8tZWRpdG9yLXRvb2xiYXJcXFwiIGNsYXNzPVxcXCJvLWVkaXRvci10b29sYmFyIG8tdG9vbGJhciBvLXRvb2xiYXItaG9yaXpvbnRhbCBvLXBhZGRpbmctaG9yaXpvbnRhbC04IG8tcm91bmRlZC10b3Agby1oaWRkZW5cXFwiPlxcclxcbiAgICA8ZGl2IGlkPVxcXCJvLWVkaXRvci10b29sYmFyLWRyYXd0b29sc1xcXCIgY2xhc3M9XFxcIm8tdG9vbGJhci1ob3Jpem9udGFsXFxcIj5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJvLXBvcG92ZXItY29udGFpbmVyXFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gaWQ9XFxcIm8tZWRpdG9yLWRyYXdcXFwiIGNsYXNzPVxcXCJvLWJ1dHRvbi1sZ1xcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBuYW1lPVxcXCJidXR0b25cXFwiPlxcclxcbiAgICAgICAgICA8c3ZnIGNsYXNzPVxcXCJvLWljb24tMjRcXFwiPlxcclxcbiAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVxcXCIjaWNfbW9kZV9lZGl0XzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgICAgICA8L3N2Zz5cXHJcXG4gICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGJ1dHRvbiBpZD1cXFwiby1lZGl0b3ItYXR0cmlidXRlXFxcIiBjbGFzcz1cXFwiby1idXR0b24tbGdcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgbmFtZT1cXFwiYnV0dG9uXFxcIj5cXHJcXG4gICAgICA8c3ZnIGNsYXNzPVxcXCJvLWljb24tMjRcXFwiPlxcclxcbiAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9XFxcIiNpY190aXRsZV8yNHB4XFxcIj48L3VzZT5cXHJcXG4gICAgICA8L3N2Zz5cXHJcXG4gICAgPC9idXR0b24+XFxyXFxuICAgIDxidXR0b24gaWQ9XFxcIm8tZWRpdG9yLWRlbGV0ZVxcXCIgY2xhc3M9XFxcIm8tYnV0dG9uLWxnXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIG5hbWU9XFxcImJ1dHRvblxcXCI+XFxyXFxuICAgICAgPHN2ZyBjbGFzcz1cXFwiby1pY29uLTI0XFxcIj5cXHJcXG4gICAgICAgICAgPHVzZSB4bGluazpocmVmPVxcXCIjaWNfZGVsZXRlXzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgIDwvc3ZnPlxcclxcbiAgICA8L2J1dHRvbj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiby1wb3BvdmVyLWNvbnRhaW5lclxcXCI+XFxyXFxuICAgICAgPGJ1dHRvbiBpZD1cXFwiby1lZGl0b3ItbGF5ZXJzXFxcIiBjbGFzcz1cXFwiby1idXR0b24tbGdcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgbmFtZT1cXFwiYnV0dG9uXFxcIj5cXHJcXG4gICAgICAgIDxzdmcgY2xhc3M9XFxcIm8taWNvbi0yNFxcXCI+XFxyXFxuICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVxcXCIjaWNfbGF5ZXJzXzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgICAgPC9zdmc+XFxyXFxuICAgICAgPC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8YnV0dG9uIGlkPVxcXCJvLWVkaXRvci1zYXZlXFxcIiBjbGFzcz1cXFwiby1idXR0b24tbGcgby1kaXNhYmxlZFxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBuYW1lPVxcXCJidXR0b25cXFwiPlxcclxcbiAgICAgIDxzdmcgY2xhc3M9XFxcIm8taWNvbi0yNFxcXCI+XFxyXFxuICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cXFwiI2ljX3NhdmVfMjRweFxcXCI+PC91c2U+XFxyXFxuICAgICAgPC9zdmc+XFxyXFxuICAgIDwvYnV0dG9uPlxcclxcbiAgICA8YnV0dG9uIGlkPVxcXCJvLWVkaXRvci1jbG9zZVxcXCIgY2xhc3M9XFxcIm8tYnV0dG9uLWxnXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIG5hbWU9XFxcImJ1dHRvblxcXCI+XFxyXFxuICAgICAgICA8c3ZnIGNsYXNzPVxcXCJvLWljb24tMjRcXFwiPlxcclxcbiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cXFwiI2ljX2Nsb3NlXzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgICAgPC9zdmc+XFxyXFxuICAgIDwvYnV0dG9uPlxcclxcbjwvZGl2PlxcclxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGhlbHBlciwgYWxpYXMxPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgIDxsaT48Yj5cIlxuICAgICsgYWxpYXMxKCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMua2V5IHx8IChkYXRhICYmIGRhdGEua2V5KSkgIT0gbnVsbCA/IGhlbHBlciA6IGhlbHBlcnMuaGVscGVyTWlzc2luZyksKHR5cGVvZiBoZWxwZXIgPT09IFwiZnVuY3Rpb25cIiA/IGhlbHBlci5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDoge30se1wibmFtZVwiOlwia2V5XCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIjwvYj4gOiBcIlxuICAgICsgYWxpYXMxKGNvbnRhaW5lci5sYW1iZGEoZGVwdGgwLCBkZXB0aDApKVxuICAgICsgXCI8L2xpPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiB7fSxkZXB0aDAse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKTtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgZGVmYXVsdFRlbXBsYXRlID0gcmVxdWlyZShcIi4vZGVmYXVsdC5oYW5kbGViYXJzXCIpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhdHRyaWJ1dGVzKSB7XHJcbiAgcmV0dXJuIGRlZmF1bHRUZW1wbGF0ZShhdHRyaWJ1dGVzKTtcclxufVxyXG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiPGh0bWw+XFxyXFxuICA8aGVhZD5cXHJcXG4gICAgPGxpbmsgaHJlZj1cXFwiY3NzL3ByaW50LmNzc1xcXCIgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIj5cXHJcXG4gIDwvaGVhZD5cXHJcXG4gIDxib2R5PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJvLXByaW50LWxvZ29cXFwiPjxpbWcgc3JjPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubG9nb1NyYyA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+PC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcIm8tbWFwLWNhbnZhc1xcXCI+PGltZyBzcmM9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5zcmMgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiLz48L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiby1wcmludC1hdHRyaWJ1dGlvblxcXCI+XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmF0dHJpYnV0aW9uIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiPC9kaXY+XFxyXFxuICA8L2JvZHk+XFxyXFxuPC9odG1sPlxcclxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiICAgICAgICA8aW1nIHNyYz1cXFwiXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKGNvbnRhaW5lci5sYW1iZGEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmltZyA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiICAgICAgICA8YSBocmVmPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAudXJsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAudXJsVGV4dCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjwvYT5cXHJcXG5cIjtcbn0sXCI1XCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCIgICAgICAgIDxwPlwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbihjb250YWluZXIubGFtYmRhKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC50ZXh0IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiPC9wPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IHt9O1xuXG4gIHJldHVybiBcIjxkaXYgaWQ9XFxcIm8tbWFwXFxcIiBjbGFzcz1cXFwiXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKGNvbnRhaW5lci5sYW1iZGEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLm1hcENsYXNzIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cXHJcXG4gIDxkaXYgaWQ9XFxcIm8tdG9vbHMtbGVmdFxcXCIgY2xhc3M9XFxcIm8tY29udGFpbmVyLWFic29sdXRlIG8tdG9vbHMtbGVmdFxcXCI+XFxyXFxuICAgIDxkaXYgaWQ9XFxcIm8tdG9vbGJhci1uYXZpZ2F0aW9uXFxcIiBjbGFzcz1cXFwiby10b29sYmFyLXZlcnRpY2FsIG8tdG9vbGJhci1uYXZpZ2F0aW9uXFxcIj48L2Rpdj5cXHJcXG4gICAgPGRpdiBpZD1cXFwiby10b29sYmFyLW1hcHRvb2xzXFxcIiBjbGFzcz1cXFwiby10b29sYmFyLXZlcnRpY2FsIG8tdG9vbGJhci1tYXB0b29sc1xcXCI+PC9kaXY+XFxyXFxuICAgIDxkaXYgaWQ9XFxcIm8tdG9vbGJhci1taXNjXFxcIiBjbGFzcz1cXFwiby10b29sYmFyLXZlcnRpY2FsIG8tdG9vbGJhci1taXNjXFxcIj48L2Rpdj5cXHJcXG4gIDwvZGl2PlxcclxcbiAgPGRpdiBpZD1cXFwiby10b29scy1ib3R0b21cXFwiIGNsYXNzPVxcXCJvLXRvb2xzLWJvdHRvbVxcXCI+PC9kaXY+XFxyXFxuICA8ZGl2IGlkPVxcXCJvLWZvb3RlclxcXCIgY2xhc3M9XFxcIm8tZm9vdGVyXFxcIj5cXHJcXG4gICAgPGRpdiBpZD1cXFwiby1jb25zb2xlXFxcIiBjbGFzcz1cXFwiby1mb290ZXItbGVmdFxcXCI+Jm5ic3A7PC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcIm8tZm9vdGVyLW1pZGRsZVxcXCI+XFxyXFxuICAgICAgPGRpdiBjbGFzcz1cXFwiby1mb290ZXItbWlkZGxlLWNvbnRlbnRcXFwiPlxcclxcblwiXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAuaW1nIDogZGVwdGgwKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLnVybCA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMywgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC50ZXh0IDogZGVwdGgwKSx7XCJuYW1lXCI6XCJpZlwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSg1LCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKVxuICAgICsgXCIgICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcIm8tZm9vdGVyLXJpZ2h0XFxcIj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuPC9kaXY+XFxyXFxuXCI7XG59LFwidXNlRGF0YVwiOnRydWV9KTtcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gICAgY3JlYXRlQnV0dG9uOiBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHRvb2x0aXAgPScnO1xyXG4gICAgICAgIHZhciB0ZXh0ID0nJztcclxuICAgICAgICB2YXIgY2xzID0gb3B0aW9ucy5jbHMgfHwgJyc7XHJcbiAgICAgICAgdmFyIGljb25DbHMgPSBvcHRpb25zLmljb25DbHMgfHwgJyc7XHJcbiAgICAgICAgdmFyIHBsYWNlbWVudCA9IG9wdGlvbnMudG9vbHRpcFBsYWNlbWVudCB8fCAnZWFzdCc7XHJcbiAgICAgICAgaWYob3B0aW9ucy50ZXh0KSB7XHJcbiAgICAgICAgICAgIHRleHQgPSAnPHNwYW4gY2xhc3M9XCJvLWJ1dHRvbi10ZXh0XCI+JyArIG9wdGlvbnMudGV4dCArICc8L3NwYW4+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYob3B0aW9ucy50b29sdGlwVGV4dCkge1xyXG4gICAgICAgICAgICB0b29sdGlwID0gJzxzcGFuIGRhdGEtdG9vbHRpcD1cIicgKyBvcHRpb25zLnRvb2x0aXBUZXh0ICsgJ1wiIGRhdGEtcGxhY2VtZW50PVwiJyArIHBsYWNlbWVudCArICdcIj48L3NwYW4+JztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGVsID0gJzxkaXYgaWQ9XCInICsgb3B0aW9ucy5pZCArICdcIiBjbGFzcz1cIm8tYnV0dG9uLWNvbnRhaW5lciBvLXRvb2x0aXBcIj4nICtcclxuICAgICAgICAgICAgICAgICAnPGJ1dHRvbiBjbGFzcz1cIm8tYnV0dG9uICcgKyBjbHMgKyAnXCI+JyArIHRleHQgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiJyArIGljb25DbHMgKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8dXNlIHhsaW5rOmhyZWY9XCInICsgb3B0aW9ucy5zcmMgKyAnXCI+PC91c2U+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICc8L2J1dHRvbj4nICtcclxuICAgICAgICAgICAgICAgICB0b29sdGlwICtcclxuICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICByZXR1cm4gZWw7XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlTGlzdEJ1dHRvbjogZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgIHZhciBlbCA9ICc8bGk+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCInICsgb3B0aW9ucy5pZCArICctYnV0dG9uXCIgY2xhc3M9XCJvLW1lbnUtYnV0dG9uXCInICsgJz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWJ1dHRvbi1pY29uXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCInICsgb3B0aW9ucy5pY29uQ2xzICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHVzZSB4bGluazpocmVmPVwiJyArIG9wdGlvbnMuc3JjICsgJ1wiPjwvdXNlPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICc8L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy50ZXh0ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgJzwvbGk+JztcclxuICAgICAgICByZXR1cm4gZWw7XHJcbiAgICB9LFxyXG4gICAgY3JlYXRlRWxlbWVudDogZnVuY3Rpb24oZWwsIHZhbCwgYXR0cmlidXRlcykge1xyXG4gICAgICAgIHZhciBwcmVmaXggPSAnPCcgKyBlbDtcclxuICAgICAgICB2YXIgc3VmZml4ID0gJzwvJyArIGVsICArICc+JztcclxuICAgICAgICB2YXIgYXR0cmlidXRlTmFtZXMgPSBhdHRyaWJ1dGVzID8gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXR0cmlidXRlcykgOiBbXTtcclxuICAgICAgICB2YXIgYXR0cmlidXRlTGlzdCA9IGF0dHJpYnV0ZU5hbWVzLm1hcChmdW5jdGlvbihuYW1lKSB7XHJcbiAgICAgICAgICAgIHZhciByZXMgPSAnJztcclxuICAgICAgICAgICAgaWYgKG5hbWUgPT09IFwiY2xzXCIpIHtcclxuICAgICAgICAgICAgICAgIHJlcyA9ICcgJyArICdjbGFzcycuY29uY2F0KCc9JywgJ1wiJywgYXR0cmlidXRlc1tuYW1lXSwgJ1wiJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXMgPSAnICcgKyBuYW1lLmNvbmNhdCgnPScsICdcIicsIGF0dHJpYnV0ZXNbbmFtZV0sJ1wiJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICB9KTtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IHByZWZpeC5jb25jYXQoYXR0cmlidXRlTGlzdC5qb2luKCcgJyksICc+JywgdmFsLCBzdWZmaXgpO1xyXG4gICAgICAgIHJldHVybiBlbGVtZW50O1xyXG4gICAgfSxcclxuICAgIGNyZWF0ZVN2ZzogZnVuY3Rpb24ocHJvcHMpIHtcclxuICAgICAgICB2YXIgdXNlID0gdGhpcy5jcmVhdGVFbGVtZW50KCd1c2UnLCAnJywge1xyXG4gICAgICAgICAgICAneGxpbms6aHJlZic6IHByb3BzLmhyZWZcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFbGVtZW50KCdzdmcnLCB1c2UsIHtcclxuICAgICAgICAgICAgY2xzOiBwcm9wcy5jbHNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVsUXVlcnkodGFyZ2V0T2JqLCBvcHRpb25zKSB7XHJcbiAgdmFyIHRhcmdldCA9ICcuby1tYXAnO1xyXG4gIHZhciBwcmVmaXggPSBvcHRpb25zLmJyZWFrUG9pbnRzUHJlZml4O1xyXG4gIHZhciBicmVha1BvaW50cyA9IG9wdGlvbnMuYnJlYWtQb2ludHM7XHJcbiAgdmFyIGJyZWFrTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhicmVha1BvaW50cyk7XHJcbiAgdmFyIGJyZWFrQ2xzID0gYXJyVG9PYmooYnJlYWtOYW1lcywgcHJlZml4KTtcclxuICB2YXIgYnJlYWtDbHNOYW1lcyA9IGJyZWFrTmFtZXMubWFwKGZ1bmN0aW9uKGJyZWFrU2l6ZSkge1xyXG4gICAgcmV0dXJuIGJyZWFrQ2xzW2JyZWFrU2l6ZV07XHJcbiAgfSk7XHJcblxyXG4gICQod2luZG93KS5vbigncmVzaXplJywgb25TaXplQ2hhbmdlKTtcclxuICBvblNpemVDaGFuZ2UoKTtcclxuXHJcbiAgZnVuY3Rpb24gb25TaXplQ2hhbmdlKCkge1xyXG4gICAgdmFyIG1hcFNpemUgPSB0YXJnZXRPYmouZ2V0U2l6ZSgpO1xyXG4gICAgdmFyIHZhbCA9IGJyZWFrTmFtZXMucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cnIpIHtcclxuICAgICAgdmFyIGhlaWdodCA9IGJyZWFrUG9pbnRzW2N1cnJdWzFdO1xyXG4gICAgICB2YXIgd2lkdGggPSBicmVha1BvaW50c1tjdXJyXVswXTtcclxuICAgICAgaWYgKG1hcFNpemVbMF0gPD0gd2lkdGggfHwgbWFwU2l6ZVsxXSA8PSBoZWlnaHQpIHtcclxuICAgICAgICBpZiAoIXByZXYpIHtcclxuICAgICAgICAgIHJldHVybiBjdXJyO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gcHJldjtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICAgIH1cclxuICAgIH0sIHVuZGVmaW5lZCk7XHJcbiAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoYnJlYWtDbHNOYW1lcy5qb2luKCcgJykpO1xyXG4gICAgaWYgKHZhbCkge1xyXG4gICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoYnJlYWtDbHNbdmFsXSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhcnJUb09iaihhcnIsIHN0YXJ0KSB7XHJcbiAgICB2YXIgb2JqID0ge307XHJcbiAgICB2YXIgdmFsID0gc3RhcnQ7XHJcbiAgICBhcnIuc2xpY2UoKS5yZXZlcnNlKCkuZm9yRWFjaChmdW5jdGlvbihjdXJyKSB7XHJcbiAgICAgIHZhbCArPSAnLScgKyBjdXJyO1xyXG4gICAgICBvYmpbY3Vycl0gPSB2YWw7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxuXHJcbi8qKlxyXG5GdW5jdGlvbiB0byBnZW5lcmF0ZSBhIHVuaXF1ZSBpZC5cclxuRnJvbSBCcmlndXkzNyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzEwNTAzNC9jcmVhdGUtZ3VpZC11dWlkLWluLWphdmFzY3JpcHRcclxuKi9cclxudmFyIGdlbmVyYXRlVVVJRCA9IGZ1bmN0aW9uIGdlbmVyYXRlVVVJRCgpIHtcclxuICB2YXIgZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gIGlmICh3aW5kb3cucGVyZm9ybWFuY2UgJiYgdHlwZW9mIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3cgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgZCArPSBwZXJmb3JtYW5jZS5ub3coKTsgLy91c2UgaGlnaC1wcmVjaXNpb24gdGltZXIgaWYgYXZhaWxhYmxlXHJcbiAgfVxyXG4gIHZhciB1dWlkID0gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbihjKSB7XHJcbiAgICB2YXIgciA9IChkICsgTWF0aC5yYW5kb20oKSAqIDE2KSAlIDE2IHwgMDtcclxuICAgIGQgPSBNYXRoLmZsb29yKGQgLyAxNik7XHJcbiAgICByZXR1cm4gKGMgPT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KSkudG9TdHJpbmcoMTYpO1xyXG4gIH0pO1xyXG4gIHJldHVybiB1dWlkO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdlbmVyYXRlVVVJRDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldGltYWdlb3JpZW50YXRpb24oZmlsZSwgY2FsbGJhY2spIHtcclxuICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcclxuICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oZSkge1xyXG4gICAgdmFyIHZpZXcgPSBuZXcgRGF0YVZpZXcoZS50YXJnZXQucmVzdWx0KTtcclxuICAgIHZhciBsZW5ndGg7XHJcbiAgICB2YXIgb2Zmc2V0O1xyXG4gICAgdmFyIG1hcmtlcjtcclxuICAgIHZhciBsaXR0bGU7XHJcbiAgICB2YXIgdGFncztcclxuXHJcbiAgICBpZiAodmlldy5nZXRVaW50MTYoMCwgZmFsc2UpICE9IDB4RkZEOCkge1xyXG4gICAgICByZXR1cm4gY2FsbGJhY2soLTIpO1xyXG4gICAgfVxyXG5cclxuICAgIGxlbmd0aCA9IHZpZXcuYnl0ZUxlbmd0aDtcclxuICAgIG9mZnNldCA9IDI7XHJcbiAgICB3aGlsZSAob2Zmc2V0IDwgbGVuZ3RoKSB7XHJcbiAgICAgIG1hcmtlciA9IHZpZXcuZ2V0VWludDE2KG9mZnNldCwgZmFsc2UpO1xyXG4gICAgICBvZmZzZXQgKz0gMjtcclxuICAgICAgaWYgKG1hcmtlciA9PSAweEZGRTEpIHtcclxuICAgICAgICBpZiAodmlldy5nZXRVaW50MzIob2Zmc2V0ICs9IDIsIGZhbHNlKSAhPSAweDQ1Nzg2OTY2KSB7XHJcbiAgICAgICAgICByZXR1cm4gY2FsbGJhY2soLTEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGl0dGxlID0gdmlldy5nZXRVaW50MTYob2Zmc2V0ICs9IDYsIGZhbHNlKSA9PSAweDQ5NDk7XHJcbiAgICAgICAgb2Zmc2V0ICs9IHZpZXcuZ2V0VWludDMyKG9mZnNldCArIDQsIGxpdHRsZSk7XHJcbiAgICAgICAgdGFncyA9IHZpZXcuZ2V0VWludDE2KG9mZnNldCwgbGl0dGxlKTtcclxuICAgICAgICBvZmZzZXQgKz0gMjtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhZ3M7IGkrKykge1xyXG4gICAgICAgICAgaWYgKHZpZXcuZ2V0VWludDE2KG9mZnNldCArIChpICogMTIpLCBsaXR0bGUpID09IDB4MDExMikge1xyXG4gICAgICAgICAgICByZXR1cm4gY2FsbGJhY2sodmlldy5nZXRVaW50MTYob2Zmc2V0ICsgKGkgKiAxMikgKyA4LCBsaXR0bGUpKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICB9IGVsc2UgaWYgKChtYXJrZXIgJiAweEZGMDApICE9IDB4RkYwMCkge1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9mZnNldCArPSB2aWV3LmdldFVpbnQxNihvZmZzZXQsIGZhbHNlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBjYWxsYmFjaygtMSk7XHJcbiAgfTtcclxuICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoZmlsZSk7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGdldFVybCgpIHtcclxuICAgIHJldHVybiBsb2NhdGlvbi5wcm90b2NvbCArJy8vJytcclxuICAgICAgICAgICAgbG9jYXRpb24uaG9zdG5hbWUgK1xyXG4gICAgICAgICAgICAobG9jYXRpb24ucG9ydD9cIjpcIitsb2NhdGlvbi5wb3J0OlwiXCIpICtcclxuICAgICAgICAgICAgbG9jYXRpb24ucGF0aG5hbWU7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGltYWdlcmVzaXplcihpbWFnZURhdGEsIG9wdF9vcHRpb25zLCBvcmllbnRhdGlvbiwgY2FsbGJhY2spIHtcclxuICB2YXIgZmlsZVR5cGUgPSBpbWFnZURhdGEuc3BsaXQoJzsnKVswXS5zcGxpdCgnLycpWzFdO1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnM7XHJcbiAgdmFyIGltYWdlID0gbmV3IEltYWdlKCk7XHJcblxyXG4gIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uKGltYWdlRXZlbnQpIHtcclxuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgIHZhciBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcbiAgICB2YXIgbWF4X3NpemUgPSBvcHRpb25zLm1heFNpemUgfHwgNjAwO1xyXG4gICAgdmFyIHdpZHRoID0gaW1hZ2Uud2lkdGg7XHJcbiAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xyXG4gICAgdmFyIHRyYW5zbGF0ZVdpZHRoO1xyXG4gICAgdmFyIHRyYW5zbGF0ZUhlaWdodDtcclxuICAgIHZhciByb3RhdGlvbjtcclxuICAgIHZhciBkYXRhVXJsO1xyXG5cclxuICAgIGlmICh3aWR0aCA+IGhlaWdodCkge1xyXG4gICAgICBpZiAod2lkdGggPiBtYXhfc2l6ZSkge1xyXG4gICAgICAgIGhlaWdodCAqPSBtYXhfc2l6ZSAvIHdpZHRoO1xyXG4gICAgICAgIHdpZHRoID0gbWF4X3NpemU7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChoZWlnaHQgPiBtYXhfc2l6ZSkge1xyXG4gICAgICAgIHdpZHRoICo9IG1heF9zaXplIC8gaGVpZ2h0O1xyXG4gICAgICAgIGhlaWdodCA9IG1heF9zaXplO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XHJcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG5cclxuICAgIGlmIChvcmllbnRhdGlvbiUyID09PSAwKSB7XHJcbiAgICAgIGNhbnZhcy53aWR0aCA9IGhlaWdodDtcclxuICAgICAgY2FudmFzLmhlaWdodCA9IHdpZHRoO1xyXG4gICAgfVxyXG5cclxuICAgIHN3aXRjaCAob3JpZW50YXRpb24pIHtcclxuICAgICAgY2FzZSAxOlxyXG4gICAgICAgIHRyYW5zbGF0ZVdpZHRoID0gMDtcclxuICAgICAgICB0cmFuc2xhdGVIZWlnaHQgPSAwO1xyXG4gICAgICAgIHJvdGF0aW9uID0gMDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAzOlxyXG4gICAgICAgIHRyYW5zbGF0ZVdpZHRoID0gY2FudmFzLndpZHRoO1xyXG4gICAgICAgIHRyYW5zbGF0ZUhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgcm90YXRpb24gPSAxODA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgNjpcclxuICAgICAgICB0cmFuc2xhdGVXaWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgICAgICB0cmFuc2xhdGVIZWlnaHQgPSAwO1xyXG4gICAgICAgIHJvdGF0aW9uID0gOTA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgODpcclxuICAgICAgICB0cmFuc2xhdGVXaWR0aCA9IDA7XHJcbiAgICAgICAgdHJhbnNsYXRlSGVpZ2h0ID0gY2FudmFzLmhlaWdodDtcclxuICAgICAgICByb3RhdGlvbiA9IDI3MDtcclxuICAgICAgICBicmVhaztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICB0cmFuc2xhdGVXaWR0aCA9IDA7XHJcbiAgICAgICAgdHJhbnNsYXRlSGVpZ2h0ID0gMDtcclxuICAgICAgICByb3RhdGlvbiA9IDA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgY29udGV4dC50cmFuc2xhdGUodHJhbnNsYXRlV2lkdGgsdHJhbnNsYXRlSGVpZ2h0KTtcclxuICAgIGNvbnRleHQucm90YXRlKHJvdGF0aW9uKk1hdGguUEkvMTgwKTtcclxuICAgIGNvbnRleHQuZHJhd0ltYWdlKGltYWdlLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcclxuICAgIGRhdGFVcmwgPSBjYW52YXMudG9EYXRhVVJMKCdpbWFnZS8nICsgZmlsZVR5cGUpO1xyXG4gICAgY2FsbGJhY2soZGF0YVVybCk7XHJcbiAgfVxyXG5cclxuICBpbWFnZS5zcmMgPSBpbWFnZURhdGE7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc0VtYmVkZGVkKHRhcmdldCkge1xyXG4gIGlmICh3aW5kb3cudG9wICE9PSB3aW5kb3cuc2VsZiB8fCAkKHRhcmdldCkucGFyZW50KCkuaXMoJ0JPRFknKSA9PT0gZmFsc2UpIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpc1VybChzKSB7XHJcbiAgIHZhciByZWdleHAgPSBuZXcgUmVnRXhwKCdeKD86W2Etel0rOik/Ly8nLCAnaScpO1xyXG4gICByZXR1cm4gcmVnZXhwLnRlc3Qocyk7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG51bWJlckZvcm1hdHRlcihudW1iZXJUb0Zvcm1hdCkge1xyXG4gIHZhciBuciA9IG51bWJlclRvRm9ybWF0O1xyXG4gIHZhciBsZW5ndGggPSBuci50b1N0cmluZygpLmxlbmd0aDtcclxuICBpZiAobGVuZ3RoID4gMykge1xyXG4gICAgdmFyIGRlbGltaXRlciA9ICcgJzsgLy93aGl0ZSBzcGFjZSBhcyBkZWxpbWl0ZXJcclxuXHJcbiAgICAvL1JvdW5kIGJ5IGZhY3RvclxyXG4gICAgaWYgKG5yID49IDEwMDApIHtcclxuICAgICAgdmFyIGZhY3RvciA9IE1hdGgucG93KDEwLCBsZW5ndGgpIC8gMTAwMDA7XHJcbiAgICAgIG5yID0gTWF0aC5yb3VuZChuciAvIGZhY3RvcikgKiBmYWN0b3I7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG5yU3RyID0gbnIudG9TdHJpbmcoKTtcclxuICAgIHZhciBhID0gW107XHJcbiAgICB3aGlsZSAobnJTdHIubGVuZ3RoID4gMykge1xyXG4gICAgICB2YXIgbiA9IG5yU3RyLnN1YnN0cihuclN0ci5sZW5ndGggLSAzKTtcclxuICAgICAgYS51bnNoaWZ0KG4pO1xyXG4gICAgICBuclN0ciA9IG5yU3RyLnN1YnN0cigwLCBuclN0ci5sZW5ndGggLSAzKTtcclxuICAgIH1cclxuICAgIGlmIChuclN0ci5sZW5ndGggPiAwKSB7XHJcbiAgICAgIGEudW5zaGlmdChuclN0cik7XHJcbiAgICB9XHJcbiAgICBuclN0ciA9IGEuam9pbihkZWxpbWl0ZXIpO1xyXG4gICAgcmV0dXJuIG5yU3RyO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gbnIudG9TdHJpbmcoKTtcclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJlbmRlckVycm9yKHR5cGUsIGVsKSB7XHJcbiAgaWYgKHR5cGUgPT09ICdicm93c2VyJykge1xyXG4gICAgcmVuZGVyQnJvd3NlckVycm9yKGVsKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckJyb3dzZXJFcnJvcihlbCkge1xyXG4gICAgdmFyIG1lc3NhZ2UgPSAnRGV0IHNlciB1dCBzb20gYXR0IGR1IGFudsOkbmRlciBlbiBmw7Zyw6VsZHJhZCB3ZWJibMOkc2FyZS4gUHJvdmEgYXR0IHVwcGdyYWRlcmEgZGluIHdlYmJsw6RzYXJlIGbDtnIgYXR0IHZpc2Ega2FydGFuLidcclxuICAgIHZhciBlbE1lc3NhZ2UgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCBtZXNzYWdlLCB7XHJcbiAgICAgIGNsczogJ28tbm8tbWFwLW1lc3NhZ2UnXHJcbiAgICB9KTtcclxuICAgIHZhciBjb250YWluZXIgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCBlbE1lc3NhZ2UsIHtcclxuICAgICAgY2xzOiAnby1uby1tYXAnXHJcbiAgICB9KTtcclxuICAgICQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICQoZWwpLmFwcGVuZChjb250YWluZXIpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIFJlcGxhY2VyID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gIHZhciBzdGFydCA9IHVuZGVmaW5lZDtcclxuICB2YXIgZW5kID0gdW5kZWZpbmVkO1xyXG4gIHZhciBoZWxwZXIgPSB1bmRlZmluZWQ7XHJcbiAgdmFyIGhlbHBlck5TID0gdW5kZWZpbmVkO1xyXG4gIHZhciBoZWxwZXJBcmcgPSB1bmRlZmluZWQ7XHJcblxyXG4gIGZ1bmN0aW9uIHJlcGxhY2UobmFtZSwgb2JqLCBvcHRpb25zKSB7XHJcbiAgICAgIHN0YXJ0ID0gb3B0aW9ucy5zdGFydCB8fCAne3snO1xyXG4gICAgICBlbmQgPSBvcHRpb25zLmVuZCB8fCAnfX0nO1xyXG4gICAgICBoZWxwZXIgPSBvcHRpb25zLmhlbHBlciB8fCB7fTtcclxuICAgICAgaGVscGVyTlMgPSBvcHRpb25zLmhlbHBlck5TIHx8ICdAJztcclxuICAgICAgaGVscGVyQXJnID0gW29wdGlvbnMuaGVscGVyQXJnXSB8fCBbXTtcclxuXHJcbiAgICAgIHZhciByZXN1bHQgPSBzZWFyY2hBbmRSZXBsYWNlKG5hbWUsIG9iaik7XHJcbiAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZWFyY2hBbmRSZXBsYWNlKG5hbWUsIG9iaikge1xyXG4gICAgICB2YXIgcmVnZXggPSBuZXcgUmVnRXhwKHN0YXJ0ICsgJyguKj8pJyArICBlbmQsIFwiZ1wiKTtcclxuICAgICAgdmFyIG1hdGNoZXMgPSByZWdleC5leGVjKG5hbWUpO1xyXG4gICAgICBpZihtYXRjaGVzKSB7XHJcbiAgICAgICAgICB2YXIgdmFsID0gb2JqLmhhc093blByb3BlcnR5KG1hdGNoZXNbMV0pID8gb2JqW21hdGNoZXNbMV1dIDogJyc7XHJcbiAgICAgICAgICBpZiAoIXZhbCkge1xyXG4gICAgICAgICAgICB2YXIgbnNJbmRleCA9IG1hdGNoZXNbMF0uaW5kZXhPZihoZWxwZXJOUyk7XHJcbiAgICAgICAgICAgIGlmIChuc0luZGV4KSB7XHJcbiAgICAgICAgICAgICAgdmFyIGhlbHBlclBhcnRzID0gZ2V0QXJncyhtYXRjaGVzWzFdKTtcclxuICAgICAgICAgICAgICB2YXIgaGVscGVyTmFtZSA9IGhlbHBlclBhcnRzWzFdLnN1YnN0cmluZyhuc0luZGV4IC0gMSk7XHJcbiAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBoZWxwZXJBcmcuY29uY2F0KGhlbHBlclBhcnRzWzBdKTtcclxuICAgICAgICAgICAgICB2YWwgPSBoZWxwZXIuaGFzT3duUHJvcGVydHkoaGVscGVyTmFtZSkgPyBoZWxwZXJbaGVscGVyTmFtZV0uYXBwbHkobnVsbCwgYXJncykudG9TdHJpbmcoKSA6ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gc2VhcmNoQW5kUmVwbGFjZShuYW1lLnJlcGxhY2UobWF0Y2hlc1swXSwgdmFsKSwgb2JqKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRBcmdzKHN0cikge1xyXG4gICAgdmFyIGFyZ3MgPSBzdHIubWF0Y2goL1xcKCguKj8pXFwpLyk7XHJcbiAgICBpZiAoYXJncykge1xyXG4gICAgICByZXR1cm4gW2FyZ3NbMV0uc3BsaXQoJywnKSwgc3RyLnN1YnN0cmluZygwLCBhcmdzLmluZGV4KV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gWycnLHN0cl07XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHRyZXR1cm4ge1xyXG4gIFx0XHRyZXBsYWNlOiBmdW5jdGlvbihuYW1lLCBvYmosIG9wdGlvbnMpIHtcclxuICAgICAgICAgIHZhciBvcHQgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgICAgcmV0dXJuIChyZXBsYWNlKG5hbWUsIG9iaiwgb3B0KSk7XHJcbiAgXHRcdH1cclxuXHR9O1xyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBSZXBsYWNlcigpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciByb3VuZCA9IGZ1bmN0aW9uIHJvdW5kKHZhbHVlLCBkZWNpbWFscykge1xyXG4gIHJldHVybiBOdW1iZXIoTWF0aC5yb3VuZCh2YWx1ZSArICdlJyArIGRlY2ltYWxzKSArICdlLScgKyBkZWNpbWFscyk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcm91bmQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgcmVuZGVyRXJyb3IgPSByZXF1aXJlKCcuL3JlbmRlcmVycm9yJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN1cHBvcnRzKHR5cGUsIGVsKSB7XHJcbiAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLmdldENvbnRleHQ7XHJcbiAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcbiAgaWYgKCEhY2FudmFzICYmICEhcmVxdWVzdEFuaW1hdGlvbkZyYW1lKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmVuZGVyRXJyb3IoJ2Jyb3dzZXInLCBlbCk7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmltVXJsKHVybCkge1xyXG4gIHZhciB0cmltbWVkO1xyXG4gIGlmICh1cmwuc3Vic3RyaW5nKHVybC5sYXN0SW5kZXhPZignLycpKS5pbmRleE9mKCcuaHRtJykgIT09IC0xKSB7XHJcbiAgICB0cmltbWVkID0gdXJsLnN1YnN0cmluZygwLCB1cmwubGFzdEluZGV4T2YoJy8nKSArIDEpO1xyXG4gIH0gZWxzZSBpZiAodXJsLnN1YnN0cih1cmwubGVuZ3RoIC0gMSkgIT09ICcvJykge1xyXG4gICAgdHJpbW1lZCA9IHVybCArICcvJztcclxuICB9IGVsc2Uge1xyXG4gICAgdHJpbW1lZCA9IHVybDtcclxuICB9XHJcbiAgcmV0dXJuIHRyaW1tZWQ7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgdXJscGFyc2VyID0ge307XHJcblxyXG51cmxwYXJzZXIub2JqZWN0aWZ5ID0gZnVuY3Rpb24ob2JqU3RyaW5nLCBvcHRfb3B0aW9ucykge1xyXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICAgIHZhciBkZWxpbWV0ZXIgPSBvcHRpb25zLmRlbGltZXRlciB8fCAnLyc7XHJcbiAgICB2YXIgdG9wbW9zdCA9IG9wdGlvbnMudG9wbW9zdCB8fCAnbmFtZSc7XHJcbiAgICB2YXIgcGFydHMgPSBvYmpTdHJpbmcuc3BsaXQoZGVsaW1ldGVyKTtcclxuICAgIHZhciBvYmogPSB7fTtcclxuICAgIGlmKG9wdGlvbnMudG9wbW9zdCkge1xyXG4gICAgICAgIGlmKHBhcnRzWzBdICA9PT0gJycpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1RvcG1vc3QgdmFsdWUgaXMgbWlzc2luZycpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JqW3RvcG1vc3RdID0gcGFydHNbMF07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYocGFydHMubGVuZ3RoID4gMSkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAxLCBpaSA9IHBhcnRzLmxlbmd0aDsgaSA8IGlpOyBpICs9IDIpIHtcclxuICAgICAgICAgICAgb2JqW3BhcnRzW2ldXSA9IHBhcnRzW2kgKyAxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcbnVybHBhcnNlci5zdHJpbmdpZnkgPSBmdW5jdGlvbihvYmosIG9wdF9vcHRpb25zKSB7XHJcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gICAgdmFyIGRlbGltZXRlciA9IG9wdGlvbnMuZGVsaW1ldGVyIHx8ICcvJztcclxuICAgIHZhciB0b3Btb3N0ID0gb3B0aW9ucy50b3Btb3N0IHx8IHVuZGVmaW5lZDtcclxuICAgIHZhciBvYmpTdHJpbmcgPSB0b3Btb3N0ID8gb2JqW3RvcG1vc3RdIDogJyc7XHJcbiAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYoa2V5ICE9PSB0b3Btb3N0KVxyXG4gICAgICAgIG9ialN0cmluZyArPSBkZWxpbWV0ZXIgKyBrZXkgKyBkZWxpbWV0ZXIgKyBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIHJldHVybiBvYmpTdHJpbmc7XHJcbn1cclxudXJscGFyc2VyLmFyclN0cmluZ2lmeSA9IGZ1bmN0aW9uKGFyciwgb3B0X29wdGlvbnMpIHtcclxuICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICAgdmFyIGRlbGltZXRlciA9IG9wdGlvbnMuZGVsaW1ldGVyIHx8ICcvJztcclxuICAgdmFyIHRvcG1vc3QgPSBvcHRpb25zLnRvcG1vc3QgfHwgJyc7XHJcbiAgIHZhciBhcnJTdHJpbmcgPSB0b3Btb3N0ID8gdG9wbW9zdCArIGRlbGltZXRlciA6ICcnO1xyXG4gICBpZih0eXBlb2YgYXJyWzBdWzBdID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICBhcnJTdHJpbmcgKz0gYXJyLmpvaW4oJywnKTtcclxuICAgfVxyXG4gICBlbHNlIHtcclxuICAgICAgdmFyIG91dGVyID0gYXJyLm1hcChmdW5jdGlvbihpbm5lcikge1xyXG4gICAgICAgICAgdmFyIHJlcyA9IGlubmVyLm1hcChmdW5jdGlvbihpbm5lcnBhcnQpIHtcclxuICAgICAgICAgICAgICByZXR1cm4gaW5uZXJwYXJ0LmpvaW4oJyEnKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpvaW4oJywnKTtcclxuICAgICAgfSk7XHJcbiAgICAgIGFyclN0cmluZyArPSBvdXRlci5qb2luKG9wdGlvbnMuZGVsaW1ldGVyKTtcclxuICAgfVxyXG4gICByZXR1cm4gYXJyU3RyaW5nO1xyXG59XHJcbnVybHBhcnNlci5zdHJBcnJheWlmeSA9IGZ1bmN0aW9uKHN0ciwgb3B0X29wdGlvbnMpIHtcclxuICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICAgdmFyIGRlbGltZXRlciA9IG9wdGlvbnMuZGVsaW1ldGVyIHx8ICcvJztcclxuICAgdmFyIHRvcG1vc3ROYW1lID0gb3B0X29wdGlvbnMudG9wbW9zdE5hbWUgfHwgJ3RvcG1vc3QnO1xyXG4gICB2YXIgYXJyTmFtZSA9IG9wdF9vcHRpb25zLmFyck5hbWUgfHwgJ2Fycic7XHJcbiAgIHZhciB0b3Btb3N0ID0gc3RyLnN1YnN0cmluZygwLCBzdHIuaW5kZXhPZihkZWxpbWV0ZXIpKTtcclxuICAgdmFyIGFyclN0ciA9IHN0ci5zdWJzdHJpbmcoc3RyLmluZGV4T2YoZGVsaW1ldGVyKSArIDEpO1xyXG4gICB2YXIgYXJyID0gYXJyU3RyLnNwbGl0KGRlbGltZXRlcikubWFwKGZ1bmN0aW9uKGVsKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsLnNwbGl0KCchJyk7XHJcbiAgIH0pO1xyXG4gICB2YXIgb2JqID0ge307XHJcbiAgIG9ialt0b3Btb3N0TmFtZV0gPSB0b3Btb3N0O1xyXG4gICBvYmpbYXJyTmFtZV0gPSBhcnI7XHJcbiAgIHJldHVybiBvYmo7XHJcbn1cclxudXJscGFyc2VyLnN0ckludGlmeSA9IGZ1bmN0aW9uKHN0ciwgb3B0X29wdGlvbnMpIHtcclxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgICB2YXIgZGVsaW1pdGVyID0gb3B0aW9ucy5kZWxpbWl0ZXIgfHwgJywnO1xyXG4gICAgdmFyIGFyciA9IHN0ci5zcGxpdChkZWxpbWl0ZXIpO1xyXG4gICAgdmFyIHN0clRvSW50ID0gYXJyLm1hcChmdW5jdGlvbihlbCkge1xyXG4gICAgICAgIHJldHVybiBwYXJzZUludChlbCk7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzdHJUb0ludDtcclxufVxyXG51cmxwYXJzZXIuc3RyQm9vbGVhbiA9IGZ1bmN0aW9uKHN0cikge1xyXG4gICAgaWYoc3RyID09PSBcIjFcIikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZihzdHIgPT09IFwiMFwiKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJTdHJpbmcgaXMgbm90IDEgb3IgMFwiKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxudXJscGFyc2VyLmZvcm1hdFVybCA9IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgdmFyIHVybCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikucmVkdWNlKGZ1bmN0aW9uKHByZXYsIGN1cnJlbnQpIHtcclxuICAgICAgICBjdXJyZW50ID0gcHJldiA/IFwiJlwiICsgY3VycmVudCArIFwiPVwiICsgb2JqW2N1cnJlbnRdIDogY3VycmVudCArIFwiPVwiICsgb2JqW2N1cnJlbnRdO1xyXG4gICAgICAgIHJldHVybiBwcmV2ICsgY3VycmVudDtcclxuICAgIH0sIFwiXCIpO1xyXG4gICAgcmV0dXJuIHVybDtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB1cmxwYXJzZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgaXNVcmwgPSByZXF1aXJlKCcuL2lzdXJsJyk7XHJcblxyXG4vL0NoZWNrcyBpZiBzdHIgaXMgYSB2YWxpZCB1cmwuIElmIG5vdCBhcHBlbmQgc3RyIHRvIGJhc2VVcmxcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB2YWxpZGF0ZVVybChzdHIsIGJhc2VVcmwpIHtcclxuICAgdmFyIHVybCA9IGlzVXJsKHN0cikgPyBzdHIgOiBiYXNlVXJsICsgc3RyO1xyXG4gICByZXR1cm4gdXJsO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi90ZW1wbGF0ZXMvdmlld2VyLmhhbmRsZWJhcnNcIik7XHJcbnZhciBNb2RhbCA9IHJlcXVpcmUoJy4vbW9kYWwnKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG52YXIgaXNVcmwgPSByZXF1aXJlKCcuL3V0aWxzL2lzdXJsJyk7XHJcbnZhciBlbFF1ZXJ5ID0gcmVxdWlyZSgnLi91dGlscy9lbHF1ZXJ5Jyk7XHJcbnZhciBmZWF0dXJlaW5mbyA9IHJlcXVpcmUoJy4vZmVhdHVyZWluZm8nKTtcclxudmFyIG1hcHV0aWxzID0gcmVxdWlyZSgnLi9tYXB1dGlscycpO1xyXG52YXIgc3R5bGUgPSByZXF1aXJlKCcuL3N0eWxlJykoKTtcclxudmFyIGxheWVyQ3JlYXRvciA9IHJlcXVpcmUoJy4vbGF5ZXJjcmVhdG9yJyk7XHJcblxyXG52YXIgbWFwO1xyXG52YXIgdGVtcGxhdGU7XHJcbnZhciBzZXR0aW5ncyA9IHtcclxuICBwcm9qZWN0aW9uOiAnJyxcclxuICBwcm9qZWN0aW9uQ29kZTogJycsXHJcbiAgcHJvamVjdGlvbkV4dGVudDogJycsXHJcbiAgZXh0ZW50OiBbXSxcclxuICBjZW50ZXI6IFswLCAwXSxcclxuICB6b29tOiAwLFxyXG4gIHJlc29sdXRpb25zOiBudWxsLFxyXG4gIHNvdXJjZToge30sXHJcbiAgZ3JvdXA6IFtdLFxyXG4gIGxheWVyczogW10sXHJcbiAgc3R5bGVzOiB7fSxcclxuICBjb250cm9sczogW10sXHJcbiAgZmVhdHVyZUluZm9PdmVybGF5OiB1bmRlZmluZWQsXHJcbiAgZWRpdExheWVyOiBudWxsXHJcbn07XHJcbnZhciB1cmxQYXJhbXM7XHJcbnZhciBwYWdlU2V0dGluZ3M7XHJcbnZhciBwYWdlVGVtcGxhdGUgPSB7fTtcclxuXHJcbmZ1bmN0aW9uIGluaXQoZWwsIG1hcE9wdGlvbnMpIHtcclxuICByZW5kZXIoZWwsIG1hcE9wdGlvbnMpO1xyXG5cclxuICAvLyBSZWFkIGFuZCBzZXQgcHJvamVjdGlvblxyXG4gIGlmIChtYXBPcHRpb25zLmhhc093blByb3BlcnR5KCdwcm9qNERlZnMnKSAmJiB3aW5kb3cucHJvajQpIHtcclxuICAgIHZhciBwcm9qID0gbWFwT3B0aW9uc1sncHJvajREZWZzJ107XHJcblxyXG4gICAgLy9SZWdpc3RlciBwcm9qNCBwcm9qZWN0aW9uIGRlZmluaXRpb25zXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb2oubGVuZ3RoOyBpKyspIHtcclxuICAgICAgcHJvajQuZGVmcyhwcm9qW2ldLmNvZGUsIHByb2pbaV0ucHJvamVjdGlvbik7XHJcbiAgICAgIGlmIChwcm9qW2ldLmhhc093blByb3BlcnR5KCdhbGlhcycpKSB7XHJcbiAgICAgICAgcHJvajQuZGVmcyhwcm9qW2ldLmFsaWFzLCBwcm9qNC5kZWZzKHByb2pbaV0uY29kZSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldHRpbmdzLnBhcmFtcyA9IHVybFBhcmFtcyA9IG1hcE9wdGlvbnMucGFyYW1zIHx8IHt9O1xyXG4gIHNldHRpbmdzLm1hcCA9IG1hcE9wdGlvbnMubWFwO1xyXG4gIHNldHRpbmdzLnVybCA9IG1hcE9wdGlvbnMudXJsO1xyXG4gIHNldHRpbmdzLnRhcmdldCA9IG1hcE9wdGlvbnMudGFyZ2V0O1xyXG4gIHNldHRpbmdzLmJhc2VVcmwgPSBtYXBPcHRpb25zLmJhc2VVcmw7XHJcbiAgc2V0dGluZ3MuYnJlYWtQb2ludHMgPSBtYXBPcHRpb25zLmJyZWFrUG9pbnRzO1xyXG4gIHNldHRpbmdzLmV4dGVudCA9IG1hcE9wdGlvbnMuZXh0ZW50IHx8IHVuZGVmaW5lZDtcclxuICBzZXR0aW5ncy5jZW50ZXIgPSB1cmxQYXJhbXMuY2VudGVyIHx8IG1hcE9wdGlvbnMuY2VudGVyO1xyXG4gIHNldHRpbmdzLnpvb20gPSB1cmxQYXJhbXMuem9vbSB8fCBtYXBPcHRpb25zLnpvb207XHJcbiAgbWFwT3B0aW9ucy50aWxlR3JpZCA9IG1hcE9wdGlvbnMudGlsZUdyaWQgfHwge307XHJcbiAgc2V0dGluZ3MudGlsZVNpemUgPSBtYXBPcHRpb25zLnRpbGVHcmlkLnRpbGVTaXplID8gW21hcE9wdGlvbnMudGlsZUdyaWQudGlsZVNpemUsbWFwT3B0aW9ucy50aWxlR3JpZC50aWxlU2l6ZV0gOiBbMjU2LDI1Nl07XHJcbiAgc2V0dGluZ3MuYWxpZ25Cb3R0b21MZWZ0ID0gbWFwT3B0aW9ucy50aWxlR3JpZC5hbGlnbkJvdHRvbUxlZnQ7XHJcblxyXG4gIGlmIChtYXBPcHRpb25zLmhhc093blByb3BlcnR5KCdwcm9qNERlZnMnKSB8fCBtYXBPcHRpb25zLnByb2plY3Rpb25Db2RlPT1cIkVQU0c6Mzg1N1wiIHx8IG1hcE9wdGlvbnMucHJvamVjdGlvbkNvZGU9PVwiRVBTRzo0MzI2XCIpIHtcclxuICAgIC8vIFByb2plY3Rpb24gdG8gYmUgdXNlZCBpbiBtYXBcclxuICAgIHNldHRpbmdzLnByb2plY3Rpb25Db2RlID0gbWFwT3B0aW9ucy5wcm9qZWN0aW9uQ29kZSB8fCB1bmRlZmluZWQ7XHJcbiAgICBzZXR0aW5ncy5wcm9qZWN0aW9uRXh0ZW50ID0gbWFwT3B0aW9ucy5wcm9qZWN0aW9uRXh0ZW50O1xyXG4gICAgc2V0dGluZ3MucHJvamVjdGlvbiA9IG5ldyBvbC5wcm9qLlByb2plY3Rpb24oe1xyXG4gICAgICBjb2RlOiBzZXR0aW5ncy5wcm9qZWN0aW9uQ29kZSxcclxuICAgICAgZXh0ZW50OiBzZXR0aW5ncy5wcm9qZWN0aW9uRXh0ZW50LFxyXG4gICAgICB1bml0czogZ2V0VW5pdHMoc2V0dGluZ3MucHJvamVjdGlvbkNvZGUpXHJcbiAgICB9KTtcclxuICAgIHNldHRpbmdzLnJlc29sdXRpb25zID0gbWFwT3B0aW9ucy5yZXNvbHV0aW9ucyB8fCB1bmRlZmluZWQ7XHJcbiAgICBzZXR0aW5ncy50aWxlR3JpZCA9IG1hcHV0aWxzLnRpbGVHcmlkKHNldHRpbmdzKTtcclxuICB9XHJcblxyXG4gIHNldHRpbmdzLnNvdXJjZSA9IG1hcE9wdGlvbnMuc291cmNlO1xyXG4gIHNldHRpbmdzLmdyb3VwcyA9IG1hcE9wdGlvbnMuZ3JvdXBzO1xyXG4gIHNldHRpbmdzLmVkaXRMYXllciA9IG1hcE9wdGlvbnMuZWRpdExheWVyO1xyXG4gIHNldHRpbmdzLnN0eWxlcyA9IG1hcE9wdGlvbnMuc3R5bGVzO1xyXG4gIHNldHRpbmdzLmNsdXN0ZXJPcHRpb25zID0gbWFwT3B0aW9ucy5jbHVzdGVyT3B0aW9ucyB8fCB7fTtcclxuICBzdHlsZS5pbml0KCk7XHJcbiAgc2V0dGluZ3MuY29udHJvbHMgPSBtYXBPcHRpb25zLmNvbnRyb2xzO1xyXG4gIHNldHRpbmdzLmNvbnNvbGVJZCA9IG1hcE9wdGlvbnMuY29uc29sZUlkIHx8ICdvLWNvbnNvbGUnO1xyXG4gIHNldHRpbmdzLmZlYXR1cmVpbmZvT3B0aW9ucyA9IG1hcE9wdGlvbnMuZmVhdHVyZWluZm9PcHRpb25zIHx8IHt9O1xyXG4gIHNldHRpbmdzLmVuYWJsZVJvdGF0aW9uID0gbWFwT3B0aW9ucy5lbmFibGVSb3RhdGlvbiA9PT0gZmFsc2UgPyBmYWxzZSA6IHRydWU7XHJcblxyXG4gIC8vSWYgdXJsIGFyZ3VtZW50cywgcGFyc2UgdGhpcyBzZXR0aW5nc1xyXG4gIGlmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XHJcbiAgICBwYXJzZUFyZygpO1xyXG4gIH1cclxuXHJcbiAgbG9hZE1hcCgpO1xyXG4gIHNldHRpbmdzLmxheWVycyA9IGNyZWF0ZUxheWVycyhtYXBPcHRpb25zLmxheWVycywgdXJsUGFyYW1zLmxheWVycyk7XHJcbiAgYWRkTGF5ZXJzKHNldHRpbmdzLmxheWVycyk7XHJcblxyXG4gIGVsUXVlcnkobWFwLCB7XHJcbiAgICBicmVha1BvaW50czogbWFwT3B0aW9ucy5icmVha1BvaW50cyxcclxuICAgIGJyZWFrUG9pbnRzUHJlZml4OiBtYXBPcHRpb25zLmJyZWFrUG9pbnRzUHJlZml4LFxyXG4gIH0pO1xyXG5cclxuICBpZiAodXJsUGFyYW1zLnBpbikge1xyXG4gICAgc2V0dGluZ3MuZmVhdHVyZWluZm9PcHRpb25zLnNhdmVkUGluID0gdXJsUGFyYW1zLnBpbjtcclxuICB9XHJcblxyXG4gIC8vVGhpcyBuZWVkcyBmdXJ0aGVyIGRldmVsb3BtZW50IGZvciBwcm9wZXIgaGFuZGxpbmcgaW4gcGVybWFsaW5rXHJcbiAgZWxzZSBpZiAodXJsUGFyYW1zLnNlbGVjdGlvbikge1xyXG4gICAgc2V0dGluZ3MuZmVhdHVyZWluZm9PcHRpb25zLnNhdmVkU2VsZWN0aW9uID0gbmV3IG9sLkZlYXR1cmUoe1xyXG4gICAgICBnZW9tZXRyeTogbmV3IG9sLmdlb21bdXJsUGFyYW1zLnNlbGVjdGlvbi5nZW9tZXRyeVR5cGVdKHVybFBhcmFtcy5zZWxlY3Rpb24uY29vcmRpbmF0ZXMpXHJcbiAgICB9KTtcclxuICB9XHJcbiAgZmVhdHVyZWluZm8uaW5pdChzZXR0aW5ncy5mZWF0dXJlaW5mb09wdGlvbnMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRMYXllcnMobGF5ZXJzKSB7XHJcbiAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgIG1hcC5hZGRMYXllcihsYXllcik7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxheWVycyhsYXllcmxpc3QsIHNhdmVkTGF5ZXJzKSB7XHJcbiAgdmFyIGxheWVycyA9IFtdO1xyXG4gIGZvciAodmFyIGkgPSBsYXllcmxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgIHZhciBzYXZlZExheWVyID0ge307XHJcbiAgICBpZiAoc2F2ZWRMYXllcnMpIHtcclxuICAgICAgc2F2ZWRMYXllciA9IHNhdmVkTGF5ZXJzW2xheWVybGlzdFtpXS5uYW1lLnNwbGl0KCc6JykucG9wKCldIHx8IHtcclxuICAgICAgICB2aXNpYmxlOiBmYWxzZSxcclxuICAgICAgICBsZWdlbmQ6IGZhbHNlXHJcbiAgICAgIH07XHJcbiAgICAgIHNhdmVkTGF5ZXIubmFtZSA9IGxheWVybGlzdFtpXS5uYW1lO1xyXG4gICAgfVxyXG4gICAgdmFyIGxheWVyID0gJC5leHRlbmQobGF5ZXJsaXN0W2ldLCBzYXZlZExheWVyKTtcclxuICAgIGxheWVycy5wdXNoKGxheWVyQ3JlYXRvcihsYXllcikpO1xyXG4gIH1cclxuICByZXR1cm4gbGF5ZXJzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkTWFwKCkge1xyXG4gIG1hcCA9IG5ldyBvbC5NYXAoe1xyXG4gICAgdGFyZ2V0OiAnby1tYXAnLFxyXG4gICAgY29udHJvbHM6IFtdLFxyXG4gICAgdmlldzogbmV3IG9sLlZpZXcoe1xyXG4gICAgICBleHRlbnQ6IHNldHRpbmdzLmV4dGVudCB8fCB1bmRlZmluZWQsXHJcbiAgICAgIHByb2plY3Rpb246IHNldHRpbmdzLnByb2plY3Rpb24gfHwgdW5kZWZpbmVkLFxyXG4gICAgICBjZW50ZXI6IHNldHRpbmdzLmNlbnRlcixcclxuICAgICAgcmVzb2x1dGlvbnM6IHNldHRpbmdzLnJlc29sdXRpb25zIHx8IHVuZGVmaW5lZCxcclxuICAgICAgem9vbTogc2V0dGluZ3Muem9vbSxcclxuICAgICAgZW5hYmxlUm90YXRpb246IHNldHRpbmdzLmVuYWJsZVJvdGF0aW9uXHJcbiAgICB9KVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZUFyZygpIHtcclxuICB2YXIgc3RyID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSk7XHJcbiAgdmFyIGVsZW1lbnRzID0gc3RyLnNwbGl0KFwiJlwiKTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgIC8vY2VudGVyIGNvb3JkaW5hdGVzXHJcbiAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgIHZhciB6ID0gZWxlbWVudHNbaV0uc3BsaXQoXCIsXCIpO1xyXG4gICAgICBzZXR0aW5ncy5jZW50ZXJbMF0gPSBwYXJzZUludCh6WzBdKTtcclxuICAgICAgc2V0dGluZ3MuY2VudGVyWzFdID0gcGFyc2VJbnQoelsxXSk7XHJcbiAgICB9IGVsc2UgaWYgKGkgPT0gMSkge1xyXG4gICAgICBzZXR0aW5ncy56b29tID0gcGFyc2VJbnQoZWxlbWVudHNbaV0pO1xyXG4gICAgfSBlbHNlIGlmIChpID09IDIpIHtcclxuICAgICAgdmFyIGwgPSBlbGVtZW50c1tpXS5zcGxpdChcIjtcIik7XHJcbiAgICAgIHZhciBsYXllcnMgPSBzZXR0aW5ncy5sYXllcnM7XHJcbiAgICAgIHZhciBsYSwgbWF0Y2g7XHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGF5ZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgbWF0Y2ggPSAwO1xyXG4gICAgICAgICQuZWFjaChsLCBmdW5jdGlvbihpbmRleCwgZWwpIHtcclxuICAgICAgICAgIGxhID0gZWwuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgICAgaWYgKGxheWVyc1tqXS5nZXQoJ2dyb3VwJykpIHtcclxuICAgICAgICAgICAgaWYgKChsYXllcnNbal0uZ2V0KCdncm91cCcpID09ICdiYWNrZ3JvdW5kJykgJiYgKGxhWzBdID09IGxheWVyc1tqXS5nZXQoJ25hbWUnKSkpIHtcclxuICAgICAgICAgICAgICBsYXllcnNbal0uc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICBtYXRjaCA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGxheWVyc1tqXS5nZXQoJ2dyb3VwJykgPT0gJ2JhY2tncm91bmQnKSAmJiAobWF0Y2ggPT0gMCkpIHtcclxuICAgICAgICAgICAgICBsYXllcnNbal0uc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGFbMF0gPT0gbGF5ZXJzW2pdLmdldCgnbmFtZScpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGxhWzFdID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGxheWVyc1tqXS5zZXQoJ2xlZ2VuZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJzW2pdLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYXllcnNbal0uc2V0KCdsZWdlbmQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGxheWVyc1tqXS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTZXR0aW5ncygpIHtcclxuICByZXR1cm4gc2V0dGluZ3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEV4dGVudCgpIHtcclxuICByZXR1cm4gc2V0dGluZ3MuZXh0ZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRCYXNlVXJsKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5iYXNlVXJsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRCcmVha1BvaW50cyhzaXplKSB7XHJcbiAgcmV0dXJuIHNpemUgJiYgc2V0dGluZ3MuYnJlYWtQb2ludHMuaGFzT3duUHJvcGVydHkoc2l6ZSkgPyBzZXR0aW5ncy5icmVha1BvaW50c1tzaXplXSA6IHNldHRpbmdzLmJyZWFrUG9pbnRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNYXBOYW1lKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5tYXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRpbGVHcmlkKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy50aWxlR3JpZDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGlsZVNpemUoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnRpbGVTaXplO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRVcmwoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnVybDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U3R5bGVTZXR0aW5ncygpIHtcclxuICByZXR1cm4gc2V0dGluZ3Muc3R5bGVzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRSZXNvbHV0aW9ucygpIHtcclxuICByZXR1cm4gc2V0dGluZ3MucmVzb2x1dGlvbnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE1hcFVybCgpIHtcclxuICB2YXIgbGF5ZXJOYW1lcyA9ICcnO1xyXG4gIHZhciB1cmw7XHJcblxyXG4gIC8vZGVsZXRlIHNlYXJjaCBhcmd1bWVudHMgaWYgcHJlc2VudFxyXG4gIGlmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XHJcbiAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gsICc/Jyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgJz8nO1xyXG4gIH1cclxuICB2YXIgbWFwVmlldyA9IG1hcC5nZXRWaWV3KCk7XHJcbiAgdmFyIGNlbnRlciA9IG1hcFZpZXcuZ2V0Q2VudGVyKCk7XHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAyOyBpKyspIHtcclxuICAgIGNlbnRlcltpXSA9IHBhcnNlSW50KGNlbnRlcltpXSk7IC8vY29vcmRpbmF0ZXMgaW4gaW50ZWdlcnNcclxuICB9XHJcbiAgdmFyIHpvb20gPSBtYXBWaWV3LmdldFpvb20oKTtcclxuICB2YXIgbGF5ZXJzID0gbWFwLmdldExheWVycygpO1xyXG5cclxuICAvL2FkZCBsYXllciBpZiB2aXNpYmxlXHJcbiAgbGF5ZXJzLmZvckVhY2goZnVuY3Rpb24oZWwpIHtcclxuICAgIGlmIChlbC5nZXRWaXNpYmxlKCkgPT0gdHJ1ZSkge1xyXG4gICAgICBsYXllck5hbWVzICs9IGVsLmdldCgnbmFtZScpICsgJzsnO1xyXG4gICAgfSBlbHNlIGlmIChlbC5nZXQoJ2xlZ2VuZCcpID09IHRydWUpIHtcclxuICAgICAgbGF5ZXJOYW1lcyArPSBlbC5nZXQoJ25hbWUnKSArICcsMTsnO1xyXG4gICAgfVxyXG4gIH0pXHJcbiAgcmV0dXJuIHVybCArIGNlbnRlciArICcmJyArIHpvb20gKyAnJicgKyBsYXllck5hbWVzLnNsaWNlKDAsIGxheWVyTmFtZXMubGFzdEluZGV4T2YoXCI7XCIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TWFwKCkge1xyXG4gIHJldHVybiBtYXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldExheWVycygpIHtcclxuICByZXR1cm4gc2V0dGluZ3MubGF5ZXJzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMYXllcnNCeVByb3BlcnR5KGtleSwgdmFsLCBieU5hbWUpIHtcclxuICB2YXIgbGF5ZXJzID0gbWFwLmdldExheWVycygpLmdldEFycmF5KCkuZmlsdGVyKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICBpZiAobGF5ZXIuZ2V0KGtleSkpIHtcclxuICAgICAgaWYgKGxheWVyLmdldChrZXkpID09PSB2YWwpIHtcclxuICAgICAgICByZXR1cm4gbGF5ZXI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgaWYgKGJ5TmFtZSkge1xyXG4gICAgcmV0dXJuIGxheWVycy5tYXAoZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgICAgcmV0dXJuIGxheWVyLmdldCgnbmFtZScpO1xyXG4gICAgfSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBsYXllcnM7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMYXllcihsYXllcm5hbWUpIHtcclxuICB2YXIgbGF5ZXIgPSAkLmdyZXAoc2V0dGluZ3MubGF5ZXJzLCBmdW5jdGlvbihvYmopIHtcclxuICAgIHJldHVybiAob2JqLmdldCgnbmFtZScpID09IGxheWVybmFtZSk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGxheWVyWzBdO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRRdWVyeWFibGVMYXllcnMoKSB7XHJcbiAgdmFyIHF1ZXJ5YWJsZUxheWVycyA9IHNldHRpbmdzLmxheWVycy5maWx0ZXIoZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgIGlmIChsYXllci5nZXQoJ3F1ZXJ5YWJsZScpICYmIGxheWVyLmdldFZpc2libGUoKSkge1xyXG4gICAgICByZXR1cm4gbGF5ZXI7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHF1ZXJ5YWJsZUxheWVycztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0R3JvdXAoZ3JvdXApIHtcclxuICB2YXIgZ3JvdXAgPSAkLmdyZXAoc2V0dGluZ3MubGF5ZXJzLCBmdW5jdGlvbihvYmopIHtcclxuICAgIHJldHVybiAob2JqLmdldCgnZ3JvdXAnKSA9PSBncm91cCk7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGdyb3VwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRHcm91cHMob3B0KSB7XHJcbiAgaWYob3B0ID09ICd0b3AnKSB7XHJcbiAgICByZXR1cm4gc2V0dGluZ3MuZ3JvdXBzO1xyXG4gIH0gZWxzZSBpZiAob3B0ID09ICdzdWInKSB7XHJcbiAgICByZXR1cm4gZ2V0U3ViZ3JvdXBzKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBzZXR0aW5ncy5ncm91cHMuY29uY2F0KGdldFN1Ymdyb3VwcygpKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFN1Ymdyb3VwcygpIHtcclxuICB2YXIgc3ViZ3JvdXBzID0gW107XHJcblxyXG4gIGZ1bmN0aW9uIGZpbmRTdWJncm91cHMoZ3JvdXBzLCBuKSB7XHJcbiAgICBpZiAobiA+PSBncm91cHMubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZ3JvdXBzW25dLmdyb3Vwcykge1xyXG4gICAgICBncm91cHNbbl0uZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24oc3ViZ3JvdXApIHtcclxuICAgICAgICBzdWJncm91cHMucHVzaChzdWJncm91cCk7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgZmluZFN1Ymdyb3Vwcyhncm91cHNbbl0uZ3JvdXBzLCAwKTtcclxuICAgIH1cclxuXHJcbiAgICBmaW5kU3ViZ3JvdXBzKGdyb3VwcywgbisxKTtcclxuICB9XHJcblxyXG4gIGZpbmRTdWJncm91cHMoc2V0dGluZ3MuZ3JvdXBzLCAwKTtcclxuICByZXR1cm4gc3ViZ3JvdXBzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQcm9qZWN0aW9uQ29kZSgpIHtcclxuICByZXR1cm4gc2V0dGluZ3MucHJvamVjdGlvbkNvZGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFByb2plY3Rpb24oKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnByb2plY3Rpb247XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE1hcFNvdXJjZSgpIHtcclxuICByZXR1cm4gc2V0dGluZ3Muc291cmNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRDb250cm9sTmFtZXMoKSB7XHJcbiAgdmFyIGNvbnRyb2xOYW1lcyA9IHNldHRpbmdzLmNvbnRyb2xzLm1hcChmdW5jdGlvbihvYmopIHtcclxuICAgIHJldHVybiBvYmoubmFtZTtcclxuICB9KTtcclxuICByZXR1cm4gY29udHJvbE5hbWVzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRUYXJnZXQoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnRhcmdldDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q2x1c3Rlck9wdGlvbnMoKXtcclxuICByZXR1cm4gc2V0dGluZ3MuY2x1c3Rlck9wdGlvbnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrU2NhbGUoc2NhbGUsIG1heFNjYWxlLCBtaW5TY2FsZSkge1xyXG4gIGlmIChtYXhTY2FsZSB8fCBtaW5TY2FsZSkge1xyXG5cclxuICAgIC8vIEFsdGVyIDE6IG1heHNjYWxlIGFuZCBtaW5zY2FsZVxyXG4gICAgaWYgKG1heFNjYWxlICYmIG1pblNjYWxlKSB7XHJcbiAgICAgIGlmICgoc2NhbGUgPiBtYXhTY2FsZSkgJiYgKHNjYWxlIDwgbWluU2NhbGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBBbHRlciAyOiBvbmx5IG1heHNjYWxlXHJcbiAgICBlbHNlIGlmIChtYXhTY2FsZSkge1xyXG4gICAgICBpZiAoc2NhbGUgPiBtYXhTY2FsZSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWx0ZXIgMzogb25seSBtaW5zY2FsZVxyXG4gICAgZWxzZSBpZiAobWluU2NhbGUpIHtcclxuICAgICAgaWYgKHNjYWxlIDwgbWluU2NhbGUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQWx0ZXIgNDogbm8gc2NhbGUgbGltaXRcclxuICBlbHNlIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29uc29sZUlkKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5jb25zb2xlSWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFNjYWxlKHJlc29sdXRpb24pIHtcclxuICB2YXIgZHBpID0gMjUuNCAvIDAuMjg7XHJcbiAgdmFyIG1wdSA9IHNldHRpbmdzLnByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xyXG4gIHZhciBzY2FsZSA9IHJlc29sdXRpb24gKiBtcHUgKiAzOS4zNyAqIGRwaTtcclxuICBzY2FsZSA9IE1hdGgucm91bmQoc2NhbGUpO1xyXG4gIHJldHVybiBzY2FsZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VW5pdHMocHJvaikge1xyXG4gIHZhciB1bml0cztcclxuICBzd2l0Y2gocHJvaikge1xyXG4gICAgY2FzZSAnRVBTRzozODU3JzpcclxuICAgICAgdW5pdHMgPSAnbSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnRVBTRzo0MzI2JzpcclxuICAgICAgdW5pdHMgPSAnZGVncmVlcyc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgdW5pdHMgPSBwcm9qNC5kZWZzKHByb2opID8gcHJvajQuZGVmcyhwcm9qKS51bml0cyA6IHVuZGVmaW5lZDtcclxuICB9XHJcbiAgcmV0dXJuIHVuaXRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhdXRvUGFuKCkge1xyXG4gIC8qV29ya2Fyb3VuZCB0byByZW1vdmUgd2hlbiBhdXRvcGFuIGltcGxlbWVudGVkIGZvciBvdmVybGF5cyAqL1xyXG4gIHZhciBlbCA9ICQoJy5vLXBvcHVwJyk7XHJcbiAgdmFyIGNlbnRlciA9IG1hcC5nZXRWaWV3KCkuZ2V0Q2VudGVyKCk7XHJcbiAgdmFyIHBvcHVwT2Zmc2V0ID0gJChlbCkub2Zmc2V0KCk7XHJcbiAgdmFyIG1hcE9mZnNldCA9ICQoJyMnICsgbWFwLmdldFRhcmdldCgpKS5vZmZzZXQoKTtcclxuICB2YXIgb2Zmc2V0WSA9IHBvcHVwT2Zmc2V0LnRvcCAtIG1hcE9mZnNldC50b3A7XHJcbiAgdmFyIG1hcFNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xyXG4gIHZhciBvZmZzZXRYID0gKG1hcE9mZnNldC5sZWZ0ICsgbWFwU2l6ZVswXSkgLSAocG9wdXBPZmZzZXQubGVmdCArICQoZWwpLm91dGVyV2lkdGgodHJ1ZSkpO1xyXG5cclxuICAvLyBDaGVjayBpZiBtYXBtZW51IHdpZGdldCBpcyB1c2VkIGFuZCBvcGVuZWRcclxuICB2YXIgbWVudVNpemUgPSAwO1xyXG4gIGlmIChzZXR0aW5ncy5jb250cm9scy5oYXNPd25Qcm9wZXJ0eSgnbWFwbWVudScpKSB7XHJcbiAgICBtZW51U2l6ZSA9IHNldHRpbmdzLmNvbnRyb2xzLm1hcG1lbnUuZ2V0VGFyZ2V0KCkub2Zmc2V0KCkubGVmdCA+IDAgPyBtYXBTaXplWzBdIC0gc2V0dGluZ3MuY29udHJvbHMubWFwbWVudS5nZXRUYXJnZXQoKS5vZmZzZXQoKS5sZWZ0IDogbWVudVNpemUgPSAwO1xyXG4gIH1cclxuICBpZiAob2Zmc2V0WSA8IDAgfHwgb2Zmc2V0WCA8IDAgKyBtZW51U2l6ZSB8fCBvZmZzZXRYID4gKG1hcFNpemVbMF0gLSAkKGVsKS5vdXRlcldpZHRoKHRydWUpKSkge1xyXG4gICAgdmFyIGR4ID0gMCxcclxuICAgICAgZHkgPSAwO1xyXG4gICAgaWYgKG9mZnNldFggPCAwICsgbWVudVNpemUpIHtcclxuICAgICAgZHggPSAoLW9mZnNldFggKyBtZW51U2l6ZSkgKiBtYXAuZ2V0VmlldygpLmdldFJlc29sdXRpb24oKTtcclxuICAgIH1cclxuICAgIGlmIChvZmZzZXRYID4gKG1hcFNpemVbMF0gLSAkKGVsKS5vdXRlcldpZHRoKHRydWUpKSkge1xyXG4gICAgICBkeCA9IC0oJChlbCkub3V0ZXJXaWR0aCh0cnVlKSAtIChtYXBTaXplWzBdIC0gb2Zmc2V0WCkpICogbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBpZiAob2Zmc2V0WSA8IDApIHtcclxuICAgICAgZHkgPSAoLW9mZnNldFkpICogbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBtYXAuZ2V0VmlldygpLmFuaW1hdGUoe1xyXG4gICAgICBjZW50ZXI6IChbY2VudGVyWzBdICsgZHgsIGNlbnRlclsxXSArIGR5XSksXHJcblx0ICBkdXJhdGlvbjozMDBcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKkVuZCB3b3JrYXJvdW5kKi9cclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlT3ZlcmxheXMob3ZlcmxheXMpIHtcclxuICBpZiAob3ZlcmxheXMpIHtcclxuICAgIGlmIChvdmVybGF5cy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgfHwgb3ZlcmxheXMgaW5zdGFuY2VvZiBvbC5Db2xsZWN0aW9uKSB7XHJcbiAgICAgIG92ZXJsYXlzLmZvckVhY2goZnVuY3Rpb24ob3ZlcmxheSkge1xyXG4gICAgICAgIG1hcC5yZW1vdmVPdmVybGF5KG92ZXJsYXkpO1xyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbWFwLnJlbW92ZU92ZXJsYXkob3ZlcmxheXMpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBtYXAuZ2V0T3ZlcmxheXMoKS5jbGVhcigpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKGVsLCBtYXBPcHRpb25zKSB7XHJcbiAgcGFnZVNldHRpbmdzID0gbWFwT3B0aW9ucy5wYWdlU2V0dGluZ3M7XHJcbiAgcGFnZVRlbXBsYXRlLm1hcENsYXNzID0gXCJvLW1hcFwiO1xyXG5cclxuICBpZiAocGFnZVNldHRpbmdzKSB7XHJcbiAgICBpZiAocGFnZVNldHRpbmdzLmZvb3Rlcikge1xyXG4gICAgICBpZiAocGFnZVNldHRpbmdzLmZvb3Rlci5oYXNPd25Qcm9wZXJ0eSgnaW1nJykpIHtcclxuICAgICAgICBwYWdlVGVtcGxhdGUuaW1nID0gcGFnZVNldHRpbmdzLmZvb3Rlci5pbWc7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHBhZ2VTZXR0aW5ncy5mb290ZXIuaGFzT3duUHJvcGVydHkoJ3RleHQnKSkge1xyXG4gICAgICAgIHBhZ2VUZW1wbGF0ZS50ZXh0ID0gcGFnZVNldHRpbmdzLmZvb3Rlci50ZXh0O1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChwYWdlU2V0dGluZ3MuZm9vdGVyLmhhc093blByb3BlcnR5KCd1cmwnKSkge1xyXG4gICAgICAgIHBhZ2VUZW1wbGF0ZS51cmwgPSBwYWdlU2V0dGluZ3MuZm9vdGVyLnVybDtcclxuICAgICAgfVxyXG4gICAgICBpZiAocGFnZVNldHRpbmdzLmZvb3Rlci5oYXNPd25Qcm9wZXJ0eSgndXJsVGV4dCcpKSB7XHJcbiAgICAgICAgcGFnZVRlbXBsYXRlLnVybFRleHQgPSBwYWdlU2V0dGluZ3MuZm9vdGVyLnVybFRleHQ7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChwYWdlU2V0dGluZ3MubWFwR3JpZCkge1xyXG4gICAgICBpZiAocGFnZVNldHRpbmdzLm1hcEdyaWQuaGFzT3duUHJvcGVydHkoJ3Zpc2libGUnKSAmJiBwYWdlU2V0dGluZ3MubWFwR3JpZC52aXNpYmxlID09PSB0cnVlKSB7XHJcbiAgICAgICAgcGFnZVRlbXBsYXRlLm1hcENsYXNzID0gXCJvLW1hcCBvLW1hcC1ncmlkXCI7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gICQoZWwpLmh0bWwodGVtcGxhdGUocGFnZVRlbXBsYXRlKSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBpbml0O1xyXG5tb2R1bGUuZXhwb3J0cy5jcmVhdGVMYXllcnMgPSBjcmVhdGVMYXllcnM7XHJcbm1vZHVsZS5leHBvcnRzLmdldEJhc2VVcmwgPSBnZXRCYXNlVXJsO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRCcmVha1BvaW50cyA9IGdldEJyZWFrUG9pbnRzO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRFeHRlbnQgPSBnZXRFeHRlbnQ7XHJcbm1vZHVsZS5leHBvcnRzLmdldFNldHRpbmdzID0gZ2V0U2V0dGluZ3M7XHJcbm1vZHVsZS5leHBvcnRzLmdldFN0eWxlU2V0dGluZ3MgPSBnZXRTdHlsZVNldHRpbmdzO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRNYXBVcmwgPSBnZXRNYXBVcmw7XHJcbm1vZHVsZS5leHBvcnRzLmdldE1hcCA9IGdldE1hcDtcclxubW9kdWxlLmV4cG9ydHMuZ2V0TGF5ZXJzID0gZ2V0TGF5ZXJzO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRMYXllcnNCeVByb3BlcnR5ID0gZ2V0TGF5ZXJzQnlQcm9wZXJ0eTtcclxubW9kdWxlLmV4cG9ydHMuZ2V0TGF5ZXIgPSBnZXRMYXllcjtcclxubW9kdWxlLmV4cG9ydHMuZ2V0Q29udHJvbE5hbWVzID0gZ2V0Q29udHJvbE5hbWVzO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRRdWVyeWFibGVMYXllcnMgPSBnZXRRdWVyeWFibGVMYXllcnM7XHJcbm1vZHVsZS5leHBvcnRzLmdldEdyb3VwID0gZ2V0R3JvdXA7XHJcbm1vZHVsZS5leHBvcnRzLmdldEdyb3VwcyA9IGdldEdyb3VwcztcclxubW9kdWxlLmV4cG9ydHMuZ2V0UHJvamVjdGlvbkNvZGUgPSBnZXRQcm9qZWN0aW9uQ29kZTtcclxubW9kdWxlLmV4cG9ydHMuZ2V0UHJvamVjdGlvbiA9IGdldFByb2plY3Rpb247XHJcbm1vZHVsZS5leHBvcnRzLmdldE1hcFNvdXJjZSA9IGdldE1hcFNvdXJjZTtcclxubW9kdWxlLmV4cG9ydHMuZ2V0UmVzb2x1dGlvbnMgPSBnZXRSZXNvbHV0aW9ucztcclxubW9kdWxlLmV4cG9ydHMuZ2V0U2NhbGUgPSBnZXRTY2FsZTtcclxubW9kdWxlLmV4cG9ydHMuZ2V0VGFyZ2V0ID0gZ2V0VGFyZ2V0O1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRDbHVzdGVyT3B0aW9ucyA9IGdldENsdXN0ZXJPcHRpb25zO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRUaWxlR3JpZCA9IGdldFRpbGVHcmlkO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRUaWxlU2l6ZSA9IGdldFRpbGVTaXplO1xyXG5tb2R1bGUuZXhwb3J0cy5hdXRvUGFuID0gYXV0b1BhbjtcclxubW9kdWxlLmV4cG9ydHMucmVtb3ZlT3ZlcmxheXMgPSByZW1vdmVPdmVybGF5cztcclxubW9kdWxlLmV4cG9ydHMuY2hlY2tTY2FsZT0gY2hlY2tTY2FsZTtcclxubW9kdWxlLmV4cG9ydHMuZ2V0TWFwTmFtZSA9IGdldE1hcE5hbWU7XHJcbm1vZHVsZS5leHBvcnRzLmdldENvbnNvbGVJZCA9IGdldENvbnNvbGVJZDtcclxubW9kdWxlLmV4cG9ydHMuZ2V0VXJsID0gZ2V0VXJsO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcblxyXG52YXIgbWFwO1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIHpvb21Db250cm9sO1xyXG4gIHZhciB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCAnby10b29sYmFyLW5hdmlnYXRpb24nO1xyXG4gIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuXHJcbiAgem9vbUNvbnRyb2wgPSBuZXcgb2wuY29udHJvbC5ab29tKHtcclxuICAgIHpvb21JblRpcExhYmVsOiAnICcsXHJcbiAgICB6b29tT3V0VGlwTGFiZWw6ICcgJyxcclxuICAgIHpvb21JbkxhYmVsOiAkLnBhcnNlSFRNTCgnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1wbHVzXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLXBsdXNcIj48L3VzZT48L3N2Zz4nKVswXSxcclxuICAgIHpvb21PdXRMYWJlbDogJC5wYXJzZUhUTUwoJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtbWludXNcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtbWludXNcIj48L3VzZT48L3N2Zz4nKVswXSxcclxuICAgIHRhcmdldDogdGFyZ2V0XHJcbiAgfSk7XHJcbiAgbWFwLmFkZENvbnRyb2woem9vbUNvbnRyb2wpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gSW5pdDtcclxuIl19
