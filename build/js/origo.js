(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.origo = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports = {
  crossDomain: true,
  target: '#app-wrapper',
  svgSpritePath: 'css/svg/',
  svgSprites: ['fa-icons.svg', 'material-icons.svg', 'miscellaneous.svg', 'origo-icons.svg', 'custom.svg'],
  breakPoints: {
    xs: [240, 320],
    s: [320, 320],
    m: [500, 500],
    l: [768, 500]
  },
  breakPointsPrefix: 'o-media',
  defaultControls: [
    {
      "name": "scaleline"
    },
    {
      "name": "zoom"
    },
    {
      "name": "rotate"
    },
    {
      "name": "attribution"
    },
    {
       "name": "fullscreen"
    }
  ]
}

},{}],2:[function(require,module,exports){
var controls = {};
controls.geoposition = require('../src/geoposition');
controls.mapmenu = require('../src/mapmenu');
controls.print = require('../src/print');
controls.sharemap = require('../src/sharemap');
controls.legend = require('../src/legend');
controls.search = require('../src/search');
controls.editor = require('../src/editor');
controls.home = require('../src/home');
controls.measure = require('../src/measure');
controls.about = require('../src/about');
controls.scale = require('../src/scale');
controls.offline = require('../src/offline');
controls.link = require('../src/link');
controls.scaleline = require('../src/scaleline');
controls.zoom = require('../src/zoom');
controls.rotate = require('../src/rotate');
controls.attribution = require('../src/attribution');
controls.position = require('../src/position');
controls.fullscreen = require('../src/fullscreen');
controls.splash = require('../src/splash');

module.exports = controls;

},{"../src/about":99,"../src/attribution":100,"../src/editor":104,"../src/fullscreen":121,"../src/geoposition":125,"../src/home":129,"../src/legend":144,"../src/link":145,"../src/mapmenu":147,"../src/measure":149,"../src/offline":151,"../src/position":167,"../src/print":168,"../src/rotate":169,"../src/scale":170,"../src/scaleline":171,"../src/search":172,"../src/sharemap":173,"../src/splash":175,"../src/zoom":202}],3:[function(require,module,exports){
"function"!==typeof Object.create&&(Object.create=function(f){function g(){}g.prototype=f;return new g});
(function(f,g,k){var l={init:function(a,b){this.$elem=f(b);this.options=f.extend({},f.fn.owlCarousel.options,this.$elem.data(),a);this.userOptions=a;this.loadContent()},loadContent:function(){function a(a){var d,e="";if("function"===typeof b.options.jsonSuccess)b.options.jsonSuccess.apply(this,[a]);else{for(d in a.owl)a.owl.hasOwnProperty(d)&&(e+=a.owl[d].item);b.$elem.html(e)}b.logIn()}var b=this,e;"function"===typeof b.options.beforeInit&&b.options.beforeInit.apply(this,[b.$elem]);"string"===typeof b.options.jsonPath?
(e=b.options.jsonPath,f.getJSON(e,a)):b.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style"));this.$elem.data("owl-originalClasses",this.$elem.attr("class"));this.$elem.css({opacity:0});this.orignalItems=this.options.items;this.checkBrowser();this.wrapperWidth=0;this.checkVisible=null;this.setVars()},setVars:function(){if(0===this.$elem.children().length)return!1;this.baseClass();this.eventTypes();this.$userItems=this.$elem.children();this.itemsAmount=this.$userItems.length;
this.wrapItems();this.$owlItems=this.$elem.find(".owl-item");this.$owlWrapper=this.$elem.find(".owl-wrapper");this.playDirection="next";this.prevItem=0;this.prevArr=[0];this.currentItem=0;this.customEvents();this.onStartup()},onStartup:function(){this.updateItems();this.calculateAll();this.buildControls();this.updateControls();this.response();this.moveEvents();this.stopOnHover();this.owlStatus();!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle);!0===this.options.autoPlay&&
(this.options.autoPlay=5E3);this.play();this.$elem.find(".owl-wrapper").css("display","block");this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility();this.onstartup=!1;this.eachMoveUpdate();"function"===typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad();!0===this.options.autoHeight&&this.autoHeight();this.onVisibleItems();"function"===typeof this.options.afterAction&&this.options.afterAction.apply(this,
[this.$elem])},updateVars:function(){"function"===typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]);this.watchVisibility();this.updateItems();this.calculateAll();this.updatePosition();this.updateControls();this.eachMoveUpdate();"function"===typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var a=this;g.setTimeout(function(){a.updateVars()},0)},watchVisibility:function(){var a=this;if(!1===a.$elem.is(":visible"))a.$elem.css({opacity:0}),
g.clearInterval(a.autoPlayInterval),g.clearInterval(a.checkVisible);else return!1;a.checkVisible=g.setInterval(function(){a.$elem.is(":visible")&&(a.reload(),a.$elem.animate({opacity:1},200),g.clearInterval(a.checkVisible))},500)},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>');this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">');this.wrapperOuter=this.$elem.find(".owl-wrapper-outer");this.$elem.css("display","block")},
baseClass:function(){var a=this.$elem.hasClass(this.options.baseClass),b=this.$elem.hasClass(this.options.theme);a||this.$elem.addClass(this.options.baseClass);b||this.$elem.addClass(this.options.theme)},updateItems:function(){var a,b;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=
!1,this.options.itemsMobile=!1;a=f(this.options.responsiveBaseWidth).width();a>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems);if(!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(a,b){return a[0]-b[0]}),b=0;b<this.options.itemsCustom.length;b+=1)this.options.itemsCustom[b][0]<=a&&(this.options.items=this.options.itemsCustom[b][1]);else a<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),
a<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),a<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),a<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),a<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&
!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var a=this,b,e;if(!0!==a.options.responsive)return!1;e=f(g).width();a.resizer=function(){f(g).width()!==e&&(!1!==a.options.autoPlay&&g.clearInterval(a.autoPlayInterval),g.clearTimeout(b),b=g.setTimeout(function(){e=f(g).width();a.updateVars()},a.options.responsiveRefreshRate))};f(g).resize(a.resizer)},updatePosition:function(){this.jumpTo(this.currentItem);!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var a=
this,b=0,e=a.itemsAmount-a.options.items;a.$owlItems.each(function(c){var d=f(this);d.css({width:a.itemWidth}).data("owl-item",Number(c));if(0===c%a.options.items||c===e)c>e||(b+=1);d.data("owl-roundPages",b)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0});this.appendItemsSizes()},calculateAll:function(){this.calculateWidth();this.appendWrapperSizes();this.loops();this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/
this.options.items)},max:function(){var a=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);this.options.items>this.itemsAmount?this.maximumPixels=a=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=a);return a},min:function(){return 0},loops:function(){var a=0,b=0,e,c;this.positionsInArray=[0];this.pagesInArray=[];for(e=0;e<this.itemsAmount;e+=1)b+=this.itemWidth,this.positionsInArray.push(-b),!0===this.options.scrollPerPage&&(c=f(this.$owlItems[e]),
c=c.data("owl-roundPages"),c!==a&&(this.pagesInArray[a]=this.positionsInArray[e],a=c))},buildControls:function(){if(!0===this.options.navigation||!0===this.options.pagination)this.owlControls=f('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem);!0===this.options.pagination&&this.buildPagination();!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var a=this,b=f('<div class="owl-buttons"/>');a.owlControls.append(b);a.buttonPrev=
f("<div/>",{"class":"owl-prev",html:a.options.navigationText[0]||""});a.buttonNext=f("<div/>",{"class":"owl-next",html:a.options.navigationText[1]||""});b.append(a.buttonPrev).append(a.buttonNext);b.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(a){a.preventDefault()});b.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(b){b.preventDefault();f(this).hasClass("owl-next")?a.next():a.prev()})},buildPagination:function(){var a=this;a.paginationWrapper=
f('<div class="owl-pagination"/>');a.owlControls.append(a.paginationWrapper);a.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(b){b.preventDefault();Number(f(this).data("owl-page"))!==a.currentItem&&a.goTo(Number(f(this).data("owl-page")),!0)})},updatePagination:function(){var a,b,e,c,d,g;if(!1===this.options.pagination)return!1;this.paginationWrapper.html("");a=0;b=this.itemsAmount-this.itemsAmount%this.options.items;for(c=0;c<this.itemsAmount;c+=1)0===c%this.options.items&&
(a+=1,b===c&&(e=this.itemsAmount-this.options.items),d=f("<div/>",{"class":"owl-page"}),g=f("<span></span>",{text:!0===this.options.paginationNumbers?a:"","class":!0===this.options.paginationNumbers?"owl-numbers":""}),d.append(g),d.data("owl-page",b===c?e:c),d.data("owl-roundPages",a),this.paginationWrapper.append(d));this.checkPagination()},checkPagination:function(){var a=this;if(!1===a.options.pagination)return!1;a.paginationWrapper.find(".owl-page").each(function(){f(this).data("owl-roundPages")===
f(a.$owlItems[a.currentItem]).data("owl-roundPages")&&(a.paginationWrapper.find(".owl-page").removeClass("active"),f(this).addClass("active"))})},checkNavigation:function(){if(!1===this.options.navigation)return!1;!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===
this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled")))},updateControls:function(){this.updatePagination();this.checkNavigation();this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(a){if(this.isTransition)return!1;
this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1;if(this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0))if(!0===this.options.rewindNav)this.currentItem=0,a="rewind";else return this.currentItem=this.maximumItem,!1;this.goTo(this.currentItem,a)},prev:function(a){if(this.isTransition)return!1;this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?
this.options.items:1);if(0>this.currentItem)if(!0===this.options.rewindNav)this.currentItem=this.maximumItem,a="rewind";else return this.currentItem=0,!1;this.goTo(this.currentItem,a)},goTo:function(a,b,e){var c=this;if(c.isTransition)return!1;"function"===typeof c.options.beforeMove&&c.options.beforeMove.apply(this,[c.$elem]);a>=c.maximumItem?a=c.maximumItem:0>=a&&(a=0);c.currentItem=c.owl.currentItem=a;if(!1!==c.options.transitionStyle&&"drag"!==e&&1===c.options.items&&!0===c.browser.support3d)return c.swapSpeed(0),
!0===c.browser.support3d?c.transition3d(c.positionsInArray[a]):c.css2slide(c.positionsInArray[a],1),c.afterGo(),c.singleItemTransition(),!1;a=c.positionsInArray[a];!0===c.browser.support3d?(c.isCss3Finish=!1,!0===b?(c.swapSpeed("paginationSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.paginationSpeed)):"rewind"===b?(c.swapSpeed(c.options.rewindSpeed),g.setTimeout(function(){c.isCss3Finish=!0},c.options.rewindSpeed)):(c.swapSpeed("slideSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},
c.options.slideSpeed)),c.transition3d(a)):!0===b?c.css2slide(a,c.options.paginationSpeed):"rewind"===b?c.css2slide(a,c.options.rewindSpeed):c.css2slide(a,c.options.slideSpeed);c.afterGo()},jumpTo:function(a){"function"===typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]);a>=this.maximumItem||-1===a?a=this.maximumItem:0>=a&&(a=0);this.swapSpeed(0);!0===this.browser.support3d?this.transition3d(this.positionsInArray[a]):this.css2slide(this.positionsInArray[a],1);this.currentItem=
this.owl.currentItem=a;this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem);this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2];this.prevArr.shift(0);this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp());"function"===typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop";g.clearInterval(this.autoPlayInterval)},
checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var a=this;a.apStatus="play";if(!1===a.options.autoPlay)return!1;g.clearInterval(a.autoPlayInterval);a.autoPlayInterval=g.setInterval(function(){a.next(!0)},a.options.autoPlay)},swapSpeed:function(a){"slideSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!==typeof a&&this.$owlWrapper.css(this.addCssSpeed(a))},
addCssSpeed:function(a){return{"-webkit-transition":"all "+a+"ms ease","-moz-transition":"all "+a+"ms ease","-o-transition":"all "+a+"ms ease",transition:"all "+a+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(a){return{"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-moz-transform":"translate3d("+a+"px, 0px, 0px)","-o-transform":"translate3d("+a+"px, 0px, 0px)","-ms-transform":"translate3d("+
a+"px, 0px, 0px)",transform:"translate3d("+a+"px, 0px,0px)"}},transition3d:function(a){this.$owlWrapper.css(this.doTranslate(a))},css2move:function(a){this.$owlWrapper.css({left:a})},css2slide:function(a,b){var e=this;e.isCssFinish=!1;e.$owlWrapper.stop(!0,!0).animate({left:a},{duration:b||e.options.slideSpeed,complete:function(){e.isCssFinish=!0}})},checkBrowser:function(){var a=k.createElement("div");a.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)";
a=a.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g);this.browser={support3d:null!==a&&1===a.length,isTouch:"ontouchstart"in g||g.navigator.msMaxTouchPoints}},moveEvents:function(){if(!1!==this.options.mouseDrag||!1!==this.options.touchDrag)this.gestures(),this.disabledEvents()},eventTypes:function(){var a=["s","e","x"];this.ev_types={};!0===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:
!1===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(a=["mousedown.owl","mousemove.owl","mouseup.owl"]);this.ev_types.start=a[0];this.ev_types.move=a[1];this.ev_types.end=a[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(a){a.preventDefault()});this.$elem.on("mousedown.disableTextSelect",function(a){return f(a.target).is("input, textarea, select, option")})},
gestures:function(){function a(a){if(void 0!==a.touches)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(void 0===a.touches){if(void 0!==a.pageX)return{x:a.pageX,y:a.pageY};if(void 0===a.pageX)return{x:a.clientX,y:a.clientY}}}function b(a){"on"===a?(f(k).on(d.ev_types.move,e),f(k).on(d.ev_types.end,c)):"off"===a&&(f(k).off(d.ev_types.move),f(k).off(d.ev_types.end))}function e(b){b=b.originalEvent||b||g.event;d.newPosX=a(b).x-h.offsetX;d.newPosY=a(b).y-h.offsetY;d.newRelativeX=d.newPosX-h.relativePos;
"function"===typeof d.options.startDragging&&!0!==h.dragging&&0!==d.newRelativeX&&(h.dragging=!0,d.options.startDragging.apply(d,[d.$elem]));(8<d.newRelativeX||-8>d.newRelativeX)&&!0===d.browser.isTouch&&(void 0!==b.preventDefault?b.preventDefault():b.returnValue=!1,h.sliding=!0);(10<d.newPosY||-10>d.newPosY)&&!1===h.sliding&&f(k).off("touchmove.owl");d.newPosX=Math.max(Math.min(d.newPosX,d.newRelativeX/5),d.maximumPixels+d.newRelativeX/5);!0===d.browser.support3d?d.transition3d(d.newPosX):d.css2move(d.newPosX)}
function c(a){a=a.originalEvent||a||g.event;var c;a.target=a.target||a.srcElement;h.dragging=!1;!0!==d.browser.isTouch&&d.$owlWrapper.removeClass("grabbing");d.dragDirection=0>d.newRelativeX?d.owl.dragDirection="left":d.owl.dragDirection="right";0!==d.newRelativeX&&(c=d.getNewPosition(),d.goTo(c,!1,"drag"),h.targetElement===a.target&&!0!==d.browser.isTouch&&(f(a.target).on("click.disable",function(a){a.stopImmediatePropagation();a.stopPropagation();a.preventDefault();f(a.target).off("click.disable")}),
a=f._data(a.target,"events").click,c=a.pop(),a.splice(0,0,c)));b("off")}var d=this,h={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};d.isCssFinish=!0;d.$elem.on(d.ev_types.start,".owl-wrapper",function(c){c=c.originalEvent||c||g.event;var e;if(3===c.which)return!1;if(!(d.itemsAmount<=d.options.items)){if(!1===d.isCssFinish&&!d.options.dragBeforeAnimFinish||!1===d.isCss3Finish&&!d.options.dragBeforeAnimFinish)return!1;
!1!==d.options.autoPlay&&g.clearInterval(d.autoPlayInterval);!0===d.browser.isTouch||d.$owlWrapper.hasClass("grabbing")||d.$owlWrapper.addClass("grabbing");d.newPosX=0;d.newRelativeX=0;f(this).css(d.removeTransition());e=f(this).position();h.relativePos=e.left;h.offsetX=a(c).x-e.left;h.offsetY=a(c).y-e.top;b("on");h.sliding=!1;h.targetElement=c.target||c.srcElement}})},getNewPosition:function(){var a=this.closestItem();a>this.maximumItem?a=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=
a=0);return a},closestItem:function(){var a=this,b=!0===a.options.scrollPerPage?a.pagesInArray:a.positionsInArray,e=a.newPosX,c=null;f.each(b,function(d,g){e-a.itemWidth/20>b[d+1]&&e-a.itemWidth/20<g&&"left"===a.moveDirection()?(c=g,a.currentItem=!0===a.options.scrollPerPage?f.inArray(c,a.positionsInArray):d):e+a.itemWidth/20<g&&e+a.itemWidth/20>(b[d+1]||b[d]-a.itemWidth)&&"right"===a.moveDirection()&&(!0===a.options.scrollPerPage?(c=b[d+1]||b[b.length-1],a.currentItem=f.inArray(c,a.positionsInArray)):
(c=b[d+1],a.currentItem=d+1))});return a.currentItem},moveDirection:function(){var a;0>this.newRelativeX?(a="right",this.playDirection="next"):(a="left",this.playDirection="prev");return a},customEvents:function(){var a=this;a.$elem.on("owl.next",function(){a.next()});a.$elem.on("owl.prev",function(){a.prev()});a.$elem.on("owl.play",function(b,e){a.options.autoPlay=e;a.play();a.hoverStatus="play"});a.$elem.on("owl.stop",function(){a.stop();a.hoverStatus="stop"});a.$elem.on("owl.goTo",function(b,e){a.goTo(e)});
a.$elem.on("owl.jumpTo",function(b,e){a.jumpTo(e)})},stopOnHover:function(){var a=this;!0===a.options.stopOnHover&&!0!==a.browser.isTouch&&!1!==a.options.autoPlay&&(a.$elem.on("mouseover",function(){a.stop()}),a.$elem.on("mouseout",function(){"stop"!==a.hoverStatus&&a.play()}))},lazyLoad:function(){var a,b,e,c,d;if(!1===this.options.lazyLoad)return!1;for(a=0;a<this.itemsAmount;a+=1)b=f(this.$owlItems[a]),"loaded"!==b.data("owl-loaded")&&(e=b.data("owl-item"),c=b.find(".lazyOwl"),"string"!==typeof c.data("src")?
b.data("owl-loaded","loaded"):(void 0===b.data("owl-loaded")&&(c.hide(),b.addClass("loading").data("owl-loaded","checked")),(d=!0===this.options.lazyFollow?e>=this.currentItem:!0)&&e<this.currentItem+this.options.items&&c.length&&this.lazyPreload(b,c)))},lazyPreload:function(a,b){function e(){a.data("owl-loaded","loaded").removeClass("loading");b.removeAttr("data-src");"fade"===d.options.lazyEffect?b.fadeIn(400):b.show();"function"===typeof d.options.afterLazyLoad&&d.options.afterLazyLoad.apply(this,
[d.$elem])}function c(){f+=1;d.completeImg(b.get(0))||!0===k?e():100>=f?g.setTimeout(c,100):e()}var d=this,f=0,k;"DIV"===b.prop("tagName")?(b.css("background-image","url("+b.data("src")+")"),k=!0):b[0].src=b.data("src");c()},autoHeight:function(){function a(){var a=f(e.$owlItems[e.currentItem]).height();e.wrapperOuter.css("height",a+"px");e.wrapperOuter.hasClass("autoHeight")||g.setTimeout(function(){e.wrapperOuter.addClass("autoHeight")},0)}function b(){d+=1;e.completeImg(c.get(0))?a():100>=d?g.setTimeout(b,
100):e.wrapperOuter.css("height","")}var e=this,c=f(e.$owlItems[e.currentItem]).find("img"),d;void 0!==c.get(0)?(d=0,b()):a()},completeImg:function(a){return!a.complete||"undefined"!==typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},onVisibleItems:function(){var a;!0===this.options.addClassActive&&this.$owlItems.removeClass("active");this.visibleItems=[];for(a=this.currentItem;a<this.currentItem+this.options.items;a+=1)this.visibleItems.push(a),!0===this.options.addClassActive&&f(this.$owlItems[a]).addClass("active");
this.owl.visibleItems=this.visibleItems},transitionTypes:function(a){this.outClass="owl-"+a+"-out";this.inClass="owl-"+a+"-in"},singleItemTransition:function(){var a=this,b=a.outClass,e=a.inClass,c=a.$owlItems.eq(a.currentItem),d=a.$owlItems.eq(a.prevItem),f=Math.abs(a.positionsInArray[a.currentItem])+a.positionsInArray[a.prevItem],g=Math.abs(a.positionsInArray[a.currentItem])+a.itemWidth/2;a.isTransition=!0;a.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":g+"px","-moz-perspective-origin":g+
"px","perspective-origin":g+"px"});d.css({position:"relative",left:f+"px"}).addClass(b).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endPrev=!0;d.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(d,b)});c.addClass(e).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endCurrent=!0;c.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend");a.clearTransStyle(c,e)})},clearTransStyle:function(a,
b){a.css({position:"",left:""}).removeClass(b);this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect");
f(k).off(".owl owl");f(g).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove());this.clearEvents();this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop();g.clearInterval(this.checkVisible);this.unWrap();this.$elem.removeData()},reinit:function(a){a=f.extend({},this.userOptions,
a);this.unWrap();this.init(a,this.$elem)},addItem:function(a,b){var e;if(!a)return!1;if(0===this.$elem.children().length)return this.$elem.append(a),this.setVars(),!1;this.unWrap();e=void 0===b||-1===b?-1:b;e>=this.$userItems.length||-1===e?this.$userItems.eq(-1).after(a):this.$userItems.eq(e).before(a);this.setVars()},removeItem:function(a){if(0===this.$elem.children().length)return!1;a=void 0===a||-1===a?-1:a;this.unWrap();this.$userItems.eq(a).remove();this.setVars()}};f.fn.owlCarousel=function(a){return this.each(function(){if(!0===
f(this).data("owl-init"))return!1;f(this).data("owl-init",!0);var b=Object.create(l);b.init(a,this);f.data(this,"owlCarousel",b)})};f.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1E3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,
responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:g,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}})(jQuery,window,document);

},{}],4:[function(require,module,exports){
module.exports = {
    "loadjQueryPlugin": function() {require("./owl.carousel.min.js");}
};

},{"./owl.carousel.min.js":3}],5:[function(require,module,exports){
'use strict';

exports.__esModule = true;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

// istanbul ignore next

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }

var _handlebarsBase = require('./handlebars/base');

var base = _interopRequireWildcard(_handlebarsBase);

// Each of these augment the Handlebars object. No need to setup here.
// (This is done to easily share code between commonjs and browse envs)

var _handlebarsSafeString = require('./handlebars/safe-string');

var _handlebarsSafeString2 = _interopRequireDefault(_handlebarsSafeString);

var _handlebarsException = require('./handlebars/exception');

var _handlebarsException2 = _interopRequireDefault(_handlebarsException);

var _handlebarsUtils = require('./handlebars/utils');

var Utils = _interopRequireWildcard(_handlebarsUtils);

var _handlebarsRuntime = require('./handlebars/runtime');

var runtime = _interopRequireWildcard(_handlebarsRuntime);

var _handlebarsNoConflict = require('./handlebars/no-conflict');

var _handlebarsNoConflict2 = _interopRequireDefault(_handlebarsNoConflict);

// For compatibility and usage outside of module systems, make the Handlebars object a namespace
function create() {
  var hb = new base.HandlebarsEnvironment();

  Utils.extend(hb, base);
  hb.SafeString = _handlebarsSafeString2['default'];
  hb.Exception = _handlebarsException2['default'];
  hb.Utils = Utils;
  hb.escapeExpression = Utils.escapeExpression;

  hb.VM = runtime;
  hb.template = function (spec) {
    return runtime.template(spec, hb);
  };

  return hb;
}

var inst = create();
inst.create = create;

_handlebarsNoConflict2['default'](inst);

inst['default'] = inst;

exports['default'] = inst;
module.exports = exports['default'];


},{"./handlebars/base":6,"./handlebars/exception":9,"./handlebars/no-conflict":19,"./handlebars/runtime":20,"./handlebars/safe-string":21,"./handlebars/utils":22}],6:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.HandlebarsEnvironment = HandlebarsEnvironment;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _utils = require('./utils');

var _exception = require('./exception');

var _exception2 = _interopRequireDefault(_exception);

var _helpers = require('./helpers');

var _decorators = require('./decorators');

var _logger = require('./logger');

var _logger2 = _interopRequireDefault(_logger);

var VERSION = '4.0.5';
exports.VERSION = VERSION;
var COMPILER_REVISION = 7;

exports.COMPILER_REVISION = COMPILER_REVISION;
var REVISION_CHANGES = {
  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it
  2: '== 1.0.0-rc.3',
  3: '== 1.0.0-rc.4',
  4: '== 1.x.x',
  5: '== 2.0.0-alpha.x',
  6: '>= 2.0.0-beta.1',
  7: '>= 4.0.0'
};

exports.REVISION_CHANGES = REVISION_CHANGES;
var objectType = '[object Object]';

function HandlebarsEnvironment(helpers, partials, decorators) {
  this.helpers = helpers || {};
  this.partials = partials || {};
  this.decorators = decorators || {};

  _helpers.registerDefaultHelpers(this);
  _decorators.registerDefaultDecorators(this);
}

HandlebarsEnvironment.prototype = {
  constructor: HandlebarsEnvironment,

  logger: _logger2['default'],
  log: _logger2['default'].log,

  registerHelper: function registerHelper(name, fn) {
    if (_utils.toString.call(name) === objectType) {
      if (fn) {
        throw new _exception2['default']('Arg not supported with multiple helpers');
      }
      _utils.extend(this.helpers, name);
    } else {
      this.helpers[name] = fn;
    }
  },
  unregisterHelper: function unregisterHelper(name) {
    delete this.helpers[name];
  },

  registerPartial: function registerPartial(name, partial) {
    if (_utils.toString.call(name) === objectType) {
      _utils.extend(this.partials, name);
    } else {
      if (typeof partial === 'undefined') {
        throw new _exception2['default']('Attempting to register a partial called "' + name + '" as undefined');
      }
      this.partials[name] = partial;
    }
  },
  unregisterPartial: function unregisterPartial(name) {
    delete this.partials[name];
  },

  registerDecorator: function registerDecorator(name, fn) {
    if (_utils.toString.call(name) === objectType) {
      if (fn) {
        throw new _exception2['default']('Arg not supported with multiple decorators');
      }
      _utils.extend(this.decorators, name);
    } else {
      this.decorators[name] = fn;
    }
  },
  unregisterDecorator: function unregisterDecorator(name) {
    delete this.decorators[name];
  }
};

var log = _logger2['default'].log;

exports.log = log;
exports.createFrame = _utils.createFrame;
exports.logger = _logger2['default'];


},{"./decorators":7,"./exception":9,"./helpers":10,"./logger":18,"./utils":22}],7:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.registerDefaultDecorators = registerDefaultDecorators;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _decoratorsInline = require('./decorators/inline');

var _decoratorsInline2 = _interopRequireDefault(_decoratorsInline);

function registerDefaultDecorators(instance) {
  _decoratorsInline2['default'](instance);
}


},{"./decorators/inline":8}],8:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerDecorator('inline', function (fn, props, container, options) {
    var ret = fn;
    if (!props.partials) {
      props.partials = {};
      ret = function (context, options) {
        // Create a new partials stack frame prior to exec.
        var original = container.partials;
        container.partials = _utils.extend({}, original, props.partials);
        var ret = fn(context, options);
        container.partials = original;
        return ret;
      };
    }

    props.partials[options.args[0]] = options.fn;

    return ret;
  });
};

module.exports = exports['default'];


},{"../utils":22}],9:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];

function Exception(message, node) {
  var loc = node && node.loc,
      line = undefined,
      column = undefined;
  if (loc) {
    line = loc.start.line;
    column = loc.start.column;

    message += ' - ' + line + ':' + column;
  }

  var tmp = Error.prototype.constructor.call(this, message);

  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.
  for (var idx = 0; idx < errorProps.length; idx++) {
    this[errorProps[idx]] = tmp[errorProps[idx]];
  }

  /* istanbul ignore else */
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, Exception);
  }

  if (loc) {
    this.lineNumber = line;
    this.column = column;
  }
}

Exception.prototype = new Error();

exports['default'] = Exception;
module.exports = exports['default'];


},{}],10:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.registerDefaultHelpers = registerDefaultHelpers;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _helpersBlockHelperMissing = require('./helpers/block-helper-missing');

var _helpersBlockHelperMissing2 = _interopRequireDefault(_helpersBlockHelperMissing);

var _helpersEach = require('./helpers/each');

var _helpersEach2 = _interopRequireDefault(_helpersEach);

var _helpersHelperMissing = require('./helpers/helper-missing');

var _helpersHelperMissing2 = _interopRequireDefault(_helpersHelperMissing);

var _helpersIf = require('./helpers/if');

var _helpersIf2 = _interopRequireDefault(_helpersIf);

var _helpersLog = require('./helpers/log');

var _helpersLog2 = _interopRequireDefault(_helpersLog);

var _helpersLookup = require('./helpers/lookup');

var _helpersLookup2 = _interopRequireDefault(_helpersLookup);

var _helpersWith = require('./helpers/with');

var _helpersWith2 = _interopRequireDefault(_helpersWith);

function registerDefaultHelpers(instance) {
  _helpersBlockHelperMissing2['default'](instance);
  _helpersEach2['default'](instance);
  _helpersHelperMissing2['default'](instance);
  _helpersIf2['default'](instance);
  _helpersLog2['default'](instance);
  _helpersLookup2['default'](instance);
  _helpersWith2['default'](instance);
}


},{"./helpers/block-helper-missing":11,"./helpers/each":12,"./helpers/helper-missing":13,"./helpers/if":14,"./helpers/log":15,"./helpers/lookup":16,"./helpers/with":17}],11:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerHelper('blockHelperMissing', function (context, options) {
    var inverse = options.inverse,
        fn = options.fn;

    if (context === true) {
      return fn(this);
    } else if (context === false || context == null) {
      return inverse(this);
    } else if (_utils.isArray(context)) {
      if (context.length > 0) {
        if (options.ids) {
          options.ids = [options.name];
        }

        return instance.helpers.each(context, options);
      } else {
        return inverse(this);
      }
    } else {
      if (options.data && options.ids) {
        var data = _utils.createFrame(options.data);
        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.name);
        options = { data: data };
      }

      return fn(context, options);
    }
  });
};

module.exports = exports['default'];


},{"../utils":22}],12:[function(require,module,exports){
'use strict';

exports.__esModule = true;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _utils = require('../utils');

var _exception = require('../exception');

var _exception2 = _interopRequireDefault(_exception);

exports['default'] = function (instance) {
  instance.registerHelper('each', function (context, options) {
    if (!options) {
      throw new _exception2['default']('Must pass iterator to #each');
    }

    var fn = options.fn,
        inverse = options.inverse,
        i = 0,
        ret = '',
        data = undefined,
        contextPath = undefined;

    if (options.data && options.ids) {
      contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]) + '.';
    }

    if (_utils.isFunction(context)) {
      context = context.call(this);
    }

    if (options.data) {
      data = _utils.createFrame(options.data);
    }

    function execIteration(field, index, last) {
      if (data) {
        data.key = field;
        data.index = index;
        data.first = index === 0;
        data.last = !!last;

        if (contextPath) {
          data.contextPath = contextPath + field;
        }
      }

      ret = ret + fn(context[field], {
        data: data,
        blockParams: _utils.blockParams([context[field], field], [contextPath + field, null])
      });
    }

    if (context && typeof context === 'object') {
      if (_utils.isArray(context)) {
        for (var j = context.length; i < j; i++) {
          if (i in context) {
            execIteration(i, i, i === context.length - 1);
          }
        }
      } else {
        var priorKey = undefined;

        for (var key in context) {
          if (context.hasOwnProperty(key)) {
            // We're running the iterations one step out of sync so we can detect
            // the last iteration without have to scan the object twice and create
            // an itermediate keys array.
            if (priorKey !== undefined) {
              execIteration(priorKey, i - 1);
            }
            priorKey = key;
            i++;
          }
        }
        if (priorKey !== undefined) {
          execIteration(priorKey, i - 1, true);
        }
      }
    }

    if (i === 0) {
      ret = inverse(this);
    }

    return ret;
  });
};

module.exports = exports['default'];


},{"../exception":9,"../utils":22}],13:[function(require,module,exports){
'use strict';

exports.__esModule = true;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

var _exception = require('../exception');

var _exception2 = _interopRequireDefault(_exception);

exports['default'] = function (instance) {
  instance.registerHelper('helperMissing', function () /* [args, ]options */{
    if (arguments.length === 1) {
      // A missing field in a {{foo}} construct.
      return undefined;
    } else {
      // Someone is actually trying to call something, blow up.
      throw new _exception2['default']('Missing helper: "' + arguments[arguments.length - 1].name + '"');
    }
  });
};

module.exports = exports['default'];


},{"../exception":9}],14:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerHelper('if', function (conditional, options) {
    if (_utils.isFunction(conditional)) {
      conditional = conditional.call(this);
    }

    // Default behavior is to render the positive path if the value is truthy and not empty.
    // The `includeZero` option may be set to treat the condtional as purely not empty based on the
    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.
    if (!options.hash.includeZero && !conditional || _utils.isEmpty(conditional)) {
      return options.inverse(this);
    } else {
      return options.fn(this);
    }
  });

  instance.registerHelper('unless', function (conditional, options) {
    return instance.helpers['if'].call(this, conditional, { fn: options.inverse, inverse: options.fn, hash: options.hash });
  });
};

module.exports = exports['default'];


},{"../utils":22}],15:[function(require,module,exports){
'use strict';

exports.__esModule = true;

exports['default'] = function (instance) {
  instance.registerHelper('log', function () /* message, options */{
    var args = [undefined],
        options = arguments[arguments.length - 1];
    for (var i = 0; i < arguments.length - 1; i++) {
      args.push(arguments[i]);
    }

    var level = 1;
    if (options.hash.level != null) {
      level = options.hash.level;
    } else if (options.data && options.data.level != null) {
      level = options.data.level;
    }
    args[0] = level;

    instance.log.apply(instance, args);
  });
};

module.exports = exports['default'];


},{}],16:[function(require,module,exports){
'use strict';

exports.__esModule = true;

exports['default'] = function (instance) {
  instance.registerHelper('lookup', function (obj, field) {
    return obj && obj[field];
  });
};

module.exports = exports['default'];


},{}],17:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('../utils');

exports['default'] = function (instance) {
  instance.registerHelper('with', function (context, options) {
    if (_utils.isFunction(context)) {
      context = context.call(this);
    }

    var fn = options.fn;

    if (!_utils.isEmpty(context)) {
      var data = options.data;
      if (options.data && options.ids) {
        data = _utils.createFrame(options.data);
        data.contextPath = _utils.appendContextPath(options.data.contextPath, options.ids[0]);
      }

      return fn(context, {
        data: data,
        blockParams: _utils.blockParams([context], [data && data.contextPath])
      });
    } else {
      return options.inverse(this);
    }
  });
};

module.exports = exports['default'];


},{"../utils":22}],18:[function(require,module,exports){
'use strict';

exports.__esModule = true;

var _utils = require('./utils');

var logger = {
  methodMap: ['debug', 'info', 'warn', 'error'],
  level: 'info',

  // Maps a given level value to the `methodMap` indexes above.
  lookupLevel: function lookupLevel(level) {
    if (typeof level === 'string') {
      var levelMap = _utils.indexOf(logger.methodMap, level.toLowerCase());
      if (levelMap >= 0) {
        level = levelMap;
      } else {
        level = parseInt(level, 10);
      }
    }

    return level;
  },

  // Can be overridden in the host environment
  log: function log(level) {
    level = logger.lookupLevel(level);

    if (typeof console !== 'undefined' && logger.lookupLevel(logger.level) <= level) {
      var method = logger.methodMap[level];
      if (!console[method]) {
        // eslint-disable-line no-console
        method = 'log';
      }

      for (var _len = arguments.length, message = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
        message[_key - 1] = arguments[_key];
      }

      console[method].apply(console, message); // eslint-disable-line no-console
    }
  }
};

exports['default'] = logger;
module.exports = exports['default'];


},{"./utils":22}],19:[function(require,module,exports){
(function (global){
/* global window */
'use strict';

exports.__esModule = true;

exports['default'] = function (Handlebars) {
  /* istanbul ignore next */
  var root = typeof global !== 'undefined' ? global : window,
      $Handlebars = root.Handlebars;
  /* istanbul ignore next */
  Handlebars.noConflict = function () {
    if (root.Handlebars === Handlebars) {
      root.Handlebars = $Handlebars;
    }
    return Handlebars;
  };
};

module.exports = exports['default'];


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],20:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.checkRevision = checkRevision;
exports.template = template;
exports.wrapProgram = wrapProgram;
exports.resolvePartial = resolvePartial;
exports.invokePartial = invokePartial;
exports.noop = noop;
// istanbul ignore next

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

// istanbul ignore next

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }

var _utils = require('./utils');

var Utils = _interopRequireWildcard(_utils);

var _exception = require('./exception');

var _exception2 = _interopRequireDefault(_exception);

var _base = require('./base');

function checkRevision(compilerInfo) {
  var compilerRevision = compilerInfo && compilerInfo[0] || 1,
      currentRevision = _base.COMPILER_REVISION;

  if (compilerRevision !== currentRevision) {
    if (compilerRevision < currentRevision) {
      var runtimeVersions = _base.REVISION_CHANGES[currentRevision],
          compilerVersions = _base.REVISION_CHANGES[compilerRevision];
      throw new _exception2['default']('Template was precompiled with an older version of Handlebars than the current runtime. ' + 'Please update your precompiler to a newer version (' + runtimeVersions + ') or downgrade your runtime to an older version (' + compilerVersions + ').');
    } else {
      // Use the embedded version info since the runtime doesn't know about this revision yet
      throw new _exception2['default']('Template was precompiled with a newer version of Handlebars than the current runtime. ' + 'Please update your runtime to a newer version (' + compilerInfo[1] + ').');
    }
  }
}

function template(templateSpec, env) {
  /* istanbul ignore next */
  if (!env) {
    throw new _exception2['default']('No environment passed to template');
  }
  if (!templateSpec || !templateSpec.main) {
    throw new _exception2['default']('Unknown template object: ' + typeof templateSpec);
  }

  templateSpec.main.decorator = templateSpec.main_d;

  // Note: Using env.VM references rather than local var references throughout this section to allow
  // for external users to override these as psuedo-supported APIs.
  env.VM.checkRevision(templateSpec.compiler);

  function invokePartialWrapper(partial, context, options) {
    if (options.hash) {
      context = Utils.extend({}, context, options.hash);
      if (options.ids) {
        options.ids[0] = true;
      }
    }

    partial = env.VM.resolvePartial.call(this, partial, context, options);
    var result = env.VM.invokePartial.call(this, partial, context, options);

    if (result == null && env.compile) {
      options.partials[options.name] = env.compile(partial, templateSpec.compilerOptions, env);
      result = options.partials[options.name](context, options);
    }
    if (result != null) {
      if (options.indent) {
        var lines = result.split('\n');
        for (var i = 0, l = lines.length; i < l; i++) {
          if (!lines[i] && i + 1 === l) {
            break;
          }

          lines[i] = options.indent + lines[i];
        }
        result = lines.join('\n');
      }
      return result;
    } else {
      throw new _exception2['default']('The partial ' + options.name + ' could not be compiled when running in runtime-only mode');
    }
  }

  // Just add water
  var container = {
    strict: function strict(obj, name) {
      if (!(name in obj)) {
        throw new _exception2['default']('"' + name + '" not defined in ' + obj);
      }
      return obj[name];
    },
    lookup: function lookup(depths, name) {
      var len = depths.length;
      for (var i = 0; i < len; i++) {
        if (depths[i] && depths[i][name] != null) {
          return depths[i][name];
        }
      }
    },
    lambda: function lambda(current, context) {
      return typeof current === 'function' ? current.call(context) : current;
    },

    escapeExpression: Utils.escapeExpression,
    invokePartial: invokePartialWrapper,

    fn: function fn(i) {
      var ret = templateSpec[i];
      ret.decorator = templateSpec[i + '_d'];
      return ret;
    },

    programs: [],
    program: function program(i, data, declaredBlockParams, blockParams, depths) {
      var programWrapper = this.programs[i],
          fn = this.fn(i);
      if (data || depths || blockParams || declaredBlockParams) {
        programWrapper = wrapProgram(this, i, fn, data, declaredBlockParams, blockParams, depths);
      } else if (!programWrapper) {
        programWrapper = this.programs[i] = wrapProgram(this, i, fn);
      }
      return programWrapper;
    },

    data: function data(value, depth) {
      while (value && depth--) {
        value = value._parent;
      }
      return value;
    },
    merge: function merge(param, common) {
      var obj = param || common;

      if (param && common && param !== common) {
        obj = Utils.extend({}, common, param);
      }

      return obj;
    },

    noop: env.VM.noop,
    compilerInfo: templateSpec.compiler
  };

  function ret(context) {
    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    var data = options.data;

    ret._setup(options);
    if (!options.partial && templateSpec.useData) {
      data = initData(context, data);
    }
    var depths = undefined,
        blockParams = templateSpec.useBlockParams ? [] : undefined;
    if (templateSpec.useDepths) {
      if (options.depths) {
        depths = context !== options.depths[0] ? [context].concat(options.depths) : options.depths;
      } else {
        depths = [context];
      }
    }

    function main(context /*, options*/) {
      return '' + templateSpec.main(container, context, container.helpers, container.partials, data, blockParams, depths);
    }
    main = executeDecorators(templateSpec.main, main, container, options.depths || [], data, blockParams);
    return main(context, options);
  }
  ret.isTop = true;

  ret._setup = function (options) {
    if (!options.partial) {
      container.helpers = container.merge(options.helpers, env.helpers);

      if (templateSpec.usePartial) {
        container.partials = container.merge(options.partials, env.partials);
      }
      if (templateSpec.usePartial || templateSpec.useDecorators) {
        container.decorators = container.merge(options.decorators, env.decorators);
      }
    } else {
      container.helpers = options.helpers;
      container.partials = options.partials;
      container.decorators = options.decorators;
    }
  };

  ret._child = function (i, data, blockParams, depths) {
    if (templateSpec.useBlockParams && !blockParams) {
      throw new _exception2['default']('must pass block params');
    }
    if (templateSpec.useDepths && !depths) {
      throw new _exception2['default']('must pass parent depths');
    }

    return wrapProgram(container, i, templateSpec[i], data, 0, blockParams, depths);
  };
  return ret;
}

function wrapProgram(container, i, fn, data, declaredBlockParams, blockParams, depths) {
  function prog(context) {
    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    var currentDepths = depths;
    if (depths && context !== depths[0]) {
      currentDepths = [context].concat(depths);
    }

    return fn(container, context, container.helpers, container.partials, options.data || data, blockParams && [options.blockParams].concat(blockParams), currentDepths);
  }

  prog = executeDecorators(fn, prog, container, depths, data, blockParams);

  prog.program = i;
  prog.depth = depths ? depths.length : 0;
  prog.blockParams = declaredBlockParams || 0;
  return prog;
}

function resolvePartial(partial, context, options) {
  if (!partial) {
    if (options.name === '@partial-block') {
      partial = options.data['partial-block'];
    } else {
      partial = options.partials[options.name];
    }
  } else if (!partial.call && !options.name) {
    // This is a dynamic partial that returned a string
    options.name = partial;
    partial = options.partials[partial];
  }
  return partial;
}

function invokePartial(partial, context, options) {
  options.partial = true;
  if (options.ids) {
    options.data.contextPath = options.ids[0] || options.data.contextPath;
  }

  var partialBlock = undefined;
  if (options.fn && options.fn !== noop) {
    options.data = _base.createFrame(options.data);
    partialBlock = options.data['partial-block'] = options.fn;

    if (partialBlock.partials) {
      options.partials = Utils.extend({}, options.partials, partialBlock.partials);
    }
  }

  if (partial === undefined && partialBlock) {
    partial = partialBlock;
  }

  if (partial === undefined) {
    throw new _exception2['default']('The partial ' + options.name + ' could not be found');
  } else if (partial instanceof Function) {
    return partial(context, options);
  }
}

function noop() {
  return '';
}

function initData(context, data) {
  if (!data || !('root' in data)) {
    data = data ? _base.createFrame(data) : {};
    data.root = context;
  }
  return data;
}

function executeDecorators(fn, prog, container, depths, data, blockParams) {
  if (fn.decorator) {
    var props = {};
    prog = fn.decorator(prog, props, container, depths && depths[0], data, blockParams, depths);
    Utils.extend(prog, props);
  }
  return prog;
}


},{"./base":6,"./exception":9,"./utils":22}],21:[function(require,module,exports){
// Build out our basic SafeString type
'use strict';

exports.__esModule = true;
function SafeString(string) {
  this.string = string;
}

SafeString.prototype.toString = SafeString.prototype.toHTML = function () {
  return '' + this.string;
};

exports['default'] = SafeString;
module.exports = exports['default'];


},{}],22:[function(require,module,exports){
'use strict';

exports.__esModule = true;
exports.extend = extend;
exports.indexOf = indexOf;
exports.escapeExpression = escapeExpression;
exports.isEmpty = isEmpty;
exports.createFrame = createFrame;
exports.blockParams = blockParams;
exports.appendContextPath = appendContextPath;
var escape = {
  '&': '&amp;',
  '<': '&lt;',
  '>': '&gt;',
  '"': '&quot;',
  "'": '&#x27;',
  '`': '&#x60;',
  '=': '&#x3D;'
};

var badChars = /[&<>"'`=]/g,
    possible = /[&<>"'`=]/;

function escapeChar(chr) {
  return escape[chr];
}

function extend(obj /* , ...source */) {
  for (var i = 1; i < arguments.length; i++) {
    for (var key in arguments[i]) {
      if (Object.prototype.hasOwnProperty.call(arguments[i], key)) {
        obj[key] = arguments[i][key];
      }
    }
  }

  return obj;
}

var toString = Object.prototype.toString;

exports.toString = toString;
// Sourced from lodash
// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt
/* eslint-disable func-style */
var isFunction = function isFunction(value) {
  return typeof value === 'function';
};
// fallback for older versions of Chrome and Safari
/* istanbul ignore next */
if (isFunction(/x/)) {
  exports.isFunction = isFunction = function (value) {
    return typeof value === 'function' && toString.call(value) === '[object Function]';
  };
}
exports.isFunction = isFunction;

/* eslint-enable func-style */

/* istanbul ignore next */
var isArray = Array.isArray || function (value) {
  return value && typeof value === 'object' ? toString.call(value) === '[object Array]' : false;
};

exports.isArray = isArray;
// Older IE versions do not directly support indexOf so we must implement our own, sadly.

function indexOf(array, value) {
  for (var i = 0, len = array.length; i < len; i++) {
    if (array[i] === value) {
      return i;
    }
  }
  return -1;
}

function escapeExpression(string) {
  if (typeof string !== 'string') {
    // don't escape SafeStrings, since they're already safe
    if (string && string.toHTML) {
      return string.toHTML();
    } else if (string == null) {
      return '';
    } else if (!string) {
      return string + '';
    }

    // Force a string conversion as this will be done by the append regardless and
    // the regex test will do this transparently behind the scenes, causing issues if
    // an object's to string has escaped characters in it.
    string = '' + string;
  }

  if (!possible.test(string)) {
    return string;
  }
  return string.replace(badChars, escapeChar);
}

function isEmpty(value) {
  if (!value && value !== 0) {
    return true;
  } else if (isArray(value) && value.length === 0) {
    return true;
  } else {
    return false;
  }
}

function createFrame(object) {
  var frame = extend({}, object);
  frame._parent = object;
  return frame;
}

function blockParams(params, ids) {
  params.path = ids;
  return params;
}

function appendContextPath(contextPath, id) {
  return (contextPath ? contextPath + '.' : '') + id;
}


},{}],23:[function(require,module,exports){
// Create a simple path alias to allow browserify to resolve
// the runtime on a supported path.
module.exports = require('./dist/cjs/handlebars.runtime')['default'];

},{"./dist/cjs/handlebars.runtime":5}],24:[function(require,module,exports){
module.exports = require("handlebars/runtime")["default"];

},{"handlebars/runtime":23}],25:[function(require,module,exports){
/*!
 * jQuery JavaScript Library v2.1.4
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2015-04-28T16:01Z
 */

(function( global, factory ) {

	if ( typeof module === "object" && typeof module.exports === "object" ) {
		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
}(typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Support: Firefox 18+
// Can't be in strict mode, several libs including ASP.NET trace
// the stack via arguments.caller.callee and Firefox dies if
// you try to trace through "use strict" call chains. (#13335)
//

var arr = [];

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var support = {};



var
	// Use the correct document accordingly with window argument (sandbox)
	document = window.document,

	version = "2.1.4",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {
		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android<4.1
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,

	// Matches dashed string for camelizing
	rmsPrefix = /^-ms-/,
	rdashAlpha = /-([\da-z])/gi,

	// Used by jQuery.camelCase as callback to replace()
	fcamelCase = function( all, letter ) {
		return letter.toUpperCase();
	};

jQuery.fn = jQuery.prototype = {
	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// Start with an empty selector
	selector: "",

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {
		return num != null ?

			// Return just the one element from the set
			( num < 0 ? this[ num + this.length ] : this[ num ] ) :

			// Return all the elements in a clean array
			slice.call( this );
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;
		ret.context = this.context;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	// (You can seed the arguments with an array of args, but this is
	// only used internally.)
	each: function( callback, args ) {
		return jQuery.each( this, callback, args );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map(this, function( elem, i ) {
			return callback.call( elem, i, elem );
		}));
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[j] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor(null);
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[0] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !jQuery.isFunction(target) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {
		// Only deal with non-null/undefined values
		if ( (options = arguments[ i ]) != null ) {
			// Extend the base object
			for ( name in options ) {
				src = target[ name ];
				copy = options[ name ];

				// Prevent never-ending loop
				if ( target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)) ) ) {
					if ( copyIsArray ) {
						copyIsArray = false;
						clone = src && jQuery.isArray(src) ? src : [];

					} else {
						clone = src && jQuery.isPlainObject(src) ? src : {};
					}

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend({
	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isFunction: function( obj ) {
		return jQuery.type(obj) === "function";
	},

	isArray: Array.isArray,

	isWindow: function( obj ) {
		return obj != null && obj === obj.window;
	},

	isNumeric: function( obj ) {
		// parseFloat NaNs numeric-cast false positives (null|true|false|"")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		// adding 1 corrects loss of precision from parseFloat (#15100)
		return !jQuery.isArray( obj ) && (obj - parseFloat( obj ) + 1) >= 0;
	},

	isPlainObject: function( obj ) {
		// Not plain objects:
		// - Any object or value whose internal [[Class]] property is not "[object Object]"
		// - DOM nodes
		// - window
		if ( jQuery.type( obj ) !== "object" || obj.nodeType || jQuery.isWindow( obj ) ) {
			return false;
		}

		if ( obj.constructor &&
				!hasOwn.call( obj.constructor.prototype, "isPrototypeOf" ) ) {
			return false;
		}

		// If the function hasn't returned already, we're confident that
		// |obj| is a plain object, created by {} or constructed with new Object
		return true;
	},

	isEmptyObject: function( obj ) {
		var name;
		for ( name in obj ) {
			return false;
		}
		return true;
	},

	type: function( obj ) {
		if ( obj == null ) {
			return obj + "";
		}
		// Support: Android<4.0, iOS<6 (functionish RegExp)
		return typeof obj === "object" || typeof obj === "function" ?
			class2type[ toString.call(obj) ] || "object" :
			typeof obj;
	},

	// Evaluates a script in a global context
	globalEval: function( code ) {
		var script,
			indirect = eval;

		code = jQuery.trim( code );

		if ( code ) {
			// If the code includes a valid, prologue position
			// strict mode pragma, execute code by injecting a
			// script tag into the document.
			if ( code.indexOf("use strict") === 1 ) {
				script = document.createElement("script");
				script.text = code;
				document.head.appendChild( script ).parentNode.removeChild( script );
			} else {
			// Otherwise, avoid the DOM node creation, insertion
			// and removal by using an indirect global eval
				indirect( code );
			}
		}
	},

	// Convert dashed to camelCase; used by the css and data modules
	// Support: IE9-11+
	// Microsoft forgot to hump their vendor prefix (#9572)
	camelCase: function( string ) {
		return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
	},

	nodeName: function( elem, name ) {
		return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
	},

	// args is for internal usage only
	each: function( obj, callback, args ) {
		var value,
			i = 0,
			length = obj.length,
			isArray = isArraylike( obj );

		if ( args ) {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.apply( obj[ i ], args );

					if ( value === false ) {
						break;
					}
				}
			}

		// A special, fast, case for the most common use of each
		} else {
			if ( isArray ) {
				for ( ; i < length; i++ ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			} else {
				for ( i in obj ) {
					value = callback.call( obj[ i ], i, obj[ i ] );

					if ( value === false ) {
						break;
					}
				}
			}
		}

		return obj;
	},

	// Support: Android<4.1
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArraylike( Object(arr) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var value,
			i = 0,
			length = elems.length,
			isArray = isArraylike( elems ),
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArray ) {
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// Bind a function to a context, optionally partially applying any
	// arguments.
	proxy: function( fn, context ) {
		var tmp, args, proxy;

		if ( typeof context === "string" ) {
			tmp = fn[ context ];
			context = fn;
			fn = tmp;
		}

		// Quick check to determine if target is callable, in the spec
		// this throws a TypeError, but we will just return undefined.
		if ( !jQuery.isFunction( fn ) ) {
			return undefined;
		}

		// Simulated bind
		args = slice.call( arguments, 2 );
		proxy = function() {
			return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
		};

		// Set the guid of unique handler to the same of original handler, so it can be removed
		proxy.guid = fn.guid = fn.guid || jQuery.guid++;

		return proxy;
	},

	now: Date.now,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
});

// Populate the class2type map
jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
});

function isArraylike( obj ) {

	// Support: iOS 8.2 (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = "length" in obj && obj.length,
		type = jQuery.type( obj );

	if ( type === "function" || jQuery.isWindow( obj ) ) {
		return false;
	}

	if ( obj.nodeType === 1 && length ) {
		return true;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.2.0-pre
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-12-16
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// General-purpose constants
	MAX_NEGATIVE = 1 << 31,

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// http://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// Whitespace characters http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",
	// http://www.w3.org/TR/css3-syntax/#characters
	characterEncoding = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",

	// Loosely modeled on CSS identifier characters
	// An unquoted value should be a CSS identifier http://www.w3.org/TR/css3-selectors/#attribute-selectors
	// Proper syntax: http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = characterEncoding.replace( "w", "w#" ),

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + characterEncoding + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + characterEncoding + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),

	rattributeQuotes = new RegExp( "=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + characterEncoding + ")" ),
		"CLASS": new RegExp( "^\\.(" + characterEncoding + ")" ),
		"TAG": new RegExp( "^(" + characterEncoding.replace( "w", "w*" ) + ")" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,
	rescape = /'|\\/g,

	// CSS escapes http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	};

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var match, elem, m, nodeType,
		// QSA vars
		i, groups, old, nid, newContext, newSelector;

	if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
		setDocument( context );
	}

	context = context || document;
	results = results || [];
	nodeType = context.nodeType;

	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	if ( !seed && documentIsHTML ) {

		// Try to shortcut find operations when possible (e.g., not under DocumentFragment)
		if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {
			// Speed-up: Sizzle("#ID")
			if ( (m = match[1]) ) {
				if ( nodeType === 9 ) {
					elem = context.getElementById( m );
					// Check parentNode to catch when Blackberry 4.6 returns
					// nodes that are no longer in the document (jQuery #6963)
					if ( elem && elem.parentNode ) {
						// Handle the case where IE, Opera, and Webkit return items
						// by name instead of ID
						if ( elem.id === m ) {
							results.push( elem );
							return results;
						}
					} else {
						return results;
					}
				} else {
					// Context is not a document
					if ( context.ownerDocument && (elem = context.ownerDocument.getElementById( m )) &&
						contains( context, elem ) && elem.id === m ) {
						results.push( elem );
						return results;
					}
				}

			// Speed-up: Sizzle("TAG")
			} else if ( match[2] ) {
				push.apply( results, context.getElementsByTagName( selector ) );
				return results;

			// Speed-up: Sizzle(".CLASS")
			} else if ( (m = match[3]) && support.getElementsByClassName ) {
				push.apply( results, context.getElementsByClassName( m ) );
				return results;
			}
		}

		// QSA path
		if ( support.qsa && (!rbuggyQSA || !rbuggyQSA.test( selector )) ) {
			nid = old = expando;
			newContext = context;
			newSelector = nodeType !== 1 && selector;

			// qSA works strangely on Element-rooted queries
			// We can work around this by specifying an extra ID on the root
			// and working up from there (Thanks to Andrew Dupont for the technique)
			// IE 8 doesn't work on object elements
			if ( nodeType === 1 && context.nodeName.toLowerCase() !== "object" ) {
				groups = tokenize( selector );

				if ( (old = context.getAttribute("id")) ) {
					nid = old.replace( rescape, "\\$&" );
				} else {
					context.setAttribute( "id", nid );
				}
				nid = "[id='" + nid + "'] ";

				i = groups.length;
				while ( i-- ) {
					groups[i] = nid + toSelector( groups[i] );
				}
				newContext = rsibling.test( selector ) && testContext( context.parentNode ) || context;
				newSelector = groups.join(",");
			}

			if ( newSelector ) {
				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch(qsaError) {
				} finally {
					if ( !old ) {
						context.removeAttribute("id");
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {Function(string, Object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created div and expects a boolean result
 */
function assert( fn ) {
	var div = document.createElement("div");

	try {
		return !!fn( div );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( div.parentNode ) {
			div.parentNode.removeChild( div );
		}
		// release memory in IE
		div = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = attrs.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			( ~b.sourceIndex || MAX_NEGATIVE ) -
			( ~a.sourceIndex || MAX_NEGATIVE );

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	// documentElement is verified for cases where it doesn't yet exist
	// (such as loading iframes in IE - #4833)
	var documentElement = elem && (elem.ownerDocument || elem).documentElement;
	return documentElement ? documentElement.nodeName !== "HTML" : false;
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, parent,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// If no document and documentElement is available, return
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Set our document
	document = doc;
	docElem = doc.documentElement;
	parent = doc.defaultView;

	// Support: IE>8
	// If iframe document is assigned to "document" variable and if iframe has been reloaded,
	// IE will throw "permission denied" error when accessing "document" variable, see jQuery #13936
	// IE6-8 do not support the defaultView property so parent will be undefined
	if ( parent && parent !== parent.top ) {
		// IE11 does not have attachEvent, so all must suffer
		if ( parent.addEventListener ) {
			parent.addEventListener( "unload", unloadHandler, false );
		} else if ( parent.attachEvent ) {
			parent.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Support tests
	---------------------------------------------------------------------- */
	documentIsHTML = !isXML( doc );

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( div ) {
		div.className = "i";
		return !div.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( div ) {
		div.appendChild( doc.createComment("") );
		return !div.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( doc.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( div ) {
		docElem.appendChild( div ).id = expando;
		return !doc.getElementsByName || !doc.getElementsByName( expando ).length;
	});

	// ID find and filter
	if ( support.getById ) {
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var m = context.getElementById( id );
				// Check parentNode to catch when Blackberry 4.6 returns
				// nodes that are no longer in the document #6963
				return m && m.parentNode ? [ m ] : [];
			}
		};
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
	} else {
		// Support: IE6/7
		// getElementById is not reliable as a find shortcut
		delete Expr.find["ID"];

		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See http://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( doc.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( div ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// http://bugs.jquery.com/ticket/12359
			docElem.appendChild( div ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\f]' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// http://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( div.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !div.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.2+, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.7+
			if ( !div.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibing-combinator selector` fails
			if ( !div.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( div ) {
			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = doc.createElement("input");
			input.setAttribute( "type", "hidden" );
			div.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( div.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( !div.querySelectorAll(":enabled").length ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			div.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( div ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( div, "div" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( div, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully does not implement inclusive descendent
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === doc || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === doc || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === doc ? -1 :
				b === doc ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return doc;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	// Make sure that attribute selectors are quoted
	expr = expr.replace( rattributeQuotes, "='$1']" );

	if ( support.matchesSelector && documentIsHTML &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, outerCache, node, diff, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) {
										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {
							// Seek `elem` from a previously-cached index
							outerCache = parent[ expando ] || (parent[ expando ] = {});
							cache = outerCache[ type ] || [];
							nodeIndex = cache[0] === dirruns && cache[1];
							diff = cache[0] === dirruns && cache[2];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									outerCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						// Use previously-cached element index if available
						} else if ( useCache && (cache = (elem[ expando ] || (elem[ expando ] = {}))[ type ]) && cache[0] === dirruns ) {
							diff = cache[1];

						// xml :nth-child(...) or :nth-last-child(...) or :nth(-last)?-of-type(...)
						} else {
							// Use the same loop as above to seek `elem` from the start
							while ( (node = ++nodeIndex && node && node[ dir ] ||
								(diff = nodeIndex = 0) || start.pop()) ) {

								if ( ( ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1 ) && ++diff ) {
									// Cache the index of each encountered element
									if ( useCache ) {
										(node[ expando ] || (node[ expando ] = {}))[ type ] = [ dirruns, diff ];
									}

									if ( node === elem ) {
										break;
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || elem.innerText || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": function( elem ) {
			return elem.disabled === false;
		},

		"disabled": function( elem ) {
			return elem.disabled === true;
		},

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		checkNonElements = base && dir === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from dir caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});
						if ( (oldCache = outerCache[ dir ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							outerCache[ dir ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context !== document && context;
			}

			// Add elements passing elementMatchers directly to results
			// Keep `i` a string if there are no elements so `matchedCount` will be "00" below
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context, xml ) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// Apply set filters to unmatched elements
			matchedCount += i;
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is no seed and only one group
	if ( match.length === 1 ) {

		// Take a shortcut and set the context if the root selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				support.getById && context.nodeType === 9 && documentIsHTML &&
				Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( div1 ) {
	// Should return 1, but returns 4 (following)
	return div1.compareDocumentPosition( document.createElement("div") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// http://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( div ) {
	div.innerHTML = "<a href='#'></a>";
	return div.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( div ) {
	div.innerHTML = "<input/>";
	div.firstChild.setAttribute( "value", "" );
	return div.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( div ) {
	return div.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;
jQuery.expr[":"] = jQuery.expr.pseudos;
jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;



var rneedsContext = jQuery.expr.match.needsContext;

var rsingleTag = (/^<(\w+)\s*\/?>(?:<\/\1>|)$/);



var risSimple = /^.[^:#\[\.,]*$/;

// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( jQuery.isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			/* jshint -W018 */
			return !!qualifier.call( elem, i, elem ) !== not;
		});

	}

	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		});

	}

	if ( typeof qualifier === "string" ) {
		if ( risSimple.test( qualifier ) ) {
			return jQuery.filter( qualifier, elements, not );
		}

		qualifier = jQuery.filter( qualifier, elements );
	}

	return jQuery.grep( elements, function( elem ) {
		return ( indexOf.call( qualifier, elem ) >= 0 ) !== not;
	});
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	return elems.length === 1 && elem.nodeType === 1 ?
		jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [] :
		jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
			return elem.nodeType === 1;
		}));
};

jQuery.fn.extend({
	find: function( selector ) {
		var i,
			len = this.length,
			ret = [],
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter(function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			}) );
		}

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		// Needed because $( selector, context ) becomes $( context ).find( selector )
		ret = this.pushStack( len > 1 ? jQuery.unique( ret ) : ret );
		ret.selector = this.selector ? this.selector + " " + selector : selector;
		return ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow(this, selector || [], false) );
	},
	not: function( selector ) {
		return this.pushStack( winnow(this, selector || [], true) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
});


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,

	init = jQuery.fn.init = function( selector, context ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[0] === "<" && selector[ selector.length - 1 ] === ">" && selector.length >= 3 ) {
				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && (match[1] || !context) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[1] ) {
					context = context instanceof jQuery ? context[0] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[1],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[1] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {
							// Properties of context are called as methods if possible
							if ( jQuery.isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[2] );

					// Support: Blackberry 4.6
					// gEBID returns nodes no longer in the document (#6963)
					if ( elem && elem.parentNode ) {
						// Inject the element directly into the jQuery object
						this.length = 1;
						this[0] = elem;
					}

					this.context = document;
					this.selector = selector;
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || rootjQuery ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this.context = this[0] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( jQuery.isFunction( selector ) ) {
			return typeof rootjQuery.ready !== "undefined" ?
				rootjQuery.ready( selector ) :
				// Execute immediately if ready is not present
				selector( jQuery );
		}

		if ( selector.selector !== undefined ) {
			this.selector = selector.selector;
			this.context = selector.context;
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,
	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.extend({
	dir: function( elem, dir, until ) {
		var matched = [],
			truncate = until !== undefined;

		while ( (elem = elem[ dir ]) && elem.nodeType !== 9 ) {
			if ( elem.nodeType === 1 ) {
				if ( truncate && jQuery( elem ).is( until ) ) {
					break;
				}
				matched.push( elem );
			}
		}
		return matched;
	},

	sibling: function( n, elem ) {
		var matched = [];

		for ( ; n; n = n.nextSibling ) {
			if ( n.nodeType === 1 && n !== elem ) {
				matched.push( n );
			}
		}

		return matched;
	}
});

jQuery.fn.extend({
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter(function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[i] ) ) {
					return true;
				}
			}
		});
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			pos = rneedsContext.test( selectors ) || typeof selectors !== "string" ?
				jQuery( selectors, context || this.context ) :
				0;

		for ( ; i < l; i++ ) {
			for ( cur = this[i]; cur && cur !== context; cur = cur.parentNode ) {
				// Always skip document fragments
				if ( cur.nodeType < 11 && (pos ?
					pos.index(cur) > -1 :

					// Don't pass non-elements to Sizzle
					cur.nodeType === 1 &&
						jQuery.find.matchesSelector(cur, selectors)) ) {

					matched.push( cur );
					break;
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.unique( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.unique(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter(selector)
		);
	}
});

function sibling( cur, dir ) {
	while ( (cur = cur[dir]) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each({
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return jQuery.dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return jQuery.dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return jQuery.dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return jQuery.dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return jQuery.sibling( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return jQuery.sibling( elem.firstChild );
	},
	contents: function( elem ) {
		return elem.contentDocument || jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {
			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.unique( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
});
var rnotwhite = (/\S+/g);



// String to Object options format cache
var optionsCache = {};

// Convert String-formatted options into Object-formatted ones and store in cache
function createOptions( options ) {
	var object = optionsCache[ options ] = {};
	jQuery.each( options.match( rnotwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	});
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		( optionsCache[ options ] || createOptions( options ) ) :
		jQuery.extend( {}, options );

	var // Last fire value (for non-forgettable lists)
		memory,
		// Flag to know if list was already fired
		fired,
		// Flag to know if list is currently firing
		firing,
		// First callback to fire (used internally by add and fireWith)
		firingStart,
		// End of the loop when firing
		firingLength,
		// Index of currently firing callback (modified by remove if needed)
		firingIndex,
		// Actual callback list
		list = [],
		// Stack of fire calls for repeatable lists
		stack = !options.once && [],
		// Fire callbacks
		fire = function( data ) {
			memory = options.memory && data;
			fired = true;
			firingIndex = firingStart || 0;
			firingStart = 0;
			firingLength = list.length;
			firing = true;
			for ( ; list && firingIndex < firingLength; firingIndex++ ) {
				if ( list[ firingIndex ].apply( data[ 0 ], data[ 1 ] ) === false && options.stopOnFalse ) {
					memory = false; // To prevent further calls using add
					break;
				}
			}
			firing = false;
			if ( list ) {
				if ( stack ) {
					if ( stack.length ) {
						fire( stack.shift() );
					}
				} else if ( memory ) {
					list = [];
				} else {
					self.disable();
				}
			}
		},
		// Actual Callbacks object
		self = {
			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {
					// First, we save the current length
					var start = list.length;
					(function add( args ) {
						jQuery.each( args, function( _, arg ) {
							var type = jQuery.type( arg );
							if ( type === "function" ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && type !== "string" ) {
								// Inspect recursively
								add( arg );
							}
						});
					})( arguments );
					// Do we need to add the callbacks to the
					// current firing batch?
					if ( firing ) {
						firingLength = list.length;
					// With memory, if we're not firing then
					// we should call right away
					} else if ( memory ) {
						firingStart = start;
						fire( memory );
					}
				}
				return this;
			},
			// Remove a callback from the list
			remove: function() {
				if ( list ) {
					jQuery.each( arguments, function( _, arg ) {
						var index;
						while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
							list.splice( index, 1 );
							// Handle firing indexes
							if ( firing ) {
								if ( index <= firingLength ) {
									firingLength--;
								}
								if ( index <= firingIndex ) {
									firingIndex--;
								}
							}
						}
					});
				}
				return this;
			},
			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ? jQuery.inArray( fn, list ) > -1 : !!( list && list.length );
			},
			// Remove all callbacks from the list
			empty: function() {
				list = [];
				firingLength = 0;
				return this;
			},
			// Have the list do nothing anymore
			disable: function() {
				list = stack = memory = undefined;
				return this;
			},
			// Is it disabled?
			disabled: function() {
				return !list;
			},
			// Lock the list in its current state
			lock: function() {
				stack = undefined;
				if ( !memory ) {
					self.disable();
				}
				return this;
			},
			// Is it locked?
			locked: function() {
				return !stack;
			},
			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( list && ( !fired || stack ) ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					if ( firing ) {
						stack.push( args );
					} else {
						fire( args );
					}
				}
				return this;
			},
			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},
			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


jQuery.extend({

	Deferred: function( func ) {
		var tuples = [
				// action, add listener, listener list, final state
				[ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ],
				[ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ],
				[ "notify", "progress", jQuery.Callbacks("memory") ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				then: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;
					return jQuery.Deferred(function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {
							var fn = jQuery.isFunction( fns[ i ] ) && fns[ i ];
							// deferred[ done | fail | progress ] for forwarding actions to newDefer
							deferred[ tuple[1] ](function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && jQuery.isFunction( returned.promise ) ) {
									returned.promise()
										.done( newDefer.resolve )
										.fail( newDefer.reject )
										.progress( newDefer.notify );
								} else {
									newDefer[ tuple[ 0 ] + "With" ]( this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments );
								}
							});
						});
						fns = null;
					}).promise();
				},
				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Keep pipe for back-compat
		promise.pipe = promise.then;

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 3 ];

			// promise[ done | fail | progress ] = list.add
			promise[ tuple[1] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(function() {
					// state = [ resolved | rejected ]
					state = stateString;

				// [ reject_list | resolve_list ].disable; progress_list.lock
				}, tuples[ i ^ 1 ][ 2 ].disable, tuples[ 2 ][ 2 ].lock );
			}

			// deferred[ resolve | reject | notify ]
			deferred[ tuple[0] ] = function() {
				deferred[ tuple[0] + "With" ]( this === deferred ? promise : this, arguments );
				return this;
			};
			deferred[ tuple[0] + "With" ] = list.fireWith;
		});

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( subordinate /* , ..., subordinateN */ ) {
		var i = 0,
			resolveValues = slice.call( arguments ),
			length = resolveValues.length,

			// the count of uncompleted subordinates
			remaining = length !== 1 || ( subordinate && jQuery.isFunction( subordinate.promise ) ) ? length : 0,

			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.
			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),

			// Update function for both resolve and progress values
			updateFunc = function( i, contexts, values ) {
				return function( value ) {
					contexts[ i ] = this;
					values[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( values === progressValues ) {
						deferred.notifyWith( contexts, values );
					} else if ( !( --remaining ) ) {
						deferred.resolveWith( contexts, values );
					}
				};
			},

			progressValues, progressContexts, resolveContexts;

		// Add listeners to Deferred subordinates; treat others as resolved
		if ( length > 1 ) {
			progressValues = new Array( length );
			progressContexts = new Array( length );
			resolveContexts = new Array( length );
			for ( ; i < length; i++ ) {
				if ( resolveValues[ i ] && jQuery.isFunction( resolveValues[ i ].promise ) ) {
					resolveValues[ i ].promise()
						.done( updateFunc( i, resolveContexts, resolveValues ) )
						.fail( deferred.reject )
						.progress( updateFunc( i, progressContexts, progressValues ) );
				} else {
					--remaining;
				}
			}
		}

		// If we're not waiting on anything, resolve the master
		if ( !remaining ) {
			deferred.resolveWith( resolveContexts, resolveValues );
		}

		return deferred.promise();
	}
});


// The deferred used on DOM ready
var readyList;

jQuery.fn.ready = function( fn ) {
	// Add the callback
	jQuery.ready.promise().done( fn );

	return this;
};

jQuery.extend({
	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Hold (or release) the ready event
	holdReady: function( hold ) {
		if ( hold ) {
			jQuery.readyWait++;
		} else {
			jQuery.ready( true );
		}
	},

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );

		// Trigger any bound ready events
		if ( jQuery.fn.triggerHandler ) {
			jQuery( document ).triggerHandler( "ready" );
			jQuery( document ).off( "ready" );
		}
	}
});

/**
 * The ready event handler and self cleanup method
 */
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed, false );
	window.removeEventListener( "load", completed, false );
	jQuery.ready();
}

jQuery.ready.promise = function( obj ) {
	if ( !readyList ) {

		readyList = jQuery.Deferred();

		// Catch cases where $(document).ready() is called after the browser event has already occurred.
		// We once tried to use readyState "interactive" here, but it caused issues like the one
		// discovered by ChrisS here: http://bugs.jquery.com/ticket/12282#comment:15
		if ( document.readyState === "complete" ) {
			// Handle it asynchronously to allow scripts the opportunity to delay ready
			setTimeout( jQuery.ready );

		} else {

			// Use the handy event callback
			document.addEventListener( "DOMContentLoaded", completed, false );

			// A fallback to window.onload, that will always work
			window.addEventListener( "load", completed, false );
		}
	}
	return readyList.promise( obj );
};

// Kick off the DOM ready check even if the user does not
jQuery.ready.promise();




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = jQuery.access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( jQuery.type( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			jQuery.access( elems, fn, i, key[i], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !jQuery.isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {
			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn( elems[i], key, raw ? value : value.call( elems[i], i, fn( elems[i], key ) ) );
			}
		}
	}

	return chainable ?
		elems :

		// Gets
		bulk ?
			fn.call( elems ) :
			len ? fn( elems[0], key ) : emptyGet;
};


/**
 * Determines whether an object can have data
 */
jQuery.acceptData = function( owner ) {
	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	/* jshint -W018 */
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};


function Data() {
	// Support: Android<4,
	// Old WebKit does not have Object.preventExtensions/freeze method,
	// return new empty object instead with no [[set]] accessor
	Object.defineProperty( this.cache = {}, 0, {
		get: function() {
			return {};
		}
	});

	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;
Data.accepts = jQuery.acceptData;

Data.prototype = {
	key: function( owner ) {
		// We can accept data for non-element nodes in modern browsers,
		// but we should not, see #8335.
		// Always return the key for a frozen object.
		if ( !Data.accepts( owner ) ) {
			return 0;
		}

		var descriptor = {},
			// Check if the owner object already has a cache key
			unlock = owner[ this.expando ];

		// If not, create one
		if ( !unlock ) {
			unlock = Data.uid++;

			// Secure it in a non-enumerable, non-writable property
			try {
				descriptor[ this.expando ] = { value: unlock };
				Object.defineProperties( owner, descriptor );

			// Support: Android<4
			// Fallback to a less secure definition
			} catch ( e ) {
				descriptor[ this.expando ] = unlock;
				jQuery.extend( owner, descriptor );
			}
		}

		// Ensure the cache object
		if ( !this.cache[ unlock ] ) {
			this.cache[ unlock ] = {};
		}

		return unlock;
	},
	set: function( owner, data, value ) {
		var prop,
			// There may be an unlock assigned to this node,
			// if there is no entry for this "owner", create one inline
			// and set the unlock as though an owner entry had always existed
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		// Handle: [ owner, key, value ] args
		if ( typeof data === "string" ) {
			cache[ data ] = value;

		// Handle: [ owner, { properties } ] args
		} else {
			// Fresh assignments by object are shallow copied
			if ( jQuery.isEmptyObject( cache ) ) {
				jQuery.extend( this.cache[ unlock ], data );
			// Otherwise, copy the properties one-by-one to the cache object
			} else {
				for ( prop in data ) {
					cache[ prop ] = data[ prop ];
				}
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		// Either a valid cache is found, or will be created.
		// New caches will be created and the unlock returned,
		// allowing direct access to the newly created
		// empty data object. A valid owner object must be provided.
		var cache = this.cache[ this.key( owner ) ];

		return key === undefined ?
			cache : cache[ key ];
	},
	access: function( owner, key, value ) {
		var stored;
		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				((key && typeof key === "string") && value === undefined) ) {

			stored = this.get( owner, key );

			return stored !== undefined ?
				stored : this.get( owner, jQuery.camelCase(key) );
		}

		// [*]When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i, name, camel,
			unlock = this.key( owner ),
			cache = this.cache[ unlock ];

		if ( key === undefined ) {
			this.cache[ unlock ] = {};

		} else {
			// Support array or space separated string of keys
			if ( jQuery.isArray( key ) ) {
				// If "name" is an array of keys...
				// When data is initially created, via ("key", "val") signature,
				// keys will be converted to camelCase.
				// Since there is no way to tell _how_ a key was added, remove
				// both plain key and camelCase key. #12786
				// This will only penalize the array argument path.
				name = key.concat( key.map( jQuery.camelCase ) );
			} else {
				camel = jQuery.camelCase( key );
				// Try the string as a key before any manipulation
				if ( key in cache ) {
					name = [ key, camel ];
				} else {
					// If a key with the spaces exists, use it.
					// Otherwise, create an array by matching non-whitespace
					name = camel;
					name = name in cache ?
						[ name ] : ( name.match( rnotwhite ) || [] );
				}
			}

			i = name.length;
			while ( i-- ) {
				delete cache[ name[ i ] ];
			}
		}
	},
	hasData: function( owner ) {
		return !jQuery.isEmptyObject(
			this.cache[ owner[ this.expando ] ] || {}
		);
	},
	discard: function( owner ) {
		if ( owner[ this.expando ] ) {
			delete this.cache[ owner[ this.expando ] ];
		}
	}
};
var data_priv = new Data();

var data_user = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /([A-Z])/g;

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$1" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = data === "true" ? true :
					data === "false" ? false :
					data === "null" ? null :
					// Only convert to a number if it doesn't change the string
					+data + "" === data ? +data :
					rbrace.test( data ) ? jQuery.parseJSON( data ) :
					data;
			} catch( e ) {}

			// Make sure we set the data so it isn't changed later
			data_user.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend({
	hasData: function( elem ) {
		return data_user.hasData( elem ) || data_priv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return data_user.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		data_user.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to data_priv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return data_priv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		data_priv.remove( elem, name );
	}
});

jQuery.fn.extend({
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = data_user.get( elem );

				if ( elem.nodeType === 1 && !data_priv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE11+
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = jQuery.camelCase( name.slice(5) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					data_priv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each(function() {
				data_user.set( this, key );
			});
		}

		return access( this, function( value ) {
			var data,
				camelKey = jQuery.camelCase( key );

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {
				// Attempt to get data from the cache
				// with the key as-is
				data = data_user.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to get data from the cache
				// with the key camelized
				data = data_user.get( elem, camelKey );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, camelKey, undefined );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each(function() {
				// First, attempt to store a copy or reference of any
				// data that might've been store with a camelCased key.
				var data = data_user.get( this, camelKey );

				// For HTML5 data-* attribute interop, we have to
				// store property names with dashes in a camelCase form.
				// This might not apply to all properties...*
				data_user.set( this, camelKey, value );

				// *... In the case of properties that might _actually_
				// have dashes, we need to also store a copy of that
				// unchanged property.
				if ( key.indexOf("-") !== -1 && data !== undefined ) {
					data_user.set( this, key, value );
				}
			});
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each(function() {
			data_user.remove( this, key );
		});
	}
});


jQuery.extend({
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = data_priv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || jQuery.isArray( data ) ) {
					queue = data_priv.access( elem, type, jQuery.makeArray(data) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return data_priv.get( elem, key ) || data_priv.access( elem, key, {
			empty: jQuery.Callbacks("once memory").add(function() {
				data_priv.remove( elem, [ type + "queue", key ] );
			})
		});
	}
});

jQuery.fn.extend({
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[0], type );
		}

		return data === undefined ?
			this :
			this.each(function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[0] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			});
	},
	dequeue: function( type ) {
		return this.each(function() {
			jQuery.dequeue( this, type );
		});
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},
	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = data_priv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
});
var pnum = (/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/).source;

var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var isHidden = function( elem, el ) {
		// isHidden might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;
		return jQuery.css( elem, "display" ) === "none" || !jQuery.contains( elem.ownerDocument, elem );
	};

var rcheckableType = (/^(?:checkbox|radio)$/i);



(function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Safari<=5.1
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Safari<=5.1, Android<4.2
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE<=11+
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
})();
var strundefined = typeof undefined;



support.focusinBubbles = "onfocusin" in window;


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu)|click/,
	rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !(events = elemData.events) ) {
			events = elemData.events = {};
		}
		if ( !(eventHandle = elemData.handle) ) {
			eventHandle = elemData.handle = function( e ) {
				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== strundefined && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend({
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join(".")
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !(handlers = events[ type ]) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup || special.setup.call( elem, data, namespaces, eventHandle ) === false ) {
					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle, false );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = data_priv.hasData( elem ) && data_priv.get( elem );

		if ( !elemData || !(events = elemData.events) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnotwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[t] ) || [];
			type = origType = tmp[1];
			namespaces = ( tmp[2] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[2] && new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector || selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown || special.teardown.call( elem, namespaces, elemData.handle ) === false ) {
					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			delete elemData.handle;
			data_priv.remove( elem, "events" );
		}
	},

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split(".") : [];

		cur = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf(".") >= 0 ) {
			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split(".");
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf(":") < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join(".");
		event.namespace_re = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !jQuery.isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === (elem.ownerDocument || document) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( (cur = eventPath[i++]) && !event.isPropagationStopped() ) {

			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( data_priv.get( cur, "events" ) || {} )[ event.type ] && data_priv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && jQuery.acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( (!special._default || special._default.apply( eventPath.pop(), data ) === false) &&
				jQuery.acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && jQuery.isFunction( elem[ type ] ) && !jQuery.isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;
					elem[ type ]();
					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	dispatch: function( event ) {

		// Make a writable jQuery.Event from the native event object
		event = jQuery.event.fix( event );

		var i, j, ret, matched, handleObj,
			handlerQueue = [],
			args = slice.call( arguments ),
			handlers = ( data_priv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[0] = event;
		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( (matched = handlerQueue[ i++ ]) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( (handleObj = matched.handlers[ j++ ]) && !event.isImmediatePropagationStopped() ) {

				// Triggered event must either 1) have no namespace, or 2) have namespace(s)
				// a subset or equal to those in the bound event (both can have no namespace).
				if ( !event.namespace_re || event.namespace_re.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
							.apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( (event.result = ret) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, matches, sel, handleObj,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		// Black-hole SVG <use> instance trees (#13180)
		// Avoid non-left-click bubbling in Firefox (#3861)
		if ( delegateCount && cur.nodeType && (!event.button || event.type !== "click") ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.disabled !== true || event.type !== "click" ) {
					matches = [];
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matches[ sel ] === undefined ) {
							matches[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) >= 0 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matches[ sel ] ) {
							matches.push( handleObj );
						}
					}
					if ( matches.length ) {
						handlerQueue.push({ elem: cur, handlers: matches });
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		if ( delegateCount < handlers.length ) {
			handlerQueue.push({ elem: this, handlers: handlers.slice( delegateCount ) });
		}

		return handlerQueue;
	},

	// Includes some event props shared by KeyEvent and MouseEvent
	props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),

	fixHooks: {},

	keyHooks: {
		props: "char charCode key keyCode".split(" "),
		filter: function( event, original ) {

			// Add which for key events
			if ( event.which == null ) {
				event.which = original.charCode != null ? original.charCode : original.keyCode;
			}

			return event;
		}
	},

	mouseHooks: {
		props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
		filter: function( event, original ) {
			var eventDoc, doc, body,
				button = original.button;

			// Calculate pageX/Y if missing and clientX/Y available
			if ( event.pageX == null && original.clientX != null ) {
				eventDoc = event.target.ownerDocument || document;
				doc = eventDoc.documentElement;
				body = eventDoc.body;

				event.pageX = original.clientX + ( doc && doc.scrollLeft || body && body.scrollLeft || 0 ) - ( doc && doc.clientLeft || body && body.clientLeft || 0 );
				event.pageY = original.clientY + ( doc && doc.scrollTop  || body && body.scrollTop  || 0 ) - ( doc && doc.clientTop  || body && body.clientTop  || 0 );
			}

			// Add which for click: 1 === left; 2 === middle; 3 === right
			// Note: button is not normalized, so don't use it
			if ( !event.which && button !== undefined ) {
				event.which = ( button & 1 ? 1 : ( button & 2 ? 3 : ( button & 4 ? 2 : 0 ) ) );
			}

			return event;
		}
	},

	fix: function( event ) {
		if ( event[ jQuery.expando ] ) {
			return event;
		}

		// Create a writable copy of the event object and normalize some properties
		var i, prop, copy,
			type = event.type,
			originalEvent = event,
			fixHook = this.fixHooks[ type ];

		if ( !fixHook ) {
			this.fixHooks[ type ] = fixHook =
				rmouseEvent.test( type ) ? this.mouseHooks :
				rkeyEvent.test( type ) ? this.keyHooks :
				{};
		}
		copy = fixHook.props ? this.props.concat( fixHook.props ) : this.props;

		event = new jQuery.Event( originalEvent );

		i = copy.length;
		while ( i-- ) {
			prop = copy[ i ];
			event[ prop ] = originalEvent[ prop ];
		}

		// Support: Cordova 2.5 (WebKit) (#13255)
		// All events should have a target; Cordova deviceready doesn't
		if ( !event.target ) {
			event.target = document;
		}

		// Support: Safari 6.0+, Chrome<28
		// Target should not be a text node (#504, #13143)
		if ( event.target.nodeType === 3 ) {
			event.target = event.target.parentNode;
		}

		return fixHook.filter ? fixHook.filter( event, originalEvent ) : event;
	},

	special: {
		load: {
			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		focus: {
			// Fire native event if possible so blur/focus sequence is correct
			trigger: function() {
				if ( this !== safeActiveElement() && this.focus ) {
					this.focus();
					return false;
				}
			},
			delegateType: "focusin"
		},
		blur: {
			trigger: function() {
				if ( this === safeActiveElement() && this.blur ) {
					this.blur();
					return false;
				}
			},
			delegateType: "focusout"
		},
		click: {
			// For checkbox, fire native event so checked state will be right
			trigger: function() {
				if ( this.type === "checkbox" && this.click && jQuery.nodeName( this, "input" ) ) {
					this.click();
					return false;
				}
			},

			// For cross-browser consistency, don't fire native .click() on links
			_default: function( event ) {
				return jQuery.nodeName( event.target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	},

	simulate: function( type, elem, event, bubble ) {
		// Piggyback on a donor event to simulate a different one.
		// Fake originalEvent to avoid donor's stopPropagation, but if the
		// simulated event prevents default then we do the same on the donor.
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true,
				originalEvent: {}
			}
		);
		if ( bubble ) {
			jQuery.event.trigger( e, null, elem );
		} else {
			jQuery.event.dispatch.call( elem, e );
		}
		if ( e.isDefaultPrevented() ) {
			event.preventDefault();
		}
	}
};

jQuery.removeEvent = function( elem, type, handle ) {
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle, false );
	}
};

jQuery.Event = function( src, props ) {
	// Allow instantiation without the 'new' keyword
	if ( !(this instanceof jQuery.Event) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&
				// Support: Android<4.0
				src.returnValue === false ?
			returnTrue :
			returnFalse;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || jQuery.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// http://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && e.preventDefault ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && e.stopPropagation ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && e.stopImmediatePropagation ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Create mouseenter/leave events using mouseover/out and event-time checks
// Support: Chrome 15+
jQuery.each({
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mousenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || (related !== target && !jQuery.contains( target, related )) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
});

// Support: Firefox, Chrome, Safari
// Create "bubbling" focus and blur events
if ( !support.focusinBubbles ) {
	jQuery.each({ focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
				jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ), true );
			};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				data_priv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = data_priv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					data_priv.remove( doc, fix );

				} else {
					data_priv.access( doc, fix, attaches );
				}
			}
		};
	});
}

jQuery.fn.extend({

	on: function( types, selector, data, fn, /*INTERNAL*/ one ) {
		var origFn, type;

		// Types can be a map of types/handlers
		if ( typeof types === "object" ) {
			// ( types-Object, selector, data )
			if ( typeof selector !== "string" ) {
				// ( types-Object, data )
				data = data || selector;
				selector = undefined;
			}
			for ( type in types ) {
				this.on( type, selector, data, types[ type ], one );
			}
			return this;
		}

		if ( data == null && fn == null ) {
			// ( types, fn )
			fn = selector;
			data = selector = undefined;
		} else if ( fn == null ) {
			if ( typeof selector === "string" ) {
				// ( types, selector, fn )
				fn = data;
				data = undefined;
			} else {
				// ( types, data, fn )
				fn = data;
				data = selector;
				selector = undefined;
			}
		}
		if ( fn === false ) {
			fn = returnFalse;
		} else if ( !fn ) {
			return this;
		}

		if ( one === 1 ) {
			origFn = fn;
			fn = function( event ) {
				// Can use an empty set, since event contains the info
				jQuery().off( event );
				return origFn.apply( this, arguments );
			};
			// Use same guid so caller can remove using origFn
			fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
		}
		return this.each( function() {
			jQuery.event.add( this, types, fn, data, selector );
		});
	},
	one: function( types, selector, data, fn ) {
		return this.on( types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {
			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {
			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {
			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each(function() {
			jQuery.event.remove( this, types, fn, selector );
		});
	},

	trigger: function( type, data ) {
		return this.each(function() {
			jQuery.event.trigger( type, data, this );
		});
	},
	triggerHandler: function( type, data ) {
		var elem = this[0];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
});


var
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
	rtagName = /<([\w:]+)/,
	rhtml = /<|&#?\w+;/,
	rnoInnerhtml = /<(?:script|style|link)/i,
	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rscriptType = /^$|\/(?:java|ecma)script/i,
	rscriptTypeMasked = /^true\/(.*)/,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,

	// We have to close these tags to support XHTML (#13200)
	wrapMap = {

		// Support: IE9
		option: [ 1, "<select multiple='multiple'>", "</select>" ],

		thead: [ 1, "<table>", "</table>" ],
		col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
		tr: [ 2, "<table><tbody>", "</tbody></table>" ],
		td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

		_default: [ 0, "", "" ]
	};

// Support: IE9
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;

// Support: 1.x compatibility
// Manipulating tables requires a tbody
function manipulationTarget( elem, content ) {
	return jQuery.nodeName( elem, "table" ) &&
		jQuery.nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ?

		elem.getElementsByTagName("tbody")[0] ||
			elem.appendChild( elem.ownerDocument.createElement("tbody") ) :
		elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = (elem.getAttribute("type") !== null) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	var match = rscriptTypeMasked.exec( elem.type );

	if ( match ) {
		elem.type = match[ 1 ];
	} else {
		elem.removeAttribute("type");
	}

	return elem;
}

// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		data_priv.set(
			elems[ i ], "globalEval", !refElements || data_priv.get( refElements[ i ], "globalEval" )
		);
	}
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( data_priv.hasData( src ) ) {
		pdataOld = data_priv.access( src );
		pdataCur = data_priv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( data_user.hasData( src ) ) {
		udataOld = data_user.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		data_user.set( dest, udataCur );
	}
}

function getAll( context, tag ) {
	var ret = context.getElementsByTagName ? context.getElementsByTagName( tag || "*" ) :
			context.querySelectorAll ? context.querySelectorAll( tag || "*" ) :
			[];

	return tag === undefined || tag && jQuery.nodeName( context, tag ) ?
		jQuery.merge( [ context ], ret ) :
		ret;
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

jQuery.extend({
	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = jQuery.contains( elem.ownerDocument, elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: http://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	buildFragment: function( elems, context, scripts, selection ) {
		var elem, tmp, tag, wrap, contains, j,
			fragment = context.createDocumentFragment(),
			nodes = [],
			i = 0,
			l = elems.length;

		for ( ; i < l; i++ ) {
			elem = elems[ i ];

			if ( elem || elem === 0 ) {

				// Add nodes directly
				if ( jQuery.type( elem ) === "object" ) {
					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

				// Convert non-html into a text node
				} else if ( !rhtml.test( elem ) ) {
					nodes.push( context.createTextNode( elem ) );

				// Convert html into DOM nodes
				} else {
					tmp = tmp || fragment.appendChild( context.createElement("div") );

					// Deserialize a standard representation
					tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
					wrap = wrapMap[ tag ] || wrapMap._default;
					tmp.innerHTML = wrap[ 1 ] + elem.replace( rxhtmlTag, "<$1></$2>" ) + wrap[ 2 ];

					// Descend through wrappers to the right content
					j = wrap[ 0 ];
					while ( j-- ) {
						tmp = tmp.lastChild;
					}

					// Support: QtWebKit, PhantomJS
					// push.apply(_, arraylike) throws on ancient WebKit
					jQuery.merge( nodes, tmp.childNodes );

					// Remember the top-level container
					tmp = fragment.firstChild;

					// Ensure the created nodes are orphaned (#12392)
					tmp.textContent = "";
				}
			}
		}

		// Remove wrapper from fragment
		fragment.textContent = "";

		i = 0;
		while ( (elem = nodes[ i++ ]) ) {

			// #4087 - If origin and destination elements are the same, and this is
			// that element, do not do anything
			if ( selection && jQuery.inArray( elem, selection ) !== -1 ) {
				continue;
			}

			contains = jQuery.contains( elem.ownerDocument, elem );

			// Append to fragment
			tmp = getAll( fragment.appendChild( elem ), "script" );

			// Preserve script evaluation history
			if ( contains ) {
				setGlobalEval( tmp );
			}

			// Capture executables
			if ( scripts ) {
				j = 0;
				while ( (elem = tmp[ j++ ]) ) {
					if ( rscriptType.test( elem.type || "" ) ) {
						scripts.push( elem );
					}
				}
			}
		}

		return fragment;
	},

	cleanData: function( elems ) {
		var data, elem, type, key,
			special = jQuery.event.special,
			i = 0;

		for ( ; (elem = elems[ i ]) !== undefined; i++ ) {
			if ( jQuery.acceptData( elem ) ) {
				key = elem[ data_priv.expando ];

				if ( key && (data = data_priv.cache[ key ]) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}
					if ( data_priv.cache[ key ] ) {
						// Discard any remaining `private` data
						delete data_priv.cache[ key ];
					}
				}
			}
			// Discard any remaining `user` data
			delete data_user.cache[ elem[ data_user.expando ] ];
		}
	}
});

jQuery.fn.extend({
	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each(function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				});
		}, null, value, arguments.length );
	},

	append: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		});
	},

	prepend: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		});
	},

	before: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		});
	},

	after: function() {
		return this.domManip( arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		});
	},

	remove: function( selector, keepData /* Internal Use Only */ ) {
		var elem,
			elems = selector ? jQuery.filter( selector, this ) : this,
			i = 0;

		for ( ; (elem = elems[i]) != null; i++ ) {
			if ( !keepData && elem.nodeType === 1 ) {
				jQuery.cleanData( getAll( elem ) );
			}

			if ( elem.parentNode ) {
				if ( keepData && jQuery.contains( elem.ownerDocument, elem ) ) {
					setGlobalEval( getAll( elem, "script" ) );
				}
				elem.parentNode.removeChild( elem );
			}
		}

		return this;
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; (elem = this[i]) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map(function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		});
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = value.replace( rxhtmlTag, "<$1></$2>" );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var arg = arguments[ 0 ];

		// Make the changes, replacing each context element with the new content
		this.domManip( arguments, function( elem ) {
			arg = this.parentNode;

			jQuery.cleanData( getAll( this ) );

			if ( arg ) {
				arg.replaceChild( elem, this );
			}
		});

		// Force removal if there was no new content (e.g., from empty arguments)
		return arg && (arg.length || arg.nodeType) ? this : this.remove();
	},

	detach: function( selector ) {
		return this.remove( selector, true );
	},

	domManip: function( args, callback ) {

		// Flatten any nested arrays
		args = concat.apply( [], args );

		var fragment, first, scripts, hasScripts, node, doc,
			i = 0,
			l = this.length,
			set = this,
			iNoClone = l - 1,
			value = args[ 0 ],
			isFunction = jQuery.isFunction( value );

		// We can't cloneNode fragments that contain checked, in WebKit
		if ( isFunction ||
				( l > 1 && typeof value === "string" &&
					!support.checkClone && rchecked.test( value ) ) ) {
			return this.each(function( index ) {
				var self = set.eq( index );
				if ( isFunction ) {
					args[ 0 ] = value.call( this, index, self.html() );
				}
				self.domManip( args, callback );
			});
		}

		if ( l ) {
			fragment = jQuery.buildFragment( args, this[ 0 ].ownerDocument, false, this );
			first = fragment.firstChild;

			if ( fragment.childNodes.length === 1 ) {
				fragment = first;
			}

			if ( first ) {
				scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
				hasScripts = scripts.length;

				// Use the original fragment for the last item instead of the first because it can end up
				// being emptied incorrectly in certain situations (#8070).
				for ( ; i < l; i++ ) {
					node = fragment;

					if ( i !== iNoClone ) {
						node = jQuery.clone( node, true, true );

						// Keep references to cloned scripts for later restoration
						if ( hasScripts ) {
							// Support: QtWebKit
							// jQuery.merge because push.apply(_, arraylike) throws
							jQuery.merge( scripts, getAll( node, "script" ) );
						}
					}

					callback.call( this[ i ], node, i );
				}

				if ( hasScripts ) {
					doc = scripts[ scripts.length - 1 ].ownerDocument;

					// Reenable scripts
					jQuery.map( scripts, restoreScript );

					// Evaluate executable scripts on first document insertion
					for ( i = 0; i < hasScripts; i++ ) {
						node = scripts[ i ];
						if ( rscriptType.test( node.type || "" ) &&
							!data_priv.access( node, "globalEval" ) && jQuery.contains( doc, node ) ) {

							if ( node.src ) {
								// Optional AJAX dependency, but won't run scripts if not present
								if ( jQuery._evalUrl ) {
									jQuery._evalUrl( node.src );
								}
							} else {
								jQuery.globalEval( node.textContent.replace( rcleanScript, "" ) );
							}
						}
					}
				}
			}
		}

		return this;
	}
});

jQuery.each({
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: QtWebKit
			// .get() because push.apply(_, arraylike) throws
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
});


var iframe,
	elemdisplay = {};

/**
 * Retrieve the actual display of a element
 * @param {String} name nodeName of the element
 * @param {Object} doc Document object
 */
// Called only from within defaultDisplay
function actualDisplay( name, doc ) {
	var style,
		elem = jQuery( doc.createElement( name ) ).appendTo( doc.body ),

		// getDefaultComputedStyle might be reliably used only on attached element
		display = window.getDefaultComputedStyle && ( style = window.getDefaultComputedStyle( elem[ 0 ] ) ) ?

			// Use of this method is a temporary fix (more like optimization) until something better comes along,
			// since it was removed from specification and supported only in FF
			style.display : jQuery.css( elem[ 0 ], "display" );

	// We don't have any data stored on the element,
	// so use "detach" method as fast way to get rid of the element
	elem.detach();

	return display;
}

/**
 * Try to determine the default display value of an element
 * @param {String} nodeName
 */
function defaultDisplay( nodeName ) {
	var doc = document,
		display = elemdisplay[ nodeName ];

	if ( !display ) {
		display = actualDisplay( nodeName, doc );

		// If the simple way fails, read from inside an iframe
		if ( display === "none" || !display ) {

			// Use the already-created iframe if possible
			iframe = (iframe || jQuery( "<iframe frameborder='0' width='0' height='0'/>" )).appendTo( doc.documentElement );

			// Always write a new HTML skeleton so Webkit and Firefox don't choke on reuse
			doc = iframe[ 0 ].contentDocument;

			// Support: IE
			doc.write();
			doc.close();

			display = actualDisplay( nodeName, doc );
			iframe.detach();
		}

		// Store the correct default display
		elemdisplay[ nodeName ] = display;
	}

	return display;
}
var rmargin = (/^margin/);

var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {
		// Support: IE<=11+, Firefox<=30+ (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		if ( elem.ownerDocument.defaultView.opener ) {
			return elem.ownerDocument.defaultView.getComputedStyle( elem, null );
		}

		return window.getComputedStyle( elem, null );
	};



function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,
		style = elem.style;

	computed = computed || getStyles( elem );

	// Support: IE9
	// getPropertyValue is only needed for .css('filter') (#12537)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];
	}

	if ( computed ) {

		if ( ret === "" && !jQuery.contains( elem.ownerDocument, elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// Support: iOS < 6
		// A tribute to the "awesome hack by Dean Edwards"
		// iOS < 6 (at least) returns percentage for a larger set of values, but width seems to be reliably pixels
		// this is against the CSSOM draft spec: http://dev.w3.org/csswg/cssom/#resolved-values
		if ( rnumnonpx.test( ret ) && rmargin.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?
		// Support: IE
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {
	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {
				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return (this.get = hookFn).apply( this, arguments );
		}
	};
}


(function() {
	var pixelPositionVal, boxSizingReliableVal,
		docElem = document.documentElement,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	if ( !div.style ) {
		return;
	}

	// Support: IE9-11+
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	container.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;" +
		"position:absolute";
	container.appendChild( div );

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computePixelPositionAndBoxSizingReliable() {
		div.style.cssText =
			// Support: Firefox<29, Android 2.3
			// Vendor-prefix box-sizing
			"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;" +
			"box-sizing:border-box;display:block;margin-top:1%;top:1%;" +
			"border:1px;padding:1px;width:4px;position:absolute";
		div.innerHTML = "";
		docElem.appendChild( container );

		var divStyle = window.getComputedStyle( div, null );
		pixelPositionVal = divStyle.top !== "1%";
		boxSizingReliableVal = divStyle.width === "4px";

		docElem.removeChild( container );
	}

	// Support: node.js jsdom
	// Don't assume that getComputedStyle is a property of the global object
	if ( window.getComputedStyle ) {
		jQuery.extend( support, {
			pixelPosition: function() {

				// This test is executed only once but we still do memoizing
				// since we can use the boxSizingReliable pre-computing.
				// No need to check if the test was already performed, though.
				computePixelPositionAndBoxSizingReliable();
				return pixelPositionVal;
			},
			boxSizingReliable: function() {
				if ( boxSizingReliableVal == null ) {
					computePixelPositionAndBoxSizingReliable();
				}
				return boxSizingReliableVal;
			},
			reliableMarginRight: function() {

				// Support: Android 2.3
				// Check if div with explicit width and no margin-right incorrectly
				// gets computed margin-right based on width of container. (#3333)
				// WebKit Bug 13343 - getComputedStyle returns wrong value for margin-right
				// This support function is only executed once so no memoizing is needed.
				var ret,
					marginDiv = div.appendChild( document.createElement( "div" ) );

				// Reset CSS: box-sizing; display; margin; border; padding
				marginDiv.style.cssText = div.style.cssText =
					// Support: Firefox<29, Android 2.3
					// Vendor-prefix box-sizing
					"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" +
					"box-sizing:content-box;display:block;margin:0;border:0;padding:0";
				marginDiv.style.marginRight = marginDiv.style.width = "0";
				div.style.width = "1px";
				docElem.appendChild( container );

				ret = !parseFloat( window.getComputedStyle( marginDiv, null ).marginRight );

				docElem.removeChild( container );
				div.removeChild( marginDiv );

				return ret;
			}
		});
	}
})();


// A method for quickly swapping in/out CSS properties to get correct calculations.
jQuery.swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};


var
	// Swappable if display is none or starts with table except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rnumsplit = new RegExp( "^(" + pnum + ")(.*)$", "i" ),
	rrelNum = new RegExp( "^([+-])=(" + pnum + ")", "i" ),

	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	},

	cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];

// Return a css property mapped to a potentially vendor prefixed property
function vendorPropName( style, name ) {

	// Shortcut for names that are not vendor prefixed
	if ( name in style ) {
		return name;
	}

	// Check for vendor prefixed names
	var capName = name[0].toUpperCase() + name.slice(1),
		origName = name,
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in style ) {
			return name;
		}
	}

	return origName;
}

function setPositiveNumber( elem, value, subtract ) {
	var matches = rnumsplit.exec( value );
	return matches ?
		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 1 ] - ( subtract || 0 ) ) + ( matches[ 2 ] || "px" ) :
		value;
}

function augmentWidthOrHeight( elem, name, extra, isBorderBox, styles ) {
	var i = extra === ( isBorderBox ? "border" : "content" ) ?
		// If we already have the right measurement, avoid augmentation
		4 :
		// Otherwise initialize for horizontal or vertical properties
		name === "width" ? 1 : 0,

		val = 0;

	for ( ; i < 4; i += 2 ) {
		// Both box models exclude margin, so add it if we want it
		if ( extra === "margin" ) {
			val += jQuery.css( elem, extra + cssExpand[ i ], true, styles );
		}

		if ( isBorderBox ) {
			// border-box includes padding, so remove it if we want content
			if ( extra === "content" ) {
				val -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// At this point, extra isn't border nor margin, so remove border
			if ( extra !== "margin" ) {
				val -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		} else {
			// At this point, extra isn't content, so add padding
			val += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// At this point, extra isn't content nor padding, so add border
			if ( extra !== "padding" ) {
				val += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	return val;
}

function getWidthOrHeight( elem, name, extra ) {

	// Start with offset property, which is equivalent to the border-box value
	var valueIsBorderBox = true,
		val = name === "width" ? elem.offsetWidth : elem.offsetHeight,
		styles = getStyles( elem ),
		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

	// Some non-html elements return undefined for offsetWidth, so check for null/undefined
	// svg - https://bugzilla.mozilla.org/show_bug.cgi?id=649285
	// MathML - https://bugzilla.mozilla.org/show_bug.cgi?id=491668
	if ( val <= 0 || val == null ) {
		// Fall back to computed then uncomputed css if necessary
		val = curCSS( elem, name, styles );
		if ( val < 0 || val == null ) {
			val = elem.style[ name ];
		}

		// Computed unit is not pixels. Stop here and return.
		if ( rnumnonpx.test(val) ) {
			return val;
		}

		// Check for style in case a browser which returns unreliable values
		// for getComputedStyle silently falls back to the reliable elem.style
		valueIsBorderBox = isBorderBox &&
			( support.boxSizingReliable() || val === elem.style[ name ] );

		// Normalize "", auto, and prepare for extra
		val = parseFloat( val ) || 0;
	}

	// Use the active box-sizing model to add/subtract irrelevant styles
	return ( val +
		augmentWidthOrHeight(
			elem,
			name,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles
		)
	) + "px";
}

function showHide( elements, show ) {
	var display, elem, hidden,
		values = [],
		index = 0,
		length = elements.length;

	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		values[ index ] = data_priv.get( elem, "olddisplay" );
		display = elem.style.display;
		if ( show ) {
			// Reset the inline display of this element to learn if it is
			// being hidden by cascaded rules or not
			if ( !values[ index ] && display === "none" ) {
				elem.style.display = "";
			}

			// Set elements which have been overridden with display: none
			// in a stylesheet to whatever the default browser style is
			// for such an element
			if ( elem.style.display === "" && isHidden( elem ) ) {
				values[ index ] = data_priv.access( elem, "olddisplay", defaultDisplay(elem.nodeName) );
			}
		} else {
			hidden = isHidden( elem );

			if ( display !== "none" || !hidden ) {
				data_priv.set( elem, "olddisplay", hidden ? display : jQuery.css( elem, "display" ) );
			}
		}
	}

	// Set the display of most of the elements in a second loop
	// to avoid the constant reflow
	for ( index = 0; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}
		if ( !show || elem.style.display === "none" || elem.style.display === "" ) {
			elem.style.display = show ? values[ index ] || "" : "none";
		}
	}

	return elements;
}

jQuery.extend({

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {
		"float": "cssFloat"
	},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = jQuery.camelCase( name ),
			style = elem.style;

		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( style, origName ) );

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && (ret = rrelNum.exec( value )) ) {
				value = ( ret[1] + 1 ) * ret[2] + parseFloat( jQuery.css( elem, name ) );
				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number, add 'px' to the (except for certain CSS properties)
			if ( type === "number" && !jQuery.cssNumber[ origName ] ) {
				value += "px";
			}

			// Support: IE9-11+
			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !("set" in hooks) || (value = hooks.set( elem, value, extra )) !== undefined ) {
				style[ name ] = value;
			}

		} else {
			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks && (ret = hooks.get( elem, false, extra )) !== undefined ) {
				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = jQuery.camelCase( name );

		// Make sure that we're working with the right name
		name = jQuery.cssProps[ origName ] || ( jQuery.cssProps[ origName ] = vendorPropName( elem.style, origName ) );

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || jQuery.isNumeric( num ) ? num || 0 : val;
		}
		return val;
	}
});

jQuery.each([ "height", "width" ], function( i, name ) {
	jQuery.cssHooks[ name ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) && elem.offsetWidth === 0 ?
					jQuery.swap( elem, cssShow, function() {
						return getWidthOrHeight( elem, name, extra );
					}) :
					getWidthOrHeight( elem, name, extra );
			}
		},

		set: function( elem, value, extra ) {
			var styles = extra && getStyles( elem );
			return setPositiveNumber( elem, value, extra ?
				augmentWidthOrHeight(
					elem,
					name,
					extra,
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
					styles
				) : 0
			);
		}
	};
});

// Support: Android 2.3
jQuery.cssHooks.marginRight = addGetHookIf( support.reliableMarginRight,
	function( elem, computed ) {
		if ( computed ) {
			return jQuery.swap( elem, { "display": "inline-block" },
				curCSS, [ elem, "marginRight" ] );
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each({
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split(" ") : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( !rmargin.test( prefix ) ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
});

jQuery.fn.extend({
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( jQuery.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	},
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each(function() {
			if ( isHidden( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		});
	}
});


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || "swing";
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			if ( tween.elem[ tween.prop ] != null &&
				(!tween.elem.style || tween.elem.style[ tween.prop ] == null) ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );
			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {
			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.style && ( tween.elem.style[ jQuery.cssProps[ tween.prop ] ] != null || jQuery.cssHooks[ tween.prop ] ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE9
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	}
};

jQuery.fx = Tween.prototype.init;

// Back Compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, timerId,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rfxnum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" ),
	rrun = /queueHooks$/,
	animationPrefilters = [ defaultPrefilter ],
	tweeners = {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value ),
				target = tween.cur(),
				parts = rfxnum.exec( value ),
				unit = parts && parts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

				// Starting value computation is required for potential unit mismatches
				start = ( jQuery.cssNumber[ prop ] || unit !== "px" && +target ) &&
					rfxnum.exec( jQuery.css( tween.elem, prop ) ),
				scale = 1,
				maxIterations = 20;

			if ( start && start[ 3 ] !== unit ) {
				// Trust units reported by jQuery.css
				unit = unit || start[ 3 ];

				// Make sure we update the tween properties later on
				parts = parts || [];

				// Iteratively approximate from a nonzero starting point
				start = +target || 1;

				do {
					// If previous iteration zeroed out, double until we get *something*.
					// Use string for doubling so we don't accidentally see scale as unchanged below
					scale = scale || ".5";

					// Adjust and apply
					start = start / scale;
					jQuery.style( tween.elem, prop, start + unit );

				// Update scale, tolerating zero or NaN from tween.cur(),
				// break the loop if scale is unchanged or perfect, or if we've just had enough
				} while ( scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations );
			}

			// Update tween properties
			if ( parts ) {
				start = tween.start = +start || +target || 0;
				tween.unit = unit;
				// If a +=/-= token was provided, we're doing a relative animation
				tween.end = parts[ 1 ] ?
					start + ( parts[ 1 ] + 1 ) * parts[ 2 ] :
					+parts[ 2 ];
			}

			return tween;
		} ]
	};

// Animations created synchronously will run synchronously
function createFxNow() {
	setTimeout(function() {
		fxNow = undefined;
	});
	return ( fxNow = jQuery.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4 ; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( tweeners[ prop ] || [] ).concat( tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( (tween = collection[ index ].call( animation, prop, value )) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	/* jshint validthis: true */
	var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHidden( elem ),
		dataShow = data_priv.get( elem, "fxshow" );

	// Handle queue: false promises
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always(function() {
			// Ensure the complete handler is called before this completes
			anim.always(function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			});
		});
	}

	// Height/width overflow pass
	if ( elem.nodeType === 1 && ( "height" in props || "width" in props ) ) {
		// Make sure that nothing sneaks out
		// Record all 3 overflow attributes because IE9-10 do not
		// change the overflow attribute when overflowX and
		// overflowY are set to the same value
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Set display property to inline-block for height/width
		// animations on inline elements that are having width/height animated
		display = jQuery.css( elem, "display" );

		// Test default display if display is currently "none"
		checkDisplay = display === "none" ?
			data_priv.get( elem, "olddisplay" ) || defaultDisplay( elem.nodeName ) : display;

		if ( checkDisplay === "inline" && jQuery.css( elem, "float" ) === "none" ) {
			style.display = "inline-block";
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always(function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		});
	}

	// show/hide pass
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.exec( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// If there is dataShow left over from a stopped hide or show and we are going to proceed with show, we should pretend to be hidden
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );

		// Any non-fx value stops us from restoring the original display value
		} else {
			display = undefined;
		}
	}

	if ( !jQuery.isEmptyObject( orig ) ) {
		if ( dataShow ) {
			if ( "hidden" in dataShow ) {
				hidden = dataShow.hidden;
			}
		} else {
			dataShow = data_priv.access( elem, "fxshow", {} );
		}

		// Store state if its toggle - enables .stop().toggle() to "reverse"
		if ( toggle ) {
			dataShow.hidden = !hidden;
		}
		if ( hidden ) {
			jQuery( elem ).show();
		} else {
			anim.done(function() {
				jQuery( elem ).hide();
			});
		}
		anim.done(function() {
			var prop;

			data_priv.remove( elem, "fxshow" );
			for ( prop in orig ) {
				jQuery.style( elem, prop, orig[ prop ] );
			}
		});
		for ( prop in orig ) {
			tween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );

			if ( !( prop in dataShow ) ) {
				dataShow[ prop ] = tween.start;
				if ( hidden ) {
					tween.end = tween.start;
					tween.start = prop === "width" || prop === "height" ? 1 : 0;
				}
			}
		}

	// If this is a noop like .hide().hide(), restore an overwritten display value
	} else if ( (display === "none" ? defaultDisplay( elem.nodeName ) : display) === "inline" ) {
		style.display = display;
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = jQuery.camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( jQuery.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = animationPrefilters.length,
		deferred = jQuery.Deferred().always( function() {
			// Don't match elem in the :animated selector
			delete tick.elem;
		}),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),
				// Support: Android 2.3
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length ; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ]);

			if ( percent < 1 && length ) {
				return remaining;
			} else {
				deferred.resolveWith( elem, [ animation ] );
				return false;
			}
		},
		animation = deferred.promise({
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, { specialEasing: {} }, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,
					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length ; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		}),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length ; index++ ) {
		result = animationPrefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( jQuery.isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		})
	);

	// attach callbacks from options
	return animation.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );
}

jQuery.Animation = jQuery.extend( Animation, {

	tweener: function( props, callback ) {
		if ( jQuery.isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.split(" ");
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length ; index++ ) {
			prop = props[ index ];
			tweeners[ prop ] = tweeners[ prop ] || [];
			tweeners[ prop ].unshift( callback );
		}
	},

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			animationPrefilters.unshift( callback );
		} else {
			animationPrefilters.push( callback );
		}
	}
});

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			jQuery.isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !jQuery.isFunction( easing ) && easing
	};

	opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration :
		opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[ opt.duration ] : jQuery.fx.speeds._default;

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( jQuery.isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend({
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHidden ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate({ opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {
				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || data_priv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each(function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = data_priv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && (type == null || timers[ index ].queue === type) ) {
					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		});
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each(function() {
			var index,
				data = data_priv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		});
	}
});

jQuery.each([ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
});

// Generate shortcuts for custom animations
jQuery.each({
	slideDown: genFx("show"),
	slideUp: genFx("hide"),
	slideToggle: genFx("toggle"),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
});

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = jQuery.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];
		// Checks the timer has not already been removed
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	if ( timer() ) {
		jQuery.fx.start();
	} else {
		jQuery.timers.pop();
	}
};

jQuery.fx.interval = 13;

jQuery.fx.start = function() {
	if ( !timerId ) {
		timerId = setInterval( jQuery.fx.tick, jQuery.fx.interval );
	}
};

jQuery.fx.stop = function() {
	clearInterval( timerId );
	timerId = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,
	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = setTimeout( next, time );
		hooks.stop = function() {
			clearTimeout( timeout );
		};
	});
};


(function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: iOS<=5.1, Android<=4.2+
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE<=11+
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: Android<=2.3
	// Options inside disabled selects are incorrectly marked as disabled
	select.disabled = true;
	support.optDisabled = !opt.disabled;

	// Support: IE<=11+
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
})();


var nodeHook, boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend({
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each(function() {
			jQuery.removeAttr( this, name );
		});
	}
});

jQuery.extend({
	attr: function( elem, name, value ) {
		var hooks, ret,
			nType = elem.nodeType;

		// don't get/set attributes on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === strundefined ) {
			return jQuery.prop( elem, name, value );
		}

		// All attributes are lowercase
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			name = name.toLowerCase();
			hooks = jQuery.attrHooks[ name ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : nodeHook );
		}

		if ( value !== undefined ) {

			if ( value === null ) {
				jQuery.removeAttr( elem, name );

			} else if ( hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ) {
				return ret;

			} else {
				elem.setAttribute( name, value + "" );
				return value;
			}

		} else if ( hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ) {
			return ret;

		} else {
			ret = jQuery.find.attr( elem, name );

			// Non-existent attributes return null, we normalize to undefined
			return ret == null ?
				undefined :
				ret;
		}
	},

	removeAttr: function( elem, value ) {
		var name, propName,
			i = 0,
			attrNames = value && value.match( rnotwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( (name = attrNames[i++]) ) {
				propName = jQuery.propFix[ name ] || name;

				// Boolean attributes get special treatment (#10870)
				if ( jQuery.expr.match.bool.test( name ) ) {
					// Set corresponding property to false
					elem[ propName ] = false;
				}

				elem.removeAttribute( name );
			}
		}
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					jQuery.nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	}
});

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {
			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};
jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle;
		if ( !isXML ) {
			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ name ];
			attrHandle[ name ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				name.toLowerCase() :
				null;
			attrHandle[ name ] = handle;
		}
		return ret;
	};
});




var rfocusable = /^(?:input|select|textarea|button)$/i;

jQuery.fn.extend({
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each(function() {
			delete this[ jQuery.propFix[ name ] || name ];
		});
	}
});

jQuery.extend({
	propFix: {
		"for": "htmlFor",
		"class": "className"
	},

	prop: function( elem, name, value ) {
		var ret, hooks, notxml,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( !elem || nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		notxml = nType !== 1 || !jQuery.isXMLDoc( elem );

		if ( notxml ) {
			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			return hooks && "set" in hooks && (ret = hooks.set( elem, value, name )) !== undefined ?
				ret :
				( elem[ name ] = value );

		} else {
			return hooks && "get" in hooks && (ret = hooks.get( elem, name )) !== null ?
				ret :
				elem[ name ];
		}
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {
				return elem.hasAttribute( "tabindex" ) || rfocusable.test( elem.nodeName ) || elem.href ?
					elem.tabIndex :
					-1;
			}
		}
	}
});

if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {
			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		}
	};
}

jQuery.each([
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
});




var rclass = /[\t\r\n\f]/g;

jQuery.fn.extend({
	addClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).addClass( value.call( this, j, this.className ) );
			});
		}

		if ( proceed ) {
			// The disjunction here is for better compressibility (see removeClass)
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					" "
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// only assign if different to avoid unneeded rendering.
					finalValue = jQuery.trim( cur );
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, clazz, j, finalValue,
			proceed = arguments.length === 0 || typeof value === "string" && value,
			i = 0,
			len = this.length;

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( j ) {
				jQuery( this ).removeClass( value.call( this, j, this.className ) );
			});
		}
		if ( proceed ) {
			classes = ( value || "" ).match( rnotwhite ) || [];

			for ( ; i < len; i++ ) {
				elem = this[ i ];
				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( elem.className ?
					( " " + elem.className + " " ).replace( rclass, " " ) :
					""
				);

				if ( cur ) {
					j = 0;
					while ( (clazz = classes[j++]) ) {
						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) >= 0 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = value ? jQuery.trim( cur ) : "";
					if ( elem.className !== finalValue ) {
						elem.className = finalValue;
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value;

		if ( typeof stateVal === "boolean" && type === "string" ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( jQuery.isFunction( value ) ) {
			return this.each(function( i ) {
				jQuery( this ).toggleClass( value.call(this, i, this.className, stateVal), stateVal );
			});
		}

		return this.each(function() {
			if ( type === "string" ) {
				// Toggle individual class names
				var className,
					i = 0,
					self = jQuery( this ),
					classNames = value.match( rnotwhite ) || [];

				while ( (className = classNames[ i++ ]) ) {
					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( type === strundefined || type === "boolean" ) {
				if ( this.className ) {
					// store className if set
					data_priv.set( this, "__className__", this.className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				this.className = this.className || value === false ? "" : data_priv.get( this, "__className__" ) || "";
			}
		});
	},

	hasClass: function( selector ) {
		var className = " " + selector + " ",
			i = 0,
			l = this.length;
		for ( ; i < l; i++ ) {
			if ( this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf( className ) >= 0 ) {
				return true;
			}
		}

		return false;
	}
});




var rreturn = /\r/g;

jQuery.fn.extend({
	val: function( value ) {
		var hooks, ret, isFunction,
			elem = this[0];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] || jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks && "get" in hooks && (ret = hooks.get( elem, "value" )) !== undefined ) {
					return ret;
				}

				ret = elem.value;

				return typeof ret === "string" ?
					// Handle most common string cases
					ret.replace(rreturn, "") :
					// Handle cases where value is null/undef or number
					ret == null ? "" : ret;
			}

			return;
		}

		isFunction = jQuery.isFunction( value );

		return this.each(function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( isFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( jQuery.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				});
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !("set" in hooks) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		});
	}
});

jQuery.extend({
	valHooks: {
		option: {
			get: function( elem ) {
				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :
					// Support: IE10-11+
					// option.text throws exceptions (#14686, #14858)
					jQuery.trim( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one" || index < 0,
					values = one ? null : [],
					max = one ? index + 1 : options.length,
					i = index < 0 ?
						max :
						one ? index : 0;

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// IE6-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&
							// Don't return options that are disabled or in a disabled optgroup
							( support.optDisabled ? !option.disabled : option.getAttribute( "disabled" ) === null ) &&
							( !option.parentNode.disabled || !jQuery.nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];
					if ( (option.selected = jQuery.inArray( option.value, values ) >= 0) ) {
						optionSet = true;
					}
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
});

// Radios and checkboxes getter/setter
jQuery.each([ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( jQuery.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery(elem).val(), value ) >= 0 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute("value") === null ? "on" : elem.value;
		};
	}
});




// Return jQuery for attributes-only inclusion


jQuery.each( ("blur focus focusin focusout load resize scroll unload click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup error contextmenu").split(" "), function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
});

jQuery.fn.extend({
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	},

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {
		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ? this.off( selector, "**" ) : this.off( types, selector || "**", fn );
	}
});


var nonce = jQuery.now();

var rquery = (/\?/);



// Support: Android 2.3
// Workaround failure to string-cast null input
jQuery.parseJSON = function( data ) {
	return JSON.parse( data + "" );
};


// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml, tmp;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE9
	try {
		tmp = new DOMParser();
		xml = tmp.parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rhash = /#.*$/,
	rts = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,
	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,
	rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Document location
	ajaxLocation = window.location.href,

	// Segment location into parts
	ajaxLocParts = rurl.exec( ajaxLocation.toLowerCase() ) || [];

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnotwhite ) || [];

		if ( jQuery.isFunction( func ) ) {
			// For each dataType in the dataTypeExpression
			while ( (dataType = dataTypes[i++]) ) {
				// Prepend if requested
				if ( dataType[0] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					(structure[ dataType ] = structure[ dataType ] || []).unshift( func );

				// Otherwise append
				} else {
					(structure[ dataType ] = structure[ dataType ] || []).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[ dataTypeOrTransport ] ) {
				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		});
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || (deep = {}) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {
		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[0] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}
		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},
		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

		// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {
								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s[ "throws" ] ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return { state: "parsererror", error: conv ? e : "No conversion from " + prev + " to " + current };
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend({

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: ajaxLocation,
		type: "GET",
		isLocal: rlocalProtocol.test( ajaxLocParts[ 1 ] ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",
		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /xml/,
			html: /html/,
			json: /json/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": jQuery.parseJSON,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,
			// URL without anti-cache param
			cacheURL,
			// Response headers
			responseHeadersString,
			responseHeaders,
			// timeout handle
			timeoutTimer,
			// Cross-domain detection vars
			parts,
			// To know if global events are to be dispatched
			fireGlobals,
			// Loop variable
			i,
			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),
			// Callbacks context
			callbackContext = s.context || s,
			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context && ( callbackContext.nodeType || callbackContext.jquery ) ?
				jQuery( callbackContext ) :
				jQuery.event,
			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks("once memory"),
			// Status-dependent callbacks
			statusCode = s.statusCode || {},
			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},
			// The jqXHR state
			state = 0,
			// Default abort message
			strAbort = "canceled",
			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( state === 2 ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( (match = rheaders.exec( responseHeadersString )) ) {
								responseHeaders[ match[1].toLowerCase() ] = match[ 2 ];
							}
						}
						match = responseHeaders[ key.toLowerCase() ];
					}
					return match == null ? null : match;
				},

				// Raw string
				getAllResponseHeaders: function() {
					return state === 2 ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					var lname = name.toLowerCase();
					if ( !state ) {
						name = requestHeadersNames[ lname ] = requestHeadersNames[ lname ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( !state ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( state < 2 ) {
							for ( code in map ) {
								// Lazy-add the new callback in a way that preserves old ones
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						} else {
							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR ).complete = completeDeferred.add;
		jqXHR.success = jqXHR.done;
		jqXHR.error = jqXHR.fail;

		// Remove hash character (#7531: and string promotion)
		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || ajaxLocation ) + "" ).replace( rhash, "" )
			.replace( rprotocol, ajaxLocParts[ 1 ] + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = jQuery.trim( s.dataType || "*" ).toLowerCase().match( rnotwhite ) || [ "" ];

		// A cross-domain request is in order when we have a protocol:host:port mismatch
		if ( s.crossDomain == null ) {
			parts = rurl.exec( s.url.toLowerCase() );
			s.crossDomain = !!( parts &&
				( parts[ 1 ] !== ajaxLocParts[ 1 ] || parts[ 2 ] !== ajaxLocParts[ 2 ] ||
					( parts[ 3 ] || ( parts[ 1 ] === "http:" ? "80" : "443" ) ) !==
						( ajaxLocParts[ 3 ] || ( ajaxLocParts[ 1 ] === "http:" ? "80" : "443" ) ) )
			);
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( state === 2 ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger("ajaxStart");
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		cacheURL = s.url;

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// If data is available, append data to url
			if ( s.data ) {
				cacheURL = ( s.url += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data );
				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add anti-cache in url if needed
			if ( s.cache === false ) {
				s.url = rts.test( cacheURL ) ?

					// If there is already a '_' parameter, set its value
					cacheURL.replace( rts, "$1_=" + nonce++ ) :

					// Otherwise add one to the end
					cacheURL + ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + nonce++;
			}
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[0] ] ?
				s.accepts[ s.dataTypes[0] ] + ( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend && ( s.beforeSend.call( callbackContext, jqXHR, s ) === false || state === 2 ) ) {
			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		for ( i in { success: 1, error: 1, complete: 1 } ) {
			jqXHR[ i ]( s[ i ] );
		}

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}
			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = setTimeout(function() {
					jqXHR.abort("timeout");
				}, s.timeout );
			}

			try {
				state = 1;
				transport.send( requestHeaders, done );
			} catch ( e ) {
				// Propagate exception as error if not done
				if ( state < 2 ) {
					done( -1, e );
				// Simply rethrow otherwise
				} else {
					throw e;
				}
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Called once
			if ( state === 2 ) {
				return;
			}

			// State is "done" now
			state = 2;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader("Last-Modified");
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader("etag");
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {
				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );
				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger("ajaxStop");
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
});

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {
		// Shift arguments if data argument was omitted
		if ( jQuery.isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		return jQuery.ajax({
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		});
	};
});


jQuery._evalUrl = function( url ) {
	return jQuery.ajax({
		url: url,
		type: "GET",
		dataType: "script",
		async: false,
		global: false,
		"throws": true
	});
};


jQuery.fn.extend({
	wrapAll: function( html ) {
		var wrap;

		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapAll( html.call(this, i) );
			});
		}

		if ( this[ 0 ] ) {

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map(function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			}).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( jQuery.isFunction( html ) ) {
			return this.each(function( i ) {
				jQuery( this ).wrapInner( html.call(this, i) );
			});
		}

		return this.each(function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		});
	},

	wrap: function( html ) {
		var isFunction = jQuery.isFunction( html );

		return this.each(function( i ) {
			jQuery( this ).wrapAll( isFunction ? html.call(this, i) : html );
		});
	},

	unwrap: function() {
		return this.parent().each(function() {
			if ( !jQuery.nodeName( this, "body" ) ) {
				jQuery( this ).replaceWith( this.childNodes );
			}
		}).end();
	}
});


jQuery.expr.filters.hidden = function( elem ) {
	// Support: Opera <= 12.12
	// Opera reports offsetWidths and offsetHeights less than zero on some elements
	return elem.offsetWidth <= 0 && elem.offsetHeight <= 0;
};
jQuery.expr.filters.visible = function( elem ) {
	return !jQuery.expr.filters.hidden( elem );
};




var r20 = /%20/g,
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( jQuery.isArray( obj ) ) {
		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {
				// Treat each array item as a scalar.
				add( prefix, v );

			} else {
				// Item is non-scalar (array or object), encode its numeric index.
				buildParams( prefix + "[" + ( typeof v === "object" ? i : "" ) + "]", v, traditional, add );
			}
		});

	} else if ( !traditional && jQuery.type( obj ) === "object" ) {
		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {
		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, value ) {
			// If value is a function, invoke it and return its value
			value = jQuery.isFunction( value ) ? value() : ( value == null ? "" : value );
			s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
		};

	// Set traditional to true for jQuery <= 1.3.2 behavior.
	if ( traditional === undefined ) {
		traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		});

	} else {
		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" ).replace( r20, "+" );
};

jQuery.fn.extend({
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map(function() {
			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		})
		.filter(function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		})
		.map(function( i, elem ) {
			var val = jQuery( this ).val();

			return val == null ?
				null :
				jQuery.isArray( val ) ?
					jQuery.map( val, function( val ) {
						return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
					}) :
					{ name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		}).get();
	}
});


jQuery.ajaxSettings.xhr = function() {
	try {
		return new XMLHttpRequest();
	} catch( e ) {}
};

var xhrId = 0,
	xhrCallbacks = {},
	xhrSuccessStatus = {
		// file protocol always yields status code 0, assume 200
		0: 200,
		// Support: IE9
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

// Support: IE9
// Open requests must be manually aborted on unload (#5280)
// See https://support.microsoft.com/kb/2856746 for more info
if ( window.attachEvent ) {
	window.attachEvent( "onunload", function() {
		for ( var key in xhrCallbacks ) {
			xhrCallbacks[ key ]();
		}
	});
}

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport(function( options ) {
	var callback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr(),
					id = ++xhrId;

				xhr.open( options.type, options.url, options.async, options.username, options.password );

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers["X-Requested-With"] ) {
					headers["X-Requested-With"] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							delete xhrCallbacks[ id ];
							callback = xhr.onload = xhr.onerror = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {
								complete(
									// file: protocol always yields status 0; see #8605, #14207
									xhr.status,
									xhr.statusText
								);
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,
									// Support: IE9
									// Accessing binary-data responseText throws an exception
									// (#11426)
									typeof xhr.responseText === "string" ? {
										text: xhr.responseText
									} : undefined,
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				xhr.onerror = callback("error");

				// Create the abort callback
				callback = xhrCallbacks[ id ] = callback("abort");

				try {
					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {
					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




// Install script dataType
jQuery.ajaxSetup({
	accepts: {
		script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /(?:java|ecma)script/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
});

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
});

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {
	// This transport only deals with cross domain requests
	if ( s.crossDomain ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery("<script>").prop({
					async: true,
					charset: s.scriptCharset,
					src: s.url
				}).on(
					"load error",
					callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					}
				);
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
});




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup({
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
});

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" && !( s.contentType || "" ).indexOf("application/x-www-form-urlencoded") && rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = jQuery.isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters["script json"] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always(function() {
			// Restore preexisting value
			window[ callbackName ] = overwritten;

			// Save back as free
			if ( s[ callbackName ] ) {
				// make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && jQuery.isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		});

		// Delegate to script
		return "script";
	}
});




// data: string of html
// context (optional): If specified, the fragment will be created in this context, defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( !data || typeof data !== "string" ) {
		return null;
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}
	context = context || document;

	var parsed = rsingleTag.exec( data ),
		scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[1] ) ];
	}

	parsed = jQuery.buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


// Keep a copy of the old load method
var _load = jQuery.fn.load;

/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	if ( typeof url !== "string" && _load ) {
		return _load.apply( this, arguments );
	}

	var selector, type, response,
		self = this,
		off = url.indexOf(" ");

	if ( off >= 0 ) {
		selector = jQuery.trim( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( jQuery.isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax({
			url: url,

			// if "type" variable is undefined, then "GET" method will be used
			type: type,
			dataType: "html",
			data: params
		}).done(function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery("<div>").append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		}).complete( callback && function( jqXHR, status ) {
			self.each( callback, response || [ jqXHR.responseText, status, jqXHR ] );
		});
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
});




jQuery.expr.filters.animated = function( elem ) {
	return jQuery.grep(jQuery.timers, function( fn ) {
		return elem === fn.elem;
	}).length;
};




var docElem = window.document.documentElement;

/**
 * Gets a window from an element
 */
function getWindow( elem ) {
	return jQuery.isWindow( elem ) ? elem : elem.nodeType === 9 && elem.defaultView;
}

jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf("auto") > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( jQuery.isFunction( options ) ) {
			options = options.call( elem, i, curOffset );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend({
	offset: function( options ) {
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each(function( i ) {
					jQuery.offset.setOffset( this, options, i );
				});
		}

		var docElem, win,
			elem = this[ 0 ],
			box = { top: 0, left: 0 },
			doc = elem && elem.ownerDocument;

		if ( !doc ) {
			return;
		}

		docElem = doc.documentElement;

		// Make sure it's not a disconnected DOM node
		if ( !jQuery.contains( docElem, elem ) ) {
			return box;
		}

		// Support: BlackBerry 5, iOS 3 (original iPhone)
		// If we don't have gBCR, just use 0,0 rather than error
		if ( typeof elem.getBoundingClientRect !== strundefined ) {
			box = elem.getBoundingClientRect();
		}
		win = getWindow( doc );
		return {
			top: box.top + win.pageYOffset - docElem.clientTop,
			left: box.left + win.pageXOffset - docElem.clientLeft
		};
	},

	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// Fixed elements are offset from window (parentOffset = {top:0, left: 0}, because it is its only offset parent
		if ( jQuery.css( elem, "position" ) === "fixed" ) {
			// Assume getBoundingClientRect is there when computed position is fixed
			offset = elem.getBoundingClientRect();

		} else {
			// Get *real* offsetParent
			offsetParent = this.offsetParent();

			// Get correct offsets
			offset = this.offset();
			if ( !jQuery.nodeName( offsetParent[ 0 ], "html" ) ) {
				parentOffset = offsetParent.offset();
			}

			// Add offsetParent borders
			parentOffset.top += jQuery.css( offsetParent[ 0 ], "borderTopWidth", true );
			parentOffset.left += jQuery.css( offsetParent[ 0 ], "borderLeftWidth", true );
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	offsetParent: function() {
		return this.map(function() {
			var offsetParent = this.offsetParent || docElem;

			while ( offsetParent && ( !jQuery.nodeName( offsetParent, "html" ) && jQuery.css( offsetParent, "position" ) === "static" ) ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || docElem;
		});
	}
});

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {
			var win = getWindow( elem );

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : window.pageXOffset,
					top ? val : window.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length, null );
	};
});

// Support: Safari<7+, Chrome<37+
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://code.google.com/p/chromium/issues/detail?id=229280
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );
				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
});


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name }, function( defaultExtra, funcName ) {
		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( jQuery.isWindow( elem ) ) {
					// As of 5/8/2012 this will yield incorrect results for Mobile Safari, but there
					// isn't a whole lot we can do. See pull request at this URL for discussion:
					// https://github.com/jquery/jquery/pull/764
					return elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?
					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable, null );
		};
	});
});


// The number of elements contained in the matched element set
jQuery.fn.size = function() {
	return this.length;
};

jQuery.fn.andSelf = jQuery.fn.addBack;




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( typeof define === "function" && define.amd ) {
	define( "jquery", [], function() {
		return jQuery;
	});
}




var
	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( typeof noGlobal === strundefined ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;

}));

},{}],26:[function(require,module,exports){
(function (global){
/*!
    localForage -- Offline Storage, Improved
    Version 1.5.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.localforage = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw (f.code="MODULE_NOT_FOUND", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
'use strict';
var Mutation = global.MutationObserver || global.WebKitMutationObserver;

var scheduleDrain;

{
  if (Mutation) {
    var called = 0;
    var observer = new Mutation(nextTick);
    var element = global.document.createTextNode('');
    observer.observe(element, {
      characterData: true
    });
    scheduleDrain = function () {
      element.data = (called = ++called % 2);
    };
  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {
    var channel = new global.MessageChannel();
    channel.port1.onmessage = nextTick;
    scheduleDrain = function () {
      channel.port2.postMessage(0);
    };
  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {
    scheduleDrain = function () {

      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
      var scriptEl = global.document.createElement('script');
      scriptEl.onreadystatechange = function () {
        nextTick();

        scriptEl.onreadystatechange = null;
        scriptEl.parentNode.removeChild(scriptEl);
        scriptEl = null;
      };
      global.document.documentElement.appendChild(scriptEl);
    };
  } else {
    scheduleDrain = function () {
      setTimeout(nextTick, 0);
    };
  }
}

var draining;
var queue = [];
//named nextTick for less confusing stack traces
function nextTick() {
  draining = true;
  var i, oldQueue;
  var len = queue.length;
  while (len) {
    oldQueue = queue;
    queue = [];
    i = -1;
    while (++i < len) {
      oldQueue[i]();
    }
    len = queue.length;
  }
  draining = false;
}

module.exports = immediate;
function immediate(task) {
  if (queue.push(task) === 1 && !draining) {
    scheduleDrain();
  }
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],2:[function(_dereq_,module,exports){
'use strict';
var immediate = _dereq_(1);

/* istanbul ignore next */
function INTERNAL() {}

var handlers = {};

var REJECTED = ['REJECTED'];
var FULFILLED = ['FULFILLED'];
var PENDING = ['PENDING'];

module.exports = exports = Promise;

function Promise(resolver) {
  if (typeof resolver !== 'function') {
    throw new TypeError('resolver must be a function');
  }
  this.state = PENDING;
  this.queue = [];
  this.outcome = void 0;
  if (resolver !== INTERNAL) {
    safelyResolveThenable(this, resolver);
  }
}

Promise.prototype["catch"] = function (onRejected) {
  return this.then(null, onRejected);
};
Promise.prototype.then = function (onFulfilled, onRejected) {
  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||
    typeof onRejected !== 'function' && this.state === REJECTED) {
    return this;
  }
  var promise = new this.constructor(INTERNAL);
  if (this.state !== PENDING) {
    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;
    unwrap(promise, resolver, this.outcome);
  } else {
    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));
  }

  return promise;
};
function QueueItem(promise, onFulfilled, onRejected) {
  this.promise = promise;
  if (typeof onFulfilled === 'function') {
    this.onFulfilled = onFulfilled;
    this.callFulfilled = this.otherCallFulfilled;
  }
  if (typeof onRejected === 'function') {
    this.onRejected = onRejected;
    this.callRejected = this.otherCallRejected;
  }
}
QueueItem.prototype.callFulfilled = function (value) {
  handlers.resolve(this.promise, value);
};
QueueItem.prototype.otherCallFulfilled = function (value) {
  unwrap(this.promise, this.onFulfilled, value);
};
QueueItem.prototype.callRejected = function (value) {
  handlers.reject(this.promise, value);
};
QueueItem.prototype.otherCallRejected = function (value) {
  unwrap(this.promise, this.onRejected, value);
};

function unwrap(promise, func, value) {
  immediate(function () {
    var returnValue;
    try {
      returnValue = func(value);
    } catch (e) {
      return handlers.reject(promise, e);
    }
    if (returnValue === promise) {
      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));
    } else {
      handlers.resolve(promise, returnValue);
    }
  });
}

handlers.resolve = function (self, value) {
  var result = tryCatch(getThen, value);
  if (result.status === 'error') {
    return handlers.reject(self, result.value);
  }
  var thenable = result.value;

  if (thenable) {
    safelyResolveThenable(self, thenable);
  } else {
    self.state = FULFILLED;
    self.outcome = value;
    var i = -1;
    var len = self.queue.length;
    while (++i < len) {
      self.queue[i].callFulfilled(value);
    }
  }
  return self;
};
handlers.reject = function (self, error) {
  self.state = REJECTED;
  self.outcome = error;
  var i = -1;
  var len = self.queue.length;
  while (++i < len) {
    self.queue[i].callRejected(error);
  }
  return self;
};

function getThen(obj) {
  // Make sure we only access the accessor once as required by the spec
  var then = obj && obj.then;
  if (obj && typeof obj === 'object' && typeof then === 'function') {
    return function appyThen() {
      then.apply(obj, arguments);
    };
  }
}

function safelyResolveThenable(self, thenable) {
  // Either fulfill, reject or reject with error
  var called = false;
  function onError(value) {
    if (called) {
      return;
    }
    called = true;
    handlers.reject(self, value);
  }

  function onSuccess(value) {
    if (called) {
      return;
    }
    called = true;
    handlers.resolve(self, value);
  }

  function tryToUnwrap() {
    thenable(onSuccess, onError);
  }

  var result = tryCatch(tryToUnwrap);
  if (result.status === 'error') {
    onError(result.value);
  }
}

function tryCatch(func, value) {
  var out = {};
  try {
    out.value = func(value);
    out.status = 'success';
  } catch (e) {
    out.status = 'error';
    out.value = e;
  }
  return out;
}

exports.resolve = resolve;
function resolve(value) {
  if (value instanceof this) {
    return value;
  }
  return handlers.resolve(new this(INTERNAL), value);
}

exports.reject = reject;
function reject(reason) {
  var promise = new this(INTERNAL);
  return handlers.reject(promise, reason);
}

exports.all = all;
function all(iterable) {
  var self = this;
  if (Object.prototype.toString.call(iterable) !== '[object Array]') {
    return this.reject(new TypeError('must be an array'));
  }

  var len = iterable.length;
  var called = false;
  if (!len) {
    return this.resolve([]);
  }

  var values = new Array(len);
  var resolved = 0;
  var i = -1;
  var promise = new this(INTERNAL);

  while (++i < len) {
    allResolver(iterable[i], i);
  }
  return promise;
  function allResolver(value, i) {
    self.resolve(value).then(resolveFromAll, function (error) {
      if (!called) {
        called = true;
        handlers.reject(promise, error);
      }
    });
    function resolveFromAll(outValue) {
      values[i] = outValue;
      if (++resolved === len && !called) {
        called = true;
        handlers.resolve(promise, values);
      }
    }
  }
}

exports.race = race;
function race(iterable) {
  var self = this;
  if (Object.prototype.toString.call(iterable) !== '[object Array]') {
    return this.reject(new TypeError('must be an array'));
  }

  var len = iterable.length;
  var called = false;
  if (!len) {
    return this.resolve([]);
  }

  var i = -1;
  var promise = new this(INTERNAL);

  while (++i < len) {
    resolver(iterable[i]);
  }
  return promise;
  function resolver(value) {
    self.resolve(value).then(function (response) {
      if (!called) {
        called = true;
        handlers.resolve(promise, response);
      }
    }, function (error) {
      if (!called) {
        called = true;
        handlers.reject(promise, error);
      }
    });
  }
}

},{"1":1}],3:[function(_dereq_,module,exports){
(function (global){
'use strict';
if (typeof global.Promise !== 'function') {
  global.Promise = _dereq_(2);
}

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"2":2}],4:[function(_dereq_,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function getIDB() {
    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */
    try {
        if (typeof indexedDB !== 'undefined') {
            return indexedDB;
        }
        if (typeof webkitIndexedDB !== 'undefined') {
            return webkitIndexedDB;
        }
        if (typeof mozIndexedDB !== 'undefined') {
            return mozIndexedDB;
        }
        if (typeof OIndexedDB !== 'undefined') {
            return OIndexedDB;
        }
        if (typeof msIndexedDB !== 'undefined') {
            return msIndexedDB;
        }
    } catch (e) {}
}

var idb = getIDB();

function isIndexedDBValid() {
    try {
        // Initialize IndexedDB; fall back to vendor-prefixed versions
        // if needed.
        if (!idb) {
            return false;
        }
        // We mimic PouchDB here;
        //
        // We test for openDatabase because IE Mobile identifies itself
        // as Safari. Oh the lulz...
        var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);

        var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;

        // Safari <10.1 does not meet our requirements for IDB support (#5572)
        // since Safari 10.1 shipped with fetch, we can use that to detect it
        return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' &&
        // some outdated implementations of IDB that appear on Samsung
        // and HTC Android devices <4.4 are missing IDBKeyRange
        typeof IDBKeyRange !== 'undefined';
    } catch (e) {
        return false;
    }
}

function isWebSQLValid() {
    return typeof openDatabase === 'function';
}

function isLocalStorageValid() {
    try {
        return typeof localStorage !== 'undefined' && 'setItem' in localStorage && localStorage.setItem;
    } catch (e) {
        return false;
    }
}

// Abstracts constructing a Blob object, so it also works in older
// browsers that don't support the native Blob constructor. (i.e.
// old QtWebKit versions, at least).
// Abstracts constructing a Blob object, so it also works in older
// browsers that don't support the native Blob constructor. (i.e.
// old QtWebKit versions, at least).
function createBlob(parts, properties) {
    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */
    parts = parts || [];
    properties = properties || {};
    try {
        return new Blob(parts, properties);
    } catch (e) {
        if (e.name !== 'TypeError') {
            throw e;
        }
        var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : WebKitBlobBuilder;
        var builder = new Builder();
        for (var i = 0; i < parts.length; i += 1) {
            builder.append(parts[i]);
        }
        return builder.getBlob(properties.type);
    }
}

// This is CommonJS because lie is an external dependency, so Rollup
// can just ignore it.
if (typeof Promise === 'undefined') {
    // In the "nopromises" build this will just throw if you don't have
    // a global promise object, but it would throw anyway later.
    _dereq_(3);
}
var Promise$1 = Promise;

function executeCallback(promise, callback) {
    if (callback) {
        promise.then(function (result) {
            callback(null, result);
        }, function (error) {
            callback(error);
        });
    }
}

function executeTwoCallbacks(promise, callback, errorCallback) {
    if (typeof callback === 'function') {
        promise.then(callback);
    }

    if (typeof errorCallback === 'function') {
        promise["catch"](errorCallback);
    }
}

// Some code originally from async_storage.js in
// [Gaia](https://github.com/mozilla-b2g/gaia).

var DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';
var supportsBlobs;
var dbContexts;
var toString = Object.prototype.toString;

// Transform a binary string to an array buffer, because otherwise
// weird stuff happens when you try to work with the binary string directly.
// It is known.
// From http://stackoverflow.com/questions/14967647/ (continues on next line)
// encode-decode-image-with-base64-breaks-image (2013-04-21)
function _binStringToArrayBuffer(bin) {
    var length = bin.length;
    var buf = new ArrayBuffer(length);
    var arr = new Uint8Array(buf);
    for (var i = 0; i < length; i++) {
        arr[i] = bin.charCodeAt(i);
    }
    return buf;
}

//
// Blobs are not supported in all versions of IndexedDB, notably
// Chrome <37 and Android <5. In those versions, storing a blob will throw.
//
// Various other blob bugs exist in Chrome v37-42 (inclusive).
// Detecting them is expensive and confusing to users, and Chrome 37-42
// is at very low usage worldwide, so we do a hacky userAgent check instead.
//
// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120
// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916
// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836
//
// Code borrowed from PouchDB. See:
// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js
//
function _checkBlobSupportWithoutCaching(idb) {
    return new Promise$1(function (resolve) {
        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, 'readwrite');
        var blob = createBlob(['']);
        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');

        txn.onabort = function (e) {
            // If the transaction aborts now its due to not being able to
            // write to the database, likely due to the disk being full
            e.preventDefault();
            e.stopPropagation();
            resolve(false);
        };

        txn.oncomplete = function () {
            var matchedChrome = navigator.userAgent.match(/Chrome\/(\d+)/);
            var matchedEdge = navigator.userAgent.match(/Edge\//);
            // MS Edge pretends to be Chrome 42:
            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx
            resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);
        };
    })["catch"](function () {
        return false; // error, so assume unsupported
    });
}

function _checkBlobSupport(idb) {
    if (typeof supportsBlobs === 'boolean') {
        return Promise$1.resolve(supportsBlobs);
    }
    return _checkBlobSupportWithoutCaching(idb).then(function (value) {
        supportsBlobs = value;
        return supportsBlobs;
    });
}

function _deferReadiness(dbInfo) {
    var dbContext = dbContexts[dbInfo.name];

    // Create a deferred object representing the current database operation.
    var deferredOperation = {};

    deferredOperation.promise = new Promise$1(function (resolve) {
        deferredOperation.resolve = resolve;
    });

    // Enqueue the deferred operation.
    dbContext.deferredOperations.push(deferredOperation);

    // Chain its promise to the database readiness.
    if (!dbContext.dbReady) {
        dbContext.dbReady = deferredOperation.promise;
    } else {
        dbContext.dbReady = dbContext.dbReady.then(function () {
            return deferredOperation.promise;
        });
    }
}

function _advanceReadiness(dbInfo) {
    var dbContext = dbContexts[dbInfo.name];

    // Dequeue a deferred operation.
    var deferredOperation = dbContext.deferredOperations.pop();

    // Resolve its promise (which is part of the database readiness
    // chain of promises).
    if (deferredOperation) {
        deferredOperation.resolve();
    }
}

function _getConnection(dbInfo, upgradeNeeded) {
    return new Promise$1(function (resolve, reject) {

        if (dbInfo.db) {
            if (upgradeNeeded) {
                _deferReadiness(dbInfo);
                dbInfo.db.close();
            } else {
                return resolve(dbInfo.db);
            }
        }

        var dbArgs = [dbInfo.name];

        if (upgradeNeeded) {
            dbArgs.push(dbInfo.version);
        }

        var openreq = idb.open.apply(idb, dbArgs);

        if (upgradeNeeded) {
            openreq.onupgradeneeded = function (e) {
                var db = openreq.result;
                try {
                    db.createObjectStore(dbInfo.storeName);
                    if (e.oldVersion <= 1) {
                        // Added when support for blob shims was added
                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);
                    }
                } catch (ex) {
                    if (ex.name === 'ConstraintError') {
                        console.warn('The database "' + dbInfo.name + '"' + ' has been upgraded from version ' + e.oldVersion + ' to version ' + e.newVersion + ', but the storage "' + dbInfo.storeName + '" already exists.');
                    } else {
                        throw ex;
                    }
                }
            };
        }

        openreq.onerror = function (e) {
            e.preventDefault();
            reject(openreq.error);
        };

        openreq.onsuccess = function () {
            resolve(openreq.result);
            _advanceReadiness(dbInfo);
        };
    });
}

function _getOriginalConnection(dbInfo) {
    return _getConnection(dbInfo, false);
}

function _getUpgradedConnection(dbInfo) {
    return _getConnection(dbInfo, true);
}

function _isUpgradeNeeded(dbInfo, defaultVersion) {
    if (!dbInfo.db) {
        return true;
    }

    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);
    var isDowngrade = dbInfo.version < dbInfo.db.version;
    var isUpgrade = dbInfo.version > dbInfo.db.version;

    if (isDowngrade) {
        // If the version is not the default one
        // then warn for impossible downgrade.
        if (dbInfo.version !== defaultVersion) {
            console.warn('The database "' + dbInfo.name + '"' + ' can\'t be downgraded from version ' + dbInfo.db.version + ' to version ' + dbInfo.version + '.');
        }
        // Align the versions to prevent errors.
        dbInfo.version = dbInfo.db.version;
    }

    if (isUpgrade || isNewStore) {
        // If the store is new then increment the version (if needed).
        // This will trigger an "upgradeneeded" event which is required
        // for creating a store.
        if (isNewStore) {
            var incVersion = dbInfo.db.version + 1;
            if (incVersion > dbInfo.version) {
                dbInfo.version = incVersion;
            }
        }

        return true;
    }

    return false;
}

// encode a blob for indexeddb engines that don't support blobs
function _encodeBlob(blob) {
    return new Promise$1(function (resolve, reject) {
        var reader = new FileReader();
        reader.onerror = reject;
        reader.onloadend = function (e) {
            var base64 = btoa(e.target.result || '');
            resolve({
                __local_forage_encoded_blob: true,
                data: base64,
                type: blob.type
            });
        };
        reader.readAsBinaryString(blob);
    });
}

// decode an encoded blob
function _decodeBlob(encodedBlob) {
    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));
    return createBlob([arrayBuff], { type: encodedBlob.type });
}

// is this one of our fancy encoded blobs?
function _isEncodedBlob(value) {
    return value && value.__local_forage_encoded_blob;
}

// Specialize the default `ready()` function by making it dependent
// on the current database operations. Thus, the driver will be actually
// ready when it's been initialized (default) *and* there are no pending
// operations on the database (initiated by some other instances).
function _fullyReady(callback) {
    var self = this;

    var promise = self._initReady().then(function () {
        var dbContext = dbContexts[self._dbInfo.name];

        if (dbContext && dbContext.dbReady) {
            return dbContext.dbReady;
        }
    });

    executeTwoCallbacks(promise, callback, callback);
    return promise;
}

// Open the IndexedDB database (automatically creates one if one didn't
// previously exist), using any options set in the config.
function _initStorage(options) {
    var self = this;
    var dbInfo = {
        db: null
    };

    if (options) {
        for (var i in options) {
            dbInfo[i] = options[i];
        }
    }

    // Initialize a singleton container for all running localForages.
    if (!dbContexts) {
        dbContexts = {};
    }

    // Get the current context of the database;
    var dbContext = dbContexts[dbInfo.name];

    // ...or create a new context.
    if (!dbContext) {
        dbContext = {
            // Running localForages sharing a database.
            forages: [],
            // Shared database.
            db: null,
            // Database readiness (promise).
            dbReady: null,
            // Deferred operations on the database.
            deferredOperations: []
        };
        // Register the new context in the global container.
        dbContexts[dbInfo.name] = dbContext;
    }

    // Register itself as a running localForage in the current context.
    dbContext.forages.push(self);

    // Replace the default `ready()` function with the specialized one.
    if (!self._initReady) {
        self._initReady = self.ready;
        self.ready = _fullyReady;
    }

    // Create an array of initialization states of the related localForages.
    var initPromises = [];

    function ignoreErrors() {
        // Don't handle errors here,
        // just makes sure related localForages aren't pending.
        return Promise$1.resolve();
    }

    for (var j = 0; j < dbContext.forages.length; j++) {
        var forage = dbContext.forages[j];
        if (forage !== self) {
            // Don't wait for itself...
            initPromises.push(forage._initReady()["catch"](ignoreErrors));
        }
    }

    // Take a snapshot of the related localForages.
    var forages = dbContext.forages.slice(0);

    // Initialize the connection process only when
    // all the related localForages aren't pending.
    return Promise$1.all(initPromises).then(function () {
        dbInfo.db = dbContext.db;
        // Get the connection or open a new one without upgrade.
        return _getOriginalConnection(dbInfo);
    }).then(function (db) {
        dbInfo.db = db;
        if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {
            // Reopen the database for upgrading.
            return _getUpgradedConnection(dbInfo);
        }
        return db;
    }).then(function (db) {
        dbInfo.db = dbContext.db = db;
        self._dbInfo = dbInfo;
        // Share the final connection amongst related localForages.
        for (var k = 0; k < forages.length; k++) {
            var forage = forages[k];
            if (forage !== self) {
                // Self is already up-to-date.
                forage._dbInfo.db = dbInfo.db;
                forage._dbInfo.version = dbInfo.version;
            }
        }
    });
}

function getItem(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);
            var req = store.get(key);

            req.onsuccess = function () {
                var value = req.result;
                if (value === undefined) {
                    value = null;
                }
                if (_isEncodedBlob(value)) {
                    value = _decodeBlob(value);
                }
                resolve(value);
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Iterate over all items stored in database.
function iterate(iterator, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);

            var req = store.openCursor();
            var iterationNumber = 1;

            req.onsuccess = function () {
                var cursor = req.result;

                if (cursor) {
                    var value = cursor.value;
                    if (_isEncodedBlob(value)) {
                        value = _decodeBlob(value);
                    }
                    var result = iterator(value, cursor.key, iterationNumber++);

                    if (result !== void 0) {
                        resolve(result);
                    } else {
                        cursor["continue"]();
                    }
                } else {
                    resolve();
                }
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);

    return promise;
}

function setItem(key, value, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        var dbInfo;
        self.ready().then(function () {
            dbInfo = self._dbInfo;
            if (toString.call(value) === '[object Blob]') {
                return _checkBlobSupport(dbInfo.db).then(function (blobSupport) {
                    if (blobSupport) {
                        return value;
                    }
                    return _encodeBlob(value);
                });
            }
            return value;
        }).then(function (value) {
            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');
            var store = transaction.objectStore(dbInfo.storeName);
            var req = store.put(value, key);

            // The reason we don't _save_ null is because IE 10 does
            // not support saving the `null` type in IndexedDB. How
            // ironic, given the bug below!
            // See: https://github.com/mozilla/localForage/issues/161
            if (value === null) {
                value = undefined;
            }

            transaction.oncomplete = function () {
                // Cast to undefined so the value passed to
                // callback/promise is the same as what one would get out
                // of `getItem()` later. This leads to some weirdness
                // (setItem('foo', undefined) will return `null`), but
                // it's not my fault localStorage is our baseline and that
                // it's weird.
                if (value === undefined) {
                    value = null;
                }

                resolve(value);
            };
            transaction.onabort = transaction.onerror = function () {
                var err = req.error ? req.error : req.transaction.error;
                reject(err);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function removeItem(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');
            var store = transaction.objectStore(dbInfo.storeName);

            // We use a Grunt task to make this safe for IE and some
            // versions of Android (including those used by Cordova).
            // Normally IE won't like `.delete()` and will insist on
            // using `['delete']()`, but we have a build step that
            // fixes this for us now.
            var req = store["delete"](key);
            transaction.oncomplete = function () {
                resolve();
            };

            transaction.onerror = function () {
                reject(req.error);
            };

            // The request will be also be aborted if we've exceeded our storage
            // space.
            transaction.onabort = function () {
                var err = req.error ? req.error : req.transaction.error;
                reject(err);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function clear(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var transaction = dbInfo.db.transaction(dbInfo.storeName, 'readwrite');
            var store = transaction.objectStore(dbInfo.storeName);
            var req = store.clear();

            transaction.oncomplete = function () {
                resolve();
            };

            transaction.onabort = transaction.onerror = function () {
                var err = req.error ? req.error : req.transaction.error;
                reject(err);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function length(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);
            var req = store.count();

            req.onsuccess = function () {
                resolve(req.result);
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function key(n, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        if (n < 0) {
            resolve(null);

            return;
        }

        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);

            var advanced = false;
            var req = store.openCursor();
            req.onsuccess = function () {
                var cursor = req.result;
                if (!cursor) {
                    // this means there weren't enough keys
                    resolve(null);

                    return;
                }

                if (n === 0) {
                    // We have the first key, return it if that's what they
                    // wanted.
                    resolve(cursor.key);
                } else {
                    if (!advanced) {
                        // Otherwise, ask the cursor to skip ahead n
                        // records.
                        advanced = true;
                        cursor.advance(n);
                    } else {
                        // When we get here, we've got the nth key.
                        resolve(cursor.key);
                    }
                }
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function keys(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            var store = dbInfo.db.transaction(dbInfo.storeName, 'readonly').objectStore(dbInfo.storeName);

            var req = store.openCursor();
            var keys = [];

            req.onsuccess = function () {
                var cursor = req.result;

                if (!cursor) {
                    resolve(keys);
                    return;
                }

                keys.push(cursor.key);
                cursor["continue"]();
            };

            req.onerror = function () {
                reject(req.error);
            };
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

var asyncStorage = {
    _driver: 'asyncStorage',
    _initStorage: _initStorage,
    iterate: iterate,
    getItem: getItem,
    setItem: setItem,
    removeItem: removeItem,
    clear: clear,
    length: length,
    key: key,
    keys: keys
};

// Sadly, the best way to save binary data in WebSQL/localStorage is serializing
// it to Base64, so this is how we store it to prevent very strange errors with less
// verbose ways of binary <-> string data storage.
var BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

var BLOB_TYPE_PREFIX = '~~local_forage_type~';
var BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;

var SERIALIZED_MARKER = '__lfsc__:';
var SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;

// OMG the serializations!
var TYPE_ARRAYBUFFER = 'arbf';
var TYPE_BLOB = 'blob';
var TYPE_INT8ARRAY = 'si08';
var TYPE_UINT8ARRAY = 'ui08';
var TYPE_UINT8CLAMPEDARRAY = 'uic8';
var TYPE_INT16ARRAY = 'si16';
var TYPE_INT32ARRAY = 'si32';
var TYPE_UINT16ARRAY = 'ur16';
var TYPE_UINT32ARRAY = 'ui32';
var TYPE_FLOAT32ARRAY = 'fl32';
var TYPE_FLOAT64ARRAY = 'fl64';
var TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;

var toString$1 = Object.prototype.toString;

function stringToBuffer(serializedString) {
    // Fill the string into a ArrayBuffer.
    var bufferLength = serializedString.length * 0.75;
    var len = serializedString.length;
    var i;
    var p = 0;
    var encoded1, encoded2, encoded3, encoded4;

    if (serializedString[serializedString.length - 1] === '=') {
        bufferLength--;
        if (serializedString[serializedString.length - 2] === '=') {
            bufferLength--;
        }
    }

    var buffer = new ArrayBuffer(bufferLength);
    var bytes = new Uint8Array(buffer);

    for (i = 0; i < len; i += 4) {
        encoded1 = BASE_CHARS.indexOf(serializedString[i]);
        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);
        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);
        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);

        /*jslint bitwise: true */
        bytes[p++] = encoded1 << 2 | encoded2 >> 4;
        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;
        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
    }
    return buffer;
}

// Converts a buffer to a string to store, serialized, in the backend
// storage library.
function bufferToString(buffer) {
    // base64-arraybuffer
    var bytes = new Uint8Array(buffer);
    var base64String = '';
    var i;

    for (i = 0; i < bytes.length; i += 3) {
        /*jslint bitwise: true */
        base64String += BASE_CHARS[bytes[i] >> 2];
        base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];
        base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];
        base64String += BASE_CHARS[bytes[i + 2] & 63];
    }

    if (bytes.length % 3 === 2) {
        base64String = base64String.substring(0, base64String.length - 1) + '=';
    } else if (bytes.length % 3 === 1) {
        base64String = base64String.substring(0, base64String.length - 2) + '==';
    }

    return base64String;
}

// Serialize a value, afterwards executing a callback (which usually
// instructs the `setItem()` callback/promise to be executed). This is how
// we store binary data with localStorage.
function serialize(value, callback) {
    var valueType = '';
    if (value) {
        valueType = toString$1.call(value);
    }

    // Cannot use `value instanceof ArrayBuffer` or such here, as these
    // checks fail when running the tests using casper.js...
    //
    // TODO: See why those tests fail and use a better solution.
    if (value && (valueType === '[object ArrayBuffer]' || value.buffer && toString$1.call(value.buffer) === '[object ArrayBuffer]')) {
        // Convert binary arrays to a string and prefix the string with
        // a special marker.
        var buffer;
        var marker = SERIALIZED_MARKER;

        if (value instanceof ArrayBuffer) {
            buffer = value;
            marker += TYPE_ARRAYBUFFER;
        } else {
            buffer = value.buffer;

            if (valueType === '[object Int8Array]') {
                marker += TYPE_INT8ARRAY;
            } else if (valueType === '[object Uint8Array]') {
                marker += TYPE_UINT8ARRAY;
            } else if (valueType === '[object Uint8ClampedArray]') {
                marker += TYPE_UINT8CLAMPEDARRAY;
            } else if (valueType === '[object Int16Array]') {
                marker += TYPE_INT16ARRAY;
            } else if (valueType === '[object Uint16Array]') {
                marker += TYPE_UINT16ARRAY;
            } else if (valueType === '[object Int32Array]') {
                marker += TYPE_INT32ARRAY;
            } else if (valueType === '[object Uint32Array]') {
                marker += TYPE_UINT32ARRAY;
            } else if (valueType === '[object Float32Array]') {
                marker += TYPE_FLOAT32ARRAY;
            } else if (valueType === '[object Float64Array]') {
                marker += TYPE_FLOAT64ARRAY;
            } else {
                callback(new Error('Failed to get type for BinaryArray'));
            }
        }

        callback(marker + bufferToString(buffer));
    } else if (valueType === '[object Blob]') {
        // Conver the blob to a binaryArray and then to a string.
        var fileReader = new FileReader();

        fileReader.onload = function () {
            // Backwards-compatible prefix for the blob type.
            var str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);

            callback(SERIALIZED_MARKER + TYPE_BLOB + str);
        };

        fileReader.readAsArrayBuffer(value);
    } else {
        try {
            callback(JSON.stringify(value));
        } catch (e) {
            console.error("Couldn't convert value into a JSON string: ", value);

            callback(null, e);
        }
    }
}

// Deserialize data we've inserted into a value column/field. We place
// special markers into our strings to mark them as encoded; this isn't
// as nice as a meta field, but it's the only sane thing we can do whilst
// keeping localStorage support intact.
//
// Oftentimes this will just deserialize JSON content, but if we have a
// special marker (SERIALIZED_MARKER, defined above), we will extract
// some kind of arraybuffer/binary data/typed array out of the string.
function deserialize(value) {
    // If we haven't marked this string as being specially serialized (i.e.
    // something other than serialized JSON), we can just return it and be
    // done with it.
    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {
        return JSON.parse(value);
    }

    // The following code deals with deserializing some kind of Blob or
    // TypedArray. First we separate out the type of data we're dealing
    // with from the data itself.
    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);
    var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);

    var blobType;
    // Backwards-compatible blob type serialization strategy.
    // DBs created with older versions of localForage will simply not have the blob type.
    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {
        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);
        blobType = matcher[1];
        serializedString = serializedString.substring(matcher[0].length);
    }
    var buffer = stringToBuffer(serializedString);

    // Return the right type based on the code/type set during
    // serialization.
    switch (type) {
        case TYPE_ARRAYBUFFER:
            return buffer;
        case TYPE_BLOB:
            return createBlob([buffer], { type: blobType });
        case TYPE_INT8ARRAY:
            return new Int8Array(buffer);
        case TYPE_UINT8ARRAY:
            return new Uint8Array(buffer);
        case TYPE_UINT8CLAMPEDARRAY:
            return new Uint8ClampedArray(buffer);
        case TYPE_INT16ARRAY:
            return new Int16Array(buffer);
        case TYPE_UINT16ARRAY:
            return new Uint16Array(buffer);
        case TYPE_INT32ARRAY:
            return new Int32Array(buffer);
        case TYPE_UINT32ARRAY:
            return new Uint32Array(buffer);
        case TYPE_FLOAT32ARRAY:
            return new Float32Array(buffer);
        case TYPE_FLOAT64ARRAY:
            return new Float64Array(buffer);
        default:
            throw new Error('Unkown type: ' + type);
    }
}

var localforageSerializer = {
    serialize: serialize,
    deserialize: deserialize,
    stringToBuffer: stringToBuffer,
    bufferToString: bufferToString
};

/*
 * Includes code from:
 *
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */
// Open the WebSQL database (automatically creates one if one didn't
// previously exist), using any options set in the config.
function _initStorage$1(options) {
    var self = this;
    var dbInfo = {
        db: null
    };

    if (options) {
        for (var i in options) {
            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];
        }
    }

    var dbInfoPromise = new Promise$1(function (resolve, reject) {
        // Open the database; the openDatabase API will automatically
        // create it for us if it doesn't exist.
        try {
            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);
        } catch (e) {
            return reject(e);
        }

        // Create our key/value table if it doesn't exist.
        dbInfo.db.transaction(function (t) {
            t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.storeName + ' (id INTEGER PRIMARY KEY, key unique, value)', [], function () {
                self._dbInfo = dbInfo;
                resolve();
            }, function (t, error) {
                reject(error);
            });
        });
    });

    dbInfo.serializer = localforageSerializer;
    return dbInfoPromise;
}

function getItem$1(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT * FROM ' + dbInfo.storeName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {
                    var result = results.rows.length ? results.rows.item(0).value : null;

                    // Check to see if this is serialized content we need to
                    // unpack.
                    if (result) {
                        result = dbInfo.serializer.deserialize(result);
                    }

                    resolve(result);
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function iterate$1(iterator, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;

            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT * FROM ' + dbInfo.storeName, [], function (t, results) {
                    var rows = results.rows;
                    var length = rows.length;

                    for (var i = 0; i < length; i++) {
                        var item = rows.item(i);
                        var result = item.value;

                        // Check to see if this is serialized content
                        // we need to unpack.
                        if (result) {
                            result = dbInfo.serializer.deserialize(result);
                        }

                        result = iterator(result, item.key, i + 1);

                        // void(0) prevents problems with redefinition
                        // of `undefined`.
                        if (result !== void 0) {
                            resolve(result);
                            return;
                        }
                    }

                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function _setItem(key, value, callback, retriesLeft) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            // The localStorage API doesn't return undefined values in an
            // "expected" way, so undefined is always cast to null in all
            // drivers. See: https://github.com/mozilla/localForage/pull/42
            if (value === undefined) {
                value = null;
            }

            // Save the original value to pass to the callback.
            var originalValue = value;

            var dbInfo = self._dbInfo;
            dbInfo.serializer.serialize(value, function (value, error) {
                if (error) {
                    reject(error);
                } else {
                    dbInfo.db.transaction(function (t) {
                        t.executeSql('INSERT OR REPLACE INTO ' + dbInfo.storeName + ' (key, value) VALUES (?, ?)', [key, value], function () {
                            resolve(originalValue);
                        }, function (t, error) {
                            reject(error);
                        });
                    }, function (sqlError) {
                        // The transaction failed; check
                        // to see if it's a quota error.
                        if (sqlError.code === sqlError.QUOTA_ERR) {
                            // We reject the callback outright for now, but
                            // it's worth trying to re-run the transaction.
                            // Even if the user accepts the prompt to use
                            // more storage on Safari, this error will
                            // be called.
                            //
                            // Try to re-run the transaction.
                            if (retriesLeft > 0) {
                                resolve(_setItem.apply(self, [key, originalValue, callback, retriesLeft - 1]));
                                return;
                            }
                            reject(sqlError);
                        }
                    });
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function setItem$1(key, value, callback) {
    return _setItem.apply(this, [key, value, callback, 1]);
}

function removeItem$1(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('DELETE FROM ' + dbInfo.storeName + ' WHERE key = ?', [key], function () {
                    resolve();
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Deletes every item in the table.
// TODO: Find out if this resets the AUTO_INCREMENT number.
function clear$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('DELETE FROM ' + dbInfo.storeName, [], function () {
                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Does a simple `COUNT(key)` to get the number of items stored in
// localForage.
function length$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                // Ahhh, SQL makes this one soooooo easy.
                t.executeSql('SELECT COUNT(key) as c FROM ' + dbInfo.storeName, [], function (t, results) {
                    var result = results.rows.item(0).c;

                    resolve(result);
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Return the key located at key index X; essentially gets the key from a
// `WHERE id = ?`. This is the most efficient way I can think to implement
// this rarely-used (in my experience) part of the API, but it can seem
// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so
// the ID of each key will change every time it's updated. Perhaps a stored
// procedure for the `setItem()` SQL would solve this problem?
// TODO: Don't change ID on `setItem()`.
function key$1(n, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT key FROM ' + dbInfo.storeName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {
                    var result = results.rows.length ? results.rows.item(0).key : null;
                    resolve(result);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function keys$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                t.executeSql('SELECT key FROM ' + dbInfo.storeName, [], function (t, results) {
                    var keys = [];

                    for (var i = 0; i < results.rows.length; i++) {
                        keys.push(results.rows.item(i).key);
                    }

                    resolve(keys);
                }, function (t, error) {

                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

var webSQLStorage = {
    _driver: 'webSQLStorage',
    _initStorage: _initStorage$1,
    iterate: iterate$1,
    getItem: getItem$1,
    setItem: setItem$1,
    removeItem: removeItem$1,
    clear: clear$1,
    length: length$1,
    key: key$1,
    keys: keys$1
};

// Config the localStorage backend, using options set in the config.
function _initStorage$2(options) {
    var self = this;
    var dbInfo = {};
    if (options) {
        for (var i in options) {
            dbInfo[i] = options[i];
        }
    }

    dbInfo.keyPrefix = dbInfo.name + '/';

    if (dbInfo.storeName !== self._defaultConfig.storeName) {
        dbInfo.keyPrefix += dbInfo.storeName + '/';
    }

    self._dbInfo = dbInfo;
    dbInfo.serializer = localforageSerializer;

    return Promise$1.resolve();
}

// Remove all keys from the datastore, effectively destroying all data in
// the app's key/value store!
function clear$2(callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var keyPrefix = self._dbInfo.keyPrefix;

        for (var i = localStorage.length - 1; i >= 0; i--) {
            var key = localStorage.key(i);

            if (key.indexOf(keyPrefix) === 0) {
                localStorage.removeItem(key);
            }
        }
    });

    executeCallback(promise, callback);
    return promise;
}

// Retrieve an item from the store. Unlike the original async_storage
// library in Gaia, we don't modify return values at all. If a key's value
// is `undefined`, we pass that value to the callback function.
function getItem$2(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var result = localStorage.getItem(dbInfo.keyPrefix + key);

        // If a result was found, parse it from the serialized
        // string into a JS object. If result isn't truthy, the key
        // is likely undefined and we'll pass it straight to the
        // callback.
        if (result) {
            result = dbInfo.serializer.deserialize(result);
        }

        return result;
    });

    executeCallback(promise, callback);
    return promise;
}

// Iterate over all items in the store.
function iterate$2(iterator, callback) {
    var self = this;

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var keyPrefix = dbInfo.keyPrefix;
        var keyPrefixLength = keyPrefix.length;
        var length = localStorage.length;

        // We use a dedicated iterator instead of the `i` variable below
        // so other keys we fetch in localStorage aren't counted in
        // the `iterationNumber` argument passed to the `iterate()`
        // callback.
        //
        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530
        var iterationNumber = 1;

        for (var i = 0; i < length; i++) {
            var key = localStorage.key(i);
            if (key.indexOf(keyPrefix) !== 0) {
                continue;
            }
            var value = localStorage.getItem(key);

            // If a result was found, parse it from the serialized
            // string into a JS object. If result isn't truthy, the
            // key is likely undefined and we'll pass it straight
            // to the iterator.
            if (value) {
                value = dbInfo.serializer.deserialize(value);
            }

            value = iterator(value, key.substring(keyPrefixLength), iterationNumber++);

            if (value !== void 0) {
                return value;
            }
        }
    });

    executeCallback(promise, callback);
    return promise;
}

// Same as localStorage's key() method, except takes a callback.
function key$2(n, callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var result;
        try {
            result = localStorage.key(n);
        } catch (error) {
            result = null;
        }

        // Remove the prefix from the key, if a key is found.
        if (result) {
            result = result.substring(dbInfo.keyPrefix.length);
        }

        return result;
    });

    executeCallback(promise, callback);
    return promise;
}

function keys$2(callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var length = localStorage.length;
        var keys = [];

        for (var i = 0; i < length; i++) {
            if (localStorage.key(i).indexOf(dbInfo.keyPrefix) === 0) {
                keys.push(localStorage.key(i).substring(dbInfo.keyPrefix.length));
            }
        }

        return keys;
    });

    executeCallback(promise, callback);
    return promise;
}

// Supply the number of keys in the datastore to the callback function.
function length$2(callback) {
    var self = this;
    var promise = self.keys().then(function (keys) {
        return keys.length;
    });

    executeCallback(promise, callback);
    return promise;
}

// Remove an item from the store, nice and simple.
function removeItem$2(key, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        localStorage.removeItem(dbInfo.keyPrefix + key);
    });

    executeCallback(promise, callback);
    return promise;
}

// Set a key's value and run an optional callback once the value is set.
// Unlike Gaia's implementation, the callback function is passed the value,
// in case you want to operate on that value only after you're sure it
// saved, or something like that.
function setItem$2(key, value, callback) {
    var self = this;

    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    var promise = self.ready().then(function () {
        // Convert undefined values to null.
        // https://github.com/mozilla/localForage/pull/42
        if (value === undefined) {
            value = null;
        }

        // Save the original value to pass to the callback.
        var originalValue = value;

        return new Promise$1(function (resolve, reject) {
            var dbInfo = self._dbInfo;
            dbInfo.serializer.serialize(value, function (value, error) {
                if (error) {
                    reject(error);
                } else {
                    try {
                        localStorage.setItem(dbInfo.keyPrefix + key, value);
                        resolve(originalValue);
                    } catch (e) {
                        // localStorage capacity exceeded.
                        // TODO: Make this a specific error/event.
                        if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {
                            reject(e);
                        }
                        reject(e);
                    }
                }
            });
        });
    });

    executeCallback(promise, callback);
    return promise;
}

var localStorageWrapper = {
    _driver: 'localStorageWrapper',
    _initStorage: _initStorage$2,
    // Default API, from Gaia/localStorage.
    iterate: iterate$2,
    getItem: getItem$2,
    setItem: setItem$2,
    removeItem: removeItem$2,
    clear: clear$2,
    length: length$2,
    key: key$2,
    keys: keys$2
};

// Custom drivers are stored here when `defineDriver()` is called.
// They are shared across all instances of localForage.
var CustomDrivers = {};

var DriverType = {
    INDEXEDDB: 'asyncStorage',
    LOCALSTORAGE: 'localStorageWrapper',
    WEBSQL: 'webSQLStorage'
};

var DefaultDriverOrder = [DriverType.INDEXEDDB, DriverType.WEBSQL, DriverType.LOCALSTORAGE];

var LibraryMethods = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'];

var DefaultConfig = {
    description: '',
    driver: DefaultDriverOrder.slice(),
    name: 'localforage',
    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size
    // we can use without a prompt.
    size: 4980736,
    storeName: 'keyvaluepairs',
    version: 1.0
};

var driverSupport = {};
// Check to see if IndexedDB is available and if it is the latest
// implementation; it's our preferred backend library. We use "_spec_test"
// as the name of the database because it's not the one we'll operate on,
// but it's useful to make sure its using the right spec.
// See: https://github.com/mozilla/localForage/issues/128
driverSupport[DriverType.INDEXEDDB] = isIndexedDBValid();

driverSupport[DriverType.WEBSQL] = isWebSQLValid();

driverSupport[DriverType.LOCALSTORAGE] = isLocalStorageValid();

var isArray = Array.isArray || function (arg) {
    return Object.prototype.toString.call(arg) === '[object Array]';
};

function callWhenReady(localForageInstance, libraryMethod) {
    localForageInstance[libraryMethod] = function () {
        var _args = arguments;
        return localForageInstance.ready().then(function () {
            return localForageInstance[libraryMethod].apply(localForageInstance, _args);
        });
    };
}

function extend() {
    for (var i = 1; i < arguments.length; i++) {
        var arg = arguments[i];

        if (arg) {
            for (var key in arg) {
                if (arg.hasOwnProperty(key)) {
                    if (isArray(arg[key])) {
                        arguments[0][key] = arg[key].slice();
                    } else {
                        arguments[0][key] = arg[key];
                    }
                }
            }
        }
    }

    return arguments[0];
}

function isLibraryDriver(driverName) {
    for (var driver in DriverType) {
        if (DriverType.hasOwnProperty(driver) && DriverType[driver] === driverName) {
            return true;
        }
    }

    return false;
}

var LocalForage = function () {
    function LocalForage(options) {
        _classCallCheck(this, LocalForage);

        this.INDEXEDDB = DriverType.INDEXEDDB;
        this.LOCALSTORAGE = DriverType.LOCALSTORAGE;
        this.WEBSQL = DriverType.WEBSQL;

        this._defaultConfig = extend({}, DefaultConfig);
        this._config = extend({}, this._defaultConfig, options);
        this._driverSet = null;
        this._initDriver = null;
        this._ready = false;
        this._dbInfo = null;

        this._wrapLibraryMethodsWithReady();
        this.setDriver(this._config.driver)["catch"](function () {});
    }

    // Set any config values for localForage; can be called anytime before
    // the first API call (e.g. `getItem`, `setItem`).
    // We loop through options so we don't overwrite existing config
    // values.


    LocalForage.prototype.config = function config(options) {
        // If the options argument is an object, we use it to set values.
        // Otherwise, we return either a specified config value or all
        // config values.
        if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {
            // If localforage is ready and fully initialized, we can't set
            // any new configuration values. Instead, we return an error.
            if (this._ready) {
                return new Error("Can't call config() after localforage " + 'has been used.');
            }

            for (var i in options) {
                if (i === 'storeName') {
                    options[i] = options[i].replace(/\W/g, '_');
                }

                if (i === 'version' && typeof options[i] !== 'number') {
                    return new Error('Database version must be a number.');
                }

                this._config[i] = options[i];
            }

            // after all config options are set and
            // the driver option is used, try setting it
            if ('driver' in options && options.driver) {
                return this.setDriver(this._config.driver);
            }

            return true;
        } else if (typeof options === 'string') {
            return this._config[options];
        } else {
            return this._config;
        }
    };

    // Used to define a custom driver, shared across all instances of
    // localForage.


    LocalForage.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {
        var promise = new Promise$1(function (resolve, reject) {
            try {
                var driverName = driverObject._driver;
                var complianceError = new Error('Custom driver not compliant; see ' + 'https://mozilla.github.io/localForage/#definedriver');
                var namingError = new Error('Custom driver name already in use: ' + driverObject._driver);

                // A driver name should be defined and not overlap with the
                // library-defined, default drivers.
                if (!driverObject._driver) {
                    reject(complianceError);
                    return;
                }
                if (isLibraryDriver(driverObject._driver)) {
                    reject(namingError);
                    return;
                }

                var customDriverMethods = LibraryMethods.concat('_initStorage');
                for (var i = 0; i < customDriverMethods.length; i++) {
                    var customDriverMethod = customDriverMethods[i];
                    if (!customDriverMethod || !driverObject[customDriverMethod] || typeof driverObject[customDriverMethod] !== 'function') {
                        reject(complianceError);
                        return;
                    }
                }

                var supportPromise = Promise$1.resolve(true);
                if ('_support' in driverObject) {
                    if (driverObject._support && typeof driverObject._support === 'function') {
                        supportPromise = driverObject._support();
                    } else {
                        supportPromise = Promise$1.resolve(!!driverObject._support);
                    }
                }

                supportPromise.then(function (supportResult) {
                    driverSupport[driverName] = supportResult;
                    CustomDrivers[driverName] = driverObject;
                    resolve();
                }, reject);
            } catch (e) {
                reject(e);
            }
        });

        executeTwoCallbacks(promise, callback, errorCallback);
        return promise;
    };

    LocalForage.prototype.driver = function driver() {
        return this._driver || null;
    };

    LocalForage.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {
        var self = this;
        var getDriverPromise = Promise$1.resolve().then(function () {
            if (isLibraryDriver(driverName)) {
                switch (driverName) {
                    case self.INDEXEDDB:
                        return asyncStorage;
                    case self.LOCALSTORAGE:
                        return localStorageWrapper;
                    case self.WEBSQL:
                        return webSQLStorage;
                }
            } else if (CustomDrivers[driverName]) {
                return CustomDrivers[driverName];
            } else {
                throw new Error('Driver not found.');
            }
        });
        executeTwoCallbacks(getDriverPromise, callback, errorCallback);
        return getDriverPromise;
    };

    LocalForage.prototype.getSerializer = function getSerializer(callback) {
        var serializerPromise = Promise$1.resolve(localforageSerializer);
        executeTwoCallbacks(serializerPromise, callback);
        return serializerPromise;
    };

    LocalForage.prototype.ready = function ready(callback) {
        var self = this;

        var promise = self._driverSet.then(function () {
            if (self._ready === null) {
                self._ready = self._initDriver();
            }

            return self._ready;
        });

        executeTwoCallbacks(promise, callback, callback);
        return promise;
    };

    LocalForage.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {
        var self = this;

        if (!isArray(drivers)) {
            drivers = [drivers];
        }

        var supportedDrivers = this._getSupportedDrivers(drivers);

        function setDriverToConfig() {
            self._config.driver = self.driver();
        }

        function extendSelfWithDriver(driver) {
            self._extend(driver);
            setDriverToConfig();

            self._ready = self._initStorage(self._config);
            return self._ready;
        }

        function initDriver(supportedDrivers) {
            return function () {
                var currentDriverIndex = 0;

                function driverPromiseLoop() {
                    while (currentDriverIndex < supportedDrivers.length) {
                        var driverName = supportedDrivers[currentDriverIndex];
                        currentDriverIndex++;

                        self._dbInfo = null;
                        self._ready = null;

                        return self.getDriver(driverName).then(extendSelfWithDriver)["catch"](driverPromiseLoop);
                    }

                    setDriverToConfig();
                    var error = new Error('No available storage method found.');
                    self._driverSet = Promise$1.reject(error);
                    return self._driverSet;
                }

                return driverPromiseLoop();
            };
        }

        // There might be a driver initialization in progress
        // so wait for it to finish in order to avoid a possible
        // race condition to set _dbInfo
        var oldDriverSetDone = this._driverSet !== null ? this._driverSet["catch"](function () {
            return Promise$1.resolve();
        }) : Promise$1.resolve();

        this._driverSet = oldDriverSetDone.then(function () {
            var driverName = supportedDrivers[0];
            self._dbInfo = null;
            self._ready = null;

            return self.getDriver(driverName).then(function (driver) {
                self._driver = driver._driver;
                setDriverToConfig();
                self._wrapLibraryMethodsWithReady();
                self._initDriver = initDriver(supportedDrivers);
            });
        })["catch"](function () {
            setDriverToConfig();
            var error = new Error('No available storage method found.');
            self._driverSet = Promise$1.reject(error);
            return self._driverSet;
        });

        executeTwoCallbacks(this._driverSet, callback, errorCallback);
        return this._driverSet;
    };

    LocalForage.prototype.supports = function supports(driverName) {
        return !!driverSupport[driverName];
    };

    LocalForage.prototype._extend = function _extend(libraryMethodsAndProperties) {
        extend(this, libraryMethodsAndProperties);
    };

    LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {
        var supportedDrivers = [];
        for (var i = 0, len = drivers.length; i < len; i++) {
            var driverName = drivers[i];
            if (this.supports(driverName)) {
                supportedDrivers.push(driverName);
            }
        }
        return supportedDrivers;
    };

    LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {
        // Add a stub for each driver API method that delays the call to the
        // corresponding driver method until localForage is ready. These stubs
        // will be replaced by the driver methods as soon as the driver is
        // loaded, so there is no performance impact.
        for (var i = 0; i < LibraryMethods.length; i++) {
            callWhenReady(this, LibraryMethods[i]);
        }
    };

    LocalForage.prototype.createInstance = function createInstance(options) {
        return new LocalForage(options);
    };

    return LocalForage;
}();

// The actual localForage object that we expose as a module or via a
// global. It's extended by pulling in one of our other libraries.


var localforage_js = new LocalForage();

module.exports = localforage_js;

},{"3":3}]},{},[4])(4)
});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],27:[function(require,module,exports){



/**
 * UTM zones are grouped, and assigned to one of a group of 6
 * sets.
 *
 * {int} @private
 */
var NUM_100K_SETS = 6;

/**
 * The column letters (for easting) of the lower left value, per
 * set.
 *
 * {string} @private
 */
var SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';

/**
 * The row letters (for northing) of the lower left value, per
 * set.
 *
 * {string} @private
 */
var SET_ORIGIN_ROW_LETTERS = 'AFAFAF';

var A = 65; // A
var I = 73; // I
var O = 79; // O
var V = 86; // V
var Z = 90; // Z

/**
 * Conversion of lat/lon to MGRS.
 *
 * @param {object} ll Object literal with lat and lon properties on a
 *     WGS84 ellipsoid.
 * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for
 *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.
 * @return {string} the MGRS string for the given location and accuracy.
 */
exports.forward = function(ll, accuracy) {
  accuracy = accuracy || 5; // default accuracy 1m
  return encode(LLtoUTM({
    lat: ll[1],
    lon: ll[0]
  }), accuracy);
};

/**
 * Conversion of MGRS to lat/lon.
 *
 * @param {string} mgrs MGRS string.
 * @return {array} An array with left (longitude), bottom (latitude), right
 *     (longitude) and top (latitude) values in WGS84, representing the
 *     bounding box for the provided MGRS reference.
 */
exports.inverse = function(mgrs) {
  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));
  if (bbox.lat && bbox.lon) {
    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];
  }
  return [bbox.left, bbox.bottom, bbox.right, bbox.top];
};

exports.toPoint = function(mgrs) {
  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));
  if (bbox.lat && bbox.lon) {
    return [bbox.lon, bbox.lat];
  }
  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];
};
/**
 * Conversion from degrees to radians.
 *
 * @private
 * @param {number} deg the angle in degrees.
 * @return {number} the angle in radians.
 */
function degToRad(deg) {
  return (deg * (Math.PI / 180.0));
}

/**
 * Conversion from radians to degrees.
 *
 * @private
 * @param {number} rad the angle in radians.
 * @return {number} the angle in degrees.
 */
function radToDeg(rad) {
  return (180.0 * (rad / Math.PI));
}

/**
 * Converts a set of Longitude and Latitude co-ordinates to UTM
 * using the WGS84 ellipsoid.
 *
 * @private
 * @param {object} ll Object literal with lat and lon properties
 *     representing the WGS84 coordinate to be converted.
 * @return {object} Object literal containing the UTM value with easting,
 *     northing, zoneNumber and zoneLetter properties, and an optional
 *     accuracy property in digits. Returns null if the conversion failed.
 */
function LLtoUTM(ll) {
  var Lat = ll.lat;
  var Long = ll.lon;
  var a = 6378137.0; //ellip.radius;
  var eccSquared = 0.00669438; //ellip.eccsq;
  var k0 = 0.9996;
  var LongOrigin;
  var eccPrimeSquared;
  var N, T, C, A, M;
  var LatRad = degToRad(Lat);
  var LongRad = degToRad(Long);
  var LongOriginRad;
  var ZoneNumber;
  // (int)
  ZoneNumber = Math.floor((Long + 180) / 6) + 1;

  //Make sure the longitude 180.00 is in Zone 60
  if (Long === 180) {
    ZoneNumber = 60;
  }

  // Special zone for Norway
  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {
    ZoneNumber = 32;
  }

  // Special zones for Svalbard
  if (Lat >= 72.0 && Lat < 84.0) {
    if (Long >= 0.0 && Long < 9.0) {
      ZoneNumber = 31;
    }
    else if (Long >= 9.0 && Long < 21.0) {
      ZoneNumber = 33;
    }
    else if (Long >= 21.0 && Long < 33.0) {
      ZoneNumber = 35;
    }
    else if (Long >= 33.0 && Long < 42.0) {
      ZoneNumber = 37;
    }
  }

  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin
  // in middle of
  // zone
  LongOriginRad = degToRad(LongOrigin);

  eccPrimeSquared = (eccSquared) / (1 - eccSquared);

  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));
  T = Math.tan(LatRad) * Math.tan(LatRad);
  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);
  A = Math.cos(LatRad) * (LongRad - LongOriginRad);

  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));

  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);

  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));
  if (Lat < 0.0) {
    UTMNorthing += 10000000.0; //10000000 meter offset for
    // southern hemisphere
  }

  return {
    northing: Math.round(UTMNorthing),
    easting: Math.round(UTMEasting),
    zoneNumber: ZoneNumber,
    zoneLetter: getLetterDesignator(Lat)
  };
}

/**
 * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience
 * class where the Zone can be specified as a single string eg."60N" which
 * is then broken down into the ZoneNumber and ZoneLetter.
 *
 * @private
 * @param {object} utm An object literal with northing, easting, zoneNumber
 *     and zoneLetter properties. If an optional accuracy property is
 *     provided (in meters), a bounding box will be returned instead of
 *     latitude and longitude.
 * @return {object} An object literal containing either lat and lon values
 *     (if no accuracy was provided), or top, right, bottom and left values
 *     for the bounding box calculated according to the provided accuracy.
 *     Returns null if the conversion failed.
 */
function UTMtoLL(utm) {

  var UTMNorthing = utm.northing;
  var UTMEasting = utm.easting;
  var zoneLetter = utm.zoneLetter;
  var zoneNumber = utm.zoneNumber;
  // check the ZoneNummber is valid
  if (zoneNumber < 0 || zoneNumber > 60) {
    return null;
  }

  var k0 = 0.9996;
  var a = 6378137.0; //ellip.radius;
  var eccSquared = 0.00669438; //ellip.eccsq;
  var eccPrimeSquared;
  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));
  var N1, T1, C1, R1, D, M;
  var LongOrigin;
  var mu, phi1Rad;

  // remove 500,000 meter offset for longitude
  var x = UTMEasting - 500000.0;
  var y = UTMNorthing;

  // We must know somehow if we are in the Northern or Southern
  // hemisphere, this is the only time we use the letter So even
  // if the Zone letter isn't exactly correct it should indicate
  // the hemisphere correctly
  if (zoneLetter < 'N') {
    y -= 10000000.0; // remove 10,000,000 meter offset used
    // for southern hemisphere
  }

  // There are 60 zones with zone 1 being at West -180 to -174
  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin
  // in middle of
  // zone

  eccPrimeSquared = (eccSquared) / (1 - eccSquared);

  M = y / k0;
  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));

  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);
  // double phi1 = ProjMath.radToDeg(phi1Rad);

  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));
  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);
  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);
  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);
  D = x / (N1 * k0);

  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);
  lat = radToDeg(lat);

  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);
  lon = LongOrigin + radToDeg(lon);

  var result;
  if (utm.accuracy) {
    var topRight = UTMtoLL({
      northing: utm.northing + utm.accuracy,
      easting: utm.easting + utm.accuracy,
      zoneLetter: utm.zoneLetter,
      zoneNumber: utm.zoneNumber
    });
    result = {
      top: topRight.lat,
      right: topRight.lon,
      bottom: lat,
      left: lon
    };
  }
  else {
    result = {
      lat: lat,
      lon: lon
    };
  }
  return result;
}

/**
 * Calculates the MGRS letter designator for the given latitude.
 *
 * @private
 * @param {number} lat The latitude in WGS84 to get the letter designator
 *     for.
 * @return {char} The letter designator.
 */
function getLetterDesignator(lat) {
  //This is here as an error flag to show that the Latitude is
  //outside MGRS limits
  var LetterDesignator = 'Z';

  if ((84 >= lat) && (lat >= 72)) {
    LetterDesignator = 'X';
  }
  else if ((72 > lat) && (lat >= 64)) {
    LetterDesignator = 'W';
  }
  else if ((64 > lat) && (lat >= 56)) {
    LetterDesignator = 'V';
  }
  else if ((56 > lat) && (lat >= 48)) {
    LetterDesignator = 'U';
  }
  else if ((48 > lat) && (lat >= 40)) {
    LetterDesignator = 'T';
  }
  else if ((40 > lat) && (lat >= 32)) {
    LetterDesignator = 'S';
  }
  else if ((32 > lat) && (lat >= 24)) {
    LetterDesignator = 'R';
  }
  else if ((24 > lat) && (lat >= 16)) {
    LetterDesignator = 'Q';
  }
  else if ((16 > lat) && (lat >= 8)) {
    LetterDesignator = 'P';
  }
  else if ((8 > lat) && (lat >= 0)) {
    LetterDesignator = 'N';
  }
  else if ((0 > lat) && (lat >= -8)) {
    LetterDesignator = 'M';
  }
  else if ((-8 > lat) && (lat >= -16)) {
    LetterDesignator = 'L';
  }
  else if ((-16 > lat) && (lat >= -24)) {
    LetterDesignator = 'K';
  }
  else if ((-24 > lat) && (lat >= -32)) {
    LetterDesignator = 'J';
  }
  else if ((-32 > lat) && (lat >= -40)) {
    LetterDesignator = 'H';
  }
  else if ((-40 > lat) && (lat >= -48)) {
    LetterDesignator = 'G';
  }
  else if ((-48 > lat) && (lat >= -56)) {
    LetterDesignator = 'F';
  }
  else if ((-56 > lat) && (lat >= -64)) {
    LetterDesignator = 'E';
  }
  else if ((-64 > lat) && (lat >= -72)) {
    LetterDesignator = 'D';
  }
  else if ((-72 > lat) && (lat >= -80)) {
    LetterDesignator = 'C';
  }
  return LetterDesignator;
}

/**
 * Encodes a UTM location as MGRS string.
 *
 * @private
 * @param {object} utm An object literal with easting, northing,
 *     zoneLetter, zoneNumber
 * @param {number} accuracy Accuracy in digits (1-5).
 * @return {string} MGRS string for the given UTM location.
 */
function encode(utm, accuracy) {
  // prepend with leading zeroes
  var seasting = "00000" + utm.easting,
    snorthing = "00000" + utm.northing;

  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);
}

/**
 * Get the two letter 100k designator for a given UTM easting,
 * northing and zone number value.
 *
 * @private
 * @param {number} easting
 * @param {number} northing
 * @param {number} zoneNumber
 * @return the two letter 100k designator for the given UTM location.
 */
function get100kID(easting, northing, zoneNumber) {
  var setParm = get100kSetForZone(zoneNumber);
  var setColumn = Math.floor(easting / 100000);
  var setRow = Math.floor(northing / 100000) % 20;
  return getLetter100kID(setColumn, setRow, setParm);
}

/**
 * Given a UTM zone number, figure out the MGRS 100K set it is in.
 *
 * @private
 * @param {number} i An UTM zone number.
 * @return {number} the 100k set the UTM zone is in.
 */
function get100kSetForZone(i) {
  var setParm = i % NUM_100K_SETS;
  if (setParm === 0) {
    setParm = NUM_100K_SETS;
  }

  return setParm;
}

/**
 * Get the two-letter MGRS 100k designator given information
 * translated from the UTM northing, easting and zone number.
 *
 * @private
 * @param {number} column the column index as it relates to the MGRS
 *        100k set spreadsheet, created from the UTM easting.
 *        Values are 1-8.
 * @param {number} row the row index as it relates to the MGRS 100k set
 *        spreadsheet, created from the UTM northing value. Values
 *        are from 0-19.
 * @param {number} parm the set block, as it relates to the MGRS 100k set
 *        spreadsheet, created from the UTM zone. Values are from
 *        1-60.
 * @return two letter MGRS 100k code.
 */
function getLetter100kID(column, row, parm) {
  // colOrigin and rowOrigin are the letters at the origin of the set
  var index = parm - 1;
  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);
  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);

  // colInt and rowInt are the letters to build to return
  var colInt = colOrigin + column - 1;
  var rowInt = rowOrigin + row;
  var rollover = false;

  if (colInt > Z) {
    colInt = colInt - Z + A - 1;
    rollover = true;
  }

  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {
    colInt++;
  }

  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {
    colInt++;

    if (colInt === I) {
      colInt++;
    }
  }

  if (colInt > Z) {
    colInt = colInt - Z + A - 1;
  }

  if (rowInt > V) {
    rowInt = rowInt - V + A - 1;
    rollover = true;
  }
  else {
    rollover = false;
  }

  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {
    rowInt++;
  }

  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {
    rowInt++;

    if (rowInt === I) {
      rowInt++;
    }
  }

  if (rowInt > V) {
    rowInt = rowInt - V + A - 1;
  }

  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);
  return twoLetter;
}

/**
 * Decode the UTM parameters from a MGRS string.
 *
 * @private
 * @param {string} mgrsString an UPPERCASE coordinate string is expected.
 * @return {object} An object literal with easting, northing, zoneLetter,
 *     zoneNumber and accuracy (in meters) properties.
 */
function decode(mgrsString) {

  if (mgrsString && mgrsString.length === 0) {
    throw ("MGRSPoint coverting from nothing");
  }

  var length = mgrsString.length;

  var hunK = null;
  var sb = "";
  var testChar;
  var i = 0;

  // get Zone number
  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {
    if (i >= 2) {
      throw ("MGRSPoint bad conversion from: " + mgrsString);
    }
    sb += testChar;
    i++;
  }

  var zoneNumber = parseInt(sb, 10);

  if (i === 0 || i + 3 > length) {
    // A good MGRS string has to be 4-5 digits long,
    // ##AAA/#AAA at least.
    throw ("MGRSPoint bad conversion from: " + mgrsString);
  }

  var zoneLetter = mgrsString.charAt(i++);

  // Should we check the zone letter here? Why not.
  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {
    throw ("MGRSPoint zone letter " + zoneLetter + " not handled: " + mgrsString);
  }

  hunK = mgrsString.substring(i, i += 2);

  var set = get100kSetForZone(zoneNumber);

  var east100k = getEastingFromChar(hunK.charAt(0), set);
  var north100k = getNorthingFromChar(hunK.charAt(1), set);

  // We have a bug where the northing may be 2000000 too low.
  // How
  // do we know when to roll over?

  while (north100k < getMinNorthing(zoneLetter)) {
    north100k += 2000000;
  }

  // calculate the char index for easting/northing separator
  var remainder = length - i;

  if (remainder % 2 !== 0) {
    throw ("MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters" + mgrsString);
  }

  var sep = remainder / 2;

  var sepEasting = 0.0;
  var sepNorthing = 0.0;
  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;
  if (sep > 0) {
    accuracyBonus = 100000.0 / Math.pow(10, sep);
    sepEastingString = mgrsString.substring(i, i + sep);
    sepEasting = parseFloat(sepEastingString) * accuracyBonus;
    sepNorthingString = mgrsString.substring(i + sep);
    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;
  }

  easting = sepEasting + east100k;
  northing = sepNorthing + north100k;

  return {
    easting: easting,
    northing: northing,
    zoneLetter: zoneLetter,
    zoneNumber: zoneNumber,
    accuracy: accuracyBonus
  };
}

/**
 * Given the first letter from a two-letter MGRS 100k zone, and given the
 * MGRS table set for the zone number, figure out the easting value that
 * should be added to the other, secondary easting value.
 *
 * @private
 * @param {char} e The first letter from a two-letter MGRS 100´k zone.
 * @param {number} set The MGRS table set for the zone number.
 * @return {number} The easting value for the given letter and set.
 */
function getEastingFromChar(e, set) {
  // colOrigin is the letter at the origin of the set for the
  // column
  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);
  var eastingValue = 100000.0;
  var rewindMarker = false;

  while (curCol !== e.charCodeAt(0)) {
    curCol++;
    if (curCol === I) {
      curCol++;
    }
    if (curCol === O) {
      curCol++;
    }
    if (curCol > Z) {
      if (rewindMarker) {
        throw ("Bad character: " + e);
      }
      curCol = A;
      rewindMarker = true;
    }
    eastingValue += 100000.0;
  }

  return eastingValue;
}

/**
 * Given the second letter from a two-letter MGRS 100k zone, and given the
 * MGRS table set for the zone number, figure out the northing value that
 * should be added to the other, secondary northing value. You have to
 * remember that Northings are determined from the equator, and the vertical
 * cycle of letters mean a 2000000 additional northing meters. This happens
 * approx. every 18 degrees of latitude. This method does *NOT* count any
 * additional northings. You have to figure out how many 2000000 meters need
 * to be added for the zone letter of the MGRS coordinate.
 *
 * @private
 * @param {char} n Second letter of the MGRS 100k zone
 * @param {number} set The MGRS table set number, which is dependent on the
 *     UTM zone number.
 * @return {number} The northing value for the given letter and set.
 */
function getNorthingFromChar(n, set) {

  if (n > 'V') {
    throw ("MGRSPoint given invalid Northing " + n);
  }

  // rowOrigin is the letter at the origin of the set for the
  // column
  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);
  var northingValue = 0.0;
  var rewindMarker = false;

  while (curRow !== n.charCodeAt(0)) {
    curRow++;
    if (curRow === I) {
      curRow++;
    }
    if (curRow === O) {
      curRow++;
    }
    // fixing a bug making whole application hang in this loop
    // when 'n' is a wrong character
    if (curRow > V) {
      if (rewindMarker) { // making sure that this loop ends
        throw ("Bad character: " + n);
      }
      curRow = A;
      rewindMarker = true;
    }
    northingValue += 100000.0;
  }

  return northingValue;
}

/**
 * The function getMinNorthing returns the minimum northing value of a MGRS
 * zone.
 *
 * Ported from Geotrans' c Lattitude_Band_Value structure table.
 *
 * @private
 * @param {char} zoneLetter The MGRS zone to get the min northing for.
 * @return {number}
 */
function getMinNorthing(zoneLetter) {
  var northing;
  switch (zoneLetter) {
  case 'C':
    northing = 1100000.0;
    break;
  case 'D':
    northing = 2000000.0;
    break;
  case 'E':
    northing = 2800000.0;
    break;
  case 'F':
    northing = 3700000.0;
    break;
  case 'G':
    northing = 4600000.0;
    break;
  case 'H':
    northing = 5500000.0;
    break;
  case 'J':
    northing = 6400000.0;
    break;
  case 'K':
    northing = 7300000.0;
    break;
  case 'L':
    northing = 8200000.0;
    break;
  case 'M':
    northing = 9100000.0;
    break;
  case 'N':
    northing = 0.0;
    break;
  case 'P':
    northing = 800000.0;
    break;
  case 'Q':
    northing = 1700000.0;
    break;
  case 'R':
    northing = 2600000.0;
    break;
  case 'S':
    northing = 3500000.0;
    break;
  case 'T':
    northing = 4400000.0;
    break;
  case 'U':
    northing = 5300000.0;
    break;
  case 'V':
    northing = 6200000.0;
    break;
  case 'W':
    northing = 7000000.0;
    break;
  case 'X':
    northing = 7900000.0;
    break;
  default:
    northing = -1.0;
  }
  if (northing >= 0.0) {
    return northing;
  }
  else {
    throw ("Invalid zone letter: " + zoneLetter);
  }

}

},{}],28:[function(require,module,exports){
(function (global){
// OpenLayers. See https://openlayers.org/
// License: https://raw.githubusercontent.com/openlayers/openlayers/master/LICENSE.md
;(function (root, factory) {
  if (typeof exports === "object") {
    module.exports = factory();
  } else if (typeof define === "function" && define.amd) {
    define([], factory);
  } else {
    root.ol = factory();
  }
}(this, function () {
  var OPENLAYERS = {};
  var l,aa="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},ba="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function da(a,b){if(b){var c=ba;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&aa(c,a,{configurable:!0,writable:!0,value:b})}}
da("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){a=Number(a);return(b(a)+b(-a))/2}});da("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});var ea=this;function q(a,b){var c=OPENLAYERS;a=a.split(".");c=c||ea;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};function fa(a,b){return a>b?1:a<b?-1:0}function ha(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(0<c)for(c=1;c<d;++c){if(a[c]<b)return c-1}else if(0>c)for(c=1;c<d;++c){if(a[c]<=b)return c}else for(c=1;c<d;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1}function ia(a,b){var c=Array.isArray(b)?b:[b],d=c.length;for(b=0;b<d;b++)a[a.length]=c[b]}function ja(a,b){var c=a.length;if(c!==b.length)return!1;for(var d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}
function ka(a){var b=la,c=a.length,d=Array(a.length),e;for(e=0;e<c;e++)d[e]={index:e,value:a[e]};d.sort(function(a,c){return b(a.value,c.value)||a.index-c.index});for(e=0;e<a.length;e++)a[e]=d[e].value}function ma(a,b){var c=b||fa;return a.every(function(b,e){if(!e)return!0;b=c(a[e-1],b);return!(0<b||0===b)})};function t(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function na(){}function v(a){return a.Yh||(a.Yh=++oa)}var oa=0;function pa(a){this.message="Assertion failed. See https://openlayers.org/en/latest/doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}t(pa,Error);function w(a,b){if(!a)throw new pa(b);};function ra(a,b,c,d){this.O=a;this.R=b;this.S=c;this.U=d}function sa(a,b,c){return a.O<=b&&b<=a.R&&a.S<=c&&c<=a.U}function ta(a,b){return a.O<=b.R&&a.R>=b.O&&a.S<=b.U&&a.U>=b.S};function ua(a,b,c){return Math.min(Math.max(a,b),c)}var va=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();function xa(a,b,c,d){a=c-a;b=d-b;return a*a+b*b}function ya(a){return a*Math.PI/180}function za(a,b){a%=b;return 0>a*b?a+b:a}function Aa(a,b,c){return a+c*(b-a)};function Ba(a,b,c){void 0===c&&(c=[0,0]);c[0]=a[0]+2*b;c[1]=a[1]+2*b;return c}function Da(a,b,c){void 0===c&&(c=[0,0]);c[0]=a[0]*b+.5|0;c[1]=a[1]*b+.5|0;return c}function Ea(a,b){if(Array.isArray(a))return a;void 0===b?b=[a,a]:b[0]=b[1]=a;return b};function Fa(a){for(var b=Ha(),c=0,d=a.length;c<d;++c)Ia(b,a[c]);return b}function Ja(a,b,c){return c?(c[0]=a[0]-b,c[1]=a[1]-b,c[2]=a[2]+b,c[3]=a[3]+b,c):[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}function Ka(a,b){return b?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):a.slice()}function La(a,b,c){b=b<a[0]?a[0]-b:a[2]<b?b-a[2]:0;a=c<a[1]?a[1]-c:a[3]<c?c-a[3]:0;return b*b+a*a}function Ma(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]}function Ha(){return[Infinity,Infinity,-Infinity,-Infinity]}
function Na(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function Oa(a){return Na(Infinity,Infinity,-Infinity,-Infinity,a)}function Pa(a,b){var c=a[0];a=a[1];return Na(c,a,c,a,b)}function Qa(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]}function Ia(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])}
function Ra(a,b,c,d,e){for(;c<d;c+=e){var f=a,g=b[c],h=b[c+1];f[0]=Math.min(f[0],g);f[1]=Math.min(f[1],h);f[2]=Math.max(f[2],g);f[3]=Math.max(f[3],h)}return a}function Sa(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function Ta(a,b,c,d,e){var f=b*d[0]/2;d=b*d[1]/2;b=Math.cos(c);var g=Math.sin(c);c=f*b;f*=g;b*=d;var h=d*g,k=a[0],m=a[1];a=k-c+h;d=k-c-h;g=k+c-h;c=k+c+h;h=m-f-b;k=m-f+b;var n=m+f+b;f=m+f-b;return Na(Math.min(a,d,g,c),Math.min(h,k,n,f),Math.max(a,d,g,c),Math.max(h,k,n,f),e)}
function Ua(a,b){var c=Ha();Va(a,b)&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]);return c}function Wa(a){return[a[0],a[3]]}function Xa(a){return a[2]-a[0]}function Va(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]}function Ya(a){return a[2]<a[0]||a[3]<a[1]};var Za="function"===typeof Object.assign?Object.assign:function(a,b){if(!a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;d<e;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c};function $a(a){for(var b in a)delete a[b]}function ab(a){var b=[],c;for(c in a)b.push(a[c]);return b}function bb(a){for(var b in a)return!1;return!b};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function cb(a){this.radius=a}cb.prototype.f=function(a){for(var b=this.radius,c=0,d=a.length,e=a[d-1][0],f=a[d-1][1],g=0;g<d;g++){var h=a[g][0],k=a[g][1];c+=ya(h-e)*(2+Math.sin(ya(f))+Math.sin(ya(k)));e=h;f=k}return c*b*b/2};cb.prototype.b=function(a,b){var c=ya(a[1]),d=ya(b[1]),e=(d-c)/2;a=ya(b[0]-a[0])/2;c=Math.sin(e)*Math.sin(e)+Math.sin(a)*Math.sin(a)*Math.cos(c)*Math.cos(d);return 2*this.radius*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))};
cb.prototype.offset=function(a,b,c){var d=ya(a[1]);b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(ya(a[0])+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};var db={};db.degrees=12741994*Math.PI/360;db.ft=.3048;db.m=1;db["us-ft"]=1200/3937;function eb(a){this.Ha=a.code;this.f=a.units;this.B=void 0!==a.extent?a.extent:null;this.b=void 0!==a.axisOrientation?a.axisOrientation:"enu";this.i=void 0!==a.global?a.global:!1;this.a=!(!this.i||!this.B);this.l=a.getPointResolution;this.c=null;this.g=a.metersPerUnit;var b=a.code,c=window.proj4;"function"==typeof c&&(b=c.defs(b),void 0!==b&&(void 0!==b.axis&&void 0===a.axisOrientation&&(this.b=b.axis),void 0===a.metersPerUnit&&(this.g=b.to_meter),void 0===a.units&&(this.f=b.units)))}
eb.prototype.K=function(){return this.B};eb.prototype.j=function(){return this.g||db[this.f]};function fb(a){eb.call(this,{code:a,units:"m",extent:gb,global:!0,worldExtent:hb,getPointResolution:function(a,c){return a/va(c[1]/6378137)}})}t(fb,eb);var ib=6378137*Math.PI,gb=[-ib,-ib,ib,ib],hb=[-180,-85,180,85],jb=[new fb("EPSG:3857"),new fb("EPSG:102100"),new fb("EPSG:102113"),new fb("EPSG:900913"),new fb("urn:ogc:def:crs:EPSG:6.18:3:3857"),new fb("urn:ogc:def:crs:EPSG::3857"),new fb("http://www.opengis.net/gml/srs/epsg.xml#3857")];
function kb(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c){b[e]=ib*a[e]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));f>ib?f=ib:f<-ib&&(f=-ib);b[e+1]=f}return b}function lb(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/ib,b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b};function mb(a,b){eb.call(this,{code:a,units:"degrees",extent:nb,axisOrientation:b,global:!0,metersPerUnit:ob,worldExtent:nb})}t(mb,eb);var nb=[-180,-90,180,90],ob=6378137*Math.PI/180,pb=[new mb("CRS:84"),new mb("EPSG:4326","neu"),new mb("urn:ogc:def:crs:EPSG::4326","neu"),new mb("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new mb("urn:ogc:def:crs:OGC:1.3:CRS84"),new mb("urn:ogc:def:crs:OGC:2:84"),new mb("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new mb("urn:x-ogc:def:crs:EPSG:4326","neu")];var qb={};var rb={};function sb(a,b,c){a=a.Ha;b=b.Ha;a in rb||(rb[a]={});rb[a][b]=c}function tb(a,b){var c;a in rb&&b in rb[a]&&(c=rb[a][b]);return c};var ub=new cb(6371008.8);function vb(a){a.forEach(xb);a.forEach(function(b){a.forEach(function(a){b!==a&&sb(b,a,yb)})})}function xb(a){qb[a.Ha]=a;sb(a,a,yb)}function zb(a){return a?"string"===typeof a?Ab(a):a:Ab("EPSG:3857")}function Bb(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2;c=void 0!==c?c:Array(e);var f;for(f=0;f<e;f+=d){var g=a([b[f],b[f+1]]);c[f]=g[0];c[f+1]=g[1];for(g=d-1;2<=g;--g)c[f+g]=b[f+g]}return c}}
function Ab(a){var b=null;if(a instanceof eb)b=a;else if("string"===typeof a&&(b=qb[a]||null,!b)){var c=window.proj4;"function"==typeof c&&void 0!==c.defs(a)&&(b=new eb({code:a}),xb(b))}return b}function Cb(a,b){if(a===b)return!0;var c=a.f===b.f;return a.Ha===b.Ha?c:Db(a,b)===yb&&c}function Eb(a,b){a=Ab(a);b=Ab(b);return Db(a,b)}
function Db(a,b){var c=a.Ha,d=b.Ha,e=tb(c,d);if(!e){var f=window.proj4;if("function"==typeof f){var g=f.defs(c),h=f.defs(d);void 0!==g&&void 0!==h&&(g===h?vb([b,a]):(f=f(d,c),e=f.forward,f=f.inverse,b=Ab(b),a=Ab(a),sb(b,a,Bb(e)),sb(a,b,Bb(f))),e=tb(c,d))}}e||(e=Fb);return e}function Fb(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}function yb(a,b){if(void 0!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}else a=a.slice();return a}
function Gb(a,b,c){b=Eb(b,c);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);c=[a[0],a[2],a[4],a[6]];var d=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,c);b=Math.min.apply(null,d);c=Math.max.apply(null,c);d=Math.max.apply(null,d);return Na(a,b,c,d,void 0)}vb(jb);vb(pb);pb.forEach(function(a){jb.forEach(function(b){sb(a,b,kb);sb(b,a,lb)})});function Hb(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0;this.b=a.resolutions;w(ma(this.b,function(a,b){return b-a}),17);this.maxZoom=this.b.length-1;this.f=void 0!==a.origin?a.origin:null;this.j=null;void 0!==a.origins&&(this.j=a.origins,w(this.j.length==this.b.length,20));var b=a.extent;void 0===b||this.f||this.j||(this.f=Wa(b));w(!this.f&&this.j||this.f&&!this.j,18);this.c=null;void 0!==a.tileSizes&&(this.c=a.tileSizes,w(this.c.length==this.b.length,19));this.i=void 0!==a.tileSize?a.tileSize:
this.c?null:256;w(!this.i&&this.c||this.i&&!this.c,22);this.l=void 0!==b?b:null;this.a=null;this.g=[0,0];void 0!==a.sizes?this.a=a.sizes.map(function(a){return new ra(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):b&&Ib(this,b)}var Jb=[0,0,0];Hb.prototype.K=function(){return this.l};function Kb(a,b,c,d){Lb(a,b[0],b[1],c,!1,Jb);var e=Jb[1],f=Jb[2];Lb(a,b[2],b[3],c,!0,Jb);a=Jb[1];b=Jb[2];void 0!==d?(d.O=e,d.R=a,d.S=f,d.U=b):d=new ra(e,a,f,b);return d}
function Mb(a,b,c,d){return Kb(a,b,a.b[c],d)}function Nb(a,b){var c=a.f?a.f:a.j[b[0]],d=a.b[b[0]];a=Ea(Ob(a,b[0]),a.g);return[c[0]+(b[1]+.5)*a[0]*d,c[1]+(b[2]+.5)*a[1]*d]}function Pb(a,b,c){var d=a.f?a.f:a.j[b[0]],e=a.b[b[0]];a=Ea(Ob(a,b[0]),a.g);var f=d[0]+b[1]*a[0]*e;b=d[1]+b[2]*a[1]*e;return Na(f,b,f+a[0]*e,b+a[1]*e,c)}
function Lb(a,b,c,d,e,f){var g=Qb(a,d),h=d/a.b[g],k=a.f?a.f:a.j[g];a=Ea(Ob(a,g),a.g);b=h*Math.floor((b-k[0])/d+(e?.5:0))/a[0];c=h*Math.floor((c-k[1])/d+(e?0:.5))/a[1];e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));e=b;void 0!==f?(f[0]=g,f[1]=e,f[2]=c):f=[g,e,c];return f}function Ob(a,b){return a.i?a.i:a.c[b]}function Qb(a,b,c){return ua(ha(a.b,b,c||0),a.minZoom,a.maxZoom)}function Ib(a,b){for(var c=a.b.length,d=Array(c),e=a.minZoom;e<c;++e)d[e]=Mb(a,b,e);a.a=d};function Rb(a){var b={};Za(b,a?a:{});void 0===b.extent&&(b.extent=Ab("EPSG:3857").K());b.resolutions=Sb(b.extent,b.maxZoom,b.tileSize);delete b.maxZoom;return new Hb(b)}function Sb(a,b,c){b=void 0!==b?b:42;var d=a[3]-a[1];a=Xa(a);c=Ea(void 0!==c?c:256);c=Math.max(a/c[0],d/c[1]);b+=1;d=Array(b);for(a=0;a<b;++a)d[a]=c/Math.pow(2,a);return d}function Tb(a){a=Ab(a);var b=a.K();b||(a=180*db.degrees/a.j(),b=Na(-a,-a,a,a));return b};function Ub(a){this.f=a.html;this.b=a.tileRanges?a.tileRanges:null};function Vb(a){return function(b){if(b)return[ua(b[0],a[0],a[2]),ua(b[1],a[1],a[3])]}}function Wb(a){return a};function Yb(a){function b(b){var c=a.listener,e=a.Rd||a.target;a.Ud&&Zb(a);return c.call(e,b)}return a.Sd=b}function $b(a,b,c,d){for(var e,f=0,g=a.length;f<g;++f)if(e=a[f],e.listener===b&&e.Rd===c)return d&&(e.deleteIndex=f),e}function ac(a,b){return(a=a.Ka)?a[b]:void 0}function bc(a){var b=a.Ka;b||(b=a.Ka={});return b}function cc(a,b){var c=ac(a,b);if(c){for(var d=0,e=c.length;d<e;++d)a.removeEventListener(b,c[d].Sd),$a(c[d]);c.length=0;if(c=a.Ka)delete c[b],Object.keys(c).length||delete a.Ka}}
function y(a,b,c,d,e){var f=bc(a),g=f[b];g||(g=f[b]=[]);(f=$b(g,c,d,!1))?e||(f.Ud=!1):(f={Rd:d,Ud:!!e,listener:c,target:a,type:b},a.addEventListener(b,Yb(f)),g.push(f));return f}function dc(a,b,c,d){(a=ac(a,b))&&(c=$b(a,c,d,!0))&&Zb(c)}function Zb(a){if(a&&a.target){a.target.removeEventListener(a.type,a.Sd);var b=ac(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);b.length||cc(a.target,a.type)}$a(a)}};function gc(){}gc.prototype.vb=!1;function hc(a){a.vb||(a.vb=!0,a.la())}gc.prototype.la=na;function ic(a){this.type=a;this.target=null}ic.prototype.preventDefault=ic.prototype.stopPropagation=function(){this.li=!0};function jc(a){a.stopPropagation()};function kc(){this.za={};this.wa={};this.ea={}}t(kc,gc);kc.prototype.addEventListener=function(a,b){var c=this.ea[a];c||(c=this.ea[a]=[]);-1===c.indexOf(b)&&c.push(b)};
kc.prototype.f=function(a){var b="string"===typeof a?new ic(a):a;a=b.type;b.target=this;var c=this.ea[a];if(c){a in this.wa||(this.wa[a]=0,this.za[a]=0);++this.wa[a];for(var d=0,e=c.length;d<e;++d)if(!1===c[d].call(this,b)||b.li){var f=!1;break}--this.wa[a];if(!this.wa[a]){b=this.za[a];for(delete this.za[a];b--;)this.removeEventListener(a,na);delete this.wa[a]}return f}};kc.prototype.la=function(){var a=bc(this),b;for(b in a)cc(this,b)};
function lc(a,b){return b?b in a.ea:0<Object.keys(a.ea).length}kc.prototype.removeEventListener=function(a,b){var c=this.ea[a];c&&(b=c.indexOf(b),a in this.za?(c[b]=na,++this.za[a]):(c.splice(b,1),c.length||delete this.ea[a]))};function mc(){kc.call(this);this.j=0}t(mc,kc);mc.prototype.b=function(){++this.j;this.f("change")};mc.prototype.B=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=y(this,a[f],b,c);return e}return y(this,a,b,c)};mc.prototype.once=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=y(this,a[f],b,c,!0);return e}return y(this,a,b,c,!0)};
mc.prototype.fa=function(a,b,c){if(Array.isArray(a))for(var d=0,e=a.length;d<e;++d)dc(this,a[d],b,c);else dc(this,a,b,c)};function nc(a){mc.call(this);v(this);this.L={};void 0!==a&&this.qa(a)}t(nc,mc);var oc={};function pc(a){return oc.hasOwnProperty(a)?oc[a]:oc[a]="change:"+a}l=nc.prototype;l.get=function(a){var b;this.L.hasOwnProperty(a)&&(b=this.L[a]);return b};l.Ca=function(){return Za({},this.L)};function qc(a,b,c){var d=pc(b);a.f(new rc(d,b,c));a.f(new rc("propertychange",b,c))}l.set=function(a,b,c){c?this.L[a]=b:(c=this.L[a],this.L[a]=b,c!==b&&qc(this,a,c))};l.qa=function(a,b){for(var c in a)this.set(c,a[c],b)};
l.Qi=function(a,b){if(a in this.L){var c=this.L[a];delete this.L[a];b||qc(this,a,c)}};function rc(a,b,c){ic.call(this,a);this.key=b;this.oldValue=c}t(rc,ic);function sc(a,b){nc.call(this);this.c=!!(b||{}).unique;this.a=a?a:[];if(this.c)for(a=0,b=this.a.length;a<b;++a)tc(this,this.a[a],a);uc(this)}t(sc,nc);l=sc.prototype;l.clear=function(){for(;0<this.Wa();)this.pop()};function vc(a,b){var c;var d=0;for(c=b.length;d<c;++d)a.push(b[d])}l.forEach=function(a,b){a=b?a.bind(b):a;b=this.a;for(var c=0,d=b.length;c<d;++c)a(b[c],c,b)};l.fg=function(){return this.a};l.ke=function(a){return this.a[a]};l.Wa=function(){return this.get(wc)};
l.pop=function(){return xc(this,this.Wa()-1)};l.push=function(a){this.c&&tc(this,a);var b=this.Wa();this.c&&tc(this,a);this.a.splice(b,0,a);uc(this);this.f(new yc("add",a));return this.Wa()};l.remove=function(a){var b=this.a,c;var d=0;for(c=b.length;d<c;++d)if(b[d]===a)return xc(this,d)};function xc(a,b){var c=a.a[b];a.a.splice(b,1);uc(a);a.f(new yc("remove",c));return c}function uc(a){a.set(wc,a.a.length)}
function tc(a,b,c){for(var d=0,e=a.a.length;d<e;++d)if(a.a[d]===b&&d!==c)throw new pa(58);}var wc="length";function yc(a,b){ic.call(this,a);this.element=b}t(yc,ic);var Bc=/^#(?:[0-9a-f]{3}){1,2}$/i,Cc=/^([a-z]*)$/i;function Dc(a){if("string"!==typeof a){var b=a[0];b!=(b|0)&&(b=b+.5|0);var c=a[1];c!=(c|0)&&(c=c+.5|0);var d=a[2];d!=(d|0)&&(d=d+.5|0);a="rgba("+b+","+c+","+d+","+(void 0===a[3]?1:a[3])+")"}return a}
var Fc=function(){var a={},b=0;return function(c){if(a.hasOwnProperty(c))var d=a[c];else{if(1024<=b){d=0;for(var e in a)d++&3||(delete a[e],--b)}d=c;Cc.exec(d)&&(e=document.createElement("div"),e.style.color=d,document.body.appendChild(e),d=getComputedStyle(e).color,document.body.removeChild(e));if(Bc.exec(d)){var f=d.length-1;w(3==f||6==f,54);var g=3==f?1:2;f=parseInt(d.substr(1+0*g,g),16);e=parseInt(d.substr(1+1*g,g),16);d=parseInt(d.substr(1+2*g,g),16);1==g&&(f=(f<<4)+f,e=(e<<4)+e,d=(d<<4)+d);
f=[f,e,d,1]}else d.indexOf("rgba(")?d.indexOf("rgb(")?w(!1,14):(d=d.slice(4,-1).split(",").map(Number),d.push(1),f=Ec(d)):(d=d.slice(5,-1).split(",").map(Number),f=Ec(d));d=f;a[c]=d;++b}return d}}();function Ec(a){var b=[];b[0]=ua(a[0]+.5|0,0,255);b[1]=ua(a[1]+.5|0,0,255);b[2]=ua(a[2]+.5|0,0,255);b[3]=ua(a[3],0,1);return b};function Gc(a){return"string"===typeof a||a instanceof CanvasPattern||a instanceof CanvasGradient?a:Dc(a)};function Hc(a,b){var c=document.createElement("CANVAS");a&&(c.width=a);b&&(c.height=b);return c.getContext("2d")}function Ic(a){a&&a.parentNode&&a.parentNode.removeChild(a)};function Jc(a){nc.call(this);this.element=a.element?a.element:null;this.l=this.J=null;this.D=[];this.render=a.render?a.render:na;a.target&&(a=a.target,this.J="string"===typeof a?document.getElementById(a):a)}t(Jc,nc);Jc.prototype.la=function(){Ic(this.element);nc.prototype.la.call(this)};
Jc.prototype.setMap=function(a){this.l&&Ic(this.element);for(var b=0,c=this.D.length;b<c;++b)Zb(this.D[b]);this.D.length=0;if(this.l=a)(this.J?this.J:a.C).appendChild(this.element),this.render!==na&&this.D.push(y(a,"postrender",this.render,this)),a.render()};function Kc(a){a=a?a:{};this.H=document.createElement("UL");this.v=document.createElement("LI");this.H.appendChild(this.v);this.v.style.display="none";this.c=void 0!==a.collapsed?a.collapsed:!0;this.g=void 0!==a.collapsible?a.collapsible:!0;this.g||(this.c=!1);var b=void 0!==a.className?a.className:"ol-attribution",c=void 0!==a.tipLabel?a.tipLabel:"Attributions",d=void 0!==a.collapseLabel?a.collapseLabel:"\u00bb";"string"===typeof d?(this.s=document.createElement("span"),this.s.textContent=d):this.s=
d;d=void 0!==a.label?a.label:"i";"string"===typeof d?(this.u=document.createElement("span"),this.u.textContent=d):this.u=d;var e=this.g&&!this.c?this.s:this.u;d=document.createElement("button");d.setAttribute("type","button");d.title=c;d.appendChild(e);y(d,"click",this.V,this);c=document.createElement("div");c.className=b+" ol-unselectable ol-control"+(this.c&&this.g?" ol-collapsed":"")+(this.g?"":" ol-uncollapsible");c.appendChild(this.H);c.appendChild(d);Jc.call(this,{element:c,render:a.render?
a.render:Lc,target:a.target});this.C=!0;this.i={};this.a={};this.X={}}t(Kc,Jc);
function Lc(a){if(a=a.frameState){var b,c,d,e,f,g=a.layerStatesArray,h=Za({},a.attributions),k={},m={},n=a.viewState.projection;var p=0;for(b=g.length;p<b;p++)if(e=g[p].layer.ca()){var r=v(e).toString();if(f=e.C){var u=0;for(c=f.length;u<c;u++){var D=f[u];var F=v(D).toString();if(!(F in h)){if(d=a.usedTiles[r]){var C=e.La(n);a:{var A=void 0;var H,K=D,ca=C,R=n;if(K.b){for(A in d)if(A in K.b){C=d[A];var Z=0;for(H=K.b[A].length;Z<H;++Z){var U=K.b[A][Z];if(ta(U,C)){A=!0;break a}var G=Mb(ca,Tb(R),parseInt(A,
10)),x=G.R-G.O+1;if(C.O<G.O||C.R>G.R)if(ta(U,new ra(za(C.O,x),za(C.R,x),C.S,C.U))||C.R-C.O+1>x&&ta(U,G)){A=!0;break a}}}A=!1}else A=!0}}else A=!1;A?(F in k&&delete k[F],A=D.f,A in m||(m[A]=!0,h[F]=D)):k[F]=D}}}}b=[h,k];p=b[0];b=b[1];for(var I in this.i)I in p?(this.a[I]||(this.i[I].style.display="",this.a[I]=!0),delete p[I]):I in b?(this.a[I]&&(this.i[I].style.display="none",delete this.a[I]),delete b[I]):(Ic(this.i[I]),delete this.i[I],delete this.a[I]);for(I in p)u=document.createElement("LI"),
u.innerHTML=p[I].f,this.H.appendChild(u),this.i[I]=u,this.a[I]=!0;for(I in b)u=document.createElement("LI"),u.innerHTML=b[I].f,u.style.display="none",this.H.appendChild(u),this.i[I]=u;I=!bb(this.a)||!bb(a.logos);this.C!=I&&(this.element.style.display=I?"":"none",this.C=I);I&&bb(this.a)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");a=a.logos;I=this.X;for(Ca in I)Ca in a||(Ic(I[Ca]),delete I[Ca]);for(var wa in a)if(b=a[wa],b instanceof HTMLElement&&(this.v.appendChild(b),
I[wa]=b),!(wa in I)){var Ca=new Image;Ca.src=wa;""===b?p=Ca:(p=document.createElement("a"),p.href=b,p.appendChild(Ca));this.v.appendChild(p);I[wa]=p}this.v.style.display=bb(a)?"none":""}else this.C&&(this.element.style.display="none",this.C=!1)}Kc.prototype.V=function(a){a.preventDefault();Mc(this)};function Mc(a){a.element.classList.toggle("ol-collapsed");if(a.c){var b=a.u,c=b.parentNode;c&&c.replaceChild(a.s,b)}else b=a.s,(c=b.parentNode)&&c.replaceChild(a.u,b);a.c=!a.c}
Kc.prototype.ga=function(a){this.g!==a&&(this.g=a,this.element.classList.toggle("ol-uncollapsible"),!a&&this.c&&Mc(this))};Kc.prototype.$=function(a){this.g&&this.c!==a&&Mc(this)};function Nc(a){return 1-Math.pow(1-a,3)}function Oc(a){return 3*a*a-2*a*a*a}function Pc(a){return a};function Qc(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-rotate",c=void 0!==a.label?a.label:"\u21e7";this.a=null;"string"===typeof c?(this.a=document.createElement("span"),this.a.className="ol-compass",this.a.textContent=c):(this.a=c,this.a.classList.add("ol-compass"));var d=a.tipLabel?a.tipLabel:"Reset rotation";c=document.createElement("button");c.className=b+"-reset";c.setAttribute("type","button");c.title=d;c.appendChild(this.a);y(c,"click",Qc.prototype.v,this);d=document.createElement("div");
d.className=b+" ol-unselectable ol-control";d.appendChild(c);b=a.render?a.render:Rc;this.i=a.resetNorth?a.resetNorth:void 0;Jc.call(this,{element:d,render:b,target:a.target});this.g=void 0!==a.duration?a.duration:250;this.c=void 0!==a.autoHide?a.autoHide:!0;this.s=void 0;this.c&&this.element.classList.add("ol-hidden")}t(Qc,Jc);
Qc.prototype.v=function(a){a.preventDefault();this.i?this.i():(a=this.l.Z())&&void 0!==Sc(a)&&(0<this.g?a.animate({rotation:0,duration:this.g,easing:Nc}):(a.set("rotation",0),0<Tc(a)[0]&&Uc(a)))};
function Rc(a){if(a=a.frameState){a=a.viewState.rotation;if(a!=this.s){var b="rotate("+a+"rad)";if(this.c){var c=this.element.classList.contains("ol-hidden");c||a?c&&a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.a.style.msTransform=b;this.a.style.webkitTransform=b;this.a.style.transform=b}this.s=a}};function Vc(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-zoom",c=void 0!==a.delta?a.delta:1,d=void 0!==a.zoomInLabel?a.zoomInLabel:"+",e=void 0!==a.zoomOutLabel?a.zoomOutLabel:"\u2212",f=void 0!==a.zoomInTipLabel?a.zoomInTipLabel:"Zoom in",g=void 0!==a.zoomOutTipLabel?a.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=b+"-in";h.setAttribute("type","button");h.title=f;h.appendChild("string"===typeof d?document.createTextNode(d):d);y(h,"click",Vc.prototype.c.bind(this,
c));d=document.createElement("button");d.className=b+"-out";d.setAttribute("type","button");d.title=g;d.appendChild("string"===typeof e?document.createTextNode(e):e);y(d,"click",Vc.prototype.c.bind(this,-c));c=document.createElement("div");c.className=b+" ol-unselectable ol-control";c.appendChild(h);c.appendChild(d);Jc.call(this,{element:c,target:a.target});this.a=void 0!==a.duration?a.duration:250}t(Vc,Jc);
Vc.prototype.c=function(a,b){b.preventDefault();if(b=this.l.Z()){var c=b.ua();c&&(a=b.constrainResolution(c,a),0<this.a?(0<Tc(b)[0]&&Uc(b),b.animate({resolution:a,duration:this.a,easing:Nc})):Wc(b,a))}};function Xc(a){a=a?a:{};var b=new sc;(void 0!==a.zoom?a.zoom:1)&&b.push(new Vc(a.zoomOptions));(void 0!==a.rotate?a.rotate:1)&&b.push(new Qc(a.rotateOptions));(void 0!==a.attribution?a.attribution:1)&&b.push(new Kc(a.attributionOptions));return b};function Yc(a){a=a?a:{};var b=document.createElement("DIV");b.className=void 0!==a.className?a.className:"ol-mouse-position";Jc.call(this,{element:b,render:a.render?a.render:Zc,target:a.target});y(this,pc($c),this.uh,this);a.coordinateFormat&&this.Ze(a.coordinateFormat);a.projection&&this.set($c,Ab(a.projection));this.s=void 0!==a.undefinedHTML?a.undefinedHTML:"";this.g=b.innerHTML;this.i=this.c=this.a=null}t(Yc,Jc);
function Zc(a){a=a.frameState;a?this.a!=a.viewState.projection&&(this.a=a.viewState.projection,this.c=null):this.a=null;ad(this,this.i)}l=Yc.prototype;l.uh=function(){this.c=null};l.zg=function(a){this.i=bd(this.l,a);ad(this,this.i)};l.Ag=function(){ad(this,null);this.i=null};l.setMap=function(a){Jc.prototype.setMap.call(this,a);a&&(a=a.a,this.D.push(y(a,"mousemove",this.zg,this),y(a,"mouseout",this.Ag,this)))};l.Ze=function(a){this.set(cd,a)};
function ad(a,b){var c=a.s;if(b&&a.a){if(!a.c){var d=a.get($c);a.c=d?Db(a.a,d):Fb}if(b=a.l.Ba(b))a.c(b,b),c=(c=a.get(cd))?c(b):b.toString()}a.g&&c==a.g||(a.element.innerHTML=c,a.g=c)}var $c="projection",cd="coordinateFormat";function dd(a,b,c){ic.call(this,a);this.map=b;this.frameState=void 0!==c?c:null}t(dd,ic);function ed(a,b,c,d,e){dd.call(this,a,b,e);this.originalEvent=c;this.pixel=bd(b,c);this.coordinate=b.Ba(this.pixel);this.dragging=void 0!==d?d:!1}t(ed,dd);ed.prototype.preventDefault=function(){dd.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};ed.prototype.stopPropagation=function(){dd.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};var fd="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",gd=-1!==fd.indexOf("firefox"),hd=-1!==fd.indexOf("safari")&&-1==fd.indexOf("chrom"),id=-1!==fd.indexOf("webkit")&&-1==fd.indexOf("edge"),jd=-1!==fd.indexOf("macintosh"),kd=window.devicePixelRatio||1,ld=!1,md=function(){if(!("HTMLCanvasElement"in window))return!1;try{var a=document.createElement("CANVAS").getContext("2d");return a?(void 0!==a.setLineDash&&(ld=!0),!0):!1}catch(b){return!1}}(),nd="geolocation"in navigator,od=
"ontouchstart"in window,pd="PointerEvent"in window,qd=!!navigator.msPointerEnabled;var rd={fj:"singleclick",Vi:"click",Wi:"dblclick",Zi:"pointerdrag",bj:"pointermove",Yi:"pointerdown",ej:"pointerup",dj:"pointerover",cj:"pointerout",$i:"pointerenter",aj:"pointerleave",Xi:"pointercancel"};function sd(a,b,c,d,e){ed.call(this,a,b,c.b,d,e);this.b=c}t(sd,ed);function td(a,b){this.b=a;this.c=b};function vd(a){td.call(this,a,{mousedown:this.Ug,mousemove:this.Vg,mouseup:this.Yg,mouseover:this.Xg,mouseout:this.Wg});this.f=a.j;this.j=[]}t(vd,td);function wd(a,b){a=a.j;var c=b.clientX;b=b.clientY;for(var d=0,e=a.length,f;d<e&&(f=a[d]);d++){var g=Math.abs(b-f[1]);if(25>=Math.abs(c-f[0])&&25>=g)return!0}return!1}function xd(a){var b=yd(a,a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=1;b.isPrimary=!0;b.pointerType="mouse";return b}l=vd.prototype;
l.Ug=function(a){if(!wd(this,a)){(1).toString()in this.f&&this.cancel(a);var b=xd(a);this.f[(1).toString()]=a;zd(this.b,"pointerdown",b,a)}};l.Vg=function(a){if(!wd(this,a)){var b=xd(a);zd(this.b,"pointermove",b,a)}};l.Yg=function(a){if(!wd(this,a)){var b=this.f[(1).toString()];b&&b.button===a.button&&(b=xd(a),zd(this.b,"pointerup",b,a),delete this.f[(1).toString()])}};l.Xg=function(a){if(!wd(this,a)){var b=xd(a);Ad(this.b,b,a)}};l.Wg=function(a){if(!wd(this,a)){var b=xd(a);Bd(this.b,b,a)}};
l.cancel=function(a){var b=xd(a);this.b.cancel(b,a);delete this.f[(1).toString()]};function Cd(a){td.call(this,a,{MSPointerDown:this.dh,MSPointerMove:this.eh,MSPointerUp:this.hh,MSPointerOut:this.fh,MSPointerOver:this.gh,MSPointerCancel:this.bh,MSGotPointerCapture:this.$g,MSLostPointerCapture:this.ah});this.f=a.j;this.j=["","unavailable","touch","pen","mouse"]}t(Cd,td);function Dd(a,b){var c=b;"number"===typeof b.pointerType&&(c=yd(b,b),c.pointerType=a.j[b.pointerType]);return c}l=Cd.prototype;
l.dh=function(a){this.f[a.pointerId.toString()]=a;var b=Dd(this,a);zd(this.b,"pointerdown",b,a)};l.eh=function(a){var b=Dd(this,a);zd(this.b,"pointermove",b,a)};l.hh=function(a){var b=Dd(this,a);zd(this.b,"pointerup",b,a);delete this.f[a.pointerId.toString()]};l.fh=function(a){var b=Dd(this,a);Bd(this.b,b,a)};l.gh=function(a){var b=Dd(this,a);Ad(this.b,b,a)};l.bh=function(a){var b=Dd(this,a);this.b.cancel(b,a);delete this.f[a.pointerId.toString()]};
l.ah=function(a){this.b.f(new Ed("lostpointercapture",a,a))};l.$g=function(a){this.b.f(new Ed("gotpointercapture",a,a))};function Fd(a){td.call(this,a,{pointerdown:this.ei,pointermove:this.fi,pointerup:this.ii,pointerout:this.gi,pointerover:this.hi,pointercancel:this.di,gotpointercapture:this.rg,lostpointercapture:this.Sg})}t(Fd,td);l=Fd.prototype;l.ei=function(a){Gd(this.b,a)};l.fi=function(a){Gd(this.b,a)};l.ii=function(a){Gd(this.b,a)};l.gi=function(a){Gd(this.b,a)};l.hi=function(a){Gd(this.b,a)};l.di=function(a){Gd(this.b,a)};l.Sg=function(a){Gd(this.b,a)};l.rg=function(a){Gd(this.b,a)};function Ed(a,b,c){ic.call(this,a);this.b=b;a=c?c:{};this.buttons=Hd(a);this.pressure=Id(a,this.buttons);this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.ctrlKey="ctrlKey"in a?a.ctrlKey:!1;this.altKey="altKey"in a?a.altKey:!1;this.shiftKey=
"shiftKey"in a?a.shiftKey:!1;this.metaKey="metaKey"in a?a.metaKey:!1;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.tiltX="tiltX"in a?a.tiltX:0;this.tiltY="tiltY"in a?a.tiltY:0;this.pointerType="pointerType"in a?a.pointerType:"";this.isPrimary="isPrimary"in a?a.isPrimary:!1;b.preventDefault&&(this.preventDefault=function(){b.preventDefault()})}
t(Ed,ic);function Hd(a){if(a.buttons||Jd)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}function Id(a,b){var c=0;a.pressure?c=a.pressure:c=b?.5:0;return c}var Jd=!1;try{Jd=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){};function Kd(a,b){td.call(this,a,{touchstart:this.Pi,touchmove:this.Oi,touchend:this.Ni,touchcancel:this.Mi});this.f=a.j;this.g=b;this.j=void 0;this.i=0;this.a=void 0}t(Kd,td);l=Kd.prototype;l.Ye=function(){this.i=0;this.a=void 0};
function Ld(a,b,c){b=yd(b,c);b.pointerId=c.identifier+2;b.bubbles=!0;b.cancelable=!0;b.detail=a.i;b.button=0;b.buttons=1;b.width=c.webkitRadiusX||c.radiusX||0;b.height=c.webkitRadiusY||c.radiusY||0;b.pressure=c.webkitForce||c.force||.5;b.isPrimary=a.j===c.identifier;b.pointerType="touch";b.clientX=c.clientX;b.clientY=c.clientY;b.screenX=c.screenX;b.screenY=c.screenY;return b}
function Md(a,b,c){function d(){b.preventDefault()}var e=Array.prototype.slice.call(b.changedTouches),f=e.length,g;for(g=0;g<f;++g){var h=Ld(a,b,e[g]);h.preventDefault=d;c.call(a,b,h)}}
l.Pi=function(a){var b=a.touches,c=Object.keys(this.f),d=c.length;if(d>=b.length){var e=[],f;for(f=0;f<d;++f){var g=c[f];var h=this.f[g];var k;if(!(k=1==g))a:{for(var m=b.length,n=0;n<m;n++)if(k=b[n],k.identifier===g-2){k=!0;break a}k=!1}k||e.push(h.out)}for(f=0;f<e.length;++f)this.Kc(a,e[f])}b=a.changedTouches[0];c=Object.keys(this.f).length;if(!c||1===c&&(1).toString()in this.f)this.j=b.identifier,void 0!==this.a&&clearTimeout(this.a);Nd(this,a);this.i++;Md(this,a,this.$h)};
l.$h=function(a,b){this.f[b.pointerId]={target:b.target,out:b,Le:b.target};var c=this.b;b.bubbles=!0;zd(c,"pointerover",b,a);c=this.b;b.bubbles=!1;zd(c,"pointerenter",b,a);zd(this.b,"pointerdown",b,a)};l.Oi=function(a){a.preventDefault();Md(this,a,this.Zg)};
l.Zg=function(a,b){var c=this.f[b.pointerId];if(c){var d=c.out,e=c.Le;zd(this.b,"pointermove",b,a);d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(Bd(this.b,d,a),Ad(this.b,b,a)):(b.target=e,b.relatedTarget=null,this.Kc(a,b)));c.out=b;c.Le=b.target}};l.Ni=function(a){Nd(this,a);Md(this,a,this.Ri)};
l.Ri=function(a,b){zd(this.b,"pointerup",b,a);this.b.out(b,a);Od(this.b,b,a);delete this.f[b.pointerId];b.isPrimary&&(this.j=void 0,this.a=setTimeout(this.Ye.bind(this),200))};l.Mi=function(a){Md(this,a,this.Kc)};l.Kc=function(a,b){this.b.cancel(b,a);this.b.out(b,a);Od(this.b,b,a);delete this.f[b.pointerId];b.isPrimary&&(this.j=void 0,this.a=setTimeout(this.Ye.bind(this),200))};
function Nd(a,b){var c=a.g.j;b=b.changedTouches[0];if(a.j===b.identifier){var d=[b.clientX,b.clientY];c.push(d);setTimeout(function(){var a=c.indexOf(d);-1<a&&c.splice(a,1)},2500)}};function Pd(a){kc.call(this);this.i=a;this.j={};this.c={};this.b=[];pd?Qd(this,new Fd(this)):qd?Qd(this,new Cd(this)):(a=new vd(this),Qd(this,a),od&&Qd(this,new Kd(this,a)));a=this.b.length;for(var b,c=0;c<a;c++)b=this.b[c],Rd(this,Object.keys(b.c))}t(Pd,kc);function Qd(a,b){var c=Object.keys(b.c);c&&(c.forEach(function(a){var c=b.c[a];c&&(this.c[a]=c.bind(b))},a),a.b.push(b))}Pd.prototype.a=function(a){var b=this.c[a.type];b&&b(a)};
function Rd(a,b){b.forEach(function(a){y(this.i,a,this.a,this)},a)}function Sd(a,b){b.forEach(function(a){dc(this.i,a,this.a,this)},a)}function yd(a,b){for(var c={},d,e=0,f=Td.length;e<f;e++)d=Td[e][0],c[d]=a[d]||b[d]||Td[e][1];return c}function Od(a,b,c){b.bubbles=!1;zd(a,"pointerleave",b,c)}Pd.prototype.out=function(a,b){a.bubbles=!0;zd(this,"pointerout",a,b)};Pd.prototype.cancel=function(a,b){zd(this,"pointercancel",a,b)};
function Bd(a,b,c){a.out(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||Od(a,b,c)}function Ad(a,b,c){b.bubbles=!0;zd(a,"pointerover",b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||(b.bubbles=!1,zd(a,"pointerenter",b,c))}function zd(a,b,c,d){a.f(new Ed(b,d,c))}function Gd(a,b){a.f(new Ed(b.type,b,b))}Pd.prototype.la=function(){for(var a=this.b.length,b,c=0;c<a;c++)b=this.b[c],Sd(this,Object.keys(b.c));kc.prototype.la.call(this)};
var Td=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function Ud(a,b){kc.call(this);this.j=a;this.g=0;this.B=!1;this.c=[];this.v=b?b*kd:kd;this.a=null;a=this.j.a;this.D=0;this.L={};this.i=new Pd(a);this.b=null;this.l=y(this.i,"pointerdown",this.Cg,this);this.s=y(this.i,"pointermove",this.Bi,this)}t(Ud,kc);function Vd(a,b){var c=new sd("click",a.j,b);a.f(c);a.g?(clearTimeout(a.g),a.g=0,c=new sd("dblclick",a.j,b),a.f(c)):a.g=setTimeout(function(){this.g=0;var a=new sd("singleclick",this.j,b);this.f(a)}.bind(a),250)}
function Wd(a,b){"pointerup"==b.type||"pointercancel"==b.type?delete a.L[b.pointerId]:"pointerdown"==b.type&&(a.L[b.pointerId]=!0);a.D=Object.keys(a.L).length}l=Ud.prototype;l.ge=function(a){Wd(this,a);var b=new sd("pointerup",this.j,a);this.f(b);this.B||a.button||Vd(this,this.a);this.D||(this.c.forEach(Zb),this.c.length=0,this.B=!1,this.a=null,hc(this.b),this.b=null)};
l.Cg=function(a){Wd(this,a);var b=new sd("pointerdown",this.j,a);this.f(b);this.a=a;this.c.length||(this.b=new Pd(document),this.c.push(y(this.b,"pointermove",this.ph,this),y(this.b,"pointerup",this.ge,this),y(this.i,"pointercancel",this.ge,this)))};l.ph=function(a){if(Xd(this,a)){this.B=!0;var b=new sd("pointerdrag",this.j,a,this.B);this.f(b)}a.preventDefault()};l.Bi=function(a){this.f(new sd(a.type,this.j,a,!(!this.a||!Xd(this,a))))};
function Xd(a,b){return Math.abs(b.clientX-a.a.clientX)>a.v||Math.abs(b.clientY-a.a.clientY)>a.v}l.la=function(){this.s&&(Zb(this.s),this.s=null);this.l&&(Zb(this.l),this.l=null);this.c.forEach(Zb);this.c.length=0;this.b&&(hc(this.b),this.b=null);this.i&&(hc(this.i),this.i=null);kc.prototype.la.call(this)};function Yd(a,b){this.l=a;this.a=b;this.b=[];this.f=[];this.j={}}Yd.prototype.clear=function(){this.b.length=0;this.f.length=0;$a(this.j)};Yd.prototype.g=function(a){w(!(this.a(a)in this.j),31);var b=this.l(a);return Infinity!=b?(this.b.push(a),this.f.push(b),this.j[this.a(a)]=!0,Zd(this,0,this.b.length-1),!0):!1};function $d(a,b){for(var c=a.b,d=a.f,e=c.length,f=c[b],g=d[b],h=b;b<e>>1;){var k=2*b+1,m=2*b+2;k=m<e&&d[m]<d[k]?m:k;c[b]=c[k];d[b]=d[k];b=k}c[b]=f;d[b]=g;Zd(a,h,b)}
function Zd(a,b,c){var d=a.b;a=a.f;for(var e=d[c],f=a[c];c>b;){var g=c-1>>1;if(a[g]>f)d[c]=d[g],a[c]=a[g],c=g;else break}d[c]=e;a[c]=f};function ae(a,b){Yd.call(this,function(b){return a.apply(null,b)},function(a){return a[0].Xa()});this.s=b;this.i=0;this.c={}}t(ae,Yd);ae.prototype.g=function(a){var b=Yd.prototype.g.call(this,a);b&&y(a[0],"change",this.B,this);return b};ae.prototype.B=function(a){a=a.target;var b=a.state;if(2===b||3===b||4===b||5===b)dc(a,"change",this.B,this),a=a.Xa(),a in this.c&&(delete this.c[a],--this.i),this.s()};function be(a){return function(b,c,d){if(void 0!==b)return b=ha(a,b,d),b=ua(b+c,0,a.length-1),c=Math.floor(b),b!=c&&c<a.length-1?a[c]/Math.pow(a[c]/a[c+1],b-c):a[c]}}function ce(a,b,c){return function(d,e,f){if(void 0!==d)return d=Math.max(Math.floor(Math.log(b/d)/Math.log(a)+(-f/2+.5))+e,0),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};function de(a){if(void 0!==a)return 0}function ee(a,b){if(void 0!==a)return a+b}function fe(a){var b=2*Math.PI/a;return function(a,d){if(void 0!==a)return a=Math.floor((a+d)/b+.5)*b}}function ge(){var a=ya(5);return function(b,c){if(void 0!==b)return Math.abs(b+c)<=a?0:b+c}};function he(a){a=""+a;var b=a.indexOf(".");b=-1===b?a.length:b;return 2<b?a:Array(3-b).join("0")+a};function ie(a,b){a[0]+=b[0];a[1]+=b[1]}function je(a,b){var c=b.Ib(),d=b.ba();b=d[0];d=d[1];var e=a[0]-b;a=a[1]-d;e||a||(e=1);var f=Math.sqrt(e*e+a*a);return[b+c*e/f,d+c*a/f]}function le(a,b){var c=a[0];a=a[1];var d=b[0],e=b[1];b=d[0];d=d[1];var f=e[0];e=e[1];var g=f-b,h=e-d;c=g||h?(g*(c-b)+h*(a-d))/(g*g+h*h||0):0;0>=c?(a=b,c=d):1<=c?(a=f,c=e):(a=b+c*g,c=d+c*h);return[a,c]}function me(a,b){for(var c=!0,d=a.length-1;0<=d;--d)if(a[d]!=b[d]){c=!1;break}return c}
function ne(a,b){var c=Math.cos(b);b=Math.sin(b);var d=a[1]*c+a[0]*b;a[0]=a[0]*c-a[1]*b;a[1]=d}function oe(a,b){a[0]*=b;a[1]*=b}function pe(a,b){var c=a[0]-b[0];a=a[1]-b[1];return c*c+a*a}function qe(a,b){return Math.sqrt(pe(a,b))}function re(a,b){return pe(a,le(a,b))};function se(){return!0}function te(){return!1};function ue(){nc.call(this);this.s=Ha();this.D=-1;this.c={};this.l=this.i=0}t(ue,nc);ue.prototype.K=function(a){this.D!=this.j&&(this.s=this.Zb(this.s),this.D=this.j);var b=this.s;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};ue.prototype.C=function(a,b){this.xb(Eb(a,b));return this};function ve(a,b,c,d,e,f){for(var g=f?f:[],h=0;b<c;b+=d){var k=a[b],m=a[b+1];g[h++]=e[0]*k+e[2]*m+e[4];g[h++]=e[1]*k+e[3]*m+e[5]}f&&g.length!=h&&(g.length=h);return g};function we(){ue.call(this);this.W="XY";this.A=2;this.o=null}t(we,ue);function xe(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}l=we.prototype;l.Zb=function(a){var b=this.o,c=this.o.length,d=this.A;a=Oa(a);return Ra(a,b,0,c,d)};l.Gb=function(){return this.o.slice(0,this.A)};l.mg=function(){return this.o.slice(this.o.length-this.A)};
l.ad=function(a){this.l!=this.j&&($a(this.c),this.i=0,this.l=this.j);if(0>a||this.i&&a<=this.i)return this;var b=a.toString();if(this.c.hasOwnProperty(b))return this.c[b];var c=this.kb(a);if(c.o.length<this.o.length)return this.c[b]=c;this.i=a;return this};l.kb=function(){return this};function ye(a,b,c){a.A=xe(b);a.W=b;a.o=c}
function ze(a,b,c,d){if(b)c=xe(b);else{for(b=0;b<d;++b)if(c.length)c=c[0];else{a.W="XY";a.A=2;return}c=c.length;var e;2==c?e="XY":3==c?e="XYZ":4==c&&(e="XYZM");b=e}a.W=b;a.A=c}l.xb=function(a){this.o&&(a(this.o,this.o,this.A),this.b())};
l.rotate=function(a,b){var c=this.o;if(c){var d=c.length,e=this.A,f=c?c:[],g=Math.cos(a);a=Math.sin(a);var h=b[0];b=b[1];for(var k=0,m=0;m<d;m+=e){var n=c[m]-h,p=c[m+1]-b;f[k++]=h+n*g-p*a;f[k++]=b+n*a+p*g;for(n=m+2;n<m+e;++n)f[k++]=c[n]}c&&f.length!=k&&(f.length=k);this.b()}};
l.scale=function(a,b,c){var d=b;void 0===d&&(d=a);var e=c;e||(e=Sa(this.K()));if(c=this.o){b=c.length;var f=this.A,g=c?c:[],h=e[0];e=e[1];for(var k=0,m=0;m<b;m+=f){var n=c[m]-h,p=c[m+1]-e;g[k++]=h+a*n;g[k++]=e+d*p;for(n=m+2;n<m+f;++n)g[k++]=c[n]}c&&g.length!=k&&(g.length=k);this.b()}};function Ae(a,b,c,d){var e=0,f;var g=0;for(f=c.length;g<f;++g){for(var h=c[g],k=0,m=a[h-d],n=a[h-d+1];b<h;b+=d){var p=a[b],r=a[b+1];k+=n*p-m*r;m=p;n=r}e+=k/2;b=h}return e};function Be(a,b,c,d,e,f,g){var h=a[b],k=a[b+1],m=a[c]-h,n=a[c+1]-k;if(m||n)if(f=((e-h)*m+(f-k)*n)/(m*m+n*n),1<f)b=c;else if(0<f){for(e=0;e<d;++e)g[e]=Aa(a[b+e],a[c+e],f);g.length=d;return}for(e=0;e<d;++e)g[e]=a[b+e];g.length=d}function Ce(a,b,c,d,e){var f=a[b],g=a[b+1];for(b+=d;b<c;b+=d){var h=a[b],k=a[b+1];f=xa(f,g,h,k);f>e&&(e=f);f=h;g=k}return e}function De(a,b,c,d,e){var f;var g=0;for(f=c.length;g<f;++g){var h=c[g];e=Ce(a,b,h,d,e);b=h}return e}
function Ee(a,b,c,d,e,f,g,h,k,m,n){if(b==c)return m;if(!e){var p=xa(g,h,a[b],a[b+1]);if(p<m){for(n=0;n<d;++n)k[n]=a[b+n];k.length=d;return p}return m}for(var r=n?n:[NaN,NaN],u=b+d;u<c;)if(Be(a,u-d,u,d,g,h,r),p=xa(g,h,r[0],r[1]),p<m){m=p;for(n=0;n<d;++n)k[n]=r[n];k.length=d;u+=d}else u+=d*Math.max((Math.sqrt(p)-Math.sqrt(m))/e|0,1);if(f&&(Be(a,c-d,b,d,g,h,r),p=xa(g,h,r[0],r[1]),p<m)){m=p;for(n=0;n<d;++n)k[n]=r[n];k.length=d}return m}
function Fe(a,b,c,d,e,f,g,h,k,m,n){n=n?n:[NaN,NaN];var p;var r=0;for(p=c.length;r<p;++r){var u=c[r];m=Ee(a,b,u,d,e,f,g,h,k,m,n);b=u}return m};function Ge(a,b){var c=0,d;var e=0;for(d=b.length;e<d;++e)a[c++]=b[e];return c}function He(a,b,c,d){var e;var f=0;for(e=c.length;f<e;++f){var g=c[f],h;for(h=0;h<d;++h)a[b++]=g[h]}return b}function Ie(a,b,c,d,e){e=e?e:[];var f=0,g;var h=0;for(g=c.length;h<g;++h)b=He(a,b,c[h],d),e[f++]=b;e.length=f;return e};function Je(a,b,c,d,e){e=void 0!==e?e:[];for(var f=0;b<c;b+=d)e[f++]=a.slice(b,b+d);e.length=f;return e}function Ke(a,b,c,d,e){e=void 0!==e?e:[];var f=0,g;var h=0;for(g=c.length;h<g;++h){var k=c[h];e[f++]=Je(a,b,k,d,e[f]);b=k}e.length=f;return e}function Le(a,b,c,d,e){e=void 0!==e?e:[];var f=0,g;var h=0;for(g=c.length;h<g;++h){var k=c[h];e[f++]=Ke(a,b,k,d,e[f]);b=k[k.length-1]}e.length=f;return e};function Me(a,b,c,d,e,f,g){var h=(c-b)/d;if(3>h){for(;b<c;b+=d)f[g++]=a[b],f[g++]=a[b+1];return g}var k=Array(h);k[0]=1;k[h-1]=1;c=[b,c-d];for(var m=0,n;0<c.length;){var p=c.pop(),r=c.pop(),u=0,D=a[r],F=a[r+1],C=a[p],A=a[p+1];for(n=r+d;n<p;n+=d){var H=a[n];var K=a[n+1],ca=D,R=F,Z=C-ca,U=A-R;if(Z||U){var G=((H-ca)*Z+(K-R)*U)/(Z*Z+U*U);1<G?(ca=C,R=A):0<G&&(ca+=Z*G,R+=U*G)}H=xa(H,K,ca,R);H>u&&(m=n,u=H)}u>e&&(k[(m-b)/d]=1,r+d<m&&c.push(r,m),m+d<p&&c.push(m,p))}for(n=0;n<h;++n)k[n]&&(f[g++]=a[b+n*d],f[g++]=
a[b+n*d+1]);return g}
function Ne(a,b,c,d,e,f,g,h){var k;var m=0;for(k=c.length;m<k;++m){var n=c[m];a:{var p=a,r=n,u=d,D=e,F=f,C=g;if(b!=r){var A=D*Math.round(p[b]/D),H=D*Math.round(p[b+1]/D);b+=u;F[C++]=A;F[C++]=H;do{var K=D*Math.round(p[b]/D);g=D*Math.round(p[b+1]/D);b+=u;if(b==r){F[C++]=K;F[C++]=g;g=C;break a}}while(K==A&&g==H);for(;b<r;){var ca=D*Math.round(p[b]/D);var R=D*Math.round(p[b+1]/D);b+=u;if(ca!=K||R!=g){var Z=K-A,U=g-H,G=ca-A,x=R-H;Z*x==U*G&&(0>Z&&G<Z||Z==G||0<Z&&G>Z)&&(0>U&&x<U||U==x||0<U&&x>U)||(F[C++]=
K,F[C++]=g,A=K,H=g);K=ca;g=R}}F[C++]=K;F[C++]=g}g=C}h.push(g);b=n}return g};function Oe(a,b){we.call(this);this.a=this.g=-1;this.Y(a,b)}t(Oe,we);l=Oe.prototype;l.clone=function(){var a=new Oe(null);Pe(a,this.W,this.o.slice());return a};l.Ga=function(a,b,c,d){if(d<La(this.K(),a,b))return d;this.a!=this.j&&(this.g=Math.sqrt(Ce(this.o,0,this.o.length,this.A,0)),this.a=this.j);return Ee(this.o,0,this.o.length,this.A,this.g,!0,a,b,c,d)};l.G=function(){return Je(this.o,0,this.o.length,this.A)};
l.kb=function(a){var b=[];b.length=Me(this.o,0,this.o.length,this.A,a,b,0);a=new Oe(null);Pe(a,"XY",b);return a};l.I=function(){return"LinearRing"};l.Y=function(a,b){a?(ze(this,b,a,1),this.o||(this.o=[]),this.o.length=He(this.o,0,a,this.A),this.b()):Pe(this,"XY",null)};function Pe(a,b,c){ye(a,b,c);a.b()};function Qe(a,b){we.call(this);this.Y(a,b)}t(Qe,we);l=Qe.prototype;l.clone=function(){var a=new Qe(null);ye(a,this.W,this.o.slice());a.b();return a};l.Ga=function(a,b,c,d){var e=this.o;a=xa(a,b,e[0],e[1]);if(a<d){d=this.A;for(b=0;b<d;++b)c[b]=e[b];c.length=d;return a}return d};l.G=function(){return this.o?this.o.slice():[]};l.Zb=function(a){return Pa(this.o,a)};l.I=function(){return"Point"};l.Y=function(a,b){a?(ze(this,b,a,0),this.o||(this.o=[]),this.o.length=Ge(this.o,a)):ye(this,"XY",null);this.b()};function Re(a,b,c,d,e,f){for(var g=0,h=a[c-d],k=a[c-d+1];b<c;b+=d){var m=a[b],n=a[b+1];k<=f?n>f&&0<(m-h)*(f-k)-(e-h)*(n-k)&&g++:n<=f&&0>(m-h)*(f-k)-(e-h)*(n-k)&&g--;h=m;k=n}return!!g};function Se(a,b,c,d,e,f,g){var h,k=e[f+1],m=[],n=c[0];var p=a[n-d];var r=a[n-d+1];for(h=b;h<n;h+=d){var u=a[h];var D=a[h+1];if(k<=r&&D<=k||r<=k&&k<=D)p=(k-r)/(D-r)*(u-p)+p,m.push(p);p=u;r=D}n=NaN;r=-Infinity;m.sort(fa);p=m[0];h=1;for(D=m.length;h<D;++h){u=m[h];var F=Math.abs(u-p);if(F>r){p=(p+u)/2;var C;a:if(c.length&&Re(a,b,c[0],d,p,k)){var A=1;for(C=c.length;A<C;++A)if(Re(a,c[A-1],c[A],d,p,k)){C=!1;break a}C=!0}else C=!1;C&&(n=p,r=F)}p=u}isNaN(n)&&(n=e[f]);return g?(g.push(n,k),g):[n,k]};function Te(a,b,c,d){for(var e=0,f=a[c-d],g=a[c-d+1];b<c;b+=d){var h=a[b],k=a[b+1];e+=(h-f)*(k+g);f=h;g=k}return 0<e}function Ue(a,b,c,d){var e=0;d=void 0!==d?d:!1;var f;var g=0;for(f=b.length;g<f;++g){var h=b[g];e=Te(a,e,h,c);if(!g){if(d&&e||!d&&!e)return!1}else if(d&&!e||!d&&e)return!1;e=h}return!0}
function Ve(a,b,c,d,e){e=void 0!==e?e:!1;var f;var g=0;for(f=c.length;g<f;++g){var h=c[g],k=Te(a,b,h,d);if(g?e&&!k||!e&&k:e&&k||!e&&!k){k=a;for(var m=h,n=d;b<m-n;){var p;for(p=0;p<n;++p){var r=k[b+p];k[b+p]=k[m-n+p];k[m-n+p]=r}b+=n;m-=n}}b=h}return b}function We(a,b,c,d){var e=0,f;var g=0;for(f=b.length;g<f;++g)e=Ve(a,e,b[g],c,d);return e};function z(a,b){we.call(this);this.a=[];this.v=-1;this.u=null;this.X=this.H=this.J=-1;this.g=null;this.Y(a,b)}t(z,we);l=z.prototype;l.clone=function(){var a=new z(null);Xe(a,this.W,this.o.slice(),this.a.slice());return a};l.Ga=function(a,b,c,d){if(d<La(this.K(),a,b))return d;this.H!=this.j&&(this.J=Math.sqrt(De(this.o,0,this.a,this.A,0)),this.H=this.j);return Fe(this.o,0,this.a,this.A,this.J,!0,a,b,c,d)};l.Fh=function(){return Ae(Ye(this),0,this.a,this.A)};
l.G=function(a){if(void 0!==a){var b=Ye(this).slice();Ve(b,0,this.a,this.A,a)}else b=this.o;return Ke(b,0,this.a,this.A)};l.Qa=function(){return this.a};function Ze(a){if(a.v!=a.j){var b=Sa(a.K());a.u=Se(Ye(a),0,a.a,a.A,b,0);a.v=a.j}return a.u}l.kg=function(){return new Qe(Ze(this))};l.de=function(a){if(0>a||this.a.length<=a)return null;var b=new Oe(null);Pe(b,this.W,this.o.slice(a?this.a[a-1]:0,this.a[a]));return b};
function $e(a){var b=a.W,c=a.o;a=a.a;var d=[],e=0,f;var g=0;for(f=a.length;g<f;++g){var h=a[g],k=new Oe(null);Pe(k,b,c.slice(e,h));d.push(k);e=h}return d}function Ye(a){if(a.X!=a.j){var b=a.o;Ue(b,a.a,a.A)?a.g=b:(a.g=b.slice(),a.g.length=Ve(a.g,0,a.a,a.A));a.X=a.j}return a.g}l.kb=function(a){var b=[],c=[];b.length=Ne(this.o,0,this.a,this.A,Math.sqrt(a),b,0,c);a=new z(null);Xe(a,"XY",b,c);return a};l.I=function(){return"Polygon"};
l.Y=function(a,b){a?(ze(this,b,a,2),this.o||(this.o=[]),a=Ie(this.o,0,a,this.A,this.a),this.o.length=a.length?a[a.length-1]:0,this.b()):Xe(this,"XY",null,this.a)};function Xe(a,b,c,d){ye(a,b,c);a.a=d;a.b()}function af(a){var b=a[0],c=a[1],d=a[2];a=a[3];b=[b,c,b,a,d,a,d,c,b,c];c=new z(null);Xe(c,"XY",b,[b.length]);return c};function bf(a){nc.call(this);a=Za({},a);this.l=[0,0];this.c=[];this.Ac=this.Ac.bind(this);this.u=zb(a.projection);var b={};b.center=void 0!==a.center?a.center:null;var c=void 0!==a.minZoom?a.minZoom:0;var d=void 0!==a.maxZoom?a.maxZoom:28;var e=void 0!==a.zoomFactor?a.zoomFactor:2;if(void 0!==a.resolutions){d=a.resolutions;var f=d[0];var g=d[d.length-1];d=be(d)}else{g=zb(a.projection);f=g.K();var h=(f?Math.max(Xa(f),f[3]-f[1]):360*db.degrees/g.j())/256/Math.pow(2,0),k=h/Math.pow(2,28);f=a.maxResolution;
void 0!==f?c=0:f=h/Math.pow(e,c);g=a.minResolution;void 0===g&&(g=void 0!==a.maxZoom?void 0!==a.maxResolution?f/Math.pow(e,d):h/Math.pow(e,d):k);d=c+Math.floor(Math.log(f/g)/Math.log(e));g=f/Math.pow(e,d-c);d=ce(e,f,d-c)}this.i=f;this.D=g;this.C=e;this.g=a.resolutions;this.s=c;(void 0!==a.enableRotation?a.enableRotation:1)?(e=a.constrainRotation,e=void 0===e||!0===e?ge():!1===e?ee:"number"===typeof e?fe(e):ee):e=de;this.a={center:void 0!==a.extent?Vb(a.extent):Wb,resolution:d,rotation:e};void 0!==
a.resolution?b.resolution=a.resolution:void 0!==a.zoom&&(b.resolution=this.constrainResolution(this.i,a.zoom-this.s));b.rotation=void 0!==a.rotation?a.rotation:0;this.qa(b)}t(bf,nc);l=bf.prototype;
l.animate=function(a){var b=Date.now(),c=this.ba().slice(),d=this.ua(),e=Sc(this),f=arguments.length;if(1<f&&"function"===typeof arguments[f-1]){var g=arguments[f-1];--f}for(var h=[],k=0;k<f;++k){var m=arguments[k],n={start:b,complete:!1,anchor:m.anchor,duration:void 0!==m.duration?m.duration:1E3,easing:m.easing||Oc};m.center&&(n.Lb=c,n.Ob=m.center,c=n.Ob);void 0!==m.zoom?(n.Mb=d,n.cb=this.constrainResolution(this.i,m.zoom-this.s,0),d=n.cb):m.resolution&&(n.Mb=d,n.cb=m.resolution,d=n.cb);void 0!==
m.rotation&&(n.yc=e,n.Pb=e+(za(m.rotation-e+Math.PI,2*Math.PI)-Math.PI),e=n.Pb);n.callback=g;n.Lb&&n.Ob&&!me(n.Lb,n.Ob)||n.Mb!==n.cb||n.yc!==n.Pb?b+=n.duration:n.complete=!0;h.push(n)}this.c.push(h);cf(this,0,1);this.Ac()};function Uc(a){cf(a,0,-Tc(a)[0]);for(var b=0,c=a.c.length;b<c;++b){var d=a.c[b];d[0].callback&&d[0].callback(!1)}a.c.length=0}
l.Ac=function(){void 0!==this.v&&(cancelAnimationFrame(this.v),this.v=void 0);if(0<Tc(this)[0]){for(var a=Date.now(),b=!1,c=this.c.length-1;0<=c;--c){for(var d=this.c[c],e=!0,f=0,g=d.length;f<g;++f){var h=d[f];if(!h.complete){b=a-h.start;b=0<h.duration?b/h.duration:1;1<=b?(h.complete=!0,b=1):e=!1;b=h.easing(b);if(h.Lb){var k=h.Lb[0],m=h.Lb[1];this.set("center",[k+b*(h.Ob[0]-k),m+b*(h.Ob[1]-m)])}h.Mb&&h.cb&&(k=1===b?h.cb:h.Mb+b*(h.cb-h.Mb),h.anchor&&this.set("center",df(this,k,h.anchor)),this.set("resolution",
k));void 0!==h.yc&&void 0!==h.Pb&&(b=1===b?za(h.Pb+Math.PI,2*Math.PI)-Math.PI:h.yc+b*(h.Pb-h.yc),h.anchor&&this.set("center",ef(this,b,h.anchor)),this.set("rotation",b));b=!0;if(!h.complete)break}}e&&(this.c[c]=null,cf(this,0,-1),(d=d[0].callback)&&d(!0))}this.c=this.c.filter(Boolean);b&&void 0===this.v&&(this.v=requestAnimationFrame(this.Ac))}};function ef(a,b,c){var d=a.ba();if(void 0!==d){var e=[d[0]-c[0],d[1]-c[1]];ne(e,b-Sc(a));ie(e,c)}return e}
function df(a,b,c){var d,e=a.ba();a=a.ua();void 0!==e&&void 0!==a&&(d=[c[0]-b*(c[0]-e[0])/a,c[1]-b*(c[1]-e[1])/a]);return d}function ff(a){var b=[100,100];a='.ol-viewport[data-view="'+v(a)+'"]';if(a=document.querySelector(a))a=getComputedStyle(a),b[0]=parseInt(a.width,10),b[1]=parseInt(a.height,10);return b}l.constrainResolution=function(a,b,c){return this.a.resolution(a,b||0,c||0)};l.constrainRotation=function(a,b){return this.a.rotation(a,b||0)};l.ba=function(){return this.get("center")};
function Tc(a,b){return void 0!==b?(b[0]=a.l[0],b[1]=a.l[1],b):a.l.slice()}l.Td=function(a){a=a||ff(this);var b=this.ba();w(b,1);var c=this.ua();w(void 0!==c,2);var d=Sc(this);w(void 0!==d,3);return Ta(b,c,d,a)};l.sh=function(){return this.u};l.ua=function(){return this.get("resolution")};l.th=function(){return this.g};function gf(a,b,c){a=c||ff(a);return Math.max(Xa(b)/a[0],(b[3]-b[1])/a[1])}function Sc(a){return a.get("rotation")}
function hf(a){var b=a.ba(),c=a.u,d=a.ua();a=Sc(a);return{center:b.slice(),projection:void 0!==c?c:null,resolution:d,rotation:a}}l.qg=function(){var a=this.ua();if(void 0!==a)a:{if(a>=this.D&&a<=this.i){var b=this.s||0;if(this.g){var c=ha(this.g,a,1);b+=c;if(c==this.g.length-1)break a;var d=this.g[c];c=d/this.g[c+1]}else d=this.i,c=this.C;d=b+Math.log(d/a)/Math.log(c)}b=d}return b};
l.bg=function(a,b){b=b||{};var c=b.size;c||(c=ff(this));if(a instanceof we)if("Circle"===a.I()){a=a.K();var d=af(a);d.rotate(Sc(this),Sa(a))}else d=a;else w(Array.isArray(a),24),w(!Ya(a),25),d=af(a);var e=b.padding?b.padding:[0,0,0,0],f=void 0!==b.constrainResolution?b.constrainResolution:!0,g=void 0!==b.nearest?b.nearest:!1,h;void 0!==b.minResolution?h=b.minResolution:void 0!==b.maxZoom?h=this.constrainResolution(this.i,b.maxZoom-this.s,0):h=0;var k=d.o,m=Sc(this);a=Math.cos(-m);m=Math.sin(-m);var n=
Infinity,p=Infinity,r=-Infinity,u=-Infinity;d=d.A;for(var D=0,F=k.length;D<F;D+=d){var C=k[D]*a-k[D+1]*m,A=k[D]*m+k[D+1]*a;n=Math.min(n,C);p=Math.min(p,A);r=Math.max(r,C);u=Math.max(u,A)}c=gf(this,[n,p,r,u],[c[0]-e[1]-e[3],c[1]-e[0]-e[2]]);c=isNaN(c)?h:Math.max(c,h);f&&(h=this.constrainResolution(c,0,0),!g&&h<c&&(h=this.constrainResolution(h,-1,0)),c=h);m=-m;h=(n+r)/2+(e[1]-e[3])/2*c;e=(p+u)/2+(e[0]-e[2])/2*c;a=[h*a-e*m,e*a+h*m];e=b.callback?b.callback:na;void 0!==b.duration?this.animate({resolution:c,
center:a,duration:b.duration,easing:b.easing},e):(Wc(this,c),this.Ja(a),setTimeout(e.bind(void 0,!0),0))};l.rotate=function(a,b){void 0!==b&&(b=ef(this,a,b),this.Ja(b));this.set("rotation",a);0<Tc(this)[0]&&Uc(this)};l.Ja=function(a){this.set("center",a);0<Tc(this)[0]&&Uc(this)};function cf(a,b,c){a.l[b]+=c;a.b()}function Wc(a,b){a.set("resolution",b);0<Tc(a)[0]&&Uc(a)}l.Ii=function(a){Wc(this,this.constrainResolution(this.i,a-this.s,0))};function jf(){this.b=[];this.f=this.j=0}function kf(a){a.b.length=0;a.j=0;a.f=0}function lf(a){if(6>a.b.length)return!1;var b=Date.now()-100,c=a.b.length-3;if(a.b[c+2]<b)return!1;for(var d=c-3;0<d&&a.b[d+2]>b;)d-=3;b=a.b[c+2]-a.b[d+2];if(b<1E3/60)return!1;var e=a.b[c]-a.b[d];c=a.b[c+1]-a.b[d+1];a.j=Math.atan2(c,e);a.f=Math.sqrt(e*e+c*c)/b;return.05<a.f};function mf(a){nc.call(this);this.D=null;this.Ya(!0);this.handleEvent=a.handleEvent}t(mf,nc);mf.prototype.Ya=function(a){this.set("active",a)};mf.prototype.setMap=function(a){this.D=a};function nf(a,b,c,d){if(void 0!==b){var e=Sc(a),f=a.ba();void 0!==e&&f&&0<d?a.animate({rotation:b,anchor:c,duration:d,easing:Nc}):a.rotate(b,c)}}
function of(a,b,c,d){var e=a.ua();b=a.constrainResolution(e,b,0);if(c&&void 0!==b&&b!==e){var f=a.ba();c=df(a,b,c);c=a.a.center(c);c=[(b*f[0]-e*c[0])/(b-e),(b*f[1]-e*c[1])/(b-e)]}pf(a,b,c,d)}function pf(a,b,c,d){if(b){var e=a.ua(),f=a.ba();void 0!==e&&f&&b!==e&&d?a.animate({resolution:b,anchor:c,duration:d,easing:Nc}):(c&&(c=df(a,b,c),a.Ja(c)),Wc(a,b))}};function qf(a){a=a?a:{};this.a=a.delta?a.delta:1;mf.call(this,{handleEvent:rf});this.c=void 0!==a.duration?a.duration:250}t(qf,mf);function rf(a){var b=!1,c=a.originalEvent;if("dblclick"==a.type){b=a.coordinate;c=c.shiftKey?-this.a:this.a;var d=a.map.Z();of(d,c,b,this.c);a.preventDefault();b=!0}return!b};function sf(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function tf(a){a=a.originalEvent;return!a.button&&!(id&&jd&&a.ctrlKey)}function uf(a){return"singleclick"==a.type}function vf(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function wf(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function xf(a){a=a.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}
function yf(a){w(a.b,56);return"mouse"==a.b.pointerType}function zf(a){a=a.b;return a.isPrimary&&0===a.button};function Af(a){a=a?a:{};mf.call(this,{handleEvent:a.handleEvent?a.handleEvent:Bf});this.Hc=a.handleDownEvent?a.handleDownEvent:te;this.Ic=a.handleDragEvent?a.handleDragEvent:na;this.Jc=a.handleMoveEvent?a.handleMoveEvent:na;this.Yf=a.handleUpEvent?a.handleUpEvent:te;this.v=!1;this.X={};this.i=[]}t(Af,mf);function Cf(a){for(var b=a.length,c=0,d=0,e=0;e<b;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}
function Bf(a){if(!(a instanceof sd))return!0;var b=!1,c=a.type;if("pointerdown"===c||"pointerdrag"===c||"pointerup"===c){c=a.b;var d=c.pointerId.toString();"pointerup"==a.type?delete this.X[d]:"pointerdown"==a.type?this.X[d]=c:d in this.X&&(this.X[d]=c);this.i=ab(this.X)}this.v?"pointerdrag"==a.type?this.Ic(a):"pointerup"==a.type&&(this.v=this.Yf(a)&&0<this.i.length):"pointerdown"==a.type?(this.v=a=this.Hc(a),b=this.bb(a)):"pointermove"==a.type&&this.Jc(a);return!b}Af.prototype.bb=function(a){return a};function Df(a){Af.call(this,{handleDownEvent:Ef,handleDragEvent:Ff,handleUpEvent:Gf});a=a?a:{};this.a=a.kinetic;this.c=null;this.s=a.condition?a.condition:vf;this.g=!1}t(Df,Af);function Ff(a){var b=this.i,c=Cf(b);if(b.length==this.l){if(this.a&&this.a.b.push(c[0],c[1],Date.now()),this.c){var d=this.c[0]-c[0],e=c[1]-this.c[1];a=a.map.Z();var f=hf(a);d=[d,e];oe(d,f.resolution);ne(d,f.rotation);ie(d,f.center);d=a.a.center(d);a.Ja(d)}}else this.a&&kf(this.a);this.c=c;this.l=b.length}
function Gf(a){var b=a.map;a=b.Z();if(this.i.length)return this.a&&kf(this.a),this.c=null,!0;if(!this.g&&this.a&&lf(this.a)){var c=(.05-this.a.f)/-.005;var d=this.a.j,e=a.ba();e=Hf(b,e);b=b.Ba([e[0]-c*Math.cos(d),e[1]-c*Math.sin(d)]);a.animate({center:a.a.center(b),duration:500,easing:Nc})}cf(a,1,-1);return!1}
function Ef(a){if(0<this.i.length&&this.s(a)){var b=a.map.Z();this.c=null;this.v||cf(b,1,1);Tc(b)[0]&&b.Ja(a.frameState.viewState.center);this.a&&kf(this.a);this.g=1<this.i.length;return!0}return!1}Df.prototype.bb=te;function If(a){a=a?a:{};Af.call(this,{handleDownEvent:Jf,handleDragEvent:Kf,handleUpEvent:Lf});this.c=a.condition?a.condition:sf;this.a=void 0;this.g=void 0!==a.duration?a.duration:250}t(If,Af);function Kf(a){if(yf(a)){var b=a.map,c=b.Z();if(c.a.rotation!==de){b=b.pb();a=a.pixel;a=Math.atan2(b[1]/2-a[1],a[0]-b[0]/2);if(void 0!==this.a){b=a-this.a;var d=Sc(c);nf(c,d-b)}this.a=a}}}
function Lf(a){if(!yf(a))return!0;a=a.map.Z();cf(a,1,-1);var b=Sc(a),c=this.g;b=a.constrainRotation(b,0);nf(a,b,void 0,c);return!1}function Jf(a){return yf(a)&&tf(a)&&this.c(a)?(cf(a.map.Z(),1,1),this.a=void 0,!0):!1}If.prototype.bb=te;function Mf(a){this.Va=null;this.f=document.createElement("div");this.f.style.position="absolute";this.f.className="ol-box "+a;this.j=this.a=this.b=null}t(Mf,gc);Mf.prototype.la=function(){this.setMap(null)};function Nf(a){var b=a.a,c=a.j;a=a.f.style;a.left=Math.min(b[0],c[0])+"px";a.top=Math.min(b[1],c[1])+"px";a.width=Math.abs(c[0]-b[0])+"px";a.height=Math.abs(c[1]-b[1])+"px"}
Mf.prototype.setMap=function(a){if(this.b){this.b.H.removeChild(this.f);var b=this.f.style;b.left=b.top=b.width=b.height="inherit"}(this.b=a)&&this.b.H.appendChild(this.f)};function Of(a){var b=a.a,c=a.j;b=[b,[b[0],c[1]],c,[c[0],b[1]]].map(a.b.Ba,a.b);b[4]=b[0].slice();a.Va?a.Va.Y([b]):a.Va=new z([b])}Mf.prototype.P=function(){return this.Va};function Pf(a){Af.call(this,{handleDownEvent:Qf,handleDragEvent:Rf,handleUpEvent:Sf});a=a?a:{};this.a=new Mf(a.className||"ol-dragbox");this.s=void 0!==a.minArea?a.minArea:64;this.c=null;this.u=a.condition?a.condition:se;this.l=a.boxEndCondition?a.boxEndCondition:Tf}t(Pf,Af);function Tf(a,b,c){a=c[0]-b[0];b=c[1]-b[1];return a*a+b*b>=this.s}function Rf(a){if(yf(a)){var b=this.a,c=a.pixel;b.a=this.c;b.j=c;Of(b);Nf(b);this.f(new Uf(Vf,a.coordinate,a))}}Pf.prototype.P=function(){return this.a.P()};
Pf.prototype.g=na;function Sf(a){if(!yf(a))return!0;this.a.setMap(null);this.l(a,this.c,a.pixel)&&(this.g(a),this.f(new Uf(Wf,a.coordinate,a)));return!1}function Qf(a){if(yf(a)&&tf(a)&&this.u(a)){this.c=a.pixel;this.a.setMap(a.map);var b=this.a,c=this.c;b.a=this.c;b.j=c;Of(b);Nf(b);this.f(new Uf(Xf,a.coordinate,a));return!0}return!1}var Xf="boxstart",Vf="boxdrag",Wf="boxend";function Uf(a,b,c){ic.call(this,a);this.coordinate=b;this.mapBrowserEvent=c}t(Uf,ic);function Yf(a){a=a?a:{};var b=a.condition?a.condition:wf;this.C=void 0!==a.duration?a.duration:200;this.H=void 0!==a.out?a.out:!1;Pf.call(this,{condition:b,className:a.className||"ol-dragzoom"})}t(Yf,Pf);
Yf.prototype.g=function(){var a=this.D,b=a.Z(),c=a.pb(),d=this.P().K();if(this.H){var e=b.Td(c);d=[Hf(a,[d[0],d[1]]),Hf(a,[d[2],d[3]])];a=Oa(void 0);var f;var g=0;for(f=d.length;g<f;++g)Ia(a,d[g]);a=1/gf(b,a,c);d=(e[2]-e[0])/2*(a-1);a=(e[3]-e[1])/2*(a-1);e[0]-=d;e[2]+=d;e[1]-=a;e[3]+=a;d=e}c=b.constrainResolution(gf(b,d,c));e=Sa(d);e=b.a.center(e);b.animate({resolution:c,center:e,duration:this.C,easing:Nc})};function Zf(a){mf.call(this,{handleEvent:$f});a=a||{};this.a=function(a){return vf(a)&&xf(a)};this.c=a.condition?a.condition:this.a;this.i=void 0!==a.duration?a.duration:100;this.g=void 0!==a.pixelDelta?a.pixelDelta:128}t(Zf,mf);
function $f(a){var b=!1;if("keydown"==a.type){var c=a.originalEvent.keyCode;if(this.c(a)&&(40==c||37==c||39==c||38==c)){b=a.map.Z();var d=b.ua()*this.g,e=0,f=0;40==c?f=-d:37==c?e=-d:39==c?e=d:f=d;d=[e,f];ne(d,Sc(b));c=this.i;if(e=b.ba())d=b.a.center([e[0]+d[0],e[1]+d[1]]),c?b.animate({duration:c,easing:Pc,center:d}):b.Ja(d);a.preventDefault();b=!0}}return!b};function ag(a){mf.call(this,{handleEvent:bg});a=a?a:{};this.c=a.condition?a.condition:xf;this.a=a.delta?a.delta:1;this.i=void 0!==a.duration?a.duration:100}t(ag,mf);function bg(a){var b=!1;if("keydown"==a.type||"keypress"==a.type){var c=a.originalEvent.charCode;!this.c(a)||43!=c&&45!=c||(b=43==c?this.a:-this.a,c=a.map.Z(),of(c,b,void 0,this.i),a.preventDefault(),b=!0)}return!b};function cg(a){mf.call(this,{handleEvent:dg});a=a||{};this.i=0;this.v=void 0!==a.duration?a.duration:250;this.J=void 0!==a.timeout?a.timeout:80;this.X=void 0!==a.useAnchor?a.useAnchor:!0;this.H=a.constrainResolution||!1;this.a=null;this.l=this.g=this.s=this.c=void 0}t(cg,mf);
function dg(a){var b=a.type;if("wheel"!==b&&"mousewheel"!==b)return!0;a.preventDefault();b=a.map;var c=a.originalEvent;this.X&&(this.a=a.coordinate);if("wheel"==a.type){var d=c.deltaY;gd&&c.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(d/=kd);c.deltaMode===WheelEvent.DOM_DELTA_LINE&&(d*=40)}else"mousewheel"==a.type&&(d=-c.wheelDeltaY,hd&&(d/=3));if(0===d)return!1;a=Date.now();void 0===this.c&&(this.c=a);if(!this.g||400<a-this.c)this.g=4>Math.abs(d)?eg:fg;if(this.g===eg){b=b.Z();this.l?clearTimeout(this.l):
cf(b,1,1);this.l=setTimeout(this.u.bind(this),400);c=b.ua()*Math.pow(2,d/300);var e=b.D,f=b.i,g=0;c<e?(c=Math.max(c,e/1.5),g=1):c>f&&(c=Math.min(c,1.5*f),g=-1);if(this.a){var h=df(b,c,this.a);b.Ja(b.a.center(h))}Wc(b,c);!g&&this.H&&b.animate({resolution:b.constrainResolution(c,0<d?-1:1),easing:Nc,anchor:this.a,duration:this.v});0<g?b.animate({resolution:e,easing:Nc,anchor:this.a,duration:500}):0>g&&b.animate({resolution:f,easing:Nc,anchor:this.a,duration:500});this.c=a;return!1}this.i+=d;d=Math.max(this.J-
(a-this.c),0);clearTimeout(this.s);this.s=setTimeout(this.C.bind(this,b),d);return!1}cg.prototype.u=function(){this.l=void 0;cf(this.D.Z(),1,-1)};cg.prototype.C=function(a){a=a.Z();0<Tc(a)[0]&&Uc(a);of(a,-ua(this.i,-1,1),this.a,this.v);this.g=void 0;this.i=0;this.a=null;this.s=this.c=void 0};var eg="trackpad",fg="wheel";function gg(a){Af.call(this,{handleDownEvent:hg,handleDragEvent:ig,handleUpEvent:jg});a=a||{};this.c=null;this.g=void 0;this.a=!1;this.l=0;this.u=void 0!==a.threshold?a.threshold:.3;this.s=void 0!==a.duration?a.duration:250}t(gg,Af);
function ig(a){var b=0,c=this.i[0],d=this.i[1];c=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);void 0!==this.g&&(b=c-this.g,this.l+=b,!this.a&&Math.abs(this.l)>this.u&&(this.a=!0));this.g=c;a=a.map;c=a.Z();if(c.a.rotation!==de){d=a.a.getBoundingClientRect();var e=Cf(this.i);e[0]-=d.left;e[1]-=d.top;this.c=a.Ba(e);this.a&&(d=Sc(c),a.render(),nf(c,d+b,this.c))}}
function jg(a){if(2>this.i.length){a=a.map.Z();cf(a,1,-1);if(this.a){var b=Sc(a),c=this.c,d=this.s;b=a.constrainRotation(b,0);nf(a,b,c,d)}return!1}return!0}function hg(a){return 2<=this.i.length?(a=a.map,this.c=null,this.g=void 0,this.a=!1,this.l=0,this.v||cf(a.Z(),1,1),!0):!1}gg.prototype.bb=te;function kg(a){Af.call(this,{handleDownEvent:lg,handleDragEvent:mg,handleUpEvent:ng});a=a?a:{};this.l=a.constrainResolution||!1;this.c=null;this.s=void 0!==a.duration?a.duration:400;this.a=void 0;this.g=1}t(kg,Af);
function mg(a){var b=1,c=this.i[0],d=this.i[1],e=c.clientX-d.clientX;c=c.clientY-d.clientY;e=Math.sqrt(e*e+c*c);void 0!==this.a&&(b=this.a/e);this.a=e;a=a.map;e=a.Z();d=e.ua();var f=e.i,g=e.D;c=d*b;c>f?(b=f/d,c=f):c<g&&(b=g/d,c=g);1!=b&&(this.g=b);b=a.a.getBoundingClientRect();d=Cf(this.i);d[0]-=b.left;d[1]-=b.top;this.c=a.Ba(d);a.render();pf(e,c,this.c)}
function ng(a){if(2>this.i.length){a=a.map.Z();cf(a,1,-1);var b=a.ua();if(this.l||b<a.D||b>a.i){var c=this.c,d=this.s;b=a.constrainResolution(b,0,this.g-1);pf(a,b,c,d)}return!1}return!0}function lg(a){return 2<=this.i.length?(a=a.map,this.c=null,this.a=void 0,this.g=1,this.v||cf(a.Z(),1,1),!0):!1}kg.prototype.bb=te;function og(a){nc.call(this);var b=Za({},a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.maxResolution?a.maxResolution:Infinity;b.minResolution=void 0!==a.minResolution?a.minResolution:0;this.qa(b);this.a={layer:this,fd:!0}}t(og,nc);
function pg(a){a.a.opacity=ua(a.get("opacity"),0,1);a.a.Li=a.bd();a.a.visible=a.l();a.a.extent=a.K();a.a.zIndex=a.pa();a.a.maxResolution=a.get("maxResolution");a.a.minResolution=Math.max(a.get("minResolution"),0);return a.a}og.prototype.K=function(){return this.get("extent")};og.prototype.l=function(){return this.get("visible")};og.prototype.pa=function(){return this.get("zIndex")};og.prototype.C=function(a){this.set("visible",a)};function qg(a){var b=a||{};a=Za({},b);delete a.layers;b=b.layers;og.call(this,a);this.i=[];this.c={};y(this,pc(rg),this.wg,this);b?Array.isArray(b)?b=new sc(b.slice(),{unique:!0}):w(b instanceof sc,43):b=new sc(void 0,{unique:!0});this.set(rg,b)}t(qg,og);l=qg.prototype;l.Nc=function(){};l.ec=function(){this.b()};
l.wg=function(){this.i.forEach(Zb);this.i.length=0;var a=this.get(rg);this.i.push(y(a,"add",this.vg,this),y(a,"remove",this.xg,this));for(var b in this.c)this.c[b].forEach(Zb);$a(this.c);a=a.a;var c;b=0;for(c=a.length;b<c;b++){var d=a[b];this.c[v(d).toString()]=[y(d,"propertychange",this.ec,this),y(d,"change",this.ec,this)]}this.b()};l.vg=function(a){a=a.element;var b=v(a).toString();this.c[b]=[y(a,"propertychange",this.ec,this),y(a,"change",this.ec,this)];this.b()};
l.xg=function(a){a=v(a.element).toString();this.c[a].forEach(Zb);delete this.c[a];this.b()};l.Yc=function(a){var b=void 0!==a?a:[],c=b.length;this.get(rg).forEach(function(a){a.Yc(b)});a=pg(this);var d;for(d=b.length;c<d;c++){var e=b[c];e.opacity*=a.opacity;e.visible=e.visible&&a.visible;e.maxResolution=Math.min(e.maxResolution,a.maxResolution);e.minResolution=Math.max(e.minResolution,a.minResolution);void 0!==a.extent&&(e.extent=void 0!==e.extent?Ua(e.extent,a.extent):a.extent)}return b};l.bd=function(){return"ready"};
var rg="layers";function sg(a){var b=Za({},a);delete b.source;og.call(this,b);this.g=this.i=this.c=null;a.map&&this.setMap(a.map);y(this,pc("source"),this.Jg,this);this.bf(a.source?a.source:null)}t(sg,og);l=sg.prototype;l.Yc=function(a){a=a?a:[];a.push(pg(this));return a};l.ca=function(){return this.get("source")||null};l.bd=function(){var a=this.ca();return a?a.ga:"undefined"};l.Ig=function(){this.b()};l.Jg=function(){this.g&&(Zb(this.g),this.g=null);var a=this.ca();a&&(this.g=y(a,"change",this.Ig,this));this.b()};
l.setMap=function(a){this.c&&(Zb(this.c),this.c=null);a||this.b();this.i&&(Zb(this.i),this.i=null);a&&(this.c=y(a,"precompose",function(a){var b=pg(this);b.fd=!1;b.zIndex=Infinity;a.frameState.layerStatesArray.push(b);a.frameState.layerStates[v(this)]=b},this),this.i=y(this,"change",a.render,a),this.b())};l.bf=function(a){this.set("source",a)};function tg(){this.b={};this.f=0}tg.prototype.clear=function(){this.b={};this.f=0};tg.prototype.get=function(a,b,c){a=b+":"+a+":"+(c?Dc(c):"null");return a in this.b?this.b[a]:null};tg.prototype.set=function(a,b,c,d){this.b[b+":"+a+":"+(c?Dc(c):"null")]=d;++this.f};var ug=new tg;function vg(){return[1,0,0,1,0,0]}function wg(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function xg(a,b){var c=b[0],d=b[1];b[0]=a[0]*c+a[2]*d+a[4];b[1]=a[1]*c+a[3]*d+a[5];return b}function yg(a,b,c,d,e,f,g,h){var k=Math.sin(f);f=Math.cos(f);a[0]=d*f;a[1]=e*k;a[2]=-d*k;a[3]=e*f;a[4]=g*d*f-h*d*k+b;a[5]=g*e*k+h*e*f+c;return a};function zg(a,b){this.i=b;this.f={};this.a={}}t(zg,gc);zg.prototype.la=function(){for(var a in this.f)hc(this.f[a])};function Ag(){if(32<ug.f){var a=0,b;for(b in ug.b){var c=ug.b[b];a++&3||lc(c)||(delete ug.b[b],--ug.f)}}}
function Bg(a,b,c,d,e,f){function g(a,b){var d=v(a).toString(),f=c.layerStates[v(b)].fd;if(!(d in c.skippedFeatureUids)||f)return e.call(null,a,f?b:null)}var h,k=c.viewState,m=k.resolution,n=k.projection;k=b;if(n.a){n=n.K();var p=Xa(n),r=b[0];if(r<n[0]||r>n[2])k=[r+p*Math.ceil((n[0]-r)/p),b[1]]}n=c.layerStatesArray;for(p=n.length-1;0<=p;--p){var u=n[p];r=u.layer;if(u.visible&&m>=u.minResolution&&m<u.maxResolution&&f.call(null,r)&&(u=Cg(a,r),r.ca()&&(h=u.l(r.ca().D?k:b,c,d,g,null)),h))return h}}
function Cg(a,b){var c=v(b).toString();if(c in a.f)return a.f[c];b=b.Nc(a);a.f[c]=b;a.a[c]=y(b,"change",a.B,a);return b}zg.prototype.B=function(){this.i.render()};zg.prototype.g=na;zg.prototype.s=function(a,b){for(var c in this.f)if(!(b&&c in b.layerStates)){a=c;var d=this.f[a];delete this.f[a];Zb(this.a[a]);delete this.a[a];hc(d)}};function la(a,b){return a.zIndex-b.zIndex};function Dg(a,b,c,d,e){ic.call(this,a);this.vectorContext=b;this.frameState=c;this.context=d;this.glContext=e}t(Dg,ic);var Eg=[0,0,0,1],Fg=[],Gg=[0,0,0,1];function Hg(a,b,c,d){b&&(a.translate(c,d),a.rotate(b),a.translate(-c,-d))};function Ig(){}l=Ig.prototype;l.Xd=function(){};l.Oc=function(){};l.Pc=function(){};l.Qc=function(){};l.Rc=function(){};l.Sc=function(){};l.Tc=function(){};l.Uc=function(){};l.Pa=function(){};l.Sa=function(){};l.wc=function(){};l.Ma=function(){};function Jg(a,b,c,d,e){this.j=a;this.i=b;this.c=c;this.D=d;this.Fa=e;this.N=this.b=this.f=this.za=this.H=this.wa=null;this.X=this.J=this.s=this.C=this.u=this.v=0;this.V=!1;this.a=this.$=0;this.Ka=!1;this.ea=0;this.da="";this.ka=this.ga=0;this.vb=!1;this.B=this.sa=0;this.fa=this.l=this.g=null;this.L=[];this.Da=vg()}t(Jg,Ig);
function Kg(a,b,c){if(a.N){b=ve(b,0,c,2,a.D,a.L);c=a.j;var d=a.Da,e=c.globalAlpha;1!=a.s&&(c.globalAlpha=e*a.s);var f=a.$;a.V&&(f+=a.Fa);var g;var h=0;for(g=b.length;h<g;h+=2){var k=b[h]-a.v,m=b[h+1]-a.u;a.Ka&&(k=Math.round(k),m=Math.round(m));if(f||1!=a.a){var n=k+a.v,p=m+a.u;yg(d,n,p,a.a,a.a,f,-n,-p);c.setTransform.apply(c,d)}c.drawImage(a.N,a.J,a.X,a.ea,a.C,k,m,a.ea,a.C)}(f||1!=a.a)&&c.setTransform(1,0,0,1,0,0);1!=a.s&&(c.globalAlpha=e)}}
function Lg(a,b,c,d){var e=0;if(a.fa&&""!==a.da){a.g&&Mg(a,a.g);a.l&&Ng(a,a.l);var f=a.fa,g=a.j,h=a.za;h?(h.font!=f.font&&(h.font=g.font=f.font),h.textAlign!=f.textAlign&&(h.textAlign=g.textAlign=f.textAlign),h.textBaseline!=f.textBaseline&&(h.textBaseline=g.textBaseline=f.textBaseline)):(g.font=f.font,g.textAlign=f.textAlign,g.textBaseline=f.textBaseline,a.za={font:f.font,textAlign:f.textAlign,textBaseline:f.textBaseline});b=ve(b,e,c,d,a.D,a.L);f=a.j;g=a.sa;for(a.vb&&(g+=a.Fa);e<c;e+=d){h=b[e]+a.ga;
var k=b[e+1]+a.ka;if(g||1!=a.B){var m=yg(a.Da,h,k,a.B,a.B,g,-h,-k);f.setTransform.apply(f,m)}a.l&&f.strokeText(a.da,h,k);a.g&&f.fillText(a.da,h,k)}(g||1!=a.B)&&f.setTransform(1,0,0,1,0,0)}}function Og(a,b,c,d,e,f){var g=a.j;a=ve(b,c,d,e,a.D,a.L);g.moveTo(a[0],a[1]);b=a.length;f&&(b-=2);for(c=2;c<b;c+=2)g.lineTo(a[c],a[c+1]);f&&g.closePath();return d}function Pg(a,b,c,d,e){var f;var g=0;for(f=d.length;g<f;++g)c=Og(a,b,c,d[g],e,!0);return c}l=Jg.prototype;
l.Oc=function(a){if(Va(this.c,a.K())){if(this.f||this.b){this.f&&Mg(this,this.f);this.b&&Ng(this,this.b);var b=(b=a.o)?ve(b,0,b.length,a.A,this.D,this.L):null;var c=b[2]-b[0],d=b[3]-b[1];c=Math.sqrt(c*c+d*d);d=this.j;d.beginPath();d.arc(b[0],b[1],c,0,2*Math.PI);this.f&&d.fill();this.b&&d.stroke()}""!==this.da&&Lg(this,a.ba(),2,2)}};l.Tc=function(a){var b=a.o;a=a.A;this.N&&Kg(this,b,b.length);""!==this.da&&Lg(this,b,b.length,a)};
l.Rc=function(a){var b=a.o;a=a.A;this.N&&Kg(this,b,b.length);""!==this.da&&Lg(this,b,b.length,a)};l.Pc=function(a){if(Va(this.c,a.K())){if(this.b){Ng(this,this.b);var b=this.j,c=a.o;b.beginPath();Og(this,c,0,c.length,a.A,!1);b.stroke()}""!==this.da&&(a=Qg(a),Lg(this,a,2,2))}};
l.Qc=function(a){var b=a.K();if(Va(this.c,b)){if(this.b){Ng(this,this.b);b=this.j;var c=a.o,d=0,e=a.Qa(),f=a.A;b.beginPath();var g;var h=0;for(g=e.length;h<g;++h)d=Og(this,c,d,e[h],f,!1);b.stroke()}""!==this.da&&(a=Rg(a),Lg(this,a,a.length,2))}};l.Uc=function(a){if(Va(this.c,a.K())){if(this.b||this.f){this.f&&Mg(this,this.f);this.b&&Ng(this,this.b);var b=this.j;b.beginPath();Pg(this,Ye(a),0,a.Qa(),a.A);this.f&&b.fill();this.b&&b.stroke()}""!==this.da&&(a=Ze(a),Lg(this,a,2,2))}};
l.Sc=function(a){if(Va(this.c,a.K())){if(this.b||this.f){this.f&&Mg(this,this.f);this.b&&Ng(this,this.b);var b=this.j,c=Sg(a),d=0,e=a.a,f=a.A,g;b.beginPath();var h=0;for(g=e.length;h<g;++h)d=Pg(this,c,d,e[h],f);this.f&&b.fill();this.b&&b.stroke()}""!==this.da&&(a=Tg(a),Lg(this,a,a.length,2))}};function Mg(a,b){var c=a.j,d=a.wa;d?d.fillStyle!=b.fillStyle&&(d.fillStyle=c.fillStyle=b.fillStyle):(c.fillStyle=b.fillStyle,a.wa={fillStyle:b.fillStyle})}
function Ng(a,b){var c=a.j,d=a.H;d?(d.lineCap!=b.lineCap&&(d.lineCap=c.lineCap=b.lineCap),ld&&(ja(d.lineDash,b.lineDash)||c.setLineDash(d.lineDash=b.lineDash),d.lineDashOffset!=b.lineDashOffset&&(d.lineDashOffset=c.lineDashOffset=b.lineDashOffset)),d.lineJoin!=b.lineJoin&&(d.lineJoin=c.lineJoin=b.lineJoin),d.lineWidth!=b.lineWidth&&(d.lineWidth=c.lineWidth=b.lineWidth),d.miterLimit!=b.miterLimit&&(d.miterLimit=c.miterLimit=b.miterLimit),d.strokeStyle!=b.strokeStyle&&(d.strokeStyle=c.strokeStyle=b.strokeStyle)):
(c.lineCap=b.lineCap,ld&&(c.setLineDash(b.lineDash),c.lineDashOffset=b.lineDashOffset),c.lineJoin=b.lineJoin,c.lineWidth=b.lineWidth,c.miterLimit=b.miterLimit,c.strokeStyle=b.strokeStyle,a.H={lineCap:b.lineCap,lineDash:b.lineDash,lineDashOffset:b.lineDashOffset,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle})}
l.Sa=function(a,b){a?(a=a.b,this.f={fillStyle:Gc(a?a:Eg)}):this.f=null;if(b){a=b.b;var c=b.c,d=b.f,e=b.i,f=b.g,g=b.a;b=b.B;this.b={lineCap:void 0!==c?c:"round",lineDash:d?d:Fg,lineDashOffset:e?e:0,lineJoin:void 0!==f?f:"round",lineWidth:this.i*(void 0!==g?g:1),miterLimit:void 0!==b?b:10,strokeStyle:Gc(a?a:Gg)}}else this.b=null};
l.wc=function(a){if(a){var b=a.$b(),c=a.ha(1),d=a.oc(),e=a.qb();this.v=b[0];this.u=b[1];this.C=e[1];this.N=c;this.s=a.c;this.J=d[0];this.X=d[1];this.V=a.v;this.$=a.l;this.a=a.a*this.i;this.Ka=a.s;this.ea=e[0]}else this.N=null};
l.Ma=function(a){if(a){var b=a.ra();b?(b=b.b,this.g={fillStyle:Gc(b?b:Eg)}):this.g=null;var c=a.na();if(c){b=c.b;var d=c.c,e=c.f,f=c.i,g=c.g,h=c.a;c=c.B;this.l={lineCap:void 0!==d?d:"round",lineDash:e?e:Fg,lineDashOffset:f?f:0,lineJoin:void 0!==g?g:"round",lineWidth:void 0!==h?h:1,miterLimit:void 0!==c?c:10,strokeStyle:Gc(b?b:Gg)}}else this.l=null;b=a.f;d=a.j;e=a.a;f=a.c;g=a.i;h=a.b;c=a.oa();var k=a.g;a=a.B;this.fa={font:void 0!==b?b:"10px sans-serif",textAlign:void 0!==k?k:"center",textBaseline:void 0!==
a?a:"middle"};this.da=void 0!==c?c:"";this.ga=void 0!==d?this.i*d:0;this.ka=void 0!==e?this.i*e:0;this.vb=void 0!==f?f:!1;this.sa=void 0!==g?g:0;this.B=this.i*(void 0!==h?h:1)}else this.da=""};function Ug(a,b){zg.call(this,0,b);this.c=Hc();this.b=this.c.canvas;this.b.style.width="100%";this.b.style.height="100%";this.b.style.display="block";this.b.className="ol-unselectable";a.insertBefore(this.b,a.childNodes[0]||null);this.j=!0;this.l=vg()}t(Ug,zg);
function Vg(a,b,c){var d=a.i,e=a.c;if(lc(d,b)){var f=c.extent,g=c.pixelRatio,h=c.viewState.rotation,k=c.viewState,m=c.pixelRatio/k.resolution;a=yg(a.l,a.b.width/2,a.b.height/2,m,-m,-k.rotation,-k.center[0],-k.center[1]);d.f(new Dg(b,new Jg(e,g,f,a,h),c,e,null))}}Ug.prototype.I=function(){return"canvas"};
Ug.prototype.g=function(a){if(a){var b=this.c,c=a.pixelRatio,d=Math.round(a.size[0]*c),e=Math.round(a.size[1]*c);this.b.width!=d||this.b.height!=e?(this.b.width=d,this.b.height=e):b.clearRect(0,0,d,e);c=a.viewState.rotation;var f=a.viewState,g=a.coordinateToPixelTransform,h=a.pixelToCoordinateTransform;yg(g,a.size[0]/2,a.size[1]/2,1/f.resolution,-1/f.resolution,-f.rotation,-f.center[0],-f.center[1]);f=wg(h,g);g=f[0]*f[3]-f[1]*f[2];w(!!g,32);h=f[0];var k=f[1],m=f[2],n=f[3],p=f[4],r=f[5];f[0]=n/g;f[1]=
-k/g;f[2]=-m/g;f[3]=h/g;f[4]=(m*r-n*p)/g;f[5]=-(h*r-k*p)/g;Vg(this,"precompose",a);f=a.layerStatesArray;ka(f);c&&(b.save(),Hg(b,c,d/2,e/2));d=a.viewState.resolution;e=0;for(g=f.length;e<g;++e)h=f[e],k=h.layer,k=Cg(this,k),h.visible&&d>=h.minResolution&&d<h.maxResolution&&"ready"==h.Li&&k.H(a,h)&&k.D(a,h,b);c&&b.restore();Vg(this,"postcompose",a);this.j||(this.b.style.display="",this.j=!0);for(var u in this.f)if(!(u in a.layerStates)){a.postRenderFunctions.push(this.s.bind(this));break}a.postRenderFunctions.push(Ag)}else this.j&&
(this.b.style.display="none",this.j=!1)};var Wg="Polygon Circle LineString Image Text Default".split(" ");function Xg(){};function Yg(a){a=a||{};this.b=void 0!==a.color?a.color:null;this.c=a.lineCap;this.f=void 0!==a.lineDash?a.lineDash:null;this.i=a.lineDashOffset;this.g=a.lineJoin;this.B=a.miterLimit;this.a=a.width;this.j=void 0}Yg.prototype.clone=function(){var a=this.b;return new Yg({color:a&&a.slice?a.slice():a||void 0,lineCap:this.c,lineDash:this.f?this.f.slice():void 0,lineDashOffset:this.i,lineJoin:this.g,miterLimit:this.B,width:this.a})};Yg.prototype.setLineDash=function(a){this.f=a;this.j=void 0};var Zg={Jb:function(){}};
(function(a){function b(a,e,f,g,h){f=f||0;g=g||a.length-1;for(h=h||d;g>f;){if(600<g-f){var k=g-f+1,n=e-f+1,m=Math.log(k),p=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*p*(k-p)/k)*(0>n-k/2?-1:1);b(a,e,Math.max(f,Math.floor(e-n*p/k+m)),Math.min(g,Math.floor(e+(k-n)*p/k+m)),h)}k=a[e];n=f;p=g;c(a,f,e);for(0<h(a[g],k)&&c(a,f,g);n<p;){c(a,n,p);n++;for(p--;0>h(a[n],k);)n++;for(;0<h(a[p],k);)p--}0===h(a[f],k)?c(a,f,p):(p++,c(a,p,g));p<=e&&(f=p+1);e<=p&&(g=p-1)}}function c(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function d(a,
b){return a<b?-1:a>b?1:0}function e(a,b){if(!(this instanceof e))return new e(a,b);this.Gc=Math.max(4,a||9);this.Md=Math.max(2,Math.ceil(.4*this.Gc));b&&this.Of(b);this.clear()}function f(a,b){g(a,0,a.children.length,b,a)}function g(a,b,c,d,e){e||(e=D(null));e.O=Infinity;e.S=Infinity;e.R=-Infinity;e.U=-Infinity;for(var f;b<c;b++)f=a.children[b],h(e,a.ta?d(f):f);return e}function h(a,b){a.O=Math.min(a.O,b.O);a.S=Math.min(a.S,b.S);a.R=Math.max(a.R,b.R);a.U=Math.max(a.U,b.U)}function k(a,b){return a.O-
b.O}function m(a,b){return a.S-b.S}function n(a){return(a.R-a.O)*(a.U-a.S)}function p(a){return a.R-a.O+(a.U-a.S)}function r(a,b){return a.O<=b.O&&a.S<=b.S&&b.R<=a.R&&b.U<=a.U}function u(a,b){return b.O<=a.R&&b.S<=a.U&&b.R>=a.O&&b.U>=a.S}function D(a){return{children:a,height:1,ta:!0,O:Infinity,S:Infinity,R:-Infinity,U:-Infinity}}function F(a,b,c,d,e){for(var f=[b,c],g;f.length;)c=f.pop(),b=f.pop(),c-b<=d||(g=b+Math.ceil((c-b)/d/2)*d,C(a,g,b,c,e),f.push(b,g,g,c))}var C=b;e.prototype={all:function(){return this.Hd(this.data,
[])},search:function(a){var b=this.data,c=[],d=this.ya;if(!u(a,b))return c;for(var e=[],f,g,h,k;b;){f=0;for(g=b.children.length;f<g;f++)h=b.children[f],k=b.ta?d(h):h,u(a,k)&&(b.ta?c.push(h):r(a,k)?this.Hd(h,c):e.push(h));b=e.pop()}return c},load:function(a){if(!a||!a.length)return this;if(a.length<this.Md){for(var b=0,c=a.length;b<c;b++)this.aa(a[b]);return this}a=this.Jd(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.Pd(this.data,a):(this.data.height<a.height&&
(b=this.data,this.data=a,a=b),this.Ld(a,this.data.height-a.height-1,!0)):this.data=a;return this},aa:function(a){a&&this.Ld(a,this.data.height-1);return this},clear:function(){this.data=D([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,d=this.ya(a),e=[],f=[],g,h,k,n;c||e.length;){c||(c=e.pop(),h=e[e.length-1],g=f.pop(),n=!0);if(c.ta){a:{k=a;var m=c.children,p=b;if(p){for(var u=0;u<m.length;u++)if(p(k,m[u])){k=u;break a}k=-1}else k=m.indexOf(k)}if(-1!==k){c.children.splice(k,
1);e.push(c);this.Mf(e);break}}n||c.ta||!r(c,d)?h?(g++,c=h.children[g],n=!1):c=null:(e.push(c),f.push(g),g=0,h=c,c=c.children[0])}return this},ya:function(a){return a},Lc:k,Mc:m,toJSON:function(){return this.data},Hd:function(a,b){for(var c=[];a;)a.ta?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},Jd:function(a,b,c,d){var e=c-b+1,g=this.Gc;if(e<=g){var h=D(a.slice(b,c+1));f(h,this.ya);return h}d||(d=Math.ceil(Math.log(e)/Math.log(g)),g=Math.ceil(e/Math.pow(g,d-1)));h=D([]);
h.ta=!1;h.height=d;e=Math.ceil(e/g);g=e*Math.ceil(Math.sqrt(g));var k;for(F(a,b,c,g,this.Lc);b<=c;b+=g){var n=Math.min(b+g-1,c);F(a,b,n,e,this.Mc);for(k=b;k<=n;k+=e){var m=Math.min(k+e-1,n);h.children.push(this.Jd(a,k,m,d-1))}}f(h,this.ya);return h},Lf:function(a,b,c,d){for(var e,f,g,h,k,m,p,r;;){d.push(b);if(b.ta||d.length-1===c)break;p=r=Infinity;e=0;for(f=b.children.length;e<f;e++)g=b.children[e],k=n(g),m=(Math.max(g.R,a.R)-Math.min(g.O,a.O))*(Math.max(g.U,a.U)-Math.min(g.S,a.S))-k,m<r?(r=m,p=
k<p?k:p,h=g):m===r&&k<p&&(p=k,h=g);b=h||b.children[0]}return b},Ld:function(a,b,c){var d=this.ya;c=c?a:d(a);d=[];var e=this.Lf(c,this.data,b,d);e.children.push(a);for(h(e,c);0<=b;)if(d[b].children.length>this.Gc)this.Sf(d,b),b--;else break;this.If(c,d,b)},Sf:function(a,b){var c=a[b],d=c.children.length,e=this.Md;this.Jf(c,e,d);d=this.Kf(c,e,d);d=D(c.children.splice(d,c.children.length-d));d.height=c.height;d.ta=c.ta;f(c,this.ya);f(d,this.ya);b?a[b-1].children.push(d):this.Pd(c,d)},Pd:function(a,b){this.data=
D([a,b]);this.data.height=a.height+1;this.data.ta=!1;f(this.data,this.ya)},Kf:function(a,b,c){var d,e;var f=e=Infinity;for(d=b;d<=c-b;d++){var h=g(a,0,d,this.ya);var k=g(a,d,c,this.ya);var m=Math.max(0,Math.min(h.R,k.R)-Math.max(h.O,k.O))*Math.max(0,Math.min(h.U,k.U)-Math.max(h.S,k.S));h=n(h)+n(k);if(m<f){f=m;var p=d;e=h<e?h:e}else m===f&&h<e&&(e=h,p=d)}return p},Jf:function(a,b,c){var d=a.ta?this.Lc:k,e=a.ta?this.Mc:m,f=this.Id(a,b,c,d);b=this.Id(a,b,c,e);f<b&&a.children.sort(d)},Id:function(a,b,
c,d){a.children.sort(d);d=this.ya;var e=g(a,0,b,d),f=g(a,c-b,c,d),k=p(e)+p(f),n;for(n=b;n<c-b;n++){var m=a.children[n];h(e,a.ta?d(m):m);k+=p(e)}for(n=c-b-1;n>=b;n--)m=a.children[n],h(f,a.ta?d(m):m),k+=p(f);return k},If:function(a,b,c){for(;0<=c;c--)h(b[c],a)},Mf:function(a){for(var b=a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():f(a[b],this.ya)},Of:function(a){var b=["return a"," - b",";"];this.Lc=new Function("a","b",b.join(a[0]));
this.Mc=new Function("a","b",b.join(a[1]));this.ya=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};a["default"]=e})(Zg.Jb=Zg.Jb||{});Zg.Jb=Zg.Jb.default;function $g(a){this.f=Zg.Jb(a);this.b={}}l=$g.prototype;l.aa=function(a,b){a={O:a[0],S:a[1],R:a[2],U:a[3],value:b};this.f.aa(a);this.b[v(b)]=a};l.load=function(a,b){for(var c=Array(b.length),d=0,e=b.length;d<e;d++){var f=a[d],g=b[d];f={O:f[0],S:f[1],R:f[2],U:f[3],value:g};c[d]=f;this.b[v(g)]=f}this.f.load(c)};l.remove=function(a){a=v(a);var b=this.b[a];delete this.b[a];return null!==this.f.remove(b)};function ah(a,b,c){var d=a.b[v(c)];Qa([d.O,d.S,d.R,d.U],b)||(a.remove(c),a.aa(b,c))}
function bh(a){return a.f.all().map(function(a){return a.value})}function ch(a,b){return a.f.search({O:b[0],S:b[1],R:b[2],U:b[3]}).map(function(a){return a.value})}l.forEach=function(a,b){return dh(bh(this),a,b)};function eh(a,b,c,d){return dh(ch(a,b),c,d)}function dh(a,b,c){for(var d,e=0,f=a.length;e<f&&!(d=b.call(c,a[e]));e++);return d}l.clear=function(){this.f.clear();this.b={}};l.K=function(a){var b=this.f.data;return Na(b.O,b.S,b.R,b.U,a)};
l.concat=function(a){this.f.load(a.f.all());for(var b in a.b)this.b[b|0]=a.b[b|0]};function fh(){this.a=0;this.j={};this.f=this.b=null}l=fh.prototype;l.clear=function(){this.a=0;this.j={};this.f=this.b=null};l.forEach=function(a,b){for(var c=this.b;c;)a.call(b,c.tb,c.mb,this),c=c.Ea};l.get=function(a){a=this.j[a];w(!!a,15);if(a===this.f)return a.tb;a===this.b?(this.b=this.b.Ea,this.b.rb=null):(a.Ea.rb=a.rb,a.rb.Ea=a.Ea);a.Ea=null;a.rb=this.f;this.f=this.f.Ea=a;return a.tb};
l.pop=function(){var a=this.b;delete this.j[a.mb];a.Ea&&(a.Ea.rb=null);this.b=a.Ea;this.b||(this.f=null);--this.a;return a.tb};l.replace=function(a,b){this.get(a);this.j[a].tb=b};l.set=function(a,b){w(!(a in this.j),16);b={mb:a,Ea:null,rb:this.f,tb:b};this.f?this.f.Ea=b:this.b=b;this.f=b;this.j[a]=b;++this.a};var gh=["canvas","webgl"];
function B(a){nc.call(this);var b=hh(a);this.Dc=void 0!==a.loadTilesWhileAnimating?a.loadTilesWhileAnimating:!1;this.Bc=void 0!==a.loadTilesWhileInteracting?a.loadTilesWhileInteracting:!1;this.Ic=void 0!==a.pixelRatio?a.pixelRatio:kd;this.Hc=b.logos;this.eb=function(){this.D=void 0;this.Fi.call(this,Date.now())}.bind(this);this.fb=vg();this.Jc=vg();this.gb=0;this.J=this.X=this.V=this.g=this.c=null;this.a=document.createElement("DIV");this.a.className="ol-viewport"+(od?" ol-touch":"");this.a.style.position=
"relative";this.a.style.overflow="hidden";this.a.style.width="100%";this.a.style.height="100%";this.a.style.msTouchAction="none";this.a.style.touchAction="none";this.H=document.createElement("DIV");this.H.className="ol-overlaycontainer";this.a.appendChild(this.H);this.C=document.createElement("DIV");this.C.className="ol-overlaycontainer-stopevent";for(var c="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" "),d=0,e=c.length;d<e;++d)y(this.C,c[d],jc);this.a.appendChild(this.C);
this.sa=new Ud(this,a.moveTolerance);for(var f in rd)y(this.sa,rd[f],this.fe,this);this.ka=b.keyboardEventTarget;this.u=null;y(this.a,"wheel",this.lb,this);y(this.a,"mousewheel",this.lb,this);this.v=b.controls;this.l=b.interactions;this.s=b.overlays;this.Me={};this.$a=new b.Gi(this.a,this);this.$=null;this.Da=[];this.Fa=new ae(this.pg.bind(this),this.Mg.bind(this));this.ga={};y(this,pc("layergroup"),this.ug,this);y(this,pc("view"),this.Og,this);y(this,pc("size"),this.Gg,this);y(this,pc("target"),
this.Lg,this);this.qa(b.values);this.v.forEach(function(a){a.setMap(this)},this);y(this.v,"add",function(a){a.element.setMap(this)},this);y(this.v,"remove",function(a){a.element.setMap(null)},this);this.l.forEach(function(a){a.setMap(this)},this);y(this.l,"add",function(a){a.element.setMap(this)},this);y(this.l,"remove",function(a){a.element.setMap(null)},this);this.s.forEach(this.Qd,this);y(this.s,"add",function(a){this.Qd(a.element)},this);y(this.s,"remove",function(a){var b=a.element.l;void 0!==
b&&delete this.Me[b.toString()];a.element.setMap(null)},this)}t(B,nc);l=B.prototype;l.Tf=function(a){this.v.push(a)};l.Uf=function(a){this.l.push(a)};l.Vf=function(a){ih(this).get(rg).push(a)};l.Wf=function(a){this.s.push(a)};l.Qd=function(a){var b=a.l;void 0!==b&&(this.Me[b.toString()]=a);a.setMap(this)};
l.la=function(){hc(this.sa);hc(this.$a);dc(this.a,"wheel",this.lb,this);dc(this.a,"mousewheel",this.lb,this);this.i&&(window.removeEventListener("resize",this.i,!1),this.i=void 0);this.D&&(cancelAnimationFrame(this.D),this.D=void 0);this.set("target",null);nc.prototype.la.call(this)};l.Wc=function(a,b,c){if(this.c)return a=this.Ba(a),c=c?c:{},Bg(this.$a,a,this.c,void 0!==c.hitTolerance?c.hitTolerance*this.c.pixelRatio:0,b,c.layerFilter?c.layerFilter:se)};
l.qh=function(a,b,c,d,e){if(this.c){a:{var f=this.$a,g=this.c;c=void 0!==c?c:null;d=d?d:se;e=void 0!==e?e:null;var h=g.viewState.resolution,k=g.layerStatesArray,m=k.length;a=xg(g.pixelToCoordinateTransform,a.slice());for(--m;0<=m;--m){var n=k[m];var p=n.layer;if(n.visible&&h>=n.minResolution&&h<n.maxResolution&&d.call(e,p)&&(n=Cg(f,p).L(a,g,b,c))){b=n;break a}}b=void 0}return b}};
function bd(a,b){a=a.a.getBoundingClientRect();b=b.changedTouches?b.changedTouches[0]:b;return[b.clientX-a.left,b.clientY-a.top]}l.cd=function(){return this.get("target")};function jh(a){a=a.cd();return void 0!==a?"string"===typeof a?document.getElementById(a):a:null}l.Ba=function(a){var b=this.c;return b?xg(b.pixelToCoordinateTransform,a.slice()):null};l.ng=function(){return this.s};function ih(a){return a.get("layergroup")}l.rh=function(){return ih(this).get(rg)};
function Hf(a,b){return(a=a.c)?xg(a.coordinateToPixelTransform,b.slice(0,2)):null}l.$c=function(){return this.$a};l.pb=function(){return this.get("size")};l.Z=function(){return this.get("view")};l.pg=function(a,b,c,d){var e=this.c;if(!(e&&b in e.wantedTiles&&e.wantedTiles[b][a.Xa()]))return Infinity;a=c[0]-e.focus[0];c=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(a*a+c*c)/d};l.lb=function(a,b){a=new ed(b||a.type,this,a);this.fe(a)};
l.fe=function(a){if(this.c){this.$=a.coordinate;a.frameState=this.c;var b=this.l.a,c;if(!1!==this.f(a))for(c=b.length-1;0<=c;c--){var d=b[c];if(d.get("active")&&!d.handleEvent(a))break}}};
l.Fg=function(){var a=this.c,b=this.Fa;if(b.b.length){var c=16,d=c;if(a){var e=a.viewHints;e[0]&&(c=this.Dc?8:0,d=2);e[1]&&(c=this.Bc?8:0,d=2)}if(b.i<c){e=b.l;var f=b.b,g=b.f,h=0,k=f.length,m;for(m=0;m<k;++m){var n=f[m];var p=e(n);Infinity==p?delete b.j[b.a(n)]:(g[h]=p,f[h++]=n)}f.length=h;g.length=h;for(e=(b.b.length>>1)-1;0<=e;e--)$d(b,e);e=0;for(f=!1;b.i<c&&e<d&&0<b.b.length;)g=b,k=g.b,n=g.f,h=k[0],1==k.length?(k.length=0,n.length=0):(k[0]=k.pop(),n[0]=n.pop(),$d(g,0)),k=g.a(h),delete g.j[k],h=
h[0],k=h.Xa(),g=h.state,5===g?f=!0:0!==g||k in b.c||(b.c[k]=!0,++b.i,++e,h.load());!e&&f&&b.s()}}b=this.Da;d=0;for(c=b.length;d<c;++d)b[d](this,a);b.length=0};l.Gg=function(){this.render()};
l.Lg=function(){var a;this.cd()&&(a=jh(this));if(this.u){for(var b=0,c=this.u.length;b<c;++b)Zb(this.u[b]);this.u=null}a?(a.appendChild(this.a),a=this.ka?this.ka:a,this.u=[y(a,"keydown",this.lb,this),y(a,"keypress",this.lb,this)],this.i||(this.i=this.lf.bind(this),window.addEventListener("resize",this.i,!1))):(Ic(this.a),this.i&&(window.removeEventListener("resize",this.i,!1),this.i=void 0));this.lf()};l.Mg=function(){this.render()};l.he=function(){this.render()};
l.Og=function(){this.V&&(Zb(this.V),this.V=null);this.X&&(Zb(this.X),this.X=null);var a=this.Z();a&&(this.a.setAttribute("data-view",v(a)),this.V=y(a,"propertychange",this.he,this),this.X=y(a,"change",this.he,this));this.render()};l.ug=function(){this.J&&(this.J.forEach(Zb),this.J=null);var a=ih(this);a&&(this.J=[y(a,"propertychange",this.render,this),y(a,"change",this.render,this)]);this.render()};l.render=function(){void 0===this.D&&(this.D=requestAnimationFrame(this.eb))};l.Ci=function(a){return this.v.remove(a)};
l.Di=function(a){return this.l.remove(a)};l.Ei=function(a){return this.s.remove(a)};
l.Fi=function(a){var b,c=this.pb(),d=this.Z(),e=Ha(),f=this.c,g=null,h;if(h=void 0!==c&&0<c[0]&&0<c[1]&&d)h=!!d.ba()&&void 0!==d.ua();if(h){g=Tc(d,this.c?this.c.viewHints:void 0);h=ih(this).Yc();var k={};var m=0;for(b=h.length;m<b;++m)k[v(h[m].layer)]=h[m];m=hf(d);g={animate:!1,attributions:{},coordinateToPixelTransform:this.fb,extent:e,focus:this.$?this.$:m.center,index:this.gb++,layerStates:k,layerStatesArray:h,logos:Za({},this.Hc),pixelRatio:this.Ic,pixelToCoordinateTransform:this.Jc,postRenderFunctions:[],
size:c,skippedFeatureUids:this.ga,tileQueue:this.Fa,time:a,usedTiles:{},viewState:m,viewHints:g,wantedTiles:{}}}g&&(g.extent=Ta(m.center,m.resolution,m.rotation,g.size,e));this.c=g;this.$a.g(g);g&&(g.animate&&this.render(),Array.prototype.push.apply(this.Da,g.postRenderFunctions),!f||this.g&&(Ya(this.g)||Qa(g.extent,this.g))||(this.f(new dd("movestart",this,f)),this.g=Oa(this.g)),!this.g||g.viewHints[0]||g.viewHints[1]||Qa(g.extent,this.g)||(this.f(new dd("moveend",this,g)),Ka(g.extent,this.g)));
this.f(new dd("postrender",this,g));setTimeout(this.Fg.bind(this),0)};l.ef=function(a){a=v(a).toString();this.ga[a]=!0;this.render()};l.lf=function(){var a=jh(this);if(a){var b=getComputedStyle(a);this.set("size",[a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)])}else this.set("size",void 0)};
l.jf=function(a){a=v(a).toString();delete this.ga[a];this.render()};
function hh(a){var b=null;void 0!==a.keyboardEventTarget&&(b="string"===typeof a.keyboardEventTarget?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);var c={},d={};if(void 0===a.logo||"boolean"===typeof a.logo&&a.logo)d["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="https://openlayers.org/";
else{var e=a.logo;"string"===typeof e?d[e]="":e instanceof HTMLElement?d[v(e).toString()]=e:e&&(w("string"==typeof e.href,44),w("string"==typeof e.src,45),d[e.src]=e.href)}e=a.layers instanceof qg?a.layers:new qg({layers:a.layers});c.layergroup=e;c.target=a.target;c.view=void 0!==a.view?a.view:new bf;e=zg;var f;void 0!==a.renderer?(Array.isArray(a.renderer)?f=a.renderer:"string"===typeof a.renderer?f=[a.renderer]:w(!1,46),0<=f.indexOf("dom")&&(f=f.concat(gh))):f=gh;var g;var h=0;for(g=f.length;h<
g;++h)if("canvas"==f[h]&&md){e=Ug;break}void 0!==a.controls?Array.isArray(a.controls)?f=new sc(a.controls.slice()):(w(a.controls instanceof sc,47),f=a.controls):f=Xc();if(void 0!==a.interactions)Array.isArray(a.interactions)?h=new sc(a.interactions.slice()):(w(a.interactions instanceof sc,48),h=a.interactions);else{h={};g=new sc;var k=new jf;(void 0!==h.altShiftDragRotate?h.altShiftDragRotate:1)&&g.push(new If);(void 0!==h.doubleClickZoom?h.doubleClickZoom:1)&&g.push(new qf({delta:h.zoomDelta,duration:h.zoomDuration}));
(void 0!==h.dragPan?h.dragPan:1)&&g.push(new Df({kinetic:k}));(void 0!==h.pinchRotate?h.pinchRotate:1)&&g.push(new gg);(void 0!==h.pinchZoom?h.pinchZoom:1)&&g.push(new kg({constrainResolution:h.constrainResolution,duration:h.zoomDuration}));if(void 0!==h.keyboard?h.keyboard:1)g.push(new Zf),g.push(new ag({delta:h.zoomDelta,duration:h.zoomDuration}));(void 0!==h.mouseWheelZoom?h.mouseWheelZoom:1)&&g.push(new cg({constrainResolution:h.constrainResolution,duration:h.zoomDuration}));(void 0!==h.shiftDragZoom?
h.shiftDragZoom:1)&&g.push(new Yf({duration:h.zoomDuration}));h=g}void 0!==a.overlays?Array.isArray(a.overlays)?a=new sc(a.overlays.slice()):(w(a.overlays instanceof sc,49),a=a.overlays):a=new sc;return{controls:f,interactions:h,keyboardEventTarget:b,logos:d,overlays:a,Gi:e,values:c}};function kh(a){nc.call(this);this.l=a.id;this.D=void 0!==a.insertFirst?a.insertFirst:!0;this.v=void 0!==a.stopEvent?a.stopEvent:!0;this.c=document.createElement("DIV");this.c.className="ol-overlay-container ol-selectable";this.c.style.position="absolute";this.autoPan=void 0!==a.autoPan?a.autoPan:!1;this.g=a.autoPanAnimation||{};this.s=void 0!==a.autoPanMargin?a.autoPanMargin:20;this.a={Yb:"",fc:"",vc:"",zc:"",visible:!0};this.i=null;y(this,pc(lh),this.sg,this);y(this,pc(mh),this.yg,this);y(this,pc(nh),
this.Bg,this);y(this,pc(oh),this.Dg,this);y(this,pc(ph),this.Eg,this);void 0!==a.element&&this.set(lh,a.element);this.set(nh,void 0!==a.offset?a.offset:[0,0]);this.set(ph,void 0!==a.positioning?a.positioning:"top-left");void 0!==a.position&&this.me(a.position)}t(kh,nc);l=kh.prototype;l.sg=function(){for(var a=this.c;a.lastChild;)a.removeChild(a.lastChild);(a=this.get(lh))&&this.c.appendChild(a)};
l.yg=function(){this.i&&(Ic(this.c),Zb(this.i),this.i=null);var a=this.get(mh);a&&(this.i=y(a,"postrender",this.render,this),rh(this),a=this.v?a.C:a.H,this.D?a.insertBefore(this.c,a.childNodes[0]||null):a.appendChild(this.c))};l.render=function(){rh(this)};l.Bg=function(){rh(this)};
l.Dg=function(){rh(this);if(this.get(oh)&&this.autoPan){var a=this.get(mh);if(a&&jh(a)){var b=sh(jh(a),a.pb()),c=this.get(lh),d=c.offsetWidth,e=getComputedStyle(c);d+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10);e=c.offsetHeight;var f=getComputedStyle(c);e+=parseInt(f.marginTop,10)+parseInt(f.marginBottom,10);var g=sh(c,[d,e]);c=this.s;Ma(b,g)||(d=g[0]-b[0],e=b[2]-g[2],f=g[1]-b[1],g=b[3]-g[3],b=[0,0],0>d?b[0]=d-c:0>e&&(b[0]=Math.abs(e)+c),0>f?b[1]=f-c:0>g&&(b[1]=Math.abs(g)+c),0===b[0]&&0===
b[1])||(c=a.Z().ba(),c=Hf(a,c),b=[c[0]+b[0],c[1]+b[1]],a.Z().animate({center:a.Ba(b),duration:this.g.duration,easing:this.g.easing}))}}};l.Eg=function(){rh(this)};l.setMap=function(a){this.set(mh,a)};l.me=function(a){this.set(oh,a)};function sh(a,b){var c=a.getBoundingClientRect();a=c.left+window.pageXOffset;c=c.top+window.pageYOffset;return[a,c,a+b[0],c+b[1]]}function th(a,b){a.a.visible!==b&&(a.c.style.display=b?"":"none",a.a.visible=b)}
function rh(a){var b=a.get(mh),c=a.get(oh);if(b&&b.c&&c){c=Hf(b,c);var d=b.pb();b=a.c.style;var e=a.get(nh),f=a.get(ph);th(a,!0);var g=e[0];e=e[1];if("bottom-right"==f||"center-right"==f||"top-right"==f)""!==a.a.fc&&(a.a.fc=b.left=""),g=Math.round(d[0]-c[0]-g)+"px",a.a.vc!=g&&(a.a.vc=b.right=g);else{""!==a.a.vc&&(a.a.vc=b.right="");if("bottom-center"==f||"center-center"==f||"top-center"==f)g-=a.c.offsetWidth/2;g=Math.round(c[0]+g)+"px";a.a.fc!=g&&(a.a.fc=b.left=g)}if("bottom-left"==f||"bottom-center"==
f||"bottom-right"==f)""!==a.a.zc&&(a.a.zc=b.top=""),c=Math.round(d[1]-c[1]-e)+"px",a.a.Yb!=c&&(a.a.Yb=b.bottom=c);else{""!==a.a.Yb&&(a.a.Yb=b.bottom="");if("center-left"==f||"center-center"==f||"center-right"==f)e-=a.c.offsetHeight/2;c=Math.round(c[1]+e)+"px";a.a.zc!=c&&(a.a.zc=b.top=c)}}else th(a,!1)}var lh="element",mh="map",nh="offset",oh="position",ph="positioning";function uh(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-scale-line";this.i=document.createElement("DIV");this.i.className=b+"-inner";this.a=document.createElement("DIV");this.a.className=b+" ol-unselectable";this.a.appendChild(this.i);this.s=null;this.g=void 0!==a.minWidth?a.minWidth:64;this.c=!1;this.u=void 0;this.v="";Jc.call(this,{element:this.a,render:a.render?a.render:vh,target:a.target});y(this,pc(wh),this.C,this);this.set(wh,a.units||"metric")}t(uh,Jc);var xh=[1,2,5];
function vh(a){(a=a.frameState)?this.s=a.viewState:this.s=null;yh(this)}uh.prototype.C=function(){yh(this)};
function yh(a){var b=a.s;if(b){var c=b.center,d=b.projection,e=a.get(wh),f=b.resolution,g="degrees"==e?"degrees":"m";b=Ab(d);var h=b.l;h?c=h(f,c):"degrees"==b.f&&!g||"degrees"==g?c=f:(h=Db(b,Ab("EPSG:4326")),c=[c[0]-f/2,c[1],c[0]+f/2,c[1],c[0],c[1]-f/2,c[0],c[1]+f/2],c=h(c,c,2),c=(ub.b(c.slice(0,2),c.slice(2,4))+ub.b(c.slice(4,6),c.slice(6,8)))/2,b=g?db[g]:b.j(),void 0!==b&&(c/=b));b=c;c=a.g*b;g="";"degrees"==e?(e=db.degrees,"degrees"==d.f?c*=e:b/=e,c<e/60?(g="\u2033",b*=3600):c<e?(g="\u2032",b*=
60):g="\u00b0"):"imperial"==e?.9144>c?(g="in",b/=.0254):1609.344>c?(g="ft",b/=.3048):(g="mi",b/=1609.344):"nautical"==e?(b/=1852,g="nm"):"metric"==e?.001>c?(g="\u03bcm",b*=1E6):1>c?(g="mm",b*=1E3):1E3>c?g="m":(g="km",b/=1E3):"us"==e?.9144>c?(g="in",b*=39.37):1609.344>c?(g="ft",b/=.30480061):(g="mi",b/=1609.3472):w(!1,33);for(e=3*Math.floor(Math.log(a.g*b)/Math.log(10));;){c=xh[(e%3+3)%3]*Math.pow(10,Math.floor(e/3));d=Math.round(c/b);if(isNaN(d)){a.a.style.display="none";a.c=!1;return}if(d>=a.g)break;
++e}e=c+" "+g;a.v!=e&&(a.i.innerHTML=e,a.v=e);a.u!=d&&(a.i.style.width=d+"px",a.u=d);a.c||(a.a.style.display="",a.c=!0)}else a.c&&(a.a.style.display="none",a.c=!1)}var wh="units";function zh(a){this.c=a.opacity;this.v=a.rotateWithView;this.l=a.rotation;this.a=a.scale;this.s=a.snapToPixel};function Ah(a){this.D=this.B=this.f=null;this.ma=void 0!==a.fill?a.fill:null;this.ea=[0,0];this.g=a.points;this.b=void 0!==a.radius?a.radius:a.radius1;this.j=a.radius2;this.i=void 0!==a.angle?a.angle:0;this.ja=void 0!==a.stroke?a.stroke:null;this.u=this.fa=this.C=null;this.L=a.atlasManager;Bh(this,this.L);zh.call(this,{opacity:1,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1,rotation:void 0!==a.rotation?a.rotation:0,scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:!0})}
t(Ah,zh);l=Ah.prototype;l.clone=function(){var a=new Ah({fill:this.ra()?this.ra().clone():void 0,points:this.g,radius:this.b,radius2:this.j,angle:this.i,snapToPixel:this.s,stroke:this.na()?this.na().clone():void 0,rotation:this.l,rotateWithView:this.v,atlasManager:this.L});a.c=this.c;a.a=this.a;return a};l.$b=function(){return this.C};l.ra=function(){return this.ma};l.Ke=function(){return this.D};l.ha=function(){return this.B};l.ce=function(){return this.u};l.nc=function(){return 2};l.oc=function(){return this.ea};
l.qb=function(){return this.fa};l.na=function(){return this.ja};l.je=function(){};l.load=function(){};l.hf=function(){};
function Bh(a,b){var c="",d="",e=0,f=null,g=0,h=0;if(a.ja){var k=a.ja.b;null===k&&(k=Gg);k=Gc(k);h=a.ja.a;void 0===h&&(h=1);f=a.ja.f;g=a.ja.i;ld||(f=null,g=0);d=a.ja.g;void 0===d&&(d="round");c=a.ja.c;void 0===c&&(c="round");e=a.ja.B;void 0===e&&(e=10)}var m=2*(a.b+h)+1;c={strokeStyle:k,ff:h,size:m,lineCap:c,lineDash:f,lineDashOffset:g,lineJoin:d,miterLimit:e};if(void 0===b){var n=Hc(m,m);a.B=n.canvas;b=m=a.B.width;a.Zd(c,n,0,0);a.ma?a.D=a.B:(n=Hc(c.size,c.size),a.D=n.canvas,a.Yd(c,n,0,0))}else m=
Math.round(m),(d=!a.ma)&&(n=a.Yd.bind(a,c)),a.ja?(e=a.ja,void 0===e.j&&(e.j="s",e.j=e.b?"string"===typeof e.b?e.j+e.b:e.j+v(e.b).toString():e.j+"-",e.j+=","+(void 0!==e.c?e.c.toString():"-")+","+(e.f?e.f.toString():"-")+","+(void 0!==e.i?e.i:"-")+","+(void 0!==e.g?e.g:"-")+","+(void 0!==e.B?e.B.toString():"-")+","+(void 0!==e.a?e.a.toString():"-")),e=e.j):e="-",a.ma?(f=a.ma,void 0===f.f&&(f.f=f.b instanceof CanvasPattern||f.b instanceof CanvasGradient?v(f.b).toString():"f"+(f.b?Dc(f.b):"-")),f=f.f):
f="-",a.f&&e==a.f[1]&&f==a.f[2]&&a.b==a.f[3]&&a.j==a.f[4]&&a.i==a.f[5]&&a.g==a.f[6]||(a.f=["r"+e+f+(void 0!==a.b?a.b.toString():"-")+(void 0!==a.j?a.j.toString():"-")+(void 0!==a.i?a.i.toString():"-")+(void 0!==a.g?a.g.toString():"-"),e,f,a.b,a.j,a.i,a.g]),n=b.add(a.f[0],m,m,a.Zd.bind(a,c),n),a.B=n.image,a.ea=[n.offsetX,n.offsetY],b=n.image.width,a.D=d?n.b:a.B;a.C=[m/2,m/2];a.fa=[m,m];a.u=[b,b]}
l.Zd=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();var e=this.g;if(Infinity===e)b.arc(a.size/2,a.size/2,this.b,0,2*Math.PI,!0);else{var f=void 0!==this.j?this.j:this.b;f!==this.b&&(e*=2);for(c=0;c<=e;c++){d=2*c*Math.PI/e-Math.PI/2+this.i;var g=c%2?f:this.b;b.lineTo(a.size/2+g*Math.cos(d),a.size/2+g*Math.sin(d))}}this.ma&&(c=this.ma.b,null===c&&(c=Eg),b.fillStyle=Gc(c),b.fill());this.ja&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.ff,a.lineDash&&(b.setLineDash(a.lineDash),
b.lineDashOffset=a.lineDashOffset),b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.miterLimit=a.miterLimit,b.stroke());b.closePath()};
l.Yd=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();c=this.g;if(Infinity===c)b.arc(a.size/2,a.size/2,this.b,0,2*Math.PI,!0);else{d=void 0!==this.j?this.j:this.b;d!==this.b&&(c*=2);var e;for(e=0;e<=c;e++){var f=2*e*Math.PI/c-Math.PI/2+this.i;var g=e%2?d:this.b;b.lineTo(a.size/2+g*Math.cos(f),a.size/2+g*Math.sin(f))}}b.fillStyle=Eg;b.fill();this.ja&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.ff,a.lineDash&&(b.setLineDash(a.lineDash),b.lineDashOffset=a.lineDashOffset),b.stroke());
b.closePath()};function Ch(a){a=a||{};Ah.call(this,{points:Infinity,fill:a.fill,radius:a.radius,snapToPixel:a.snapToPixel,stroke:a.stroke,atlasManager:a.atlasManager})}t(Ch,Ah);Ch.prototype.clone=function(){var a=new Ch({fill:this.ra()?this.ra().clone():void 0,stroke:this.na()?this.na().clone():void 0,radius:this.b,snapToPixel:this.s,atlasManager:this.L});a.c=this.c;a.a=this.a;return a};Ch.prototype.af=function(a){this.b=a;Bh(this,this.L)};function Dh(a){a=a||{};this.b=void 0!==a.color?a.color:null;this.f=void 0}Dh.prototype.clone=function(){var a=this.b;return new Dh({color:a&&a.slice?a.slice():a||void 0})};function Eh(a){a=a||{};this.Va=null;this.Aa=Fh;void 0!==a.geometry&&this.xa(a.geometry);this.ma=void 0!==a.fill?a.fill:null;this.N=void 0!==a.image?a.image:null;this.$a=a.renderer?a.renderer:null;this.ja=void 0!==a.stroke?a.stroke:null;this.da=void 0!==a.text?a.text:null;this.Ui=a.zIndex}l=Eh.prototype;
l.clone=function(){var a=this.P();a&&a.clone&&(a=a.clone());return new Eh({geometry:a,fill:this.ra()?this.ra().clone():void 0,image:this.ha()?this.ha().clone():void 0,stroke:this.na()?this.na().clone():void 0,text:this.oa()?this.oa().clone():void 0,zIndex:this.pa()})};l.$c=function(){return this.$a};l.P=function(){return this.Va};l.ra=function(){return this.ma};l.$e=function(a){this.ma=a};l.ha=function(){return this.N};l.na=function(){return this.ja};l.cf=function(a){this.ja=a};l.oa=function(){return this.da};
l.df=function(a){this.da=a};l.pa=function(){return this.Ui};l.xa=function(a){"function"===typeof a?this.Aa=a:"string"===typeof a?this.Aa=function(b){return b.get(a)}:a?a&&(this.Aa=function(){return a}):this.Aa=Fh;this.Va=a};function Gh(a){if("function"!==typeof a){if(Array.isArray(a))var b=a;else w(a instanceof Eh,41),b=[a];a=function(){return b}}return a}var Hh=null;
function Ih(){if(!Hh){var a=new Dh({color:"rgba(255,255,255,0.4)"}),b=new Yg({color:"#3399CC",width:1.25});Hh=[new Eh({image:new Ch({fill:a,stroke:b,radius:5}),fill:a,stroke:b})]}return Hh}
function Jh(){var a={},b=[255,255,255,1],c=[0,153,255,1];a.Polygon=[new Eh({fill:new Dh({color:[255,255,255,.5]})})];a.MultiPolygon=a.Polygon;a.LineString=[new Eh({stroke:new Yg({color:b,width:5})}),new Eh({stroke:new Yg({color:c,width:3})})];a.MultiLineString=a.LineString;a.Circle=a.Polygon.concat(a.LineString);a.Point=[new Eh({image:new Ch({radius:6,fill:new Dh({color:c}),stroke:new Yg({color:b,width:1.5})}),zIndex:Infinity})];a.MultiPoint=a.Point;a.GeometryCollection=a.Polygon.concat(a.LineString,
a.Point);return a}function Fh(a){return a.P()};function E(a){nc.call(this);this.a=void 0;this.c="geometry";this.g=null;this.l=void 0;this.i=null;y(this,pc(this.c),this.dc,this);void 0!==a&&(a instanceof ue||!a?this.xa(a):this.qa(a))}t(E,nc);l=E.prototype;l.clone=function(){var a=new E(this.Ca());a.sb(this.c);var b=this.P();b&&a.xa(b.clone());(b=this.g)&&a.le(b);return a};l.P=function(){return this.get(this.c)};l.jh=function(){return this.a};l.hg=function(){return this.c};l.kh=function(){return this.g};l.ac=function(){return this.l};l.tg=function(){this.b()};
l.dc=function(){this.i&&(Zb(this.i),this.i=null);var a=this.P();a&&(this.i=y(a,"change",this.tg,this));this.b()};l.xa=function(a){this.set(this.c,a)};l.le=function(a){this.l=(this.g=a)?Kh(a):void 0;this.b()};l.ab=function(a){this.a=a;this.b()};l.sb=function(a){dc(this,pc(this.c),this.dc,this);this.c=a;y(this,pc(this.c),this.dc,this);this.dc()};
function Kh(a){var b;if("function"===typeof a)2==a.length?b=function(b){return a(this,b)}:b=a;else{if(Array.isArray(a))var c=a;else w(a instanceof Eh,41),c=[a];b=function(){return c}}return b};var Lh=document.implementation.createDocument("","",null);function Mh(a,b){return Lh.createElementNS(a,b)}function Nh(a){return Oh(a,!1,[]).join("")}function Oh(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)Oh(a,b,c);return c}function Ph(a){return(new DOMParser).parseFromString(a,"application/xml")}
function J(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&d[d.length-1].push(c)}}function L(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&(d[d.length-1]=c)}}function Qh(a){return function(b,c){var d=a.call(this,b,c);if(void 0!==d){c=c[c.length-1];b=b.localName;var e;b in c?e=c[b]:e=c[b]=[];e.push(d)}}}function M(a,b){return function(c,d){var e=a.call(this,c,d);void 0!==e&&(d[d.length-1][void 0!==b?b:c.localName]=e)}}
function N(a,b){return function(c,d,e){a.call(void 0!==b?b:this,c,d,e);e[e.length-1].node.appendChild(c)}}function Rh(a){var b,c;return function(d,e,f){if(!b){b={};var g={};g[d.localName]=a;b[d.namespaceURI]=g;c=Sh(d.localName)}Th(b,c,e,f)}}function Sh(a,b){return function(c,d,e){c=d[d.length-1].node;d=a;void 0===d&&(d=e);e=b;void 0===b&&(e=c.namespaceURI);return Mh(e,d)}}var Uh=Sh();function Vh(a,b){for(var c=b.length,d=Array(c),e=0;e<c;++e)d[e]=a[b[e]];return d}
function O(a,b,c){c=void 0!==c?c:{};var d;var e=0;for(d=a.length;e<d;++e)c[a[e]]=b;return c}function Wh(a,b,c,d){for(b=b.firstElementChild;b;b=b.nextElementSibling){var e=a[b.namespaceURI];void 0!==e&&(e=e[b.localName])&&e.call(d,b,c)}}function P(a,b,c,d,e){d.push(a);Wh(b,c,d,e);return d.pop()}function Th(a,b,c,d,e,f){for(var g=(void 0!==e?e:c).length,h,k,m=0;m<g;++m)h=c[m],void 0!==h&&(k=b.call(f,h,d,void 0!==e?e[m]:void 0),void 0!==k&&a[k.namespaceURI][k.localName].call(f,k,h,d))}
function Q(a,b,c,d,e,f,g){e.push(a);Th(b,c,d,e,f,g);e.pop()};function Xh(a,b,c){return function(d,e,f){var g=new XMLHttpRequest;g.open("GET","function"===typeof a?a(d,e,f):a,!0);"arraybuffer"==b.I()&&(g.responseType="arraybuffer");g.onload=function(){if(!g.status||200<=g.status&&300>g.status){var a=b.I();if("json"==a||"text"==a)var d=g.responseText;else"xml"==a?(d=g.responseXML)||(d=Ph(g.responseText)):"arraybuffer"==a&&(d=g.response);d&&c.call(this,b.Ra(d,{featureProjection:f}),b.tc(d),null)}}.bind(this);g.onerror=function(){}.bind(this);g.send()}}
function Yh(a,b){return Xh(a,b,function(a){this.wb(a)})};function Zh(){this.j=this.defaultDataProjection=null}function $h(a,b,c){var d;c&&(d={dataProjection:c.dataProjection?c.dataProjection:a.tc(b),featureProjection:c.featureProjection});return ai(a,d)}function ai(a,b){return Za({dataProjection:a.defaultDataProjection,featureProjection:a.j},b)}
function bi(a,b,c){var d=c?Ab(c.featureProjection):null,e=c?Ab(c.dataProjection):null,f;d&&e&&!Cb(d,e)?a instanceof ue?f=(b?a.clone():a).C(b?d:e,b?e:d):f=Gb(a,e,d):f=a;if(b&&c&&void 0!==c.decimals){var g=Math.pow(10,c.decimals);f===a&&(f=f.clone());f.xb(function(a){for(var b=0,c=a.length;b<c;++b)a[b]=Math.round(a[b]*g)/g;return a})}return f};function ci(){Zh.call(this)}t(ci,Zh);function di(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null}l=ci.prototype;l.I=function(){return"json"};l.pc=function(a,b){return this.Za(di(a),$h(this,a,b))};l.Ra=function(a,b){return this.qd(di(a),$h(this,a,b))};l.tc=function(a){return this.ud(di(a))};l.Ad=function(a,b){return JSON.stringify(this.ub(a,b))};function ei(a,b,c,d,e,f){var g=NaN,h=NaN,k=(c-b)/d;if(1===k)g=a[b],h=a[b+1];else if(2==k)g=(1-e)*a[b]+e*a[b+d],h=(1-e)*a[b+1]+e*a[b+d+1];else if(k){h=a[b];k=a[b+1];var m=0;g=[0];var n;for(n=b+d;n<c;n+=d){var p=a[n],r=a[n+1];m+=Math.sqrt((p-h)*(p-h)+(r-k)*(r-k));g.push(m);h=p;k=r}c=e*m;k=0;m=g.length;for(n=!1;k<m;)e=k+(m-k>>1),h=+fa(g[e],c),0>h?k=e+1:(m=e,n=!h);e=n?k:~k;0>e?(c=(c-g[-e-2])/(g[-e-1]-g[-e-2]),b+=(-e-2)*d,g=Aa(a[b],a[b+d],c),h=Aa(a[b+1],a[b+d+1],c)):(g=a[b+e*d],h=a[b+e*d+1])}return f?
(f[0]=g,f[1]=h,f):[g,h]}function fi(a,b,c,d,e){if(!b)return null;if(d<a[0+c-1])return e?(b=a.slice(0,0+c),b[c-1]=d,b):null;if(a[b-1]<d)return e?(b=a.slice(b-c,b),b[c-1]=d,b):null;if(d==a[0+c-1])return a.slice(0,0+c);e=0/c;for(b/=c;e<b;){var f=e+b>>1;d<a[(f+1)*c-1]?b=f:e=f+1}b=a[e*c-1];if(d==b)return a.slice((e-1)*c,(e-1)*c+c);f=(d-b)/(a[(e+1)*c-1]-b);b=[];var g;for(g=0;g<c-1;++g)b.push(Aa(a[(e-1)*c+g],a[e*c+g],f));b.push(d);return b};function S(a,b){we.call(this);this.a=null;this.v=this.u=this.g=-1;this.Y(a,b)}t(S,we);l=S.prototype;l.Xf=function(a){this.o?ia(this.o,a):this.o=a.slice();this.b()};l.clone=function(){var a=new S(null);gi(a,this.W,this.o.slice());return a};l.Ga=function(a,b,c,d){if(d<La(this.K(),a,b))return d;this.v!=this.j&&(this.u=Math.sqrt(Ce(this.o,0,this.o.length,this.A,0)),this.v=this.j);return Ee(this.o,0,this.o.length,this.A,this.u,!1,a,b,c,d)};
l.De=function(a,b){return"XYM"!=this.W&&"XYZM"!=this.W?null:fi(this.o,this.o.length,this.A,a,void 0!==b?b:!1)};l.G=function(){return Je(this.o,0,this.o.length,this.A)};l.$d=function(a,b){return ei(this.o,0,this.o.length,this.A,a,b)};l.Dh=function(){var a=this.o,b=this.A,c=a[0],d=a[1],e=0,f;for(f=0+b;f<this.o.length;f+=b){var g=a[f],h=a[f+1];e+=Math.sqrt((g-c)*(g-c)+(h-d)*(h-d));c=g;d=h}return e};function Qg(a){a.g!=a.j&&(a.a=a.$d(.5,a.a),a.g=a.j);return a.a}
l.kb=function(a){var b=[];b.length=Me(this.o,0,this.o.length,this.A,a,b,0);a=new S(null);gi(a,"XY",b);return a};l.I=function(){return"LineString"};l.Y=function(a,b){a?(ze(this,b,a,1),this.o||(this.o=[]),this.o.length=He(this.o,0,a,this.A),this.b()):gi(this,"XY",null)};function gi(a,b,c){ye(a,b,c);a.b()};function hi(a,b){we.call(this);this.a=[];this.g=this.v=-1;this.Y(a,b)}t(hi,we);l=hi.prototype;l.clone=function(){var a=new hi(null);ii(a,this.W,this.o.slice(),this.a.slice());return a};l.Ga=function(a,b,c,d){if(d<La(this.K(),a,b))return d;this.g!=this.j&&(this.v=Math.sqrt(De(this.o,0,this.a,this.A,0)),this.g=this.j);return Fe(this.o,0,this.a,this.A,this.v,!1,a,b,c,d)};l.G=function(){return Ke(this.o,0,this.a,this.A)};l.Qa=function(){return this.a};
l.jb=function(){var a=this.o,b=this.a,c=this.W,d=[],e=0,f;var g=0;for(f=b.length;g<f;++g){var h=b[g],k=new S(null);gi(k,c,a.slice(e,h));d.push(k);e=h}return d};function Rg(a){var b=[],c=a.o,d=0,e=a.a;a=a.A;var f;var g=0;for(f=e.length;g<f;++g){var h=e[g];d=ei(c,d,h,a,.5);ia(b,d);d=h}return b}l.kb=function(a){var b=[],c=[],d=this.o,e=this.a,f=this.A,g=0,h=0,k;var m=0;for(k=e.length;m<k;++m){var n=e[m];h=Me(d,g,n,f,a,b,h);c.push(h);g=n}b.length=h;a=new hi(null);ii(a,"XY",b,c);return a};l.I=function(){return"MultiLineString"};
l.Y=function(a,b){a?(ze(this,b,a,2),this.o||(this.o=[]),a=Ie(this.o,0,a,this.A,this.a),this.o.length=a.length?a[a.length-1]:0,this.b()):ii(this,"XY",null,this.a)};function ii(a,b,c,d){ye(a,b,c);a.a=d;a.b()}function ji(a,b){var c=a.W,d=[],e=[],f;var g=0;for(f=b.length;g<f;++g){var h=b[g];g||(c=h.W);ia(d,h.o);e.push(d.length)}ii(a,c,d,e)};function ki(a,b){we.call(this);this.Y(a,b)}t(ki,we);l=ki.prototype;l.clone=function(){var a=new ki(null);ye(a,this.W,this.o.slice());a.b();return a};l.Ga=function(a,b,c,d){if(d<La(this.K(),a,b))return d;var e=this.o,f=this.A,g;var h=0;for(g=e.length;h<g;h+=f){var k=xa(a,b,e[h],e[h+1]);if(k<d){d=k;for(k=0;k<f;++k)c[k]=e[h+k];c.length=f}}return d};l.G=function(){return Je(this.o,0,this.o.length,this.A)};
function li(a){var b=a.o,c=a.W;a=a.A;var d=[],e;var f=0;for(e=b.length;f<e;f+=a){var g=new Qe(null),h=g;ye(h,c,b.slice(f,f+a));h.b();d.push(g)}return d}l.I=function(){return"MultiPoint"};l.Y=function(a,b){a?(ze(this,b,a,1),this.o||(this.o=[]),this.o.length=He(this.o,0,a,this.A)):ye(this,"XY",null);this.b()};function mi(a,b){we.call(this);this.a=[];this.v=-1;this.u=null;this.X=this.H=this.J=-1;this.g=null;this.Y(a,b)}t(mi,we);l=mi.prototype;l.clone=function(){for(var a=new mi(null),b=this.a.length,c=Array(b),d=0;d<b;++d)c[d]=this.a[d].slice();ni(a,this.W,this.o.slice(),c);return a};
l.Ga=function(a,b,c,d){if(d<La(this.K(),a,b))return d;if(this.H!=this.j){var e=this.a,f=0,g=0,h;var k=0;for(h=e.length;k<h;++k){var m=e[k];g=De(this.o,f,m,this.A,g);f=m[m.length-1]}this.J=Math.sqrt(g);this.H=this.j}e=Sg(this);f=this.a;g=this.A;k=this.J;h=0;m=[NaN,NaN];var n;var p=0;for(n=f.length;p<n;++p){var r=f[p];d=Fe(e,h,r,g,k,!0,a,b,c,d,m);h=r[r.length-1]}return d};l.Eh=function(){var a=Sg(this),b=this.a,c=0,d=0,e;var f=0;for(e=b.length;f<e;++f){var g=b[f];d+=Ae(a,c,g,this.A);c=g[g.length-1]}return d};
l.G=function(a){if(void 0!==a){var b=Sg(this).slice();We(b,this.a,this.A,a)}else b=this.o;return Le(b,0,this.a,this.A)};function Tg(a){if(a.v!=a.j){var b=a.o,c=a.a,d=a.A,e=0,f=[],g;var h=0;for(g=c.length;h<g;++h){var k=c[h];var m=b;var n=k[0],p=d,r=Oa(void 0);m=Ra(r,m,e,n,p);f.push((m[0]+m[2])/2,(m[1]+m[3])/2);e=k[k.length-1]}b=Sg(a);c=a.a;d=a.A;h=0;g=[];k=0;for(m=c.length;k<m;++k)e=c[k],g=Se(b,h,e,d,f,2*k,g),h=e[e.length-1];a.u=g;a.v=a.j}return a.u}
l.lg=function(){var a=new ki(null),b=Tg(this).slice();ye(a,"XY",b);a.b();return a};function Sg(a){if(a.X!=a.j){var b=a.o;a:{var c=a.a;var d;var e=0;for(d=c.length;e<d;++e)if(!Ue(b,c[e],a.A,void 0)){c=!1;break a}c=!0}c?a.g=b:(a.g=b.slice(),a.g.length=We(a.g,a.a,a.A));a.X=a.j}return a.g}
l.kb=function(a){var b=[],c=[],d=this.o,e=this.a,f=this.A;a=Math.sqrt(a);var g=0,h=0,k;var m=0;for(k=e.length;m<k;++m){var n=e[m],p=[];h=Ne(d,g,n,f,a,b,h,p);c.push(p);g=n[n.length-1]}b.length=h;d=new mi(null);ni(d,"XY",b,c);return d};function oi(a){var b=a.W,c=a.o;a=a.a;var d=[],e=0,f,g;var h=0;for(f=a.length;h<f;++h){var k=a[h].slice(),m=k[k.length-1];if(e){var n=0;for(g=k.length;n<g;++n)k[n]-=e}n=new z(null);Xe(n,b,c.slice(e,m),k);d.push(n);e=m}return d}l.I=function(){return"MultiPolygon"};
l.Y=function(a,b){if(a){ze(this,b,a,3);this.o||(this.o=[]);b=this.o;var c=this.A,d=this.a,e=0;d=d?d:[];var f=0,g;var h=0;for(g=a.length;h<g;++h)e=Ie(b,e,a[h],c,d[f]),d[f++]=e,e=e[e.length-1];d.length=f;d.length?(a=d[d.length-1],this.o.length=a.length?a[a.length-1]:0):this.o.length=0;this.b()}else ni(this,"XY",null,this.a)};function ni(a,b,c,d){ye(a,b,c);a.a=d;a.b()}
function pi(a,b){var c=a.W,d=[],e=[],f;var g=0;for(f=b.length;g<f;++g){var h=b[g];g||(c=h.W);var k=d.length;var m=h.Qa();var n;var p=0;for(n=m.length;p<n;++p)m[p]+=k;ia(d,h.o);e.push(m)}ni(a,c,d,e)};function qi(a){a=a?a:{};Zh.call(this);this.b=a.geometryName}t(qi,ci);function ri(a){var b="XY";!0===a.hasZ&&!0===a.hasM?b="XYZM":!0===a.hasZ?b="XYZ":!0===a.hasM&&(b="XYM");return b}function si(a){a=a.W;return{hasZ:"XYZ"===a||"XYZM"===a,hasM:"XYM"===a||"XYZM"===a}}
var ti={Point:function(a){return void 0!==a.m&&void 0!==a.z?new Qe([a.x,a.y,a.z,a.m],"XYZM"):void 0!==a.z?new Qe([a.x,a.y,a.z],"XYZ"):void 0!==a.m?new Qe([a.x,a.y,a.m],"XYM"):new Qe([a.x,a.y])},LineString:function(a){return new S(a.paths[0],ri(a))},Polygon:function(a){return new z(a.rings,ri(a))},MultiPoint:function(a){return new ki(a.points,ri(a))},MultiLineString:function(a){return new hi(a.paths,ri(a))},MultiPolygon:function(a){return new mi(a.rings,ri(a))}},ui={Point:function(a){var b=a.G(),c;
a=a.W;"XYZ"===a?c={x:b[0],y:b[1],z:b[2]}:"XYM"===a?c={x:b[0],y:b[1],m:b[2]}:"XYZM"===a?c={x:b[0],y:b[1],z:b[2],m:b[3]}:"XY"===a?c={x:b[0],y:b[1]}:w(!1,34);return c},LineString:function(a){var b=si(a);return{hasZ:b.hasZ,hasM:b.hasM,paths:[a.G()]}},Polygon:function(a){var b=si(a);return{hasZ:b.hasZ,hasM:b.hasM,rings:a.G(!1)}},MultiPoint:function(a){var b=si(a);return{hasZ:b.hasZ,hasM:b.hasM,points:a.G()}},MultiLineString:function(a){var b=si(a);return{hasZ:b.hasZ,hasM:b.hasM,paths:a.G()}},MultiPolygon:function(a){var b=
si(a);a=a.G(!1);for(var c=[],d=0;d<a.length;d++)for(var e=a[d].length-1;0<=e;e--)c.push(a[d][e]);return{hasZ:b.hasZ,hasM:b.hasM,rings:c}}};l=qi.prototype;
l.Za=function(a,b){var c;if(c=a.geometry){if("number"===typeof c.x&&"number"===typeof c.y)var d="Point";else if(c.points)d="MultiPoint";else if(c.paths)d=1===c.paths.length?"LineString":"MultiLineString";else if(c.rings){var e=c.rings,f=ri(c),g=[],h=[];d=[];var k;var m=0;for(k=e.length;m<k;++m)g.length=0,He(g,0,e[m],f.length),Te(g,0,g.length,f.length)?h.push([e[m]]):d.push(e[m]);for(;d.length;){e=d.shift();f=!1;for(m=h.length-1;0<=m;m--)if(Ma((new Oe(h[m][0])).K(),(new Oe(e)).K())){h[m].push(e);f=
!0;break}f||h.push([e.reverse()])}c=Za({},c);1===h.length?(d="Polygon",c.rings=h[0]):(d="MultiPolygon",c.rings=h)}c=bi((0,ti[d])(c),!1,b)}else c=null;h=new E;this.b&&h.sb(this.b);h.xa(c);b&&b.dd&&a.attributes[b.dd]&&h.ab(a.attributes[b.dd]);a.attributes&&h.qa(a.attributes);return h};l.qd=function(a,b){b=b?b:{};if(a.features){var c=[],d=a.features,e;b.dd=a.objectIdFieldName;a=0;for(e=d.length;a<e;++a)c.push(this.Za(d[a],b));return c}return[this.Za(a,b)]};
l.ud=function(a){return a.spatialReference&&a.spatialReference.wkid?Ab("EPSG:"+a.spatialReference.wkid):null};l.ub=function(a,b){b=ai(this,b);var c={},d=a.P();if(d){var e=b;d=(0,ui[d.I()])(bi(d,!0,e),e);c.geometry=d;b&&b.featureProjection&&(c.geometry.spatialReference={wkid:Ab(b.featureProjection).Ha.split(":").pop()})}b=a.Ca();delete b[a.c];c.attributes=bb(b)?{}:b;return c};l.Bd=function(a,b){b=ai(this,b);var c=[],d;var e=0;for(d=a.length;e<d;++e)c.push(this.ub(a[e],b));return{features:c}};function vi(a){ue.call(this);this.a=a?a:null;wi(this)}t(vi,ue);function xi(a){var b=[],c;var d=0;for(c=a.length;d<c;++d)b.push(a[d].clone());return b}function yi(a){var b;if(a.a){var c=0;for(b=a.a.length;c<b;++c)dc(a.a[c],"change",a.b,a)}}function wi(a){var b;if(a.a){var c=0;for(b=a.a.length;c<b;++c)y(a.a[c],"change",a.b,a)}}l=vi.prototype;l.clone=function(){var a=new vi(null),b=xi(this.a);yi(a);a.a=b;wi(a);a.b();return a};
l.Ga=function(a,b,c,d){if(d<La(this.K(),a,b))return d;var e=this.a,f;var g=0;for(f=e.length;g<f;++g)d=e[g].Ga(a,b,c,d);return d};l.Zb=function(a){Oa(a);for(var b=this.a,c=0,d=b.length;c<d;++c){var e=a,f=b[c].K();f[0]<e[0]&&(e[0]=f[0]);f[2]>e[2]&&(e[2]=f[2]);f[1]<e[1]&&(e[1]=f[1]);f[3]>e[3]&&(e[3]=f[3])}return a};
l.ad=function(a){this.l!=this.j&&($a(this.c),this.i=0,this.l=this.j);if(0>a||this.i&&a<this.i)return this;var b=a.toString();if(this.c.hasOwnProperty(b))return this.c[b];var c=[],d=this.a,e=!1,f;var g=0;for(f=d.length;g<f;++g){var h=d[g],k=h.ad(a);c.push(k);k!==h&&(e=!0)}if(e)return a=new vi(null),yi(a),a.a=c,wi(a),a.b(),this.c[b]=a;this.i=a;return this};l.I=function(){return"GeometryCollection"};l.rotate=function(a,b){for(var c=this.a,d=0,e=c.length;d<e;++d)c[d].rotate(a,b);this.b()};
l.scale=function(a,b,c){c||(c=Sa(this.K()));for(var d=this.a,e=0,f=d.length;e<f;++e)d[e].scale(a,b,c);this.b()};l.xb=function(a){var b=this.a,c;var d=0;for(c=b.length;d<c;++d)b[d].xb(a);this.b()};l.la=function(){yi(this);ue.prototype.la.call(this)};function zi(a){a=a?a:{};Zh.call(this);this.defaultDataProjection=Ab(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326");a.featureProjection&&(this.j=Ab(a.featureProjection));this.b=a.geometryName}t(zi,ci);function Ai(a,b){return a?bi((0,Bi[a.type])(a),!1,b):null}function Ci(a,b){return(0,Di[a.I()])(bi(a,!0,b),b)}
var Bi={Point:function(a){return new Qe(a.coordinates)},LineString:function(a){return new S(a.coordinates)},Polygon:function(a){return new z(a.coordinates)},MultiPoint:function(a){return new ki(a.coordinates)},MultiLineString:function(a){return new hi(a.coordinates)},MultiPolygon:function(a){return new mi(a.coordinates)},GeometryCollection:function(a,b){a=a.geometries.map(function(a){return Ai(a,b)});return new vi(a)}},Di={Point:function(a){return{type:"Point",coordinates:a.G()}},LineString:function(a){return{type:"LineString",
coordinates:a.G()}},Polygon:function(a,b){if(b)var c=b.rightHanded;return{type:"Polygon",coordinates:a.G(c)}},MultiPoint:function(a){return{type:"MultiPoint",coordinates:a.G()}},MultiLineString:function(a){return{type:"MultiLineString",coordinates:a.G()}},MultiPolygon:function(a,b){if(b)var c=b.rightHanded;return{type:"MultiPolygon",coordinates:a.G(c)}},GeometryCollection:function(a,b){return{type:"GeometryCollection",geometries:a.a.map(function(a){var c=Za({},b);delete c.featureProjection;return Ci(a,
c)})}},Circle:function(){return{type:"GeometryCollection",geometries:[]}}};l=zi.prototype;l.Za=function(a,b){a="Feature"===a.type?a:{type:"Feature",geometry:a};b=Ai(a.geometry,b);var c=new E;this.b&&c.sb(this.b);c.xa(b);void 0!==a.id&&c.ab(a.id);a.properties&&c.qa(a.properties);return c};l.qd=function(a,b){if("FeatureCollection"===a.type){var c=[];a=a.features;var d;var e=0;for(d=a.length;e<d;++e)c.push(this.Za(a[e],b))}else c=[this.Za(a,b)];return c};
l.ud=function(a){a=a.crs;var b;a?"name"==a.type?b=Ab(a.properties.name):"EPSG"==a.type?b=Ab("EPSG:"+a.properties.code):w(!1,36):b=this.defaultDataProjection;return b};l.ub=function(a,b){b=ai(this,b);var c={type:"Feature"},d=a.a;void 0!==d&&(c.id=d);(d=a.P())?c.geometry=Ci(d,b):c.geometry=null;b=a.Ca();delete b[a.c];bb(b)?c.properties=null:c.properties=b;return c};l.Bd=function(a,b){b=ai(this,b);var c=[],d;var e=0;for(d=a.length;e<d;++e)c.push(this.ub(a[e],b));return{type:"FeatureCollection",features:c}};function Ei(){this.g=new XMLSerializer;Zh.call(this)}t(Ei,Zh);l=Ei.prototype;l.I=function(){return"xml"};l.pc=function(a,b){return a instanceof Document?Fi(this,a,b):a instanceof Node?null:"string"===typeof a?(a=Ph(a),Fi(this,a,b)):null};function Fi(a,b,c){a=Gi(a,b,c);return 0<a.length?a[0]:null}l.Ra=function(a,b){return a instanceof Document?Gi(this,a,b):a instanceof Node?this.pd(a,b):"string"===typeof a?(a=Ph(a),Gi(this,a,b)):[]};
function Gi(a,b,c){var d=[];for(b=b.firstChild;b;b=b.nextSibling)b.nodeType==Node.ELEMENT_NODE&&ia(d,a.pd(b,c));return d}l.tc=function(a){return a instanceof Document?this.td(a):a instanceof Node?this.uc(a):"string"===typeof a?(a=Ph(a),this.td(a)):null};l.td=function(){return this.defaultDataProjection};l.uc=function(){return this.defaultDataProjection};l.Ad=function(){return this.g.serializeToString(null)};function T(a){a=a?a:{};this.featureType=a.featureType;this.featureNS=a.featureNS;this.srsName=a.srsName;this.schemaLocation="";this.b={};this.b["http://www.opengis.net/gml"]={featureMember:L(T.prototype.Kb),featureMembers:L(T.prototype.Kb)};Ei.call(this)}t(T,Ei);var Hi=/^[\s\xa0]*$/;l=T.prototype;
l.Kb=function(a,b){var c=a.localName,d=null;if("FeatureCollection"==c)"http://www.opengis.net/wfs"===a.namespaceURI?d=P([],this.b,a,b,this):d=P(null,this.b,a,b,this);else if("featureMembers"==c||"featureMember"==c){var e=b[0],f=e.featureType,g=e.featureNS,h;if(!f&&a.childNodes){f=[];g={};var k=0;for(h=a.childNodes.length;k<h;++k){var m=a.childNodes[k];if(1===m.nodeType){var n=m.nodeName.split(":").pop();if(-1===f.indexOf(n)){var p="",r=0;m=m.namespaceURI;for(var u in g){if(g[u]===m){p=u;break}++r}p||
(p="p"+r,g[p]=m);f.push(p+":"+n)}}}"featureMember"!=c&&(e.featureType=f,e.featureNS=g)}"string"===typeof g&&(k=g,g={},g.p0=k);e={};f=Array.isArray(f)?f:[f];for(var D in g){n={};k=0;for(h=f.length;k<h;++k)(-1===f[k].indexOf(":")?"p0":f[k].split(":")[0])===D&&(n[f[k].split(":").pop()]="featureMembers"==c?J(this.Qe,this):L(this.Qe,this));e[g[D]]=n}"featureMember"==c?d=P(void 0,e,a,b):d=P([],e,a,b)}null===d&&(d=[]);return d};
function Ii(a,b,c){var d=c[0];d.srsName=b.firstElementChild.getAttribute("srsName");if(a=P(null,a.Ed,b,c,a))return bi(a,!1,d)}
l.Qe=function(a,b){var c;(c=a.getAttribute("fid"))||(c=a.getAttributeNS("http://www.opengis.net/gml","id")||"");var d={},e;for(a=a.firstElementChild;a;a=a.nextElementSibling){var f=a.localName;if(0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)){var g=Nh(a);Hi.test(g)&&(g=void 0);d[f]=g}else"boundedBy"!==f&&(e=f),d[f]=Ii(this,a,b)}b=new E(d);e&&b.sb(e);c&&b.ab(c);return b};
l.We=function(a,b){if(a=this.qc(a,b))return b=new Qe(null),ye(b,"XYZ",a),b.b(),b};l.Ue=function(a,b){if(a=P([],this.wf,a,b,this))return new ki(a)};l.Te=function(a,b){if(a=P([],this.vf,a,b,this))return b=new hi(null),ji(b,a),b};l.Ve=function(a,b){if(a=P([],this.xf,a,b,this))return b=new mi(null),pi(b,a),b};l.Ne=function(a,b){Wh(this.Af,a,b,this)};l.ie=function(a,b){Wh(this.tf,a,b,this)};l.Oe=function(a,b){Wh(this.Bf,a,b,this)};
l.rc=function(a,b){if(a=this.qc(a,b))return b=new S(null),gi(b,"XYZ",a),b};l.ri=function(a,b){if(a=P(null,this.Qb,a,b,this))return a};l.Se=function(a,b){if(a=this.qc(a,b))return b=new Oe(null),Pe(b,"XYZ",a),b};l.sc=function(a,b){if((a=P([null],this.Cc,a,b,this))&&a[0]){b=new z(null);var c=a[0],d=[c.length],e;var f=1;for(e=a.length;f<e;++f)ia(c,a[f]),d.push(c.length);Xe(b,"XYZ",c,d);return b}};l.qc=function(a,b){return P(null,this.Qb,a,b,this)};
l.wf={"http://www.opengis.net/gml":{pointMember:J(T.prototype.Ne),pointMembers:J(T.prototype.Ne)}};l.vf={"http://www.opengis.net/gml":{lineStringMember:J(T.prototype.ie),lineStringMembers:J(T.prototype.ie)}};l.xf={"http://www.opengis.net/gml":{polygonMember:J(T.prototype.Oe),polygonMembers:J(T.prototype.Oe)}};l.Af={"http://www.opengis.net/gml":{Point:J(T.prototype.qc)}};l.tf={"http://www.opengis.net/gml":{LineString:J(T.prototype.rc)}};l.Bf={"http://www.opengis.net/gml":{Polygon:J(T.prototype.sc)}};
l.Sb={"http://www.opengis.net/gml":{LinearRing:L(T.prototype.ri)}};l.pd=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};b&&Za(c,$h(this,a,b));return this.Kb(a,[c])||[]};l.uc=function(a){return Ab(this.srsName?this.srsName:a.firstElementChild.getAttribute("srsName"))};function Ji(a){a=Nh(a);return Ki(a)}function Ki(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function Li(a){a=Nh(a);a=Date.parse(a);return isNaN(a)?void 0:a/1E3}function Mi(a){a=Nh(a);return Ni(a)}function Ni(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function Oi(a){a=Nh(a);return Pi(a)}function Pi(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function V(a){return Nh(a).trim()}function Qi(a,b){W(a,b?"1":"0")}
function Ri(a,b){a.appendChild(Lh.createTextNode(b.toPrecision()))}function Si(a,b){a.appendChild(Lh.createTextNode(b.toString()))}function W(a,b){a.appendChild(Lh.createTextNode(b))};function X(a){a=a?a:{};T.call(this,a);this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd";this.hasZ=void 0!==a.hasZ?a.hasZ:!1}t(X,T);l=X.prototype;l.vi=function(a,b){if(a=P([],this.uf,a,b,this))return b=new hi(null),ji(b,a),b};l.wi=function(a,b){if(a=P([],this.yf,a,b,this))return b=new mi(null),pi(b,a),b};l.Wd=function(a,b){Wh(this.qf,a,b,this)};l.gf=function(a,b){Wh(this.Df,a,b,this)};
l.xi=function(a,b){return P([null],this.zf,a,b,this)};l.zi=function(a,b){return P([null],this.Cf,a,b,this)};l.yi=function(a,b){return P([null],this.Cc,a,b,this)};l.ui=function(a,b){return P([null],this.Qb,a,b,this)};l.Rg=function(a,b){(a=P(void 0,this.Sb,a,b,this))&&b[b.length-1].push(a)};l.$f=function(a,b){(a=P(void 0,this.Sb,a,b,this))&&(b[b.length-1][0]=a)};
l.Xe=function(a,b){if((a=P([null],this.Ef,a,b,this))&&a[0]){b=new z(null);var c=a[0],d=[c.length],e;var f=1;for(e=a.length;f<e;++f)ia(c,a[f]),d.push(c.length);Xe(b,"XYZ",c,d);return b}};l.Pe=function(a,b){if(a=P([null],this.rf,a,b,this))return b=new S(null),gi(b,"XYZ",a),b};l.pi=function(a,b){a=P([null],this.sf,a,b,this);return Na(a[1][0],a[1][1],a[2][0],a[2][1])};
l.si=function(a,b){var c=Nh(a),d=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;a=[];for(var e;e=d.exec(c);)a.push(parseFloat(e[1])),c=c.substr(e[0].length);if(""===c){b=b[0].srsName;c="enu";b&&(c=Ab(b).b);if("neu"===c)for(b=0,c=a.length;b<c;b+=3)d=a[b],a[b]=a[b+1],a[b+1]=d;b=a.length;2==b&&a.push(0);if(b)return a}};
l.sd=function(a,b){var c=Nh(a).replace(/^\s*|\s*$/g,""),d=b[0].srsName,e=a.parentNode.getAttribute("srsDimension");b="enu";d&&(b=Ab(d).b);c=c.split(/\s+/);d=2;a.getAttribute("srsDimension")?d=Pi(a.getAttribute("srsDimension")):a.getAttribute("dimension")?d=Pi(a.getAttribute("dimension")):e&&(d=Pi(e));for(var f,g=[],h=0,k=c.length;h<k;h+=d)a=parseFloat(c[h]),e=parseFloat(c[h+1]),f=3===d?parseFloat(c[h+2]):0,"en"===b.substr(0,2)?g.push(a,e,f):g.push(e,a,f);return g};
l.Qb={"http://www.opengis.net/gml":{pos:L(X.prototype.si),posList:L(X.prototype.sd)}};l.Cc={"http://www.opengis.net/gml":{interior:X.prototype.Rg,exterior:X.prototype.$f}};
l.Ed={"http://www.opengis.net/gml":{Point:L(T.prototype.We),MultiPoint:L(T.prototype.Ue),LineString:L(T.prototype.rc),MultiLineString:L(T.prototype.Te),LinearRing:L(T.prototype.Se),Polygon:L(T.prototype.sc),MultiPolygon:L(T.prototype.Ve),Surface:L(X.prototype.Xe),MultiSurface:L(X.prototype.wi),Curve:L(X.prototype.Pe),MultiCurve:L(X.prototype.vi),Envelope:L(X.prototype.pi)}};l.uf={"http://www.opengis.net/gml":{curveMember:J(X.prototype.Wd),curveMembers:J(X.prototype.Wd)}};
l.yf={"http://www.opengis.net/gml":{surfaceMember:J(X.prototype.gf),surfaceMembers:J(X.prototype.gf)}};l.qf={"http://www.opengis.net/gml":{LineString:J(T.prototype.rc),Curve:J(X.prototype.Pe)}};l.Df={"http://www.opengis.net/gml":{Polygon:J(T.prototype.sc),Surface:J(X.prototype.Xe)}};l.Ef={"http://www.opengis.net/gml":{patches:L(X.prototype.xi)}};l.rf={"http://www.opengis.net/gml":{segments:L(X.prototype.zi)}};l.sf={"http://www.opengis.net/gml":{lowerCorner:J(X.prototype.sd),upperCorner:J(X.prototype.sd)}};
l.zf={"http://www.opengis.net/gml":{PolygonPatch:L(X.prototype.yi)}};l.Cf={"http://www.opengis.net/gml":{LineStringSegment:L(X.prototype.ui)}};function Ti(a,b,c){var d=c[c.length-1];c=d.hasZ;d=d.srsName;b=b.G();for(var e=b.length,f=Array(e),g,h=0;h<e;++h){g=b[h];var k=h,m=c,n="enu";d&&(n=Ab(d).b);n="en"===n.substr(0,2)?g[0]+" "+g[1]:g[1]+" "+g[0];m&&(n+=" "+(g[2]||0));f[k]=n}W(a,f.join(" "))}
l.Ae=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=Mh(a.namespaceURI,"pos");a.appendChild(d);c=c[c.length-1];a=c.hasZ;var e=c.srsName;c="enu";e&&(c=Ab(e).b);b=b.G();c="en"===c.substr(0,2)?b[0]+" "+b[1]:b[1]+" "+b[0];a&&(c+=" "+(b[2]||0));W(d,c)};var Ui={"http://www.opengis.net/gml":{lowerCorner:N(W),upperCorner:N(W)}};l=X.prototype;
l.Ah=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);Q({node:a},Ui,Uh,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)};l.xe=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=Mh(a.namespaceURI,"posList");a.appendChild(d);Ti(d,b,c)};l.zh=function(a,b){a=b[b.length-1];b=a.node;var c=a.exteriorWritten;void 0===c&&(a.exteriorWritten=!0);return Mh(b.namespaceURI,void 0!==c?"interior":"exterior")};
l.jc=function(a,b,c){var d=c[c.length-1],e=d.hasZ;d=d.srsName;"PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=$e(b),Q({node:a,hasZ:e,srsName:d},Vi,this.zh,b,c,void 0,this)):"Surface"===a.nodeName&&(e=Mh(a.namespaceURI,"patches"),a.appendChild(e),a=Mh(e.namespaceURI,"PolygonPatch"),e.appendChild(a),this.jc(a,b,c))};
l.ic=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=Mh(a.namespaceURI,"posList"),a.appendChild(d),Ti(d,b,c)):"Curve"===a.nodeName&&(d=Mh(a.namespaceURI,"segments"),a.appendChild(d),a=Mh(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.ic(a,b,c))};
l.ze=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.surface;f&&a.setAttribute("srsName",f);b=oi(b);Q({node:a,hasZ:e,srsName:f,surface:d},Wi,this.a,b,c,void 0,this)};l.Bh=function(a,b,c){var d=c[c.length-1],e=d.srsName;d=d.hasZ;e&&a.setAttribute("srsName",e);b=li(b);Q({node:a,hasZ:d,srsName:e},Xi,Sh("pointMember"),b,c,void 0,this)};
l.ye=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.curve;f&&a.setAttribute("srsName",f);b=b.jb();Q({node:a,hasZ:e,srsName:f,curve:d},Yi,this.a,b,c,void 0,this)};l.Be=function(a,b,c){var d=Mh(a.namespaceURI,"LinearRing");a.appendChild(d);this.xe(d,b,c)};l.Ce=function(a,b,c){var d=this.f(b,c);d&&(a.appendChild(d),this.jc(d,b,c))};l.Ch=function(a,b,c){var d=Mh(a.namespaceURI,"Point");a.appendChild(d);this.Ae(d,b,c)};
l.we=function(a,b,c){var d=this.f(b,c);d&&(a.appendChild(d),this.ic(d,b,c))};l.ve=function(a,b,c){var d=c[c.length-1],e=Za({},d);e.node=a;var f;Array.isArray(b)?d.dataProjection?f=Gb(b,d.featureProjection,d.dataProjection):f=b:f=bi(b,!0,d);Q(e,Zi,this.f,[f],c,void 0,this)};
var Wi={"http://www.opengis.net/gml":{surfaceMember:N(X.prototype.Ce),polygonMember:N(X.prototype.Ce)}},Xi={"http://www.opengis.net/gml":{pointMember:N(X.prototype.Ch)}},Yi={"http://www.opengis.net/gml":{lineStringMember:N(X.prototype.we),curveMember:N(X.prototype.we)}},Vi={"http://www.opengis.net/gml":{exterior:N(X.prototype.Be),interior:N(X.prototype.Be)}},Zi={"http://www.opengis.net/gml":{Curve:N(X.prototype.ic),MultiCurve:N(X.prototype.ye),Point:N(X.prototype.Ae),MultiPoint:N(X.prototype.Bh),
LineString:N(X.prototype.ic),MultiLineString:N(X.prototype.ye),LinearRing:N(X.prototype.xe),Polygon:N(X.prototype.jc),MultiPolygon:N(X.prototype.ze),Surface:N(X.prototype.jc),MultiSurface:N(X.prototype.ze),Envelope:N(X.prototype.Ah)}},$i={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};X.prototype.a=function(a,b){return Mh("http://www.opengis.net/gml",$i[b[b.length-1].node.nodeName])};
X.prototype.f=function(a,b){var c=b[b.length-1];b=c.multiSurface;var d=c.surface,e=c.curve;c=c.multiCurve;Array.isArray(a)?a="Envelope":(a=a.I(),"MultiPolygon"===a&&!0===b?a="MultiSurface":"Polygon"===a&&!0===d?a="Surface":"LineString"===a&&!0===e?a="Curve":"MultiLineString"===a&&!0===c&&(a="MultiCurve"));return Mh("http://www.opengis.net/gml",a)};function aj(a){a=a?a:{};T.call(this,a);this.b["http://www.opengis.net/gml"].featureMember=J(T.prototype.Kb);this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}t(aj,T);l=aj.prototype;
l.Re=function(a,b){a=Nh(a).replace(/^\s*|\s*$/g,"");var c=b[0].srsName;b="enu";c&&(c=Ab(c))&&(b=c.b);a=a.trim().split(/\s+/);for(var d,e,f=[],g=0,h=a.length;g<h;g++)e=a[g].split(/,+/),c=parseFloat(e[0]),d=parseFloat(e[1]),e=3===e.length?parseFloat(e[2]):0,"en"===b.substr(0,2)?f.push(c,d,e):f.push(d,c,e);return f};l.ni=function(a,b){a=P([null],this.pf,a,b,this);return Na(a[1][0],a[1][1],a[1][3],a[1][4])};l.Pg=function(a,b){(a=P(void 0,this.Sb,a,b,this))&&b[b.length-1].push(a)};
l.Zh=function(a,b){(a=P(void 0,this.Sb,a,b,this))&&(b[b.length-1][0]=a)};l.Qb={"http://www.opengis.net/gml":{coordinates:L(aj.prototype.Re)}};l.Cc={"http://www.opengis.net/gml":{innerBoundaryIs:aj.prototype.Pg,outerBoundaryIs:aj.prototype.Zh}};l.pf={"http://www.opengis.net/gml":{coordinates:J(aj.prototype.Re)}};
l.Ed={"http://www.opengis.net/gml":{Point:L(T.prototype.We),MultiPoint:L(T.prototype.Ue),LineString:L(T.prototype.rc),MultiLineString:L(T.prototype.Te),LinearRing:L(T.prototype.Se),Polygon:L(T.prototype.sc),MultiPolygon:L(T.prototype.Ve),Box:L(aj.prototype.ni)}};
l.gd=function(a,b){var c=b[b.length-1];b=c.multiSurface;var d=c.surface;c=c.multiCurve;Array.isArray(a)?a="Envelope":(a=a.I(),"MultiPolygon"===a&&!0===b?a="MultiSurface":"Polygon"===a&&!0===d?a="Surface":"MultiLineString"===a&&!0===c&&(a="MultiCurve"));return Mh("http://www.opengis.net/gml",a)};l.ne=function(a,b,c){var d=c[c.length-1],e=Za({},d);e.node=a;var f;Array.isArray(b)?d.dataProjection?f=Gb(b,d.featureProjection,d.dataProjection):f=b:f=bi(b,!0,d);Q(e,bj,this.gd,[f],c,void 0,this)};
l.gc=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=cj(a.namespaceURI),a.appendChild(d),dj(d,b,c)):"Curve"===a.nodeName&&(d=Mh(a.namespaceURI,"segments"),a.appendChild(d),a=Mh(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.gc(a,b,c))};function cj(a){a=Mh(a,"coordinates");a.setAttribute("decimal",".");a.setAttribute("cs",",");a.setAttribute("ts"," ");return a}
function dj(a,b,c){var d=c[c.length-1];c=d.hasZ;d=d.srsName;b=b.G();for(var e=b.length,f=Array(e),g,h=0;h<e;++h)g=b[h],f[h]=ej(g,d,c);W(a,f.join(" "))}
l.hc=function(a,b,c){var d=c[c.length-1],e=d.hasZ;d=d.srsName;"PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=$e(b),Q({node:a,hasZ:e,srsName:d},fj,this.vh,b,c,void 0,this)):"Surface"===a.nodeName&&(e=Mh(a.namespaceURI,"patches"),a.appendChild(e),a=Mh(e.namespaceURI,"PolygonPatch"),e.appendChild(a),this.hc(a,b,c))};
l.vh=function(a,b){a=b[b.length-1];b=a.node;var c=a.exteriorWritten;void 0===c&&(a.exteriorWritten=!0);return Mh(b.namespaceURI,void 0!==c?"innerBoundaryIs":"outerBoundaryIs")};l.te=function(a,b,c){var d=Mh(a.namespaceURI,"LinearRing");a.appendChild(d);this.pe(d,b,c)};function ej(a,b,c){var d="enu";b&&(d=Ab(b).b);b="en"===d.substr(0,2)?a[0]+","+a[1]:a[1]+","+a[0];c&&(b+=","+(a[2]||0));return b}
l.qe=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.curve;f&&a.setAttribute("srsName",f);b=b.jb();Q({node:a,hasZ:e,srsName:f,curve:d},gj,this.f,b,c,void 0,this)};l.se=function(a,b,c){var d=c[c.length-1];c=d.hasZ;var e=d.srsName;e&&a.setAttribute("srsName",e);d=cj(a.namespaceURI);a.appendChild(d);a=b.G();a=ej(a,e,c);W(d,a)};l.xh=function(a,b,c){var d=c[c.length-1],e=d.hasZ;(d=d.srsName)&&a.setAttribute("srsName",d);b=li(b);Q({node:a,hasZ:e,srsName:d},hj,Sh("pointMember"),b,c,void 0,this)};
l.yh=function(a,b,c){var d=Mh(a.namespaceURI,"Point");a.appendChild(d);this.se(d,b,c)};l.oe=function(a,b,c){var d=this.gd(b,c);d&&(a.appendChild(d),this.gc(d,b,c))};l.pe=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=cj(a.namespaceURI);a.appendChild(d);dj(d,b,c)};l.re=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.surface;f&&a.setAttribute("srsName",f);b=oi(b);Q({node:a,hasZ:e,srsName:f,surface:d},ij,this.f,b,c,void 0,this)};
l.ue=function(a,b,c){var d=this.gd(b,c);d&&(a.appendChild(d),this.hc(d,b,c))};l.wh=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);Q({node:a},jj,Uh,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)};
var bj={"http://www.opengis.net/gml":{Curve:N(aj.prototype.gc),MultiCurve:N(aj.prototype.qe),Point:N(aj.prototype.se),MultiPoint:N(aj.prototype.xh),LineString:N(aj.prototype.gc),MultiLineString:N(aj.prototype.qe),LinearRing:N(aj.prototype.pe),Polygon:N(aj.prototype.hc),MultiPolygon:N(aj.prototype.re),Surface:N(aj.prototype.hc),MultiSurface:N(aj.prototype.re),Envelope:N(aj.prototype.wh)}},fj={"http://www.opengis.net/gml":{outerBoundaryIs:N(aj.prototype.te),innerBoundaryIs:N(aj.prototype.te)}},hj={"http://www.opengis.net/gml":{pointMember:N(aj.prototype.yh)}},
gj={"http://www.opengis.net/gml":{lineStringMember:N(aj.prototype.oe),curveMember:N(aj.prototype.oe)}};aj.prototype.f=function(a,b){return Mh("http://www.opengis.net/gml",kj[b[b.length-1].node.nodeName])};var kj={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},ij={"http://www.opengis.net/gml":{surfaceMember:N(aj.prototype.ue),polygonMember:N(aj.prototype.ue)}},jj={"http://www.opengis.net/gml":{lowerCorner:N(W),upperCorner:N(W)}};var lj=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function mj(a,b,c,d){a.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(a.push(d.ele),delete d.ele,b.hasZ=!0):a.push(0);"time"in d?(a.push(d.time),delete d.time,b.hasM=!0):a.push(0);return a}
function nj(a,b,c){var d="XY",e=2;a.hasZ&&a.hasM?(d="XYZM",e=4):a.hasZ?(d="XYZ",e=3):a.hasM&&(d="XYM",e=3);if(4!==e){var f;var g=0;for(f=b.length/4;g<f;g++)b[g*e]=b[4*g],b[g*e+1]=b[4*g+1],a.hasZ&&(b[g*e+2]=b[4*g+2]),a.hasM&&(b[g*e+2]=b[4*g+3]);b.length=b.length/4*e;if(c)for(g=0,f=c.length;g<f;g++)c[g]=c[g]/4*e}return d}function oj(a,b){var c=b[b.length-1],d=a.getAttribute("href");null!==d&&(c.link=d);Wh(pj,a,b)}function qj(a,b){b[b.length-1].extensionsNode_=a}
O(lj,{rte:J(function(a,b){var c=b[0];if(a=P({flatCoordinates:[],layoutOptions:{}},rj,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.layoutOptions;delete a.layoutOptions;d=nj(d,b);var e=new S(null);gi(e,d,b);bi(e,!1,c);c=new E(e);c.qa(a);return c}}),trk:J(function(a,b){var c=b[0];if(a=P({flatCoordinates:[],ends:[],layoutOptions:{}},sj,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.ends;delete a.ends;var e=a.layoutOptions;delete a.layoutOptions;e=nj(e,b,d);var f=new hi(null);
ii(f,e,b,d);bi(f,!1,c);c=new E(f);c.qa(a);return c}}),wpt:J(function(a,b){var c=b[0];if(b=P({},tj,a,b)){var d={};a=mj([],d,a,b);d=nj(d,a);a=new Qe(a,d);bi(a,!1,c);c=new E(a);c.qa(b);return c}})});
var pj=O(lj,{text:M(V,"linkText"),type:M(V,"linkType")}),rj=O(lj,{name:M(V),cmt:M(V),desc:M(V),src:M(V),link:oj,number:M(Oi),extensions:qj,type:M(V),rtept:function(a,b){var c=P({},uj,a,b);c&&(b=b[b.length-1],mj(b.flatCoordinates,b.layoutOptions,a,c))}}),uj=O(lj,{ele:M(Mi),time:M(Li)}),sj=O(lj,{name:M(V),cmt:M(V),desc:M(V),src:M(V),link:oj,number:M(Oi),type:M(V),extensions:qj,trkseg:function(a,b){var c=b[b.length-1];Wh(vj,a,b);c.ends.push(c.flatCoordinates.length)}}),vj=O(lj,{trkpt:function(a,b){var c=
P({},wj,a,b);c&&(b=b[b.length-1],mj(b.flatCoordinates,b.layoutOptions,a,c))}}),wj=O(lj,{ele:M(Mi),time:M(Li)}),tj=O(lj,{ele:M(Mi),time:M(Li),magvar:M(Mi),geoidheight:M(Mi),name:M(V),cmt:M(V),desc:M(V),src:M(V),link:oj,sym:M(V),type:M(V),fix:M(V),sat:M(Oi),hdop:M(Mi),vdop:M(Mi),pdop:M(Mi),ageofdgpsdata:M(Mi),dgpsid:M(Oi),extensions:qj});function xj(a,b,c){a.setAttribute("href",b);b=c[c.length-1].properties;Q({node:a},yj,Uh,[b.linkText,b.linkType],c,zj)}
function Aj(a,b,c){var d=c[c.length-1],e=d.node.namespaceURI,f=d.properties;a.setAttributeNS(null,"lat",b[1]);a.setAttributeNS(null,"lon",b[0]);switch(d.geometryLayout){case "XYZM":b[3]&&(f.time=b[3]);case "XYZ":b[2]&&(f.ele=b[2]);break;case "XYM":b[2]&&(f.time=b[2])}b="rtept"==a.nodeName?Bj[e]:Cj[e];d=Vh(f,b);Q({node:a,properties:f},Dj,Uh,d,c,b)}
var zj=["text","type"],yj=O(lj,{text:N(W),type:N(W)}),Ej=O(lj,"name cmt desc src link number type rtept".split(" ")),Fj=O(lj,{name:N(W),cmt:N(W),desc:N(W),src:N(W),link:N(xj),number:N(Si),type:N(W),rtept:Rh(N(Aj))}),Bj=O(lj,["ele","time"]),Gj=O(lj,"name cmt desc src link number type trkseg".split(" ")),Jj=O(lj,{name:N(W),cmt:N(W),desc:N(W),src:N(W),link:N(xj),number:N(Si),type:N(W),trkseg:Rh(N(function(a,b,c){Q({node:a,geometryLayout:b.W,properties:{}},Hj,Ij,b.G(),c)}))}),Ij=Sh("trkpt"),Hj=O(lj,{trkpt:N(Aj)}),
Cj=O(lj,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),Dj=O(lj,{ele:N(Ri),time:N(function(a,b){b=new Date(1E3*b);a.appendChild(Lh.createTextNode(b.getUTCFullYear()+"-"+he(b.getUTCMonth()+1)+"-"+he(b.getUTCDate())+"T"+he(b.getUTCHours())+":"+he(b.getUTCMinutes())+":"+he(b.getUTCSeconds())+"Z"))}),magvar:N(Ri),geoidheight:N(Ri),name:N(W),cmt:N(W),desc:N(W),src:N(W),link:N(xj),sym:N(W),type:N(W),fix:N(W),sat:N(Si),hdop:N(Ri),vdop:N(Ri),
pdop:N(Ri),ageofdgpsdata:N(Ri),dgpsid:N(Si)});
O(lj,{rte:N(function(a,b,c){var d=c[0],e=b.Ca();a={node:a,properties:e};if(b=b.P())b=bi(b,!0,d),a.geometryLayout=b.W,e.rtept=b.G();d=Ej[c[c.length-1].node.namespaceURI];e=Vh(e,d);Q(a,Fj,Uh,e,c,d)}),trk:N(function(a,b,c){var d=c[0],e=b.Ca();a={node:a,properties:e};if(b=b.P())b=bi(b,!0,d),e.trkseg=b.jb();d=Gj[c[c.length-1].node.namespaceURI];e=Vh(e,d);Q(a,Jj,Uh,e,c,d)}),wpt:N(function(a,b,c){var d=c[0],e=c[c.length-1];e.properties=b.Ca();if(b=b.P())b=bi(b,!0,d),e.geometryLayout=b.W,Aj(a,b.G(),c)})});function Kj(){Zh.call(this)}t(Kj,Zh);l=Kj.prototype;l.I=function(){return"text"};l.pc=function(a,b){b=ai(this,b);(a=Lj("string"===typeof a?a:"",b))?(b=new E,b.xa(a),a=b):a=null;return a};l.Ra=function(a,b){var c=ai(this,b);b=[];a=Lj("string"===typeof a?a:"",c);this.b&&"GeometryCollection"==a.I()?b=a.a:b=[a];c=[];for(var d=0,e=b.length;d<e;++d)a=new E,a.xa(b[d]),c.push(a);return c};l.tc=function(){return this.defaultDataProjection};l.Ad=function(a,b){b=ai(this,b);return(a=a.P())?Mj(bi(a,!0,b)):""};function Nj(a,b,c,d,e,f){kc.call(this);this.g=null;this.N=a?a:new Image;null!==d&&(this.N.crossOrigin=d);this.a=f?document.createElement("CANVAS"):null;this.i=f;this.c=null;this.j=e;this.b=c;this.B=b;this.l=!1;2==this.j&&Oj(this)}t(Nj,kc);function Oj(a){var b=Hc(1,1);try{b.drawImage(a.N,0,0),b.getImageData(0,0,1,1)}catch(c){a.l=!0}}Nj.prototype.s=function(){this.j=3;this.c.forEach(Zb);this.c=null;this.f("change")};
Nj.prototype.L=function(){this.j=2;this.b&&(this.N.width=this.b[0],this.N.height=this.b[1]);this.b=[this.N.width,this.N.height];this.c.forEach(Zb);this.c=null;Oj(this);if(!this.l&&null!==this.i){this.a.width=this.N.width;this.a.height=this.N.height;var a=this.a.getContext("2d");a.drawImage(this.N,0,0);for(var b=a.getImageData(0,0,this.N.width,this.N.height),c=b.data,d=this.i[0]/255,e=this.i[1]/255,f=this.i[2]/255,g=0,h=c.length;g<h;g+=4)c[g]*=d,c[g+1]*=e,c[g+2]*=f;a.putImageData(b,0,0)}this.f("change")};
Nj.prototype.ha=function(){return this.a?this.a:this.N};Nj.prototype.load=function(){if(0==this.j){this.j=1;this.c=[y(this.N,"error",this.s,this,!0),y(this.N,"load",this.L,this,!0)];try{this.N.src=this.B}catch(a){this.s()}}};function Pj(a){a=a||{};this.i=void 0!==a.anchor?a.anchor:[.5,.5];this.B=null;this.f=void 0!==a.anchorOrigin?a.anchorOrigin:"top-left";this.u=void 0!==a.anchorXUnits?a.anchorXUnits:"fraction";this.C=void 0!==a.anchorYUnits?a.anchorYUnits:"fraction";this.ea=void 0!==a.crossOrigin?a.crossOrigin:null;var b=void 0!==a.img?a.img:null,c=void 0!==a.imgSize?a.imgSize:null,d=a.src;w(!(void 0!==d&&b),4);w(!b||b&&c,5);void 0!==d&&d.length||!b||(d=b.src||v(b).toString());w(void 0!==d&&0<d.length,6);var e=void 0!==
a.src?0:2;if(void 0!==a.color){var f=a.color;f=Array.isArray(f)?f:Fc(f)}else f=null;this.g=f;f=this.ea;var g=this.g,h=ug.get(d,f,g);h||(h=new Nj(b,d,c,f,e,g),ug.set(d,f,g,h));this.b=h;this.fa=void 0!==a.offset?a.offset:[0,0];this.j=void 0!==a.offsetOrigin?a.offsetOrigin:"top-left";this.L=null;this.D=void 0!==a.size?a.size:null;zh.call(this,{opacity:void 0!==a.opacity?a.opacity:1,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:
!0,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1})}t(Pj,zh);l=Pj.prototype;
l.clone=function(){var a=this.ha(1);if(2===this.b.j)if("IMG"===a.tagName.toUpperCase())var b=a.cloneNode(!0);else{b=document.createElement("canvas");var c=b.getContext("2d");b.width=a.width;b.height=a.height;c.drawImage(a,0,0)}return new Pj({anchor:this.i.slice(),anchorOrigin:this.f,anchorXUnits:this.u,anchorYUnits:this.C,crossOrigin:this.ea,color:this.g&&this.g.slice?this.g.slice():this.g||void 0,img:b?b:void 0,imgSize:b?this.b.b.slice():void 0,src:b?void 0:this.b.B,offset:this.fa.slice(),offsetOrigin:this.j,
size:null!==this.D?this.D.slice():void 0,opacity:this.c,scale:this.a,snapToPixel:this.s,rotation:this.l,rotateWithView:this.v})};
l.$b=function(){if(this.B)return this.B;var a=this.i,b=this.qb();if("fraction"==this.u||"fraction"==this.C){if(!b)return null;a=this.i.slice();"fraction"==this.u&&(a[0]*=b[0]);"fraction"==this.C&&(a[1]*=b[1])}if("top-left"!=this.f){if(!b)return null;a===this.i&&(a=this.i.slice());if("top-right"==this.f||"bottom-right"==this.f)a[0]=-a[0]+b[0];if("bottom-left"==this.f||"bottom-right"==this.f)a[1]=-a[1]+b[1]}return this.B=a};l.ha=function(a){return this.b.ha(a)};l.ce=function(){return this.b.b};
l.nc=function(){return this.b.j};l.Ke=function(){var a=this.b;if(!a.g)if(a.l){var b=a.b[0],c=a.b[1],d=Hc(b,c);d.fillRect(0,0,b,c);a.g=d.canvas}else a.g=a.N;return a.g};l.oc=function(){if(this.L)return this.L;var a=this.fa;if("top-left"!=this.j){var b=this.qb(),c=this.b.b;if(!b||!c)return null;a=a.slice();if("top-right"==this.j||"bottom-right"==this.j)a[0]=c[0]-b[0]-a[0];if("bottom-left"==this.j||"bottom-right"==this.j)a[1]=c[1]-b[1]-a[1]}return this.L=a};l.qb=function(){return this.D?this.D:this.b.b};
l.je=function(a,b){return y(this.b,"change",a,b)};l.load=function(){this.b.load()};l.hf=function(a,b){dc(this.b,"change",a,b)};function Qj(a){a=a||{};this.f=a.font;this.i=a.rotation;this.c=a.rotateWithView;this.b=a.scale;this.da=a.text;this.g=a.textAlign;this.B=a.textBaseline;this.ma=void 0!==a.fill?a.fill:new Dh({color:"#333"});this.ja=void 0!==a.stroke?a.stroke:null;this.j=void 0!==a.offsetX?a.offsetX:0;this.a=void 0!==a.offsetY?a.offsetY:0}l=Qj.prototype;
l.clone=function(){return new Qj({font:this.f,rotation:this.i,rotateWithView:this.c,scale:this.b,text:this.oa(),textAlign:this.g,textBaseline:this.B,fill:this.ra()?this.ra().clone():void 0,stroke:this.na()?this.na().clone():void 0,offsetX:this.j,offsetY:this.a})};l.ra=function(){return this.ma};l.na=function(){return this.ja};l.oa=function(){return this.da};l.$e=function(a){this.ma=a};l.cf=function(a){this.ja=a};l.df=function(a){this.da=a};var Rj=["http://www.google.com/kml/ext/2.2"],Y=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Sj={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"};function Tj(a){a=Nh(a);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]}
function Uj(a){a=Nh(a);for(var b=[],c=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,d;d=c.exec(a);)b.push(parseFloat(d[1]),parseFloat(d[2]),d[3]?parseFloat(d[3]):0),a=a.substr(d[0].length);if(""===a)return b}function Vj(a){var b=Nh(a).trim();return a.baseURI&&"about:blank"!==a.baseURI?(new URL(b,a.baseURI)).href:b}function Wj(a){return Mi(a)}function Xj(a,b){return P(null,Yj,a,b)}
function Zj(a,b){if(b=P({o:[],nf:[]},ak,a,b)){a=b.o;b=b.nf;var c;var d=0;for(c=Math.min(a.length,b.length);d<c;++d)a[4*d+3]=b[d];b=new S(null);gi(b,"XYZM",a);return b}}function bk(a,b){var c=P({},ck,a,b);if(a=P(null,dk,a,b))return b=new S(null),gi(b,"XYZ",a),b.qa(c),b}function fk(a,b){var c=P({},ck,a,b);if(a=P(null,dk,a,b))return b=new z(null),Xe(b,"XYZ",a,[a.length]),b.qa(c),b}
function gk(a,b){a=P([],hk,a,b);if(!a)return null;if(!a.length)return new vi(a);var c=!0,d=a[0].I(),e;var f=1;for(e=a.length;f<e;++f)if(b=a[f],b.I()!=d){c=!1;break}if(c)if("Point"==d){var g=a[0];c=g.W;d=g.o;f=1;for(e=a.length;f<e;++f)b=a[f],ia(d,b.o);b=g=new ki(null);ye(b,c,d);b.b();ik(g,a)}else"LineString"==d?(g=new hi(null),ji(g,a),ik(g,a)):"Polygon"==d?(g=new mi(null),pi(g,a),ik(g,a)):"GeometryCollection"==d?g=new vi(a):w(!1,37);else g=new vi(a);return g}
function jk(a,b){var c=P({},ck,a,b);if(a=P(null,dk,a,b))return b=new Qe(null),ye(b,"XYZ",a),b.b(),b.qa(c),b}function kk(a,b){var c=P({},ck,a,b);if((a=P([null],lk,a,b))&&a[0]){b=new z(null);var d=a[0],e=[d.length],f;var g=1;for(f=a.length;g<f;++g)ia(d,a[g]),e.push(d.length);Xe(b,"XYZ",d,e);b.qa(c);return b}}
function mk(a,b){b=P({},nk,a,b);if(!b)return null;a="fillStyle"in b?b.fillStyle:void 0;var c=b.fill;void 0===c||c||(a=null);(c="imageStyle"in b?b.imageStyle:void 0)||(c=void 0);var d="textStyle"in b?b.textStyle:void 0,e="strokeStyle"in b?b.strokeStyle:void 0;b=b.outline;void 0===b||b||(e=null);return[new Eh({fill:a,image:c,stroke:e,text:d,zIndex:void 0})]}
function ik(a,b){var c=b.length,d=Array(b.length),e=Array(b.length),f=Array(b.length),g,h,k;var m=h=k=!1;for(g=0;g<c;++g){var n=b[g];d[g]=n.get("extrude");e[g]=n.get("tessellate");f[g]=n.get("altitudeMode");m=m||void 0!==d[g];h=h||void 0!==e[g];k=k||f[g]}m&&a.set("extrude",d);h&&a.set("tessellate",e);k&&a.set("altitudeMode",f)}function ok(a,b){Wh(pk,a,b)}function qk(a,b){Wh(rk,a,b)}
var sk=O(Y,{displayName:M(V),value:M(V)}),pk=O(Y,{Data:function(a,b){var c=a.getAttribute("name");Wh(sk,a,b);a=b[b.length-1];null!==c?a[c]=a.value:null!==a.displayName&&(a[a.displayName]=a.value);delete a.value},SchemaData:function(a,b){Wh(tk,a,b)}}),rk=O(Y,{LatLonAltBox:function(a,b){if(a=P({},uk,a,b))b=b[b.length-1],b.extent=[parseFloat(a.west),parseFloat(a.south),parseFloat(a.east),parseFloat(a.north)],b.altitudeMode=a.altitudeMode,b.minAltitude=parseFloat(a.minAltitude),b.maxAltitude=parseFloat(a.maxAltitude)},
Lod:function(a,b){if(a=P({},vk,a,b))b=b[b.length-1],b.minLodPixels=parseFloat(a.minLodPixels),b.maxLodPixels=parseFloat(a.maxLodPixels),b.minFadeExtent=parseFloat(a.minFadeExtent),b.maxFadeExtent=parseFloat(a.maxFadeExtent)}}),uk=O(Y,{altitudeMode:M(V),minAltitude:M(Mi),maxAltitude:M(Mi),north:M(Mi),south:M(Mi),east:M(Mi),west:M(Mi)}),vk=O(Y,{minLodPixels:M(Mi),maxLodPixels:M(Mi),minFadeExtent:M(Mi),maxFadeExtent:M(Mi)}),ck=O(Y,{extrude:M(Ji),tessellate:M(Ji),altitudeMode:M(V)}),Yj=O(Y,{coordinates:L(Uj)}),
lk=O(Y,{innerBoundaryIs:function(a,b){(a=P(void 0,wk,a,b))&&b[b.length-1].push(a)},outerBoundaryIs:function(a,b){(a=P(void 0,xk,a,b))&&(b[b.length-1][0]=a)}}),ak=O(Y,{when:function(a,b){b=b[b.length-1].nf;a=Nh(a);a=Date.parse(a);b.push(isNaN(a)?0:a)}},O(Rj,{coord:function(a,b){b=b[b.length-1].o;a=Nh(a);(a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(a))?b.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),0):
b.push(0,0,0,0)}})),dk=O(Y,{coordinates:L(Uj)}),yk=O(Y,{href:M(Vj)},O(Rj,{x:M(Mi),y:M(Mi),w:M(Mi),h:M(Mi)})),zk=O(Y,{Icon:M(function(a,b){return(a=P({},yk,a,b))?a:null}),heading:M(Mi),hotSpot:M(function(a){var b=a.getAttribute("xunits"),c=a.getAttribute("yunits");var d="insetPixels"!==b?"insetPixels"!==c?"bottom-left":"top-left":"insetPixels"!==c?"bottom-right":"top-right";return{x:parseFloat(a.getAttribute("x")),Cd:Sj[b],y:parseFloat(a.getAttribute("y")),Dd:Sj[c],origin:d}}),scale:M(Wj)}),wk=O(Y,
{LinearRing:L(Xj)}),Ak=O(Y,{color:M(Tj),scale:M(Wj)}),Bk=O(Y,{color:M(Tj),width:M(Mi)}),hk=O(Y,{LineString:J(bk),LinearRing:J(fk),MultiGeometry:J(gk),Point:J(jk),Polygon:J(kk)}),Ck=O(Rj,{Track:J(Zj)});O(Y,{ExtendedData:ok,Region:qk,Link:function(a,b){Wh(Dk,a,b)},address:M(V),description:M(V),name:M(V),open:M(Ji),phoneNumber:M(V),visibility:M(Ji)});var Dk=O(Y,{href:M(Vj)}),xk=O(Y,{LinearRing:L(Xj)}),Ek=O(Y,{Style:M(mk),key:M(V),styleUrl:M(Vj)});
O(Y,{ExtendedData:ok,Region:qk,MultiGeometry:M(gk,"geometry"),LineString:M(bk,"geometry"),LinearRing:M(fk,"geometry"),Point:M(jk,"geometry"),Polygon:M(kk,"geometry"),Style:M(mk),StyleMap:function(a,b){if(a=P(void 0,Fk,a,b))b=b[b.length-1],Array.isArray(a)?b.Style=a:"string"===typeof a?b.styleUrl=a:w(!1,38)},address:M(V),description:M(V),name:M(V),open:M(Ji),phoneNumber:M(V),styleUrl:M(Vj),visibility:M(Ji)},O(Rj,{MultiTrack:M(function(a,b){if(a=P([],Ck,a,b))return b=new hi(null),ji(b,a),b},"geometry"),
Track:M(Zj,"geometry")}));
var Gk=O(Y,{color:M(Tj),fill:M(Ji),outline:M(Ji)}),tk=O(Y,{SimpleData:function(a,b){var c=a.getAttribute("name");null!==c&&(a=V(a),b[b.length-1][c]=a)}}),nk=O(Y,{IconStyle:function(a,b){if(a=P({},zk,a,b)){b=b[b.length-1];var c="Icon"in a?a.Icon:{},d=!("Icon"in a)||0<Object.keys(c).length,e,f=c.href;f?e=f:d&&(e=void 0);f="bottom-left";var g=a.hotSpot;if(g){var h=[g.x,g.y];var k=g.Cd;var m=g.Dd;f=g.origin}else void 0===e?m=k=h=void 0:/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(e)&&(h=[.5,0],m=
k="fraction");var n;g=c.x;var p=c.y;void 0!==g&&void 0!==p&&(n=[g,p]);var r;g=c.w;c=c.h;void 0!==g&&void 0!==c&&(r=[g,c]);var u;c=a.heading;void 0!==c&&(u=ya(c));a=a.scale;d?(void 0==e&&(r=void 0,void 0===a&&(a=void 0)),e=new Pj({anchor:h,anchorOrigin:f,anchorXUnits:k,anchorYUnits:m,crossOrigin:"anonymous",offset:n,offsetOrigin:"bottom-left",rotation:u,scale:a,size:r,src:e}),b.imageStyle=e):b.imageStyle=void 0}},LabelStyle:function(a,b){(a=P({},Ak,a,b))&&(b[b.length-1].textStyle=new Qj({fill:new Dh({color:"color"in
a?a.color:void 0}),scale:a.scale}))},LineStyle:function(a,b){(a=P({},Bk,a,b))&&(b[b.length-1].strokeStyle=new Yg({color:"color"in a?a.color:void 0,width:"width"in a?a.width:1}))},PolyStyle:function(a,b){if(a=P({},Gk,a,b)){b=b[b.length-1];b.fillStyle=new Dh({color:"color"in a?a.color:void 0});var c=a.fill;void 0!==c&&(b.fill=c);a=a.outline;void 0!==a&&(b.outline=a)}}}),Fk=O(Y,{Pair:function(a,b){if(a=P({},Ek,a,b)){var c=a.key;c&&"normal"==c&&((c=a.styleUrl)&&(b[b.length-1]=c),(a=a.Style)&&(b[b.length-
1]=a))}}});function Hk(a,b){b=Array.isArray(b)?b:Fc(b);b=[255*(4==b.length?b[3]:1),b[2],b[1],b[0]];var c;for(c=0;4>c;++c){var d=parseInt(b[c],10).toString(16);b[c]=1==d.length?"0"+d:d}W(a,b.join(""))}function Ik(a,b,c){a={node:a};var d=b.I();if("GeometryCollection"==d){var e=xi(b.a);var f=Jk}else"MultiPoint"==d?(e=li(b),f=Kk):"MultiLineString"==d?(e=b.jb(),f=Lk):"MultiPolygon"==d?(e=oi(b),f=Mk):w(!1,39);Q(a,Nk,f,e,c)}function Ok(a,b,c){Q({node:a},Pk,Qk,[b],c)}
function Rk(a,b,c){var d={node:a};b.a&&a.setAttribute("id",b.a);a=b.Ca();var e={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};e[b.c]=1;var f=Object.keys(a||{}).sort().filter(function(a){return!e[a]});if(0<f.length){var g=Vh(a,f);Q(d,Sk,Tk,[{names:f,values:g}],c)}if(f=b.ac())if(f=f.call(b,0))f=Array.isArray(f)?f[0]:f,this.b&&(a.Style=f),(f=f.oa())&&(a.name=f.oa());f=Uk[c[c.length-1].node.namespaceURI];a=Vh(a,f);Q(d,Sk,Uh,a,c,f);a=c[0];(b=b.P())&&(b=bi(b,!0,a));Q(d,Sk,
Jk,[b],c)}function Vk(a,b,c){var d=b.o;a={node:a};a.layout=b.W;a.stride=b.A;b=b.Ca();b.coordinates=d;d=Wk[c[c.length-1].node.namespaceURI];b=Vh(b,d);Q(a,Xk,Uh,b,c,d)}function Yk(a,b,c){b=$e(b);var d=b.shift();a={node:a};Q(a,Zk,$k,b,c);Q(a,Zk,al,[d],c)}function bl(a,b){Ri(a,Math.round(1E6*b)/1E6)}O(Y,["Document","Placemark"]);O(Y,{Document:N(function(a,b,c){Q({node:a},cl,dl,b,c,void 0,this)}),Placemark:N(Rk)});
var cl=O(Y,{Placemark:N(Rk)}),el=O(Y,{Data:N(function(a,b,c){a.setAttribute("name",b.name);a={node:a};b=b.value;"object"==typeof b?(null!==b&&b.displayName&&Q(a,el,Uh,[b.displayName],c,["displayName"]),null!==b&&b.value&&Q(a,el,Uh,[b.value],c,["value"])):Q(a,el,Uh,[b],c,["value"])}),value:N(function(a,b){W(a,b)}),displayName:N(function(a,b){a.appendChild(Lh.createCDATASection(b))})}),fl={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",
MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},gl=O(Y,["href"],O(Rj,["x","y","w","h"])),hl=O(Y,{href:N(W)},O(Rj,{x:N(Ri),y:N(Ri),w:N(Ri),h:N(Ri)})),il=O(Y,["scale","heading","Icon","hotSpot"]),kl=O(Y,{Icon:N(function(a,b,c){a={node:a};var d=gl[c[c.length-1].node.namespaceURI],e=Vh(b,d);Q(a,hl,Uh,e,c,d);d=gl[Rj[0]];e=Vh(b,d);Q(a,hl,jl,e,c,d)}),heading:N(Ri),hotSpot:N(function(a,b){a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("xunits",b.Cd);a.setAttribute("yunits",
b.Dd)}),scale:N(bl)}),ll=O(Y,["color","scale"]),ml=O(Y,{color:N(Hk),scale:N(bl)}),nl=O(Y,["color","width"]),pl=O(Y,{color:N(Hk),width:N(Ri)}),Pk=O(Y,{LinearRing:N(Vk)}),Nk=O(Y,{LineString:N(Vk),Point:N(Vk),Polygon:N(Yk),GeometryCollection:N(Ik)}),Uk=O(Y,"name open visibility address phoneNumber description styleUrl Style".split(" ")),Sk=O(Y,{ExtendedData:N(function(a,b,c){a={node:a};var d=b.names;b=b.values;for(var e=d.length,f=0;f<e;f++)Q(a,el,ql,[{name:d[f],value:b[f]}],c)}),MultiGeometry:N(Ik),
LineString:N(Vk),LinearRing:N(Vk),Point:N(Vk),Polygon:N(Yk),Style:N(function(a,b,c){a={node:a};var d={},e=b.ra(),f=b.na(),g=b.ha();b=b.oa();g instanceof Pj&&(d.IconStyle=g);b&&(d.LabelStyle=b);f&&(d.LineStyle=f);e&&(d.PolyStyle=e);b=rl[c[c.length-1].node.namespaceURI];d=Vh(d,b);Q(a,sl,Uh,d,c,b)}),address:N(W),description:N(W),name:N(W),open:N(Qi),phoneNumber:N(W),styleUrl:N(W),visibility:N(Qi)}),Wk=O(Y,["extrude","tessellate","altitudeMode","coordinates"]),Xk=O(Y,{extrude:N(Qi),tessellate:N(Qi),altitudeMode:N(W),
coordinates:N(function(a,b,c){c=c[c.length-1];var d=c.layout;c=c.stride;var e;"XY"==d||"XYM"==d?e=2:"XYZ"==d||"XYZM"==d?e=3:w(!1,34);var f,g=b.length,h="";if(0<g){h+=b[0];for(d=1;d<e;++d)h+=","+b[d];for(f=c;f<g;f+=c)for(h+=" "+b[f],d=1;d<e;++d)h+=","+b[f+d]}W(a,h)})}),Zk=O(Y,{outerBoundaryIs:N(Ok),innerBoundaryIs:N(Ok)}),tl=O(Y,{color:N(Hk)}),rl=O(Y,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),sl=O(Y,{IconStyle:N(function(a,b,c){a={node:a};var d={},e=b.qb(),f=b.ce(),g={href:b.b.B};if(e){g.w=
e[0];g.h=e[1];var h=b.$b(),k=b.oc();k&&f&&k[0]&&k[1]!==e[1]&&(g.x=k[0],g.y=f[1]-(k[1]+e[1]));!h||h[0]===e[0]/2&&h[1]===e[1]/2||(d.hotSpot={x:h[0],Cd:"pixels",y:e[1]-h[1],Dd:"pixels"})}d.Icon=g;e=b.a;1!==e&&(d.scale=e);(b=b.l)&&(d.heading=b);b=il[c[c.length-1].node.namespaceURI];d=Vh(d,b);Q(a,kl,Uh,d,c,b)}),LabelStyle:N(function(a,b,c){a={node:a};var d={},e=b.ra();e&&(d.color=e.b);(b=b.b)&&1!==b&&(d.scale=b);b=ll[c[c.length-1].node.namespaceURI];d=Vh(d,b);Q(a,ml,Uh,d,c,b)}),LineStyle:N(function(a,
b,c){a={node:a};var d=nl[c[c.length-1].node.namespaceURI];b=Vh({color:b.b,width:b.a},d);Q(a,pl,Uh,b,c,d)}),PolyStyle:N(function(a,b,c){Q({node:a},tl,ul,[b.b],c)})});function jl(a,b,c){return Mh(Rj[0],"gx:"+c)}function dl(a,b){return Mh(b[b.length-1].node.namespaceURI,"Placemark")}function Jk(a,b){if(a)return Mh(b[b.length-1].node.namespaceURI,fl[a.I()])}
var ul=Sh("color"),ql=Sh("Data"),Tk=Sh("ExtendedData"),$k=Sh("innerBoundaryIs"),Kk=Sh("Point"),Lk=Sh("LineString"),Qk=Sh("LinearRing"),Mk=Sh("Polygon"),al=Sh("outerBoundaryIs");Zg.Rb=function(){};
(function(a){function b(a){this.Ta=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0);this.type=this.M=0;this.length=this.Ta.length}function c(a,b,c){var e=c.Ta;var f=e[c.M++];var g=(f&112)>>4;if(128>f)return d(a,g,b);f=e[c.M++];g|=(f&127)<<3;if(128>f)return d(a,g,b);f=e[c.M++];g|=(f&127)<<10;if(128>f)return d(a,g,b);f=e[c.M++];g|=(f&127)<<17;if(128>f)return d(a,g,b);f=e[c.M++];g|=(f&127)<<24;if(128>f)return d(a,g,b);f=e[c.M++];if(128>f)return d(a,g|(f&1)<<31,b);throw Error("Expected varint not more than 10 bytes");}
function d(a,b,c){return c?4294967296*b+(a>>>0):4294967296*(b>>>0)+(a>>>0)}var e={read:function(a,b,c,d,e){var f=8*e-d-1;var g=(1<<f)-1,h=g>>1,k=-7;e=c?e-1:0;var m=c?-1:1,F=a[b+e];e+=m;c=F&(1<<-k)-1;F>>=-k;for(k+=f;0<k;c=256*c+a[b+e],e+=m,k-=8);f=c&(1<<-k)-1;c>>=-k;for(k+=d;0<k;f=256*f+a[b+e],e+=m,k-=8);if(0===c)c=1-h;else{if(c===g)return f?NaN:Infinity*(F?-1:1);f+=Math.pow(2,d);c-=h}return(F?-1:1)*f*Math.pow(2,c-d)},write:function(a,b,c,d,e,n){var f,g=8*n-e-1,h=(1<<g)-1,k=h>>1,m=23===e?Math.pow(2,
-24)-Math.pow(2,-77):0;n=d?0:n-1;var C=d?1:-1,A=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,d=h):(d=Math.floor(Math.log(b)/Math.LN2),1>b*(f=Math.pow(2,-d))&&(d--,f*=2),b=1<=d+k?b+m/f:b+m*Math.pow(2,1-k),2<=b*f&&(d++,f/=2),d+k>=h?(b=0,d=h):1<=d+k?(b=(b*f-1)*Math.pow(2,e),d+=k):(b=b*Math.pow(2,k-1)*Math.pow(2,e),d=0));for(;8<=e;a[c+n]=b&255,n+=C,b/=256,e-=8);d=d<<e|b;for(g+=e;0<g;a[c+n]=d&255,n+=C,d/=256,g-=8);a[c+n-C]|=128*A}};b.a=0;b.j=1;b.b=2;b.f=5;b.prototype={rd:function(a,
b,c){for(c=c||this.length;this.M<c;){var d=this.ia(),e=d>>3,f=this.M;this.type=d&7;a(e,b,this);this.M===f&&this.Ji(d)}return b},ti:function(){var a=e.read(this.Ta,this.M,!0,23,4);this.M+=4;return a},oi:function(){var a=e.read(this.Ta,this.M,!0,52,8);this.M+=8;return a},ia:function(a){var b=this.Ta;var d=b[this.M++];var e=d&127;if(128>d)return e;d=b[this.M++];e|=(d&127)<<7;if(128>d)return e;d=b[this.M++];e|=(d&127)<<14;if(128>d)return e;d=b[this.M++];e|=(d&127)<<21;if(128>d)return e;d=b[this.M];return c(e|
(d&15)<<28,a,this)},Ai:function(){return this.ia(!0)},vd:function(){var a=this.ia();return 1===a%2?(a+1)/-2:a/2},mi:function(){return!!this.ia()},wd:function(){for(var a=this.ia()+this.M,b=this.Ta,c="",d=this.M;d<a;){var e=b[d],n=null,p=239<e?4:223<e?3:191<e?2:1;if(d+p>a)break;if(1===p)128>e&&(n=e);else if(2===p){var r=b[d+1];128===(r&192)&&(n=(e&31)<<6|r&63,127>=n&&(n=null))}else if(3===p){r=b[d+1];var u=b[d+2];128===(r&192)&&128===(u&192)&&(n=(e&15)<<12|(r&63)<<6|u&63,2047>=n||55296<=n&&57343>=
n)&&(n=null)}else if(4===p){r=b[d+1];u=b[d+2];var D=b[d+3];128===(r&192)&&128===(u&192)&&128===(D&192)&&(n=(e&15)<<18|(r&63)<<12|(u&63)<<6|D&63,65535>=n||1114112<=n)&&(n=null)}null===n?(n=65533,p=1):65535<n&&(n-=65536,c+=String.fromCharCode(n>>>10&1023|55296),n=56320|n&1023);c+=String.fromCharCode(n);d+=p}this.M=a;return c},Ji:function(a){a&=7;if(a===b.a)for(;127<this.Ta[this.M++];);else if(a===b.b)this.M=this.ia()+this.M;else if(a===b.f)this.M+=4;else if(a===b.j)this.M+=8;else throw Error("Unimplemented type: "+
a);}};a["default"]=b})(Zg.Rb=Zg.Rb||{});Zg.Rb=Zg.Rb.default;Zg.zd={};Zg.zd.Gd=function(){};
(function(a){function b(a,b){this.layers=a.rd(k,{},b)}function c(a,b){this.x=a;this.y=b}function d(a,b,c,d,f){this.properties={};this.extent=c;this.type=0;this.ib=a;this.Kd=-1;this.Ub=d;this.Wb=f;a.rd(e,this,b)}function e(a,b,c){if(1==a)b.id=c.ia();else if(2==a)for(a=c.ia()+c.M;c.M<a;){var d=b.Ub[c.ia()],e=b.Wb[c.ia()];b.properties[d]=e}else 3==a?b.type=c.ia():4==a&&(b.Kd=c.M)}function f(a,b){this.version=1;this.name=null;this.extent=4096;this.length=0;this.ib=a;this.Ub=[];this.Wb=[];this.Tb=[];a.rd(g,
this,b);this.length=this.Tb.length}function g(a,b,c){15===a?b.version=c.ia():1===a?b.name=c.wd():5===a?b.extent=c.ia():2===a?b.Tb.push(c.M):3===a?b.Ub.push(c.wd()):4===a&&b.Wb.push(h(c))}function h(a){for(var b=null,c=a.ia()+a.M;a.M<c;)b=a.ia()>>3,b=1===b?a.wd():2===b?a.ti():3===b?a.oi():4===b?a.Ai():5===b?a.ia():6===b?a.vd():7===b?a.mi():null;return b}function k(a,b,c){3===a&&(a=new m(c,c.ia()+c.M),a.length&&(b[a.name]=a))}c.prototype={clone:function(){return new c(this.x,this.y)},add:function(a){return this.clone().Hf(a)},
rotate:function(a){return this.clone().Qf(a)},round:function(){return this.clone().Rf()},angle:function(){return Math.atan2(this.y,this.x)},Hf:function(a){this.x+=a.x;this.y+=a.y;return this},Qf:function(a){var b=Math.cos(a);a=Math.sin(a);var c=a*this.x+b*this.y;this.x=b*this.x-a*this.y;this.y=c;return this},Rf:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this}};c.hj=function(a){return a instanceof c?a:Array.isArray(a)?new c(a[0],a[1]):a};d.b=["Unknown","Point","LineString",
"Polygon"];d.prototype.bbox=function(){var a=this.ib;a.M=this.Kd;for(var b=a.ia()+a.M,c=1,d=0,e=0,f=0,g=Infinity,h=-Infinity,k=Infinity,n=-Infinity;a.M<b;)if(d||(d=a.ia(),c=d&7,d>>=3),d--,1===c||2===c)e+=a.vd(),f+=a.vd(),e<g&&(g=e),e>h&&(h=e),f<k&&(k=f),f>n&&(n=f);else if(7!==c)throw Error("unknown command "+c);return[g,k,h,n]};var m=f;f.prototype.feature=function(a){if(0>a||a>=this.Tb.length)throw Error("feature index out of bounds");this.ib.M=this.Tb[a];a=this.ib.ia()+this.ib.M;return new d(this.ib,
a,this.extent,this.Ub,this.Wb)};var n=m;a["default"]={Gd:b,Ff:d,Gf:n};a.Gd=b;a.Ff=d;a.Gf=n})(Zg.zd=Zg.zd||{});function vl(a,b){b[b.length-1].Nb[a.getAttribute("k")]=a.getAttribute("v")}var wl=[null],xl=O(wl,{nd:function(a,b){b[b.length-1].ob.push(a.getAttribute("ref"))},tag:vl});
O(wl,{node:function(a,b){var c=b[0],d=b[b.length-1],e=a.getAttribute("id"),f=[parseFloat(a.getAttribute("lon")),parseFloat(a.getAttribute("lat"))];d.ih[e]=f;a=P({Nb:{}},yl,a,b);bb(a.Nb)||(f=new Qe(f),bi(f,!1,c),c=new E(f),c.ab(e),c.qa(a.Nb),d.features.push(c))},way:function(a,b){var c=b[0],d=a.getAttribute("id");a=P({ob:[],Nb:{}},xl,a,b);b=b[b.length-1];for(var e=[],f=0,g=a.ob.length;f<g;f++)ia(e,b.ih[a.ob[f]]);a.ob[0]==a.ob[a.ob.length-1]?(f=new z(null),Xe(f,"XY",e,[e.length])):(f=new S(null),gi(f,
"XY",e));bi(f,!1,c);c=new E(f);c.ab(d);c.qa(a.Nb);b.features.push(c)}});var yl=O(wl,{tag:vl});function zl(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};var Al=[null,"http://www.opengis.net/ows/1.1"];O(Al,{ServiceIdentification:M(function(a,b){return P({},Bl,a,b)}),ServiceProvider:M(function(a,b){return P({},Cl,a,b)}),OperationsMetadata:M(function(a,b){return P({},Dl,a,b)})});
var El=O(Al,{DeliveryPoint:M(V),City:M(V),AdministrativeArea:M(V),PostalCode:M(V),Country:M(V),ElectronicMailAddress:M(V)}),Fl=O(Al,{Value:Qh(function(a){return V(a)})}),Gl=O(Al,{AllowedValues:M(function(a,b){return P({},Fl,a,b)})}),Il=O(Al,{Phone:M(function(a,b){return P({},Hl,a,b)}),Address:M(function(a,b){return P({},El,a,b)})}),Kl=O(Al,{HTTP:M(function(a,b){return P({},Jl,a,b)})}),Jl=O(Al,{Get:Qh(function(a,b){var c=zl(a);if(c)return P({href:c},Ll,a,b)}),Post:void 0}),Ml=O(Al,{DCP:M(function(a,
b){return P({},Kl,a,b)})}),Dl=O(Al,{Operation:function(a,b){var c=a.getAttribute("name");(a=P({},Ml,a,b))&&(b[b.length-1][c]=a)}}),Hl=O(Al,{Voice:M(V),Facsimile:M(V)}),Ll=O(Al,{Constraint:Qh(function(a,b){var c=a.getAttribute("name");if(c)return P({name:c},Gl,a,b)})}),Nl=O(Al,{IndividualName:M(V),PositionName:M(V),ContactInfo:M(function(a,b){return P({},Il,a,b)})}),Bl=O(Al,{Title:M(V),ServiceTypeVersion:M(V),ServiceType:M(V)}),Cl=O(Al,{ProviderName:M(V),ProviderSite:M(zl),ServiceContact:M(function(a,
b){return P({},Nl,a,b)})});function Ol(a){a=a?a:{};Zh.call(this);this.f=a.layerName;this.b=a.layers?a.layers:null;this.defaultDataProjection=Ab(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326")}t(Ol,ci);function Pl(a,b){var c=[],d,e;var f=0;for(e=a.length;f<e;++f){var g=a[f];0<f&&c.pop();0<=g?d=b[g]:d=b[~g].slice().reverse();c.push.apply(c,d)}a=0;for(b=c.length;a<b;++a)c[a]=c[a].slice();return c}
function Ql(a,b,c,d,e,f,g){a=a.geometries;var h=[],k;var m=0;for(k=a.length;m<k;++m)h[m]=Rl(a[m],b,c,d,e,f,g);return h}function Rl(a,b,c,d,e,f,g){var h=a.type,k=Sl[h];c="Point"===h||"MultiPoint"===h?k(a,c,d):k(a,b);b=new E;b.xa(bi(c,!1,g));void 0!==a.id&&b.ab(a.id);a=a.properties;e&&(a||(a={}),a[e]=f);a&&b.qa(a);return b}
Ol.prototype.qd=function(a,b){if("Topology"==a.type){var c=null,d=null;if(a.transform){var e=a.transform;c=e.scale;d=e.translate}var f=a.arcs;if(e){e=c;var g=d,h;var k=0;for(h=f.length;k<h;++k){var m,n=f[k],p=e,r=g,u=0,D=0;var F=0;for(m=n.length;F<m;++F){var C=n[F];u+=C[0];D+=C[1];C[0]=u;C[1]=D;Tl(C,p,r)}}}e=[];a=a.objects;g=this.f;for(var A in a)this.b&&-1==this.b.indexOf(A)||("GeometryCollection"===a[A].type?(k=a[A],e.push.apply(e,Ql(k,f,c,d,g,A,b))):(k=a[A],e.push(Rl(k,f,c,d,g,A,b))));return e}return[]};
function Tl(a,b,c){a[0]=a[0]*b[0]+c[0];a[1]=a[1]*b[1]+c[1]}Ol.prototype.ud=function(){return this.defaultDataProjection};
var Sl={Point:function(a,b,c){a=a.coordinates;b&&c&&Tl(a,b,c);return new Qe(a)},LineString:function(a,b){a=Pl(a.arcs,b);return new S(a)},Polygon:function(a,b){var c=[],d;var e=0;for(d=a.arcs.length;e<d;++e)c[e]=Pl(a.arcs[e],b);return new z(c)},MultiPoint:function(a,b,c){a=a.coordinates;var d;if(b&&c){var e=0;for(d=a.length;e<d;++e)Tl(a[e],b,c)}return new ki(a)},MultiLineString:function(a,b){var c=[],d;var e=0;for(d=a.arcs.length;e<d;++e)c[e]=Pl(a.arcs[e],b);return new hi(c)},MultiPolygon:function(a,
b){var c=[],d,e;var f=0;for(e=a.arcs.length;f<e;++f){var g=a.arcs[f];var h=[];var k=0;for(d=g.length;k<d;++k)h[k]=Pl(g[k],b);c[f]=h}return new mi(c)}};Ol.prototype.ub=function(){};Ol.prototype.Bd=function(){};Ol.prototype.Za=function(){};function Ul(a){a=a?a:{};this.a=a.featureType;this.f=a.featureNS;this.b=a.gmlFormat?a.gmlFormat:new X;Ei.call(this)}t(Ul,Ei);var Vl={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"};
Ul.prototype.pd=function(a,b){var c={featureType:this.a,featureNS:this.f};Za(c,$h(this,a,b?b:{}));b=[c];this.b.b["http://www.opengis.net/gml"].featureMember=J(T.prototype.Kb);(a=P([],this.b.b,a,b,this.b))||(a=[]);return a};Ul.prototype.c=function(a){if(a instanceof Document)return Wl(a);if(a instanceof Node)return P({},Xl,a,[]);if("string"===typeof a)return a=Ph(a),Wl(a)};
var Yl={"http://www.opengis.net/wfs":{totalInserted:M(Oi),totalUpdated:M(Oi),totalDeleted:M(Oi)}},Zl={"http://www.opengis.net/ogc":{FeatureId:J(function(a){return a.getAttribute("fid")})}},$l={"http://www.opengis.net/wfs":{Feature:function(a,b){Wh(Zl,a,b)}}},Xl={"http://www.opengis.net/wfs":{TransactionSummary:M(function(a,b){return P({},Yl,a,b)},"transactionSummary"),InsertResults:M(function(a,b){return P([],$l,a,b)},"insertIds")}};
function Wl(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return P({},Xl,a,[])}function am(a,b){var c=Mh("http://www.opengis.net/ogc","Filter"),d=Mh("http://www.opengis.net/ogc","FeatureId");c.appendChild(d);d.setAttribute("fid",b);a.appendChild(c)}function bm(a,b){a=(a?a:"feature")+":";return b.indexOf(a)?a+b:b}
var cm={"http://www.opengis.net/wfs":{Insert:N(function(a,b,c){var d=c[c.length-1],e=d.gmlVersion;d=Mh(d.featureNS,d.featureType);a.appendChild(d);if(2===e){var f=aj.prototype;(a=b.a)&&d.setAttribute("fid",a);a=c[c.length-1];e=a.featureNS;var g=b.c;a.va||(a.va={},a.va[e]={});var h=b.Ca();b=[];var k=[];for(n in h){var m=h[n];null!==m&&(b.push(n),k.push(m),n==g||m instanceof ue?n in a.va[e]||(a.va[e][n]=N(f.ne,f)):n in a.va[e]||(a.va[e][n]=N(W)))}var n=Za({},a)}else{n=X.prototype;(a=b.a)&&d.setAttribute("fid",
a);a=c[c.length-1];e=a.featureNS;g=b.c;a.va||(a.va={},a.va[e]={});h=b.Ca();b=[];k=[];for(f in h)m=h[f],null!==m&&(b.push(f),k.push(m),f==g||m instanceof ue?f in a.va[e]||(a.va[e][f]=N(n.ve,n)):f in a.va[e]||(a.va[e][f]=N(W)));n=Za({},a)}n.node=d;Q(n,a.va,Sh(void 0,e),k,c,b)}),Update:N(function(a,b,c){var d=c[c.length-1];w(void 0!==b.a,27);var e=d.featurePrefix,f=d.featureNS;a.setAttribute("typeName",bm(e,d.featureType));a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+e,f);e=b.a;if(void 0!==
e){f=Object.keys(b.L);for(var g=[],h=0,k=f.length;h<k;h++){var m=b.get(f[h]);void 0!==m&&g.push({name:f[h],value:m})}Q({gmlVersion:d.gmlVersion,node:a,hasZ:d.hasZ,srsName:d.srsName},cm,Sh("Property"),g,c);am(a,e)}}),Delete:N(function(a,b,c){c=c[c.length-1];w(void 0!==b.a,26);var d=c.featurePrefix,e=c.featureNS;a.setAttribute("typeName",bm(d,c.featureType));a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+d,e);b=b.a;void 0!==b&&am(a,b)}),Property:N(function(a,b,c){var d=Mh("http://www.opengis.net/wfs",
"Name"),e=c[c.length-1].gmlVersion;a.appendChild(d);W(d,b.name);void 0!==b.value&&null!==b.value&&(d=Mh("http://www.opengis.net/wfs","Value"),a.appendChild(d),b.value instanceof ue?2===e?aj.prototype.ne(d,b.value,c):X.prototype.ve(d,b.value,c):W(d,b.value))}),Native:N(function(a,b){b.Si&&a.setAttribute("vendorId",b.Si);void 0!==b.Hi&&a.setAttribute("safeToIgnore",b.Hi);void 0!==b.value&&W(a,b.value)})}};
Ul.prototype.i=function(a,b,c,d){var e=[],f=Mh("http://www.opengis.net/wfs","Transaction"),g=d.version?d.version:"1.1.0",h="1.0.0"===g?2:3;f.setAttribute("service","WFS");f.setAttribute("version",g);if(d){var k=d.gmlOptions?d.gmlOptions:{};d.handle&&f.setAttribute("handle",d.handle)}f.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",Vl[g]);var m=d.featurePrefix?d.featurePrefix:"feature";a&&(g={node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:m,gmlVersion:h,
hasZ:d.hasZ,srsName:d.srsName},Za(g,k),Q(g,cm,Sh("Insert"),a,e));b&&(g={node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:m,gmlVersion:h,hasZ:d.hasZ,srsName:d.srsName},Za(g,k),Q(g,cm,Sh("Update"),b,e));c&&Q({node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:m,gmlVersion:h,srsName:d.srsName},cm,Sh("Delete"),c,e);d.nativeElements&&Q({node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:m,gmlVersion:h,srsName:d.srsName},cm,Sh("Native"),d.nativeElements,
e);return f};Ul.prototype.td=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.uc(a);return null};Ul.prototype.uc=function(a){if(a.firstElementChild&&a.firstElementChild.firstElementChild)for(a=a.firstElementChild.firstElementChild,a=a.firstElementChild;a;a=a.nextElementSibling)if(0!==a.childNodes.length&&(1!==a.childNodes.length||3!==a.firstChild.nodeType)){var b=[{}];Ii(this.b,a,b);return Ab(b.pop().srsName)}return null};function dm(a){a=a?a:{};Zh.call(this);this.b=void 0!==a.splitCollection?a.splitCollection:!1}t(dm,Kj);function em(a){a=a.G();return a.length?a.join(" "):""}function fm(a){a=a.G();for(var b=[],c=0,d=a.length;c<d;++c)b.push(a[c].join(" "));return b.join(",")}function gm(a){var b=[];a=$e(a);for(var c=0,d=a.length;c<d;++c)b.push("("+fm(a[c])+")");return b.join(",")}
function Mj(a){var b=a.I(),c=(0,hm[b])(a);b=b.toUpperCase();if(a instanceof we){a=a.W;var d="";if("XYZ"===a||"XYZM"===a)d+="Z";if("XYM"===a||"XYZM"===a)d+="M";a=d;0<a.length&&(b+=" "+a)}return c.length?b+"("+c+")":b+" EMPTY"}
var hm={Point:em,LineString:fm,Polygon:gm,MultiPoint:function(a){var b=[];a=li(a);for(var c=0,d=a.length;c<d;++c)b.push("("+em(a[c])+")");return b.join(",")},MultiLineString:function(a){var b=[];a=a.jb();for(var c=0,d=a.length;c<d;++c)b.push("("+fm(a[c])+")");return b.join(",")},MultiPolygon:function(a){var b=[];a=oi(a);for(var c=0,d=a.length;c<d;++c)b.push("("+gm(a[c])+")");return b.join(",")},GeometryCollection:function(a){var b=[];a=xi(a.a);for(var c=0,d=a.length;c<d;++c)b.push(Mj(a[c]));return b.join(",")}};
function Lj(a,b){a=new im(new jm(a));km(a);return(a=lm(a))?bi(a,!1,b):null}function jm(a){this.f=a;this.b=-1}
function mm(a){var b=a.f.charAt(++a.b),c={position:a.b,value:b};if("("==b)c.type=2;else if(","==b)c.type=5;else if(")"==b)c.type=3;else if("0"<=b&&"9">=b||"."==b||"-"==b){c.type=4;b=a.b;var d=!1,e=!1;do{if("."==f)d=!0;else if("e"==f||"E"==f)e=!0;var f=a.f.charAt(++a.b)}while("0"<=f&&"9">=f||"."==f&&(void 0===d||!d)||!e&&("e"==f||"E"==f)||e&&("-"==f||"+"==f));a=parseFloat(a.f.substring(b,a.b--));c.value=a}else if("a"<=b&&"z">=b||"A"<=b&&"Z">=b){c.type=1;b=a.b;do f=a.f.charAt(++a.b);while("a"<=f&&"z">=
f||"A"<=f&&"Z">=f);a=a.f.substring(b,a.b--).toUpperCase();c.value=a}else{if(" "==b||"\t"==b||"\r"==b||"\n"==b)return mm(a);if(""===b)c.type=6;else throw Error("Unexpected character: "+b);}return c}function im(a){this.j=a;this.f="XY"}function km(a){a.b=mm(a.j)}function nm(a,b){(b=a.b.type==b)&&km(a);return b}
function lm(a){var b=a.b;if(nm(a,1)){b=b.value;var c="XY",d=a.b;1==a.b.type&&(d=d.value,"Z"===d?c="XYZ":"M"===d?c="XYM":"ZM"===d&&(c="XYZM"),"XY"!==c&&km(a));a.f=c;if("GEOMETRYCOLLECTION"==b){a:{if(nm(a,2)){b=[];do b.push(lm(a));while(nm(a,5));if(nm(a,3)){a=b;break a}}else if(om(a)){a=[];break a}throw Error(pm(a));}return new vi(a)}d=qm[b];c=rm[b];if(!d||!c)throw Error("Invalid geometry type: "+b);b=d.call(a);return new c(b,a.f)}throw Error(pm(a));}l=im.prototype;
l.ld=function(){if(nm(this,2)){var a=sm(this);if(nm(this,3))return a}else if(om(this))return null;throw Error(pm(this));};l.kd=function(){if(nm(this,2)){var a=tm(this);if(nm(this,3))return a}else if(om(this))return[];throw Error(pm(this));};l.md=function(){if(nm(this,2)){var a=um(this);if(nm(this,3))return a}else if(om(this))return[];throw Error(pm(this));};
l.bi=function(){if(nm(this,2)){var a;if(2==this.b.type)for(a=[this.ld()];nm(this,5);)a.push(this.ld());else a=tm(this);if(nm(this,3))return a}else if(om(this))return[];throw Error(pm(this));};l.ai=function(){if(nm(this,2)){var a=um(this);if(nm(this,3))return a}else if(om(this))return[];throw Error(pm(this));};l.ci=function(){if(nm(this,2)){for(var a=[this.md()];nm(this,5);)a.push(this.md());if(nm(this,3))return a}else if(om(this))return[];throw Error(pm(this));};
function sm(a){for(var b=[],c=a.f.length,d=0;d<c;++d){var e=a.b;if(nm(a,4))b.push(e.value);else break}if(b.length==c)return b;throw Error(pm(a));}function tm(a){for(var b=[sm(a)];nm(a,5);)b.push(sm(a));return b}function um(a){for(var b=[a.kd()];nm(a,5);)b.push(a.kd());return b}function om(a){var b=1==a.b.type&&"EMPTY"==a.b.value;b&&km(a);return b}function pm(a){return"Unexpected `"+a.b.value+"` at position "+a.b.position+" in `"+a.j.f+"`"}
var rm={POINT:Qe,LINESTRING:S,POLYGON:z,MULTIPOINT:ki,MULTILINESTRING:hi,MULTIPOLYGON:mi},qm={POINT:im.prototype.ld,LINESTRING:im.prototype.kd,POLYGON:im.prototype.md,MULTIPOINT:im.prototype.bi,MULTILINESTRING:im.prototype.ai,MULTIPOLYGON:im.prototype.ci};function vm(a,b){return P({},wm,a,b)}function xm(a,b){return P({},ym,a,b)}function zm(a,b){if(b=vm(a,b))return a=[Pi(a.getAttribute("width")),Pi(a.getAttribute("height"))],b.size=a,b}function Am(a,b){return P([],Bm,a,b)}var Cm=[null,"http://www.opengis.net/wms"];O(Cm,{Service:M(function(a,b){return P({},Dm,a,b)}),Capability:M(function(a,b){return P({},Em,a,b)})});
var Em=O(Cm,{Request:M(function(a,b){return P({},Fm,a,b)}),Exception:M(function(a,b){return P([],Gm,a,b)}),Layer:M(function(a,b){return P({},Hm,a,b)})}),Dm=O(Cm,{Name:M(V),Title:M(V),Abstract:M(V),KeywordList:M(Am),OnlineResource:M(zl),ContactInformation:M(function(a,b){return P({},Im,a,b)}),Fees:M(V),AccessConstraints:M(V),LayerLimit:M(Oi),MaxWidth:M(Oi),MaxHeight:M(Oi)}),Im=O(Cm,{ContactPersonPrimary:M(function(a,b){return P({},Jm,a,b)}),ContactPosition:M(V),ContactAddress:M(function(a,b){return P({},
Km,a,b)}),ContactVoiceTelephone:M(V),ContactFacsimileTelephone:M(V),ContactElectronicMailAddress:M(V)}),Jm=O(Cm,{ContactPerson:M(V),ContactOrganization:M(V)}),Km=O(Cm,{AddressType:M(V),Address:M(V),City:M(V),StateOrProvince:M(V),PostCode:M(V),Country:M(V)}),Gm=O(Cm,{Format:J(V)}),Hm=O(Cm,{Name:M(V),Title:M(V),Abstract:M(V),KeywordList:M(Am),CRS:Qh(V),EX_GeographicBoundingBox:M(function(a,b){var c=P({},Lm,a,b);if(c){a=c.westBoundLongitude;b=c.southBoundLatitude;var d=c.eastBoundLongitude;c=c.northBoundLatitude;
if(void 0!==a&&void 0!==b&&void 0!==d&&void 0!==c)return[a,b,d,c]}}),BoundingBox:Qh(function(a){var b=[Ni(a.getAttribute("minx")),Ni(a.getAttribute("miny")),Ni(a.getAttribute("maxx")),Ni(a.getAttribute("maxy"))],c=[Ni(a.getAttribute("resx")),Ni(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),extent:b,res:c}}),Dimension:Qh(function(a){return{name:a.getAttribute("name"),units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:Ki(a.getAttribute("multipleValues")),
nearestValue:Ki(a.getAttribute("nearestValue")),current:Ki(a.getAttribute("current")),values:V(a)}}),Attribution:M(function(a,b){return P({},Mm,a,b)}),AuthorityURL:Qh(function(a,b){if(b=vm(a,b))return b.name=a.getAttribute("name"),b}),Identifier:Qh(V),MetadataURL:Qh(function(a,b){if(b=vm(a,b))return b.type=a.getAttribute("type"),b}),DataURL:Qh(vm),FeatureListURL:Qh(vm),Style:Qh(function(a,b){return P({},Nm,a,b)}),MinScaleDenominator:M(Mi),MaxScaleDenominator:M(Mi),Layer:Qh(function(a,b){var c=b[b.length-
1],d=P({},Hm,a,b);if(d)return b=Ki(a.getAttribute("queryable")),void 0===b&&(b=c.queryable),d.queryable=void 0!==b?b:!1,b=Pi(a.getAttribute("cascaded")),void 0===b&&(b=c.cascaded),d.cascaded=b,b=Ki(a.getAttribute("opaque")),void 0===b&&(b=c.opaque),d.opaque=void 0!==b?b:!1,b=Ki(a.getAttribute("noSubsets")),void 0===b&&(b=c.noSubsets),d.noSubsets=void 0!==b?b:!1,(b=Ni(a.getAttribute("fixedWidth")))||(b=c.fixedWidth),d.fixedWidth=b,(a=Ni(a.getAttribute("fixedHeight")))||(a=c.fixedHeight),d.fixedHeight=
a,["Style","CRS","AuthorityURL"].forEach(function(a){a in c&&(d[a]=(d[a]||[]).concat(c[a]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in d||(d[a]=c[a])}),d})}),Mm=O(Cm,{Title:M(V),OnlineResource:M(zl),LogoURL:M(zm)}),Lm=O(Cm,{westBoundLongitude:M(Mi),eastBoundLongitude:M(Mi),southBoundLatitude:M(Mi),northBoundLatitude:M(Mi)}),Fm=O(Cm,{GetCapabilities:M(xm),GetMap:M(xm),GetFeatureInfo:M(xm)}),ym=O(Cm,{Format:Qh(V),
DCPType:Qh(function(a,b){return P({},Om,a,b)})}),Om=O(Cm,{HTTP:M(function(a,b){return P({},Pm,a,b)})}),Pm=O(Cm,{Get:M(vm),Post:M(vm)}),Nm=O(Cm,{Name:M(V),Title:M(V),Abstract:M(V),LegendURL:Qh(zm),StyleSheetURL:M(vm),StyleURL:M(vm)}),wm=O(Cm,{Format:M(V),OnlineResource:M(zl)}),Bm=O(Cm,{Keyword:J(V)});function Qm(a){var b=V(a).split(" ");if(b&&2==b.length&&(a=+b[0],b=+b[1],!isNaN(a)&&!isNaN(b)))return[a,b]}var Rm=[null,"http://www.opengis.net/wmts/1.0"],Sm=[null,"http://www.opengis.net/ows/1.1"];O(Rm,{Contents:M(function(a,b){return P({},Tm,a,b)})});
var Tm=O(Rm,{Layer:Qh(function(a,b){return P({},Um,a,b)}),TileMatrixSet:Qh(function(a,b){return P({},Vm,a,b)})}),Um=O(Rm,{Style:Qh(function(a,b){if(b=P({},Wm,a,b))return a="true"===a.getAttribute("isDefault"),b.isDefault=a,b}),Format:Qh(V),TileMatrixSetLink:Qh(function(a,b){return P({},Xm,a,b)}),Dimension:Qh(function(a,b){return P({},Ym,a,b)}),ResourceURL:Qh(function(a){var b=a.getAttribute("format"),c=a.getAttribute("template");a=a.getAttribute("resourceType");var d={};b&&(d.format=b);c&&(d.template=
c);a&&(d.resourceType=a);return d})},O(Sm,{Title:M(V),Abstract:M(V),WGS84BoundingBox:M(function(a,b){a=P([],Zm,a,b);if(2==a.length)return Fa(a)}),Identifier:M(V)})),Wm=O(Rm,{LegendURL:Qh(function(a){var b={};b.format=a.getAttribute("format");b.href=zl(a);return b})},O(Sm,{Title:M(V),Identifier:M(V)})),Xm=O(Rm,{TileMatrixSet:M(V),TileMatrixSetLimits:M(function(a,b){return P([],$m,a,b)})}),$m=O(Rm,{TileMatrixLimits:J(function(a,b){return P({},an,a,b)})}),an=O(Rm,{TileMatrix:M(V),MinTileRow:M(Oi),MaxTileRow:M(Oi),
MinTileCol:M(Oi),MaxTileCol:M(Oi)}),Ym=O(Rm,{Default:M(V),Value:Qh(V)},O(Sm,{Identifier:M(V)})),Zm=O(Sm,{LowerCorner:J(Qm),UpperCorner:J(Qm)}),Vm=O(Rm,{WellKnownScaleSet:M(V),TileMatrix:Qh(function(a,b){return P({},bn,a,b)})},O(Sm,{SupportedCRS:M(V),Identifier:M(V)})),bn=O(Rm,{TopLeftCorner:M(Qm),ScaleDenominator:M(Mi),TileWidth:M(Oi),TileHeight:M(Oi),MatrixWidth:M(Oi),MatrixHeight:M(Oi)},O(Sm,{Identifier:M(V)}));function cn(a){nc.call(this);a=a||{};this.a=null;this.i=Fb;this.g=new cb(6378137);this.c=void 0;y(this,pc("projection"),this.mh,this);y(this,pc("tracking"),this.Ng,this);void 0!==a.projection&&this.set("projection",Ab(a.projection));void 0!==a.trackingOptions&&this.set("trackingOptions",a.trackingOptions);this.xc(void 0!==a.tracking?a.tracking:!1)}t(cn,nc);l=cn.prototype;l.la=function(){this.xc(!1);nc.prototype.la.call(this)};
l.mh=function(){var a=this.get("projection");a&&(this.i=Db(Ab("EPSG:4326"),a),this.a&&this.set("position",this.i(this.a)))};l.Ng=function(){if(nd){var a=this.ee();a&&void 0===this.c?this.c=navigator.geolocation.watchPosition(this.ji.bind(this),this.ki.bind(this),this.get("trackingOptions")):a||void 0===this.c||(navigator.geolocation.clearWatch(this.c),this.c=void 0)}};
l.ji=function(a){var b=a.coords;this.set("accuracy",b.accuracy);this.set("altitude",null===b.altitude?void 0:b.altitude);this.set("altitudeAccuracy",null===b.altitudeAccuracy?void 0:b.altitudeAccuracy);this.set("heading",null===b.heading?void 0:ya(b.heading));this.a?(this.a[0]=b.longitude,this.a[1]=b.latitude):this.a=[b.longitude,b.latitude];a=this.i(this.a);this.set("position",a);this.set("speed",null===b.speed?void 0:b.speed);a=this.g;var c=this.a,d=b.accuracy;b=[];var e;for(e=0;32>e;++e)ia(b,a.offset(c,
d,2*Math.PI*e/32));b.push(b[0],b[1]);a=new z(null);Xe(a,"XY",b,[b.length]);a.xb(this.i);this.set("accuracyGeometry",a);this.b()};l.ki=function(a){a.type="error";this.xc(!1);this.f(a)};l.eg=function(){return this.get("accuracy")};l.jg=function(){return this.get("heading")};l.lh=function(){return this.get("position")};l.og=function(){return this.get("speed")};l.ee=function(){return this.get("tracking")};l.xc=function(a){this.set("tracking",a)};function dn(a,b,c){we.call(this);en(this,a,b?b:0,c)}t(dn,we);l=dn.prototype;l.clone=function(){var a=new dn(null);ye(a,this.W,this.o.slice());a.b();return a};l.Ga=function(a,b,c,d){var e=this.o;a-=e[0];var f=b-e[1];b=a*a+f*f;if(b<d){if(b)for(d=this.Ib()/Math.sqrt(b),c[0]=e[0]+d*a,c[1]=e[1]+d*f,d=2;d<this.A;++d)c[d]=e[d];else for(d=0;d<this.A;++d)c[d]=e[d];c.length=this.A;return b}return d};l.ba=function(){return this.o.slice(0,this.A)};
l.Zb=function(a){var b=this.o,c=b[this.A]-b[0];return Na(b[0]-c,b[1]-c,b[0]+c,b[1]+c,a)};l.Ib=function(){var a=this.o[this.A]-this.o[0],b=this.o[this.A+1]-this.o[1];return Math.sqrt(a*a+b*b)};l.I=function(){return"Circle"};l.Ja=function(a){var b=this.A,c=a.slice();c[b]=c[0]+(this.o[b]-this.o[0]);var d;for(d=1;d<b;++d)c[b+d]=a[d];ye(this,this.W,c);this.b()};
function en(a,b,c,d){if(b){ze(a,d,b,0);a.o||(a.o=[]);d=a.o;b=Ge(d,b);d[b++]=d[0]+c;var e;c=1;for(e=a.A;c<e;++c)d[b++]=d[c];d.length=b}else ye(a,"XY",null);a.b()}l.G=function(){};l.Y=function(){};l.af=function(a){this.o[this.A]=this.o[0]+a;this.b()};function fn(a,b){kc.call(this);this.Na=a;this.state=b;this.b=null;this.key=""}t(fn,kc);function gn(a){a.f("change")}fn.prototype.Xa=function(){return this.key+"/"+this.Na};function hn(a,b,c,d,e){fn.call(this,a,b);this.a=c;this.N=new Image;null!==d&&(this.N.crossOrigin=d);this.j=null;this.c=e}t(hn,fn);l=hn.prototype;l.la=function(){1==this.state&&(jn(this),this.N.src=kn.toDataURL("image/png"));this.b&&hc(this.b);this.state=5;gn(this);fn.prototype.la.call(this)};l.ha=function(){return this.N};l.Xa=function(){return this.a};l.nh=function(){this.state=3;jn(this);this.N=kn;gn(this)};l.oh=function(){this.state=this.N.naturalWidth&&this.N.naturalHeight?2:4;jn(this);gn(this)};
l.load=function(){if(0==this.state||3==this.state)this.state=1,gn(this),this.j=[y(this.N,"error",this.nh,this,!0),y(this.N,"load",this.oh,this,!0)],this.c(this,this.a)};function jn(a){a.j.forEach(Zb);a.j=null}var kn,ln=Hc(1,1);ln.fillStyle="rgba(0,0,0,0)";ln.fillRect(0,0,1,1);kn=ln.canvas;function mn(a,b,c,d){this.Ka=a;this.za=b;this.overlaps=d;this.a=0;this.resolution=c;this.fa=this.ea=null;this.f=[];this.coordinates=[];this.V={};this.J=vg();this.b=[];this.C=null;this.$=vg();this.X=vg()}t(mn,Ig);
function nn(a,b,c,d,e,f,g){var h=a.coordinates.length,k=a.Xc();g&&(c+=e);g=[b[c],b[c+1]];var m=[NaN,NaN],n=!0,p;for(p=c+e;p<d;p+=e){m[0]=b[p];m[1]=b[p+1];var r=k[1];var u=k[2],D=k[3],F=m[0],C=m[1],A=0;F<k[0]?A|=16:F>u&&(A|=4);C<r?A|=8:C>D&&(A|=2);A||(A=1);r=A;r!==H?(n&&(a.coordinates[h++]=g[0],a.coordinates[h++]=g[1]),a.coordinates[h++]=m[0],a.coordinates[h++]=m[1],n=!1):1===r?(a.coordinates[h++]=m[0],a.coordinates[h++]=m[1],n=!1):n=!0;g[0]=m[0];g[1]=m[1];var H=r}if(f&&n||p===c+e)a.coordinates[h++]=
g[0],a.coordinates[h++]=g[1];return h}function on(a,b,c,d,e,f){for(var g=0,h=d.length;g<h;++g){var k=d[g];c=nn(a,b,c,k,e,!1,!1);f.push(c);c=k}return c}
mn.prototype.Xd=function(a,b,c){pn(this,b);var d=a.I(),e=a.A,f=this.coordinates.length,g;if("MultiPolygon"==d){d=Sg(a);var h=[];for(var k=a.a,m=g=0,n=k.length;m<n;++m){var p=[];g=on(this,d,g,k[m],e,p);h.push(p)}this.f.push([4,f,h,a,c,Le])}else"Polygon"==d||"MultiLineString"==d?(h=[],d="Polygon"==d?Ye(a):a.o,on(this,d,0,a.Qa(),e,h),this.f.push([4,f,h,a,c,Ke])):"LineString"==d||"MultiPoint"==d?(d=a.o,e=nn(this,d,0,d.length,e,!1,!1),this.f.push([4,f,e,a,c,Je])):"Point"==d&&(d=a.o,this.coordinates.push(d[0],
d[1]),e=this.coordinates.length,this.f.push([4,f,e,a,c]));qn(this,b)};function pn(a,b){a.ea=[0,b,0];a.f.push(a.ea);a.fa=[0,b,0];a.b.push(a.fa)}mn.prototype.ma=function(a,b){if(this.H){var c=xg(this.J,this.H.slice());a.translate(c[0],c[1]);a.rotate(b)}a.fill();this.H&&a.setTransform.apply(a,this.X)};
function rn(a,b,c,d,e,f,g,h,k){if(a.C&&ja(d,a.J))var m=a.C;else a.C||(a.C=[]),m=ve(a.coordinates,0,a.coordinates.length,2,d,a.C),wg(a.J,d);d=!bb(f);for(var n=0,p=g.length,r=0,u,D=a.$,F=a.X,C,A,H,K,ca=0,R=0,Z=a.V,U={context:b,pixelRatio:c,resolution:a.resolution,rotation:e},G=a.f!=g||a.overlaps?0:200;n<p;){var x=g[n];switch(x[0]){case 0:var I=x[1];d&&f[v(I).toString()]||!I.P()?n=x[2]:void 0===k||Va(k,I.P().K())?++n:n=x[2]+1;break;case 1:ca>G&&(a.ma(b,e),ca=0);R>G&&(b.stroke(),R=0);ca||R||(b.beginPath(),
C=A=NaN);++n;break;case 2:r=x[1];u=m[r];x=m[r+1];H=m[r+2]-u;r=m[r+3]-x;r=Math.sqrt(H*H+r*r);b.moveTo(u+r,x);b.arc(u,x,r,0,2*Math.PI,!0);++n;break;case 3:b.closePath();++n;break;case 4:r=x[1];u=x[2];H=x[4];K=6==x.length?x[5]:void 0;U.geometry=x[3];U.feature=I;n in Z||(Z[n]=[]);x=Z[n];K?K(m,r,u,2,x):(x[0]=m[r],x[1]=m[r+1],x.length=2);H(x,U);++n;break;case 5:r=x[1];u=x[2];var wa=x[3];var Ca=x[4]*c;var Xb=x[5]*c;var Ga=x[6],zc=x[7],ec=x[8],fc=x[9];var qa=x[10];H=x[11];K=x[12];var wb=x[13],ud=x[14];for(qa&&
(H+=e);r<u;r+=2){x=m[r]-Ca;qa=m[r+1]-Xb;wb&&(x=Math.round(x),qa=Math.round(qa));if(1!=K||H){var Ac=x+Ca,ke=qa+Xb;yg(D,Ac,ke,K,K,H,-Ac,-ke);b.setTransform.apply(b,D)}Ac=b.globalAlpha;1!=zc&&(b.globalAlpha=Ac*zc);ke=ud+ec>wa.width?wa.width-ec:ud;var ek=Ga+fc>wa.height?wa.height-fc:Ga;b.drawImage(wa,ec,fc,ke,ek,x,qa,ke*c,ek*c);1!=zc&&(b.globalAlpha=Ac);(1!=K||H)&&b.setTransform.apply(b,F)}++n;break;case 6:r=x[1];u=x[2];Xb=x[3];Ga=x[4]*c;zc=x[5]*c;H=x[6];K=x[7]*c;wa=x[8];Ca=x[9];for((qa=x[10])&&(H+=e);r<
u;r+=2){x=m[r]+Ga;qa=m[r+1]+zc;if(1!=K||H)yg(D,x,qa,K,K,H,-x,-qa),b.setTransform.apply(b,D);ec=Xb.split("\n");fc=ec.length;1<fc?(wb=Math.round(1.5*b.measureText("M").width),qa-=(fc-1)/2*wb):wb=0;for(ud=0;ud<fc;ud++)Ac=ec[ud],Ca&&b.strokeText(Ac,x,qa),wa&&b.fillText(Ac,x,qa),qa+=wb;(1!=K||H)&&b.setTransform.apply(b,F)}++n;break;case 7:if(h&&(I=x[1],r=h(I)))return r;++n;break;case 8:G?ca++:a.ma(b,e);++n;break;case 9:r=x[1];u=x[2];x=m[r];qa=m[r+1];H=x+.5|0;K=qa+.5|0;if(H!==C||K!==A)b.moveTo(x,qa),C=
H,A=K;for(r+=2;r<u;r+=2)if(x=m[r],qa=m[r+1],H=x+.5|0,K=qa+.5|0,r==u-2||H!==C||K!==A)b.lineTo(x,qa),C=H,A=K;++n;break;case 10:a.H=x[2];ca&&(a.ma(b,e),ca=0,R&&(b.stroke(),R=0));b.fillStyle=x[1];++n;break;case 11:r=void 0!==x[8]?x[8]:!0;var qh=x[9];u=x[2];R&&(b.stroke(),R=0);b.strokeStyle=x[1];b.lineWidth=r?u*c:u;b.lineCap=x[3];b.lineJoin=x[4];b.miterLimit=x[5];ld&&(u=x[6],H=x[7],r&&c!==qh&&(u=u.map(function(a){return a*c/qh}),H*=c/qh,x[6]=u,x[7]=H,x[9]=c),b.lineDashOffset=H,b.setLineDash(u));++n;break;
case 12:b.font=x[1];b.textAlign=x[2];b.textBaseline=x[3];++n;break;case 13:G?R++:b.stroke();++n;break;default:++n}}ca&&a.ma(b,e);R&&b.stroke()}function sn(a){var b=a.b;b.reverse();var c,d=b.length,e=-1;for(c=0;c<d;++c){var f=b[c];var g=f[0];if(7==g)e=c;else if(0==g){f[2]=c;f=a.b;for(g=c;e<g;){var h=f[e];f[e]=f[g];f[g]=h;++e;--g}e=-1}}}function qn(a,b){a.ea[2]=a.f.length;a.ea=null;a.fa[2]=a.b.length;a.fa=null;b=[7,b];a.f.push(b);a.b.push(b)}mn.prototype.kc=na;mn.prototype.Xc=function(){return this.za};function tn(a,b,c,d){mn.call(this,a,b,c,d);this.N=this.wa=null;this.D=this.L=this.s=this.l=this.B=this.u=this.v=this.g=this.i=this.c=this.j=void 0}t(tn,mn);tn.prototype.Tc=function(a,b){if(this.N){pn(this,b);var c=a.o,d=this.coordinates.length;a=nn(this,c,0,c.length,a.A,!1,!1);this.f.push([5,d,a,this.N,this.j,this.c,this.i,this.g,this.v,this.u,this.B,this.l,this.s,this.L,this.D]);this.b.push([5,d,a,this.wa,this.j,this.c,this.i,this.g,this.v,this.u,this.B,this.l,this.s,this.L,this.D]);qn(this,b)}};
tn.prototype.Rc=function(a,b){if(this.N){pn(this,b);var c=a.o,d=this.coordinates.length;a=nn(this,c,0,c.length,a.A,!1,!1);this.f.push([5,d,a,this.N,this.j,this.c,this.i,this.g,this.v,this.u,this.B,this.l,this.s,this.L,this.D]);this.b.push([5,d,a,this.wa,this.j,this.c,this.i,this.g,this.v,this.u,this.B,this.l,this.s,this.L,this.D]);qn(this,b)}};tn.prototype.kc=function(){sn(this);this.c=this.j=void 0;this.N=this.wa=null;this.D=this.L=this.l=this.B=this.u=this.v=this.g=this.s=this.i=void 0};
tn.prototype.wc=function(a){var b=a.$b(),c=a.qb(),d=a.Ke(1),e=a.ha(1),f=a.oc();this.j=b[0];this.c=b[1];this.wa=d;this.N=e;this.i=c[1];this.g=a.c;this.v=f[0];this.u=f[1];this.B=a.v;this.l=a.l;this.s=a.a;this.L=a.s;this.D=c[0]};function un(a,b,c,d){mn.call(this,a,b,c,d);this.c=null;this.j={Eb:void 0,yb:void 0,zb:null,Ab:void 0,Bb:void 0,Cb:void 0,Db:void 0,nb:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}t(un,mn);function vn(a,b,c,d,e){var f=a.coordinates.length;b=nn(a,b,c,d,e,!1,!1);f=[9,f,b];a.f.push(f);a.b.push(f);return d}l=un.prototype;
l.Xc=function(){this.c||(this.c=Ka(this.za),0<this.a&&Ja(this.c,this.resolution*(this.a+1)/2,this.c));return this.c};function wn(a){var b=a.j,c=b.strokeStyle,d=b.lineCap,e=b.lineDash,f=b.lineDashOffset,g=b.lineJoin,h=b.lineWidth,k=b.miterLimit;b.Eb==c&&b.yb==d&&ja(b.zb,e)&&b.Ab==f&&b.Bb==g&&b.Cb==h&&b.Db==k||(void 0!=b.nb&&b.nb!=a.coordinates.length&&(a.f.push([13]),b.nb=a.coordinates.length),b.nb=0,a.f.push([11,c,h,d,g,k,e,f,!0,1],[1]),b.Eb=c,b.yb=d,b.zb=e,b.Ab=f,b.Bb=g,b.Cb=h,b.Db=k)}
l.Pc=function(a,b){var c=this.j,d=c.lineWidth;void 0!==c.strokeStyle&&void 0!==d&&(wn(this),pn(this,b),this.b.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset,!0,1],[1]),c=a.o,vn(this,c,0,c.length,a.A),this.b.push([13]),qn(this,b))};
l.Qc=function(a,b){var c=this.j,d=c.lineWidth;if(void 0!==c.strokeStyle&&void 0!==d){wn(this);pn(this,b);this.b.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset,!0,1],[1]);c=a.Qa();d=a.o;a=a.A;var e=0,f;var g=0;for(f=c.length;g<f;++g)e=vn(this,d,e,c[g],a);this.b.push([13]);qn(this,b)}};l.kc=function(){var a=this.j;void 0!=a.nb&&a.nb!=this.coordinates.length&&this.f.push([13]);sn(this);this.j=null};
l.Sa=function(a,b){a=b.b;this.j.strokeStyle=Gc(a?a:Gg);a=b.c;this.j.lineCap=void 0!==a?a:"round";a=b.f;this.j.lineDash=a?a:Fg;a=b.i;this.j.lineDashOffset=a?a:0;a=b.g;this.j.lineJoin=void 0!==a?a:"round";a=b.a;this.j.lineWidth=void 0!==a?a:1;b=b.B;this.j.miterLimit=void 0!==b?b:10;this.j.lineWidth>this.a&&(this.a=this.j.lineWidth,this.c=null)};function xn(a,b,c,d){mn.call(this,a,b,c,d);this.c=null;this.j={Vd:void 0,Eb:void 0,yb:void 0,zb:null,Ab:void 0,Bb:void 0,Cb:void 0,Db:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}t(xn,mn);
function yn(a,b,c,d,e){var f=a.j,g=void 0!==f.fillStyle;f=void 0!=f.strokeStyle;var h=d.length,k=[1];a.f.push(k);a.b.push(k);for(k=0;k<h;++k){var m=d[k],n=a.coordinates.length;c=nn(a,b,c,m,e,!0,!f);c=[9,n,c];a.f.push(c);a.b.push(c);f&&(c=[3],a.f.push(c),a.b.push(c));c=m}b=[8];a.b.push(b);g&&a.f.push(b);f&&(g=[13],a.f.push(g),a.b.push(g));return c}l=xn.prototype;
l.Oc=function(a,b){var c=this.j,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){zn(this,a);pn(this,b);this.b.push([10,Dc(Eg)]);void 0!==c.strokeStyle&&this.b.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset,!0,1]);var e=a.o;d=this.coordinates.length;nn(this,e,0,e.length,a.A,!1,!1);a=[1];d=[2,d];this.f.push(a,d);this.b.push(a,d);a=[8];this.b.push(a);void 0!==c.fillStyle&&this.f.push(a);void 0!==c.strokeStyle&&(c=[13],this.f.push(c),this.b.push(c));
qn(this,b)}};l.Uc=function(a,b){var c=this.j;zn(this,a);pn(this,b);this.b.push([10,Dc(Eg)]);void 0!==c.strokeStyle&&this.b.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset,!0,1]);c=a.Qa();var d=Ye(a);yn(this,d,0,c,a.A);qn(this,b)};
l.Sc=function(a,b){var c=this.j,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){zn(this,a);pn(this,b);this.b.push([10,Dc(Eg)]);void 0!==c.strokeStyle&&this.b.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset,!0,1]);c=a.a;d=Sg(a);a=a.A;var e=0,f;var g=0;for(f=c.length;g<f;++g)e=yn(this,d,e,c[g],a);qn(this,b)}};l.kc=function(){sn(this);this.j=null;var a=this.Ka;if(a){var b=this.coordinates,c;var d=0;for(c=b.length;d<c;++d)b[d]=a*Math.round(b[d]/a)}};
l.Xc=function(){this.c||(this.c=Ka(this.za),0<this.a&&Ja(this.c,this.resolution*(this.a+1)/2,this.c));return this.c};
l.Sa=function(a,b){var c=this.j;a?(a=a.b,c.fillStyle=Gc(a?a:Eg)):c.fillStyle=void 0;b?(a=b.b,c.strokeStyle=Gc(a?a:Gg),a=b.c,c.lineCap=void 0!==a?a:"round",a=b.f,c.lineDash=a?a.slice():Fg,a=b.i,c.lineDashOffset=a?a:0,a=b.g,c.lineJoin=void 0!==a?a:"round",a=b.a,c.lineWidth=void 0!==a?a:1,b=b.B,c.miterLimit=void 0!==b?b:10,c.lineWidth>this.a&&(this.a=c.lineWidth,this.c=null)):(c.strokeStyle=void 0,c.lineCap=void 0,c.lineDash=null,c.lineDashOffset=void 0,c.lineJoin=void 0,c.lineWidth=void 0,c.miterLimit=
void 0)};function zn(a,b){var c=a.j,d=c.fillStyle,e=c.strokeStyle,f=c.lineCap,g=c.lineDash,h=c.lineDashOffset,k=c.lineJoin,m=c.lineWidth,n=c.miterLimit;if(void 0!==d&&("string"!==typeof d||c.Vd!=d)){var p=[10,d];"string"!==typeof d&&(b=b.K(),p.push([b[0],b[3]]));a.f.push(p);c.Vd=c.fillStyle}void 0===e||c.Eb==e&&c.yb==f&&ja(c.zb,g)&&c.Ab==h&&c.Bb==k&&c.Cb==m&&c.Db==n||(a.f.push([11,e,m,f,k,n,g,h,!0,1]),c.Eb=e,c.yb=f,c.zb=g,c.Ab=h,c.Bb=k,c.Cb=m,c.Db=n)};function An(a,b,c,d){mn.call(this,a,b,c,d);this.u=this.v=this.D=null;this.da="";this.B=this.g=0;this.l=void 0;this.L=this.s=0;this.i=this.c=this.j=null}t(An,mn);
An.prototype.Pa=function(a,b,c,d,e,f){if(""!==this.da&&this.i&&(this.j||this.c)){if(this.j){e=this.j;var g=this.D;if(!g||g.fillStyle!=e.fillStyle){var h=[10,e.fillStyle];this.f.push(h);this.b.push(h);g?g.fillStyle=e.fillStyle:this.D={fillStyle:e.fillStyle}}}this.c&&(e=this.c,g=this.v,g&&g.lineCap==e.lineCap&&g.lineDash==e.lineDash&&g.lineDashOffset==e.lineDashOffset&&g.lineJoin==e.lineJoin&&g.lineWidth==e.lineWidth&&g.miterLimit==e.miterLimit&&g.strokeStyle==e.strokeStyle||(h=[11,e.strokeStyle,e.lineWidth,
e.lineCap,e.lineJoin,e.miterLimit,e.lineDash,e.lineDashOffset,!1,1],this.f.push(h),this.b.push(h),g?(g.lineCap=e.lineCap,g.lineDash=e.lineDash,g.lineDashOffset=e.lineDashOffset,g.lineJoin=e.lineJoin,g.lineWidth=e.lineWidth,g.miterLimit=e.miterLimit,g.strokeStyle=e.strokeStyle):this.v={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle}));e=this.i;g=this.u;g&&g.font==e.font&&g.textAlign==
e.textAlign&&g.textBaseline==e.textBaseline||(h=[12,e.font,e.textAlign,e.textBaseline],this.f.push(h),this.b.push(h),g?(g.font=e.font,g.textAlign=e.textAlign,g.textBaseline=e.textBaseline):this.u={font:e.font,textAlign:e.textAlign,textBaseline:e.textBaseline});pn(this,f);e=this.coordinates.length;a=nn(this,a,b,c,d,!1,!1);a=[6,e,a,this.da,this.g,this.B,this.s,this.L,!!this.j,!!this.c,this.l];this.f.push(a);this.b.push(a);qn(this,f)}};
An.prototype.Ma=function(a){if(a){var b=a.ra();b?(b=b.b,b=Gc(b?b:Eg),this.j?this.j.fillStyle=b:this.j={fillStyle:b}):this.j=null;var c=a.na();if(c){b=c.b;var d=c.c,e=c.f,f=c.i,g=c.g,h=c.a;c=c.B;d=void 0!==d?d:"round";e=e?e.slice():Fg;f=void 0!==f?f:0;g=void 0!==g?g:"round";h=void 0!==h?h:1;c=void 0!==c?c:10;b=Gc(b?b:Gg);if(this.c){var k=this.c;k.lineCap=d;k.lineDash=e;k.lineDashOffset=f;k.lineJoin=g;k.lineWidth=h;k.miterLimit=c;k.strokeStyle=b}else this.c={lineCap:d,lineDash:e,lineDashOffset:f,lineJoin:g,
lineWidth:h,miterLimit:c,strokeStyle:b}}else this.c=null;var m=a.f;b=a.j;d=a.a;e=a.c;h=a.i;c=a.b;f=a.oa();g=a.g;k=a.B;a=void 0!==m?m:"10px sans-serif";g=void 0!==g?g:"center";k=void 0!==k?k:"middle";this.i?(m=this.i,m.font=a,m.textAlign=g,m.textBaseline=k):this.i={font:a,textAlign:g,textBaseline:k};this.da=void 0!==f?f:"";this.g=void 0!==b?b:0;this.B=void 0!==d?d:0;this.l=void 0!==e?e:!1;this.s=void 0!==h?h:0;this.L=void 0!==c?c:1}else this.da=""};function Bn(a,b,c,d,e){this.B=a;this.f=b;this.i=d;this.g=c;this.j=e;this.b={};this.a=Hc(1,1);this.c=vg()}t(Bn,Xg);var Cn={0:[[!0]]};function Dn(a,b,c){var d,e=Math.floor(a.length/2);if(b>=e)for(d=e;d<b;d++)a[d][c]=!0;else if(b<e)for(d=b+1;d<e;d++)a[d][c]=!0}
function En(a){if(void 0!==Cn[a])return Cn[a];for(var b=2*a+1,c=Array(b),d=0;d<b;d++)c[d]=Array(b);b=a;for(var e=d=0;b>=d;)Dn(c,a+b,a+d),Dn(c,a+d,a+b),Dn(c,a-d,a+b),Dn(c,a-b,a+d),Dn(c,a-b,a-d),Dn(c,a-d,a-b),Dn(c,a+d,a-b),Dn(c,a+b,a-d),d++,e+=1+2*d,0<2*(e-b)+1&&(--b,e+=1-2*b);return Cn[a]=c}function Fn(a){for(var b in a.b){var c=a.b[b],d;for(d in c)c[d].kc()}}
function Gn(a,b,c,d,e,f){e=Math.round(e);var g=2*e+1,h=yg(a.c,e+.5,e+.5,1/c,-1/c,-d,-b[0],-b[1]),k=a.a;k.canvas.width!==g||k.canvas.height!==g?(k.canvas.width=g,k.canvas.height=g):k.clearRect(0,0,g,g);if(void 0!==a.j){var m=Ha();Ia(m,b);Ja(m,c*(a.j+e),m)}var n=En(e);return Hn(a,k,h,d,function(a){for(var b=k.getImageData(0,0,g,g).data,c=0;c<g;c++)for(var d=0;d<g;d++)if(n[c][d]&&0<b[4*(d*g+c)+3]){if(a=f(a))return a;k.clearRect(0,0,g,g);return}},m)}
function In(a,b,c){var d=void 0!==b?b.toString():"0";b=a.b[d];void 0===b&&(b={},a.b[d]=b);d=b[c];void 0===d&&(d=new Jn[c](a.B,a.f,a.g,a.i),b[c]=d);return d}
function Kn(a,b,c,d,e,f){var g=Object.keys(a.b).map(Number);g.sort(fa);var h=a.f,k=h[0],m=h[1],n=h[2];h=h[3];k=[k,m,k,h,n,h,n,m];ve(k,0,8,2,d,k);b.save();b.beginPath();b.moveTo(k[0],k[1]);b.lineTo(k[2],k[3]);b.lineTo(k[4],k[5]);b.lineTo(k[6],k[7]);b.clip();k=0;for(m=g.length;k<m;++k){var p=a.b[g[k].toString()];n=0;for(h=Wg.length;n<h;++n){var r=p[Wg[n]];void 0!==r&&rn(r,b,c,d,e,f,r.f,void 0,void 0)}}b.restore()}
function Hn(a,b,c,d,e,f){var g={},h=Object.keys(a.b).map(Number);h.sort(function(a,b){return b-a});var k,m;var n=0;for(k=h.length;n<k;++n){var p=a.b[h[n].toString()];for(m=Wg.length-1;0<=m;--m){var r=p[Wg[m]];if(void 0!==r&&(r=rn(r,b,1,c,d,g,r.b,e,f)))return r}}}var Jn={Circle:xn,Default:mn,Image:tn,LineString:un,Polygon:xn,Text:An};function Ln(a){mc.call(this);this.a=a}t(Ln,mc);Ln.prototype.l=na;function Mn(a,b,c){return function(d,e){return Nn(a,b,d,e,function(a){c[d]||(c[d]={});c[d][a.Na.toString()]=a})}}function On(a,b){b.jd()&&a.postRenderFunctions.push(function(a,b,e){b=v(a).toString();b in e.usedTiles&&a.Fb(e.viewState.projection,e.usedTiles[b])}.bind(null,b))}function Pn(a,b){if(b){var c;var d=0;for(c=b.length;d<c;++d){var e=b[d];a[v(e).toString()]=e}}}
function Qn(a,b){b=b.$;void 0!==b&&("string"===typeof b?a.logos[b]="":b&&(w("string"==typeof b.href,44),w("string"==typeof b.src,45),a.logos[b.src]=b.href))};function Rn(a){Ln.call(this,a);this.X=vg()}t(Rn,Ln);function Sn(a,b,c){var d=b.pixelRatio,e=b.size[0]*d,f=b.size[1]*d,g=b.viewState.rotation,h=Wa(c),k=[c[2],c[3]],m=[c[2],c[1]];c=[c[0],c[1]];xg(b.coordinateToPixelTransform,h);xg(b.coordinateToPixelTransform,k);xg(b.coordinateToPixelTransform,m);xg(b.coordinateToPixelTransform,c);a.save();Hg(a,-g,e/2,f/2);a.beginPath();a.moveTo(h[0]*d,h[1]*d);a.lineTo(k[0]*d,k[1]*d);a.lineTo(m[0]*d,m[1]*d);a.lineTo(c[0]*d,c[1]*d);a.clip();Hg(a,g,e/2,f/2)}
function Tn(a,b,c,d,e){var f=a.a;if(lc(f,b)){var g=d.size[0]*d.pixelRatio,h=d.size[1]*d.pixelRatio,k=d.viewState.rotation;Hg(c,-k,g/2,h/2);a=e?e:Un(a,d,0);f.f(new Dg(b,new Jg(c,d.pixelRatio,d.extent,a,d.viewState.rotation),d,c,null));Hg(c,k,g/2,h/2)}}Rn.prototype.L=function(a,b,c,d){if(this.l(a,b,0,se,this))return c.call(d,this.a,null)};function Un(a,b,c){var d=b.viewState,e=b.pixelRatio,f=e/d.resolution;return yg(a.X,e*b.size[0]/2,e*b.size[1]/2,f,-f,-d.rotation,-d.center[0]+c,-d.center[1])};function Vn(a,b){return v(a)-v(b)}function Wn(a,b){a=.5*a/b;return a*a}function Xn(a,b,c,d,e,f){var g=!1,h;if(h=c.ha()){var k=h.nc();2==k||3==k?h.hf(e,f):(0==k&&h.load(),h.je(e,f),g=!0)}if(e=(0,c.Aa)(b))if(d=e.ad(d),c.$c())Yn(a,d,c,b);else(0,Zn[d.I()])(a,d,c,b);return g}function Yn(a,b,c,d){if("GeometryCollection"==b.I()){b=xi(b.a);for(var e=0,f=b.length;e<f;++e)Yn(a,b[e],c,d)}else In(a,c.pa(),"Default").Xd(b,d,c.$c())}
var Zn={Point:function(a,b,c,d){var e=c.ha();if(e){if(2!=e.nc())return;var f=In(a,c.pa(),"Image");f.wc(e);f.Tc(b,d)}if(e=c.oa())a=In(a,c.pa(),"Text"),a.Ma(e),a.Pa(b.o,0,2,2,b,d)},LineString:function(a,b,c,d){var e=c.na();if(e){var f=In(a,c.pa(),"LineString");f.Sa(null,e);f.Pc(b,d)}if(e=c.oa())a=In(a,c.pa(),"Text"),a.Ma(e),a.Pa(Qg(b),0,2,2,b,d)},Polygon:function(a,b,c,d){var e=c.ra(),f=c.na();if(e||f){var g=In(a,c.pa(),"Polygon");g.Sa(e,f);g.Uc(b,d)}if(e=c.oa())a=In(a,c.pa(),"Text"),a.Ma(e),a.Pa(Ze(b),
0,2,2,b,d)},MultiPoint:function(a,b,c,d){var e=c.ha();if(e){if(2!=e.nc())return;var f=In(a,c.pa(),"Image");f.wc(e);f.Rc(b,d)}if(e=c.oa())a=In(a,c.pa(),"Text"),a.Ma(e),c=b.o,a.Pa(c,0,c.length,b.A,b,d)},MultiLineString:function(a,b,c,d){var e=c.na();if(e){var f=In(a,c.pa(),"LineString");f.Sa(null,e);f.Qc(b,d)}if(e=c.oa())a=In(a,c.pa(),"Text"),a.Ma(e),c=Rg(b),a.Pa(c,0,c.length,2,b,d)},MultiPolygon:function(a,b,c,d){var e=c.ra(),f=c.na();if(f||e){var g=In(a,c.pa(),"Polygon");g.Sa(e,f);g.Sc(b,d)}if(e=
c.oa())a=In(a,c.pa(),"Text"),a.Ma(e),c=Tg(b),a.Pa(c,0,c.length,2,b,d)},GeometryCollection:function(a,b,c,d){b=b.a;var e;var f=0;for(e=b.length;f<e;++f)(0,Zn[b[f].I()])(a,b[f],c,d)},Circle:function(a,b,c,d){var e=c.ra(),f=c.na();if(e||f){var g=In(a,c.pa(),"Circle");g.Sa(e,f);g.Oc(b,d)}if(e=c.oa())a=In(a,c.pa(),"Text"),a.Ma(e),a.Pa(b.ba(),0,2,2,b,d)}};function $n(a){Rn.call(this,a);this.c=!1;this.J=-1;this.C=NaN;this.v=Ha();this.i=this.u=null;this.g=Hc()}t($n,Rn);
$n.prototype.D=function(a,b,c){var d=a.extent,e=a.pixelRatio,f=b.fd?a.skippedFeatureUids:{},g=a.viewState,h=g.projection,k=g.rotation,m=h.K(),n=this.a.ca(),p=Un(this,a,0);Tn(this,"precompose",c,a,p);var r=b.extent;(g=void 0!==r)&&Sn(c,a,r);var u=this.i;if(u&&!bb(u.b)){var D=r=0,F=1!==b.opacity,C=lc(this.a,"render");if(F||C){var A=c.canvas.width;var H=c.canvas.height;if(k){var K=Math.round(Math.sqrt(A*A+H*H));r=(K-A)/2;D=(K-H)/2;A=H=K}this.g.canvas.width=A;this.g.canvas.height=H;A=this.g}else A=c;
H=A.globalAlpha;F||(A.globalAlpha=b.opacity);A!=c&&A.translate(r,D);K=a.size[0]*e;var ca=a.size[1]*e;Hg(A,-k,K/2,ca/2);Kn(u,A,e,p,k,f);if(n.D&&h.a&&!Ma(m,d)){h=d[0];n=Xa(m);for(var R=0;h<m[0];)--R,p=n*R,p=Un(this,a,p),Kn(u,A,e,p,k,f),h+=n;R=0;for(h=d[2];h>m[2];)++R,p=n*R,p=Un(this,a,p),Kn(u,A,e,p,k,f),h-=n;p=Un(this,a,0)}Hg(A,k,K/2,ca/2);A!=c&&(C&&Tn(this,"render",A,a,p),F?(d=c.globalAlpha,c.globalAlpha=b.opacity,c.drawImage(A.canvas,-r,-D),c.globalAlpha=d):c.drawImage(A.canvas,-r,-D),A.translate(-r,
-D));F||(A.globalAlpha=H)}g&&c.restore();Tn(this,"postcompose",c,a,p)};$n.prototype.l=function(a,b,c,d,e){if(this.i){var f=this.a,g={};return Gn(this.i,a,b.viewState.resolution,b.viewState.rotation,c,function(a){var b=v(a).toString();if(!(b in g))return g[b]=!0,d.call(e,a,f)})}};$n.prototype.s=function(){var a=this.a;a.l()&&"ready"==a.bd()&&this.b()};
$n.prototype.H=function(a){var b=this.a,c=b.ca();Pn(a.attributions,c.C);Qn(a,c);var d=a.viewHints[0],e=a.viewHints[1],f=b.H,g=b.J;if(!this.c&&!f&&d||!g&&e)return!0;f=a.extent;var h=a.viewState;g=h.projection;var k=h.resolution,m=a.pixelRatio;d=b.j;var n=b.s;e=b.get(ao);void 0===e&&(e=Vn);f=Ja(f,n*k);n=h.projection.K();c.D&&h.projection.a&&!Ma(n,a.extent)&&(a=Math.max(Xa(f)/2,Xa(n)),f[0]=n[0]-a,f[2]=n[2]+a);if(!this.c&&this.C==k&&this.J==d&&this.u==e&&Ma(this.v,f))return!0;this.i=null;this.c=!1;var p=
new Bn(.5*k/m,f,k,c.ka,b.s);c.ed(f,k,g);a=function(a){var c=a.ac();if(c)var d=c.call(a,k);else(c=b.ac())&&(d=c(a,k));if(d){if(d){c=!1;if(Array.isArray(d))for(var e=0,f=d.length;e<f;++e)c=Xn(p,a,d[e],Wn(k,m),this.s,this)||c;else c=Xn(p,a,d,Wn(k,m),this.s,this)||c;a=c}else a=!1;this.c=this.c||a}}.bind(this);if(e){var r=[];bo(c,f,function(a){r.push(a)},this);r.sort(e);c=0;for(g=r.length;c<g;++c)a(r[c])}else bo(c,f,a,this);Fn(p);this.C=k;this.J=d;this.u=e;this.v=f;this.i=p;return!0};function co(a){a=a?a:{};var b=Za({},a);delete b.style;delete b.renderBuffer;delete b.updateWhileAnimating;delete b.updateWhileInteracting;sg.call(this,b);this.s=void 0!==a.renderBuffer?a.renderBuffer:100;this.v=null;this.D=void 0;this.u(a.style);this.H=void 0!==a.updateWhileAnimating?a.updateWhileAnimating:!1;this.J=void 0!==a.updateWhileInteracting?a.updateWhileInteracting:!1}t(co,sg);co.prototype.Nc=function(a){var b=null;"canvas"===a.I()&&(b=new $n(this));return b};co.prototype.ac=function(){return this.D};
co.prototype.u=function(a){this.v=void 0!==a?a:Ih;this.D=null===a?void 0:Gh(this.v);this.b()};var ao="renderOrder";function eo(){return[[-Infinity,-Infinity,Infinity,Infinity]]};function fo(a){nc.call(this);this.J=Ab(a.projection);this.C=go(a.attributions);this.$=a.logo;this.ga=void 0!==a.state?a.state:"ready";this.D=void 0!==a.wrapX?a.wrapX:!1}t(fo,nc);function go(a){if("string"===typeof a)return[new Ub({html:a})];if(a instanceof Ub)return[a];if(Array.isArray(a)){for(var b=a.length,c=Array(b),d=0;d<b;d++){var e=a[d];c[d]="string"===typeof e?new Ub({html:e}):e}return c}return null}fo.prototype.X=na;fo.prototype.lc=function(){this.b()};function ho(a){a=a||{};fo.call(this,{attributions:a.attributions,logo:a.logo,projection:void 0,state:"ready",wrapX:void 0!==a.wrapX?a.wrapX:!0});this.v=na;this.u=a.format;this.ka=void 0==a.overlaps?!0:a.overlaps;this.V=a.url;a.loader?this.v=a.loader:void 0!==this.V&&(w(this.u,7),this.v=Yh(this.V,this.u));this.sa=a.strategy?a.strategy:eo;var b=void 0!==a.useSpatialIndex?a.useSpatialIndex:!0;this.a=b?new $g:null;this.H=new $g;this.c={};this.g={};this.l={};this.s={};this.i=null;if(a.features instanceof
sc){var c=a.features;var d=c.a}else Array.isArray(a.features)&&(d=a.features);b||c||(c=new sc(d));d&&io(this,d);c&&jo(this,c)}t(ho,fo);l=ho.prototype;l.Oa=function(a){var b=v(a).toString();if(ko(this,b,a)){lo(this,b,a);var c=a.P();c?(b=c.K(),this.a&&this.a.aa(b,a)):this.c[b]=a;this.f(new mo("addfeature",a))}this.b()};function lo(a,b,c){a.s[b]=[y(c,"change",a.Je,a),y(c,"propertychange",a.Je,a)]}
function ko(a,b,c){var d=!0,e=c.a;void 0!==e?e.toString()in a.g?d=!1:a.g[e.toString()]=c:(w(!(b in a.l),30),a.l[b]=c);return d}l.wb=function(a){io(this,a);this.b()};function io(a,b){var c,d=[],e=[],f=[];var g=0;for(c=b.length;g<c;g++){var h=b[g];var k=v(h).toString();ko(a,k,h)&&e.push(h)}g=0;for(c=e.length;g<c;g++)h=e[g],k=v(h).toString(),lo(a,k,h),(b=h.P())?(k=b.K(),d.push(k),f.push(h)):a.c[k]=h;a.a&&a.a.load(d,f);g=0;for(c=e.length;g<c;g++)a.f(new mo("addfeature",e[g]))}
function jo(a,b){var c=!1;y(a,"addfeature",function(a){c||(c=!0,b.push(a.feature),c=!1)});y(a,"removefeature",function(a){c||(c=!0,b.remove(a.feature),c=!1)});y(b,"add",function(a){c||(c=!0,this.Oa(a.element),c=!1)},a);y(b,"remove",function(a){c||(c=!0,this.Ia(a.element),c=!1)},a);a.i=b}
l.clear=function(a){if(a){for(var b in this.s)this.s[b].forEach(Zb);this.i||(this.s={},this.g={},this.l={})}else if(this.a){this.a.forEach(this.xd,this);for(var c in this.c)this.xd(this.c[c])}this.i&&this.i.clear();this.a&&this.a.clear();this.H.clear();this.c={};this.f(new mo("clear"));this.b()};function bo(a,b,c,d){a.a?eh(a.a,b,c,d):a.i&&a.i.forEach(c,d)}l.mc=function(){if(this.i)var a=this.i.a;else this.a&&(a=bh(this.a),bb(this.c)||ia(a,ab(this.c)));return a};l.K=function(a){return this.a.K(a)};
l.gg=function(a){a=this.g[a.toString()];return void 0!==a?a:null};l.Xh=function(){return this.u};l.Je=function(a){a=a.target;var b=v(a).toString(),c=a.P();c?(c=c.K(),b in this.c?(delete this.c[b],this.a&&this.a.aa(c,a)):this.a&&ah(this.a,c,a)):b in this.c||(this.a&&this.a.remove(a),this.c[b]=a);c=a.a;void 0!==c?(c=c.toString(),b in this.l?(delete this.l[b],this.g[c]=a):this.g[c]!==a&&(no(this,a),this.g[c]=a)):b in this.l||(no(this,a),this.l[b]=a);this.b();this.f(new mo("changefeature",a))};
l.ed=function(a,b,c){var d=this.H;a=this.sa(a,b);var e;var f=0;for(e=a.length;f<e;++f){var g=a[f];eh(d,g,function(a){return Ma(a.extent,g)})||(this.v.call(this,g,b,c),d.aa(g,{extent:g.slice()}))}};l.Ia=function(a){var b=v(a).toString();b in this.c?delete this.c[b]:this.a&&this.a.remove(a);this.xd(a);this.b()};l.xd=function(a){var b=v(a).toString();this.s[b].forEach(Zb);delete this.s[b];var c=a.a;void 0!==c?delete this.g[c.toString()]:delete this.l[b];this.f(new mo("removefeature",a))};
function no(a,b){for(var c in a.g)if(a.g[c]===b){delete a.g[c];break}}function mo(a,b){ic.call(this,a);this.feature=b}t(mo,ic);function oo(a){Af.call(this,{handleDownEvent:po,handleEvent:qo,handleUpEvent:ro});this.J=!1;this.$=null;this.g=!1;this.eb=a.source?a.source:null;this.Da=a.features?a.features:null;this.ag=a.snapTolerance?a.snapTolerance:12;this.V=a.type;this.c=so(this.V);this.sa=a.minPoints?a.minPoints:this.c===to?3:2;this.ka=a.maxPoints?a.maxPoints:Infinity;this.Dc=a.finishCondition?a.finishCondition:se;var b=a.geometryFunction;if(!b)if("Circle"===this.V)b=function(a,b){b=b?b:new dn([NaN,NaN]);en(b,a[0],Math.sqrt(pe(a[0],
a[1])));return b};else{var c,d=this.c;d===uo?c=Qe:d===vo?c=S:d===to&&(c=z);b=function(a,b){b?d===to?b.Y([a[0].concat([a[0][0]])]):b.Y(a):b=new c(a);return b}}this.Aa=b;this.H=this.u=this.a=this.C=this.l=this.s=null;this.fb=a.clickTolerance?a.clickTolerance*a.clickTolerance:36;this.ga=new co({source:new ho({useSpatialIndex:!1,wrapX:a.wrapX?a.wrapX:!1}),style:a.style?a.style:wo()});this.Fa=a.geometryName;this.Zf=a.condition?a.condition:vf;this.Bc=a.freehand?se:a.freehandCondition?a.freehandCondition:
wf;y(this,pc("active"),this.gb,this)}t(oo,Af);function wo(){var a=Jh();return function(b){return a[b.P().I()]}}oo.prototype.setMap=function(a){Af.prototype.setMap.call(this,a);this.gb()};function qo(a){this.g=this.c!==uo&&this.Bc(a);var b=!this.g;this.g&&"pointerdrag"===a.type&&null!==this.l?(xo(this,a),b=!1):"pointermove"===a.type?b=yo(this,a):"dblclick"===a.type&&(b=!1);return Bf.call(this,a)&&b}
function po(a){this.J=!this.g;return this.g?(this.$=a.pixel,this.s||zo(this,a),!0):this.Zf(a)?(this.$=a.pixel,!0):!1}function ro(a){var b=!0;yo(this,a);var c=this.c===Ao;this.J?(this.s?this.g||c?Bo(this):Co(this,a)?this.Dc(a)&&Bo(this):xo(this,a):(zo(this,a),this.c===uo&&Bo(this)),b=!1):this.g&&(this.s=null,Do(this));return b}
function yo(a,b){if(a.$&&(!a.g&&a.J||a.g&&!a.J)){var c=a.$,d=b.pixel,e=c[0]-d[0];c=c[1]-d[1];e=e*e+c*c;a.J=a.g?e>a.fb:e<=a.fb}a.s?(e=b.coordinate,c=a.l.P(),a.c===uo?d=a.a:a.c===to?(d=a.a[0],d=d[d.length-1],Co(a,b)&&(e=a.s.slice())):(d=a.a,d=d[d.length-1]),d[0]=e[0],d[1]=e[1],a.Aa(a.a,c),a.C&&a.C.P().Y(e),c instanceof z&&a.c!==to?(a.u||(a.u=new E(new S(null))),e=c.de(0),b=a.u.P(),gi(b,e.W,e.o)):a.H&&(b=a.u.P(),b.Y(a.H)),Eo(a)):(b=b.coordinate.slice(),a.C?a.C.P().Y(b):(a.C=new E(new Qe(b)),Eo(a)));
return!0}function Co(a,b){var c=!1;if(a.l){var d=!1,e=[a.s];a.c===vo?d=a.a.length>a.sa:a.c===to&&(d=a.a[0].length>a.sa,e=[a.a[0][0],a.a[0][a.a[0].length-2]]);if(d){d=b.map;for(var f=0,g=e.length;f<g;f++){var h=e[f],k=Hf(d,h),m=b.pixel;c=m[0]-k[0];k=m[1]-k[1];if(c=Math.sqrt(c*c+k*k)<=(a.g?1:a.ag)){a.s=h;break}}}}return c}
function zo(a,b){b=b.coordinate;a.s=b;a.c===uo?a.a=b.slice():a.c===to?(a.a=[[b.slice(),b.slice()]],a.H=a.a[0]):(a.a=[b.slice(),b.slice()],a.c===Ao&&(a.H=a.a));a.H&&(a.u=new E(new S(a.H)));b=a.Aa(a.a);a.l=new E;a.Fa&&a.l.sb(a.Fa);a.l.xa(b);Eo(a);a.f(new Fo("drawstart",a.l))}
function xo(a,b){b=b.coordinate;var c=a.l.P(),d;if(a.c===vo){a.s=b.slice();var e=a.a;e.length>=a.ka&&(a.g?e.pop():d=!0);e.push(b.slice());a.Aa(e,c)}else a.c===to&&(e=a.a[0],e.length>=a.ka&&(a.g?e.pop():d=!0),e.push(b.slice()),d&&(a.s=e[0]),a.Aa(a.a,c));Eo(a);d&&Bo(a)}
function Bo(a){var b=Do(a),c=a.a,d=b.P();a.c===vo?(c.pop(),a.Aa(c,d)):a.c===to&&(c[0].pop(),a.Aa(c,d),c=d.G());"MultiPoint"===a.V?b.xa(new ki([c])):"MultiLineString"===a.V?b.xa(new hi([c])):"MultiPolygon"===a.V&&b.xa(new mi([c]));a.f(new Fo("drawend",b));a.Da&&a.Da.push(b);a.eb&&a.eb.Oa(b)}function Do(a){a.s=null;var b=a.l;b&&(a.l=null,a.C=null,a.u=null,a.ga.ca().clear(!0));return b}oo.prototype.bb=te;
function Eo(a){var b=[];a.l&&b.push(a.l);a.u&&b.push(a.u);a.C&&b.push(a.C);a=a.ga.ca();a.clear(!0);a.wb(b)}oo.prototype.gb=function(){var a=this.D,b=this.get("active");a&&b||Do(this);this.ga.setMap(b?a:null)};function so(a){var b;"Point"===a||"MultiPoint"===a?b=uo:"LineString"===a||"MultiLineString"===a?b=vo:"Polygon"===a||"MultiPolygon"===a?b=to:"Circle"===a&&(b=Ao);return b}var uo="Point",vo="LineString",to="Polygon",Ao="Circle";function Fo(a,b){ic.call(this,a);this.feature=b}t(Fo,ic);function Go(a){Af.call(this,{handleDownEvent:Ho,handleDragEvent:Io,handleEvent:Jo,handleUpEvent:Ko});this.gb=a.condition?a.condition:zf;this.Fa=function(a){var b=a.originalEvent;return b.altKey&&!(b.metaKey||b.ctrlKey)&&!b.shiftKey&&uf(a)};this.eb=a.deleteCondition?a.deleteCondition:this.Fa;this.fb=a.insertVertexCondition?a.insertVertexCondition:se;this.Da=this.c=null;this.sa=[0,0];this.u=this.H=!1;this.a=new $g;this.ga=void 0!==a.pixelTolerance?a.pixelTolerance:10;this.l=this.ka=!1;this.g=[];this.C=
new co({source:new ho({useSpatialIndex:!1,wrapX:!!a.wrapX}),style:a.style?a.style:Lo(),updateWhileAnimating:!0,updateWhileInteracting:!0});this.$={Point:this.Nh,LineString:this.Fe,LinearRing:this.Fe,Polygon:this.Oh,MultiPoint:this.Lh,MultiLineString:this.Kh,MultiPolygon:this.Mh,Circle:this.Ih,GeometryCollection:this.Jh};this.V=null;a.source?(this.V=a.source,a=new sc(this.V.mc()),y(this.V,"addfeature",this.Hg,this),y(this.V,"removefeature",this.Kg,this)):a=a.features;if(!a)throw Error("The modify interaction requires features or a source");
this.s=a;this.s.forEach(this.hd,this);y(this.s,"add",this.Gh,this);y(this.s,"remove",this.Hh,this);this.J=null}t(Go,Af);l=Go.prototype;l.hd=function(a){var b=a.P();b&&b.I()in this.$&&this.$[b.I()].call(this,a,b);(b=this.D)&&b.c&&this.get("active")&&Mo(this,this.sa,b);y(a,"change",this.Ee,this)};function No(a,b){a.u||(a.u=!0,a.f(new Oo("modifystart",a.s,b)))}function Po(a,b){Qo(a,b);a.c&&!a.s.Wa()&&(a.C.ca().Ia(a.c),a.c=null);dc(b,"change",a.Ee,a)}
function Qo(a,b){a=a.a;var c=[];a.forEach(function(a){b===a.feature&&c.push(a)});for(var d=c.length-1;0<=d;--d)a.remove(c[d])}l.Ya=function(a){this.c&&!a&&(this.C.ca().Ia(this.c),this.c=null);Af.prototype.Ya.call(this,a)};l.setMap=function(a){this.C.setMap(a);Af.prototype.setMap.call(this,a)};l.Hg=function(a){a.feature&&this.s.push(a.feature)};l.Kg=function(a){a.feature&&this.s.remove(a.feature)};l.Gh=function(a){this.hd(a.element)};l.Ee=function(a){this.l||(a=a.target,Po(this,a),this.hd(a))};
l.Hh=function(a){Po(this,a.element)};l.Nh=function(a,b){var c=b.G();a={feature:a,geometry:b,T:[c,c]};this.a.aa(b.K(),a)};l.Lh=function(a,b){var c=b.G(),d;var e=0;for(d=c.length;e<d;++e){var f=c[e];f={feature:a,geometry:b,depth:[e],index:e,T:[f,f]};this.a.aa(b.K(),f)}};l.Fe=function(a,b){var c=b.G(),d;var e=0;for(d=c.length-1;e<d;++e){var f=c.slice(e,e+2);var g={feature:a,geometry:b,index:e,T:f};this.a.aa(Fa(f),g)}};
l.Kh=function(a,b){var c=b.G(),d,e;var f=0;for(e=c.length;f<e;++f){var g=c[f];var h=0;for(d=g.length-1;h<d;++h){var k=g.slice(h,h+2);var m={feature:a,geometry:b,depth:[f],index:h,T:k};this.a.aa(Fa(k),m)}}};l.Oh=function(a,b){var c=b.G(),d,e;var f=0;for(e=c.length;f<e;++f){var g=c[f];var h=0;for(d=g.length-1;h<d;++h){var k=g.slice(h,h+2);var m={feature:a,geometry:b,depth:[f],index:h,T:k};this.a.aa(Fa(k),m)}}};
l.Mh=function(a,b){var c=b.G(),d,e,f;var g=0;for(f=c.length;g<f;++g){var h=c[g];var k=0;for(e=h.length;k<e;++k){var m=h[k];var n=0;for(d=m.length-1;n<d;++n){var p=m.slice(n,n+2);var r={feature:a,geometry:b,depth:[k,g],index:n,T:p};this.a.aa(Fa(p),r)}}}};l.Ih=function(a,b){var c=b.ba(),d={feature:a,geometry:b,index:0,T:[c,c]};a={feature:a,geometry:b,index:1,T:[c,c]};d.Vc=a.Vc=[d,a];this.a.aa(Pa(c),d);this.a.aa(b.K(),a)};
l.Jh=function(a,b){var c=b.a;for(b=0;b<c.length;++b)this.$[c[b].I()].call(this,a,c[b])};function Ro(a,b){var c=a.c;c?c.P().Y(b):(c=new E(new Qe(b)),a.c=c,a.C.ca().Oa(c))}function So(a,b){return a.index-b.index}
function Ho(a){if(!this.gb(a))return!1;Mo(this,a.pixel,a.map);var b=a.map.Ba(a.pixel);this.g.length=0;this.u=!1;var c=this.c;if(c){var d=[];c=c.P().G();var e=Fa([c]);e=ch(this.a,e);var f={};e.sort(So);for(var g=0,h=e.length;g<h;++g){var k=e[g],m=k.T,n=v(k.feature),p=k.depth;p&&(n+="-"+p.join("-"));f[n]||(f[n]=Array(2));if("Circle"===k.geometry.I()&&1===k.index)m=To(b,k),me(m,c)&&!f[n][0]&&(this.g.push([k,0]),f[n][0]=k);else if(me(m[0],c)&&!f[n][0])this.g.push([k,0]),f[n][0]=k;else if(me(m[1],c)&&
!f[n][1]){if("LineString"!==k.geometry.I()&&"MultiLineString"!==k.geometry.I()||!f[n][0]||0!==f[n][0].index)this.g.push([k,1]),f[n][1]=k}else this.fb(a)&&v(m)in this.Da&&!f[n][0]&&!f[n][1]&&d.push([k,c])}d.length&&No(this,a);for(a=d.length-1;0<=a;--a)this.Qg.apply(this,d[a])}return!!this.c}
function Io(a){this.H=!1;No(this,a);a=a.coordinate;for(var b=0,c=this.g.length;b<c;++b){var d=this.g[b],e=d[0],f=e.depth,g=e.geometry,h=e.T;for(d=d[1];a.length<g.A;)a.push(h[d][a.length]);switch(g.I()){case "Point":var k=a;h[0]=h[1]=a;break;case "MultiPoint":k=g.G();k[e.index]=a;h[0]=h[1]=a;break;case "LineString":k=g.G();k[e.index+d]=a;h[d]=a;break;case "MultiLineString":k=g.G();k[f[0]][e.index+d]=a;h[d]=a;break;case "Polygon":k=g.G();k[f[0]][e.index+d]=a;h[d]=a;break;case "MultiPolygon":k=g.G();
k[f[1]][f[0]][e.index+d]=a;h[d]=a;break;case "Circle":h[0]=h[1]=a,0===e.index?(this.l=!0,g.Ja(a)):(this.l=!0,g.af(qe(g.ba(),a))),this.l=!1}k&&(e=g,f=k,this.l=!0,e.Y(f),this.l=!1)}Ro(this,a)}function Ko(a){for(var b,c,d=this.g.length-1;0<=d;--d)if(b=this.g[d][0],c=b.geometry,"Circle"===c.I()){var e=c.ba(),f=b.Vc[0];b=b.Vc[1];f.T[0]=f.T[1]=e;b.T[0]=b.T[1]=e;ah(this.a,Pa(e),f);ah(this.a,c.K(),b)}else ah(this.a,Fa(b.T),b);this.u&&(this.f(new Oo("modifyend",this.s,a)),this.u=!1);return!1}
function Jo(a){if(!(a instanceof sd))return!0;this.J=a;Tc(a.map.Z())[1]||"pointermove"!=a.type||this.v||(this.sa=a.pixel,Mo(this,a.pixel,a.map));if(this.c&&this.eb(a)){if("singleclick"==a.type&&this.H)var b=!0;else if(this.J&&"pointerdrag"!=this.J.type){var c=this.J;No(this,c);var d=this.g,e={},f,g;for(g=d.length-1;0<=g;--g){var h=d[g];var k=h[0];b=v(k.feature);k.depth&&(b+="-"+k.depth.join("-"));b in e||(e[b]={});0===h[1]?(e[b].right=k,e[b].index=k.index):1==h[1]&&(e[b].left=k,e[b].index=k.index+
1)}for(b in e){var m=e[b].right;var n=e[b].left;g=e[b].index;var p=g-1;k=void 0!==n?n:m;0>p&&(p=0);h=k.geometry;var r=f=h.G();var u=!1;switch(h.I()){case "MultiLineString":2<f[k.depth[0]].length&&(f[k.depth[0]].splice(g,1),u=!0);break;case "LineString":2<f.length&&(f.splice(g,1),u=!0);break;case "MultiPolygon":r=r[k.depth[1]];case "Polygon":r=r[k.depth[0]],4<r.length&&(g==r.length-1&&(g=0),r.splice(g,1),u=!0,0===g&&(r.pop(),r.push(r[0]),p=r.length-1))}u&&(u=h,this.l=!0,u.Y(f),this.l=!1,f=[],void 0!==
n&&(this.a.remove(n),f.push(n.T[0])),void 0!==m&&(this.a.remove(m),f.push(m.T[1])),void 0!==n&&void 0!==m&&(n={depth:k.depth,feature:k.feature,geometry:k.geometry,index:p,T:f},this.a.aa(Fa(n.T),n)),Uo(this,h,g,k.depth,-1),this.c&&(this.C.ca().Ia(this.c),this.c=null),d.length=0)}this.f(new Oo("modifyend",this.s,c));this.u=!1;b=!0}else b=!1;c=b}"singleclick"==a.type&&(this.H=!1);return Bf.call(this,a)&&!c}
function Mo(a,b,c){function d(a,b){return Vo(e,a)-Vo(e,b)}var e=c.Ba(b),f=Ja(Pa(e),c.Z().ua()*a.ga);f=ch(a.a,f);if(0<f.length){f.sort(d);var g=f[0],h=g.T,k=To(e,g),m=Hf(c,k),n=qe(b,m);if(n<=a.ga){b={};if("Circle"===g.geometry.I()&&1===g.index)a.ka=!0,Ro(a,k);else for(n=Hf(c,h[0]),g=Hf(c,h[1]),c=pe(m,n),m=pe(m,g),n=Math.sqrt(Math.min(c,m)),a.ka=n<=a.ga,a.ka&&(k=c>m?h[1]:h[0]),Ro(a,k),m=1,c=f.length;m<c;++m)if(k=f[m].T,me(h[0],k[0])&&me(h[1],k[1])||me(h[0],k[1])&&me(h[1],k[0]))b[v(k)]=!0;else break;
b[v(h)]=!0;a.Da=b;return}}a.c&&(a.C.ca().Ia(a.c),a.c=null)}function Vo(a,b){var c=b.geometry;return"Circle"===c.I()&&1===b.index?(a=pe(c.ba(),a),c=Math.sqrt(a)-c.Ib(),c*c):re(a,b.T)}function To(a,b){var c=b.geometry;"Circle"===c.I()&&1===b.index?(b=[NaN,NaN],c.Ga(a[0],a[1],b,Infinity),a=b):a=le(a,b.T);return a}
l.Qg=function(a,b){for(var c=a.T,d=a.feature,e=a.geometry,f=a.depth,g=a.index,h;b.length<e.A;)b.push(0);switch(e.I()){case "MultiLineString":h=e.G();h[f[0]].splice(g+1,0,b);break;case "Polygon":h=e.G();h[f[0]].splice(g+1,0,b);break;case "MultiPolygon":h=e.G();h[f[1]][f[0]].splice(g+1,0,b);break;case "LineString":h=e.G();h.splice(g+1,0,b);break;default:return}this.l=!0;e.Y(h);this.l=!1;h=this.a;h.remove(a);Uo(this,e,g,f,1);a={T:[c[0],b],feature:d,geometry:e,depth:f,index:g};h.aa(Fa(a.T),a);this.g.push([a,
1]);b={T:[b,c[1]],feature:d,geometry:e,depth:f,index:g+1};h.aa(Fa(b.T),b);this.g.push([b,0]);this.H=!0};function Uo(a,b,c,d,e){eh(a.a,b.K(),function(a){a.geometry===b&&(void 0===d||void 0===a.depth||ja(a.depth,d))&&a.index>c&&(a.index+=e)})}function Lo(){var a=Jh();return function(){return a.Point}}function Oo(a,b,c){ic.call(this,a);this.features=b;this.mapBrowserEvent=c}t(Oo,ic);function Wo(a){mf.call(this,{handleEvent:Xo});a=a?a:{};this.u=a.condition?a.condition:uf;this.v=a.addCondition?a.addCondition:te;this.X=a.removeCondition?a.removeCondition:te;this.V=a.toggleCondition?a.toggleCondition:wf;this.s=a.multi?a.multi:!1;this.i=a.filter?a.filter:se;this.g=a.hitTolerance?a.hitTolerance:0;this.a=new co({source:new ho({useSpatialIndex:!1,features:a.features,wrapX:a.wrapX}),style:a.style?a.style:Yo(),updateWhileAnimating:!0,updateWhileInteracting:!0});if(a.layers)if("function"===
typeof a.layers)a=a.layers;else{var b=a.layers;a=function(a){return 0<=b.indexOf(a)}}else a=se;this.l=a;this.c={};a=this.a.ca().i;y(a,"add",this.C,this);y(a,"remove",this.J,this)}t(Wo,mf);Wo.prototype.H=function(){return this.a.ca().i};
function Xo(a){if(!this.u(a))return!0;var b=this.v(a),c=this.X(a),d=this.V(a),e=!b&&!c&&!d,f=a.map,g=this.a.ca().i,h=[],k=[];if(e){$a(this.c);f.Wc(a.pixel,function(a,b){if(this.i(a,b))return k.push(a),a=v(a),this.c[a]=b,!this.s}.bind(this),{layerFilter:this.l,hitTolerance:this.g});for(e=g.Wa()-1;0<=e;--e){f=g.ke(e);var m=k.indexOf(f);-1<m?k.splice(m,1):(g.remove(f),h.push(f))}k.length&&vc(g,k)}else{f.Wc(a.pixel,function(a,e){if(this.i(a,e))return!b&&!d||0<=g.a.indexOf(a)?(c||d)&&0<=g.a.indexOf(a)&&
(h.push(a),e=v(a),delete this.c[e]):(k.push(a),a=v(a),this.c[a]=e),!this.s}.bind(this),{layerFilter:this.l,hitTolerance:this.g});for(e=h.length-1;0<=e;--e)g.remove(h[e]);vc(g,k)}(0<k.length||0<h.length)&&this.f(new Zo($o,k,h,a));return"pointermove"==a.type}Wo.prototype.setMap=function(a){var b=this.D,c=this.a.ca().i;b&&c.forEach(b.jf,b);mf.prototype.setMap.call(this,a);this.a.setMap(a);a&&c.forEach(a.ef,a)};
function Yo(){var a=Jh();ia(a.Polygon,a.LineString);ia(a.GeometryCollection,a.LineString);return function(b){return b.P()?a[b.P().I()]:null}}Wo.prototype.C=function(a){var b=this.D;b&&b.ef(a.element)};Wo.prototype.J=function(a){var b=this.D;b&&b.jf(a.element)};function Zo(a,b,c,d){ic.call(this,a);this.selected=b;this.deselected=c;this.mapBrowserEvent=d}t(Zo,ic);var $o="select";function ap(a){Af.call(this,{handleEvent:bp,handleDownEvent:se,handleUpEvent:cp});a=a?a:{};this.l=a.source?a.source:null;this.J=void 0!==a.vertex?a.vertex:!0;this.u=void 0!==a.edge?a.edge:!0;this.g=a.features?a.features:null;this.ga=[];this.C={};this.V={};this.s={};this.H=null;this.c=void 0!==a.pixelTolerance?a.pixelTolerance:10;this.ka=dp.bind(this);this.a=new $g;this.$={Point:this.Vh,LineString:this.Ie,LinearRing:this.Ie,Polygon:this.Wh,MultiPoint:this.Th,MultiLineString:this.Sh,MultiPolygon:this.Uh,
GeometryCollection:this.Rh,Circle:this.Qh}}t(ap,Af);l=ap.prototype;l.Oa=function(a,b){b=void 0!==b?b:!0;var c=v(a),d=a.P();if(d){var e=this.$[d.I()];e&&(this.V[c]=d.K(Ha()),e.call(this,a,d))}b&&(this.C[c]=y(a,"change",this.Ph,this))};l.cg=function(a){this.Oa(a)};l.dg=function(a){this.Ia(a)};l.Ge=function(a){if(a instanceof mo)var b=a.feature;else a instanceof yc&&(b=a.element);this.Oa(b)};l.He=function(a){if(a instanceof mo)var b=a.feature;else a instanceof yc&&(b=a.element);this.Ia(b)};
l.Ph=function(a){a=a.target;if(this.v){var b=v(a);b in this.s||(this.s[b]=a)}else this.kf(a)};l.Ia=function(a,b){b=void 0!==b?b:!0;var c=v(a),d=this.V[c];if(d){var e=this.a,f=[];eh(e,d,function(b){a===b.feature&&f.push(b)});for(d=f.length-1;0<=d;--d)e.remove(f[d])}b&&(Zb(this.C[c]),delete this.C[c])};
l.setMap=function(a){var b=this.D,c=this.ga,d;this.g?d=this.g:this.l&&(d=this.l.mc());b&&(c.forEach(Zb),c.length=0,d.forEach(this.dg,this));Af.prototype.setMap.call(this,a);a&&(this.g?c.push(y(this.g,"add",this.Ge,this),y(this.g,"remove",this.He,this)):this.l&&c.push(y(this.l,"addfeature",this.Ge,this),y(this.l,"removefeature",this.He,this)),d.forEach(this.cg,this))};l.bb=te;
function ep(a,b,c,d){var e=d.Ba([b[0]-a.c,b[1]+a.c]),f=d.Ba([b[0]+a.c,b[1]-a.c]);e=Fa([e,f]);var g=ch(a.a,e);a.J&&!a.u&&(g=g.filter(function(a){return"Circle"!==a.feature.P().I()}));var h=!1;e=!1;var k=f=null;if(0<g.length){a.H=c;g.sort(a.ka);var m=g[0].T;h="Circle"===g[0].feature.P().I();if(a.J&&!a.u){if(c=Hf(d,m[0]),h=Hf(d,m[1]),c=pe(b,c),b=pe(b,h),h=Math.sqrt(Math.min(c,b)),h=h<=a.c)e=!0,f=c>b?m[1]:m[0],k=Hf(d,f)}else a.u&&(f=h?je(c,g[0].feature.P()):le(c,m),k=Hf(d,f),qe(b,k)<=a.c&&(e=!0,a.J&&
!h&&(c=Hf(d,m[0]),h=Hf(d,m[1]),c=pe(k,c),b=pe(k,h),h=Math.sqrt(Math.min(c,b)),h=h<=a.c)))&&(f=c>b?m[1]:m[0],k=Hf(d,f));e&&(k=[Math.round(k[0]),Math.round(k[1])])}return{Ki:e,vertex:f,Ti:k}}l.kf=function(a){this.Ia(a,!1);this.Oa(a,!1)};
l.Qh=function(a,b){var c=b.A,d=b.W,e=new z(null,d);c*=33;for(var f=Array(c),g=0;g<c;g++)f[g]=0;Xe(e,d,f,[f.length]);d=b.ba();b=b.Ib();c=e.o;f=e.W;g=e.A;for(var h=e.Qa(),k=c.length/g-1,m,n,p=0;p<=k;++p)n=p*g,m=0+2*za(p,k)*Math.PI/k,c[n]=d[0]+b*Math.cos(m),c[n+1]=d[1]+b*Math.sin(m);Xe(e,f,c,h);e=e.G()[0];d=0;for(b=e.length-1;d<b;++d)c=e.slice(d,d+2),f={feature:a,T:c},this.a.aa(Fa(c),f)};l.Rh=function(a,b){var c=b.a;for(b=0;b<c.length;++b){var d=this.$[c[b].I()];d&&d.call(this,a,c[b])}};
l.Ie=function(a,b){b=b.G();var c;var d=0;for(c=b.length-1;d<c;++d){var e=b.slice(d,d+2);var f={feature:a,T:e};this.a.aa(Fa(e),f)}};l.Sh=function(a,b){b=b.G();var c,d;var e=0;for(d=b.length;e<d;++e){var f=b[e];var g=0;for(c=f.length-1;g<c;++g){var h=f.slice(g,g+2);var k={feature:a,T:h};this.a.aa(Fa(h),k)}}};l.Th=function(a,b){var c=b.G(),d;var e=0;for(d=c.length;e<d;++e){var f=c[e];f={feature:a,T:[f,f]};this.a.aa(b.K(),f)}};
l.Uh=function(a,b){b=b.G();var c,d,e;var f=0;for(e=b.length;f<e;++f){var g=b[f];var h=0;for(d=g.length;h<d;++h){var k=g[h];var m=0;for(c=k.length-1;m<c;++m){var n=k.slice(m,m+2);var p={feature:a,T:n};this.a.aa(Fa(n),p)}}}};l.Vh=function(a,b){var c=b.G();a={feature:a,T:[c,c]};this.a.aa(b.K(),a)};l.Wh=function(a,b){b=b.G();var c,d;var e=0;for(d=b.length;e<d;++e){var f=b[e];var g=0;for(c=f.length-1;g<c;++g){var h=f.slice(g,g+2);var k={feature:a,T:h};this.a.aa(Fa(h),k)}}};
function bp(a){var b=ep(this,a.pixel,a.coordinate,a.map);b.Ki&&(a.coordinate=b.vertex.slice(0,2),a.pixel=b.Ti);return Bf.call(this,a)}function cp(){var a=ab(this.s);a.length&&(a.forEach(this.kf,this),this.s={});return!1}function dp(a,b){return re(this.H,a.T)-re(this.H,b.T)};function fp(a){Rn.call(this,a);this.v=vg();this.i=null}t(fp,Rn);fp.prototype.D=function(a,b,c){Tn(this,"precompose",c,a,void 0);var d=this.ha();if(d){var e=b.extent,f=void 0!==e&&!Ma(e,a.extent)&&Va(e,a.extent);f&&Sn(c,a,e);e=this.u;var g=c.globalAlpha;c.globalAlpha=b.opacity;c.drawImage(d,0,0,+d.width,+d.height,Math.round(e[4]),Math.round(e[5]),Math.round(d.width*e[0]),Math.round(d.height*e[3]));c.globalAlpha=g;f&&c.restore()}Tn(this,"postcompose",c,a,void 0)};
fp.prototype.l=function(a,b,c,d,e){var f=this.a;return f.ca().X(a,b.viewState.resolution,b.viewState.rotation,c,b.skippedFeatureUids,function(a){return d.call(e,a,f)})};
fp.prototype.L=function(a,b,c,d){if(this.ha()){if(this.a.ca().X!==na)return Rn.prototype.L.apply(this,arguments);var e=xg(this.v,a.slice());oe(e,b.viewState.resolution/this.c);this.i||(this.i=Hc(1,1));this.i.clearRect(0,0,1,1);this.i.drawImage(this.ha(),e[0],e[1],1,1,0,0,1,1);e=this.i.getImageData(0,0,1,1).data;if(0<e[3])return c.call(d,this.a,e)}};function gp(a){fp.call(this,a);this.context=null===this.context?null:Hc();this.g=null;this.s=[];this.V=Ha();this.$=new ra(0,0,0,0);this.u=vg()}t(gp,fp);function hp(a,b){b=b.state;a=a.a.get("useInterimTilesOnError");return 2==b||4==b||3==b&&!a}
gp.prototype.H=function(a,b){var c=a.pixelRatio,d=a.size,e=a.viewState,f=e.projection,g=e.resolution,h=e.center,k=this.a;e=k.ca();var m=e.j,n=e.La(f),p=Qb(n,g,0),r=n.b[p],u=Math.round(g/r)||1,D=a.extent;void 0!==b.extent&&(D=Ua(D,b.extent));if(Ya(D))return!1;b=Kb(n,D,r);var F=n.f?n.f:n.j[p];var C=n.b[p],A=Ea(Ob(n,p),n.g);F=Na(F[0]+b.O*A[0]*C,F[1]+b.S*A[1]*C,F[0]+(b.R+1)*A[0]*C,F[1]+(b.U+1)*A[1]*C,void 0);C=e.cc(c);A={};A[p]={};var H=Mn(e,f,A),K=this.V,ca=this.$,R=!1,Z,U;for(Z=b.O;Z<=b.R;++Z)for(U=
b.S;U<=b.U;++U){var G=ip(e,p,Z,U,c,f);if(3==G.state)if(k.get("useInterimTilesOnError"))0<k.get("preload")&&(R=!0);else{var x=G;x.state=2;gn(x)}if(!hp(this,G))a:if(G.b){x=G.b;do{if(2==x.state){G=x;break a}x=x.b}while(x)}if(hp(this,G))2==G.state&&(A[p][G.Na.toString()]=G,R||-1!=this.s.indexOf(G)||(R=!0));else{a:{x=n;var I=G.Na,wa=H,Ca=ca,Xb=Pb(x,I,K);for(I=I[0]-1;I>=x.minZoom;){if(wa.call(null,I,Mb(x,Xb,I,Ca))){x=!0;break a}--I}x=!1}x||(x=n,G=G.Na,wa=ca,G[0]<x.maxZoom?(Ca=Pb(x,G,K),G=Mb(x,Ca,G[0]+1,
wa)):G=null,G&&H(p+1,G))}}G=a.viewHints;G=G[0]||G[1];if(!(this.c&&16<Date.now()-a.time&&G||!R&&this.g&&Ma(this.g,D)&&this.J==m&&u==this.C&&(G||r*c/C*u==this.c))){if(G=this.context)U=jp(e,p,c,f),Z=Math.round((b.R-b.O+1)*U[0]/u),U=Math.round((b.U-b.S+1)*U[1]/u),R=G.canvas,R.width!=Z||R.height!=U?(this.C=u,R.width=Z,R.height=U):(G.clearRect(0,0,Z,U),u=this.C);this.s.length=0;R=Object.keys(A).map(Number);R.sort(fa);ca=0;for(x=R.length;ca<x;++ca){G=R[ca];H=jp(e,G,c,f);Z=n.b[G];wa=Z/r;Ca=C*e.ae(f);Xb=A[G];
for(var Ga in Xb){G=Xb[Ga];U=Pb(n,G.Na,K);Z=(U[0]-F[0])/r*C/u;U=(F[3]-U[3])/r*C/u;var zc=H[0]*wa/u;var ec=H[1]*wa/u;I=G;var fc=a,qa=Ca;this.a.ca().Zc(fc.viewState.projection)||this.context.clearRect(Z,U,zc,ec);(I=I.ha(this.a))&&this.context.drawImage(I,qa,qa,I.width-2*qa,I.height-2*qa,Z,U,zc,ec);this.s.push(G)}}this.J=m;this.c=r*c/C*u;this.g=F}Ga=this.c/g;Ga=yg(this.u,c*d[0]/2,c*d[1]/2,Ga,Ga,0,(this.g[0]-h[0])/this.c*c,(h[1]-this.g[3])/this.c*c);yg(this.v,c*d[0]/2-Ga[4],c*d[1]/2-Ga[5],c/g,-c/g,0,
-h[0],-h[1]);d=a.usedTiles;g=v(e).toString();h=p.toString();g in d?h in d[g]?(d=d[g][h],b.O<d.O&&(d.O=b.O),b.R>d.R&&(d.R=b.R),b.S<d.S&&(d.S=b.S),b.U>d.U&&(d.U=b.U)):d[g][h]=b:(d[g]={},d[g][h]=b);k=k.get("preload");b=v(e).toString();b in a.wantedTiles||(a.wantedTiles[b]={});d=a.wantedTiles[b];g=a.tileQueue;h=n.minZoom;for(F=p;F>=h;--F){var wb=Mb(n,D,F,wb);m=n.b[F];for(r=wb.O;r<=wb.R;++r)for(u=wb.S;u<=wb.U;++u)p-F<=k?(Ga=ip(e,F,r,u,c,f),0==Ga.state&&(d[Ga.Xa()]=!0,Ga.Xa()in g.j||g.g([Ga,b,Nb(n,Ga.Na),
m]))):e.mf(F,r,u,f)}On(a,e);Qn(a,e);return 0<this.s.length};gp.prototype.ha=function(){var a=this.context;return a?a.canvas:null};function kp(a){a=a?a:{};var b=Za({},a);delete b.preload;delete b.useInterimTilesOnError;sg.call(this,b);this.set("preload",void 0!==a.preload?a.preload:0);this.set("useInterimTilesOnError",void 0!==a.useInterimTilesOnError?a.useInterimTilesOnError:!0)}t(kp,sg);kp.prototype.Nc=function(a){var b=null;"canvas"===a.I()&&(b=new gp(this));return b};function lp(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(g){if(g)return a.replace(c,g[0].toString()).replace(d,g[1].toString()).replace(e,function(){return(-g[2]-1).toString()}).replace(f,function(){var a=b.a?b.a[g[0]]:null;w(a,55);return(a.U-a.S+1+g[2]).toString()})}}function mp(a,b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=lp(a[e],b);return np(d)}function np(a){return 1===a.length?a[0]:function(b,c,d){if(b)return a[za((b[1]<<b[0])+b[2],a.length)](b,c,d)}}
function op(){}function pp(a){var b=[],c=/\{([a-z])-([a-z])\}/.exec(a);if(c){var d=c[2].charCodeAt(0),e;for(e=c[1].charCodeAt(0);e<=d;++e)b.push(a.replace(c[0],String.fromCharCode(e)));return b}if(c=c=/\{(\d+)-(\d+)\}/.exec(a)){d=parseInt(c[2],10);for(e=parseInt(c[1],10);e<=d;e++)b.push(a.replace(c[0],e.toString()));return b}b.push(a);return b};function qp(a){fh.call(this);this.highWaterMark=void 0!==a?a:2048}t(qp,fh);qp.prototype.Fb=function(a){for(var b,c;this.a>this.highWaterMark;){b=this.b.tb;c=b.Na[0].toString();var d;if(d=c in a)b=b.Na,d=sa(a[c],b[1],b[2]);if(d)break;else hc(this.pop())}};function rp(a){fo.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state,wrapX:a.wrapX});this.ka=void 0!==a.opaque?a.opaque:!1;this.sa=void 0!==a.tilePixelRatio?a.tilePixelRatio:1;this.tileGrid=void 0!==a.tileGrid?a.tileGrid:null;this.a=new qp(a.cacheSize);this.c=[0,0];this.mb=""}t(rp,fo);l=rp.prototype;l.jd=function(){var a=this.a;return a.a>a.highWaterMark};l.Fb=function(a,b){(a=this.bc(a))&&a.Fb(b)};
function Nn(a,b,c,d,e){b=a.bc(b);if(!b)return!1;for(var f=!0,g,h,k=d.O;k<=d.R;++k)for(var m=d.S;m<=d.U;++m)g=a.Hb(c,k,m),h=!1,b.j.hasOwnProperty(g)&&(g=b.get(g),(h=2===g.state)&&(h=!1!==e(g))),h||(f=!1);return f}l.ae=function(){return 0};function sp(a,b){a.mb!==b&&(a.mb=b,a.b())}l.Hb=function(a,b,c){return a+"/"+b+"/"+c};l.Zc=function(){return this.ka};
l.La=function(a){if(this.tileGrid)a=this.tileGrid;else{var b=a.c;if(!b){b=Tb(a);var c=Sb(b,void 0,void 0);b=new Hb({extent:b,origin:Wa(b),resolutions:c,tileSize:void 0});a.c=b}a=b}return a};l.bc=function(a){var b=this.J;return b&&!Cb(b,a)?null:this.a};l.cc=function(){return this.sa};function jp(a,b,c,d){d=a.La(d);c=a.cc(c);b=Ea(Ob(d,b),a.c);return 1==c?b:Da(b,c,a.c)}l.lc=function(){this.a.clear();this.b()};l.mf=na;function tp(a,b){ic.call(this,a);this.tile=b}t(tp,ic);function up(a){rp.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX});this.tileLoadFunction=a.tileLoadFunction;this.tileUrlFunction=this.Ua?this.Ua.bind(this):op;this.urls=null;if(a.urls)this.yd(a.urls);else if(a.url){var b=a.url,c=this.urls=pp(b);vp(this,this.Ua?this.Ua.bind(this):mp(c,this.tileGrid),b)}a.tileUrlFunction&&vp(this,a.tileUrlFunction)}
t(up,rp);up.prototype.V=function(a){a=a.target;switch(a.state){case 1:this.f(new tp("tileloadstart",a));break;case 2:this.f(new tp("tileloadend",a));break;case 3:this.f(new tp("tileloaderror",a))}};function vp(a,b,c){a.tileUrlFunction=b;"undefined"!==typeof c?sp(a,c):a.b()}up.prototype.yd=function(a){this.urls=a;var b=a.join("\n");vp(this,this.Ua?this.Ua.bind(this):mp(a,this.tileGrid),b)};up.prototype.mf=function(a,b,c){a=this.Hb(a,b,c);this.a.j.hasOwnProperty(a)&&this.a.get(a)};function wp(a){up.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:xp,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.tileClass=a.tileClass?a.tileClass:hn}t(wp,up);l=wp.prototype;l.jd=function(){return up.prototype.jd.call(this)};
l.Fb=function(a,b){up.prototype.Fb.call(this,a,b)};l.ae=function(){return this.be()};l.be=function(){return 0};l.Zc=function(a){return up.prototype.Zc.call(this,a)};l.La=function(a){return up.prototype.La.call(this,a)};l.bc=function(a){return up.prototype.bc.call(this,a)};
function yp(a,b,c,d,e,f,g){d=b=[b,c,d];var h=void 0!==f?f:a.J;c=a.La(h);if(a.D&&h.i){var k=d;d=k[0];var m=Nb(c,k);h=Tb(h);var n=m[0],p=m[1];h[0]<=n&&n<=h[2]&&h[1]<=p&&p<=h[3]?d=k:(k=Xa(h),m[0]+=k*Math.ceil((h[0]-m[0])/k),d=Lb(c,m[0],m[1],c.b[d],!1,void 0))}h=d[0];m=d[1];k=d[2];c=c.minZoom>h||h>c.maxZoom?!1:(c=(n=c.K())?Mb(c,n,h):c.a?c.a[h]:null)?sa(c,m,k):!0;e=(c=c?d:null)?a.tileUrlFunction(c,e,f):void 0;e=new a.tileClass(b,void 0!==e?0:4,void 0!==e?e:"",a.crossOrigin,a.tileLoadFunction);e.key=g;
y(e,"change",a.V,a);return e}function ip(a,b,c,d,e,f){var g=a.Hb(b,c,d),h=a.mb;if(a.a.j.hasOwnProperty(g)){var k=a.a.get(g);if(k.key!=h){var m=k;k=yp(a,b,c,d,e,f,h);0==m.state?k.b=m.b:k.b=m;if(k.b){b=k.b;c=k;do{if(2==b.state){b.b=null;break}else 1==b.state?c=b:0==b.state?c.b=b.b:c=b;b=c.b}while(b)}a.a.replace(g,k)}}else k=yp(a,b,c,d,e,f,h),a.a.set(g,k);return k}function xp(a,b){a.ha().src=b};function zp(a){a=a||{};var b=void 0!==a.projection?a.projection:"EPSG:3857",c=void 0!==a.tileGrid?a.tileGrid:Rb({extent:Tb(b),maxZoom:a.maxZoom,minZoom:a.minZoom,tileSize:a.tileSize});wp.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:a.opaque,projection:b,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:c,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,
wrapX:void 0!==a.wrapX?a.wrapX:!0})}t(zp,wp);function Ap(a){ho.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,wrapX:a.wrapX});this.resolution=void 0;this.distance=void 0!==a.distance?a.distance:20;this.features=[];this.geometryFunction=a.geometryFunction||function(a){a=a.P();w(a instanceof Qe,10);return a};this.source=a.source;this.source.B("change",Ap.prototype.lc,this)}t(Ap,ho);Ap.prototype.ed=function(a,b,c){this.source.ed(a,b,c);b!==this.resolution&&(this.clear(),this.resolution=b,Bp(this),this.wb(this.features))};
Ap.prototype.lc=function(){this.clear();Bp(this);this.wb(this.features);ho.prototype.lc.call(this)};function Bp(a){if(void 0!==a.resolution){a.features.length=0;for(var b=Ha(),c=a.distance*a.resolution,d=a.source.mc(),e={},f=0,g=d.length;f<g;f++){var h=d[f];v(h).toString()in e||!(h=a.geometryFunction(h))||(h=h.G(),Pa(h,b),Ja(b,c,b),h=ch(a.source.a,b),h=h.filter(function(a){a=v(a).toString();return a in e?!1:e[a]=!0}),a.features.push(Cp(a,h)))}}}
function Cp(a,b){for(var c=[0,0],d=b.length-1;0<=d;--d){var e=a.geometryFunction(b[d]);e?ie(c,e.G()):b.splice(d,1)}oe(c,1/b.length);a=new E(new Qe(c));a.set("features",b);return a};function Dp(a,b){var c=[];Object.keys(b).forEach(function(a){null!==b[a]&&void 0!==b[a]&&c.push(a+"="+encodeURIComponent(b[a]))});var d=c.join("&");a=a.replace(/[?&]$/,"");a=-1===a.indexOf("?")?a+"?":a+"&";return a+d};function Ep(a){a=a||{};var b;void 0!==a.attributions?b=a.attributions:b=[Fp];zp.call(this,{attributions:b,cacheSize:a.cacheSize,crossOrigin:void 0!==a.crossOrigin?a.crossOrigin:"anonymous",opaque:void 0!==a.opaque?a.opaque:!0,maxZoom:void 0!==a.maxZoom?a.maxZoom:19,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileLoadFunction:a.tileLoadFunction,url:void 0!==a.url?a.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:a.wrapX})}t(Ep,zp);var Fp=new Ub({html:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'});Zg.od={};Zg.od.Fd=function(){};
(function(a){function b(a,b,c){if(g)return new ImageData(a,b,c);b=h.createImageData(b,c);b.data.set(a);return b}function c(a){var b=!0;try{new ImageData(10,10)}catch(n){b=!1}return function(c){var d=c.buffers,e=c.meta,f=c.width,g=c.height,h=d.length,k=d[0].byteLength;if(c.imageOps){k=Array(h);for(c=0;c<h;++c){var m=c;var n=new Uint8ClampedArray(d[c]);var K=f,ca=g;n=b?new ImageData(n,K,ca):{data:n,width:K,height:ca};k[m]=n}f=a(k,e).data}else{f=new Uint8ClampedArray(k);g=Array(h);m=Array(h);for(c=0;c<
h;++c)g[c]=new Uint8ClampedArray(d[c]),m[c]=[0,0,0,0];for(d=0;d<k;d+=4){for(c=0;c<h;++c)n=g[c],m[c][0]=n[d],m[c][1]=n[d+1],m[c][2]=n[d+2],m[c][3]=n[d+3];c=a(m,e);f[d]=c[0];f[d+1]=c[1];f[d+2]=c[2];f[d+3]=c[3]}}return f.buffer}}function d(a,b){var d=Object.keys(a.lib||{}).map(function(b){return"var "+b+" = "+a.lib[b].toString()+";"}).concat(["var __minion__ = ("+c.toString()+")(",a.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);",
"  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]);d=URL.createObjectURL(new Blob(d,{type:"text/javascript"}));d=new Worker(d);d.addEventListener("message",b);return d}function e(a,b){var d=c(a.operation);return{postMessage:function(a){setTimeout(function(){b({data:{buffer:d(a),meta:a.meta}})},0)}}}function f(a){this.Ec=!!a.ij;var b;0===a.threads?b=0:this.Ec?b=1:b=a.threads||1;var c=[];if(b)for(var f=0;f<b;++f)c[f]=d(a,this.Nd.bind(this,f));else c[0]=e(a,this.Nd.bind(this,
0));this.Xb=c;this.Od=[];this.Vb=0;this.hb={};this.Fc=null}var g=!0;try{new ImageData(10,10)}catch(k){g=!1}var h=document.createElement("canvas").getContext("2d");f.prototype.Nf=function(){if(0===this.Vb&&0<this.Od.length){var a=this.Fc=this.Od.shift(),b=a.inputs[0].width,c=a.inputs[0].height,d=a.inputs.map(function(a){return a.data.buffer}),e=this.Xb.length;this.Vb=e;if(1===e)this.Xb[0].postMessage({buffers:d,meta:a.Tg,imageOps:this.Ec,width:b,height:c},d);else for(var f=4*Math.ceil(a.inputs[0].data.length/
4/e),g=0;g<e;++g){for(var h=g*f,C=[],A=0,H=d.length;A<H;++A)C.push(d[g].slice(h,h+f));this.Xb[g].postMessage({buffers:C,meta:a.Tg,imageOps:this.Ec,width:b,height:c},C)}}};f.prototype.Nd=function(a,b){this.gj||(this.hb[a]=b.data,--this.Vb,0===this.Vb&&this.Pf())};f.prototype.Pf=function(){var a=this.Fc,c=this.Xb.length;if(1===c){var d=new Uint8ClampedArray(this.hb[0].buffer);var e=this.hb[0].meta}else{var f=a.inputs[0].data.length;d=new Uint8ClampedArray(f);e=Array(f);f=4*Math.ceil(f/4/c);for(var g=
0;g<c;++g){var h=g*f;d.set(new Uint8ClampedArray(this.hb[g].buffer),h);e[g]=this.hb[g].meta}}this.Fc=null;this.hb={};a.callback(null,b(d,a.inputs[0].width,a.inputs[0].height),e);this.Nf()};a["default"]={Fd:f};a.Fd=f})(Zg.od=Zg.od||{});function Gp(a){a=a||{};wp.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0});this.i=a.params||{};this.g=Ha();a=0;var b=[],c;for(c in this.i)b[a++]=c+"-"+this.i[c];sp(this,b.join("/"))}t(Gp,wp);Gp.prototype.cc=function(a){return a};
Gp.prototype.Ua=function(a,b,c){var d=this.tileGrid;d||(d=this.La(c));if(!(d.b.length<=a[0])){var e=Pb(d,a,this.g),f=Ea(Ob(d,a[0]),this.c);1!=b&&(f=Da(f,b,this.c));d={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Za(d,this.i);var g=this.urls;g?(c=c.Ha.split(":").pop(),d.SIZE=f[0]+","+f[1],d.BBOX=e.join(","),d.BBOXSR=c,d.IMAGESR=c,d.DPI=Math.round(d.DPI?d.DPI*b:90*b),a=(1==g.length?g[0]:g[za((a[1]<<a[0])+a[2],g.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),
a=Dp(a,d)):a=void 0;return a}};function Hp(a){a=a||{};var b=a.params||{};wp.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:!("TRANSPARENT"in b?b.TRANSPARENT:1),projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0});this.l=void 0!==a.gutter?a.gutter:0;this.i=b;this.g=!0;this.s=a.serverType;this.u=void 0!==a.hidpi?
a.hidpi:!0;this.v="";Ip(this);this.H=Ha();a:{a=(""+(this.i.VERSION||"1.3.0")).split(".");b=["1","3"];for(var c=0;c<Math.max(a.length,b.length);c++){var d=parseInt(a[c]||"0",10),e=parseInt(b[c]||"0",10);if(d>e){a=1;break a}if(e>d){a=-1;break a}}a=0}this.g=0<=a;a=0;b=[];for(var f in this.i)b[a++]=f+"-"+this.i[f];sp(this,b.join("/"))}t(Hp,wp);l=Hp.prototype;
l.ig=function(a,b,c,d){c=Ab(c);var e=this.tileGrid;e||(e=this.La(c));b=Lb(e,a[0],a[1],b,!1,void 0);if(!(e.b.length<=b[0])){var f=e.b[b[0]],g=Pb(e,b,this.H);e=Ea(Ob(e,b[0]),this.c);var h=this.l;h&&(e=Ba(e,h,this.c),g=Ja(g,f*h,g));h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.i.LAYERS};Za(h,this.i,d);d=Math.floor((g[3]-a[1])/f);h[this.g?"I":"X"]=Math.floor((a[0]-g[0])/f);h[this.g?"J":"Y"]=d;return Jp(this,b,e,g,1,c,h)}};l.be=function(){return this.l};
l.Hb=function(a,b,c){return this.v+wp.prototype.Hb.call(this,a,b,c)};
function Jp(a,b,c,d,e,f,g){var h=a.urls;if(h){g.WIDTH=c[0];g.HEIGHT=c[1];g[a.g?"CRS":"SRS"]=f.Ha;"STYLES"in a.i||(g.STYLES="");if(1!=e)switch(a.s){case "geoserver":c=90*e+.5|0;g.FORMAT_OPTIONS="FORMAT_OPTIONS"in g?g.FORMAT_OPTIONS+(";dpi:"+c):"dpi:"+c;break;case "mapserver":g.MAP_RESOLUTION=90*e;break;case "carmentaserver":case "qgis":g.DPI=90*e;break;default:w(!1,52)}f=f.b;a.g&&"ne"==f.substr(0,2)&&(a=d[0],d[0]=d[1],d[1]=a,a=d[2],d[2]=d[3],d[3]=a);g.BBOX=d.join(",");return Dp(1==h.length?h[0]:h[za((b[1]<<
b[0])+b[2],h.length)],g)}}l.cc=function(a){return this.u&&void 0!==this.s?a:1};function Ip(a){var b=0,c=[];if(a.urls){var d;var e=0;for(d=a.urls.length;e<d;++e)c[b++]=a.urls[e]}a.v=c.join("#")}
l.Ua=function(a,b,c){var d=this.tileGrid;d||(d=this.La(c));if(!(d.b.length<=a[0])){1==b||this.u&&void 0!==this.s||(b=1);var e=d.b[a[0]],f=Pb(d,a,this.H);d=Ea(Ob(d,a[0]),this.c);var g=this.l;g&&(d=Ba(d,g,this.c),f=Ja(f,e*g,f));1!=b&&(d=Da(d,b,this.c));e={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Za(e,this.i);return Jp(this,a,d,f,b,c,e)}};l.yd=function(a){wp.prototype.yd.call(this,a);Ip(this)};function Kp(a){this.B=a.matrixIds;Hb.call(this,{extent:a.extent,origin:a.origin,origins:a.origins,resolutions:a.resolutions,tileSize:a.tileSize,tileSizes:a.tileSizes,sizes:a.sizes})}t(Kp,Hb);function Lp(a){function b(a){a="KVP"==d?Dp(a,f):a.replace(/\{(\w+?)\}/g,function(a,b){return b.toLowerCase()in f?f[b.toLowerCase()]:a});return function(b){if(b){var c={TileMatrix:e.B[b[0]],TileCol:b[1],TileRow:-b[2]-1};Za(c,g);b=a;return b="KVP"==d?Dp(b,c):b.replace(/\{(\w+?)\}/g,function(a,b){return c[b]})}}}this.H=void 0!==a.version?a.version:"1.0.0";this.l=void 0!==a.format?a.format:"image/jpeg";this.i=a.dimensions?a.dimensions:{};this.s=a.layer;this.g=a.matrixSet;this.v=a.style;var c=a.urls;void 0===
c&&void 0!==a.url&&(c=pp(a.url));var d=this.u=void 0!==a.requestEncoding?a.requestEncoding:"KVP",e=a.tileGrid,f={layer:this.s,style:this.v,tilematrixset:this.g};"KVP"==d&&Za(f,{Service:"WMTS",Request:"GetTile",Version:this.H,Format:this.l});var g=this.i,h=c&&0<c.length?np(c.map(b)):op;wp.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:e,
tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:h,urls:c,wrapX:void 0!==a.wrapX?a.wrapX:!1});sp(this,Mp(this))}t(Lp,wp);function Mp(a){var b=0,c=[],d;for(d in a.i)c[b++]=d+"-"+a.i[d];return c.join("/")};q("ol.Map",B);B.prototype.addInteraction=B.prototype.Uf;B.prototype.addLayer=B.prototype.Vf;B.prototype.addControl=B.prototype.Tf;B.prototype.addOverlay=B.prototype.Wf;B.prototype.dispatchEvent=B.prototype.f;B.prototype.forEachFeatureAtPixel=B.prototype.Wc;B.prototype.forEachLayerAtPixel=B.prototype.qh;B.prototype.getLayers=B.prototype.rh;B.prototype.getSize=B.prototype.pb;B.prototype.getTarget=B.prototype.cd;B.prototype.getOverlays=B.prototype.ng;B.prototype.getView=B.prototype.Z;
B.prototype.removeControl=B.prototype.Ci;B.prototype.removeInteraction=B.prototype.Di;B.prototype.removeOverlay=B.prototype.Ei;B.prototype.on=B.prototype.B;B.prototype.once=B.prototype.once;B.prototype.un=B.prototype.fa;q("ol.proj.Projection",eb);eb.prototype.getExtent=eb.prototype.K;eb.prototype.getMetersPerUnit=eb.prototype.j;q("ol.proj.transform",function(a,b,c){return Eb(b,c)(a,void 0,a.length)});q("ol.View",bf);bf.prototype.calculateExtent=bf.prototype.Td;bf.prototype.getCenter=bf.prototype.ba;
bf.prototype.getProjection=bf.prototype.sh;bf.prototype.getResolution=bf.prototype.ua;bf.prototype.getResolutions=bf.prototype.th;bf.prototype.getZoom=bf.prototype.qg;bf.prototype.on=bf.prototype.B;bf.prototype.setCenter=bf.prototype.Ja;bf.prototype.setZoom=bf.prototype.Ii;bf.prototype.fit=bf.prototype.bg;bf.prototype.un=bf.prototype.fa;q("ol.extent.getTopLeft",Wa);q("ol.tilegrid.TileGrid",Hb);q("ol.tilegrid.WMTS",Kp);q("ol.tilegrid.createXYZ",Rb);q("ol.style.Style",Eh);Eh.prototype.getText=Eh.prototype.oa;
q("ol.style.Circle",Ch);q("ol.style.Fill",Dh);q("ol.style.Icon",Pj);q("ol.style.Image",zh);q("ol.style.Stroke",Yg);q("ol.style.Text",Qj);Qj.prototype.getText=Qj.prototype.oa;Qj.prototype.setFill=Qj.prototype.$e;Qj.prototype.setStroke=Qj.prototype.cf;Qj.prototype.setText=Qj.prototype.df;q("ol.Attribution",Ub);q("ol.Geolocation",cn);cn.prototype.on=cn.prototype.B;cn.prototype.un=cn.prototype.fa;cn.prototype.getAccuracy=cn.prototype.eg;cn.prototype.getHeading=cn.prototype.jg;
cn.prototype.getPosition=cn.prototype.lh;cn.prototype.getSpeed=cn.prototype.og;cn.prototype.getTracking=cn.prototype.ee;cn.prototype.setTracking=cn.prototype.xc;q("ol.Overlay",kh);kh.prototype.setPosition=kh.prototype.me;q("ol.control.Attribution",Kc);Kc.prototype.setCollapsed=Kc.prototype.$;Kc.prototype.setCollapsible=Kc.prototype.ga;q("ol.control.MousePosition",Yc);Yc.prototype.setCoordinateFormat=Yc.prototype.Ze;q("ol.control.Zoom",Vc);q("ol.control.Rotate",Qc);q("ol.control.ScaleLine",uh);
q("ol.control.defaults",Xc);q("ol.interaction.Draw",oo);q("ol.interaction.Draw.createBox",function(){return function(a,b){a=Fa(a);b=b||new z(null);b.Y([[[a[0],a[1]],[a[2],a[1]],[a[2],a[3]],Wa(a),[a[0],a[1]]]]);return b}});oo.prototype.on=oo.prototype.B;oo.prototype.setActive=oo.prototype.Ya;oo.prototype.un=oo.prototype.fa;q("ol.interaction.Modify",Go);Go.prototype.on=Go.prototype.B;Go.prototype.setActive=Go.prototype.Ya;Go.prototype.un=Go.prototype.fa;q("ol.interaction.Select",Wo);
Wo.prototype.on=Wo.prototype.B;Wo.prototype.setActive=Wo.prototype.Ya;Wo.prototype.un=Wo.prototype.fa;Wo.prototype.getFeatures=Wo.prototype.H;q("ol.interaction.Snap",ap);ap.prototype.setActive=ap.prototype.Ya;q("ol.source.Source",fo);fo.prototype.on=fo.prototype.B;Wo.prototype.on=Wo.prototype.B;fo.prototype.once=fo.prototype.once;q("ol.source.OSM",Ep);q("ol.source.Tile",rp);q("ol.source.TileArcGISRest",Gp);q("ol.source.TileWMS",Hp);Hp.prototype.getGetFeatureInfoUrl=Hp.prototype.ig;
q("ol.source.Vector",ho);ho.prototype.addFeature=ho.prototype.Oa;ho.prototype.addFeatures=ho.prototype.wb;ho.prototype.getFeatureById=ho.prototype.gg;ho.prototype.getFeatures=ho.prototype.mc;ho.prototype.getFormat=ho.prototype.Xh;ho.prototype.removeFeature=ho.prototype.Ia;q("ol.source.WMTS",Lp);q("ol.source.XYZ",zp);q("ol.source.Cluster",Ap);sg.prototype.getSource=sg.prototype.ca;sg.prototype.getProperties=sg.prototype.Ca;sg.prototype.setSource=sg.prototype.bf;sg.prototype.un=sg.prototype.fa;
og.prototype.getVisible=og.prototype.l;og.prototype.setVisible=og.prototype.C;og.prototype.on=og.prototype.B;og.prototype.once=og.prototype.once;q("ol.layer.Tile",kp);q("ol.layer.Vector",co);co.prototype.set=co.prototype.set;co.prototype.setStyle=co.prototype.u;q("ol.layer.Group",qg);q("ol.Feature",E);E.prototype.getGeometry=E.prototype.P;E.prototype.getGeometryName=E.prototype.hg;E.prototype.getId=E.prototype.jh;E.prototype.getProperties=E.prototype.Ca;E.prototype.getStyle=E.prototype.kh;
E.prototype.setId=E.prototype.ab;E.prototype.setProperties=E.prototype.qa;E.prototype.setStyle=E.prototype.le;E.prototype.setGeometry=E.prototype.xa;E.prototype.setGeometryName=E.prototype.sb;E.prototype.on=E.prototype.B;E.prototype.unset=E.prototype.Qi;q("ol.Collection",sc);sc.prototype.getArray=sc.prototype.fg;sc.prototype.getLength=sc.prototype.Wa;sc.prototype.item=sc.prototype.ke;sc.prototype.on=sc.prototype.B;
q("ol.coordinate.createStringXY",function(a){return function(b){return b?"{x}, {y}".replace("{x}",b[0].toFixed(a)).replace("{y}",b[1].toFixed(a)):""}});q("ol.format.EsriJSON",qi);qi.prototype.readFeatures=qi.prototype.Ra;qi.prototype.writeFeature=qi.prototype.Ad;q("ol.format.GeoJSON",zi);zi.prototype.readFeature=zi.prototype.pc;zi.prototype.readFeatures=zi.prototype.Ra;zi.prototype.writeFeatureObject=zi.prototype.ub;zi.prototype.writeFeaturesObject=zi.prototype.Bd;q("ol.format.TopoJSON",Ol);
Ol.prototype.readFeatures=Ol.prototype.Ra;q("ol.format.WKT",dm);dm.prototype.readFeature=dm.prototype.pc;dm.prototype.readFeatures=dm.prototype.Ra;q("ol.format.WFS",Ul);Ul.prototype.readFeatures=Ul.prototype.Ra;Ul.prototype.readTransactionResponse=Ul.prototype.c;Ul.prototype.writeTransaction=Ul.prototype.i;q("ol.geom.Circle",dn);dn.prototype.clone=dn.prototype.clone;dn.prototype.getCenter=dn.prototype.ba;dn.prototype.getRadius=dn.prototype.Ib;dn.prototype.getType=dn.prototype.I;
q("ol.geom.Geometry",ue);ue.prototype.getExtent=ue.prototype.K;ue.prototype.on=ue.prototype.B;ue.prototype.transform=ue.prototype.C;q("ol.geom.GeometryCollection",vi);vi.prototype.getType=vi.prototype.I;q("ol.geom.LineString",S);S.prototype.appendCoordinate=S.prototype.Xf;S.prototype.clone=S.prototype.clone;S.prototype.getCoordinateAt=S.prototype.$d;S.prototype.getCoordinateAtM=S.prototype.De;S.prototype.getCoordinates=S.prototype.G;S.prototype.getFirstCoordinate=S.prototype.Gb;
S.prototype.getLastCoordinate=S.prototype.mg;S.prototype.getLength=S.prototype.Dh;S.prototype.getType=S.prototype.I;S.prototype.setCoordinates=S.prototype.Y;Oe.prototype.getCoordinates=Oe.prototype.G;q("ol.geom.MultiLineString",hi);hi.prototype.clone=hi.prototype.clone;S.prototype.getCoordinateAtM=S.prototype.De;hi.prototype.getCoordinates=hi.prototype.G;hi.prototype.getFirstCoordinate=hi.prototype.Gb;hi.prototype.getLineStrings=hi.prototype.jb;hi.prototype.getType=hi.prototype.I;
hi.prototype.setCoordinates=hi.prototype.Y;q("ol.geom.MultiPoint",ki);ki.prototype.clone=ki.prototype.clone;ki.prototype.getCoordinates=ki.prototype.G;ki.prototype.getFirstCoordinate=ki.prototype.Gb;ki.prototype.getType=ki.prototype.I;ki.prototype.setCoordinates=ki.prototype.Y;q("ol.geom.MultiPolygon",mi);mi.prototype.clone=mi.prototype.clone;mi.prototype.getCoordinates=mi.prototype.G;mi.prototype.getArea=mi.prototype.Eh;mi.prototype.getFirstCoordinate=mi.prototype.Gb;
mi.prototype.getInteriorPoints=mi.prototype.lg;mi.prototype.getType=mi.prototype.I;mi.prototype.setCoordinates=mi.prototype.Y;q("ol.geom.Point",Qe);Qe.prototype.clone=Qe.prototype.clone;Qe.prototype.getCoordinates=Qe.prototype.G;Qe.prototype.getType=Qe.prototype.I;Qe.prototype.setCoordinates=Qe.prototype.Y;q("ol.geom.Polygon",z);z.prototype.clone=z.prototype.clone;z.prototype.getArea=z.prototype.Fh;z.prototype.getCoordinates=z.prototype.G;z.prototype.getFirstCoordinate=z.prototype.Gb;
z.prototype.getInteriorPoint=z.prototype.kg;z.prototype.getLinearRing=z.prototype.de;z.prototype.getType=z.prototype.I;z.prototype.setCoordinates=z.prototype.Y;q("ol.Sphere",cb);cb.prototype.geodesicArea=cb.prototype.f;cb.prototype.haversineDistance=cb.prototype.b;q("ol.loadingstrategy.all",eo);q("ol.loadingstrategy.bbox",function(a){return[a]});
q("ol.loadingstrategy.tile",function(a){return function(b,c){c=Qb(a,c);b=Mb(a,b,c);var d=[];c=[c,0,0];for(c[1]=b.O;c[1]<=b.R;++c[1])for(c[2]=b.S;c[2]<=b.U;++c[2])d.push(Pb(a,c));return d}});
  return OPENLAYERS.ol;
}));


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],29:[function(require,module,exports){
var mgrs = require('mgrs');

function Point(x, y, z) {
  if (!(this instanceof Point)) {
    return new Point(x, y, z);
  }
  if (Array.isArray(x)) {
    this.x = x[0];
    this.y = x[1];
    this.z = x[2] || 0.0;
  }else if(typeof x === 'object'){
    this.x = x.x;
    this.y = x.y;
    this.z = x.z || 0.0;
  } else if (typeof x === 'string' && typeof y === 'undefined') {
    var coords = x.split(',');
    this.x = parseFloat(coords[0], 10);
    this.y = parseFloat(coords[1], 10);
    this.z = parseFloat(coords[2], 10) || 0.0;
  }
  else {
    this.x = x;
    this.y = y;
    this.z = z || 0.0;
  }
  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');
}

Point.fromMGRS = function(mgrsStr) {
  return new Point(mgrs.toPoint(mgrsStr));
};
Point.prototype.toMGRS = function(accuracy) {
  return mgrs.forward([this.x, this.y], accuracy);
};
module.exports = Point;
},{"mgrs":27}],30:[function(require,module,exports){
var parseCode = require("./parseCode");
var extend = require('./extend');
var projections = require('./projections');
var deriveConstants = require('./deriveConstants');

function Projection(srsCode,callback) {
  if (!(this instanceof Projection)) {
    return new Projection(srsCode);
  }
  callback = callback || function(error){
    if(error){
      throw error;
    }
  };
  var json = parseCode(srsCode);
  if(typeof json !== 'object'){
    callback(srsCode);
    return;
  }
  var modifiedJSON = deriveConstants(json);
  var ourProj = Projection.projections.get(modifiedJSON.projName);
  if(ourProj){
    extend(this, modifiedJSON);
    extend(this, ourProj);
    this.init();
    callback(null, this);
  }else{
    callback(srsCode);
  }
}
Projection.projections = projections;
Projection.projections.start();
module.exports = Projection;

},{"./deriveConstants":61,"./extend":62,"./parseCode":66,"./projections":68}],31:[function(require,module,exports){
module.exports = function(crs, denorm, point) {
  var xin = point.x,
    yin = point.y,
    zin = point.z || 0.0;
  var v, t, i;
  for (i = 0; i < 3; i++) {
    if (denorm && i === 2 && point.z === undefined) {
      continue;
    }
    if (i === 0) {
      v = xin;
      t = 'x';
    }
    else if (i === 1) {
      v = yin;
      t = 'y';
    }
    else {
      v = zin;
      t = 'z';
    }
    switch (crs.axis[i]) {
    case 'e':
      point[t] = v;
      break;
    case 'w':
      point[t] = -v;
      break;
    case 'n':
      point[t] = v;
      break;
    case 's':
      point[t] = -v;
      break;
    case 'u':
      if (point[t] !== undefined) {
        point.z = v;
      }
      break;
    case 'd':
      if (point[t] !== undefined) {
        point.z = -v;
      }
      break;
    default:
      //console.log("ERROR: unknow axis ("+crs.axis[i]+") - check definition of "+crs.projName);
      return null;
    }
  }
  return point;
};

},{}],32:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var sign = require('./sign');

module.exports = function(x) {
  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));
};
},{"./sign":49}],33:[function(require,module,exports){
var TWO_PI = Math.PI * 2;
// SPI is slightly greater than Math.PI, so values that exceed the -180..180
// degree range by a tiny amount don't get wrapped. This prevents points that
// have drifted from their original location along the 180th meridian (due to
// floating point error) from changing their sign.
var SPI = 3.14159265359;
var sign = require('./sign');

module.exports = function(x) {
  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));
};
},{"./sign":49}],34:[function(require,module,exports){
module.exports = function(x) {
  if (Math.abs(x) > 1) {
    x = (x > 1) ? 1 : -1;
  }
  return Math.asin(x);
};
},{}],35:[function(require,module,exports){
module.exports = function(x) {
  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));
};
},{}],36:[function(require,module,exports){
module.exports = function(x) {
  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));
};
},{}],37:[function(require,module,exports){
module.exports = function(x) {
  return (0.05859375 * x * x * (1 + 0.75 * x));
};
},{}],38:[function(require,module,exports){
module.exports = function(x) {
  return (x * x * x * (35 / 3072));
};
},{}],39:[function(require,module,exports){
module.exports = function(a, e, sinphi) {
  var temp = e * sinphi;
  return a / Math.sqrt(1 - temp * temp);
};
},{}],40:[function(require,module,exports){
module.exports = function(ml, e0, e1, e2, e3) {
  var phi;
  var dphi;

  phi = ml / e0;
  for (var i = 0; i < 15; i++) {
    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));
    phi += dphi;
    if (Math.abs(dphi) <= 0.0000000001) {
      return phi;
    }
  }

  //..reportError("IMLFN-CONV:Latitude failed to converge after 15 iterations");
  return NaN;
};
},{}],41:[function(require,module,exports){
var HALF_PI = Math.PI/2;

module.exports = function(eccent, q) {
  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));
  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {
    if (q < 0) {
      return (-1 * HALF_PI);
    }
    else {
      return HALF_PI;
    }
  }
  //var phi = 0.5* q/(1-eccent*eccent);
  var phi = Math.asin(0.5 * q);
  var dphi;
  var sin_phi;
  var cos_phi;
  var con;
  for (var i = 0; i < 30; i++) {
    sin_phi = Math.sin(phi);
    cos_phi = Math.cos(phi);
    con = eccent * sin_phi;
    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));
    phi += dphi;
    if (Math.abs(dphi) <= 0.0000000001) {
      return phi;
    }
  }

  //console.log("IQSFN-CONV:Latitude failed to converge after 30 iterations");
  return NaN;
};
},{}],42:[function(require,module,exports){
module.exports = function(e0, e1, e2, e3, phi) {
  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));
};
},{}],43:[function(require,module,exports){
module.exports = function(eccent, sinphi, cosphi) {
  var con = eccent * sinphi;
  return cosphi / (Math.sqrt(1 - con * con));
};
},{}],44:[function(require,module,exports){
var HALF_PI = Math.PI/2;
module.exports = function(eccent, ts) {
  var eccnth = 0.5 * eccent;
  var con, dphi;
  var phi = HALF_PI - 2 * Math.atan(ts);
  for (var i = 0; i <= 15; i++) {
    con = eccent * Math.sin(phi);
    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;
    phi += dphi;
    if (Math.abs(dphi) <= 0.0000000001) {
      return phi;
    }
  }
  //console.log("phi2z has NoConvergence");
  return -9999;
};
},{}],45:[function(require,module,exports){
var C00 = 1;
var C02 = 0.25;
var C04 = 0.046875;
var C06 = 0.01953125;
var C08 = 0.01068115234375;
var C22 = 0.75;
var C44 = 0.46875;
var C46 = 0.01302083333333333333;
var C48 = 0.00712076822916666666;
var C66 = 0.36458333333333333333;
var C68 = 0.00569661458333333333;
var C88 = 0.3076171875;

module.exports = function(es) {
  var en = [];
  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));
  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));
  var t = es * es;
  en[2] = t * (C44 - es * (C46 + es * C48));
  t *= es;
  en[3] = t * (C66 - es * C68);
  en[4] = t * es * C88;
  return en;
};
},{}],46:[function(require,module,exports){
var pj_mlfn = require("./pj_mlfn");
var EPSLN = 1.0e-10;
var MAX_ITER = 20;
module.exports = function(arg, es, en) {
  var k = 1 / (1 - es);
  var phi = arg;
  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */
    var s = Math.sin(phi);
    var t = 1 - es * s * s;
    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;
    //phi -= t * (t * Math.sqrt(t)) * k;
    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;
    phi -= t;
    if (Math.abs(t) < EPSLN) {
      return phi;
    }
  }
  //..reportError("cass:pj_inv_mlfn: Convergence error");
  return phi;
};
},{"./pj_mlfn":47}],47:[function(require,module,exports){
module.exports = function(phi, sphi, cphi, en) {
  cphi *= sphi;
  sphi *= sphi;
  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));
};
},{}],48:[function(require,module,exports){
module.exports = function(eccent, sinphi) {
  var con;
  if (eccent > 1.0e-7) {
    con = eccent * sinphi;
    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));
  }
  else {
    return (2 * sinphi);
  }
};
},{}],49:[function(require,module,exports){
module.exports = function(x) {
  return x<0 ? -1 : 1;
};
},{}],50:[function(require,module,exports){
module.exports = function(esinp, exp) {
  return (Math.pow((1 - esinp) / (1 + esinp), exp));
};
},{}],51:[function(require,module,exports){
module.exports = function (array){
  var out = {
    x: array[0],
    y: array[1]
  };
  if (array.length>2) {
    out.z = array[2];
  }
  if (array.length>3) {
    out.m = array[3];
  }
  return out;
};
},{}],52:[function(require,module,exports){
var HALF_PI = Math.PI/2;

module.exports = function(eccent, phi, sinphi) {
  var con = eccent * sinphi;
  var com = 0.5 * eccent;
  con = Math.pow(((1 - con) / (1 + con)), com);
  return (Math.tan(0.5 * (HALF_PI - phi)) / con);
};
},{}],53:[function(require,module,exports){
exports.wgs84 = {
  towgs84: "0,0,0",
  ellipse: "WGS84",
  datumName: "WGS84"
};
exports.ch1903 = {
  towgs84: "674.374,15.056,405.346",
  ellipse: "bessel",
  datumName: "swiss"
};
exports.ggrs87 = {
  towgs84: "-199.87,74.79,246.62",
  ellipse: "GRS80",
  datumName: "Greek_Geodetic_Reference_System_1987"
};
exports.nad83 = {
  towgs84: "0,0,0",
  ellipse: "GRS80",
  datumName: "North_American_Datum_1983"
};
exports.nad27 = {
  nadgrids: "@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",
  ellipse: "clrk66",
  datumName: "North_American_Datum_1927"
};
exports.potsdam = {
  towgs84: "606.0,23.0,413.0",
  ellipse: "bessel",
  datumName: "Potsdam Rauenberg 1950 DHDN"
};
exports.carthage = {
  towgs84: "-263.0,6.0,431.0",
  ellipse: "clark80",
  datumName: "Carthage 1934 Tunisia"
};
exports.hermannskogel = {
  towgs84: "653.0,-212.0,449.0",
  ellipse: "bessel",
  datumName: "Hermannskogel"
};
exports.ire65 = {
  towgs84: "482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",
  ellipse: "mod_airy",
  datumName: "Ireland 1965"
};
exports.rassadiran = {
  towgs84: "-133.63,-157.5,-158.62",
  ellipse: "intl",
  datumName: "Rassadiran"
};
exports.nzgd49 = {
  towgs84: "59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",
  ellipse: "intl",
  datumName: "New Zealand Geodetic Datum 1949"
};
exports.osgb36 = {
  towgs84: "446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",
  ellipse: "airy",
  datumName: "Airy 1830"
};
exports.s_jtsk = {
  towgs84: "589,76,480",
  ellipse: 'bessel',
  datumName: 'S-JTSK (Ferro)'
};
exports.beduaram = {
  towgs84: '-106,-87,188',
  ellipse: 'clrk80',
  datumName: 'Beduaram'
};
exports.gunung_segara = {
  towgs84: '-403,684,41',
  ellipse: 'bessel',
  datumName: 'Gunung Segara Jakarta'
};
exports.rnb72 = {
  towgs84: "106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",
  ellipse: "intl",
  datumName: "Reseau National Belge 1972"
};
},{}],54:[function(require,module,exports){
exports.MERIT = {
  a: 6378137.0,
  rf: 298.257,
  ellipseName: "MERIT 1983"
};
exports.SGS85 = {
  a: 6378136.0,
  rf: 298.257,
  ellipseName: "Soviet Geodetic System 85"
};
exports.GRS80 = {
  a: 6378137.0,
  rf: 298.257222101,
  ellipseName: "GRS 1980(IUGG, 1980)"
};
exports.IAU76 = {
  a: 6378140.0,
  rf: 298.257,
  ellipseName: "IAU 1976"
};
exports.airy = {
  a: 6377563.396,
  b: 6356256.910,
  ellipseName: "Airy 1830"
};
exports.APL4 = {
  a: 6378137,
  rf: 298.25,
  ellipseName: "Appl. Physics. 1965"
};
exports.NWL9D = {
  a: 6378145.0,
  rf: 298.25,
  ellipseName: "Naval Weapons Lab., 1965"
};
exports.mod_airy = {
  a: 6377340.189,
  b: 6356034.446,
  ellipseName: "Modified Airy"
};
exports.andrae = {
  a: 6377104.43,
  rf: 300.0,
  ellipseName: "Andrae 1876 (Den., Iclnd.)"
};
exports.aust_SA = {
  a: 6378160.0,
  rf: 298.25,
  ellipseName: "Australian Natl & S. Amer. 1969"
};
exports.GRS67 = {
  a: 6378160.0,
  rf: 298.2471674270,
  ellipseName: "GRS 67(IUGG 1967)"
};
exports.bessel = {
  a: 6377397.155,
  rf: 299.1528128,
  ellipseName: "Bessel 1841"
};
exports.bess_nam = {
  a: 6377483.865,
  rf: 299.1528128,
  ellipseName: "Bessel 1841 (Namibia)"
};
exports.clrk66 = {
  a: 6378206.4,
  b: 6356583.8,
  ellipseName: "Clarke 1866"
};
exports.clrk80 = {
  a: 6378249.145,
  rf: 293.4663,
  ellipseName: "Clarke 1880 mod."
};
exports.clrk58 = {
  a: 6378293.645208759,
  rf: 294.2606763692654,
  ellipseName: "Clarke 1858"
};
exports.CPM = {
  a: 6375738.7,
  rf: 334.29,
  ellipseName: "Comm. des Poids et Mesures 1799"
};
exports.delmbr = {
  a: 6376428.0,
  rf: 311.5,
  ellipseName: "Delambre 1810 (Belgium)"
};
exports.engelis = {
  a: 6378136.05,
  rf: 298.2566,
  ellipseName: "Engelis 1985"
};
exports.evrst30 = {
  a: 6377276.345,
  rf: 300.8017,
  ellipseName: "Everest 1830"
};
exports.evrst48 = {
  a: 6377304.063,
  rf: 300.8017,
  ellipseName: "Everest 1948"
};
exports.evrst56 = {
  a: 6377301.243,
  rf: 300.8017,
  ellipseName: "Everest 1956"
};
exports.evrst69 = {
  a: 6377295.664,
  rf: 300.8017,
  ellipseName: "Everest 1969"
};
exports.evrstSS = {
  a: 6377298.556,
  rf: 300.8017,
  ellipseName: "Everest (Sabah & Sarawak)"
};
exports.fschr60 = {
  a: 6378166.0,
  rf: 298.3,
  ellipseName: "Fischer (Mercury Datum) 1960"
};
exports.fschr60m = {
  a: 6378155.0,
  rf: 298.3,
  ellipseName: "Fischer 1960"
};
exports.fschr68 = {
  a: 6378150.0,
  rf: 298.3,
  ellipseName: "Fischer 1968"
};
exports.helmert = {
  a: 6378200.0,
  rf: 298.3,
  ellipseName: "Helmert 1906"
};
exports.hough = {
  a: 6378270.0,
  rf: 297.0,
  ellipseName: "Hough"
};
exports.intl = {
  a: 6378388.0,
  rf: 297.0,
  ellipseName: "International 1909 (Hayford)"
};
exports.kaula = {
  a: 6378163.0,
  rf: 298.24,
  ellipseName: "Kaula 1961"
};
exports.lerch = {
  a: 6378139.0,
  rf: 298.257,
  ellipseName: "Lerch 1979"
};
exports.mprts = {
  a: 6397300.0,
  rf: 191.0,
  ellipseName: "Maupertius 1738"
};
exports.new_intl = {
  a: 6378157.5,
  b: 6356772.2,
  ellipseName: "New International 1967"
};
exports.plessis = {
  a: 6376523.0,
  rf: 6355863.0,
  ellipseName: "Plessis 1817 (France)"
};
exports.krass = {
  a: 6378245.0,
  rf: 298.3,
  ellipseName: "Krassovsky, 1942"
};
exports.SEasia = {
  a: 6378155.0,
  b: 6356773.3205,
  ellipseName: "Southeast Asia"
};
exports.walbeck = {
  a: 6376896.0,
  b: 6355834.8467,
  ellipseName: "Walbeck"
};
exports.WGS60 = {
  a: 6378165.0,
  rf: 298.3,
  ellipseName: "WGS 60"
};
exports.WGS66 = {
  a: 6378145.0,
  rf: 298.25,
  ellipseName: "WGS 66"
};
exports.WGS7 = {
  a: 6378135.0,
  rf: 298.26,
  ellipseName: "WGS 72"
};
exports.WGS84 = {
  a: 6378137.0,
  rf: 298.257223563,
  ellipseName: "WGS 84"
};
exports.sphere = {
  a: 6370997.0,
  b: 6370997.0,
  ellipseName: "Normal Sphere (r=6370997)"
};
},{}],55:[function(require,module,exports){
exports.greenwich = 0.0; //"0dE",
exports.lisbon = -9.131906111111; //"9d07'54.862\"W",
exports.paris = 2.337229166667; //"2d20'14.025\"E",
exports.bogota = -74.080916666667; //"74d04'51.3\"W",
exports.madrid = -3.687938888889; //"3d41'16.58\"W",
exports.rome = 12.452333333333; //"12d27'8.4\"E",
exports.bern = 7.439583333333; //"7d26'22.5\"E",
exports.jakarta = 106.807719444444; //"106d48'27.79\"E",
exports.ferro = -17.666666666667; //"17d40'W",
exports.brussels = 4.367975; //"4d22'4.71\"E",
exports.stockholm = 18.058277777778; //"18d3'29.8\"E",
exports.athens = 23.7163375; //"23d42'58.815\"E",
exports.oslo = 10.722916666667; //"10d43'22.5\"E"
},{}],56:[function(require,module,exports){
exports.ft = {to_meter: 0.3048};
exports['us-ft'] = {to_meter: 1200 / 3937};

},{}],57:[function(require,module,exports){
var proj = require('./Proj');
var transform = require('./transform');
var wgs84 = proj('WGS84');

function transformer(from, to, coords) {
  var transformedArray;
  if (Array.isArray(coords)) {
    transformedArray = transform(from, to, coords);
    if (coords.length === 3) {
      return [transformedArray.x, transformedArray.y, transformedArray.z];
    }
    else {
      return [transformedArray.x, transformedArray.y];
    }
  }
  else {
    return transform(from, to, coords);
  }
}

function checkProj(item) {
  if (item instanceof proj) {
    return item;
  }
  if (item.oProj) {
    return item.oProj;
  }
  return proj(item);
}
function proj4(fromProj, toProj, coord) {
  fromProj = checkProj(fromProj);
  var single = false;
  var obj;
  if (typeof toProj === 'undefined') {
    toProj = fromProj;
    fromProj = wgs84;
    single = true;
  }
  else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {
    coord = toProj;
    toProj = fromProj;
    fromProj = wgs84;
    single = true;
  }
  toProj = checkProj(toProj);
  if (coord) {
    return transformer(fromProj, toProj, coord);
  }
  else {
    obj = {
      forward: function(coords) {
        return transformer(fromProj, toProj, coords);
      },
      inverse: function(coords) {
        return transformer(toProj, fromProj, coords);
      }
    };
    if (single) {
      obj.oProj = toProj;
    }
    return obj;
  }
}
module.exports = proj4;
},{"./Proj":30,"./transform":94}],58:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var PJD_3PARAM = 1;
var PJD_7PARAM = 2;
var PJD_GRIDSHIFT = 3;
var PJD_WGS84 = 4; // WGS84 or equivalent
var PJD_NODATUM = 5; // WGS84 or equivalent
var SEC_TO_RAD = 4.84813681109535993589914102357e-6;
var AD_C = 1.0026000;
var COS_67P5 = 0.38268343236508977;
var datum = function(proj) {
  if (!(this instanceof datum)) {
    return new datum(proj);
  }
  this.datum_type = PJD_WGS84; //default setting
  if (!proj) {
    return;
  }
  if (proj.datumCode && proj.datumCode === 'none') {
    this.datum_type = PJD_NODATUM;
  }
  if (proj.datum_params) {
    for (var i = 0; i < proj.datum_params.length; i++) {
      proj.datum_params[i] = parseFloat(proj.datum_params[i]);
    }
    if (proj.datum_params[0] !== 0 || proj.datum_params[1] !== 0 || proj.datum_params[2] !== 0) {
      this.datum_type = PJD_3PARAM;
    }
    if (proj.datum_params.length > 3) {
      if (proj.datum_params[3] !== 0 || proj.datum_params[4] !== 0 || proj.datum_params[5] !== 0 || proj.datum_params[6] !== 0) {
        this.datum_type = PJD_7PARAM;
        proj.datum_params[3] *= SEC_TO_RAD;
        proj.datum_params[4] *= SEC_TO_RAD;
        proj.datum_params[5] *= SEC_TO_RAD;
        proj.datum_params[6] = (proj.datum_params[6] / 1000000.0) + 1.0;
      }
    }
  }
  // DGR 2011-03-21 : nadgrids support
  this.datum_type = proj.grids ? PJD_GRIDSHIFT : this.datum_type;

  this.a = proj.a; //datum object also uses these values
  this.b = proj.b;
  this.es = proj.es;
  this.ep2 = proj.ep2;
  this.datum_params = proj.datum_params;
  if (this.datum_type === PJD_GRIDSHIFT) {
    this.grids = proj.grids;
  }
};
datum.prototype = {


  /****************************************************************/
  // cs_compare_datums()
  //   Returns TRUE if the two datums match, otherwise FALSE.
  compare_datums: function(dest) {
    if (this.datum_type !== dest.datum_type) {
      return false; // false, datums are not equal
    }
    else if (this.a !== dest.a || Math.abs(this.es - dest.es) > 0.000000000050) {
      // the tolerence for es is to ensure that GRS80 and WGS84
      // are considered identical
      return false;
    }
    else if (this.datum_type === PJD_3PARAM) {
      return (this.datum_params[0] === dest.datum_params[0] && this.datum_params[1] === dest.datum_params[1] && this.datum_params[2] === dest.datum_params[2]);
    }
    else if (this.datum_type === PJD_7PARAM) {
      return (this.datum_params[0] === dest.datum_params[0] && this.datum_params[1] === dest.datum_params[1] && this.datum_params[2] === dest.datum_params[2] && this.datum_params[3] === dest.datum_params[3] && this.datum_params[4] === dest.datum_params[4] && this.datum_params[5] === dest.datum_params[5] && this.datum_params[6] === dest.datum_params[6]);
    }
    else if (this.datum_type === PJD_GRIDSHIFT || dest.datum_type === PJD_GRIDSHIFT) {
      //alert("ERROR: Grid shift transformations are not implemented.");
      //return false
      //DGR 2012-07-29 lazy ...
      return this.nadgrids === dest.nadgrids;
    }
    else {
      return true; // datums are equal
    }
  }, // cs_compare_datums()

  /*
   * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates
   * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),
   * according to the current ellipsoid parameters.
   *
   *    Latitude  : Geodetic latitude in radians                     (input)
   *    Longitude : Geodetic longitude in radians                    (input)
   *    Height    : Geodetic height, in meters                       (input)
   *    X         : Calculated Geocentric X coordinate, in meters    (output)
   *    Y         : Calculated Geocentric Y coordinate, in meters    (output)
   *    Z         : Calculated Geocentric Z coordinate, in meters    (output)
   *
   */
  geodetic_to_geocentric: function(p) {
    var Longitude = p.x;
    var Latitude = p.y;
    var Height = p.z ? p.z : 0; //Z value not always supplied
    var X; // output
    var Y;
    var Z;

    var Error_Code = 0; //  GEOCENT_NO_ERROR;
    var Rn; /*  Earth radius at location  */
    var Sin_Lat; /*  Math.sin(Latitude)  */
    var Sin2_Lat; /*  Square of Math.sin(Latitude)  */
    var Cos_Lat; /*  Math.cos(Latitude)  */

    /*
     ** Don't blow up if Latitude is just a little out of the value
     ** range as it may just be a rounding issue.  Also removed longitude
     ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.
     */
    if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {
      Latitude = -HALF_PI;
    }
    else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {
      Latitude = HALF_PI;
    }
    else if ((Latitude < -HALF_PI) || (Latitude > HALF_PI)) {
      /* Latitude out of range */
      //..reportError('geocent:lat out of range:' + Latitude);
      return null;
    }

    if (Longitude > Math.PI) {
      Longitude -= (2 * Math.PI);
    }
    Sin_Lat = Math.sin(Latitude);
    Cos_Lat = Math.cos(Latitude);
    Sin2_Lat = Sin_Lat * Sin_Lat;
    Rn = this.a / (Math.sqrt(1.0e0 - this.es * Sin2_Lat));
    X = (Rn + Height) * Cos_Lat * Math.cos(Longitude);
    Y = (Rn + Height) * Cos_Lat * Math.sin(Longitude);
    Z = ((Rn * (1 - this.es)) + Height) * Sin_Lat;

    p.x = X;
    p.y = Y;
    p.z = Z;
    return Error_Code;
  }, // cs_geodetic_to_geocentric()


  geocentric_to_geodetic: function(p) {
    /* local defintions and variables */
    /* end-criterium of loop, accuracy of sin(Latitude) */
    var genau = 1e-12;
    var genau2 = (genau * genau);
    var maxiter = 30;

    var P; /* distance between semi-minor axis and location */
    var RR; /* distance between center and location */
    var CT; /* sin of geocentric latitude */
    var ST; /* cos of geocentric latitude */
    var RX;
    var RK;
    var RN; /* Earth radius at location */
    var CPHI0; /* cos of start or old geodetic latitude in iterations */
    var SPHI0; /* sin of start or old geodetic latitude in iterations */
    var CPHI; /* cos of searched geodetic latitude */
    var SPHI; /* sin of searched geodetic latitude */
    var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */
    var At_Pole; /* indicates location is in polar region */
    var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */

    var X = p.x;
    var Y = p.y;
    var Z = p.z ? p.z : 0.0; //Z value not always supplied
    var Longitude;
    var Latitude;
    var Height;

    At_Pole = false;
    P = Math.sqrt(X * X + Y * Y);
    RR = Math.sqrt(X * X + Y * Y + Z * Z);

    /*      special cases for latitude and longitude */
    if (P / this.a < genau) {

      /*  special case, if P=0. (X=0., Y=0.) */
      At_Pole = true;
      Longitude = 0.0;

      /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis
       *  of ellipsoid (=center of mass), Latitude becomes PI/2 */
      if (RR / this.a < genau) {
        Latitude = HALF_PI;
        Height = -this.b;
        return;
      }
    }
    else {
      /*  ellipsoidal (geodetic) longitude
       *  interval: -PI < Longitude <= +PI */
      Longitude = Math.atan2(Y, X);
    }

    /* --------------------------------------------------------------
     * Following iterative algorithm was developped by
     * "Institut for Erdmessung", University of Hannover, July 1988.
     * Internet: www.ife.uni-hannover.de
     * Iterative computation of CPHI,SPHI and Height.
     * Iteration of CPHI and SPHI to 10**-12 radian resp.
     * 2*10**-7 arcsec.
     * --------------------------------------------------------------
     */
    CT = Z / RR;
    ST = P / RR;
    RX = 1.0 / Math.sqrt(1.0 - this.es * (2.0 - this.es) * ST * ST);
    CPHI0 = ST * (1.0 - this.es) * RX;
    SPHI0 = CT * RX;
    iter = 0;

    /* loop to find sin(Latitude) resp. Latitude
     * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */
    do {
      iter++;
      RN = this.a / Math.sqrt(1.0 - this.es * SPHI0 * SPHI0);

      /*  ellipsoidal (geodetic) height */
      Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - this.es * SPHI0 * SPHI0);

      RK = this.es * RN / (RN + Height);
      RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);
      CPHI = ST * (1.0 - RK) * RX;
      SPHI = CT * RX;
      SDPHI = SPHI * CPHI0 - CPHI * SPHI0;
      CPHI0 = CPHI;
      SPHI0 = SPHI;
    }
    while (SDPHI * SDPHI > genau2 && iter < maxiter);

    /*      ellipsoidal (geodetic) latitude */
    Latitude = Math.atan(SPHI / Math.abs(CPHI));

    p.x = Longitude;
    p.y = Latitude;
    p.z = Height;
    return p;
  }, // cs_geocentric_to_geodetic()

  /** Convert_Geocentric_To_Geodetic
   * The method used here is derived from 'An Improved Algorithm for
   * Geocentric to Geodetic Coordinate Conversion', by Ralph Toms, Feb 1996
   */
  geocentric_to_geodetic_noniter: function(p) {
    var X = p.x;
    var Y = p.y;
    var Z = p.z ? p.z : 0; //Z value not always supplied
    var Longitude;
    var Latitude;
    var Height;

    var W; /* distance from Z axis */
    var W2; /* square of distance from Z axis */
    var T0; /* initial estimate of vertical component */
    var T1; /* corrected estimate of vertical component */
    var S0; /* initial estimate of horizontal component */
    var S1; /* corrected estimate of horizontal component */
    var Sin_B0; /* Math.sin(B0), B0 is estimate of Bowring aux variable */
    var Sin3_B0; /* cube of Math.sin(B0) */
    var Cos_B0; /* Math.cos(B0) */
    var Sin_p1; /* Math.sin(phi1), phi1 is estimated latitude */
    var Cos_p1; /* Math.cos(phi1) */
    var Rn; /* Earth radius at location */
    var Sum; /* numerator of Math.cos(phi1) */
    var At_Pole; /* indicates location is in polar region */

    X = parseFloat(X); // cast from string to float
    Y = parseFloat(Y);
    Z = parseFloat(Z);

    At_Pole = false;
    if (X !== 0.0) {
      Longitude = Math.atan2(Y, X);
    }
    else {
      if (Y > 0) {
        Longitude = HALF_PI;
      }
      else if (Y < 0) {
        Longitude = -HALF_PI;
      }
      else {
        At_Pole = true;
        Longitude = 0.0;
        if (Z > 0.0) { /* north pole */
          Latitude = HALF_PI;
        }
        else if (Z < 0.0) { /* south pole */
          Latitude = -HALF_PI;
        }
        else { /* center of earth */
          Latitude = HALF_PI;
          Height = -this.b;
          return;
        }
      }
    }
    W2 = X * X + Y * Y;
    W = Math.sqrt(W2);
    T0 = Z * AD_C;
    S0 = Math.sqrt(T0 * T0 + W2);
    Sin_B0 = T0 / S0;
    Cos_B0 = W / S0;
    Sin3_B0 = Sin_B0 * Sin_B0 * Sin_B0;
    T1 = Z + this.b * this.ep2 * Sin3_B0;
    Sum = W - this.a * this.es * Cos_B0 * Cos_B0 * Cos_B0;
    S1 = Math.sqrt(T1 * T1 + Sum * Sum);
    Sin_p1 = T1 / S1;
    Cos_p1 = Sum / S1;
    Rn = this.a / Math.sqrt(1.0 - this.es * Sin_p1 * Sin_p1);
    if (Cos_p1 >= COS_67P5) {
      Height = W / Cos_p1 - Rn;
    }
    else if (Cos_p1 <= -COS_67P5) {
      Height = W / -Cos_p1 - Rn;
    }
    else {
      Height = Z / Sin_p1 + Rn * (this.es - 1.0);
    }
    if (At_Pole === false) {
      Latitude = Math.atan(Sin_p1 / Cos_p1);
    }

    p.x = Longitude;
    p.y = Latitude;
    p.z = Height;
    return p;
  }, // geocentric_to_geodetic_noniter()

  /****************************************************************/
  // pj_geocentic_to_wgs84( p )
  //  p = point to transform in geocentric coordinates (x,y,z)
  geocentric_to_wgs84: function(p) {

    if (this.datum_type === PJD_3PARAM) {
      // if( x[io] === HUGE_VAL )
      //    continue;
      p.x += this.datum_params[0];
      p.y += this.datum_params[1];
      p.z += this.datum_params[2];

    }
    else if (this.datum_type === PJD_7PARAM) {
      var Dx_BF = this.datum_params[0];
      var Dy_BF = this.datum_params[1];
      var Dz_BF = this.datum_params[2];
      var Rx_BF = this.datum_params[3];
      var Ry_BF = this.datum_params[4];
      var Rz_BF = this.datum_params[5];
      var M_BF = this.datum_params[6];
      // if( x[io] === HUGE_VAL )
      //    continue;
      var x_out = M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF;
      var y_out = M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF;
      var z_out = M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF;
      p.x = x_out;
      p.y = y_out;
      p.z = z_out;
    }
  }, // cs_geocentric_to_wgs84

  /****************************************************************/
  // pj_geocentic_from_wgs84()
  //  coordinate system definition,
  //  point to transform in geocentric coordinates (x,y,z)
  geocentric_from_wgs84: function(p) {

    if (this.datum_type === PJD_3PARAM) {
      //if( x[io] === HUGE_VAL )
      //    continue;
      p.x -= this.datum_params[0];
      p.y -= this.datum_params[1];
      p.z -= this.datum_params[2];

    }
    else if (this.datum_type === PJD_7PARAM) {
      var Dx_BF = this.datum_params[0];
      var Dy_BF = this.datum_params[1];
      var Dz_BF = this.datum_params[2];
      var Rx_BF = this.datum_params[3];
      var Ry_BF = this.datum_params[4];
      var Rz_BF = this.datum_params[5];
      var M_BF = this.datum_params[6];
      var x_tmp = (p.x - Dx_BF) / M_BF;
      var y_tmp = (p.y - Dy_BF) / M_BF;
      var z_tmp = (p.z - Dz_BF) / M_BF;
      //if( x[io] === HUGE_VAL )
      //    continue;

      p.x = x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp;
      p.y = -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp;
      p.z = Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp;
    } //cs_geocentric_from_wgs84()
  }
};

/** point object, nothing fancy, just allows values to be
    passed back and forth by reference rather than by value.
    Other point classes may be used as long as they have
    x and y properties, which will get modified in the transform method.
*/
module.exports = datum;

},{}],59:[function(require,module,exports){
var PJD_3PARAM = 1;
var PJD_7PARAM = 2;
var PJD_GRIDSHIFT = 3;
var PJD_NODATUM = 5; // WGS84 or equivalent
var SRS_WGS84_SEMIMAJOR = 6378137; // only used in grid shift transforms
var SRS_WGS84_ESQUARED = 0.006694379990141316; //DGR: 2012-07-29
module.exports = function(source, dest, point) {
  var wp, i, l;

  function checkParams(fallback) {
    return (fallback === PJD_3PARAM || fallback === PJD_7PARAM);
  }
  // Short cut if the datums are identical.
  if (source.compare_datums(dest)) {
    return point; // in this case, zero is sucess,
    // whereas cs_compare_datums returns 1 to indicate TRUE
    // confusing, should fix this
  }

  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest
  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {
    return point;
  }

  //DGR: 2012-07-29 : add nadgrids support (begin)
  var src_a = source.a;
  var src_es = source.es;

  var dst_a = dest.a;
  var dst_es = dest.es;

  var fallback = source.datum_type;
  // If this datum requires grid shifts, then apply it to geodetic coordinates.
  if (fallback === PJD_GRIDSHIFT) {
    if (this.apply_gridshift(source, 0, point) === 0) {
      source.a = SRS_WGS84_SEMIMAJOR;
      source.es = SRS_WGS84_ESQUARED;
    }
    else {
      // try 3 or 7 params transformation or nothing ?
      if (!source.datum_params) {
        source.a = src_a;
        source.es = source.es;
        return point;
      }
      wp = 1;
      for (i = 0, l = source.datum_params.length; i < l; i++) {
        wp *= source.datum_params[i];
      }
      if (wp === 0) {
        source.a = src_a;
        source.es = source.es;
        return point;
      }
      if (source.datum_params.length > 3) {
        fallback = PJD_7PARAM;
      }
      else {
        fallback = PJD_3PARAM;
      }
    }
  }
  if (dest.datum_type === PJD_GRIDSHIFT) {
    dest.a = SRS_WGS84_SEMIMAJOR;
    dest.es = SRS_WGS84_ESQUARED;
  }
  // Do we need to go through geocentric coordinates?
  if (source.es !== dest.es || source.a !== dest.a || checkParams(fallback) || checkParams(dest.datum_type)) {
    //DGR: 2012-07-29 : add nadgrids support (end)
    // Convert to geocentric coordinates.
    source.geodetic_to_geocentric(point);
    // CHECK_RETURN;
    // Convert between datums
    if (checkParams(source.datum_type)) {
      source.geocentric_to_wgs84(point);
      // CHECK_RETURN;
    }
    if (checkParams(dest.datum_type)) {
      dest.geocentric_from_wgs84(point);
      // CHECK_RETURN;
    }
    // Convert back to geodetic coordinates
    dest.geocentric_to_geodetic(point);
    // CHECK_RETURN;
  }
  // Apply grid shift to destination if required
  if (dest.datum_type === PJD_GRIDSHIFT) {
    this.apply_gridshift(dest, 1, point);
    // CHECK_RETURN;
  }

  source.a = src_a;
  source.es = src_es;
  dest.a = dst_a;
  dest.es = dst_es;

  return point;
};


},{}],60:[function(require,module,exports){
var globals = require('./global');
var parseProj = require('./projString');
var wkt = require('./wkt');

function defs(name) {
  /*global console*/
  var that = this;
  if (arguments.length === 2) {
    var def = arguments[1];
    if (typeof def === 'string') {
      if (def.charAt(0) === '+') {
        defs[name] = parseProj(arguments[1]);
      }
      else {
        defs[name] = wkt(arguments[1]);
      }
    } else {
      defs[name] = def;
    }
  }
  else if (arguments.length === 1) {
    if (Array.isArray(name)) {
      return name.map(function(v) {
        if (Array.isArray(v)) {
          defs.apply(that, v);
        }
        else {
          defs(v);
        }
      });
    }
    else if (typeof name === 'string') {
      if (name in defs) {
        return defs[name];
      }
    }
    else if ('EPSG' in name) {
      defs['EPSG:' + name.EPSG] = name;
    }
    else if ('ESRI' in name) {
      defs['ESRI:' + name.ESRI] = name;
    }
    else if ('IAU2000' in name) {
      defs['IAU2000:' + name.IAU2000] = name;
    }
    else {
      console.log(name);
    }
    return;
  }


}
globals(defs);
module.exports = defs;

},{"./global":63,"./projString":67,"./wkt":95}],61:[function(require,module,exports){
var Datum = require('./constants/Datum');
var Ellipsoid = require('./constants/Ellipsoid');
var extend = require('./extend');
var datum = require('./datum');
var EPSLN = 1.0e-10;
// ellipoid pj_set_ell.c
var SIXTH = 0.1666666666666666667;
/* 1/6 */
var RA4 = 0.04722222222222222222;
/* 17/360 */
var RA6 = 0.02215608465608465608;
module.exports = function(json) {
  // DGR 2011-03-20 : nagrids -> nadgrids
  if (json.datumCode && json.datumCode !== 'none') {
    var datumDef = Datum[json.datumCode];
    if (datumDef) {
      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;
      json.ellps = datumDef.ellipse;
      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;
    }
  }
  if (!json.a) { // do we have an ellipsoid?
    var ellipse = Ellipsoid[json.ellps] ? Ellipsoid[json.ellps] : Ellipsoid.WGS84;
    extend(json, ellipse);
  }
  if (json.rf && !json.b) {
    json.b = (1.0 - 1.0 / json.rf) * json.a;
  }
  if (json.rf === 0 || Math.abs(json.a - json.b) < EPSLN) {
    json.sphere = true;
    json.b = json.a;
  }
  json.a2 = json.a * json.a; // used in geocentric
  json.b2 = json.b * json.b; // used in geocentric
  json.es = (json.a2 - json.b2) / json.a2; // e ^ 2
  json.e = Math.sqrt(json.es); // eccentricity
  if (json.R_A) {
    json.a *= 1 - json.es * (SIXTH + json.es * (RA4 + json.es * RA6));
    json.a2 = json.a * json.a;
    json.b2 = json.b * json.b;
    json.es = 0;
  }
  json.ep2 = (json.a2 - json.b2) / json.b2; // used in geocentric
  if (!json.k0) {
    json.k0 = 1.0; //default value
  }
  //DGR 2010-11-12: axis
  if (!json.axis) {
    json.axis = "enu";
  }

  if (!json.datum) {
    json.datum = datum(json);
  }
  return json;
};

},{"./constants/Datum":53,"./constants/Ellipsoid":54,"./datum":58,"./extend":62}],62:[function(require,module,exports){
module.exports = function(destination, source) {
  destination = destination || {};
  var value, property;
  if (!source) {
    return destination;
  }
  for (property in source) {
    value = source[property];
    if (value !== undefined) {
      destination[property] = value;
    }
  }
  return destination;
};

},{}],63:[function(require,module,exports){
module.exports = function(defs) {
  defs('EPSG:4326', "+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees");
  defs('EPSG:4269', "+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees");
  defs('EPSG:3857', "+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");

  defs.WGS84 = defs['EPSG:4326'];
  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857
  defs.GOOGLE = defs['EPSG:3857'];
  defs['EPSG:900913'] = defs['EPSG:3857'];
  defs['EPSG:102113'] = defs['EPSG:3857'];
};

},{}],64:[function(require,module,exports){
var projs = [
  require('./projections/tmerc'),
  require('./projections/utm'),
  require('./projections/sterea'),
  require('./projections/stere'),
  require('./projections/somerc'),
  require('./projections/omerc'),
  require('./projections/lcc'),
  require('./projections/krovak'),
  require('./projections/cass'),
  require('./projections/laea'),
  require('./projections/aea'),
  require('./projections/gnom'),
  require('./projections/cea'),
  require('./projections/eqc'),
  require('./projections/poly'),
  require('./projections/nzmg'),
  require('./projections/mill'),
  require('./projections/sinu'),
  require('./projections/moll'),
  require('./projections/eqdc'),
  require('./projections/vandg'),
  require('./projections/aeqd')
];
module.exports = function(proj4){
  projs.forEach(function(proj){
    proj4.Proj.projections.add(proj);
  });
};
},{"./projections/aea":69,"./projections/aeqd":70,"./projections/cass":71,"./projections/cea":72,"./projections/eqc":73,"./projections/eqdc":74,"./projections/gnom":76,"./projections/krovak":77,"./projections/laea":78,"./projections/lcc":79,"./projections/mill":82,"./projections/moll":83,"./projections/nzmg":84,"./projections/omerc":85,"./projections/poly":86,"./projections/sinu":87,"./projections/somerc":88,"./projections/stere":89,"./projections/sterea":90,"./projections/tmerc":91,"./projections/utm":92,"./projections/vandg":93}],65:[function(require,module,exports){
var proj4 = require('./core');
proj4.defaultDatum = 'WGS84'; //default datum
proj4.Proj = require('./Proj');
proj4.WGS84 = new proj4.Proj('WGS84');
proj4.Point = require('./Point');
proj4.toPoint = require("./common/toPoint");
proj4.defs = require('./defs');
proj4.transform = require('./transform');
proj4.mgrs = require('mgrs');
proj4.version = require('../package.json').version;
require('./includedProjections')(proj4);
module.exports = proj4;
},{"../package.json":96,"./Point":29,"./Proj":30,"./common/toPoint":51,"./core":57,"./defs":60,"./includedProjections":64,"./transform":94,"mgrs":27}],66:[function(require,module,exports){
var defs = require('./defs');
var wkt = require('./wkt');
var projStr = require('./projString');
function testObj(code){
  return typeof code === 'string';
}
function testDef(code){
  return code in defs;
}
function testWKT(code){
  var codeWords = ['GEOGCS','GEOCCS','PROJCS','LOCAL_CS'];
  return codeWords.reduce(function(a,b){
    return a+1+code.indexOf(b);
  },0);
}
function testProj(code){
  return code[0] === '+';
}
function parse(code){
  if (testObj(code)) {
    //check to see if this is a WKT string
    if (testDef(code)) {
      return defs[code];
    }
    else if (testWKT(code)) {
      return wkt(code);
    }
    else if (testProj(code)) {
      return projStr(code);
    }
  }else{
    return code;
  }
}

module.exports = parse;
},{"./defs":60,"./projString":67,"./wkt":95}],67:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var PrimeMeridian = require('./constants/PrimeMeridian');
var units = require('./constants/units');

module.exports = function(defData) {
  var self = {};
  var paramObj = {};
  defData.split("+").map(function(v) {
    return v.trim();
  }).filter(function(a) {
    return a;
  }).forEach(function(a) {
    var split = a.split("=");
    split.push(true);
    paramObj[split[0].toLowerCase()] = split[1];
  });
  var paramName, paramVal, paramOutname;
  var params = {
    proj: 'projName',
    datum: 'datumCode',
    rf: function(v) {
      self.rf = parseFloat(v);
    },
    lat_0: function(v) {
      self.lat0 = v * D2R;
    },
    lat_1: function(v) {
      self.lat1 = v * D2R;
    },
    lat_2: function(v) {
      self.lat2 = v * D2R;
    },
    lat_ts: function(v) {
      self.lat_ts = v * D2R;
    },
    lon_0: function(v) {
      self.long0 = v * D2R;
    },
    lon_1: function(v) {
      self.long1 = v * D2R;
    },
    lon_2: function(v) {
      self.long2 = v * D2R;
    },
    alpha: function(v) {
      self.alpha = parseFloat(v) * D2R;
    },
    lonc: function(v) {
      self.longc = v * D2R;
    },
    x_0: function(v) {
      self.x0 = parseFloat(v);
    },
    y_0: function(v) {
      self.y0 = parseFloat(v);
    },
    k_0: function(v) {
      self.k0 = parseFloat(v);
    },
    k: function(v) {
      self.k0 = parseFloat(v);
    },
    a: function(v) {
      self.a = parseFloat(v);
    },
    b: function(v) {
      self.b = parseFloat(v);
    },
    r_a: function() {
      self.R_A = true;
    },
    zone: function(v) {
      self.zone = parseInt(v, 10);
    },
    south: function() {
      self.utmSouth = true;
    },
    towgs84: function(v) {
      self.datum_params = v.split(",").map(function(a) {
        return parseFloat(a);
      });
    },
    to_meter: function(v) {
      self.to_meter = parseFloat(v);
    },
    units: function(v) {
      self.units = v;
      if (units[v]) {
        self.to_meter = units[v].to_meter;
      }
    },
    from_greenwich: function(v) {
      self.from_greenwich = v * D2R;
    },
    pm: function(v) {
      self.from_greenwich = (PrimeMeridian[v] ? PrimeMeridian[v] : parseFloat(v)) * D2R;
    },
    nadgrids: function(v) {
      if (v === '@null') {
        self.datumCode = 'none';
      }
      else {
        self.nadgrids = v;
      }
    },
    axis: function(v) {
      var legalAxis = "ewnsud";
      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {
        self.axis = v;
      }
    }
  };
  for (paramName in paramObj) {
    paramVal = paramObj[paramName];
    if (paramName in params) {
      paramOutname = params[paramName];
      if (typeof paramOutname === 'function') {
        paramOutname(paramVal);
      }
      else {
        self[paramOutname] = paramVal;
      }
    }
    else {
      self[paramName] = paramVal;
    }
  }
  if(typeof self.datumCode === 'string' && self.datumCode !== "WGS84"){
    self.datumCode = self.datumCode.toLowerCase();
  }
  return self;
};

},{"./constants/PrimeMeridian":55,"./constants/units":56}],68:[function(require,module,exports){
var projs = [
  require('./projections/merc'),
  require('./projections/longlat')
];
var names = {};
var projStore = [];

function add(proj, i) {
  var len = projStore.length;
  if (!proj.names) {
    console.log(i);
    return true;
  }
  projStore[len] = proj;
  proj.names.forEach(function(n) {
    names[n.toLowerCase()] = len;
  });
  return this;
}

exports.add = add;

exports.get = function(name) {
  if (!name) {
    return false;
  }
  var n = name.toLowerCase();
  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {
    return projStore[names[n]];
  }
};
exports.start = function() {
  projs.forEach(add);
};

},{"./projections/longlat":80,"./projections/merc":81}],69:[function(require,module,exports){
var EPSLN = 1.0e-10;
var msfnz = require('../common/msfnz');
var qsfnz = require('../common/qsfnz');
var adjust_lon = require('../common/adjust_lon');
var asinz = require('../common/asinz');
exports.init = function() {

  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {
    return;
  }
  this.temp = this.b / this.a;
  this.es = 1 - Math.pow(this.temp, 2);
  this.e3 = Math.sqrt(this.es);

  this.sin_po = Math.sin(this.lat1);
  this.cos_po = Math.cos(this.lat1);
  this.t1 = this.sin_po;
  this.con = this.sin_po;
  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);
  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);

  this.sin_po = Math.sin(this.lat2);
  this.cos_po = Math.cos(this.lat2);
  this.t2 = this.sin_po;
  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);
  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);

  this.sin_po = Math.sin(this.lat0);
  this.cos_po = Math.cos(this.lat0);
  this.t3 = this.sin_po;
  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);

  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {
    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);
  }
  else {
    this.ns0 = this.con;
  }
  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;
  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;
};

/* Albers Conical Equal Area forward equations--mapping lat,long to x,y
  -------------------------------------------------------------------*/
exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  this.sin_phi = Math.sin(lat);
  this.cos_phi = Math.cos(lat);

  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);
  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;
  var theta = this.ns0 * adjust_lon(lon - this.long0);
  var x = rh1 * Math.sin(theta) + this.x0;
  var y = this.rh - rh1 * Math.cos(theta) + this.y0;

  p.x = x;
  p.y = y;
  return p;
};


exports.inverse = function(p) {
  var rh1, qs, con, theta, lon, lat;

  p.x -= this.x0;
  p.y = this.rh - p.y + this.y0;
  if (this.ns0 >= 0) {
    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);
    con = 1;
  }
  else {
    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);
    con = -1;
  }
  theta = 0;
  if (rh1 !== 0) {
    theta = Math.atan2(con * p.x, con * p.y);
  }
  con = rh1 * this.ns0 / this.a;
  if (this.sphere) {
    lat = Math.asin((this.c - con * con) / (2 * this.ns0));
  }
  else {
    qs = (this.c - con * con) / this.ns0;
    lat = this.phi1z(this.e3, qs);
  }

  lon = adjust_lon(theta / this.ns0 + this.long0);
  p.x = lon;
  p.y = lat;
  return p;
};

/* Function to compute phi1, the latitude for the inverse of the
   Albers Conical Equal-Area projection.
-------------------------------------------*/
exports.phi1z = function(eccent, qs) {
  var sinphi, cosphi, con, com, dphi;
  var phi = asinz(0.5 * qs);
  if (eccent < EPSLN) {
    return phi;
  }

  var eccnts = eccent * eccent;
  for (var i = 1; i <= 25; i++) {
    sinphi = Math.sin(phi);
    cosphi = Math.cos(phi);
    con = eccent * sinphi;
    com = 1 - con * con;
    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));
    phi = phi + dphi;
    if (Math.abs(dphi) <= 1e-7) {
      return phi;
    }
  }
  return null;
};
exports.names = ["Albers_Conic_Equal_Area", "Albers", "aea"];

},{"../common/adjust_lon":33,"../common/asinz":34,"../common/msfnz":43,"../common/qsfnz":48}],70:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var mlfn = require('../common/mlfn');
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var gN = require('../common/gN');
var asinz = require('../common/asinz');
var imlfn = require('../common/imlfn');
exports.init = function() {
  this.sin_p12 = Math.sin(this.lat0);
  this.cos_p12 = Math.cos(this.lat0);
};

exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var sinphi = Math.sin(p.y);
  var cosphi = Math.cos(p.y);
  var dlon = adjust_lon(lon - this.long0);
  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;
  if (this.sphere) {
    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {
      //North Pole case
      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);
      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);
      return p;
    }
    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {
      //South Pole case
      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);
      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);
      return p;
    }
    else {
      //default case
      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);
      c = Math.acos(cos_c);
      kp = c / Math.sin(c);
      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);
      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));
      return p;
    }
  }
  else {
    e0 = e0fn(this.es);
    e1 = e1fn(this.es);
    e2 = e2fn(this.es);
    e3 = e3fn(this.es);
    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {
      //North Pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      Ml = this.a * mlfn(e0, e1, e2, e3, lat);
      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);
      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);
      return p;
    }
    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {
      //South Pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      Ml = this.a * mlfn(e0, e1, e2, e3, lat);
      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);
      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);
      return p;
    }
    else {
      //Default case
      tanphi = sinphi / cosphi;
      Nl1 = gN(this.a, this.e, this.sin_p12);
      Nl = gN(this.a, this.e, sinphi);
      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));
      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));
      if (Az === 0) {
        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));
      }
      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {
        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));
      }
      else {
        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));
      }
      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);
      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);
      GH = G * H;
      Hs = H * H;
      s2 = s * s;
      s3 = s2 * s;
      s4 = s3 * s;
      s5 = s4 * s;
      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);
      p.x = this.x0 + c * Math.sin(Az);
      p.y = this.y0 + c * Math.cos(Az);
      return p;
    }
  }


};

exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;
  if (this.sphere) {
    rh = Math.sqrt(p.x * p.x + p.y * p.y);
    if (rh > (2 * HALF_PI * this.a)) {
      return;
    }
    z = rh / this.a;

    sinz = Math.sin(z);
    cosz = Math.cos(z);

    lon = this.long0;
    if (Math.abs(rh) <= EPSLN) {
      lat = this.lat0;
    }
    else {
      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);
      con = Math.abs(this.lat0) - HALF_PI;
      if (Math.abs(con) <= EPSLN) {
        if (this.lat0 >= 0) {
          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));
        }
        else {
          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));
        }
      }
      else {
        /*con = cosz - this.sin_p12 * Math.sin(lat);
        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {
          //no-op, just keep the lon value as is
        } else {
          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));
          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));
        }*/
        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));
      }
    }

    p.x = lon;
    p.y = lat;
    return p;
  }
  else {
    e0 = e0fn(this.es);
    e1 = e1fn(this.es);
    e2 = e2fn(this.es);
    e3 = e3fn(this.es);
    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {
      //North pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      rh = Math.sqrt(p.x * p.x + p.y * p.y);
      M = Mlp - rh;
      lat = imlfn(M / this.a, e0, e1, e2, e3);
      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));
      p.x = lon;
      p.y = lat;
      return p;
    }
    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {
      //South pole case
      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);
      rh = Math.sqrt(p.x * p.x + p.y * p.y);
      M = rh - Mlp;

      lat = imlfn(M / this.a, e0, e1, e2, e3);
      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));
      p.x = lon;
      p.y = lat;
      return p;
    }
    else {
      //default case
      rh = Math.sqrt(p.x * p.x + p.y * p.y);
      Az = Math.atan2(p.x, p.y);
      N1 = gN(this.a, this.e, this.sin_p12);
      cosAz = Math.cos(Az);
      tmp = this.e * this.cos_p12 * cosAz;
      A = -tmp * tmp / (1 - this.es);
      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);
      D = rh / N1;
      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;
      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;
      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);
      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));
      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));
      p.x = lon;
      p.y = lat;
      return p;
    }
  }

};
exports.names = ["Azimuthal_Equidistant", "aeqd"];

},{"../common/adjust_lon":33,"../common/asinz":34,"../common/e0fn":35,"../common/e1fn":36,"../common/e2fn":37,"../common/e3fn":38,"../common/gN":39,"../common/imlfn":40,"../common/mlfn":42}],71:[function(require,module,exports){
var mlfn = require('../common/mlfn');
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var gN = require('../common/gN');
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var imlfn = require('../common/imlfn');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
exports.init = function() {
  if (!this.sphere) {
    this.e0 = e0fn(this.es);
    this.e1 = e1fn(this.es);
    this.e2 = e2fn(this.es);
    this.e3 = e3fn(this.es);
    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);
  }
};



/* Cassini forward equations--mapping lat,long to x,y
  -----------------------------------------------------------------------*/
exports.forward = function(p) {

  /* Forward equations
      -----------------*/
  var x, y;
  var lam = p.x;
  var phi = p.y;
  lam = adjust_lon(lam - this.long0);

  if (this.sphere) {
    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));
    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);
  }
  else {
    //ellipsoid
    var sinphi = Math.sin(phi);
    var cosphi = Math.cos(phi);
    var nl = gN(this.a, this.e, sinphi);
    var tl = Math.tan(phi) * Math.tan(phi);
    var al = lam * Math.cos(phi);
    var asq = al * al;
    var cl = this.es * cosphi * cosphi / (1 - this.es);
    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);

    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));
    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);


  }

  p.x = x + this.x0;
  p.y = y + this.y0;
  return p;
};

/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var x = p.x / this.a;
  var y = p.y / this.a;
  var phi, lam;

  if (this.sphere) {
    var dd = y + this.lat0;
    phi = Math.asin(Math.sin(dd) * Math.cos(x));
    lam = Math.atan2(Math.tan(x), Math.cos(dd));
  }
  else {
    /* ellipsoid */
    var ml1 = this.ml0 / this.a + y;
    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);
    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {
      p.x = this.long0;
      p.y = HALF_PI;
      if (y < 0) {
        p.y *= -1;
      }
      return p;
    }
    var nl1 = gN(this.a, this.e, Math.sin(phi1));

    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);
    var tl1 = Math.pow(Math.tan(phi1), 2);
    var dl = x * this.a / nl1;
    var dsq = dl * dl;
    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);
    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);

  }

  p.x = adjust_lon(lam + this.long0);
  p.y = adjust_lat(phi);
  return p;

};
exports.names = ["Cassini", "Cassini_Soldner", "cass"];
},{"../common/adjust_lat":32,"../common/adjust_lon":33,"../common/e0fn":35,"../common/e1fn":36,"../common/e2fn":37,"../common/e3fn":38,"../common/gN":39,"../common/imlfn":40,"../common/mlfn":42}],72:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var qsfnz = require('../common/qsfnz');
var msfnz = require('../common/msfnz');
var iqsfnz = require('../common/iqsfnz');
/*
  reference:  
    "Cartographic Projection Procedures for the UNIX Environment-
    A User's Manual" by Gerald I. Evenden,
    USGS Open File Report 90-284and Release 4 Interim Reports (2003)
*/
exports.init = function() {
  //no-op
  if (!this.sphere) {
    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));
  }
};


/* Cylindrical Equal Area forward equations--mapping lat,long to x,y
    ------------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var x, y;
  /* Forward equations
      -----------------*/
  var dlon = adjust_lon(lon - this.long0);
  if (this.sphere) {
    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);
    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);
  }
  else {
    var qs = qsfnz(this.e, Math.sin(lat));
    x = this.x0 + this.a * this.k0 * dlon;
    y = this.y0 + this.a * qs * 0.5 / this.k0;
  }

  p.x = x;
  p.y = y;
  return p;
};

/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long
    ------------------------------------------------------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var lon, lat;

  if (this.sphere) {
    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));
    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));
  }
  else {
    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);
    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["cea"];

},{"../common/adjust_lon":33,"../common/iqsfnz":41,"../common/msfnz":43,"../common/qsfnz":48}],73:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
exports.init = function() {

  this.x0 = this.x0 || 0;
  this.y0 = this.y0 || 0;
  this.lat0 = this.lat0 || 0;
  this.long0 = this.long0 || 0;
  this.lat_ts = this.lat_ts || 0;
  this.title = this.title || "Equidistant Cylindrical (Plate Carre)";

  this.rc = Math.cos(this.lat_ts);
};


// forward equations--mapping lat,long to x,y
// -----------------------------------------------------------------
exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  var dlon = adjust_lon(lon - this.long0);
  var dlat = adjust_lat(lat - this.lat0);
  p.x = this.x0 + (this.a * dlon * this.rc);
  p.y = this.y0 + (this.a * dlat);
  return p;
};

// inverse equations--mapping x,y to lat/long
// -----------------------------------------------------------------
exports.inverse = function(p) {

  var x = p.x;
  var y = p.y;

  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));
  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));
  return p;
};
exports.names = ["Equirectangular", "Equidistant_Cylindrical", "eqc"];

},{"../common/adjust_lat":32,"../common/adjust_lon":33}],74:[function(require,module,exports){
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var msfnz = require('../common/msfnz');
var mlfn = require('../common/mlfn');
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var imlfn = require('../common/imlfn');
var EPSLN = 1.0e-10;
exports.init = function() {

  /* Place parameters in static storage for common use
      -------------------------------------------------*/
  // Standard Parallels cannot be equal and on opposite sides of the equator
  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {
    return;
  }
  this.lat2 = this.lat2 || this.lat1;
  this.temp = this.b / this.a;
  this.es = 1 - Math.pow(this.temp, 2);
  this.e = Math.sqrt(this.es);
  this.e0 = e0fn(this.es);
  this.e1 = e1fn(this.es);
  this.e2 = e2fn(this.es);
  this.e3 = e3fn(this.es);

  this.sinphi = Math.sin(this.lat1);
  this.cosphi = Math.cos(this.lat1);

  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);
  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);

  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {
    this.ns = this.sinphi;
  }
  else {
    this.sinphi = Math.sin(this.lat2);
    this.cosphi = Math.cos(this.lat2);
    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);
    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);
    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);
  }
  this.g = this.ml1 + this.ms1 / this.ns;
  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);
  this.rh = this.a * (this.g - this.ml0);
};


/* Equidistant Conic forward equations--mapping lat,long to x,y
  -----------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var rh1;

  /* Forward equations
      -----------------*/
  if (this.sphere) {
    rh1 = this.a * (this.g - lat);
  }
  else {
    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);
    rh1 = this.a * (this.g - ml);
  }
  var theta = this.ns * adjust_lon(lon - this.long0);
  var x = this.x0 + rh1 * Math.sin(theta);
  var y = this.y0 + this.rh - rh1 * Math.cos(theta);
  p.x = x;
  p.y = y;
  return p;
};

/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y = this.rh - p.y + this.y0;
  var con, rh1, lat, lon;
  if (this.ns >= 0) {
    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);
    con = 1;
  }
  else {
    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);
    con = -1;
  }
  var theta = 0;
  if (rh1 !== 0) {
    theta = Math.atan2(con * p.x, con * p.y);
  }

  if (this.sphere) {
    lon = adjust_lon(this.long0 + theta / this.ns);
    lat = adjust_lat(this.g - rh1 / this.a);
    p.x = lon;
    p.y = lat;
    return p;
  }
  else {
    var ml = this.g - rh1 / this.a;
    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);
    lon = adjust_lon(this.long0 + theta / this.ns);
    p.x = lon;
    p.y = lat;
    return p;
  }

};
exports.names = ["Equidistant_Conic", "eqdc"];

},{"../common/adjust_lat":32,"../common/adjust_lon":33,"../common/e0fn":35,"../common/e1fn":36,"../common/e2fn":37,"../common/e3fn":38,"../common/imlfn":40,"../common/mlfn":42,"../common/msfnz":43}],75:[function(require,module,exports){
var FORTPI = Math.PI/4;
var srat = require('../common/srat');
var HALF_PI = Math.PI/2;
var MAX_ITER = 20;
exports.init = function() {
  var sphi = Math.sin(this.lat0);
  var cphi = Math.cos(this.lat0);
  cphi *= cphi;
  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);
  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));
  this.phic0 = Math.asin(sphi / this.C);
  this.ratexp = 0.5 * this.C * this.e;
  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));
};

exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;

  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;
  p.x = this.C * lon;
  return p;
};

exports.inverse = function(p) {
  var DEL_TOL = 1e-14;
  var lon = p.x / this.C;
  var lat = p.y;
  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);
  for (var i = MAX_ITER; i > 0; --i) {
    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;
    if (Math.abs(lat - p.y) < DEL_TOL) {
      break;
    }
    p.y = lat;
  }
  /* convergence failed */
  if (!i) {
    return null;
  }
  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["gauss"];

},{"../common/srat":50}],76:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var EPSLN = 1.0e-10;
var asinz = require('../common/asinz');

/*
  reference:
    Wolfram Mathworld "Gnomonic Projection"
    http://mathworld.wolfram.com/GnomonicProjection.html
    Accessed: 12th November 2009
  */
exports.init = function() {

  /* Place parameters in static storage for common use
      -------------------------------------------------*/
  this.sin_p14 = Math.sin(this.lat0);
  this.cos_p14 = Math.cos(this.lat0);
  // Approximation for projecting points to the horizon (infinity)
  this.infinity_dist = 1000 * this.a;
  this.rc = 1;
};


/* Gnomonic forward equations--mapping lat,long to x,y
    ---------------------------------------------------*/
exports.forward = function(p) {
  var sinphi, cosphi; /* sin and cos value        */
  var dlon; /* delta longitude value      */
  var coslon; /* cos of longitude        */
  var ksp; /* scale factor          */
  var g;
  var x, y;
  var lon = p.x;
  var lat = p.y;
  /* Forward equations
      -----------------*/
  dlon = adjust_lon(lon - this.long0);

  sinphi = Math.sin(lat);
  cosphi = Math.cos(lat);

  coslon = Math.cos(dlon);
  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;
  ksp = 1;
  if ((g > 0) || (Math.abs(g) <= EPSLN)) {
    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;
    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;
  }
  else {

    // Point is in the opposing hemisphere and is unprojectable
    // We still need to return a reasonable point, so we project 
    // to infinity, on a bearing 
    // equivalent to the northern hemisphere equivalent
    // This is a reasonable approximation for short shapes and lines that 
    // straddle the horizon.

    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);
    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);

  }
  p.x = x;
  p.y = y;
  return p;
};


exports.inverse = function(p) {
  var rh; /* Rho */
  var sinc, cosc;
  var c;
  var lon, lat;

  /* Inverse equations
      -----------------*/
  p.x = (p.x - this.x0) / this.a;
  p.y = (p.y - this.y0) / this.a;

  p.x /= this.k0;
  p.y /= this.k0;

  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {
    c = Math.atan2(rh, this.rc);
    sinc = Math.sin(c);
    cosc = Math.cos(c);

    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);
    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);
    lon = adjust_lon(this.long0 + lon);
  }
  else {
    lat = this.phic0;
    lon = 0;
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["gnom"];

},{"../common/adjust_lon":33,"../common/asinz":34}],77:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
exports.init = function() {
  this.a = 6377397.155;
  this.es = 0.006674372230614;
  this.e = Math.sqrt(this.es);
  if (!this.lat0) {
    this.lat0 = 0.863937979737193;
  }
  if (!this.long0) {
    this.long0 = 0.7417649320975901 - 0.308341501185665;
  }
  /* if scale not set default to 0.9999 */
  if (!this.k0) {
    this.k0 = 0.9999;
  }
  this.s45 = 0.785398163397448; /* 45 */
  this.s90 = 2 * this.s45;
  this.fi0 = this.lat0;
  this.e2 = this.es;
  this.e = Math.sqrt(this.e2);
  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));
  this.uq = 1.04216856380474;
  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);
  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);
  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;
  this.k1 = this.k0;
  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));
  this.s0 = 1.37008346281555;
  this.n = Math.sin(this.s0);
  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);
  this.ad = this.s90 - this.uq;
};

/* ellipsoid */
/* calculate xy from lat/lon */
/* Constants, identical to inverse transform function */
exports.forward = function(p) {
  var gfi, u, deltav, s, d, eps, ro;
  var lon = p.x;
  var lat = p.y;
  var delta_lon = adjust_lon(lon - this.long0);
  /* Transformation */
  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));
  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);
  deltav = -delta_lon * this.alfa;
  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));
  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));
  eps = this.n * d;
  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);
  p.y = ro * Math.cos(eps) / 1;
  p.x = ro * Math.sin(eps) / 1;

  if (!this.czech) {
    p.y *= -1;
    p.x *= -1;
  }
  return (p);
};

/* calculate lat/lon from xy */
exports.inverse = function(p) {
  var u, deltav, s, d, eps, ro, fi1;
  var ok;

  /* Transformation */
  /* revert y, x*/
  var tmp = p.x;
  p.x = p.y;
  p.y = tmp;
  if (!this.czech) {
    p.y *= -1;
    p.x *= -1;
  }
  ro = Math.sqrt(p.x * p.x + p.y * p.y);
  eps = Math.atan2(p.y, p.x);
  d = eps / Math.sin(this.s0);
  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);
  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));
  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));
  p.x = this.long0 - deltav / this.alfa;
  fi1 = u;
  ok = 0;
  var iter = 0;
  do {
    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);
    if (Math.abs(fi1 - p.y) < 0.0000000001) {
      ok = 1;
    }
    fi1 = p.y;
    iter += 1;
  } while (ok === 0 && iter < 15);
  if (iter >= 15) {
    return null;
  }

  return (p);
};
exports.names = ["Krovak", "krovak"];

},{"../common/adjust_lon":33}],78:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var FORTPI = Math.PI/4;
var EPSLN = 1.0e-10;
var qsfnz = require('../common/qsfnz');
var adjust_lon = require('../common/adjust_lon');
/*
  reference
    "New Equal-Area Map Projections for Noncircular Regions", John P. Snyder,
    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.
  */

exports.S_POLE = 1;
exports.N_POLE = 2;
exports.EQUIT = 3;
exports.OBLIQ = 4;


/* Initialize the Lambert Azimuthal Equal Area projection
  ------------------------------------------------------*/
exports.init = function() {
  var t = Math.abs(this.lat0);
  if (Math.abs(t - HALF_PI) < EPSLN) {
    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;
  }
  else if (Math.abs(t) < EPSLN) {
    this.mode = this.EQUIT;
  }
  else {
    this.mode = this.OBLIQ;
  }
  if (this.es > 0) {
    var sinphi;

    this.qp = qsfnz(this.e, 1);
    this.mmf = 0.5 / (1 - this.es);
    this.apa = this.authset(this.es);
    switch (this.mode) {
    case this.N_POLE:
      this.dd = 1;
      break;
    case this.S_POLE:
      this.dd = 1;
      break;
    case this.EQUIT:
      this.rq = Math.sqrt(0.5 * this.qp);
      this.dd = 1 / this.rq;
      this.xmf = 1;
      this.ymf = 0.5 * this.qp;
      break;
    case this.OBLIQ:
      this.rq = Math.sqrt(0.5 * this.qp);
      sinphi = Math.sin(this.lat0);
      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;
      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);
      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);
      this.ymf = (this.xmf = this.rq) / this.dd;
      this.xmf *= this.dd;
      break;
    }
  }
  else {
    if (this.mode === this.OBLIQ) {
      this.sinph0 = Math.sin(this.lat0);
      this.cosph0 = Math.cos(this.lat0);
    }
  }
};

/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y
  -----------------------------------------------------------------------*/
exports.forward = function(p) {

  /* Forward equations
      -----------------*/
  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;
  var lam = p.x;
  var phi = p.y;

  lam = adjust_lon(lam - this.long0);

  if (this.sphere) {
    sinphi = Math.sin(phi);
    cosphi = Math.cos(phi);
    coslam = Math.cos(lam);
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;
      if (y <= EPSLN) {
        return null;
      }
      y = Math.sqrt(2 / y);
      x = y * cosphi * Math.sin(lam);
      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;
    }
    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {
      if (this.mode === this.N_POLE) {
        coslam = -coslam;
      }
      if (Math.abs(phi + this.phi0) < EPSLN) {
        return null;
      }
      y = FORTPI - phi * 0.5;
      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));
      x = y * Math.sin(lam);
      y *= coslam;
    }
  }
  else {
    sinb = 0;
    cosb = 0;
    b = 0;
    coslam = Math.cos(lam);
    sinlam = Math.sin(lam);
    sinphi = Math.sin(phi);
    q = qsfnz(this.e, sinphi);
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      sinb = q / this.qp;
      cosb = Math.sqrt(1 - sinb * sinb);
    }
    switch (this.mode) {
    case this.OBLIQ:
      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;
      break;
    case this.EQUIT:
      b = 1 + cosb * coslam;
      break;
    case this.N_POLE:
      b = HALF_PI + phi;
      q = this.qp - q;
      break;
    case this.S_POLE:
      b = phi - HALF_PI;
      q = this.qp + q;
      break;
    }
    if (Math.abs(b) < EPSLN) {
      return null;
    }
    switch (this.mode) {
    case this.OBLIQ:
    case this.EQUIT:
      b = Math.sqrt(2 / b);
      if (this.mode === this.OBLIQ) {
        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);
      }
      else {
        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;
      }
      x = this.xmf * b * cosb * sinlam;
      break;
    case this.N_POLE:
    case this.S_POLE:
      if (q >= 0) {
        x = (b = Math.sqrt(q)) * sinlam;
        y = coslam * ((this.mode === this.S_POLE) ? b : -b);
      }
      else {
        x = y = 0;
      }
      break;
    }
  }

  p.x = this.a * x + this.x0;
  p.y = this.a * y + this.y0;
  return p;
};

/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var x = p.x / this.a;
  var y = p.y / this.a;
  var lam, phi, cCe, sCe, q, rho, ab;

  if (this.sphere) {
    var cosz = 0,
      rh, sinz = 0;

    rh = Math.sqrt(x * x + y * y);
    phi = rh * 0.5;
    if (phi > 1) {
      return null;
    }
    phi = 2 * Math.asin(phi);
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      sinz = Math.sin(phi);
      cosz = Math.cos(phi);
    }
    switch (this.mode) {
    case this.EQUIT:
      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);
      x *= sinz;
      y = cosz * rh;
      break;
    case this.OBLIQ:
      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);
      x *= sinz * this.cosph0;
      y = (cosz - Math.sin(phi) * this.sinph0) * rh;
      break;
    case this.N_POLE:
      y = -y;
      phi = HALF_PI - phi;
      break;
    case this.S_POLE:
      phi -= HALF_PI;
      break;
    }
    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);
  }
  else {
    ab = 0;
    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {
      x /= this.dd;
      y *= this.dd;
      rho = Math.sqrt(x * x + y * y);
      if (rho < EPSLN) {
        p.x = 0;
        p.y = this.phi0;
        return p;
      }
      sCe = 2 * Math.asin(0.5 * rho / this.rq);
      cCe = Math.cos(sCe);
      x *= (sCe = Math.sin(sCe));
      if (this.mode === this.OBLIQ) {
        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;
        q = this.qp * ab;
        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;
      }
      else {
        ab = y * sCe / rho;
        q = this.qp * ab;
        y = rho * cCe;
      }
    }
    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {
      if (this.mode === this.N_POLE) {
        y = -y;
      }
      q = (x * x + y * y);
      if (!q) {
        p.x = 0;
        p.y = this.phi0;
        return p;
      }
      ab = 1 - q / this.qp;
      if (this.mode === this.S_POLE) {
        ab = -ab;
      }
    }
    lam = Math.atan2(x, y);
    phi = this.authlat(Math.asin(ab), this.apa);
  }


  p.x = adjust_lon(this.long0 + lam);
  p.y = phi;
  return p;
};

/* determine latitude from authalic latitude */
exports.P00 = 0.33333333333333333333;
exports.P01 = 0.17222222222222222222;
exports.P02 = 0.10257936507936507936;
exports.P10 = 0.06388888888888888888;
exports.P11 = 0.06640211640211640211;
exports.P20 = 0.01641501294219154443;

exports.authset = function(es) {
  var t;
  var APA = [];
  APA[0] = es * this.P00;
  t = es * es;
  APA[0] += t * this.P01;
  APA[1] = t * this.P10;
  t *= es;
  APA[0] += t * this.P02;
  APA[1] += t * this.P11;
  APA[2] = t * this.P20;
  return APA;
};

exports.authlat = function(beta, APA) {
  var t = beta + beta;
  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));
};
exports.names = ["Lambert Azimuthal Equal Area", "Lambert_Azimuthal_Equal_Area", "laea"];

},{"../common/adjust_lon":33,"../common/qsfnz":48}],79:[function(require,module,exports){
var EPSLN = 1.0e-10;
var msfnz = require('../common/msfnz');
var tsfnz = require('../common/tsfnz');
var HALF_PI = Math.PI/2;
var sign = require('../common/sign');
var adjust_lon = require('../common/adjust_lon');
var phi2z = require('../common/phi2z');
exports.init = function() {

  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north
  //double c_lat;                   /* center latitude                      */
  //double c_lon;                   /* center longitude                     */
  //double lat1;                    /* first standard parallel              */
  //double lat2;                    /* second standard parallel             */
  //double r_maj;                   /* major axis                           */
  //double r_min;                   /* minor axis                           */
  //double false_east;              /* x offset in meters                   */
  //double false_north;             /* y offset in meters                   */

  if (!this.lat2) {
    this.lat2 = this.lat1;
  } //if lat2 is not defined
  if (!this.k0) {
    this.k0 = 1;
  }
  this.x0 = this.x0 || 0;
  this.y0 = this.y0 || 0;
  // Standard Parallels cannot be equal and on opposite sides of the equator
  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {
    return;
  }

  var temp = this.b / this.a;
  this.e = Math.sqrt(1 - temp * temp);

  var sin1 = Math.sin(this.lat1);
  var cos1 = Math.cos(this.lat1);
  var ms1 = msfnz(this.e, sin1, cos1);
  var ts1 = tsfnz(this.e, this.lat1, sin1);

  var sin2 = Math.sin(this.lat2);
  var cos2 = Math.cos(this.lat2);
  var ms2 = msfnz(this.e, sin2, cos2);
  var ts2 = tsfnz(this.e, this.lat2, sin2);

  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));

  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {
    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);
  }
  else {
    this.ns = sin1;
  }
  if (isNaN(this.ns)) {
    this.ns = sin1;
  }
  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));
  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);
  if (!this.title) {
    this.title = "Lambert Conformal Conic";
  }
};


// Lambert Conformal conic forward equations--mapping lat,long to x,y
// -----------------------------------------------------------------
exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  // singular cases :
  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {
    lat = sign(lat) * (HALF_PI - 2 * EPSLN);
  }

  var con = Math.abs(Math.abs(lat) - HALF_PI);
  var ts, rh1;
  if (con > EPSLN) {
    ts = tsfnz(this.e, lat, Math.sin(lat));
    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);
  }
  else {
    con = lat * this.ns;
    if (con <= 0) {
      return null;
    }
    rh1 = 0;
  }
  var theta = this.ns * adjust_lon(lon - this.long0);
  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;
  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;

  return p;
};

// Lambert Conformal Conic inverse equations--mapping x,y to lat/long
// -----------------------------------------------------------------
exports.inverse = function(p) {

  var rh1, con, ts;
  var lat, lon;
  var x = (p.x - this.x0) / this.k0;
  var y = (this.rh - (p.y - this.y0) / this.k0);
  if (this.ns > 0) {
    rh1 = Math.sqrt(x * x + y * y);
    con = 1;
  }
  else {
    rh1 = -Math.sqrt(x * x + y * y);
    con = -1;
  }
  var theta = 0;
  if (rh1 !== 0) {
    theta = Math.atan2((con * x), (con * y));
  }
  if ((rh1 !== 0) || (this.ns > 0)) {
    con = 1 / this.ns;
    ts = Math.pow((rh1 / (this.a * this.f0)), con);
    lat = phi2z(this.e, ts);
    if (lat === -9999) {
      return null;
    }
  }
  else {
    lat = -HALF_PI;
  }
  lon = adjust_lon(theta / this.ns + this.long0);

  p.x = lon;
  p.y = lat;
  return p;
};

exports.names = ["Lambert Tangential Conformal Conic Projection", "Lambert_Conformal_Conic", "Lambert_Conformal_Conic_2SP", "lcc"];

},{"../common/adjust_lon":33,"../common/msfnz":43,"../common/phi2z":44,"../common/sign":49,"../common/tsfnz":52}],80:[function(require,module,exports){
exports.init = function() {
  //no-op for longlat
};

function identity(pt) {
  return pt;
}
exports.forward = identity;
exports.inverse = identity;
exports.names = ["longlat", "identity"];

},{}],81:[function(require,module,exports){
var msfnz = require('../common/msfnz');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var R2D = 57.29577951308232088;
var adjust_lon = require('../common/adjust_lon');
var FORTPI = Math.PI/4;
var tsfnz = require('../common/tsfnz');
var phi2z = require('../common/phi2z');
exports.init = function() {
  var con = this.b / this.a;
  this.es = 1 - con * con;
  if(!('x0' in this)){
    this.x0 = 0;
  }
  if(!('y0' in this)){
    this.y0 = 0;
  }
  this.e = Math.sqrt(this.es);
  if (this.lat_ts) {
    if (this.sphere) {
      this.k0 = Math.cos(this.lat_ts);
    }
    else {
      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));
    }
  }
  else {
    if (!this.k0) {
      if (this.k) {
        this.k0 = this.k;
      }
      else {
        this.k0 = 1;
      }
    }
  }
};

/* Mercator forward equations--mapping lat,long to x,y
  --------------------------------------------------*/

exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  // convert to radians
  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {
    return null;
  }

  var x, y;
  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {
    return null;
  }
  else {
    if (this.sphere) {
      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);
      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));
    }
    else {
      var sinphi = Math.sin(lat);
      var ts = tsfnz(this.e, lat, sinphi);
      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);
      y = this.y0 - this.a * this.k0 * Math.log(ts);
    }
    p.x = x;
    p.y = y;
    return p;
  }
};


/* Mercator inverse equations--mapping x,y to lat/long
  --------------------------------------------------*/
exports.inverse = function(p) {

  var x = p.x - this.x0;
  var y = p.y - this.y0;
  var lon, lat;

  if (this.sphere) {
    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));
  }
  else {
    var ts = Math.exp(-y / (this.a * this.k0));
    lat = phi2z(this.e, ts);
    if (lat === -9999) {
      return null;
    }
  }
  lon = adjust_lon(this.long0 + x / (this.a * this.k0));

  p.x = lon;
  p.y = lat;
  return p;
};

exports.names = ["Mercator", "Popular Visualisation Pseudo Mercator", "Mercator_1SP", "Mercator_Auxiliary_Sphere", "merc"];

},{"../common/adjust_lon":33,"../common/msfnz":43,"../common/phi2z":44,"../common/tsfnz":52}],82:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
/*
  reference
    "New Equal-Area Map Projections for Noncircular Regions", John P. Snyder,
    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.
  */


/* Initialize the Miller Cylindrical projection
  -------------------------------------------*/
exports.init = function() {
  //no-op
};


/* Miller Cylindrical forward equations--mapping lat,long to x,y
    ------------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  /* Forward equations
      -----------------*/
  var dlon = adjust_lon(lon - this.long0);
  var x = this.x0 + this.a * dlon;
  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;

  p.x = x;
  p.y = y;
  return p;
};

/* Miller Cylindrical inverse equations--mapping x,y to lat/long
    ------------------------------------------------------------*/
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;

  var lon = adjust_lon(this.long0 + p.x / this.a);
  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Miller_Cylindrical", "mill"];

},{"../common/adjust_lon":33}],83:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var EPSLN = 1.0e-10;
exports.init = function() {};

/* Mollweide forward equations--mapping lat,long to x,y
    ----------------------------------------------------*/
exports.forward = function(p) {

  /* Forward equations
      -----------------*/
  var lon = p.x;
  var lat = p.y;

  var delta_lon = adjust_lon(lon - this.long0);
  var theta = lat;
  var con = Math.PI * Math.sin(lat);

  /* Iterate using the Newton-Raphson method to find theta
      -----------------------------------------------------*/
  for (var i = 0; true; i++) {
    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));
    theta += delta_theta;
    if (Math.abs(delta_theta) < EPSLN) {
      break;
    }
  }
  theta /= 2;

  /* If the latitude is 90 deg, force the x coordinate to be "0 + false easting"
       this is done here because of precision problems with "cos(theta)"
       --------------------------------------------------------------------------*/
  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {
    delta_lon = 0;
  }
  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;
  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;

  p.x = x;
  p.y = y;
  return p;
};

exports.inverse = function(p) {
  var theta;
  var arg;

  /* Inverse equations
      -----------------*/
  p.x -= this.x0;
  p.y -= this.y0;
  arg = p.y / (1.4142135623731 * this.a);

  /* Because of division by zero problems, 'arg' can not be 1.  Therefore
       a number very close to one is used instead.
       -------------------------------------------------------------------*/
  if (Math.abs(arg) > 0.999999999999) {
    arg = 0.999999999999;
  }
  theta = Math.asin(arg);
  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));
  if (lon < (-Math.PI)) {
    lon = -Math.PI;
  }
  if (lon > Math.PI) {
    lon = Math.PI;
  }
  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;
  if (Math.abs(arg) > 1) {
    arg = 1;
  }
  var lat = Math.asin(arg);

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Mollweide", "moll"];

},{"../common/adjust_lon":33}],84:[function(require,module,exports){
var SEC_TO_RAD = 4.84813681109535993589914102357e-6;
/*
  reference
    Department of Land and Survey Technical Circular 1973/32
      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf
    OSG Technical Report 4.1
      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf
  */

/**
 * iterations: Number of iterations to refine inverse transform.
 *     0 -> km accuracy
 *     1 -> m accuracy -- suitable for most mapping applications
 *     2 -> mm accuracy
 */
exports.iterations = 1;

exports.init = function() {
  this.A = [];
  this.A[1] = 0.6399175073;
  this.A[2] = -0.1358797613;
  this.A[3] = 0.063294409;
  this.A[4] = -0.02526853;
  this.A[5] = 0.0117879;
  this.A[6] = -0.0055161;
  this.A[7] = 0.0026906;
  this.A[8] = -0.001333;
  this.A[9] = 0.00067;
  this.A[10] = -0.00034;

  this.B_re = [];
  this.B_im = [];
  this.B_re[1] = 0.7557853228;
  this.B_im[1] = 0;
  this.B_re[2] = 0.249204646;
  this.B_im[2] = 0.003371507;
  this.B_re[3] = -0.001541739;
  this.B_im[3] = 0.041058560;
  this.B_re[4] = -0.10162907;
  this.B_im[4] = 0.01727609;
  this.B_re[5] = -0.26623489;
  this.B_im[5] = -0.36249218;
  this.B_re[6] = -0.6870983;
  this.B_im[6] = -1.1651967;

  this.C_re = [];
  this.C_im = [];
  this.C_re[1] = 1.3231270439;
  this.C_im[1] = 0;
  this.C_re[2] = -0.577245789;
  this.C_im[2] = -0.007809598;
  this.C_re[3] = 0.508307513;
  this.C_im[3] = -0.112208952;
  this.C_re[4] = -0.15094762;
  this.C_im[4] = 0.18200602;
  this.C_re[5] = 1.01418179;
  this.C_im[5] = 1.64497696;
  this.C_re[6] = 1.9660549;
  this.C_im[6] = 2.5127645;

  this.D = [];
  this.D[1] = 1.5627014243;
  this.D[2] = 0.5185406398;
  this.D[3] = -0.03333098;
  this.D[4] = -0.1052906;
  this.D[5] = -0.0368594;
  this.D[6] = 0.007317;
  this.D[7] = 0.01220;
  this.D[8] = 0.00394;
  this.D[9] = -0.0013;
};

/**
    New Zealand Map Grid Forward  - long/lat to x/y
    long/lat in radians
  */
exports.forward = function(p) {
  var n;
  var lon = p.x;
  var lat = p.y;

  var delta_lat = lat - this.lat0;
  var delta_lon = lon - this.long0;

  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda
  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.
  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;
  var d_lambda = delta_lon;
  var d_phi_n = 1; // d_phi^0

  var d_psi = 0;
  for (n = 1; n <= 10; n++) {
    d_phi_n = d_phi_n * d_phi;
    d_psi = d_psi + this.A[n] * d_phi_n;
  }

  // 2. Calculate theta
  var th_re = d_psi;
  var th_im = d_lambda;

  // 3. Calculate z
  var th_n_re = 1;
  var th_n_im = 0; // theta^0
  var th_n_re1;
  var th_n_im1;

  var z_re = 0;
  var z_im = 0;
  for (n = 1; n <= 6; n++) {
    th_n_re1 = th_n_re * th_re - th_n_im * th_im;
    th_n_im1 = th_n_im * th_re + th_n_re * th_im;
    th_n_re = th_n_re1;
    th_n_im = th_n_im1;
    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;
    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;
  }

  // 4. Calculate easting and northing
  p.x = (z_im * this.a) + this.x0;
  p.y = (z_re * this.a) + this.y0;

  return p;
};


/**
    New Zealand Map Grid Inverse  -  x/y to long/lat
  */
exports.inverse = function(p) {
  var n;
  var x = p.x;
  var y = p.y;

  var delta_x = x - this.x0;
  var delta_y = y - this.y0;

  // 1. Calculate z
  var z_re = delta_y / this.a;
  var z_im = delta_x / this.a;

  // 2a. Calculate theta - first approximation gives km accuracy
  var z_n_re = 1;
  var z_n_im = 0; // z^0
  var z_n_re1;
  var z_n_im1;

  var th_re = 0;
  var th_im = 0;
  for (n = 1; n <= 6; n++) {
    z_n_re1 = z_n_re * z_re - z_n_im * z_im;
    z_n_im1 = z_n_im * z_re + z_n_re * z_im;
    z_n_re = z_n_re1;
    z_n_im = z_n_im1;
    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;
    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;
  }

  // 2b. Iterate to refine the accuracy of the calculation
  //        0 iterations gives km accuracy
  //        1 iteration gives m accuracy -- good enough for most mapping applications
  //        2 iterations bives mm accuracy
  for (var i = 0; i < this.iterations; i++) {
    var th_n_re = th_re;
    var th_n_im = th_im;
    var th_n_re1;
    var th_n_im1;

    var num_re = z_re;
    var num_im = z_im;
    for (n = 2; n <= 6; n++) {
      th_n_re1 = th_n_re * th_re - th_n_im * th_im;
      th_n_im1 = th_n_im * th_re + th_n_re * th_im;
      th_n_re = th_n_re1;
      th_n_im = th_n_im1;
      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);
      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);
    }

    th_n_re = 1;
    th_n_im = 0;
    var den_re = this.B_re[1];
    var den_im = this.B_im[1];
    for (n = 2; n <= 6; n++) {
      th_n_re1 = th_n_re * th_re - th_n_im * th_im;
      th_n_im1 = th_n_im * th_re + th_n_re * th_im;
      th_n_re = th_n_re1;
      th_n_im = th_n_im1;
      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);
      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);
    }

    // Complex division
    var den2 = den_re * den_re + den_im * den_im;
    th_re = (num_re * den_re + num_im * den_im) / den2;
    th_im = (num_im * den_re - num_re * den_im) / den2;
  }

  // 3. Calculate d_phi              ...                                    // and d_lambda
  var d_psi = th_re;
  var d_lambda = th_im;
  var d_psi_n = 1; // d_psi^0

  var d_phi = 0;
  for (n = 1; n <= 9; n++) {
    d_psi_n = d_psi_n * d_psi;
    d_phi = d_phi + this.D[n] * d_psi_n;
  }

  // 4. Calculate latitude and longitude
  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.
  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);
  var lon = this.long0 + d_lambda;

  p.x = lon;
  p.y = lat;

  return p;
};
exports.names = ["New_Zealand_Map_Grid", "nzmg"];
},{}],85:[function(require,module,exports){
var tsfnz = require('../common/tsfnz');
var adjust_lon = require('../common/adjust_lon');
var phi2z = require('../common/phi2z');
var HALF_PI = Math.PI/2;
var FORTPI = Math.PI/4;
var EPSLN = 1.0e-10;

/* Initialize the Oblique Mercator  projection
    ------------------------------------------*/
exports.init = function() {
  this.no_off = this.no_off || false;
  this.no_rot = this.no_rot || false;

  if (isNaN(this.k0)) {
    this.k0 = 1;
  }
  var sinlat = Math.sin(this.lat0);
  var coslat = Math.cos(this.lat0);
  var con = this.e * sinlat;

  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));
  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);
  var t0 = tsfnz(this.e, this.lat0, sinlat);
  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));
  if (dl * dl < 1) {
    dl = 1;
  }
  var fl;
  var gl;
  if (!isNaN(this.longc)) {
    //Central point and azimuth method

    if (this.lat0 >= 0) {
      fl = dl + Math.sqrt(dl * dl - 1);
    }
    else {
      fl = dl - Math.sqrt(dl * dl - 1);
    }
    this.el = fl * Math.pow(t0, this.bl);
    gl = 0.5 * (fl - 1 / fl);
    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);
    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;

  }
  else {
    //2 points method
    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));
    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));
    if (this.lat0 >= 0) {
      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);
    }
    else {
      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);
    }
    var hl = Math.pow(t1, this.bl);
    var ll = Math.pow(t2, this.bl);
    fl = this.el / hl;
    gl = 0.5 * (fl - 1 / fl);
    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);
    var pl = (ll - hl) / (ll + hl);
    var dlon12 = adjust_lon(this.long1 - this.long2);
    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;
    this.long0 = adjust_lon(this.long0);
    var dlon10 = adjust_lon(this.long1 - this.long0);
    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);
    this.alpha = Math.asin(dl * Math.sin(this.gamma0));
  }

  if (this.no_off) {
    this.uc = 0;
  }
  else {
    if (this.lat0 >= 0) {
      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));
    }
    else {
      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));
    }
  }

};


/* Oblique Mercator forward equations--mapping lat,long to x,y
    ----------------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var dlon = adjust_lon(lon - this.long0);
  var us, vs;
  var con;
  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {
    if (lat > 0) {
      con = -1;
    }
    else {
      con = 1;
    }
    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));
    us = -1 * con * HALF_PI * this.al / this.bl;
  }
  else {
    var t = tsfnz(this.e, lat, Math.sin(lat));
    var ql = this.el / Math.pow(t, this.bl);
    var sl = 0.5 * (ql - 1 / ql);
    var tl = 0.5 * (ql + 1 / ql);
    var vl = Math.sin(this.bl * (dlon));
    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;
    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {
      vs = Number.POSITIVE_INFINITY;
    }
    else {
      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;
    }
    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {
      us = this.al * this.bl * (dlon);
    }
    else {
      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;
    }
  }

  if (this.no_rot) {
    p.x = this.x0 + us;
    p.y = this.y0 + vs;
  }
  else {

    us -= this.uc;
    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);
    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);
  }
  return p;
};

exports.inverse = function(p) {
  var us, vs;
  if (this.no_rot) {
    vs = p.y - this.y0;
    us = p.x - this.x0;
  }
  else {
    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);
    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);
    us += this.uc;
  }
  var qp = Math.exp(-1 * this.bl * vs / this.al);
  var sp = 0.5 * (qp - 1 / qp);
  var tp = 0.5 * (qp + 1 / qp);
  var vp = Math.sin(this.bl * us / this.al);
  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;
  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);
  if (Math.abs(up - 1) < EPSLN) {
    p.x = this.long0;
    p.y = HALF_PI;
  }
  else if (Math.abs(up + 1) < EPSLN) {
    p.x = this.long0;
    p.y = -1 * HALF_PI;
  }
  else {
    p.y = phi2z(this.e, ts);
    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);
  }
  return p;
};

exports.names = ["Hotine_Oblique_Mercator", "Hotine Oblique Mercator", "Hotine_Oblique_Mercator_Azimuth_Natural_Origin", "Hotine_Oblique_Mercator_Azimuth_Center", "omerc"];
},{"../common/adjust_lon":33,"../common/phi2z":44,"../common/tsfnz":52}],86:[function(require,module,exports){
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var mlfn = require('../common/mlfn');
var EPSLN = 1.0e-10;
var gN = require('../common/gN');
var MAX_ITER = 20;
exports.init = function() {
  /* Place parameters in static storage for common use
      -------------------------------------------------*/
  this.temp = this.b / this.a;
  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles
  this.e = Math.sqrt(this.es);
  this.e0 = e0fn(this.es);
  this.e1 = e1fn(this.es);
  this.e2 = e2fn(this.es);
  this.e3 = e3fn(this.es);
  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas
};


/* Polyconic forward equations--mapping lat,long to x,y
    ---------------------------------------------------*/
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var x, y, el;
  var dlon = adjust_lon(lon - this.long0);
  el = dlon * Math.sin(lat);
  if (this.sphere) {
    if (Math.abs(lat) <= EPSLN) {
      x = this.a * dlon;
      y = -1 * this.a * this.lat0;
    }
    else {
      x = this.a * Math.sin(el) / Math.tan(lat);
      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));
    }
  }
  else {
    if (Math.abs(lat) <= EPSLN) {
      x = this.a * dlon;
      y = -1 * this.ml0;
    }
    else {
      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);
      x = nl * Math.sin(el);
      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));
    }

  }
  p.x = x + this.x0;
  p.y = y + this.y0;
  return p;
};


/* Inverse equations
  -----------------*/
exports.inverse = function(p) {
  var lon, lat, x, y, i;
  var al, bl;
  var phi, dphi;
  x = p.x - this.x0;
  y = p.y - this.y0;

  if (this.sphere) {
    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {
      lon = adjust_lon(x / this.a + this.long0);
      lat = 0;
    }
    else {
      al = this.lat0 + y / this.a;
      bl = x * x / this.a / this.a + al * al;
      phi = al;
      var tanphi;
      for (i = MAX_ITER; i; --i) {
        tanphi = Math.tan(phi);
        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);
        phi += dphi;
        if (Math.abs(dphi) <= EPSLN) {
          lat = phi;
          break;
        }
      }
      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));
    }
  }
  else {
    if (Math.abs(y + this.ml0) <= EPSLN) {
      lat = 0;
      lon = adjust_lon(this.long0 + x / this.a);
    }
    else {

      al = (this.ml0 + y) / this.a;
      bl = x * x / this.a / this.a + al * al;
      phi = al;
      var cl, mln, mlnp, ma;
      var con;
      for (i = MAX_ITER; i; --i) {
        con = this.e * Math.sin(phi);
        cl = Math.sqrt(1 - con * con) * Math.tan(phi);
        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);
        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);
        ma = mln / this.a;
        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);
        phi -= dphi;
        if (Math.abs(dphi) <= EPSLN) {
          lat = phi;
          break;
        }
      }

      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);
      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);
      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));
    }
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Polyconic", "poly"];
},{"../common/adjust_lat":32,"../common/adjust_lon":33,"../common/e0fn":35,"../common/e1fn":36,"../common/e2fn":37,"../common/e3fn":38,"../common/gN":39,"../common/mlfn":42}],87:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var adjust_lat = require('../common/adjust_lat');
var pj_enfn = require('../common/pj_enfn');
var MAX_ITER = 20;
var pj_mlfn = require('../common/pj_mlfn');
var pj_inv_mlfn = require('../common/pj_inv_mlfn');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var asinz = require('../common/asinz');
exports.init = function() {
  /* Place parameters in static storage for common use
    -------------------------------------------------*/


  if (!this.sphere) {
    this.en = pj_enfn(this.es);
  }
  else {
    this.n = 1;
    this.m = 0;
    this.es = 0;
    this.C_y = Math.sqrt((this.m + 1) / this.n);
    this.C_x = this.C_y / (this.m + 1);
  }

};

/* Sinusoidal forward equations--mapping lat,long to x,y
  -----------------------------------------------------*/
exports.forward = function(p) {
  var x, y;
  var lon = p.x;
  var lat = p.y;
  /* Forward equations
    -----------------*/
  lon = adjust_lon(lon - this.long0);

  if (this.sphere) {
    if (!this.m) {
      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;
    }
    else {
      var k = this.n * Math.sin(lat);
      for (var i = MAX_ITER; i; --i) {
        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));
        lat -= V;
        if (Math.abs(V) < EPSLN) {
          break;
        }
      }
    }
    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));
    y = this.a * this.C_y * lat;

  }
  else {

    var s = Math.sin(lat);
    var c = Math.cos(lat);
    y = this.a * pj_mlfn(lat, s, c, this.en);
    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);
  }

  p.x = x;
  p.y = y;
  return p;
};

exports.inverse = function(p) {
  var lat, temp, lon, s;

  p.x -= this.x0;
  lon = p.x / this.a;
  p.y -= this.y0;
  lat = p.y / this.a;

  if (this.sphere) {
    lat /= this.C_y;
    lon = lon / (this.C_x * (this.m + Math.cos(lat)));
    if (this.m) {
      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);
    }
    else if (this.n !== 1) {
      lat = asinz(Math.sin(lat) / this.n);
    }
    lon = adjust_lon(lon + this.long0);
    lat = adjust_lat(lat);
  }
  else {
    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);
    s = Math.abs(lat);
    if (s < HALF_PI) {
      s = Math.sin(lat);
      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));
      //temp = this.long0 + p.x / (this.a * Math.cos(lat));
      lon = adjust_lon(temp);
    }
    else if ((s - EPSLN) < HALF_PI) {
      lon = this.long0;
    }
  }
  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Sinusoidal", "sinu"];
},{"../common/adjust_lat":32,"../common/adjust_lon":33,"../common/asinz":34,"../common/pj_enfn":45,"../common/pj_inv_mlfn":46,"../common/pj_mlfn":47}],88:[function(require,module,exports){
/*
  references:
    Formules et constantes pour le Calcul pour la
    projection cylindrique conforme à axe oblique et pour la transformation entre
    des systèmes de référence.
    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf
  */
exports.init = function() {
  var phy0 = this.lat0;
  this.lambda0 = this.long0;
  var sinPhy0 = Math.sin(phy0);
  var semiMajorAxis = this.a;
  var invF = this.rf;
  var flattening = 1 / invF;
  var e2 = 2 * flattening - Math.pow(flattening, 2);
  var e = this.e = Math.sqrt(e2);
  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));
  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));
  this.b0 = Math.asin(sinPhy0 / this.alpha);
  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));
  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));
  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));
  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;
};


exports.forward = function(p) {
  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));
  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));
  var S = -this.alpha * (Sa1 + Sa2) + this.K;

  // spheric latitude
  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);

  // spheric longitude
  var I = this.alpha * (p.x - this.lambda0);

  // psoeudo equatorial rotation
  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));

  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));

  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;
  p.x = this.R * rotI + this.x0;
  return p;
};

exports.inverse = function(p) {
  var Y = p.x - this.x0;
  var X = p.y - this.y0;

  var rotI = Y / this.R;
  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);

  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));
  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));

  var lambda = this.lambda0 + I / this.alpha;

  var S = 0;
  var phy = b;
  var prevPhy = -1000;
  var iteration = 0;
  while (Math.abs(phy - prevPhy) > 0.0000001) {
    if (++iteration > 20) {
      //...reportError("omercFwdInfinity");
      return;
    }
    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));
    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));
    prevPhy = phy;
    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;
  }

  p.x = lambda;
  p.y = phy;
  return p;
};

exports.names = ["somerc"];

},{}],89:[function(require,module,exports){
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var sign = require('../common/sign');
var msfnz = require('../common/msfnz');
var tsfnz = require('../common/tsfnz');
var phi2z = require('../common/phi2z');
var adjust_lon = require('../common/adjust_lon');
exports.ssfn_ = function(phit, sinphi, eccen) {
  sinphi *= eccen;
  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));
};

exports.init = function() {
  this.coslat0 = Math.cos(this.lat0);
  this.sinlat0 = Math.sin(this.lat0);
  if (this.sphere) {
    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {
      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));
    }
  }
  else {
    if (Math.abs(this.coslat0) <= EPSLN) {
      if (this.lat0 > 0) {
        //North pole
        //trace('stere:north pole');
        this.con = 1;
      }
      else {
        //South pole
        //trace('stere:south pole');
        this.con = -1;
      }
    }
    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));
    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {
      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));
    }
    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);
    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;
    this.cosX0 = Math.cos(this.X0);
    this.sinX0 = Math.sin(this.X0);
  }
};

// Stereographic forward equations--mapping lat,long to x,y
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;
  var sinlat = Math.sin(lat);
  var coslat = Math.cos(lat);
  var A, X, sinX, cosX, ts, rh;
  var dlon = adjust_lon(lon - this.long0);

  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {
    //case of the origine point
    //trace('stere:this is the origin point');
    p.x = NaN;
    p.y = NaN;
    return p;
  }
  if (this.sphere) {
    //trace('stere:sphere case');
    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));
    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;
    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;
    return p;
  }
  else {
    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;
    cosX = Math.cos(X);
    sinX = Math.sin(X);
    if (Math.abs(this.coslat0) <= EPSLN) {
      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);
      rh = 2 * this.a * this.k0 * ts / this.cons;
      p.x = this.x0 + rh * Math.sin(lon - this.long0);
      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);
      //trace(p.toString());
      return p;
    }
    else if (Math.abs(this.sinlat0) < EPSLN) {
      //Eq
      //trace('stere:equateur');
      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));
      p.y = A * sinX;
    }
    else {
      //other case
      //trace('stere:normal case');
      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));
      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;
    }
    p.x = A * cosX * Math.sin(dlon) + this.x0;
  }
  //trace(p.toString());
  return p;
};


//* Stereographic inverse equations--mapping x,y to lat/long
exports.inverse = function(p) {
  p.x -= this.x0;
  p.y -= this.y0;
  var lon, lat, ts, ce, Chi;
  var rh = Math.sqrt(p.x * p.x + p.y * p.y);
  if (this.sphere) {
    var c = 2 * Math.atan(rh / (0.5 * this.a * this.k0));
    lon = this.long0;
    lat = this.lat0;
    if (rh <= EPSLN) {
      p.x = lon;
      p.y = lat;
      return p;
    }
    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);
    if (Math.abs(this.coslat0) < EPSLN) {
      if (this.lat0 > 0) {
        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));
      }
      else {
        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));
      }
    }
    else {
      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));
    }
    p.x = lon;
    p.y = lat;
    return p;
  }
  else {
    if (Math.abs(this.coslat0) <= EPSLN) {
      if (rh <= EPSLN) {
        lat = this.lat0;
        lon = this.long0;
        p.x = lon;
        p.y = lat;
        //trace(p.toString());
        return p;
      }
      p.x *= this.con;
      p.y *= this.con;
      ts = rh * this.cons / (2 * this.a * this.k0);
      lat = this.con * phi2z(this.e, ts);
      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));
    }
    else {
      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));
      lon = this.long0;
      if (rh <= EPSLN) {
        Chi = this.X0;
      }
      else {
        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);
        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));
      }
      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));
    }
  }
  p.x = lon;
  p.y = lat;

  //trace(p.toString());
  return p;

};
exports.names = ["stere", "Stereographic_South_Pole", "Polar Stereographic (variant B)"];

},{"../common/adjust_lon":33,"../common/msfnz":43,"../common/phi2z":44,"../common/sign":49,"../common/tsfnz":52}],90:[function(require,module,exports){
var gauss = require('./gauss');
var adjust_lon = require('../common/adjust_lon');
exports.init = function() {
  gauss.init.apply(this);
  if (!this.rc) {
    return;
  }
  this.sinc0 = Math.sin(this.phic0);
  this.cosc0 = Math.cos(this.phic0);
  this.R2 = 2 * this.rc;
  if (!this.title) {
    this.title = "Oblique Stereographic Alternative";
  }
};

exports.forward = function(p) {
  var sinc, cosc, cosl, k;
  p.x = adjust_lon(p.x - this.long0);
  gauss.forward.apply(this, [p]);
  sinc = Math.sin(p.y);
  cosc = Math.cos(p.y);
  cosl = Math.cos(p.x);
  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);
  p.x = k * cosc * Math.sin(p.x);
  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);
  p.x = this.a * p.x + this.x0;
  p.y = this.a * p.y + this.y0;
  return p;
};

exports.inverse = function(p) {
  var sinc, cosc, lon, lat, rho;
  p.x = (p.x - this.x0) / this.a;
  p.y = (p.y - this.y0) / this.a;

  p.x /= this.k0;
  p.y /= this.k0;
  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {
    var c = 2 * Math.atan2(rho, this.R2);
    sinc = Math.sin(c);
    cosc = Math.cos(c);
    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);
    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);
  }
  else {
    lat = this.phic0;
    lon = 0;
  }

  p.x = lon;
  p.y = lat;
  gauss.inverse.apply(this, [p]);
  p.x = adjust_lon(p.x + this.long0);
  return p;
};

exports.names = ["Stereographic_North_Pole", "Oblique_Stereographic", "Polar_Stereographic", "sterea","Oblique Stereographic Alternative"];

},{"../common/adjust_lon":33,"./gauss":75}],91:[function(require,module,exports){
var e0fn = require('../common/e0fn');
var e1fn = require('../common/e1fn');
var e2fn = require('../common/e2fn');
var e3fn = require('../common/e3fn');
var mlfn = require('../common/mlfn');
var adjust_lon = require('../common/adjust_lon');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var sign = require('../common/sign');
var asinz = require('../common/asinz');

exports.init = function() {
  this.e0 = e0fn(this.es);
  this.e1 = e1fn(this.es);
  this.e2 = e2fn(this.es);
  this.e3 = e3fn(this.es);
  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);
};

/**
    Transverse Mercator Forward  - long/lat to x/y
    long/lat in radians
  */
exports.forward = function(p) {
  var lon = p.x;
  var lat = p.y;

  var delta_lon = adjust_lon(lon - this.long0);
  var con;
  var x, y;
  var sin_phi = Math.sin(lat);
  var cos_phi = Math.cos(lat);

  if (this.sphere) {
    var b = cos_phi * Math.sin(delta_lon);
    if ((Math.abs(Math.abs(b) - 1)) < 0.0000000001) {
      return (93);
    }
    else {
      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b));
      con = Math.acos(cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - b * b));
      if (lat < 0) {
        con = -con;
      }
      y = this.a * this.k0 * (con - this.lat0);
    }
  }
  else {
    var al = cos_phi * delta_lon;
    var als = Math.pow(al, 2);
    var c = this.ep2 * Math.pow(cos_phi, 2);
    var tq = Math.tan(lat);
    var t = Math.pow(tq, 2);
    con = 1 - this.es * Math.pow(sin_phi, 2);
    var n = this.a / Math.sqrt(con);
    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat);

    x = this.k0 * n * al * (1 + als / 6 * (1 - t + c + als / 20 * (5 - 18 * t + Math.pow(t, 2) + 72 * c - 58 * this.ep2))) + this.x0;
    y = this.k0 * (ml - this.ml0 + n * tq * (als * (0.5 + als / 24 * (5 - t + 9 * c + 4 * Math.pow(c, 2) + als / 30 * (61 - 58 * t + Math.pow(t, 2) + 600 * c - 330 * this.ep2))))) + this.y0;

  }
  p.x = x;
  p.y = y;
  return p;
};

/**
    Transverse Mercator Inverse  -  x/y to long/lat
  */
exports.inverse = function(p) {
  var con, phi;
  var delta_phi;
  var i;
  var max_iter = 6;
  var lat, lon;

  if (this.sphere) {
    var f = Math.exp(p.x / (this.a * this.k0));
    var g = 0.5 * (f - 1 / f);
    var temp = this.lat0 + p.y / (this.a * this.k0);
    var h = Math.cos(temp);
    con = Math.sqrt((1 - h * h) / (1 + g * g));
    lat = asinz(con);
    if (temp < 0) {
      lat = -lat;
    }
    if ((g === 0) && (h === 0)) {
      lon = this.long0;
    }
    else {
      lon = adjust_lon(Math.atan2(g, h) + this.long0);
    }
  }
  else { // ellipsoidal form
    var x = p.x - this.x0;
    var y = p.y - this.y0;

    con = (this.ml0 + y / this.k0) / this.a;
    phi = con;
    for (i = 0; true; i++) {
      delta_phi = ((con + this.e1 * Math.sin(2 * phi) - this.e2 * Math.sin(4 * phi) + this.e3 * Math.sin(6 * phi)) / this.e0) - phi;
      phi += delta_phi;
      if (Math.abs(delta_phi) <= EPSLN) {
        break;
      }
      if (i >= max_iter) {
        return (95);
      }
    } // for()
    if (Math.abs(phi) < HALF_PI) {
      var sin_phi = Math.sin(phi);
      var cos_phi = Math.cos(phi);
      var tan_phi = Math.tan(phi);
      var c = this.ep2 * Math.pow(cos_phi, 2);
      var cs = Math.pow(c, 2);
      var t = Math.pow(tan_phi, 2);
      var ts = Math.pow(t, 2);
      con = 1 - this.es * Math.pow(sin_phi, 2);
      var n = this.a / Math.sqrt(con);
      var r = n * (1 - this.es) / con;
      var d = x / (n * this.k0);
      var ds = Math.pow(d, 2);
      lat = phi - (n * tan_phi * ds / r) * (0.5 - ds / 24 * (5 + 3 * t + 10 * c - 4 * cs - 9 * this.ep2 - ds / 30 * (61 + 90 * t + 298 * c + 45 * ts - 252 * this.ep2 - 3 * cs)));
      lon = adjust_lon(this.long0 + (d * (1 - ds / 6 * (1 + 2 * t + c - ds / 20 * (5 - 2 * c + 28 * t - 3 * cs + 8 * this.ep2 + 24 * ts))) / cos_phi));
    }
    else {
      lat = HALF_PI * sign(y);
      lon = this.long0;
    }
  }
  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Transverse_Mercator", "Transverse Mercator", "tmerc"];

},{"../common/adjust_lon":33,"../common/asinz":34,"../common/e0fn":35,"../common/e1fn":36,"../common/e2fn":37,"../common/e3fn":38,"../common/mlfn":42,"../common/sign":49}],92:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var tmerc = require('./tmerc');
exports.dependsOn = 'tmerc';
exports.init = function() {
  if (!this.zone) {
    return;
  }
  this.lat0 = 0;
  this.long0 = ((6 * Math.abs(this.zone)) - 183) * D2R;
  this.x0 = 500000;
  this.y0 = this.utmSouth ? 10000000 : 0;
  this.k0 = 0.9996;

  tmerc.init.apply(this);
  this.forward = tmerc.forward;
  this.inverse = tmerc.inverse;
};
exports.names = ["Universal Transverse Mercator System", "utm"];

},{"./tmerc":91}],93:[function(require,module,exports){
var adjust_lon = require('../common/adjust_lon');
var HALF_PI = Math.PI/2;
var EPSLN = 1.0e-10;
var asinz = require('../common/asinz');
/* Initialize the Van Der Grinten projection
  ----------------------------------------*/
exports.init = function() {
  //this.R = 6370997; //Radius of earth
  this.R = this.a;
};

exports.forward = function(p) {

  var lon = p.x;
  var lat = p.y;

  /* Forward equations
    -----------------*/
  var dlon = adjust_lon(lon - this.long0);
  var x, y;

  if (Math.abs(lat) <= EPSLN) {
    x = this.x0 + this.R * dlon;
    y = this.y0;
  }
  var theta = asinz(2 * Math.abs(lat / Math.PI));
  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {
    x = this.x0;
    if (lat >= 0) {
      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);
    }
    else {
      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);
    }
    //  return(OK);
  }
  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));
  var asq = al * al;
  var sinth = Math.sin(theta);
  var costh = Math.cos(theta);

  var g = costh / (sinth + costh - 1);
  var gsq = g * g;
  var m = g * (2 / sinth - 1);
  var msq = m * m;
  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);
  if (dlon < 0) {
    con = -con;
  }
  x = this.x0 + con;
  //con = Math.abs(con / (Math.PI * this.R));
  var q = asq + g;
  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);
  if (lat >= 0) {
    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);
    y = this.y0 + con;
  }
  else {
    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);
    y = this.y0 - con;
  }
  p.x = x;
  p.y = y;
  return p;
};

/* Van Der Grinten inverse equations--mapping x,y to lat/long
  ---------------------------------------------------------*/
exports.inverse = function(p) {
  var lon, lat;
  var xx, yy, xys, c1, c2, c3;
  var a1;
  var m1;
  var con;
  var th1;
  var d;

  /* inverse equations
    -----------------*/
  p.x -= this.x0;
  p.y -= this.y0;
  con = Math.PI * this.R;
  xx = p.x / con;
  yy = p.y / con;
  xys = xx * xx + yy * yy;
  c1 = -Math.abs(yy) * (1 + xys);
  c2 = c1 - 2 * yy * yy + xx * xx;
  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;
  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;
  a1 = (c1 - c2 * c2 / 3 / c3) / c3;
  m1 = 2 * Math.sqrt(-a1 / 3);
  con = ((3 * d) / a1) / m1;
  if (Math.abs(con) > 1) {
    if (con >= 0) {
      con = 1;
    }
    else {
      con = -1;
    }
  }
  th1 = Math.acos(con) / 3;
  if (p.y >= 0) {
    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;
  }
  else {
    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;
  }

  if (Math.abs(xx) < EPSLN) {
    lon = this.long0;
  }
  else {
    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);
  }

  p.x = lon;
  p.y = lat;
  return p;
};
exports.names = ["Van_der_Grinten_I", "VanDerGrinten", "vandg"];
},{"../common/adjust_lon":33,"../common/asinz":34}],94:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var R2D = 57.29577951308232088;
var PJD_3PARAM = 1;
var PJD_7PARAM = 2;
var datum_transform = require('./datum_transform');
var adjust_axis = require('./adjust_axis');
var proj = require('./Proj');
var toPoint = require('./common/toPoint');
module.exports = function transform(source, dest, point) {
  var wgs84;
  if (Array.isArray(point)) {
    point = toPoint(point);
  }
  function checkNotWGS(source, dest) {
    return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== "WGS84");
  }

  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84
  if (source.datum && dest.datum && (checkNotWGS(source, dest) || checkNotWGS(dest, source))) {
    wgs84 = new proj('WGS84');
    transform(source, wgs84, point);
    source = wgs84;
  }
  // DGR, 2010/11/12
  if (source.axis !== "enu") {
    adjust_axis(source, false, point);
  }
  // Transform source points to long/lat, if they aren't already.
  if (source.projName === "longlat") {
    point.x *= D2R; // convert degrees to radians
    point.y *= D2R;
  }
  else {
    if (source.to_meter) {
      point.x *= source.to_meter;
      point.y *= source.to_meter;
    }
    source.inverse(point); // Convert Cartesian to longlat
  }
  // Adjust for the prime meridian if necessary
  if (source.from_greenwich) {
    point.x += source.from_greenwich;
  }

  // Convert datums if needed, and if possible.
  point = datum_transform(source.datum, dest.datum, point);

  // Adjust for the prime meridian if necessary
  if (dest.from_greenwich) {
    point.x -= dest.from_greenwich;
  }

  if (dest.projName === "longlat") {
    // convert radians to decimal degrees
    point.x *= R2D;
    point.y *= R2D;
  }
  else { // else project
    dest.forward(point);
    if (dest.to_meter) {
      point.x /= dest.to_meter;
      point.y /= dest.to_meter;
    }
  }

  // DGR, 2010/11/12
  if (dest.axis !== "enu") {
    adjust_axis(dest, true, point);
  }

  return point;
};
},{"./Proj":30,"./adjust_axis":31,"./common/toPoint":51,"./datum_transform":59}],95:[function(require,module,exports){
var D2R = 0.01745329251994329577;
var extend = require('./extend');

function mapit(obj, key, v) {
  obj[key] = v.map(function(aa) {
    var o = {};
    sExpr(aa, o);
    return o;
  }).reduce(function(a, b) {
    return extend(a, b);
  }, {});
}

function sExpr(v, obj) {
  var key;
  if (!Array.isArray(v)) {
    obj[v] = true;
    return;
  }
  else {
    key = v.shift();
    if (key === 'PARAMETER') {
      key = v.shift();
    }
    if (v.length === 1) {
      if (Array.isArray(v[0])) {
        obj[key] = {};
        sExpr(v[0], obj[key]);
      }
      else {
        obj[key] = v[0];
      }
    }
    else if (!v.length) {
      obj[key] = true;
    }
    else if (key === 'TOWGS84') {
      obj[key] = v;
    }
    else {
      obj[key] = {};
      if (['UNIT', 'PRIMEM', 'VERT_DATUM'].indexOf(key) > -1) {
        obj[key] = {
          name: v[0].toLowerCase(),
          convert: v[1]
        };
        if (v.length === 3) {
          obj[key].auth = v[2];
        }
      }
      else if (key === 'SPHEROID') {
        obj[key] = {
          name: v[0],
          a: v[1],
          rf: v[2]
        };
        if (v.length === 4) {
          obj[key].auth = v[3];
        }
      }
      else if (['GEOGCS', 'GEOCCS', 'DATUM', 'VERT_CS', 'COMPD_CS', 'LOCAL_CS', 'FITTED_CS', 'LOCAL_DATUM'].indexOf(key) > -1) {
        v[0] = ['name', v[0]];
        mapit(obj, key, v);
      }
      else if (v.every(function(aa) {
        return Array.isArray(aa);
      })) {
        mapit(obj, key, v);
      }
      else {
        sExpr(v, obj[key]);
      }
    }
  }
}

function rename(obj, params) {
  var outName = params[0];
  var inName = params[1];
  if (!(outName in obj) && (inName in obj)) {
    obj[outName] = obj[inName];
    if (params.length === 3) {
      obj[outName] = params[2](obj[outName]);
    }
  }
}

function d2r(input) {
  return input * D2R;
}

function cleanWKT(wkt) {
  if (wkt.type === 'GEOGCS') {
    wkt.projName = 'longlat';
  }
  else if (wkt.type === 'LOCAL_CS') {
    wkt.projName = 'identity';
    wkt.local = true;
  }
  else {
    if (typeof wkt.PROJECTION === "object") {
      wkt.projName = Object.keys(wkt.PROJECTION)[0];
    }
    else {
      wkt.projName = wkt.PROJECTION;
    }
  }
  if (wkt.UNIT) {
    wkt.units = wkt.UNIT.name.toLowerCase();
    if (wkt.units === 'metre') {
      wkt.units = 'meter';
    }
    if (wkt.UNIT.convert) {
      wkt.to_meter = parseFloat(wkt.UNIT.convert, 10);
    }
  }

  if (wkt.GEOGCS) {
    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){
    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;
    //}
    if (wkt.GEOGCS.DATUM) {
      wkt.datumCode = wkt.GEOGCS.DATUM.name.toLowerCase();
    }
    else {
      wkt.datumCode = wkt.GEOGCS.name.toLowerCase();
    }
    if (wkt.datumCode.slice(0, 2) === 'd_') {
      wkt.datumCode = wkt.datumCode.slice(2);
    }
    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {
      wkt.datumCode = 'nzgd49';
    }
    if (wkt.datumCode === "wgs_1984") {
      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {
        wkt.sphere = true;
      }
      wkt.datumCode = 'wgs84';
    }
    if (wkt.datumCode.slice(-6) === '_ferro') {
      wkt.datumCode = wkt.datumCode.slice(0, - 6);
    }
    if (wkt.datumCode.slice(-8) === '_jakarta') {
      wkt.datumCode = wkt.datumCode.slice(0, - 8);
    }
    if (~wkt.datumCode.indexOf('belge')) {
      wkt.datumCode = "rnb72";
    }
    if (wkt.GEOGCS.DATUM && wkt.GEOGCS.DATUM.SPHEROID) {
      wkt.ellps = wkt.GEOGCS.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\_18/, 'clrk');
      if (wkt.ellps.toLowerCase().slice(0, 13) === "international") {
        wkt.ellps = 'intl';
      }

      wkt.a = wkt.GEOGCS.DATUM.SPHEROID.a;
      wkt.rf = parseFloat(wkt.GEOGCS.DATUM.SPHEROID.rf, 10);
    }
    if (~wkt.datumCode.indexOf('osgb_1936')) {
      wkt.datumCode = "osgb36";
    }
  }
  if (wkt.b && !isFinite(wkt.b)) {
    wkt.b = wkt.a;
  }

  function toMeter(input) {
    var ratio = wkt.to_meter || 1;
    return parseFloat(input, 10) * ratio;
  }
  var renamer = function(a) {
    return rename(wkt, a);
  };
  var list = [
    ['standard_parallel_1', 'Standard_Parallel_1'],
    ['standard_parallel_2', 'Standard_Parallel_2'],
    ['false_easting', 'False_Easting'],
    ['false_northing', 'False_Northing'],
    ['central_meridian', 'Central_Meridian'],
    ['latitude_of_origin', 'Latitude_Of_Origin'],
    ['latitude_of_origin', 'Central_Parallel'],
    ['scale_factor', 'Scale_Factor'],
    ['k0', 'scale_factor'],
    ['latitude_of_center', 'Latitude_of_center'],
    ['lat0', 'latitude_of_center', d2r],
    ['longitude_of_center', 'Longitude_Of_Center'],
    ['longc', 'longitude_of_center', d2r],
    ['x0', 'false_easting', toMeter],
    ['y0', 'false_northing', toMeter],
    ['long0', 'central_meridian', d2r],
    ['lat0', 'latitude_of_origin', d2r],
    ['lat0', 'standard_parallel_1', d2r],
    ['lat1', 'standard_parallel_1', d2r],
    ['lat2', 'standard_parallel_2', d2r],
    ['alpha', 'azimuth', d2r],
    ['srsCode', 'name']
  ];
  list.forEach(renamer);
  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === "Lambert_Azimuthal_Equal_Area")) {
    wkt.long0 = wkt.longc;
  }
  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {
    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);
    wkt.lat_ts = wkt.lat1;
  }
}
module.exports = function(wkt, self) {
  var lisp = JSON.parse(("," + wkt).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g, ',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g, ',"$1"]').replace(/,\["VERTCS".+/,''));
  var type = lisp.shift();
  var name = lisp.shift();
  lisp.unshift(['name', name]);
  lisp.unshift(['type', type]);
  lisp.unshift('output');
  var obj = {};
  sExpr(lisp, obj);
  cleanWKT(obj.output);
  return extend(self, obj.output);
};

},{"./extend":62}],96:[function(require,module,exports){
module.exports={
  "_args": [
    [
      {
        "raw": "proj4@2.3.10",
        "scope": null,
        "escapedName": "proj4",
        "name": "proj4",
        "rawSpec": "2.3.10",
        "spec": "2.3.10",
        "type": "version"
      },
      "C:\\Utv\\origo"
    ]
  ],
  "_from": "proj4@2.3.10",
  "_id": "proj4@2.3.10",
  "_inCache": true,
  "_location": "/proj4",
  "_nodeVersion": "0.12.5",
  "_npmUser": {
    "name": "ahocevar",
    "email": "andreas.hocevar@gmail.com"
  },
  "_npmVersion": "2.11.2",
  "_phantomChildren": {},
  "_requested": {
    "raw": "proj4@2.3.10",
    "scope": null,
    "escapedName": "proj4",
    "name": "proj4",
    "rawSpec": "2.3.10",
    "spec": "2.3.10",
    "type": "version"
  },
  "_requiredBy": [
    "/"
  ],
  "_resolved": "https://registry.npmjs.org/proj4/-/proj4-2.3.10.tgz",
  "_shasum": "f6e66bdcca332c25a5e3d8ef265cfc9d7b60fd0c",
  "_shrinkwrap": null,
  "_spec": "proj4@2.3.10",
  "_where": "C:\\Utv\\origo",
  "author": "",
  "bugs": {
    "url": "https://github.com/proj4js/proj4js/issues"
  },
  "contributors": [
    {
      "name": "Mike Adair",
      "email": "madair@dmsolutions.ca"
    },
    {
      "name": "Richard Greenwood",
      "email": "rich@greenwoodmap.com"
    },
    {
      "name": "Calvin Metcalf",
      "email": "calvin.metcalf@gmail.com"
    },
    {
      "name": "Richard Marsden",
      "url": "http://www.winwaed.com"
    },
    {
      "name": "T. Mittan"
    },
    {
      "name": "D. Steinwand"
    },
    {
      "name": "S. Nelson"
    }
  ],
  "dependencies": {
    "mgrs": "~0.0.2"
  },
  "description": "Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",
  "devDependencies": {
    "browserify": "~3.24.5",
    "chai": "~1.8.1",
    "curl": "git://github.com/cujojs/curl.git",
    "grunt": "~0.4.2",
    "grunt-browserify": "~1.3.0",
    "grunt-cli": "~0.1.13",
    "grunt-contrib-connect": "~0.6.0",
    "grunt-contrib-jshint": "~0.8.0",
    "grunt-contrib-uglify": "~0.3.2",
    "grunt-mocha-phantomjs": "~0.4.0",
    "istanbul": "~0.2.4",
    "mocha": "~1.17.1",
    "tin": "~0.4.0"
  },
  "directories": {
    "test": "test",
    "doc": "docs"
  },
  "dist": {
    "shasum": "f6e66bdcca332c25a5e3d8ef265cfc9d7b60fd0c",
    "tarball": "https://registry.npmjs.org/proj4/-/proj4-2.3.10.tgz"
  },
  "gitHead": "ac03d1439491dc313da80985193f702ca471b3d0",
  "homepage": "https://github.com/proj4js/proj4js#readme",
  "jam": {
    "main": "dist/proj4.js",
    "include": [
      "dist/proj4.js",
      "README.md",
      "AUTHORS",
      "LICENSE.md"
    ]
  },
  "license": "MIT",
  "main": "lib/index.js",
  "maintainers": [
    {
      "name": "cwmma",
      "email": "calvin.metcalf@gmail.com"
    },
    {
      "name": "ahocevar",
      "email": "andreas.hocevar@gmail.com"
    }
  ],
  "name": "proj4",
  "optionalDependencies": {},
  "readme": "ERROR: No README data found!",
  "repository": {
    "type": "git",
    "url": "git://github.com/proj4js/proj4js.git"
  },
  "scripts": {
    "test": "./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"
  },
  "version": "2.3.10"
}

},{}],97:[function(require,module,exports){
/*!
 * typeahead.js 0.11.0
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */

(function(root, factory) {
    if (typeof define === "function" && define.amd) {
        define("bloodhound", [ "jquery" ], function(a0) {
            return root["Bloodhound"] = factory(a0);
        });
    } else if (typeof exports === "object") {
        module.exports = factory(require("jquery"));
    } else {
        root["Bloodhound"] = factory(jQuery);
    }
})(this, function($) {
    var _ = function() {
        "use strict";
        return {
            isMsie: function() {
                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
            },
            isBlankString: function(str) {
                return !str || /^\s*$/.test(str);
            },
            escapeRegExChars: function(str) {
                return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
            },
            isString: function(obj) {
                return typeof obj === "string";
            },
            isNumber: function(obj) {
                return typeof obj === "number";
            },
            isArray: $.isArray,
            isFunction: $.isFunction,
            isObject: $.isPlainObject,
            isUndefined: function(obj) {
                return typeof obj === "undefined";
            },
            isElement: function(obj) {
                return !!(obj && obj.nodeType === 1);
            },
            isJQuery: function(obj) {
                return obj instanceof $;
            },
            toStr: function toStr(s) {
                return _.isUndefined(s) || s === null ? "" : s + "";
            },
            bind: $.proxy,
            each: function(collection, cb) {
                $.each(collection, reverseArgs);
                function reverseArgs(index, value) {
                    return cb(value, index);
                }
            },
            map: $.map,
            filter: $.grep,
            every: function(obj, test) {
                var result = true;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (!(result = test.call(null, val, key, obj))) {
                        return false;
                    }
                });
                return !!result;
            },
            some: function(obj, test) {
                var result = false;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (result = test.call(null, val, key, obj)) {
                        return false;
                    }
                });
                return !!result;
            },
            mixin: $.extend,
            identity: function(x) {
                return x;
            },
            clone: function(obj) {
                return $.extend(true, {}, obj);
            },
            getIdGenerator: function() {
                var counter = 0;
                return function() {
                    return counter++;
                };
            },
            templatify: function templatify(obj) {
                return $.isFunction(obj) ? obj : template;
                function template() {
                    return String(obj);
                }
            },
            defer: function(fn) {
                setTimeout(fn, 0);
            },
            debounce: function(func, wait, immediate) {
                var timeout, result;
                return function() {
                    var context = this, args = arguments, later, callNow;
                    later = function() {
                        timeout = null;
                        if (!immediate) {
                            result = func.apply(context, args);
                        }
                    };
                    callNow = immediate && !timeout;
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                    if (callNow) {
                        result = func.apply(context, args);
                    }
                    return result;
                };
            },
            throttle: function(func, wait) {
                var context, args, timeout, result, previous, later;
                previous = 0;
                later = function() {
                    previous = new Date();
                    timeout = null;
                    result = func.apply(context, args);
                };
                return function() {
                    var now = new Date(), remaining = wait - (now - previous);
                    context = this;
                    args = arguments;
                    if (remaining <= 0) {
                        clearTimeout(timeout);
                        timeout = null;
                        previous = now;
                        result = func.apply(context, args);
                    } else if (!timeout) {
                        timeout = setTimeout(later, remaining);
                    }
                    return result;
                };
            },
            stringify: function(val) {
                return _.isString(val) ? val : JSON.stringify(val);
            },
            noop: function() {}
        };
    }();
    var VERSION = "0.11.0";
    var tokenizers = function() {
        "use strict";
        return {
            nonword: nonword,
            whitespace: whitespace,
            obj: {
                nonword: getObjTokenizer(nonword),
                whitespace: getObjTokenizer(whitespace)
            }
        };
        function whitespace(str) {
            str = _.toStr(str);
            return str ? str.split(/\s+/) : [];
        }
        function nonword(str) {
            str = _.toStr(str);
            return str ? str.split(/\W+/) : [];
        }
        function getObjTokenizer(tokenizer) {
            return function setKey() {
                var args = [].slice.call(arguments, 0);
                return function tokenize(o) {
                    var tokens = [];
                    _.each(args, function(k) {
                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));
                    });
                    return tokens;
                };
            };
        }
    }();
    var LruCache = function() {
        "use strict";
        function LruCache(maxSize) {
            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;
            this.reset();
            if (this.maxSize <= 0) {
                this.set = this.get = $.noop;
            }
        }
        _.mixin(LruCache.prototype, {
            set: function set(key, val) {
                var tailItem = this.list.tail, node;
                if (this.size >= this.maxSize) {
                    this.list.remove(tailItem);
                    delete this.hash[tailItem.key];
                    this.size--;
                }
                if (node = this.hash[key]) {
                    node.val = val;
                    this.list.moveToFront(node);
                } else {
                    node = new Node(key, val);
                    this.list.add(node);
                    this.hash[key] = node;
                    this.size++;
                }
            },
            get: function get(key) {
                var node = this.hash[key];
                if (node) {
                    this.list.moveToFront(node);
                    return node.val;
                }
            },
            reset: function reset() {
                this.size = 0;
                this.hash = {};
                this.list = new List();
            }
        });
        function List() {
            this.head = this.tail = null;
        }
        _.mixin(List.prototype, {
            add: function add(node) {
                if (this.head) {
                    node.next = this.head;
                    this.head.prev = node;
                }
                this.head = node;
                this.tail = this.tail || node;
            },
            remove: function remove(node) {
                node.prev ? node.prev.next = node.next : this.head = node.next;
                node.next ? node.next.prev = node.prev : this.tail = node.prev;
            },
            moveToFront: function(node) {
                this.remove(node);
                this.add(node);
            }
        });
        function Node(key, val) {
            this.key = key;
            this.val = val;
            this.prev = this.next = null;
        }
        return LruCache;
    }();
    var PersistentStorage = function() {
        "use strict";
        var LOCAL_STORAGE;
        try {
            LOCAL_STORAGE = window.localStorage;
            LOCAL_STORAGE.setItem("~~~", "!");
            LOCAL_STORAGE.removeItem("~~~");
        } catch (err) {
            LOCAL_STORAGE = null;
        }
        function PersistentStorage(namespace, override) {
            this.prefix = [ "__", namespace, "__" ].join("");
            this.ttlKey = "__ttl__";
            this.keyMatcher = new RegExp("^" + _.escapeRegExChars(this.prefix));
            this.ls = override || LOCAL_STORAGE;
            if (!this.ls || !window.JSON) {
                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;
            }
        }
        _.mixin(PersistentStorage.prototype, {
            _prefix: function(key) {
                return this.prefix + key;
            },
            _ttlKey: function(key) {
                return this._prefix(key) + this.ttlKey;
            },
            get: function(key) {
                if (this.isExpired(key)) {
                    this.remove(key);
                }
                return decode(this.ls.getItem(this._prefix(key)));
            },
            set: function(key, val, ttl) {
                if (_.isNumber(ttl)) {
                    this.ls.setItem(this._ttlKey(key), encode(now() + ttl));
                } else {
                    this.ls.removeItem(this._ttlKey(key));
                }
                return this.ls.setItem(this._prefix(key), encode(val));
            },
            remove: function(key) {
                this.ls.removeItem(this._ttlKey(key));
                this.ls.removeItem(this._prefix(key));
                return this;
            },
            clear: function() {
                var i, key, keys = [], len = this.ls.length;
                for (i = 0; i < len; i++) {
                    if ((key = this.ls.key(i)).match(this.keyMatcher)) {
                        keys.push(key.replace(this.keyMatcher, ""));
                    }
                }
                for (i = keys.length; i--; ) {
                    this.remove(keys[i]);
                }
                return this;
            },
            isExpired: function(key) {
                var ttl = decode(this.ls.getItem(this._ttlKey(key)));
                return _.isNumber(ttl) && now() > ttl ? true : false;
            }
        });
        return PersistentStorage;
        function now() {
            return new Date().getTime();
        }
        function encode(val) {
            return JSON.stringify(_.isUndefined(val) ? null : val);
        }
        function decode(val) {
            return $.parseJSON(val);
        }
    }();
    var Transport = function() {
        "use strict";
        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);
        function Transport(o) {
            o = o || {};
            this.cancelled = false;
            this.lastReq = null;
            this._send = o.transport;
            this._get = o.limiter ? o.limiter(this._get) : this._get;
            this._cache = o.cache === false ? new LruCache(0) : sharedCache;
        }
        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {
            maxPendingRequests = num;
        };
        Transport.resetCache = function resetCache() {
            sharedCache.reset();
        };
        _.mixin(Transport.prototype, {
            _fingerprint: function fingerprint(o) {
                o = o || {};
                return o.url + o.type + $.param(o.data || {});
            },
            _get: function(o, cb) {
                var that = this, fingerprint, jqXhr;
                fingerprint = this._fingerprint(o);
                if (this.cancelled || fingerprint !== this.lastReq) {
                    return;
                }
                if (jqXhr = pendingRequests[fingerprint]) {
                    jqXhr.done(done).fail(fail);
                } else if (pendingRequestsCount < maxPendingRequests) {
                    pendingRequestsCount++;
                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);
                } else {
                    this.onDeckRequestArgs = [].slice.call(arguments, 0);
                }
                function done(resp) {
                    cb(null, resp);
                    that._cache.set(fingerprint, resp);
                }
                function fail() {
                    cb(true);
                }
                function always() {
                    pendingRequestsCount--;
                    delete pendingRequests[fingerprint];
                    if (that.onDeckRequestArgs) {
                        that._get.apply(that, that.onDeckRequestArgs);
                        that.onDeckRequestArgs = null;
                    }
                }
            },
            get: function(o, cb) {
                var resp, fingerprint;
                cb = cb || $.noop;
                o = _.isString(o) ? {
                    url: o
                } : o || {};
                fingerprint = this._fingerprint(o);
                this.cancelled = false;
                this.lastReq = fingerprint;
                if (resp = this._cache.get(fingerprint)) {
                    cb(null, resp);
                } else {
                    this._get(o, cb);
                }
            },
            cancel: function() {
                this.cancelled = true;
            }
        });
        return Transport;
    }();
    var SearchIndex = window.SearchIndex = function() {
        "use strict";
        var CHILDREN = "c", IDS = "i";
        function SearchIndex(o) {
            o = o || {};
            if (!o.datumTokenizer || !o.queryTokenizer) {
                $.error("datumTokenizer and queryTokenizer are both required");
            }
            this.identify = o.identify || _.stringify;
            this.datumTokenizer = o.datumTokenizer;
            this.queryTokenizer = o.queryTokenizer;
            this.reset();
        }
        _.mixin(SearchIndex.prototype, {
            bootstrap: function bootstrap(o) {
                this.datums = o.datums;
                this.trie = o.trie;
            },
            add: function(data) {
                var that = this;
                data = _.isArray(data) ? data : [ data ];
                _.each(data, function(datum) {
                    var id, tokens;
                    that.datums[id = that.identify(datum)] = datum;
                    tokens = normalizeTokens(that.datumTokenizer(datum));
                    _.each(tokens, function(token) {
                        var node, chars, ch;
                        node = that.trie;
                        chars = token.split("");
                        while (ch = chars.shift()) {
                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());
                            node[IDS].push(id);
                        }
                    });
                });
            },
            get: function get(ids) {
                var that = this;
                return _.map(ids, function(id) {
                    return that.datums[id];
                });
            },
            search: function search(query) {
                var that = this, tokens, matches;
                tokens = normalizeTokens(this.queryTokenizer(query));
                _.each(tokens, function(token) {
                    var node, chars, ch, ids;
                    if (matches && matches.length === 0) {
                        return false;
                    }
                    node = that.trie;
                    chars = token.split("");
                    while (node && (ch = chars.shift())) {
                        node = node[CHILDREN][ch];
                    }
                    if (node && chars.length === 0) {
                        ids = node[IDS].slice(0);
                        matches = matches ? getIntersection(matches, ids) : ids;
                    } else {
                        matches = [];
                        return false;
                    }
                });
                return matches ? _.map(unique(matches), function(id) {
                    return that.datums[id];
                }) : [];
            },
            all: function all() {
                var values = [];
                for (var key in this.datums) {
                    values.push(this.datums[key]);
                }
                return values;
            },
            reset: function reset() {
                this.datums = {};
                this.trie = newNode();
            },
            serialize: function serialize() {
                return {
                    datums: this.datums,
                    trie: this.trie
                };
            }
        });
        return SearchIndex;
        function normalizeTokens(tokens) {
            tokens = _.filter(tokens, function(token) {
                return !!token;
            });
            tokens = _.map(tokens, function(token) {
                return token.toLowerCase();
            });
            return tokens;
        }
        function newNode() {
            var node = {};
            node[IDS] = [];
            node[CHILDREN] = {};
            return node;
        }
        function unique(array) {
            var seen = {}, uniques = [];
            for (var i = 0, len = array.length; i < len; i++) {
                if (!seen[array[i]]) {
                    seen[array[i]] = true;
                    uniques.push(array[i]);
                }
            }
            return uniques;
        }
        function getIntersection(arrayA, arrayB) {
            var ai = 0, bi = 0, intersection = [];
            arrayA = arrayA.sort();
            arrayB = arrayB.sort();
            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;
            while (ai < lenArrayA && bi < lenArrayB) {
                if (arrayA[ai] < arrayB[bi]) {
                    ai++;
                } else if (arrayA[ai] > arrayB[bi]) {
                    bi++;
                } else {
                    intersection.push(arrayA[ai]);
                    ai++;
                    bi++;
                }
            }
            return intersection;
        }
    }();
    var Prefetch = function() {
        "use strict";
        var keys;
        keys = {
            data: "data",
            protocol: "protocol",
            thumbprint: "thumbprint"
        };
        function Prefetch(o) {
            this.url = o.url;
            this.ttl = o.ttl;
            this.cache = o.cache;
            this.transform = o.transform;
            this.transport = o.transport;
            this.thumbprint = o.thumbprint;
            this.storage = new PersistentStorage(o.cacheKey);
        }
        _.mixin(Prefetch.prototype, {
            _settings: function settings() {
                return {
                    url: this.url,
                    type: "GET",
                    dataType: "json"
                };
            },
            store: function store(data) {
                if (!this.cache) {
                    return;
                }
                this.storage.set(keys.data, data, this.ttl);
                this.storage.set(keys.protocol, location.protocol, this.ttl);
                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);
            },
            fromCache: function fromCache() {
                var stored = {}, isExpired;
                if (!this.cache) {
                    return null;
                }
                stored.data = this.storage.get(keys.data);
                stored.protocol = this.storage.get(keys.protocol);
                stored.thumbprint = this.storage.get(keys.thumbprint);
                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;
                return stored.data && !isExpired ? stored.data : null;
            },
            fromNetwork: function(cb) {
                var that = this;
                if (!cb) {
                    return;
                }
                this.transport(this._settings()).fail(onError).done(onResponse);
                function onError() {
                    cb(true);
                }
                function onResponse(resp) {
                    cb(null, that.transform(resp));
                }
            },
            clear: function clear() {
                this.storage.clear();
                return this;
            }
        });
        return Prefetch;
    }();
    var Remote = function() {
        "use strict";
        function Remote(o) {
            this.url = o.url;
            this.prepare = o.prepare;
            this.transform = o.transform;
            this.transport = new Transport({
                cache: o.cache,
                limiter: o.limiter,
                transport: o.transport
            });
        }
        _.mixin(Remote.prototype, {
            _settings: function settings() {
                return {
                    url: this.url,
                    type: "GET",
                    dataType: "json"
                };
            },
            get: function get(query, cb) {
                var that = this, settings;
                if (!cb) {
                    return;
                }
                query = query || "";
                settings = this.prepare(query, this._settings());
                return this.transport.get(settings, onResponse);
                function onResponse(err, resp) {
                    err ? cb([]) : cb(that.transform(resp));
                }
            },
            cancelLastRequest: function cancelLastRequest() {
                this.transport.cancel();
            }
        });
        return Remote;
    }();
    var oParser = function() {
        "use strict";
        return function parse(o) {
            var defaults, sorter;
            defaults = {
                initialize: true,
                identify: _.stringify,
                datumTokenizer: null,
                queryTokenizer: null,
                sufficient: 5,
                sorter: null,
                local: [],
                prefetch: null,
                remote: null
            };
            o = _.mixin(defaults, o || {});
            !o.datumTokenizer && $.error("datumTokenizer is required");
            !o.queryTokenizer && $.error("queryTokenizer is required");
            sorter = o.sorter;
            o.sorter = sorter ? function(x) {
                return x.sort(sorter);
            } : _.identity;
            o.local = _.isFunction(o.local) ? o.local() : o.local;
            o.prefetch = parsePrefetch(o.prefetch);
            o.remote = parseRemote(o.remote);
            return o;
        };
        function parsePrefetch(o) {
            var defaults;
            if (!o) {
                return null;
            }
            defaults = {
                url: null,
                ttl: 24 * 60 * 60 * 1e3,
                cache: true,
                cacheKey: null,
                thumbprint: "",
                transform: _.identity,
                transport: null
            };
            o = _.isString(o) ? {
                url: o
            } : o;
            o = _.mixin(defaults, o);
            !o.url && $.error("prefetch requires url to be set");
            o.transform = o.filter || o.transform;
            o.cacheKey = o.cacheKey || o.url;
            o.thumbprint = VERSION + o.thumbprint;
            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
            return o;
        }
        function parseRemote(o) {
            var defaults;
            if (!o) {
                return;
            }
            defaults = {
                url: null,
                cache: true,
                prepare: null,
                replace: null,
                wildcard: null,
                limiter: null,
                rateLimitBy: "debounce",
                rateLimitWait: 300,
                transform: _.identity,
                transport: null
            };
            o = _.isString(o) ? {
                url: o
            } : o;
            o = _.mixin(defaults, o);
            !o.url && $.error("remote requires url to be set");
            o.transform = o.filter || o.transform;
            o.prepare = toPrepare(o);
            o.limiter = toLimiter(o);
            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;
            delete o.replace;
            delete o.wildcard;
            delete o.rateLimitBy;
            delete o.rateLimitWait;
            return o;
        }
        function toPrepare(o) {
            var prepare, replace, wildcard;
            prepare = o.prepare;
            replace = o.replace;
            wildcard = o.wildcard;
            if (prepare) {
                return prepare;
            }
            if (replace) {
                prepare = prepareByReplace;
            } else if (o.wildcard) {
                prepare = prepareByWildcard;
            } else {
                prepare = idenityPrepare;
            }
            return prepare;
            function prepareByReplace(query, settings) {
                settings.url = replace(settings.url, query);
                return settings;
            }
            function prepareByWildcard(query, settings) {
                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));
                return settings;
            }
            function idenityPrepare(query, settings) {
                return settings;
            }
        }
        function toLimiter(o) {
            var limiter, method, wait;
            limiter = o.limiter;
            method = o.rateLimitBy;
            wait = o.rateLimitWait;
            if (!limiter) {
                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);
            }
            return limiter;
            function debounce(wait) {
                return function debounce(fn) {
                    return _.debounce(fn, wait);
                };
            }
            function throttle(wait) {
                return function throttle(fn) {
                    return _.throttle(fn, wait);
                };
            }
        }
        function callbackToDeferred(fn) {
            return function wrapper(o) {
                var deferred = $.Deferred();
                fn(o, onSuccess, onError);
                return deferred;
                function onSuccess(resp) {
                    _.defer(function() {
                        deferred.resolve(resp);
                    });
                }
                function onError(err) {
                    _.defer(function() {
                        deferred.reject(err);
                    });
                }
            };
        }
    }();
    var Bloodhound = function() {
        "use strict";
        var old;
        old = window && window.Bloodhound;
        function Bloodhound(o) {
            o = oParser(o);
            this.sorter = o.sorter;
            this.identify = o.identify;
            this.sufficient = o.sufficient;
            this.local = o.local;
            this.remote = o.remote ? new Remote(o.remote) : null;
            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;
            this.index = new SearchIndex({
                identify: this.identify,
                datumTokenizer: o.datumTokenizer,
                queryTokenizer: o.queryTokenizer
            });
            o.initialize !== false && this.initialize();
        }
        Bloodhound.noConflict = function noConflict() {
            window && (window.Bloodhound = old);
            return Bloodhound;
        };
        Bloodhound.tokenizers = tokenizers;
        _.mixin(Bloodhound.prototype, {
            __ttAdapter: function ttAdapter() {
                var that = this;
                return this.remote ? withAsync : withoutAsync;
                function withAsync(query, sync, async) {
                    return that.search(query, sync, async);
                }
                function withoutAsync(query, sync) {
                    return that.search(query, sync);
                }
            },
            _loadPrefetch: function loadPrefetch() {
                var that = this, deferred, serialized;
                deferred = $.Deferred();
                if (!this.prefetch) {
                    deferred.resolve();
                } else if (serialized = this.prefetch.fromCache()) {
                    this.index.bootstrap(serialized);
                    deferred.resolve();
                } else {
                    this.prefetch.fromNetwork(done);
                }
                return deferred.promise();
                function done(err, data) {
                    if (err) {
                        return deferred.reject();
                    }
                    that.add(data);
                    that.prefetch.store(that.index.serialize());
                    deferred.resolve();
                }
            },
            _initialize: function initialize() {
                var that = this, deferred;
                this.clear();
                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);
                return this.initPromise;
                function addLocalToIndex() {
                    that.add(that.local);
                }
            },
            initialize: function initialize(force) {
                return !this.initPromise || force ? this._initialize() : this.initPromise;
            },
            add: function add(data) {
                this.index.add(data);
                return this;
            },
            get: function get(ids) {
                ids = _.isArray(ids) ? ids : [].slice.call(arguments);
                return this.index.get(ids);
            },
            search: function search(query, sync, async) {
                var that = this, local;
                local = this.sorter(this.index.search(query));
                sync(this.remote ? local.slice() : local);
                if (this.remote && local.length < this.sufficient) {
                    this.remote.get(query, processRemote);
                } else if (this.remote) {
                    this.remote.cancelLastRequest();
                }
                return this;
                function processRemote(remote) {
                    var nonDuplicates = [];
                    _.each(remote, function(r) {
                        !_.some(local, function(l) {
                            return that.identify(r) === that.identify(l);
                        }) && nonDuplicates.push(r);
                    });
                    async && async(nonDuplicates);
                }
            },
            all: function all() {
                return this.index.all();
            },
            clear: function clear() {
                this.index.reset();
                return this;
            },
            clearPrefetchCache: function clearPrefetchCache() {
                this.prefetch && this.prefetch.clear();
                return this;
            },
            clearRemoteCache: function clearRemoteCache() {
                Transport.resetCache();
                return this;
            },
            ttAdapter: function ttAdapter() {
                return this.__ttAdapter();
            }
        });
        return Bloodhound;
    }();
    return Bloodhound;
});

(function(root, factory) {
    if (typeof define === "function" && define.amd) {
        define("typeahead.js", [ "jquery" ], function(a0) {
            return factory(a0);
        });
    } else if (typeof exports === "object") {
        module.exports = factory(require("jquery"));
    } else {
        factory(jQuery);
    }
})(this, function($) {
    var _ = function() {
        "use strict";
        return {
            isMsie: function() {
                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2] : false;
            },
            isBlankString: function(str) {
                return !str || /^\s*$/.test(str);
            },
            escapeRegExChars: function(str) {
                return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
            },
            isString: function(obj) {
                return typeof obj === "string";
            },
            isNumber: function(obj) {
                return typeof obj === "number";
            },
            isArray: $.isArray,
            isFunction: $.isFunction,
            isObject: $.isPlainObject,
            isUndefined: function(obj) {
                return typeof obj === "undefined";
            },
            isElement: function(obj) {
                return !!(obj && obj.nodeType === 1);
            },
            isJQuery: function(obj) {
                return obj instanceof $;
            },
            toStr: function toStr(s) {
                return _.isUndefined(s) || s === null ? "" : s + "";
            },
            bind: $.proxy,
            each: function(collection, cb) {
                $.each(collection, reverseArgs);
                function reverseArgs(index, value) {
                    return cb(value, index);
                }
            },
            map: $.map,
            filter: $.grep,
            every: function(obj, test) {
                var result = true;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (!(result = test.call(null, val, key, obj))) {
                        return false;
                    }
                });
                return !!result;
            },
            some: function(obj, test) {
                var result = false;
                if (!obj) {
                    return result;
                }
                $.each(obj, function(key, val) {
                    if (result = test.call(null, val, key, obj)) {
                        return false;
                    }
                });
                return !!result;
            },
            mixin: $.extend,
            identity: function(x) {
                return x;
            },
            clone: function(obj) {
                return $.extend(true, {}, obj);
            },
            getIdGenerator: function() {
                var counter = 0;
                return function() {
                    return counter++;
                };
            },
            templatify: function templatify(obj) {
                return $.isFunction(obj) ? obj : template;
                function template() {
                    return String(obj);
                }
            },
            defer: function(fn) {
                setTimeout(fn, 0);
            },
            debounce: function(func, wait, immediate) {
                var timeout, result;
                return function() {
                    var context = this, args = arguments, later, callNow;
                    later = function() {
                        timeout = null;
                        if (!immediate) {
                            result = func.apply(context, args);
                        }
                    };
                    callNow = immediate && !timeout;
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                    if (callNow) {
                        result = func.apply(context, args);
                    }
                    return result;
                };
            },
            throttle: function(func, wait) {
                var context, args, timeout, result, previous, later;
                previous = 0;
                later = function() {
                    previous = new Date();
                    timeout = null;
                    result = func.apply(context, args);
                };
                return function() {
                    var now = new Date(), remaining = wait - (now - previous);
                    context = this;
                    args = arguments;
                    if (remaining <= 0) {
                        clearTimeout(timeout);
                        timeout = null;
                        previous = now;
                        result = func.apply(context, args);
                    } else if (!timeout) {
                        timeout = setTimeout(later, remaining);
                    }
                    return result;
                };
            },
            stringify: function(val) {
                return _.isString(val) ? val : JSON.stringify(val);
            },
            noop: function() {}
        };
    }();
    var WWW = function() {
        "use strict";
        var defaultClassNames = {
            wrapper: "twitter-typeahead",
            input: "tt-input",
            hint: "tt-hint",
            menu: "tt-menu",
            dataset: "tt-dataset",
            suggestion: "tt-suggestion",
            selectable: "tt-selectable",
            empty: "tt-empty",
            open: "tt-open",
            cursor: "tt-cursor",
            highlight: "tt-highlight"
        };
        return build;
        function build(o) {
            var www, classes;
            classes = _.mixin({}, defaultClassNames, o);
            www = {
                css: buildCss(),
                classes: classes,
                html: buildHtml(classes),
                selectors: buildSelectors(classes)
            };
            return {
                css: www.css,
                html: www.html,
                classes: www.classes,
                selectors: www.selectors,
                mixin: function(o) {
                    _.mixin(o, www);
                }
            };
        }
        function buildHtml(c) {
            return {
                wrapper: '<span class="' + c.wrapper + '"></span>',
                menu: '<div class="' + c.menu + '"></div>'
            };
        }
        function buildSelectors(classes) {
            var selectors = {};
            _.each(classes, function(v, k) {
                selectors[k] = "." + v;
            });
            return selectors;
        }
        function buildCss() {
            var css = {
                wrapper: {
                    position: "relative",
                    display: "inline-block"
                },
                hint: {
                    position: "absolute",
                    top: "0",
                    left: "0",
                    borderColor: "transparent",
                    boxShadow: "none",
                    opacity: "1"
                },
                input: {
                    position: "relative",
                    verticalAlign: "top",
                    backgroundColor: "transparent"
                },
                inputWithNoHint: {
                    position: "relative",
                    verticalAlign: "top"
                },
                menu: {
                    position: "absolute",
                    top: "100%",
                    left: "0",
                    zIndex: "100",
                    display: "none"
                },
                ltr: {
                    left: "0",
                    right: "auto"
                },
                rtl: {
                    left: "auto",
                    right: " 0"
                }
            };
            if (_.isMsie()) {
                _.mixin(css.input, {
                    backgroundImage: "url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"
                });
            }
            return css;
        }
    }();
    var EventBus = function() {
        "use strict";
        var namespace, deprecationMap;
        namespace = "typeahead:";
        deprecationMap = {
            render: "rendered",
            cursorchange: "cursorchanged",
            select: "selected",
            autocomplete: "autocompleted"
        };
        function EventBus(o) {
            if (!o || !o.el) {
                $.error("EventBus initialized without el");
            }
            this.$el = $(o.el);
        }
        _.mixin(EventBus.prototype, {
            _trigger: function(type, args) {
                var $e;
                $e = $.Event(namespace + type);
                (args = args || []).unshift($e);
                this.$el.trigger.apply(this.$el, args);
                return $e;
            },
            before: function(type) {
                var args, $e;
                args = [].slice.call(arguments, 1);
                $e = this._trigger("before" + type, args);
                return $e.isDefaultPrevented();
            },
            trigger: function(type) {
                var deprecatedType;
                this._trigger(type, [].slice.call(arguments, 1));
                if (deprecatedType = deprecationMap[type]) {
                    this._trigger(deprecatedType, [].slice.call(arguments, 1));
                }
            }
        });
        return EventBus;
    }();
    var EventEmitter = function() {
        "use strict";
        var splitter = /\s+/, nextTick = getNextTick();
        return {
            onSync: onSync,
            onAsync: onAsync,
            off: off,
            trigger: trigger
        };
        function on(method, types, cb, context) {
            var type;
            if (!cb) {
                return this;
            }
            types = types.split(splitter);
            cb = context ? bindContext(cb, context) : cb;
            this._callbacks = this._callbacks || {};
            while (type = types.shift()) {
                this._callbacks[type] = this._callbacks[type] || {
                    sync: [],
                    async: []
                };
                this._callbacks[type][method].push(cb);
            }
            return this;
        }
        function onAsync(types, cb, context) {
            return on.call(this, "async", types, cb, context);
        }
        function onSync(types, cb, context) {
            return on.call(this, "sync", types, cb, context);
        }
        function off(types) {
            var type;
            if (!this._callbacks) {
                return this;
            }
            types = types.split(splitter);
            while (type = types.shift()) {
                delete this._callbacks[type];
            }
            return this;
        }
        function trigger(types) {
            var type, callbacks, args, syncFlush, asyncFlush;
            if (!this._callbacks) {
                return this;
            }
            types = types.split(splitter);
            args = [].slice.call(arguments, 1);
            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {
                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));
                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));
                syncFlush() && nextTick(asyncFlush);
            }
            return this;
        }
        function getFlush(callbacks, context, args) {
            return flush;
            function flush() {
                var cancelled;
                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {
                    cancelled = callbacks[i].apply(context, args) === false;
                }
                return !cancelled;
            }
        }
        function getNextTick() {
            var nextTickFn;
            if (window.setImmediate) {
                nextTickFn = function nextTickSetImmediate(fn) {
                    setImmediate(function() {
                        fn();
                    });
                };
            } else {
                nextTickFn = function nextTickSetTimeout(fn) {
                    setTimeout(function() {
                        fn();
                    }, 0);
                };
            }
            return nextTickFn;
        }
        function bindContext(fn, context) {
            return fn.bind ? fn.bind(context) : function() {
                fn.apply(context, [].slice.call(arguments, 0));
            };
        }
    }();
    var highlight = function(doc) {
        "use strict";
        var defaults = {
            node: null,
            pattern: null,
            tagName: "strong",
            className: null,
            wordsOnly: false,
            caseSensitive: false
        };
        return function hightlight(o) {
            var regex;
            o = _.mixin({}, defaults, o);
            if (!o.node || !o.pattern) {
                return;
            }
            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];
            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);
            traverse(o.node, hightlightTextNode);
            function hightlightTextNode(textNode) {
                var match, patternNode, wrapperNode;
                if (match = regex.exec(textNode.data)) {
                    wrapperNode = doc.createElement(o.tagName);
                    o.className && (wrapperNode.className = o.className);
                    patternNode = textNode.splitText(match.index);
                    patternNode.splitText(match[0].length);
                    wrapperNode.appendChild(patternNode.cloneNode(true));
                    textNode.parentNode.replaceChild(wrapperNode, patternNode);
                }
                return !!match;
            }
            function traverse(el, hightlightTextNode) {
                var childNode, TEXT_NODE_TYPE = 3;
                for (var i = 0; i < el.childNodes.length; i++) {
                    childNode = el.childNodes[i];
                    if (childNode.nodeType === TEXT_NODE_TYPE) {
                        i += hightlightTextNode(childNode) ? 1 : 0;
                    } else {
                        traverse(childNode, hightlightTextNode);
                    }
                }
            }
        };
        function getRegex(patterns, caseSensitive, wordsOnly) {
            var escapedPatterns = [], regexStr;
            for (var i = 0, len = patterns.length; i < len; i++) {
                escapedPatterns.push(_.escapeRegExChars(patterns[i]));
            }
            regexStr = wordsOnly ? "\\b(" + escapedPatterns.join("|") + ")\\b" : "(" + escapedPatterns.join("|") + ")";
            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, "i");
        }
    }(window.document);
    var Input = function() {
        "use strict";
        var specialKeyCodeMap;
        specialKeyCodeMap = {
            9: "tab",
            27: "esc",
            37: "left",
            39: "right",
            13: "enter",
            38: "up",
            40: "down"
        };
        function Input(o, www) {
            o = o || {};
            if (!o.input) {
                $.error("input is missing");
            }
            www.mixin(this);
            this.$hint = $(o.hint);
            this.$input = $(o.input);
            this.query = this.$input.val();
            this.queryWhenFocused = this.hasFocus() ? this.query : null;
            this.$overflowHelper = buildOverflowHelper(this.$input);
            this._checkLanguageDirection();
            if (this.$hint.length === 0) {
                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;
            }
        }
        Input.normalizeQuery = function(str) {
            return (str || "").replace(/^\s*/g, "").replace(/\s{2,}/g, " ");
        };
        _.mixin(Input.prototype, EventEmitter, {
            _onBlur: function onBlur() {
                this.resetInputValue();
                this.trigger("blurred");
            },
            _onFocus: function onFocus() {
                this.queryWhenFocused = this.query;
                this.trigger("focused");
            },
            _onKeydown: function onKeydown($e) {
                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];
                this._managePreventDefault(keyName, $e);
                if (keyName && this._shouldTrigger(keyName, $e)) {
                    this.trigger(keyName + "Keyed", $e);
                }
            },
            _onInput: function onInput() {
                this._setQuery(this.getInputValue());
                this.clearHintIfInvalid();
                this._checkLanguageDirection();
            },
            _managePreventDefault: function managePreventDefault(keyName, $e) {
                var preventDefault;
                switch (keyName) {
                  case "up":
                  case "down":
                    preventDefault = !withModifier($e);
                    break;

                  default:
                    preventDefault = false;
                }
                preventDefault && $e.preventDefault();
            },
            _shouldTrigger: function shouldTrigger(keyName, $e) {
                var trigger;
                switch (keyName) {
                  case "tab":
                    trigger = !withModifier($e);
                    break;

                  default:
                    trigger = true;
                }
                return trigger;
            },
            _checkLanguageDirection: function checkLanguageDirection() {
                var dir = (this.$input.css("direction") || "ltr").toLowerCase();
                if (this.dir !== dir) {
                    this.dir = dir;
                    this.$hint.attr("dir", dir);
                    this.trigger("langDirChanged", dir);
                }
            },
            _setQuery: function setQuery(val, silent) {
                var areEquivalent, hasDifferentWhitespace;
                areEquivalent = areQueriesEquivalent(val, this.query);
                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;
                this.query = val;
                if (!silent && !areEquivalent) {
                    this.trigger("queryChanged", this.query);
                } else if (!silent && hasDifferentWhitespace) {
                    this.trigger("whitespaceChanged", this.query);
                }
            },
            bind: function() {
                var that = this, onBlur, onFocus, onKeydown, onInput;
                onBlur = _.bind(this._onBlur, this);
                onFocus = _.bind(this._onFocus, this);
                onKeydown = _.bind(this._onKeydown, this);
                onInput = _.bind(this._onInput, this);
                this.$input.on("blur.tt", onBlur).on("focus.tt", onFocus).on("keydown.tt", onKeydown);
                if (!_.isMsie() || _.isMsie() > 9) {
                    this.$input.on("input.tt", onInput);
                } else {
                    this.$input.on("keydown.tt keypress.tt cut.tt paste.tt", function($e) {
                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {
                            return;
                        }
                        _.defer(_.bind(that._onInput, that, $e));
                    });
                }
                return this;
            },
            focus: function focus() {
                this.$input.focus();
            },
            blur: function blur() {
                this.$input.blur();
            },
            getLangDir: function getLangDir() {
                return this.dir;
            },
            getQuery: function getQuery() {
                return this.query || "";
            },
            setQuery: function setQuery(val, silent) {
                this.setInputValue(val);
                this._setQuery(val, silent);
            },
            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {
                return this.query !== this.queryWhenFocused;
            },
            getInputValue: function getInputValue() {
                return this.$input.val();
            },
            setInputValue: function setInputValue(value) {
                this.$input.val(value);
                this.clearHintIfInvalid();
                this._checkLanguageDirection();
            },
            resetInputValue: function resetInputValue() {
                this.setInputValue(this.query);
            },
            getHint: function getHint() {
                return this.$hint.val();
            },
            setHint: function setHint(value) {
                this.$hint.val(value);
            },
            clearHint: function clearHint() {
                this.setHint("");
            },
            clearHintIfInvalid: function clearHintIfInvalid() {
                var val, hint, valIsPrefixOfHint, isValid;
                val = this.getInputValue();
                hint = this.getHint();
                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;
                isValid = val !== "" && valIsPrefixOfHint && !this.hasOverflow();
                !isValid && this.clearHint();
            },
            hasFocus: function hasFocus() {
                return this.$input.is(":focus");
            },
            hasOverflow: function hasOverflow() {
                var constraint = this.$input.width() - 2;
                this.$overflowHelper.text(this.getInputValue());
                return this.$overflowHelper.width() >= constraint;
            },
            isCursorAtEnd: function() {
                var valueLength, selectionStart, range;
                valueLength = this.$input.val().length;
                selectionStart = this.$input[0].selectionStart;
                if (_.isNumber(selectionStart)) {
                    return selectionStart === valueLength;
                } else if (document.selection) {
                    range = document.selection.createRange();
                    range.moveStart("character", -valueLength);
                    return valueLength === range.text.length;
                }
                return true;
            },
            destroy: function destroy() {
                this.$hint.off(".tt");
                this.$input.off(".tt");
                this.$overflowHelper.remove();
                this.$hint = this.$input = this.$overflowHelper = null;
            }
        });
        return Input;
        function buildOverflowHelper($input) {
            return $('<pre aria-hidden="true"></pre>').css({
                position: "absolute",
                visibility: "hidden",
                whiteSpace: "pre",
                fontFamily: $input.css("font-family"),
                fontSize: $input.css("font-size"),
                fontStyle: $input.css("font-style"),
                fontVariant: $input.css("font-variant"),
                fontWeight: $input.css("font-weight"),
                wordSpacing: $input.css("word-spacing"),
                letterSpacing: $input.css("letter-spacing"),
                textIndent: $input.css("text-indent"),
                textRendering: $input.css("text-rendering"),
                textTransform: $input.css("text-transform")
            }).insertAfter($input);
        }
        function areQueriesEquivalent(a, b) {
            return Input.normalizeQuery(a) === Input.normalizeQuery(b);
        }
        function withModifier($e) {
            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;
        }
    }();
    var Dataset = function() {
        "use strict";
        var keys, nameGenerator;
        keys = {
            val: "tt-selectable-display",
            obj: "tt-selectable-object"
        };
        nameGenerator = _.getIdGenerator();
        function Dataset(o, www) {
            o = o || {};
            o.templates = o.templates || {};
            o.templates.notFound = o.templates.notFound || o.templates.empty;
            if (!o.source) {
                $.error("missing source");
            }
            if (!o.node) {
                $.error("missing node");
            }
            if (o.name && !isValidName(o.name)) {
                $.error("invalid dataset name: " + o.name);
            }
            www.mixin(this);
            this.highlight = !!o.highlight;
            this.name = o.name || nameGenerator();
            this.limit = o.limit || 5;
            this.displayFn = getDisplayFn(o.display || o.displayKey);
            this.templates = getTemplates(o.templates, this.displayFn);
            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;
            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;
            this._resetLastSuggestion();
            this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + "-" + this.name);
        }
        Dataset.extractData = function extractData(el) {
            var $el = $(el);
            if ($el.data(keys.obj)) {
                return {
                    val: $el.data(keys.val) || "",
                    obj: $el.data(keys.obj) || null
                };
            }
            return null;
        };
        _.mixin(Dataset.prototype, EventEmitter, {
            _overwrite: function overwrite(query, suggestions) {
                suggestions = suggestions || [];
                if (suggestions.length) {
                    this._renderSuggestions(query, suggestions);
                } else if (this.async && this.templates.pending) {
                    this._renderPending(query);
                } else if (!this.async && this.templates.notFound) {
                    this._renderNotFound(query);
                } else {
                    this._empty();
                }
                this.trigger("rendered", this.name, suggestions, false);
            },
            _append: function append(query, suggestions) {
                suggestions = suggestions || [];
                if (suggestions.length && this.$lastSuggestion.length) {
                    this._appendSuggestions(query, suggestions);
                } else if (suggestions.length) {
                    this._renderSuggestions(query, suggestions);
                } else if (!this.$lastSuggestion.length && this.templates.notFound) {
                    this._renderNotFound(query);
                }
                this.trigger("rendered", this.name, suggestions, true);
            },
            _renderSuggestions: function renderSuggestions(query, suggestions) {
                var $fragment;
                $fragment = this._getSuggestionsFragment(query, suggestions);
                this.$lastSuggestion = $fragment.children().last();
                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));
            },
            _appendSuggestions: function appendSuggestions(query, suggestions) {
                var $fragment, $lastSuggestion;
                $fragment = this._getSuggestionsFragment(query, suggestions);
                $lastSuggestion = $fragment.children().last();
                this.$lastSuggestion.after($fragment);
                this.$lastSuggestion = $lastSuggestion;
            },
            _renderPending: function renderPending(query) {
                var template = this.templates.pending;
                this._resetLastSuggestion();
                template && this.$el.html(template({
                    query: query,
                    dataset: this.name
                }));
            },
            _renderNotFound: function renderNotFound(query) {
                var template = this.templates.notFound;
                this._resetLastSuggestion();
                template && this.$el.html(template({
                    query: query,
                    dataset: this.name
                }));
            },
            _empty: function empty() {
                this.$el.empty();
                this._resetLastSuggestion();
            },
            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {
                var that = this, fragment;
                fragment = document.createDocumentFragment();
                _.each(suggestions, function getSuggestionNode(suggestion) {
                    var $el, context;
                    context = that._injectQuery(query, suggestion);
                    $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + " " + that.classes.selectable);
                    fragment.appendChild($el[0]);
                });
                this.highlight && highlight({
                    className: this.classes.highlight,
                    node: fragment,
                    pattern: query
                });
                return $(fragment);
            },
            _getFooter: function getFooter(query, suggestions) {
                return this.templates.footer ? this.templates.footer({
                    query: query,
                    suggestions: suggestions,
                    dataset: this.name
                }) : null;
            },
            _getHeader: function getHeader(query, suggestions) {
                return this.templates.header ? this.templates.header({
                    query: query,
                    suggestions: suggestions,
                    dataset: this.name
                }) : null;
            },
            _resetLastSuggestion: function resetLastSuggestion() {
                this.$lastSuggestion = $();
            },
            _injectQuery: function injectQuery(query, obj) {
                return _.isObject(obj) ? _.mixin({
                    _query: query
                }, obj) : obj;
            },
            update: function update(query) {
                var that = this, canceled = false, syncCalled = false, rendered = 0;
                this.cancel();
                this.cancel = function cancel() {
                    canceled = true;
                    that.cancel = $.noop;
                    that.async && that.trigger("asyncCanceled", query);
                };
                this.source(query, sync, async);
                !syncCalled && sync([]);
                function sync(suggestions) {
                    if (syncCalled) {
                        return;
                    }
                    syncCalled = true;
                    suggestions = (suggestions || []).slice(0, that.limit);
                    rendered = suggestions.length;
                    that._overwrite(query, suggestions);
                    if (rendered < that.limit && that.async) {
                        that.trigger("asyncRequested", query);
                    }
                }
                function async(suggestions) {
                    suggestions = suggestions || [];
                    if (!canceled && rendered < that.limit) {
                        that.cancel = $.noop;
                        rendered += suggestions.length;
                        that._append(query, suggestions.slice(0, that.limit - rendered));
                        that.async && that.trigger("asyncReceived", query);
                    }
                }
            },
            cancel: $.noop,
            clear: function clear() {
                this._empty();
                this.cancel();
                this.trigger("cleared");
            },
            isEmpty: function isEmpty() {
                return this.$el.is(":empty");
            },
            destroy: function destroy() {
                this.$el = null;
            }
        });
        return Dataset;
        function getDisplayFn(display) {
            display = display || _.stringify;
            return _.isFunction(display) ? display : displayFn;
            function displayFn(obj) {
                return obj[display];
            }
        }
        function getTemplates(templates, displayFn) {
            return {
                notFound: templates.notFound && _.templatify(templates.notFound),
                pending: templates.pending && _.templatify(templates.pending),
                header: templates.header && _.templatify(templates.header),
                footer: templates.footer && _.templatify(templates.footer),
                suggestion: templates.suggestion || suggestionTemplate
            };
            function suggestionTemplate(context) {
                return "<div><p>" + displayFn(context) + "</p></div>";
            }
        }
        function isValidName(str) {
            return /^[_a-zA-Z0-9-]+$/.test(str);
        }
    }();
    var Menu = function() {
        "use strict";
        function Menu(o, www) {
            var that = this;
            o = o || {};
            if (!o.node) {
                $.error("node is required");
            }
            www.mixin(this);
            this.$node = $(o.node);
            this.query = null;
            this.datasets = _.map(o.datasets, initializeDataset);
            function initializeDataset(oDataset) {
                var node = that.$node.find(oDataset.node).first();
                oDataset.node = node.length ? node : $("<div>").appendTo(that.$node);
                return new Dataset(oDataset, www);
            }
        }
        _.mixin(Menu.prototype, EventEmitter, {
            _onSelectableClick: function onSelectableClick($e) {
                this.trigger("selectableClicked", $($e.currentTarget));
            },
            _onRendered: function onRendered(type, dataset, suggestions, async) {
                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());
                this.trigger("datasetRendered", dataset, suggestions, async);
            },
            _onCleared: function onCleared() {
                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());
                this.trigger("datasetCleared");
            },
            _propagate: function propagate() {
                this.trigger.apply(this, arguments);
            },
            _allDatasetsEmpty: function allDatasetsEmpty() {
                return _.every(this.datasets, isDatasetEmpty);
                function isDatasetEmpty(dataset) {
                    return dataset.isEmpty();
                }
            },
            _getSelectables: function getSelectables() {
                return this.$node.find(this.selectors.selectable);
            },
            _removeCursor: function _removeCursor() {
                var $selectable = this.getActiveSelectable();
                $selectable && $selectable.removeClass(this.classes.cursor);
            },
            _ensureVisible: function ensureVisible($el) {
                var elTop, elBottom, nodeScrollTop, nodeHeight;
                elTop = $el.position().top;
                elBottom = elTop + $el.outerHeight(true);
                nodeScrollTop = this.$node.scrollTop();
                nodeHeight = this.$node.height() + parseInt(this.$node.css("paddingTop"), 10) + parseInt(this.$node.css("paddingBottom"), 10);
                if (elTop < 0) {
                    this.$node.scrollTop(nodeScrollTop + elTop);
                } else if (nodeHeight < elBottom) {
                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));
                }
            },
            bind: function() {
                var that = this, onSelectableClick;
                onSelectableClick = _.bind(this._onSelectableClick, this);
                this.$node.on("click.tt", this.selectors.selectable, onSelectableClick);
                _.each(this.datasets, function(dataset) {
                    dataset.onSync("asyncRequested", that._propagate, that).onSync("asyncCanceled", that._propagate, that).onSync("asyncReceived", that._propagate, that).onSync("rendered", that._onRendered, that).onSync("cleared", that._onCleared, that);
                });
                return this;
            },
            isOpen: function isOpen() {
                return this.$node.hasClass(this.classes.open);
            },
            open: function open() {
                this.$node.addClass(this.classes.open);
            },
            close: function close() {
                this.$node.removeClass(this.classes.open);
                this._removeCursor();
            },
            setLanguageDirection: function setLanguageDirection(dir) {
                this.$node.attr("dir", dir);
            },
            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {
                var $selectables, $oldCursor, oldIndex, newIndex;
                $oldCursor = this.getActiveSelectable();
                $selectables = this._getSelectables();
                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;
                newIndex = oldIndex + delta;
                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;
                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;
                return newIndex === -1 ? null : $selectables.eq(newIndex);
            },
            setCursor: function setCursor($selectable) {
                this._removeCursor();
                if ($selectable = $selectable && $selectable.first()) {
                    $selectable.addClass(this.classes.cursor);
                    this._ensureVisible($selectable);
                }
            },
            getSelectableData: function getSelectableData($el) {
                return $el && $el.length ? Dataset.extractData($el) : null;
            },
            getActiveSelectable: function getActiveSelectable() {
                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();
                return $selectable.length ? $selectable : null;
            },
            getTopSelectable: function getTopSelectable() {
                var $selectable = this._getSelectables().first();
                return $selectable.length ? $selectable : null;
            },
            update: function update(query) {
                var isValidUpdate = query !== this.query;
                if (isValidUpdate) {
                    this.query = query;
                    _.each(this.datasets, updateDataset);
                }
                return isValidUpdate;
                function updateDataset(dataset) {
                    dataset.update(query);
                }
            },
            empty: function empty() {
                _.each(this.datasets, clearDataset);
                this.query = null;
                this.$node.addClass(this.classes.empty);
                function clearDataset(dataset) {
                    dataset.clear();
                }
            },
            destroy: function destroy() {
                this.$node.off(".tt");
                this.$node = null;
                _.each(this.datasets, destroyDataset);
                function destroyDataset(dataset) {
                    dataset.destroy();
                }
            }
        });
        return Menu;
    }();
    var DefaultMenu = function() {
        "use strict";
        var s = Menu.prototype;
        function DefaultMenu() {
            Menu.apply(this, [].slice.call(arguments, 0));
        }
        _.mixin(DefaultMenu.prototype, Menu.prototype, {
            open: function open() {
                !this._allDatasetsEmpty() && this._show();
                return s.open.apply(this, [].slice.call(arguments, 0));
            },
            close: function close() {
                this._hide();
                return s.close.apply(this, [].slice.call(arguments, 0));
            },
            _onRendered: function onRendered() {
                if (this._allDatasetsEmpty()) {
                    this._hide();
                } else {
                    this.isOpen() && this._show();
                }
                return s._onRendered.apply(this, [].slice.call(arguments, 0));
            },
            _onCleared: function onCleared() {
                if (this._allDatasetsEmpty()) {
                    this._hide();
                } else {
                    this.isOpen() && this._show();
                }
                return s._onCleared.apply(this, [].slice.call(arguments, 0));
            },
            setLanguageDirection: function setLanguageDirection(dir) {
                this.$node.css(dir === "ltr" ? this.css.ltr : this.css.rtl);
                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));
            },
            _hide: function hide() {
                this.$node.hide();
            },
            _show: function show() {
                this.$node.css("display", "block");
            }
        });
        return DefaultMenu;
    }();
    var Typeahead = function() {
        "use strict";
        function Typeahead(o, www) {
            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;
            o = o || {};
            if (!o.input) {
                $.error("missing input");
            }
            if (!o.menu) {
                $.error("missing menu");
            }
            if (!o.eventBus) {
                $.error("missing event bus");
            }
            www.mixin(this);
            this.eventBus = o.eventBus;
            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;
            this.input = o.input;
            this.menu = o.menu;
            this.enabled = true;
            this.active = false;
            this.input.hasFocus() && this.activate();
            this.dir = this.input.getLangDir();
            this._hacks();
            this.menu.bind().onSync("selectableClicked", this._onSelectableClicked, this).onSync("asyncRequested", this._onAsyncRequested, this).onSync("asyncCanceled", this._onAsyncCanceled, this).onSync("asyncReceived", this._onAsyncReceived, this).onSync("datasetRendered", this._onDatasetRendered, this).onSync("datasetCleared", this._onDatasetCleared, this);
            onFocused = c(this, "activate", "open", "_onFocused");
            onBlurred = c(this, "deactivate", "_onBlurred");
            onEnterKeyed = c(this, "isActive", "isOpen", "_onEnterKeyed");
            onTabKeyed = c(this, "isActive", "isOpen", "_onTabKeyed");
            onEscKeyed = c(this, "isActive", "_onEscKeyed");
            onUpKeyed = c(this, "isActive", "open", "_onUpKeyed");
            onDownKeyed = c(this, "isActive", "open", "_onDownKeyed");
            onLeftKeyed = c(this, "isActive", "isOpen", "_onLeftKeyed");
            onRightKeyed = c(this, "isActive", "isOpen", "_onRightKeyed");
            onQueryChanged = c(this, "_openIfActive", "_onQueryChanged");
            onWhitespaceChanged = c(this, "_openIfActive", "_onWhitespaceChanged");
            this.input.bind().onSync("focused", onFocused, this).onSync("blurred", onBlurred, this).onSync("enterKeyed", onEnterKeyed, this).onSync("tabKeyed", onTabKeyed, this).onSync("escKeyed", onEscKeyed, this).onSync("upKeyed", onUpKeyed, this).onSync("downKeyed", onDownKeyed, this).onSync("leftKeyed", onLeftKeyed, this).onSync("rightKeyed", onRightKeyed, this).onSync("queryChanged", onQueryChanged, this).onSync("whitespaceChanged", onWhitespaceChanged, this).onSync("langDirChanged", this._onLangDirChanged, this);
        }
        _.mixin(Typeahead.prototype, {
            _hacks: function hacks() {
                var $input, $menu;
                $input = this.input.$input || $("<div>");
                $menu = this.menu.$node || $("<div>");
                $input.on("blur.tt", function($e) {
                    var active, isActive, hasActive;
                    active = document.activeElement;
                    isActive = $menu.is(active);
                    hasActive = $menu.has(active).length > 0;
                    if (_.isMsie() && (isActive || hasActive)) {
                        $e.preventDefault();
                        $e.stopImmediatePropagation();
                        _.defer(function() {
                            $input.focus();
                        });
                    }
                });
                $menu.on("mousedown.tt", function($e) {
                    $e.preventDefault();
                });
            },
            _onSelectableClicked: function onSelectableClicked(type, $el) {
                this.select($el);
            },
            _onDatasetCleared: function onDatasetCleared() {
                this._updateHint();
            },
            _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {
                this._updateHint();
                this.eventBus.trigger("render", suggestions, async, dataset);
            },
            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {
                this.eventBus.trigger("asyncrequest", query, dataset);
            },
            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {
                this.eventBus.trigger("asynccancel", query, dataset);
            },
            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {
                this.eventBus.trigger("asyncreceive", query, dataset);
            },
            _onFocused: function onFocused() {
                this._minLengthMet() && this.menu.update(this.input.getQuery());
            },
            _onBlurred: function onBlurred() {
                if (this.input.hasQueryChangedSinceLastFocus()) {
                    this.eventBus.trigger("change", this.input.getQuery());
                }
            },
            _onEnterKeyed: function onEnterKeyed(type, $e) {
                var $selectable;
                if ($selectable = this.menu.getActiveSelectable()) {
                    this.select($selectable) && $e.preventDefault();
                }
            },
            _onTabKeyed: function onTabKeyed(type, $e) {
                var $selectable;
                if ($selectable = this.menu.getActiveSelectable()) {
                    this.select($selectable) && $e.preventDefault();
                } else if ($selectable = this.menu.getTopSelectable()) {
                    this.autocomplete($selectable) && $e.preventDefault();
                }
            },
            _onEscKeyed: function onEscKeyed() {
                this.close();
            },
            _onUpKeyed: function onUpKeyed() {
                this.moveCursor(-1);
            },
            _onDownKeyed: function onDownKeyed() {
                this.moveCursor(+1);
            },
            _onLeftKeyed: function onLeftKeyed() {
                if (this.dir === "rtl" && this.input.isCursorAtEnd()) {
                    this.autocomplete(this.menu.getTopSelectable());
                }
            },
            _onRightKeyed: function onRightKeyed() {
                if (this.dir === "ltr" && this.input.isCursorAtEnd()) {
                    this.autocomplete(this.menu.getTopSelectable());
                }
            },
            _onQueryChanged: function onQueryChanged(e, query) {
                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();
            },
            _onWhitespaceChanged: function onWhitespaceChanged() {
                this._updateHint();
            },
            _onLangDirChanged: function onLangDirChanged(e, dir) {
                if (this.dir !== dir) {
                    this.dir = dir;
                    this.menu.setLanguageDirection(dir);
                }
            },
            _openIfActive: function openIfActive() {
                this.isActive() && this.open();
            },
            _minLengthMet: function minLengthMet(query) {
                query = _.isString(query) ? query : this.input.getQuery() || "";
                return query.length >= this.minLength;
            },
            _updateHint: function updateHint() {
                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;
                $selectable = this.menu.getTopSelectable();
                data = this.menu.getSelectableData($selectable);
                val = this.input.getInputValue();
                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {
                    query = Input.normalizeQuery(val);
                    escapedQuery = _.escapeRegExChars(query);
                    frontMatchRegEx = new RegExp("^(?:" + escapedQuery + ")(.+$)", "i");
                    match = frontMatchRegEx.exec(data.val);
                    match && this.input.setHint(val + match[1]);
                } else {
                    this.input.clearHint();
                }
            },
            isEnabled: function isEnabled() {
                return this.enabled;
            },
            enable: function enable() {
                this.enabled = true;
            },
            disable: function disable() {
                this.enabled = false;
            },
            isActive: function isActive() {
                return this.active;
            },
            activate: function activate() {
                if (this.isActive()) {
                    return true;
                } else if (!this.isEnabled() || this.eventBus.before("active")) {
                    return false;
                } else {
                    this.active = true;
                    this.eventBus.trigger("active");
                    return true;
                }
            },
            deactivate: function deactivate() {
                if (!this.isActive()) {
                    return true;
                } else if (this.eventBus.before("idle")) {
                    return false;
                } else {
                    this.active = false;
                    this.close();
                    this.eventBus.trigger("idle");
                    return true;
                }
            },
            isOpen: function isOpen() {
                return this.menu.isOpen();
            },
            open: function open() {
                if (!this.isOpen() && !this.eventBus.before("open")) {
                    this.menu.open();
                    this._updateHint();
                    this.eventBus.trigger("open");
                }
                return this.isOpen();
            },
            close: function close() {
                if (this.isOpen() && !this.eventBus.before("close")) {
                    this.menu.close();
                    this.input.clearHint();
                    this.input.resetInputValue();
                    this.eventBus.trigger("close");
                }
                return !this.isOpen();
            },
            setVal: function setVal(val) {
                this.input.setQuery(_.toStr(val));
            },
            getVal: function getVal() {
                return this.input.getQuery();
            },
            select: function select($selectable) {
                var data = this.menu.getSelectableData($selectable);
                if (data && !this.eventBus.before("select", data.obj)) {
                    this.input.setQuery(data.val, true);
                    this.eventBus.trigger("select", data.obj);
                    this.close();
                    return true;
                }
                return false;
            },
            autocomplete: function autocomplete($selectable) {
                var query, data, isValid;
                query = this.input.getQuery();
                data = this.menu.getSelectableData($selectable);
                isValid = data && query !== data.val;
                if (isValid && !this.eventBus.before("autocomplete", data.obj)) {
                    this.input.setQuery(data.val);
                    this.eventBus.trigger("autocomplete", data.obj);
                    return true;
                }
                return false;
            },
            moveCursor: function moveCursor(delta) {
                var query, $candidate, data, payload, cancelMove;
                query = this.input.getQuery();
                $candidate = this.menu.selectableRelativeToCursor(delta);
                data = this.menu.getSelectableData($candidate);
                payload = data ? data.obj : null;
                cancelMove = this._minLengthMet() && this.menu.update(query);
                if (!cancelMove && !this.eventBus.before("cursorchange", payload)) {
                    this.menu.setCursor($candidate);
                    if (data) {
                        this.input.setInputValue(data.val);
                    } else {
                        this.input.resetInputValue();
                        this._updateHint();
                    }
                    this.eventBus.trigger("cursorchange", payload);
                    return true;
                }
                return false;
            },
            destroy: function destroy() {
                this.input.destroy();
                this.menu.destroy();
            }
        });
        return Typeahead;
        function c(ctx) {
            var methods = [].slice.call(arguments, 1);
            return function() {
                var args = [].slice.call(arguments);
                _.each(methods, function(method) {
                    return ctx[method].apply(ctx, args);
                });
            };
        }
    }();
    (function() {
        "use strict";
        var old, keys, methods;
        old = $.fn.typeahead;
        keys = {
            www: "tt-www",
            attrs: "tt-attrs",
            typeahead: "tt-typeahead"
        };
        methods = {
            initialize: function initialize(o, datasets) {
                var www;
                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);
                o = o || {};
                www = WWW(o.classNames);
                return this.each(attach);
                function attach() {
                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;
                    _.each(datasets, function(d) {
                        d.highlight = !!o.highlight;
                    });
                    $input = $(this);
                    $wrapper = $(www.html.wrapper);
                    $hint = $elOrNull(o.hint);
                    $menu = $elOrNull(o.menu);
                    defaultHint = o.hint !== false && !$hint;
                    defaultMenu = o.menu !== false && !$menu;
                    defaultHint && ($hint = buildHintFromInput($input, www));
                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));
                    $hint && $hint.val("");
                    $input = prepInput($input, www);
                    if (defaultHint || defaultMenu) {
                        $wrapper.css(www.css.wrapper);
                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);
                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);
                    }
                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;
                    eventBus = new EventBus({
                        el: $input
                    });
                    input = new Input({
                        hint: $hint,
                        input: $input
                    }, www);
                    menu = new MenuConstructor({
                        node: $menu,
                        datasets: datasets
                    }, www);
                    typeahead = new Typeahead({
                        input: input,
                        menu: menu,
                        eventBus: eventBus,
                        minLength: o.minLength
                    }, www);
                    $input.data(keys.www, www);
                    $input.data(keys.typeahead, typeahead);
                }
            },
            isEnabled: function isEnabled() {
                var enabled;
                ttEach(this.first(), function(t) {
                    enabled = t.isEnabled();
                });
                return enabled;
            },
            enable: function enable() {
                ttEach(this, function(t) {
                    t.enable();
                });
                return this;
            },
            disable: function disable() {
                ttEach(this, function(t) {
                    t.disable();
                });
                return this;
            },
            isActive: function isActive() {
                var active;
                ttEach(this.first(), function(t) {
                    active = t.isActive();
                });
                return active;
            },
            activate: function activate() {
                ttEach(this, function(t) {
                    t.activate();
                });
                return this;
            },
            deactivate: function deactivate() {
                ttEach(this, function(t) {
                    t.deactivate();
                });
                return this;
            },
            isOpen: function isOpen() {
                var open;
                ttEach(this.first(), function(t) {
                    open = t.isOpen();
                });
                return open;
            },
            open: function open() {
                ttEach(this, function(t) {
                    t.open();
                });
                return this;
            },
            close: function close() {
                ttEach(this, function(t) {
                    t.close();
                });
                return this;
            },
            select: function select(el) {
                var success = false, $el = $(el);
                ttEach(this.first(), function(t) {
                    success = t.select($el);
                });
                return success;
            },
            autocomplete: function autocomplete(el) {
                var success = false, $el = $(el);
                ttEach(this.first(), function(t) {
                    success = t.autocomplete($el);
                });
                return success;
            },
            moveCursor: function moveCursoe(delta) {
                var success = false;
                ttEach(this.first(), function(t) {
                    success = t.moveCursor(delta);
                });
                return success;
            },
            val: function val(newVal) {
                var query;
                if (!arguments.length) {
                    ttEach(this.first(), function(t) {
                        query = t.getVal();
                    });
                    return query;
                } else {
                    ttEach(this, function(t) {
                        t.setVal(newVal);
                    });
                    return this;
                }
            },
            destroy: function destroy() {
                ttEach(this, function(typeahead, $input) {
                    revert($input);
                    typeahead.destroy();
                });
                return this;
            }
        };
        $.fn.typeahead = function(method) {
            if (methods[method]) {
                return methods[method].apply(this, [].slice.call(arguments, 1));
            } else {
                return methods.initialize.apply(this, arguments);
            }
        };
        $.fn.typeahead.noConflict = function noConflict() {
            $.fn.typeahead = old;
            return this;
        };
        function ttEach($els, fn) {
            $els.each(function() {
                var $input = $(this), typeahead;
                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);
            });
        }
        function buildHintFromInput($input, www) {
            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop("readonly", true).removeAttr("id name placeholder required").attr({
                autocomplete: "off",
                spellcheck: "false",
                tabindex: -1
            });
        }
        function prepInput($input, www) {
            $input.data(keys.attrs, {
                dir: $input.attr("dir"),
                autocomplete: $input.attr("autocomplete"),
                spellcheck: $input.attr("spellcheck"),
                style: $input.attr("style")
            });
            $input.addClass(www.classes.input).attr({
                autocomplete: "off",
                spellcheck: false
            });
            try {
                !$input.attr("dir") && $input.attr("dir", "auto");
            } catch (e) {}
            return $input;
        }
        function getBackgroundStyles($el) {
            return {
                backgroundAttachment: $el.css("background-attachment"),
                backgroundClip: $el.css("background-clip"),
                backgroundColor: $el.css("background-color"),
                backgroundImage: $el.css("background-image"),
                backgroundOrigin: $el.css("background-origin"),
                backgroundPosition: $el.css("background-position"),
                backgroundRepeat: $el.css("background-repeat"),
                backgroundSize: $el.css("background-size")
            };
        }
        function revert($input) {
            var www, $wrapper;
            www = $input.data(keys.www);
            $wrapper = $input.parent().filter(www.selectors.wrapper);
            _.each($input.data(keys.attrs), function(val, key) {
                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);
            });
            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);
            if ($wrapper.length) {
                $input.detach().insertAfter($wrapper);
                $wrapper.remove();
            }
        }
        function $elOrNull(obj) {
            var isValid, $el;
            isValid = _.isJQuery(obj) || _.isElement(obj);
            $el = isValid ? $(obj).first() : [];
            return $el.length ? $el : null;
        }
    })();
});
},{"jquery":25}],98:[function(require,module,exports){
(function (global){
"use strict";

window.proj4 = require('proj4');
global.jQuery = require("jquery");

var $ = require('jquery');
var Viewer = require('./src/viewer');
var mapLoader = require('./src/maploader');
var controlInitialiser = require('./src/controlinitialiser');

var origo = {};
origo.map = {};
origo.config = require('./conf/origoConfig');
origo.controls = require('./conf/origoControls');

origo.map.init = function(options, opt_config) {
  var config = opt_config ? $.extend(origo.config, opt_config) : origo.config;

  var map = mapLoader(options, config);
  if (map) {
    map.then(function(config) {
      init(config);
    })
    return Viewer;
  } else {
    return undefined;
  }
}

function init(config) {
  Viewer.init(config.el, config.options);

  //Init controls
  controlInitialiser(config.options.controls);
}

module.exports = origo;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"./conf/origoConfig":1,"./conf/origoControls":2,"./src/controlinitialiser":102,"./src/maploader":146,"./src/viewer":201,"jquery":25,"proj4":65}],99:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Utils = require('./utils');
var Modal = require('./modal');

var $aboutButton;
var buttonText;
var title;
var content;

function init(opt_options) {
  var options = opt_options || {};
  buttonText = options.buttonText || 'Om kartan';
  title = options.title || 'Om kartan';
  content = options.content || '<p></p>';

  render();
  bindUIActions();
}

function render() {
  var el = Utils.createListButton({
    id: 'o-about',
    iconCls: 'o-icon-fa-info-circle',
    src: 'css/svg/fa-icons.svg#fa-info-circle',
    text: buttonText
  });
  $('#o-menutools').append(el);
  $aboutButton = $('#o-about-button');
}

function bindUIActions() {
  $aboutButton.on('click', function(e) {
    Modal.createModal('#o-map', {
      title: title,
      content: content
    });

    Modal.showModal();
    e.preventDefault();
  });
}

module.exports.init = init;

},{"./modal":150,"./utils":185,"jquery":25}],100:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var breakPoint = options.breakPoint || [768, 500];
  var attribution;
  map = Viewer.getMap();

  attribution = new ol.control.Attribution({
    collapsible: false
  });

  map.addControl(attribution);

  $(window).on('resize', checkSize);
  checkSize();

  function checkSize() {
    var mapSize = map.getSize();
    var collapsed = (mapSize[0] <= breakPoint[0] || mapSize[1] <= breakPoint[1]);
    attribution.setCollapsible(collapsed);
    attribution.setCollapsed(collapsed);
  }
}

module.exports.init = Init;

},{"./viewer":201,"jquery":25,"openlayers":28}],101:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<svg width='32px' height='32px' xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\" class=\"uil-ripple\">\r\n  <rect x=\"0\" y=\"0\" width=\"100\" height=\"100\" fill=\"none\" class=\"bk\"></rect>\r\n  <g>\r\n    <animate attributeName=\"opacity\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"0s\" keyTimes=\"0;0.33;1\" values=\"1;1;0\"></animate>\r\n      <circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"#000000\" fill=\"none\" stroke-width=\"6\" stroke-linecap=\"round\">\r\n        <animate attributeName=\"r\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"0s\" keyTimes=\"0;0.33;1\" values=\"0;22;44\"></animate>\r\n      </circle>\r\n  </g>\r\n      <g>\r\n        <animate attributeName=\"opacity\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"1s\" keyTimes=\"0;0.33;1\" values=\"1;1;0\"></animate>\r\n        <circle cx=\"50\" cy=\"50\" r=\"40\" stroke=\"#000\" fill=\"none\" stroke-width=\"6\" stroke-linecap=\"round\">\r\n          <animate attributeName=\"r\" dur=\"2s\" repeatCount=\"indefinite\" begin=\"1s\" keyTimes=\"0;0.33;1\" values=\"0;22;44\"></animate>\r\n        </circle>\r\n      </g>\r\n</svg>\r\n";
},"useData":true});

},{"hbsfy/runtime":24}],102:[function(require,module,exports){
"use strict";

var controlInitialiser = function(controls) {
    var controlName, controlOptions;
    controls.forEach(function(control) {
        controlName = control.name;
        controlOptions = control.options || undefined;
        if (origo.controls.hasOwnProperty(controlName)) {
            controlOptions ? origo.controls[controlName].init(controlOptions) : origo.controls[controlName].init();
        }
    });
}


module.exports = controlInitialiser;

},{}],103:[function(require,module,exports){
 "use strict";

var $ = require('jquery');
var utils = require('./utils');

module.exports = function(target, items, options) {
  var dataAttribute = 'data-' + options.dataAttribute || 'default';
  var $target = $('#' + target);
  var activeItem = options.active || undefined;
  var activeCls = 'o-active';
  var ul;
  var li = [];
  var cls = 'o-dropdown-li';
  var icon = utils.createSvg({
    href: '#ic_check_24px',
    cls: 'o-icon-24'
  });
  render();
  addListener();

  function render() {
    items.forEach(function(item, index) {
      var obj = {
        cls: cls
      };
      var active = utils.createElement('span', icon, {
        cls: 'o-icon'
      });
      obj[dataAttribute] = item.value;
      if (item.value === activeItem) {
        obj.cls = activeCls;
      }
      li[index] = utils.createElement('li', item.name + active, obj);
    });
    ul = utils.createElement('ul', li.join(''), {
      cls: 'o-dropdown'
    });
    $target.append(ul);
  }

  function addListener() {
    $target.on('click', 'ul', function(e) {
      var $active = $(e.target);
      $target.trigger({
        type: 'changeDropdown',
        dataAttribute: $(e.target).data(options.dataAttribute)
      });
      toggleActive($active);
    });
  }

  function toggleActive($active) {
    $target.find('li').removeClass(activeCls);
    $active.addClass(activeCls);
  }
};

},{"./utils":185,"jquery":25}],104:[function(require,module,exports){
 "use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');
var editorToolbar = require('./editor/editortoolbar');

var $editorButton;

module.exports = function() {

  return {
    init: Init
  };
}();

function Init(opt_options) {
  var options = opt_options || {};
  var editableLayers = viewer.getLayersByProperty('editable', true, true);
  if (editableLayers.length) {
    options.editableLayers = editableLayers;
  }  
  options.autoSave = options.hasOwnProperty('autoSave') ? options.autoSave : true;
  options.autoForm = options.hasOwnProperty('autoForm') ? options.autoForm : false;
  options.currentLayer = options.defaultLayer || options.editableLayers[0];
  editorToolbar.init(options);
  render();
  $editorButton = $('#o-editor-button');
  bindUIActions();
}

function bindUIActions() {
  $editorButton.on('click', function(e) {
    $('.o-map').first().trigger({
      type: 'enableInteraction',
      interaction: 'editor'
    });
    this.blur();
    e.stopPropagation();
    e.preventDefault();
  });
}

function render() {
  var el = utils.createListButton({
    id: 'o-editor',
    iconCls: 'o-icon-fa-pencil',
    src: '#fa-pencil',
    text: 'Redigera'
  });
  $('#o-menutools').append(el);
}

},{"./editor/editortoolbar":112,"./utils":185,"./viewer":201,"jquery":25}],105:[function(require,module,exports){
/* ========================================================================
 * Copyright 2016 Origo
 * Licensed under BSD 2-Clause (https://github.com/origo-map/origo/blob/master/LICENSE.txt)
 * ======================================================================== */
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var editsStore = require('./editsstore')();
var dispatcher = require('./editDispatcher');

var format = new ol.format.EsriJSON();
var urlSuffix = {
  update: 'updateFeatures',
  insert: 'addFeatures',
  delete: 'deleteFeatures'
};

module.exports = function(transObj, layerName) {
  agsTransaction(transObj, layerName);
}

function writeAgsTransaction(features, options) {
  var data = {};

  if (options.type === 'delete') {
    var objectIds = features.map(function(feature) {
      return feature.getId();
    });
    data.objectIds = objectIds.join(',');
  } else {
    var agsFeatures = features.map(function(feature) {
      return format.writeFeature(feature, {
        featureProjection: options.projection
      });
    });
    data.features = '[' + agsFeatures + ']';
  }
  data.f = 'json';
  return data;
}

function agsTransaction(transObj, layerName) {
  var projection = viewer.getProjection();
  var layer = viewer.getLayer(layerName);
  var id = layer.get('id');
  var source = viewer.getMapSource()[layer.get('sourceName')];
  var types = Object.getOwnPropertyNames(transObj);
  var cb = {
    update: updateSuccess,
    insert: insertSuccess,
    delete: deleteSuccess
  };
  types.forEach(function(type) {
    if (transObj[type]) {
      var url = source.url  + '/' + id + '/' + urlSuffix[type];
      var datat = writeAgsTransaction(transObj[type], {
        projection: projection,
        type: type
      });
      $.ajax({
        type: "POST",
        url: url,
        data: datat,
        success: cb[type],
        error: error,
        context: this
      });
    }
  });

  function updateSuccess(data) {
    var feature = transObj.update;
    var result = JSON.parse(data);
    if (result) {
      if (result.updateResults.length > 0) {
        result.updateResults.forEach(function(update, index) {
          if (update.success !== true) {
            throwServerError(update.error);
          } else {
            dispatcher.emitChangeFeature({
              feature: [feature[index]],
              layerName: layerName,
              status: 'finished',
              action: 'update'
            });
          }
        });
      }
    } else {
      error();
    }
  }

  function insertSuccess(data) {
    var feature = transObj.insert;
    var result = JSON.parse(data);
    if (result) {
      if (result.addResults.length > 0) {
        result.addResults.forEach(function(insert, index) {
          if (insert.success !== true) {
            throwServerError(insert.error);
          } else {
            dispatcher.emitChangeFeature({
              feature: [feature[index]],
              layerName: layerName,
              status: 'finished',
              action: 'insert'
            });
            feature[index].set('objectId',insert.objectId);
            feature[index].setId(insert.objectId);
          }
        });
      }
    } else {
      error();
    }
  }

  function deleteSuccess(data) {
    var feature = transObj.delete;
    var result = JSON.parse(data);
    if (result) {
      if (result.deleteResults.length > 0) {
        result.deleteResults.forEach(function(deleted, index) {
          if (deleted.success !== true) {
            throwServerError(deleted.error);
          } else {
            dispatcher.emitChangeFeature({
              feature: [feature[index]],
              layerName: layerName,
              status: 'finished',
              action: 'delete'
            });
          }
        });
      }
    } else {
      error();
    }
  }

  function error(e) {
    var errorMsg = e ? (e.status + ' ' + e.statusText) : "";
    alert('Det inträffade ett fel när ändringarna skulle sparas till servern...<br><br>' +
      errorMsg);
  }

  function throwServerError(error) {
    alert(error.description + ' (' + error.code + ')');
  }
}

},{"../viewer":201,"./editDispatcher":107,"./editsstore":113,"jquery":25,"openlayers":28}],106:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('../viewer');
var dropDown = require('../dropdown');
var dispatcher = require('./editdispatcher');
var createElement = require('../utils').createElement;

module.exports = function drawTools(tools, defaultLayer) {
  var toolNames = {
    Polygon: 'Polygon',
    Point: 'Punkt',
    Line: 'Linje',
    box: 'Rektangel'
  };
  var defaultTools = tools || {};
  var drawTools = undefined;
  var currentLayer = defaultLayer;
  var map = viewer.getMap();
  var active = false;
  var activeCls = 'o-active';
  var target = 'editor-toolbar-draw-dropdown';
  render();
  addListener();

  function render() {
    var popover = createElement('div', '', {
      id: target,
      cls: 'o-popover'
    });
    $('#' + 'o-editor-draw').after(popover);
    setActive(false);
  }

  function addDropDown(options) {
    dropDown(options.target, options.selectOptions, {
      dataAttribute: 'shape',
      active: options.activeTool
    });
    $('#' + target).on('changeDropdown', function(e) {
      e.stopImmediatePropagation(e);
      dispatcher.emitChangeEditorShapes(e.dataAttribute);
      close();
    });
  }

  function addListener() {
    $(document).on('changeEdit', onChangeEdit);
    $(document).on('toggleEdit', onToggleEdit);
  }

  function setActive(state) {
    if (state) {
      if (drawTools.length > 1) {
        active = true;
        $('#' + target + ' ul').remove();
        addDropDown(createDropDownOptions());
        $('#' + target).addClass(activeCls);
        map.once('click', close);
      }
    } else {
      active = false;
      $('#' + target).removeClass(activeCls);
      map.un('click', close);
    }
  }

  function close() {
    if (active) {
      setActive(false);
    }
  }

  function onChangeEdit(e) {
    if (e.tool === 'draw' && e.active === true) {
      setDrawTools(currentLayer);
      setActive(true);
    } else if (e.tool === 'draw' && e.active === false) {
      setActive(false);
    }
    e.stopPropagation();
  }

  function onToggleEdit(e) {
    if (e.tool === 'edit' && e.currentLayer) {
      currentLayer = e.currentLayer;
    }
    e.stopPropagation();
  }

  function setDrawTools(layerName) {
    var layer = viewer.getLayer(layerName);
    var geometryType;
    drawTools = layer.get('drawTools') || [];
    if (layer.get('drawTools')) {
      drawTools = layer.get('drawTools');
    } else {
      geometryType = layer.get('geometryType');
      drawTools = defaultTools[geometryType] ? defaultTools[geometryType].slice(0) : [];
      drawTools.unshift(geometryType);
    }
  }

  function createDropDownOptions() {
    return {
      target: target,
      selectOptions: selectionModel(drawTools),
      activeTool: drawTools[0]
    };
  }

  function selectionModel(drawTools) {
    var selectOptions = drawTools.map(function(drawTool) {
      var obj = {};
      obj.name = toolNames[drawTool];
      obj.value = drawTool;
      return obj;
    });
    return selectOptions;
  }
}

},{"../dropdown":103,"../utils":185,"../viewer":201,"./editdispatcher":108,"jquery":25}],107:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = {
  emitChangeEdit: emitChangeEdit,
  emitChangeFeature: emitChangeFeature,
  emitToggleEdit: emitToggleEdit,
  emitEnableInteraction: emitEnableInteraction,
  emitEditsChange: emitEditsChange,
  emitChangeEditorShapes: emitChangeEditorShapes,
  emitChangeOfflineEdits: emitChangeOfflineEdits
}

function emitChangeEdit(tool, state) {
  $.event.trigger({
    type: 'changeEdit',
    tool: tool,
    active: state
  });
}

function emitChangeFeature(change) {
  $.event.trigger({
    type: 'changeFeature',
    feature: change.feature,
    layerName: change.layerName,
    action: change.action,
    status: change.status || 'pending'
  });
}

function emitToggleEdit(tool, opt_options) {
  var options = opt_options || {};
  var e = {
    type: 'toggleEdit',
    tool: tool
  };
  $.extend(e, options);
  $.event.trigger(e);
}

function emitEnableInteraction() {
  $.event.trigger({
    type: 'enableInteraction',
    interaction: 'editor'
  });
}

function emitEditsChange(edits) {
  $.event.trigger({
    type: 'editsChange',
    edits: edits
  });
}

function emitChangeEditorShapes(shape) {
  $.event.trigger({
    type: 'editorShapes',
    shape: shape
  });
}

function emitChangeOfflineEdits(edits, layerName) {
  $.event.trigger({
    type: 'changeOfflineEdits',
    edits: edits,
    layerName: layerName
  });
}

},{"jquery":25}],108:[function(require,module,exports){
arguments[4][107][0].apply(exports,arguments)
},{"dup":107,"jquery":25}],109:[function(require,module,exports){
"use strict";

module.exports = function createForm(obj) {
  var id = obj.elId.slice(1);
  var cls = obj.cls || '';
  cls += id;
  cls += obj.isVisible ? "" : " o-hidden";
  var label = obj.title;
  var val = obj.isVisible ? obj.val : '';
  var type = obj.type;
  var maxLength = obj.maxLength ? ' maxlength="' + obj.maxLength + '" ' : '';
  var dropdownOptions = obj.options || [];
  var el;
  var checked;
  var firstOption;
  switch (type) {
    case 'text':
      el = '<div><label>' + label + '</label><br><input type="text" id="' + id + '" value="' + val + '"' + maxLength + '></div>';
      break;
    case 'textarea':
      el = '<div><label>' + label + '</label><br><textarea id="' + id + '"' + maxLength + 'rows="3">' + val + '</textarea></div>';
      break;
    case 'checkbox':
      checked = val ? ' checked' : '';
      el = '<div class="o-form-checkbox"><label>' + label + '</label><input type="checkbox" id="' + id + '" value="' + val + '"' + checked + '></div>';
      break;
    case 'dropdown':
      firstOption;
      if (val) {
        firstOption = '<option value="' + val + '" selected>' + val + '</option>';
      } else {
        firstOption = '<option value="" selected>Välj</option>';
      }
      el = '<div class="' + cls + '"><label>' + label + '</label><br><select id=' + id + '>' + firstOption;
      for (var i = 0; i < dropdownOptions.length; i++) {
        el += '<option value="' + dropdownOptions[i] + '">' + dropdownOptions[i] + '</option>';
      }
      el += '</select></div>';
      break;
    case 'image':
      var imageClass = val ? '' : 'o-hidden';
      el = '<div class="' + cls + '"><label>' + label + '</label><br>';
      el += '<img src="' + val + '" id="image-upload" class="' + imageClass + '"/>';
      el += '<input type="file" id="' + id + '" value="' + val + '" accept="image/*">';
      el += '<input id="o-delete-image-button" class="' + imageClass + '" type="button" value="Ta bort bild">';
      el += '</div>';
      break;
  }
  return el;
}

},{}],110:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var modal = require('../modal');
var featureInfo = require('../featureinfo');
var editsStore = require('./editsstore')();
var generateUUID = require('../utils/generateuuid');
var transactionHandler = require('./transactionhandler');
var dispatcher = require('./editdispatcher');
var editForm = require('./editform');
var imageresizer = require('../utils/imageresizer');
var getImageOrientation = require('../utils/getimageorientation');
var shapes = require('./shapes');

var editLayers = {};
var autoSave = undefined;
var autoForm = undefined;
var editSource = undefined;
var geometryType = undefined;
var geometryName = undefined;
var map = undefined;
var currentLayer = undefined;
var editableLayers = undefined;
var attributes = undefined;
var title = undefined;
var draw = undefined;
var hasDraw = undefined;
var hasAttribute = undefined;
var hasSnap = undefined;
var select = undefined;
var modify = undefined;
var snap = undefined;
var tools = undefined;

module.exports = function(options) {
  map = viewer.getMap();
  currentLayer = options.currentLayer;
  editableLayers = options.editableLayers;
  tools = options.drawTools || [];

  //set edit properties for editable layers
  editLayers = setEditProps(options);
  editableLayers.forEach(function(layerName) {
    var layer = viewer.getLayer(layerName);
    verifyLayer(layerName);
    if (layerName === currentLayer && options.isActive) {
      dispatcher.emitEnableInteraction();
      setEditLayer(layerName);
    }
  });

  autoSave = options.autoSave;
  autoForm = options.autoForm;
  $(document).on('toggleEdit', onToggleEdit);
  $(document).on('changeEdit', onChangeEdit);
  $(document).on('editorShapes', onChangeShape);
}

function setEditLayer(layerName) {
  currentLayer = layerName;
  setInteractions();
}

function setInteractions(drawType) {
  var editLayer = editLayers[currentLayer];
  var drawOptions;
  editSource = editLayer.getSource();
  attributes = editLayer.get('attributes');
  title = editLayer.get('title') || 'Information';
  drawOptions = {
    source: editSource,
    type: editLayer.get('geometryType'),
    geometryName: editLayer.get('geometryName')
  };
  if (drawType) {
    $.extend(drawOptions, shapes(drawType));
  }
  removeInteractions();
  draw = new ol.interaction.Draw(drawOptions);
  hasDraw = false;
  hasAttribute = false;
  select = new ol.interaction.Select({
    layers: [editLayer]
  });
  modify = new ol.interaction.Modify({
    features: select.getFeatures()
  });
  map.addInteraction(select);
  map.addInteraction(modify);
  map.addInteraction(draw);
  modify.on('modifyend', onModifyEnd, this);
  draw.on('drawend', onDrawEnd, this);
  setActive();

  //If snap should be active then add snap internactions for all snap layers
  hasSnap = editLayer.get('snap');
  if (hasSnap) {
    var selectionSource = featureInfo.getSelectionLayer().getSource();
    var snapSources = editLayer.get('snapLayers') ? getSnapSources(editLayer.get('snapLayers')) : [editLayer.get('source')];
    snapSources.push(selectionSource);
    snap = addSnapInteraction(snapSources);
  }
}

function verifyLayer(layerName) {
  if (!(editLayers[layerName].get('geometryType'))) {
    addFeatureAddListener(layerName);
  }
}

function setGeometryProps(layer) {
  var layerName = layer.get('name');
  editLayers[layerName].set('geometryType', layer.getSource().getFeatures()[0].getGeometry().getType());
  if (layerName === currentLayer) {
    setEditLayer(layerName);
  }
}

function addFeatureAddListener(layerName) {
  var layer = viewer.getLayer(layerName);
  layer.getSource().once('addfeature', function(e) {
    setGeometryProps(layer);
  });
}

function setEditProps(options) {
  var initialValue = {};
  var result = editableLayers.reduce(function(layerProps, layerName) {
    var layer = viewer.getLayer(layerName);
    var snap = options.hasOwnProperty('snap') ? options.snap : true;
    var snapLayers = options.snapLayers || editableLayers;
    layer.set('snap', snap);
    layer.set('snapLayers', snapLayers);
    layerProps[layerName] = layer;
    return layerProps;
  }, initialValue);
  return result;
}

function isActive() {
  if (modify === undefined || select === undefined) {
    return false;
  } else {
    return true;
  }
}

function onDeleteSelected() {
  var features = select.getFeatures();

  // Make sure all features are loaded in the source
  editSource = editLayers[currentLayer].getSource();
  if (features.getLength() === 1) {
    var feature = features.item(0);
    var r = confirm('Är du säker på att du vill ta bort det här objektet?');
    if (r === true) {
      saveFeature({
        feature: feature,
        layerName: currentLayer,
        action: 'delete'
      });
      select.getFeatures().clear();
      editSource.removeFeature(editSource.getFeatureById(feature.getId()));
    }
  }
}

function onModifyEnd(evt) {
  var feature = evt.features.item(0);
  saveFeature({
    feature: feature,
    layerName: currentLayer,
    action: 'update'
  });
}

function onDrawEnd(evt) {
  var feature = evt.feature;
  var layer = viewer.getLayer(currentLayer);
  var attributes = getDefaultValues(layer.get('attributes'));
  feature.setProperties(attributes);
  feature.setId(generateUUID());
  editSource.addFeature(feature);
  setActive();
  hasDraw = false;
  saveFeature({
    feature: feature,
    layerName: currentLayer,
    action: 'insert'
  });
  dispatcher.emitChangeEdit('draw', false);
  if (autoForm) {
    editAttributes(feature);
  }
}

function cancelDraw() {
  setActive();
  hasDraw = false;
  dispatcher.emitChangeEdit('draw', false);
}

function onChangeShape(e) {
  setInteractions(e.shape);
  startDraw();
}

function cancelAttribute() {
  modal.closeModal();
  dispatcher.emitChangeEdit('attribute', false);
}

function onAttributesSave(feature, attributes) {
  $('#o-save-button').on('click', function(e) {
    var editEl = {};
    var fileReader;
    var imageData;
    var input;
    var file;
    var orientation;

    //Read values from form
    attributes.forEach(function(attribute) {

      //Get the input container class
      var containerClass = '.' + attribute.elId.slice(1);

      // If hidden element it should be excluded
      if ($(containerClass).hasClass('o-hidden') === false) {

        //Check if checkbox. If checkbox read state.
        if ($(attribute.elId).attr('type') === 'checkbox') {
          editEl[attribute.name] = $(attribute.elId).is(':checked') ? 1 : 0;
        }

        //Read value from input text, textarea or select
        else {
          editEl[attribute.name] = $(attribute.elId).val();
        }
      }

      //Check if file. If file, read and trigger resize
      if ($(attribute.elId).attr('type') === 'file') {
        input = $(attribute.elId)[0];
        file = input.files[0];

        if (file) {
          fileReader = new FileReader();
          fileReader.onload = function() {
            getImageOrientation(file, function(orientation) {
              imageresizer(fileReader.result, attribute, orientation, function(resized) {
                editEl[attribute.name] = resized;
                $(document).trigger('imageresized');
              });
            });
          }

          fileReader.readAsDataURL(file);
        } else {
          editEl[attribute.name] = $(attribute.elId).attr('value');
        }
      }
    });

    if (fileReader && fileReader.readyState == 1) {
      $(document).on('imageresized', function() {
        attributesSaveHandler(feature, editEl);
      });
    } else {
      attributesSaveHandler(feature, editEl);
    }

    modal.closeModal();
    $('#o-save-button').blur();
    e.preventDefault();
  });
}

function attributesSaveHandler(feature, formEl) {

  //get DOM values and set attribute values to feature
  attributes.forEach(function(attribute) {
    if (formEl.hasOwnProperty(attribute.name)) {
      feature.set(attribute.name, formEl[attribute.name]);
    }
  });
  saveFeature({
    feature: feature,
    layerName: currentLayer,
    action: 'update'
  });
}

function removeInteractions() {
  if (isActive()) {
    map.removeInteraction(modify);
    map.removeInteraction(select);
    map.removeInteraction(draw);
    if (snap) {
      snap.forEach(function(snapInteraction) {
        map.removeInteraction(snapInteraction);
      });
    }

    modify = undefined;
    select = undefined;
    draw = undefined;
    snap = undefined;
  }
}

function startDraw() {
  if (hasDraw !== true && isActive()) {
    setActive('draw');
    hasDraw = true;
    dispatcher.emitChangeEdit('draw', true);
  }
}

function addListener() {
  var fn = function(obj) {
    $(obj.elDependencyId).on(obj.eventType, function(e) {
      var containerClass = '.' + obj.elId.slice(1);
      if ($(obj.elDependencyId + (' option:selected')).text() === obj.requiredVal) {
        $(containerClass).removeClass('o-hidden');
      } else {
        $(containerClass).addClass('o-hidden');
      }
    });
  }

  return fn;
}

function addImageListener() {
  var fn = function(obj) {
    var fileReader = new FileReader();
    var containerClass = '.' + obj.elId.slice(1);
    $(obj.elId).on('change', function(e) {
      $(containerClass + ' img').removeClass('o-hidden');
      $(containerClass + ' input[type=button]').removeClass('o-hidden');

      if (this.files && this.files[0]) {
        fileReader.onload = function (e) {
          $(containerClass + ' img').attr('src', e.target.result);
        };

        fileReader.readAsDataURL(this.files[0]);
      }
    });

    $(containerClass + ' input[type=button]').on('click', function(e) {
      $(obj.elId).attr('value', '');
      $(containerClass + ' img').addClass('o-hidden');
      $(this).addClass('o-hidden');
    });
  }

  return fn;
}

function onToggleEdit(e) {
  e.stopPropagation();
  if (e.tool === 'draw') {
    if (hasDraw === false) {
      setInteractions();
      startDraw();
    } else {
      cancelDraw();
    }
  } else if (e.tool === 'attribute') {
    if (hasAttribute === false) {
      editAttributes();
    } else {
      cancelAttribute();
    }
  } else if (e.tool === 'delete') {
      onDeleteSelected();
  } else if (e.tool === 'edit') {
      setEditLayer(e.currentLayer);
  } else if (e.tool === 'cancel') {
      removeInteractions();
  } else if (e.tool === 'save') {
      saveFeatures();
  }
}

function onChangeEdit(e) {
  if (e.tool!== 'draw' && e.active) {
    cancelDraw();
  }
}

function getSnapSources(layers) {
  var sources = layers.map(function(layer) {
    return viewer.getLayer(layer).getSource();
  });

  return sources;
}

function addSnapInteraction(sources) {
  var snapInteractions = [];
  sources.forEach(function(source) {
    var interaction = new ol.interaction.Snap({
      source: source
    });
    snapInteractions.push(interaction);
    map.addInteraction(interaction);
  });
  return snapInteractions;
}

function setActive(editType) {
  switch (editType) {
    case 'modify':
      draw.setActive(false);
      modify.setActive(true);
      select.setActive(true);
      break;
    case 'draw':
      draw.setActive(true);
      modify.setActive(true);
      select.setActive(false);
      break;
    default:
      draw.setActive(false);
      hasDraw = false;
      modify.setActive(true);
      select.setActive(true);
      break;
  }
}

function editAttributes(feature) {
  var attributeObjects;
  var features;

  //Get attributes from the created, or the selected, feature and fill DOM elements with the values
  if (feature) {
    features = new ol.Collection();
    features.push(feature);
  } else {
    features = select.getFeatures();
  }
  if (features.getLength() === 1) {
    dispatcher.emitChangeEdit('attribute', true);
    var feature = features.item(0);
    if (attributes.length > 0) {

      //Create an array of defined attributes and corresponding values from selected feature
      attributeObjects = attributes.map(function(attributeObject) {
        var obj = {};
        $.extend(obj, attributeObject);
        obj.val = feature.get(obj.name) || '';
        if (obj.hasOwnProperty('constraint')) {
          var constraintProps = obj.constraint.split(':');
          if (constraintProps.length === 3) {
            obj.eventType = constraintProps[0];
            obj.dependencyVal = feature.get(constraintProps[1]);
            obj.requiredVal = constraintProps[2];
            obj.dependencyVal === obj.requiredVal ? obj.isVisible = true : obj.isVisible = false;
            obj.addListener = addListener();
            obj.elId = '#input-' + obj.name + '-' + obj.requiredVal;
            obj.elDependencyId = '#input-' + constraintProps[1];
          } else {
            alert('Villkor verkar inte vara rätt formulerat. Villkor formuleras enligt principen change:attribute:value');
          }
        } else if (obj.type === 'image') {
          obj.isVisible = true;
          obj.elId = '#input-' + obj.name;
          obj.addListener = addImageListener();
        } else {
          obj.isVisible = true;
          obj.elId = '#input-' + obj.name;
        }

        obj.formElement = editForm(obj);
        return obj;
      });

    }
    var formElement = attributeObjects.reduce(function(prev, next) {
      return prev + next.formElement;
    }, '');
    var form = '<form>' + formElement + '<br><div class="o-form-save"><input id="o-save-button" type="button" value="Ok"></input></div></form>';
    modal.createModal('#o-map', {
      title: title,
      content: form,
      static: true
    });
    modal.showModal();

    attributeObjects.forEach(function(obj) {
      if (obj.hasOwnProperty('addListener')) {
        obj.addListener(obj);
      }
    });

    onAttributesSave(feature, attributeObjects);
  }
}

function saveFeature(change) {
  dispatcher.emitChangeFeature(change);
  if (autoSave) {
    saveFeatures(change);
  }
}

function saveFeatures() {
  var edits = editsStore.getEdits();
  var layerNames = Object.getOwnPropertyNames(edits);
  layerNames.forEach(function(layerName) {
    var transaction = {
      insert: null,
      delete: null,
      update: null
    };
    var editTypes = Object.getOwnPropertyNames(edits[layerName]);
    editTypes.forEach(function(editType) {
      var layer = viewer.getLayer(layerName);
      var ids = edits[layerName][editType];
      var features;
      features = getFeaturesByIds(editType, layer, ids);
      if (features.length) {
        transaction[editType] = features;
      }
    });

    transactionHandler(transaction, layerName);
  });
}

function getFeaturesByIds(type, layer, ids) {
  var source = layer.getSource();
  var features = [];
  if (type === 'delete') {
    ids.forEach(function(id) {
      var dummy = new ol.Feature();
      dummy.setId(id);
      features.push(dummy);
    });
  } else {
    ids.forEach(function(id) {
      var feature;
      if (source.getFeatureById(id)) {
         feature = source.getFeatureById(id);
         feature.unset('bbox');
         features.push(feature);
      }
    });
  }

  return features;
}

function getDefaultValues(attributes) {
  return attributes.filter(function(attribute) {
      if (attribute.name && attribute.defaultValue) {
        return attribute;
      }
    })
    .reduce(function(prev, curr) {
      prev[curr.name] = curr.defaultValue
      return prev;
    },{});
}

},{"../featureinfo":118,"../modal":150,"../utils/generateuuid":187,"../utils/getimageorientation":188,"../utils/imageresizer":190,"../viewer":201,"./editdispatcher":108,"./editform":109,"./editsstore":113,"./shapes":115,"./transactionhandler":116,"jquery":25,"openlayers":28}],111:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('../viewer');
var dropDown = require('../dropdown');
var dispatcher = require('./editdispatcher');
var createElement = require('../utils').createElement;

module.exports = function editorLayers(editableLayers, opt_options) {
  var active = false;
  var activeCls = 'o-active';
  var target = 'editor-toolbar-layers-dropdown';
  var defaultOptions = {
    target: target,
    selectOptions: selectionModel(editableLayers),
    activeLayer: editableLayers[0]
  };
  var renderOptions = $.extend(defaultOptions, opt_options);

  render(renderOptions);
  addListener(target);

  function render(options) {
    var popover = createElement('div', '', {
      id: options.target,
      cls: 'o-popover'
    });
    $('#' + 'o-editor-layers').after(popover);
    dropDown(options.target, options.selectOptions, {
      dataAttribute: 'layer',
      active: options.activeLayer
    });
  }

  function addListener() {
    $('#' + target).on('changeDropdown', function(e) {
      e.stopImmediatePropagation(e);
      setActive(false);
      dispatcher.emitToggleEdit('edit', {
        currentLayer: e.dataAttribute
      });
    });
    $(document).on('toggleEdit', onToggleEdit);
    $(document).on('changeEdit', onChangeEdit);
  }

  function onToggleEdit(e) {
    if (e.tool === 'layers') {
      if (active) {
        setActive(false);
      } else {
        setActive(true);
      }
    }
    e.stopPropagation();
  }

  function onChangeEdit(e) {
    if (e.tool !== 'layers' && e.active === true) {
      setActive(false);
    }
    e.stopPropagation();
  }

  function setActive(state) {
    if (state) {
      active = true;
      $('#' + target).addClass(activeCls);
    } else {
      active = false;
      $('#' + target).removeClass(activeCls);
    }
    dispatcher.emitChangeEdit('layers', active);
  }

  function close() {
    if (active) {
      setActive(false);
    }
  }

  function selectionModel(layerNames) {
    var selectOptions = layerNames.map(function(layerName) {
      var obj = {};
      obj.name = viewer.getLayer(layerName).get('title');
      obj.value = layerName;
      return obj;
    });
    return selectOptions;
  }
}

},{"../dropdown":103,"../utils":185,"../viewer":201,"./editdispatcher":108,"jquery":25}],112:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var editortemplate = require("../templates/editortoolbar.template.handlebars");
var dispatcher = require('./editdispatcher');
var editHandler = require('./edithandler');
var editorLayers = require('./editorlayers');
var drawTools = require('./drawtools');

var activeClass = 'o-control-active';
var disableClass = 'o-disabled';
var currentLayer = undefined;
var editableLayers = undefined;
var $editAttribute = undefined;
var $editDraw = undefined;
var $editDelete = undefined;
var $editLayers = undefined;
var $editSave = undefined;
var $editClose = undefined;

module.exports = function() {

  return {
    init: Init
  };
}()

function Init(options) {
  currentLayer = options.currentLayer;
  editableLayers = options.editableLayers;

  editHandler(options);
  render();
  editorLayers(editableLayers, {
    activeLayer: currentLayer
  });
  drawTools(options.drawTools, currentLayer);

  $(document).on('enableInteraction', onEnableInteraction);
  $(document).on('changeEdit', onChangeEdit);
  $(document).on('editsChange', toggleSave);

  bindUIActions();

  if (options.isActive) {
    setActive(true);
  }
}

function render() {
  $("#o-tools-bottom").append(editortemplate());
  $editAttribute = $('#o-editor-attribute');
  $editDraw = $('#o-editor-draw');
  $editDelete = $('#o-editor-delete');
  $editLayers = $('#o-editor-layers');
  $editSave = $('#o-editor-save');
  $editClose = $('#o-editor-close');
}

function bindUIActions() {
  var self = this;
  $editDraw.on('click', function(e) {
    dispatcher.emitToggleEdit('draw');
    $editDraw.blur();
    e.preventDefault();
    return false;
  });
  $editAttribute.on('click', function(e) {
    dispatcher.emitToggleEdit('attribute');
    $editAttribute.blur();
    e.preventDefault();
  });
  $editDelete.on('click', function(e) {
    dispatcher.emitToggleEdit('delete');
    $editDelete.blur();
    e.preventDefault();
  });
  $editLayers.on('click', function(e) {
    dispatcher.emitToggleEdit('layers');
    $editLayers.blur();
    e.preventDefault();
  });
  $editSave.on('click', function(e) {
    dispatcher.emitToggleEdit('save');
    $editSave.blur();
    e.preventDefault();
  });
  $editClose.on('click', function(e) {
    $('.o-map').first().trigger({
      type: 'enableInteraction',
      interaction: 'featureInfo'
    });
    $editClose.blur();
    e.stopPropagation();
    e.preventDefault();
  });
}

function onEnableInteraction(e) {
  e.stopPropagation();
  if (e.interaction === 'editor') {
    setActive(true);
    dispatcher.emitToggleEdit('edit', {
      currentLayer: currentLayer
    });
  } else {
    setActive(false);
    dispatcher.emitToggleEdit('cancel');
  }
}

function setActive(state) {
  if (state === true) {
    $('#o-editor-toolbar').removeClass('o-hidden');
  } else {
    $('#o-editor-toolbar').addClass('o-hidden');
  }
}

function onChangeEdit(e) {
  if (e.tool === 'draw') {
    if (e.active === false) {
      $editDraw.removeClass(activeClass);
    } else {
      $editDraw.addClass(activeClass);
    }
  }
  if (e.tool === 'layers') {
    if (e.active === false) {
      $editLayers.removeClass(activeClass);
    } else {
      $editLayers.addClass(activeClass);
    }
  } else if (e.active) {
    $editLayers.removeClass(activeClass);
  }
}

function toggleSave(e) {
  if (e.edits) {
    if ($editSave.hasClass(disableClass)) {
      $editSave.removeClass(disableClass);
    }
  } else {
    $editSave.addClass(disableClass);
  }
}

},{"../templates/editortoolbar.template.handlebars":180,"../viewer":201,"./drawtools":106,"./editdispatcher":108,"./edithandler":110,"./editorlayers":111,"jquery":25,"openlayers":28}],113:[function(require,module,exports){
var $ = require('jquery');
var ol = require('openlayers');
var viewer = require('../viewer');
var dispatcher = require('./editdispatcher');

var editsStore = function featureStore() {
  var edits = {};

  $(document).on('changeFeature', featureChange);

  return {
    getEdits: getEdits,
    hasFeature: hasFeature
  };

  function addEdit(e) {
    if (e.action === 'insert') {
      addFeature('insert', e.feature, e.layerName);
    } else if (e.action === 'update') {
      if (hasFeature('insert', e.feature, e.layerName) === false) {
        addFeature('update', e.feature, e.layerName);
      }
    } else if (e.action === 'delete') {
      if (removeFeature('insert', e.feature, e.layerName) === false) {
        removeFeature('update', e.feature, e.layerName);
        addFeature('delete', e.feature, e.layerName);
      }
    }
    if (hasEdits() === true) {
      dispatcher.emitEditsChange(1);
    } else {
      dispatcher.emitEditsChange(0);
    }
  }

  function removeEdit(e) {
    if (e.feature.length) {
      e.feature.forEach(function(feature) {
        removeFeature(e.action, feature, e.layerName)
      });
    }
    if (hasEdits() === false) {
      dispatcher.emitEditsChange(0);
    }
  }

  function getEdits() {
    return edits;
  }

  function featureChange(e) {
    if (e.status === 'pending') {
      addEdit(e);
    } else if (e.status === 'finished') {
      removeEdit(e);
    }
  }

  function hasFeature(type, feature, layerName) {
    if (edits.hasOwnProperty(layerName)) {
      if (edits[layerName][type].indexOf(feature.getId()) > -1) {
        return true;
      }
    }
    return false;
  }

  function addFeature(type, feature, layerName) {
    if (edits.hasOwnProperty(layerName) === false) {
      edits[layerName] = createEditsObj();
    }
    if (hasFeature(type, feature, layerName) === false) {
      edits[layerName][type].push(feature.getId());
    }
  }

  function removeFeature(type, feature, layerName) {
    var index = 0;
    if (edits.hasOwnProperty(layerName)) {
      index = edits[layerName][type].indexOf(feature.getId());
      if (index > -1) {
        edits[layerName][type].splice(index, 1);
        isFinished(layerName);
        return true;
      }
    }
    return false;
  }

  function isFinished(layerName) {
    var editTypes;
    var finished = true;
    if (edits.hasOwnProperty(layerName)) {
      editTypes = Object.getOwnPropertyNames(edits[layerName]);
      editTypes.forEach(function(editType) {
        if (edits[layerName][editType].length) {
          finished = false;
          return finished;
        }
      });
      if (finished) {
        delete edits[layerName];
        return finished;
      }
    } else {
      return finished;
    }
  }

  function createEditsObj() {
    return {
      update: [],
      insert: [],
      delete: []
    }
  }

  function hasEdits() {
    if (Object.getOwnPropertyNames(edits).length) {
      return true;
    } else {
      return false;
    }
  }
}

module.exports = editsStore;

},{"../viewer":201,"./editdispatcher":108,"jquery":25,"openlayers":28}],114:[function(require,module,exports){
var dispatcher = require('./editdispatcher');

module.exports = function(transObj, layerName) {
  dispatcher.emitChangeOfflineEdits(transObj, layerName);
}

},{"./editdispatcher":108}],115:[function(require,module,exports){
"use strict";

var ol = require('openlayers');

module.exports = function(drawType) {
  var types = {
    box: {
      type: 'Circle',
      geometryFunction: ol.interaction.Draw.createBox()
    }
  };

  if (types.hasOwnProperty(drawType)) {
    return types[drawType];
  } else {
    return {};
  }
}

},{"openlayers":28}],116:[function(require,module,exports){
"use strict";

var viewer = require('../viewer');
var wfsTransaction = require('./wfstransaction');
var agsTransaction = require('./agstransaction');
var indexedDb = require('./indexeddb');
var transactions = {
  WFS: wfsTransaction,
  AGS_FEATURE: agsTransaction,
  OFFLINE: indexedDb
};

module.exports = function(transaction, layerName) {
  var type = viewer.getLayer(layerName).get('type');
  if (transactions.hasOwnProperty(type)) {
    transactions[type](transaction, layerName);
  }
}

},{"../viewer":201,"./agstransaction":105,"./indexeddb":114,"./wfstransaction":117}],117:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var editsStore = require('./editsstore')();
var dispatcher = require('./editdispatcher');

var format = new ol.format.WFS();
var serializer = new XMLSerializer();

module.exports = function(transObj, layerName) {
  return wfsTransaction(transObj, layerName);
}

function writeWfsTransaction(transObj, options) {
  var node = format.writeTransaction(transObj.insert, transObj.update, transObj.delete, options);
  return node;
}

function wfsTransaction(transObj, layerName) {
  var srsName = viewer.getProjectionCode();
  var layer = viewer.getLayer(layerName);
  var featureType = layer.get('featureType');
  var source = viewer.getMapSource()[layer.get('sourceName')];
  var options = {
    gmlOptions: {
      srsName: srsName
    },
    featureNS: source.workspace,
    featurePrefix: source.prefix || source.workspace,
    featureType: featureType
  };
  var node = writeWfsTransaction(transObj, options);
  return $.ajax({
    type: "POST",
    url: source.url,
    data: serializer.serializeToString(node),
    contentType: 'text/xml',
    success: success,
    error: error,
    context: this
  })
    .then(function(data) {
      var result = readResponse(data);
      var nr = 0;
      if (result) {
        nr += result.transactionSummary.totalUpdated;
        nr += result.transactionSummary.totalDeleted;
        nr += result.transactionSummary.totalInserted;
      }
      return nr;
    });

  function success(data) {
    var result = readResponse(data);
    var feature;
    if (result) {
      if (result.transactionSummary.totalUpdated > 0) {
        dispatcher.emitChangeFeature({
          feature: transObj.update,
          layerName: layerName,
          status: 'finished',
          action: 'update'
        });
      }

      if (result.transactionSummary.totalDeleted > 0) {
        dispatcher.emitChangeFeature({
          feature: transObj.delete,
          layerName: layerName,
          status: 'finished',
          action: 'delete'
        });
      }

      if (result.transactionSummary.totalInserted > 0) {
        feature = transObj.insert;
        dispatcher.emitChangeFeature({
          feature: transObj.insert,
          layerName: layerName,
          status: 'finished',
          action: 'insert'
        });
        var insertIds = result.insertIds;
        insertIds.forEach(function(insertId, index) {
          feature[index].setId(insertId);
        });
      }
    } else {
      error();
    }
  }

  function error(e) {
    var errorMsg = e ? (e.status + ' ' + e.statusText) : "";
    alert('Det inträffade ett fel när ändringarna skulle sparas till servern...\n' +
      errorMsg);
  }
}

function readResponse(data) {
  var result;
  if (window.Document && data instanceof Document && data.documentElement &&
    data.documentElement.localName === 'ExceptionReport') {
    alert(data.getElementsByTagNameNS(
      'http://www.opengis.net/ows', 'ExceptionText').item(0).textContent);
  } else {
    result = format.readTransactionResponse(data);
  }

  return result;
}

},{"../viewer":201,"./editdispatcher":108,"./editsstore":113,"jquery":25,"openlayers":28}],118:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var Popup = require('./popup');
var sidebar = require('./sidebar');
var maputils = require('./maputils');
var featurelayer = require('./featurelayer');
var style = require('./style')();
var styleTypes = require('./style/styletypes');
var getFeatureInfo = require('./getfeatureinfo');
var owlCarousel = require('../externs/owlcarousel-browserify');
owlCarousel.loadjQueryPlugin();

var selectionLayer = undefined;
var savedPin = undefined;
var options;
var map;
var pinning;
var pinStyle;
var selectionStyles;
var showOverlay;
var identifyTarget;
var clusterFeatureinfoLevel;
var overlay;
var hitTolerance;

function init(opt_options) {
  map = Viewer.getMap();

  options = opt_options || {};

  pinning = options.hasOwnProperty('pinning') ? options.pinning : true;
  var pinStyleOptions = options.hasOwnProperty('pinStyle') ? options.pinStyle : styleTypes.getStyle('pin');
  pinStyle = style.createStyleRule(pinStyleOptions)[0];
  savedPin = options.savedPin ? maputils.createPointFeature(opt_options.savedPin, pinStyle) : undefined;

  selectionStyles = style.createEditStyle();

  var savedSelection = options.savedSelection || undefined;
  var savedFeature = savedPin || savedSelection || undefined;
  selectionLayer = featurelayer(savedFeature, map);

  showOverlay = options.hasOwnProperty('overlay') ? options.overlay : true;

  if(showOverlay) {
    identifyTarget = 'overlay';
  }
  else {
    sidebar.init();
    identifyTarget = 'sidebar';
  }

  clusterFeatureinfoLevel = options.hasOwnProperty('clusterFeatureinfoLevel') ? options.clusterFeatureinfoLevel : 1;

  hitTolerance = options.hasOwnProperty('hitTolerance') ? options.hitTolerance : 0;

  map.on('click', onClick);
  $(document).on('enableInteraction', onEnableInteraction);

}

function getSelectionLayer() {
  return selectionLayer.getFeatureLayer();
}

function getSelection() {
  var selection = {};
  selection.geometryType = selectionLayer.getFeatures()[0].getGeometry().getType();
  selection.coordinates = selectionLayer.getFeatures()[0].getGeometry().getCoordinates();
  return selection;
}
function getPin() {
  return savedPin;
}
function getHitTolerance() {
  return hitTolerance;
}
function identify(items, target, coordinate) {
  clear();
  var content = items.map(function(i){
    return i.content;
  }).join('');
  content = '<div id="o-identify"><div id="o-identify-carousel" class="owl-carousel owl-theme">' + content + '</div></div>';
  switch (target) {
    case 'overlay':
      var popup = Popup('#o-map');
      overlay = new ol.Overlay({
        element: popup.getEl()
      });
      map.addOverlay(overlay);
      var geometry = items[0].feature.getGeometry();
      var coord;
      geometry.getType() == 'Point' ? coord = geometry.getCoordinates() : coord = coordinate;
      overlay.setPosition(coord);
      popup.setContent({content: content, title: items[0].title});
      popup.setVisibility(true);
      var owl = initCarousel('#o-identify-carousel', undefined, function(){
        var currentItem = this.owl.currentItem;
        selectionLayer.clearAndAdd(items[currentItem].feature.clone(), selectionStyles[items[currentItem].feature.getGeometry().getType()]);
        popup.setTitle(items[currentItem].title);
      });
      Viewer.autoPan();
      break;
    case 'sidebar':
      sidebar.setContent({content: content, title: items[0].title});
      sidebar.setVisibility(true);
      var owl = initCarousel('#o-identify-carousel', undefined, function(){
        var currentItem = this.owl.currentItem;
        selectionLayer.clearAndAdd(items[currentItem].feature.clone(), selectionStyles[items[currentItem].feature.getGeometry().getType()]);
        sidebar.setTitle(items[currentItem].title);
      });
      break;
  }
}
function onClick(evt) {
  savedPin = undefined;
  //Featurinfo in two steps. Concat serverside and clientside when serverside is finished
  var clientResult = getFeatureInfo.getFeaturesAtPixel(evt, clusterFeatureinfoLevel);
  //Abort if clientResult is false
  if(clientResult !== false) {
    getFeatureInfo.getFeaturesFromRemote(evt)
      .done(function(data) {
        var serverResult = data || [];
        var result = serverResult.concat(clientResult);
        if (result.length > 0) {
          selectionLayer.clear();
          identify(result, identifyTarget, evt.coordinate)
        }
        else if(selectionLayer.getFeatures().length > 0) {
          clear();
        }
        else if(pinning){
          sidebar.setVisibility(false);
          var resolution = map.getView().getResolution();
          setTimeout(function() {
            if(!maputils.checkZoomChange(resolution, map.getView().getResolution())) {
              savedPin = maputils.createPointFeature(evt.coordinate, pinStyle);
              selectionLayer.addFeature(savedPin);
            }
          }, 250);
        }
        else {
          console.log('No features identified');
        }
      });
  }
}
function setActive(state) {
  if(state === true) {
    map.on('click', onClick);
  }
  else {
    clear();
    map.un('click', onClick);
  }
}
function clear() {
  selectionLayer.clear();
  sidebar.setVisibility(false);
  if (overlay) {
    Viewer.removeOverlays(overlay);      
  }
  console.log("Clearing selection");
}
function onEnableInteraction(e) {
  if(e.interaction === 'featureInfo') {
    setActive(true);
  }
  else {
    setActive(false);
  }
}
function initCarousel(id, options, cb) {
  var carouselOptions = options || {
    navigation : true, // Show next and prev buttons
    slideSpeed : 300,
    paginationSpeed : 400,
    singleItem:true,
    rewindSpeed:200,
    navigationText: ['<svg class="o-icon-fa-chevron-left"><use xlink:href="#fa-chevron-left"></use></svg>', '<svg class="o-icon-fa-chevron-right"><use xlink:href="#fa-chevron-right"></use></svg>'],
    afterAction: cb
  };
  return $(id).owlCarousel(carouselOptions);
}

module.exports.init = init;
module.exports.clear = clear;
module.exports.getSelectionLayer = getSelectionLayer;
module.exports.getSelection = getSelection;
module.exports.getPin = getPin;
module.exports.getHitTolerance = getHitTolerance;
module.exports.identify = identify;

},{"../externs/owlcarousel-browserify":4,"./featurelayer":120,"./getfeatureinfo":128,"./maputils":148,"./popup":166,"./sidebar":174,"./style":176,"./style/styletypes":179,"./viewer":201,"jquery":25,"openlayers":28}],119:[function(require,module,exports){
"use strict";
var templates = {};
templates.default = require("./templates/featureinfotemplates/default");

function featureinfotemplates(template, attributes) {
    return templates[template](attributes);
}
module.exports = featureinfotemplates;

},{"./templates/featureinfotemplates/default":182}],120:[function(require,module,exports){
"use strict";

var ol = require('openlayers');

//create unmanaged layer
module.exports = function(features, map) {
  var collection = features ? [features] : [];
  var featureLayerStore = new ol.source.Vector({
      features: collection
  });
  var featureLayer = new ol.layer.Vector({
    source: featureLayerStore,
    map: map
  });
  return {
      addFeature: function addFeature(feature) {
          featureLayerStore.addFeature(feature);
      },
      getFeatures: function getFeatures() {
          return featureLayerStore.getFeatures();
      },
      getFeatureLayer: function getFeatureLayer() {
          return featureLayer;
      },
      getFeatureStore: function getFeatureStore() {
          return featureLayerStore;
      },
      clear: function clear() {
          featureLayerStore.clear();
      },
      clearAndAdd: function clearAndAdd(feature, style) {
          featureLayerStore.clear();
          featureLayer.setStyle(style);
          featureLayerStore.addFeature(feature);
      }
  }
}

},{"openlayers":28}],121:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var utils = require('./utils');
var permalink = require('./permalink/permalink');
var isEmbedded = require('./utils/isembedded');
var viewer = require('./viewer');

var tooltip;
var mapTarget;

function Init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-navigation';
  mapTarget = viewer.getTarget();
  tooltip = options.tooltipText || 'Visa stor karta';

  render(target);
  bindUIActions();
}

function render(target) {
  var el = utils.createButton({
    id: 'o-fullscreen-button',
    cls: 'o-fullscreen-button',
    iconCls: 'o-icon-fa-expand',
    src: '#fa-expand',
    tooltipText: tooltip,
    tooltipPlacement: 'east'
  });
  if (isEmbedded(mapTarget)) {
    $(target).append(el);
  }
}

function bindUIActions() {
  $('#o-fullscreen-button button').click(function(e) {
    goFullScreen();
    $('#o-fullscreen-button button').blur();
    e.preventDefault();
  })
}

function goFullScreen() {
  var url = permalink.getPermalink();
  window.open(url);
}

module.exports.init = Init;

},{"./permalink/permalink":163,"./utils":185,"./utils/isembedded":191,"./viewer":201,"jquery":25}],122:[function(require,module,exports){
var getcenter = require('./geometry/getcenter');
var getarea = require('./geometry/getarea');

var geom = {};
geom.center = getcenter;
geom.area = getarea;

module.exports = geom;

},{"./geometry/getarea":123,"./geometry/getcenter":124}],123:[function(require,module,exports){
"use strict";

var round = require('../utils/round');

var getArea = function getArea(geometry_in, decimals) {
  var area = geometry_in.getArea ? geometry_in.getArea() : 0;
  if (decimals) {
    area = round(area, decimals);
  } else {
    area = round(area, '2');
  }
  return area;
}

module.exports = getArea;

},{"../utils/round":196}],124:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var Viewer = require('../viewer');

var getCenter = function getCenter(geometry_in, destination, axisOrientation) {
    var geometry = geometry_in.clone();

    if (destination) {
      geometry.transform(Viewer.getMap().getView().getProjection(), destination);
    }

    var type = geometry.getType();
    var center;
    switch (type) {
        case "Polygon":
            center = geometry.getInteriorPoint().getCoordinates();
            break;
        case "MultiPolygon":
            center = geometry.getInteriorPoints().getCoordinates()[0];
            break;
        case "Point":
            center = geometry.getCoordinates();
            break;
        case "MultiPoint":
            center = geometry[0].getCoordinates();
            break;
        case "LineString":
            center = geometry.getCoordinateAt(0.5);
            break;
        case "MultiLineString":
            center = geometry.getLineStrings()[0].getCoordinateAt(0.5);
            break;
        case "Circle":
            center = geometry.getCenter();
            break;
    }

    if (axisOrientation) {
      if (axisOrientation === 'reverse') {
        center.reverse();
      }
    }

    return center;
}

module.exports = getCenter;

},{"../viewer":201,"openlayers":28}],125:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var $geolocateButtonId = undefined;
var $geolocateButton = undefined;
var enabled = false;
var map = undefined;
var geolocation = undefined;
var marker = undefined;
var markerEl = undefined;
var baseUrl = undefined;
var zoomLevel;

function init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-navigation';
  map = viewer.getMap();
  baseUrl = viewer.getBaseUrl();
  zoomLevel = options.zoomLevel || viewer.getResolutions().length - 3 || 0;

  render(target);

  $geolocateButtonId = $('#o-geolocation-button');
  $geolocateButton = $('#o-geolocation-button button');

  markerEl = $('#o-geolocation_marker').get(0);
  marker = new ol.Overlay({
    positioning: 'center-center',
    element: markerEl,
    stopEvent: false
  });

  geolocation = new ol.Geolocation(({
    projection: map.getView().getProjection(),
    trackingOptions: {
      maximumAge: 10000,
      enableHighAccuracy: true,
      timeout: 600000
    }
  }));

  bindUIActions();
}

function render(target) {
  var tooltipText = 'Visa nuvarande position i kartan';
  var src = baseUrl + 'img/geolocation_marker.png';
  var markerImg = '<img id="o-geolocation_marker" src="' + src + '"/>';

  //Element for control
  var el = utils.createButton({
    id: 'o-geolocation-button',
    cls: 'o-geolocation-button',
    iconCls: 'o-icon-fa-location-arrow',
    src: '#fa-location-arrow',
    tooltipText: tooltipText,
    tooltipPlacement: 'east'
  });
  $(target).append(el);
  $('#o-map').prepend(markerImg);
}

function bindUIActions() {
  $geolocateButtonId.on('click', function(e) {
    enabled = false;
    toggle();
    $geolocateButton.blur();
    e.preventDefault();
  });
}

function toggle() {
  if ($geolocateButton.hasClass('o-geolocation-button-true')) {
    $geolocateButton.removeClass('o-geolocation-button-true');
    geolocation.setTracking(false);

    geolocation.un('change', updatePosition);
    map.removeOverlay(marker);
  } else {
    $geolocateButton.addClass('o-geolocation-button-true');
    map.addOverlay(marker);

    // Listen to position changes
    geolocation.on('change', updatePosition);
    geolocation.setTracking(true); // Start position tracking
  }
}

function updatePosition() {
  addPosition(getPositionVal());
}

function getPositionVal() {
  var current = {};
  current.position = geolocation.getPosition();
  current.accuracy = geolocation.getAccuracy();
  current.heading = geolocation.getHeading() || 0;
  current.speed = geolocation.getSpeed() || 0;
  current.m = Date.now();
  return current;
}

function addPosition(current) {
  var position = current.position;

  if (enabled === false && geolocation.getTracking()) {
    marker.setPosition(position);
    map.getView().animate({
      center: position,
      zoom: zoomLevel
    });
    enabled = true;
  } else if (geolocation.getTracking()) {
    marker.setPosition(position);
  }
}

module.exports.init = init;

},{"./utils":185,"./viewer":201,"jquery":25,"openlayers":28}],126:[function(require,module,exports){
"use strict";
var featureinfotemplates = require('./featureinfotemplates');
var replacer = require('../src/utils/replacer');
var geom = require('./geom');

module.exports = function(feature, layer) {
    var content = '<div><ul>';
    var attribute, li = '', title, val;
    //If layer is configured with attributes
    if(layer.get('attributes')) {
          //If attributes is string then use template named with the string
          if(typeof layer.get('attributes') === 'string') {
              //Use attributes with the template
              li = featureinfotemplates(layer.get('attributes'),feature.getProperties());
          }
          else {
              for(var i=0; i<layer.get('attributes').length; i++) {
                attribute = layer.get('attributes')[i];
                title = '';
                val = '';
                if (attribute['name']) {
                  if(feature.get(attribute['name'])) {
                      val = feature.get(attribute['name']);
                      if (attribute['title']) {
                        title = '<b>' + attribute['title'] + '</b>';
                      }
                      if (attribute['url']) {
                        if(feature.get(attribute['url'])) {
                        var url = createUrl(attribute['urlPrefix'], attribute['urlSuffix'], replacer.replace(feature.get(attribute['url']), feature.getProperties()));
                        val = '<a href="' + url + '" target="_blank">' +
                              feature.get(attribute['name']) +
                              '</a>';
                        }
                      }
                  }
                }
                else if (attribute['url']) {
                    if(feature.get(attribute['url'])) {
                        var text = attribute['html'] || attribute['url'];
                        var url = createUrl(attribute['urlPrefix'], attribute['urlSuffix'], replacer.replace(feature.get(attribute['url']), feature.getProperties()));
                        val = '<a href="' + url + '" target="_blank">' +
                              text +
                              '</a>';
                    }
                }
                else if (attribute['img']) {
                    if(feature.get(attribute['img'])) {
                        var url = createUrl(attribute['urlPrefix'], attribute['urlSuffix'], replacer.replace(feature.get(attribute['img']), feature.getProperties()));
                        var attribution = attribute['attribution'] ? '<div class="o-image-attribution">' + attribute['attribution'] + '</div>' : '';
                        val = '<div class="o-image-container">' +
                                  '<img src="' + url + '">' + attribution +
                              '</div>';
                    }
                }
                else if (attribute['html']) {
                  val = replacer.replace(attribute['html'], feature.getProperties(), {
                    helper: geom,
                    helperArg: feature.getGeometry()
                  });
                }

                var cls = ' class="' + attribute['cls'] + '" ' || '';

                li += '<li' + cls +'>' + title + val + '</li>';
              }
        }
    }
    else {
      //Clean feature attributes from non-wanted properties
      var attributes = filterObject(feature.getProperties(), ['FID_', 'geometry']);
      //Use attributes with the template
      li = featureinfotemplates('default',attributes);
    }
    content += li + '</ul></div>';
    return content;
}
function filterObject(obj, excludedKeys) {
    var result = {}, key;
    for (key in obj) {
        if(excludedKeys.indexOf(key) === -1) {
            result[key] = obj[key];
        }
    }
    return result;
}
function createUrl(prefix, suffix, url) {
    var p = prefix || '';
    var s = suffix || '';
    return p + url + s;
}

},{"../src/utils/replacer":195,"./featureinfotemplates":119,"./geom":122}],127:[function(require,module,exports){
var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');

var sourceType = {};
var projectionCode;
var source;

module.exports = function(id, layer) {
    projectionCode = viewer.getProjectionCode();
    source = viewer.getMapSource();
    var serverUrl = source[layer.get('sourceName')].url;
    var type = layer.get('type');
    //returns a promise with features as result
    return sourceType[type](id, layer, serverUrl);
}

sourceType.AGS_FEATURE = function agsFeature(id, layer, serverUrl) {
  var esriSrs = projectionCode.split(':').pop();
  var layerId = layer.get('id');
  var esrijsonFormat = new ol.format.EsriJSON();

  var url = serverUrl + '/' + layerId +
      '/query?f=json&' +
      'returnGeometry=true' +
      '&objectIds=' + id +
      '&geometryType=esriGeometryEnvelope'+
      '&inSR=' + esriSrs +
      '&outFields=*' +
      '&returnIdsOnly=false' +
      '&returnCountOnly=false' +
      '&geometryPrecision=2' +
      '&outSR=' + esriSrs;

  return $.ajax({
        url: url,
        dataType: 'jsonp'
  })
    .then(function(response) {
        if(response.error) {
            fail(response);
            return [];
        }
        else {
            var features = esrijsonFormat.readFeatures(response, {
                    featureProjection: viewer.getProjection()
            });
            return features;
        }
    }, fail
    );
}

sourceType.WFS = function(id, layer, serverUrl) {
  var geometryName = layer.get('geometryName');
  var format = new ol.format.GeoJSON({geometryName: geometryName});
  var url = serverUrl +'?';
  var data = 'service=WFS' +
      '&version=1.0.0' +
      '&request=GetFeature&typeName=' + layer.get('name') +
      '&outputFormat=json' +
      '&featureId=' + id;
  return $.ajax({
    url: url,
    data: data,
    type: 'POST',
    dataType: 'json'
  })
    .then(function(response) {
        return format.readFeatures(response);
    });
}

function fail(response) {
    if(response.error) {
        console.log(response.error.message + '\n' +
            response.error.details.join('\n'));
    }
}

},{"./viewer":201,"jquery":25,"openlayers":28}],128:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var maputils = require('./maputils');
var getAttributes = require('./getattributes');
var featureInfo = require('./featureinfo');

var map;

function getFeaturesFromRemote(evt) {
        map = Viewer.getMap();
        var requestResult = [];
        var requestPromises = getFeatureInfoRequests(evt).map(function(request) {
            return request.fn.then(function(feature) {
                var layer = Viewer.getLayer(request.layer);
                if(feature) {
                    requestResult.push({
                        title: layer.get('title'),
                        feature: feature,
                        content: getAttributes(feature, layer)
                    });
                    return requestResult;
                }
            });
        });
        return $.when.apply($, requestPromises).then(function(data) {
            return requestResult;
        });
}
function getFeatureInfoRequests(evt) {
    var requests = [];
    //Check for support of crossOrigin in image, absent in IE 8 and 9
    if('crossOrigin' in new(Image)) {
        map.forEachLayerAtPixel(evt.pixel, function(layer) {
            if (layer.get('queryable')) {
              var item = getGetFeatureInfoRequest(layer, evt.coordinate);
              if(item) {requests.push(item)};
            }
        });
    }
    //If canvas is tainted
    else if(isTainted(evt.pixel)) {
        var layers = Viewer.getQueryableLayers();
        layers.forEach(function(layer) {
            if (layer.get('queryable')) {

              //If layer is tainted, then create request for layer
              if(isTainted(evt.pixel, layer)) {
                  var item = getGetFeatureInfoRequest(layer, evt.coordinate);
                  if(item) {requests.push(item)};
              }

              //If layer is not tainted, test if layer hit at pixel
              else if(layerAtPixel(evt.pixel, layer)){
                  var item = getGetFeatureInfoRequest(layer, evt.coordinate);
                  if(item) {requests.push(item)};
              }
            }
        });
    }
    //If crossOrigin is not supported and canvas not tainted
    else {
        map.forEachLayerAtPixel(evt.pixel, function(layer) {
            if (layer.get('queryable') === true) {
              var item = getGetFeatureInfoRequest(layer, evt.coordinate);
              if (item) {
                requests.push(item)
              };
            }
        });
    }
    return requests;
}
function getGetFeatureInfoRequest(layer, coordinate) {
    var layerType = layer.get('type'),
    obj = {};
    obj.layer = layer.get('name');

    switch (layerType) {
      case 'WMTS':
        if(layer.get('featureinfoLayer')) {
            var featureinfoLayerName = layer.get('featureinfoLayer'),
            featureinfoLayer = Viewer.getLayer(featureinfoLayerName);
            return getGetFeatureInfoRequest(featureinfoLayer, coordinate);
        }
        else {
            return undefined;
        }
        break;
      case 'WMS':
        if(layer.get('featureinfoLayer')) {
            var featureinfoLayerName = layer.get('featureinfoLayer'),
            featureinfoLayer = Viewer.getLayer(featureinfoLayerName);
            return getGetFeatureInfoRequest(featureinfoLayer, coordinate);
        }
        else {
            obj.cb = "GEOJSON";
            obj.fn = getGetFeatureInfoUrl(layer, coordinate);
            return obj;
        }
        case 'AGS_TILE':
            if(layer.get('featureinfoLayer')) {
                var featureinfoLayerName = layer.get('featureinfoLayer'),
                featureinfoLayer = Viewer.getLayer(featureinfoLayerName);
                return getGetFeatureInfoRequest(featureinfoLayer, coordinate);
            }
            else {
                obj.fn = getAGSIdentifyUrl(layer, coordinate);
                return obj;
            }
      default:
        return undefined;
    }
}
function isTainted(pixel, layerFilter) {
    try {
        if(layerFilter) {
            map.forEachLayerAtPixel(pixel, function(layer) {
                return layerFilter === layer;
            });
        }
        else {
            map.forEachLayerAtPixel(pixel, function(layer) {});
        }
        return false;
    }
    catch(e) {
        console.log(e);
        return true;
    }
}
function layerAtPixel(pixel, matchLayer) {
    map.forEachLayerAtPixel(pixel, function(layer) {
        return matchLayer === layer;
    })
}
function getFeaturesAtPixel(evt, clusterFeatureinfoLevel) {
    map = Viewer.getMap();
    var result = [],
    cluster = false;
    map.forEachFeatureAtPixel(evt.pixel,
        function(feature, layer) {
          var l = layer;
          var queryable = false;
          if(layer) {
              queryable = layer.get('queryable');
          }
          if(feature.get('features')) {
              //If cluster
              var collection = feature.get('features');
              if (collection.length > 1) {
                var zoom = map.getView().getZoom();
                var zoomLimit = clusterFeatureinfoLevel === -1 ? Viewer.getResolutions().length : zoom + clusterFeatureinfoLevel;
                if(zoomLimit < Viewer.getResolutions().length) {
                    map.getView().setCenter(evt.coordinate);
                    map.getView().setZoom(zoom + 1);
                    cluster = true;
                    return true;
                }
                else {
                    collection.forEach(function(f) {
                          var item = {};
                          item.title = l.get('title');
                          item.feature = f;
                          item.content =  getAttributes(f,l);
                          result.push(item);
                    });
                }
              }
              else if(collection.length == 1 && queryable) {
                  var item = {};
                  item.title = l.get('title');
                  item.feature = collection[0];
                  item.content = getAttributes(collection[0],l);
                  result.push(item);
              }
          }
          else if(queryable) {
              var item = {};
              item.title = l.get('title');
              item.feature = feature;
              item.content = getAttributes(feature,l)
              result.push(item);
          }
        },
        {
          hitTolerance: featureInfo.getHitTolerance()
        });

    if(cluster) {
        return false;
    }
    else {
        return result;
    }
}
function getGetFeatureInfoUrl(layer, coordinate) {
    var url = layer.getSource().getGetFeatureInfoUrl(
    coordinate, map.getView().getResolution(), Viewer.getProjection(),
    {'INFO_FORMAT': 'application/json'});

    return $.ajax(url, {
      type: 'post'
    })
    .then(function(response) {
        if(response.error) {
            return [];
        }
        else {
            return maputils.geojsonToFeature(response);
        }
    }
    );
}
function getAGSIdentifyUrl(layer, coordinate) {
  var projectionCode = Viewer.getProjectionCode();
  var esriSrs = projectionCode.split(':').pop();
  var layerId = layer.get('id');
  var source = Viewer.getMapSource()[layer.get('sourceName')];
  var serverUrl = source.url;
  var esrijsonFormat = new ol.format.EsriJSON();
  var size = map.getSize();
  var tolerance = source.hasOwnProperty('tolerance') ? source.tolerance.toString() : 5;
  var extent = map.getView().calculateExtent(size);

  var url = serverUrl +
      '/identify?f=json&' +
      'returnGeometry=true' +
      '&geometryType=esriGeometryPoint'+
      '&sr=' + esriSrs +
      '&geometry=' + coordinate +
      '&outFields=*' +
      '&geometryPrecision=2' +
      '&tolerance=' + tolerance +
      '&layers=all:' + layerId +
      '&mapExtent=' + extent +
      '&imageDisplay=' + size + ',' + '96';

  return $.ajax({
        url: url,
        dataType: 'jsonp'
  })
    .then(function(response) {
        if(response.error) {
            return [];
        }
        else {
            var obj = {};
            obj.features = response.results;
            var features = esrijsonFormat.readFeatures(obj, {
                    featureProjection: Viewer.getProjection()
            });
            return features[0];
        }
    }
    );
}

module.exports.getFeaturesFromRemote = getFeaturesFromRemote;
module.exports.getFeaturesAtPixel = getFeaturesAtPixel;

},{"./featureinfo":118,"./getattributes":126,"./maputils":148,"./viewer":201,"jquery":25,"openlayers":28}],129:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');

var map;
var tooltip;
var extent;

function Init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-navigation';
  map = Viewer.getMap();
  tooltip = options.tooltipText || 'Zooma till hela kartan';
  extent = options.extent || map.getView().calculateExtent(map.getSize());
  render(target);
  bindUIActions();
}

function render(target) {
  var el = utils.createButton({
    id: 'o-home-button',
    iconCls: 'o-icon-fa-home',
    src: '#fa-home',
    tooltipText: tooltip
  });
  $(target).append(el);
}

function bindUIActions() {
  $('#o-home-button').on('click', function(e) {
    map.getView().fit(extent);
    $('#o-home-button button').blur();
    e.preventDefault();
  });
}

module.exports.init = Init;

},{"./utils":185,"./viewer":201,"jquery":25,"openlayers":28}],130:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');

var agsFeature = function agsFeature(layerOptions) {
  var agsDefault = {
    layerType: 'vector'
  };
  var sourceDefault = {};
  var agsOptions = $.extend(agsDefault, layerOptions);
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.sourceName]);
  sourceOptions.geometryName = agsOptions.geometryName;
  sourceOptions.filter = agsOptions.filter;
  sourceOptions.attribution = agsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.id = agsOptions.id;

  var agsSource = createSource(sourceOptions);
  return vector(agsOptions, agsSource);

  function createSource(options) {
    var vectorSource = null;
    var esriSrs = options.projectionCode.split(':').pop();
    var queryFilter = options.filter ? '&where=' + options.filter : '';
    var esrijsonFormat = new ol.format.EsriJSON();
    vectorSource = new ol.source.Vector({
      attributions: options.attribution,
      loader: function(extent, resolution, projection) {
        var that = this;
        var url = options.url + options.id +
          encodeURI('/query?f=json&' +
            'returnGeometry=true' +
            '&spatialRel=esriSpatialRelIntersects' +
            '&geometry=' + '{"xmin":' + extent[0] + ',"ymin":' +
              extent[1] + ',"xmax":' + extent[2] + ',"ymax":' + extent[3] +
              ',"spatialReference":{"wkid":' + esriSrs + '}}' +
            '&geometryType=esriGeometryEnvelope' +
            '&inSR=' + esriSrs + '&outFields=*' + '' +
            '&returnIdsOnly=false&returnCountOnly=false' +
            '&geometryPrecision=2' +
            '&outSR=' + esriSrs + queryFilter);
        $.ajax({
          url: url,
          dataType: 'jsonp',
          success: function(response) {
            if (response.error) {
              alert(response.error.message + '\n' +
                response.error.details.join('\n'));
            } else {

              // dataProjection will be read from document
              var features = esrijsonFormat.readFeatures(response, {
                featureProjection: projection
              });
              if (features.length > 0) {
                that.addFeatures(features);
              }
            }
          }
        });
      },
      strategy: ol.loadingstrategy.bbox
    });
    return vectorSource;
  }
}

module.exports = agsFeature;

},{"../viewer":201,"./vector":138,"jquery":25,"openlayers":28}],131:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var agsTile = function agsTile(layerOptions) {
  var agsDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {};
  var agsOptions = $.extend(agsDefault, layerOptions);
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  sourceOptions.attribution = agsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.params = agsOptions.params || {};
  sourceOptions.params.layers = "show:" + agsOptions.id;

  var agsSource = createSource(sourceOptions);
  return tile(agsOptions, agsSource);

  function createSource(options) {
    return new ol.source.TileArcGISRest({
      attributions: options.attribution,
      projection: options.projectionCode,
      crossOrigin: 'anonymous',
      params: options.params,
      url: options.url
    });
  }
}

module.exports = agsTile;

},{"../viewer":201,"./tile":136,"jquery":25,"openlayers":28}],132:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var vector = require('./vector');

var featureLayer = function featureLayer(layerOptions) {
  var options = layerOptions;
  var sourceOptions = {};
  var vectorSource;
  sourceOptions.attribution = layerOptions.attribution;
  sourceOptions.features = layerOptions.features;

  vectorSource = createSource(sourceOptions);
  return vector(options, vectorSource);

  function createSource(options) {
    return new ol.source.Vector({
      attributions: options.attribution,
      features: options.features
    });
  }
}

module.exports = featureLayer;

},{"./vector":138,"openlayers":28}],133:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');
var isUrl = require('../utils/isurl');

var geojson = function geojson(layerOptions) {
  var baseUrl = viewer.getBaseUrl();
  var geojsonDefault = {
    layerType: 'vector'
  };
  var geojsonOptions = $.extend(geojsonDefault, layerOptions);
  var geojsonSource;
  var sourceOptions = {};
  sourceOptions.attribution = geojsonOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.sourceName = layerOptions.source;
  if (isUrl(geojsonOptions.source)) {
    sourceOptions.url = geojsonOptions.source;
  } else {
    geojsonOptions.sourceName = baseUrl + geojsonOptions.source;
    sourceOptions.url = geojsonOptions.source;
  }

  geojsonSource = createSource(sourceOptions);
  return vector(geojsonOptions, geojsonSource);

  function createSource(options) {
    return new ol.source.Vector({
      attributions: options.attribution,
      url: options.url,
      format: new ol.format.GeoJSON()
    });
  }
}

module.exports = geojson;

},{"../utils/isurl":192,"../viewer":201,"./vector":138,"jquery":25,"openlayers":28}],134:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');

var group = function group(layerOptions) {
  var groupDefault = {
    layerType: 'group',
    styleName: 'default'
  };
  var groupOptions = $.extend(groupDefault, layerOptions);
  return new ol.layer.Group(groupOptions);
}

module.exports = group;

},{"jquery":25,"openlayers":28}],135:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var tile = require('./tile');

var osm = function osm(layerOptions) {
  var osmDefault = {};
  var osmOptions = $.extend(osmDefault, layerOptions);

  var osmSource = createSource();
  return tile(osmOptions, osmSource);

  function createSource() {
    return new ol.source.OSM()
  }
}

module.exports = osm;

},{"./tile":136,"jquery":25,"openlayers":28}],136:[function(require,module,exports){
"use strict";

var ol = require('openlayers');

module.exports = function tile(options, source) {
  options.source = source;
  return new ol.layer.Tile(options);
}

},{"openlayers":28}],137:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');
var isUrl = require('../utils/isurl');

var topojson = function topojson(layerOptions) {
  var baseUrl = viewer.getBaseUrl();
  var topojsonDefault = {
    layerType: 'vector'
  };
  var topojsonOptions = $.extend(topojsonDefault, layerOptions);
  var topojsonSource;
  var sourceOptions = {};
  sourceOptions.attribution = topojsonOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.sourceName = layerOptions.source;
  if (isUrl(topojsonOptions.source)) {
    sourceOptions.url = topojsonOptions.source;
  } else {
    topojsonOptions.sourceName = baseUrl + topojsonOptions.source;
    sourceOptions.url = topojsonOptions.source;
  }

  topojsonSource = createSource(sourceOptions);
  return vector(topojsonOptions, topojsonSource);

  function createSource(options) {
    return new ol.source.Vector({
      attributions: options.attribution,
      url: options.url,
      format: new ol.format.TopoJSON({
        defaultDataProjection: options.projectionCode
      })
    });
  }
}

module.exports = topojson;

},{"../utils/isurl":192,"../viewer":201,"./vector":138,"jquery":25,"openlayers":28}],138:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var style = require('../style')();

module.exports = function vector(options, source) {
  var vectorLayer;
  switch (options.layerType) {
    case 'vector':
      options.source = source;
      options.style = style.createStyle(options.style);
      vectorLayer = new ol.layer.Vector(options);
      break;
    case 'cluster':
      options.source = new ol.source.Cluster({
        attributions: options.attribution,
        source: source,
        distance: 60
      });
      options.style = style.createStyle(options.style, options.clusterStyle);
      vectorLayer = new ol.layer.Vector(options);
      break;
    case 'image':
      options.source = new ol.source.ImageVector({
        source: source,
        style: style.createStyle(options.style)
      });
      vectorLayer = new ol.layer.Image(options);
      break;
  }
  return vectorLayer;
}

},{"../style":176,"openlayers":28}],139:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var vector = require('./vector');

var wfs = function wfs(layerOptions) {
  var wfsDefault = {
    layerType: 'vector'
  };
  var sourceDefault = {};
  var wfsOptions = $.extend(wfsDefault, layerOptions);
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.sourceName]);
  wfsOptions.featureType = sourceOptions.featureType = wfsOptions.id;
  sourceOptions.geometryName = wfsOptions.geometryName;
  sourceOptions.filter = wfsOptions.filter;
  sourceOptions.attribution = wfsOptions.attribution;
  sourceOptions.resolutions = viewer.getResolutions();
  sourceOptions.projectionCode = viewer.getProjectionCode();

  sourceOptions.strategy = layerOptions.strategy ? layerOptions.strategy : sourceOptions.strategy;
  switch (sourceOptions.strategy) {
    case 'all':
      sourceOptions.loadingstrategy = ol.loadingstrategy.all;
    break;
    case 'tile':
    sourceOptions.loadingstrategy = ol.loadingstrategy.tile(ol.tilegrid.createXYZ({
        maxZoom: sourceOptions.resolutions.length
      }));
    break;
    default:
    sourceOptions.loadingstrategy = ol.loadingstrategy.bbox;
    break;
  }
  var wfsSource = createSource(sourceOptions);
  return vector(wfsOptions, wfsSource);

  function createSource(options) {
    var vectorSource = null;
    var serverUrl = options.url;
    var queryFilter;

    //If cql filter then bbox must be used in the filter.
    if(options.strategy === 'all'){
      queryFilter = options.filter ? '&CQL_FILTER=' + options.filter : '';
    }
    else{
      queryFilter = options.filter ? '&CQL_FILTER=' + options.filter + ' AND BBOX(' + options.geometryName + ',' : '&BBOX=';
    }
    var bboxProjectionCode = options.filter ? "'" + options.projectionCode + "')" : options.projectionCode;
    vectorSource = new ol.source.Vector({
      attributions: options.attribution,
      format: new ol.format.GeoJSON({
        geometryName: options.geometryName
      }),
      loader: function(extent, resolution, projection) {
        var url = serverUrl +
          '?service=WFS&' +
          'version=1.1.0&request=GetFeature&typeName=' + options.featureType +
          '&outputFormat=application/json' +
          '&srsname=' + options.projectionCode;
        url += options.strategy === 'all' ? queryFilter : queryFilter + extent.join(',') + ',' + bboxProjectionCode;
        $.ajax({
            url: url,
            cache: false
          })
          .done(function(response) {
            vectorSource.addFeatures(vectorSource.getFormat().readFeatures(response));
          });
      },
      strategy: options.loadingstrategy
    });
    return vectorSource;
  }
}

module.exports = wfs;

},{"../viewer":201,"./vector":138,"jquery":25,"openlayers":28}],140:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var wms = function wms(layerOptions) {
  var wmsDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {
    version: '1.1.1',
    gutter: 0
  };
  var wmsOptions = $.extend(wmsDefault, layerOptions);
  wmsOptions.name.split(':').pop();
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  sourceOptions.attribution = wmsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.id = wmsOptions.id;

  var wmsSource = createSource(sourceOptions);
  return tile(wmsOptions, wmsSource);

  function createSource(options) {
    return new ol.source.TileWMS(({
      attributions: options.attribution,
      url: options.url,
      gutter: options.gutter,
      crossOrigin: 'anonymous',
      projection: options.projectionCode,
      params: {
        'LAYERS': options.id,
        'TILED': true,
        VERSION: options.version
      }
    }))
  }
}

module.exports = wms;

},{"../viewer":201,"./tile":136,"jquery":25,"openlayers":28}],141:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var wmts = function wmts(layerOptions) {
  var wmtsDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {
    matrixSet: viewer.getProjectionCode(),
    matrixIdsPrefix: viewer.getProjectionCode() + ':',
    format: 'image/png',
    resolutions: viewer.getResolutions(),
    tileSize: [256, 256]
  };
  var wmtsOptions = $.extend(wmtsDefault, layerOptions);
  wmtsOptions.name.split(':').pop();
  wmtsOptions.sourceName = wmtsOptions.name;
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  if (wmtsOptions.hasOwnProperty('format')) {
    sourceOptions.format = wmtsOptions.format;
  }
  sourceOptions.attribution = wmtsOptions.attribution;
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.matrixIds = [];
  sourceOptions.resolutions.forEach(function(resolution, i) {
    sourceOptions.matrixIds[i] = sourceOptions.matrixIdsPrefix + i;
  });
  sourceOptions.projectionExtent = viewer.getProjection().getExtent();
  sourceOptions.id = wmtsOptions.id;

  var wmtsSource = createSource(sourceOptions);
  return tile(wmtsOptions, wmtsSource);

  function createSource(options) {
    return new ol.source.WMTS({
      crossOrigin: 'anonymous',
      attributions: options.attribution,
      url: options.url,
      projection: options.projectionCode,
      layer: options.id,
      matrixSet: options.matrixSet,
      format: options.format,
      tileGrid: new ol.tilegrid.WMTS({
        origin: options.origin || ol.extent.getTopLeft(options.projectionExtent),
        resolutions: options.resolutions,
        matrixIds: options.matrixIds,
        tileSize: options.tileSize
      }),
      style: 'default'
    })
  }
}

module.exports = wmts;

},{"../viewer":201,"./tile":136,"jquery":25,"openlayers":28}],142:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var tile = require('./tile');

var xyz = function xyz(layerOptions) {
  var xyzDefault = {
    layerType: 'tile',
    featureinfoLayer: undefined
  };
  var sourceDefault = {};
  var xyzOptions = $.extend(xyzDefault, layerOptions);
  xyzOptions.sourceName = xyzOptions.id;
  var sourceOptions = $.extend(sourceDefault, viewer.getMapSource()[layerOptions.source]);
  sourceOptions.attributions = xyzOptions.attribution;
  sourceOptions.projection = viewer.getProjectionCode() || 'EPSG:3857';
  sourceOptions.tileGrid = viewer.getTileGrid();

  var xyzSource = createSource(sourceOptions);
  return tile(xyzOptions, xyzSource);

  function createSource(options) {
    var format = options.sourceName.split('.')[1],
      url = options.sourceName.split('.')[0] + '/{z}/{x}/{y}.';
    url += format;
    options.url = format;
    return new ol.source.XYZ(options);
  }
}

module.exports = xyz;

},{"../viewer":201,"./tile":136,"jquery":25,"openlayers":28}],143:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var mapUtils = require('./maputils');
var group = require('./layer/group');
var type = {};
var layerCreator;
type.WFS = require('./layer/wfs');
type.AGS_FEATURE = require('./layer/agsfeature');
type.TOPOJSON = require('./layer/topojson');
type.GEOJSON = require('./layer/geojson');
type.WMS = require('./layer/wms');
type.WMTS = require('./layer/wmts');
type.AGS_TILE = require('./layer/agstile');
type.XYZ = require('./layer/xyz');
type.OSM = require('./layer/osm');
type.FEATURE = require('./layer/featurelayer');;
type.GROUP = groupLayer;

layerCreator = function layerCreator(opt_options) {
  var defaultOptions = {
    name: undefined,
    id: undefined,
    title: undefined,
    group: 'none',
    opacity: 1,
    geometryName: 'geom',
    geometryType: undefined,
    filter: undefined,
    layerType: undefined,
    legend: false,
    sourceName: undefined,
    attribution: undefined,
    style: 'default',
    styleName: undefined,
    queryable: true,
    minResolution: undefined,
    maxResolution: undefined,
    visible: false,
    type: undefined,
    extent: undefined,
    attributes: undefined
  };
  var projection = viewer.getProjection();
  var options = opt_options || {};
  var layerOptions = $.extend(defaultOptions, options);
  var name = layerOptions.name;
  layerOptions.minResolution = layerOptions.hasOwnProperty('minScale') ? mapUtils.scaleToResolution(layerOptions.minScale, projection): undefined;
  layerOptions.maxResolution = layerOptions.hasOwnProperty('maxScale') ? mapUtils.scaleToResolution(layerOptions.maxScale, projection): undefined;
  layerOptions.extent = layerOptions.extent || viewer.getExtent();
  layerOptions.sourceName = layerOptions.source;
  layerOptions.styleName = layerOptions.style;
  if (layerOptions.id === undefined) {
    layerOptions.id = name.split('__').shift();
  }

  layerOptions.name = name.split(':').pop();

  if (type.hasOwnProperty(layerOptions.type)) {
    return type[layerOptions.type](layerOptions, layerCreator);
  } else {
    console.log('Layer type is missing or layer type is not correct. Check your layer definition: ');
    console.log(layerOptions);
  }
}

function groupLayer(options) {
  var layers;
  var layerOptions;
  if (options.hasOwnProperty('layers')) {
    layers = options.layers.map(function(layer) {
      return layerCreator(layer);
    });

    layerOptions = {};
    layerOptions.layers = layers;
    return group($.extend(options, layerOptions));
  } else {
    console.log('Group layer has no layers');
  }
}

module.exports = layerCreator;

},{"./layer/agsfeature":130,"./layer/agstile":131,"./layer/featurelayer":132,"./layer/geojson":133,"./layer/group":134,"./layer/osm":135,"./layer/topojson":137,"./layer/wfs":139,"./layer/wms":140,"./layer/wmts":141,"./layer/xyz":142,"./maputils":148,"./viewer":201,"jquery":25}],144:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');
var modal = require('./modal');
var validateUrl = require('./utils/validateurl');

var symbolSize = 20;
var styleSettings;
var baseUrl;
var hasMapLegend;

function init(opt_options) {
  var options = opt_options || {};

  baseUrl = viewer.getBaseUrl();
  hasMapLegend = options.hasOwnProperty('hasMapLegend') ? options.hasMapLegend : true;
  styleSettings = viewer.getStyleSettings();

  render();
  addLegend(viewer.getGroups('top'));
}

function render() {
  $('#o-menutools').append('<li class="o-menu-item"><div class="o-menu-item-divider"></div><li>');
}

function getSymbol(style) {
  var symbol='';
  var s = style[0];
  if (s[0].hasOwnProperty('icon')) {
    var src = validateUrl(s[0].icon.src, baseUrl);
    // var scale = style.icon.scale || undefined;
    var format = s[0].format || 'png';
    if (format == 'png') {
      symbol = '<div class="o-legend-item-img"><img style="width: auto; height: 20px;" src="' + src + '"></div>'
    }
    else if (format == 'svg') {
      var o = '<object type="image/svg+xml" data="' + src + '" style="width: 20px;"></object>';
      var inlineStyle = 'background: url(' + src + ') no-repeat;width: 20px; height: 20px;background-size: 20px;';
      symbol = '<div class="o-legend-item-img">' + o + '</div>';
    }
  }
  else if (s[0].hasOwnProperty('fill')) {
    var fill = '';
    for(var i=0; i<s.length; i++) {
      fill += createFill(s[i]);
    }
    symbol += '<div class="o-legend-item-img"><svg height="' + symbolSize + '" width="' + symbolSize + '">';
    symbol += fill;
    symbol += '</svg></div>';
  }
  else if (s[0].hasOwnProperty('stroke')) {
    var stroke = '';
    for(var i=0; i<s.length; i++) {
      stroke += createStroke(s[i]);
    }
    symbol += '<div class="o-legend-item-img"><svg height="' + symbolSize + '" width="' + symbolSize + '">';
    symbol += stroke;
    symbol += '</svg></div>';
  }
  else if (s[0].hasOwnProperty('circle')) {
    var circle = '';
    for(var i=0; i<s.length; i++) {
      circle += createCircle(s[i]);
    }
    symbol += '<div class="o-legend-item-img"><svg height="' + symbolSize + '" width="' + symbolSize + '">';
    symbol += circle;
    symbol += '</svg></div>';
  }
  else if (s[0].hasOwnProperty('image')) {
    var src = validateUrl(s[0].image.src, baseUrl);
    var inlineStyle = 'background: url(' + src + ') no-repeat;width: 30px; height: 30px;background-size: 30px;';
    symbol = '<div class="o-legend-item-img" style="' + inlineStyle +'"></div>';
  }

  return symbol;
}

function createFill(fillProperties) {
  var f = fillProperties;
  var strokeWidth = 0;

  if(f.hasOwnProperty('stroke')) {
    strokeWidth = f.stroke.width >=3 ? 3 : f.stroke.width;
    var stroke = 'stroke:' + f.stroke.color + ';' || 'stroke:none;';
    stroke += 'stroke-width:' + strokeWidth + ';' || '';
    stroke += 'stroke-dasharray:' + f.stroke.lineDash + ';' || '';
  }

  var fillSize = symbolSize - 4; //-2-2
  var fill = '<rect x="2" y="2" rx="2" ry="2" width="' + fillSize + '" height="' + fillSize + '" ';
  fill += f.hasOwnProperty('fill') ? 'style="fill:' + f.fill.color + ';' : 'style="fill:none;';
  fill += stroke;
  fill += '"></rect>';

  return fill;
}

function createCircle(circleProperties) {
  var c = circleProperties.circle;
  var strokeWidth = 0;

  if(c.hasOwnProperty('stroke')) {
    strokeWidth = c.stroke.width >=3 ? 3 : c.stroke.width;
    var stroke = 'stroke:' + c.stroke.color + ';' || 'stroke:none;';
    stroke += 'stroke-width:' + strokeWidth + ';' || '';
  }

  var size = symbolSize/2;
  var fill = '<circle cx="' + size + '" cy="' + size + '" r="' + c.radius + '" ';
  fill += c.hasOwnProperty('fill') ? 'style="fill:' + c.fill.color + ';' : 'style="fill:none;';
  fill += stroke;
  fill += '"></circle>';

  return fill;
}

function createStroke(strokeProperties) {
  var s = strokeProperties;
  var strokeWidth = s.stroke.width > 4 ? 4 : s.stroke.width;
  strokeWidth = s.stroke.width < 2 ? 2 : strokeWidth;
  var stroke = '<line x1 = "2" y1= "' + (symbolSize-4).toString() + '" x2="' + (symbolSize-4).toString() + '" y2="2" ';
  stroke += 'style="';
  stroke += 'stroke:' + s.stroke.color + ';' || 'stroke:none;';
  stroke += 'stroke-width:' + strokeWidth + ';' || '';
  stroke += 'stroke-dasharray:' + s.stroke.lineDash + ';' || '';
  stroke += '"/>';

  return stroke;
}

function addAbstractButton(item) {
  var infoTextButton =  '<div class="o-legend-item-info o-abstract" id="o-legend-item-info-' + item + '">' +
                          '<svg class="o-icon-fa-info-circle"><use xlink:href="#fa-info-circle"></use></svg>' +
                        '</div>';
  return infoTextButton;
}

function createLegendItem(layerid, layerStyle, inSubgroup) {
  var layername = layerid.split('o-legend-').pop();
  var layer = viewer.getLayer(layername);
  var subClass = inSubgroup ? ' o-legend-subitem' : '';
  var legendItem = '';

  if (layerStyle && layerStyle[0][0].hasOwnProperty('filter')) {

    if (layerStyle[0][0].hasOwnProperty('legend')) {
      legendItem += '<li class="o-legend ' + layername + '">';
      legendItem += '<ul id="o-group-' + layername + '" class="o-legend-group o-ul-expand-false"><li class="' + layername + '" id="' + layerid + '">';
    } else {
      legendItem += '<li class="o-legend ' + layername + '" id="' + layerid + '">';
    }

    legendItem += '<div class ="o-legend-item' + subClass + '"><div class="o-checkbox">' +
                    '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                    '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                  '</div>';
    legendItem += '<div class="o-legend-item-title o-truncate">' + layer.get('title') + '</div>';

    if(layer.get('abstract')){
      legendItem += addAbstractButton(layername);
    }

    if (layerStyle[0][0].hasOwnProperty('legend')) {
      legendItem += '<div class="o-icon-expand o-icon-expand-false">' +
                      '<svg class="o-icon-fa-chevron-right">' +
                        '<use xlink:href="#fa-angle-double-right"></use>' +
                      '</svg>' +
                      '<svg class="o-icon-fa-chevron-down">' +
                        '<use xlink:href="#fa-angle-double-down"></use>' +
                      '</svg>' +
                    '</div>';
      legendItem += '</div></li>';

      layerStyle.forEach(function (styleArray) {
        legendItem += '<li class="o-legend ' + layername + '" id="' + layername + '"><div class ="o-legend-subitem">';
        legendItem += '<div class="o-checkbox o-checkbox-false"></div>';
        legendItem += layer.get('styleName') ? getSymbol([styleArray]) : '';
        legendItem += '<div class="o-legend-subitem-title">' + styleArray[0].legend + '</div></div></li>';
      });

      legendItem += '</ul></li>'
    }
  } else {
    legendItem += '<li class="o-legend ' + layername + '" id="' + layerid + '"><div class ="o-legend-item' + subClass + '"><div class="o-checkbox">' +
                    '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                    '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                  '</div>';
    legendItem +=  layer.get('styleName') ? getSymbol(styleSettings[layer.get('styleName')]) : '';
    legendItem += '<div class="o-legend-item-title o-truncate">' + layer.get('title') + '</div>';

    if(layer.get('abstract')){
      legendItem += addAbstractButton(layername);
    }

    legendItem += '</div></li>';
  }

  return legendItem;
}

function createGroup(group, parentGroup) {
  var legendGroup;
  var overlayGroup;
  var abstract = '';

  if (group.hasOwnProperty('overlayGroup')) {
    overlayGroup = group.name;
  }

  if (group.abstract) {
    abstract += addAbstractButton(group.name);
  }

  if (parentGroup) {
    var indent = $(parentGroup).parent().closest('ul').hasClass('o-legend-group') ? 'o-legend-indent' : '';

    legendGroup = '<li class="o-legend ' + group.name + ' o-top-item" id="' + group.name + '">' +
                    '<ul id="o-group-' + group.name + '" class="o-legend-group o-legend-subgroup ' + indent +'">' +
                      '<li class="o-legend-header o-legend-subheader ' + group.name + '" id="' + group.name + '"><div class="o-legend-item">' +
                        '<div class="o-checkbox">' +
                          '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                          '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                        '</div>' +
                        '<div class="o-legend-subgroup-title o-truncate">' +
                          group.title +
                        '</div>' +
                        '<div class="o-icon-expand">' +
                          '<svg class="o-icon-fa-chevron-right"><use xlink:href="#fa-angle-double-right"></use></svg>' +
                          '<svg class="o-icon-fa-chevron-down"><use xlink:href="#fa-angle-double-down"></use></svg>' +
                        '</div>' + abstract +
                      '</div></li>' +
                    '</ul>' +
                  '</li>';
    parentGroup.append(legendGroup);
  } else {
    legendGroup = '<li>' +
                    '<ul id="o-group-' + group.name + '" class="o-legend-group">' +
                      '<li class="o-legend-header"><div class="o-legend-item">' + group.title +
                        '<div class="o-icon-expand">' +
                          '<svg class="o-icon-fa-chevron-right"><use xlink:href="#fa-chevron-right"></use></svg>' +
                          '<svg class="o-icon-fa-chevron-down"><use xlink:href="#fa-chevron-down"></use></svg>' +
                        '</div>' + abstract +
                      '</div></li>' +
                    '</ul>' +
                  '</li>';
    $('#o-legendlist .o-legendlist').append(legendGroup);
  }

  if (group.expanded == true) {
    $('#o-group-' + group.name +' .o-icon-expand').addClass('o-icon-expand-true');
    $('#o-group-' + group.name +' .o-checkbox').addClass('o-checkbox-false');
  } else {
    $('#o-group-' + group.name +' .o-icon-expand').addClass('o-icon-expand-false');
    $('#o-group-' + group.name +' .o-checkbox').addClass('o-checkbox-false');
    $('#o-group-' + group.name).addClass('o-ul-expand-false');
  }

  $('#o-group-' + group.name + ' .o-legend-header').on('click', function(evt) {

    if ($(evt.target).closest('div').hasClass('o-checkbox')) {
      toggleSubGroupCheck($(this).parent(), true);
    } else if ($(evt.target).closest('div').hasClass('o-abstract')) {

    } else {
      toggleGroup($(this));
    }

    evt.preventDefault();
  });

  if (group.hasOwnProperty('groups')) {
    group.groups.forEach(function(subgroup) {
      createGroup(subgroup, $('#o-group-' + group.name));
    });
  }
}

function addLegend(groups) {
  var layers = viewer.getMap().getLayers().getArray();
  var overlayGroup;
  var item = '';

  //Add legend groups
  var legend = '<div id="o-legendlist"><ul class="o-legendlist"></ul></div>';
  $('#o-mapmenu').append(legend);

  groups.forEach(function(group) {
    createGroup(group);
  });

  //Add map legend unless set to false
  if(hasMapLegend) {
    var mapLegend = '<div id="o-map-legend"><ul id="o-legend-overlay"><li class="o-legend o-hidden"><div class ="o-toggle-button o-toggle-button-max">' +
                        '<svg class="o-icon-fa-angle-double-down"><use xlink:href="#fa-angle-double-down"></use></svg>' +
                        '<svg class="o-icon-fa-angle-double-up"><use xlink:href="#fa-angle-double-up"></use></svg>' +
                    '</div></li><li><ul id="o-overlay-list"></li></ul></ul><ul id="o-map-legend-background"></ul></div>';
    $('#o-map').append(mapLegend);

    //Add divider to map legend if not only background
    if(overlayGroup) {
      $('#o-map-legend-background').prepend('<div class="o-legend-item-divider"></div>');
    };
  }

  //Add layers to legend
  layers.forEach(function(layer) {

    var name = (layer.get('name'));
    var layerStyle = styleSettings[layer.get('styleName')];
    //Check if layer belongs to subgroup
    var inSubgroup = $('#o-group-' + layer.get('group')).closest('ul').parent().closest('ul').hasClass('o-legend-group');
    var title = '<div class="o-legend-item-title o-truncate">' + layer.get('title') + '</div>';

    //Add abstract button
    if(layer.get('abstract')){
      title += addAbstractButton(name);
    }
    title += '</div></li>';

    //Append layer to group in legend. Add to default group if not defined.
    if(layer.get('group') == 'background') {

      //Append background layers to menu
      item = '<li class="o-legend ' + name + '" id="' + name + '"><div class ="o-legend-item"><div class="o-checkbox"><svg class="o-icon-fa-check"><use xlink:href="#fa-check"></use></svg></div>';
      item += title;
      $('#o-group-background .o-legend-header').after(item);

      //Append background layers to map legend
      item = '<li class="o-legend ' + name + '" id="o-legend-' + name + '"><div class ="o-legend-item">'
      item += layer.get('styleName') ? getSymbol(styleSettings[layer.get('styleName')]) : '';
      item += '</div>';
      $('#o-map-legend-background').prepend(item);

    } else if(layer.get('group') && ((layer.get('group') != 'none'))) {

      //Append layer to group
      item = createLegendItem(name, layerStyle, inSubgroup);
      if ($('#o-group-' + layer.get('group')).find('li.o-top-item:last').length) {
        $('#o-group-' + layer.get('group')).find('li.o-top-item:last').after(item);
      } else {
        $('#o-group-' + layer.get('group') + ' .o-legend-header').after(item);
      }

      if(layer.get('legend') == true || layer.getVisible(true)) {
        //Append to map legend
        item = '<li class="o-legend ' + name + '" id="o-legend-' + name + '"><div class ="o-legend-item"><div class="o-checkbox">' +
                  '<svg class="o-icon-fa-square-o"><use xlink:href="#fa-square-o"></use></svg>' +
                  '<svg class="o-icon-fa-check-square-o"><use xlink:href="#fa-check-square-o"></use></svg>' +
                '</div>';
        item += layer.get('styleName') ? getSymbol(styleSettings[layer.get('styleName')]) : '';
        item += title;
        $('#o-overlay-list').prepend(item);
      }
    }

    //Check map legend to make sure minimize button appears
    checkToggleOverlay();

    //Append class according to visiblity and if group is background
    if (layer.get('group') == 'background') {
      if (layer.getVisible()==true) {
        $('#' + name + ' .o-checkbox').addClass('o-check-true');
        $('#o-legend-' + name).addClass('o-check-true-img');
      } else {
        $('#' + name + ' .o-checkbox').addClass('o-check-false');
        $('#o-legend-' + name).addClass('o-check-false-img');
      }
    } else {
      if (layer.getVisible()==true) {
        $('.' + name + ' .o-checkbox').addClass('o-checkbox-true');

        if (inSubgroup) {
          var parentGroups = $('#' + name).parents('ul [id^=o-group-]');
          [].forEach.call(parentGroups, function(el) {
            toggleGroup($(el).find('li:first'));
          });

          toggleSubGroupCheck($('#' + name).parents('ul').has('.o-legend-header').first(), false);
        } else {
          $('#o-group-' + layer.get('group') +' .o-icon-expand').removeClass('o-icon-expand-false');
          $('#o-group-' + layer.get('group') +' .o-icon-expand').addClass('o-icon-expand-true');
          $('#o-group-' + layer.get('group')).removeClass('o-ul-expand-false');
        }

      } else {
        $('.' + name + ' .o-checkbox').addClass('o-checkbox-false');
      }
    }

    //Event listener for tick layer
    $('#' + name).on('click', function(evt) {
      if ($(evt.target).closest('div').hasClass('o-icon-expand')) {
        toggleGroup($(this));
      } else {
        $(this).each(function() {
          var that = this;
          toggleCheck($(that).attr("id"));
        });

        evt.preventDefault();
      }
    });

    $('#o-legend-' + name).on('click', function(evt) {
      $(this).each(function() {
        var that = this;
        toggleCheck($(that).attr("id"));
      });

      evt.preventDefault();
    });
  });

  $('.o-abstract').on('click', function(evt) {
    $(this).each(function() {
      var that = this;
      showAbstract($(that));
    });
    evt.stopPropagation();
    evt.preventDefault();
  });

  //Toggle map legend
  $('#o-legend-overlay .o-toggle-button').on('click', function(evt) {
    toggleOverlay();
    evt.preventDefault();
  });
}

function onToggleCheck(layername) {
  //Event listener for tick layer
  $('#' + layername).on('click', function(evt) {
    $(this).each(function() {
      var that = this;
      toggleCheck($(that).attr("id"));
    });
    evt.preventDefault();
  });
}

function offToggleCheck(layername) {
  //Event listener for tick layer
  $('#' + layername).off('click', function(evt) {
    $(this).each(function() {
      var that = this;
      toggleCheck($(that).attr("id"));
    });

    evt.preventDefault();
  });
}

//Expand and minimize group
function toggleGroup(groupheader) {
  var group = groupheader.parent('.o-legend-group');
  var groupicon = $('#' + group.attr('id') + ' .o-icon-expand:first');

  if (groupicon.hasClass('o-icon-expand-false')) {
    groupicon.removeClass('o-icon-expand-false');
    groupicon.addClass('o-icon-expand-true');
    group.removeClass('o-ul-expand-false');
  } else {
    groupicon.removeClass('o-icon-expand-true');
    groupicon.addClass('o-icon-expand-false');
    group.addClass('o-ul-expand-false');
  }
}

//Toggle subgroups
function toggleSubGroupCheck(subgroup, toggleAll) {
  var subGroup = $(subgroup);
  var subLayers = subGroup.find('.o-legend-item.o-legend-subitem');
  var groupList = $('.o-legend-group');

  if (toggleAll) {

    subLayers.each(function() {
      var layername = $(this).parent().attr('id');
      var layer = viewer.getLayer(layername);
      var layerid = $(this).parent().attr('class');
      var inMapLegend = layerid.split('o-legend-').length > 1 ? true : false;

      if (subGroup.children().first().find('.o-checkbox').hasClass('o-checkbox-true')) {
        $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-true');
        $('.' + layername + ' .o-checkbox').addClass('o-checkbox-false');

        if (inMapLegend == false) {
          offToggleCheck('o-legend-' + layername);
          $('#o-legend-' + layername).remove();
          layer.set('legend', false);
          checkToggleOverlay();
        }

        layer.setVisible(false);
      } else {

        if (inMapLegend == false && $('#o-legend-' + layername).length == 0) {
          $('#o-overlay-list').prepend(createLegendItem('o-legend-' + layername));
          onToggleCheck('o-legend-' + layername);
          checkToggleOverlay();
        }

        $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-false');
        $('.' + layername + ' .o-checkbox').addClass('o-checkbox-true');
        layer.setVisible(true);
        layer.set('legend', true);
      }
    });
  }

  groupList.each(function() {
    var subList = $(this).find('.o-legend-item.o-legend-subitem').has('.o-checkbox');
    var subListChecked = $(this).find('.o-legend-item.o-legend-subitem').has('.o-checkbox.o-checkbox-true');

    if (subListChecked.length) {
      $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-false');
      $(this).children().first().find('.o-checkbox').addClass('o-checkbox-true');

      if (subList.length != subListChecked.length) {
        $(this).children().first().find('.o-checkbox').addClass('o-checkbox-semi');
      } else {
        $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-semi');
      }

    } else {
      $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-true');
      $(this).children().first().find('.o-checkbox').removeClass('o-checkbox-semi');
      $(this).children().first().find('.o-checkbox').addClass('o-checkbox-false');
    }
  });
}

//Toggle layers
function toggleCheck(layerid) {
  var layername = layerid.split('o-legend-').pop();
  var inMapLegend = layerid.split('o-legend-').length > 1 ? true : false;
  var layer = viewer.getLayer(layername);

  //Radio toggle for background
  if (layer.get('group') == 'background') {
    var groups = viewer.getGroup('background');

    groups.forEach(function(group) {
      group.setVisible(false);
      $('#' + group.get('name') + ' .o-checkbox').removeClass('o-check-true');
      $('#' + group.get('name') + ' .o-checkbox').addClass('o-check-false');
      //map legend
      $('#o-legend-' + group.get('name')).removeClass('o-check-true-img');
      $('#o-legend-' + group.get('name')).addClass('o-check-false-img');
    });

    layer.setVisible(true);
    $('#' + layername + ' .o-checkbox').removeClass('o-check-false');
    $('#' + layername + ' .o-checkbox').addClass('o-check-true');
    //map legend
    $('#o-legend-' + layername).removeClass('o-check-false-img');
    $('#o-legend-' + layername).addClass('o-check-true-img');
  } else { //Toggle check for all groups except background

    if ($('.' + layername + ' .o-checkbox').hasClass('o-checkbox-true')) {
      $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-true');
      $('.' + layername + ' .o-checkbox').addClass('o-checkbox-false');

      if (inMapLegend == false) {
        offToggleCheck('o-legend-' + layername);
        $('#o-legend-' + layername).remove();
        layer.set('legend', false);
        checkToggleOverlay();
      }

      layer.setVisible(false);
    } else {

      if (inMapLegend == false && $('#o-legend-' + layername).length == 0) {
        $('#o-overlay-list').prepend(createLegendItem('o-legend-' + layername));
        onToggleCheck('o-legend-' + layername);
        checkToggleOverlay();
      }

      $('.' + layername + ' .o-checkbox').removeClass('o-checkbox-false');
      $('.' + layername + ' .o-checkbox').addClass('o-checkbox-true');
      layer.setVisible(true);
      layer.set('legend', true);
    }

    if ($('#' + layername).find('.o-legend-subitem').length > 0) {
      toggleSubGroupCheck($('#' + layername).parents('ul').has('.o-legend-header').first(), false);
    }
  }
}

function checkToggleOverlay() {
  if($('#o-overlay-list li').length > 1 && $('#o-legend-overlay >li:first-child').hasClass('o-hidden')) {
    $('#o-legend-overlay > li:first-child').removeClass('o-hidden');
  } else if($('#o-overlay-list li').length < 2) {
    $('#o-legend-overlay > li:first-child').addClass('o-hidden');

    if($('#o-overlay-list').length == 1 && $('#o-overlay-list').hasClass('o-hidden')) {
      $('#o-overlay-list').removeClass('o-hidden');
      toggleOverlay();
    }
  }
}

function toggleOverlay() {
  if($('#o-legend-overlay .o-toggle-button').hasClass('o-toggle-button-max')) {
    $('#o-legend-overlay .o-toggle-button').removeClass('o-toggle-button-max');
    $('#o-legend-overlay .o-toggle-button').addClass('o-toggle-button-min');
    $('#o-overlay-list').addClass('o-hidden');
  } else {
    $('#o-legend-overlay .o-toggle-button').removeClass('o-toggle-button-min');
    $('#o-legend-overlay .o-toggle-button').addClass('o-toggle-button-max');
    $('#o-overlay-list').removeClass('o-hidden');
  }
}

//Set content for info button popup
function showAbstract($abstractButton) {
  var layer;
  var $item = $abstractButton.closest('li');
  var layername = $abstractButton.attr('id').split('o-legend-item-info-').pop();
  var abstract = {
    title: '',
    content: ''
  };

  //If info button is connected group
  if ($item.hasClass('o-legend-header')) {
    var groups = viewer.getGroups();

    var group = $.grep(groups, function(obj) {
      return (obj.name == layername);
    });

    abstract.title = group[0].title;
    abstract.content = group[0].abstract
  } else { // If info button is connected to layer
    layer = viewer.getLayer(layername);
    abstract.title = layer.get('title');
    abstract.content = layer.get('abstract');
  }

  modal.createModal('#o-map', {title: abstract.title, content: abstract.content});
  modal.showModal();
}

module.exports.init = init;

},{"./modal":150,"./utils":185,"./utils/validateurl":200,"./viewer":201,"jquery":25}],145:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var utils = require('./utils');

var url;
var title;
var $linkButton;

function init(opt_options) {
  var options = opt_options || {};
  url = options.url;
  title = options.title;

  render();
  bindUIActions();
}

function render() {
  var el = utils.createListButton({
    id: 'o-link',
    iconCls: 'o-icon-fa-external-link',
    src: '#fa-external-link',
    text: title

  });
  $('#o-menutools').append(el);
  $linkButton = $('#o-link-button');
}

function bindUIActions() {
  $linkButton.on('click', function() {
    window.open(url);
  });
}

module.exports.init = init;

},{"./utils":185,"jquery":25}],146:[function(require,module,exports){
"use strict";
var $ = require('jquery');
var supports = require('./utils/supports');
var permalink = require('./permalink/permalink');
var getUrl = require('./utils/geturl');
var isUrl = require('./utils/isurl');
var trimUrl = require('./utils/trimurl');

var mapLoader = function(mapOptions, config) {

  var map = {};
  var mapEl = config.target;
  var format = 'json';
  var cors = config.crossOrigin;

  var urlParams = undefined;

  if (mapEl.substring(0, 1) !== '#') {
    mapEl = '#' + mapEl;
  }
  map.el = mapEl;

  // Check browser support
  if (supports('browser', mapEl) === false) {
    return undefined;
  }

  // Check if authorization is required before map options is loaded
  if (config.authorizationUrl) {
    return $.ajax({
        url: config.authorizationUrl
      })
      .then(function(data) {
        return loadMapOptions();
      });
  } else {
    return loadMapOptions();
  }

  function loadMapOptions() {
    if (typeof(mapOptions) === 'object') {
      if (window.location.hash) {
        urlParams = permalink.parsePermalink(window.location.href);
      }
      var baseUrl = config.baseUrl || '';
      map.options = $.extend(config, mapOptions);
      if (mapOptions.controls) {
        map.options.controls = config.defaultControls.concat(mapOptions.controls);
      } else {
        map.options.controls = config.defaultControls;
      }
      map.options.url = getUrl();
      map.options.map = undefined;
      map.options.params = urlParams;
      map.options.baseUrl = baseUrl;

      return $.when.apply($, loadSvgSprites(baseUrl, config))
        .then(function(sprites) {
          return map;
        });

    } else if (typeof(mapOptions) === 'string') {
      if (isUrl(mapOptions)) {
        urlParams = permalink.parsePermalink(mapOptions);
        var url = mapOptions.split('#')[0];

        //remov file name if included in
        url = trimUrl(url);

        var baseUrl = config.baseUrl || url;
        var json = urlParams.map + '.json';
        var mapUrl = url;
        url += json;
      } else {
        if (window.location.hash) {
          urlParams = permalink.parsePermalink(window.location.href);
        }
        var baseUrl = config.baseUrl || '';
        var json = mapOptions;
        var url = baseUrl + json;
        var mapUrl = getUrl();
      }

      return $.when.apply($, loadSvgSprites(baseUrl, config))
        .then(function(sprites) {
          return $.ajax({
              url: url,
              dataType: format
            })
            .then(function(data) {
              map.options = $.extend(config, data);
              if (data.controls) {
                map.options.controls = config.defaultControls.concat(data.controls);
              } else {
                map.options.controls = config.defaultControls;
              }
              map.options.url = mapUrl;
              map.options.map = json;
              map.options.params = urlParams;
              map.options.baseUrl = baseUrl;
              return map;
            });
        });
    }
  }
}

function loadSvgSprites(baseUrl, config) {
  var svgSprites = config.svgSprites;
  var svgPath = config.svgSpritePath;
  var svgPromises = [];
  svgSprites.forEach(function(sprite) {
    var promise = $.get(baseUrl + svgPath + sprite, function(data) {
        var div = document.createElement("div");
        div.innerHTML = new XMLSerializer().serializeToString(data.documentElement);
        document.body.insertBefore(div, document.body.childNodes[0]);
      });
    svgPromises.push(promise);
    return svgPromises;
  });
}

module.exports = mapLoader;

},{"./permalink/permalink":163,"./utils/geturl":189,"./utils/isurl":192,"./utils/supports":197,"./utils/trimurl":198,"jquery":25}],147:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var $menuButton, $closeButton, $mapMenu;

var symbolSize = 20;
var styleSettings;

function init() {
    styleSettings = viewer.getStyleSettings();
    var el = utils.createButton({
        text: 'Meny',
        id: 'o-mapmenu-button',
        cls: 'o-mapmenu-button-true',
        iconCls: 'o-icon-fa-bars',
        src: '#fa-bars',
        tooltipText: 'Meny',
        tooltipPlacement: 'west'
    });
    $('#o-map').append(el);
    $menuButton = $('#o-mapmenu-button button');

    var menuEl = '<div id="o-mapmenu" class="o-mapmenu">' +
                    '<div class="o-block">' +
                      '<ul id="o-menutools">' +
                        '<li></li>' +
                      '</ul>'
                    '</div>' +
                  '</div>';
    $('#o-map').append(menuEl);
    $mapMenu = $('#o-mapmenu');

    var closeButton = utils.createButton({
        id: 'o-mapmenu-button-close',
        cls: 'o-no-boxshadow',
        iconCls: 'o-icon-menu-fa-times',
        src: '#fa-times',
        tooltipText: 'Stäng meny',
        tooltipPlacement: 'west'
    });
    $('#o-menutools').append(closeButton);
    $closeButton = $('#o-mapmenu-button-close');

    bindUIActions();
}
function bindUIActions() {
    $menuButton.on('click', function(e) {
      	toggleMenu();
        $menuButton.blur();
        e.preventDefault();
    });
    $closeButton.on('click', function(e) {
      	toggleMenu();
        $closeButton.blur();
        e.preventDefault();
    });
}
function toggleMenu() {
    if($mapMenu.hasClass('o-mapmenu-show')){
      $mapMenu.removeClass('o-mapmenu-show');
    }
    else {
      $mapMenu.addClass('o-mapmenu-show');
    }
}
function getTarget() {
    return $mapMenu;
}

module.exports.init = init;
module.exports.toggleMenu = toggleMenu;
module.exports.getTarget = getTarget;

},{"./utils":185,"./viewer":201,"jquery":25}],148:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');

module.exports = {
  customProjection: function(projectionCode, extent) {
      return new ol.proj.Projection({
          code: projectionCode,
          extent: extent
      });
  },
  tileGrid: function(extent, resolutions) {
      var origin = ol.extent.getTopLeft(extent);
      return new ol.tilegrid.TileGrid({
          extent: extent,
          origin: origin,
          resolutions: resolutions
      });
  },
  checkZoomChange: function checkZoomChange(resolution, currentResolution) {
      if(resolution !== currentResolution) {
        return true;
      }
      else {
        return false;
      }
  },
  createPointFeature: function createPointFeature(coordinate, style) {
      var feature = new ol.Feature({
          geometry: new ol.geom.Point(coordinate)
      });
      feature.setStyle(style);
      return feature;
  },
  geojsonToFeature: function geojsonToFeature(obj) {
      var vectorSource = new ol.source.Vector({
        features: (new ol.format.GeoJSON()).readFeatures(obj)
      });
      return vectorSource.getFeatures()[0];
  },
  wktToFeature: function wktToFeature(wkt, srsName) {
      var format = new ol.format.WKT();
      var feature = format.readFeature(wkt, {
        dataProjection: srsName,
        featureProjection: srsName
      });
      return feature;
  },
  zoomToExent: function zoomToExent(geometry, level) {
      var map = viewer.getMap();
      var view = map.getView();
      var maxZoom = level;
      var extent = geometry.getExtent();
      if(extent) {
          view.fit(extent, {maxZoom: maxZoom});
          return extent;
      }
      else {
        return undefined;
      }
  },
  getCenter: function getCenter(geometry) {
      var type = geometry.getType();
      var center;
      switch (type) {
          case "Polygon":
              center = geometry.getInteriorPoint().getCoordinates();
              break;
          case "MultiPolygon":
              center = geometry.getInteriorPoints()[0].getCoordinates();
              break;
          case "Point":
              center = geometry.getCoordinates();
              break;
          case "MultiPoint":
              center = geometry[0].getCoordinates();
              break;
          case "LineString":
              center = geometry.getCoordinateAt(0.5);
              break;
          case "MultiLineString":
              center = geometry.getLineStrings()[0].getCoordinateAt(0.5);
              break;
          case "Circle":
              center = geometry.getCenter();
              break;
      }
      return center;
  },
  scaleToResolution: function scaleToResolution(scale, projection) {
    var dpi = 25.4 / 0.28;
    var mpu = projection.getMetersPerUnit();
    var resolution = scale / (mpu * 39.37 * dpi);
    return resolution;
  }
}

},{"./viewer":201,"jquery":25,"openlayers":28}],149:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var style = require('./style')();
var styleTypes = require('./style/styletypes');

var map;
var activeButton;
var defaultButton;
var measure;
var type;
var sketch;
var measureTooltip;
var measureTooltipElement;
var measureStyleOptions;
var helpTooltip;
var helpTooltipElement;
var vector;
var source;
var label;
var overlayArray = [];
var drawStart = false;
var isActive = false;
var wgs84Sphere = new ol.Sphere(6378137);

function init(opt_options) {
  var options = opt_options || {};
  var target = options.target || '#o-toolbar-maptools';
  map = Viewer.getMap();
  source = new ol.source.Vector();
  measureStyleOptions = styleTypes.getStyle('measure');

  //Drawn features
  vector = new ol.layer.Vector({
    source: source,
    name: 'measure',
    visible: false,
    zIndex: 6
  });

  map.addLayer(vector);

  $('.o-map').on('enableInteraction', onEnableInteraction);

  render(target);
  bindUIActions();

  defaultButton = $('#o-measure-line-button button');
}

function onEnableInteraction(e) {
  if(e.interaction === 'measure') {
    $('#o-measure-button button').addClass('o-measure-button-true');
    $('#o-measure-line-button').removeClass('o-hidden');
    $('#o-measure-polygon-button').removeClass('o-hidden');
    $('#o-measure-button').removeClass('tooltip');
    setActive(true);
    defaultButton.trigger('click');
  } else {
    if (activeButton) {
      activeButton.removeClass('o-measure-button-true');
    };

    $('#o-measure-button button').removeClass('o-measure-button-true');
    $('#o-measure-line-button').addClass('o-hidden');
    $('#o-measure-polygon-button').addClass('o-hidden');
    $('#o-measure-button').addClass('tooltip');

    map.un('pointermove', pointerMoveHandler);
    map.un('click', pointerMoveHandler);
    map.removeInteraction(measure);
    vector.setVisible(false);
    Viewer.removeOverlays(overlayArray);
    vector.getSource().clear();
    setActive(false);
  }

}

function setActive(state) {
  if(state === true) {
    isActive = true;
  } else {
    isActive = false;
  }

}

function render(target) {

  var toolbar = utils.createElement('div', '', {
    id: 'o-measure-toolbar',
    cls: 'o-toolbar-horizontal'
  });

  $(target).append(toolbar);

  var mb = utils.createButton({
    id: 'o-measure-button',
    cls: 'o-measure-button',
    iconCls: 'o-icon-steady-measure',
    src: '#steady-measure',
    tooltipText: 'Mät i kartan'
  });
  $('#' + 'o-measure-toolbar').append(mb);

  var lb = utils.createButton({
    id: 'o-measure-line-button',
    cls: 'o-measure-type-button',
    iconCls: 'o-icon-minicons-line-vector',
    src: '#minicons-line-vector',
    tooltipText: 'Linje',
    tooltipPlacement: 'north'
  });
  $('#' + 'o-measure-toolbar').append(lb);

  $('#o-measure-line-button').addClass('o-hidden');

  var pb = utils.createButton({
    id: 'o-measure-polygon-button',
    cls: 'o-measure-type-button',
    iconCls: 'o-icon-minicons-square-vector',
    src: '#minicons-square-vector',
    tooltipText: 'Yta',
    tooltipPlacement: 'north'
  });

  $('#' + 'o-measure-toolbar').append(pb);
  $('#o-measure-polygon-button').addClass('o-hidden');
}

function bindUIActions() {
  $('#o-measure-button').on('click', function(e) {
    toggleMeasure();
    $('#o-measure-button button').blur();
    e.preventDefault();
  });

  $('#o-measure-line-button').on('click', function(e) {
    type = 'LineString';
    toggleType($('#o-measure-line-button button'));
    $('#o-measure-line-button button').blur();
    e.preventDefault();
  });

  $('#o-measure-polygon-button').on('click', function(e) {
    type = 'Polygon';
    toggleType($('#o-measure-polygon-button button'));
    $('#o-measure-polygon-button button').blur();
    e.preventDefault();
  });

}

function createStyle(feature, labelText) {
  var featureType = feature.getGeometry().getType();
  var measureStyle = featureType == 'LineString' ? style.createStyleRule(measureStyleOptions.linestring) : style.createStyleRule(measureStyleOptions.polygon);

  return measureStyle;
}

//Display and move tooltips with pointer
function pointerMoveHandler(evt) {
  if (evt.dragging) {
    return;
  }

  var helpMsg = 'Klicka för att börja mäta';
  var tooltipCoord = evt.coordinate;

  if (sketch) {
    var output;
    var geom = (sketch.getGeometry());

    if (geom instanceof ol.geom.Polygon) {
      output = formatArea(/** @type {ol.geom.Polygon} */ (geom));
      tooltipCoord = geom.getInteriorPoint().getCoordinates();
    } else if (geom instanceof ol.geom.LineString) {
      output = formatLength( /** @type {ol.geom.LineString} */ (geom));
      tooltipCoord = geom.getLastCoordinate();
    }

    measureTooltipElement.innerHTML = output;
    label = output;
    measureTooltip.setPosition(tooltipCoord);
  }

  if (evt.type == 'pointermove') {
    helpTooltipElement.innerHTML = helpMsg;
    helpTooltip.setPosition(evt.coordinate);
  }

};

function addInteraction() {
  vector.setVisible(true);

  measure = new ol.interaction.Draw({
    source: source,
    type: type,
    style: style.createStyleRule(measureStyleOptions.interaction)
  });

  map.addInteraction(measure);

  createMeasureTooltip();
  createHelpTooltip();

  map.on('pointermove', pointerMoveHandler);
  map.on('click', pointerMoveHandler);

  measure.on('drawstart', function(evt) {
    // set sketch
    drawStart = true;
    sketch = evt.feature;
    $(helpTooltipElement).addClass('o-hidden');
  }, this);

  measure.on('drawend', function(evt) {
    var feature = evt.feature;
    feature.setStyle(createStyle(feature));
    feature.getStyle()[0].getText().setText(label);
    $(measureTooltipElement).remove();
    // unset sketch
    sketch = null;
    // unset tooltip so that a new one can be created
    measureTooltipElement = null;
    createMeasureTooltip();
    $(helpTooltipElement).removeClass('o-hidden');
  }, this);

};

function createHelpTooltip() {
  if (helpTooltipElement) {
    helpTooltipElement.parentNode.removeChild(helpTooltipElement);
  }

  helpTooltipElement = document.createElement('div');
  helpTooltipElement.className = 'o-tooltip o-tooltip-measure';

  helpTooltip = new ol.Overlay({
    element: helpTooltipElement,
    offset: [15, 0],
    positioning: 'center-left',
  });

  overlayArray.push(helpTooltip);
  map.addOverlay(helpTooltip);
};

function createMeasureTooltip() {
  if (measureTooltipElement) {
    measureTooltipElement.parentNode.removeChild(measureTooltipElement);
  }

  measureTooltipElement = document.createElement('div');
  measureTooltipElement.className = 'o-tooltip o-tooltip-measure';

  measureTooltip = new ol.Overlay({
    element: measureTooltipElement,
    offset: [0, -15],
    positioning: 'bottom-center',
    stopEvent: false
  });

  overlayArray.push(measureTooltip);
  map.addOverlay(measureTooltip);
};

function formatLength(line) {
  var length, output;
  var coordinates = line.getCoordinates();
  length = coordinates.reduce(getLength,0);

  if (length > 100) {
    output = (Math.round(length / 1000 * 100) / 100) +
      ' ' + 'km';
  } else {
    output = (Math.round(length * 100) / 100) +
      ' ' + 'm';
  }
  return output;
};

function getLength(total, value, index, arr){
  if(index<arr.length-1){
    var sourceProj = map.getView().getProjection();
    var c1 = ol.proj.transform(arr[index], sourceProj, 'EPSG:4326');
    var c2 = ol.proj.transform(arr[index + 1], sourceProj, 'EPSG:4326');
    total += wgs84Sphere.haversineDistance(c1, c2);
  }
  return total;
}

function formatArea(polygon) {
  var area;
  var sourceProj = map.getView().getProjection();
  var geom = /** @type {ol.geom.Polygon} */(polygon.clone().transform(sourceProj, 'EPSG:4326'));
  var coordinates = geom.getLinearRing(0).getCoordinates();
  area = Math.abs(wgs84Sphere.geodesicArea(coordinates));
  var output;

  if (area > 10000000) {
    output = (Math.round(area / 1000000 * 100) / 100) +
      ' ' + 'km<sup>2</sup>';
  } else if (area > 10000) {
    output = (Math.round(area / 10000 * 100) / 100) +
      ' ' + 'ha';
  } else {
    output = (Math.round(area * 100) / 100) +
      ' ' + 'm<sup>2</sup>';
  }

  var htmlElem = document.createElement('span');
  htmlElem.innerHTML = output;

  [].forEach.call(htmlElem.children, function(element) {
    if (element.tagName === 'SUP') {
      element.textContent = String.fromCharCode(element.textContent.charCodeAt(0) + 128);
    }
  })

  return htmlElem.textContent;
};

function toggleMeasure () {
  if (isActive) {
    $('.o-map').trigger({
      type: 'enableInteraction',
      interaction: 'featureInfo'
    });
  } else {
    $('.o-map').trigger({
      type: 'enableInteraction',
      interaction: 'measure'
    });
  }

};

function toggleType(button) {
  if (activeButton) {
    activeButton.removeClass('o-measure-button-true');
  }

  button.addClass('o-measure-button-true');
  activeButton = button;
  map.removeInteraction(measure);
  addInteraction();
};

module.exports.init = init;

},{"./style":176,"./style/styletypes":179,"./utils":185,"./viewer":201,"jquery":25,"openlayers":28}],150:[function(require,module,exports){
"use strict";
var $ = require('jquery');

var modal = function() {

  var isStatic = undefined;
  var $target = undefined;
  var modalEl = undefined;

  return {
    createModal: createModal,
    showModal: showModal,
    closeModal: closeModal
  };

  function render(title, content, cls) {
    modalEl = '<div id="o-modal" ' + 'class="' + cls + '">' +
      '<div class="o-modal-screen"></div>' +
      '<div class="o-modal">' +
      '<div class="o-close-button"><svg class="o-icon-fa-times"><use xlink:href="#fa-times"></use></svg></div>' +
      '<div class="o-modal-title">' + title + '</div>' +
      '<div class="o-modal-content">' + content + '</div>' +
      '</div>' +
      '</div>';
  }

  function bindUIActions() {
    if (isStatic === false) {
      $('.o-modal-screen, .o-close-button').click(function() {
        closeModal();
      });
    } else {
      $('.o-close-button').click(function() {
        closeModal();
      });
    }
  }

  function createModal(modalTarget, options) {
    var title = options.title || '';
    var content = options.content || '';
    var cls = options.cls || '';
    if (options.hasOwnProperty('static')) {
      isStatic = options.static;
    } else {
      isStatic = false;
    }
    render(title, content, cls);
    $target = $(modalTarget);

  }

  function showModal() {
    $target.prepend(modalEl);
    bindUIActions();
  }

  function closeModal() {
    $('#o-modal').remove();
  }
}

module.exports = modal();

},{"jquery":25}],151:[function(require,module,exports){
/* ========================================================================
 * Copyright 2016 Origo
 * Licensed under BSD 2-Clause (https://github.com/origo-map/origo/blob/master/LICENSE.txt)
 * ======================================================================== */
"use strict";

var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var downloader = require('./offline/downloader');
var downloadHandler = require('./offline/downloadhandler');
var offlineStore = require('./offline/offlinestore')();

var map = undefined;
var baseUrl = undefined;
var $offlineButton = undefined;

function Init(opt_options) {
  var options = opt_options || {};
  map = Viewer.getMap();
  baseUrl = Viewer.getBaseUrl();

  downloadHandler();

  render();
  bindUIActions();
}

function render() {
  var el = utils.createListButton({
    id: 'o-offline',
    iconCls: 'o-icon-fa-download',
    src: '#fa-download',
    text: 'Nedladdningar'
  });
  $('#o-menutools').append(el);
  $offlineButton = $('#o-offline-button');
}

function bindUIActions() {
  $offlineButton.on('click', function(e) {
    downloader(offlineStore.getOfflineLayers());
    e.preventDefault();
  });
}

module.exports.init = Init;

},{"./offline/downloader":152,"./offline/downloadhandler":154,"./offline/offlinestore":159,"./utils":185,"./viewer":201,"jquery":25}],152:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Viewer = require('../viewer');
var template = require("./downloader.template.handlebars");
var spinner = require("../components/spinner.handlebars");
var utils = require('../utils');
var dispatcher = require('./offlinedispatcher');

var toolbarPrefix = 'o-downloader-td-toolbar-';

var Downloader = function Downloader(layersObj) {
  render(layersObj);
  addListeners();

  function render(layersObj) {
    $('#o-map').prepend(template);
    renderRows(layersObj);

    bindUIActions();
  }

  function addListeners() {
    $(document).on('changeOfflineStart', onChangeOfflineStart);
    $(document).on('changeOfflineEnd', onChangeOfflineEnd);
  }

  function onChangeOfflineStart(e) {
    renderButtons('#' + toolbarPrefix + e.layerName, 'pending', e.layerName);
  }

  function onChangeOfflineEnd(e) {
    renderButtons('#' + toolbarPrefix + e.layerName, e.state, e.layerName);
  }

  function bindUIActions() {
    $('.o-downloader .o-close-button').on('click', function(evt) {
        closeDownloader();
        evt.preventDefault();
    });
  }

  function renderRows(layersObj) {
    var layerNames = Object.getOwnPropertyNames(layersObj);
    layerNames.forEach(function(layerName) {
      renderRow(layerName, layersObj);
    });
  }

  function renderRow(layerName, layersObj) {
    var layer = Viewer.getLayer(layerName);
    var tdTitle = utils.createElement('td', layer.get('title'),{});
    var toolbarId = toolbarPrefix + layerName;
    var toolbar = utils.createElement('div', '', {
      cls: 'o-toolbar-horizontal',
      style: 'text-align: right; float: right;',
      id: toolbarId
    });
    var tdToolbar = utils.createElement('td', toolbar, {});
    var row = tdTitle + tdToolbar;
    var cls = 'o-downloader-tr-' + layerName;
    var tr = utils.createElement('tr', row, {
      cls: cls
    });
    var state;
    $('.o-downloader .o-table').append(tr);
    state =  layersObj[layerName].downloaded === true ? 'offline' : 'download';
    renderButtons('#' + toolbarId, state, layerName);
  }

  function renderButtons(target, state, layerName) {
    $(target).empty();
    if (state === 'offline') {
      renderSync(target, layerName);
      renderRemove(target, layerName);
    } else if (state === 'download') {
      renderDownload(target, layerName);
    } else if (state === 'pending') {
      renderPending(target);
    }
  }

  function renderSync(target, layerName) {
    var id = 'o-downloader-refresh-' + layerName;
    var refresh = createButton({
      href: '#fa-refresh',
      cls: 'o-icon-fa-refresh',
      id: id
    });
    $(target).append(refresh);
    bindAction('#' + id, layerName, 'sync');
  }

  function renderRemove(target, layerName) {
    var id = 'o-downloader-trash-' + layerName;
    var trash = createButton({
      href: '#fa-trash',
      cls: 'o-icon-fa-trash',
      id: id
    });
    $(target).append(trash);
    bindAction('#' + id, layerName, 'remove');
  }

  function renderDownload(target, layerName) {
    var id = 'o-downloader-download-' + layerName;
    var download = createButton({
      href: '#fa-download',
      cls: 'o-icon-fa-download',
      id: id
    });
    $(target).append(download);
    bindAction('#' + id, layerName, 'download');
  }

  function renderPending(target) {
    var spinnerButton = utils.createElement('button', '', {
      cls: 'o-spinner'
    });
    $(target).append(spinnerButton);
    $('.o-spinner').append(spinner);
  }

  function createButton(obj) {
    var icon = utils.createSvg({
      href: obj.href,
      cls: obj.cls
    });
    return utils.createElement('button', icon, {
      id: obj.id
    });
  }

  function closeDownloader() {
    $('.o-downloader').remove();
  }

  function bindAction(target, layerName, type) {
    $(target).on('click', function(evt) {
      dispatcher.emitChangeDownload(layerName, type);
      evt.preventDefault();
      evt.stopPropagation();
    });
  }

}

module.exports = Downloader;

},{"../components/spinner.handlebars":101,"../utils":185,"../viewer":201,"./downloader.template.handlebars":153,"./offlinedispatcher":157,"jquery":25}],153:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<div class=\"o-container-fluid o-downloader\">\r\n  <div class=\"o-card\">\r\n    <div class=\"o-card-header o-text-center\">\r\n      <h6 class=\"o-card-heading\">Nedladdningar</h6>\r\n      <div class=\"o-close-button\">\r\n        <svg class=\"o-icon-fa-times\"><use xlink:href=\"#fa-times\"></use></svg>\r\n      </div>\r\n    </div>\r\n    <div class=\"o-card-content\">\r\n      <table class =\"o-table\">\r\n\r\n      </table>\r\n    </div>\r\n  </div>\r\n</div>\r\n";
},"useData":true});

},{"hbsfy/runtime":24}],154:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var layerCreator = require('../layercreator');
var offlineLayer = require('./offlinelayer')();
var downloadSources = require('./downloadsources');
var dispatcher = require('./offlinedispatcher');
var offlineStore = require('./offlinestore')();

var downloadErrorMsg = 'Det inträffade ett fel när lagret skulle hämtas. Är du ansluten till internet?'
var saveErrorMsg = 'Det inträffade ett fel när förändringarna skulle sparas. Försök igen senare.';
var invalidFormatMsg = 'Invalid format: ';

var downloadHandler = function downloadHandler() {
  $(document).on('changeDownload', onChangeDownload);
  offlineStore.init();

  function onChangeDownload(e) {
    e.stopImmediatePropagation();
    if (e.action === 'download') {
      download(e.layerName);
    } else if (e.action === 'sync') {
      sync(e.layerName);
    } else if (e.action === 'remove') {
      removeDownloaded(e.layerName);
    }
  }

  function removeDownloaded(layerName) {
    var layer = viewer.getLayer(layerName);
    var props = layer.getProperties();
    var source;
    dispatcher.emitChangeOfflineStart(layerName);
    props.style = props.styleName;
    props.source = props.sourceName;
    props.type = props.onlineType;
    source = layerCreator(props).getSource();
    layer.setSource(source);
    dispatcher.emitChangeOffline(layer.get('name'), 'remove');
  }

  function sync(layerName) {
    var offlineEdits = offlineStore.getOfflineEdits(layerName);
    dispatcher.emitChangeOfflineStart(layerName);
    if (offlineEdits) {
      offlineEdits
        .then(function(editItems) {
          saveToRemote(editItems, layerName)
            .then(function() {
              download(layerName);
            })
            .fail(function(err) {
              abort(layerName, saveErrorMsg, 'alert');
            });
        });
    } else {
      download(layerName);
    }
  }

  function saveToRemote(editItems, layerName) {
    var layer = viewer.getLayer(layerName);
    var transObj = {
      delete: [],
      insert: [],
      update: []
    };
    var ids = [];
    editItems.forEach(function(item) {
      var id = Object.getOwnPropertyNames(item)[0];
      var feature = layer.getSource().getFeatureById(id);
      var dummy;
      if (feature) {
        transObj[item[id]].push(feature);
        ids.push(id);
      } else if (item[id] === 'delete') {
        dummy = new ol.Feature();
        dummy.setId(id);
        transObj[item[id]].push(dummy);
        ids.push(id);
      }
    });

    return downloadSources[layer.get('onlineType')].transaction(transObj, layerName)
      .then(function(result) {
        if (result > 0) {
          dispatcher.emitChangeOffline(layer.get('name'), 'edits', ids);
        }
      });
  }

  function download(layerName) {
    var layer = viewer.getLayer(layerName);
    var type = layer.get('onlineType');
    dispatcher.emitChangeOfflineStart(layerName);
    if (downloadSources.hasOwnProperty(type)) {
      downloadSources[type].request(layer)
        .then(function(result) {
          offlineLayer.setOfflineSource(layerName, result);
          dispatcher.emitChangeOffline(layer.get('name'), 'download');
        })
        .fail(function(error) {
          abort(layerName, downloadErrorMsg, 'alert');
        });
    } else {
      error = 'Sorry, ' + type + ' is not available as on offline format';
      abort(layerName, invalidFormatMsg + type);
    }
  }

  function abort(layerName, error, isAlert) {
    var action;
    if (offlineStore.getOfflineLayer(layerName).downloaded) {
      action = 'offline';
    } else {
      action = 'download';
    }

    if (isAlert) {
      alert(error);
    } else {
      console.log(error);
    }

    dispatcher.emitChangeOfflineEnd(layerName, action);
  }
}

module.exports = downloadHandler;

},{"../layercreator":143,"../viewer":201,"./downloadsources":155,"./offlinedispatcher":157,"./offlinelayer":158,"./offlinestore":159,"jquery":25,"openlayers":28}],155:[function(require,module,exports){
"use strict";

var sources = {};
sources.WFS = require('./wfs');
sources.GEOJSON = require('./geojson');
sources.TOPOJSON = require('./topojson');

module.exports = sources;

},{"./geojson":156,"./topojson":160,"./wfs":162}],156:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var verifyFeatureIds = require('./verifyfeatureids');

var geojson = {};
geojson.request = function request(layer) {
  var source = layer.get('sourceName');
  var request = createRequest(source);
  return request;

  function createRequest(source) {
    var format = new ol.format.GeoJSON();
    var url = source;

    return $.ajax({
        url: url,
        cache: false
      })
      .then(function(response) {
        var features = format.readFeatures(response);
        features = verifyFeatureIds(features);
        return features;
      });
  }
}

module.exports = geojson;

},{"./verifyfeatureids":161,"jquery":25,"openlayers":28}],157:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = {
  emitChangeOffline: emitChangeOffline,
  emitChangeDownload: emitChangeDownload,
  emitChangeOfflineStart: emitChangeOfflineStart,
  emitChangeOfflineEnd: emitChangeOfflineEnd
}

function emitChangeOffline(layerName, action, ids) {
  $.event.trigger({
    type: 'changeOffline',
    layerName: layerName,
    action: action,
    ids: ids || undefined
  });
}

function emitChangeDownload(layerName, action) {
  $.event.trigger({
    type: 'changeDownload',
    layerName: layerName,
    action: action
  });
}

function emitChangeOfflineStart(layerName) {
  $.event.trigger({
    type: 'changeOfflineStart',
    layerName: layerName
  });
}

function emitChangeOfflineEnd(layerName, state) {
  $.event.trigger({
    type: 'changeOfflineEnd',
    layerName: layerName,
    state: state
  });
}

},{"jquery":25}],158:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('../viewer');
var layerCreator = require('../layercreator');

var offlineLayer = function offlineLayer() {

  return {
    setOfflineSource: setOfflineSource,
    setOnlineSource: setOnlineSource
  }

  function setOfflineSource(layerName, features) {
    var layer = viewer.getLayer(layerName);
    var source;
    var options;
    layer.set('type', 'OFFLINE');

    // Create a feature layer and get the source
    options = layer.getProperties();
    options.type = 'FEATURE';
    options.features = features;
    options.style = options.styleName;
    source = layerCreator(options).getSource();
    layer.setSource(source);
    return layer;
  }

  function setOnlineSource(layerName) {
    var layer = viewer.getLayer(layerName);
    var source;
    var options;

    // Create a layer with the online source and get the source
    layer.set('type', layer.get('onlineType'));
    options = layer.getProperties();
    options.source = options.sourceName;
    options.style = options.styleName;
    source = layerCreator(options).getSource();
    layer.setSource(source);
    return layer;
  }
}

module.exports = offlineLayer;

},{"../layercreator":143,"../viewer":201,"jquery":25}],159:[function(require,module,exports){
var $ = require('jquery');
var ol = require('openlayers');
var viewer = require('../viewer');
var localforage = require('localforage');
var offlineLayer = require('./offlinelayer')();
var dispatcher = require('./offlinedispatcher');
var editorDispatcher = require('../editor/editdispatcher');
var format = new ol.format.GeoJSON();
var storage = {};
var editsStorage = {};
var offlineLayers = {};
var storageName;
var editsStorageName;
var map;

function offlineStore() {

  return {
    getOfflineLayers: getOfflineLayers,
    getOfflineLayer: getOfflineLayer,
    getOfflineEdits: getOfflineEdits,
    getEditsItems: getEditsItems,
    init: Init
  };

  function Init(opt_options) {
    var options = opt_options || {};
    var layerNames;
    map = viewer.getMap();
    storageName = options.name || 'origo-layers';
    editsStorageName = options.editsName || 'origo-layers-edits';
    layerNames = viewer.getLayersByProperty('offline', true, true);
    setOfflineLayers(layerNames);
    storage = createInstances(layerNames, storageName);
    editsStorage = createInstances(layerNames, editsStorageName);
    initLayers();

    $(document).on('changeOffline', onChangeOffline);
    $(document).on('changeOfflineEdits', onChangeOfflineEdits);
  }

  function createInstances(layerNames, name) {
    var instances = {};
    layerNames.forEach(function(layerName) {
      instances[layerName] = localforage.createInstance({
        name: name,
        storeName: layerName
      });
    });

    return instances;
  }

  function getOfflineLayers() {
    return offlineLayers;
  }

  function getOfflineLayer(layerName) {
    return offlineLayers[layerName];
  }

  function getOfflineEdits(layerName) {
    if (offlineLayers[layerName].edits) {
      return getEditsItems(layerName);
    } else {
      return undefined;
    }
  }

  function setOfflineLayers(layerNames) {
    layerNames.forEach(function(layerName) {
      var layer = viewer.getLayer(layerName);
      layer.set('onlineType', layer.get('type'));
      offlineLayers[layerName] = createOfflineObj();
      offlineLayer.setOfflineSource(layerName, []);
    });
  }

  function onChangeOffline(e) {
    e.stopImmediatePropagation();
    if (e.action === 'download') {
      onDownload(e.layerName)
    } else if (e.action === 'edits') {
      ondEdits(e.layerName, e.ids);
    } else if (e.action === 'remove') {
      onRemove(e.layerName);
    }
  }

  function onChangeOfflineEdits(e) {
    e.stopImmediatePropagation();
    if (editsStorage[e.layerName]) {

    } else {
      editsStorage[e.layerName] = localforage.createInstance({
        name: editsStorageName,
        storeName: e.layerName
      });
    }
    if (e.edits.update) {
      saveUpdate(e.edits.update, e.layerName);
    }
    if (e.edits.insert) {
      saveInsert(e.edits.insert, e.layerName);
    }
    if (e.edits.delete) {
      saveDelete(e.edits.delete, e.layerName);
    }
  }

  function onDownload(layerName) {
    if (offlineLayers[layerName].downloaded) {
      storage[layerName].clear()
        .then(function() {
          saveFeaturesToStorage(layerName);
        });
    } else {
      saveFeaturesToStorage(layerName);
    }
  }

  function ondEdits(layerName, ids) {
    var promises = ids.map(function(id) {
      return removeFromEditsStorage(id, layerName);
    });
    return Promise.all(promises).then(function() {
      return true;
    });
  }

  function onRemove(layerName) {
    if (offlineLayers[layerName].edits) {
      var proceed = confirm('Du har fortfarande offline-ändringar som inte är sparade. Om du fortsätter kommer dessa att försvinna.');
      if (proceed) {
        removeDownloaded(layerName);
      }
    } else {
      removeDownloaded(layerName);
    }
  }

  function removeDownloaded(layerName) {
    if (offlineLayers[layerName]) {
      return storage[layerName].clear()
        .then(function() {
          setLayerOnline(layerName);
          dispatcher.emitChangeOfflineEnd(layerName, 'download');
        });
    }
  }

  function createOfflineObj() {
    return {
      downloaded: false,
      edits: false
    }
  }

  function setDownloaded(layerName, downloaded) {
    if (downloaded) {
      offlineLayers[layerName].downloaded = true;
    } else {
      offlineLayers[layerName].downloaded = false;
    }
  }

  function setEdits(layerName, edits) {
    if (edits) {
      offlineLayers[layerName].edits = true;
    } else {
      offlineLayers[layerName].edits = false;
    }
  }

  function saveFeaturesToStorage(layerName) {
    var features;
    if (storage[layerName]) {
      features = viewer.getLayer(layerName).getSource().getFeatures();
      setItems(layerName, features);
    } else {
      console.log(layerName + ' is missing in storage');
    }
  }

  function setItems(layerName, features) {
    var promises = features.map(function(feature) {
      var id = feature.getId();
      var obj = format.writeFeatureObject(feature);
      return storage[layerName].setItem(id, obj);
    });
    Promise.all(promises).then(function(results) {
      setLayerOffline(layerName, features);
      dispatcher.emitChangeOfflineEnd(layerName, 'offline');
    });
  }

  function getItems(layerName) {
    var layer = viewer.getLayer(layerName);
    var geometryName = layer.get('geometryName');
    var features = [];
    return storage[layerName].iterate(function(value, key, index) {
        var storedFeature = format.readFeature(value);
        var feature = restoreGeometryName(storedFeature, geometryName);
        features.push(feature);
      })
      .then(function() {
        return features;
      });
  }

  function getEditsItems(layerName) {
    var layer = viewer.getLayer(layerName);
    var items = [];
    return editsStorage[layerName].iterate(function(value, key, index) {
        var obj = {};
        obj[key] = value;
        items.push(obj);
      })
      .then(function() {
        return items;
      });
  }

  function initLayers() {
    var layerNames = Object.getOwnPropertyNames(storage);
    layerNames.forEach(function(layerName) {
      getItems(layerName).then(function(features) {
        var layer;
        if (features.length) {
          setLayerOffline(layerName, features);
        } else {
          setLayerOnline(layerName, features);
        }
      });
      getEditsItems(layerName).then(function(items) {
        var layer;
        if (items.length) {
          setEdits(layerName, true);
        } else {
          setEdits(layerName, false);
        }
      });
    });
  }

  function setLayerOffline(layerName, features) {
    offlineLayer.setOfflineSource(layerName, features);
    setDownloaded(layerName, true);
  }

  function setLayerOnline(layerName) {
    offlineLayer.setOnlineSource(layerName);
    setDownloaded(layerName, false);
  }

  function saveUpdate(updates, layerName) {
    updates.forEach(function(feature) {
      var id = feature.getId();
      var action = 'update';
      editsStorage[layerName].getItem(id)
        .then(function(result) {
          if (result === null) {
            saveToEditsStorage(feature, layerName, action);
          } else {
            saveFeatureToStorage(feature, layerName, action);
          }
        });
    });
  }

  function saveInsert(inserts, layerName) {
    inserts.forEach(function(feature) {
      var action = 'insert';
      saveToEditsStorage(feature, layerName, action);
    });
  }

  function saveDelete(deletes, layerName) {
    deletes.forEach(function(feature) {
      var id = feature.getId();
      var action = 'delete';
      editsStorage[layerName].getItem(id)
        .then(function(result) {
          if (result === null) {
            saveToEditsStorage(feature, layerName, action);
          } else if (result === 'insert') {
            removeFromEditsStorage(feature.getId(), layerName)
              .then(function() {
                emitChangeFeature(feature, layerName, action);
              });
          } else {
            saveFeatureToStorage(feature, layerName, action);
          }
        });
    });
  }

  function saveToEditsStorage(feature, layerName, action) {
    var id = feature.getId();
    editsStorage[layerName].setItem(id, action)
      .then(function() {
        setEdits(layerName, true);
        saveFeatureToStorage(feature, layerName, action);
      });
  }

  function removeFromEditsStorage(id, layerName) {
    return editsStorage[layerName].removeItem(id)
      .then(function() {
        editsStorage[layerName].length()
          .then(function(nr) {
            if (nr > 0) {
              setEdits(layerName, true);
            } else {
              setEdits(layerName, false);
            }
          });
      });
  }

  function saveFeatureToStorage(feature, layerName, action) {
    var id = feature.getId();
    storage[layerName].setItem(id, format.writeFeatureObject(feature))
      .then(function() {
        emitChangeFeature(feature, layerName, action);
      });
  }

  function emitChangeFeature(feature, layerName, action) {
    editorDispatcher.emitChangeFeature({
      feature: [feature],
      layerName: layerName,
      status: 'finished',
      action: action
    });
  }

  function restoreGeometryName(feature, geometryName) {
    var geometry = feature.getGeometry();
    feature.unset(feature.getGeometryName());
    feature.setGeometryName(geometryName);
    feature.setGeometry(geometry);
    return feature;
  }

}

module.exports = offlineStore;

},{"../editor/editdispatcher":108,"../viewer":201,"./offlinedispatcher":157,"./offlinelayer":158,"jquery":25,"localforage":26,"openlayers":28}],160:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var verifyFeatureIds = require('./verifyfeatureids');

var topoJson = {};
topoJson.request = function request(layer) {
  var source = layer.get('sourceName');
  var request = createRequest(source);
  return request;

  function createRequest(source) {
    var format = new ol.format.TopoJSON();
    var url = source;

    return $.ajax({
        url: url,
        cache: false
      })
      .then(function(response) {
        var features = format.readFeatures(response);
        features = verifyFeatureIds(features);
        return features;
      });
  }
}

module.exports = topoJson;

},{"./verifyfeatureids":161,"jquery":25,"openlayers":28}],161:[function(require,module,exports){
"use strict";
var generateUUID = require('../utils/generateuuid');

module.exports = function verifyFeatureIds(features) {
  if (features[0]) {
    if (features[0].getId() === undefined) {
      features.forEach(function(feature) {
        feature.setId(generateUUID());
      })
    }
  }

  return features;
}

},{"../utils/generateuuid":187}],162:[function(require,module,exports){
"use strict";
var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('../viewer');
var wfsTransaction = require('../editor/wfstransaction');

var wfs = {};
wfs.request = function request(layer) {
  var sourceOptions = viewer.getMapSource()[layer.get('sourceName')];
  sourceOptions.featureType = layer.get('name').split('__').shift();
  sourceOptions.geometryName = layer.get('geometryName');
  sourceOptions.filter = layer.get('filter');
  sourceOptions.projectionCode = viewer.getProjectionCode();
  sourceOptions.extent = layer.get('extent');
  sourceOptions.projectionCode = viewer.getProjectionCode();

  var request = createRequest(sourceOptions);
  return request;

  function createRequest(options) {
    var format = new ol.format.GeoJSON({
      geometryName: options.geometryName
    });

    var serverUrl = options.url;
    var queryFilter;
    var url;

    //If cql filter then bbox must be used in the filter.
    if (options.filter) {
      queryFilter = '&CQL_FILTER=' + options.filter +
        ' AND BBOX(' + options.geometryName + ',' +
        options.extent.join(',') + ',' +
        "'" + options.projectionCode + "')";
    } else {
      queryFilter = '&BBOX=' +
        options.extent.join(',') + ',' + options.projectionCode;
    }

    url = serverUrl +
      '?service=WFS&' +
      'version=1.1.0&request=GetFeature&typeName=' + options.featureType +
      '&outputFormat=application/json' +
      '&srsname=' + options.projectionCode +
      queryFilter;

    return $.ajax({
        url: url,
        cache: false
      })
      .then(function(response) {
        return format.readFeatures(response);
      });
  }
}

wfs.transaction = function(transObj, layerName) {
  return wfsTransaction(transObj, layerName);
}

module.exports = wfs;

},{"../editor/wfstransaction":117,"../viewer":201,"jquery":25,"openlayers":28}],163:[function(require,module,exports){
/*requires Modal.js*/
"use strict";

var permalinkParser = require('./permalinkparser');
var permalinkStore = require('./permalinkstore');
var urlparser =require('../utils/urlparser');

module.exports = function() {

return {
    getPermalink: function getPermalink(options) {
        var hash = urlparser.formatUrl(permalinkStore.getState());
        var url = permalinkStore.getUrl() + "#" + hash;
        return(url);
    },
    parsePermalink: function parsePermalink(url) {
        if(url.indexOf('#') > -1) {
            var urlSearch = url.split('#')[1];
            var urlParts = urlSearch.split('&');
            var urlAsObj = {};
            urlParts.forEach(function(part) {
                var key = part.split('=')[0];
                var val = part.split('=')[1];
                if(permalinkParser.hasOwnProperty(key)) {
                    urlAsObj[key] = permalinkParser[key](val);
                }
            });
            return urlAsObj;
        }
        else {
            return false;
        }
    }
};
}();

},{"../utils/urlparser":199,"./permalinkparser":164,"./permalinkstore":165}],164:[function(require,module,exports){
"use strict";
var urlparser = require('../utils/urlparser');

var layerModel = {
    v: {
      name: "visible",
      dataType: "boolean"
    },
    s: {
      name: "legend",
      dataType: "boolean"
    },
}

module.exports = {
  layers: function(layersStr) {
      var layers = layersStr.split(',');
      var layerObjects = {};
      layers.forEach(function(layer) {
          var obj = {};
          var layerObject = urlparser.objectify(layer,{topmost: "name"});
          Object.getOwnPropertyNames(layerObject).forEach(function(prop) {
              var val = layerObject[prop];
              if(layerModel.hasOwnProperty(prop)) {
                  var attribute = layerModel[prop];
                  obj[attribute.name] = urlparser.strBoolean(val);
              }
              else {
                  obj[prop] = val;
              }
          });
          layerObjects[obj.name] = obj;

      });
      return layerObjects;
  },
  zoom: function(zoomStr) {
      return parseInt(zoomStr);
  },
  center: function(centerStr) {
      var center = centerStr.split(",").map(function(coord) {
          return parseInt(coord);
      });
      return center;
  },
  selection: function(selectionStr) {
      return urlparser.strArrayify(selectionStr, {
        topmostName: "geometryType",
        arrName: "coordinates"}
      );
  },
  pin: function(pinStr) {
      return urlparser.strIntify(pinStr);
  },
  map: function(mapStr) {
      return mapStr;
  }
}

},{"../utils/urlparser":199}],165:[function(require,module,exports){
"use strict";

var viewer = require('../viewer');
var selection = require('../featureinfo')['getSelection'];
var getPin = require('../featureinfo')['getPin'];
var urlparser =require('../utils/urlparser');

var permalinkStore = {};
var state;
var url;

permalinkStore.getState = function getState() {
    state = {};
    var view = viewer.getMap().getView();
    var layers = viewer.getLayers();
    state.layers = getSaveLayers(layers);
    state.center = view.getCenter().map(function(coord) {
        return Math.round(coord);
    }).join();
    state.zoom = view.getZoom().toString();
    // state.selection = getSaveSelection(selection());
    if (getPin()) {
        state.pin = getPin().getGeometry().getCoordinates().map(function(coord) {
          return Math.round(coord);
        }).join();
    }
    if (viewer.getMapName()) {
        state.map = viewer.getMapName().split('.')[0];
    }
    return state;
}
permalinkStore.getUrl = function() {
    url = viewer.getUrl();
    return url;
}

function getSaveLayers(layers) {
    var saveLayers = [];
    layers.forEach(function(layer) {
        var saveLayer = {};
        saveLayer.v = layer.getVisible() === true ? 1 : 0;
        saveLayer.s = layer.get('legend') === true ? 1 : 0;
        if (saveLayer.s || saveLayer.v) {
            saveLayer.name = layer.get('name');
            saveLayers.push(urlparser.stringify(saveLayer, {topmost: 'name'}));
        }
    });
    return saveLayers;
}
function getSaveSelection(selection) {
    return urlparser.arrStringify(selection.coordinates, {topmost: selection.geometryType});
}

module.exports = permalinkStore;

},{"../featureinfo":118,"../utils/urlparser":199,"../viewer":201}],166:[function(require,module,exports){
"use strict";
var $ = require('jquery');

module.exports = function(target) {
    render(target);
    bindUIActions();
    return {
        getEl: getEl,
        setVisibility: setVisibility,
        setTitle: setTitle,
        setContent: setContent,
        closePopup: closePopup
    }
}
function render(target) {
  var pop = '<div id="o-popup">' +
      '<div class="o-popup o-card">' +
        '<div class="o-close-button"><svg class="o-icon-fa-times"><use xlink:href="#fa-times"></use></svg></div>' +
        '<div class="o-card-title"></div>' +
        '<div class="o-card-content"></div>' +
      '</div>' +
    '</div>';
  $(target).append(pop);
}
function bindUIActions() {
    $('#o-popup .o-popup .o-close-button').on('click', function(evt) {
        closePopup();
        evt.preventDefault();
    });
}
function getEl() {
    return $("#o-popup").get(0);
}
function setVisibility(visible) {
    visible == true ? $('#o-popup .o-popup').css('display', 'block') : $('#o-popup .o-popup').css('display', 'none');
}
function setTitle(title) {
    $('#o-popup .o-card-title').html(title);
}
function setContent(config) {
    config.title ? $('#o-popup .o-popup .o-card-title').html(config.title): $('#o-popup .o-popup .o-card-title').html('');
    config.content ? $('#o-popup .o-popup .o-card-content').html(config.content): $('#o-popup .o-popup .o-card-content').html('');
}
function closePopup() {
    setVisibility(false);
}

},{"jquery":25}],167:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var controlId = 'o-position';
var markerId = 'o-position-marker';
var toggleProjId = 'o-position-toggle-proj';
var coordsId = 'o-position-coords';
var coordsFindId = 'o-position-find';
var togglePositionId = 'o-toggle-position';
var characterError = 'Ogiltigt tecken för koordinat, vänligen försök igen.';
var extentError = 'Angivna koordinater ligger inte inom kartans utsträckning, vänligen försök igen.';
var map = undefined;
var view = undefined;
var consoleId = undefined;
var suffix = undefined;
var currentProjection = undefined;
var projections = undefined;
var projectionCodes = undefined;
var projection = undefined;
var mapProjection = undefined;
var precision = undefined;
var mousePositionActive = false;
var mousePositionControl;

function Init(opt_options) {
  var options = opt_options || {};
  var title = options.title || undefined;
  suffix = options.suffix || '';
  map = viewer.getMap();
  view = map.getView();
  projection = view.getProjection();
  mapProjection = viewer.getProjectionCode();
  consoleId = viewer.getConsoleId();
  projections = options.projections || {};
  projectionCodes = Object.getOwnPropertyNames(projections);
  if (title) {
    currentProjection = mapProjection;
    projections[currentProjection] = title;
    projectionCodes.unshift(mapProjection);
  } else if (projectionCodes.length) {
    currentProjection = projectionCodes[0];
  } else {
    alert('No title or projection is set for position');
  }
  setPrecision();

  render();
  bindUIActions();

  addMousePosition();
}

function render() {
  var icon = utils.createSvg({
    href: '#o_centerposition_24px',
    cls: 'o-icon-position'
  });
  var toggleButtons = utils.createElement('button', icon, {
    cls: 'o-position-center-button',
    id: togglePositionId
  });
  toggleButtons += utils.createElement('button', projections[currentProjection], {
    id: toggleProjId,
    cls: 'o-position-button',
    value: currentProjection
  });
  var coordsDiv = utils.createElement('div', '', {
    id: coordsId,
    cls: coordsId,
    style: 'padding-left: 5px;'
  });
  var coordsFind = utils.createElement('input', '', {
    id: coordsFindId,
    cls: coordsFindId,
    type: 'text',
    name: coordsFindId,
    style: 'padding-left: 5px;'
  });
  var controlContainer = utils.createElement('div', toggleButtons + coordsDiv + coordsFind, {
    id: controlId,
    cls: controlId,
    style: 'display: inline-block;'
  });
  $('#' + consoleId).append(controlContainer);
}

function bindUIActions() {
  $('#' + toggleProjId).on('click', onToggleProjection);
  $('#' + togglePositionId).on('click', onTogglePosition);
}

function addMousePosition() {
  mousePositionControl = new ol.control.MousePosition({
    coordinateFormat: ol.coordinate.createStringXY(precision),
    projection: currentProjection,
    target: document.getElementById(coordsId),
    undefinedHTML: '&nbsp;'
  });
  map.addControl(mousePositionControl);
  mousePositionActive = true;
  $('#' + coordsId).addClass('o-active');
}

function removeMousePosition() {
  map.removeControl(mousePositionControl);
  $('#' + coordsId).removeClass('o-active');
  mousePositionActive = false;
}

function addCenterPosition() {
  renderMarker();
  $('#' + togglePositionId).addClass('o-active');
  $('#' + coordsFindId).addClass('o-active');
  updateCoords(view.getCenter());
  view.on('change:center', onChangeCenter);
  $('#' + coordsFindId).on('keypress', onFind);
}

function removeCenterPosition() {
  view.un('change:center', onChangeCenter);
  clear();
  $('#' + coordsFindId).off('keypress', onFind);
  $('#' + markerId).remove();
  $('#' + togglePositionId).removeClass('o-active');
  $('#' + coordsFindId).removeClass('o-active');
}

function renderMarker() {
  var icon = utils.createSvg({
    href: '#o_centerposition_24px',
    cls: 'o-icon-position-marker'
  });
  var marker = utils.createElement('div', icon, {
    id: markerId,
    cls: markerId
  });
  $('#o-map').append(marker);
}

function findCoordinate() {
  var coords = $('#' + coordsFindId).val();
  var validated = validateCoordinate(coords);
  if (validated.length === 2) {
    map.getView().animate({
      center: validated,
      zoom: (viewer.getResolutions().length - 3)
    });
  }
}

function validateCoordinate(strCoords) {
  var extent = viewer.getExtent() || view.getProjection().getExtent();
  var inExtent;

  //validate numbers
  var coords = strCoords.split(',').map(function(coord) {
      return parseFloat(coord);
    })
    .filter(function(coord) {
      if (coord !== NaN) {
        return coord;
      }
    });
  if (coords.length !== 2) {
    alert(characterError);
    return [];
  }

  // transform
  if (currentProjection !== mapProjection) {
    coords = transformCoords(coords, currentProjection, mapProjection);
  }

  // validate coords within extent
  inExtent = coords[0] >= extent[0] && coords[1] >= extent[1];
  inExtent = inExtent && (coords[0] <= extent[2]) && (coords[1] <= extent[3]);
  if (inExtent) {
    return coords;
  } else {
    alert(extentError);
    return [];
  }
}

function toggleProjectionVal(val) {
  var index;
  var proj = undefined;
  index = projectionCodes.indexOf(val);
  if (index === projectionCodes.length - 1) {
    proj = projectionCodes[0];
  } else if (index < projectionCodes.length - 1) {
    proj = projectionCodes[index + 1];
  }
  return proj;
}

function clear() {
  writeCoords('');
}

function onTogglePosition() {
  if (mousePositionActive) {
    removeMousePosition();
    addCenterPosition();
  } else {
    addMousePosition();    
    removeCenterPosition();
  }
}

function onToggleProjection(e) {
  return function(event) {
    currentProjection = toggleProjectionVal(this.value);
    setPrecision();
    writeProjection(currentProjection);
    if (mousePositionActive) {
      removeMousePosition();
      addMousePosition();
    } else {
      updateCoords(view.getCenter());
    }
    this.blur();
    event.preventDefault();
  }.bind(this)(e);
}

function onChangeCenter() {
  updateCoords(view.getCenter());
}

function onFind(e) {
  if (e.which === 13) {
    findCoordinate();
  }
}

function round(coords) {
  if (precision) {
    return coords.map(function(coord) {
      return coord.toFixed(precision);
    });
  } else {
    return coords.map(function(coord) {
      return Math.round(coord);
    });
  }
}

function setPrecision() {
  if (currentProjection === 'EPSG:4326') {
    precision = 5;
  } else {
    precision = 0;
  }
}

function writeProjection() {
  $('#' + toggleProjId).val(currentProjection);
  $('#' + toggleProjId).text(projections[currentProjection]);
}

function transformCoords(coords, source, destination) {
  var geometry = new ol.Feature({
    geometry: new ol.geom.Point(coords)
  }).getGeometry();
  return geometry.transform(source, destination).getCoordinates();
}

function updateCoords(sourceCoords) {
  var coords = sourceCoords;
  var center;
  if (currentProjection !== mapProjection) {
    coords = transformCoords(coords, projection, currentProjection);
  }
  coords = round(coords);
  center = coords.join(', ') + suffix;
  writeCoords(center);
}

function writeCoords(coords) {
  $('#' + coordsFindId).val(coords);
}

module.exports.init = Init;

},{"./utils":185,"./viewer":201,"jquery":25,"openlayers":28}],168:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var template = require("./templates/print.handlebars");

var printWith = 800;
var $printButton;
var attribution;
var map;
var baseUrl;

function Init(opt_options) {
  var options = opt_options || {};
  attribution = options.attribution || '© Lantmäteriet Geodatasamverkan';
  map = Viewer.getMap();
  baseUrl = Viewer.getBaseUrl();

  render();
  bindUIActions();
}

function render() {
  var el = utils.createListButton({
    id: 'o-print',
    iconCls: 'o-icon-fa-print',
    src: '#fa-print',
    text: 'Skriv ut'
  });
  $('#o-menutools').append(el);
  $printButton = $('#o-print-button');
}

function bindUIActions() {
  $printButton.on('click', function(e) {
    $('#app-wrapper').append('<canvas id="o-print" style="display: none"></canvas>');
    createImage();
    e.preventDefault();
  });
}

function imageToPrint($printCanvas) {
  var imageCrop = new Image();
  try {
    imageCrop.src = $printCanvas.get(0).toDataURL("image/png");
  } catch (e) {
    console.log(e);
  } finally {
    var templateOptions = {};
    templateOptions.src = imageCrop.src;
    templateOptions.attribution = attribution;
    templateOptions.logoSrc = baseUrl + 'css/png/logo_print.png';
    var pw = template(templateOptions);
    var printWindow = window.open('', '', 'width=800,height=820');
    printWindow.document.write(pw);
    printWindow.document.close();
    setTimeout(function() {
      printWindow.print();
      setTimeout(function() {
        printWindow.close();
        $('#o-print').remove();
      }, 10);
    }, 200);
  }
}

function createImage() {
  var $canvas = $('canvas');
  var image = new Image();

  try {
    var imageUrl = $canvas.get(0).toDataURL("image/png");
  } catch (e) {
    console.log(e);
  } finally {

    // $printCanvas = copy of original map canvas
    var $printCanvas = $('#o-print');
    image.onload = function() {
      var ctxCanvas = $printCanvas[0].getContext('2d');

       //width of map canvas
      var sourceWidth = $canvas[0].width;

      //height of map canvas
      var sourceHeight = $canvas[0].height;

      //set the width of print canvas
      if (sourceWidth < printWith) {
        $printCanvas[0].width = sourceWidth;
      } else if (sourceWidth >= printWith) {
        $printCanvas[0].width = printWith;
      }

      //set the height of print canvas
      if (sourceHeight < printWith) {
        $printCanvas[0].height = sourceHeight;
      } else if (sourceWidth >= printWith) {
        $printCanvas[0].height = printWith;
      }

      ctxCanvas.drawImage(image, (sourceWidth / 2 - $printCanvas[0].width / 2), 0, $printCanvas[0].width, $printCanvas[0].height, 0, 0, $printCanvas[0].width, $printCanvas[0].height);
      imageToPrint($printCanvas);
    };
    image.src = imageUrl;
  }
}

module.exports.init = Init;

},{"./templates/print.handlebars":183,"./utils":185,"./viewer":201,"jquery":25}],169:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var rotateControl;
  var icon = utils.createSvg({
    href: '#origo-compass',
    cls: 'o-icon-compass'
  });
  map = Viewer.getMap();

  rotateControl = new ol.control.Rotate({
    label: $.parseHTML('<span>' + icon + '</span>')[0],
    tipLabel: ' ',
    target: 'o-toolbar-misc'
  });
  map.addControl(rotateControl);
}

module.exports.init = Init;

},{"./utils":185,"./viewer":201,"jquery":25,"openlayers":28}],170:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Viewer = require('./viewer');
var utils = require('./utils');
var numberFormatter = require('./utils/numberformatter');

var controlId = 'o-scale';
var consoleId;
var map;
var $console;
var isActive;
var scaleText;

function Init(opt_options) {
  var options = opt_options || {};
  map = Viewer.getMap();
  consoleId = Viewer.getConsoleId();
  scaleText = options.scaleText || 'Skala 1:';
  var initialState = options.hasOwnProperty('isActive') ? options.isActive : true;

  setActive(initialState);
  render();

  return {
    setActive: setActive
  }
}

function render() {
  var container = utils.createElement('div', '', {
    id: controlId,
    style: 'display: inline-block;'
  });
  $('#' + consoleId).append(container);
}

function setActive(state) {
  if (state === true) {
    map.getView().on('change:resolution', onZoomChange);
    onZoomChange();
    isActive = true;
  } else if (state === false) {
    map.getView().un('change:resolution', onZoomChange);
    isActive = false;
  }
}

function onZoomChange(e) {
  var resolution = e ? e.target.get(e.key) : map.getView().getResolution();
  var scale = Viewer.getScale(resolution);
  $('#' + controlId).text(scaleText + numberFormatter(scale));
}

module.exports.init = Init;

},{"./utils":185,"./utils/numberformatter":193,"./viewer":201,"jquery":25}],171:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var Viewer = require('./viewer');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var target = options.target || 'o-tools-bottom';
  map = Viewer.getMap();

  var scaleLine = new ol.control.ScaleLine({
    target: target
  });
  map.addControl(scaleLine);
}

module.exports.init = Init;

},{"./viewer":201,"openlayers":28}],172:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var wktToFeature = require('./maputils').wktToFeature;
var Popup = require('./popup');
var typeahead = require('typeahead.js');
var getFeature = require('./getfeature');
var getAttributes = require('./getattributes');
var featureInfo = require('./featureinfo');
var mapUtils = require('./maputils');
var getCenter = require('./geometry/getcenter');
var utils = require('./utils');
var map;
var name;
var northing;
var easting;
var geometryAttribute;
var idAttribute;
var layerNameAttribute;
var layerName;
var titleAttribute;
var contentAttribute;
var maxZoomLevel;
var url;
var title;
var hintText;
var hint;
var highlight;
var projectionCode;
var overlay;
var limit;
var minLength;

function init(options) {
  var el;
  name = options.searchAttribute;
  northing = options.northing || undefined;
  easting = options.easting || undefined;
  geometryAttribute = options.geometryAttribute;

  /** idAttribute in combination with layerNameAttribute
  must be defined if search result should be selected */
  idAttribute = options.idAttribute;
  layerNameAttribute = options.layerNameAttribute || undefined;
  layerName = options.layerName || undefined;
  url = options.url;
  title = options.title || '';
  titleAttribute = options.titleAttribute || undefined;
  contentAttribute = options.contentAttribute || undefined;
  maxZoomLevel = options.maxZoomLevel || Viewer.getResolutions().length - 2 || Viewer.getResolutions();
  limit = options.limit || 9;
  hintText = options.hintText || 'Sök...';
  hint = options.hasOwnProperty('hint') ? options.hint : true;
  highlight = options.hasOwnProperty('highlight') ? options.highlight : true;
  minLength = options.minLength || 4;
  projectionCode = Viewer.getProjectionCode();

  map = Viewer.getMap();

  el = '<div id="o-search-wrapper">' +
    '<div id="o-search" class="o-search o-search-false">' +
    '<input class="o-search-field typeahead form-control" type="text" placeholder="' + hintText + '">' +
    '<button id="o-search-button">' +
    '<svg class="o-icon-fa-search">' +
    '<use xlink:href="#fa-search"></use>' +
    '</svg>' +
    '</button>' +
    '<button id="o-search-button-close">' +
    '<svg class="o-icon-search-fa-times">' +
    '<use xlink:href="#fa-times"></use>' +
    '</svg>' +
    '</button>' +
    '</div>' +
    '</div>';
  $('#o-map').append(el);

  // fix for internet explorer
  $.support.cors = true;

  $('.typeahead').typeahead({
    autoSelect: true,
    hint: hint,
    highlight: highlight,
    minLength: minLength
  }, {
    name: 'adress',
    limit: limit,
    displayKey: name,
    source: function(query, syncResults, asyncResults) {
      $.get(url + '?q=' + encodeURI(query), function(data) {
        asyncResults(data);
      });
    }
  });

  bindUIActions();
}

function bindUIActions() {
  $('.typeahead').on('typeahead:selected', selectHandler);

  $('#o-search .o-search-field').on('input', function() {
    if ($('#o-search .o-search-field.tt-input').val() && $('#o-search').hasClass('o-search-false')) {
      $('#o-search').removeClass('o-search-false');
      $('#o-search').addClass('o-search-true');
      onClearSearch();
    } else if (!($('#o-search .o-search-field.tt-input').val()) && $('#o-search').hasClass('o-search-true')) {
      $('#o-search').removeClass('o-search-true');
      $('#o-search').addClass('o-search-false');
    }
  });
}

function onClearSearch() {
  $('#o-search-button-close').on('click', function(e) {
    $('.typeahead').typeahead('val', '');
    featureInfo.clear();
    $('#o-search').removeClass('o-search-true');
    $('#o-search').addClass('o-search-false');
    $('#o-search .o-search-field.tt-input').val('');
    $('#o-search-button').blur();
    e.preventDefault();
  });
}

function showOverlay(data, coord) {
  var popup;
  var content;
  featureInfo.clear();
  clear();
  popup = Popup('#o-map');
  overlay = new ol.Overlay({
    element: popup.getEl()
  });

  map.addOverlay(overlay);

  overlay.setPosition(coord);
  content = data[name];
  popup.setContent({
    content: content,
    title: title
  });
  popup.setVisibility(true);
  mapUtils.zoomToExent(new ol.geom.Point(coord), maxZoomLevel);
}

function showFeatureInfo(features, title, content) {
  var obj = {};
  obj.feature = features[0];
  obj.title = title;
  obj.content = content;
  featureInfo.identify([obj], 'overlay', getCenter(features[0].getGeometry()));
  mapUtils.zoomToExent(features[0].getGeometry(), maxZoomLevel);
}

function clear() {
  Viewer.removeOverlays(overlay);
}

/** There are several different ways to handle selected search result.
 * Option 1. Feature info is requested from a map service.
 * In this case idAttribute and layerNameAttribute must be provided.
 * A map service is used to get the geometry and attributes. The layer is defined
 * as an ordinary layer in the layer config section.
 * Option 2. Same as option 1 but for single layer search. layerName is defined
 * as an option and is not included in the search response.
 * In this case geometryAttribute and layerName must be provided.
 * Option 3. Complete feature info is included in the search result.
 * In this case titleAttribute, contentAttribute and geometryAttribute must be provided.
 * Option 4. This is a single table search. No layer is defined.
 * In this case geometryAttribute and title must be defined.
 * Option 5. Feature info is shown without selection in the map.
 * This is a simple single table search. In this case title, northing and easting
 * must be defined. */

function selectHandler(evt, data) {
  var layer;
  var id;
  var feature;
  var content;
  var coord;
  if (layerNameAttribute && idAttribute) {
    layer = Viewer.getLayer(data[layerNameAttribute]);
    id = data[idAttribute];
    getFeature(id, layer)
      .done(function(res) {
        var featureWkt;
        var coordWkt;
        if (res.length > 0) {
          showFeatureInfo(res, layer.get('title'), getAttributes(res[0], layer));
        }

        // Fallback if no geometry in response
        else if (geometryAttribute) {
          featureWkt = wktToFeature(data[geometryAttribute], projectionCode);
          coordWkt = featureWkt.getGeometry().getCoordinates();
          showOverlay(data, coordWkt);
        }
      });
  } else if (geometryAttribute && layerName) {
    feature = wktToFeature(data[geometryAttribute], projectionCode);
    layer = Viewer.getLayer(data[layerName]);
    showFeatureInfo([feature], layer.get('title'), getAttributes(feature, layer));
  } else if (titleAttribute && contentAttribute && geometryAttribute) {
    feature = wktToFeature(data[geometryAttribute], projectionCode);

    // Make sure the response is wrapped in a html element
    content = utils.createElement('div', data[contentAttribute]);
    showFeatureInfo([feature], data[titleAttribute], content);
  } else if (geometryAttribute && title) {
    feature = wktToFeature(data[geometryAttribute], projectionCode);
    content = utils.createElement('div', data[name]);
    showFeatureInfo([feature], title, content);
  } else if (easting && northing && title) {
    coord = [data[easting], data[northing]];
    showOverlay(data, coord);
  } else {
    console.log('Search options are missing');
  }
}

module.exports.init = init;

},{"./featureinfo":118,"./geometry/getcenter":124,"./getattributes":126,"./getfeature":127,"./maputils":148,"./popup":166,"./utils":185,"./viewer":201,"jquery":25,"openlayers":28,"typeahead.js":97}],173:[function(require,module,exports){
/*requires Modal.js*/
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var modal = require('./modal');
var mapmenu = require('./mapmenu');
var utils = require('./utils');
var permalink = require('./permalink/permalink');

var shareButton;

function init(){
    var el = utils.createListButton({
        id: 'o-share',
        iconCls: 'o-icon-fa-share-square-o',
        src: '#fa-share-square-o',
        text: 'Dela karta'
    });
    $('#o-menutools').append(el);
    shareButton = $('#o-share-button');
    bindUIActions();
}
function bindUIActions() {
    shareButton.on('click', function(e) {
        modal.createModal('#o-map', {title: 'Länk till karta', content: createContent()});
        modal.showModal();
        createLink(); //Add link to input
        mapmenu.toggleMenu();
        e.preventDefault();
    });
}
function createContent() {
    return '<div class="o-share-link"><input type="text"></div>' +
           '<i>Kopiera och klistra in länken för att dela kartan.</i>';
}
function createLink() {
    var url = permalink.getPermalink();
    $('.o-share-link input').val(url).select();
}

module.exports.init = init;

},{"./mapmenu":147,"./modal":150,"./permalink/permalink":163,"./utils":185,"./viewer":201,"jquery":25}],174:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var viewer = require('./viewer');
var utils = require('./utils');

var sidebar;

function init() {
    var el = '<div id="o-sidebar">' +
                '<div class="o-sidebar o-card">' +
                  '<div class="o-close-button"><svg class="o-icon-fa-times"><use xlink:href="#fa-times"></use></svg></div>' +
                  '<div class="o-card-title"></div>' +
                  '<div class="o-card-content"></div>' +
                '</div>' +
              '</div>';
    $('#o-map').append(el);
    sidebar = $('#o-sidebar');

    bindUIActions();
}
function bindUIActions() {
    $('#o-sidebar .o-sidebar .o-close-button').on('click', function(evt) {
        closeSidebar();
        evt.preventDefault();
    });
}
function setVisibility(visible) {
    visible == true ? $('#o-sidebar').addClass('o-sidebar-show') : $('#o-sidebar').removeClass('o-sidebar-show');
}
function setTitle(title) {
    $('#o-sidebar .o-card-title').html(title);
}
function setContent(config) {
    config.title ? $('#o-sidebar .o-sidebar .o-card-title').html(config.title): $('#o-sidebar .o-sidebar .o-card-title').html('');
    config.content ? $('#o-sidebar .o-sidebar .o-card-content').html(config.content): $('#o-sidebar .o-sidebar .o-card-content').html('');
}
function closeSidebar() {
    setVisibility(false);
}

module.exports.init = init;
module.exports.setVisibility = setVisibility;
module.exports.setTitle = setTitle;
module.exports.setContent = setContent;
module.exports.closeSidebar = closeSidebar;

},{"./utils":185,"./viewer":201,"jquery":25}],175:[function(require,module,exports){
"use strict";

var $ = require('jquery');
var Modal = require('./modal');
var viewer = require('./viewer');

var defaultTitle = 'Om kartan';
var defaultContent = '<p></p>';
var cls = 'o-splash';
var title;
var content;

function init(opt_options) {
  var options = opt_options || {};
  var url;
  title = options.title || defaultTitle;
  if (options.url) {
    url = viewer.getBaseUrl() + options.url;
    getContent(url)
      .done(function(data) {
        content = data;
        openModal();
      });
  } else {
    content = options.content || defaultContent;
    openModal();
  }
}

function getContent(url) {
  return $.get(url);
}

function openModal() {
  Modal.createModal('#o-map', {
    title: title,
    content: content,
    cls: cls
  });
  Modal.showModal();
}

module.exports.init = init;

},{"./modal":150,"./viewer":201,"jquery":25}],176:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');
var validateUrl = require('./utils/validateurl');
var replacer = require('../src/utils/replacer');

var baseUrl;

var white = [255, 255, 255, 1];
var blue = [0, 153, 255, 1];
var width = 3;

//default edit style options
var editStyleOptions = {
    'Point': [
        {
            "circle": {
                "radius": 1,
                "stroke": {
                    "color": blue,
                    "width": 0
                },
                "fill": {
                    "color": blue
                }
            }
        }
    ],
    'LineString': [
        {
            'stroke': {
                color: white,
                width: width + 2
            }
        },
        {
            'stroke': {
                color: blue,
                width: width
            }
        }
    ],
    'Polygon': [
        {
            'stroke': {
                color: white,
                width: width + 2
            }
        },
        {
            'stroke': {
                color: blue,
                width: width
            }
        }
    ]
};

module.exports = function() {

    return {
        init: Init,
        createStyleOptions: createStyleOptions,
        createStyleList: createStyleList,
        createStyleRule: createStyleRule,
        createStyle: createStyle,
        styleFunction: styleFunction,
        createEditStyle: createEditStyle
    }
};

function Init() {
  baseUrl = Viewer.getBaseUrl();
}

function createStyleOptions(styleParams) {
    var styleOptions = {};
    if(styleParams.hasOwnProperty('geometry')) {
        switch (styleParams.geometry) {
            case 'centerPoint':
                styleOptions.geometry = function(feature) {
                    var coordinates = feature.getGeometry().getInteriorPoints().getFirstCoordinate();
                    return new ol.geom.Point(coordinates);
                }
            case 'endPoint':
                styleOptions.geometry = function(feature) {
                    var coordinates = feature.getGeometry().getLastCoordinate();
                    return new ol.geom.Point(coordinates);
                }
            break;
        }
    }
    if(styleParams.hasOwnProperty('zIndex')) {
        styleOptions.zIndex = styleParams.zIndex;
    }
    if(styleParams.hasOwnProperty('fill')) {
        styleOptions.fill = new ol.style.Fill(styleParams.fill);
    }
    if(styleParams.hasOwnProperty('stroke')) {
        styleOptions.stroke = new ol.style.Stroke(styleParams.stroke);
    }
    if(styleParams.hasOwnProperty('text')) {
        styleOptions.text = new ol.style.Text(styleParams.text);
        if(styleParams.text.hasOwnProperty('fill')) {
            styleOptions.text.setFill(new ol.style.Fill(styleParams.text.fill));
        }
        if(styleParams.text.hasOwnProperty('stroke')) {
            styleOptions.text.setStroke(new ol.style.Stroke(styleParams.text.stroke));
        }
    }
    if(styleParams.hasOwnProperty('icon')) {
        if (styleParams.icon.hasOwnProperty('src')) {
          styleParams.icon.src = validateUrl(styleParams.icon.src, baseUrl);
        }
        styleOptions.image = new ol.style.Icon(styleParams.icon);
    }
    if(styleParams.hasOwnProperty('circle')) {
        styleOptions.image = new ol.style.Circle({
            radius: styleParams.circle.radius,
            fill: new ol.style.Fill(styleParams.circle.fill) || undefined,
            stroke: new ol.style.Stroke(styleParams.circle.stroke) || undefined
        });
    }
    return styleOptions;
}

function createStyleList(styleOptions) {
    var styleList=[];
    //Create style for each rule
    for (var i = 0; i < styleOptions.length; i++) {
        var styleRule = [];
        var styleOption;
        //Check if rule is array, ie multiple styles for the rule
        if(styleOptions[i].constructor === Array) {
            for(var j=0; j < styleOptions[i].length; j++) {
                styleOption = createStyleOptions(styleOptions[i][j]);
                styleRule.push(new ol.style.Style(styleOption));
            }
        }
        //If single style for rule
        else {
            styleOption = createStyleOptions(styleOptions[i]);
            styleRule = [new ol.style.Style(styleOption)];
        }

        styleList.push(styleRule);
    }
    return styleList;
}

function createStyle(styleName, clusterStyleName) {
      var styleSettings = Viewer.getStyleSettings()[styleName];
      if($.isEmptyObject(styleSettings)) {
          alert('Style ' + styleName + ' is not defined');
      }
      var clusterStyleSettings = Viewer.getStyleSettings()[clusterStyleName];
      var style = (function() {
        //Create style for each rule
        var styleList = createStyleList(styleSettings);
        if(clusterStyleSettings) {
            var clusterStyleList = createStyleList(clusterStyleSettings);
            return styleFunction(styleSettings, styleList, clusterStyleSettings, clusterStyleList);
        }
        else {
            return styleFunction(styleSettings,styleList);
        }

      })()
      return style;
}

function createStyleRule(options) {
    var styleRule = [],
    styleOption;
    if(options.constructor === Array) {
        for(var i=0; i < options.length; i++) {
            var styleOption = createStyleOptions(options[i]);
            styleRule.push(new ol.style.Style(styleOption));
        }
    }
    //If single style for rule
    else {
        styleOption = createStyleOptions(options);
        styleRule = [new ol.style.Style(styleOption)];
    }
    return styleRule;
}

function styleFunction(styleSettings, styleList, clusterStyleSettings, clusterStyleList) {
    var s = styleSettings;
    var resolutions = Viewer.getResolutions();
    var fn = function(feature,resolution) {
        var scale = Viewer.getScale(resolution);
        var styleL;
        //If size is larger than, it is a cluster
        var size = clusterStyleList ? feature.get('features').length : 1;
        if(size > 1 && resolution!= resolutions[resolutions.length+1]) {
            styleL = checkOptions(feature, scale, clusterStyleSettings, clusterStyleList, size.toString());
            // clusterStyleList[0].setText(size);
        }
        else {
            styleL = checkOptions(feature, scale, styleSettings, styleList);
        }
        return styleL;
    }
    return fn;
}

function createEditStyle() {
    return {
        'Point': createStyleRule(editStyleOptions['Point']),
        'MultiPoint': createStyleRule(editStyleOptions['Point']),
        'LineString': createStyleRule(editStyleOptions['LineString']),
        'MultiLineString': createStyleRule(editStyleOptions['LineString']),
        'Polygon': createStyleRule(editStyleOptions['Polygon']),
        'MultiPolygon': createStyleRule(editStyleOptions['Polygon'])
    };
}

function checkOptions(feature, scale, styleSettings, styleList, size) {
    var s = styleSettings;
    for (var j=0; j<s.length; j++) {
      var styleL;
      if(Viewer.checkScale(scale, s[j][0].maxScale, s[j][0].minScale)) {
        s[j].some(function(element, index, array) {
            if (element.hasOwnProperty('text') && size) {
                styleList[j][index].getText().setText(size);
            } else if (element.hasOwnProperty('text')) {
              styleList[j][index].getText().setText(replacer.replace(element.text.text, feature.getProperties()));
            }
        });
        if (s[j][0].hasOwnProperty('filter')) {
          //find attribute vale between [] defined in styles
          var featAttr, expr, featMatch;
          var matches = s[j][0].filter.match(/\[(.*?)\]/);
          if (matches) {
              if (feature.get('features')) {
                feature = feature.get('features')[0];
              }
              featAttr = matches[1];
              expr = s[j][0].filter.split(']')[1];
              featMatch = feature.get(featAttr);
              expr = typeof featMatch == 'number' ? featMatch + expr : '"' + featMatch + '"' + expr ;
          }
          if(eval(expr)) {
            styleL = styleList[j];
            return styleL;
          }
        }
        else {
          styleL = styleList[j];
          return styleL;
        }
      }
    }
}

},{"../src/utils/replacer":195,"./utils/validateurl":200,"./viewer":201,"jquery":25,"openlayers":28}],177:[function(require,module,exports){
"use strict";

var measure = {
  linestring: [
    {
      'geometry': 'endPoint',
      'circle': {
        fill: {
          color: [0, 153, 255, 1]
        },
        stroke: {
          color: [0, 153, 255, 1],
          width: 1
        },
        radius: 3
      },
      'text': {
        font: 'bold 13px "Helvetica Neue", Helvetica, Arial, sans-serif',
        textBaseline: 'bottom',
        textAlign: 'center',
        offsetY: -4,
        fill: {color: [0, 153, 255, 1]},
        stroke: {color: [255, 255, 255, 0.8], width: 4}
      }
    },
    {
      'stroke': {
        color: [0, 153, 255, 1],
        width: 2
      }
    }
  ],
  polygon: [
    {
      'fill': {
        color: [255, 255, 255, 0.4]
      },
      'stroke': {
        color: [0, 153, 255, 1],
        width: 2
      },
      'text': {
        font: 'bold 13px "Helvetica Neue", Helvetica, Arial, sans-serif',
        textBaseline: 'middle',
        textAlign: 'center',
        fill: {color: [0, 153, 255, 1]},
        stroke: {color: [255, 255, 255, 0.8], width: 4}
      }
    }
  ],
  interaction: [
    {
      'fill': {
        color: [255, 255, 255, 0.2]
      },
      'stroke': {
        'color': [0, 0, 0, 0.5],
        'lineDash': [10, 10],
        'width': 2
      },
      'circle': {
        'radius': 5,
        'stroke': {
          'color': [0, 0, 0, 0.7]
        },
        'fill': {
          color: [255, 255, 255, 0.2]
        }
      }
    }
  ]
};

module.exports = measure;

},{}],178:[function(require,module,exports){
"use strict";

var pin = [
    {
      'icon': {
          anchor: [0.5, 32],
          anchorXUnits: 'fraction',
          anchorYUnits: 'pixels',
          src: 'img/png/drop_blue.png'
      }
    }
];

module.exports = pin;

},{}],179:[function(require,module,exports){
"use strict";

var pin = require('./pin');
var measure = require('./measure');

module.exports = function() {

  var styleTypes = {};

  styleTypes.pin = pin;
  styleTypes.measure = measure;

  return {
    getStyle: function getStyle(type) {
      if(type) {
        return styleTypes[type];
      } else {
        console.log(type + ' is not a default style');
      }
    }
  }
}();

},{"./measure":177,"./pin":178}],180:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    return "<div id=\"o-editor-toolbar\" class=\"o-editor-toolbar o-toolbar o-toolbar-horizontal o-padding-horizontal-8 o-rounded-top o-hidden\">\r\n    <div id=\"o-editor-toolbar-drawtools\" class=\"o-toolbar-horizontal\">\r\n      <div class=\"o-popover-container\">\r\n        <button id=\"o-editor-draw\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n          <svg class=\"o-icon-24\">\r\n              <use xlink:href=\"#ic_mode_edit_24px\"></use>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <button id=\"o-editor-attribute\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n      <svg class=\"o-icon-24\">\r\n          <use xlink:href=\"#ic_title_24px\"></use>\r\n      </svg>\r\n    </button>\r\n    <button id=\"o-editor-delete\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n      <svg class=\"o-icon-24\">\r\n          <use xlink:href=\"#ic_delete_24px\"></use>\r\n      </svg>\r\n    </button>\r\n    <div class=\"o-popover-container\">\r\n      <button id=\"o-editor-layers\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n        <svg class=\"o-icon-24\">\r\n            <use xlink:href=\"#ic_layers_24px\"></use>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n    <button id=\"o-editor-save\" class=\"o-button-lg o-disabled\" type=\"button\" name=\"button\">\r\n      <svg class=\"o-icon-24\">\r\n          <use xlink:href=\"#ic_save_24px\"></use>\r\n      </svg>\r\n    </button>\r\n    <button id=\"o-editor-close\" class=\"o-button-lg\" type=\"button\" name=\"button\">\r\n        <svg class=\"o-icon-24\">\r\n            <use xlink:href=\"#ic_close_24px\"></use>\r\n        </svg>\r\n    </button>\r\n</div>\r\n";
},"useData":true});

},{"hbsfy/runtime":24}],181:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"1":function(container,depth0,helpers,partials,data) {
    var helper, alias1=container.escapeExpression;

  return "      <li><b>"
    + alias1(((helper = (helper = helpers.key || (data && data.key)) != null ? helper : helpers.helperMissing),(typeof helper === "function" ? helper.call(depth0 != null ? depth0 : {},{"name":"key","hash":{},"data":data}) : helper)))
    + "</b> : "
    + alias1(container.lambda(depth0, depth0))
    + "</li>\r\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1;

  return ((stack1 = helpers.each.call(depth0 != null ? depth0 : {},depth0,{"name":"each","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "");
},"useData":true});

},{"hbsfy/runtime":24}],182:[function(require,module,exports){
"use strict";

var defaultTemplate = require("./default.handlebars");

module.exports = function(attributes) {
  return defaultTemplate(attributes);
}

},{"./default.handlebars":181}],183:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var alias1=container.lambda, alias2=container.escapeExpression;

  return "<html>\r\n  <head>\r\n    <link href=\"css/print.css\" rel=\"stylesheet\">\r\n  </head>\r\n  <body>\r\n    <div class=\"o-print-logo\"><img src=\""
    + alias2(alias1((depth0 != null ? depth0.logoSrc : depth0), depth0))
    + "\"></div>\r\n    <div class=\"o-map-canvas\"><img src=\""
    + alias2(alias1((depth0 != null ? depth0.src : depth0), depth0))
    + "\"/></div>\r\n    <div class=\"o-print-attribution\">"
    + alias2(alias1((depth0 != null ? depth0.attribution : depth0), depth0))
    + "</div>\r\n  </body>\r\n</html>\r\n";
},"useData":true});

},{"hbsfy/runtime":24}],184:[function(require,module,exports){
// hbsfy compiled Handlebars template
var HandlebarsCompiler = require('hbsfy/runtime');
module.exports = HandlebarsCompiler.template({"1":function(container,depth0,helpers,partials,data) {
    return "        <img src=\""
    + container.escapeExpression(container.lambda((depth0 != null ? depth0.img : depth0), depth0))
    + "\">\r\n";
},"3":function(container,depth0,helpers,partials,data) {
    var alias1=container.lambda, alias2=container.escapeExpression;

  return "        <a href=\""
    + alias2(alias1((depth0 != null ? depth0.url : depth0), depth0))
    + "\">"
    + alias2(alias1((depth0 != null ? depth0.urlText : depth0), depth0))
    + "</a>\r\n";
},"5":function(container,depth0,helpers,partials,data) {
    return "        <p>"
    + container.escapeExpression(container.lambda((depth0 != null ? depth0.text : depth0), depth0))
    + "</p>\r\n";
},"compiler":[7,">= 4.0.0"],"main":function(container,depth0,helpers,partials,data) {
    var stack1, alias1=depth0 != null ? depth0 : {};

  return "<div id=\"o-map\" class=\"o-map o-map-grid\">\r\n  <div id=\"o-tools-left\" class=\"o-container-absolute o-tools-left\">\r\n    <div id=\"o-toolbar-navigation\" class=\"o-toolbar-vertical o-toolbar-navigation\"></div>\r\n    <div id=\"o-toolbar-maptools\" class=\"o-toolbar-vertical o-toolbar-maptools\"></div>\r\n    <div id=\"o-toolbar-misc\" class=\"o-toolbar-vertical o-toolbar-misc\"></div>\r\n  </div>\r\n  <div id=\"o-tools-bottom\" class=\"o-tools-bottom\"></div>\r\n  <div id=\"o-footer\" class=\"o-footer\">\r\n    <div id=\"o-console\" class=\"o-footer-left\">&nbsp;</div>\r\n    <div class=\"o-footer-middle\">\r\n      <div class=\"o-footer-middle-content\">\r\n"
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.img : depth0),{"name":"if","hash":{},"fn":container.program(1, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.url : depth0),{"name":"if","hash":{},"fn":container.program(3, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + ((stack1 = helpers["if"].call(alias1,(depth0 != null ? depth0.text : depth0),{"name":"if","hash":{},"fn":container.program(5, data, 0),"inverse":container.noop,"data":data})) != null ? stack1 : "")
    + "      </div>\r\n    </div>\r\n    <div class=\"o-footer-right\">\r\n    </div>\r\n</div>\r\n";
},"useData":true});

},{"hbsfy/runtime":24}],185:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = {
    createButton: function(options) {
        var tooltip ='';
        var text ='';
        var cls = options.cls || '';
        var iconCls = options.iconCls || '';
        var placement = options.tooltipPlacement || 'east';
        if(options.text) {
            text = '<span class="o-button-text">' + options.text + '</span>';
        }
        if(options.tooltipText) {
            tooltip = '<span data-tooltip="' + options.tooltipText + '" data-placement="' + placement + '"></span>';
        }
        var el = '<div id="' + options.id + '" class="o-button-container o-tooltip">' +
                 '<button class="o-button ' + cls + '">' + text +
                    '<svg class="' + iconCls + '">' +
                        '<use xlink:href="' + options.src + '"></use>' +
                    '</svg>' +
                 '</button>' +
                 tooltip +
                 '</div>';
        return el;
    },
    createListButton: function(options) {
        var el = '<li>' +
                    '<div id="' + options.id + '-button" class="o-menu-button"' + '>' +
                        '<div class="o-button-icon">' +
                          '<svg class="' + options.iconCls + '">' +
                              '<use xlink:href="' + options.src + '"></use>' +
                          '</svg>' +
                        '</div>' +
                            options.text +
                        // '</div>' +
                    '</div>' +
                  '</li>';
        return el;
    },
    createElement: function(el, val, attributes) {
        var prefix = '<' + el;
        var suffix = '</' + el  + '>';
        var attributeNames = attributes ? Object.getOwnPropertyNames(attributes) : [];
        var attributeList = attributeNames.map(function(name) {
            var res = '';
            if (name === "cls") {
                res = ' ' + 'class'.concat('=', '"', attributes[name], '"');
            } else {
                res = ' ' + name.concat('=', '"', attributes[name],'"');
            }
            return res;
        });
        var element = prefix.concat(attributeList.join(' '), '>', val, suffix);
        return element;
    },
    createSvg: function(props) {
        var use = this.createElement('use', '', {
            'xlink:href': props.href
        });
        return this.createElement('svg', use, {
            cls: props.cls
        });
    }
}

},{"jquery":25}],186:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = function elQuery(targetObj, options) {
  var target = '.o-map';
  var prefix = options.breakPointsPrefix;
  var breakPoints = options.breakPoints;
  var breakNames = Object.getOwnPropertyNames(breakPoints);
  var breakCls = arrToObj(breakNames, prefix);
  var breakClsNames = breakNames.map(function(breakSize) {
    return breakCls[breakSize];
  });

  $(window).on('resize', onSizeChange);
  onSizeChange();

  function onSizeChange() {
    var mapSize = targetObj.getSize();
    var val = breakNames.reduce(function(prev, curr) {
      var height = breakPoints[curr][1];
      var width = breakPoints[curr][0];
      if (mapSize[0] <= width || mapSize[1] <= height) {
        if (!prev) {
          return curr;
        } else {
          return prev;
        }
      } else {
        return prev;
      }
    }, undefined);
    $(target).removeClass(breakClsNames.join(' '));
    if (val) {
      $(target).addClass(breakCls[val]);
    }
  }

  function arrToObj(arr, start) {
    var obj = {};
    var val = start;
    arr.slice().reverse().forEach(function(curr) {
      val += '-' + curr;
      obj[curr] = val;
    });
    return obj;
  }
}

},{"jquery":25}],187:[function(require,module,exports){
"use strict";


/**
Function to generate a unique id.
From Briguy37 http://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript
*/
var generateUUID = function generateUUID() {
  var d = new Date().getTime();
  if (window.performance && typeof window.performance.now === "function") {
    d += performance.now(); //use high-precision timer if available
  }
  var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    var r = (d + Math.random() * 16) % 16 | 0;
    d = Math.floor(d / 16);
    return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);
  });
  return uuid;
}

module.exports = generateUUID;

},{}],188:[function(require,module,exports){
"use strict";

module.exports = function getimageorientation(file, callback) {
  var reader = new FileReader();
  reader.onload = function(e) {
    var view = new DataView(e.target.result);
    var length;
    var offset;
    var marker;
    var little;
    var tags;

    if (view.getUint16(0, false) != 0xFFD8) {
      return callback(-2);
    }

    length = view.byteLength;
    offset = 2;
    while (offset < length) {
      marker = view.getUint16(offset, false);
      offset += 2;
      if (marker == 0xFFE1) {
        if (view.getUint32(offset += 2, false) != 0x45786966) {
          return callback(-1);
        }

        little = view.getUint16(offset += 6, false) == 0x4949;
        offset += view.getUint32(offset + 4, little);
        tags = view.getUint16(offset, little);
        offset += 2;
        for (var i = 0; i < tags; i++) {
          if (view.getUint16(offset + (i * 12), little) == 0x0112) {
            return callback(view.getUint16(offset + (i * 12) + 8, little));
          }
        }

      } else if ((marker & 0xFF00) != 0xFF00) {
        break;
      } else {
        offset += view.getUint16(offset, false);
      }
    }

    return callback(-1);
  };
  reader.readAsArrayBuffer(file);
}

},{}],189:[function(require,module,exports){
"use strict";

module.exports = function getUrl() {
    return location.protocol +'//'+
            location.hostname +
            (location.port?":"+location.port:"") +
            location.pathname;
}

},{}],190:[function(require,module,exports){
"use strict";

module.exports = function imageresizer(imageData, opt_options, orientation, callback) {
  var fileType = imageData.split(';')[0].split('/')[1];
  var options = opt_options;
  var image = new Image();

  image.onload = function(imageEvent) {
    var canvas = document.createElement('canvas');
    var context = canvas.getContext('2d');
    var max_size = options.maxSize || 600;
    var width = image.width;
    var height = image.height;
    var translateWidth;
    var translateHeight;
    var rotation;
    var dataUrl;

    if (width > height) {
      if (width > max_size) {
        height *= max_size / width;
        width = max_size;
      }
    } else {
      if (height > max_size) {
        width *= max_size / height;
        height = max_size;
      }
    }

    canvas.width = width;
    canvas.height = height;

    if (orientation%2 === 0) {
      canvas.width = height;
      canvas.height = width;
    }

    switch (orientation) {
      case 1:
        translateWidth = 0;
        translateHeight = 0;
        rotation = 0;
        break;
      case 3:
        translateWidth = canvas.width;
        translateHeight = canvas.height;
        rotation = 180;
        break;
      case 6:
        translateWidth = canvas.width;
        translateHeight = 0;
        rotation = 90;
        break;
      case 8:
        translateWidth = 0;
        translateHeight = canvas.height;
        rotation = 270;
        break;
      default:
        translateWidth = 0;
        translateHeight = 0;
        rotation = 0;
        break;
    }

    context.translate(translateWidth,translateHeight);
    context.rotate(rotation*Math.PI/180);
    context.drawImage(image, 0, 0, width, height);
    dataUrl = canvas.toDataURL('image/' + fileType);
    callback(dataUrl);
  }

  image.src = imageData;
}

},{}],191:[function(require,module,exports){
"use strict";

var $ = require('jquery');

module.exports = function isEmbedded(target) {
  if (window.top !== window.self || $(target).parent().is('BODY') === false) {
    return true;
  } else {
    return false;
  }
}

},{"jquery":25}],192:[function(require,module,exports){
"use strict";

module.exports = function isUrl(s) {
   var regexp = new RegExp('^(?:[a-z]+:)?//', 'i');
   return regexp.test(s);
}

},{}],193:[function(require,module,exports){
"use strict";

module.exports = function numberFormatter(numberToFormat) {
  var nr = numberToFormat;
  var length = nr.toString().length;
  if (length > 3) {
    var delimiter = ' '; //white space as delimiter

    //Round by factor
    if (nr >= 1000) {
      var factor = Math.pow(10, length) / 10000;
      nr = Math.round(nr / factor) * factor;
    }

    var nrStr = nr.toString();
    var a = [];
    while (nrStr.length > 3) {
      var n = nrStr.substr(nrStr.length - 3);
      a.unshift(n);
      nrStr = nrStr.substr(0, nrStr.length - 3);
    }
    if (nrStr.length > 0) {
      a.unshift(nrStr);
    }
    nrStr = a.join(delimiter);
    return nrStr;
  } else {
    return nr.toString();
  }
}

},{}],194:[function(require,module,exports){
"use strict";
var $ = require('jquery');
var utils = require('../utils');

module.exports = function renderError(type, el) {
  if (type === 'browser') {
    renderBrowserError(el);
  }

  function renderBrowserError(el) {
    var message = 'Det ser ut som att du använder en föråldrad webbläsare. Prova att uppgradera din webbläsare för att visa kartan.'
    var elMessage = utils.createElement('div', message, {
      cls: 'o-no-map-message'
    });
    var container = utils.createElement('div', elMessage, {
      cls: 'o-no-map'
    });
    $(function() {
      $(el).append(container);
    });
  }
}

},{"../utils":185,"jquery":25}],195:[function(require,module,exports){
"use strict";

var Replacer = function() {

  var start = undefined;
  var end = undefined;
  var helper = undefined;
  var helperNS = undefined;
  var helperArg = undefined;

  function replace(name, obj, options) {
      start = options.start || '{{';
      end = options.end || '}}';
      helper = options.helper || {};
      helperNS = options.helperNS || '@';
      helperArg = [options.helperArg] || [];

      var result = searchAndReplace(name, obj);
      return result;
  }

  function searchAndReplace(name, obj) {
      var regex = new RegExp(start + '(.*?)' +  end, "g");
      var matches = regex.exec(name);
      if(matches) {
          var val = obj.hasOwnProperty(matches[1]) ? obj[matches[1]] : '';
          if (!val) {
            var nsIndex = matches[0].indexOf(helperNS);
            if (nsIndex) {
              var helperParts = getArgs(matches[1]);
              var helperName = helperParts[1].substring(nsIndex - 1);
              var args = helperArg.concat(helperParts[0]);
              val = helper.hasOwnProperty(helperName) ? helper[helperName].apply(null, args).toString() : '';
            }
          }
          return searchAndReplace(name.replace(matches[0], val), obj);
      }
      else {
          return name;
      }
  }

  function getArgs(str) {
    var args = str.match(/\((.*?)\)/);
    if (args) {
      return [args[1].split(','), str.substring(0, args.index)];
    } else {
      return ['',str];
    }
  }

	return {
  		replace: function(name, obj, options) {
          var opt = options || {};
          return (replace(name, obj, opt));
  		}
	};

}

module.exports = Replacer();

},{}],196:[function(require,module,exports){
"use strict";

var round = function round(value, decimals) {
  return Number(Math.round(value + 'e' + decimals) + 'e-' + decimals);
}

module.exports = round;

},{}],197:[function(require,module,exports){
"use strict";
var renderError = require('./rendererror');

module.exports = function supports(type, el) {
  var canvas = document.createElement('canvas').getContext;
  var requestAnimationFrame = window.requestAnimationFrame;
  if (!!canvas && !!requestAnimationFrame) {
    return true;
  } else {
    renderError('browser', el);
    return false;
  }
}

},{"./rendererror":194}],198:[function(require,module,exports){
"use strict";

module.exports = function trimUrl(url) {
  var trimmed;
  if (url.substring(url.lastIndexOf('/')).indexOf('.htm') !== -1) {
    trimmed = url.substring(0, url.lastIndexOf('/') + 1);
  } else if (url.substr(url.length - 1) !== '/') {
    trimmed = url + '/';
  } else {
    trimmed = url;
  }
  return trimmed;
}

},{}],199:[function(require,module,exports){
"use strict";

var urlparser = {};

urlparser.objectify = function(objString, opt_options) {
    var options = opt_options || {};
    var delimeter = options.delimeter || '/';
    var topmost = options.topmost || 'name';
    var parts = objString.split(delimeter);
    var obj = {};
    if(options.topmost) {
        if(parts[0]  === '') {
            console.log('Topmost value is missing');
        }
        else {
            obj[topmost] = parts[0];
        }
    }
    if(parts.length > 1) {
        for (var i = 1, ii = parts.length; i < ii; i += 2) {
            obj[parts[i]] = parts[i + 1];
        }
    }
    return obj;
}
urlparser.stringify = function(obj, opt_options) {
    var options = opt_options || {};
    var delimeter = options.delimeter || '/';
    var topmost = options.topmost || undefined;
    var objString = topmost ? obj[topmost] : '';
    for (var key in obj) {
        if(key !== topmost)
        objString += delimeter + key + delimeter + obj[key];
    }
    return objString;
}
urlparser.arrStringify = function(arr, opt_options) {
   var options = opt_options || {};
   var delimeter = options.delimeter || '/';
   var topmost = options.topmost || '';
   var arrString = topmost ? topmost + delimeter : '';
   if(typeof arr[0][0] === 'undefined') {
      arrString += arr.join(',');
   }
   else {
      var outer = arr.map(function(inner) {
          var res = inner.map(function(innerpart) {
              return innerpart.join('!');
          })
          return res.join(',');
      });
      arrString += outer.join(options.delimeter);
   }
   return arrString;
}
urlparser.strArrayify = function(str, opt_options) {
   var options = opt_options || {};
   var delimeter = options.delimeter || '/';
   var topmostName = opt_options.topmostName || 'topmost';
   var arrName = opt_options.arrName || 'arr';
   var topmost = str.substring(0, str.indexOf(delimeter));
   var arrStr = str.substring(str.indexOf(delimeter) + 1);
   var arr = arrStr.split(delimeter).map(function(el) {
        return el.split('!');
   });
   var obj = {};
   obj[topmostName] = topmost;
   obj[arrName] = arr;
   return obj;
}
urlparser.strIntify = function(str, opt_options) {
    var options = opt_options || {};
    var delimiter = options.delimiter || ',';
    var arr = str.split(delimiter);
    var strToInt = arr.map(function(el) {
        return parseInt(el);
    });
    return strToInt;
}
urlparser.strBoolean = function(str) {
    if(str === "1") {
        return true;
    }
    else if(str === "0") {
        return false;
    }
    else {
        console.log("String is not 1 or 0");
        return false;
    }
}
urlparser.formatUrl = function(obj) {
    var url = Object.getOwnPropertyNames(obj).reduce(function(prev, current) {
        current = prev ? "&" + current + "=" + obj[current] : current + "=" + obj[current];
        return prev + current;
    }, "");
    return url;
}

module.exports = urlparser;

},{}],200:[function(require,module,exports){
"use strict";
var isUrl = require('./isurl');

//Checks if str is a valid url. If not append str to baseUrl
module.exports = function validateUrl(str, baseUrl) {
   var url = isUrl(str) ? str : baseUrl + str;
   return url;
}

},{"./isurl":192}],201:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var template = require("./templates/viewer.handlebars");
var Modal = require('./modal');
var utils = require('./utils');
var isUrl = require('./utils/isurl');
var elQuery = require('./utils/elquery');
var featureinfo = require('./featureinfo');
var maputils = require('./maputils');
var style = require('./style')();
var layerCreator = require('./layercreator');

var map;
var template;
var settings = {
  projection: '',
  projectionCode: '',
  projectionExtent: '',
  extent: [],
  center: [0, 0],
  zoom: 0,
  resolutions: null,
  source: {},
  group: [],
  layers: [],
  styles: {},
  controls: [],
  featureInfoOverlay: undefined,
  editLayer: null
};
var urlParams;
var footerTemplate = {};

function init(el, mapOptions) {
  render(el, mapOptions);

  // Read and set projection
  if (mapOptions.hasOwnProperty('proj4Defs') && window.proj4) {
    var proj = mapOptions['proj4Defs'];

    //Register proj4 projection definitions
    for (var i = 0; i < proj.length; i++) {
      proj4.defs(proj[i].code, proj[i].projection);
      if (proj[i].hasOwnProperty('alias')) {
        proj4.defs(proj[i].alias, proj4.defs(proj[i].code));
      }
    }
  }
  settings.params = urlParams = mapOptions.params || {};
  settings.map = mapOptions.map;
  settings.url = mapOptions.url;
  settings.target = mapOptions.target;
  settings.baseUrl = mapOptions.baseUrl;
  if (mapOptions.hasOwnProperty('proj4Defs') || mapOptions.projectionCode=="EPSG:3857" || mapOptions.projectionCode=="EPSG:4326") {
    // Projection to be used in map
    settings.projectionCode = mapOptions.projectionCode || undefined;
    settings.projectionExtent = mapOptions.projectionExtent;
    settings.projection = new ol.proj.Projection({
      code: settings.projectionCode,
      extent: settings.projectionExtent,
      units: getUnits(settings.projectionCode)
    });
    settings.resolutions = mapOptions.resolutions || undefined;
    settings.tileGrid = maputils.tileGrid(settings.projectionExtent, settings.resolutions);
  }

  settings.extent = mapOptions.extent || undefined;
  settings.center = urlParams.center || mapOptions.center;
  settings.zoom = urlParams.zoom || mapOptions.zoom;
  settings.source = mapOptions.source;
  settings.groups = mapOptions.groups;
  settings.editLayer = mapOptions.editLayer;
  settings.styles = mapOptions.styles;
  style.init();
  settings.layers = createLayers(mapOptions.layers, urlParams.layers);
  settings.controls = mapOptions.controls;
  settings.consoleId = mapOptions.consoleId || 'o-console';
  settings.featureinfoOptions = mapOptions.featureinfoOptions || {};

  //If url arguments, parse this settings
  if (window.location.search) {
    parseArg();
  }

  loadMap();

  elQuery(map, {
    breakPoints: mapOptions.breakPoints,
    breakPointsPrefix: mapOptions.breakPointsPrefix,
  });

  if (urlParams.pin) {
    settings.featureinfoOptions.savedPin = urlParams.pin;
  }

  //This needs further development for proper handling in permalink
  else if (urlParams.selection) {
    settings.featureinfoOptions.savedSelection = new ol.Feature({
      geometry: new ol.geom[urlParams.selection.geometryType](urlParams.selection.coordinates)
    });
  }
  featureinfo.init(settings.featureinfoOptions);

}

function createLayers(layerlist, savedLayers) {
  var layers = [];
  for (var i = layerlist.length - 1; i >= 0; i--) {
    var savedLayer = {};
    if (savedLayers) {
      savedLayer = savedLayers[layerlist[i].name.split(':').pop()] || {
        visible: false,
        legend: false
      };
      savedLayer.name = layerlist[i].name;
    }
    var layer = $.extend(layerlist[i], savedLayer);
    layers.push(layerCreator(layer));
  }
  return layers;
}

function loadMap() {
  map = new ol.Map({
    target: 'o-map',
    layers: settings.layers,
    controls: [],
    view: new ol.View({
      extent: settings.extent || undefined,
      projection: settings.projection || undefined,
      center: settings.center,
      resolutions: settings.resolutions || undefined,
      zoom: settings.zoom
    })
  });
}

function parseArg() {
  var str = window.location.search.substring(1);
  var elements = str.split("&");

  for (var i = 0; i < elements.length; i++) {

    //center coordinates
    if (i == 0) {
      var z = elements[i].split(",");
      settings.center[0] = parseInt(z[0]);
      settings.center[1] = parseInt(z[1]);
    } else if (i == 1) {
      settings.zoom = parseInt(elements[i]);
    } else if (i == 2) {
      var l = elements[i].split(";");
      var layers = settings.layers;
      var la, match;
      for (var j = 0; j < layers.length; j++) {
        match = 0;
        $.each(l, function(index, el) {
          la = el.split(",");
          if (layers[j].get('group')) {
            if ((layers[j].get('group') == 'background') && (la[0] == layers[j].get('name'))) {
              layers[j].setVisible(true);
              match = 1;
            } else if ((layers[j].get('group') == 'background') && (match == 0)) {
              layers[j].setVisible(false);
            } else if (la[0] == layers[j].get('name')) {
              if (la[1] == 1) {
                layers[j].set('legend', true);
                layers[j].setVisible(false);
              } else {
                layers[j].set('legend', true);
                layers[j].setVisible(true);
              }
            }
          }
        })
      }
    }
  }

}

function getSettings() {
  return settings;
}

function getExtent() {
  return settings.extent;
}

function getBaseUrl() {
  return settings.baseUrl;
}

function getMapName() {
  return settings.map;
}

function getTileGrid() {
  return settings.tileGrid;
}

function getUrl() {
  return settings.url;
}

function getStyleSettings() {
  return settings.styles;
}

function getResolutions() {
  return settings.resolutions;
}

function getMapUrl() {
  var layerNames = '';
  var url;

  //delete search arguments if present
  if (window.location.search) {
    url = window.location.href.replace(window.location.search, '?');
  } else {
    url = window.location.href + '?';
  }
  var mapView = map.getView();
  var center = mapView.getCenter();
  for (var i = 0; i < 2; i++) {
    center[i] = parseInt(center[i]); //coordinates in integers
  }
  var zoom = mapView.getZoom();
  var layers = map.getLayers();

  //add layer if visible
  layers.forEach(function(el) {
    if (el.getVisible() == true) {
      layerNames += el.get('name') + ';';
    } else if (el.get('legend') == true) {
      layerNames += el.get('name') + ',1;';
    }
  })
  return url + center + '&' + zoom + '&' + layerNames.slice(0, layerNames.lastIndexOf(";"));
}

function getMap() {
  return map;
}

function getLayers() {
  return settings.layers;
}

function getLayersByProperty(key, val, byName) {
  var layers = map.getLayers().getArray().filter(function(layer) {
    if (layer.get(key)) {
      if (layer.get(key) === val) {
        return layer;
      }
    }
  });

  if (byName) {
    return layers.map(function(layer) {
      return layer.get('name');
    });
  } else {
    return layers;
  }
}

function getLayer(layername) {
  var layer = $.grep(settings.layers, function(obj) {
    return (obj.get('name') == layername);
  });
  return layer[0];
}

function getQueryableLayers() {
  var queryableLayers = settings.layers.filter(function(layer) {
    if (layer.get('queryable') && layer.getVisible()) {
      return layer;
    }
  });
  return queryableLayers;
}

function getGroup(group) {
  var group = $.grep(settings.layers, function(obj) {
    return (obj.get('group') == group);
  });
  return group;
}

function getGroups(opt) {
  if(opt == 'top') {
    return settings.groups;
  } else if (opt == 'sub') {
    return getSubgroups();
  } else {
    return settings.groups.concat(getSubgroups());
  }
}

function getSubgroups() {
  var subgroups = [];

  function findSubgroups(groups, n) {
    if (n >= groups.length) {
      return;
    }

    if (groups[n].groups) {
      groups[n].groups.forEach(function(subgroup) {
        subgroups.push(subgroup);
      });

      findSubgroups(groups[n].groups, 0);
    }

    findSubgroups(groups, n+1);
  }

  findSubgroups(settings.groups, 0);
  return subgroups;
}

function getProjectionCode() {
  return settings.projectionCode;
}

function getProjection() {
  return settings.projection;
}

function getMapSource() {
  return settings.source;
}

function getControlNames() {
  var controlNames = settings.controls.map(function(obj) {
    return obj.name;
  });
  return controlNames;
}

function getTarget() {
  return settings.target;
}

function checkScale(scale, maxScale, minScale) {
  if (maxScale || minScale) {

    // Alter 1: maxscale and minscale
    if (maxScale && minScale) {
      if ((scale > maxScale) && (scale < minScale)) {
        return true;
      }
    }

    // Alter 2: only maxscale
    else if (maxScale) {
      if (scale > maxScale) {
        return true;
      }
    }

    // Alter 3: only minscale
    else if (minScale) {
      if (scale < minScale) {
        return true;
      }
    }
  }

  // Alter 4: no scale limit
  else {
    return true;
  }
}

function getConsoleId() {
  return settings.consoleId;
}

function getScale(resolution) {
  var dpi = 25.4 / 0.28;
  var mpu = settings.projection.getMetersPerUnit();
  var scale = resolution * mpu * 39.37 * dpi;
  scale = Math.round(scale);
  return scale;
}

function getUnits(proj) {
  var units;
  switch(proj) {
    case 'EPSG:3857':
      units = 'm';
      break;
    case 'EPSG:4326':
      units = 'degrees';
      break;
    default:
      units = proj4.defs(proj) ? proj4.defs(proj).units : undefined;
  }
  return units;
}

function autoPan() {
  /*Workaround to remove when autopan implemented for overlays */
  var el = $('.o-popup');
  var center = map.getView().getCenter();
  var popupOffset = $(el).offset();
  var mapOffset = $('#' + map.getTarget()).offset();
  var offsetY = popupOffset.top - mapOffset.top;
  var mapSize = map.getSize();
  var offsetX = (mapOffset.left + mapSize[0]) - (popupOffset.left + $(el).outerWidth(true));

  // Check if mapmenu widget is used and opened
  var menuSize = 0;
  if (settings.controls.hasOwnProperty('mapmenu')) {
    menuSize = settings.controls.mapmenu.getTarget().offset().left > 0 ? mapSize[0] - settings.controls.mapmenu.getTarget().offset().left : menuSize = 0;
  }
  if (offsetY < 0 || offsetX < 0 + menuSize || offsetX > (mapSize[0] - $(el).outerWidth(true))) {
    var dx = 0,
      dy = 0;
    if (offsetX < 0 + menuSize) {
      dx = (-offsetX + menuSize) * map.getView().getResolution();
    }
    if (offsetX > (mapSize[0] - $(el).outerWidth(true))) {
      dx = -($(el).outerWidth(true) - (mapSize[0] - offsetX)) * map.getView().getResolution();
    }
    if (offsetY < 0) {
      dy = (-offsetY) * map.getView().getResolution();
    }
    map.getView().animate({
      center: ([center[0] + dx, center[1] + dy]),
	  duration:300
    });
  }
  /*End workaround*/
}

function removeOverlays(overlays) {
  if (overlays) {
    if (overlays.constructor === Array || overlays instanceof ol.Collection) {
      overlays.forEach(function(overlay) {
        map.removeOverlay(overlay);
      })
    } else {
      map.removeOverlay(overlays);
    }
  } else {
    map.getOverlays().clear();
  }
}

function render(el, mapOptions) {
    if (mapOptions.hasOwnProperty('footer')) {
      if (mapOptions.footer[0].hasOwnProperty('img')) {
        footerTemplate.img = mapOptions.footer[0].img;
      }
      if (mapOptions.footer[0].hasOwnProperty('text')) {
        footerTemplate.text = mapOptions.footer[0].text;
      }
      if (mapOptions.footer[0].hasOwnProperty('url')) {
        footerTemplate.url = mapOptions.footer[0].url;
      }
      if (mapOptions.footer[0].hasOwnProperty('urlText')) {
        footerTemplate.urlText = mapOptions.footer[0].urlText;
      }
    }

    $(el).html(template(footerTemplate));
  }

module.exports.init = init;
module.exports.createLayers = createLayers;
module.exports.getBaseUrl = getBaseUrl;
module.exports.getExtent = getExtent;
module.exports.getSettings = getSettings;
module.exports.getStyleSettings = getStyleSettings;
module.exports.getMapUrl = getMapUrl;
module.exports.getMap = getMap;
module.exports.getLayers = getLayers;
module.exports.getLayersByProperty = getLayersByProperty;
module.exports.getLayer = getLayer;
module.exports.getControlNames = getControlNames;
module.exports.getQueryableLayers = getQueryableLayers;
module.exports.getGroup = getGroup;
module.exports.getGroups = getGroups;
module.exports.getProjectionCode = getProjectionCode;
module.exports.getProjection = getProjection;
module.exports.getMapSource = getMapSource;
module.exports.getResolutions = getResolutions;
module.exports.getScale = getScale;
module.exports.getTarget = getTarget;
module.exports.getTileGrid = getTileGrid;
module.exports.autoPan = autoPan;
module.exports.removeOverlays = removeOverlays;
module.exports.checkScale= checkScale;
module.exports.getMapName = getMapName;
module.exports.getConsoleId = getConsoleId;
module.exports.getUrl = getUrl;

},{"./featureinfo":118,"./layercreator":143,"./maputils":148,"./modal":150,"./style":176,"./templates/viewer.handlebars":184,"./utils":185,"./utils/elquery":186,"./utils/isurl":192,"jquery":25,"openlayers":28}],202:[function(require,module,exports){
"use strict";

var ol = require('openlayers');
var $ = require('jquery');
var Viewer = require('./viewer');

var map;

function Init(opt_options) {
  var options = opt_options || {};
  var zoomControl;
  var target = options.target || 'o-toolbar-navigation';
  map = Viewer.getMap();

  zoomControl = new ol.control.Zoom({
    zoomInTipLabel: ' ',
    zoomOutTipLabel: ' ',
    zoomInLabel: $.parseHTML('<svg class="o-icon-fa-plus"><use xlink:href="#fa-plus"></use></svg>')[0],
    zoomOutLabel: $.parseHTML('<svg class="o-icon-fa-minus"><use xlink:href="#fa-minus"></use></svg>')[0],
    target: target
  });
  map.addControl(zoomControl);
}

module.exports.init = Init;

},{"./viewer":201,"jquery":25,"openlayers":28}]},{},[98])(98)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjb25mL29yaWdvQ29uZmlnLmpzIiwiY29uZi9vcmlnb0NvbnRyb2xzLmpzIiwiZXh0ZXJucy9vd2wuY2Fyb3VzZWwubWluLmpzIiwiZXh0ZXJucy9vd2xjYXJvdXNlbC1icm93c2VyaWZ5LmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnMucnVudGltZS5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxiYXNlLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGRlY29yYXRvcnMuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcZGVjb3JhdG9yc1xcaW5saW5lLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGV4Y2VwdGlvbi5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxoZWxwZXJzLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGhlbHBlcnNcXGJsb2NrLWhlbHBlci1taXNzaW5nLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGhlbHBlcnNcXGVhY2guanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcaGVscGVyc1xcaGVscGVyLW1pc3NpbmcuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcaGVscGVyc1xcaWYuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcaGVscGVyc1xcbG9nLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGhlbHBlcnNcXGxvb2t1cC5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxoZWxwZXJzXFx3aXRoLmpzIiwibm9kZV9tb2R1bGVzXFxoYW5kbGViYXJzXFxsaWJcXGhhbmRsZWJhcnNcXGxvZ2dlci5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcZGlzdFxcY2pzXFxoYW5kbGViYXJzXFxub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xcbm8tY29uZmxpY3QuanMiLCJub2RlX21vZHVsZXNcXGhhbmRsZWJhcnNcXGxpYlxcaGFuZGxlYmFyc1xccnVudGltZS5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFxzYWZlLXN0cmluZy5qcyIsIm5vZGVfbW9kdWxlc1xcaGFuZGxlYmFyc1xcbGliXFxoYW5kbGViYXJzXFx1dGlscy5qcyIsIm5vZGVfbW9kdWxlcy9oYW5kbGViYXJzL3J1bnRpbWUuanMiLCJub2RlX21vZHVsZXMvaGJzZnkvcnVudGltZS5qcyIsIm5vZGVfbW9kdWxlcy9qcXVlcnkvZGlzdC9qcXVlcnkuanMiLCJub2RlX21vZHVsZXMvbG9jYWxmb3JhZ2UvZGlzdC9sb2NhbGZvcmFnZS5qcyIsIm5vZGVfbW9kdWxlcy9tZ3JzL21ncnMuanMiLCJub2RlX21vZHVsZXMvb3BlbmxheWVycy9kaXN0L29sLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9Qb2ludC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvUHJvai5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvYWRqdXN0X2F4aXMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9hZGp1c3RfbGF0LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vYWRqdXN0X2xvbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL2FzaW56LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vZTBmbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL2UxZm4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9lMmZuLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vZTNmbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL2dOLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vaW1sZm4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9pcXNmbnouanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9tbGZuLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vbXNmbnouanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9waGkyei5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3BqX2VuZm4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9wal9pbnZfbWxmbi5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3BqX21sZm4uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9xc2Zuei5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3NpZ24uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbW1vbi9zcmF0LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb21tb24vdG9Qb2ludC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvY29tbW9uL3RzZm56LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb25zdGFudHMvRGF0dW0uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbnN0YW50cy9FbGxpcHNvaWQuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvbnN0YW50cy9QcmltZU1lcmlkaWFuLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9jb25zdGFudHMvdW5pdHMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2NvcmUuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2RhdHVtLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9kYXR1bV90cmFuc2Zvcm0uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2RlZnMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2Rlcml2ZUNvbnN0YW50cy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvZXh0ZW5kLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9nbG9iYWwuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2luY2x1ZGVkUHJvamVjdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wYXJzZUNvZGUuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2pTdHJpbmcuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9hZWEuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2FlcWQuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2Nhc3MuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2NlYS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvZXFjLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9lcWRjLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9nYXVzcy5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMvZ25vbS5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9saWIvcHJvamVjdGlvbnMva3JvdmFrLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9sYWVhLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9sY2MuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL2xvbmdsYXQuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL21lcmMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL21pbGwuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL21vbGwuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL256bWcuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL29tZXJjLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9wb2x5LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9zaW51LmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9zb21lcmMuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3N0ZXJlLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy9zdGVyZWEuanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3RtZXJjLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi9wcm9qZWN0aW9ucy91dG0uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3Byb2plY3Rpb25zL3ZhbmRnLmpzIiwibm9kZV9tb2R1bGVzL3Byb2o0L2xpYi90cmFuc2Zvcm0uanMiLCJub2RlX21vZHVsZXMvcHJvajQvbGliL3drdC5qcyIsIm5vZGVfbW9kdWxlcy9wcm9qNC9wYWNrYWdlLmpzb24iLCJub2RlX21vZHVsZXMvdHlwZWFoZWFkLmpzL2Rpc3QvdHlwZWFoZWFkLmJ1bmRsZS5qcyIsIm9yaWdvLmpzIiwic3JjL2Fib3V0LmpzIiwic3JjL2F0dHJpYnV0aW9uLmpzIiwic3JjL2NvbXBvbmVudHMvc3Bpbm5lci5oYW5kbGViYXJzIiwic3JjL2NvbnRyb2xpbml0aWFsaXNlci5qcyIsInNyYy9kcm9wZG93bi5qcyIsInNyYy9lZGl0b3IuanMiLCJzcmMvZWRpdG9yL2Fnc3RyYW5zYWN0aW9uLmpzIiwic3JjL2VkaXRvci9kcmF3dG9vbHMuanMiLCJzcmMvZWRpdG9yL2VkaXREaXNwYXRjaGVyLmpzIiwic3JjL2VkaXRvci9lZGl0Zm9ybS5qcyIsInNyYy9lZGl0b3IvZWRpdGhhbmRsZXIuanMiLCJzcmMvZWRpdG9yL2VkaXRvcmxheWVycy5qcyIsInNyYy9lZGl0b3IvZWRpdG9ydG9vbGJhci5qcyIsInNyYy9lZGl0b3IvZWRpdHNzdG9yZS5qcyIsInNyYy9lZGl0b3IvaW5kZXhlZGRiLmpzIiwic3JjL2VkaXRvci9zaGFwZXMuanMiLCJzcmMvZWRpdG9yL3RyYW5zYWN0aW9uaGFuZGxlci5qcyIsInNyYy9lZGl0b3Ivd2ZzdHJhbnNhY3Rpb24uanMiLCJzcmMvZmVhdHVyZWluZm8uanMiLCJzcmMvZmVhdHVyZWluZm90ZW1wbGF0ZXMuanMiLCJzcmMvZmVhdHVyZWxheWVyLmpzIiwic3JjL2Z1bGxzY3JlZW4uanMiLCJzcmMvZ2VvbS5qcyIsInNyYy9nZW9tZXRyeS9nZXRhcmVhLmpzIiwic3JjL2dlb21ldHJ5L2dldGNlbnRlci5qcyIsInNyYy9nZW9wb3NpdGlvbi5qcyIsInNyYy9nZXRhdHRyaWJ1dGVzLmpzIiwic3JjL2dldGZlYXR1cmUuanMiLCJzcmMvZ2V0ZmVhdHVyZWluZm8uanMiLCJzcmMvaG9tZS5qcyIsInNyYy9sYXllci9hZ3NmZWF0dXJlLmpzIiwic3JjL2xheWVyL2Fnc3RpbGUuanMiLCJzcmMvbGF5ZXIvZmVhdHVyZWxheWVyLmpzIiwic3JjL2xheWVyL2dlb2pzb24uanMiLCJzcmMvbGF5ZXIvZ3JvdXAuanMiLCJzcmMvbGF5ZXIvb3NtLmpzIiwic3JjL2xheWVyL3RpbGUuanMiLCJzcmMvbGF5ZXIvdG9wb2pzb24uanMiLCJzcmMvbGF5ZXIvdmVjdG9yLmpzIiwic3JjL2xheWVyL3dmcy5qcyIsInNyYy9sYXllci93bXMuanMiLCJzcmMvbGF5ZXIvd210cy5qcyIsInNyYy9sYXllci94eXouanMiLCJzcmMvbGF5ZXJjcmVhdG9yLmpzIiwic3JjL2xlZ2VuZC5qcyIsInNyYy9saW5rLmpzIiwic3JjL21hcGxvYWRlci5qcyIsInNyYy9tYXBtZW51LmpzIiwic3JjL21hcHV0aWxzLmpzIiwic3JjL21lYXN1cmUuanMiLCJzcmMvbW9kYWwuanMiLCJzcmMvb2ZmbGluZS5qcyIsInNyYy9vZmZsaW5lL2Rvd25sb2FkZXIuanMiLCJzcmMvb2ZmbGluZS9kb3dubG9hZGVyLnRlbXBsYXRlLmhhbmRsZWJhcnMiLCJzcmMvb2ZmbGluZS9kb3dubG9hZGhhbmRsZXIuanMiLCJzcmMvb2ZmbGluZS9kb3dubG9hZHNvdXJjZXMuanMiLCJzcmMvb2ZmbGluZS9nZW9qc29uLmpzIiwic3JjL29mZmxpbmUvb2ZmbGluZWRpc3BhdGNoZXIuanMiLCJzcmMvb2ZmbGluZS9vZmZsaW5lbGF5ZXIuanMiLCJzcmMvb2ZmbGluZS9vZmZsaW5lc3RvcmUuanMiLCJzcmMvb2ZmbGluZS90b3BvanNvbi5qcyIsInNyYy9vZmZsaW5lL3ZlcmlmeWZlYXR1cmVpZHMuanMiLCJzcmMvb2ZmbGluZS93ZnMuanMiLCJzcmMvcGVybWFsaW5rL3Blcm1hbGluay5qcyIsInNyYy9wZXJtYWxpbmsvcGVybWFsaW5rcGFyc2VyLmpzIiwic3JjL3Blcm1hbGluay9wZXJtYWxpbmtzdG9yZS5qcyIsInNyYy9wb3B1cC5qcyIsInNyYy9wb3NpdGlvbi5qcyIsInNyYy9wcmludC5qcyIsInNyYy9yb3RhdGUuanMiLCJzcmMvc2NhbGUuanMiLCJzcmMvc2NhbGVsaW5lLmpzIiwic3JjL3NlYXJjaC5qcyIsInNyYy9zaGFyZW1hcC5qcyIsInNyYy9zaWRlYmFyLmpzIiwic3JjL3NwbGFzaC5qcyIsInNyYy9zdHlsZS5qcyIsInNyYy9zdHlsZS9tZWFzdXJlLmpzIiwic3JjL3N0eWxlL3Bpbi5qcyIsInNyYy9zdHlsZS9zdHlsZXR5cGVzLmpzIiwic3JjL3RlbXBsYXRlcy9lZGl0b3J0b29sYmFyLnRlbXBsYXRlLmhhbmRsZWJhcnMiLCJzcmMvdGVtcGxhdGVzL2ZlYXR1cmVpbmZvdGVtcGxhdGVzL2RlZmF1bHQuaGFuZGxlYmFycyIsInNyYy90ZW1wbGF0ZXMvZmVhdHVyZWluZm90ZW1wbGF0ZXMvZGVmYXVsdC5qcyIsInNyYy90ZW1wbGF0ZXMvcHJpbnQuaGFuZGxlYmFycyIsInNyYy90ZW1wbGF0ZXMvdmlld2VyLmhhbmRsZWJhcnMiLCJzcmMvdXRpbHMuanMiLCJzcmMvdXRpbHMvZWxxdWVyeS5qcyIsInNyYy91dGlscy9nZW5lcmF0ZXV1aWQuanMiLCJzcmMvdXRpbHMvZ2V0aW1hZ2VvcmllbnRhdGlvbi5qcyIsInNyYy91dGlscy9nZXR1cmwuanMiLCJzcmMvdXRpbHMvaW1hZ2VyZXNpemVyLmpzIiwic3JjL3V0aWxzL2lzZW1iZWRkZWQuanMiLCJzcmMvdXRpbHMvaXN1cmwuanMiLCJzcmMvdXRpbHMvbnVtYmVyZm9ybWF0dGVyLmpzIiwic3JjL3V0aWxzL3JlbmRlcmVycm9yLmpzIiwic3JjL3V0aWxzL3JlcGxhY2VyLmpzIiwic3JjL3V0aWxzL3JvdW5kLmpzIiwic3JjL3V0aWxzL3N1cHBvcnRzLmpzIiwic3JjL3V0aWxzL3RyaW11cmwuanMiLCJzcmMvdXRpbHMvdXJscGFyc2VyLmpzIiwic3JjL3V0aWxzL3ZhbGlkYXRldXJsLmpzIiwic3JjL3ZpZXdlci5qcyIsInNyYy96b29tLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs4QkNIc0IsbUJBQW1COztJQUE3QixJQUFJOzs7OztvQ0FJTywwQkFBMEI7Ozs7bUNBQzNCLHdCQUF3Qjs7OzsrQkFDdkIsb0JBQW9COztJQUEvQixLQUFLOztpQ0FDUSxzQkFBc0I7O0lBQW5DLE9BQU87O29DQUVJLDBCQUEwQjs7Ozs7QUFHakQsU0FBUyxNQUFNLEdBQUc7QUFDaEIsTUFBSSxFQUFFLEdBQUcsSUFBSSxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQzs7QUFFMUMsT0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDdkIsSUFBRSxDQUFDLFVBQVUsb0NBQWEsQ0FBQztBQUMzQixJQUFFLENBQUMsU0FBUyxtQ0FBWSxDQUFDO0FBQ3pCLElBQUUsQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO0FBQ2pCLElBQUUsQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUMsZ0JBQWdCLENBQUM7O0FBRTdDLElBQUUsQ0FBQyxFQUFFLEdBQUcsT0FBTyxDQUFDO0FBQ2hCLElBQUUsQ0FBQyxRQUFRLEdBQUcsVUFBUyxJQUFJLEVBQUU7QUFDM0IsV0FBTyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsQ0FBQztHQUNuQyxDQUFDOztBQUVGLFNBQU8sRUFBRSxDQUFDO0NBQ1g7O0FBRUQsSUFBSSxJQUFJLEdBQUcsTUFBTSxFQUFFLENBQUM7QUFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7O0FBRXJCLGtDQUFXLElBQUksQ0FBQyxDQUFDOztBQUVqQixJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsSUFBSSxDQUFDOztxQkFFUixJQUFJOzs7Ozs7Ozs7Ozs7O3FCQ3BDeUIsU0FBUzs7eUJBQy9CLGFBQWE7Ozs7dUJBQ0UsV0FBVzs7MEJBQ1IsY0FBYzs7c0JBQ25DLFVBQVU7Ozs7QUFFdEIsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDOztBQUN4QixJQUFNLGlCQUFpQixHQUFHLENBQUMsQ0FBQzs7O0FBRTVCLElBQU0sZ0JBQWdCLEdBQUc7QUFDOUIsR0FBQyxFQUFFLGFBQWE7QUFDaEIsR0FBQyxFQUFFLGVBQWU7QUFDbEIsR0FBQyxFQUFFLGVBQWU7QUFDbEIsR0FBQyxFQUFFLFVBQVU7QUFDYixHQUFDLEVBQUUsa0JBQWtCO0FBQ3JCLEdBQUMsRUFBRSxpQkFBaUI7QUFDcEIsR0FBQyxFQUFFLFVBQVU7Q0FDZCxDQUFDOzs7QUFFRixJQUFNLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQzs7QUFFOUIsU0FBUyxxQkFBcUIsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRTtBQUNuRSxNQUFJLENBQUMsT0FBTyxHQUFHLE9BQU8sSUFBSSxFQUFFLENBQUM7QUFDN0IsTUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLElBQUksRUFBRSxDQUFDO0FBQy9CLE1BQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxJQUFJLEVBQUUsQ0FBQzs7QUFFbkMsa0NBQXVCLElBQUksQ0FBQyxDQUFDO0FBQzdCLHdDQUEwQixJQUFJLENBQUMsQ0FBQztDQUNqQzs7QUFFRCxxQkFBcUIsQ0FBQyxTQUFTLEdBQUc7QUFDaEMsYUFBVyxFQUFFLHFCQUFxQjs7QUFFbEMsUUFBTSxxQkFBUTtBQUNkLEtBQUcsRUFBRSxvQkFBTyxHQUFHOztBQUVmLGdCQUFjLEVBQUUsd0JBQVMsSUFBSSxFQUFFLEVBQUUsRUFBRTtBQUNqQyxRQUFJLGdCQUFTLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxVQUFVLEVBQUU7QUFDdEMsVUFBSSxFQUFFLEVBQUU7QUFBRSxjQUFNLDJCQUFjLHlDQUF5QyxDQUFDLENBQUM7T0FBRTtBQUMzRSxvQkFBTyxJQUFJLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzVCLE1BQU07QUFDTCxVQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztLQUN6QjtHQUNGO0FBQ0Qsa0JBQWdCLEVBQUUsMEJBQVMsSUFBSSxFQUFFO0FBQy9CLFdBQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUMzQjs7QUFFRCxpQkFBZSxFQUFFLHlCQUFTLElBQUksRUFBRSxPQUFPLEVBQUU7QUFDdkMsUUFBSSxnQkFBUyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssVUFBVSxFQUFFO0FBQ3RDLG9CQUFPLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDN0IsTUFBTTtBQUNMLFVBQUksT0FBTyxPQUFPLEtBQUssV0FBVyxFQUFFO0FBQ2xDLGNBQU0seUVBQTBELElBQUksb0JBQWlCLENBQUM7T0FDdkY7QUFDRCxVQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLE9BQU8sQ0FBQztLQUMvQjtHQUNGO0FBQ0QsbUJBQWlCLEVBQUUsMkJBQVMsSUFBSSxFQUFFO0FBQ2hDLFdBQU8sSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUM1Qjs7QUFFRCxtQkFBaUIsRUFBRSwyQkFBUyxJQUFJLEVBQUUsRUFBRSxFQUFFO0FBQ3BDLFFBQUksZ0JBQVMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLFVBQVUsRUFBRTtBQUN0QyxVQUFJLEVBQUUsRUFBRTtBQUFFLGNBQU0sMkJBQWMsNENBQTRDLENBQUMsQ0FBQztPQUFFO0FBQzlFLG9CQUFPLElBQUksQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLENBQUM7S0FDL0IsTUFBTTtBQUNMLFVBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0tBQzVCO0dBQ0Y7QUFDRCxxQkFBbUIsRUFBRSw2QkFBUyxJQUFJLEVBQUU7QUFDbEMsV0FBTyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDO0dBQzlCO0NBQ0YsQ0FBQzs7QUFFSyxJQUFJLEdBQUcsR0FBRyxvQkFBTyxHQUFHLENBQUM7OztRQUVwQixXQUFXO1FBQUUsTUFBTTs7Ozs7Ozs7Ozs7O2dDQzdFQSxxQkFBcUI7Ozs7QUFFekMsU0FBUyx5QkFBeUIsQ0FBQyxRQUFRLEVBQUU7QUFDbEQsZ0NBQWUsUUFBUSxDQUFDLENBQUM7Q0FDMUI7Ozs7Ozs7O3FCQ0pvQixVQUFVOztxQkFFaEIsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxVQUFTLEVBQUUsRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRTtBQUMzRSxRQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7QUFDYixRQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsRUFBRTtBQUNuQixXQUFLLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUNwQixTQUFHLEdBQUcsVUFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFOztBQUUvQixZQUFJLFFBQVEsR0FBRyxTQUFTLENBQUMsUUFBUSxDQUFDO0FBQ2xDLGlCQUFTLENBQUMsUUFBUSxHQUFHLGNBQU8sRUFBRSxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDMUQsWUFBSSxHQUFHLEdBQUcsRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztBQUMvQixpQkFBUyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7QUFDOUIsZUFBTyxHQUFHLENBQUM7T0FDWixDQUFDO0tBQ0g7O0FBRUQsU0FBSyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsT0FBTyxDQUFDLEVBQUUsQ0FBQzs7QUFFN0MsV0FBTyxHQUFHLENBQUM7R0FDWixDQUFDLENBQUM7Q0FDSjs7Ozs7Ozs7OztBQ3BCRCxJQUFNLFVBQVUsR0FBRyxDQUFDLGFBQWEsRUFBRSxVQUFVLEVBQUUsWUFBWSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE9BQU8sQ0FBQyxDQUFDOztBQUVuRyxTQUFTLFNBQVMsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFO0FBQ2hDLE1BQUksR0FBRyxHQUFHLElBQUksSUFBSSxJQUFJLENBQUMsR0FBRztNQUN0QixJQUFJLFlBQUE7TUFDSixNQUFNLFlBQUEsQ0FBQztBQUNYLE1BQUksR0FBRyxFQUFFO0FBQ1AsUUFBSSxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO0FBQ3RCLFVBQU0sR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQzs7QUFFMUIsV0FBTyxJQUFJLEtBQUssR0FBRyxJQUFJLEdBQUcsR0FBRyxHQUFHLE1BQU0sQ0FBQztHQUN4Qzs7QUFFRCxNQUFJLEdBQUcsR0FBRyxLQUFLLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDOzs7QUFHMUQsT0FBSyxJQUFJLEdBQUcsR0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLFVBQVUsQ0FBQyxNQUFNLEVBQUUsR0FBRyxFQUFFLEVBQUU7QUFDaEQsUUFBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztHQUM5Qzs7O0FBR0QsTUFBSSxLQUFLLENBQUMsaUJBQWlCLEVBQUU7QUFDM0IsU0FBSyxDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxTQUFTLENBQUMsQ0FBQztHQUMxQzs7QUFFRCxNQUFJLEdBQUcsRUFBRTtBQUNQLFFBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCLFFBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0dBQ3RCO0NBQ0Y7O0FBRUQsU0FBUyxDQUFDLFNBQVMsR0FBRyxJQUFJLEtBQUssRUFBRSxDQUFDOztxQkFFbkIsU0FBUzs7Ozs7Ozs7Ozs7Ozt5Q0NsQ2UsZ0NBQWdDOzs7OzJCQUM5QyxnQkFBZ0I7Ozs7b0NBQ1AsMEJBQTBCOzs7O3lCQUNyQyxjQUFjOzs7OzBCQUNiLGVBQWU7Ozs7NkJBQ1osa0JBQWtCOzs7OzJCQUNwQixnQkFBZ0I7Ozs7QUFFbEMsU0FBUyxzQkFBc0IsQ0FBQyxRQUFRLEVBQUU7QUFDL0MseUNBQTJCLFFBQVEsQ0FBQyxDQUFDO0FBQ3JDLDJCQUFhLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZCLG9DQUFzQixRQUFRLENBQUMsQ0FBQztBQUNoQyx5QkFBVyxRQUFRLENBQUMsQ0FBQztBQUNyQiwwQkFBWSxRQUFRLENBQUMsQ0FBQztBQUN0Qiw2QkFBZSxRQUFRLENBQUMsQ0FBQztBQUN6QiwyQkFBYSxRQUFRLENBQUMsQ0FBQztDQUN4Qjs7Ozs7Ozs7cUJDaEJxRCxVQUFVOztxQkFFakQsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxvQkFBb0IsRUFBRSxVQUFTLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDdkUsUUFBSSxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU87UUFDekIsRUFBRSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUM7O0FBRXBCLFFBQUksT0FBTyxLQUFLLElBQUksRUFBRTtBQUNwQixhQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNqQixNQUFNLElBQUksT0FBTyxLQUFLLEtBQUssSUFBSSxPQUFPLElBQUksSUFBSSxFQUFFO0FBQy9DLGFBQU8sT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ3RCLE1BQU0sSUFBSSxlQUFRLE9BQU8sQ0FBQyxFQUFFO0FBQzNCLFVBQUksT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7QUFDdEIsWUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFO0FBQ2YsaUJBQU8sQ0FBQyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDOUI7O0FBRUQsZUFBTyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7T0FDaEQsTUFBTTtBQUNMLGVBQU8sT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO09BQ3RCO0tBQ0YsTUFBTTtBQUNMLFVBQUksT0FBTyxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFO0FBQy9CLFlBQUksSUFBSSxHQUFHLG1CQUFZLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNyQyxZQUFJLENBQUMsV0FBVyxHQUFHLHlCQUFrQixPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDN0UsZUFBTyxHQUFHLEVBQUMsSUFBSSxFQUFFLElBQUksRUFBQyxDQUFDO09BQ3hCOztBQUVELGFBQU8sRUFBRSxDQUFDLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQztLQUM3QjtHQUNGLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7Ozs7O3FCQy9COEUsVUFBVTs7eUJBQ25FLGNBQWM7Ozs7cUJBRXJCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsTUFBTSxFQUFFLFVBQVMsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUN6RCxRQUFJLENBQUMsT0FBTyxFQUFFO0FBQ1osWUFBTSwyQkFBYyw2QkFBNkIsQ0FBQyxDQUFDO0tBQ3BEOztBQUVELFFBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxFQUFFO1FBQ2YsT0FBTyxHQUFHLE9BQU8sQ0FBQyxPQUFPO1FBQ3pCLENBQUMsR0FBRyxDQUFDO1FBQ0wsR0FBRyxHQUFHLEVBQUU7UUFDUixJQUFJLFlBQUE7UUFDSixXQUFXLFlBQUEsQ0FBQzs7QUFFaEIsUUFBSSxPQUFPLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxHQUFHLEVBQUU7QUFDL0IsaUJBQVcsR0FBRyx5QkFBa0IsT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztLQUNqRjs7QUFFRCxRQUFJLGtCQUFXLE9BQU8sQ0FBQyxFQUFFO0FBQUUsYUFBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7S0FBRTs7QUFFMUQsUUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFO0FBQ2hCLFVBQUksR0FBRyxtQkFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDbEM7O0FBRUQsYUFBUyxhQUFhLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUU7QUFDekMsVUFBSSxJQUFJLEVBQUU7QUFDUixZQUFJLENBQUMsR0FBRyxHQUFHLEtBQUssQ0FBQztBQUNqQixZQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUNuQixZQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssS0FBSyxDQUFDLENBQUM7QUFDekIsWUFBSSxDQUFDLElBQUksR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDOztBQUVuQixZQUFJLFdBQVcsRUFBRTtBQUNmLGNBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxHQUFHLEtBQUssQ0FBQztTQUN4QztPQUNGOztBQUVELFNBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUM3QixZQUFJLEVBQUUsSUFBSTtBQUNWLG1CQUFXLEVBQUUsbUJBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQyxXQUFXLEdBQUcsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDO09BQy9FLENBQUMsQ0FBQztLQUNKOztBQUVELFFBQUksT0FBTyxJQUFJLE9BQU8sT0FBTyxLQUFLLFFBQVEsRUFBRTtBQUMxQyxVQUFJLGVBQVEsT0FBTyxDQUFDLEVBQUU7QUFDcEIsYUFBSyxJQUFJLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDdkMsY0FBSSxDQUFDLElBQUksT0FBTyxFQUFFO0FBQ2hCLHlCQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEtBQUssT0FBTyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztXQUMvQztTQUNGO09BQ0YsTUFBTTtBQUNMLFlBQUksUUFBUSxZQUFBLENBQUM7O0FBRWIsYUFBSyxJQUFJLEdBQUcsSUFBSSxPQUFPLEVBQUU7QUFDdkIsY0FBSSxPQUFPLENBQUMsY0FBYyxDQUFDLEdBQUcsQ0FBQyxFQUFFOzs7O0FBSS9CLGdCQUFJLFFBQVEsS0FBSyxTQUFTLEVBQUU7QUFDMUIsMkJBQWEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO2FBQ2hDO0FBQ0Qsb0JBQVEsR0FBRyxHQUFHLENBQUM7QUFDZixhQUFDLEVBQUUsQ0FBQztXQUNMO1NBQ0Y7QUFDRCxZQUFJLFFBQVEsS0FBSyxTQUFTLEVBQUU7QUFDMUIsdUJBQWEsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztTQUN0QztPQUNGO0tBQ0Y7O0FBRUQsUUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQ1gsU0FBRyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUNyQjs7QUFFRCxXQUFPLEdBQUcsQ0FBQztHQUNaLENBQUMsQ0FBQztDQUNKOzs7Ozs7Ozs7Ozs7O3lCQzlFcUIsY0FBYzs7OztxQkFFckIsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxlQUFlLEVBQUUsaUNBQWdDO0FBQ3ZFLFFBQUksU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7O0FBRTFCLGFBQU8sU0FBUyxDQUFDO0tBQ2xCLE1BQU07O0FBRUwsWUFBTSwyQkFBYyxtQkFBbUIsR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUM7S0FDdkY7R0FDRixDQUFDLENBQUM7Q0FDSjs7Ozs7Ozs7OztxQkNaaUMsVUFBVTs7cUJBRTdCLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsSUFBSSxFQUFFLFVBQVMsV0FBVyxFQUFFLE9BQU8sRUFBRTtBQUMzRCxRQUFJLGtCQUFXLFdBQVcsQ0FBQyxFQUFFO0FBQUUsaUJBQVcsR0FBRyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQUU7Ozs7O0FBS3RFLFFBQUksQUFBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxJQUFJLENBQUMsV0FBVyxJQUFLLGVBQVEsV0FBVyxDQUFDLEVBQUU7QUFDdkUsYUFBTyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzlCLE1BQU07QUFDTCxhQUFPLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7S0FDekI7R0FDRixDQUFDLENBQUM7O0FBRUgsVUFBUSxDQUFDLGNBQWMsQ0FBQyxRQUFRLEVBQUUsVUFBUyxXQUFXLEVBQUUsT0FBTyxFQUFFO0FBQy9ELFdBQU8sUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxFQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSSxFQUFDLENBQUMsQ0FBQztHQUN2SCxDQUFDLENBQUM7Q0FDSjs7Ozs7Ozs7OztxQkNuQmMsVUFBUyxRQUFRLEVBQUU7QUFDaEMsVUFBUSxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsa0NBQWlDO0FBQzlELFFBQUksSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDO1FBQ2xCLE9BQU8sR0FBRyxTQUFTLENBQUMsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUM5QyxTQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDN0MsVUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztLQUN6Qjs7QUFFRCxRQUFJLEtBQUssR0FBRyxDQUFDLENBQUM7QUFDZCxRQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksRUFBRTtBQUM5QixXQUFLLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUM7S0FDNUIsTUFBTSxJQUFJLE9BQU8sQ0FBQyxJQUFJLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLElBQUksSUFBSSxFQUFFO0FBQ3JELFdBQUssR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQztLQUM1QjtBQUNELFFBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7O0FBRWhCLFlBQVEsQ0FBQyxHQUFHLE1BQUEsQ0FBWixRQUFRLEVBQVMsSUFBSSxDQUFDLENBQUM7R0FDeEIsQ0FBQyxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7cUJDbEJjLFVBQVMsUUFBUSxFQUFFO0FBQ2hDLFVBQVEsQ0FBQyxjQUFjLENBQUMsUUFBUSxFQUFFLFVBQVMsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUNyRCxXQUFPLEdBQUcsSUFBSSxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7R0FDMUIsQ0FBQyxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7cUJDSjhFLFVBQVU7O3FCQUUxRSxVQUFTLFFBQVEsRUFBRTtBQUNoQyxVQUFRLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxVQUFTLE9BQU8sRUFBRSxPQUFPLEVBQUU7QUFDekQsUUFBSSxrQkFBVyxPQUFPLENBQUMsRUFBRTtBQUFFLGFBQU8sR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQUU7O0FBRTFELFFBQUksRUFBRSxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUM7O0FBRXBCLFFBQUksQ0FBQyxlQUFRLE9BQU8sQ0FBQyxFQUFFO0FBQ3JCLFVBQUksSUFBSSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7QUFDeEIsVUFBSSxPQUFPLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxHQUFHLEVBQUU7QUFDL0IsWUFBSSxHQUFHLG1CQUFZLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNqQyxZQUFJLENBQUMsV0FBVyxHQUFHLHlCQUFrQixPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7T0FDaEY7O0FBRUQsYUFBTyxFQUFFLENBQUMsT0FBTyxFQUFFO0FBQ2pCLFlBQUksRUFBRSxJQUFJO0FBQ1YsbUJBQVcsRUFBRSxtQkFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztPQUNoRSxDQUFDLENBQUM7S0FDSixNQUFNO0FBQ0wsYUFBTyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzlCO0dBQ0YsQ0FBQyxDQUFDO0NBQ0o7Ozs7Ozs7Ozs7cUJDdkJxQixTQUFTOztBQUUvQixJQUFJLE1BQU0sR0FBRztBQUNYLFdBQVMsRUFBRSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBQztBQUM3QyxPQUFLLEVBQUUsTUFBTTs7O0FBR2IsYUFBVyxFQUFFLHFCQUFTLEtBQUssRUFBRTtBQUMzQixRQUFJLE9BQU8sS0FBSyxLQUFLLFFBQVEsRUFBRTtBQUM3QixVQUFJLFFBQVEsR0FBRyxlQUFRLE1BQU0sQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7QUFDOUQsVUFBSSxRQUFRLElBQUksQ0FBQyxFQUFFO0FBQ2pCLGFBQUssR0FBRyxRQUFRLENBQUM7T0FDbEIsTUFBTTtBQUNMLGFBQUssR0FBRyxRQUFRLENBQUMsS0FBSyxFQUFFLEVBQUUsQ0FBQyxDQUFDO09BQzdCO0tBQ0Y7O0FBRUQsV0FBTyxLQUFLLENBQUM7R0FDZDs7O0FBR0QsS0FBRyxFQUFFLGFBQVMsS0FBSyxFQUFjO0FBQy9CLFNBQUssR0FBRyxNQUFNLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDOztBQUVsQyxRQUFJLE9BQU8sT0FBTyxLQUFLLFdBQVcsSUFBSSxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxLQUFLLEVBQUU7QUFDL0UsVUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUNyQyxVQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxFQUFFOztBQUNwQixjQUFNLEdBQUcsS0FBSyxDQUFDO09BQ2hCOzt3Q0FQbUIsT0FBTztBQUFQLGVBQU87OztBQVEzQixhQUFPLENBQUMsTUFBTSxPQUFDLENBQWYsT0FBTyxFQUFZLE9BQU8sQ0FBQyxDQUFDO0tBQzdCO0dBQ0Y7Q0FDRixDQUFDOztxQkFFYSxNQUFNOzs7Ozs7Ozs7OztxQkNqQ04sVUFBUyxVQUFVLEVBQUU7O0FBRWxDLE1BQUksSUFBSSxHQUFHLE9BQU8sTUFBTSxLQUFLLFdBQVcsR0FBRyxNQUFNLEdBQUcsTUFBTTtNQUN0RCxXQUFXLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQzs7QUFFbEMsWUFBVSxDQUFDLFVBQVUsR0FBRyxZQUFXO0FBQ2pDLFFBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxVQUFVLEVBQUU7QUFDbEMsVUFBSSxDQUFDLFVBQVUsR0FBRyxXQUFXLENBQUM7S0FDL0I7QUFDRCxXQUFPLFVBQVUsQ0FBQztHQUNuQixDQUFDO0NBQ0g7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7cUJDWnNCLFNBQVM7O0lBQXBCLEtBQUs7O3lCQUNLLGFBQWE7Ozs7b0JBQzhCLFFBQVE7O0FBRWxFLFNBQVMsYUFBYSxDQUFDLFlBQVksRUFBRTtBQUMxQyxNQUFNLGdCQUFnQixHQUFHLFlBQVksSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztNQUN2RCxlQUFlLDBCQUFvQixDQUFDOztBQUUxQyxNQUFJLGdCQUFnQixLQUFLLGVBQWUsRUFBRTtBQUN4QyxRQUFJLGdCQUFnQixHQUFHLGVBQWUsRUFBRTtBQUN0QyxVQUFNLGVBQWUsR0FBRyx1QkFBaUIsZUFBZSxDQUFDO1VBQ25ELGdCQUFnQixHQUFHLHVCQUFpQixnQkFBZ0IsQ0FBQyxDQUFDO0FBQzVELFlBQU0sMkJBQWMseUZBQXlGLEdBQ3ZHLHFEQUFxRCxHQUFHLGVBQWUsR0FBRyxtREFBbUQsR0FBRyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUNoSyxNQUFNOztBQUVMLFlBQU0sMkJBQWMsd0ZBQXdGLEdBQ3RHLGlEQUFpRCxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztLQUNuRjtHQUNGO0NBQ0Y7O0FBRU0sU0FBUyxRQUFRLENBQUMsWUFBWSxFQUFFLEdBQUcsRUFBRTs7QUFFMUMsTUFBSSxDQUFDLEdBQUcsRUFBRTtBQUNSLFVBQU0sMkJBQWMsbUNBQW1DLENBQUMsQ0FBQztHQUMxRDtBQUNELE1BQUksQ0FBQyxZQUFZLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFO0FBQ3ZDLFVBQU0sMkJBQWMsMkJBQTJCLEdBQUcsT0FBTyxZQUFZLENBQUMsQ0FBQztHQUN4RTs7QUFFRCxjQUFZLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBRyxZQUFZLENBQUMsTUFBTSxDQUFDOzs7O0FBSWxELEtBQUcsQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFNUMsV0FBUyxvQkFBb0IsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRTtBQUN2RCxRQUFJLE9BQU8sQ0FBQyxJQUFJLEVBQUU7QUFDaEIsYUFBTyxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbEQsVUFBSSxPQUFPLENBQUMsR0FBRyxFQUFFO0FBQ2YsZUFBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUM7T0FDdkI7S0FDRjs7QUFFRCxXQUFPLEdBQUcsR0FBRyxDQUFDLEVBQUUsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3RFLFFBQUksTUFBTSxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLE9BQU8sRUFBRSxPQUFPLENBQUMsQ0FBQzs7QUFFeEUsUUFBSSxNQUFNLElBQUksSUFBSSxJQUFJLEdBQUcsQ0FBQyxPQUFPLEVBQUU7QUFDakMsYUFBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsWUFBWSxDQUFDLGVBQWUsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUN6RixZQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0tBQzNEO0FBQ0QsUUFBSSxNQUFNLElBQUksSUFBSSxFQUFFO0FBQ2xCLFVBQUksT0FBTyxDQUFDLE1BQU0sRUFBRTtBQUNsQixZQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQy9CLGFBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDNUMsY0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRTtBQUM1QixrQkFBTTtXQUNQOztBQUVELGVBQUssQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUN0QztBQUNELGNBQU0sR0FBRyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO09BQzNCO0FBQ0QsYUFBTyxNQUFNLENBQUM7S0FDZixNQUFNO0FBQ0wsWUFBTSwyQkFBYyxjQUFjLEdBQUcsT0FBTyxDQUFDLElBQUksR0FBRywwREFBMEQsQ0FBQyxDQUFDO0tBQ2pIO0dBQ0Y7OztBQUdELE1BQUksU0FBUyxHQUFHO0FBQ2QsVUFBTSxFQUFFLGdCQUFTLEdBQUcsRUFBRSxJQUFJLEVBQUU7QUFDMUIsVUFBSSxFQUFFLElBQUksSUFBSSxHQUFHLENBQUEsQUFBQyxFQUFFO0FBQ2xCLGNBQU0sMkJBQWMsR0FBRyxHQUFHLElBQUksR0FBRyxtQkFBbUIsR0FBRyxHQUFHLENBQUMsQ0FBQztPQUM3RDtBQUNELGFBQU8sR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQ2xCO0FBQ0QsVUFBTSxFQUFFLGdCQUFTLE1BQU0sRUFBRSxJQUFJLEVBQUU7QUFDN0IsVUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUMxQixXQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzVCLFlBQUksTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxJQUFJLEVBQUU7QUFDeEMsaUJBQU8sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO1NBQ3hCO09BQ0Y7S0FDRjtBQUNELFVBQU0sRUFBRSxnQkFBUyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ2pDLGFBQU8sT0FBTyxPQUFPLEtBQUssVUFBVSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsT0FBTyxDQUFDO0tBQ3hFOztBQUVELG9CQUFnQixFQUFFLEtBQUssQ0FBQyxnQkFBZ0I7QUFDeEMsaUJBQWEsRUFBRSxvQkFBb0I7O0FBRW5DLE1BQUUsRUFBRSxZQUFTLENBQUMsRUFBRTtBQUNkLFVBQUksR0FBRyxHQUFHLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUMxQixTQUFHLENBQUMsU0FBUyxHQUFHLFlBQVksQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUM7QUFDdkMsYUFBTyxHQUFHLENBQUM7S0FDWjs7QUFFRCxZQUFRLEVBQUUsRUFBRTtBQUNaLFdBQU8sRUFBRSxpQkFBUyxDQUFDLEVBQUUsSUFBSSxFQUFFLG1CQUFtQixFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUU7QUFDbkUsVUFBSSxjQUFjLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7VUFDakMsRUFBRSxHQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDcEIsVUFBSSxJQUFJLElBQUksTUFBTSxJQUFJLFdBQVcsSUFBSSxtQkFBbUIsRUFBRTtBQUN4RCxzQkFBYyxHQUFHLFdBQVcsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsbUJBQW1CLEVBQUUsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO09BQzNGLE1BQU0sSUFBSSxDQUFDLGNBQWMsRUFBRTtBQUMxQixzQkFBYyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7T0FDOUQ7QUFDRCxhQUFPLGNBQWMsQ0FBQztLQUN2Qjs7QUFFRCxRQUFJLEVBQUUsY0FBUyxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQzNCLGFBQU8sS0FBSyxJQUFJLEtBQUssRUFBRSxFQUFFO0FBQ3ZCLGFBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDO09BQ3ZCO0FBQ0QsYUFBTyxLQUFLLENBQUM7S0FDZDtBQUNELFNBQUssRUFBRSxlQUFTLEtBQUssRUFBRSxNQUFNLEVBQUU7QUFDN0IsVUFBSSxHQUFHLEdBQUcsS0FBSyxJQUFJLE1BQU0sQ0FBQzs7QUFFMUIsVUFBSSxLQUFLLElBQUksTUFBTSxJQUFLLEtBQUssS0FBSyxNQUFNLEFBQUMsRUFBRTtBQUN6QyxXQUFHLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFDO09BQ3ZDOztBQUVELGFBQU8sR0FBRyxDQUFDO0tBQ1o7O0FBRUQsUUFBSSxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBSTtBQUNqQixnQkFBWSxFQUFFLFlBQVksQ0FBQyxRQUFRO0dBQ3BDLENBQUM7O0FBRUYsV0FBUyxHQUFHLENBQUMsT0FBTyxFQUFnQjtRQUFkLE9BQU8seURBQUcsRUFBRTs7QUFDaEMsUUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQzs7QUFFeEIsT0FBRyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNwQixRQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sSUFBSSxZQUFZLENBQUMsT0FBTyxFQUFFO0FBQzVDLFVBQUksR0FBRyxRQUFRLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQ2hDO0FBQ0QsUUFBSSxNQUFNLFlBQUE7UUFDTixXQUFXLEdBQUcsWUFBWSxDQUFDLGNBQWMsR0FBRyxFQUFFLEdBQUcsU0FBUyxDQUFDO0FBQy9ELFFBQUksWUFBWSxDQUFDLFNBQVMsRUFBRTtBQUMxQixVQUFJLE9BQU8sQ0FBQyxNQUFNLEVBQUU7QUFDbEIsY0FBTSxHQUFHLE9BQU8sS0FBSyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDO09BQzVGLE1BQU07QUFDTCxjQUFNLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztPQUNwQjtLQUNGOztBQUVELGFBQVMsSUFBSSxDQUFDLE9BQU8sZ0JBQWU7QUFDbEMsYUFBTyxFQUFFLEdBQUcsWUFBWSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLFNBQVMsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0tBQ3JIO0FBQ0QsUUFBSSxHQUFHLGlCQUFpQixDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxPQUFPLENBQUMsTUFBTSxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsV0FBVyxDQUFDLENBQUM7QUFDdEcsV0FBTyxJQUFJLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQy9CO0FBQ0QsS0FBRyxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7O0FBRWpCLEtBQUcsQ0FBQyxNQUFNLEdBQUcsVUFBUyxPQUFPLEVBQUU7QUFDN0IsUUFBSSxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUU7QUFDcEIsZUFBUyxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDOztBQUVsRSxVQUFJLFlBQVksQ0FBQyxVQUFVLEVBQUU7QUFDM0IsaUJBQVMsQ0FBQyxRQUFRLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztPQUN0RTtBQUNELFVBQUksWUFBWSxDQUFDLFVBQVUsSUFBSSxZQUFZLENBQUMsYUFBYSxFQUFFO0FBQ3pELGlCQUFTLENBQUMsVUFBVSxHQUFHLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxHQUFHLENBQUMsVUFBVSxDQUFDLENBQUM7T0FDNUU7S0FDRixNQUFNO0FBQ0wsZUFBUyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDO0FBQ3BDLGVBQVMsQ0FBQyxRQUFRLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUN0QyxlQUFTLENBQUMsVUFBVSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUM7S0FDM0M7R0FDRixDQUFDOztBQUVGLEtBQUcsQ0FBQyxNQUFNLEdBQUcsVUFBUyxDQUFDLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUU7QUFDbEQsUUFBSSxZQUFZLENBQUMsY0FBYyxJQUFJLENBQUMsV0FBVyxFQUFFO0FBQy9DLFlBQU0sMkJBQWMsd0JBQXdCLENBQUMsQ0FBQztLQUMvQztBQUNELFFBQUksWUFBWSxDQUFDLFNBQVMsSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNyQyxZQUFNLDJCQUFjLHlCQUF5QixDQUFDLENBQUM7S0FDaEQ7O0FBRUQsV0FBTyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxXQUFXLEVBQUUsTUFBTSxDQUFDLENBQUM7R0FDakYsQ0FBQztBQUNGLFNBQU8sR0FBRyxDQUFDO0NBQ1o7O0FBRU0sU0FBUyxXQUFXLENBQUMsU0FBUyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLG1CQUFtQixFQUFFLFdBQVcsRUFBRSxNQUFNLEVBQUU7QUFDNUYsV0FBUyxJQUFJLENBQUMsT0FBTyxFQUFnQjtRQUFkLE9BQU8seURBQUcsRUFBRTs7QUFDakMsUUFBSSxhQUFhLEdBQUcsTUFBTSxDQUFDO0FBQzNCLFFBQUksTUFBTSxJQUFJLE9BQU8sS0FBSyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDbkMsbUJBQWEsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztLQUMxQzs7QUFFRCxXQUFPLEVBQUUsQ0FBQyxTQUFTLEVBQ2YsT0FBTyxFQUNQLFNBQVMsQ0FBQyxPQUFPLEVBQUUsU0FBUyxDQUFDLFFBQVEsRUFDckMsT0FBTyxDQUFDLElBQUksSUFBSSxJQUFJLEVBQ3BCLFdBQVcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQ3hELGFBQWEsQ0FBQyxDQUFDO0dBQ3BCOztBQUVELE1BQUksR0FBRyxpQkFBaUIsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDOztBQUV6RSxNQUFJLENBQUMsT0FBTyxHQUFHLENBQUMsQ0FBQztBQUNqQixNQUFJLENBQUMsS0FBSyxHQUFHLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztBQUN4QyxNQUFJLENBQUMsV0FBVyxHQUFHLG1CQUFtQixJQUFJLENBQUMsQ0FBQztBQUM1QyxTQUFPLElBQUksQ0FBQztDQUNiOztBQUVNLFNBQVMsY0FBYyxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3hELE1BQUksQ0FBQyxPQUFPLEVBQUU7QUFDWixRQUFJLE9BQU8sQ0FBQyxJQUFJLEtBQUssZ0JBQWdCLEVBQUU7QUFDckMsYUFBTyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7S0FDekMsTUFBTTtBQUNMLGFBQU8sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztLQUMxQztHQUNGLE1BQU0sSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFOztBQUV6QyxXQUFPLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQztBQUN2QixXQUFPLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztHQUNyQztBQUNELFNBQU8sT0FBTyxDQUFDO0NBQ2hCOztBQUVNLFNBQVMsYUFBYSxDQUFDLE9BQU8sRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3ZELFNBQU8sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO0FBQ3ZCLE1BQUksT0FBTyxDQUFDLEdBQUcsRUFBRTtBQUNmLFdBQU8sQ0FBQyxJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUM7R0FDdkU7O0FBRUQsTUFBSSxZQUFZLFlBQUEsQ0FBQztBQUNqQixNQUFJLE9BQU8sQ0FBQyxFQUFFLElBQUksT0FBTyxDQUFDLEVBQUUsS0FBSyxJQUFJLEVBQUU7QUFDckMsV0FBTyxDQUFDLElBQUksR0FBRyxrQkFBWSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDekMsZ0JBQVksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxFQUFFLENBQUM7O0FBRTFELFFBQUksWUFBWSxDQUFDLFFBQVEsRUFBRTtBQUN6QixhQUFPLENBQUMsUUFBUSxHQUFHLEtBQUssQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxRQUFRLEVBQUUsWUFBWSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0tBQzlFO0dBQ0Y7O0FBRUQsTUFBSSxPQUFPLEtBQUssU0FBUyxJQUFJLFlBQVksRUFBRTtBQUN6QyxXQUFPLEdBQUcsWUFBWSxDQUFDO0dBQ3hCOztBQUVELE1BQUksT0FBTyxLQUFLLFNBQVMsRUFBRTtBQUN6QixVQUFNLDJCQUFjLGNBQWMsR0FBRyxPQUFPLENBQUMsSUFBSSxHQUFHLHFCQUFxQixDQUFDLENBQUM7R0FDNUUsTUFBTSxJQUFJLE9BQU8sWUFBWSxRQUFRLEVBQUU7QUFDdEMsV0FBTyxPQUFPLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ2xDO0NBQ0Y7O0FBRU0sU0FBUyxJQUFJLEdBQUc7QUFBRSxTQUFPLEVBQUUsQ0FBQztDQUFFOztBQUVyQyxTQUFTLFFBQVEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFO0FBQy9CLE1BQUksQ0FBQyxJQUFJLElBQUksRUFBRSxNQUFNLElBQUksSUFBSSxDQUFBLEFBQUMsRUFBRTtBQUM5QixRQUFJLEdBQUcsSUFBSSxHQUFHLGtCQUFZLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztBQUNyQyxRQUFJLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQztHQUNyQjtBQUNELFNBQU8sSUFBSSxDQUFDO0NBQ2I7O0FBRUQsU0FBUyxpQkFBaUIsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRTtBQUN6RSxNQUFJLEVBQUUsQ0FBQyxTQUFTLEVBQUU7QUFDaEIsUUFBSSxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQ2YsUUFBSSxHQUFHLEVBQUUsQ0FBQyxTQUFTLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQzVGLFNBQUssQ0FBQyxNQUFNLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxDQUFDO0dBQzNCO0FBQ0QsU0FBTyxJQUFJLENBQUM7Q0FDYjs7Ozs7Ozs7QUMzUUQsU0FBUyxVQUFVLENBQUMsTUFBTSxFQUFFO0FBQzFCLE1BQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0NBQ3RCOztBQUVELFVBQVUsQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLFVBQVUsQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLFlBQVc7QUFDdkUsU0FBTyxFQUFFLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztDQUN6QixDQUFDOztxQkFFYSxVQUFVOzs7Ozs7Ozs7Ozs7Ozs7QUNUekIsSUFBTSxNQUFNLEdBQUc7QUFDYixLQUFHLEVBQUUsT0FBTztBQUNaLEtBQUcsRUFBRSxNQUFNO0FBQ1gsS0FBRyxFQUFFLE1BQU07QUFDWCxLQUFHLEVBQUUsUUFBUTtBQUNiLEtBQUcsRUFBRSxRQUFRO0FBQ2IsS0FBRyxFQUFFLFFBQVE7QUFDYixLQUFHLEVBQUUsUUFBUTtDQUNkLENBQUM7O0FBRUYsSUFBTSxRQUFRLEdBQUcsWUFBWTtJQUN2QixRQUFRLEdBQUcsV0FBVyxDQUFDOztBQUU3QixTQUFTLFVBQVUsQ0FBQyxHQUFHLEVBQUU7QUFDdkIsU0FBTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDcEI7O0FBRU0sU0FBUyxNQUFNLENBQUMsR0FBRyxvQkFBbUI7QUFDM0MsT0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDekMsU0FBSyxJQUFJLEdBQUcsSUFBSSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUU7QUFDNUIsVUFBSSxNQUFNLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxFQUFFO0FBQzNELFdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7T0FDOUI7S0FDRjtHQUNGOztBQUVELFNBQU8sR0FBRyxDQUFDO0NBQ1o7O0FBRU0sSUFBSSxRQUFRLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7Ozs7OztBQUtoRCxJQUFJLFVBQVUsR0FBRyxvQkFBUyxLQUFLLEVBQUU7QUFDL0IsU0FBTyxPQUFPLEtBQUssS0FBSyxVQUFVLENBQUM7Q0FDcEMsQ0FBQzs7O0FBR0YsSUFBSSxVQUFVLENBQUMsR0FBRyxDQUFDLEVBQUU7QUFDbkIsVUFJTSxVQUFVLEdBSmhCLFVBQVUsR0FBRyxVQUFTLEtBQUssRUFBRTtBQUMzQixXQUFPLE9BQU8sS0FBSyxLQUFLLFVBQVUsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLG1CQUFtQixDQUFDO0dBQ3BGLENBQUM7Q0FDSDtRQUNPLFVBQVUsR0FBVixVQUFVOzs7OztBQUlYLElBQU0sT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLElBQUksVUFBUyxLQUFLLEVBQUU7QUFDdEQsU0FBTyxBQUFDLEtBQUssSUFBSSxPQUFPLEtBQUssS0FBSyxRQUFRLEdBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxnQkFBZ0IsR0FBRyxLQUFLLENBQUM7Q0FDakcsQ0FBQzs7Ozs7QUFHSyxTQUFTLE9BQU8sQ0FBQyxLQUFLLEVBQUUsS0FBSyxFQUFFO0FBQ3BDLE9BQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsR0FBRyxLQUFLLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUU7QUFDaEQsUUFBSSxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssS0FBSyxFQUFFO0FBQ3RCLGFBQU8sQ0FBQyxDQUFDO0tBQ1Y7R0FDRjtBQUNELFNBQU8sQ0FBQyxDQUFDLENBQUM7Q0FDWDs7QUFHTSxTQUFTLGdCQUFnQixDQUFDLE1BQU0sRUFBRTtBQUN2QyxNQUFJLE9BQU8sTUFBTSxLQUFLLFFBQVEsRUFBRTs7QUFFOUIsUUFBSSxNQUFNLElBQUksTUFBTSxDQUFDLE1BQU0sRUFBRTtBQUMzQixhQUFPLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztLQUN4QixNQUFNLElBQUksTUFBTSxJQUFJLElBQUksRUFBRTtBQUN6QixhQUFPLEVBQUUsQ0FBQztLQUNYLE1BQU0sSUFBSSxDQUFDLE1BQU0sRUFBRTtBQUNsQixhQUFPLE1BQU0sR0FBRyxFQUFFLENBQUM7S0FDcEI7Ozs7O0FBS0QsVUFBTSxHQUFHLEVBQUUsR0FBRyxNQUFNLENBQUM7R0FDdEI7O0FBRUQsTUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLEVBQUU7QUFBRSxXQUFPLE1BQU0sQ0FBQztHQUFFO0FBQzlDLFNBQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsVUFBVSxDQUFDLENBQUM7Q0FDN0M7O0FBRU0sU0FBUyxPQUFPLENBQUMsS0FBSyxFQUFFO0FBQzdCLE1BQUksQ0FBQyxLQUFLLElBQUksS0FBSyxLQUFLLENBQUMsRUFBRTtBQUN6QixXQUFPLElBQUksQ0FBQztHQUNiLE1BQU0sSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7QUFDL0MsV0FBTyxJQUFJLENBQUM7R0FDYixNQUFNO0FBQ0wsV0FBTyxLQUFLLENBQUM7R0FDZDtDQUNGOztBQUVNLFNBQVMsV0FBVyxDQUFDLE1BQU0sRUFBRTtBQUNsQyxNQUFJLEtBQUssR0FBRyxNQUFNLENBQUMsRUFBRSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQy9CLE9BQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO0FBQ3ZCLFNBQU8sS0FBSyxDQUFDO0NBQ2Q7O0FBRU0sU0FBUyxXQUFXLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRTtBQUN2QyxRQUFNLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQztBQUNsQixTQUFPLE1BQU0sQ0FBQztDQUNmOztBQUVNLFNBQVMsaUJBQWlCLENBQUMsV0FBVyxFQUFFLEVBQUUsRUFBRTtBQUNqRCxTQUFPLENBQUMsV0FBVyxHQUFHLFdBQVcsR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFBLEdBQUksRUFBRSxDQUFDO0NBQ3BEOzs7O0FDM0dEO0FBQ0E7QUFDQTtBQUNBOztBQ0hBO0FBQ0E7O0FDREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQzEvUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDeHdFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0dUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNwaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBOztBQ0ZBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7O0FDSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1RBO0FBQ0E7QUFDQTs7QUNGQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9FQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ROQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNaQTtBQUNBO0FBQ0E7O0FDRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwWkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6SEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaFNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9IQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6TkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4SUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUNoNEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUNyQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDekhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUN0RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxakJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNySkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbE1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdkVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxb0JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcFdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcEpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNVZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDak9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0VBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN0QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNwR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1JBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2ZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJtb2R1bGUuZXhwb3J0cyA9IHtcclxuICBjcm9zc0RvbWFpbjogdHJ1ZSxcclxuICB0YXJnZXQ6ICcjYXBwLXdyYXBwZXInLFxyXG4gIHN2Z1Nwcml0ZVBhdGg6ICdjc3Mvc3ZnLycsXHJcbiAgc3ZnU3ByaXRlczogWydmYS1pY29ucy5zdmcnLCAnbWF0ZXJpYWwtaWNvbnMuc3ZnJywgJ21pc2NlbGxhbmVvdXMuc3ZnJywgJ29yaWdvLWljb25zLnN2ZycsICdjdXN0b20uc3ZnJ10sXHJcbiAgYnJlYWtQb2ludHM6IHtcclxuICAgIHhzOiBbMjQwLCAzMjBdLFxyXG4gICAgczogWzMyMCwgMzIwXSxcclxuICAgIG06IFs1MDAsIDUwMF0sXHJcbiAgICBsOiBbNzY4LCA1MDBdXHJcbiAgfSxcclxuICBicmVha1BvaW50c1ByZWZpeDogJ28tbWVkaWEnLFxyXG4gIGRlZmF1bHRDb250cm9sczogW1xyXG4gICAge1xyXG4gICAgICBcIm5hbWVcIjogXCJzY2FsZWxpbmVcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJuYW1lXCI6IFwiem9vbVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICBcIm5hbWVcIjogXCJyb3RhdGVcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgXCJuYW1lXCI6IFwiYXR0cmlidXRpb25cIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgIFwibmFtZVwiOiBcImZ1bGxzY3JlZW5cIlxyXG4gICAgfVxyXG4gIF1cclxufVxyXG4iLCJ2YXIgY29udHJvbHMgPSB7fTtcclxuY29udHJvbHMuZ2VvcG9zaXRpb24gPSByZXF1aXJlKCcuLi9zcmMvZ2VvcG9zaXRpb24nKTtcclxuY29udHJvbHMubWFwbWVudSA9IHJlcXVpcmUoJy4uL3NyYy9tYXBtZW51Jyk7XHJcbmNvbnRyb2xzLnByaW50ID0gcmVxdWlyZSgnLi4vc3JjL3ByaW50Jyk7XHJcbmNvbnRyb2xzLnNoYXJlbWFwID0gcmVxdWlyZSgnLi4vc3JjL3NoYXJlbWFwJyk7XHJcbmNvbnRyb2xzLmxlZ2VuZCA9IHJlcXVpcmUoJy4uL3NyYy9sZWdlbmQnKTtcclxuY29udHJvbHMuc2VhcmNoID0gcmVxdWlyZSgnLi4vc3JjL3NlYXJjaCcpO1xyXG5jb250cm9scy5lZGl0b3IgPSByZXF1aXJlKCcuLi9zcmMvZWRpdG9yJyk7XHJcbmNvbnRyb2xzLmhvbWUgPSByZXF1aXJlKCcuLi9zcmMvaG9tZScpO1xyXG5jb250cm9scy5tZWFzdXJlID0gcmVxdWlyZSgnLi4vc3JjL21lYXN1cmUnKTtcclxuY29udHJvbHMuYWJvdXQgPSByZXF1aXJlKCcuLi9zcmMvYWJvdXQnKTtcclxuY29udHJvbHMuc2NhbGUgPSByZXF1aXJlKCcuLi9zcmMvc2NhbGUnKTtcclxuY29udHJvbHMub2ZmbGluZSA9IHJlcXVpcmUoJy4uL3NyYy9vZmZsaW5lJyk7XHJcbmNvbnRyb2xzLmxpbmsgPSByZXF1aXJlKCcuLi9zcmMvbGluaycpO1xyXG5jb250cm9scy5zY2FsZWxpbmUgPSByZXF1aXJlKCcuLi9zcmMvc2NhbGVsaW5lJyk7XHJcbmNvbnRyb2xzLnpvb20gPSByZXF1aXJlKCcuLi9zcmMvem9vbScpO1xyXG5jb250cm9scy5yb3RhdGUgPSByZXF1aXJlKCcuLi9zcmMvcm90YXRlJyk7XHJcbmNvbnRyb2xzLmF0dHJpYnV0aW9uID0gcmVxdWlyZSgnLi4vc3JjL2F0dHJpYnV0aW9uJyk7XHJcbmNvbnRyb2xzLnBvc2l0aW9uID0gcmVxdWlyZSgnLi4vc3JjL3Bvc2l0aW9uJyk7XHJcbmNvbnRyb2xzLmZ1bGxzY3JlZW4gPSByZXF1aXJlKCcuLi9zcmMvZnVsbHNjcmVlbicpO1xyXG5jb250cm9scy5zcGxhc2ggPSByZXF1aXJlKCcuLi9zcmMvc3BsYXNoJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRyb2xzO1xyXG4iLCJcImZ1bmN0aW9uXCIhPT10eXBlb2YgT2JqZWN0LmNyZWF0ZSYmKE9iamVjdC5jcmVhdGU9ZnVuY3Rpb24oZil7ZnVuY3Rpb24gZygpe31nLnByb3RvdHlwZT1mO3JldHVybiBuZXcgZ30pO1xyXG4oZnVuY3Rpb24oZixnLGspe3ZhciBsPXtpbml0OmZ1bmN0aW9uKGEsYil7dGhpcy4kZWxlbT1mKGIpO3RoaXMub3B0aW9ucz1mLmV4dGVuZCh7fSxmLmZuLm93bENhcm91c2VsLm9wdGlvbnMsdGhpcy4kZWxlbS5kYXRhKCksYSk7dGhpcy51c2VyT3B0aW9ucz1hO3RoaXMubG9hZENvbnRlbnQoKX0sbG9hZENvbnRlbnQ6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe3ZhciBkLGU9XCJcIjtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYi5vcHRpb25zLmpzb25TdWNjZXNzKWIub3B0aW9ucy5qc29uU3VjY2Vzcy5hcHBseSh0aGlzLFthXSk7ZWxzZXtmb3IoZCBpbiBhLm93bClhLm93bC5oYXNPd25Qcm9wZXJ0eShkKSYmKGUrPWEub3dsW2RdLml0ZW0pO2IuJGVsZW0uaHRtbChlKX1iLmxvZ0luKCl9dmFyIGI9dGhpcyxlO1wiZnVuY3Rpb25cIj09PXR5cGVvZiBiLm9wdGlvbnMuYmVmb3JlSW5pdCYmYi5vcHRpb25zLmJlZm9yZUluaXQuYXBwbHkodGhpcyxbYi4kZWxlbV0pO1wic3RyaW5nXCI9PT10eXBlb2YgYi5vcHRpb25zLmpzb25QYXRoP1xyXG4oZT1iLm9wdGlvbnMuanNvblBhdGgsZi5nZXRKU09OKGUsYSkpOmIubG9nSW4oKX0sbG9nSW46ZnVuY3Rpb24oKXt0aGlzLiRlbGVtLmRhdGEoXCJvd2wtb3JpZ2luYWxTdHlsZXNcIix0aGlzLiRlbGVtLmF0dHIoXCJzdHlsZVwiKSk7dGhpcy4kZWxlbS5kYXRhKFwib3dsLW9yaWdpbmFsQ2xhc3Nlc1wiLHRoaXMuJGVsZW0uYXR0cihcImNsYXNzXCIpKTt0aGlzLiRlbGVtLmNzcyh7b3BhY2l0eTowfSk7dGhpcy5vcmlnbmFsSXRlbXM9dGhpcy5vcHRpb25zLml0ZW1zO3RoaXMuY2hlY2tCcm93c2VyKCk7dGhpcy53cmFwcGVyV2lkdGg9MDt0aGlzLmNoZWNrVmlzaWJsZT1udWxsO3RoaXMuc2V0VmFycygpfSxzZXRWYXJzOmZ1bmN0aW9uKCl7aWYoMD09PXRoaXMuJGVsZW0uY2hpbGRyZW4oKS5sZW5ndGgpcmV0dXJuITE7dGhpcy5iYXNlQ2xhc3MoKTt0aGlzLmV2ZW50VHlwZXMoKTt0aGlzLiR1c2VySXRlbXM9dGhpcy4kZWxlbS5jaGlsZHJlbigpO3RoaXMuaXRlbXNBbW91bnQ9dGhpcy4kdXNlckl0ZW1zLmxlbmd0aDtcclxudGhpcy53cmFwSXRlbXMoKTt0aGlzLiRvd2xJdGVtcz10aGlzLiRlbGVtLmZpbmQoXCIub3dsLWl0ZW1cIik7dGhpcy4kb3dsV3JhcHBlcj10aGlzLiRlbGVtLmZpbmQoXCIub3dsLXdyYXBwZXJcIik7dGhpcy5wbGF5RGlyZWN0aW9uPVwibmV4dFwiO3RoaXMucHJldkl0ZW09MDt0aGlzLnByZXZBcnI9WzBdO3RoaXMuY3VycmVudEl0ZW09MDt0aGlzLmN1c3RvbUV2ZW50cygpO3RoaXMub25TdGFydHVwKCl9LG9uU3RhcnR1cDpmdW5jdGlvbigpe3RoaXMudXBkYXRlSXRlbXMoKTt0aGlzLmNhbGN1bGF0ZUFsbCgpO3RoaXMuYnVpbGRDb250cm9scygpO3RoaXMudXBkYXRlQ29udHJvbHMoKTt0aGlzLnJlc3BvbnNlKCk7dGhpcy5tb3ZlRXZlbnRzKCk7dGhpcy5zdG9wT25Ib3ZlcigpO3RoaXMub3dsU3RhdHVzKCk7ITEhPT10aGlzLm9wdGlvbnMudHJhbnNpdGlvblN0eWxlJiZ0aGlzLnRyYW5zaXRpb25UeXBlcyh0aGlzLm9wdGlvbnMudHJhbnNpdGlvblN0eWxlKTshMD09PXRoaXMub3B0aW9ucy5hdXRvUGxheSYmXHJcbih0aGlzLm9wdGlvbnMuYXV0b1BsYXk9NUUzKTt0aGlzLnBsYXkoKTt0aGlzLiRlbGVtLmZpbmQoXCIub3dsLXdyYXBwZXJcIikuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIik7dGhpcy4kZWxlbS5pcyhcIjp2aXNpYmxlXCIpP3RoaXMuJGVsZW0uY3NzKFwib3BhY2l0eVwiLDEpOnRoaXMud2F0Y2hWaXNpYmlsaXR5KCk7dGhpcy5vbnN0YXJ0dXA9ITE7dGhpcy5lYWNoTW92ZVVwZGF0ZSgpO1wiZnVuY3Rpb25cIj09PXR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXJJbml0JiZ0aGlzLm9wdGlvbnMuYWZ0ZXJJbml0LmFwcGx5KHRoaXMsW3RoaXMuJGVsZW1dKX0sZWFjaE1vdmVVcGRhdGU6ZnVuY3Rpb24oKXshMD09PXRoaXMub3B0aW9ucy5sYXp5TG9hZCYmdGhpcy5sYXp5TG9hZCgpOyEwPT09dGhpcy5vcHRpb25zLmF1dG9IZWlnaHQmJnRoaXMuYXV0b0hlaWdodCgpO3RoaXMub25WaXNpYmxlSXRlbXMoKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgdGhpcy5vcHRpb25zLmFmdGVyQWN0aW9uJiZ0aGlzLm9wdGlvbnMuYWZ0ZXJBY3Rpb24uYXBwbHkodGhpcyxcclxuW3RoaXMuJGVsZW1dKX0sdXBkYXRlVmFyczpmdW5jdGlvbigpe1wiZnVuY3Rpb25cIj09PXR5cGVvZiB0aGlzLm9wdGlvbnMuYmVmb3JlVXBkYXRlJiZ0aGlzLm9wdGlvbnMuYmVmb3JlVXBkYXRlLmFwcGx5KHRoaXMsW3RoaXMuJGVsZW1dKTt0aGlzLndhdGNoVmlzaWJpbGl0eSgpO3RoaXMudXBkYXRlSXRlbXMoKTt0aGlzLmNhbGN1bGF0ZUFsbCgpO3RoaXMudXBkYXRlUG9zaXRpb24oKTt0aGlzLnVwZGF0ZUNvbnRyb2xzKCk7dGhpcy5lYWNoTW92ZVVwZGF0ZSgpO1wiZnVuY3Rpb25cIj09PXR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXJVcGRhdGUmJnRoaXMub3B0aW9ucy5hZnRlclVwZGF0ZS5hcHBseSh0aGlzLFt0aGlzLiRlbGVtXSl9LHJlbG9hZDpmdW5jdGlvbigpe3ZhciBhPXRoaXM7Zy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS51cGRhdGVWYXJzKCl9LDApfSx3YXRjaFZpc2liaWxpdHk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2lmKCExPT09YS4kZWxlbS5pcyhcIjp2aXNpYmxlXCIpKWEuJGVsZW0uY3NzKHtvcGFjaXR5OjB9KSxcclxuZy5jbGVhckludGVydmFsKGEuYXV0b1BsYXlJbnRlcnZhbCksZy5jbGVhckludGVydmFsKGEuY2hlY2tWaXNpYmxlKTtlbHNlIHJldHVybiExO2EuY2hlY2tWaXNpYmxlPWcuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXthLiRlbGVtLmlzKFwiOnZpc2libGVcIikmJihhLnJlbG9hZCgpLGEuJGVsZW0uYW5pbWF0ZSh7b3BhY2l0eToxfSwyMDApLGcuY2xlYXJJbnRlcnZhbChhLmNoZWNrVmlzaWJsZSkpfSw1MDApfSx3cmFwSXRlbXM6ZnVuY3Rpb24oKXt0aGlzLiR1c2VySXRlbXMud3JhcEFsbCgnPGRpdiBjbGFzcz1cIm93bC13cmFwcGVyXCI+Jykud3JhcCgnPGRpdiBjbGFzcz1cIm93bC1pdGVtXCI+PC9kaXY+Jyk7dGhpcy4kZWxlbS5maW5kKFwiLm93bC13cmFwcGVyXCIpLndyYXAoJzxkaXYgY2xhc3M9XCJvd2wtd3JhcHBlci1vdXRlclwiPicpO3RoaXMud3JhcHBlck91dGVyPXRoaXMuJGVsZW0uZmluZChcIi5vd2wtd3JhcHBlci1vdXRlclwiKTt0aGlzLiRlbGVtLmNzcyhcImRpc3BsYXlcIixcImJsb2NrXCIpfSxcclxuYmFzZUNsYXNzOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy4kZWxlbS5oYXNDbGFzcyh0aGlzLm9wdGlvbnMuYmFzZUNsYXNzKSxiPXRoaXMuJGVsZW0uaGFzQ2xhc3ModGhpcy5vcHRpb25zLnRoZW1lKTthfHx0aGlzLiRlbGVtLmFkZENsYXNzKHRoaXMub3B0aW9ucy5iYXNlQ2xhc3MpO2J8fHRoaXMuJGVsZW0uYWRkQ2xhc3ModGhpcy5vcHRpb25zLnRoZW1lKX0sdXBkYXRlSXRlbXM6ZnVuY3Rpb24oKXt2YXIgYSxiO2lmKCExPT09dGhpcy5vcHRpb25zLnJlc3BvbnNpdmUpcmV0dXJuITE7aWYoITA9PT10aGlzLm9wdGlvbnMuc2luZ2xlSXRlbSlyZXR1cm4gdGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3JpZ25hbEl0ZW1zPTEsdGhpcy5vcHRpb25zLml0ZW1zQ3VzdG9tPSExLHRoaXMub3B0aW9ucy5pdGVtc0Rlc2t0b3A9ITEsdGhpcy5vcHRpb25zLml0ZW1zRGVza3RvcFNtYWxsPSExLHRoaXMub3B0aW9ucy5pdGVtc1RhYmxldD0hMSx0aGlzLm9wdGlvbnMuaXRlbXNUYWJsZXRTbWFsbD1cclxuITEsdGhpcy5vcHRpb25zLml0ZW1zTW9iaWxlPSExO2E9Zih0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZUJhc2VXaWR0aCkud2lkdGgoKTthPih0aGlzLm9wdGlvbnMuaXRlbXNEZXNrdG9wWzBdfHx0aGlzLm9yaWduYWxJdGVtcykmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5vcmlnbmFsSXRlbXMpO2lmKCExIT09dGhpcy5vcHRpb25zLml0ZW1zQ3VzdG9tKWZvcih0aGlzLm9wdGlvbnMuaXRlbXNDdXN0b20uc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBhWzBdLWJbMF19KSxiPTA7Yjx0aGlzLm9wdGlvbnMuaXRlbXNDdXN0b20ubGVuZ3RoO2IrPTEpdGhpcy5vcHRpb25zLml0ZW1zQ3VzdG9tW2JdWzBdPD1hJiYodGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3B0aW9ucy5pdGVtc0N1c3RvbVtiXVsxXSk7ZWxzZSBhPD10aGlzLm9wdGlvbnMuaXRlbXNEZXNrdG9wWzBdJiYhMSE9PXRoaXMub3B0aW9ucy5pdGVtc0Rlc2t0b3AmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5vcHRpb25zLml0ZW1zRGVza3RvcFsxXSksXHJcbmE8PXRoaXMub3B0aW9ucy5pdGVtc0Rlc2t0b3BTbWFsbFswXSYmITEhPT10aGlzLm9wdGlvbnMuaXRlbXNEZXNrdG9wU21hbGwmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5vcHRpb25zLml0ZW1zRGVza3RvcFNtYWxsWzFdKSxhPD10aGlzLm9wdGlvbnMuaXRlbXNUYWJsZXRbMF0mJiExIT09dGhpcy5vcHRpb25zLml0ZW1zVGFibGV0JiYodGhpcy5vcHRpb25zLml0ZW1zPXRoaXMub3B0aW9ucy5pdGVtc1RhYmxldFsxXSksYTw9dGhpcy5vcHRpb25zLml0ZW1zVGFibGV0U21hbGxbMF0mJiExIT09dGhpcy5vcHRpb25zLml0ZW1zVGFibGV0U21hbGwmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5vcHRpb25zLml0ZW1zVGFibGV0U21hbGxbMV0pLGE8PXRoaXMub3B0aW9ucy5pdGVtc01vYmlsZVswXSYmITEhPT10aGlzLm9wdGlvbnMuaXRlbXNNb2JpbGUmJih0aGlzLm9wdGlvbnMuaXRlbXM9dGhpcy5vcHRpb25zLml0ZW1zTW9iaWxlWzFdKTt0aGlzLm9wdGlvbnMuaXRlbXM+dGhpcy5pdGVtc0Ftb3VudCYmXHJcbiEwPT09dGhpcy5vcHRpb25zLml0ZW1zU2NhbGVVcCYmKHRoaXMub3B0aW9ucy5pdGVtcz10aGlzLml0ZW1zQW1vdW50KX0scmVzcG9uc2U6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGIsZTtpZighMCE9PWEub3B0aW9ucy5yZXNwb25zaXZlKXJldHVybiExO2U9ZihnKS53aWR0aCgpO2EucmVzaXplcj1mdW5jdGlvbigpe2YoZykud2lkdGgoKSE9PWUmJighMSE9PWEub3B0aW9ucy5hdXRvUGxheSYmZy5jbGVhckludGVydmFsKGEuYXV0b1BsYXlJbnRlcnZhbCksZy5jbGVhclRpbWVvdXQoYiksYj1nLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlPWYoZykud2lkdGgoKTthLnVwZGF0ZVZhcnMoKX0sYS5vcHRpb25zLnJlc3BvbnNpdmVSZWZyZXNoUmF0ZSkpfTtmKGcpLnJlc2l6ZShhLnJlc2l6ZXIpfSx1cGRhdGVQb3NpdGlvbjpmdW5jdGlvbigpe3RoaXMuanVtcFRvKHRoaXMuY3VycmVudEl0ZW0pOyExIT09dGhpcy5vcHRpb25zLmF1dG9QbGF5JiZ0aGlzLmNoZWNrQXAoKX0sYXBwZW5kSXRlbXNTaXplczpmdW5jdGlvbigpe3ZhciBhPVxyXG50aGlzLGI9MCxlPWEuaXRlbXNBbW91bnQtYS5vcHRpb25zLml0ZW1zO2EuJG93bEl0ZW1zLmVhY2goZnVuY3Rpb24oYyl7dmFyIGQ9Zih0aGlzKTtkLmNzcyh7d2lkdGg6YS5pdGVtV2lkdGh9KS5kYXRhKFwib3dsLWl0ZW1cIixOdW1iZXIoYykpO2lmKDA9PT1jJWEub3B0aW9ucy5pdGVtc3x8Yz09PWUpYz5lfHwoYis9MSk7ZC5kYXRhKFwib3dsLXJvdW5kUGFnZXNcIixiKX0pfSxhcHBlbmRXcmFwcGVyU2l6ZXM6ZnVuY3Rpb24oKXt0aGlzLiRvd2xXcmFwcGVyLmNzcyh7d2lkdGg6dGhpcy4kb3dsSXRlbXMubGVuZ3RoKnRoaXMuaXRlbVdpZHRoKjIsbGVmdDowfSk7dGhpcy5hcHBlbmRJdGVtc1NpemVzKCl9LGNhbGN1bGF0ZUFsbDpmdW5jdGlvbigpe3RoaXMuY2FsY3VsYXRlV2lkdGgoKTt0aGlzLmFwcGVuZFdyYXBwZXJTaXplcygpO3RoaXMubG9vcHMoKTt0aGlzLm1heCgpfSxjYWxjdWxhdGVXaWR0aDpmdW5jdGlvbigpe3RoaXMuaXRlbVdpZHRoPU1hdGgucm91bmQodGhpcy4kZWxlbS53aWR0aCgpL1xyXG50aGlzLm9wdGlvbnMuaXRlbXMpfSxtYXg6ZnVuY3Rpb24oKXt2YXIgYT0tMSoodGhpcy5pdGVtc0Ftb3VudCp0aGlzLml0ZW1XaWR0aC10aGlzLm9wdGlvbnMuaXRlbXMqdGhpcy5pdGVtV2lkdGgpO3RoaXMub3B0aW9ucy5pdGVtcz50aGlzLml0ZW1zQW1vdW50P3RoaXMubWF4aW11bVBpeGVscz1hPXRoaXMubWF4aW11bUl0ZW09MDoodGhpcy5tYXhpbXVtSXRlbT10aGlzLml0ZW1zQW1vdW50LXRoaXMub3B0aW9ucy5pdGVtcyx0aGlzLm1heGltdW1QaXhlbHM9YSk7cmV0dXJuIGF9LG1pbjpmdW5jdGlvbigpe3JldHVybiAwfSxsb29wczpmdW5jdGlvbigpe3ZhciBhPTAsYj0wLGUsYzt0aGlzLnBvc2l0aW9uc0luQXJyYXk9WzBdO3RoaXMucGFnZXNJbkFycmF5PVtdO2ZvcihlPTA7ZTx0aGlzLml0ZW1zQW1vdW50O2UrPTEpYis9dGhpcy5pdGVtV2lkdGgsdGhpcy5wb3NpdGlvbnNJbkFycmF5LnB1c2goLWIpLCEwPT09dGhpcy5vcHRpb25zLnNjcm9sbFBlclBhZ2UmJihjPWYodGhpcy4kb3dsSXRlbXNbZV0pLFxyXG5jPWMuZGF0YShcIm93bC1yb3VuZFBhZ2VzXCIpLGMhPT1hJiYodGhpcy5wYWdlc0luQXJyYXlbYV09dGhpcy5wb3NpdGlvbnNJbkFycmF5W2VdLGE9YykpfSxidWlsZENvbnRyb2xzOmZ1bmN0aW9uKCl7aWYoITA9PT10aGlzLm9wdGlvbnMubmF2aWdhdGlvbnx8ITA9PT10aGlzLm9wdGlvbnMucGFnaW5hdGlvbil0aGlzLm93bENvbnRyb2xzPWYoJzxkaXYgY2xhc3M9XCJvd2wtY29udHJvbHNcIi8+JykudG9nZ2xlQ2xhc3MoXCJjbGlja2FibGVcIiwhdGhpcy5icm93c2VyLmlzVG91Y2gpLmFwcGVuZFRvKHRoaXMuJGVsZW0pOyEwPT09dGhpcy5vcHRpb25zLnBhZ2luYXRpb24mJnRoaXMuYnVpbGRQYWdpbmF0aW9uKCk7ITA9PT10aGlzLm9wdGlvbnMubmF2aWdhdGlvbiYmdGhpcy5idWlsZEJ1dHRvbnMoKX0sYnVpbGRCdXR0b25zOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWYoJzxkaXYgY2xhc3M9XCJvd2wtYnV0dG9uc1wiLz4nKTthLm93bENvbnRyb2xzLmFwcGVuZChiKTthLmJ1dHRvblByZXY9XHJcbmYoXCI8ZGl2Lz5cIix7XCJjbGFzc1wiOlwib3dsLXByZXZcIixodG1sOmEub3B0aW9ucy5uYXZpZ2F0aW9uVGV4dFswXXx8XCJcIn0pO2EuYnV0dG9uTmV4dD1mKFwiPGRpdi8+XCIse1wiY2xhc3NcIjpcIm93bC1uZXh0XCIsaHRtbDphLm9wdGlvbnMubmF2aWdhdGlvblRleHRbMV18fFwiXCJ9KTtiLmFwcGVuZChhLmJ1dHRvblByZXYpLmFwcGVuZChhLmJ1dHRvbk5leHQpO2Iub24oXCJ0b3VjaHN0YXJ0Lm93bENvbnRyb2xzIG1vdXNlZG93bi5vd2xDb250cm9sc1wiLCdkaXZbY2xhc3NePVwib3dsXCJdJyxmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCl9KTtiLm9uKFwidG91Y2hlbmQub3dsQ29udHJvbHMgbW91c2V1cC5vd2xDb250cm9sc1wiLCdkaXZbY2xhc3NePVwib3dsXCJdJyxmdW5jdGlvbihiKXtiLnByZXZlbnREZWZhdWx0KCk7Zih0aGlzKS5oYXNDbGFzcyhcIm93bC1uZXh0XCIpP2EubmV4dCgpOmEucHJldigpfSl9LGJ1aWxkUGFnaW5hdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS5wYWdpbmF0aW9uV3JhcHBlcj1cclxuZignPGRpdiBjbGFzcz1cIm93bC1wYWdpbmF0aW9uXCIvPicpO2Eub3dsQ29udHJvbHMuYXBwZW5kKGEucGFnaW5hdGlvbldyYXBwZXIpO2EucGFnaW5hdGlvbldyYXBwZXIub24oXCJ0b3VjaGVuZC5vd2xDb250cm9scyBtb3VzZXVwLm93bENvbnRyb2xzXCIsXCIub3dsLXBhZ2VcIixmdW5jdGlvbihiKXtiLnByZXZlbnREZWZhdWx0KCk7TnVtYmVyKGYodGhpcykuZGF0YShcIm93bC1wYWdlXCIpKSE9PWEuY3VycmVudEl0ZW0mJmEuZ29UbyhOdW1iZXIoZih0aGlzKS5kYXRhKFwib3dsLXBhZ2VcIikpLCEwKX0pfSx1cGRhdGVQYWdpbmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGEsYixlLGMsZCxnO2lmKCExPT09dGhpcy5vcHRpb25zLnBhZ2luYXRpb24pcmV0dXJuITE7dGhpcy5wYWdpbmF0aW9uV3JhcHBlci5odG1sKFwiXCIpO2E9MDtiPXRoaXMuaXRlbXNBbW91bnQtdGhpcy5pdGVtc0Ftb3VudCV0aGlzLm9wdGlvbnMuaXRlbXM7Zm9yKGM9MDtjPHRoaXMuaXRlbXNBbW91bnQ7Yys9MSkwPT09YyV0aGlzLm9wdGlvbnMuaXRlbXMmJlxyXG4oYSs9MSxiPT09YyYmKGU9dGhpcy5pdGVtc0Ftb3VudC10aGlzLm9wdGlvbnMuaXRlbXMpLGQ9ZihcIjxkaXYvPlwiLHtcImNsYXNzXCI6XCJvd2wtcGFnZVwifSksZz1mKFwiPHNwYW4+PC9zcGFuPlwiLHt0ZXh0OiEwPT09dGhpcy5vcHRpb25zLnBhZ2luYXRpb25OdW1iZXJzP2E6XCJcIixcImNsYXNzXCI6ITA9PT10aGlzLm9wdGlvbnMucGFnaW5hdGlvbk51bWJlcnM/XCJvd2wtbnVtYmVyc1wiOlwiXCJ9KSxkLmFwcGVuZChnKSxkLmRhdGEoXCJvd2wtcGFnZVwiLGI9PT1jP2U6YyksZC5kYXRhKFwib3dsLXJvdW5kUGFnZXNcIixhKSx0aGlzLnBhZ2luYXRpb25XcmFwcGVyLmFwcGVuZChkKSk7dGhpcy5jaGVja1BhZ2luYXRpb24oKX0sY2hlY2tQYWdpbmF0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcztpZighMT09PWEub3B0aW9ucy5wYWdpbmF0aW9uKXJldHVybiExO2EucGFnaW5hdGlvbldyYXBwZXIuZmluZChcIi5vd2wtcGFnZVwiKS5lYWNoKGZ1bmN0aW9uKCl7Zih0aGlzKS5kYXRhKFwib3dsLXJvdW5kUGFnZXNcIik9PT1cclxuZihhLiRvd2xJdGVtc1thLmN1cnJlbnRJdGVtXSkuZGF0YShcIm93bC1yb3VuZFBhZ2VzXCIpJiYoYS5wYWdpbmF0aW9uV3JhcHBlci5maW5kKFwiLm93bC1wYWdlXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpLGYodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIikpfSl9LGNoZWNrTmF2aWdhdGlvbjpmdW5jdGlvbigpe2lmKCExPT09dGhpcy5vcHRpb25zLm5hdmlnYXRpb24pcmV0dXJuITE7ITE9PT10aGlzLm9wdGlvbnMucmV3aW5kTmF2JiYoMD09PXRoaXMuY3VycmVudEl0ZW0mJjA9PT10aGlzLm1heGltdW1JdGVtPyh0aGlzLmJ1dHRvblByZXYuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSx0aGlzLmJ1dHRvbk5leHQuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSk6MD09PXRoaXMuY3VycmVudEl0ZW0mJjAhPT10aGlzLm1heGltdW1JdGVtPyh0aGlzLmJ1dHRvblByZXYuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSx0aGlzLmJ1dHRvbk5leHQucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSk6dGhpcy5jdXJyZW50SXRlbT09PVxyXG50aGlzLm1heGltdW1JdGVtPyh0aGlzLmJ1dHRvblByZXYucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKSx0aGlzLmJ1dHRvbk5leHQuYWRkQ2xhc3MoXCJkaXNhYmxlZFwiKSk6MCE9PXRoaXMuY3VycmVudEl0ZW0mJnRoaXMuY3VycmVudEl0ZW0hPT10aGlzLm1heGltdW1JdGVtJiYodGhpcy5idXR0b25QcmV2LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIiksdGhpcy5idXR0b25OZXh0LnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIikpKX0sdXBkYXRlQ29udHJvbHM6ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZVBhZ2luYXRpb24oKTt0aGlzLmNoZWNrTmF2aWdhdGlvbigpO3RoaXMub3dsQ29udHJvbHMmJih0aGlzLm9wdGlvbnMuaXRlbXM+PXRoaXMuaXRlbXNBbW91bnQ/dGhpcy5vd2xDb250cm9scy5oaWRlKCk6dGhpcy5vd2xDb250cm9scy5zaG93KCkpfSxkZXN0cm95Q29udHJvbHM6ZnVuY3Rpb24oKXt0aGlzLm93bENvbnRyb2xzJiZ0aGlzLm93bENvbnRyb2xzLnJlbW92ZSgpfSxuZXh0OmZ1bmN0aW9uKGEpe2lmKHRoaXMuaXNUcmFuc2l0aW9uKXJldHVybiExO1xyXG50aGlzLmN1cnJlbnRJdGVtKz0hMD09PXRoaXMub3B0aW9ucy5zY3JvbGxQZXJQYWdlP3RoaXMub3B0aW9ucy5pdGVtczoxO2lmKHRoaXMuY3VycmVudEl0ZW0+dGhpcy5tYXhpbXVtSXRlbSsoITA9PT10aGlzLm9wdGlvbnMuc2Nyb2xsUGVyUGFnZT90aGlzLm9wdGlvbnMuaXRlbXMtMTowKSlpZighMD09PXRoaXMub3B0aW9ucy5yZXdpbmROYXYpdGhpcy5jdXJyZW50SXRlbT0wLGE9XCJyZXdpbmRcIjtlbHNlIHJldHVybiB0aGlzLmN1cnJlbnRJdGVtPXRoaXMubWF4aW11bUl0ZW0sITE7dGhpcy5nb1RvKHRoaXMuY3VycmVudEl0ZW0sYSl9LHByZXY6ZnVuY3Rpb24oYSl7aWYodGhpcy5pc1RyYW5zaXRpb24pcmV0dXJuITE7dGhpcy5jdXJyZW50SXRlbT0hMD09PXRoaXMub3B0aW9ucy5zY3JvbGxQZXJQYWdlJiYwPHRoaXMuY3VycmVudEl0ZW0mJnRoaXMuY3VycmVudEl0ZW08dGhpcy5vcHRpb25zLml0ZW1zPzA6dGhpcy5jdXJyZW50SXRlbS0oITA9PT10aGlzLm9wdGlvbnMuc2Nyb2xsUGVyUGFnZT9cclxudGhpcy5vcHRpb25zLml0ZW1zOjEpO2lmKDA+dGhpcy5jdXJyZW50SXRlbSlpZighMD09PXRoaXMub3B0aW9ucy5yZXdpbmROYXYpdGhpcy5jdXJyZW50SXRlbT10aGlzLm1heGltdW1JdGVtLGE9XCJyZXdpbmRcIjtlbHNlIHJldHVybiB0aGlzLmN1cnJlbnRJdGVtPTAsITE7dGhpcy5nb1RvKHRoaXMuY3VycmVudEl0ZW0sYSl9LGdvVG86ZnVuY3Rpb24oYSxiLGUpe3ZhciBjPXRoaXM7aWYoYy5pc1RyYW5zaXRpb24pcmV0dXJuITE7XCJmdW5jdGlvblwiPT09dHlwZW9mIGMub3B0aW9ucy5iZWZvcmVNb3ZlJiZjLm9wdGlvbnMuYmVmb3JlTW92ZS5hcHBseSh0aGlzLFtjLiRlbGVtXSk7YT49Yy5tYXhpbXVtSXRlbT9hPWMubWF4aW11bUl0ZW06MD49YSYmKGE9MCk7Yy5jdXJyZW50SXRlbT1jLm93bC5jdXJyZW50SXRlbT1hO2lmKCExIT09Yy5vcHRpb25zLnRyYW5zaXRpb25TdHlsZSYmXCJkcmFnXCIhPT1lJiYxPT09Yy5vcHRpb25zLml0ZW1zJiYhMD09PWMuYnJvd3Nlci5zdXBwb3J0M2QpcmV0dXJuIGMuc3dhcFNwZWVkKDApLFxyXG4hMD09PWMuYnJvd3Nlci5zdXBwb3J0M2Q/Yy50cmFuc2l0aW9uM2QoYy5wb3NpdGlvbnNJbkFycmF5W2FdKTpjLmNzczJzbGlkZShjLnBvc2l0aW9uc0luQXJyYXlbYV0sMSksYy5hZnRlckdvKCksYy5zaW5nbGVJdGVtVHJhbnNpdGlvbigpLCExO2E9Yy5wb3NpdGlvbnNJbkFycmF5W2FdOyEwPT09Yy5icm93c2VyLnN1cHBvcnQzZD8oYy5pc0NzczNGaW5pc2g9ITEsITA9PT1iPyhjLnN3YXBTcGVlZChcInBhZ2luYXRpb25TcGVlZFwiKSxnLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmlzQ3NzM0ZpbmlzaD0hMH0sYy5vcHRpb25zLnBhZ2luYXRpb25TcGVlZCkpOlwicmV3aW5kXCI9PT1iPyhjLnN3YXBTcGVlZChjLm9wdGlvbnMucmV3aW5kU3BlZWQpLGcuc2V0VGltZW91dChmdW5jdGlvbigpe2MuaXNDc3MzRmluaXNoPSEwfSxjLm9wdGlvbnMucmV3aW5kU3BlZWQpKTooYy5zd2FwU3BlZWQoXCJzbGlkZVNwZWVkXCIpLGcuc2V0VGltZW91dChmdW5jdGlvbigpe2MuaXNDc3MzRmluaXNoPSEwfSxcclxuYy5vcHRpb25zLnNsaWRlU3BlZWQpKSxjLnRyYW5zaXRpb24zZChhKSk6ITA9PT1iP2MuY3NzMnNsaWRlKGEsYy5vcHRpb25zLnBhZ2luYXRpb25TcGVlZCk6XCJyZXdpbmRcIj09PWI/Yy5jc3Myc2xpZGUoYSxjLm9wdGlvbnMucmV3aW5kU3BlZWQpOmMuY3NzMnNsaWRlKGEsYy5vcHRpb25zLnNsaWRlU3BlZWQpO2MuYWZ0ZXJHbygpfSxqdW1wVG86ZnVuY3Rpb24oYSl7XCJmdW5jdGlvblwiPT09dHlwZW9mIHRoaXMub3B0aW9ucy5iZWZvcmVNb3ZlJiZ0aGlzLm9wdGlvbnMuYmVmb3JlTW92ZS5hcHBseSh0aGlzLFt0aGlzLiRlbGVtXSk7YT49dGhpcy5tYXhpbXVtSXRlbXx8LTE9PT1hP2E9dGhpcy5tYXhpbXVtSXRlbTowPj1hJiYoYT0wKTt0aGlzLnN3YXBTcGVlZCgwKTshMD09PXRoaXMuYnJvd3Nlci5zdXBwb3J0M2Q/dGhpcy50cmFuc2l0aW9uM2QodGhpcy5wb3NpdGlvbnNJbkFycmF5W2FdKTp0aGlzLmNzczJzbGlkZSh0aGlzLnBvc2l0aW9uc0luQXJyYXlbYV0sMSk7dGhpcy5jdXJyZW50SXRlbT1cclxudGhpcy5vd2wuY3VycmVudEl0ZW09YTt0aGlzLmFmdGVyR28oKX0sYWZ0ZXJHbzpmdW5jdGlvbigpe3RoaXMucHJldkFyci5wdXNoKHRoaXMuY3VycmVudEl0ZW0pO3RoaXMucHJldkl0ZW09dGhpcy5vd2wucHJldkl0ZW09dGhpcy5wcmV2QXJyW3RoaXMucHJldkFyci5sZW5ndGgtMl07dGhpcy5wcmV2QXJyLnNoaWZ0KDApO3RoaXMucHJldkl0ZW0hPT10aGlzLmN1cnJlbnRJdGVtJiYodGhpcy5jaGVja1BhZ2luYXRpb24oKSx0aGlzLmNoZWNrTmF2aWdhdGlvbigpLHRoaXMuZWFjaE1vdmVVcGRhdGUoKSwhMSE9PXRoaXMub3B0aW9ucy5hdXRvUGxheSYmdGhpcy5jaGVja0FwKCkpO1wiZnVuY3Rpb25cIj09PXR5cGVvZiB0aGlzLm9wdGlvbnMuYWZ0ZXJNb3ZlJiZ0aGlzLnByZXZJdGVtIT09dGhpcy5jdXJyZW50SXRlbSYmdGhpcy5vcHRpb25zLmFmdGVyTW92ZS5hcHBseSh0aGlzLFt0aGlzLiRlbGVtXSl9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmFwU3RhdHVzPVwic3RvcFwiO2cuY2xlYXJJbnRlcnZhbCh0aGlzLmF1dG9QbGF5SW50ZXJ2YWwpfSxcclxuY2hlY2tBcDpmdW5jdGlvbigpe1wic3RvcFwiIT09dGhpcy5hcFN0YXR1cyYmdGhpcy5wbGF5KCl9LHBsYXk6ZnVuY3Rpb24oKXt2YXIgYT10aGlzO2EuYXBTdGF0dXM9XCJwbGF5XCI7aWYoITE9PT1hLm9wdGlvbnMuYXV0b1BsYXkpcmV0dXJuITE7Zy5jbGVhckludGVydmFsKGEuYXV0b1BsYXlJbnRlcnZhbCk7YS5hdXRvUGxheUludGVydmFsPWcuc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXthLm5leHQoITApfSxhLm9wdGlvbnMuYXV0b1BsYXkpfSxzd2FwU3BlZWQ6ZnVuY3Rpb24oYSl7XCJzbGlkZVNwZWVkXCI9PT1hP3RoaXMuJG93bFdyYXBwZXIuY3NzKHRoaXMuYWRkQ3NzU3BlZWQodGhpcy5vcHRpb25zLnNsaWRlU3BlZWQpKTpcInBhZ2luYXRpb25TcGVlZFwiPT09YT90aGlzLiRvd2xXcmFwcGVyLmNzcyh0aGlzLmFkZENzc1NwZWVkKHRoaXMub3B0aW9ucy5wYWdpbmF0aW9uU3BlZWQpKTpcInN0cmluZ1wiIT09dHlwZW9mIGEmJnRoaXMuJG93bFdyYXBwZXIuY3NzKHRoaXMuYWRkQ3NzU3BlZWQoYSkpfSxcclxuYWRkQ3NzU3BlZWQ6ZnVuY3Rpb24oYSl7cmV0dXJue1wiLXdlYmtpdC10cmFuc2l0aW9uXCI6XCJhbGwgXCIrYStcIm1zIGVhc2VcIixcIi1tb3otdHJhbnNpdGlvblwiOlwiYWxsIFwiK2ErXCJtcyBlYXNlXCIsXCItby10cmFuc2l0aW9uXCI6XCJhbGwgXCIrYStcIm1zIGVhc2VcIix0cmFuc2l0aW9uOlwiYWxsIFwiK2ErXCJtcyBlYXNlXCJ9fSxyZW1vdmVUcmFuc2l0aW9uOmZ1bmN0aW9uKCl7cmV0dXJue1wiLXdlYmtpdC10cmFuc2l0aW9uXCI6XCJcIixcIi1tb3otdHJhbnNpdGlvblwiOlwiXCIsXCItby10cmFuc2l0aW9uXCI6XCJcIix0cmFuc2l0aW9uOlwiXCJ9fSxkb1RyYW5zbGF0ZTpmdW5jdGlvbihhKXtyZXR1cm57XCItd2Via2l0LXRyYW5zZm9ybVwiOlwidHJhbnNsYXRlM2QoXCIrYStcInB4LCAwcHgsIDBweClcIixcIi1tb3otdHJhbnNmb3JtXCI6XCJ0cmFuc2xhdGUzZChcIithK1wicHgsIDBweCwgMHB4KVwiLFwiLW8tdHJhbnNmb3JtXCI6XCJ0cmFuc2xhdGUzZChcIithK1wicHgsIDBweCwgMHB4KVwiLFwiLW1zLXRyYW5zZm9ybVwiOlwidHJhbnNsYXRlM2QoXCIrXHJcbmErXCJweCwgMHB4LCAwcHgpXCIsdHJhbnNmb3JtOlwidHJhbnNsYXRlM2QoXCIrYStcInB4LCAwcHgsMHB4KVwifX0sdHJhbnNpdGlvbjNkOmZ1bmN0aW9uKGEpe3RoaXMuJG93bFdyYXBwZXIuY3NzKHRoaXMuZG9UcmFuc2xhdGUoYSkpfSxjc3MybW92ZTpmdW5jdGlvbihhKXt0aGlzLiRvd2xXcmFwcGVyLmNzcyh7bGVmdDphfSl9LGNzczJzbGlkZTpmdW5jdGlvbihhLGIpe3ZhciBlPXRoaXM7ZS5pc0Nzc0ZpbmlzaD0hMTtlLiRvd2xXcmFwcGVyLnN0b3AoITAsITApLmFuaW1hdGUoe2xlZnQ6YX0se2R1cmF0aW9uOmJ8fGUub3B0aW9ucy5zbGlkZVNwZWVkLGNvbXBsZXRlOmZ1bmN0aW9uKCl7ZS5pc0Nzc0ZpbmlzaD0hMH19KX0sY2hlY2tCcm93c2VyOmZ1bmN0aW9uKCl7dmFyIGE9ay5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Euc3R5bGUuY3NzVGV4dD1cIiAgLW1vei10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCk7IC1tcy10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCk7IC1vLXRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwcHgsIDBweCwgMHB4KTsgLXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlM2QoMHB4LCAwcHgsIDBweCk7IHRyYW5zZm9ybTp0cmFuc2xhdGUzZCgwcHgsIDBweCwgMHB4KVwiO1xyXG5hPWEuc3R5bGUuY3NzVGV4dC5tYXRjaCgvdHJhbnNsYXRlM2RcXCgwcHgsIDBweCwgMHB4XFwpL2cpO3RoaXMuYnJvd3Nlcj17c3VwcG9ydDNkOm51bGwhPT1hJiYxPT09YS5sZW5ndGgsaXNUb3VjaDpcIm9udG91Y2hzdGFydFwiaW4gZ3x8Zy5uYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50c319LG1vdmVFdmVudHM6ZnVuY3Rpb24oKXtpZighMSE9PXRoaXMub3B0aW9ucy5tb3VzZURyYWd8fCExIT09dGhpcy5vcHRpb25zLnRvdWNoRHJhZyl0aGlzLmdlc3R1cmVzKCksdGhpcy5kaXNhYmxlZEV2ZW50cygpfSxldmVudFR5cGVzOmZ1bmN0aW9uKCl7dmFyIGE9W1wic1wiLFwiZVwiLFwieFwiXTt0aGlzLmV2X3R5cGVzPXt9OyEwPT09dGhpcy5vcHRpb25zLm1vdXNlRHJhZyYmITA9PT10aGlzLm9wdGlvbnMudG91Y2hEcmFnP2E9W1widG91Y2hzdGFydC5vd2wgbW91c2Vkb3duLm93bFwiLFwidG91Y2htb3ZlLm93bCBtb3VzZW1vdmUub3dsXCIsXCJ0b3VjaGVuZC5vd2wgdG91Y2hjYW5jZWwub3dsIG1vdXNldXAub3dsXCJdOlxyXG4hMT09PXRoaXMub3B0aW9ucy5tb3VzZURyYWcmJiEwPT09dGhpcy5vcHRpb25zLnRvdWNoRHJhZz9hPVtcInRvdWNoc3RhcnQub3dsXCIsXCJ0b3VjaG1vdmUub3dsXCIsXCJ0b3VjaGVuZC5vd2wgdG91Y2hjYW5jZWwub3dsXCJdOiEwPT09dGhpcy5vcHRpb25zLm1vdXNlRHJhZyYmITE9PT10aGlzLm9wdGlvbnMudG91Y2hEcmFnJiYoYT1bXCJtb3VzZWRvd24ub3dsXCIsXCJtb3VzZW1vdmUub3dsXCIsXCJtb3VzZXVwLm93bFwiXSk7dGhpcy5ldl90eXBlcy5zdGFydD1hWzBdO3RoaXMuZXZfdHlwZXMubW92ZT1hWzFdO3RoaXMuZXZfdHlwZXMuZW5kPWFbMl19LGRpc2FibGVkRXZlbnRzOmZ1bmN0aW9uKCl7dGhpcy4kZWxlbS5vbihcImRyYWdzdGFydC5vd2xcIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCl9KTt0aGlzLiRlbGVtLm9uKFwibW91c2Vkb3duLmRpc2FibGVUZXh0U2VsZWN0XCIsZnVuY3Rpb24oYSl7cmV0dXJuIGYoYS50YXJnZXQpLmlzKFwiaW5wdXQsIHRleHRhcmVhLCBzZWxlY3QsIG9wdGlvblwiKX0pfSxcclxuZ2VzdHVyZXM6ZnVuY3Rpb24oKXtmdW5jdGlvbiBhKGEpe2lmKHZvaWQgMCE9PWEudG91Y2hlcylyZXR1cm57eDphLnRvdWNoZXNbMF0ucGFnZVgseTphLnRvdWNoZXNbMF0ucGFnZVl9O2lmKHZvaWQgMD09PWEudG91Y2hlcyl7aWYodm9pZCAwIT09YS5wYWdlWClyZXR1cm57eDphLnBhZ2VYLHk6YS5wYWdlWX07aWYodm9pZCAwPT09YS5wYWdlWClyZXR1cm57eDphLmNsaWVudFgseTphLmNsaWVudFl9fX1mdW5jdGlvbiBiKGEpe1wib25cIj09PWE/KGYoaykub24oZC5ldl90eXBlcy5tb3ZlLGUpLGYoaykub24oZC5ldl90eXBlcy5lbmQsYykpOlwib2ZmXCI9PT1hJiYoZihrKS5vZmYoZC5ldl90eXBlcy5tb3ZlKSxmKGspLm9mZihkLmV2X3R5cGVzLmVuZCkpfWZ1bmN0aW9uIGUoYil7Yj1iLm9yaWdpbmFsRXZlbnR8fGJ8fGcuZXZlbnQ7ZC5uZXdQb3NYPWEoYikueC1oLm9mZnNldFg7ZC5uZXdQb3NZPWEoYikueS1oLm9mZnNldFk7ZC5uZXdSZWxhdGl2ZVg9ZC5uZXdQb3NYLWgucmVsYXRpdmVQb3M7XHJcblwiZnVuY3Rpb25cIj09PXR5cGVvZiBkLm9wdGlvbnMuc3RhcnREcmFnZ2luZyYmITAhPT1oLmRyYWdnaW5nJiYwIT09ZC5uZXdSZWxhdGl2ZVgmJihoLmRyYWdnaW5nPSEwLGQub3B0aW9ucy5zdGFydERyYWdnaW5nLmFwcGx5KGQsW2QuJGVsZW1dKSk7KDg8ZC5uZXdSZWxhdGl2ZVh8fC04PmQubmV3UmVsYXRpdmVYKSYmITA9PT1kLmJyb3dzZXIuaXNUb3VjaCYmKHZvaWQgMCE9PWIucHJldmVudERlZmF1bHQ/Yi5wcmV2ZW50RGVmYXVsdCgpOmIucmV0dXJuVmFsdWU9ITEsaC5zbGlkaW5nPSEwKTsoMTA8ZC5uZXdQb3NZfHwtMTA+ZC5uZXdQb3NZKSYmITE9PT1oLnNsaWRpbmcmJmYoaykub2ZmKFwidG91Y2htb3ZlLm93bFwiKTtkLm5ld1Bvc1g9TWF0aC5tYXgoTWF0aC5taW4oZC5uZXdQb3NYLGQubmV3UmVsYXRpdmVYLzUpLGQubWF4aW11bVBpeGVscytkLm5ld1JlbGF0aXZlWC81KTshMD09PWQuYnJvd3Nlci5zdXBwb3J0M2Q/ZC50cmFuc2l0aW9uM2QoZC5uZXdQb3NYKTpkLmNzczJtb3ZlKGQubmV3UG9zWCl9XHJcbmZ1bmN0aW9uIGMoYSl7YT1hLm9yaWdpbmFsRXZlbnR8fGF8fGcuZXZlbnQ7dmFyIGM7YS50YXJnZXQ9YS50YXJnZXR8fGEuc3JjRWxlbWVudDtoLmRyYWdnaW5nPSExOyEwIT09ZC5icm93c2VyLmlzVG91Y2gmJmQuJG93bFdyYXBwZXIucmVtb3ZlQ2xhc3MoXCJncmFiYmluZ1wiKTtkLmRyYWdEaXJlY3Rpb249MD5kLm5ld1JlbGF0aXZlWD9kLm93bC5kcmFnRGlyZWN0aW9uPVwibGVmdFwiOmQub3dsLmRyYWdEaXJlY3Rpb249XCJyaWdodFwiOzAhPT1kLm5ld1JlbGF0aXZlWCYmKGM9ZC5nZXROZXdQb3NpdGlvbigpLGQuZ29UbyhjLCExLFwiZHJhZ1wiKSxoLnRhcmdldEVsZW1lbnQ9PT1hLnRhcmdldCYmITAhPT1kLmJyb3dzZXIuaXNUb3VjaCYmKGYoYS50YXJnZXQpLm9uKFwiY2xpY2suZGlzYWJsZVwiLGZ1bmN0aW9uKGEpe2Euc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7YS5zdG9wUHJvcGFnYXRpb24oKTthLnByZXZlbnREZWZhdWx0KCk7ZihhLnRhcmdldCkub2ZmKFwiY2xpY2suZGlzYWJsZVwiKX0pLFxyXG5hPWYuX2RhdGEoYS50YXJnZXQsXCJldmVudHNcIikuY2xpY2ssYz1hLnBvcCgpLGEuc3BsaWNlKDAsMCxjKSkpO2IoXCJvZmZcIil9dmFyIGQ9dGhpcyxoPXtvZmZzZXRYOjAsb2Zmc2V0WTowLGJhc2VFbFdpZHRoOjAscmVsYXRpdmVQb3M6MCxwb3NpdGlvbjpudWxsLG1pblN3aXBlOm51bGwsbWF4U3dpcGU6bnVsbCxzbGlkaW5nOm51bGwsZGFyZ2dpbmc6bnVsbCx0YXJnZXRFbGVtZW50Om51bGx9O2QuaXNDc3NGaW5pc2g9ITA7ZC4kZWxlbS5vbihkLmV2X3R5cGVzLnN0YXJ0LFwiLm93bC13cmFwcGVyXCIsZnVuY3Rpb24oYyl7Yz1jLm9yaWdpbmFsRXZlbnR8fGN8fGcuZXZlbnQ7dmFyIGU7aWYoMz09PWMud2hpY2gpcmV0dXJuITE7aWYoIShkLml0ZW1zQW1vdW50PD1kLm9wdGlvbnMuaXRlbXMpKXtpZighMT09PWQuaXNDc3NGaW5pc2gmJiFkLm9wdGlvbnMuZHJhZ0JlZm9yZUFuaW1GaW5pc2h8fCExPT09ZC5pc0NzczNGaW5pc2gmJiFkLm9wdGlvbnMuZHJhZ0JlZm9yZUFuaW1GaW5pc2gpcmV0dXJuITE7XHJcbiExIT09ZC5vcHRpb25zLmF1dG9QbGF5JiZnLmNsZWFySW50ZXJ2YWwoZC5hdXRvUGxheUludGVydmFsKTshMD09PWQuYnJvd3Nlci5pc1RvdWNofHxkLiRvd2xXcmFwcGVyLmhhc0NsYXNzKFwiZ3JhYmJpbmdcIil8fGQuJG93bFdyYXBwZXIuYWRkQ2xhc3MoXCJncmFiYmluZ1wiKTtkLm5ld1Bvc1g9MDtkLm5ld1JlbGF0aXZlWD0wO2YodGhpcykuY3NzKGQucmVtb3ZlVHJhbnNpdGlvbigpKTtlPWYodGhpcykucG9zaXRpb24oKTtoLnJlbGF0aXZlUG9zPWUubGVmdDtoLm9mZnNldFg9YShjKS54LWUubGVmdDtoLm9mZnNldFk9YShjKS55LWUudG9wO2IoXCJvblwiKTtoLnNsaWRpbmc9ITE7aC50YXJnZXRFbGVtZW50PWMudGFyZ2V0fHxjLnNyY0VsZW1lbnR9fSl9LGdldE5ld1Bvc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jbG9zZXN0SXRlbSgpO2E+dGhpcy5tYXhpbXVtSXRlbT9hPXRoaXMuY3VycmVudEl0ZW09dGhpcy5tYXhpbXVtSXRlbTowPD10aGlzLm5ld1Bvc1gmJih0aGlzLmN1cnJlbnRJdGVtPVxyXG5hPTApO3JldHVybiBhfSxjbG9zZXN0SXRlbTpmdW5jdGlvbigpe3ZhciBhPXRoaXMsYj0hMD09PWEub3B0aW9ucy5zY3JvbGxQZXJQYWdlP2EucGFnZXNJbkFycmF5OmEucG9zaXRpb25zSW5BcnJheSxlPWEubmV3UG9zWCxjPW51bGw7Zi5lYWNoKGIsZnVuY3Rpb24oZCxnKXtlLWEuaXRlbVdpZHRoLzIwPmJbZCsxXSYmZS1hLml0ZW1XaWR0aC8yMDxnJiZcImxlZnRcIj09PWEubW92ZURpcmVjdGlvbigpPyhjPWcsYS5jdXJyZW50SXRlbT0hMD09PWEub3B0aW9ucy5zY3JvbGxQZXJQYWdlP2YuaW5BcnJheShjLGEucG9zaXRpb25zSW5BcnJheSk6ZCk6ZSthLml0ZW1XaWR0aC8yMDxnJiZlK2EuaXRlbVdpZHRoLzIwPihiW2QrMV18fGJbZF0tYS5pdGVtV2lkdGgpJiZcInJpZ2h0XCI9PT1hLm1vdmVEaXJlY3Rpb24oKSYmKCEwPT09YS5vcHRpb25zLnNjcm9sbFBlclBhZ2U/KGM9YltkKzFdfHxiW2IubGVuZ3RoLTFdLGEuY3VycmVudEl0ZW09Zi5pbkFycmF5KGMsYS5wb3NpdGlvbnNJbkFycmF5KSk6XHJcbihjPWJbZCsxXSxhLmN1cnJlbnRJdGVtPWQrMSkpfSk7cmV0dXJuIGEuY3VycmVudEl0ZW19LG1vdmVEaXJlY3Rpb246ZnVuY3Rpb24oKXt2YXIgYTswPnRoaXMubmV3UmVsYXRpdmVYPyhhPVwicmlnaHRcIix0aGlzLnBsYXlEaXJlY3Rpb249XCJuZXh0XCIpOihhPVwibGVmdFwiLHRoaXMucGxheURpcmVjdGlvbj1cInByZXZcIik7cmV0dXJuIGF9LGN1c3RvbUV2ZW50czpmdW5jdGlvbigpe3ZhciBhPXRoaXM7YS4kZWxlbS5vbihcIm93bC5uZXh0XCIsZnVuY3Rpb24oKXthLm5leHQoKX0pO2EuJGVsZW0ub24oXCJvd2wucHJldlwiLGZ1bmN0aW9uKCl7YS5wcmV2KCl9KTthLiRlbGVtLm9uKFwib3dsLnBsYXlcIixmdW5jdGlvbihiLGUpe2Eub3B0aW9ucy5hdXRvUGxheT1lO2EucGxheSgpO2EuaG92ZXJTdGF0dXM9XCJwbGF5XCJ9KTthLiRlbGVtLm9uKFwib3dsLnN0b3BcIixmdW5jdGlvbigpe2Euc3RvcCgpO2EuaG92ZXJTdGF0dXM9XCJzdG9wXCJ9KTthLiRlbGVtLm9uKFwib3dsLmdvVG9cIixmdW5jdGlvbihiLGUpe2EuZ29UbyhlKX0pO1xyXG5hLiRlbGVtLm9uKFwib3dsLmp1bXBUb1wiLGZ1bmN0aW9uKGIsZSl7YS5qdW1wVG8oZSl9KX0sc3RvcE9uSG92ZXI6ZnVuY3Rpb24oKXt2YXIgYT10aGlzOyEwPT09YS5vcHRpb25zLnN0b3BPbkhvdmVyJiYhMCE9PWEuYnJvd3Nlci5pc1RvdWNoJiYhMSE9PWEub3B0aW9ucy5hdXRvUGxheSYmKGEuJGVsZW0ub24oXCJtb3VzZW92ZXJcIixmdW5jdGlvbigpe2Euc3RvcCgpfSksYS4kZWxlbS5vbihcIm1vdXNlb3V0XCIsZnVuY3Rpb24oKXtcInN0b3BcIiE9PWEuaG92ZXJTdGF0dXMmJmEucGxheSgpfSkpfSxsYXp5TG9hZDpmdW5jdGlvbigpe3ZhciBhLGIsZSxjLGQ7aWYoITE9PT10aGlzLm9wdGlvbnMubGF6eUxvYWQpcmV0dXJuITE7Zm9yKGE9MDthPHRoaXMuaXRlbXNBbW91bnQ7YSs9MSliPWYodGhpcy4kb3dsSXRlbXNbYV0pLFwibG9hZGVkXCIhPT1iLmRhdGEoXCJvd2wtbG9hZGVkXCIpJiYoZT1iLmRhdGEoXCJvd2wtaXRlbVwiKSxjPWIuZmluZChcIi5sYXp5T3dsXCIpLFwic3RyaW5nXCIhPT10eXBlb2YgYy5kYXRhKFwic3JjXCIpP1xyXG5iLmRhdGEoXCJvd2wtbG9hZGVkXCIsXCJsb2FkZWRcIik6KHZvaWQgMD09PWIuZGF0YShcIm93bC1sb2FkZWRcIikmJihjLmhpZGUoKSxiLmFkZENsYXNzKFwibG9hZGluZ1wiKS5kYXRhKFwib3dsLWxvYWRlZFwiLFwiY2hlY2tlZFwiKSksKGQ9ITA9PT10aGlzLm9wdGlvbnMubGF6eUZvbGxvdz9lPj10aGlzLmN1cnJlbnRJdGVtOiEwKSYmZTx0aGlzLmN1cnJlbnRJdGVtK3RoaXMub3B0aW9ucy5pdGVtcyYmYy5sZW5ndGgmJnRoaXMubGF6eVByZWxvYWQoYixjKSkpfSxsYXp5UHJlbG9hZDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGUoKXthLmRhdGEoXCJvd2wtbG9hZGVkXCIsXCJsb2FkZWRcIikucmVtb3ZlQ2xhc3MoXCJsb2FkaW5nXCIpO2IucmVtb3ZlQXR0cihcImRhdGEtc3JjXCIpO1wiZmFkZVwiPT09ZC5vcHRpb25zLmxhenlFZmZlY3Q/Yi5mYWRlSW4oNDAwKTpiLnNob3coKTtcImZ1bmN0aW9uXCI9PT10eXBlb2YgZC5vcHRpb25zLmFmdGVyTGF6eUxvYWQmJmQub3B0aW9ucy5hZnRlckxhenlMb2FkLmFwcGx5KHRoaXMsXHJcbltkLiRlbGVtXSl9ZnVuY3Rpb24gYygpe2YrPTE7ZC5jb21wbGV0ZUltZyhiLmdldCgwKSl8fCEwPT09az9lKCk6MTAwPj1mP2cuc2V0VGltZW91dChjLDEwMCk6ZSgpfXZhciBkPXRoaXMsZj0wLGs7XCJESVZcIj09PWIucHJvcChcInRhZ05hbWVcIik/KGIuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLFwidXJsKFwiK2IuZGF0YShcInNyY1wiKStcIilcIiksaz0hMCk6YlswXS5zcmM9Yi5kYXRhKFwic3JjXCIpO2MoKX0sYXV0b0hlaWdodDpmdW5jdGlvbigpe2Z1bmN0aW9uIGEoKXt2YXIgYT1mKGUuJG93bEl0ZW1zW2UuY3VycmVudEl0ZW1dKS5oZWlnaHQoKTtlLndyYXBwZXJPdXRlci5jc3MoXCJoZWlnaHRcIixhK1wicHhcIik7ZS53cmFwcGVyT3V0ZXIuaGFzQ2xhc3MoXCJhdXRvSGVpZ2h0XCIpfHxnLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLndyYXBwZXJPdXRlci5hZGRDbGFzcyhcImF1dG9IZWlnaHRcIil9LDApfWZ1bmN0aW9uIGIoKXtkKz0xO2UuY29tcGxldGVJbWcoYy5nZXQoMCkpP2EoKToxMDA+PWQ/Zy5zZXRUaW1lb3V0KGIsXHJcbjEwMCk6ZS53cmFwcGVyT3V0ZXIuY3NzKFwiaGVpZ2h0XCIsXCJcIil9dmFyIGU9dGhpcyxjPWYoZS4kb3dsSXRlbXNbZS5jdXJyZW50SXRlbV0pLmZpbmQoXCJpbWdcIiksZDt2b2lkIDAhPT1jLmdldCgwKT8oZD0wLGIoKSk6YSgpfSxjb21wbGV0ZUltZzpmdW5jdGlvbihhKXtyZXR1cm4hYS5jb21wbGV0ZXx8XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhLm5hdHVyYWxXaWR0aCYmMD09PWEubmF0dXJhbFdpZHRoPyExOiEwfSxvblZpc2libGVJdGVtczpmdW5jdGlvbigpe3ZhciBhOyEwPT09dGhpcy5vcHRpb25zLmFkZENsYXNzQWN0aXZlJiZ0aGlzLiRvd2xJdGVtcy5yZW1vdmVDbGFzcyhcImFjdGl2ZVwiKTt0aGlzLnZpc2libGVJdGVtcz1bXTtmb3IoYT10aGlzLmN1cnJlbnRJdGVtO2E8dGhpcy5jdXJyZW50SXRlbSt0aGlzLm9wdGlvbnMuaXRlbXM7YSs9MSl0aGlzLnZpc2libGVJdGVtcy5wdXNoKGEpLCEwPT09dGhpcy5vcHRpb25zLmFkZENsYXNzQWN0aXZlJiZmKHRoaXMuJG93bEl0ZW1zW2FdKS5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcclxudGhpcy5vd2wudmlzaWJsZUl0ZW1zPXRoaXMudmlzaWJsZUl0ZW1zfSx0cmFuc2l0aW9uVHlwZXM6ZnVuY3Rpb24oYSl7dGhpcy5vdXRDbGFzcz1cIm93bC1cIithK1wiLW91dFwiO3RoaXMuaW5DbGFzcz1cIm93bC1cIithK1wiLWluXCJ9LHNpbmdsZUl0ZW1UcmFuc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcyxiPWEub3V0Q2xhc3MsZT1hLmluQ2xhc3MsYz1hLiRvd2xJdGVtcy5lcShhLmN1cnJlbnRJdGVtKSxkPWEuJG93bEl0ZW1zLmVxKGEucHJldkl0ZW0pLGY9TWF0aC5hYnMoYS5wb3NpdGlvbnNJbkFycmF5W2EuY3VycmVudEl0ZW1dKSthLnBvc2l0aW9uc0luQXJyYXlbYS5wcmV2SXRlbV0sZz1NYXRoLmFicyhhLnBvc2l0aW9uc0luQXJyYXlbYS5jdXJyZW50SXRlbV0pK2EuaXRlbVdpZHRoLzI7YS5pc1RyYW5zaXRpb249ITA7YS4kb3dsV3JhcHBlci5hZGRDbGFzcyhcIm93bC1vcmlnaW5cIikuY3NzKHtcIi13ZWJraXQtdHJhbnNmb3JtLW9yaWdpblwiOmcrXCJweFwiLFwiLW1vei1wZXJzcGVjdGl2ZS1vcmlnaW5cIjpnK1xyXG5cInB4XCIsXCJwZXJzcGVjdGl2ZS1vcmlnaW5cIjpnK1wicHhcIn0pO2QuY3NzKHtwb3NpdGlvbjpcInJlbGF0aXZlXCIsbGVmdDpmK1wicHhcIn0pLmFkZENsYXNzKGIpLm9uKFwid2Via2l0QW5pbWF0aW9uRW5kIG9BbmltYXRpb25FbmQgTVNBbmltYXRpb25FbmQgYW5pbWF0aW9uZW5kXCIsZnVuY3Rpb24oKXthLmVuZFByZXY9ITA7ZC5vZmYoXCJ3ZWJraXRBbmltYXRpb25FbmQgb0FuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmRcIik7YS5jbGVhclRyYW5zU3R5bGUoZCxiKX0pO2MuYWRkQ2xhc3MoZSkub24oXCJ3ZWJraXRBbmltYXRpb25FbmQgb0FuaW1hdGlvbkVuZCBNU0FuaW1hdGlvbkVuZCBhbmltYXRpb25lbmRcIixmdW5jdGlvbigpe2EuZW5kQ3VycmVudD0hMDtjLm9mZihcIndlYmtpdEFuaW1hdGlvbkVuZCBvQW5pbWF0aW9uRW5kIE1TQW5pbWF0aW9uRW5kIGFuaW1hdGlvbmVuZFwiKTthLmNsZWFyVHJhbnNTdHlsZShjLGUpfSl9LGNsZWFyVHJhbnNTdHlsZTpmdW5jdGlvbihhLFxyXG5iKXthLmNzcyh7cG9zaXRpb246XCJcIixsZWZ0OlwiXCJ9KS5yZW1vdmVDbGFzcyhiKTt0aGlzLmVuZFByZXYmJnRoaXMuZW5kQ3VycmVudCYmKHRoaXMuJG93bFdyYXBwZXIucmVtb3ZlQ2xhc3MoXCJvd2wtb3JpZ2luXCIpLHRoaXMuaXNUcmFuc2l0aW9uPXRoaXMuZW5kQ3VycmVudD10aGlzLmVuZFByZXY9ITEpfSxvd2xTdGF0dXM6ZnVuY3Rpb24oKXt0aGlzLm93bD17dXNlck9wdGlvbnM6dGhpcy51c2VyT3B0aW9ucyxiYXNlRWxlbWVudDp0aGlzLiRlbGVtLHVzZXJJdGVtczp0aGlzLiR1c2VySXRlbXMsb3dsSXRlbXM6dGhpcy4kb3dsSXRlbXMsY3VycmVudEl0ZW06dGhpcy5jdXJyZW50SXRlbSxwcmV2SXRlbTp0aGlzLnByZXZJdGVtLHZpc2libGVJdGVtczp0aGlzLnZpc2libGVJdGVtcyxpc1RvdWNoOnRoaXMuYnJvd3Nlci5pc1RvdWNoLGJyb3dzZXI6dGhpcy5icm93c2VyLGRyYWdEaXJlY3Rpb246dGhpcy5kcmFnRGlyZWN0aW9ufX0sY2xlYXJFdmVudHM6ZnVuY3Rpb24oKXt0aGlzLiRlbGVtLm9mZihcIi5vd2wgb3dsIG1vdXNlZG93bi5kaXNhYmxlVGV4dFNlbGVjdFwiKTtcclxuZihrKS5vZmYoXCIub3dsIG93bFwiKTtmKGcpLm9mZihcInJlc2l6ZVwiLHRoaXMucmVzaXplcil9LHVuV3JhcDpmdW5jdGlvbigpezAhPT10aGlzLiRlbGVtLmNoaWxkcmVuKCkubGVuZ3RoJiYodGhpcy4kb3dsV3JhcHBlci51bndyYXAoKSx0aGlzLiR1c2VySXRlbXMudW53cmFwKCkudW53cmFwKCksdGhpcy5vd2xDb250cm9scyYmdGhpcy5vd2xDb250cm9scy5yZW1vdmUoKSk7dGhpcy5jbGVhckV2ZW50cygpO3RoaXMuJGVsZW0uYXR0cihcInN0eWxlXCIsdGhpcy4kZWxlbS5kYXRhKFwib3dsLW9yaWdpbmFsU3R5bGVzXCIpfHxcIlwiKS5hdHRyKFwiY2xhc3NcIix0aGlzLiRlbGVtLmRhdGEoXCJvd2wtb3JpZ2luYWxDbGFzc2VzXCIpKX0sZGVzdHJveTpmdW5jdGlvbigpe3RoaXMuc3RvcCgpO2cuY2xlYXJJbnRlcnZhbCh0aGlzLmNoZWNrVmlzaWJsZSk7dGhpcy51bldyYXAoKTt0aGlzLiRlbGVtLnJlbW92ZURhdGEoKX0scmVpbml0OmZ1bmN0aW9uKGEpe2E9Zi5leHRlbmQoe30sdGhpcy51c2VyT3B0aW9ucyxcclxuYSk7dGhpcy51bldyYXAoKTt0aGlzLmluaXQoYSx0aGlzLiRlbGVtKX0sYWRkSXRlbTpmdW5jdGlvbihhLGIpe3ZhciBlO2lmKCFhKXJldHVybiExO2lmKDA9PT10aGlzLiRlbGVtLmNoaWxkcmVuKCkubGVuZ3RoKXJldHVybiB0aGlzLiRlbGVtLmFwcGVuZChhKSx0aGlzLnNldFZhcnMoKSwhMTt0aGlzLnVuV3JhcCgpO2U9dm9pZCAwPT09Ynx8LTE9PT1iPy0xOmI7ZT49dGhpcy4kdXNlckl0ZW1zLmxlbmd0aHx8LTE9PT1lP3RoaXMuJHVzZXJJdGVtcy5lcSgtMSkuYWZ0ZXIoYSk6dGhpcy4kdXNlckl0ZW1zLmVxKGUpLmJlZm9yZShhKTt0aGlzLnNldFZhcnMoKX0scmVtb3ZlSXRlbTpmdW5jdGlvbihhKXtpZigwPT09dGhpcy4kZWxlbS5jaGlsZHJlbigpLmxlbmd0aClyZXR1cm4hMTthPXZvaWQgMD09PWF8fC0xPT09YT8tMTphO3RoaXMudW5XcmFwKCk7dGhpcy4kdXNlckl0ZW1zLmVxKGEpLnJlbW92ZSgpO3RoaXMuc2V0VmFycygpfX07Zi5mbi5vd2xDYXJvdXNlbD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7aWYoITA9PT1cclxuZih0aGlzKS5kYXRhKFwib3dsLWluaXRcIikpcmV0dXJuITE7Zih0aGlzKS5kYXRhKFwib3dsLWluaXRcIiwhMCk7dmFyIGI9T2JqZWN0LmNyZWF0ZShsKTtiLmluaXQoYSx0aGlzKTtmLmRhdGEodGhpcyxcIm93bENhcm91c2VsXCIsYil9KX07Zi5mbi5vd2xDYXJvdXNlbC5vcHRpb25zPXtpdGVtczo1LGl0ZW1zQ3VzdG9tOiExLGl0ZW1zRGVza3RvcDpbMTE5OSw0XSxpdGVtc0Rlc2t0b3BTbWFsbDpbOTc5LDNdLGl0ZW1zVGFibGV0Ols3NjgsMl0saXRlbXNUYWJsZXRTbWFsbDohMSxpdGVtc01vYmlsZTpbNDc5LDFdLHNpbmdsZUl0ZW06ITEsaXRlbXNTY2FsZVVwOiExLHNsaWRlU3BlZWQ6MjAwLHBhZ2luYXRpb25TcGVlZDo4MDAscmV3aW5kU3BlZWQ6MUUzLGF1dG9QbGF5OiExLHN0b3BPbkhvdmVyOiExLG5hdmlnYXRpb246ITEsbmF2aWdhdGlvblRleHQ6W1wicHJldlwiLFwibmV4dFwiXSxyZXdpbmROYXY6ITAsc2Nyb2xsUGVyUGFnZTohMSxwYWdpbmF0aW9uOiEwLHBhZ2luYXRpb25OdW1iZXJzOiExLFxyXG5yZXNwb25zaXZlOiEwLHJlc3BvbnNpdmVSZWZyZXNoUmF0ZToyMDAscmVzcG9uc2l2ZUJhc2VXaWR0aDpnLGJhc2VDbGFzczpcIm93bC1jYXJvdXNlbFwiLHRoZW1lOlwib3dsLXRoZW1lXCIsbGF6eUxvYWQ6ITEsbGF6eUZvbGxvdzohMCxsYXp5RWZmZWN0OlwiZmFkZVwiLGF1dG9IZWlnaHQ6ITEsanNvblBhdGg6ITEsanNvblN1Y2Nlc3M6ITEsZHJhZ0JlZm9yZUFuaW1GaW5pc2g6ITAsbW91c2VEcmFnOiEwLHRvdWNoRHJhZzohMCxhZGRDbGFzc0FjdGl2ZTohMSx0cmFuc2l0aW9uU3R5bGU6ITEsYmVmb3JlVXBkYXRlOiExLGFmdGVyVXBkYXRlOiExLGJlZm9yZUluaXQ6ITEsYWZ0ZXJJbml0OiExLGJlZm9yZU1vdmU6ITEsYWZ0ZXJNb3ZlOiExLGFmdGVyQWN0aW9uOiExLHN0YXJ0RHJhZ2dpbmc6ITEsYWZ0ZXJMYXp5TG9hZDohMX19KShqUXVlcnksd2luZG93LGRvY3VtZW50KTtcclxuIiwibW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgICBcImxvYWRqUXVlcnlQbHVnaW5cIjogZnVuY3Rpb24oKSB7cmVxdWlyZShcIi4vb3dsLmNhcm91c2VsLm1pbi5qc1wiKTt9XHJcbn07XHJcbiIsImltcG9ydCAqIGFzIGJhc2UgZnJvbSAnLi9oYW5kbGViYXJzL2Jhc2UnO1xuXG4vLyBFYWNoIG9mIHRoZXNlIGF1Z21lbnQgdGhlIEhhbmRsZWJhcnMgb2JqZWN0LiBObyBuZWVkIHRvIHNldHVwIGhlcmUuXG4vLyAoVGhpcyBpcyBkb25lIHRvIGVhc2lseSBzaGFyZSBjb2RlIGJldHdlZW4gY29tbW9uanMgYW5kIGJyb3dzZSBlbnZzKVxuaW1wb3J0IFNhZmVTdHJpbmcgZnJvbSAnLi9oYW5kbGViYXJzL3NhZmUtc3RyaW5nJztcbmltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi9oYW5kbGViYXJzL2V4Y2VwdGlvbic7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuL2hhbmRsZWJhcnMvdXRpbHMnO1xuaW1wb3J0ICogYXMgcnVudGltZSBmcm9tICcuL2hhbmRsZWJhcnMvcnVudGltZSc7XG5cbmltcG9ydCBub0NvbmZsaWN0IGZyb20gJy4vaGFuZGxlYmFycy9uby1jb25mbGljdCc7XG5cbi8vIEZvciBjb21wYXRpYmlsaXR5IGFuZCB1c2FnZSBvdXRzaWRlIG9mIG1vZHVsZSBzeXN0ZW1zLCBtYWtlIHRoZSBIYW5kbGViYXJzIG9iamVjdCBhIG5hbWVzcGFjZVxuZnVuY3Rpb24gY3JlYXRlKCkge1xuICBsZXQgaGIgPSBuZXcgYmFzZS5IYW5kbGViYXJzRW52aXJvbm1lbnQoKTtcblxuICBVdGlscy5leHRlbmQoaGIsIGJhc2UpO1xuICBoYi5TYWZlU3RyaW5nID0gU2FmZVN0cmluZztcbiAgaGIuRXhjZXB0aW9uID0gRXhjZXB0aW9uO1xuICBoYi5VdGlscyA9IFV0aWxzO1xuICBoYi5lc2NhcGVFeHByZXNzaW9uID0gVXRpbHMuZXNjYXBlRXhwcmVzc2lvbjtcblxuICBoYi5WTSA9IHJ1bnRpbWU7XG4gIGhiLnRlbXBsYXRlID0gZnVuY3Rpb24oc3BlYykge1xuICAgIHJldHVybiBydW50aW1lLnRlbXBsYXRlKHNwZWMsIGhiKTtcbiAgfTtcblxuICByZXR1cm4gaGI7XG59XG5cbmxldCBpbnN0ID0gY3JlYXRlKCk7XG5pbnN0LmNyZWF0ZSA9IGNyZWF0ZTtcblxubm9Db25mbGljdChpbnN0KTtcblxuaW5zdFsnZGVmYXVsdCddID0gaW5zdDtcblxuZXhwb3J0IGRlZmF1bHQgaW5zdDtcbiIsImltcG9ydCB7Y3JlYXRlRnJhbWUsIGV4dGVuZCwgdG9TdHJpbmd9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuL2V4Y2VwdGlvbic7XG5pbXBvcnQge3JlZ2lzdGVyRGVmYXVsdEhlbHBlcnN9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQge3JlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnN9IGZyb20gJy4vZGVjb3JhdG9ycyc7XG5pbXBvcnQgbG9nZ2VyIGZyb20gJy4vbG9nZ2VyJztcblxuZXhwb3J0IGNvbnN0IFZFUlNJT04gPSAnNC4wLjUnO1xuZXhwb3J0IGNvbnN0IENPTVBJTEVSX1JFVklTSU9OID0gNztcblxuZXhwb3J0IGNvbnN0IFJFVklTSU9OX0NIQU5HRVMgPSB7XG4gIDE6ICc8PSAxLjAucmMuMicsIC8vIDEuMC5yYy4yIGlzIGFjdHVhbGx5IHJldjIgYnV0IGRvZXNuJ3QgcmVwb3J0IGl0XG4gIDI6ICc9PSAxLjAuMC1yYy4zJyxcbiAgMzogJz09IDEuMC4wLXJjLjQnLFxuICA0OiAnPT0gMS54LngnLFxuICA1OiAnPT0gMi4wLjAtYWxwaGEueCcsXG4gIDY6ICc+PSAyLjAuMC1iZXRhLjEnLFxuICA3OiAnPj0gNC4wLjAnXG59O1xuXG5jb25zdCBvYmplY3RUeXBlID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBIYW5kbGViYXJzRW52aXJvbm1lbnQoaGVscGVycywgcGFydGlhbHMsIGRlY29yYXRvcnMpIHtcbiAgdGhpcy5oZWxwZXJzID0gaGVscGVycyB8fCB7fTtcbiAgdGhpcy5wYXJ0aWFscyA9IHBhcnRpYWxzIHx8IHt9O1xuICB0aGlzLmRlY29yYXRvcnMgPSBkZWNvcmF0b3JzIHx8IHt9O1xuXG4gIHJlZ2lzdGVyRGVmYXVsdEhlbHBlcnModGhpcyk7XG4gIHJlZ2lzdGVyRGVmYXVsdERlY29yYXRvcnModGhpcyk7XG59XG5cbkhhbmRsZWJhcnNFbnZpcm9ubWVudC5wcm90b3R5cGUgPSB7XG4gIGNvbnN0cnVjdG9yOiBIYW5kbGViYXJzRW52aXJvbm1lbnQsXG5cbiAgbG9nZ2VyOiBsb2dnZXIsXG4gIGxvZzogbG9nZ2VyLmxvZyxcblxuICByZWdpc3RlckhlbHBlcjogZnVuY3Rpb24obmFtZSwgZm4pIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgaWYgKGZuKSB7IHRocm93IG5ldyBFeGNlcHRpb24oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgaGVscGVycycpOyB9XG4gICAgICBleHRlbmQodGhpcy5oZWxwZXJzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oZWxwZXJzW25hbWVdID0gZm47XG4gICAgfVxuICB9LFxuICB1bnJlZ2lzdGVySGVscGVyOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMuaGVscGVyc1tuYW1lXTtcbiAgfSxcblxuICByZWdpc3RlclBhcnRpYWw6IGZ1bmN0aW9uKG5hbWUsIHBhcnRpYWwpIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgZXh0ZW5kKHRoaXMucGFydGlhbHMsIG5hbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIHBhcnRpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oYEF0dGVtcHRpbmcgdG8gcmVnaXN0ZXIgYSBwYXJ0aWFsIGNhbGxlZCBcIiR7bmFtZX1cIiBhcyB1bmRlZmluZWRgKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGFydGlhbHNbbmFtZV0gPSBwYXJ0aWFsO1xuICAgIH1cbiAgfSxcbiAgdW5yZWdpc3RlclBhcnRpYWw6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5wYXJ0aWFsc1tuYW1lXTtcbiAgfSxcblxuICByZWdpc3RlckRlY29yYXRvcjogZnVuY3Rpb24obmFtZSwgZm4pIHtcbiAgICBpZiAodG9TdHJpbmcuY2FsbChuYW1lKSA9PT0gb2JqZWN0VHlwZSkge1xuICAgICAgaWYgKGZuKSB7IHRocm93IG5ldyBFeGNlcHRpb24oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgZGVjb3JhdG9ycycpOyB9XG4gICAgICBleHRlbmQodGhpcy5kZWNvcmF0b3JzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kZWNvcmF0b3JzW25hbWVdID0gZm47XG4gICAgfVxuICB9LFxuICB1bnJlZ2lzdGVyRGVjb3JhdG9yOiBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMuZGVjb3JhdG9yc1tuYW1lXTtcbiAgfVxufTtcblxuZXhwb3J0IGxldCBsb2cgPSBsb2dnZXIubG9nO1xuXG5leHBvcnQge2NyZWF0ZUZyYW1lLCBsb2dnZXJ9O1xuIiwiaW1wb3J0IHJlZ2lzdGVySW5saW5lIGZyb20gJy4vZGVjb3JhdG9ycy9pbmxpbmUnO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVnaXN0ZXJEZWZhdWx0RGVjb3JhdG9ycyhpbnN0YW5jZSkge1xuICByZWdpc3RlcklubGluZShpbnN0YW5jZSk7XG59XG5cbiIsImltcG9ydCB7ZXh0ZW5kfSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVyRGVjb3JhdG9yKCdpbmxpbmUnLCBmdW5jdGlvbihmbiwgcHJvcHMsIGNvbnRhaW5lciwgb3B0aW9ucykge1xuICAgIGxldCByZXQgPSBmbjtcbiAgICBpZiAoIXByb3BzLnBhcnRpYWxzKSB7XG4gICAgICBwcm9wcy5wYXJ0aWFscyA9IHt9O1xuICAgICAgcmV0ID0gZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgICAgICAvLyBDcmVhdGUgYSBuZXcgcGFydGlhbHMgc3RhY2sgZnJhbWUgcHJpb3IgdG8gZXhlYy5cbiAgICAgICAgbGV0IG9yaWdpbmFsID0gY29udGFpbmVyLnBhcnRpYWxzO1xuICAgICAgICBjb250YWluZXIucGFydGlhbHMgPSBleHRlbmQoe30sIG9yaWdpbmFsLCBwcm9wcy5wYXJ0aWFscyk7XG4gICAgICAgIGxldCByZXQgPSBmbihjb250ZXh0LCBvcHRpb25zKTtcbiAgICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gb3JpZ2luYWw7XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHByb3BzLnBhcnRpYWxzW29wdGlvbnMuYXJnc1swXV0gPSBvcHRpb25zLmZuO1xuXG4gICAgcmV0dXJuIHJldDtcbiAgfSk7XG59XG4iLCJcbmNvbnN0IGVycm9yUHJvcHMgPSBbJ2Rlc2NyaXB0aW9uJywgJ2ZpbGVOYW1lJywgJ2xpbmVOdW1iZXInLCAnbWVzc2FnZScsICduYW1lJywgJ251bWJlcicsICdzdGFjayddO1xuXG5mdW5jdGlvbiBFeGNlcHRpb24obWVzc2FnZSwgbm9kZSkge1xuICBsZXQgbG9jID0gbm9kZSAmJiBub2RlLmxvYyxcbiAgICAgIGxpbmUsXG4gICAgICBjb2x1bW47XG4gIGlmIChsb2MpIHtcbiAgICBsaW5lID0gbG9jLnN0YXJ0LmxpbmU7XG4gICAgY29sdW1uID0gbG9jLnN0YXJ0LmNvbHVtbjtcblxuICAgIG1lc3NhZ2UgKz0gJyAtICcgKyBsaW5lICsgJzonICsgY29sdW1uO1xuICB9XG5cbiAgbGV0IHRtcCA9IEVycm9yLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5jYWxsKHRoaXMsIG1lc3NhZ2UpO1xuXG4gIC8vIFVuZm9ydHVuYXRlbHkgZXJyb3JzIGFyZSBub3QgZW51bWVyYWJsZSBpbiBDaHJvbWUgKGF0IGxlYXN0KSwgc28gYGZvciBwcm9wIGluIHRtcGAgZG9lc24ndCB3b3JrLlxuICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBlcnJvclByb3BzLmxlbmd0aDsgaWR4KyspIHtcbiAgICB0aGlzW2Vycm9yUHJvcHNbaWR4XV0gPSB0bXBbZXJyb3JQcm9wc1tpZHhdXTtcbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEV4Y2VwdGlvbik7XG4gIH1cblxuICBpZiAobG9jKSB7XG4gICAgdGhpcy5saW5lTnVtYmVyID0gbGluZTtcbiAgICB0aGlzLmNvbHVtbiA9IGNvbHVtbjtcbiAgfVxufVxuXG5FeGNlcHRpb24ucHJvdG90eXBlID0gbmV3IEVycm9yKCk7XG5cbmV4cG9ydCBkZWZhdWx0IEV4Y2VwdGlvbjtcbiIsImltcG9ydCByZWdpc3RlckJsb2NrSGVscGVyTWlzc2luZyBmcm9tICcuL2hlbHBlcnMvYmxvY2staGVscGVyLW1pc3NpbmcnO1xuaW1wb3J0IHJlZ2lzdGVyRWFjaCBmcm9tICcuL2hlbHBlcnMvZWFjaCc7XG5pbXBvcnQgcmVnaXN0ZXJIZWxwZXJNaXNzaW5nIGZyb20gJy4vaGVscGVycy9oZWxwZXItbWlzc2luZyc7XG5pbXBvcnQgcmVnaXN0ZXJJZiBmcm9tICcuL2hlbHBlcnMvaWYnO1xuaW1wb3J0IHJlZ2lzdGVyTG9nIGZyb20gJy4vaGVscGVycy9sb2cnO1xuaW1wb3J0IHJlZ2lzdGVyTG9va3VwIGZyb20gJy4vaGVscGVycy9sb29rdXAnO1xuaW1wb3J0IHJlZ2lzdGVyV2l0aCBmcm9tICcuL2hlbHBlcnMvd2l0aCc7XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckRlZmF1bHRIZWxwZXJzKGluc3RhbmNlKSB7XG4gIHJlZ2lzdGVyQmxvY2tIZWxwZXJNaXNzaW5nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJFYWNoKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJIZWxwZXJNaXNzaW5nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJJZihpbnN0YW5jZSk7XG4gIHJlZ2lzdGVyTG9nKGluc3RhbmNlKTtcbiAgcmVnaXN0ZXJMb29rdXAoaW5zdGFuY2UpO1xuICByZWdpc3RlcldpdGgoaW5zdGFuY2UpO1xufVxuIiwiaW1wb3J0IHthcHBlbmRDb250ZXh0UGF0aCwgY3JlYXRlRnJhbWUsIGlzQXJyYXl9IGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2Jsb2NrSGVscGVyTWlzc2luZycsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBsZXQgaW52ZXJzZSA9IG9wdGlvbnMuaW52ZXJzZSxcbiAgICAgICAgZm4gPSBvcHRpb25zLmZuO1xuXG4gICAgaWYgKGNvbnRleHQgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBmbih0aGlzKTtcbiAgICB9IGVsc2UgaWYgKGNvbnRleHQgPT09IGZhbHNlIHx8IGNvbnRleHQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGludmVyc2UodGhpcyk7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KGNvbnRleHQpKSB7XG4gICAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmlkcykge1xuICAgICAgICAgIG9wdGlvbnMuaWRzID0gW29wdGlvbnMubmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaW5zdGFuY2UuaGVscGVycy5lYWNoKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGludmVyc2UodGhpcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5pZHMpIHtcbiAgICAgICAgbGV0IGRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgICAgICBkYXRhLmNvbnRleHRQYXRoID0gYXBwZW5kQ29udGV4dFBhdGgob3B0aW9ucy5kYXRhLmNvbnRleHRQYXRoLCBvcHRpb25zLm5hbWUpO1xuICAgICAgICBvcHRpb25zID0ge2RhdGE6IGRhdGF9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm4oY29udGV4dCwgb3B0aW9ucyk7XG4gICAgfVxuICB9KTtcbn1cbiIsImltcG9ydCB7YXBwZW5kQ29udGV4dFBhdGgsIGJsb2NrUGFyYW1zLCBjcmVhdGVGcmFtZSwgaXNBcnJheSwgaXNGdW5jdGlvbn0gZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IEV4Y2VwdGlvbiBmcm9tICcuLi9leGNlcHRpb24nO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihpbnN0YW5jZSkge1xuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignZWFjaCcsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ011c3QgcGFzcyBpdGVyYXRvciB0byAjZWFjaCcpO1xuICAgIH1cblxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm4sXG4gICAgICAgIGludmVyc2UgPSBvcHRpb25zLmludmVyc2UsXG4gICAgICAgIGkgPSAwLFxuICAgICAgICByZXQgPSAnJyxcbiAgICAgICAgZGF0YSxcbiAgICAgICAgY29udGV4dFBhdGg7XG5cbiAgICBpZiAob3B0aW9ucy5kYXRhICYmIG9wdGlvbnMuaWRzKSB7XG4gICAgICBjb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5pZHNbMF0pICsgJy4nO1xuICAgIH1cblxuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQpKSB7IGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7IH1cblxuICAgIGlmIChvcHRpb25zLmRhdGEpIHtcbiAgICAgIGRhdGEgPSBjcmVhdGVGcmFtZShvcHRpb25zLmRhdGEpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV4ZWNJdGVyYXRpb24oZmllbGQsIGluZGV4LCBsYXN0KSB7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICBkYXRhLmtleSA9IGZpZWxkO1xuICAgICAgICBkYXRhLmluZGV4ID0gaW5kZXg7XG4gICAgICAgIGRhdGEuZmlyc3QgPSBpbmRleCA9PT0gMDtcbiAgICAgICAgZGF0YS5sYXN0ID0gISFsYXN0O1xuXG4gICAgICAgIGlmIChjb250ZXh0UGF0aCkge1xuICAgICAgICAgIGRhdGEuY29udGV4dFBhdGggPSBjb250ZXh0UGF0aCArIGZpZWxkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldCA9IHJldCArIGZuKGNvbnRleHRbZmllbGRdLCB7XG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIGJsb2NrUGFyYW1zOiBibG9ja1BhcmFtcyhbY29udGV4dFtmaWVsZF0sIGZpZWxkXSwgW2NvbnRleHRQYXRoICsgZmllbGQsIG51bGxdKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQgPT09ICdvYmplY3QnKSB7XG4gICAgICBpZiAoaXNBcnJheShjb250ZXh0KSkge1xuICAgICAgICBmb3IgKGxldCBqID0gY29udGV4dC5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICBpZiAoaSBpbiBjb250ZXh0KSB7XG4gICAgICAgICAgICBleGVjSXRlcmF0aW9uKGksIGksIGkgPT09IGNvbnRleHQubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgcHJpb3JLZXk7XG5cbiAgICAgICAgZm9yIChsZXQga2V5IGluIGNvbnRleHQpIHtcbiAgICAgICAgICBpZiAoY29udGV4dC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAvLyBXZSdyZSBydW5uaW5nIHRoZSBpdGVyYXRpb25zIG9uZSBzdGVwIG91dCBvZiBzeW5jIHNvIHdlIGNhbiBkZXRlY3RcbiAgICAgICAgICAgIC8vIHRoZSBsYXN0IGl0ZXJhdGlvbiB3aXRob3V0IGhhdmUgdG8gc2NhbiB0aGUgb2JqZWN0IHR3aWNlIGFuZCBjcmVhdGVcbiAgICAgICAgICAgIC8vIGFuIGl0ZXJtZWRpYXRlIGtleXMgYXJyYXkuXG4gICAgICAgICAgICBpZiAocHJpb3JLZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICBleGVjSXRlcmF0aW9uKHByaW9yS2V5LCBpIC0gMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmlvcktleSA9IGtleTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByaW9yS2V5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBleGVjSXRlcmF0aW9uKHByaW9yS2V5LCBpIC0gMSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgcmV0ID0gaW52ZXJzZSh0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmV0O1xuICB9KTtcbn1cbiIsImltcG9ydCBFeGNlcHRpb24gZnJvbSAnLi4vZXhjZXB0aW9uJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2hlbHBlck1pc3NpbmcnLCBmdW5jdGlvbigvKiBbYXJncywgXW9wdGlvbnMgKi8pIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gQSBtaXNzaW5nIGZpZWxkIGluIGEge3tmb299fSBjb25zdHJ1Y3QuXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTb21lb25lIGlzIGFjdHVhbGx5IHRyeWluZyB0byBjYWxsIHNvbWV0aGluZywgYmxvdyB1cC5cbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ01pc3NpbmcgaGVscGVyOiBcIicgKyBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdLm5hbWUgKyAnXCInKTtcbiAgICB9XG4gIH0pO1xufVxuIiwiaW1wb3J0IHtpc0VtcHR5LCBpc0Z1bmN0aW9ufSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdpZicsIGZ1bmN0aW9uKGNvbmRpdGlvbmFsLCBvcHRpb25zKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oY29uZGl0aW9uYWwpKSB7IGNvbmRpdGlvbmFsID0gY29uZGl0aW9uYWwuY2FsbCh0aGlzKTsgfVxuXG4gICAgLy8gRGVmYXVsdCBiZWhhdmlvciBpcyB0byByZW5kZXIgdGhlIHBvc2l0aXZlIHBhdGggaWYgdGhlIHZhbHVlIGlzIHRydXRoeSBhbmQgbm90IGVtcHR5LlxuICAgIC8vIFRoZSBgaW5jbHVkZVplcm9gIG9wdGlvbiBtYXkgYmUgc2V0IHRvIHRyZWF0IHRoZSBjb25kdGlvbmFsIGFzIHB1cmVseSBub3QgZW1wdHkgYmFzZWQgb24gdGhlXG4gICAgLy8gYmVoYXZpb3Igb2YgaXNFbXB0eS4gRWZmZWN0aXZlbHkgdGhpcyBkZXRlcm1pbmVzIGlmIDAgaXMgaGFuZGxlZCBieSB0aGUgcG9zaXRpdmUgcGF0aCBvciBuZWdhdGl2ZS5cbiAgICBpZiAoKCFvcHRpb25zLmhhc2guaW5jbHVkZVplcm8gJiYgIWNvbmRpdGlvbmFsKSB8fCBpc0VtcHR5KGNvbmRpdGlvbmFsKSkge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XG4gICAgfVxuICB9KTtcblxuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcigndW5sZXNzJywgZnVuY3Rpb24oY29uZGl0aW9uYWwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gaW5zdGFuY2UuaGVscGVyc1snaWYnXS5jYWxsKHRoaXMsIGNvbmRpdGlvbmFsLCB7Zm46IG9wdGlvbnMuaW52ZXJzZSwgaW52ZXJzZTogb3B0aW9ucy5mbiwgaGFzaDogb3B0aW9ucy5oYXNofSk7XG4gIH0pO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvZycsIGZ1bmN0aW9uKC8qIG1lc3NhZ2UsIG9wdGlvbnMgKi8pIHtcbiAgICBsZXQgYXJncyA9IFt1bmRlZmluZWRdLFxuICAgICAgICBvcHRpb25zID0gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGFyZ3MucHVzaChhcmd1bWVudHNbaV0pO1xuICAgIH1cblxuICAgIGxldCBsZXZlbCA9IDE7XG4gICAgaWYgKG9wdGlvbnMuaGFzaC5sZXZlbCAhPSBudWxsKSB7XG4gICAgICBsZXZlbCA9IG9wdGlvbnMuaGFzaC5sZXZlbDtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmRhdGEubGV2ZWwgIT0gbnVsbCkge1xuICAgICAgbGV2ZWwgPSBvcHRpb25zLmRhdGEubGV2ZWw7XG4gICAgfVxuICAgIGFyZ3NbMF0gPSBsZXZlbDtcblxuICAgIGluc3RhbmNlLmxvZyguLi4gYXJncyk7XG4gIH0pO1xufVxuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvb2t1cCcsIGZ1bmN0aW9uKG9iaiwgZmllbGQpIHtcbiAgICByZXR1cm4gb2JqICYmIG9ialtmaWVsZF07XG4gIH0pO1xufVxuIiwiaW1wb3J0IHthcHBlbmRDb250ZXh0UGF0aCwgYmxvY2tQYXJhbXMsIGNyZWF0ZUZyYW1lLCBpc0VtcHR5LCBpc0Z1bmN0aW9ufSBmcm9tICcuLi91dGlscyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCd3aXRoJywgZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQpKSB7IGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7IH1cblxuICAgIGxldCBmbiA9IG9wdGlvbnMuZm47XG5cbiAgICBpZiAoIWlzRW1wdHkoY29udGV4dCkpIHtcbiAgICAgIGxldCBkYXRhID0gb3B0aW9ucy5kYXRhO1xuICAgICAgaWYgKG9wdGlvbnMuZGF0YSAmJiBvcHRpb25zLmlkcykge1xuICAgICAgICBkYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICAgICAgZGF0YS5jb250ZXh0UGF0aCA9IGFwcGVuZENvbnRleHRQYXRoKG9wdGlvbnMuZGF0YS5jb250ZXh0UGF0aCwgb3B0aW9ucy5pZHNbMF0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm4oY29udGV4dCwge1xuICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICBibG9ja1BhcmFtczogYmxvY2tQYXJhbXMoW2NvbnRleHRdLCBbZGF0YSAmJiBkYXRhLmNvbnRleHRQYXRoXSlcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xuICAgIH1cbiAgfSk7XG59XG4iLCJpbXBvcnQge2luZGV4T2Z9IGZyb20gJy4vdXRpbHMnO1xuXG5sZXQgbG9nZ2VyID0ge1xuICBtZXRob2RNYXA6IFsnZGVidWcnLCAnaW5mbycsICd3YXJuJywgJ2Vycm9yJ10sXG4gIGxldmVsOiAnaW5mbycsXG5cbiAgLy8gTWFwcyBhIGdpdmVuIGxldmVsIHZhbHVlIHRvIHRoZSBgbWV0aG9kTWFwYCBpbmRleGVzIGFib3ZlLlxuICBsb29rdXBMZXZlbDogZnVuY3Rpb24obGV2ZWwpIHtcbiAgICBpZiAodHlwZW9mIGxldmVsID09PSAnc3RyaW5nJykge1xuICAgICAgbGV0IGxldmVsTWFwID0gaW5kZXhPZihsb2dnZXIubWV0aG9kTWFwLCBsZXZlbC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgIGlmIChsZXZlbE1hcCA+PSAwKSB7XG4gICAgICAgIGxldmVsID0gbGV2ZWxNYXA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXZlbCA9IHBhcnNlSW50KGxldmVsLCAxMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGxldmVsO1xuICB9LFxuXG4gIC8vIENhbiBiZSBvdmVycmlkZGVuIGluIHRoZSBob3N0IGVudmlyb25tZW50XG4gIGxvZzogZnVuY3Rpb24obGV2ZWwsIC4uLm1lc3NhZ2UpIHtcbiAgICBsZXZlbCA9IGxvZ2dlci5sb29rdXBMZXZlbChsZXZlbCk7XG5cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGxvZ2dlci5sb29rdXBMZXZlbChsb2dnZXIubGV2ZWwpIDw9IGxldmVsKSB7XG4gICAgICBsZXQgbWV0aG9kID0gbG9nZ2VyLm1ldGhvZE1hcFtsZXZlbF07XG4gICAgICBpZiAoIWNvbnNvbGVbbWV0aG9kXSkgeyAgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZVxuICAgICAgICBtZXRob2QgPSAnbG9nJztcbiAgICAgIH1cbiAgICAgIGNvbnNvbGVbbWV0aG9kXSguLi5tZXNzYWdlKTsgICAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBsb2dnZXI7XG4iLCIvKiBnbG9iYWwgd2luZG93ICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihIYW5kbGViYXJzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIGxldCByb290ID0gdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB3aW5kb3csXG4gICAgICAkSGFuZGxlYmFycyA9IHJvb3QuSGFuZGxlYmFycztcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgSGFuZGxlYmFycy5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHJvb3QuSGFuZGxlYmFycyA9PT0gSGFuZGxlYmFycykge1xuICAgICAgcm9vdC5IYW5kbGViYXJzID0gJEhhbmRsZWJhcnM7XG4gICAgfVxuICAgIHJldHVybiBIYW5kbGViYXJzO1xuICB9O1xufVxuIiwiaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgRXhjZXB0aW9uIGZyb20gJy4vZXhjZXB0aW9uJztcbmltcG9ydCB7IENPTVBJTEVSX1JFVklTSU9OLCBSRVZJU0lPTl9DSEFOR0VTLCBjcmVhdGVGcmFtZSB9IGZyb20gJy4vYmFzZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1JldmlzaW9uKGNvbXBpbGVySW5mbykge1xuICBjb25zdCBjb21waWxlclJldmlzaW9uID0gY29tcGlsZXJJbmZvICYmIGNvbXBpbGVySW5mb1swXSB8fCAxLFxuICAgICAgICBjdXJyZW50UmV2aXNpb24gPSBDT01QSUxFUl9SRVZJU0lPTjtcblxuICBpZiAoY29tcGlsZXJSZXZpc2lvbiAhPT0gY3VycmVudFJldmlzaW9uKSB7XG4gICAgaWYgKGNvbXBpbGVyUmV2aXNpb24gPCBjdXJyZW50UmV2aXNpb24pIHtcbiAgICAgIGNvbnN0IHJ1bnRpbWVWZXJzaW9ucyA9IFJFVklTSU9OX0NIQU5HRVNbY3VycmVudFJldmlzaW9uXSxcbiAgICAgICAgICAgIGNvbXBpbGVyVmVyc2lvbnMgPSBSRVZJU0lPTl9DSEFOR0VTW2NvbXBpbGVyUmV2aXNpb25dO1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGVtcGxhdGUgd2FzIHByZWNvbXBpbGVkIHdpdGggYW4gb2xkZXIgdmVyc2lvbiBvZiBIYW5kbGViYXJzIHRoYW4gdGhlIGN1cnJlbnQgcnVudGltZS4gJyArXG4gICAgICAgICAgICAnUGxlYXNlIHVwZGF0ZSB5b3VyIHByZWNvbXBpbGVyIHRvIGEgbmV3ZXIgdmVyc2lvbiAoJyArIHJ1bnRpbWVWZXJzaW9ucyArICcpIG9yIGRvd25ncmFkZSB5b3VyIHJ1bnRpbWUgdG8gYW4gb2xkZXIgdmVyc2lvbiAoJyArIGNvbXBpbGVyVmVyc2lvbnMgKyAnKS4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIHRoZSBlbWJlZGRlZCB2ZXJzaW9uIGluZm8gc2luY2UgdGhlIHJ1bnRpbWUgZG9lc24ndCBrbm93IGFib3V0IHRoaXMgcmV2aXNpb24geWV0XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdUZW1wbGF0ZSB3YXMgcHJlY29tcGlsZWQgd2l0aCBhIG5ld2VyIHZlcnNpb24gb2YgSGFuZGxlYmFycyB0aGFuIHRoZSBjdXJyZW50IHJ1bnRpbWUuICcgK1xuICAgICAgICAgICAgJ1BsZWFzZSB1cGRhdGUgeW91ciBydW50aW1lIHRvIGEgbmV3ZXIgdmVyc2lvbiAoJyArIGNvbXBpbGVySW5mb1sxXSArICcpLicpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGUodGVtcGxhdGVTcGVjLCBlbnYpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKCFlbnYpIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdObyBlbnZpcm9ubWVudCBwYXNzZWQgdG8gdGVtcGxhdGUnKTtcbiAgfVxuICBpZiAoIXRlbXBsYXRlU3BlYyB8fCAhdGVtcGxhdGVTcGVjLm1haW4pIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdVbmtub3duIHRlbXBsYXRlIG9iamVjdDogJyArIHR5cGVvZiB0ZW1wbGF0ZVNwZWMpO1xuICB9XG5cbiAgdGVtcGxhdGVTcGVjLm1haW4uZGVjb3JhdG9yID0gdGVtcGxhdGVTcGVjLm1haW5fZDtcblxuICAvLyBOb3RlOiBVc2luZyBlbnYuVk0gcmVmZXJlbmNlcyByYXRoZXIgdGhhbiBsb2NhbCB2YXIgcmVmZXJlbmNlcyB0aHJvdWdob3V0IHRoaXMgc2VjdGlvbiB0byBhbGxvd1xuICAvLyBmb3IgZXh0ZXJuYWwgdXNlcnMgdG8gb3ZlcnJpZGUgdGhlc2UgYXMgcHN1ZWRvLXN1cHBvcnRlZCBBUElzLlxuICBlbnYuVk0uY2hlY2tSZXZpc2lvbih0ZW1wbGF0ZVNwZWMuY29tcGlsZXIpO1xuXG4gIGZ1bmN0aW9uIGludm9rZVBhcnRpYWxXcmFwcGVyKHBhcnRpYWwsIGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5oYXNoKSB7XG4gICAgICBjb250ZXh0ID0gVXRpbHMuZXh0ZW5kKHt9LCBjb250ZXh0LCBvcHRpb25zLmhhc2gpO1xuICAgICAgaWYgKG9wdGlvbnMuaWRzKSB7XG4gICAgICAgIG9wdGlvbnMuaWRzWzBdID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYXJ0aWFsID0gZW52LlZNLnJlc29sdmVQYXJ0aWFsLmNhbGwodGhpcywgcGFydGlhbCwgY29udGV4dCwgb3B0aW9ucyk7XG4gICAgbGV0IHJlc3VsdCA9IGVudi5WTS5pbnZva2VQYXJ0aWFsLmNhbGwodGhpcywgcGFydGlhbCwgY29udGV4dCwgb3B0aW9ucyk7XG5cbiAgICBpZiAocmVzdWx0ID09IG51bGwgJiYgZW52LmNvbXBpbGUpIHtcbiAgICAgIG9wdGlvbnMucGFydGlhbHNbb3B0aW9ucy5uYW1lXSA9IGVudi5jb21waWxlKHBhcnRpYWwsIHRlbXBsYXRlU3BlYy5jb21waWxlck9wdGlvbnMsIGVudik7XG4gICAgICByZXN1bHQgPSBvcHRpb25zLnBhcnRpYWxzW29wdGlvbnMubmFtZV0oY29udGV4dCwgb3B0aW9ucyk7XG4gICAgfVxuICAgIGlmIChyZXN1bHQgIT0gbnVsbCkge1xuICAgICAgaWYgKG9wdGlvbnMuaW5kZW50KSB7XG4gICAgICAgIGxldCBsaW5lcyA9IHJlc3VsdC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBsID0gbGluZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCFsaW5lc1tpXSAmJiBpICsgMSA9PT0gbCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGluZXNbaV0gPSBvcHRpb25zLmluZGVudCArIGxpbmVzW2ldO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IGxpbmVzLmpvaW4oJ1xcbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbignVGhlIHBhcnRpYWwgJyArIG9wdGlvbnMubmFtZSArICcgY291bGQgbm90IGJlIGNvbXBpbGVkIHdoZW4gcnVubmluZyBpbiBydW50aW1lLW9ubHkgbW9kZScpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEp1c3QgYWRkIHdhdGVyXG4gIGxldCBjb250YWluZXIgPSB7XG4gICAgc3RyaWN0OiBmdW5jdGlvbihvYmosIG5hbWUpIHtcbiAgICAgIGlmICghKG5hbWUgaW4gb2JqKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdcIicgKyBuYW1lICsgJ1wiIG5vdCBkZWZpbmVkIGluICcgKyBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9ialtuYW1lXTtcbiAgICB9LFxuICAgIGxvb2t1cDogZnVuY3Rpb24oZGVwdGhzLCBuYW1lKSB7XG4gICAgICBjb25zdCBsZW4gPSBkZXB0aHMubGVuZ3RoO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBpZiAoZGVwdGhzW2ldICYmIGRlcHRoc1tpXVtuYW1lXSAhPSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGRlcHRoc1tpXVtuYW1lXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgbGFtYmRhOiBmdW5jdGlvbihjdXJyZW50LCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGN1cnJlbnQgPT09ICdmdW5jdGlvbicgPyBjdXJyZW50LmNhbGwoY29udGV4dCkgOiBjdXJyZW50O1xuICAgIH0sXG5cbiAgICBlc2NhcGVFeHByZXNzaW9uOiBVdGlscy5lc2NhcGVFeHByZXNzaW9uLFxuICAgIGludm9rZVBhcnRpYWw6IGludm9rZVBhcnRpYWxXcmFwcGVyLFxuXG4gICAgZm46IGZ1bmN0aW9uKGkpIHtcbiAgICAgIGxldCByZXQgPSB0ZW1wbGF0ZVNwZWNbaV07XG4gICAgICByZXQuZGVjb3JhdG9yID0gdGVtcGxhdGVTcGVjW2kgKyAnX2QnXTtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcblxuICAgIHByb2dyYW1zOiBbXSxcbiAgICBwcm9ncmFtOiBmdW5jdGlvbihpLCBkYXRhLCBkZWNsYXJlZEJsb2NrUGFyYW1zLCBibG9ja1BhcmFtcywgZGVwdGhzKSB7XG4gICAgICBsZXQgcHJvZ3JhbVdyYXBwZXIgPSB0aGlzLnByb2dyYW1zW2ldLFxuICAgICAgICAgIGZuID0gdGhpcy5mbihpKTtcbiAgICAgIGlmIChkYXRhIHx8IGRlcHRocyB8fCBibG9ja1BhcmFtcyB8fCBkZWNsYXJlZEJsb2NrUGFyYW1zKSB7XG4gICAgICAgIHByb2dyYW1XcmFwcGVyID0gd3JhcFByb2dyYW0odGhpcywgaSwgZm4sIGRhdGEsIGRlY2xhcmVkQmxvY2tQYXJhbXMsIGJsb2NrUGFyYW1zLCBkZXB0aHMpO1xuICAgICAgfSBlbHNlIGlmICghcHJvZ3JhbVdyYXBwZXIpIHtcbiAgICAgICAgcHJvZ3JhbVdyYXBwZXIgPSB0aGlzLnByb2dyYW1zW2ldID0gd3JhcFByb2dyYW0odGhpcywgaSwgZm4pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByb2dyYW1XcmFwcGVyO1xuICAgIH0sXG5cbiAgICBkYXRhOiBmdW5jdGlvbih2YWx1ZSwgZGVwdGgpIHtcbiAgICAgIHdoaWxlICh2YWx1ZSAmJiBkZXB0aC0tKSB7XG4gICAgICAgIHZhbHVlID0gdmFsdWUuX3BhcmVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIG1lcmdlOiBmdW5jdGlvbihwYXJhbSwgY29tbW9uKSB7XG4gICAgICBsZXQgb2JqID0gcGFyYW0gfHwgY29tbW9uO1xuXG4gICAgICBpZiAocGFyYW0gJiYgY29tbW9uICYmIChwYXJhbSAhPT0gY29tbW9uKSkge1xuICAgICAgICBvYmogPSBVdGlscy5leHRlbmQoe30sIGNvbW1vbiwgcGFyYW0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb2JqO1xuICAgIH0sXG5cbiAgICBub29wOiBlbnYuVk0ubm9vcCxcbiAgICBjb21waWxlckluZm86IHRlbXBsYXRlU3BlYy5jb21waWxlclxuICB9O1xuXG4gIGZ1bmN0aW9uIHJldChjb250ZXh0LCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgZGF0YSA9IG9wdGlvbnMuZGF0YTtcblxuICAgIHJldC5fc2V0dXAob3B0aW9ucyk7XG4gICAgaWYgKCFvcHRpb25zLnBhcnRpYWwgJiYgdGVtcGxhdGVTcGVjLnVzZURhdGEpIHtcbiAgICAgIGRhdGEgPSBpbml0RGF0YShjb250ZXh0LCBkYXRhKTtcbiAgICB9XG4gICAgbGV0IGRlcHRocyxcbiAgICAgICAgYmxvY2tQYXJhbXMgPSB0ZW1wbGF0ZVNwZWMudXNlQmxvY2tQYXJhbXMgPyBbXSA6IHVuZGVmaW5lZDtcbiAgICBpZiAodGVtcGxhdGVTcGVjLnVzZURlcHRocykge1xuICAgICAgaWYgKG9wdGlvbnMuZGVwdGhzKSB7XG4gICAgICAgIGRlcHRocyA9IGNvbnRleHQgIT09IG9wdGlvbnMuZGVwdGhzWzBdID8gW2NvbnRleHRdLmNvbmNhdChvcHRpb25zLmRlcHRocykgOiBvcHRpb25zLmRlcHRocztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRlcHRocyA9IFtjb250ZXh0XTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWluKGNvbnRleHQvKiwgb3B0aW9ucyovKSB7XG4gICAgICByZXR1cm4gJycgKyB0ZW1wbGF0ZVNwZWMubWFpbihjb250YWluZXIsIGNvbnRleHQsIGNvbnRhaW5lci5oZWxwZXJzLCBjb250YWluZXIucGFydGlhbHMsIGRhdGEsIGJsb2NrUGFyYW1zLCBkZXB0aHMpO1xuICAgIH1cbiAgICBtYWluID0gZXhlY3V0ZURlY29yYXRvcnModGVtcGxhdGVTcGVjLm1haW4sIG1haW4sIGNvbnRhaW5lciwgb3B0aW9ucy5kZXB0aHMgfHwgW10sIGRhdGEsIGJsb2NrUGFyYW1zKTtcbiAgICByZXR1cm4gbWFpbihjb250ZXh0LCBvcHRpb25zKTtcbiAgfVxuICByZXQuaXNUb3AgPSB0cnVlO1xuXG4gIHJldC5fc2V0dXAgPSBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLnBhcnRpYWwpIHtcbiAgICAgIGNvbnRhaW5lci5oZWxwZXJzID0gY29udGFpbmVyLm1lcmdlKG9wdGlvbnMuaGVscGVycywgZW52LmhlbHBlcnMpO1xuXG4gICAgICBpZiAodGVtcGxhdGVTcGVjLnVzZVBhcnRpYWwpIHtcbiAgICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gY29udGFpbmVyLm1lcmdlKG9wdGlvbnMucGFydGlhbHMsIGVudi5wYXJ0aWFscyk7XG4gICAgICB9XG4gICAgICBpZiAodGVtcGxhdGVTcGVjLnVzZVBhcnRpYWwgfHwgdGVtcGxhdGVTcGVjLnVzZURlY29yYXRvcnMpIHtcbiAgICAgICAgY29udGFpbmVyLmRlY29yYXRvcnMgPSBjb250YWluZXIubWVyZ2Uob3B0aW9ucy5kZWNvcmF0b3JzLCBlbnYuZGVjb3JhdG9ycyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnRhaW5lci5oZWxwZXJzID0gb3B0aW9ucy5oZWxwZXJzO1xuICAgICAgY29udGFpbmVyLnBhcnRpYWxzID0gb3B0aW9ucy5wYXJ0aWFscztcbiAgICAgIGNvbnRhaW5lci5kZWNvcmF0b3JzID0gb3B0aW9ucy5kZWNvcmF0b3JzO1xuICAgIH1cbiAgfTtcblxuICByZXQuX2NoaWxkID0gZnVuY3Rpb24oaSwgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocykge1xuICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlQmxvY2tQYXJhbXMgJiYgIWJsb2NrUGFyYW1zKSB7XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdtdXN0IHBhc3MgYmxvY2sgcGFyYW1zJyk7XG4gICAgfVxuICAgIGlmICh0ZW1wbGF0ZVNwZWMudXNlRGVwdGhzICYmICFkZXB0aHMpIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oJ211c3QgcGFzcyBwYXJlbnQgZGVwdGhzJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHdyYXBQcm9ncmFtKGNvbnRhaW5lciwgaSwgdGVtcGxhdGVTcGVjW2ldLCBkYXRhLCAwLCBibG9ja1BhcmFtcywgZGVwdGhzKTtcbiAgfTtcbiAgcmV0dXJuIHJldDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHdyYXBQcm9ncmFtKGNvbnRhaW5lciwgaSwgZm4sIGRhdGEsIGRlY2xhcmVkQmxvY2tQYXJhbXMsIGJsb2NrUGFyYW1zLCBkZXB0aHMpIHtcbiAgZnVuY3Rpb24gcHJvZyhjb250ZXh0LCBvcHRpb25zID0ge30pIHtcbiAgICBsZXQgY3VycmVudERlcHRocyA9IGRlcHRocztcbiAgICBpZiAoZGVwdGhzICYmIGNvbnRleHQgIT09IGRlcHRoc1swXSkge1xuICAgICAgY3VycmVudERlcHRocyA9IFtjb250ZXh0XS5jb25jYXQoZGVwdGhzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZm4oY29udGFpbmVyLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICBjb250YWluZXIuaGVscGVycywgY29udGFpbmVyLnBhcnRpYWxzLFxuICAgICAgICBvcHRpb25zLmRhdGEgfHwgZGF0YSxcbiAgICAgICAgYmxvY2tQYXJhbXMgJiYgW29wdGlvbnMuYmxvY2tQYXJhbXNdLmNvbmNhdChibG9ja1BhcmFtcyksXG4gICAgICAgIGN1cnJlbnREZXB0aHMpO1xuICB9XG5cbiAgcHJvZyA9IGV4ZWN1dGVEZWNvcmF0b3JzKGZuLCBwcm9nLCBjb250YWluZXIsIGRlcHRocywgZGF0YSwgYmxvY2tQYXJhbXMpO1xuXG4gIHByb2cucHJvZ3JhbSA9IGk7XG4gIHByb2cuZGVwdGggPSBkZXB0aHMgPyBkZXB0aHMubGVuZ3RoIDogMDtcbiAgcHJvZy5ibG9ja1BhcmFtcyA9IGRlY2xhcmVkQmxvY2tQYXJhbXMgfHwgMDtcbiAgcmV0dXJuIHByb2c7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlUGFydGlhbChwYXJ0aWFsLCBjb250ZXh0LCBvcHRpb25zKSB7XG4gIGlmICghcGFydGlhbCkge1xuICAgIGlmIChvcHRpb25zLm5hbWUgPT09ICdAcGFydGlhbC1ibG9jaycpIHtcbiAgICAgIHBhcnRpYWwgPSBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydGlhbCA9IG9wdGlvbnMucGFydGlhbHNbb3B0aW9ucy5uYW1lXTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoIXBhcnRpYWwuY2FsbCAmJiAhb3B0aW9ucy5uYW1lKSB7XG4gICAgLy8gVGhpcyBpcyBhIGR5bmFtaWMgcGFydGlhbCB0aGF0IHJldHVybmVkIGEgc3RyaW5nXG4gICAgb3B0aW9ucy5uYW1lID0gcGFydGlhbDtcbiAgICBwYXJ0aWFsID0gb3B0aW9ucy5wYXJ0aWFsc1twYXJ0aWFsXTtcbiAgfVxuICByZXR1cm4gcGFydGlhbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludm9rZVBhcnRpYWwocGFydGlhbCwgY29udGV4dCwgb3B0aW9ucykge1xuICBvcHRpb25zLnBhcnRpYWwgPSB0cnVlO1xuICBpZiAob3B0aW9ucy5pZHMpIHtcbiAgICBvcHRpb25zLmRhdGEuY29udGV4dFBhdGggPSBvcHRpb25zLmlkc1swXSB8fCBvcHRpb25zLmRhdGEuY29udGV4dFBhdGg7XG4gIH1cblxuICBsZXQgcGFydGlhbEJsb2NrO1xuICBpZiAob3B0aW9ucy5mbiAmJiBvcHRpb25zLmZuICE9PSBub29wKSB7XG4gICAgb3B0aW9ucy5kYXRhID0gY3JlYXRlRnJhbWUob3B0aW9ucy5kYXRhKTtcbiAgICBwYXJ0aWFsQmxvY2sgPSBvcHRpb25zLmRhdGFbJ3BhcnRpYWwtYmxvY2snXSA9IG9wdGlvbnMuZm47XG5cbiAgICBpZiAocGFydGlhbEJsb2NrLnBhcnRpYWxzKSB7XG4gICAgICBvcHRpb25zLnBhcnRpYWxzID0gVXRpbHMuZXh0ZW5kKHt9LCBvcHRpb25zLnBhcnRpYWxzLCBwYXJ0aWFsQmxvY2sucGFydGlhbHMpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChwYXJ0aWFsID09PSB1bmRlZmluZWQgJiYgcGFydGlhbEJsb2NrKSB7XG4gICAgcGFydGlhbCA9IHBhcnRpYWxCbG9jaztcbiAgfVxuXG4gIGlmIChwYXJ0aWFsID09PSB1bmRlZmluZWQpIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKCdUaGUgcGFydGlhbCAnICsgb3B0aW9ucy5uYW1lICsgJyBjb3VsZCBub3QgYmUgZm91bmQnKTtcbiAgfSBlbHNlIGlmIChwYXJ0aWFsIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICByZXR1cm4gcGFydGlhbChjb250ZXh0LCBvcHRpb25zKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9vcCgpIHsgcmV0dXJuICcnOyB9XG5cbmZ1bmN0aW9uIGluaXREYXRhKGNvbnRleHQsIGRhdGEpIHtcbiAgaWYgKCFkYXRhIHx8ICEoJ3Jvb3QnIGluIGRhdGEpKSB7XG4gICAgZGF0YSA9IGRhdGEgPyBjcmVhdGVGcmFtZShkYXRhKSA6IHt9O1xuICAgIGRhdGEucm9vdCA9IGNvbnRleHQ7XG4gIH1cbiAgcmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVEZWNvcmF0b3JzKGZuLCBwcm9nLCBjb250YWluZXIsIGRlcHRocywgZGF0YSwgYmxvY2tQYXJhbXMpIHtcbiAgaWYgKGZuLmRlY29yYXRvcikge1xuICAgIGxldCBwcm9wcyA9IHt9O1xuICAgIHByb2cgPSBmbi5kZWNvcmF0b3IocHJvZywgcHJvcHMsIGNvbnRhaW5lciwgZGVwdGhzICYmIGRlcHRoc1swXSwgZGF0YSwgYmxvY2tQYXJhbXMsIGRlcHRocyk7XG4gICAgVXRpbHMuZXh0ZW5kKHByb2csIHByb3BzKTtcbiAgfVxuICByZXR1cm4gcHJvZztcbn1cbiIsIi8vIEJ1aWxkIG91dCBvdXIgYmFzaWMgU2FmZVN0cmluZyB0eXBlXG5mdW5jdGlvbiBTYWZlU3RyaW5nKHN0cmluZykge1xuICB0aGlzLnN0cmluZyA9IHN0cmluZztcbn1cblxuU2FmZVN0cmluZy5wcm90b3R5cGUudG9TdHJpbmcgPSBTYWZlU3RyaW5nLnByb3RvdHlwZS50b0hUTUwgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuICcnICsgdGhpcy5zdHJpbmc7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTYWZlU3RyaW5nO1xuIiwiY29uc3QgZXNjYXBlID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc8JzogJyZsdDsnLFxuICAnPic6ICcmZ3Q7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gIFwiJ1wiOiAnJiN4Mjc7JyxcbiAgJ2AnOiAnJiN4NjA7JyxcbiAgJz0nOiAnJiN4M0Q7J1xufTtcblxuY29uc3QgYmFkQ2hhcnMgPSAvWyY8PlwiJ2A9XS9nLFxuICAgICAgcG9zc2libGUgPSAvWyY8PlwiJ2A9XS87XG5cbmZ1bmN0aW9uIGVzY2FwZUNoYXIoY2hyKSB7XG4gIHJldHVybiBlc2NhcGVbY2hyXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGV4dGVuZChvYmovKiAsIC4uLnNvdXJjZSAqLykge1xuICBmb3IgKGxldCBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IGtleSBpbiBhcmd1bWVudHNbaV0pIHtcbiAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYXJndW1lbnRzW2ldLCBrZXkpKSB7XG4gICAgICAgIG9ialtrZXldID0gYXJndW1lbnRzW2ldW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG9iajtcbn1cblxuZXhwb3J0IGxldCB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8vIFNvdXJjZWQgZnJvbSBsb2Rhc2hcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9iZXN0aWVqcy9sb2Rhc2gvYmxvYi9tYXN0ZXIvTElDRU5TRS50eHRcbi8qIGVzbGludC1kaXNhYmxlIGZ1bmMtc3R5bGUgKi9cbmxldCBpc0Z1bmN0aW9uID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJztcbn07XG4vLyBmYWxsYmFjayBmb3Igb2xkZXIgdmVyc2lvbnMgb2YgQ2hyb21lIGFuZCBTYWZhcmlcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5pZiAoaXNGdW5jdGlvbigveC8pKSB7XG4gIGlzRnVuY3Rpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gIH07XG59XG5leHBvcnQge2lzRnVuY3Rpb259O1xuLyogZXNsaW50LWVuYWJsZSBmdW5jLXN0eWxlICovXG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5leHBvcnQgY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSA/IHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nIDogZmFsc2U7XG59O1xuXG4vLyBPbGRlciBJRSB2ZXJzaW9ucyBkbyBub3QgZGlyZWN0bHkgc3VwcG9ydCBpbmRleE9mIHNvIHdlIG11c3QgaW1wbGVtZW50IG91ciBvd24sIHNhZGx5LlxuZXhwb3J0IGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIHZhbHVlKSB7XG4gIGZvciAobGV0IGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgIGlmIChhcnJheVtpXSA9PT0gdmFsdWUpIHtcbiAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZUV4cHJlc3Npb24oc3RyaW5nKSB7XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIC8vIGRvbid0IGVzY2FwZSBTYWZlU3RyaW5ncywgc2luY2UgdGhleSdyZSBhbHJlYWR5IHNhZmVcbiAgICBpZiAoc3RyaW5nICYmIHN0cmluZy50b0hUTUwpIHtcbiAgICAgIHJldHVybiBzdHJpbmcudG9IVE1MKCk7XG4gICAgfSBlbHNlIGlmIChzdHJpbmcgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH0gZWxzZSBpZiAoIXN0cmluZykge1xuICAgICAgcmV0dXJuIHN0cmluZyArICcnO1xuICAgIH1cblxuICAgIC8vIEZvcmNlIGEgc3RyaW5nIGNvbnZlcnNpb24gYXMgdGhpcyB3aWxsIGJlIGRvbmUgYnkgdGhlIGFwcGVuZCByZWdhcmRsZXNzIGFuZFxuICAgIC8vIHRoZSByZWdleCB0ZXN0IHdpbGwgZG8gdGhpcyB0cmFuc3BhcmVudGx5IGJlaGluZCB0aGUgc2NlbmVzLCBjYXVzaW5nIGlzc3VlcyBpZlxuICAgIC8vIGFuIG9iamVjdCdzIHRvIHN0cmluZyBoYXMgZXNjYXBlZCBjaGFyYWN0ZXJzIGluIGl0LlxuICAgIHN0cmluZyA9ICcnICsgc3RyaW5nO1xuICB9XG5cbiAgaWYgKCFwb3NzaWJsZS50ZXN0KHN0cmluZykpIHsgcmV0dXJuIHN0cmluZzsgfVxuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoYmFkQ2hhcnMsIGVzY2FwZUNoYXIpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNFbXB0eSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcmFtZShvYmplY3QpIHtcbiAgbGV0IGZyYW1lID0gZXh0ZW5kKHt9LCBvYmplY3QpO1xuICBmcmFtZS5fcGFyZW50ID0gb2JqZWN0O1xuICByZXR1cm4gZnJhbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBibG9ja1BhcmFtcyhwYXJhbXMsIGlkcykge1xuICBwYXJhbXMucGF0aCA9IGlkcztcbiAgcmV0dXJuIHBhcmFtcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZENvbnRleHRQYXRoKGNvbnRleHRQYXRoLCBpZCkge1xuICByZXR1cm4gKGNvbnRleHRQYXRoID8gY29udGV4dFBhdGggKyAnLicgOiAnJykgKyBpZDtcbn1cbiIsIi8vIENyZWF0ZSBhIHNpbXBsZSBwYXRoIGFsaWFzIHRvIGFsbG93IGJyb3dzZXJpZnkgdG8gcmVzb2x2ZVxuLy8gdGhlIHJ1bnRpbWUgb24gYSBzdXBwb3J0ZWQgcGF0aC5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgnLi9kaXN0L2Nqcy9oYW5kbGViYXJzLnJ1bnRpbWUnKVsnZGVmYXVsdCddO1xuIiwibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiaGFuZGxlYmFycy9ydW50aW1lXCIpW1wiZGVmYXVsdFwiXTtcbiIsIi8qIVxuICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2Mi4xLjRcbiAqIGh0dHA6Ly9qcXVlcnkuY29tL1xuICpcbiAqIEluY2x1ZGVzIFNpenpsZS5qc1xuICogaHR0cDovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgMjAwNSwgMjAxNCBqUXVlcnkgRm91bmRhdGlvbiwgSW5jLiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHA6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiAyMDE1LTA0LTI4VDE2OjAxWlxuICovXG5cbihmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuXG5cdGlmICggdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Ly8gRm9yIENvbW1vbkpTIGFuZCBDb21tb25KUy1saWtlIGVudmlyb25tZW50cyB3aGVyZSBhIHByb3BlciBgd2luZG93YFxuXHRcdC8vIGlzIHByZXNlbnQsIGV4ZWN1dGUgdGhlIGZhY3RvcnkgYW5kIGdldCBqUXVlcnkuXG5cdFx0Ly8gRm9yIGVudmlyb25tZW50cyB0aGF0IGRvIG5vdCBoYXZlIGEgYHdpbmRvd2Agd2l0aCBhIGBkb2N1bWVudGBcblx0XHQvLyAoc3VjaCBhcyBOb2RlLmpzKSwgZXhwb3NlIGEgZmFjdG9yeSBhcyBtb2R1bGUuZXhwb3J0cy5cblx0XHQvLyBUaGlzIGFjY2VudHVhdGVzIHRoZSBuZWVkIGZvciB0aGUgY3JlYXRpb24gb2YgYSByZWFsIGB3aW5kb3dgLlxuXHRcdC8vIGUuZy4gdmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIikod2luZG93KTtcblx0XHQvLyBTZWUgdGlja2V0ICMxNDU0OSBmb3IgbW9yZSBpbmZvLlxuXHRcdG1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLmRvY3VtZW50ID9cblx0XHRcdGZhY3RvcnkoIGdsb2JhbCwgdHJ1ZSApIDpcblx0XHRcdGZ1bmN0aW9uKCB3ICkge1xuXHRcdFx0XHRpZiAoICF3LmRvY3VtZW50ICkge1xuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvciggXCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50XCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gZmFjdG9yeSggdyApO1xuXHRcdFx0fTtcblx0fSBlbHNlIHtcblx0XHRmYWN0b3J5KCBnbG9iYWwgKTtcblx0fVxuXG4vLyBQYXNzIHRoaXMgaWYgd2luZG93IGlzIG5vdCBkZWZpbmVkIHlldFxufSh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDogdGhpcywgZnVuY3Rpb24oIHdpbmRvdywgbm9HbG9iYWwgKSB7XG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3ggMTgrXG4vLyBDYW4ndCBiZSBpbiBzdHJpY3QgbW9kZSwgc2V2ZXJhbCBsaWJzIGluY2x1ZGluZyBBU1AuTkVUIHRyYWNlXG4vLyB0aGUgc3RhY2sgdmlhIGFyZ3VtZW50cy5jYWxsZXIuY2FsbGVlIGFuZCBGaXJlZm94IGRpZXMgaWZcbi8vIHlvdSB0cnkgdG8gdHJhY2UgdGhyb3VnaCBcInVzZSBzdHJpY3RcIiBjYWxsIGNoYWlucy4gKCMxMzMzNSlcbi8vXG5cbnZhciBhcnIgPSBbXTtcblxudmFyIHNsaWNlID0gYXJyLnNsaWNlO1xuXG52YXIgY29uY2F0ID0gYXJyLmNvbmNhdDtcblxudmFyIHB1c2ggPSBhcnIucHVzaDtcblxudmFyIGluZGV4T2YgPSBhcnIuaW5kZXhPZjtcblxudmFyIGNsYXNzMnR5cGUgPSB7fTtcblxudmFyIHRvU3RyaW5nID0gY2xhc3MydHlwZS50b1N0cmluZztcblxudmFyIGhhc093biA9IGNsYXNzMnR5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBzdXBwb3J0ID0ge307XG5cblxuXG52YXJcblx0Ly8gVXNlIHRoZSBjb3JyZWN0IGRvY3VtZW50IGFjY29yZGluZ2x5IHdpdGggd2luZG93IGFyZ3VtZW50IChzYW5kYm94KVxuXHRkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudCxcblxuXHR2ZXJzaW9uID0gXCIyLjEuNFwiLFxuXG5cdC8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5XG5cdGpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHQvLyBUaGUgalF1ZXJ5IG9iamVjdCBpcyBhY3R1YWxseSBqdXN0IHRoZSBpbml0IGNvbnN0cnVjdG9yICdlbmhhbmNlZCdcblx0XHQvLyBOZWVkIGluaXQgaWYgalF1ZXJ5IGlzIGNhbGxlZCAoanVzdCBhbGxvdyBlcnJvciB0byBiZSB0aHJvd24gaWYgbm90IGluY2x1ZGVkKVxuXHRcdHJldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoIHNlbGVjdG9yLCBjb250ZXh0ICk7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjFcblx0Ly8gTWFrZSBzdXJlIHdlIHRyaW0gQk9NIGFuZCBOQlNQXG5cdHJ0cmltID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFxuXG5cdC8vIE1hdGNoZXMgZGFzaGVkIHN0cmluZyBmb3IgY2FtZWxpemluZ1xuXHRybXNQcmVmaXggPSAvXi1tcy0vLFxuXHRyZGFzaEFscGhhID0gLy0oW1xcZGEtel0pL2dpLFxuXG5cdC8vIFVzZWQgYnkgalF1ZXJ5LmNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcblx0ZmNhbWVsQ2FzZSA9IGZ1bmN0aW9uKCBhbGwsIGxldHRlciApIHtcblx0XHRyZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG5cdH07XG5cbmpRdWVyeS5mbiA9IGpRdWVyeS5wcm90b3R5cGUgPSB7XG5cdC8vIFRoZSBjdXJyZW50IHZlcnNpb24gb2YgalF1ZXJ5IGJlaW5nIHVzZWRcblx0anF1ZXJ5OiB2ZXJzaW9uLFxuXG5cdGNvbnN0cnVjdG9yOiBqUXVlcnksXG5cblx0Ly8gU3RhcnQgd2l0aCBhbiBlbXB0eSBzZWxlY3RvclxuXHRzZWxlY3RvcjogXCJcIixcblxuXHQvLyBUaGUgZGVmYXVsdCBsZW5ndGggb2YgYSBqUXVlcnkgb2JqZWN0IGlzIDBcblx0bGVuZ3RoOiAwLFxuXG5cdHRvQXJyYXk6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gR2V0IHRoZSBOdGggZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBlbGVtZW50IHNldCBPUlxuXHQvLyBHZXQgdGhlIHdob2xlIG1hdGNoZWQgZWxlbWVudCBzZXQgYXMgYSBjbGVhbiBhcnJheVxuXHRnZXQ6IGZ1bmN0aW9uKCBudW0gKSB7XG5cdFx0cmV0dXJuIG51bSAhPSBudWxsID9cblxuXHRcdFx0Ly8gUmV0dXJuIGp1c3QgdGhlIG9uZSBlbGVtZW50IGZyb20gdGhlIHNldFxuXHRcdFx0KCBudW0gPCAwID8gdGhpc1sgbnVtICsgdGhpcy5sZW5ndGggXSA6IHRoaXNbIG51bSBdICkgOlxuXG5cdFx0XHQvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyBpbiBhIGNsZWFuIGFycmF5XG5cdFx0XHRzbGljZS5jYWxsKCB0aGlzICk7XG5cdH0sXG5cblx0Ly8gVGFrZSBhbiBhcnJheSBvZiBlbGVtZW50cyBhbmQgcHVzaCBpdCBvbnRvIHRoZSBzdGFja1xuXHQvLyAocmV0dXJuaW5nIHRoZSBuZXcgbWF0Y2hlZCBlbGVtZW50IHNldClcblx0cHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cblx0XHQvLyBCdWlsZCBhIG5ldyBqUXVlcnkgbWF0Y2hlZCBlbGVtZW50IHNldFxuXHRcdHZhciByZXQgPSBqUXVlcnkubWVyZ2UoIHRoaXMuY29uc3RydWN0b3IoKSwgZWxlbXMgKTtcblxuXHRcdC8vIEFkZCB0aGUgb2xkIG9iamVjdCBvbnRvIHRoZSBzdGFjayAoYXMgYSByZWZlcmVuY2UpXG5cdFx0cmV0LnByZXZPYmplY3QgPSB0aGlzO1xuXHRcdHJldC5jb250ZXh0ID0gdGhpcy5jb250ZXh0O1xuXG5cdFx0Ly8gUmV0dXJuIHRoZSBuZXdseS1mb3JtZWQgZWxlbWVudCBzZXRcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdC8vIEV4ZWN1dGUgYSBjYWxsYmFjayBmb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBzZXQuXG5cdC8vIChZb3UgY2FuIHNlZWQgdGhlIGFyZ3VtZW50cyB3aXRoIGFuIGFycmF5IG9mIGFyZ3MsIGJ1dCB0aGlzIGlzXG5cdC8vIG9ubHkgdXNlZCBpbnRlcm5hbGx5Lilcblx0ZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrLCBhcmdzICkge1xuXHRcdHJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2ssIGFyZ3MgKTtcblx0fSxcblxuXHRtYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5tYXAodGhpcywgZnVuY3Rpb24oIGVsZW0sIGkgKSB7XG5cdFx0XHRyZXR1cm4gY2FsbGJhY2suY2FsbCggZWxlbSwgaSwgZWxlbSApO1xuXHRcdH0pKTtcblx0fSxcblxuXHRzbGljZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTtcblx0fSxcblxuXHRmaXJzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIDAgKTtcblx0fSxcblxuXHRsYXN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggLTEgKTtcblx0fSxcblxuXHRlcTogZnVuY3Rpb24oIGkgKSB7XG5cdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0aiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzW2pdIF0gOiBbXSApO1xuXHR9LFxuXG5cdGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKG51bGwpO1xuXHR9LFxuXG5cdC8vIEZvciBpbnRlcm5hbCB1c2Ugb25seS5cblx0Ly8gQmVoYXZlcyBsaWtlIGFuIEFycmF5J3MgbWV0aG9kLCBub3QgbGlrZSBhIGpRdWVyeSBtZXRob2QuXG5cdHB1c2g6IHB1c2gsXG5cdHNvcnQ6IGFyci5zb3J0LFxuXHRzcGxpY2U6IGFyci5zcGxpY2Vcbn07XG5cbmpRdWVyeS5leHRlbmQgPSBqUXVlcnkuZm4uZXh0ZW5kID0gZnVuY3Rpb24oKSB7XG5cdHZhciBvcHRpb25zLCBuYW1lLCBzcmMsIGNvcHksIGNvcHlJc0FycmF5LCBjbG9uZSxcblx0XHR0YXJnZXQgPSBhcmd1bWVudHNbMF0gfHwge30sXG5cdFx0aSA9IDEsXG5cdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XHRkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cblx0XHQvLyBTa2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307XG5cdFx0aSsrO1xuXHR9XG5cblx0Ly8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG5cdGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24odGFyZ2V0KSApIHtcblx0XHR0YXJnZXQgPSB7fTtcblx0fVxuXG5cdC8vIEV4dGVuZCBqUXVlcnkgaXRzZWxmIGlmIG9ubHkgb25lIGFyZ3VtZW50IGlzIHBhc3NlZFxuXHRpZiAoIGkgPT09IGxlbmd0aCApIHtcblx0XHR0YXJnZXQgPSB0aGlzO1xuXHRcdGktLTtcblx0fVxuXG5cdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAoIChvcHRpb25zID0gYXJndW1lbnRzWyBpIF0pICE9IG51bGwgKSB7XG5cdFx0XHQvLyBFeHRlbmQgdGhlIGJhc2Ugb2JqZWN0XG5cdFx0XHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRcdHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuXHRcdFx0XHRjb3B5ID0gb3B0aW9uc1sgbmFtZSBdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0aWYgKCB0YXJnZXQgPT09IGNvcHkgKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZWN1cnNlIGlmIHdlJ3JlIG1lcmdpbmcgcGxhaW4gb2JqZWN0cyBvciBhcnJheXNcblx0XHRcdFx0aWYgKCBkZWVwICYmIGNvcHkgJiYgKCBqUXVlcnkuaXNQbGFpbk9iamVjdChjb3B5KSB8fCAoY29weUlzQXJyYXkgPSBqUXVlcnkuaXNBcnJheShjb3B5KSkgKSApIHtcblx0XHRcdFx0XHRpZiAoIGNvcHlJc0FycmF5ICkge1xuXHRcdFx0XHRcdFx0Y29weUlzQXJyYXkgPSBmYWxzZTtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjICYmIGpRdWVyeS5pc0FycmF5KHNyYykgPyBzcmMgOiBbXTtcblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IHNyYyAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdChzcmMpID8gc3JjIDoge307XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBqUXVlcnkuZXh0ZW5kKCBkZWVwLCBjbG9uZSwgY29weSApO1xuXG5cdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0fSBlbHNlIGlmICggY29weSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0gY29weTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdHJldHVybiB0YXJnZXQ7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0Ly8gVW5pcXVlIGZvciBlYWNoIGNvcHkgb2YgalF1ZXJ5IG9uIHRoZSBwYWdlXG5cdGV4cGFuZG86IFwialF1ZXJ5XCIgKyAoIHZlcnNpb24gKyBNYXRoLnJhbmRvbSgpICkucmVwbGFjZSggL1xcRC9nLCBcIlwiICksXG5cblx0Ly8gQXNzdW1lIGpRdWVyeSBpcyByZWFkeSB3aXRob3V0IHRoZSByZWFkeSBtb2R1bGVcblx0aXNSZWFkeTogdHJ1ZSxcblxuXHRlcnJvcjogZnVuY3Rpb24oIG1zZyApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoIG1zZyApO1xuXHR9LFxuXG5cdG5vb3A6IGZ1bmN0aW9uKCkge30sXG5cblx0aXNGdW5jdGlvbjogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnR5cGUob2JqKSA9PT0gXCJmdW5jdGlvblwiO1xuXHR9LFxuXG5cdGlzQXJyYXk6IEFycmF5LmlzQXJyYXksXG5cblx0aXNXaW5kb3c6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0cmV0dXJuIG9iaiAhPSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdztcblx0fSxcblxuXHRpc051bWVyaWM6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0Ly8gcGFyc2VGbG9hdCBOYU5zIG51bWVyaWMtY2FzdCBmYWxzZSBwb3NpdGl2ZXMgKG51bGx8dHJ1ZXxmYWxzZXxcIlwiKVxuXHRcdC8vIC4uLmJ1dCBtaXNpbnRlcnByZXRzIGxlYWRpbmctbnVtYmVyIHN0cmluZ3MsIHBhcnRpY3VsYXJseSBoZXggbGl0ZXJhbHMgKFwiMHguLi5cIilcblx0XHQvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU5cblx0XHQvLyBhZGRpbmcgMSBjb3JyZWN0cyBsb3NzIG9mIHByZWNpc2lvbiBmcm9tIHBhcnNlRmxvYXQgKCMxNTEwMClcblx0XHRyZXR1cm4gIWpRdWVyeS5pc0FycmF5KCBvYmogKSAmJiAob2JqIC0gcGFyc2VGbG9hdCggb2JqICkgKyAxKSA+PSAwO1xuXHR9LFxuXG5cdGlzUGxhaW5PYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0Ly8gTm90IHBsYWluIG9iamVjdHM6XG5cdFx0Ly8gLSBBbnkgb2JqZWN0IG9yIHZhbHVlIHdob3NlIGludGVybmFsIFtbQ2xhc3NdXSBwcm9wZXJ0eSBpcyBub3QgXCJbb2JqZWN0IE9iamVjdF1cIlxuXHRcdC8vIC0gRE9NIG5vZGVzXG5cdFx0Ly8gLSB3aW5kb3dcblx0XHRpZiAoIGpRdWVyeS50eXBlKCBvYmogKSAhPT0gXCJvYmplY3RcIiB8fCBvYmoubm9kZVR5cGUgfHwgalF1ZXJ5LmlzV2luZG93KCBvYmogKSApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoIG9iai5jb25zdHJ1Y3RvciAmJlxuXHRcdFx0XHQhaGFzT3duLmNhbGwoIG9iai5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsIFwiaXNQcm90b3R5cGVPZlwiICkgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlIGZ1bmN0aW9uIGhhc24ndCByZXR1cm5lZCBhbHJlYWR5LCB3ZSdyZSBjb25maWRlbnQgdGhhdFxuXHRcdC8vIHxvYmp8IGlzIGEgcGxhaW4gb2JqZWN0LCBjcmVhdGVkIGJ5IHt9IG9yIGNvbnN0cnVjdGVkIHdpdGggbmV3IE9iamVjdFxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIG5hbWU7XG5cdFx0Zm9yICggbmFtZSBpbiBvYmogKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdHR5cGU6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0aWYgKCBvYmogPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiBvYmogKyBcIlwiO1xuXHRcdH1cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMCwgaU9TPDYgKGZ1bmN0aW9uaXNoIFJlZ0V4cClcblx0XHRyZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgP1xuXHRcdFx0Y2xhc3MydHlwZVsgdG9TdHJpbmcuY2FsbChvYmopIF0gfHwgXCJvYmplY3RcIiA6XG5cdFx0XHR0eXBlb2Ygb2JqO1xuXHR9LFxuXG5cdC8vIEV2YWx1YXRlcyBhIHNjcmlwdCBpbiBhIGdsb2JhbCBjb250ZXh0XG5cdGdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBjb2RlICkge1xuXHRcdHZhciBzY3JpcHQsXG5cdFx0XHRpbmRpcmVjdCA9IGV2YWw7XG5cblx0XHRjb2RlID0galF1ZXJ5LnRyaW0oIGNvZGUgKTtcblxuXHRcdGlmICggY29kZSApIHtcblx0XHRcdC8vIElmIHRoZSBjb2RlIGluY2x1ZGVzIGEgdmFsaWQsIHByb2xvZ3VlIHBvc2l0aW9uXG5cdFx0XHQvLyBzdHJpY3QgbW9kZSBwcmFnbWEsIGV4ZWN1dGUgY29kZSBieSBpbmplY3RpbmcgYVxuXHRcdFx0Ly8gc2NyaXB0IHRhZyBpbnRvIHRoZSBkb2N1bWVudC5cblx0XHRcdGlmICggY29kZS5pbmRleE9mKFwidXNlIHN0cmljdFwiKSA9PT0gMSApIHtcblx0XHRcdFx0c2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcblx0XHRcdFx0c2NyaXB0LnRleHQgPSBjb2RlO1xuXHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHQgKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBzY3JpcHQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBPdGhlcndpc2UsIGF2b2lkIHRoZSBET00gbm9kZSBjcmVhdGlvbiwgaW5zZXJ0aW9uXG5cdFx0XHQvLyBhbmQgcmVtb3ZhbCBieSB1c2luZyBhbiBpbmRpcmVjdCBnbG9iYWwgZXZhbFxuXHRcdFx0XHRpbmRpcmVjdCggY29kZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gTWljcm9zb2Z0IGZvcmdvdCB0byBodW1wIHRoZWlyIHZlbmRvciBwcmVmaXggKCM5NTcyKVxuXHRjYW1lbENhc2U6IGZ1bmN0aW9uKCBzdHJpbmcgKSB7XG5cdFx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG5cdH0sXG5cblx0bm9kZU5hbWU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHR9LFxuXG5cdC8vIGFyZ3MgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0ZWFjaDogZnVuY3Rpb24oIG9iaiwgY2FsbGJhY2ssIGFyZ3MgKSB7XG5cdFx0dmFyIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBvYmoubGVuZ3RoLFxuXHRcdFx0aXNBcnJheSA9IGlzQXJyYXlsaWtlKCBvYmogKTtcblxuXHRcdGlmICggYXJncyApIHtcblx0XHRcdGlmICggaXNBcnJheSApIHtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5hcHBseSggb2JqWyBpIF0sIGFyZ3MgKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrLmFwcGx5KCBvYmpbIGkgXSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEEgc3BlY2lhbCwgZmFzdCwgY2FzZSBmb3IgdGhlIG1vc3QgY29tbW9uIHVzZSBvZiBlYWNoXG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICggaXNBcnJheSApIHtcblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKTtcblxuXHRcdFx0XHRcdGlmICggdmFsdWUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApO1xuXG5cdFx0XHRcdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4xXG5cdHRyaW06IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdHJldHVybiB0ZXh0ID09IG51bGwgP1xuXHRcdFx0XCJcIiA6XG5cdFx0XHQoIHRleHQgKyBcIlwiICkucmVwbGFjZSggcnRyaW0sIFwiXCIgKTtcblx0fSxcblxuXHQvLyByZXN1bHRzIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1ha2VBcnJheTogZnVuY3Rpb24oIGFyciwgcmVzdWx0cyApIHtcblx0XHR2YXIgcmV0ID0gcmVzdWx0cyB8fCBbXTtcblxuXHRcdGlmICggYXJyICE9IG51bGwgKSB7XG5cdFx0XHRpZiAoIGlzQXJyYXlsaWtlKCBPYmplY3QoYXJyKSApICkge1xuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIHJldCxcblx0XHRcdFx0XHR0eXBlb2YgYXJyID09PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRbIGFyciBdIDogYXJyXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwdXNoLmNhbGwoIHJldCwgYXJyICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHRpbkFycmF5OiBmdW5jdGlvbiggZWxlbSwgYXJyLCBpICkge1xuXHRcdHJldHVybiBhcnIgPT0gbnVsbCA/IC0xIDogaW5kZXhPZi5jYWxsKCBhcnIsIGVsZW0sIGkgKTtcblx0fSxcblxuXHRtZXJnZTogZnVuY3Rpb24oIGZpcnN0LCBzZWNvbmQgKSB7XG5cdFx0dmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxuXHRcdFx0aiA9IDAsXG5cdFx0XHRpID0gZmlyc3QubGVuZ3RoO1xuXG5cdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGogXTtcblx0XHR9XG5cblx0XHRmaXJzdC5sZW5ndGggPSBpO1xuXG5cdFx0cmV0dXJuIGZpcnN0O1xuXHR9LFxuXG5cdGdyZXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGludmVydCApIHtcblx0XHR2YXIgY2FsbGJhY2tJbnZlcnNlLFxuXHRcdFx0bWF0Y2hlcyA9IFtdLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRjYWxsYmFja0V4cGVjdCA9ICFpbnZlcnQ7XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgb25seSBzYXZpbmcgdGhlIGl0ZW1zXG5cdFx0Ly8gdGhhdCBwYXNzIHRoZSB2YWxpZGF0b3IgZnVuY3Rpb25cblx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdGNhbGxiYWNrSW52ZXJzZSA9ICFjYWxsYmFjayggZWxlbXNbIGkgXSwgaSApO1xuXHRcdFx0aWYgKCBjYWxsYmFja0ludmVyc2UgIT09IGNhbGxiYWNrRXhwZWN0ICkge1xuXHRcdFx0XHRtYXRjaGVzLnB1c2goIGVsZW1zWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbWF0Y2hlcztcblx0fSxcblxuXHQvLyBhcmcgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBhcmcgKSB7XG5cdFx0dmFyIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRpc0FycmF5ID0gaXNBcnJheWxpa2UoIGVsZW1zICksXG5cdFx0XHRyZXQgPSBbXTtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzXG5cdFx0aWYgKCBpc0FycmF5ICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gR28gdGhyb3VnaCBldmVyeSBrZXkgb24gdGhlIG9iamVjdCxcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICggaSBpbiBlbGVtcyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRcdHJldHVybiBjb25jYXQuYXBwbHkoIFtdLCByZXQgKTtcblx0fSxcblxuXHQvLyBBIGdsb2JhbCBHVUlEIGNvdW50ZXIgZm9yIG9iamVjdHNcblx0Z3VpZDogMSxcblxuXHQvLyBCaW5kIGEgZnVuY3Rpb24gdG8gYSBjb250ZXh0LCBvcHRpb25hbGx5IHBhcnRpYWxseSBhcHBseWluZyBhbnlcblx0Ly8gYXJndW1lbnRzLlxuXHRwcm94eTogZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkge1xuXHRcdHZhciB0bXAsIGFyZ3MsIHByb3h5O1xuXG5cdFx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdHRtcCA9IGZuWyBjb250ZXh0IF07XG5cdFx0XHRjb250ZXh0ID0gZm47XG5cdFx0XHRmbiA9IHRtcDtcblx0XHR9XG5cblx0XHQvLyBRdWljayBjaGVjayB0byBkZXRlcm1pbmUgaWYgdGFyZ2V0IGlzIGNhbGxhYmxlLCBpbiB0aGUgc3BlY1xuXHRcdC8vIHRoaXMgdGhyb3dzIGEgVHlwZUVycm9yLCBidXQgd2Ugd2lsbCBqdXN0IHJldHVybiB1bmRlZmluZWQuXG5cdFx0aWYgKCAhalF1ZXJ5LmlzRnVuY3Rpb24oIGZuICkgKSB7XG5cdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIFNpbXVsYXRlZCBiaW5kXG5cdFx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMiApO1xuXHRcdHByb3h5ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gZm4uYXBwbHkoIGNvbnRleHQgfHwgdGhpcywgYXJncy5jb25jYXQoIHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTtcblx0XHR9O1xuXG5cdFx0Ly8gU2V0IHRoZSBndWlkIG9mIHVuaXF1ZSBoYW5kbGVyIHRvIHRoZSBzYW1lIG9mIG9yaWdpbmFsIGhhbmRsZXIsIHNvIGl0IGNhbiBiZSByZW1vdmVkXG5cdFx0cHJveHkuZ3VpZCA9IGZuLmd1aWQgPSBmbi5ndWlkIHx8IGpRdWVyeS5ndWlkKys7XG5cblx0XHRyZXR1cm4gcHJveHk7XG5cdH0sXG5cblx0bm93OiBEYXRlLm5vdyxcblxuXHQvLyBqUXVlcnkuc3VwcG9ydCBpcyBub3QgdXNlZCBpbiBDb3JlIGJ1dCBvdGhlciBwcm9qZWN0cyBhdHRhY2ggdGhlaXJcblx0Ly8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC5cblx0c3VwcG9ydDogc3VwcG9ydFxufSk7XG5cbi8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcFxualF1ZXJ5LmVhY2goXCJCb29sZWFuIE51bWJlciBTdHJpbmcgRnVuY3Rpb24gQXJyYXkgRGF0ZSBSZWdFeHAgT2JqZWN0IEVycm9yXCIuc3BsaXQoXCIgXCIpLCBmdW5jdGlvbihpLCBuYW1lKSB7XG5cdGNsYXNzMnR5cGVbIFwiW29iamVjdCBcIiArIG5hbWUgKyBcIl1cIiBdID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xufSk7XG5cbmZ1bmN0aW9uIGlzQXJyYXlsaWtlKCBvYmogKSB7XG5cblx0Ly8gU3VwcG9ydDogaU9TIDguMiAobm90IHJlcHJvZHVjaWJsZSBpbiBzaW11bGF0b3IpXG5cdC8vIGBpbmAgY2hlY2sgdXNlZCB0byBwcmV2ZW50IEpJVCBlcnJvciAoZ2gtMjE0NSlcblx0Ly8gaGFzT3duIGlzbid0IHVzZWQgaGVyZSBkdWUgdG8gZmFsc2UgbmVnYXRpdmVzXG5cdC8vIHJlZ2FyZGluZyBOb2RlbGlzdCBsZW5ndGggaW4gSUVcblx0dmFyIGxlbmd0aCA9IFwibGVuZ3RoXCIgaW4gb2JqICYmIG9iai5sZW5ndGgsXG5cdFx0dHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblxuXHRpZiAoIHR5cGUgPT09IFwiZnVuY3Rpb25cIiB8fCBqUXVlcnkuaXNXaW5kb3coIG9iaiApICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGlmICggb2JqLm5vZGVUeXBlID09PSAxICYmIGxlbmd0aCApIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdHJldHVybiB0eXBlID09PSBcImFycmF5XCIgfHwgbGVuZ3RoID09PSAwIHx8XG5cdFx0dHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajtcbn1cbnZhciBTaXp6bGUgPVxuLyohXG4gKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4yLjAtcHJlXG4gKiBodHRwOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCAyMDA4LCAyMDE0IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cDovL2pxdWVyeS5vcmcvbGljZW5zZVxuICpcbiAqIERhdGU6IDIwMTQtMTItMTZcbiAqL1xuKGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbnZhciBpLFxuXHRzdXBwb3J0LFxuXHRFeHByLFxuXHRnZXRUZXh0LFxuXHRpc1hNTCxcblx0dG9rZW5pemUsXG5cdGNvbXBpbGUsXG5cdHNlbGVjdCxcblx0b3V0ZXJtb3N0Q29udGV4dCxcblx0c29ydElucHV0LFxuXHRoYXNEdXBsaWNhdGUsXG5cblx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRzZXREb2N1bWVudCxcblx0ZG9jdW1lbnQsXG5cdGRvY0VsZW0sXG5cdGRvY3VtZW50SXNIVE1MLFxuXHRyYnVnZ3lRU0EsXG5cdHJidWdneU1hdGNoZXMsXG5cdG1hdGNoZXMsXG5cdGNvbnRhaW5zLFxuXG5cdC8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGFcblx0ZXhwYW5kbyA9IFwic2l6emxlXCIgKyAxICogbmV3IERhdGUoKSxcblx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRkaXJydW5zID0gMCxcblx0ZG9uZSA9IDAsXG5cdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHR0b2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0Y29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9LFxuXG5cdC8vIEdlbmVyYWwtcHVycG9zZSBjb25zdGFudHNcblx0TUFYX05FR0FUSVZFID0gMSA8PCAzMSxcblxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdGhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksXG5cdGFyciA9IFtdLFxuXHRwb3AgPSBhcnIucG9wLFxuXHRwdXNoX25hdGl2ZSA9IGFyci5wdXNoLFxuXHRwdXNoID0gYXJyLnB1c2gsXG5cdHNsaWNlID0gYXJyLnNsaWNlLFxuXHQvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0Ly8gaHR0cDovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdGluZGV4T2YgPSBmdW5jdGlvbiggbGlzdCwgZWxlbSApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGlmICggbGlzdFtpXSA9PT0gZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fSxcblxuXHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblxuXHQvLyBSZWd1bGFyIGV4cHJlc3Npb25zXG5cblx0Ly8gV2hpdGVzcGFjZSBjaGFyYWN0ZXJzIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyN3aGl0ZXNwYWNlXG5cdHdoaXRlc3BhY2UgPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc3ludGF4LyNjaGFyYWN0ZXJzXG5cdGNoYXJhY3RlckVuY29kaW5nID0gXCIoPzpcXFxcXFxcXC58W1xcXFx3LV18W15cXFxceDAwLVxcXFx4YTBdKStcIixcblxuXHQvLyBMb29zZWx5IG1vZGVsZWQgb24gQ1NTIGlkZW50aWZpZXIgY2hhcmFjdGVyc1xuXHQvLyBBbiB1bnF1b3RlZCB2YWx1ZSBzaG91bGQgYmUgYSBDU1MgaWRlbnRpZmllciBodHRwOi8vd3d3LnczLm9yZy9UUi9jc3MzLXNlbGVjdG9ycy8jYXR0cmlidXRlLXNlbGVjdG9yc1xuXHQvLyBQcm9wZXIgc3ludGF4OiBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXJcblx0aWRlbnRpZmllciA9IGNoYXJhY3RlckVuY29kaW5nLnJlcGxhY2UoIFwid1wiLCBcIncjXCIgKSxcblxuXHQvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcblx0YXR0cmlidXRlcyA9IFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gT3BlcmF0b3IgKGNhcHR1cmUgMilcblx0XHRcIiooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIFwiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG5cdFx0XCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFwiKlxcXFxdXCIsXG5cblx0cHNldWRvcyA9IFwiOihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpKD86XFxcXCgoXCIgK1xuXHRcdC8vIFRvIHJlZHVjZSB0aGUgbnVtYmVyIG9mIHNlbGVjdG9ycyBuZWVkaW5nIHRva2VuaXplIGluIHRoZSBwcmVGaWx0ZXIsIHByZWZlciBhcmd1bWVudHM6XG5cdFx0Ly8gMS4gcXVvdGVkIChjYXB0dXJlIDM7IGNhcHR1cmUgNCBvciBjYXB0dXJlIDUpXG5cdFx0XCIoJygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwiKXxcIiArXG5cdFx0Ly8gMi4gc2ltcGxlIChjYXB0dXJlIDYpXG5cdFx0XCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFwoKVtcXFxcXV18XCIgKyBhdHRyaWJ1dGVzICsgXCIpKil8XCIgK1xuXHRcdC8vIDMuIGFueXRoaW5nIGVsc2UgKGNhcHR1cmUgMilcblx0XHRcIi4qXCIgK1xuXHRcdFwiKVxcXFwpfClcIixcblxuXHQvLyBMZWFkaW5nIGFuZCBub24tZXNjYXBlZCB0cmFpbGluZyB3aGl0ZXNwYWNlLCBjYXB0dXJpbmcgc29tZSBub24td2hpdGVzcGFjZSBjaGFyYWN0ZXJzIHByZWNlZGluZyB0aGUgbGF0dGVyXG5cdHJ3aGl0ZXNwYWNlID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArIFwiK1wiLCBcImdcIiApLFxuXHRydHJpbSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiK3woKD86XnxbXlxcXFxcXFxcXSkoPzpcXFxcXFxcXC4pKilcIiArIHdoaXRlc3BhY2UgKyBcIiskXCIsIFwiZ1wiICksXG5cblx0cmNvbW1hID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqLFwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cdHJjb21iaW5hdG9ycyA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKihbPit+XXxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXG5cdHJhdHRyaWJ1dGVRdW90ZXMgPSBuZXcgUmVnRXhwKCBcIj1cIiArIHdoaXRlc3BhY2UgKyBcIiooW15cXFxcXSdcXFwiXSo/KVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFxdXCIsIFwiZ1wiICksXG5cblx0cnBzZXVkbyA9IG5ldyBSZWdFeHAoIHBzZXVkb3MgKSxcblx0cmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCBcIl5cIiArIGlkZW50aWZpZXIgKyBcIiRcIiApLFxuXG5cdG1hdGNoRXhwciA9IHtcblx0XHRcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBjaGFyYWN0ZXJFbmNvZGluZyArIFwiKVwiICksXG5cdFx0XCJDTEFTU1wiOiBuZXcgUmVnRXhwKCBcIl5cXFxcLihcIiArIGNoYXJhY3RlckVuY29kaW5nICsgXCIpXCIgKSxcblx0XHRcIlRBR1wiOiBuZXcgUmVnRXhwKCBcIl4oXCIgKyBjaGFyYWN0ZXJFbmNvZGluZy5yZXBsYWNlKCBcIndcIiwgXCJ3KlwiICkgKyBcIilcIiApLFxuXHRcdFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcblx0XHRcIlBTRVVET1wiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHBzZXVkb3MgKSxcblx0XHRcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWystXXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihcXFxcZCspfCkpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KVwiLCBcImlcIiApLFxuXHRcdFwiYm9vbFwiOiBuZXcgUmVnRXhwKCBcIl4oPzpcIiArIGJvb2xlYW5zICsgXCIpJFwiLCBcImlcIiApLFxuXHRcdC8vIEZvciB1c2UgaW4gbGlicmFyaWVzIGltcGxlbWVudGluZyAuaXMoKVxuXHRcdC8vIFdlIHVzZSB0aGlzIGZvciBQT1MgbWF0Y2hpbmcgaW4gYHNlbGVjdGBcblx0XHRcIm5lZWRzQ29udGV4dFwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIgK1xuXHRcdFx0d2hpdGVzcGFjZSArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG5cdH0sXG5cblx0cmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJoZWFkZXIgPSAvXmhcXGQkL2ksXG5cblx0cm5hdGl2ZSA9IC9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXG5cblx0Ly8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzXG5cdHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblxuXHRyc2libGluZyA9IC9bK35dLyxcblx0cmVzY2FwZSA9IC8nfFxcXFwvZyxcblxuXHQvLyBDU1MgZXNjYXBlcyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzXG5cdHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICsgXCI/fChcIiArIHdoaXRlc3BhY2UgKyBcIil8LilcIiwgXCJpZ1wiICksXG5cdGZ1bmVzY2FwZSA9IGZ1bmN0aW9uKCBfLCBlc2NhcGVkLCBlc2NhcGVkV2hpdGVzcGFjZSApIHtcblx0XHR2YXIgaGlnaCA9IFwiMHhcIiArIGVzY2FwZWQgLSAweDEwMDAwO1xuXHRcdC8vIE5hTiBtZWFucyBub24tY29kZXBvaW50XG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyNFxuXHRcdC8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgK1wiMHhcIlxuXHRcdHJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID9cblx0XHRcdGVzY2FwZWQgOlxuXHRcdFx0aGlnaCA8IDAgP1xuXHRcdFx0XHQvLyBCTVAgY29kZXBvaW50XG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOlxuXHRcdFx0XHQvLyBTdXBwbGVtZW50YWwgUGxhbmUgY29kZXBvaW50IChzdXJyb2dhdGUgcGFpcilcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7XG5cdH0sXG5cblx0Ly8gVXNlZCBmb3IgaWZyYW1lc1xuXHQvLyBTZWUgc2V0RG9jdW1lbnQoKVxuXHQvLyBSZW1vdmluZyB0aGUgZnVuY3Rpb24gd3JhcHBlciBjYXVzZXMgYSBcIlBlcm1pc3Npb24gRGVuaWVkXCJcblx0Ly8gZXJyb3IgaW4gSUVcblx0dW5sb2FkSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHNldERvY3VtZW50KCk7XG5cdH07XG5cbi8vIE9wdGltaXplIGZvciBwdXNoLmFwcGx5KCBfLCBOb2RlTGlzdCApXG50cnkge1xuXHRwdXNoLmFwcGx5KFxuXHRcdChhcnIgPSBzbGljZS5jYWxsKCBwcmVmZXJyZWREb2MuY2hpbGROb2RlcyApKSxcblx0XHRwcmVmZXJyZWREb2MuY2hpbGROb2Rlc1xuXHQpO1xuXHQvLyBTdXBwb3J0OiBBbmRyb2lkPDQuMFxuXHQvLyBEZXRlY3Qgc2lsZW50bHkgZmFpbGluZyBwdXNoLmFwcGx5XG5cdGFyclsgcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMubGVuZ3RoIF0ubm9kZVR5cGU7XG59IGNhdGNoICggZSApIHtcblx0cHVzaCA9IHsgYXBwbHk6IGFyci5sZW5ndGggP1xuXG5cdFx0Ly8gTGV2ZXJhZ2Ugc2xpY2UgaWYgcG9zc2libGVcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHRwdXNoX25hdGl2ZS5hcHBseSggdGFyZ2V0LCBzbGljZS5jYWxsKGVscykgKTtcblx0XHR9IDpcblxuXHRcdC8vIFN1cHBvcnQ6IElFPDlcblx0XHQvLyBPdGhlcndpc2UgYXBwZW5kIGRpcmVjdGx5XG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0dmFyIGogPSB0YXJnZXQubGVuZ3RoLFxuXHRcdFx0XHRpID0gMDtcblx0XHRcdC8vIENhbid0IHRydXN0IE5vZGVMaXN0Lmxlbmd0aFxuXHRcdFx0d2hpbGUgKCAodGFyZ2V0W2orK10gPSBlbHNbaSsrXSkgKSB7fVxuXHRcdFx0dGFyZ2V0Lmxlbmd0aCA9IGogLSAxO1xuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gU2l6emxlKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIG1hdGNoLCBlbGVtLCBtLCBub2RlVHlwZSxcblx0XHQvLyBRU0EgdmFyc1xuXHRcdGksIGdyb3Vwcywgb2xkLCBuaWQsIG5ld0NvbnRleHQsIG5ld1NlbGVjdG9yO1xuXG5cdGlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXG5cdGNvbnRleHQgPSBjb250ZXh0IHx8IGRvY3VtZW50O1xuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblx0bm9kZVR5cGUgPSBjb250ZXh0Lm5vZGVUeXBlO1xuXG5cdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiIHx8ICFzZWxlY3RvciB8fFxuXHRcdG5vZGVUeXBlICE9PSAxICYmIG5vZGVUeXBlICE9PSA5ICYmIG5vZGVUeXBlICE9PSAxMSApIHtcblxuXHRcdHJldHVybiByZXN1bHRzO1xuXHR9XG5cblx0aWYgKCAhc2VlZCAmJiBkb2N1bWVudElzSFRNTCApIHtcblxuXHRcdC8vIFRyeSB0byBzaG9ydGN1dCBmaW5kIG9wZXJhdGlvbnMgd2hlbiBwb3NzaWJsZSAoZS5nLiwgbm90IHVuZGVyIERvY3VtZW50RnJhZ21lbnQpXG5cdFx0aWYgKCBub2RlVHlwZSAhPT0gMTEgJiYgKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHtcblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCIjSURcIilcblx0XHRcdGlmICggKG0gPSBtYXRjaFsxXSkgKSB7XG5cdFx0XHRcdGlmICggbm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKTtcblx0XHRcdFx0XHQvLyBDaGVjayBwYXJlbnROb2RlIHRvIGNhdGNoIHdoZW4gQmxhY2tiZXJyeSA0LjYgcmV0dXJuc1xuXHRcdFx0XHRcdC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgKGpRdWVyeSAjNjk2Mylcblx0XHRcdFx0XHRpZiAoIGVsZW0gJiYgZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBjYXNlIHdoZXJlIElFLCBPcGVyYSwgYW5kIFdlYmtpdCByZXR1cm4gaXRlbXNcblx0XHRcdFx0XHRcdC8vIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0aWYgKCBlbGVtLmlkID09PSBtICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBDb250ZXh0IGlzIG5vdCBhIGRvY3VtZW50XG5cdFx0XHRcdFx0aWYgKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgJiYgKGVsZW0gPSBjb250ZXh0Lm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgJiZcblx0XHRcdFx0XHRcdGNvbnRhaW5zKCBjb250ZXh0LCBlbGVtICkgJiYgZWxlbS5pZCA9PT0gbSApIHtcblx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIFNwZWVkLXVwOiBTaXp6bGUoXCJUQUdcIilcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzJdICkge1xuXHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHQvLyBTcGVlZC11cDogU2l6emxlKFwiLkNMQVNTXCIpXG5cdFx0XHR9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggbSApICk7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFFTQSBwYXRoXG5cdFx0aWYgKCBzdXBwb3J0LnFzYSAmJiAoIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkpICkge1xuXHRcdFx0bmlkID0gb2xkID0gZXhwYW5kbztcblx0XHRcdG5ld0NvbnRleHQgPSBjb250ZXh0O1xuXHRcdFx0bmV3U2VsZWN0b3IgPSBub2RlVHlwZSAhPT0gMSAmJiBzZWxlY3RvcjtcblxuXHRcdFx0Ly8gcVNBIHdvcmtzIHN0cmFuZ2VseSBvbiBFbGVtZW50LXJvb3RlZCBxdWVyaWVzXG5cdFx0XHQvLyBXZSBjYW4gd29yayBhcm91bmQgdGhpcyBieSBzcGVjaWZ5aW5nIGFuIGV4dHJhIElEIG9uIHRoZSByb290XG5cdFx0XHQvLyBhbmQgd29ya2luZyB1cCBmcm9tIHRoZXJlIChUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhlIHRlY2huaXF1ZSlcblx0XHRcdC8vIElFIDggZG9lc24ndCB3b3JrIG9uIG9iamVjdCBlbGVtZW50c1xuXHRcdFx0aWYgKCBub2RlVHlwZSA9PT0gMSAmJiBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRcdGdyb3VwcyA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXG5cdFx0XHRcdGlmICggKG9sZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKFwiaWRcIikpICkge1xuXHRcdFx0XHRcdG5pZCA9IG9sZC5yZXBsYWNlKCByZXNjYXBlLCBcIlxcXFwkJlwiICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29udGV4dC5zZXRBdHRyaWJ1dGUoIFwiaWRcIiwgbmlkICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmlkID0gXCJbaWQ9J1wiICsgbmlkICsgXCInXSBcIjtcblxuXHRcdFx0XHRpID0gZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0Z3JvdXBzW2ldID0gbmlkICsgdG9TZWxlY3RvciggZ3JvdXBzW2ldICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0bmV3Q29udGV4dCA9IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHQ7XG5cdFx0XHRcdG5ld1NlbGVjdG9yID0gZ3JvdXBzLmpvaW4oXCIsXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIG5ld1NlbGVjdG9yICkge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsXG5cdFx0XHRcdFx0XHRuZXdDb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIG5ld1NlbGVjdG9yIClcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHR9IGNhdGNoKHFzYUVycm9yKSB7XG5cdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0aWYgKCAhb2xkICkge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBBbGwgb3RoZXJzXG5cdHJldHVybiBzZWxlY3QoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApO1xufVxuXG4vKipcbiAqIENyZWF0ZSBrZXktdmFsdWUgY2FjaGVzIG9mIGxpbWl0ZWQgc2l6ZVxuICogQHJldHVybnMge0Z1bmN0aW9uKHN0cmluZywgT2JqZWN0KX0gUmV0dXJucyB0aGUgT2JqZWN0IGRhdGEgYWZ0ZXIgc3RvcmluZyBpdCBvbiBpdHNlbGYgd2l0aFxuICpcdHByb3BlcnR5IG5hbWUgdGhlIChzcGFjZS1zdWZmaXhlZCkgc3RyaW5nIGFuZCAoaWYgdGhlIGNhY2hlIGlzIGxhcmdlciB0aGFuIEV4cHIuY2FjaGVMZW5ndGgpXG4gKlx0ZGVsZXRpbmcgdGhlIG9sZGVzdCBlbnRyeVxuICovXG5mdW5jdGlvbiBjcmVhdGVDYWNoZSgpIHtcblx0dmFyIGtleXMgPSBbXTtcblxuXHRmdW5jdGlvbiBjYWNoZSgga2V5LCB2YWx1ZSApIHtcblx0XHQvLyBVc2UgKGtleSArIFwiIFwiKSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aCBuYXRpdmUgcHJvdG90eXBlIHByb3BlcnRpZXMgKHNlZSBJc3N1ZSAjMTU3KVxuXHRcdGlmICgga2V5cy5wdXNoKCBrZXkgKyBcIiBcIiApID4gRXhwci5jYWNoZUxlbmd0aCApIHtcblx0XHRcdC8vIE9ubHkga2VlcCB0aGUgbW9zdCByZWNlbnQgZW50cmllc1xuXHRcdFx0ZGVsZXRlIGNhY2hlWyBrZXlzLnNoaWZ0KCkgXTtcblx0XHR9XG5cdFx0cmV0dXJuIChjYWNoZVsga2V5ICsgXCIgXCIgXSA9IHZhbHVlKTtcblx0fVxuXHRyZXR1cm4gY2FjaGU7XG59XG5cbi8qKlxuICogTWFyayBhIGZ1bmN0aW9uIGZvciBzcGVjaWFsIHVzZSBieSBTaXp6bGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFRoZSBmdW5jdGlvbiB0byBtYXJrXG4gKi9cbmZ1bmN0aW9uIG1hcmtGdW5jdGlvbiggZm4gKSB7XG5cdGZuWyBleHBhbmRvIF0gPSB0cnVlO1xuXHRyZXR1cm4gZm47XG59XG5cbi8qKlxuICogU3VwcG9ydCB0ZXN0aW5nIHVzaW5nIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuIFBhc3NlZCB0aGUgY3JlYXRlZCBkaXYgYW5kIGV4cGVjdHMgYSBib29sZWFuIHJlc3VsdFxuICovXG5mdW5jdGlvbiBhc3NlcnQoIGZuICkge1xuXHR2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuXHR0cnkge1xuXHRcdHJldHVybiAhIWZuKCBkaXYgKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSBmaW5hbGx5IHtcblx0XHQvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHRcblx0XHRpZiAoIGRpdi5wYXJlbnROb2RlICkge1xuXHRcdFx0ZGl2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGRpdiApO1xuXHRcdH1cblx0XHQvLyByZWxlYXNlIG1lbW9yeSBpbiBJRVxuXHRcdGRpdiA9IG51bGw7XG5cdH1cbn1cblxuLyoqXG4gKiBBZGRzIHRoZSBzYW1lIGhhbmRsZXIgZm9yIGFsbCBvZiB0aGUgc3BlY2lmaWVkIGF0dHJzXG4gKiBAcGFyYW0ge1N0cmluZ30gYXR0cnMgUGlwZS1zZXBhcmF0ZWQgbGlzdCBvZiBhdHRyaWJ1dGVzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyIFRoZSBtZXRob2QgdGhhdCB3aWxsIGJlIGFwcGxpZWRcbiAqL1xuZnVuY3Rpb24gYWRkSGFuZGxlKCBhdHRycywgaGFuZGxlciApIHtcblx0dmFyIGFyciA9IGF0dHJzLnNwbGl0KFwifFwiKSxcblx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdEV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5nc1xuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYlxuICovXG5mdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7XG5cdHZhciBjdXIgPSBiICYmIGEsXG5cdFx0ZGlmZiA9IGN1ciAmJiBhLm5vZGVUeXBlID09PSAxICYmIGIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdCggfmIuc291cmNlSW5kZXggfHwgTUFYX05FR0FUSVZFICkgLVxuXHRcdFx0KCB+YS5zb3VyY2VJbmRleCB8fCBNQVhfTkVHQVRJVkUgKTtcblxuXHQvLyBVc2UgSUUgc291cmNlSW5kZXggaWYgYXZhaWxhYmxlIG9uIGJvdGggbm9kZXNcblx0aWYgKCBkaWZmICkge1xuXHRcdHJldHVybiBkaWZmO1xuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgYiBmb2xsb3dzIGFcblx0aWYgKCBjdXIgKSB7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLm5leHRTaWJsaW5nKSApIHtcblx0XHRcdGlmICggY3VyID09PSBiICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGEgPyAxIDogLTE7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBpbnB1dCB0eXBlc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW5wdXRQc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGJ1dHRvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUJ1dHRvblBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiAobmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCIpICYmIGVsZW0udHlwZSA9PT0gdHlwZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5mdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggYXJndW1lbnQgKSB7XG5cdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdHZhciBqLFxuXHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblxuXHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHtcblx0XHRcdFx0XHRzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcbiAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHQvLyBkb2N1bWVudEVsZW1lbnQgaXMgdmVyaWZpZWQgZm9yIGNhc2VzIHdoZXJlIGl0IGRvZXNuJ3QgeWV0IGV4aXN0XG5cdC8vIChzdWNoIGFzIGxvYWRpbmcgaWZyYW1lcyBpbiBJRSAtICM0ODMzKVxuXHR2YXIgZG9jdW1lbnRFbGVtZW50ID0gZWxlbSAmJiAoZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0pLmRvY3VtZW50RWxlbWVudDtcblx0cmV0dXJuIGRvY3VtZW50RWxlbWVudCA/IGRvY3VtZW50RWxlbWVudC5ub2RlTmFtZSAhPT0gXCJIVE1MXCIgOiBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0cyBkb2N1bWVudC1yZWxhdGVkIHZhcmlhYmxlcyBvbmNlIGJhc2VkIG9uIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBbZG9jXSBBbiBlbGVtZW50IG9yIGRvY3VtZW50IG9iamVjdCB0byB1c2UgdG8gc2V0IHRoZSBkb2N1bWVudFxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY3VycmVudCBkb2N1bWVudFxuICovXG5zZXREb2N1bWVudCA9IFNpenpsZS5zZXREb2N1bWVudCA9IGZ1bmN0aW9uKCBub2RlICkge1xuXHR2YXIgaGFzQ29tcGFyZSwgcGFyZW50LFxuXHRcdGRvYyA9IG5vZGUgPyBub2RlLm93bmVyRG9jdW1lbnQgfHwgbm9kZSA6IHByZWZlcnJlZERvYztcblxuXHQvLyBJZiBubyBkb2N1bWVudCBhbmQgZG9jdW1lbnRFbGVtZW50IGlzIGF2YWlsYWJsZSwgcmV0dXJuXG5cdGlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9XG5cblx0Ly8gU2V0IG91ciBkb2N1bWVudFxuXHRkb2N1bWVudCA9IGRvYztcblx0ZG9jRWxlbSA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdHBhcmVudCA9IGRvYy5kZWZhdWx0VmlldztcblxuXHQvLyBTdXBwb3J0OiBJRT44XG5cdC8vIElmIGlmcmFtZSBkb2N1bWVudCBpcyBhc3NpZ25lZCB0byBcImRvY3VtZW50XCIgdmFyaWFibGUgYW5kIGlmIGlmcmFtZSBoYXMgYmVlbiByZWxvYWRlZCxcblx0Ly8gSUUgd2lsbCB0aHJvdyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3Igd2hlbiBhY2Nlc3NpbmcgXCJkb2N1bWVudFwiIHZhcmlhYmxlLCBzZWUgalF1ZXJ5ICMxMzkzNlxuXHQvLyBJRTYtOCBkbyBub3Qgc3VwcG9ydCB0aGUgZGVmYXVsdFZpZXcgcHJvcGVydHkgc28gcGFyZW50IHdpbGwgYmUgdW5kZWZpbmVkXG5cdGlmICggcGFyZW50ICYmIHBhcmVudCAhPT0gcGFyZW50LnRvcCApIHtcblx0XHQvLyBJRTExIGRvZXMgbm90IGhhdmUgYXR0YWNoRXZlbnQsIHNvIGFsbCBtdXN0IHN1ZmZlclxuXHRcdGlmICggcGFyZW50LmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRwYXJlbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJ1bmxvYWRcIiwgdW5sb2FkSGFuZGxlciwgZmFsc2UgKTtcblx0XHR9IGVsc2UgaWYgKCBwYXJlbnQuYXR0YWNoRXZlbnQgKSB7XG5cdFx0XHRwYXJlbnQuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlciApO1xuXHRcdH1cblx0fVxuXG5cdC8qIFN1cHBvcnQgdGVzdHNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRkb2N1bWVudElzSFRNTCA9ICFpc1hNTCggZG9jICk7XG5cblx0LyogQXR0cmlidXRlc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gU3VwcG9ydDogSUU8OFxuXHQvLyBWZXJpZnkgdGhhdCBnZXRBdHRyaWJ1dGUgcmVhbGx5IHJldHVybnMgYXR0cmlidXRlcyBhbmQgbm90IHByb3BlcnRpZXNcblx0Ly8gKGV4Y2VwdGluZyBJRTggYm9vbGVhbnMpXG5cdHN1cHBvcnQuYXR0cmlidXRlcyA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5jbGFzc05hbWUgPSBcImlcIjtcblx0XHRyZXR1cm4gIWRpdi5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIik7XG5cdH0pO1xuXG5cdC8qIGdldEVsZW1lbnQocylCeSpcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSByZXR1cm5zIG9ubHkgZWxlbWVudHNcblx0c3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRpdi5hcHBlbmRDaGlsZCggZG9jLmNyZWF0ZUNvbW1lbnQoXCJcIikgKTtcblx0XHRyZXR1cm4gIWRpdi5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBTdXBwb3J0OiBJRTw5XG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jLmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKTtcblxuXHQvLyBTdXBwb3J0OiBJRTwxMFxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50QnlJZCByZXR1cm5zIGVsZW1lbnRzIGJ5IG5hbWVcblx0Ly8gVGhlIGJyb2tlbiBnZXRFbGVtZW50QnlJZCBtZXRob2RzIGRvbid0IHBpY2sgdXAgcHJvZ3JhbWF0aWNhbGx5LXNldCBuYW1lcyxcblx0Ly8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0XG5cdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGRpdiApLmlkID0gZXhwYW5kbztcblx0XHRyZXR1cm4gIWRvYy5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jLmdldEVsZW1lbnRzQnlOYW1lKCBleHBhbmRvICkubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBJRCBmaW5kIGFuZCBmaWx0ZXJcblx0aWYgKCBzdXBwb3J0LmdldEJ5SWQgKSB7XG5cdFx0RXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHR2YXIgbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XG5cdFx0XHRcdC8vIENoZWNrIHBhcmVudE5vZGUgdG8gY2F0Y2ggd2hlbiBCbGFja2JlcnJ5IDQuNiByZXR1cm5zXG5cdFx0XHRcdC8vIG5vZGVzIHRoYXQgYXJlIG5vIGxvbmdlciBpbiB0aGUgZG9jdW1lbnQgIzY5NjNcblx0XHRcdFx0cmV0dXJuIG0gJiYgbS5wYXJlbnROb2RlID8gWyBtIF0gOiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fSBlbHNlIHtcblx0XHQvLyBTdXBwb3J0OiBJRTYvN1xuXHRcdC8vIGdldEVsZW1lbnRCeUlkIGlzIG5vdCByZWxpYWJsZSBhcyBhIGZpbmQgc2hvcnRjdXRcblx0XHRkZWxldGUgRXhwci5maW5kW1wiSURcIl07XG5cblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gIGZ1bmN0aW9uKCBpZCApIHtcblx0XHRcdHZhciBhdHRySWQgPSBpZC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgbm9kZSA9IHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7XG5cdFx0XHRcdHJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0fVxuXG5cdC8vIFRhZ1xuXHRFeHByLmZpbmRbXCJUQUdcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID9cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBEb2N1bWVudEZyYWdtZW50IG5vZGVzIGRvbid0IGhhdmUgZ0VCVE5cblx0XHRcdH0gZWxzZSBpZiAoIHN1cHBvcnQucXNhICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTtcblx0XHRcdH1cblx0XHR9IDpcblxuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0dG1wID0gW10sXG5cdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHQvLyBCeSBoYXBweSBjb2luY2lkZW5jZSwgYSAoYnJva2VuKSBnRUJUTiBhcHBlYXJzIG9uIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgdG9vXG5cdFx0XHRcdHJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50c1xuXHRcdFx0aWYgKCB0YWcgPT09IFwiKlwiICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHR0bXAucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0bXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHR9O1xuXG5cdC8vIENsYXNzXG5cdEV4cHIuZmluZFtcIkNMQVNTXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7XG5cdFx0aWYgKCBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0fTtcblxuXHQvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0XG5cblx0Ly8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSlcblx0cmJ1Z2d5TWF0Y2hlcyA9IFtdO1xuXG5cdC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG5cdC8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvclxuXHQvLyB3aGVuZXZlciBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgaXMgYWNjZXNzZWQgb24gYW4gaWZyYW1lXG5cdC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG5cdC8vIFNlZSBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM3OFxuXHRyYnVnZ3lRU0EgPSBbXTtcblxuXHRpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jLnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG5cdFx0Ly8gQnVpbGQgUVNBIHJlZ2V4XG5cdFx0Ly8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU2VsZWN0IGlzIHNldCB0byBlbXB0eSBzdHJpbmcgb24gcHVycG9zZVxuXHRcdFx0Ly8gVGhpcyBpcyB0byB0ZXN0IElFJ3MgdHJlYXRtZW50IG9mIG5vdCBleHBsaWNpdGx5XG5cdFx0XHQvLyBzZXR0aW5nIGEgYm9vbGVhbiBjb250ZW50IGF0dHJpYnV0ZSxcblx0XHRcdC8vIHNpbmNlIGl0cyBwcmVzZW5jZSBzaG91bGQgYmUgZW5vdWdoXG5cdFx0XHQvLyBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZGl2ICkuaW5uZXJIVE1MID0gXCI8YSBpZD0nXCIgKyBleHBhbmRvICsgXCInPjwvYT5cIiArXG5cdFx0XHRcdFwiPHNlbGVjdCBpZD0nXCIgKyBleHBhbmRvICsgXCItXFxmXScgbXNhbGxvd2NhcHR1cmU9Jyc+XCIgK1xuXHRcdFx0XHRcIjxvcHRpb24gc2VsZWN0ZWQ9Jyc+PC9vcHRpb24+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOCwgT3BlcmEgMTEtMTIuMTZcblx0XHRcdC8vIE5vdGhpbmcgc2hvdWxkIGJlIHNlbGVjdGVkIHdoZW4gZW1wdHkgc3RyaW5ncyBmb2xsb3cgXj0gb3IgJD0gb3IgKj1cblx0XHRcdC8vIFRoZSB0ZXN0IGF0dHJpYnV0ZSBtdXN0IGJlIHVua25vd24gaW4gT3BlcmEgYnV0IFwic2FmZVwiIGZvciBXaW5SVFxuXHRcdFx0Ly8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlsqXiRdPVwiICsgd2hpdGVzcGFjZSArIFwiKig/OicnfFxcXCJcXFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGFuZCBcInZhbHVlXCIgYXJlIG5vdCB0cmVhdGVkIGNvcnJlY3RseVxuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuMissIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS43K1xuXHRcdFx0aWYgKCAhZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoIFwiW2lkfj1cIiArIGV4cGFuZG8gKyBcIi1dXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwifj1cIik7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFdlYmtpdC9PcGVyYSAtIDpjaGVja2VkIHNob3VsZCByZXR1cm4gc2VsZWN0ZWQgb3B0aW9uIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0Ly8gSUU4IHRocm93cyBlcnJvciBoZXJlIGFuZCB3aWxsIG5vdCBzZWUgbGF0ZXIgdGVzdHNcblx0XHRcdGlmICggIWRpdi5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIjpjaGVja2VkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCssIGlPUyA4K1xuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNjg1MVxuXHRcdFx0Ly8gSW4tcGFnZSBgc2VsZWN0b3IjaWQgc2liaW5nLWNvbWJpbmF0b3Igc2VsZWN0b3JgIGZhaWxzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbCggXCJhI1wiICsgZXhwYW5kbyArIFwiKypcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIuIy4rWyt+XVwiKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRcdFx0Ly8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzXG5cdFx0XHQvLyBUaGUgdHlwZSBhbmQgbmFtZSBhdHRyaWJ1dGVzIGFyZSByZXN0cmljdGVkIGR1cmluZyAuaW5uZXJIVE1MIGFzc2lnbm1lbnRcblx0XHRcdHZhciBpbnB1dCA9IGRvYy5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0XHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcImhpZGRlblwiICk7XG5cdFx0XHRkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICkuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJEXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBFbmZvcmNlIGNhc2Utc2Vuc2l0aXZpdHkgb2YgbmFtZSBhdHRyaWJ1dGVcblx0XHRcdGlmICggZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIm5hbWVcIiArIHdoaXRlc3BhY2UgKyBcIipbKl4kfCF+XT89XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRkYgMy41IC0gOmVuYWJsZWQvOmRpc2FibGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGhpZGRlbiBlbGVtZW50cyBhcmUgc3RpbGwgZW5hYmxlZClcblx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRpZiAoICFkaXYucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiOmVuYWJsZWRcIiwgXCI6ZGlzYWJsZWRcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPcGVyYSAxMC0xMSBkb2VzIG5vdCB0aHJvdyBvbiBwb3N0LWNvbW1hIGludmFsaWQgcHNldWRvc1xuXHRcdFx0ZGl2LnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpO1xuXHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIsLio6XCIpO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKCAoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgPSBybmF0aXZlLnRlc3QoIChtYXRjaGVzID0gZG9jRWxlbS5tYXRjaGVzIHx8XG5cdFx0ZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ub01hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IpICkpICkge1xuXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBkaXYgKSB7XG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdC8vIG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgKElFIDkpXG5cdFx0XHRzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBkaXYsIFwiZGl2XCIgKTtcblxuXHRcdFx0Ly8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvblxuXHRcdFx0Ly8gR2Vja28gZG9lcyBub3QgZXJyb3IsIHJldHVybnMgZmFsc2UgaW5zdGVhZFxuXHRcdFx0bWF0Y2hlcy5jYWxsKCBkaXYsIFwiW3MhPScnXTp4XCIgKTtcblx0XHRcdHJidWdneU1hdGNoZXMucHVzaCggXCIhPVwiLCBwc2V1ZG9zICk7XG5cdFx0fSk7XG5cdH1cblxuXHRyYnVnZ3lRU0EgPSByYnVnZ3lRU0EubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneVFTQS5qb2luKFwifFwiKSApO1xuXHRyYnVnZ3lNYXRjaGVzID0gcmJ1Z2d5TWF0Y2hlcy5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5TWF0Y2hlcy5qb2luKFwifFwiKSApO1xuXG5cdC8qIENvbnRhaW5zXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblx0aGFzQ29tcGFyZSA9IHJuYXRpdmUudGVzdCggZG9jRWxlbS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiApO1xuXG5cdC8vIEVsZW1lbnQgY29udGFpbnMgYW5vdGhlclxuXHQvLyBQdXJwb3NlZnVsbHkgZG9lcyBub3QgaW1wbGVtZW50IGluY2x1c2l2ZSBkZXNjZW5kZW50XG5cdC8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmXG5cdGNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHR2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLFxuXHRcdFx0XHRidXAgPSBiICYmIGIucGFyZW50Tm9kZTtcblx0XHRcdHJldHVybiBhID09PSBidXAgfHwgISEoIGJ1cCAmJiBidXAubm9kZVR5cGUgPT09IDEgJiYgKFxuXHRcdFx0XHRhZG93bi5jb250YWlucyA/XG5cdFx0XHRcdFx0YWRvd24uY29udGFpbnMoIGJ1cCApIDpcblx0XHRcdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTZcblx0XHRcdCkpO1xuXHRcdH0gOlxuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0aWYgKCBiICkge1xuXHRcdFx0XHR3aGlsZSAoIChiID0gYi5wYXJlbnROb2RlKSApIHtcblx0XHRcdFx0XHRpZiAoIGIgPT09IGEgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdC8qIFNvcnRpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIERvY3VtZW50IG9yZGVyIHNvcnRpbmdcblx0c29ydE9yZGVyID0gaGFzQ29tcGFyZSA/XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXG5cdFx0Ly8gRmxhZyBmb3IgZHVwbGljYXRlIHJlbW92YWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBvbiBtZXRob2QgZXhpc3RlbmNlIGlmIG9ubHkgb25lIGlucHV0IGhhcyBjb21wYXJlRG9jdW1lbnRQb3NpdGlvblxuXHRcdHZhciBjb21wYXJlID0gIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtcblx0XHRpZiAoIGNvbXBhcmUgKSB7XG5cdFx0XHRyZXR1cm4gY29tcGFyZTtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgcG9zaXRpb24gaWYgYm90aCBpbnB1dHMgYmVsb25nIHRvIHRoZSBzYW1lIGRvY3VtZW50XG5cdFx0Y29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PT0gKCBiLm93bmVyRG9jdW1lbnQgfHwgYiApID9cblx0XHRcdGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGIgKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSB3ZSBrbm93IHRoZXkgYXJlIGRpc2Nvbm5lY3RlZFxuXHRcdFx0MTtcblxuXHRcdC8vIERpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdGlmICggY29tcGFyZSAmIDEgfHxcblx0XHRcdCghc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlKSApIHtcblxuXHRcdFx0Ly8gQ2hvb3NlIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaXMgcmVsYXRlZCB0byBvdXIgcHJlZmVycmVkIGRvY3VtZW50XG5cdFx0XHRpZiAoIGEgPT09IGRvYyB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGIgPT09IGRvYyB8fCBiLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGIpICkge1xuXHRcdFx0XHRyZXR1cm4gMTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFpbnRhaW4gb3JpZ2luYWwgb3JkZXJcblx0XHRcdHJldHVybiBzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGNvbXBhcmUgJiA0ID8gLTEgOiAxO1xuXHR9IDpcblx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0Ly8gRXhpdCBlYXJseSBpZiB0aGUgbm9kZXMgYXJlIGlkZW50aWNhbFxuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdXAgPSBhLnBhcmVudE5vZGUsXG5cdFx0XHRidXAgPSBiLnBhcmVudE5vZGUsXG5cdFx0XHRhcCA9IFsgYSBdLFxuXHRcdFx0YnAgPSBbIGIgXTtcblxuXHRcdC8vIFBhcmVudGxlc3Mgbm9kZXMgYXJlIGVpdGhlciBkb2N1bWVudHMgb3IgZGlzY29ubmVjdGVkXG5cdFx0aWYgKCAhYXVwIHx8ICFidXAgKSB7XG5cdFx0XHRyZXR1cm4gYSA9PT0gZG9jID8gLTEgOlxuXHRcdFx0XHRiID09PSBkb2MgPyAxIDpcblx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRidXAgPyAxIDpcblx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHR9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdGN1ciA9IGE7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YXAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXHRcdGN1ciA9IGI7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHR3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHtcblx0XHRcdGkrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gaSA/XG5cdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3Rcblx0XHRcdGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG5cdFx0XHRicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHQwO1xuXHR9O1xuXG5cdHJldHVybiBkb2M7XG59O1xuXG5TaXp6bGUubWF0Y2hlcyA9IGZ1bmN0aW9uKCBleHByLCBlbGVtZW50cyApIHtcblx0cmV0dXJuIFNpenpsZSggZXhwciwgbnVsbCwgbnVsbCwgZWxlbWVudHMgKTtcbn07XG5cblNpenpsZS5tYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbiggZWxlbSwgZXhwciApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0Ly8gTWFrZSBzdXJlIHRoYXQgYXR0cmlidXRlIHNlbGVjdG9ycyBhcmUgcXVvdGVkXG5cdGV4cHIgPSBleHByLnJlcGxhY2UoIHJhdHRyaWJ1dGVRdW90ZXMsIFwiPSckMSddXCIgKTtcblxuXHRpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0KCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuXHRcdCggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuXHRcdHRyeSB7XG5cdFx0XHR2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cblx0XHRcdC8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRcdGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcblx0XHRcdFx0XHQvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuXHRcdFx0XHRcdC8vIGZyYWdtZW50IGluIElFIDlcblx0XHRcdFx0XHRlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHt9XG5cdH1cblxuXHRyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwO1xufTtcblxuU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXHRyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTtcbn07XG5cblNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdHZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sXG5cdFx0Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpXG5cdFx0dmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0Zm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDpcblx0XHRcdHVuZGVmaW5lZDtcblxuXHRyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgP1xuXHRcdHZhbCA6XG5cdFx0c3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDpcblx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xufTtcblxuU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgbXNnICk7XG59O1xuXG4vKipcbiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzXG4gKi9cblNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG5cdHZhciBlbGVtLFxuXHRcdGR1cGxpY2F0ZXMgPSBbXSxcblx0XHRqID0gMCxcblx0XHRpID0gMDtcblxuXHQvLyBVbmxlc3Mgd2UgKmtub3cqIHdlIGNhbiBkZXRlY3QgZHVwbGljYXRlcywgYXNzdW1lIHRoZWlyIHByZXNlbmNlXG5cdGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG5cdHNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApO1xuXHRyZXN1bHRzLnNvcnQoIHNvcnRPcmRlciApO1xuXG5cdGlmICggaGFzRHVwbGljYXRlICkge1xuXHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0aWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7XG5cdFx0XHRcdGogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHNcblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvc2l6emxlL3B1bGwvMjI1XG5cdHNvcnRJbnB1dCA9IG51bGw7XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW1cbiAqL1xuZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBub2RlLFxuXHRcdHJldCA9IFwiXCIsXG5cdFx0aSA9IDAsXG5cdFx0bm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdGlmICggIW5vZGVUeXBlICkge1xuXHRcdC8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5XG5cdFx0d2hpbGUgKCAobm9kZSA9IGVsZW1baSsrXSkgKSB7XG5cdFx0XHQvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2Rlc1xuXHRcdFx0cmV0ICs9IGdldFRleHQoIG5vZGUgKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHtcblx0XHQvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzXG5cdFx0Ly8gaW5uZXJUZXh0IHVzYWdlIHJlbW92ZWQgZm9yIGNvbnNpc3RlbmN5IG9mIG5ldyBsaW5lcyAoalF1ZXJ5ICMxMTE1Mylcblx0XHRpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdHJldCArPSBnZXRUZXh0KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMyB8fCBub2RlVHlwZSA9PT0gNCApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVmFsdWU7XG5cdH1cblx0Ly8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzXG5cblx0cmV0dXJuIHJldDtcbn07XG5cbkV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXG5cdC8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlclxuXHRjYWNoZUxlbmd0aDogNTAsXG5cblx0Y3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cblx0bWF0Y2g6IG1hdGNoRXhwcixcblxuXHRhdHRySGFuZGxlOiB7fSxcblxuXHRmaW5kOiB7fSxcblxuXHRyZWxhdGl2ZToge1xuXHRcdFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCIgXCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiB9LFxuXHRcdFwiK1wiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIn5cIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIgfVxuXHR9LFxuXG5cdHByZUZpbHRlcjoge1xuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdC8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkXG5cdFx0XHRtYXRjaFszXSA9ICggbWF0Y2hbM10gfHwgbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdGlmICggbWF0Y2hbMl0gPT09IFwifj1cIiApIHtcblx0XHRcdFx0bWF0Y2hbM10gPSBcIiBcIiArIG1hdGNoWzNdICsgXCIgXCI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgNCApO1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdC8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbXCJDSElMRFwiXVxuXHRcdFx0XHQxIHR5cGUgKG9ubHl8bnRofC4uLilcblx0XHRcdFx0MiB3aGF0IChjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHQzIGFyZ3VtZW50IChldmVufG9kZHxcXGQqfFxcZCpuKFsrLV1cXGQrKT98Li4uKVxuXHRcdFx0XHQ0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xcZCpufClcblx0XHRcdFx0NSBzaWduIG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ2IHggb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDcgc2lnbiBvZiB5LWNvbXBvbmVudFxuXHRcdFx0XHQ4IHkgb2YgeS1jb21wb25lbnRcblx0XHRcdCovXG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gXCJudGhcIiApIHtcblx0XHRcdFx0Ly8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnRcblx0XHRcdFx0aWYgKCAhbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxEXG5cdFx0XHRcdC8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzFcblx0XHRcdFx0bWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09IFwiZXZlblwiIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICkgKTtcblx0XHRcdFx0bWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApO1xuXG5cdFx0XHQvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaDtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0dmFyIGV4Y2Vzcyxcblx0XHRcdFx0dW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07XG5cblx0XHRcdGlmICggbWF0Y2hFeHByW1wiQ0hJTERcIl0udGVzdCggbWF0Y2hbMF0gKSApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG5cdFx0XHRpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRtYXRjaFsyXSA9IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCI7XG5cblx0XHRcdC8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCB1bnF1b3RlZCAmJiBycHNldWRvLnRlc3QoIHVucXVvdGVkICkgJiZcblx0XHRcdFx0Ly8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcblx0XHRcdFx0KGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJlxuXHRcdFx0XHQvLyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNsb3NpbmcgcGFyZW50aGVzaXNcblx0XHRcdFx0KGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7XG5cblx0XHRcdFx0Ly8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXhcblx0XHRcdFx0bWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHRcdG1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudClcblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgMyApO1xuXHRcdH1cblx0fSxcblxuXHRmaWx0ZXI6IHtcblxuXHRcdFwiVEFHXCI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkge1xuXHRcdFx0dmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lO1xuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNMQVNTXCI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArIFwiIFwiIF07XG5cblx0XHRcdHJldHVybiBwYXR0ZXJuIHx8XG5cdFx0XHRcdChwYXR0ZXJuID0gbmV3IFJlZ0V4cCggXCIoXnxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIGNsYXNzTmFtZSArIFwiKFwiICsgd2hpdGVzcGFjZSArIFwifCQpXCIgKSkgJiZcblx0XHRcdFx0Y2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIgJiYgZWxlbS5jbGFzc05hbWUgfHwgdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIiApO1xuXHRcdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHRcdGlmICggcmVzdWx0ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIiE9XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhb3BlcmF0b3IgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQgKz0gXCJcIjtcblxuXHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiPVwiID8gcmVzdWx0ID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiIT1cIiA/IHJlc3VsdCAhPT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIl49XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA9PT0gMCA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiKj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiQ9XCIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIn49XCIgPyAoIFwiIFwiICsgcmVzdWx0LnJlcGxhY2UoIHJ3aGl0ZXNwYWNlLCBcIiBcIiApICsgXCIgXCIgKS5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcInw9XCIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArIFwiLVwiIDpcblx0XHRcdFx0XHRmYWxzZTtcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIHR5cGUsIHdoYXQsIGFyZ3VtZW50LCBmaXJzdCwgbGFzdCApIHtcblx0XHRcdHZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09IFwibnRoXCIsXG5cdFx0XHRcdGZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSBcImxhc3RcIixcblx0XHRcdFx0b2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cblx0XHRcdHJldHVybiBmaXJzdCA9PT0gMSAmJiBsYXN0ID09PSAwID9cblxuXHRcdFx0XHQvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0fSA6XG5cblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgY2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIGRpZmYsIG5vZGVJbmRleCwgc3RhcnQsXG5cdFx0XHRcdFx0XHRkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLFxuXHRcdFx0XHRcdFx0cGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLFxuXHRcdFx0XHRcdFx0bmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHR1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZTtcblxuXHRcdFx0XHRcdGlmICggcGFyZW50ICkge1xuXG5cdFx0XHRcdFx0XHQvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0XHRpZiAoIHNpbXBsZSApIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBkaXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggb2ZUeXBlID8gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDogbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbylcblx0XHRcdFx0XHRcdFx0XHRzdGFydCA9IGRpciA9IHR5cGUgPT09IFwib25seVwiICYmICFzdGFydCAmJiBcIm5leHRTaWJsaW5nXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07XG5cblx0XHRcdFx0XHRcdC8vIG5vbi14bWwgOm50aC1jaGlsZCguLi4pIHN0b3JlcyBjYWNoZSBkYXRhIG9uIGBwYXJlbnRgXG5cdFx0XHRcdFx0XHRpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNlZWsgYGVsZW1gIGZyb20gYSBwcmV2aW91c2x5LWNhY2hlZCBpbmRleFxuXHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gcGFyZW50WyBleHBhbmRvIF0gfHwgKHBhcmVudFsgZXhwYW5kbyBdID0ge30pO1xuXHRcdFx0XHRcdFx0XHRjYWNoZSA9IG91dGVyQ2FjaGVbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbMF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbMV07XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBjYWNoZVswXSA9PT0gZGlycnVucyAmJiBjYWNoZVsyXTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHNlZWtpbmcgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVha1xuXHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGVbIHR5cGUgXSA9IFsgZGlycnVucywgbm9kZUluZGV4LCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gVXNlIHByZXZpb3VzbHktY2FjaGVkIGVsZW1lbnQgaW5kZXggaWYgYXZhaWxhYmxlXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB1c2VDYWNoZSAmJiAoY2FjaGUgPSAoZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSkpWyB0eXBlIF0pICYmIGNhY2hlWzBdID09PSBkaXJydW5zICkge1xuXHRcdFx0XHRcdFx0XHRkaWZmID0gY2FjaGVbMV07XG5cblx0XHRcdFx0XHRcdC8vIHhtbCA6bnRoLWNoaWxkKC4uLikgb3IgOm50aC1sYXN0LWNoaWxkKC4uLikgb3IgOm50aCgtbGFzdCk/LW9mLXR5cGUoLi4uKVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdGlmICggKCBvZlR5cGUgPyBub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOiBub2RlLm5vZGVUeXBlID09PSAxICkgJiYgKytkaWZmICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0KG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pKVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIEluY29ycG9yYXRlIHRoZSBvZmZzZXQsIHRoZW4gY2hlY2sgYWdhaW5zdCBjeWNsZSBzaXplXG5cdFx0XHRcdFx0XHRkaWZmIC09IGxhc3Q7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZGlmZiA9PT0gZmlyc3QgfHwgKCBkaWZmICUgZmlyc3QgPT09IDAgJiYgZGlmZiAvIGZpcnN0ID49IDAgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiUFNFVURPXCI6IGZ1bmN0aW9uKCBwc2V1ZG8sIGFyZ3VtZW50ICkge1xuXHRcdFx0Ly8gcHNldWRvLWNsYXNzIG5hbWVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI3BzZXVkby1jbGFzc2VzXG5cdFx0XHQvLyBQcmlvcml0aXplIGJ5IGNhc2Ugc2Vuc2l0aXZpdHkgaW4gY2FzZSBjdXN0b20gcHNldWRvcyBhcmUgYWRkZWQgd2l0aCB1cHBlcmNhc2UgbGV0dGVyc1xuXHRcdFx0Ly8gUmVtZW1iZXIgdGhhdCBzZXRGaWx0ZXJzIGluaGVyaXRzIGZyb20gcHNldWRvc1xuXHRcdFx0dmFyIGFyZ3MsXG5cdFx0XHRcdGZuID0gRXhwci5wc2V1ZG9zWyBwc2V1ZG8gXSB8fCBFeHByLnNldEZpbHRlcnNbIHBzZXVkby50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIiArIHBzZXVkbyApO1xuXG5cdFx0XHQvLyBUaGUgdXNlciBtYXkgdXNlIGNyZWF0ZVBzZXVkbyB0byBpbmRpY2F0ZSB0aGF0XG5cdFx0XHQvLyBhcmd1bWVudHMgYXJlIG5lZWRlZCB0byBjcmVhdGUgdGhlIGZpbHRlciBmdW5jdGlvblxuXHRcdFx0Ly8ganVzdCBhcyBTaXp6bGUgZG9lc1xuXHRcdFx0aWYgKCBmblsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRyZXR1cm4gZm4oIGFyZ3VtZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEJ1dCBtYWludGFpbiBzdXBwb3J0IGZvciBvbGQgc2lnbmF0dXJlc1xuXHRcdFx0aWYgKCBmbi5sZW5ndGggPiAxICkge1xuXHRcdFx0XHRhcmdzID0gWyBwc2V1ZG8sIHBzZXVkbywgXCJcIiwgYXJndW1lbnQgXTtcblx0XHRcdFx0cmV0dXJuIEV4cHIuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eSggcHNldWRvLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0XHRcdFx0dmFyIGlkeCxcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZCA9IGZuKCBzZWVkLCBhcmd1bWVudCApLFxuXHRcdFx0XHRcdFx0XHRpID0gbWF0Y2hlZC5sZW5ndGg7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWR4ID0gaW5kZXhPZiggc2VlZCwgbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0XHRzZWVkWyBpZHggXSA9ICEoIG1hdGNoZXNbIGlkeCBdID0gbWF0Y2hlZFtpXSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pIDpcblx0XHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBmbiggZWxlbSwgMCwgYXJncyApO1xuXHRcdFx0XHRcdH07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBmbjtcblx0XHR9XG5cdH0sXG5cblx0cHNldWRvczoge1xuXHRcdC8vIFBvdGVudGlhbGx5IGNvbXBsZXggcHNldWRvc1xuXHRcdFwibm90XCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHQvLyBUcmltIHRoZSBzZWxlY3RvciBwYXNzZWQgdG8gY29tcGlsZVxuXHRcdFx0Ly8gdG8gYXZvaWQgdHJlYXRpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmdcblx0XHRcdC8vIHNwYWNlcyBhcyBjb21iaW5hdG9yc1xuXHRcdFx0dmFyIGlucHV0ID0gW10sXG5cdFx0XHRcdHJlc3VsdHMgPSBbXSxcblx0XHRcdFx0bWF0Y2hlciA9IGNvbXBpbGUoIHNlbGVjdG9yLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSApO1xuXG5cdFx0XHRyZXR1cm4gbWF0Y2hlclsgZXhwYW5kbyBdID9cblx0XHRcdFx0bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdFx0XHR1bm1hdGNoZWQgPSBtYXRjaGVyKCBzZWVkLCBudWxsLCB4bWwsIFtdICksXG5cdFx0XHRcdFx0XHRpID0gc2VlZC5sZW5ndGg7XG5cblx0XHRcdFx0XHQvLyBNYXRjaCBlbGVtZW50cyB1bm1hdGNoZWQgYnkgYG1hdGNoZXJgXG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gdW5tYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0c2VlZFtpXSA9ICEobWF0Y2hlc1tpXSA9IGVsZW0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSkgOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdGlucHV0WzBdID0gZWxlbTtcblx0XHRcdFx0XHRtYXRjaGVyKCBpbnB1dCwgbnVsbCwgeG1sLCByZXN1bHRzICk7XG5cdFx0XHRcdFx0Ly8gRG9uJ3Qga2VlcCB0aGUgZWxlbWVudCAoaXNzdWUgIzI5OSlcblx0XHRcdFx0XHRpbnB1dFswXSA9IG51bGw7XG5cdFx0XHRcdFx0cmV0dXJuICFyZXN1bHRzLnBvcCgpO1xuXHRcdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0XCJoYXNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIFNpenpsZSggc2VsZWN0b3IsIGVsZW0gKS5sZW5ndGggPiAwO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiY29udGFpbnNcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0dGV4dCA9IHRleHQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS50ZXh0Q29udGVudCB8fCBlbGVtLmlubmVyVGV4dCB8fCBnZXRUZXh0KCBlbGVtICkgKS5pbmRleE9mKCB0ZXh0ICkgPiAtMTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBcIldoZXRoZXIgYW4gZWxlbWVudCBpcyByZXByZXNlbnRlZCBieSBhIDpsYW5nKCkgc2VsZWN0b3Jcblx0XHQvLyBpcyBiYXNlZCBzb2xlbHkgb24gdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZVxuXHRcdC8vIGJlaW5nIGVxdWFsIHRvIHRoZSBpZGVudGlmaWVyIEMsXG5cdFx0Ly8gb3IgYmVnaW5uaW5nIHdpdGggdGhlIGlkZW50aWZpZXIgQyBpbW1lZGlhdGVseSBmb2xsb3dlZCBieSBcIi1cIi5cblx0XHQvLyBUaGUgbWF0Y2hpbmcgb2YgQyBhZ2FpbnN0IHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWUgaXMgcGVyZm9ybWVkIGNhc2UtaW5zZW5zaXRpdmVseS5cblx0XHQvLyBUaGUgaWRlbnRpZmllciBDIGRvZXMgbm90IGhhdmUgdG8gYmUgYSB2YWxpZCBsYW5ndWFnZSBuYW1lLlwiXG5cdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNsYW5nLXBzZXVkb1xuXHRcdFwibGFuZ1wiOiBtYXJrRnVuY3Rpb24oIGZ1bmN0aW9uKCBsYW5nICkge1xuXHRcdFx0Ly8gbGFuZyB2YWx1ZSBtdXN0IGJlIGEgdmFsaWQgaWRlbnRpZmllclxuXHRcdFx0aWYgKCAhcmlkZW50aWZpZXIudGVzdChsYW5nIHx8IFwiXCIpICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIFwidW5zdXBwb3J0ZWQgbGFuZzogXCIgKyBsYW5nICk7XG5cdFx0XHR9XG5cdFx0XHRsYW5nID0gbGFuZy5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBlbGVtTGFuZztcblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdGlmICggKGVsZW1MYW5nID0gZG9jdW1lbnRJc0hUTUwgP1xuXHRcdFx0XHRcdFx0ZWxlbS5sYW5nIDpcblx0XHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIikgfHwgZWxlbS5nZXRBdHRyaWJ1dGUoXCJsYW5nXCIpKSApIHtcblxuXHRcdFx0XHRcdFx0ZWxlbUxhbmcgPSBlbGVtTGFuZy50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW1MYW5nID09PSBsYW5nIHx8IGVsZW1MYW5nLmluZGV4T2YoIGxhbmcgKyBcIi1cIiApID09PSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSB3aGlsZSAoIChlbGVtID0gZWxlbS5wYXJlbnROb2RlKSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICk7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHQvLyBNaXNjZWxsYW5lb3VzXG5cdFx0XCJ0YXJnZXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbiAmJiB3aW5kb3cubG9jYXRpb24uaGFzaDtcblx0XHRcdHJldHVybiBoYXNoICYmIGhhc2guc2xpY2UoIDEgKSA9PT0gZWxlbS5pZDtcblx0XHR9LFxuXG5cdFx0XCJyb290XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY0VsZW07XG5cdFx0fSxcblxuXHRcdFwiZm9jdXNcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAmJiAoIWRvY3VtZW50Lmhhc0ZvY3VzIHx8IGRvY3VtZW50Lmhhc0ZvY3VzKCkpICYmICEhKGVsZW0udHlwZSB8fCBlbGVtLmhyZWYgfHwgfmVsZW0udGFiSW5kZXgpO1xuXHRcdH0sXG5cblx0XHQvLyBCb29sZWFuIHByb3BlcnRpZXNcblx0XHRcImVuYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZmFsc2U7XG5cdFx0fSxcblxuXHRcdFwiZGlzYWJsZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJjaGVja2VkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gSW4gQ1NTMywgOmNoZWNrZWQgc2hvdWxkIHJldHVybiBib3RoIGNoZWNrZWQgYW5kIHNlbGVjdGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDExL1JFQy1jc3MzLXNlbGVjdG9ycy0yMDExMDkyOS8jY2hlY2tlZFxuXHRcdFx0dmFyIG5vZGVOYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIChub2RlTmFtZSA9PT0gXCJpbnB1dFwiICYmICEhZWxlbS5jaGVja2VkKSB8fCAobm9kZU5hbWUgPT09IFwib3B0aW9uXCIgJiYgISFlbGVtLnNlbGVjdGVkKTtcblx0XHR9LFxuXG5cdFx0XCJzZWxlY3RlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEFjY2Vzc2luZyB0aGlzIHByb3BlcnR5IG1ha2VzIHNlbGVjdGVkLWJ5LWRlZmF1bHRcblx0XHRcdC8vIG9wdGlvbnMgaW4gU2FmYXJpIHdvcmsgcHJvcGVybHlcblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRlbGVtLnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGVsZW0uc2VsZWN0ZWQgPT09IHRydWU7XG5cdFx0fSxcblxuXHRcdC8vIENvbnRlbnRzXG5cdFx0XCJlbXB0eVwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jZW1wdHktcHNldWRvXG5cdFx0XHQvLyA6ZW1wdHkgaXMgbmVnYXRlZCBieSBlbGVtZW50ICgxKSBvciBjb250ZW50IG5vZGVzICh0ZXh0OiAzOyBjZGF0YTogNDsgZW50aXR5IHJlZjogNSksXG5cdFx0XHQvLyAgIGJ1dCBub3QgYnkgb3RoZXJzIChjb21tZW50OiA4OyBwcm9jZXNzaW5nIGluc3RydWN0aW9uOiA3OyBldGMuKVxuXHRcdFx0Ly8gbm9kZVR5cGUgPCA2IHdvcmtzIGJlY2F1c2UgYXR0cmlidXRlcyAoMikgZG8gbm90IGFwcGVhciBhcyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA8IDYgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0XCJwYXJlbnRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gIUV4cHIucHNldWRvc1tcImVtcHR5XCJdKCBlbGVtICk7XG5cdFx0fSxcblxuXHRcdC8vIEVsZW1lbnQvaW5wdXQgdHlwZXNcblx0XHRcImhlYWRlclwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaGVhZGVyLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJpbnB1dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiByaW5wdXRzLnRlc3QoIGVsZW0ubm9kZU5hbWUgKTtcblx0XHR9LFxuXG5cdFx0XCJidXR0b25cIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgJiYgZWxlbS50eXBlID09PSBcImJ1dHRvblwiIHx8IG5hbWUgPT09IFwiYnV0dG9uXCI7XG5cdFx0fSxcblxuXHRcdFwidGV4dFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBhdHRyO1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICYmXG5cdFx0XHRcdGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCIgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRTw4XG5cdFx0XHRcdC8vIE5ldyBIVE1MNSBhdHRyaWJ1dGUgdmFsdWVzIChlLmcuLCBcInNlYXJjaFwiKSBhcHBlYXIgd2l0aCBlbGVtLnR5cGUgPT09IFwidGV4dFwiXG5cdFx0XHRcdCggKGF0dHIgPSBlbGVtLmdldEF0dHJpYnV0ZShcInR5cGVcIikpID09IG51bGwgfHwgYXR0ci50b0xvd2VyQ2FzZSgpID09PSBcInRleHRcIiApO1xuXHRcdH0sXG5cblx0XHQvLyBQb3NpdGlvbi1pbi1jb2xsZWN0aW9uXG5cdFx0XCJmaXJzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIFsgMCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJsYXN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIFsgbGVuZ3RoIC0gMSBdO1xuXHRcdH0pLFxuXG5cdFx0XCJlcVwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHRyZXR1cm4gWyBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50IF07XG5cdFx0fSksXG5cblx0XHRcImV2ZW5cIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcIm9kZFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwibHRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyAtLWkgPj0gMDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJndFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7ICsraSA8IGxlbmd0aDsgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pXG5cdH1cbn07XG5cbkV4cHIucHNldWRvc1tcIm50aFwiXSA9IEV4cHIucHNldWRvc1tcImVxXCJdO1xuXG4vLyBBZGQgYnV0dG9uL2lucHV0IHR5cGUgcHNldWRvc1xuZm9yICggaSBpbiB7IHJhZGlvOiB0cnVlLCBjaGVja2JveDogdHJ1ZSwgZmlsZTogdHJ1ZSwgcGFzc3dvcmQ6IHRydWUsIGltYWdlOiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlSW5wdXRQc2V1ZG8oIGkgKTtcbn1cbmZvciAoIGkgaW4geyBzdWJtaXQ6IHRydWUsIHJlc2V0OiB0cnVlIH0gKSB7XG5cdEV4cHIucHNldWRvc1sgaSBdID0gY3JlYXRlQnV0dG9uUHNldWRvKCBpICk7XG59XG5cbi8vIEVhc3kgQVBJIGZvciBjcmVhdGluZyBuZXcgc2V0RmlsdGVyc1xuZnVuY3Rpb24gc2V0RmlsdGVycygpIHt9XG5zZXRGaWx0ZXJzLnByb3RvdHlwZSA9IEV4cHIuZmlsdGVycyA9IEV4cHIucHNldWRvcztcbkV4cHIuc2V0RmlsdGVycyA9IG5ldyBzZXRGaWx0ZXJzKCk7XG5cbnRva2VuaXplID0gU2l6emxlLnRva2VuaXplID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBwYXJzZU9ubHkgKSB7XG5cdHZhciBtYXRjaGVkLCBtYXRjaCwgdG9rZW5zLCB0eXBlLFxuXHRcdHNvRmFyLCBncm91cHMsIHByZUZpbHRlcnMsXG5cdFx0Y2FjaGVkID0gdG9rZW5DYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggY2FjaGVkICkge1xuXHRcdHJldHVybiBwYXJzZU9ubHkgPyAwIDogY2FjaGVkLnNsaWNlKCAwICk7XG5cdH1cblxuXHRzb0ZhciA9IHNlbGVjdG9yO1xuXHRncm91cHMgPSBbXTtcblx0cHJlRmlsdGVycyA9IEV4cHIucHJlRmlsdGVyO1xuXG5cdHdoaWxlICggc29GYXIgKSB7XG5cblx0XHQvLyBDb21tYSBhbmQgZmlyc3QgcnVuXG5cdFx0aWYgKCAhbWF0Y2hlZCB8fCAobWF0Y2ggPSByY29tbWEuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRpZiAoIG1hdGNoICkge1xuXHRcdFx0XHQvLyBEb24ndCBjb25zdW1lIHRyYWlsaW5nIGNvbW1hcyBhcyB2YWxpZFxuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaFswXS5sZW5ndGggKSB8fCBzb0Zhcjtcblx0XHRcdH1cblx0XHRcdGdyb3Vwcy5wdXNoKCAodG9rZW5zID0gW10pICk7XG5cdFx0fVxuXG5cdFx0bWF0Y2hlZCA9IGZhbHNlO1xuXG5cdFx0Ly8gQ29tYmluYXRvcnNcblx0XHRpZiAoIChtYXRjaCA9IHJjb21iaW5hdG9ycy5leGVjKCBzb0ZhciApKSApIHtcblx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0Ly8gQ2FzdCBkZXNjZW5kYW50IGNvbWJpbmF0b3JzIHRvIHNwYWNlXG5cdFx0XHRcdHR5cGU6IG1hdGNoWzBdLnJlcGxhY2UoIHJ0cmltLCBcIiBcIiApXG5cdFx0XHR9KTtcblx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0Ly8gRmlsdGVyc1xuXHRcdGZvciAoIHR5cGUgaW4gRXhwci5maWx0ZXIgKSB7XG5cdFx0XHRpZiAoIChtYXRjaCA9IG1hdGNoRXhwclsgdHlwZSBdLmV4ZWMoIHNvRmFyICkpICYmICghcHJlRmlsdGVyc1sgdHlwZSBdIHx8XG5cdFx0XHRcdChtYXRjaCA9IHByZUZpbHRlcnNbIHR5cGUgXSggbWF0Y2ggKSkpICkge1xuXHRcdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdFx0dG9rZW5zLnB1c2goe1xuXHRcdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdFx0bWF0Y2hlczogbWF0Y2hcblx0XHRcdFx0fSk7XG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoZWQubGVuZ3RoICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCAhbWF0Y2hlZCApIHtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbGVuZ3RoIG9mIHRoZSBpbnZhbGlkIGV4Y2Vzc1xuXHQvLyBpZiB3ZSdyZSBqdXN0IHBhcnNpbmdcblx0Ly8gT3RoZXJ3aXNlLCB0aHJvdyBhbiBlcnJvciBvciByZXR1cm4gdG9rZW5zXG5cdHJldHVybiBwYXJzZU9ubHkgP1xuXHRcdHNvRmFyLmxlbmd0aCA6XG5cdFx0c29GYXIgP1xuXHRcdFx0U2l6emxlLmVycm9yKCBzZWxlY3RvciApIDpcblx0XHRcdC8vIENhY2hlIHRoZSB0b2tlbnNcblx0XHRcdHRva2VuQ2FjaGUoIHNlbGVjdG9yLCBncm91cHMgKS5zbGljZSggMCApO1xufTtcblxuZnVuY3Rpb24gdG9TZWxlY3RvciggdG9rZW5zICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRzZWxlY3RvciA9IFwiXCI7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdHNlbGVjdG9yICs9IHRva2Vuc1tpXS52YWx1ZTtcblx0fVxuXHRyZXR1cm4gc2VsZWN0b3I7XG59XG5cbmZ1bmN0aW9uIGFkZENvbWJpbmF0b3IoIG1hdGNoZXIsIGNvbWJpbmF0b3IsIGJhc2UgKSB7XG5cdHZhciBkaXIgPSBjb21iaW5hdG9yLmRpcixcblx0XHRjaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBkaXIgPT09IFwicGFyZW50Tm9kZVwiLFxuXHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXG5cdHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIG9sZENhY2hlLCBvdXRlckNhY2hlLFxuXHRcdFx0XHRuZXdDYWNoZSA9IFsgZGlycnVucywgZG9uZU5hbWUgXTtcblxuXHRcdFx0Ly8gV2UgY2FuJ3Qgc2V0IGFyYml0cmFyeSBkYXRhIG9uIFhNTCBub2Rlcywgc28gdGhleSBkb24ndCBiZW5lZml0IGZyb20gZGlyIGNhY2hpbmdcblx0XHRcdGlmICggeG1sICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXHRcdFx0XHRcdFx0aWYgKCAob2xkQ2FjaGUgPSBvdXRlckNhY2hlWyBkaXIgXSkgJiZcblx0XHRcdFx0XHRcdFx0b2xkQ2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBvbGRDYWNoZVsgMSBdID09PSBkb25lTmFtZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBBc3NpZ24gdG8gbmV3Q2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gKG5ld0NhY2hlWyAyIF0gPSBvbGRDYWNoZVsgMiBdKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFJldXNlIG5ld2NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZVsgZGlyIF0gPSBuZXdDYWNoZTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmdcblx0XHRcdFx0XHRcdFx0aWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHtcblx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IDpcblx0XHRtYXRjaGVyc1swXTtcbn1cblxuZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApO1xuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHR2YXIgZWxlbSxcblx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuXHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0aWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdG5ld1VubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdGlmICggbWFwcGVkICkge1xuXHRcdFx0XHRcdG1hcC5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmV3VW5tYXRjaGVkO1xufVxuXG5mdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7XG5cdGlmICggcG9zdEZpbHRlciAmJiAhcG9zdEZpbHRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG5cdH1cblx0aWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApO1xuXHR9XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHtcblx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0cG9zdE1hcCA9IFtdLFxuXHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHRcblx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCBcIipcIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSxcblxuXHRcdFx0Ly8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uXG5cdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRlbGVtcyxcblxuXHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuXHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cblx0XHRcdFx0XHQvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3Nhcnlcblx0XHRcdFx0XHRbXSA6XG5cblx0XHRcdFx0XHQvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHlcblx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0bWF0Y2hlckluO1xuXG5cdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRtYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHBvc3RGaWx0ZXJcblx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdHBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTtcblxuXHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0aSA9IHRlbXAubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkge1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0dGVtcCA9IFtdO1xuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiZcblx0XHRcdFx0XHRcdCh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHtcblxuXHRcdFx0XHRcdFx0c2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkXG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXJPdXQgPSBjb25kZW5zZShcblx0XHRcdFx0bWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/XG5cdFx0XHRcdFx0bWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDpcblx0XHRcdFx0XHRtYXRjaGVyT3V0XG5cdFx0XHQpO1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHR2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcblx0XHRpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbXCIgXCJdLFxuXHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuXHRcdC8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpXG5cdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHQoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuXHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblx0XHRcdC8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0Y2hlY2tDb250ZXh0ID0gbnVsbDtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSBdO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHtcblx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7XG5cblx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0Ly8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nXG5cdFx0XHRcdGogPSArK2k7XG5cdFx0XHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSxcblx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHRcdHRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0pXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG5cdFx0XHRcdFx0bWF0Y2hlcixcblx0XHRcdFx0XHRpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkge1xuXHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdHN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHtcblx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRpID0gXCIwXCIsXG5cdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0Y29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG5cdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBvdXRlcm1vc3QgKSxcblx0XHRcdFx0Ly8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXJcblx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksXG5cdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ICE9PSBkb2N1bWVudCAmJiBjb250ZXh0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0c1xuXHRcdFx0Ly8gS2VlcCBgaWAgYSBzdHJpbmcgaWYgdGhlcmUgYXJlIG5vIGVsZW1lbnRzIHNvIGBtYXRjaGVkQ291bnRgIHdpbGwgYmUgXCIwMFwiIGJlbG93XG5cdFx0XHQvLyBTdXBwb3J0OiBJRTw5LCBTYWZhcmlcblx0XHRcdC8vIFRvbGVyYXRlIE5vZGVMaXN0IHByb3BlcnRpZXMgKElFOiBcImxlbmd0aFwiOyBTYWZhcmk6IDxudW1iZXI+KSBtYXRjaGluZyBlbGVtZW50cyBieSBpZFxuXHRcdFx0Zm9yICggOyBpICE9PSBsZW4gJiYgKGVsZW0gPSBlbGVtc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGJ5RWxlbWVudCAmJiBlbGVtICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBlbGVtZW50TWF0Y2hlcnNbaisrXSkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuXHRcdFx0XHRpZiAoIGJ5U2V0ICkge1xuXHRcdFx0XHRcdC8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnNcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzXG5cdFx0XHRtYXRjaGVkQ291bnQgKz0gaTtcblx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0Ly8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuXHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXNcblx0XHRcdFx0XHRzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHNcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXG5cdFx0XHRcdC8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZ1xuXHRcdFx0XHRpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiZcblx0XHRcdFx0XHQoIG1hdGNoZWRDb3VudCArIHNldE1hdGNoZXJzLmxlbmd0aCApID4gMSApIHtcblxuXHRcdFx0XHRcdFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdW5tYXRjaGVkO1xuXHRcdH07XG5cblx0cmV0dXJuIGJ5U2V0ID9cblx0XHRtYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDpcblx0XHRzdXBlck1hdGNoZXI7XG59XG5cbmNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdHZhciBpLFxuXHRcdHNldE1hdGNoZXJzID0gW10sXG5cdFx0ZWxlbWVudE1hdGNoZXJzID0gW10sXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggIWNhY2hlZCApIHtcblx0XHQvLyBHZW5lcmF0ZSBhIGZ1bmN0aW9uIG9mIHJlY3Vyc2l2ZSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjaGVjayBlYWNoIGVsZW1lbnRcblx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0fVxuXHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRjYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTtcblx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApO1xuXG5cdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0Y2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdH1cblx0cmV0dXJuIGNhY2hlZDtcbn07XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3RcbiAqL1xuc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsXG5cdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBubyBzZWVkIGFuZCBvbmx5IG9uZSBncm91cFxuXHRpZiAoIG1hdGNoLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdC8vIFRha2UgYSBzaG9ydGN1dCBhbmQgc2V0IHRoZSBjb250ZXh0IGlmIHRoZSByb290IHNlbGVjdG9yIGlzIGFuIElEXG5cdFx0dG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApO1xuXHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdFx0c3VwcG9ydC5nZXRCeUlkICYmIGNvbnRleHQubm9kZVR5cGUgPT09IDkgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHRcdFx0RXhwci5yZWxhdGl2ZVsgdG9rZW5zWzFdLnR5cGUgXSApIHtcblxuXHRcdFx0Y29udGV4dCA9ICggRXhwci5maW5kW1wiSURcIl0oIHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZShydW5lc2NhcGUsIGZ1bmVzY2FwZSksIGNvbnRleHQgKSB8fCBbXSApWzBdO1xuXHRcdFx0aWYgKCAhY29udGV4dCApIHtcblx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdC8vIFByZWNvbXBpbGVkIG1hdGNoZXJzIHdpbGwgc3RpbGwgdmVyaWZ5IGFuY2VzdHJ5LCBzbyBzdGVwIHVwIGEgbGV2ZWxcblx0XHRcdH0gZWxzZSBpZiAoIGNvbXBpbGVkICkge1xuXHRcdFx0XHRjb250ZXh0ID0gY29udGV4dC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRzZWxlY3RvciA9IHNlbGVjdG9yLnNsaWNlKCB0b2tlbnMuc2hpZnQoKS52YWx1ZS5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGZXRjaCBhIHNlZWQgc2V0IGZvciByaWdodC10by1sZWZ0IG1hdGNoaW5nXG5cdFx0aSA9IG1hdGNoRXhwcltcIm5lZWRzQ29udGV4dFwiXS50ZXN0KCBzZWxlY3RvciApID8gMCA6IHRva2Vucy5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0b2tlbiA9IHRva2Vuc1tpXTtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgd2UgaGl0IGEgY29tYmluYXRvclxuXHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyAodHlwZSA9IHRva2VuLnR5cGUpIF0gKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAoZmluZCA9IEV4cHIuZmluZFsgdHlwZSBdKSApIHtcblx0XHRcdFx0Ly8gU2VhcmNoLCBleHBhbmRpbmcgY29udGV4dCBmb3IgbGVhZGluZyBzaWJsaW5nIGNvbWJpbmF0b3JzXG5cdFx0XHRcdGlmICggKHNlZWQgPSBmaW5kKFxuXHRcdFx0XHRcdHRva2VuLm1hdGNoZXNbMF0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKSxcblx0XHRcdFx0XHRyc2libGluZy50ZXN0KCB0b2tlbnNbMF0udHlwZSApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdFx0XHRcdCkpICkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgc2VlZCBpcyBlbXB0eSBvciBubyB0b2tlbnMgcmVtYWluLCB3ZSBjYW4gcmV0dXJuIGVhcmx5XG5cdFx0XHRcdFx0dG9rZW5zLnNwbGljZSggaSwgMSApO1xuXHRcdFx0XHRcdHNlbGVjdG9yID0gc2VlZC5sZW5ndGggJiYgdG9TZWxlY3RvciggdG9rZW5zICk7XG5cdFx0XHRcdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBzZWVkICk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIENvbXBpbGUgYW5kIGV4ZWN1dGUgYSBmaWx0ZXJpbmcgZnVuY3Rpb24gaWYgb25lIGlzIG5vdCBwcm92aWRlZFxuXHQvLyBQcm92aWRlIGBtYXRjaGAgdG8gYXZvaWQgcmV0b2tlbml6YXRpb24gaWYgd2UgbW9kaWZpZWQgdGhlIHNlbGVjdG9yIGFib3ZlXG5cdCggY29tcGlsZWQgfHwgY29tcGlsZSggc2VsZWN0b3IsIG1hdGNoICkgKShcblx0XHRzZWVkLFxuXHRcdGNvbnRleHQsXG5cdFx0IWRvY3VtZW50SXNIVE1MLFxuXHRcdHJlc3VsdHMsXG5cdFx0cnNpYmxpbmcudGVzdCggc2VsZWN0b3IgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dFxuXHQpO1xuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8vIE9uZS10aW1lIGFzc2lnbm1lbnRzXG5cbi8vIFNvcnQgc3RhYmlsaXR5XG5zdXBwb3J0LnNvcnRTdGFibGUgPSBleHBhbmRvLnNwbGl0KFwiXCIpLnNvcnQoIHNvcnRPcmRlciApLmpvaW4oXCJcIikgPT09IGV4cGFuZG87XG5cbi8vIFN1cHBvcnQ6IENocm9tZSAxNC0zNStcbi8vIEFsd2F5cyBhc3N1bWUgZHVwbGljYXRlcyBpZiB0aGV5IGFyZW4ndCBwYXNzZWQgdG8gdGhlIGNvbXBhcmlzb24gZnVuY3Rpb25cbnN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcyA9ICEhaGFzRHVwbGljYXRlO1xuXG4vLyBJbml0aWFsaXplIGFnYWluc3QgdGhlIGRlZmF1bHQgZG9jdW1lbnRcbnNldERvY3VtZW50KCk7XG5cbi8vIFN1cHBvcnQ6IFdlYmtpdDw1MzcuMzIgLSBTYWZhcmkgNi4wLjMvQ2hyb21lIDI1IChmaXhlZCBpbiBDaHJvbWUgMjcpXG4vLyBEZXRhY2hlZCBub2RlcyBjb25mb3VuZGluZ2x5IGZvbGxvdyAqZWFjaCBvdGhlcipcbnN1cHBvcnQuc29ydERldGFjaGVkID0gYXNzZXJ0KGZ1bmN0aW9uKCBkaXYxICkge1xuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGRpdjEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikgKSAmIDE7XG59KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHhcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8YSBocmVmPScjJz48L2E+XCI7XG5cdHJldHVybiBkaXYuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiA7XG59KSApIHtcblx0YWRkSGFuZGxlKCBcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidHlwZVwiID8gMSA6IDIgKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG5pZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRkaXYuaW5uZXJIVE1MID0gXCI8aW5wdXQvPlwiO1xuXHRkaXYuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuXHRyZXR1cm4gZGl2LmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydChmdW5jdGlvbiggZGl2ICkge1xuXHRyZXR1cm4gZGl2LmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG59KSApIHtcblx0YWRkSGFuZGxlKCBib29sZWFucywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciB2YWw7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdID09PSB0cnVlID8gbmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0fVxuXHR9KTtcbn1cblxucmV0dXJuIFNpenpsZTtcblxufSkoIHdpbmRvdyApO1xuXG5cblxualF1ZXJ5LmZpbmQgPSBTaXp6bGU7XG5qUXVlcnkuZXhwciA9IFNpenpsZS5zZWxlY3RvcnM7XG5qUXVlcnkuZXhwcltcIjpcIl0gPSBqUXVlcnkuZXhwci5wc2V1ZG9zO1xualF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xualF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDtcbmpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDtcbmpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcblxuXG5cbnZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXG52YXIgcnNpbmdsZVRhZyA9ICgvXjwoXFx3KylcXHMqXFwvPz4oPzo8XFwvXFwxPnwpJC8pO1xuXG5cblxudmFyIHJpc1NpbXBsZSA9IC9eLlteOiNcXFtcXC4sXSokLztcblxuLy8gSW1wbGVtZW50IHRoZSBpZGVudGljYWwgZnVuY3Rpb25hbGl0eSBmb3IgZmlsdGVyIGFuZCBub3RcbmZ1bmN0aW9uIHdpbm5vdyggZWxlbWVudHMsIHF1YWxpZmllciwgbm90ICkge1xuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdC8qIGpzaGludCAtVzAxOCAqL1xuXHRcdFx0cmV0dXJuICEhcXVhbGlmaWVyLmNhbGwoIGVsZW0sIGksIGVsZW0gKSAhPT0gbm90O1xuXHRcdH0pO1xuXG5cdH1cblxuXHRpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0fSk7XG5cblx0fVxuXG5cdGlmICggdHlwZW9mIHF1YWxpZmllciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRpZiAoIHJpc1NpbXBsZS50ZXN0KCBxdWFsaWZpZXIgKSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcblx0XHR9XG5cblx0XHRxdWFsaWZpZXIgPSBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzICk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gKCBpbmRleE9mLmNhbGwoIHF1YWxpZmllciwgZWxlbSApID49IDAgKSAhPT0gbm90O1xuXHR9KTtcbn1cblxualF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkge1xuXHR2YXIgZWxlbSA9IGVsZW1zWyAwIF07XG5cblx0aWYgKCBub3QgKSB7XG5cdFx0ZXhwciA9IFwiOm5vdChcIiArIGV4cHIgKyBcIilcIjtcblx0fVxuXG5cdHJldHVybiBlbGVtcy5sZW5ndGggPT09IDEgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSA/XG5cdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBlbGVtLCBleHByICkgPyBbIGVsZW0gXSA6IFtdIDpcblx0XHRqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0ubm9kZVR5cGUgPT09IDE7XG5cdFx0fSkpO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGZpbmQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgaSxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0cmV0ID0gW10sXG5cdFx0XHRzZWxmID0gdGhpcztcblxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSkgKTtcblx0XHR9XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0alF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApO1xuXHRcdH1cblxuXHRcdC8vIE5lZWRlZCBiZWNhdXNlICQoIHNlbGVjdG9yLCBjb250ZXh0ICkgYmVjb21lcyAkKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKVxuXHRcdHJldCA9IHRoaXMucHVzaFN0YWNrKCBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZSggcmV0ICkgOiByZXQgKTtcblx0XHRyZXQuc2VsZWN0b3IgPSB0aGlzLnNlbGVjdG9yID8gdGhpcy5zZWxlY3RvciArIFwiIFwiICsgc2VsZWN0b3IgOiBzZWxlY3Rvcjtcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXHRmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyh0aGlzLCBzZWxlY3RvciB8fCBbXSwgZmFsc2UpICk7XG5cdH0sXG5cdG5vdDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlKSApO1xuXHR9LFxuXHRpczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiAhIXdpbm5vdyhcblx0XHRcdHRoaXMsXG5cblx0XHRcdC8vIElmIHRoaXMgaXMgYSBwb3NpdGlvbmFsL3JlbGF0aXZlIHNlbGVjdG9yLCBjaGVjayBtZW1iZXJzaGlwIGluIHRoZSByZXR1cm5lZCBzZXRcblx0XHRcdC8vIHNvICQoXCJwOmZpcnN0XCIpLmlzKFwicDpsYXN0XCIpIHdvbid0IHJldHVybiB0cnVlIGZvciBhIGRvYyB3aXRoIHR3byBcInBcIi5cblx0XHRcdHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiAmJiBybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICkgP1xuXHRcdFx0XHRqUXVlcnkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHRzZWxlY3RvciB8fCBbXSxcblx0XHRcdGZhbHNlXG5cdFx0KS5sZW5ndGg7XG5cdH1cbn0pO1xuXG5cbi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0XG5cblxuLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG52YXIgcm9vdGpRdWVyeSxcblxuXHQvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5nc1xuXHQvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpXG5cdC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuXHRycXVpY2tFeHByID0gL14oPzpcXHMqKDxbXFx3XFxXXSs+KVtePl0qfCMoW1xcdy1dKikpJC8sXG5cblx0aW5pdCA9IGpRdWVyeS5mbi5pbml0ID0gZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHZhciBtYXRjaCwgZWxlbTtcblxuXHRcdC8vIEhBTkRMRTogJChcIlwiKSwgJChudWxsKSwgJCh1bmRlZmluZWQpLCAkKGZhbHNlKVxuXHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIEhUTUwgc3RyaW5nc1xuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0aWYgKCBzZWxlY3RvclswXSA9PT0gXCI8XCIgJiYgc2VsZWN0b3JbIHNlbGVjdG9yLmxlbmd0aCAtIDEgXSA9PT0gXCI+XCIgJiYgc2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cdFx0XHRcdC8vIEFzc3VtZSB0aGF0IHN0cmluZ3MgdGhhdCBzdGFydCBhbmQgZW5kIHdpdGggPD4gYXJlIEhUTUwgYW5kIHNraXAgdGhlIHJlZ2V4IGNoZWNrXG5cdFx0XHRcdG1hdGNoID0gWyBudWxsLCBzZWxlY3RvciwgbnVsbCBdO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRtYXRjaCA9IHJxdWlja0V4cHIuZXhlYyggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWF0Y2ggaHRtbCBvciBtYWtlIHN1cmUgbm8gY29udGV4dCBpcyBzcGVjaWZpZWQgZm9yICNpZFxuXHRcdFx0aWYgKCBtYXRjaCAmJiAobWF0Y2hbMV0gfHwgIWNvbnRleHQpICkge1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRpZiAoIG1hdGNoWzFdICkge1xuXHRcdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGV4dFswXSA6IGNvbnRleHQ7XG5cblx0XHRcdFx0XHQvLyBPcHRpb24gdG8gcnVuIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHQvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcywgalF1ZXJ5LnBhcnNlSFRNTChcblx0XHRcdFx0XHRcdG1hdGNoWzFdLFxuXHRcdFx0XHRcdFx0Y29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCxcblx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHQpICk7XG5cblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0aWYgKCByc2luZ2xlVGFnLnRlc3QoIG1hdGNoWzFdICkgJiYgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvbnRleHQgKSApIHtcblx0XHRcdFx0XHRcdGZvciAoIG1hdGNoIGluIGNvbnRleHQgKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcblx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXNbIG1hdGNoIF0oIGNvbnRleHRbIG1hdGNoIF0gKTtcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgb3RoZXJ3aXNlIHNldCBhcyBhdHRyaWJ1dGVzXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKCNpZClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWzJdICk7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBCbGFja2JlcnJ5IDQuNlxuXHRcdFx0XHRcdC8vIGdFQklEIHJldHVybnMgbm9kZXMgbm8gbG9uZ2VyIGluIHRoZSBkb2N1bWVudCAoIzY5NjMpXG5cdFx0XHRcdFx0aWYgKCBlbGVtICYmIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRcdC8vIEluamVjdCB0aGUgZWxlbWVudCBkaXJlY3RseSBpbnRvIHRoZSBqUXVlcnkgb2JqZWN0XG5cdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0XHR0aGlzWzBdID0gZWxlbTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR0aGlzLmNvbnRleHQgPSBkb2N1bWVudDtcblx0XHRcdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsICQoLi4uKSlcblx0XHRcdH0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkge1xuXHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3RqUXVlcnkgKS5maW5kKCBzZWxlY3RvciApO1xuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dClcblx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSEFORExFOiAkKERPTUVsZW1lbnQpXG5cdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSB0aGlzWzBdID0gc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHQvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHlcblx0XHR9IGVsc2UgaWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggc2VsZWN0b3IgKSApIHtcblx0XHRcdHJldHVybiB0eXBlb2Ygcm9vdGpRdWVyeS5yZWFkeSAhPT0gXCJ1bmRlZmluZWRcIiA/XG5cdFx0XHRcdHJvb3RqUXVlcnkucmVhZHkoIHNlbGVjdG9yICkgOlxuXHRcdFx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IGlmIHJlYWR5IGlzIG5vdCBwcmVzZW50XG5cdFx0XHRcdHNlbGVjdG9yKCBqUXVlcnkgKTtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yLnNlbGVjdG9yICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3Iuc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmNvbnRleHQgPSBzZWxlY3Rvci5jb250ZXh0O1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHR9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG5cdC8vIE1ldGhvZHMgZ3VhcmFudGVlZCB0byBwcm9kdWNlIGEgdW5pcXVlIHNldCB3aGVuIHN0YXJ0aW5nIGZyb20gYSB1bmlxdWUgc2V0XG5cdGd1YXJhbnRlZWRVbmlxdWUgPSB7XG5cdFx0Y2hpbGRyZW46IHRydWUsXG5cdFx0Y29udGVudHM6IHRydWUsXG5cdFx0bmV4dDogdHJ1ZSxcblx0XHRwcmV2OiB0cnVlXG5cdH07XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRkaXI6IGZ1bmN0aW9uKCBlbGVtLCBkaXIsIHVudGlsICkge1xuXHRcdHZhciBtYXRjaGVkID0gW10sXG5cdFx0XHR0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7XG5cblx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdGlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0bWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9LFxuXG5cdHNpYmxpbmc6IGZ1bmN0aW9uKCBuLCBlbGVtICkge1xuXHRcdHZhciBtYXRjaGVkID0gW107XG5cblx0XHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdFx0aWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7XG5cdFx0XHRcdG1hdGNoZWQucHVzaCggbiApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBtYXRjaGVkO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGhhczogZnVuY3Rpb24oIHRhcmdldCApIHtcblx0XHR2YXIgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG5cdFx0XHRsID0gdGFyZ2V0cy5sZW5ndGg7XG5cblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaSA9IDA7XG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCB0aGlzLCB0YXJnZXRzW2ldICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRjbG9zZXN0OiBmdW5jdGlvbiggc2VsZWN0b3JzLCBjb250ZXh0ICkge1xuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSB0aGlzLmxlbmd0aCxcblx0XHRcdG1hdGNoZWQgPSBbXSxcblx0XHRcdHBvcyA9IHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgfHwgdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3JzLCBjb250ZXh0IHx8IHRoaXMuY29udGV4dCApIDpcblx0XHRcdFx0MDtcblxuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGZvciAoIGN1ciA9IHRoaXNbaV07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXHRcdFx0XHQvLyBBbHdheXMgc2tpcCBkb2N1bWVudCBmcmFnbWVudHNcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAocG9zID9cblx0XHRcdFx0XHRwb3MuaW5kZXgoY3VyKSA+IC0xIDpcblxuXHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdGN1ci5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGN1ciwgc2VsZWN0b3JzKSkgKSB7XG5cblx0XHRcdFx0XHRtYXRjaGVkLnB1c2goIGN1ciApO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlKCBtYXRjaGVkICkgOiBtYXRjaGVkICk7XG5cdH0sXG5cblx0Ly8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpbiB0aGUgc2V0XG5cdGluZGV4OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50XG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTtcblx0XHR9XG5cblx0XHQvLyBJbmRleCBpbiBzZWxlY3RvclxuXHRcdGlmICggdHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdGhpc1sgMCBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gTG9jYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZGVzaXJlZCBlbGVtZW50XG5cdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggdGhpcyxcblxuXHRcdFx0Ly8gSWYgaXQgcmVjZWl2ZXMgYSBqUXVlcnkgb2JqZWN0LCB0aGUgZmlyc3QgZWxlbWVudCBpcyB1c2VkXG5cdFx0XHRlbGVtLmpxdWVyeSA/IGVsZW1bIDAgXSA6IGVsZW1cblx0XHQpO1xuXHR9LFxuXG5cdGFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayhcblx0XHRcdGpRdWVyeS51bmlxdWUoXG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcy5nZXQoKSwgalF1ZXJ5KCBzZWxlY3RvciwgY29udGV4dCApIClcblx0XHRcdClcblx0XHQpO1xuXHR9LFxuXG5cdGFkZEJhY2s6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5hZGQoIHNlbGVjdG9yID09IG51bGwgP1xuXHRcdFx0dGhpcy5wcmV2T2JqZWN0IDogdGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzZWxlY3Rvcilcblx0XHQpO1xuXHR9XG59KTtcblxuZnVuY3Rpb24gc2libGluZyggY3VyLCBkaXIgKSB7XG5cdHdoaWxlICggKGN1ciA9IGN1cltkaXJdKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRyZXR1cm4gY3VyO1xufVxuXG5qUXVlcnkuZWFjaCh7XG5cdHBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRyZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xuXHR9LFxuXHRwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0fSxcblx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicGFyZW50Tm9kZVwiLCB1bnRpbCApO1xuXHR9LFxuXHRuZXh0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXY6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiICk7XG5cdH0sXG5cdG5leHRBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBqUXVlcnkuZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiwgdW50aWwgKTtcblx0fSxcblx0cHJldlVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5kaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LnNpYmxpbmcoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApO1xuXHR9LFxuXHRjaGlsZHJlbjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5zaWJsaW5nKCBlbGVtLmZpcnN0Q2hpbGQgKTtcblx0fSxcblx0Y29udGVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBlbGVtLmNvbnRlbnREb2N1bWVudCB8fCBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcblx0fVxufSwgZnVuY3Rpb24oIG5hbWUsIGZuICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTtcblxuXHRcdGlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gXCJVbnRpbFwiICkge1xuXHRcdFx0c2VsZWN0b3IgPSB1bnRpbDtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG1hdGNoZWQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgbWF0Y2hlZCApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuXHRcdFx0Ly8gUmVtb3ZlIGR1cGxpY2F0ZXNcblx0XHRcdGlmICggIWd1YXJhbnRlZWRVbmlxdWVbIG5hbWUgXSApIHtcblx0XHRcdFx0alF1ZXJ5LnVuaXF1ZSggbWF0Y2hlZCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuXHRcdFx0aWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRtYXRjaGVkLnJldmVyc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQgKTtcblx0fTtcbn0pO1xudmFyIHJub3R3aGl0ZSA9ICgvXFxTKy9nKTtcblxuXG5cbi8vIFN0cmluZyB0byBPYmplY3Qgb3B0aW9ucyBmb3JtYXQgY2FjaGVcbnZhciBvcHRpb25zQ2FjaGUgPSB7fTtcblxuLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXMgYW5kIHN0b3JlIGluIGNhY2hlXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkge1xuXHR2YXIgb2JqZWN0ID0gb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gPSB7fTtcblx0alF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdLCBmdW5jdGlvbiggXywgZmxhZyApIHtcblx0XHRvYmplY3RbIGZsYWcgXSA9IHRydWU7XG5cdH0pO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdCggb3B0aW9uc0NhY2hlWyBvcHRpb25zIF0gfHwgY3JlYXRlT3B0aW9ucyggb3B0aW9ucyApICkgOlxuXHRcdGpRdWVyeS5leHRlbmQoIHt9LCBvcHRpb25zICk7XG5cblx0dmFyIC8vIExhc3QgZmlyZSB2YWx1ZSAoZm9yIG5vbi1mb3JnZXR0YWJsZSBsaXN0cylcblx0XHRtZW1vcnksXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblx0XHQvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCBpcyBjdXJyZW50bHkgZmlyaW5nXG5cdFx0ZmlyaW5nLFxuXHRcdC8vIEZpcnN0IGNhbGxiYWNrIHRvIGZpcmUgKHVzZWQgaW50ZXJuYWxseSBieSBhZGQgYW5kIGZpcmVXaXRoKVxuXHRcdGZpcmluZ1N0YXJ0LFxuXHRcdC8vIEVuZCBvZiB0aGUgbG9vcCB3aGVuIGZpcmluZ1xuXHRcdGZpcmluZ0xlbmd0aCxcblx0XHQvLyBJbmRleCBvZiBjdXJyZW50bHkgZmlyaW5nIGNhbGxiYWNrIChtb2RpZmllZCBieSByZW1vdmUgaWYgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4LFxuXHRcdC8vIEFjdHVhbCBjYWxsYmFjayBsaXN0XG5cdFx0bGlzdCA9IFtdLFxuXHRcdC8vIFN0YWNrIG9mIGZpcmUgY2FsbHMgZm9yIHJlcGVhdGFibGUgbGlzdHNcblx0XHRzdGFjayA9ICFvcHRpb25zLm9uY2UgJiYgW10sXG5cdFx0Ly8gRmlyZSBjYWxsYmFja3Ncblx0XHRmaXJlID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdFx0XHRtZW1vcnkgPSBvcHRpb25zLm1lbW9yeSAmJiBkYXRhO1xuXHRcdFx0ZmlyZWQgPSB0cnVlO1xuXHRcdFx0ZmlyaW5nSW5kZXggPSBmaXJpbmdTdGFydCB8fCAwO1xuXHRcdFx0ZmlyaW5nU3RhcnQgPSAwO1xuXHRcdFx0ZmlyaW5nTGVuZ3RoID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRmaXJpbmcgPSB0cnVlO1xuXHRcdFx0Zm9yICggOyBsaXN0ICYmIGZpcmluZ0luZGV4IDwgZmlyaW5nTGVuZ3RoOyBmaXJpbmdJbmRleCsrICkge1xuXHRcdFx0XHRpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIGRhdGFbIDAgXSwgZGF0YVsgMSBdICkgPT09IGZhbHNlICYmIG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cdFx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7IC8vIFRvIHByZXZlbnQgZnVydGhlciBjYWxscyB1c2luZyBhZGRcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZmlyaW5nID0gZmFsc2U7XG5cdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdGlmICggc3RhY2sgKSB7XG5cdFx0XHRcdFx0aWYgKCBzdGFjay5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCBzdGFjay5zaGlmdCgpICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2UgaWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHNlbGYuZGlzYWJsZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdHNlbGYgPSB7XG5cdFx0XHQvLyBBZGQgYSBjYWxsYmFjayBvciBhIGNvbGxlY3Rpb24gb2YgY2FsbGJhY2tzIHRvIHRoZSBsaXN0XG5cdFx0XHRhZGQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0Ly8gRmlyc3QsIHdlIHNhdmUgdGhlIGN1cnJlbnQgbGVuZ3RoXG5cdFx0XHRcdFx0dmFyIHN0YXJ0ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0KGZ1bmN0aW9uIGFkZCggYXJncyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0XHR2YXIgdHlwZSA9IGpRdWVyeS50eXBlKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCAhb3B0aW9ucy51bmlxdWUgfHwgIXNlbGYuaGFzKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGxpc3QucHVzaCggYXJnICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBhcmcgJiYgYXJnLmxlbmd0aCAmJiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIEluc3BlY3QgcmVjdXJzaXZlbHlcblx0XHRcdFx0XHRcdFx0XHRhZGQoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KSggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0Ly8gRG8gd2UgbmVlZCB0byBhZGQgdGhlIGNhbGxiYWNrcyB0byB0aGVcblx0XHRcdFx0XHQvLyBjdXJyZW50IGZpcmluZyBiYXRjaD9cblx0XHRcdFx0XHRpZiAoIGZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmluZ0xlbmd0aCA9IGxpc3QubGVuZ3RoO1xuXHRcdFx0XHRcdC8vIFdpdGggbWVtb3J5LCBpZiB3ZSdyZSBub3QgZmlyaW5nIHRoZW5cblx0XHRcdFx0XHQvLyB3ZSBzaG91bGQgY2FsbCByaWdodCBhd2F5XG5cdFx0XHRcdFx0fSBlbHNlIGlmICggbWVtb3J5ICkge1xuXHRcdFx0XHRcdFx0ZmlyaW5nU3RhcnQgPSBzdGFydDtcblx0XHRcdFx0XHRcdGZpcmUoIG1lbW9yeSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHQvLyBSZW1vdmUgYSBjYWxsYmFjayBmcm9tIHRoZSBsaXN0XG5cdFx0XHRyZW1vdmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIGxpc3QgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdHZhciBpbmRleDtcblx0XHRcdFx0XHRcdHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0XHRsaXN0LnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG5cdFx0XHRcdFx0XHRcdGlmICggZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nTGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZmlyaW5nTGVuZ3RoLS07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGlmICggaW5kZXggPD0gZmlyaW5nSW5kZXggKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleC0tO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG5cdFx0XHQvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cblx0XHRcdGhhczogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRyZXR1cm4gZm4gPyBqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDogISEoIGxpc3QgJiYgbGlzdC5sZW5ndGggKTtcblx0XHRcdH0sXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0ZmlyaW5nTGVuZ3RoID0gMDtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSGF2ZSB0aGUgbGlzdCBkbyBub3RoaW5nIGFueW1vcmVcblx0XHRcdGRpc2FibGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsaXN0ID0gc3RhY2sgPSBtZW1vcnkgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdC8vIElzIGl0IGRpc2FibGVkP1xuXHRcdFx0ZGlzYWJsZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gIWxpc3Q7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gTG9jayB0aGUgbGlzdCBpbiBpdHMgY3VycmVudCBzdGF0ZVxuXHRcdFx0bG9jazogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHN0YWNrID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRpZiAoICFtZW1vcnkgKSB7XG5cdFx0XHRcdFx0c2VsZi5kaXNhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gSXMgaXQgbG9ja2VkP1xuXHRcdFx0bG9ja2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICFzdGFjaztcblx0XHRcdH0sXG5cdFx0XHQvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzXG5cdFx0XHRmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG5cdFx0XHRcdGlmICggbGlzdCAmJiAoICFmaXJlZCB8fCBzdGFjayApICkge1xuXHRcdFx0XHRcdGFyZ3MgPSBhcmdzIHx8IFtdO1xuXHRcdFx0XHRcdGFyZ3MgPSBbIGNvbnRleHQsIGFyZ3Muc2xpY2UgPyBhcmdzLnNsaWNlKCkgOiBhcmdzIF07XG5cdFx0XHRcdFx0aWYgKCBmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRzdGFjay5wdXNoKCBhcmdzICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGZpcmUoIGFyZ3MgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHNcblx0XHRcdGZpcmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRmaXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0cmV0dXJuIHNlbGY7XG59O1xuXG5cbmpRdWVyeS5leHRlbmQoe1xuXG5cdERlZmVycmVkOiBmdW5jdGlvbiggZnVuYyApIHtcblx0XHR2YXIgdHVwbGVzID0gW1xuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgbGlzdGVuZXIgbGlzdCwgZmluYWwgc3RhdGVcblx0XHRcdFx0WyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSwgXCJyZWplY3RlZFwiIF0sXG5cdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKFwibWVtb3J5XCIpIF1cblx0XHRcdF0sXG5cdFx0XHRzdGF0ZSA9IFwicGVuZGluZ1wiLFxuXHRcdFx0cHJvbWlzZSA9IHtcblx0XHRcdFx0c3RhdGU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBzdGF0ZTtcblx0XHRcdFx0fSxcblx0XHRcdFx0YWx3YXlzOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5kb25lKCBhcmd1bWVudHMgKS5mYWlsKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblx0XHRcdFx0dGhlbjogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cdFx0XHRcdFx0cmV0dXJuIGpRdWVyeS5EZWZlcnJlZChmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHRcdFx0XHRcdHZhciBmbiA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBmbnNbIGkgXSApICYmIGZuc1sgaSBdO1xuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZFsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdIGZvciBmb3J3YXJkaW5nIGFjdGlvbnMgdG8gbmV3RGVmZXJcblx0XHRcdFx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzFdIF0oZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0dmFyIHJldHVybmVkID0gZm4gJiYgZm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IHByb21pc2UgPyBuZXdEZWZlci5wcm9taXNlKCkgOiB0aGlzLCBmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdGZucyA9IG51bGw7XG5cdFx0XHRcdFx0fSkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG5cdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWZlcnJlZCA9IHt9O1xuXG5cdFx0Ly8gS2VlcCBwaXBlIGZvciBiYWNrLWNvbXBhdFxuXHRcdHByb21pc2UucGlwZSA9IHByb21pc2UudGhlbjtcblxuXHRcdC8vIEFkZCBsaXN0LXNwZWNpZmljIG1ldGhvZHNcblx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cdFx0XHR2YXIgbGlzdCA9IHR1cGxlWyAyIF0sXG5cdFx0XHRcdHN0YXRlU3RyaW5nID0gdHVwbGVbIDMgXTtcblxuXHRcdFx0Ly8gcHJvbWlzZVsgZG9uZSB8IGZhaWwgfCBwcm9ncmVzcyBdID0gbGlzdC5hZGRcblx0XHRcdHByb21pc2VbIHR1cGxlWzFdIF0gPSBsaXN0LmFkZDtcblxuXHRcdFx0Ly8gSGFuZGxlIHN0YXRlXG5cdFx0XHRpZiAoIHN0YXRlU3RyaW5nICkge1xuXHRcdFx0XHRsaXN0LmFkZChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHQvLyBzdGF0ZSA9IFsgcmVzb2x2ZWQgfCByZWplY3RlZCBdXG5cdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblxuXHRcdFx0XHQvLyBbIHJlamVjdF9saXN0IHwgcmVzb2x2ZV9saXN0IF0uZGlzYWJsZTsgcHJvZ3Jlc3NfbGlzdC5sb2NrXG5cdFx0XHRcdH0sIHR1cGxlc1sgaSBeIDEgXVsgMiBdLmRpc2FibGUsIHR1cGxlc1sgMiBdWyAyIF0ubG9jayApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBkZWZlcnJlZFsgcmVzb2x2ZSB8IHJlamVjdCB8IG5vdGlmeSBdXG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbMF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHByb21pc2UgOiB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9O1xuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWzBdICsgXCJXaXRoXCIgXSA9IGxpc3QuZmlyZVdpdGg7XG5cdFx0fSk7XG5cblx0XHQvLyBNYWtlIHRoZSBkZWZlcnJlZCBhIHByb21pc2Vcblx0XHRwcm9taXNlLnByb21pc2UoIGRlZmVycmVkICk7XG5cblx0XHQvLyBDYWxsIGdpdmVuIGZ1bmMgaWYgYW55XG5cdFx0aWYgKCBmdW5jICkge1xuXHRcdFx0ZnVuYy5jYWxsKCBkZWZlcnJlZCwgZGVmZXJyZWQgKTtcblx0XHR9XG5cblx0XHQvLyBBbGwgZG9uZSFcblx0XHRyZXR1cm4gZGVmZXJyZWQ7XG5cdH0sXG5cblx0Ly8gRGVmZXJyZWQgaGVscGVyXG5cdHdoZW46IGZ1bmN0aW9uKCBzdWJvcmRpbmF0ZSAvKiAsIC4uLiwgc3Vib3JkaW5hdGVOICovICkge1xuXHRcdHZhciBpID0gMCxcblx0XHRcdHJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcblx0XHRcdGxlbmd0aCA9IHJlc29sdmVWYWx1ZXMubGVuZ3RoLFxuXG5cdFx0XHQvLyB0aGUgY291bnQgb2YgdW5jb21wbGV0ZWQgc3Vib3JkaW5hdGVzXG5cdFx0XHRyZW1haW5pbmcgPSBsZW5ndGggIT09IDEgfHwgKCBzdWJvcmRpbmF0ZSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggc3Vib3JkaW5hdGUucHJvbWlzZSApICkgPyBsZW5ndGggOiAwLFxuXG5cdFx0XHQvLyB0aGUgbWFzdGVyIERlZmVycmVkLiBJZiByZXNvbHZlVmFsdWVzIGNvbnNpc3Qgb2Ygb25seSBhIHNpbmdsZSBEZWZlcnJlZCwganVzdCB1c2UgdGhhdC5cblx0XHRcdGRlZmVycmVkID0gcmVtYWluaW5nID09PSAxID8gc3Vib3JkaW5hdGUgOiBqUXVlcnkuRGVmZXJyZWQoKSxcblxuXHRcdFx0Ly8gVXBkYXRlIGZ1bmN0aW9uIGZvciBib3RoIHJlc29sdmUgYW5kIHByb2dyZXNzIHZhbHVlc1xuXHRcdFx0dXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpLCBjb250ZXh0cywgdmFsdWVzICkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdGNvbnRleHRzWyBpIF0gPSB0aGlzO1xuXHRcdFx0XHRcdHZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuXHRcdFx0XHRcdGlmICggdmFsdWVzID09PSBwcm9ncmVzc1ZhbHVlcyApIHtcblx0XHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCAhKCAtLXJlbWFpbmluZyApICkge1xuXHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNvbnRleHRzLCB2YWx1ZXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXG5cdFx0XHRwcm9ncmVzc1ZhbHVlcywgcHJvZ3Jlc3NDb250ZXh0cywgcmVzb2x2ZUNvbnRleHRzO1xuXG5cdFx0Ly8gQWRkIGxpc3RlbmVycyB0byBEZWZlcnJlZCBzdWJvcmRpbmF0ZXM7IHRyZWF0IG90aGVycyBhcyByZXNvbHZlZFxuXHRcdGlmICggbGVuZ3RoID4gMSApIHtcblx0XHRcdHByb2dyZXNzVmFsdWVzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdHByb2dyZXNzQ29udGV4dHMgPSBuZXcgQXJyYXkoIGxlbmd0aCApO1xuXHRcdFx0cmVzb2x2ZUNvbnRleHRzID0gbmV3IEFycmF5KCBsZW5ndGggKTtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIHJlc29sdmVWYWx1ZXNbIGkgXSAmJiBqUXVlcnkuaXNGdW5jdGlvbiggcmVzb2x2ZVZhbHVlc1sgaSBdLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRyZXNvbHZlVmFsdWVzWyBpIF0ucHJvbWlzZSgpXG5cdFx0XHRcdFx0XHQuZG9uZSggdXBkYXRlRnVuYyggaSwgcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICkgKVxuXHRcdFx0XHRcdFx0LmZhaWwoIGRlZmVycmVkLnJlamVjdCApXG5cdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIHVwZGF0ZUZ1bmMoIGksIHByb2dyZXNzQ29udGV4dHMsIHByb2dyZXNzVmFsdWVzICkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQtLXJlbWFpbmluZztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIElmIHdlJ3JlIG5vdCB3YWl0aW5nIG9uIGFueXRoaW5nLCByZXNvbHZlIHRoZSBtYXN0ZXJcblx0XHRpZiAoICFyZW1haW5pbmcgKSB7XG5cdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblx0fVxufSk7XG5cblxuLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5XG52YXIgcmVhZHlMaXN0O1xuXG5qUXVlcnkuZm4ucmVhZHkgPSBmdW5jdGlvbiggZm4gKSB7XG5cdC8vIEFkZCB0aGUgY2FsbGJhY2tcblx0alF1ZXJ5LnJlYWR5LnByb21pc2UoKS5kb25lKCBmbiApO1xuXG5cdHJldHVybiB0aGlzO1xufTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG5cdGlzUmVhZHk6IGZhbHNlLFxuXG5cdC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcblx0Ly8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODFcblx0cmVhZHlXYWl0OiAxLFxuXG5cdC8vIEhvbGQgKG9yIHJlbGVhc2UpIHRoZSByZWFkeSBldmVudFxuXHRob2xkUmVhZHk6IGZ1bmN0aW9uKCBob2xkICkge1xuXHRcdGlmICggaG9sZCApIHtcblx0XHRcdGpRdWVyeS5yZWFkeVdhaXQrKztcblx0XHR9IGVsc2Uge1xuXHRcdFx0alF1ZXJ5LnJlYWR5KCB0cnVlICk7XG5cdFx0fVxuXHR9LFxuXG5cdC8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHlcblx0cmVhZHk6IGZ1bmN0aW9uKCB3YWl0ICkge1xuXG5cdFx0Ly8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeVxuXHRcdGlmICggd2FpdCA9PT0gdHJ1ZSA/IC0talF1ZXJ5LnJlYWR5V2FpdCA6IGpRdWVyeS5pc1JlYWR5ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuXHRcdGpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTtcblxuXHRcdC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG5cdFx0aWYgKCB3YWl0ICE9PSB0cnVlICYmIC0talF1ZXJ5LnJlYWR5V2FpdCA+IDAgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucyBib3VuZCwgdG8gZXhlY3V0ZVxuXHRcdHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblxuXHRcdC8vIFRyaWdnZXIgYW55IGJvdW5kIHJlYWR5IGV2ZW50c1xuXHRcdGlmICggalF1ZXJ5LmZuLnRyaWdnZXJIYW5kbGVyICkge1xuXHRcdFx0alF1ZXJ5KCBkb2N1bWVudCApLnRyaWdnZXJIYW5kbGVyKCBcInJlYWR5XCIgKTtcblx0XHRcdGpRdWVyeSggZG9jdW1lbnQgKS5vZmYoIFwicmVhZHlcIiApO1xuXHRcdH1cblx0fVxufSk7XG5cbi8qKlxuICogVGhlIHJlYWR5IGV2ZW50IGhhbmRsZXIgYW5kIHNlbGYgY2xlYW51cCBtZXRob2RcbiAqL1xuZnVuY3Rpb24gY29tcGxldGVkKCkge1xuXHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblx0alF1ZXJ5LnJlYWR5KCk7XG59XG5cbmpRdWVyeS5yZWFkeS5wcm9taXNlID0gZnVuY3Rpb24oIG9iaiApIHtcblx0aWYgKCAhcmVhZHlMaXN0ICkge1xuXG5cdFx0cmVhZHlMaXN0ID0galF1ZXJ5LkRlZmVycmVkKCk7XG5cblx0XHQvLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvY3VtZW50KS5yZWFkeSgpIGlzIGNhbGxlZCBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cblx0XHQvLyBXZSBvbmNlIHRyaWVkIHRvIHVzZSByZWFkeVN0YXRlIFwiaW50ZXJhY3RpdmVcIiBoZXJlLCBidXQgaXQgY2F1c2VkIGlzc3VlcyBsaWtlIHRoZSBvbmVcblx0XHQvLyBkaXNjb3ZlcmVkIGJ5IENocmlzUyBoZXJlOiBodHRwOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjI4MiNjb21tZW50OjE1XG5cdFx0aWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgKSB7XG5cdFx0XHQvLyBIYW5kbGUgaXQgYXN5bmNocm9ub3VzbHkgdG8gYWxsb3cgc2NyaXB0cyB0aGUgb3Bwb3J0dW5pdHkgdG8gZGVsYXkgcmVhZHlcblx0XHRcdHNldFRpbWVvdXQoIGpRdWVyeS5yZWFkeSApO1xuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSBoYW5keSBldmVudCBjYWxsYmFja1xuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciggXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCwgZmFsc2UgKTtcblxuXHRcdFx0Ly8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkLCBmYWxzZSApO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVhZHlMaXN0LnByb21pc2UoIG9iaiApO1xufTtcblxuLy8gS2ljayBvZmYgdGhlIERPTSByZWFkeSBjaGVjayBldmVuIGlmIHRoZSB1c2VyIGRvZXMgbm90XG5qUXVlcnkucmVhZHkucHJvbWlzZSgpO1xuXG5cblxuXG4vLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbi8vIFRoZSB2YWx1ZS9zIGNhbiBvcHRpb25hbGx5IGJlIGV4ZWN1dGVkIGlmIGl0J3MgYSBmdW5jdGlvblxudmFyIGFjY2VzcyA9IGpRdWVyeS5hY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBlbGVtcy5sZW5ndGgsXG5cdFx0YnVsayA9IGtleSA9PSBudWxsO1xuXG5cdC8vIFNldHMgbWFueSB2YWx1ZXNcblx0aWYgKCBqUXVlcnkudHlwZSgga2V5ICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblx0XHRmb3IgKCBpIGluIGtleSApIHtcblx0XHRcdGpRdWVyeS5hY2Nlc3MoIGVsZW1zLCBmbiwgaSwga2V5W2ldLCB0cnVlLCBlbXB0eUdldCwgcmF3ICk7XG5cdFx0fVxuXG5cdC8vIFNldHMgb25lIHZhbHVlXG5cdH0gZWxzZSBpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblxuXHRcdGlmICggIWpRdWVyeS5pc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmF3ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGJ1bGsgKSB7XG5cdFx0XHQvLyBCdWxrIG9wZXJhdGlvbnMgcnVuIGFnYWluc3QgdGhlIGVudGlyZSBzZXRcblx0XHRcdGlmICggcmF3ICkge1xuXHRcdFx0XHRmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTtcblx0XHRcdFx0Zm4gPSBudWxsO1xuXG5cdFx0XHQvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRidWxrID0gZm47XG5cdFx0XHRcdGZuID0gZnVuY3Rpb24oIGVsZW0sIGtleSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRmbiggZWxlbXNbaV0sIGtleSwgcmF3ID8gdmFsdWUgOiB2YWx1ZS5jYWxsKCBlbGVtc1tpXSwgaSwgZm4oIGVsZW1zW2ldLCBrZXkgKSApICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGNoYWluYWJsZSA/XG5cdFx0ZWxlbXMgOlxuXG5cdFx0Ly8gR2V0c1xuXHRcdGJ1bGsgP1xuXHRcdFx0Zm4uY2FsbCggZWxlbXMgKSA6XG5cdFx0XHRsZW4gPyBmbiggZWxlbXNbMF0sIGtleSApIDogZW1wdHlHZXQ7XG59O1xuXG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIG9iamVjdCBjYW4gaGF2ZSBkYXRhXG4gKi9cbmpRdWVyeS5hY2NlcHREYXRhID0gZnVuY3Rpb24oIG93bmVyICkge1xuXHQvLyBBY2NlcHRzIG9ubHk6XG5cdC8vICAtIE5vZGVcblx0Ly8gICAgLSBOb2RlLkVMRU1FTlRfTk9ERVxuXHQvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERVxuXHQvLyAgLSBPYmplY3Rcblx0Ly8gICAgLSBBbnlcblx0LyoganNoaW50IC1XMDE4ICovXG5cdHJldHVybiBvd25lci5ub2RlVHlwZSA9PT0gMSB8fCBvd25lci5ub2RlVHlwZSA9PT0gOSB8fCAhKCArb3duZXIubm9kZVR5cGUgKTtcbn07XG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LFxuXHQvLyBPbGQgV2ViS2l0IGRvZXMgbm90IGhhdmUgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zL2ZyZWV6ZSBtZXRob2QsXG5cdC8vIHJldHVybiBuZXcgZW1wdHkgb2JqZWN0IGluc3RlYWQgd2l0aCBubyBbW3NldF1dIGFjY2Vzc29yXG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcy5jYWNoZSA9IHt9LCAwLCB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiB7fTtcblx0XHR9XG5cdH0pO1xuXG5cdHRoaXMuZXhwYW5kbyA9IGpRdWVyeS5leHBhbmRvICsgRGF0YS51aWQrKztcbn1cblxuRGF0YS51aWQgPSAxO1xuRGF0YS5hY2NlcHRzID0galF1ZXJ5LmFjY2VwdERhdGE7XG5cbkRhdGEucHJvdG90eXBlID0ge1xuXHRrZXk6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHQvLyBXZSBjYW4gYWNjZXB0IGRhdGEgZm9yIG5vbi1lbGVtZW50IG5vZGVzIGluIG1vZGVybiBicm93c2Vycyxcblx0XHQvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LlxuXHRcdC8vIEFsd2F5cyByZXR1cm4gdGhlIGtleSBmb3IgYSBmcm96ZW4gb2JqZWN0LlxuXHRcdGlmICggIURhdGEuYWNjZXB0cyggb3duZXIgKSApIHtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBkZXNjcmlwdG9yID0ge30sXG5cdFx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGUga2V5XG5cdFx0XHR1bmxvY2sgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRpZiAoICF1bmxvY2sgKSB7XG5cdFx0XHR1bmxvY2sgPSBEYXRhLnVpZCsrO1xuXG5cdFx0XHQvLyBTZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSwgbm9uLXdyaXRhYmxlIHByb3BlcnR5XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkZXNjcmlwdG9yWyB0aGlzLmV4cGFuZG8gXSA9IHsgdmFsdWU6IHVubG9jayB9O1xuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydGllcyggb3duZXIsIGRlc2NyaXB0b3IgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0XG5cdFx0XHQvLyBGYWxsYmFjayB0byBhIGxlc3Mgc2VjdXJlIGRlZmluaXRpb25cblx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXHRcdFx0XHRkZXNjcmlwdG9yWyB0aGlzLmV4cGFuZG8gXSA9IHVubG9jaztcblx0XHRcdFx0alF1ZXJ5LmV4dGVuZCggb3duZXIsIGRlc2NyaXB0b3IgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBFbnN1cmUgdGhlIGNhY2hlIG9iamVjdFxuXHRcdGlmICggIXRoaXMuY2FjaGVbIHVubG9jayBdICkge1xuXHRcdFx0dGhpcy5jYWNoZVsgdW5sb2NrIF0gPSB7fTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdW5sb2NrO1xuXHR9LFxuXHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0dmFyIHByb3AsXG5cdFx0XHQvLyBUaGVyZSBtYXkgYmUgYW4gdW5sb2NrIGFzc2lnbmVkIHRvIHRoaXMgbm9kZSxcblx0XHRcdC8vIGlmIHRoZXJlIGlzIG5vIGVudHJ5IGZvciB0aGlzIFwib3duZXJcIiwgY3JlYXRlIG9uZSBpbmxpbmVcblx0XHRcdC8vIGFuZCBzZXQgdGhlIHVubG9jayBhcyB0aG91Z2ggYW4gb3duZXIgZW50cnkgaGFkIGFsd2F5cyBleGlzdGVkXG5cdFx0XHR1bmxvY2sgPSB0aGlzLmtleSggb3duZXIgKSxcblx0XHRcdGNhY2hlID0gdGhpcy5jYWNoZVsgdW5sb2NrIF07XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIGtleSwgdmFsdWUgXSBhcmdzXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGNhY2hlWyBkYXRhIF0gPSB2YWx1ZTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwgeyBwcm9wZXJ0aWVzIH0gXSBhcmdzXG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIEZyZXNoIGFzc2lnbm1lbnRzIGJ5IG9iamVjdCBhcmUgc2hhbGxvdyBjb3BpZWRcblx0XHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5leHRlbmQoIHRoaXMuY2FjaGVbIHVubG9jayBdLCBkYXRhICk7XG5cdFx0XHQvLyBPdGhlcndpc2UsIGNvcHkgdGhlIHByb3BlcnRpZXMgb25lLWJ5LW9uZSB0byB0aGUgY2FjaGUgb2JqZWN0XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBwcm9wIGluIGRhdGEgKSB7XG5cdFx0XHRcdFx0Y2FjaGVbIHByb3AgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2FjaGU7XG5cdH0sXG5cdGdldDogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0Ly8gRWl0aGVyIGEgdmFsaWQgY2FjaGUgaXMgZm91bmQsIG9yIHdpbGwgYmUgY3JlYXRlZC5cblx0XHQvLyBOZXcgY2FjaGVzIHdpbGwgYmUgY3JlYXRlZCBhbmQgdGhlIHVubG9jayByZXR1cm5lZCxcblx0XHQvLyBhbGxvd2luZyBkaXJlY3QgYWNjZXNzIHRvIHRoZSBuZXdseSBjcmVhdGVkXG5cdFx0Ly8gZW1wdHkgZGF0YSBvYmplY3QuIEEgdmFsaWQgb3duZXIgb2JqZWN0IG11c3QgYmUgcHJvdmlkZWQuXG5cdFx0dmFyIGNhY2hlID0gdGhpcy5jYWNoZVsgdGhpcy5rZXkoIG93bmVyICkgXTtcblxuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRjYWNoZSA6IGNhY2hlWyBrZXkgXTtcblx0fSxcblx0YWNjZXNzOiBmdW5jdGlvbiggb3duZXIsIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIHN0b3JlZDtcblx0XHQvLyBJbiBjYXNlcyB3aGVyZSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIE5vIGtleSB3YXMgc3BlY2lmaWVkXG5cdFx0Ly8gICAyLiBBIHN0cmluZyBrZXkgd2FzIHNwZWNpZmllZCwgYnV0IG5vIHZhbHVlIHByb3ZpZGVkXG5cdFx0Ly9cblx0XHQvLyBUYWtlIHRoZSBcInJlYWRcIiBwYXRoIGFuZCBhbGxvdyB0aGUgZ2V0IG1ldGhvZCB0byBkZXRlcm1pbmVcblx0XHQvLyB3aGljaCB2YWx1ZSB0byByZXR1cm4sIHJlc3BlY3RpdmVseSBlaXRoZXI6XG5cdFx0Ly9cblx0XHQvLyAgIDEuIFRoZSBlbnRpcmUgY2FjaGUgb2JqZWN0XG5cdFx0Ly8gICAyLiBUaGUgZGF0YSBzdG9yZWQgYXQgdGhlIGtleVxuXHRcdC8vXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCB8fFxuXHRcdFx0XHQoKGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiKSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSApIHtcblxuXHRcdFx0c3RvcmVkID0gdGhpcy5nZXQoIG93bmVyLCBrZXkgKTtcblxuXHRcdFx0cmV0dXJuIHN0b3JlZCAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0c3RvcmVkIDogdGhpcy5nZXQoIG93bmVyLCBqUXVlcnkuY2FtZWxDYXNlKGtleSkgKTtcblx0XHR9XG5cblx0XHQvLyBbKl1XaGVuIHRoZSBrZXkgaXMgbm90IGEgc3RyaW5nLCBvciBib3RoIGEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vIGFyZSBzcGVjaWZpZWQsIHNldCBvciBleHRlbmQgKGV4aXN0aW5nIG9iamVjdHMpIHdpdGggZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBBbiBvYmplY3Qgb2YgcHJvcGVydGllc1xuXHRcdC8vICAgMi4gQSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly9cblx0XHR0aGlzLnNldCggb3duZXIsIGtleSwgdmFsdWUgKTtcblxuXHRcdC8vIFNpbmNlIHRoZSBcInNldFwiIHBhdGggY2FuIGhhdmUgdHdvIHBvc3NpYmxlIGVudHJ5IHBvaW50c1xuXHRcdC8vIHJldHVybiB0aGUgZXhwZWN0ZWQgZGF0YSBiYXNlZCBvbiB3aGljaCBwYXRoIHdhcyB0YWtlblsqXVxuXHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBrZXk7XG5cdH0sXG5cdHJlbW92ZTogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGNhbWVsLFxuXHRcdFx0dW5sb2NrID0gdGhpcy5rZXkoIG93bmVyICksXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGVbIHVubG9jayBdO1xuXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHRoaXMuY2FjaGVbIHVubG9jayBdID0ge307XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIGtleSApICkge1xuXHRcdFx0XHQvLyBJZiBcIm5hbWVcIiBpcyBhbiBhcnJheSBvZiBrZXlzLi4uXG5cdFx0XHRcdC8vIFdoZW4gZGF0YSBpcyBpbml0aWFsbHkgY3JlYXRlZCwgdmlhIChcImtleVwiLCBcInZhbFwiKSBzaWduYXR1cmUsXG5cdFx0XHRcdC8vIGtleXMgd2lsbCBiZSBjb252ZXJ0ZWQgdG8gY2FtZWxDYXNlLlxuXHRcdFx0XHQvLyBTaW5jZSB0aGVyZSBpcyBubyB3YXkgdG8gdGVsbCBfaG93XyBhIGtleSB3YXMgYWRkZWQsIHJlbW92ZVxuXHRcdFx0XHQvLyBib3RoIHBsYWluIGtleSBhbmQgY2FtZWxDYXNlIGtleS4gIzEyNzg2XG5cdFx0XHRcdC8vIFRoaXMgd2lsbCBvbmx5IHBlbmFsaXplIHRoZSBhcnJheSBhcmd1bWVudCBwYXRoLlxuXHRcdFx0XHRuYW1lID0ga2V5LmNvbmNhdCgga2V5Lm1hcCggalF1ZXJ5LmNhbWVsQ2FzZSApICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjYW1lbCA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXHRcdFx0XHQvLyBUcnkgdGhlIHN0cmluZyBhcyBhIGtleSBiZWZvcmUgYW55IG1hbmlwdWxhdGlvblxuXHRcdFx0XHRpZiAoIGtleSBpbiBjYWNoZSApIHtcblx0XHRcdFx0XHRuYW1lID0gWyBrZXksIGNhbWVsIF07XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gSWYgYSBrZXkgd2l0aCB0aGUgc3BhY2VzIGV4aXN0cywgdXNlIGl0LlxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgY3JlYXRlIGFuIGFycmF5IGJ5IG1hdGNoaW5nIG5vbi13aGl0ZXNwYWNlXG5cdFx0XHRcdFx0bmFtZSA9IGNhbWVsO1xuXHRcdFx0XHRcdG5hbWUgPSBuYW1lIGluIGNhY2hlID9cblx0XHRcdFx0XHRcdFsgbmFtZSBdIDogKCBuYW1lLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGkgPSBuYW1lLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRkZWxldGUgY2FjaGVbIG5hbWVbIGkgXSBdO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0aGFzRGF0YTogZnVuY3Rpb24oIG93bmVyICkge1xuXHRcdHJldHVybiAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoXG5cdFx0XHR0aGlzLmNhY2hlWyBvd25lclsgdGhpcy5leHBhbmRvIF0gXSB8fCB7fVxuXHRcdCk7XG5cdH0sXG5cdGRpc2NhcmQ6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHRpZiAoIG93bmVyWyB0aGlzLmV4cGFuZG8gXSApIHtcblx0XHRcdGRlbGV0ZSB0aGlzLmNhY2hlWyBvd25lclsgdGhpcy5leHBhbmRvIF0gXTtcblx0XHR9XG5cdH1cbn07XG52YXIgZGF0YV9wcml2ID0gbmV3IERhdGEoKTtcblxudmFyIGRhdGFfdXNlciA9IG5ldyBEYXRhKCk7XG5cblxuXG4vL1x0SW1wbGVtZW50YXRpb24gU3VtbWFyeVxuLy9cbi8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG4vL1x0Mi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlXG4vL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG4vL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cbi8vXHQ0LiBfTmV2ZXJfIGV4cG9zZSBcInByaXZhdGVcIiBkYXRhIHRvIHVzZXIgY29kZSAoVE9ETzogRHJvcCBfZGF0YSwgX3JlbW92ZURhdGEpXG4vL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG4vL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cbnZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdHJtdWx0aURhc2ggPSAvKFtBLVpdKS9nO1xuXG5mdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkge1xuXHR2YXIgbmFtZTtcblxuXHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55XG5cdC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuXHRpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdG5hbWUgPSBcImRhdGEtXCIgKyBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgXCItJDFcIiApLnRvTG93ZXJDYXNlKCk7XG5cdFx0ZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGF0YSA9IGRhdGEgPT09IFwidHJ1ZVwiID8gdHJ1ZSA6XG5cdFx0XHRcdFx0ZGF0YSA9PT0gXCJmYWxzZVwiID8gZmFsc2UgOlxuXHRcdFx0XHRcdGRhdGEgPT09IFwibnVsbFwiID8gbnVsbCA6XG5cdFx0XHRcdFx0Ly8gT25seSBjb252ZXJ0IHRvIGEgbnVtYmVyIGlmIGl0IGRvZXNuJ3QgY2hhbmdlIHRoZSBzdHJpbmdcblx0XHRcdFx0XHQrZGF0YSArIFwiXCIgPT09IGRhdGEgPyArZGF0YSA6XG5cdFx0XHRcdFx0cmJyYWNlLnRlc3QoIGRhdGEgKSA/IGpRdWVyeS5wYXJzZUpTT04oIGRhdGEgKSA6XG5cdFx0XHRcdFx0ZGF0YTtcblx0XHRcdH0gY2F0Y2goIGUgKSB7fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2Ugc2V0IHRoZSBkYXRhIHNvIGl0IGlzbid0IGNoYW5nZWQgbGF0ZXJcblx0XHRcdGRhdGFfdXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZGF0YTtcbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cdGhhc0RhdGE6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkYXRhX3VzZXIuaGFzRGF0YSggZWxlbSApIHx8IGRhdGFfcHJpdi5oYXNEYXRhKCBlbGVtICk7XG5cdH0sXG5cblx0ZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFfdXNlci5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhX3VzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH0sXG5cblx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0Ly8gd2l0aCBkaXJlY3QgY2FsbHMgdG8gZGF0YV9wcml2IG1ldGhvZHMsIHRoZXNlIGNhbiBiZSBkZXByZWNhdGVkLlxuXHRfZGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdGRhdGE6IGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuXHRcdHZhciBpLCBuYW1lLCBkYXRhLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGF0dHJzID0gZWxlbSAmJiBlbGVtLmF0dHJpYnV0ZXM7XG5cblx0XHQvLyBHZXRzIGFsbCB2YWx1ZXNcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB0aGlzLmxlbmd0aCApIHtcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0gKTtcblxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgIWRhdGFfcHJpdi5nZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIgKSApIHtcblx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTExK1xuXHRcdFx0XHRcdFx0Ly8gVGhlIGF0dHJzIGVsZW1lbnRzIGNhbiBiZSBudWxsICgjMTQ4OTQpXG5cdFx0XHRcdFx0XHRpZiAoIGF0dHJzWyBpIF0gKSB7XG5cdFx0XHRcdFx0XHRcdG5hbWUgPSBhdHRyc1sgaSBdLm5hbWU7XG5cdFx0XHRcdFx0XHRcdGlmICggbmFtZS5pbmRleE9mKCBcImRhdGEtXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0XHRcdFx0XHRuYW1lID0galF1ZXJ5LmNhbWVsQ2FzZSggbmFtZS5zbGljZSg1KSApO1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhX3ByaXYuc2V0KCBlbGVtLCBcImhhc0RhdGFBdHRyc1wiLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0cyBtdWx0aXBsZSB2YWx1ZXNcblx0XHRpZiAoIHR5cGVvZiBrZXkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhX3VzZXIuc2V0KCB0aGlzLCBrZXkgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBkYXRhLFxuXHRcdFx0XHRjYW1lbEtleSA9IGpRdWVyeS5jYW1lbENhc2UoIGtleSApO1xuXG5cdFx0XHQvLyBUaGUgY2FsbGluZyBqUXVlcnkgb2JqZWN0IChlbGVtZW50IG1hdGNoZXMpIGlzIG5vdCBlbXB0eVxuXHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdC8vIGB2YWx1ZWAgcGFyYW1ldGVyIHdhcyBub3QgdW5kZWZpbmVkLiBBbiBlbXB0eSBqUXVlcnkgb2JqZWN0XG5cdFx0XHQvLyB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBmb3IgZWxlbSA9IHRoaXNbIDAgXSB3aGljaCB3aWxsXG5cdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0aWYgKCBlbGVtICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gZ2V0IGRhdGEgZnJvbSB0aGUgY2FjaGVcblx0XHRcdFx0Ly8gd2l0aCB0aGUga2V5IGFzLWlzXG5cdFx0XHRcdGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlXG5cdFx0XHRcdC8vIHdpdGggdGhlIGtleSBjYW1lbGl6ZWRcblx0XHRcdFx0ZGF0YSA9IGRhdGFfdXNlci5nZXQoIGVsZW0sIGNhbWVsS2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBcImRpc2NvdmVyXCIgdGhlIGRhdGEgaW5cblx0XHRcdFx0Ly8gSFRNTDUgY3VzdG9tIGRhdGEtKiBhdHRyc1xuXHRcdFx0XHRkYXRhID0gZGF0YUF0dHIoIGVsZW0sIGNhbWVsS2V5LCB1bmRlZmluZWQgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXZSB0cmllZCByZWFsbHkgaGFyZCwgYnV0IHRoZSBkYXRhIGRvZXNuJ3QgZXhpc3QuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHRoZSBkYXRhLi4uXG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdC8vIEZpcnN0LCBhdHRlbXB0IHRvIHN0b3JlIGEgY29weSBvciByZWZlcmVuY2Ugb2YgYW55XG5cdFx0XHRcdC8vIGRhdGEgdGhhdCBtaWdodCd2ZSBiZWVuIHN0b3JlIHdpdGggYSBjYW1lbENhc2VkIGtleS5cblx0XHRcdFx0dmFyIGRhdGEgPSBkYXRhX3VzZXIuZ2V0KCB0aGlzLCBjYW1lbEtleSApO1xuXG5cdFx0XHRcdC8vIEZvciBIVE1MNSBkYXRhLSogYXR0cmlidXRlIGludGVyb3AsIHdlIGhhdmUgdG9cblx0XHRcdFx0Ly8gc3RvcmUgcHJvcGVydHkgbmFtZXMgd2l0aCBkYXNoZXMgaW4gYSBjYW1lbENhc2UgZm9ybS5cblx0XHRcdFx0Ly8gVGhpcyBtaWdodCBub3QgYXBwbHkgdG8gYWxsIHByb3BlcnRpZXMuLi4qXG5cdFx0XHRcdGRhdGFfdXNlci5zZXQoIHRoaXMsIGNhbWVsS2V5LCB2YWx1ZSApO1xuXG5cdFx0XHRcdC8vICouLi4gSW4gdGhlIGNhc2Ugb2YgcHJvcGVydGllcyB0aGF0IG1pZ2h0IF9hY3R1YWxseV9cblx0XHRcdFx0Ly8gaGF2ZSBkYXNoZXMsIHdlIG5lZWQgdG8gYWxzbyBzdG9yZSBhIGNvcHkgb2YgdGhhdFxuXHRcdFx0XHQvLyB1bmNoYW5nZWQgcHJvcGVydHkuXG5cdFx0XHRcdGlmICgga2V5LmluZGV4T2YoXCItXCIpICE9PSAtMSAmJiBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0ZGF0YV91c2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEsIG51bGwsIHRydWUgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRkYXRhX3VzZXIucmVtb3ZlKCB0aGlzLCBrZXkgKTtcblx0XHR9KTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmV4dGVuZCh7XG5cdHF1ZXVlOiBmdW5jdGlvbiggZWxlbSwgdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgcXVldWU7XG5cblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHR0eXBlID0gKCB0eXBlIHx8IFwiZnhcIiApICsgXCJxdWV1ZVwiO1xuXHRcdFx0cXVldWUgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdC8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXBcblx0XHRcdGlmICggZGF0YSApIHtcblx0XHRcdFx0aWYgKCAhcXVldWUgfHwgalF1ZXJ5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIHR5cGUsIGpRdWVyeS5tYWtlQXJyYXkoZGF0YSkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBkYXRhICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBxdWV1ZSB8fCBbXTtcblx0XHR9XG5cdH0sXG5cblx0ZGVxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCBlbGVtLCB0eXBlICksXG5cdFx0XHRzdGFydExlbmd0aCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKSxcblx0XHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCB0eXBlICksXG5cdFx0XHRuZXh0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCBlbGVtLCB0eXBlICk7XG5cdFx0XHR9O1xuXG5cdFx0Ly8gSWYgdGhlIGZ4IHF1ZXVlIGlzIGRlcXVldWVkLCBhbHdheXMgcmVtb3ZlIHRoZSBwcm9ncmVzcyBzZW50aW5lbFxuXHRcdGlmICggZm4gPT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0c3RhcnRMZW5ndGgtLTtcblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXG5cdFx0XHQvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nXG5cdFx0XHQvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiApIHtcblx0XHRcdFx0cXVldWUudW5zaGlmdCggXCJpbnByb2dyZXNzXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2xlYXIgdXAgdGhlIGxhc3QgcXVldWUgc3RvcCBmdW5jdGlvblxuXHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRmbi5jYWxsKCBlbGVtLCBuZXh0LCBob29rcyApO1xuXHRcdH1cblxuXHRcdGlmICggIXN0YXJ0TGVuZ3RoICYmIGhvb2tzICkge1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBOb3QgcHVibGljIC0gZ2VuZXJhdGUgYSBxdWV1ZUhvb2tzIG9iamVjdCwgb3IgcmV0dXJuIHRoZSBjdXJyZW50IG9uZVxuXHRfcXVldWVIb29rczogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dmFyIGtleSA9IHR5cGUgKyBcInF1ZXVlSG9va3NcIjtcblx0XHRyZXR1cm4gZGF0YV9wcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YV9wcml2LmFjY2VzcyggZWxlbSwga2V5LCB7XG5cdFx0XHRlbXB0eTogalF1ZXJ5LkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLmFkZChmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZWxlbSwgWyB0eXBlICsgXCJxdWV1ZVwiLCBrZXkgXSApO1xuXHRcdFx0fSlcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRxdWV1ZTogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHNldHRlciA9IDI7XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZGF0YSA9IHR5cGU7XG5cdFx0XHR0eXBlID0gXCJmeFwiO1xuXHRcdFx0c2V0dGVyLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBhcmd1bWVudHMubGVuZ3RoIDwgc2V0dGVyICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5xdWV1ZSggdGhpc1swXSwgdHlwZSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBkYXRhID09PSB1bmRlZmluZWQgP1xuXHRcdFx0dGhpcyA6XG5cdFx0XHR0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgZGF0YSApO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSBhIGhvb2tzIGZvciB0aGlzIHF1ZXVlXG5cdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggdGhpcywgdHlwZSApO1xuXG5cdFx0XHRcdGlmICggdHlwZSA9PT0gXCJmeFwiICYmIHF1ZXVlWzBdICE9PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0fSxcblx0ZGVxdWV1ZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSk7XG5cdH0sXG5cdGNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0fSxcblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhX3ByaXYuZ2V0KCBlbGVtZW50c1sgaSBdLCB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgKTtcblx0XHRcdGlmICggdG1wICYmIHRtcC5lbXB0eSApIHtcblx0XHRcdFx0Y291bnQrKztcblx0XHRcdFx0dG1wLmVtcHR5LmFkZCggcmVzb2x2ZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXNvbHZlKCk7XG5cdFx0cmV0dXJuIGRlZmVyLnByb21pc2UoIG9iaiApO1xuXHR9XG59KTtcbnZhciBwbnVtID0gKC9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvKS5zb3VyY2U7XG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGlzSGlkZGVuID0gZnVuY3Rpb24oIGVsZW0sIGVsICkge1xuXHRcdC8vIGlzSGlkZGVuIG1pZ2h0IGJlIGNhbGxlZCBmcm9tIGpRdWVyeSNmaWx0ZXIgZnVuY3Rpb247XG5cdFx0Ly8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50XG5cdFx0ZWxlbSA9IGVsIHx8IGVsZW07XG5cdFx0cmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgPT09IFwibm9uZVwiIHx8ICFqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXHR9O1xuXG52YXIgcmNoZWNrYWJsZVR5cGUgPSAoL14oPzpjaGVja2JveHxyYWRpbykkL2kpO1xuXG5cblxuKGZ1bmN0aW9uKCkge1xuXHR2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0ZGl2ID0gZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApLFxuXHRcdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cblx0Ly8gU3VwcG9ydDogU2FmYXJpPD01LjFcblx0Ly8gQ2hlY2sgc3RhdGUgbG9zdCBpZiB0aGUgbmFtZSBpcyBzZXQgKCMxMTIxNylcblx0Ly8gU3VwcG9ydDogV2luZG93cyBXZWIgQXBwcyAoV1dBKVxuXHQvLyBgbmFtZWAgYW5kIGB0eXBlYCBtdXN0IHVzZSAuc2V0QXR0cmlidXRlIGZvciBXV0EgKCMxNDkwMSlcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgXCJyYWRpb1wiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJjaGVja2VkXCIsIFwiY2hlY2tlZFwiICk7XG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwidFwiICk7XG5cblx0ZGl2LmFwcGVuZENoaWxkKCBpbnB1dCApO1xuXG5cdC8vIFN1cHBvcnQ6IFNhZmFyaTw9NS4xLCBBbmRyb2lkPDQuMlxuXHQvLyBPbGRlciBXZWJLaXQgZG9lc24ndCBjbG9uZSBjaGVja2VkIHN0YXRlIGNvcnJlY3RseSBpbiBmcmFnbWVudHNcblx0c3VwcG9ydC5jaGVja0Nsb25lID0gZGl2LmNsb25lTm9kZSggdHJ1ZSApLmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5jaGVja2VkO1xuXG5cdC8vIFN1cHBvcnQ6IElFPD0xMStcblx0Ly8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcblx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtcbn0pKCk7XG52YXIgc3RydW5kZWZpbmVkID0gdHlwZW9mIHVuZGVmaW5lZDtcblxuXG5cbnN1cHBvcnQuZm9jdXNpbkJ1YmJsZXMgPSBcIm9uZm9jdXNpblwiIGluIHdpbmRvdztcblxuXG52YXJcblx0cmtleUV2ZW50ID0gL15rZXkvLFxuXHRybW91c2VFdmVudCA9IC9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudSl8Y2xpY2svLFxuXHRyZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxcblx0cnR5cGVuYW1lc3BhY2UgPSAvXihbXi5dKikoPzpcXC4oLispfCkkLztcblxuZnVuY3Rpb24gcmV0dXJuVHJ1ZSgpIHtcblx0cmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJldHVybkZhbHNlKCkge1xuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHR9IGNhdGNoICggZXJyICkgeyB9XG59XG5cbi8qXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBtYW5hZ2luZyBldmVudHMgLS0gbm90IHBhcnQgb2YgdGhlIHB1YmxpYyBpbnRlcmZhY2UuXG4gKiBQcm9wcyB0byBEZWFuIEVkd2FyZHMnIGFkZEV2ZW50IGxpYnJhcnkgZm9yIG1hbnkgb2YgdGhlIGlkZWFzLlxuICovXG5qUXVlcnkuZXZlbnQgPSB7XG5cblx0Z2xvYmFsOiB7fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgZGF0YSwgc2VsZWN0b3IgKSB7XG5cblx0XHR2YXIgaGFuZGxlT2JqSW4sIGV2ZW50SGFuZGxlLCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YV9wcml2LmdldCggZWxlbSApO1xuXG5cdFx0Ly8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cylcblx0XHRpZiAoICFlbGVtRGF0YSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRpZiAoIGhhbmRsZXIuaGFuZGxlciApIHtcblx0XHRcdGhhbmRsZU9iakluID0gaGFuZGxlcjtcblx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0c2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3Rvcjtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXJcblx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdH1cblxuXHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRpZiAoICEoZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzKSApIHtcblx0XHRcdGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyA9IHt9O1xuXHRcdH1cblx0XHRpZiAoICEoZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUpICkge1xuXHRcdFx0ZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHtcblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gc3RydW5kZWZpbmVkICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIG11bHRpcGxlIGV2ZW50cyBzZXBhcmF0ZWQgYnkgYSBzcGFjZVxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFRoZXJlICptdXN0KiBiZSBhIHR5cGUsIG5vIGF0dGFjaGluZyBuYW1lc3BhY2Utb25seSBoYW5kbGVyc1xuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGV2ZW50IGNoYW5nZXMgaXRzIHR5cGUsIHVzZSB0aGUgc3BlY2lhbCBldmVudCBoYW5kbGVycyBmb3IgdGhlIGNoYW5nZWQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIElmIHNlbGVjdG9yIGRlZmluZWQsIGRldGVybWluZSBzcGVjaWFsIGV2ZW50IGFwaSB0eXBlLCBvdGhlcndpc2UgZ2l2ZW4gdHlwZVxuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXG5cdFx0XHQvLyBVcGRhdGUgc3BlY2lhbCBiYXNlZCBvbiBuZXdseSByZXNldCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gaGFuZGxlT2JqIGlzIHBhc3NlZCB0byBhbGwgZXZlbnQgaGFuZGxlcnNcblx0XHRcdGhhbmRsZU9iaiA9IGpRdWVyeS5leHRlbmQoe1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRvcmlnVHlwZTogb3JpZ1R5cGUsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdGhhbmRsZXI6IGhhbmRsZXIsXG5cdFx0XHRcdGd1aWQ6IGhhbmRsZXIuZ3VpZCxcblx0XHRcdFx0c2VsZWN0b3I6IHNlbGVjdG9yLFxuXHRcdFx0XHRuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuXHRcdFx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbihcIi5cIilcblx0XHRcdH0sIGhhbmRsZU9iakluICk7XG5cblx0XHRcdC8vIEluaXQgdGhlIGV2ZW50IGhhbmRsZXIgcXVldWUgaWYgd2UncmUgdGhlIGZpcnN0XG5cdFx0XHRpZiAoICEoaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSkgKSB7XG5cdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cblx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHwgc3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0uYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdFx0XHRcdGVsZW0uYWRkRXZlbnRMaXN0ZW5lciggdHlwZSwgZXZlbnRIYW5kbGUsIGZhbHNlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdHNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXG5cdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdGpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7XG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdHJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7XG5cblx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YV9wcml2Lmhhc0RhdGEoIGVsZW0gKSAmJiBkYXRhX3ByaXYuZ2V0KCBlbGVtICk7XG5cblx0XHRpZiAoICFlbGVtRGF0YSB8fCAhKGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cykgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXHRcdHQgPSB0eXBlcy5sZW5ndGg7XG5cdFx0d2hpbGUgKCB0LS0gKSB7XG5cdFx0XHR0bXAgPSBydHlwZW5hbWVzcGFjZS5leGVjKCB0eXBlc1t0XSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWzFdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWzJdIHx8IFwiXCIgKS5zcGxpdCggXCIuXCIgKS5zb3J0KCk7XG5cblx0XHRcdC8vIFVuYmluZCBhbGwgZXZlbnRzIChvbiB0aGlzIG5hbWVzcGFjZSwgaWYgcHJvdmlkZWQpIGZvciB0aGUgZWxlbWVudFxuXHRcdFx0aWYgKCAhdHlwZSApIHtcblx0XHRcdFx0Zm9yICggdHlwZSBpbiBldmVudHMgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSArIHR5cGVzWyB0IF0sIGhhbmRsZXIsIHNlbGVjdG9yLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdFx0dHlwZSA9ICggc2VsZWN0b3IgPyBzcGVjaWFsLmRlbGVnYXRlVHlwZSA6IHNwZWNpYWwuYmluZFR5cGUgKSB8fCB0eXBlO1xuXHRcdFx0aGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSB8fCBbXTtcblx0XHRcdHRtcCA9IHRtcFsyXSAmJiBuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKFwiXFxcXC4oPzouKlxcXFwufClcIikgKyBcIihcXFxcLnwkKVwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuXHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHQoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG5cdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuXHRcdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaiwgMSApO1xuXG5cdFx0XHRcdFx0aWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LS07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG5cdFx0XHRcdFx0XHRzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdFxuXHRcdFx0Ly8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG5cdFx0XHRpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnRlYXJkb3duIHx8IHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZWxlbURhdGEuaGFuZGxlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRkZWxldGUgZXZlbnRzWyB0eXBlIF07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBleHBhbmRvIGlmIGl0J3Mgbm8gbG9uZ2VyIHVzZWRcblx0XHRpZiAoIGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBldmVudHMgKSApIHtcblx0XHRcdGRlbGV0ZSBlbGVtRGF0YS5oYW5kbGU7XG5cdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBcImV2ZW50c1wiICk7XG5cdFx0fVxuXHR9LFxuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCBldmVudCwgZGF0YSwgZWxlbSwgb25seUhhbmRsZXJzICkge1xuXG5cdFx0dmFyIGksIGN1ciwgdG1wLCBidWJibGVUeXBlLCBvbnR5cGUsIGhhbmRsZSwgc3BlY2lhbCxcblx0XHRcdGV2ZW50UGF0aCA9IFsgZWxlbSB8fCBkb2N1bWVudCBdLFxuXHRcdFx0dHlwZSA9IGhhc093bi5jYWxsKCBldmVudCwgXCJ0eXBlXCIgKSA/IGV2ZW50LnR5cGUgOiBldmVudCxcblx0XHRcdG5hbWVzcGFjZXMgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwibmFtZXNwYWNlXCIgKSA/IGV2ZW50Lm5hbWVzcGFjZS5zcGxpdChcIi5cIikgOiBbXTtcblxuXHRcdGN1ciA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXG5cdFx0Ly8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3dcblx0XHRpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlLmluZGV4T2YoXCIuXCIpID49IDAgKSB7XG5cdFx0XHQvLyBOYW1lc3BhY2VkIHRyaWdnZXI7IGNyZWF0ZSBhIHJlZ2V4cCB0byBtYXRjaCBldmVudCB0eXBlIGluIGhhbmRsZSgpXG5cdFx0XHRuYW1lc3BhY2VzID0gdHlwZS5zcGxpdChcIi5cIik7XG5cdFx0XHR0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpO1xuXHRcdFx0bmFtZXNwYWNlcy5zb3J0KCk7XG5cdFx0fVxuXHRcdG9udHlwZSA9IHR5cGUuaW5kZXhPZihcIjpcIikgPCAwICYmIFwib25cIiArIHR5cGU7XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYSBqUXVlcnkuRXZlbnQgb2JqZWN0LCBPYmplY3QsIG9yIGp1c3QgYW4gZXZlbnQgdHlwZSBzdHJpbmdcblx0XHRldmVudCA9IGV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdGV2ZW50IDpcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoIHR5cGUsIHR5cGVvZiBldmVudCA9PT0gXCJvYmplY3RcIiAmJiBldmVudCApO1xuXG5cdFx0Ly8gVHJpZ2dlciBiaXRtYXNrOiAmIDEgZm9yIG5hdGl2ZSBoYW5kbGVyczsgJiAyIGZvciBqUXVlcnkgKGFsd2F5cyB0cnVlKVxuXHRcdGV2ZW50LmlzVHJpZ2dlciA9IG9ubHlIYW5kbGVycyA/IDIgOiAzO1xuXHRcdGV2ZW50Lm5hbWVzcGFjZSA9IG5hbWVzcGFjZXMuam9pbihcIi5cIik7XG5cdFx0ZXZlbnQubmFtZXNwYWNlX3JlID0gZXZlbnQubmFtZXNwYWNlID9cblx0XHRcdG5ldyBSZWdFeHAoIFwiKF58XFxcXC4pXCIgKyBuYW1lc3BhY2VzLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKSArIFwiKFxcXFwufCQpXCIgKSA6XG5cdFx0XHRudWxsO1xuXG5cdFx0Ly8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkXG5cdFx0ZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuXHRcdGlmICggIWV2ZW50LnRhcmdldCApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGVsZW07XG5cdFx0fVxuXG5cdFx0Ly8gQ2xvbmUgYW55IGluY29taW5nIGRhdGEgYW5kIHByZXBlbmQgdGhlIGV2ZW50LCBjcmVhdGluZyB0aGUgaGFuZGxlciBhcmcgbGlzdFxuXHRcdGRhdGEgPSBkYXRhID09IG51bGwgP1xuXHRcdFx0WyBldmVudCBdIDpcblx0XHRcdGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEsIFsgZXZlbnQgXSApO1xuXG5cdFx0Ly8gQWxsb3cgc3BlY2lhbCBldmVudHMgdG8gZHJhdyBvdXRzaWRlIHRoZSBsaW5lc1xuXHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiBzcGVjaWFsLnRyaWdnZXIgJiYgc3BlY2lhbC50cmlnZ2VyLmFwcGx5KCBlbGVtLCBkYXRhICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBldmVudCBwcm9wYWdhdGlvbiBwYXRoIGluIGFkdmFuY2UsIHBlciBXM0MgZXZlbnRzIHNwZWMgKCM5OTUxKVxuXHRcdC8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpXG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFzcGVjaWFsLm5vQnViYmxlICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0YnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG5cdFx0XHRpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuXHRcdFx0XHRjdXIgPSBjdXIucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuXHRcdFx0XHR0bXAgPSBjdXI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuXHRcdFx0aWYgKCB0bXAgPT09IChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQpICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggdG1wLmRlZmF1bHRWaWV3IHx8IHRtcC5wYXJlbnRXaW5kb3cgfHwgd2luZG93ICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmlyZSBoYW5kbGVycyBvbiB0aGUgZXZlbnQgcGF0aFxuXHRcdGkgPSAwO1xuXHRcdHdoaWxlICggKGN1ciA9IGV2ZW50UGF0aFtpKytdKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblxuXHRcdFx0ZXZlbnQudHlwZSA9IGkgPiAxID9cblx0XHRcdFx0YnViYmxlVHlwZSA6XG5cdFx0XHRcdHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuXHRcdFx0Ly8galF1ZXJ5IGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9ICggZGF0YV9wcml2LmdldCggY3VyLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdICYmIGRhdGFfcHJpdi5nZXQoIGN1ciwgXCJoYW5kbGVcIiApO1xuXHRcdFx0aWYgKCBoYW5kbGUgKSB7XG5cdFx0XHRcdGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5hdGl2ZSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSBvbnR5cGUgJiYgY3VyWyBvbnR5cGUgXTtcblx0XHRcdGlmICggaGFuZGxlICYmIGhhbmRsZS5hcHBseSAmJiBqUXVlcnkuYWNjZXB0RGF0YSggY3VyICkgKSB7XG5cdFx0XHRcdGV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xuXG5cdFx0Ly8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vd1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cblx0XHRcdGlmICggKCFzcGVjaWFsLl9kZWZhdWx0IHx8IHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZSkgJiZcblx0XHRcdFx0alF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblxuXHRcdFx0XHQvLyBDYWxsIGEgbmF0aXZlIERPTSBtZXRob2Qgb24gdGhlIHRhcmdldCB3aXRoIHRoZSBzYW1lIG5hbWUgbmFtZSBhcyB0aGUgZXZlbnQuXG5cdFx0XHRcdC8vIERvbid0IGRvIGRlZmF1bHQgYWN0aW9ucyBvbiB3aW5kb3csIHRoYXQncyB3aGVyZSBnbG9iYWwgdmFyaWFibGVzIGJlICgjNjE3MClcblx0XHRcdFx0aWYgKCBvbnR5cGUgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIGVsZW1bIHR5cGUgXSApICYmICFqUXVlcnkuaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2Rcblx0XHRcdFx0XHR0bXAgPSBlbGVtWyBvbnR5cGUgXTtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7XG5cdFx0XHRcdFx0ZWxlbVsgdHlwZSBdKCk7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSB0bXA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRkaXNwYXRjaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0ZXZlbnQgPSBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApO1xuXG5cdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLFxuXHRcdFx0aGFuZGxlclF1ZXVlID0gW10sXG5cdFx0XHRhcmdzID0gc2xpY2UuY2FsbCggYXJndW1lbnRzICksXG5cdFx0XHRoYW5kbGVycyA9ICggZGF0YV9wcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG5cdFx0Ly8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcblx0XHRhcmdzWzBdID0gZXZlbnQ7XG5cdFx0ZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzO1xuXG5cdFx0Ly8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuXHRcdGlmICggc3BlY2lhbC5wcmVEaXNwYXRjaCAmJiBzcGVjaWFsLnByZURpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBoYW5kbGVyc1xuXHRcdGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblxuXHRcdC8vIFJ1biBkZWxlZ2F0ZXMgZmlyc3Q7IHRoZXkgbWF5IHdhbnQgdG8gc3RvcCBwcm9wYWdhdGlvbiBiZW5lYXRoIHVzXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAobWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0pICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0ZXZlbnQuY3VycmVudFRhcmdldCA9IG1hdGNoZWQuZWxlbTtcblxuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoIChoYW5kbGVPYmogPSBtYXRjaGVkLmhhbmRsZXJzWyBqKysgXSkgJiYgIWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdFx0Ly8gVHJpZ2dlcmVkIGV2ZW50IG11c3QgZWl0aGVyIDEpIGhhdmUgbm8gbmFtZXNwYWNlLCBvciAyKSBoYXZlIG5hbWVzcGFjZShzKVxuXHRcdFx0XHQvLyBhIHN1YnNldCBvciBlcXVhbCB0byB0aG9zZSBpbiB0aGUgYm91bmQgZXZlbnQgKGJvdGggY2FuIGhhdmUgbm8gbmFtZXNwYWNlKS5cblx0XHRcdFx0aWYgKCAhZXZlbnQubmFtZXNwYWNlX3JlIHx8IGV2ZW50Lm5hbWVzcGFjZV9yZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7XG5cblx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0ZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG5cdFx0XHRcdFx0cmV0ID0gKCAoalF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGhhbmRsZU9iai5vcmlnVHlwZSBdIHx8IHt9KS5oYW5kbGUgfHwgaGFuZGxlT2JqLmhhbmRsZXIgKVxuXHRcdFx0XHRcdFx0XHQuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdGlmICggKGV2ZW50LnJlc3VsdCA9IHJldCkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0XHRldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsIHRoZSBwb3N0RGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlXG5cdFx0aWYgKCBzcGVjaWFsLnBvc3REaXNwYXRjaCApIHtcblx0XHRcdHNwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGV2ZW50LnJlc3VsdDtcblx0fSxcblxuXHRoYW5kbGVyczogZnVuY3Rpb24oIGV2ZW50LCBoYW5kbGVycyApIHtcblx0XHR2YXIgaSwgbWF0Y2hlcywgc2VsLCBoYW5kbGVPYmosXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuXHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICgjMTMxODApXG5cdFx0Ly8gQXZvaWQgbm9uLWxlZnQtY2xpY2sgYnViYmxpbmcgaW4gRmlyZWZveCAoIzM4NjEpXG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50ICYmIGN1ci5ub2RlVHlwZSAmJiAoIWV2ZW50LmJ1dHRvbiB8fCBldmVudC50eXBlICE9PSBcImNsaWNrXCIpICkge1xuXG5cdFx0XHRmb3IgKCA7IGN1ciAhPT0gdGhpczsgY3VyID0gY3VyLnBhcmVudE5vZGUgfHwgdGhpcyApIHtcblxuXHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0aWYgKCBjdXIuZGlzYWJsZWQgIT09IHRydWUgfHwgZXZlbnQudHlwZSAhPT0gXCJjbGlja1wiICkge1xuXHRcdFx0XHRcdG1hdGNoZXMgPSBbXTtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG5cdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID49IDAgOlxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG1hdGNoZXMubGVuZ3RoICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBtYXRjaGVzIH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnNcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgPCBoYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRoYW5kbGVyUXVldWUucHVzaCh7IGVsZW06IHRoaXMsIGhhbmRsZXJzOiBoYW5kbGVycy5zbGljZSggZGVsZWdhdGVDb3VudCApIH0pO1xuXHRcdH1cblxuXHRcdHJldHVybiBoYW5kbGVyUXVldWU7XG5cdH0sXG5cblx0Ly8gSW5jbHVkZXMgc29tZSBldmVudCBwcm9wcyBzaGFyZWQgYnkgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnRcblx0cHJvcHM6IFwiYWx0S2V5IGJ1YmJsZXMgY2FuY2VsYWJsZSBjdHJsS2V5IGN1cnJlbnRUYXJnZXQgZXZlbnRQaGFzZSBtZXRhS2V5IHJlbGF0ZWRUYXJnZXQgc2hpZnRLZXkgdGFyZ2V0IHRpbWVTdGFtcCB2aWV3IHdoaWNoXCIuc3BsaXQoXCIgXCIpLFxuXG5cdGZpeEhvb2tzOiB7fSxcblxuXHRrZXlIb29rczoge1xuXHRcdHByb3BzOiBcImNoYXIgY2hhckNvZGUga2V5IGtleUNvZGVcIi5zcGxpdChcIiBcIiksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXG5cdFx0XHQvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcblx0XHRcdGlmICggZXZlbnQud2hpY2ggPT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnQud2hpY2ggPSBvcmlnaW5hbC5jaGFyQ29kZSAhPSBudWxsID8gb3JpZ2luYWwuY2hhckNvZGUgOiBvcmlnaW5hbC5rZXlDb2RlO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZXZlbnQ7XG5cdFx0fVxuXHR9LFxuXG5cdG1vdXNlSG9va3M6IHtcblx0XHRwcm9wczogXCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksXG5cdFx0ZmlsdGVyOiBmdW5jdGlvbiggZXZlbnQsIG9yaWdpbmFsICkge1xuXHRcdFx0dmFyIGV2ZW50RG9jLCBkb2MsIGJvZHksXG5cdFx0XHRcdGJ1dHRvbiA9IG9yaWdpbmFsLmJ1dHRvbjtcblxuXHRcdFx0Ly8gQ2FsY3VsYXRlIHBhZ2VYL1kgaWYgbWlzc2luZyBhbmQgY2xpZW50WC9ZIGF2YWlsYWJsZVxuXHRcdFx0aWYgKCBldmVudC5wYWdlWCA9PSBudWxsICYmIG9yaWdpbmFsLmNsaWVudFggIT0gbnVsbCApIHtcblx0XHRcdFx0ZXZlbnREb2MgPSBldmVudC50YXJnZXQub3duZXJEb2N1bWVudCB8fCBkb2N1bWVudDtcblx0XHRcdFx0ZG9jID0gZXZlbnREb2MuZG9jdW1lbnRFbGVtZW50O1xuXHRcdFx0XHRib2R5ID0gZXZlbnREb2MuYm9keTtcblxuXHRcdFx0XHRldmVudC5wYWdlWCA9IG9yaWdpbmFsLmNsaWVudFggKyAoIGRvYyAmJiBkb2Muc2Nyb2xsTGVmdCB8fCBib2R5ICYmIGJvZHkuc2Nyb2xsTGVmdCB8fCAwICkgLSAoIGRvYyAmJiBkb2MuY2xpZW50TGVmdCB8fCBib2R5ICYmIGJvZHkuY2xpZW50TGVmdCB8fCAwICk7XG5cdFx0XHRcdGV2ZW50LnBhZ2VZID0gb3JpZ2luYWwuY2xpZW50WSArICggZG9jICYmIGRvYy5zY3JvbGxUb3AgIHx8IGJvZHkgJiYgYm9keS5zY3JvbGxUb3AgIHx8IDAgKSAtICggZG9jICYmIGRvYy5jbGllbnRUb3AgIHx8IGJvZHkgJiYgYm9keS5jbGllbnRUb3AgIHx8IDAgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuXHRcdFx0Ly8gTm90ZTogYnV0dG9uIGlzIG5vdCBub3JtYWxpemVkLCBzbyBkb24ndCB1c2UgaXRcblx0XHRcdGlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRldmVudC53aGljaCA9ICggYnV0dG9uICYgMSA/IDEgOiAoIGJ1dHRvbiAmIDIgPyAzIDogKCBidXR0b24gJiA0ID8gMiA6IDAgKSApICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cdH0sXG5cblx0Zml4OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0aWYgKCBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSApIHtcblx0XHRcdHJldHVybiBldmVudDtcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgYSB3cml0YWJsZSBjb3B5IG9mIHRoZSBldmVudCBvYmplY3QgYW5kIG5vcm1hbGl6ZSBzb21lIHByb3BlcnRpZXNcblx0XHR2YXIgaSwgcHJvcCwgY29weSxcblx0XHRcdHR5cGUgPSBldmVudC50eXBlLFxuXHRcdFx0b3JpZ2luYWxFdmVudCA9IGV2ZW50LFxuXHRcdFx0Zml4SG9vayA9IHRoaXMuZml4SG9va3NbIHR5cGUgXTtcblxuXHRcdGlmICggIWZpeEhvb2sgKSB7XG5cdFx0XHR0aGlzLmZpeEhvb2tzWyB0eXBlIF0gPSBmaXhIb29rID1cblx0XHRcdFx0cm1vdXNlRXZlbnQudGVzdCggdHlwZSApID8gdGhpcy5tb3VzZUhvb2tzIDpcblx0XHRcdFx0cmtleUV2ZW50LnRlc3QoIHR5cGUgKSA/IHRoaXMua2V5SG9va3MgOlxuXHRcdFx0XHR7fTtcblx0XHR9XG5cdFx0Y29weSA9IGZpeEhvb2sucHJvcHMgPyB0aGlzLnByb3BzLmNvbmNhdCggZml4SG9vay5wcm9wcyApIDogdGhpcy5wcm9wcztcblxuXHRcdGV2ZW50ID0gbmV3IGpRdWVyeS5FdmVudCggb3JpZ2luYWxFdmVudCApO1xuXG5cdFx0aSA9IGNvcHkubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0cHJvcCA9IGNvcHlbIGkgXTtcblx0XHRcdGV2ZW50WyBwcm9wIF0gPSBvcmlnaW5hbEV2ZW50WyBwcm9wIF07XG5cdFx0fVxuXG5cdFx0Ly8gU3VwcG9ydDogQ29yZG92YSAyLjUgKFdlYktpdCkgKCMxMzI1NSlcblx0XHQvLyBBbGwgZXZlbnRzIHNob3VsZCBoYXZlIGEgdGFyZ2V0OyBDb3Jkb3ZhIGRldmljZXJlYWR5IGRvZXNuJ3Rcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBkb2N1bWVudDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgNi4wKywgQ2hyb21lPDI4XG5cdFx0Ly8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0Mylcblx0XHRpZiAoIGV2ZW50LnRhcmdldC5ub2RlVHlwZSA9PT0gMyApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xuXHRcdH1cblxuXHRcdHJldHVybiBmaXhIb29rLmZpbHRlciA/IGZpeEhvb2suZmlsdGVyKCBldmVudCwgb3JpZ2luYWxFdmVudCApIDogZXZlbnQ7XG5cdH0sXG5cblx0c3BlY2lhbDoge1xuXHRcdGxvYWQ6IHtcblx0XHRcdC8vIFByZXZlbnQgdHJpZ2dlcmVkIGltYWdlLmxvYWQgZXZlbnRzIGZyb20gYnViYmxpbmcgdG8gd2luZG93LmxvYWRcblx0XHRcdG5vQnViYmxlOiB0cnVlXG5cdFx0fSxcblx0XHRmb2N1czoge1xuXHRcdFx0Ly8gRmlyZSBuYXRpdmUgZXZlbnQgaWYgcG9zc2libGUgc28gYmx1ci9mb2N1cyBzZXF1ZW5jZSBpcyBjb3JyZWN0XG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCB0aGlzICE9PSBzYWZlQWN0aXZlRWxlbWVudCgpICYmIHRoaXMuZm9jdXMgKSB7XG5cdFx0XHRcdFx0dGhpcy5mb2N1cygpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c2luXCJcblx0XHR9LFxuXHRcdGJsdXI6IHtcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMgPT09IHNhZmVBY3RpdmVFbGVtZW50KCkgJiYgdGhpcy5ibHVyICkge1xuXHRcdFx0XHRcdHRoaXMuYmx1cigpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlbGVnYXRlVHlwZTogXCJmb2N1c291dFwiXG5cdFx0fSxcblx0XHRjbGljazoge1xuXHRcdFx0Ly8gRm9yIGNoZWNrYm94LCBmaXJlIG5hdGl2ZSBldmVudCBzbyBjaGVja2VkIHN0YXRlIHdpbGwgYmUgcmlnaHRcblx0XHRcdHRyaWdnZXI6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoIHRoaXMudHlwZSA9PT0gXCJjaGVja2JveFwiICYmIHRoaXMuY2xpY2sgJiYgalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR0aGlzLmNsaWNrKCk7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBGb3IgY3Jvc3MtYnJvd3NlciBjb25zaXN0ZW5jeSwgZG9uJ3QgZmlyZSBuYXRpdmUgLmNsaWNrKCkgb24gbGlua3Ncblx0XHRcdF9kZWZhdWx0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkubm9kZU5hbWUoIGV2ZW50LnRhcmdldCwgXCJhXCIgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmVmb3JldW5sb2FkOiB7XG5cdFx0XHRwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDIwK1xuXHRcdFx0XHQvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuXG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHNpbXVsYXRlOiBmdW5jdGlvbiggdHlwZSwgZWxlbSwgZXZlbnQsIGJ1YmJsZSApIHtcblx0XHQvLyBQaWdneWJhY2sgb24gYSBkb25vciBldmVudCB0byBzaW11bGF0ZSBhIGRpZmZlcmVudCBvbmUuXG5cdFx0Ly8gRmFrZSBvcmlnaW5hbEV2ZW50IHRvIGF2b2lkIGRvbm9yJ3Mgc3RvcFByb3BhZ2F0aW9uLCBidXQgaWYgdGhlXG5cdFx0Ly8gc2ltdWxhdGVkIGV2ZW50IHByZXZlbnRzIGRlZmF1bHQgdGhlbiB3ZSBkbyB0aGUgc2FtZSBvbiB0aGUgZG9ub3IuXG5cdFx0dmFyIGUgPSBqUXVlcnkuZXh0ZW5kKFxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCgpLFxuXHRcdFx0ZXZlbnQsXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGlzU2ltdWxhdGVkOiB0cnVlLFxuXHRcdFx0XHRvcmlnaW5hbEV2ZW50OiB7fVxuXHRcdFx0fVxuXHRcdCk7XG5cdFx0aWYgKCBidWJibGUgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuZGlzcGF0Y2guY2FsbCggZWxlbSwgZSApO1xuXHRcdH1cblx0XHRpZiAoIGUuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcblx0aWYgKCBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0ZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUsIGZhbHNlICk7XG5cdH1cbn07XG5cbmpRdWVyeS5FdmVudCA9IGZ1bmN0aW9uKCBzcmMsIHByb3BzICkge1xuXHQvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcblx0aWYgKCAhKHRoaXMgaW5zdGFuY2VvZiBqUXVlcnkuRXZlbnQpICkge1xuXHRcdHJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBFdmVudCBvYmplY3Rcblx0aWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7XG5cdFx0dGhpcy5vcmlnaW5hbEV2ZW50ID0gc3JjO1xuXHRcdHRoaXMudHlwZSA9IHNyYy50eXBlO1xuXG5cdFx0Ly8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWRcblx0XHQvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS5cblx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8XG5cdFx0XHRcdHNyYy5kZWZhdWx0UHJldmVudGVkID09PSB1bmRlZmluZWQgJiZcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0XHRcdFx0c3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRyZXR1cm5UcnVlIDpcblx0XHRcdHJldHVybkZhbHNlO1xuXG5cdC8vIEV2ZW50IHR5cGVcblx0fSBlbHNlIHtcblx0XHR0aGlzLnR5cGUgPSBzcmM7XG5cdH1cblxuXHQvLyBQdXQgZXhwbGljaXRseSBwcm92aWRlZCBwcm9wZXJ0aWVzIG9udG8gdGhlIGV2ZW50IG9iamVjdFxuXHRpZiAoIHByb3BzICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRoaXMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBDcmVhdGUgYSB0aW1lc3RhbXAgaWYgaW5jb21pbmcgZXZlbnQgZG9lc24ndCBoYXZlIG9uZVxuXHR0aGlzLnRpbWVTdGFtcCA9IHNyYyAmJiBzcmMudGltZVN0YW1wIHx8IGpRdWVyeS5ub3coKTtcblxuXHQvLyBNYXJrIGl0IGFzIGZpeGVkXG5cdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbmpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7XG5cdGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG5cdGlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXG5cdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnByZXZlbnREZWZhdWx0ICkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblx0c3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmIGUuc3RvcFByb3BhZ2F0aW9uICkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiApIHtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcblx0fVxufTtcblxuLy8gQ3JlYXRlIG1vdXNlZW50ZXIvbGVhdmUgZXZlbnRzIHVzaW5nIG1vdXNlb3Zlci9vdXQgYW5kIGV2ZW50LXRpbWUgY2hlY2tzXG4vLyBTdXBwb3J0OiBDaHJvbWUgMTUrXG5qUXVlcnkuZWFjaCh7XG5cdG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG5cdG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIixcblx0cG9pbnRlcmVudGVyOiBcInBvaW50ZXJvdmVyXCIsXG5cdHBvaW50ZXJsZWF2ZTogXCJwb2ludGVyb3V0XCJcbn0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBvcmlnIF0gPSB7XG5cdFx0ZGVsZWdhdGVUeXBlOiBmaXgsXG5cdFx0YmluZFR5cGU6IGZpeCxcblxuXHRcdGhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIHJldCxcblx0XHRcdFx0dGFyZ2V0ID0gdGhpcyxcblx0XHRcdFx0cmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsXG5cdFx0XHRcdGhhbmRsZU9iaiA9IGV2ZW50LmhhbmRsZU9iajtcblxuXHRcdFx0Ly8gRm9yIG1vdXNlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuXHRcdFx0Ly8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcblx0XHRcdGlmICggIXJlbGF0ZWQgfHwgKHJlbGF0ZWQgIT09IHRhcmdldCAmJiAhalF1ZXJ5LmNvbnRhaW5zKCB0YXJnZXQsIHJlbGF0ZWQgKSkgKSB7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7XG5cdFx0XHRcdHJldCA9IGhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGZpeDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3gsIENocm9tZSwgU2FmYXJpXG4vLyBDcmVhdGUgXCJidWJibGluZ1wiIGZvY3VzIGFuZCBibHVyIGV2ZW50c1xuaWYgKCAhc3VwcG9ydC5mb2N1c2luQnViYmxlcyApIHtcblx0alF1ZXJ5LmVhY2goeyBmb2N1czogXCJmb2N1c2luXCIsIGJsdXI6IFwiZm9jdXNvdXRcIiB9LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXG5cdFx0Ly8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXRcblx0XHR2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0alF1ZXJ5LmV2ZW50LnNpbXVsYXRlKCBmaXgsIGV2ZW50LnRhcmdldCwgalF1ZXJ5LmV2ZW50LmZpeCggZXZlbnQgKSwgdHJ1ZSApO1xuXHRcdFx0fTtcblxuXHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YV9wcml2LmFjY2VzcyggZG9jLCBmaXggKTtcblxuXHRcdFx0XHRpZiAoICFhdHRhY2hlcyApIHtcblx0XHRcdFx0XHRkb2MuYWRkRXZlbnRMaXN0ZW5lciggb3JpZywgaGFuZGxlciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4LCAoIGF0dGFjaGVzIHx8IDAgKSArIDEgKTtcblx0XHRcdH0sXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4ICkgLSAxO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0ZGF0YV9wcml2LnJlbW92ZSggZG9jLCBmaXggKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRhdGFfcHJpdi5hY2Nlc3MoIGRvYywgZml4LCBhdHRhY2hlcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fSk7XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXG5cdG9uOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgLypJTlRFUk5BTCovIG9uZSApIHtcblx0XHR2YXIgb3JpZ0ZuLCB0eXBlO1xuXG5cdFx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHQvLyAoIHR5cGVzLU9iamVjdCwgc2VsZWN0b3IsIGRhdGEgKVxuXHRcdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRcdC8vICggdHlwZXMtT2JqZWN0LCBkYXRhIClcblx0XHRcdFx0ZGF0YSA9IGRhdGEgfHwgc2VsZWN0b3I7XG5cdFx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdFx0fVxuXHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0dGhpcy5vbiggdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXG5cdFx0aWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHtcblx0XHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyAoIHR5cGVzLCBzZWxlY3RvciwgZm4gKVxuXHRcdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyAoIHR5cGVzLCBkYXRhLCBmbiApXG5cdFx0XHRcdGZuID0gZGF0YTtcblx0XHRcdFx0ZGF0YSA9IHNlbGVjdG9yO1xuXHRcdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdH0gZWxzZSBpZiAoICFmbiApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdGlmICggb25lID09PSAxICkge1xuXHRcdFx0b3JpZ0ZuID0gZm47XG5cdFx0XHRmbiA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdFx0Ly8gQ2FuIHVzZSBhbiBlbXB0eSBzZXQsIHNpbmNlIGV2ZW50IGNvbnRhaW5zIHRoZSBpbmZvXG5cdFx0XHRcdGpRdWVyeSgpLm9mZiggZXZlbnQgKTtcblx0XHRcdFx0cmV0dXJuIG9yaWdGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHR9O1xuXHRcdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0XHR9KTtcblx0fSxcblx0b25lOiBmdW5jdGlvbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgMSApO1xuXHR9LFxuXHRvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkge1xuXHRcdHZhciBoYW5kbGVPYmosIHR5cGU7XG5cdFx0aWYgKCB0eXBlcyAmJiB0eXBlcy5wcmV2ZW50RGVmYXVsdCAmJiB0eXBlcy5oYW5kbGVPYmogKSB7XG5cdFx0XHQvLyAoIGV2ZW50ICkgIGRpc3BhdGNoZWQgalF1ZXJ5LkV2ZW50XG5cdFx0XHRoYW5kbGVPYmogPSB0eXBlcy5oYW5kbGVPYmo7XG5cdFx0XHRqUXVlcnkoIHR5cGVzLmRlbGVnYXRlVGFyZ2V0ICkub2ZmKFxuXHRcdFx0XHRoYW5kbGVPYmoubmFtZXNwYWNlID8gaGFuZGxlT2JqLm9yaWdUeXBlICsgXCIuXCIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDogaGFuZGxlT2JqLm9yaWdUeXBlLFxuXHRcdFx0XHRoYW5kbGVPYmouc2VsZWN0b3IsXG5cdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcy1vYmplY3QgWywgc2VsZWN0b3JdIClcblx0XHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRcdHRoaXMub2ZmKCB0eXBlLCBzZWxlY3RvciwgdHlwZXNbIHR5cGUgXSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggc2VsZWN0b3IgPT09IGZhbHNlIHx8IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiICkge1xuXHRcdFx0Ly8gKCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCB0aGlzLCB0eXBlcywgZm4sIHNlbGVjdG9yICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCB0aGlzICk7XG5cdFx0fSk7XG5cdH0sXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgZWxlbSA9IHRoaXNbMF07XG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5ldmVudC50cmlnZ2VyKCB0eXBlLCBkYXRhLCBlbGVtLCB0cnVlICk7XG5cdFx0fVxuXHR9XG59KTtcblxuXG52YXJcblx0cnhodG1sVGFnID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW1xcdzpdKylbXj5dKilcXC8+L2dpLFxuXHRydGFnTmFtZSA9IC88KFtcXHc6XSspLyxcblx0cmh0bWwgPSAvPHwmIz9cXHcrOy8sXG5cdHJub0lubmVyaHRtbCA9IC88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksXG5cdC8vIGNoZWNrZWQ9XCJjaGVja2VkXCIgb3IgY2hlY2tlZFxuXHRyY2hlY2tlZCA9IC9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksXG5cdHJzY3JpcHRUeXBlID0gL14kfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSxcblx0cnNjcmlwdFR5cGVNYXNrZWQgPSAvXnRydWVcXC8oLiopLyxcblx0cmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nLFxuXG5cdC8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG5cdHdyYXBNYXAgPSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRvcHRpb246IFsgMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCIgXSxcblxuXHRcdHRoZWFkOiBbIDEsIFwiPHRhYmxlPlwiLCBcIjwvdGFibGU+XCIgXSxcblx0XHRjb2w6IFsgMiwgXCI8dGFibGU+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuXHRcdHRyOiBbIDIsIFwiPHRhYmxlPjx0Ym9keT5cIiwgXCI8L3Rib2R5PjwvdGFibGU+XCIgXSxcblx0XHR0ZDogWyAzLCBcIjx0YWJsZT48dGJvZHk+PHRyPlwiLCBcIjwvdHI+PC90Ym9keT48L3RhYmxlPlwiIF0sXG5cblx0XHRfZGVmYXVsdDogWyAwLCBcIlwiLCBcIlwiIF1cblx0fTtcblxuLy8gU3VwcG9ydDogSUU5XG53cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG5cbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuLy8gU3VwcG9ydDogMS54IGNvbXBhdGliaWxpdHlcbi8vIE1hbmlwdWxhdGluZyB0YWJsZXMgcmVxdWlyZXMgYSB0Ym9keVxuZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KCBlbGVtLCBjb250ZW50ICkge1xuXHRyZXR1cm4galF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcInRhYmxlXCIgKSAmJlxuXHRcdGpRdWVyeS5ub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSA/XG5cblx0XHRlbGVtLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGJvZHlcIilbMF0gfHxcblx0XHRcdGVsZW0uYXBwZW5kQ2hpbGQoIGVsZW0ub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGJvZHlcIikgKSA6XG5cdFx0ZWxlbTtcbn1cblxuLy8gUmVwbGFjZS9yZXN0b3JlIHRoZSB0eXBlIGF0dHJpYnV0ZSBvZiBzY3JpcHQgZWxlbWVudHMgZm9yIHNhZmUgRE9NIG1hbmlwdWxhdGlvblxuZnVuY3Rpb24gZGlzYWJsZVNjcmlwdCggZWxlbSApIHtcblx0ZWxlbS50eXBlID0gKGVsZW0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKSAhPT0gbnVsbCkgKyBcIi9cIiArIGVsZW0udHlwZTtcblx0cmV0dXJuIGVsZW07XG59XG5mdW5jdGlvbiByZXN0b3JlU2NyaXB0KCBlbGVtICkge1xuXHR2YXIgbWF0Y2ggPSByc2NyaXB0VHlwZU1hc2tlZC5leGVjKCBlbGVtLnR5cGUgKTtcblxuXHRpZiAoIG1hdGNoICkge1xuXHRcdGVsZW0udHlwZSA9IG1hdGNoWyAxIF07XG5cdH0gZWxzZSB7XG5cdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoXCJ0eXBlXCIpO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbi8vIE1hcmsgc2NyaXB0cyBhcyBoYXZpbmcgYWxyZWFkeSBiZWVuIGV2YWx1YXRlZFxuZnVuY3Rpb24gc2V0R2xvYmFsRXZhbCggZWxlbXMsIHJlZkVsZW1lbnRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZGF0YV9wcml2LnNldChcblx0XHRcdGVsZW1zWyBpIF0sIFwiZ2xvYmFsRXZhbFwiLCAhcmVmRWxlbWVudHMgfHwgZGF0YV9wcml2LmdldCggcmVmRWxlbWVudHNbIGkgXSwgXCJnbG9iYWxFdmFsXCIgKVxuXHRcdCk7XG5cdH1cbn1cblxuZnVuY3Rpb24gY2xvbmVDb3B5RXZlbnQoIHNyYywgZGVzdCApIHtcblx0dmFyIGksIGwsIHR5cGUsIHBkYXRhT2xkLCBwZGF0YUN1ciwgdWRhdGFPbGQsIHVkYXRhQ3VyLCBldmVudHM7XG5cblx0aWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIDEuIENvcHkgcHJpdmF0ZSBkYXRhOiBldmVudHMsIGhhbmRsZXJzLCBldGMuXG5cdGlmICggZGF0YV9wcml2Lmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHBkYXRhT2xkID0gZGF0YV9wcml2LmFjY2Vzcyggc3JjICk7XG5cdFx0cGRhdGFDdXIgPSBkYXRhX3ByaXYuc2V0KCBkZXN0LCBwZGF0YU9sZCApO1xuXHRcdGV2ZW50cyA9IHBkYXRhT2xkLmV2ZW50cztcblxuXHRcdGlmICggZXZlbnRzICkge1xuXHRcdFx0ZGVsZXRlIHBkYXRhQ3VyLmhhbmRsZTtcblx0XHRcdHBkYXRhQ3VyLmV2ZW50cyA9IHt9O1xuXG5cdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBldmVudHNbIHR5cGUgXS5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZGVzdCwgdHlwZSwgZXZlbnRzWyB0eXBlIF1bIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gMi4gQ29weSB1c2VyIGRhdGFcblx0aWYgKCBkYXRhX3VzZXIuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0dWRhdGFPbGQgPSBkYXRhX3VzZXIuYWNjZXNzKCBzcmMgKTtcblx0XHR1ZGF0YUN1ciA9IGpRdWVyeS5leHRlbmQoIHt9LCB1ZGF0YU9sZCApO1xuXG5cdFx0ZGF0YV91c2VyLnNldCggZGVzdCwgdWRhdGFDdXIgKTtcblx0fVxufVxuXG5mdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcblx0dmFyIHJldCA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPyBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgfHwgXCIqXCIgKSA6XG5cdFx0XHRjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgPyBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCBcIipcIiApIDpcblx0XHRcdFtdO1xuXG5cdHJldHVybiB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgalF1ZXJ5Lm5vZGVOYW1lKCBjb250ZXh0LCB0YWcgKSA/XG5cdFx0alF1ZXJ5Lm1lcmdlKCBbIGNvbnRleHQgXSwgcmV0ICkgOlxuXHRcdHJldDtcbn1cblxuLy8gRml4IElFIGJ1Z3MsIHNlZSBzdXBwb3J0IHRlc3RzXG5mdW5jdGlvbiBmaXhJbnB1dCggc3JjLCBkZXN0ICkge1xuXHR2YXIgbm9kZU5hbWUgPSBkZXN0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cblx0Ly8gRmFpbHMgdG8gcGVyc2lzdCB0aGUgY2hlY2tlZCBzdGF0ZSBvZiBhIGNsb25lZCBjaGVja2JveCBvciByYWRpbyBidXR0b24uXG5cdGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiByY2hlY2thYmxlVHlwZS50ZXN0KCBzcmMudHlwZSApICkge1xuXHRcdGRlc3QuY2hlY2tlZCA9IHNyYy5jaGVja2VkO1xuXG5cdC8vIEZhaWxzIHRvIHJldHVybiB0aGUgc2VsZWN0ZWQgb3B0aW9uIHRvIHRoZSBkZWZhdWx0IHNlbGVjdGVkIHN0YXRlIHdoZW4gY2xvbmluZyBvcHRpb25zXG5cdH0gZWxzZSBpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgfHwgbm9kZU5hbWUgPT09IFwidGV4dGFyZWFcIiApIHtcblx0XHRkZXN0LmRlZmF1bHRWYWx1ZSA9IHNyYy5kZWZhdWx0VmFsdWU7XG5cdH1cbn1cblxualF1ZXJ5LmV4dGVuZCh7XG5cdGNsb25lOiBmdW5jdGlvbiggZWxlbSwgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0dmFyIGksIGwsIHNyY0VsZW1lbnRzLCBkZXN0RWxlbWVudHMsXG5cdFx0XHRjbG9uZSA9IGVsZW0uY2xvbmVOb2RlKCB0cnVlICksXG5cdFx0XHRpblBhZ2UgPSBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXG5cdFx0Ly8gRml4IElFIGNsb25pbmcgaXNzdWVzXG5cdFx0aWYgKCAhc3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCAmJiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgfHwgZWxlbS5ub2RlVHlwZSA9PT0gMTEgKSAmJlxuXHRcdFx0XHQhalF1ZXJ5LmlzWE1MRG9jKCBlbGVtICkgKSB7XG5cblx0XHRcdC8vIFdlIGVzY2hldyBTaXp6bGUgaGVyZSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uczogaHR0cDovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG5cdFx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7XG5cdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXG5cdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuXHRcdGlmICggZGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG5cdFx0XHRcdGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG5cdFx0aWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdHJldHVybiBjbG9uZTtcblx0fSxcblxuXHRidWlsZEZyYWdtZW50OiBmdW5jdGlvbiggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiApIHtcblx0XHR2YXIgZWxlbSwgdG1wLCB0YWcsIHdyYXAsIGNvbnRhaW5zLCBqLFxuXHRcdFx0ZnJhZ21lbnQgPSBjb250ZXh0LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRcdG5vZGVzID0gW10sXG5cdFx0XHRpID0gMCxcblx0XHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRlbGVtID0gZWxlbXNbIGkgXTtcblxuXHRcdFx0aWYgKCBlbGVtIHx8IGVsZW0gPT09IDAgKSB7XG5cblx0XHRcdFx0Ly8gQWRkIG5vZGVzIGRpcmVjdGx5XG5cdFx0XHRcdGlmICggalF1ZXJ5LnR5cGUoIGVsZW0gKSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdCwgUGhhbnRvbUpTXG5cdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIGVsZW0ubm9kZVR5cGUgPyBbIGVsZW0gXSA6IGVsZW0gKTtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcblx0XHRcdFx0fSBlbHNlIGlmICggIXJodG1sLnRlc3QoIGVsZW0gKSApIHtcblx0XHRcdFx0XHRub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTtcblxuXHRcdFx0XHQvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0bXAgPSB0bXAgfHwgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudChcImRpdlwiKSApO1xuXG5cdFx0XHRcdFx0Ly8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuXHRcdFx0XHRcdHRhZyA9ICggcnRhZ05hbWUuZXhlYyggZWxlbSApIHx8IFsgXCJcIiwgXCJcIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdHdyYXAgPSB3cmFwTWFwWyB0YWcgXSB8fCB3cmFwTWFwLl9kZWZhdWx0O1xuXHRcdFx0XHRcdHRtcC5pbm5lckhUTUwgPSB3cmFwWyAxIF0gKyBlbGVtLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApICsgd3JhcFsgMiBdO1xuXG5cdFx0XHRcdFx0Ly8gRGVzY2VuZCB0aHJvdWdoIHdyYXBwZXJzIHRvIHRoZSByaWdodCBjb250ZW50XG5cdFx0XHRcdFx0aiA9IHdyYXBbIDAgXTtcblx0XHRcdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0XHRcdHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXQsIFBoYW50b21KU1xuXHRcdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCB0bXAuY2hpbGROb2RlcyApO1xuXG5cdFx0XHRcdFx0Ly8gUmVtZW1iZXIgdGhlIHRvcC1sZXZlbCBjb250YWluZXJcblx0XHRcdFx0XHR0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRcdFx0Ly8gRW5zdXJlIHRoZSBjcmVhdGVkIG5vZGVzIGFyZSBvcnBoYW5lZCAoIzEyMzkyKVxuXHRcdFx0XHRcdHRtcC50ZXh0Q29udGVudCA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XG5cdFx0ZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoZWxlbSA9IG5vZGVzWyBpKysgXSkgKSB7XG5cblx0XHRcdC8vICM0MDg3IC0gSWYgb3JpZ2luIGFuZCBkZXN0aW5hdGlvbiBlbGVtZW50cyBhcmUgdGhlIHNhbWUsIGFuZCB0aGlzIGlzXG5cdFx0XHQvLyB0aGF0IGVsZW1lbnQsIGRvIG5vdCBkbyBhbnl0aGluZ1xuXHRcdFx0aWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApICE9PSAtMSApIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnRhaW5zID0galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKTtcblxuXHRcdFx0Ly8gQXBwZW5kIHRvIGZyYWdtZW50XG5cdFx0XHR0bXAgPSBnZXRBbGwoIGZyYWdtZW50LmFwcGVuZENoaWxkKCBlbGVtICksIFwic2NyaXB0XCIgKTtcblxuXHRcdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdFx0aWYgKCBjb250YWlucyApIHtcblx0XHRcdFx0c2V0R2xvYmFsRXZhbCggdG1wICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhcHR1cmUgZXhlY3V0YWJsZXNcblx0XHRcdGlmICggc2NyaXB0cyApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSB0bXBbIGorKyBdKSApIHtcblx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIGVsZW0udHlwZSB8fCBcIlwiICkgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZnJhZ21lbnQ7XG5cdH0sXG5cblx0Y2xlYW5EYXRhOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cdFx0dmFyIGRhdGEsIGVsZW0sIHR5cGUsIGtleSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IGVsZW1zWyBpIF0pICE9PSB1bmRlZmluZWQ7IGkrKyApIHtcblx0XHRcdGlmICggalF1ZXJ5LmFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0a2V5ID0gZWxlbVsgZGF0YV9wcml2LmV4cGFuZG8gXTtcblxuXHRcdFx0XHRpZiAoIGtleSAmJiAoZGF0YSA9IGRhdGFfcHJpdi5jYWNoZVsga2V5IF0pICkge1xuXHRcdFx0XHRcdGlmICggZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCB0eXBlIGluIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWxbIHR5cGUgXSApIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gVGhpcyBpcyBhIHNob3J0Y3V0IHRvIGF2b2lkIGpRdWVyeS5ldmVudC5yZW1vdmUncyBvdmVyaGVhZFxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5yZW1vdmVFdmVudCggZWxlbSwgdHlwZSwgZGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIGRhdGFfcHJpdi5jYWNoZVsga2V5IF0gKSB7XG5cdFx0XHRcdFx0XHQvLyBEaXNjYXJkIGFueSByZW1haW5pbmcgYHByaXZhdGVgIGRhdGFcblx0XHRcdFx0XHRcdGRlbGV0ZSBkYXRhX3ByaXYuY2FjaGVbIGtleSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Ly8gRGlzY2FyZCBhbnkgcmVtYWluaW5nIGB1c2VyYCBkYXRhXG5cdFx0XHRkZWxldGUgZGF0YV91c2VyLmNhY2hlWyBlbGVtWyBkYXRhX3VzZXIuZXhwYW5kbyBdIF07XG5cdFx0fVxuXHR9XG59KTtcblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHRleHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS50ZXh0KCB0aGlzICkgOlxuXHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRcdHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5kb21NYW5pcCggYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG5cdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHByZXBlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRiZWZvcmU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRvbU1hbmlwKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdHJlbW92ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCBrZWVwRGF0YSAvKiBJbnRlcm5hbCBVc2UgT25seSAqLyApIHtcblx0XHR2YXIgZWxlbSxcblx0XHRcdGVsZW1zID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgdGhpcyApIDogdGhpcyxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRpZiAoICFrZWVwRGF0YSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0gKSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0aWYgKCBrZWVwRGF0YSAmJiBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApICkge1xuXHRcdFx0XHRcdHNldEdsb2JhbEV2YWwoIGdldEFsbCggZWxlbSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IChlbGVtID0gdGhpc1tpXSkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXG5cdFx0XHRcdC8vIFJlbW92ZSBhbnkgcmVtYWluaW5nIG5vZGVzXG5cdFx0XHRcdGVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0ZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50cztcblx0XHRkZWVwRGF0YUFuZEV2ZW50cyA9IGRlZXBEYXRhQW5kRXZlbnRzID09IG51bGwgPyBkYXRhQW5kRXZlbnRzIDogZGVlcERhdGFBbmRFdmVudHM7XG5cblx0XHRyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmNsb25lKCB0aGlzLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApO1xuXHRcdH0pO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoKCBlICkge31cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHR0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApO1xuXHRcdFx0fVxuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBhcmcgPSBhcmd1bWVudHNbIDAgXTtcblxuXHRcdC8vIE1ha2UgdGhlIGNoYW5nZXMsIHJlcGxhY2luZyBlYWNoIGNvbnRleHQgZWxlbWVudCB3aXRoIHRoZSBuZXcgY29udGVudFxuXHRcdHRoaXMuZG9tTWFuaXAoIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRhcmcgPSB0aGlzLnBhcmVudE5vZGU7XG5cblx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggdGhpcyApICk7XG5cblx0XHRcdGlmICggYXJnICkge1xuXHRcdFx0XHRhcmcucmVwbGFjZUNoaWxkKCBlbGVtLCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBGb3JjZSByZW1vdmFsIGlmIHRoZXJlIHdhcyBubyBuZXcgY29udGVudCAoZS5nLiwgZnJvbSBlbXB0eSBhcmd1bWVudHMpXG5cdFx0cmV0dXJuIGFyZyAmJiAoYXJnLmxlbmd0aCB8fCBhcmcubm9kZVR5cGUpID8gdGhpcyA6IHRoaXMucmVtb3ZlKCk7XG5cdH0sXG5cblx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucmVtb3ZlKCBzZWxlY3RvciwgdHJ1ZSApO1xuXHR9LFxuXG5cdGRvbU1hbmlwOiBmdW5jdGlvbiggYXJncywgY2FsbGJhY2sgKSB7XG5cblx0XHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdFx0YXJncyA9IGNvbmNhdC5hcHBseSggW10sIGFyZ3MgKTtcblxuXHRcdHZhciBmcmFnbWVudCwgZmlyc3QsIHNjcmlwdHMsIGhhc1NjcmlwdHMsIG5vZGUsIGRvYyxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0c2V0ID0gdGhpcyxcblx0XHRcdGlOb0Nsb25lID0gbCAtIDEsXG5cdFx0XHR2YWx1ZSA9IGFyZ3NbIDAgXSxcblx0XHRcdGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRcdGlmICggaXNGdW5jdGlvbiB8fFxuXHRcdFx0XHQoIGwgPiAxICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHRcdCFzdXBwb3J0LmNoZWNrQ2xvbmUgJiYgcmNoZWNrZWQudGVzdCggdmFsdWUgKSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0XHRcdHZhciBzZWxmID0gc2V0LmVxKCBpbmRleCApO1xuXHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdFx0YXJnc1sgMCBdID0gdmFsdWUuY2FsbCggdGhpcywgaW5kZXgsIHNlbGYuaHRtbCgpICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0c2VsZi5kb21NYW5pcCggYXJncywgY2FsbGJhY2sgKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdGlmICggbCApIHtcblx0XHRcdGZyYWdtZW50ID0galF1ZXJ5LmJ1aWxkRnJhZ21lbnQoIGFyZ3MsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50LCBmYWxzZSwgdGhpcyApO1xuXHRcdFx0Zmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRpZiAoIGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICkge1xuXHRcdFx0XHRmcmFnbWVudCA9IGZpcnN0O1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGZpcnN0ICkge1xuXHRcdFx0XHRzY3JpcHRzID0galF1ZXJ5Lm1hcCggZ2V0QWxsKCBmcmFnbWVudCwgXCJzY3JpcHRcIiApLCBkaXNhYmxlU2NyaXB0ICk7XG5cdFx0XHRcdGhhc1NjcmlwdHMgPSBzY3JpcHRzLmxlbmd0aDtcblxuXHRcdFx0XHQvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtIGluc3RlYWQgb2YgdGhlIGZpcnN0IGJlY2F1c2UgaXQgY2FuIGVuZCB1cFxuXHRcdFx0XHQvLyBiZWluZyBlbXB0aWVkIGluY29ycmVjdGx5IGluIGNlcnRhaW4gc2l0dWF0aW9ucyAoIzgwNzApLlxuXHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IGZyYWdtZW50O1xuXG5cdFx0XHRcdFx0aWYgKCBpICE9PSBpTm9DbG9uZSApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblxuXHRcdFx0XHRcdFx0Ly8gS2VlcCByZWZlcmVuY2VzIHRvIGNsb25lZCBzY3JpcHRzIGZvciBsYXRlciByZXN0b3JhdGlvblxuXHRcdFx0XHRcdFx0aWYgKCBoYXNTY3JpcHRzICkge1xuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBRdFdlYktpdFxuXHRcdFx0XHRcdFx0XHQvLyBqUXVlcnkubWVyZ2UgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggc2NyaXB0cywgZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKCB0aGlzWyBpIF0sIG5vZGUsIGkgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblx0XHRcdFx0XHRkb2MgPSBzY3JpcHRzWyBzY3JpcHRzLmxlbmd0aCAtIDEgXS5vd25lckRvY3VtZW50O1xuXG5cdFx0XHRcdFx0Ly8gUmVlbmFibGUgc2NyaXB0c1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTtcblxuXHRcdFx0XHRcdC8vIEV2YWx1YXRlIGV4ZWN1dGFibGUgc2NyaXB0cyBvbiBmaXJzdCBkb2N1bWVudCBpbnNlcnRpb25cblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHtcblx0XHRcdFx0XHRcdG5vZGUgPSBzY3JpcHRzWyBpIF07XG5cdFx0XHRcdFx0XHRpZiAoIHJzY3JpcHRUeXBlLnRlc3QoIG5vZGUudHlwZSB8fCBcIlwiICkgJiZcblx0XHRcdFx0XHRcdFx0IWRhdGFfcHJpdi5hY2Nlc3MoIG5vZGUsIFwiZ2xvYmFsRXZhbFwiICkgJiYgalF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUuc3JjICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIE9wdGlvbmFsIEFKQVggZGVwZW5kZW5jeSwgYnV0IHdvbid0IHJ1biBzY3JpcHRzIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuX2V2YWxVcmwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoIHJjbGVhblNjcmlwdCwgXCJcIiApICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKHtcblx0YXBwZW5kVG86IFwiYXBwZW5kXCIsXG5cdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdGluc2VydEJlZm9yZTogXCJiZWZvcmVcIixcblx0aW5zZXJ0QWZ0ZXI6IFwiYWZ0ZXJcIixcblx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG59LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBlbGVtcyxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0aW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuXHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0ZWxlbXMgPSBpID09PSBsYXN0ID8gdGhpcyA6IHRoaXMuY2xvbmUoIHRydWUgKTtcblx0XHRcdGpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogUXRXZWJLaXRcblx0XHRcdC8vIC5nZXQoKSBiZWNhdXNlIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Ncblx0XHRcdHB1c2guYXBwbHkoIHJldCwgZWxlbXMuZ2V0KCkgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHJldCApO1xuXHR9O1xufSk7XG5cblxudmFyIGlmcmFtZSxcblx0ZWxlbWRpc3BsYXkgPSB7fTtcblxuLyoqXG4gKiBSZXRyaWV2ZSB0aGUgYWN0dWFsIGRpc3BsYXkgb2YgYSBlbGVtZW50XG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBub2RlTmFtZSBvZiB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3R9IGRvYyBEb2N1bWVudCBvYmplY3RcbiAqL1xuLy8gQ2FsbGVkIG9ubHkgZnJvbSB3aXRoaW4gZGVmYXVsdERpc3BsYXlcbmZ1bmN0aW9uIGFjdHVhbERpc3BsYXkoIG5hbWUsIGRvYyApIHtcblx0dmFyIHN0eWxlLFxuXHRcdGVsZW0gPSBqUXVlcnkoIGRvYy5jcmVhdGVFbGVtZW50KCBuYW1lICkgKS5hcHBlbmRUbyggZG9jLmJvZHkgKSxcblxuXHRcdC8vIGdldERlZmF1bHRDb21wdXRlZFN0eWxlIG1pZ2h0IGJlIHJlbGlhYmx5IHVzZWQgb25seSBvbiBhdHRhY2hlZCBlbGVtZW50XG5cdFx0ZGlzcGxheSA9IHdpbmRvdy5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSAmJiAoIHN0eWxlID0gd2luZG93LmdldERlZmF1bHRDb21wdXRlZFN0eWxlKCBlbGVtWyAwIF0gKSApID9cblxuXHRcdFx0Ly8gVXNlIG9mIHRoaXMgbWV0aG9kIGlzIGEgdGVtcG9yYXJ5IGZpeCAobW9yZSBsaWtlIG9wdGltaXphdGlvbikgdW50aWwgc29tZXRoaW5nIGJldHRlciBjb21lcyBhbG9uZyxcblx0XHRcdC8vIHNpbmNlIGl0IHdhcyByZW1vdmVkIGZyb20gc3BlY2lmaWNhdGlvbiBhbmQgc3VwcG9ydGVkIG9ubHkgaW4gRkZcblx0XHRcdHN0eWxlLmRpc3BsYXkgOiBqUXVlcnkuY3NzKCBlbGVtWyAwIF0sIFwiZGlzcGxheVwiICk7XG5cblx0Ly8gV2UgZG9uJ3QgaGF2ZSBhbnkgZGF0YSBzdG9yZWQgb24gdGhlIGVsZW1lbnQsXG5cdC8vIHNvIHVzZSBcImRldGFjaFwiIG1ldGhvZCBhcyBmYXN0IHdheSB0byBnZXQgcmlkIG9mIHRoZSBlbGVtZW50XG5cdGVsZW0uZGV0YWNoKCk7XG5cblx0cmV0dXJuIGRpc3BsYXk7XG59XG5cbi8qKlxuICogVHJ5IHRvIGRldGVybWluZSB0aGUgZGVmYXVsdCBkaXNwbGF5IHZhbHVlIG9mIGFuIGVsZW1lbnRcbiAqIEBwYXJhbSB7U3RyaW5nfSBub2RlTmFtZVxuICovXG5mdW5jdGlvbiBkZWZhdWx0RGlzcGxheSggbm9kZU5hbWUgKSB7XG5cdHZhciBkb2MgPSBkb2N1bWVudCxcblx0XHRkaXNwbGF5ID0gZWxlbWRpc3BsYXlbIG5vZGVOYW1lIF07XG5cblx0aWYgKCAhZGlzcGxheSApIHtcblx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXG5cdFx0Ly8gSWYgdGhlIHNpbXBsZSB3YXkgZmFpbHMsIHJlYWQgZnJvbSBpbnNpZGUgYW4gaWZyYW1lXG5cdFx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiB8fCAhZGlzcGxheSApIHtcblxuXHRcdFx0Ly8gVXNlIHRoZSBhbHJlYWR5LWNyZWF0ZWQgaWZyYW1lIGlmIHBvc3NpYmxlXG5cdFx0XHRpZnJhbWUgPSAoaWZyYW1lIHx8IGpRdWVyeSggXCI8aWZyYW1lIGZyYW1lYm9yZGVyPScwJyB3aWR0aD0nMCcgaGVpZ2h0PScwJy8+XCIgKSkuYXBwZW5kVG8oIGRvYy5kb2N1bWVudEVsZW1lbnQgKTtcblxuXHRcdFx0Ly8gQWx3YXlzIHdyaXRlIGEgbmV3IEhUTUwgc2tlbGV0b24gc28gV2Via2l0IGFuZCBGaXJlZm94IGRvbid0IGNob2tlIG9uIHJldXNlXG5cdFx0XHRkb2MgPSBpZnJhbWVbIDAgXS5jb250ZW50RG9jdW1lbnQ7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFXG5cdFx0XHRkb2Mud3JpdGUoKTtcblx0XHRcdGRvYy5jbG9zZSgpO1xuXG5cdFx0XHRkaXNwbGF5ID0gYWN0dWFsRGlzcGxheSggbm9kZU5hbWUsIGRvYyApO1xuXHRcdFx0aWZyYW1lLmRldGFjaCgpO1xuXHRcdH1cblxuXHRcdC8vIFN0b3JlIHRoZSBjb3JyZWN0IGRlZmF1bHQgZGlzcGxheVxuXHRcdGVsZW1kaXNwbGF5WyBub2RlTmFtZSBdID0gZGlzcGxheTtcblx0fVxuXG5cdHJldHVybiBkaXNwbGF5O1xufVxudmFyIHJtYXJnaW4gPSAoL15tYXJnaW4vKTtcblxudmFyIHJudW1ub25weCA9IG5ldyBSZWdFeHAoIFwiXihcIiArIHBudW0gKyBcIikoPyFweClbYS16JV0rJFwiLCBcImlcIiApO1xuXG52YXIgZ2V0U3R5bGVzID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0Ly8gU3VwcG9ydDogSUU8PTExKywgRmlyZWZveDw9MzArICgjMTUwOTgsICMxNDE1MClcblx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHQvLyBGRiBtZWFud2hpbGUgdGhyb3dzIG9uIGZyYW1lIGVsZW1lbnRzIHRocm91Z2ggXCJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlXCJcblx0XHRpZiAoIGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5vcGVuZXIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGVsZW0sIG51bGwgKTtcblx0fTtcblxuXG5cbmZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdHZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cblx0Ly8gU3VwcG9ydDogSUU5XG5cdC8vIGdldFByb3BlcnR5VmFsdWUgaXMgb25seSBuZWVkZWQgZm9yIC5jc3MoJ2ZpbHRlcicpICgjMTI1MzcpXG5cdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0cmV0ID0gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF07XG5cdH1cblxuXHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0aWYgKCByZXQgPT09IFwiXCIgJiYgIWpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICkgKSB7XG5cdFx0XHRyZXQgPSBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBpT1MgPCA2XG5cdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdC8vIGlPUyA8IDYgKGF0IGxlYXN0KSByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIGEgbGFyZ2VyIHNldCBvZiB2YWx1ZXMsIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHNcblx0XHQvLyB0aGlzIGlzIGFnYWluc3QgdGhlIENTU09NIGRyYWZ0IHNwZWM6IGh0dHA6Ly9kZXYudzMub3JnL2Nzc3dnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXNcblx0XHRpZiAoIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiBybWFyZ2luLnRlc3QoIG5hbWUgKSApIHtcblxuXHRcdFx0Ly8gUmVtZW1iZXIgdGhlIG9yaWdpbmFsIHZhbHVlc1xuXHRcdFx0d2lkdGggPSBzdHlsZS53aWR0aDtcblx0XHRcdG1pbldpZHRoID0gc3R5bGUubWluV2lkdGg7XG5cdFx0XHRtYXhXaWR0aCA9IHN0eWxlLm1heFdpZHRoO1xuXG5cdFx0XHQvLyBQdXQgaW4gdGhlIG5ldyB2YWx1ZXMgdG8gZ2V0IGEgY29tcHV0ZWQgdmFsdWUgb3V0XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IHN0eWxlLm1heFdpZHRoID0gc3R5bGUud2lkdGggPSByZXQ7XG5cdFx0XHRyZXQgPSBjb21wdXRlZC53aWR0aDtcblxuXHRcdFx0Ly8gUmV2ZXJ0IHRoZSBjaGFuZ2VkIHZhbHVlc1xuXHRcdFx0c3R5bGUud2lkdGggPSB3aWR0aDtcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gbWluV2lkdGg7XG5cdFx0XHRzdHlsZS5tYXhXaWR0aCA9IG1heFdpZHRoO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiByZXQgIT09IHVuZGVmaW5lZCA/XG5cdFx0Ly8gU3VwcG9ydDogSUVcblx0XHQvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLlxuXHRcdHJldCArIFwiXCIgOlxuXHRcdHJldDtcbn1cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG5cdC8vIERlZmluZSB0aGUgaG9vaywgd2UnbGwgY2hlY2sgb24gdGhlIGZpcnN0IHJ1biBpZiBpdCdzIHJlYWxseSBuZWVkZWQuXG5cdHJldHVybiB7XG5cdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggY29uZGl0aW9uRm4oKSApIHtcblx0XHRcdFx0Ly8gSG9vayBub3QgbmVlZGVkIChvciBpdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgaXQgZHVlXG5cdFx0XHRcdC8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC5cblx0XHRcdFx0ZGVsZXRlIHRoaXMuZ2V0O1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLlxuXHRcdFx0cmV0dXJuICh0aGlzLmdldCA9IGhvb2tGbikuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fTtcbn1cblxuXG4oZnVuY3Rpb24oKSB7XG5cdHZhciBwaXhlbFBvc2l0aW9uVmFsLCBib3hTaXppbmdSZWxpYWJsZVZhbCxcblx0XHRkb2NFbGVtID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuXHRcdGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cblx0aWYgKCAhZGl2LnN0eWxlICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0Ly8gU3R5bGUgb2YgY2xvbmVkIGVsZW1lbnQgYWZmZWN0cyBzb3VyY2UgZWxlbWVudCBjbG9uZWQgKCM4OTA4KVxuXHRkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdGRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiXCI7XG5cdHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cblx0Y29udGFpbmVyLnN0eWxlLmNzc1RleHQgPSBcImJvcmRlcjowO3dpZHRoOjA7aGVpZ2h0OjA7dG9wOjA7bGVmdDotOTk5OXB4O21hcmdpbi10b3A6MXB4O1wiICtcblx0XHRcInBvc2l0aW9uOmFic29sdXRlXCI7XG5cdGNvbnRhaW5lci5hcHBlbmRDaGlsZCggZGl2ICk7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVQaXhlbFBvc2l0aW9uQW5kQm94U2l6aW5nUmVsaWFibGUoKSB7XG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyOSwgQW5kcm9pZCAyLjNcblx0XHRcdC8vIFZlbmRvci1wcmVmaXggYm94LXNpemluZ1xuXHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Ym9yZGVyLWJveDstbW96LWJveC1zaXppbmc6Ym9yZGVyLWJveDtcIiArXG5cdFx0XHRcImJveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO1wiICtcblx0XHRcdFwiYm9yZGVyOjFweDtwYWRkaW5nOjFweDt3aWR0aDo0cHg7cG9zaXRpb246YWJzb2x1dGVcIjtcblx0XHRkaXYuaW5uZXJIVE1MID0gXCJcIjtcblx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdHZhciBkaXZTdHlsZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKCBkaXYsIG51bGwgKTtcblx0XHRwaXhlbFBvc2l0aW9uVmFsID0gZGl2U3R5bGUudG9wICE9PSBcIjElXCI7XG5cdFx0Ym94U2l6aW5nUmVsaWFibGVWYWwgPSBkaXZTdHlsZS53aWR0aCA9PT0gXCI0cHhcIjtcblxuXHRcdGRvY0VsZW0ucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogbm9kZS5qcyBqc2RvbVxuXHQvLyBEb24ndCBhc3N1bWUgdGhhdCBnZXRDb21wdXRlZFN0eWxlIGlzIGEgcHJvcGVydHkgb2YgdGhlIGdsb2JhbCBvYmplY3Rcblx0aWYgKCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCBzdXBwb3J0LCB7XG5cdFx0XHRwaXhlbFBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBUaGlzIHRlc3QgaXMgZXhlY3V0ZWQgb25seSBvbmNlIGJ1dCB3ZSBzdGlsbCBkbyBtZW1vaXppbmdcblx0XHRcdFx0Ly8gc2luY2Ugd2UgY2FuIHVzZSB0aGUgYm94U2l6aW5nUmVsaWFibGUgcHJlLWNvbXB1dGluZy5cblx0XHRcdFx0Ly8gTm8gbmVlZCB0byBjaGVjayBpZiB0aGUgdGVzdCB3YXMgYWxyZWFkeSBwZXJmb3JtZWQsIHRob3VnaC5cblx0XHRcdFx0Y29tcHV0ZVBpeGVsUG9zaXRpb25BbmRCb3hTaXppbmdSZWxpYWJsZSgpO1xuXHRcdFx0XHRyZXR1cm4gcGl4ZWxQb3NpdGlvblZhbDtcblx0XHRcdH0sXG5cdFx0XHRib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggYm94U2l6aW5nUmVsaWFibGVWYWwgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRjb21wdXRlUGl4ZWxQb3NpdGlvbkFuZEJveFNpemluZ1JlbGlhYmxlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO1xuXHRcdFx0fSxcblx0XHRcdHJlbGlhYmxlTWFyZ2luUmlnaHQ6IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5cdFx0XHRcdC8vIENoZWNrIGlmIGRpdiB3aXRoIGV4cGxpY2l0IHdpZHRoIGFuZCBubyBtYXJnaW4tcmlnaHQgaW5jb3JyZWN0bHlcblx0XHRcdFx0Ly8gZ2V0cyBjb21wdXRlZCBtYXJnaW4tcmlnaHQgYmFzZWQgb24gd2lkdGggb2YgY29udGFpbmVyLiAoIzMzMzMpXG5cdFx0XHRcdC8vIFdlYktpdCBCdWcgMTMzNDMgLSBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgd3JvbmcgdmFsdWUgZm9yIG1hcmdpbi1yaWdodFxuXHRcdFx0XHQvLyBUaGlzIHN1cHBvcnQgZnVuY3Rpb24gaXMgb25seSBleGVjdXRlZCBvbmNlIHNvIG5vIG1lbW9pemluZyBpcyBuZWVkZWQuXG5cdFx0XHRcdHZhciByZXQsXG5cdFx0XHRcdFx0bWFyZ2luRGl2ID0gZGl2LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKTtcblxuXHRcdFx0XHQvLyBSZXNldCBDU1M6IGJveC1zaXppbmc7IGRpc3BsYXk7IG1hcmdpbjsgYm9yZGVyOyBwYWRkaW5nXG5cdFx0XHRcdG1hcmdpbkRpdi5zdHlsZS5jc3NUZXh0ID0gZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjksIEFuZHJvaWQgMi4zXG5cdFx0XHRcdFx0Ly8gVmVuZG9yLXByZWZpeCBib3gtc2l6aW5nXG5cdFx0XHRcdFx0XCItd2Via2l0LWJveC1zaXppbmc6Y29udGVudC1ib3g7LW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94O1wiICtcblx0XHRcdFx0XHRcImJveC1zaXppbmc6Y29udGVudC1ib3g7ZGlzcGxheTpibG9jazttYXJnaW46MDtib3JkZXI6MDtwYWRkaW5nOjBcIjtcblx0XHRcdFx0bWFyZ2luRGl2LnN0eWxlLm1hcmdpblJpZ2h0ID0gbWFyZ2luRGl2LnN0eWxlLndpZHRoID0gXCIwXCI7XG5cdFx0XHRcdGRpdi5zdHlsZS53aWR0aCA9IFwiMXB4XCI7XG5cdFx0XHRcdGRvY0VsZW0uYXBwZW5kQ2hpbGQoIGNvbnRhaW5lciApO1xuXG5cdFx0XHRcdHJldCA9ICFwYXJzZUZsb2F0KCB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggbWFyZ2luRGl2LCBudWxsICkubWFyZ2luUmlnaHQgKTtcblxuXHRcdFx0XHRkb2NFbGVtLnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblx0XHRcdFx0ZGl2LnJlbW92ZUNoaWxkKCBtYXJnaW5EaXYgKTtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KSgpO1xuXG5cbi8vIEEgbWV0aG9kIGZvciBxdWlja2x5IHN3YXBwaW5nIGluL291dCBDU1MgcHJvcGVydGllcyB0byBnZXQgY29ycmVjdCBjYWxjdWxhdGlvbnMuXG5qUXVlcnkuc3dhcCA9IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncyApIHtcblx0dmFyIHJldCwgbmFtZSxcblx0XHRvbGQgPSB7fTtcblxuXHQvLyBSZW1lbWJlciB0aGUgb2xkIHZhbHVlcywgYW5kIGluc2VydCB0aGUgbmV3IG9uZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdG9sZFsgbmFtZSBdID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTtcblx0fVxuXG5cdHJldCA9IGNhbGxiYWNrLmFwcGx5KCBlbGVtLCBhcmdzIHx8IFtdICk7XG5cblx0Ly8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTtcblx0fVxuXG5cdHJldHVybiByZXQ7XG59O1xuXG5cbnZhclxuXHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHQvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXlcblx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXHRybnVtc3BsaXQgPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKC4qKSRcIiwgXCJpXCIgKSxcblx0cnJlbE51bSA9IG5ldyBSZWdFeHAoIFwiXihbKy1dKT0oXCIgKyBwbnVtICsgXCIpXCIsIFwiaVwiICksXG5cblx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRsZXR0ZXJTcGFjaW5nOiBcIjBcIixcblx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdH0sXG5cblx0Y3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiT1wiLCBcIk1velwiLCBcIm1zXCIgXTtcblxuLy8gUmV0dXJuIGEgY3NzIHByb3BlcnR5IG1hcHBlZCB0byBhIHBvdGVudGlhbGx5IHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuZnVuY3Rpb24gdmVuZG9yUHJvcE5hbWUoIHN0eWxlLCBuYW1lICkge1xuXG5cdC8vIFNob3J0Y3V0IGZvciBuYW1lcyB0aGF0IGFyZSBub3QgdmVuZG9yIHByZWZpeGVkXG5cdGlmICggbmFtZSBpbiBzdHlsZSApIHtcblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXG5cdC8vIENoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXNcblx0dmFyIGNhcE5hbWUgPSBuYW1lWzBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpLFxuXHRcdG9yaWdOYW1lID0gbmFtZSxcblx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRpZiAoIG5hbWUgaW4gc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm4gbmFtZTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gb3JpZ05hbWU7XG59XG5cbmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cdHZhciBtYXRjaGVzID0gcm51bXNwbGl0LmV4ZWMoIHZhbHVlICk7XG5cdHJldHVybiBtYXRjaGVzID9cblx0XHQvLyBHdWFyZCBhZ2FpbnN0IHVuZGVmaW5lZCBcInN1YnRyYWN0XCIsIGUuZy4sIHdoZW4gdXNlZCBhcyBpbiBjc3NIb29rc1xuXHRcdE1hdGgubWF4KCAwLCBtYXRjaGVzWyAxIF0gLSAoIHN1YnRyYWN0IHx8IDAgKSApICsgKCBtYXRjaGVzWyAyIF0gfHwgXCJweFwiICkgOlxuXHRcdHZhbHVlO1xufVxuXG5mdW5jdGlvbiBhdWdtZW50V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEsIGlzQm9yZGVyQm94LCBzdHlsZXMgKSB7XG5cdHZhciBpID0gZXh0cmEgPT09ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSA/XG5cdFx0Ly8gSWYgd2UgYWxyZWFkeSBoYXZlIHRoZSByaWdodCBtZWFzdXJlbWVudCwgYXZvaWQgYXVnbWVudGF0aW9uXG5cdFx0NCA6XG5cdFx0Ly8gT3RoZXJ3aXNlIGluaXRpYWxpemUgZm9yIGhvcml6b250YWwgb3IgdmVydGljYWwgcHJvcGVydGllc1xuXHRcdG5hbWUgPT09IFwid2lkdGhcIiA/IDEgOiAwLFxuXG5cdFx0dmFsID0gMDtcblxuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG5cdFx0Ly8gQm90aCBib3ggbW9kZWxzIGV4Y2x1ZGUgbWFyZ2luLCBzbyBhZGQgaXQgaWYgd2Ugd2FudCBpdFxuXHRcdGlmICggZXh0cmEgPT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHR2YWwgKz0galF1ZXJ5LmNzcyggZWxlbSwgZXh0cmEgKyBjc3NFeHBhbmRbIGkgXSwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0JvcmRlckJveCApIHtcblx0XHRcdC8vIGJvcmRlci1ib3ggaW5jbHVkZXMgcGFkZGluZywgc28gcmVtb3ZlIGl0IGlmIHdlIHdhbnQgY29udGVudFxuXHRcdFx0aWYgKCBleHRyYSA9PT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQXQgdGhpcyBwb2ludCwgZXh0cmEgaXNuJ3QgYm9yZGVyIG5vciBtYXJnaW4sIHNvIHJlbW92ZSBib3JkZXJcblx0XHRcdGlmICggZXh0cmEgIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdHZhbCAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50LCBzbyBhZGQgcGFkZGluZ1xuXHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBBdCB0aGlzIHBvaW50LCBleHRyYSBpc24ndCBjb250ZW50IG5vciBwYWRkaW5nLCBzbyBhZGQgYm9yZGVyXG5cdFx0XHRpZiAoIGV4dHJhICE9PSBcInBhZGRpbmdcIiApIHtcblx0XHRcdFx0dmFsICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHZhbDtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKSB7XG5cblx0Ly8gU3RhcnQgd2l0aCBvZmZzZXQgcHJvcGVydHksIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGJvcmRlci1ib3ggdmFsdWVcblx0dmFyIHZhbHVlSXNCb3JkZXJCb3ggPSB0cnVlLFxuXHRcdHZhbCA9IG5hbWUgPT09IFwid2lkdGhcIiA/IGVsZW0ub2Zmc2V0V2lkdGggOiBlbGVtLm9mZnNldEhlaWdodCxcblx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblx0XHRpc0JvcmRlckJveCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cblx0Ly8gU29tZSBub24taHRtbCBlbGVtZW50cyByZXR1cm4gdW5kZWZpbmVkIGZvciBvZmZzZXRXaWR0aCwgc28gY2hlY2sgZm9yIG51bGwvdW5kZWZpbmVkXG5cdC8vIHN2ZyAtIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY0OTI4NVxuXHQvLyBNYXRoTUwgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD00OTE2Njhcblx0aWYgKCB2YWwgPD0gMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHQvLyBGYWxsIGJhY2sgdG8gY29tcHV0ZWQgdGhlbiB1bmNvbXB1dGVkIGNzcyBpZiBuZWNlc3Nhcnlcblx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdGlmICggdmFsIDwgMCB8fCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdHZhbCA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBDb21wdXRlZCB1bml0IGlzIG5vdCBwaXhlbHMuIFN0b3AgaGVyZSBhbmQgcmV0dXJuLlxuXHRcdGlmICggcm51bW5vbnB4LnRlc3QodmFsKSApIHtcblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fVxuXG5cdFx0Ly8gQ2hlY2sgZm9yIHN0eWxlIGluIGNhc2UgYSBicm93c2VyIHdoaWNoIHJldHVybnMgdW5yZWxpYWJsZSB2YWx1ZXNcblx0XHQvLyBmb3IgZ2V0Q29tcHV0ZWRTdHlsZSBzaWxlbnRseSBmYWxscyBiYWNrIHRvIHRoZSByZWxpYWJsZSBlbGVtLnN0eWxlXG5cdFx0dmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94ICYmXG5cdFx0XHQoIHN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSB8fCB2YWwgPT09IGVsZW0uc3R5bGVbIG5hbWUgXSApO1xuXG5cdFx0Ly8gTm9ybWFsaXplIFwiXCIsIGF1dG8sIGFuZCBwcmVwYXJlIGZvciBleHRyYVxuXHRcdHZhbCA9IHBhcnNlRmxvYXQoIHZhbCApIHx8IDA7XG5cdH1cblxuXHQvLyBVc2UgdGhlIGFjdGl2ZSBib3gtc2l6aW5nIG1vZGVsIHRvIGFkZC9zdWJ0cmFjdCBpcnJlbGV2YW50IHN0eWxlc1xuXHRyZXR1cm4gKCB2YWwgK1xuXHRcdGF1Z21lbnRXaWR0aE9ySGVpZ2h0KFxuXHRcdFx0ZWxlbSxcblx0XHRcdG5hbWUsXG5cdFx0XHRleHRyYSB8fCAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICksXG5cdFx0XHR2YWx1ZUlzQm9yZGVyQm94LFxuXHRcdFx0c3R5bGVzXG5cdFx0KVxuXHQpICsgXCJweFwiO1xufVxuXG5mdW5jdGlvbiBzaG93SGlkZSggZWxlbWVudHMsIHNob3cgKSB7XG5cdHZhciBkaXNwbGF5LCBlbGVtLCBoaWRkZW4sXG5cdFx0dmFsdWVzID0gW10sXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcblx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0dmFsdWVzWyBpbmRleCBdID0gZGF0YV9wcml2LmdldCggZWxlbSwgXCJvbGRkaXNwbGF5XCIgKTtcblx0XHRkaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5O1xuXHRcdGlmICggc2hvdyApIHtcblx0XHRcdC8vIFJlc2V0IHRoZSBpbmxpbmUgZGlzcGxheSBvZiB0aGlzIGVsZW1lbnQgdG8gbGVhcm4gaWYgaXQgaXNcblx0XHRcdC8vIGJlaW5nIGhpZGRlbiBieSBjYXNjYWRlZCBydWxlcyBvciBub3Rcblx0XHRcdGlmICggIXZhbHVlc1sgaW5kZXggXSAmJiBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGVsZW1lbnRzIHdoaWNoIGhhdmUgYmVlbiBvdmVycmlkZGVuIHdpdGggZGlzcGxheTogbm9uZVxuXHRcdFx0Ly8gaW4gYSBzdHlsZXNoZWV0IHRvIHdoYXRldmVyIHRoZSBkZWZhdWx0IGJyb3dzZXIgc3R5bGUgaXNcblx0XHRcdC8vIGZvciBzdWNoIGFuIGVsZW1lbnRcblx0XHRcdGlmICggZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmIGlzSGlkZGVuKCBlbGVtICkgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBkZWZhdWx0RGlzcGxheShlbGVtLm5vZGVOYW1lKSApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRoaWRkZW4gPSBpc0hpZGRlbiggZWxlbSApO1xuXG5cdFx0XHRpZiAoIGRpc3BsYXkgIT09IFwibm9uZVwiIHx8ICFoaWRkZW4gKSB7XG5cdFx0XHRcdGRhdGFfcHJpdi5zZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiLCBoaWRkZW4gPyBkaXNwbGF5IDogalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFNldCB0aGUgZGlzcGxheSBvZiBtb3N0IG9mIHRoZSBlbGVtZW50cyBpbiBhIHNlY29uZCBsb29wXG5cdC8vIHRvIGF2b2lkIHRoZSBjb25zdGFudCByZWZsb3dcblx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0aWYgKCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRpZiAoICFzaG93IHx8IGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJub25lXCIgfHwgZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gc2hvdyA/IHZhbHVlc1sgaW5kZXggXSB8fCBcIlwiIDogXCJub25lXCI7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRzO1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHQvLyBBZGQgaW4gc3R5bGUgcHJvcGVydHkgaG9va3MgZm9yIG92ZXJyaWRpbmcgdGhlIGRlZmF1bHRcblx0Ly8gYmVoYXZpb3Igb2YgZ2V0dGluZyBhbmQgc2V0dGluZyBhIHN0eWxlIHByb3BlcnR5XG5cdGNzc0hvb2tzOiB7XG5cdFx0b3BhY2l0eToge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cblx0XHRcdFx0XHQvLyBXZSBzaG91bGQgYWx3YXlzIGdldCBhIG51bWJlciBiYWNrIGZyb20gb3BhY2l0eVxuXHRcdFx0XHRcdHZhciByZXQgPSBjdXJDU1MoIGVsZW0sIFwib3BhY2l0eVwiICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJldCA9PT0gXCJcIiA/IFwiMVwiIDogcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdC8vIERvbid0IGF1dG9tYXRpY2FsbHkgYWRkIFwicHhcIiB0byB0aGVzZSBwb3NzaWJseS11bml0bGVzcyBwcm9wZXJ0aWVzXG5cdGNzc051bWJlcjoge1xuXHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJmbGV4R3Jvd1wiOiB0cnVlLFxuXHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFwibGluZUhlaWdodFwiOiB0cnVlLFxuXHRcdFwib3BhY2l0eVwiOiB0cnVlLFxuXHRcdFwib3JkZXJcIjogdHJ1ZSxcblx0XHRcIm9ycGhhbnNcIjogdHJ1ZSxcblx0XHRcIndpZG93c1wiOiB0cnVlLFxuXHRcdFwiekluZGV4XCI6IHRydWUsXG5cdFx0XCJ6b29tXCI6IHRydWVcblx0fSxcblxuXHQvLyBBZGQgaW4gcHJvcGVydGllcyB3aG9zZSBuYW1lcyB5b3Ugd2lzaCB0byBmaXggYmVmb3JlXG5cdC8vIHNldHRpbmcgb3IgZ2V0dGluZyB0aGUgdmFsdWVcblx0Y3NzUHJvcHM6IHtcblx0XHRcImZsb2F0XCI6IFwiY3NzRmxvYXRcIlxuXHR9LFxuXG5cdC8vIEdldCBhbmQgc2V0IHRoZSBzdHlsZSBwcm9wZXJ0eSBvbiBhIERPTSBOb2RlXG5cdHN0eWxlOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUsIGV4dHJhICkge1xuXG5cdFx0Ly8gRG9uJ3Qgc2V0IHN0eWxlcyBvbiB0ZXh0IGFuZCBjb21tZW50IG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBlbGVtLm5vZGVUeXBlID09PSAzIHx8IGVsZW0ubm9kZVR5cGUgPT09IDggfHwgIWVsZW0uc3R5bGUgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBzdXJlIHRoYXQgd2UncmUgd29ya2luZyB3aXRoIHRoZSByaWdodCBuYW1lXG5cdFx0dmFyIHJldCwgdHlwZSwgaG9va3MsXG5cdFx0XHRvcmlnTmFtZSA9IGpRdWVyeS5jYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRcdG5hbWUgPSBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gfHwgKCBqUXVlcnkuY3NzUHJvcHNbIG9yaWdOYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuXHRcdC8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG5cdFx0XHQvLyBDb252ZXJ0IFwiKz1cIiBvciBcIi09XCIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgJiYgKHJldCA9IHJyZWxOdW0uZXhlYyggdmFsdWUgKSkgKSB7XG5cdFx0XHRcdHZhbHVlID0gKCByZXRbMV0gKyAxICkgKiByZXRbMl0gKyBwYXJzZUZsb2F0KCBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICkgKTtcblx0XHRcdFx0Ly8gRml4ZXMgYnVnICM5MjM3XG5cdFx0XHRcdHR5cGUgPSBcIm51bWJlclwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCBudWxsIGFuZCBOYU4gdmFsdWVzIGFyZW4ndCBzZXQgKCM3MTE2KVxuXHRcdFx0aWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIG51bWJlciwgYWRkICdweCcgdG8gdGhlIChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwibnVtYmVyXCIgJiYgIWpRdWVyeS5jc3NOdW1iZXJbIG9yaWdOYW1lIF0gKSB7XG5cdFx0XHRcdHZhbHVlICs9IFwicHhcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHRcdFx0Ly8gYmFja2dyb3VuZC0qIHByb3BzIGFmZmVjdCBvcmlnaW5hbCBjbG9uZSdzIHZhbHVlc1xuXHRcdFx0aWYgKCAhc3VwcG9ydC5jbGVhckNsb25lU3R5bGUgJiYgdmFsdWUgPT09IFwiXCIgJiYgbmFtZS5pbmRleE9mKCBcImJhY2tncm91bmRcIiApID09PSAwICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gXCJpbmhlcml0XCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQsIHVzZSB0aGF0IHZhbHVlLCBvdGhlcndpc2UganVzdCBzZXQgdGhlIHNwZWNpZmllZCB2YWx1ZVxuXHRcdFx0aWYgKCAhaG9va3MgfHwgIShcInNldFwiIGluIGhvb2tzKSB8fCAodmFsdWUgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBleHRyYSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRzdHlsZVsgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgZmFsc2UsIGV4dHJhICkpICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE90aGVyd2lzZSBqdXN0IGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgc3R5bGUgb2JqZWN0XG5cdFx0XHRyZXR1cm4gc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0Y3NzOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZXh0cmEsIHN0eWxlcyApIHtcblx0XHR2YXIgdmFsLCBudW0sIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBuYW1lICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWVcblx0XHRuYW1lID0galF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdIHx8ICggalF1ZXJ5LmNzc1Byb3BzWyBvcmlnTmFtZSBdID0gdmVuZG9yUHJvcE5hbWUoIGVsZW0uc3R5bGUsIG9yaWdOYW1lICkgKTtcblxuXHRcdC8vIFRyeSBwcmVmaXhlZCBuYW1lIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIG5hbWVcblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSwgaWYgYSB3YXkgdG8gZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBleGlzdHMsIHVzZSB0aGF0XG5cdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBcIm5vcm1hbFwiIHRvIGNvbXB1dGVkIHZhbHVlXG5cdFx0aWYgKCB2YWwgPT09IFwibm9ybWFsXCIgJiYgbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0gKSB7XG5cdFx0XHR2YWwgPSBjc3NOb3JtYWxUcmFuc2Zvcm1bIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIG51bWVyaWMgaWYgZm9yY2VkIG9yIGEgcXVhbGlmaWVyIHdhcyBwcm92aWRlZCBhbmQgdmFsIGxvb2tzIG51bWVyaWNcblx0XHRpZiAoIGV4dHJhID09PSBcIlwiIHx8IGV4dHJhICkge1xuXHRcdFx0bnVtID0gcGFyc2VGbG9hdCggdmFsICk7XG5cdFx0XHRyZXR1cm4gZXh0cmEgPT09IHRydWUgfHwgalF1ZXJ5LmlzTnVtZXJpYyggbnVtICkgPyBudW0gfHwgMCA6IHZhbDtcblx0XHR9XG5cdFx0cmV0dXJuIHZhbDtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0XHRcdC8vIENlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbVxuXHRcdFx0XHQvLyBidXQgaXQgbXVzdCBoYXZlIGEgY3VycmVudCBkaXNwbGF5IHN0eWxlIHRoYXQgd291bGQgYmVuZWZpdFxuXHRcdFx0XHRyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKSAmJiBlbGVtLm9mZnNldFdpZHRoID09PSAwID9cblx0XHRcdFx0XHRqUXVlcnkuc3dhcCggZWxlbSwgY3NzU2hvdywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0Z2V0V2lkdGhPckhlaWdodCggZWxlbSwgbmFtZSwgZXh0cmEgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIGV4dHJhICkge1xuXHRcdFx0dmFyIHN0eWxlcyA9IGV4dHJhICYmIGdldFN0eWxlcyggZWxlbSApO1xuXHRcdFx0cmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgZXh0cmEgP1xuXHRcdFx0XHRhdWdtZW50V2lkdGhPckhlaWdodChcblx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdG5hbWUsXG5cdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHRcdFx0XHRzdHlsZXNcblx0XHRcdFx0KSA6IDBcblx0XHRcdCk7XG5cdFx0fVxuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IEFuZHJvaWQgMi4zXG5qUXVlcnkuY3NzSG9va3MubWFyZ2luUmlnaHQgPSBhZGRHZXRIb29rSWYoIHN1cHBvcnQucmVsaWFibGVNYXJnaW5SaWdodCxcblx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnN3YXAoIGVsZW0sIHsgXCJkaXNwbGF5XCI6IFwiaW5saW5lLWJsb2NrXCIgfSxcblx0XHRcdFx0Y3VyQ1NTLCBbIGVsZW0sIFwibWFyZ2luUmlnaHRcIiBdICk7XG5cdFx0fVxuXHR9XG4pO1xuXG4vLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzXG5qUXVlcnkuZWFjaCh7XG5cdG1hcmdpbjogXCJcIixcblx0cGFkZGluZzogXCJcIixcblx0Ym9yZGVyOiBcIldpZHRoXCJcbn0sIGZ1bmN0aW9uKCBwcmVmaXgsIHN1ZmZpeCApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXSA9IHtcblx0XHRleHBhbmQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBpID0gMCxcblx0XHRcdFx0ZXhwYW5kZWQgPSB7fSxcblxuXHRcdFx0XHQvLyBBc3N1bWVzIGEgc2luZ2xlIG51bWJlciBpZiBub3QgYSBzdHJpbmdcblx0XHRcdFx0cGFydHMgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS5zcGxpdChcIiBcIikgOiBbIHZhbHVlIF07XG5cblx0XHRcdGZvciAoIDsgaSA8IDQ7IGkrKyApIHtcblx0XHRcdFx0ZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPVxuXHRcdFx0XHRcdHBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV4cGFuZGVkO1xuXHRcdH1cblx0fTtcblxuXHRpZiAoICFybWFyZ2luLnRlc3QoIHByZWZpeCApICkge1xuXHRcdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0uc2V0ID0gc2V0UG9zaXRpdmVOdW1iZXI7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHN0eWxlcywgbGVuLFxuXHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7XG5cdFx0XHRcdGxlbiA9IG5hbWUubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdG1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBtYXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApO1xuXHRcdH0sIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXHRzaG93OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTtcblx0fSxcblx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzICk7XG5cdH0sXG5cdHRvZ2dsZTogZnVuY3Rpb24oIHN0YXRlICkge1xuXHRcdGlmICggdHlwZW9mIHN0YXRlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdGlmICggaXNIaWRkZW4oIHRoaXMgKSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KTtcblxuXG5mdW5jdGlvbiBUd2VlbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKSB7XG5cdHJldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICk7XG59XG5qUXVlcnkuVHdlZW4gPSBUd2VlbjtcblxuVHdlZW4ucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogVHdlZW4sXG5cdGluaXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZywgdW5pdCApIHtcblx0XHR0aGlzLmVsZW0gPSBlbGVtO1xuXHRcdHRoaXMucHJvcCA9IHByb3A7XG5cdFx0dGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgXCJzd2luZ1wiO1xuXHRcdHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG5cdFx0dGhpcy5zdGFydCA9IHRoaXMubm93ID0gdGhpcy5jdXIoKTtcblx0XHR0aGlzLmVuZCA9IGVuZDtcblx0XHR0aGlzLnVuaXQgPSB1bml0IHx8ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdID8gXCJcIiA6IFwicHhcIiApO1xuXHR9LFxuXHRjdXI6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRyZXR1cm4gaG9va3MgJiYgaG9va3MuZ2V0ID9cblx0XHRcdGhvb2tzLmdldCggdGhpcyApIDpcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5nZXQoIHRoaXMgKTtcblx0fSxcblx0cnVuOiBmdW5jdGlvbiggcGVyY2VudCApIHtcblx0XHR2YXIgZWFzZWQsXG5cdFx0XHRob29rcyA9IFR3ZWVuLnByb3BIb29rc1sgdGhpcy5wcm9wIF07XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5kdXJhdGlvbiApIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBqUXVlcnkuZWFzaW5nWyB0aGlzLmVhc2luZyBdKFxuXHRcdFx0XHRwZXJjZW50LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKiBwZXJjZW50LCAwLCAxLCB0aGlzLm9wdGlvbnMuZHVyYXRpb25cblx0XHRcdCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucG9zID0gZWFzZWQgPSBwZXJjZW50O1xuXHRcdH1cblx0XHR0aGlzLm5vdyA9ICggdGhpcy5lbmQgLSB0aGlzLnN0YXJ0ICkgKiBlYXNlZCArIHRoaXMuc3RhcnQ7XG5cblx0XHRpZiAoIHRoaXMub3B0aW9ucy5zdGVwICkge1xuXHRcdFx0dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCggdGhpcy5lbGVtLCB0aGlzLm5vdywgdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggaG9va3MgJiYgaG9va3Muc2V0ICkge1xuXHRcdFx0aG9va3Muc2V0KCB0aGlzICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdFR3ZWVuLnByb3BIb29rcy5fZGVmYXVsdC5zZXQoIHRoaXMgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn07XG5cblR3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZSA9IFR3ZWVuLnByb3RvdHlwZTtcblxuVHdlZW4ucHJvcEhvb2tzID0ge1xuXHRfZGVmYXVsdDoge1xuXHRcdGdldDogZnVuY3Rpb24oIHR3ZWVuICkge1xuXHRcdFx0dmFyIHJlc3VsdDtcblxuXHRcdFx0aWYgKCB0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gIT0gbnVsbCAmJlxuXHRcdFx0XHQoIXR3ZWVuLmVsZW0uc3R5bGUgfHwgdHdlZW4uZWxlbS5zdHlsZVsgdHdlZW4ucHJvcCBdID09IG51bGwpICkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHlcblx0XHRcdC8vIGF0dGVtcHQgYSBwYXJzZUZsb2F0IGFuZCBmYWxsYmFjayB0byBhIHN0cmluZyBpZiB0aGUgcGFyc2UgZmFpbHMuXG5cdFx0XHQvLyBTaW1wbGUgdmFsdWVzIHN1Y2ggYXMgXCIxMHB4XCIgYXJlIHBhcnNlZCB0byBGbG9hdDtcblx0XHRcdC8vIGNvbXBsZXggdmFsdWVzIHN1Y2ggYXMgXCJyb3RhdGUoMXJhZClcIiBhcmUgcmV0dXJuZWQgYXMtaXMuXG5cdFx0XHRyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCBcIlwiICk7XG5cdFx0XHQvLyBFbXB0eSBzdHJpbmdzLCBudWxsLCB1bmRlZmluZWQgYW5kIFwiYXV0b1wiIGFyZSBjb252ZXJ0ZWQgdG8gMC5cblx0XHRcdHJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gXCJhdXRvXCIgPyAwIDogcmVzdWx0O1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0XHQvLyBVc2Ugc3RlcCBob29rIGZvciBiYWNrIGNvbXBhdC5cblx0XHRcdC8vIFVzZSBjc3NIb29rIGlmIGl0cyB0aGVyZS5cblx0XHRcdC8vIFVzZSAuc3R5bGUgaWYgYXZhaWxhYmxlIGFuZCB1c2UgcGxhaW4gcHJvcGVydGllcyB3aGVyZSBhdmFpbGFibGUuXG5cdFx0XHRpZiAoIGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS5meC5zdGVwWyB0d2Vlbi5wcm9wIF0oIHR3ZWVuICk7XG5cdFx0XHR9IGVsc2UgaWYgKCB0d2Vlbi5lbGVtLnN0eWxlICYmICggdHdlZW4uZWxlbS5zdHlsZVsgalF1ZXJ5LmNzc1Byb3BzWyB0d2Vlbi5wcm9wIF0gXSAhPSBudWxsIHx8IGpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLy8gU3VwcG9ydDogSUU5XG4vLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHtcblx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5lYXNpbmcgPSB7XG5cdGxpbmVhcjogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHA7XG5cdH0sXG5cdHN3aW5nOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyO1xuXHR9XG59O1xuXG5qUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcblxuLy8gQmFjayBDb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnRcbmpRdWVyeS5meC5zdGVwID0ge307XG5cblxuXG5cbnZhclxuXHRmeE5vdywgdGltZXJJZCxcblx0cmZ4dHlwZXMgPSAvXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sXG5cdHJmeG51bSA9IG5ldyBSZWdFeHAoIFwiXig/OihbKy1dKT18KShcIiArIHBudW0gKyBcIikoW2EteiVdKikkXCIsIFwiaVwiICksXG5cdHJydW4gPSAvcXVldWVIb29rcyQvLFxuXHRhbmltYXRpb25QcmVmaWx0ZXJzID0gWyBkZWZhdWx0UHJlZmlsdGVyIF0sXG5cdHR3ZWVuZXJzID0ge1xuXHRcdFwiKlwiOiBbIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcblx0XHRcdHZhciB0d2VlbiA9IHRoaXMuY3JlYXRlVHdlZW4oIHByb3AsIHZhbHVlICksXG5cdFx0XHRcdHRhcmdldCA9IHR3ZWVuLmN1cigpLFxuXHRcdFx0XHRwYXJ0cyA9IHJmeG51bS5leGVjKCB2YWx1ZSApLFxuXHRcdFx0XHR1bml0ID0gcGFydHMgJiYgcGFydHNbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKSxcblxuXHRcdFx0XHQvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlc1xuXHRcdFx0XHRzdGFydCA9ICggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdIHx8IHVuaXQgIT09IFwicHhcIiAmJiArdGFyZ2V0ICkgJiZcblx0XHRcdFx0XHRyZnhudW0uZXhlYyggalF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgcHJvcCApICksXG5cdFx0XHRcdHNjYWxlID0gMSxcblx0XHRcdFx0bWF4SXRlcmF0aW9ucyA9IDIwO1xuXG5cdFx0XHRpZiAoIHN0YXJ0ICYmIHN0YXJ0WyAzIF0gIT09IHVuaXQgKSB7XG5cdFx0XHRcdC8vIFRydXN0IHVuaXRzIHJlcG9ydGVkIGJ5IGpRdWVyeS5jc3Ncblx0XHRcdFx0dW5pdCA9IHVuaXQgfHwgc3RhcnRbIDMgXTtcblxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgd2UgdXBkYXRlIHRoZSB0d2VlbiBwcm9wZXJ0aWVzIGxhdGVyIG9uXG5cdFx0XHRcdHBhcnRzID0gcGFydHMgfHwgW107XG5cblx0XHRcdFx0Ly8gSXRlcmF0aXZlbHkgYXBwcm94aW1hdGUgZnJvbSBhIG5vbnplcm8gc3RhcnRpbmcgcG9pbnRcblx0XHRcdFx0c3RhcnQgPSArdGFyZ2V0IHx8IDE7XG5cblx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdC8vIElmIHByZXZpb3VzIGl0ZXJhdGlvbiB6ZXJvZWQgb3V0LCBkb3VibGUgdW50aWwgd2UgZ2V0ICpzb21ldGhpbmcqLlxuXHRcdFx0XHRcdC8vIFVzZSBzdHJpbmcgZm9yIGRvdWJsaW5nIHNvIHdlIGRvbid0IGFjY2lkZW50YWxseSBzZWUgc2NhbGUgYXMgdW5jaGFuZ2VkIGJlbG93XG5cdFx0XHRcdFx0c2NhbGUgPSBzY2FsZSB8fCBcIi41XCI7XG5cblx0XHRcdFx0XHQvLyBBZGp1c3QgYW5kIGFwcGx5XG5cdFx0XHRcdFx0c3RhcnQgPSBzdGFydCAvIHNjYWxlO1xuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgcHJvcCwgc3RhcnQgKyB1bml0ICk7XG5cblx0XHRcdFx0Ly8gVXBkYXRlIHNjYWxlLCB0b2xlcmF0aW5nIHplcm8gb3IgTmFOIGZyb20gdHdlZW4uY3VyKCksXG5cdFx0XHRcdC8vIGJyZWFrIHRoZSBsb29wIGlmIHNjYWxlIGlzIHVuY2hhbmdlZCBvciBwZXJmZWN0LCBvciBpZiB3ZSd2ZSBqdXN0IGhhZCBlbm91Z2hcblx0XHRcdFx0fSB3aGlsZSAoIHNjYWxlICE9PSAoc2NhbGUgPSB0d2Vlbi5jdXIoKSAvIHRhcmdldCkgJiYgc2NhbGUgIT09IDEgJiYgLS1tYXhJdGVyYXRpb25zICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFVwZGF0ZSB0d2VlbiBwcm9wZXJ0aWVzXG5cdFx0XHRpZiAoIHBhcnRzICkge1xuXHRcdFx0XHRzdGFydCA9IHR3ZWVuLnN0YXJ0ID0gK3N0YXJ0IHx8ICt0YXJnZXQgfHwgMDtcblx0XHRcdFx0dHdlZW4udW5pdCA9IHVuaXQ7XG5cdFx0XHRcdC8vIElmIGEgKz0vLT0gdG9rZW4gd2FzIHByb3ZpZGVkLCB3ZSdyZSBkb2luZyBhIHJlbGF0aXZlIGFuaW1hdGlvblxuXHRcdFx0XHR0d2Vlbi5lbmQgPSBwYXJ0c1sgMSBdID9cblx0XHRcdFx0XHRzdGFydCArICggcGFydHNbIDEgXSArIDEgKSAqIHBhcnRzWyAyIF0gOlxuXHRcdFx0XHRcdCtwYXJ0c1sgMiBdO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fSBdXG5cdH07XG5cbi8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHlcbmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdGZ4Tm93ID0gdW5kZWZpbmVkO1xuXHR9KTtcblx0cmV0dXJuICggZnhOb3cgPSBqUXVlcnkubm93KCkgKTtcbn1cblxuLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cbmZ1bmN0aW9uIGdlbkZ4KCB0eXBlLCBpbmNsdWRlV2lkdGggKSB7XG5cdHZhciB3aGljaCxcblx0XHRpID0gMCxcblx0XHRhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH07XG5cblx0Ly8gSWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLFxuXHQvLyBvdGhlcndpc2Ugc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodFxuXHRpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcblx0Zm9yICggOyBpIDwgNCA7IGkgKz0gMiAtIGluY2x1ZGVXaWR0aCApIHtcblx0XHR3aGljaCA9IGNzc0V4cGFuZFsgaSBdO1xuXHRcdGF0dHJzWyBcIm1hcmdpblwiICsgd2hpY2ggXSA9IGF0dHJzWyBcInBhZGRpbmdcIiArIHdoaWNoIF0gPSB0eXBlO1xuXHR9XG5cblx0aWYgKCBpbmNsdWRlV2lkdGggKSB7XG5cdFx0YXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTtcblx0fVxuXG5cdHJldHVybiBhdHRycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7XG5cdHZhciB0d2Vlbixcblx0XHRjb2xsZWN0aW9uID0gKCB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCB0d2VlbmVyc1sgXCIqXCIgXSApLFxuXHRcdGluZGV4ID0gMCxcblx0XHRsZW5ndGggPSBjb2xsZWN0aW9uLmxlbmd0aDtcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoICh0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApKSApIHtcblxuXHRcdFx0Ly8gV2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHlcblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlciggZWxlbSwgcHJvcHMsIG9wdHMgKSB7XG5cdC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cblx0dmFyIHByb3AsIHZhbHVlLCB0b2dnbGUsIHR3ZWVuLCBob29rcywgb2xkZmlyZSwgZGlzcGxheSwgY2hlY2tEaXNwbGF5LFxuXHRcdGFuaW0gPSB0aGlzLFxuXHRcdG9yaWcgPSB7fSxcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGUsXG5cdFx0aGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbiggZWxlbSApLFxuXHRcdGRhdGFTaG93ID0gZGF0YV9wcml2LmdldCggZWxlbSwgXCJmeHNob3dcIiApO1xuXG5cdC8vIEhhbmRsZSBxdWV1ZTogZmFsc2UgcHJvbWlzZXNcblx0aWYgKCAhb3B0cy5xdWV1ZSApIHtcblx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgXCJmeFwiICk7XG5cdFx0aWYgKCBob29rcy51bnF1ZXVlZCA9PSBudWxsICkge1xuXHRcdFx0aG9va3MudW5xdWV1ZWQgPSAwO1xuXHRcdFx0b2xkZmlyZSA9IGhvb2tzLmVtcHR5LmZpcmU7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggIWhvb2tzLnVucXVldWVkICkge1xuXHRcdFx0XHRcdG9sZGZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0aG9va3MudW5xdWV1ZWQrKztcblxuXHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gRW5zdXJlIHRoZSBjb21wbGV0ZSBoYW5kbGVyIGlzIGNhbGxlZCBiZWZvcmUgdGhpcyBjb21wbGV0ZXNcblx0XHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRob29rcy51bnF1ZXVlZC0tO1xuXHRcdFx0XHRpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sIFwiZnhcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gSGVpZ2h0L3dpZHRoIG92ZXJmbG93IHBhc3Ncblx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCJoZWlnaHRcIiBpbiBwcm9wcyB8fCBcIndpZHRoXCIgaW4gcHJvcHMgKSApIHtcblx0XHQvLyBNYWtlIHN1cmUgdGhhdCBub3RoaW5nIHNuZWFrcyBvdXRcblx0XHQvLyBSZWNvcmQgYWxsIDMgb3ZlcmZsb3cgYXR0cmlidXRlcyBiZWNhdXNlIElFOS0xMCBkbyBub3Rcblx0XHQvLyBjaGFuZ2UgdGhlIG92ZXJmbG93IGF0dHJpYnV0ZSB3aGVuIG92ZXJmbG93WCBhbmRcblx0XHQvLyBvdmVyZmxvd1kgYXJlIHNldCB0byB0aGUgc2FtZSB2YWx1ZVxuXHRcdG9wdHMub3ZlcmZsb3cgPSBbIHN0eWxlLm92ZXJmbG93LCBzdHlsZS5vdmVyZmxvd1gsIHN0eWxlLm92ZXJmbG93WSBdO1xuXG5cdFx0Ly8gU2V0IGRpc3BsYXkgcHJvcGVydHkgdG8gaW5saW5lLWJsb2NrIGZvciBoZWlnaHQvd2lkdGhcblx0XHQvLyBhbmltYXRpb25zIG9uIGlubGluZSBlbGVtZW50cyB0aGF0IGFyZSBoYXZpbmcgd2lkdGgvaGVpZ2h0IGFuaW1hdGVkXG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cblx0XHQvLyBUZXN0IGRlZmF1bHQgZGlzcGxheSBpZiBkaXNwbGF5IGlzIGN1cnJlbnRseSBcIm5vbmVcIlxuXHRcdGNoZWNrRGlzcGxheSA9IGRpc3BsYXkgPT09IFwibm9uZVwiID9cblx0XHRcdGRhdGFfcHJpdi5nZXQoIGVsZW0sIFwib2xkZGlzcGxheVwiICkgfHwgZGVmYXVsdERpc3BsYXkoIGVsZW0ubm9kZU5hbWUgKSA6IGRpc3BsYXk7XG5cblx0XHRpZiAoIGNoZWNrRGlzcGxheSA9PT0gXCJpbmxpbmVcIiAmJiBqUXVlcnkuY3NzKCBlbGVtLCBcImZsb2F0XCIgKSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRzdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHR9XG5cdH1cblxuXHRpZiAoIG9wdHMub3ZlcmZsb3cgKSB7XG5cdFx0c3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRcdGFuaW0uYWx3YXlzKGZ1bmN0aW9uKCkge1xuXHRcdFx0c3R5bGUub3ZlcmZsb3cgPSBvcHRzLm92ZXJmbG93WyAwIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1ggPSBvcHRzLm92ZXJmbG93WyAxIF07XG5cdFx0XHRzdHlsZS5vdmVyZmxvd1kgPSBvcHRzLm92ZXJmbG93WyAyIF07XG5cdFx0fSk7XG5cdH1cblxuXHQvLyBzaG93L2hpZGUgcGFzc1xuXHRmb3IgKCBwcm9wIGluIHByb3BzICkge1xuXHRcdHZhbHVlID0gcHJvcHNbIHByb3AgXTtcblx0XHRpZiAoIHJmeHR5cGVzLmV4ZWMoIHZhbHVlICkgKSB7XG5cdFx0XHRkZWxldGUgcHJvcHNbIHByb3AgXTtcblx0XHRcdHRvZ2dsZSA9IHRvZ2dsZSB8fCB2YWx1ZSA9PT0gXCJ0b2dnbGVcIjtcblx0XHRcdGlmICggdmFsdWUgPT09ICggaGlkZGVuID8gXCJoaWRlXCIgOiBcInNob3dcIiApICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZXJlIGlzIGRhdGFTaG93IGxlZnQgb3ZlciBmcm9tIGEgc3RvcHBlZCBoaWRlIG9yIHNob3cgYW5kIHdlIGFyZSBnb2luZyB0byBwcm9jZWVkIHdpdGggc2hvdywgd2Ugc2hvdWxkIHByZXRlbmQgdG8gYmUgaGlkZGVuXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRvcmlnWyBwcm9wIF0gPSBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdIHx8IGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCApO1xuXG5cdFx0Ly8gQW55IG5vbi1meCB2YWx1ZSBzdG9wcyB1cyBmcm9tIHJlc3RvcmluZyB0aGUgb3JpZ2luYWwgZGlzcGxheSB2YWx1ZVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkaXNwbGF5ID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBvcmlnICkgKSB7XG5cdFx0aWYgKCBkYXRhU2hvdyApIHtcblx0XHRcdGlmICggXCJoaWRkZW5cIiBpbiBkYXRhU2hvdyApIHtcblx0XHRcdFx0aGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhU2hvdyA9IGRhdGFfcHJpdi5hY2Nlc3MoIGVsZW0sIFwiZnhzaG93XCIsIHt9ICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3RvcmUgc3RhdGUgaWYgaXRzIHRvZ2dsZSAtIGVuYWJsZXMgLnN0b3AoKS50b2dnbGUoKSB0byBcInJldmVyc2VcIlxuXHRcdGlmICggdG9nZ2xlICkge1xuXHRcdFx0ZGF0YVNob3cuaGlkZGVuID0gIWhpZGRlbjtcblx0XHR9XG5cdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRqUXVlcnkoIGVsZW0gKS5zaG93KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW0uZG9uZShmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5KCBlbGVtICkuaGlkZSgpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGFuaW0uZG9uZShmdW5jdGlvbigpIHtcblx0XHRcdHZhciBwcm9wO1xuXG5cdFx0XHRkYXRhX3ByaXYucmVtb3ZlKCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cdFx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgb3JpZ1sgcHJvcCBdICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXHRcdFx0dHdlZW4gPSBjcmVhdGVUd2VlbiggaGlkZGVuID8gZGF0YVNob3dbIHByb3AgXSA6IDAsIHByb3AsIGFuaW0gKTtcblxuXHRcdFx0aWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7XG5cdFx0XHRcdGRhdGFTaG93WyBwcm9wIF0gPSB0d2Vlbi5zdGFydDtcblx0XHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdFx0dHdlZW4uZW5kID0gdHdlZW4uc3RhcnQ7XG5cdFx0XHRcdFx0dHdlZW4uc3RhcnQgPSBwcm9wID09PSBcIndpZHRoXCIgfHwgcHJvcCA9PT0gXCJoZWlnaHRcIiA/IDEgOiAwO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdC8vIElmIHRoaXMgaXMgYSBub29wIGxpa2UgLmhpZGUoKS5oaWRlKCksIHJlc3RvcmUgYW4gb3ZlcndyaXR0ZW4gZGlzcGxheSB2YWx1ZVxuXHR9IGVsc2UgaWYgKCAoZGlzcGxheSA9PT0gXCJub25lXCIgPyBkZWZhdWx0RGlzcGxheSggZWxlbS5ub2RlTmFtZSApIDogZGlzcGxheSkgPT09IFwiaW5saW5lXCIgKSB7XG5cdFx0c3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XG5cdH1cbn1cblxuZnVuY3Rpb24gcHJvcEZpbHRlciggcHJvcHMsIHNwZWNpYWxFYXNpbmcgKSB7XG5cdHZhciBpbmRleCwgbmFtZSwgZWFzaW5nLCB2YWx1ZSwgaG9va3M7XG5cblx0Ly8gY2FtZWxDYXNlLCBzcGVjaWFsRWFzaW5nIGFuZCBleHBhbmQgY3NzSG9vayBwYXNzXG5cdGZvciAoIGluZGV4IGluIHByb3BzICkge1xuXHRcdG5hbWUgPSBqUXVlcnkuY2FtZWxDYXNlKCBpbmRleCApO1xuXHRcdGVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTtcblx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdO1xuXHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRlYXNpbmcgPSB2YWx1ZVsgMSBdO1xuXHRcdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyAwIF07XG5cdFx0fVxuXG5cdFx0aWYgKCBpbmRleCAhPT0gbmFtZSApIHtcblx0XHRcdHByb3BzWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgaW5kZXggXTtcblx0XHR9XG5cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdO1xuXHRcdGlmICggaG9va3MgJiYgXCJleHBhbmRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBuYW1lIF07XG5cblx0XHRcdC8vIE5vdCBxdWl0ZSAkLmV4dGVuZCwgdGhpcyB3b24ndCBvdmVyd3JpdGUgZXhpc3Rpbmcga2V5cy5cblx0XHRcdC8vIFJldXNpbmcgJ2luZGV4JyBiZWNhdXNlIHdlIGhhdmUgdGhlIGNvcnJlY3QgXCJuYW1lXCJcblx0XHRcdGZvciAoIGluZGV4IGluIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICEoIGluZGV4IGluIHByb3BzICkgKSB7XG5cdFx0XHRcdFx0cHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTtcblx0XHRcdFx0XHRzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwZWNpYWxFYXNpbmdbIG5hbWUgXSA9IGVhc2luZztcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkge1xuXHR2YXIgcmVzdWx0LFxuXHRcdHN0b3BwZWQsXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGFuaW1hdGlvblByZWZpbHRlcnMubGVuZ3RoLFxuXHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCkuYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdC8vIERvbid0IG1hdGNoIGVsZW0gaW4gdGhlIDphbmltYXRlZCBzZWxlY3RvclxuXHRcdFx0ZGVsZXRlIHRpY2suZWxlbTtcblx0XHR9KSxcblx0XHR0aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRcdHJlbWFpbmluZyA9IE1hdGgubWF4KCAwLCBhbmltYXRpb24uc3RhcnRUaW1lICsgYW5pbWF0aW9uLmR1cmF0aW9uIC0gY3VycmVudFRpbWUgKSxcblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCAyLjNcblx0XHRcdFx0Ly8gQXJjaGFpYyBjcmFzaCBidWcgd29uJ3QgYWxsb3cgdXMgdG8gdXNlIGAxIC0gKCAwLjUgfHwgMCApYCAoIzEyNDk3KVxuXHRcdFx0XHR0ZW1wID0gcmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9uIHx8IDAsXG5cdFx0XHRcdHBlcmNlbnQgPSAxIC0gdGVtcCxcblx0XHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0XHRsZW5ndGggPSBhbmltYXRpb24udHdlZW5zLmxlbmd0aDtcblxuXHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCBwZXJjZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBwZXJjZW50LCByZW1haW5pbmcgXSk7XG5cblx0XHRcdGlmICggcGVyY2VudCA8IDEgJiYgbGVuZ3RoICkge1xuXHRcdFx0XHRyZXR1cm4gcmVtYWluaW5nO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uIF0gKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0YW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSh7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0cHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksXG5cdFx0XHRvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7IHNwZWNpYWxFYXNpbmc6IHt9IH0sIG9wdGlvbnMgKSxcblx0XHRcdG9yaWdpbmFsUHJvcGVydGllczogcHJvcGVydGllcyxcblx0XHRcdG9yaWdpbmFsT3B0aW9uczogb3B0aW9ucyxcblx0XHRcdHN0YXJ0VGltZTogZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuXHRcdFx0dHdlZW5zOiBbXSxcblx0XHRcdGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiggcHJvcCwgZW5kICkge1xuXHRcdFx0XHR2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsXG5cdFx0XHRcdFx0XHRhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBnb3RvRW5kICkge1xuXHRcdFx0XHR2YXIgaW5kZXggPSAwLFxuXHRcdFx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydFxuXHRcdFx0XHRcdGxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aCA7IGluZGV4KysgKSB7XG5cdFx0XHRcdFx0YW5pbWF0aW9uLnR3ZWVuc1sgaW5kZXggXS5ydW4oIDEgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlc29sdmUgd2hlbiB3ZSBwbGF5ZWQgdGhlIGxhc3QgZnJhbWU7IG90aGVyd2lzZSwgcmVqZWN0XG5cdFx0XHRcdGlmICggZ290b0VuZCApIHtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9KSxcblx0XHRwcm9wcyA9IGFuaW1hdGlvbi5wcm9wcztcblxuXHRwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApO1xuXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGggOyBpbmRleCsrICkge1xuXHRcdHJlc3VsdCA9IGFuaW1hdGlvblByZWZpbHRlcnNbIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBlbGVtLCBwcm9wcywgYW5pbWF0aW9uLm9wdHMgKTtcblx0XHRpZiAoIHJlc3VsdCApIHtcblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXHR9XG5cblx0alF1ZXJ5Lm1hcCggcHJvcHMsIGNyZWF0ZVR3ZWVuLCBhbmltYXRpb24gKTtcblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkge1xuXHRcdGFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApO1xuXHR9XG5cblx0alF1ZXJ5LmZ4LnRpbWVyKFxuXHRcdGpRdWVyeS5leHRlbmQoIHRpY2ssIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRhbmltOiBhbmltYXRpb24sXG5cdFx0XHRxdWV1ZTogYW5pbWF0aW9uLm9wdHMucXVldWVcblx0XHR9KVxuXHQpO1xuXG5cdC8vIGF0dGFjaCBjYWxsYmFja3MgZnJvbSBvcHRpb25zXG5cdHJldHVybiBhbmltYXRpb24ucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzIClcblx0XHQuZG9uZSggYW5pbWF0aW9uLm9wdHMuZG9uZSwgYW5pbWF0aW9uLm9wdHMuY29tcGxldGUgKVxuXHRcdC5mYWlsKCBhbmltYXRpb24ub3B0cy5mYWlsIClcblx0XHQuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTtcbn1cblxualF1ZXJ5LkFuaW1hdGlvbiA9IGpRdWVyeS5leHRlbmQoIEFuaW1hdGlvbiwge1xuXG5cdHR3ZWVuZXI6IGZ1bmN0aW9uKCBwcm9wcywgY2FsbGJhY2sgKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggcHJvcHMgKSApIHtcblx0XHRcdGNhbGxiYWNrID0gcHJvcHM7XG5cdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvcHMgPSBwcm9wcy5zcGxpdChcIiBcIik7XG5cdFx0fVxuXG5cdFx0dmFyIHByb3AsXG5cdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRsZW5ndGggPSBwcm9wcy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoIDsgaW5kZXgrKyApIHtcblx0XHRcdHByb3AgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRcdHR3ZWVuZXJzWyBwcm9wIF0gPSB0d2VlbmVyc1sgcHJvcCBdIHx8IFtdO1xuXHRcdFx0dHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH1cblx0fSxcblxuXHRwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHtcblx0XHRpZiAoIHByZXBlbmQgKSB7XG5cdFx0XHRhbmltYXRpb25QcmVmaWx0ZXJzLnVuc2hpZnQoIGNhbGxiYWNrICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGFuaW1hdGlvblByZWZpbHRlcnMucHVzaCggY2FsbGJhY2sgKTtcblx0XHR9XG5cdH1cbn0pO1xuXG5qUXVlcnkuc3BlZWQgPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgZm4gKSB7XG5cdHZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09IFwib2JqZWN0XCIgPyBqUXVlcnkuZXh0ZW5kKCB7fSwgc3BlZWQgKSA6IHtcblx0XHRjb21wbGV0ZTogZm4gfHwgIWZuICYmIGVhc2luZyB8fFxuXHRcdFx0alF1ZXJ5LmlzRnVuY3Rpb24oIHNwZWVkICkgJiYgc3BlZWQsXG5cdFx0ZHVyYXRpb246IHNwZWVkLFxuXHRcdGVhc2luZzogZm4gJiYgZWFzaW5nIHx8IGVhc2luZyAmJiAhalF1ZXJ5LmlzRnVuY3Rpb24oIGVhc2luZyApICYmIGVhc2luZ1xuXHR9O1xuXG5cdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5vZmYgPyAwIDogdHlwZW9mIG9wdC5kdXJhdGlvbiA9PT0gXCJudW1iZXJcIiA/IG9wdC5kdXJhdGlvbiA6XG5cdFx0b3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMgPyBqUXVlcnkuZnguc3BlZWRzWyBvcHQuZHVyYXRpb24gXSA6IGpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7XG5cblx0Ly8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gXCJmeFwiXG5cdGlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkge1xuXHRcdG9wdC5xdWV1ZSA9IFwiZnhcIjtcblx0fVxuXG5cdC8vIFF1ZXVlaW5nXG5cdG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cblx0b3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0Lm9sZCApICkge1xuXHRcdFx0b3B0Lm9sZC5jYWxsKCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHQucXVldWUgKSB7XG5cdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgb3B0LnF1ZXVlICk7XG5cdFx0fVxuXHR9O1xuXG5cdHJldHVybiBvcHQ7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0ZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXG5cdFx0Ly8gU2hvdyBhbnkgaGlkZGVuIGVsZW1lbnRzIGFmdGVyIHNldHRpbmcgb3BhY2l0eSB0byAwXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBpc0hpZGRlbiApLmNzcyggXCJvcGFjaXR5XCIsIDAgKS5zaG93KClcblxuXHRcdFx0Ly8gQW5pbWF0ZSB0byB0aGUgdmFsdWUgc3BlY2lmaWVkXG5cdFx0XHQuZW5kKCkuYW5pbWF0ZSh7IG9wYWNpdHk6IHRvIH0sIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICk7XG5cdH0sXG5cdGFuaW1hdGU6IGZ1bmN0aW9uKCBwcm9wLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHR2YXIgZW1wdHkgPSBqUXVlcnkuaXNFbXB0eU9iamVjdCggcHJvcCApLFxuXHRcdFx0b3B0YWxsID0galF1ZXJ5LnNwZWVkKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApLFxuXHRcdFx0ZG9BbmltYXRpb24gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0Ly8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3Rcblx0XHRcdFx0dmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApO1xuXG5cdFx0XHRcdC8vIEVtcHR5IGFuaW1hdGlvbnMsIG9yIGZpbmlzaGluZyByZXNvbHZlcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRpZiAoIGVtcHR5IHx8IGRhdGFfcHJpdi5nZXQoIHRoaXMsIFwiZmluaXNoXCIgKSApIHtcblx0XHRcdFx0XHRhbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uO1xuXG5cdFx0cmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0dGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDpcblx0XHRcdHRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTtcblx0fSxcblx0c3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG5cdFx0dmFyIHN0b3BRdWV1ZSA9IGZ1bmN0aW9uKCBob29rcyApIHtcblx0XHRcdHZhciBzdG9wID0gaG9va3Muc3RvcDtcblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0c3RvcCggZ290b0VuZCApO1xuXHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0Z290b0VuZCA9IGNsZWFyUXVldWU7XG5cdFx0XHRjbGVhclF1ZXVlID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZGVxdWV1ZSA9IHRydWUsXG5cdFx0XHRcdGluZGV4ID0gdHlwZSAhPSBudWxsICYmIHR5cGUgKyBcInF1ZXVlSG9va3NcIixcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0ZGF0YSA9IGRhdGFfcHJpdi5nZXQoIHRoaXMgKTtcblxuXHRcdFx0aWYgKCBpbmRleCApIHtcblx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCApIHtcblx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaW5kZXggaW4gZGF0YSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICYmIHJydW4udGVzdCggaW5kZXggKSApIHtcblx0XHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmICh0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlKSApIHtcblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7XG5cdFx0XHRcdFx0ZGVxdWV1ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZC5cblx0XHRcdC8vIFRpbWVycyBjdXJyZW50bHkgd2lsbCBjYWxsIHRoZWlyIGNvbXBsZXRlIGNhbGxiYWNrcywgd2hpY2hcblx0XHRcdC8vIHdpbGwgZGVxdWV1ZSBidXQgb25seSBpZiB0aGV5IHdlcmUgZ290b0VuZC5cblx0XHRcdGlmICggZGVxdWV1ZSB8fCAhZ290b0VuZCApIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fSxcblx0ZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRpZiAoIHR5cGUgIT09IGZhbHNlICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGluZGV4LFxuXHRcdFx0XHRkYXRhID0gZGF0YV9wcml2LmdldCggdGhpcyApLFxuXHRcdFx0XHRxdWV1ZSA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlXCIgXSxcblx0XHRcdFx0aG9va3MgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgXSxcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0bGVuZ3RoID0gcXVldWUgPyBxdWV1ZS5sZW5ndGggOiAwO1xuXG5cdFx0XHQvLyBFbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhXG5cdFx0XHRkYXRhLmZpbmlzaCA9IHRydWU7XG5cblx0XHRcdC8vIEVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuXHRcdFx0alF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBbXSApO1xuXG5cdFx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnN0b3AgKSB7XG5cdFx0XHRcdGhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYWN0aXZlIGFuaW1hdGlvbnMsIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7XG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggdHJ1ZSApO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdGlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkge1xuXHRcdFx0XHRcdHF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVHVybiBvZmYgZmluaXNoaW5nIGZsYWdcblx0XHRcdGRlbGV0ZSBkYXRhLmZpbmlzaDtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5lYWNoKFsgXCJ0b2dnbGVcIiwgXCJzaG93XCIsIFwiaGlkZVwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSBcImJvb2xlYW5cIiA/XG5cdFx0XHRjc3NGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICkgOlxuXHRcdFx0dGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9O1xufSk7XG5cbi8vIEdlbmVyYXRlIHNob3J0Y3V0cyBmb3IgY3VzdG9tIGFuaW1hdGlvbnNcbmpRdWVyeS5lYWNoKHtcblx0c2xpZGVEb3duOiBnZW5GeChcInNob3dcIiksXG5cdHNsaWRlVXA6IGdlbkZ4KFwiaGlkZVwiKSxcblx0c2xpZGVUb2dnbGU6IGdlbkZ4KFwidG9nZ2xlXCIpLFxuXHRmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcblx0ZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuXHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxufSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0pO1xuXG5qUXVlcnkudGltZXJzID0gW107XG5qUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgdGltZXIsXG5cdFx0aSA9IDAsXG5cdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycztcblxuXHRmeE5vdyA9IGpRdWVyeS5ub3coKTtcblxuXHRmb3IgKCA7IGkgPCB0aW1lcnMubGVuZ3RoOyBpKysgKSB7XG5cdFx0dGltZXIgPSB0aW1lcnNbIGkgXTtcblx0XHQvLyBDaGVja3MgdGhlIHRpbWVyIGhhcyBub3QgYWxyZWFkeSBiZWVuIHJlbW92ZWRcblx0XHRpZiAoICF0aW1lcigpICYmIHRpbWVyc1sgaSBdID09PSB0aW1lciApIHtcblx0XHRcdHRpbWVycy5zcGxpY2UoIGktLSwgMSApO1xuXHRcdH1cblx0fVxuXG5cdGlmICggIXRpbWVycy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0b3AoKTtcblx0fVxuXHRmeE5vdyA9IHVuZGVmaW5lZDtcbn07XG5cbmpRdWVyeS5meC50aW1lciA9IGZ1bmN0aW9uKCB0aW1lciApIHtcblx0alF1ZXJ5LnRpbWVycy5wdXNoKCB0aW1lciApO1xuXHRpZiAoIHRpbWVyKCkgKSB7XG5cdFx0alF1ZXJ5LmZ4LnN0YXJ0KCk7XG5cdH0gZWxzZSB7XG5cdFx0alF1ZXJ5LnRpbWVycy5wb3AoKTtcblx0fVxufTtcblxualF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5cbmpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRpZiAoICF0aW1lcklkICkge1xuXHRcdHRpbWVySWQgPSBzZXRJbnRlcnZhbCggalF1ZXJ5LmZ4LnRpY2ssIGpRdWVyeS5meC5pbnRlcnZhbCApO1xuXHR9XG59O1xuXG5qUXVlcnkuZnguc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRjbGVhckludGVydmFsKCB0aW1lcklkICk7XG5cdHRpbWVySWQgPSBudWxsO1xufTtcblxualF1ZXJ5LmZ4LnNwZWVkcyA9IHtcblx0c2xvdzogNjAwLFxuXHRmYXN0OiAyMDAsXG5cdC8vIERlZmF1bHQgc3BlZWRcblx0X2RlZmF1bHQ6IDQwMFxufTtcblxuXG4vLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG4vLyBodHRwOi8vYmxpbmRzaWduYWxzLmNvbS9pbmRleC5waHAvMjAwOS8wNy9qcXVlcnktZGVsYXkvXG5qUXVlcnkuZm4uZGVsYXkgPSBmdW5jdGlvbiggdGltZSwgdHlwZSApIHtcblx0dGltZSA9IGpRdWVyeS5meCA/IGpRdWVyeS5meC5zcGVlZHNbIHRpbWUgXSB8fCB0aW1lIDogdGltZTtcblx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlLCBmdW5jdGlvbiggbmV4dCwgaG9va3MgKSB7XG5cdFx0dmFyIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG5cdFx0aG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XG5cdFx0fTtcblx0fSk7XG59O1xuXG5cbihmdW5jdGlvbigpIHtcblx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICksXG5cdFx0c2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzZWxlY3RcIiApLFxuXHRcdG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvcHRpb25cIiApICk7XG5cblx0aW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcblxuXHQvLyBTdXBwb3J0OiBpT1M8PTUuMSwgQW5kcm9pZDw9NC4yK1xuXHQvLyBEZWZhdWx0IHZhbHVlIGZvciBhIGNoZWNrYm94IHNob3VsZCBiZSBcIm9uXCJcblx0c3VwcG9ydC5jaGVja09uID0gaW5wdXQudmFsdWUgIT09IFwiXCI7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBNdXN0IGFjY2VzcyBzZWxlY3RlZEluZGV4IHRvIG1ha2UgZGVmYXVsdCBvcHRpb25zIHNlbGVjdFxuXHRzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8PTIuM1xuXHQvLyBPcHRpb25zIGluc2lkZSBkaXNhYmxlZCBzZWxlY3RzIGFyZSBpbmNvcnJlY3RseSBtYXJrZWQgYXMgZGlzYWJsZWRcblx0c2VsZWN0LmRpc2FibGVkID0gdHJ1ZTtcblx0c3VwcG9ydC5vcHREaXNhYmxlZCA9ICFvcHQuZGlzYWJsZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUU8PTExK1xuXHQvLyBBbiBpbnB1dCBsb3NlcyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpb1xuXHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRpbnB1dC52YWx1ZSA9IFwidFwiO1xuXHRpbnB1dC50eXBlID0gXCJyYWRpb1wiO1xuXHRzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gXCJ0XCI7XG59KSgpO1xuXG5cbnZhciBub2RlSG9vaywgYm9vbEhvb2ssXG5cdGF0dHJIYW5kbGUgPSBqUXVlcnkuZXhwci5hdHRySGFuZGxlO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0YXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIHRoaXMsIG5hbWUgKTtcblx0XHR9KTtcblx0fVxufSk7XG5cbmpRdWVyeS5leHRlbmQoe1xuXHRhdHRyOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBkb24ndCBnZXQvc2V0IGF0dHJpYnV0ZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCAhZWxlbSB8fCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBGYWxsYmFjayB0byBwcm9wIHdoZW4gYXR0cmlidXRlcyBhcmUgbm90IHN1cHBvcnRlZFxuXHRcdGlmICggdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlID09PSBzdHJ1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGF0dHJpYnV0ZXMgYXJlIGxvd2VyY2FzZVxuXHRcdC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblx0XHRcdG5hbWUgPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRob29rcyA9IGpRdWVyeS5hdHRySG9va3NbIG5hbWUgXSB8fFxuXHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiBub2RlSG9vayApO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcblx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblxuXHRcdFx0fSBlbHNlIGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG5cdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdH1cblxuXHRcdH0gZWxzZSBpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdFx0cmV0dXJuIHJldCA9PSBudWxsID9cblx0XHRcdFx0dW5kZWZpbmVkIDpcblx0XHRcdFx0cmV0O1xuXHRcdH1cblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0dmFyIG5hbWUsIHByb3BOYW1lLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdHdoaXRlICk7XG5cblx0XHRpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0d2hpbGUgKCAobmFtZSA9IGF0dHJOYW1lc1tpKytdKSApIHtcblx0XHRcdFx0cHJvcE5hbWUgPSBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWU7XG5cblx0XHRcdFx0Ly8gQm9vbGVhbiBhdHRyaWJ1dGVzIGdldCBzcGVjaWFsIHRyZWF0bWVudCAoIzEwODcwKVxuXHRcdFx0XHRpZiAoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRcdC8vIFNldCBjb3JyZXNwb25kaW5nIHByb3BlcnR5IHRvIGZhbHNlXG5cdFx0XHRcdFx0ZWxlbVsgcHJvcE5hbWUgXSA9IGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIG5hbWUgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0YXR0ckhvb2tzOiB7XG5cdFx0dHlwZToge1xuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggIXN1cHBvcnQucmFkaW9WYWx1ZSAmJiB2YWx1ZSA9PT0gXCJyYWRpb1wiICYmXG5cdFx0XHRcdFx0alF1ZXJ5Lm5vZGVOYW1lKCBlbGVtLCBcImlucHV0XCIgKSApIHtcblx0XHRcdFx0XHR2YXIgdmFsID0gZWxlbS52YWx1ZTtcblx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIHZhbHVlICk7XG5cdFx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnZhbHVlID0gdmFsO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG4vLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzXG5ib29sSG9vayA9IHtcblx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG5cdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHQvLyBSZW1vdmUgYm9vbGVhbiBhdHRyaWJ1dGVzIHdoZW4gc2V0IHRvIGZhbHNlXG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgbmFtZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gbmFtZTtcblx0fVxufTtcbmpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1xcdysvZyApLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGdldHRlciA9IGF0dHJIYW5kbGVbIG5hbWUgXSB8fCBqUXVlcnkuZmluZC5hdHRyO1xuXG5cdGF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgcmV0LCBoYW5kbGU7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHQvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wIGJ5IHRlbXBvcmFyaWx5IHJlbW92aW5nIHRoaXMgZnVuY3Rpb24gZnJvbSB0aGUgZ2V0dGVyXG5cdFx0XHRoYW5kbGUgPSBhdHRySGFuZGxlWyBuYW1lIF07XG5cdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSByZXQ7XG5cdFx0XHRyZXQgPSBnZXR0ZXIoIGVsZW0sIG5hbWUsIGlzWE1MICkgIT0gbnVsbCA/XG5cdFx0XHRcdG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0XHRhdHRySGFuZGxlWyBuYW1lIF0gPSBoYW5kbGU7XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH07XG59KTtcblxuXG5cblxudmFyIHJmb2N1c2FibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0cHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0ZGVsZXRlIHRoaXNbIGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZSBdO1xuXHRcdH0pO1xuXHR9XG59KTtcblxualF1ZXJ5LmV4dGVuZCh7XG5cdHByb3BGaXg6IHtcblx0XHRcImZvclwiOiBcImh0bWxGb3JcIixcblx0XHRcImNsYXNzXCI6IFwiY2xhc3NOYW1lXCJcblx0fSxcblxuXHRwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsIG5vdHhtbCxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIERvbid0IGdldC9zZXQgcHJvcGVydGllcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoICFlbGVtIHx8IG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdG5vdHhtbCA9IG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKTtcblxuXHRcdGlmICggbm90eG1sICkge1xuXHRcdFx0Ly8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rc1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybiBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmIChyZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkpICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRyZXQgOlxuXHRcdFx0XHQoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKHJldCA9IGhvb2tzLmdldCggZWxlbSwgbmFtZSApKSAhPT0gbnVsbCA/XG5cdFx0XHRcdHJldCA6XG5cdFx0XHRcdGVsZW1bIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0cHJvcEhvb2tzOiB7XG5cdFx0dGFiSW5kZXg6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmhhc0F0dHJpYnV0ZSggXCJ0YWJpbmRleFwiICkgfHwgcmZvY3VzYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgfHwgZWxlbS5ocmVmID9cblx0XHRcdFx0XHRlbGVtLnRhYkluZGV4IDpcblx0XHRcdFx0XHQtMTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0pO1xuXG5pZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkge1xuXHRqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgJiYgcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHBhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbnVsbDtcblx0XHR9XG5cdH07XG59XG5cbmpRdWVyeS5lYWNoKFtcblx0XCJ0YWJJbmRleFwiLFxuXHRcInJlYWRPbmx5XCIsXG5cdFwibWF4TGVuZ3RoXCIsXG5cdFwiY2VsbFNwYWNpbmdcIixcblx0XCJjZWxsUGFkZGluZ1wiLFxuXHRcInJvd1NwYW5cIixcblx0XCJjb2xTcGFuXCIsXG5cdFwidXNlTWFwXCIsXG5cdFwiZnJhbWVCb3JkZXJcIixcblx0XCJjb250ZW50RWRpdGFibGVcIlxuXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7XG59KTtcblxuXG5cblxudmFyIHJjbGFzcyA9IC9bXFx0XFxyXFxuXFxmXS9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0YWRkQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdHByb2NlZWQgPSB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgdmFsdWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGxlbiA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmFkZENsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCB0aGlzLmNsYXNzTmFtZSApICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIHByb2NlZWQgKSB7XG5cdFx0XHQvLyBUaGUgZGlzanVuY3Rpb24gaGVyZSBpcyBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIHJlbW92ZUNsYXNzKVxuXHRcdFx0Y2xhc3NlcyA9ICggdmFsdWUgfHwgXCJcIiApLm1hdGNoKCBybm90d2hpdGUgKSB8fCBbXTtcblxuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGVsZW0gPSB0aGlzWyBpIF07XG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBlbGVtLmNsYXNzTmFtZSA/XG5cdFx0XHRcdFx0KCBcIiBcIiArIGVsZW0uY2xhc3NOYW1lICsgXCIgXCIgKS5yZXBsYWNlKCByY2xhc3MsIFwiIFwiICkgOlxuXHRcdFx0XHRcdFwiIFwiXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoY2xhenogPSBjbGFzc2VzW2orK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPCAwICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgKz0gY2xhenogKyBcIiBcIjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBvbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSBqUXVlcnkudHJpbSggY3VyICk7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmNsYXNzTmFtZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uY2xhc3NOYW1lID0gZmluYWxWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRyZW1vdmVDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0cHJvY2VlZCA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDAgfHwgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aDtcblxuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgdGhpcy5jbGFzc05hbWUgKSApO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdGlmICggcHJvY2VlZCApIHtcblx0XHRcdGNsYXNzZXMgPSAoIHZhbHVlIHx8IFwiXCIgKS5tYXRjaCggcm5vdHdoaXRlICkgfHwgW107XG5cblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdO1xuXHRcdFx0XHQvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKVxuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggZWxlbS5jbGFzc05hbWUgP1xuXHRcdFx0XHRcdCggXCIgXCIgKyBlbGVtLmNsYXNzTmFtZSArIFwiIFwiICkucmVwbGFjZSggcmNsYXNzLCBcIiBcIiApIDpcblx0XHRcdFx0XHRcIlwiXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoY2xhenogPSBjbGFzc2VzW2orK10pICkge1xuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlICphbGwqIGluc3RhbmNlc1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBjdXIuaW5kZXhPZiggXCIgXCIgKyBjbGF6eiArIFwiIFwiICkgPj0gMCApIHtcblx0XHRcdFx0XHRcdFx0Y3VyID0gY3VyLnJlcGxhY2UoIFwiIFwiICsgY2xhenogKyBcIiBcIiwgXCIgXCIgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBPbmx5IGFzc2lnbiBpZiBkaWZmZXJlbnQgdG8gYXZvaWQgdW5uZWVkZWQgcmVuZGVyaW5nLlxuXHRcdFx0XHRcdGZpbmFsVmFsdWUgPSB2YWx1ZSA/IGpRdWVyeS50cmltKCBjdXIgKSA6IFwiXCI7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLmNsYXNzTmFtZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uY2xhc3NOYW1lID0gZmluYWxWYWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR0b2dnbGVDbGFzczogZnVuY3Rpb24oIHZhbHVlLCBzdGF0ZVZhbCApIHtcblx0XHR2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuXHRcdGlmICggdHlwZW9mIHN0YXRlVmFsID09PSBcImJvb2xlYW5cIiAmJiB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKCB2YWx1ZS5jYWxsKHRoaXMsIGksIHRoaXMuY2xhc3NOYW1lLCBzdGF0ZVZhbCksIHN0YXRlVmFsICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCB0eXBlID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHQvLyBUb2dnbGUgaW5kaXZpZHVhbCBjbGFzcyBuYW1lc1xuXHRcdFx0XHR2YXIgY2xhc3NOYW1lLFxuXHRcdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHRcdHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0XHRjbGFzc05hbWVzID0gdmFsdWUubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0XHRcdHdoaWxlICggKGNsYXNzTmFtZSA9IGNsYXNzTmFtZXNbIGkrKyBdKSApIHtcblx0XHRcdFx0XHQvLyBDaGVjayBlYWNoIGNsYXNzTmFtZSBnaXZlbiwgc3BhY2Ugc2VwYXJhdGVkIGxpc3Rcblx0XHRcdFx0XHRpZiAoIHNlbGYuaGFzQ2xhc3MoIGNsYXNzTmFtZSApICkge1xuXHRcdFx0XHRcdFx0c2VsZi5yZW1vdmVDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbGYuYWRkQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHQvLyBUb2dnbGUgd2hvbGUgY2xhc3MgbmFtZVxuXHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gc3RydW5kZWZpbmVkIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0XHRpZiAoIHRoaXMuY2xhc3NOYW1lICkge1xuXHRcdFx0XHRcdC8vIHN0b3JlIGNsYXNzTmFtZSBpZiBzZXRcblx0XHRcdFx0XHRkYXRhX3ByaXYuc2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiwgdGhpcy5jbGFzc05hbWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXG5cdFx0XHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXG5cdFx0XHRcdC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cblx0XHRcdFx0dGhpcy5jbGFzc05hbWUgPSB0aGlzLmNsYXNzTmFtZSB8fCB2YWx1ZSA9PT0gZmFsc2UgPyBcIlwiIDogZGF0YV9wcml2LmdldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9LFxuXG5cdGhhc0NsYXNzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGNsYXNzTmFtZSA9IFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoO1xuXHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdGlmICggdGhpc1tpXS5ub2RlVHlwZSA9PT0gMSAmJiAoXCIgXCIgKyB0aGlzW2ldLmNsYXNzTmFtZSArIFwiIFwiKS5yZXBsYWNlKHJjbGFzcywgXCIgXCIpLmluZGV4T2YoIGNsYXNzTmFtZSApID49IDAgKSB7XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufSk7XG5cblxuXG5cbnZhciBycmV0dXJuID0gL1xcci9nO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0dmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsIGlzRnVuY3Rpb24sXG5cdFx0XHRlbGVtID0gdGhpc1swXTtcblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyBlbGVtLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJiAocmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBcInZhbHVlXCIgKSkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0ID0gZWxlbS52YWx1ZTtcblxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIHJldCA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0Ly8gSGFuZGxlIG1vc3QgY29tbW9uIHN0cmluZyBjYXNlc1xuXHRcdFx0XHRcdHJldC5yZXBsYWNlKHJyZXR1cm4sIFwiXCIpIDpcblx0XHRcdFx0XHQvLyBIYW5kbGUgY2FzZXMgd2hlcmUgdmFsdWUgaXMgbnVsbC91bmRlZiBvciBudW1iZXJcblx0XHRcdFx0XHRyZXQgPT0gbnVsbCA/IFwiXCIgOiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpc0Z1bmN0aW9uID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIHZhbDtcblxuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaXNGdW5jdGlvbiApIHtcblx0XHRcdFx0dmFsID0gdmFsdWUuY2FsbCggdGhpcywgaSwgalF1ZXJ5KCB0aGlzICkudmFsKCkgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUcmVhdCBudWxsL3VuZGVmaW5lZCBhcyBcIlwiOyBjb252ZXJ0IG51bWJlcnMgdG8gc3RyaW5nXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHR2YWwgPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCB0eXBlb2YgdmFsID09PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHR2YWwgKz0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHR2YWwgPSBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSArIFwiXCI7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXG5cdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgdGhpcy50eXBlIF0gfHwgalF1ZXJ5LnZhbEhvb2tzWyB0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgXTtcblxuXHRcdFx0Ly8gSWYgc2V0IHJldHVybnMgdW5kZWZpbmVkLCBmYWxsIGJhY2sgdG8gbm9ybWFsIHNldHRpbmdcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoXCJzZXRcIiBpbiBob29rcykgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsIFwidmFsdWVcIiApID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHRoaXMudmFsdWUgPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cbn0pO1xuXG5qUXVlcnkuZXh0ZW5kKHtcblx0dmFsSG9va3M6IHtcblx0XHRvcHRpb246IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInZhbHVlXCIgKTtcblx0XHRcdFx0cmV0dXJuIHZhbCAhPSBudWxsID9cblx0XHRcdFx0XHR2YWwgOlxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFMTAtMTErXG5cdFx0XHRcdFx0Ly8gb3B0aW9uLnRleHQgdGhyb3dzIGV4Y2VwdGlvbnMgKCMxNDY4NiwgIzE0ODU4KVxuXHRcdFx0XHRcdGpRdWVyeS50cmltKCBqUXVlcnkudGV4dCggZWxlbSApICk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRzZWxlY3Q6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciB2YWx1ZSwgb3B0aW9uLFxuXHRcdFx0XHRcdG9wdGlvbnMgPSBlbGVtLm9wdGlvbnMsXG5cdFx0XHRcdFx0aW5kZXggPSBlbGVtLnNlbGVjdGVkSW5kZXgsXG5cdFx0XHRcdFx0b25lID0gZWxlbS50eXBlID09PSBcInNlbGVjdC1vbmVcIiB8fCBpbmRleCA8IDAsXG5cdFx0XHRcdFx0dmFsdWVzID0gb25lID8gbnVsbCA6IFtdLFxuXHRcdFx0XHRcdG1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoLFxuXHRcdFx0XHRcdGkgPSBpbmRleCA8IDAgP1xuXHRcdFx0XHRcdFx0bWF4IDpcblx0XHRcdFx0XHRcdG9uZSA/IGluZGV4IDogMDtcblxuXHRcdFx0XHQvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBzZWxlY3RlZCBvcHRpb25zXG5cdFx0XHRcdGZvciAoIDsgaSA8IG1heDsgaSsrICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8vIElFNi05IGRvZXNuJ3QgdXBkYXRlIHNlbGVjdGVkIGFmdGVyIGZvcm0gcmVzZXQgKCMyNTUxKVxuXHRcdFx0XHRcdGlmICggKCBvcHRpb24uc2VsZWN0ZWQgfHwgaSA9PT0gaW5kZXggKSAmJlxuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHRcdFx0XHRcdCggc3VwcG9ydC5vcHREaXNhYmxlZCA/ICFvcHRpb24uZGlzYWJsZWQgOiBvcHRpb24uZ2V0QXR0cmlidXRlKCBcImRpc2FibGVkXCIgKSA9PT0gbnVsbCApICYmXG5cdFx0XHRcdFx0XHRcdCggIW9wdGlvbi5wYXJlbnROb2RlLmRpc2FibGVkIHx8ICFqUXVlcnkubm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIgKSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uXG5cdFx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeSggb3B0aW9uICkudmFsKCk7XG5cblx0XHRcdFx0XHRcdC8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzXG5cdFx0XHRcdFx0XHRpZiAoIG9uZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0dmFsdWVzLnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHR2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLFxuXHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cdFx0XHRcdFx0aWYgKCAob3B0aW9uLnNlbGVjdGVkID0galF1ZXJ5LmluQXJyYXkoIG9wdGlvbi52YWx1ZSwgdmFsdWVzICkgPj0gMCkgKSB7XG5cdFx0XHRcdFx0XHRvcHRpb25TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcmNlIGJyb3dzZXJzIHRvIGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBub24tbWF0Y2hpbmcgdmFsdWUgaXMgc2V0XG5cdFx0XHRcdGlmICggIW9wdGlvblNldCApIHtcblx0XHRcdFx0XHRlbGVtLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSk7XG5cbi8vIFJhZGlvcyBhbmQgY2hlY2tib3hlcyBnZXR0ZXIvc2V0dGVyXG5qUXVlcnkuZWFjaChbIFwicmFkaW9cIiwgXCJjaGVja2JveFwiIF0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXSA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdGlmICggalF1ZXJ5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0uY2hlY2tlZCA9IGpRdWVyeS5pbkFycmF5KCBqUXVlcnkoZWxlbSkudmFsKCksIHZhbHVlICkgPj0gMCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0aWYgKCAhc3VwcG9ydC5jaGVja09uICkge1xuXHRcdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdLmdldCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwidmFsdWVcIikgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG4vLyBSZXR1cm4galF1ZXJ5IGZvciBhdHRyaWJ1dGVzLW9ubHkgaW5jbHVzaW9uXG5cblxualF1ZXJ5LmVhY2goIChcImJsdXIgZm9jdXMgZm9jdXNpbiBmb2N1c291dCBsb2FkIHJlc2l6ZSBzY3JvbGwgdW5sb2FkIGNsaWNrIGRibGNsaWNrIFwiICtcblx0XCJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSBcIiArXG5cdFwiY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiKS5zcGxpdChcIiBcIiksIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXG5cdC8vIEhhbmRsZSBldmVudCBiaW5kaW5nXG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMCA/XG5cdFx0XHR0aGlzLm9uKCBuYW1lLCBudWxsLCBkYXRhLCBmbiApIDpcblx0XHRcdHRoaXMudHJpZ2dlciggbmFtZSApO1xuXHR9O1xufSk7XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7XG5cdFx0cmV0dXJuIHRoaXMubW91c2VlbnRlciggZm5PdmVyICkubW91c2VsZWF2ZSggZm5PdXQgfHwgZm5PdmVyICk7XG5cdH0sXG5cblx0YmluZDogZnVuY3Rpb24oIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIG51bGwsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuYmluZDogZnVuY3Rpb24oIHR5cGVzLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vZmYoIHR5cGVzLCBudWxsLCBmbiApO1xuXHR9LFxuXG5cdGRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmRlbGVnYXRlOiBmdW5jdGlvbiggc2VsZWN0b3IsIHR5cGVzLCBmbiApIHtcblx0XHQvLyAoIG5hbWVzcGFjZSApIG9yICggc2VsZWN0b3IsIHR5cGVzIFssIGZuXSApXG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyB0aGlzLm9mZiggc2VsZWN0b3IsIFwiKipcIiApIDogdGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XG5cdH1cbn0pO1xuXG5cbnZhciBub25jZSA9IGpRdWVyeS5ub3coKTtcblxudmFyIHJxdWVyeSA9ICgvXFw/Lyk7XG5cblxuXG4vLyBTdXBwb3J0OiBBbmRyb2lkIDIuM1xuLy8gV29ya2Fyb3VuZCBmYWlsdXJlIHRvIHN0cmluZy1jYXN0IG51bGwgaW5wdXRcbmpRdWVyeS5wYXJzZUpTT04gPSBmdW5jdGlvbiggZGF0YSApIHtcblx0cmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKyBcIlwiICk7XG59O1xuXG5cbi8vIENyb3NzLWJyb3dzZXIgeG1sIHBhcnNpbmdcbmpRdWVyeS5wYXJzZVhNTCA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHR2YXIgeG1sLCB0bXA7XG5cdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRTlcblx0dHJ5IHtcblx0XHR0bXAgPSBuZXcgRE9NUGFyc2VyKCk7XG5cdFx0eG1sID0gdG1wLnBhcnNlRnJvbVN0cmluZyggZGF0YSwgXCJ0ZXh0L3htbFwiICk7XG5cdH0gY2F0Y2ggKCBlICkge1xuXHRcdHhtbCA9IHVuZGVmaW5lZDtcblx0fVxuXG5cdGlmICggIXhtbCB8fCB4bWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIFwicGFyc2VyZXJyb3JcIiApLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZXJyb3IoIFwiSW52YWxpZCBYTUw6IFwiICsgZGF0YSApO1xuXHR9XG5cdHJldHVybiB4bWw7XG59O1xuXG5cbnZhclxuXHRyaGFzaCA9IC8jLiokLyxcblx0cnRzID0gLyhbPyZdKV89W14mXSovLFxuXHRyaGVhZGVycyA9IC9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvbWcsXG5cdC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuXHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcblx0cnByb3RvY29sID0gL15cXC9cXC8vLFxuXHRydXJsID0gL14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sXG5cblx0LyogUHJlZmlsdGVyc1xuXHQgKiAxKSBUaGV5IGFyZSB1c2VmdWwgdG8gaW50cm9kdWNlIGN1c3RvbSBkYXRhVHlwZXMgKHNlZSBhamF4L2pzb25wLmpzIGZvciBhbiBleGFtcGxlKVxuXHQgKiAyKSBUaGVzZSBhcmUgY2FsbGVkOlxuXHQgKiAgICAtIEJFRk9SRSBhc2tpbmcgZm9yIGEgdHJhbnNwb3J0XG5cdCAqICAgIC0gQUZURVIgcGFyYW0gc2VyaWFsaXphdGlvbiAocy5kYXRhIGlzIGEgc3RyaW5nIGlmIHMucHJvY2Vzc0RhdGEgaXMgdHJ1ZSlcblx0ICogMykga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiA0KSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDUpIGV4ZWN1dGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGNvbnRpbnVlIGRvd24gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHRwcmVmaWx0ZXJzID0ge30sXG5cblx0LyogVHJhbnNwb3J0cyBiaW5kaW5nc1xuXHQgKiAxKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDIpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogMykgc2VsZWN0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gZ28gdG8gXCIqXCIgaWYgbmVlZGVkXG5cdCAqL1xuXHR0cmFuc3BvcnRzID0ge30sXG5cblx0Ly8gQXZvaWQgY29tbWVudC1wcm9sb2cgY2hhciBzZXF1ZW5jZSAoIzEwMDk4KTsgbXVzdCBhcHBlYXNlIGxpbnQgYW5kIGV2YWRlIGNvbXByZXNzaW9uXG5cdGFsbFR5cGVzID0gXCIqL1wiLmNvbmNhdCggXCIqXCIgKSxcblxuXHQvLyBEb2N1bWVudCBsb2NhdGlvblxuXHRhamF4TG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb24uaHJlZixcblxuXHQvLyBTZWdtZW50IGxvY2F0aW9uIGludG8gcGFydHNcblx0YWpheExvY1BhcnRzID0gcnVybC5leGVjKCBhamF4TG9jYXRpb24udG9Mb3dlckNhc2UoKSApIHx8IFtdO1xuXG4vLyBCYXNlIFwiY29uc3RydWN0b3JcIiBmb3IgalF1ZXJ5LmFqYXhQcmVmaWx0ZXIgYW5kIGpRdWVyeS5hamF4VHJhbnNwb3J0XG5mdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSApIHtcblxuXHQvLyBkYXRhVHlwZUV4cHJlc3Npb24gaXMgb3B0aW9uYWwgYW5kIGRlZmF1bHRzIHRvIFwiKlwiXG5cdHJldHVybiBmdW5jdGlvbiggZGF0YVR5cGVFeHByZXNzaW9uLCBmdW5jICkge1xuXG5cdFx0aWYgKCB0eXBlb2YgZGF0YVR5cGVFeHByZXNzaW9uICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0ZnVuYyA9IGRhdGFUeXBlRXhwcmVzc2lvbjtcblx0XHRcdGRhdGFUeXBlRXhwcmVzc2lvbiA9IFwiKlwiO1xuXHRcdH1cblxuXHRcdHZhciBkYXRhVHlwZSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0ZGF0YVR5cGVzID0gZGF0YVR5cGVFeHByZXNzaW9uLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFtdO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZnVuYyApICkge1xuXHRcdFx0Ly8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvblxuXHRcdFx0d2hpbGUgKCAoZGF0YVR5cGUgPSBkYXRhVHlwZXNbaSsrXSkgKSB7XG5cdFx0XHRcdC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmICggZGF0YVR5cGVbMF0gPT09IFwiK1wiICkge1xuXHRcdFx0XHRcdGRhdGFUeXBlID0gZGF0YVR5cGUuc2xpY2UoIDEgKSB8fCBcIipcIjtcblx0XHRcdFx0XHQoc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdKS51bnNoaWZ0KCBmdW5jICk7XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdChzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10pLnB1c2goIGZ1bmMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5mdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG5cdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTtcblxuXHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHR2YXIgc2VsZWN0ZWQ7XG5cdFx0aW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcblx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcblx0XHRcdGlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiYgIXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXHRcdFx0XHRvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdGluc3BlY3QoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIGlmICggc2Vla2luZ1RyYW5zcG9ydCApIHtcblx0XHRcdFx0cmV0dXJuICEoIHNlbGVjdGVkID0gZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdHJldHVybiBzZWxlY3RlZDtcblx0fVxuXG5cdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xufVxuXG4vLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcbi8vIHRoYXQgdGFrZXMgXCJmbGF0XCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpXG4vLyBGaXhlcyAjOTg4N1xuZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdHZhciBrZXksIGRlZXAsXG5cdFx0ZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9O1xuXG5cdGZvciAoIGtleSBpbiBzcmMgKSB7XG5cdFx0aWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoZGVlcCA9IHt9KSApIClbIGtleSBdID0gc3JjWyBrZXkgXTtcblx0XHR9XG5cdH1cblx0aWYgKCBkZWVwICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRydWUsIHRhcmdldCwgZGVlcCApO1xuXHR9XG5cblx0cmV0dXJuIHRhcmdldDtcbn1cblxuLyogSGFuZGxlcyByZXNwb25zZXMgdG8gYW4gYWpheCByZXF1ZXN0OlxuICogLSBmaW5kcyB0aGUgcmlnaHQgZGF0YVR5cGUgKG1lZGlhdGVzIGJldHdlZW4gY29udGVudC10eXBlIGFuZCBleHBlY3RlZCBkYXRhVHlwZSlcbiAqIC0gcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuICovXG5mdW5jdGlvbiBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICkge1xuXG5cdHZhciBjdCwgdHlwZSwgZmluYWxEYXRhVHlwZSwgZmlyc3REYXRhVHlwZSxcblx0XHRjb250ZW50cyA9IHMuY29udGVudHMsXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXM7XG5cblx0Ly8gUmVtb3ZlIGF1dG8gZGF0YVR5cGUgYW5kIGdldCBjb250ZW50LXR5cGUgaW4gdGhlIHByb2Nlc3Ncblx0d2hpbGUgKCBkYXRhVHlwZXNbIDAgXSA9PT0gXCIqXCIgKSB7XG5cdFx0ZGF0YVR5cGVzLnNoaWZ0KCk7XG5cdFx0aWYgKCBjdCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0Y3QgPSBzLm1pbWVUeXBlIHx8IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKFwiQ29udGVudC1UeXBlXCIpO1xuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIGlmIHdlJ3JlIGRlYWxpbmcgd2l0aCBhIGtub3duIGNvbnRlbnQtdHlwZVxuXHRpZiAoIGN0ICkge1xuXHRcdGZvciAoIHR5cGUgaW4gY29udGVudHMgKSB7XG5cdFx0XHRpZiAoIGNvbnRlbnRzWyB0eXBlIF0gJiYgY29udGVudHNbIHR5cGUgXS50ZXN0KCBjdCApICkge1xuXHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdHlwZSApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHJlc3BvbnNlIGZvciB0aGUgZXhwZWN0ZWQgZGF0YVR5cGVcblx0aWYgKCBkYXRhVHlwZXNbIDAgXSBpbiByZXNwb25zZXMgKSB7XG5cdFx0ZmluYWxEYXRhVHlwZSA9IGRhdGFUeXBlc1sgMCBdO1xuXHR9IGVsc2Uge1xuXHRcdC8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXNcblx0XHRmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHtcblx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWzBdIF0gKSB7XG5cdFx0XHRcdGZpbmFsRGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmICggIWZpcnN0RGF0YVR5cGUgKSB7XG5cdFx0XHRcdGZpcnN0RGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0fVxuXHRcdH1cblx0XHQvLyBPciBqdXN0IHVzZSBmaXJzdCBvbmVcblx0XHRmaW5hbERhdGFUeXBlID0gZmluYWxEYXRhVHlwZSB8fCBmaXJzdERhdGFUeXBlO1xuXHR9XG5cblx0Ly8gSWYgd2UgZm91bmQgYSBkYXRhVHlwZVxuXHQvLyBXZSBhZGQgdGhlIGRhdGFUeXBlIHRvIHRoZSBsaXN0IGlmIG5lZWRlZFxuXHQvLyBhbmQgcmV0dXJuIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG5cdGlmICggZmluYWxEYXRhVHlwZSApIHtcblx0XHRpZiAoIGZpbmFsRGF0YVR5cGUgIT09IGRhdGFUeXBlc1sgMCBdICkge1xuXHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIGZpbmFsRGF0YVR5cGUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlc3BvbnNlc1sgZmluYWxEYXRhVHlwZSBdO1xuXHR9XG59XG5cbi8qIENoYWluIGNvbnZlcnNpb25zIGdpdmVuIHRoZSByZXF1ZXN0IGFuZCB0aGUgb3JpZ2luYWwgcmVzcG9uc2VcbiAqIEFsc28gc2V0cyB0aGUgcmVzcG9uc2VYWFggZmllbGRzIG9uIHRoZSBqcVhIUiBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKSB7XG5cdHZhciBjb252MiwgY3VycmVudCwgY29udiwgdG1wLCBwcmV2LFxuXHRcdGNvbnZlcnRlcnMgPSB7fSxcblx0XHQvLyBXb3JrIHdpdGggYSBjb3B5IG9mIGRhdGFUeXBlcyBpbiBjYXNlIHdlIG5lZWQgdG8gbW9kaWZ5IGl0IGZvciBjb252ZXJzaW9uXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTtcblxuXHQvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXNcblx0aWYgKCBkYXRhVHlwZXNbIDEgXSApIHtcblx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdGNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07XG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG5cdHdoaWxlICggY3VycmVudCApIHtcblxuXHRcdGlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkge1xuXHRcdFx0anFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWRcblx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTtcblx0XHR9XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0XHRpZiAoIGN1cnJlbnQgKSB7XG5cblx0XHQvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvXG5cdFx0XHRpZiAoIGN1cnJlbnQgPT09IFwiKlwiICkge1xuXG5cdFx0XHRcdGN1cnJlbnQgPSBwcmV2O1xuXG5cdFx0XHQvLyBDb252ZXJ0IHJlc3BvbnNlIGlmIHByZXYgZGF0YVR5cGUgaXMgbm9uLWF1dG8gYW5kIGRpZmZlcnMgZnJvbSBjdXJyZW50XG5cdFx0XHR9IGVsc2UgaWYgKCBwcmV2ICE9PSBcIipcIiAmJiBwcmV2ICE9PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdC8vIFNlZWsgYSBkaXJlY3QgY29udmVydGVyXG5cdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyBjdXJyZW50IF0gfHwgY29udmVydGVyc1sgXCIqIFwiICsgY3VycmVudCBdO1xuXG5cdFx0XHRcdC8vIElmIG5vbmUgZm91bmQsIHNlZWsgYSBwYWlyXG5cdFx0XHRcdGlmICggIWNvbnYgKSB7XG5cdFx0XHRcdFx0Zm9yICggY29udjIgaW4gY29udmVydGVycyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSWYgY29udjIgb3V0cHV0cyBjdXJyZW50XG5cdFx0XHRcdFx0XHR0bXAgPSBjb252Mi5zcGxpdCggXCIgXCIgKTtcblx0XHRcdFx0XHRcdGlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gSWYgcHJldiBjYW4gYmUgY29udmVydGVkIHRvIGFjY2VwdGVkIGlucHV0XG5cdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyB0bXBbIDAgXSBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0Y29udmVydGVyc1sgXCIqIFwiICsgdG1wWyAwIF0gXTtcblx0XHRcdFx0XHRcdFx0aWYgKCBjb252ICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIENvbmRlbnNlIGVxdWl2YWxlbmNlIGNvbnZlcnRlcnNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgPT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb252ID0gY29udmVydGVyc1sgY29udjIgXTtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSwgaW5zZXJ0IHRoZSBpbnRlcm1lZGlhdGUgZGF0YVR5cGVcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCBjb252ZXJ0ZXJzWyBjb252MiBdICE9PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3VycmVudCA9IHRtcFsgMCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHRtcFsgMSBdICk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQXBwbHkgY29udmVydGVyIChpZiBub3QgYW4gZXF1aXZhbGVuY2UpXG5cdFx0XHRcdGlmICggY29udiAhPT0gdHJ1ZSApIHtcblxuXHRcdFx0XHRcdC8vIFVubGVzcyBlcnJvcnMgYXJlIGFsbG93ZWQgdG8gYnViYmxlLCBjYXRjaCBhbmQgcmV0dXJuIHRoZW1cblx0XHRcdFx0XHRpZiAoIGNvbnYgJiYgc1sgXCJ0aHJvd3NcIiBdICkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHsgc3RhdGU6IFwicGFyc2VyZXJyb3JcIiwgZXJyb3I6IGNvbnYgPyBlIDogXCJObyBjb252ZXJzaW9uIGZyb20gXCIgKyBwcmV2ICsgXCIgdG8gXCIgKyBjdXJyZW50IH07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHsgc3RhdGU6IFwic3VjY2Vzc1wiLCBkYXRhOiByZXNwb25zZSB9O1xufVxuXG5qUXVlcnkuZXh0ZW5kKHtcblxuXHQvLyBDb3VudGVyIGZvciBob2xkaW5nIHRoZSBudW1iZXIgb2YgYWN0aXZlIHF1ZXJpZXNcblx0YWN0aXZlOiAwLFxuXG5cdC8vIExhc3QtTW9kaWZpZWQgaGVhZGVyIGNhY2hlIGZvciBuZXh0IHJlcXVlc3Rcblx0bGFzdE1vZGlmaWVkOiB7fSxcblx0ZXRhZzoge30sXG5cblx0YWpheFNldHRpbmdzOiB7XG5cdFx0dXJsOiBhamF4TG9jYXRpb24sXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBhamF4TG9jUGFydHNbIDEgXSApLFxuXHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRwcm9jZXNzRGF0YTogdHJ1ZSxcblx0XHRhc3luYzogdHJ1ZSxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblx0XHQvKlxuXHRcdHRpbWVvdXQ6IDAsXG5cdFx0ZGF0YTogbnVsbCxcblx0XHRkYXRhVHlwZTogbnVsbCxcblx0XHR1c2VybmFtZTogbnVsbCxcblx0XHRwYXNzd29yZDogbnVsbCxcblx0XHRjYWNoZTogbnVsbCxcblx0XHR0aHJvd3M6IGZhbHNlLFxuXHRcdHRyYWRpdGlvbmFsOiBmYWxzZSxcblx0XHRoZWFkZXJzOiB7fSxcblx0XHQqL1xuXG5cdFx0YWNjZXB0czoge1xuXHRcdFx0XCIqXCI6IGFsbFR5cGVzLFxuXHRcdFx0dGV4dDogXCJ0ZXh0L3BsYWluXCIsXG5cdFx0XHRodG1sOiBcInRleHQvaHRtbFwiLFxuXHRcdFx0eG1sOiBcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixcblx0XHRcdGpzb246IFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJcblx0XHR9LFxuXG5cdFx0Y29udGVudHM6IHtcblx0XHRcdHhtbDogL3htbC8sXG5cdFx0XHRodG1sOiAvaHRtbC8sXG5cdFx0XHRqc29uOiAvanNvbi9cblx0XHR9LFxuXG5cdFx0cmVzcG9uc2VGaWVsZHM6IHtcblx0XHRcdHhtbDogXCJyZXNwb25zZVhNTFwiLFxuXHRcdFx0dGV4dDogXCJyZXNwb25zZVRleHRcIixcblx0XHRcdGpzb246IFwicmVzcG9uc2VKU09OXCJcblx0XHR9LFxuXG5cdFx0Ly8gRGF0YSBjb252ZXJ0ZXJzXG5cdFx0Ly8gS2V5cyBzZXBhcmF0ZSBzb3VyY2UgKG9yIGNhdGNoYWxsIFwiKlwiKSBhbmQgZGVzdGluYXRpb24gdHlwZXMgd2l0aCBhIHNpbmdsZSBzcGFjZVxuXHRcdGNvbnZlcnRlcnM6IHtcblxuXHRcdFx0Ly8gQ29udmVydCBhbnl0aGluZyB0byB0ZXh0XG5cdFx0XHRcIiogdGV4dFwiOiBTdHJpbmcsXG5cblx0XHRcdC8vIFRleHQgdG8gaHRtbCAodHJ1ZSA9IG5vIHRyYW5zZm9ybWF0aW9uKVxuXHRcdFx0XCJ0ZXh0IGh0bWxcIjogdHJ1ZSxcblxuXHRcdFx0Ly8gRXZhbHVhdGUgdGV4dCBhcyBhIGpzb24gZXhwcmVzc2lvblxuXHRcdFx0XCJ0ZXh0IGpzb25cIjogalF1ZXJ5LnBhcnNlSlNPTixcblxuXHRcdFx0Ly8gUGFyc2UgdGV4dCBhcyB4bWxcblx0XHRcdFwidGV4dCB4bWxcIjogalF1ZXJ5LnBhcnNlWE1MXG5cdFx0fSxcblxuXHRcdC8vIEZvciBvcHRpb25zIHRoYXQgc2hvdWxkbid0IGJlIGRlZXAgZXh0ZW5kZWQ6XG5cdFx0Ly8geW91IGNhbiBhZGQgeW91ciBvd24gY3VzdG9tIG9wdGlvbnMgaGVyZSBpZlxuXHRcdC8vIGFuZCB3aGVuIHlvdSBjcmVhdGUgb25lIHRoYXQgc2hvdWxkbid0IGJlXG5cdFx0Ly8gZGVlcCBleHRlbmRlZCAoc2VlIGFqYXhFeHRlbmQpXG5cdFx0ZmxhdE9wdGlvbnM6IHtcblx0XHRcdHVybDogdHJ1ZSxcblx0XHRcdGNvbnRleHQ6IHRydWVcblx0XHR9XG5cdH0sXG5cblx0Ly8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXRcblx0Ly8gd2l0aCBib3RoIGFqYXhTZXR0aW5ncyBhbmQgc2V0dGluZ3MgZmllbGRzLlxuXHQvLyBJZiB0YXJnZXQgaXMgb21pdHRlZCwgd3JpdGVzIGludG8gYWpheFNldHRpbmdzLlxuXHRhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkge1xuXHRcdHJldHVybiBzZXR0aW5ncyA/XG5cblx0XHRcdC8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0XG5cdFx0XHRhamF4RXh0ZW5kKCBhamF4RXh0ZW5kKCB0YXJnZXQsIGpRdWVyeS5hamF4U2V0dGluZ3MgKSwgc2V0dGluZ3MgKSA6XG5cblx0XHRcdC8vIEV4dGVuZGluZyBhamF4U2V0dGluZ3Ncblx0XHRcdGFqYXhFeHRlbmQoIGpRdWVyeS5hamF4U2V0dGluZ3MsIHRhcmdldCApO1xuXHR9LFxuXG5cdGFqYXhQcmVmaWx0ZXI6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycyApLFxuXHRhamF4VHJhbnNwb3J0OiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMgKSxcblxuXHQvLyBNYWluIG1ldGhvZFxuXHRhamF4OiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkge1xuXG5cdFx0Ly8gSWYgdXJsIGlzIGFuIG9iamVjdCwgc2ltdWxhdGUgcHJlLTEuNSBzaWduYXR1cmVcblx0XHRpZiAoIHR5cGVvZiB1cmwgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRvcHRpb25zID0gdXJsO1xuXHRcdFx0dXJsID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIEZvcmNlIG9wdGlvbnMgdG8gYmUgYW4gb2JqZWN0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0XHR2YXIgdHJhbnNwb3J0LFxuXHRcdFx0Ly8gVVJMIHdpdGhvdXQgYW50aS1jYWNoZSBwYXJhbVxuXHRcdFx0Y2FjaGVVUkwsXG5cdFx0XHQvLyBSZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRyZXNwb25zZUhlYWRlcnMsXG5cdFx0XHQvLyB0aW1lb3V0IGhhbmRsZVxuXHRcdFx0dGltZW91dFRpbWVyLFxuXHRcdFx0Ly8gQ3Jvc3MtZG9tYWluIGRldGVjdGlvbiB2YXJzXG5cdFx0XHRwYXJ0cyxcblx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0ZmlyZUdsb2JhbHMsXG5cdFx0XHQvLyBMb29wIHZhcmlhYmxlXG5cdFx0XHRpLFxuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBmaW5hbCBvcHRpb25zIG9iamVjdFxuXHRcdFx0cyA9IGpRdWVyeS5hamF4U2V0dXAoIHt9LCBvcHRpb25zICksXG5cdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cdFx0XHQvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uXG5cdFx0XHRnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiYgKCBjYWxsYmFja0NvbnRleHQubm9kZVR5cGUgfHwgY2FsbGJhY2tDb250ZXh0LmpxdWVyeSApID9cblx0XHRcdFx0alF1ZXJ5KCBjYWxsYmFja0NvbnRleHQgKSA6XG5cdFx0XHRcdGpRdWVyeS5ldmVudCxcblx0XHRcdC8vIERlZmVycmVkc1xuXHRcdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0c3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcblx0XHRcdC8vIEhlYWRlcnMgKHRoZXkgYXJlIHNlbnQgYWxsIGF0IG9uY2UpXG5cdFx0XHRyZXF1ZXN0SGVhZGVycyA9IHt9LFxuXHRcdFx0cmVxdWVzdEhlYWRlcnNOYW1lcyA9IHt9LFxuXHRcdFx0Ly8gVGhlIGpxWEhSIHN0YXRlXG5cdFx0XHRzdGF0ZSA9IDAsXG5cdFx0XHQvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2Vcblx0XHRcdHN0ckFib3J0ID0gXCJjYW5jZWxlZFwiLFxuXHRcdFx0Ly8gRmFrZSB4aHJcblx0XHRcdGpxWEhSID0ge1xuXHRcdFx0XHRyZWFkeVN0YXRlOiAwLFxuXG5cdFx0XHRcdC8vIEJ1aWxkcyBoZWFkZXJzIGhhc2h0YWJsZSBpZiBuZWVkZWRcblx0XHRcdFx0Z2V0UmVzcG9uc2VIZWFkZXI6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0XHRcdFx0dmFyIG1hdGNoO1xuXHRcdFx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICFyZXNwb25zZUhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlSGVhZGVycyA9IHt9O1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXNwb25zZUhlYWRlcnNbIG1hdGNoWzFdLnRvTG93ZXJDYXNlKCkgXSA9IG1hdGNoWyAyIF07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdG1hdGNoID0gcmVzcG9uc2VIZWFkZXJzWyBrZXkudG9Mb3dlckNhc2UoKSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlID09PSAyID8gcmVzcG9uc2VIZWFkZXJzU3RyaW5nIDogbnVsbDtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYWNoZXMgdGhlIGhlYWRlclxuXHRcdFx0XHRzZXRSZXF1ZXN0SGVhZGVyOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0dmFyIGxuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0bmFtZSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIGxuYW1lIF0gPSByZXF1ZXN0SGVhZGVyc05hbWVzWyBsbmFtZSBdIHx8IG5hbWU7XG5cdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc1sgbmFtZSBdID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIE92ZXJyaWRlcyByZXNwb25zZSBjb250ZW50LXR5cGUgaGVhZGVyXG5cdFx0XHRcdG92ZXJyaWRlTWltZVR5cGU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdGlmICggIXN0YXRlICkge1xuXHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0aWYgKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRcdFx0Zm9yICggY29kZSBpbiBtYXAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gTGF6eS1hZGQgdGhlIG5ldyBjYWxsYmFjayBpbiBhIHdheSB0aGF0IHByZXNlcnZlcyBvbGQgb25lc1xuXHRcdFx0XHRcdFx0XHRcdHN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApLmNvbXBsZXRlID0gY29tcGxldGVEZWZlcnJlZC5hZGQ7XG5cdFx0anFYSFIuc3VjY2VzcyA9IGpxWEhSLmRvbmU7XG5cdFx0anFYSFIuZXJyb3IgPSBqcVhIUi5mYWlsO1xuXG5cdFx0Ly8gUmVtb3ZlIGhhc2ggY2hhcmFjdGVyICgjNzUzMTogYW5kIHN0cmluZyBwcm9tb3Rpb24pXG5cdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHQvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGVcblx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgYWpheExvY2F0aW9uICkgKyBcIlwiICkucmVwbGFjZSggcmhhc2gsIFwiXCIgKVxuXHRcdFx0LnJlcGxhY2UoIHJwcm90b2NvbCwgYWpheExvY1BhcnRzWyAxIF0gKyBcIi8vXCIgKTtcblxuXHRcdC8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNFxuXHRcdHMudHlwZSA9IG9wdGlvbnMubWV0aG9kIHx8IG9wdGlvbnMudHlwZSB8fCBzLm1ldGhvZCB8fCBzLnR5cGU7XG5cblx0XHQvLyBFeHRyYWN0IGRhdGFUeXBlcyBsaXN0XG5cdFx0cy5kYXRhVHlwZXMgPSBqUXVlcnkudHJpbSggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3R3aGl0ZSApIHx8IFsgXCJcIiBdO1xuXG5cdFx0Ly8gQSBjcm9zcy1kb21haW4gcmVxdWVzdCBpcyBpbiBvcmRlciB3aGVuIHdlIGhhdmUgYSBwcm90b2NvbDpob3N0OnBvcnQgbWlzbWF0Y2hcblx0XHRpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHtcblx0XHRcdHBhcnRzID0gcnVybC5leGVjKCBzLnVybC50b0xvd2VyQ2FzZSgpICk7XG5cdFx0XHRzLmNyb3NzRG9tYWluID0gISEoIHBhcnRzICYmXG5cdFx0XHRcdCggcGFydHNbIDEgXSAhPT0gYWpheExvY1BhcnRzWyAxIF0gfHwgcGFydHNbIDIgXSAhPT0gYWpheExvY1BhcnRzWyAyIF0gfHxcblx0XHRcdFx0XHQoIHBhcnRzWyAzIF0gfHwgKCBwYXJ0c1sgMSBdID09PSBcImh0dHA6XCIgPyBcIjgwXCIgOiBcIjQ0M1wiICkgKSAhPT1cblx0XHRcdFx0XHRcdCggYWpheExvY1BhcnRzWyAzIF0gfHwgKCBhamF4TG9jUGFydHNbIDEgXSA9PT0gXCJodHRwOlwiID8gXCI4MFwiIDogXCI0NDNcIiApICkgKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcblx0XHRpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHByZWZpbHRlcnNcblx0XHRpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlXG5cdFx0aWYgKCBzdGF0ZSA9PT0gMiApIHtcblx0XHRcdHJldHVybiBqcVhIUjtcblx0XHR9XG5cblx0XHQvLyBXZSBjYW4gZmlyZSBnbG9iYWwgZXZlbnRzIGFzIG9mIG5vdyBpZiBhc2tlZCB0b1xuXHRcdC8vIERvbid0IGZpcmUgZXZlbnRzIGlmIGpRdWVyeS5ldmVudCBpcyB1bmRlZmluZWQgaW4gYW4gQU1ELXVzYWdlIHNjZW5hcmlvICgjMTUxMTgpXG5cdFx0ZmlyZUdsb2JhbHMgPSBqUXVlcnkuZXZlbnQgJiYgcy5nbG9iYWw7XG5cblx0XHQvLyBXYXRjaCBmb3IgYSBuZXcgc2V0IG9mIHJlcXVlc3RzXG5cdFx0aWYgKCBmaXJlR2xvYmFscyAmJiBqUXVlcnkuYWN0aXZlKysgPT09IDAgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdGFydFwiKTtcblx0XHR9XG5cblx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cblx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHRjYWNoZVVSTCA9IHMudXJsO1xuXG5cdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cblx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdGlmICggcy5kYXRhICkge1xuXHRcdFx0XHRjYWNoZVVSTCA9ICggcy51cmwgKz0gKCBycXVlcnkudGVzdCggY2FjaGVVUkwgKSA/IFwiJlwiIDogXCI/XCIgKSArIHMuZGF0YSApO1xuXHRcdFx0XHQvLyAjOTY4MjogcmVtb3ZlIGRhdGEgc28gdGhhdCBpdCdzIG5vdCB1c2VkIGluIGFuIGV2ZW50dWFsIHJldHJ5XG5cdFx0XHRcdGRlbGV0ZSBzLmRhdGE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFkZCBhbnRpLWNhY2hlIGluIHVybCBpZiBuZWVkZWRcblx0XHRcdGlmICggcy5jYWNoZSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdHMudXJsID0gcnRzLnRlc3QoIGNhY2hlVVJMICkgP1xuXG5cdFx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYWxyZWFkeSBhICdfJyBwYXJhbWV0ZXIsIHNldCBpdHMgdmFsdWVcblx0XHRcdFx0XHRjYWNoZVVSTC5yZXBsYWNlKCBydHMsIFwiJDFfPVwiICsgbm9uY2UrKyApIDpcblxuXHRcdFx0XHRcdC8vIE90aGVyd2lzZSBhZGQgb25lIHRvIHRoZSBlbmRcblx0XHRcdFx0XHRjYWNoZVVSTCArICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyBub25jZSsrO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG5cdFx0XHRcIkFjY2VwdFwiLFxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gP1xuXHRcdFx0XHRzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWzBdIF0gKyAoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuXHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHQpO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcblx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJiAoIHMuYmVmb3JlU2VuZC5jYWxsKCBjYWxsYmFja0NvbnRleHQsIGpxWEhSLCBzICkgPT09IGZhbHNlIHx8IHN0YXRlID09PSAyICkgKSB7XG5cdFx0XHQvLyBBYm9ydCBpZiBub3QgZG9uZSBhbHJlYWR5IGFuZCByZXR1cm5cblx0XHRcdHJldHVybiBqcVhIUi5hYm9ydCgpO1xuXHRcdH1cblxuXHRcdC8vIEFib3J0aW5nIGlzIG5vIGxvbmdlciBhIGNhbmNlbGxhdGlvblxuXHRcdHN0ckFib3J0ID0gXCJhYm9ydFwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja3Mgb24gZGVmZXJyZWRzXG5cdFx0Zm9yICggaSBpbiB7IHN1Y2Nlc3M6IDEsIGVycm9yOiAxLCBjb21wbGV0ZTogMSB9ICkge1xuXHRcdFx0anFYSFJbIGkgXSggc1sgaSBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0aWYgKCAhdHJhbnNwb3J0ICkge1xuXHRcdFx0ZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cblx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdH1cblx0XHRcdC8vIFRpbWVvdXRcblx0XHRcdGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuXHRcdFx0XHR0aW1lb3V0VGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGpxWEhSLmFib3J0KFwidGltZW91dFwiKTtcblx0XHRcdFx0fSwgcy50aW1lb3V0ICk7XG5cdFx0XHR9XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHN0YXRlID0gMTtcblx0XHRcdFx0dHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0Ly8gUHJvcGFnYXRlIGV4Y2VwdGlvbiBhcyBlcnJvciBpZiBub3QgZG9uZVxuXHRcdFx0XHRpZiAoIHN0YXRlIDwgMiApIHtcblx0XHRcdFx0XHRkb25lKCAtMSwgZSApO1xuXHRcdFx0XHQvLyBTaW1wbHkgcmV0aHJvdyBvdGhlcndpc2Vcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lXG5cdFx0ZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7XG5cdFx0XHR2YXIgaXNTdWNjZXNzLCBzdWNjZXNzLCBlcnJvciwgcmVzcG9uc2UsIG1vZGlmaWVkLFxuXHRcdFx0XHRzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDtcblxuXHRcdFx0Ly8gQ2FsbGVkIG9uY2Vcblx0XHRcdGlmICggc3RhdGUgPT09IDIgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdGUgaXMgXCJkb25lXCIgbm93XG5cdFx0XHRzdGF0ZSA9IDI7XG5cblx0XHRcdC8vIENsZWFyIHRpbWVvdXQgaWYgaXQgZXhpc3RzXG5cdFx0XHRpZiAoIHRpbWVvdXRUaW1lciApIHtcblx0XHRcdFx0Y2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGVyZWZlcmVuY2UgdHJhbnNwb3J0IGZvciBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb25cblx0XHRcdC8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpXG5cdFx0XHR0cmFuc3BvcnQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdC8vIENhY2hlIHJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgXCJcIjtcblxuXHRcdFx0Ly8gU2V0IHJlYWR5U3RhdGVcblx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSBzdGF0dXMgPiAwID8gNCA6IDA7XG5cblx0XHRcdC8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsXG5cdFx0XHRpc1N1Y2Nlc3MgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCB8fCBzdGF0dXMgPT09IDMwNDtcblxuXHRcdFx0Ly8gR2V0IHJlc3BvbnNlIGRhdGFcblx0XHRcdGlmICggcmVzcG9uc2VzICkge1xuXHRcdFx0XHRyZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udmVydCBubyBtYXR0ZXIgd2hhdCAodGhhdCB3YXkgcmVzcG9uc2VYWFggZmllbGRzIGFyZSBhbHdheXMgc2V0KVxuXHRcdFx0cmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTtcblxuXHRcdFx0Ly8gSWYgc3VjY2Vzc2Z1bCwgaGFuZGxlIHR5cGUgY2hhaW5pbmdcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXG5cdFx0XHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0XHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJMYXN0LU1vZGlmaWVkXCIpO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdID0gbW9kaWZpZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJldGFnXCIpO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIG5vIGNvbnRlbnRcblx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09IFwiSEVBRFwiICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG5cdFx0XHRcdC8vIGlmIG5vdCBtb2RpZmllZFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcblx0XHRcdFx0XHRzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuXHRcdFx0XHRcdGlzU3VjY2VzcyA9ICFlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gRXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHQgYW5kIG5vcm1hbGl6ZSBmb3Igbm9uLWFib3J0c1xuXHRcdFx0XHRlcnJvciA9IHN0YXR1c1RleHQ7XG5cdFx0XHRcdGlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcImVycm9yXCI7XG5cdFx0XHRcdFx0aWYgKCBzdGF0dXMgPCAwICkge1xuXHRcdFx0XHRcdFx0c3RhdHVzID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGRhdGEgZm9yIHRoZSBmYWtlIHhociBvYmplY3Rcblx0XHRcdGpxWEhSLnN0YXR1cyA9IHN0YXR1cztcblx0XHRcdGpxWEhSLnN0YXR1c1RleHQgPSAoIG5hdGl2ZVN0YXR1c1RleHQgfHwgc3RhdHVzVGV4dCApICsgXCJcIjtcblxuXHRcdFx0Ly8gU3VjY2Vzcy9FcnJvclxuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsgc3VjY2Vzcywgc3RhdHVzVGV4dCwganFYSFIgXSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0LCBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRqcVhIUi5zdGF0dXNDb2RlKCBzdGF0dXNDb2RlICk7XG5cdFx0XHRzdGF0dXNDb2RlID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggaXNTdWNjZXNzID8gXCJhamF4U3VjY2Vzc1wiIDogXCJhamF4RXJyb3JcIixcblx0XHRcdFx0XHRbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb21wbGV0ZVxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZC5maXJlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0IF0gKTtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheENvbXBsZXRlXCIsIFsganFYSFIsIHMgXSApO1xuXHRcdFx0XHQvLyBIYW5kbGUgdGhlIGdsb2JhbCBBSkFYIGNvdW50ZXJcblx0XHRcdFx0aWYgKCAhKCAtLWpRdWVyeS5hY3RpdmUgKSApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcihcImFqYXhTdG9wXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpxWEhSO1xuXHR9LFxuXG5cdGdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBcImpzb25cIiApO1xuXHR9LFxuXG5cdGdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuXHR9XG59KTtcblxualF1ZXJ5LmVhY2goIFsgXCJnZXRcIiwgXCJwb3N0XCIgXSwgZnVuY3Rpb24oIGksIG1ldGhvZCApIHtcblx0alF1ZXJ5WyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrLCB0eXBlICkge1xuXHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggZGF0YSApICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgY2FsbGJhY2s7XG5cdFx0XHRjYWxsYmFjayA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkuYWpheCh7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSk7XG5cdH07XG59KTtcblxuXG5qUXVlcnkuX2V2YWxVcmwgPSBmdW5jdGlvbiggdXJsICkge1xuXHRyZXR1cm4galF1ZXJ5LmFqYXgoe1xuXHRcdHVybDogdXJsLFxuXHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0ZGF0YVR5cGU6IFwic2NyaXB0XCIsXG5cdFx0YXN5bmM6IGZhbHNlLFxuXHRcdGdsb2JhbDogZmFsc2UsXG5cdFx0XCJ0aHJvd3NcIjogdHJ1ZVxuXHR9KTtcbn07XG5cblxualF1ZXJ5LmZuLmV4dGVuZCh7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRpZiAoIHRoaXNbIDAgXSApIHtcblxuXHRcdFx0Ly8gVGhlIGVsZW1lbnRzIHRvIHdyYXAgdGhlIHRhcmdldCBhcm91bmRcblx0XHRcdHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApO1xuXG5cdFx0XHRpZiAoIHRoaXNbIDAgXS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR3cmFwLmluc2VydEJlZm9yZSggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHdyYXAubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IHRoaXM7XG5cblx0XHRcdFx0d2hpbGUgKCBlbGVtLmZpcnN0RWxlbWVudENoaWxkICkge1xuXHRcdFx0XHRcdGVsZW0gPSBlbGVtLmZpcnN0RWxlbWVudENoaWxkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIGVsZW07XG5cdFx0XHR9KS5hcHBlbmQoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdGlmICggalF1ZXJ5LmlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKHRoaXMsIGkpICk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cblx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH0sXG5cblx0d3JhcDogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0dmFyIGlzRnVuY3Rpb24gPSBqUXVlcnkuaXNGdW5jdGlvbiggaHRtbCApO1xuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGlzRnVuY3Rpb24gPyBodG1sLmNhbGwodGhpcywgaSkgOiBodG1sICk7XG5cdFx0fSk7XG5cdH0sXG5cblx0dW53cmFwOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhalF1ZXJ5Lm5vZGVOYW1lKCB0aGlzLCBcImJvZHlcIiApICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZXBsYWNlV2l0aCggdGhpcy5jaGlsZE5vZGVzICk7XG5cdFx0XHR9XG5cdFx0fSkuZW5kKCk7XG5cdH1cbn0pO1xuXG5cbmpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdC8vIFN1cHBvcnQ6IE9wZXJhIDw9IDEyLjEyXG5cdC8vIE9wZXJhIHJlcG9ydHMgb2Zmc2V0V2lkdGhzIGFuZCBvZmZzZXRIZWlnaHRzIGxlc3MgdGhhbiB6ZXJvIG9uIHNvbWUgZWxlbWVudHNcblx0cmV0dXJuIGVsZW0ub2Zmc2V0V2lkdGggPD0gMCAmJiBlbGVtLm9mZnNldEhlaWdodCA8PSAwO1xufTtcbmpRdWVyeS5leHByLmZpbHRlcnMudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gIWpRdWVyeS5leHByLmZpbHRlcnMuaGlkZGVuKCBlbGVtICk7XG59O1xuXG5cblxuXG52YXIgcjIwID0gLyUyMC9nLFxuXHRyYnJhY2tldCA9IC9cXFtcXF0kLyxcblx0ckNSTEYgPSAvXFxyP1xcbi9nLFxuXHRyc3VibWl0dGVyVHlwZXMgPSAvXig/OnN1Ym1pdHxidXR0b258aW1hZ2V8cmVzZXR8ZmlsZSkkL2ksXG5cdHJzdWJtaXR0YWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGtleWdlbikvaTtcblxuZnVuY3Rpb24gYnVpbGRQYXJhbXMoIHByZWZpeCwgb2JqLCB0cmFkaXRpb25hbCwgYWRkICkge1xuXHR2YXIgbmFtZTtcblxuXHRpZiAoIGpRdWVyeS5pc0FycmF5KCBvYmogKSApIHtcblx0XHQvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cblx0XHRqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHtcblx0XHRcdGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG5cdFx0XHRcdC8vIFRyZWF0IGVhY2ggYXJyYXkgaXRlbSBhcyBhIHNjYWxhci5cblx0XHRcdFx0YWRkKCBwcmVmaXgsIHYgKTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG5cdFx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgPyBpIDogXCJcIiApICsgXCJdXCIsIHYsIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHR9IGVsc2UgaWYgKCAhdHJhZGl0aW9uYWwgJiYgalF1ZXJ5LnR5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuXHRcdC8vIFNlcmlhbGl6ZSBvYmplY3QgaXRlbS5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXggKyBcIltcIiArIG5hbWUgKyBcIl1cIiwgb2JqWyBuYW1lIF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cblx0fSBlbHNlIHtcblx0XHQvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uXG5cdFx0YWRkKCBwcmVmaXgsIG9iaiApO1xuXHR9XG59XG5cbi8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mXG4vLyBrZXkvdmFsdWVzIGludG8gYSBxdWVyeSBzdHJpbmdcbmpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHtcblx0dmFyIHByZWZpeCxcblx0XHRzID0gW10sXG5cdFx0YWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0XHQvLyBJZiB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBpbnZva2UgaXQgYW5kIHJldHVybiBpdHMgdmFsdWVcblx0XHRcdHZhbHVlID0galF1ZXJ5LmlzRnVuY3Rpb24oIHZhbHVlICkgPyB2YWx1ZSgpIDogKCB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICk7XG5cdFx0XHRzWyBzLmxlbmd0aCBdID0gZW5jb2RlVVJJQ29tcG9uZW50KCBrZXkgKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSApO1xuXHRcdH07XG5cblx0Ly8gU2V0IHRyYWRpdGlvbmFsIHRvIHRydWUgZm9yIGpRdWVyeSA8PSAxLjMuMiBiZWhhdmlvci5cblx0aWYgKCB0cmFkaXRpb25hbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdHRyYWRpdGlvbmFsID0galF1ZXJ5LmFqYXhTZXR0aW5ncyAmJiBqUXVlcnkuYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsO1xuXHR9XG5cblx0Ly8gSWYgYW4gYXJyYXkgd2FzIHBhc3NlZCBpbiwgYXNzdW1lIHRoYXQgaXQgaXMgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cy5cblx0aWYgKCBqUXVlcnkuaXNBcnJheSggYSApIHx8ICggYS5qcXVlcnkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBhICkgKSApIHtcblx0XHQvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHNcblx0XHRqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRhZGQoIHRoaXMubmFtZSwgdGhpcy52YWx1ZSApO1xuXHRcdH0pO1xuXG5cdH0gZWxzZSB7XG5cdFx0Ly8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcblx0XHQvLyBkaWQgaXQpLCBvdGhlcndpc2UgZW5jb2RlIHBhcmFtcyByZWN1cnNpdmVseS5cblx0XHRmb3IgKCBwcmVmaXggaW4gYSApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvblxuXHRyZXR1cm4gcy5qb2luKCBcIiZcIiApLnJlcGxhY2UoIHIyMCwgXCIrXCIgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoe1xuXHRzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnkucGFyYW0oIHRoaXMuc2VyaWFsaXplQXJyYXkoKSApO1xuXHR9LFxuXHRzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0Ly8gQ2FuIGFkZCBwcm9wSG9vayBmb3IgXCJlbGVtZW50c1wiIHRvIGZpbHRlciBvciBhZGQgZm9ybSBlbGVtZW50c1xuXHRcdFx0dmFyIGVsZW1lbnRzID0galF1ZXJ5LnByb3AoIHRoaXMsIFwiZWxlbWVudHNcIiApO1xuXHRcdFx0cmV0dXJuIGVsZW1lbnRzID8galF1ZXJ5Lm1ha2VBcnJheSggZWxlbWVudHMgKSA6IHRoaXM7XG5cdFx0fSlcblx0XHQuZmlsdGVyKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHR5cGUgPSB0aGlzLnR5cGU7XG5cblx0XHRcdC8vIFVzZSAuaXMoIFwiOmRpc2FibGVkXCIgKSBzbyB0aGF0IGZpZWxkc2V0W2Rpc2FibGVkXSB3b3Jrc1xuXHRcdFx0cmV0dXJuIHRoaXMubmFtZSAmJiAhalF1ZXJ5KCB0aGlzICkuaXMoIFwiOmRpc2FibGVkXCIgKSAmJlxuXHRcdFx0XHRyc3VibWl0dGFibGUudGVzdCggdGhpcy5ub2RlTmFtZSApICYmICFyc3VibWl0dGVyVHlwZXMudGVzdCggdHlwZSApICYmXG5cdFx0XHRcdCggdGhpcy5jaGVja2VkIHx8ICFyY2hlY2thYmxlVHlwZS50ZXN0KCB0eXBlICkgKTtcblx0XHR9KVxuXHRcdC5tYXAoZnVuY3Rpb24oIGksIGVsZW0gKSB7XG5cdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cblx0XHRcdHJldHVybiB2YWwgPT0gbnVsbCA/XG5cdFx0XHRcdG51bGwgOlxuXHRcdFx0XHRqUXVlcnkuaXNBcnJheSggdmFsICkgP1xuXHRcdFx0XHRcdGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbCApIHtcblx0XHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9KS5nZXQoKTtcblx0fVxufSk7XG5cblxualF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cdH0gY2F0Y2goIGUgKSB7fVxufTtcblxudmFyIHhocklkID0gMCxcblx0eGhyQ2FsbGJhY2tzID0ge30sXG5cdHhoclN1Y2Nlc3NTdGF0dXMgPSB7XG5cdFx0Ly8gZmlsZSBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyBjb2RlIDAsIGFzc3VtZSAyMDBcblx0XHQwOiAyMDAsXG5cdFx0Ly8gU3VwcG9ydDogSUU5XG5cdFx0Ly8gIzE0NTA6IHNvbWV0aW1lcyBJRSByZXR1cm5zIDEyMjMgd2hlbiBpdCBzaG91bGQgYmUgMjA0XG5cdFx0MTIyMzogMjA0XG5cdH0sXG5cdHhoclN1cHBvcnRlZCA9IGpRdWVyeS5hamF4U2V0dGluZ3MueGhyKCk7XG5cbi8vIFN1cHBvcnQ6IElFOVxuLy8gT3BlbiByZXF1ZXN0cyBtdXN0IGJlIG1hbnVhbGx5IGFib3J0ZWQgb24gdW5sb2FkICgjNTI4MClcbi8vIFNlZSBodHRwczovL3N1cHBvcnQubWljcm9zb2Z0LmNvbS9rYi8yODU2NzQ2IGZvciBtb3JlIGluZm9cbmlmICggd2luZG93LmF0dGFjaEV2ZW50ICkge1xuXHR3aW5kb3cuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgZnVuY3Rpb24oKSB7XG5cdFx0Zm9yICggdmFyIGtleSBpbiB4aHJDYWxsYmFja3MgKSB7XG5cdFx0XHR4aHJDYWxsYmFja3NbIGtleSBdKCk7XG5cdFx0fVxuXHR9KTtcbn1cblxuc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCBcIndpdGhDcmVkZW50aWFsc1wiIGluIHhoclN1cHBvcnRlZCApO1xuc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cbmpRdWVyeS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHR2YXIgY2FsbGJhY2s7XG5cblx0Ly8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuXHRpZiAoIHN1cHBvcnQuY29ycyB8fCB4aHJTdXBwb3J0ZWQgJiYgIW9wdGlvbnMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0dmFyIGksXG5cdFx0XHRcdFx0eGhyID0gb3B0aW9ucy54aHIoKSxcblx0XHRcdFx0XHRpZCA9ICsreGhySWQ7XG5cblx0XHRcdFx0eGhyLm9wZW4oIG9wdGlvbnMudHlwZSwgb3B0aW9ucy51cmwsIG9wdGlvbnMuYXN5bmMsIG9wdGlvbnMudXNlcm5hbWUsIG9wdGlvbnMucGFzc3dvcmQgKTtcblxuXHRcdFx0XHQvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0Zm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRcdHhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHtcblx0XHRcdFx0XHR4aHIub3ZlcnJpZGVNaW1lVHlwZSggb3B0aW9ucy5taW1lVHlwZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcblx0XHRcdFx0Ly8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZVxuXHRcdFx0XHQvLyBha2luIHRvIGEgamlnc2F3IHB1enpsZSwgd2Ugc2ltcGx5IG5ldmVyIHNldCBpdCB0byBiZSBzdXJlLlxuXHRcdFx0XHQvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcblx0XHRcdFx0Ly8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuXG5cdFx0XHRcdGlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gJiYgIWhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdICkge1xuXHRcdFx0XHRcdGhlYWRlcnNbXCJYLVJlcXVlc3RlZC1XaXRoXCJdID0gXCJYTUxIdHRwUmVxdWVzdFwiO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU2V0IGhlYWRlcnNcblx0XHRcdFx0Zm9yICggaSBpbiBoZWFkZXJzICkge1xuXHRcdFx0XHRcdHhoci5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBoZWFkZXJzWyBpIF0gKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIHhockNhbGxiYWNrc1sgaWQgXTtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSB4aHIub25sb2FkID0geGhyLm9uZXJyb3IgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBcImVycm9yXCIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBmaWxlOiBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyAwOyBzZWUgIzg2MDUsICMxNDIwN1xuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0XG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblx0XHRcdFx0XHRcdFx0XHRcdHhoclN1Y2Nlc3NTdGF0dXNbIHhoci5zdGF0dXMgXSB8fCB4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHQsXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRTlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEFjY2Vzc2luZyBiaW5hcnktZGF0YSByZXNwb25zZVRleHQgdGhyb3dzIGFuIGV4Y2VwdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gKCMxMTQyNilcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ID09PSBcInN0cmluZ1wiID8ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB4aHIucmVzcG9uc2VUZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHR9IDogdW5kZWZpbmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHR4aHIub25sb2FkID0gY2FsbGJhY2soKTtcblx0XHRcdFx0eGhyLm9uZXJyb3IgPSBjYWxsYmFjayhcImVycm9yXCIpO1xuXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgYWJvcnQgY2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSB4aHJDYWxsYmFja3NbIGlkIF0gPSBjYWxsYmFjayhcImFib3J0XCIpO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Ly8gRG8gc2VuZCB0aGUgcmVxdWVzdCAodGhpcyBtYXkgcmFpc2UgYW4gZXhjZXB0aW9uKVxuXHRcdFx0XHRcdHhoci5zZW5kKCBvcHRpb25zLmhhc0NvbnRlbnQgJiYgb3B0aW9ucy5kYXRhIHx8IG51bGwgKTtcblx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdFx0Ly8gIzE0NjgzOiBPbmx5IHJldGhyb3cgaWYgdGhpcyBoYXNuJ3QgYmVlbiBub3RpZmllZCBhcyBhbiBlcnJvciB5ZXRcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSk7XG5cblxuXG5cbi8vIEluc3RhbGwgc2NyaXB0IGRhdGFUeXBlXG5qUXVlcnkuYWpheFNldHVwKHtcblx0YWNjZXB0czoge1xuXHRcdHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwiXG5cdH0sXG5cdGNvbnRlbnRzOiB7XG5cdFx0c2NyaXB0OiAvKD86amF2YXxlY21hKXNjcmlwdC9cblx0fSxcblx0Y29udmVydGVyczoge1xuXHRcdFwidGV4dCBzY3JpcHRcIjogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHRqUXVlcnkuZ2xvYmFsRXZhbCggdGV4dCApO1xuXHRcdFx0cmV0dXJuIHRleHQ7XG5cdFx0fVxuXHR9XG59KTtcblxuLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBjcm9zc0RvbWFpblxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRzLmNhY2hlID0gZmFsc2U7XG5cdH1cblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMudHlwZSA9IFwiR0VUXCI7XG5cdH1cbn0pO1xuXG4vLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnRcbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblx0Ly8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiByZXF1ZXN0c1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0dmFyIHNjcmlwdCwgY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBfLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0c2NyaXB0ID0galF1ZXJ5KFwiPHNjcmlwdD5cIikucHJvcCh7XG5cdFx0XHRcdFx0YXN5bmM6IHRydWUsXG5cdFx0XHRcdFx0Y2hhcnNldDogcy5zY3JpcHRDaGFyc2V0LFxuXHRcdFx0XHRcdHNyYzogcy51cmxcblx0XHRcdFx0fSkub24oXG5cdFx0XHRcdFx0XCJsb2FkIGVycm9yXCIsXG5cdFx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkge1xuXHRcdFx0XHRcdFx0c2NyaXB0LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0aWYgKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCBldnQudHlwZSA9PT0gXCJlcnJvclwiID8gNDA0IDogMjAwLCBldnQudHlwZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0WyAwIF0gKTtcblx0XHRcdH0sXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0pO1xuXG5cblxuXG52YXIgb2xkQ2FsbGJhY2tzID0gW10sXG5cdHJqc29ucCA9IC8oPSlcXD8oPz0mfCQpfFxcP1xcPy87XG5cbi8vIERlZmF1bHQganNvbnAgc2V0dGluZ3NcbmpRdWVyeS5hamF4U2V0dXAoe1xuXHRqc29ucDogXCJjYWxsYmFja1wiLFxuXHRqc29ucENhbGxiYWNrOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgY2FsbGJhY2sgPSBvbGRDYWxsYmFja3MucG9wKCkgfHwgKCBqUXVlcnkuZXhwYW5kbyArIFwiX1wiICsgKCBub25jZSsrICkgKTtcblx0XHR0aGlzWyBjYWxsYmFjayBdID0gdHJ1ZTtcblx0XHRyZXR1cm4gY2FsbGJhY2s7XG5cdH1cbn0pO1xuXG4vLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHNcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcImpzb24ganNvbnBcIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkge1xuXG5cdHZhciBjYWxsYmFja05hbWUsIG92ZXJ3cml0dGVuLCByZXNwb25zZUNvbnRhaW5lcixcblx0XHRqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgP1xuXHRcdFx0XCJ1cmxcIiA6XG5cdFx0XHR0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICYmICEoIHMuY29udGVudFR5cGUgfHwgXCJcIiApLmluZGV4T2YoXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIikgJiYgcmpzb25wLnRlc3QoIHMuZGF0YSApICYmIFwiZGF0YVwiXG5cdFx0KTtcblxuXHQvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgXCJqc29ucFwiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0XG5cdGlmICgganNvblByb3AgfHwgcy5kYXRhVHlwZXNbIDAgXSA9PT0gXCJqc29ucFwiICkge1xuXG5cdFx0Ly8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdFxuXHRcdGNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGpRdWVyeS5pc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2soKSA6XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHQvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhXG5cdFx0aWYgKCBqc29uUHJvcCApIHtcblx0XHRcdHNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgXCIkMVwiICsgY2FsbGJhY2tOYW1lICk7XG5cdFx0fSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb25cblx0XHRzLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCAhcmVzcG9uc2VDb250YWluZXIgKSB7XG5cdFx0XHRcdGpRdWVyeS5lcnJvciggY2FsbGJhY2tOYW1lICsgXCIgd2FzIG5vdCBjYWxsZWRcIiApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWyAwIF07XG5cdFx0fTtcblxuXHRcdC8vIGZvcmNlIGpzb24gZGF0YVR5cGVcblx0XHRzLmRhdGFUeXBlc1sgMCBdID0gXCJqc29uXCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrXG5cdFx0b3ZlcndyaXR0ZW4gPSB3aW5kb3dbIGNhbGxiYWNrTmFtZSBdO1xuXHRcdHdpbmRvd1sgY2FsbGJhY2tOYW1lIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gYXJndW1lbnRzO1xuXHRcdH07XG5cblx0XHQvLyBDbGVhbi11cCBmdW5jdGlvbiAoZmlyZXMgYWZ0ZXIgY29udmVydGVycylcblx0XHRqcVhIUi5hbHdheXMoZnVuY3Rpb24oKSB7XG5cdFx0XHQvLyBSZXN0b3JlIHByZWV4aXN0aW5nIHZhbHVlXG5cdFx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gb3ZlcndyaXR0ZW47XG5cblx0XHRcdC8vIFNhdmUgYmFjayBhcyBmcmVlXG5cdFx0XHRpZiAoIHNbIGNhbGxiYWNrTmFtZSBdICkge1xuXHRcdFx0XHQvLyBtYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmRcblx0XHRcdFx0cy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO1xuXG5cdFx0XHRcdC8vIHNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2Vcblx0XHRcdFx0b2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2Vcblx0XHRcdGlmICggcmVzcG9uc2VDb250YWluZXIgJiYgalF1ZXJ5LmlzRnVuY3Rpb24oIG92ZXJ3cml0dGVuICkgKSB7XG5cdFx0XHRcdG92ZXJ3cml0dGVuKCByZXNwb25zZUNvbnRhaW5lclsgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJlc3BvbnNlQ29udGFpbmVyID0gb3ZlcndyaXR0ZW4gPSB1bmRlZmluZWQ7XG5cdFx0fSk7XG5cblx0XHQvLyBEZWxlZ2F0ZSB0byBzY3JpcHRcblx0XHRyZXR1cm4gXCJzY3JpcHRcIjtcblx0fVxufSk7XG5cblxuXG5cbi8vIGRhdGE6IHN0cmluZyBvZiBodG1sXG4vLyBjb250ZXh0IChvcHRpb25hbCk6IElmIHNwZWNpZmllZCwgdGhlIGZyYWdtZW50IHdpbGwgYmUgY3JlYXRlZCBpbiB0aGlzIGNvbnRleHQsIGRlZmF1bHRzIHRvIGRvY3VtZW50XG4vLyBrZWVwU2NyaXB0cyAob3B0aW9uYWwpOiBJZiB0cnVlLCB3aWxsIGluY2x1ZGUgc2NyaXB0cyBwYXNzZWQgaW4gdGhlIGh0bWwgc3RyaW5nXG5qUXVlcnkucGFyc2VIVE1MID0gZnVuY3Rpb24oIGRhdGEsIGNvbnRleHQsIGtlZXBTY3JpcHRzICkge1xuXHRpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGtlZXBTY3JpcHRzID0gY29udGV4dDtcblx0XHRjb250ZXh0ID0gZmFsc2U7XG5cdH1cblx0Y29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cblx0dmFyIHBhcnNlZCA9IHJzaW5nbGVUYWcuZXhlYyggZGF0YSApLFxuXHRcdHNjcmlwdHMgPSAha2VlcFNjcmlwdHMgJiYgW107XG5cblx0Ly8gU2luZ2xlIHRhZ1xuXHRpZiAoIHBhcnNlZCApIHtcblx0XHRyZXR1cm4gWyBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIHBhcnNlZFsxXSApIF07XG5cdH1cblxuXHRwYXJzZWQgPSBqUXVlcnkuYnVpbGRGcmFnbWVudCggWyBkYXRhIF0sIGNvbnRleHQsIHNjcmlwdHMgKTtcblxuXHRpZiAoIHNjcmlwdHMgJiYgc2NyaXB0cy5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5KCBzY3JpcHRzICkucmVtb3ZlKCk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5Lm1lcmdlKCBbXSwgcGFyc2VkLmNoaWxkTm9kZXMgKTtcbn07XG5cblxuLy8gS2VlcCBhIGNvcHkgb2YgdGhlIG9sZCBsb2FkIG1ldGhvZFxudmFyIF9sb2FkID0galF1ZXJ5LmZuLmxvYWQ7XG5cbi8qKlxuICogTG9hZCBhIHVybCBpbnRvIGEgcGFnZVxuICovXG5qUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7XG5cdGlmICggdHlwZW9mIHVybCAhPT0gXCJzdHJpbmdcIiAmJiBfbG9hZCApIHtcblx0XHRyZXR1cm4gX2xvYWQuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHR9XG5cblx0dmFyIHNlbGVjdG9yLCB0eXBlLCByZXNwb25zZSxcblx0XHRzZWxmID0gdGhpcyxcblx0XHRvZmYgPSB1cmwuaW5kZXhPZihcIiBcIik7XG5cblx0aWYgKCBvZmYgPj0gMCApIHtcblx0XHRzZWxlY3RvciA9IGpRdWVyeS50cmltKCB1cmwuc2xpY2UoIG9mZiApICk7XG5cdFx0dXJsID0gdXJsLnNsaWNlKCAwLCBvZmYgKTtcblx0fVxuXG5cdC8vIElmIGl0J3MgYSBmdW5jdGlvblxuXHRpZiAoIGpRdWVyeS5pc0Z1bmN0aW9uKCBwYXJhbXMgKSApIHtcblxuXHRcdC8vIFdlIGFzc3VtZSB0aGF0IGl0J3MgdGhlIGNhbGxiYWNrXG5cdFx0Y2FsbGJhY2sgPSBwYXJhbXM7XG5cdFx0cGFyYW1zID0gdW5kZWZpbmVkO1xuXG5cdC8vIE90aGVyd2lzZSwgYnVpbGQgYSBwYXJhbSBzdHJpbmdcblx0fSBlbHNlIGlmICggcGFyYW1zICYmIHR5cGVvZiBwYXJhbXMgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0dHlwZSA9IFwiUE9TVFwiO1xuXHR9XG5cblx0Ly8gSWYgd2UgaGF2ZSBlbGVtZW50cyB0byBtb2RpZnksIG1ha2UgdGhlIHJlcXVlc3Rcblx0aWYgKCBzZWxmLmxlbmd0aCA+IDAgKSB7XG5cdFx0alF1ZXJ5LmFqYXgoe1xuXHRcdFx0dXJsOiB1cmwsXG5cblx0XHRcdC8vIGlmIFwidHlwZVwiIHZhcmlhYmxlIGlzIHVuZGVmaW5lZCwgdGhlbiBcIkdFVFwiIG1ldGhvZCB3aWxsIGJlIHVzZWRcblx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRkYXRhVHlwZTogXCJodG1sXCIsXG5cdFx0XHRkYXRhOiBwYXJhbXNcblx0XHR9KS5kb25lKGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7XG5cblx0XHRcdC8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFja1xuXHRcdFx0cmVzcG9uc2UgPSBhcmd1bWVudHM7XG5cblx0XHRcdHNlbGYuaHRtbCggc2VsZWN0b3IgP1xuXG5cdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHQvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnNcblx0XHRcdFx0alF1ZXJ5KFwiPGRpdj5cIikuYXBwZW5kKCBqUXVlcnkucGFyc2VIVE1MKCByZXNwb25zZVRleHQgKSApLmZpbmQoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSB1c2UgdGhlIGZ1bGwgcmVzdWx0XG5cdFx0XHRcdHJlc3BvbnNlVGV4dCApO1xuXG5cdFx0fSkuY29tcGxldGUoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xuXHRcdFx0c2VsZi5lYWNoKCBjYWxsYmFjaywgcmVzcG9uc2UgfHwgWyBqcVhIUi5yZXNwb25zZVRleHQsIHN0YXR1cywganFYSFIgXSApO1xuXHRcdH0pO1xuXHR9XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5cblxuXG4vLyBBdHRhY2ggYSBidW5jaCBvZiBmdW5jdGlvbnMgZm9yIGhhbmRsaW5nIGNvbW1vbiBBSkFYIGV2ZW50c1xualF1ZXJ5LmVhY2goIFsgXCJhamF4U3RhcnRcIiwgXCJhamF4U3RvcFwiLCBcImFqYXhDb21wbGV0ZVwiLCBcImFqYXhFcnJvclwiLCBcImFqYXhTdWNjZXNzXCIsIFwiYWpheFNlbmRcIiBdLCBmdW5jdGlvbiggaSwgdHlwZSApIHtcblx0alF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdH07XG59KTtcblxuXG5cblxualF1ZXJ5LmV4cHIuZmlsdGVycy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmdyZXAoalF1ZXJ5LnRpbWVycywgZnVuY3Rpb24oIGZuICkge1xuXHRcdHJldHVybiBlbGVtID09PSBmbi5lbGVtO1xuXHR9KS5sZW5ndGg7XG59O1xuXG5cblxuXG52YXIgZG9jRWxlbSA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbi8qKlxuICogR2V0cyBhIHdpbmRvdyBmcm9tIGFuIGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZ2V0V2luZG93KCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmlzV2luZG93KCBlbGVtICkgPyBlbGVtIDogZWxlbS5ub2RlVHlwZSA9PT0gOSAmJiBlbGVtLmRlZmF1bHRWaWV3O1xufVxuXG5qUXVlcnkub2Zmc2V0ID0ge1xuXHRzZXRPZmZzZXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBpICkge1xuXHRcdHZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sXG5cdFx0XHRwb3NpdGlvbiA9IGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApLFxuXHRcdFx0Y3VyRWxlbSA9IGpRdWVyeSggZWxlbSApLFxuXHRcdFx0cHJvcHMgPSB7fTtcblxuXHRcdC8vIFNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW1cblx0XHRpZiAoIHBvc2l0aW9uID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcblx0XHR9XG5cblx0XHRjdXJPZmZzZXQgPSBjdXJFbGVtLm9mZnNldCgpO1xuXHRcdGN1ckNTU1RvcCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwidG9wXCIgKTtcblx0XHRjdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJsZWZ0XCIgKTtcblx0XHRjYWxjdWxhdGVQb3NpdGlvbiA9ICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkgJiZcblx0XHRcdCggY3VyQ1NTVG9wICsgY3VyQ1NTTGVmdCApLmluZGV4T2YoXCJhdXRvXCIpID4gLTE7XG5cblx0XHQvLyBOZWVkIHRvIGJlIGFibGUgdG8gY2FsY3VsYXRlIHBvc2l0aW9uIGlmIGVpdGhlclxuXHRcdC8vIHRvcCBvciBsZWZ0IGlzIGF1dG8gYW5kIHBvc2l0aW9uIGlzIGVpdGhlciBhYnNvbHV0ZSBvciBmaXhlZFxuXHRcdGlmICggY2FsY3VsYXRlUG9zaXRpb24gKSB7XG5cdFx0XHRjdXJQb3NpdGlvbiA9IGN1ckVsZW0ucG9zaXRpb24oKTtcblx0XHRcdGN1clRvcCA9IGN1clBvc2l0aW9uLnRvcDtcblx0XHRcdGN1ckxlZnQgPSBjdXJQb3NpdGlvbi5sZWZ0O1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1clRvcCA9IHBhcnNlRmxvYXQoIGN1ckNTU1RvcCApIHx8IDA7XG5cdFx0XHRjdXJMZWZ0ID0gcGFyc2VGbG9hdCggY3VyQ1NTTGVmdCApIHx8IDA7XG5cdFx0fVxuXG5cdFx0aWYgKCBqUXVlcnkuaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuXHRcdFx0b3B0aW9ucyA9IG9wdGlvbnMuY2FsbCggZWxlbSwgaSwgY3VyT2Zmc2V0ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBvcHRpb25zLnRvcCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMudG9wID0gKCBvcHRpb25zLnRvcCAtIGN1ck9mZnNldC50b3AgKSArIGN1clRvcDtcblx0XHR9XG5cdFx0aWYgKCBvcHRpb25zLmxlZnQgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLmxlZnQgPSAoIG9wdGlvbnMubGVmdCAtIGN1ck9mZnNldC5sZWZ0ICkgKyBjdXJMZWZ0O1xuXHRcdH1cblxuXHRcdGlmICggXCJ1c2luZ1wiIGluIG9wdGlvbnMgKSB7XG5cdFx0XHRvcHRpb25zLnVzaW5nLmNhbGwoIGVsZW0sIHByb3BzICk7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyRWxlbS5jc3MoIHByb3BzICk7XG5cdFx0fVxuXHR9XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKHtcblx0b2Zmc2V0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0dGhpcyA6XG5cdFx0XHRcdHRoaXMuZWFjaChmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuXHRcdFx0XHR9KTtcblx0XHR9XG5cblx0XHR2YXIgZG9jRWxlbSwgd2luLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdGJveCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH0sXG5cdFx0XHRkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblxuXHRcdGlmICggIWRvYyApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuXHRcdC8vIE1ha2Ugc3VyZSBpdCdzIG5vdCBhIGRpc2Nvbm5lY3RlZCBET00gbm9kZVxuXHRcdGlmICggIWpRdWVyeS5jb250YWlucyggZG9jRWxlbSwgZWxlbSApICkge1xuXHRcdFx0cmV0dXJuIGJveDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBCbGFja0JlcnJ5IDUsIGlPUyAzIChvcmlnaW5hbCBpUGhvbmUpXG5cdFx0Ly8gSWYgd2UgZG9uJ3QgaGF2ZSBnQkNSLCBqdXN0IHVzZSAwLDAgcmF0aGVyIHRoYW4gZXJyb3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gc3RydW5kZWZpbmVkICkge1xuXHRcdFx0Ym94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR9XG5cdFx0d2luID0gZ2V0V2luZG93KCBkb2MgKTtcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiBib3gudG9wICsgd2luLnBhZ2VZT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRUb3AsXG5cdFx0XHRsZWZ0OiBib3gubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsZW0uY2xpZW50TGVmdFxuXHRcdH07XG5cdH0sXG5cblx0cG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdGlmICggIXRoaXNbIDAgXSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YXIgb2Zmc2V0UGFyZW50LCBvZmZzZXQsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0cGFyZW50T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblxuXHRcdC8vIEZpeGVkIGVsZW1lbnRzIGFyZSBvZmZzZXQgZnJvbSB3aW5kb3cgKHBhcmVudE9mZnNldCA9IHt0b3A6MCwgbGVmdDogMH0sIGJlY2F1c2UgaXQgaXMgaXRzIG9ubHkgb2Zmc2V0IHBhcmVudFxuXHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcblx0XHRcdC8vIEFzc3VtZSBnZXRCb3VuZGluZ0NsaWVudFJlY3QgaXMgdGhlcmUgd2hlbiBjb21wdXRlZCBwb3NpdGlvbiBpcyBmaXhlZFxuXHRcdFx0b2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBHZXQgKnJlYWwqIG9mZnNldFBhcmVudFxuXHRcdFx0b2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQoKTtcblxuXHRcdFx0Ly8gR2V0IGNvcnJlY3Qgb2Zmc2V0c1xuXHRcdFx0b2Zmc2V0ID0gdGhpcy5vZmZzZXQoKTtcblx0XHRcdGlmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50WyAwIF0sIFwiaHRtbFwiICkgKSB7XG5cdFx0XHRcdHBhcmVudE9mZnNldCA9IG9mZnNldFBhcmVudC5vZmZzZXQoKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIG9mZnNldFBhcmVudCBib3JkZXJzXG5cdFx0XHRwYXJlbnRPZmZzZXQudG9wICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlclRvcFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdHBhcmVudE9mZnNldC5sZWZ0ICs9IGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudFsgMCBdLCBcImJvcmRlckxlZnRXaWR0aFwiLCB0cnVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2luc1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5Ub3BcIiwgdHJ1ZSApLFxuXHRcdFx0bGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luTGVmdFwiLCB0cnVlIClcblx0XHR9O1xuXHR9LFxuXG5cdG9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG9mZnNldFBhcmVudCA9IHRoaXMub2Zmc2V0UGFyZW50IHx8IGRvY0VsZW07XG5cblx0XHRcdHdoaWxlICggb2Zmc2V0UGFyZW50ICYmICggIWpRdWVyeS5ub2RlTmFtZSggb2Zmc2V0UGFyZW50LCBcImh0bWxcIiApICYmIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSApIHtcblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2NFbGVtO1xuXHRcdH0pO1xuXHR9XG59KTtcblxuLy8gQ3JlYXRlIHNjcm9sbExlZnQgYW5kIHNjcm9sbFRvcCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBzY3JvbGxMZWZ0OiBcInBhZ2VYT2Zmc2V0XCIsIHNjcm9sbFRvcDogXCJwYWdlWU9mZnNldFwiIH0sIGZ1bmN0aW9uKCBtZXRob2QsIHByb3AgKSB7XG5cdHZhciB0b3AgPSBcInBhZ2VZT2Zmc2V0XCIgPT09IHByb3A7XG5cblx0alF1ZXJ5LmZuWyBtZXRob2QgXSA9IGZ1bmN0aW9uKCB2YWwgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG1ldGhvZCwgdmFsICkge1xuXHRcdFx0dmFyIHdpbiA9IGdldFdpbmRvdyggZWxlbSApO1xuXG5cdFx0XHRpZiAoIHZhbCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gd2luID8gd2luWyBwcm9wIF0gOiBlbGVtWyBtZXRob2QgXTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB3aW4gKSB7XG5cdFx0XHRcdHdpbi5zY3JvbGxUbyhcblx0XHRcdFx0XHQhdG9wID8gdmFsIDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuXHRcdFx0XHRcdHRvcCA/IHZhbCA6IHdpbmRvdy5wYWdlWU9mZnNldFxuXHRcdFx0XHQpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRlbGVtWyBtZXRob2QgXSA9IHZhbDtcblx0XHRcdH1cblx0XHR9LCBtZXRob2QsIHZhbCwgYXJndW1lbnRzLmxlbmd0aCwgbnVsbCApO1xuXHR9O1xufSk7XG5cbi8vIFN1cHBvcnQ6IFNhZmFyaTw3KywgQ2hyb21lPDM3K1xuLy8gQWRkIHRoZSB0b3AvbGVmdCBjc3NIb29rcyB1c2luZyBqUXVlcnkuZm4ucG9zaXRpb25cbi8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NFxuLy8gQmxpbmsgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MjI5MjgwXG4vLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0O1xuLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmVcbmpRdWVyeS5lYWNoKCBbIFwidG9wXCIsIFwibGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwcm9wICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7XG5cdFx0XHRcdC8vIElmIGN1ckNTUyByZXR1cm5zIHBlcmNlbnRhZ2UsIGZhbGxiYWNrIHRvIG9mZnNldFxuXHRcdFx0XHRyZXR1cm4gcm51bW5vbnB4LnRlc3QoIGNvbXB1dGVkICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggZWxlbSApLnBvc2l0aW9uKClbIHByb3AgXSArIFwicHhcIiA6XG5cdFx0XHRcdFx0Y29tcHV0ZWQ7XG5cdFx0XHR9XG5cdFx0fVxuXHQpO1xufSk7XG5cblxuLy8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBIZWlnaHQ6IFwiaGVpZ2h0XCIsIFdpZHRoOiBcIndpZHRoXCIgfSwgZnVuY3Rpb24oIG5hbWUsIHR5cGUgKSB7XG5cdGpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6IFwiaW5uZXJcIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsIFwiXCI6IFwib3V0ZXJcIiArIG5hbWUgfSwgZnVuY3Rpb24oIGRlZmF1bHRFeHRyYSwgZnVuY05hbWUgKSB7XG5cdFx0Ly8gTWFyZ2luIGlzIG9ubHkgZm9yIG91dGVySGVpZ2h0LCBvdXRlcldpZHRoXG5cdFx0alF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgY2hhaW5hYmxlID0gYXJndW1lbnRzLmxlbmd0aCAmJiAoIGRlZmF1bHRFeHRyYSB8fCB0eXBlb2YgbWFyZ2luICE9PSBcImJvb2xlYW5cIiApLFxuXHRcdFx0XHRleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/IFwibWFyZ2luXCIgOiBcImJvcmRlclwiICk7XG5cblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGRvYztcblxuXHRcdFx0XHRpZiAoIGpRdWVyeS5pc1dpbmRvdyggZWxlbSApICkge1xuXHRcdFx0XHRcdC8vIEFzIG9mIDUvOC8yMDEyIHRoaXMgd2lsbCB5aWVsZCBpbmNvcnJlY3QgcmVzdWx0cyBmb3IgTW9iaWxlIFNhZmFyaSwgYnV0IHRoZXJlXG5cdFx0XHRcdFx0Ly8gaXNuJ3QgYSB3aG9sZSBsb3Qgd2UgY2FuIGRvLiBTZWUgcHVsbCByZXF1ZXN0IGF0IHRoaXMgVVJMIGZvciBkaXNjdXNzaW9uOlxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNzY0XG5cdFx0XHRcdFx0cmV0dXJuIGVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBcImNsaWVudFwiICsgbmFtZSBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGRvY3VtZW50IHdpZHRoIG9yIGhlaWdodFxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sXG5cdFx0XHRcdFx0Ly8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcInNjcm9sbFwiICsgbmFtZSBdLCBkb2NbIFwic2Nyb2xsXCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGRvY1sgXCJjbGllbnRcIiArIG5hbWUgXVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdFx0Ly8gR2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudCwgcmVxdWVzdGluZyBidXQgbm90IGZvcmNpbmcgcGFyc2VGbG9hdFxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIHR5cGUsIGV4dHJhICkgOlxuXG5cdFx0XHRcdFx0Ly8gU2V0IHdpZHRoIG9yIGhlaWdodCBvbiB0aGUgZWxlbWVudFxuXHRcdFx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgdHlwZSwgdmFsdWUsIGV4dHJhICk7XG5cdFx0XHR9LCB0eXBlLCBjaGFpbmFibGUgPyBtYXJnaW4gOiB1bmRlZmluZWQsIGNoYWluYWJsZSwgbnVsbCApO1xuXHRcdH07XG5cdH0pO1xufSk7XG5cblxuLy8gVGhlIG51bWJlciBvZiBlbGVtZW50cyBjb250YWluZWQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXRcbmpRdWVyeS5mbi5zaXplID0gZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzLmxlbmd0aDtcbn07XG5cbmpRdWVyeS5mbi5hbmRTZWxmID0galF1ZXJ5LmZuLmFkZEJhY2s7XG5cblxuXG5cbi8vIFJlZ2lzdGVyIGFzIGEgbmFtZWQgQU1EIG1vZHVsZSwgc2luY2UgalF1ZXJ5IGNhbiBiZSBjb25jYXRlbmF0ZWQgd2l0aCBvdGhlclxuLy8gZmlsZXMgdGhhdCBtYXkgdXNlIGRlZmluZSwgYnV0IG5vdCB2aWEgYSBwcm9wZXIgY29uY2F0ZW5hdGlvbiBzY3JpcHQgdGhhdFxuLy8gdW5kZXJzdGFuZHMgYW5vbnltb3VzIEFNRCBtb2R1bGVzLiBBIG5hbWVkIEFNRCBpcyBzYWZlc3QgYW5kIG1vc3Qgcm9idXN0XG4vLyB3YXkgdG8gcmVnaXN0ZXIuIExvd2VyY2FzZSBqcXVlcnkgaXMgdXNlZCBiZWNhdXNlIEFNRCBtb2R1bGUgbmFtZXMgYXJlXG4vLyBkZXJpdmVkIGZyb20gZmlsZSBuYW1lcywgYW5kIGpRdWVyeSBpcyBub3JtYWxseSBkZWxpdmVyZWQgaW4gYSBsb3dlcmNhc2Vcbi8vIGZpbGUgbmFtZS4gRG8gdGhpcyBhZnRlciBjcmVhdGluZyB0aGUgZ2xvYmFsIHNvIHRoYXQgaWYgYW4gQU1EIG1vZHVsZSB3YW50c1xuLy8gdG8gY2FsbCBub0NvbmZsaWN0IHRvIGhpZGUgdGhpcyB2ZXJzaW9uIG9mIGpRdWVyeSwgaXQgd2lsbCB3b3JrLlxuXG4vLyBOb3RlIHRoYXQgZm9yIG1heGltdW0gcG9ydGFiaWxpdHksIGxpYnJhcmllcyB0aGF0IGFyZSBub3QgalF1ZXJ5IHNob3VsZFxuLy8gZGVjbGFyZSB0aGVtc2VsdmVzIGFzIGFub255bW91cyBtb2R1bGVzLCBhbmQgYXZvaWQgc2V0dGluZyBhIGdsb2JhbCBpZiBhblxuLy8gQU1EIGxvYWRlciBpcyBwcmVzZW50LiBqUXVlcnkgaXMgYSBzcGVjaWFsIGNhc2UuIEZvciBtb3JlIGluZm9ybWF0aW9uLCBzZWVcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qcmJ1cmtlL3JlcXVpcmVqcy93aWtpL1VwZGF0aW5nLWV4aXN0aW5nLWxpYnJhcmllcyN3aWtpLWFub25cblxuaWYgKCB0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCApIHtcblx0ZGVmaW5lKCBcImpxdWVyeVwiLCBbXSwgZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeTtcblx0fSk7XG59XG5cblxuXG5cbnZhclxuXHQvLyBNYXAgb3ZlciBqUXVlcnkgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0X2pRdWVyeSA9IHdpbmRvdy5qUXVlcnksXG5cblx0Ly8gTWFwIG92ZXIgdGhlICQgaW4gY2FzZSBvZiBvdmVyd3JpdGVcblx0XyQgPSB3aW5kb3cuJDtcblxualF1ZXJ5Lm5vQ29uZmxpY3QgPSBmdW5jdGlvbiggZGVlcCApIHtcblx0aWYgKCB3aW5kb3cuJCA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy4kID0gXyQ7XG5cdH1cblxuXHRpZiAoIGRlZXAgJiYgd2luZG93LmpRdWVyeSA9PT0galF1ZXJ5ICkge1xuXHRcdHdpbmRvdy5qUXVlcnkgPSBfalF1ZXJ5O1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeTtcbn07XG5cbi8vIEV4cG9zZSBqUXVlcnkgYW5kICQgaWRlbnRpZmllcnMsIGV2ZW4gaW4gQU1EXG4vLyAoIzcxMDIjY29tbWVudDoxMCwgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9qcXVlcnkvcHVsbC81NTcpXG4vLyBhbmQgQ29tbW9uSlMgZm9yIGJyb3dzZXIgZW11bGF0b3JzICgjMTM1NjYpXG5pZiAoIHR5cGVvZiBub0dsb2JhbCA9PT0gc3RydW5kZWZpbmVkICkge1xuXHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG59XG5cblxuXG5cbnJldHVybiBqUXVlcnk7XG5cbn0pKTtcbiIsIi8qIVxuICAgIGxvY2FsRm9yYWdlIC0tIE9mZmxpbmUgU3RvcmFnZSwgSW1wcm92ZWRcbiAgICBWZXJzaW9uIDEuNS4wXG4gICAgaHR0cHM6Ly9sb2NhbGZvcmFnZS5naXRodWIuaW8vbG9jYWxGb3JhZ2VcbiAgICAoYykgMjAxMy0yMDE3IE1vemlsbGEsIEFwYWNoZSBMaWNlbnNlIDIuMFxuKi9cbihmdW5jdGlvbihmKXtpZih0eXBlb2YgZXhwb3J0cz09PVwib2JqZWN0XCImJnR5cGVvZiBtb2R1bGUhPT1cInVuZGVmaW5lZFwiKXttb2R1bGUuZXhwb3J0cz1mKCl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09XCJmdW5jdGlvblwiJiZkZWZpbmUuYW1kKXtkZWZpbmUoW10sZil9ZWxzZXt2YXIgZztpZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIil7Zz1nbG9iYWx9ZWxzZSBpZih0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCIpe2c9c2VsZn1lbHNle2c9dGhpc31nLmxvY2FsZm9yYWdlID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IChmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsIGYpfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xudmFyIE11dGF0aW9uID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG5cbnZhciBzY2hlZHVsZURyYWluO1xuXG57XG4gIGlmIChNdXRhdGlvbikge1xuICAgIHZhciBjYWxsZWQgPSAwO1xuICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbihuZXh0VGljayk7XG4gICAgdmFyIGVsZW1lbnQgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCwge1xuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuICAgIH0pO1xuICAgIHNjaGVkdWxlRHJhaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBlbGVtZW50LmRhdGEgPSAoY2FsbGVkID0gKytjYWxsZWQgJSAyKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKCFnbG9iYWwuc2V0SW1tZWRpYXRlICYmIHR5cGVvZiBnbG9iYWwuTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGNoYW5uZWwgPSBuZXcgZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKCk7XG4gICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBuZXh0VGljaztcbiAgICBzY2hlZHVsZURyYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKCdkb2N1bWVudCcgaW4gZ2xvYmFsICYmICdvbnJlYWR5c3RhdGVjaGFuZ2UnIGluIGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSkge1xuICAgIHNjaGVkdWxlRHJhaW4gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgIHZhciBzY3JpcHRFbCA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIHNjcmlwdEVsLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmV4dFRpY2soKTtcblxuICAgICAgICBzY3JpcHRFbC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICBzY3JpcHRFbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdEVsKTtcbiAgICAgICAgc2NyaXB0RWwgPSBudWxsO1xuICAgICAgfTtcbiAgICAgIGdsb2JhbC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2NyaXB0RWwpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgc2NoZWR1bGVEcmFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldFRpbWVvdXQobmV4dFRpY2ssIDApO1xuICAgIH07XG4gIH1cbn1cblxudmFyIGRyYWluaW5nO1xudmFyIHF1ZXVlID0gW107XG4vL25hbWVkIG5leHRUaWNrIGZvciBsZXNzIGNvbmZ1c2luZyBzdGFjayB0cmFjZXNcbmZ1bmN0aW9uIG5leHRUaWNrKCkge1xuICBkcmFpbmluZyA9IHRydWU7XG4gIHZhciBpLCBvbGRRdWV1ZTtcbiAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgd2hpbGUgKGxlbikge1xuICAgIG9sZFF1ZXVlID0gcXVldWU7XG4gICAgcXVldWUgPSBbXTtcbiAgICBpID0gLTE7XG4gICAgd2hpbGUgKCsraSA8IGxlbikge1xuICAgICAgb2xkUXVldWVbaV0oKTtcbiAgICB9XG4gICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICB9XG4gIGRyYWluaW5nID0gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW1tZWRpYXRlO1xuZnVuY3Rpb24gaW1tZWRpYXRlKHRhc2spIHtcbiAgaWYgKHF1ZXVlLnB1c2godGFzaykgPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgc2NoZWR1bGVEcmFpbigpO1xuICB9XG59XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxufSx7fV0sMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgaW1tZWRpYXRlID0gX2RlcmVxXygxKTtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIElOVEVSTkFMKCkge31cblxudmFyIGhhbmRsZXJzID0ge307XG5cbnZhciBSRUpFQ1RFRCA9IFsnUkVKRUNURUQnXTtcbnZhciBGVUxGSUxMRUQgPSBbJ0ZVTEZJTExFRCddO1xudmFyIFBFTkRJTkcgPSBbJ1BFTkRJTkcnXTtcblxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzID0gUHJvbWlzZTtcblxuZnVuY3Rpb24gUHJvbWlzZShyZXNvbHZlcikge1xuICBpZiAodHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncmVzb2x2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gIH1cbiAgdGhpcy5zdGF0ZSA9IFBFTkRJTkc7XG4gIHRoaXMucXVldWUgPSBbXTtcbiAgdGhpcy5vdXRjb21lID0gdm9pZCAwO1xuICBpZiAocmVzb2x2ZXIgIT09IElOVEVSTkFMKSB7XG4gICAgc2FmZWx5UmVzb2x2ZVRoZW5hYmxlKHRoaXMsIHJlc29sdmVyKTtcbiAgfVxufVxuXG5Qcm9taXNlLnByb3RvdHlwZVtcImNhdGNoXCJdID0gZnVuY3Rpb24gKG9uUmVqZWN0ZWQpIHtcbiAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGVkKTtcbn07XG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSB7XG4gIGlmICh0eXBlb2Ygb25GdWxmaWxsZWQgIT09ICdmdW5jdGlvbicgJiYgdGhpcy5zdGF0ZSA9PT0gRlVMRklMTEVEIHx8XG4gICAgdHlwZW9mIG9uUmVqZWN0ZWQgIT09ICdmdW5jdGlvbicgJiYgdGhpcy5zdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICB2YXIgcHJvbWlzZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKElOVEVSTkFMKTtcbiAgaWYgKHRoaXMuc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICB2YXIgcmVzb2x2ZXIgPSB0aGlzLnN0YXRlID09PSBGVUxGSUxMRUQgPyBvbkZ1bGZpbGxlZCA6IG9uUmVqZWN0ZWQ7XG4gICAgdW53cmFwKHByb21pc2UsIHJlc29sdmVyLCB0aGlzLm91dGNvbWUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMucXVldWUucHVzaChuZXcgUXVldWVJdGVtKHByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkKSk7XG4gIH1cblxuICByZXR1cm4gcHJvbWlzZTtcbn07XG5mdW5jdGlvbiBRdWV1ZUl0ZW0ocHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgaWYgKHR5cGVvZiBvbkZ1bGZpbGxlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMub25GdWxmaWxsZWQgPSBvbkZ1bGZpbGxlZDtcbiAgICB0aGlzLmNhbGxGdWxmaWxsZWQgPSB0aGlzLm90aGVyQ2FsbEZ1bGZpbGxlZDtcbiAgfVxuICBpZiAodHlwZW9mIG9uUmVqZWN0ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLm9uUmVqZWN0ZWQgPSBvblJlamVjdGVkO1xuICAgIHRoaXMuY2FsbFJlamVjdGVkID0gdGhpcy5vdGhlckNhbGxSZWplY3RlZDtcbiAgfVxufVxuUXVldWVJdGVtLnByb3RvdHlwZS5jYWxsRnVsZmlsbGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIGhhbmRsZXJzLnJlc29sdmUodGhpcy5wcm9taXNlLCB2YWx1ZSk7XG59O1xuUXVldWVJdGVtLnByb3RvdHlwZS5vdGhlckNhbGxGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgdW53cmFwKHRoaXMucHJvbWlzZSwgdGhpcy5vbkZ1bGZpbGxlZCwgdmFsdWUpO1xufTtcblF1ZXVlSXRlbS5wcm90b3R5cGUuY2FsbFJlamVjdGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIGhhbmRsZXJzLnJlamVjdCh0aGlzLnByb21pc2UsIHZhbHVlKTtcbn07XG5RdWV1ZUl0ZW0ucHJvdG90eXBlLm90aGVyQ2FsbFJlamVjdGVkID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHVud3JhcCh0aGlzLnByb21pc2UsIHRoaXMub25SZWplY3RlZCwgdmFsdWUpO1xufTtcblxuZnVuY3Rpb24gdW53cmFwKHByb21pc2UsIGZ1bmMsIHZhbHVlKSB7XG4gIGltbWVkaWF0ZShmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJldHVyblZhbHVlO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm5WYWx1ZSA9IGZ1bmModmFsdWUpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiBoYW5kbGVycy5yZWplY3QocHJvbWlzZSwgZSk7XG4gICAgfVxuICAgIGlmIChyZXR1cm5WYWx1ZSA9PT0gcHJvbWlzZSkge1xuICAgICAgaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCByZXNvbHZlIHByb21pc2Ugd2l0aCBpdHNlbGYnKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhbmRsZXJzLnJlc29sdmUocHJvbWlzZSwgcmV0dXJuVmFsdWUpO1xuICAgIH1cbiAgfSk7XG59XG5cbmhhbmRsZXJzLnJlc29sdmUgPSBmdW5jdGlvbiAoc2VsZiwgdmFsdWUpIHtcbiAgdmFyIHJlc3VsdCA9IHRyeUNhdGNoKGdldFRoZW4sIHZhbHVlKTtcbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdlcnJvcicpIHtcbiAgICByZXR1cm4gaGFuZGxlcnMucmVqZWN0KHNlbGYsIHJlc3VsdC52YWx1ZSk7XG4gIH1cbiAgdmFyIHRoZW5hYmxlID0gcmVzdWx0LnZhbHVlO1xuXG4gIGlmICh0aGVuYWJsZSkge1xuICAgIHNhZmVseVJlc29sdmVUaGVuYWJsZShzZWxmLCB0aGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgc2VsZi5zdGF0ZSA9IEZVTEZJTExFRDtcbiAgICBzZWxmLm91dGNvbWUgPSB2YWx1ZTtcbiAgICB2YXIgaSA9IC0xO1xuICAgIHZhciBsZW4gPSBzZWxmLnF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZSAoKytpIDwgbGVuKSB7XG4gICAgICBzZWxmLnF1ZXVlW2ldLmNhbGxGdWxmaWxsZWQodmFsdWUpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gc2VsZjtcbn07XG5oYW5kbGVycy5yZWplY3QgPSBmdW5jdGlvbiAoc2VsZiwgZXJyb3IpIHtcbiAgc2VsZi5zdGF0ZSA9IFJFSkVDVEVEO1xuICBzZWxmLm91dGNvbWUgPSBlcnJvcjtcbiAgdmFyIGkgPSAtMTtcbiAgdmFyIGxlbiA9IHNlbGYucXVldWUubGVuZ3RoO1xuICB3aGlsZSAoKytpIDwgbGVuKSB7XG4gICAgc2VsZi5xdWV1ZVtpXS5jYWxsUmVqZWN0ZWQoZXJyb3IpO1xuICB9XG4gIHJldHVybiBzZWxmO1xufTtcblxuZnVuY3Rpb24gZ2V0VGhlbihvYmopIHtcbiAgLy8gTWFrZSBzdXJlIHdlIG9ubHkgYWNjZXNzIHRoZSBhY2Nlc3NvciBvbmNlIGFzIHJlcXVpcmVkIGJ5IHRoZSBzcGVjXG4gIHZhciB0aGVuID0gb2JqICYmIG9iai50aGVuO1xuICBpZiAob2JqICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGFwcHlUaGVuKCkge1xuICAgICAgdGhlbi5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzYWZlbHlSZXNvbHZlVGhlbmFibGUoc2VsZiwgdGhlbmFibGUpIHtcbiAgLy8gRWl0aGVyIGZ1bGZpbGwsIHJlamVjdCBvciByZWplY3Qgd2l0aCBlcnJvclxuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIG9uRXJyb3IodmFsdWUpIHtcbiAgICBpZiAoY2FsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGxlZCA9IHRydWU7XG4gICAgaGFuZGxlcnMucmVqZWN0KHNlbGYsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU3VjY2Vzcyh2YWx1ZSkge1xuICAgIGlmIChjYWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FsbGVkID0gdHJ1ZTtcbiAgICBoYW5kbGVycy5yZXNvbHZlKHNlbGYsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyeVRvVW53cmFwKCkge1xuICAgIHRoZW5hYmxlKG9uU3VjY2Vzcywgb25FcnJvcik7XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godHJ5VG9VbndyYXApO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgIG9uRXJyb3IocmVzdWx0LnZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlDYXRjaChmdW5jLCB2YWx1ZSkge1xuICB2YXIgb3V0ID0ge307XG4gIHRyeSB7XG4gICAgb3V0LnZhbHVlID0gZnVuYyh2YWx1ZSk7XG4gICAgb3V0LnN0YXR1cyA9ICdzdWNjZXNzJztcbiAgfSBjYXRjaCAoZSkge1xuICAgIG91dC5zdGF0dXMgPSAnZXJyb3InO1xuICAgIG91dC52YWx1ZSA9IGU7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0cy5yZXNvbHZlID0gcmVzb2x2ZTtcbmZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgdGhpcykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4gaGFuZGxlcnMucmVzb2x2ZShuZXcgdGhpcyhJTlRFUk5BTCksIHZhbHVlKTtcbn1cblxuZXhwb3J0cy5yZWplY3QgPSByZWplY3Q7XG5mdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gIHZhciBwcm9taXNlID0gbmV3IHRoaXMoSU5URVJOQUwpO1xuICByZXR1cm4gaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG59XG5cbmV4cG9ydHMuYWxsID0gYWxsO1xuZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyYWJsZSkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICByZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcignbXVzdCBiZSBhbiBhcnJheScpKTtcbiAgfVxuXG4gIHZhciBsZW4gPSBpdGVyYWJsZS5sZW5ndGg7XG4gIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgaWYgKCFsZW4pIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtcbiAgfVxuXG4gIHZhciB2YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgdmFyIHJlc29sdmVkID0gMDtcbiAgdmFyIGkgPSAtMTtcbiAgdmFyIHByb21pc2UgPSBuZXcgdGhpcyhJTlRFUk5BTCk7XG5cbiAgd2hpbGUgKCsraSA8IGxlbikge1xuICAgIGFsbFJlc29sdmVyKGl0ZXJhYmxlW2ldLCBpKTtcbiAgfVxuICByZXR1cm4gcHJvbWlzZTtcbiAgZnVuY3Rpb24gYWxsUmVzb2x2ZXIodmFsdWUsIGkpIHtcbiAgICBzZWxmLnJlc29sdmUodmFsdWUpLnRoZW4ocmVzb2x2ZUZyb21BbGwsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBmdW5jdGlvbiByZXNvbHZlRnJvbUFsbChvdXRWYWx1ZSkge1xuICAgICAgdmFsdWVzW2ldID0gb3V0VmFsdWU7XG4gICAgICBpZiAoKytyZXNvbHZlZCA9PT0gbGVuICYmICFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaGFuZGxlcnMucmVzb2x2ZShwcm9taXNlLCB2YWx1ZXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnRzLnJhY2UgPSByYWNlO1xuZnVuY3Rpb24gcmFjZShpdGVyYWJsZSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcmFibGUpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ211c3QgYmUgYW4gYXJyYXknKSk7XG4gIH1cblxuICB2YXIgbGVuID0gaXRlcmFibGUubGVuZ3RoO1xuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIGlmICghbGVuKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZShbXSk7XG4gIH1cblxuICB2YXIgaSA9IC0xO1xuICB2YXIgcHJvbWlzZSA9IG5ldyB0aGlzKElOVEVSTkFMKTtcblxuICB3aGlsZSAoKytpIDwgbGVuKSB7XG4gICAgcmVzb2x2ZXIoaXRlcmFibGVbaV0pO1xuICB9XG4gIHJldHVybiBwcm9taXNlO1xuICBmdW5jdGlvbiByZXNvbHZlcih2YWx1ZSkge1xuICAgIHNlbGYucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgIGhhbmRsZXJzLnJlc29sdmUocHJvbWlzZSwgcmVzcG9uc2UpO1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG59LHtcIjFcIjoxfV0sMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5pZiAodHlwZW9mIGdsb2JhbC5Qcm9taXNlICE9PSAnZnVuY3Rpb24nKSB7XG4gIGdsb2JhbC5Qcm9taXNlID0gX2RlcmVxXygyKTtcbn1cblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG59LHtcIjJcIjoyfV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gZ2V0SURCKCkge1xuICAgIC8qIGdsb2JhbCBpbmRleGVkREIsd2Via2l0SW5kZXhlZERCLG1vekluZGV4ZWREQixPSW5kZXhlZERCLG1zSW5kZXhlZERCICovXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbmRleGVkREIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhlZERCO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygd2Via2l0SW5kZXhlZERCICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHdlYmtpdEluZGV4ZWREQjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG1vekluZGV4ZWREQiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBtb3pJbmRleGVkREI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBPSW5kZXhlZERCICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIE9JbmRleGVkREI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBtc0luZGV4ZWREQiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBtc0luZGV4ZWREQjtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHt9XG59XG5cbnZhciBpZGIgPSBnZXRJREIoKTtcblxuZnVuY3Rpb24gaXNJbmRleGVkREJWYWxpZCgpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBJbml0aWFsaXplIEluZGV4ZWREQjsgZmFsbCBiYWNrIHRvIHZlbmRvci1wcmVmaXhlZCB2ZXJzaW9uc1xuICAgICAgICAvLyBpZiBuZWVkZWQuXG4gICAgICAgIGlmICghaWRiKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgbWltaWMgUG91Y2hEQiBoZXJlO1xuICAgICAgICAvL1xuICAgICAgICAvLyBXZSB0ZXN0IGZvciBvcGVuRGF0YWJhc2UgYmVjYXVzZSBJRSBNb2JpbGUgaWRlbnRpZmllcyBpdHNlbGZcbiAgICAgICAgLy8gYXMgU2FmYXJpLiBPaCB0aGUgbHVsei4uLlxuICAgICAgICB2YXIgaXNTYWZhcmkgPSB0eXBlb2Ygb3BlbkRhdGFiYXNlICE9PSAndW5kZWZpbmVkJyAmJiAvKFNhZmFyaXxpUGhvbmV8aVBhZHxpUG9kKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL0Nocm9tZS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL0JsYWNrQmVycnkvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTtcblxuICAgICAgICB2YXIgaGFzRmV0Y2ggPSB0eXBlb2YgZmV0Y2ggPT09ICdmdW5jdGlvbicgJiYgZmV0Y2gudG9TdHJpbmcoKS5pbmRleE9mKCdbbmF0aXZlIGNvZGUnKSAhPT0gLTE7XG5cbiAgICAgICAgLy8gU2FmYXJpIDwxMC4xIGRvZXMgbm90IG1lZXQgb3VyIHJlcXVpcmVtZW50cyBmb3IgSURCIHN1cHBvcnQgKCM1NTcyKVxuICAgICAgICAvLyBzaW5jZSBTYWZhcmkgMTAuMSBzaGlwcGVkIHdpdGggZmV0Y2gsIHdlIGNhbiB1c2UgdGhhdCB0byBkZXRlY3QgaXRcbiAgICAgICAgcmV0dXJuICghaXNTYWZhcmkgfHwgaGFzRmV0Y2gpICYmIHR5cGVvZiBpbmRleGVkREIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIC8vIHNvbWUgb3V0ZGF0ZWQgaW1wbGVtZW50YXRpb25zIG9mIElEQiB0aGF0IGFwcGVhciBvbiBTYW1zdW5nXG4gICAgICAgIC8vIGFuZCBIVEMgQW5kcm9pZCBkZXZpY2VzIDw0LjQgYXJlIG1pc3NpbmcgSURCS2V5UmFuZ2VcbiAgICAgICAgdHlwZW9mIElEQktleVJhbmdlICE9PSAndW5kZWZpbmVkJztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzV2ViU1FMVmFsaWQoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBvcGVuRGF0YWJhc2UgPT09ICdmdW5jdGlvbic7XG59XG5cbmZ1bmN0aW9uIGlzTG9jYWxTdG9yYWdlVmFsaWQoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnICYmICdzZXRJdGVtJyBpbiBsb2NhbFN0b3JhZ2UgJiYgbG9jYWxTdG9yYWdlLnNldEl0ZW07XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG4vLyBBYnN0cmFjdHMgY29uc3RydWN0aW5nIGEgQmxvYiBvYmplY3QsIHNvIGl0IGFsc28gd29ya3MgaW4gb2xkZXJcbi8vIGJyb3dzZXJzIHRoYXQgZG9uJ3Qgc3VwcG9ydCB0aGUgbmF0aXZlIEJsb2IgY29uc3RydWN0b3IuIChpLmUuXG4vLyBvbGQgUXRXZWJLaXQgdmVyc2lvbnMsIGF0IGxlYXN0KS5cbi8vIEFic3RyYWN0cyBjb25zdHJ1Y3RpbmcgYSBCbG9iIG9iamVjdCwgc28gaXQgYWxzbyB3b3JrcyBpbiBvbGRlclxuLy8gYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IHRoZSBuYXRpdmUgQmxvYiBjb25zdHJ1Y3Rvci4gKGkuZS5cbi8vIG9sZCBRdFdlYktpdCB2ZXJzaW9ucywgYXQgbGVhc3QpLlxuZnVuY3Rpb24gY3JlYXRlQmxvYihwYXJ0cywgcHJvcGVydGllcykge1xuICAgIC8qIGdsb2JhbCBCbG9iQnVpbGRlcixNU0Jsb2JCdWlsZGVyLE1vekJsb2JCdWlsZGVyLFdlYktpdEJsb2JCdWlsZGVyICovXG4gICAgcGFydHMgPSBwYXJ0cyB8fCBbXTtcbiAgICBwcm9wZXJ0aWVzID0gcHJvcGVydGllcyB8fCB7fTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IEJsb2IocGFydHMsIHByb3BlcnRpZXMpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgaWYgKGUubmFtZSAhPT0gJ1R5cGVFcnJvcicpIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIEJ1aWxkZXIgPSB0eXBlb2YgQmxvYkJ1aWxkZXIgIT09ICd1bmRlZmluZWQnID8gQmxvYkJ1aWxkZXIgOiB0eXBlb2YgTVNCbG9iQnVpbGRlciAhPT0gJ3VuZGVmaW5lZCcgPyBNU0Jsb2JCdWlsZGVyIDogdHlwZW9mIE1vekJsb2JCdWlsZGVyICE9PSAndW5kZWZpbmVkJyA/IE1vekJsb2JCdWlsZGVyIDogV2ViS2l0QmxvYkJ1aWxkZXI7XG4gICAgICAgIHZhciBidWlsZGVyID0gbmV3IEJ1aWxkZXIoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgICAgYnVpbGRlci5hcHBlbmQocGFydHNbaV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBidWlsZGVyLmdldEJsb2IocHJvcGVydGllcy50eXBlKTtcbiAgICB9XG59XG5cbi8vIFRoaXMgaXMgQ29tbW9uSlMgYmVjYXVzZSBsaWUgaXMgYW4gZXh0ZXJuYWwgZGVwZW5kZW5jeSwgc28gUm9sbHVwXG4vLyBjYW4ganVzdCBpZ25vcmUgaXQuXG5pZiAodHlwZW9mIFByb21pc2UgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgLy8gSW4gdGhlIFwibm9wcm9taXNlc1wiIGJ1aWxkIHRoaXMgd2lsbCBqdXN0IHRocm93IGlmIHlvdSBkb24ndCBoYXZlXG4gICAgLy8gYSBnbG9iYWwgcHJvbWlzZSBvYmplY3QsIGJ1dCBpdCB3b3VsZCB0aHJvdyBhbnl3YXkgbGF0ZXIuXG4gICAgX2RlcmVxXygzKTtcbn1cbnZhciBQcm9taXNlJDEgPSBQcm9taXNlO1xuXG5mdW5jdGlvbiBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spIHtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3VsdCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGV4ZWN1dGVUd29DYWxsYmFja3MocHJvbWlzZSwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHByb21pc2UudGhlbihjYWxsYmFjayk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBlcnJvckNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHByb21pc2VbXCJjYXRjaFwiXShlcnJvckNhbGxiYWNrKTtcbiAgICB9XG59XG5cbi8vIFNvbWUgY29kZSBvcmlnaW5hbGx5IGZyb20gYXN5bmNfc3RvcmFnZS5qcyBpblxuLy8gW0dhaWFdKGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhLWIyZy9nYWlhKS5cblxudmFyIERFVEVDVF9CTE9CX1NVUFBPUlRfU1RPUkUgPSAnbG9jYWwtZm9yYWdlLWRldGVjdC1ibG9iLXN1cHBvcnQnO1xudmFyIHN1cHBvcnRzQmxvYnM7XG52YXIgZGJDb250ZXh0cztcbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8vIFRyYW5zZm9ybSBhIGJpbmFyeSBzdHJpbmcgdG8gYW4gYXJyYXkgYnVmZmVyLCBiZWNhdXNlIG90aGVyd2lzZVxuLy8gd2VpcmQgc3R1ZmYgaGFwcGVucyB3aGVuIHlvdSB0cnkgdG8gd29yayB3aXRoIHRoZSBiaW5hcnkgc3RyaW5nIGRpcmVjdGx5LlxuLy8gSXQgaXMga25vd24uXG4vLyBGcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTQ5Njc2NDcvIChjb250aW51ZXMgb24gbmV4dCBsaW5lKVxuLy8gZW5jb2RlLWRlY29kZS1pbWFnZS13aXRoLWJhc2U2NC1icmVha3MtaW1hZ2UgKDIwMTMtMDQtMjEpXG5mdW5jdGlvbiBfYmluU3RyaW5nVG9BcnJheUJ1ZmZlcihiaW4pIHtcbiAgICB2YXIgbGVuZ3RoID0gYmluLmxlbmd0aDtcbiAgICB2YXIgYnVmID0gbmV3IEFycmF5QnVmZmVyKGxlbmd0aCk7XG4gICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcnJbaV0gPSBiaW4uY2hhckNvZGVBdChpKTtcbiAgICB9XG4gICAgcmV0dXJuIGJ1Zjtcbn1cblxuLy9cbi8vIEJsb2JzIGFyZSBub3Qgc3VwcG9ydGVkIGluIGFsbCB2ZXJzaW9ucyBvZiBJbmRleGVkREIsIG5vdGFibHlcbi8vIENocm9tZSA8MzcgYW5kIEFuZHJvaWQgPDUuIEluIHRob3NlIHZlcnNpb25zLCBzdG9yaW5nIGEgYmxvYiB3aWxsIHRocm93LlxuLy9cbi8vIFZhcmlvdXMgb3RoZXIgYmxvYiBidWdzIGV4aXN0IGluIENocm9tZSB2MzctNDIgKGluY2x1c2l2ZSkuXG4vLyBEZXRlY3RpbmcgdGhlbSBpcyBleHBlbnNpdmUgYW5kIGNvbmZ1c2luZyB0byB1c2VycywgYW5kIENocm9tZSAzNy00MlxuLy8gaXMgYXQgdmVyeSBsb3cgdXNhZ2Ugd29ybGR3aWRlLCBzbyB3ZSBkbyBhIGhhY2t5IHVzZXJBZ2VudCBjaGVjayBpbnN0ZWFkLlxuLy9cbi8vIGNvbnRlbnQtdHlwZSBidWc6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00MDgxMjBcbi8vIDQwNCBidWc6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDc5MTZcbi8vIEZpbGVSZWFkZXIgYnVnOiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDQ3ODM2XG4vL1xuLy8gQ29kZSBib3Jyb3dlZCBmcm9tIFBvdWNoREIuIFNlZTpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9wb3VjaGRiL3BvdWNoZGIvYmxvYi9tYXN0ZXIvcGFja2FnZXMvbm9kZV9tb2R1bGVzL3BvdWNoZGItYWRhcHRlci1pZGIvc3JjL2Jsb2JTdXBwb3J0LmpzXG4vL1xuZnVuY3Rpb24gX2NoZWNrQmxvYlN1cHBvcnRXaXRob3V0Q2FjaGluZyhpZGIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICB2YXIgdHhuID0gaWRiLnRyYW5zYWN0aW9uKERFVEVDVF9CTE9CX1NVUFBPUlRfU1RPUkUsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgdmFyIGJsb2IgPSBjcmVhdGVCbG9iKFsnJ10pO1xuICAgICAgICB0eG4ub2JqZWN0U3RvcmUoREVURUNUX0JMT0JfU1VQUE9SVF9TVE9SRSkucHV0KGJsb2IsICdrZXknKTtcblxuICAgICAgICB0eG4ub25hYm9ydCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGUgdHJhbnNhY3Rpb24gYWJvcnRzIG5vdyBpdHMgZHVlIHRvIG5vdCBiZWluZyBhYmxlIHRvXG4gICAgICAgICAgICAvLyB3cml0ZSB0byB0aGUgZGF0YWJhc2UsIGxpa2VseSBkdWUgdG8gdGhlIGRpc2sgYmVpbmcgZnVsbFxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHJlc29sdmUoZmFsc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHR4bi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIG1hdGNoZWRDaHJvbWUgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9DaHJvbWVcXC8oXFxkKykvKTtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkRWRnZSA9IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0VkZ2VcXC8vKTtcbiAgICAgICAgICAgIC8vIE1TIEVkZ2UgcHJldGVuZHMgdG8gYmUgQ2hyb21lIDQyOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9oaDg2OTMwMSUyOHY9dnMuODUlMjkuYXNweFxuICAgICAgICAgICAgcmVzb2x2ZShtYXRjaGVkRWRnZSB8fCAhbWF0Y2hlZENocm9tZSB8fCBwYXJzZUludChtYXRjaGVkQ2hyb21lWzFdLCAxMCkgPj0gNDMpO1xuICAgICAgICB9O1xuICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIGVycm9yLCBzbyBhc3N1bWUgdW5zdXBwb3J0ZWRcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gX2NoZWNrQmxvYlN1cHBvcnQoaWRiKSB7XG4gICAgaWYgKHR5cGVvZiBzdXBwb3J0c0Jsb2JzID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UkMS5yZXNvbHZlKHN1cHBvcnRzQmxvYnMpO1xuICAgIH1cbiAgICByZXR1cm4gX2NoZWNrQmxvYlN1cHBvcnRXaXRob3V0Q2FjaGluZyhpZGIpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHN1cHBvcnRzQmxvYnMgPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHN1cHBvcnRzQmxvYnM7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIF9kZWZlclJlYWRpbmVzcyhkYkluZm8pIHtcbiAgICB2YXIgZGJDb250ZXh0ID0gZGJDb250ZXh0c1tkYkluZm8ubmFtZV07XG5cbiAgICAvLyBDcmVhdGUgYSBkZWZlcnJlZCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IGRhdGFiYXNlIG9wZXJhdGlvbi5cbiAgICB2YXIgZGVmZXJyZWRPcGVyYXRpb24gPSB7fTtcblxuICAgIGRlZmVycmVkT3BlcmF0aW9uLnByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIGRlZmVycmVkT3BlcmF0aW9uLnJlc29sdmUgPSByZXNvbHZlO1xuICAgIH0pO1xuXG4gICAgLy8gRW5xdWV1ZSB0aGUgZGVmZXJyZWQgb3BlcmF0aW9uLlxuICAgIGRiQ29udGV4dC5kZWZlcnJlZE9wZXJhdGlvbnMucHVzaChkZWZlcnJlZE9wZXJhdGlvbik7XG5cbiAgICAvLyBDaGFpbiBpdHMgcHJvbWlzZSB0byB0aGUgZGF0YWJhc2UgcmVhZGluZXNzLlxuICAgIGlmICghZGJDb250ZXh0LmRiUmVhZHkpIHtcbiAgICAgICAgZGJDb250ZXh0LmRiUmVhZHkgPSBkZWZlcnJlZE9wZXJhdGlvbi5wcm9taXNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGRiQ29udGV4dC5kYlJlYWR5ID0gZGJDb250ZXh0LmRiUmVhZHkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWRPcGVyYXRpb24ucHJvbWlzZTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfYWR2YW5jZVJlYWRpbmVzcyhkYkluZm8pIHtcbiAgICB2YXIgZGJDb250ZXh0ID0gZGJDb250ZXh0c1tkYkluZm8ubmFtZV07XG5cbiAgICAvLyBEZXF1ZXVlIGEgZGVmZXJyZWQgb3BlcmF0aW9uLlxuICAgIHZhciBkZWZlcnJlZE9wZXJhdGlvbiA9IGRiQ29udGV4dC5kZWZlcnJlZE9wZXJhdGlvbnMucG9wKCk7XG5cbiAgICAvLyBSZXNvbHZlIGl0cyBwcm9taXNlICh3aGljaCBpcyBwYXJ0IG9mIHRoZSBkYXRhYmFzZSByZWFkaW5lc3NcbiAgICAvLyBjaGFpbiBvZiBwcm9taXNlcykuXG4gICAgaWYgKGRlZmVycmVkT3BlcmF0aW9uKSB7XG4gICAgICAgIGRlZmVycmVkT3BlcmF0aW9uLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9nZXRDb25uZWN0aW9uKGRiSW5mbywgdXBncmFkZU5lZWRlZCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcblxuICAgICAgICBpZiAoZGJJbmZvLmRiKSB7XG4gICAgICAgICAgICBpZiAodXBncmFkZU5lZWRlZCkge1xuICAgICAgICAgICAgICAgIF9kZWZlclJlYWRpbmVzcyhkYkluZm8pO1xuICAgICAgICAgICAgICAgIGRiSW5mby5kYi5jbG9zZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShkYkluZm8uZGIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRiQXJncyA9IFtkYkluZm8ubmFtZV07XG5cbiAgICAgICAgaWYgKHVwZ3JhZGVOZWVkZWQpIHtcbiAgICAgICAgICAgIGRiQXJncy5wdXNoKGRiSW5mby52ZXJzaW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvcGVucmVxID0gaWRiLm9wZW4uYXBwbHkoaWRiLCBkYkFyZ3MpO1xuXG4gICAgICAgIGlmICh1cGdyYWRlTmVlZGVkKSB7XG4gICAgICAgICAgICBvcGVucmVxLm9udXBncmFkZW5lZWRlZCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRiID0gb3BlbnJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoZGJJbmZvLnN0b3JlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLm9sZFZlcnNpb24gPD0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkZWQgd2hlbiBzdXBwb3J0IGZvciBibG9iIHNoaW1zIHdhcyBhZGRlZFxuICAgICAgICAgICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoREVURUNUX0JMT0JfU1VQUE9SVF9TVE9SRSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXgubmFtZSA9PT0gJ0NvbnN0cmFpbnRFcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVGhlIGRhdGFiYXNlIFwiJyArIGRiSW5mby5uYW1lICsgJ1wiJyArICcgaGFzIGJlZW4gdXBncmFkZWQgZnJvbSB2ZXJzaW9uICcgKyBlLm9sZFZlcnNpb24gKyAnIHRvIHZlcnNpb24gJyArIGUubmV3VmVyc2lvbiArICcsIGJ1dCB0aGUgc3RvcmFnZSBcIicgKyBkYkluZm8uc3RvcmVOYW1lICsgJ1wiIGFscmVhZHkgZXhpc3RzLicpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgb3BlbnJlcS5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJlamVjdChvcGVucmVxLmVycm9yKTtcbiAgICAgICAgfTtcblxuICAgICAgICBvcGVucmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc29sdmUob3BlbnJlcS5yZXN1bHQpO1xuICAgICAgICAgICAgX2FkdmFuY2VSZWFkaW5lc3MoZGJJbmZvKTtcbiAgICAgICAgfTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gX2dldE9yaWdpbmFsQ29ubmVjdGlvbihkYkluZm8pIHtcbiAgICByZXR1cm4gX2dldENvbm5lY3Rpb24oZGJJbmZvLCBmYWxzZSk7XG59XG5cbmZ1bmN0aW9uIF9nZXRVcGdyYWRlZENvbm5lY3Rpb24oZGJJbmZvKSB7XG4gICAgcmV0dXJuIF9nZXRDb25uZWN0aW9uKGRiSW5mbywgdHJ1ZSk7XG59XG5cbmZ1bmN0aW9uIF9pc1VwZ3JhZGVOZWVkZWQoZGJJbmZvLCBkZWZhdWx0VmVyc2lvbikge1xuICAgIGlmICghZGJJbmZvLmRiKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHZhciBpc05ld1N0b3JlID0gIWRiSW5mby5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKGRiSW5mby5zdG9yZU5hbWUpO1xuICAgIHZhciBpc0Rvd25ncmFkZSA9IGRiSW5mby52ZXJzaW9uIDwgZGJJbmZvLmRiLnZlcnNpb247XG4gICAgdmFyIGlzVXBncmFkZSA9IGRiSW5mby52ZXJzaW9uID4gZGJJbmZvLmRiLnZlcnNpb247XG5cbiAgICBpZiAoaXNEb3duZ3JhZGUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHZlcnNpb24gaXMgbm90IHRoZSBkZWZhdWx0IG9uZVxuICAgICAgICAvLyB0aGVuIHdhcm4gZm9yIGltcG9zc2libGUgZG93bmdyYWRlLlxuICAgICAgICBpZiAoZGJJbmZvLnZlcnNpb24gIT09IGRlZmF1bHRWZXJzaW9uKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RoZSBkYXRhYmFzZSBcIicgKyBkYkluZm8ubmFtZSArICdcIicgKyAnIGNhblxcJ3QgYmUgZG93bmdyYWRlZCBmcm9tIHZlcnNpb24gJyArIGRiSW5mby5kYi52ZXJzaW9uICsgJyB0byB2ZXJzaW9uICcgKyBkYkluZm8udmVyc2lvbiArICcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWxpZ24gdGhlIHZlcnNpb25zIHRvIHByZXZlbnQgZXJyb3JzLlxuICAgICAgICBkYkluZm8udmVyc2lvbiA9IGRiSW5mby5kYi52ZXJzaW9uO1xuICAgIH1cblxuICAgIGlmIChpc1VwZ3JhZGUgfHwgaXNOZXdTdG9yZSkge1xuICAgICAgICAvLyBJZiB0aGUgc3RvcmUgaXMgbmV3IHRoZW4gaW5jcmVtZW50IHRoZSB2ZXJzaW9uIChpZiBuZWVkZWQpLlxuICAgICAgICAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhbiBcInVwZ3JhZGVuZWVkZWRcIiBldmVudCB3aGljaCBpcyByZXF1aXJlZFxuICAgICAgICAvLyBmb3IgY3JlYXRpbmcgYSBzdG9yZS5cbiAgICAgICAgaWYgKGlzTmV3U3RvcmUpIHtcbiAgICAgICAgICAgIHZhciBpbmNWZXJzaW9uID0gZGJJbmZvLmRiLnZlcnNpb24gKyAxO1xuICAgICAgICAgICAgaWYgKGluY1ZlcnNpb24gPiBkYkluZm8udmVyc2lvbikge1xuICAgICAgICAgICAgICAgIGRiSW5mby52ZXJzaW9uID0gaW5jVmVyc2lvbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuLy8gZW5jb2RlIGEgYmxvYiBmb3IgaW5kZXhlZGRiIGVuZ2luZXMgdGhhdCBkb24ndCBzdXBwb3J0IGJsb2JzXG5mdW5jdGlvbiBfZW5jb2RlQmxvYihibG9iKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSByZWplY3Q7XG4gICAgICAgIHJlYWRlci5vbmxvYWRlbmQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIGJhc2U2NCA9IGJ0b2EoZS50YXJnZXQucmVzdWx0IHx8ICcnKTtcbiAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgIF9fbG9jYWxfZm9yYWdlX2VuY29kZWRfYmxvYjogdHJ1ZSxcbiAgICAgICAgICAgICAgICBkYXRhOiBiYXNlNjQsXG4gICAgICAgICAgICAgICAgdHlwZTogYmxvYi50eXBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0JpbmFyeVN0cmluZyhibG9iKTtcbiAgICB9KTtcbn1cblxuLy8gZGVjb2RlIGFuIGVuY29kZWQgYmxvYlxuZnVuY3Rpb24gX2RlY29kZUJsb2IoZW5jb2RlZEJsb2IpIHtcbiAgICB2YXIgYXJyYXlCdWZmID0gX2JpblN0cmluZ1RvQXJyYXlCdWZmZXIoYXRvYihlbmNvZGVkQmxvYi5kYXRhKSk7XG4gICAgcmV0dXJuIGNyZWF0ZUJsb2IoW2FycmF5QnVmZl0sIHsgdHlwZTogZW5jb2RlZEJsb2IudHlwZSB9KTtcbn1cblxuLy8gaXMgdGhpcyBvbmUgb2Ygb3VyIGZhbmN5IGVuY29kZWQgYmxvYnM/XG5mdW5jdGlvbiBfaXNFbmNvZGVkQmxvYih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSAmJiB2YWx1ZS5fX2xvY2FsX2ZvcmFnZV9lbmNvZGVkX2Jsb2I7XG59XG5cbi8vIFNwZWNpYWxpemUgdGhlIGRlZmF1bHQgYHJlYWR5KClgIGZ1bmN0aW9uIGJ5IG1ha2luZyBpdCBkZXBlbmRlbnRcbi8vIG9uIHRoZSBjdXJyZW50IGRhdGFiYXNlIG9wZXJhdGlvbnMuIFRodXMsIHRoZSBkcml2ZXIgd2lsbCBiZSBhY3R1YWxseVxuLy8gcmVhZHkgd2hlbiBpdCdzIGJlZW4gaW5pdGlhbGl6ZWQgKGRlZmF1bHQpICphbmQqIHRoZXJlIGFyZSBubyBwZW5kaW5nXG4vLyBvcGVyYXRpb25zIG9uIHRoZSBkYXRhYmFzZSAoaW5pdGlhdGVkIGJ5IHNvbWUgb3RoZXIgaW5zdGFuY2VzKS5cbmZ1bmN0aW9uIF9mdWxseVJlYWR5KGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBzZWxmLl9pbml0UmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiQ29udGV4dCA9IGRiQ29udGV4dHNbc2VsZi5fZGJJbmZvLm5hbWVdO1xuXG4gICAgICAgIGlmIChkYkNvbnRleHQgJiYgZGJDb250ZXh0LmRiUmVhZHkpIHtcbiAgICAgICAgICAgIHJldHVybiBkYkNvbnRleHQuZGJSZWFkeTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyhwcm9taXNlLCBjYWxsYmFjaywgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBPcGVuIHRoZSBJbmRleGVkREIgZGF0YWJhc2UgKGF1dG9tYXRpY2FsbHkgY3JlYXRlcyBvbmUgaWYgb25lIGRpZG4ndFxuLy8gcHJldmlvdXNseSBleGlzdCksIHVzaW5nIGFueSBvcHRpb25zIHNldCBpbiB0aGUgY29uZmlnLlxuZnVuY3Rpb24gX2luaXRTdG9yYWdlKG9wdGlvbnMpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGRiSW5mbyA9IHtcbiAgICAgICAgZGI6IG51bGxcbiAgICB9O1xuXG4gICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICBkYkluZm9baV0gPSBvcHRpb25zW2ldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gSW5pdGlhbGl6ZSBhIHNpbmdsZXRvbiBjb250YWluZXIgZm9yIGFsbCBydW5uaW5nIGxvY2FsRm9yYWdlcy5cbiAgICBpZiAoIWRiQ29udGV4dHMpIHtcbiAgICAgICAgZGJDb250ZXh0cyA9IHt9O1xuICAgIH1cblxuICAgIC8vIEdldCB0aGUgY3VycmVudCBjb250ZXh0IG9mIHRoZSBkYXRhYmFzZTtcbiAgICB2YXIgZGJDb250ZXh0ID0gZGJDb250ZXh0c1tkYkluZm8ubmFtZV07XG5cbiAgICAvLyAuLi5vciBjcmVhdGUgYSBuZXcgY29udGV4dC5cbiAgICBpZiAoIWRiQ29udGV4dCkge1xuICAgICAgICBkYkNvbnRleHQgPSB7XG4gICAgICAgICAgICAvLyBSdW5uaW5nIGxvY2FsRm9yYWdlcyBzaGFyaW5nIGEgZGF0YWJhc2UuXG4gICAgICAgICAgICBmb3JhZ2VzOiBbXSxcbiAgICAgICAgICAgIC8vIFNoYXJlZCBkYXRhYmFzZS5cbiAgICAgICAgICAgIGRiOiBudWxsLFxuICAgICAgICAgICAgLy8gRGF0YWJhc2UgcmVhZGluZXNzIChwcm9taXNlKS5cbiAgICAgICAgICAgIGRiUmVhZHk6IG51bGwsXG4gICAgICAgICAgICAvLyBEZWZlcnJlZCBvcGVyYXRpb25zIG9uIHRoZSBkYXRhYmFzZS5cbiAgICAgICAgICAgIGRlZmVycmVkT3BlcmF0aW9uczogW11cbiAgICAgICAgfTtcbiAgICAgICAgLy8gUmVnaXN0ZXIgdGhlIG5ldyBjb250ZXh0IGluIHRoZSBnbG9iYWwgY29udGFpbmVyLlxuICAgICAgICBkYkNvbnRleHRzW2RiSW5mby5uYW1lXSA9IGRiQ29udGV4dDtcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RlciBpdHNlbGYgYXMgYSBydW5uaW5nIGxvY2FsRm9yYWdlIGluIHRoZSBjdXJyZW50IGNvbnRleHQuXG4gICAgZGJDb250ZXh0LmZvcmFnZXMucHVzaChzZWxmKTtcblxuICAgIC8vIFJlcGxhY2UgdGhlIGRlZmF1bHQgYHJlYWR5KClgIGZ1bmN0aW9uIHdpdGggdGhlIHNwZWNpYWxpemVkIG9uZS5cbiAgICBpZiAoIXNlbGYuX2luaXRSZWFkeSkge1xuICAgICAgICBzZWxmLl9pbml0UmVhZHkgPSBzZWxmLnJlYWR5O1xuICAgICAgICBzZWxmLnJlYWR5ID0gX2Z1bGx5UmVhZHk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuIGFycmF5IG9mIGluaXRpYWxpemF0aW9uIHN0YXRlcyBvZiB0aGUgcmVsYXRlZCBsb2NhbEZvcmFnZXMuXG4gICAgdmFyIGluaXRQcm9taXNlcyA9IFtdO1xuXG4gICAgZnVuY3Rpb24gaWdub3JlRXJyb3JzKCkge1xuICAgICAgICAvLyBEb24ndCBoYW5kbGUgZXJyb3JzIGhlcmUsXG4gICAgICAgIC8vIGp1c3QgbWFrZXMgc3VyZSByZWxhdGVkIGxvY2FsRm9yYWdlcyBhcmVuJ3QgcGVuZGluZy5cbiAgICAgICAgcmV0dXJuIFByb21pc2UkMS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBkYkNvbnRleHQuZm9yYWdlcy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZm9yYWdlID0gZGJDb250ZXh0LmZvcmFnZXNbal07XG4gICAgICAgIGlmIChmb3JhZ2UgIT09IHNlbGYpIHtcbiAgICAgICAgICAgIC8vIERvbid0IHdhaXQgZm9yIGl0c2VsZi4uLlxuICAgICAgICAgICAgaW5pdFByb21pc2VzLnB1c2goZm9yYWdlLl9pbml0UmVhZHkoKVtcImNhdGNoXCJdKGlnbm9yZUVycm9ycykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGFrZSBhIHNuYXBzaG90IG9mIHRoZSByZWxhdGVkIGxvY2FsRm9yYWdlcy5cbiAgICB2YXIgZm9yYWdlcyA9IGRiQ29udGV4dC5mb3JhZ2VzLnNsaWNlKDApO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgY29ubmVjdGlvbiBwcm9jZXNzIG9ubHkgd2hlblxuICAgIC8vIGFsbCB0aGUgcmVsYXRlZCBsb2NhbEZvcmFnZXMgYXJlbid0IHBlbmRpbmcuXG4gICAgcmV0dXJuIFByb21pc2UkMS5hbGwoaW5pdFByb21pc2VzKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGJJbmZvLmRiID0gZGJDb250ZXh0LmRiO1xuICAgICAgICAvLyBHZXQgdGhlIGNvbm5lY3Rpb24gb3Igb3BlbiBhIG5ldyBvbmUgd2l0aG91dCB1cGdyYWRlLlxuICAgICAgICByZXR1cm4gX2dldE9yaWdpbmFsQ29ubmVjdGlvbihkYkluZm8pO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRiKSB7XG4gICAgICAgIGRiSW5mby5kYiA9IGRiO1xuICAgICAgICBpZiAoX2lzVXBncmFkZU5lZWRlZChkYkluZm8sIHNlbGYuX2RlZmF1bHRDb25maWcudmVyc2lvbikpIHtcbiAgICAgICAgICAgIC8vIFJlb3BlbiB0aGUgZGF0YWJhc2UgZm9yIHVwZ3JhZGluZy5cbiAgICAgICAgICAgIHJldHVybiBfZ2V0VXBncmFkZWRDb25uZWN0aW9uKGRiSW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRiO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRiKSB7XG4gICAgICAgIGRiSW5mby5kYiA9IGRiQ29udGV4dC5kYiA9IGRiO1xuICAgICAgICBzZWxmLl9kYkluZm8gPSBkYkluZm87XG4gICAgICAgIC8vIFNoYXJlIHRoZSBmaW5hbCBjb25uZWN0aW9uIGFtb25nc3QgcmVsYXRlZCBsb2NhbEZvcmFnZXMuXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZm9yYWdlcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgdmFyIGZvcmFnZSA9IGZvcmFnZXNba107XG4gICAgICAgICAgICBpZiAoZm9yYWdlICE9PSBzZWxmKSB7XG4gICAgICAgICAgICAgICAgLy8gU2VsZiBpcyBhbHJlYWR5IHVwLXRvLWRhdGUuXG4gICAgICAgICAgICAgICAgZm9yYWdlLl9kYkluZm8uZGIgPSBkYkluZm8uZGI7XG4gICAgICAgICAgICAgICAgZm9yYWdlLl9kYkluZm8udmVyc2lvbiA9IGRiSW5mby52ZXJzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEl0ZW0oa2V5LCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIENhc3QgdGhlIGtleSB0byBhIHN0cmluZywgYXMgdGhhdCdzIGFsbCB3ZSBjYW4gc2V0IGFzIGEga2V5LlxuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLndhcm4oa2V5ICsgJyB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgICBrZXkgPSBTdHJpbmcoa2V5KTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGRiSW5mby5zdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKGRiSW5mby5zdG9yZU5hbWUpO1xuICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLmdldChrZXkpO1xuXG4gICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZSA9IHJlcS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoX2lzRW5jb2RlZEJsb2IodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX2RlY29kZUJsb2IodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChyZXEuZXJyb3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gSXRlcmF0ZSBvdmVyIGFsbCBpdGVtcyBzdG9yZWQgaW4gZGF0YWJhc2UuXG5mdW5jdGlvbiBpdGVyYXRlKGl0ZXJhdG9yLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSBkYkluZm8uZGIudHJhbnNhY3Rpb24oZGJJbmZvLnN0b3JlTmFtZSwgJ3JlYWRvbmx5Jykub2JqZWN0U3RvcmUoZGJJbmZvLnN0b3JlTmFtZSk7XG5cbiAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZS5vcGVuQ3Vyc29yKCk7XG4gICAgICAgICAgICB2YXIgaXRlcmF0aW9uTnVtYmVyID0gMTtcblxuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxLnJlc3VsdDtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY3Vyc29yLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoX2lzRW5jb2RlZEJsb2IodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IF9kZWNvZGVCbG9iKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gaXRlcmF0b3IodmFsdWUsIGN1cnNvci5rZXksIGl0ZXJhdGlvbk51bWJlcisrKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcltcImNvbnRpbnVlXCJdKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuXG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHNldEl0ZW0oa2V5LCB2YWx1ZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGRiSW5mbztcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgaWYgKHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBCbG9iXScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NoZWNrQmxvYlN1cHBvcnQoZGJJbmZvLmRiKS50aGVuKGZ1bmN0aW9uIChibG9iU3VwcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmxvYlN1cHBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2VuY29kZUJsb2IodmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uID0gZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGRiSW5mby5zdG9yZU5hbWUsICdyZWFkd3JpdGUnKTtcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKGRiSW5mby5zdG9yZU5hbWUpO1xuICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLnB1dCh2YWx1ZSwga2V5KTtcblxuICAgICAgICAgICAgLy8gVGhlIHJlYXNvbiB3ZSBkb24ndCBfc2F2ZV8gbnVsbCBpcyBiZWNhdXNlIElFIDEwIGRvZXNcbiAgICAgICAgICAgIC8vIG5vdCBzdXBwb3J0IHNhdmluZyB0aGUgYG51bGxgIHR5cGUgaW4gSW5kZXhlZERCLiBIb3dcbiAgICAgICAgICAgIC8vIGlyb25pYywgZ2l2ZW4gdGhlIGJ1ZyBiZWxvdyFcbiAgICAgICAgICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvbG9jYWxGb3JhZ2UvaXNzdWVzLzE2MVxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gQ2FzdCB0byB1bmRlZmluZWQgc28gdGhlIHZhbHVlIHBhc3NlZCB0b1xuICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrL3Byb21pc2UgaXMgdGhlIHNhbWUgYXMgd2hhdCBvbmUgd291bGQgZ2V0IG91dFxuICAgICAgICAgICAgICAgIC8vIG9mIGBnZXRJdGVtKClgIGxhdGVyLiBUaGlzIGxlYWRzIHRvIHNvbWUgd2VpcmRuZXNzXG4gICAgICAgICAgICAgICAgLy8gKHNldEl0ZW0oJ2ZvbycsIHVuZGVmaW5lZCkgd2lsbCByZXR1cm4gYG51bGxgKSwgYnV0XG4gICAgICAgICAgICAgICAgLy8gaXQncyBub3QgbXkgZmF1bHQgbG9jYWxTdG9yYWdlIGlzIG91ciBiYXNlbGluZSBhbmQgdGhhdFxuICAgICAgICAgICAgICAgIC8vIGl0J3Mgd2VpcmQuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uYWJvcnQgPSB0cmFuc2FjdGlvbi5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBlcnIgPSByZXEuZXJyb3IgPyByZXEuZXJyb3IgOiByZXEudHJhbnNhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVJdGVtKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIHZhciB0cmFuc2FjdGlvbiA9IGRiSW5mby5kYi50cmFuc2FjdGlvbihkYkluZm8uc3RvcmVOYW1lLCAncmVhZHdyaXRlJyk7XG4gICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShkYkluZm8uc3RvcmVOYW1lKTtcblxuICAgICAgICAgICAgLy8gV2UgdXNlIGEgR3J1bnQgdGFzayB0byBtYWtlIHRoaXMgc2FmZSBmb3IgSUUgYW5kIHNvbWVcbiAgICAgICAgICAgIC8vIHZlcnNpb25zIG9mIEFuZHJvaWQgKGluY2x1ZGluZyB0aG9zZSB1c2VkIGJ5IENvcmRvdmEpLlxuICAgICAgICAgICAgLy8gTm9ybWFsbHkgSUUgd29uJ3QgbGlrZSBgLmRlbGV0ZSgpYCBhbmQgd2lsbCBpbnNpc3Qgb25cbiAgICAgICAgICAgIC8vIHVzaW5nIGBbJ2RlbGV0ZSddKClgLCBidXQgd2UgaGF2ZSBhIGJ1aWxkIHN0ZXAgdGhhdFxuICAgICAgICAgICAgLy8gZml4ZXMgdGhpcyBmb3IgdXMgbm93LlxuICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlW1wiZGVsZXRlXCJdKGtleSk7XG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvLyBUaGUgcmVxdWVzdCB3aWxsIGJlIGFsc28gYmUgYWJvcnRlZCBpZiB3ZSd2ZSBleGNlZWRlZCBvdXIgc3RvcmFnZVxuICAgICAgICAgICAgLy8gc3BhY2UuXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBlcnIgPSByZXEuZXJyb3IgPyByZXEuZXJyb3IgOiByZXEudHJhbnNhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBjbGVhcihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb24gPSBkYkluZm8uZGIudHJhbnNhY3Rpb24oZGJJbmZvLnN0b3JlTmFtZSwgJ3JlYWR3cml0ZScpO1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoZGJJbmZvLnN0b3JlTmFtZSk7XG4gICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUuY2xlYXIoKTtcblxuICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmFib3J0ID0gdHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyID0gcmVxLmVycm9yID8gcmVxLmVycm9yIDogcmVxLnRyYW5zYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbGVuZ3RoKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IGRiSW5mby5kYi50cmFuc2FjdGlvbihkYkluZm8uc3RvcmVOYW1lLCAncmVhZG9ubHknKS5vYmplY3RTdG9yZShkYkluZm8uc3RvcmVOYW1lKTtcbiAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZS5jb3VudCgpO1xuXG4gICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVxLnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGtleShuLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmIChuIDwgMCkge1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IGRiSW5mby5kYi50cmFuc2FjdGlvbihkYkluZm8uc3RvcmVOYW1lLCAncmVhZG9ubHknKS5vYmplY3RTdG9yZShkYkluZm8uc3RvcmVOYW1lKTtcblxuICAgICAgICAgICAgdmFyIGFkdmFuY2VkID0gZmFsc2U7XG4gICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUub3BlbkN1cnNvcigpO1xuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnNvcikge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIG1lYW5zIHRoZXJlIHdlcmVuJ3QgZW5vdWdoIGtleXNcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0aGUgZmlyc3Qga2V5LCByZXR1cm4gaXQgaWYgdGhhdCdzIHdoYXQgdGhleVxuICAgICAgICAgICAgICAgICAgICAvLyB3YW50ZWQuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY3Vyc29yLmtleSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFhZHZhbmNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBhc2sgdGhlIGN1cnNvciB0byBza2lwIGFoZWFkIG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHJlY29yZHMuXG4gICAgICAgICAgICAgICAgICAgICAgICBhZHZhbmNlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuYWR2YW5jZShuKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdoZW4gd2UgZ2V0IGhlcmUsIHdlJ3ZlIGdvdCB0aGUgbnRoIGtleS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY3Vyc29yLmtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXEub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGtleXMoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgdmFyIHN0b3JlID0gZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGRiSW5mby5zdG9yZU5hbWUsICdyZWFkb25seScpLm9iamVjdFN0b3JlKGRiSW5mby5zdG9yZU5hbWUpO1xuXG4gICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUub3BlbkN1cnNvcigpO1xuICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcblxuICAgICAgICAgICAgcmVxLm9uc3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxLnJlc3VsdDtcblxuICAgICAgICAgICAgICAgIGlmICghY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoa2V5cyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goY3Vyc29yLmtleSk7XG4gICAgICAgICAgICAgICAgY3Vyc29yW1wiY29udGludWVcIl0oKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChyZXEuZXJyb3IpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIGFzeW5jU3RvcmFnZSA9IHtcbiAgICBfZHJpdmVyOiAnYXN5bmNTdG9yYWdlJyxcbiAgICBfaW5pdFN0b3JhZ2U6IF9pbml0U3RvcmFnZSxcbiAgICBpdGVyYXRlOiBpdGVyYXRlLFxuICAgIGdldEl0ZW06IGdldEl0ZW0sXG4gICAgc2V0SXRlbTogc2V0SXRlbSxcbiAgICByZW1vdmVJdGVtOiByZW1vdmVJdGVtLFxuICAgIGNsZWFyOiBjbGVhcixcbiAgICBsZW5ndGg6IGxlbmd0aCxcbiAgICBrZXk6IGtleSxcbiAgICBrZXlzOiBrZXlzXG59O1xuXG4vLyBTYWRseSwgdGhlIGJlc3Qgd2F5IHRvIHNhdmUgYmluYXJ5IGRhdGEgaW4gV2ViU1FML2xvY2FsU3RvcmFnZSBpcyBzZXJpYWxpemluZ1xuLy8gaXQgdG8gQmFzZTY0LCBzbyB0aGlzIGlzIGhvdyB3ZSBzdG9yZSBpdCB0byBwcmV2ZW50IHZlcnkgc3RyYW5nZSBlcnJvcnMgd2l0aCBsZXNzXG4vLyB2ZXJib3NlIHdheXMgb2YgYmluYXJ5IDwtPiBzdHJpbmcgZGF0YSBzdG9yYWdlLlxudmFyIEJBU0VfQ0hBUlMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cbnZhciBCTE9CX1RZUEVfUFJFRklYID0gJ35+bG9jYWxfZm9yYWdlX3R5cGV+JztcbnZhciBCTE9CX1RZUEVfUFJFRklYX1JFR0VYID0gL15+fmxvY2FsX2ZvcmFnZV90eXBlfihbXn5dKyl+LztcblxudmFyIFNFUklBTElaRURfTUFSS0VSID0gJ19fbGZzY19fOic7XG52YXIgU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIID0gU0VSSUFMSVpFRF9NQVJLRVIubGVuZ3RoO1xuXG4vLyBPTUcgdGhlIHNlcmlhbGl6YXRpb25zIVxudmFyIFRZUEVfQVJSQVlCVUZGRVIgPSAnYXJiZic7XG52YXIgVFlQRV9CTE9CID0gJ2Jsb2InO1xudmFyIFRZUEVfSU5UOEFSUkFZID0gJ3NpMDgnO1xudmFyIFRZUEVfVUlOVDhBUlJBWSA9ICd1aTA4JztcbnZhciBUWVBFX1VJTlQ4Q0xBTVBFREFSUkFZID0gJ3VpYzgnO1xudmFyIFRZUEVfSU5UMTZBUlJBWSA9ICdzaTE2JztcbnZhciBUWVBFX0lOVDMyQVJSQVkgPSAnc2kzMic7XG52YXIgVFlQRV9VSU5UMTZBUlJBWSA9ICd1cjE2JztcbnZhciBUWVBFX1VJTlQzMkFSUkFZID0gJ3VpMzInO1xudmFyIFRZUEVfRkxPQVQzMkFSUkFZID0gJ2ZsMzInO1xudmFyIFRZUEVfRkxPQVQ2NEFSUkFZID0gJ2ZsNjQnO1xudmFyIFRZUEVfU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIID0gU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIICsgVFlQRV9BUlJBWUJVRkZFUi5sZW5ndGg7XG5cbnZhciB0b1N0cmluZyQxID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuZnVuY3Rpb24gc3RyaW5nVG9CdWZmZXIoc2VyaWFsaXplZFN0cmluZykge1xuICAgIC8vIEZpbGwgdGhlIHN0cmluZyBpbnRvIGEgQXJyYXlCdWZmZXIuXG4gICAgdmFyIGJ1ZmZlckxlbmd0aCA9IHNlcmlhbGl6ZWRTdHJpbmcubGVuZ3RoICogMC43NTtcbiAgICB2YXIgbGVuID0gc2VyaWFsaXplZFN0cmluZy5sZW5ndGg7XG4gICAgdmFyIGk7XG4gICAgdmFyIHAgPSAwO1xuICAgIHZhciBlbmNvZGVkMSwgZW5jb2RlZDIsIGVuY29kZWQzLCBlbmNvZGVkNDtcblxuICAgIGlmIChzZXJpYWxpemVkU3RyaW5nW3NlcmlhbGl6ZWRTdHJpbmcubGVuZ3RoIC0gMV0gPT09ICc9Jykge1xuICAgICAgICBidWZmZXJMZW5ndGgtLTtcbiAgICAgICAgaWYgKHNlcmlhbGl6ZWRTdHJpbmdbc2VyaWFsaXplZFN0cmluZy5sZW5ndGggLSAyXSA9PT0gJz0nKSB7XG4gICAgICAgICAgICBidWZmZXJMZW5ndGgtLTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoYnVmZmVyTGVuZ3RoKTtcbiAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShidWZmZXIpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgICAgIGVuY29kZWQxID0gQkFTRV9DSEFSUy5pbmRleE9mKHNlcmlhbGl6ZWRTdHJpbmdbaV0pO1xuICAgICAgICBlbmNvZGVkMiA9IEJBU0VfQ0hBUlMuaW5kZXhPZihzZXJpYWxpemVkU3RyaW5nW2kgKyAxXSk7XG4gICAgICAgIGVuY29kZWQzID0gQkFTRV9DSEFSUy5pbmRleE9mKHNlcmlhbGl6ZWRTdHJpbmdbaSArIDJdKTtcbiAgICAgICAgZW5jb2RlZDQgPSBCQVNFX0NIQVJTLmluZGV4T2Yoc2VyaWFsaXplZFN0cmluZ1tpICsgM10pO1xuXG4gICAgICAgIC8qanNsaW50IGJpdHdpc2U6IHRydWUgKi9cbiAgICAgICAgYnl0ZXNbcCsrXSA9IGVuY29kZWQxIDw8IDIgfCBlbmNvZGVkMiA+PiA0O1xuICAgICAgICBieXRlc1twKytdID0gKGVuY29kZWQyICYgMTUpIDw8IDQgfCBlbmNvZGVkMyA+PiAyO1xuICAgICAgICBieXRlc1twKytdID0gKGVuY29kZWQzICYgMykgPDwgNiB8IGVuY29kZWQ0ICYgNjM7XG4gICAgfVxuICAgIHJldHVybiBidWZmZXI7XG59XG5cbi8vIENvbnZlcnRzIGEgYnVmZmVyIHRvIGEgc3RyaW5nIHRvIHN0b3JlLCBzZXJpYWxpemVkLCBpbiB0aGUgYmFja2VuZFxuLy8gc3RvcmFnZSBsaWJyYXJ5LlxuZnVuY3Rpb24gYnVmZmVyVG9TdHJpbmcoYnVmZmVyKSB7XG4gICAgLy8gYmFzZTY0LWFycmF5YnVmZmVyXG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICB2YXIgYmFzZTY0U3RyaW5nID0gJyc7XG4gICAgdmFyIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgYnl0ZXMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgLypqc2xpbnQgYml0d2lzZTogdHJ1ZSAqL1xuICAgICAgICBiYXNlNjRTdHJpbmcgKz0gQkFTRV9DSEFSU1tieXRlc1tpXSA+PiAyXTtcbiAgICAgICAgYmFzZTY0U3RyaW5nICs9IEJBU0VfQ0hBUlNbKGJ5dGVzW2ldICYgMykgPDwgNCB8IGJ5dGVzW2kgKyAxXSA+PiA0XTtcbiAgICAgICAgYmFzZTY0U3RyaW5nICs9IEJBU0VfQ0hBUlNbKGJ5dGVzW2kgKyAxXSAmIDE1KSA8PCAyIHwgYnl0ZXNbaSArIDJdID4+IDZdO1xuICAgICAgICBiYXNlNjRTdHJpbmcgKz0gQkFTRV9DSEFSU1tieXRlc1tpICsgMl0gJiA2M107XG4gICAgfVxuXG4gICAgaWYgKGJ5dGVzLmxlbmd0aCAlIDMgPT09IDIpIHtcbiAgICAgICAgYmFzZTY0U3RyaW5nID0gYmFzZTY0U3RyaW5nLnN1YnN0cmluZygwLCBiYXNlNjRTdHJpbmcubGVuZ3RoIC0gMSkgKyAnPSc7XG4gICAgfSBlbHNlIGlmIChieXRlcy5sZW5ndGggJSAzID09PSAxKSB7XG4gICAgICAgIGJhc2U2NFN0cmluZyA9IGJhc2U2NFN0cmluZy5zdWJzdHJpbmcoMCwgYmFzZTY0U3RyaW5nLmxlbmd0aCAtIDIpICsgJz09JztcbiAgICB9XG5cbiAgICByZXR1cm4gYmFzZTY0U3RyaW5nO1xufVxuXG4vLyBTZXJpYWxpemUgYSB2YWx1ZSwgYWZ0ZXJ3YXJkcyBleGVjdXRpbmcgYSBjYWxsYmFjayAod2hpY2ggdXN1YWxseVxuLy8gaW5zdHJ1Y3RzIHRoZSBgc2V0SXRlbSgpYCBjYWxsYmFjay9wcm9taXNlIHRvIGJlIGV4ZWN1dGVkKS4gVGhpcyBpcyBob3dcbi8vIHdlIHN0b3JlIGJpbmFyeSBkYXRhIHdpdGggbG9jYWxTdG9yYWdlLlxuZnVuY3Rpb24gc2VyaWFsaXplKHZhbHVlLCBjYWxsYmFjaykge1xuICAgIHZhciB2YWx1ZVR5cGUgPSAnJztcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgdmFsdWVUeXBlID0gdG9TdHJpbmckMS5jYWxsKHZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBDYW5ub3QgdXNlIGB2YWx1ZSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyYCBvciBzdWNoIGhlcmUsIGFzIHRoZXNlXG4gICAgLy8gY2hlY2tzIGZhaWwgd2hlbiBydW5uaW5nIHRoZSB0ZXN0cyB1c2luZyBjYXNwZXIuanMuLi5cbiAgICAvL1xuICAgIC8vIFRPRE86IFNlZSB3aHkgdGhvc2UgdGVzdHMgZmFpbCBhbmQgdXNlIGEgYmV0dGVyIHNvbHV0aW9uLlxuICAgIGlmICh2YWx1ZSAmJiAodmFsdWVUeXBlID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nIHx8IHZhbHVlLmJ1ZmZlciAmJiB0b1N0cmluZyQxLmNhbGwodmFsdWUuYnVmZmVyKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykpIHtcbiAgICAgICAgLy8gQ29udmVydCBiaW5hcnkgYXJyYXlzIHRvIGEgc3RyaW5nIGFuZCBwcmVmaXggdGhlIHN0cmluZyB3aXRoXG4gICAgICAgIC8vIGEgc3BlY2lhbCBtYXJrZXIuXG4gICAgICAgIHZhciBidWZmZXI7XG4gICAgICAgIHZhciBtYXJrZXIgPSBTRVJJQUxJWkVEX01BUktFUjtcblxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICAgICAgYnVmZmVyID0gdmFsdWU7XG4gICAgICAgICAgICBtYXJrZXIgKz0gVFlQRV9BUlJBWUJVRkZFUjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJ1ZmZlciA9IHZhbHVlLmJ1ZmZlcjtcblxuICAgICAgICAgICAgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgSW50OEFycmF5XScpIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIgKz0gVFlQRV9JTlQ4QVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgVWludDhBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfVUlOVDhBUlJBWTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVUeXBlID09PSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfVUlOVDhDTEFNUEVEQVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgSW50MTZBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfSU5UMTZBUlJBWTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVUeXBlID09PSAnW29iamVjdCBVaW50MTZBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfVUlOVDE2QVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgSW50MzJBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfSU5UMzJBUlJBWTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVUeXBlID09PSAnW29iamVjdCBVaW50MzJBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfVUlOVDMyQVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScpIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIgKz0gVFlQRV9GTE9BVDMyQVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScpIHtcbiAgICAgICAgICAgICAgICBtYXJrZXIgKz0gVFlQRV9GTE9BVDY0QVJSQVk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcignRmFpbGVkIHRvIGdldCB0eXBlIGZvciBCaW5hcnlBcnJheScpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNhbGxiYWNrKG1hcmtlciArIGJ1ZmZlclRvU3RyaW5nKGJ1ZmZlcikpO1xuICAgIH0gZWxzZSBpZiAodmFsdWVUeXBlID09PSAnW29iamVjdCBCbG9iXScpIHtcbiAgICAgICAgLy8gQ29udmVyIHRoZSBibG9iIHRvIGEgYmluYXJ5QXJyYXkgYW5kIHRoZW4gdG8gYSBzdHJpbmcuXG4gICAgICAgIHZhciBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIEJhY2t3YXJkcy1jb21wYXRpYmxlIHByZWZpeCBmb3IgdGhlIGJsb2IgdHlwZS5cbiAgICAgICAgICAgIHZhciBzdHIgPSBCTE9CX1RZUEVfUFJFRklYICsgdmFsdWUudHlwZSArICd+JyArIGJ1ZmZlclRvU3RyaW5nKHRoaXMucmVzdWx0KTtcblxuICAgICAgICAgICAgY2FsbGJhY2soU0VSSUFMSVpFRF9NQVJLRVIgKyBUWVBFX0JMT0IgKyBzdHIpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjYWxsYmFjayhKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiQ291bGRuJ3QgY29udmVydCB2YWx1ZSBpbnRvIGEgSlNPTiBzdHJpbmc6IFwiLCB2YWx1ZSk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKG51bGwsIGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBEZXNlcmlhbGl6ZSBkYXRhIHdlJ3ZlIGluc2VydGVkIGludG8gYSB2YWx1ZSBjb2x1bW4vZmllbGQuIFdlIHBsYWNlXG4vLyBzcGVjaWFsIG1hcmtlcnMgaW50byBvdXIgc3RyaW5ncyB0byBtYXJrIHRoZW0gYXMgZW5jb2RlZDsgdGhpcyBpc24ndFxuLy8gYXMgbmljZSBhcyBhIG1ldGEgZmllbGQsIGJ1dCBpdCdzIHRoZSBvbmx5IHNhbmUgdGhpbmcgd2UgY2FuIGRvIHdoaWxzdFxuLy8ga2VlcGluZyBsb2NhbFN0b3JhZ2Ugc3VwcG9ydCBpbnRhY3QuXG4vL1xuLy8gT2Z0ZW50aW1lcyB0aGlzIHdpbGwganVzdCBkZXNlcmlhbGl6ZSBKU09OIGNvbnRlbnQsIGJ1dCBpZiB3ZSBoYXZlIGFcbi8vIHNwZWNpYWwgbWFya2VyIChTRVJJQUxJWkVEX01BUktFUiwgZGVmaW5lZCBhYm92ZSksIHdlIHdpbGwgZXh0cmFjdFxuLy8gc29tZSBraW5kIG9mIGFycmF5YnVmZmVyL2JpbmFyeSBkYXRhL3R5cGVkIGFycmF5IG91dCBvZiB0aGUgc3RyaW5nLlxuZnVuY3Rpb24gZGVzZXJpYWxpemUodmFsdWUpIHtcbiAgICAvLyBJZiB3ZSBoYXZlbid0IG1hcmtlZCB0aGlzIHN0cmluZyBhcyBiZWluZyBzcGVjaWFsbHkgc2VyaWFsaXplZCAoaS5lLlxuICAgIC8vIHNvbWV0aGluZyBvdGhlciB0aGFuIHNlcmlhbGl6ZWQgSlNPTiksIHdlIGNhbiBqdXN0IHJldHVybiBpdCBhbmQgYmVcbiAgICAvLyBkb25lIHdpdGggaXQuXG4gICAgaWYgKHZhbHVlLnN1YnN0cmluZygwLCBTRVJJQUxJWkVEX01BUktFUl9MRU5HVEgpICE9PSBTRVJJQUxJWkVEX01BUktFUikge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gVGhlIGZvbGxvd2luZyBjb2RlIGRlYWxzIHdpdGggZGVzZXJpYWxpemluZyBzb21lIGtpbmQgb2YgQmxvYiBvclxuICAgIC8vIFR5cGVkQXJyYXkuIEZpcnN0IHdlIHNlcGFyYXRlIG91dCB0aGUgdHlwZSBvZiBkYXRhIHdlJ3JlIGRlYWxpbmdcbiAgICAvLyB3aXRoIGZyb20gdGhlIGRhdGEgaXRzZWxmLlxuICAgIHZhciBzZXJpYWxpemVkU3RyaW5nID0gdmFsdWUuc3Vic3RyaW5nKFRZUEVfU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIKTtcbiAgICB2YXIgdHlwZSA9IHZhbHVlLnN1YnN0cmluZyhTRVJJQUxJWkVEX01BUktFUl9MRU5HVEgsIFRZUEVfU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIKTtcblxuICAgIHZhciBibG9iVHlwZTtcbiAgICAvLyBCYWNrd2FyZHMtY29tcGF0aWJsZSBibG9iIHR5cGUgc2VyaWFsaXphdGlvbiBzdHJhdGVneS5cbiAgICAvLyBEQnMgY3JlYXRlZCB3aXRoIG9sZGVyIHZlcnNpb25zIG9mIGxvY2FsRm9yYWdlIHdpbGwgc2ltcGx5IG5vdCBoYXZlIHRoZSBibG9iIHR5cGUuXG4gICAgaWYgKHR5cGUgPT09IFRZUEVfQkxPQiAmJiBCTE9CX1RZUEVfUFJFRklYX1JFR0VYLnRlc3Qoc2VyaWFsaXplZFN0cmluZykpIHtcbiAgICAgICAgdmFyIG1hdGNoZXIgPSBzZXJpYWxpemVkU3RyaW5nLm1hdGNoKEJMT0JfVFlQRV9QUkVGSVhfUkVHRVgpO1xuICAgICAgICBibG9iVHlwZSA9IG1hdGNoZXJbMV07XG4gICAgICAgIHNlcmlhbGl6ZWRTdHJpbmcgPSBzZXJpYWxpemVkU3RyaW5nLnN1YnN0cmluZyhtYXRjaGVyWzBdLmxlbmd0aCk7XG4gICAgfVxuICAgIHZhciBidWZmZXIgPSBzdHJpbmdUb0J1ZmZlcihzZXJpYWxpemVkU3RyaW5nKTtcblxuICAgIC8vIFJldHVybiB0aGUgcmlnaHQgdHlwZSBiYXNlZCBvbiB0aGUgY29kZS90eXBlIHNldCBkdXJpbmdcbiAgICAvLyBzZXJpYWxpemF0aW9uLlxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIFRZUEVfQVJSQVlCVUZGRVI6XG4gICAgICAgICAgICByZXR1cm4gYnVmZmVyO1xuICAgICAgICBjYXNlIFRZUEVfQkxPQjpcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVCbG9iKFtidWZmZXJdLCB7IHR5cGU6IGJsb2JUeXBlIH0pO1xuICAgICAgICBjYXNlIFRZUEVfSU5UOEFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSBUWVBFX1VJTlQ4QVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSBUWVBFX1VJTlQ4Q0xBTVBFREFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OENsYW1wZWRBcnJheShidWZmZXIpO1xuICAgICAgICBjYXNlIFRZUEVfSU5UMTZBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW50MTZBcnJheShidWZmZXIpO1xuICAgICAgICBjYXNlIFRZUEVfVUlOVDE2QVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQxNkFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9JTlQzMkFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbnQzMkFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9VSU5UMzJBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDMyQXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSBUWVBFX0ZMT0FUMzJBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9GTE9BVDY0QVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0NjRBcnJheShidWZmZXIpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtvd24gdHlwZTogJyArIHR5cGUpO1xuICAgIH1cbn1cblxudmFyIGxvY2FsZm9yYWdlU2VyaWFsaXplciA9IHtcbiAgICBzZXJpYWxpemU6IHNlcmlhbGl6ZSxcbiAgICBkZXNlcmlhbGl6ZTogZGVzZXJpYWxpemUsXG4gICAgc3RyaW5nVG9CdWZmZXI6IHN0cmluZ1RvQnVmZmVyLFxuICAgIGJ1ZmZlclRvU3RyaW5nOiBidWZmZXJUb1N0cmluZ1xufTtcblxuLypcbiAqIEluY2x1ZGVzIGNvZGUgZnJvbTpcbiAqXG4gKiBiYXNlNjQtYXJyYXlidWZmZXJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9uaWtsYXN2aC9iYXNlNjQtYXJyYXlidWZmZXJcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTIgTmlrbGFzIHZvbiBIZXJ0emVuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKi9cbi8vIE9wZW4gdGhlIFdlYlNRTCBkYXRhYmFzZSAoYXV0b21hdGljYWxseSBjcmVhdGVzIG9uZSBpZiBvbmUgZGlkbid0XG4vLyBwcmV2aW91c2x5IGV4aXN0KSwgdXNpbmcgYW55IG9wdGlvbnMgc2V0IGluIHRoZSBjb25maWcuXG5mdW5jdGlvbiBfaW5pdFN0b3JhZ2UkMShvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkYkluZm8gPSB7XG4gICAgICAgIGRiOiBudWxsXG4gICAgfTtcblxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgIGZvciAodmFyIGkgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgZGJJbmZvW2ldID0gdHlwZW9mIG9wdGlvbnNbaV0gIT09ICdzdHJpbmcnID8gb3B0aW9uc1tpXS50b1N0cmluZygpIDogb3B0aW9uc1tpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBkYkluZm9Qcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIE9wZW4gdGhlIGRhdGFiYXNlOyB0aGUgb3BlbkRhdGFiYXNlIEFQSSB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgICAgICAgLy8gY3JlYXRlIGl0IGZvciB1cyBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGJJbmZvLmRiID0gb3BlbkRhdGFiYXNlKGRiSW5mby5uYW1lLCBTdHJpbmcoZGJJbmZvLnZlcnNpb24pLCBkYkluZm8uZGVzY3JpcHRpb24sIGRiSW5mby5zaXplKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBvdXIga2V5L3ZhbHVlIHRhYmxlIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdC5leGVjdXRlU3FsKCdDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyAnICsgZGJJbmZvLnN0b3JlTmFtZSArICcgKGlkIElOVEVHRVIgUFJJTUFSWSBLRVksIGtleSB1bmlxdWUsIHZhbHVlKScsIFtdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fZGJJbmZvID0gZGJJbmZvO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkYkluZm8uc2VyaWFsaXplciA9IGxvY2FsZm9yYWdlU2VyaWFsaXplcjtcbiAgICByZXR1cm4gZGJJbmZvUHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gZ2V0SXRlbSQxKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnU0VMRUNUICogRlJPTSAnICsgZGJJbmZvLnN0b3JlTmFtZSArICcgV0hFUkUga2V5ID0gPyBMSU1JVCAxJywgW2tleV0sIGZ1bmN0aW9uICh0LCByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXN1bHRzLnJvd3MubGVuZ3RoID8gcmVzdWx0cy5yb3dzLml0ZW0oMCkudmFsdWUgOiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGlzIGlzIHNlcmlhbGl6ZWQgY29udGVudCB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAgICAgICAgIC8vIHVucGFjay5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZGJJbmZvLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAodCwgZXJyb3IpIHtcblxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGl0ZXJhdGUkMShpdGVyYXRvciwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuXG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB0LmV4ZWN1dGVTcWwoJ1NFTEVDVCAqIEZST00gJyArIGRiSW5mby5zdG9yZU5hbWUsIFtdLCBmdW5jdGlvbiAodCwgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IHJlc3VsdHMucm93cztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHJvd3MubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gcm93cy5pdGVtKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZW0udmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGlzIGlzIHNlcmlhbGl6ZWQgY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byB1bnBhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZGJJbmZvLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gaXRlcmF0b3IocmVzdWx0LCBpdGVtLmtleSwgaSArIDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2b2lkKDApIHByZXZlbnRzIHByb2JsZW1zIHdpdGggcmVkZWZpbml0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvZiBgdW5kZWZpbmVkYC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX3NldEl0ZW0oa2V5LCB2YWx1ZSwgY2FsbGJhY2ssIHJldHJpZXNMZWZ0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gQ2FzdCB0aGUga2V5IHRvIGEgc3RyaW5nLCBhcyB0aGF0J3MgYWxsIHdlIGNhbiBzZXQgYXMgYSBrZXkuXG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihrZXkgKyAnIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgICAgIGtleSA9IFN0cmluZyhrZXkpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFRoZSBsb2NhbFN0b3JhZ2UgQVBJIGRvZXNuJ3QgcmV0dXJuIHVuZGVmaW5lZCB2YWx1ZXMgaW4gYW5cbiAgICAgICAgICAgIC8vIFwiZXhwZWN0ZWRcIiB3YXksIHNvIHVuZGVmaW5lZCBpcyBhbHdheXMgY2FzdCB0byBudWxsIGluIGFsbFxuICAgICAgICAgICAgLy8gZHJpdmVycy4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS9sb2NhbEZvcmFnZS9wdWxsLzQyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgb3JpZ2luYWwgdmFsdWUgdG8gcGFzcyB0byB0aGUgY2FsbGJhY2suXG4gICAgICAgICAgICB2YXIgb3JpZ2luYWxWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgZGJJbmZvLnNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLCBmdW5jdGlvbiAodmFsdWUsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0LmV4ZWN1dGVTcWwoJ0lOU0VSVCBPUiBSRVBMQUNFIElOVE8gJyArIGRiSW5mby5zdG9yZU5hbWUgKyAnIChrZXksIHZhbHVlKSBWQUxVRVMgKD8sID8pJywgW2tleSwgdmFsdWVdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvcmlnaW5hbFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHNxbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNhY3Rpb24gZmFpbGVkOyBjaGVja1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gc2VlIGlmIGl0J3MgYSBxdW90YSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcWxFcnJvci5jb2RlID09PSBzcWxFcnJvci5RVU9UQV9FUlIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSByZWplY3QgdGhlIGNhbGxiYWNrIG91dHJpZ2h0IGZvciBub3csIGJ1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3Mgd29ydGggdHJ5aW5nIHRvIHJlLXJ1biB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXZlbiBpZiB0aGUgdXNlciBhY2NlcHRzIHRoZSBwcm9tcHQgdG8gdXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbW9yZSBzdG9yYWdlIG9uIFNhZmFyaSwgdGhpcyBlcnJvciB3aWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmUgY2FsbGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHJlLXJ1biB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldHJpZXNMZWZ0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF9zZXRJdGVtLmFwcGx5KHNlbGYsIFtrZXksIG9yaWdpbmFsVmFsdWUsIGNhbGxiYWNrLCByZXRyaWVzTGVmdCAtIDFdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHNxbEVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHNldEl0ZW0kMShrZXksIHZhbHVlLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBfc2V0SXRlbS5hcHBseSh0aGlzLCBba2V5LCB2YWx1ZSwgY2FsbGJhY2ssIDFdKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSXRlbSQxKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAvLyBDYXN0IHRoZSBrZXkgdG8gYSBzdHJpbmcsIGFzIHRoYXQncyBhbGwgd2UgY2FuIHNldCBhcyBhIGtleS5cbiAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGtleSArICcgdXNlZCBhcyBhIGtleSwgYnV0IGl0IGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAga2V5ID0gU3RyaW5nKGtleSk7XG4gICAgfVxuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnREVMRVRFIEZST00gJyArIGRiSW5mby5zdG9yZU5hbWUgKyAnIFdIRVJFIGtleSA9ID8nLCBba2V5XSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBEZWxldGVzIGV2ZXJ5IGl0ZW0gaW4gdGhlIHRhYmxlLlxuLy8gVE9ETzogRmluZCBvdXQgaWYgdGhpcyByZXNldHMgdGhlIEFVVE9fSU5DUkVNRU5UIG51bWJlci5cbmZ1bmN0aW9uIGNsZWFyJDEoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdC5leGVjdXRlU3FsKCdERUxFVEUgRlJPTSAnICsgZGJJbmZvLnN0b3JlTmFtZSwgW10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIERvZXMgYSBzaW1wbGUgYENPVU5UKGtleSlgIHRvIGdldCB0aGUgbnVtYmVyIG9mIGl0ZW1zIHN0b3JlZCBpblxuLy8gbG9jYWxGb3JhZ2UuXG5mdW5jdGlvbiBsZW5ndGgkMShjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAvLyBBaGhoLCBTUUwgbWFrZXMgdGhpcyBvbmUgc29vb29vbyBlYXN5LlxuICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnU0VMRUNUIENPVU5UKGtleSkgYXMgYyBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lLCBbXSwgZnVuY3Rpb24gKHQsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3VsdHMucm93cy5pdGVtKDApLmM7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gUmV0dXJuIHRoZSBrZXkgbG9jYXRlZCBhdCBrZXkgaW5kZXggWDsgZXNzZW50aWFsbHkgZ2V0cyB0aGUga2V5IGZyb20gYVxuLy8gYFdIRVJFIGlkID0gP2AuIFRoaXMgaXMgdGhlIG1vc3QgZWZmaWNpZW50IHdheSBJIGNhbiB0aGluayB0byBpbXBsZW1lbnRcbi8vIHRoaXMgcmFyZWx5LXVzZWQgKGluIG15IGV4cGVyaWVuY2UpIHBhcnQgb2YgdGhlIEFQSSwgYnV0IGl0IGNhbiBzZWVtXG4vLyBpbmNvbnNpc3RlbnQsIGJlY2F1c2Ugd2UgZG8gYElOU0VSVCBPUiBSRVBMQUNFIElOVE9gIG9uIGBzZXRJdGVtKClgLCBzb1xuLy8gdGhlIElEIG9mIGVhY2gga2V5IHdpbGwgY2hhbmdlIGV2ZXJ5IHRpbWUgaXQncyB1cGRhdGVkLiBQZXJoYXBzIGEgc3RvcmVkXG4vLyBwcm9jZWR1cmUgZm9yIHRoZSBgc2V0SXRlbSgpYCBTUUwgd291bGQgc29sdmUgdGhpcyBwcm9ibGVtP1xuLy8gVE9ETzogRG9uJ3QgY2hhbmdlIElEIG9uIGBzZXRJdGVtKClgLlxuZnVuY3Rpb24ga2V5JDEobiwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdC5leGVjdXRlU3FsKCdTRUxFQ1Qga2V5IEZST00gJyArIGRiSW5mby5zdG9yZU5hbWUgKyAnIFdIRVJFIGlkID0gPyBMSU1JVCAxJywgW24gKyAxXSwgZnVuY3Rpb24gKHQsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3VsdHMucm93cy5sZW5ndGggPyByZXN1bHRzLnJvd3MuaXRlbSgwKS5rZXkgOiBudWxsO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24ga2V5cyQxKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnU0VMRUNUIGtleSBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lLCBbXSwgZnVuY3Rpb24gKHQsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdHMucm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAga2V5cy5wdXNoKHJlc3VsdHMucm93cy5pdGVtKGkpLmtleSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGtleXMpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxudmFyIHdlYlNRTFN0b3JhZ2UgPSB7XG4gICAgX2RyaXZlcjogJ3dlYlNRTFN0b3JhZ2UnLFxuICAgIF9pbml0U3RvcmFnZTogX2luaXRTdG9yYWdlJDEsXG4gICAgaXRlcmF0ZTogaXRlcmF0ZSQxLFxuICAgIGdldEl0ZW06IGdldEl0ZW0kMSxcbiAgICBzZXRJdGVtOiBzZXRJdGVtJDEsXG4gICAgcmVtb3ZlSXRlbTogcmVtb3ZlSXRlbSQxLFxuICAgIGNsZWFyOiBjbGVhciQxLFxuICAgIGxlbmd0aDogbGVuZ3RoJDEsXG4gICAga2V5OiBrZXkkMSxcbiAgICBrZXlzOiBrZXlzJDFcbn07XG5cbi8vIENvbmZpZyB0aGUgbG9jYWxTdG9yYWdlIGJhY2tlbmQsIHVzaW5nIG9wdGlvbnMgc2V0IGluIHRoZSBjb25maWcuXG5mdW5jdGlvbiBfaW5pdFN0b3JhZ2UkMihvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkYkluZm8gPSB7fTtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGRiSW5mb1tpXSA9IG9wdGlvbnNbaV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkYkluZm8ua2V5UHJlZml4ID0gZGJJbmZvLm5hbWUgKyAnLyc7XG5cbiAgICBpZiAoZGJJbmZvLnN0b3JlTmFtZSAhPT0gc2VsZi5fZGVmYXVsdENvbmZpZy5zdG9yZU5hbWUpIHtcbiAgICAgICAgZGJJbmZvLmtleVByZWZpeCArPSBkYkluZm8uc3RvcmVOYW1lICsgJy8nO1xuICAgIH1cblxuICAgIHNlbGYuX2RiSW5mbyA9IGRiSW5mbztcbiAgICBkYkluZm8uc2VyaWFsaXplciA9IGxvY2FsZm9yYWdlU2VyaWFsaXplcjtcblxuICAgIHJldHVybiBQcm9taXNlJDEucmVzb2x2ZSgpO1xufVxuXG4vLyBSZW1vdmUgYWxsIGtleXMgZnJvbSB0aGUgZGF0YXN0b3JlLCBlZmZlY3RpdmVseSBkZXN0cm95aW5nIGFsbCBkYXRhIGluXG4vLyB0aGUgYXBwJ3Mga2V5L3ZhbHVlIHN0b3JlIVxuZnVuY3Rpb24gY2xlYXIkMihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGtleVByZWZpeCA9IHNlbGYuX2RiSW5mby5rZXlQcmVmaXg7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IGxvY2FsU3RvcmFnZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgdmFyIGtleSA9IGxvY2FsU3RvcmFnZS5rZXkoaSk7XG5cbiAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihrZXlQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gUmV0cmlldmUgYW4gaXRlbSBmcm9tIHRoZSBzdG9yZS4gVW5saWtlIHRoZSBvcmlnaW5hbCBhc3luY19zdG9yYWdlXG4vLyBsaWJyYXJ5IGluIEdhaWEsIHdlIGRvbid0IG1vZGlmeSByZXR1cm4gdmFsdWVzIGF0IGFsbC4gSWYgYSBrZXkncyB2YWx1ZVxuLy8gaXMgYHVuZGVmaW5lZGAsIHdlIHBhc3MgdGhhdCB2YWx1ZSB0byB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXG5mdW5jdGlvbiBnZXRJdGVtJDIoa2V5LCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIENhc3QgdGhlIGtleSB0byBhIHN0cmluZywgYXMgdGhhdCdzIGFsbCB3ZSBjYW4gc2V0IGFzIGEga2V5LlxuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLndhcm4oa2V5ICsgJyB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgICBrZXkgPSBTdHJpbmcoa2V5KTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgdmFyIHJlc3VsdCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGRiSW5mby5rZXlQcmVmaXggKyBrZXkpO1xuXG4gICAgICAgIC8vIElmIGEgcmVzdWx0IHdhcyBmb3VuZCwgcGFyc2UgaXQgZnJvbSB0aGUgc2VyaWFsaXplZFxuICAgICAgICAvLyBzdHJpbmcgaW50byBhIEpTIG9iamVjdC4gSWYgcmVzdWx0IGlzbid0IHRydXRoeSwgdGhlIGtleVxuICAgICAgICAvLyBpcyBsaWtlbHkgdW5kZWZpbmVkIGFuZCB3ZSdsbCBwYXNzIGl0IHN0cmFpZ2h0IHRvIHRoZVxuICAgICAgICAvLyBjYWxsYmFjay5cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gZGJJbmZvLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUocmVzdWx0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBJdGVyYXRlIG92ZXIgYWxsIGl0ZW1zIGluIHRoZSBzdG9yZS5cbmZ1bmN0aW9uIGl0ZXJhdGUkMihpdGVyYXRvciwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgdmFyIGtleVByZWZpeCA9IGRiSW5mby5rZXlQcmVmaXg7XG4gICAgICAgIHZhciBrZXlQcmVmaXhMZW5ndGggPSBrZXlQcmVmaXgubGVuZ3RoO1xuICAgICAgICB2YXIgbGVuZ3RoID0gbG9jYWxTdG9yYWdlLmxlbmd0aDtcblxuICAgICAgICAvLyBXZSB1c2UgYSBkZWRpY2F0ZWQgaXRlcmF0b3IgaW5zdGVhZCBvZiB0aGUgYGlgIHZhcmlhYmxlIGJlbG93XG4gICAgICAgIC8vIHNvIG90aGVyIGtleXMgd2UgZmV0Y2ggaW4gbG9jYWxTdG9yYWdlIGFyZW4ndCBjb3VudGVkIGluXG4gICAgICAgIC8vIHRoZSBgaXRlcmF0aW9uTnVtYmVyYCBhcmd1bWVudCBwYXNzZWQgdG8gdGhlIGBpdGVyYXRlKClgXG4gICAgICAgIC8vIGNhbGxiYWNrLlxuICAgICAgICAvL1xuICAgICAgICAvLyBTZWU6IGdpdGh1Yi5jb20vbW96aWxsYS9sb2NhbEZvcmFnZS9wdWxsLzQzNSNkaXNjdXNzaW9uX3IzODA2MTUzMFxuICAgICAgICB2YXIgaXRlcmF0aW9uTnVtYmVyID0gMTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIga2V5ID0gbG9jYWxTdG9yYWdlLmtleShpKTtcbiAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihrZXlQcmVmaXgpICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuXG4gICAgICAgICAgICAvLyBJZiBhIHJlc3VsdCB3YXMgZm91bmQsIHBhcnNlIGl0IGZyb20gdGhlIHNlcmlhbGl6ZWRcbiAgICAgICAgICAgIC8vIHN0cmluZyBpbnRvIGEgSlMgb2JqZWN0LiBJZiByZXN1bHQgaXNuJ3QgdHJ1dGh5LCB0aGVcbiAgICAgICAgICAgIC8vIGtleSBpcyBsaWtlbHkgdW5kZWZpbmVkIGFuZCB3ZSdsbCBwYXNzIGl0IHN0cmFpZ2h0XG4gICAgICAgICAgICAvLyB0byB0aGUgaXRlcmF0b3IuXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IGRiSW5mby5zZXJpYWxpemVyLmRlc2VyaWFsaXplKHZhbHVlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFsdWUgPSBpdGVyYXRvcih2YWx1ZSwga2V5LnN1YnN0cmluZyhrZXlQcmVmaXhMZW5ndGgpLCBpdGVyYXRpb25OdW1iZXIrKyk7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBTYW1lIGFzIGxvY2FsU3RvcmFnZSdzIGtleSgpIG1ldGhvZCwgZXhjZXB0IHRha2VzIGEgY2FsbGJhY2suXG5mdW5jdGlvbiBrZXkkMihuLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJlc3VsdCA9IGxvY2FsU3RvcmFnZS5rZXkobik7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICByZXN1bHQgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBwcmVmaXggZnJvbSB0aGUga2V5LCBpZiBhIGtleSBpcyBmb3VuZC5cbiAgICAgICAgaWYgKHJlc3VsdCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnN1YnN0cmluZyhkYkluZm8ua2V5UHJlZml4Lmxlbmd0aCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24ga2V5cyQyKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwcm9taXNlID0gc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICB2YXIgbGVuZ3RoID0gbG9jYWxTdG9yYWdlLmxlbmd0aDtcbiAgICAgICAgdmFyIGtleXMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAobG9jYWxTdG9yYWdlLmtleShpKS5pbmRleE9mKGRiSW5mby5rZXlQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGxvY2FsU3RvcmFnZS5rZXkoaSkuc3Vic3RyaW5nKGRiSW5mby5rZXlQcmVmaXgubGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ga2V5cztcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFN1cHBseSB0aGUgbnVtYmVyIG9mIGtleXMgaW4gdGhlIGRhdGFzdG9yZSB0byB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXG5mdW5jdGlvbiBsZW5ndGgkMihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYua2V5cygpLnRoZW4oZnVuY3Rpb24gKGtleXMpIHtcbiAgICAgICAgcmV0dXJuIGtleXMubGVuZ3RoO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gUmVtb3ZlIGFuIGl0ZW0gZnJvbSB0aGUgc3RvcmUsIG5pY2UgYW5kIHNpbXBsZS5cbmZ1bmN0aW9uIHJlbW92ZUl0ZW0kMihrZXksIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgLy8gQ2FzdCB0aGUga2V5IHRvIGEgc3RyaW5nLCBhcyB0aGF0J3MgYWxsIHdlIGNhbiBzZXQgYXMgYSBrZXkuXG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihrZXkgKyAnIHVzZWQgYXMgYSBrZXksIGJ1dCBpdCBpcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgICAgIGtleSA9IFN0cmluZyhrZXkpO1xuICAgIH1cblxuICAgIHZhciBwcm9taXNlID0gc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShkYkluZm8ua2V5UHJlZml4ICsga2V5KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFNldCBhIGtleSdzIHZhbHVlIGFuZCBydW4gYW4gb3B0aW9uYWwgY2FsbGJhY2sgb25jZSB0aGUgdmFsdWUgaXMgc2V0LlxuLy8gVW5saWtlIEdhaWEncyBpbXBsZW1lbnRhdGlvbiwgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIHBhc3NlZCB0aGUgdmFsdWUsXG4vLyBpbiBjYXNlIHlvdSB3YW50IHRvIG9wZXJhdGUgb24gdGhhdCB2YWx1ZSBvbmx5IGFmdGVyIHlvdSdyZSBzdXJlIGl0XG4vLyBzYXZlZCwgb3Igc29tZXRoaW5nIGxpa2UgdGhhdC5cbmZ1bmN0aW9uIHNldEl0ZW0kMihrZXksIHZhbHVlLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIC8vIENhc3QgdGhlIGtleSB0byBhIHN0cmluZywgYXMgdGhhdCdzIGFsbCB3ZSBjYW4gc2V0IGFzIGEga2V5LlxuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLndhcm4oa2V5ICsgJyB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgICBrZXkgPSBTdHJpbmcoa2V5KTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQ29udmVydCB1bmRlZmluZWQgdmFsdWVzIHRvIG51bGwuXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL2xvY2FsRm9yYWdlL3B1bGwvNDJcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNhdmUgdGhlIG9yaWdpbmFsIHZhbHVlIHRvIHBhc3MgdG8gdGhlIGNhbGxiYWNrLlxuICAgICAgICB2YXIgb3JpZ2luYWxWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICBkYkluZm8uc2VyaWFsaXplci5zZXJpYWxpemUodmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oZGJJbmZvLmtleVByZWZpeCArIGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvcmlnaW5hbFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlIGNhcGFjaXR5IGV4Y2VlZGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogTWFrZSB0aGlzIGEgc3BlY2lmaWMgZXJyb3IvZXZlbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5uYW1lID09PSAnUXVvdGFFeGNlZWRlZEVycm9yJyB8fCBlLm5hbWUgPT09ICdOU19FUlJPUl9ET01fUVVPVEFfUkVBQ0hFRCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgbG9jYWxTdG9yYWdlV3JhcHBlciA9IHtcbiAgICBfZHJpdmVyOiAnbG9jYWxTdG9yYWdlV3JhcHBlcicsXG4gICAgX2luaXRTdG9yYWdlOiBfaW5pdFN0b3JhZ2UkMixcbiAgICAvLyBEZWZhdWx0IEFQSSwgZnJvbSBHYWlhL2xvY2FsU3RvcmFnZS5cbiAgICBpdGVyYXRlOiBpdGVyYXRlJDIsXG4gICAgZ2V0SXRlbTogZ2V0SXRlbSQyLFxuICAgIHNldEl0ZW06IHNldEl0ZW0kMixcbiAgICByZW1vdmVJdGVtOiByZW1vdmVJdGVtJDIsXG4gICAgY2xlYXI6IGNsZWFyJDIsXG4gICAgbGVuZ3RoOiBsZW5ndGgkMixcbiAgICBrZXk6IGtleSQyLFxuICAgIGtleXM6IGtleXMkMlxufTtcblxuLy8gQ3VzdG9tIGRyaXZlcnMgYXJlIHN0b3JlZCBoZXJlIHdoZW4gYGRlZmluZURyaXZlcigpYCBpcyBjYWxsZWQuXG4vLyBUaGV5IGFyZSBzaGFyZWQgYWNyb3NzIGFsbCBpbnN0YW5jZXMgb2YgbG9jYWxGb3JhZ2UuXG52YXIgQ3VzdG9tRHJpdmVycyA9IHt9O1xuXG52YXIgRHJpdmVyVHlwZSA9IHtcbiAgICBJTkRFWEVEREI6ICdhc3luY1N0b3JhZ2UnLFxuICAgIExPQ0FMU1RPUkFHRTogJ2xvY2FsU3RvcmFnZVdyYXBwZXInLFxuICAgIFdFQlNRTDogJ3dlYlNRTFN0b3JhZ2UnXG59O1xuXG52YXIgRGVmYXVsdERyaXZlck9yZGVyID0gW0RyaXZlclR5cGUuSU5ERVhFRERCLCBEcml2ZXJUeXBlLldFQlNRTCwgRHJpdmVyVHlwZS5MT0NBTFNUT1JBR0VdO1xuXG52YXIgTGlicmFyeU1ldGhvZHMgPSBbJ2NsZWFyJywgJ2dldEl0ZW0nLCAnaXRlcmF0ZScsICdrZXknLCAna2V5cycsICdsZW5ndGgnLCAncmVtb3ZlSXRlbScsICdzZXRJdGVtJ107XG5cbnZhciBEZWZhdWx0Q29uZmlnID0ge1xuICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICBkcml2ZXI6IERlZmF1bHREcml2ZXJPcmRlci5zbGljZSgpLFxuICAgIG5hbWU6ICdsb2NhbGZvcmFnZScsXG4gICAgLy8gRGVmYXVsdCBEQiBzaXplIGlzIF9KVVNUIFVOREVSXyA1TUIsIGFzIGl0J3MgdGhlIGhpZ2hlc3Qgc2l6ZVxuICAgIC8vIHdlIGNhbiB1c2Ugd2l0aG91dCBhIHByb21wdC5cbiAgICBzaXplOiA0OTgwNzM2LFxuICAgIHN0b3JlTmFtZTogJ2tleXZhbHVlcGFpcnMnLFxuICAgIHZlcnNpb246IDEuMFxufTtcblxudmFyIGRyaXZlclN1cHBvcnQgPSB7fTtcbi8vIENoZWNrIHRvIHNlZSBpZiBJbmRleGVkREIgaXMgYXZhaWxhYmxlIGFuZCBpZiBpdCBpcyB0aGUgbGF0ZXN0XG4vLyBpbXBsZW1lbnRhdGlvbjsgaXQncyBvdXIgcHJlZmVycmVkIGJhY2tlbmQgbGlicmFyeS4gV2UgdXNlIFwiX3NwZWNfdGVzdFwiXG4vLyBhcyB0aGUgbmFtZSBvZiB0aGUgZGF0YWJhc2UgYmVjYXVzZSBpdCdzIG5vdCB0aGUgb25lIHdlJ2xsIG9wZXJhdGUgb24sXG4vLyBidXQgaXQncyB1c2VmdWwgdG8gbWFrZSBzdXJlIGl0cyB1c2luZyB0aGUgcmlnaHQgc3BlYy5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvbG9jYWxGb3JhZ2UvaXNzdWVzLzEyOFxuZHJpdmVyU3VwcG9ydFtEcml2ZXJUeXBlLklOREVYRUREQl0gPSBpc0luZGV4ZWREQlZhbGlkKCk7XG5cbmRyaXZlclN1cHBvcnRbRHJpdmVyVHlwZS5XRUJTUUxdID0gaXNXZWJTUUxWYWxpZCgpO1xuXG5kcml2ZXJTdXBwb3J0W0RyaXZlclR5cGUuTE9DQUxTVE9SQUdFXSA9IGlzTG9jYWxTdG9yYWdlVmFsaWQoKTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcmcpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG5mdW5jdGlvbiBjYWxsV2hlblJlYWR5KGxvY2FsRm9yYWdlSW5zdGFuY2UsIGxpYnJhcnlNZXRob2QpIHtcbiAgICBsb2NhbEZvcmFnZUluc3RhbmNlW2xpYnJhcnlNZXRob2RdID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2FyZ3MgPSBhcmd1bWVudHM7XG4gICAgICAgIHJldHVybiBsb2NhbEZvcmFnZUluc3RhbmNlLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbG9jYWxGb3JhZ2VJbnN0YW5jZVtsaWJyYXJ5TWV0aG9kXS5hcHBseShsb2NhbEZvcmFnZUluc3RhbmNlLCBfYXJncyk7XG4gICAgICAgIH0pO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGV4dGVuZCgpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXG4gICAgICAgIGlmIChhcmcpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBhcmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJnLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzQXJyYXkoYXJnW2tleV0pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMF1ba2V5XSA9IGFyZ1trZXldLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcmd1bWVudHNbMF1ba2V5XSA9IGFyZ1trZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFyZ3VtZW50c1swXTtcbn1cblxuZnVuY3Rpb24gaXNMaWJyYXJ5RHJpdmVyKGRyaXZlck5hbWUpIHtcbiAgICBmb3IgKHZhciBkcml2ZXIgaW4gRHJpdmVyVHlwZSkge1xuICAgICAgICBpZiAoRHJpdmVyVHlwZS5oYXNPd25Qcm9wZXJ0eShkcml2ZXIpICYmIERyaXZlclR5cGVbZHJpdmVyXSA9PT0gZHJpdmVyTmFtZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbnZhciBMb2NhbEZvcmFnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMb2NhbEZvcmFnZShvcHRpb25zKSB7XG4gICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMb2NhbEZvcmFnZSk7XG5cbiAgICAgICAgdGhpcy5JTkRFWEVEREIgPSBEcml2ZXJUeXBlLklOREVYRUREQjtcbiAgICAgICAgdGhpcy5MT0NBTFNUT1JBR0UgPSBEcml2ZXJUeXBlLkxPQ0FMU1RPUkFHRTtcbiAgICAgICAgdGhpcy5XRUJTUUwgPSBEcml2ZXJUeXBlLldFQlNRTDtcblxuICAgICAgICB0aGlzLl9kZWZhdWx0Q29uZmlnID0gZXh0ZW5kKHt9LCBEZWZhdWx0Q29uZmlnKTtcbiAgICAgICAgdGhpcy5fY29uZmlnID0gZXh0ZW5kKHt9LCB0aGlzLl9kZWZhdWx0Q29uZmlnLCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5fZHJpdmVyU2V0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5faW5pdERyaXZlciA9IG51bGw7XG4gICAgICAgIHRoaXMuX3JlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2RiSW5mbyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fd3JhcExpYnJhcnlNZXRob2RzV2l0aFJlYWR5KCk7XG4gICAgICAgIHRoaXMuc2V0RHJpdmVyKHRoaXMuX2NvbmZpZy5kcml2ZXIpW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge30pO1xuICAgIH1cblxuICAgIC8vIFNldCBhbnkgY29uZmlnIHZhbHVlcyBmb3IgbG9jYWxGb3JhZ2U7IGNhbiBiZSBjYWxsZWQgYW55dGltZSBiZWZvcmVcbiAgICAvLyB0aGUgZmlyc3QgQVBJIGNhbGwgKGUuZy4gYGdldEl0ZW1gLCBgc2V0SXRlbWApLlxuICAgIC8vIFdlIGxvb3AgdGhyb3VnaCBvcHRpb25zIHNvIHdlIGRvbid0IG92ZXJ3cml0ZSBleGlzdGluZyBjb25maWdcbiAgICAvLyB2YWx1ZXMuXG5cblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5jb25maWcgPSBmdW5jdGlvbiBjb25maWcob3B0aW9ucykge1xuICAgICAgICAvLyBJZiB0aGUgb3B0aW9ucyBhcmd1bWVudCBpcyBhbiBvYmplY3QsIHdlIHVzZSBpdCB0byBzZXQgdmFsdWVzLlxuICAgICAgICAvLyBPdGhlcndpc2UsIHdlIHJldHVybiBlaXRoZXIgYSBzcGVjaWZpZWQgY29uZmlnIHZhbHVlIG9yIGFsbFxuICAgICAgICAvLyBjb25maWcgdmFsdWVzLlxuICAgICAgICBpZiAoKHR5cGVvZiBvcHRpb25zID09PSAndW5kZWZpbmVkJyA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihvcHRpb25zKSkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAvLyBJZiBsb2NhbGZvcmFnZSBpcyByZWFkeSBhbmQgZnVsbHkgaW5pdGlhbGl6ZWQsIHdlIGNhbid0IHNldFxuICAgICAgICAgICAgLy8gYW55IG5ldyBjb25maWd1cmF0aW9uIHZhbHVlcy4gSW5zdGVhZCwgd2UgcmV0dXJuIGFuIGVycm9yLlxuICAgICAgICAgICAgaWYgKHRoaXMuX3JlYWR5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihcIkNhbid0IGNhbGwgY29uZmlnKCkgYWZ0ZXIgbG9jYWxmb3JhZ2UgXCIgKyAnaGFzIGJlZW4gdXNlZC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvcHRpb25zKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09ICdzdG9yZU5hbWUnKSB7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnNbaV0gPSBvcHRpb25zW2ldLnJlcGxhY2UoL1xcVy9nLCAnXycpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpID09PSAndmVyc2lvbicgJiYgdHlwZW9mIG9wdGlvbnNbaV0gIT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0RhdGFiYXNlIHZlcnNpb24gbXVzdCBiZSBhIG51bWJlci4nKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9jb25maWdbaV0gPSBvcHRpb25zW2ldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBhZnRlciBhbGwgY29uZmlnIG9wdGlvbnMgYXJlIHNldCBhbmRcbiAgICAgICAgICAgIC8vIHRoZSBkcml2ZXIgb3B0aW9uIGlzIHVzZWQsIHRyeSBzZXR0aW5nIGl0XG4gICAgICAgICAgICBpZiAoJ2RyaXZlcicgaW4gb3B0aW9ucyAmJiBvcHRpb25zLmRyaXZlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldERyaXZlcih0aGlzLl9jb25maWcuZHJpdmVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnW29wdGlvbnNdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBVc2VkIHRvIGRlZmluZSBhIGN1c3RvbSBkcml2ZXIsIHNoYXJlZCBhY3Jvc3MgYWxsIGluc3RhbmNlcyBvZlxuICAgIC8vIGxvY2FsRm9yYWdlLlxuXG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuZGVmaW5lRHJpdmVyID0gZnVuY3Rpb24gZGVmaW5lRHJpdmVyKGRyaXZlck9iamVjdCwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFyIGRyaXZlck5hbWUgPSBkcml2ZXJPYmplY3QuX2RyaXZlcjtcbiAgICAgICAgICAgICAgICB2YXIgY29tcGxpYW5jZUVycm9yID0gbmV3IEVycm9yKCdDdXN0b20gZHJpdmVyIG5vdCBjb21wbGlhbnQ7IHNlZSAnICsgJ2h0dHBzOi8vbW96aWxsYS5naXRodWIuaW8vbG9jYWxGb3JhZ2UvI2RlZmluZWRyaXZlcicpO1xuICAgICAgICAgICAgICAgIHZhciBuYW1pbmdFcnJvciA9IG5ldyBFcnJvcignQ3VzdG9tIGRyaXZlciBuYW1lIGFscmVhZHkgaW4gdXNlOiAnICsgZHJpdmVyT2JqZWN0Ll9kcml2ZXIpO1xuXG4gICAgICAgICAgICAgICAgLy8gQSBkcml2ZXIgbmFtZSBzaG91bGQgYmUgZGVmaW5lZCBhbmQgbm90IG92ZXJsYXAgd2l0aCB0aGVcbiAgICAgICAgICAgICAgICAvLyBsaWJyYXJ5LWRlZmluZWQsIGRlZmF1bHQgZHJpdmVycy5cbiAgICAgICAgICAgICAgICBpZiAoIWRyaXZlck9iamVjdC5fZHJpdmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChjb21wbGlhbmNlRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpc0xpYnJhcnlEcml2ZXIoZHJpdmVyT2JqZWN0Ll9kcml2ZXIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChuYW1pbmdFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgY3VzdG9tRHJpdmVyTWV0aG9kcyA9IExpYnJhcnlNZXRob2RzLmNvbmNhdCgnX2luaXRTdG9yYWdlJyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjdXN0b21Ecml2ZXJNZXRob2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXN0b21Ecml2ZXJNZXRob2QgPSBjdXN0b21Ecml2ZXJNZXRob2RzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWN1c3RvbURyaXZlck1ldGhvZCB8fCAhZHJpdmVyT2JqZWN0W2N1c3RvbURyaXZlck1ldGhvZF0gfHwgdHlwZW9mIGRyaXZlck9iamVjdFtjdXN0b21Ecml2ZXJNZXRob2RdICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoY29tcGxpYW5jZUVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBzdXBwb3J0UHJvbWlzZSA9IFByb21pc2UkMS5yZXNvbHZlKHRydWUpO1xuICAgICAgICAgICAgICAgIGlmICgnX3N1cHBvcnQnIGluIGRyaXZlck9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZHJpdmVyT2JqZWN0Ll9zdXBwb3J0ICYmIHR5cGVvZiBkcml2ZXJPYmplY3QuX3N1cHBvcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1cHBvcnRQcm9taXNlID0gZHJpdmVyT2JqZWN0Ll9zdXBwb3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdXBwb3J0UHJvbWlzZSA9IFByb21pc2UkMS5yZXNvbHZlKCEhZHJpdmVyT2JqZWN0Ll9zdXBwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHN1cHBvcnRQcm9taXNlLnRoZW4oZnVuY3Rpb24gKHN1cHBvcnRSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZHJpdmVyU3VwcG9ydFtkcml2ZXJOYW1lXSA9IHN1cHBvcnRSZXN1bHQ7XG4gICAgICAgICAgICAgICAgICAgIEN1c3RvbURyaXZlcnNbZHJpdmVyTmFtZV0gPSBkcml2ZXJPYmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyhwcm9taXNlLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuZHJpdmVyID0gZnVuY3Rpb24gZHJpdmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZHJpdmVyIHx8IG51bGw7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5nZXREcml2ZXIgPSBmdW5jdGlvbiBnZXREcml2ZXIoZHJpdmVyTmFtZSwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgZ2V0RHJpdmVyUHJvbWlzZSA9IFByb21pc2UkMS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoaXNMaWJyYXJ5RHJpdmVyKGRyaXZlck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChkcml2ZXJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5JTkRFWEVEREI6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXN5bmNTdG9yYWdlO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIHNlbGYuTE9DQUxTVE9SQUdFOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZVdyYXBwZXI7XG4gICAgICAgICAgICAgICAgICAgIGNhc2Ugc2VsZi5XRUJTUUw6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2ViU1FMU3RvcmFnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEN1c3RvbURyaXZlcnNbZHJpdmVyTmFtZV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gQ3VzdG9tRHJpdmVyc1tkcml2ZXJOYW1lXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdEcml2ZXIgbm90IGZvdW5kLicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyhnZXREcml2ZXJQcm9taXNlLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBnZXREcml2ZXJQcm9taXNlO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuZ2V0U2VyaWFsaXplciA9IGZ1bmN0aW9uIGdldFNlcmlhbGl6ZXIoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlcmlhbGl6ZXJQcm9taXNlID0gUHJvbWlzZSQxLnJlc29sdmUobG9jYWxmb3JhZ2VTZXJpYWxpemVyKTtcbiAgICAgICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyhzZXJpYWxpemVyUHJvbWlzZSwgY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gc2VyaWFsaXplclByb21pc2U7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5yZWFkeSA9IGZ1bmN0aW9uIHJlYWR5KGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB2YXIgcHJvbWlzZSA9IHNlbGYuX2RyaXZlclNldC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl9yZWFkeSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHNlbGYuX3JlYWR5ID0gc2VsZi5faW5pdERyaXZlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fcmVhZHk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4ZWN1dGVUd29DYWxsYmFja3MocHJvbWlzZSwgY2FsbGJhY2ssIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5zZXREcml2ZXIgPSBmdW5jdGlvbiBzZXREcml2ZXIoZHJpdmVycywgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGlmICghaXNBcnJheShkcml2ZXJzKSkge1xuICAgICAgICAgICAgZHJpdmVycyA9IFtkcml2ZXJzXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzdXBwb3J0ZWREcml2ZXJzID0gdGhpcy5fZ2V0U3VwcG9ydGVkRHJpdmVycyhkcml2ZXJzKTtcblxuICAgICAgICBmdW5jdGlvbiBzZXREcml2ZXJUb0NvbmZpZygpIHtcbiAgICAgICAgICAgIHNlbGYuX2NvbmZpZy5kcml2ZXIgPSBzZWxmLmRyaXZlcigpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZXh0ZW5kU2VsZldpdGhEcml2ZXIoZHJpdmVyKSB7XG4gICAgICAgICAgICBzZWxmLl9leHRlbmQoZHJpdmVyKTtcbiAgICAgICAgICAgIHNldERyaXZlclRvQ29uZmlnKCk7XG5cbiAgICAgICAgICAgIHNlbGYuX3JlYWR5ID0gc2VsZi5faW5pdFN0b3JhZ2Uoc2VsZi5fY29uZmlnKTtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9yZWFkeTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGluaXREcml2ZXIoc3VwcG9ydGVkRHJpdmVycykge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudERyaXZlckluZGV4ID0gMDtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRyaXZlclByb21pc2VMb29wKCkge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoY3VycmVudERyaXZlckluZGV4IDwgc3VwcG9ydGVkRHJpdmVycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkcml2ZXJOYW1lID0gc3VwcG9ydGVkRHJpdmVyc1tjdXJyZW50RHJpdmVySW5kZXhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudERyaXZlckluZGV4Kys7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2RiSW5mbyA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZWFkeSA9IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLmdldERyaXZlcihkcml2ZXJOYW1lKS50aGVuKGV4dGVuZFNlbGZXaXRoRHJpdmVyKVtcImNhdGNoXCJdKGRyaXZlclByb21pc2VMb29wKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHNldERyaXZlclRvQ29uZmlnKCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcignTm8gYXZhaWxhYmxlIHN0b3JhZ2UgbWV0aG9kIGZvdW5kLicpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9kcml2ZXJTZXQgPSBQcm9taXNlJDEucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuX2RyaXZlclNldDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gZHJpdmVyUHJvbWlzZUxvb3AoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGVyZSBtaWdodCBiZSBhIGRyaXZlciBpbml0aWFsaXphdGlvbiBpbiBwcm9ncmVzc1xuICAgICAgICAvLyBzbyB3YWl0IGZvciBpdCB0byBmaW5pc2ggaW4gb3JkZXIgdG8gYXZvaWQgYSBwb3NzaWJsZVxuICAgICAgICAvLyByYWNlIGNvbmRpdGlvbiB0byBzZXQgX2RiSW5mb1xuICAgICAgICB2YXIgb2xkRHJpdmVyU2V0RG9uZSA9IHRoaXMuX2RyaXZlclNldCAhPT0gbnVsbCA/IHRoaXMuX2RyaXZlclNldFtcImNhdGNoXCJdKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlJDEucmVzb2x2ZSgpO1xuICAgICAgICB9KSA6IFByb21pc2UkMS5yZXNvbHZlKCk7XG5cbiAgICAgICAgdGhpcy5fZHJpdmVyU2V0ID0gb2xkRHJpdmVyU2V0RG9uZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkcml2ZXJOYW1lID0gc3VwcG9ydGVkRHJpdmVyc1swXTtcbiAgICAgICAgICAgIHNlbGYuX2RiSW5mbyA9IG51bGw7XG4gICAgICAgICAgICBzZWxmLl9yZWFkeSA9IG51bGw7XG5cbiAgICAgICAgICAgIHJldHVybiBzZWxmLmdldERyaXZlcihkcml2ZXJOYW1lKS50aGVuKGZ1bmN0aW9uIChkcml2ZXIpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9kcml2ZXIgPSBkcml2ZXIuX2RyaXZlcjtcbiAgICAgICAgICAgICAgICBzZXREcml2ZXJUb0NvbmZpZygpO1xuICAgICAgICAgICAgICAgIHNlbGYuX3dyYXBMaWJyYXJ5TWV0aG9kc1dpdGhSZWFkeSgpO1xuICAgICAgICAgICAgICAgIHNlbGYuX2luaXREcml2ZXIgPSBpbml0RHJpdmVyKHN1cHBvcnRlZERyaXZlcnMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0RHJpdmVyVG9Db25maWcoKTtcbiAgICAgICAgICAgIHZhciBlcnJvciA9IG5ldyBFcnJvcignTm8gYXZhaWxhYmxlIHN0b3JhZ2UgbWV0aG9kIGZvdW5kLicpO1xuICAgICAgICAgICAgc2VsZi5fZHJpdmVyU2V0ID0gUHJvbWlzZSQxLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4gc2VsZi5fZHJpdmVyU2V0O1xuICAgICAgICB9KTtcblxuICAgICAgICBleGVjdXRlVHdvQ2FsbGJhY2tzKHRoaXMuX2RyaXZlclNldCwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gdGhpcy5fZHJpdmVyU2V0O1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuc3VwcG9ydHMgPSBmdW5jdGlvbiBzdXBwb3J0cyhkcml2ZXJOYW1lKSB7XG4gICAgICAgIHJldHVybiAhIWRyaXZlclN1cHBvcnRbZHJpdmVyTmFtZV07XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5fZXh0ZW5kID0gZnVuY3Rpb24gX2V4dGVuZChsaWJyYXJ5TWV0aG9kc0FuZFByb3BlcnRpZXMpIHtcbiAgICAgICAgZXh0ZW5kKHRoaXMsIGxpYnJhcnlNZXRob2RzQW5kUHJvcGVydGllcyk7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5fZ2V0U3VwcG9ydGVkRHJpdmVycyA9IGZ1bmN0aW9uIF9nZXRTdXBwb3J0ZWREcml2ZXJzKGRyaXZlcnMpIHtcbiAgICAgICAgdmFyIHN1cHBvcnRlZERyaXZlcnMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRyaXZlcnMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBkcml2ZXJOYW1lID0gZHJpdmVyc1tpXTtcbiAgICAgICAgICAgIGlmICh0aGlzLnN1cHBvcnRzKGRyaXZlck5hbWUpKSB7XG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkRHJpdmVycy5wdXNoKGRyaXZlck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdXBwb3J0ZWREcml2ZXJzO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuX3dyYXBMaWJyYXJ5TWV0aG9kc1dpdGhSZWFkeSA9IGZ1bmN0aW9uIF93cmFwTGlicmFyeU1ldGhvZHNXaXRoUmVhZHkoKSB7XG4gICAgICAgIC8vIEFkZCBhIHN0dWIgZm9yIGVhY2ggZHJpdmVyIEFQSSBtZXRob2QgdGhhdCBkZWxheXMgdGhlIGNhbGwgdG8gdGhlXG4gICAgICAgIC8vIGNvcnJlc3BvbmRpbmcgZHJpdmVyIG1ldGhvZCB1bnRpbCBsb2NhbEZvcmFnZSBpcyByZWFkeS4gVGhlc2Ugc3R1YnNcbiAgICAgICAgLy8gd2lsbCBiZSByZXBsYWNlZCBieSB0aGUgZHJpdmVyIG1ldGhvZHMgYXMgc29vbiBhcyB0aGUgZHJpdmVyIGlzXG4gICAgICAgIC8vIGxvYWRlZCwgc28gdGhlcmUgaXMgbm8gcGVyZm9ybWFuY2UgaW1wYWN0LlxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IExpYnJhcnlNZXRob2RzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjYWxsV2hlblJlYWR5KHRoaXMsIExpYnJhcnlNZXRob2RzW2ldKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuY3JlYXRlSW5zdGFuY2UgPSBmdW5jdGlvbiBjcmVhdGVJbnN0YW5jZShvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBuZXcgTG9jYWxGb3JhZ2Uob3B0aW9ucyk7XG4gICAgfTtcblxuICAgIHJldHVybiBMb2NhbEZvcmFnZTtcbn0oKTtcblxuLy8gVGhlIGFjdHVhbCBsb2NhbEZvcmFnZSBvYmplY3QgdGhhdCB3ZSBleHBvc2UgYXMgYSBtb2R1bGUgb3IgdmlhIGFcbi8vIGdsb2JhbC4gSXQncyBleHRlbmRlZCBieSBwdWxsaW5nIGluIG9uZSBvZiBvdXIgb3RoZXIgbGlicmFyaWVzLlxuXG5cbnZhciBsb2NhbGZvcmFnZV9qcyA9IG5ldyBMb2NhbEZvcmFnZSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGxvY2FsZm9yYWdlX2pzO1xuXG59LHtcIjNcIjozfV19LHt9LFs0XSkoNClcbn0pOyIsIlxuXG5cbi8qKlxuICogVVRNIHpvbmVzIGFyZSBncm91cGVkLCBhbmQgYXNzaWduZWQgdG8gb25lIG9mIGEgZ3JvdXAgb2YgNlxuICogc2V0cy5cbiAqXG4gKiB7aW50fSBAcHJpdmF0ZVxuICovXG52YXIgTlVNXzEwMEtfU0VUUyA9IDY7XG5cbi8qKlxuICogVGhlIGNvbHVtbiBsZXR0ZXJzIChmb3IgZWFzdGluZykgb2YgdGhlIGxvd2VyIGxlZnQgdmFsdWUsIHBlclxuICogc2V0LlxuICpcbiAqIHtzdHJpbmd9IEBwcml2YXRlXG4gKi9cbnZhciBTRVRfT1JJR0lOX0NPTFVNTl9MRVRURVJTID0gJ0FKU0FKUyc7XG5cbi8qKlxuICogVGhlIHJvdyBsZXR0ZXJzIChmb3Igbm9ydGhpbmcpIG9mIHRoZSBsb3dlciBsZWZ0IHZhbHVlLCBwZXJcbiAqIHNldC5cbiAqXG4gKiB7c3RyaW5nfSBAcHJpdmF0ZVxuICovXG52YXIgU0VUX09SSUdJTl9ST1dfTEVUVEVSUyA9ICdBRkFGQUYnO1xuXG52YXIgQSA9IDY1OyAvLyBBXG52YXIgSSA9IDczOyAvLyBJXG52YXIgTyA9IDc5OyAvLyBPXG52YXIgViA9IDg2OyAvLyBWXG52YXIgWiA9IDkwOyAvLyBaXG5cbi8qKlxuICogQ29udmVyc2lvbiBvZiBsYXQvbG9uIHRvIE1HUlMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IGxsIE9iamVjdCBsaXRlcmFsIHdpdGggbGF0IGFuZCBsb24gcHJvcGVydGllcyBvbiBhXG4gKiAgICAgV0dTODQgZWxsaXBzb2lkLlxuICogQHBhcmFtIHtpbnR9IGFjY3VyYWN5IEFjY3VyYWN5IGluIGRpZ2l0cyAoNSBmb3IgMSBtLCA0IGZvciAxMCBtLCAzIGZvclxuICogICAgICAxMDAgbSwgMiBmb3IgMTAwMCBtIG9yIDEgZm9yIDEwMDAwIG0pLiBPcHRpb25hbCwgZGVmYXVsdCBpcyA1LlxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgTUdSUyBzdHJpbmcgZm9yIHRoZSBnaXZlbiBsb2NhdGlvbiBhbmQgYWNjdXJhY3kuXG4gKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKGxsLCBhY2N1cmFjeSkge1xuICBhY2N1cmFjeSA9IGFjY3VyYWN5IHx8IDU7IC8vIGRlZmF1bHQgYWNjdXJhY3kgMW1cbiAgcmV0dXJuIGVuY29kZShMTHRvVVRNKHtcbiAgICBsYXQ6IGxsWzFdLFxuICAgIGxvbjogbGxbMF1cbiAgfSksIGFjY3VyYWN5KTtcbn07XG5cbi8qKlxuICogQ29udmVyc2lvbiBvZiBNR1JTIHRvIGxhdC9sb24uXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1ncnMgTUdSUyBzdHJpbmcuXG4gKiBAcmV0dXJuIHthcnJheX0gQW4gYXJyYXkgd2l0aCBsZWZ0IChsb25naXR1ZGUpLCBib3R0b20gKGxhdGl0dWRlKSwgcmlnaHRcbiAqICAgICAobG9uZ2l0dWRlKSBhbmQgdG9wIChsYXRpdHVkZSkgdmFsdWVzIGluIFdHUzg0LCByZXByZXNlbnRpbmcgdGhlXG4gKiAgICAgYm91bmRpbmcgYm94IGZvciB0aGUgcHJvdmlkZWQgTUdSUyByZWZlcmVuY2UuXG4gKi9cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKG1ncnMpIHtcbiAgdmFyIGJib3ggPSBVVE10b0xMKGRlY29kZShtZ3JzLnRvVXBwZXJDYXNlKCkpKTtcbiAgaWYgKGJib3gubGF0ICYmIGJib3gubG9uKSB7XG4gICAgcmV0dXJuIFtiYm94LmxvbiwgYmJveC5sYXQsIGJib3gubG9uLCBiYm94LmxhdF07XG4gIH1cbiAgcmV0dXJuIFtiYm94LmxlZnQsIGJib3guYm90dG9tLCBiYm94LnJpZ2h0LCBiYm94LnRvcF07XG59O1xuXG5leHBvcnRzLnRvUG9pbnQgPSBmdW5jdGlvbihtZ3JzKSB7XG4gIHZhciBiYm94ID0gVVRNdG9MTChkZWNvZGUobWdycy50b1VwcGVyQ2FzZSgpKSk7XG4gIGlmIChiYm94LmxhdCAmJiBiYm94Lmxvbikge1xuICAgIHJldHVybiBbYmJveC5sb24sIGJib3gubGF0XTtcbiAgfVxuICByZXR1cm4gWyhiYm94LmxlZnQgKyBiYm94LnJpZ2h0KSAvIDIsIChiYm94LnRvcCArIGJib3guYm90dG9tKSAvIDJdO1xufTtcbi8qKlxuICogQ29udmVyc2lvbiBmcm9tIGRlZ3JlZXMgdG8gcmFkaWFucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IGRlZyB0aGUgYW5nbGUgaW4gZGVncmVlcy5cbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIGFuZ2xlIGluIHJhZGlhbnMuXG4gKi9cbmZ1bmN0aW9uIGRlZ1RvUmFkKGRlZykge1xuICByZXR1cm4gKGRlZyAqIChNYXRoLlBJIC8gMTgwLjApKTtcbn1cblxuLyoqXG4gKiBDb252ZXJzaW9uIGZyb20gcmFkaWFucyB0byBkZWdyZWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIHRoZSBhbmdsZSBpbiByYWRpYW5zLlxuICogQHJldHVybiB7bnVtYmVyfSB0aGUgYW5nbGUgaW4gZGVncmVlcy5cbiAqL1xuZnVuY3Rpb24gcmFkVG9EZWcocmFkKSB7XG4gIHJldHVybiAoMTgwLjAgKiAocmFkIC8gTWF0aC5QSSkpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEgc2V0IG9mIExvbmdpdHVkZSBhbmQgTGF0aXR1ZGUgY28tb3JkaW5hdGVzIHRvIFVUTVxuICogdXNpbmcgdGhlIFdHUzg0IGVsbGlwc29pZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IGxsIE9iamVjdCBsaXRlcmFsIHdpdGggbGF0IGFuZCBsb24gcHJvcGVydGllc1xuICogICAgIHJlcHJlc2VudGluZyB0aGUgV0dTODQgY29vcmRpbmF0ZSB0byBiZSBjb252ZXJ0ZWQuXG4gKiBAcmV0dXJuIHtvYmplY3R9IE9iamVjdCBsaXRlcmFsIGNvbnRhaW5pbmcgdGhlIFVUTSB2YWx1ZSB3aXRoIGVhc3RpbmcsXG4gKiAgICAgbm9ydGhpbmcsIHpvbmVOdW1iZXIgYW5kIHpvbmVMZXR0ZXIgcHJvcGVydGllcywgYW5kIGFuIG9wdGlvbmFsXG4gKiAgICAgYWNjdXJhY3kgcHJvcGVydHkgaW4gZGlnaXRzLiBSZXR1cm5zIG51bGwgaWYgdGhlIGNvbnZlcnNpb24gZmFpbGVkLlxuICovXG5mdW5jdGlvbiBMTHRvVVRNKGxsKSB7XG4gIHZhciBMYXQgPSBsbC5sYXQ7XG4gIHZhciBMb25nID0gbGwubG9uO1xuICB2YXIgYSA9IDYzNzgxMzcuMDsgLy9lbGxpcC5yYWRpdXM7XG4gIHZhciBlY2NTcXVhcmVkID0gMC4wMDY2OTQzODsgLy9lbGxpcC5lY2NzcTtcbiAgdmFyIGswID0gMC45OTk2O1xuICB2YXIgTG9uZ09yaWdpbjtcbiAgdmFyIGVjY1ByaW1lU3F1YXJlZDtcbiAgdmFyIE4sIFQsIEMsIEEsIE07XG4gIHZhciBMYXRSYWQgPSBkZWdUb1JhZChMYXQpO1xuICB2YXIgTG9uZ1JhZCA9IGRlZ1RvUmFkKExvbmcpO1xuICB2YXIgTG9uZ09yaWdpblJhZDtcbiAgdmFyIFpvbmVOdW1iZXI7XG4gIC8vIChpbnQpXG4gIFpvbmVOdW1iZXIgPSBNYXRoLmZsb29yKChMb25nICsgMTgwKSAvIDYpICsgMTtcblxuICAvL01ha2Ugc3VyZSB0aGUgbG9uZ2l0dWRlIDE4MC4wMCBpcyBpbiBab25lIDYwXG4gIGlmIChMb25nID09PSAxODApIHtcbiAgICBab25lTnVtYmVyID0gNjA7XG4gIH1cblxuICAvLyBTcGVjaWFsIHpvbmUgZm9yIE5vcndheVxuICBpZiAoTGF0ID49IDU2LjAgJiYgTGF0IDwgNjQuMCAmJiBMb25nID49IDMuMCAmJiBMb25nIDwgMTIuMCkge1xuICAgIFpvbmVOdW1iZXIgPSAzMjtcbiAgfVxuXG4gIC8vIFNwZWNpYWwgem9uZXMgZm9yIFN2YWxiYXJkXG4gIGlmIChMYXQgPj0gNzIuMCAmJiBMYXQgPCA4NC4wKSB7XG4gICAgaWYgKExvbmcgPj0gMC4wICYmIExvbmcgPCA5LjApIHtcbiAgICAgIFpvbmVOdW1iZXIgPSAzMTtcbiAgICB9XG4gICAgZWxzZSBpZiAoTG9uZyA+PSA5LjAgJiYgTG9uZyA8IDIxLjApIHtcbiAgICAgIFpvbmVOdW1iZXIgPSAzMztcbiAgICB9XG4gICAgZWxzZSBpZiAoTG9uZyA+PSAyMS4wICYmIExvbmcgPCAzMy4wKSB7XG4gICAgICBab25lTnVtYmVyID0gMzU7XG4gICAgfVxuICAgIGVsc2UgaWYgKExvbmcgPj0gMzMuMCAmJiBMb25nIDwgNDIuMCkge1xuICAgICAgWm9uZU51bWJlciA9IDM3O1xuICAgIH1cbiAgfVxuXG4gIExvbmdPcmlnaW4gPSAoWm9uZU51bWJlciAtIDEpICogNiAtIDE4MCArIDM7IC8vKzMgcHV0cyBvcmlnaW5cbiAgLy8gaW4gbWlkZGxlIG9mXG4gIC8vIHpvbmVcbiAgTG9uZ09yaWdpblJhZCA9IGRlZ1RvUmFkKExvbmdPcmlnaW4pO1xuXG4gIGVjY1ByaW1lU3F1YXJlZCA9IChlY2NTcXVhcmVkKSAvICgxIC0gZWNjU3F1YXJlZCk7XG5cbiAgTiA9IGEgLyBNYXRoLnNxcnQoMSAtIGVjY1NxdWFyZWQgKiBNYXRoLnNpbihMYXRSYWQpICogTWF0aC5zaW4oTGF0UmFkKSk7XG4gIFQgPSBNYXRoLnRhbihMYXRSYWQpICogTWF0aC50YW4oTGF0UmFkKTtcbiAgQyA9IGVjY1ByaW1lU3F1YXJlZCAqIE1hdGguY29zKExhdFJhZCkgKiBNYXRoLmNvcyhMYXRSYWQpO1xuICBBID0gTWF0aC5jb3MoTGF0UmFkKSAqIChMb25nUmFkIC0gTG9uZ09yaWdpblJhZCk7XG5cbiAgTSA9IGEgKiAoKDEgLSBlY2NTcXVhcmVkIC8gNCAtIDMgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDY0IC0gNSAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDI1NikgKiBMYXRSYWQgLSAoMyAqIGVjY1NxdWFyZWQgLyA4ICsgMyAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkIC8gMzIgKyA0NSAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDEwMjQpICogTWF0aC5zaW4oMiAqIExhdFJhZCkgKyAoMTUgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDI1NiArIDQ1ICogZWNjU3F1YXJlZCAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkIC8gMTAyNCkgKiBNYXRoLnNpbig0ICogTGF0UmFkKSAtICgzNSAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDMwNzIpICogTWF0aC5zaW4oNiAqIExhdFJhZCkpO1xuXG4gIHZhciBVVE1FYXN0aW5nID0gKGswICogTiAqIChBICsgKDEgLSBUICsgQykgKiBBICogQSAqIEEgLyA2LjAgKyAoNSAtIDE4ICogVCArIFQgKiBUICsgNzIgKiBDIC0gNTggKiBlY2NQcmltZVNxdWFyZWQpICogQSAqIEEgKiBBICogQSAqIEEgLyAxMjAuMCkgKyA1MDAwMDAuMCk7XG5cbiAgdmFyIFVUTU5vcnRoaW5nID0gKGswICogKE0gKyBOICogTWF0aC50YW4oTGF0UmFkKSAqIChBICogQSAvIDIgKyAoNSAtIFQgKyA5ICogQyArIDQgKiBDICogQykgKiBBICogQSAqIEEgKiBBIC8gMjQuMCArICg2MSAtIDU4ICogVCArIFQgKiBUICsgNjAwICogQyAtIDMzMCAqIGVjY1ByaW1lU3F1YXJlZCkgKiBBICogQSAqIEEgKiBBICogQSAqIEEgLyA3MjAuMCkpKTtcbiAgaWYgKExhdCA8IDAuMCkge1xuICAgIFVUTU5vcnRoaW5nICs9IDEwMDAwMDAwLjA7IC8vMTAwMDAwMDAgbWV0ZXIgb2Zmc2V0IGZvclxuICAgIC8vIHNvdXRoZXJuIGhlbWlzcGhlcmVcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbm9ydGhpbmc6IE1hdGgucm91bmQoVVRNTm9ydGhpbmcpLFxuICAgIGVhc3Rpbmc6IE1hdGgucm91bmQoVVRNRWFzdGluZyksXG4gICAgem9uZU51bWJlcjogWm9uZU51bWJlcixcbiAgICB6b25lTGV0dGVyOiBnZXRMZXR0ZXJEZXNpZ25hdG9yKExhdClcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBVVE0gY29vcmRzIHRvIGxhdC9sb25nLCB1c2luZyB0aGUgV0dTODQgZWxsaXBzb2lkLiBUaGlzIGlzIGEgY29udmVuaWVuY2VcbiAqIGNsYXNzIHdoZXJlIHRoZSBab25lIGNhbiBiZSBzcGVjaWZpZWQgYXMgYSBzaW5nbGUgc3RyaW5nIGVnLlwiNjBOXCIgd2hpY2hcbiAqIGlzIHRoZW4gYnJva2VuIGRvd24gaW50byB0aGUgWm9uZU51bWJlciBhbmQgWm9uZUxldHRlci5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtvYmplY3R9IHV0bSBBbiBvYmplY3QgbGl0ZXJhbCB3aXRoIG5vcnRoaW5nLCBlYXN0aW5nLCB6b25lTnVtYmVyXG4gKiAgICAgYW5kIHpvbmVMZXR0ZXIgcHJvcGVydGllcy4gSWYgYW4gb3B0aW9uYWwgYWNjdXJhY3kgcHJvcGVydHkgaXNcbiAqICAgICBwcm92aWRlZCAoaW4gbWV0ZXJzKSwgYSBib3VuZGluZyBib3ggd2lsbCBiZSByZXR1cm5lZCBpbnN0ZWFkIG9mXG4gKiAgICAgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZS5cbiAqIEByZXR1cm4ge29iamVjdH0gQW4gb2JqZWN0IGxpdGVyYWwgY29udGFpbmluZyBlaXRoZXIgbGF0IGFuZCBsb24gdmFsdWVzXG4gKiAgICAgKGlmIG5vIGFjY3VyYWN5IHdhcyBwcm92aWRlZCksIG9yIHRvcCwgcmlnaHQsIGJvdHRvbSBhbmQgbGVmdCB2YWx1ZXNcbiAqICAgICBmb3IgdGhlIGJvdW5kaW5nIGJveCBjYWxjdWxhdGVkIGFjY29yZGluZyB0byB0aGUgcHJvdmlkZWQgYWNjdXJhY3kuXG4gKiAgICAgUmV0dXJucyBudWxsIGlmIHRoZSBjb252ZXJzaW9uIGZhaWxlZC5cbiAqL1xuZnVuY3Rpb24gVVRNdG9MTCh1dG0pIHtcblxuICB2YXIgVVRNTm9ydGhpbmcgPSB1dG0ubm9ydGhpbmc7XG4gIHZhciBVVE1FYXN0aW5nID0gdXRtLmVhc3Rpbmc7XG4gIHZhciB6b25lTGV0dGVyID0gdXRtLnpvbmVMZXR0ZXI7XG4gIHZhciB6b25lTnVtYmVyID0gdXRtLnpvbmVOdW1iZXI7XG4gIC8vIGNoZWNrIHRoZSBab25lTnVtbWJlciBpcyB2YWxpZFxuICBpZiAoem9uZU51bWJlciA8IDAgfHwgem9uZU51bWJlciA+IDYwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgazAgPSAwLjk5OTY7XG4gIHZhciBhID0gNjM3ODEzNy4wOyAvL2VsbGlwLnJhZGl1cztcbiAgdmFyIGVjY1NxdWFyZWQgPSAwLjAwNjY5NDM4OyAvL2VsbGlwLmVjY3NxO1xuICB2YXIgZWNjUHJpbWVTcXVhcmVkO1xuICB2YXIgZTEgPSAoMSAtIE1hdGguc3FydCgxIC0gZWNjU3F1YXJlZCkpIC8gKDEgKyBNYXRoLnNxcnQoMSAtIGVjY1NxdWFyZWQpKTtcbiAgdmFyIE4xLCBUMSwgQzEsIFIxLCBELCBNO1xuICB2YXIgTG9uZ09yaWdpbjtcbiAgdmFyIG11LCBwaGkxUmFkO1xuXG4gIC8vIHJlbW92ZSA1MDAsMDAwIG1ldGVyIG9mZnNldCBmb3IgbG9uZ2l0dWRlXG4gIHZhciB4ID0gVVRNRWFzdGluZyAtIDUwMDAwMC4wO1xuICB2YXIgeSA9IFVUTU5vcnRoaW5nO1xuXG4gIC8vIFdlIG11c3Qga25vdyBzb21laG93IGlmIHdlIGFyZSBpbiB0aGUgTm9ydGhlcm4gb3IgU291dGhlcm5cbiAgLy8gaGVtaXNwaGVyZSwgdGhpcyBpcyB0aGUgb25seSB0aW1lIHdlIHVzZSB0aGUgbGV0dGVyIFNvIGV2ZW5cbiAgLy8gaWYgdGhlIFpvbmUgbGV0dGVyIGlzbid0IGV4YWN0bHkgY29ycmVjdCBpdCBzaG91bGQgaW5kaWNhdGVcbiAgLy8gdGhlIGhlbWlzcGhlcmUgY29ycmVjdGx5XG4gIGlmICh6b25lTGV0dGVyIDwgJ04nKSB7XG4gICAgeSAtPSAxMDAwMDAwMC4wOyAvLyByZW1vdmUgMTAsMDAwLDAwMCBtZXRlciBvZmZzZXQgdXNlZFxuICAgIC8vIGZvciBzb3V0aGVybiBoZW1pc3BoZXJlXG4gIH1cblxuICAvLyBUaGVyZSBhcmUgNjAgem9uZXMgd2l0aCB6b25lIDEgYmVpbmcgYXQgV2VzdCAtMTgwIHRvIC0xNzRcbiAgTG9uZ09yaWdpbiA9ICh6b25lTnVtYmVyIC0gMSkgKiA2IC0gMTgwICsgMzsgLy8gKzMgcHV0cyBvcmlnaW5cbiAgLy8gaW4gbWlkZGxlIG9mXG4gIC8vIHpvbmVcblxuICBlY2NQcmltZVNxdWFyZWQgPSAoZWNjU3F1YXJlZCkgLyAoMSAtIGVjY1NxdWFyZWQpO1xuXG4gIE0gPSB5IC8gazA7XG4gIG11ID0gTSAvIChhICogKDEgLSBlY2NTcXVhcmVkIC8gNCAtIDMgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDY0IC0gNSAqIGVjY1NxdWFyZWQgKiBlY2NTcXVhcmVkICogZWNjU3F1YXJlZCAvIDI1NikpO1xuXG4gIHBoaTFSYWQgPSBtdSArICgzICogZTEgLyAyIC0gMjcgKiBlMSAqIGUxICogZTEgLyAzMikgKiBNYXRoLnNpbigyICogbXUpICsgKDIxICogZTEgKiBlMSAvIDE2IC0gNTUgKiBlMSAqIGUxICogZTEgKiBlMSAvIDMyKSAqIE1hdGguc2luKDQgKiBtdSkgKyAoMTUxICogZTEgKiBlMSAqIGUxIC8gOTYpICogTWF0aC5zaW4oNiAqIG11KTtcbiAgLy8gZG91YmxlIHBoaTEgPSBQcm9qTWF0aC5yYWRUb0RlZyhwaGkxUmFkKTtcblxuICBOMSA9IGEgLyBNYXRoLnNxcnQoMSAtIGVjY1NxdWFyZWQgKiBNYXRoLnNpbihwaGkxUmFkKSAqIE1hdGguc2luKHBoaTFSYWQpKTtcbiAgVDEgPSBNYXRoLnRhbihwaGkxUmFkKSAqIE1hdGgudGFuKHBoaTFSYWQpO1xuICBDMSA9IGVjY1ByaW1lU3F1YXJlZCAqIE1hdGguY29zKHBoaTFSYWQpICogTWF0aC5jb3MocGhpMVJhZCk7XG4gIFIxID0gYSAqICgxIC0gZWNjU3F1YXJlZCkgLyBNYXRoLnBvdygxIC0gZWNjU3F1YXJlZCAqIE1hdGguc2luKHBoaTFSYWQpICogTWF0aC5zaW4ocGhpMVJhZCksIDEuNSk7XG4gIEQgPSB4IC8gKE4xICogazApO1xuXG4gIHZhciBsYXQgPSBwaGkxUmFkIC0gKE4xICogTWF0aC50YW4ocGhpMVJhZCkgLyBSMSkgKiAoRCAqIEQgLyAyIC0gKDUgKyAzICogVDEgKyAxMCAqIEMxIC0gNCAqIEMxICogQzEgLSA5ICogZWNjUHJpbWVTcXVhcmVkKSAqIEQgKiBEICogRCAqIEQgLyAyNCArICg2MSArIDkwICogVDEgKyAyOTggKiBDMSArIDQ1ICogVDEgKiBUMSAtIDI1MiAqIGVjY1ByaW1lU3F1YXJlZCAtIDMgKiBDMSAqIEMxKSAqIEQgKiBEICogRCAqIEQgKiBEICogRCAvIDcyMCk7XG4gIGxhdCA9IHJhZFRvRGVnKGxhdCk7XG5cbiAgdmFyIGxvbiA9IChEIC0gKDEgKyAyICogVDEgKyBDMSkgKiBEICogRCAqIEQgLyA2ICsgKDUgLSAyICogQzEgKyAyOCAqIFQxIC0gMyAqIEMxICogQzEgKyA4ICogZWNjUHJpbWVTcXVhcmVkICsgMjQgKiBUMSAqIFQxKSAqIEQgKiBEICogRCAqIEQgKiBEIC8gMTIwKSAvIE1hdGguY29zKHBoaTFSYWQpO1xuICBsb24gPSBMb25nT3JpZ2luICsgcmFkVG9EZWcobG9uKTtcblxuICB2YXIgcmVzdWx0O1xuICBpZiAodXRtLmFjY3VyYWN5KSB7XG4gICAgdmFyIHRvcFJpZ2h0ID0gVVRNdG9MTCh7XG4gICAgICBub3J0aGluZzogdXRtLm5vcnRoaW5nICsgdXRtLmFjY3VyYWN5LFxuICAgICAgZWFzdGluZzogdXRtLmVhc3RpbmcgKyB1dG0uYWNjdXJhY3ksXG4gICAgICB6b25lTGV0dGVyOiB1dG0uem9uZUxldHRlcixcbiAgICAgIHpvbmVOdW1iZXI6IHV0bS56b25lTnVtYmVyXG4gICAgfSk7XG4gICAgcmVzdWx0ID0ge1xuICAgICAgdG9wOiB0b3BSaWdodC5sYXQsXG4gICAgICByaWdodDogdG9wUmlnaHQubG9uLFxuICAgICAgYm90dG9tOiBsYXQsXG4gICAgICBsZWZ0OiBsb25cbiAgICB9O1xuICB9XG4gIGVsc2Uge1xuICAgIHJlc3VsdCA9IHtcbiAgICAgIGxhdDogbGF0LFxuICAgICAgbG9uOiBsb25cbiAgICB9O1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgTUdSUyBsZXR0ZXIgZGVzaWduYXRvciBmb3IgdGhlIGdpdmVuIGxhdGl0dWRlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbGF0IFRoZSBsYXRpdHVkZSBpbiBXR1M4NCB0byBnZXQgdGhlIGxldHRlciBkZXNpZ25hdG9yXG4gKiAgICAgZm9yLlxuICogQHJldHVybiB7Y2hhcn0gVGhlIGxldHRlciBkZXNpZ25hdG9yLlxuICovXG5mdW5jdGlvbiBnZXRMZXR0ZXJEZXNpZ25hdG9yKGxhdCkge1xuICAvL1RoaXMgaXMgaGVyZSBhcyBhbiBlcnJvciBmbGFnIHRvIHNob3cgdGhhdCB0aGUgTGF0aXR1ZGUgaXNcbiAgLy9vdXRzaWRlIE1HUlMgbGltaXRzXG4gIHZhciBMZXR0ZXJEZXNpZ25hdG9yID0gJ1onO1xuXG4gIGlmICgoODQgPj0gbGF0KSAmJiAobGF0ID49IDcyKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnWCc7XG4gIH1cbiAgZWxzZSBpZiAoKDcyID4gbGF0KSAmJiAobGF0ID49IDY0KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnVyc7XG4gIH1cbiAgZWxzZSBpZiAoKDY0ID4gbGF0KSAmJiAobGF0ID49IDU2KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnVic7XG4gIH1cbiAgZWxzZSBpZiAoKDU2ID4gbGF0KSAmJiAobGF0ID49IDQ4KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnVSc7XG4gIH1cbiAgZWxzZSBpZiAoKDQ4ID4gbGF0KSAmJiAobGF0ID49IDQwKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnVCc7XG4gIH1cbiAgZWxzZSBpZiAoKDQwID4gbGF0KSAmJiAobGF0ID49IDMyKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnUyc7XG4gIH1cbiAgZWxzZSBpZiAoKDMyID4gbGF0KSAmJiAobGF0ID49IDI0KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnUic7XG4gIH1cbiAgZWxzZSBpZiAoKDI0ID4gbGF0KSAmJiAobGF0ID49IDE2KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnUSc7XG4gIH1cbiAgZWxzZSBpZiAoKDE2ID4gbGF0KSAmJiAobGF0ID49IDgpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdQJztcbiAgfVxuICBlbHNlIGlmICgoOCA+IGxhdCkgJiYgKGxhdCA+PSAwKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnTic7XG4gIH1cbiAgZWxzZSBpZiAoKDAgPiBsYXQpICYmIChsYXQgPj0gLTgpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdNJztcbiAgfVxuICBlbHNlIGlmICgoLTggPiBsYXQpICYmIChsYXQgPj0gLTE2KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnTCc7XG4gIH1cbiAgZWxzZSBpZiAoKC0xNiA+IGxhdCkgJiYgKGxhdCA+PSAtMjQpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdLJztcbiAgfVxuICBlbHNlIGlmICgoLTI0ID4gbGF0KSAmJiAobGF0ID49IC0zMikpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ0onO1xuICB9XG4gIGVsc2UgaWYgKCgtMzIgPiBsYXQpICYmIChsYXQgPj0gLTQwKSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnSCc7XG4gIH1cbiAgZWxzZSBpZiAoKC00MCA+IGxhdCkgJiYgKGxhdCA+PSAtNDgpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdHJztcbiAgfVxuICBlbHNlIGlmICgoLTQ4ID4gbGF0KSAmJiAobGF0ID49IC01NikpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ0YnO1xuICB9XG4gIGVsc2UgaWYgKCgtNTYgPiBsYXQpICYmIChsYXQgPj0gLTY0KSkge1xuICAgIExldHRlckRlc2lnbmF0b3IgPSAnRSc7XG4gIH1cbiAgZWxzZSBpZiAoKC02NCA+IGxhdCkgJiYgKGxhdCA+PSAtNzIpKSB7XG4gICAgTGV0dGVyRGVzaWduYXRvciA9ICdEJztcbiAgfVxuICBlbHNlIGlmICgoLTcyID4gbGF0KSAmJiAobGF0ID49IC04MCkpIHtcbiAgICBMZXR0ZXJEZXNpZ25hdG9yID0gJ0MnO1xuICB9XG4gIHJldHVybiBMZXR0ZXJEZXNpZ25hdG9yO1xufVxuXG4vKipcbiAqIEVuY29kZXMgYSBVVE0gbG9jYXRpb24gYXMgTUdSUyBzdHJpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7b2JqZWN0fSB1dG0gQW4gb2JqZWN0IGxpdGVyYWwgd2l0aCBlYXN0aW5nLCBub3J0aGluZyxcbiAqICAgICB6b25lTGV0dGVyLCB6b25lTnVtYmVyXG4gKiBAcGFyYW0ge251bWJlcn0gYWNjdXJhY3kgQWNjdXJhY3kgaW4gZGlnaXRzICgxLTUpLlxuICogQHJldHVybiB7c3RyaW5nfSBNR1JTIHN0cmluZyBmb3IgdGhlIGdpdmVuIFVUTSBsb2NhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZW5jb2RlKHV0bSwgYWNjdXJhY3kpIHtcbiAgLy8gcHJlcGVuZCB3aXRoIGxlYWRpbmcgemVyb2VzXG4gIHZhciBzZWFzdGluZyA9IFwiMDAwMDBcIiArIHV0bS5lYXN0aW5nLFxuICAgIHNub3J0aGluZyA9IFwiMDAwMDBcIiArIHV0bS5ub3J0aGluZztcblxuICByZXR1cm4gdXRtLnpvbmVOdW1iZXIgKyB1dG0uem9uZUxldHRlciArIGdldDEwMGtJRCh1dG0uZWFzdGluZywgdXRtLm5vcnRoaW5nLCB1dG0uem9uZU51bWJlcikgKyBzZWFzdGluZy5zdWJzdHIoc2Vhc3RpbmcubGVuZ3RoIC0gNSwgYWNjdXJhY3kpICsgc25vcnRoaW5nLnN1YnN0cihzbm9ydGhpbmcubGVuZ3RoIC0gNSwgYWNjdXJhY3kpO1xufVxuXG4vKipcbiAqIEdldCB0aGUgdHdvIGxldHRlciAxMDBrIGRlc2lnbmF0b3IgZm9yIGEgZ2l2ZW4gVVRNIGVhc3RpbmcsXG4gKiBub3J0aGluZyBhbmQgem9uZSBudW1iZXIgdmFsdWUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBlYXN0aW5nXG4gKiBAcGFyYW0ge251bWJlcn0gbm9ydGhpbmdcbiAqIEBwYXJhbSB7bnVtYmVyfSB6b25lTnVtYmVyXG4gKiBAcmV0dXJuIHRoZSB0d28gbGV0dGVyIDEwMGsgZGVzaWduYXRvciBmb3IgdGhlIGdpdmVuIFVUTSBsb2NhdGlvbi5cbiAqL1xuZnVuY3Rpb24gZ2V0MTAwa0lEKGVhc3RpbmcsIG5vcnRoaW5nLCB6b25lTnVtYmVyKSB7XG4gIHZhciBzZXRQYXJtID0gZ2V0MTAwa1NldEZvclpvbmUoem9uZU51bWJlcik7XG4gIHZhciBzZXRDb2x1bW4gPSBNYXRoLmZsb29yKGVhc3RpbmcgLyAxMDAwMDApO1xuICB2YXIgc2V0Um93ID0gTWF0aC5mbG9vcihub3J0aGluZyAvIDEwMDAwMCkgJSAyMDtcbiAgcmV0dXJuIGdldExldHRlcjEwMGtJRChzZXRDb2x1bW4sIHNldFJvdywgc2V0UGFybSk7XG59XG5cbi8qKlxuICogR2l2ZW4gYSBVVE0gem9uZSBudW1iZXIsIGZpZ3VyZSBvdXQgdGhlIE1HUlMgMTAwSyBzZXQgaXQgaXMgaW4uXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBpIEFuIFVUTSB6b25lIG51bWJlci5cbiAqIEByZXR1cm4ge251bWJlcn0gdGhlIDEwMGsgc2V0IHRoZSBVVE0gem9uZSBpcyBpbi5cbiAqL1xuZnVuY3Rpb24gZ2V0MTAwa1NldEZvclpvbmUoaSkge1xuICB2YXIgc2V0UGFybSA9IGkgJSBOVU1fMTAwS19TRVRTO1xuICBpZiAoc2V0UGFybSA9PT0gMCkge1xuICAgIHNldFBhcm0gPSBOVU1fMTAwS19TRVRTO1xuICB9XG5cbiAgcmV0dXJuIHNldFBhcm07XG59XG5cbi8qKlxuICogR2V0IHRoZSB0d28tbGV0dGVyIE1HUlMgMTAwayBkZXNpZ25hdG9yIGdpdmVuIGluZm9ybWF0aW9uXG4gKiB0cmFuc2xhdGVkIGZyb20gdGhlIFVUTSBub3J0aGluZywgZWFzdGluZyBhbmQgem9uZSBudW1iZXIuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBjb2x1bW4gdGhlIGNvbHVtbiBpbmRleCBhcyBpdCByZWxhdGVzIHRvIHRoZSBNR1JTXG4gKiAgICAgICAgMTAwayBzZXQgc3ByZWFkc2hlZXQsIGNyZWF0ZWQgZnJvbSB0aGUgVVRNIGVhc3RpbmcuXG4gKiAgICAgICAgVmFsdWVzIGFyZSAxLTguXG4gKiBAcGFyYW0ge251bWJlcn0gcm93IHRoZSByb3cgaW5kZXggYXMgaXQgcmVsYXRlcyB0byB0aGUgTUdSUyAxMDBrIHNldFxuICogICAgICAgIHNwcmVhZHNoZWV0LCBjcmVhdGVkIGZyb20gdGhlIFVUTSBub3J0aGluZyB2YWx1ZS4gVmFsdWVzXG4gKiAgICAgICAgYXJlIGZyb20gMC0xOS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBwYXJtIHRoZSBzZXQgYmxvY2ssIGFzIGl0IHJlbGF0ZXMgdG8gdGhlIE1HUlMgMTAwayBzZXRcbiAqICAgICAgICBzcHJlYWRzaGVldCwgY3JlYXRlZCBmcm9tIHRoZSBVVE0gem9uZS4gVmFsdWVzIGFyZSBmcm9tXG4gKiAgICAgICAgMS02MC5cbiAqIEByZXR1cm4gdHdvIGxldHRlciBNR1JTIDEwMGsgY29kZS5cbiAqL1xuZnVuY3Rpb24gZ2V0TGV0dGVyMTAwa0lEKGNvbHVtbiwgcm93LCBwYXJtKSB7XG4gIC8vIGNvbE9yaWdpbiBhbmQgcm93T3JpZ2luIGFyZSB0aGUgbGV0dGVycyBhdCB0aGUgb3JpZ2luIG9mIHRoZSBzZXRcbiAgdmFyIGluZGV4ID0gcGFybSAtIDE7XG4gIHZhciBjb2xPcmlnaW4gPSBTRVRfT1JJR0lOX0NPTFVNTl9MRVRURVJTLmNoYXJDb2RlQXQoaW5kZXgpO1xuICB2YXIgcm93T3JpZ2luID0gU0VUX09SSUdJTl9ST1dfTEVUVEVSUy5jaGFyQ29kZUF0KGluZGV4KTtcblxuICAvLyBjb2xJbnQgYW5kIHJvd0ludCBhcmUgdGhlIGxldHRlcnMgdG8gYnVpbGQgdG8gcmV0dXJuXG4gIHZhciBjb2xJbnQgPSBjb2xPcmlnaW4gKyBjb2x1bW4gLSAxO1xuICB2YXIgcm93SW50ID0gcm93T3JpZ2luICsgcm93O1xuICB2YXIgcm9sbG92ZXIgPSBmYWxzZTtcblxuICBpZiAoY29sSW50ID4gWikge1xuICAgIGNvbEludCA9IGNvbEludCAtIFogKyBBIC0gMTtcbiAgICByb2xsb3ZlciA9IHRydWU7XG4gIH1cblxuICBpZiAoY29sSW50ID09PSBJIHx8IChjb2xPcmlnaW4gPCBJICYmIGNvbEludCA+IEkpIHx8ICgoY29sSW50ID4gSSB8fCBjb2xPcmlnaW4gPCBJKSAmJiByb2xsb3ZlcikpIHtcbiAgICBjb2xJbnQrKztcbiAgfVxuXG4gIGlmIChjb2xJbnQgPT09IE8gfHwgKGNvbE9yaWdpbiA8IE8gJiYgY29sSW50ID4gTykgfHwgKChjb2xJbnQgPiBPIHx8IGNvbE9yaWdpbiA8IE8pICYmIHJvbGxvdmVyKSkge1xuICAgIGNvbEludCsrO1xuXG4gICAgaWYgKGNvbEludCA9PT0gSSkge1xuICAgICAgY29sSW50Kys7XG4gICAgfVxuICB9XG5cbiAgaWYgKGNvbEludCA+IFopIHtcbiAgICBjb2xJbnQgPSBjb2xJbnQgLSBaICsgQSAtIDE7XG4gIH1cblxuICBpZiAocm93SW50ID4gVikge1xuICAgIHJvd0ludCA9IHJvd0ludCAtIFYgKyBBIC0gMTtcbiAgICByb2xsb3ZlciA9IHRydWU7XG4gIH1cbiAgZWxzZSB7XG4gICAgcm9sbG92ZXIgPSBmYWxzZTtcbiAgfVxuXG4gIGlmICgoKHJvd0ludCA9PT0gSSkgfHwgKChyb3dPcmlnaW4gPCBJKSAmJiAocm93SW50ID4gSSkpKSB8fCAoKChyb3dJbnQgPiBJKSB8fCAocm93T3JpZ2luIDwgSSkpICYmIHJvbGxvdmVyKSkge1xuICAgIHJvd0ludCsrO1xuICB9XG5cbiAgaWYgKCgocm93SW50ID09PSBPKSB8fCAoKHJvd09yaWdpbiA8IE8pICYmIChyb3dJbnQgPiBPKSkpIHx8ICgoKHJvd0ludCA+IE8pIHx8IChyb3dPcmlnaW4gPCBPKSkgJiYgcm9sbG92ZXIpKSB7XG4gICAgcm93SW50Kys7XG5cbiAgICBpZiAocm93SW50ID09PSBJKSB7XG4gICAgICByb3dJbnQrKztcbiAgICB9XG4gIH1cblxuICBpZiAocm93SW50ID4gVikge1xuICAgIHJvd0ludCA9IHJvd0ludCAtIFYgKyBBIC0gMTtcbiAgfVxuXG4gIHZhciB0d29MZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNvbEludCkgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKHJvd0ludCk7XG4gIHJldHVybiB0d29MZXR0ZXI7XG59XG5cbi8qKlxuICogRGVjb2RlIHRoZSBVVE0gcGFyYW1ldGVycyBmcm9tIGEgTUdSUyBzdHJpbmcuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBtZ3JzU3RyaW5nIGFuIFVQUEVSQ0FTRSBjb29yZGluYXRlIHN0cmluZyBpcyBleHBlY3RlZC5cbiAqIEByZXR1cm4ge29iamVjdH0gQW4gb2JqZWN0IGxpdGVyYWwgd2l0aCBlYXN0aW5nLCBub3J0aGluZywgem9uZUxldHRlcixcbiAqICAgICB6b25lTnVtYmVyIGFuZCBhY2N1cmFjeSAoaW4gbWV0ZXJzKSBwcm9wZXJ0aWVzLlxuICovXG5mdW5jdGlvbiBkZWNvZGUobWdyc1N0cmluZykge1xuXG4gIGlmIChtZ3JzU3RyaW5nICYmIG1ncnNTdHJpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgdGhyb3cgKFwiTUdSU1BvaW50IGNvdmVydGluZyBmcm9tIG5vdGhpbmdcIik7XG4gIH1cblxuICB2YXIgbGVuZ3RoID0gbWdyc1N0cmluZy5sZW5ndGg7XG5cbiAgdmFyIGh1bksgPSBudWxsO1xuICB2YXIgc2IgPSBcIlwiO1xuICB2YXIgdGVzdENoYXI7XG4gIHZhciBpID0gMDtcblxuICAvLyBnZXQgWm9uZSBudW1iZXJcbiAgd2hpbGUgKCEoL1tBLVpdLykudGVzdCh0ZXN0Q2hhciA9IG1ncnNTdHJpbmcuY2hhckF0KGkpKSkge1xuICAgIGlmIChpID49IDIpIHtcbiAgICAgIHRocm93IChcIk1HUlNQb2ludCBiYWQgY29udmVyc2lvbiBmcm9tOiBcIiArIG1ncnNTdHJpbmcpO1xuICAgIH1cbiAgICBzYiArPSB0ZXN0Q2hhcjtcbiAgICBpKys7XG4gIH1cblxuICB2YXIgem9uZU51bWJlciA9IHBhcnNlSW50KHNiLCAxMCk7XG5cbiAgaWYgKGkgPT09IDAgfHwgaSArIDMgPiBsZW5ndGgpIHtcbiAgICAvLyBBIGdvb2QgTUdSUyBzdHJpbmcgaGFzIHRvIGJlIDQtNSBkaWdpdHMgbG9uZyxcbiAgICAvLyAjI0FBQS8jQUFBIGF0IGxlYXN0LlxuICAgIHRocm93IChcIk1HUlNQb2ludCBiYWQgY29udmVyc2lvbiBmcm9tOiBcIiArIG1ncnNTdHJpbmcpO1xuICB9XG5cbiAgdmFyIHpvbmVMZXR0ZXIgPSBtZ3JzU3RyaW5nLmNoYXJBdChpKyspO1xuXG4gIC8vIFNob3VsZCB3ZSBjaGVjayB0aGUgem9uZSBsZXR0ZXIgaGVyZT8gV2h5IG5vdC5cbiAgaWYgKHpvbmVMZXR0ZXIgPD0gJ0EnIHx8IHpvbmVMZXR0ZXIgPT09ICdCJyB8fCB6b25lTGV0dGVyID09PSAnWScgfHwgem9uZUxldHRlciA+PSAnWicgfHwgem9uZUxldHRlciA9PT0gJ0knIHx8IHpvbmVMZXR0ZXIgPT09ICdPJykge1xuICAgIHRocm93IChcIk1HUlNQb2ludCB6b25lIGxldHRlciBcIiArIHpvbmVMZXR0ZXIgKyBcIiBub3QgaGFuZGxlZDogXCIgKyBtZ3JzU3RyaW5nKTtcbiAgfVxuXG4gIGh1bksgPSBtZ3JzU3RyaW5nLnN1YnN0cmluZyhpLCBpICs9IDIpO1xuXG4gIHZhciBzZXQgPSBnZXQxMDBrU2V0Rm9yWm9uZSh6b25lTnVtYmVyKTtcblxuICB2YXIgZWFzdDEwMGsgPSBnZXRFYXN0aW5nRnJvbUNoYXIoaHVuSy5jaGFyQXQoMCksIHNldCk7XG4gIHZhciBub3J0aDEwMGsgPSBnZXROb3J0aGluZ0Zyb21DaGFyKGh1bksuY2hhckF0KDEpLCBzZXQpO1xuXG4gIC8vIFdlIGhhdmUgYSBidWcgd2hlcmUgdGhlIG5vcnRoaW5nIG1heSBiZSAyMDAwMDAwIHRvbyBsb3cuXG4gIC8vIEhvd1xuICAvLyBkbyB3ZSBrbm93IHdoZW4gdG8gcm9sbCBvdmVyP1xuXG4gIHdoaWxlIChub3J0aDEwMGsgPCBnZXRNaW5Ob3J0aGluZyh6b25lTGV0dGVyKSkge1xuICAgIG5vcnRoMTAwayArPSAyMDAwMDAwO1xuICB9XG5cbiAgLy8gY2FsY3VsYXRlIHRoZSBjaGFyIGluZGV4IGZvciBlYXN0aW5nL25vcnRoaW5nIHNlcGFyYXRvclxuICB2YXIgcmVtYWluZGVyID0gbGVuZ3RoIC0gaTtcblxuICBpZiAocmVtYWluZGVyICUgMiAhPT0gMCkge1xuICAgIHRocm93IChcIk1HUlNQb2ludCBoYXMgdG8gaGF2ZSBhbiBldmVuIG51bWJlciBcXG5vZiBkaWdpdHMgYWZ0ZXIgdGhlIHpvbmUgbGV0dGVyIGFuZCB0d28gMTAwa20gbGV0dGVycyAtIGZyb250IFxcbmhhbGYgZm9yIGVhc3RpbmcgbWV0ZXJzLCBzZWNvbmQgaGFsZiBmb3IgXFxubm9ydGhpbmcgbWV0ZXJzXCIgKyBtZ3JzU3RyaW5nKTtcbiAgfVxuXG4gIHZhciBzZXAgPSByZW1haW5kZXIgLyAyO1xuXG4gIHZhciBzZXBFYXN0aW5nID0gMC4wO1xuICB2YXIgc2VwTm9ydGhpbmcgPSAwLjA7XG4gIHZhciBhY2N1cmFjeUJvbnVzLCBzZXBFYXN0aW5nU3RyaW5nLCBzZXBOb3J0aGluZ1N0cmluZywgZWFzdGluZywgbm9ydGhpbmc7XG4gIGlmIChzZXAgPiAwKSB7XG4gICAgYWNjdXJhY3lCb251cyA9IDEwMDAwMC4wIC8gTWF0aC5wb3coMTAsIHNlcCk7XG4gICAgc2VwRWFzdGluZ1N0cmluZyA9IG1ncnNTdHJpbmcuc3Vic3RyaW5nKGksIGkgKyBzZXApO1xuICAgIHNlcEVhc3RpbmcgPSBwYXJzZUZsb2F0KHNlcEVhc3RpbmdTdHJpbmcpICogYWNjdXJhY3lCb251cztcbiAgICBzZXBOb3J0aGluZ1N0cmluZyA9IG1ncnNTdHJpbmcuc3Vic3RyaW5nKGkgKyBzZXApO1xuICAgIHNlcE5vcnRoaW5nID0gcGFyc2VGbG9hdChzZXBOb3J0aGluZ1N0cmluZykgKiBhY2N1cmFjeUJvbnVzO1xuICB9XG5cbiAgZWFzdGluZyA9IHNlcEVhc3RpbmcgKyBlYXN0MTAwaztcbiAgbm9ydGhpbmcgPSBzZXBOb3J0aGluZyArIG5vcnRoMTAwaztcblxuICByZXR1cm4ge1xuICAgIGVhc3Rpbmc6IGVhc3RpbmcsXG4gICAgbm9ydGhpbmc6IG5vcnRoaW5nLFxuICAgIHpvbmVMZXR0ZXI6IHpvbmVMZXR0ZXIsXG4gICAgem9uZU51bWJlcjogem9uZU51bWJlcixcbiAgICBhY2N1cmFjeTogYWNjdXJhY3lCb251c1xuICB9O1xufVxuXG4vKipcbiAqIEdpdmVuIHRoZSBmaXJzdCBsZXR0ZXIgZnJvbSBhIHR3by1sZXR0ZXIgTUdSUyAxMDBrIHpvbmUsIGFuZCBnaXZlbiB0aGVcbiAqIE1HUlMgdGFibGUgc2V0IGZvciB0aGUgem9uZSBudW1iZXIsIGZpZ3VyZSBvdXQgdGhlIGVhc3RpbmcgdmFsdWUgdGhhdFxuICogc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSBvdGhlciwgc2Vjb25kYXJ5IGVhc3RpbmcgdmFsdWUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Y2hhcn0gZSBUaGUgZmlyc3QgbGV0dGVyIGZyb20gYSB0d28tbGV0dGVyIE1HUlMgMTAwwrRrIHpvbmUuXG4gKiBAcGFyYW0ge251bWJlcn0gc2V0IFRoZSBNR1JTIHRhYmxlIHNldCBmb3IgdGhlIHpvbmUgbnVtYmVyLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgZWFzdGluZyB2YWx1ZSBmb3IgdGhlIGdpdmVuIGxldHRlciBhbmQgc2V0LlxuICovXG5mdW5jdGlvbiBnZXRFYXN0aW5nRnJvbUNoYXIoZSwgc2V0KSB7XG4gIC8vIGNvbE9yaWdpbiBpcyB0aGUgbGV0dGVyIGF0IHRoZSBvcmlnaW4gb2YgdGhlIHNldCBmb3IgdGhlXG4gIC8vIGNvbHVtblxuICB2YXIgY3VyQ29sID0gU0VUX09SSUdJTl9DT0xVTU5fTEVUVEVSUy5jaGFyQ29kZUF0KHNldCAtIDEpO1xuICB2YXIgZWFzdGluZ1ZhbHVlID0gMTAwMDAwLjA7XG4gIHZhciByZXdpbmRNYXJrZXIgPSBmYWxzZTtcblxuICB3aGlsZSAoY3VyQ29sICE9PSBlLmNoYXJDb2RlQXQoMCkpIHtcbiAgICBjdXJDb2wrKztcbiAgICBpZiAoY3VyQ29sID09PSBJKSB7XG4gICAgICBjdXJDb2wrKztcbiAgICB9XG4gICAgaWYgKGN1ckNvbCA9PT0gTykge1xuICAgICAgY3VyQ29sKys7XG4gICAgfVxuICAgIGlmIChjdXJDb2wgPiBaKSB7XG4gICAgICBpZiAocmV3aW5kTWFya2VyKSB7XG4gICAgICAgIHRocm93IChcIkJhZCBjaGFyYWN0ZXI6IFwiICsgZSk7XG4gICAgICB9XG4gICAgICBjdXJDb2wgPSBBO1xuICAgICAgcmV3aW5kTWFya2VyID0gdHJ1ZTtcbiAgICB9XG4gICAgZWFzdGluZ1ZhbHVlICs9IDEwMDAwMC4wO1xuICB9XG5cbiAgcmV0dXJuIGVhc3RpbmdWYWx1ZTtcbn1cblxuLyoqXG4gKiBHaXZlbiB0aGUgc2Vjb25kIGxldHRlciBmcm9tIGEgdHdvLWxldHRlciBNR1JTIDEwMGsgem9uZSwgYW5kIGdpdmVuIHRoZVxuICogTUdSUyB0YWJsZSBzZXQgZm9yIHRoZSB6b25lIG51bWJlciwgZmlndXJlIG91dCB0aGUgbm9ydGhpbmcgdmFsdWUgdGhhdFxuICogc2hvdWxkIGJlIGFkZGVkIHRvIHRoZSBvdGhlciwgc2Vjb25kYXJ5IG5vcnRoaW5nIHZhbHVlLiBZb3UgaGF2ZSB0b1xuICogcmVtZW1iZXIgdGhhdCBOb3J0aGluZ3MgYXJlIGRldGVybWluZWQgZnJvbSB0aGUgZXF1YXRvciwgYW5kIHRoZSB2ZXJ0aWNhbFxuICogY3ljbGUgb2YgbGV0dGVycyBtZWFuIGEgMjAwMDAwMCBhZGRpdGlvbmFsIG5vcnRoaW5nIG1ldGVycy4gVGhpcyBoYXBwZW5zXG4gKiBhcHByb3guIGV2ZXJ5IDE4IGRlZ3JlZXMgb2YgbGF0aXR1ZGUuIFRoaXMgbWV0aG9kIGRvZXMgKk5PVCogY291bnQgYW55XG4gKiBhZGRpdGlvbmFsIG5vcnRoaW5ncy4gWW91IGhhdmUgdG8gZmlndXJlIG91dCBob3cgbWFueSAyMDAwMDAwIG1ldGVycyBuZWVkXG4gKiB0byBiZSBhZGRlZCBmb3IgdGhlIHpvbmUgbGV0dGVyIG9mIHRoZSBNR1JTIGNvb3JkaW5hdGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Y2hhcn0gbiBTZWNvbmQgbGV0dGVyIG9mIHRoZSBNR1JTIDEwMGsgem9uZVxuICogQHBhcmFtIHtudW1iZXJ9IHNldCBUaGUgTUdSUyB0YWJsZSBzZXQgbnVtYmVyLCB3aGljaCBpcyBkZXBlbmRlbnQgb24gdGhlXG4gKiAgICAgVVRNIHpvbmUgbnVtYmVyLlxuICogQHJldHVybiB7bnVtYmVyfSBUaGUgbm9ydGhpbmcgdmFsdWUgZm9yIHRoZSBnaXZlbiBsZXR0ZXIgYW5kIHNldC5cbiAqL1xuZnVuY3Rpb24gZ2V0Tm9ydGhpbmdGcm9tQ2hhcihuLCBzZXQpIHtcblxuICBpZiAobiA+ICdWJykge1xuICAgIHRocm93IChcIk1HUlNQb2ludCBnaXZlbiBpbnZhbGlkIE5vcnRoaW5nIFwiICsgbik7XG4gIH1cblxuICAvLyByb3dPcmlnaW4gaXMgdGhlIGxldHRlciBhdCB0aGUgb3JpZ2luIG9mIHRoZSBzZXQgZm9yIHRoZVxuICAvLyBjb2x1bW5cbiAgdmFyIGN1clJvdyA9IFNFVF9PUklHSU5fUk9XX0xFVFRFUlMuY2hhckNvZGVBdChzZXQgLSAxKTtcbiAgdmFyIG5vcnRoaW5nVmFsdWUgPSAwLjA7XG4gIHZhciByZXdpbmRNYXJrZXIgPSBmYWxzZTtcblxuICB3aGlsZSAoY3VyUm93ICE9PSBuLmNoYXJDb2RlQXQoMCkpIHtcbiAgICBjdXJSb3crKztcbiAgICBpZiAoY3VyUm93ID09PSBJKSB7XG4gICAgICBjdXJSb3crKztcbiAgICB9XG4gICAgaWYgKGN1clJvdyA9PT0gTykge1xuICAgICAgY3VyUm93Kys7XG4gICAgfVxuICAgIC8vIGZpeGluZyBhIGJ1ZyBtYWtpbmcgd2hvbGUgYXBwbGljYXRpb24gaGFuZyBpbiB0aGlzIGxvb3BcbiAgICAvLyB3aGVuICduJyBpcyBhIHdyb25nIGNoYXJhY3RlclxuICAgIGlmIChjdXJSb3cgPiBWKSB7XG4gICAgICBpZiAocmV3aW5kTWFya2VyKSB7IC8vIG1ha2luZyBzdXJlIHRoYXQgdGhpcyBsb29wIGVuZHNcbiAgICAgICAgdGhyb3cgKFwiQmFkIGNoYXJhY3RlcjogXCIgKyBuKTtcbiAgICAgIH1cbiAgICAgIGN1clJvdyA9IEE7XG4gICAgICByZXdpbmRNYXJrZXIgPSB0cnVlO1xuICAgIH1cbiAgICBub3J0aGluZ1ZhbHVlICs9IDEwMDAwMC4wO1xuICB9XG5cbiAgcmV0dXJuIG5vcnRoaW5nVmFsdWU7XG59XG5cbi8qKlxuICogVGhlIGZ1bmN0aW9uIGdldE1pbk5vcnRoaW5nIHJldHVybnMgdGhlIG1pbmltdW0gbm9ydGhpbmcgdmFsdWUgb2YgYSBNR1JTXG4gKiB6b25lLlxuICpcbiAqIFBvcnRlZCBmcm9tIEdlb3RyYW5zJyBjIExhdHRpdHVkZV9CYW5kX1ZhbHVlIHN0cnVjdHVyZSB0YWJsZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtjaGFyfSB6b25lTGV0dGVyIFRoZSBNR1JTIHpvbmUgdG8gZ2V0IHRoZSBtaW4gbm9ydGhpbmcgZm9yLlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBnZXRNaW5Ob3J0aGluZyh6b25lTGV0dGVyKSB7XG4gIHZhciBub3J0aGluZztcbiAgc3dpdGNoICh6b25lTGV0dGVyKSB7XG4gIGNhc2UgJ0MnOlxuICAgIG5vcnRoaW5nID0gMTEwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdEJzpcbiAgICBub3J0aGluZyA9IDIwMDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnRSc6XG4gICAgbm9ydGhpbmcgPSAyODAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ0YnOlxuICAgIG5vcnRoaW5nID0gMzcwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdHJzpcbiAgICBub3J0aGluZyA9IDQ2MDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnSCc6XG4gICAgbm9ydGhpbmcgPSA1NTAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ0onOlxuICAgIG5vcnRoaW5nID0gNjQwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdLJzpcbiAgICBub3J0aGluZyA9IDczMDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnTCc6XG4gICAgbm9ydGhpbmcgPSA4MjAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ00nOlxuICAgIG5vcnRoaW5nID0gOTEwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdOJzpcbiAgICBub3J0aGluZyA9IDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnUCc6XG4gICAgbm9ydGhpbmcgPSA4MDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnUSc6XG4gICAgbm9ydGhpbmcgPSAxNzAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ1InOlxuICAgIG5vcnRoaW5nID0gMjYwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdTJzpcbiAgICBub3J0aGluZyA9IDM1MDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnVCc6XG4gICAgbm9ydGhpbmcgPSA0NDAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ1UnOlxuICAgIG5vcnRoaW5nID0gNTMwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBjYXNlICdWJzpcbiAgICBub3J0aGluZyA9IDYyMDAwMDAuMDtcbiAgICBicmVhaztcbiAgY2FzZSAnVyc6XG4gICAgbm9ydGhpbmcgPSA3MDAwMDAwLjA7XG4gICAgYnJlYWs7XG4gIGNhc2UgJ1gnOlxuICAgIG5vcnRoaW5nID0gNzkwMDAwMC4wO1xuICAgIGJyZWFrO1xuICBkZWZhdWx0OlxuICAgIG5vcnRoaW5nID0gLTEuMDtcbiAgfVxuICBpZiAobm9ydGhpbmcgPj0gMC4wKSB7XG4gICAgcmV0dXJuIG5vcnRoaW5nO1xuICB9XG4gIGVsc2Uge1xuICAgIHRocm93IChcIkludmFsaWQgem9uZSBsZXR0ZXI6IFwiICsgem9uZUxldHRlcik7XG4gIH1cblxufVxuIiwiLy8gT3BlbkxheWVycy4gU2VlIGh0dHBzOi8vb3BlbmxheWVycy5vcmcvXG4vLyBMaWNlbnNlOiBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vb3BlbmxheWVycy9vcGVubGF5ZXJzL21hc3Rlci9MSUNFTlNFLm1kXG47KGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KSB7XG4gIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgZGVmaW5lKFtdLCBmYWN0b3J5KTtcbiAgfSBlbHNlIHtcbiAgICByb290Lm9sID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgdmFyIE9QRU5MQVlFUlMgPSB7fTtcbiAgdmFyIGwsYWE9XCJmdW5jdGlvblwiPT10eXBlb2YgT2JqZWN0LmRlZmluZVByb3BlcnRpZXM/T2JqZWN0LmRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGEsYixjKXthIT1BcnJheS5wcm90b3R5cGUmJmEhPU9iamVjdC5wcm90b3R5cGUmJihhW2JdPWMudmFsdWUpfSxiYT1cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3c9PT10aGlzP3RoaXM6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdsb2JhbCYmbnVsbCE9Z2xvYmFsP2dsb2JhbDp0aGlzO2Z1bmN0aW9uIGRhKGEsYil7aWYoYil7dmFyIGM9YmE7YT1hLnNwbGl0KFwiLlwiKTtmb3IodmFyIGQ9MDtkPGEubGVuZ3RoLTE7ZCsrKXt2YXIgZT1hW2RdO2UgaW4gY3x8KGNbZV09e30pO2M9Y1tlXX1hPWFbYS5sZW5ndGgtMV07ZD1jW2FdO2I9YihkKTtiIT1kJiZudWxsIT1iJiZhYShjLGEse2NvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpifSl9fVxuZGEoXCJNYXRoLmNvc2hcIixmdW5jdGlvbihhKXtpZihhKXJldHVybiBhO3ZhciBiPU1hdGguZXhwO3JldHVybiBmdW5jdGlvbihhKXthPU51bWJlcihhKTtyZXR1cm4oYihhKStiKC1hKSkvMn19KTtkYShcIk9iamVjdC5pc1wiLGZ1bmN0aW9uKGEpe3JldHVybiBhP2E6ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYT09PWM/MCE9PWF8fDEvYT09PTEvYzphIT09YSYmYyE9PWN9fSk7dmFyIGVhPXRoaXM7ZnVuY3Rpb24gcShhLGIpe3ZhciBjPU9QRU5MQVlFUlM7YT1hLnNwbGl0KFwiLlwiKTtjPWN8fGVhO2FbMF1pbiBjfHwhYy5leGVjU2NyaXB0fHxjLmV4ZWNTY3JpcHQoXCJ2YXIgXCIrYVswXSk7Zm9yKHZhciBkO2EubGVuZ3RoJiYoZD1hLnNoaWZ0KCkpOylhLmxlbmd0aHx8dm9pZCAwPT09Yj9jW2RdJiZjW2RdIT09T2JqZWN0LnByb3RvdHlwZVtkXT9jPWNbZF06Yz1jW2RdPXt9OmNbZF09Yn07ZnVuY3Rpb24gZmEoYSxiKXtyZXR1cm4gYT5iPzE6YTxiPy0xOjB9ZnVuY3Rpb24gaGEoYSxiLGMpe3ZhciBkPWEubGVuZ3RoO2lmKGFbMF08PWIpcmV0dXJuIDA7aWYoIShiPD1hW2QtMV0pKWlmKDA8Yylmb3IoYz0xO2M8ZDsrK2Mpe2lmKGFbY108YilyZXR1cm4gYy0xfWVsc2UgaWYoMD5jKWZvcihjPTE7YzxkOysrYyl7aWYoYVtjXTw9YilyZXR1cm4gY31lbHNlIGZvcihjPTE7YzxkOysrYyl7aWYoYVtjXT09YilyZXR1cm4gYztpZihhW2NdPGIpcmV0dXJuIGFbYy0xXS1iPGItYVtjXT9jLTE6Y31yZXR1cm4gZC0xfWZ1bmN0aW9uIGlhKGEsYil7dmFyIGM9QXJyYXkuaXNBcnJheShiKT9iOltiXSxkPWMubGVuZ3RoO2ZvcihiPTA7YjxkO2IrKylhW2EubGVuZ3RoXT1jW2JdfWZ1bmN0aW9uIGphKGEsYil7dmFyIGM9YS5sZW5ndGg7aWYoYyE9PWIubGVuZ3RoKXJldHVybiExO2Zvcih2YXIgZD0wO2Q8YztkKyspaWYoYVtkXSE9PWJbZF0pcmV0dXJuITE7cmV0dXJuITB9XG5mdW5jdGlvbiBrYShhKXt2YXIgYj1sYSxjPWEubGVuZ3RoLGQ9QXJyYXkoYS5sZW5ndGgpLGU7Zm9yKGU9MDtlPGM7ZSsrKWRbZV09e2luZGV4OmUsdmFsdWU6YVtlXX07ZC5zb3J0KGZ1bmN0aW9uKGEsYyl7cmV0dXJuIGIoYS52YWx1ZSxjLnZhbHVlKXx8YS5pbmRleC1jLmluZGV4fSk7Zm9yKGU9MDtlPGEubGVuZ3RoO2UrKylhW2VdPWRbZV0udmFsdWV9ZnVuY3Rpb24gbWEoYSxiKXt2YXIgYz1ifHxmYTtyZXR1cm4gYS5ldmVyeShmdW5jdGlvbihiLGUpe2lmKCFlKXJldHVybiEwO2I9YyhhW2UtMV0sYik7cmV0dXJuISgwPGJ8fDA9PT1iKX0pfTtmdW5jdGlvbiB0KGEsYil7YS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShiLnByb3RvdHlwZSk7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YX1mdW5jdGlvbiBuYSgpe31mdW5jdGlvbiB2KGEpe3JldHVybiBhLllofHwoYS5ZaD0rK29hKX12YXIgb2E9MDtmdW5jdGlvbiBwYShhKXt0aGlzLm1lc3NhZ2U9XCJBc3NlcnRpb24gZmFpbGVkLiBTZWUgaHR0cHM6Ly9vcGVubGF5ZXJzLm9yZy9lbi9sYXRlc3QvZG9jL2Vycm9ycy8jXCIrYStcIiBmb3IgZGV0YWlscy5cIjt0aGlzLmNvZGU9YTt0aGlzLm5hbWU9XCJBc3NlcnRpb25FcnJvclwifXQocGEsRXJyb3IpO2Z1bmN0aW9uIHcoYSxiKXtpZighYSl0aHJvdyBuZXcgcGEoYik7fTtmdW5jdGlvbiByYShhLGIsYyxkKXt0aGlzLk89YTt0aGlzLlI9Yjt0aGlzLlM9Yzt0aGlzLlU9ZH1mdW5jdGlvbiBzYShhLGIsYyl7cmV0dXJuIGEuTzw9YiYmYjw9YS5SJiZhLlM8PWMmJmM8PWEuVX1mdW5jdGlvbiB0YShhLGIpe3JldHVybiBhLk88PWIuUiYmYS5SPj1iLk8mJmEuUzw9Yi5VJiZhLlU+PWIuU307ZnVuY3Rpb24gdWEoYSxiLGMpe3JldHVybiBNYXRoLm1pbihNYXRoLm1heChhLGIpLGMpfXZhciB2YT1mdW5jdGlvbigpe3ZhciBhO1wiY29zaFwiaW4gTWF0aD9hPU1hdGguY29zaDphPWZ1bmN0aW9uKGEpe2E9TWF0aC5leHAoYSk7cmV0dXJuKGErMS9hKS8yfTtyZXR1cm4gYX0oKTtmdW5jdGlvbiB4YShhLGIsYyxkKXthPWMtYTtiPWQtYjtyZXR1cm4gYSphK2IqYn1mdW5jdGlvbiB5YShhKXtyZXR1cm4gYSpNYXRoLlBJLzE4MH1mdW5jdGlvbiB6YShhLGIpe2ElPWI7cmV0dXJuIDA+YSpiP2ErYjphfWZ1bmN0aW9uIEFhKGEsYixjKXtyZXR1cm4gYStjKihiLWEpfTtmdW5jdGlvbiBCYShhLGIsYyl7dm9pZCAwPT09YyYmKGM9WzAsMF0pO2NbMF09YVswXSsyKmI7Y1sxXT1hWzFdKzIqYjtyZXR1cm4gY31mdW5jdGlvbiBEYShhLGIsYyl7dm9pZCAwPT09YyYmKGM9WzAsMF0pO2NbMF09YVswXSpiKy41fDA7Y1sxXT1hWzFdKmIrLjV8MDtyZXR1cm4gY31mdW5jdGlvbiBFYShhLGIpe2lmKEFycmF5LmlzQXJyYXkoYSkpcmV0dXJuIGE7dm9pZCAwPT09Yj9iPVthLGFdOmJbMF09YlsxXT1hO3JldHVybiBifTtmdW5jdGlvbiBGYShhKXtmb3IodmFyIGI9SGEoKSxjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKUlhKGIsYVtjXSk7cmV0dXJuIGJ9ZnVuY3Rpb24gSmEoYSxiLGMpe3JldHVybiBjPyhjWzBdPWFbMF0tYixjWzFdPWFbMV0tYixjWzJdPWFbMl0rYixjWzNdPWFbM10rYixjKTpbYVswXS1iLGFbMV0tYixhWzJdK2IsYVszXStiXX1mdW5jdGlvbiBLYShhLGIpe3JldHVybiBiPyhiWzBdPWFbMF0sYlsxXT1hWzFdLGJbMl09YVsyXSxiWzNdPWFbM10sYik6YS5zbGljZSgpfWZ1bmN0aW9uIExhKGEsYixjKXtiPWI8YVswXT9hWzBdLWI6YVsyXTxiP2ItYVsyXTowO2E9YzxhWzFdP2FbMV0tYzphWzNdPGM/Yy1hWzNdOjA7cmV0dXJuIGIqYithKmF9ZnVuY3Rpb24gTWEoYSxiKXtyZXR1cm4gYVswXTw9YlswXSYmYlsyXTw9YVsyXSYmYVsxXTw9YlsxXSYmYlszXTw9YVszXX1mdW5jdGlvbiBIYSgpe3JldHVybltJbmZpbml0eSxJbmZpbml0eSwtSW5maW5pdHksLUluZmluaXR5XX1cbmZ1bmN0aW9uIE5hKGEsYixjLGQsZSl7cmV0dXJuIGU/KGVbMF09YSxlWzFdPWIsZVsyXT1jLGVbM109ZCxlKTpbYSxiLGMsZF19ZnVuY3Rpb24gT2EoYSl7cmV0dXJuIE5hKEluZmluaXR5LEluZmluaXR5LC1JbmZpbml0eSwtSW5maW5pdHksYSl9ZnVuY3Rpb24gUGEoYSxiKXt2YXIgYz1hWzBdO2E9YVsxXTtyZXR1cm4gTmEoYyxhLGMsYSxiKX1mdW5jdGlvbiBRYShhLGIpe3JldHVybiBhWzBdPT1iWzBdJiZhWzJdPT1iWzJdJiZhWzFdPT1iWzFdJiZhWzNdPT1iWzNdfWZ1bmN0aW9uIElhKGEsYil7YlswXTxhWzBdJiYoYVswXT1iWzBdKTtiWzBdPmFbMl0mJihhWzJdPWJbMF0pO2JbMV08YVsxXSYmKGFbMV09YlsxXSk7YlsxXT5hWzNdJiYoYVszXT1iWzFdKX1cbmZ1bmN0aW9uIFJhKGEsYixjLGQsZSl7Zm9yKDtjPGQ7Yys9ZSl7dmFyIGY9YSxnPWJbY10saD1iW2MrMV07ZlswXT1NYXRoLm1pbihmWzBdLGcpO2ZbMV09TWF0aC5taW4oZlsxXSxoKTtmWzJdPU1hdGgubWF4KGZbMl0sZyk7ZlszXT1NYXRoLm1heChmWzNdLGgpfXJldHVybiBhfWZ1bmN0aW9uIFNhKGEpe3JldHVyblsoYVswXSthWzJdKS8yLChhWzFdK2FbM10pLzJdfWZ1bmN0aW9uIFRhKGEsYixjLGQsZSl7dmFyIGY9YipkWzBdLzI7ZD1iKmRbMV0vMjtiPU1hdGguY29zKGMpO3ZhciBnPU1hdGguc2luKGMpO2M9ZipiO2YqPWc7Yio9ZDt2YXIgaD1kKmcsaz1hWzBdLG09YVsxXTthPWstYytoO2Q9ay1jLWg7Zz1rK2MtaDtjPWsrYytoO2g9bS1mLWI7az1tLWYrYjt2YXIgbj1tK2YrYjtmPW0rZi1iO3JldHVybiBOYShNYXRoLm1pbihhLGQsZyxjKSxNYXRoLm1pbihoLGssbixmKSxNYXRoLm1heChhLGQsZyxjKSxNYXRoLm1heChoLGssbixmKSxlKX1cbmZ1bmN0aW9uIFVhKGEsYil7dmFyIGM9SGEoKTtWYShhLGIpJiYoY1swXT1hWzBdPmJbMF0/YVswXTpiWzBdLGNbMV09YVsxXT5iWzFdP2FbMV06YlsxXSxjWzJdPWFbMl08YlsyXT9hWzJdOmJbMl0sY1szXT1hWzNdPGJbM10/YVszXTpiWzNdKTtyZXR1cm4gY31mdW5jdGlvbiBXYShhKXtyZXR1cm5bYVswXSxhWzNdXX1mdW5jdGlvbiBYYShhKXtyZXR1cm4gYVsyXS1hWzBdfWZ1bmN0aW9uIFZhKGEsYil7cmV0dXJuIGFbMF08PWJbMl0mJmFbMl0+PWJbMF0mJmFbMV08PWJbM10mJmFbM10+PWJbMV19ZnVuY3Rpb24gWWEoYSl7cmV0dXJuIGFbMl08YVswXXx8YVszXTxhWzFdfTt2YXIgWmE9XCJmdW5jdGlvblwiPT09dHlwZW9mIE9iamVjdC5hc3NpZ24/T2JqZWN0LmFzc2lnbjpmdW5jdGlvbihhLGIpe2lmKCFhfHxudWxsPT09YSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNvbnZlcnQgdW5kZWZpbmVkIG9yIG51bGwgdG8gb2JqZWN0XCIpO2Zvcih2YXIgYz1PYmplY3QoYSksZD0xLGU9YXJndW1lbnRzLmxlbmd0aDtkPGU7KytkKXt2YXIgZj1hcmd1bWVudHNbZF07aWYodm9pZCAwIT09ZiYmbnVsbCE9PWYpZm9yKHZhciBnIGluIGYpZi5oYXNPd25Qcm9wZXJ0eShnKSYmKGNbZ109ZltnXSl9cmV0dXJuIGN9O2Z1bmN0aW9uICRhKGEpe2Zvcih2YXIgYiBpbiBhKWRlbGV0ZSBhW2JdfWZ1bmN0aW9uIGFiKGEpe3ZhciBiPVtdLGM7Zm9yKGMgaW4gYSliLnB1c2goYVtjXSk7cmV0dXJuIGJ9ZnVuY3Rpb24gYmIoYSl7Zm9yKHZhciBiIGluIGEpcmV0dXJuITE7cmV0dXJuIWJ9Oy8qXG5cbiBMYXRpdHVkZS9sb25naXR1ZGUgc3BoZXJpY2FsIGdlb2Rlc3kgZm9ybXVsYWUgdGFrZW4gZnJvbVxuIGh0dHA6Ly93d3cubW92YWJsZS10eXBlLmNvLnVrL3NjcmlwdHMvbGF0bG9uZy5odG1sXG4gTGljZW5zZWQgdW5kZXIgQ0MtQlktMy4wLlxuKi9cbmZ1bmN0aW9uIGNiKGEpe3RoaXMucmFkaXVzPWF9Y2IucHJvdG90eXBlLmY9ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPXRoaXMucmFkaXVzLGM9MCxkPWEubGVuZ3RoLGU9YVtkLTFdWzBdLGY9YVtkLTFdWzFdLGc9MDtnPGQ7ZysrKXt2YXIgaD1hW2ddWzBdLGs9YVtnXVsxXTtjKz15YShoLWUpKigyK01hdGguc2luKHlhKGYpKStNYXRoLnNpbih5YShrKSkpO2U9aDtmPWt9cmV0dXJuIGMqYipiLzJ9O2NiLnByb3RvdHlwZS5iPWZ1bmN0aW9uKGEsYil7dmFyIGM9eWEoYVsxXSksZD15YShiWzFdKSxlPShkLWMpLzI7YT15YShiWzBdLWFbMF0pLzI7Yz1NYXRoLnNpbihlKSpNYXRoLnNpbihlKStNYXRoLnNpbihhKSpNYXRoLnNpbihhKSpNYXRoLmNvcyhjKSpNYXRoLmNvcyhkKTtyZXR1cm4gMip0aGlzLnJhZGl1cypNYXRoLmF0YW4yKE1hdGguc3FydChjKSxNYXRoLnNxcnQoMS1jKSl9O1xuY2IucHJvdG90eXBlLm9mZnNldD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9eWEoYVsxXSk7Yi89dGhpcy5yYWRpdXM7dmFyIGU9TWF0aC5hc2luKE1hdGguc2luKGQpKk1hdGguY29zKGIpK01hdGguY29zKGQpKk1hdGguc2luKGIpKk1hdGguY29zKGMpKTtyZXR1cm5bMTgwKih5YShhWzBdKStNYXRoLmF0YW4yKE1hdGguc2luKGMpKk1hdGguc2luKGIpKk1hdGguY29zKGQpLE1hdGguY29zKGIpLU1hdGguc2luKGQpKk1hdGguc2luKGUpKSkvTWF0aC5QSSwxODAqZS9NYXRoLlBJXX07dmFyIGRiPXt9O2RiLmRlZ3JlZXM9MTI3NDE5OTQqTWF0aC5QSS8zNjA7ZGIuZnQ9LjMwNDg7ZGIubT0xO2RiW1widXMtZnRcIl09MTIwMC8zOTM3O2Z1bmN0aW9uIGViKGEpe3RoaXMuSGE9YS5jb2RlO3RoaXMuZj1hLnVuaXRzO3RoaXMuQj12b2lkIDAhPT1hLmV4dGVudD9hLmV4dGVudDpudWxsO3RoaXMuYj12b2lkIDAhPT1hLmF4aXNPcmllbnRhdGlvbj9hLmF4aXNPcmllbnRhdGlvbjpcImVudVwiO3RoaXMuaT12b2lkIDAhPT1hLmdsb2JhbD9hLmdsb2JhbDohMTt0aGlzLmE9ISghdGhpcy5pfHwhdGhpcy5CKTt0aGlzLmw9YS5nZXRQb2ludFJlc29sdXRpb247dGhpcy5jPW51bGw7dGhpcy5nPWEubWV0ZXJzUGVyVW5pdDt2YXIgYj1hLmNvZGUsYz13aW5kb3cucHJvajQ7XCJmdW5jdGlvblwiPT10eXBlb2YgYyYmKGI9Yy5kZWZzKGIpLHZvaWQgMCE9PWImJih2b2lkIDAhPT1iLmF4aXMmJnZvaWQgMD09PWEuYXhpc09yaWVudGF0aW9uJiYodGhpcy5iPWIuYXhpcyksdm9pZCAwPT09YS5tZXRlcnNQZXJVbml0JiYodGhpcy5nPWIudG9fbWV0ZXIpLHZvaWQgMD09PWEudW5pdHMmJih0aGlzLmY9Yi51bml0cykpKX1cbmViLnByb3RvdHlwZS5LPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQn07ZWIucHJvdG90eXBlLmo9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nfHxkYlt0aGlzLmZdfTtmdW5jdGlvbiBmYihhKXtlYi5jYWxsKHRoaXMse2NvZGU6YSx1bml0czpcIm1cIixleHRlbnQ6Z2IsZ2xvYmFsOiEwLHdvcmxkRXh0ZW50OmhiLGdldFBvaW50UmVzb2x1dGlvbjpmdW5jdGlvbihhLGMpe3JldHVybiBhL3ZhKGNbMV0vNjM3ODEzNyl9fSl9dChmYixlYik7dmFyIGliPTYzNzgxMzcqTWF0aC5QSSxnYj1bLWliLC1pYixpYixpYl0saGI9Wy0xODAsLTg1LDE4MCw4NV0samI9W25ldyBmYihcIkVQU0c6Mzg1N1wiKSxuZXcgZmIoXCJFUFNHOjEwMjEwMFwiKSxuZXcgZmIoXCJFUFNHOjEwMjExM1wiKSxuZXcgZmIoXCJFUFNHOjkwMDkxM1wiKSxuZXcgZmIoXCJ1cm46b2djOmRlZjpjcnM6RVBTRzo2LjE4OjM6Mzg1N1wiKSxuZXcgZmIoXCJ1cm46b2djOmRlZjpjcnM6RVBTRzo6Mzg1N1wiKSxuZXcgZmIoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbC9zcnMvZXBzZy54bWwjMzg1N1wiKV07XG5mdW5jdGlvbiBrYihhLGIsYyl7dmFyIGQ9YS5sZW5ndGg7Yz0xPGM/YzoyO3ZvaWQgMD09PWImJigyPGM/Yj1hLnNsaWNlKCk6Yj1BcnJheShkKSk7Zm9yKHZhciBlPTA7ZTxkO2UrPWMpe2JbZV09aWIqYVtlXS8xODA7dmFyIGY9NjM3ODEzNypNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJKihhW2UrMV0rOTApLzM2MCkpO2Y+aWI/Zj1pYjpmPC1pYiYmKGY9LWliKTtiW2UrMV09Zn1yZXR1cm4gYn1mdW5jdGlvbiBsYihhLGIsYyl7dmFyIGQ9YS5sZW5ndGg7Yz0xPGM/YzoyO3ZvaWQgMD09PWImJigyPGM/Yj1hLnNsaWNlKCk6Yj1BcnJheShkKSk7Zm9yKHZhciBlPTA7ZTxkO2UrPWMpYltlXT0xODAqYVtlXS9pYixiW2UrMV09MzYwKk1hdGguYXRhbihNYXRoLmV4cChhW2UrMV0vNjM3ODEzNykpL01hdGguUEktOTA7cmV0dXJuIGJ9O2Z1bmN0aW9uIG1iKGEsYil7ZWIuY2FsbCh0aGlzLHtjb2RlOmEsdW5pdHM6XCJkZWdyZWVzXCIsZXh0ZW50Om5iLGF4aXNPcmllbnRhdGlvbjpiLGdsb2JhbDohMCxtZXRlcnNQZXJVbml0Om9iLHdvcmxkRXh0ZW50Om5ifSl9dChtYixlYik7dmFyIG5iPVstMTgwLC05MCwxODAsOTBdLG9iPTYzNzgxMzcqTWF0aC5QSS8xODAscGI9W25ldyBtYihcIkNSUzo4NFwiKSxuZXcgbWIoXCJFUFNHOjQzMjZcIixcIm5ldVwiKSxuZXcgbWIoXCJ1cm46b2djOmRlZjpjcnM6RVBTRzo6NDMyNlwiLFwibmV1XCIpLG5ldyBtYihcInVybjpvZ2M6ZGVmOmNyczpFUFNHOjYuNjo0MzI2XCIsXCJuZXVcIiksbmV3IG1iKFwidXJuOm9nYzpkZWY6Y3JzOk9HQzoxLjM6Q1JTODRcIiksbmV3IG1iKFwidXJuOm9nYzpkZWY6Y3JzOk9HQzoyOjg0XCIpLG5ldyBtYihcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sL3Nycy9lcHNnLnhtbCM0MzI2XCIsXCJuZXVcIiksbmV3IG1iKFwidXJuOngtb2djOmRlZjpjcnM6RVBTRzo0MzI2XCIsXCJuZXVcIildO3ZhciBxYj17fTt2YXIgcmI9e307ZnVuY3Rpb24gc2IoYSxiLGMpe2E9YS5IYTtiPWIuSGE7YSBpbiByYnx8KHJiW2FdPXt9KTtyYlthXVtiXT1jfWZ1bmN0aW9uIHRiKGEsYil7dmFyIGM7YSBpbiByYiYmYiBpbiByYlthXSYmKGM9cmJbYV1bYl0pO3JldHVybiBjfTt2YXIgdWI9bmV3IGNiKDYzNzEwMDguOCk7ZnVuY3Rpb24gdmIoYSl7YS5mb3JFYWNoKHhiKTthLmZvckVhY2goZnVuY3Rpb24oYil7YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2IhPT1hJiZzYihiLGEseWIpfSl9KX1mdW5jdGlvbiB4YihhKXtxYlthLkhhXT1hO3NiKGEsYSx5Yil9ZnVuY3Rpb24gemIoYSl7cmV0dXJuIGE/XCJzdHJpbmdcIj09PXR5cGVvZiBhP0FiKGEpOmE6QWIoXCJFUFNHOjM4NTdcIil9ZnVuY3Rpb24gQmIoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXt2YXIgZT1iLmxlbmd0aDtkPXZvaWQgMCE9PWQ/ZDoyO2M9dm9pZCAwIT09Yz9jOkFycmF5KGUpO3ZhciBmO2ZvcihmPTA7ZjxlO2YrPWQpe3ZhciBnPWEoW2JbZl0sYltmKzFdXSk7Y1tmXT1nWzBdO2NbZisxXT1nWzFdO2ZvcihnPWQtMTsyPD1nOy0tZyljW2YrZ109YltmK2ddfXJldHVybiBjfX1cbmZ1bmN0aW9uIEFiKGEpe3ZhciBiPW51bGw7aWYoYSBpbnN0YW5jZW9mIGViKWI9YTtlbHNlIGlmKFwic3RyaW5nXCI9PT10eXBlb2YgYSYmKGI9cWJbYV18fG51bGwsIWIpKXt2YXIgYz13aW5kb3cucHJvajQ7XCJmdW5jdGlvblwiPT10eXBlb2YgYyYmdm9pZCAwIT09Yy5kZWZzKGEpJiYoYj1uZXcgZWIoe2NvZGU6YX0pLHhiKGIpKX1yZXR1cm4gYn1mdW5jdGlvbiBDYihhLGIpe2lmKGE9PT1iKXJldHVybiEwO3ZhciBjPWEuZj09PWIuZjtyZXR1cm4gYS5IYT09PWIuSGE/YzpEYihhLGIpPT09eWImJmN9ZnVuY3Rpb24gRWIoYSxiKXthPUFiKGEpO2I9QWIoYik7cmV0dXJuIERiKGEsYil9XG5mdW5jdGlvbiBEYihhLGIpe3ZhciBjPWEuSGEsZD1iLkhhLGU9dGIoYyxkKTtpZighZSl7dmFyIGY9d2luZG93LnByb2o0O2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGYpe3ZhciBnPWYuZGVmcyhjKSxoPWYuZGVmcyhkKTt2b2lkIDAhPT1nJiZ2b2lkIDAhPT1oJiYoZz09PWg/dmIoW2IsYV0pOihmPWYoZCxjKSxlPWYuZm9yd2FyZCxmPWYuaW52ZXJzZSxiPUFiKGIpLGE9QWIoYSksc2IoYixhLEJiKGUpKSxzYihhLGIsQmIoZikpKSxlPXRiKGMsZCkpfX1lfHwoZT1GYik7cmV0dXJuIGV9ZnVuY3Rpb24gRmIoYSxiKXtpZih2b2lkIDAhPT1iJiZhIT09Yil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWJbY109YVtjXTthPWJ9cmV0dXJuIGF9ZnVuY3Rpb24geWIoYSxiKXtpZih2b2lkIDAhPT1iKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2M8ZDsrK2MpYltjXT1hW2NdO2E9Yn1lbHNlIGE9YS5zbGljZSgpO3JldHVybiBhfVxuZnVuY3Rpb24gR2IoYSxiLGMpe2I9RWIoYixjKTthPVthWzBdLGFbMV0sYVswXSxhWzNdLGFbMl0sYVsxXSxhWzJdLGFbM11dO2IoYSxhLDIpO2M9W2FbMF0sYVsyXSxhWzRdLGFbNl1dO3ZhciBkPVthWzFdLGFbM10sYVs1XSxhWzddXTthPU1hdGgubWluLmFwcGx5KG51bGwsYyk7Yj1NYXRoLm1pbi5hcHBseShudWxsLGQpO2M9TWF0aC5tYXguYXBwbHkobnVsbCxjKTtkPU1hdGgubWF4LmFwcGx5KG51bGwsZCk7cmV0dXJuIE5hKGEsYixjLGQsdm9pZCAwKX12YihqYik7dmIocGIpO3BiLmZvckVhY2goZnVuY3Rpb24oYSl7amIuZm9yRWFjaChmdW5jdGlvbihiKXtzYihhLGIsa2IpO3NiKGIsYSxsYil9KX0pO2Z1bmN0aW9uIEhiKGEpe3RoaXMubWluWm9vbT12b2lkIDAhPT1hLm1pblpvb20/YS5taW5ab29tOjA7dGhpcy5iPWEucmVzb2x1dGlvbnM7dyhtYSh0aGlzLmIsZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi1hfSksMTcpO3RoaXMubWF4Wm9vbT10aGlzLmIubGVuZ3RoLTE7dGhpcy5mPXZvaWQgMCE9PWEub3JpZ2luP2Eub3JpZ2luOm51bGw7dGhpcy5qPW51bGw7dm9pZCAwIT09YS5vcmlnaW5zJiYodGhpcy5qPWEub3JpZ2lucyx3KHRoaXMuai5sZW5ndGg9PXRoaXMuYi5sZW5ndGgsMjApKTt2YXIgYj1hLmV4dGVudDt2b2lkIDA9PT1ifHx0aGlzLmZ8fHRoaXMuanx8KHRoaXMuZj1XYShiKSk7dyghdGhpcy5mJiZ0aGlzLmp8fHRoaXMuZiYmIXRoaXMuaiwxOCk7dGhpcy5jPW51bGw7dm9pZCAwIT09YS50aWxlU2l6ZXMmJih0aGlzLmM9YS50aWxlU2l6ZXMsdyh0aGlzLmMubGVuZ3RoPT10aGlzLmIubGVuZ3RoLDE5KSk7dGhpcy5pPXZvaWQgMCE9PWEudGlsZVNpemU/YS50aWxlU2l6ZTpcbnRoaXMuYz9udWxsOjI1Njt3KCF0aGlzLmkmJnRoaXMuY3x8dGhpcy5pJiYhdGhpcy5jLDIyKTt0aGlzLmw9dm9pZCAwIT09Yj9iOm51bGw7dGhpcy5hPW51bGw7dGhpcy5nPVswLDBdO3ZvaWQgMCE9PWEuc2l6ZXM/dGhpcy5hPWEuc2l6ZXMubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBuZXcgcmEoTWF0aC5taW4oMCxhWzBdKSxNYXRoLm1heChhWzBdLTEsLTEpLE1hdGgubWluKDAsYVsxXSksTWF0aC5tYXgoYVsxXS0xLC0xKSl9LHRoaXMpOmImJkliKHRoaXMsYil9dmFyIEpiPVswLDAsMF07SGIucHJvdG90eXBlLks9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sfTtmdW5jdGlvbiBLYihhLGIsYyxkKXtMYihhLGJbMF0sYlsxXSxjLCExLEpiKTt2YXIgZT1KYlsxXSxmPUpiWzJdO0xiKGEsYlsyXSxiWzNdLGMsITAsSmIpO2E9SmJbMV07Yj1KYlsyXTt2b2lkIDAhPT1kPyhkLk89ZSxkLlI9YSxkLlM9ZixkLlU9Yik6ZD1uZXcgcmEoZSxhLGYsYik7cmV0dXJuIGR9XG5mdW5jdGlvbiBNYihhLGIsYyxkKXtyZXR1cm4gS2IoYSxiLGEuYltjXSxkKX1mdW5jdGlvbiBOYihhLGIpe3ZhciBjPWEuZj9hLmY6YS5qW2JbMF1dLGQ9YS5iW2JbMF1dO2E9RWEoT2IoYSxiWzBdKSxhLmcpO3JldHVybltjWzBdKyhiWzFdKy41KSphWzBdKmQsY1sxXSsoYlsyXSsuNSkqYVsxXSpkXX1mdW5jdGlvbiBQYihhLGIsYyl7dmFyIGQ9YS5mP2EuZjphLmpbYlswXV0sZT1hLmJbYlswXV07YT1FYShPYihhLGJbMF0pLGEuZyk7dmFyIGY9ZFswXStiWzFdKmFbMF0qZTtiPWRbMV0rYlsyXSphWzFdKmU7cmV0dXJuIE5hKGYsYixmK2FbMF0qZSxiK2FbMV0qZSxjKX1cbmZ1bmN0aW9uIExiKGEsYixjLGQsZSxmKXt2YXIgZz1RYihhLGQpLGg9ZC9hLmJbZ10saz1hLmY/YS5mOmEualtnXTthPUVhKE9iKGEsZyksYS5nKTtiPWgqTWF0aC5mbG9vcigoYi1rWzBdKS9kKyhlPy41OjApKS9hWzBdO2M9aCpNYXRoLmZsb29yKChjLWtbMV0pL2QrKGU/MDouNSkpL2FbMV07ZT8oYj1NYXRoLmNlaWwoYiktMSxjPU1hdGguY2VpbChjKS0xKTooYj1NYXRoLmZsb29yKGIpLGM9TWF0aC5mbG9vcihjKSk7ZT1iO3ZvaWQgMCE9PWY/KGZbMF09ZyxmWzFdPWUsZlsyXT1jKTpmPVtnLGUsY107cmV0dXJuIGZ9ZnVuY3Rpb24gT2IoYSxiKXtyZXR1cm4gYS5pP2EuaTphLmNbYl19ZnVuY3Rpb24gUWIoYSxiLGMpe3JldHVybiB1YShoYShhLmIsYixjfHwwKSxhLm1pblpvb20sYS5tYXhab29tKX1mdW5jdGlvbiBJYihhLGIpe2Zvcih2YXIgYz1hLmIubGVuZ3RoLGQ9QXJyYXkoYyksZT1hLm1pblpvb207ZTxjOysrZSlkW2VdPU1iKGEsYixlKTthLmE9ZH07ZnVuY3Rpb24gUmIoYSl7dmFyIGI9e307WmEoYixhP2E6e30pO3ZvaWQgMD09PWIuZXh0ZW50JiYoYi5leHRlbnQ9QWIoXCJFUFNHOjM4NTdcIikuSygpKTtiLnJlc29sdXRpb25zPVNiKGIuZXh0ZW50LGIubWF4Wm9vbSxiLnRpbGVTaXplKTtkZWxldGUgYi5tYXhab29tO3JldHVybiBuZXcgSGIoYil9ZnVuY3Rpb24gU2IoYSxiLGMpe2I9dm9pZCAwIT09Yj9iOjQyO3ZhciBkPWFbM10tYVsxXTthPVhhKGEpO2M9RWEodm9pZCAwIT09Yz9jOjI1Nik7Yz1NYXRoLm1heChhL2NbMF0sZC9jWzFdKTtiKz0xO2Q9QXJyYXkoYik7Zm9yKGE9MDthPGI7KythKWRbYV09Yy9NYXRoLnBvdygyLGEpO3JldHVybiBkfWZ1bmN0aW9uIFRiKGEpe2E9QWIoYSk7dmFyIGI9YS5LKCk7Ynx8KGE9MTgwKmRiLmRlZ3JlZXMvYS5qKCksYj1OYSgtYSwtYSxhLGEpKTtyZXR1cm4gYn07ZnVuY3Rpb24gVWIoYSl7dGhpcy5mPWEuaHRtbDt0aGlzLmI9YS50aWxlUmFuZ2VzP2EudGlsZVJhbmdlczpudWxsfTtmdW5jdGlvbiBWYihhKXtyZXR1cm4gZnVuY3Rpb24oYil7aWYoYilyZXR1cm5bdWEoYlswXSxhWzBdLGFbMl0pLHVhKGJbMV0sYVsxXSxhWzNdKV19fWZ1bmN0aW9uIFdiKGEpe3JldHVybiBhfTtmdW5jdGlvbiBZYihhKXtmdW5jdGlvbiBiKGIpe3ZhciBjPWEubGlzdGVuZXIsZT1hLlJkfHxhLnRhcmdldDthLlVkJiZaYihhKTtyZXR1cm4gYy5jYWxsKGUsYil9cmV0dXJuIGEuU2Q9Yn1mdW5jdGlvbiAkYihhLGIsYyxkKXtmb3IodmFyIGUsZj0wLGc9YS5sZW5ndGg7ZjxnOysrZilpZihlPWFbZl0sZS5saXN0ZW5lcj09PWImJmUuUmQ9PT1jKXJldHVybiBkJiYoZS5kZWxldGVJbmRleD1mKSxlfWZ1bmN0aW9uIGFjKGEsYil7cmV0dXJuKGE9YS5LYSk/YVtiXTp2b2lkIDB9ZnVuY3Rpb24gYmMoYSl7dmFyIGI9YS5LYTtifHwoYj1hLkthPXt9KTtyZXR1cm4gYn1mdW5jdGlvbiBjYyhhLGIpe3ZhciBjPWFjKGEsYik7aWYoYyl7Zm9yKHZhciBkPTAsZT1jLmxlbmd0aDtkPGU7KytkKWEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGNbZF0uU2QpLCRhKGNbZF0pO2MubGVuZ3RoPTA7aWYoYz1hLkthKWRlbGV0ZSBjW2JdLE9iamVjdC5rZXlzKGMpLmxlbmd0aHx8ZGVsZXRlIGEuS2F9fVxuZnVuY3Rpb24geShhLGIsYyxkLGUpe3ZhciBmPWJjKGEpLGc9ZltiXTtnfHwoZz1mW2JdPVtdKTsoZj0kYihnLGMsZCwhMSkpP2V8fChmLlVkPSExKTooZj17UmQ6ZCxVZDohIWUsbGlzdGVuZXI6Yyx0YXJnZXQ6YSx0eXBlOmJ9LGEuYWRkRXZlbnRMaXN0ZW5lcihiLFliKGYpKSxnLnB1c2goZikpO3JldHVybiBmfWZ1bmN0aW9uIGRjKGEsYixjLGQpeyhhPWFjKGEsYikpJiYoYz0kYihhLGMsZCwhMCkpJiZaYihjKX1mdW5jdGlvbiBaYihhKXtpZihhJiZhLnRhcmdldCl7YS50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLnR5cGUsYS5TZCk7dmFyIGI9YWMoYS50YXJnZXQsYS50eXBlKTtpZihiKXt2YXIgYz1cImRlbGV0ZUluZGV4XCJpbiBhP2EuZGVsZXRlSW5kZXg6Yi5pbmRleE9mKGEpOy0xIT09YyYmYi5zcGxpY2UoYywxKTtiLmxlbmd0aHx8Y2MoYS50YXJnZXQsYS50eXBlKX0kYShhKX19O2Z1bmN0aW9uIGdjKCl7fWdjLnByb3RvdHlwZS52Yj0hMTtmdW5jdGlvbiBoYyhhKXthLnZifHwoYS52Yj0hMCxhLmxhKCkpfWdjLnByb3RvdHlwZS5sYT1uYTtmdW5jdGlvbiBpYyhhKXt0aGlzLnR5cGU9YTt0aGlzLnRhcmdldD1udWxsfWljLnByb3RvdHlwZS5wcmV2ZW50RGVmYXVsdD1pYy5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uPWZ1bmN0aW9uKCl7dGhpcy5saT0hMH07ZnVuY3Rpb24gamMoYSl7YS5zdG9wUHJvcGFnYXRpb24oKX07ZnVuY3Rpb24ga2MoKXt0aGlzLnphPXt9O3RoaXMud2E9e307dGhpcy5lYT17fX10KGtjLGdjKTtrYy5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuZWFbYV07Y3x8KGM9dGhpcy5lYVthXT1bXSk7LTE9PT1jLmluZGV4T2YoYikmJmMucHVzaChiKX07XG5rYy5wcm90b3R5cGUuZj1mdW5jdGlvbihhKXt2YXIgYj1cInN0cmluZ1wiPT09dHlwZW9mIGE/bmV3IGljKGEpOmE7YT1iLnR5cGU7Yi50YXJnZXQ9dGhpczt2YXIgYz10aGlzLmVhW2FdO2lmKGMpe2EgaW4gdGhpcy53YXx8KHRoaXMud2FbYV09MCx0aGlzLnphW2FdPTApOysrdGhpcy53YVthXTtmb3IodmFyIGQ9MCxlPWMubGVuZ3RoO2Q8ZTsrK2QpaWYoITE9PT1jW2RdLmNhbGwodGhpcyxiKXx8Yi5saSl7dmFyIGY9ITE7YnJlYWt9LS10aGlzLndhW2FdO2lmKCF0aGlzLndhW2FdKXtiPXRoaXMuemFbYV07Zm9yKGRlbGV0ZSB0aGlzLnphW2FdO2ItLTspdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGEsbmEpO2RlbGV0ZSB0aGlzLndhW2FdfXJldHVybiBmfX07a2MucHJvdG90eXBlLmxhPWZ1bmN0aW9uKCl7dmFyIGE9YmModGhpcyksYjtmb3IoYiBpbiBhKWNjKHRoaXMsYil9O1xuZnVuY3Rpb24gbGMoYSxiKXtyZXR1cm4gYj9iIGluIGEuZWE6MDxPYmplY3Qua2V5cyhhLmVhKS5sZW5ndGh9a2MucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmVhW2FdO2MmJihiPWMuaW5kZXhPZihiKSxhIGluIHRoaXMuemE/KGNbYl09bmEsKyt0aGlzLnphW2FdKTooYy5zcGxpY2UoYiwxKSxjLmxlbmd0aHx8ZGVsZXRlIHRoaXMuZWFbYV0pKX07ZnVuY3Rpb24gbWMoKXtrYy5jYWxsKHRoaXMpO3RoaXMuaj0wfXQobWMsa2MpO21jLnByb3RvdHlwZS5iPWZ1bmN0aW9uKCl7Kyt0aGlzLmo7dGhpcy5mKFwiY2hhbmdlXCIpfTttYy5wcm90b3R5cGUuQj1mdW5jdGlvbihhLGIsYyl7aWYoQXJyYXkuaXNBcnJheShhKSl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9QXJyYXkoZCksZj0wO2Y8ZDsrK2YpZVtmXT15KHRoaXMsYVtmXSxiLGMpO3JldHVybiBlfXJldHVybiB5KHRoaXMsYSxiLGMpfTttYy5wcm90b3R5cGUub25jZT1mdW5jdGlvbihhLGIsYyl7aWYoQXJyYXkuaXNBcnJheShhKSl7Zm9yKHZhciBkPWEubGVuZ3RoLGU9QXJyYXkoZCksZj0wO2Y8ZDsrK2YpZVtmXT15KHRoaXMsYVtmXSxiLGMsITApO3JldHVybiBlfXJldHVybiB5KHRoaXMsYSxiLGMsITApfTtcbm1jLnByb3RvdHlwZS5mYT1mdW5jdGlvbihhLGIsYyl7aWYoQXJyYXkuaXNBcnJheShhKSlmb3IodmFyIGQ9MCxlPWEubGVuZ3RoO2Q8ZTsrK2QpZGModGhpcyxhW2RdLGIsYyk7ZWxzZSBkYyh0aGlzLGEsYixjKX07ZnVuY3Rpb24gbmMoYSl7bWMuY2FsbCh0aGlzKTt2KHRoaXMpO3RoaXMuTD17fTt2b2lkIDAhPT1hJiZ0aGlzLnFhKGEpfXQobmMsbWMpO3ZhciBvYz17fTtmdW5jdGlvbiBwYyhhKXtyZXR1cm4gb2MuaGFzT3duUHJvcGVydHkoYSk/b2NbYV06b2NbYV09XCJjaGFuZ2U6XCIrYX1sPW5jLnByb3RvdHlwZTtsLmdldD1mdW5jdGlvbihhKXt2YXIgYjt0aGlzLkwuaGFzT3duUHJvcGVydHkoYSkmJihiPXRoaXMuTFthXSk7cmV0dXJuIGJ9O2wuQ2E9ZnVuY3Rpb24oKXtyZXR1cm4gWmEoe30sdGhpcy5MKX07ZnVuY3Rpb24gcWMoYSxiLGMpe3ZhciBkPXBjKGIpO2EuZihuZXcgcmMoZCxiLGMpKTthLmYobmV3IHJjKFwicHJvcGVydHljaGFuZ2VcIixiLGMpKX1sLnNldD1mdW5jdGlvbihhLGIsYyl7Yz90aGlzLkxbYV09YjooYz10aGlzLkxbYV0sdGhpcy5MW2FdPWIsYyE9PWImJnFjKHRoaXMsYSxjKSl9O2wucWE9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gYSl0aGlzLnNldChjLGFbY10sYil9O1xubC5RaT1mdW5jdGlvbihhLGIpe2lmKGEgaW4gdGhpcy5MKXt2YXIgYz10aGlzLkxbYV07ZGVsZXRlIHRoaXMuTFthXTtifHxxYyh0aGlzLGEsYyl9fTtmdW5jdGlvbiByYyhhLGIsYyl7aWMuY2FsbCh0aGlzLGEpO3RoaXMua2V5PWI7dGhpcy5vbGRWYWx1ZT1jfXQocmMsaWMpO2Z1bmN0aW9uIHNjKGEsYil7bmMuY2FsbCh0aGlzKTt0aGlzLmM9ISEoYnx8e30pLnVuaXF1ZTt0aGlzLmE9YT9hOltdO2lmKHRoaXMuYylmb3IoYT0wLGI9dGhpcy5hLmxlbmd0aDthPGI7KythKXRjKHRoaXMsdGhpcy5hW2FdLGEpO3VjKHRoaXMpfXQoc2MsbmMpO2w9c2MucHJvdG90eXBlO2wuY2xlYXI9ZnVuY3Rpb24oKXtmb3IoOzA8dGhpcy5XYSgpOyl0aGlzLnBvcCgpfTtmdW5jdGlvbiB2YyhhLGIpe3ZhciBjO3ZhciBkPTA7Zm9yKGM9Yi5sZW5ndGg7ZDxjOysrZClhLnB1c2goYltkXSl9bC5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7YT1iP2EuYmluZChiKTphO2I9dGhpcy5hO2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7YzxkOysrYylhKGJbY10sYyxiKX07bC5mZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2wua2U9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYVthXX07bC5XYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldCh3Yyl9O1xubC5wb3A9ZnVuY3Rpb24oKXtyZXR1cm4geGModGhpcyx0aGlzLldhKCktMSl9O2wucHVzaD1mdW5jdGlvbihhKXt0aGlzLmMmJnRjKHRoaXMsYSk7dmFyIGI9dGhpcy5XYSgpO3RoaXMuYyYmdGModGhpcyxhKTt0aGlzLmEuc3BsaWNlKGIsMCxhKTt1Yyh0aGlzKTt0aGlzLmYobmV3IHljKFwiYWRkXCIsYSkpO3JldHVybiB0aGlzLldhKCl9O2wucmVtb3ZlPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYSxjO3ZhciBkPTA7Zm9yKGM9Yi5sZW5ndGg7ZDxjOysrZClpZihiW2RdPT09YSlyZXR1cm4geGModGhpcyxkKX07ZnVuY3Rpb24geGMoYSxiKXt2YXIgYz1hLmFbYl07YS5hLnNwbGljZShiLDEpO3VjKGEpO2EuZihuZXcgeWMoXCJyZW1vdmVcIixjKSk7cmV0dXJuIGN9ZnVuY3Rpb24gdWMoYSl7YS5zZXQod2MsYS5hLmxlbmd0aCl9XG5mdW5jdGlvbiB0YyhhLGIsYyl7Zm9yKHZhciBkPTAsZT1hLmEubGVuZ3RoO2Q8ZTsrK2QpaWYoYS5hW2RdPT09YiYmZCE9PWMpdGhyb3cgbmV3IHBhKDU4KTt9dmFyIHdjPVwibGVuZ3RoXCI7ZnVuY3Rpb24geWMoYSxiKXtpYy5jYWxsKHRoaXMsYSk7dGhpcy5lbGVtZW50PWJ9dCh5YyxpYyk7dmFyIEJjPS9eIyg/OlswLTlhLWZdezN9KXsxLDJ9JC9pLENjPS9eKFthLXpdKikkL2k7ZnVuY3Rpb24gRGMoYSl7aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBhKXt2YXIgYj1hWzBdO2IhPShifDApJiYoYj1iKy41fDApO3ZhciBjPWFbMV07YyE9KGN8MCkmJihjPWMrLjV8MCk7dmFyIGQ9YVsyXTtkIT0oZHwwKSYmKGQ9ZCsuNXwwKTthPVwicmdiYShcIitiK1wiLFwiK2MrXCIsXCIrZCtcIixcIisodm9pZCAwPT09YVszXT8xOmFbM10pK1wiKVwifXJldHVybiBhfVxudmFyIEZjPWZ1bmN0aW9uKCl7dmFyIGE9e30sYj0wO3JldHVybiBmdW5jdGlvbihjKXtpZihhLmhhc093blByb3BlcnR5KGMpKXZhciBkPWFbY107ZWxzZXtpZigxMDI0PD1iKXtkPTA7Zm9yKHZhciBlIGluIGEpZCsrJjN8fChkZWxldGUgYVtlXSwtLWIpfWQ9YztDYy5leGVjKGQpJiYoZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLGUuc3R5bGUuY29sb3I9ZCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGUpLGQ9Z2V0Q29tcHV0ZWRTdHlsZShlKS5jb2xvcixkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGUpKTtpZihCYy5leGVjKGQpKXt2YXIgZj1kLmxlbmd0aC0xO3coMz09Znx8Nj09Ziw1NCk7dmFyIGc9Mz09Zj8xOjI7Zj1wYXJzZUludChkLnN1YnN0cigxKzAqZyxnKSwxNik7ZT1wYXJzZUludChkLnN1YnN0cigxKzEqZyxnKSwxNik7ZD1wYXJzZUludChkLnN1YnN0cigxKzIqZyxnKSwxNik7MT09ZyYmKGY9KGY8PDQpK2YsZT0oZTw8NCkrZSxkPShkPDw0KStkKTtcbmY9W2YsZSxkLDFdfWVsc2UgZC5pbmRleE9mKFwicmdiYShcIik/ZC5pbmRleE9mKFwicmdiKFwiKT93KCExLDE0KTooZD1kLnNsaWNlKDQsLTEpLnNwbGl0KFwiLFwiKS5tYXAoTnVtYmVyKSxkLnB1c2goMSksZj1FYyhkKSk6KGQ9ZC5zbGljZSg1LC0xKS5zcGxpdChcIixcIikubWFwKE51bWJlciksZj1FYyhkKSk7ZD1mO2FbY109ZDsrK2J9cmV0dXJuIGR9fSgpO2Z1bmN0aW9uIEVjKGEpe3ZhciBiPVtdO2JbMF09dWEoYVswXSsuNXwwLDAsMjU1KTtiWzFdPXVhKGFbMV0rLjV8MCwwLDI1NSk7YlsyXT11YShhWzJdKy41fDAsMCwyNTUpO2JbM109dWEoYVszXSwwLDEpO3JldHVybiBifTtmdW5jdGlvbiBHYyhhKXtyZXR1cm5cInN0cmluZ1wiPT09dHlwZW9mIGF8fGEgaW5zdGFuY2VvZiBDYW52YXNQYXR0ZXJufHxhIGluc3RhbmNlb2YgQ2FudmFzR3JhZGllbnQ/YTpEYyhhKX07ZnVuY3Rpb24gSGMoYSxiKXt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQ0FOVkFTXCIpO2EmJihjLndpZHRoPWEpO2ImJihjLmhlaWdodD1iKTtyZXR1cm4gYy5nZXRDb250ZXh0KFwiMmRcIil9ZnVuY3Rpb24gSWMoYSl7YSYmYS5wYXJlbnROb2RlJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9O2Z1bmN0aW9uIEpjKGEpe25jLmNhbGwodGhpcyk7dGhpcy5lbGVtZW50PWEuZWxlbWVudD9hLmVsZW1lbnQ6bnVsbDt0aGlzLmw9dGhpcy5KPW51bGw7dGhpcy5EPVtdO3RoaXMucmVuZGVyPWEucmVuZGVyP2EucmVuZGVyOm5hO2EudGFyZ2V0JiYoYT1hLnRhcmdldCx0aGlzLko9XCJzdHJpbmdcIj09PXR5cGVvZiBhP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpOmEpfXQoSmMsbmMpO0pjLnByb3RvdHlwZS5sYT1mdW5jdGlvbigpe0ljKHRoaXMuZWxlbWVudCk7bmMucHJvdG90eXBlLmxhLmNhbGwodGhpcyl9O1xuSmMucHJvdG90eXBlLnNldE1hcD1mdW5jdGlvbihhKXt0aGlzLmwmJkljKHRoaXMuZWxlbWVudCk7Zm9yKHZhciBiPTAsYz10aGlzLkQubGVuZ3RoO2I8YzsrK2IpWmIodGhpcy5EW2JdKTt0aGlzLkQubGVuZ3RoPTA7aWYodGhpcy5sPWEpKHRoaXMuSj90aGlzLko6YS5DKS5hcHBlbmRDaGlsZCh0aGlzLmVsZW1lbnQpLHRoaXMucmVuZGVyIT09bmEmJnRoaXMuRC5wdXNoKHkoYSxcInBvc3RyZW5kZXJcIix0aGlzLnJlbmRlcix0aGlzKSksYS5yZW5kZXIoKX07ZnVuY3Rpb24gS2MoYSl7YT1hP2E6e307dGhpcy5IPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJVTFwiKTt0aGlzLnY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkxJXCIpO3RoaXMuSC5hcHBlbmRDaGlsZCh0aGlzLnYpO3RoaXMudi5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3RoaXMuYz12b2lkIDAhPT1hLmNvbGxhcHNlZD9hLmNvbGxhcHNlZDohMDt0aGlzLmc9dm9pZCAwIT09YS5jb2xsYXBzaWJsZT9hLmNvbGxhcHNpYmxlOiEwO3RoaXMuZ3x8KHRoaXMuYz0hMSk7dmFyIGI9dm9pZCAwIT09YS5jbGFzc05hbWU/YS5jbGFzc05hbWU6XCJvbC1hdHRyaWJ1dGlvblwiLGM9dm9pZCAwIT09YS50aXBMYWJlbD9hLnRpcExhYmVsOlwiQXR0cmlidXRpb25zXCIsZD12b2lkIDAhPT1hLmNvbGxhcHNlTGFiZWw/YS5jb2xsYXBzZUxhYmVsOlwiXFx1MDBiYlwiO1wic3RyaW5nXCI9PT10eXBlb2YgZD8odGhpcy5zPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMucy50ZXh0Q29udGVudD1kKTp0aGlzLnM9XG5kO2Q9dm9pZCAwIT09YS5sYWJlbD9hLmxhYmVsOlwiaVwiO1wic3RyaW5nXCI9PT10eXBlb2YgZD8odGhpcy51PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMudS50ZXh0Q29udGVudD1kKTp0aGlzLnU9ZDt2YXIgZT10aGlzLmcmJiF0aGlzLmM/dGhpcy5zOnRoaXMudTtkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7ZC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJidXR0b25cIik7ZC50aXRsZT1jO2QuYXBwZW5kQ2hpbGQoZSk7eShkLFwiY2xpY2tcIix0aGlzLlYsdGhpcyk7Yz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2MuY2xhc3NOYW1lPWIrXCIgb2wtdW5zZWxlY3RhYmxlIG9sLWNvbnRyb2xcIisodGhpcy5jJiZ0aGlzLmc/XCIgb2wtY29sbGFwc2VkXCI6XCJcIikrKHRoaXMuZz9cIlwiOlwiIG9sLXVuY29sbGFwc2libGVcIik7Yy5hcHBlbmRDaGlsZCh0aGlzLkgpO2MuYXBwZW5kQ2hpbGQoZCk7SmMuY2FsbCh0aGlzLHtlbGVtZW50OmMscmVuZGVyOmEucmVuZGVyP1xuYS5yZW5kZXI6TGMsdGFyZ2V0OmEudGFyZ2V0fSk7dGhpcy5DPSEwO3RoaXMuaT17fTt0aGlzLmE9e307dGhpcy5YPXt9fXQoS2MsSmMpO1xuZnVuY3Rpb24gTGMoYSl7aWYoYT1hLmZyYW1lU3RhdGUpe3ZhciBiLGMsZCxlLGYsZz1hLmxheWVyU3RhdGVzQXJyYXksaD1aYSh7fSxhLmF0dHJpYnV0aW9ucyksaz17fSxtPXt9LG49YS52aWV3U3RhdGUucHJvamVjdGlvbjt2YXIgcD0wO2ZvcihiPWcubGVuZ3RoO3A8YjtwKyspaWYoZT1nW3BdLmxheWVyLmNhKCkpe3ZhciByPXYoZSkudG9TdHJpbmcoKTtpZihmPWUuQyl7dmFyIHU9MDtmb3IoYz1mLmxlbmd0aDt1PGM7dSsrKXt2YXIgRD1mW3VdO3ZhciBGPXYoRCkudG9TdHJpbmcoKTtpZighKEYgaW4gaCkpe2lmKGQ9YS51c2VkVGlsZXNbcl0pe3ZhciBDPWUuTGEobik7YTp7dmFyIEE9dm9pZCAwO3ZhciBILEs9RCxjYT1DLFI9bjtpZihLLmIpe2ZvcihBIGluIGQpaWYoQSBpbiBLLmIpe0M9ZFtBXTt2YXIgWj0wO2ZvcihIPUsuYltBXS5sZW5ndGg7WjxIOysrWil7dmFyIFU9Sy5iW0FdW1pdO2lmKHRhKFUsQykpe0E9ITA7YnJlYWsgYX12YXIgRz1NYihjYSxUYihSKSxwYXJzZUludChBLFxuMTApKSx4PUcuUi1HLk8rMTtpZihDLk88Ry5PfHxDLlI+Ry5SKWlmKHRhKFUsbmV3IHJhKHphKEMuTyx4KSx6YShDLlIseCksQy5TLEMuVSkpfHxDLlItQy5PKzE+eCYmdGEoVSxHKSl7QT0hMDticmVhayBhfX19QT0hMX1lbHNlIEE9ITB9fWVsc2UgQT0hMTtBPyhGIGluIGsmJmRlbGV0ZSBrW0ZdLEE9RC5mLEEgaW4gbXx8KG1bQV09ITAsaFtGXT1EKSk6a1tGXT1EfX19fWI9W2gsa107cD1iWzBdO2I9YlsxXTtmb3IodmFyIEkgaW4gdGhpcy5pKUkgaW4gcD8odGhpcy5hW0ldfHwodGhpcy5pW0ldLnN0eWxlLmRpc3BsYXk9XCJcIix0aGlzLmFbSV09ITApLGRlbGV0ZSBwW0ldKTpJIGluIGI/KHRoaXMuYVtJXSYmKHRoaXMuaVtJXS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGRlbGV0ZSB0aGlzLmFbSV0pLGRlbGV0ZSBiW0ldKTooSWModGhpcy5pW0ldKSxkZWxldGUgdGhpcy5pW0ldLGRlbGV0ZSB0aGlzLmFbSV0pO2ZvcihJIGluIHApdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiTElcIiksXG51LmlubmVySFRNTD1wW0ldLmYsdGhpcy5ILmFwcGVuZENoaWxkKHUpLHRoaXMuaVtJXT11LHRoaXMuYVtJXT0hMDtmb3IoSSBpbiBiKXU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkxJXCIpLHUuaW5uZXJIVE1MPWJbSV0uZix1LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5ILmFwcGVuZENoaWxkKHUpLHRoaXMuaVtJXT11O0k9IWJiKHRoaXMuYSl8fCFiYihhLmxvZ29zKTt0aGlzLkMhPUkmJih0aGlzLmVsZW1lbnQuc3R5bGUuZGlzcGxheT1JP1wiXCI6XCJub25lXCIsdGhpcy5DPUkpO0kmJmJiKHRoaXMuYSk/dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvbC1sb2dvLW9ubHlcIik6dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJvbC1sb2dvLW9ubHlcIik7YT1hLmxvZ29zO0k9dGhpcy5YO2ZvcihDYSBpbiBJKUNhIGluIGF8fChJYyhJW0NhXSksZGVsZXRlIElbQ2FdKTtmb3IodmFyIHdhIGluIGEpaWYoYj1hW3dhXSxiIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJih0aGlzLnYuYXBwZW5kQ2hpbGQoYiksXG5JW3dhXT1iKSwhKHdhIGluIEkpKXt2YXIgQ2E9bmV3IEltYWdlO0NhLnNyYz13YTtcIlwiPT09Yj9wPUNhOihwPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpLHAuaHJlZj1iLHAuYXBwZW5kQ2hpbGQoQ2EpKTt0aGlzLnYuYXBwZW5kQ2hpbGQocCk7SVt3YV09cH10aGlzLnYuc3R5bGUuZGlzcGxheT1iYihhKT9cIm5vbmVcIjpcIlwifWVsc2UgdGhpcy5DJiYodGhpcy5lbGVtZW50LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdGhpcy5DPSExKX1LYy5wcm90b3R5cGUuVj1mdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7TWModGhpcyl9O2Z1bmN0aW9uIE1jKGEpe2EuZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwib2wtY29sbGFwc2VkXCIpO2lmKGEuYyl7dmFyIGI9YS51LGM9Yi5wYXJlbnROb2RlO2MmJmMucmVwbGFjZUNoaWxkKGEucyxiKX1lbHNlIGI9YS5zLChjPWIucGFyZW50Tm9kZSkmJmMucmVwbGFjZUNoaWxkKGEudSxiKTthLmM9IWEuY31cbktjLnByb3RvdHlwZS5nYT1mdW5jdGlvbihhKXt0aGlzLmchPT1hJiYodGhpcy5nPWEsdGhpcy5lbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJvbC11bmNvbGxhcHNpYmxlXCIpLCFhJiZ0aGlzLmMmJk1jKHRoaXMpKX07S2MucHJvdG90eXBlLiQ9ZnVuY3Rpb24oYSl7dGhpcy5nJiZ0aGlzLmMhPT1hJiZNYyh0aGlzKX07ZnVuY3Rpb24gTmMoYSl7cmV0dXJuIDEtTWF0aC5wb3coMS1hLDMpfWZ1bmN0aW9uIE9jKGEpe3JldHVybiAzKmEqYS0yKmEqYSphfWZ1bmN0aW9uIFBjKGEpe3JldHVybiBhfTtmdW5jdGlvbiBRYyhhKXthPWE/YTp7fTt2YXIgYj12b2lkIDAhPT1hLmNsYXNzTmFtZT9hLmNsYXNzTmFtZTpcIm9sLXJvdGF0ZVwiLGM9dm9pZCAwIT09YS5sYWJlbD9hLmxhYmVsOlwiXFx1MjFlN1wiO3RoaXMuYT1udWxsO1wic3RyaW5nXCI9PT10eXBlb2YgYz8odGhpcy5hPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuYS5jbGFzc05hbWU9XCJvbC1jb21wYXNzXCIsdGhpcy5hLnRleHRDb250ZW50PWMpOih0aGlzLmE9Yyx0aGlzLmEuY2xhc3NMaXN0LmFkZChcIm9sLWNvbXBhc3NcIikpO3ZhciBkPWEudGlwTGFiZWw/YS50aXBMYWJlbDpcIlJlc2V0IHJvdGF0aW9uXCI7Yz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO2MuY2xhc3NOYW1lPWIrXCItcmVzZXRcIjtjLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImJ1dHRvblwiKTtjLnRpdGxlPWQ7Yy5hcHBlbmRDaGlsZCh0aGlzLmEpO3koYyxcImNsaWNrXCIsUWMucHJvdG90eXBlLnYsdGhpcyk7ZD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuZC5jbGFzc05hbWU9YitcIiBvbC11bnNlbGVjdGFibGUgb2wtY29udHJvbFwiO2QuYXBwZW5kQ2hpbGQoYyk7Yj1hLnJlbmRlcj9hLnJlbmRlcjpSYzt0aGlzLmk9YS5yZXNldE5vcnRoP2EucmVzZXROb3J0aDp2b2lkIDA7SmMuY2FsbCh0aGlzLHtlbGVtZW50OmQscmVuZGVyOmIsdGFyZ2V0OmEudGFyZ2V0fSk7dGhpcy5nPXZvaWQgMCE9PWEuZHVyYXRpb24/YS5kdXJhdGlvbjoyNTA7dGhpcy5jPXZvaWQgMCE9PWEuYXV0b0hpZGU/YS5hdXRvSGlkZTohMDt0aGlzLnM9dm9pZCAwO3RoaXMuYyYmdGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvbC1oaWRkZW5cIil9dChRYyxKYyk7XG5RYy5wcm90b3R5cGUudj1mdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7dGhpcy5pP3RoaXMuaSgpOihhPXRoaXMubC5aKCkpJiZ2b2lkIDAhPT1TYyhhKSYmKDA8dGhpcy5nP2EuYW5pbWF0ZSh7cm90YXRpb246MCxkdXJhdGlvbjp0aGlzLmcsZWFzaW5nOk5jfSk6KGEuc2V0KFwicm90YXRpb25cIiwwKSwwPFRjKGEpWzBdJiZVYyhhKSkpfTtcbmZ1bmN0aW9uIFJjKGEpe2lmKGE9YS5mcmFtZVN0YXRlKXthPWEudmlld1N0YXRlLnJvdGF0aW9uO2lmKGEhPXRoaXMucyl7dmFyIGI9XCJyb3RhdGUoXCIrYStcInJhZClcIjtpZih0aGlzLmMpe3ZhciBjPXRoaXMuZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoXCJvbC1oaWRkZW5cIik7Y3x8YT9jJiZhJiZ0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm9sLWhpZGRlblwiKTp0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm9sLWhpZGRlblwiKX10aGlzLmEuc3R5bGUubXNUcmFuc2Zvcm09Yjt0aGlzLmEuc3R5bGUud2Via2l0VHJhbnNmb3JtPWI7dGhpcy5hLnN0eWxlLnRyYW5zZm9ybT1ifXRoaXMucz1hfX07ZnVuY3Rpb24gVmMoYSl7YT1hP2E6e307dmFyIGI9dm9pZCAwIT09YS5jbGFzc05hbWU/YS5jbGFzc05hbWU6XCJvbC16b29tXCIsYz12b2lkIDAhPT1hLmRlbHRhP2EuZGVsdGE6MSxkPXZvaWQgMCE9PWEuem9vbUluTGFiZWw/YS56b29tSW5MYWJlbDpcIitcIixlPXZvaWQgMCE9PWEuem9vbU91dExhYmVsP2Euem9vbU91dExhYmVsOlwiXFx1MjIxMlwiLGY9dm9pZCAwIT09YS56b29tSW5UaXBMYWJlbD9hLnpvb21JblRpcExhYmVsOlwiWm9vbSBpblwiLGc9dm9pZCAwIT09YS56b29tT3V0VGlwTGFiZWw/YS56b29tT3V0VGlwTGFiZWw6XCJab29tIG91dFwiLGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtoLmNsYXNzTmFtZT1iK1wiLWluXCI7aC5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsXCJidXR0b25cIik7aC50aXRsZT1mO2guYXBwZW5kQ2hpbGQoXCJzdHJpbmdcIj09PXR5cGVvZiBkP2RvY3VtZW50LmNyZWF0ZVRleHROb2RlKGQpOmQpO3koaCxcImNsaWNrXCIsVmMucHJvdG90eXBlLmMuYmluZCh0aGlzLFxuYykpO2Q9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtkLmNsYXNzTmFtZT1iK1wiLW91dFwiO2Quc2V0QXR0cmlidXRlKFwidHlwZVwiLFwiYnV0dG9uXCIpO2QudGl0bGU9ZztkLmFwcGVuZENoaWxkKFwic3RyaW5nXCI9PT10eXBlb2YgZT9kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTplKTt5KGQsXCJjbGlja1wiLFZjLnByb3RvdHlwZS5jLmJpbmQodGhpcywtYykpO2M9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtjLmNsYXNzTmFtZT1iK1wiIG9sLXVuc2VsZWN0YWJsZSBvbC1jb250cm9sXCI7Yy5hcHBlbmRDaGlsZChoKTtjLmFwcGVuZENoaWxkKGQpO0pjLmNhbGwodGhpcyx7ZWxlbWVudDpjLHRhcmdldDphLnRhcmdldH0pO3RoaXMuYT12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246MjUwfXQoVmMsSmMpO1xuVmMucHJvdG90eXBlLmM9ZnVuY3Rpb24oYSxiKXtiLnByZXZlbnREZWZhdWx0KCk7aWYoYj10aGlzLmwuWigpKXt2YXIgYz1iLnVhKCk7YyYmKGE9Yi5jb25zdHJhaW5SZXNvbHV0aW9uKGMsYSksMDx0aGlzLmE/KDA8VGMoYilbMF0mJlVjKGIpLGIuYW5pbWF0ZSh7cmVzb2x1dGlvbjphLGR1cmF0aW9uOnRoaXMuYSxlYXNpbmc6TmN9KSk6V2MoYixhKSl9fTtmdW5jdGlvbiBYYyhhKXthPWE/YTp7fTt2YXIgYj1uZXcgc2M7KHZvaWQgMCE9PWEuem9vbT9hLnpvb206MSkmJmIucHVzaChuZXcgVmMoYS56b29tT3B0aW9ucykpOyh2b2lkIDAhPT1hLnJvdGF0ZT9hLnJvdGF0ZToxKSYmYi5wdXNoKG5ldyBRYyhhLnJvdGF0ZU9wdGlvbnMpKTsodm9pZCAwIT09YS5hdHRyaWJ1dGlvbj9hLmF0dHJpYnV0aW9uOjEpJiZiLnB1c2gobmV3IEtjKGEuYXR0cmlidXRpb25PcHRpb25zKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIFljKGEpe2E9YT9hOnt9O3ZhciBiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7Yi5jbGFzc05hbWU9dm9pZCAwIT09YS5jbGFzc05hbWU/YS5jbGFzc05hbWU6XCJvbC1tb3VzZS1wb3NpdGlvblwiO0pjLmNhbGwodGhpcyx7ZWxlbWVudDpiLHJlbmRlcjphLnJlbmRlcj9hLnJlbmRlcjpaYyx0YXJnZXQ6YS50YXJnZXR9KTt5KHRoaXMscGMoJGMpLHRoaXMudWgsdGhpcyk7YS5jb29yZGluYXRlRm9ybWF0JiZ0aGlzLlplKGEuY29vcmRpbmF0ZUZvcm1hdCk7YS5wcm9qZWN0aW9uJiZ0aGlzLnNldCgkYyxBYihhLnByb2plY3Rpb24pKTt0aGlzLnM9dm9pZCAwIT09YS51bmRlZmluZWRIVE1MP2EudW5kZWZpbmVkSFRNTDpcIlwiO3RoaXMuZz1iLmlubmVySFRNTDt0aGlzLmk9dGhpcy5jPXRoaXMuYT1udWxsfXQoWWMsSmMpO1xuZnVuY3Rpb24gWmMoYSl7YT1hLmZyYW1lU3RhdGU7YT90aGlzLmEhPWEudmlld1N0YXRlLnByb2plY3Rpb24mJih0aGlzLmE9YS52aWV3U3RhdGUucHJvamVjdGlvbix0aGlzLmM9bnVsbCk6dGhpcy5hPW51bGw7YWQodGhpcyx0aGlzLmkpfWw9WWMucHJvdG90eXBlO2wudWg9ZnVuY3Rpb24oKXt0aGlzLmM9bnVsbH07bC56Zz1mdW5jdGlvbihhKXt0aGlzLmk9YmQodGhpcy5sLGEpO2FkKHRoaXMsdGhpcy5pKX07bC5BZz1mdW5jdGlvbigpe2FkKHRoaXMsbnVsbCk7dGhpcy5pPW51bGx9O2wuc2V0TWFwPWZ1bmN0aW9uKGEpe0pjLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLGEpO2EmJihhPWEuYSx0aGlzLkQucHVzaCh5KGEsXCJtb3VzZW1vdmVcIix0aGlzLnpnLHRoaXMpLHkoYSxcIm1vdXNlb3V0XCIsdGhpcy5BZyx0aGlzKSkpfTtsLlplPWZ1bmN0aW9uKGEpe3RoaXMuc2V0KGNkLGEpfTtcbmZ1bmN0aW9uIGFkKGEsYil7dmFyIGM9YS5zO2lmKGImJmEuYSl7aWYoIWEuYyl7dmFyIGQ9YS5nZXQoJGMpO2EuYz1kP0RiKGEuYSxkKTpGYn1pZihiPWEubC5CYShiKSlhLmMoYixiKSxjPShjPWEuZ2V0KGNkKSk/YyhiKTpiLnRvU3RyaW5nKCl9YS5nJiZjPT1hLmd8fChhLmVsZW1lbnQuaW5uZXJIVE1MPWMsYS5nPWMpfXZhciAkYz1cInByb2plY3Rpb25cIixjZD1cImNvb3JkaW5hdGVGb3JtYXRcIjtmdW5jdGlvbiBkZChhLGIsYyl7aWMuY2FsbCh0aGlzLGEpO3RoaXMubWFwPWI7dGhpcy5mcmFtZVN0YXRlPXZvaWQgMCE9PWM/YzpudWxsfXQoZGQsaWMpO2Z1bmN0aW9uIGVkKGEsYixjLGQsZSl7ZGQuY2FsbCh0aGlzLGEsYixlKTt0aGlzLm9yaWdpbmFsRXZlbnQ9Yzt0aGlzLnBpeGVsPWJkKGIsYyk7dGhpcy5jb29yZGluYXRlPWIuQmEodGhpcy5waXhlbCk7dGhpcy5kcmFnZ2luZz12b2lkIDAhPT1kP2Q6ITF9dChlZCxkZCk7ZWQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7ZGQucHJvdG90eXBlLnByZXZlbnREZWZhdWx0LmNhbGwodGhpcyk7dGhpcy5vcmlnaW5hbEV2ZW50LnByZXZlbnREZWZhdWx0KCl9O2VkLnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXtkZC5wcm90b3R5cGUuc3RvcFByb3BhZ2F0aW9uLmNhbGwodGhpcyk7dGhpcy5vcmlnaW5hbEV2ZW50LnN0b3BQcm9wYWdhdGlvbigpfTt2YXIgZmQ9XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBuYXZpZ2F0b3I/bmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpOlwiXCIsZ2Q9LTEhPT1mZC5pbmRleE9mKFwiZmlyZWZveFwiKSxoZD0tMSE9PWZkLmluZGV4T2YoXCJzYWZhcmlcIikmJi0xPT1mZC5pbmRleE9mKFwiY2hyb21cIiksaWQ9LTEhPT1mZC5pbmRleE9mKFwid2Via2l0XCIpJiYtMT09ZmQuaW5kZXhPZihcImVkZ2VcIiksamQ9LTEhPT1mZC5pbmRleE9mKFwibWFjaW50b3NoXCIpLGtkPXdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxLGxkPSExLG1kPWZ1bmN0aW9uKCl7aWYoIShcIkhUTUxDYW52YXNFbGVtZW50XCJpbiB3aW5kb3cpKXJldHVybiExO3RyeXt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQ0FOVkFTXCIpLmdldENvbnRleHQoXCIyZFwiKTtyZXR1cm4gYT8odm9pZCAwIT09YS5zZXRMaW5lRGFzaCYmKGxkPSEwKSwhMCk6ITF9Y2F0Y2goYil7cmV0dXJuITF9fSgpLG5kPVwiZ2VvbG9jYXRpb25cImluIG5hdmlnYXRvcixvZD1cblwib250b3VjaHN0YXJ0XCJpbiB3aW5kb3cscGQ9XCJQb2ludGVyRXZlbnRcImluIHdpbmRvdyxxZD0hIW5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkO3ZhciByZD17Zmo6XCJzaW5nbGVjbGlja1wiLFZpOlwiY2xpY2tcIixXaTpcImRibGNsaWNrXCIsWmk6XCJwb2ludGVyZHJhZ1wiLGJqOlwicG9pbnRlcm1vdmVcIixZaTpcInBvaW50ZXJkb3duXCIsZWo6XCJwb2ludGVydXBcIixkajpcInBvaW50ZXJvdmVyXCIsY2o6XCJwb2ludGVyb3V0XCIsJGk6XCJwb2ludGVyZW50ZXJcIixhajpcInBvaW50ZXJsZWF2ZVwiLFhpOlwicG9pbnRlcmNhbmNlbFwifTtmdW5jdGlvbiBzZChhLGIsYyxkLGUpe2VkLmNhbGwodGhpcyxhLGIsYy5iLGQsZSk7dGhpcy5iPWN9dChzZCxlZCk7ZnVuY3Rpb24gdGQoYSxiKXt0aGlzLmI9YTt0aGlzLmM9Yn07ZnVuY3Rpb24gdmQoYSl7dGQuY2FsbCh0aGlzLGEse21vdXNlZG93bjp0aGlzLlVnLG1vdXNlbW92ZTp0aGlzLlZnLG1vdXNldXA6dGhpcy5ZZyxtb3VzZW92ZXI6dGhpcy5YZyxtb3VzZW91dDp0aGlzLldnfSk7dGhpcy5mPWEuajt0aGlzLmo9W119dCh2ZCx0ZCk7ZnVuY3Rpb24gd2QoYSxiKXthPWEuajt2YXIgYz1iLmNsaWVudFg7Yj1iLmNsaWVudFk7Zm9yKHZhciBkPTAsZT1hLmxlbmd0aCxmO2Q8ZSYmKGY9YVtkXSk7ZCsrKXt2YXIgZz1NYXRoLmFicyhiLWZbMV0pO2lmKDI1Pj1NYXRoLmFicyhjLWZbMF0pJiYyNT49ZylyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiB4ZChhKXt2YXIgYj15ZChhLGEpLGM9Yi5wcmV2ZW50RGVmYXVsdDtiLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7YS5wcmV2ZW50RGVmYXVsdCgpO2MoKX07Yi5wb2ludGVySWQ9MTtiLmlzUHJpbWFyeT0hMDtiLnBvaW50ZXJUeXBlPVwibW91c2VcIjtyZXR1cm4gYn1sPXZkLnByb3RvdHlwZTtcbmwuVWc9ZnVuY3Rpb24oYSl7aWYoIXdkKHRoaXMsYSkpeygxKS50b1N0cmluZygpaW4gdGhpcy5mJiZ0aGlzLmNhbmNlbChhKTt2YXIgYj14ZChhKTt0aGlzLmZbKDEpLnRvU3RyaW5nKCldPWE7emQodGhpcy5iLFwicG9pbnRlcmRvd25cIixiLGEpfX07bC5WZz1mdW5jdGlvbihhKXtpZighd2QodGhpcyxhKSl7dmFyIGI9eGQoYSk7emQodGhpcy5iLFwicG9pbnRlcm1vdmVcIixiLGEpfX07bC5ZZz1mdW5jdGlvbihhKXtpZighd2QodGhpcyxhKSl7dmFyIGI9dGhpcy5mWygxKS50b1N0cmluZygpXTtiJiZiLmJ1dHRvbj09PWEuYnV0dG9uJiYoYj14ZChhKSx6ZCh0aGlzLmIsXCJwb2ludGVydXBcIixiLGEpLGRlbGV0ZSB0aGlzLmZbKDEpLnRvU3RyaW5nKCldKX19O2wuWGc9ZnVuY3Rpb24oYSl7aWYoIXdkKHRoaXMsYSkpe3ZhciBiPXhkKGEpO0FkKHRoaXMuYixiLGEpfX07bC5XZz1mdW5jdGlvbihhKXtpZighd2QodGhpcyxhKSl7dmFyIGI9eGQoYSk7QmQodGhpcy5iLGIsYSl9fTtcbmwuY2FuY2VsPWZ1bmN0aW9uKGEpe3ZhciBiPXhkKGEpO3RoaXMuYi5jYW5jZWwoYixhKTtkZWxldGUgdGhpcy5mWygxKS50b1N0cmluZygpXX07ZnVuY3Rpb24gQ2QoYSl7dGQuY2FsbCh0aGlzLGEse01TUG9pbnRlckRvd246dGhpcy5kaCxNU1BvaW50ZXJNb3ZlOnRoaXMuZWgsTVNQb2ludGVyVXA6dGhpcy5oaCxNU1BvaW50ZXJPdXQ6dGhpcy5maCxNU1BvaW50ZXJPdmVyOnRoaXMuZ2gsTVNQb2ludGVyQ2FuY2VsOnRoaXMuYmgsTVNHb3RQb2ludGVyQ2FwdHVyZTp0aGlzLiRnLE1TTG9zdFBvaW50ZXJDYXB0dXJlOnRoaXMuYWh9KTt0aGlzLmY9YS5qO3RoaXMuaj1bXCJcIixcInVuYXZhaWxhYmxlXCIsXCJ0b3VjaFwiLFwicGVuXCIsXCJtb3VzZVwiXX10KENkLHRkKTtmdW5jdGlvbiBEZChhLGIpe3ZhciBjPWI7XCJudW1iZXJcIj09PXR5cGVvZiBiLnBvaW50ZXJUeXBlJiYoYz15ZChiLGIpLGMucG9pbnRlclR5cGU9YS5qW2IucG9pbnRlclR5cGVdKTtyZXR1cm4gY31sPUNkLnByb3RvdHlwZTtcbmwuZGg9ZnVuY3Rpb24oYSl7dGhpcy5mW2EucG9pbnRlcklkLnRvU3RyaW5nKCldPWE7dmFyIGI9RGQodGhpcyxhKTt6ZCh0aGlzLmIsXCJwb2ludGVyZG93blwiLGIsYSl9O2wuZWg9ZnVuY3Rpb24oYSl7dmFyIGI9RGQodGhpcyxhKTt6ZCh0aGlzLmIsXCJwb2ludGVybW92ZVwiLGIsYSl9O2wuaGg9ZnVuY3Rpb24oYSl7dmFyIGI9RGQodGhpcyxhKTt6ZCh0aGlzLmIsXCJwb2ludGVydXBcIixiLGEpO2RlbGV0ZSB0aGlzLmZbYS5wb2ludGVySWQudG9TdHJpbmcoKV19O2wuZmg9ZnVuY3Rpb24oYSl7dmFyIGI9RGQodGhpcyxhKTtCZCh0aGlzLmIsYixhKX07bC5naD1mdW5jdGlvbihhKXt2YXIgYj1EZCh0aGlzLGEpO0FkKHRoaXMuYixiLGEpfTtsLmJoPWZ1bmN0aW9uKGEpe3ZhciBiPURkKHRoaXMsYSk7dGhpcy5iLmNhbmNlbChiLGEpO2RlbGV0ZSB0aGlzLmZbYS5wb2ludGVySWQudG9TdHJpbmcoKV19O1xubC5haD1mdW5jdGlvbihhKXt0aGlzLmIuZihuZXcgRWQoXCJsb3N0cG9pbnRlcmNhcHR1cmVcIixhLGEpKX07bC4kZz1mdW5jdGlvbihhKXt0aGlzLmIuZihuZXcgRWQoXCJnb3Rwb2ludGVyY2FwdHVyZVwiLGEsYSkpfTtmdW5jdGlvbiBGZChhKXt0ZC5jYWxsKHRoaXMsYSx7cG9pbnRlcmRvd246dGhpcy5laSxwb2ludGVybW92ZTp0aGlzLmZpLHBvaW50ZXJ1cDp0aGlzLmlpLHBvaW50ZXJvdXQ6dGhpcy5naSxwb2ludGVyb3Zlcjp0aGlzLmhpLHBvaW50ZXJjYW5jZWw6dGhpcy5kaSxnb3Rwb2ludGVyY2FwdHVyZTp0aGlzLnJnLGxvc3Rwb2ludGVyY2FwdHVyZTp0aGlzLlNnfSl9dChGZCx0ZCk7bD1GZC5wcm90b3R5cGU7bC5laT1mdW5jdGlvbihhKXtHZCh0aGlzLmIsYSl9O2wuZmk9ZnVuY3Rpb24oYSl7R2QodGhpcy5iLGEpfTtsLmlpPWZ1bmN0aW9uKGEpe0dkKHRoaXMuYixhKX07bC5naT1mdW5jdGlvbihhKXtHZCh0aGlzLmIsYSl9O2wuaGk9ZnVuY3Rpb24oYSl7R2QodGhpcy5iLGEpfTtsLmRpPWZ1bmN0aW9uKGEpe0dkKHRoaXMuYixhKX07bC5TZz1mdW5jdGlvbihhKXtHZCh0aGlzLmIsYSl9O2wucmc9ZnVuY3Rpb24oYSl7R2QodGhpcy5iLGEpfTtmdW5jdGlvbiBFZChhLGIsYyl7aWMuY2FsbCh0aGlzLGEpO3RoaXMuYj1iO2E9Yz9jOnt9O3RoaXMuYnV0dG9ucz1IZChhKTt0aGlzLnByZXNzdXJlPUlkKGEsdGhpcy5idXR0b25zKTt0aGlzLmJ1YmJsZXM9XCJidWJibGVzXCJpbiBhP2EuYnViYmxlczohMTt0aGlzLmNhbmNlbGFibGU9XCJjYW5jZWxhYmxlXCJpbiBhP2EuY2FuY2VsYWJsZTohMTt0aGlzLnZpZXc9XCJ2aWV3XCJpbiBhP2EudmlldzpudWxsO3RoaXMuZGV0YWlsPVwiZGV0YWlsXCJpbiBhP2EuZGV0YWlsOm51bGw7dGhpcy5zY3JlZW5YPVwic2NyZWVuWFwiaW4gYT9hLnNjcmVlblg6MDt0aGlzLnNjcmVlblk9XCJzY3JlZW5ZXCJpbiBhP2Euc2NyZWVuWTowO3RoaXMuY2xpZW50WD1cImNsaWVudFhcImluIGE/YS5jbGllbnRYOjA7dGhpcy5jbGllbnRZPVwiY2xpZW50WVwiaW4gYT9hLmNsaWVudFk6MDt0aGlzLmN0cmxLZXk9XCJjdHJsS2V5XCJpbiBhP2EuY3RybEtleTohMTt0aGlzLmFsdEtleT1cImFsdEtleVwiaW4gYT9hLmFsdEtleTohMTt0aGlzLnNoaWZ0S2V5PVxuXCJzaGlmdEtleVwiaW4gYT9hLnNoaWZ0S2V5OiExO3RoaXMubWV0YUtleT1cIm1ldGFLZXlcImluIGE/YS5tZXRhS2V5OiExO3RoaXMuYnV0dG9uPVwiYnV0dG9uXCJpbiBhP2EuYnV0dG9uOjA7dGhpcy5yZWxhdGVkVGFyZ2V0PVwicmVsYXRlZFRhcmdldFwiaW4gYT9hLnJlbGF0ZWRUYXJnZXQ6bnVsbDt0aGlzLnBvaW50ZXJJZD1cInBvaW50ZXJJZFwiaW4gYT9hLnBvaW50ZXJJZDowO3RoaXMud2lkdGg9XCJ3aWR0aFwiaW4gYT9hLndpZHRoOjA7dGhpcy5oZWlnaHQ9XCJoZWlnaHRcImluIGE/YS5oZWlnaHQ6MDt0aGlzLnRpbHRYPVwidGlsdFhcImluIGE/YS50aWx0WDowO3RoaXMudGlsdFk9XCJ0aWx0WVwiaW4gYT9hLnRpbHRZOjA7dGhpcy5wb2ludGVyVHlwZT1cInBvaW50ZXJUeXBlXCJpbiBhP2EucG9pbnRlclR5cGU6XCJcIjt0aGlzLmlzUHJpbWFyeT1cImlzUHJpbWFyeVwiaW4gYT9hLmlzUHJpbWFyeTohMTtiLnByZXZlbnREZWZhdWx0JiYodGhpcy5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe2IucHJldmVudERlZmF1bHQoKX0pfVxudChFZCxpYyk7ZnVuY3Rpb24gSGQoYSl7aWYoYS5idXR0b25zfHxKZClhPWEuYnV0dG9ucztlbHNlIHN3aXRjaChhLndoaWNoKXtjYXNlIDE6YT0xO2JyZWFrO2Nhc2UgMjphPTQ7YnJlYWs7Y2FzZSAzOmE9MjticmVhaztkZWZhdWx0OmE9MH1yZXR1cm4gYX1mdW5jdGlvbiBJZChhLGIpe3ZhciBjPTA7YS5wcmVzc3VyZT9jPWEucHJlc3N1cmU6Yz1iPy41OjA7cmV0dXJuIGN9dmFyIEpkPSExO3RyeXtKZD0xPT09KG5ldyBNb3VzZUV2ZW50KFwiY2xpY2tcIix7YnV0dG9uczoxfSkpLmJ1dHRvbnN9Y2F0Y2goYSl7fTtmdW5jdGlvbiBLZChhLGIpe3RkLmNhbGwodGhpcyxhLHt0b3VjaHN0YXJ0OnRoaXMuUGksdG91Y2htb3ZlOnRoaXMuT2ksdG91Y2hlbmQ6dGhpcy5OaSx0b3VjaGNhbmNlbDp0aGlzLk1pfSk7dGhpcy5mPWEuajt0aGlzLmc9Yjt0aGlzLmo9dm9pZCAwO3RoaXMuaT0wO3RoaXMuYT12b2lkIDB9dChLZCx0ZCk7bD1LZC5wcm90b3R5cGU7bC5ZZT1mdW5jdGlvbigpe3RoaXMuaT0wO3RoaXMuYT12b2lkIDB9O1xuZnVuY3Rpb24gTGQoYSxiLGMpe2I9eWQoYixjKTtiLnBvaW50ZXJJZD1jLmlkZW50aWZpZXIrMjtiLmJ1YmJsZXM9ITA7Yi5jYW5jZWxhYmxlPSEwO2IuZGV0YWlsPWEuaTtiLmJ1dHRvbj0wO2IuYnV0dG9ucz0xO2Iud2lkdGg9Yy53ZWJraXRSYWRpdXNYfHxjLnJhZGl1c1h8fDA7Yi5oZWlnaHQ9Yy53ZWJraXRSYWRpdXNZfHxjLnJhZGl1c1l8fDA7Yi5wcmVzc3VyZT1jLndlYmtpdEZvcmNlfHxjLmZvcmNlfHwuNTtiLmlzUHJpbWFyeT1hLmo9PT1jLmlkZW50aWZpZXI7Yi5wb2ludGVyVHlwZT1cInRvdWNoXCI7Yi5jbGllbnRYPWMuY2xpZW50WDtiLmNsaWVudFk9Yy5jbGllbnRZO2Iuc2NyZWVuWD1jLnNjcmVlblg7Yi5zY3JlZW5ZPWMuc2NyZWVuWTtyZXR1cm4gYn1cbmZ1bmN0aW9uIE1kKGEsYixjKXtmdW5jdGlvbiBkKCl7Yi5wcmV2ZW50RGVmYXVsdCgpfXZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGIuY2hhbmdlZFRvdWNoZXMpLGY9ZS5sZW5ndGgsZztmb3IoZz0wO2c8ZjsrK2cpe3ZhciBoPUxkKGEsYixlW2ddKTtoLnByZXZlbnREZWZhdWx0PWQ7Yy5jYWxsKGEsYixoKX19XG5sLlBpPWZ1bmN0aW9uKGEpe3ZhciBiPWEudG91Y2hlcyxjPU9iamVjdC5rZXlzKHRoaXMuZiksZD1jLmxlbmd0aDtpZihkPj1iLmxlbmd0aCl7dmFyIGU9W10sZjtmb3IoZj0wO2Y8ZDsrK2Ype3ZhciBnPWNbZl07dmFyIGg9dGhpcy5mW2ddO3ZhciBrO2lmKCEoaz0xPT1nKSlhOntmb3IodmFyIG09Yi5sZW5ndGgsbj0wO248bTtuKyspaWYoaz1iW25dLGsuaWRlbnRpZmllcj09PWctMil7az0hMDticmVhayBhfWs9ITF9a3x8ZS5wdXNoKGgub3V0KX1mb3IoZj0wO2Y8ZS5sZW5ndGg7KytmKXRoaXMuS2MoYSxlW2ZdKX1iPWEuY2hhbmdlZFRvdWNoZXNbMF07Yz1PYmplY3Qua2V5cyh0aGlzLmYpLmxlbmd0aDtpZighY3x8MT09PWMmJigxKS50b1N0cmluZygpaW4gdGhpcy5mKXRoaXMuaj1iLmlkZW50aWZpZXIsdm9pZCAwIT09dGhpcy5hJiZjbGVhclRpbWVvdXQodGhpcy5hKTtOZCh0aGlzLGEpO3RoaXMuaSsrO01kKHRoaXMsYSx0aGlzLiRoKX07XG5sLiRoPWZ1bmN0aW9uKGEsYil7dGhpcy5mW2IucG9pbnRlcklkXT17dGFyZ2V0OmIudGFyZ2V0LG91dDpiLExlOmIudGFyZ2V0fTt2YXIgYz10aGlzLmI7Yi5idWJibGVzPSEwO3pkKGMsXCJwb2ludGVyb3ZlclwiLGIsYSk7Yz10aGlzLmI7Yi5idWJibGVzPSExO3pkKGMsXCJwb2ludGVyZW50ZXJcIixiLGEpO3pkKHRoaXMuYixcInBvaW50ZXJkb3duXCIsYixhKX07bC5PaT1mdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7TWQodGhpcyxhLHRoaXMuWmcpfTtcbmwuWmc9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmZbYi5wb2ludGVySWRdO2lmKGMpe3ZhciBkPWMub3V0LGU9Yy5MZTt6ZCh0aGlzLmIsXCJwb2ludGVybW92ZVwiLGIsYSk7ZCYmZSE9PWIudGFyZ2V0JiYoZC5yZWxhdGVkVGFyZ2V0PWIudGFyZ2V0LGIucmVsYXRlZFRhcmdldD1lLGQudGFyZ2V0PWUsYi50YXJnZXQ/KEJkKHRoaXMuYixkLGEpLEFkKHRoaXMuYixiLGEpKTooYi50YXJnZXQ9ZSxiLnJlbGF0ZWRUYXJnZXQ9bnVsbCx0aGlzLktjKGEsYikpKTtjLm91dD1iO2MuTGU9Yi50YXJnZXR9fTtsLk5pPWZ1bmN0aW9uKGEpe05kKHRoaXMsYSk7TWQodGhpcyxhLHRoaXMuUmkpfTtcbmwuUmk9ZnVuY3Rpb24oYSxiKXt6ZCh0aGlzLmIsXCJwb2ludGVydXBcIixiLGEpO3RoaXMuYi5vdXQoYixhKTtPZCh0aGlzLmIsYixhKTtkZWxldGUgdGhpcy5mW2IucG9pbnRlcklkXTtiLmlzUHJpbWFyeSYmKHRoaXMuaj12b2lkIDAsdGhpcy5hPXNldFRpbWVvdXQodGhpcy5ZZS5iaW5kKHRoaXMpLDIwMCkpfTtsLk1pPWZ1bmN0aW9uKGEpe01kKHRoaXMsYSx0aGlzLktjKX07bC5LYz1mdW5jdGlvbihhLGIpe3RoaXMuYi5jYW5jZWwoYixhKTt0aGlzLmIub3V0KGIsYSk7T2QodGhpcy5iLGIsYSk7ZGVsZXRlIHRoaXMuZltiLnBvaW50ZXJJZF07Yi5pc1ByaW1hcnkmJih0aGlzLmo9dm9pZCAwLHRoaXMuYT1zZXRUaW1lb3V0KHRoaXMuWWUuYmluZCh0aGlzKSwyMDApKX07XG5mdW5jdGlvbiBOZChhLGIpe3ZhciBjPWEuZy5qO2I9Yi5jaGFuZ2VkVG91Y2hlc1swXTtpZihhLmo9PT1iLmlkZW50aWZpZXIpe3ZhciBkPVtiLmNsaWVudFgsYi5jbGllbnRZXTtjLnB1c2goZCk7c2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPWMuaW5kZXhPZihkKTstMTxhJiZjLnNwbGljZShhLDEpfSwyNTAwKX19O2Z1bmN0aW9uIFBkKGEpe2tjLmNhbGwodGhpcyk7dGhpcy5pPWE7dGhpcy5qPXt9O3RoaXMuYz17fTt0aGlzLmI9W107cGQ/UWQodGhpcyxuZXcgRmQodGhpcykpOnFkP1FkKHRoaXMsbmV3IENkKHRoaXMpKTooYT1uZXcgdmQodGhpcyksUWQodGhpcyxhKSxvZCYmUWQodGhpcyxuZXcgS2QodGhpcyxhKSkpO2E9dGhpcy5iLmxlbmd0aDtmb3IodmFyIGIsYz0wO2M8YTtjKyspYj10aGlzLmJbY10sUmQodGhpcyxPYmplY3Qua2V5cyhiLmMpKX10KFBkLGtjKTtmdW5jdGlvbiBRZChhLGIpe3ZhciBjPU9iamVjdC5rZXlzKGIuYyk7YyYmKGMuZm9yRWFjaChmdW5jdGlvbihhKXt2YXIgYz1iLmNbYV07YyYmKHRoaXMuY1thXT1jLmJpbmQoYikpfSxhKSxhLmIucHVzaChiKSl9UGQucHJvdG90eXBlLmE9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5jW2EudHlwZV07YiYmYihhKX07XG5mdW5jdGlvbiBSZChhLGIpe2IuZm9yRWFjaChmdW5jdGlvbihhKXt5KHRoaXMuaSxhLHRoaXMuYSx0aGlzKX0sYSl9ZnVuY3Rpb24gU2QoYSxiKXtiLmZvckVhY2goZnVuY3Rpb24oYSl7ZGModGhpcy5pLGEsdGhpcy5hLHRoaXMpfSxhKX1mdW5jdGlvbiB5ZChhLGIpe2Zvcih2YXIgYz17fSxkLGU9MCxmPVRkLmxlbmd0aDtlPGY7ZSsrKWQ9VGRbZV1bMF0sY1tkXT1hW2RdfHxiW2RdfHxUZFtlXVsxXTtyZXR1cm4gY31mdW5jdGlvbiBPZChhLGIsYyl7Yi5idWJibGVzPSExO3pkKGEsXCJwb2ludGVybGVhdmVcIixiLGMpfVBkLnByb3RvdHlwZS5vdXQ9ZnVuY3Rpb24oYSxiKXthLmJ1YmJsZXM9ITA7emQodGhpcyxcInBvaW50ZXJvdXRcIixhLGIpfTtQZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKGEsYil7emQodGhpcyxcInBvaW50ZXJjYW5jZWxcIixhLGIpfTtcbmZ1bmN0aW9uIEJkKGEsYixjKXthLm91dChiLGMpO3ZhciBkPWIudGFyZ2V0LGU9Yi5yZWxhdGVkVGFyZ2V0O2QmJmUmJmQuY29udGFpbnMoZSl8fE9kKGEsYixjKX1mdW5jdGlvbiBBZChhLGIsYyl7Yi5idWJibGVzPSEwO3pkKGEsXCJwb2ludGVyb3ZlclwiLGIsYyk7dmFyIGQ9Yi50YXJnZXQsZT1iLnJlbGF0ZWRUYXJnZXQ7ZCYmZSYmZC5jb250YWlucyhlKXx8KGIuYnViYmxlcz0hMSx6ZChhLFwicG9pbnRlcmVudGVyXCIsYixjKSl9ZnVuY3Rpb24gemQoYSxiLGMsZCl7YS5mKG5ldyBFZChiLGQsYykpfWZ1bmN0aW9uIEdkKGEsYil7YS5mKG5ldyBFZChiLnR5cGUsYixiKSl9UGQucHJvdG90eXBlLmxhPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuYi5sZW5ndGgsYixjPTA7YzxhO2MrKyliPXRoaXMuYltjXSxTZCh0aGlzLE9iamVjdC5rZXlzKGIuYykpO2tjLnByb3RvdHlwZS5sYS5jYWxsKHRoaXMpfTtcbnZhciBUZD1bW1wiYnViYmxlc1wiLCExXSxbXCJjYW5jZWxhYmxlXCIsITFdLFtcInZpZXdcIixudWxsXSxbXCJkZXRhaWxcIixudWxsXSxbXCJzY3JlZW5YXCIsMF0sW1wic2NyZWVuWVwiLDBdLFtcImNsaWVudFhcIiwwXSxbXCJjbGllbnRZXCIsMF0sW1wiY3RybEtleVwiLCExXSxbXCJhbHRLZXlcIiwhMV0sW1wic2hpZnRLZXlcIiwhMV0sW1wibWV0YUtleVwiLCExXSxbXCJidXR0b25cIiwwXSxbXCJyZWxhdGVkVGFyZ2V0XCIsbnVsbF0sW1wiYnV0dG9uc1wiLDBdLFtcInBvaW50ZXJJZFwiLDBdLFtcIndpZHRoXCIsMF0sW1wiaGVpZ2h0XCIsMF0sW1wicHJlc3N1cmVcIiwwXSxbXCJ0aWx0WFwiLDBdLFtcInRpbHRZXCIsMF0sW1wicG9pbnRlclR5cGVcIixcIlwiXSxbXCJod1RpbWVzdGFtcFwiLDBdLFtcImlzUHJpbWFyeVwiLCExXSxbXCJ0eXBlXCIsXCJcIl0sW1widGFyZ2V0XCIsbnVsbF0sW1wiY3VycmVudFRhcmdldFwiLG51bGxdLFtcIndoaWNoXCIsMF1dO2Z1bmN0aW9uIFVkKGEsYil7a2MuY2FsbCh0aGlzKTt0aGlzLmo9YTt0aGlzLmc9MDt0aGlzLkI9ITE7dGhpcy5jPVtdO3RoaXMudj1iP2Iqa2Q6a2Q7dGhpcy5hPW51bGw7YT10aGlzLmouYTt0aGlzLkQ9MDt0aGlzLkw9e307dGhpcy5pPW5ldyBQZChhKTt0aGlzLmI9bnVsbDt0aGlzLmw9eSh0aGlzLmksXCJwb2ludGVyZG93blwiLHRoaXMuQ2csdGhpcyk7dGhpcy5zPXkodGhpcy5pLFwicG9pbnRlcm1vdmVcIix0aGlzLkJpLHRoaXMpfXQoVWQsa2MpO2Z1bmN0aW9uIFZkKGEsYil7dmFyIGM9bmV3IHNkKFwiY2xpY2tcIixhLmosYik7YS5mKGMpO2EuZz8oY2xlYXJUaW1lb3V0KGEuZyksYS5nPTAsYz1uZXcgc2QoXCJkYmxjbGlja1wiLGEuaixiKSxhLmYoYykpOmEuZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5nPTA7dmFyIGE9bmV3IHNkKFwic2luZ2xlY2xpY2tcIix0aGlzLmosYik7dGhpcy5mKGEpfS5iaW5kKGEpLDI1MCl9XG5mdW5jdGlvbiBXZChhLGIpe1wicG9pbnRlcnVwXCI9PWIudHlwZXx8XCJwb2ludGVyY2FuY2VsXCI9PWIudHlwZT9kZWxldGUgYS5MW2IucG9pbnRlcklkXTpcInBvaW50ZXJkb3duXCI9PWIudHlwZSYmKGEuTFtiLnBvaW50ZXJJZF09ITApO2EuRD1PYmplY3Qua2V5cyhhLkwpLmxlbmd0aH1sPVVkLnByb3RvdHlwZTtsLmdlPWZ1bmN0aW9uKGEpe1dkKHRoaXMsYSk7dmFyIGI9bmV3IHNkKFwicG9pbnRlcnVwXCIsdGhpcy5qLGEpO3RoaXMuZihiKTt0aGlzLkJ8fGEuYnV0dG9ufHxWZCh0aGlzLHRoaXMuYSk7dGhpcy5EfHwodGhpcy5jLmZvckVhY2goWmIpLHRoaXMuYy5sZW5ndGg9MCx0aGlzLkI9ITEsdGhpcy5hPW51bGwsaGModGhpcy5iKSx0aGlzLmI9bnVsbCl9O1xubC5DZz1mdW5jdGlvbihhKXtXZCh0aGlzLGEpO3ZhciBiPW5ldyBzZChcInBvaW50ZXJkb3duXCIsdGhpcy5qLGEpO3RoaXMuZihiKTt0aGlzLmE9YTt0aGlzLmMubGVuZ3RofHwodGhpcy5iPW5ldyBQZChkb2N1bWVudCksdGhpcy5jLnB1c2goeSh0aGlzLmIsXCJwb2ludGVybW92ZVwiLHRoaXMucGgsdGhpcykseSh0aGlzLmIsXCJwb2ludGVydXBcIix0aGlzLmdlLHRoaXMpLHkodGhpcy5pLFwicG9pbnRlcmNhbmNlbFwiLHRoaXMuZ2UsdGhpcykpKX07bC5waD1mdW5jdGlvbihhKXtpZihYZCh0aGlzLGEpKXt0aGlzLkI9ITA7dmFyIGI9bmV3IHNkKFwicG9pbnRlcmRyYWdcIix0aGlzLmosYSx0aGlzLkIpO3RoaXMuZihiKX1hLnByZXZlbnREZWZhdWx0KCl9O2wuQmk9ZnVuY3Rpb24oYSl7dGhpcy5mKG5ldyBzZChhLnR5cGUsdGhpcy5qLGEsISghdGhpcy5hfHwhWGQodGhpcyxhKSkpKX07XG5mdW5jdGlvbiBYZChhLGIpe3JldHVybiBNYXRoLmFicyhiLmNsaWVudFgtYS5hLmNsaWVudFgpPmEudnx8TWF0aC5hYnMoYi5jbGllbnRZLWEuYS5jbGllbnRZKT5hLnZ9bC5sYT1mdW5jdGlvbigpe3RoaXMucyYmKFpiKHRoaXMucyksdGhpcy5zPW51bGwpO3RoaXMubCYmKFpiKHRoaXMubCksdGhpcy5sPW51bGwpO3RoaXMuYy5mb3JFYWNoKFpiKTt0aGlzLmMubGVuZ3RoPTA7dGhpcy5iJiYoaGModGhpcy5iKSx0aGlzLmI9bnVsbCk7dGhpcy5pJiYoaGModGhpcy5pKSx0aGlzLmk9bnVsbCk7a2MucHJvdG90eXBlLmxhLmNhbGwodGhpcyl9O2Z1bmN0aW9uIFlkKGEsYil7dGhpcy5sPWE7dGhpcy5hPWI7dGhpcy5iPVtdO3RoaXMuZj1bXTt0aGlzLmo9e319WWQucHJvdG90eXBlLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5iLmxlbmd0aD0wO3RoaXMuZi5sZW5ndGg9MDskYSh0aGlzLmopfTtZZC5wcm90b3R5cGUuZz1mdW5jdGlvbihhKXt3KCEodGhpcy5hKGEpaW4gdGhpcy5qKSwzMSk7dmFyIGI9dGhpcy5sKGEpO3JldHVybiBJbmZpbml0eSE9Yj8odGhpcy5iLnB1c2goYSksdGhpcy5mLnB1c2goYiksdGhpcy5qW3RoaXMuYShhKV09ITAsWmQodGhpcywwLHRoaXMuYi5sZW5ndGgtMSksITApOiExfTtmdW5jdGlvbiAkZChhLGIpe2Zvcih2YXIgYz1hLmIsZD1hLmYsZT1jLmxlbmd0aCxmPWNbYl0sZz1kW2JdLGg9YjtiPGU+PjE7KXt2YXIgaz0yKmIrMSxtPTIqYisyO2s9bTxlJiZkW21dPGRba10/bTprO2NbYl09Y1trXTtkW2JdPWRba107Yj1rfWNbYl09ZjtkW2JdPWc7WmQoYSxoLGIpfVxuZnVuY3Rpb24gWmQoYSxiLGMpe3ZhciBkPWEuYjthPWEuZjtmb3IodmFyIGU9ZFtjXSxmPWFbY107Yz5iOyl7dmFyIGc9Yy0xPj4xO2lmKGFbZ10+ZilkW2NdPWRbZ10sYVtjXT1hW2ddLGM9ZztlbHNlIGJyZWFrfWRbY109ZTthW2NdPWZ9O2Z1bmN0aW9uIGFlKGEsYil7WWQuY2FsbCh0aGlzLGZ1bmN0aW9uKGIpe3JldHVybiBhLmFwcGx5KG51bGwsYil9LGZ1bmN0aW9uKGEpe3JldHVybiBhWzBdLlhhKCl9KTt0aGlzLnM9Yjt0aGlzLmk9MDt0aGlzLmM9e319dChhZSxZZCk7YWUucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSl7dmFyIGI9WWQucHJvdG90eXBlLmcuY2FsbCh0aGlzLGEpO2ImJnkoYVswXSxcImNoYW5nZVwiLHRoaXMuQix0aGlzKTtyZXR1cm4gYn07YWUucHJvdG90eXBlLkI9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDt2YXIgYj1hLnN0YXRlO2lmKDI9PT1ifHwzPT09Ynx8ND09PWJ8fDU9PT1iKWRjKGEsXCJjaGFuZ2VcIix0aGlzLkIsdGhpcyksYT1hLlhhKCksYSBpbiB0aGlzLmMmJihkZWxldGUgdGhpcy5jW2FdLC0tdGhpcy5pKSx0aGlzLnMoKX07ZnVuY3Rpb24gYmUoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyxkKXtpZih2b2lkIDAhPT1iKXJldHVybiBiPWhhKGEsYixkKSxiPXVhKGIrYywwLGEubGVuZ3RoLTEpLGM9TWF0aC5mbG9vcihiKSxiIT1jJiZjPGEubGVuZ3RoLTE/YVtjXS9NYXRoLnBvdyhhW2NdL2FbYysxXSxiLWMpOmFbY119fWZ1bmN0aW9uIGNlKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYpe2lmKHZvaWQgMCE9PWQpcmV0dXJuIGQ9TWF0aC5tYXgoTWF0aC5mbG9vcihNYXRoLmxvZyhiL2QpL01hdGgubG9nKGEpKygtZi8yKy41KSkrZSwwKSx2b2lkIDAhPT1jJiYoZD1NYXRoLm1pbihkLGMpKSxiL01hdGgucG93KGEsZCl9fTtmdW5jdGlvbiBkZShhKXtpZih2b2lkIDAhPT1hKXJldHVybiAwfWZ1bmN0aW9uIGVlKGEsYil7aWYodm9pZCAwIT09YSlyZXR1cm4gYStifWZ1bmN0aW9uIGZlKGEpe3ZhciBiPTIqTWF0aC5QSS9hO3JldHVybiBmdW5jdGlvbihhLGQpe2lmKHZvaWQgMCE9PWEpcmV0dXJuIGE9TWF0aC5mbG9vcigoYStkKS9iKy41KSpifX1mdW5jdGlvbiBnZSgpe3ZhciBhPXlhKDUpO3JldHVybiBmdW5jdGlvbihiLGMpe2lmKHZvaWQgMCE9PWIpcmV0dXJuIE1hdGguYWJzKGIrYyk8PWE/MDpiK2N9fTtmdW5jdGlvbiBoZShhKXthPVwiXCIrYTt2YXIgYj1hLmluZGV4T2YoXCIuXCIpO2I9LTE9PT1iP2EubGVuZ3RoOmI7cmV0dXJuIDI8Yj9hOkFycmF5KDMtYikuam9pbihcIjBcIikrYX07ZnVuY3Rpb24gaWUoYSxiKXthWzBdKz1iWzBdO2FbMV0rPWJbMV19ZnVuY3Rpb24gamUoYSxiKXt2YXIgYz1iLkliKCksZD1iLmJhKCk7Yj1kWzBdO2Q9ZFsxXTt2YXIgZT1hWzBdLWI7YT1hWzFdLWQ7ZXx8YXx8KGU9MSk7dmFyIGY9TWF0aC5zcXJ0KGUqZSthKmEpO3JldHVybltiK2MqZS9mLGQrYyphL2ZdfWZ1bmN0aW9uIGxlKGEsYil7dmFyIGM9YVswXTthPWFbMV07dmFyIGQ9YlswXSxlPWJbMV07Yj1kWzBdO2Q9ZFsxXTt2YXIgZj1lWzBdO2U9ZVsxXTt2YXIgZz1mLWIsaD1lLWQ7Yz1nfHxoPyhnKihjLWIpK2gqKGEtZCkpLyhnKmcraCpofHwwKTowOzA+PWM/KGE9YixjPWQpOjE8PWM/KGE9ZixjPWUpOihhPWIrYypnLGM9ZCtjKmgpO3JldHVyblthLGNdfWZ1bmN0aW9uIG1lKGEsYil7Zm9yKHZhciBjPSEwLGQ9YS5sZW5ndGgtMTswPD1kOy0tZClpZihhW2RdIT1iW2RdKXtjPSExO2JyZWFrfXJldHVybiBjfVxuZnVuY3Rpb24gbmUoYSxiKXt2YXIgYz1NYXRoLmNvcyhiKTtiPU1hdGguc2luKGIpO3ZhciBkPWFbMV0qYythWzBdKmI7YVswXT1hWzBdKmMtYVsxXSpiO2FbMV09ZH1mdW5jdGlvbiBvZShhLGIpe2FbMF0qPWI7YVsxXSo9Yn1mdW5jdGlvbiBwZShhLGIpe3ZhciBjPWFbMF0tYlswXTthPWFbMV0tYlsxXTtyZXR1cm4gYypjK2EqYX1mdW5jdGlvbiBxZShhLGIpe3JldHVybiBNYXRoLnNxcnQocGUoYSxiKSl9ZnVuY3Rpb24gcmUoYSxiKXtyZXR1cm4gcGUoYSxsZShhLGIpKX07ZnVuY3Rpb24gc2UoKXtyZXR1cm4hMH1mdW5jdGlvbiB0ZSgpe3JldHVybiExfTtmdW5jdGlvbiB1ZSgpe25jLmNhbGwodGhpcyk7dGhpcy5zPUhhKCk7dGhpcy5EPS0xO3RoaXMuYz17fTt0aGlzLmw9dGhpcy5pPTB9dCh1ZSxuYyk7dWUucHJvdG90eXBlLks9ZnVuY3Rpb24oYSl7dGhpcy5EIT10aGlzLmomJih0aGlzLnM9dGhpcy5aYih0aGlzLnMpLHRoaXMuRD10aGlzLmopO3ZhciBiPXRoaXMuczthPyhhWzBdPWJbMF0sYVsxXT1iWzFdLGFbMl09YlsyXSxhWzNdPWJbM10pOmE9YjtyZXR1cm4gYX07dWUucHJvdG90eXBlLkM9ZnVuY3Rpb24oYSxiKXt0aGlzLnhiKEViKGEsYikpO3JldHVybiB0aGlzfTtmdW5jdGlvbiB2ZShhLGIsYyxkLGUsZil7Zm9yKHZhciBnPWY/ZjpbXSxoPTA7YjxjO2IrPWQpe3ZhciBrPWFbYl0sbT1hW2IrMV07Z1toKytdPWVbMF0qaytlWzJdKm0rZVs0XTtnW2grK109ZVsxXSprK2VbM10qbStlWzVdfWYmJmcubGVuZ3RoIT1oJiYoZy5sZW5ndGg9aCk7cmV0dXJuIGd9O2Z1bmN0aW9uIHdlKCl7dWUuY2FsbCh0aGlzKTt0aGlzLlc9XCJYWVwiO3RoaXMuQT0yO3RoaXMubz1udWxsfXQod2UsdWUpO2Z1bmN0aW9uIHhlKGEpe3ZhciBiO1wiWFlcIj09YT9iPTI6XCJYWVpcIj09YXx8XCJYWU1cIj09YT9iPTM6XCJYWVpNXCI9PWEmJihiPTQpO3JldHVybiBifWw9d2UucHJvdG90eXBlO2wuWmI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vLGM9dGhpcy5vLmxlbmd0aCxkPXRoaXMuQTthPU9hKGEpO3JldHVybiBSYShhLGIsMCxjLGQpfTtsLkdiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuby5zbGljZSgwLHRoaXMuQSl9O2wubWc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vLnNsaWNlKHRoaXMuby5sZW5ndGgtdGhpcy5BKX07XG5sLmFkPWZ1bmN0aW9uKGEpe3RoaXMubCE9dGhpcy5qJiYoJGEodGhpcy5jKSx0aGlzLmk9MCx0aGlzLmw9dGhpcy5qKTtpZigwPmF8fHRoaXMuaSYmYTw9dGhpcy5pKXJldHVybiB0aGlzO3ZhciBiPWEudG9TdHJpbmcoKTtpZih0aGlzLmMuaGFzT3duUHJvcGVydHkoYikpcmV0dXJuIHRoaXMuY1tiXTt2YXIgYz10aGlzLmtiKGEpO2lmKGMuby5sZW5ndGg8dGhpcy5vLmxlbmd0aClyZXR1cm4gdGhpcy5jW2JdPWM7dGhpcy5pPWE7cmV0dXJuIHRoaXN9O2wua2I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307ZnVuY3Rpb24geWUoYSxiLGMpe2EuQT14ZShiKTthLlc9YjthLm89Y31cbmZ1bmN0aW9uIHplKGEsYixjLGQpe2lmKGIpYz14ZShiKTtlbHNle2ZvcihiPTA7YjxkOysrYilpZihjLmxlbmd0aCljPWNbMF07ZWxzZXthLlc9XCJYWVwiO2EuQT0yO3JldHVybn1jPWMubGVuZ3RoO3ZhciBlOzI9PWM/ZT1cIlhZXCI6Mz09Yz9lPVwiWFlaXCI6ND09YyYmKGU9XCJYWVpNXCIpO2I9ZX1hLlc9YjthLkE9Y31sLnhiPWZ1bmN0aW9uKGEpe3RoaXMubyYmKGEodGhpcy5vLHRoaXMubyx0aGlzLkEpLHRoaXMuYigpKX07XG5sLnJvdGF0ZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMubztpZihjKXt2YXIgZD1jLmxlbmd0aCxlPXRoaXMuQSxmPWM/YzpbXSxnPU1hdGguY29zKGEpO2E9TWF0aC5zaW4oYSk7dmFyIGg9YlswXTtiPWJbMV07Zm9yKHZhciBrPTAsbT0wO208ZDttKz1lKXt2YXIgbj1jW21dLWgscD1jW20rMV0tYjtmW2srK109aCtuKmctcCphO2ZbaysrXT1iK24qYStwKmc7Zm9yKG49bSsyO248bStlOysrbilmW2srK109Y1tuXX1jJiZmLmxlbmd0aCE9ayYmKGYubGVuZ3RoPWspO3RoaXMuYigpfX07XG5sLnNjYWxlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1iO3ZvaWQgMD09PWQmJihkPWEpO3ZhciBlPWM7ZXx8KGU9U2EodGhpcy5LKCkpKTtpZihjPXRoaXMubyl7Yj1jLmxlbmd0aDt2YXIgZj10aGlzLkEsZz1jP2M6W10saD1lWzBdO2U9ZVsxXTtmb3IodmFyIGs9MCxtPTA7bTxiO20rPWYpe3ZhciBuPWNbbV0taCxwPWNbbSsxXS1lO2dbaysrXT1oK2EqbjtnW2srK109ZStkKnA7Zm9yKG49bSsyO248bStmOysrbilnW2srK109Y1tuXX1jJiZnLmxlbmd0aCE9ayYmKGcubGVuZ3RoPWspO3RoaXMuYigpfX07ZnVuY3Rpb24gQWUoYSxiLGMsZCl7dmFyIGU9MCxmO3ZhciBnPTA7Zm9yKGY9Yy5sZW5ndGg7ZzxmOysrZyl7Zm9yKHZhciBoPWNbZ10saz0wLG09YVtoLWRdLG49YVtoLWQrMV07YjxoO2IrPWQpe3ZhciBwPWFbYl0scj1hW2IrMV07ays9bipwLW0qcjttPXA7bj1yfWUrPWsvMjtiPWh9cmV0dXJuIGV9O2Z1bmN0aW9uIEJlKGEsYixjLGQsZSxmLGcpe3ZhciBoPWFbYl0saz1hW2IrMV0sbT1hW2NdLWgsbj1hW2MrMV0taztpZihtfHxuKWlmKGY9KChlLWgpKm0rKGYtaykqbikvKG0qbStuKm4pLDE8ZiliPWM7ZWxzZSBpZigwPGYpe2ZvcihlPTA7ZTxkOysrZSlnW2VdPUFhKGFbYitlXSxhW2MrZV0sZik7Zy5sZW5ndGg9ZDtyZXR1cm59Zm9yKGU9MDtlPGQ7KytlKWdbZV09YVtiK2VdO2cubGVuZ3RoPWR9ZnVuY3Rpb24gQ2UoYSxiLGMsZCxlKXt2YXIgZj1hW2JdLGc9YVtiKzFdO2ZvcihiKz1kO2I8YztiKz1kKXt2YXIgaD1hW2JdLGs9YVtiKzFdO2Y9eGEoZixnLGgsayk7Zj5lJiYoZT1mKTtmPWg7Zz1rfXJldHVybiBlfWZ1bmN0aW9uIERlKGEsYixjLGQsZSl7dmFyIGY7dmFyIGc9MDtmb3IoZj1jLmxlbmd0aDtnPGY7KytnKXt2YXIgaD1jW2ddO2U9Q2UoYSxiLGgsZCxlKTtiPWh9cmV0dXJuIGV9XG5mdW5jdGlvbiBFZShhLGIsYyxkLGUsZixnLGgsayxtLG4pe2lmKGI9PWMpcmV0dXJuIG07aWYoIWUpe3ZhciBwPXhhKGcsaCxhW2JdLGFbYisxXSk7aWYocDxtKXtmb3Iobj0wO248ZDsrK24pa1tuXT1hW2Irbl07ay5sZW5ndGg9ZDtyZXR1cm4gcH1yZXR1cm4gbX1mb3IodmFyIHI9bj9uOltOYU4sTmFOXSx1PWIrZDt1PGM7KWlmKEJlKGEsdS1kLHUsZCxnLGgscikscD14YShnLGgsclswXSxyWzFdKSxwPG0pe209cDtmb3Iobj0wO248ZDsrK24pa1tuXT1yW25dO2subGVuZ3RoPWQ7dSs9ZH1lbHNlIHUrPWQqTWF0aC5tYXgoKE1hdGguc3FydChwKS1NYXRoLnNxcnQobSkpL2V8MCwxKTtpZihmJiYoQmUoYSxjLWQsYixkLGcsaCxyKSxwPXhhKGcsaCxyWzBdLHJbMV0pLHA8bSkpe209cDtmb3Iobj0wO248ZDsrK24pa1tuXT1yW25dO2subGVuZ3RoPWR9cmV0dXJuIG19XG5mdW5jdGlvbiBGZShhLGIsYyxkLGUsZixnLGgsayxtLG4pe249bj9uOltOYU4sTmFOXTt2YXIgcDt2YXIgcj0wO2ZvcihwPWMubGVuZ3RoO3I8cDsrK3Ipe3ZhciB1PWNbcl07bT1FZShhLGIsdSxkLGUsZixnLGgsayxtLG4pO2I9dX1yZXR1cm4gbX07ZnVuY3Rpb24gR2UoYSxiKXt2YXIgYz0wLGQ7dmFyIGU9MDtmb3IoZD1iLmxlbmd0aDtlPGQ7KytlKWFbYysrXT1iW2VdO3JldHVybiBjfWZ1bmN0aW9uIEhlKGEsYixjLGQpe3ZhciBlO3ZhciBmPTA7Zm9yKGU9Yy5sZW5ndGg7ZjxlOysrZil7dmFyIGc9Y1tmXSxoO2ZvcihoPTA7aDxkOysraClhW2IrK109Z1toXX1yZXR1cm4gYn1mdW5jdGlvbiBJZShhLGIsYyxkLGUpe2U9ZT9lOltdO3ZhciBmPTAsZzt2YXIgaD0wO2ZvcihnPWMubGVuZ3RoO2g8ZzsrK2gpYj1IZShhLGIsY1toXSxkKSxlW2YrK109YjtlLmxlbmd0aD1mO3JldHVybiBlfTtmdW5jdGlvbiBKZShhLGIsYyxkLGUpe2U9dm9pZCAwIT09ZT9lOltdO2Zvcih2YXIgZj0wO2I8YztiKz1kKWVbZisrXT1hLnNsaWNlKGIsYitkKTtlLmxlbmd0aD1mO3JldHVybiBlfWZ1bmN0aW9uIEtlKGEsYixjLGQsZSl7ZT12b2lkIDAhPT1lP2U6W107dmFyIGY9MCxnO3ZhciBoPTA7Zm9yKGc9Yy5sZW5ndGg7aDxnOysraCl7dmFyIGs9Y1toXTtlW2YrK109SmUoYSxiLGssZCxlW2ZdKTtiPWt9ZS5sZW5ndGg9ZjtyZXR1cm4gZX1mdW5jdGlvbiBMZShhLGIsYyxkLGUpe2U9dm9pZCAwIT09ZT9lOltdO3ZhciBmPTAsZzt2YXIgaD0wO2ZvcihnPWMubGVuZ3RoO2g8ZzsrK2gpe3ZhciBrPWNbaF07ZVtmKytdPUtlKGEsYixrLGQsZVtmXSk7Yj1rW2subGVuZ3RoLTFdfWUubGVuZ3RoPWY7cmV0dXJuIGV9O2Z1bmN0aW9uIE1lKGEsYixjLGQsZSxmLGcpe3ZhciBoPShjLWIpL2Q7aWYoMz5oKXtmb3IoO2I8YztiKz1kKWZbZysrXT1hW2JdLGZbZysrXT1hW2IrMV07cmV0dXJuIGd9dmFyIGs9QXJyYXkoaCk7a1swXT0xO2tbaC0xXT0xO2M9W2IsYy1kXTtmb3IodmFyIG09MCxuOzA8Yy5sZW5ndGg7KXt2YXIgcD1jLnBvcCgpLHI9Yy5wb3AoKSx1PTAsRD1hW3JdLEY9YVtyKzFdLEM9YVtwXSxBPWFbcCsxXTtmb3Iobj1yK2Q7bjxwO24rPWQpe3ZhciBIPWFbbl07dmFyIEs9YVtuKzFdLGNhPUQsUj1GLFo9Qy1jYSxVPUEtUjtpZihafHxVKXt2YXIgRz0oKEgtY2EpKlorKEstUikqVSkvKFoqWitVKlUpOzE8Rz8oY2E9QyxSPUEpOjA8RyYmKGNhKz1aKkcsUis9VSpHKX1IPXhhKEgsSyxjYSxSKTtIPnUmJihtPW4sdT1IKX11PmUmJihrWyhtLWIpL2RdPTEscitkPG0mJmMucHVzaChyLG0pLG0rZDxwJiZjLnB1c2gobSxwKSl9Zm9yKG49MDtuPGg7KytuKWtbbl0mJihmW2crK109YVtiK24qZF0sZltnKytdPVxuYVtiK24qZCsxXSk7cmV0dXJuIGd9XG5mdW5jdGlvbiBOZShhLGIsYyxkLGUsZixnLGgpe3ZhciBrO3ZhciBtPTA7Zm9yKGs9Yy5sZW5ndGg7bTxrOysrbSl7dmFyIG49Y1ttXTthOnt2YXIgcD1hLHI9bix1PWQsRD1lLEY9ZixDPWc7aWYoYiE9cil7dmFyIEE9RCpNYXRoLnJvdW5kKHBbYl0vRCksSD1EKk1hdGgucm91bmQocFtiKzFdL0QpO2IrPXU7RltDKytdPUE7RltDKytdPUg7ZG97dmFyIEs9RCpNYXRoLnJvdW5kKHBbYl0vRCk7Zz1EKk1hdGgucm91bmQocFtiKzFdL0QpO2IrPXU7aWYoYj09cil7RltDKytdPUs7RltDKytdPWc7Zz1DO2JyZWFrIGF9fXdoaWxlKEs9PUEmJmc9PUgpO2Zvcig7YjxyOyl7dmFyIGNhPUQqTWF0aC5yb3VuZChwW2JdL0QpO3ZhciBSPUQqTWF0aC5yb3VuZChwW2IrMV0vRCk7Yis9dTtpZihjYSE9S3x8UiE9Zyl7dmFyIFo9Sy1BLFU9Zy1ILEc9Y2EtQSx4PVItSDtaKng9PVUqRyYmKDA+WiYmRzxafHxaPT1HfHwwPFomJkc+WikmJigwPlUmJng8VXx8VT09eHx8MDxVJiZ4PlUpfHwoRltDKytdPVxuSyxGW0MrK109ZyxBPUssSD1nKTtLPWNhO2c9Un19RltDKytdPUs7RltDKytdPWd9Zz1DfWgucHVzaChnKTtiPW59cmV0dXJuIGd9O2Z1bmN0aW9uIE9lKGEsYil7d2UuY2FsbCh0aGlzKTt0aGlzLmE9dGhpcy5nPS0xO3RoaXMuWShhLGIpfXQoT2Usd2UpO2w9T2UucHJvdG90eXBlO2wuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgT2UobnVsbCk7UGUoYSx0aGlzLlcsdGhpcy5vLnNsaWNlKCkpO3JldHVybiBhfTtsLkdhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8TGEodGhpcy5LKCksYSxiKSlyZXR1cm4gZDt0aGlzLmEhPXRoaXMuaiYmKHRoaXMuZz1NYXRoLnNxcnQoQ2UodGhpcy5vLDAsdGhpcy5vLmxlbmd0aCx0aGlzLkEsMCkpLHRoaXMuYT10aGlzLmopO3JldHVybiBFZSh0aGlzLm8sMCx0aGlzLm8ubGVuZ3RoLHRoaXMuQSx0aGlzLmcsITAsYSxiLGMsZCl9O2wuRz1mdW5jdGlvbigpe3JldHVybiBKZSh0aGlzLm8sMCx0aGlzLm8ubGVuZ3RoLHRoaXMuQSl9O1xubC5rYj1mdW5jdGlvbihhKXt2YXIgYj1bXTtiLmxlbmd0aD1NZSh0aGlzLm8sMCx0aGlzLm8ubGVuZ3RoLHRoaXMuQSxhLGIsMCk7YT1uZXcgT2UobnVsbCk7UGUoYSxcIlhZXCIsYik7cmV0dXJuIGF9O2wuST1mdW5jdGlvbigpe3JldHVyblwiTGluZWFyUmluZ1wifTtsLlk9ZnVuY3Rpb24oYSxiKXthPyh6ZSh0aGlzLGIsYSwxKSx0aGlzLm98fCh0aGlzLm89W10pLHRoaXMuby5sZW5ndGg9SGUodGhpcy5vLDAsYSx0aGlzLkEpLHRoaXMuYigpKTpQZSh0aGlzLFwiWFlcIixudWxsKX07ZnVuY3Rpb24gUGUoYSxiLGMpe3llKGEsYixjKTthLmIoKX07ZnVuY3Rpb24gUWUoYSxiKXt3ZS5jYWxsKHRoaXMpO3RoaXMuWShhLGIpfXQoUWUsd2UpO2w9UWUucHJvdG90eXBlO2wuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgUWUobnVsbCk7eWUoYSx0aGlzLlcsdGhpcy5vLnNsaWNlKCkpO2EuYigpO3JldHVybiBhfTtsLkdhPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMubzthPXhhKGEsYixlWzBdLGVbMV0pO2lmKGE8ZCl7ZD10aGlzLkE7Zm9yKGI9MDtiPGQ7KytiKWNbYl09ZVtiXTtjLmxlbmd0aD1kO3JldHVybiBhfXJldHVybiBkfTtsLkc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5vP3RoaXMuby5zbGljZSgpOltdfTtsLlpiPWZ1bmN0aW9uKGEpe3JldHVybiBQYSh0aGlzLm8sYSl9O2wuST1mdW5jdGlvbigpe3JldHVyblwiUG9pbnRcIn07bC5ZPWZ1bmN0aW9uKGEsYil7YT8oemUodGhpcyxiLGEsMCksdGhpcy5vfHwodGhpcy5vPVtdKSx0aGlzLm8ubGVuZ3RoPUdlKHRoaXMubyxhKSk6eWUodGhpcyxcIlhZXCIsbnVsbCk7dGhpcy5iKCl9O2Z1bmN0aW9uIFJlKGEsYixjLGQsZSxmKXtmb3IodmFyIGc9MCxoPWFbYy1kXSxrPWFbYy1kKzFdO2I8YztiKz1kKXt2YXIgbT1hW2JdLG49YVtiKzFdO2s8PWY/bj5mJiYwPChtLWgpKihmLWspLShlLWgpKihuLWspJiZnKys6bjw9ZiYmMD4obS1oKSooZi1rKS0oZS1oKSoobi1rKSYmZy0tO2g9bTtrPW59cmV0dXJuISFnfTtmdW5jdGlvbiBTZShhLGIsYyxkLGUsZixnKXt2YXIgaCxrPWVbZisxXSxtPVtdLG49Y1swXTt2YXIgcD1hW24tZF07dmFyIHI9YVtuLWQrMV07Zm9yKGg9YjtoPG47aCs9ZCl7dmFyIHU9YVtoXTt2YXIgRD1hW2grMV07aWYoazw9ciYmRDw9a3x8cjw9ayYmazw9RClwPShrLXIpLyhELXIpKih1LXApK3AsbS5wdXNoKHApO3A9dTtyPUR9bj1OYU47cj0tSW5maW5pdHk7bS5zb3J0KGZhKTtwPW1bMF07aD0xO2ZvcihEPW0ubGVuZ3RoO2g8RDsrK2gpe3U9bVtoXTt2YXIgRj1NYXRoLmFicyh1LXApO2lmKEY+cil7cD0ocCt1KS8yO3ZhciBDO2E6aWYoYy5sZW5ndGgmJlJlKGEsYixjWzBdLGQscCxrKSl7dmFyIEE9MTtmb3IoQz1jLmxlbmd0aDtBPEM7KytBKWlmKFJlKGEsY1tBLTFdLGNbQV0sZCxwLGspKXtDPSExO2JyZWFrIGF9Qz0hMH1lbHNlIEM9ITE7QyYmKG49cCxyPUYpfXA9dX1pc05hTihuKSYmKG49ZVtmXSk7cmV0dXJuIGc/KGcucHVzaChuLGspLGcpOltuLGtdfTtmdW5jdGlvbiBUZShhLGIsYyxkKXtmb3IodmFyIGU9MCxmPWFbYy1kXSxnPWFbYy1kKzFdO2I8YztiKz1kKXt2YXIgaD1hW2JdLGs9YVtiKzFdO2UrPShoLWYpKihrK2cpO2Y9aDtnPWt9cmV0dXJuIDA8ZX1mdW5jdGlvbiBVZShhLGIsYyxkKXt2YXIgZT0wO2Q9dm9pZCAwIT09ZD9kOiExO3ZhciBmO3ZhciBnPTA7Zm9yKGY9Yi5sZW5ndGg7ZzxmOysrZyl7dmFyIGg9YltnXTtlPVRlKGEsZSxoLGMpO2lmKCFnKXtpZihkJiZlfHwhZCYmIWUpcmV0dXJuITF9ZWxzZSBpZihkJiYhZXx8IWQmJmUpcmV0dXJuITE7ZT1ofXJldHVybiEwfVxuZnVuY3Rpb24gVmUoYSxiLGMsZCxlKXtlPXZvaWQgMCE9PWU/ZTohMTt2YXIgZjt2YXIgZz0wO2ZvcihmPWMubGVuZ3RoO2c8ZjsrK2cpe3ZhciBoPWNbZ10saz1UZShhLGIsaCxkKTtpZihnP2UmJiFrfHwhZSYmazplJiZrfHwhZSYmIWspe2s9YTtmb3IodmFyIG09aCxuPWQ7YjxtLW47KXt2YXIgcDtmb3IocD0wO3A8bjsrK3Ape3ZhciByPWtbYitwXTtrW2IrcF09a1ttLW4rcF07a1ttLW4rcF09cn1iKz1uO20tPW59fWI9aH1yZXR1cm4gYn1mdW5jdGlvbiBXZShhLGIsYyxkKXt2YXIgZT0wLGY7dmFyIGc9MDtmb3IoZj1iLmxlbmd0aDtnPGY7KytnKWU9VmUoYSxlLGJbZ10sYyxkKTtyZXR1cm4gZX07ZnVuY3Rpb24geihhLGIpe3dlLmNhbGwodGhpcyk7dGhpcy5hPVtdO3RoaXMudj0tMTt0aGlzLnU9bnVsbDt0aGlzLlg9dGhpcy5IPXRoaXMuSj0tMTt0aGlzLmc9bnVsbDt0aGlzLlkoYSxiKX10KHosd2UpO2w9ei5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyB6KG51bGwpO1hlKGEsdGhpcy5XLHRoaXMuby5zbGljZSgpLHRoaXMuYS5zbGljZSgpKTtyZXR1cm4gYX07bC5HYT1mdW5jdGlvbihhLGIsYyxkKXtpZihkPExhKHRoaXMuSygpLGEsYikpcmV0dXJuIGQ7dGhpcy5IIT10aGlzLmomJih0aGlzLko9TWF0aC5zcXJ0KERlKHRoaXMubywwLHRoaXMuYSx0aGlzLkEsMCkpLHRoaXMuSD10aGlzLmopO3JldHVybiBGZSh0aGlzLm8sMCx0aGlzLmEsdGhpcy5BLHRoaXMuSiwhMCxhLGIsYyxkKX07bC5GaD1mdW5jdGlvbigpe3JldHVybiBBZShZZSh0aGlzKSwwLHRoaXMuYSx0aGlzLkEpfTtcbmwuRz1mdW5jdGlvbihhKXtpZih2b2lkIDAhPT1hKXt2YXIgYj1ZZSh0aGlzKS5zbGljZSgpO1ZlKGIsMCx0aGlzLmEsdGhpcy5BLGEpfWVsc2UgYj10aGlzLm87cmV0dXJuIEtlKGIsMCx0aGlzLmEsdGhpcy5BKX07bC5RYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2Z1bmN0aW9uIFplKGEpe2lmKGEudiE9YS5qKXt2YXIgYj1TYShhLksoKSk7YS51PVNlKFllKGEpLDAsYS5hLGEuQSxiLDApO2Eudj1hLmp9cmV0dXJuIGEudX1sLmtnPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBRZShaZSh0aGlzKSl9O2wuZGU9ZnVuY3Rpb24oYSl7aWYoMD5hfHx0aGlzLmEubGVuZ3RoPD1hKXJldHVybiBudWxsO3ZhciBiPW5ldyBPZShudWxsKTtQZShiLHRoaXMuVyx0aGlzLm8uc2xpY2UoYT90aGlzLmFbYS0xXTowLHRoaXMuYVthXSkpO3JldHVybiBifTtcbmZ1bmN0aW9uICRlKGEpe3ZhciBiPWEuVyxjPWEubzthPWEuYTt2YXIgZD1bXSxlPTAsZjt2YXIgZz0wO2ZvcihmPWEubGVuZ3RoO2c8ZjsrK2cpe3ZhciBoPWFbZ10saz1uZXcgT2UobnVsbCk7UGUoayxiLGMuc2xpY2UoZSxoKSk7ZC5wdXNoKGspO2U9aH1yZXR1cm4gZH1mdW5jdGlvbiBZZShhKXtpZihhLlghPWEuail7dmFyIGI9YS5vO1VlKGIsYS5hLGEuQSk/YS5nPWI6KGEuZz1iLnNsaWNlKCksYS5nLmxlbmd0aD1WZShhLmcsMCxhLmEsYS5BKSk7YS5YPWEuan1yZXR1cm4gYS5nfWwua2I9ZnVuY3Rpb24oYSl7dmFyIGI9W10sYz1bXTtiLmxlbmd0aD1OZSh0aGlzLm8sMCx0aGlzLmEsdGhpcy5BLE1hdGguc3FydChhKSxiLDAsYyk7YT1uZXcgeihudWxsKTtYZShhLFwiWFlcIixiLGMpO3JldHVybiBhfTtsLkk9ZnVuY3Rpb24oKXtyZXR1cm5cIlBvbHlnb25cIn07XG5sLlk9ZnVuY3Rpb24oYSxiKXthPyh6ZSh0aGlzLGIsYSwyKSx0aGlzLm98fCh0aGlzLm89W10pLGE9SWUodGhpcy5vLDAsYSx0aGlzLkEsdGhpcy5hKSx0aGlzLm8ubGVuZ3RoPWEubGVuZ3RoP2FbYS5sZW5ndGgtMV06MCx0aGlzLmIoKSk6WGUodGhpcyxcIlhZXCIsbnVsbCx0aGlzLmEpfTtmdW5jdGlvbiBYZShhLGIsYyxkKXt5ZShhLGIsYyk7YS5hPWQ7YS5iKCl9ZnVuY3Rpb24gYWYoYSl7dmFyIGI9YVswXSxjPWFbMV0sZD1hWzJdO2E9YVszXTtiPVtiLGMsYixhLGQsYSxkLGMsYixjXTtjPW5ldyB6KG51bGwpO1hlKGMsXCJYWVwiLGIsW2IubGVuZ3RoXSk7cmV0dXJuIGN9O2Z1bmN0aW9uIGJmKGEpe25jLmNhbGwodGhpcyk7YT1aYSh7fSxhKTt0aGlzLmw9WzAsMF07dGhpcy5jPVtdO3RoaXMuQWM9dGhpcy5BYy5iaW5kKHRoaXMpO3RoaXMudT16YihhLnByb2plY3Rpb24pO3ZhciBiPXt9O2IuY2VudGVyPXZvaWQgMCE9PWEuY2VudGVyP2EuY2VudGVyOm51bGw7dmFyIGM9dm9pZCAwIT09YS5taW5ab29tP2EubWluWm9vbTowO3ZhciBkPXZvaWQgMCE9PWEubWF4Wm9vbT9hLm1heFpvb206Mjg7dmFyIGU9dm9pZCAwIT09YS56b29tRmFjdG9yP2Euem9vbUZhY3RvcjoyO2lmKHZvaWQgMCE9PWEucmVzb2x1dGlvbnMpe2Q9YS5yZXNvbHV0aW9uczt2YXIgZj1kWzBdO3ZhciBnPWRbZC5sZW5ndGgtMV07ZD1iZShkKX1lbHNle2c9emIoYS5wcm9qZWN0aW9uKTtmPWcuSygpO3ZhciBoPShmP01hdGgubWF4KFhhKGYpLGZbM10tZlsxXSk6MzYwKmRiLmRlZ3JlZXMvZy5qKCkpLzI1Ni9NYXRoLnBvdygyLDApLGs9aC9NYXRoLnBvdygyLDI4KTtmPWEubWF4UmVzb2x1dGlvbjtcbnZvaWQgMCE9PWY/Yz0wOmY9aC9NYXRoLnBvdyhlLGMpO2c9YS5taW5SZXNvbHV0aW9uO3ZvaWQgMD09PWcmJihnPXZvaWQgMCE9PWEubWF4Wm9vbT92b2lkIDAhPT1hLm1heFJlc29sdXRpb24/Zi9NYXRoLnBvdyhlLGQpOmgvTWF0aC5wb3coZSxkKTprKTtkPWMrTWF0aC5mbG9vcihNYXRoLmxvZyhmL2cpL01hdGgubG9nKGUpKTtnPWYvTWF0aC5wb3coZSxkLWMpO2Q9Y2UoZSxmLGQtYyl9dGhpcy5pPWY7dGhpcy5EPWc7dGhpcy5DPWU7dGhpcy5nPWEucmVzb2x1dGlvbnM7dGhpcy5zPWM7KHZvaWQgMCE9PWEuZW5hYmxlUm90YXRpb24/YS5lbmFibGVSb3RhdGlvbjoxKT8oZT1hLmNvbnN0cmFpblJvdGF0aW9uLGU9dm9pZCAwPT09ZXx8ITA9PT1lP2dlKCk6ITE9PT1lP2VlOlwibnVtYmVyXCI9PT10eXBlb2YgZT9mZShlKTplZSk6ZT1kZTt0aGlzLmE9e2NlbnRlcjp2b2lkIDAhPT1hLmV4dGVudD9WYihhLmV4dGVudCk6V2IscmVzb2x1dGlvbjpkLHJvdGF0aW9uOmV9O3ZvaWQgMCE9PVxuYS5yZXNvbHV0aW9uP2IucmVzb2x1dGlvbj1hLnJlc29sdXRpb246dm9pZCAwIT09YS56b29tJiYoYi5yZXNvbHV0aW9uPXRoaXMuY29uc3RyYWluUmVzb2x1dGlvbih0aGlzLmksYS56b29tLXRoaXMucykpO2Iucm90YXRpb249dm9pZCAwIT09YS5yb3RhdGlvbj9hLnJvdGF0aW9uOjA7dGhpcy5xYShiKX10KGJmLG5jKTtsPWJmLnByb3RvdHlwZTtcbmwuYW5pbWF0ZT1mdW5jdGlvbihhKXt2YXIgYj1EYXRlLm5vdygpLGM9dGhpcy5iYSgpLnNsaWNlKCksZD10aGlzLnVhKCksZT1TYyh0aGlzKSxmPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxmJiZcImZ1bmN0aW9uXCI9PT10eXBlb2YgYXJndW1lbnRzW2YtMV0pe3ZhciBnPWFyZ3VtZW50c1tmLTFdOy0tZn1mb3IodmFyIGg9W10saz0wO2s8ZjsrK2spe3ZhciBtPWFyZ3VtZW50c1trXSxuPXtzdGFydDpiLGNvbXBsZXRlOiExLGFuY2hvcjptLmFuY2hvcixkdXJhdGlvbjp2b2lkIDAhPT1tLmR1cmF0aW9uP20uZHVyYXRpb246MUUzLGVhc2luZzptLmVhc2luZ3x8T2N9O20uY2VudGVyJiYobi5MYj1jLG4uT2I9bS5jZW50ZXIsYz1uLk9iKTt2b2lkIDAhPT1tLnpvb20/KG4uTWI9ZCxuLmNiPXRoaXMuY29uc3RyYWluUmVzb2x1dGlvbih0aGlzLmksbS56b29tLXRoaXMucywwKSxkPW4uY2IpOm0ucmVzb2x1dGlvbiYmKG4uTWI9ZCxuLmNiPW0ucmVzb2x1dGlvbixkPW4uY2IpO3ZvaWQgMCE9PVxubS5yb3RhdGlvbiYmKG4ueWM9ZSxuLlBiPWUrKHphKG0ucm90YXRpb24tZStNYXRoLlBJLDIqTWF0aC5QSSktTWF0aC5QSSksZT1uLlBiKTtuLmNhbGxiYWNrPWc7bi5MYiYmbi5PYiYmIW1lKG4uTGIsbi5PYil8fG4uTWIhPT1uLmNifHxuLnljIT09bi5QYj9iKz1uLmR1cmF0aW9uOm4uY29tcGxldGU9ITA7aC5wdXNoKG4pfXRoaXMuYy5wdXNoKGgpO2NmKHRoaXMsMCwxKTt0aGlzLkFjKCl9O2Z1bmN0aW9uIFVjKGEpe2NmKGEsMCwtVGMoYSlbMF0pO2Zvcih2YXIgYj0wLGM9YS5jLmxlbmd0aDtiPGM7KytiKXt2YXIgZD1hLmNbYl07ZFswXS5jYWxsYmFjayYmZFswXS5jYWxsYmFjayghMSl9YS5jLmxlbmd0aD0wfVxubC5BYz1mdW5jdGlvbigpe3ZvaWQgMCE9PXRoaXMudiYmKGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMudiksdGhpcy52PXZvaWQgMCk7aWYoMDxUYyh0aGlzKVswXSl7Zm9yKHZhciBhPURhdGUubm93KCksYj0hMSxjPXRoaXMuYy5sZW5ndGgtMTswPD1jOy0tYyl7Zm9yKHZhciBkPXRoaXMuY1tjXSxlPSEwLGY9MCxnPWQubGVuZ3RoO2Y8ZzsrK2Ype3ZhciBoPWRbZl07aWYoIWguY29tcGxldGUpe2I9YS1oLnN0YXJ0O2I9MDxoLmR1cmF0aW9uP2IvaC5kdXJhdGlvbjoxOzE8PWI/KGguY29tcGxldGU9ITAsYj0xKTplPSExO2I9aC5lYXNpbmcoYik7aWYoaC5MYil7dmFyIGs9aC5MYlswXSxtPWguTGJbMV07dGhpcy5zZXQoXCJjZW50ZXJcIixbaytiKihoLk9iWzBdLWspLG0rYiooaC5PYlsxXS1tKV0pfWguTWImJmguY2ImJihrPTE9PT1iP2guY2I6aC5NYitiKihoLmNiLWguTWIpLGguYW5jaG9yJiZ0aGlzLnNldChcImNlbnRlclwiLGRmKHRoaXMsayxoLmFuY2hvcikpLHRoaXMuc2V0KFwicmVzb2x1dGlvblwiLFxuaykpO3ZvaWQgMCE9PWgueWMmJnZvaWQgMCE9PWguUGImJihiPTE9PT1iP3phKGguUGIrTWF0aC5QSSwyKk1hdGguUEkpLU1hdGguUEk6aC55YytiKihoLlBiLWgueWMpLGguYW5jaG9yJiZ0aGlzLnNldChcImNlbnRlclwiLGVmKHRoaXMsYixoLmFuY2hvcikpLHRoaXMuc2V0KFwicm90YXRpb25cIixiKSk7Yj0hMDtpZighaC5jb21wbGV0ZSlicmVha319ZSYmKHRoaXMuY1tjXT1udWxsLGNmKHRoaXMsMCwtMSksKGQ9ZFswXS5jYWxsYmFjaykmJmQoITApKX10aGlzLmM9dGhpcy5jLmZpbHRlcihCb29sZWFuKTtiJiZ2b2lkIDA9PT10aGlzLnYmJih0aGlzLnY9cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuQWMpKX19O2Z1bmN0aW9uIGVmKGEsYixjKXt2YXIgZD1hLmJhKCk7aWYodm9pZCAwIT09ZCl7dmFyIGU9W2RbMF0tY1swXSxkWzFdLWNbMV1dO25lKGUsYi1TYyhhKSk7aWUoZSxjKX1yZXR1cm4gZX1cbmZ1bmN0aW9uIGRmKGEsYixjKXt2YXIgZCxlPWEuYmEoKTthPWEudWEoKTt2b2lkIDAhPT1lJiZ2b2lkIDAhPT1hJiYoZD1bY1swXS1iKihjWzBdLWVbMF0pL2EsY1sxXS1iKihjWzFdLWVbMV0pL2FdKTtyZXR1cm4gZH1mdW5jdGlvbiBmZihhKXt2YXIgYj1bMTAwLDEwMF07YT0nLm9sLXZpZXdwb3J0W2RhdGEtdmlldz1cIicrdihhKSsnXCJdJztpZihhPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYSkpYT1nZXRDb21wdXRlZFN0eWxlKGEpLGJbMF09cGFyc2VJbnQoYS53aWR0aCwxMCksYlsxXT1wYXJzZUludChhLmhlaWdodCwxMCk7cmV0dXJuIGJ9bC5jb25zdHJhaW5SZXNvbHV0aW9uPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gdGhpcy5hLnJlc29sdXRpb24oYSxifHwwLGN8fDApfTtsLmNvbnN0cmFpblJvdGF0aW9uPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuYS5yb3RhdGlvbihhLGJ8fDApfTtsLmJhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwiY2VudGVyXCIpfTtcbmZ1bmN0aW9uIFRjKGEsYil7cmV0dXJuIHZvaWQgMCE9PWI/KGJbMF09YS5sWzBdLGJbMV09YS5sWzFdLGIpOmEubC5zbGljZSgpfWwuVGQ9ZnVuY3Rpb24oYSl7YT1hfHxmZih0aGlzKTt2YXIgYj10aGlzLmJhKCk7dyhiLDEpO3ZhciBjPXRoaXMudWEoKTt3KHZvaWQgMCE9PWMsMik7dmFyIGQ9U2ModGhpcyk7dyh2b2lkIDAhPT1kLDMpO3JldHVybiBUYShiLGMsZCxhKX07bC5zaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnV9O2wudWE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJyZXNvbHV0aW9uXCIpfTtsLnRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ307ZnVuY3Rpb24gZ2YoYSxiLGMpe2E9Y3x8ZmYoYSk7cmV0dXJuIE1hdGgubWF4KFhhKGIpL2FbMF0sKGJbM10tYlsxXSkvYVsxXSl9ZnVuY3Rpb24gU2MoYSl7cmV0dXJuIGEuZ2V0KFwicm90YXRpb25cIil9XG5mdW5jdGlvbiBoZihhKXt2YXIgYj1hLmJhKCksYz1hLnUsZD1hLnVhKCk7YT1TYyhhKTtyZXR1cm57Y2VudGVyOmIuc2xpY2UoKSxwcm9qZWN0aW9uOnZvaWQgMCE9PWM/YzpudWxsLHJlc29sdXRpb246ZCxyb3RhdGlvbjphfX1sLnFnPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy51YSgpO2lmKHZvaWQgMCE9PWEpYTp7aWYoYT49dGhpcy5EJiZhPD10aGlzLmkpe3ZhciBiPXRoaXMuc3x8MDtpZih0aGlzLmcpe3ZhciBjPWhhKHRoaXMuZyxhLDEpO2IrPWM7aWYoYz09dGhpcy5nLmxlbmd0aC0xKWJyZWFrIGE7dmFyIGQ9dGhpcy5nW2NdO2M9ZC90aGlzLmdbYysxXX1lbHNlIGQ9dGhpcy5pLGM9dGhpcy5DO2Q9YitNYXRoLmxvZyhkL2EpL01hdGgubG9nKGMpfWI9ZH1yZXR1cm4gYn07XG5sLmJnPWZ1bmN0aW9uKGEsYil7Yj1ifHx7fTt2YXIgYz1iLnNpemU7Y3x8KGM9ZmYodGhpcykpO2lmKGEgaW5zdGFuY2VvZiB3ZSlpZihcIkNpcmNsZVwiPT09YS5JKCkpe2E9YS5LKCk7dmFyIGQ9YWYoYSk7ZC5yb3RhdGUoU2ModGhpcyksU2EoYSkpfWVsc2UgZD1hO2Vsc2UgdyhBcnJheS5pc0FycmF5KGEpLDI0KSx3KCFZYShhKSwyNSksZD1hZihhKTt2YXIgZT1iLnBhZGRpbmc/Yi5wYWRkaW5nOlswLDAsMCwwXSxmPXZvaWQgMCE9PWIuY29uc3RyYWluUmVzb2x1dGlvbj9iLmNvbnN0cmFpblJlc29sdXRpb246ITAsZz12b2lkIDAhPT1iLm5lYXJlc3Q/Yi5uZWFyZXN0OiExLGg7dm9pZCAwIT09Yi5taW5SZXNvbHV0aW9uP2g9Yi5taW5SZXNvbHV0aW9uOnZvaWQgMCE9PWIubWF4Wm9vbT9oPXRoaXMuY29uc3RyYWluUmVzb2x1dGlvbih0aGlzLmksYi5tYXhab29tLXRoaXMucywwKTpoPTA7dmFyIGs9ZC5vLG09U2ModGhpcyk7YT1NYXRoLmNvcygtbSk7bT1NYXRoLnNpbigtbSk7dmFyIG49XG5JbmZpbml0eSxwPUluZmluaXR5LHI9LUluZmluaXR5LHU9LUluZmluaXR5O2Q9ZC5BO2Zvcih2YXIgRD0wLEY9ay5sZW5ndGg7RDxGO0QrPWQpe3ZhciBDPWtbRF0qYS1rW0QrMV0qbSxBPWtbRF0qbStrW0QrMV0qYTtuPU1hdGgubWluKG4sQyk7cD1NYXRoLm1pbihwLEEpO3I9TWF0aC5tYXgocixDKTt1PU1hdGgubWF4KHUsQSl9Yz1nZih0aGlzLFtuLHAscix1XSxbY1swXS1lWzFdLWVbM10sY1sxXS1lWzBdLWVbMl1dKTtjPWlzTmFOKGMpP2g6TWF0aC5tYXgoYyxoKTtmJiYoaD10aGlzLmNvbnN0cmFpblJlc29sdXRpb24oYywwLDApLCFnJiZoPGMmJihoPXRoaXMuY29uc3RyYWluUmVzb2x1dGlvbihoLC0xLDApKSxjPWgpO209LW07aD0obityKS8yKyhlWzFdLWVbM10pLzIqYztlPShwK3UpLzIrKGVbMF0tZVsyXSkvMipjO2E9W2gqYS1lKm0sZSphK2gqbV07ZT1iLmNhbGxiYWNrP2IuY2FsbGJhY2s6bmE7dm9pZCAwIT09Yi5kdXJhdGlvbj90aGlzLmFuaW1hdGUoe3Jlc29sdXRpb246YyxcbmNlbnRlcjphLGR1cmF0aW9uOmIuZHVyYXRpb24sZWFzaW5nOmIuZWFzaW5nfSxlKTooV2ModGhpcyxjKSx0aGlzLkphKGEpLHNldFRpbWVvdXQoZS5iaW5kKHZvaWQgMCwhMCksMCkpfTtsLnJvdGF0ZT1mdW5jdGlvbihhLGIpe3ZvaWQgMCE9PWImJihiPWVmKHRoaXMsYSxiKSx0aGlzLkphKGIpKTt0aGlzLnNldChcInJvdGF0aW9uXCIsYSk7MDxUYyh0aGlzKVswXSYmVWModGhpcyl9O2wuSmE9ZnVuY3Rpb24oYSl7dGhpcy5zZXQoXCJjZW50ZXJcIixhKTswPFRjKHRoaXMpWzBdJiZVYyh0aGlzKX07ZnVuY3Rpb24gY2YoYSxiLGMpe2EubFtiXSs9YzthLmIoKX1mdW5jdGlvbiBXYyhhLGIpe2Euc2V0KFwicmVzb2x1dGlvblwiLGIpOzA8VGMoYSlbMF0mJlVjKGEpfWwuSWk9ZnVuY3Rpb24oYSl7V2ModGhpcyx0aGlzLmNvbnN0cmFpblJlc29sdXRpb24odGhpcy5pLGEtdGhpcy5zLDApKX07ZnVuY3Rpb24gamYoKXt0aGlzLmI9W107dGhpcy5mPXRoaXMuaj0wfWZ1bmN0aW9uIGtmKGEpe2EuYi5sZW5ndGg9MDthLmo9MDthLmY9MH1mdW5jdGlvbiBsZihhKXtpZig2PmEuYi5sZW5ndGgpcmV0dXJuITE7dmFyIGI9RGF0ZS5ub3coKS0xMDAsYz1hLmIubGVuZ3RoLTM7aWYoYS5iW2MrMl08YilyZXR1cm4hMTtmb3IodmFyIGQ9Yy0zOzA8ZCYmYS5iW2QrMl0+YjspZC09MztiPWEuYltjKzJdLWEuYltkKzJdO2lmKGI8MUUzLzYwKXJldHVybiExO3ZhciBlPWEuYltjXS1hLmJbZF07Yz1hLmJbYysxXS1hLmJbZCsxXTthLmo9TWF0aC5hdGFuMihjLGUpO2EuZj1NYXRoLnNxcnQoZSplK2MqYykvYjtyZXR1cm4uMDU8YS5mfTtmdW5jdGlvbiBtZihhKXtuYy5jYWxsKHRoaXMpO3RoaXMuRD1udWxsO3RoaXMuWWEoITApO3RoaXMuaGFuZGxlRXZlbnQ9YS5oYW5kbGVFdmVudH10KG1mLG5jKTttZi5wcm90b3R5cGUuWWE9ZnVuY3Rpb24oYSl7dGhpcy5zZXQoXCJhY3RpdmVcIixhKX07bWYucHJvdG90eXBlLnNldE1hcD1mdW5jdGlvbihhKXt0aGlzLkQ9YX07ZnVuY3Rpb24gbmYoYSxiLGMsZCl7aWYodm9pZCAwIT09Yil7dmFyIGU9U2MoYSksZj1hLmJhKCk7dm9pZCAwIT09ZSYmZiYmMDxkP2EuYW5pbWF0ZSh7cm90YXRpb246YixhbmNob3I6YyxkdXJhdGlvbjpkLGVhc2luZzpOY30pOmEucm90YXRlKGIsYyl9fVxuZnVuY3Rpb24gb2YoYSxiLGMsZCl7dmFyIGU9YS51YSgpO2I9YS5jb25zdHJhaW5SZXNvbHV0aW9uKGUsYiwwKTtpZihjJiZ2b2lkIDAhPT1iJiZiIT09ZSl7dmFyIGY9YS5iYSgpO2M9ZGYoYSxiLGMpO2M9YS5hLmNlbnRlcihjKTtjPVsoYipmWzBdLWUqY1swXSkvKGItZSksKGIqZlsxXS1lKmNbMV0pLyhiLWUpXX1wZihhLGIsYyxkKX1mdW5jdGlvbiBwZihhLGIsYyxkKXtpZihiKXt2YXIgZT1hLnVhKCksZj1hLmJhKCk7dm9pZCAwIT09ZSYmZiYmYiE9PWUmJmQ/YS5hbmltYXRlKHtyZXNvbHV0aW9uOmIsYW5jaG9yOmMsZHVyYXRpb246ZCxlYXNpbmc6TmN9KTooYyYmKGM9ZGYoYSxiLGMpLGEuSmEoYykpLFdjKGEsYikpfX07ZnVuY3Rpb24gcWYoYSl7YT1hP2E6e307dGhpcy5hPWEuZGVsdGE/YS5kZWx0YToxO21mLmNhbGwodGhpcyx7aGFuZGxlRXZlbnQ6cmZ9KTt0aGlzLmM9dm9pZCAwIT09YS5kdXJhdGlvbj9hLmR1cmF0aW9uOjI1MH10KHFmLG1mKTtmdW5jdGlvbiByZihhKXt2YXIgYj0hMSxjPWEub3JpZ2luYWxFdmVudDtpZihcImRibGNsaWNrXCI9PWEudHlwZSl7Yj1hLmNvb3JkaW5hdGU7Yz1jLnNoaWZ0S2V5Py10aGlzLmE6dGhpcy5hO3ZhciBkPWEubWFwLlooKTtvZihkLGMsYix0aGlzLmMpO2EucHJldmVudERlZmF1bHQoKTtiPSEwfXJldHVybiFifTtmdW5jdGlvbiBzZihhKXthPWEub3JpZ2luYWxFdmVudDtyZXR1cm4gYS5hbHRLZXkmJiEoYS5tZXRhS2V5fHxhLmN0cmxLZXkpJiZhLnNoaWZ0S2V5fWZ1bmN0aW9uIHRmKGEpe2E9YS5vcmlnaW5hbEV2ZW50O3JldHVybiFhLmJ1dHRvbiYmIShpZCYmamQmJmEuY3RybEtleSl9ZnVuY3Rpb24gdWYoYSl7cmV0dXJuXCJzaW5nbGVjbGlja1wiPT1hLnR5cGV9ZnVuY3Rpb24gdmYoYSl7YT1hLm9yaWdpbmFsRXZlbnQ7cmV0dXJuIWEuYWx0S2V5JiYhKGEubWV0YUtleXx8YS5jdHJsS2V5KSYmIWEuc2hpZnRLZXl9ZnVuY3Rpb24gd2YoYSl7YT1hLm9yaWdpbmFsRXZlbnQ7cmV0dXJuIWEuYWx0S2V5JiYhKGEubWV0YUtleXx8YS5jdHJsS2V5KSYmYS5zaGlmdEtleX1mdW5jdGlvbiB4ZihhKXthPWEub3JpZ2luYWxFdmVudC50YXJnZXQudGFnTmFtZTtyZXR1cm5cIklOUFVUXCIhPT1hJiZcIlNFTEVDVFwiIT09YSYmXCJURVhUQVJFQVwiIT09YX1cbmZ1bmN0aW9uIHlmKGEpe3coYS5iLDU2KTtyZXR1cm5cIm1vdXNlXCI9PWEuYi5wb2ludGVyVHlwZX1mdW5jdGlvbiB6ZihhKXthPWEuYjtyZXR1cm4gYS5pc1ByaW1hcnkmJjA9PT1hLmJ1dHRvbn07ZnVuY3Rpb24gQWYoYSl7YT1hP2E6e307bWYuY2FsbCh0aGlzLHtoYW5kbGVFdmVudDphLmhhbmRsZUV2ZW50P2EuaGFuZGxlRXZlbnQ6QmZ9KTt0aGlzLkhjPWEuaGFuZGxlRG93bkV2ZW50P2EuaGFuZGxlRG93bkV2ZW50OnRlO3RoaXMuSWM9YS5oYW5kbGVEcmFnRXZlbnQ/YS5oYW5kbGVEcmFnRXZlbnQ6bmE7dGhpcy5KYz1hLmhhbmRsZU1vdmVFdmVudD9hLmhhbmRsZU1vdmVFdmVudDpuYTt0aGlzLllmPWEuaGFuZGxlVXBFdmVudD9hLmhhbmRsZVVwRXZlbnQ6dGU7dGhpcy52PSExO3RoaXMuWD17fTt0aGlzLmk9W119dChBZixtZik7ZnVuY3Rpb24gQ2YoYSl7Zm9yKHZhciBiPWEubGVuZ3RoLGM9MCxkPTAsZT0wO2U8YjtlKyspYys9YVtlXS5jbGllbnRYLGQrPWFbZV0uY2xpZW50WTtyZXR1cm5bYy9iLGQvYl19XG5mdW5jdGlvbiBCZihhKXtpZighKGEgaW5zdGFuY2VvZiBzZCkpcmV0dXJuITA7dmFyIGI9ITEsYz1hLnR5cGU7aWYoXCJwb2ludGVyZG93blwiPT09Y3x8XCJwb2ludGVyZHJhZ1wiPT09Y3x8XCJwb2ludGVydXBcIj09PWMpe2M9YS5iO3ZhciBkPWMucG9pbnRlcklkLnRvU3RyaW5nKCk7XCJwb2ludGVydXBcIj09YS50eXBlP2RlbGV0ZSB0aGlzLlhbZF06XCJwb2ludGVyZG93blwiPT1hLnR5cGU/dGhpcy5YW2RdPWM6ZCBpbiB0aGlzLlgmJih0aGlzLlhbZF09Yyk7dGhpcy5pPWFiKHRoaXMuWCl9dGhpcy52P1wicG9pbnRlcmRyYWdcIj09YS50eXBlP3RoaXMuSWMoYSk6XCJwb2ludGVydXBcIj09YS50eXBlJiYodGhpcy52PXRoaXMuWWYoYSkmJjA8dGhpcy5pLmxlbmd0aCk6XCJwb2ludGVyZG93blwiPT1hLnR5cGU/KHRoaXMudj1hPXRoaXMuSGMoYSksYj10aGlzLmJiKGEpKTpcInBvaW50ZXJtb3ZlXCI9PWEudHlwZSYmdGhpcy5KYyhhKTtyZXR1cm4hYn1BZi5wcm90b3R5cGUuYmI9ZnVuY3Rpb24oYSl7cmV0dXJuIGF9O2Z1bmN0aW9uIERmKGEpe0FmLmNhbGwodGhpcyx7aGFuZGxlRG93bkV2ZW50OkVmLGhhbmRsZURyYWdFdmVudDpGZixoYW5kbGVVcEV2ZW50OkdmfSk7YT1hP2E6e307dGhpcy5hPWEua2luZXRpYzt0aGlzLmM9bnVsbDt0aGlzLnM9YS5jb25kaXRpb24/YS5jb25kaXRpb246dmY7dGhpcy5nPSExfXQoRGYsQWYpO2Z1bmN0aW9uIEZmKGEpe3ZhciBiPXRoaXMuaSxjPUNmKGIpO2lmKGIubGVuZ3RoPT10aGlzLmwpe2lmKHRoaXMuYSYmdGhpcy5hLmIucHVzaChjWzBdLGNbMV0sRGF0ZS5ub3coKSksdGhpcy5jKXt2YXIgZD10aGlzLmNbMF0tY1swXSxlPWNbMV0tdGhpcy5jWzFdO2E9YS5tYXAuWigpO3ZhciBmPWhmKGEpO2Q9W2QsZV07b2UoZCxmLnJlc29sdXRpb24pO25lKGQsZi5yb3RhdGlvbik7aWUoZCxmLmNlbnRlcik7ZD1hLmEuY2VudGVyKGQpO2EuSmEoZCl9fWVsc2UgdGhpcy5hJiZrZih0aGlzLmEpO3RoaXMuYz1jO3RoaXMubD1iLmxlbmd0aH1cbmZ1bmN0aW9uIEdmKGEpe3ZhciBiPWEubWFwO2E9Yi5aKCk7aWYodGhpcy5pLmxlbmd0aClyZXR1cm4gdGhpcy5hJiZrZih0aGlzLmEpLHRoaXMuYz1udWxsLCEwO2lmKCF0aGlzLmcmJnRoaXMuYSYmbGYodGhpcy5hKSl7dmFyIGM9KC4wNS10aGlzLmEuZikvLS4wMDU7dmFyIGQ9dGhpcy5hLmosZT1hLmJhKCk7ZT1IZihiLGUpO2I9Yi5CYShbZVswXS1jKk1hdGguY29zKGQpLGVbMV0tYypNYXRoLnNpbihkKV0pO2EuYW5pbWF0ZSh7Y2VudGVyOmEuYS5jZW50ZXIoYiksZHVyYXRpb246NTAwLGVhc2luZzpOY30pfWNmKGEsMSwtMSk7cmV0dXJuITF9XG5mdW5jdGlvbiBFZihhKXtpZigwPHRoaXMuaS5sZW5ndGgmJnRoaXMucyhhKSl7dmFyIGI9YS5tYXAuWigpO3RoaXMuYz1udWxsO3RoaXMudnx8Y2YoYiwxLDEpO1RjKGIpWzBdJiZiLkphKGEuZnJhbWVTdGF0ZS52aWV3U3RhdGUuY2VudGVyKTt0aGlzLmEmJmtmKHRoaXMuYSk7dGhpcy5nPTE8dGhpcy5pLmxlbmd0aDtyZXR1cm4hMH1yZXR1cm4hMX1EZi5wcm90b3R5cGUuYmI9dGU7ZnVuY3Rpb24gSWYoYSl7YT1hP2E6e307QWYuY2FsbCh0aGlzLHtoYW5kbGVEb3duRXZlbnQ6SmYsaGFuZGxlRHJhZ0V2ZW50OktmLGhhbmRsZVVwRXZlbnQ6TGZ9KTt0aGlzLmM9YS5jb25kaXRpb24/YS5jb25kaXRpb246c2Y7dGhpcy5hPXZvaWQgMDt0aGlzLmc9dm9pZCAwIT09YS5kdXJhdGlvbj9hLmR1cmF0aW9uOjI1MH10KElmLEFmKTtmdW5jdGlvbiBLZihhKXtpZih5ZihhKSl7dmFyIGI9YS5tYXAsYz1iLlooKTtpZihjLmEucm90YXRpb24hPT1kZSl7Yj1iLnBiKCk7YT1hLnBpeGVsO2E9TWF0aC5hdGFuMihiWzFdLzItYVsxXSxhWzBdLWJbMF0vMik7aWYodm9pZCAwIT09dGhpcy5hKXtiPWEtdGhpcy5hO3ZhciBkPVNjKGMpO25mKGMsZC1iKX10aGlzLmE9YX19fVxuZnVuY3Rpb24gTGYoYSl7aWYoIXlmKGEpKXJldHVybiEwO2E9YS5tYXAuWigpO2NmKGEsMSwtMSk7dmFyIGI9U2MoYSksYz10aGlzLmc7Yj1hLmNvbnN0cmFpblJvdGF0aW9uKGIsMCk7bmYoYSxiLHZvaWQgMCxjKTtyZXR1cm4hMX1mdW5jdGlvbiBKZihhKXtyZXR1cm4geWYoYSkmJnRmKGEpJiZ0aGlzLmMoYSk/KGNmKGEubWFwLlooKSwxLDEpLHRoaXMuYT12b2lkIDAsITApOiExfUlmLnByb3RvdHlwZS5iYj10ZTtmdW5jdGlvbiBNZihhKXt0aGlzLlZhPW51bGw7dGhpcy5mPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dGhpcy5mLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjt0aGlzLmYuY2xhc3NOYW1lPVwib2wtYm94IFwiK2E7dGhpcy5qPXRoaXMuYT10aGlzLmI9bnVsbH10KE1mLGdjKTtNZi5wcm90b3R5cGUubGE9ZnVuY3Rpb24oKXt0aGlzLnNldE1hcChudWxsKX07ZnVuY3Rpb24gTmYoYSl7dmFyIGI9YS5hLGM9YS5qO2E9YS5mLnN0eWxlO2EubGVmdD1NYXRoLm1pbihiWzBdLGNbMF0pK1wicHhcIjthLnRvcD1NYXRoLm1pbihiWzFdLGNbMV0pK1wicHhcIjthLndpZHRoPU1hdGguYWJzKGNbMF0tYlswXSkrXCJweFwiO2EuaGVpZ2h0PU1hdGguYWJzKGNbMV0tYlsxXSkrXCJweFwifVxuTWYucHJvdG90eXBlLnNldE1hcD1mdW5jdGlvbihhKXtpZih0aGlzLmIpe3RoaXMuYi5ILnJlbW92ZUNoaWxkKHRoaXMuZik7dmFyIGI9dGhpcy5mLnN0eWxlO2IubGVmdD1iLnRvcD1iLndpZHRoPWIuaGVpZ2h0PVwiaW5oZXJpdFwifSh0aGlzLmI9YSkmJnRoaXMuYi5ILmFwcGVuZENoaWxkKHRoaXMuZil9O2Z1bmN0aW9uIE9mKGEpe3ZhciBiPWEuYSxjPWEuajtiPVtiLFtiWzBdLGNbMV1dLGMsW2NbMF0sYlsxXV1dLm1hcChhLmIuQmEsYS5iKTtiWzRdPWJbMF0uc2xpY2UoKTthLlZhP2EuVmEuWShbYl0pOmEuVmE9bmV3IHooW2JdKX1NZi5wcm90b3R5cGUuUD1mdW5jdGlvbigpe3JldHVybiB0aGlzLlZhfTtmdW5jdGlvbiBQZihhKXtBZi5jYWxsKHRoaXMse2hhbmRsZURvd25FdmVudDpRZixoYW5kbGVEcmFnRXZlbnQ6UmYsaGFuZGxlVXBFdmVudDpTZn0pO2E9YT9hOnt9O3RoaXMuYT1uZXcgTWYoYS5jbGFzc05hbWV8fFwib2wtZHJhZ2JveFwiKTt0aGlzLnM9dm9pZCAwIT09YS5taW5BcmVhP2EubWluQXJlYTo2NDt0aGlzLmM9bnVsbDt0aGlzLnU9YS5jb25kaXRpb24/YS5jb25kaXRpb246c2U7dGhpcy5sPWEuYm94RW5kQ29uZGl0aW9uP2EuYm94RW5kQ29uZGl0aW9uOlRmfXQoUGYsQWYpO2Z1bmN0aW9uIFRmKGEsYixjKXthPWNbMF0tYlswXTtiPWNbMV0tYlsxXTtyZXR1cm4gYSphK2IqYj49dGhpcy5zfWZ1bmN0aW9uIFJmKGEpe2lmKHlmKGEpKXt2YXIgYj10aGlzLmEsYz1hLnBpeGVsO2IuYT10aGlzLmM7Yi5qPWM7T2YoYik7TmYoYik7dGhpcy5mKG5ldyBVZihWZixhLmNvb3JkaW5hdGUsYSkpfX1QZi5wcm90b3R5cGUuUD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuUCgpfTtcblBmLnByb3RvdHlwZS5nPW5hO2Z1bmN0aW9uIFNmKGEpe2lmKCF5ZihhKSlyZXR1cm4hMDt0aGlzLmEuc2V0TWFwKG51bGwpO3RoaXMubChhLHRoaXMuYyxhLnBpeGVsKSYmKHRoaXMuZyhhKSx0aGlzLmYobmV3IFVmKFdmLGEuY29vcmRpbmF0ZSxhKSkpO3JldHVybiExfWZ1bmN0aW9uIFFmKGEpe2lmKHlmKGEpJiZ0ZihhKSYmdGhpcy51KGEpKXt0aGlzLmM9YS5waXhlbDt0aGlzLmEuc2V0TWFwKGEubWFwKTt2YXIgYj10aGlzLmEsYz10aGlzLmM7Yi5hPXRoaXMuYztiLmo9YztPZihiKTtOZihiKTt0aGlzLmYobmV3IFVmKFhmLGEuY29vcmRpbmF0ZSxhKSk7cmV0dXJuITB9cmV0dXJuITF9dmFyIFhmPVwiYm94c3RhcnRcIixWZj1cImJveGRyYWdcIixXZj1cImJveGVuZFwiO2Z1bmN0aW9uIFVmKGEsYixjKXtpYy5jYWxsKHRoaXMsYSk7dGhpcy5jb29yZGluYXRlPWI7dGhpcy5tYXBCcm93c2VyRXZlbnQ9Y310KFVmLGljKTtmdW5jdGlvbiBZZihhKXthPWE/YTp7fTt2YXIgYj1hLmNvbmRpdGlvbj9hLmNvbmRpdGlvbjp3Zjt0aGlzLkM9dm9pZCAwIT09YS5kdXJhdGlvbj9hLmR1cmF0aW9uOjIwMDt0aGlzLkg9dm9pZCAwIT09YS5vdXQ/YS5vdXQ6ITE7UGYuY2FsbCh0aGlzLHtjb25kaXRpb246YixjbGFzc05hbWU6YS5jbGFzc05hbWV8fFwib2wtZHJhZ3pvb21cIn0pfXQoWWYsUGYpO1xuWWYucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLkQsYj1hLlooKSxjPWEucGIoKSxkPXRoaXMuUCgpLksoKTtpZih0aGlzLkgpe3ZhciBlPWIuVGQoYyk7ZD1bSGYoYSxbZFswXSxkWzFdXSksSGYoYSxbZFsyXSxkWzNdXSldO2E9T2Eodm9pZCAwKTt2YXIgZjt2YXIgZz0wO2ZvcihmPWQubGVuZ3RoO2c8ZjsrK2cpSWEoYSxkW2ddKTthPTEvZ2YoYixhLGMpO2Q9KGVbMl0tZVswXSkvMiooYS0xKTthPShlWzNdLWVbMV0pLzIqKGEtMSk7ZVswXS09ZDtlWzJdKz1kO2VbMV0tPWE7ZVszXSs9YTtkPWV9Yz1iLmNvbnN0cmFpblJlc29sdXRpb24oZ2YoYixkLGMpKTtlPVNhKGQpO2U9Yi5hLmNlbnRlcihlKTtiLmFuaW1hdGUoe3Jlc29sdXRpb246YyxjZW50ZXI6ZSxkdXJhdGlvbjp0aGlzLkMsZWFzaW5nOk5jfSl9O2Z1bmN0aW9uIFpmKGEpe21mLmNhbGwodGhpcyx7aGFuZGxlRXZlbnQ6JGZ9KTthPWF8fHt9O3RoaXMuYT1mdW5jdGlvbihhKXtyZXR1cm4gdmYoYSkmJnhmKGEpfTt0aGlzLmM9YS5jb25kaXRpb24/YS5jb25kaXRpb246dGhpcy5hO3RoaXMuaT12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246MTAwO3RoaXMuZz12b2lkIDAhPT1hLnBpeGVsRGVsdGE/YS5waXhlbERlbHRhOjEyOH10KFpmLG1mKTtcbmZ1bmN0aW9uICRmKGEpe3ZhciBiPSExO2lmKFwia2V5ZG93blwiPT1hLnR5cGUpe3ZhciBjPWEub3JpZ2luYWxFdmVudC5rZXlDb2RlO2lmKHRoaXMuYyhhKSYmKDQwPT1jfHwzNz09Y3x8Mzk9PWN8fDM4PT1jKSl7Yj1hLm1hcC5aKCk7dmFyIGQ9Yi51YSgpKnRoaXMuZyxlPTAsZj0wOzQwPT1jP2Y9LWQ6Mzc9PWM/ZT0tZDozOT09Yz9lPWQ6Zj1kO2Q9W2UsZl07bmUoZCxTYyhiKSk7Yz10aGlzLmk7aWYoZT1iLmJhKCkpZD1iLmEuY2VudGVyKFtlWzBdK2RbMF0sZVsxXStkWzFdXSksYz9iLmFuaW1hdGUoe2R1cmF0aW9uOmMsZWFzaW5nOlBjLGNlbnRlcjpkfSk6Yi5KYShkKTthLnByZXZlbnREZWZhdWx0KCk7Yj0hMH19cmV0dXJuIWJ9O2Z1bmN0aW9uIGFnKGEpe21mLmNhbGwodGhpcyx7aGFuZGxlRXZlbnQ6Ymd9KTthPWE/YTp7fTt0aGlzLmM9YS5jb25kaXRpb24/YS5jb25kaXRpb246eGY7dGhpcy5hPWEuZGVsdGE/YS5kZWx0YToxO3RoaXMuaT12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246MTAwfXQoYWcsbWYpO2Z1bmN0aW9uIGJnKGEpe3ZhciBiPSExO2lmKFwia2V5ZG93blwiPT1hLnR5cGV8fFwia2V5cHJlc3NcIj09YS50eXBlKXt2YXIgYz1hLm9yaWdpbmFsRXZlbnQuY2hhckNvZGU7IXRoaXMuYyhhKXx8NDMhPWMmJjQ1IT1jfHwoYj00Mz09Yz90aGlzLmE6LXRoaXMuYSxjPWEubWFwLlooKSxvZihjLGIsdm9pZCAwLHRoaXMuaSksYS5wcmV2ZW50RGVmYXVsdCgpLGI9ITApfXJldHVybiFifTtmdW5jdGlvbiBjZyhhKXttZi5jYWxsKHRoaXMse2hhbmRsZUV2ZW50OmRnfSk7YT1hfHx7fTt0aGlzLmk9MDt0aGlzLnY9dm9pZCAwIT09YS5kdXJhdGlvbj9hLmR1cmF0aW9uOjI1MDt0aGlzLko9dm9pZCAwIT09YS50aW1lb3V0P2EudGltZW91dDo4MDt0aGlzLlg9dm9pZCAwIT09YS51c2VBbmNob3I/YS51c2VBbmNob3I6ITA7dGhpcy5IPWEuY29uc3RyYWluUmVzb2x1dGlvbnx8ITE7dGhpcy5hPW51bGw7dGhpcy5sPXRoaXMuZz10aGlzLnM9dGhpcy5jPXZvaWQgMH10KGNnLG1mKTtcbmZ1bmN0aW9uIGRnKGEpe3ZhciBiPWEudHlwZTtpZihcIndoZWVsXCIhPT1iJiZcIm1vdXNld2hlZWxcIiE9PWIpcmV0dXJuITA7YS5wcmV2ZW50RGVmYXVsdCgpO2I9YS5tYXA7dmFyIGM9YS5vcmlnaW5hbEV2ZW50O3RoaXMuWCYmKHRoaXMuYT1hLmNvb3JkaW5hdGUpO2lmKFwid2hlZWxcIj09YS50eXBlKXt2YXIgZD1jLmRlbHRhWTtnZCYmYy5kZWx0YU1vZGU9PT1XaGVlbEV2ZW50LkRPTV9ERUxUQV9QSVhFTCYmKGQvPWtkKTtjLmRlbHRhTW9kZT09PVdoZWVsRXZlbnQuRE9NX0RFTFRBX0xJTkUmJihkKj00MCl9ZWxzZVwibW91c2V3aGVlbFwiPT1hLnR5cGUmJihkPS1jLndoZWVsRGVsdGFZLGhkJiYoZC89MykpO2lmKDA9PT1kKXJldHVybiExO2E9RGF0ZS5ub3coKTt2b2lkIDA9PT10aGlzLmMmJih0aGlzLmM9YSk7aWYoIXRoaXMuZ3x8NDAwPGEtdGhpcy5jKXRoaXMuZz00Pk1hdGguYWJzKGQpP2VnOmZnO2lmKHRoaXMuZz09PWVnKXtiPWIuWigpO3RoaXMubD9jbGVhclRpbWVvdXQodGhpcy5sKTpcbmNmKGIsMSwxKTt0aGlzLmw9c2V0VGltZW91dCh0aGlzLnUuYmluZCh0aGlzKSw0MDApO2M9Yi51YSgpKk1hdGgucG93KDIsZC8zMDApO3ZhciBlPWIuRCxmPWIuaSxnPTA7YzxlPyhjPU1hdGgubWF4KGMsZS8xLjUpLGc9MSk6Yz5mJiYoYz1NYXRoLm1pbihjLDEuNSpmKSxnPS0xKTtpZih0aGlzLmEpe3ZhciBoPWRmKGIsYyx0aGlzLmEpO2IuSmEoYi5hLmNlbnRlcihoKSl9V2MoYixjKTshZyYmdGhpcy5IJiZiLmFuaW1hdGUoe3Jlc29sdXRpb246Yi5jb25zdHJhaW5SZXNvbHV0aW9uKGMsMDxkPy0xOjEpLGVhc2luZzpOYyxhbmNob3I6dGhpcy5hLGR1cmF0aW9uOnRoaXMudn0pOzA8Zz9iLmFuaW1hdGUoe3Jlc29sdXRpb246ZSxlYXNpbmc6TmMsYW5jaG9yOnRoaXMuYSxkdXJhdGlvbjo1MDB9KTowPmcmJmIuYW5pbWF0ZSh7cmVzb2x1dGlvbjpmLGVhc2luZzpOYyxhbmNob3I6dGhpcy5hLGR1cmF0aW9uOjUwMH0pO3RoaXMuYz1hO3JldHVybiExfXRoaXMuaSs9ZDtkPU1hdGgubWF4KHRoaXMuSi1cbihhLXRoaXMuYyksMCk7Y2xlYXJUaW1lb3V0KHRoaXMucyk7dGhpcy5zPXNldFRpbWVvdXQodGhpcy5DLmJpbmQodGhpcyxiKSxkKTtyZXR1cm4hMX1jZy5wcm90b3R5cGUudT1mdW5jdGlvbigpe3RoaXMubD12b2lkIDA7Y2YodGhpcy5ELlooKSwxLC0xKX07Y2cucHJvdG90eXBlLkM9ZnVuY3Rpb24oYSl7YT1hLlooKTswPFRjKGEpWzBdJiZVYyhhKTtvZihhLC11YSh0aGlzLmksLTEsMSksdGhpcy5hLHRoaXMudik7dGhpcy5nPXZvaWQgMDt0aGlzLmk9MDt0aGlzLmE9bnVsbDt0aGlzLnM9dGhpcy5jPXZvaWQgMH07dmFyIGVnPVwidHJhY2twYWRcIixmZz1cIndoZWVsXCI7ZnVuY3Rpb24gZ2coYSl7QWYuY2FsbCh0aGlzLHtoYW5kbGVEb3duRXZlbnQ6aGcsaGFuZGxlRHJhZ0V2ZW50OmlnLGhhbmRsZVVwRXZlbnQ6amd9KTthPWF8fHt9O3RoaXMuYz1udWxsO3RoaXMuZz12b2lkIDA7dGhpcy5hPSExO3RoaXMubD0wO3RoaXMudT12b2lkIDAhPT1hLnRocmVzaG9sZD9hLnRocmVzaG9sZDouMzt0aGlzLnM9dm9pZCAwIT09YS5kdXJhdGlvbj9hLmR1cmF0aW9uOjI1MH10KGdnLEFmKTtcbmZ1bmN0aW9uIGlnKGEpe3ZhciBiPTAsYz10aGlzLmlbMF0sZD10aGlzLmlbMV07Yz1NYXRoLmF0YW4yKGQuY2xpZW50WS1jLmNsaWVudFksZC5jbGllbnRYLWMuY2xpZW50WCk7dm9pZCAwIT09dGhpcy5nJiYoYj1jLXRoaXMuZyx0aGlzLmwrPWIsIXRoaXMuYSYmTWF0aC5hYnModGhpcy5sKT50aGlzLnUmJih0aGlzLmE9ITApKTt0aGlzLmc9YzthPWEubWFwO2M9YS5aKCk7aWYoYy5hLnJvdGF0aW9uIT09ZGUpe2Q9YS5hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3ZhciBlPUNmKHRoaXMuaSk7ZVswXS09ZC5sZWZ0O2VbMV0tPWQudG9wO3RoaXMuYz1hLkJhKGUpO3RoaXMuYSYmKGQ9U2MoYyksYS5yZW5kZXIoKSxuZihjLGQrYix0aGlzLmMpKX19XG5mdW5jdGlvbiBqZyhhKXtpZigyPnRoaXMuaS5sZW5ndGgpe2E9YS5tYXAuWigpO2NmKGEsMSwtMSk7aWYodGhpcy5hKXt2YXIgYj1TYyhhKSxjPXRoaXMuYyxkPXRoaXMucztiPWEuY29uc3RyYWluUm90YXRpb24oYiwwKTtuZihhLGIsYyxkKX1yZXR1cm4hMX1yZXR1cm4hMH1mdW5jdGlvbiBoZyhhKXtyZXR1cm4gMjw9dGhpcy5pLmxlbmd0aD8oYT1hLm1hcCx0aGlzLmM9bnVsbCx0aGlzLmc9dm9pZCAwLHRoaXMuYT0hMSx0aGlzLmw9MCx0aGlzLnZ8fGNmKGEuWigpLDEsMSksITApOiExfWdnLnByb3RvdHlwZS5iYj10ZTtmdW5jdGlvbiBrZyhhKXtBZi5jYWxsKHRoaXMse2hhbmRsZURvd25FdmVudDpsZyxoYW5kbGVEcmFnRXZlbnQ6bWcsaGFuZGxlVXBFdmVudDpuZ30pO2E9YT9hOnt9O3RoaXMubD1hLmNvbnN0cmFpblJlc29sdXRpb258fCExO3RoaXMuYz1udWxsO3RoaXMucz12b2lkIDAhPT1hLmR1cmF0aW9uP2EuZHVyYXRpb246NDAwO3RoaXMuYT12b2lkIDA7dGhpcy5nPTF9dChrZyxBZik7XG5mdW5jdGlvbiBtZyhhKXt2YXIgYj0xLGM9dGhpcy5pWzBdLGQ9dGhpcy5pWzFdLGU9Yy5jbGllbnRYLWQuY2xpZW50WDtjPWMuY2xpZW50WS1kLmNsaWVudFk7ZT1NYXRoLnNxcnQoZSplK2MqYyk7dm9pZCAwIT09dGhpcy5hJiYoYj10aGlzLmEvZSk7dGhpcy5hPWU7YT1hLm1hcDtlPWEuWigpO2Q9ZS51YSgpO3ZhciBmPWUuaSxnPWUuRDtjPWQqYjtjPmY/KGI9Zi9kLGM9Zik6YzxnJiYoYj1nL2QsYz1nKTsxIT1iJiYodGhpcy5nPWIpO2I9YS5hLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2Q9Q2YodGhpcy5pKTtkWzBdLT1iLmxlZnQ7ZFsxXS09Yi50b3A7dGhpcy5jPWEuQmEoZCk7YS5yZW5kZXIoKTtwZihlLGMsdGhpcy5jKX1cbmZ1bmN0aW9uIG5nKGEpe2lmKDI+dGhpcy5pLmxlbmd0aCl7YT1hLm1hcC5aKCk7Y2YoYSwxLC0xKTt2YXIgYj1hLnVhKCk7aWYodGhpcy5sfHxiPGEuRHx8Yj5hLmkpe3ZhciBjPXRoaXMuYyxkPXRoaXMucztiPWEuY29uc3RyYWluUmVzb2x1dGlvbihiLDAsdGhpcy5nLTEpO3BmKGEsYixjLGQpfXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIGxnKGEpe3JldHVybiAyPD10aGlzLmkubGVuZ3RoPyhhPWEubWFwLHRoaXMuYz1udWxsLHRoaXMuYT12b2lkIDAsdGhpcy5nPTEsdGhpcy52fHxjZihhLlooKSwxLDEpLCEwKTohMX1rZy5wcm90b3R5cGUuYmI9dGU7ZnVuY3Rpb24gb2coYSl7bmMuY2FsbCh0aGlzKTt2YXIgYj1aYSh7fSxhKTtiLm9wYWNpdHk9dm9pZCAwIT09YS5vcGFjaXR5P2Eub3BhY2l0eToxO2IudmlzaWJsZT12b2lkIDAhPT1hLnZpc2libGU/YS52aXNpYmxlOiEwO2IuekluZGV4PXZvaWQgMCE9PWEuekluZGV4P2EuekluZGV4OjA7Yi5tYXhSZXNvbHV0aW9uPXZvaWQgMCE9PWEubWF4UmVzb2x1dGlvbj9hLm1heFJlc29sdXRpb246SW5maW5pdHk7Yi5taW5SZXNvbHV0aW9uPXZvaWQgMCE9PWEubWluUmVzb2x1dGlvbj9hLm1pblJlc29sdXRpb246MDt0aGlzLnFhKGIpO3RoaXMuYT17bGF5ZXI6dGhpcyxmZDohMH19dChvZyxuYyk7XG5mdW5jdGlvbiBwZyhhKXthLmEub3BhY2l0eT11YShhLmdldChcIm9wYWNpdHlcIiksMCwxKTthLmEuTGk9YS5iZCgpO2EuYS52aXNpYmxlPWEubCgpO2EuYS5leHRlbnQ9YS5LKCk7YS5hLnpJbmRleD1hLnBhKCk7YS5hLm1heFJlc29sdXRpb249YS5nZXQoXCJtYXhSZXNvbHV0aW9uXCIpO2EuYS5taW5SZXNvbHV0aW9uPU1hdGgubWF4KGEuZ2V0KFwibWluUmVzb2x1dGlvblwiKSwwKTtyZXR1cm4gYS5hfW9nLnByb3RvdHlwZS5LPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwiZXh0ZW50XCIpfTtvZy5wcm90b3R5cGUubD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInZpc2libGVcIil9O29nLnByb3RvdHlwZS5wYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInpJbmRleFwiKX07b2cucHJvdG90eXBlLkM9ZnVuY3Rpb24oYSl7dGhpcy5zZXQoXCJ2aXNpYmxlXCIsYSl9O2Z1bmN0aW9uIHFnKGEpe3ZhciBiPWF8fHt9O2E9WmEoe30sYik7ZGVsZXRlIGEubGF5ZXJzO2I9Yi5sYXllcnM7b2cuY2FsbCh0aGlzLGEpO3RoaXMuaT1bXTt0aGlzLmM9e307eSh0aGlzLHBjKHJnKSx0aGlzLndnLHRoaXMpO2I/QXJyYXkuaXNBcnJheShiKT9iPW5ldyBzYyhiLnNsaWNlKCkse3VuaXF1ZTohMH0pOncoYiBpbnN0YW5jZW9mIHNjLDQzKTpiPW5ldyBzYyh2b2lkIDAse3VuaXF1ZTohMH0pO3RoaXMuc2V0KHJnLGIpfXQocWcsb2cpO2w9cWcucHJvdG90eXBlO2wuTmM9ZnVuY3Rpb24oKXt9O2wuZWM9ZnVuY3Rpb24oKXt0aGlzLmIoKX07XG5sLndnPWZ1bmN0aW9uKCl7dGhpcy5pLmZvckVhY2goWmIpO3RoaXMuaS5sZW5ndGg9MDt2YXIgYT10aGlzLmdldChyZyk7dGhpcy5pLnB1c2goeShhLFwiYWRkXCIsdGhpcy52Zyx0aGlzKSx5KGEsXCJyZW1vdmVcIix0aGlzLnhnLHRoaXMpKTtmb3IodmFyIGIgaW4gdGhpcy5jKXRoaXMuY1tiXS5mb3JFYWNoKFpiKTskYSh0aGlzLmMpO2E9YS5hO3ZhciBjO2I9MDtmb3IoYz1hLmxlbmd0aDtiPGM7YisrKXt2YXIgZD1hW2JdO3RoaXMuY1t2KGQpLnRvU3RyaW5nKCldPVt5KGQsXCJwcm9wZXJ0eWNoYW5nZVwiLHRoaXMuZWMsdGhpcykseShkLFwiY2hhbmdlXCIsdGhpcy5lYyx0aGlzKV19dGhpcy5iKCl9O2wudmc9ZnVuY3Rpb24oYSl7YT1hLmVsZW1lbnQ7dmFyIGI9dihhKS50b1N0cmluZygpO3RoaXMuY1tiXT1beShhLFwicHJvcGVydHljaGFuZ2VcIix0aGlzLmVjLHRoaXMpLHkoYSxcImNoYW5nZVwiLHRoaXMuZWMsdGhpcyldO3RoaXMuYigpfTtcbmwueGc9ZnVuY3Rpb24oYSl7YT12KGEuZWxlbWVudCkudG9TdHJpbmcoKTt0aGlzLmNbYV0uZm9yRWFjaChaYik7ZGVsZXRlIHRoaXMuY1thXTt0aGlzLmIoKX07bC5ZYz1mdW5jdGlvbihhKXt2YXIgYj12b2lkIDAhPT1hP2E6W10sYz1iLmxlbmd0aDt0aGlzLmdldChyZykuZm9yRWFjaChmdW5jdGlvbihhKXthLlljKGIpfSk7YT1wZyh0aGlzKTt2YXIgZDtmb3IoZD1iLmxlbmd0aDtjPGQ7YysrKXt2YXIgZT1iW2NdO2Uub3BhY2l0eSo9YS5vcGFjaXR5O2UudmlzaWJsZT1lLnZpc2libGUmJmEudmlzaWJsZTtlLm1heFJlc29sdXRpb249TWF0aC5taW4oZS5tYXhSZXNvbHV0aW9uLGEubWF4UmVzb2x1dGlvbik7ZS5taW5SZXNvbHV0aW9uPU1hdGgubWF4KGUubWluUmVzb2x1dGlvbixhLm1pblJlc29sdXRpb24pO3ZvaWQgMCE9PWEuZXh0ZW50JiYoZS5leHRlbnQ9dm9pZCAwIT09ZS5leHRlbnQ/VWEoZS5leHRlbnQsYS5leHRlbnQpOmEuZXh0ZW50KX1yZXR1cm4gYn07bC5iZD1mdW5jdGlvbigpe3JldHVyblwicmVhZHlcIn07XG52YXIgcmc9XCJsYXllcnNcIjtmdW5jdGlvbiBzZyhhKXt2YXIgYj1aYSh7fSxhKTtkZWxldGUgYi5zb3VyY2U7b2cuY2FsbCh0aGlzLGIpO3RoaXMuZz10aGlzLmk9dGhpcy5jPW51bGw7YS5tYXAmJnRoaXMuc2V0TWFwKGEubWFwKTt5KHRoaXMscGMoXCJzb3VyY2VcIiksdGhpcy5KZyx0aGlzKTt0aGlzLmJmKGEuc291cmNlP2Euc291cmNlOm51bGwpfXQoc2csb2cpO2w9c2cucHJvdG90eXBlO2wuWWM9ZnVuY3Rpb24oYSl7YT1hP2E6W107YS5wdXNoKHBnKHRoaXMpKTtyZXR1cm4gYX07bC5jYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInNvdXJjZVwiKXx8bnVsbH07bC5iZD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuY2EoKTtyZXR1cm4gYT9hLmdhOlwidW5kZWZpbmVkXCJ9O2wuSWc9ZnVuY3Rpb24oKXt0aGlzLmIoKX07bC5KZz1mdW5jdGlvbigpe3RoaXMuZyYmKFpiKHRoaXMuZyksdGhpcy5nPW51bGwpO3ZhciBhPXRoaXMuY2EoKTthJiYodGhpcy5nPXkoYSxcImNoYW5nZVwiLHRoaXMuSWcsdGhpcykpO3RoaXMuYigpfTtcbmwuc2V0TWFwPWZ1bmN0aW9uKGEpe3RoaXMuYyYmKFpiKHRoaXMuYyksdGhpcy5jPW51bGwpO2F8fHRoaXMuYigpO3RoaXMuaSYmKFpiKHRoaXMuaSksdGhpcy5pPW51bGwpO2EmJih0aGlzLmM9eShhLFwicHJlY29tcG9zZVwiLGZ1bmN0aW9uKGEpe3ZhciBiPXBnKHRoaXMpO2IuZmQ9ITE7Yi56SW5kZXg9SW5maW5pdHk7YS5mcmFtZVN0YXRlLmxheWVyU3RhdGVzQXJyYXkucHVzaChiKTthLmZyYW1lU3RhdGUubGF5ZXJTdGF0ZXNbdih0aGlzKV09Yn0sdGhpcyksdGhpcy5pPXkodGhpcyxcImNoYW5nZVwiLGEucmVuZGVyLGEpLHRoaXMuYigpKX07bC5iZj1mdW5jdGlvbihhKXt0aGlzLnNldChcInNvdXJjZVwiLGEpfTtmdW5jdGlvbiB0Zygpe3RoaXMuYj17fTt0aGlzLmY9MH10Zy5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmI9e307dGhpcy5mPTB9O3RnLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oYSxiLGMpe2E9YitcIjpcIithK1wiOlwiKyhjP0RjKGMpOlwibnVsbFwiKTtyZXR1cm4gYSBpbiB0aGlzLmI/dGhpcy5iW2FdOm51bGx9O3RnLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiLGMsZCl7dGhpcy5iW2IrXCI6XCIrYStcIjpcIisoYz9EYyhjKTpcIm51bGxcIildPWQ7Kyt0aGlzLmZ9O3ZhciB1Zz1uZXcgdGc7ZnVuY3Rpb24gdmcoKXtyZXR1cm5bMSwwLDAsMSwwLDBdfWZ1bmN0aW9uIHdnKGEsYil7YVswXT1iWzBdO2FbMV09YlsxXTthWzJdPWJbMl07YVszXT1iWzNdO2FbNF09Yls0XTthWzVdPWJbNV07cmV0dXJuIGF9ZnVuY3Rpb24geGcoYSxiKXt2YXIgYz1iWzBdLGQ9YlsxXTtiWzBdPWFbMF0qYythWzJdKmQrYVs0XTtiWzFdPWFbMV0qYythWzNdKmQrYVs1XTtyZXR1cm4gYn1mdW5jdGlvbiB5ZyhhLGIsYyxkLGUsZixnLGgpe3ZhciBrPU1hdGguc2luKGYpO2Y9TWF0aC5jb3MoZik7YVswXT1kKmY7YVsxXT1lKms7YVsyXT0tZCprO2FbM109ZSpmO2FbNF09ZypkKmYtaCpkKmsrYjthWzVdPWcqZSprK2gqZSpmK2M7cmV0dXJuIGF9O2Z1bmN0aW9uIHpnKGEsYil7dGhpcy5pPWI7dGhpcy5mPXt9O3RoaXMuYT17fX10KHpnLGdjKTt6Zy5wcm90b3R5cGUubGE9ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5mKWhjKHRoaXMuZlthXSl9O2Z1bmN0aW9uIEFnKCl7aWYoMzI8dWcuZil7dmFyIGE9MCxiO2ZvcihiIGluIHVnLmIpe3ZhciBjPXVnLmJbYl07YSsrJjN8fGxjKGMpfHwoZGVsZXRlIHVnLmJbYl0sLS11Zy5mKX19fVxuZnVuY3Rpb24gQmcoYSxiLGMsZCxlLGYpe2Z1bmN0aW9uIGcoYSxiKXt2YXIgZD12KGEpLnRvU3RyaW5nKCksZj1jLmxheWVyU3RhdGVzW3YoYildLmZkO2lmKCEoZCBpbiBjLnNraXBwZWRGZWF0dXJlVWlkcyl8fGYpcmV0dXJuIGUuY2FsbChudWxsLGEsZj9iOm51bGwpfXZhciBoLGs9Yy52aWV3U3RhdGUsbT1rLnJlc29sdXRpb24sbj1rLnByb2plY3Rpb247az1iO2lmKG4uYSl7bj1uLksoKTt2YXIgcD1YYShuKSxyPWJbMF07aWYocjxuWzBdfHxyPm5bMl0paz1bcitwKk1hdGguY2VpbCgoblswXS1yKS9wKSxiWzFdXX1uPWMubGF5ZXJTdGF0ZXNBcnJheTtmb3IocD1uLmxlbmd0aC0xOzA8PXA7LS1wKXt2YXIgdT1uW3BdO3I9dS5sYXllcjtpZih1LnZpc2libGUmJm0+PXUubWluUmVzb2x1dGlvbiYmbTx1Lm1heFJlc29sdXRpb24mJmYuY2FsbChudWxsLHIpJiYodT1DZyhhLHIpLHIuY2EoKSYmKGg9dS5sKHIuY2EoKS5EP2s6YixjLGQsZyxudWxsKSksaCkpcmV0dXJuIGh9fVxuZnVuY3Rpb24gQ2coYSxiKXt2YXIgYz12KGIpLnRvU3RyaW5nKCk7aWYoYyBpbiBhLmYpcmV0dXJuIGEuZltjXTtiPWIuTmMoYSk7YS5mW2NdPWI7YS5hW2NdPXkoYixcImNoYW5nZVwiLGEuQixhKTtyZXR1cm4gYn16Zy5wcm90b3R5cGUuQj1mdW5jdGlvbigpe3RoaXMuaS5yZW5kZXIoKX07emcucHJvdG90eXBlLmc9bmE7emcucHJvdG90eXBlLnM9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMgaW4gdGhpcy5mKWlmKCEoYiYmYyBpbiBiLmxheWVyU3RhdGVzKSl7YT1jO3ZhciBkPXRoaXMuZlthXTtkZWxldGUgdGhpcy5mW2FdO1piKHRoaXMuYVthXSk7ZGVsZXRlIHRoaXMuYVthXTtoYyhkKX19O2Z1bmN0aW9uIGxhKGEsYil7cmV0dXJuIGEuekluZGV4LWIuekluZGV4fTtmdW5jdGlvbiBEZyhhLGIsYyxkLGUpe2ljLmNhbGwodGhpcyxhKTt0aGlzLnZlY3RvckNvbnRleHQ9Yjt0aGlzLmZyYW1lU3RhdGU9Yzt0aGlzLmNvbnRleHQ9ZDt0aGlzLmdsQ29udGV4dD1lfXQoRGcsaWMpO3ZhciBFZz1bMCwwLDAsMV0sRmc9W10sR2c9WzAsMCwwLDFdO2Z1bmN0aW9uIEhnKGEsYixjLGQpe2ImJihhLnRyYW5zbGF0ZShjLGQpLGEucm90YXRlKGIpLGEudHJhbnNsYXRlKC1jLC1kKSl9O2Z1bmN0aW9uIElnKCl7fWw9SWcucHJvdG90eXBlO2wuWGQ9ZnVuY3Rpb24oKXt9O2wuT2M9ZnVuY3Rpb24oKXt9O2wuUGM9ZnVuY3Rpb24oKXt9O2wuUWM9ZnVuY3Rpb24oKXt9O2wuUmM9ZnVuY3Rpb24oKXt9O2wuU2M9ZnVuY3Rpb24oKXt9O2wuVGM9ZnVuY3Rpb24oKXt9O2wuVWM9ZnVuY3Rpb24oKXt9O2wuUGE9ZnVuY3Rpb24oKXt9O2wuU2E9ZnVuY3Rpb24oKXt9O2wud2M9ZnVuY3Rpb24oKXt9O2wuTWE9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIEpnKGEsYixjLGQsZSl7dGhpcy5qPWE7dGhpcy5pPWI7dGhpcy5jPWM7dGhpcy5EPWQ7dGhpcy5GYT1lO3RoaXMuTj10aGlzLmI9dGhpcy5mPXRoaXMuemE9dGhpcy5IPXRoaXMud2E9bnVsbDt0aGlzLlg9dGhpcy5KPXRoaXMucz10aGlzLkM9dGhpcy51PXRoaXMudj0wO3RoaXMuVj0hMTt0aGlzLmE9dGhpcy4kPTA7dGhpcy5LYT0hMTt0aGlzLmVhPTA7dGhpcy5kYT1cIlwiO3RoaXMua2E9dGhpcy5nYT0wO3RoaXMudmI9ITE7dGhpcy5CPXRoaXMuc2E9MDt0aGlzLmZhPXRoaXMubD10aGlzLmc9bnVsbDt0aGlzLkw9W107dGhpcy5EYT12ZygpfXQoSmcsSWcpO1xuZnVuY3Rpb24gS2coYSxiLGMpe2lmKGEuTil7Yj12ZShiLDAsYywyLGEuRCxhLkwpO2M9YS5qO3ZhciBkPWEuRGEsZT1jLmdsb2JhbEFscGhhOzEhPWEucyYmKGMuZ2xvYmFsQWxwaGE9ZSphLnMpO3ZhciBmPWEuJDthLlYmJihmKz1hLkZhKTt2YXIgZzt2YXIgaD0wO2ZvcihnPWIubGVuZ3RoO2g8ZztoKz0yKXt2YXIgaz1iW2hdLWEudixtPWJbaCsxXS1hLnU7YS5LYSYmKGs9TWF0aC5yb3VuZChrKSxtPU1hdGgucm91bmQobSkpO2lmKGZ8fDEhPWEuYSl7dmFyIG49aythLnYscD1tK2EudTt5ZyhkLG4scCxhLmEsYS5hLGYsLW4sLXApO2Muc2V0VHJhbnNmb3JtLmFwcGx5KGMsZCl9Yy5kcmF3SW1hZ2UoYS5OLGEuSixhLlgsYS5lYSxhLkMsayxtLGEuZWEsYS5DKX0oZnx8MSE9YS5hKSYmYy5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApOzEhPWEucyYmKGMuZ2xvYmFsQWxwaGE9ZSl9fVxuZnVuY3Rpb24gTGcoYSxiLGMsZCl7dmFyIGU9MDtpZihhLmZhJiZcIlwiIT09YS5kYSl7YS5nJiZNZyhhLGEuZyk7YS5sJiZOZyhhLGEubCk7dmFyIGY9YS5mYSxnPWEuaixoPWEuemE7aD8oaC5mb250IT1mLmZvbnQmJihoLmZvbnQ9Zy5mb250PWYuZm9udCksaC50ZXh0QWxpZ24hPWYudGV4dEFsaWduJiYoaC50ZXh0QWxpZ249Zy50ZXh0QWxpZ249Zi50ZXh0QWxpZ24pLGgudGV4dEJhc2VsaW5lIT1mLnRleHRCYXNlbGluZSYmKGgudGV4dEJhc2VsaW5lPWcudGV4dEJhc2VsaW5lPWYudGV4dEJhc2VsaW5lKSk6KGcuZm9udD1mLmZvbnQsZy50ZXh0QWxpZ249Zi50ZXh0QWxpZ24sZy50ZXh0QmFzZWxpbmU9Zi50ZXh0QmFzZWxpbmUsYS56YT17Zm9udDpmLmZvbnQsdGV4dEFsaWduOmYudGV4dEFsaWduLHRleHRCYXNlbGluZTpmLnRleHRCYXNlbGluZX0pO2I9dmUoYixlLGMsZCxhLkQsYS5MKTtmPWEuajtnPWEuc2E7Zm9yKGEudmImJihnKz1hLkZhKTtlPGM7ZSs9ZCl7aD1iW2VdK2EuZ2E7XG52YXIgaz1iW2UrMV0rYS5rYTtpZihnfHwxIT1hLkIpe3ZhciBtPXlnKGEuRGEsaCxrLGEuQixhLkIsZywtaCwtayk7Zi5zZXRUcmFuc2Zvcm0uYXBwbHkoZixtKX1hLmwmJmYuc3Ryb2tlVGV4dChhLmRhLGgsayk7YS5nJiZmLmZpbGxUZXh0KGEuZGEsaCxrKX0oZ3x8MSE9YS5CKSYmZi5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApfX1mdW5jdGlvbiBPZyhhLGIsYyxkLGUsZil7dmFyIGc9YS5qO2E9dmUoYixjLGQsZSxhLkQsYS5MKTtnLm1vdmVUbyhhWzBdLGFbMV0pO2I9YS5sZW5ndGg7ZiYmKGItPTIpO2ZvcihjPTI7YzxiO2MrPTIpZy5saW5lVG8oYVtjXSxhW2MrMV0pO2YmJmcuY2xvc2VQYXRoKCk7cmV0dXJuIGR9ZnVuY3Rpb24gUGcoYSxiLGMsZCxlKXt2YXIgZjt2YXIgZz0wO2ZvcihmPWQubGVuZ3RoO2c8ZjsrK2cpYz1PZyhhLGIsYyxkW2ddLGUsITApO3JldHVybiBjfWw9SmcucHJvdG90eXBlO1xubC5PYz1mdW5jdGlvbihhKXtpZihWYSh0aGlzLmMsYS5LKCkpKXtpZih0aGlzLmZ8fHRoaXMuYil7dGhpcy5mJiZNZyh0aGlzLHRoaXMuZik7dGhpcy5iJiZOZyh0aGlzLHRoaXMuYik7dmFyIGI9KGI9YS5vKT92ZShiLDAsYi5sZW5ndGgsYS5BLHRoaXMuRCx0aGlzLkwpOm51bGw7dmFyIGM9YlsyXS1iWzBdLGQ9YlszXS1iWzFdO2M9TWF0aC5zcXJ0KGMqYytkKmQpO2Q9dGhpcy5qO2QuYmVnaW5QYXRoKCk7ZC5hcmMoYlswXSxiWzFdLGMsMCwyKk1hdGguUEkpO3RoaXMuZiYmZC5maWxsKCk7dGhpcy5iJiZkLnN0cm9rZSgpfVwiXCIhPT10aGlzLmRhJiZMZyh0aGlzLGEuYmEoKSwyLDIpfX07bC5UYz1mdW5jdGlvbihhKXt2YXIgYj1hLm87YT1hLkE7dGhpcy5OJiZLZyh0aGlzLGIsYi5sZW5ndGgpO1wiXCIhPT10aGlzLmRhJiZMZyh0aGlzLGIsYi5sZW5ndGgsYSl9O1xubC5SYz1mdW5jdGlvbihhKXt2YXIgYj1hLm87YT1hLkE7dGhpcy5OJiZLZyh0aGlzLGIsYi5sZW5ndGgpO1wiXCIhPT10aGlzLmRhJiZMZyh0aGlzLGIsYi5sZW5ndGgsYSl9O2wuUGM9ZnVuY3Rpb24oYSl7aWYoVmEodGhpcy5jLGEuSygpKSl7aWYodGhpcy5iKXtOZyh0aGlzLHRoaXMuYik7dmFyIGI9dGhpcy5qLGM9YS5vO2IuYmVnaW5QYXRoKCk7T2codGhpcyxjLDAsYy5sZW5ndGgsYS5BLCExKTtiLnN0cm9rZSgpfVwiXCIhPT10aGlzLmRhJiYoYT1RZyhhKSxMZyh0aGlzLGEsMiwyKSl9fTtcbmwuUWM9ZnVuY3Rpb24oYSl7dmFyIGI9YS5LKCk7aWYoVmEodGhpcy5jLGIpKXtpZih0aGlzLmIpe05nKHRoaXMsdGhpcy5iKTtiPXRoaXMuajt2YXIgYz1hLm8sZD0wLGU9YS5RYSgpLGY9YS5BO2IuYmVnaW5QYXRoKCk7dmFyIGc7dmFyIGg9MDtmb3IoZz1lLmxlbmd0aDtoPGc7KytoKWQ9T2codGhpcyxjLGQsZVtoXSxmLCExKTtiLnN0cm9rZSgpfVwiXCIhPT10aGlzLmRhJiYoYT1SZyhhKSxMZyh0aGlzLGEsYS5sZW5ndGgsMikpfX07bC5VYz1mdW5jdGlvbihhKXtpZihWYSh0aGlzLmMsYS5LKCkpKXtpZih0aGlzLmJ8fHRoaXMuZil7dGhpcy5mJiZNZyh0aGlzLHRoaXMuZik7dGhpcy5iJiZOZyh0aGlzLHRoaXMuYik7dmFyIGI9dGhpcy5qO2IuYmVnaW5QYXRoKCk7UGcodGhpcyxZZShhKSwwLGEuUWEoKSxhLkEpO3RoaXMuZiYmYi5maWxsKCk7dGhpcy5iJiZiLnN0cm9rZSgpfVwiXCIhPT10aGlzLmRhJiYoYT1aZShhKSxMZyh0aGlzLGEsMiwyKSl9fTtcbmwuU2M9ZnVuY3Rpb24oYSl7aWYoVmEodGhpcy5jLGEuSygpKSl7aWYodGhpcy5ifHx0aGlzLmYpe3RoaXMuZiYmTWcodGhpcyx0aGlzLmYpO3RoaXMuYiYmTmcodGhpcyx0aGlzLmIpO3ZhciBiPXRoaXMuaixjPVNnKGEpLGQ9MCxlPWEuYSxmPWEuQSxnO2IuYmVnaW5QYXRoKCk7dmFyIGg9MDtmb3IoZz1lLmxlbmd0aDtoPGc7KytoKWQ9UGcodGhpcyxjLGQsZVtoXSxmKTt0aGlzLmYmJmIuZmlsbCgpO3RoaXMuYiYmYi5zdHJva2UoKX1cIlwiIT09dGhpcy5kYSYmKGE9VGcoYSksTGcodGhpcyxhLGEubGVuZ3RoLDIpKX19O2Z1bmN0aW9uIE1nKGEsYil7dmFyIGM9YS5qLGQ9YS53YTtkP2QuZmlsbFN0eWxlIT1iLmZpbGxTdHlsZSYmKGQuZmlsbFN0eWxlPWMuZmlsbFN0eWxlPWIuZmlsbFN0eWxlKTooYy5maWxsU3R5bGU9Yi5maWxsU3R5bGUsYS53YT17ZmlsbFN0eWxlOmIuZmlsbFN0eWxlfSl9XG5mdW5jdGlvbiBOZyhhLGIpe3ZhciBjPWEuaixkPWEuSDtkPyhkLmxpbmVDYXAhPWIubGluZUNhcCYmKGQubGluZUNhcD1jLmxpbmVDYXA9Yi5saW5lQ2FwKSxsZCYmKGphKGQubGluZURhc2gsYi5saW5lRGFzaCl8fGMuc2V0TGluZURhc2goZC5saW5lRGFzaD1iLmxpbmVEYXNoKSxkLmxpbmVEYXNoT2Zmc2V0IT1iLmxpbmVEYXNoT2Zmc2V0JiYoZC5saW5lRGFzaE9mZnNldD1jLmxpbmVEYXNoT2Zmc2V0PWIubGluZURhc2hPZmZzZXQpKSxkLmxpbmVKb2luIT1iLmxpbmVKb2luJiYoZC5saW5lSm9pbj1jLmxpbmVKb2luPWIubGluZUpvaW4pLGQubGluZVdpZHRoIT1iLmxpbmVXaWR0aCYmKGQubGluZVdpZHRoPWMubGluZVdpZHRoPWIubGluZVdpZHRoKSxkLm1pdGVyTGltaXQhPWIubWl0ZXJMaW1pdCYmKGQubWl0ZXJMaW1pdD1jLm1pdGVyTGltaXQ9Yi5taXRlckxpbWl0KSxkLnN0cm9rZVN0eWxlIT1iLnN0cm9rZVN0eWxlJiYoZC5zdHJva2VTdHlsZT1jLnN0cm9rZVN0eWxlPWIuc3Ryb2tlU3R5bGUpKTpcbihjLmxpbmVDYXA9Yi5saW5lQ2FwLGxkJiYoYy5zZXRMaW5lRGFzaChiLmxpbmVEYXNoKSxjLmxpbmVEYXNoT2Zmc2V0PWIubGluZURhc2hPZmZzZXQpLGMubGluZUpvaW49Yi5saW5lSm9pbixjLmxpbmVXaWR0aD1iLmxpbmVXaWR0aCxjLm1pdGVyTGltaXQ9Yi5taXRlckxpbWl0LGMuc3Ryb2tlU3R5bGU9Yi5zdHJva2VTdHlsZSxhLkg9e2xpbmVDYXA6Yi5saW5lQ2FwLGxpbmVEYXNoOmIubGluZURhc2gsbGluZURhc2hPZmZzZXQ6Yi5saW5lRGFzaE9mZnNldCxsaW5lSm9pbjpiLmxpbmVKb2luLGxpbmVXaWR0aDpiLmxpbmVXaWR0aCxtaXRlckxpbWl0OmIubWl0ZXJMaW1pdCxzdHJva2VTdHlsZTpiLnN0cm9rZVN0eWxlfSl9XG5sLlNhPWZ1bmN0aW9uKGEsYil7YT8oYT1hLmIsdGhpcy5mPXtmaWxsU3R5bGU6R2MoYT9hOkVnKX0pOnRoaXMuZj1udWxsO2lmKGIpe2E9Yi5iO3ZhciBjPWIuYyxkPWIuZixlPWIuaSxmPWIuZyxnPWIuYTtiPWIuQjt0aGlzLmI9e2xpbmVDYXA6dm9pZCAwIT09Yz9jOlwicm91bmRcIixsaW5lRGFzaDpkP2Q6RmcsbGluZURhc2hPZmZzZXQ6ZT9lOjAsbGluZUpvaW46dm9pZCAwIT09Zj9mOlwicm91bmRcIixsaW5lV2lkdGg6dGhpcy5pKih2b2lkIDAhPT1nP2c6MSksbWl0ZXJMaW1pdDp2b2lkIDAhPT1iP2I6MTAsc3Ryb2tlU3R5bGU6R2MoYT9hOkdnKX19ZWxzZSB0aGlzLmI9bnVsbH07XG5sLndjPWZ1bmN0aW9uKGEpe2lmKGEpe3ZhciBiPWEuJGIoKSxjPWEuaGEoMSksZD1hLm9jKCksZT1hLnFiKCk7dGhpcy52PWJbMF07dGhpcy51PWJbMV07dGhpcy5DPWVbMV07dGhpcy5OPWM7dGhpcy5zPWEuYzt0aGlzLko9ZFswXTt0aGlzLlg9ZFsxXTt0aGlzLlY9YS52O3RoaXMuJD1hLmw7dGhpcy5hPWEuYSp0aGlzLmk7dGhpcy5LYT1hLnM7dGhpcy5lYT1lWzBdfWVsc2UgdGhpcy5OPW51bGx9O1xubC5NYT1mdW5jdGlvbihhKXtpZihhKXt2YXIgYj1hLnJhKCk7Yj8oYj1iLmIsdGhpcy5nPXtmaWxsU3R5bGU6R2MoYj9iOkVnKX0pOnRoaXMuZz1udWxsO3ZhciBjPWEubmEoKTtpZihjKXtiPWMuYjt2YXIgZD1jLmMsZT1jLmYsZj1jLmksZz1jLmcsaD1jLmE7Yz1jLkI7dGhpcy5sPXtsaW5lQ2FwOnZvaWQgMCE9PWQ/ZDpcInJvdW5kXCIsbGluZURhc2g6ZT9lOkZnLGxpbmVEYXNoT2Zmc2V0OmY/ZjowLGxpbmVKb2luOnZvaWQgMCE9PWc/ZzpcInJvdW5kXCIsbGluZVdpZHRoOnZvaWQgMCE9PWg/aDoxLG1pdGVyTGltaXQ6dm9pZCAwIT09Yz9jOjEwLHN0cm9rZVN0eWxlOkdjKGI/YjpHZyl9fWVsc2UgdGhpcy5sPW51bGw7Yj1hLmY7ZD1hLmo7ZT1hLmE7Zj1hLmM7Zz1hLmk7aD1hLmI7Yz1hLm9hKCk7dmFyIGs9YS5nO2E9YS5CO3RoaXMuZmE9e2ZvbnQ6dm9pZCAwIT09Yj9iOlwiMTBweCBzYW5zLXNlcmlmXCIsdGV4dEFsaWduOnZvaWQgMCE9PWs/azpcImNlbnRlclwiLHRleHRCYXNlbGluZTp2b2lkIDAhPT1cbmE/YTpcIm1pZGRsZVwifTt0aGlzLmRhPXZvaWQgMCE9PWM/YzpcIlwiO3RoaXMuZ2E9dm9pZCAwIT09ZD90aGlzLmkqZDowO3RoaXMua2E9dm9pZCAwIT09ZT90aGlzLmkqZTowO3RoaXMudmI9dm9pZCAwIT09Zj9mOiExO3RoaXMuc2E9dm9pZCAwIT09Zz9nOjA7dGhpcy5CPXRoaXMuaSoodm9pZCAwIT09aD9oOjEpfWVsc2UgdGhpcy5kYT1cIlwifTtmdW5jdGlvbiBVZyhhLGIpe3pnLmNhbGwodGhpcywwLGIpO3RoaXMuYz1IYygpO3RoaXMuYj10aGlzLmMuY2FudmFzO3RoaXMuYi5zdHlsZS53aWR0aD1cIjEwMCVcIjt0aGlzLmIuc3R5bGUuaGVpZ2h0PVwiMTAwJVwiO3RoaXMuYi5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjt0aGlzLmIuY2xhc3NOYW1lPVwib2wtdW5zZWxlY3RhYmxlXCI7YS5pbnNlcnRCZWZvcmUodGhpcy5iLGEuY2hpbGROb2Rlc1swXXx8bnVsbCk7dGhpcy5qPSEwO3RoaXMubD12ZygpfXQoVWcsemcpO1xuZnVuY3Rpb24gVmcoYSxiLGMpe3ZhciBkPWEuaSxlPWEuYztpZihsYyhkLGIpKXt2YXIgZj1jLmV4dGVudCxnPWMucGl4ZWxSYXRpbyxoPWMudmlld1N0YXRlLnJvdGF0aW9uLGs9Yy52aWV3U3RhdGUsbT1jLnBpeGVsUmF0aW8vay5yZXNvbHV0aW9uO2E9eWcoYS5sLGEuYi53aWR0aC8yLGEuYi5oZWlnaHQvMixtLC1tLC1rLnJvdGF0aW9uLC1rLmNlbnRlclswXSwtay5jZW50ZXJbMV0pO2QuZihuZXcgRGcoYixuZXcgSmcoZSxnLGYsYSxoKSxjLGUsbnVsbCkpfX1VZy5wcm90b3R5cGUuST1mdW5jdGlvbigpe3JldHVyblwiY2FudmFzXCJ9O1xuVWcucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSl7aWYoYSl7dmFyIGI9dGhpcy5jLGM9YS5waXhlbFJhdGlvLGQ9TWF0aC5yb3VuZChhLnNpemVbMF0qYyksZT1NYXRoLnJvdW5kKGEuc2l6ZVsxXSpjKTt0aGlzLmIud2lkdGghPWR8fHRoaXMuYi5oZWlnaHQhPWU/KHRoaXMuYi53aWR0aD1kLHRoaXMuYi5oZWlnaHQ9ZSk6Yi5jbGVhclJlY3QoMCwwLGQsZSk7Yz1hLnZpZXdTdGF0ZS5yb3RhdGlvbjt2YXIgZj1hLnZpZXdTdGF0ZSxnPWEuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0saD1hLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtO3lnKGcsYS5zaXplWzBdLzIsYS5zaXplWzFdLzIsMS9mLnJlc29sdXRpb24sLTEvZi5yZXNvbHV0aW9uLC1mLnJvdGF0aW9uLC1mLmNlbnRlclswXSwtZi5jZW50ZXJbMV0pO2Y9d2coaCxnKTtnPWZbMF0qZlszXS1mWzFdKmZbMl07dyghIWcsMzIpO2g9ZlswXTt2YXIgaz1mWzFdLG09ZlsyXSxuPWZbM10scD1mWzRdLHI9Zls1XTtmWzBdPW4vZztmWzFdPVxuLWsvZztmWzJdPS1tL2c7ZlszXT1oL2c7Zls0XT0obSpyLW4qcCkvZztmWzVdPS0oaCpyLWsqcCkvZztWZyh0aGlzLFwicHJlY29tcG9zZVwiLGEpO2Y9YS5sYXllclN0YXRlc0FycmF5O2thKGYpO2MmJihiLnNhdmUoKSxIZyhiLGMsZC8yLGUvMikpO2Q9YS52aWV3U3RhdGUucmVzb2x1dGlvbjtlPTA7Zm9yKGc9Zi5sZW5ndGg7ZTxnOysrZSloPWZbZV0saz1oLmxheWVyLGs9Q2codGhpcyxrKSxoLnZpc2libGUmJmQ+PWgubWluUmVzb2x1dGlvbiYmZDxoLm1heFJlc29sdXRpb24mJlwicmVhZHlcIj09aC5MaSYmay5IKGEsaCkmJmsuRChhLGgsYik7YyYmYi5yZXN0b3JlKCk7VmcodGhpcyxcInBvc3Rjb21wb3NlXCIsYSk7dGhpcy5qfHwodGhpcy5iLnN0eWxlLmRpc3BsYXk9XCJcIix0aGlzLmo9ITApO2Zvcih2YXIgdSBpbiB0aGlzLmYpaWYoISh1IGluIGEubGF5ZXJTdGF0ZXMpKXthLnBvc3RSZW5kZXJGdW5jdGlvbnMucHVzaCh0aGlzLnMuYmluZCh0aGlzKSk7YnJlYWt9YS5wb3N0UmVuZGVyRnVuY3Rpb25zLnB1c2goQWcpfWVsc2UgdGhpcy5qJiZcbih0aGlzLmIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLmo9ITEpfTt2YXIgV2c9XCJQb2x5Z29uIENpcmNsZSBMaW5lU3RyaW5nIEltYWdlIFRleHQgRGVmYXVsdFwiLnNwbGl0KFwiIFwiKTtmdW5jdGlvbiBYZygpe307ZnVuY3Rpb24gWWcoYSl7YT1hfHx7fTt0aGlzLmI9dm9pZCAwIT09YS5jb2xvcj9hLmNvbG9yOm51bGw7dGhpcy5jPWEubGluZUNhcDt0aGlzLmY9dm9pZCAwIT09YS5saW5lRGFzaD9hLmxpbmVEYXNoOm51bGw7dGhpcy5pPWEubGluZURhc2hPZmZzZXQ7dGhpcy5nPWEubGluZUpvaW47dGhpcy5CPWEubWl0ZXJMaW1pdDt0aGlzLmE9YS53aWR0aDt0aGlzLmo9dm9pZCAwfVlnLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYjtyZXR1cm4gbmV3IFlnKHtjb2xvcjphJiZhLnNsaWNlP2Euc2xpY2UoKTphfHx2b2lkIDAsbGluZUNhcDp0aGlzLmMsbGluZURhc2g6dGhpcy5mP3RoaXMuZi5zbGljZSgpOnZvaWQgMCxsaW5lRGFzaE9mZnNldDp0aGlzLmksbGluZUpvaW46dGhpcy5nLG1pdGVyTGltaXQ6dGhpcy5CLHdpZHRoOnRoaXMuYX0pfTtZZy5wcm90b3R5cGUuc2V0TGluZURhc2g9ZnVuY3Rpb24oYSl7dGhpcy5mPWE7dGhpcy5qPXZvaWQgMH07dmFyIFpnPXtKYjpmdW5jdGlvbigpe319O1xuKGZ1bmN0aW9uKGEpe2Z1bmN0aW9uIGIoYSxlLGYsZyxoKXtmPWZ8fDA7Zz1nfHxhLmxlbmd0aC0xO2ZvcihoPWh8fGQ7Zz5mOyl7aWYoNjAwPGctZil7dmFyIGs9Zy1mKzEsbj1lLWYrMSxtPU1hdGgubG9nKGspLHA9LjUqTWF0aC5leHAoMiptLzMpO209LjUqTWF0aC5zcXJ0KG0qcCooay1wKS9rKSooMD5uLWsvMj8tMToxKTtiKGEsZSxNYXRoLm1heChmLE1hdGguZmxvb3IoZS1uKnAvayttKSksTWF0aC5taW4oZyxNYXRoLmZsb29yKGUrKGstbikqcC9rK20pKSxoKX1rPWFbZV07bj1mO3A9ZztjKGEsZixlKTtmb3IoMDxoKGFbZ10saykmJmMoYSxmLGcpO248cDspe2MoYSxuLHApO24rKztmb3IocC0tOzA+aChhW25dLGspOyluKys7Zm9yKDswPGgoYVtwXSxrKTspcC0tfTA9PT1oKGFbZl0sayk/YyhhLGYscCk6KHArKyxjKGEscCxnKSk7cDw9ZSYmKGY9cCsxKTtlPD1wJiYoZz1wLTEpfX1mdW5jdGlvbiBjKGEsYixjKXt2YXIgZD1hW2JdO2FbYl09YVtjXTthW2NdPWR9ZnVuY3Rpb24gZChhLFxuYil7cmV0dXJuIGE8Yj8tMTphPmI/MTowfWZ1bmN0aW9uIGUoYSxiKXtpZighKHRoaXMgaW5zdGFuY2VvZiBlKSlyZXR1cm4gbmV3IGUoYSxiKTt0aGlzLkdjPU1hdGgubWF4KDQsYXx8OSk7dGhpcy5NZD1NYXRoLm1heCgyLE1hdGguY2VpbCguNCp0aGlzLkdjKSk7YiYmdGhpcy5PZihiKTt0aGlzLmNsZWFyKCl9ZnVuY3Rpb24gZihhLGIpe2coYSwwLGEuY2hpbGRyZW4ubGVuZ3RoLGIsYSl9ZnVuY3Rpb24gZyhhLGIsYyxkLGUpe2V8fChlPUQobnVsbCkpO2UuTz1JbmZpbml0eTtlLlM9SW5maW5pdHk7ZS5SPS1JbmZpbml0eTtlLlU9LUluZmluaXR5O2Zvcih2YXIgZjtiPGM7YisrKWY9YS5jaGlsZHJlbltiXSxoKGUsYS50YT9kKGYpOmYpO3JldHVybiBlfWZ1bmN0aW9uIGgoYSxiKXthLk89TWF0aC5taW4oYS5PLGIuTyk7YS5TPU1hdGgubWluKGEuUyxiLlMpO2EuUj1NYXRoLm1heChhLlIsYi5SKTthLlU9TWF0aC5tYXgoYS5VLGIuVSl9ZnVuY3Rpb24gayhhLGIpe3JldHVybiBhLk8tXG5iLk99ZnVuY3Rpb24gbShhLGIpe3JldHVybiBhLlMtYi5TfWZ1bmN0aW9uIG4oYSl7cmV0dXJuKGEuUi1hLk8pKihhLlUtYS5TKX1mdW5jdGlvbiBwKGEpe3JldHVybiBhLlItYS5PKyhhLlUtYS5TKX1mdW5jdGlvbiByKGEsYil7cmV0dXJuIGEuTzw9Yi5PJiZhLlM8PWIuUyYmYi5SPD1hLlImJmIuVTw9YS5VfWZ1bmN0aW9uIHUoYSxiKXtyZXR1cm4gYi5PPD1hLlImJmIuUzw9YS5VJiZiLlI+PWEuTyYmYi5VPj1hLlN9ZnVuY3Rpb24gRChhKXtyZXR1cm57Y2hpbGRyZW46YSxoZWlnaHQ6MSx0YTohMCxPOkluZmluaXR5LFM6SW5maW5pdHksUjotSW5maW5pdHksVTotSW5maW5pdHl9fWZ1bmN0aW9uIEYoYSxiLGMsZCxlKXtmb3IodmFyIGY9W2IsY10sZztmLmxlbmd0aDspYz1mLnBvcCgpLGI9Zi5wb3AoKSxjLWI8PWR8fChnPWIrTWF0aC5jZWlsKChjLWIpL2QvMikqZCxDKGEsZyxiLGMsZSksZi5wdXNoKGIsZyxnLGMpKX12YXIgQz1iO2UucHJvdG90eXBlPXthbGw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5IZCh0aGlzLmRhdGEsXG5bXSl9LHNlYXJjaDpmdW5jdGlvbihhKXt2YXIgYj10aGlzLmRhdGEsYz1bXSxkPXRoaXMueWE7aWYoIXUoYSxiKSlyZXR1cm4gYztmb3IodmFyIGU9W10sZixnLGgsaztiOyl7Zj0wO2ZvcihnPWIuY2hpbGRyZW4ubGVuZ3RoO2Y8ZztmKyspaD1iLmNoaWxkcmVuW2ZdLGs9Yi50YT9kKGgpOmgsdShhLGspJiYoYi50YT9jLnB1c2goaCk6cihhLGspP3RoaXMuSGQoaCxjKTplLnB1c2goaCkpO2I9ZS5wb3AoKX1yZXR1cm4gY30sbG9hZDpmdW5jdGlvbihhKXtpZighYXx8IWEubGVuZ3RoKXJldHVybiB0aGlzO2lmKGEubGVuZ3RoPHRoaXMuTWQpe2Zvcih2YXIgYj0wLGM9YS5sZW5ndGg7YjxjO2IrKyl0aGlzLmFhKGFbYl0pO3JldHVybiB0aGlzfWE9dGhpcy5KZChhLnNsaWNlKCksMCxhLmxlbmd0aC0xLDApO3RoaXMuZGF0YS5jaGlsZHJlbi5sZW5ndGg/dGhpcy5kYXRhLmhlaWdodD09PWEuaGVpZ2h0P3RoaXMuUGQodGhpcy5kYXRhLGEpOih0aGlzLmRhdGEuaGVpZ2h0PGEuaGVpZ2h0JiZcbihiPXRoaXMuZGF0YSx0aGlzLmRhdGE9YSxhPWIpLHRoaXMuTGQoYSx0aGlzLmRhdGEuaGVpZ2h0LWEuaGVpZ2h0LTEsITApKTp0aGlzLmRhdGE9YTtyZXR1cm4gdGhpc30sYWE6ZnVuY3Rpb24oYSl7YSYmdGhpcy5MZChhLHRoaXMuZGF0YS5oZWlnaHQtMSk7cmV0dXJuIHRoaXN9LGNsZWFyOmZ1bmN0aW9uKCl7dGhpcy5kYXRhPUQoW10pO3JldHVybiB0aGlzfSxyZW1vdmU6ZnVuY3Rpb24oYSxiKXtpZighYSlyZXR1cm4gdGhpcztmb3IodmFyIGM9dGhpcy5kYXRhLGQ9dGhpcy55YShhKSxlPVtdLGY9W10sZyxoLGssbjtjfHxlLmxlbmd0aDspe2N8fChjPWUucG9wKCksaD1lW2UubGVuZ3RoLTFdLGc9Zi5wb3AoKSxuPSEwKTtpZihjLnRhKXthOntrPWE7dmFyIG09Yy5jaGlsZHJlbixwPWI7aWYocCl7Zm9yKHZhciB1PTA7dTxtLmxlbmd0aDt1KyspaWYocChrLG1bdV0pKXtrPXU7YnJlYWsgYX1rPS0xfWVsc2Ugaz1tLmluZGV4T2Yoayl9aWYoLTEhPT1rKXtjLmNoaWxkcmVuLnNwbGljZShrLFxuMSk7ZS5wdXNoKGMpO3RoaXMuTWYoZSk7YnJlYWt9fW58fGMudGF8fCFyKGMsZCk/aD8oZysrLGM9aC5jaGlsZHJlbltnXSxuPSExKTpjPW51bGw6KGUucHVzaChjKSxmLnB1c2goZyksZz0wLGg9YyxjPWMuY2hpbGRyZW5bMF0pfXJldHVybiB0aGlzfSx5YTpmdW5jdGlvbihhKXtyZXR1cm4gYX0sTGM6ayxNYzptLHRvSlNPTjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGF9LEhkOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPVtdO2E7KWEudGE/Yi5wdXNoLmFwcGx5KGIsYS5jaGlsZHJlbik6Yy5wdXNoLmFwcGx5KGMsYS5jaGlsZHJlbiksYT1jLnBvcCgpO3JldHVybiBifSxKZDpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT1jLWIrMSxnPXRoaXMuR2M7aWYoZTw9Zyl7dmFyIGg9RChhLnNsaWNlKGIsYysxKSk7ZihoLHRoaXMueWEpO3JldHVybiBofWR8fChkPU1hdGguY2VpbChNYXRoLmxvZyhlKS9NYXRoLmxvZyhnKSksZz1NYXRoLmNlaWwoZS9NYXRoLnBvdyhnLGQtMSkpKTtoPUQoW10pO1xuaC50YT0hMTtoLmhlaWdodD1kO2U9TWF0aC5jZWlsKGUvZyk7Zz1lKk1hdGguY2VpbChNYXRoLnNxcnQoZykpO3ZhciBrO2ZvcihGKGEsYixjLGcsdGhpcy5MYyk7Yjw9YztiKz1nKXt2YXIgbj1NYXRoLm1pbihiK2ctMSxjKTtGKGEsYixuLGUsdGhpcy5NYyk7Zm9yKGs9YjtrPD1uO2srPWUpe3ZhciBtPU1hdGgubWluKGsrZS0xLG4pO2guY2hpbGRyZW4ucHVzaCh0aGlzLkpkKGEsayxtLGQtMSkpfX1mKGgsdGhpcy55YSk7cmV0dXJuIGh9LExmOmZ1bmN0aW9uKGEsYixjLGQpe2Zvcih2YXIgZSxmLGcsaCxrLG0scCxyOzspe2QucHVzaChiKTtpZihiLnRhfHxkLmxlbmd0aC0xPT09YylicmVhaztwPXI9SW5maW5pdHk7ZT0wO2ZvcihmPWIuY2hpbGRyZW4ubGVuZ3RoO2U8ZjtlKyspZz1iLmNoaWxkcmVuW2VdLGs9bihnKSxtPShNYXRoLm1heChnLlIsYS5SKS1NYXRoLm1pbihnLk8sYS5PKSkqKE1hdGgubWF4KGcuVSxhLlUpLU1hdGgubWluKGcuUyxhLlMpKS1rLG08cj8ocj1tLHA9XG5rPHA/azpwLGg9Zyk6bT09PXImJms8cCYmKHA9ayxoPWcpO2I9aHx8Yi5jaGlsZHJlblswXX1yZXR1cm4gYn0sTGQ6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMueWE7Yz1jP2E6ZChhKTtkPVtdO3ZhciBlPXRoaXMuTGYoYyx0aGlzLmRhdGEsYixkKTtlLmNoaWxkcmVuLnB1c2goYSk7Zm9yKGgoZSxjKTswPD1iOylpZihkW2JdLmNoaWxkcmVuLmxlbmd0aD50aGlzLkdjKXRoaXMuU2YoZCxiKSxiLS07ZWxzZSBicmVhazt0aGlzLklmKGMsZCxiKX0sU2Y6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hW2JdLGQ9Yy5jaGlsZHJlbi5sZW5ndGgsZT10aGlzLk1kO3RoaXMuSmYoYyxlLGQpO2Q9dGhpcy5LZihjLGUsZCk7ZD1EKGMuY2hpbGRyZW4uc3BsaWNlKGQsYy5jaGlsZHJlbi5sZW5ndGgtZCkpO2QuaGVpZ2h0PWMuaGVpZ2h0O2QudGE9Yy50YTtmKGMsdGhpcy55YSk7ZihkLHRoaXMueWEpO2I/YVtiLTFdLmNoaWxkcmVuLnB1c2goZCk6dGhpcy5QZChjLGQpfSxQZDpmdW5jdGlvbihhLGIpe3RoaXMuZGF0YT1cbkQoW2EsYl0pO3RoaXMuZGF0YS5oZWlnaHQ9YS5oZWlnaHQrMTt0aGlzLmRhdGEudGE9ITE7Zih0aGlzLmRhdGEsdGhpcy55YSl9LEtmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlO3ZhciBmPWU9SW5maW5pdHk7Zm9yKGQ9YjtkPD1jLWI7ZCsrKXt2YXIgaD1nKGEsMCxkLHRoaXMueWEpO3ZhciBrPWcoYSxkLGMsdGhpcy55YSk7dmFyIG09TWF0aC5tYXgoMCxNYXRoLm1pbihoLlIsay5SKS1NYXRoLm1heChoLk8say5PKSkqTWF0aC5tYXgoMCxNYXRoLm1pbihoLlUsay5VKS1NYXRoLm1heChoLlMsay5TKSk7aD1uKGgpK24oayk7aWYobTxmKXtmPW07dmFyIHA9ZDtlPWg8ZT9oOmV9ZWxzZSBtPT09ZiYmaDxlJiYoZT1oLHA9ZCl9cmV0dXJuIHB9LEpmOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1hLnRhP3RoaXMuTGM6ayxlPWEudGE/dGhpcy5NYzptLGY9dGhpcy5JZChhLGIsYyxkKTtiPXRoaXMuSWQoYSxiLGMsZSk7ZjxiJiZhLmNoaWxkcmVuLnNvcnQoZCl9LElkOmZ1bmN0aW9uKGEsYixcbmMsZCl7YS5jaGlsZHJlbi5zb3J0KGQpO2Q9dGhpcy55YTt2YXIgZT1nKGEsMCxiLGQpLGY9ZyhhLGMtYixjLGQpLGs9cChlKStwKGYpLG47Zm9yKG49YjtuPGMtYjtuKyspe3ZhciBtPWEuY2hpbGRyZW5bbl07aChlLGEudGE/ZChtKTptKTtrKz1wKGUpfWZvcihuPWMtYi0xO24+PWI7bi0tKW09YS5jaGlsZHJlbltuXSxoKGYsYS50YT9kKG0pOm0pLGsrPXAoZik7cmV0dXJuIGt9LElmOmZ1bmN0aW9uKGEsYixjKXtmb3IoOzA8PWM7Yy0tKWgoYltjXSxhKX0sTWY6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWEubGVuZ3RoLTEsYzswPD1iO2ItLSkwPT09YVtiXS5jaGlsZHJlbi5sZW5ndGg/MDxiPyhjPWFbYi0xXS5jaGlsZHJlbixjLnNwbGljZShjLmluZGV4T2YoYVtiXSksMSkpOnRoaXMuY2xlYXIoKTpmKGFbYl0sdGhpcy55YSl9LE9mOmZ1bmN0aW9uKGEpe3ZhciBiPVtcInJldHVybiBhXCIsXCIgLSBiXCIsXCI7XCJdO3RoaXMuTGM9bmV3IEZ1bmN0aW9uKFwiYVwiLFwiYlwiLGIuam9pbihhWzBdKSk7XG50aGlzLk1jPW5ldyBGdW5jdGlvbihcImFcIixcImJcIixiLmpvaW4oYVsxXSkpO3RoaXMueWE9bmV3IEZ1bmN0aW9uKFwiYVwiLFwicmV0dXJuIHttaW5YOiBhXCIrYVswXStcIiwgbWluWTogYVwiK2FbMV0rXCIsIG1heFg6IGFcIithWzJdK1wiLCBtYXhZOiBhXCIrYVszXStcIn07XCIpfX07YVtcImRlZmF1bHRcIl09ZX0pKFpnLkpiPVpnLkpifHx7fSk7WmcuSmI9WmcuSmIuZGVmYXVsdDtmdW5jdGlvbiAkZyhhKXt0aGlzLmY9WmcuSmIoYSk7dGhpcy5iPXt9fWw9JGcucHJvdG90eXBlO2wuYWE9ZnVuY3Rpb24oYSxiKXthPXtPOmFbMF0sUzphWzFdLFI6YVsyXSxVOmFbM10sdmFsdWU6Yn07dGhpcy5mLmFhKGEpO3RoaXMuYlt2KGIpXT1hfTtsLmxvYWQ9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9QXJyYXkoYi5sZW5ndGgpLGQ9MCxlPWIubGVuZ3RoO2Q8ZTtkKyspe3ZhciBmPWFbZF0sZz1iW2RdO2Y9e086ZlswXSxTOmZbMV0sUjpmWzJdLFU6ZlszXSx2YWx1ZTpnfTtjW2RdPWY7dGhpcy5iW3YoZyldPWZ9dGhpcy5mLmxvYWQoYyl9O2wucmVtb3ZlPWZ1bmN0aW9uKGEpe2E9dihhKTt2YXIgYj10aGlzLmJbYV07ZGVsZXRlIHRoaXMuYlthXTtyZXR1cm4gbnVsbCE9PXRoaXMuZi5yZW1vdmUoYil9O2Z1bmN0aW9uIGFoKGEsYixjKXt2YXIgZD1hLmJbdihjKV07UWEoW2QuTyxkLlMsZC5SLGQuVV0sYil8fChhLnJlbW92ZShjKSxhLmFhKGIsYykpfVxuZnVuY3Rpb24gYmgoYSl7cmV0dXJuIGEuZi5hbGwoKS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudmFsdWV9KX1mdW5jdGlvbiBjaChhLGIpe3JldHVybiBhLmYuc2VhcmNoKHtPOmJbMF0sUzpiWzFdLFI6YlsyXSxVOmJbM119KS5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIGEudmFsdWV9KX1sLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZGgoYmgodGhpcyksYSxiKX07ZnVuY3Rpb24gZWgoYSxiLGMsZCl7cmV0dXJuIGRoKGNoKGEsYiksYyxkKX1mdW5jdGlvbiBkaChhLGIsYyl7Zm9yKHZhciBkLGU9MCxmPWEubGVuZ3RoO2U8ZiYmIShkPWIuY2FsbChjLGFbZV0pKTtlKyspO3JldHVybiBkfWwuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmYuY2xlYXIoKTt0aGlzLmI9e319O2wuSz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLmYuZGF0YTtyZXR1cm4gTmEoYi5PLGIuUyxiLlIsYi5VLGEpfTtcbmwuY29uY2F0PWZ1bmN0aW9uKGEpe3RoaXMuZi5sb2FkKGEuZi5hbGwoKSk7Zm9yKHZhciBiIGluIGEuYil0aGlzLmJbYnwwXT1hLmJbYnwwXX07ZnVuY3Rpb24gZmgoKXt0aGlzLmE9MDt0aGlzLmo9e307dGhpcy5mPXRoaXMuYj1udWxsfWw9ZmgucHJvdG90eXBlO2wuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLmE9MDt0aGlzLmo9e307dGhpcy5mPXRoaXMuYj1udWxsfTtsLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5iO2M7KWEuY2FsbChiLGMudGIsYy5tYix0aGlzKSxjPWMuRWF9O2wuZ2V0PWZ1bmN0aW9uKGEpe2E9dGhpcy5qW2FdO3coISFhLDE1KTtpZihhPT09dGhpcy5mKXJldHVybiBhLnRiO2E9PT10aGlzLmI/KHRoaXMuYj10aGlzLmIuRWEsdGhpcy5iLnJiPW51bGwpOihhLkVhLnJiPWEucmIsYS5yYi5FYT1hLkVhKTthLkVhPW51bGw7YS5yYj10aGlzLmY7dGhpcy5mPXRoaXMuZi5FYT1hO3JldHVybiBhLnRifTtcbmwucG9wPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5iO2RlbGV0ZSB0aGlzLmpbYS5tYl07YS5FYSYmKGEuRWEucmI9bnVsbCk7dGhpcy5iPWEuRWE7dGhpcy5ifHwodGhpcy5mPW51bGwpOy0tdGhpcy5hO3JldHVybiBhLnRifTtsLnJlcGxhY2U9ZnVuY3Rpb24oYSxiKXt0aGlzLmdldChhKTt0aGlzLmpbYV0udGI9Yn07bC5zZXQ9ZnVuY3Rpb24oYSxiKXt3KCEoYSBpbiB0aGlzLmopLDE2KTtiPXttYjphLEVhOm51bGwscmI6dGhpcy5mLHRiOmJ9O3RoaXMuZj90aGlzLmYuRWE9Yjp0aGlzLmI9Yjt0aGlzLmY9Yjt0aGlzLmpbYV09YjsrK3RoaXMuYX07dmFyIGdoPVtcImNhbnZhc1wiLFwid2ViZ2xcIl07XG5mdW5jdGlvbiBCKGEpe25jLmNhbGwodGhpcyk7dmFyIGI9aGgoYSk7dGhpcy5EYz12b2lkIDAhPT1hLmxvYWRUaWxlc1doaWxlQW5pbWF0aW5nP2EubG9hZFRpbGVzV2hpbGVBbmltYXRpbmc6ITE7dGhpcy5CYz12b2lkIDAhPT1hLmxvYWRUaWxlc1doaWxlSW50ZXJhY3Rpbmc/YS5sb2FkVGlsZXNXaGlsZUludGVyYWN0aW5nOiExO3RoaXMuSWM9dm9pZCAwIT09YS5waXhlbFJhdGlvP2EucGl4ZWxSYXRpbzprZDt0aGlzLkhjPWIubG9nb3M7dGhpcy5lYj1mdW5jdGlvbigpe3RoaXMuRD12b2lkIDA7dGhpcy5GaS5jYWxsKHRoaXMsRGF0ZS5ub3coKSl9LmJpbmQodGhpcyk7dGhpcy5mYj12ZygpO3RoaXMuSmM9dmcoKTt0aGlzLmdiPTA7dGhpcy5KPXRoaXMuWD10aGlzLlY9dGhpcy5nPXRoaXMuYz1udWxsO3RoaXMuYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO3RoaXMuYS5jbGFzc05hbWU9XCJvbC12aWV3cG9ydFwiKyhvZD9cIiBvbC10b3VjaFwiOlwiXCIpO3RoaXMuYS5zdHlsZS5wb3NpdGlvbj1cblwicmVsYXRpdmVcIjt0aGlzLmEuc3R5bGUub3ZlcmZsb3c9XCJoaWRkZW5cIjt0aGlzLmEuc3R5bGUud2lkdGg9XCIxMDAlXCI7dGhpcy5hLnN0eWxlLmhlaWdodD1cIjEwMCVcIjt0aGlzLmEuc3R5bGUubXNUb3VjaEFjdGlvbj1cIm5vbmVcIjt0aGlzLmEuc3R5bGUudG91Y2hBY3Rpb249XCJub25lXCI7dGhpcy5IPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJESVZcIik7dGhpcy5ILmNsYXNzTmFtZT1cIm9sLW92ZXJsYXljb250YWluZXJcIjt0aGlzLmEuYXBwZW5kQ2hpbGQodGhpcy5IKTt0aGlzLkM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKTt0aGlzLkMuY2xhc3NOYW1lPVwib2wtb3ZlcmxheWNvbnRhaW5lci1zdG9wZXZlbnRcIjtmb3IodmFyIGM9XCJjbGljayBkYmxjbGljayBtb3VzZWRvd24gdG91Y2hzdGFydCBNU1BvaW50ZXJEb3duIHBvaW50ZXJkb3duIG1vdXNld2hlZWwgd2hlZWxcIi5zcGxpdChcIiBcIiksZD0wLGU9Yy5sZW5ndGg7ZDxlOysrZCl5KHRoaXMuQyxjW2RdLGpjKTt0aGlzLmEuYXBwZW5kQ2hpbGQodGhpcy5DKTtcbnRoaXMuc2E9bmV3IFVkKHRoaXMsYS5tb3ZlVG9sZXJhbmNlKTtmb3IodmFyIGYgaW4gcmQpeSh0aGlzLnNhLHJkW2ZdLHRoaXMuZmUsdGhpcyk7dGhpcy5rYT1iLmtleWJvYXJkRXZlbnRUYXJnZXQ7dGhpcy51PW51bGw7eSh0aGlzLmEsXCJ3aGVlbFwiLHRoaXMubGIsdGhpcyk7eSh0aGlzLmEsXCJtb3VzZXdoZWVsXCIsdGhpcy5sYix0aGlzKTt0aGlzLnY9Yi5jb250cm9sczt0aGlzLmw9Yi5pbnRlcmFjdGlvbnM7dGhpcy5zPWIub3ZlcmxheXM7dGhpcy5NZT17fTt0aGlzLiRhPW5ldyBiLkdpKHRoaXMuYSx0aGlzKTt0aGlzLiQ9bnVsbDt0aGlzLkRhPVtdO3RoaXMuRmE9bmV3IGFlKHRoaXMucGcuYmluZCh0aGlzKSx0aGlzLk1nLmJpbmQodGhpcykpO3RoaXMuZ2E9e307eSh0aGlzLHBjKFwibGF5ZXJncm91cFwiKSx0aGlzLnVnLHRoaXMpO3kodGhpcyxwYyhcInZpZXdcIiksdGhpcy5PZyx0aGlzKTt5KHRoaXMscGMoXCJzaXplXCIpLHRoaXMuR2csdGhpcyk7eSh0aGlzLHBjKFwidGFyZ2V0XCIpLFxudGhpcy5MZyx0aGlzKTt0aGlzLnFhKGIudmFsdWVzKTt0aGlzLnYuZm9yRWFjaChmdW5jdGlvbihhKXthLnNldE1hcCh0aGlzKX0sdGhpcyk7eSh0aGlzLnYsXCJhZGRcIixmdW5jdGlvbihhKXthLmVsZW1lbnQuc2V0TWFwKHRoaXMpfSx0aGlzKTt5KHRoaXMudixcInJlbW92ZVwiLGZ1bmN0aW9uKGEpe2EuZWxlbWVudC5zZXRNYXAobnVsbCl9LHRoaXMpO3RoaXMubC5mb3JFYWNoKGZ1bmN0aW9uKGEpe2Euc2V0TWFwKHRoaXMpfSx0aGlzKTt5KHRoaXMubCxcImFkZFwiLGZ1bmN0aW9uKGEpe2EuZWxlbWVudC5zZXRNYXAodGhpcyl9LHRoaXMpO3kodGhpcy5sLFwicmVtb3ZlXCIsZnVuY3Rpb24oYSl7YS5lbGVtZW50LnNldE1hcChudWxsKX0sdGhpcyk7dGhpcy5zLmZvckVhY2godGhpcy5RZCx0aGlzKTt5KHRoaXMucyxcImFkZFwiLGZ1bmN0aW9uKGEpe3RoaXMuUWQoYS5lbGVtZW50KX0sdGhpcyk7eSh0aGlzLnMsXCJyZW1vdmVcIixmdW5jdGlvbihhKXt2YXIgYj1hLmVsZW1lbnQubDt2b2lkIDAhPT1cbmImJmRlbGV0ZSB0aGlzLk1lW2IudG9TdHJpbmcoKV07YS5lbGVtZW50LnNldE1hcChudWxsKX0sdGhpcyl9dChCLG5jKTtsPUIucHJvdG90eXBlO2wuVGY9ZnVuY3Rpb24oYSl7dGhpcy52LnB1c2goYSl9O2wuVWY9ZnVuY3Rpb24oYSl7dGhpcy5sLnB1c2goYSl9O2wuVmY9ZnVuY3Rpb24oYSl7aWgodGhpcykuZ2V0KHJnKS5wdXNoKGEpfTtsLldmPWZ1bmN0aW9uKGEpe3RoaXMucy5wdXNoKGEpfTtsLlFkPWZ1bmN0aW9uKGEpe3ZhciBiPWEubDt2b2lkIDAhPT1iJiYodGhpcy5NZVtiLnRvU3RyaW5nKCldPWEpO2Euc2V0TWFwKHRoaXMpfTtcbmwubGE9ZnVuY3Rpb24oKXtoYyh0aGlzLnNhKTtoYyh0aGlzLiRhKTtkYyh0aGlzLmEsXCJ3aGVlbFwiLHRoaXMubGIsdGhpcyk7ZGModGhpcy5hLFwibW91c2V3aGVlbFwiLHRoaXMubGIsdGhpcyk7dGhpcy5pJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLmksITEpLHRoaXMuaT12b2lkIDApO3RoaXMuRCYmKGNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMuRCksdGhpcy5EPXZvaWQgMCk7dGhpcy5zZXQoXCJ0YXJnZXRcIixudWxsKTtuYy5wcm90b3R5cGUubGEuY2FsbCh0aGlzKX07bC5XYz1mdW5jdGlvbihhLGIsYyl7aWYodGhpcy5jKXJldHVybiBhPXRoaXMuQmEoYSksYz1jP2M6e30sQmcodGhpcy4kYSxhLHRoaXMuYyx2b2lkIDAhPT1jLmhpdFRvbGVyYW5jZT9jLmhpdFRvbGVyYW5jZSp0aGlzLmMucGl4ZWxSYXRpbzowLGIsYy5sYXllckZpbHRlcj9jLmxheWVyRmlsdGVyOnNlKX07XG5sLnFoPWZ1bmN0aW9uKGEsYixjLGQsZSl7aWYodGhpcy5jKXthOnt2YXIgZj10aGlzLiRhLGc9dGhpcy5jO2M9dm9pZCAwIT09Yz9jOm51bGw7ZD1kP2Q6c2U7ZT12b2lkIDAhPT1lP2U6bnVsbDt2YXIgaD1nLnZpZXdTdGF0ZS5yZXNvbHV0aW9uLGs9Zy5sYXllclN0YXRlc0FycmF5LG09ay5sZW5ndGg7YT14ZyhnLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLGEuc2xpY2UoKSk7Zm9yKC0tbTswPD1tOy0tbSl7dmFyIG49a1ttXTt2YXIgcD1uLmxheWVyO2lmKG4udmlzaWJsZSYmaD49bi5taW5SZXNvbHV0aW9uJiZoPG4ubWF4UmVzb2x1dGlvbiYmZC5jYWxsKGUscCkmJihuPUNnKGYscCkuTChhLGcsYixjKSkpe2I9bjticmVhayBhfX1iPXZvaWQgMH1yZXR1cm4gYn19O1xuZnVuY3Rpb24gYmQoYSxiKXthPWEuYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtiPWIuY2hhbmdlZFRvdWNoZXM/Yi5jaGFuZ2VkVG91Y2hlc1swXTpiO3JldHVybltiLmNsaWVudFgtYS5sZWZ0LGIuY2xpZW50WS1hLnRvcF19bC5jZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInRhcmdldFwiKX07ZnVuY3Rpb24gamgoYSl7YT1hLmNkKCk7cmV0dXJuIHZvaWQgMCE9PWE/XCJzdHJpbmdcIj09PXR5cGVvZiBhP2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpOmE6bnVsbH1sLkJhPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuYztyZXR1cm4gYj94ZyhiLnBpeGVsVG9Db29yZGluYXRlVHJhbnNmb3JtLGEuc2xpY2UoKSk6bnVsbH07bC5uZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnN9O2Z1bmN0aW9uIGloKGEpe3JldHVybiBhLmdldChcImxheWVyZ3JvdXBcIil9bC5yaD1mdW5jdGlvbigpe3JldHVybiBpaCh0aGlzKS5nZXQocmcpfTtcbmZ1bmN0aW9uIEhmKGEsYil7cmV0dXJuKGE9YS5jKT94ZyhhLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLGIuc2xpY2UoMCwyKSk6bnVsbH1sLiRjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGF9O2wucGI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJzaXplXCIpfTtsLlo9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJ2aWV3XCIpfTtsLnBnPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMuYztpZighKGUmJmIgaW4gZS53YW50ZWRUaWxlcyYmZS53YW50ZWRUaWxlc1tiXVthLlhhKCldKSlyZXR1cm4gSW5maW5pdHk7YT1jWzBdLWUuZm9jdXNbMF07Yz1jWzFdLWUuZm9jdXNbMV07cmV0dXJuIDY1NTM2Kk1hdGgubG9nKGQpK01hdGguc3FydChhKmErYypjKS9kfTtsLmxiPWZ1bmN0aW9uKGEsYil7YT1uZXcgZWQoYnx8YS50eXBlLHRoaXMsYSk7dGhpcy5mZShhKX07XG5sLmZlPWZ1bmN0aW9uKGEpe2lmKHRoaXMuYyl7dGhpcy4kPWEuY29vcmRpbmF0ZTthLmZyYW1lU3RhdGU9dGhpcy5jO3ZhciBiPXRoaXMubC5hLGM7aWYoITEhPT10aGlzLmYoYSkpZm9yKGM9Yi5sZW5ndGgtMTswPD1jO2MtLSl7dmFyIGQ9YltjXTtpZihkLmdldChcImFjdGl2ZVwiKSYmIWQuaGFuZGxlRXZlbnQoYSkpYnJlYWt9fX07XG5sLkZnPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5jLGI9dGhpcy5GYTtpZihiLmIubGVuZ3RoKXt2YXIgYz0xNixkPWM7aWYoYSl7dmFyIGU9YS52aWV3SGludHM7ZVswXSYmKGM9dGhpcy5EYz84OjAsZD0yKTtlWzFdJiYoYz10aGlzLkJjPzg6MCxkPTIpfWlmKGIuaTxjKXtlPWIubDt2YXIgZj1iLmIsZz1iLmYsaD0wLGs9Zi5sZW5ndGgsbTtmb3IobT0wO208azsrK20pe3ZhciBuPWZbbV07dmFyIHA9ZShuKTtJbmZpbml0eT09cD9kZWxldGUgYi5qW2IuYShuKV06KGdbaF09cCxmW2grK109bil9Zi5sZW5ndGg9aDtnLmxlbmd0aD1oO2ZvcihlPShiLmIubGVuZ3RoPj4xKS0xOzA8PWU7ZS0tKSRkKGIsZSk7ZT0wO2ZvcihmPSExO2IuaTxjJiZlPGQmJjA8Yi5iLmxlbmd0aDspZz1iLGs9Zy5iLG49Zy5mLGg9a1swXSwxPT1rLmxlbmd0aD8oay5sZW5ndGg9MCxuLmxlbmd0aD0wKTooa1swXT1rLnBvcCgpLG5bMF09bi5wb3AoKSwkZChnLDApKSxrPWcuYShoKSxkZWxldGUgZy5qW2tdLGg9XG5oWzBdLGs9aC5YYSgpLGc9aC5zdGF0ZSw1PT09Zz9mPSEwOjAhPT1nfHxrIGluIGIuY3x8KGIuY1trXT0hMCwrK2IuaSwrK2UsaC5sb2FkKCkpOyFlJiZmJiZiLnMoKX19Yj10aGlzLkRhO2Q9MDtmb3IoYz1iLmxlbmd0aDtkPGM7KytkKWJbZF0odGhpcyxhKTtiLmxlbmd0aD0wfTtsLkdnPWZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoKX07XG5sLkxnPWZ1bmN0aW9uKCl7dmFyIGE7dGhpcy5jZCgpJiYoYT1qaCh0aGlzKSk7aWYodGhpcy51KXtmb3IodmFyIGI9MCxjPXRoaXMudS5sZW5ndGg7YjxjOysrYilaYih0aGlzLnVbYl0pO3RoaXMudT1udWxsfWE/KGEuYXBwZW5kQ2hpbGQodGhpcy5hKSxhPXRoaXMua2E/dGhpcy5rYTphLHRoaXMudT1beShhLFwia2V5ZG93blwiLHRoaXMubGIsdGhpcykseShhLFwia2V5cHJlc3NcIix0aGlzLmxiLHRoaXMpXSx0aGlzLml8fCh0aGlzLmk9dGhpcy5sZi5iaW5kKHRoaXMpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5pLCExKSkpOihJYyh0aGlzLmEpLHRoaXMuaSYmKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5pLCExKSx0aGlzLmk9dm9pZCAwKSk7dGhpcy5sZigpfTtsLk1nPWZ1bmN0aW9uKCl7dGhpcy5yZW5kZXIoKX07bC5oZT1mdW5jdGlvbigpe3RoaXMucmVuZGVyKCl9O1xubC5PZz1mdW5jdGlvbigpe3RoaXMuViYmKFpiKHRoaXMuViksdGhpcy5WPW51bGwpO3RoaXMuWCYmKFpiKHRoaXMuWCksdGhpcy5YPW51bGwpO3ZhciBhPXRoaXMuWigpO2EmJih0aGlzLmEuc2V0QXR0cmlidXRlKFwiZGF0YS12aWV3XCIsdihhKSksdGhpcy5WPXkoYSxcInByb3BlcnR5Y2hhbmdlXCIsdGhpcy5oZSx0aGlzKSx0aGlzLlg9eShhLFwiY2hhbmdlXCIsdGhpcy5oZSx0aGlzKSk7dGhpcy5yZW5kZXIoKX07bC51Zz1mdW5jdGlvbigpe3RoaXMuSiYmKHRoaXMuSi5mb3JFYWNoKFpiKSx0aGlzLko9bnVsbCk7dmFyIGE9aWgodGhpcyk7YSYmKHRoaXMuSj1beShhLFwicHJvcGVydHljaGFuZ2VcIix0aGlzLnJlbmRlcix0aGlzKSx5KGEsXCJjaGFuZ2VcIix0aGlzLnJlbmRlcix0aGlzKV0pO3RoaXMucmVuZGVyKCl9O2wucmVuZGVyPWZ1bmN0aW9uKCl7dm9pZCAwPT09dGhpcy5EJiYodGhpcy5EPXJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmViKSl9O2wuQ2k9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudi5yZW1vdmUoYSl9O1xubC5EaT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sLnJlbW92ZShhKX07bC5FaT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5zLnJlbW92ZShhKX07XG5sLkZpPWZ1bmN0aW9uKGEpe3ZhciBiLGM9dGhpcy5wYigpLGQ9dGhpcy5aKCksZT1IYSgpLGY9dGhpcy5jLGc9bnVsbCxoO2lmKGg9dm9pZCAwIT09YyYmMDxjWzBdJiYwPGNbMV0mJmQpaD0hIWQuYmEoKSYmdm9pZCAwIT09ZC51YSgpO2lmKGgpe2c9VGMoZCx0aGlzLmM/dGhpcy5jLnZpZXdIaW50czp2b2lkIDApO2g9aWgodGhpcykuWWMoKTt2YXIgaz17fTt2YXIgbT0wO2ZvcihiPWgubGVuZ3RoO208YjsrK20pa1t2KGhbbV0ubGF5ZXIpXT1oW21dO209aGYoZCk7Zz17YW5pbWF0ZTohMSxhdHRyaWJ1dGlvbnM6e30sY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm06dGhpcy5mYixleHRlbnQ6ZSxmb2N1czp0aGlzLiQ/dGhpcy4kOm0uY2VudGVyLGluZGV4OnRoaXMuZ2IrKyxsYXllclN0YXRlczprLGxheWVyU3RhdGVzQXJyYXk6aCxsb2dvczpaYSh7fSx0aGlzLkhjKSxwaXhlbFJhdGlvOnRoaXMuSWMscGl4ZWxUb0Nvb3JkaW5hdGVUcmFuc2Zvcm06dGhpcy5KYyxwb3N0UmVuZGVyRnVuY3Rpb25zOltdLFxuc2l6ZTpjLHNraXBwZWRGZWF0dXJlVWlkczp0aGlzLmdhLHRpbGVRdWV1ZTp0aGlzLkZhLHRpbWU6YSx1c2VkVGlsZXM6e30sdmlld1N0YXRlOm0sdmlld0hpbnRzOmcsd2FudGVkVGlsZXM6e319fWcmJihnLmV4dGVudD1UYShtLmNlbnRlcixtLnJlc29sdXRpb24sbS5yb3RhdGlvbixnLnNpemUsZSkpO3RoaXMuYz1nO3RoaXMuJGEuZyhnKTtnJiYoZy5hbmltYXRlJiZ0aGlzLnJlbmRlcigpLEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMuRGEsZy5wb3N0UmVuZGVyRnVuY3Rpb25zKSwhZnx8dGhpcy5nJiYoWWEodGhpcy5nKXx8UWEoZy5leHRlbnQsdGhpcy5nKSl8fCh0aGlzLmYobmV3IGRkKFwibW92ZXN0YXJ0XCIsdGhpcyxmKSksdGhpcy5nPU9hKHRoaXMuZykpLCF0aGlzLmd8fGcudmlld0hpbnRzWzBdfHxnLnZpZXdIaW50c1sxXXx8UWEoZy5leHRlbnQsdGhpcy5nKXx8KHRoaXMuZihuZXcgZGQoXCJtb3ZlZW5kXCIsdGhpcyxnKSksS2EoZy5leHRlbnQsdGhpcy5nKSkpO1xudGhpcy5mKG5ldyBkZChcInBvc3RyZW5kZXJcIix0aGlzLGcpKTtzZXRUaW1lb3V0KHRoaXMuRmcuYmluZCh0aGlzKSwwKX07bC5lZj1mdW5jdGlvbihhKXthPXYoYSkudG9TdHJpbmcoKTt0aGlzLmdhW2FdPSEwO3RoaXMucmVuZGVyKCl9O2wubGY9ZnVuY3Rpb24oKXt2YXIgYT1qaCh0aGlzKTtpZihhKXt2YXIgYj1nZXRDb21wdXRlZFN0eWxlKGEpO3RoaXMuc2V0KFwic2l6ZVwiLFthLm9mZnNldFdpZHRoLXBhcnNlRmxvYXQoYi5ib3JkZXJMZWZ0V2lkdGgpLXBhcnNlRmxvYXQoYi5wYWRkaW5nTGVmdCktcGFyc2VGbG9hdChiLnBhZGRpbmdSaWdodCktcGFyc2VGbG9hdChiLmJvcmRlclJpZ2h0V2lkdGgpLGEub2Zmc2V0SGVpZ2h0LXBhcnNlRmxvYXQoYi5ib3JkZXJUb3BXaWR0aCktcGFyc2VGbG9hdChiLnBhZGRpbmdUb3ApLXBhcnNlRmxvYXQoYi5wYWRkaW5nQm90dG9tKS1wYXJzZUZsb2F0KGIuYm9yZGVyQm90dG9tV2lkdGgpXSl9ZWxzZSB0aGlzLnNldChcInNpemVcIix2b2lkIDApfTtcbmwuamY9ZnVuY3Rpb24oYSl7YT12KGEpLnRvU3RyaW5nKCk7ZGVsZXRlIHRoaXMuZ2FbYV07dGhpcy5yZW5kZXIoKX07XG5mdW5jdGlvbiBoaChhKXt2YXIgYj1udWxsO3ZvaWQgMCE9PWEua2V5Ym9hcmRFdmVudFRhcmdldCYmKGI9XCJzdHJpbmdcIj09PXR5cGVvZiBhLmtleWJvYXJkRXZlbnRUYXJnZXQ/ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYS5rZXlib2FyZEV2ZW50VGFyZ2V0KTphLmtleWJvYXJkRXZlbnRUYXJnZXQpO3ZhciBjPXt9LGQ9e307aWYodm9pZCAwPT09YS5sb2dvfHxcImJvb2xlYW5cIj09PXR5cGVvZiBhLmxvZ28mJmEubG9nbylkW1wiZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDQUFBQUFnQ0FNQUFBQkVwSXJHQUFBQUEzTkNTVlFJQ0FqYjRVL2dBQUFBQ1hCSVdYTUFBQUhHQUFBQnhnRVh3ZnBHQUFBQUdYUkZXSFJUYjJaMGQyRnlaUUIzZDNjdWFXNXJjMk5oY0dVdWIzSm5tKzQ4R2dBQUFoTlFURlJGLy8vL0FQLy9BSUNBZ1AvL0FGVlZRRUNBLy8vL0sxVlZTYmJiWUwvZkowNWlkc1RZSkZ0YmJjamJKbGxtWnN6V1dNVE9JRmhvSGxOaVpzelRhOURkVWNITkhsTmxWOFhSSVZkaWFzclVIbFpqSVZaamFNblZIMVJsSUZSa0gxUmtIMVpsYXN2WWFzdlhWc1BRSDFWa2FjblZhOHZXSVZaaklGUmpWTVBRYThyWElWVmtYc1hSc052ZUlGVmtJRlpsSVZWajNlRGVoNkdtYk12WEgxWmtJRlJrYThyV2JNdlhJRlZrSUZWaklGVmtiTXZXSDFWamJNdldJRlZsYmN2V0lGVmxhOHZWSUZWa2JNdldiTXZWSDFWa2JNdldJRlZsYmN2V0lGVmtiY3ZWYk12V2pOUGJJRlZrVThMUHdNek5JRlZrYmN6V0lGVmtic3ZXYk12WElGVmtSbkI4YmN2VzIrVGtXOFhSSUZWa0lsWmxKVmxvSmxwb0tseHJMbDl0TW1Kd09XZDBPbWgxUlhGOFRuZUNUM2lEVUhpRFU4TFBWTUxQVmNMUFZjUFFWc1BQVnNQUVY4UFFXTVRRV3NUUVc4VFFYTVhTWHNYUlg0U05YOGJTWU1mVFljZlRZc2ZUWThqVVpjZlNac25VYUlxVGFjclZhc3JWYThqVGE4cldiSTJWYk12V2JjdldkSk9iZGN2VWRzelVkOHZWZUphZWU4N1lmYzNXZ0p5amhxR25pdERZamFhcmxkUFpucksyb05iYm9yVzVvOWJibzlmYnBMYTZxOW5kckwzQXJ0bmRzY0REdXR6ZnU4Zkp3Tjdnd3Q3Z3hjL1F5dUhoeStIaXplSGkwTmZYMCtQajE5emIxK1RqMnVYazI5L2UzdUxnMytMaDMrYmw0dVhqNHVmbDQrZmw1T2ZsNXVmbDV1am01K2pteVNEbkJBQUFBRnAwVWs1VEFBRUNBZ01FQkFZSENBME5EZzRVR1JvZ0lpTW1LU3NzTHpVN1BrSkpUMUpUVkZsaVkyaHJkSFozZm9TRmhZZUpqWTJRa3B1Z3FiRzF0cmU1dzh6UTA5WFkzdVhuNit6eDh2VDA5dmY0K1BqNStmcjYvUDM5L2YzK2d6N1NzQUFBQVZWSlJFRlVPTXRqWUtBN0VCRG53Q1BMck9iUzFCUmlMb0pMbnRlNkNReThGTEhMQ3pzMlFVRzRGalo1R2JjbUJERGp4SkJYRFd4Q0JyYjhhTTR6YmtJRHpwTFluQWNFOVZYbEpTV2xaUlUxM2tvSWVXNTdtR3g1WGpvTVpFVXF3eFdZUWFRYlN6TFNrWUdmS0ZTZTBRTXNYNVdiamdZMFlTNE1CcGxlbUk0QmRHQlcrRFExMWVaaXltZnFRdVhaSWpxd3lhZFBOb1NaNEwrMEZWTTZlK29HSTZnOGE5aUtOVDNvOGtWek5relJnNWxnbDdwNHd5UlVMOVl0MmpBeFZoNm1RQ29nYWU2R21mbEk4cDByMTNWRldUSEJRMHJXUFc3YWhnV1ZjUG0rOWN1TG95eTRrQ0pEekNtNmQ4UFNGb2gwenZRTkM1T2pESmhRb3BQUEpxcGgxZG9KQlVENXRua2JaaVVFcWFDbkIzYlRxTFRGRzFiUG43MWt3NGIrR0ZkcExFbEtJelJ4eGdZZ1dOWWM1U0NFTlZIS2VVYWx0SGRYeDBkWjh1QkkxaEoyVVVEZ3E4MkNNMk13S2VpYnFBdlNPN01DQUJxMHdYRVBpcVdFQUFBQUFFbEZUa1N1UW1DQ1wiXT1cImh0dHBzOi8vb3BlbmxheWVycy5vcmcvXCI7XG5lbHNle3ZhciBlPWEubG9nbztcInN0cmluZ1wiPT09dHlwZW9mIGU/ZFtlXT1cIlwiOmUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudD9kW3YoZSkudG9TdHJpbmcoKV09ZTplJiYodyhcInN0cmluZ1wiPT10eXBlb2YgZS5ocmVmLDQ0KSx3KFwic3RyaW5nXCI9PXR5cGVvZiBlLnNyYyw0NSksZFtlLnNyY109ZS5ocmVmKX1lPWEubGF5ZXJzIGluc3RhbmNlb2YgcWc/YS5sYXllcnM6bmV3IHFnKHtsYXllcnM6YS5sYXllcnN9KTtjLmxheWVyZ3JvdXA9ZTtjLnRhcmdldD1hLnRhcmdldDtjLnZpZXc9dm9pZCAwIT09YS52aWV3P2EudmlldzpuZXcgYmY7ZT16Zzt2YXIgZjt2b2lkIDAhPT1hLnJlbmRlcmVyPyhBcnJheS5pc0FycmF5KGEucmVuZGVyZXIpP2Y9YS5yZW5kZXJlcjpcInN0cmluZ1wiPT09dHlwZW9mIGEucmVuZGVyZXI/Zj1bYS5yZW5kZXJlcl06dyghMSw0NiksMDw9Zi5pbmRleE9mKFwiZG9tXCIpJiYoZj1mLmNvbmNhdChnaCkpKTpmPWdoO3ZhciBnO3ZhciBoPTA7Zm9yKGc9Zi5sZW5ndGg7aDxcbmc7KytoKWlmKFwiY2FudmFzXCI9PWZbaF0mJm1kKXtlPVVnO2JyZWFrfXZvaWQgMCE9PWEuY29udHJvbHM/QXJyYXkuaXNBcnJheShhLmNvbnRyb2xzKT9mPW5ldyBzYyhhLmNvbnRyb2xzLnNsaWNlKCkpOih3KGEuY29udHJvbHMgaW5zdGFuY2VvZiBzYyw0NyksZj1hLmNvbnRyb2xzKTpmPVhjKCk7aWYodm9pZCAwIT09YS5pbnRlcmFjdGlvbnMpQXJyYXkuaXNBcnJheShhLmludGVyYWN0aW9ucyk/aD1uZXcgc2MoYS5pbnRlcmFjdGlvbnMuc2xpY2UoKSk6KHcoYS5pbnRlcmFjdGlvbnMgaW5zdGFuY2VvZiBzYyw0OCksaD1hLmludGVyYWN0aW9ucyk7ZWxzZXtoPXt9O2c9bmV3IHNjO3ZhciBrPW5ldyBqZjsodm9pZCAwIT09aC5hbHRTaGlmdERyYWdSb3RhdGU/aC5hbHRTaGlmdERyYWdSb3RhdGU6MSkmJmcucHVzaChuZXcgSWYpOyh2b2lkIDAhPT1oLmRvdWJsZUNsaWNrWm9vbT9oLmRvdWJsZUNsaWNrWm9vbToxKSYmZy5wdXNoKG5ldyBxZih7ZGVsdGE6aC56b29tRGVsdGEsZHVyYXRpb246aC56b29tRHVyYXRpb259KSk7XG4odm9pZCAwIT09aC5kcmFnUGFuP2guZHJhZ1BhbjoxKSYmZy5wdXNoKG5ldyBEZih7a2luZXRpYzprfSkpOyh2b2lkIDAhPT1oLnBpbmNoUm90YXRlP2gucGluY2hSb3RhdGU6MSkmJmcucHVzaChuZXcgZ2cpOyh2b2lkIDAhPT1oLnBpbmNoWm9vbT9oLnBpbmNoWm9vbToxKSYmZy5wdXNoKG5ldyBrZyh7Y29uc3RyYWluUmVzb2x1dGlvbjpoLmNvbnN0cmFpblJlc29sdXRpb24sZHVyYXRpb246aC56b29tRHVyYXRpb259KSk7aWYodm9pZCAwIT09aC5rZXlib2FyZD9oLmtleWJvYXJkOjEpZy5wdXNoKG5ldyBaZiksZy5wdXNoKG5ldyBhZyh7ZGVsdGE6aC56b29tRGVsdGEsZHVyYXRpb246aC56b29tRHVyYXRpb259KSk7KHZvaWQgMCE9PWgubW91c2VXaGVlbFpvb20/aC5tb3VzZVdoZWVsWm9vbToxKSYmZy5wdXNoKG5ldyBjZyh7Y29uc3RyYWluUmVzb2x1dGlvbjpoLmNvbnN0cmFpblJlc29sdXRpb24sZHVyYXRpb246aC56b29tRHVyYXRpb259KSk7KHZvaWQgMCE9PWguc2hpZnREcmFnWm9vbT9cbmguc2hpZnREcmFnWm9vbToxKSYmZy5wdXNoKG5ldyBZZih7ZHVyYXRpb246aC56b29tRHVyYXRpb259KSk7aD1nfXZvaWQgMCE9PWEub3ZlcmxheXM/QXJyYXkuaXNBcnJheShhLm92ZXJsYXlzKT9hPW5ldyBzYyhhLm92ZXJsYXlzLnNsaWNlKCkpOih3KGEub3ZlcmxheXMgaW5zdGFuY2VvZiBzYyw0OSksYT1hLm92ZXJsYXlzKTphPW5ldyBzYztyZXR1cm57Y29udHJvbHM6ZixpbnRlcmFjdGlvbnM6aCxrZXlib2FyZEV2ZW50VGFyZ2V0OmIsbG9nb3M6ZCxvdmVybGF5czphLEdpOmUsdmFsdWVzOmN9fTtmdW5jdGlvbiBraChhKXtuYy5jYWxsKHRoaXMpO3RoaXMubD1hLmlkO3RoaXMuRD12b2lkIDAhPT1hLmluc2VydEZpcnN0P2EuaW5zZXJ0Rmlyc3Q6ITA7dGhpcy52PXZvaWQgMCE9PWEuc3RvcEV2ZW50P2Euc3RvcEV2ZW50OiEwO3RoaXMuYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO3RoaXMuYy5jbGFzc05hbWU9XCJvbC1vdmVybGF5LWNvbnRhaW5lciBvbC1zZWxlY3RhYmxlXCI7dGhpcy5jLnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIjt0aGlzLmF1dG9QYW49dm9pZCAwIT09YS5hdXRvUGFuP2EuYXV0b1BhbjohMTt0aGlzLmc9YS5hdXRvUGFuQW5pbWF0aW9ufHx7fTt0aGlzLnM9dm9pZCAwIT09YS5hdXRvUGFuTWFyZ2luP2EuYXV0b1Bhbk1hcmdpbjoyMDt0aGlzLmE9e1liOlwiXCIsZmM6XCJcIix2YzpcIlwiLHpjOlwiXCIsdmlzaWJsZTohMH07dGhpcy5pPW51bGw7eSh0aGlzLHBjKGxoKSx0aGlzLnNnLHRoaXMpO3kodGhpcyxwYyhtaCksdGhpcy55Zyx0aGlzKTt5KHRoaXMscGMobmgpLFxudGhpcy5CZyx0aGlzKTt5KHRoaXMscGMob2gpLHRoaXMuRGcsdGhpcyk7eSh0aGlzLHBjKHBoKSx0aGlzLkVnLHRoaXMpO3ZvaWQgMCE9PWEuZWxlbWVudCYmdGhpcy5zZXQobGgsYS5lbGVtZW50KTt0aGlzLnNldChuaCx2b2lkIDAhPT1hLm9mZnNldD9hLm9mZnNldDpbMCwwXSk7dGhpcy5zZXQocGgsdm9pZCAwIT09YS5wb3NpdGlvbmluZz9hLnBvc2l0aW9uaW5nOlwidG9wLWxlZnRcIik7dm9pZCAwIT09YS5wb3NpdGlvbiYmdGhpcy5tZShhLnBvc2l0aW9uKX10KGtoLG5jKTtsPWtoLnByb3RvdHlwZTtsLnNnPWZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuYzthLmxhc3RDaGlsZDspYS5yZW1vdmVDaGlsZChhLmxhc3RDaGlsZCk7KGE9dGhpcy5nZXQobGgpKSYmdGhpcy5jLmFwcGVuZENoaWxkKGEpfTtcbmwueWc9ZnVuY3Rpb24oKXt0aGlzLmkmJihJYyh0aGlzLmMpLFpiKHRoaXMuaSksdGhpcy5pPW51bGwpO3ZhciBhPXRoaXMuZ2V0KG1oKTthJiYodGhpcy5pPXkoYSxcInBvc3RyZW5kZXJcIix0aGlzLnJlbmRlcix0aGlzKSxyaCh0aGlzKSxhPXRoaXMudj9hLkM6YS5ILHRoaXMuRD9hLmluc2VydEJlZm9yZSh0aGlzLmMsYS5jaGlsZE5vZGVzWzBdfHxudWxsKTphLmFwcGVuZENoaWxkKHRoaXMuYykpfTtsLnJlbmRlcj1mdW5jdGlvbigpe3JoKHRoaXMpfTtsLkJnPWZ1bmN0aW9uKCl7cmgodGhpcyl9O1xubC5EZz1mdW5jdGlvbigpe3JoKHRoaXMpO2lmKHRoaXMuZ2V0KG9oKSYmdGhpcy5hdXRvUGFuKXt2YXIgYT10aGlzLmdldChtaCk7aWYoYSYmamgoYSkpe3ZhciBiPXNoKGpoKGEpLGEucGIoKSksYz10aGlzLmdldChsaCksZD1jLm9mZnNldFdpZHRoLGU9Z2V0Q29tcHV0ZWRTdHlsZShjKTtkKz1wYXJzZUludChlLm1hcmdpbkxlZnQsMTApK3BhcnNlSW50KGUubWFyZ2luUmlnaHQsMTApO2U9Yy5vZmZzZXRIZWlnaHQ7dmFyIGY9Z2V0Q29tcHV0ZWRTdHlsZShjKTtlKz1wYXJzZUludChmLm1hcmdpblRvcCwxMCkrcGFyc2VJbnQoZi5tYXJnaW5Cb3R0b20sMTApO3ZhciBnPXNoKGMsW2QsZV0pO2M9dGhpcy5zO01hKGIsZyl8fChkPWdbMF0tYlswXSxlPWJbMl0tZ1syXSxmPWdbMV0tYlsxXSxnPWJbM10tZ1szXSxiPVswLDBdLDA+ZD9iWzBdPWQtYzowPmUmJihiWzBdPU1hdGguYWJzKGUpK2MpLDA+Zj9iWzFdPWYtYzowPmcmJihiWzFdPU1hdGguYWJzKGcpK2MpLDA9PT1iWzBdJiYwPT09XG5iWzFdKXx8KGM9YS5aKCkuYmEoKSxjPUhmKGEsYyksYj1bY1swXStiWzBdLGNbMV0rYlsxXV0sYS5aKCkuYW5pbWF0ZSh7Y2VudGVyOmEuQmEoYiksZHVyYXRpb246dGhpcy5nLmR1cmF0aW9uLGVhc2luZzp0aGlzLmcuZWFzaW5nfSkpfX19O2wuRWc9ZnVuY3Rpb24oKXtyaCh0aGlzKX07bC5zZXRNYXA9ZnVuY3Rpb24oYSl7dGhpcy5zZXQobWgsYSl9O2wubWU9ZnVuY3Rpb24oYSl7dGhpcy5zZXQob2gsYSl9O2Z1bmN0aW9uIHNoKGEsYil7dmFyIGM9YS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTthPWMubGVmdCt3aW5kb3cucGFnZVhPZmZzZXQ7Yz1jLnRvcCt3aW5kb3cucGFnZVlPZmZzZXQ7cmV0dXJuW2EsYyxhK2JbMF0sYytiWzFdXX1mdW5jdGlvbiB0aChhLGIpe2EuYS52aXNpYmxlIT09YiYmKGEuYy5zdHlsZS5kaXNwbGF5PWI/XCJcIjpcIm5vbmVcIixhLmEudmlzaWJsZT1iKX1cbmZ1bmN0aW9uIHJoKGEpe3ZhciBiPWEuZ2V0KG1oKSxjPWEuZ2V0KG9oKTtpZihiJiZiLmMmJmMpe2M9SGYoYixjKTt2YXIgZD1iLnBiKCk7Yj1hLmMuc3R5bGU7dmFyIGU9YS5nZXQobmgpLGY9YS5nZXQocGgpO3RoKGEsITApO3ZhciBnPWVbMF07ZT1lWzFdO2lmKFwiYm90dG9tLXJpZ2h0XCI9PWZ8fFwiY2VudGVyLXJpZ2h0XCI9PWZ8fFwidG9wLXJpZ2h0XCI9PWYpXCJcIiE9PWEuYS5mYyYmKGEuYS5mYz1iLmxlZnQ9XCJcIiksZz1NYXRoLnJvdW5kKGRbMF0tY1swXS1nKStcInB4XCIsYS5hLnZjIT1nJiYoYS5hLnZjPWIucmlnaHQ9Zyk7ZWxzZXtcIlwiIT09YS5hLnZjJiYoYS5hLnZjPWIucmlnaHQ9XCJcIik7aWYoXCJib3R0b20tY2VudGVyXCI9PWZ8fFwiY2VudGVyLWNlbnRlclwiPT1mfHxcInRvcC1jZW50ZXJcIj09ZilnLT1hLmMub2Zmc2V0V2lkdGgvMjtnPU1hdGgucm91bmQoY1swXStnKStcInB4XCI7YS5hLmZjIT1nJiYoYS5hLmZjPWIubGVmdD1nKX1pZihcImJvdHRvbS1sZWZ0XCI9PWZ8fFwiYm90dG9tLWNlbnRlclwiPT1cbmZ8fFwiYm90dG9tLXJpZ2h0XCI9PWYpXCJcIiE9PWEuYS56YyYmKGEuYS56Yz1iLnRvcD1cIlwiKSxjPU1hdGgucm91bmQoZFsxXS1jWzFdLWUpK1wicHhcIixhLmEuWWIhPWMmJihhLmEuWWI9Yi5ib3R0b209Yyk7ZWxzZXtcIlwiIT09YS5hLlliJiYoYS5hLlliPWIuYm90dG9tPVwiXCIpO2lmKFwiY2VudGVyLWxlZnRcIj09Znx8XCJjZW50ZXItY2VudGVyXCI9PWZ8fFwiY2VudGVyLXJpZ2h0XCI9PWYpZS09YS5jLm9mZnNldEhlaWdodC8yO2M9TWF0aC5yb3VuZChjWzFdK2UpK1wicHhcIjthLmEuemMhPWMmJihhLmEuemM9Yi50b3A9Yyl9fWVsc2UgdGgoYSwhMSl9dmFyIGxoPVwiZWxlbWVudFwiLG1oPVwibWFwXCIsbmg9XCJvZmZzZXRcIixvaD1cInBvc2l0aW9uXCIscGg9XCJwb3NpdGlvbmluZ1wiO2Z1bmN0aW9uIHVoKGEpe2E9YT9hOnt9O3ZhciBiPXZvaWQgMCE9PWEuY2xhc3NOYW1lP2EuY2xhc3NOYW1lOlwib2wtc2NhbGUtbGluZVwiO3RoaXMuaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO3RoaXMuaS5jbGFzc05hbWU9YitcIi1pbm5lclwiO3RoaXMuYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiRElWXCIpO3RoaXMuYS5jbGFzc05hbWU9YitcIiBvbC11bnNlbGVjdGFibGVcIjt0aGlzLmEuYXBwZW5kQ2hpbGQodGhpcy5pKTt0aGlzLnM9bnVsbDt0aGlzLmc9dm9pZCAwIT09YS5taW5XaWR0aD9hLm1pbldpZHRoOjY0O3RoaXMuYz0hMTt0aGlzLnU9dm9pZCAwO3RoaXMudj1cIlwiO0pjLmNhbGwodGhpcyx7ZWxlbWVudDp0aGlzLmEscmVuZGVyOmEucmVuZGVyP2EucmVuZGVyOnZoLHRhcmdldDphLnRhcmdldH0pO3kodGhpcyxwYyh3aCksdGhpcy5DLHRoaXMpO3RoaXMuc2V0KHdoLGEudW5pdHN8fFwibWV0cmljXCIpfXQodWgsSmMpO3ZhciB4aD1bMSwyLDVdO1xuZnVuY3Rpb24gdmgoYSl7KGE9YS5mcmFtZVN0YXRlKT90aGlzLnM9YS52aWV3U3RhdGU6dGhpcy5zPW51bGw7eWgodGhpcyl9dWgucHJvdG90eXBlLkM9ZnVuY3Rpb24oKXt5aCh0aGlzKX07XG5mdW5jdGlvbiB5aChhKXt2YXIgYj1hLnM7aWYoYil7dmFyIGM9Yi5jZW50ZXIsZD1iLnByb2plY3Rpb24sZT1hLmdldCh3aCksZj1iLnJlc29sdXRpb24sZz1cImRlZ3JlZXNcIj09ZT9cImRlZ3JlZXNcIjpcIm1cIjtiPUFiKGQpO3ZhciBoPWIubDtoP2M9aChmLGMpOlwiZGVncmVlc1wiPT1iLmYmJiFnfHxcImRlZ3JlZXNcIj09Zz9jPWY6KGg9RGIoYixBYihcIkVQU0c6NDMyNlwiKSksYz1bY1swXS1mLzIsY1sxXSxjWzBdK2YvMixjWzFdLGNbMF0sY1sxXS1mLzIsY1swXSxjWzFdK2YvMl0sYz1oKGMsYywyKSxjPSh1Yi5iKGMuc2xpY2UoMCwyKSxjLnNsaWNlKDIsNCkpK3ViLmIoYy5zbGljZSg0LDYpLGMuc2xpY2UoNiw4KSkpLzIsYj1nP2RiW2ddOmIuaigpLHZvaWQgMCE9PWImJihjLz1iKSk7Yj1jO2M9YS5nKmI7Zz1cIlwiO1wiZGVncmVlc1wiPT1lPyhlPWRiLmRlZ3JlZXMsXCJkZWdyZWVzXCI9PWQuZj9jKj1lOmIvPWUsYzxlLzYwPyhnPVwiXFx1MjAzM1wiLGIqPTM2MDApOmM8ZT8oZz1cIlxcdTIwMzJcIixiKj1cbjYwKTpnPVwiXFx1MDBiMFwiKTpcImltcGVyaWFsXCI9PWU/LjkxNDQ+Yz8oZz1cImluXCIsYi89LjAyNTQpOjE2MDkuMzQ0PmM/KGc9XCJmdFwiLGIvPS4zMDQ4KTooZz1cIm1pXCIsYi89MTYwOS4zNDQpOlwibmF1dGljYWxcIj09ZT8oYi89MTg1MixnPVwibm1cIik6XCJtZXRyaWNcIj09ZT8uMDAxPmM/KGc9XCJcXHUwM2JjbVwiLGIqPTFFNik6MT5jPyhnPVwibW1cIixiKj0xRTMpOjFFMz5jP2c9XCJtXCI6KGc9XCJrbVwiLGIvPTFFMyk6XCJ1c1wiPT1lPy45MTQ0PmM/KGc9XCJpblwiLGIqPTM5LjM3KToxNjA5LjM0ND5jPyhnPVwiZnRcIixiLz0uMzA0ODAwNjEpOihnPVwibWlcIixiLz0xNjA5LjM0NzIpOncoITEsMzMpO2ZvcihlPTMqTWF0aC5mbG9vcihNYXRoLmxvZyhhLmcqYikvTWF0aC5sb2coMTApKTs7KXtjPXhoWyhlJTMrMyklM10qTWF0aC5wb3coMTAsTWF0aC5mbG9vcihlLzMpKTtkPU1hdGgucm91bmQoYy9iKTtpZihpc05hTihkKSl7YS5hLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7YS5jPSExO3JldHVybn1pZihkPj1hLmcpYnJlYWs7XG4rK2V9ZT1jK1wiIFwiK2c7YS52IT1lJiYoYS5pLmlubmVySFRNTD1lLGEudj1lKTthLnUhPWQmJihhLmkuc3R5bGUud2lkdGg9ZCtcInB4XCIsYS51PWQpO2EuY3x8KGEuYS5zdHlsZS5kaXNwbGF5PVwiXCIsYS5jPSEwKX1lbHNlIGEuYyYmKGEuYS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLGEuYz0hMSl9dmFyIHdoPVwidW5pdHNcIjtmdW5jdGlvbiB6aChhKXt0aGlzLmM9YS5vcGFjaXR5O3RoaXMudj1hLnJvdGF0ZVdpdGhWaWV3O3RoaXMubD1hLnJvdGF0aW9uO3RoaXMuYT1hLnNjYWxlO3RoaXMucz1hLnNuYXBUb1BpeGVsfTtmdW5jdGlvbiBBaChhKXt0aGlzLkQ9dGhpcy5CPXRoaXMuZj1udWxsO3RoaXMubWE9dm9pZCAwIT09YS5maWxsP2EuZmlsbDpudWxsO3RoaXMuZWE9WzAsMF07dGhpcy5nPWEucG9pbnRzO3RoaXMuYj12b2lkIDAhPT1hLnJhZGl1cz9hLnJhZGl1czphLnJhZGl1czE7dGhpcy5qPWEucmFkaXVzMjt0aGlzLmk9dm9pZCAwIT09YS5hbmdsZT9hLmFuZ2xlOjA7dGhpcy5qYT12b2lkIDAhPT1hLnN0cm9rZT9hLnN0cm9rZTpudWxsO3RoaXMudT10aGlzLmZhPXRoaXMuQz1udWxsO3RoaXMuTD1hLmF0bGFzTWFuYWdlcjtCaCh0aGlzLHRoaXMuTCk7emguY2FsbCh0aGlzLHtvcGFjaXR5OjEscm90YXRlV2l0aFZpZXc6dm9pZCAwIT09YS5yb3RhdGVXaXRoVmlldz9hLnJvdGF0ZVdpdGhWaWV3OiExLHJvdGF0aW9uOnZvaWQgMCE9PWEucm90YXRpb24/YS5yb3RhdGlvbjowLHNjYWxlOjEsc25hcFRvUGl4ZWw6dm9pZCAwIT09YS5zbmFwVG9QaXhlbD9hLnNuYXBUb1BpeGVsOiEwfSl9XG50KEFoLHpoKTtsPUFoLnByb3RvdHlwZTtsLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IEFoKHtmaWxsOnRoaXMucmEoKT90aGlzLnJhKCkuY2xvbmUoKTp2b2lkIDAscG9pbnRzOnRoaXMuZyxyYWRpdXM6dGhpcy5iLHJhZGl1czI6dGhpcy5qLGFuZ2xlOnRoaXMuaSxzbmFwVG9QaXhlbDp0aGlzLnMsc3Ryb2tlOnRoaXMubmEoKT90aGlzLm5hKCkuY2xvbmUoKTp2b2lkIDAscm90YXRpb246dGhpcy5sLHJvdGF0ZVdpdGhWaWV3OnRoaXMudixhdGxhc01hbmFnZXI6dGhpcy5MfSk7YS5jPXRoaXMuYzthLmE9dGhpcy5hO3JldHVybiBhfTtsLiRiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQ307bC5yYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1hfTtsLktlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRH07bC5oYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLkJ9O2wuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy51fTtsLm5jPWZ1bmN0aW9uKCl7cmV0dXJuIDJ9O2wub2M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYX07XG5sLnFiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZmF9O2wubmE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qYX07bC5qZT1mdW5jdGlvbigpe307bC5sb2FkPWZ1bmN0aW9uKCl7fTtsLmhmPWZ1bmN0aW9uKCl7fTtcbmZ1bmN0aW9uIEJoKGEsYil7dmFyIGM9XCJcIixkPVwiXCIsZT0wLGY9bnVsbCxnPTAsaD0wO2lmKGEuamEpe3ZhciBrPWEuamEuYjtudWxsPT09ayYmKGs9R2cpO2s9R2Moayk7aD1hLmphLmE7dm9pZCAwPT09aCYmKGg9MSk7Zj1hLmphLmY7Zz1hLmphLmk7bGR8fChmPW51bGwsZz0wKTtkPWEuamEuZzt2b2lkIDA9PT1kJiYoZD1cInJvdW5kXCIpO2M9YS5qYS5jO3ZvaWQgMD09PWMmJihjPVwicm91bmRcIik7ZT1hLmphLkI7dm9pZCAwPT09ZSYmKGU9MTApfXZhciBtPTIqKGEuYitoKSsxO2M9e3N0cm9rZVN0eWxlOmssZmY6aCxzaXplOm0sbGluZUNhcDpjLGxpbmVEYXNoOmYsbGluZURhc2hPZmZzZXQ6ZyxsaW5lSm9pbjpkLG1pdGVyTGltaXQ6ZX07aWYodm9pZCAwPT09Yil7dmFyIG49SGMobSxtKTthLkI9bi5jYW52YXM7Yj1tPWEuQi53aWR0aDthLlpkKGMsbiwwLDApO2EubWE/YS5EPWEuQjoobj1IYyhjLnNpemUsYy5zaXplKSxhLkQ9bi5jYW52YXMsYS5ZZChjLG4sMCwwKSl9ZWxzZSBtPVxuTWF0aC5yb3VuZChtKSwoZD0hYS5tYSkmJihuPWEuWWQuYmluZChhLGMpKSxhLmphPyhlPWEuamEsdm9pZCAwPT09ZS5qJiYoZS5qPVwic1wiLGUuaj1lLmI/XCJzdHJpbmdcIj09PXR5cGVvZiBlLmI/ZS5qK2UuYjplLmordihlLmIpLnRvU3RyaW5nKCk6ZS5qK1wiLVwiLGUuais9XCIsXCIrKHZvaWQgMCE9PWUuYz9lLmMudG9TdHJpbmcoKTpcIi1cIikrXCIsXCIrKGUuZj9lLmYudG9TdHJpbmcoKTpcIi1cIikrXCIsXCIrKHZvaWQgMCE9PWUuaT9lLmk6XCItXCIpK1wiLFwiKyh2b2lkIDAhPT1lLmc/ZS5nOlwiLVwiKStcIixcIisodm9pZCAwIT09ZS5CP2UuQi50b1N0cmluZygpOlwiLVwiKStcIixcIisodm9pZCAwIT09ZS5hP2UuYS50b1N0cmluZygpOlwiLVwiKSksZT1lLmopOmU9XCItXCIsYS5tYT8oZj1hLm1hLHZvaWQgMD09PWYuZiYmKGYuZj1mLmIgaW5zdGFuY2VvZiBDYW52YXNQYXR0ZXJufHxmLmIgaW5zdGFuY2VvZiBDYW52YXNHcmFkaWVudD92KGYuYikudG9TdHJpbmcoKTpcImZcIisoZi5iP0RjKGYuYik6XCItXCIpKSxmPWYuZik6XG5mPVwiLVwiLGEuZiYmZT09YS5mWzFdJiZmPT1hLmZbMl0mJmEuYj09YS5mWzNdJiZhLmo9PWEuZls0XSYmYS5pPT1hLmZbNV0mJmEuZz09YS5mWzZdfHwoYS5mPVtcInJcIitlK2YrKHZvaWQgMCE9PWEuYj9hLmIudG9TdHJpbmcoKTpcIi1cIikrKHZvaWQgMCE9PWEuaj9hLmoudG9TdHJpbmcoKTpcIi1cIikrKHZvaWQgMCE9PWEuaT9hLmkudG9TdHJpbmcoKTpcIi1cIikrKHZvaWQgMCE9PWEuZz9hLmcudG9TdHJpbmcoKTpcIi1cIiksZSxmLGEuYixhLmosYS5pLGEuZ10pLG49Yi5hZGQoYS5mWzBdLG0sbSxhLlpkLmJpbmQoYSxjKSxuKSxhLkI9bi5pbWFnZSxhLmVhPVtuLm9mZnNldFgsbi5vZmZzZXRZXSxiPW4uaW1hZ2Uud2lkdGgsYS5EPWQ/bi5iOmEuQjthLkM9W20vMixtLzJdO2EuZmE9W20sbV07YS51PVtiLGJdfVxubC5aZD1mdW5jdGlvbihhLGIsYyxkKXtiLnNldFRyYW5zZm9ybSgxLDAsMCwxLDAsMCk7Yi50cmFuc2xhdGUoYyxkKTtiLmJlZ2luUGF0aCgpO3ZhciBlPXRoaXMuZztpZihJbmZpbml0eT09PWUpYi5hcmMoYS5zaXplLzIsYS5zaXplLzIsdGhpcy5iLDAsMipNYXRoLlBJLCEwKTtlbHNle3ZhciBmPXZvaWQgMCE9PXRoaXMuaj90aGlzLmo6dGhpcy5iO2YhPT10aGlzLmImJihlKj0yKTtmb3IoYz0wO2M8PWU7YysrKXtkPTIqYypNYXRoLlBJL2UtTWF0aC5QSS8yK3RoaXMuaTt2YXIgZz1jJTI/Zjp0aGlzLmI7Yi5saW5lVG8oYS5zaXplLzIrZypNYXRoLmNvcyhkKSxhLnNpemUvMitnKk1hdGguc2luKGQpKX19dGhpcy5tYSYmKGM9dGhpcy5tYS5iLG51bGw9PT1jJiYoYz1FZyksYi5maWxsU3R5bGU9R2MoYyksYi5maWxsKCkpO3RoaXMuamEmJihiLnN0cm9rZVN0eWxlPWEuc3Ryb2tlU3R5bGUsYi5saW5lV2lkdGg9YS5mZixhLmxpbmVEYXNoJiYoYi5zZXRMaW5lRGFzaChhLmxpbmVEYXNoKSxcbmIubGluZURhc2hPZmZzZXQ9YS5saW5lRGFzaE9mZnNldCksYi5saW5lQ2FwPWEubGluZUNhcCxiLmxpbmVKb2luPWEubGluZUpvaW4sYi5taXRlckxpbWl0PWEubWl0ZXJMaW1pdCxiLnN0cm9rZSgpKTtiLmNsb3NlUGF0aCgpfTtcbmwuWWQ9ZnVuY3Rpb24oYSxiLGMsZCl7Yi5zZXRUcmFuc2Zvcm0oMSwwLDAsMSwwLDApO2IudHJhbnNsYXRlKGMsZCk7Yi5iZWdpblBhdGgoKTtjPXRoaXMuZztpZihJbmZpbml0eT09PWMpYi5hcmMoYS5zaXplLzIsYS5zaXplLzIsdGhpcy5iLDAsMipNYXRoLlBJLCEwKTtlbHNle2Q9dm9pZCAwIT09dGhpcy5qP3RoaXMuajp0aGlzLmI7ZCE9PXRoaXMuYiYmKGMqPTIpO3ZhciBlO2ZvcihlPTA7ZTw9YztlKyspe3ZhciBmPTIqZSpNYXRoLlBJL2MtTWF0aC5QSS8yK3RoaXMuaTt2YXIgZz1lJTI/ZDp0aGlzLmI7Yi5saW5lVG8oYS5zaXplLzIrZypNYXRoLmNvcyhmKSxhLnNpemUvMitnKk1hdGguc2luKGYpKX19Yi5maWxsU3R5bGU9RWc7Yi5maWxsKCk7dGhpcy5qYSYmKGIuc3Ryb2tlU3R5bGU9YS5zdHJva2VTdHlsZSxiLmxpbmVXaWR0aD1hLmZmLGEubGluZURhc2gmJihiLnNldExpbmVEYXNoKGEubGluZURhc2gpLGIubGluZURhc2hPZmZzZXQ9YS5saW5lRGFzaE9mZnNldCksYi5zdHJva2UoKSk7XG5iLmNsb3NlUGF0aCgpfTtmdW5jdGlvbiBDaChhKXthPWF8fHt9O0FoLmNhbGwodGhpcyx7cG9pbnRzOkluZmluaXR5LGZpbGw6YS5maWxsLHJhZGl1czphLnJhZGl1cyxzbmFwVG9QaXhlbDphLnNuYXBUb1BpeGVsLHN0cm9rZTphLnN0cm9rZSxhdGxhc01hbmFnZXI6YS5hdGxhc01hbmFnZXJ9KX10KENoLEFoKTtDaC5wcm90b3R5cGUuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgQ2goe2ZpbGw6dGhpcy5yYSgpP3RoaXMucmEoKS5jbG9uZSgpOnZvaWQgMCxzdHJva2U6dGhpcy5uYSgpP3RoaXMubmEoKS5jbG9uZSgpOnZvaWQgMCxyYWRpdXM6dGhpcy5iLHNuYXBUb1BpeGVsOnRoaXMucyxhdGxhc01hbmFnZXI6dGhpcy5MfSk7YS5jPXRoaXMuYzthLmE9dGhpcy5hO3JldHVybiBhfTtDaC5wcm90b3R5cGUuYWY9ZnVuY3Rpb24oYSl7dGhpcy5iPWE7QmgodGhpcyx0aGlzLkwpfTtmdW5jdGlvbiBEaChhKXthPWF8fHt9O3RoaXMuYj12b2lkIDAhPT1hLmNvbG9yP2EuY29sb3I6bnVsbDt0aGlzLmY9dm9pZCAwfURoLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYjtyZXR1cm4gbmV3IERoKHtjb2xvcjphJiZhLnNsaWNlP2Euc2xpY2UoKTphfHx2b2lkIDB9KX07ZnVuY3Rpb24gRWgoYSl7YT1hfHx7fTt0aGlzLlZhPW51bGw7dGhpcy5BYT1GaDt2b2lkIDAhPT1hLmdlb21ldHJ5JiZ0aGlzLnhhKGEuZ2VvbWV0cnkpO3RoaXMubWE9dm9pZCAwIT09YS5maWxsP2EuZmlsbDpudWxsO3RoaXMuTj12b2lkIDAhPT1hLmltYWdlP2EuaW1hZ2U6bnVsbDt0aGlzLiRhPWEucmVuZGVyZXI/YS5yZW5kZXJlcjpudWxsO3RoaXMuamE9dm9pZCAwIT09YS5zdHJva2U/YS5zdHJva2U6bnVsbDt0aGlzLmRhPXZvaWQgMCE9PWEudGV4dD9hLnRleHQ6bnVsbDt0aGlzLlVpPWEuekluZGV4fWw9RWgucHJvdG90eXBlO1xubC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuUCgpO2EmJmEuY2xvbmUmJihhPWEuY2xvbmUoKSk7cmV0dXJuIG5ldyBFaCh7Z2VvbWV0cnk6YSxmaWxsOnRoaXMucmEoKT90aGlzLnJhKCkuY2xvbmUoKTp2b2lkIDAsaW1hZ2U6dGhpcy5oYSgpP3RoaXMuaGEoKS5jbG9uZSgpOnZvaWQgMCxzdHJva2U6dGhpcy5uYSgpP3RoaXMubmEoKS5jbG9uZSgpOnZvaWQgMCx0ZXh0OnRoaXMub2EoKT90aGlzLm9hKCkuY2xvbmUoKTp2b2lkIDAsekluZGV4OnRoaXMucGEoKX0pfTtsLiRjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuJGF9O2wuUD1mdW5jdGlvbigpe3JldHVybiB0aGlzLlZhfTtsLnJhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF9O2wuJGU9ZnVuY3Rpb24oYSl7dGhpcy5tYT1hfTtsLmhhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTn07bC5uYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmphfTtsLmNmPWZ1bmN0aW9uKGEpe3RoaXMuamE9YX07bC5vYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhfTtcbmwuZGY9ZnVuY3Rpb24oYSl7dGhpcy5kYT1hfTtsLnBhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuVWl9O2wueGE9ZnVuY3Rpb24oYSl7XCJmdW5jdGlvblwiPT09dHlwZW9mIGE/dGhpcy5BYT1hOlwic3RyaW5nXCI9PT10eXBlb2YgYT90aGlzLkFhPWZ1bmN0aW9uKGIpe3JldHVybiBiLmdldChhKX06YT9hJiYodGhpcy5BYT1mdW5jdGlvbigpe3JldHVybiBhfSk6dGhpcy5BYT1GaDt0aGlzLlZhPWF9O2Z1bmN0aW9uIEdoKGEpe2lmKFwiZnVuY3Rpb25cIiE9PXR5cGVvZiBhKXtpZihBcnJheS5pc0FycmF5KGEpKXZhciBiPWE7ZWxzZSB3KGEgaW5zdGFuY2VvZiBFaCw0MSksYj1bYV07YT1mdW5jdGlvbigpe3JldHVybiBifX1yZXR1cm4gYX12YXIgSGg9bnVsbDtcbmZ1bmN0aW9uIEloKCl7aWYoIUhoKXt2YXIgYT1uZXcgRGgoe2NvbG9yOlwicmdiYSgyNTUsMjU1LDI1NSwwLjQpXCJ9KSxiPW5ldyBZZyh7Y29sb3I6XCIjMzM5OUNDXCIsd2lkdGg6MS4yNX0pO0hoPVtuZXcgRWgoe2ltYWdlOm5ldyBDaCh7ZmlsbDphLHN0cm9rZTpiLHJhZGl1czo1fSksZmlsbDphLHN0cm9rZTpifSldfXJldHVybiBIaH1cbmZ1bmN0aW9uIEpoKCl7dmFyIGE9e30sYj1bMjU1LDI1NSwyNTUsMV0sYz1bMCwxNTMsMjU1LDFdO2EuUG9seWdvbj1bbmV3IEVoKHtmaWxsOm5ldyBEaCh7Y29sb3I6WzI1NSwyNTUsMjU1LC41XX0pfSldO2EuTXVsdGlQb2x5Z29uPWEuUG9seWdvbjthLkxpbmVTdHJpbmc9W25ldyBFaCh7c3Ryb2tlOm5ldyBZZyh7Y29sb3I6Yix3aWR0aDo1fSl9KSxuZXcgRWgoe3N0cm9rZTpuZXcgWWcoe2NvbG9yOmMsd2lkdGg6M30pfSldO2EuTXVsdGlMaW5lU3RyaW5nPWEuTGluZVN0cmluZzthLkNpcmNsZT1hLlBvbHlnb24uY29uY2F0KGEuTGluZVN0cmluZyk7YS5Qb2ludD1bbmV3IEVoKHtpbWFnZTpuZXcgQ2goe3JhZGl1czo2LGZpbGw6bmV3IERoKHtjb2xvcjpjfSksc3Ryb2tlOm5ldyBZZyh7Y29sb3I6Yix3aWR0aDoxLjV9KX0pLHpJbmRleDpJbmZpbml0eX0pXTthLk11bHRpUG9pbnQ9YS5Qb2ludDthLkdlb21ldHJ5Q29sbGVjdGlvbj1hLlBvbHlnb24uY29uY2F0KGEuTGluZVN0cmluZyxcbmEuUG9pbnQpO3JldHVybiBhfWZ1bmN0aW9uIEZoKGEpe3JldHVybiBhLlAoKX07ZnVuY3Rpb24gRShhKXtuYy5jYWxsKHRoaXMpO3RoaXMuYT12b2lkIDA7dGhpcy5jPVwiZ2VvbWV0cnlcIjt0aGlzLmc9bnVsbDt0aGlzLmw9dm9pZCAwO3RoaXMuaT1udWxsO3kodGhpcyxwYyh0aGlzLmMpLHRoaXMuZGMsdGhpcyk7dm9pZCAwIT09YSYmKGEgaW5zdGFuY2VvZiB1ZXx8IWE/dGhpcy54YShhKTp0aGlzLnFhKGEpKX10KEUsbmMpO2w9RS5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBFKHRoaXMuQ2EoKSk7YS5zYih0aGlzLmMpO3ZhciBiPXRoaXMuUCgpO2ImJmEueGEoYi5jbG9uZSgpKTsoYj10aGlzLmcpJiZhLmxlKGIpO3JldHVybiBhfTtsLlA9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQodGhpcy5jKX07bC5qaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2wuaGc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jfTtsLmtoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ307bC5hYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmx9O2wudGc9ZnVuY3Rpb24oKXt0aGlzLmIoKX07XG5sLmRjPWZ1bmN0aW9uKCl7dGhpcy5pJiYoWmIodGhpcy5pKSx0aGlzLmk9bnVsbCk7dmFyIGE9dGhpcy5QKCk7YSYmKHRoaXMuaT15KGEsXCJjaGFuZ2VcIix0aGlzLnRnLHRoaXMpKTt0aGlzLmIoKX07bC54YT1mdW5jdGlvbihhKXt0aGlzLnNldCh0aGlzLmMsYSl9O2wubGU9ZnVuY3Rpb24oYSl7dGhpcy5sPSh0aGlzLmc9YSk/S2goYSk6dm9pZCAwO3RoaXMuYigpfTtsLmFiPWZ1bmN0aW9uKGEpe3RoaXMuYT1hO3RoaXMuYigpfTtsLnNiPWZ1bmN0aW9uKGEpe2RjKHRoaXMscGModGhpcy5jKSx0aGlzLmRjLHRoaXMpO3RoaXMuYz1hO3kodGhpcyxwYyh0aGlzLmMpLHRoaXMuZGMsdGhpcyk7dGhpcy5kYygpfTtcbmZ1bmN0aW9uIEtoKGEpe3ZhciBiO2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKTI9PWEubGVuZ3RoP2I9ZnVuY3Rpb24oYil7cmV0dXJuIGEodGhpcyxiKX06Yj1hO2Vsc2V7aWYoQXJyYXkuaXNBcnJheShhKSl2YXIgYz1hO2Vsc2UgdyhhIGluc3RhbmNlb2YgRWgsNDEpLGM9W2FdO2I9ZnVuY3Rpb24oKXtyZXR1cm4gY319cmV0dXJuIGJ9O3ZhciBMaD1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudChcIlwiLFwiXCIsbnVsbCk7ZnVuY3Rpb24gTWgoYSxiKXtyZXR1cm4gTGguY3JlYXRlRWxlbWVudE5TKGEsYil9ZnVuY3Rpb24gTmgoYSl7cmV0dXJuIE9oKGEsITEsW10pLmpvaW4oXCJcIil9ZnVuY3Rpb24gT2goYSxiLGMpe2lmKGEubm9kZVR5cGU9PU5vZGUuQ0RBVEFfU0VDVElPTl9OT0RFfHxhLm5vZGVUeXBlPT1Ob2RlLlRFWFRfTk9ERSliP2MucHVzaChTdHJpbmcoYS5ub2RlVmFsdWUpLnJlcGxhY2UoLyhcXHJcXG58XFxyfFxcbikvZyxcIlwiKSk6Yy5wdXNoKGEubm9kZVZhbHVlKTtlbHNlIGZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZylPaChhLGIsYyk7cmV0dXJuIGN9ZnVuY3Rpb24gUGgoYSl7cmV0dXJuKG5ldyBET01QYXJzZXIpLnBhcnNlRnJvbVN0cmluZyhhLFwiYXBwbGljYXRpb24veG1sXCIpfVxuZnVuY3Rpb24gSihhLGIpe3JldHVybiBmdW5jdGlvbihjLGQpe2M9YS5jYWxsKHZvaWQgMCE9PWI/Yjp0aGlzLGMsZCk7dm9pZCAwIT09YyYmZFtkLmxlbmd0aC0xXS5wdXNoKGMpfX1mdW5jdGlvbiBMKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7Yz1hLmNhbGwodm9pZCAwIT09Yj9iOnRoaXMsYyxkKTt2b2lkIDAhPT1jJiYoZFtkLmxlbmd0aC0xXT1jKX19ZnVuY3Rpb24gUWgoYSl7cmV0dXJuIGZ1bmN0aW9uKGIsYyl7dmFyIGQ9YS5jYWxsKHRoaXMsYixjKTtpZih2b2lkIDAhPT1kKXtjPWNbYy5sZW5ndGgtMV07Yj1iLmxvY2FsTmFtZTt2YXIgZTtiIGluIGM/ZT1jW2JdOmU9Y1tiXT1bXTtlLnB1c2goZCl9fX1mdW5jdGlvbiBNKGEsYil7cmV0dXJuIGZ1bmN0aW9uKGMsZCl7dmFyIGU9YS5jYWxsKHRoaXMsYyxkKTt2b2lkIDAhPT1lJiYoZFtkLmxlbmd0aC0xXVt2b2lkIDAhPT1iP2I6Yy5sb2NhbE5hbWVdPWUpfX1cbmZ1bmN0aW9uIE4oYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyxkLGUpe2EuY2FsbCh2b2lkIDAhPT1iP2I6dGhpcyxjLGQsZSk7ZVtlLmxlbmd0aC0xXS5ub2RlLmFwcGVuZENoaWxkKGMpfX1mdW5jdGlvbiBSaChhKXt2YXIgYixjO3JldHVybiBmdW5jdGlvbihkLGUsZil7aWYoIWIpe2I9e307dmFyIGc9e307Z1tkLmxvY2FsTmFtZV09YTtiW2QubmFtZXNwYWNlVVJJXT1nO2M9U2goZC5sb2NhbE5hbWUpfVRoKGIsYyxlLGYpfX1mdW5jdGlvbiBTaChhLGIpe3JldHVybiBmdW5jdGlvbihjLGQsZSl7Yz1kW2QubGVuZ3RoLTFdLm5vZGU7ZD1hO3ZvaWQgMD09PWQmJihkPWUpO2U9Yjt2b2lkIDA9PT1iJiYoZT1jLm5hbWVzcGFjZVVSSSk7cmV0dXJuIE1oKGUsZCl9fXZhciBVaD1TaCgpO2Z1bmN0aW9uIFZoKGEsYil7Zm9yKHZhciBjPWIubGVuZ3RoLGQ9QXJyYXkoYyksZT0wO2U8YzsrK2UpZFtlXT1hW2JbZV1dO3JldHVybiBkfVxuZnVuY3Rpb24gTyhhLGIsYyl7Yz12b2lkIDAhPT1jP2M6e307dmFyIGQ7dmFyIGU9MDtmb3IoZD1hLmxlbmd0aDtlPGQ7KytlKWNbYVtlXV09YjtyZXR1cm4gY31mdW5jdGlvbiBXaChhLGIsYyxkKXtmb3IoYj1iLmZpcnN0RWxlbWVudENoaWxkO2I7Yj1iLm5leHRFbGVtZW50U2libGluZyl7dmFyIGU9YVtiLm5hbWVzcGFjZVVSSV07dm9pZCAwIT09ZSYmKGU9ZVtiLmxvY2FsTmFtZV0pJiZlLmNhbGwoZCxiLGMpfX1mdW5jdGlvbiBQKGEsYixjLGQsZSl7ZC5wdXNoKGEpO1doKGIsYyxkLGUpO3JldHVybiBkLnBvcCgpfWZ1bmN0aW9uIFRoKGEsYixjLGQsZSxmKXtmb3IodmFyIGc9KHZvaWQgMCE9PWU/ZTpjKS5sZW5ndGgsaCxrLG09MDttPGc7KyttKWg9Y1ttXSx2b2lkIDAhPT1oJiYoaz1iLmNhbGwoZixoLGQsdm9pZCAwIT09ZT9lW21dOnZvaWQgMCksdm9pZCAwIT09ayYmYVtrLm5hbWVzcGFjZVVSSV1bay5sb2NhbE5hbWVdLmNhbGwoZixrLGgsZCkpfVxuZnVuY3Rpb24gUShhLGIsYyxkLGUsZixnKXtlLnB1c2goYSk7VGgoYixjLGQsZSxmLGcpO2UucG9wKCl9O2Z1bmN0aW9uIFhoKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlLGYpe3ZhciBnPW5ldyBYTUxIdHRwUmVxdWVzdDtnLm9wZW4oXCJHRVRcIixcImZ1bmN0aW9uXCI9PT10eXBlb2YgYT9hKGQsZSxmKTphLCEwKTtcImFycmF5YnVmZmVyXCI9PWIuSSgpJiYoZy5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiKTtnLm9ubG9hZD1mdW5jdGlvbigpe2lmKCFnLnN0YXR1c3x8MjAwPD1nLnN0YXR1cyYmMzAwPmcuc3RhdHVzKXt2YXIgYT1iLkkoKTtpZihcImpzb25cIj09YXx8XCJ0ZXh0XCI9PWEpdmFyIGQ9Zy5yZXNwb25zZVRleHQ7ZWxzZVwieG1sXCI9PWE/KGQ9Zy5yZXNwb25zZVhNTCl8fChkPVBoKGcucmVzcG9uc2VUZXh0KSk6XCJhcnJheWJ1ZmZlclwiPT1hJiYoZD1nLnJlc3BvbnNlKTtkJiZjLmNhbGwodGhpcyxiLlJhKGQse2ZlYXR1cmVQcm9qZWN0aW9uOmZ9KSxiLnRjKGQpLG51bGwpfX0uYmluZCh0aGlzKTtnLm9uZXJyb3I9ZnVuY3Rpb24oKXt9LmJpbmQodGhpcyk7Zy5zZW5kKCl9fVxuZnVuY3Rpb24gWWgoYSxiKXtyZXR1cm4gWGgoYSxiLGZ1bmN0aW9uKGEpe3RoaXMud2IoYSl9KX07ZnVuY3Rpb24gWmgoKXt0aGlzLmo9dGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb249bnVsbH1mdW5jdGlvbiAkaChhLGIsYyl7dmFyIGQ7YyYmKGQ9e2RhdGFQcm9qZWN0aW9uOmMuZGF0YVByb2plY3Rpb24/Yy5kYXRhUHJvamVjdGlvbjphLnRjKGIpLGZlYXR1cmVQcm9qZWN0aW9uOmMuZmVhdHVyZVByb2plY3Rpb259KTtyZXR1cm4gYWkoYSxkKX1mdW5jdGlvbiBhaShhLGIpe3JldHVybiBaYSh7ZGF0YVByb2plY3Rpb246YS5kZWZhdWx0RGF0YVByb2plY3Rpb24sZmVhdHVyZVByb2plY3Rpb246YS5qfSxiKX1cbmZ1bmN0aW9uIGJpKGEsYixjKXt2YXIgZD1jP0FiKGMuZmVhdHVyZVByb2plY3Rpb24pOm51bGwsZT1jP0FiKGMuZGF0YVByb2plY3Rpb24pOm51bGwsZjtkJiZlJiYhQ2IoZCxlKT9hIGluc3RhbmNlb2YgdWU/Zj0oYj9hLmNsb25lKCk6YSkuQyhiP2Q6ZSxiP2U6ZCk6Zj1HYihhLGUsZCk6Zj1hO2lmKGImJmMmJnZvaWQgMCE9PWMuZGVjaW1hbHMpe3ZhciBnPU1hdGgucG93KDEwLGMuZGVjaW1hbHMpO2Y9PT1hJiYoZj1mLmNsb25lKCkpO2YueGIoZnVuY3Rpb24oYSl7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtiPGM7KytiKWFbYl09TWF0aC5yb3VuZChhW2JdKmcpL2c7cmV0dXJuIGF9KX1yZXR1cm4gZn07ZnVuY3Rpb24gY2koKXtaaC5jYWxsKHRoaXMpfXQoY2ksWmgpO2Z1bmN0aW9uIGRpKGEpe3JldHVyblwic3RyaW5nXCI9PT10eXBlb2YgYT8oYT1KU09OLnBhcnNlKGEpKT9hOm51bGw6bnVsbCE9PWE/YTpudWxsfWw9Y2kucHJvdG90eXBlO2wuST1mdW5jdGlvbigpe3JldHVyblwianNvblwifTtsLnBjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuWmEoZGkoYSksJGgodGhpcyxhLGIpKX07bC5SYT1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnFkKGRpKGEpLCRoKHRoaXMsYSxiKSl9O2wudGM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudWQoZGkoYSkpfTtsLkFkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMudWIoYSxiKSl9O2Z1bmN0aW9uIGVpKGEsYixjLGQsZSxmKXt2YXIgZz1OYU4saD1OYU4saz0oYy1iKS9kO2lmKDE9PT1rKWc9YVtiXSxoPWFbYisxXTtlbHNlIGlmKDI9PWspZz0oMS1lKSphW2JdK2UqYVtiK2RdLGg9KDEtZSkqYVtiKzFdK2UqYVtiK2QrMV07ZWxzZSBpZihrKXtoPWFbYl07az1hW2IrMV07dmFyIG09MDtnPVswXTt2YXIgbjtmb3Iobj1iK2Q7bjxjO24rPWQpe3ZhciBwPWFbbl0scj1hW24rMV07bSs9TWF0aC5zcXJ0KChwLWgpKihwLWgpKyhyLWspKihyLWspKTtnLnB1c2gobSk7aD1wO2s9cn1jPWUqbTtrPTA7bT1nLmxlbmd0aDtmb3Iobj0hMTtrPG07KWU9aysobS1rPj4xKSxoPStmYShnW2VdLGMpLDA+aD9rPWUrMToobT1lLG49IWgpO2U9bj9rOn5rOzA+ZT8oYz0oYy1nWy1lLTJdKS8oZ1stZS0xXS1nWy1lLTJdKSxiKz0oLWUtMikqZCxnPUFhKGFbYl0sYVtiK2RdLGMpLGg9QWEoYVtiKzFdLGFbYitkKzFdLGMpKTooZz1hW2IrZSpkXSxoPWFbYitlKmQrMV0pfXJldHVybiBmP1xuKGZbMF09ZyxmWzFdPWgsZik6W2csaF19ZnVuY3Rpb24gZmkoYSxiLGMsZCxlKXtpZighYilyZXR1cm4gbnVsbDtpZihkPGFbMCtjLTFdKXJldHVybiBlPyhiPWEuc2xpY2UoMCwwK2MpLGJbYy0xXT1kLGIpOm51bGw7aWYoYVtiLTFdPGQpcmV0dXJuIGU/KGI9YS5zbGljZShiLWMsYiksYltjLTFdPWQsYik6bnVsbDtpZihkPT1hWzArYy0xXSlyZXR1cm4gYS5zbGljZSgwLDArYyk7ZT0wL2M7Zm9yKGIvPWM7ZTxiOyl7dmFyIGY9ZStiPj4xO2Q8YVsoZisxKSpjLTFdP2I9ZjplPWYrMX1iPWFbZSpjLTFdO2lmKGQ9PWIpcmV0dXJuIGEuc2xpY2UoKGUtMSkqYywoZS0xKSpjK2MpO2Y9KGQtYikvKGFbKGUrMSkqYy0xXS1iKTtiPVtdO3ZhciBnO2ZvcihnPTA7ZzxjLTE7KytnKWIucHVzaChBYShhWyhlLTEpKmMrZ10sYVtlKmMrZ10sZikpO2IucHVzaChkKTtyZXR1cm4gYn07ZnVuY3Rpb24gUyhhLGIpe3dlLmNhbGwodGhpcyk7dGhpcy5hPW51bGw7dGhpcy52PXRoaXMudT10aGlzLmc9LTE7dGhpcy5ZKGEsYil9dChTLHdlKTtsPVMucHJvdG90eXBlO2wuWGY9ZnVuY3Rpb24oYSl7dGhpcy5vP2lhKHRoaXMubyxhKTp0aGlzLm89YS5zbGljZSgpO3RoaXMuYigpfTtsLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGE9bmV3IFMobnVsbCk7Z2koYSx0aGlzLlcsdGhpcy5vLnNsaWNlKCkpO3JldHVybiBhfTtsLkdhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8TGEodGhpcy5LKCksYSxiKSlyZXR1cm4gZDt0aGlzLnYhPXRoaXMuaiYmKHRoaXMudT1NYXRoLnNxcnQoQ2UodGhpcy5vLDAsdGhpcy5vLmxlbmd0aCx0aGlzLkEsMCkpLHRoaXMudj10aGlzLmopO3JldHVybiBFZSh0aGlzLm8sMCx0aGlzLm8ubGVuZ3RoLHRoaXMuQSx0aGlzLnUsITEsYSxiLGMsZCl9O1xubC5EZT1mdW5jdGlvbihhLGIpe3JldHVyblwiWFlNXCIhPXRoaXMuVyYmXCJYWVpNXCIhPXRoaXMuVz9udWxsOmZpKHRoaXMubyx0aGlzLm8ubGVuZ3RoLHRoaXMuQSxhLHZvaWQgMCE9PWI/YjohMSl9O2wuRz1mdW5jdGlvbigpe3JldHVybiBKZSh0aGlzLm8sMCx0aGlzLm8ubGVuZ3RoLHRoaXMuQSl9O2wuJGQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZWkodGhpcy5vLDAsdGhpcy5vLmxlbmd0aCx0aGlzLkEsYSxiKX07bC5EaD1mdW5jdGlvbigpe3ZhciBhPXRoaXMubyxiPXRoaXMuQSxjPWFbMF0sZD1hWzFdLGU9MCxmO2ZvcihmPTArYjtmPHRoaXMuby5sZW5ndGg7Zis9Yil7dmFyIGc9YVtmXSxoPWFbZisxXTtlKz1NYXRoLnNxcnQoKGctYykqKGctYykrKGgtZCkqKGgtZCkpO2M9ZztkPWh9cmV0dXJuIGV9O2Z1bmN0aW9uIFFnKGEpe2EuZyE9YS5qJiYoYS5hPWEuJGQoLjUsYS5hKSxhLmc9YS5qKTtyZXR1cm4gYS5hfVxubC5rYj1mdW5jdGlvbihhKXt2YXIgYj1bXTtiLmxlbmd0aD1NZSh0aGlzLm8sMCx0aGlzLm8ubGVuZ3RoLHRoaXMuQSxhLGIsMCk7YT1uZXcgUyhudWxsKTtnaShhLFwiWFlcIixiKTtyZXR1cm4gYX07bC5JPWZ1bmN0aW9uKCl7cmV0dXJuXCJMaW5lU3RyaW5nXCJ9O2wuWT1mdW5jdGlvbihhLGIpe2E/KHplKHRoaXMsYixhLDEpLHRoaXMub3x8KHRoaXMubz1bXSksdGhpcy5vLmxlbmd0aD1IZSh0aGlzLm8sMCxhLHRoaXMuQSksdGhpcy5iKCkpOmdpKHRoaXMsXCJYWVwiLG51bGwpfTtmdW5jdGlvbiBnaShhLGIsYyl7eWUoYSxiLGMpO2EuYigpfTtmdW5jdGlvbiBoaShhLGIpe3dlLmNhbGwodGhpcyk7dGhpcy5hPVtdO3RoaXMuZz10aGlzLnY9LTE7dGhpcy5ZKGEsYil9dChoaSx3ZSk7bD1oaS5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyBoaShudWxsKTtpaShhLHRoaXMuVyx0aGlzLm8uc2xpY2UoKSx0aGlzLmEuc2xpY2UoKSk7cmV0dXJuIGF9O2wuR2E9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoZDxMYSh0aGlzLksoKSxhLGIpKXJldHVybiBkO3RoaXMuZyE9dGhpcy5qJiYodGhpcy52PU1hdGguc3FydChEZSh0aGlzLm8sMCx0aGlzLmEsdGhpcy5BLDApKSx0aGlzLmc9dGhpcy5qKTtyZXR1cm4gRmUodGhpcy5vLDAsdGhpcy5hLHRoaXMuQSx0aGlzLnYsITEsYSxiLGMsZCl9O2wuRz1mdW5jdGlvbigpe3JldHVybiBLZSh0aGlzLm8sMCx0aGlzLmEsdGhpcy5BKX07bC5RYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O1xubC5qYj1mdW5jdGlvbigpe3ZhciBhPXRoaXMubyxiPXRoaXMuYSxjPXRoaXMuVyxkPVtdLGU9MCxmO3ZhciBnPTA7Zm9yKGY9Yi5sZW5ndGg7ZzxmOysrZyl7dmFyIGg9YltnXSxrPW5ldyBTKG51bGwpO2dpKGssYyxhLnNsaWNlKGUsaCkpO2QucHVzaChrKTtlPWh9cmV0dXJuIGR9O2Z1bmN0aW9uIFJnKGEpe3ZhciBiPVtdLGM9YS5vLGQ9MCxlPWEuYTthPWEuQTt2YXIgZjt2YXIgZz0wO2ZvcihmPWUubGVuZ3RoO2c8ZjsrK2cpe3ZhciBoPWVbZ107ZD1laShjLGQsaCxhLC41KTtpYShiLGQpO2Q9aH1yZXR1cm4gYn1sLmtiPWZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD10aGlzLm8sZT10aGlzLmEsZj10aGlzLkEsZz0wLGg9MCxrO3ZhciBtPTA7Zm9yKGs9ZS5sZW5ndGg7bTxrOysrbSl7dmFyIG49ZVttXTtoPU1lKGQsZyxuLGYsYSxiLGgpO2MucHVzaChoKTtnPW59Yi5sZW5ndGg9aDthPW5ldyBoaShudWxsKTtpaShhLFwiWFlcIixiLGMpO3JldHVybiBhfTtsLkk9ZnVuY3Rpb24oKXtyZXR1cm5cIk11bHRpTGluZVN0cmluZ1wifTtcbmwuWT1mdW5jdGlvbihhLGIpe2E/KHplKHRoaXMsYixhLDIpLHRoaXMub3x8KHRoaXMubz1bXSksYT1JZSh0aGlzLm8sMCxhLHRoaXMuQSx0aGlzLmEpLHRoaXMuby5sZW5ndGg9YS5sZW5ndGg/YVthLmxlbmd0aC0xXTowLHRoaXMuYigpKTppaSh0aGlzLFwiWFlcIixudWxsLHRoaXMuYSl9O2Z1bmN0aW9uIGlpKGEsYixjLGQpe3llKGEsYixjKTthLmE9ZDthLmIoKX1mdW5jdGlvbiBqaShhLGIpe3ZhciBjPWEuVyxkPVtdLGU9W10sZjt2YXIgZz0wO2ZvcihmPWIubGVuZ3RoO2c8ZjsrK2cpe3ZhciBoPWJbZ107Z3x8KGM9aC5XKTtpYShkLGgubyk7ZS5wdXNoKGQubGVuZ3RoKX1paShhLGMsZCxlKX07ZnVuY3Rpb24ga2koYSxiKXt3ZS5jYWxsKHRoaXMpO3RoaXMuWShhLGIpfXQoa2ksd2UpO2w9a2kucHJvdG90eXBlO2wuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcga2kobnVsbCk7eWUoYSx0aGlzLlcsdGhpcy5vLnNsaWNlKCkpO2EuYigpO3JldHVybiBhfTtsLkdhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8TGEodGhpcy5LKCksYSxiKSlyZXR1cm4gZDt2YXIgZT10aGlzLm8sZj10aGlzLkEsZzt2YXIgaD0wO2ZvcihnPWUubGVuZ3RoO2g8ZztoKz1mKXt2YXIgaz14YShhLGIsZVtoXSxlW2grMV0pO2lmKGs8ZCl7ZD1rO2ZvcihrPTA7azxmOysrayljW2tdPWVbaCtrXTtjLmxlbmd0aD1mfX1yZXR1cm4gZH07bC5HPWZ1bmN0aW9uKCl7cmV0dXJuIEplKHRoaXMubywwLHRoaXMuby5sZW5ndGgsdGhpcy5BKX07XG5mdW5jdGlvbiBsaShhKXt2YXIgYj1hLm8sYz1hLlc7YT1hLkE7dmFyIGQ9W10sZTt2YXIgZj0wO2ZvcihlPWIubGVuZ3RoO2Y8ZTtmKz1hKXt2YXIgZz1uZXcgUWUobnVsbCksaD1nO3llKGgsYyxiLnNsaWNlKGYsZithKSk7aC5iKCk7ZC5wdXNoKGcpfXJldHVybiBkfWwuST1mdW5jdGlvbigpe3JldHVyblwiTXVsdGlQb2ludFwifTtsLlk9ZnVuY3Rpb24oYSxiKXthPyh6ZSh0aGlzLGIsYSwxKSx0aGlzLm98fCh0aGlzLm89W10pLHRoaXMuby5sZW5ndGg9SGUodGhpcy5vLDAsYSx0aGlzLkEpKTp5ZSh0aGlzLFwiWFlcIixudWxsKTt0aGlzLmIoKX07ZnVuY3Rpb24gbWkoYSxiKXt3ZS5jYWxsKHRoaXMpO3RoaXMuYT1bXTt0aGlzLnY9LTE7dGhpcy51PW51bGw7dGhpcy5YPXRoaXMuSD10aGlzLko9LTE7dGhpcy5nPW51bGw7dGhpcy5ZKGEsYil9dChtaSx3ZSk7bD1taS5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe2Zvcih2YXIgYT1uZXcgbWkobnVsbCksYj10aGlzLmEubGVuZ3RoLGM9QXJyYXkoYiksZD0wO2Q8YjsrK2QpY1tkXT10aGlzLmFbZF0uc2xpY2UoKTtuaShhLHRoaXMuVyx0aGlzLm8uc2xpY2UoKSxjKTtyZXR1cm4gYX07XG5sLkdhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKGQ8TGEodGhpcy5LKCksYSxiKSlyZXR1cm4gZDtpZih0aGlzLkghPXRoaXMuail7dmFyIGU9dGhpcy5hLGY9MCxnPTAsaDt2YXIgaz0wO2ZvcihoPWUubGVuZ3RoO2s8aDsrK2spe3ZhciBtPWVba107Zz1EZSh0aGlzLm8sZixtLHRoaXMuQSxnKTtmPW1bbS5sZW5ndGgtMV19dGhpcy5KPU1hdGguc3FydChnKTt0aGlzLkg9dGhpcy5qfWU9U2codGhpcyk7Zj10aGlzLmE7Zz10aGlzLkE7az10aGlzLko7aD0wO209W05hTixOYU5dO3ZhciBuO3ZhciBwPTA7Zm9yKG49Zi5sZW5ndGg7cDxuOysrcCl7dmFyIHI9ZltwXTtkPUZlKGUsaCxyLGcsaywhMCxhLGIsYyxkLG0pO2g9cltyLmxlbmd0aC0xXX1yZXR1cm4gZH07bC5FaD1mdW5jdGlvbigpe3ZhciBhPVNnKHRoaXMpLGI9dGhpcy5hLGM9MCxkPTAsZTt2YXIgZj0wO2ZvcihlPWIubGVuZ3RoO2Y8ZTsrK2Ype3ZhciBnPWJbZl07ZCs9QWUoYSxjLGcsdGhpcy5BKTtjPWdbZy5sZW5ndGgtMV19cmV0dXJuIGR9O1xubC5HPWZ1bmN0aW9uKGEpe2lmKHZvaWQgMCE9PWEpe3ZhciBiPVNnKHRoaXMpLnNsaWNlKCk7V2UoYix0aGlzLmEsdGhpcy5BLGEpfWVsc2UgYj10aGlzLm87cmV0dXJuIExlKGIsMCx0aGlzLmEsdGhpcy5BKX07ZnVuY3Rpb24gVGcoYSl7aWYoYS52IT1hLmope3ZhciBiPWEubyxjPWEuYSxkPWEuQSxlPTAsZj1bXSxnO3ZhciBoPTA7Zm9yKGc9Yy5sZW5ndGg7aDxnOysraCl7dmFyIGs9Y1toXTt2YXIgbT1iO3ZhciBuPWtbMF0scD1kLHI9T2Eodm9pZCAwKTttPVJhKHIsbSxlLG4scCk7Zi5wdXNoKChtWzBdK21bMl0pLzIsKG1bMV0rbVszXSkvMik7ZT1rW2subGVuZ3RoLTFdfWI9U2coYSk7Yz1hLmE7ZD1hLkE7aD0wO2c9W107az0wO2ZvcihtPWMubGVuZ3RoO2s8bTsrK2spZT1jW2tdLGc9U2UoYixoLGUsZCxmLDIqayxnKSxoPWVbZS5sZW5ndGgtMV07YS51PWc7YS52PWEuan1yZXR1cm4gYS51fVxubC5sZz1mdW5jdGlvbigpe3ZhciBhPW5ldyBraShudWxsKSxiPVRnKHRoaXMpLnNsaWNlKCk7eWUoYSxcIlhZXCIsYik7YS5iKCk7cmV0dXJuIGF9O2Z1bmN0aW9uIFNnKGEpe2lmKGEuWCE9YS5qKXt2YXIgYj1hLm87YTp7dmFyIGM9YS5hO3ZhciBkO3ZhciBlPTA7Zm9yKGQ9Yy5sZW5ndGg7ZTxkOysrZSlpZighVWUoYixjW2VdLGEuQSx2b2lkIDApKXtjPSExO2JyZWFrIGF9Yz0hMH1jP2EuZz1iOihhLmc9Yi5zbGljZSgpLGEuZy5sZW5ndGg9V2UoYS5nLGEuYSxhLkEpKTthLlg9YS5qfXJldHVybiBhLmd9XG5sLmtiPWZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD10aGlzLm8sZT10aGlzLmEsZj10aGlzLkE7YT1NYXRoLnNxcnQoYSk7dmFyIGc9MCxoPTAsazt2YXIgbT0wO2ZvcihrPWUubGVuZ3RoO208azsrK20pe3ZhciBuPWVbbV0scD1bXTtoPU5lKGQsZyxuLGYsYSxiLGgscCk7Yy5wdXNoKHApO2c9bltuLmxlbmd0aC0xXX1iLmxlbmd0aD1oO2Q9bmV3IG1pKG51bGwpO25pKGQsXCJYWVwiLGIsYyk7cmV0dXJuIGR9O2Z1bmN0aW9uIG9pKGEpe3ZhciBiPWEuVyxjPWEubzthPWEuYTt2YXIgZD1bXSxlPTAsZixnO3ZhciBoPTA7Zm9yKGY9YS5sZW5ndGg7aDxmOysraCl7dmFyIGs9YVtoXS5zbGljZSgpLG09a1trLmxlbmd0aC0xXTtpZihlKXt2YXIgbj0wO2ZvcihnPWsubGVuZ3RoO248ZzsrK24pa1tuXS09ZX1uPW5ldyB6KG51bGwpO1hlKG4sYixjLnNsaWNlKGUsbSksayk7ZC5wdXNoKG4pO2U9bX1yZXR1cm4gZH1sLkk9ZnVuY3Rpb24oKXtyZXR1cm5cIk11bHRpUG9seWdvblwifTtcbmwuWT1mdW5jdGlvbihhLGIpe2lmKGEpe3plKHRoaXMsYixhLDMpO3RoaXMub3x8KHRoaXMubz1bXSk7Yj10aGlzLm87dmFyIGM9dGhpcy5BLGQ9dGhpcy5hLGU9MDtkPWQ/ZDpbXTt2YXIgZj0wLGc7dmFyIGg9MDtmb3IoZz1hLmxlbmd0aDtoPGc7KytoKWU9SWUoYixlLGFbaF0sYyxkW2ZdKSxkW2YrK109ZSxlPWVbZS5sZW5ndGgtMV07ZC5sZW5ndGg9ZjtkLmxlbmd0aD8oYT1kW2QubGVuZ3RoLTFdLHRoaXMuby5sZW5ndGg9YS5sZW5ndGg/YVthLmxlbmd0aC0xXTowKTp0aGlzLm8ubGVuZ3RoPTA7dGhpcy5iKCl9ZWxzZSBuaSh0aGlzLFwiWFlcIixudWxsLHRoaXMuYSl9O2Z1bmN0aW9uIG5pKGEsYixjLGQpe3llKGEsYixjKTthLmE9ZDthLmIoKX1cbmZ1bmN0aW9uIHBpKGEsYil7dmFyIGM9YS5XLGQ9W10sZT1bXSxmO3ZhciBnPTA7Zm9yKGY9Yi5sZW5ndGg7ZzxmOysrZyl7dmFyIGg9YltnXTtnfHwoYz1oLlcpO3ZhciBrPWQubGVuZ3RoO3ZhciBtPWguUWEoKTt2YXIgbjt2YXIgcD0wO2ZvcihuPW0ubGVuZ3RoO3A8bjsrK3ApbVtwXSs9aztpYShkLGgubyk7ZS5wdXNoKG0pfW5pKGEsYyxkLGUpfTtmdW5jdGlvbiBxaShhKXthPWE/YTp7fTtaaC5jYWxsKHRoaXMpO3RoaXMuYj1hLmdlb21ldHJ5TmFtZX10KHFpLGNpKTtmdW5jdGlvbiByaShhKXt2YXIgYj1cIlhZXCI7ITA9PT1hLmhhc1omJiEwPT09YS5oYXNNP2I9XCJYWVpNXCI6ITA9PT1hLmhhc1o/Yj1cIlhZWlwiOiEwPT09YS5oYXNNJiYoYj1cIlhZTVwiKTtyZXR1cm4gYn1mdW5jdGlvbiBzaShhKXthPWEuVztyZXR1cm57aGFzWjpcIlhZWlwiPT09YXx8XCJYWVpNXCI9PT1hLGhhc006XCJYWU1cIj09PWF8fFwiWFlaTVwiPT09YX19XG52YXIgdGk9e1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDAhPT1hLm0mJnZvaWQgMCE9PWEuej9uZXcgUWUoW2EueCxhLnksYS56LGEubV0sXCJYWVpNXCIpOnZvaWQgMCE9PWEuej9uZXcgUWUoW2EueCxhLnksYS56XSxcIlhZWlwiKTp2b2lkIDAhPT1hLm0/bmV3IFFlKFthLngsYS55LGEubV0sXCJYWU1cIik6bmV3IFFlKFthLngsYS55XSl9LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBTKGEucGF0aHNbMF0scmkoYSkpfSxQb2x5Z29uOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgeihhLnJpbmdzLHJpKGEpKX0sTXVsdGlQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IGtpKGEucG9pbnRzLHJpKGEpKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgaGkoYS5wYXRocyxyaShhKSl9LE11bHRpUG9seWdvbjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IG1pKGEucmluZ3MscmkoYSkpfX0sdWk9e1BvaW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEuRygpLGM7XG5hPWEuVztcIlhZWlwiPT09YT9jPXt4OmJbMF0seTpiWzFdLHo6YlsyXX06XCJYWU1cIj09PWE/Yz17eDpiWzBdLHk6YlsxXSxtOmJbMl19OlwiWFlaTVwiPT09YT9jPXt4OmJbMF0seTpiWzFdLHo6YlsyXSxtOmJbM119OlwiWFlcIj09PWE/Yz17eDpiWzBdLHk6YlsxXX06dyghMSwzNCk7cmV0dXJuIGN9LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9c2koYSk7cmV0dXJue2hhc1o6Yi5oYXNaLGhhc006Yi5oYXNNLHBhdGhzOlthLkcoKV19fSxQb2x5Z29uOmZ1bmN0aW9uKGEpe3ZhciBiPXNpKGEpO3JldHVybntoYXNaOmIuaGFzWixoYXNNOmIuaGFzTSxyaW5nczphLkcoITEpfX0sTXVsdGlQb2ludDpmdW5jdGlvbihhKXt2YXIgYj1zaShhKTtyZXR1cm57aGFzWjpiLmhhc1osaGFzTTpiLmhhc00scG9pbnRzOmEuRygpfX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEpe3ZhciBiPXNpKGEpO3JldHVybntoYXNaOmIuaGFzWixoYXNNOmIuaGFzTSxwYXRoczphLkcoKX19LE11bHRpUG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj1cbnNpKGEpO2E9YS5HKCExKTtmb3IodmFyIGM9W10sZD0wO2Q8YS5sZW5ndGg7ZCsrKWZvcih2YXIgZT1hW2RdLmxlbmd0aC0xOzA8PWU7ZS0tKWMucHVzaChhW2RdW2VdKTtyZXR1cm57aGFzWjpiLmhhc1osaGFzTTpiLmhhc00scmluZ3M6Y319fTtsPXFpLnByb3RvdHlwZTtcbmwuWmE9ZnVuY3Rpb24oYSxiKXt2YXIgYztpZihjPWEuZ2VvbWV0cnkpe2lmKFwibnVtYmVyXCI9PT10eXBlb2YgYy54JiZcIm51bWJlclwiPT09dHlwZW9mIGMueSl2YXIgZD1cIlBvaW50XCI7ZWxzZSBpZihjLnBvaW50cylkPVwiTXVsdGlQb2ludFwiO2Vsc2UgaWYoYy5wYXRocylkPTE9PT1jLnBhdGhzLmxlbmd0aD9cIkxpbmVTdHJpbmdcIjpcIk11bHRpTGluZVN0cmluZ1wiO2Vsc2UgaWYoYy5yaW5ncyl7dmFyIGU9Yy5yaW5ncyxmPXJpKGMpLGc9W10saD1bXTtkPVtdO3ZhciBrO3ZhciBtPTA7Zm9yKGs9ZS5sZW5ndGg7bTxrOysrbSlnLmxlbmd0aD0wLEhlKGcsMCxlW21dLGYubGVuZ3RoKSxUZShnLDAsZy5sZW5ndGgsZi5sZW5ndGgpP2gucHVzaChbZVttXV0pOmQucHVzaChlW21dKTtmb3IoO2QubGVuZ3RoOyl7ZT1kLnNoaWZ0KCk7Zj0hMTtmb3IobT1oLmxlbmd0aC0xOzA8PW07bS0tKWlmKE1hKChuZXcgT2UoaFttXVswXSkpLksoKSwobmV3IE9lKGUpKS5LKCkpKXtoW21dLnB1c2goZSk7Zj1cbiEwO2JyZWFrfWZ8fGgucHVzaChbZS5yZXZlcnNlKCldKX1jPVphKHt9LGMpOzE9PT1oLmxlbmd0aD8oZD1cIlBvbHlnb25cIixjLnJpbmdzPWhbMF0pOihkPVwiTXVsdGlQb2x5Z29uXCIsYy5yaW5ncz1oKX1jPWJpKCgwLHRpW2RdKShjKSwhMSxiKX1lbHNlIGM9bnVsbDtoPW5ldyBFO3RoaXMuYiYmaC5zYih0aGlzLmIpO2gueGEoYyk7YiYmYi5kZCYmYS5hdHRyaWJ1dGVzW2IuZGRdJiZoLmFiKGEuYXR0cmlidXRlc1tiLmRkXSk7YS5hdHRyaWJ1dGVzJiZoLnFhKGEuYXR0cmlidXRlcyk7cmV0dXJuIGh9O2wucWQ9ZnVuY3Rpb24oYSxiKXtiPWI/Yjp7fTtpZihhLmZlYXR1cmVzKXt2YXIgYz1bXSxkPWEuZmVhdHVyZXMsZTtiLmRkPWEub2JqZWN0SWRGaWVsZE5hbWU7YT0wO2ZvcihlPWQubGVuZ3RoO2E8ZTsrK2EpYy5wdXNoKHRoaXMuWmEoZFthXSxiKSk7cmV0dXJuIGN9cmV0dXJuW3RoaXMuWmEoYSxiKV19O1xubC51ZD1mdW5jdGlvbihhKXtyZXR1cm4gYS5zcGF0aWFsUmVmZXJlbmNlJiZhLnNwYXRpYWxSZWZlcmVuY2Uud2tpZD9BYihcIkVQU0c6XCIrYS5zcGF0aWFsUmVmZXJlbmNlLndraWQpOm51bGx9O2wudWI9ZnVuY3Rpb24oYSxiKXtiPWFpKHRoaXMsYik7dmFyIGM9e30sZD1hLlAoKTtpZihkKXt2YXIgZT1iO2Q9KDAsdWlbZC5JKCldKShiaShkLCEwLGUpLGUpO2MuZ2VvbWV0cnk9ZDtiJiZiLmZlYXR1cmVQcm9qZWN0aW9uJiYoYy5nZW9tZXRyeS5zcGF0aWFsUmVmZXJlbmNlPXt3a2lkOkFiKGIuZmVhdHVyZVByb2plY3Rpb24pLkhhLnNwbGl0KFwiOlwiKS5wb3AoKX0pfWI9YS5DYSgpO2RlbGV0ZSBiW2EuY107Yy5hdHRyaWJ1dGVzPWJiKGIpP3t9OmI7cmV0dXJuIGN9O2wuQmQ9ZnVuY3Rpb24oYSxiKXtiPWFpKHRoaXMsYik7dmFyIGM9W10sZDt2YXIgZT0wO2ZvcihkPWEubGVuZ3RoO2U8ZDsrK2UpYy5wdXNoKHRoaXMudWIoYVtlXSxiKSk7cmV0dXJue2ZlYXR1cmVzOmN9fTtmdW5jdGlvbiB2aShhKXt1ZS5jYWxsKHRoaXMpO3RoaXMuYT1hP2E6bnVsbDt3aSh0aGlzKX10KHZpLHVlKTtmdW5jdGlvbiB4aShhKXt2YXIgYj1bXSxjO3ZhciBkPTA7Zm9yKGM9YS5sZW5ndGg7ZDxjOysrZCliLnB1c2goYVtkXS5jbG9uZSgpKTtyZXR1cm4gYn1mdW5jdGlvbiB5aShhKXt2YXIgYjtpZihhLmEpe3ZhciBjPTA7Zm9yKGI9YS5hLmxlbmd0aDtjPGI7KytjKWRjKGEuYVtjXSxcImNoYW5nZVwiLGEuYixhKX19ZnVuY3Rpb24gd2koYSl7dmFyIGI7aWYoYS5hKXt2YXIgYz0wO2ZvcihiPWEuYS5sZW5ndGg7YzxiOysrYyl5KGEuYVtjXSxcImNoYW5nZVwiLGEuYixhKX19bD12aS5wcm90b3R5cGU7bC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPW5ldyB2aShudWxsKSxiPXhpKHRoaXMuYSk7eWkoYSk7YS5hPWI7d2koYSk7YS5iKCk7cmV0dXJuIGF9O1xubC5HYT1mdW5jdGlvbihhLGIsYyxkKXtpZihkPExhKHRoaXMuSygpLGEsYikpcmV0dXJuIGQ7dmFyIGU9dGhpcy5hLGY7dmFyIGc9MDtmb3IoZj1lLmxlbmd0aDtnPGY7KytnKWQ9ZVtnXS5HYShhLGIsYyxkKTtyZXR1cm4gZH07bC5aYj1mdW5jdGlvbihhKXtPYShhKTtmb3IodmFyIGI9dGhpcy5hLGM9MCxkPWIubGVuZ3RoO2M8ZDsrK2Mpe3ZhciBlPWEsZj1iW2NdLksoKTtmWzBdPGVbMF0mJihlWzBdPWZbMF0pO2ZbMl0+ZVsyXSYmKGVbMl09ZlsyXSk7ZlsxXTxlWzFdJiYoZVsxXT1mWzFdKTtmWzNdPmVbM10mJihlWzNdPWZbM10pfXJldHVybiBhfTtcbmwuYWQ9ZnVuY3Rpb24oYSl7dGhpcy5sIT10aGlzLmomJigkYSh0aGlzLmMpLHRoaXMuaT0wLHRoaXMubD10aGlzLmopO2lmKDA+YXx8dGhpcy5pJiZhPHRoaXMuaSlyZXR1cm4gdGhpczt2YXIgYj1hLnRvU3RyaW5nKCk7aWYodGhpcy5jLmhhc093blByb3BlcnR5KGIpKXJldHVybiB0aGlzLmNbYl07dmFyIGM9W10sZD10aGlzLmEsZT0hMSxmO3ZhciBnPTA7Zm9yKGY9ZC5sZW5ndGg7ZzxmOysrZyl7dmFyIGg9ZFtnXSxrPWguYWQoYSk7Yy5wdXNoKGspO2shPT1oJiYoZT0hMCl9aWYoZSlyZXR1cm4gYT1uZXcgdmkobnVsbCkseWkoYSksYS5hPWMsd2koYSksYS5iKCksdGhpcy5jW2JdPWE7dGhpcy5pPWE7cmV0dXJuIHRoaXN9O2wuST1mdW5jdGlvbigpe3JldHVyblwiR2VvbWV0cnlDb2xsZWN0aW9uXCJ9O2wucm90YXRlPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPXRoaXMuYSxkPTAsZT1jLmxlbmd0aDtkPGU7KytkKWNbZF0ucm90YXRlKGEsYik7dGhpcy5iKCl9O1xubC5zY2FsZT1mdW5jdGlvbihhLGIsYyl7Y3x8KGM9U2EodGhpcy5LKCkpKTtmb3IodmFyIGQ9dGhpcy5hLGU9MCxmPWQubGVuZ3RoO2U8ZjsrK2UpZFtlXS5zY2FsZShhLGIsYyk7dGhpcy5iKCl9O2wueGI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hLGM7dmFyIGQ9MDtmb3IoYz1iLmxlbmd0aDtkPGM7KytkKWJbZF0ueGIoYSk7dGhpcy5iKCl9O2wubGE9ZnVuY3Rpb24oKXt5aSh0aGlzKTt1ZS5wcm90b3R5cGUubGEuY2FsbCh0aGlzKX07ZnVuY3Rpb24gemkoYSl7YT1hP2E6e307WmguY2FsbCh0aGlzKTt0aGlzLmRlZmF1bHREYXRhUHJvamVjdGlvbj1BYihhLmRlZmF1bHREYXRhUHJvamVjdGlvbj9hLmRlZmF1bHREYXRhUHJvamVjdGlvbjpcIkVQU0c6NDMyNlwiKTthLmZlYXR1cmVQcm9qZWN0aW9uJiYodGhpcy5qPUFiKGEuZmVhdHVyZVByb2plY3Rpb24pKTt0aGlzLmI9YS5nZW9tZXRyeU5hbWV9dCh6aSxjaSk7ZnVuY3Rpb24gQWkoYSxiKXtyZXR1cm4gYT9iaSgoMCxCaVthLnR5cGVdKShhKSwhMSxiKTpudWxsfWZ1bmN0aW9uIENpKGEsYil7cmV0dXJuKDAsRGlbYS5JKCldKShiaShhLCEwLGIpLGIpfVxudmFyIEJpPXtQb2ludDpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IFFlKGEuY29vcmRpbmF0ZXMpfSxMaW5lU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgUyhhLmNvb3JkaW5hdGVzKX0sUG9seWdvbjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IHooYS5jb29yZGluYXRlcyl9LE11bHRpUG9pbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBraShhLmNvb3JkaW5hdGVzKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBuZXcgaGkoYS5jb29yZGluYXRlcyl9LE11bHRpUG9seWdvbjpmdW5jdGlvbihhKXtyZXR1cm4gbmV3IG1pKGEuY29vcmRpbmF0ZXMpfSxHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24oYSxiKXthPWEuZ2VvbWV0cmllcy5tYXAoZnVuY3Rpb24oYSl7cmV0dXJuIEFpKGEsYil9KTtyZXR1cm4gbmV3IHZpKGEpfX0sRGk9e1BvaW50OmZ1bmN0aW9uKGEpe3JldHVybnt0eXBlOlwiUG9pbnRcIixjb29yZGluYXRlczphLkcoKX19LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7cmV0dXJue3R5cGU6XCJMaW5lU3RyaW5nXCIsXG5jb29yZGluYXRlczphLkcoKX19LFBvbHlnb246ZnVuY3Rpb24oYSxiKXtpZihiKXZhciBjPWIucmlnaHRIYW5kZWQ7cmV0dXJue3R5cGU6XCJQb2x5Z29uXCIsY29vcmRpbmF0ZXM6YS5HKGMpfX0sTXVsdGlQb2ludDpmdW5jdGlvbihhKXtyZXR1cm57dHlwZTpcIk11bHRpUG9pbnRcIixjb29yZGluYXRlczphLkcoKX19LE11bHRpTGluZVN0cmluZzpmdW5jdGlvbihhKXtyZXR1cm57dHlwZTpcIk11bHRpTGluZVN0cmluZ1wiLGNvb3JkaW5hdGVzOmEuRygpfX0sTXVsdGlQb2x5Z29uOmZ1bmN0aW9uKGEsYil7aWYoYil2YXIgYz1iLnJpZ2h0SGFuZGVkO3JldHVybnt0eXBlOlwiTXVsdGlQb2x5Z29uXCIsY29vcmRpbmF0ZXM6YS5HKGMpfX0sR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYil7cmV0dXJue3R5cGU6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIixnZW9tZXRyaWVzOmEuYS5tYXAoZnVuY3Rpb24oYSl7dmFyIGM9WmEoe30sYik7ZGVsZXRlIGMuZmVhdHVyZVByb2plY3Rpb247cmV0dXJuIENpKGEsXG5jKX0pfX0sQ2lyY2xlOmZ1bmN0aW9uKCl7cmV0dXJue3R5cGU6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIixnZW9tZXRyaWVzOltdfX19O2w9emkucHJvdG90eXBlO2wuWmE9ZnVuY3Rpb24oYSxiKXthPVwiRmVhdHVyZVwiPT09YS50eXBlP2E6e3R5cGU6XCJGZWF0dXJlXCIsZ2VvbWV0cnk6YX07Yj1BaShhLmdlb21ldHJ5LGIpO3ZhciBjPW5ldyBFO3RoaXMuYiYmYy5zYih0aGlzLmIpO2MueGEoYik7dm9pZCAwIT09YS5pZCYmYy5hYihhLmlkKTthLnByb3BlcnRpZXMmJmMucWEoYS5wcm9wZXJ0aWVzKTtyZXR1cm4gY307bC5xZD1mdW5jdGlvbihhLGIpe2lmKFwiRmVhdHVyZUNvbGxlY3Rpb25cIj09PWEudHlwZSl7dmFyIGM9W107YT1hLmZlYXR1cmVzO3ZhciBkO3ZhciBlPTA7Zm9yKGQ9YS5sZW5ndGg7ZTxkOysrZSljLnB1c2godGhpcy5aYShhW2VdLGIpKX1lbHNlIGM9W3RoaXMuWmEoYSxiKV07cmV0dXJuIGN9O1xubC51ZD1mdW5jdGlvbihhKXthPWEuY3JzO3ZhciBiO2E/XCJuYW1lXCI9PWEudHlwZT9iPUFiKGEucHJvcGVydGllcy5uYW1lKTpcIkVQU0dcIj09YS50eXBlP2I9QWIoXCJFUFNHOlwiK2EucHJvcGVydGllcy5jb2RlKTp3KCExLDM2KTpiPXRoaXMuZGVmYXVsdERhdGFQcm9qZWN0aW9uO3JldHVybiBifTtsLnViPWZ1bmN0aW9uKGEsYil7Yj1haSh0aGlzLGIpO3ZhciBjPXt0eXBlOlwiRmVhdHVyZVwifSxkPWEuYTt2b2lkIDAhPT1kJiYoYy5pZD1kKTsoZD1hLlAoKSk/Yy5nZW9tZXRyeT1DaShkLGIpOmMuZ2VvbWV0cnk9bnVsbDtiPWEuQ2EoKTtkZWxldGUgYlthLmNdO2JiKGIpP2MucHJvcGVydGllcz1udWxsOmMucHJvcGVydGllcz1iO3JldHVybiBjfTtsLkJkPWZ1bmN0aW9uKGEsYil7Yj1haSh0aGlzLGIpO3ZhciBjPVtdLGQ7dmFyIGU9MDtmb3IoZD1hLmxlbmd0aDtlPGQ7KytlKWMucHVzaCh0aGlzLnViKGFbZV0sYikpO3JldHVybnt0eXBlOlwiRmVhdHVyZUNvbGxlY3Rpb25cIixmZWF0dXJlczpjfX07ZnVuY3Rpb24gRWkoKXt0aGlzLmc9bmV3IFhNTFNlcmlhbGl6ZXI7WmguY2FsbCh0aGlzKX10KEVpLFpoKTtsPUVpLnByb3RvdHlwZTtsLkk9ZnVuY3Rpb24oKXtyZXR1cm5cInhtbFwifTtsLnBjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEgaW5zdGFuY2VvZiBEb2N1bWVudD9GaSh0aGlzLGEsYik6YSBpbnN0YW5jZW9mIE5vZGU/bnVsbDpcInN0cmluZ1wiPT09dHlwZW9mIGE/KGE9UGgoYSksRmkodGhpcyxhLGIpKTpudWxsfTtmdW5jdGlvbiBGaShhLGIsYyl7YT1HaShhLGIsYyk7cmV0dXJuIDA8YS5sZW5ndGg/YVswXTpudWxsfWwuUmE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSBpbnN0YW5jZW9mIERvY3VtZW50P0dpKHRoaXMsYSxiKTphIGluc3RhbmNlb2YgTm9kZT90aGlzLnBkKGEsYik6XCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPVBoKGEpLEdpKHRoaXMsYSxiKSk6W119O1xuZnVuY3Rpb24gR2koYSxiLGMpe3ZhciBkPVtdO2ZvcihiPWIuZmlyc3RDaGlsZDtiO2I9Yi5uZXh0U2libGluZyliLm5vZGVUeXBlPT1Ob2RlLkVMRU1FTlRfTk9ERSYmaWEoZCxhLnBkKGIsYykpO3JldHVybiBkfWwudGM9ZnVuY3Rpb24oYSl7cmV0dXJuIGEgaW5zdGFuY2VvZiBEb2N1bWVudD90aGlzLnRkKGEpOmEgaW5zdGFuY2VvZiBOb2RlP3RoaXMudWMoYSk6XCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPVBoKGEpLHRoaXMudGQoYSkpOm51bGx9O2wudGQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb259O2wudWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZWZhdWx0RGF0YVByb2plY3Rpb259O2wuQWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nLnNlcmlhbGl6ZVRvU3RyaW5nKG51bGwpfTtmdW5jdGlvbiBUKGEpe2E9YT9hOnt9O3RoaXMuZmVhdHVyZVR5cGU9YS5mZWF0dXJlVHlwZTt0aGlzLmZlYXR1cmVOUz1hLmZlYXR1cmVOUzt0aGlzLnNyc05hbWU9YS5zcnNOYW1lO3RoaXMuc2NoZW1hTG9jYXRpb249XCJcIjt0aGlzLmI9e307dGhpcy5iW1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIl09e2ZlYXR1cmVNZW1iZXI6TChULnByb3RvdHlwZS5LYiksZmVhdHVyZU1lbWJlcnM6TChULnByb3RvdHlwZS5LYil9O0VpLmNhbGwodGhpcyl9dChULEVpKTt2YXIgSGk9L15bXFxzXFx4YTBdKiQvO2w9VC5wcm90b3R5cGU7XG5sLktiPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5sb2NhbE5hbWUsZD1udWxsO2lmKFwiRmVhdHVyZUNvbGxlY3Rpb25cIj09YylcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzXCI9PT1hLm5hbWVzcGFjZVVSST9kPVAoW10sdGhpcy5iLGEsYix0aGlzKTpkPVAobnVsbCx0aGlzLmIsYSxiLHRoaXMpO2Vsc2UgaWYoXCJmZWF0dXJlTWVtYmVyc1wiPT1jfHxcImZlYXR1cmVNZW1iZXJcIj09Yyl7dmFyIGU9YlswXSxmPWUuZmVhdHVyZVR5cGUsZz1lLmZlYXR1cmVOUyxoO2lmKCFmJiZhLmNoaWxkTm9kZXMpe2Y9W107Zz17fTt2YXIgaz0wO2ZvcihoPWEuY2hpbGROb2Rlcy5sZW5ndGg7azxoOysrayl7dmFyIG09YS5jaGlsZE5vZGVzW2tdO2lmKDE9PT1tLm5vZGVUeXBlKXt2YXIgbj1tLm5vZGVOYW1lLnNwbGl0KFwiOlwiKS5wb3AoKTtpZigtMT09PWYuaW5kZXhPZihuKSl7dmFyIHA9XCJcIixyPTA7bT1tLm5hbWVzcGFjZVVSSTtmb3IodmFyIHUgaW4gZyl7aWYoZ1t1XT09PW0pe3A9dTticmVha30rK3J9cHx8XG4ocD1cInBcIityLGdbcF09bSk7Zi5wdXNoKHArXCI6XCIrbil9fX1cImZlYXR1cmVNZW1iZXJcIiE9YyYmKGUuZmVhdHVyZVR5cGU9ZixlLmZlYXR1cmVOUz1nKX1cInN0cmluZ1wiPT09dHlwZW9mIGcmJihrPWcsZz17fSxnLnAwPWspO2U9e307Zj1BcnJheS5pc0FycmF5KGYpP2Y6W2ZdO2Zvcih2YXIgRCBpbiBnKXtuPXt9O2s9MDtmb3IoaD1mLmxlbmd0aDtrPGg7KytrKSgtMT09PWZba10uaW5kZXhPZihcIjpcIik/XCJwMFwiOmZba10uc3BsaXQoXCI6XCIpWzBdKT09PUQmJihuW2Zba10uc3BsaXQoXCI6XCIpLnBvcCgpXT1cImZlYXR1cmVNZW1iZXJzXCI9PWM/Sih0aGlzLlFlLHRoaXMpOkwodGhpcy5RZSx0aGlzKSk7ZVtnW0RdXT1ufVwiZmVhdHVyZU1lbWJlclwiPT1jP2Q9UCh2b2lkIDAsZSxhLGIpOmQ9UChbXSxlLGEsYil9bnVsbD09PWQmJihkPVtdKTtyZXR1cm4gZH07XG5mdW5jdGlvbiBJaShhLGIsYyl7dmFyIGQ9Y1swXTtkLnNyc05hbWU9Yi5maXJzdEVsZW1lbnRDaGlsZC5nZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIpO2lmKGE9UChudWxsLGEuRWQsYixjLGEpKXJldHVybiBiaShhLCExLGQpfVxubC5RZT1mdW5jdGlvbihhLGIpe3ZhciBjOyhjPWEuZ2V0QXR0cmlidXRlKFwiZmlkXCIpKXx8KGM9YS5nZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCIsXCJpZFwiKXx8XCJcIik7dmFyIGQ9e30sZTtmb3IoYT1hLmZpcnN0RWxlbWVudENoaWxkO2E7YT1hLm5leHRFbGVtZW50U2libGluZyl7dmFyIGY9YS5sb2NhbE5hbWU7aWYoMD09PWEuY2hpbGROb2Rlcy5sZW5ndGh8fDE9PT1hLmNoaWxkTm9kZXMubGVuZ3RoJiYoMz09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZXx8ND09PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSkpe3ZhciBnPU5oKGEpO0hpLnRlc3QoZykmJihnPXZvaWQgMCk7ZFtmXT1nfWVsc2VcImJvdW5kZWRCeVwiIT09ZiYmKGU9ZiksZFtmXT1JaSh0aGlzLGEsYil9Yj1uZXcgRShkKTtlJiZiLnNiKGUpO2MmJmIuYWIoYyk7cmV0dXJuIGJ9O1xubC5XZT1mdW5jdGlvbihhLGIpe2lmKGE9dGhpcy5xYyhhLGIpKXJldHVybiBiPW5ldyBRZShudWxsKSx5ZShiLFwiWFlaXCIsYSksYi5iKCksYn07bC5VZT1mdW5jdGlvbihhLGIpe2lmKGE9UChbXSx0aGlzLndmLGEsYix0aGlzKSlyZXR1cm4gbmV3IGtpKGEpfTtsLlRlPWZ1bmN0aW9uKGEsYil7aWYoYT1QKFtdLHRoaXMudmYsYSxiLHRoaXMpKXJldHVybiBiPW5ldyBoaShudWxsKSxqaShiLGEpLGJ9O2wuVmU9ZnVuY3Rpb24oYSxiKXtpZihhPVAoW10sdGhpcy54ZixhLGIsdGhpcykpcmV0dXJuIGI9bmV3IG1pKG51bGwpLHBpKGIsYSksYn07bC5OZT1mdW5jdGlvbihhLGIpe1doKHRoaXMuQWYsYSxiLHRoaXMpfTtsLmllPWZ1bmN0aW9uKGEsYil7V2godGhpcy50ZixhLGIsdGhpcyl9O2wuT2U9ZnVuY3Rpb24oYSxiKXtXaCh0aGlzLkJmLGEsYix0aGlzKX07XG5sLnJjPWZ1bmN0aW9uKGEsYil7aWYoYT10aGlzLnFjKGEsYikpcmV0dXJuIGI9bmV3IFMobnVsbCksZ2koYixcIlhZWlwiLGEpLGJ9O2wucmk9ZnVuY3Rpb24oYSxiKXtpZihhPVAobnVsbCx0aGlzLlFiLGEsYix0aGlzKSlyZXR1cm4gYX07bC5TZT1mdW5jdGlvbihhLGIpe2lmKGE9dGhpcy5xYyhhLGIpKXJldHVybiBiPW5ldyBPZShudWxsKSxQZShiLFwiWFlaXCIsYSksYn07bC5zYz1mdW5jdGlvbihhLGIpe2lmKChhPVAoW251bGxdLHRoaXMuQ2MsYSxiLHRoaXMpKSYmYVswXSl7Yj1uZXcgeihudWxsKTt2YXIgYz1hWzBdLGQ9W2MubGVuZ3RoXSxlO3ZhciBmPTE7Zm9yKGU9YS5sZW5ndGg7ZjxlOysrZilpYShjLGFbZl0pLGQucHVzaChjLmxlbmd0aCk7WGUoYixcIlhZWlwiLGMsZCk7cmV0dXJuIGJ9fTtsLnFjPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFAobnVsbCx0aGlzLlFiLGEsYix0aGlzKX07XG5sLndmPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e3BvaW50TWVtYmVyOkooVC5wcm90b3R5cGUuTmUpLHBvaW50TWVtYmVyczpKKFQucHJvdG90eXBlLk5lKX19O2wudmY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7bGluZVN0cmluZ01lbWJlcjpKKFQucHJvdG90eXBlLmllKSxsaW5lU3RyaW5nTWVtYmVyczpKKFQucHJvdG90eXBlLmllKX19O2wueGY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7cG9seWdvbk1lbWJlcjpKKFQucHJvdG90eXBlLk9lKSxwb2x5Z29uTWVtYmVyczpKKFQucHJvdG90eXBlLk9lKX19O2wuQWY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7UG9pbnQ6SihULnByb3RvdHlwZS5xYyl9fTtsLnRmPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e0xpbmVTdHJpbmc6SihULnByb3RvdHlwZS5yYyl9fTtsLkJmPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e1BvbHlnb246SihULnByb3RvdHlwZS5zYyl9fTtcbmwuU2I9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7TGluZWFyUmluZzpMKFQucHJvdG90eXBlLnJpKX19O2wucGQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz17ZmVhdHVyZVR5cGU6dGhpcy5mZWF0dXJlVHlwZSxmZWF0dXJlTlM6dGhpcy5mZWF0dXJlTlN9O2ImJlphKGMsJGgodGhpcyxhLGIpKTtyZXR1cm4gdGhpcy5LYihhLFtjXSl8fFtdfTtsLnVjPWZ1bmN0aW9uKGEpe3JldHVybiBBYih0aGlzLnNyc05hbWU/dGhpcy5zcnNOYW1lOmEuZmlyc3RFbGVtZW50Q2hpbGQuZ2V0QXR0cmlidXRlKFwic3JzTmFtZVwiKSl9O2Z1bmN0aW9uIEppKGEpe2E9TmgoYSk7cmV0dXJuIEtpKGEpfWZ1bmN0aW9uIEtpKGEpe2lmKGE9L15cXHMqKHRydWV8MSl8KGZhbHNlfDApXFxzKiQvLmV4ZWMoYSkpcmV0dXJuIHZvaWQgMCE9PWFbMV18fCExfWZ1bmN0aW9uIExpKGEpe2E9TmgoYSk7YT1EYXRlLnBhcnNlKGEpO3JldHVybiBpc05hTihhKT92b2lkIDA6YS8xRTN9ZnVuY3Rpb24gTWkoYSl7YT1OaChhKTtyZXR1cm4gTmkoYSl9ZnVuY3Rpb24gTmkoYSl7aWYoYT0vXlxccyooWytcXC1dP1xcZCpcXC4/XFxkKyg/OmVbK1xcLV0/XFxkKyk/KVxccyokL2kuZXhlYyhhKSlyZXR1cm4gcGFyc2VGbG9hdChhWzFdKX1mdW5jdGlvbiBPaShhKXthPU5oKGEpO3JldHVybiBQaShhKX1mdW5jdGlvbiBQaShhKXtpZihhPS9eXFxzKihcXGQrKVxccyokLy5leGVjKGEpKXJldHVybiBwYXJzZUludChhWzFdLDEwKX1mdW5jdGlvbiBWKGEpe3JldHVybiBOaChhKS50cmltKCl9ZnVuY3Rpb24gUWkoYSxiKXtXKGEsYj9cIjFcIjpcIjBcIil9XG5mdW5jdGlvbiBSaShhLGIpe2EuYXBwZW5kQ2hpbGQoTGguY3JlYXRlVGV4dE5vZGUoYi50b1ByZWNpc2lvbigpKSl9ZnVuY3Rpb24gU2koYSxiKXthLmFwcGVuZENoaWxkKExoLmNyZWF0ZVRleHROb2RlKGIudG9TdHJpbmcoKSkpfWZ1bmN0aW9uIFcoYSxiKXthLmFwcGVuZENoaWxkKExoLmNyZWF0ZVRleHROb2RlKGIpKX07ZnVuY3Rpb24gWChhKXthPWE/YTp7fTtULmNhbGwodGhpcyxhKTt0aGlzLnNjaGVtYUxvY2F0aW9uPWEuc2NoZW1hTG9jYXRpb24/YS5zY2hlbWFMb2NhdGlvbjpcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L2dtbC8zLjEuMS9wcm9maWxlcy9nbWxzZlByb2ZpbGUvMS4wLjAvZ21sc2YueHNkXCI7dGhpcy5oYXNaPXZvaWQgMCE9PWEuaGFzWj9hLmhhc1o6ITF9dChYLFQpO2w9WC5wcm90b3R5cGU7bC52aT1mdW5jdGlvbihhLGIpe2lmKGE9UChbXSx0aGlzLnVmLGEsYix0aGlzKSlyZXR1cm4gYj1uZXcgaGkobnVsbCksamkoYixhKSxifTtsLndpPWZ1bmN0aW9uKGEsYil7aWYoYT1QKFtdLHRoaXMueWYsYSxiLHRoaXMpKXJldHVybiBiPW5ldyBtaShudWxsKSxwaShiLGEpLGJ9O2wuV2Q9ZnVuY3Rpb24oYSxiKXtXaCh0aGlzLnFmLGEsYix0aGlzKX07bC5nZj1mdW5jdGlvbihhLGIpe1doKHRoaXMuRGYsYSxiLHRoaXMpfTtcbmwueGk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUChbbnVsbF0sdGhpcy56ZixhLGIsdGhpcyl9O2wuemk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUChbbnVsbF0sdGhpcy5DZixhLGIsdGhpcyl9O2wueWk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUChbbnVsbF0sdGhpcy5DYyxhLGIsdGhpcyl9O2wudWk9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gUChbbnVsbF0sdGhpcy5RYixhLGIsdGhpcyl9O2wuUmc9ZnVuY3Rpb24oYSxiKXsoYT1QKHZvaWQgMCx0aGlzLlNiLGEsYix0aGlzKSkmJmJbYi5sZW5ndGgtMV0ucHVzaChhKX07bC4kZj1mdW5jdGlvbihhLGIpeyhhPVAodm9pZCAwLHRoaXMuU2IsYSxiLHRoaXMpKSYmKGJbYi5sZW5ndGgtMV1bMF09YSl9O1xubC5YZT1mdW5jdGlvbihhLGIpe2lmKChhPVAoW251bGxdLHRoaXMuRWYsYSxiLHRoaXMpKSYmYVswXSl7Yj1uZXcgeihudWxsKTt2YXIgYz1hWzBdLGQ9W2MubGVuZ3RoXSxlO3ZhciBmPTE7Zm9yKGU9YS5sZW5ndGg7ZjxlOysrZilpYShjLGFbZl0pLGQucHVzaChjLmxlbmd0aCk7WGUoYixcIlhZWlwiLGMsZCk7cmV0dXJuIGJ9fTtsLlBlPWZ1bmN0aW9uKGEsYil7aWYoYT1QKFtudWxsXSx0aGlzLnJmLGEsYix0aGlzKSlyZXR1cm4gYj1uZXcgUyhudWxsKSxnaShiLFwiWFlaXCIsYSksYn07bC5waT1mdW5jdGlvbihhLGIpe2E9UChbbnVsbF0sdGhpcy5zZixhLGIsdGhpcyk7cmV0dXJuIE5hKGFbMV1bMF0sYVsxXVsxXSxhWzJdWzBdLGFbMl1bMV0pfTtcbmwuc2k9ZnVuY3Rpb24oYSxiKXt2YXIgYz1OaChhKSxkPS9eXFxzKihbK1xcLV0/XFxkKlxcLj9cXGQrKD86W2VFXVsrXFwtXT9cXGQrKT8pXFxzKi87YT1bXTtmb3IodmFyIGU7ZT1kLmV4ZWMoYyk7KWEucHVzaChwYXJzZUZsb2F0KGVbMV0pKSxjPWMuc3Vic3RyKGVbMF0ubGVuZ3RoKTtpZihcIlwiPT09Yyl7Yj1iWzBdLnNyc05hbWU7Yz1cImVudVwiO2ImJihjPUFiKGIpLmIpO2lmKFwibmV1XCI9PT1jKWZvcihiPTAsYz1hLmxlbmd0aDtiPGM7Yis9MylkPWFbYl0sYVtiXT1hW2IrMV0sYVtiKzFdPWQ7Yj1hLmxlbmd0aDsyPT1iJiZhLnB1c2goMCk7aWYoYilyZXR1cm4gYX19O1xubC5zZD1mdW5jdGlvbihhLGIpe3ZhciBjPU5oKGEpLnJlcGxhY2UoL15cXHMqfFxccyokL2csXCJcIiksZD1iWzBdLnNyc05hbWUsZT1hLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKFwic3JzRGltZW5zaW9uXCIpO2I9XCJlbnVcIjtkJiYoYj1BYihkKS5iKTtjPWMuc3BsaXQoL1xccysvKTtkPTI7YS5nZXRBdHRyaWJ1dGUoXCJzcnNEaW1lbnNpb25cIik/ZD1QaShhLmdldEF0dHJpYnV0ZShcInNyc0RpbWVuc2lvblwiKSk6YS5nZXRBdHRyaWJ1dGUoXCJkaW1lbnNpb25cIik/ZD1QaShhLmdldEF0dHJpYnV0ZShcImRpbWVuc2lvblwiKSk6ZSYmKGQ9UGkoZSkpO2Zvcih2YXIgZixnPVtdLGg9MCxrPWMubGVuZ3RoO2g8aztoKz1kKWE9cGFyc2VGbG9hdChjW2hdKSxlPXBhcnNlRmxvYXQoY1toKzFdKSxmPTM9PT1kP3BhcnNlRmxvYXQoY1toKzJdKTowLFwiZW5cIj09PWIuc3Vic3RyKDAsMik/Zy5wdXNoKGEsZSxmKTpnLnB1c2goZSxhLGYpO3JldHVybiBnfTtcbmwuUWI9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7cG9zOkwoWC5wcm90b3R5cGUuc2kpLHBvc0xpc3Q6TChYLnByb3RvdHlwZS5zZCl9fTtsLkNjPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2ludGVyaW9yOlgucHJvdG90eXBlLlJnLGV4dGVyaW9yOlgucHJvdG90eXBlLiRmfX07XG5sLkVkPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e1BvaW50OkwoVC5wcm90b3R5cGUuV2UpLE11bHRpUG9pbnQ6TChULnByb3RvdHlwZS5VZSksTGluZVN0cmluZzpMKFQucHJvdG90eXBlLnJjKSxNdWx0aUxpbmVTdHJpbmc6TChULnByb3RvdHlwZS5UZSksTGluZWFyUmluZzpMKFQucHJvdG90eXBlLlNlKSxQb2x5Z29uOkwoVC5wcm90b3R5cGUuc2MpLE11bHRpUG9seWdvbjpMKFQucHJvdG90eXBlLlZlKSxTdXJmYWNlOkwoWC5wcm90b3R5cGUuWGUpLE11bHRpU3VyZmFjZTpMKFgucHJvdG90eXBlLndpKSxDdXJ2ZTpMKFgucHJvdG90eXBlLlBlKSxNdWx0aUN1cnZlOkwoWC5wcm90b3R5cGUudmkpLEVudmVsb3BlOkwoWC5wcm90b3R5cGUucGkpfX07bC51Zj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntjdXJ2ZU1lbWJlcjpKKFgucHJvdG90eXBlLldkKSxjdXJ2ZU1lbWJlcnM6SihYLnByb3RvdHlwZS5XZCl9fTtcbmwueWY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7c3VyZmFjZU1lbWJlcjpKKFgucHJvdG90eXBlLmdmKSxzdXJmYWNlTWVtYmVyczpKKFgucHJvdG90eXBlLmdmKX19O2wucWY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7TGluZVN0cmluZzpKKFQucHJvdG90eXBlLnJjKSxDdXJ2ZTpKKFgucHJvdG90eXBlLlBlKX19O2wuRGY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7UG9seWdvbjpKKFQucHJvdG90eXBlLnNjKSxTdXJmYWNlOkooWC5wcm90b3R5cGUuWGUpfX07bC5FZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntwYXRjaGVzOkwoWC5wcm90b3R5cGUueGkpfX07bC5yZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntzZWdtZW50czpMKFgucHJvdG90eXBlLnppKX19O2wuc2Y9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7bG93ZXJDb3JuZXI6SihYLnByb3RvdHlwZS5zZCksdXBwZXJDb3JuZXI6SihYLnByb3RvdHlwZS5zZCl9fTtcbmwuemY9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7UG9seWdvblBhdGNoOkwoWC5wcm90b3R5cGUueWkpfX07bC5DZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntMaW5lU3RyaW5nU2VnbWVudDpMKFgucHJvdG90eXBlLnVpKX19O2Z1bmN0aW9uIFRpKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdO2M9ZC5oYXNaO2Q9ZC5zcnNOYW1lO2I9Yi5HKCk7Zm9yKHZhciBlPWIubGVuZ3RoLGY9QXJyYXkoZSksZyxoPTA7aDxlOysraCl7Zz1iW2hdO3ZhciBrPWgsbT1jLG49XCJlbnVcIjtkJiYobj1BYihkKS5iKTtuPVwiZW5cIj09PW4uc3Vic3RyKDAsMik/Z1swXStcIiBcIitnWzFdOmdbMV0rXCIgXCIrZ1swXTttJiYobis9XCIgXCIrKGdbMl18fDApKTtmW2tdPW59VyhhLGYuam9pbihcIiBcIikpfVxubC5BZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXS5zcnNOYW1lO2QmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGQpO2Q9TWgoYS5uYW1lc3BhY2VVUkksXCJwb3NcIik7YS5hcHBlbmRDaGlsZChkKTtjPWNbYy5sZW5ndGgtMV07YT1jLmhhc1o7dmFyIGU9Yy5zcnNOYW1lO2M9XCJlbnVcIjtlJiYoYz1BYihlKS5iKTtiPWIuRygpO2M9XCJlblwiPT09Yy5zdWJzdHIoMCwyKT9iWzBdK1wiIFwiK2JbMV06YlsxXStcIiBcIitiWzBdO2EmJihjKz1cIiBcIisoYlsyXXx8MCkpO1coZCxjKX07dmFyIFVpPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2xvd2VyQ29ybmVyOk4oVyksdXBwZXJDb3JuZXI6TihXKX19O2w9WC5wcm90b3R5cGU7XG5sLkFoPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLnNyc05hbWU7ZCYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZCk7USh7bm9kZTphfSxVaSxVaCxbYlswXStcIiBcIitiWzFdLGJbMl0rXCIgXCIrYlszXV0sYyxbXCJsb3dlckNvcm5lclwiLFwidXBwZXJDb3JuZXJcIl0sdGhpcyl9O2wueGU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0uc3JzTmFtZTtkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtkPU1oKGEubmFtZXNwYWNlVVJJLFwicG9zTGlzdFwiKTthLmFwcGVuZENoaWxkKGQpO1RpKGQsYixjKX07bC56aD1mdW5jdGlvbihhLGIpe2E9YltiLmxlbmd0aC0xXTtiPWEubm9kZTt2YXIgYz1hLmV4dGVyaW9yV3JpdHRlbjt2b2lkIDA9PT1jJiYoYS5leHRlcmlvcldyaXR0ZW49ITApO3JldHVybiBNaChiLm5hbWVzcGFjZVVSSSx2b2lkIDAhPT1jP1wiaW50ZXJpb3JcIjpcImV4dGVyaW9yXCIpfTtcbmwuamM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLmhhc1o7ZD1kLnNyc05hbWU7XCJQb2x5Z29uUGF0Y2hcIiE9PWEubm9kZU5hbWUmJmQmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGQpO1wiUG9seWdvblwiPT09YS5ub2RlTmFtZXx8XCJQb2x5Z29uUGF0Y2hcIj09PWEubm9kZU5hbWU/KGI9JGUoYiksUSh7bm9kZTphLGhhc1o6ZSxzcnNOYW1lOmR9LFZpLHRoaXMuemgsYixjLHZvaWQgMCx0aGlzKSk6XCJTdXJmYWNlXCI9PT1hLm5vZGVOYW1lJiYoZT1NaChhLm5hbWVzcGFjZVVSSSxcInBhdGNoZXNcIiksYS5hcHBlbmRDaGlsZChlKSxhPU1oKGUubmFtZXNwYWNlVVJJLFwiUG9seWdvblBhdGNoXCIpLGUuYXBwZW5kQ2hpbGQoYSksdGhpcy5qYyhhLGIsYykpfTtcbmwuaWM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0uc3JzTmFtZTtcIkxpbmVTdHJpbmdTZWdtZW50XCIhPT1hLm5vZGVOYW1lJiZkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtcIkxpbmVTdHJpbmdcIj09PWEubm9kZU5hbWV8fFwiTGluZVN0cmluZ1NlZ21lbnRcIj09PWEubm9kZU5hbWU/KGQ9TWgoYS5uYW1lc3BhY2VVUkksXCJwb3NMaXN0XCIpLGEuYXBwZW5kQ2hpbGQoZCksVGkoZCxiLGMpKTpcIkN1cnZlXCI9PT1hLm5vZGVOYW1lJiYoZD1NaChhLm5hbWVzcGFjZVVSSSxcInNlZ21lbnRzXCIpLGEuYXBwZW5kQ2hpbGQoZCksYT1NaChkLm5hbWVzcGFjZVVSSSxcIkxpbmVTdHJpbmdTZWdtZW50XCIpLGQuYXBwZW5kQ2hpbGQoYSksdGhpcy5pYyhhLGIsYykpfTtcbmwuemU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLmhhc1osZj1kLnNyc05hbWU7ZD1kLnN1cmZhY2U7ZiYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZik7Yj1vaShiKTtRKHtub2RlOmEsaGFzWjplLHNyc05hbWU6ZixzdXJmYWNlOmR9LFdpLHRoaXMuYSxiLGMsdm9pZCAwLHRoaXMpfTtsLkJoPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9ZC5zcnNOYW1lO2Q9ZC5oYXNaO2UmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGUpO2I9bGkoYik7USh7bm9kZTphLGhhc1o6ZCxzcnNOYW1lOmV9LFhpLFNoKFwicG9pbnRNZW1iZXJcIiksYixjLHZvaWQgMCx0aGlzKX07XG5sLnllPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9ZC5oYXNaLGY9ZC5zcnNOYW1lO2Q9ZC5jdXJ2ZTtmJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixmKTtiPWIuamIoKTtRKHtub2RlOmEsaGFzWjplLHNyc05hbWU6ZixjdXJ2ZTpkfSxZaSx0aGlzLmEsYixjLHZvaWQgMCx0aGlzKX07bC5CZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9TWgoYS5uYW1lc3BhY2VVUkksXCJMaW5lYXJSaW5nXCIpO2EuYXBwZW5kQ2hpbGQoZCk7dGhpcy54ZShkLGIsYyl9O2wuQ2U9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZihiLGMpO2QmJihhLmFwcGVuZENoaWxkKGQpLHRoaXMuamMoZCxiLGMpKX07bC5DaD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9TWgoYS5uYW1lc3BhY2VVUkksXCJQb2ludFwiKTthLmFwcGVuZENoaWxkKGQpO3RoaXMuQWUoZCxiLGMpfTtcbmwud2U9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZihiLGMpO2QmJihhLmFwcGVuZENoaWxkKGQpLHRoaXMuaWMoZCxiLGMpKX07bC52ZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXSxlPVphKHt9LGQpO2Uubm9kZT1hO3ZhciBmO0FycmF5LmlzQXJyYXkoYik/ZC5kYXRhUHJvamVjdGlvbj9mPUdiKGIsZC5mZWF0dXJlUHJvamVjdGlvbixkLmRhdGFQcm9qZWN0aW9uKTpmPWI6Zj1iaShiLCEwLGQpO1EoZSxaaSx0aGlzLmYsW2ZdLGMsdm9pZCAwLHRoaXMpfTtcbnZhciBXaT17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntzdXJmYWNlTWVtYmVyOk4oWC5wcm90b3R5cGUuQ2UpLHBvbHlnb25NZW1iZXI6TihYLnByb3RvdHlwZS5DZSl9fSxYaT17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntwb2ludE1lbWJlcjpOKFgucHJvdG90eXBlLkNoKX19LFlpPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2xpbmVTdHJpbmdNZW1iZXI6TihYLnByb3RvdHlwZS53ZSksY3VydmVNZW1iZXI6TihYLnByb3RvdHlwZS53ZSl9fSxWaT17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntleHRlcmlvcjpOKFgucHJvdG90eXBlLkJlKSxpbnRlcmlvcjpOKFgucHJvdG90eXBlLkJlKX19LFppPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e0N1cnZlOk4oWC5wcm90b3R5cGUuaWMpLE11bHRpQ3VydmU6TihYLnByb3RvdHlwZS55ZSksUG9pbnQ6TihYLnByb3RvdHlwZS5BZSksTXVsdGlQb2ludDpOKFgucHJvdG90eXBlLkJoKSxcbkxpbmVTdHJpbmc6TihYLnByb3RvdHlwZS5pYyksTXVsdGlMaW5lU3RyaW5nOk4oWC5wcm90b3R5cGUueWUpLExpbmVhclJpbmc6TihYLnByb3RvdHlwZS54ZSksUG9seWdvbjpOKFgucHJvdG90eXBlLmpjKSxNdWx0aVBvbHlnb246TihYLnByb3RvdHlwZS56ZSksU3VyZmFjZTpOKFgucHJvdG90eXBlLmpjKSxNdWx0aVN1cmZhY2U6TihYLnByb3RvdHlwZS56ZSksRW52ZWxvcGU6TihYLnByb3RvdHlwZS5BaCl9fSwkaT17TXVsdGlMaW5lU3RyaW5nOlwibGluZVN0cmluZ01lbWJlclwiLE11bHRpQ3VydmU6XCJjdXJ2ZU1lbWJlclwiLE11bHRpUG9seWdvbjpcInBvbHlnb25NZW1iZXJcIixNdWx0aVN1cmZhY2U6XCJzdXJmYWNlTWVtYmVyXCJ9O1gucHJvdG90eXBlLmE9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gTWgoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiLCRpW2JbYi5sZW5ndGgtMV0ubm9kZS5ub2RlTmFtZV0pfTtcblgucHJvdG90eXBlLmY9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iW2IubGVuZ3RoLTFdO2I9Yy5tdWx0aVN1cmZhY2U7dmFyIGQ9Yy5zdXJmYWNlLGU9Yy5jdXJ2ZTtjPWMubXVsdGlDdXJ2ZTtBcnJheS5pc0FycmF5KGEpP2E9XCJFbnZlbG9wZVwiOihhPWEuSSgpLFwiTXVsdGlQb2x5Z29uXCI9PT1hJiYhMD09PWI/YT1cIk11bHRpU3VyZmFjZVwiOlwiUG9seWdvblwiPT09YSYmITA9PT1kP2E9XCJTdXJmYWNlXCI6XCJMaW5lU3RyaW5nXCI9PT1hJiYhMD09PWU/YT1cIkN1cnZlXCI6XCJNdWx0aUxpbmVTdHJpbmdcIj09PWEmJiEwPT09YyYmKGE9XCJNdWx0aUN1cnZlXCIpKTtyZXR1cm4gTWgoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiLGEpfTtmdW5jdGlvbiBhaihhKXthPWE/YTp7fTtULmNhbGwodGhpcyxhKTt0aGlzLmJbXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiXS5mZWF0dXJlTWVtYmVyPUooVC5wcm90b3R5cGUuS2IpO3RoaXMuc2NoZW1hTG9jYXRpb249YS5zY2hlbWFMb2NhdGlvbj9hLnNjaGVtYUxvY2F0aW9uOlwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWwgaHR0cDovL3NjaGVtYXMub3Blbmdpcy5uZXQvZ21sLzIuMS4yL2ZlYXR1cmUueHNkXCJ9dChhaixUKTtsPWFqLnByb3RvdHlwZTtcbmwuUmU9ZnVuY3Rpb24oYSxiKXthPU5oKGEpLnJlcGxhY2UoL15cXHMqfFxccyokL2csXCJcIik7dmFyIGM9YlswXS5zcnNOYW1lO2I9XCJlbnVcIjtjJiYoYz1BYihjKSkmJihiPWMuYik7YT1hLnRyaW0oKS5zcGxpdCgvXFxzKy8pO2Zvcih2YXIgZCxlLGY9W10sZz0wLGg9YS5sZW5ndGg7ZzxoO2crKyllPWFbZ10uc3BsaXQoLywrLyksYz1wYXJzZUZsb2F0KGVbMF0pLGQ9cGFyc2VGbG9hdChlWzFdKSxlPTM9PT1lLmxlbmd0aD9wYXJzZUZsb2F0KGVbMl0pOjAsXCJlblwiPT09Yi5zdWJzdHIoMCwyKT9mLnB1c2goYyxkLGUpOmYucHVzaChkLGMsZSk7cmV0dXJuIGZ9O2wubmk9ZnVuY3Rpb24oYSxiKXthPVAoW251bGxdLHRoaXMucGYsYSxiLHRoaXMpO3JldHVybiBOYShhWzFdWzBdLGFbMV1bMV0sYVsxXVszXSxhWzFdWzRdKX07bC5QZz1mdW5jdGlvbihhLGIpeyhhPVAodm9pZCAwLHRoaXMuU2IsYSxiLHRoaXMpKSYmYltiLmxlbmd0aC0xXS5wdXNoKGEpfTtcbmwuWmg9ZnVuY3Rpb24oYSxiKXsoYT1QKHZvaWQgMCx0aGlzLlNiLGEsYix0aGlzKSkmJihiW2IubGVuZ3RoLTFdWzBdPWEpfTtsLlFiPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2Nvb3JkaW5hdGVzOkwoYWoucHJvdG90eXBlLlJlKX19O2wuQ2M9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7aW5uZXJCb3VuZGFyeUlzOmFqLnByb3RvdHlwZS5QZyxvdXRlckJvdW5kYXJ5SXM6YWoucHJvdG90eXBlLlpofX07bC5wZj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntjb29yZGluYXRlczpKKGFqLnByb3RvdHlwZS5SZSl9fTtcbmwuRWQ9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7UG9pbnQ6TChULnByb3RvdHlwZS5XZSksTXVsdGlQb2ludDpMKFQucHJvdG90eXBlLlVlKSxMaW5lU3RyaW5nOkwoVC5wcm90b3R5cGUucmMpLE11bHRpTGluZVN0cmluZzpMKFQucHJvdG90eXBlLlRlKSxMaW5lYXJSaW5nOkwoVC5wcm90b3R5cGUuU2UpLFBvbHlnb246TChULnByb3RvdHlwZS5zYyksTXVsdGlQb2x5Z29uOkwoVC5wcm90b3R5cGUuVmUpLEJveDpMKGFqLnByb3RvdHlwZS5uaSl9fTtcbmwuZ2Q9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iW2IubGVuZ3RoLTFdO2I9Yy5tdWx0aVN1cmZhY2U7dmFyIGQ9Yy5zdXJmYWNlO2M9Yy5tdWx0aUN1cnZlO0FycmF5LmlzQXJyYXkoYSk/YT1cIkVudmVsb3BlXCI6KGE9YS5JKCksXCJNdWx0aVBvbHlnb25cIj09PWEmJiEwPT09Yj9hPVwiTXVsdGlTdXJmYWNlXCI6XCJQb2x5Z29uXCI9PT1hJiYhMD09PWQ/YT1cIlN1cmZhY2VcIjpcIk11bHRpTGluZVN0cmluZ1wiPT09YSYmITA9PT1jJiYoYT1cIk11bHRpQ3VydmVcIikpO3JldHVybiBNaChcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCIsYSl9O2wubmU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1aYSh7fSxkKTtlLm5vZGU9YTt2YXIgZjtBcnJheS5pc0FycmF5KGIpP2QuZGF0YVByb2plY3Rpb24/Zj1HYihiLGQuZmVhdHVyZVByb2plY3Rpb24sZC5kYXRhUHJvamVjdGlvbik6Zj1iOmY9YmkoYiwhMCxkKTtRKGUsYmosdGhpcy5nZCxbZl0sYyx2b2lkIDAsdGhpcyl9O1xubC5nYz1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXS5zcnNOYW1lO1wiTGluZVN0cmluZ1NlZ21lbnRcIiE9PWEubm9kZU5hbWUmJmQmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGQpO1wiTGluZVN0cmluZ1wiPT09YS5ub2RlTmFtZXx8XCJMaW5lU3RyaW5nU2VnbWVudFwiPT09YS5ub2RlTmFtZT8oZD1jaihhLm5hbWVzcGFjZVVSSSksYS5hcHBlbmRDaGlsZChkKSxkaihkLGIsYykpOlwiQ3VydmVcIj09PWEubm9kZU5hbWUmJihkPU1oKGEubmFtZXNwYWNlVVJJLFwic2VnbWVudHNcIiksYS5hcHBlbmRDaGlsZChkKSxhPU1oKGQubmFtZXNwYWNlVVJJLFwiTGluZVN0cmluZ1NlZ21lbnRcIiksZC5hcHBlbmRDaGlsZChhKSx0aGlzLmdjKGEsYixjKSl9O2Z1bmN0aW9uIGNqKGEpe2E9TWgoYSxcImNvb3JkaW5hdGVzXCIpO2Euc2V0QXR0cmlidXRlKFwiZGVjaW1hbFwiLFwiLlwiKTthLnNldEF0dHJpYnV0ZShcImNzXCIsXCIsXCIpO2Euc2V0QXR0cmlidXRlKFwidHNcIixcIiBcIik7cmV0dXJuIGF9XG5mdW5jdGlvbiBkaihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXTtjPWQuaGFzWjtkPWQuc3JzTmFtZTtiPWIuRygpO2Zvcih2YXIgZT1iLmxlbmd0aCxmPUFycmF5KGUpLGcsaD0wO2g8ZTsrK2gpZz1iW2hdLGZbaF09ZWooZyxkLGMpO1coYSxmLmpvaW4oXCIgXCIpKX1cbmwuaGM9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLmhhc1o7ZD1kLnNyc05hbWU7XCJQb2x5Z29uUGF0Y2hcIiE9PWEubm9kZU5hbWUmJmQmJmEuc2V0QXR0cmlidXRlKFwic3JzTmFtZVwiLGQpO1wiUG9seWdvblwiPT09YS5ub2RlTmFtZXx8XCJQb2x5Z29uUGF0Y2hcIj09PWEubm9kZU5hbWU/KGI9JGUoYiksUSh7bm9kZTphLGhhc1o6ZSxzcnNOYW1lOmR9LGZqLHRoaXMudmgsYixjLHZvaWQgMCx0aGlzKSk6XCJTdXJmYWNlXCI9PT1hLm5vZGVOYW1lJiYoZT1NaChhLm5hbWVzcGFjZVVSSSxcInBhdGNoZXNcIiksYS5hcHBlbmRDaGlsZChlKSxhPU1oKGUubmFtZXNwYWNlVVJJLFwiUG9seWdvblBhdGNoXCIpLGUuYXBwZW5kQ2hpbGQoYSksdGhpcy5oYyhhLGIsYykpfTtcbmwudmg9ZnVuY3Rpb24oYSxiKXthPWJbYi5sZW5ndGgtMV07Yj1hLm5vZGU7dmFyIGM9YS5leHRlcmlvcldyaXR0ZW47dm9pZCAwPT09YyYmKGEuZXh0ZXJpb3JXcml0dGVuPSEwKTtyZXR1cm4gTWgoYi5uYW1lc3BhY2VVUkksdm9pZCAwIT09Yz9cImlubmVyQm91bmRhcnlJc1wiOlwib3V0ZXJCb3VuZGFyeUlzXCIpfTtsLnRlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1NaChhLm5hbWVzcGFjZVVSSSxcIkxpbmVhclJpbmdcIik7YS5hcHBlbmRDaGlsZChkKTt0aGlzLnBlKGQsYixjKX07ZnVuY3Rpb24gZWooYSxiLGMpe3ZhciBkPVwiZW51XCI7YiYmKGQ9QWIoYikuYik7Yj1cImVuXCI9PT1kLnN1YnN0cigwLDIpP2FbMF0rXCIsXCIrYVsxXTphWzFdK1wiLFwiK2FbMF07YyYmKGIrPVwiLFwiKyhhWzJdfHwwKSk7cmV0dXJuIGJ9XG5sLnFlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9ZC5oYXNaLGY9ZC5zcnNOYW1lO2Q9ZC5jdXJ2ZTtmJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixmKTtiPWIuamIoKTtRKHtub2RlOmEsaGFzWjplLHNyc05hbWU6ZixjdXJ2ZTpkfSxnaix0aGlzLmYsYixjLHZvaWQgMCx0aGlzKX07bC5zZT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXTtjPWQuaGFzWjt2YXIgZT1kLnNyc05hbWU7ZSYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZSk7ZD1jaihhLm5hbWVzcGFjZVVSSSk7YS5hcHBlbmRDaGlsZChkKTthPWIuRygpO2E9ZWooYSxlLGMpO1coZCxhKX07bC54aD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1tjLmxlbmd0aC0xXSxlPWQuaGFzWjsoZD1kLnNyc05hbWUpJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtiPWxpKGIpO1Eoe25vZGU6YSxoYXNaOmUsc3JzTmFtZTpkfSxoaixTaChcInBvaW50TWVtYmVyXCIpLGIsYyx2b2lkIDAsdGhpcyl9O1xubC55aD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9TWgoYS5uYW1lc3BhY2VVUkksXCJQb2ludFwiKTthLmFwcGVuZENoaWxkKGQpO3RoaXMuc2UoZCxiLGMpfTtsLm9lPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD10aGlzLmdkKGIsYyk7ZCYmKGEuYXBwZW5kQ2hpbGQoZCksdGhpcy5nYyhkLGIsYykpfTtsLnBlPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLnNyc05hbWU7ZCYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZCk7ZD1jaihhLm5hbWVzcGFjZVVSSSk7YS5hcHBlbmRDaGlsZChkKTtkaihkLGIsYyl9O2wucmU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0sZT1kLmhhc1osZj1kLnNyc05hbWU7ZD1kLnN1cmZhY2U7ZiYmYS5zZXRBdHRyaWJ1dGUoXCJzcnNOYW1lXCIsZik7Yj1vaShiKTtRKHtub2RlOmEsaGFzWjplLHNyc05hbWU6ZixzdXJmYWNlOmR9LGlqLHRoaXMuZixiLGMsdm9pZCAwLHRoaXMpfTtcbmwudWU9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuZ2QoYixjKTtkJiYoYS5hcHBlbmRDaGlsZChkKSx0aGlzLmhjKGQsYixjKSl9O2wud2g9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV0uc3JzTmFtZTtkJiZhLnNldEF0dHJpYnV0ZShcInNyc05hbWVcIixkKTtRKHtub2RlOmF9LGpqLFVoLFtiWzBdK1wiIFwiK2JbMV0sYlsyXStcIiBcIitiWzNdXSxjLFtcImxvd2VyQ29ybmVyXCIsXCJ1cHBlckNvcm5lclwiXSx0aGlzKX07XG52YXIgYmo9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7Q3VydmU6Tihhai5wcm90b3R5cGUuZ2MpLE11bHRpQ3VydmU6Tihhai5wcm90b3R5cGUucWUpLFBvaW50Ok4oYWoucHJvdG90eXBlLnNlKSxNdWx0aVBvaW50Ok4oYWoucHJvdG90eXBlLnhoKSxMaW5lU3RyaW5nOk4oYWoucHJvdG90eXBlLmdjKSxNdWx0aUxpbmVTdHJpbmc6Tihhai5wcm90b3R5cGUucWUpLExpbmVhclJpbmc6Tihhai5wcm90b3R5cGUucGUpLFBvbHlnb246Tihhai5wcm90b3R5cGUuaGMpLE11bHRpUG9seWdvbjpOKGFqLnByb3RvdHlwZS5yZSksU3VyZmFjZTpOKGFqLnByb3RvdHlwZS5oYyksTXVsdGlTdXJmYWNlOk4oYWoucHJvdG90eXBlLnJlKSxFbnZlbG9wZTpOKGFqLnByb3RvdHlwZS53aCl9fSxmaj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntvdXRlckJvdW5kYXJ5SXM6Tihhai5wcm90b3R5cGUudGUpLGlubmVyQm91bmRhcnlJczpOKGFqLnByb3RvdHlwZS50ZSl9fSxoaj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntwb2ludE1lbWJlcjpOKGFqLnByb3RvdHlwZS55aCl9fSxcbmdqPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCI6e2xpbmVTdHJpbmdNZW1iZXI6Tihhai5wcm90b3R5cGUub2UpLGN1cnZlTWVtYmVyOk4oYWoucHJvdG90eXBlLm9lKX19O2FqLnByb3RvdHlwZS5mPWZ1bmN0aW9uKGEsYil7cmV0dXJuIE1oKFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIixraltiW2IubGVuZ3RoLTFdLm5vZGUubm9kZU5hbWVdKX07dmFyIGtqPXtNdWx0aUxpbmVTdHJpbmc6XCJsaW5lU3RyaW5nTWVtYmVyXCIsTXVsdGlDdXJ2ZTpcImN1cnZlTWVtYmVyXCIsTXVsdGlQb2x5Z29uOlwicG9seWdvbk1lbWJlclwiLE11bHRpU3VyZmFjZTpcInN1cmZhY2VNZW1iZXJcIn0saWo9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9nbWxcIjp7c3VyZmFjZU1lbWJlcjpOKGFqLnByb3RvdHlwZS51ZSkscG9seWdvbk1lbWJlcjpOKGFqLnByb3RvdHlwZS51ZSl9fSxqaj17XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2dtbFwiOntsb3dlckNvcm5lcjpOKFcpLHVwcGVyQ29ybmVyOk4oVyl9fTt2YXIgbGo9W251bGwsXCJodHRwOi8vd3d3LnRvcG9ncmFmaXguY29tL0dQWC8xLzBcIixcImh0dHA6Ly93d3cudG9wb2dyYWZpeC5jb20vR1BYLzEvMVwiXTtmdW5jdGlvbiBtaihhLGIsYyxkKXthLnB1c2gocGFyc2VGbG9hdChjLmdldEF0dHJpYnV0ZShcImxvblwiKSkscGFyc2VGbG9hdChjLmdldEF0dHJpYnV0ZShcImxhdFwiKSkpO1wiZWxlXCJpbiBkPyhhLnB1c2goZC5lbGUpLGRlbGV0ZSBkLmVsZSxiLmhhc1o9ITApOmEucHVzaCgwKTtcInRpbWVcImluIGQ/KGEucHVzaChkLnRpbWUpLGRlbGV0ZSBkLnRpbWUsYi5oYXNNPSEwKTphLnB1c2goMCk7cmV0dXJuIGF9XG5mdW5jdGlvbiBuaihhLGIsYyl7dmFyIGQ9XCJYWVwiLGU9MjthLmhhc1omJmEuaGFzTT8oZD1cIlhZWk1cIixlPTQpOmEuaGFzWj8oZD1cIlhZWlwiLGU9Myk6YS5oYXNNJiYoZD1cIlhZTVwiLGU9Myk7aWYoNCE9PWUpe3ZhciBmO3ZhciBnPTA7Zm9yKGY9Yi5sZW5ndGgvNDtnPGY7ZysrKWJbZyplXT1iWzQqZ10sYltnKmUrMV09Yls0KmcrMV0sYS5oYXNaJiYoYltnKmUrMl09Yls0KmcrMl0pLGEuaGFzTSYmKGJbZyplKzJdPWJbNCpnKzNdKTtiLmxlbmd0aD1iLmxlbmd0aC80KmU7aWYoYylmb3IoZz0wLGY9Yy5sZW5ndGg7ZzxmO2crKyljW2ddPWNbZ10vNCplfXJldHVybiBkfWZ1bmN0aW9uIG9qKGEsYil7dmFyIGM9YltiLmxlbmd0aC0xXSxkPWEuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtudWxsIT09ZCYmKGMubGluaz1kKTtXaChwaixhLGIpfWZ1bmN0aW9uIHFqKGEsYil7YltiLmxlbmd0aC0xXS5leHRlbnNpb25zTm9kZV89YX1cbk8obGose3J0ZTpKKGZ1bmN0aW9uKGEsYil7dmFyIGM9YlswXTtpZihhPVAoe2ZsYXRDb29yZGluYXRlczpbXSxsYXlvdXRPcHRpb25zOnt9fSxyaixhLGIpKXtiPWEuZmxhdENvb3JkaW5hdGVzO2RlbGV0ZSBhLmZsYXRDb29yZGluYXRlczt2YXIgZD1hLmxheW91dE9wdGlvbnM7ZGVsZXRlIGEubGF5b3V0T3B0aW9ucztkPW5qKGQsYik7dmFyIGU9bmV3IFMobnVsbCk7Z2koZSxkLGIpO2JpKGUsITEsYyk7Yz1uZXcgRShlKTtjLnFhKGEpO3JldHVybiBjfX0pLHRyazpKKGZ1bmN0aW9uKGEsYil7dmFyIGM9YlswXTtpZihhPVAoe2ZsYXRDb29yZGluYXRlczpbXSxlbmRzOltdLGxheW91dE9wdGlvbnM6e319LHNqLGEsYikpe2I9YS5mbGF0Q29vcmRpbmF0ZXM7ZGVsZXRlIGEuZmxhdENvb3JkaW5hdGVzO3ZhciBkPWEuZW5kcztkZWxldGUgYS5lbmRzO3ZhciBlPWEubGF5b3V0T3B0aW9ucztkZWxldGUgYS5sYXlvdXRPcHRpb25zO2U9bmooZSxiLGQpO3ZhciBmPW5ldyBoaShudWxsKTtcbmlpKGYsZSxiLGQpO2JpKGYsITEsYyk7Yz1uZXcgRShmKTtjLnFhKGEpO3JldHVybiBjfX0pLHdwdDpKKGZ1bmN0aW9uKGEsYil7dmFyIGM9YlswXTtpZihiPVAoe30sdGosYSxiKSl7dmFyIGQ9e307YT1taihbXSxkLGEsYik7ZD1uaihkLGEpO2E9bmV3IFFlKGEsZCk7YmkoYSwhMSxjKTtjPW5ldyBFKGEpO2MucWEoYik7cmV0dXJuIGN9fSl9KTtcbnZhciBwaj1PKGxqLHt0ZXh0Ok0oVixcImxpbmtUZXh0XCIpLHR5cGU6TShWLFwibGlua1R5cGVcIil9KSxyaj1PKGxqLHtuYW1lOk0oViksY210Ok0oViksZGVzYzpNKFYpLHNyYzpNKFYpLGxpbms6b2osbnVtYmVyOk0oT2kpLGV4dGVuc2lvbnM6cWosdHlwZTpNKFYpLHJ0ZXB0OmZ1bmN0aW9uKGEsYil7dmFyIGM9UCh7fSx1aixhLGIpO2MmJihiPWJbYi5sZW5ndGgtMV0sbWooYi5mbGF0Q29vcmRpbmF0ZXMsYi5sYXlvdXRPcHRpb25zLGEsYykpfX0pLHVqPU8obGose2VsZTpNKE1pKSx0aW1lOk0oTGkpfSksc2o9Tyhsaix7bmFtZTpNKFYpLGNtdDpNKFYpLGRlc2M6TShWKSxzcmM6TShWKSxsaW5rOm9qLG51bWJlcjpNKE9pKSx0eXBlOk0oViksZXh0ZW5zaW9uczpxaix0cmtzZWc6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iW2IubGVuZ3RoLTFdO1doKHZqLGEsYik7Yy5lbmRzLnB1c2goYy5mbGF0Q29vcmRpbmF0ZXMubGVuZ3RoKX19KSx2aj1PKGxqLHt0cmtwdDpmdW5jdGlvbihhLGIpe3ZhciBjPVxuUCh7fSx3aixhLGIpO2MmJihiPWJbYi5sZW5ndGgtMV0sbWooYi5mbGF0Q29vcmRpbmF0ZXMsYi5sYXlvdXRPcHRpb25zLGEsYykpfX0pLHdqPU8obGose2VsZTpNKE1pKSx0aW1lOk0oTGkpfSksdGo9Tyhsaix7ZWxlOk0oTWkpLHRpbWU6TShMaSksbWFndmFyOk0oTWkpLGdlb2lkaGVpZ2h0Ok0oTWkpLG5hbWU6TShWKSxjbXQ6TShWKSxkZXNjOk0oViksc3JjOk0oViksbGluazpvaixzeW06TShWKSx0eXBlOk0oViksZml4Ok0oViksc2F0Ok0oT2kpLGhkb3A6TShNaSksdmRvcDpNKE1pKSxwZG9wOk0oTWkpLGFnZW9mZGdwc2RhdGE6TShNaSksZGdwc2lkOk0oT2kpLGV4dGVuc2lvbnM6cWp9KTtmdW5jdGlvbiB4aihhLGIsYyl7YS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsYik7Yj1jW2MubGVuZ3RoLTFdLnByb3BlcnRpZXM7USh7bm9kZTphfSx5aixVaCxbYi5saW5rVGV4dCxiLmxpbmtUeXBlXSxjLHpqKX1cbmZ1bmN0aW9uIEFqKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9ZC5ub2RlLm5hbWVzcGFjZVVSSSxmPWQucHJvcGVydGllczthLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJsYXRcIixiWzFdKTthLnNldEF0dHJpYnV0ZU5TKG51bGwsXCJsb25cIixiWzBdKTtzd2l0Y2goZC5nZW9tZXRyeUxheW91dCl7Y2FzZSBcIlhZWk1cIjpiWzNdJiYoZi50aW1lPWJbM10pO2Nhc2UgXCJYWVpcIjpiWzJdJiYoZi5lbGU9YlsyXSk7YnJlYWs7Y2FzZSBcIlhZTVwiOmJbMl0mJihmLnRpbWU9YlsyXSl9Yj1cInJ0ZXB0XCI9PWEubm9kZU5hbWU/QmpbZV06Q2pbZV07ZD1WaChmLGIpO1Eoe25vZGU6YSxwcm9wZXJ0aWVzOmZ9LERqLFVoLGQsYyxiKX1cbnZhciB6aj1bXCJ0ZXh0XCIsXCJ0eXBlXCJdLHlqPU8obGose3RleHQ6TihXKSx0eXBlOk4oVyl9KSxFaj1PKGxqLFwibmFtZSBjbXQgZGVzYyBzcmMgbGluayBudW1iZXIgdHlwZSBydGVwdFwiLnNwbGl0KFwiIFwiKSksRmo9Tyhsaix7bmFtZTpOKFcpLGNtdDpOKFcpLGRlc2M6TihXKSxzcmM6TihXKSxsaW5rOk4oeGopLG51bWJlcjpOKFNpKSx0eXBlOk4oVykscnRlcHQ6UmgoTihBaikpfSksQmo9TyhsaixbXCJlbGVcIixcInRpbWVcIl0pLEdqPU8obGosXCJuYW1lIGNtdCBkZXNjIHNyYyBsaW5rIG51bWJlciB0eXBlIHRya3NlZ1wiLnNwbGl0KFwiIFwiKSksSmo9Tyhsaix7bmFtZTpOKFcpLGNtdDpOKFcpLGRlc2M6TihXKSxzcmM6TihXKSxsaW5rOk4oeGopLG51bWJlcjpOKFNpKSx0eXBlOk4oVyksdHJrc2VnOlJoKE4oZnVuY3Rpb24oYSxiLGMpe1Eoe25vZGU6YSxnZW9tZXRyeUxheW91dDpiLlcscHJvcGVydGllczp7fX0sSGosSWosYi5HKCksYyl9KSl9KSxJaj1TaChcInRya3B0XCIpLEhqPU8obGose3Rya3B0Ok4oQWopfSksXG5Daj1PKGxqLFwiZWxlIHRpbWUgbWFndmFyIGdlb2lkaGVpZ2h0IG5hbWUgY210IGRlc2Mgc3JjIGxpbmsgc3ltIHR5cGUgZml4IHNhdCBoZG9wIHZkb3AgcGRvcCBhZ2VvZmRncHNkYXRhIGRncHNpZFwiLnNwbGl0KFwiIFwiKSksRGo9Tyhsaix7ZWxlOk4oUmkpLHRpbWU6TihmdW5jdGlvbihhLGIpe2I9bmV3IERhdGUoMUUzKmIpO2EuYXBwZW5kQ2hpbGQoTGguY3JlYXRlVGV4dE5vZGUoYi5nZXRVVENGdWxsWWVhcigpK1wiLVwiK2hlKGIuZ2V0VVRDTW9udGgoKSsxKStcIi1cIitoZShiLmdldFVUQ0RhdGUoKSkrXCJUXCIraGUoYi5nZXRVVENIb3VycygpKStcIjpcIitoZShiLmdldFVUQ01pbnV0ZXMoKSkrXCI6XCIraGUoYi5nZXRVVENTZWNvbmRzKCkpK1wiWlwiKSl9KSxtYWd2YXI6TihSaSksZ2VvaWRoZWlnaHQ6TihSaSksbmFtZTpOKFcpLGNtdDpOKFcpLGRlc2M6TihXKSxzcmM6TihXKSxsaW5rOk4oeGopLHN5bTpOKFcpLHR5cGU6TihXKSxmaXg6TihXKSxzYXQ6TihTaSksaGRvcDpOKFJpKSx2ZG9wOk4oUmkpLFxucGRvcDpOKFJpKSxhZ2VvZmRncHNkYXRhOk4oUmkpLGRncHNpZDpOKFNpKX0pO1xuTyhsaix7cnRlOk4oZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbMF0sZT1iLkNhKCk7YT17bm9kZTphLHByb3BlcnRpZXM6ZX07aWYoYj1iLlAoKSliPWJpKGIsITAsZCksYS5nZW9tZXRyeUxheW91dD1iLlcsZS5ydGVwdD1iLkcoKTtkPUVqW2NbYy5sZW5ndGgtMV0ubm9kZS5uYW1lc3BhY2VVUkldO2U9VmgoZSxkKTtRKGEsRmosVWgsZSxjLGQpfSksdHJrOk4oZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbMF0sZT1iLkNhKCk7YT17bm9kZTphLHByb3BlcnRpZXM6ZX07aWYoYj1iLlAoKSliPWJpKGIsITAsZCksZS50cmtzZWc9Yi5qYigpO2Q9R2pbY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07ZT1WaChlLGQpO1EoYSxKaixVaCxlLGMsZCl9KSx3cHQ6TihmdW5jdGlvbihhLGIsYyl7dmFyIGQ9Y1swXSxlPWNbYy5sZW5ndGgtMV07ZS5wcm9wZXJ0aWVzPWIuQ2EoKTtpZihiPWIuUCgpKWI9YmkoYiwhMCxkKSxlLmdlb21ldHJ5TGF5b3V0PWIuVyxBaihhLGIuRygpLGMpfSl9KTtmdW5jdGlvbiBLaigpe1poLmNhbGwodGhpcyl9dChLaixaaCk7bD1Lai5wcm90b3R5cGU7bC5JPWZ1bmN0aW9uKCl7cmV0dXJuXCJ0ZXh0XCJ9O2wucGM9ZnVuY3Rpb24oYSxiKXtiPWFpKHRoaXMsYik7KGE9TGooXCJzdHJpbmdcIj09PXR5cGVvZiBhP2E6XCJcIixiKSk/KGI9bmV3IEUsYi54YShhKSxhPWIpOmE9bnVsbDtyZXR1cm4gYX07bC5SYT1mdW5jdGlvbihhLGIpe3ZhciBjPWFpKHRoaXMsYik7Yj1bXTthPUxqKFwic3RyaW5nXCI9PT10eXBlb2YgYT9hOlwiXCIsYyk7dGhpcy5iJiZcIkdlb21ldHJ5Q29sbGVjdGlvblwiPT1hLkkoKT9iPWEuYTpiPVthXTtjPVtdO2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZDxlOysrZClhPW5ldyBFLGEueGEoYltkXSksYy5wdXNoKGEpO3JldHVybiBjfTtsLnRjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZGVmYXVsdERhdGFQcm9qZWN0aW9ufTtsLkFkPWZ1bmN0aW9uKGEsYil7Yj1haSh0aGlzLGIpO3JldHVybihhPWEuUCgpKT9NaihiaShhLCEwLGIpKTpcIlwifTtmdW5jdGlvbiBOaihhLGIsYyxkLGUsZil7a2MuY2FsbCh0aGlzKTt0aGlzLmc9bnVsbDt0aGlzLk49YT9hOm5ldyBJbWFnZTtudWxsIT09ZCYmKHRoaXMuTi5jcm9zc09yaWdpbj1kKTt0aGlzLmE9Zj9kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiQ0FOVkFTXCIpOm51bGw7dGhpcy5pPWY7dGhpcy5jPW51bGw7dGhpcy5qPWU7dGhpcy5iPWM7dGhpcy5CPWI7dGhpcy5sPSExOzI9PXRoaXMuaiYmT2oodGhpcyl9dChOaixrYyk7ZnVuY3Rpb24gT2ooYSl7dmFyIGI9SGMoMSwxKTt0cnl7Yi5kcmF3SW1hZ2UoYS5OLDAsMCksYi5nZXRJbWFnZURhdGEoMCwwLDEsMSl9Y2F0Y2goYyl7YS5sPSEwfX1Oai5wcm90b3R5cGUucz1mdW5jdGlvbigpe3RoaXMuaj0zO3RoaXMuYy5mb3JFYWNoKFpiKTt0aGlzLmM9bnVsbDt0aGlzLmYoXCJjaGFuZ2VcIil9O1xuTmoucHJvdG90eXBlLkw9ZnVuY3Rpb24oKXt0aGlzLmo9Mjt0aGlzLmImJih0aGlzLk4ud2lkdGg9dGhpcy5iWzBdLHRoaXMuTi5oZWlnaHQ9dGhpcy5iWzFdKTt0aGlzLmI9W3RoaXMuTi53aWR0aCx0aGlzLk4uaGVpZ2h0XTt0aGlzLmMuZm9yRWFjaChaYik7dGhpcy5jPW51bGw7T2oodGhpcyk7aWYoIXRoaXMubCYmbnVsbCE9PXRoaXMuaSl7dGhpcy5hLndpZHRoPXRoaXMuTi53aWR0aDt0aGlzLmEuaGVpZ2h0PXRoaXMuTi5oZWlnaHQ7dmFyIGE9dGhpcy5hLmdldENvbnRleHQoXCIyZFwiKTthLmRyYXdJbWFnZSh0aGlzLk4sMCwwKTtmb3IodmFyIGI9YS5nZXRJbWFnZURhdGEoMCwwLHRoaXMuTi53aWR0aCx0aGlzLk4uaGVpZ2h0KSxjPWIuZGF0YSxkPXRoaXMuaVswXS8yNTUsZT10aGlzLmlbMV0vMjU1LGY9dGhpcy5pWzJdLzI1NSxnPTAsaD1jLmxlbmd0aDtnPGg7Zys9NCljW2ddKj1kLGNbZysxXSo9ZSxjW2crMl0qPWY7YS5wdXRJbWFnZURhdGEoYiwwLDApfXRoaXMuZihcImNoYW5nZVwiKX07XG5Oai5wcm90b3R5cGUuaGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hP3RoaXMuYTp0aGlzLk59O05qLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKCl7aWYoMD09dGhpcy5qKXt0aGlzLmo9MTt0aGlzLmM9W3kodGhpcy5OLFwiZXJyb3JcIix0aGlzLnMsdGhpcywhMCkseSh0aGlzLk4sXCJsb2FkXCIsdGhpcy5MLHRoaXMsITApXTt0cnl7dGhpcy5OLnNyYz10aGlzLkJ9Y2F0Y2goYSl7dGhpcy5zKCl9fX07ZnVuY3Rpb24gUGooYSl7YT1hfHx7fTt0aGlzLmk9dm9pZCAwIT09YS5hbmNob3I/YS5hbmNob3I6Wy41LC41XTt0aGlzLkI9bnVsbDt0aGlzLmY9dm9pZCAwIT09YS5hbmNob3JPcmlnaW4/YS5hbmNob3JPcmlnaW46XCJ0b3AtbGVmdFwiO3RoaXMudT12b2lkIDAhPT1hLmFuY2hvclhVbml0cz9hLmFuY2hvclhVbml0czpcImZyYWN0aW9uXCI7dGhpcy5DPXZvaWQgMCE9PWEuYW5jaG9yWVVuaXRzP2EuYW5jaG9yWVVuaXRzOlwiZnJhY3Rpb25cIjt0aGlzLmVhPXZvaWQgMCE9PWEuY3Jvc3NPcmlnaW4/YS5jcm9zc09yaWdpbjpudWxsO3ZhciBiPXZvaWQgMCE9PWEuaW1nP2EuaW1nOm51bGwsYz12b2lkIDAhPT1hLmltZ1NpemU/YS5pbWdTaXplOm51bGwsZD1hLnNyYzt3KCEodm9pZCAwIT09ZCYmYiksNCk7dyghYnx8YiYmYyw1KTt2b2lkIDAhPT1kJiZkLmxlbmd0aHx8IWJ8fChkPWIuc3JjfHx2KGIpLnRvU3RyaW5nKCkpO3codm9pZCAwIT09ZCYmMDxkLmxlbmd0aCw2KTt2YXIgZT12b2lkIDAhPT1cbmEuc3JjPzA6MjtpZih2b2lkIDAhPT1hLmNvbG9yKXt2YXIgZj1hLmNvbG9yO2Y9QXJyYXkuaXNBcnJheShmKT9mOkZjKGYpfWVsc2UgZj1udWxsO3RoaXMuZz1mO2Y9dGhpcy5lYTt2YXIgZz10aGlzLmcsaD11Zy5nZXQoZCxmLGcpO2h8fChoPW5ldyBOaihiLGQsYyxmLGUsZyksdWcuc2V0KGQsZixnLGgpKTt0aGlzLmI9aDt0aGlzLmZhPXZvaWQgMCE9PWEub2Zmc2V0P2Eub2Zmc2V0OlswLDBdO3RoaXMuaj12b2lkIDAhPT1hLm9mZnNldE9yaWdpbj9hLm9mZnNldE9yaWdpbjpcInRvcC1sZWZ0XCI7dGhpcy5MPW51bGw7dGhpcy5EPXZvaWQgMCE9PWEuc2l6ZT9hLnNpemU6bnVsbDt6aC5jYWxsKHRoaXMse29wYWNpdHk6dm9pZCAwIT09YS5vcGFjaXR5P2Eub3BhY2l0eToxLHJvdGF0aW9uOnZvaWQgMCE9PWEucm90YXRpb24/YS5yb3RhdGlvbjowLHNjYWxlOnZvaWQgMCE9PWEuc2NhbGU/YS5zY2FsZToxLHNuYXBUb1BpeGVsOnZvaWQgMCE9PWEuc25hcFRvUGl4ZWw/YS5zbmFwVG9QaXhlbDpcbiEwLHJvdGF0ZVdpdGhWaWV3OnZvaWQgMCE9PWEucm90YXRlV2l0aFZpZXc/YS5yb3RhdGVXaXRoVmlldzohMX0pfXQoUGosemgpO2w9UGoucHJvdG90eXBlO1xubC5jbG9uZT1mdW5jdGlvbigpe3ZhciBhPXRoaXMuaGEoMSk7aWYoMj09PXRoaXMuYi5qKWlmKFwiSU1HXCI9PT1hLnRhZ05hbWUudG9VcHBlckNhc2UoKSl2YXIgYj1hLmNsb25lTm9kZSghMCk7ZWxzZXtiPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7dmFyIGM9Yi5nZXRDb250ZXh0KFwiMmRcIik7Yi53aWR0aD1hLndpZHRoO2IuaGVpZ2h0PWEuaGVpZ2h0O2MuZHJhd0ltYWdlKGEsMCwwKX1yZXR1cm4gbmV3IFBqKHthbmNob3I6dGhpcy5pLnNsaWNlKCksYW5jaG9yT3JpZ2luOnRoaXMuZixhbmNob3JYVW5pdHM6dGhpcy51LGFuY2hvcllVbml0czp0aGlzLkMsY3Jvc3NPcmlnaW46dGhpcy5lYSxjb2xvcjp0aGlzLmcmJnRoaXMuZy5zbGljZT90aGlzLmcuc2xpY2UoKTp0aGlzLmd8fHZvaWQgMCxpbWc6Yj9iOnZvaWQgMCxpbWdTaXplOmI/dGhpcy5iLmIuc2xpY2UoKTp2b2lkIDAsc3JjOmI/dm9pZCAwOnRoaXMuYi5CLG9mZnNldDp0aGlzLmZhLnNsaWNlKCksb2Zmc2V0T3JpZ2luOnRoaXMuaixcbnNpemU6bnVsbCE9PXRoaXMuRD90aGlzLkQuc2xpY2UoKTp2b2lkIDAsb3BhY2l0eTp0aGlzLmMsc2NhbGU6dGhpcy5hLHNuYXBUb1BpeGVsOnRoaXMucyxyb3RhdGlvbjp0aGlzLmwscm90YXRlV2l0aFZpZXc6dGhpcy52fSl9O1xubC4kYj1mdW5jdGlvbigpe2lmKHRoaXMuQilyZXR1cm4gdGhpcy5CO3ZhciBhPXRoaXMuaSxiPXRoaXMucWIoKTtpZihcImZyYWN0aW9uXCI9PXRoaXMudXx8XCJmcmFjdGlvblwiPT10aGlzLkMpe2lmKCFiKXJldHVybiBudWxsO2E9dGhpcy5pLnNsaWNlKCk7XCJmcmFjdGlvblwiPT10aGlzLnUmJihhWzBdKj1iWzBdKTtcImZyYWN0aW9uXCI9PXRoaXMuQyYmKGFbMV0qPWJbMV0pfWlmKFwidG9wLWxlZnRcIiE9dGhpcy5mKXtpZighYilyZXR1cm4gbnVsbDthPT09dGhpcy5pJiYoYT10aGlzLmkuc2xpY2UoKSk7aWYoXCJ0b3AtcmlnaHRcIj09dGhpcy5mfHxcImJvdHRvbS1yaWdodFwiPT10aGlzLmYpYVswXT0tYVswXStiWzBdO2lmKFwiYm90dG9tLWxlZnRcIj09dGhpcy5mfHxcImJvdHRvbS1yaWdodFwiPT10aGlzLmYpYVsxXT0tYVsxXStiWzFdfXJldHVybiB0aGlzLkI9YX07bC5oYT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5iLmhhKGEpfTtsLmNlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYi5ifTtcbmwubmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5iLmp9O2wuS2U9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmI7aWYoIWEuZylpZihhLmwpe3ZhciBiPWEuYlswXSxjPWEuYlsxXSxkPUhjKGIsYyk7ZC5maWxsUmVjdCgwLDAsYixjKTthLmc9ZC5jYW52YXN9ZWxzZSBhLmc9YS5OO3JldHVybiBhLmd9O2wub2M9ZnVuY3Rpb24oKXtpZih0aGlzLkwpcmV0dXJuIHRoaXMuTDt2YXIgYT10aGlzLmZhO2lmKFwidG9wLWxlZnRcIiE9dGhpcy5qKXt2YXIgYj10aGlzLnFiKCksYz10aGlzLmIuYjtpZighYnx8IWMpcmV0dXJuIG51bGw7YT1hLnNsaWNlKCk7aWYoXCJ0b3AtcmlnaHRcIj09dGhpcy5qfHxcImJvdHRvbS1yaWdodFwiPT10aGlzLmopYVswXT1jWzBdLWJbMF0tYVswXTtpZihcImJvdHRvbS1sZWZ0XCI9PXRoaXMuanx8XCJib3R0b20tcmlnaHRcIj09dGhpcy5qKWFbMV09Y1sxXS1iWzFdLWFbMV19cmV0dXJuIHRoaXMuTD1hfTtsLnFiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRD90aGlzLkQ6dGhpcy5iLmJ9O1xubC5qZT1mdW5jdGlvbihhLGIpe3JldHVybiB5KHRoaXMuYixcImNoYW5nZVwiLGEsYil9O2wubG9hZD1mdW5jdGlvbigpe3RoaXMuYi5sb2FkKCl9O2wuaGY9ZnVuY3Rpb24oYSxiKXtkYyh0aGlzLmIsXCJjaGFuZ2VcIixhLGIpfTtmdW5jdGlvbiBRaihhKXthPWF8fHt9O3RoaXMuZj1hLmZvbnQ7dGhpcy5pPWEucm90YXRpb247dGhpcy5jPWEucm90YXRlV2l0aFZpZXc7dGhpcy5iPWEuc2NhbGU7dGhpcy5kYT1hLnRleHQ7dGhpcy5nPWEudGV4dEFsaWduO3RoaXMuQj1hLnRleHRCYXNlbGluZTt0aGlzLm1hPXZvaWQgMCE9PWEuZmlsbD9hLmZpbGw6bmV3IERoKHtjb2xvcjpcIiMzMzNcIn0pO3RoaXMuamE9dm9pZCAwIT09YS5zdHJva2U/YS5zdHJva2U6bnVsbDt0aGlzLmo9dm9pZCAwIT09YS5vZmZzZXRYP2Eub2Zmc2V0WDowO3RoaXMuYT12b2lkIDAhPT1hLm9mZnNldFk/YS5vZmZzZXRZOjB9bD1Rai5wcm90b3R5cGU7XG5sLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBRaih7Zm9udDp0aGlzLmYscm90YXRpb246dGhpcy5pLHJvdGF0ZVdpdGhWaWV3OnRoaXMuYyxzY2FsZTp0aGlzLmIsdGV4dDp0aGlzLm9hKCksdGV4dEFsaWduOnRoaXMuZyx0ZXh0QmFzZWxpbmU6dGhpcy5CLGZpbGw6dGhpcy5yYSgpP3RoaXMucmEoKS5jbG9uZSgpOnZvaWQgMCxzdHJva2U6dGhpcy5uYSgpP3RoaXMubmEoKS5jbG9uZSgpOnZvaWQgMCxvZmZzZXRYOnRoaXMuaixvZmZzZXRZOnRoaXMuYX0pfTtsLnJhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWF9O2wubmE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5qYX07bC5vYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhfTtsLiRlPWZ1bmN0aW9uKGEpe3RoaXMubWE9YX07bC5jZj1mdW5jdGlvbihhKXt0aGlzLmphPWF9O2wuZGY9ZnVuY3Rpb24oYSl7dGhpcy5kYT1hfTt2YXIgUmo9W1wiaHR0cDovL3d3dy5nb29nbGUuY29tL2ttbC9leHQvMi4yXCJdLFk9W251bGwsXCJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4wXCIsXCJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4xXCIsXCJodHRwOi8vZWFydGguZ29vZ2xlLmNvbS9rbWwvMi4yXCIsXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L2ttbC8yLjJcIl0sU2o9e2ZyYWN0aW9uOlwiZnJhY3Rpb25cIixwaXhlbHM6XCJwaXhlbHNcIixpbnNldFBpeGVsczpcInBpeGVsc1wifTtmdW5jdGlvbiBUaihhKXthPU5oKGEpO2lmKGE9L15cXHMqIz9cXHMqKFswLTlBLUZhLWZdezh9KVxccyokLy5leGVjKGEpKXJldHVybiBhPWFbMV0sW3BhcnNlSW50KGEuc3Vic3RyKDYsMiksMTYpLHBhcnNlSW50KGEuc3Vic3RyKDQsMiksMTYpLHBhcnNlSW50KGEuc3Vic3RyKDIsMiksMTYpLHBhcnNlSW50KGEuc3Vic3RyKDAsMiksMTYpLzI1NV19XG5mdW5jdGlvbiBVaihhKXthPU5oKGEpO2Zvcih2YXIgYj1bXSxjPS9eXFxzKihbK1xcLV0/XFxkKlxcLj9cXGQrKD86ZVsrXFwtXT9cXGQrKT8pXFxzKixcXHMqKFsrXFwtXT9cXGQqXFwuP1xcZCsoPzplWytcXC1dP1xcZCspPykoPzpcXHMqLFxccyooWytcXC1dP1xcZCpcXC4/XFxkKyg/OmVbK1xcLV0/XFxkKyk/KSk/XFxzKi9pLGQ7ZD1jLmV4ZWMoYSk7KWIucHVzaChwYXJzZUZsb2F0KGRbMV0pLHBhcnNlRmxvYXQoZFsyXSksZFszXT9wYXJzZUZsb2F0KGRbM10pOjApLGE9YS5zdWJzdHIoZFswXS5sZW5ndGgpO2lmKFwiXCI9PT1hKXJldHVybiBifWZ1bmN0aW9uIFZqKGEpe3ZhciBiPU5oKGEpLnRyaW0oKTtyZXR1cm4gYS5iYXNlVVJJJiZcImFib3V0OmJsYW5rXCIhPT1hLmJhc2VVUkk/KG5ldyBVUkwoYixhLmJhc2VVUkkpKS5ocmVmOmJ9ZnVuY3Rpb24gV2ooYSl7cmV0dXJuIE1pKGEpfWZ1bmN0aW9uIFhqKGEsYil7cmV0dXJuIFAobnVsbCxZaixhLGIpfVxuZnVuY3Rpb24gWmooYSxiKXtpZihiPVAoe286W10sbmY6W119LGFrLGEsYikpe2E9Yi5vO2I9Yi5uZjt2YXIgYzt2YXIgZD0wO2ZvcihjPU1hdGgubWluKGEubGVuZ3RoLGIubGVuZ3RoKTtkPGM7KytkKWFbNCpkKzNdPWJbZF07Yj1uZXcgUyhudWxsKTtnaShiLFwiWFlaTVwiLGEpO3JldHVybiBifX1mdW5jdGlvbiBiayhhLGIpe3ZhciBjPVAoe30sY2ssYSxiKTtpZihhPVAobnVsbCxkayxhLGIpKXJldHVybiBiPW5ldyBTKG51bGwpLGdpKGIsXCJYWVpcIixhKSxiLnFhKGMpLGJ9ZnVuY3Rpb24gZmsoYSxiKXt2YXIgYz1QKHt9LGNrLGEsYik7aWYoYT1QKG51bGwsZGssYSxiKSlyZXR1cm4gYj1uZXcgeihudWxsKSxYZShiLFwiWFlaXCIsYSxbYS5sZW5ndGhdKSxiLnFhKGMpLGJ9XG5mdW5jdGlvbiBnayhhLGIpe2E9UChbXSxoayxhLGIpO2lmKCFhKXJldHVybiBudWxsO2lmKCFhLmxlbmd0aClyZXR1cm4gbmV3IHZpKGEpO3ZhciBjPSEwLGQ9YVswXS5JKCksZTt2YXIgZj0xO2ZvcihlPWEubGVuZ3RoO2Y8ZTsrK2YpaWYoYj1hW2ZdLGIuSSgpIT1kKXtjPSExO2JyZWFrfWlmKGMpaWYoXCJQb2ludFwiPT1kKXt2YXIgZz1hWzBdO2M9Zy5XO2Q9Zy5vO2Y9MTtmb3IoZT1hLmxlbmd0aDtmPGU7KytmKWI9YVtmXSxpYShkLGIubyk7Yj1nPW5ldyBraShudWxsKTt5ZShiLGMsZCk7Yi5iKCk7aWsoZyxhKX1lbHNlXCJMaW5lU3RyaW5nXCI9PWQ/KGc9bmV3IGhpKG51bGwpLGppKGcsYSksaWsoZyxhKSk6XCJQb2x5Z29uXCI9PWQ/KGc9bmV3IG1pKG51bGwpLHBpKGcsYSksaWsoZyxhKSk6XCJHZW9tZXRyeUNvbGxlY3Rpb25cIj09ZD9nPW5ldyB2aShhKTp3KCExLDM3KTtlbHNlIGc9bmV3IHZpKGEpO3JldHVybiBnfVxuZnVuY3Rpb24gamsoYSxiKXt2YXIgYz1QKHt9LGNrLGEsYik7aWYoYT1QKG51bGwsZGssYSxiKSlyZXR1cm4gYj1uZXcgUWUobnVsbCkseWUoYixcIlhZWlwiLGEpLGIuYigpLGIucWEoYyksYn1mdW5jdGlvbiBrayhhLGIpe3ZhciBjPVAoe30sY2ssYSxiKTtpZigoYT1QKFtudWxsXSxsayxhLGIpKSYmYVswXSl7Yj1uZXcgeihudWxsKTt2YXIgZD1hWzBdLGU9W2QubGVuZ3RoXSxmO3ZhciBnPTE7Zm9yKGY9YS5sZW5ndGg7ZzxmOysrZylpYShkLGFbZ10pLGUucHVzaChkLmxlbmd0aCk7WGUoYixcIlhZWlwiLGQsZSk7Yi5xYShjKTtyZXR1cm4gYn19XG5mdW5jdGlvbiBtayhhLGIpe2I9UCh7fSxuayxhLGIpO2lmKCFiKXJldHVybiBudWxsO2E9XCJmaWxsU3R5bGVcImluIGI/Yi5maWxsU3R5bGU6dm9pZCAwO3ZhciBjPWIuZmlsbDt2b2lkIDA9PT1jfHxjfHwoYT1udWxsKTsoYz1cImltYWdlU3R5bGVcImluIGI/Yi5pbWFnZVN0eWxlOnZvaWQgMCl8fChjPXZvaWQgMCk7dmFyIGQ9XCJ0ZXh0U3R5bGVcImluIGI/Yi50ZXh0U3R5bGU6dm9pZCAwLGU9XCJzdHJva2VTdHlsZVwiaW4gYj9iLnN0cm9rZVN0eWxlOnZvaWQgMDtiPWIub3V0bGluZTt2b2lkIDA9PT1ifHxifHwoZT1udWxsKTtyZXR1cm5bbmV3IEVoKHtmaWxsOmEsaW1hZ2U6YyxzdHJva2U6ZSx0ZXh0OmQsekluZGV4OnZvaWQgMH0pXX1cbmZ1bmN0aW9uIGlrKGEsYil7dmFyIGM9Yi5sZW5ndGgsZD1BcnJheShiLmxlbmd0aCksZT1BcnJheShiLmxlbmd0aCksZj1BcnJheShiLmxlbmd0aCksZyxoLGs7dmFyIG09aD1rPSExO2ZvcihnPTA7ZzxjOysrZyl7dmFyIG49YltnXTtkW2ddPW4uZ2V0KFwiZXh0cnVkZVwiKTtlW2ddPW4uZ2V0KFwidGVzc2VsbGF0ZVwiKTtmW2ddPW4uZ2V0KFwiYWx0aXR1ZGVNb2RlXCIpO209bXx8dm9pZCAwIT09ZFtnXTtoPWh8fHZvaWQgMCE9PWVbZ107az1rfHxmW2ddfW0mJmEuc2V0KFwiZXh0cnVkZVwiLGQpO2gmJmEuc2V0KFwidGVzc2VsbGF0ZVwiLGUpO2smJmEuc2V0KFwiYWx0aXR1ZGVNb2RlXCIsZil9ZnVuY3Rpb24gb2soYSxiKXtXaChwayxhLGIpfWZ1bmN0aW9uIHFrKGEsYil7V2gocmssYSxiKX1cbnZhciBzaz1PKFkse2Rpc3BsYXlOYW1lOk0oViksdmFsdWU6TShWKX0pLHBrPU8oWSx7RGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtXaChzayxhLGIpO2E9YltiLmxlbmd0aC0xXTtudWxsIT09Yz9hW2NdPWEudmFsdWU6bnVsbCE9PWEuZGlzcGxheU5hbWUmJihhW2EuZGlzcGxheU5hbWVdPWEudmFsdWUpO2RlbGV0ZSBhLnZhbHVlfSxTY2hlbWFEYXRhOmZ1bmN0aW9uKGEsYil7V2godGssYSxiKX19KSxyaz1PKFkse0xhdExvbkFsdEJveDpmdW5jdGlvbihhLGIpe2lmKGE9UCh7fSx1ayxhLGIpKWI9YltiLmxlbmd0aC0xXSxiLmV4dGVudD1bcGFyc2VGbG9hdChhLndlc3QpLHBhcnNlRmxvYXQoYS5zb3V0aCkscGFyc2VGbG9hdChhLmVhc3QpLHBhcnNlRmxvYXQoYS5ub3J0aCldLGIuYWx0aXR1ZGVNb2RlPWEuYWx0aXR1ZGVNb2RlLGIubWluQWx0aXR1ZGU9cGFyc2VGbG9hdChhLm1pbkFsdGl0dWRlKSxiLm1heEFsdGl0dWRlPXBhcnNlRmxvYXQoYS5tYXhBbHRpdHVkZSl9LFxuTG9kOmZ1bmN0aW9uKGEsYil7aWYoYT1QKHt9LHZrLGEsYikpYj1iW2IubGVuZ3RoLTFdLGIubWluTG9kUGl4ZWxzPXBhcnNlRmxvYXQoYS5taW5Mb2RQaXhlbHMpLGIubWF4TG9kUGl4ZWxzPXBhcnNlRmxvYXQoYS5tYXhMb2RQaXhlbHMpLGIubWluRmFkZUV4dGVudD1wYXJzZUZsb2F0KGEubWluRmFkZUV4dGVudCksYi5tYXhGYWRlRXh0ZW50PXBhcnNlRmxvYXQoYS5tYXhGYWRlRXh0ZW50KX19KSx1az1PKFkse2FsdGl0dWRlTW9kZTpNKFYpLG1pbkFsdGl0dWRlOk0oTWkpLG1heEFsdGl0dWRlOk0oTWkpLG5vcnRoOk0oTWkpLHNvdXRoOk0oTWkpLGVhc3Q6TShNaSksd2VzdDpNKE1pKX0pLHZrPU8oWSx7bWluTG9kUGl4ZWxzOk0oTWkpLG1heExvZFBpeGVsczpNKE1pKSxtaW5GYWRlRXh0ZW50Ok0oTWkpLG1heEZhZGVFeHRlbnQ6TShNaSl9KSxjaz1PKFkse2V4dHJ1ZGU6TShKaSksdGVzc2VsbGF0ZTpNKEppKSxhbHRpdHVkZU1vZGU6TShWKX0pLFlqPU8oWSx7Y29vcmRpbmF0ZXM6TChVail9KSxcbmxrPU8oWSx7aW5uZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEsYil7KGE9UCh2b2lkIDAsd2ssYSxiKSkmJmJbYi5sZW5ndGgtMV0ucHVzaChhKX0sb3V0ZXJCb3VuZGFyeUlzOmZ1bmN0aW9uKGEsYil7KGE9UCh2b2lkIDAseGssYSxiKSkmJihiW2IubGVuZ3RoLTFdWzBdPWEpfX0pLGFrPU8oWSx7d2hlbjpmdW5jdGlvbihhLGIpe2I9YltiLmxlbmd0aC0xXS5uZjthPU5oKGEpO2E9RGF0ZS5wYXJzZShhKTtiLnB1c2goaXNOYU4oYSk/MDphKX19LE8oUmose2Nvb3JkOmZ1bmN0aW9uKGEsYil7Yj1iW2IubGVuZ3RoLTFdLm87YT1OaChhKTsoYT0vXlxccyooWytcXC1dP1xcZCsoPzpcXC5cXGQqKT8oPzplWytcXC1dP1xcZCopPylcXHMrKFsrXFwtXT9cXGQrKD86XFwuXFxkKik/KD86ZVsrXFwtXT9cXGQqKT8pXFxzKyhbK1xcLV0/XFxkKyg/OlxcLlxcZCopPyg/OmVbK1xcLV0/XFxkKik/KVxccyokL2kuZXhlYyhhKSk/Yi5wdXNoKHBhcnNlRmxvYXQoYVsxXSkscGFyc2VGbG9hdChhWzJdKSxwYXJzZUZsb2F0KGFbM10pLDApOlxuYi5wdXNoKDAsMCwwLDApfX0pKSxkaz1PKFkse2Nvb3JkaW5hdGVzOkwoVWopfSkseWs9TyhZLHtocmVmOk0oVmopfSxPKFJqLHt4Ok0oTWkpLHk6TShNaSksdzpNKE1pKSxoOk0oTWkpfSkpLHprPU8oWSx7SWNvbjpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuKGE9UCh7fSx5ayxhLGIpKT9hOm51bGx9KSxoZWFkaW5nOk0oTWkpLGhvdFNwb3Q6TShmdW5jdGlvbihhKXt2YXIgYj1hLmdldEF0dHJpYnV0ZShcInh1bml0c1wiKSxjPWEuZ2V0QXR0cmlidXRlKFwieXVuaXRzXCIpO3ZhciBkPVwiaW5zZXRQaXhlbHNcIiE9PWI/XCJpbnNldFBpeGVsc1wiIT09Yz9cImJvdHRvbS1sZWZ0XCI6XCJ0b3AtbGVmdFwiOlwiaW5zZXRQaXhlbHNcIiE9PWM/XCJib3R0b20tcmlnaHRcIjpcInRvcC1yaWdodFwiO3JldHVybnt4OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoXCJ4XCIpKSxDZDpTaltiXSx5OnBhcnNlRmxvYXQoYS5nZXRBdHRyaWJ1dGUoXCJ5XCIpKSxEZDpTaltjXSxvcmlnaW46ZH19KSxzY2FsZTpNKFdqKX0pLHdrPU8oWSxcbntMaW5lYXJSaW5nOkwoWGopfSksQWs9TyhZLHtjb2xvcjpNKFRqKSxzY2FsZTpNKFdqKX0pLEJrPU8oWSx7Y29sb3I6TShUaiksd2lkdGg6TShNaSl9KSxoaz1PKFkse0xpbmVTdHJpbmc6SihiayksTGluZWFyUmluZzpKKGZrKSxNdWx0aUdlb21ldHJ5OkooZ2spLFBvaW50OkooamspLFBvbHlnb246Sihrayl9KSxDaz1PKFJqLHtUcmFjazpKKFpqKX0pO08oWSx7RXh0ZW5kZWREYXRhOm9rLFJlZ2lvbjpxayxMaW5rOmZ1bmN0aW9uKGEsYil7V2goRGssYSxiKX0sYWRkcmVzczpNKFYpLGRlc2NyaXB0aW9uOk0oViksbmFtZTpNKFYpLG9wZW46TShKaSkscGhvbmVOdW1iZXI6TShWKSx2aXNpYmlsaXR5Ok0oSmkpfSk7dmFyIERrPU8oWSx7aHJlZjpNKFZqKX0pLHhrPU8oWSx7TGluZWFyUmluZzpMKFhqKX0pLEVrPU8oWSx7U3R5bGU6TShtayksa2V5Ok0oViksc3R5bGVVcmw6TShWail9KTtcbk8oWSx7RXh0ZW5kZWREYXRhOm9rLFJlZ2lvbjpxayxNdWx0aUdlb21ldHJ5Ok0oZ2ssXCJnZW9tZXRyeVwiKSxMaW5lU3RyaW5nOk0oYmssXCJnZW9tZXRyeVwiKSxMaW5lYXJSaW5nOk0oZmssXCJnZW9tZXRyeVwiKSxQb2ludDpNKGprLFwiZ2VvbWV0cnlcIiksUG9seWdvbjpNKGtrLFwiZ2VvbWV0cnlcIiksU3R5bGU6TShtayksU3R5bGVNYXA6ZnVuY3Rpb24oYSxiKXtpZihhPVAodm9pZCAwLEZrLGEsYikpYj1iW2IubGVuZ3RoLTFdLEFycmF5LmlzQXJyYXkoYSk/Yi5TdHlsZT1hOlwic3RyaW5nXCI9PT10eXBlb2YgYT9iLnN0eWxlVXJsPWE6dyghMSwzOCl9LGFkZHJlc3M6TShWKSxkZXNjcmlwdGlvbjpNKFYpLG5hbWU6TShWKSxvcGVuOk0oSmkpLHBob25lTnVtYmVyOk0oViksc3R5bGVVcmw6TShWaiksdmlzaWJpbGl0eTpNKEppKX0sTyhSaix7TXVsdGlUcmFjazpNKGZ1bmN0aW9uKGEsYil7aWYoYT1QKFtdLENrLGEsYikpcmV0dXJuIGI9bmV3IGhpKG51bGwpLGppKGIsYSksYn0sXCJnZW9tZXRyeVwiKSxcblRyYWNrOk0oWmosXCJnZW9tZXRyeVwiKX0pKTtcbnZhciBHaz1PKFkse2NvbG9yOk0oVGopLGZpbGw6TShKaSksb3V0bGluZTpNKEppKX0pLHRrPU8oWSx7U2ltcGxlRGF0YTpmdW5jdGlvbihhLGIpe3ZhciBjPWEuZ2V0QXR0cmlidXRlKFwibmFtZVwiKTtudWxsIT09YyYmKGE9VihhKSxiW2IubGVuZ3RoLTFdW2NdPWEpfX0pLG5rPU8oWSx7SWNvblN0eWxlOmZ1bmN0aW9uKGEsYil7aWYoYT1QKHt9LHprLGEsYikpe2I9YltiLmxlbmd0aC0xXTt2YXIgYz1cIkljb25cImluIGE/YS5JY29uOnt9LGQ9IShcIkljb25cImluIGEpfHwwPE9iamVjdC5rZXlzKGMpLmxlbmd0aCxlLGY9Yy5ocmVmO2Y/ZT1mOmQmJihlPXZvaWQgMCk7Zj1cImJvdHRvbS1sZWZ0XCI7dmFyIGc9YS5ob3RTcG90O2lmKGcpe3ZhciBoPVtnLngsZy55XTt2YXIgaz1nLkNkO3ZhciBtPWcuRGQ7Zj1nLm9yaWdpbn1lbHNlIHZvaWQgMD09PWU/bT1rPWg9dm9pZCAwOi9eaHR0cDpcXC9cXC9tYXBzXFwuKD86Z29vZ2xlfGdzdGF0aWMpXFwuY29tXFwvLy50ZXN0KGUpJiYoaD1bLjUsMF0sbT1cbms9XCJmcmFjdGlvblwiKTt2YXIgbjtnPWMueDt2YXIgcD1jLnk7dm9pZCAwIT09ZyYmdm9pZCAwIT09cCYmKG49W2cscF0pO3ZhciByO2c9Yy53O2M9Yy5oO3ZvaWQgMCE9PWcmJnZvaWQgMCE9PWMmJihyPVtnLGNdKTt2YXIgdTtjPWEuaGVhZGluZzt2b2lkIDAhPT1jJiYodT15YShjKSk7YT1hLnNjYWxlO2Q/KHZvaWQgMD09ZSYmKHI9dm9pZCAwLHZvaWQgMD09PWEmJihhPXZvaWQgMCkpLGU9bmV3IFBqKHthbmNob3I6aCxhbmNob3JPcmlnaW46ZixhbmNob3JYVW5pdHM6ayxhbmNob3JZVW5pdHM6bSxjcm9zc09yaWdpbjpcImFub255bW91c1wiLG9mZnNldDpuLG9mZnNldE9yaWdpbjpcImJvdHRvbS1sZWZ0XCIscm90YXRpb246dSxzY2FsZTphLHNpemU6cixzcmM6ZX0pLGIuaW1hZ2VTdHlsZT1lKTpiLmltYWdlU3R5bGU9dm9pZCAwfX0sTGFiZWxTdHlsZTpmdW5jdGlvbihhLGIpeyhhPVAoe30sQWssYSxiKSkmJihiW2IubGVuZ3RoLTFdLnRleHRTdHlsZT1uZXcgUWooe2ZpbGw6bmV3IERoKHtjb2xvcjpcImNvbG9yXCJpblxuYT9hLmNvbG9yOnZvaWQgMH0pLHNjYWxlOmEuc2NhbGV9KSl9LExpbmVTdHlsZTpmdW5jdGlvbihhLGIpeyhhPVAoe30sQmssYSxiKSkmJihiW2IubGVuZ3RoLTFdLnN0cm9rZVN0eWxlPW5ldyBZZyh7Y29sb3I6XCJjb2xvclwiaW4gYT9hLmNvbG9yOnZvaWQgMCx3aWR0aDpcIndpZHRoXCJpbiBhP2Eud2lkdGg6MX0pKX0sUG9seVN0eWxlOmZ1bmN0aW9uKGEsYil7aWYoYT1QKHt9LEdrLGEsYikpe2I9YltiLmxlbmd0aC0xXTtiLmZpbGxTdHlsZT1uZXcgRGgoe2NvbG9yOlwiY29sb3JcImluIGE/YS5jb2xvcjp2b2lkIDB9KTt2YXIgYz1hLmZpbGw7dm9pZCAwIT09YyYmKGIuZmlsbD1jKTthPWEub3V0bGluZTt2b2lkIDAhPT1hJiYoYi5vdXRsaW5lPWEpfX19KSxGaz1PKFkse1BhaXI6ZnVuY3Rpb24oYSxiKXtpZihhPVAoe30sRWssYSxiKSl7dmFyIGM9YS5rZXk7YyYmXCJub3JtYWxcIj09YyYmKChjPWEuc3R5bGVVcmwpJiYoYltiLmxlbmd0aC0xXT1jKSwoYT1hLlN0eWxlKSYmKGJbYi5sZW5ndGgtXG4xXT1hKSl9fX0pO2Z1bmN0aW9uIEhrKGEsYil7Yj1BcnJheS5pc0FycmF5KGIpP2I6RmMoYik7Yj1bMjU1Kig0PT1iLmxlbmd0aD9iWzNdOjEpLGJbMl0sYlsxXSxiWzBdXTt2YXIgYztmb3IoYz0wOzQ+YzsrK2Mpe3ZhciBkPXBhcnNlSW50KGJbY10sMTApLnRvU3RyaW5nKDE2KTtiW2NdPTE9PWQubGVuZ3RoP1wiMFwiK2Q6ZH1XKGEsYi5qb2luKFwiXCIpKX1mdW5jdGlvbiBJayhhLGIsYyl7YT17bm9kZTphfTt2YXIgZD1iLkkoKTtpZihcIkdlb21ldHJ5Q29sbGVjdGlvblwiPT1kKXt2YXIgZT14aShiLmEpO3ZhciBmPUprfWVsc2VcIk11bHRpUG9pbnRcIj09ZD8oZT1saShiKSxmPUtrKTpcIk11bHRpTGluZVN0cmluZ1wiPT1kPyhlPWIuamIoKSxmPUxrKTpcIk11bHRpUG9seWdvblwiPT1kPyhlPW9pKGIpLGY9TWspOncoITEsMzkpO1EoYSxOayxmLGUsYyl9ZnVuY3Rpb24gT2soYSxiLGMpe1Eoe25vZGU6YX0sUGssUWssW2JdLGMpfVxuZnVuY3Rpb24gUmsoYSxiLGMpe3ZhciBkPXtub2RlOmF9O2IuYSYmYS5zZXRBdHRyaWJ1dGUoXCJpZFwiLGIuYSk7YT1iLkNhKCk7dmFyIGU9e2FkZHJlc3M6MSxkZXNjcmlwdGlvbjoxLG5hbWU6MSxvcGVuOjEscGhvbmVOdW1iZXI6MSxzdHlsZVVybDoxLHZpc2liaWxpdHk6MX07ZVtiLmNdPTE7dmFyIGY9T2JqZWN0LmtleXMoYXx8e30pLnNvcnQoKS5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuIWVbYV19KTtpZigwPGYubGVuZ3RoKXt2YXIgZz1WaChhLGYpO1EoZCxTayxUayxbe25hbWVzOmYsdmFsdWVzOmd9XSxjKX1pZihmPWIuYWMoKSlpZihmPWYuY2FsbChiLDApKWY9QXJyYXkuaXNBcnJheShmKT9mWzBdOmYsdGhpcy5iJiYoYS5TdHlsZT1mKSwoZj1mLm9hKCkpJiYoYS5uYW1lPWYub2EoKSk7Zj1Va1tjW2MubGVuZ3RoLTFdLm5vZGUubmFtZXNwYWNlVVJJXTthPVZoKGEsZik7UShkLFNrLFVoLGEsYyxmKTthPWNbMF07KGI9Yi5QKCkpJiYoYj1iaShiLCEwLGEpKTtRKGQsU2ssXG5KayxbYl0sYyl9ZnVuY3Rpb24gVmsoYSxiLGMpe3ZhciBkPWIubzthPXtub2RlOmF9O2EubGF5b3V0PWIuVzthLnN0cmlkZT1iLkE7Yj1iLkNhKCk7Yi5jb29yZGluYXRlcz1kO2Q9V2tbY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07Yj1WaChiLGQpO1EoYSxYayxVaCxiLGMsZCl9ZnVuY3Rpb24gWWsoYSxiLGMpe2I9JGUoYik7dmFyIGQ9Yi5zaGlmdCgpO2E9e25vZGU6YX07UShhLFprLCRrLGIsYyk7UShhLFprLGFsLFtkXSxjKX1mdW5jdGlvbiBibChhLGIpe1JpKGEsTWF0aC5yb3VuZCgxRTYqYikvMUU2KX1PKFksW1wiRG9jdW1lbnRcIixcIlBsYWNlbWFya1wiXSk7TyhZLHtEb2N1bWVudDpOKGZ1bmN0aW9uKGEsYixjKXtRKHtub2RlOmF9LGNsLGRsLGIsYyx2b2lkIDAsdGhpcyl9KSxQbGFjZW1hcms6TihSayl9KTtcbnZhciBjbD1PKFkse1BsYWNlbWFyazpOKFJrKX0pLGVsPU8oWSx7RGF0YTpOKGZ1bmN0aW9uKGEsYixjKXthLnNldEF0dHJpYnV0ZShcIm5hbWVcIixiLm5hbWUpO2E9e25vZGU6YX07Yj1iLnZhbHVlO1wib2JqZWN0XCI9PXR5cGVvZiBiPyhudWxsIT09YiYmYi5kaXNwbGF5TmFtZSYmUShhLGVsLFVoLFtiLmRpc3BsYXlOYW1lXSxjLFtcImRpc3BsYXlOYW1lXCJdKSxudWxsIT09YiYmYi52YWx1ZSYmUShhLGVsLFVoLFtiLnZhbHVlXSxjLFtcInZhbHVlXCJdKSk6UShhLGVsLFVoLFtiXSxjLFtcInZhbHVlXCJdKX0pLHZhbHVlOk4oZnVuY3Rpb24oYSxiKXtXKGEsYil9KSxkaXNwbGF5TmFtZTpOKGZ1bmN0aW9uKGEsYil7YS5hcHBlbmRDaGlsZChMaC5jcmVhdGVDREFUQVNlY3Rpb24oYikpfSl9KSxmbD17UG9pbnQ6XCJQb2ludFwiLExpbmVTdHJpbmc6XCJMaW5lU3RyaW5nXCIsTGluZWFyUmluZzpcIkxpbmVhclJpbmdcIixQb2x5Z29uOlwiUG9seWdvblwiLE11bHRpUG9pbnQ6XCJNdWx0aUdlb21ldHJ5XCIsTXVsdGlMaW5lU3RyaW5nOlwiTXVsdGlHZW9tZXRyeVwiLFxuTXVsdGlQb2x5Z29uOlwiTXVsdGlHZW9tZXRyeVwiLEdlb21ldHJ5Q29sbGVjdGlvbjpcIk11bHRpR2VvbWV0cnlcIn0sZ2w9TyhZLFtcImhyZWZcIl0sTyhSaixbXCJ4XCIsXCJ5XCIsXCJ3XCIsXCJoXCJdKSksaGw9TyhZLHtocmVmOk4oVyl9LE8oUmose3g6TihSaSkseTpOKFJpKSx3Ok4oUmkpLGg6TihSaSl9KSksaWw9TyhZLFtcInNjYWxlXCIsXCJoZWFkaW5nXCIsXCJJY29uXCIsXCJob3RTcG90XCJdKSxrbD1PKFkse0ljb246TihmdW5jdGlvbihhLGIsYyl7YT17bm9kZTphfTt2YXIgZD1nbFtjW2MubGVuZ3RoLTFdLm5vZGUubmFtZXNwYWNlVVJJXSxlPVZoKGIsZCk7UShhLGhsLFVoLGUsYyxkKTtkPWdsW1JqWzBdXTtlPVZoKGIsZCk7UShhLGhsLGpsLGUsYyxkKX0pLGhlYWRpbmc6TihSaSksaG90U3BvdDpOKGZ1bmN0aW9uKGEsYil7YS5zZXRBdHRyaWJ1dGUoXCJ4XCIsYi54KTthLnNldEF0dHJpYnV0ZShcInlcIixiLnkpO2Euc2V0QXR0cmlidXRlKFwieHVuaXRzXCIsYi5DZCk7YS5zZXRBdHRyaWJ1dGUoXCJ5dW5pdHNcIixcbmIuRGQpfSksc2NhbGU6TihibCl9KSxsbD1PKFksW1wiY29sb3JcIixcInNjYWxlXCJdKSxtbD1PKFkse2NvbG9yOk4oSGspLHNjYWxlOk4oYmwpfSksbmw9TyhZLFtcImNvbG9yXCIsXCJ3aWR0aFwiXSkscGw9TyhZLHtjb2xvcjpOKEhrKSx3aWR0aDpOKFJpKX0pLFBrPU8oWSx7TGluZWFyUmluZzpOKFZrKX0pLE5rPU8oWSx7TGluZVN0cmluZzpOKFZrKSxQb2ludDpOKFZrKSxQb2x5Z29uOk4oWWspLEdlb21ldHJ5Q29sbGVjdGlvbjpOKElrKX0pLFVrPU8oWSxcIm5hbWUgb3BlbiB2aXNpYmlsaXR5IGFkZHJlc3MgcGhvbmVOdW1iZXIgZGVzY3JpcHRpb24gc3R5bGVVcmwgU3R5bGVcIi5zcGxpdChcIiBcIikpLFNrPU8oWSx7RXh0ZW5kZWREYXRhOk4oZnVuY3Rpb24oYSxiLGMpe2E9e25vZGU6YX07dmFyIGQ9Yi5uYW1lcztiPWIudmFsdWVzO2Zvcih2YXIgZT1kLmxlbmd0aCxmPTA7ZjxlO2YrKylRKGEsZWwscWwsW3tuYW1lOmRbZl0sdmFsdWU6YltmXX1dLGMpfSksTXVsdGlHZW9tZXRyeTpOKElrKSxcbkxpbmVTdHJpbmc6TihWayksTGluZWFyUmluZzpOKFZrKSxQb2ludDpOKFZrKSxQb2x5Z29uOk4oWWspLFN0eWxlOk4oZnVuY3Rpb24oYSxiLGMpe2E9e25vZGU6YX07dmFyIGQ9e30sZT1iLnJhKCksZj1iLm5hKCksZz1iLmhhKCk7Yj1iLm9hKCk7ZyBpbnN0YW5jZW9mIFBqJiYoZC5JY29uU3R5bGU9Zyk7YiYmKGQuTGFiZWxTdHlsZT1iKTtmJiYoZC5MaW5lU3R5bGU9Zik7ZSYmKGQuUG9seVN0eWxlPWUpO2I9cmxbY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07ZD1WaChkLGIpO1EoYSxzbCxVaCxkLGMsYil9KSxhZGRyZXNzOk4oVyksZGVzY3JpcHRpb246TihXKSxuYW1lOk4oVyksb3BlbjpOKFFpKSxwaG9uZU51bWJlcjpOKFcpLHN0eWxlVXJsOk4oVyksdmlzaWJpbGl0eTpOKFFpKX0pLFdrPU8oWSxbXCJleHRydWRlXCIsXCJ0ZXNzZWxsYXRlXCIsXCJhbHRpdHVkZU1vZGVcIixcImNvb3JkaW5hdGVzXCJdKSxYaz1PKFkse2V4dHJ1ZGU6TihRaSksdGVzc2VsbGF0ZTpOKFFpKSxhbHRpdHVkZU1vZGU6TihXKSxcbmNvb3JkaW5hdGVzOk4oZnVuY3Rpb24oYSxiLGMpe2M9Y1tjLmxlbmd0aC0xXTt2YXIgZD1jLmxheW91dDtjPWMuc3RyaWRlO3ZhciBlO1wiWFlcIj09ZHx8XCJYWU1cIj09ZD9lPTI6XCJYWVpcIj09ZHx8XCJYWVpNXCI9PWQ/ZT0zOncoITEsMzQpO3ZhciBmLGc9Yi5sZW5ndGgsaD1cIlwiO2lmKDA8Zyl7aCs9YlswXTtmb3IoZD0xO2Q8ZTsrK2QpaCs9XCIsXCIrYltkXTtmb3IoZj1jO2Y8ZztmKz1jKWZvcihoKz1cIiBcIitiW2ZdLGQ9MTtkPGU7KytkKWgrPVwiLFwiK2JbZitkXX1XKGEsaCl9KX0pLFprPU8oWSx7b3V0ZXJCb3VuZGFyeUlzOk4oT2spLGlubmVyQm91bmRhcnlJczpOKE9rKX0pLHRsPU8oWSx7Y29sb3I6TihIayl9KSxybD1PKFksW1wiSWNvblN0eWxlXCIsXCJMYWJlbFN0eWxlXCIsXCJMaW5lU3R5bGVcIixcIlBvbHlTdHlsZVwiXSksc2w9TyhZLHtJY29uU3R5bGU6TihmdW5jdGlvbihhLGIsYyl7YT17bm9kZTphfTt2YXIgZD17fSxlPWIucWIoKSxmPWIuY2UoKSxnPXtocmVmOmIuYi5CfTtpZihlKXtnLnc9XG5lWzBdO2cuaD1lWzFdO3ZhciBoPWIuJGIoKSxrPWIub2MoKTtrJiZmJiZrWzBdJiZrWzFdIT09ZVsxXSYmKGcueD1rWzBdLGcueT1mWzFdLShrWzFdK2VbMV0pKTshaHx8aFswXT09PWVbMF0vMiYmaFsxXT09PWVbMV0vMnx8KGQuaG90U3BvdD17eDpoWzBdLENkOlwicGl4ZWxzXCIseTplWzFdLWhbMV0sRGQ6XCJwaXhlbHNcIn0pfWQuSWNvbj1nO2U9Yi5hOzEhPT1lJiYoZC5zY2FsZT1lKTsoYj1iLmwpJiYoZC5oZWFkaW5nPWIpO2I9aWxbY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07ZD1WaChkLGIpO1EoYSxrbCxVaCxkLGMsYil9KSxMYWJlbFN0eWxlOk4oZnVuY3Rpb24oYSxiLGMpe2E9e25vZGU6YX07dmFyIGQ9e30sZT1iLnJhKCk7ZSYmKGQuY29sb3I9ZS5iKTsoYj1iLmIpJiYxIT09YiYmKGQuc2NhbGU9Yik7Yj1sbFtjW2MubGVuZ3RoLTFdLm5vZGUubmFtZXNwYWNlVVJJXTtkPVZoKGQsYik7UShhLG1sLFVoLGQsYyxiKX0pLExpbmVTdHlsZTpOKGZ1bmN0aW9uKGEsXG5iLGMpe2E9e25vZGU6YX07dmFyIGQ9bmxbY1tjLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSV07Yj1WaCh7Y29sb3I6Yi5iLHdpZHRoOmIuYX0sZCk7UShhLHBsLFVoLGIsYyxkKX0pLFBvbHlTdHlsZTpOKGZ1bmN0aW9uKGEsYixjKXtRKHtub2RlOmF9LHRsLHVsLFtiLmJdLGMpfSl9KTtmdW5jdGlvbiBqbChhLGIsYyl7cmV0dXJuIE1oKFJqWzBdLFwiZ3g6XCIrYyl9ZnVuY3Rpb24gZGwoYSxiKXtyZXR1cm4gTWgoYltiLmxlbmd0aC0xXS5ub2RlLm5hbWVzcGFjZVVSSSxcIlBsYWNlbWFya1wiKX1mdW5jdGlvbiBKayhhLGIpe2lmKGEpcmV0dXJuIE1oKGJbYi5sZW5ndGgtMV0ubm9kZS5uYW1lc3BhY2VVUkksZmxbYS5JKCldKX1cbnZhciB1bD1TaChcImNvbG9yXCIpLHFsPVNoKFwiRGF0YVwiKSxUaz1TaChcIkV4dGVuZGVkRGF0YVwiKSwkaz1TaChcImlubmVyQm91bmRhcnlJc1wiKSxLaz1TaChcIlBvaW50XCIpLExrPVNoKFwiTGluZVN0cmluZ1wiKSxRaz1TaChcIkxpbmVhclJpbmdcIiksTWs9U2goXCJQb2x5Z29uXCIpLGFsPVNoKFwib3V0ZXJCb3VuZGFyeUlzXCIpO1pnLlJiPWZ1bmN0aW9uKCl7fTtcbihmdW5jdGlvbihhKXtmdW5jdGlvbiBiKGEpe3RoaXMuVGE9QXJyYXlCdWZmZXIuaXNWaWV3JiZBcnJheUJ1ZmZlci5pc1ZpZXcoYSk/YTpuZXcgVWludDhBcnJheShhfHwwKTt0aGlzLnR5cGU9dGhpcy5NPTA7dGhpcy5sZW5ndGg9dGhpcy5UYS5sZW5ndGh9ZnVuY3Rpb24gYyhhLGIsYyl7dmFyIGU9Yy5UYTt2YXIgZj1lW2MuTSsrXTt2YXIgZz0oZiYxMTIpPj40O2lmKDEyOD5mKXJldHVybiBkKGEsZyxiKTtmPWVbYy5NKytdO2d8PShmJjEyNyk8PDM7aWYoMTI4PmYpcmV0dXJuIGQoYSxnLGIpO2Y9ZVtjLk0rK107Z3w9KGYmMTI3KTw8MTA7aWYoMTI4PmYpcmV0dXJuIGQoYSxnLGIpO2Y9ZVtjLk0rK107Z3w9KGYmMTI3KTw8MTc7aWYoMTI4PmYpcmV0dXJuIGQoYSxnLGIpO2Y9ZVtjLk0rK107Z3w9KGYmMTI3KTw8MjQ7aWYoMTI4PmYpcmV0dXJuIGQoYSxnLGIpO2Y9ZVtjLk0rK107aWYoMTI4PmYpcmV0dXJuIGQoYSxnfChmJjEpPDwzMSxiKTt0aHJvdyBFcnJvcihcIkV4cGVjdGVkIHZhcmludCBub3QgbW9yZSB0aGFuIDEwIGJ5dGVzXCIpO31cbmZ1bmN0aW9uIGQoYSxiLGMpe3JldHVybiBjPzQyOTQ5NjcyOTYqYisoYT4+PjApOjQyOTQ5NjcyOTYqKGI+Pj4wKSsoYT4+PjApfXZhciBlPXtyZWFkOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9OCplLWQtMTt2YXIgZz0oMTw8ZiktMSxoPWc+PjEsaz0tNztlPWM/ZS0xOjA7dmFyIG09Yz8tMToxLEY9YVtiK2VdO2UrPW07Yz1GJigxPDwtayktMTtGPj49LWs7Zm9yKGsrPWY7MDxrO2M9MjU2KmMrYVtiK2VdLGUrPW0say09OCk7Zj1jJigxPDwtayktMTtjPj49LWs7Zm9yKGsrPWQ7MDxrO2Y9MjU2KmYrYVtiK2VdLGUrPW0say09OCk7aWYoMD09PWMpYz0xLWg7ZWxzZXtpZihjPT09ZylyZXR1cm4gZj9OYU46SW5maW5pdHkqKEY/LTE6MSk7Zis9TWF0aC5wb3coMixkKTtjLT1ofXJldHVybihGPy0xOjEpKmYqTWF0aC5wb3coMixjLWQpfSx3cml0ZTpmdW5jdGlvbihhLGIsYyxkLGUsbil7dmFyIGYsZz04Km4tZS0xLGg9KDE8PGcpLTEsaz1oPj4xLG09MjM9PT1lP01hdGgucG93KDIsXG4tMjQpLU1hdGgucG93KDIsLTc3KTowO249ZD8wOm4tMTt2YXIgQz1kPzE6LTEsQT0wPmJ8fDA9PT1iJiYwPjEvYj8xOjA7Yj1NYXRoLmFicyhiKTtpc05hTihiKXx8SW5maW5pdHk9PT1iPyhiPWlzTmFOKGIpPzE6MCxkPWgpOihkPU1hdGguZmxvb3IoTWF0aC5sb2coYikvTWF0aC5MTjIpLDE+YiooZj1NYXRoLnBvdygyLC1kKSkmJihkLS0sZio9MiksYj0xPD1kK2s/YittL2Y6YittKk1hdGgucG93KDIsMS1rKSwyPD1iKmYmJihkKyssZi89MiksZCtrPj1oPyhiPTAsZD1oKToxPD1kK2s/KGI9KGIqZi0xKSpNYXRoLnBvdygyLGUpLGQrPWspOihiPWIqTWF0aC5wb3coMixrLTEpKk1hdGgucG93KDIsZSksZD0wKSk7Zm9yKDs4PD1lO2FbYytuXT1iJjI1NSxuKz1DLGIvPTI1NixlLT04KTtkPWQ8PGV8Yjtmb3IoZys9ZTswPGc7YVtjK25dPWQmMjU1LG4rPUMsZC89MjU2LGctPTgpO2FbYytuLUNdfD0xMjgqQX19O2IuYT0wO2Iuaj0xO2IuYj0yO2IuZj01O2IucHJvdG90eXBlPXtyZDpmdW5jdGlvbihhLFxuYixjKXtmb3IoYz1jfHx0aGlzLmxlbmd0aDt0aGlzLk08Yzspe3ZhciBkPXRoaXMuaWEoKSxlPWQ+PjMsZj10aGlzLk07dGhpcy50eXBlPWQmNzthKGUsYix0aGlzKTt0aGlzLk09PT1mJiZ0aGlzLkppKGQpfXJldHVybiBifSx0aTpmdW5jdGlvbigpe3ZhciBhPWUucmVhZCh0aGlzLlRhLHRoaXMuTSwhMCwyMyw0KTt0aGlzLk0rPTQ7cmV0dXJuIGF9LG9pOmZ1bmN0aW9uKCl7dmFyIGE9ZS5yZWFkKHRoaXMuVGEsdGhpcy5NLCEwLDUyLDgpO3RoaXMuTSs9ODtyZXR1cm4gYX0saWE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5UYTt2YXIgZD1iW3RoaXMuTSsrXTt2YXIgZT1kJjEyNztpZigxMjg+ZClyZXR1cm4gZTtkPWJbdGhpcy5NKytdO2V8PShkJjEyNyk8PDc7aWYoMTI4PmQpcmV0dXJuIGU7ZD1iW3RoaXMuTSsrXTtlfD0oZCYxMjcpPDwxNDtpZigxMjg+ZClyZXR1cm4gZTtkPWJbdGhpcy5NKytdO2V8PShkJjEyNyk8PDIxO2lmKDEyOD5kKXJldHVybiBlO2Q9Ylt0aGlzLk1dO3JldHVybiBjKGV8XG4oZCYxNSk8PDI4LGEsdGhpcyl9LEFpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaWEoITApfSx2ZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuaWEoKTtyZXR1cm4gMT09PWElMj8oYSsxKS8tMjphLzJ9LG1pOmZ1bmN0aW9uKCl7cmV0dXJuISF0aGlzLmlhKCl9LHdkOmZ1bmN0aW9uKCl7Zm9yKHZhciBhPXRoaXMuaWEoKSt0aGlzLk0sYj10aGlzLlRhLGM9XCJcIixkPXRoaXMuTTtkPGE7KXt2YXIgZT1iW2RdLG49bnVsbCxwPTIzOTxlPzQ6MjIzPGU/MzoxOTE8ZT8yOjE7aWYoZCtwPmEpYnJlYWs7aWYoMT09PXApMTI4PmUmJihuPWUpO2Vsc2UgaWYoMj09PXApe3ZhciByPWJbZCsxXTsxMjg9PT0ociYxOTIpJiYobj0oZSYzMSk8PDZ8ciY2MywxMjc+PW4mJihuPW51bGwpKX1lbHNlIGlmKDM9PT1wKXtyPWJbZCsxXTt2YXIgdT1iW2QrMl07MTI4PT09KHImMTkyKSYmMTI4PT09KHUmMTkyKSYmKG49KGUmMTUpPDwxMnwociY2Myk8PDZ8dSY2MywyMDQ3Pj1ufHw1NTI5Njw9biYmNTczNDM+PVxubikmJihuPW51bGwpfWVsc2UgaWYoND09PXApe3I9YltkKzFdO3U9YltkKzJdO3ZhciBEPWJbZCszXTsxMjg9PT0ociYxOTIpJiYxMjg9PT0odSYxOTIpJiYxMjg9PT0oRCYxOTIpJiYobj0oZSYxNSk8PDE4fChyJjYzKTw8MTJ8KHUmNjMpPDw2fEQmNjMsNjU1MzU+PW58fDExMTQxMTI8PW4pJiYobj1udWxsKX1udWxsPT09bj8obj02NTUzMyxwPTEpOjY1NTM1PG4mJihuLT02NTUzNixjKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG4+Pj4xMCYxMDIzfDU1Mjk2KSxuPTU2MzIwfG4mMTAyMyk7Yys9U3RyaW5nLmZyb21DaGFyQ29kZShuKTtkKz1wfXRoaXMuTT1hO3JldHVybiBjfSxKaTpmdW5jdGlvbihhKXthJj03O2lmKGE9PT1iLmEpZm9yKDsxMjc8dGhpcy5UYVt0aGlzLk0rK107KTtlbHNlIGlmKGE9PT1iLmIpdGhpcy5NPXRoaXMuaWEoKSt0aGlzLk07ZWxzZSBpZihhPT09Yi5mKXRoaXMuTSs9NDtlbHNlIGlmKGE9PT1iLmopdGhpcy5NKz04O2Vsc2UgdGhyb3cgRXJyb3IoXCJVbmltcGxlbWVudGVkIHR5cGU6IFwiK1xuYSk7fX07YVtcImRlZmF1bHRcIl09Yn0pKFpnLlJiPVpnLlJifHx7fSk7WmcuUmI9WmcuUmIuZGVmYXVsdDtaZy56ZD17fTtaZy56ZC5HZD1mdW5jdGlvbigpe307XG4oZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIpe3RoaXMubGF5ZXJzPWEucmQoayx7fSxiKX1mdW5jdGlvbiBjKGEsYil7dGhpcy54PWE7dGhpcy55PWJ9ZnVuY3Rpb24gZChhLGIsYyxkLGYpe3RoaXMucHJvcGVydGllcz17fTt0aGlzLmV4dGVudD1jO3RoaXMudHlwZT0wO3RoaXMuaWI9YTt0aGlzLktkPS0xO3RoaXMuVWI9ZDt0aGlzLldiPWY7YS5yZChlLHRoaXMsYil9ZnVuY3Rpb24gZShhLGIsYyl7aWYoMT09YSliLmlkPWMuaWEoKTtlbHNlIGlmKDI9PWEpZm9yKGE9Yy5pYSgpK2MuTTtjLk08YTspe3ZhciBkPWIuVWJbYy5pYSgpXSxlPWIuV2JbYy5pYSgpXTtiLnByb3BlcnRpZXNbZF09ZX1lbHNlIDM9PWE/Yi50eXBlPWMuaWEoKTo0PT1hJiYoYi5LZD1jLk0pfWZ1bmN0aW9uIGYoYSxiKXt0aGlzLnZlcnNpb249MTt0aGlzLm5hbWU9bnVsbDt0aGlzLmV4dGVudD00MDk2O3RoaXMubGVuZ3RoPTA7dGhpcy5pYj1hO3RoaXMuVWI9W107dGhpcy5XYj1bXTt0aGlzLlRiPVtdO2EucmQoZyxcbnRoaXMsYik7dGhpcy5sZW5ndGg9dGhpcy5UYi5sZW5ndGh9ZnVuY3Rpb24gZyhhLGIsYyl7MTU9PT1hP2IudmVyc2lvbj1jLmlhKCk6MT09PWE/Yi5uYW1lPWMud2QoKTo1PT09YT9iLmV4dGVudD1jLmlhKCk6Mj09PWE/Yi5UYi5wdXNoKGMuTSk6Mz09PWE/Yi5VYi5wdXNoKGMud2QoKSk6ND09PWEmJmIuV2IucHVzaChoKGMpKX1mdW5jdGlvbiBoKGEpe2Zvcih2YXIgYj1udWxsLGM9YS5pYSgpK2EuTTthLk08YzspYj1hLmlhKCk+PjMsYj0xPT09Yj9hLndkKCk6Mj09PWI/YS50aSgpOjM9PT1iP2Eub2koKTo0PT09Yj9hLkFpKCk6NT09PWI/YS5pYSgpOjY9PT1iP2EudmQoKTo3PT09Yj9hLm1pKCk6bnVsbDtyZXR1cm4gYn1mdW5jdGlvbiBrKGEsYixjKXszPT09YSYmKGE9bmV3IG0oYyxjLmlhKCkrYy5NKSxhLmxlbmd0aCYmKGJbYS5uYW1lXT1hKSl9Yy5wcm90b3R5cGU9e2Nsb25lOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBjKHRoaXMueCx0aGlzLnkpfSxhZGQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2xvbmUoKS5IZihhKX0sXG5yb3RhdGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuY2xvbmUoKS5RZihhKX0scm91bmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jbG9uZSgpLlJmKCl9LGFuZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIE1hdGguYXRhbjIodGhpcy55LHRoaXMueCl9LEhmOmZ1bmN0aW9uKGEpe3RoaXMueCs9YS54O3RoaXMueSs9YS55O3JldHVybiB0aGlzfSxRZjpmdW5jdGlvbihhKXt2YXIgYj1NYXRoLmNvcyhhKTthPU1hdGguc2luKGEpO3ZhciBjPWEqdGhpcy54K2IqdGhpcy55O3RoaXMueD1iKnRoaXMueC1hKnRoaXMueTt0aGlzLnk9YztyZXR1cm4gdGhpc30sUmY6ZnVuY3Rpb24oKXt0aGlzLng9TWF0aC5yb3VuZCh0aGlzLngpO3RoaXMueT1NYXRoLnJvdW5kKHRoaXMueSk7cmV0dXJuIHRoaXN9fTtjLmhqPWZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgYz9hOkFycmF5LmlzQXJyYXkoYSk/bmV3IGMoYVswXSxhWzFdKTphfTtkLmI9W1wiVW5rbm93blwiLFwiUG9pbnRcIixcIkxpbmVTdHJpbmdcIixcblwiUG9seWdvblwiXTtkLnByb3RvdHlwZS5iYm94PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5pYjthLk09dGhpcy5LZDtmb3IodmFyIGI9YS5pYSgpK2EuTSxjPTEsZD0wLGU9MCxmPTAsZz1JbmZpbml0eSxoPS1JbmZpbml0eSxrPUluZmluaXR5LG49LUluZmluaXR5O2EuTTxiOylpZihkfHwoZD1hLmlhKCksYz1kJjcsZD4+PTMpLGQtLSwxPT09Y3x8Mj09PWMpZSs9YS52ZCgpLGYrPWEudmQoKSxlPGcmJihnPWUpLGU+aCYmKGg9ZSksZjxrJiYoaz1mKSxmPm4mJihuPWYpO2Vsc2UgaWYoNyE9PWMpdGhyb3cgRXJyb3IoXCJ1bmtub3duIGNvbW1hbmQgXCIrYyk7cmV0dXJuW2csayxoLG5dfTt2YXIgbT1mO2YucHJvdG90eXBlLmZlYXR1cmU9ZnVuY3Rpb24oYSl7aWYoMD5hfHxhPj10aGlzLlRiLmxlbmd0aCl0aHJvdyBFcnJvcihcImZlYXR1cmUgaW5kZXggb3V0IG9mIGJvdW5kc1wiKTt0aGlzLmliLk09dGhpcy5UYlthXTthPXRoaXMuaWIuaWEoKSt0aGlzLmliLk07cmV0dXJuIG5ldyBkKHRoaXMuaWIsXG5hLHRoaXMuZXh0ZW50LHRoaXMuVWIsdGhpcy5XYil9O3ZhciBuPW07YVtcImRlZmF1bHRcIl09e0dkOmIsRmY6ZCxHZjpufTthLkdkPWI7YS5GZj1kO2EuR2Y9bn0pKFpnLnpkPVpnLnpkfHx7fSk7ZnVuY3Rpb24gdmwoYSxiKXtiW2IubGVuZ3RoLTFdLk5iW2EuZ2V0QXR0cmlidXRlKFwia1wiKV09YS5nZXRBdHRyaWJ1dGUoXCJ2XCIpfXZhciB3bD1bbnVsbF0seGw9Tyh3bCx7bmQ6ZnVuY3Rpb24oYSxiKXtiW2IubGVuZ3RoLTFdLm9iLnB1c2goYS5nZXRBdHRyaWJ1dGUoXCJyZWZcIikpfSx0YWc6dmx9KTtcbk8od2wse25vZGU6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iWzBdLGQ9YltiLmxlbmd0aC0xXSxlPWEuZ2V0QXR0cmlidXRlKFwiaWRcIiksZj1bcGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZShcImxvblwiKSkscGFyc2VGbG9hdChhLmdldEF0dHJpYnV0ZShcImxhdFwiKSldO2QuaWhbZV09ZjthPVAoe05iOnt9fSx5bCxhLGIpO2JiKGEuTmIpfHwoZj1uZXcgUWUoZiksYmkoZiwhMSxjKSxjPW5ldyBFKGYpLGMuYWIoZSksYy5xYShhLk5iKSxkLmZlYXR1cmVzLnB1c2goYykpfSx3YXk6ZnVuY3Rpb24oYSxiKXt2YXIgYz1iWzBdLGQ9YS5nZXRBdHRyaWJ1dGUoXCJpZFwiKTthPVAoe29iOltdLE5iOnt9fSx4bCxhLGIpO2I9YltiLmxlbmd0aC0xXTtmb3IodmFyIGU9W10sZj0wLGc9YS5vYi5sZW5ndGg7ZjxnO2YrKylpYShlLGIuaWhbYS5vYltmXV0pO2Eub2JbMF09PWEub2JbYS5vYi5sZW5ndGgtMV0/KGY9bmV3IHoobnVsbCksWGUoZixcIlhZXCIsZSxbZS5sZW5ndGhdKSk6KGY9bmV3IFMobnVsbCksZ2koZixcblwiWFlcIixlKSk7YmkoZiwhMSxjKTtjPW5ldyBFKGYpO2MuYWIoZCk7Yy5xYShhLk5iKTtiLmZlYXR1cmVzLnB1c2goYyl9fSk7dmFyIHlsPU8od2wse3RhZzp2bH0pO2Z1bmN0aW9uIHpsKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFwiaHJlZlwiKX07dmFyIEFsPVtudWxsLFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC9vd3MvMS4xXCJdO08oQWwse1NlcnZpY2VJZGVudGlmaWNhdGlvbjpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sQmwsYSxiKX0pLFNlcnZpY2VQcm92aWRlcjpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sQ2wsYSxiKX0pLE9wZXJhdGlvbnNNZXRhZGF0YTpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sRGwsYSxiKX0pfSk7XG52YXIgRWw9TyhBbCx7RGVsaXZlcnlQb2ludDpNKFYpLENpdHk6TShWKSxBZG1pbmlzdHJhdGl2ZUFyZWE6TShWKSxQb3N0YWxDb2RlOk0oViksQ291bnRyeTpNKFYpLEVsZWN0cm9uaWNNYWlsQWRkcmVzczpNKFYpfSksRmw9TyhBbCx7VmFsdWU6UWgoZnVuY3Rpb24oYSl7cmV0dXJuIFYoYSl9KX0pLEdsPU8oQWwse0FsbG93ZWRWYWx1ZXM6TShmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LEZsLGEsYil9KX0pLElsPU8oQWwse1Bob25lOk0oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxIbCxhLGIpfSksQWRkcmVzczpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sRWwsYSxiKX0pfSksS2w9TyhBbCx7SFRUUDpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sSmwsYSxiKX0pfSksSmw9TyhBbCx7R2V0OlFoKGZ1bmN0aW9uKGEsYil7dmFyIGM9emwoYSk7aWYoYylyZXR1cm4gUCh7aHJlZjpjfSxMbCxhLGIpfSksUG9zdDp2b2lkIDB9KSxNbD1PKEFsLHtEQ1A6TShmdW5jdGlvbihhLFxuYil7cmV0dXJuIFAoe30sS2wsYSxiKX0pfSksRGw9TyhBbCx7T3BlcmF0aW9uOmZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpOyhhPVAoe30sTWwsYSxiKSkmJihiW2IubGVuZ3RoLTFdW2NdPWEpfX0pLEhsPU8oQWwse1ZvaWNlOk0oViksRmFjc2ltaWxlOk0oVil9KSxMbD1PKEFsLHtDb25zdHJhaW50OlFoKGZ1bmN0aW9uKGEsYil7dmFyIGM9YS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO2lmKGMpcmV0dXJuIFAoe25hbWU6Y30sR2wsYSxiKX0pfSksTmw9TyhBbCx7SW5kaXZpZHVhbE5hbWU6TShWKSxQb3NpdGlvbk5hbWU6TShWKSxDb250YWN0SW5mbzpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sSWwsYSxiKX0pfSksQmw9TyhBbCx7VGl0bGU6TShWKSxTZXJ2aWNlVHlwZVZlcnNpb246TShWKSxTZXJ2aWNlVHlwZTpNKFYpfSksQ2w9TyhBbCx7UHJvdmlkZXJOYW1lOk0oViksUHJvdmlkZXJTaXRlOk0oemwpLFNlcnZpY2VDb250YWN0Ok0oZnVuY3Rpb24oYSxcbmIpe3JldHVybiBQKHt9LE5sLGEsYil9KX0pO2Z1bmN0aW9uIE9sKGEpe2E9YT9hOnt9O1poLmNhbGwodGhpcyk7dGhpcy5mPWEubGF5ZXJOYW1lO3RoaXMuYj1hLmxheWVycz9hLmxheWVyczpudWxsO3RoaXMuZGVmYXVsdERhdGFQcm9qZWN0aW9uPUFiKGEuZGVmYXVsdERhdGFQcm9qZWN0aW9uP2EuZGVmYXVsdERhdGFQcm9qZWN0aW9uOlwiRVBTRzo0MzI2XCIpfXQoT2wsY2kpO2Z1bmN0aW9uIFBsKGEsYil7dmFyIGM9W10sZCxlO3ZhciBmPTA7Zm9yKGU9YS5sZW5ndGg7ZjxlOysrZil7dmFyIGc9YVtmXTswPGYmJmMucG9wKCk7MDw9Zz9kPWJbZ106ZD1iW35nXS5zbGljZSgpLnJldmVyc2UoKTtjLnB1c2guYXBwbHkoYyxkKX1hPTA7Zm9yKGI9Yy5sZW5ndGg7YTxiOysrYSljW2FdPWNbYV0uc2xpY2UoKTtyZXR1cm4gY31cbmZ1bmN0aW9uIFFsKGEsYixjLGQsZSxmLGcpe2E9YS5nZW9tZXRyaWVzO3ZhciBoPVtdLGs7dmFyIG09MDtmb3Ioaz1hLmxlbmd0aDttPGs7KyttKWhbbV09UmwoYVttXSxiLGMsZCxlLGYsZyk7cmV0dXJuIGh9ZnVuY3Rpb24gUmwoYSxiLGMsZCxlLGYsZyl7dmFyIGg9YS50eXBlLGs9U2xbaF07Yz1cIlBvaW50XCI9PT1ofHxcIk11bHRpUG9pbnRcIj09PWg/ayhhLGMsZCk6ayhhLGIpO2I9bmV3IEU7Yi54YShiaShjLCExLGcpKTt2b2lkIDAhPT1hLmlkJiZiLmFiKGEuaWQpO2E9YS5wcm9wZXJ0aWVzO2UmJihhfHwoYT17fSksYVtlXT1mKTthJiZiLnFhKGEpO3JldHVybiBifVxuT2wucHJvdG90eXBlLnFkPWZ1bmN0aW9uKGEsYil7aWYoXCJUb3BvbG9neVwiPT1hLnR5cGUpe3ZhciBjPW51bGwsZD1udWxsO2lmKGEudHJhbnNmb3JtKXt2YXIgZT1hLnRyYW5zZm9ybTtjPWUuc2NhbGU7ZD1lLnRyYW5zbGF0ZX12YXIgZj1hLmFyY3M7aWYoZSl7ZT1jO3ZhciBnPWQsaDt2YXIgaz0wO2ZvcihoPWYubGVuZ3RoO2s8aDsrK2spe3ZhciBtLG49ZltrXSxwPWUscj1nLHU9MCxEPTA7dmFyIEY9MDtmb3IobT1uLmxlbmd0aDtGPG07KytGKXt2YXIgQz1uW0ZdO3UrPUNbMF07RCs9Q1sxXTtDWzBdPXU7Q1sxXT1EO1RsKEMscCxyKX19fWU9W107YT1hLm9iamVjdHM7Zz10aGlzLmY7Zm9yKHZhciBBIGluIGEpdGhpcy5iJiYtMT09dGhpcy5iLmluZGV4T2YoQSl8fChcIkdlb21ldHJ5Q29sbGVjdGlvblwiPT09YVtBXS50eXBlPyhrPWFbQV0sZS5wdXNoLmFwcGx5KGUsUWwoayxmLGMsZCxnLEEsYikpKTooaz1hW0FdLGUucHVzaChSbChrLGYsYyxkLGcsQSxiKSkpKTtyZXR1cm4gZX1yZXR1cm5bXX07XG5mdW5jdGlvbiBUbChhLGIsYyl7YVswXT1hWzBdKmJbMF0rY1swXTthWzFdPWFbMV0qYlsxXStjWzFdfU9sLnByb3RvdHlwZS51ZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRlZmF1bHREYXRhUHJvamVjdGlvbn07XG52YXIgU2w9e1BvaW50OmZ1bmN0aW9uKGEsYixjKXthPWEuY29vcmRpbmF0ZXM7YiYmYyYmVGwoYSxiLGMpO3JldHVybiBuZXcgUWUoYSl9LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiKXthPVBsKGEuYXJjcyxiKTtyZXR1cm4gbmV3IFMoYSl9LFBvbHlnb246ZnVuY3Rpb24oYSxiKXt2YXIgYz1bXSxkO3ZhciBlPTA7Zm9yKGQ9YS5hcmNzLmxlbmd0aDtlPGQ7KytlKWNbZV09UGwoYS5hcmNzW2VdLGIpO3JldHVybiBuZXcgeihjKX0sTXVsdGlQb2ludDpmdW5jdGlvbihhLGIsYyl7YT1hLmNvb3JkaW5hdGVzO3ZhciBkO2lmKGImJmMpe3ZhciBlPTA7Zm9yKGQ9YS5sZW5ndGg7ZTxkOysrZSlUbChhW2VdLGIsYyl9cmV0dXJuIG5ldyBraShhKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYil7dmFyIGM9W10sZDt2YXIgZT0wO2ZvcihkPWEuYXJjcy5sZW5ndGg7ZTxkOysrZSljW2VdPVBsKGEuYXJjc1tlXSxiKTtyZXR1cm4gbmV3IGhpKGMpfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSxcbmIpe3ZhciBjPVtdLGQsZTt2YXIgZj0wO2ZvcihlPWEuYXJjcy5sZW5ndGg7ZjxlOysrZil7dmFyIGc9YS5hcmNzW2ZdO3ZhciBoPVtdO3ZhciBrPTA7Zm9yKGQ9Zy5sZW5ndGg7azxkOysrayloW2tdPVBsKGdba10sYik7Y1tmXT1ofXJldHVybiBuZXcgbWkoYyl9fTtPbC5wcm90b3R5cGUudWI9ZnVuY3Rpb24oKXt9O09sLnByb3RvdHlwZS5CZD1mdW5jdGlvbigpe307T2wucHJvdG90eXBlLlphPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBVbChhKXthPWE/YTp7fTt0aGlzLmE9YS5mZWF0dXJlVHlwZTt0aGlzLmY9YS5mZWF0dXJlTlM7dGhpcy5iPWEuZ21sRm9ybWF0P2EuZ21sRm9ybWF0Om5ldyBYO0VpLmNhbGwodGhpcyl9dChVbCxFaSk7dmFyIFZsPXtcIjEuMS4wXCI6XCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dmcyBodHRwOi8vc2NoZW1hcy5vcGVuZ2lzLm5ldC93ZnMvMS4xLjAvd2ZzLnhzZFwiLFwiMS4wLjBcIjpcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzIGh0dHA6Ly9zY2hlbWFzLm9wZW5naXMubmV0L3dmcy8xLjAuMC93ZnMueHNkXCJ9O1xuVWwucHJvdG90eXBlLnBkPWZ1bmN0aW9uKGEsYil7dmFyIGM9e2ZlYXR1cmVUeXBlOnRoaXMuYSxmZWF0dXJlTlM6dGhpcy5mfTtaYShjLCRoKHRoaXMsYSxiP2I6e30pKTtiPVtjXTt0aGlzLmIuYltcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvZ21sXCJdLmZlYXR1cmVNZW1iZXI9SihULnByb3RvdHlwZS5LYik7KGE9UChbXSx0aGlzLmIuYixhLGIsdGhpcy5iKSl8fChhPVtdKTtyZXR1cm4gYX07VWwucHJvdG90eXBlLmM9ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIERvY3VtZW50KXJldHVybiBXbChhKTtpZihhIGluc3RhbmNlb2YgTm9kZSlyZXR1cm4gUCh7fSxYbCxhLFtdKTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpcmV0dXJuIGE9UGgoYSksV2woYSl9O1xudmFyIFlsPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzXCI6e3RvdGFsSW5zZXJ0ZWQ6TShPaSksdG90YWxVcGRhdGVkOk0oT2kpLHRvdGFsRGVsZXRlZDpNKE9pKX19LFpsPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb2djXCI6e0ZlYXR1cmVJZDpKKGZ1bmN0aW9uKGEpe3JldHVybiBhLmdldEF0dHJpYnV0ZShcImZpZFwiKX0pfX0sJGw9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnNcIjp7RmVhdHVyZTpmdW5jdGlvbihhLGIpe1doKFpsLGEsYil9fX0sWGw9e1wiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnNcIjp7VHJhbnNhY3Rpb25TdW1tYXJ5Ok0oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxZbCxhLGIpfSxcInRyYW5zYWN0aW9uU3VtbWFyeVwiKSxJbnNlcnRSZXN1bHRzOk0oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUChbXSwkbCxhLGIpfSxcImluc2VydElkc1wiKX19O1xuZnVuY3Rpb24gV2woYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU9PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiBQKHt9LFhsLGEsW10pfWZ1bmN0aW9uIGFtKGEsYil7dmFyIGM9TWgoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nY1wiLFwiRmlsdGVyXCIpLGQ9TWgoXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L29nY1wiLFwiRmVhdHVyZUlkXCIpO2MuYXBwZW5kQ2hpbGQoZCk7ZC5zZXRBdHRyaWJ1dGUoXCJmaWRcIixiKTthLmFwcGVuZENoaWxkKGMpfWZ1bmN0aW9uIGJtKGEsYil7YT0oYT9hOlwiZmVhdHVyZVwiKStcIjpcIjtyZXR1cm4gYi5pbmRleE9mKGEpP2ErYjpifVxudmFyIGNtPXtcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzXCI6e0luc2VydDpOKGZ1bmN0aW9uKGEsYixjKXt2YXIgZD1jW2MubGVuZ3RoLTFdLGU9ZC5nbWxWZXJzaW9uO2Q9TWgoZC5mZWF0dXJlTlMsZC5mZWF0dXJlVHlwZSk7YS5hcHBlbmRDaGlsZChkKTtpZigyPT09ZSl7dmFyIGY9YWoucHJvdG90eXBlOyhhPWIuYSkmJmQuc2V0QXR0cmlidXRlKFwiZmlkXCIsYSk7YT1jW2MubGVuZ3RoLTFdO2U9YS5mZWF0dXJlTlM7dmFyIGc9Yi5jO2EudmF8fChhLnZhPXt9LGEudmFbZV09e30pO3ZhciBoPWIuQ2EoKTtiPVtdO3ZhciBrPVtdO2ZvcihuIGluIGgpe3ZhciBtPWhbbl07bnVsbCE9PW0mJihiLnB1c2gobiksay5wdXNoKG0pLG49PWd8fG0gaW5zdGFuY2VvZiB1ZT9uIGluIGEudmFbZV18fChhLnZhW2VdW25dPU4oZi5uZSxmKSk6biBpbiBhLnZhW2VdfHwoYS52YVtlXVtuXT1OKFcpKSl9dmFyIG49WmEoe30sYSl9ZWxzZXtuPVgucHJvdG90eXBlOyhhPWIuYSkmJmQuc2V0QXR0cmlidXRlKFwiZmlkXCIsXG5hKTthPWNbYy5sZW5ndGgtMV07ZT1hLmZlYXR1cmVOUztnPWIuYzthLnZhfHwoYS52YT17fSxhLnZhW2VdPXt9KTtoPWIuQ2EoKTtiPVtdO2s9W107Zm9yKGYgaW4gaCltPWhbZl0sbnVsbCE9PW0mJihiLnB1c2goZiksay5wdXNoKG0pLGY9PWd8fG0gaW5zdGFuY2VvZiB1ZT9mIGluIGEudmFbZV18fChhLnZhW2VdW2ZdPU4obi52ZSxuKSk6ZiBpbiBhLnZhW2VdfHwoYS52YVtlXVtmXT1OKFcpKSk7bj1aYSh7fSxhKX1uLm5vZGU9ZDtRKG4sYS52YSxTaCh2b2lkIDAsZSksayxjLGIpfSksVXBkYXRlOk4oZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWNbYy5sZW5ndGgtMV07dyh2b2lkIDAhPT1iLmEsMjcpO3ZhciBlPWQuZmVhdHVyZVByZWZpeCxmPWQuZmVhdHVyZU5TO2Euc2V0QXR0cmlidXRlKFwidHlwZU5hbWVcIixibShlLGQuZmVhdHVyZVR5cGUpKTthLnNldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIixcInhtbG5zOlwiK2UsZik7ZT1iLmE7aWYodm9pZCAwIT09XG5lKXtmPU9iamVjdC5rZXlzKGIuTCk7Zm9yKHZhciBnPVtdLGg9MCxrPWYubGVuZ3RoO2g8aztoKyspe3ZhciBtPWIuZ2V0KGZbaF0pO3ZvaWQgMCE9PW0mJmcucHVzaCh7bmFtZTpmW2hdLHZhbHVlOm19KX1RKHtnbWxWZXJzaW9uOmQuZ21sVmVyc2lvbixub2RlOmEsaGFzWjpkLmhhc1osc3JzTmFtZTpkLnNyc05hbWV9LGNtLFNoKFwiUHJvcGVydHlcIiksZyxjKTthbShhLGUpfX0pLERlbGV0ZTpOKGZ1bmN0aW9uKGEsYixjKXtjPWNbYy5sZW5ndGgtMV07dyh2b2lkIDAhPT1iLmEsMjYpO3ZhciBkPWMuZmVhdHVyZVByZWZpeCxlPWMuZmVhdHVyZU5TO2Euc2V0QXR0cmlidXRlKFwidHlwZU5hbWVcIixibShkLGMuZmVhdHVyZVR5cGUpKTthLnNldEF0dHJpYnV0ZU5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIixcInhtbG5zOlwiK2QsZSk7Yj1iLmE7dm9pZCAwIT09YiYmYW0oYSxiKX0pLFByb3BlcnR5Ok4oZnVuY3Rpb24oYSxiLGMpe3ZhciBkPU1oKFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93ZnNcIixcblwiTmFtZVwiKSxlPWNbYy5sZW5ndGgtMV0uZ21sVmVyc2lvbjthLmFwcGVuZENoaWxkKGQpO1coZCxiLm5hbWUpO3ZvaWQgMCE9PWIudmFsdWUmJm51bGwhPT1iLnZhbHVlJiYoZD1NaChcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzXCIsXCJWYWx1ZVwiKSxhLmFwcGVuZENoaWxkKGQpLGIudmFsdWUgaW5zdGFuY2VvZiB1ZT8yPT09ZT9hai5wcm90b3R5cGUubmUoZCxiLnZhbHVlLGMpOlgucHJvdG90eXBlLnZlKGQsYi52YWx1ZSxjKTpXKGQsYi52YWx1ZSkpfSksTmF0aXZlOk4oZnVuY3Rpb24oYSxiKXtiLlNpJiZhLnNldEF0dHJpYnV0ZShcInZlbmRvcklkXCIsYi5TaSk7dm9pZCAwIT09Yi5IaSYmYS5zZXRBdHRyaWJ1dGUoXCJzYWZlVG9JZ25vcmVcIixiLkhpKTt2b2lkIDAhPT1iLnZhbHVlJiZXKGEsYi52YWx1ZSl9KX19O1xuVWwucHJvdG90eXBlLmk9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9W10sZj1NaChcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvd2ZzXCIsXCJUcmFuc2FjdGlvblwiKSxnPWQudmVyc2lvbj9kLnZlcnNpb246XCIxLjEuMFwiLGg9XCIxLjAuMFwiPT09Zz8yOjM7Zi5zZXRBdHRyaWJ1dGUoXCJzZXJ2aWNlXCIsXCJXRlNcIik7Zi5zZXRBdHRyaWJ1dGUoXCJ2ZXJzaW9uXCIsZyk7aWYoZCl7dmFyIGs9ZC5nbWxPcHRpb25zP2QuZ21sT3B0aW9uczp7fTtkLmhhbmRsZSYmZi5zZXRBdHRyaWJ1dGUoXCJoYW5kbGVcIixkLmhhbmRsZSl9Zi5zZXRBdHRyaWJ1dGVOUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlXCIsXCJ4c2k6c2NoZW1hTG9jYXRpb25cIixWbFtnXSk7dmFyIG09ZC5mZWF0dXJlUHJlZml4P2QuZmVhdHVyZVByZWZpeDpcImZlYXR1cmVcIjthJiYoZz17bm9kZTpmLGZlYXR1cmVOUzpkLmZlYXR1cmVOUyxmZWF0dXJlVHlwZTpkLmZlYXR1cmVUeXBlLGZlYXR1cmVQcmVmaXg6bSxnbWxWZXJzaW9uOmgsXG5oYXNaOmQuaGFzWixzcnNOYW1lOmQuc3JzTmFtZX0sWmEoZyxrKSxRKGcsY20sU2goXCJJbnNlcnRcIiksYSxlKSk7YiYmKGc9e25vZGU6ZixmZWF0dXJlTlM6ZC5mZWF0dXJlTlMsZmVhdHVyZVR5cGU6ZC5mZWF0dXJlVHlwZSxmZWF0dXJlUHJlZml4Om0sZ21sVmVyc2lvbjpoLGhhc1o6ZC5oYXNaLHNyc05hbWU6ZC5zcnNOYW1lfSxaYShnLGspLFEoZyxjbSxTaChcIlVwZGF0ZVwiKSxiLGUpKTtjJiZRKHtub2RlOmYsZmVhdHVyZU5TOmQuZmVhdHVyZU5TLGZlYXR1cmVUeXBlOmQuZmVhdHVyZVR5cGUsZmVhdHVyZVByZWZpeDptLGdtbFZlcnNpb246aCxzcnNOYW1lOmQuc3JzTmFtZX0sY20sU2goXCJEZWxldGVcIiksYyxlKTtkLm5hdGl2ZUVsZW1lbnRzJiZRKHtub2RlOmYsZmVhdHVyZU5TOmQuZmVhdHVyZU5TLGZlYXR1cmVUeXBlOmQuZmVhdHVyZVR5cGUsZmVhdHVyZVByZWZpeDptLGdtbFZlcnNpb246aCxzcnNOYW1lOmQuc3JzTmFtZX0sY20sU2goXCJOYXRpdmVcIiksZC5uYXRpdmVFbGVtZW50cyxcbmUpO3JldHVybiBmfTtVbC5wcm90b3R5cGUudGQ9ZnVuY3Rpb24oYSl7Zm9yKGE9YS5maXJzdENoaWxkO2E7YT1hLm5leHRTaWJsaW5nKWlmKGEubm9kZVR5cGU9PU5vZGUuRUxFTUVOVF9OT0RFKXJldHVybiB0aGlzLnVjKGEpO3JldHVybiBudWxsfTtVbC5wcm90b3R5cGUudWM9ZnVuY3Rpb24oYSl7aWYoYS5maXJzdEVsZW1lbnRDaGlsZCYmYS5maXJzdEVsZW1lbnRDaGlsZC5maXJzdEVsZW1lbnRDaGlsZClmb3IoYT1hLmZpcnN0RWxlbWVudENoaWxkLmZpcnN0RWxlbWVudENoaWxkLGE9YS5maXJzdEVsZW1lbnRDaGlsZDthO2E9YS5uZXh0RWxlbWVudFNpYmxpbmcpaWYoMCE9PWEuY2hpbGROb2Rlcy5sZW5ndGgmJigxIT09YS5jaGlsZE5vZGVzLmxlbmd0aHx8MyE9PWEuZmlyc3RDaGlsZC5ub2RlVHlwZSkpe3ZhciBiPVt7fV07SWkodGhpcy5iLGEsYik7cmV0dXJuIEFiKGIucG9wKCkuc3JzTmFtZSl9cmV0dXJuIG51bGx9O2Z1bmN0aW9uIGRtKGEpe2E9YT9hOnt9O1poLmNhbGwodGhpcyk7dGhpcy5iPXZvaWQgMCE9PWEuc3BsaXRDb2xsZWN0aW9uP2Euc3BsaXRDb2xsZWN0aW9uOiExfXQoZG0sS2opO2Z1bmN0aW9uIGVtKGEpe2E9YS5HKCk7cmV0dXJuIGEubGVuZ3RoP2Euam9pbihcIiBcIik6XCJcIn1mdW5jdGlvbiBmbShhKXthPWEuRygpO2Zvcih2YXIgYj1bXSxjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWIucHVzaChhW2NdLmpvaW4oXCIgXCIpKTtyZXR1cm4gYi5qb2luKFwiLFwiKX1mdW5jdGlvbiBnbShhKXt2YXIgYj1bXTthPSRlKGEpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyliLnB1c2goXCIoXCIrZm0oYVtjXSkrXCIpXCIpO3JldHVybiBiLmpvaW4oXCIsXCIpfVxuZnVuY3Rpb24gTWooYSl7dmFyIGI9YS5JKCksYz0oMCxobVtiXSkoYSk7Yj1iLnRvVXBwZXJDYXNlKCk7aWYoYSBpbnN0YW5jZW9mIHdlKXthPWEuVzt2YXIgZD1cIlwiO2lmKFwiWFlaXCI9PT1hfHxcIlhZWk1cIj09PWEpZCs9XCJaXCI7aWYoXCJYWU1cIj09PWF8fFwiWFlaTVwiPT09YSlkKz1cIk1cIjthPWQ7MDxhLmxlbmd0aCYmKGIrPVwiIFwiK2EpfXJldHVybiBjLmxlbmd0aD9iK1wiKFwiK2MrXCIpXCI6YitcIiBFTVBUWVwifVxudmFyIGhtPXtQb2ludDplbSxMaW5lU3RyaW5nOmZtLFBvbHlnb246Z20sTXVsdGlQb2ludDpmdW5jdGlvbihhKXt2YXIgYj1bXTthPWxpKGEpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyliLnB1c2goXCIoXCIrZW0oYVtjXSkrXCIpXCIpO3JldHVybiBiLmpvaW4oXCIsXCIpfSxNdWx0aUxpbmVTdHJpbmc6ZnVuY3Rpb24oYSl7dmFyIGI9W107YT1hLmpiKCk7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtjPGQ7KytjKWIucHVzaChcIihcIitmbShhW2NdKStcIilcIik7cmV0dXJuIGIuam9pbihcIixcIil9LE11bHRpUG9seWdvbjpmdW5jdGlvbihhKXt2YXIgYj1bXTthPW9pKGEpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyliLnB1c2goXCIoXCIrZ20oYVtjXSkrXCIpXCIpO3JldHVybiBiLmpvaW4oXCIsXCIpfSxHZW9tZXRyeUNvbGxlY3Rpb246ZnVuY3Rpb24oYSl7dmFyIGI9W107YT14aShhLmEpO2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7YzxkOysrYyliLnB1c2goTWooYVtjXSkpO3JldHVybiBiLmpvaW4oXCIsXCIpfX07XG5mdW5jdGlvbiBMaihhLGIpe2E9bmV3IGltKG5ldyBqbShhKSk7a20oYSk7cmV0dXJuKGE9bG0oYSkpP2JpKGEsITEsYik6bnVsbH1mdW5jdGlvbiBqbShhKXt0aGlzLmY9YTt0aGlzLmI9LTF9XG5mdW5jdGlvbiBtbShhKXt2YXIgYj1hLmYuY2hhckF0KCsrYS5iKSxjPXtwb3NpdGlvbjphLmIsdmFsdWU6Yn07aWYoXCIoXCI9PWIpYy50eXBlPTI7ZWxzZSBpZihcIixcIj09YiljLnR5cGU9NTtlbHNlIGlmKFwiKVwiPT1iKWMudHlwZT0zO2Vsc2UgaWYoXCIwXCI8PWImJlwiOVwiPj1ifHxcIi5cIj09Ynx8XCItXCI9PWIpe2MudHlwZT00O2I9YS5iO3ZhciBkPSExLGU9ITE7ZG97aWYoXCIuXCI9PWYpZD0hMDtlbHNlIGlmKFwiZVwiPT1mfHxcIkVcIj09ZillPSEwO3ZhciBmPWEuZi5jaGFyQXQoKythLmIpfXdoaWxlKFwiMFwiPD1mJiZcIjlcIj49Znx8XCIuXCI9PWYmJih2b2lkIDA9PT1kfHwhZCl8fCFlJiYoXCJlXCI9PWZ8fFwiRVwiPT1mKXx8ZSYmKFwiLVwiPT1mfHxcIitcIj09ZikpO2E9cGFyc2VGbG9hdChhLmYuc3Vic3RyaW5nKGIsYS5iLS0pKTtjLnZhbHVlPWF9ZWxzZSBpZihcImFcIjw9YiYmXCJ6XCI+PWJ8fFwiQVwiPD1iJiZcIlpcIj49Yil7Yy50eXBlPTE7Yj1hLmI7ZG8gZj1hLmYuY2hhckF0KCsrYS5iKTt3aGlsZShcImFcIjw9ZiYmXCJ6XCI+PVxuZnx8XCJBXCI8PWYmJlwiWlwiPj1mKTthPWEuZi5zdWJzdHJpbmcoYixhLmItLSkudG9VcHBlckNhc2UoKTtjLnZhbHVlPWF9ZWxzZXtpZihcIiBcIj09Ynx8XCJcXHRcIj09Ynx8XCJcXHJcIj09Ynx8XCJcXG5cIj09YilyZXR1cm4gbW0oYSk7aWYoXCJcIj09PWIpYy50eXBlPTY7ZWxzZSB0aHJvdyBFcnJvcihcIlVuZXhwZWN0ZWQgY2hhcmFjdGVyOiBcIitiKTt9cmV0dXJuIGN9ZnVuY3Rpb24gaW0oYSl7dGhpcy5qPWE7dGhpcy5mPVwiWFlcIn1mdW5jdGlvbiBrbShhKXthLmI9bW0oYS5qKX1mdW5jdGlvbiBubShhLGIpeyhiPWEuYi50eXBlPT1iKSYma20oYSk7cmV0dXJuIGJ9XG5mdW5jdGlvbiBsbShhKXt2YXIgYj1hLmI7aWYobm0oYSwxKSl7Yj1iLnZhbHVlO3ZhciBjPVwiWFlcIixkPWEuYjsxPT1hLmIudHlwZSYmKGQ9ZC52YWx1ZSxcIlpcIj09PWQ/Yz1cIlhZWlwiOlwiTVwiPT09ZD9jPVwiWFlNXCI6XCJaTVwiPT09ZCYmKGM9XCJYWVpNXCIpLFwiWFlcIiE9PWMmJmttKGEpKTthLmY9YztpZihcIkdFT01FVFJZQ09MTEVDVElPTlwiPT1iKXthOntpZihubShhLDIpKXtiPVtdO2RvIGIucHVzaChsbShhKSk7d2hpbGUobm0oYSw1KSk7aWYobm0oYSwzKSl7YT1iO2JyZWFrIGF9fWVsc2UgaWYob20oYSkpe2E9W107YnJlYWsgYX10aHJvdyBFcnJvcihwbShhKSk7fXJldHVybiBuZXcgdmkoYSl9ZD1xbVtiXTtjPXJtW2JdO2lmKCFkfHwhYyl0aHJvdyBFcnJvcihcIkludmFsaWQgZ2VvbWV0cnkgdHlwZTogXCIrYik7Yj1kLmNhbGwoYSk7cmV0dXJuIG5ldyBjKGIsYS5mKX10aHJvdyBFcnJvcihwbShhKSk7fWw9aW0ucHJvdG90eXBlO1xubC5sZD1mdW5jdGlvbigpe2lmKG5tKHRoaXMsMikpe3ZhciBhPXNtKHRoaXMpO2lmKG5tKHRoaXMsMykpcmV0dXJuIGF9ZWxzZSBpZihvbSh0aGlzKSlyZXR1cm4gbnVsbDt0aHJvdyBFcnJvcihwbSh0aGlzKSk7fTtsLmtkPWZ1bmN0aW9uKCl7aWYobm0odGhpcywyKSl7dmFyIGE9dG0odGhpcyk7aWYobm0odGhpcywzKSlyZXR1cm4gYX1lbHNlIGlmKG9tKHRoaXMpKXJldHVybltdO3Rocm93IEVycm9yKHBtKHRoaXMpKTt9O2wubWQ9ZnVuY3Rpb24oKXtpZihubSh0aGlzLDIpKXt2YXIgYT11bSh0aGlzKTtpZihubSh0aGlzLDMpKXJldHVybiBhfWVsc2UgaWYob20odGhpcykpcmV0dXJuW107dGhyb3cgRXJyb3IocG0odGhpcykpO307XG5sLmJpPWZ1bmN0aW9uKCl7aWYobm0odGhpcywyKSl7dmFyIGE7aWYoMj09dGhpcy5iLnR5cGUpZm9yKGE9W3RoaXMubGQoKV07bm0odGhpcyw1KTspYS5wdXNoKHRoaXMubGQoKSk7ZWxzZSBhPXRtKHRoaXMpO2lmKG5tKHRoaXMsMykpcmV0dXJuIGF9ZWxzZSBpZihvbSh0aGlzKSlyZXR1cm5bXTt0aHJvdyBFcnJvcihwbSh0aGlzKSk7fTtsLmFpPWZ1bmN0aW9uKCl7aWYobm0odGhpcywyKSl7dmFyIGE9dW0odGhpcyk7aWYobm0odGhpcywzKSlyZXR1cm4gYX1lbHNlIGlmKG9tKHRoaXMpKXJldHVybltdO3Rocm93IEVycm9yKHBtKHRoaXMpKTt9O2wuY2k9ZnVuY3Rpb24oKXtpZihubSh0aGlzLDIpKXtmb3IodmFyIGE9W3RoaXMubWQoKV07bm0odGhpcyw1KTspYS5wdXNoKHRoaXMubWQoKSk7aWYobm0odGhpcywzKSlyZXR1cm4gYX1lbHNlIGlmKG9tKHRoaXMpKXJldHVybltdO3Rocm93IEVycm9yKHBtKHRoaXMpKTt9O1xuZnVuY3Rpb24gc20oYSl7Zm9yKHZhciBiPVtdLGM9YS5mLmxlbmd0aCxkPTA7ZDxjOysrZCl7dmFyIGU9YS5iO2lmKG5tKGEsNCkpYi5wdXNoKGUudmFsdWUpO2Vsc2UgYnJlYWt9aWYoYi5sZW5ndGg9PWMpcmV0dXJuIGI7dGhyb3cgRXJyb3IocG0oYSkpO31mdW5jdGlvbiB0bShhKXtmb3IodmFyIGI9W3NtKGEpXTtubShhLDUpOyliLnB1c2goc20oYSkpO3JldHVybiBifWZ1bmN0aW9uIHVtKGEpe2Zvcih2YXIgYj1bYS5rZCgpXTtubShhLDUpOyliLnB1c2goYS5rZCgpKTtyZXR1cm4gYn1mdW5jdGlvbiBvbShhKXt2YXIgYj0xPT1hLmIudHlwZSYmXCJFTVBUWVwiPT1hLmIudmFsdWU7YiYma20oYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gcG0oYSl7cmV0dXJuXCJVbmV4cGVjdGVkIGBcIithLmIudmFsdWUrXCJgIGF0IHBvc2l0aW9uIFwiK2EuYi5wb3NpdGlvbitcIiBpbiBgXCIrYS5qLmYrXCJgXCJ9XG52YXIgcm09e1BPSU5UOlFlLExJTkVTVFJJTkc6UyxQT0xZR09OOnosTVVMVElQT0lOVDpraSxNVUxUSUxJTkVTVFJJTkc6aGksTVVMVElQT0xZR09OOm1pfSxxbT17UE9JTlQ6aW0ucHJvdG90eXBlLmxkLExJTkVTVFJJTkc6aW0ucHJvdG90eXBlLmtkLFBPTFlHT046aW0ucHJvdG90eXBlLm1kLE1VTFRJUE9JTlQ6aW0ucHJvdG90eXBlLmJpLE1VTFRJTElORVNUUklORzppbS5wcm90b3R5cGUuYWksTVVMVElQT0xZR09OOmltLnByb3RvdHlwZS5jaX07ZnVuY3Rpb24gdm0oYSxiKXtyZXR1cm4gUCh7fSx3bSxhLGIpfWZ1bmN0aW9uIHhtKGEsYil7cmV0dXJuIFAoe30seW0sYSxiKX1mdW5jdGlvbiB6bShhLGIpe2lmKGI9dm0oYSxiKSlyZXR1cm4gYT1bUGkoYS5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSksUGkoYS5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIikpXSxiLnNpemU9YSxifWZ1bmN0aW9uIEFtKGEsYil7cmV0dXJuIFAoW10sQm0sYSxiKX12YXIgQ209W251bGwsXCJodHRwOi8vd3d3Lm9wZW5naXMubmV0L3dtc1wiXTtPKENtLHtTZXJ2aWNlOk0oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxEbSxhLGIpfSksQ2FwYWJpbGl0eTpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sRW0sYSxiKX0pfSk7XG52YXIgRW09TyhDbSx7UmVxdWVzdDpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sRm0sYSxiKX0pLEV4Y2VwdGlvbjpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoW10sR20sYSxiKX0pLExheWVyOk0oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxIbSxhLGIpfSl9KSxEbT1PKENtLHtOYW1lOk0oViksVGl0bGU6TShWKSxBYnN0cmFjdDpNKFYpLEtleXdvcmRMaXN0Ok0oQW0pLE9ubGluZVJlc291cmNlOk0oemwpLENvbnRhY3RJbmZvcm1hdGlvbjpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sSW0sYSxiKX0pLEZlZXM6TShWKSxBY2Nlc3NDb25zdHJhaW50czpNKFYpLExheWVyTGltaXQ6TShPaSksTWF4V2lkdGg6TShPaSksTWF4SGVpZ2h0Ok0oT2kpfSksSW09TyhDbSx7Q29udGFjdFBlcnNvblByaW1hcnk6TShmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LEptLGEsYil9KSxDb250YWN0UG9zaXRpb246TShWKSxDb250YWN0QWRkcmVzczpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sXG5LbSxhLGIpfSksQ29udGFjdFZvaWNlVGVsZXBob25lOk0oViksQ29udGFjdEZhY3NpbWlsZVRlbGVwaG9uZTpNKFYpLENvbnRhY3RFbGVjdHJvbmljTWFpbEFkZHJlc3M6TShWKX0pLEptPU8oQ20se0NvbnRhY3RQZXJzb246TShWKSxDb250YWN0T3JnYW5pemF0aW9uOk0oVil9KSxLbT1PKENtLHtBZGRyZXNzVHlwZTpNKFYpLEFkZHJlc3M6TShWKSxDaXR5Ok0oViksU3RhdGVPclByb3ZpbmNlOk0oViksUG9zdENvZGU6TShWKSxDb3VudHJ5Ok0oVil9KSxHbT1PKENtLHtGb3JtYXQ6SihWKX0pLEhtPU8oQ20se05hbWU6TShWKSxUaXRsZTpNKFYpLEFic3RyYWN0Ok0oViksS2V5d29yZExpc3Q6TShBbSksQ1JTOlFoKFYpLEVYX0dlb2dyYXBoaWNCb3VuZGluZ0JveDpNKGZ1bmN0aW9uKGEsYil7dmFyIGM9UCh7fSxMbSxhLGIpO2lmKGMpe2E9Yy53ZXN0Qm91bmRMb25naXR1ZGU7Yj1jLnNvdXRoQm91bmRMYXRpdHVkZTt2YXIgZD1jLmVhc3RCb3VuZExvbmdpdHVkZTtjPWMubm9ydGhCb3VuZExhdGl0dWRlO1xuaWYodm9pZCAwIT09YSYmdm9pZCAwIT09YiYmdm9pZCAwIT09ZCYmdm9pZCAwIT09YylyZXR1cm5bYSxiLGQsY119fSksQm91bmRpbmdCb3g6UWgoZnVuY3Rpb24oYSl7dmFyIGI9W05pKGEuZ2V0QXR0cmlidXRlKFwibWlueFwiKSksTmkoYS5nZXRBdHRyaWJ1dGUoXCJtaW55XCIpKSxOaShhLmdldEF0dHJpYnV0ZShcIm1heHhcIikpLE5pKGEuZ2V0QXR0cmlidXRlKFwibWF4eVwiKSldLGM9W05pKGEuZ2V0QXR0cmlidXRlKFwicmVzeFwiKSksTmkoYS5nZXRBdHRyaWJ1dGUoXCJyZXN5XCIpKV07cmV0dXJue2NyczphLmdldEF0dHJpYnV0ZShcIkNSU1wiKSxleHRlbnQ6YixyZXM6Y319KSxEaW1lbnNpb246UWgoZnVuY3Rpb24oYSl7cmV0dXJue25hbWU6YS5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpLHVuaXRzOmEuZ2V0QXR0cmlidXRlKFwidW5pdHNcIiksdW5pdFN5bWJvbDphLmdldEF0dHJpYnV0ZShcInVuaXRTeW1ib2xcIiksXCJkZWZhdWx0XCI6YS5nZXRBdHRyaWJ1dGUoXCJkZWZhdWx0XCIpLG11bHRpcGxlVmFsdWVzOktpKGEuZ2V0QXR0cmlidXRlKFwibXVsdGlwbGVWYWx1ZXNcIikpLFxubmVhcmVzdFZhbHVlOktpKGEuZ2V0QXR0cmlidXRlKFwibmVhcmVzdFZhbHVlXCIpKSxjdXJyZW50OktpKGEuZ2V0QXR0cmlidXRlKFwiY3VycmVudFwiKSksdmFsdWVzOlYoYSl9fSksQXR0cmlidXRpb246TShmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LE1tLGEsYil9KSxBdXRob3JpdHlVUkw6UWgoZnVuY3Rpb24oYSxiKXtpZihiPXZtKGEsYikpcmV0dXJuIGIubmFtZT1hLmdldEF0dHJpYnV0ZShcIm5hbWVcIiksYn0pLElkZW50aWZpZXI6UWgoViksTWV0YWRhdGFVUkw6UWgoZnVuY3Rpb24oYSxiKXtpZihiPXZtKGEsYikpcmV0dXJuIGIudHlwZT1hLmdldEF0dHJpYnV0ZShcInR5cGVcIiksYn0pLERhdGFVUkw6UWgodm0pLEZlYXR1cmVMaXN0VVJMOlFoKHZtKSxTdHlsZTpRaChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LE5tLGEsYil9KSxNaW5TY2FsZURlbm9taW5hdG9yOk0oTWkpLE1heFNjYWxlRGVub21pbmF0b3I6TShNaSksTGF5ZXI6UWgoZnVuY3Rpb24oYSxiKXt2YXIgYz1iW2IubGVuZ3RoLVxuMV0sZD1QKHt9LEhtLGEsYik7aWYoZClyZXR1cm4gYj1LaShhLmdldEF0dHJpYnV0ZShcInF1ZXJ5YWJsZVwiKSksdm9pZCAwPT09YiYmKGI9Yy5xdWVyeWFibGUpLGQucXVlcnlhYmxlPXZvaWQgMCE9PWI/YjohMSxiPVBpKGEuZ2V0QXR0cmlidXRlKFwiY2FzY2FkZWRcIikpLHZvaWQgMD09PWImJihiPWMuY2FzY2FkZWQpLGQuY2FzY2FkZWQ9YixiPUtpKGEuZ2V0QXR0cmlidXRlKFwib3BhcXVlXCIpKSx2b2lkIDA9PT1iJiYoYj1jLm9wYXF1ZSksZC5vcGFxdWU9dm9pZCAwIT09Yj9iOiExLGI9S2koYS5nZXRBdHRyaWJ1dGUoXCJub1N1YnNldHNcIikpLHZvaWQgMD09PWImJihiPWMubm9TdWJzZXRzKSxkLm5vU3Vic2V0cz12b2lkIDAhPT1iP2I6ITEsKGI9TmkoYS5nZXRBdHRyaWJ1dGUoXCJmaXhlZFdpZHRoXCIpKSl8fChiPWMuZml4ZWRXaWR0aCksZC5maXhlZFdpZHRoPWIsKGE9TmkoYS5nZXRBdHRyaWJ1dGUoXCJmaXhlZEhlaWdodFwiKSkpfHwoYT1jLmZpeGVkSGVpZ2h0KSxkLmZpeGVkSGVpZ2h0PVxuYSxbXCJTdHlsZVwiLFwiQ1JTXCIsXCJBdXRob3JpdHlVUkxcIl0uZm9yRWFjaChmdW5jdGlvbihhKXthIGluIGMmJihkW2FdPShkW2FdfHxbXSkuY29uY2F0KGNbYV0pKX0pLFwiRVhfR2VvZ3JhcGhpY0JvdW5kaW5nQm94IEJvdW5kaW5nQm94IERpbWVuc2lvbiBBdHRyaWJ1dGlvbiBNaW5TY2FsZURlbm9taW5hdG9yIE1heFNjYWxlRGVub21pbmF0b3JcIi5zcGxpdChcIiBcIikuZm9yRWFjaChmdW5jdGlvbihhKXthIGluIGR8fChkW2FdPWNbYV0pfSksZH0pfSksTW09TyhDbSx7VGl0bGU6TShWKSxPbmxpbmVSZXNvdXJjZTpNKHpsKSxMb2dvVVJMOk0oem0pfSksTG09TyhDbSx7d2VzdEJvdW5kTG9uZ2l0dWRlOk0oTWkpLGVhc3RCb3VuZExvbmdpdHVkZTpNKE1pKSxzb3V0aEJvdW5kTGF0aXR1ZGU6TShNaSksbm9ydGhCb3VuZExhdGl0dWRlOk0oTWkpfSksRm09TyhDbSx7R2V0Q2FwYWJpbGl0aWVzOk0oeG0pLEdldE1hcDpNKHhtKSxHZXRGZWF0dXJlSW5mbzpNKHhtKX0pLHltPU8oQ20se0Zvcm1hdDpRaChWKSxcbkRDUFR5cGU6UWgoZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxPbSxhLGIpfSl9KSxPbT1PKENtLHtIVFRQOk0oZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxQbSxhLGIpfSl9KSxQbT1PKENtLHtHZXQ6TSh2bSksUG9zdDpNKHZtKX0pLE5tPU8oQ20se05hbWU6TShWKSxUaXRsZTpNKFYpLEFic3RyYWN0Ok0oViksTGVnZW5kVVJMOlFoKHptKSxTdHlsZVNoZWV0VVJMOk0odm0pLFN0eWxlVVJMOk0odm0pfSksd209TyhDbSx7Rm9ybWF0Ok0oViksT25saW5lUmVzb3VyY2U6TSh6bCl9KSxCbT1PKENtLHtLZXl3b3JkOkooVil9KTtmdW5jdGlvbiBRbShhKXt2YXIgYj1WKGEpLnNwbGl0KFwiIFwiKTtpZihiJiYyPT1iLmxlbmd0aCYmKGE9K2JbMF0sYj0rYlsxXSwhaXNOYU4oYSkmJiFpc05hTihiKSkpcmV0dXJuW2EsYl19dmFyIFJtPVtudWxsLFwiaHR0cDovL3d3dy5vcGVuZ2lzLm5ldC93bXRzLzEuMFwiXSxTbT1bbnVsbCxcImh0dHA6Ly93d3cub3Blbmdpcy5uZXQvb3dzLzEuMVwiXTtPKFJtLHtDb250ZW50czpNKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sVG0sYSxiKX0pfSk7XG52YXIgVG09TyhSbSx7TGF5ZXI6UWgoZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxVbSxhLGIpfSksVGlsZU1hdHJpeFNldDpRaChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LFZtLGEsYil9KX0pLFVtPU8oUm0se1N0eWxlOlFoKGZ1bmN0aW9uKGEsYil7aWYoYj1QKHt9LFdtLGEsYikpcmV0dXJuIGE9XCJ0cnVlXCI9PT1hLmdldEF0dHJpYnV0ZShcImlzRGVmYXVsdFwiKSxiLmlzRGVmYXVsdD1hLGJ9KSxGb3JtYXQ6UWgoViksVGlsZU1hdHJpeFNldExpbms6UWgoZnVuY3Rpb24oYSxiKXtyZXR1cm4gUCh7fSxYbSxhLGIpfSksRGltZW5zaW9uOlFoKGZ1bmN0aW9uKGEsYil7cmV0dXJuIFAoe30sWW0sYSxiKX0pLFJlc291cmNlVVJMOlFoKGZ1bmN0aW9uKGEpe3ZhciBiPWEuZ2V0QXR0cmlidXRlKFwiZm9ybWF0XCIpLGM9YS5nZXRBdHRyaWJ1dGUoXCJ0ZW1wbGF0ZVwiKTthPWEuZ2V0QXR0cmlidXRlKFwicmVzb3VyY2VUeXBlXCIpO3ZhciBkPXt9O2ImJihkLmZvcm1hdD1iKTtjJiYoZC50ZW1wbGF0ZT1cbmMpO2EmJihkLnJlc291cmNlVHlwZT1hKTtyZXR1cm4gZH0pfSxPKFNtLHtUaXRsZTpNKFYpLEFic3RyYWN0Ok0oViksV0dTODRCb3VuZGluZ0JveDpNKGZ1bmN0aW9uKGEsYil7YT1QKFtdLFptLGEsYik7aWYoMj09YS5sZW5ndGgpcmV0dXJuIEZhKGEpfSksSWRlbnRpZmllcjpNKFYpfSkpLFdtPU8oUm0se0xlZ2VuZFVSTDpRaChmdW5jdGlvbihhKXt2YXIgYj17fTtiLmZvcm1hdD1hLmdldEF0dHJpYnV0ZShcImZvcm1hdFwiKTtiLmhyZWY9emwoYSk7cmV0dXJuIGJ9KX0sTyhTbSx7VGl0bGU6TShWKSxJZGVudGlmaWVyOk0oVil9KSksWG09TyhSbSx7VGlsZU1hdHJpeFNldDpNKFYpLFRpbGVNYXRyaXhTZXRMaW1pdHM6TShmdW5jdGlvbihhLGIpe3JldHVybiBQKFtdLCRtLGEsYil9KX0pLCRtPU8oUm0se1RpbGVNYXRyaXhMaW1pdHM6SihmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LGFuLGEsYil9KX0pLGFuPU8oUm0se1RpbGVNYXRyaXg6TShWKSxNaW5UaWxlUm93Ok0oT2kpLE1heFRpbGVSb3c6TShPaSksXG5NaW5UaWxlQ29sOk0oT2kpLE1heFRpbGVDb2w6TShPaSl9KSxZbT1PKFJtLHtEZWZhdWx0Ok0oViksVmFsdWU6UWgoVil9LE8oU20se0lkZW50aWZpZXI6TShWKX0pKSxabT1PKFNtLHtMb3dlckNvcm5lcjpKKFFtKSxVcHBlckNvcm5lcjpKKFFtKX0pLFZtPU8oUm0se1dlbGxLbm93blNjYWxlU2V0Ok0oViksVGlsZU1hdHJpeDpRaChmdW5jdGlvbihhLGIpe3JldHVybiBQKHt9LGJuLGEsYil9KX0sTyhTbSx7U3VwcG9ydGVkQ1JTOk0oViksSWRlbnRpZmllcjpNKFYpfSkpLGJuPU8oUm0se1RvcExlZnRDb3JuZXI6TShRbSksU2NhbGVEZW5vbWluYXRvcjpNKE1pKSxUaWxlV2lkdGg6TShPaSksVGlsZUhlaWdodDpNKE9pKSxNYXRyaXhXaWR0aDpNKE9pKSxNYXRyaXhIZWlnaHQ6TShPaSl9LE8oU20se0lkZW50aWZpZXI6TShWKX0pKTtmdW5jdGlvbiBjbihhKXtuYy5jYWxsKHRoaXMpO2E9YXx8e307dGhpcy5hPW51bGw7dGhpcy5pPUZiO3RoaXMuZz1uZXcgY2IoNjM3ODEzNyk7dGhpcy5jPXZvaWQgMDt5KHRoaXMscGMoXCJwcm9qZWN0aW9uXCIpLHRoaXMubWgsdGhpcyk7eSh0aGlzLHBjKFwidHJhY2tpbmdcIiksdGhpcy5OZyx0aGlzKTt2b2lkIDAhPT1hLnByb2plY3Rpb24mJnRoaXMuc2V0KFwicHJvamVjdGlvblwiLEFiKGEucHJvamVjdGlvbikpO3ZvaWQgMCE9PWEudHJhY2tpbmdPcHRpb25zJiZ0aGlzLnNldChcInRyYWNraW5nT3B0aW9uc1wiLGEudHJhY2tpbmdPcHRpb25zKTt0aGlzLnhjKHZvaWQgMCE9PWEudHJhY2tpbmc/YS50cmFja2luZzohMSl9dChjbixuYyk7bD1jbi5wcm90b3R5cGU7bC5sYT1mdW5jdGlvbigpe3RoaXMueGMoITEpO25jLnByb3RvdHlwZS5sYS5jYWxsKHRoaXMpfTtcbmwubWg9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmdldChcInByb2plY3Rpb25cIik7YSYmKHRoaXMuaT1EYihBYihcIkVQU0c6NDMyNlwiKSxhKSx0aGlzLmEmJnRoaXMuc2V0KFwicG9zaXRpb25cIix0aGlzLmkodGhpcy5hKSkpfTtsLk5nPWZ1bmN0aW9uKCl7aWYobmQpe3ZhciBhPXRoaXMuZWUoKTthJiZ2b2lkIDA9PT10aGlzLmM/dGhpcy5jPW5hdmlnYXRvci5nZW9sb2NhdGlvbi53YXRjaFBvc2l0aW9uKHRoaXMuamkuYmluZCh0aGlzKSx0aGlzLmtpLmJpbmQodGhpcyksdGhpcy5nZXQoXCJ0cmFja2luZ09wdGlvbnNcIikpOmF8fHZvaWQgMD09PXRoaXMuY3x8KG5hdmlnYXRvci5nZW9sb2NhdGlvbi5jbGVhcldhdGNoKHRoaXMuYyksdGhpcy5jPXZvaWQgMCl9fTtcbmwuamk9ZnVuY3Rpb24oYSl7dmFyIGI9YS5jb29yZHM7dGhpcy5zZXQoXCJhY2N1cmFjeVwiLGIuYWNjdXJhY3kpO3RoaXMuc2V0KFwiYWx0aXR1ZGVcIixudWxsPT09Yi5hbHRpdHVkZT92b2lkIDA6Yi5hbHRpdHVkZSk7dGhpcy5zZXQoXCJhbHRpdHVkZUFjY3VyYWN5XCIsbnVsbD09PWIuYWx0aXR1ZGVBY2N1cmFjeT92b2lkIDA6Yi5hbHRpdHVkZUFjY3VyYWN5KTt0aGlzLnNldChcImhlYWRpbmdcIixudWxsPT09Yi5oZWFkaW5nP3ZvaWQgMDp5YShiLmhlYWRpbmcpKTt0aGlzLmE/KHRoaXMuYVswXT1iLmxvbmdpdHVkZSx0aGlzLmFbMV09Yi5sYXRpdHVkZSk6dGhpcy5hPVtiLmxvbmdpdHVkZSxiLmxhdGl0dWRlXTthPXRoaXMuaSh0aGlzLmEpO3RoaXMuc2V0KFwicG9zaXRpb25cIixhKTt0aGlzLnNldChcInNwZWVkXCIsbnVsbD09PWIuc3BlZWQ/dm9pZCAwOmIuc3BlZWQpO2E9dGhpcy5nO3ZhciBjPXRoaXMuYSxkPWIuYWNjdXJhY3k7Yj1bXTt2YXIgZTtmb3IoZT0wOzMyPmU7KytlKWlhKGIsYS5vZmZzZXQoYyxcbmQsMipNYXRoLlBJKmUvMzIpKTtiLnB1c2goYlswXSxiWzFdKTthPW5ldyB6KG51bGwpO1hlKGEsXCJYWVwiLGIsW2IubGVuZ3RoXSk7YS54Yih0aGlzLmkpO3RoaXMuc2V0KFwiYWNjdXJhY3lHZW9tZXRyeVwiLGEpO3RoaXMuYigpfTtsLmtpPWZ1bmN0aW9uKGEpe2EudHlwZT1cImVycm9yXCI7dGhpcy54YyghMSk7dGhpcy5mKGEpfTtsLmVnPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwiYWNjdXJhY3lcIil9O2wuamc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJoZWFkaW5nXCIpfTtsLmxoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0KFwicG9zaXRpb25cIil9O2wub2c9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXQoXCJzcGVlZFwiKX07bC5lZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldChcInRyYWNraW5nXCIpfTtsLnhjPWZ1bmN0aW9uKGEpe3RoaXMuc2V0KFwidHJhY2tpbmdcIixhKX07ZnVuY3Rpb24gZG4oYSxiLGMpe3dlLmNhbGwodGhpcyk7ZW4odGhpcyxhLGI/YjowLGMpfXQoZG4sd2UpO2w9ZG4ucHJvdG90eXBlO2wuY2xvbmU9ZnVuY3Rpb24oKXt2YXIgYT1uZXcgZG4obnVsbCk7eWUoYSx0aGlzLlcsdGhpcy5vLnNsaWNlKCkpO2EuYigpO3JldHVybiBhfTtsLkdhPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPXRoaXMubzthLT1lWzBdO3ZhciBmPWItZVsxXTtiPWEqYStmKmY7aWYoYjxkKXtpZihiKWZvcihkPXRoaXMuSWIoKS9NYXRoLnNxcnQoYiksY1swXT1lWzBdK2QqYSxjWzFdPWVbMV0rZCpmLGQ9MjtkPHRoaXMuQTsrK2QpY1tkXT1lW2RdO2Vsc2UgZm9yKGQ9MDtkPHRoaXMuQTsrK2QpY1tkXT1lW2RdO2MubGVuZ3RoPXRoaXMuQTtyZXR1cm4gYn1yZXR1cm4gZH07bC5iYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm8uc2xpY2UoMCx0aGlzLkEpfTtcbmwuWmI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5vLGM9Ylt0aGlzLkFdLWJbMF07cmV0dXJuIE5hKGJbMF0tYyxiWzFdLWMsYlswXStjLGJbMV0rYyxhKX07bC5JYj1mdW5jdGlvbigpe3ZhciBhPXRoaXMub1t0aGlzLkFdLXRoaXMub1swXSxiPXRoaXMub1t0aGlzLkErMV0tdGhpcy5vWzFdO3JldHVybiBNYXRoLnNxcnQoYSphK2IqYil9O2wuST1mdW5jdGlvbigpe3JldHVyblwiQ2lyY2xlXCJ9O2wuSmE9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5BLGM9YS5zbGljZSgpO2NbYl09Y1swXSsodGhpcy5vW2JdLXRoaXMub1swXSk7dmFyIGQ7Zm9yKGQ9MTtkPGI7KytkKWNbYitkXT1hW2RdO3llKHRoaXMsdGhpcy5XLGMpO3RoaXMuYigpfTtcbmZ1bmN0aW9uIGVuKGEsYixjLGQpe2lmKGIpe3plKGEsZCxiLDApO2Eub3x8KGEubz1bXSk7ZD1hLm87Yj1HZShkLGIpO2RbYisrXT1kWzBdK2M7dmFyIGU7Yz0xO2ZvcihlPWEuQTtjPGU7KytjKWRbYisrXT1kW2NdO2QubGVuZ3RoPWJ9ZWxzZSB5ZShhLFwiWFlcIixudWxsKTthLmIoKX1sLkc9ZnVuY3Rpb24oKXt9O2wuWT1mdW5jdGlvbigpe307bC5hZj1mdW5jdGlvbihhKXt0aGlzLm9bdGhpcy5BXT10aGlzLm9bMF0rYTt0aGlzLmIoKX07ZnVuY3Rpb24gZm4oYSxiKXtrYy5jYWxsKHRoaXMpO3RoaXMuTmE9YTt0aGlzLnN0YXRlPWI7dGhpcy5iPW51bGw7dGhpcy5rZXk9XCJcIn10KGZuLGtjKTtmdW5jdGlvbiBnbihhKXthLmYoXCJjaGFuZ2VcIil9Zm4ucHJvdG90eXBlLlhhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMua2V5K1wiL1wiK3RoaXMuTmF9O2Z1bmN0aW9uIGhuKGEsYixjLGQsZSl7Zm4uY2FsbCh0aGlzLGEsYik7dGhpcy5hPWM7dGhpcy5OPW5ldyBJbWFnZTtudWxsIT09ZCYmKHRoaXMuTi5jcm9zc09yaWdpbj1kKTt0aGlzLmo9bnVsbDt0aGlzLmM9ZX10KGhuLGZuKTtsPWhuLnByb3RvdHlwZTtsLmxhPWZ1bmN0aW9uKCl7MT09dGhpcy5zdGF0ZSYmKGpuKHRoaXMpLHRoaXMuTi5zcmM9a24udG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpKTt0aGlzLmImJmhjKHRoaXMuYik7dGhpcy5zdGF0ZT01O2duKHRoaXMpO2ZuLnByb3RvdHlwZS5sYS5jYWxsKHRoaXMpfTtsLmhhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuTn07bC5YYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmF9O2wubmg9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPTM7am4odGhpcyk7dGhpcy5OPWtuO2duKHRoaXMpfTtsLm9oPWZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT10aGlzLk4ubmF0dXJhbFdpZHRoJiZ0aGlzLk4ubmF0dXJhbEhlaWdodD8yOjQ7am4odGhpcyk7Z24odGhpcyl9O1xubC5sb2FkPWZ1bmN0aW9uKCl7aWYoMD09dGhpcy5zdGF0ZXx8Mz09dGhpcy5zdGF0ZSl0aGlzLnN0YXRlPTEsZ24odGhpcyksdGhpcy5qPVt5KHRoaXMuTixcImVycm9yXCIsdGhpcy5uaCx0aGlzLCEwKSx5KHRoaXMuTixcImxvYWRcIix0aGlzLm9oLHRoaXMsITApXSx0aGlzLmModGhpcyx0aGlzLmEpfTtmdW5jdGlvbiBqbihhKXthLmouZm9yRWFjaChaYik7YS5qPW51bGx9dmFyIGtuLGxuPUhjKDEsMSk7bG4uZmlsbFN0eWxlPVwicmdiYSgwLDAsMCwwKVwiO2xuLmZpbGxSZWN0KDAsMCwxLDEpO2tuPWxuLmNhbnZhcztmdW5jdGlvbiBtbihhLGIsYyxkKXt0aGlzLkthPWE7dGhpcy56YT1iO3RoaXMub3ZlcmxhcHM9ZDt0aGlzLmE9MDt0aGlzLnJlc29sdXRpb249Yzt0aGlzLmZhPXRoaXMuZWE9bnVsbDt0aGlzLmY9W107dGhpcy5jb29yZGluYXRlcz1bXTt0aGlzLlY9e307dGhpcy5KPXZnKCk7dGhpcy5iPVtdO3RoaXMuQz1udWxsO3RoaXMuJD12ZygpO3RoaXMuWD12ZygpfXQobW4sSWcpO1xuZnVuY3Rpb24gbm4oYSxiLGMsZCxlLGYsZyl7dmFyIGg9YS5jb29yZGluYXRlcy5sZW5ndGgsaz1hLlhjKCk7ZyYmKGMrPWUpO2c9W2JbY10sYltjKzFdXTt2YXIgbT1bTmFOLE5hTl0sbj0hMCxwO2ZvcihwPWMrZTtwPGQ7cCs9ZSl7bVswXT1iW3BdO21bMV09YltwKzFdO3ZhciByPWtbMV07dmFyIHU9a1syXSxEPWtbM10sRj1tWzBdLEM9bVsxXSxBPTA7RjxrWzBdP0F8PTE2OkY+dSYmKEF8PTQpO0M8cj9BfD04OkM+RCYmKEF8PTIpO0F8fChBPTEpO3I9QTtyIT09SD8obiYmKGEuY29vcmRpbmF0ZXNbaCsrXT1nWzBdLGEuY29vcmRpbmF0ZXNbaCsrXT1nWzFdKSxhLmNvb3JkaW5hdGVzW2grK109bVswXSxhLmNvb3JkaW5hdGVzW2grK109bVsxXSxuPSExKToxPT09cj8oYS5jb29yZGluYXRlc1toKytdPW1bMF0sYS5jb29yZGluYXRlc1toKytdPW1bMV0sbj0hMSk6bj0hMDtnWzBdPW1bMF07Z1sxXT1tWzFdO3ZhciBIPXJ9aWYoZiYmbnx8cD09PWMrZSlhLmNvb3JkaW5hdGVzW2grK109XG5nWzBdLGEuY29vcmRpbmF0ZXNbaCsrXT1nWzFdO3JldHVybiBofWZ1bmN0aW9uIG9uKGEsYixjLGQsZSxmKXtmb3IodmFyIGc9MCxoPWQubGVuZ3RoO2c8aDsrK2cpe3ZhciBrPWRbZ107Yz1ubihhLGIsYyxrLGUsITEsITEpO2YucHVzaChjKTtjPWt9cmV0dXJuIGN9XG5tbi5wcm90b3R5cGUuWGQ9ZnVuY3Rpb24oYSxiLGMpe3BuKHRoaXMsYik7dmFyIGQ9YS5JKCksZT1hLkEsZj10aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCxnO2lmKFwiTXVsdGlQb2x5Z29uXCI9PWQpe2Q9U2coYSk7dmFyIGg9W107Zm9yKHZhciBrPWEuYSxtPWc9MCxuPWsubGVuZ3RoO208bjsrK20pe3ZhciBwPVtdO2c9b24odGhpcyxkLGcsa1ttXSxlLHApO2gucHVzaChwKX10aGlzLmYucHVzaChbNCxmLGgsYSxjLExlXSl9ZWxzZVwiUG9seWdvblwiPT1kfHxcIk11bHRpTGluZVN0cmluZ1wiPT1kPyhoPVtdLGQ9XCJQb2x5Z29uXCI9PWQ/WWUoYSk6YS5vLG9uKHRoaXMsZCwwLGEuUWEoKSxlLGgpLHRoaXMuZi5wdXNoKFs0LGYsaCxhLGMsS2VdKSk6XCJMaW5lU3RyaW5nXCI9PWR8fFwiTXVsdGlQb2ludFwiPT1kPyhkPWEubyxlPW5uKHRoaXMsZCwwLGQubGVuZ3RoLGUsITEsITEpLHRoaXMuZi5wdXNoKFs0LGYsZSxhLGMsSmVdKSk6XCJQb2ludFwiPT1kJiYoZD1hLm8sdGhpcy5jb29yZGluYXRlcy5wdXNoKGRbMF0sXG5kWzFdKSxlPXRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoLHRoaXMuZi5wdXNoKFs0LGYsZSxhLGNdKSk7cW4odGhpcyxiKX07ZnVuY3Rpb24gcG4oYSxiKXthLmVhPVswLGIsMF07YS5mLnB1c2goYS5lYSk7YS5mYT1bMCxiLDBdO2EuYi5wdXNoKGEuZmEpfW1uLnByb3RvdHlwZS5tYT1mdW5jdGlvbihhLGIpe2lmKHRoaXMuSCl7dmFyIGM9eGcodGhpcy5KLHRoaXMuSC5zbGljZSgpKTthLnRyYW5zbGF0ZShjWzBdLGNbMV0pO2Eucm90YXRlKGIpfWEuZmlsbCgpO3RoaXMuSCYmYS5zZXRUcmFuc2Zvcm0uYXBwbHkoYSx0aGlzLlgpfTtcbmZ1bmN0aW9uIHJuKGEsYixjLGQsZSxmLGcsaCxrKXtpZihhLkMmJmphKGQsYS5KKSl2YXIgbT1hLkM7ZWxzZSBhLkN8fChhLkM9W10pLG09dmUoYS5jb29yZGluYXRlcywwLGEuY29vcmRpbmF0ZXMubGVuZ3RoLDIsZCxhLkMpLHdnKGEuSixkKTtkPSFiYihmKTtmb3IodmFyIG49MCxwPWcubGVuZ3RoLHI9MCx1LEQ9YS4kLEY9YS5YLEMsQSxILEssY2E9MCxSPTAsWj1hLlYsVT17Y29udGV4dDpiLHBpeGVsUmF0aW86YyxyZXNvbHV0aW9uOmEucmVzb2x1dGlvbixyb3RhdGlvbjplfSxHPWEuZiE9Z3x8YS5vdmVybGFwcz8wOjIwMDtuPHA7KXt2YXIgeD1nW25dO3N3aXRjaCh4WzBdKXtjYXNlIDA6dmFyIEk9eFsxXTtkJiZmW3YoSSkudG9TdHJpbmcoKV18fCFJLlAoKT9uPXhbMl06dm9pZCAwPT09a3x8VmEoayxJLlAoKS5LKCkpPysrbjpuPXhbMl0rMTticmVhaztjYXNlIDE6Y2E+RyYmKGEubWEoYixlKSxjYT0wKTtSPkcmJihiLnN0cm9rZSgpLFI9MCk7Y2F8fFJ8fChiLmJlZ2luUGF0aCgpLFxuQz1BPU5hTik7KytuO2JyZWFrO2Nhc2UgMjpyPXhbMV07dT1tW3JdO3g9bVtyKzFdO0g9bVtyKzJdLXU7cj1tW3IrM10teDtyPU1hdGguc3FydChIKkgrcipyKTtiLm1vdmVUbyh1K3IseCk7Yi5hcmModSx4LHIsMCwyKk1hdGguUEksITApOysrbjticmVhaztjYXNlIDM6Yi5jbG9zZVBhdGgoKTsrK247YnJlYWs7Y2FzZSA0OnI9eFsxXTt1PXhbMl07SD14WzRdO0s9Nj09eC5sZW5ndGg/eFs1XTp2b2lkIDA7VS5nZW9tZXRyeT14WzNdO1UuZmVhdHVyZT1JO24gaW4gWnx8KFpbbl09W10pO3g9WltuXTtLP0sobSxyLHUsMix4KTooeFswXT1tW3JdLHhbMV09bVtyKzFdLHgubGVuZ3RoPTIpO0goeCxVKTsrK247YnJlYWs7Y2FzZSA1OnI9eFsxXTt1PXhbMl07dmFyIHdhPXhbM107dmFyIENhPXhbNF0qYzt2YXIgWGI9eFs1XSpjO3ZhciBHYT14WzZdLHpjPXhbN10sZWM9eFs4XSxmYz14WzldO3ZhciBxYT14WzEwXTtIPXhbMTFdO0s9eFsxMl07dmFyIHdiPXhbMTNdLHVkPXhbMTRdO2ZvcihxYSYmXG4oSCs9ZSk7cjx1O3IrPTIpe3g9bVtyXS1DYTtxYT1tW3IrMV0tWGI7d2ImJih4PU1hdGgucm91bmQoeCkscWE9TWF0aC5yb3VuZChxYSkpO2lmKDEhPUt8fEgpe3ZhciBBYz14K0NhLGtlPXFhK1hiO3lnKEQsQWMsa2UsSyxLLEgsLUFjLC1rZSk7Yi5zZXRUcmFuc2Zvcm0uYXBwbHkoYixEKX1BYz1iLmdsb2JhbEFscGhhOzEhPXpjJiYoYi5nbG9iYWxBbHBoYT1BYyp6Yyk7a2U9dWQrZWM+d2Eud2lkdGg/d2Eud2lkdGgtZWM6dWQ7dmFyIGVrPUdhK2ZjPndhLmhlaWdodD93YS5oZWlnaHQtZmM6R2E7Yi5kcmF3SW1hZ2Uod2EsZWMsZmMsa2UsZWsseCxxYSxrZSpjLGVrKmMpOzEhPXpjJiYoYi5nbG9iYWxBbHBoYT1BYyk7KDEhPUt8fEgpJiZiLnNldFRyYW5zZm9ybS5hcHBseShiLEYpfSsrbjticmVhaztjYXNlIDY6cj14WzFdO3U9eFsyXTtYYj14WzNdO0dhPXhbNF0qYzt6Yz14WzVdKmM7SD14WzZdO0s9eFs3XSpjO3dhPXhbOF07Q2E9eFs5XTtmb3IoKHFhPXhbMTBdKSYmKEgrPWUpO3I8XG51O3IrPTIpe3g9bVtyXStHYTtxYT1tW3IrMV0remM7aWYoMSE9S3x8SCl5ZyhELHgscWEsSyxLLEgsLXgsLXFhKSxiLnNldFRyYW5zZm9ybS5hcHBseShiLEQpO2VjPVhiLnNwbGl0KFwiXFxuXCIpO2ZjPWVjLmxlbmd0aDsxPGZjPyh3Yj1NYXRoLnJvdW5kKDEuNSpiLm1lYXN1cmVUZXh0KFwiTVwiKS53aWR0aCkscWEtPShmYy0xKS8yKndiKTp3Yj0wO2Zvcih1ZD0wO3VkPGZjO3VkKyspQWM9ZWNbdWRdLENhJiZiLnN0cm9rZVRleHQoQWMseCxxYSksd2EmJmIuZmlsbFRleHQoQWMseCxxYSkscWErPXdiOygxIT1LfHxIKSYmYi5zZXRUcmFuc2Zvcm0uYXBwbHkoYixGKX0rK247YnJlYWs7Y2FzZSA3OmlmKGgmJihJPXhbMV0scj1oKEkpKSlyZXR1cm4gcjsrK247YnJlYWs7Y2FzZSA4Okc/Y2ErKzphLm1hKGIsZSk7KytuO2JyZWFrO2Nhc2UgOTpyPXhbMV07dT14WzJdO3g9bVtyXTtxYT1tW3IrMV07SD14Ky41fDA7Sz1xYSsuNXwwO2lmKEghPT1DfHxLIT09QSliLm1vdmVUbyh4LHFhKSxDPVxuSCxBPUs7Zm9yKHIrPTI7cjx1O3IrPTIpaWYoeD1tW3JdLHFhPW1bcisxXSxIPXgrLjV8MCxLPXFhKy41fDAscj09dS0yfHxIIT09Q3x8SyE9PUEpYi5saW5lVG8oeCxxYSksQz1ILEE9SzsrK247YnJlYWs7Y2FzZSAxMDphLkg9eFsyXTtjYSYmKGEubWEoYixlKSxjYT0wLFImJihiLnN0cm9rZSgpLFI9MCkpO2IuZmlsbFN0eWxlPXhbMV07KytuO2JyZWFrO2Nhc2UgMTE6cj12b2lkIDAhPT14WzhdP3hbOF06ITA7dmFyIHFoPXhbOV07dT14WzJdO1ImJihiLnN0cm9rZSgpLFI9MCk7Yi5zdHJva2VTdHlsZT14WzFdO2IubGluZVdpZHRoPXI/dSpjOnU7Yi5saW5lQ2FwPXhbM107Yi5saW5lSm9pbj14WzRdO2IubWl0ZXJMaW1pdD14WzVdO2xkJiYodT14WzZdLEg9eFs3XSxyJiZjIT09cWgmJih1PXUubWFwKGZ1bmN0aW9uKGEpe3JldHVybiBhKmMvcWh9KSxIKj1jL3FoLHhbNl09dSx4WzddPUgseFs5XT1jKSxiLmxpbmVEYXNoT2Zmc2V0PUgsYi5zZXRMaW5lRGFzaCh1KSk7KytuO2JyZWFrO1xuY2FzZSAxMjpiLmZvbnQ9eFsxXTtiLnRleHRBbGlnbj14WzJdO2IudGV4dEJhc2VsaW5lPXhbM107KytuO2JyZWFrO2Nhc2UgMTM6Rz9SKys6Yi5zdHJva2UoKTsrK247YnJlYWs7ZGVmYXVsdDorK259fWNhJiZhLm1hKGIsZSk7UiYmYi5zdHJva2UoKX1mdW5jdGlvbiBzbihhKXt2YXIgYj1hLmI7Yi5yZXZlcnNlKCk7dmFyIGMsZD1iLmxlbmd0aCxlPS0xO2ZvcihjPTA7YzxkOysrYyl7dmFyIGY9YltjXTt2YXIgZz1mWzBdO2lmKDc9PWcpZT1jO2Vsc2UgaWYoMD09Zyl7ZlsyXT1jO2Y9YS5iO2ZvcihnPWM7ZTxnOyl7dmFyIGg9ZltlXTtmW2VdPWZbZ107ZltnXT1oOysrZTstLWd9ZT0tMX19fWZ1bmN0aW9uIHFuKGEsYil7YS5lYVsyXT1hLmYubGVuZ3RoO2EuZWE9bnVsbDthLmZhWzJdPWEuYi5sZW5ndGg7YS5mYT1udWxsO2I9WzcsYl07YS5mLnB1c2goYik7YS5iLnB1c2goYil9bW4ucHJvdG90eXBlLmtjPW5hO21uLnByb3RvdHlwZS5YYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnphfTtmdW5jdGlvbiB0bihhLGIsYyxkKXttbi5jYWxsKHRoaXMsYSxiLGMsZCk7dGhpcy5OPXRoaXMud2E9bnVsbDt0aGlzLkQ9dGhpcy5MPXRoaXMucz10aGlzLmw9dGhpcy5CPXRoaXMudT10aGlzLnY9dGhpcy5nPXRoaXMuaT10aGlzLmM9dGhpcy5qPXZvaWQgMH10KHRuLG1uKTt0bi5wcm90b3R5cGUuVGM9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLk4pe3BuKHRoaXMsYik7dmFyIGM9YS5vLGQ9dGhpcy5jb29yZGluYXRlcy5sZW5ndGg7YT1ubih0aGlzLGMsMCxjLmxlbmd0aCxhLkEsITEsITEpO3RoaXMuZi5wdXNoKFs1LGQsYSx0aGlzLk4sdGhpcy5qLHRoaXMuYyx0aGlzLmksdGhpcy5nLHRoaXMudix0aGlzLnUsdGhpcy5CLHRoaXMubCx0aGlzLnMsdGhpcy5MLHRoaXMuRF0pO3RoaXMuYi5wdXNoKFs1LGQsYSx0aGlzLndhLHRoaXMuaix0aGlzLmMsdGhpcy5pLHRoaXMuZyx0aGlzLnYsdGhpcy51LHRoaXMuQix0aGlzLmwsdGhpcy5zLHRoaXMuTCx0aGlzLkRdKTtxbih0aGlzLGIpfX07XG50bi5wcm90b3R5cGUuUmM9ZnVuY3Rpb24oYSxiKXtpZih0aGlzLk4pe3BuKHRoaXMsYik7dmFyIGM9YS5vLGQ9dGhpcy5jb29yZGluYXRlcy5sZW5ndGg7YT1ubih0aGlzLGMsMCxjLmxlbmd0aCxhLkEsITEsITEpO3RoaXMuZi5wdXNoKFs1LGQsYSx0aGlzLk4sdGhpcy5qLHRoaXMuYyx0aGlzLmksdGhpcy5nLHRoaXMudix0aGlzLnUsdGhpcy5CLHRoaXMubCx0aGlzLnMsdGhpcy5MLHRoaXMuRF0pO3RoaXMuYi5wdXNoKFs1LGQsYSx0aGlzLndhLHRoaXMuaix0aGlzLmMsdGhpcy5pLHRoaXMuZyx0aGlzLnYsdGhpcy51LHRoaXMuQix0aGlzLmwsdGhpcy5zLHRoaXMuTCx0aGlzLkRdKTtxbih0aGlzLGIpfX07dG4ucHJvdG90eXBlLmtjPWZ1bmN0aW9uKCl7c24odGhpcyk7dGhpcy5jPXRoaXMuaj12b2lkIDA7dGhpcy5OPXRoaXMud2E9bnVsbDt0aGlzLkQ9dGhpcy5MPXRoaXMubD10aGlzLkI9dGhpcy51PXRoaXMudj10aGlzLmc9dGhpcy5zPXRoaXMuaT12b2lkIDB9O1xudG4ucHJvdG90eXBlLndjPWZ1bmN0aW9uKGEpe3ZhciBiPWEuJGIoKSxjPWEucWIoKSxkPWEuS2UoMSksZT1hLmhhKDEpLGY9YS5vYygpO3RoaXMuaj1iWzBdO3RoaXMuYz1iWzFdO3RoaXMud2E9ZDt0aGlzLk49ZTt0aGlzLmk9Y1sxXTt0aGlzLmc9YS5jO3RoaXMudj1mWzBdO3RoaXMudT1mWzFdO3RoaXMuQj1hLnY7dGhpcy5sPWEubDt0aGlzLnM9YS5hO3RoaXMuTD1hLnM7dGhpcy5EPWNbMF19O2Z1bmN0aW9uIHVuKGEsYixjLGQpe21uLmNhbGwodGhpcyxhLGIsYyxkKTt0aGlzLmM9bnVsbDt0aGlzLmo9e0ViOnZvaWQgMCx5Yjp2b2lkIDAsemI6bnVsbCxBYjp2b2lkIDAsQmI6dm9pZCAwLENiOnZvaWQgMCxEYjp2b2lkIDAsbmI6dm9pZCAwLHN0cm9rZVN0eWxlOnZvaWQgMCxsaW5lQ2FwOnZvaWQgMCxsaW5lRGFzaDpudWxsLGxpbmVEYXNoT2Zmc2V0OnZvaWQgMCxsaW5lSm9pbjp2b2lkIDAsbGluZVdpZHRoOnZvaWQgMCxtaXRlckxpbWl0OnZvaWQgMH19dCh1bixtbik7ZnVuY3Rpb24gdm4oYSxiLGMsZCxlKXt2YXIgZj1hLmNvb3JkaW5hdGVzLmxlbmd0aDtiPW5uKGEsYixjLGQsZSwhMSwhMSk7Zj1bOSxmLGJdO2EuZi5wdXNoKGYpO2EuYi5wdXNoKGYpO3JldHVybiBkfWw9dW4ucHJvdG90eXBlO1xubC5YYz1mdW5jdGlvbigpe3RoaXMuY3x8KHRoaXMuYz1LYSh0aGlzLnphKSwwPHRoaXMuYSYmSmEodGhpcy5jLHRoaXMucmVzb2x1dGlvbioodGhpcy5hKzEpLzIsdGhpcy5jKSk7cmV0dXJuIHRoaXMuY307ZnVuY3Rpb24gd24oYSl7dmFyIGI9YS5qLGM9Yi5zdHJva2VTdHlsZSxkPWIubGluZUNhcCxlPWIubGluZURhc2gsZj1iLmxpbmVEYXNoT2Zmc2V0LGc9Yi5saW5lSm9pbixoPWIubGluZVdpZHRoLGs9Yi5taXRlckxpbWl0O2IuRWI9PWMmJmIueWI9PWQmJmphKGIuemIsZSkmJmIuQWI9PWYmJmIuQmI9PWcmJmIuQ2I9PWgmJmIuRGI9PWt8fCh2b2lkIDAhPWIubmImJmIubmIhPWEuY29vcmRpbmF0ZXMubGVuZ3RoJiYoYS5mLnB1c2goWzEzXSksYi5uYj1hLmNvb3JkaW5hdGVzLmxlbmd0aCksYi5uYj0wLGEuZi5wdXNoKFsxMSxjLGgsZCxnLGssZSxmLCEwLDFdLFsxXSksYi5FYj1jLGIueWI9ZCxiLnpiPWUsYi5BYj1mLGIuQmI9ZyxiLkNiPWgsYi5EYj1rKX1cbmwuUGM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmosZD1jLmxpbmVXaWR0aDt2b2lkIDAhPT1jLnN0cm9rZVN0eWxlJiZ2b2lkIDAhPT1kJiYod24odGhpcykscG4odGhpcyxiKSx0aGlzLmIucHVzaChbMTEsYy5zdHJva2VTdHlsZSxjLmxpbmVXaWR0aCxjLmxpbmVDYXAsYy5saW5lSm9pbixjLm1pdGVyTGltaXQsYy5saW5lRGFzaCxjLmxpbmVEYXNoT2Zmc2V0LCEwLDFdLFsxXSksYz1hLm8sdm4odGhpcyxjLDAsYy5sZW5ndGgsYS5BKSx0aGlzLmIucHVzaChbMTNdKSxxbih0aGlzLGIpKX07XG5sLlFjPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5qLGQ9Yy5saW5lV2lkdGg7aWYodm9pZCAwIT09Yy5zdHJva2VTdHlsZSYmdm9pZCAwIT09ZCl7d24odGhpcyk7cG4odGhpcyxiKTt0aGlzLmIucHVzaChbMTEsYy5zdHJva2VTdHlsZSxjLmxpbmVXaWR0aCxjLmxpbmVDYXAsYy5saW5lSm9pbixjLm1pdGVyTGltaXQsYy5saW5lRGFzaCxjLmxpbmVEYXNoT2Zmc2V0LCEwLDFdLFsxXSk7Yz1hLlFhKCk7ZD1hLm87YT1hLkE7dmFyIGU9MCxmO3ZhciBnPTA7Zm9yKGY9Yy5sZW5ndGg7ZzxmOysrZyllPXZuKHRoaXMsZCxlLGNbZ10sYSk7dGhpcy5iLnB1c2goWzEzXSk7cW4odGhpcyxiKX19O2wua2M9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmo7dm9pZCAwIT1hLm5iJiZhLm5iIT10aGlzLmNvb3JkaW5hdGVzLmxlbmd0aCYmdGhpcy5mLnB1c2goWzEzXSk7c24odGhpcyk7dGhpcy5qPW51bGx9O1xubC5TYT1mdW5jdGlvbihhLGIpe2E9Yi5iO3RoaXMuai5zdHJva2VTdHlsZT1HYyhhP2E6R2cpO2E9Yi5jO3RoaXMuai5saW5lQ2FwPXZvaWQgMCE9PWE/YTpcInJvdW5kXCI7YT1iLmY7dGhpcy5qLmxpbmVEYXNoPWE/YTpGZzthPWIuaTt0aGlzLmoubGluZURhc2hPZmZzZXQ9YT9hOjA7YT1iLmc7dGhpcy5qLmxpbmVKb2luPXZvaWQgMCE9PWE/YTpcInJvdW5kXCI7YT1iLmE7dGhpcy5qLmxpbmVXaWR0aD12b2lkIDAhPT1hP2E6MTtiPWIuQjt0aGlzLmoubWl0ZXJMaW1pdD12b2lkIDAhPT1iP2I6MTA7dGhpcy5qLmxpbmVXaWR0aD50aGlzLmEmJih0aGlzLmE9dGhpcy5qLmxpbmVXaWR0aCx0aGlzLmM9bnVsbCl9O2Z1bmN0aW9uIHhuKGEsYixjLGQpe21uLmNhbGwodGhpcyxhLGIsYyxkKTt0aGlzLmM9bnVsbDt0aGlzLmo9e1ZkOnZvaWQgMCxFYjp2b2lkIDAseWI6dm9pZCAwLHpiOm51bGwsQWI6dm9pZCAwLEJiOnZvaWQgMCxDYjp2b2lkIDAsRGI6dm9pZCAwLGZpbGxTdHlsZTp2b2lkIDAsc3Ryb2tlU3R5bGU6dm9pZCAwLGxpbmVDYXA6dm9pZCAwLGxpbmVEYXNoOm51bGwsbGluZURhc2hPZmZzZXQ6dm9pZCAwLGxpbmVKb2luOnZvaWQgMCxsaW5lV2lkdGg6dm9pZCAwLG1pdGVyTGltaXQ6dm9pZCAwfX10KHhuLG1uKTtcbmZ1bmN0aW9uIHluKGEsYixjLGQsZSl7dmFyIGY9YS5qLGc9dm9pZCAwIT09Zi5maWxsU3R5bGU7Zj12b2lkIDAhPWYuc3Ryb2tlU3R5bGU7dmFyIGg9ZC5sZW5ndGgsaz1bMV07YS5mLnB1c2goayk7YS5iLnB1c2goayk7Zm9yKGs9MDtrPGg7KytrKXt2YXIgbT1kW2tdLG49YS5jb29yZGluYXRlcy5sZW5ndGg7Yz1ubihhLGIsYyxtLGUsITAsIWYpO2M9WzksbixjXTthLmYucHVzaChjKTthLmIucHVzaChjKTtmJiYoYz1bM10sYS5mLnB1c2goYyksYS5iLnB1c2goYykpO2M9bX1iPVs4XTthLmIucHVzaChiKTtnJiZhLmYucHVzaChiKTtmJiYoZz1bMTNdLGEuZi5wdXNoKGcpLGEuYi5wdXNoKGcpKTtyZXR1cm4gY31sPXhuLnByb3RvdHlwZTtcbmwuT2M9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmosZD1jLnN0cm9rZVN0eWxlO2lmKHZvaWQgMCE9PWMuZmlsbFN0eWxlfHx2b2lkIDAhPT1kKXt6bih0aGlzLGEpO3BuKHRoaXMsYik7dGhpcy5iLnB1c2goWzEwLERjKEVnKV0pO3ZvaWQgMCE9PWMuc3Ryb2tlU3R5bGUmJnRoaXMuYi5wdXNoKFsxMSxjLnN0cm9rZVN0eWxlLGMubGluZVdpZHRoLGMubGluZUNhcCxjLmxpbmVKb2luLGMubWl0ZXJMaW1pdCxjLmxpbmVEYXNoLGMubGluZURhc2hPZmZzZXQsITAsMV0pO3ZhciBlPWEubztkPXRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO25uKHRoaXMsZSwwLGUubGVuZ3RoLGEuQSwhMSwhMSk7YT1bMV07ZD1bMixkXTt0aGlzLmYucHVzaChhLGQpO3RoaXMuYi5wdXNoKGEsZCk7YT1bOF07dGhpcy5iLnB1c2goYSk7dm9pZCAwIT09Yy5maWxsU3R5bGUmJnRoaXMuZi5wdXNoKGEpO3ZvaWQgMCE9PWMuc3Ryb2tlU3R5bGUmJihjPVsxM10sdGhpcy5mLnB1c2goYyksdGhpcy5iLnB1c2goYykpO1xucW4odGhpcyxiKX19O2wuVWM9ZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLmo7em4odGhpcyxhKTtwbih0aGlzLGIpO3RoaXMuYi5wdXNoKFsxMCxEYyhFZyldKTt2b2lkIDAhPT1jLnN0cm9rZVN0eWxlJiZ0aGlzLmIucHVzaChbMTEsYy5zdHJva2VTdHlsZSxjLmxpbmVXaWR0aCxjLmxpbmVDYXAsYy5saW5lSm9pbixjLm1pdGVyTGltaXQsYy5saW5lRGFzaCxjLmxpbmVEYXNoT2Zmc2V0LCEwLDFdKTtjPWEuUWEoKTt2YXIgZD1ZZShhKTt5bih0aGlzLGQsMCxjLGEuQSk7cW4odGhpcyxiKX07XG5sLlNjPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5qLGQ9Yy5zdHJva2VTdHlsZTtpZih2b2lkIDAhPT1jLmZpbGxTdHlsZXx8dm9pZCAwIT09ZCl7em4odGhpcyxhKTtwbih0aGlzLGIpO3RoaXMuYi5wdXNoKFsxMCxEYyhFZyldKTt2b2lkIDAhPT1jLnN0cm9rZVN0eWxlJiZ0aGlzLmIucHVzaChbMTEsYy5zdHJva2VTdHlsZSxjLmxpbmVXaWR0aCxjLmxpbmVDYXAsYy5saW5lSm9pbixjLm1pdGVyTGltaXQsYy5saW5lRGFzaCxjLmxpbmVEYXNoT2Zmc2V0LCEwLDFdKTtjPWEuYTtkPVNnKGEpO2E9YS5BO3ZhciBlPTAsZjt2YXIgZz0wO2ZvcihmPWMubGVuZ3RoO2c8ZjsrK2cpZT15bih0aGlzLGQsZSxjW2ddLGEpO3FuKHRoaXMsYil9fTtsLmtjPWZ1bmN0aW9uKCl7c24odGhpcyk7dGhpcy5qPW51bGw7dmFyIGE9dGhpcy5LYTtpZihhKXt2YXIgYj10aGlzLmNvb3JkaW5hdGVzLGM7dmFyIGQ9MDtmb3IoYz1iLmxlbmd0aDtkPGM7KytkKWJbZF09YSpNYXRoLnJvdW5kKGJbZF0vYSl9fTtcbmwuWGM9ZnVuY3Rpb24oKXt0aGlzLmN8fCh0aGlzLmM9S2EodGhpcy56YSksMDx0aGlzLmEmJkphKHRoaXMuYyx0aGlzLnJlc29sdXRpb24qKHRoaXMuYSsxKS8yLHRoaXMuYykpO3JldHVybiB0aGlzLmN9O1xubC5TYT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuajthPyhhPWEuYixjLmZpbGxTdHlsZT1HYyhhP2E6RWcpKTpjLmZpbGxTdHlsZT12b2lkIDA7Yj8oYT1iLmIsYy5zdHJva2VTdHlsZT1HYyhhP2E6R2cpLGE9Yi5jLGMubGluZUNhcD12b2lkIDAhPT1hP2E6XCJyb3VuZFwiLGE9Yi5mLGMubGluZURhc2g9YT9hLnNsaWNlKCk6RmcsYT1iLmksYy5saW5lRGFzaE9mZnNldD1hP2E6MCxhPWIuZyxjLmxpbmVKb2luPXZvaWQgMCE9PWE/YTpcInJvdW5kXCIsYT1iLmEsYy5saW5lV2lkdGg9dm9pZCAwIT09YT9hOjEsYj1iLkIsYy5taXRlckxpbWl0PXZvaWQgMCE9PWI/YjoxMCxjLmxpbmVXaWR0aD50aGlzLmEmJih0aGlzLmE9Yy5saW5lV2lkdGgsdGhpcy5jPW51bGwpKTooYy5zdHJva2VTdHlsZT12b2lkIDAsYy5saW5lQ2FwPXZvaWQgMCxjLmxpbmVEYXNoPW51bGwsYy5saW5lRGFzaE9mZnNldD12b2lkIDAsYy5saW5lSm9pbj12b2lkIDAsYy5saW5lV2lkdGg9dm9pZCAwLGMubWl0ZXJMaW1pdD1cbnZvaWQgMCl9O2Z1bmN0aW9uIHpuKGEsYil7dmFyIGM9YS5qLGQ9Yy5maWxsU3R5bGUsZT1jLnN0cm9rZVN0eWxlLGY9Yy5saW5lQ2FwLGc9Yy5saW5lRGFzaCxoPWMubGluZURhc2hPZmZzZXQsaz1jLmxpbmVKb2luLG09Yy5saW5lV2lkdGgsbj1jLm1pdGVyTGltaXQ7aWYodm9pZCAwIT09ZCYmKFwic3RyaW5nXCIhPT10eXBlb2YgZHx8Yy5WZCE9ZCkpe3ZhciBwPVsxMCxkXTtcInN0cmluZ1wiIT09dHlwZW9mIGQmJihiPWIuSygpLHAucHVzaChbYlswXSxiWzNdXSkpO2EuZi5wdXNoKHApO2MuVmQ9Yy5maWxsU3R5bGV9dm9pZCAwPT09ZXx8Yy5FYj09ZSYmYy55Yj09ZiYmamEoYy56YixnKSYmYy5BYj09aCYmYy5CYj09ayYmYy5DYj09bSYmYy5EYj09bnx8KGEuZi5wdXNoKFsxMSxlLG0sZixrLG4sZyxoLCEwLDFdKSxjLkViPWUsYy55Yj1mLGMuemI9ZyxjLkFiPWgsYy5CYj1rLGMuQ2I9bSxjLkRiPW4pfTtmdW5jdGlvbiBBbihhLGIsYyxkKXttbi5jYWxsKHRoaXMsYSxiLGMsZCk7dGhpcy51PXRoaXMudj10aGlzLkQ9bnVsbDt0aGlzLmRhPVwiXCI7dGhpcy5CPXRoaXMuZz0wO3RoaXMubD12b2lkIDA7dGhpcy5MPXRoaXMucz0wO3RoaXMuaT10aGlzLmM9dGhpcy5qPW51bGx9dChBbixtbik7XG5Bbi5wcm90b3R5cGUuUGE9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe2lmKFwiXCIhPT10aGlzLmRhJiZ0aGlzLmkmJih0aGlzLmp8fHRoaXMuYykpe2lmKHRoaXMuail7ZT10aGlzLmo7dmFyIGc9dGhpcy5EO2lmKCFnfHxnLmZpbGxTdHlsZSE9ZS5maWxsU3R5bGUpe3ZhciBoPVsxMCxlLmZpbGxTdHlsZV07dGhpcy5mLnB1c2goaCk7dGhpcy5iLnB1c2goaCk7Zz9nLmZpbGxTdHlsZT1lLmZpbGxTdHlsZTp0aGlzLkQ9e2ZpbGxTdHlsZTplLmZpbGxTdHlsZX19fXRoaXMuYyYmKGU9dGhpcy5jLGc9dGhpcy52LGcmJmcubGluZUNhcD09ZS5saW5lQ2FwJiZnLmxpbmVEYXNoPT1lLmxpbmVEYXNoJiZnLmxpbmVEYXNoT2Zmc2V0PT1lLmxpbmVEYXNoT2Zmc2V0JiZnLmxpbmVKb2luPT1lLmxpbmVKb2luJiZnLmxpbmVXaWR0aD09ZS5saW5lV2lkdGgmJmcubWl0ZXJMaW1pdD09ZS5taXRlckxpbWl0JiZnLnN0cm9rZVN0eWxlPT1lLnN0cm9rZVN0eWxlfHwoaD1bMTEsZS5zdHJva2VTdHlsZSxlLmxpbmVXaWR0aCxcbmUubGluZUNhcCxlLmxpbmVKb2luLGUubWl0ZXJMaW1pdCxlLmxpbmVEYXNoLGUubGluZURhc2hPZmZzZXQsITEsMV0sdGhpcy5mLnB1c2goaCksdGhpcy5iLnB1c2goaCksZz8oZy5saW5lQ2FwPWUubGluZUNhcCxnLmxpbmVEYXNoPWUubGluZURhc2gsZy5saW5lRGFzaE9mZnNldD1lLmxpbmVEYXNoT2Zmc2V0LGcubGluZUpvaW49ZS5saW5lSm9pbixnLmxpbmVXaWR0aD1lLmxpbmVXaWR0aCxnLm1pdGVyTGltaXQ9ZS5taXRlckxpbWl0LGcuc3Ryb2tlU3R5bGU9ZS5zdHJva2VTdHlsZSk6dGhpcy52PXtsaW5lQ2FwOmUubGluZUNhcCxsaW5lRGFzaDplLmxpbmVEYXNoLGxpbmVEYXNoT2Zmc2V0OmUubGluZURhc2hPZmZzZXQsbGluZUpvaW46ZS5saW5lSm9pbixsaW5lV2lkdGg6ZS5saW5lV2lkdGgsbWl0ZXJMaW1pdDplLm1pdGVyTGltaXQsc3Ryb2tlU3R5bGU6ZS5zdHJva2VTdHlsZX0pKTtlPXRoaXMuaTtnPXRoaXMudTtnJiZnLmZvbnQ9PWUuZm9udCYmZy50ZXh0QWxpZ249PVxuZS50ZXh0QWxpZ24mJmcudGV4dEJhc2VsaW5lPT1lLnRleHRCYXNlbGluZXx8KGg9WzEyLGUuZm9udCxlLnRleHRBbGlnbixlLnRleHRCYXNlbGluZV0sdGhpcy5mLnB1c2goaCksdGhpcy5iLnB1c2goaCksZz8oZy5mb250PWUuZm9udCxnLnRleHRBbGlnbj1lLnRleHRBbGlnbixnLnRleHRCYXNlbGluZT1lLnRleHRCYXNlbGluZSk6dGhpcy51PXtmb250OmUuZm9udCx0ZXh0QWxpZ246ZS50ZXh0QWxpZ24sdGV4dEJhc2VsaW5lOmUudGV4dEJhc2VsaW5lfSk7cG4odGhpcyxmKTtlPXRoaXMuY29vcmRpbmF0ZXMubGVuZ3RoO2E9bm4odGhpcyxhLGIsYyxkLCExLCExKTthPVs2LGUsYSx0aGlzLmRhLHRoaXMuZyx0aGlzLkIsdGhpcy5zLHRoaXMuTCwhIXRoaXMuaiwhIXRoaXMuYyx0aGlzLmxdO3RoaXMuZi5wdXNoKGEpO3RoaXMuYi5wdXNoKGEpO3FuKHRoaXMsZil9fTtcbkFuLnByb3RvdHlwZS5NYT1mdW5jdGlvbihhKXtpZihhKXt2YXIgYj1hLnJhKCk7Yj8oYj1iLmIsYj1HYyhiP2I6RWcpLHRoaXMuaj90aGlzLmouZmlsbFN0eWxlPWI6dGhpcy5qPXtmaWxsU3R5bGU6Yn0pOnRoaXMuaj1udWxsO3ZhciBjPWEubmEoKTtpZihjKXtiPWMuYjt2YXIgZD1jLmMsZT1jLmYsZj1jLmksZz1jLmcsaD1jLmE7Yz1jLkI7ZD12b2lkIDAhPT1kP2Q6XCJyb3VuZFwiO2U9ZT9lLnNsaWNlKCk6Rmc7Zj12b2lkIDAhPT1mP2Y6MDtnPXZvaWQgMCE9PWc/ZzpcInJvdW5kXCI7aD12b2lkIDAhPT1oP2g6MTtjPXZvaWQgMCE9PWM/YzoxMDtiPUdjKGI/YjpHZyk7aWYodGhpcy5jKXt2YXIgaz10aGlzLmM7ay5saW5lQ2FwPWQ7ay5saW5lRGFzaD1lO2subGluZURhc2hPZmZzZXQ9ZjtrLmxpbmVKb2luPWc7ay5saW5lV2lkdGg9aDtrLm1pdGVyTGltaXQ9YztrLnN0cm9rZVN0eWxlPWJ9ZWxzZSB0aGlzLmM9e2xpbmVDYXA6ZCxsaW5lRGFzaDplLGxpbmVEYXNoT2Zmc2V0OmYsbGluZUpvaW46ZyxcbmxpbmVXaWR0aDpoLG1pdGVyTGltaXQ6YyxzdHJva2VTdHlsZTpifX1lbHNlIHRoaXMuYz1udWxsO3ZhciBtPWEuZjtiPWEuajtkPWEuYTtlPWEuYztoPWEuaTtjPWEuYjtmPWEub2EoKTtnPWEuZztrPWEuQjthPXZvaWQgMCE9PW0/bTpcIjEwcHggc2Fucy1zZXJpZlwiO2c9dm9pZCAwIT09Zz9nOlwiY2VudGVyXCI7az12b2lkIDAhPT1rP2s6XCJtaWRkbGVcIjt0aGlzLmk/KG09dGhpcy5pLG0uZm9udD1hLG0udGV4dEFsaWduPWcsbS50ZXh0QmFzZWxpbmU9ayk6dGhpcy5pPXtmb250OmEsdGV4dEFsaWduOmcsdGV4dEJhc2VsaW5lOmt9O3RoaXMuZGE9dm9pZCAwIT09Zj9mOlwiXCI7dGhpcy5nPXZvaWQgMCE9PWI/YjowO3RoaXMuQj12b2lkIDAhPT1kP2Q6MDt0aGlzLmw9dm9pZCAwIT09ZT9lOiExO3RoaXMucz12b2lkIDAhPT1oP2g6MDt0aGlzLkw9dm9pZCAwIT09Yz9jOjF9ZWxzZSB0aGlzLmRhPVwiXCJ9O2Z1bmN0aW9uIEJuKGEsYixjLGQsZSl7dGhpcy5CPWE7dGhpcy5mPWI7dGhpcy5pPWQ7dGhpcy5nPWM7dGhpcy5qPWU7dGhpcy5iPXt9O3RoaXMuYT1IYygxLDEpO3RoaXMuYz12ZygpfXQoQm4sWGcpO3ZhciBDbj17MDpbWyEwXV19O2Z1bmN0aW9uIERuKGEsYixjKXt2YXIgZCxlPU1hdGguZmxvb3IoYS5sZW5ndGgvMik7aWYoYj49ZSlmb3IoZD1lO2Q8YjtkKyspYVtkXVtjXT0hMDtlbHNlIGlmKGI8ZSlmb3IoZD1iKzE7ZDxlO2QrKylhW2RdW2NdPSEwfVxuZnVuY3Rpb24gRW4oYSl7aWYodm9pZCAwIT09Q25bYV0pcmV0dXJuIENuW2FdO2Zvcih2YXIgYj0yKmErMSxjPUFycmF5KGIpLGQ9MDtkPGI7ZCsrKWNbZF09QXJyYXkoYik7Yj1hO2Zvcih2YXIgZT1kPTA7Yj49ZDspRG4oYyxhK2IsYStkKSxEbihjLGErZCxhK2IpLERuKGMsYS1kLGErYiksRG4oYyxhLWIsYStkKSxEbihjLGEtYixhLWQpLERuKGMsYS1kLGEtYiksRG4oYyxhK2QsYS1iKSxEbihjLGErYixhLWQpLGQrKyxlKz0xKzIqZCwwPDIqKGUtYikrMSYmKC0tYixlKz0xLTIqYik7cmV0dXJuIENuW2FdPWN9ZnVuY3Rpb24gRm4oYSl7Zm9yKHZhciBiIGluIGEuYil7dmFyIGM9YS5iW2JdLGQ7Zm9yKGQgaW4gYyljW2RdLmtjKCl9fVxuZnVuY3Rpb24gR24oYSxiLGMsZCxlLGYpe2U9TWF0aC5yb3VuZChlKTt2YXIgZz0yKmUrMSxoPXlnKGEuYyxlKy41LGUrLjUsMS9jLC0xL2MsLWQsLWJbMF0sLWJbMV0pLGs9YS5hO2suY2FudmFzLndpZHRoIT09Z3x8ay5jYW52YXMuaGVpZ2h0IT09Zz8oay5jYW52YXMud2lkdGg9ZyxrLmNhbnZhcy5oZWlnaHQ9Zyk6ay5jbGVhclJlY3QoMCwwLGcsZyk7aWYodm9pZCAwIT09YS5qKXt2YXIgbT1IYSgpO0lhKG0sYik7SmEobSxjKihhLmorZSksbSl9dmFyIG49RW4oZSk7cmV0dXJuIEhuKGEsayxoLGQsZnVuY3Rpb24oYSl7Zm9yKHZhciBiPWsuZ2V0SW1hZ2VEYXRhKDAsMCxnLGcpLmRhdGEsYz0wO2M8ZztjKyspZm9yKHZhciBkPTA7ZDxnO2QrKylpZihuW2NdW2RdJiYwPGJbNCooZCpnK2MpKzNdKXtpZihhPWYoYSkpcmV0dXJuIGE7ay5jbGVhclJlY3QoMCwwLGcsZyk7cmV0dXJufX0sbSl9XG5mdW5jdGlvbiBJbihhLGIsYyl7dmFyIGQ9dm9pZCAwIT09Yj9iLnRvU3RyaW5nKCk6XCIwXCI7Yj1hLmJbZF07dm9pZCAwPT09YiYmKGI9e30sYS5iW2RdPWIpO2Q9YltjXTt2b2lkIDA9PT1kJiYoZD1uZXcgSm5bY10oYS5CLGEuZixhLmcsYS5pKSxiW2NdPWQpO3JldHVybiBkfVxuZnVuY3Rpb24gS24oYSxiLGMsZCxlLGYpe3ZhciBnPU9iamVjdC5rZXlzKGEuYikubWFwKE51bWJlcik7Zy5zb3J0KGZhKTt2YXIgaD1hLmYsaz1oWzBdLG09aFsxXSxuPWhbMl07aD1oWzNdO2s9W2ssbSxrLGgsbixoLG4sbV07dmUoaywwLDgsMixkLGspO2Iuc2F2ZSgpO2IuYmVnaW5QYXRoKCk7Yi5tb3ZlVG8oa1swXSxrWzFdKTtiLmxpbmVUbyhrWzJdLGtbM10pO2IubGluZVRvKGtbNF0sa1s1XSk7Yi5saW5lVG8oa1s2XSxrWzddKTtiLmNsaXAoKTtrPTA7Zm9yKG09Zy5sZW5ndGg7azxtOysrayl7dmFyIHA9YS5iW2dba10udG9TdHJpbmcoKV07bj0wO2ZvcihoPVdnLmxlbmd0aDtuPGg7KytuKXt2YXIgcj1wW1dnW25dXTt2b2lkIDAhPT1yJiZybihyLGIsYyxkLGUsZixyLmYsdm9pZCAwLHZvaWQgMCl9fWIucmVzdG9yZSgpfVxuZnVuY3Rpb24gSG4oYSxiLGMsZCxlLGYpe3ZhciBnPXt9LGg9T2JqZWN0LmtleXMoYS5iKS5tYXAoTnVtYmVyKTtoLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi1hfSk7dmFyIGssbTt2YXIgbj0wO2ZvcihrPWgubGVuZ3RoO248azsrK24pe3ZhciBwPWEuYltoW25dLnRvU3RyaW5nKCldO2ZvcihtPVdnLmxlbmd0aC0xOzA8PW07LS1tKXt2YXIgcj1wW1dnW21dXTtpZih2b2lkIDAhPT1yJiYocj1ybihyLGIsMSxjLGQsZyxyLmIsZSxmKSkpcmV0dXJuIHJ9fX12YXIgSm49e0NpcmNsZTp4bixEZWZhdWx0Om1uLEltYWdlOnRuLExpbmVTdHJpbmc6dW4sUG9seWdvbjp4bixUZXh0OkFufTtmdW5jdGlvbiBMbihhKXttYy5jYWxsKHRoaXMpO3RoaXMuYT1hfXQoTG4sbWMpO0xuLnByb3RvdHlwZS5sPW5hO2Z1bmN0aW9uIE1uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCxlKXtyZXR1cm4gTm4oYSxiLGQsZSxmdW5jdGlvbihhKXtjW2RdfHwoY1tkXT17fSk7Y1tkXVthLk5hLnRvU3RyaW5nKCldPWF9KX19ZnVuY3Rpb24gT24oYSxiKXtiLmpkKCkmJmEucG9zdFJlbmRlckZ1bmN0aW9ucy5wdXNoKGZ1bmN0aW9uKGEsYixlKXtiPXYoYSkudG9TdHJpbmcoKTtiIGluIGUudXNlZFRpbGVzJiZhLkZiKGUudmlld1N0YXRlLnByb2plY3Rpb24sZS51c2VkVGlsZXNbYl0pfS5iaW5kKG51bGwsYikpfWZ1bmN0aW9uIFBuKGEsYil7aWYoYil7dmFyIGM7dmFyIGQ9MDtmb3IoYz1iLmxlbmd0aDtkPGM7KytkKXt2YXIgZT1iW2RdO2FbdihlKS50b1N0cmluZygpXT1lfX19XG5mdW5jdGlvbiBRbihhLGIpe2I9Yi4kO3ZvaWQgMCE9PWImJihcInN0cmluZ1wiPT09dHlwZW9mIGI/YS5sb2dvc1tiXT1cIlwiOmImJih3KFwic3RyaW5nXCI9PXR5cGVvZiBiLmhyZWYsNDQpLHcoXCJzdHJpbmdcIj09dHlwZW9mIGIuc3JjLDQ1KSxhLmxvZ29zW2Iuc3JjXT1iLmhyZWYpKX07ZnVuY3Rpb24gUm4oYSl7TG4uY2FsbCh0aGlzLGEpO3RoaXMuWD12ZygpfXQoUm4sTG4pO2Z1bmN0aW9uIFNuKGEsYixjKXt2YXIgZD1iLnBpeGVsUmF0aW8sZT1iLnNpemVbMF0qZCxmPWIuc2l6ZVsxXSpkLGc9Yi52aWV3U3RhdGUucm90YXRpb24saD1XYShjKSxrPVtjWzJdLGNbM11dLG09W2NbMl0sY1sxXV07Yz1bY1swXSxjWzFdXTt4ZyhiLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLGgpO3hnKGIuY29vcmRpbmF0ZVRvUGl4ZWxUcmFuc2Zvcm0sayk7eGcoYi5jb29yZGluYXRlVG9QaXhlbFRyYW5zZm9ybSxtKTt4ZyhiLmNvb3JkaW5hdGVUb1BpeGVsVHJhbnNmb3JtLGMpO2Euc2F2ZSgpO0hnKGEsLWcsZS8yLGYvMik7YS5iZWdpblBhdGgoKTthLm1vdmVUbyhoWzBdKmQsaFsxXSpkKTthLmxpbmVUbyhrWzBdKmQsa1sxXSpkKTthLmxpbmVUbyhtWzBdKmQsbVsxXSpkKTthLmxpbmVUbyhjWzBdKmQsY1sxXSpkKTthLmNsaXAoKTtIZyhhLGcsZS8yLGYvMil9XG5mdW5jdGlvbiBUbihhLGIsYyxkLGUpe3ZhciBmPWEuYTtpZihsYyhmLGIpKXt2YXIgZz1kLnNpemVbMF0qZC5waXhlbFJhdGlvLGg9ZC5zaXplWzFdKmQucGl4ZWxSYXRpbyxrPWQudmlld1N0YXRlLnJvdGF0aW9uO0hnKGMsLWssZy8yLGgvMik7YT1lP2U6VW4oYSxkLDApO2YuZihuZXcgRGcoYixuZXcgSmcoYyxkLnBpeGVsUmF0aW8sZC5leHRlbnQsYSxkLnZpZXdTdGF0ZS5yb3RhdGlvbiksZCxjLG51bGwpKTtIZyhjLGssZy8yLGgvMil9fVJuLnByb3RvdHlwZS5MPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMubChhLGIsMCxzZSx0aGlzKSlyZXR1cm4gYy5jYWxsKGQsdGhpcy5hLG51bGwpfTtmdW5jdGlvbiBVbihhLGIsYyl7dmFyIGQ9Yi52aWV3U3RhdGUsZT1iLnBpeGVsUmF0aW8sZj1lL2QucmVzb2x1dGlvbjtyZXR1cm4geWcoYS5YLGUqYi5zaXplWzBdLzIsZSpiLnNpemVbMV0vMixmLC1mLC1kLnJvdGF0aW9uLC1kLmNlbnRlclswXStjLC1kLmNlbnRlclsxXSl9O2Z1bmN0aW9uIFZuKGEsYil7cmV0dXJuIHYoYSktdihiKX1mdW5jdGlvbiBXbihhLGIpe2E9LjUqYS9iO3JldHVybiBhKmF9ZnVuY3Rpb24gWG4oYSxiLGMsZCxlLGYpe3ZhciBnPSExLGg7aWYoaD1jLmhhKCkpe3ZhciBrPWgubmMoKTsyPT1rfHwzPT1rP2guaGYoZSxmKTooMD09ayYmaC5sb2FkKCksaC5qZShlLGYpLGc9ITApfWlmKGU9KDAsYy5BYSkoYikpaWYoZD1lLmFkKGQpLGMuJGMoKSlZbihhLGQsYyxiKTtlbHNlKDAsWm5bZC5JKCldKShhLGQsYyxiKTtyZXR1cm4gZ31mdW5jdGlvbiBZbihhLGIsYyxkKXtpZihcIkdlb21ldHJ5Q29sbGVjdGlvblwiPT1iLkkoKSl7Yj14aShiLmEpO2Zvcih2YXIgZT0wLGY9Yi5sZW5ndGg7ZTxmOysrZSlZbihhLGJbZV0sYyxkKX1lbHNlIEluKGEsYy5wYSgpLFwiRGVmYXVsdFwiKS5YZChiLGQsYy4kYygpKX1cbnZhciBabj17UG9pbnQ6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yy5oYSgpO2lmKGUpe2lmKDIhPWUubmMoKSlyZXR1cm47dmFyIGY9SW4oYSxjLnBhKCksXCJJbWFnZVwiKTtmLndjKGUpO2YuVGMoYixkKX1pZihlPWMub2EoKSlhPUluKGEsYy5wYSgpLFwiVGV4dFwiKSxhLk1hKGUpLGEuUGEoYi5vLDAsMiwyLGIsZCl9LExpbmVTdHJpbmc6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yy5uYSgpO2lmKGUpe3ZhciBmPUluKGEsYy5wYSgpLFwiTGluZVN0cmluZ1wiKTtmLlNhKG51bGwsZSk7Zi5QYyhiLGQpfWlmKGU9Yy5vYSgpKWE9SW4oYSxjLnBhKCksXCJUZXh0XCIpLGEuTWEoZSksYS5QYShRZyhiKSwwLDIsMixiLGQpfSxQb2x5Z29uOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMucmEoKSxmPWMubmEoKTtpZihlfHxmKXt2YXIgZz1JbihhLGMucGEoKSxcIlBvbHlnb25cIik7Zy5TYShlLGYpO2cuVWMoYixkKX1pZihlPWMub2EoKSlhPUluKGEsYy5wYSgpLFwiVGV4dFwiKSxhLk1hKGUpLGEuUGEoWmUoYiksXG4wLDIsMixiLGQpfSxNdWx0aVBvaW50OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMuaGEoKTtpZihlKXtpZigyIT1lLm5jKCkpcmV0dXJuO3ZhciBmPUluKGEsYy5wYSgpLFwiSW1hZ2VcIik7Zi53YyhlKTtmLlJjKGIsZCl9aWYoZT1jLm9hKCkpYT1JbihhLGMucGEoKSxcIlRleHRcIiksYS5NYShlKSxjPWIubyxhLlBhKGMsMCxjLmxlbmd0aCxiLkEsYixkKX0sTXVsdGlMaW5lU3RyaW5nOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWMubmEoKTtpZihlKXt2YXIgZj1JbihhLGMucGEoKSxcIkxpbmVTdHJpbmdcIik7Zi5TYShudWxsLGUpO2YuUWMoYixkKX1pZihlPWMub2EoKSlhPUluKGEsYy5wYSgpLFwiVGV4dFwiKSxhLk1hKGUpLGM9UmcoYiksYS5QYShjLDAsYy5sZW5ndGgsMixiLGQpfSxNdWx0aVBvbHlnb246ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yy5yYSgpLGY9Yy5uYSgpO2lmKGZ8fGUpe3ZhciBnPUluKGEsYy5wYSgpLFwiUG9seWdvblwiKTtnLlNhKGUsZik7Zy5TYyhiLGQpfWlmKGU9XG5jLm9hKCkpYT1JbihhLGMucGEoKSxcIlRleHRcIiksYS5NYShlKSxjPVRnKGIpLGEuUGEoYywwLGMubGVuZ3RoLDIsYixkKX0sR2VvbWV0cnlDb2xsZWN0aW9uOmZ1bmN0aW9uKGEsYixjLGQpe2I9Yi5hO3ZhciBlO3ZhciBmPTA7Zm9yKGU9Yi5sZW5ndGg7ZjxlOysrZikoMCxabltiW2ZdLkkoKV0pKGEsYltmXSxjLGQpfSxDaXJjbGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9Yy5yYSgpLGY9Yy5uYSgpO2lmKGV8fGYpe3ZhciBnPUluKGEsYy5wYSgpLFwiQ2lyY2xlXCIpO2cuU2EoZSxmKTtnLk9jKGIsZCl9aWYoZT1jLm9hKCkpYT1JbihhLGMucGEoKSxcIlRleHRcIiksYS5NYShlKSxhLlBhKGIuYmEoKSwwLDIsMixiLGQpfX07ZnVuY3Rpb24gJG4oYSl7Um4uY2FsbCh0aGlzLGEpO3RoaXMuYz0hMTt0aGlzLko9LTE7dGhpcy5DPU5hTjt0aGlzLnY9SGEoKTt0aGlzLmk9dGhpcy51PW51bGw7dGhpcy5nPUhjKCl9dCgkbixSbik7XG4kbi5wcm90b3R5cGUuRD1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS5leHRlbnQsZT1hLnBpeGVsUmF0aW8sZj1iLmZkP2Euc2tpcHBlZEZlYXR1cmVVaWRzOnt9LGc9YS52aWV3U3RhdGUsaD1nLnByb2plY3Rpb24saz1nLnJvdGF0aW9uLG09aC5LKCksbj10aGlzLmEuY2EoKSxwPVVuKHRoaXMsYSwwKTtUbih0aGlzLFwicHJlY29tcG9zZVwiLGMsYSxwKTt2YXIgcj1iLmV4dGVudDsoZz12b2lkIDAhPT1yKSYmU24oYyxhLHIpO3ZhciB1PXRoaXMuaTtpZih1JiYhYmIodS5iKSl7dmFyIEQ9cj0wLEY9MSE9PWIub3BhY2l0eSxDPWxjKHRoaXMuYSxcInJlbmRlclwiKTtpZihGfHxDKXt2YXIgQT1jLmNhbnZhcy53aWR0aDt2YXIgSD1jLmNhbnZhcy5oZWlnaHQ7aWYoayl7dmFyIEs9TWF0aC5yb3VuZChNYXRoLnNxcnQoQSpBK0gqSCkpO3I9KEstQSkvMjtEPShLLUgpLzI7QT1IPUt9dGhpcy5nLmNhbnZhcy53aWR0aD1BO3RoaXMuZy5jYW52YXMuaGVpZ2h0PUg7QT10aGlzLmd9ZWxzZSBBPWM7XG5IPUEuZ2xvYmFsQWxwaGE7Rnx8KEEuZ2xvYmFsQWxwaGE9Yi5vcGFjaXR5KTtBIT1jJiZBLnRyYW5zbGF0ZShyLEQpO0s9YS5zaXplWzBdKmU7dmFyIGNhPWEuc2l6ZVsxXSplO0hnKEEsLWssSy8yLGNhLzIpO0tuKHUsQSxlLHAsayxmKTtpZihuLkQmJmguYSYmIU1hKG0sZCkpe2g9ZFswXTtuPVhhKG0pO2Zvcih2YXIgUj0wO2g8bVswXTspLS1SLHA9bipSLHA9VW4odGhpcyxhLHApLEtuKHUsQSxlLHAsayxmKSxoKz1uO1I9MDtmb3IoaD1kWzJdO2g+bVsyXTspKytSLHA9bipSLHA9VW4odGhpcyxhLHApLEtuKHUsQSxlLHAsayxmKSxoLT1uO3A9VW4odGhpcyxhLDApfUhnKEEsayxLLzIsY2EvMik7QSE9YyYmKEMmJlRuKHRoaXMsXCJyZW5kZXJcIixBLGEscCksRj8oZD1jLmdsb2JhbEFscGhhLGMuZ2xvYmFsQWxwaGE9Yi5vcGFjaXR5LGMuZHJhd0ltYWdlKEEuY2FudmFzLC1yLC1EKSxjLmdsb2JhbEFscGhhPWQpOmMuZHJhd0ltYWdlKEEuY2FudmFzLC1yLC1EKSxBLnRyYW5zbGF0ZSgtcixcbi1EKSk7Rnx8KEEuZ2xvYmFsQWxwaGE9SCl9ZyYmYy5yZXN0b3JlKCk7VG4odGhpcyxcInBvc3Rjb21wb3NlXCIsYyxhLHApfTskbi5wcm90b3R5cGUubD1mdW5jdGlvbihhLGIsYyxkLGUpe2lmKHRoaXMuaSl7dmFyIGY9dGhpcy5hLGc9e307cmV0dXJuIEduKHRoaXMuaSxhLGIudmlld1N0YXRlLnJlc29sdXRpb24sYi52aWV3U3RhdGUucm90YXRpb24sYyxmdW5jdGlvbihhKXt2YXIgYj12KGEpLnRvU3RyaW5nKCk7aWYoIShiIGluIGcpKXJldHVybiBnW2JdPSEwLGQuY2FsbChlLGEsZil9KX19OyRuLnByb3RvdHlwZS5zPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5hO2EubCgpJiZcInJlYWR5XCI9PWEuYmQoKSYmdGhpcy5iKCl9O1xuJG4ucHJvdG90eXBlLkg9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5hLGM9Yi5jYSgpO1BuKGEuYXR0cmlidXRpb25zLGMuQyk7UW4oYSxjKTt2YXIgZD1hLnZpZXdIaW50c1swXSxlPWEudmlld0hpbnRzWzFdLGY9Yi5ILGc9Yi5KO2lmKCF0aGlzLmMmJiFmJiZkfHwhZyYmZSlyZXR1cm4hMDtmPWEuZXh0ZW50O3ZhciBoPWEudmlld1N0YXRlO2c9aC5wcm9qZWN0aW9uO3ZhciBrPWgucmVzb2x1dGlvbixtPWEucGl4ZWxSYXRpbztkPWIuajt2YXIgbj1iLnM7ZT1iLmdldChhbyk7dm9pZCAwPT09ZSYmKGU9Vm4pO2Y9SmEoZixuKmspO249aC5wcm9qZWN0aW9uLksoKTtjLkQmJmgucHJvamVjdGlvbi5hJiYhTWEobixhLmV4dGVudCkmJihhPU1hdGgubWF4KFhhKGYpLzIsWGEobikpLGZbMF09blswXS1hLGZbMl09blsyXSthKTtpZighdGhpcy5jJiZ0aGlzLkM9PWsmJnRoaXMuSj09ZCYmdGhpcy51PT1lJiZNYSh0aGlzLnYsZikpcmV0dXJuITA7dGhpcy5pPW51bGw7dGhpcy5jPSExO3ZhciBwPVxubmV3IEJuKC41KmsvbSxmLGssYy5rYSxiLnMpO2MuZWQoZixrLGcpO2E9ZnVuY3Rpb24oYSl7dmFyIGM9YS5hYygpO2lmKGMpdmFyIGQ9Yy5jYWxsKGEsayk7ZWxzZShjPWIuYWMoKSkmJihkPWMoYSxrKSk7aWYoZCl7aWYoZCl7Yz0hMTtpZihBcnJheS5pc0FycmF5KGQpKWZvcih2YXIgZT0wLGY9ZC5sZW5ndGg7ZTxmOysrZSljPVhuKHAsYSxkW2VdLFduKGssbSksdGhpcy5zLHRoaXMpfHxjO2Vsc2UgYz1YbihwLGEsZCxXbihrLG0pLHRoaXMucyx0aGlzKXx8YzthPWN9ZWxzZSBhPSExO3RoaXMuYz10aGlzLmN8fGF9fS5iaW5kKHRoaXMpO2lmKGUpe3ZhciByPVtdO2JvKGMsZixmdW5jdGlvbihhKXtyLnB1c2goYSl9LHRoaXMpO3Iuc29ydChlKTtjPTA7Zm9yKGc9ci5sZW5ndGg7YzxnOysrYylhKHJbY10pfWVsc2UgYm8oYyxmLGEsdGhpcyk7Rm4ocCk7dGhpcy5DPWs7dGhpcy5KPWQ7dGhpcy51PWU7dGhpcy52PWY7dGhpcy5pPXA7cmV0dXJuITB9O2Z1bmN0aW9uIGNvKGEpe2E9YT9hOnt9O3ZhciBiPVphKHt9LGEpO2RlbGV0ZSBiLnN0eWxlO2RlbGV0ZSBiLnJlbmRlckJ1ZmZlcjtkZWxldGUgYi51cGRhdGVXaGlsZUFuaW1hdGluZztkZWxldGUgYi51cGRhdGVXaGlsZUludGVyYWN0aW5nO3NnLmNhbGwodGhpcyxiKTt0aGlzLnM9dm9pZCAwIT09YS5yZW5kZXJCdWZmZXI/YS5yZW5kZXJCdWZmZXI6MTAwO3RoaXMudj1udWxsO3RoaXMuRD12b2lkIDA7dGhpcy51KGEuc3R5bGUpO3RoaXMuSD12b2lkIDAhPT1hLnVwZGF0ZVdoaWxlQW5pbWF0aW5nP2EudXBkYXRlV2hpbGVBbmltYXRpbmc6ITE7dGhpcy5KPXZvaWQgMCE9PWEudXBkYXRlV2hpbGVJbnRlcmFjdGluZz9hLnVwZGF0ZVdoaWxlSW50ZXJhY3Rpbmc6ITF9dChjbyxzZyk7Y28ucHJvdG90eXBlLk5jPWZ1bmN0aW9uKGEpe3ZhciBiPW51bGw7XCJjYW52YXNcIj09PWEuSSgpJiYoYj1uZXcgJG4odGhpcykpO3JldHVybiBifTtjby5wcm90b3R5cGUuYWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5EfTtcbmNvLnByb3RvdHlwZS51PWZ1bmN0aW9uKGEpe3RoaXMudj12b2lkIDAhPT1hP2E6SWg7dGhpcy5EPW51bGw9PT1hP3ZvaWQgMDpHaCh0aGlzLnYpO3RoaXMuYigpfTt2YXIgYW89XCJyZW5kZXJPcmRlclwiO2Z1bmN0aW9uIGVvKCl7cmV0dXJuW1stSW5maW5pdHksLUluZmluaXR5LEluZmluaXR5LEluZmluaXR5XV19O2Z1bmN0aW9uIGZvKGEpe25jLmNhbGwodGhpcyk7dGhpcy5KPUFiKGEucHJvamVjdGlvbik7dGhpcy5DPWdvKGEuYXR0cmlidXRpb25zKTt0aGlzLiQ9YS5sb2dvO3RoaXMuZ2E9dm9pZCAwIT09YS5zdGF0ZT9hLnN0YXRlOlwicmVhZHlcIjt0aGlzLkQ9dm9pZCAwIT09YS53cmFwWD9hLndyYXBYOiExfXQoZm8sbmMpO2Z1bmN0aW9uIGdvKGEpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm5bbmV3IFViKHtodG1sOmF9KV07aWYoYSBpbnN0YW5jZW9mIFViKXJldHVyblthXTtpZihBcnJheS5pc0FycmF5KGEpKXtmb3IodmFyIGI9YS5sZW5ndGgsYz1BcnJheShiKSxkPTA7ZDxiO2QrKyl7dmFyIGU9YVtkXTtjW2RdPVwic3RyaW5nXCI9PT10eXBlb2YgZT9uZXcgVWIoe2h0bWw6ZX0pOmV9cmV0dXJuIGN9cmV0dXJuIG51bGx9Zm8ucHJvdG90eXBlLlg9bmE7Zm8ucHJvdG90eXBlLmxjPWZ1bmN0aW9uKCl7dGhpcy5iKCl9O2Z1bmN0aW9uIGhvKGEpe2E9YXx8e307Zm8uY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YS5hdHRyaWJ1dGlvbnMsbG9nbzphLmxvZ28scHJvamVjdGlvbjp2b2lkIDAsc3RhdGU6XCJyZWFkeVwiLHdyYXBYOnZvaWQgMCE9PWEud3JhcFg/YS53cmFwWDohMH0pO3RoaXMudj1uYTt0aGlzLnU9YS5mb3JtYXQ7dGhpcy5rYT12b2lkIDA9PWEub3ZlcmxhcHM/ITA6YS5vdmVybGFwczt0aGlzLlY9YS51cmw7YS5sb2FkZXI/dGhpcy52PWEubG9hZGVyOnZvaWQgMCE9PXRoaXMuViYmKHcodGhpcy51LDcpLHRoaXMudj1ZaCh0aGlzLlYsdGhpcy51KSk7dGhpcy5zYT1hLnN0cmF0ZWd5P2Euc3RyYXRlZ3k6ZW87dmFyIGI9dm9pZCAwIT09YS51c2VTcGF0aWFsSW5kZXg/YS51c2VTcGF0aWFsSW5kZXg6ITA7dGhpcy5hPWI/bmV3ICRnOm51bGw7dGhpcy5IPW5ldyAkZzt0aGlzLmM9e307dGhpcy5nPXt9O3RoaXMubD17fTt0aGlzLnM9e307dGhpcy5pPW51bGw7aWYoYS5mZWF0dXJlcyBpbnN0YW5jZW9mXG5zYyl7dmFyIGM9YS5mZWF0dXJlczt2YXIgZD1jLmF9ZWxzZSBBcnJheS5pc0FycmF5KGEuZmVhdHVyZXMpJiYoZD1hLmZlYXR1cmVzKTtifHxjfHwoYz1uZXcgc2MoZCkpO2QmJmlvKHRoaXMsZCk7YyYmam8odGhpcyxjKX10KGhvLGZvKTtsPWhvLnByb3RvdHlwZTtsLk9hPWZ1bmN0aW9uKGEpe3ZhciBiPXYoYSkudG9TdHJpbmcoKTtpZihrbyh0aGlzLGIsYSkpe2xvKHRoaXMsYixhKTt2YXIgYz1hLlAoKTtjPyhiPWMuSygpLHRoaXMuYSYmdGhpcy5hLmFhKGIsYSkpOnRoaXMuY1tiXT1hO3RoaXMuZihuZXcgbW8oXCJhZGRmZWF0dXJlXCIsYSkpfXRoaXMuYigpfTtmdW5jdGlvbiBsbyhhLGIsYyl7YS5zW2JdPVt5KGMsXCJjaGFuZ2VcIixhLkplLGEpLHkoYyxcInByb3BlcnR5Y2hhbmdlXCIsYS5KZSxhKV19XG5mdW5jdGlvbiBrbyhhLGIsYyl7dmFyIGQ9ITAsZT1jLmE7dm9pZCAwIT09ZT9lLnRvU3RyaW5nKClpbiBhLmc/ZD0hMTphLmdbZS50b1N0cmluZygpXT1jOih3KCEoYiBpbiBhLmwpLDMwKSxhLmxbYl09Yyk7cmV0dXJuIGR9bC53Yj1mdW5jdGlvbihhKXtpbyh0aGlzLGEpO3RoaXMuYigpfTtmdW5jdGlvbiBpbyhhLGIpe3ZhciBjLGQ9W10sZT1bXSxmPVtdO3ZhciBnPTA7Zm9yKGM9Yi5sZW5ndGg7ZzxjO2crKyl7dmFyIGg9YltnXTt2YXIgaz12KGgpLnRvU3RyaW5nKCk7a28oYSxrLGgpJiZlLnB1c2goaCl9Zz0wO2ZvcihjPWUubGVuZ3RoO2c8YztnKyspaD1lW2ddLGs9dihoKS50b1N0cmluZygpLGxvKGEsayxoKSwoYj1oLlAoKSk/KGs9Yi5LKCksZC5wdXNoKGspLGYucHVzaChoKSk6YS5jW2tdPWg7YS5hJiZhLmEubG9hZChkLGYpO2c9MDtmb3IoYz1lLmxlbmd0aDtnPGM7ZysrKWEuZihuZXcgbW8oXCJhZGRmZWF0dXJlXCIsZVtnXSkpfVxuZnVuY3Rpb24gam8oYSxiKXt2YXIgYz0hMTt5KGEsXCJhZGRmZWF0dXJlXCIsZnVuY3Rpb24oYSl7Y3x8KGM9ITAsYi5wdXNoKGEuZmVhdHVyZSksYz0hMSl9KTt5KGEsXCJyZW1vdmVmZWF0dXJlXCIsZnVuY3Rpb24oYSl7Y3x8KGM9ITAsYi5yZW1vdmUoYS5mZWF0dXJlKSxjPSExKX0pO3koYixcImFkZFwiLGZ1bmN0aW9uKGEpe2N8fChjPSEwLHRoaXMuT2EoYS5lbGVtZW50KSxjPSExKX0sYSk7eShiLFwicmVtb3ZlXCIsZnVuY3Rpb24oYSl7Y3x8KGM9ITAsdGhpcy5JYShhLmVsZW1lbnQpLGM9ITEpfSxhKTthLmk9Yn1cbmwuY2xlYXI9ZnVuY3Rpb24oYSl7aWYoYSl7Zm9yKHZhciBiIGluIHRoaXMucyl0aGlzLnNbYl0uZm9yRWFjaChaYik7dGhpcy5pfHwodGhpcy5zPXt9LHRoaXMuZz17fSx0aGlzLmw9e30pfWVsc2UgaWYodGhpcy5hKXt0aGlzLmEuZm9yRWFjaCh0aGlzLnhkLHRoaXMpO2Zvcih2YXIgYyBpbiB0aGlzLmMpdGhpcy54ZCh0aGlzLmNbY10pfXRoaXMuaSYmdGhpcy5pLmNsZWFyKCk7dGhpcy5hJiZ0aGlzLmEuY2xlYXIoKTt0aGlzLkguY2xlYXIoKTt0aGlzLmM9e307dGhpcy5mKG5ldyBtbyhcImNsZWFyXCIpKTt0aGlzLmIoKX07ZnVuY3Rpb24gYm8oYSxiLGMsZCl7YS5hP2VoKGEuYSxiLGMsZCk6YS5pJiZhLmkuZm9yRWFjaChjLGQpfWwubWM9ZnVuY3Rpb24oKXtpZih0aGlzLmkpdmFyIGE9dGhpcy5pLmE7ZWxzZSB0aGlzLmEmJihhPWJoKHRoaXMuYSksYmIodGhpcy5jKXx8aWEoYSxhYih0aGlzLmMpKSk7cmV0dXJuIGF9O2wuSz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5hLksoYSl9O1xubC5nZz1mdW5jdGlvbihhKXthPXRoaXMuZ1thLnRvU3RyaW5nKCldO3JldHVybiB2b2lkIDAhPT1hP2E6bnVsbH07bC5YaD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnV9O2wuSmU9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDt2YXIgYj12KGEpLnRvU3RyaW5nKCksYz1hLlAoKTtjPyhjPWMuSygpLGIgaW4gdGhpcy5jPyhkZWxldGUgdGhpcy5jW2JdLHRoaXMuYSYmdGhpcy5hLmFhKGMsYSkpOnRoaXMuYSYmYWgodGhpcy5hLGMsYSkpOmIgaW4gdGhpcy5jfHwodGhpcy5hJiZ0aGlzLmEucmVtb3ZlKGEpLHRoaXMuY1tiXT1hKTtjPWEuYTt2b2lkIDAhPT1jPyhjPWMudG9TdHJpbmcoKSxiIGluIHRoaXMubD8oZGVsZXRlIHRoaXMubFtiXSx0aGlzLmdbY109YSk6dGhpcy5nW2NdIT09YSYmKG5vKHRoaXMsYSksdGhpcy5nW2NdPWEpKTpiIGluIHRoaXMubHx8KG5vKHRoaXMsYSksdGhpcy5sW2JdPWEpO3RoaXMuYigpO3RoaXMuZihuZXcgbW8oXCJjaGFuZ2VmZWF0dXJlXCIsYSkpfTtcbmwuZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMuSDthPXRoaXMuc2EoYSxiKTt2YXIgZTt2YXIgZj0wO2ZvcihlPWEubGVuZ3RoO2Y8ZTsrK2Ype3ZhciBnPWFbZl07ZWgoZCxnLGZ1bmN0aW9uKGEpe3JldHVybiBNYShhLmV4dGVudCxnKX0pfHwodGhpcy52LmNhbGwodGhpcyxnLGIsYyksZC5hYShnLHtleHRlbnQ6Zy5zbGljZSgpfSkpfX07bC5JYT1mdW5jdGlvbihhKXt2YXIgYj12KGEpLnRvU3RyaW5nKCk7YiBpbiB0aGlzLmM/ZGVsZXRlIHRoaXMuY1tiXTp0aGlzLmEmJnRoaXMuYS5yZW1vdmUoYSk7dGhpcy54ZChhKTt0aGlzLmIoKX07bC54ZD1mdW5jdGlvbihhKXt2YXIgYj12KGEpLnRvU3RyaW5nKCk7dGhpcy5zW2JdLmZvckVhY2goWmIpO2RlbGV0ZSB0aGlzLnNbYl07dmFyIGM9YS5hO3ZvaWQgMCE9PWM/ZGVsZXRlIHRoaXMuZ1tjLnRvU3RyaW5nKCldOmRlbGV0ZSB0aGlzLmxbYl07dGhpcy5mKG5ldyBtbyhcInJlbW92ZWZlYXR1cmVcIixhKSl9O1xuZnVuY3Rpb24gbm8oYSxiKXtmb3IodmFyIGMgaW4gYS5nKWlmKGEuZ1tjXT09PWIpe2RlbGV0ZSBhLmdbY107YnJlYWt9fWZ1bmN0aW9uIG1vKGEsYil7aWMuY2FsbCh0aGlzLGEpO3RoaXMuZmVhdHVyZT1ifXQobW8saWMpO2Z1bmN0aW9uIG9vKGEpe0FmLmNhbGwodGhpcyx7aGFuZGxlRG93bkV2ZW50OnBvLGhhbmRsZUV2ZW50OnFvLGhhbmRsZVVwRXZlbnQ6cm99KTt0aGlzLko9ITE7dGhpcy4kPW51bGw7dGhpcy5nPSExO3RoaXMuZWI9YS5zb3VyY2U/YS5zb3VyY2U6bnVsbDt0aGlzLkRhPWEuZmVhdHVyZXM/YS5mZWF0dXJlczpudWxsO3RoaXMuYWc9YS5zbmFwVG9sZXJhbmNlP2Euc25hcFRvbGVyYW5jZToxMjt0aGlzLlY9YS50eXBlO3RoaXMuYz1zbyh0aGlzLlYpO3RoaXMuc2E9YS5taW5Qb2ludHM/YS5taW5Qb2ludHM6dGhpcy5jPT09dG8/MzoyO3RoaXMua2E9YS5tYXhQb2ludHM/YS5tYXhQb2ludHM6SW5maW5pdHk7dGhpcy5EYz1hLmZpbmlzaENvbmRpdGlvbj9hLmZpbmlzaENvbmRpdGlvbjpzZTt2YXIgYj1hLmdlb21ldHJ5RnVuY3Rpb247aWYoIWIpaWYoXCJDaXJjbGVcIj09PXRoaXMuViliPWZ1bmN0aW9uKGEsYil7Yj1iP2I6bmV3IGRuKFtOYU4sTmFOXSk7ZW4oYixhWzBdLE1hdGguc3FydChwZShhWzBdLFxuYVsxXSkpKTtyZXR1cm4gYn07ZWxzZXt2YXIgYyxkPXRoaXMuYztkPT09dW8/Yz1RZTpkPT09dm8/Yz1TOmQ9PT10byYmKGM9eik7Yj1mdW5jdGlvbihhLGIpe2I/ZD09PXRvP2IuWShbYVswXS5jb25jYXQoW2FbMF1bMF1dKV0pOmIuWShhKTpiPW5ldyBjKGEpO3JldHVybiBifX10aGlzLkFhPWI7dGhpcy5IPXRoaXMudT10aGlzLmE9dGhpcy5DPXRoaXMubD10aGlzLnM9bnVsbDt0aGlzLmZiPWEuY2xpY2tUb2xlcmFuY2U/YS5jbGlja1RvbGVyYW5jZSphLmNsaWNrVG9sZXJhbmNlOjM2O3RoaXMuZ2E9bmV3IGNvKHtzb3VyY2U6bmV3IGhvKHt1c2VTcGF0aWFsSW5kZXg6ITEsd3JhcFg6YS53cmFwWD9hLndyYXBYOiExfSksc3R5bGU6YS5zdHlsZT9hLnN0eWxlOndvKCl9KTt0aGlzLkZhPWEuZ2VvbWV0cnlOYW1lO3RoaXMuWmY9YS5jb25kaXRpb24/YS5jb25kaXRpb246dmY7dGhpcy5CYz1hLmZyZWVoYW5kP3NlOmEuZnJlZWhhbmRDb25kaXRpb24/YS5mcmVlaGFuZENvbmRpdGlvbjpcbndmO3kodGhpcyxwYyhcImFjdGl2ZVwiKSx0aGlzLmdiLHRoaXMpfXQob28sQWYpO2Z1bmN0aW9uIHdvKCl7dmFyIGE9SmgoKTtyZXR1cm4gZnVuY3Rpb24oYil7cmV0dXJuIGFbYi5QKCkuSSgpXX19b28ucHJvdG90eXBlLnNldE1hcD1mdW5jdGlvbihhKXtBZi5wcm90b3R5cGUuc2V0TWFwLmNhbGwodGhpcyxhKTt0aGlzLmdiKCl9O2Z1bmN0aW9uIHFvKGEpe3RoaXMuZz10aGlzLmMhPT11byYmdGhpcy5CYyhhKTt2YXIgYj0hdGhpcy5nO3RoaXMuZyYmXCJwb2ludGVyZHJhZ1wiPT09YS50eXBlJiZudWxsIT09dGhpcy5sPyh4byh0aGlzLGEpLGI9ITEpOlwicG9pbnRlcm1vdmVcIj09PWEudHlwZT9iPXlvKHRoaXMsYSk6XCJkYmxjbGlja1wiPT09YS50eXBlJiYoYj0hMSk7cmV0dXJuIEJmLmNhbGwodGhpcyxhKSYmYn1cbmZ1bmN0aW9uIHBvKGEpe3RoaXMuSj0hdGhpcy5nO3JldHVybiB0aGlzLmc/KHRoaXMuJD1hLnBpeGVsLHRoaXMuc3x8em8odGhpcyxhKSwhMCk6dGhpcy5aZihhKT8odGhpcy4kPWEucGl4ZWwsITApOiExfWZ1bmN0aW9uIHJvKGEpe3ZhciBiPSEwO3lvKHRoaXMsYSk7dmFyIGM9dGhpcy5jPT09QW87dGhpcy5KPyh0aGlzLnM/dGhpcy5nfHxjP0JvKHRoaXMpOkNvKHRoaXMsYSk/dGhpcy5EYyhhKSYmQm8odGhpcyk6eG8odGhpcyxhKTooem8odGhpcyxhKSx0aGlzLmM9PT11byYmQm8odGhpcykpLGI9ITEpOnRoaXMuZyYmKHRoaXMucz1udWxsLERvKHRoaXMpKTtyZXR1cm4gYn1cbmZ1bmN0aW9uIHlvKGEsYil7aWYoYS4kJiYoIWEuZyYmYS5KfHxhLmcmJiFhLkopKXt2YXIgYz1hLiQsZD1iLnBpeGVsLGU9Y1swXS1kWzBdO2M9Y1sxXS1kWzFdO2U9ZSplK2MqYzthLko9YS5nP2U+YS5mYjplPD1hLmZifWEucz8oZT1iLmNvb3JkaW5hdGUsYz1hLmwuUCgpLGEuYz09PXVvP2Q9YS5hOmEuYz09PXRvPyhkPWEuYVswXSxkPWRbZC5sZW5ndGgtMV0sQ28oYSxiKSYmKGU9YS5zLnNsaWNlKCkpKTooZD1hLmEsZD1kW2QubGVuZ3RoLTFdKSxkWzBdPWVbMF0sZFsxXT1lWzFdLGEuQWEoYS5hLGMpLGEuQyYmYS5DLlAoKS5ZKGUpLGMgaW5zdGFuY2VvZiB6JiZhLmMhPT10bz8oYS51fHwoYS51PW5ldyBFKG5ldyBTKG51bGwpKSksZT1jLmRlKDApLGI9YS51LlAoKSxnaShiLGUuVyxlLm8pKTphLkgmJihiPWEudS5QKCksYi5ZKGEuSCkpLEVvKGEpKTooYj1iLmNvb3JkaW5hdGUuc2xpY2UoKSxhLkM/YS5DLlAoKS5ZKGIpOihhLkM9bmV3IEUobmV3IFFlKGIpKSxFbyhhKSkpO1xucmV0dXJuITB9ZnVuY3Rpb24gQ28oYSxiKXt2YXIgYz0hMTtpZihhLmwpe3ZhciBkPSExLGU9W2Euc107YS5jPT09dm8/ZD1hLmEubGVuZ3RoPmEuc2E6YS5jPT09dG8mJihkPWEuYVswXS5sZW5ndGg+YS5zYSxlPVthLmFbMF1bMF0sYS5hWzBdW2EuYVswXS5sZW5ndGgtMl1dKTtpZihkKXtkPWIubWFwO2Zvcih2YXIgZj0wLGc9ZS5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9ZVtmXSxrPUhmKGQsaCksbT1iLnBpeGVsO2M9bVswXS1rWzBdO2s9bVsxXS1rWzFdO2lmKGM9TWF0aC5zcXJ0KGMqYytrKmspPD0oYS5nPzE6YS5hZykpe2Eucz1oO2JyZWFrfX19fXJldHVybiBjfVxuZnVuY3Rpb24gem8oYSxiKXtiPWIuY29vcmRpbmF0ZTthLnM9YjthLmM9PT11bz9hLmE9Yi5zbGljZSgpOmEuYz09PXRvPyhhLmE9W1tiLnNsaWNlKCksYi5zbGljZSgpXV0sYS5IPWEuYVswXSk6KGEuYT1bYi5zbGljZSgpLGIuc2xpY2UoKV0sYS5jPT09QW8mJihhLkg9YS5hKSk7YS5IJiYoYS51PW5ldyBFKG5ldyBTKGEuSCkpKTtiPWEuQWEoYS5hKTthLmw9bmV3IEU7YS5GYSYmYS5sLnNiKGEuRmEpO2EubC54YShiKTtFbyhhKTthLmYobmV3IEZvKFwiZHJhd3N0YXJ0XCIsYS5sKSl9XG5mdW5jdGlvbiB4byhhLGIpe2I9Yi5jb29yZGluYXRlO3ZhciBjPWEubC5QKCksZDtpZihhLmM9PT12byl7YS5zPWIuc2xpY2UoKTt2YXIgZT1hLmE7ZS5sZW5ndGg+PWEua2EmJihhLmc/ZS5wb3AoKTpkPSEwKTtlLnB1c2goYi5zbGljZSgpKTthLkFhKGUsYyl9ZWxzZSBhLmM9PT10byYmKGU9YS5hWzBdLGUubGVuZ3RoPj1hLmthJiYoYS5nP2UucG9wKCk6ZD0hMCksZS5wdXNoKGIuc2xpY2UoKSksZCYmKGEucz1lWzBdKSxhLkFhKGEuYSxjKSk7RW8oYSk7ZCYmQm8oYSl9XG5mdW5jdGlvbiBCbyhhKXt2YXIgYj1EbyhhKSxjPWEuYSxkPWIuUCgpO2EuYz09PXZvPyhjLnBvcCgpLGEuQWEoYyxkKSk6YS5jPT09dG8mJihjWzBdLnBvcCgpLGEuQWEoYyxkKSxjPWQuRygpKTtcIk11bHRpUG9pbnRcIj09PWEuVj9iLnhhKG5ldyBraShbY10pKTpcIk11bHRpTGluZVN0cmluZ1wiPT09YS5WP2IueGEobmV3IGhpKFtjXSkpOlwiTXVsdGlQb2x5Z29uXCI9PT1hLlYmJmIueGEobmV3IG1pKFtjXSkpO2EuZihuZXcgRm8oXCJkcmF3ZW5kXCIsYikpO2EuRGEmJmEuRGEucHVzaChiKTthLmViJiZhLmViLk9hKGIpfWZ1bmN0aW9uIERvKGEpe2Eucz1udWxsO3ZhciBiPWEubDtiJiYoYS5sPW51bGwsYS5DPW51bGwsYS51PW51bGwsYS5nYS5jYSgpLmNsZWFyKCEwKSk7cmV0dXJuIGJ9b28ucHJvdG90eXBlLmJiPXRlO1xuZnVuY3Rpb24gRW8oYSl7dmFyIGI9W107YS5sJiZiLnB1c2goYS5sKTthLnUmJmIucHVzaChhLnUpO2EuQyYmYi5wdXNoKGEuQyk7YT1hLmdhLmNhKCk7YS5jbGVhcighMCk7YS53YihiKX1vby5wcm90b3R5cGUuZ2I9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLkQsYj10aGlzLmdldChcImFjdGl2ZVwiKTthJiZifHxEbyh0aGlzKTt0aGlzLmdhLnNldE1hcChiP2E6bnVsbCl9O2Z1bmN0aW9uIHNvKGEpe3ZhciBiO1wiUG9pbnRcIj09PWF8fFwiTXVsdGlQb2ludFwiPT09YT9iPXVvOlwiTGluZVN0cmluZ1wiPT09YXx8XCJNdWx0aUxpbmVTdHJpbmdcIj09PWE/Yj12bzpcIlBvbHlnb25cIj09PWF8fFwiTXVsdGlQb2x5Z29uXCI9PT1hP2I9dG86XCJDaXJjbGVcIj09PWEmJihiPUFvKTtyZXR1cm4gYn12YXIgdW89XCJQb2ludFwiLHZvPVwiTGluZVN0cmluZ1wiLHRvPVwiUG9seWdvblwiLEFvPVwiQ2lyY2xlXCI7ZnVuY3Rpb24gRm8oYSxiKXtpYy5jYWxsKHRoaXMsYSk7dGhpcy5mZWF0dXJlPWJ9dChGbyxpYyk7ZnVuY3Rpb24gR28oYSl7QWYuY2FsbCh0aGlzLHtoYW5kbGVEb3duRXZlbnQ6SG8saGFuZGxlRHJhZ0V2ZW50OklvLGhhbmRsZUV2ZW50OkpvLGhhbmRsZVVwRXZlbnQ6S299KTt0aGlzLmdiPWEuY29uZGl0aW9uP2EuY29uZGl0aW9uOnpmO3RoaXMuRmE9ZnVuY3Rpb24oYSl7dmFyIGI9YS5vcmlnaW5hbEV2ZW50O3JldHVybiBiLmFsdEtleSYmIShiLm1ldGFLZXl8fGIuY3RybEtleSkmJiFiLnNoaWZ0S2V5JiZ1ZihhKX07dGhpcy5lYj1hLmRlbGV0ZUNvbmRpdGlvbj9hLmRlbGV0ZUNvbmRpdGlvbjp0aGlzLkZhO3RoaXMuZmI9YS5pbnNlcnRWZXJ0ZXhDb25kaXRpb24/YS5pbnNlcnRWZXJ0ZXhDb25kaXRpb246c2U7dGhpcy5EYT10aGlzLmM9bnVsbDt0aGlzLnNhPVswLDBdO3RoaXMudT10aGlzLkg9ITE7dGhpcy5hPW5ldyAkZzt0aGlzLmdhPXZvaWQgMCE9PWEucGl4ZWxUb2xlcmFuY2U/YS5waXhlbFRvbGVyYW5jZToxMDt0aGlzLmw9dGhpcy5rYT0hMTt0aGlzLmc9W107dGhpcy5DPVxubmV3IGNvKHtzb3VyY2U6bmV3IGhvKHt1c2VTcGF0aWFsSW5kZXg6ITEsd3JhcFg6ISFhLndyYXBYfSksc3R5bGU6YS5zdHlsZT9hLnN0eWxlOkxvKCksdXBkYXRlV2hpbGVBbmltYXRpbmc6ITAsdXBkYXRlV2hpbGVJbnRlcmFjdGluZzohMH0pO3RoaXMuJD17UG9pbnQ6dGhpcy5OaCxMaW5lU3RyaW5nOnRoaXMuRmUsTGluZWFyUmluZzp0aGlzLkZlLFBvbHlnb246dGhpcy5PaCxNdWx0aVBvaW50OnRoaXMuTGgsTXVsdGlMaW5lU3RyaW5nOnRoaXMuS2gsTXVsdGlQb2x5Z29uOnRoaXMuTWgsQ2lyY2xlOnRoaXMuSWgsR2VvbWV0cnlDb2xsZWN0aW9uOnRoaXMuSmh9O3RoaXMuVj1udWxsO2Euc291cmNlPyh0aGlzLlY9YS5zb3VyY2UsYT1uZXcgc2ModGhpcy5WLm1jKCkpLHkodGhpcy5WLFwiYWRkZmVhdHVyZVwiLHRoaXMuSGcsdGhpcykseSh0aGlzLlYsXCJyZW1vdmVmZWF0dXJlXCIsdGhpcy5LZyx0aGlzKSk6YT1hLmZlYXR1cmVzO2lmKCFhKXRocm93IEVycm9yKFwiVGhlIG1vZGlmeSBpbnRlcmFjdGlvbiByZXF1aXJlcyBmZWF0dXJlcyBvciBhIHNvdXJjZVwiKTtcbnRoaXMucz1hO3RoaXMucy5mb3JFYWNoKHRoaXMuaGQsdGhpcyk7eSh0aGlzLnMsXCJhZGRcIix0aGlzLkdoLHRoaXMpO3kodGhpcy5zLFwicmVtb3ZlXCIsdGhpcy5IaCx0aGlzKTt0aGlzLko9bnVsbH10KEdvLEFmKTtsPUdvLnByb3RvdHlwZTtsLmhkPWZ1bmN0aW9uKGEpe3ZhciBiPWEuUCgpO2ImJmIuSSgpaW4gdGhpcy4kJiZ0aGlzLiRbYi5JKCldLmNhbGwodGhpcyxhLGIpOyhiPXRoaXMuRCkmJmIuYyYmdGhpcy5nZXQoXCJhY3RpdmVcIikmJk1vKHRoaXMsdGhpcy5zYSxiKTt5KGEsXCJjaGFuZ2VcIix0aGlzLkVlLHRoaXMpfTtmdW5jdGlvbiBObyhhLGIpe2EudXx8KGEudT0hMCxhLmYobmV3IE9vKFwibW9kaWZ5c3RhcnRcIixhLnMsYikpKX1mdW5jdGlvbiBQbyhhLGIpe1FvKGEsYik7YS5jJiYhYS5zLldhKCkmJihhLkMuY2EoKS5JYShhLmMpLGEuYz1udWxsKTtkYyhiLFwiY2hhbmdlXCIsYS5FZSxhKX1cbmZ1bmN0aW9uIFFvKGEsYil7YT1hLmE7dmFyIGM9W107YS5mb3JFYWNoKGZ1bmN0aW9uKGEpe2I9PT1hLmZlYXR1cmUmJmMucHVzaChhKX0pO2Zvcih2YXIgZD1jLmxlbmd0aC0xOzA8PWQ7LS1kKWEucmVtb3ZlKGNbZF0pfWwuWWE9ZnVuY3Rpb24oYSl7dGhpcy5jJiYhYSYmKHRoaXMuQy5jYSgpLklhKHRoaXMuYyksdGhpcy5jPW51bGwpO0FmLnByb3RvdHlwZS5ZYS5jYWxsKHRoaXMsYSl9O2wuc2V0TWFwPWZ1bmN0aW9uKGEpe3RoaXMuQy5zZXRNYXAoYSk7QWYucHJvdG90eXBlLnNldE1hcC5jYWxsKHRoaXMsYSl9O2wuSGc9ZnVuY3Rpb24oYSl7YS5mZWF0dXJlJiZ0aGlzLnMucHVzaChhLmZlYXR1cmUpfTtsLktnPWZ1bmN0aW9uKGEpe2EuZmVhdHVyZSYmdGhpcy5zLnJlbW92ZShhLmZlYXR1cmUpfTtsLkdoPWZ1bmN0aW9uKGEpe3RoaXMuaGQoYS5lbGVtZW50KX07bC5FZT1mdW5jdGlvbihhKXt0aGlzLmx8fChhPWEudGFyZ2V0LFBvKHRoaXMsYSksdGhpcy5oZChhKSl9O1xubC5IaD1mdW5jdGlvbihhKXtQbyh0aGlzLGEuZWxlbWVudCl9O2wuTmg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLkcoKTthPXtmZWF0dXJlOmEsZ2VvbWV0cnk6YixUOltjLGNdfTt0aGlzLmEuYWEoYi5LKCksYSl9O2wuTGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLkcoKSxkO3ZhciBlPTA7Zm9yKGQ9Yy5sZW5ndGg7ZTxkOysrZSl7dmFyIGY9Y1tlXTtmPXtmZWF0dXJlOmEsZ2VvbWV0cnk6YixkZXB0aDpbZV0saW5kZXg6ZSxUOltmLGZdfTt0aGlzLmEuYWEoYi5LKCksZil9fTtsLkZlPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5HKCksZDt2YXIgZT0wO2ZvcihkPWMubGVuZ3RoLTE7ZTxkOysrZSl7dmFyIGY9Yy5zbGljZShlLGUrMik7dmFyIGc9e2ZlYXR1cmU6YSxnZW9tZXRyeTpiLGluZGV4OmUsVDpmfTt0aGlzLmEuYWEoRmEoZiksZyl9fTtcbmwuS2g9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLkcoKSxkLGU7dmFyIGY9MDtmb3IoZT1jLmxlbmd0aDtmPGU7KytmKXt2YXIgZz1jW2ZdO3ZhciBoPTA7Zm9yKGQ9Zy5sZW5ndGgtMTtoPGQ7KytoKXt2YXIgaz1nLnNsaWNlKGgsaCsyKTt2YXIgbT17ZmVhdHVyZTphLGdlb21ldHJ5OmIsZGVwdGg6W2ZdLGluZGV4OmgsVDprfTt0aGlzLmEuYWEoRmEoayksbSl9fX07bC5PaD1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRygpLGQsZTt2YXIgZj0wO2ZvcihlPWMubGVuZ3RoO2Y8ZTsrK2Ype3ZhciBnPWNbZl07dmFyIGg9MDtmb3IoZD1nLmxlbmd0aC0xO2g8ZDsrK2gpe3ZhciBrPWcuc2xpY2UoaCxoKzIpO3ZhciBtPXtmZWF0dXJlOmEsZ2VvbWV0cnk6YixkZXB0aDpbZl0saW5kZXg6aCxUOmt9O3RoaXMuYS5hYShGYShrKSxtKX19fTtcbmwuTWg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLkcoKSxkLGUsZjt2YXIgZz0wO2ZvcihmPWMubGVuZ3RoO2c8ZjsrK2cpe3ZhciBoPWNbZ107dmFyIGs9MDtmb3IoZT1oLmxlbmd0aDtrPGU7KytrKXt2YXIgbT1oW2tdO3ZhciBuPTA7Zm9yKGQ9bS5sZW5ndGgtMTtuPGQ7KytuKXt2YXIgcD1tLnNsaWNlKG4sbisyKTt2YXIgcj17ZmVhdHVyZTphLGdlb21ldHJ5OmIsZGVwdGg6W2ssZ10saW5kZXg6bixUOnB9O3RoaXMuYS5hYShGYShwKSxyKX19fX07bC5JaD1mdW5jdGlvbihhLGIpe3ZhciBjPWIuYmEoKSxkPXtmZWF0dXJlOmEsZ2VvbWV0cnk6YixpbmRleDowLFQ6W2MsY119O2E9e2ZlYXR1cmU6YSxnZW9tZXRyeTpiLGluZGV4OjEsVDpbYyxjXX07ZC5WYz1hLlZjPVtkLGFdO3RoaXMuYS5hYShQYShjKSxkKTt0aGlzLmEuYWEoYi5LKCksYSl9O1xubC5KaD1mdW5jdGlvbihhLGIpe3ZhciBjPWIuYTtmb3IoYj0wO2I8Yy5sZW5ndGg7KytiKXRoaXMuJFtjW2JdLkkoKV0uY2FsbCh0aGlzLGEsY1tiXSl9O2Z1bmN0aW9uIFJvKGEsYil7dmFyIGM9YS5jO2M/Yy5QKCkuWShiKTooYz1uZXcgRShuZXcgUWUoYikpLGEuYz1jLGEuQy5jYSgpLk9hKGMpKX1mdW5jdGlvbiBTbyhhLGIpe3JldHVybiBhLmluZGV4LWIuaW5kZXh9XG5mdW5jdGlvbiBIbyhhKXtpZighdGhpcy5nYihhKSlyZXR1cm4hMTtNbyh0aGlzLGEucGl4ZWwsYS5tYXApO3ZhciBiPWEubWFwLkJhKGEucGl4ZWwpO3RoaXMuZy5sZW5ndGg9MDt0aGlzLnU9ITE7dmFyIGM9dGhpcy5jO2lmKGMpe3ZhciBkPVtdO2M9Yy5QKCkuRygpO3ZhciBlPUZhKFtjXSk7ZT1jaCh0aGlzLmEsZSk7dmFyIGY9e307ZS5zb3J0KFNvKTtmb3IodmFyIGc9MCxoPWUubGVuZ3RoO2c8aDsrK2cpe3ZhciBrPWVbZ10sbT1rLlQsbj12KGsuZmVhdHVyZSkscD1rLmRlcHRoO3AmJihuKz1cIi1cIitwLmpvaW4oXCItXCIpKTtmW25dfHwoZltuXT1BcnJheSgyKSk7aWYoXCJDaXJjbGVcIj09PWsuZ2VvbWV0cnkuSSgpJiYxPT09ay5pbmRleCltPVRvKGIsayksbWUobSxjKSYmIWZbbl1bMF0mJih0aGlzLmcucHVzaChbaywwXSksZltuXVswXT1rKTtlbHNlIGlmKG1lKG1bMF0sYykmJiFmW25dWzBdKXRoaXMuZy5wdXNoKFtrLDBdKSxmW25dWzBdPWs7ZWxzZSBpZihtZShtWzFdLGMpJiZcbiFmW25dWzFdKXtpZihcIkxpbmVTdHJpbmdcIiE9PWsuZ2VvbWV0cnkuSSgpJiZcIk11bHRpTGluZVN0cmluZ1wiIT09ay5nZW9tZXRyeS5JKCl8fCFmW25dWzBdfHwwIT09ZltuXVswXS5pbmRleCl0aGlzLmcucHVzaChbaywxXSksZltuXVsxXT1rfWVsc2UgdGhpcy5mYihhKSYmdihtKWluIHRoaXMuRGEmJiFmW25dWzBdJiYhZltuXVsxXSYmZC5wdXNoKFtrLGNdKX1kLmxlbmd0aCYmTm8odGhpcyxhKTtmb3IoYT1kLmxlbmd0aC0xOzA8PWE7LS1hKXRoaXMuUWcuYXBwbHkodGhpcyxkW2FdKX1yZXR1cm4hIXRoaXMuY31cbmZ1bmN0aW9uIElvKGEpe3RoaXMuSD0hMTtObyh0aGlzLGEpO2E9YS5jb29yZGluYXRlO2Zvcih2YXIgYj0wLGM9dGhpcy5nLmxlbmd0aDtiPGM7KytiKXt2YXIgZD10aGlzLmdbYl0sZT1kWzBdLGY9ZS5kZXB0aCxnPWUuZ2VvbWV0cnksaD1lLlQ7Zm9yKGQ9ZFsxXTthLmxlbmd0aDxnLkE7KWEucHVzaChoW2RdW2EubGVuZ3RoXSk7c3dpdGNoKGcuSSgpKXtjYXNlIFwiUG9pbnRcIjp2YXIgaz1hO2hbMF09aFsxXT1hO2JyZWFrO2Nhc2UgXCJNdWx0aVBvaW50XCI6az1nLkcoKTtrW2UuaW5kZXhdPWE7aFswXT1oWzFdPWE7YnJlYWs7Y2FzZSBcIkxpbmVTdHJpbmdcIjprPWcuRygpO2tbZS5pbmRleCtkXT1hO2hbZF09YTticmVhaztjYXNlIFwiTXVsdGlMaW5lU3RyaW5nXCI6az1nLkcoKTtrW2ZbMF1dW2UuaW5kZXgrZF09YTtoW2RdPWE7YnJlYWs7Y2FzZSBcIlBvbHlnb25cIjprPWcuRygpO2tbZlswXV1bZS5pbmRleCtkXT1hO2hbZF09YTticmVhaztjYXNlIFwiTXVsdGlQb2x5Z29uXCI6az1nLkcoKTtcbmtbZlsxXV1bZlswXV1bZS5pbmRleCtkXT1hO2hbZF09YTticmVhaztjYXNlIFwiQ2lyY2xlXCI6aFswXT1oWzFdPWEsMD09PWUuaW5kZXg/KHRoaXMubD0hMCxnLkphKGEpKToodGhpcy5sPSEwLGcuYWYocWUoZy5iYSgpLGEpKSksdGhpcy5sPSExfWsmJihlPWcsZj1rLHRoaXMubD0hMCxlLlkoZiksdGhpcy5sPSExKX1Sbyh0aGlzLGEpfWZ1bmN0aW9uIEtvKGEpe2Zvcih2YXIgYixjLGQ9dGhpcy5nLmxlbmd0aC0xOzA8PWQ7LS1kKWlmKGI9dGhpcy5nW2RdWzBdLGM9Yi5nZW9tZXRyeSxcIkNpcmNsZVwiPT09Yy5JKCkpe3ZhciBlPWMuYmEoKSxmPWIuVmNbMF07Yj1iLlZjWzFdO2YuVFswXT1mLlRbMV09ZTtiLlRbMF09Yi5UWzFdPWU7YWgodGhpcy5hLFBhKGUpLGYpO2FoKHRoaXMuYSxjLksoKSxiKX1lbHNlIGFoKHRoaXMuYSxGYShiLlQpLGIpO3RoaXMudSYmKHRoaXMuZihuZXcgT28oXCJtb2RpZnllbmRcIix0aGlzLnMsYSkpLHRoaXMudT0hMSk7cmV0dXJuITF9XG5mdW5jdGlvbiBKbyhhKXtpZighKGEgaW5zdGFuY2VvZiBzZCkpcmV0dXJuITA7dGhpcy5KPWE7VGMoYS5tYXAuWigpKVsxXXx8XCJwb2ludGVybW92ZVwiIT1hLnR5cGV8fHRoaXMudnx8KHRoaXMuc2E9YS5waXhlbCxNbyh0aGlzLGEucGl4ZWwsYS5tYXApKTtpZih0aGlzLmMmJnRoaXMuZWIoYSkpe2lmKFwic2luZ2xlY2xpY2tcIj09YS50eXBlJiZ0aGlzLkgpdmFyIGI9ITA7ZWxzZSBpZih0aGlzLkomJlwicG9pbnRlcmRyYWdcIiE9dGhpcy5KLnR5cGUpe3ZhciBjPXRoaXMuSjtObyh0aGlzLGMpO3ZhciBkPXRoaXMuZyxlPXt9LGYsZztmb3IoZz1kLmxlbmd0aC0xOzA8PWc7LS1nKXt2YXIgaD1kW2ddO3ZhciBrPWhbMF07Yj12KGsuZmVhdHVyZSk7ay5kZXB0aCYmKGIrPVwiLVwiK2suZGVwdGguam9pbihcIi1cIikpO2IgaW4gZXx8KGVbYl09e30pOzA9PT1oWzFdPyhlW2JdLnJpZ2h0PWssZVtiXS5pbmRleD1rLmluZGV4KToxPT1oWzFdJiYoZVtiXS5sZWZ0PWssZVtiXS5pbmRleD1rLmluZGV4K1xuMSl9Zm9yKGIgaW4gZSl7dmFyIG09ZVtiXS5yaWdodDt2YXIgbj1lW2JdLmxlZnQ7Zz1lW2JdLmluZGV4O3ZhciBwPWctMTtrPXZvaWQgMCE9PW4/bjptOzA+cCYmKHA9MCk7aD1rLmdlb21ldHJ5O3ZhciByPWY9aC5HKCk7dmFyIHU9ITE7c3dpdGNoKGguSSgpKXtjYXNlIFwiTXVsdGlMaW5lU3RyaW5nXCI6MjxmW2suZGVwdGhbMF1dLmxlbmd0aCYmKGZbay5kZXB0aFswXV0uc3BsaWNlKGcsMSksdT0hMCk7YnJlYWs7Y2FzZSBcIkxpbmVTdHJpbmdcIjoyPGYubGVuZ3RoJiYoZi5zcGxpY2UoZywxKSx1PSEwKTticmVhaztjYXNlIFwiTXVsdGlQb2x5Z29uXCI6cj1yW2suZGVwdGhbMV1dO2Nhc2UgXCJQb2x5Z29uXCI6cj1yW2suZGVwdGhbMF1dLDQ8ci5sZW5ndGgmJihnPT1yLmxlbmd0aC0xJiYoZz0wKSxyLnNwbGljZShnLDEpLHU9ITAsMD09PWcmJihyLnBvcCgpLHIucHVzaChyWzBdKSxwPXIubGVuZ3RoLTEpKX11JiYodT1oLHRoaXMubD0hMCx1LlkoZiksdGhpcy5sPSExLGY9W10sdm9pZCAwIT09XG5uJiYodGhpcy5hLnJlbW92ZShuKSxmLnB1c2gobi5UWzBdKSksdm9pZCAwIT09bSYmKHRoaXMuYS5yZW1vdmUobSksZi5wdXNoKG0uVFsxXSkpLHZvaWQgMCE9PW4mJnZvaWQgMCE9PW0mJihuPXtkZXB0aDprLmRlcHRoLGZlYXR1cmU6ay5mZWF0dXJlLGdlb21ldHJ5OmsuZ2VvbWV0cnksaW5kZXg6cCxUOmZ9LHRoaXMuYS5hYShGYShuLlQpLG4pKSxVbyh0aGlzLGgsZyxrLmRlcHRoLC0xKSx0aGlzLmMmJih0aGlzLkMuY2EoKS5JYSh0aGlzLmMpLHRoaXMuYz1udWxsKSxkLmxlbmd0aD0wKX10aGlzLmYobmV3IE9vKFwibW9kaWZ5ZW5kXCIsdGhpcy5zLGMpKTt0aGlzLnU9ITE7Yj0hMH1lbHNlIGI9ITE7Yz1ifVwic2luZ2xlY2xpY2tcIj09YS50eXBlJiYodGhpcy5IPSExKTtyZXR1cm4gQmYuY2FsbCh0aGlzLGEpJiYhY31cbmZ1bmN0aW9uIE1vKGEsYixjKXtmdW5jdGlvbiBkKGEsYil7cmV0dXJuIFZvKGUsYSktVm8oZSxiKX12YXIgZT1jLkJhKGIpLGY9SmEoUGEoZSksYy5aKCkudWEoKSphLmdhKTtmPWNoKGEuYSxmKTtpZigwPGYubGVuZ3RoKXtmLnNvcnQoZCk7dmFyIGc9ZlswXSxoPWcuVCxrPVRvKGUsZyksbT1IZihjLGspLG49cWUoYixtKTtpZihuPD1hLmdhKXtiPXt9O2lmKFwiQ2lyY2xlXCI9PT1nLmdlb21ldHJ5LkkoKSYmMT09PWcuaW5kZXgpYS5rYT0hMCxSbyhhLGspO2Vsc2UgZm9yKG49SGYoYyxoWzBdKSxnPUhmKGMsaFsxXSksYz1wZShtLG4pLG09cGUobSxnKSxuPU1hdGguc3FydChNYXRoLm1pbihjLG0pKSxhLmthPW48PWEuZ2EsYS5rYSYmKGs9Yz5tP2hbMV06aFswXSksUm8oYSxrKSxtPTEsYz1mLmxlbmd0aDttPGM7KyttKWlmKGs9ZlttXS5ULG1lKGhbMF0sa1swXSkmJm1lKGhbMV0sa1sxXSl8fG1lKGhbMF0sa1sxXSkmJm1lKGhbMV0sa1swXSkpYlt2KGspXT0hMDtlbHNlIGJyZWFrO1xuYlt2KGgpXT0hMDthLkRhPWI7cmV0dXJufX1hLmMmJihhLkMuY2EoKS5JYShhLmMpLGEuYz1udWxsKX1mdW5jdGlvbiBWbyhhLGIpe3ZhciBjPWIuZ2VvbWV0cnk7cmV0dXJuXCJDaXJjbGVcIj09PWMuSSgpJiYxPT09Yi5pbmRleD8oYT1wZShjLmJhKCksYSksYz1NYXRoLnNxcnQoYSktYy5JYigpLGMqYyk6cmUoYSxiLlQpfWZ1bmN0aW9uIFRvKGEsYil7dmFyIGM9Yi5nZW9tZXRyeTtcIkNpcmNsZVwiPT09Yy5JKCkmJjE9PT1iLmluZGV4PyhiPVtOYU4sTmFOXSxjLkdhKGFbMF0sYVsxXSxiLEluZmluaXR5KSxhPWIpOmE9bGUoYSxiLlQpO3JldHVybiBhfVxubC5RZz1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1hLlQsZD1hLmZlYXR1cmUsZT1hLmdlb21ldHJ5LGY9YS5kZXB0aCxnPWEuaW5kZXgsaDtiLmxlbmd0aDxlLkE7KWIucHVzaCgwKTtzd2l0Y2goZS5JKCkpe2Nhc2UgXCJNdWx0aUxpbmVTdHJpbmdcIjpoPWUuRygpO2hbZlswXV0uc3BsaWNlKGcrMSwwLGIpO2JyZWFrO2Nhc2UgXCJQb2x5Z29uXCI6aD1lLkcoKTtoW2ZbMF1dLnNwbGljZShnKzEsMCxiKTticmVhaztjYXNlIFwiTXVsdGlQb2x5Z29uXCI6aD1lLkcoKTtoW2ZbMV1dW2ZbMF1dLnNwbGljZShnKzEsMCxiKTticmVhaztjYXNlIFwiTGluZVN0cmluZ1wiOmg9ZS5HKCk7aC5zcGxpY2UoZysxLDAsYik7YnJlYWs7ZGVmYXVsdDpyZXR1cm59dGhpcy5sPSEwO2UuWShoKTt0aGlzLmw9ITE7aD10aGlzLmE7aC5yZW1vdmUoYSk7VW8odGhpcyxlLGcsZiwxKTthPXtUOltjWzBdLGJdLGZlYXR1cmU6ZCxnZW9tZXRyeTplLGRlcHRoOmYsaW5kZXg6Z307aC5hYShGYShhLlQpLGEpO3RoaXMuZy5wdXNoKFthLFxuMV0pO2I9e1Q6W2IsY1sxXV0sZmVhdHVyZTpkLGdlb21ldHJ5OmUsZGVwdGg6ZixpbmRleDpnKzF9O2guYWEoRmEoYi5UKSxiKTt0aGlzLmcucHVzaChbYiwwXSk7dGhpcy5IPSEwfTtmdW5jdGlvbiBVbyhhLGIsYyxkLGUpe2VoKGEuYSxiLksoKSxmdW5jdGlvbihhKXthLmdlb21ldHJ5PT09YiYmKHZvaWQgMD09PWR8fHZvaWQgMD09PWEuZGVwdGh8fGphKGEuZGVwdGgsZCkpJiZhLmluZGV4PmMmJihhLmluZGV4Kz1lKX0pfWZ1bmN0aW9uIExvKCl7dmFyIGE9SmgoKTtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5Qb2ludH19ZnVuY3Rpb24gT28oYSxiLGMpe2ljLmNhbGwodGhpcyxhKTt0aGlzLmZlYXR1cmVzPWI7dGhpcy5tYXBCcm93c2VyRXZlbnQ9Y310KE9vLGljKTtmdW5jdGlvbiBXbyhhKXttZi5jYWxsKHRoaXMse2hhbmRsZUV2ZW50OlhvfSk7YT1hP2E6e307dGhpcy51PWEuY29uZGl0aW9uP2EuY29uZGl0aW9uOnVmO3RoaXMudj1hLmFkZENvbmRpdGlvbj9hLmFkZENvbmRpdGlvbjp0ZTt0aGlzLlg9YS5yZW1vdmVDb25kaXRpb24/YS5yZW1vdmVDb25kaXRpb246dGU7dGhpcy5WPWEudG9nZ2xlQ29uZGl0aW9uP2EudG9nZ2xlQ29uZGl0aW9uOndmO3RoaXMucz1hLm11bHRpP2EubXVsdGk6ITE7dGhpcy5pPWEuZmlsdGVyP2EuZmlsdGVyOnNlO3RoaXMuZz1hLmhpdFRvbGVyYW5jZT9hLmhpdFRvbGVyYW5jZTowO3RoaXMuYT1uZXcgY28oe3NvdXJjZTpuZXcgaG8oe3VzZVNwYXRpYWxJbmRleDohMSxmZWF0dXJlczphLmZlYXR1cmVzLHdyYXBYOmEud3JhcFh9KSxzdHlsZTphLnN0eWxlP2Euc3R5bGU6WW8oKSx1cGRhdGVXaGlsZUFuaW1hdGluZzohMCx1cGRhdGVXaGlsZUludGVyYWN0aW5nOiEwfSk7aWYoYS5sYXllcnMpaWYoXCJmdW5jdGlvblwiPT09XG50eXBlb2YgYS5sYXllcnMpYT1hLmxheWVycztlbHNle3ZhciBiPWEubGF5ZXJzO2E9ZnVuY3Rpb24oYSl7cmV0dXJuIDA8PWIuaW5kZXhPZihhKX19ZWxzZSBhPXNlO3RoaXMubD1hO3RoaXMuYz17fTthPXRoaXMuYS5jYSgpLmk7eShhLFwiYWRkXCIsdGhpcy5DLHRoaXMpO3koYSxcInJlbW92ZVwiLHRoaXMuSix0aGlzKX10KFdvLG1mKTtXby5wcm90b3R5cGUuSD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmEuY2EoKS5pfTtcbmZ1bmN0aW9uIFhvKGEpe2lmKCF0aGlzLnUoYSkpcmV0dXJuITA7dmFyIGI9dGhpcy52KGEpLGM9dGhpcy5YKGEpLGQ9dGhpcy5WKGEpLGU9IWImJiFjJiYhZCxmPWEubWFwLGc9dGhpcy5hLmNhKCkuaSxoPVtdLGs9W107aWYoZSl7JGEodGhpcy5jKTtmLldjKGEucGl4ZWwsZnVuY3Rpb24oYSxiKXtpZih0aGlzLmkoYSxiKSlyZXR1cm4gay5wdXNoKGEpLGE9dihhKSx0aGlzLmNbYV09YiwhdGhpcy5zfS5iaW5kKHRoaXMpLHtsYXllckZpbHRlcjp0aGlzLmwsaGl0VG9sZXJhbmNlOnRoaXMuZ30pO2ZvcihlPWcuV2EoKS0xOzA8PWU7LS1lKXtmPWcua2UoZSk7dmFyIG09ay5pbmRleE9mKGYpOy0xPG0/ay5zcGxpY2UobSwxKTooZy5yZW1vdmUoZiksaC5wdXNoKGYpKX1rLmxlbmd0aCYmdmMoZyxrKX1lbHNle2YuV2MoYS5waXhlbCxmdW5jdGlvbihhLGUpe2lmKHRoaXMuaShhLGUpKXJldHVybiFiJiYhZHx8MDw9Zy5hLmluZGV4T2YoYSk/KGN8fGQpJiYwPD1nLmEuaW5kZXhPZihhKSYmXG4oaC5wdXNoKGEpLGU9dihhKSxkZWxldGUgdGhpcy5jW2VdKTooay5wdXNoKGEpLGE9dihhKSx0aGlzLmNbYV09ZSksIXRoaXMuc30uYmluZCh0aGlzKSx7bGF5ZXJGaWx0ZXI6dGhpcy5sLGhpdFRvbGVyYW5jZTp0aGlzLmd9KTtmb3IoZT1oLmxlbmd0aC0xOzA8PWU7LS1lKWcucmVtb3ZlKGhbZV0pO3ZjKGcsayl9KDA8ay5sZW5ndGh8fDA8aC5sZW5ndGgpJiZ0aGlzLmYobmV3IFpvKCRvLGssaCxhKSk7cmV0dXJuXCJwb2ludGVybW92ZVwiPT1hLnR5cGV9V28ucHJvdG90eXBlLnNldE1hcD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLkQsYz10aGlzLmEuY2EoKS5pO2ImJmMuZm9yRWFjaChiLmpmLGIpO21mLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLGEpO3RoaXMuYS5zZXRNYXAoYSk7YSYmYy5mb3JFYWNoKGEuZWYsYSl9O1xuZnVuY3Rpb24gWW8oKXt2YXIgYT1KaCgpO2lhKGEuUG9seWdvbixhLkxpbmVTdHJpbmcpO2lhKGEuR2VvbWV0cnlDb2xsZWN0aW9uLGEuTGluZVN0cmluZyk7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBiLlAoKT9hW2IuUCgpLkkoKV06bnVsbH19V28ucHJvdG90eXBlLkM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5EO2ImJmIuZWYoYS5lbGVtZW50KX07V28ucHJvdG90eXBlLko9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5EO2ImJmIuamYoYS5lbGVtZW50KX07ZnVuY3Rpb24gWm8oYSxiLGMsZCl7aWMuY2FsbCh0aGlzLGEpO3RoaXMuc2VsZWN0ZWQ9Yjt0aGlzLmRlc2VsZWN0ZWQ9Yzt0aGlzLm1hcEJyb3dzZXJFdmVudD1kfXQoWm8saWMpO3ZhciAkbz1cInNlbGVjdFwiO2Z1bmN0aW9uIGFwKGEpe0FmLmNhbGwodGhpcyx7aGFuZGxlRXZlbnQ6YnAsaGFuZGxlRG93bkV2ZW50OnNlLGhhbmRsZVVwRXZlbnQ6Y3B9KTthPWE/YTp7fTt0aGlzLmw9YS5zb3VyY2U/YS5zb3VyY2U6bnVsbDt0aGlzLko9dm9pZCAwIT09YS52ZXJ0ZXg/YS52ZXJ0ZXg6ITA7dGhpcy51PXZvaWQgMCE9PWEuZWRnZT9hLmVkZ2U6ITA7dGhpcy5nPWEuZmVhdHVyZXM/YS5mZWF0dXJlczpudWxsO3RoaXMuZ2E9W107dGhpcy5DPXt9O3RoaXMuVj17fTt0aGlzLnM9e307dGhpcy5IPW51bGw7dGhpcy5jPXZvaWQgMCE9PWEucGl4ZWxUb2xlcmFuY2U/YS5waXhlbFRvbGVyYW5jZToxMDt0aGlzLmthPWRwLmJpbmQodGhpcyk7dGhpcy5hPW5ldyAkZzt0aGlzLiQ9e1BvaW50OnRoaXMuVmgsTGluZVN0cmluZzp0aGlzLkllLExpbmVhclJpbmc6dGhpcy5JZSxQb2x5Z29uOnRoaXMuV2gsTXVsdGlQb2ludDp0aGlzLlRoLE11bHRpTGluZVN0cmluZzp0aGlzLlNoLE11bHRpUG9seWdvbjp0aGlzLlVoLFxuR2VvbWV0cnlDb2xsZWN0aW9uOnRoaXMuUmgsQ2lyY2xlOnRoaXMuUWh9fXQoYXAsQWYpO2w9YXAucHJvdG90eXBlO2wuT2E9ZnVuY3Rpb24oYSxiKXtiPXZvaWQgMCE9PWI/YjohMDt2YXIgYz12KGEpLGQ9YS5QKCk7aWYoZCl7dmFyIGU9dGhpcy4kW2QuSSgpXTtlJiYodGhpcy5WW2NdPWQuSyhIYSgpKSxlLmNhbGwodGhpcyxhLGQpKX1iJiYodGhpcy5DW2NdPXkoYSxcImNoYW5nZVwiLHRoaXMuUGgsdGhpcykpfTtsLmNnPWZ1bmN0aW9uKGEpe3RoaXMuT2EoYSl9O2wuZGc9ZnVuY3Rpb24oYSl7dGhpcy5JYShhKX07bC5HZT1mdW5jdGlvbihhKXtpZihhIGluc3RhbmNlb2YgbW8pdmFyIGI9YS5mZWF0dXJlO2Vsc2UgYSBpbnN0YW5jZW9mIHljJiYoYj1hLmVsZW1lbnQpO3RoaXMuT2EoYil9O2wuSGU9ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIG1vKXZhciBiPWEuZmVhdHVyZTtlbHNlIGEgaW5zdGFuY2VvZiB5YyYmKGI9YS5lbGVtZW50KTt0aGlzLklhKGIpfTtcbmwuUGg9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtpZih0aGlzLnYpe3ZhciBiPXYoYSk7YiBpbiB0aGlzLnN8fCh0aGlzLnNbYl09YSl9ZWxzZSB0aGlzLmtmKGEpfTtsLklhPWZ1bmN0aW9uKGEsYil7Yj12b2lkIDAhPT1iP2I6ITA7dmFyIGM9dihhKSxkPXRoaXMuVltjXTtpZihkKXt2YXIgZT10aGlzLmEsZj1bXTtlaChlLGQsZnVuY3Rpb24oYil7YT09PWIuZmVhdHVyZSYmZi5wdXNoKGIpfSk7Zm9yKGQ9Zi5sZW5ndGgtMTswPD1kOy0tZCllLnJlbW92ZShmW2RdKX1iJiYoWmIodGhpcy5DW2NdKSxkZWxldGUgdGhpcy5DW2NdKX07XG5sLnNldE1hcD1mdW5jdGlvbihhKXt2YXIgYj10aGlzLkQsYz10aGlzLmdhLGQ7dGhpcy5nP2Q9dGhpcy5nOnRoaXMubCYmKGQ9dGhpcy5sLm1jKCkpO2ImJihjLmZvckVhY2goWmIpLGMubGVuZ3RoPTAsZC5mb3JFYWNoKHRoaXMuZGcsdGhpcykpO0FmLnByb3RvdHlwZS5zZXRNYXAuY2FsbCh0aGlzLGEpO2EmJih0aGlzLmc/Yy5wdXNoKHkodGhpcy5nLFwiYWRkXCIsdGhpcy5HZSx0aGlzKSx5KHRoaXMuZyxcInJlbW92ZVwiLHRoaXMuSGUsdGhpcykpOnRoaXMubCYmYy5wdXNoKHkodGhpcy5sLFwiYWRkZmVhdHVyZVwiLHRoaXMuR2UsdGhpcykseSh0aGlzLmwsXCJyZW1vdmVmZWF0dXJlXCIsdGhpcy5IZSx0aGlzKSksZC5mb3JFYWNoKHRoaXMuY2csdGhpcykpfTtsLmJiPXRlO1xuZnVuY3Rpb24gZXAoYSxiLGMsZCl7dmFyIGU9ZC5CYShbYlswXS1hLmMsYlsxXSthLmNdKSxmPWQuQmEoW2JbMF0rYS5jLGJbMV0tYS5jXSk7ZT1GYShbZSxmXSk7dmFyIGc9Y2goYS5hLGUpO2EuSiYmIWEudSYmKGc9Zy5maWx0ZXIoZnVuY3Rpb24oYSl7cmV0dXJuXCJDaXJjbGVcIiE9PWEuZmVhdHVyZS5QKCkuSSgpfSkpO3ZhciBoPSExO2U9ITE7dmFyIGs9Zj1udWxsO2lmKDA8Zy5sZW5ndGgpe2EuSD1jO2cuc29ydChhLmthKTt2YXIgbT1nWzBdLlQ7aD1cIkNpcmNsZVwiPT09Z1swXS5mZWF0dXJlLlAoKS5JKCk7aWYoYS5KJiYhYS51KXtpZihjPUhmKGQsbVswXSksaD1IZihkLG1bMV0pLGM9cGUoYixjKSxiPXBlKGIsaCksaD1NYXRoLnNxcnQoTWF0aC5taW4oYyxiKSksaD1oPD1hLmMpZT0hMCxmPWM+Yj9tWzFdOm1bMF0saz1IZihkLGYpfWVsc2UgYS51JiYoZj1oP2plKGMsZ1swXS5mZWF0dXJlLlAoKSk6bGUoYyxtKSxrPUhmKGQsZikscWUoYixrKTw9YS5jJiYoZT0hMCxhLkomJlxuIWgmJihjPUhmKGQsbVswXSksaD1IZihkLG1bMV0pLGM9cGUoayxjKSxiPXBlKGssaCksaD1NYXRoLnNxcnQoTWF0aC5taW4oYyxiKSksaD1oPD1hLmMpKSkmJihmPWM+Yj9tWzFdOm1bMF0saz1IZihkLGYpKTtlJiYoaz1bTWF0aC5yb3VuZChrWzBdKSxNYXRoLnJvdW5kKGtbMV0pXSl9cmV0dXJue0tpOmUsdmVydGV4OmYsVGk6a319bC5rZj1mdW5jdGlvbihhKXt0aGlzLklhKGEsITEpO3RoaXMuT2EoYSwhMSl9O1xubC5RaD1mdW5jdGlvbihhLGIpe3ZhciBjPWIuQSxkPWIuVyxlPW5ldyB6KG51bGwsZCk7Yyo9MzM7Zm9yKHZhciBmPUFycmF5KGMpLGc9MDtnPGM7ZysrKWZbZ109MDtYZShlLGQsZixbZi5sZW5ndGhdKTtkPWIuYmEoKTtiPWIuSWIoKTtjPWUubztmPWUuVztnPWUuQTtmb3IodmFyIGg9ZS5RYSgpLGs9Yy5sZW5ndGgvZy0xLG0sbixwPTA7cDw9azsrK3Apbj1wKmcsbT0wKzIqemEocCxrKSpNYXRoLlBJL2ssY1tuXT1kWzBdK2IqTWF0aC5jb3MobSksY1tuKzFdPWRbMV0rYipNYXRoLnNpbihtKTtYZShlLGYsYyxoKTtlPWUuRygpWzBdO2Q9MDtmb3IoYj1lLmxlbmd0aC0xO2Q8YjsrK2QpYz1lLnNsaWNlKGQsZCsyKSxmPXtmZWF0dXJlOmEsVDpjfSx0aGlzLmEuYWEoRmEoYyksZil9O2wuUmg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLmE7Zm9yKGI9MDtiPGMubGVuZ3RoOysrYil7dmFyIGQ9dGhpcy4kW2NbYl0uSSgpXTtkJiZkLmNhbGwodGhpcyxhLGNbYl0pfX07XG5sLkllPWZ1bmN0aW9uKGEsYil7Yj1iLkcoKTt2YXIgYzt2YXIgZD0wO2ZvcihjPWIubGVuZ3RoLTE7ZDxjOysrZCl7dmFyIGU9Yi5zbGljZShkLGQrMik7dmFyIGY9e2ZlYXR1cmU6YSxUOmV9O3RoaXMuYS5hYShGYShlKSxmKX19O2wuU2g9ZnVuY3Rpb24oYSxiKXtiPWIuRygpO3ZhciBjLGQ7dmFyIGU9MDtmb3IoZD1iLmxlbmd0aDtlPGQ7KytlKXt2YXIgZj1iW2VdO3ZhciBnPTA7Zm9yKGM9Zi5sZW5ndGgtMTtnPGM7KytnKXt2YXIgaD1mLnNsaWNlKGcsZysyKTt2YXIgaz17ZmVhdHVyZTphLFQ6aH07dGhpcy5hLmFhKEZhKGgpLGspfX19O2wuVGg9ZnVuY3Rpb24oYSxiKXt2YXIgYz1iLkcoKSxkO3ZhciBlPTA7Zm9yKGQ9Yy5sZW5ndGg7ZTxkOysrZSl7dmFyIGY9Y1tlXTtmPXtmZWF0dXJlOmEsVDpbZixmXX07dGhpcy5hLmFhKGIuSygpLGYpfX07XG5sLlVoPWZ1bmN0aW9uKGEsYil7Yj1iLkcoKTt2YXIgYyxkLGU7dmFyIGY9MDtmb3IoZT1iLmxlbmd0aDtmPGU7KytmKXt2YXIgZz1iW2ZdO3ZhciBoPTA7Zm9yKGQ9Zy5sZW5ndGg7aDxkOysraCl7dmFyIGs9Z1toXTt2YXIgbT0wO2ZvcihjPWsubGVuZ3RoLTE7bTxjOysrbSl7dmFyIG49ay5zbGljZShtLG0rMik7dmFyIHA9e2ZlYXR1cmU6YSxUOm59O3RoaXMuYS5hYShGYShuKSxwKX19fX07bC5WaD1mdW5jdGlvbihhLGIpe3ZhciBjPWIuRygpO2E9e2ZlYXR1cmU6YSxUOltjLGNdfTt0aGlzLmEuYWEoYi5LKCksYSl9O2wuV2g9ZnVuY3Rpb24oYSxiKXtiPWIuRygpO3ZhciBjLGQ7dmFyIGU9MDtmb3IoZD1iLmxlbmd0aDtlPGQ7KytlKXt2YXIgZj1iW2VdO3ZhciBnPTA7Zm9yKGM9Zi5sZW5ndGgtMTtnPGM7KytnKXt2YXIgaD1mLnNsaWNlKGcsZysyKTt2YXIgaz17ZmVhdHVyZTphLFQ6aH07dGhpcy5hLmFhKEZhKGgpLGspfX19O1xuZnVuY3Rpb24gYnAoYSl7dmFyIGI9ZXAodGhpcyxhLnBpeGVsLGEuY29vcmRpbmF0ZSxhLm1hcCk7Yi5LaSYmKGEuY29vcmRpbmF0ZT1iLnZlcnRleC5zbGljZSgwLDIpLGEucGl4ZWw9Yi5UaSk7cmV0dXJuIEJmLmNhbGwodGhpcyxhKX1mdW5jdGlvbiBjcCgpe3ZhciBhPWFiKHRoaXMucyk7YS5sZW5ndGgmJihhLmZvckVhY2godGhpcy5rZix0aGlzKSx0aGlzLnM9e30pO3JldHVybiExfWZ1bmN0aW9uIGRwKGEsYil7cmV0dXJuIHJlKHRoaXMuSCxhLlQpLXJlKHRoaXMuSCxiLlQpfTtmdW5jdGlvbiBmcChhKXtSbi5jYWxsKHRoaXMsYSk7dGhpcy52PXZnKCk7dGhpcy5pPW51bGx9dChmcCxSbik7ZnAucHJvdG90eXBlLkQ9ZnVuY3Rpb24oYSxiLGMpe1RuKHRoaXMsXCJwcmVjb21wb3NlXCIsYyxhLHZvaWQgMCk7dmFyIGQ9dGhpcy5oYSgpO2lmKGQpe3ZhciBlPWIuZXh0ZW50LGY9dm9pZCAwIT09ZSYmIU1hKGUsYS5leHRlbnQpJiZWYShlLGEuZXh0ZW50KTtmJiZTbihjLGEsZSk7ZT10aGlzLnU7dmFyIGc9Yy5nbG9iYWxBbHBoYTtjLmdsb2JhbEFscGhhPWIub3BhY2l0eTtjLmRyYXdJbWFnZShkLDAsMCwrZC53aWR0aCwrZC5oZWlnaHQsTWF0aC5yb3VuZChlWzRdKSxNYXRoLnJvdW5kKGVbNV0pLE1hdGgucm91bmQoZC53aWR0aCplWzBdKSxNYXRoLnJvdW5kKGQuaGVpZ2h0KmVbM10pKTtjLmdsb2JhbEFscGhhPWc7ZiYmYy5yZXN0b3JlKCl9VG4odGhpcyxcInBvc3Rjb21wb3NlXCIsYyxhLHZvaWQgMCl9O1xuZnAucHJvdG90eXBlLmw9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj10aGlzLmE7cmV0dXJuIGYuY2EoKS5YKGEsYi52aWV3U3RhdGUucmVzb2x1dGlvbixiLnZpZXdTdGF0ZS5yb3RhdGlvbixjLGIuc2tpcHBlZEZlYXR1cmVVaWRzLGZ1bmN0aW9uKGEpe3JldHVybiBkLmNhbGwoZSxhLGYpfSl9O1xuZnAucHJvdG90eXBlLkw9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5oYSgpKXtpZih0aGlzLmEuY2EoKS5YIT09bmEpcmV0dXJuIFJuLnByb3RvdHlwZS5MLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt2YXIgZT14Zyh0aGlzLnYsYS5zbGljZSgpKTtvZShlLGIudmlld1N0YXRlLnJlc29sdXRpb24vdGhpcy5jKTt0aGlzLml8fCh0aGlzLmk9SGMoMSwxKSk7dGhpcy5pLmNsZWFyUmVjdCgwLDAsMSwxKTt0aGlzLmkuZHJhd0ltYWdlKHRoaXMuaGEoKSxlWzBdLGVbMV0sMSwxLDAsMCwxLDEpO2U9dGhpcy5pLmdldEltYWdlRGF0YSgwLDAsMSwxKS5kYXRhO2lmKDA8ZVszXSlyZXR1cm4gYy5jYWxsKGQsdGhpcy5hLGUpfX07ZnVuY3Rpb24gZ3AoYSl7ZnAuY2FsbCh0aGlzLGEpO3RoaXMuY29udGV4dD1udWxsPT09dGhpcy5jb250ZXh0P251bGw6SGMoKTt0aGlzLmc9bnVsbDt0aGlzLnM9W107dGhpcy5WPUhhKCk7dGhpcy4kPW5ldyByYSgwLDAsMCwwKTt0aGlzLnU9dmcoKX10KGdwLGZwKTtmdW5jdGlvbiBocChhLGIpe2I9Yi5zdGF0ZTthPWEuYS5nZXQoXCJ1c2VJbnRlcmltVGlsZXNPbkVycm9yXCIpO3JldHVybiAyPT1ifHw0PT1ifHwzPT1iJiYhYX1cbmdwLnByb3RvdHlwZS5IPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5waXhlbFJhdGlvLGQ9YS5zaXplLGU9YS52aWV3U3RhdGUsZj1lLnByb2plY3Rpb24sZz1lLnJlc29sdXRpb24saD1lLmNlbnRlcixrPXRoaXMuYTtlPWsuY2EoKTt2YXIgbT1lLmosbj1lLkxhKGYpLHA9UWIobixnLDApLHI9bi5iW3BdLHU9TWF0aC5yb3VuZChnL3IpfHwxLEQ9YS5leHRlbnQ7dm9pZCAwIT09Yi5leHRlbnQmJihEPVVhKEQsYi5leHRlbnQpKTtpZihZYShEKSlyZXR1cm4hMTtiPUtiKG4sRCxyKTt2YXIgRj1uLmY/bi5mOm4ualtwXTt2YXIgQz1uLmJbcF0sQT1FYShPYihuLHApLG4uZyk7Rj1OYShGWzBdK2IuTypBWzBdKkMsRlsxXStiLlMqQVsxXSpDLEZbMF0rKGIuUisxKSpBWzBdKkMsRlsxXSsoYi5VKzEpKkFbMV0qQyx2b2lkIDApO0M9ZS5jYyhjKTtBPXt9O0FbcF09e307dmFyIEg9TW4oZSxmLEEpLEs9dGhpcy5WLGNhPXRoaXMuJCxSPSExLFosVTtmb3IoWj1iLk87Wjw9Yi5SOysrWilmb3IoVT1cbmIuUztVPD1iLlU7KytVKXt2YXIgRz1pcChlLHAsWixVLGMsZik7aWYoMz09Ry5zdGF0ZSlpZihrLmdldChcInVzZUludGVyaW1UaWxlc09uRXJyb3JcIikpMDxrLmdldChcInByZWxvYWRcIikmJihSPSEwKTtlbHNle3ZhciB4PUc7eC5zdGF0ZT0yO2duKHgpfWlmKCFocCh0aGlzLEcpKWE6aWYoRy5iKXt4PUcuYjtkb3tpZigyPT14LnN0YXRlKXtHPXg7YnJlYWsgYX14PXguYn13aGlsZSh4KX1pZihocCh0aGlzLEcpKTI9PUcuc3RhdGUmJihBW3BdW0cuTmEudG9TdHJpbmcoKV09RyxSfHwtMSE9dGhpcy5zLmluZGV4T2YoRyl8fChSPSEwKSk7ZWxzZXthOnt4PW47dmFyIEk9Ry5OYSx3YT1ILENhPWNhLFhiPVBiKHgsSSxLKTtmb3IoST1JWzBdLTE7ST49eC5taW5ab29tOyl7aWYod2EuY2FsbChudWxsLEksTWIoeCxYYixJLENhKSkpe3g9ITA7YnJlYWsgYX0tLUl9eD0hMX14fHwoeD1uLEc9Ry5OYSx3YT1jYSxHWzBdPHgubWF4Wm9vbT8oQ2E9UGIoeCxHLEspLEc9TWIoeCxDYSxHWzBdKzEsXG53YSkpOkc9bnVsbCxHJiZIKHArMSxHKSl9fUc9YS52aWV3SGludHM7Rz1HWzBdfHxHWzFdO2lmKCEodGhpcy5jJiYxNjxEYXRlLm5vdygpLWEudGltZSYmR3x8IVImJnRoaXMuZyYmTWEodGhpcy5nLEQpJiZ0aGlzLko9PW0mJnU9PXRoaXMuQyYmKEd8fHIqYy9DKnU9PXRoaXMuYykpKXtpZihHPXRoaXMuY29udGV4dClVPWpwKGUscCxjLGYpLFo9TWF0aC5yb3VuZCgoYi5SLWIuTysxKSpVWzBdL3UpLFU9TWF0aC5yb3VuZCgoYi5VLWIuUysxKSpVWzFdL3UpLFI9Ry5jYW52YXMsUi53aWR0aCE9Wnx8Ui5oZWlnaHQhPVU/KHRoaXMuQz11LFIud2lkdGg9WixSLmhlaWdodD1VKTooRy5jbGVhclJlY3QoMCwwLFosVSksdT10aGlzLkMpO3RoaXMucy5sZW5ndGg9MDtSPU9iamVjdC5rZXlzKEEpLm1hcChOdW1iZXIpO1Iuc29ydChmYSk7Y2E9MDtmb3IoeD1SLmxlbmd0aDtjYTx4OysrY2Epe0c9UltjYV07SD1qcChlLEcsYyxmKTtaPW4uYltHXTt3YT1aL3I7Q2E9QyplLmFlKGYpO1hiPUFbR107XG5mb3IodmFyIEdhIGluIFhiKXtHPVhiW0dhXTtVPVBiKG4sRy5OYSxLKTtaPShVWzBdLUZbMF0pL3IqQy91O1U9KEZbM10tVVszXSkvcipDL3U7dmFyIHpjPUhbMF0qd2EvdTt2YXIgZWM9SFsxXSp3YS91O0k9Rzt2YXIgZmM9YSxxYT1DYTt0aGlzLmEuY2EoKS5aYyhmYy52aWV3U3RhdGUucHJvamVjdGlvbil8fHRoaXMuY29udGV4dC5jbGVhclJlY3QoWixVLHpjLGVjKTsoST1JLmhhKHRoaXMuYSkpJiZ0aGlzLmNvbnRleHQuZHJhd0ltYWdlKEkscWEscWEsSS53aWR0aC0yKnFhLEkuaGVpZ2h0LTIqcWEsWixVLHpjLGVjKTt0aGlzLnMucHVzaChHKX19dGhpcy5KPW07dGhpcy5jPXIqYy9DKnU7dGhpcy5nPUZ9R2E9dGhpcy5jL2c7R2E9eWcodGhpcy51LGMqZFswXS8yLGMqZFsxXS8yLEdhLEdhLDAsKHRoaXMuZ1swXS1oWzBdKS90aGlzLmMqYywoaFsxXS10aGlzLmdbM10pL3RoaXMuYypjKTt5Zyh0aGlzLnYsYypkWzBdLzItR2FbNF0sYypkWzFdLzItR2FbNV0sYy9nLC1jL2csMCxcbi1oWzBdLC1oWzFdKTtkPWEudXNlZFRpbGVzO2c9dihlKS50b1N0cmluZygpO2g9cC50b1N0cmluZygpO2cgaW4gZD9oIGluIGRbZ10/KGQ9ZFtnXVtoXSxiLk88ZC5PJiYoZC5PPWIuTyksYi5SPmQuUiYmKGQuUj1iLlIpLGIuUzxkLlMmJihkLlM9Yi5TKSxiLlU+ZC5VJiYoZC5VPWIuVSkpOmRbZ11baF09YjooZFtnXT17fSxkW2ddW2hdPWIpO2s9ay5nZXQoXCJwcmVsb2FkXCIpO2I9dihlKS50b1N0cmluZygpO2IgaW4gYS53YW50ZWRUaWxlc3x8KGEud2FudGVkVGlsZXNbYl09e30pO2Q9YS53YW50ZWRUaWxlc1tiXTtnPWEudGlsZVF1ZXVlO2g9bi5taW5ab29tO2ZvcihGPXA7Rj49aDstLUYpe3ZhciB3Yj1NYihuLEQsRix3Yik7bT1uLmJbRl07Zm9yKHI9d2IuTztyPD13Yi5SOysrcilmb3IodT13Yi5TO3U8PXdiLlU7Kyt1KXAtRjw9az8oR2E9aXAoZSxGLHIsdSxjLGYpLDA9PUdhLnN0YXRlJiYoZFtHYS5YYSgpXT0hMCxHYS5YYSgpaW4gZy5qfHxnLmcoW0dhLGIsTmIobixHYS5OYSksXG5tXSkpKTplLm1mKEYscix1LGYpfU9uKGEsZSk7UW4oYSxlKTtyZXR1cm4gMDx0aGlzLnMubGVuZ3RofTtncC5wcm90b3R5cGUuaGE9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmNvbnRleHQ7cmV0dXJuIGE/YS5jYW52YXM6bnVsbH07ZnVuY3Rpb24ga3AoYSl7YT1hP2E6e307dmFyIGI9WmEoe30sYSk7ZGVsZXRlIGIucHJlbG9hZDtkZWxldGUgYi51c2VJbnRlcmltVGlsZXNPbkVycm9yO3NnLmNhbGwodGhpcyxiKTt0aGlzLnNldChcInByZWxvYWRcIix2b2lkIDAhPT1hLnByZWxvYWQ/YS5wcmVsb2FkOjApO3RoaXMuc2V0KFwidXNlSW50ZXJpbVRpbGVzT25FcnJvclwiLHZvaWQgMCE9PWEudXNlSW50ZXJpbVRpbGVzT25FcnJvcj9hLnVzZUludGVyaW1UaWxlc09uRXJyb3I6ITApfXQoa3Asc2cpO2twLnByb3RvdHlwZS5OYz1mdW5jdGlvbihhKXt2YXIgYj1udWxsO1wiY2FudmFzXCI9PT1hLkkoKSYmKGI9bmV3IGdwKHRoaXMpKTtyZXR1cm4gYn07ZnVuY3Rpb24gbHAoYSxiKXt2YXIgYz0vXFx7elxcfS9nLGQ9L1xce3hcXH0vZyxlPS9cXHt5XFx9L2csZj0vXFx7LXlcXH0vZztyZXR1cm4gZnVuY3Rpb24oZyl7aWYoZylyZXR1cm4gYS5yZXBsYWNlKGMsZ1swXS50b1N0cmluZygpKS5yZXBsYWNlKGQsZ1sxXS50b1N0cmluZygpKS5yZXBsYWNlKGUsZnVuY3Rpb24oKXtyZXR1cm4oLWdbMl0tMSkudG9TdHJpbmcoKX0pLnJlcGxhY2UoZixmdW5jdGlvbigpe3ZhciBhPWIuYT9iLmFbZ1swXV06bnVsbDt3KGEsNTUpO3JldHVybihhLlUtYS5TKzErZ1syXSkudG9TdHJpbmcoKX0pfX1mdW5jdGlvbiBtcChhLGIpe2Zvcih2YXIgYz1hLmxlbmd0aCxkPUFycmF5KGMpLGU9MDtlPGM7KytlKWRbZV09bHAoYVtlXSxiKTtyZXR1cm4gbnAoZCl9ZnVuY3Rpb24gbnAoYSl7cmV0dXJuIDE9PT1hLmxlbmd0aD9hWzBdOmZ1bmN0aW9uKGIsYyxkKXtpZihiKXJldHVybiBhW3phKChiWzFdPDxiWzBdKStiWzJdLGEubGVuZ3RoKV0oYixjLGQpfX1cbmZ1bmN0aW9uIG9wKCl7fWZ1bmN0aW9uIHBwKGEpe3ZhciBiPVtdLGM9L1xceyhbYS16XSktKFthLXpdKVxcfS8uZXhlYyhhKTtpZihjKXt2YXIgZD1jWzJdLmNoYXJDb2RlQXQoMCksZTtmb3IoZT1jWzFdLmNoYXJDb2RlQXQoMCk7ZTw9ZDsrK2UpYi5wdXNoKGEucmVwbGFjZShjWzBdLFN0cmluZy5mcm9tQ2hhckNvZGUoZSkpKTtyZXR1cm4gYn1pZihjPWM9L1xceyhcXGQrKS0oXFxkKylcXH0vLmV4ZWMoYSkpe2Q9cGFyc2VJbnQoY1syXSwxMCk7Zm9yKGU9cGFyc2VJbnQoY1sxXSwxMCk7ZTw9ZDtlKyspYi5wdXNoKGEucmVwbGFjZShjWzBdLGUudG9TdHJpbmcoKSkpO3JldHVybiBifWIucHVzaChhKTtyZXR1cm4gYn07ZnVuY3Rpb24gcXAoYSl7ZmguY2FsbCh0aGlzKTt0aGlzLmhpZ2hXYXRlck1hcms9dm9pZCAwIT09YT9hOjIwNDh9dChxcCxmaCk7cXAucHJvdG90eXBlLkZiPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjO3RoaXMuYT50aGlzLmhpZ2hXYXRlck1hcms7KXtiPXRoaXMuYi50YjtjPWIuTmFbMF0udG9TdHJpbmcoKTt2YXIgZDtpZihkPWMgaW4gYSliPWIuTmEsZD1zYShhW2NdLGJbMV0sYlsyXSk7aWYoZClicmVhaztlbHNlIGhjKHRoaXMucG9wKCkpfX07ZnVuY3Rpb24gcnAoYSl7Zm8uY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YS5hdHRyaWJ1dGlvbnMsZXh0ZW50OmEuZXh0ZW50LGxvZ286YS5sb2dvLHByb2plY3Rpb246YS5wcm9qZWN0aW9uLHN0YXRlOmEuc3RhdGUsd3JhcFg6YS53cmFwWH0pO3RoaXMua2E9dm9pZCAwIT09YS5vcGFxdWU/YS5vcGFxdWU6ITE7dGhpcy5zYT12b2lkIDAhPT1hLnRpbGVQaXhlbFJhdGlvP2EudGlsZVBpeGVsUmF0aW86MTt0aGlzLnRpbGVHcmlkPXZvaWQgMCE9PWEudGlsZUdyaWQ/YS50aWxlR3JpZDpudWxsO3RoaXMuYT1uZXcgcXAoYS5jYWNoZVNpemUpO3RoaXMuYz1bMCwwXTt0aGlzLm1iPVwiXCJ9dChycCxmbyk7bD1ycC5wcm90b3R5cGU7bC5qZD1mdW5jdGlvbigpe3ZhciBhPXRoaXMuYTtyZXR1cm4gYS5hPmEuaGlnaFdhdGVyTWFya307bC5GYj1mdW5jdGlvbihhLGIpeyhhPXRoaXMuYmMoYSkpJiZhLkZiKGIpfTtcbmZ1bmN0aW9uIE5uKGEsYixjLGQsZSl7Yj1hLmJjKGIpO2lmKCFiKXJldHVybiExO2Zvcih2YXIgZj0hMCxnLGgsaz1kLk87azw9ZC5SOysraylmb3IodmFyIG09ZC5TO208PWQuVTsrK20pZz1hLkhiKGMsayxtKSxoPSExLGIuai5oYXNPd25Qcm9wZXJ0eShnKSYmKGc9Yi5nZXQoZyksKGg9Mj09PWcuc3RhdGUpJiYoaD0hMSE9PWUoZykpKSxofHwoZj0hMSk7cmV0dXJuIGZ9bC5hZT1mdW5jdGlvbigpe3JldHVybiAwfTtmdW5jdGlvbiBzcChhLGIpe2EubWIhPT1iJiYoYS5tYj1iLGEuYigpKX1sLkhiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gYStcIi9cIitiK1wiL1wiK2N9O2wuWmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5rYX07XG5sLkxhPWZ1bmN0aW9uKGEpe2lmKHRoaXMudGlsZUdyaWQpYT10aGlzLnRpbGVHcmlkO2Vsc2V7dmFyIGI9YS5jO2lmKCFiKXtiPVRiKGEpO3ZhciBjPVNiKGIsdm9pZCAwLHZvaWQgMCk7Yj1uZXcgSGIoe2V4dGVudDpiLG9yaWdpbjpXYShiKSxyZXNvbHV0aW9uczpjLHRpbGVTaXplOnZvaWQgMH0pO2EuYz1ifWE9Yn1yZXR1cm4gYX07bC5iYz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLko7cmV0dXJuIGImJiFDYihiLGEpP251bGw6dGhpcy5hfTtsLmNjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2F9O2Z1bmN0aW9uIGpwKGEsYixjLGQpe2Q9YS5MYShkKTtjPWEuY2MoYyk7Yj1FYShPYihkLGIpLGEuYyk7cmV0dXJuIDE9PWM/YjpEYShiLGMsYS5jKX1sLmxjPWZ1bmN0aW9uKCl7dGhpcy5hLmNsZWFyKCk7dGhpcy5iKCl9O2wubWY9bmE7ZnVuY3Rpb24gdHAoYSxiKXtpYy5jYWxsKHRoaXMsYSk7dGhpcy50aWxlPWJ9dCh0cCxpYyk7ZnVuY3Rpb24gdXAoYSl7cnAuY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YS5hdHRyaWJ1dGlvbnMsY2FjaGVTaXplOmEuY2FjaGVTaXplLGV4dGVudDphLmV4dGVudCxsb2dvOmEubG9nbyxvcGFxdWU6YS5vcGFxdWUscHJvamVjdGlvbjphLnByb2plY3Rpb24sc3RhdGU6YS5zdGF0ZSx0aWxlR3JpZDphLnRpbGVHcmlkLHRpbGVQaXhlbFJhdGlvOmEudGlsZVBpeGVsUmF0aW8sd3JhcFg6YS53cmFwWH0pO3RoaXMudGlsZUxvYWRGdW5jdGlvbj1hLnRpbGVMb2FkRnVuY3Rpb247dGhpcy50aWxlVXJsRnVuY3Rpb249dGhpcy5VYT90aGlzLlVhLmJpbmQodGhpcyk6b3A7dGhpcy51cmxzPW51bGw7aWYoYS51cmxzKXRoaXMueWQoYS51cmxzKTtlbHNlIGlmKGEudXJsKXt2YXIgYj1hLnVybCxjPXRoaXMudXJscz1wcChiKTt2cCh0aGlzLHRoaXMuVWE/dGhpcy5VYS5iaW5kKHRoaXMpOm1wKGMsdGhpcy50aWxlR3JpZCksYil9YS50aWxlVXJsRnVuY3Rpb24mJnZwKHRoaXMsYS50aWxlVXJsRnVuY3Rpb24pfVxudCh1cCxycCk7dXAucHJvdG90eXBlLlY9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtzd2l0Y2goYS5zdGF0ZSl7Y2FzZSAxOnRoaXMuZihuZXcgdHAoXCJ0aWxlbG9hZHN0YXJ0XCIsYSkpO2JyZWFrO2Nhc2UgMjp0aGlzLmYobmV3IHRwKFwidGlsZWxvYWRlbmRcIixhKSk7YnJlYWs7Y2FzZSAzOnRoaXMuZihuZXcgdHAoXCJ0aWxlbG9hZGVycm9yXCIsYSkpfX07ZnVuY3Rpb24gdnAoYSxiLGMpe2EudGlsZVVybEZ1bmN0aW9uPWI7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBjP3NwKGEsYyk6YS5iKCl9dXAucHJvdG90eXBlLnlkPWZ1bmN0aW9uKGEpe3RoaXMudXJscz1hO3ZhciBiPWEuam9pbihcIlxcblwiKTt2cCh0aGlzLHRoaXMuVWE/dGhpcy5VYS5iaW5kKHRoaXMpOm1wKGEsdGhpcy50aWxlR3JpZCksYil9O3VwLnByb3RvdHlwZS5tZj1mdW5jdGlvbihhLGIsYyl7YT10aGlzLkhiKGEsYixjKTt0aGlzLmEuai5oYXNPd25Qcm9wZXJ0eShhKSYmdGhpcy5hLmdldChhKX07ZnVuY3Rpb24gd3AoYSl7dXAuY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YS5hdHRyaWJ1dGlvbnMsY2FjaGVTaXplOmEuY2FjaGVTaXplLGV4dGVudDphLmV4dGVudCxsb2dvOmEubG9nbyxvcGFxdWU6YS5vcGFxdWUscHJvamVjdGlvbjphLnByb2plY3Rpb24sc3RhdGU6YS5zdGF0ZSx0aWxlR3JpZDphLnRpbGVHcmlkLHRpbGVMb2FkRnVuY3Rpb246YS50aWxlTG9hZEZ1bmN0aW9uP2EudGlsZUxvYWRGdW5jdGlvbjp4cCx0aWxlUGl4ZWxSYXRpbzphLnRpbGVQaXhlbFJhdGlvLHRpbGVVcmxGdW5jdGlvbjphLnRpbGVVcmxGdW5jdGlvbix1cmw6YS51cmwsdXJsczphLnVybHMsd3JhcFg6YS53cmFwWH0pO3RoaXMuY3Jvc3NPcmlnaW49dm9pZCAwIT09YS5jcm9zc09yaWdpbj9hLmNyb3NzT3JpZ2luOm51bGw7dGhpcy50aWxlQ2xhc3M9YS50aWxlQ2xhc3M/YS50aWxlQ2xhc3M6aG59dCh3cCx1cCk7bD13cC5wcm90b3R5cGU7bC5qZD1mdW5jdGlvbigpe3JldHVybiB1cC5wcm90b3R5cGUuamQuY2FsbCh0aGlzKX07XG5sLkZiPWZ1bmN0aW9uKGEsYil7dXAucHJvdG90eXBlLkZiLmNhbGwodGhpcyxhLGIpfTtsLmFlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmUoKX07bC5iZT1mdW5jdGlvbigpe3JldHVybiAwfTtsLlpjPWZ1bmN0aW9uKGEpe3JldHVybiB1cC5wcm90b3R5cGUuWmMuY2FsbCh0aGlzLGEpfTtsLkxhPWZ1bmN0aW9uKGEpe3JldHVybiB1cC5wcm90b3R5cGUuTGEuY2FsbCh0aGlzLGEpfTtsLmJjPWZ1bmN0aW9uKGEpe3JldHVybiB1cC5wcm90b3R5cGUuYmMuY2FsbCh0aGlzLGEpfTtcbmZ1bmN0aW9uIHlwKGEsYixjLGQsZSxmLGcpe2Q9Yj1bYixjLGRdO3ZhciBoPXZvaWQgMCE9PWY/ZjphLko7Yz1hLkxhKGgpO2lmKGEuRCYmaC5pKXt2YXIgaz1kO2Q9a1swXTt2YXIgbT1OYihjLGspO2g9VGIoaCk7dmFyIG49bVswXSxwPW1bMV07aFswXTw9biYmbjw9aFsyXSYmaFsxXTw9cCYmcDw9aFszXT9kPWs6KGs9WGEoaCksbVswXSs9aypNYXRoLmNlaWwoKGhbMF0tbVswXSkvayksZD1MYihjLG1bMF0sbVsxXSxjLmJbZF0sITEsdm9pZCAwKSl9aD1kWzBdO209ZFsxXTtrPWRbMl07Yz1jLm1pblpvb20+aHx8aD5jLm1heFpvb20/ITE6KGM9KG49Yy5LKCkpP01iKGMsbixoKTpjLmE/Yy5hW2hdOm51bGwpP3NhKGMsbSxrKTohMDtlPShjPWM/ZDpudWxsKT9hLnRpbGVVcmxGdW5jdGlvbihjLGUsZik6dm9pZCAwO2U9bmV3IGEudGlsZUNsYXNzKGIsdm9pZCAwIT09ZT8wOjQsdm9pZCAwIT09ZT9lOlwiXCIsYS5jcm9zc09yaWdpbixhLnRpbGVMb2FkRnVuY3Rpb24pO2Uua2V5PWc7XG55KGUsXCJjaGFuZ2VcIixhLlYsYSk7cmV0dXJuIGV9ZnVuY3Rpb24gaXAoYSxiLGMsZCxlLGYpe3ZhciBnPWEuSGIoYixjLGQpLGg9YS5tYjtpZihhLmEuai5oYXNPd25Qcm9wZXJ0eShnKSl7dmFyIGs9YS5hLmdldChnKTtpZihrLmtleSE9aCl7dmFyIG09aztrPXlwKGEsYixjLGQsZSxmLGgpOzA9PW0uc3RhdGU/ay5iPW0uYjprLmI9bTtpZihrLmIpe2I9ay5iO2M9aztkb3tpZigyPT1iLnN0YXRlKXtiLmI9bnVsbDticmVha31lbHNlIDE9PWIuc3RhdGU/Yz1iOjA9PWIuc3RhdGU/Yy5iPWIuYjpjPWI7Yj1jLmJ9d2hpbGUoYil9YS5hLnJlcGxhY2UoZyxrKX19ZWxzZSBrPXlwKGEsYixjLGQsZSxmLGgpLGEuYS5zZXQoZyxrKTtyZXR1cm4ga31mdW5jdGlvbiB4cChhLGIpe2EuaGEoKS5zcmM9Yn07ZnVuY3Rpb24genAoYSl7YT1hfHx7fTt2YXIgYj12b2lkIDAhPT1hLnByb2plY3Rpb24/YS5wcm9qZWN0aW9uOlwiRVBTRzozODU3XCIsYz12b2lkIDAhPT1hLnRpbGVHcmlkP2EudGlsZUdyaWQ6UmIoe2V4dGVudDpUYihiKSxtYXhab29tOmEubWF4Wm9vbSxtaW5ab29tOmEubWluWm9vbSx0aWxlU2l6ZTphLnRpbGVTaXplfSk7d3AuY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YS5hdHRyaWJ1dGlvbnMsY2FjaGVTaXplOmEuY2FjaGVTaXplLGNyb3NzT3JpZ2luOmEuY3Jvc3NPcmlnaW4sbG9nbzphLmxvZ28sb3BhcXVlOmEub3BhcXVlLHByb2plY3Rpb246YixyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDphLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLHRpbGVHcmlkOmMsdGlsZUxvYWRGdW5jdGlvbjphLnRpbGVMb2FkRnVuY3Rpb24sdGlsZVBpeGVsUmF0aW86YS50aWxlUGl4ZWxSYXRpbyx0aWxlVXJsRnVuY3Rpb246YS50aWxlVXJsRnVuY3Rpb24sdXJsOmEudXJsLHVybHM6YS51cmxzLFxud3JhcFg6dm9pZCAwIT09YS53cmFwWD9hLndyYXBYOiEwfSl9dCh6cCx3cCk7ZnVuY3Rpb24gQXAoYSl7aG8uY2FsbCh0aGlzLHthdHRyaWJ1dGlvbnM6YS5hdHRyaWJ1dGlvbnMsZXh0ZW50OmEuZXh0ZW50LGxvZ286YS5sb2dvLHByb2plY3Rpb246YS5wcm9qZWN0aW9uLHdyYXBYOmEud3JhcFh9KTt0aGlzLnJlc29sdXRpb249dm9pZCAwO3RoaXMuZGlzdGFuY2U9dm9pZCAwIT09YS5kaXN0YW5jZT9hLmRpc3RhbmNlOjIwO3RoaXMuZmVhdHVyZXM9W107dGhpcy5nZW9tZXRyeUZ1bmN0aW9uPWEuZ2VvbWV0cnlGdW5jdGlvbnx8ZnVuY3Rpb24oYSl7YT1hLlAoKTt3KGEgaW5zdGFuY2VvZiBRZSwxMCk7cmV0dXJuIGF9O3RoaXMuc291cmNlPWEuc291cmNlO3RoaXMuc291cmNlLkIoXCJjaGFuZ2VcIixBcC5wcm90b3R5cGUubGMsdGhpcyl9dChBcCxobyk7QXAucHJvdG90eXBlLmVkPWZ1bmN0aW9uKGEsYixjKXt0aGlzLnNvdXJjZS5lZChhLGIsYyk7YiE9PXRoaXMucmVzb2x1dGlvbiYmKHRoaXMuY2xlYXIoKSx0aGlzLnJlc29sdXRpb249YixCcCh0aGlzKSx0aGlzLndiKHRoaXMuZmVhdHVyZXMpKX07XG5BcC5wcm90b3R5cGUubGM9ZnVuY3Rpb24oKXt0aGlzLmNsZWFyKCk7QnAodGhpcyk7dGhpcy53Yih0aGlzLmZlYXR1cmVzKTtoby5wcm90b3R5cGUubGMuY2FsbCh0aGlzKX07ZnVuY3Rpb24gQnAoYSl7aWYodm9pZCAwIT09YS5yZXNvbHV0aW9uKXthLmZlYXR1cmVzLmxlbmd0aD0wO2Zvcih2YXIgYj1IYSgpLGM9YS5kaXN0YW5jZSphLnJlc29sdXRpb24sZD1hLnNvdXJjZS5tYygpLGU9e30sZj0wLGc9ZC5sZW5ndGg7ZjxnO2YrKyl7dmFyIGg9ZFtmXTt2KGgpLnRvU3RyaW5nKClpbiBlfHwhKGg9YS5nZW9tZXRyeUZ1bmN0aW9uKGgpKXx8KGg9aC5HKCksUGEoaCxiKSxKYShiLGMsYiksaD1jaChhLnNvdXJjZS5hLGIpLGg9aC5maWx0ZXIoZnVuY3Rpb24oYSl7YT12KGEpLnRvU3RyaW5nKCk7cmV0dXJuIGEgaW4gZT8hMTplW2FdPSEwfSksYS5mZWF0dXJlcy5wdXNoKENwKGEsaCkpKX19fVxuZnVuY3Rpb24gQ3AoYSxiKXtmb3IodmFyIGM9WzAsMF0sZD1iLmxlbmd0aC0xOzA8PWQ7LS1kKXt2YXIgZT1hLmdlb21ldHJ5RnVuY3Rpb24oYltkXSk7ZT9pZShjLGUuRygpKTpiLnNwbGljZShkLDEpfW9lKGMsMS9iLmxlbmd0aCk7YT1uZXcgRShuZXcgUWUoYykpO2Euc2V0KFwiZmVhdHVyZXNcIixiKTtyZXR1cm4gYX07ZnVuY3Rpb24gRHAoYSxiKXt2YXIgYz1bXTtPYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe251bGwhPT1iW2FdJiZ2b2lkIDAhPT1iW2FdJiZjLnB1c2goYStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoYlthXSkpfSk7dmFyIGQ9Yy5qb2luKFwiJlwiKTthPWEucmVwbGFjZSgvWz8mXSQvLFwiXCIpO2E9LTE9PT1hLmluZGV4T2YoXCI/XCIpP2ErXCI/XCI6YStcIiZcIjtyZXR1cm4gYStkfTtmdW5jdGlvbiBFcChhKXthPWF8fHt9O3ZhciBiO3ZvaWQgMCE9PWEuYXR0cmlidXRpb25zP2I9YS5hdHRyaWJ1dGlvbnM6Yj1bRnBdO3pwLmNhbGwodGhpcyx7YXR0cmlidXRpb25zOmIsY2FjaGVTaXplOmEuY2FjaGVTaXplLGNyb3NzT3JpZ2luOnZvaWQgMCE9PWEuY3Jvc3NPcmlnaW4/YS5jcm9zc09yaWdpbjpcImFub255bW91c1wiLG9wYXF1ZTp2b2lkIDAhPT1hLm9wYXF1ZT9hLm9wYXF1ZTohMCxtYXhab29tOnZvaWQgMCE9PWEubWF4Wm9vbT9hLm1heFpvb206MTkscmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ6YS5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCx0aWxlTG9hZEZ1bmN0aW9uOmEudGlsZUxvYWRGdW5jdGlvbix1cmw6dm9pZCAwIT09YS51cmw/YS51cmw6XCJodHRwczovL3thLWN9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nXCIsd3JhcFg6YS53cmFwWH0pfXQoRXAsenApO3ZhciBGcD1uZXcgVWIoe2h0bWw6JyZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzLid9KTtaZy5vZD17fTtaZy5vZC5GZD1mdW5jdGlvbigpe307XG4oZnVuY3Rpb24oYSl7ZnVuY3Rpb24gYihhLGIsYyl7aWYoZylyZXR1cm4gbmV3IEltYWdlRGF0YShhLGIsYyk7Yj1oLmNyZWF0ZUltYWdlRGF0YShiLGMpO2IuZGF0YS5zZXQoYSk7cmV0dXJuIGJ9ZnVuY3Rpb24gYyhhKXt2YXIgYj0hMDt0cnl7bmV3IEltYWdlRGF0YSgxMCwxMCl9Y2F0Y2gobil7Yj0hMX1yZXR1cm4gZnVuY3Rpb24oYyl7dmFyIGQ9Yy5idWZmZXJzLGU9Yy5tZXRhLGY9Yy53aWR0aCxnPWMuaGVpZ2h0LGg9ZC5sZW5ndGgsaz1kWzBdLmJ5dGVMZW5ndGg7aWYoYy5pbWFnZU9wcyl7az1BcnJheShoKTtmb3IoYz0wO2M8aDsrK2Mpe3ZhciBtPWM7dmFyIG49bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGRbY10pO3ZhciBLPWYsY2E9ZztuPWI/bmV3IEltYWdlRGF0YShuLEssY2EpOntkYXRhOm4sd2lkdGg6SyxoZWlnaHQ6Y2F9O2tbbV09bn1mPWEoayxlKS5kYXRhfWVsc2V7Zj1uZXcgVWludDhDbGFtcGVkQXJyYXkoayk7Zz1BcnJheShoKTttPUFycmF5KGgpO2ZvcihjPTA7Yzxcbmg7KytjKWdbY109bmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGRbY10pLG1bY109WzAsMCwwLDBdO2ZvcihkPTA7ZDxrO2QrPTQpe2ZvcihjPTA7YzxoOysrYyluPWdbY10sbVtjXVswXT1uW2RdLG1bY11bMV09bltkKzFdLG1bY11bMl09bltkKzJdLG1bY11bM109bltkKzNdO2M9YShtLGUpO2ZbZF09Y1swXTtmW2QrMV09Y1sxXTtmW2QrMl09Y1syXTtmW2QrM109Y1szXX19cmV0dXJuIGYuYnVmZmVyfX1mdW5jdGlvbiBkKGEsYil7dmFyIGQ9T2JqZWN0LmtleXMoYS5saWJ8fHt9KS5tYXAoZnVuY3Rpb24oYil7cmV0dXJuXCJ2YXIgXCIrYitcIiA9IFwiK2EubGliW2JdLnRvU3RyaW5nKCkrXCI7XCJ9KS5jb25jYXQoW1widmFyIF9fbWluaW9uX18gPSAoXCIrYy50b1N0cmluZygpK1wiKShcIixhLm9wZXJhdGlvbi50b1N0cmluZygpLFwiKTtcIiwnc2VsZi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBmdW5jdGlvbihldmVudCkgeycsXCIgIHZhciBidWZmZXIgPSBfX21pbmlvbl9fKGV2ZW50LmRhdGEpO1wiLFxuXCIgIHNlbGYucG9zdE1lc3NhZ2Uoe2J1ZmZlcjogYnVmZmVyLCBtZXRhOiBldmVudC5kYXRhLm1ldGF9LCBbYnVmZmVyXSk7XCIsXCJ9KTtcIl0pO2Q9VVJMLmNyZWF0ZU9iamVjdFVSTChuZXcgQmxvYihkLHt0eXBlOlwidGV4dC9qYXZhc2NyaXB0XCJ9KSk7ZD1uZXcgV29ya2VyKGQpO2QuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixiKTtyZXR1cm4gZH1mdW5jdGlvbiBlKGEsYil7dmFyIGQ9YyhhLm9wZXJhdGlvbik7cmV0dXJue3Bvc3RNZXNzYWdlOmZ1bmN0aW9uKGEpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiKHtkYXRhOntidWZmZXI6ZChhKSxtZXRhOmEubWV0YX19KX0sMCl9fX1mdW5jdGlvbiBmKGEpe3RoaXMuRWM9ISFhLmlqO3ZhciBiOzA9PT1hLnRocmVhZHM/Yj0wOnRoaXMuRWM/Yj0xOmI9YS50aHJlYWRzfHwxO3ZhciBjPVtdO2lmKGIpZm9yKHZhciBmPTA7ZjxiOysrZiljW2ZdPWQoYSx0aGlzLk5kLmJpbmQodGhpcyxmKSk7ZWxzZSBjWzBdPWUoYSx0aGlzLk5kLmJpbmQodGhpcyxcbjApKTt0aGlzLlhiPWM7dGhpcy5PZD1bXTt0aGlzLlZiPTA7dGhpcy5oYj17fTt0aGlzLkZjPW51bGx9dmFyIGc9ITA7dHJ5e25ldyBJbWFnZURhdGEoMTAsMTApfWNhdGNoKGspe2c9ITF9dmFyIGg9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKS5nZXRDb250ZXh0KFwiMmRcIik7Zi5wcm90b3R5cGUuTmY9ZnVuY3Rpb24oKXtpZigwPT09dGhpcy5WYiYmMDx0aGlzLk9kLmxlbmd0aCl7dmFyIGE9dGhpcy5GYz10aGlzLk9kLnNoaWZ0KCksYj1hLmlucHV0c1swXS53aWR0aCxjPWEuaW5wdXRzWzBdLmhlaWdodCxkPWEuaW5wdXRzLm1hcChmdW5jdGlvbihhKXtyZXR1cm4gYS5kYXRhLmJ1ZmZlcn0pLGU9dGhpcy5YYi5sZW5ndGg7dGhpcy5WYj1lO2lmKDE9PT1lKXRoaXMuWGJbMF0ucG9zdE1lc3NhZ2Uoe2J1ZmZlcnM6ZCxtZXRhOmEuVGcsaW1hZ2VPcHM6dGhpcy5FYyx3aWR0aDpiLGhlaWdodDpjfSxkKTtlbHNlIGZvcih2YXIgZj00Kk1hdGguY2VpbChhLmlucHV0c1swXS5kYXRhLmxlbmd0aC9cbjQvZSksZz0wO2c8ZTsrK2cpe2Zvcih2YXIgaD1nKmYsQz1bXSxBPTAsSD1kLmxlbmd0aDtBPEg7KytBKUMucHVzaChkW2ddLnNsaWNlKGgsaCtmKSk7dGhpcy5YYltnXS5wb3N0TWVzc2FnZSh7YnVmZmVyczpDLG1ldGE6YS5UZyxpbWFnZU9wczp0aGlzLkVjLHdpZHRoOmIsaGVpZ2h0OmN9LEMpfX19O2YucHJvdG90eXBlLk5kPWZ1bmN0aW9uKGEsYil7dGhpcy5nanx8KHRoaXMuaGJbYV09Yi5kYXRhLC0tdGhpcy5WYiwwPT09dGhpcy5WYiYmdGhpcy5QZigpKX07Zi5wcm90b3R5cGUuUGY9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLkZjLGM9dGhpcy5YYi5sZW5ndGg7aWYoMT09PWMpe3ZhciBkPW5ldyBVaW50OENsYW1wZWRBcnJheSh0aGlzLmhiWzBdLmJ1ZmZlcik7dmFyIGU9dGhpcy5oYlswXS5tZXRhfWVsc2V7dmFyIGY9YS5pbnB1dHNbMF0uZGF0YS5sZW5ndGg7ZD1uZXcgVWludDhDbGFtcGVkQXJyYXkoZik7ZT1BcnJheShmKTtmPTQqTWF0aC5jZWlsKGYvNC9jKTtmb3IodmFyIGc9XG4wO2c8YzsrK2cpe3ZhciBoPWcqZjtkLnNldChuZXcgVWludDhDbGFtcGVkQXJyYXkodGhpcy5oYltnXS5idWZmZXIpLGgpO2VbZ109dGhpcy5oYltnXS5tZXRhfX10aGlzLkZjPW51bGw7dGhpcy5oYj17fTthLmNhbGxiYWNrKG51bGwsYihkLGEuaW5wdXRzWzBdLndpZHRoLGEuaW5wdXRzWzBdLmhlaWdodCksZSk7dGhpcy5OZigpfTthW1wiZGVmYXVsdFwiXT17RmQ6Zn07YS5GZD1mfSkoWmcub2Q9Wmcub2R8fHt9KTtmdW5jdGlvbiBHcChhKXthPWF8fHt9O3dwLmNhbGwodGhpcyx7YXR0cmlidXRpb25zOmEuYXR0cmlidXRpb25zLGNhY2hlU2l6ZTphLmNhY2hlU2l6ZSxjcm9zc09yaWdpbjphLmNyb3NzT3JpZ2luLGxvZ286YS5sb2dvLHByb2plY3Rpb246YS5wcm9qZWN0aW9uLHJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkOmEucmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQsdGlsZUdyaWQ6YS50aWxlR3JpZCx0aWxlTG9hZEZ1bmN0aW9uOmEudGlsZUxvYWRGdW5jdGlvbix1cmw6YS51cmwsdXJsczphLnVybHMsd3JhcFg6dm9pZCAwIT09YS53cmFwWD9hLndyYXBYOiEwfSk7dGhpcy5pPWEucGFyYW1zfHx7fTt0aGlzLmc9SGEoKTthPTA7dmFyIGI9W10sYztmb3IoYyBpbiB0aGlzLmkpYlthKytdPWMrXCItXCIrdGhpcy5pW2NdO3NwKHRoaXMsYi5qb2luKFwiL1wiKSl9dChHcCx3cCk7R3AucHJvdG90eXBlLmNjPWZ1bmN0aW9uKGEpe3JldHVybiBhfTtcbkdwLnByb3RvdHlwZS5VYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9dGhpcy50aWxlR3JpZDtkfHwoZD10aGlzLkxhKGMpKTtpZighKGQuYi5sZW5ndGg8PWFbMF0pKXt2YXIgZT1QYihkLGEsdGhpcy5nKSxmPUVhKE9iKGQsYVswXSksdGhpcy5jKTsxIT1iJiYoZj1EYShmLGIsdGhpcy5jKSk7ZD17RjpcImltYWdlXCIsRk9STUFUOlwiUE5HMzJcIixUUkFOU1BBUkVOVDohMH07WmEoZCx0aGlzLmkpO3ZhciBnPXRoaXMudXJscztnPyhjPWMuSGEuc3BsaXQoXCI6XCIpLnBvcCgpLGQuU0laRT1mWzBdK1wiLFwiK2ZbMV0sZC5CQk9YPWUuam9pbihcIixcIiksZC5CQk9YU1I9YyxkLklNQUdFU1I9YyxkLkRQST1NYXRoLnJvdW5kKGQuRFBJP2QuRFBJKmI6OTAqYiksYT0oMT09Zy5sZW5ndGg/Z1swXTpnW3phKChhWzFdPDxhWzBdKSthWzJdLGcubGVuZ3RoKV0pLnJlcGxhY2UoL01hcFNlcnZlclxcLz8kLyxcIk1hcFNlcnZlci9leHBvcnRcIikucmVwbGFjZSgvSW1hZ2VTZXJ2ZXJcXC8/JC8sXCJJbWFnZVNlcnZlci9leHBvcnRJbWFnZVwiKSxcbmE9RHAoYSxkKSk6YT12b2lkIDA7cmV0dXJuIGF9fTtmdW5jdGlvbiBIcChhKXthPWF8fHt9O3ZhciBiPWEucGFyYW1zfHx7fTt3cC5jYWxsKHRoaXMse2F0dHJpYnV0aW9uczphLmF0dHJpYnV0aW9ucyxjYWNoZVNpemU6YS5jYWNoZVNpemUsY3Jvc3NPcmlnaW46YS5jcm9zc09yaWdpbixsb2dvOmEubG9nbyxvcGFxdWU6IShcIlRSQU5TUEFSRU5UXCJpbiBiP2IuVFJBTlNQQVJFTlQ6MSkscHJvamVjdGlvbjphLnByb2plY3Rpb24scmVwcm9qZWN0aW9uRXJyb3JUaHJlc2hvbGQ6YS5yZXByb2plY3Rpb25FcnJvclRocmVzaG9sZCx0aWxlQ2xhc3M6YS50aWxlQ2xhc3MsdGlsZUdyaWQ6YS50aWxlR3JpZCx0aWxlTG9hZEZ1bmN0aW9uOmEudGlsZUxvYWRGdW5jdGlvbix1cmw6YS51cmwsdXJsczphLnVybHMsd3JhcFg6dm9pZCAwIT09YS53cmFwWD9hLndyYXBYOiEwfSk7dGhpcy5sPXZvaWQgMCE9PWEuZ3V0dGVyP2EuZ3V0dGVyOjA7dGhpcy5pPWI7dGhpcy5nPSEwO3RoaXMucz1hLnNlcnZlclR5cGU7dGhpcy51PXZvaWQgMCE9PWEuaGlkcGk/XG5hLmhpZHBpOiEwO3RoaXMudj1cIlwiO0lwKHRoaXMpO3RoaXMuSD1IYSgpO2E6e2E9KFwiXCIrKHRoaXMuaS5WRVJTSU9OfHxcIjEuMy4wXCIpKS5zcGxpdChcIi5cIik7Yj1bXCIxXCIsXCIzXCJdO2Zvcih2YXIgYz0wO2M8TWF0aC5tYXgoYS5sZW5ndGgsYi5sZW5ndGgpO2MrKyl7dmFyIGQ9cGFyc2VJbnQoYVtjXXx8XCIwXCIsMTApLGU9cGFyc2VJbnQoYltjXXx8XCIwXCIsMTApO2lmKGQ+ZSl7YT0xO2JyZWFrIGF9aWYoZT5kKXthPS0xO2JyZWFrIGF9fWE9MH10aGlzLmc9MDw9YTthPTA7Yj1bXTtmb3IodmFyIGYgaW4gdGhpcy5pKWJbYSsrXT1mK1wiLVwiK3RoaXMuaVtmXTtzcCh0aGlzLGIuam9pbihcIi9cIikpfXQoSHAsd3ApO2w9SHAucHJvdG90eXBlO1xubC5pZz1mdW5jdGlvbihhLGIsYyxkKXtjPUFiKGMpO3ZhciBlPXRoaXMudGlsZUdyaWQ7ZXx8KGU9dGhpcy5MYShjKSk7Yj1MYihlLGFbMF0sYVsxXSxiLCExLHZvaWQgMCk7aWYoIShlLmIubGVuZ3RoPD1iWzBdKSl7dmFyIGY9ZS5iW2JbMF1dLGc9UGIoZSxiLHRoaXMuSCk7ZT1FYShPYihlLGJbMF0pLHRoaXMuYyk7dmFyIGg9dGhpcy5sO2gmJihlPUJhKGUsaCx0aGlzLmMpLGc9SmEoZyxmKmgsZykpO2g9e1NFUlZJQ0U6XCJXTVNcIixWRVJTSU9OOlwiMS4zLjBcIixSRVFVRVNUOlwiR2V0RmVhdHVyZUluZm9cIixGT1JNQVQ6XCJpbWFnZS9wbmdcIixUUkFOU1BBUkVOVDohMCxRVUVSWV9MQVlFUlM6dGhpcy5pLkxBWUVSU307WmEoaCx0aGlzLmksZCk7ZD1NYXRoLmZsb29yKChnWzNdLWFbMV0pL2YpO2hbdGhpcy5nP1wiSVwiOlwiWFwiXT1NYXRoLmZsb29yKChhWzBdLWdbMF0pL2YpO2hbdGhpcy5nP1wiSlwiOlwiWVwiXT1kO3JldHVybiBKcCh0aGlzLGIsZSxnLDEsYyxoKX19O2wuYmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sfTtcbmwuSGI9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLnYrd3AucHJvdG90eXBlLkhiLmNhbGwodGhpcyxhLGIsYyl9O1xuZnVuY3Rpb24gSnAoYSxiLGMsZCxlLGYsZyl7dmFyIGg9YS51cmxzO2lmKGgpe2cuV0lEVEg9Y1swXTtnLkhFSUdIVD1jWzFdO2dbYS5nP1wiQ1JTXCI6XCJTUlNcIl09Zi5IYTtcIlNUWUxFU1wiaW4gYS5pfHwoZy5TVFlMRVM9XCJcIik7aWYoMSE9ZSlzd2l0Y2goYS5zKXtjYXNlIFwiZ2Vvc2VydmVyXCI6Yz05MCplKy41fDA7Zy5GT1JNQVRfT1BUSU9OUz1cIkZPUk1BVF9PUFRJT05TXCJpbiBnP2cuRk9STUFUX09QVElPTlMrKFwiO2RwaTpcIitjKTpcImRwaTpcIitjO2JyZWFrO2Nhc2UgXCJtYXBzZXJ2ZXJcIjpnLk1BUF9SRVNPTFVUSU9OPTkwKmU7YnJlYWs7Y2FzZSBcImNhcm1lbnRhc2VydmVyXCI6Y2FzZSBcInFnaXNcIjpnLkRQST05MCplO2JyZWFrO2RlZmF1bHQ6dyghMSw1Mil9Zj1mLmI7YS5nJiZcIm5lXCI9PWYuc3Vic3RyKDAsMikmJihhPWRbMF0sZFswXT1kWzFdLGRbMV09YSxhPWRbMl0sZFsyXT1kWzNdLGRbM109YSk7Zy5CQk9YPWQuam9pbihcIixcIik7cmV0dXJuIERwKDE9PWgubGVuZ3RoP2hbMF06aFt6YSgoYlsxXTw8XG5iWzBdKStiWzJdLGgubGVuZ3RoKV0sZyl9fWwuY2M9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMudSYmdm9pZCAwIT09dGhpcy5zP2E6MX07ZnVuY3Rpb24gSXAoYSl7dmFyIGI9MCxjPVtdO2lmKGEudXJscyl7dmFyIGQ7dmFyIGU9MDtmb3IoZD1hLnVybHMubGVuZ3RoO2U8ZDsrK2UpY1tiKytdPWEudXJsc1tlXX1hLnY9Yy5qb2luKFwiI1wiKX1cbmwuVWE9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPXRoaXMudGlsZUdyaWQ7ZHx8KGQ9dGhpcy5MYShjKSk7aWYoIShkLmIubGVuZ3RoPD1hWzBdKSl7MT09Ynx8dGhpcy51JiZ2b2lkIDAhPT10aGlzLnN8fChiPTEpO3ZhciBlPWQuYlthWzBdXSxmPVBiKGQsYSx0aGlzLkgpO2Q9RWEoT2IoZCxhWzBdKSx0aGlzLmMpO3ZhciBnPXRoaXMubDtnJiYoZD1CYShkLGcsdGhpcy5jKSxmPUphKGYsZSpnLGYpKTsxIT1iJiYoZD1EYShkLGIsdGhpcy5jKSk7ZT17U0VSVklDRTpcIldNU1wiLFZFUlNJT046XCIxLjMuMFwiLFJFUVVFU1Q6XCJHZXRNYXBcIixGT1JNQVQ6XCJpbWFnZS9wbmdcIixUUkFOU1BBUkVOVDohMH07WmEoZSx0aGlzLmkpO3JldHVybiBKcCh0aGlzLGEsZCxmLGIsYyxlKX19O2wueWQ9ZnVuY3Rpb24oYSl7d3AucHJvdG90eXBlLnlkLmNhbGwodGhpcyxhKTtJcCh0aGlzKX07ZnVuY3Rpb24gS3AoYSl7dGhpcy5CPWEubWF0cml4SWRzO0hiLmNhbGwodGhpcyx7ZXh0ZW50OmEuZXh0ZW50LG9yaWdpbjphLm9yaWdpbixvcmlnaW5zOmEub3JpZ2lucyxyZXNvbHV0aW9uczphLnJlc29sdXRpb25zLHRpbGVTaXplOmEudGlsZVNpemUsdGlsZVNpemVzOmEudGlsZVNpemVzLHNpemVzOmEuc2l6ZXN9KX10KEtwLEhiKTtmdW5jdGlvbiBMcChhKXtmdW5jdGlvbiBiKGEpe2E9XCJLVlBcIj09ZD9EcChhLGYpOmEucmVwbGFjZSgvXFx7KFxcdys/KVxcfS9nLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGIudG9Mb3dlckNhc2UoKWluIGY/ZltiLnRvTG93ZXJDYXNlKCldOmF9KTtyZXR1cm4gZnVuY3Rpb24oYil7aWYoYil7dmFyIGM9e1RpbGVNYXRyaXg6ZS5CW2JbMF1dLFRpbGVDb2w6YlsxXSxUaWxlUm93Oi1iWzJdLTF9O1phKGMsZyk7Yj1hO3JldHVybiBiPVwiS1ZQXCI9PWQ/RHAoYixjKTpiLnJlcGxhY2UoL1xceyhcXHcrPylcXH0vZyxmdW5jdGlvbihhLGIpe3JldHVybiBjW2JdfSl9fX10aGlzLkg9dm9pZCAwIT09YS52ZXJzaW9uP2EudmVyc2lvbjpcIjEuMC4wXCI7dGhpcy5sPXZvaWQgMCE9PWEuZm9ybWF0P2EuZm9ybWF0OlwiaW1hZ2UvanBlZ1wiO3RoaXMuaT1hLmRpbWVuc2lvbnM/YS5kaW1lbnNpb25zOnt9O3RoaXMucz1hLmxheWVyO3RoaXMuZz1hLm1hdHJpeFNldDt0aGlzLnY9YS5zdHlsZTt2YXIgYz1hLnVybHM7dm9pZCAwPT09XG5jJiZ2b2lkIDAhPT1hLnVybCYmKGM9cHAoYS51cmwpKTt2YXIgZD10aGlzLnU9dm9pZCAwIT09YS5yZXF1ZXN0RW5jb2Rpbmc/YS5yZXF1ZXN0RW5jb2Rpbmc6XCJLVlBcIixlPWEudGlsZUdyaWQsZj17bGF5ZXI6dGhpcy5zLHN0eWxlOnRoaXMudix0aWxlbWF0cml4c2V0OnRoaXMuZ307XCJLVlBcIj09ZCYmWmEoZix7U2VydmljZTpcIldNVFNcIixSZXF1ZXN0OlwiR2V0VGlsZVwiLFZlcnNpb246dGhpcy5ILEZvcm1hdDp0aGlzLmx9KTt2YXIgZz10aGlzLmksaD1jJiYwPGMubGVuZ3RoP25wKGMubWFwKGIpKTpvcDt3cC5jYWxsKHRoaXMse2F0dHJpYnV0aW9uczphLmF0dHJpYnV0aW9ucyxjYWNoZVNpemU6YS5jYWNoZVNpemUsY3Jvc3NPcmlnaW46YS5jcm9zc09yaWdpbixsb2dvOmEubG9nbyxwcm9qZWN0aW9uOmEucHJvamVjdGlvbixyZXByb2plY3Rpb25FcnJvclRocmVzaG9sZDphLnJlcHJvamVjdGlvbkVycm9yVGhyZXNob2xkLHRpbGVDbGFzczphLnRpbGVDbGFzcyx0aWxlR3JpZDplLFxudGlsZUxvYWRGdW5jdGlvbjphLnRpbGVMb2FkRnVuY3Rpb24sdGlsZVBpeGVsUmF0aW86YS50aWxlUGl4ZWxSYXRpbyx0aWxlVXJsRnVuY3Rpb246aCx1cmxzOmMsd3JhcFg6dm9pZCAwIT09YS53cmFwWD9hLndyYXBYOiExfSk7c3AodGhpcyxNcCh0aGlzKSl9dChMcCx3cCk7ZnVuY3Rpb24gTXAoYSl7dmFyIGI9MCxjPVtdLGQ7Zm9yKGQgaW4gYS5pKWNbYisrXT1kK1wiLVwiK2EuaVtkXTtyZXR1cm4gYy5qb2luKFwiL1wiKX07cShcIm9sLk1hcFwiLEIpO0IucHJvdG90eXBlLmFkZEludGVyYWN0aW9uPUIucHJvdG90eXBlLlVmO0IucHJvdG90eXBlLmFkZExheWVyPUIucHJvdG90eXBlLlZmO0IucHJvdG90eXBlLmFkZENvbnRyb2w9Qi5wcm90b3R5cGUuVGY7Qi5wcm90b3R5cGUuYWRkT3ZlcmxheT1CLnByb3RvdHlwZS5XZjtCLnByb3RvdHlwZS5kaXNwYXRjaEV2ZW50PUIucHJvdG90eXBlLmY7Qi5wcm90b3R5cGUuZm9yRWFjaEZlYXR1cmVBdFBpeGVsPUIucHJvdG90eXBlLldjO0IucHJvdG90eXBlLmZvckVhY2hMYXllckF0UGl4ZWw9Qi5wcm90b3R5cGUucWg7Qi5wcm90b3R5cGUuZ2V0TGF5ZXJzPUIucHJvdG90eXBlLnJoO0IucHJvdG90eXBlLmdldFNpemU9Qi5wcm90b3R5cGUucGI7Qi5wcm90b3R5cGUuZ2V0VGFyZ2V0PUIucHJvdG90eXBlLmNkO0IucHJvdG90eXBlLmdldE92ZXJsYXlzPUIucHJvdG90eXBlLm5nO0IucHJvdG90eXBlLmdldFZpZXc9Qi5wcm90b3R5cGUuWjtcbkIucHJvdG90eXBlLnJlbW92ZUNvbnRyb2w9Qi5wcm90b3R5cGUuQ2k7Qi5wcm90b3R5cGUucmVtb3ZlSW50ZXJhY3Rpb249Qi5wcm90b3R5cGUuRGk7Qi5wcm90b3R5cGUucmVtb3ZlT3ZlcmxheT1CLnByb3RvdHlwZS5FaTtCLnByb3RvdHlwZS5vbj1CLnByb3RvdHlwZS5CO0IucHJvdG90eXBlLm9uY2U9Qi5wcm90b3R5cGUub25jZTtCLnByb3RvdHlwZS51bj1CLnByb3RvdHlwZS5mYTtxKFwib2wucHJvai5Qcm9qZWN0aW9uXCIsZWIpO2ViLnByb3RvdHlwZS5nZXRFeHRlbnQ9ZWIucHJvdG90eXBlLks7ZWIucHJvdG90eXBlLmdldE1ldGVyc1BlclVuaXQ9ZWIucHJvdG90eXBlLmo7cShcIm9sLnByb2oudHJhbnNmb3JtXCIsZnVuY3Rpb24oYSxiLGMpe3JldHVybiBFYihiLGMpKGEsdm9pZCAwLGEubGVuZ3RoKX0pO3EoXCJvbC5WaWV3XCIsYmYpO2JmLnByb3RvdHlwZS5jYWxjdWxhdGVFeHRlbnQ9YmYucHJvdG90eXBlLlRkO2JmLnByb3RvdHlwZS5nZXRDZW50ZXI9YmYucHJvdG90eXBlLmJhO1xuYmYucHJvdG90eXBlLmdldFByb2plY3Rpb249YmYucHJvdG90eXBlLnNoO2JmLnByb3RvdHlwZS5nZXRSZXNvbHV0aW9uPWJmLnByb3RvdHlwZS51YTtiZi5wcm90b3R5cGUuZ2V0UmVzb2x1dGlvbnM9YmYucHJvdG90eXBlLnRoO2JmLnByb3RvdHlwZS5nZXRab29tPWJmLnByb3RvdHlwZS5xZztiZi5wcm90b3R5cGUub249YmYucHJvdG90eXBlLkI7YmYucHJvdG90eXBlLnNldENlbnRlcj1iZi5wcm90b3R5cGUuSmE7YmYucHJvdG90eXBlLnNldFpvb209YmYucHJvdG90eXBlLklpO2JmLnByb3RvdHlwZS5maXQ9YmYucHJvdG90eXBlLmJnO2JmLnByb3RvdHlwZS51bj1iZi5wcm90b3R5cGUuZmE7cShcIm9sLmV4dGVudC5nZXRUb3BMZWZ0XCIsV2EpO3EoXCJvbC50aWxlZ3JpZC5UaWxlR3JpZFwiLEhiKTtxKFwib2wudGlsZWdyaWQuV01UU1wiLEtwKTtxKFwib2wudGlsZWdyaWQuY3JlYXRlWFlaXCIsUmIpO3EoXCJvbC5zdHlsZS5TdHlsZVwiLEVoKTtFaC5wcm90b3R5cGUuZ2V0VGV4dD1FaC5wcm90b3R5cGUub2E7XG5xKFwib2wuc3R5bGUuQ2lyY2xlXCIsQ2gpO3EoXCJvbC5zdHlsZS5GaWxsXCIsRGgpO3EoXCJvbC5zdHlsZS5JY29uXCIsUGopO3EoXCJvbC5zdHlsZS5JbWFnZVwiLHpoKTtxKFwib2wuc3R5bGUuU3Ryb2tlXCIsWWcpO3EoXCJvbC5zdHlsZS5UZXh0XCIsUWopO1FqLnByb3RvdHlwZS5nZXRUZXh0PVFqLnByb3RvdHlwZS5vYTtRai5wcm90b3R5cGUuc2V0RmlsbD1Rai5wcm90b3R5cGUuJGU7UWoucHJvdG90eXBlLnNldFN0cm9rZT1Rai5wcm90b3R5cGUuY2Y7UWoucHJvdG90eXBlLnNldFRleHQ9UWoucHJvdG90eXBlLmRmO3EoXCJvbC5BdHRyaWJ1dGlvblwiLFViKTtxKFwib2wuR2VvbG9jYXRpb25cIixjbik7Y24ucHJvdG90eXBlLm9uPWNuLnByb3RvdHlwZS5CO2NuLnByb3RvdHlwZS51bj1jbi5wcm90b3R5cGUuZmE7Y24ucHJvdG90eXBlLmdldEFjY3VyYWN5PWNuLnByb3RvdHlwZS5lZztjbi5wcm90b3R5cGUuZ2V0SGVhZGluZz1jbi5wcm90b3R5cGUuamc7XG5jbi5wcm90b3R5cGUuZ2V0UG9zaXRpb249Y24ucHJvdG90eXBlLmxoO2NuLnByb3RvdHlwZS5nZXRTcGVlZD1jbi5wcm90b3R5cGUub2c7Y24ucHJvdG90eXBlLmdldFRyYWNraW5nPWNuLnByb3RvdHlwZS5lZTtjbi5wcm90b3R5cGUuc2V0VHJhY2tpbmc9Y24ucHJvdG90eXBlLnhjO3EoXCJvbC5PdmVybGF5XCIsa2gpO2toLnByb3RvdHlwZS5zZXRQb3NpdGlvbj1raC5wcm90b3R5cGUubWU7cShcIm9sLmNvbnRyb2wuQXR0cmlidXRpb25cIixLYyk7S2MucHJvdG90eXBlLnNldENvbGxhcHNlZD1LYy5wcm90b3R5cGUuJDtLYy5wcm90b3R5cGUuc2V0Q29sbGFwc2libGU9S2MucHJvdG90eXBlLmdhO3EoXCJvbC5jb250cm9sLk1vdXNlUG9zaXRpb25cIixZYyk7WWMucHJvdG90eXBlLnNldENvb3JkaW5hdGVGb3JtYXQ9WWMucHJvdG90eXBlLlplO3EoXCJvbC5jb250cm9sLlpvb21cIixWYyk7cShcIm9sLmNvbnRyb2wuUm90YXRlXCIsUWMpO3EoXCJvbC5jb250cm9sLlNjYWxlTGluZVwiLHVoKTtcbnEoXCJvbC5jb250cm9sLmRlZmF1bHRzXCIsWGMpO3EoXCJvbC5pbnRlcmFjdGlvbi5EcmF3XCIsb28pO3EoXCJvbC5pbnRlcmFjdGlvbi5EcmF3LmNyZWF0ZUJveFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGEsYil7YT1GYShhKTtiPWJ8fG5ldyB6KG51bGwpO2IuWShbW1thWzBdLGFbMV1dLFthWzJdLGFbMV1dLFthWzJdLGFbM11dLFdhKGEpLFthWzBdLGFbMV1dXV0pO3JldHVybiBifX0pO29vLnByb3RvdHlwZS5vbj1vby5wcm90b3R5cGUuQjtvby5wcm90b3R5cGUuc2V0QWN0aXZlPW9vLnByb3RvdHlwZS5ZYTtvby5wcm90b3R5cGUudW49b28ucHJvdG90eXBlLmZhO3EoXCJvbC5pbnRlcmFjdGlvbi5Nb2RpZnlcIixHbyk7R28ucHJvdG90eXBlLm9uPUdvLnByb3RvdHlwZS5CO0dvLnByb3RvdHlwZS5zZXRBY3RpdmU9R28ucHJvdG90eXBlLllhO0dvLnByb3RvdHlwZS51bj1Hby5wcm90b3R5cGUuZmE7cShcIm9sLmludGVyYWN0aW9uLlNlbGVjdFwiLFdvKTtcbldvLnByb3RvdHlwZS5vbj1Xby5wcm90b3R5cGUuQjtXby5wcm90b3R5cGUuc2V0QWN0aXZlPVdvLnByb3RvdHlwZS5ZYTtXby5wcm90b3R5cGUudW49V28ucHJvdG90eXBlLmZhO1dvLnByb3RvdHlwZS5nZXRGZWF0dXJlcz1Xby5wcm90b3R5cGUuSDtxKFwib2wuaW50ZXJhY3Rpb24uU25hcFwiLGFwKTthcC5wcm90b3R5cGUuc2V0QWN0aXZlPWFwLnByb3RvdHlwZS5ZYTtxKFwib2wuc291cmNlLlNvdXJjZVwiLGZvKTtmby5wcm90b3R5cGUub249Zm8ucHJvdG90eXBlLkI7V28ucHJvdG90eXBlLm9uPVdvLnByb3RvdHlwZS5CO2ZvLnByb3RvdHlwZS5vbmNlPWZvLnByb3RvdHlwZS5vbmNlO3EoXCJvbC5zb3VyY2UuT1NNXCIsRXApO3EoXCJvbC5zb3VyY2UuVGlsZVwiLHJwKTtxKFwib2wuc291cmNlLlRpbGVBcmNHSVNSZXN0XCIsR3ApO3EoXCJvbC5zb3VyY2UuVGlsZVdNU1wiLEhwKTtIcC5wcm90b3R5cGUuZ2V0R2V0RmVhdHVyZUluZm9Vcmw9SHAucHJvdG90eXBlLmlnO1xucShcIm9sLnNvdXJjZS5WZWN0b3JcIixobyk7aG8ucHJvdG90eXBlLmFkZEZlYXR1cmU9aG8ucHJvdG90eXBlLk9hO2hvLnByb3RvdHlwZS5hZGRGZWF0dXJlcz1oby5wcm90b3R5cGUud2I7aG8ucHJvdG90eXBlLmdldEZlYXR1cmVCeUlkPWhvLnByb3RvdHlwZS5nZztoby5wcm90b3R5cGUuZ2V0RmVhdHVyZXM9aG8ucHJvdG90eXBlLm1jO2hvLnByb3RvdHlwZS5nZXRGb3JtYXQ9aG8ucHJvdG90eXBlLlhoO2hvLnByb3RvdHlwZS5yZW1vdmVGZWF0dXJlPWhvLnByb3RvdHlwZS5JYTtxKFwib2wuc291cmNlLldNVFNcIixMcCk7cShcIm9sLnNvdXJjZS5YWVpcIix6cCk7cShcIm9sLnNvdXJjZS5DbHVzdGVyXCIsQXApO3NnLnByb3RvdHlwZS5nZXRTb3VyY2U9c2cucHJvdG90eXBlLmNhO3NnLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzPXNnLnByb3RvdHlwZS5DYTtzZy5wcm90b3R5cGUuc2V0U291cmNlPXNnLnByb3RvdHlwZS5iZjtzZy5wcm90b3R5cGUudW49c2cucHJvdG90eXBlLmZhO1xub2cucHJvdG90eXBlLmdldFZpc2libGU9b2cucHJvdG90eXBlLmw7b2cucHJvdG90eXBlLnNldFZpc2libGU9b2cucHJvdG90eXBlLkM7b2cucHJvdG90eXBlLm9uPW9nLnByb3RvdHlwZS5CO29nLnByb3RvdHlwZS5vbmNlPW9nLnByb3RvdHlwZS5vbmNlO3EoXCJvbC5sYXllci5UaWxlXCIsa3ApO3EoXCJvbC5sYXllci5WZWN0b3JcIixjbyk7Y28ucHJvdG90eXBlLnNldD1jby5wcm90b3R5cGUuc2V0O2NvLnByb3RvdHlwZS5zZXRTdHlsZT1jby5wcm90b3R5cGUudTtxKFwib2wubGF5ZXIuR3JvdXBcIixxZyk7cShcIm9sLkZlYXR1cmVcIixFKTtFLnByb3RvdHlwZS5nZXRHZW9tZXRyeT1FLnByb3RvdHlwZS5QO0UucHJvdG90eXBlLmdldEdlb21ldHJ5TmFtZT1FLnByb3RvdHlwZS5oZztFLnByb3RvdHlwZS5nZXRJZD1FLnByb3RvdHlwZS5qaDtFLnByb3RvdHlwZS5nZXRQcm9wZXJ0aWVzPUUucHJvdG90eXBlLkNhO0UucHJvdG90eXBlLmdldFN0eWxlPUUucHJvdG90eXBlLmtoO1xuRS5wcm90b3R5cGUuc2V0SWQ9RS5wcm90b3R5cGUuYWI7RS5wcm90b3R5cGUuc2V0UHJvcGVydGllcz1FLnByb3RvdHlwZS5xYTtFLnByb3RvdHlwZS5zZXRTdHlsZT1FLnByb3RvdHlwZS5sZTtFLnByb3RvdHlwZS5zZXRHZW9tZXRyeT1FLnByb3RvdHlwZS54YTtFLnByb3RvdHlwZS5zZXRHZW9tZXRyeU5hbWU9RS5wcm90b3R5cGUuc2I7RS5wcm90b3R5cGUub249RS5wcm90b3R5cGUuQjtFLnByb3RvdHlwZS51bnNldD1FLnByb3RvdHlwZS5RaTtxKFwib2wuQ29sbGVjdGlvblwiLHNjKTtzYy5wcm90b3R5cGUuZ2V0QXJyYXk9c2MucHJvdG90eXBlLmZnO3NjLnByb3RvdHlwZS5nZXRMZW5ndGg9c2MucHJvdG90eXBlLldhO3NjLnByb3RvdHlwZS5pdGVtPXNjLnByb3RvdHlwZS5rZTtzYy5wcm90b3R5cGUub249c2MucHJvdG90eXBlLkI7XG5xKFwib2wuY29vcmRpbmF0ZS5jcmVhdGVTdHJpbmdYWVwiLGZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbihiKXtyZXR1cm4gYj9cInt4fSwge3l9XCIucmVwbGFjZShcInt4fVwiLGJbMF0udG9GaXhlZChhKSkucmVwbGFjZShcInt5fVwiLGJbMV0udG9GaXhlZChhKSk6XCJcIn19KTtxKFwib2wuZm9ybWF0LkVzcmlKU09OXCIscWkpO3FpLnByb3RvdHlwZS5yZWFkRmVhdHVyZXM9cWkucHJvdG90eXBlLlJhO3FpLnByb3RvdHlwZS53cml0ZUZlYXR1cmU9cWkucHJvdG90eXBlLkFkO3EoXCJvbC5mb3JtYXQuR2VvSlNPTlwiLHppKTt6aS5wcm90b3R5cGUucmVhZEZlYXR1cmU9emkucHJvdG90eXBlLnBjO3ppLnByb3RvdHlwZS5yZWFkRmVhdHVyZXM9emkucHJvdG90eXBlLlJhO3ppLnByb3RvdHlwZS53cml0ZUZlYXR1cmVPYmplY3Q9emkucHJvdG90eXBlLnViO3ppLnByb3RvdHlwZS53cml0ZUZlYXR1cmVzT2JqZWN0PXppLnByb3RvdHlwZS5CZDtxKFwib2wuZm9ybWF0LlRvcG9KU09OXCIsT2wpO1xuT2wucHJvdG90eXBlLnJlYWRGZWF0dXJlcz1PbC5wcm90b3R5cGUuUmE7cShcIm9sLmZvcm1hdC5XS1RcIixkbSk7ZG0ucHJvdG90eXBlLnJlYWRGZWF0dXJlPWRtLnByb3RvdHlwZS5wYztkbS5wcm90b3R5cGUucmVhZEZlYXR1cmVzPWRtLnByb3RvdHlwZS5SYTtxKFwib2wuZm9ybWF0LldGU1wiLFVsKTtVbC5wcm90b3R5cGUucmVhZEZlYXR1cmVzPVVsLnByb3RvdHlwZS5SYTtVbC5wcm90b3R5cGUucmVhZFRyYW5zYWN0aW9uUmVzcG9uc2U9VWwucHJvdG90eXBlLmM7VWwucHJvdG90eXBlLndyaXRlVHJhbnNhY3Rpb249VWwucHJvdG90eXBlLmk7cShcIm9sLmdlb20uQ2lyY2xlXCIsZG4pO2RuLnByb3RvdHlwZS5jbG9uZT1kbi5wcm90b3R5cGUuY2xvbmU7ZG4ucHJvdG90eXBlLmdldENlbnRlcj1kbi5wcm90b3R5cGUuYmE7ZG4ucHJvdG90eXBlLmdldFJhZGl1cz1kbi5wcm90b3R5cGUuSWI7ZG4ucHJvdG90eXBlLmdldFR5cGU9ZG4ucHJvdG90eXBlLkk7XG5xKFwib2wuZ2VvbS5HZW9tZXRyeVwiLHVlKTt1ZS5wcm90b3R5cGUuZ2V0RXh0ZW50PXVlLnByb3RvdHlwZS5LO3VlLnByb3RvdHlwZS5vbj11ZS5wcm90b3R5cGUuQjt1ZS5wcm90b3R5cGUudHJhbnNmb3JtPXVlLnByb3RvdHlwZS5DO3EoXCJvbC5nZW9tLkdlb21ldHJ5Q29sbGVjdGlvblwiLHZpKTt2aS5wcm90b3R5cGUuZ2V0VHlwZT12aS5wcm90b3R5cGUuSTtxKFwib2wuZ2VvbS5MaW5lU3RyaW5nXCIsUyk7Uy5wcm90b3R5cGUuYXBwZW5kQ29vcmRpbmF0ZT1TLnByb3RvdHlwZS5YZjtTLnByb3RvdHlwZS5jbG9uZT1TLnByb3RvdHlwZS5jbG9uZTtTLnByb3RvdHlwZS5nZXRDb29yZGluYXRlQXQ9Uy5wcm90b3R5cGUuJGQ7Uy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUF0TT1TLnByb3RvdHlwZS5EZTtTLnByb3RvdHlwZS5nZXRDb29yZGluYXRlcz1TLnByb3RvdHlwZS5HO1MucHJvdG90eXBlLmdldEZpcnN0Q29vcmRpbmF0ZT1TLnByb3RvdHlwZS5HYjtcblMucHJvdG90eXBlLmdldExhc3RDb29yZGluYXRlPVMucHJvdG90eXBlLm1nO1MucHJvdG90eXBlLmdldExlbmd0aD1TLnByb3RvdHlwZS5EaDtTLnByb3RvdHlwZS5nZXRUeXBlPVMucHJvdG90eXBlLkk7Uy5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXM9Uy5wcm90b3R5cGUuWTtPZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9T2UucHJvdG90eXBlLkc7cShcIm9sLmdlb20uTXVsdGlMaW5lU3RyaW5nXCIsaGkpO2hpLnByb3RvdHlwZS5jbG9uZT1oaS5wcm90b3R5cGUuY2xvbmU7Uy5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZUF0TT1TLnByb3RvdHlwZS5EZTtoaS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9aGkucHJvdG90eXBlLkc7aGkucHJvdG90eXBlLmdldEZpcnN0Q29vcmRpbmF0ZT1oaS5wcm90b3R5cGUuR2I7aGkucHJvdG90eXBlLmdldExpbmVTdHJpbmdzPWhpLnByb3RvdHlwZS5qYjtoaS5wcm90b3R5cGUuZ2V0VHlwZT1oaS5wcm90b3R5cGUuSTtcbmhpLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcz1oaS5wcm90b3R5cGUuWTtxKFwib2wuZ2VvbS5NdWx0aVBvaW50XCIsa2kpO2tpLnByb3RvdHlwZS5jbG9uZT1raS5wcm90b3R5cGUuY2xvbmU7a2kucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPWtpLnByb3RvdHlwZS5HO2tpLnByb3RvdHlwZS5nZXRGaXJzdENvb3JkaW5hdGU9a2kucHJvdG90eXBlLkdiO2tpLnByb3RvdHlwZS5nZXRUeXBlPWtpLnByb3RvdHlwZS5JO2tpLnByb3RvdHlwZS5zZXRDb29yZGluYXRlcz1raS5wcm90b3R5cGUuWTtxKFwib2wuZ2VvbS5NdWx0aVBvbHlnb25cIixtaSk7bWkucHJvdG90eXBlLmNsb25lPW1pLnByb3RvdHlwZS5jbG9uZTttaS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9bWkucHJvdG90eXBlLkc7bWkucHJvdG90eXBlLmdldEFyZWE9bWkucHJvdG90eXBlLkVoO21pLnByb3RvdHlwZS5nZXRGaXJzdENvb3JkaW5hdGU9bWkucHJvdG90eXBlLkdiO1xubWkucHJvdG90eXBlLmdldEludGVyaW9yUG9pbnRzPW1pLnByb3RvdHlwZS5sZzttaS5wcm90b3R5cGUuZ2V0VHlwZT1taS5wcm90b3R5cGUuSTttaS5wcm90b3R5cGUuc2V0Q29vcmRpbmF0ZXM9bWkucHJvdG90eXBlLlk7cShcIm9sLmdlb20uUG9pbnRcIixRZSk7UWUucHJvdG90eXBlLmNsb25lPVFlLnByb3RvdHlwZS5jbG9uZTtRZS5wcm90b3R5cGUuZ2V0Q29vcmRpbmF0ZXM9UWUucHJvdG90eXBlLkc7UWUucHJvdG90eXBlLmdldFR5cGU9UWUucHJvdG90eXBlLkk7UWUucHJvdG90eXBlLnNldENvb3JkaW5hdGVzPVFlLnByb3RvdHlwZS5ZO3EoXCJvbC5nZW9tLlBvbHlnb25cIix6KTt6LnByb3RvdHlwZS5jbG9uZT16LnByb3RvdHlwZS5jbG9uZTt6LnByb3RvdHlwZS5nZXRBcmVhPXoucHJvdG90eXBlLkZoO3oucHJvdG90eXBlLmdldENvb3JkaW5hdGVzPXoucHJvdG90eXBlLkc7ei5wcm90b3R5cGUuZ2V0Rmlyc3RDb29yZGluYXRlPXoucHJvdG90eXBlLkdiO1xuei5wcm90b3R5cGUuZ2V0SW50ZXJpb3JQb2ludD16LnByb3RvdHlwZS5rZzt6LnByb3RvdHlwZS5nZXRMaW5lYXJSaW5nPXoucHJvdG90eXBlLmRlO3oucHJvdG90eXBlLmdldFR5cGU9ei5wcm90b3R5cGUuSTt6LnByb3RvdHlwZS5zZXRDb29yZGluYXRlcz16LnByb3RvdHlwZS5ZO3EoXCJvbC5TcGhlcmVcIixjYik7Y2IucHJvdG90eXBlLmdlb2Rlc2ljQXJlYT1jYi5wcm90b3R5cGUuZjtjYi5wcm90b3R5cGUuaGF2ZXJzaW5lRGlzdGFuY2U9Y2IucHJvdG90eXBlLmI7cShcIm9sLmxvYWRpbmdzdHJhdGVneS5hbGxcIixlbyk7cShcIm9sLmxvYWRpbmdzdHJhdGVneS5iYm94XCIsZnVuY3Rpb24oYSl7cmV0dXJuW2FdfSk7XG5xKFwib2wubG9hZGluZ3N0cmF0ZWd5LnRpbGVcIixmdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oYixjKXtjPVFiKGEsYyk7Yj1NYihhLGIsYyk7dmFyIGQ9W107Yz1bYywwLDBdO2ZvcihjWzFdPWIuTztjWzFdPD1iLlI7KytjWzFdKWZvcihjWzJdPWIuUztjWzJdPD1iLlU7KytjWzJdKWQucHVzaChQYihhLGMpKTtyZXR1cm4gZH19KTtcbiAgcmV0dXJuIE9QRU5MQVlFUlMub2w7XG59KSk7XG5cbiIsInZhciBtZ3JzID0gcmVxdWlyZSgnbWdycycpO1xuXG5mdW5jdGlvbiBQb2ludCh4LCB5LCB6KSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQb2ludCkpIHtcbiAgICByZXR1cm4gbmV3IFBvaW50KHgsIHksIHopO1xuICB9XG4gIGlmIChBcnJheS5pc0FycmF5KHgpKSB7XG4gICAgdGhpcy54ID0geFswXTtcbiAgICB0aGlzLnkgPSB4WzFdO1xuICAgIHRoaXMueiA9IHhbMl0gfHwgMC4wO1xuICB9ZWxzZSBpZih0eXBlb2YgeCA9PT0gJ29iamVjdCcpe1xuICAgIHRoaXMueCA9IHgueDtcbiAgICB0aGlzLnkgPSB4Lnk7XG4gICAgdGhpcy56ID0geC56IHx8IDAuMDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgeCA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGNvb3JkcyA9IHguc3BsaXQoJywnKTtcbiAgICB0aGlzLnggPSBwYXJzZUZsb2F0KGNvb3Jkc1swXSwgMTApO1xuICAgIHRoaXMueSA9IHBhcnNlRmxvYXQoY29vcmRzWzFdLCAxMCk7XG4gICAgdGhpcy56ID0gcGFyc2VGbG9hdChjb29yZHNbMl0sIDEwKSB8fCAwLjA7XG4gIH1cbiAgZWxzZSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMueiA9IHogfHwgMC4wO1xuICB9XG4gIGNvbnNvbGUud2FybigncHJvajQuUG9pbnQgd2lsbCBiZSByZW1vdmVkIGluIHZlcnNpb24gMywgdXNlIHByb2o0LnRvUG9pbnQnKTtcbn1cblxuUG9pbnQuZnJvbU1HUlMgPSBmdW5jdGlvbihtZ3JzU3RyKSB7XG4gIHJldHVybiBuZXcgUG9pbnQobWdycy50b1BvaW50KG1ncnNTdHIpKTtcbn07XG5Qb2ludC5wcm90b3R5cGUudG9NR1JTID0gZnVuY3Rpb24oYWNjdXJhY3kpIHtcbiAgcmV0dXJuIG1ncnMuZm9yd2FyZChbdGhpcy54LCB0aGlzLnldLCBhY2N1cmFjeSk7XG59O1xubW9kdWxlLmV4cG9ydHMgPSBQb2ludDsiLCJ2YXIgcGFyc2VDb2RlID0gcmVxdWlyZShcIi4vcGFyc2VDb2RlXCIpO1xudmFyIGV4dGVuZCA9IHJlcXVpcmUoJy4vZXh0ZW5kJyk7XG52YXIgcHJvamVjdGlvbnMgPSByZXF1aXJlKCcuL3Byb2plY3Rpb25zJyk7XG52YXIgZGVyaXZlQ29uc3RhbnRzID0gcmVxdWlyZSgnLi9kZXJpdmVDb25zdGFudHMnKTtcblxuZnVuY3Rpb24gUHJvamVjdGlvbihzcnNDb2RlLGNhbGxiYWNrKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBQcm9qZWN0aW9uKSkge1xuICAgIHJldHVybiBuZXcgUHJvamVjdGlvbihzcnNDb2RlKTtcbiAgfVxuICBjYWxsYmFjayA9IGNhbGxiYWNrIHx8IGZ1bmN0aW9uKGVycm9yKXtcbiAgICBpZihlcnJvcil7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH07XG4gIHZhciBqc29uID0gcGFyc2VDb2RlKHNyc0NvZGUpO1xuICBpZih0eXBlb2YganNvbiAhPT0gJ29iamVjdCcpe1xuICAgIGNhbGxiYWNrKHNyc0NvZGUpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgbW9kaWZpZWRKU09OID0gZGVyaXZlQ29uc3RhbnRzKGpzb24pO1xuICB2YXIgb3VyUHJvaiA9IFByb2plY3Rpb24ucHJvamVjdGlvbnMuZ2V0KG1vZGlmaWVkSlNPTi5wcm9qTmFtZSk7XG4gIGlmKG91clByb2ope1xuICAgIGV4dGVuZCh0aGlzLCBtb2RpZmllZEpTT04pO1xuICAgIGV4dGVuZCh0aGlzLCBvdXJQcm9qKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgICBjYWxsYmFjayhudWxsLCB0aGlzKTtcbiAgfWVsc2V7XG4gICAgY2FsbGJhY2soc3JzQ29kZSk7XG4gIH1cbn1cblByb2plY3Rpb24ucHJvamVjdGlvbnMgPSBwcm9qZWN0aW9ucztcblByb2plY3Rpb24ucHJvamVjdGlvbnMuc3RhcnQoKTtcbm1vZHVsZS5leHBvcnRzID0gUHJvamVjdGlvbjtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oY3JzLCBkZW5vcm0sIHBvaW50KSB7XG4gIHZhciB4aW4gPSBwb2ludC54LFxuICAgIHlpbiA9IHBvaW50LnksXG4gICAgemluID0gcG9pbnQueiB8fCAwLjA7XG4gIHZhciB2LCB0LCBpO1xuICBmb3IgKGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgaWYgKGRlbm9ybSAmJiBpID09PSAyICYmIHBvaW50LnogPT09IHVuZGVmaW5lZCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChpID09PSAwKSB7XG4gICAgICB2ID0geGluO1xuICAgICAgdCA9ICd4JztcbiAgICB9XG4gICAgZWxzZSBpZiAoaSA9PT0gMSkge1xuICAgICAgdiA9IHlpbjtcbiAgICAgIHQgPSAneSc7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdiA9IHppbjtcbiAgICAgIHQgPSAneic7XG4gICAgfVxuICAgIHN3aXRjaCAoY3JzLmF4aXNbaV0pIHtcbiAgICBjYXNlICdlJzpcbiAgICAgIHBvaW50W3RdID0gdjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3cnOlxuICAgICAgcG9pbnRbdF0gPSAtdjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ24nOlxuICAgICAgcG9pbnRbdF0gPSB2O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAncyc6XG4gICAgICBwb2ludFt0XSA9IC12O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndSc6XG4gICAgICBpZiAocG9pbnRbdF0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwb2ludC56ID0gdjtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2QnOlxuICAgICAgaWYgKHBvaW50W3RdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcG9pbnQueiA9IC12O1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIC8vY29uc29sZS5sb2coXCJFUlJPUjogdW5rbm93IGF4aXMgKFwiK2Nycy5heGlzW2ldK1wiKSAtIGNoZWNrIGRlZmluaXRpb24gb2YgXCIrY3JzLnByb2pOYW1lKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcG9pbnQ7XG59O1xuIiwidmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG52YXIgc2lnbiA9IHJlcXVpcmUoJy4vc2lnbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIChNYXRoLmFicyh4KSA8IEhBTEZfUEkpID8geCA6ICh4IC0gKHNpZ24oeCkgKiBNYXRoLlBJKSk7XG59OyIsInZhciBUV09fUEkgPSBNYXRoLlBJICogMjtcbi8vIFNQSSBpcyBzbGlnaHRseSBncmVhdGVyIHRoYW4gTWF0aC5QSSwgc28gdmFsdWVzIHRoYXQgZXhjZWVkIHRoZSAtMTgwLi4xODBcbi8vIGRlZ3JlZSByYW5nZSBieSBhIHRpbnkgYW1vdW50IGRvbid0IGdldCB3cmFwcGVkLiBUaGlzIHByZXZlbnRzIHBvaW50cyB0aGF0XG4vLyBoYXZlIGRyaWZ0ZWQgZnJvbSB0aGVpciBvcmlnaW5hbCBsb2NhdGlvbiBhbG9uZyB0aGUgMTgwdGggbWVyaWRpYW4gKGR1ZSB0b1xuLy8gZmxvYXRpbmcgcG9pbnQgZXJyb3IpIGZyb20gY2hhbmdpbmcgdGhlaXIgc2lnbi5cbnZhciBTUEkgPSAzLjE0MTU5MjY1MzU5O1xudmFyIHNpZ24gPSByZXF1aXJlKCcuL3NpZ24nKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiAoTWF0aC5hYnMoeCkgPD0gU1BJKSA/IHggOiAoeCAtIChzaWduKHgpICogVFdPX1BJKSk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oeCkge1xuICBpZiAoTWF0aC5hYnMoeCkgPiAxKSB7XG4gICAgeCA9ICh4ID4gMSkgPyAxIDogLTE7XG4gIH1cbiAgcmV0dXJuIE1hdGguYXNpbih4KTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiAoMSAtIDAuMjUgKiB4ICogKDEgKyB4IC8gMTYgKiAoMyArIDEuMjUgKiB4KSkpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuICgwLjM3NSAqIHggKiAoMSArIDAuMjUgKiB4ICogKDEgKyAwLjQ2ODc1ICogeCkpKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih4KSB7XG4gIHJldHVybiAoMC4wNTg1OTM3NSAqIHggKiB4ICogKDEgKyAwLjc1ICogeCkpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuICh4ICogeCAqIHggKiAoMzUgLyAzMDcyKSk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oYSwgZSwgc2lucGhpKSB7XG4gIHZhciB0ZW1wID0gZSAqIHNpbnBoaTtcbiAgcmV0dXJuIGEgLyBNYXRoLnNxcnQoMSAtIHRlbXAgKiB0ZW1wKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtbCwgZTAsIGUxLCBlMiwgZTMpIHtcbiAgdmFyIHBoaTtcbiAgdmFyIGRwaGk7XG5cbiAgcGhpID0gbWwgLyBlMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCAxNTsgaSsrKSB7XG4gICAgZHBoaSA9IChtbCAtIChlMCAqIHBoaSAtIGUxICogTWF0aC5zaW4oMiAqIHBoaSkgKyBlMiAqIE1hdGguc2luKDQgKiBwaGkpIC0gZTMgKiBNYXRoLnNpbig2ICogcGhpKSkpIC8gKGUwIC0gMiAqIGUxICogTWF0aC5jb3MoMiAqIHBoaSkgKyA0ICogZTIgKiBNYXRoLmNvcyg0ICogcGhpKSAtIDYgKiBlMyAqIE1hdGguY29zKDYgKiBwaGkpKTtcbiAgICBwaGkgKz0gZHBoaTtcbiAgICBpZiAoTWF0aC5hYnMoZHBoaSkgPD0gMC4wMDAwMDAwMDAxKSB7XG4gICAgICByZXR1cm4gcGhpO1xuICAgIH1cbiAgfVxuXG4gIC8vLi5yZXBvcnRFcnJvcihcIklNTEZOLUNPTlY6TGF0aXR1ZGUgZmFpbGVkIHRvIGNvbnZlcmdlIGFmdGVyIDE1IGl0ZXJhdGlvbnNcIik7XG4gIHJldHVybiBOYU47XG59OyIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGVjY2VudCwgcSkge1xuICB2YXIgdGVtcCA9IDEgLSAoMSAtIGVjY2VudCAqIGVjY2VudCkgLyAoMiAqIGVjY2VudCkgKiBNYXRoLmxvZygoMSAtIGVjY2VudCkgLyAoMSArIGVjY2VudCkpO1xuICBpZiAoTWF0aC5hYnMoTWF0aC5hYnMocSkgLSB0ZW1wKSA8IDEuMEUtNikge1xuICAgIGlmIChxIDwgMCkge1xuICAgICAgcmV0dXJuICgtMSAqIEhBTEZfUEkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiBIQUxGX1BJO1xuICAgIH1cbiAgfVxuICAvL3ZhciBwaGkgPSAwLjUqIHEvKDEtZWNjZW50KmVjY2VudCk7XG4gIHZhciBwaGkgPSBNYXRoLmFzaW4oMC41ICogcSk7XG4gIHZhciBkcGhpO1xuICB2YXIgc2luX3BoaTtcbiAgdmFyIGNvc19waGk7XG4gIHZhciBjb247XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgMzA7IGkrKykge1xuICAgIHNpbl9waGkgPSBNYXRoLnNpbihwaGkpO1xuICAgIGNvc19waGkgPSBNYXRoLmNvcyhwaGkpO1xuICAgIGNvbiA9IGVjY2VudCAqIHNpbl9waGk7XG4gICAgZHBoaSA9IE1hdGgucG93KDEgLSBjb24gKiBjb24sIDIpIC8gKDIgKiBjb3NfcGhpKSAqIChxIC8gKDEgLSBlY2NlbnQgKiBlY2NlbnQpIC0gc2luX3BoaSAvICgxIC0gY29uICogY29uKSArIDAuNSAvIGVjY2VudCAqIE1hdGgubG9nKCgxIC0gY29uKSAvICgxICsgY29uKSkpO1xuICAgIHBoaSArPSBkcGhpO1xuICAgIGlmIChNYXRoLmFicyhkcGhpKSA8PSAwLjAwMDAwMDAwMDEpIHtcbiAgICAgIHJldHVybiBwaGk7XG4gICAgfVxuICB9XG5cbiAgLy9jb25zb2xlLmxvZyhcIklRU0ZOLUNPTlY6TGF0aXR1ZGUgZmFpbGVkIHRvIGNvbnZlcmdlIGFmdGVyIDMwIGl0ZXJhdGlvbnNcIik7XG4gIHJldHVybiBOYU47XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZTAsIGUxLCBlMiwgZTMsIHBoaSkge1xuICByZXR1cm4gKGUwICogcGhpIC0gZTEgKiBNYXRoLnNpbigyICogcGhpKSArIGUyICogTWF0aC5zaW4oNCAqIHBoaSkgLSBlMyAqIE1hdGguc2luKDYgKiBwaGkpKTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlY2NlbnQsIHNpbnBoaSwgY29zcGhpKSB7XG4gIHZhciBjb24gPSBlY2NlbnQgKiBzaW5waGk7XG4gIHJldHVybiBjb3NwaGkgLyAoTWF0aC5zcXJ0KDEgLSBjb24gKiBjb24pKTtcbn07IiwidmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGVjY2VudCwgdHMpIHtcbiAgdmFyIGVjY250aCA9IDAuNSAqIGVjY2VudDtcbiAgdmFyIGNvbiwgZHBoaTtcbiAgdmFyIHBoaSA9IEhBTEZfUEkgLSAyICogTWF0aC5hdGFuKHRzKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPD0gMTU7IGkrKykge1xuICAgIGNvbiA9IGVjY2VudCAqIE1hdGguc2luKHBoaSk7XG4gICAgZHBoaSA9IEhBTEZfUEkgLSAyICogTWF0aC5hdGFuKHRzICogKE1hdGgucG93KCgoMSAtIGNvbikgLyAoMSArIGNvbikpLCBlY2NudGgpKSkgLSBwaGk7XG4gICAgcGhpICs9IGRwaGk7XG4gICAgaWYgKE1hdGguYWJzKGRwaGkpIDw9IDAuMDAwMDAwMDAwMSkge1xuICAgICAgcmV0dXJuIHBoaTtcbiAgICB9XG4gIH1cbiAgLy9jb25zb2xlLmxvZyhcInBoaTJ6IGhhcyBOb0NvbnZlcmdlbmNlXCIpO1xuICByZXR1cm4gLTk5OTk7XG59OyIsInZhciBDMDAgPSAxO1xudmFyIEMwMiA9IDAuMjU7XG52YXIgQzA0ID0gMC4wNDY4NzU7XG52YXIgQzA2ID0gMC4wMTk1MzEyNTtcbnZhciBDMDggPSAwLjAxMDY4MTE1MjM0Mzc1O1xudmFyIEMyMiA9IDAuNzU7XG52YXIgQzQ0ID0gMC40Njg3NTtcbnZhciBDNDYgPSAwLjAxMzAyMDgzMzMzMzMzMzMzMzMzO1xudmFyIEM0OCA9IDAuMDA3MTIwNzY4MjI5MTY2NjY2NjY7XG52YXIgQzY2ID0gMC4zNjQ1ODMzMzMzMzMzMzMzMzMzMztcbnZhciBDNjggPSAwLjAwNTY5NjYxNDU4MzMzMzMzMzMzO1xudmFyIEM4OCA9IDAuMzA3NjE3MTg3NTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlcykge1xuICB2YXIgZW4gPSBbXTtcbiAgZW5bMF0gPSBDMDAgLSBlcyAqIChDMDIgKyBlcyAqIChDMDQgKyBlcyAqIChDMDYgKyBlcyAqIEMwOCkpKTtcbiAgZW5bMV0gPSBlcyAqIChDMjIgLSBlcyAqIChDMDQgKyBlcyAqIChDMDYgKyBlcyAqIEMwOCkpKTtcbiAgdmFyIHQgPSBlcyAqIGVzO1xuICBlblsyXSA9IHQgKiAoQzQ0IC0gZXMgKiAoQzQ2ICsgZXMgKiBDNDgpKTtcbiAgdCAqPSBlcztcbiAgZW5bM10gPSB0ICogKEM2NiAtIGVzICogQzY4KTtcbiAgZW5bNF0gPSB0ICogZXMgKiBDODg7XG4gIHJldHVybiBlbjtcbn07IiwidmFyIHBqX21sZm4gPSByZXF1aXJlKFwiLi9wal9tbGZuXCIpO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBNQVhfSVRFUiA9IDIwO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhcmcsIGVzLCBlbikge1xuICB2YXIgayA9IDEgLyAoMSAtIGVzKTtcbiAgdmFyIHBoaSA9IGFyZztcbiAgZm9yICh2YXIgaSA9IE1BWF9JVEVSOyBpOyAtLWkpIHsgLyogcmFyZWx5IGdvZXMgb3ZlciAyIGl0ZXJhdGlvbnMgKi9cbiAgICB2YXIgcyA9IE1hdGguc2luKHBoaSk7XG4gICAgdmFyIHQgPSAxIC0gZXMgKiBzICogcztcbiAgICAvL3QgPSB0aGlzLnBqX21sZm4ocGhpLCBzLCBNYXRoLmNvcyhwaGkpLCBlbikgLSBhcmc7XG4gICAgLy9waGkgLT0gdCAqICh0ICogTWF0aC5zcXJ0KHQpKSAqIGs7XG4gICAgdCA9IChwal9tbGZuKHBoaSwgcywgTWF0aC5jb3MocGhpKSwgZW4pIC0gYXJnKSAqICh0ICogTWF0aC5zcXJ0KHQpKSAqIGs7XG4gICAgcGhpIC09IHQ7XG4gICAgaWYgKE1hdGguYWJzKHQpIDwgRVBTTE4pIHtcbiAgICAgIHJldHVybiBwaGk7XG4gICAgfVxuICB9XG4gIC8vLi5yZXBvcnRFcnJvcihcImNhc3M6cGpfaW52X21sZm46IENvbnZlcmdlbmNlIGVycm9yXCIpO1xuICByZXR1cm4gcGhpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHBoaSwgc3BoaSwgY3BoaSwgZW4pIHtcbiAgY3BoaSAqPSBzcGhpO1xuICBzcGhpICo9IHNwaGk7XG4gIHJldHVybiAoZW5bMF0gKiBwaGkgLSBjcGhpICogKGVuWzFdICsgc3BoaSAqIChlblsyXSArIHNwaGkgKiAoZW5bM10gKyBzcGhpICogZW5bNF0pKSkpO1xufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGVjY2VudCwgc2lucGhpKSB7XG4gIHZhciBjb247XG4gIGlmIChlY2NlbnQgPiAxLjBlLTcpIHtcbiAgICBjb24gPSBlY2NlbnQgKiBzaW5waGk7XG4gICAgcmV0dXJuICgoMSAtIGVjY2VudCAqIGVjY2VudCkgKiAoc2lucGhpIC8gKDEgLSBjb24gKiBjb24pIC0gKDAuNSAvIGVjY2VudCkgKiBNYXRoLmxvZygoMSAtIGNvbikgLyAoMSArIGNvbikpKSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuICgyICogc2lucGhpKTtcbiAgfVxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIHg8MCA/IC0xIDogMTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihlc2lucCwgZXhwKSB7XG4gIHJldHVybiAoTWF0aC5wb3coKDEgLSBlc2lucCkgLyAoMSArIGVzaW5wKSwgZXhwKSk7XG59OyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGFycmF5KXtcbiAgdmFyIG91dCA9IHtcbiAgICB4OiBhcnJheVswXSxcbiAgICB5OiBhcnJheVsxXVxuICB9O1xuICBpZiAoYXJyYXkubGVuZ3RoPjIpIHtcbiAgICBvdXQueiA9IGFycmF5WzJdO1xuICB9XG4gIGlmIChhcnJheS5sZW5ndGg+Mykge1xuICAgIG91dC5tID0gYXJyYXlbM107XG4gIH1cbiAgcmV0dXJuIG91dDtcbn07IiwidmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZWNjZW50LCBwaGksIHNpbnBoaSkge1xuICB2YXIgY29uID0gZWNjZW50ICogc2lucGhpO1xuICB2YXIgY29tID0gMC41ICogZWNjZW50O1xuICBjb24gPSBNYXRoLnBvdygoKDEgLSBjb24pIC8gKDEgKyBjb24pKSwgY29tKTtcbiAgcmV0dXJuIChNYXRoLnRhbigwLjUgKiAoSEFMRl9QSSAtIHBoaSkpIC8gY29uKTtcbn07IiwiZXhwb3J0cy53Z3M4NCA9IHtcbiAgdG93Z3M4NDogXCIwLDAsMFwiLFxuICBlbGxpcHNlOiBcIldHUzg0XCIsXG4gIGRhdHVtTmFtZTogXCJXR1M4NFwiXG59O1xuZXhwb3J0cy5jaDE5MDMgPSB7XG4gIHRvd2dzODQ6IFwiNjc0LjM3NCwxNS4wNTYsNDA1LjM0NlwiLFxuICBlbGxpcHNlOiBcImJlc3NlbFwiLFxuICBkYXR1bU5hbWU6IFwic3dpc3NcIlxufTtcbmV4cG9ydHMuZ2dyczg3ID0ge1xuICB0b3dnczg0OiBcIi0xOTkuODcsNzQuNzksMjQ2LjYyXCIsXG4gIGVsbGlwc2U6IFwiR1JTODBcIixcbiAgZGF0dW1OYW1lOiBcIkdyZWVrX0dlb2RldGljX1JlZmVyZW5jZV9TeXN0ZW1fMTk4N1wiXG59O1xuZXhwb3J0cy5uYWQ4MyA9IHtcbiAgdG93Z3M4NDogXCIwLDAsMFwiLFxuICBlbGxpcHNlOiBcIkdSUzgwXCIsXG4gIGRhdHVtTmFtZTogXCJOb3J0aF9BbWVyaWNhbl9EYXR1bV8xOTgzXCJcbn07XG5leHBvcnRzLm5hZDI3ID0ge1xuICBuYWRncmlkczogXCJAY29udXMsQGFsYXNrYSxAbnR2Ml8wLmdzYixAbnR2MV9jYW4uZGF0XCIsXG4gIGVsbGlwc2U6IFwiY2xyazY2XCIsXG4gIGRhdHVtTmFtZTogXCJOb3J0aF9BbWVyaWNhbl9EYXR1bV8xOTI3XCJcbn07XG5leHBvcnRzLnBvdHNkYW0gPSB7XG4gIHRvd2dzODQ6IFwiNjA2LjAsMjMuMCw0MTMuMFwiLFxuICBlbGxpcHNlOiBcImJlc3NlbFwiLFxuICBkYXR1bU5hbWU6IFwiUG90c2RhbSBSYXVlbmJlcmcgMTk1MCBESEROXCJcbn07XG5leHBvcnRzLmNhcnRoYWdlID0ge1xuICB0b3dnczg0OiBcIi0yNjMuMCw2LjAsNDMxLjBcIixcbiAgZWxsaXBzZTogXCJjbGFyazgwXCIsXG4gIGRhdHVtTmFtZTogXCJDYXJ0aGFnZSAxOTM0IFR1bmlzaWFcIlxufTtcbmV4cG9ydHMuaGVybWFubnNrb2dlbCA9IHtcbiAgdG93Z3M4NDogXCI2NTMuMCwtMjEyLjAsNDQ5LjBcIixcbiAgZWxsaXBzZTogXCJiZXNzZWxcIixcbiAgZGF0dW1OYW1lOiBcIkhlcm1hbm5za29nZWxcIlxufTtcbmV4cG9ydHMuaXJlNjUgPSB7XG4gIHRvd2dzODQ6IFwiNDgyLjUzMCwtMTMwLjU5Niw1NjQuNTU3LC0xLjA0MiwtMC4yMTQsLTAuNjMxLDguMTVcIixcbiAgZWxsaXBzZTogXCJtb2RfYWlyeVwiLFxuICBkYXR1bU5hbWU6IFwiSXJlbGFuZCAxOTY1XCJcbn07XG5leHBvcnRzLnJhc3NhZGlyYW4gPSB7XG4gIHRvd2dzODQ6IFwiLTEzMy42MywtMTU3LjUsLTE1OC42MlwiLFxuICBlbGxpcHNlOiBcImludGxcIixcbiAgZGF0dW1OYW1lOiBcIlJhc3NhZGlyYW5cIlxufTtcbmV4cG9ydHMubnpnZDQ5ID0ge1xuICB0b3dnczg0OiBcIjU5LjQ3LC01LjA0LDE4Ny40NCwwLjQ3LC0wLjEsMS4wMjQsLTQuNTk5M1wiLFxuICBlbGxpcHNlOiBcImludGxcIixcbiAgZGF0dW1OYW1lOiBcIk5ldyBaZWFsYW5kIEdlb2RldGljIERhdHVtIDE5NDlcIlxufTtcbmV4cG9ydHMub3NnYjM2ID0ge1xuICB0b3dnczg0OiBcIjQ0Ni40NDgsLTEyNS4xNTcsNTQyLjA2MCwwLjE1MDIsMC4yNDcwLDAuODQyMSwtMjAuNDg5NFwiLFxuICBlbGxpcHNlOiBcImFpcnlcIixcbiAgZGF0dW1OYW1lOiBcIkFpcnkgMTgzMFwiXG59O1xuZXhwb3J0cy5zX2p0c2sgPSB7XG4gIHRvd2dzODQ6IFwiNTg5LDc2LDQ4MFwiLFxuICBlbGxpcHNlOiAnYmVzc2VsJyxcbiAgZGF0dW1OYW1lOiAnUy1KVFNLIChGZXJybyknXG59O1xuZXhwb3J0cy5iZWR1YXJhbSA9IHtcbiAgdG93Z3M4NDogJy0xMDYsLTg3LDE4OCcsXG4gIGVsbGlwc2U6ICdjbHJrODAnLFxuICBkYXR1bU5hbWU6ICdCZWR1YXJhbSdcbn07XG5leHBvcnRzLmd1bnVuZ19zZWdhcmEgPSB7XG4gIHRvd2dzODQ6ICctNDAzLDY4NCw0MScsXG4gIGVsbGlwc2U6ICdiZXNzZWwnLFxuICBkYXR1bU5hbWU6ICdHdW51bmcgU2VnYXJhIEpha2FydGEnXG59O1xuZXhwb3J0cy5ybmI3MiA9IHtcbiAgdG93Z3M4NDogXCIxMDYuODY5LC01Mi4yOTc4LDEwMy43MjQsLTAuMzM2NTcsMC40NTY5NTUsLTEuODQyMTgsMVwiLFxuICBlbGxpcHNlOiBcImludGxcIixcbiAgZGF0dW1OYW1lOiBcIlJlc2VhdSBOYXRpb25hbCBCZWxnZSAxOTcyXCJcbn07IiwiZXhwb3J0cy5NRVJJVCA9IHtcbiAgYTogNjM3ODEzNy4wLFxuICByZjogMjk4LjI1NyxcbiAgZWxsaXBzZU5hbWU6IFwiTUVSSVQgMTk4M1wiXG59O1xuZXhwb3J0cy5TR1M4NSA9IHtcbiAgYTogNjM3ODEzNi4wLFxuICByZjogMjk4LjI1NyxcbiAgZWxsaXBzZU5hbWU6IFwiU292aWV0IEdlb2RldGljIFN5c3RlbSA4NVwiXG59O1xuZXhwb3J0cy5HUlM4MCA9IHtcbiAgYTogNjM3ODEzNy4wLFxuICByZjogMjk4LjI1NzIyMjEwMSxcbiAgZWxsaXBzZU5hbWU6IFwiR1JTIDE5ODAoSVVHRywgMTk4MClcIlxufTtcbmV4cG9ydHMuSUFVNzYgPSB7XG4gIGE6IDYzNzgxNDAuMCxcbiAgcmY6IDI5OC4yNTcsXG4gIGVsbGlwc2VOYW1lOiBcIklBVSAxOTc2XCJcbn07XG5leHBvcnRzLmFpcnkgPSB7XG4gIGE6IDYzNzc1NjMuMzk2LFxuICBiOiA2MzU2MjU2LjkxMCxcbiAgZWxsaXBzZU5hbWU6IFwiQWlyeSAxODMwXCJcbn07XG5leHBvcnRzLkFQTDQgPSB7XG4gIGE6IDYzNzgxMzcsXG4gIHJmOiAyOTguMjUsXG4gIGVsbGlwc2VOYW1lOiBcIkFwcGwuIFBoeXNpY3MuIDE5NjVcIlxufTtcbmV4cG9ydHMuTldMOUQgPSB7XG4gIGE6IDYzNzgxNDUuMCxcbiAgcmY6IDI5OC4yNSxcbiAgZWxsaXBzZU5hbWU6IFwiTmF2YWwgV2VhcG9ucyBMYWIuLCAxOTY1XCJcbn07XG5leHBvcnRzLm1vZF9haXJ5ID0ge1xuICBhOiA2Mzc3MzQwLjE4OSxcbiAgYjogNjM1NjAzNC40NDYsXG4gIGVsbGlwc2VOYW1lOiBcIk1vZGlmaWVkIEFpcnlcIlxufTtcbmV4cG9ydHMuYW5kcmFlID0ge1xuICBhOiA2Mzc3MTA0LjQzLFxuICByZjogMzAwLjAsXG4gIGVsbGlwc2VOYW1lOiBcIkFuZHJhZSAxODc2IChEZW4uLCBJY2xuZC4pXCJcbn07XG5leHBvcnRzLmF1c3RfU0EgPSB7XG4gIGE6IDYzNzgxNjAuMCxcbiAgcmY6IDI5OC4yNSxcbiAgZWxsaXBzZU5hbWU6IFwiQXVzdHJhbGlhbiBOYXRsICYgUy4gQW1lci4gMTk2OVwiXG59O1xuZXhwb3J0cy5HUlM2NyA9IHtcbiAgYTogNjM3ODE2MC4wLFxuICByZjogMjk4LjI0NzE2NzQyNzAsXG4gIGVsbGlwc2VOYW1lOiBcIkdSUyA2NyhJVUdHIDE5NjcpXCJcbn07XG5leHBvcnRzLmJlc3NlbCA9IHtcbiAgYTogNjM3NzM5Ny4xNTUsXG4gIHJmOiAyOTkuMTUyODEyOCxcbiAgZWxsaXBzZU5hbWU6IFwiQmVzc2VsIDE4NDFcIlxufTtcbmV4cG9ydHMuYmVzc19uYW0gPSB7XG4gIGE6IDYzNzc0ODMuODY1LFxuICByZjogMjk5LjE1MjgxMjgsXG4gIGVsbGlwc2VOYW1lOiBcIkJlc3NlbCAxODQxIChOYW1pYmlhKVwiXG59O1xuZXhwb3J0cy5jbHJrNjYgPSB7XG4gIGE6IDYzNzgyMDYuNCxcbiAgYjogNjM1NjU4My44LFxuICBlbGxpcHNlTmFtZTogXCJDbGFya2UgMTg2NlwiXG59O1xuZXhwb3J0cy5jbHJrODAgPSB7XG4gIGE6IDYzNzgyNDkuMTQ1LFxuICByZjogMjkzLjQ2NjMsXG4gIGVsbGlwc2VOYW1lOiBcIkNsYXJrZSAxODgwIG1vZC5cIlxufTtcbmV4cG9ydHMuY2xyazU4ID0ge1xuICBhOiA2Mzc4MjkzLjY0NTIwODc1OSxcbiAgcmY6IDI5NC4yNjA2NzYzNjkyNjU0LFxuICBlbGxpcHNlTmFtZTogXCJDbGFya2UgMTg1OFwiXG59O1xuZXhwb3J0cy5DUE0gPSB7XG4gIGE6IDYzNzU3MzguNyxcbiAgcmY6IDMzNC4yOSxcbiAgZWxsaXBzZU5hbWU6IFwiQ29tbS4gZGVzIFBvaWRzIGV0IE1lc3VyZXMgMTc5OVwiXG59O1xuZXhwb3J0cy5kZWxtYnIgPSB7XG4gIGE6IDYzNzY0MjguMCxcbiAgcmY6IDMxMS41LFxuICBlbGxpcHNlTmFtZTogXCJEZWxhbWJyZSAxODEwIChCZWxnaXVtKVwiXG59O1xuZXhwb3J0cy5lbmdlbGlzID0ge1xuICBhOiA2Mzc4MTM2LjA1LFxuICByZjogMjk4LjI1NjYsXG4gIGVsbGlwc2VOYW1lOiBcIkVuZ2VsaXMgMTk4NVwiXG59O1xuZXhwb3J0cy5ldnJzdDMwID0ge1xuICBhOiA2Mzc3Mjc2LjM0NSxcbiAgcmY6IDMwMC44MDE3LFxuICBlbGxpcHNlTmFtZTogXCJFdmVyZXN0IDE4MzBcIlxufTtcbmV4cG9ydHMuZXZyc3Q0OCA9IHtcbiAgYTogNjM3NzMwNC4wNjMsXG4gIHJmOiAzMDAuODAxNyxcbiAgZWxsaXBzZU5hbWU6IFwiRXZlcmVzdCAxOTQ4XCJcbn07XG5leHBvcnRzLmV2cnN0NTYgPSB7XG4gIGE6IDYzNzczMDEuMjQzLFxuICByZjogMzAwLjgwMTcsXG4gIGVsbGlwc2VOYW1lOiBcIkV2ZXJlc3QgMTk1NlwiXG59O1xuZXhwb3J0cy5ldnJzdDY5ID0ge1xuICBhOiA2Mzc3Mjk1LjY2NCxcbiAgcmY6IDMwMC44MDE3LFxuICBlbGxpcHNlTmFtZTogXCJFdmVyZXN0IDE5NjlcIlxufTtcbmV4cG9ydHMuZXZyc3RTUyA9IHtcbiAgYTogNjM3NzI5OC41NTYsXG4gIHJmOiAzMDAuODAxNyxcbiAgZWxsaXBzZU5hbWU6IFwiRXZlcmVzdCAoU2FiYWggJiBTYXJhd2FrKVwiXG59O1xuZXhwb3J0cy5mc2NocjYwID0ge1xuICBhOiA2Mzc4MTY2LjAsXG4gIHJmOiAyOTguMyxcbiAgZWxsaXBzZU5hbWU6IFwiRmlzY2hlciAoTWVyY3VyeSBEYXR1bSkgMTk2MFwiXG59O1xuZXhwb3J0cy5mc2NocjYwbSA9IHtcbiAgYTogNjM3ODE1NS4wLFxuICByZjogMjk4LjMsXG4gIGVsbGlwc2VOYW1lOiBcIkZpc2NoZXIgMTk2MFwiXG59O1xuZXhwb3J0cy5mc2NocjY4ID0ge1xuICBhOiA2Mzc4MTUwLjAsXG4gIHJmOiAyOTguMyxcbiAgZWxsaXBzZU5hbWU6IFwiRmlzY2hlciAxOTY4XCJcbn07XG5leHBvcnRzLmhlbG1lcnQgPSB7XG4gIGE6IDYzNzgyMDAuMCxcbiAgcmY6IDI5OC4zLFxuICBlbGxpcHNlTmFtZTogXCJIZWxtZXJ0IDE5MDZcIlxufTtcbmV4cG9ydHMuaG91Z2ggPSB7XG4gIGE6IDYzNzgyNzAuMCxcbiAgcmY6IDI5Ny4wLFxuICBlbGxpcHNlTmFtZTogXCJIb3VnaFwiXG59O1xuZXhwb3J0cy5pbnRsID0ge1xuICBhOiA2Mzc4Mzg4LjAsXG4gIHJmOiAyOTcuMCxcbiAgZWxsaXBzZU5hbWU6IFwiSW50ZXJuYXRpb25hbCAxOTA5IChIYXlmb3JkKVwiXG59O1xuZXhwb3J0cy5rYXVsYSA9IHtcbiAgYTogNjM3ODE2My4wLFxuICByZjogMjk4LjI0LFxuICBlbGxpcHNlTmFtZTogXCJLYXVsYSAxOTYxXCJcbn07XG5leHBvcnRzLmxlcmNoID0ge1xuICBhOiA2Mzc4MTM5LjAsXG4gIHJmOiAyOTguMjU3LFxuICBlbGxpcHNlTmFtZTogXCJMZXJjaCAxOTc5XCJcbn07XG5leHBvcnRzLm1wcnRzID0ge1xuICBhOiA2Mzk3MzAwLjAsXG4gIHJmOiAxOTEuMCxcbiAgZWxsaXBzZU5hbWU6IFwiTWF1cGVydGl1cyAxNzM4XCJcbn07XG5leHBvcnRzLm5ld19pbnRsID0ge1xuICBhOiA2Mzc4MTU3LjUsXG4gIGI6IDYzNTY3NzIuMixcbiAgZWxsaXBzZU5hbWU6IFwiTmV3IEludGVybmF0aW9uYWwgMTk2N1wiXG59O1xuZXhwb3J0cy5wbGVzc2lzID0ge1xuICBhOiA2Mzc2NTIzLjAsXG4gIHJmOiA2MzU1ODYzLjAsXG4gIGVsbGlwc2VOYW1lOiBcIlBsZXNzaXMgMTgxNyAoRnJhbmNlKVwiXG59O1xuZXhwb3J0cy5rcmFzcyA9IHtcbiAgYTogNjM3ODI0NS4wLFxuICByZjogMjk4LjMsXG4gIGVsbGlwc2VOYW1lOiBcIktyYXNzb3Zza3ksIDE5NDJcIlxufTtcbmV4cG9ydHMuU0Vhc2lhID0ge1xuICBhOiA2Mzc4MTU1LjAsXG4gIGI6IDYzNTY3NzMuMzIwNSxcbiAgZWxsaXBzZU5hbWU6IFwiU291dGhlYXN0IEFzaWFcIlxufTtcbmV4cG9ydHMud2FsYmVjayA9IHtcbiAgYTogNjM3Njg5Ni4wLFxuICBiOiA2MzU1ODM0Ljg0NjcsXG4gIGVsbGlwc2VOYW1lOiBcIldhbGJlY2tcIlxufTtcbmV4cG9ydHMuV0dTNjAgPSB7XG4gIGE6IDYzNzgxNjUuMCxcbiAgcmY6IDI5OC4zLFxuICBlbGxpcHNlTmFtZTogXCJXR1MgNjBcIlxufTtcbmV4cG9ydHMuV0dTNjYgPSB7XG4gIGE6IDYzNzgxNDUuMCxcbiAgcmY6IDI5OC4yNSxcbiAgZWxsaXBzZU5hbWU6IFwiV0dTIDY2XCJcbn07XG5leHBvcnRzLldHUzcgPSB7XG4gIGE6IDYzNzgxMzUuMCxcbiAgcmY6IDI5OC4yNixcbiAgZWxsaXBzZU5hbWU6IFwiV0dTIDcyXCJcbn07XG5leHBvcnRzLldHUzg0ID0ge1xuICBhOiA2Mzc4MTM3LjAsXG4gIHJmOiAyOTguMjU3MjIzNTYzLFxuICBlbGxpcHNlTmFtZTogXCJXR1MgODRcIlxufTtcbmV4cG9ydHMuc3BoZXJlID0ge1xuICBhOiA2MzcwOTk3LjAsXG4gIGI6IDYzNzA5OTcuMCxcbiAgZWxsaXBzZU5hbWU6IFwiTm9ybWFsIFNwaGVyZSAocj02MzcwOTk3KVwiXG59OyIsImV4cG9ydHMuZ3JlZW53aWNoID0gMC4wOyAvL1wiMGRFXCIsXG5leHBvcnRzLmxpc2JvbiA9IC05LjEzMTkwNjExMTExMTsgLy9cIjlkMDcnNTQuODYyXFxcIldcIixcbmV4cG9ydHMucGFyaXMgPSAyLjMzNzIyOTE2NjY2NzsgLy9cIjJkMjAnMTQuMDI1XFxcIkVcIixcbmV4cG9ydHMuYm9nb3RhID0gLTc0LjA4MDkxNjY2NjY2NzsgLy9cIjc0ZDA0JzUxLjNcXFwiV1wiLFxuZXhwb3J0cy5tYWRyaWQgPSAtMy42ODc5Mzg4ODg4ODk7IC8vXCIzZDQxJzE2LjU4XFxcIldcIixcbmV4cG9ydHMucm9tZSA9IDEyLjQ1MjMzMzMzMzMzMzsgLy9cIjEyZDI3JzguNFxcXCJFXCIsXG5leHBvcnRzLmJlcm4gPSA3LjQzOTU4MzMzMzMzMzsgLy9cIjdkMjYnMjIuNVxcXCJFXCIsXG5leHBvcnRzLmpha2FydGEgPSAxMDYuODA3NzE5NDQ0NDQ0OyAvL1wiMTA2ZDQ4JzI3Ljc5XFxcIkVcIixcbmV4cG9ydHMuZmVycm8gPSAtMTcuNjY2NjY2NjY2NjY3OyAvL1wiMTdkNDAnV1wiLFxuZXhwb3J0cy5icnVzc2VscyA9IDQuMzY3OTc1OyAvL1wiNGQyMic0LjcxXFxcIkVcIixcbmV4cG9ydHMuc3RvY2tob2xtID0gMTguMDU4Mjc3Nzc3Nzc4OyAvL1wiMThkMycyOS44XFxcIkVcIixcbmV4cG9ydHMuYXRoZW5zID0gMjMuNzE2MzM3NTsgLy9cIjIzZDQyJzU4LjgxNVxcXCJFXCIsXG5leHBvcnRzLm9zbG8gPSAxMC43MjI5MTY2NjY2Njc7IC8vXCIxMGQ0MycyMi41XFxcIkVcIiIsImV4cG9ydHMuZnQgPSB7dG9fbWV0ZXI6IDAuMzA0OH07XG5leHBvcnRzWyd1cy1mdCddID0ge3RvX21ldGVyOiAxMjAwIC8gMzkzN307XG4iLCJ2YXIgcHJvaiA9IHJlcXVpcmUoJy4vUHJvaicpO1xudmFyIHRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vdHJhbnNmb3JtJyk7XG52YXIgd2dzODQgPSBwcm9qKCdXR1M4NCcpO1xuXG5mdW5jdGlvbiB0cmFuc2Zvcm1lcihmcm9tLCB0bywgY29vcmRzKSB7XG4gIHZhciB0cmFuc2Zvcm1lZEFycmF5O1xuICBpZiAoQXJyYXkuaXNBcnJheShjb29yZHMpKSB7XG4gICAgdHJhbnNmb3JtZWRBcnJheSA9IHRyYW5zZm9ybShmcm9tLCB0bywgY29vcmRzKTtcbiAgICBpZiAoY29vcmRzLmxlbmd0aCA9PT0gMykge1xuICAgICAgcmV0dXJuIFt0cmFuc2Zvcm1lZEFycmF5LngsIHRyYW5zZm9ybWVkQXJyYXkueSwgdHJhbnNmb3JtZWRBcnJheS56XTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gW3RyYW5zZm9ybWVkQXJyYXkueCwgdHJhbnNmb3JtZWRBcnJheS55XTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybShmcm9tLCB0bywgY29vcmRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjaGVja1Byb2ooaXRlbSkge1xuICBpZiAoaXRlbSBpbnN0YW5jZW9mIHByb2opIHtcbiAgICByZXR1cm4gaXRlbTtcbiAgfVxuICBpZiAoaXRlbS5vUHJvaikge1xuICAgIHJldHVybiBpdGVtLm9Qcm9qO1xuICB9XG4gIHJldHVybiBwcm9qKGl0ZW0pO1xufVxuZnVuY3Rpb24gcHJvajQoZnJvbVByb2osIHRvUHJvaiwgY29vcmQpIHtcbiAgZnJvbVByb2ogPSBjaGVja1Byb2ooZnJvbVByb2opO1xuICB2YXIgc2luZ2xlID0gZmFsc2U7XG4gIHZhciBvYmo7XG4gIGlmICh0eXBlb2YgdG9Qcm9qID09PSAndW5kZWZpbmVkJykge1xuICAgIHRvUHJvaiA9IGZyb21Qcm9qO1xuICAgIGZyb21Qcm9qID0gd2dzODQ7XG4gICAgc2luZ2xlID0gdHJ1ZTtcbiAgfVxuICBlbHNlIGlmICh0eXBlb2YgdG9Qcm9qLnggIT09ICd1bmRlZmluZWQnIHx8IEFycmF5LmlzQXJyYXkodG9Qcm9qKSkge1xuICAgIGNvb3JkID0gdG9Qcm9qO1xuICAgIHRvUHJvaiA9IGZyb21Qcm9qO1xuICAgIGZyb21Qcm9qID0gd2dzODQ7XG4gICAgc2luZ2xlID0gdHJ1ZTtcbiAgfVxuICB0b1Byb2ogPSBjaGVja1Byb2oodG9Qcm9qKTtcbiAgaWYgKGNvb3JkKSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybWVyKGZyb21Qcm9qLCB0b1Byb2osIGNvb3JkKTtcbiAgfVxuICBlbHNlIHtcbiAgICBvYmogPSB7XG4gICAgICBmb3J3YXJkOiBmdW5jdGlvbihjb29yZHMpIHtcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybWVyKGZyb21Qcm9qLCB0b1Byb2osIGNvb3Jkcyk7XG4gICAgICB9LFxuICAgICAgaW52ZXJzZTogZnVuY3Rpb24oY29vcmRzKSB7XG4gICAgICAgIHJldHVybiB0cmFuc2Zvcm1lcih0b1Byb2osIGZyb21Qcm9qLCBjb29yZHMpO1xuICAgICAgfVxuICAgIH07XG4gICAgaWYgKHNpbmdsZSkge1xuICAgICAgb2JqLm9Qcm9qID0gdG9Qcm9qO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IHByb2o0OyIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIFBKRF8zUEFSQU0gPSAxO1xudmFyIFBKRF83UEFSQU0gPSAyO1xudmFyIFBKRF9HUklEU0hJRlQgPSAzO1xudmFyIFBKRF9XR1M4NCA9IDQ7IC8vIFdHUzg0IG9yIGVxdWl2YWxlbnRcbnZhciBQSkRfTk9EQVRVTSA9IDU7IC8vIFdHUzg0IG9yIGVxdWl2YWxlbnRcbnZhciBTRUNfVE9fUkFEID0gNC44NDgxMzY4MTEwOTUzNTk5MzU4OTkxNDEwMjM1N2UtNjtcbnZhciBBRF9DID0gMS4wMDI2MDAwO1xudmFyIENPU182N1A1ID0gMC4zODI2ODM0MzIzNjUwODk3NztcbnZhciBkYXR1bSA9IGZ1bmN0aW9uKHByb2opIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIGRhdHVtKSkge1xuICAgIHJldHVybiBuZXcgZGF0dW0ocHJvaik7XG4gIH1cbiAgdGhpcy5kYXR1bV90eXBlID0gUEpEX1dHUzg0OyAvL2RlZmF1bHQgc2V0dGluZ1xuICBpZiAoIXByb2opIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKHByb2ouZGF0dW1Db2RlICYmIHByb2ouZGF0dW1Db2RlID09PSAnbm9uZScpIHtcbiAgICB0aGlzLmRhdHVtX3R5cGUgPSBQSkRfTk9EQVRVTTtcbiAgfVxuICBpZiAocHJvai5kYXR1bV9wYXJhbXMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb2ouZGF0dW1fcGFyYW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwcm9qLmRhdHVtX3BhcmFtc1tpXSA9IHBhcnNlRmxvYXQocHJvai5kYXR1bV9wYXJhbXNbaV0pO1xuICAgIH1cbiAgICBpZiAocHJvai5kYXR1bV9wYXJhbXNbMF0gIT09IDAgfHwgcHJvai5kYXR1bV9wYXJhbXNbMV0gIT09IDAgfHwgcHJvai5kYXR1bV9wYXJhbXNbMl0gIT09IDApIHtcbiAgICAgIHRoaXMuZGF0dW1fdHlwZSA9IFBKRF8zUEFSQU07XG4gICAgfVxuICAgIGlmIChwcm9qLmRhdHVtX3BhcmFtcy5sZW5ndGggPiAzKSB7XG4gICAgICBpZiAocHJvai5kYXR1bV9wYXJhbXNbM10gIT09IDAgfHwgcHJvai5kYXR1bV9wYXJhbXNbNF0gIT09IDAgfHwgcHJvai5kYXR1bV9wYXJhbXNbNV0gIT09IDAgfHwgcHJvai5kYXR1bV9wYXJhbXNbNl0gIT09IDApIHtcbiAgICAgICAgdGhpcy5kYXR1bV90eXBlID0gUEpEXzdQQVJBTTtcbiAgICAgICAgcHJvai5kYXR1bV9wYXJhbXNbM10gKj0gU0VDX1RPX1JBRDtcbiAgICAgICAgcHJvai5kYXR1bV9wYXJhbXNbNF0gKj0gU0VDX1RPX1JBRDtcbiAgICAgICAgcHJvai5kYXR1bV9wYXJhbXNbNV0gKj0gU0VDX1RPX1JBRDtcbiAgICAgICAgcHJvai5kYXR1bV9wYXJhbXNbNl0gPSAocHJvai5kYXR1bV9wYXJhbXNbNl0gLyAxMDAwMDAwLjApICsgMS4wO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvLyBER1IgMjAxMS0wMy0yMSA6IG5hZGdyaWRzIHN1cHBvcnRcbiAgdGhpcy5kYXR1bV90eXBlID0gcHJvai5ncmlkcyA/IFBKRF9HUklEU0hJRlQgOiB0aGlzLmRhdHVtX3R5cGU7XG5cbiAgdGhpcy5hID0gcHJvai5hOyAvL2RhdHVtIG9iamVjdCBhbHNvIHVzZXMgdGhlc2UgdmFsdWVzXG4gIHRoaXMuYiA9IHByb2ouYjtcbiAgdGhpcy5lcyA9IHByb2ouZXM7XG4gIHRoaXMuZXAyID0gcHJvai5lcDI7XG4gIHRoaXMuZGF0dW1fcGFyYW1zID0gcHJvai5kYXR1bV9wYXJhbXM7XG4gIGlmICh0aGlzLmRhdHVtX3R5cGUgPT09IFBKRF9HUklEU0hJRlQpIHtcbiAgICB0aGlzLmdyaWRzID0gcHJvai5ncmlkcztcbiAgfVxufTtcbmRhdHVtLnByb3RvdHlwZSA9IHtcblxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAvLyBjc19jb21wYXJlX2RhdHVtcygpXG4gIC8vICAgUmV0dXJucyBUUlVFIGlmIHRoZSB0d28gZGF0dW1zIG1hdGNoLCBvdGhlcndpc2UgRkFMU0UuXG4gIGNvbXBhcmVfZGF0dW1zOiBmdW5jdGlvbihkZXN0KSB7XG4gICAgaWYgKHRoaXMuZGF0dW1fdHlwZSAhPT0gZGVzdC5kYXR1bV90eXBlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIGZhbHNlLCBkYXR1bXMgYXJlIG5vdCBlcXVhbFxuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLmEgIT09IGRlc3QuYSB8fCBNYXRoLmFicyh0aGlzLmVzIC0gZGVzdC5lcykgPiAwLjAwMDAwMDAwMDA1MCkge1xuICAgICAgLy8gdGhlIHRvbGVyZW5jZSBmb3IgZXMgaXMgdG8gZW5zdXJlIHRoYXQgR1JTODAgYW5kIFdHUzg0XG4gICAgICAvLyBhcmUgY29uc2lkZXJlZCBpZGVudGljYWxcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5kYXR1bV90eXBlID09PSBQSkRfM1BBUkFNKSB7XG4gICAgICByZXR1cm4gKHRoaXMuZGF0dW1fcGFyYW1zWzBdID09PSBkZXN0LmRhdHVtX3BhcmFtc1swXSAmJiB0aGlzLmRhdHVtX3BhcmFtc1sxXSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbMV0gJiYgdGhpcy5kYXR1bV9wYXJhbXNbMl0gPT09IGRlc3QuZGF0dW1fcGFyYW1zWzJdKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5kYXR1bV90eXBlID09PSBQSkRfN1BBUkFNKSB7XG4gICAgICByZXR1cm4gKHRoaXMuZGF0dW1fcGFyYW1zWzBdID09PSBkZXN0LmRhdHVtX3BhcmFtc1swXSAmJiB0aGlzLmRhdHVtX3BhcmFtc1sxXSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbMV0gJiYgdGhpcy5kYXR1bV9wYXJhbXNbMl0gPT09IGRlc3QuZGF0dW1fcGFyYW1zWzJdICYmIHRoaXMuZGF0dW1fcGFyYW1zWzNdID09PSBkZXN0LmRhdHVtX3BhcmFtc1szXSAmJiB0aGlzLmRhdHVtX3BhcmFtc1s0XSA9PT0gZGVzdC5kYXR1bV9wYXJhbXNbNF0gJiYgdGhpcy5kYXR1bV9wYXJhbXNbNV0gPT09IGRlc3QuZGF0dW1fcGFyYW1zWzVdICYmIHRoaXMuZGF0dW1fcGFyYW1zWzZdID09PSBkZXN0LmRhdHVtX3BhcmFtc1s2XSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZGF0dW1fdHlwZSA9PT0gUEpEX0dSSURTSElGVCB8fCBkZXN0LmRhdHVtX3R5cGUgPT09IFBKRF9HUklEU0hJRlQpIHtcbiAgICAgIC8vYWxlcnQoXCJFUlJPUjogR3JpZCBzaGlmdCB0cmFuc2Zvcm1hdGlvbnMgYXJlIG5vdCBpbXBsZW1lbnRlZC5cIik7XG4gICAgICAvL3JldHVybiBmYWxzZVxuICAgICAgLy9ER1IgMjAxMi0wNy0yOSBsYXp5IC4uLlxuICAgICAgcmV0dXJuIHRoaXMubmFkZ3JpZHMgPT09IGRlc3QubmFkZ3JpZHM7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHRydWU7IC8vIGRhdHVtcyBhcmUgZXF1YWxcbiAgICB9XG4gIH0sIC8vIGNzX2NvbXBhcmVfZGF0dW1zKClcblxuICAvKlxuICAgKiBUaGUgZnVuY3Rpb24gQ29udmVydF9HZW9kZXRpY19Ub19HZW9jZW50cmljIGNvbnZlcnRzIGdlb2RldGljIGNvb3JkaW5hdGVzXG4gICAqIChsYXRpdHVkZSwgbG9uZ2l0dWRlLCBhbmQgaGVpZ2h0KSB0byBnZW9jZW50cmljIGNvb3JkaW5hdGVzIChYLCBZLCBaKSxcbiAgICogYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IGVsbGlwc29pZCBwYXJhbWV0ZXJzLlxuICAgKlxuICAgKiAgICBMYXRpdHVkZSAgOiBHZW9kZXRpYyBsYXRpdHVkZSBpbiByYWRpYW5zICAgICAgICAgICAgICAgICAgICAgKGlucHV0KVxuICAgKiAgICBMb25naXR1ZGUgOiBHZW9kZXRpYyBsb25naXR1ZGUgaW4gcmFkaWFucyAgICAgICAgICAgICAgICAgICAgKGlucHV0KVxuICAgKiAgICBIZWlnaHQgICAgOiBHZW9kZXRpYyBoZWlnaHQsIGluIG1ldGVycyAgICAgICAgICAgICAgICAgICAgICAgKGlucHV0KVxuICAgKiAgICBYICAgICAgICAgOiBDYWxjdWxhdGVkIEdlb2NlbnRyaWMgWCBjb29yZGluYXRlLCBpbiBtZXRlcnMgICAgKG91dHB1dClcbiAgICogICAgWSAgICAgICAgIDogQ2FsY3VsYXRlZCBHZW9jZW50cmljIFkgY29vcmRpbmF0ZSwgaW4gbWV0ZXJzICAgIChvdXRwdXQpXG4gICAqICAgIFogICAgICAgICA6IENhbGN1bGF0ZWQgR2VvY2VudHJpYyBaIGNvb3JkaW5hdGUsIGluIG1ldGVycyAgICAob3V0cHV0KVxuICAgKlxuICAgKi9cbiAgZ2VvZGV0aWNfdG9fZ2VvY2VudHJpYzogZnVuY3Rpb24ocCkge1xuICAgIHZhciBMb25naXR1ZGUgPSBwLng7XG4gICAgdmFyIExhdGl0dWRlID0gcC55O1xuICAgIHZhciBIZWlnaHQgPSBwLnogPyBwLnogOiAwOyAvL1ogdmFsdWUgbm90IGFsd2F5cyBzdXBwbGllZFxuICAgIHZhciBYOyAvLyBvdXRwdXRcbiAgICB2YXIgWTtcbiAgICB2YXIgWjtcblxuICAgIHZhciBFcnJvcl9Db2RlID0gMDsgLy8gIEdFT0NFTlRfTk9fRVJST1I7XG4gICAgdmFyIFJuOyAvKiAgRWFydGggcmFkaXVzIGF0IGxvY2F0aW9uICAqL1xuICAgIHZhciBTaW5fTGF0OyAvKiAgTWF0aC5zaW4oTGF0aXR1ZGUpICAqL1xuICAgIHZhciBTaW4yX0xhdDsgLyogIFNxdWFyZSBvZiBNYXRoLnNpbihMYXRpdHVkZSkgICovXG4gICAgdmFyIENvc19MYXQ7IC8qICBNYXRoLmNvcyhMYXRpdHVkZSkgICovXG5cbiAgICAvKlxuICAgICAqKiBEb24ndCBibG93IHVwIGlmIExhdGl0dWRlIGlzIGp1c3QgYSBsaXR0bGUgb3V0IG9mIHRoZSB2YWx1ZVxuICAgICAqKiByYW5nZSBhcyBpdCBtYXkganVzdCBiZSBhIHJvdW5kaW5nIGlzc3VlLiAgQWxzbyByZW1vdmVkIGxvbmdpdHVkZVxuICAgICAqKiB0ZXN0LCBpdCBzaG91bGQgYmUgd3JhcHBlZCBieSBNYXRoLmNvcygpIGFuZCBNYXRoLnNpbigpLiAgTkZXIGZvciBQUk9KLjQsIFNlcC8yMDAxLlxuICAgICAqL1xuICAgIGlmIChMYXRpdHVkZSA8IC1IQUxGX1BJICYmIExhdGl0dWRlID4gLTEuMDAxICogSEFMRl9QSSkge1xuICAgICAgTGF0aXR1ZGUgPSAtSEFMRl9QSTtcbiAgICB9XG4gICAgZWxzZSBpZiAoTGF0aXR1ZGUgPiBIQUxGX1BJICYmIExhdGl0dWRlIDwgMS4wMDEgKiBIQUxGX1BJKSB7XG4gICAgICBMYXRpdHVkZSA9IEhBTEZfUEk7XG4gICAgfVxuICAgIGVsc2UgaWYgKChMYXRpdHVkZSA8IC1IQUxGX1BJKSB8fCAoTGF0aXR1ZGUgPiBIQUxGX1BJKSkge1xuICAgICAgLyogTGF0aXR1ZGUgb3V0IG9mIHJhbmdlICovXG4gICAgICAvLy4ucmVwb3J0RXJyb3IoJ2dlb2NlbnQ6bGF0IG91dCBvZiByYW5nZTonICsgTGF0aXR1ZGUpO1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKExvbmdpdHVkZSA+IE1hdGguUEkpIHtcbiAgICAgIExvbmdpdHVkZSAtPSAoMiAqIE1hdGguUEkpO1xuICAgIH1cbiAgICBTaW5fTGF0ID0gTWF0aC5zaW4oTGF0aXR1ZGUpO1xuICAgIENvc19MYXQgPSBNYXRoLmNvcyhMYXRpdHVkZSk7XG4gICAgU2luMl9MYXQgPSBTaW5fTGF0ICogU2luX0xhdDtcbiAgICBSbiA9IHRoaXMuYSAvIChNYXRoLnNxcnQoMS4wZTAgLSB0aGlzLmVzICogU2luMl9MYXQpKTtcbiAgICBYID0gKFJuICsgSGVpZ2h0KSAqIENvc19MYXQgKiBNYXRoLmNvcyhMb25naXR1ZGUpO1xuICAgIFkgPSAoUm4gKyBIZWlnaHQpICogQ29zX0xhdCAqIE1hdGguc2luKExvbmdpdHVkZSk7XG4gICAgWiA9ICgoUm4gKiAoMSAtIHRoaXMuZXMpKSArIEhlaWdodCkgKiBTaW5fTGF0O1xuXG4gICAgcC54ID0gWDtcbiAgICBwLnkgPSBZO1xuICAgIHAueiA9IFo7XG4gICAgcmV0dXJuIEVycm9yX0NvZGU7XG4gIH0sIC8vIGNzX2dlb2RldGljX3RvX2dlb2NlbnRyaWMoKVxuXG5cbiAgZ2VvY2VudHJpY190b19nZW9kZXRpYzogZnVuY3Rpb24ocCkge1xuICAgIC8qIGxvY2FsIGRlZmludGlvbnMgYW5kIHZhcmlhYmxlcyAqL1xuICAgIC8qIGVuZC1jcml0ZXJpdW0gb2YgbG9vcCwgYWNjdXJhY3kgb2Ygc2luKExhdGl0dWRlKSAqL1xuICAgIHZhciBnZW5hdSA9IDFlLTEyO1xuICAgIHZhciBnZW5hdTIgPSAoZ2VuYXUgKiBnZW5hdSk7XG4gICAgdmFyIG1heGl0ZXIgPSAzMDtcblxuICAgIHZhciBQOyAvKiBkaXN0YW5jZSBiZXR3ZWVuIHNlbWktbWlub3IgYXhpcyBhbmQgbG9jYXRpb24gKi9cbiAgICB2YXIgUlI7IC8qIGRpc3RhbmNlIGJldHdlZW4gY2VudGVyIGFuZCBsb2NhdGlvbiAqL1xuICAgIHZhciBDVDsgLyogc2luIG9mIGdlb2NlbnRyaWMgbGF0aXR1ZGUgKi9cbiAgICB2YXIgU1Q7IC8qIGNvcyBvZiBnZW9jZW50cmljIGxhdGl0dWRlICovXG4gICAgdmFyIFJYO1xuICAgIHZhciBSSztcbiAgICB2YXIgUk47IC8qIEVhcnRoIHJhZGl1cyBhdCBsb2NhdGlvbiAqL1xuICAgIHZhciBDUEhJMDsgLyogY29zIG9mIHN0YXJ0IG9yIG9sZCBnZW9kZXRpYyBsYXRpdHVkZSBpbiBpdGVyYXRpb25zICovXG4gICAgdmFyIFNQSEkwOyAvKiBzaW4gb2Ygc3RhcnQgb3Igb2xkIGdlb2RldGljIGxhdGl0dWRlIGluIGl0ZXJhdGlvbnMgKi9cbiAgICB2YXIgQ1BISTsgLyogY29zIG9mIHNlYXJjaGVkIGdlb2RldGljIGxhdGl0dWRlICovXG4gICAgdmFyIFNQSEk7IC8qIHNpbiBvZiBzZWFyY2hlZCBnZW9kZXRpYyBsYXRpdHVkZSAqL1xuICAgIHZhciBTRFBISTsgLyogZW5kLWNyaXRlcml1bTogYWRkaXRpb24tdGhlb3JlbSBvZiBzaW4oTGF0aXR1ZGUoaXRlciktTGF0aXR1ZGUoaXRlci0xKSkgKi9cbiAgICB2YXIgQXRfUG9sZTsgLyogaW5kaWNhdGVzIGxvY2F0aW9uIGlzIGluIHBvbGFyIHJlZ2lvbiAqL1xuICAgIHZhciBpdGVyOyAvKiAjIG9mIGNvbnRpbm91cyBpdGVyYXRpb24sIG1heC4gMzAgaXMgYWx3YXlzIGVub3VnaCAocy5hLikgKi9cblxuICAgIHZhciBYID0gcC54O1xuICAgIHZhciBZID0gcC55O1xuICAgIHZhciBaID0gcC56ID8gcC56IDogMC4wOyAvL1ogdmFsdWUgbm90IGFsd2F5cyBzdXBwbGllZFxuICAgIHZhciBMb25naXR1ZGU7XG4gICAgdmFyIExhdGl0dWRlO1xuICAgIHZhciBIZWlnaHQ7XG5cbiAgICBBdF9Qb2xlID0gZmFsc2U7XG4gICAgUCA9IE1hdGguc3FydChYICogWCArIFkgKiBZKTtcbiAgICBSUiA9IE1hdGguc3FydChYICogWCArIFkgKiBZICsgWiAqIFopO1xuXG4gICAgLyogICAgICBzcGVjaWFsIGNhc2VzIGZvciBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlICovXG4gICAgaWYgKFAgLyB0aGlzLmEgPCBnZW5hdSkge1xuXG4gICAgICAvKiAgc3BlY2lhbCBjYXNlLCBpZiBQPTAuIChYPTAuLCBZPTAuKSAqL1xuICAgICAgQXRfUG9sZSA9IHRydWU7XG4gICAgICBMb25naXR1ZGUgPSAwLjA7XG5cbiAgICAgIC8qICBpZiAoWCxZLFopPSgwLiwwLiwwLikgdGhlbiBIZWlnaHQgYmVjb21lcyBzZW1pLW1pbm9yIGF4aXNcbiAgICAgICAqICBvZiBlbGxpcHNvaWQgKD1jZW50ZXIgb2YgbWFzcyksIExhdGl0dWRlIGJlY29tZXMgUEkvMiAqL1xuICAgICAgaWYgKFJSIC8gdGhpcy5hIDwgZ2VuYXUpIHtcbiAgICAgICAgTGF0aXR1ZGUgPSBIQUxGX1BJO1xuICAgICAgICBIZWlnaHQgPSAtdGhpcy5iO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLyogIGVsbGlwc29pZGFsIChnZW9kZXRpYykgbG9uZ2l0dWRlXG4gICAgICAgKiAgaW50ZXJ2YWw6IC1QSSA8IExvbmdpdHVkZSA8PSArUEkgKi9cbiAgICAgIExvbmdpdHVkZSA9IE1hdGguYXRhbjIoWSwgWCk7XG4gICAgfVxuXG4gICAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBGb2xsb3dpbmcgaXRlcmF0aXZlIGFsZ29yaXRobSB3YXMgZGV2ZWxvcHBlZCBieVxuICAgICAqIFwiSW5zdGl0dXQgZm9yIEVyZG1lc3N1bmdcIiwgVW5pdmVyc2l0eSBvZiBIYW5ub3ZlciwgSnVseSAxOTg4LlxuICAgICAqIEludGVybmV0OiB3d3cuaWZlLnVuaS1oYW5ub3Zlci5kZVxuICAgICAqIEl0ZXJhdGl2ZSBjb21wdXRhdGlvbiBvZiBDUEhJLFNQSEkgYW5kIEhlaWdodC5cbiAgICAgKiBJdGVyYXRpb24gb2YgQ1BISSBhbmQgU1BISSB0byAxMCoqLTEyIHJhZGlhbiByZXNwLlxuICAgICAqIDIqMTAqKi03IGFyY3NlYy5cbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAqL1xuICAgIENUID0gWiAvIFJSO1xuICAgIFNUID0gUCAvIFJSO1xuICAgIFJYID0gMS4wIC8gTWF0aC5zcXJ0KDEuMCAtIHRoaXMuZXMgKiAoMi4wIC0gdGhpcy5lcykgKiBTVCAqIFNUKTtcbiAgICBDUEhJMCA9IFNUICogKDEuMCAtIHRoaXMuZXMpICogUlg7XG4gICAgU1BISTAgPSBDVCAqIFJYO1xuICAgIGl0ZXIgPSAwO1xuXG4gICAgLyogbG9vcCB0byBmaW5kIHNpbihMYXRpdHVkZSkgcmVzcC4gTGF0aXR1ZGVcbiAgICAgKiB1bnRpbCB8c2luKExhdGl0dWRlKGl0ZXIpLUxhdGl0dWRlKGl0ZXItMSkpfCA8IGdlbmF1ICovXG4gICAgZG8ge1xuICAgICAgaXRlcisrO1xuICAgICAgUk4gPSB0aGlzLmEgLyBNYXRoLnNxcnQoMS4wIC0gdGhpcy5lcyAqIFNQSEkwICogU1BISTApO1xuXG4gICAgICAvKiAgZWxsaXBzb2lkYWwgKGdlb2RldGljKSBoZWlnaHQgKi9cbiAgICAgIEhlaWdodCA9IFAgKiBDUEhJMCArIFogKiBTUEhJMCAtIFJOICogKDEuMCAtIHRoaXMuZXMgKiBTUEhJMCAqIFNQSEkwKTtcblxuICAgICAgUksgPSB0aGlzLmVzICogUk4gLyAoUk4gKyBIZWlnaHQpO1xuICAgICAgUlggPSAxLjAgLyBNYXRoLnNxcnQoMS4wIC0gUksgKiAoMi4wIC0gUkspICogU1QgKiBTVCk7XG4gICAgICBDUEhJID0gU1QgKiAoMS4wIC0gUkspICogUlg7XG4gICAgICBTUEhJID0gQ1QgKiBSWDtcbiAgICAgIFNEUEhJID0gU1BISSAqIENQSEkwIC0gQ1BISSAqIFNQSEkwO1xuICAgICAgQ1BISTAgPSBDUEhJO1xuICAgICAgU1BISTAgPSBTUEhJO1xuICAgIH1cbiAgICB3aGlsZSAoU0RQSEkgKiBTRFBISSA+IGdlbmF1MiAmJiBpdGVyIDwgbWF4aXRlcik7XG5cbiAgICAvKiAgICAgIGVsbGlwc29pZGFsIChnZW9kZXRpYykgbGF0aXR1ZGUgKi9cbiAgICBMYXRpdHVkZSA9IE1hdGguYXRhbihTUEhJIC8gTWF0aC5hYnMoQ1BISSkpO1xuXG4gICAgcC54ID0gTG9uZ2l0dWRlO1xuICAgIHAueSA9IExhdGl0dWRlO1xuICAgIHAueiA9IEhlaWdodDtcbiAgICByZXR1cm4gcDtcbiAgfSwgLy8gY3NfZ2VvY2VudHJpY190b19nZW9kZXRpYygpXG5cbiAgLyoqIENvbnZlcnRfR2VvY2VudHJpY19Ub19HZW9kZXRpY1xuICAgKiBUaGUgbWV0aG9kIHVzZWQgaGVyZSBpcyBkZXJpdmVkIGZyb20gJ0FuIEltcHJvdmVkIEFsZ29yaXRobSBmb3JcbiAgICogR2VvY2VudHJpYyB0byBHZW9kZXRpYyBDb29yZGluYXRlIENvbnZlcnNpb24nLCBieSBSYWxwaCBUb21zLCBGZWIgMTk5NlxuICAgKi9cbiAgZ2VvY2VudHJpY190b19nZW9kZXRpY19ub25pdGVyOiBmdW5jdGlvbihwKSB7XG4gICAgdmFyIFggPSBwLng7XG4gICAgdmFyIFkgPSBwLnk7XG4gICAgdmFyIFogPSBwLnogPyBwLnogOiAwOyAvL1ogdmFsdWUgbm90IGFsd2F5cyBzdXBwbGllZFxuICAgIHZhciBMb25naXR1ZGU7XG4gICAgdmFyIExhdGl0dWRlO1xuICAgIHZhciBIZWlnaHQ7XG5cbiAgICB2YXIgVzsgLyogZGlzdGFuY2UgZnJvbSBaIGF4aXMgKi9cbiAgICB2YXIgVzI7IC8qIHNxdWFyZSBvZiBkaXN0YW5jZSBmcm9tIFogYXhpcyAqL1xuICAgIHZhciBUMDsgLyogaW5pdGlhbCBlc3RpbWF0ZSBvZiB2ZXJ0aWNhbCBjb21wb25lbnQgKi9cbiAgICB2YXIgVDE7IC8qIGNvcnJlY3RlZCBlc3RpbWF0ZSBvZiB2ZXJ0aWNhbCBjb21wb25lbnQgKi9cbiAgICB2YXIgUzA7IC8qIGluaXRpYWwgZXN0aW1hdGUgb2YgaG9yaXpvbnRhbCBjb21wb25lbnQgKi9cbiAgICB2YXIgUzE7IC8qIGNvcnJlY3RlZCBlc3RpbWF0ZSBvZiBob3Jpem9udGFsIGNvbXBvbmVudCAqL1xuICAgIHZhciBTaW5fQjA7IC8qIE1hdGguc2luKEIwKSwgQjAgaXMgZXN0aW1hdGUgb2YgQm93cmluZyBhdXggdmFyaWFibGUgKi9cbiAgICB2YXIgU2luM19CMDsgLyogY3ViZSBvZiBNYXRoLnNpbihCMCkgKi9cbiAgICB2YXIgQ29zX0IwOyAvKiBNYXRoLmNvcyhCMCkgKi9cbiAgICB2YXIgU2luX3AxOyAvKiBNYXRoLnNpbihwaGkxKSwgcGhpMSBpcyBlc3RpbWF0ZWQgbGF0aXR1ZGUgKi9cbiAgICB2YXIgQ29zX3AxOyAvKiBNYXRoLmNvcyhwaGkxKSAqL1xuICAgIHZhciBSbjsgLyogRWFydGggcmFkaXVzIGF0IGxvY2F0aW9uICovXG4gICAgdmFyIFN1bTsgLyogbnVtZXJhdG9yIG9mIE1hdGguY29zKHBoaTEpICovXG4gICAgdmFyIEF0X1BvbGU7IC8qIGluZGljYXRlcyBsb2NhdGlvbiBpcyBpbiBwb2xhciByZWdpb24gKi9cblxuICAgIFggPSBwYXJzZUZsb2F0KFgpOyAvLyBjYXN0IGZyb20gc3RyaW5nIHRvIGZsb2F0XG4gICAgWSA9IHBhcnNlRmxvYXQoWSk7XG4gICAgWiA9IHBhcnNlRmxvYXQoWik7XG5cbiAgICBBdF9Qb2xlID0gZmFsc2U7XG4gICAgaWYgKFggIT09IDAuMCkge1xuICAgICAgTG9uZ2l0dWRlID0gTWF0aC5hdGFuMihZLCBYKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoWSA+IDApIHtcbiAgICAgICAgTG9uZ2l0dWRlID0gSEFMRl9QSTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKFkgPCAwKSB7XG4gICAgICAgIExvbmdpdHVkZSA9IC1IQUxGX1BJO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIEF0X1BvbGUgPSB0cnVlO1xuICAgICAgICBMb25naXR1ZGUgPSAwLjA7XG4gICAgICAgIGlmIChaID4gMC4wKSB7IC8qIG5vcnRoIHBvbGUgKi9cbiAgICAgICAgICBMYXRpdHVkZSA9IEhBTEZfUEk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoWiA8IDAuMCkgeyAvKiBzb3V0aCBwb2xlICovXG4gICAgICAgICAgTGF0aXR1ZGUgPSAtSEFMRl9QSTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHsgLyogY2VudGVyIG9mIGVhcnRoICovXG4gICAgICAgICAgTGF0aXR1ZGUgPSBIQUxGX1BJO1xuICAgICAgICAgIEhlaWdodCA9IC10aGlzLmI7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIFcyID0gWCAqIFggKyBZICogWTtcbiAgICBXID0gTWF0aC5zcXJ0KFcyKTtcbiAgICBUMCA9IFogKiBBRF9DO1xuICAgIFMwID0gTWF0aC5zcXJ0KFQwICogVDAgKyBXMik7XG4gICAgU2luX0IwID0gVDAgLyBTMDtcbiAgICBDb3NfQjAgPSBXIC8gUzA7XG4gICAgU2luM19CMCA9IFNpbl9CMCAqIFNpbl9CMCAqIFNpbl9CMDtcbiAgICBUMSA9IFogKyB0aGlzLmIgKiB0aGlzLmVwMiAqIFNpbjNfQjA7XG4gICAgU3VtID0gVyAtIHRoaXMuYSAqIHRoaXMuZXMgKiBDb3NfQjAgKiBDb3NfQjAgKiBDb3NfQjA7XG4gICAgUzEgPSBNYXRoLnNxcnQoVDEgKiBUMSArIFN1bSAqIFN1bSk7XG4gICAgU2luX3AxID0gVDEgLyBTMTtcbiAgICBDb3NfcDEgPSBTdW0gLyBTMTtcbiAgICBSbiA9IHRoaXMuYSAvIE1hdGguc3FydCgxLjAgLSB0aGlzLmVzICogU2luX3AxICogU2luX3AxKTtcbiAgICBpZiAoQ29zX3AxID49IENPU182N1A1KSB7XG4gICAgICBIZWlnaHQgPSBXIC8gQ29zX3AxIC0gUm47XG4gICAgfVxuICAgIGVsc2UgaWYgKENvc19wMSA8PSAtQ09TXzY3UDUpIHtcbiAgICAgIEhlaWdodCA9IFcgLyAtQ29zX3AxIC0gUm47XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgSGVpZ2h0ID0gWiAvIFNpbl9wMSArIFJuICogKHRoaXMuZXMgLSAxLjApO1xuICAgIH1cbiAgICBpZiAoQXRfUG9sZSA9PT0gZmFsc2UpIHtcbiAgICAgIExhdGl0dWRlID0gTWF0aC5hdGFuKFNpbl9wMSAvIENvc19wMSk7XG4gICAgfVxuXG4gICAgcC54ID0gTG9uZ2l0dWRlO1xuICAgIHAueSA9IExhdGl0dWRlO1xuICAgIHAueiA9IEhlaWdodDtcbiAgICByZXR1cm4gcDtcbiAgfSwgLy8gZ2VvY2VudHJpY190b19nZW9kZXRpY19ub25pdGVyKClcblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgLy8gcGpfZ2VvY2VudGljX3RvX3dnczg0KCBwIClcbiAgLy8gIHAgPSBwb2ludCB0byB0cmFuc2Zvcm0gaW4gZ2VvY2VudHJpYyBjb29yZGluYXRlcyAoeCx5LHopXG4gIGdlb2NlbnRyaWNfdG9fd2dzODQ6IGZ1bmN0aW9uKHApIHtcblxuICAgIGlmICh0aGlzLmRhdHVtX3R5cGUgPT09IFBKRF8zUEFSQU0pIHtcbiAgICAgIC8vIGlmKCB4W2lvXSA9PT0gSFVHRV9WQUwgKVxuICAgICAgLy8gICAgY29udGludWU7XG4gICAgICBwLnggKz0gdGhpcy5kYXR1bV9wYXJhbXNbMF07XG4gICAgICBwLnkgKz0gdGhpcy5kYXR1bV9wYXJhbXNbMV07XG4gICAgICBwLnogKz0gdGhpcy5kYXR1bV9wYXJhbXNbMl07XG5cbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5kYXR1bV90eXBlID09PSBQSkRfN1BBUkFNKSB7XG4gICAgICB2YXIgRHhfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1swXTtcbiAgICAgIHZhciBEeV9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzFdO1xuICAgICAgdmFyIER6X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbMl07XG4gICAgICB2YXIgUnhfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1szXTtcbiAgICAgIHZhciBSeV9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzRdO1xuICAgICAgdmFyIFJ6X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbNV07XG4gICAgICB2YXIgTV9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzZdO1xuICAgICAgLy8gaWYoIHhbaW9dID09PSBIVUdFX1ZBTCApXG4gICAgICAvLyAgICBjb250aW51ZTtcbiAgICAgIHZhciB4X291dCA9IE1fQkYgKiAocC54IC0gUnpfQkYgKiBwLnkgKyBSeV9CRiAqIHAueikgKyBEeF9CRjtcbiAgICAgIHZhciB5X291dCA9IE1fQkYgKiAoUnpfQkYgKiBwLnggKyBwLnkgLSBSeF9CRiAqIHAueikgKyBEeV9CRjtcbiAgICAgIHZhciB6X291dCA9IE1fQkYgKiAoLVJ5X0JGICogcC54ICsgUnhfQkYgKiBwLnkgKyBwLnopICsgRHpfQkY7XG4gICAgICBwLnggPSB4X291dDtcbiAgICAgIHAueSA9IHlfb3V0O1xuICAgICAgcC56ID0gel9vdXQ7XG4gICAgfVxuICB9LCAvLyBjc19nZW9jZW50cmljX3RvX3dnczg0XG5cbiAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIC8vIHBqX2dlb2NlbnRpY19mcm9tX3dnczg0KClcbiAgLy8gIGNvb3JkaW5hdGUgc3lzdGVtIGRlZmluaXRpb24sXG4gIC8vICBwb2ludCB0byB0cmFuc2Zvcm0gaW4gZ2VvY2VudHJpYyBjb29yZGluYXRlcyAoeCx5LHopXG4gIGdlb2NlbnRyaWNfZnJvbV93Z3M4NDogZnVuY3Rpb24ocCkge1xuXG4gICAgaWYgKHRoaXMuZGF0dW1fdHlwZSA9PT0gUEpEXzNQQVJBTSkge1xuICAgICAgLy9pZiggeFtpb10gPT09IEhVR0VfVkFMIClcbiAgICAgIC8vICAgIGNvbnRpbnVlO1xuICAgICAgcC54IC09IHRoaXMuZGF0dW1fcGFyYW1zWzBdO1xuICAgICAgcC55IC09IHRoaXMuZGF0dW1fcGFyYW1zWzFdO1xuICAgICAgcC56IC09IHRoaXMuZGF0dW1fcGFyYW1zWzJdO1xuXG4gICAgfVxuICAgIGVsc2UgaWYgKHRoaXMuZGF0dW1fdHlwZSA9PT0gUEpEXzdQQVJBTSkge1xuICAgICAgdmFyIER4X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbMF07XG4gICAgICB2YXIgRHlfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1sxXTtcbiAgICAgIHZhciBEel9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzJdO1xuICAgICAgdmFyIFJ4X0JGID0gdGhpcy5kYXR1bV9wYXJhbXNbM107XG4gICAgICB2YXIgUnlfQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1s0XTtcbiAgICAgIHZhciBSel9CRiA9IHRoaXMuZGF0dW1fcGFyYW1zWzVdO1xuICAgICAgdmFyIE1fQkYgPSB0aGlzLmRhdHVtX3BhcmFtc1s2XTtcbiAgICAgIHZhciB4X3RtcCA9IChwLnggLSBEeF9CRikgLyBNX0JGO1xuICAgICAgdmFyIHlfdG1wID0gKHAueSAtIER5X0JGKSAvIE1fQkY7XG4gICAgICB2YXIgel90bXAgPSAocC56IC0gRHpfQkYpIC8gTV9CRjtcbiAgICAgIC8vaWYoIHhbaW9dID09PSBIVUdFX1ZBTCApXG4gICAgICAvLyAgICBjb250aW51ZTtcblxuICAgICAgcC54ID0geF90bXAgKyBSel9CRiAqIHlfdG1wIC0gUnlfQkYgKiB6X3RtcDtcbiAgICAgIHAueSA9IC1Sel9CRiAqIHhfdG1wICsgeV90bXAgKyBSeF9CRiAqIHpfdG1wO1xuICAgICAgcC56ID0gUnlfQkYgKiB4X3RtcCAtIFJ4X0JGICogeV90bXAgKyB6X3RtcDtcbiAgICB9IC8vY3NfZ2VvY2VudHJpY19mcm9tX3dnczg0KClcbiAgfVxufTtcblxuLyoqIHBvaW50IG9iamVjdCwgbm90aGluZyBmYW5jeSwganVzdCBhbGxvd3MgdmFsdWVzIHRvIGJlXG4gICAgcGFzc2VkIGJhY2sgYW5kIGZvcnRoIGJ5IHJlZmVyZW5jZSByYXRoZXIgdGhhbiBieSB2YWx1ZS5cbiAgICBPdGhlciBwb2ludCBjbGFzc2VzIG1heSBiZSB1c2VkIGFzIGxvbmcgYXMgdGhleSBoYXZlXG4gICAgeCBhbmQgeSBwcm9wZXJ0aWVzLCB3aGljaCB3aWxsIGdldCBtb2RpZmllZCBpbiB0aGUgdHJhbnNmb3JtIG1ldGhvZC5cbiovXG5tb2R1bGUuZXhwb3J0cyA9IGRhdHVtO1xuIiwidmFyIFBKRF8zUEFSQU0gPSAxO1xudmFyIFBKRF83UEFSQU0gPSAyO1xudmFyIFBKRF9HUklEU0hJRlQgPSAzO1xudmFyIFBKRF9OT0RBVFVNID0gNTsgLy8gV0dTODQgb3IgZXF1aXZhbGVudFxudmFyIFNSU19XR1M4NF9TRU1JTUFKT1IgPSA2Mzc4MTM3OyAvLyBvbmx5IHVzZWQgaW4gZ3JpZCBzaGlmdCB0cmFuc2Zvcm1zXG52YXIgU1JTX1dHUzg0X0VTUVVBUkVEID0gMC4wMDY2OTQzNzk5OTAxNDEzMTY7IC8vREdSOiAyMDEyLTA3LTI5XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHNvdXJjZSwgZGVzdCwgcG9pbnQpIHtcbiAgdmFyIHdwLCBpLCBsO1xuXG4gIGZ1bmN0aW9uIGNoZWNrUGFyYW1zKGZhbGxiYWNrKSB7XG4gICAgcmV0dXJuIChmYWxsYmFjayA9PT0gUEpEXzNQQVJBTSB8fCBmYWxsYmFjayA9PT0gUEpEXzdQQVJBTSk7XG4gIH1cbiAgLy8gU2hvcnQgY3V0IGlmIHRoZSBkYXR1bXMgYXJlIGlkZW50aWNhbC5cbiAgaWYgKHNvdXJjZS5jb21wYXJlX2RhdHVtcyhkZXN0KSkge1xuICAgIHJldHVybiBwb2ludDsgLy8gaW4gdGhpcyBjYXNlLCB6ZXJvIGlzIHN1Y2VzcyxcbiAgICAvLyB3aGVyZWFzIGNzX2NvbXBhcmVfZGF0dW1zIHJldHVybnMgMSB0byBpbmRpY2F0ZSBUUlVFXG4gICAgLy8gY29uZnVzaW5nLCBzaG91bGQgZml4IHRoaXNcbiAgfVxuXG4gIC8vIEV4cGxpY2l0bHkgc2tpcCBkYXR1bSB0cmFuc2Zvcm0gYnkgc2V0dGluZyAnZGF0dW09bm9uZScgYXMgcGFyYW1ldGVyIGZvciBlaXRoZXIgc291cmNlIG9yIGRlc3RcbiAgaWYgKHNvdXJjZS5kYXR1bV90eXBlID09PSBQSkRfTk9EQVRVTSB8fCBkZXN0LmRhdHVtX3R5cGUgPT09IFBKRF9OT0RBVFVNKSB7XG4gICAgcmV0dXJuIHBvaW50O1xuICB9XG5cbiAgLy9ER1I6IDIwMTItMDctMjkgOiBhZGQgbmFkZ3JpZHMgc3VwcG9ydCAoYmVnaW4pXG4gIHZhciBzcmNfYSA9IHNvdXJjZS5hO1xuICB2YXIgc3JjX2VzID0gc291cmNlLmVzO1xuXG4gIHZhciBkc3RfYSA9IGRlc3QuYTtcbiAgdmFyIGRzdF9lcyA9IGRlc3QuZXM7XG5cbiAgdmFyIGZhbGxiYWNrID0gc291cmNlLmRhdHVtX3R5cGU7XG4gIC8vIElmIHRoaXMgZGF0dW0gcmVxdWlyZXMgZ3JpZCBzaGlmdHMsIHRoZW4gYXBwbHkgaXQgdG8gZ2VvZGV0aWMgY29vcmRpbmF0ZXMuXG4gIGlmIChmYWxsYmFjayA9PT0gUEpEX0dSSURTSElGVCkge1xuICAgIGlmICh0aGlzLmFwcGx5X2dyaWRzaGlmdChzb3VyY2UsIDAsIHBvaW50KSA9PT0gMCkge1xuICAgICAgc291cmNlLmEgPSBTUlNfV0dTODRfU0VNSU1BSk9SO1xuICAgICAgc291cmNlLmVzID0gU1JTX1dHUzg0X0VTUVVBUkVEO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIHRyeSAzIG9yIDcgcGFyYW1zIHRyYW5zZm9ybWF0aW9uIG9yIG5vdGhpbmcgP1xuICAgICAgaWYgKCFzb3VyY2UuZGF0dW1fcGFyYW1zKSB7XG4gICAgICAgIHNvdXJjZS5hID0gc3JjX2E7XG4gICAgICAgIHNvdXJjZS5lcyA9IHNvdXJjZS5lcztcbiAgICAgICAgcmV0dXJuIHBvaW50O1xuICAgICAgfVxuICAgICAgd3AgPSAxO1xuICAgICAgZm9yIChpID0gMCwgbCA9IHNvdXJjZS5kYXR1bV9wYXJhbXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHdwICo9IHNvdXJjZS5kYXR1bV9wYXJhbXNbaV07XG4gICAgICB9XG4gICAgICBpZiAod3AgPT09IDApIHtcbiAgICAgICAgc291cmNlLmEgPSBzcmNfYTtcbiAgICAgICAgc291cmNlLmVzID0gc291cmNlLmVzO1xuICAgICAgICByZXR1cm4gcG9pbnQ7XG4gICAgICB9XG4gICAgICBpZiAoc291cmNlLmRhdHVtX3BhcmFtcy5sZW5ndGggPiAzKSB7XG4gICAgICAgIGZhbGxiYWNrID0gUEpEXzdQQVJBTTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBmYWxsYmFjayA9IFBKRF8zUEFSQU07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGlmIChkZXN0LmRhdHVtX3R5cGUgPT09IFBKRF9HUklEU0hJRlQpIHtcbiAgICBkZXN0LmEgPSBTUlNfV0dTODRfU0VNSU1BSk9SO1xuICAgIGRlc3QuZXMgPSBTUlNfV0dTODRfRVNRVUFSRUQ7XG4gIH1cbiAgLy8gRG8gd2UgbmVlZCB0byBnbyB0aHJvdWdoIGdlb2NlbnRyaWMgY29vcmRpbmF0ZXM/XG4gIGlmIChzb3VyY2UuZXMgIT09IGRlc3QuZXMgfHwgc291cmNlLmEgIT09IGRlc3QuYSB8fCBjaGVja1BhcmFtcyhmYWxsYmFjaykgfHwgY2hlY2tQYXJhbXMoZGVzdC5kYXR1bV90eXBlKSkge1xuICAgIC8vREdSOiAyMDEyLTA3LTI5IDogYWRkIG5hZGdyaWRzIHN1cHBvcnQgKGVuZClcbiAgICAvLyBDb252ZXJ0IHRvIGdlb2NlbnRyaWMgY29vcmRpbmF0ZXMuXG4gICAgc291cmNlLmdlb2RldGljX3RvX2dlb2NlbnRyaWMocG9pbnQpO1xuICAgIC8vIENIRUNLX1JFVFVSTjtcbiAgICAvLyBDb252ZXJ0IGJldHdlZW4gZGF0dW1zXG4gICAgaWYgKGNoZWNrUGFyYW1zKHNvdXJjZS5kYXR1bV90eXBlKSkge1xuICAgICAgc291cmNlLmdlb2NlbnRyaWNfdG9fd2dzODQocG9pbnQpO1xuICAgICAgLy8gQ0hFQ0tfUkVUVVJOO1xuICAgIH1cbiAgICBpZiAoY2hlY2tQYXJhbXMoZGVzdC5kYXR1bV90eXBlKSkge1xuICAgICAgZGVzdC5nZW9jZW50cmljX2Zyb21fd2dzODQocG9pbnQpO1xuICAgICAgLy8gQ0hFQ0tfUkVUVVJOO1xuICAgIH1cbiAgICAvLyBDb252ZXJ0IGJhY2sgdG8gZ2VvZGV0aWMgY29vcmRpbmF0ZXNcbiAgICBkZXN0Lmdlb2NlbnRyaWNfdG9fZ2VvZGV0aWMocG9pbnQpO1xuICAgIC8vIENIRUNLX1JFVFVSTjtcbiAgfVxuICAvLyBBcHBseSBncmlkIHNoaWZ0IHRvIGRlc3RpbmF0aW9uIGlmIHJlcXVpcmVkXG4gIGlmIChkZXN0LmRhdHVtX3R5cGUgPT09IFBKRF9HUklEU0hJRlQpIHtcbiAgICB0aGlzLmFwcGx5X2dyaWRzaGlmdChkZXN0LCAxLCBwb2ludCk7XG4gICAgLy8gQ0hFQ0tfUkVUVVJOO1xuICB9XG5cbiAgc291cmNlLmEgPSBzcmNfYTtcbiAgc291cmNlLmVzID0gc3JjX2VzO1xuICBkZXN0LmEgPSBkc3RfYTtcbiAgZGVzdC5lcyA9IGRzdF9lcztcblxuICByZXR1cm4gcG9pbnQ7XG59O1xuXG4iLCJ2YXIgZ2xvYmFscyA9IHJlcXVpcmUoJy4vZ2xvYmFsJyk7XG52YXIgcGFyc2VQcm9qID0gcmVxdWlyZSgnLi9wcm9qU3RyaW5nJyk7XG52YXIgd2t0ID0gcmVxdWlyZSgnLi93a3QnKTtcblxuZnVuY3Rpb24gZGVmcyhuYW1lKSB7XG4gIC8qZ2xvYmFsIGNvbnNvbGUqL1xuICB2YXIgdGhhdCA9IHRoaXM7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgdmFyIGRlZiA9IGFyZ3VtZW50c1sxXTtcbiAgICBpZiAodHlwZW9mIGRlZiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmIChkZWYuY2hhckF0KDApID09PSAnKycpIHtcbiAgICAgICAgZGVmc1tuYW1lXSA9IHBhcnNlUHJvaihhcmd1bWVudHNbMV0pO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGRlZnNbbmFtZV0gPSB3a3QoYXJndW1lbnRzWzFdKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGVmc1tuYW1lXSA9IGRlZjtcbiAgICB9XG4gIH1cbiAgZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG5hbWUpKSB7XG4gICAgICByZXR1cm4gbmFtZS5tYXAoZnVuY3Rpb24odikge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2KSkge1xuICAgICAgICAgIGRlZnMuYXBwbHkodGhhdCwgdik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZGVmcyh2KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKG5hbWUgaW4gZGVmcykge1xuICAgICAgICByZXR1cm4gZGVmc1tuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoJ0VQU0cnIGluIG5hbWUpIHtcbiAgICAgIGRlZnNbJ0VQU0c6JyArIG5hbWUuRVBTR10gPSBuYW1lO1xuICAgIH1cbiAgICBlbHNlIGlmICgnRVNSSScgaW4gbmFtZSkge1xuICAgICAgZGVmc1snRVNSSTonICsgbmFtZS5FU1JJXSA9IG5hbWU7XG4gICAgfVxuICAgIGVsc2UgaWYgKCdJQVUyMDAwJyBpbiBuYW1lKSB7XG4gICAgICBkZWZzWydJQVUyMDAwOicgKyBuYW1lLklBVTIwMDBdID0gbmFtZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhuYW1lKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG5cblxufVxuZ2xvYmFscyhkZWZzKTtcbm1vZHVsZS5leHBvcnRzID0gZGVmcztcbiIsInZhciBEYXR1bSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzL0RhdHVtJyk7XG52YXIgRWxsaXBzb2lkID0gcmVxdWlyZSgnLi9jb25zdGFudHMvRWxsaXBzb2lkJyk7XG52YXIgZXh0ZW5kID0gcmVxdWlyZSgnLi9leHRlbmQnKTtcbnZhciBkYXR1bSA9IHJlcXVpcmUoJy4vZGF0dW0nKTtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG4vLyBlbGxpcG9pZCBwal9zZXRfZWxsLmNcbnZhciBTSVhUSCA9IDAuMTY2NjY2NjY2NjY2NjY2NjY2Nztcbi8qIDEvNiAqL1xudmFyIFJBNCA9IDAuMDQ3MjIyMjIyMjIyMjIyMjIyMjI7XG4vKiAxNy8zNjAgKi9cbnZhciBSQTYgPSAwLjAyMjE1NjA4NDY1NjA4NDY1NjA4O1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihqc29uKSB7XG4gIC8vIERHUiAyMDExLTAzLTIwIDogbmFncmlkcyAtPiBuYWRncmlkc1xuICBpZiAoanNvbi5kYXR1bUNvZGUgJiYganNvbi5kYXR1bUNvZGUgIT09ICdub25lJykge1xuICAgIHZhciBkYXR1bURlZiA9IERhdHVtW2pzb24uZGF0dW1Db2RlXTtcbiAgICBpZiAoZGF0dW1EZWYpIHtcbiAgICAgIGpzb24uZGF0dW1fcGFyYW1zID0gZGF0dW1EZWYudG93Z3M4NCA/IGRhdHVtRGVmLnRvd2dzODQuc3BsaXQoJywnKSA6IG51bGw7XG4gICAgICBqc29uLmVsbHBzID0gZGF0dW1EZWYuZWxsaXBzZTtcbiAgICAgIGpzb24uZGF0dW1OYW1lID0gZGF0dW1EZWYuZGF0dW1OYW1lID8gZGF0dW1EZWYuZGF0dW1OYW1lIDoganNvbi5kYXR1bUNvZGU7XG4gICAgfVxuICB9XG4gIGlmICghanNvbi5hKSB7IC8vIGRvIHdlIGhhdmUgYW4gZWxsaXBzb2lkP1xuICAgIHZhciBlbGxpcHNlID0gRWxsaXBzb2lkW2pzb24uZWxscHNdID8gRWxsaXBzb2lkW2pzb24uZWxscHNdIDogRWxsaXBzb2lkLldHUzg0O1xuICAgIGV4dGVuZChqc29uLCBlbGxpcHNlKTtcbiAgfVxuICBpZiAoanNvbi5yZiAmJiAhanNvbi5iKSB7XG4gICAganNvbi5iID0gKDEuMCAtIDEuMCAvIGpzb24ucmYpICoganNvbi5hO1xuICB9XG4gIGlmIChqc29uLnJmID09PSAwIHx8IE1hdGguYWJzKGpzb24uYSAtIGpzb24uYikgPCBFUFNMTikge1xuICAgIGpzb24uc3BoZXJlID0gdHJ1ZTtcbiAgICBqc29uLmIgPSBqc29uLmE7XG4gIH1cbiAganNvbi5hMiA9IGpzb24uYSAqIGpzb24uYTsgLy8gdXNlZCBpbiBnZW9jZW50cmljXG4gIGpzb24uYjIgPSBqc29uLmIgKiBqc29uLmI7IC8vIHVzZWQgaW4gZ2VvY2VudHJpY1xuICBqc29uLmVzID0gKGpzb24uYTIgLSBqc29uLmIyKSAvIGpzb24uYTI7IC8vIGUgXiAyXG4gIGpzb24uZSA9IE1hdGguc3FydChqc29uLmVzKTsgLy8gZWNjZW50cmljaXR5XG4gIGlmIChqc29uLlJfQSkge1xuICAgIGpzb24uYSAqPSAxIC0ganNvbi5lcyAqIChTSVhUSCArIGpzb24uZXMgKiAoUkE0ICsganNvbi5lcyAqIFJBNikpO1xuICAgIGpzb24uYTIgPSBqc29uLmEgKiBqc29uLmE7XG4gICAganNvbi5iMiA9IGpzb24uYiAqIGpzb24uYjtcbiAgICBqc29uLmVzID0gMDtcbiAgfVxuICBqc29uLmVwMiA9IChqc29uLmEyIC0ganNvbi5iMikgLyBqc29uLmIyOyAvLyB1c2VkIGluIGdlb2NlbnRyaWNcbiAgaWYgKCFqc29uLmswKSB7XG4gICAganNvbi5rMCA9IDEuMDsgLy9kZWZhdWx0IHZhbHVlXG4gIH1cbiAgLy9ER1IgMjAxMC0xMS0xMjogYXhpc1xuICBpZiAoIWpzb24uYXhpcykge1xuICAgIGpzb24uYXhpcyA9IFwiZW51XCI7XG4gIH1cblxuICBpZiAoIWpzb24uZGF0dW0pIHtcbiAgICBqc29uLmRhdHVtID0gZGF0dW0oanNvbik7XG4gIH1cbiAgcmV0dXJuIGpzb247XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihkZXN0aW5hdGlvbiwgc291cmNlKSB7XG4gIGRlc3RpbmF0aW9uID0gZGVzdGluYXRpb24gfHwge307XG4gIHZhciB2YWx1ZSwgcHJvcGVydHk7XG4gIGlmICghc291cmNlKSB7XG4gICAgcmV0dXJuIGRlc3RpbmF0aW9uO1xuICB9XG4gIGZvciAocHJvcGVydHkgaW4gc291cmNlKSB7XG4gICAgdmFsdWUgPSBzb3VyY2VbcHJvcGVydHldO1xuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZXN0aW5hdGlvbltwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlc3RpbmF0aW9uO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZGVmcykge1xuICBkZWZzKCdFUFNHOjQzMjYnLCBcIit0aXRsZT1XR1MgODQgKGxvbmcvbGF0KSArcHJvaj1sb25nbGF0ICtlbGxwcz1XR1M4NCArZGF0dW09V0dTODQgK3VuaXRzPWRlZ3JlZXNcIik7XG4gIGRlZnMoJ0VQU0c6NDI2OScsIFwiK3RpdGxlPU5BRDgzIChsb25nL2xhdCkgK3Byb2o9bG9uZ2xhdCArYT02Mzc4MTM3LjAgK2I9NjM1Njc1Mi4zMTQxNDAzNiArZWxscHM9R1JTODAgK2RhdHVtPU5BRDgzICt1bml0cz1kZWdyZWVzXCIpO1xuICBkZWZzKCdFUFNHOjM4NTcnLCBcIit0aXRsZT1XR1MgODQgLyBQc2V1ZG8tTWVyY2F0b3IgK3Byb2o9bWVyYyArYT02Mzc4MTM3ICtiPTYzNzgxMzcgK2xhdF90cz0wLjAgK2xvbl8wPTAuMCAreF8wPTAuMCAreV8wPTAgK2s9MS4wICt1bml0cz1tICtuYWRncmlkcz1AbnVsbCArbm9fZGVmc1wiKTtcblxuICBkZWZzLldHUzg0ID0gZGVmc1snRVBTRzo0MzI2J107XG4gIGRlZnNbJ0VQU0c6Mzc4NSddID0gZGVmc1snRVBTRzozODU3J107IC8vIG1haW50YWluIGJhY2t3YXJkIGNvbXBhdCwgb2ZmaWNpYWwgY29kZSBpcyAzODU3XG4gIGRlZnMuR09PR0xFID0gZGVmc1snRVBTRzozODU3J107XG4gIGRlZnNbJ0VQU0c6OTAwOTEzJ10gPSBkZWZzWydFUFNHOjM4NTcnXTtcbiAgZGVmc1snRVBTRzoxMDIxMTMnXSA9IGRlZnNbJ0VQU0c6Mzg1NyddO1xufTtcbiIsInZhciBwcm9qcyA9IFtcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy90bWVyYycpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL3V0bScpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL3N0ZXJlYScpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL3N0ZXJlJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvc29tZXJjJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvb21lcmMnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9sY2MnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9rcm92YWsnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9jYXNzJyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvbGFlYScpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL2FlYScpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL2dub20nKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9jZWEnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9lcWMnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9wb2x5JyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvbnptZycpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL21pbGwnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9zaW51JyksXG4gIHJlcXVpcmUoJy4vcHJvamVjdGlvbnMvbW9sbCcpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL2VxZGMnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy92YW5kZycpLFxuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL2FlcWQnKVxuXTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24ocHJvajQpe1xuICBwcm9qcy5mb3JFYWNoKGZ1bmN0aW9uKHByb2ope1xuICAgIHByb2o0LlByb2oucHJvamVjdGlvbnMuYWRkKHByb2opO1xuICB9KTtcbn07IiwidmFyIHByb2o0ID0gcmVxdWlyZSgnLi9jb3JlJyk7XG5wcm9qNC5kZWZhdWx0RGF0dW0gPSAnV0dTODQnOyAvL2RlZmF1bHQgZGF0dW1cbnByb2o0LlByb2ogPSByZXF1aXJlKCcuL1Byb2onKTtcbnByb2o0LldHUzg0ID0gbmV3IHByb2o0LlByb2ooJ1dHUzg0Jyk7XG5wcm9qNC5Qb2ludCA9IHJlcXVpcmUoJy4vUG9pbnQnKTtcbnByb2o0LnRvUG9pbnQgPSByZXF1aXJlKFwiLi9jb21tb24vdG9Qb2ludFwiKTtcbnByb2o0LmRlZnMgPSByZXF1aXJlKCcuL2RlZnMnKTtcbnByb2o0LnRyYW5zZm9ybSA9IHJlcXVpcmUoJy4vdHJhbnNmb3JtJyk7XG5wcm9qNC5tZ3JzID0gcmVxdWlyZSgnbWdycycpO1xucHJvajQudmVyc2lvbiA9IHJlcXVpcmUoJy4uL3BhY2thZ2UuanNvbicpLnZlcnNpb247XG5yZXF1aXJlKCcuL2luY2x1ZGVkUHJvamVjdGlvbnMnKShwcm9qNCk7XG5tb2R1bGUuZXhwb3J0cyA9IHByb2o0OyIsInZhciBkZWZzID0gcmVxdWlyZSgnLi9kZWZzJyk7XG52YXIgd2t0ID0gcmVxdWlyZSgnLi93a3QnKTtcbnZhciBwcm9qU3RyID0gcmVxdWlyZSgnLi9wcm9qU3RyaW5nJyk7XG5mdW5jdGlvbiB0ZXN0T2JqKGNvZGUpe1xuICByZXR1cm4gdHlwZW9mIGNvZGUgPT09ICdzdHJpbmcnO1xufVxuZnVuY3Rpb24gdGVzdERlZihjb2RlKXtcbiAgcmV0dXJuIGNvZGUgaW4gZGVmcztcbn1cbmZ1bmN0aW9uIHRlc3RXS1QoY29kZSl7XG4gIHZhciBjb2RlV29yZHMgPSBbJ0dFT0dDUycsJ0dFT0NDUycsJ1BST0pDUycsJ0xPQ0FMX0NTJ107XG4gIHJldHVybiBjb2RlV29yZHMucmVkdWNlKGZ1bmN0aW9uKGEsYil7XG4gICAgcmV0dXJuIGErMStjb2RlLmluZGV4T2YoYik7XG4gIH0sMCk7XG59XG5mdW5jdGlvbiB0ZXN0UHJvaihjb2RlKXtcbiAgcmV0dXJuIGNvZGVbMF0gPT09ICcrJztcbn1cbmZ1bmN0aW9uIHBhcnNlKGNvZGUpe1xuICBpZiAodGVzdE9iaihjb2RlKSkge1xuICAgIC8vY2hlY2sgdG8gc2VlIGlmIHRoaXMgaXMgYSBXS1Qgc3RyaW5nXG4gICAgaWYgKHRlc3REZWYoY29kZSkpIHtcbiAgICAgIHJldHVybiBkZWZzW2NvZGVdO1xuICAgIH1cbiAgICBlbHNlIGlmICh0ZXN0V0tUKGNvZGUpKSB7XG4gICAgICByZXR1cm4gd2t0KGNvZGUpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0ZXN0UHJvaihjb2RlKSkge1xuICAgICAgcmV0dXJuIHByb2pTdHIoY29kZSk7XG4gICAgfVxuICB9ZWxzZXtcbiAgICByZXR1cm4gY29kZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHBhcnNlOyIsInZhciBEMlIgPSAwLjAxNzQ1MzI5MjUxOTk0MzI5NTc3O1xudmFyIFByaW1lTWVyaWRpYW4gPSByZXF1aXJlKCcuL2NvbnN0YW50cy9QcmltZU1lcmlkaWFuJyk7XG52YXIgdW5pdHMgPSByZXF1aXJlKCcuL2NvbnN0YW50cy91bml0cycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGRlZkRhdGEpIHtcbiAgdmFyIHNlbGYgPSB7fTtcbiAgdmFyIHBhcmFtT2JqID0ge307XG4gIGRlZkRhdGEuc3BsaXQoXCIrXCIpLm1hcChmdW5jdGlvbih2KSB7XG4gICAgcmV0dXJuIHYudHJpbSgpO1xuICB9KS5maWx0ZXIoZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiBhO1xuICB9KS5mb3JFYWNoKGZ1bmN0aW9uKGEpIHtcbiAgICB2YXIgc3BsaXQgPSBhLnNwbGl0KFwiPVwiKTtcbiAgICBzcGxpdC5wdXNoKHRydWUpO1xuICAgIHBhcmFtT2JqW3NwbGl0WzBdLnRvTG93ZXJDYXNlKCldID0gc3BsaXRbMV07XG4gIH0pO1xuICB2YXIgcGFyYW1OYW1lLCBwYXJhbVZhbCwgcGFyYW1PdXRuYW1lO1xuICB2YXIgcGFyYW1zID0ge1xuICAgIHByb2o6ICdwcm9qTmFtZScsXG4gICAgZGF0dW06ICdkYXR1bUNvZGUnLFxuICAgIHJmOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLnJmID0gcGFyc2VGbG9hdCh2KTtcbiAgICB9LFxuICAgIGxhdF8wOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmxhdDAgPSB2ICogRDJSO1xuICAgIH0sXG4gICAgbGF0XzE6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYubGF0MSA9IHYgKiBEMlI7XG4gICAgfSxcbiAgICBsYXRfMjogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5sYXQyID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIGxhdF90czogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5sYXRfdHMgPSB2ICogRDJSO1xuICAgIH0sXG4gICAgbG9uXzA6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYubG9uZzAgPSB2ICogRDJSO1xuICAgIH0sXG4gICAgbG9uXzE6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYubG9uZzEgPSB2ICogRDJSO1xuICAgIH0sXG4gICAgbG9uXzI6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYubG9uZzIgPSB2ICogRDJSO1xuICAgIH0sXG4gICAgYWxwaGE6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYuYWxwaGEgPSBwYXJzZUZsb2F0KHYpICogRDJSO1xuICAgIH0sXG4gICAgbG9uYzogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5sb25nYyA9IHYgKiBEMlI7XG4gICAgfSxcbiAgICB4XzA6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYueDAgPSBwYXJzZUZsb2F0KHYpO1xuICAgIH0sXG4gICAgeV8wOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLnkwID0gcGFyc2VGbG9hdCh2KTtcbiAgICB9LFxuICAgIGtfMDogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5rMCA9IHBhcnNlRmxvYXQodik7XG4gICAgfSxcbiAgICBrOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmswID0gcGFyc2VGbG9hdCh2KTtcbiAgICB9LFxuICAgIGE6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYuYSA9IHBhcnNlRmxvYXQodik7XG4gICAgfSxcbiAgICBiOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmIgPSBwYXJzZUZsb2F0KHYpO1xuICAgIH0sXG4gICAgcl9hOiBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYuUl9BID0gdHJ1ZTtcbiAgICB9LFxuICAgIHpvbmU6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYuem9uZSA9IHBhcnNlSW50KHYsIDEwKTtcbiAgICB9LFxuICAgIHNvdXRoOiBmdW5jdGlvbigpIHtcbiAgICAgIHNlbGYudXRtU291dGggPSB0cnVlO1xuICAgIH0sXG4gICAgdG93Z3M4NDogZnVuY3Rpb24odikge1xuICAgICAgc2VsZi5kYXR1bV9wYXJhbXMgPSB2LnNwbGl0KFwiLFwiKS5tYXAoZnVuY3Rpb24oYSkge1xuICAgICAgICByZXR1cm4gcGFyc2VGbG9hdChhKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgdG9fbWV0ZXI6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYudG9fbWV0ZXIgPSBwYXJzZUZsb2F0KHYpO1xuICAgIH0sXG4gICAgdW5pdHM6IGZ1bmN0aW9uKHYpIHtcbiAgICAgIHNlbGYudW5pdHMgPSB2O1xuICAgICAgaWYgKHVuaXRzW3ZdKSB7XG4gICAgICAgIHNlbGYudG9fbWV0ZXIgPSB1bml0c1t2XS50b19tZXRlcjtcbiAgICAgIH1cbiAgICB9LFxuICAgIGZyb21fZ3JlZW53aWNoOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmZyb21fZ3JlZW53aWNoID0gdiAqIEQyUjtcbiAgICB9LFxuICAgIHBtOiBmdW5jdGlvbih2KSB7XG4gICAgICBzZWxmLmZyb21fZ3JlZW53aWNoID0gKFByaW1lTWVyaWRpYW5bdl0gPyBQcmltZU1lcmlkaWFuW3ZdIDogcGFyc2VGbG9hdCh2KSkgKiBEMlI7XG4gICAgfSxcbiAgICBuYWRncmlkczogZnVuY3Rpb24odikge1xuICAgICAgaWYgKHYgPT09ICdAbnVsbCcpIHtcbiAgICAgICAgc2VsZi5kYXR1bUNvZGUgPSAnbm9uZSc7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc2VsZi5uYWRncmlkcyA9IHY7XG4gICAgICB9XG4gICAgfSxcbiAgICBheGlzOiBmdW5jdGlvbih2KSB7XG4gICAgICB2YXIgbGVnYWxBeGlzID0gXCJld25zdWRcIjtcbiAgICAgIGlmICh2Lmxlbmd0aCA9PT0gMyAmJiBsZWdhbEF4aXMuaW5kZXhPZih2LnN1YnN0cigwLCAxKSkgIT09IC0xICYmIGxlZ2FsQXhpcy5pbmRleE9mKHYuc3Vic3RyKDEsIDEpKSAhPT0gLTEgJiYgbGVnYWxBeGlzLmluZGV4T2Yodi5zdWJzdHIoMiwgMSkpICE9PSAtMSkge1xuICAgICAgICBzZWxmLmF4aXMgPSB2O1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgZm9yIChwYXJhbU5hbWUgaW4gcGFyYW1PYmopIHtcbiAgICBwYXJhbVZhbCA9IHBhcmFtT2JqW3BhcmFtTmFtZV07XG4gICAgaWYgKHBhcmFtTmFtZSBpbiBwYXJhbXMpIHtcbiAgICAgIHBhcmFtT3V0bmFtZSA9IHBhcmFtc1twYXJhbU5hbWVdO1xuICAgICAgaWYgKHR5cGVvZiBwYXJhbU91dG5hbWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcGFyYW1PdXRuYW1lKHBhcmFtVmFsKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzZWxmW3BhcmFtT3V0bmFtZV0gPSBwYXJhbVZhbDtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzZWxmW3BhcmFtTmFtZV0gPSBwYXJhbVZhbDtcbiAgICB9XG4gIH1cbiAgaWYodHlwZW9mIHNlbGYuZGF0dW1Db2RlID09PSAnc3RyaW5nJyAmJiBzZWxmLmRhdHVtQ29kZSAhPT0gXCJXR1M4NFwiKXtcbiAgICBzZWxmLmRhdHVtQ29kZSA9IHNlbGYuZGF0dW1Db2RlLnRvTG93ZXJDYXNlKCk7XG4gIH1cbiAgcmV0dXJuIHNlbGY7XG59O1xuIiwidmFyIHByb2pzID0gW1xuICByZXF1aXJlKCcuL3Byb2plY3Rpb25zL21lcmMnKSxcbiAgcmVxdWlyZSgnLi9wcm9qZWN0aW9ucy9sb25nbGF0Jylcbl07XG52YXIgbmFtZXMgPSB7fTtcbnZhciBwcm9qU3RvcmUgPSBbXTtcblxuZnVuY3Rpb24gYWRkKHByb2osIGkpIHtcbiAgdmFyIGxlbiA9IHByb2pTdG9yZS5sZW5ndGg7XG4gIGlmICghcHJvai5uYW1lcykge1xuICAgIGNvbnNvbGUubG9nKGkpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHByb2pTdG9yZVtsZW5dID0gcHJvajtcbiAgcHJvai5uYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKG4pIHtcbiAgICBuYW1lc1tuLnRvTG93ZXJDYXNlKCldID0gbGVuO1xuICB9KTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbmV4cG9ydHMuYWRkID0gYWRkO1xuXG5leHBvcnRzLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgaWYgKCFuYW1lKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBuID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuICBpZiAodHlwZW9mIG5hbWVzW25dICE9PSAndW5kZWZpbmVkJyAmJiBwcm9qU3RvcmVbbmFtZXNbbl1dKSB7XG4gICAgcmV0dXJuIHByb2pTdG9yZVtuYW1lc1tuXV07XG4gIH1cbn07XG5leHBvcnRzLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XG4gIHByb2pzLmZvckVhY2goYWRkKTtcbn07XG4iLCJ2YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIG1zZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL21zZm56Jyk7XG52YXIgcXNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vcXNmbnonKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBhc2lueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hc2lueicpO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgaWYgKE1hdGguYWJzKHRoaXMubGF0MSArIHRoaXMubGF0MikgPCBFUFNMTikge1xuICAgIHJldHVybjtcbiAgfVxuICB0aGlzLnRlbXAgPSB0aGlzLmIgLyB0aGlzLmE7XG4gIHRoaXMuZXMgPSAxIC0gTWF0aC5wb3codGhpcy50ZW1wLCAyKTtcbiAgdGhpcy5lMyA9IE1hdGguc3FydCh0aGlzLmVzKTtcblxuICB0aGlzLnNpbl9wbyA9IE1hdGguc2luKHRoaXMubGF0MSk7XG4gIHRoaXMuY29zX3BvID0gTWF0aC5jb3ModGhpcy5sYXQxKTtcbiAgdGhpcy50MSA9IHRoaXMuc2luX3BvO1xuICB0aGlzLmNvbiA9IHRoaXMuc2luX3BvO1xuICB0aGlzLm1zMSA9IG1zZm56KHRoaXMuZTMsIHRoaXMuc2luX3BvLCB0aGlzLmNvc19wbyk7XG4gIHRoaXMucXMxID0gcXNmbnoodGhpcy5lMywgdGhpcy5zaW5fcG8sIHRoaXMuY29zX3BvKTtcblxuICB0aGlzLnNpbl9wbyA9IE1hdGguc2luKHRoaXMubGF0Mik7XG4gIHRoaXMuY29zX3BvID0gTWF0aC5jb3ModGhpcy5sYXQyKTtcbiAgdGhpcy50MiA9IHRoaXMuc2luX3BvO1xuICB0aGlzLm1zMiA9IG1zZm56KHRoaXMuZTMsIHRoaXMuc2luX3BvLCB0aGlzLmNvc19wbyk7XG4gIHRoaXMucXMyID0gcXNmbnoodGhpcy5lMywgdGhpcy5zaW5fcG8sIHRoaXMuY29zX3BvKTtcblxuICB0aGlzLnNpbl9wbyA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gIHRoaXMuY29zX3BvID0gTWF0aC5jb3ModGhpcy5sYXQwKTtcbiAgdGhpcy50MyA9IHRoaXMuc2luX3BvO1xuICB0aGlzLnFzMCA9IHFzZm56KHRoaXMuZTMsIHRoaXMuc2luX3BvLCB0aGlzLmNvc19wbyk7XG5cbiAgaWYgKE1hdGguYWJzKHRoaXMubGF0MSAtIHRoaXMubGF0MikgPiBFUFNMTikge1xuICAgIHRoaXMubnMwID0gKHRoaXMubXMxICogdGhpcy5tczEgLSB0aGlzLm1zMiAqIHRoaXMubXMyKSAvICh0aGlzLnFzMiAtIHRoaXMucXMxKTtcbiAgfVxuICBlbHNlIHtcbiAgICB0aGlzLm5zMCA9IHRoaXMuY29uO1xuICB9XG4gIHRoaXMuYyA9IHRoaXMubXMxICogdGhpcy5tczEgKyB0aGlzLm5zMCAqIHRoaXMucXMxO1xuICB0aGlzLnJoID0gdGhpcy5hICogTWF0aC5zcXJ0KHRoaXMuYyAtIHRoaXMubnMwICogdGhpcy5xczApIC8gdGhpcy5uczA7XG59O1xuXG4vKiBBbGJlcnMgQ29uaWNhbCBFcXVhbCBBcmVhIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcblxuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuXG4gIHRoaXMuc2luX3BoaSA9IE1hdGguc2luKGxhdCk7XG4gIHRoaXMuY29zX3BoaSA9IE1hdGguY29zKGxhdCk7XG5cbiAgdmFyIHFzID0gcXNmbnoodGhpcy5lMywgdGhpcy5zaW5fcGhpLCB0aGlzLmNvc19waGkpO1xuICB2YXIgcmgxID0gdGhpcy5hICogTWF0aC5zcXJ0KHRoaXMuYyAtIHRoaXMubnMwICogcXMpIC8gdGhpcy5uczA7XG4gIHZhciB0aGV0YSA9IHRoaXMubnMwICogYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgdmFyIHggPSByaDEgKiBNYXRoLnNpbih0aGV0YSkgKyB0aGlzLngwO1xuICB2YXIgeSA9IHRoaXMucmggLSByaDEgKiBNYXRoLmNvcyh0aGV0YSkgKyB0aGlzLnkwO1xuXG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG4gIHJldHVybiBwO1xufTtcblxuXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciByaDEsIHFzLCBjb24sIHRoZXRhLCBsb24sIGxhdDtcblxuICBwLnggLT0gdGhpcy54MDtcbiAgcC55ID0gdGhpcy5yaCAtIHAueSArIHRoaXMueTA7XG4gIGlmICh0aGlzLm5zMCA+PSAwKSB7XG4gICAgcmgxID0gTWF0aC5zcXJ0KHAueCAqIHAueCArIHAueSAqIHAueSk7XG4gICAgY29uID0gMTtcbiAgfVxuICBlbHNlIHtcbiAgICByaDEgPSAtTWF0aC5zcXJ0KHAueCAqIHAueCArIHAueSAqIHAueSk7XG4gICAgY29uID0gLTE7XG4gIH1cbiAgdGhldGEgPSAwO1xuICBpZiAocmgxICE9PSAwKSB7XG4gICAgdGhldGEgPSBNYXRoLmF0YW4yKGNvbiAqIHAueCwgY29uICogcC55KTtcbiAgfVxuICBjb24gPSByaDEgKiB0aGlzLm5zMCAvIHRoaXMuYTtcbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgbGF0ID0gTWF0aC5hc2luKCh0aGlzLmMgLSBjb24gKiBjb24pIC8gKDIgKiB0aGlzLm5zMCkpO1xuICB9XG4gIGVsc2Uge1xuICAgIHFzID0gKHRoaXMuYyAtIGNvbiAqIGNvbikgLyB0aGlzLm5zMDtcbiAgICBsYXQgPSB0aGlzLnBoaTF6KHRoaXMuZTMsIHFzKTtcbiAgfVxuXG4gIGxvbiA9IGFkanVzdF9sb24odGhldGEgLyB0aGlzLm5zMCArIHRoaXMubG9uZzApO1xuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuXG4vKiBGdW5jdGlvbiB0byBjb21wdXRlIHBoaTEsIHRoZSBsYXRpdHVkZSBmb3IgdGhlIGludmVyc2Ugb2YgdGhlXG4gICBBbGJlcnMgQ29uaWNhbCBFcXVhbC1BcmVhIHByb2plY3Rpb24uXG4tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMucGhpMXogPSBmdW5jdGlvbihlY2NlbnQsIHFzKSB7XG4gIHZhciBzaW5waGksIGNvc3BoaSwgY29uLCBjb20sIGRwaGk7XG4gIHZhciBwaGkgPSBhc2lueigwLjUgKiBxcyk7XG4gIGlmIChlY2NlbnQgPCBFUFNMTikge1xuICAgIHJldHVybiBwaGk7XG4gIH1cblxuICB2YXIgZWNjbnRzID0gZWNjZW50ICogZWNjZW50O1xuICBmb3IgKHZhciBpID0gMTsgaSA8PSAyNTsgaSsrKSB7XG4gICAgc2lucGhpID0gTWF0aC5zaW4ocGhpKTtcbiAgICBjb3NwaGkgPSBNYXRoLmNvcyhwaGkpO1xuICAgIGNvbiA9IGVjY2VudCAqIHNpbnBoaTtcbiAgICBjb20gPSAxIC0gY29uICogY29uO1xuICAgIGRwaGkgPSAwLjUgKiBjb20gKiBjb20gLyBjb3NwaGkgKiAocXMgLyAoMSAtIGVjY250cykgLSBzaW5waGkgLyBjb20gKyAwLjUgLyBlY2NlbnQgKiBNYXRoLmxvZygoMSAtIGNvbikgLyAoMSArIGNvbikpKTtcbiAgICBwaGkgPSBwaGkgKyBkcGhpO1xuICAgIGlmIChNYXRoLmFicyhkcGhpKSA8PSAxZS03KSB7XG4gICAgICByZXR1cm4gcGhpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiQWxiZXJzX0NvbmljX0VxdWFsX0FyZWFcIiwgXCJBbGJlcnNcIiwgXCJhZWFcIl07XG4iLCJ2YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG52YXIgbWxmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tbGZuJyk7XG52YXIgZTBmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMGZuJyk7XG52YXIgZTFmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMWZuJyk7XG52YXIgZTJmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMmZuJyk7XG52YXIgZTNmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lM2ZuJyk7XG52YXIgZ04gPSByZXF1aXJlKCcuLi9jb21tb24vZ04nKTtcbnZhciBhc2lueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hc2lueicpO1xudmFyIGltbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2ltbGZuJyk7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5zaW5fcDEyID0gTWF0aC5zaW4odGhpcy5sYXQwKTtcbiAgdGhpcy5jb3NfcDEyID0gTWF0aC5jb3ModGhpcy5sYXQwKTtcbn07XG5cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcbiAgdmFyIHNpbnBoaSA9IE1hdGguc2luKHAueSk7XG4gIHZhciBjb3NwaGkgPSBNYXRoLmNvcyhwLnkpO1xuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciBlMCwgZTEsIGUyLCBlMywgTWxwLCBNbCwgdGFucGhpLCBObDEsIE5sLCBwc2ksIEF6LCBHLCBILCBHSCwgSHMsIGMsIGtwLCBjb3NfYywgcywgczIsIHMzLCBzNCwgczU7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLnNpbl9wMTIgLSAxKSA8PSBFUFNMTikge1xuICAgICAgLy9Ob3J0aCBQb2xlIGNhc2VcbiAgICAgIHAueCA9IHRoaXMueDAgKyB0aGlzLmEgKiAoSEFMRl9QSSAtIGxhdCkgKiBNYXRoLnNpbihkbG9uKTtcbiAgICAgIHAueSA9IHRoaXMueTAgLSB0aGlzLmEgKiAoSEFMRl9QSSAtIGxhdCkgKiBNYXRoLmNvcyhkbG9uKTtcbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBlbHNlIGlmIChNYXRoLmFicyh0aGlzLnNpbl9wMTIgKyAxKSA8PSBFUFNMTikge1xuICAgICAgLy9Tb3V0aCBQb2xlIGNhc2VcbiAgICAgIHAueCA9IHRoaXMueDAgKyB0aGlzLmEgKiAoSEFMRl9QSSArIGxhdCkgKiBNYXRoLnNpbihkbG9uKTtcbiAgICAgIHAueSA9IHRoaXMueTAgKyB0aGlzLmEgKiAoSEFMRl9QSSArIGxhdCkgKiBNYXRoLmNvcyhkbG9uKTtcbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vZGVmYXVsdCBjYXNlXG4gICAgICBjb3NfYyA9IHRoaXMuc2luX3AxMiAqIHNpbnBoaSArIHRoaXMuY29zX3AxMiAqIGNvc3BoaSAqIE1hdGguY29zKGRsb24pO1xuICAgICAgYyA9IE1hdGguYWNvcyhjb3NfYyk7XG4gICAgICBrcCA9IGMgLyBNYXRoLnNpbihjKTtcbiAgICAgIHAueCA9IHRoaXMueDAgKyB0aGlzLmEgKiBrcCAqIGNvc3BoaSAqIE1hdGguc2luKGRsb24pO1xuICAgICAgcC55ID0gdGhpcy55MCArIHRoaXMuYSAqIGtwICogKHRoaXMuY29zX3AxMiAqIHNpbnBoaSAtIHRoaXMuc2luX3AxMiAqIGNvc3BoaSAqIE1hdGguY29zKGRsb24pKTtcbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBlMCA9IGUwZm4odGhpcy5lcyk7XG4gICAgZTEgPSBlMWZuKHRoaXMuZXMpO1xuICAgIGUyID0gZTJmbih0aGlzLmVzKTtcbiAgICBlMyA9IGUzZm4odGhpcy5lcyk7XG4gICAgaWYgKE1hdGguYWJzKHRoaXMuc2luX3AxMiAtIDEpIDw9IEVQU0xOKSB7XG4gICAgICAvL05vcnRoIFBvbGUgY2FzZVxuICAgICAgTWxwID0gdGhpcy5hICogbWxmbihlMCwgZTEsIGUyLCBlMywgSEFMRl9QSSk7XG4gICAgICBNbCA9IHRoaXMuYSAqIG1sZm4oZTAsIGUxLCBlMiwgZTMsIGxhdCk7XG4gICAgICBwLnggPSB0aGlzLngwICsgKE1scCAtIE1sKSAqIE1hdGguc2luKGRsb24pO1xuICAgICAgcC55ID0gdGhpcy55MCAtIChNbHAgLSBNbCkgKiBNYXRoLmNvcyhkbG9uKTtcbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBlbHNlIGlmIChNYXRoLmFicyh0aGlzLnNpbl9wMTIgKyAxKSA8PSBFUFNMTikge1xuICAgICAgLy9Tb3V0aCBQb2xlIGNhc2VcbiAgICAgIE1scCA9IHRoaXMuYSAqIG1sZm4oZTAsIGUxLCBlMiwgZTMsIEhBTEZfUEkpO1xuICAgICAgTWwgPSB0aGlzLmEgKiBtbGZuKGUwLCBlMSwgZTIsIGUzLCBsYXQpO1xuICAgICAgcC54ID0gdGhpcy54MCArIChNbHAgKyBNbCkgKiBNYXRoLnNpbihkbG9uKTtcbiAgICAgIHAueSA9IHRoaXMueTAgKyAoTWxwICsgTWwpICogTWF0aC5jb3MoZGxvbik7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvL0RlZmF1bHQgY2FzZVxuICAgICAgdGFucGhpID0gc2lucGhpIC8gY29zcGhpO1xuICAgICAgTmwxID0gZ04odGhpcy5hLCB0aGlzLmUsIHRoaXMuc2luX3AxMik7XG4gICAgICBObCA9IGdOKHRoaXMuYSwgdGhpcy5lLCBzaW5waGkpO1xuICAgICAgcHNpID0gTWF0aC5hdGFuKCgxIC0gdGhpcy5lcykgKiB0YW5waGkgKyB0aGlzLmVzICogTmwxICogdGhpcy5zaW5fcDEyIC8gKE5sICogY29zcGhpKSk7XG4gICAgICBBeiA9IE1hdGguYXRhbjIoTWF0aC5zaW4oZGxvbiksIHRoaXMuY29zX3AxMiAqIE1hdGgudGFuKHBzaSkgLSB0aGlzLnNpbl9wMTIgKiBNYXRoLmNvcyhkbG9uKSk7XG4gICAgICBpZiAoQXogPT09IDApIHtcbiAgICAgICAgcyA9IE1hdGguYXNpbih0aGlzLmNvc19wMTIgKiBNYXRoLnNpbihwc2kpIC0gdGhpcy5zaW5fcDEyICogTWF0aC5jb3MocHNpKSk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChNYXRoLmFicyhNYXRoLmFicyhBeikgLSBNYXRoLlBJKSA8PSBFUFNMTikge1xuICAgICAgICBzID0gLU1hdGguYXNpbih0aGlzLmNvc19wMTIgKiBNYXRoLnNpbihwc2kpIC0gdGhpcy5zaW5fcDEyICogTWF0aC5jb3MocHNpKSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcyA9IE1hdGguYXNpbihNYXRoLnNpbihkbG9uKSAqIE1hdGguY29zKHBzaSkgLyBNYXRoLnNpbihBeikpO1xuICAgICAgfVxuICAgICAgRyA9IHRoaXMuZSAqIHRoaXMuc2luX3AxMiAvIE1hdGguc3FydCgxIC0gdGhpcy5lcyk7XG4gICAgICBIID0gdGhpcy5lICogdGhpcy5jb3NfcDEyICogTWF0aC5jb3MoQXopIC8gTWF0aC5zcXJ0KDEgLSB0aGlzLmVzKTtcbiAgICAgIEdIID0gRyAqIEg7XG4gICAgICBIcyA9IEggKiBIO1xuICAgICAgczIgPSBzICogcztcbiAgICAgIHMzID0gczIgKiBzO1xuICAgICAgczQgPSBzMyAqIHM7XG4gICAgICBzNSA9IHM0ICogcztcbiAgICAgIGMgPSBObDEgKiBzICogKDEgLSBzMiAqIEhzICogKDEgLSBIcykgLyA2ICsgczMgLyA4ICogR0ggKiAoMSAtIDIgKiBIcykgKyBzNCAvIDEyMCAqIChIcyAqICg0IC0gNyAqIEhzKSAtIDMgKiBHICogRyAqICgxIC0gNyAqIEhzKSkgLSBzNSAvIDQ4ICogR0gpO1xuICAgICAgcC54ID0gdGhpcy54MCArIGMgKiBNYXRoLnNpbihBeik7XG4gICAgICBwLnkgPSB0aGlzLnkwICsgYyAqIE1hdGguY29zKEF6KTtcbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgfVxuXG5cbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgcC54IC09IHRoaXMueDA7XG4gIHAueSAtPSB0aGlzLnkwO1xuICB2YXIgcmgsIHosIHNpbnosIGNvc3osIGxvbiwgbGF0LCBjb24sIGUwLCBlMSwgZTIsIGUzLCBNbHAsIE0sIE4xLCBwc2ksIEF6LCBjb3NBeiwgdG1wLCBBLCBCLCBELCBFZSwgRjtcbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgcmggPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICBpZiAocmggPiAoMiAqIEhBTEZfUEkgKiB0aGlzLmEpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHogPSByaCAvIHRoaXMuYTtcblxuICAgIHNpbnogPSBNYXRoLnNpbih6KTtcbiAgICBjb3N6ID0gTWF0aC5jb3Moeik7XG5cbiAgICBsb24gPSB0aGlzLmxvbmcwO1xuICAgIGlmIChNYXRoLmFicyhyaCkgPD0gRVBTTE4pIHtcbiAgICAgIGxhdCA9IHRoaXMubGF0MDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsYXQgPSBhc2lueihjb3N6ICogdGhpcy5zaW5fcDEyICsgKHAueSAqIHNpbnogKiB0aGlzLmNvc19wMTIpIC8gcmgpO1xuICAgICAgY29uID0gTWF0aC5hYnModGhpcy5sYXQwKSAtIEhBTEZfUEk7XG4gICAgICBpZiAoTWF0aC5hYnMoY29uKSA8PSBFUFNMTikge1xuICAgICAgICBpZiAodGhpcy5sYXQwID49IDApIHtcbiAgICAgICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBNYXRoLmF0YW4yKHAueCwgLSBwLnkpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgLSBNYXRoLmF0YW4yKC1wLngsIHAueSkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLypjb24gPSBjb3N6IC0gdGhpcy5zaW5fcDEyICogTWF0aC5zaW4obGF0KTtcbiAgICAgICAgaWYgKChNYXRoLmFicyhjb24pIDwgRVBTTE4pICYmIChNYXRoLmFicyhwLngpIDwgRVBTTE4pKSB7XG4gICAgICAgICAgLy9uby1vcCwganVzdCBrZWVwIHRoZSBsb24gdmFsdWUgYXMgaXNcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgdGVtcCA9IE1hdGguYXRhbjIoKHAueCAqIHNpbnogKiB0aGlzLmNvc19wMTIpLCAoY29uICogcmgpKTtcbiAgICAgICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBNYXRoLmF0YW4yKChwLnggKiBzaW56ICogdGhpcy5jb3NfcDEyKSwgKGNvbiAqIHJoKSkpO1xuICAgICAgICB9Ki9cbiAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLnggKiBzaW56LCByaCAqIHRoaXMuY29zX3AxMiAqIGNvc3ogLSBwLnkgKiB0aGlzLnNpbl9wMTIgKiBzaW56KSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcC54ID0gbG9uO1xuICAgIHAueSA9IGxhdDtcbiAgICByZXR1cm4gcDtcbiAgfVxuICBlbHNlIHtcbiAgICBlMCA9IGUwZm4odGhpcy5lcyk7XG4gICAgZTEgPSBlMWZuKHRoaXMuZXMpO1xuICAgIGUyID0gZTJmbih0aGlzLmVzKTtcbiAgICBlMyA9IGUzZm4odGhpcy5lcyk7XG4gICAgaWYgKE1hdGguYWJzKHRoaXMuc2luX3AxMiAtIDEpIDw9IEVQU0xOKSB7XG4gICAgICAvL05vcnRoIHBvbGUgY2FzZVxuICAgICAgTWxwID0gdGhpcy5hICogbWxmbihlMCwgZTEsIGUyLCBlMywgSEFMRl9QSSk7XG4gICAgICByaCA9IE1hdGguc3FydChwLnggKiBwLnggKyBwLnkgKiBwLnkpO1xuICAgICAgTSA9IE1scCAtIHJoO1xuICAgICAgbGF0ID0gaW1sZm4oTSAvIHRoaXMuYSwgZTAsIGUxLCBlMiwgZTMpO1xuICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLngsIC0gMSAqIHAueSkpO1xuICAgICAgcC54ID0gbG9uO1xuICAgICAgcC55ID0gbGF0O1xuICAgICAgcmV0dXJuIHA7XG4gICAgfVxuICAgIGVsc2UgaWYgKE1hdGguYWJzKHRoaXMuc2luX3AxMiArIDEpIDw9IEVQU0xOKSB7XG4gICAgICAvL1NvdXRoIHBvbGUgY2FzZVxuICAgICAgTWxwID0gdGhpcy5hICogbWxmbihlMCwgZTEsIGUyLCBlMywgSEFMRl9QSSk7XG4gICAgICByaCA9IE1hdGguc3FydChwLnggKiBwLnggKyBwLnkgKiBwLnkpO1xuICAgICAgTSA9IHJoIC0gTWxwO1xuXG4gICAgICBsYXQgPSBpbWxmbihNIC8gdGhpcy5hLCBlMCwgZTEsIGUyLCBlMyk7XG4gICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBNYXRoLmF0YW4yKHAueCwgcC55KSk7XG4gICAgICBwLnggPSBsb247XG4gICAgICBwLnkgPSBsYXQ7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvL2RlZmF1bHQgY2FzZVxuICAgICAgcmggPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgICAgIEF6ID0gTWF0aC5hdGFuMihwLngsIHAueSk7XG4gICAgICBOMSA9IGdOKHRoaXMuYSwgdGhpcy5lLCB0aGlzLnNpbl9wMTIpO1xuICAgICAgY29zQXogPSBNYXRoLmNvcyhBeik7XG4gICAgICB0bXAgPSB0aGlzLmUgKiB0aGlzLmNvc19wMTIgKiBjb3NBejtcbiAgICAgIEEgPSAtdG1wICogdG1wIC8gKDEgLSB0aGlzLmVzKTtcbiAgICAgIEIgPSAzICogdGhpcy5lcyAqICgxIC0gQSkgKiB0aGlzLnNpbl9wMTIgKiB0aGlzLmNvc19wMTIgKiBjb3NBeiAvICgxIC0gdGhpcy5lcyk7XG4gICAgICBEID0gcmggLyBOMTtcbiAgICAgIEVlID0gRCAtIEEgKiAoMSArIEEpICogTWF0aC5wb3coRCwgMykgLyA2IC0gQiAqICgxICsgMyAqIEEpICogTWF0aC5wb3coRCwgNCkgLyAyNDtcbiAgICAgIEYgPSAxIC0gQSAqIEVlICogRWUgLyAyIC0gRCAqIEVlICogRWUgKiBFZSAvIDY7XG4gICAgICBwc2kgPSBNYXRoLmFzaW4odGhpcy5zaW5fcDEyICogTWF0aC5jb3MoRWUpICsgdGhpcy5jb3NfcDEyICogTWF0aC5zaW4oRWUpICogY29zQXopO1xuICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hc2luKE1hdGguc2luKEF6KSAqIE1hdGguc2luKEVlKSAvIE1hdGguY29zKHBzaSkpKTtcbiAgICAgIGxhdCA9IE1hdGguYXRhbigoMSAtIHRoaXMuZXMgKiBGICogdGhpcy5zaW5fcDEyIC8gTWF0aC5zaW4ocHNpKSkgKiBNYXRoLnRhbihwc2kpIC8gKDEgLSB0aGlzLmVzKSk7XG4gICAgICBwLnggPSBsb247XG4gICAgICBwLnkgPSBsYXQ7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gIH1cblxufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJBemltdXRoYWxfRXF1aWRpc3RhbnRcIiwgXCJhZXFkXCJdO1xuIiwidmFyIG1sZm4gPSByZXF1aXJlKCcuLi9jb21tb24vbWxmbicpO1xudmFyIGUwZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTBmbicpO1xudmFyIGUxZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTFmbicpO1xudmFyIGUyZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTJmbicpO1xudmFyIGUzZm4gPSByZXF1aXJlKCcuLi9jb21tb24vZTNmbicpO1xudmFyIGdOID0gcmVxdWlyZSgnLi4vY29tbW9uL2dOJyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgYWRqdXN0X2xhdCA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbGF0Jyk7XG52YXIgaW1sZm4gPSByZXF1aXJlKCcuLi9jb21tb24vaW1sZm4nKTtcbnZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIXRoaXMuc3BoZXJlKSB7XG4gICAgdGhpcy5lMCA9IGUwZm4odGhpcy5lcyk7XG4gICAgdGhpcy5lMSA9IGUxZm4odGhpcy5lcyk7XG4gICAgdGhpcy5lMiA9IGUyZm4odGhpcy5lcyk7XG4gICAgdGhpcy5lMyA9IGUzZm4odGhpcy5lcyk7XG4gICAgdGhpcy5tbDAgPSB0aGlzLmEgKiBtbGZuKHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMsIHRoaXMubGF0MCk7XG4gIH1cbn07XG5cblxuXG4vKiBDYXNzaW5pIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG5cbiAgLyogRm9yd2FyZCBlcXVhdGlvbnNcbiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgdmFyIHgsIHk7XG4gIHZhciBsYW0gPSBwLng7XG4gIHZhciBwaGkgPSBwLnk7XG4gIGxhbSA9IGFkanVzdF9sb24obGFtIC0gdGhpcy5sb25nMCk7XG5cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgeCA9IHRoaXMuYSAqIE1hdGguYXNpbihNYXRoLmNvcyhwaGkpICogTWF0aC5zaW4obGFtKSk7XG4gICAgeSA9IHRoaXMuYSAqIChNYXRoLmF0YW4yKE1hdGgudGFuKHBoaSksIE1hdGguY29zKGxhbSkpIC0gdGhpcy5sYXQwKTtcbiAgfVxuICBlbHNlIHtcbiAgICAvL2VsbGlwc29pZFxuICAgIHZhciBzaW5waGkgPSBNYXRoLnNpbihwaGkpO1xuICAgIHZhciBjb3NwaGkgPSBNYXRoLmNvcyhwaGkpO1xuICAgIHZhciBubCA9IGdOKHRoaXMuYSwgdGhpcy5lLCBzaW5waGkpO1xuICAgIHZhciB0bCA9IE1hdGgudGFuKHBoaSkgKiBNYXRoLnRhbihwaGkpO1xuICAgIHZhciBhbCA9IGxhbSAqIE1hdGguY29zKHBoaSk7XG4gICAgdmFyIGFzcSA9IGFsICogYWw7XG4gICAgdmFyIGNsID0gdGhpcy5lcyAqIGNvc3BoaSAqIGNvc3BoaSAvICgxIC0gdGhpcy5lcyk7XG4gICAgdmFyIG1sID0gdGhpcy5hICogbWxmbih0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzLCBwaGkpO1xuXG4gICAgeCA9IG5sICogYWwgKiAoMSAtIGFzcSAqIHRsICogKDEgLyA2IC0gKDggLSB0bCArIDggKiBjbCkgKiBhc3EgLyAxMjApKTtcbiAgICB5ID0gbWwgLSB0aGlzLm1sMCArIG5sICogc2lucGhpIC8gY29zcGhpICogYXNxICogKDAuNSArICg1IC0gdGwgKyA2ICogY2wpICogYXNxIC8gMjQpO1xuXG5cbiAgfVxuXG4gIHAueCA9IHggKyB0aGlzLngwO1xuICBwLnkgPSB5ICsgdGhpcy55MDtcbiAgcmV0dXJuIHA7XG59O1xuXG4vKiBJbnZlcnNlIGVxdWF0aW9uc1xuICAtLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgLT0gdGhpcy55MDtcbiAgdmFyIHggPSBwLnggLyB0aGlzLmE7XG4gIHZhciB5ID0gcC55IC8gdGhpcy5hO1xuICB2YXIgcGhpLCBsYW07XG5cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgdmFyIGRkID0geSArIHRoaXMubGF0MDtcbiAgICBwaGkgPSBNYXRoLmFzaW4oTWF0aC5zaW4oZGQpICogTWF0aC5jb3MoeCkpO1xuICAgIGxhbSA9IE1hdGguYXRhbjIoTWF0aC50YW4oeCksIE1hdGguY29zKGRkKSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgLyogZWxsaXBzb2lkICovXG4gICAgdmFyIG1sMSA9IHRoaXMubWwwIC8gdGhpcy5hICsgeTtcbiAgICB2YXIgcGhpMSA9IGltbGZuKG1sMSwgdGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMyk7XG4gICAgaWYgKE1hdGguYWJzKE1hdGguYWJzKHBoaTEpIC0gSEFMRl9QSSkgPD0gRVBTTE4pIHtcbiAgICAgIHAueCA9IHRoaXMubG9uZzA7XG4gICAgICBwLnkgPSBIQUxGX1BJO1xuICAgICAgaWYgKHkgPCAwKSB7XG4gICAgICAgIHAueSAqPSAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICB2YXIgbmwxID0gZ04odGhpcy5hLCB0aGlzLmUsIE1hdGguc2luKHBoaTEpKTtcblxuICAgIHZhciBybDEgPSBubDEgKiBubDEgKiBubDEgLyB0aGlzLmEgLyB0aGlzLmEgKiAoMSAtIHRoaXMuZXMpO1xuICAgIHZhciB0bDEgPSBNYXRoLnBvdyhNYXRoLnRhbihwaGkxKSwgMik7XG4gICAgdmFyIGRsID0geCAqIHRoaXMuYSAvIG5sMTtcbiAgICB2YXIgZHNxID0gZGwgKiBkbDtcbiAgICBwaGkgPSBwaGkxIC0gbmwxICogTWF0aC50YW4ocGhpMSkgLyBybDEgKiBkbCAqIGRsICogKDAuNSAtICgxICsgMyAqIHRsMSkgKiBkbCAqIGRsIC8gMjQpO1xuICAgIGxhbSA9IGRsICogKDEgLSBkc3EgKiAodGwxIC8gMyArICgxICsgMyAqIHRsMSkgKiB0bDEgKiBkc3EgLyAxNSkpIC8gTWF0aC5jb3MocGhpMSk7XG5cbiAgfVxuXG4gIHAueCA9IGFkanVzdF9sb24obGFtICsgdGhpcy5sb25nMCk7XG4gIHAueSA9IGFkanVzdF9sYXQocGhpKTtcbiAgcmV0dXJuIHA7XG5cbn07XG5leHBvcnRzLm5hbWVzID0gW1wiQ2Fzc2luaVwiLCBcIkNhc3NpbmlfU29sZG5lclwiLCBcImNhc3NcIl07IiwidmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIHFzZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL3FzZm56Jyk7XG52YXIgbXNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vbXNmbnonKTtcbnZhciBpcXNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vaXFzZm56Jyk7XG4vKlxuICByZWZlcmVuY2U6ICBcbiAgICBcIkNhcnRvZ3JhcGhpYyBQcm9qZWN0aW9uIFByb2NlZHVyZXMgZm9yIHRoZSBVTklYIEVudmlyb25tZW50LVxuICAgIEEgVXNlcidzIE1hbnVhbFwiIGJ5IEdlcmFsZCBJLiBFdmVuZGVuLFxuICAgIFVTR1MgT3BlbiBGaWxlIFJlcG9ydCA5MC0yODRhbmQgUmVsZWFzZSA0IEludGVyaW0gUmVwb3J0cyAoMjAwMylcbiovXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgLy9uby1vcFxuICBpZiAoIXRoaXMuc3BoZXJlKSB7XG4gICAgdGhpcy5rMCA9IG1zZm56KHRoaXMuZSwgTWF0aC5zaW4odGhpcy5sYXRfdHMpLCBNYXRoLmNvcyh0aGlzLmxhdF90cykpO1xuICB9XG59O1xuXG5cbi8qIEN5bGluZHJpY2FsIEVxdWFsIEFyZWEgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcbiAgdmFyIHgsIHk7XG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHZhciBkbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgeCA9IHRoaXMueDAgKyB0aGlzLmEgKiBkbG9uICogTWF0aC5jb3ModGhpcy5sYXRfdHMpO1xuICAgIHkgPSB0aGlzLnkwICsgdGhpcy5hICogTWF0aC5zaW4obGF0KSAvIE1hdGguY29zKHRoaXMubGF0X3RzKTtcbiAgfVxuICBlbHNlIHtcbiAgICB2YXIgcXMgPSBxc2Zueih0aGlzLmUsIE1hdGguc2luKGxhdCkpO1xuICAgIHggPSB0aGlzLngwICsgdGhpcy5hICogdGhpcy5rMCAqIGRsb247XG4gICAgeSA9IHRoaXMueTAgKyB0aGlzLmEgKiBxcyAqIDAuNSAvIHRoaXMuazA7XG4gIH1cblxuICBwLnggPSB4O1xuICBwLnkgPSB5O1xuICByZXR1cm4gcDtcbn07XG5cbi8qIEN5bGluZHJpY2FsIEVxdWFsIEFyZWEgaW52ZXJzZSBlcXVhdGlvbnMtLW1hcHBpbmcgeCx5IHRvIGxhdC9sb25nXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgcC54IC09IHRoaXMueDA7XG4gIHAueSAtPSB0aGlzLnkwO1xuICB2YXIgbG9uLCBsYXQ7XG5cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgKHAueCAvIHRoaXMuYSkgLyBNYXRoLmNvcyh0aGlzLmxhdF90cykpO1xuICAgIGxhdCA9IE1hdGguYXNpbigocC55IC8gdGhpcy5hKSAqIE1hdGguY29zKHRoaXMubGF0X3RzKSk7XG4gIH1cbiAgZWxzZSB7XG4gICAgbGF0ID0gaXFzZm56KHRoaXMuZSwgMiAqIHAueSAqIHRoaXMuazAgLyB0aGlzLmEpO1xuICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIHAueCAvICh0aGlzLmEgKiB0aGlzLmswKSk7XG4gIH1cblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcImNlYVwiXTtcbiIsInZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBhZGp1c3RfbGF0ID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sYXQnKTtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuXG4gIHRoaXMueDAgPSB0aGlzLngwIHx8IDA7XG4gIHRoaXMueTAgPSB0aGlzLnkwIHx8IDA7XG4gIHRoaXMubGF0MCA9IHRoaXMubGF0MCB8fCAwO1xuICB0aGlzLmxvbmcwID0gdGhpcy5sb25nMCB8fCAwO1xuICB0aGlzLmxhdF90cyA9IHRoaXMubGF0X3RzIHx8IDA7XG4gIHRoaXMudGl0bGUgPSB0aGlzLnRpdGxlIHx8IFwiRXF1aWRpc3RhbnQgQ3lsaW5kcmljYWwgKFBsYXRlIENhcnJlKVwiO1xuXG4gIHRoaXMucmMgPSBNYXRoLmNvcyh0aGlzLmxhdF90cyk7XG59O1xuXG5cbi8vIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcblxuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuXG4gIHZhciBkbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgdmFyIGRsYXQgPSBhZGp1c3RfbGF0KGxhdCAtIHRoaXMubGF0MCk7XG4gIHAueCA9IHRoaXMueDAgKyAodGhpcy5hICogZGxvbiAqIHRoaXMucmMpO1xuICBwLnkgPSB0aGlzLnkwICsgKHRoaXMuYSAqIGRsYXQpO1xuICByZXR1cm4gcDtcbn07XG5cbi8vIGludmVyc2UgZXF1YXRpb25zLS1tYXBwaW5nIHgseSB0byBsYXQvbG9uZ1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcblxuICB2YXIgeCA9IHAueDtcbiAgdmFyIHkgPSBwLnk7XG5cbiAgcC54ID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgKCh4IC0gdGhpcy54MCkgLyAodGhpcy5hICogdGhpcy5yYykpKTtcbiAgcC55ID0gYWRqdXN0X2xhdCh0aGlzLmxhdDAgKyAoKHkgLSB0aGlzLnkwKSAvICh0aGlzLmEpKSk7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJFcXVpcmVjdGFuZ3VsYXJcIiwgXCJFcXVpZGlzdGFudF9DeWxpbmRyaWNhbFwiLCBcImVxY1wiXTtcbiIsInZhciBlMGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UwZm4nKTtcbnZhciBlMWZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UxZm4nKTtcbnZhciBlMmZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UyZm4nKTtcbnZhciBlM2ZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UzZm4nKTtcbnZhciBtc2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tc2ZueicpO1xudmFyIG1sZm4gPSByZXF1aXJlKCcuLi9jb21tb24vbWxmbicpO1xudmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIGFkanVzdF9sYXQgPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xhdCcpO1xudmFyIGltbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2ltbGZuJyk7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG5cbiAgLyogUGxhY2UgcGFyYW1ldGVycyBpbiBzdGF0aWMgc3RvcmFnZSBmb3IgY29tbW9uIHVzZVxuICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIC8vIFN0YW5kYXJkIFBhcmFsbGVscyBjYW5ub3QgYmUgZXF1YWwgYW5kIG9uIG9wcG9zaXRlIHNpZGVzIG9mIHRoZSBlcXVhdG9yXG4gIGlmIChNYXRoLmFicyh0aGlzLmxhdDEgKyB0aGlzLmxhdDIpIDwgRVBTTE4pIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5sYXQyID0gdGhpcy5sYXQyIHx8IHRoaXMubGF0MTtcbiAgdGhpcy50ZW1wID0gdGhpcy5iIC8gdGhpcy5hO1xuICB0aGlzLmVzID0gMSAtIE1hdGgucG93KHRoaXMudGVtcCwgMik7XG4gIHRoaXMuZSA9IE1hdGguc3FydCh0aGlzLmVzKTtcbiAgdGhpcy5lMCA9IGUwZm4odGhpcy5lcyk7XG4gIHRoaXMuZTEgPSBlMWZuKHRoaXMuZXMpO1xuICB0aGlzLmUyID0gZTJmbih0aGlzLmVzKTtcbiAgdGhpcy5lMyA9IGUzZm4odGhpcy5lcyk7XG5cbiAgdGhpcy5zaW5waGkgPSBNYXRoLnNpbih0aGlzLmxhdDEpO1xuICB0aGlzLmNvc3BoaSA9IE1hdGguY29zKHRoaXMubGF0MSk7XG5cbiAgdGhpcy5tczEgPSBtc2Zueih0aGlzLmUsIHRoaXMuc2lucGhpLCB0aGlzLmNvc3BoaSk7XG4gIHRoaXMubWwxID0gbWxmbih0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzLCB0aGlzLmxhdDEpO1xuXG4gIGlmIChNYXRoLmFicyh0aGlzLmxhdDEgLSB0aGlzLmxhdDIpIDwgRVBTTE4pIHtcbiAgICB0aGlzLm5zID0gdGhpcy5zaW5waGk7XG4gIH1cbiAgZWxzZSB7XG4gICAgdGhpcy5zaW5waGkgPSBNYXRoLnNpbih0aGlzLmxhdDIpO1xuICAgIHRoaXMuY29zcGhpID0gTWF0aC5jb3ModGhpcy5sYXQyKTtcbiAgICB0aGlzLm1zMiA9IG1zZm56KHRoaXMuZSwgdGhpcy5zaW5waGksIHRoaXMuY29zcGhpKTtcbiAgICB0aGlzLm1sMiA9IG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgdGhpcy5sYXQyKTtcbiAgICB0aGlzLm5zID0gKHRoaXMubXMxIC0gdGhpcy5tczIpIC8gKHRoaXMubWwyIC0gdGhpcy5tbDEpO1xuICB9XG4gIHRoaXMuZyA9IHRoaXMubWwxICsgdGhpcy5tczEgLyB0aGlzLm5zO1xuICB0aGlzLm1sMCA9IG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgdGhpcy5sYXQwKTtcbiAgdGhpcy5yaCA9IHRoaXMuYSAqICh0aGlzLmcgLSB0aGlzLm1sMCk7XG59O1xuXG5cbi8qIEVxdWlkaXN0YW50IENvbmljIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciByaDE7XG5cbiAgLyogRm9yd2FyZCBlcXVhdGlvbnNcbiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgcmgxID0gdGhpcy5hICogKHRoaXMuZyAtIGxhdCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgdmFyIG1sID0gbWxmbih0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzLCBsYXQpO1xuICAgIHJoMSA9IHRoaXMuYSAqICh0aGlzLmcgLSBtbCk7XG4gIH1cbiAgdmFyIHRoZXRhID0gdGhpcy5ucyAqIGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciB4ID0gdGhpcy54MCArIHJoMSAqIE1hdGguc2luKHRoZXRhKTtcbiAgdmFyIHkgPSB0aGlzLnkwICsgdGhpcy5yaCAtIHJoMSAqIE1hdGguY29zKHRoZXRhKTtcbiAgcC54ID0geDtcbiAgcC55ID0geTtcbiAgcmV0dXJuIHA7XG59O1xuXG4vKiBJbnZlcnNlIGVxdWF0aW9uc1xuICAtLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHAueCAtPSB0aGlzLngwO1xuICBwLnkgPSB0aGlzLnJoIC0gcC55ICsgdGhpcy55MDtcbiAgdmFyIGNvbiwgcmgxLCBsYXQsIGxvbjtcbiAgaWYgKHRoaXMubnMgPj0gMCkge1xuICAgIHJoMSA9IE1hdGguc3FydChwLnggKiBwLnggKyBwLnkgKiBwLnkpO1xuICAgIGNvbiA9IDE7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmgxID0gLU1hdGguc3FydChwLnggKiBwLnggKyBwLnkgKiBwLnkpO1xuICAgIGNvbiA9IC0xO1xuICB9XG4gIHZhciB0aGV0YSA9IDA7XG4gIGlmIChyaDEgIT09IDApIHtcbiAgICB0aGV0YSA9IE1hdGguYXRhbjIoY29uICogcC54LCBjb24gKiBwLnkpO1xuICB9XG5cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgdGhldGEgLyB0aGlzLm5zKTtcbiAgICBsYXQgPSBhZGp1c3RfbGF0KHRoaXMuZyAtIHJoMSAvIHRoaXMuYSk7XG4gICAgcC54ID0gbG9uO1xuICAgIHAueSA9IGxhdDtcbiAgICByZXR1cm4gcDtcbiAgfVxuICBlbHNlIHtcbiAgICB2YXIgbWwgPSB0aGlzLmcgLSByaDEgLyB0aGlzLmE7XG4gICAgbGF0ID0gaW1sZm4obWwsIHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMpO1xuICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIHRoZXRhIC8gdGhpcy5ucyk7XG4gICAgcC54ID0gbG9uO1xuICAgIHAueSA9IGxhdDtcbiAgICByZXR1cm4gcDtcbiAgfVxuXG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIkVxdWlkaXN0YW50X0NvbmljXCIsIFwiZXFkY1wiXTtcbiIsInZhciBGT1JUUEkgPSBNYXRoLlBJLzQ7XG52YXIgc3JhdCA9IHJlcXVpcmUoJy4uL2NvbW1vbi9zcmF0Jyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBNQVhfSVRFUiA9IDIwO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHZhciBzcGhpID0gTWF0aC5zaW4odGhpcy5sYXQwKTtcbiAgdmFyIGNwaGkgPSBNYXRoLmNvcyh0aGlzLmxhdDApO1xuICBjcGhpICo9IGNwaGk7XG4gIHRoaXMucmMgPSBNYXRoLnNxcnQoMSAtIHRoaXMuZXMpIC8gKDEgLSB0aGlzLmVzICogc3BoaSAqIHNwaGkpO1xuICB0aGlzLkMgPSBNYXRoLnNxcnQoMSArIHRoaXMuZXMgKiBjcGhpICogY3BoaSAvICgxIC0gdGhpcy5lcykpO1xuICB0aGlzLnBoaWMwID0gTWF0aC5hc2luKHNwaGkgLyB0aGlzLkMpO1xuICB0aGlzLnJhdGV4cCA9IDAuNSAqIHRoaXMuQyAqIHRoaXMuZTtcbiAgdGhpcy5LID0gTWF0aC50YW4oMC41ICogdGhpcy5waGljMCArIEZPUlRQSSkgLyAoTWF0aC5wb3coTWF0aC50YW4oMC41ICogdGhpcy5sYXQwICsgRk9SVFBJKSwgdGhpcy5DKSAqIHNyYXQodGhpcy5lICogc3BoaSwgdGhpcy5yYXRleHApKTtcbn07XG5cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcblxuICBwLnkgPSAyICogTWF0aC5hdGFuKHRoaXMuSyAqIE1hdGgucG93KE1hdGgudGFuKDAuNSAqIGxhdCArIEZPUlRQSSksIHRoaXMuQykgKiBzcmF0KHRoaXMuZSAqIE1hdGguc2luKGxhdCksIHRoaXMucmF0ZXhwKSkgLSBIQUxGX1BJO1xuICBwLnggPSB0aGlzLkMgKiBsb247XG4gIHJldHVybiBwO1xufTtcblxuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICB2YXIgREVMX1RPTCA9IDFlLTE0O1xuICB2YXIgbG9uID0gcC54IC8gdGhpcy5DO1xuICB2YXIgbGF0ID0gcC55O1xuICB2YXIgbnVtID0gTWF0aC5wb3coTWF0aC50YW4oMC41ICogbGF0ICsgRk9SVFBJKSAvIHRoaXMuSywgMSAvIHRoaXMuQyk7XG4gIGZvciAodmFyIGkgPSBNQVhfSVRFUjsgaSA+IDA7IC0taSkge1xuICAgIGxhdCA9IDIgKiBNYXRoLmF0YW4obnVtICogc3JhdCh0aGlzLmUgKiBNYXRoLnNpbihwLnkpLCAtIDAuNSAqIHRoaXMuZSkpIC0gSEFMRl9QSTtcbiAgICBpZiAoTWF0aC5hYnMobGF0IC0gcC55KSA8IERFTF9UT0wpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBwLnkgPSBsYXQ7XG4gIH1cbiAgLyogY29udmVyZ2VuY2UgZmFpbGVkICovXG4gIGlmICghaSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHAueCA9IGxvbjtcbiAgcC55ID0gbGF0O1xuICByZXR1cm4gcDtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiZ2F1c3NcIl07XG4iLCJ2YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIGFzaW56ID0gcmVxdWlyZSgnLi4vY29tbW9uL2FzaW56Jyk7XG5cbi8qXG4gIHJlZmVyZW5jZTpcbiAgICBXb2xmcmFtIE1hdGh3b3JsZCBcIkdub21vbmljIFByb2plY3Rpb25cIlxuICAgIGh0dHA6Ly9tYXRod29ybGQud29sZnJhbS5jb20vR25vbW9uaWNQcm9qZWN0aW9uLmh0bWxcbiAgICBBY2Nlc3NlZDogMTJ0aCBOb3ZlbWJlciAyMDA5XG4gICovXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICAvKiBQbGFjZSBwYXJhbWV0ZXJzIGluIHN0YXRpYyBzdG9yYWdlIGZvciBjb21tb24gdXNlXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgdGhpcy5zaW5fcDE0ID0gTWF0aC5zaW4odGhpcy5sYXQwKTtcbiAgdGhpcy5jb3NfcDE0ID0gTWF0aC5jb3ModGhpcy5sYXQwKTtcbiAgLy8gQXBwcm94aW1hdGlvbiBmb3IgcHJvamVjdGluZyBwb2ludHMgdG8gdGhlIGhvcml6b24gKGluZmluaXR5KVxuICB0aGlzLmluZmluaXR5X2Rpc3QgPSAxMDAwICogdGhpcy5hO1xuICB0aGlzLnJjID0gMTtcbn07XG5cblxuLyogR25vbW9uaWMgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHNpbnBoaSwgY29zcGhpOyAvKiBzaW4gYW5kIGNvcyB2YWx1ZSAgICAgICAgKi9cbiAgdmFyIGRsb247IC8qIGRlbHRhIGxvbmdpdHVkZSB2YWx1ZSAgICAgICovXG4gIHZhciBjb3Nsb247IC8qIGNvcyBvZiBsb25naXR1ZGUgICAgICAgICovXG4gIHZhciBrc3A7IC8qIHNjYWxlIGZhY3RvciAgICAgICAgICAqL1xuICB2YXIgZztcbiAgdmFyIHgsIHk7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIGRsb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuXG4gIHNpbnBoaSA9IE1hdGguc2luKGxhdCk7XG4gIGNvc3BoaSA9IE1hdGguY29zKGxhdCk7XG5cbiAgY29zbG9uID0gTWF0aC5jb3MoZGxvbik7XG4gIGcgPSB0aGlzLnNpbl9wMTQgKiBzaW5waGkgKyB0aGlzLmNvc19wMTQgKiBjb3NwaGkgKiBjb3Nsb247XG4gIGtzcCA9IDE7XG4gIGlmICgoZyA+IDApIHx8IChNYXRoLmFicyhnKSA8PSBFUFNMTikpIHtcbiAgICB4ID0gdGhpcy54MCArIHRoaXMuYSAqIGtzcCAqIGNvc3BoaSAqIE1hdGguc2luKGRsb24pIC8gZztcbiAgICB5ID0gdGhpcy55MCArIHRoaXMuYSAqIGtzcCAqICh0aGlzLmNvc19wMTQgKiBzaW5waGkgLSB0aGlzLnNpbl9wMTQgKiBjb3NwaGkgKiBjb3Nsb24pIC8gZztcbiAgfVxuICBlbHNlIHtcblxuICAgIC8vIFBvaW50IGlzIGluIHRoZSBvcHBvc2luZyBoZW1pc3BoZXJlIGFuZCBpcyB1bnByb2plY3RhYmxlXG4gICAgLy8gV2Ugc3RpbGwgbmVlZCB0byByZXR1cm4gYSByZWFzb25hYmxlIHBvaW50LCBzbyB3ZSBwcm9qZWN0IFxuICAgIC8vIHRvIGluZmluaXR5LCBvbiBhIGJlYXJpbmcgXG4gICAgLy8gZXF1aXZhbGVudCB0byB0aGUgbm9ydGhlcm4gaGVtaXNwaGVyZSBlcXVpdmFsZW50XG4gICAgLy8gVGhpcyBpcyBhIHJlYXNvbmFibGUgYXBwcm94aW1hdGlvbiBmb3Igc2hvcnQgc2hhcGVzIGFuZCBsaW5lcyB0aGF0IFxuICAgIC8vIHN0cmFkZGxlIHRoZSBob3Jpem9uLlxuXG4gICAgeCA9IHRoaXMueDAgKyB0aGlzLmluZmluaXR5X2Rpc3QgKiBjb3NwaGkgKiBNYXRoLnNpbihkbG9uKTtcbiAgICB5ID0gdGhpcy55MCArIHRoaXMuaW5maW5pdHlfZGlzdCAqICh0aGlzLmNvc19wMTQgKiBzaW5waGkgLSB0aGlzLnNpbl9wMTQgKiBjb3NwaGkgKiBjb3Nsb24pO1xuXG4gIH1cbiAgcC54ID0geDtcbiAgcC55ID0geTtcbiAgcmV0dXJuIHA7XG59O1xuXG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHJoOyAvKiBSaG8gKi9cbiAgdmFyIHNpbmMsIGNvc2M7XG4gIHZhciBjO1xuICB2YXIgbG9uLCBsYXQ7XG5cbiAgLyogSW52ZXJzZSBlcXVhdGlvbnNcbiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgcC54ID0gKHAueCAtIHRoaXMueDApIC8gdGhpcy5hO1xuICBwLnkgPSAocC55IC0gdGhpcy55MCkgLyB0aGlzLmE7XG5cbiAgcC54IC89IHRoaXMuazA7XG4gIHAueSAvPSB0aGlzLmswO1xuXG4gIGlmICgocmggPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KSkpIHtcbiAgICBjID0gTWF0aC5hdGFuMihyaCwgdGhpcy5yYyk7XG4gICAgc2luYyA9IE1hdGguc2luKGMpO1xuICAgIGNvc2MgPSBNYXRoLmNvcyhjKTtcblxuICAgIGxhdCA9IGFzaW56KGNvc2MgKiB0aGlzLnNpbl9wMTQgKyAocC55ICogc2luYyAqIHRoaXMuY29zX3AxNCkgLyByaCk7XG4gICAgbG9uID0gTWF0aC5hdGFuMihwLnggKiBzaW5jLCByaCAqIHRoaXMuY29zX3AxNCAqIGNvc2MgLSBwLnkgKiB0aGlzLnNpbl9wMTQgKiBzaW5jKTtcbiAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBsb24pO1xuICB9XG4gIGVsc2Uge1xuICAgIGxhdCA9IHRoaXMucGhpYzA7XG4gICAgbG9uID0gMDtcbiAgfVxuXG4gIHAueCA9IGxvbjtcbiAgcC55ID0gbGF0O1xuICByZXR1cm4gcDtcbn07XG5leHBvcnRzLm5hbWVzID0gW1wiZ25vbVwiXTtcbiIsInZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLmEgPSA2Mzc3Mzk3LjE1NTtcbiAgdGhpcy5lcyA9IDAuMDA2Njc0MzcyMjMwNjE0O1xuICB0aGlzLmUgPSBNYXRoLnNxcnQodGhpcy5lcyk7XG4gIGlmICghdGhpcy5sYXQwKSB7XG4gICAgdGhpcy5sYXQwID0gMC44NjM5Mzc5Nzk3MzcxOTM7XG4gIH1cbiAgaWYgKCF0aGlzLmxvbmcwKSB7XG4gICAgdGhpcy5sb25nMCA9IDAuNzQxNzY0OTMyMDk3NTkwMSAtIDAuMzA4MzQxNTAxMTg1NjY1O1xuICB9XG4gIC8qIGlmIHNjYWxlIG5vdCBzZXQgZGVmYXVsdCB0byAwLjk5OTkgKi9cbiAgaWYgKCF0aGlzLmswKSB7XG4gICAgdGhpcy5rMCA9IDAuOTk5OTtcbiAgfVxuICB0aGlzLnM0NSA9IDAuNzg1Mzk4MTYzMzk3NDQ4OyAvKiA0NSAqL1xuICB0aGlzLnM5MCA9IDIgKiB0aGlzLnM0NTtcbiAgdGhpcy5maTAgPSB0aGlzLmxhdDA7XG4gIHRoaXMuZTIgPSB0aGlzLmVzO1xuICB0aGlzLmUgPSBNYXRoLnNxcnQodGhpcy5lMik7XG4gIHRoaXMuYWxmYSA9IE1hdGguc3FydCgxICsgKHRoaXMuZTIgKiBNYXRoLnBvdyhNYXRoLmNvcyh0aGlzLmZpMCksIDQpKSAvICgxIC0gdGhpcy5lMikpO1xuICB0aGlzLnVxID0gMS4wNDIxNjg1NjM4MDQ3NDtcbiAgdGhpcy51MCA9IE1hdGguYXNpbihNYXRoLnNpbih0aGlzLmZpMCkgLyB0aGlzLmFsZmEpO1xuICB0aGlzLmcgPSBNYXRoLnBvdygoMSArIHRoaXMuZSAqIE1hdGguc2luKHRoaXMuZmkwKSkgLyAoMSAtIHRoaXMuZSAqIE1hdGguc2luKHRoaXMuZmkwKSksIHRoaXMuYWxmYSAqIHRoaXMuZSAvIDIpO1xuICB0aGlzLmsgPSBNYXRoLnRhbih0aGlzLnUwIC8gMiArIHRoaXMuczQ1KSAvIE1hdGgucG93KE1hdGgudGFuKHRoaXMuZmkwIC8gMiArIHRoaXMuczQ1KSwgdGhpcy5hbGZhKSAqIHRoaXMuZztcbiAgdGhpcy5rMSA9IHRoaXMuazA7XG4gIHRoaXMubjAgPSB0aGlzLmEgKiBNYXRoLnNxcnQoMSAtIHRoaXMuZTIpIC8gKDEgLSB0aGlzLmUyICogTWF0aC5wb3coTWF0aC5zaW4odGhpcy5maTApLCAyKSk7XG4gIHRoaXMuczAgPSAxLjM3MDA4MzQ2MjgxNTU1O1xuICB0aGlzLm4gPSBNYXRoLnNpbih0aGlzLnMwKTtcbiAgdGhpcy5ybzAgPSB0aGlzLmsxICogdGhpcy5uMCAvIE1hdGgudGFuKHRoaXMuczApO1xuICB0aGlzLmFkID0gdGhpcy5zOTAgLSB0aGlzLnVxO1xufTtcblxuLyogZWxsaXBzb2lkICovXG4vKiBjYWxjdWxhdGUgeHkgZnJvbSBsYXQvbG9uICovXG4vKiBDb25zdGFudHMsIGlkZW50aWNhbCB0byBpbnZlcnNlIHRyYW5zZm9ybSBmdW5jdGlvbiAqL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuICB2YXIgZ2ZpLCB1LCBkZWx0YXYsIHMsIGQsIGVwcywgcm87XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciBkZWx0YV9sb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICAvKiBUcmFuc2Zvcm1hdGlvbiAqL1xuICBnZmkgPSBNYXRoLnBvdygoKDEgKyB0aGlzLmUgKiBNYXRoLnNpbihsYXQpKSAvICgxIC0gdGhpcy5lICogTWF0aC5zaW4obGF0KSkpLCAodGhpcy5hbGZhICogdGhpcy5lIC8gMikpO1xuICB1ID0gMiAqIChNYXRoLmF0YW4odGhpcy5rICogTWF0aC5wb3coTWF0aC50YW4obGF0IC8gMiArIHRoaXMuczQ1KSwgdGhpcy5hbGZhKSAvIGdmaSkgLSB0aGlzLnM0NSk7XG4gIGRlbHRhdiA9IC1kZWx0YV9sb24gKiB0aGlzLmFsZmE7XG4gIHMgPSBNYXRoLmFzaW4oTWF0aC5jb3ModGhpcy5hZCkgKiBNYXRoLnNpbih1KSArIE1hdGguc2luKHRoaXMuYWQpICogTWF0aC5jb3ModSkgKiBNYXRoLmNvcyhkZWx0YXYpKTtcbiAgZCA9IE1hdGguYXNpbihNYXRoLmNvcyh1KSAqIE1hdGguc2luKGRlbHRhdikgLyBNYXRoLmNvcyhzKSk7XG4gIGVwcyA9IHRoaXMubiAqIGQ7XG4gIHJvID0gdGhpcy5ybzAgKiBNYXRoLnBvdyhNYXRoLnRhbih0aGlzLnMwIC8gMiArIHRoaXMuczQ1KSwgdGhpcy5uKSAvIE1hdGgucG93KE1hdGgudGFuKHMgLyAyICsgdGhpcy5zNDUpLCB0aGlzLm4pO1xuICBwLnkgPSBybyAqIE1hdGguY29zKGVwcykgLyAxO1xuICBwLnggPSBybyAqIE1hdGguc2luKGVwcykgLyAxO1xuXG4gIGlmICghdGhpcy5jemVjaCkge1xuICAgIHAueSAqPSAtMTtcbiAgICBwLnggKj0gLTE7XG4gIH1cbiAgcmV0dXJuIChwKTtcbn07XG5cbi8qIGNhbGN1bGF0ZSBsYXQvbG9uIGZyb20geHkgKi9cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHUsIGRlbHRhdiwgcywgZCwgZXBzLCBybywgZmkxO1xuICB2YXIgb2s7XG5cbiAgLyogVHJhbnNmb3JtYXRpb24gKi9cbiAgLyogcmV2ZXJ0IHksIHgqL1xuICB2YXIgdG1wID0gcC54O1xuICBwLnggPSBwLnk7XG4gIHAueSA9IHRtcDtcbiAgaWYgKCF0aGlzLmN6ZWNoKSB7XG4gICAgcC55ICo9IC0xO1xuICAgIHAueCAqPSAtMTtcbiAgfVxuICBybyA9IE1hdGguc3FydChwLnggKiBwLnggKyBwLnkgKiBwLnkpO1xuICBlcHMgPSBNYXRoLmF0YW4yKHAueSwgcC54KTtcbiAgZCA9IGVwcyAvIE1hdGguc2luKHRoaXMuczApO1xuICBzID0gMiAqIChNYXRoLmF0YW4oTWF0aC5wb3codGhpcy5ybzAgLyBybywgMSAvIHRoaXMubikgKiBNYXRoLnRhbih0aGlzLnMwIC8gMiArIHRoaXMuczQ1KSkgLSB0aGlzLnM0NSk7XG4gIHUgPSBNYXRoLmFzaW4oTWF0aC5jb3ModGhpcy5hZCkgKiBNYXRoLnNpbihzKSAtIE1hdGguc2luKHRoaXMuYWQpICogTWF0aC5jb3MocykgKiBNYXRoLmNvcyhkKSk7XG4gIGRlbHRhdiA9IE1hdGguYXNpbihNYXRoLmNvcyhzKSAqIE1hdGguc2luKGQpIC8gTWF0aC5jb3ModSkpO1xuICBwLnggPSB0aGlzLmxvbmcwIC0gZGVsdGF2IC8gdGhpcy5hbGZhO1xuICBmaTEgPSB1O1xuICBvayA9IDA7XG4gIHZhciBpdGVyID0gMDtcbiAgZG8ge1xuICAgIHAueSA9IDIgKiAoTWF0aC5hdGFuKE1hdGgucG93KHRoaXMuaywgLSAxIC8gdGhpcy5hbGZhKSAqIE1hdGgucG93KE1hdGgudGFuKHUgLyAyICsgdGhpcy5zNDUpLCAxIC8gdGhpcy5hbGZhKSAqIE1hdGgucG93KCgxICsgdGhpcy5lICogTWF0aC5zaW4oZmkxKSkgLyAoMSAtIHRoaXMuZSAqIE1hdGguc2luKGZpMSkpLCB0aGlzLmUgLyAyKSkgLSB0aGlzLnM0NSk7XG4gICAgaWYgKE1hdGguYWJzKGZpMSAtIHAueSkgPCAwLjAwMDAwMDAwMDEpIHtcbiAgICAgIG9rID0gMTtcbiAgICB9XG4gICAgZmkxID0gcC55O1xuICAgIGl0ZXIgKz0gMTtcbiAgfSB3aGlsZSAob2sgPT09IDAgJiYgaXRlciA8IDE1KTtcbiAgaWYgKGl0ZXIgPj0gMTUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHJldHVybiAocCk7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIktyb3Zha1wiLCBcImtyb3Zha1wiXTtcbiIsInZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIEZPUlRQSSA9IE1hdGguUEkvNDtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG52YXIgcXNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vcXNmbnonKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbi8qXG4gIHJlZmVyZW5jZVxuICAgIFwiTmV3IEVxdWFsLUFyZWEgTWFwIFByb2plY3Rpb25zIGZvciBOb25jaXJjdWxhciBSZWdpb25zXCIsIEpvaG4gUC4gU255ZGVyLFxuICAgIFRoZSBBbWVyaWNhbiBDYXJ0b2dyYXBoZXIsIFZvbCAxNSwgTm8uIDQsIE9jdG9iZXIgMTk4OCwgcHAuIDM0MS0zNTUuXG4gICovXG5cbmV4cG9ydHMuU19QT0xFID0gMTtcbmV4cG9ydHMuTl9QT0xFID0gMjtcbmV4cG9ydHMuRVFVSVQgPSAzO1xuZXhwb3J0cy5PQkxJUSA9IDQ7XG5cblxuLyogSW5pdGlhbGl6ZSB0aGUgTGFtYmVydCBBemltdXRoYWwgRXF1YWwgQXJlYSBwcm9qZWN0aW9uXG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHQgPSBNYXRoLmFicyh0aGlzLmxhdDApO1xuICBpZiAoTWF0aC5hYnModCAtIEhBTEZfUEkpIDwgRVBTTE4pIHtcbiAgICB0aGlzLm1vZGUgPSB0aGlzLmxhdDAgPCAwID8gdGhpcy5TX1BPTEUgOiB0aGlzLk5fUE9MRTtcbiAgfVxuICBlbHNlIGlmIChNYXRoLmFicyh0KSA8IEVQU0xOKSB7XG4gICAgdGhpcy5tb2RlID0gdGhpcy5FUVVJVDtcbiAgfVxuICBlbHNlIHtcbiAgICB0aGlzLm1vZGUgPSB0aGlzLk9CTElRO1xuICB9XG4gIGlmICh0aGlzLmVzID4gMCkge1xuICAgIHZhciBzaW5waGk7XG5cbiAgICB0aGlzLnFwID0gcXNmbnoodGhpcy5lLCAxKTtcbiAgICB0aGlzLm1tZiA9IDAuNSAvICgxIC0gdGhpcy5lcyk7XG4gICAgdGhpcy5hcGEgPSB0aGlzLmF1dGhzZXQodGhpcy5lcyk7XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICBjYXNlIHRoaXMuTl9QT0xFOlxuICAgICAgdGhpcy5kZCA9IDE7XG4gICAgICBicmVhaztcbiAgICBjYXNlIHRoaXMuU19QT0xFOlxuICAgICAgdGhpcy5kZCA9IDE7XG4gICAgICBicmVhaztcbiAgICBjYXNlIHRoaXMuRVFVSVQ6XG4gICAgICB0aGlzLnJxID0gTWF0aC5zcXJ0KDAuNSAqIHRoaXMucXApO1xuICAgICAgdGhpcy5kZCA9IDEgLyB0aGlzLnJxO1xuICAgICAgdGhpcy54bWYgPSAxO1xuICAgICAgdGhpcy55bWYgPSAwLjUgKiB0aGlzLnFwO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLk9CTElROlxuICAgICAgdGhpcy5ycSA9IE1hdGguc3FydCgwLjUgKiB0aGlzLnFwKTtcbiAgICAgIHNpbnBoaSA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gICAgICB0aGlzLnNpbmIxID0gcXNmbnoodGhpcy5lLCBzaW5waGkpIC8gdGhpcy5xcDtcbiAgICAgIHRoaXMuY29zYjEgPSBNYXRoLnNxcnQoMSAtIHRoaXMuc2luYjEgKiB0aGlzLnNpbmIxKTtcbiAgICAgIHRoaXMuZGQgPSBNYXRoLmNvcyh0aGlzLmxhdDApIC8gKE1hdGguc3FydCgxIC0gdGhpcy5lcyAqIHNpbnBoaSAqIHNpbnBoaSkgKiB0aGlzLnJxICogdGhpcy5jb3NiMSk7XG4gICAgICB0aGlzLnltZiA9ICh0aGlzLnhtZiA9IHRoaXMucnEpIC8gdGhpcy5kZDtcbiAgICAgIHRoaXMueG1mICo9IHRoaXMuZGQ7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gdGhpcy5PQkxJUSkge1xuICAgICAgdGhpcy5zaW5waDAgPSBNYXRoLnNpbih0aGlzLmxhdDApO1xuICAgICAgdGhpcy5jb3NwaDAgPSBNYXRoLmNvcyh0aGlzLmxhdDApO1xuICAgIH1cbiAgfVxufTtcblxuLyogTGFtYmVydCBBemltdXRoYWwgRXF1YWwgQXJlYSBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuXG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHZhciB4LCB5LCBjb3NsYW0sIHNpbmxhbSwgc2lucGhpLCBxLCBzaW5iLCBjb3NiLCBiLCBjb3NwaGk7XG4gIHZhciBsYW0gPSBwLng7XG4gIHZhciBwaGkgPSBwLnk7XG5cbiAgbGFtID0gYWRqdXN0X2xvbihsYW0gLSB0aGlzLmxvbmcwKTtcblxuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBzaW5waGkgPSBNYXRoLnNpbihwaGkpO1xuICAgIGNvc3BoaSA9IE1hdGguY29zKHBoaSk7XG4gICAgY29zbGFtID0gTWF0aC5jb3MobGFtKTtcbiAgICBpZiAodGhpcy5tb2RlID09PSB0aGlzLk9CTElRIHx8IHRoaXMubW9kZSA9PT0gdGhpcy5FUVVJVCkge1xuICAgICAgeSA9ICh0aGlzLm1vZGUgPT09IHRoaXMuRVFVSVQpID8gMSArIGNvc3BoaSAqIGNvc2xhbSA6IDEgKyB0aGlzLnNpbnBoMCAqIHNpbnBoaSArIHRoaXMuY29zcGgwICogY29zcGhpICogY29zbGFtO1xuICAgICAgaWYgKHkgPD0gRVBTTE4pIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG4gICAgICB5ID0gTWF0aC5zcXJ0KDIgLyB5KTtcbiAgICAgIHggPSB5ICogY29zcGhpICogTWF0aC5zaW4obGFtKTtcbiAgICAgIHkgKj0gKHRoaXMubW9kZSA9PT0gdGhpcy5FUVVJVCkgPyBzaW5waGkgOiB0aGlzLmNvc3BoMCAqIHNpbnBoaSAtIHRoaXMuc2lucGgwICogY29zcGhpICogY29zbGFtO1xuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuTl9QT0xFIHx8IHRoaXMubW9kZSA9PT0gdGhpcy5TX1BPTEUpIHtcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuTl9QT0xFKSB7XG4gICAgICAgIGNvc2xhbSA9IC1jb3NsYW07XG4gICAgICB9XG4gICAgICBpZiAoTWF0aC5hYnMocGhpICsgdGhpcy5waGkwKSA8IEVQU0xOKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgeSA9IEZPUlRQSSAtIHBoaSAqIDAuNTtcbiAgICAgIHkgPSAyICogKCh0aGlzLm1vZGUgPT09IHRoaXMuU19QT0xFKSA/IE1hdGguY29zKHkpIDogTWF0aC5zaW4oeSkpO1xuICAgICAgeCA9IHkgKiBNYXRoLnNpbihsYW0pO1xuICAgICAgeSAqPSBjb3NsYW07XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHNpbmIgPSAwO1xuICAgIGNvc2IgPSAwO1xuICAgIGIgPSAwO1xuICAgIGNvc2xhbSA9IE1hdGguY29zKGxhbSk7XG4gICAgc2lubGFtID0gTWF0aC5zaW4obGFtKTtcbiAgICBzaW5waGkgPSBNYXRoLnNpbihwaGkpO1xuICAgIHEgPSBxc2Zueih0aGlzLmUsIHNpbnBoaSk7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gdGhpcy5PQkxJUSB8fCB0aGlzLm1vZGUgPT09IHRoaXMuRVFVSVQpIHtcbiAgICAgIHNpbmIgPSBxIC8gdGhpcy5xcDtcbiAgICAgIGNvc2IgPSBNYXRoLnNxcnQoMSAtIHNpbmIgKiBzaW5iKTtcbiAgICB9XG4gICAgc3dpdGNoICh0aGlzLm1vZGUpIHtcbiAgICBjYXNlIHRoaXMuT0JMSVE6XG4gICAgICBiID0gMSArIHRoaXMuc2luYjEgKiBzaW5iICsgdGhpcy5jb3NiMSAqIGNvc2IgKiBjb3NsYW07XG4gICAgICBicmVhaztcbiAgICBjYXNlIHRoaXMuRVFVSVQ6XG4gICAgICBiID0gMSArIGNvc2IgKiBjb3NsYW07XG4gICAgICBicmVhaztcbiAgICBjYXNlIHRoaXMuTl9QT0xFOlxuICAgICAgYiA9IEhBTEZfUEkgKyBwaGk7XG4gICAgICBxID0gdGhpcy5xcCAtIHE7XG4gICAgICBicmVhaztcbiAgICBjYXNlIHRoaXMuU19QT0xFOlxuICAgICAgYiA9IHBoaSAtIEhBTEZfUEk7XG4gICAgICBxID0gdGhpcy5xcCArIHE7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgaWYgKE1hdGguYWJzKGIpIDwgRVBTTE4pIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzd2l0Y2ggKHRoaXMubW9kZSkge1xuICAgIGNhc2UgdGhpcy5PQkxJUTpcbiAgICBjYXNlIHRoaXMuRVFVSVQ6XG4gICAgICBiID0gTWF0aC5zcXJ0KDIgLyBiKTtcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuT0JMSVEpIHtcbiAgICAgICAgeSA9IHRoaXMueW1mICogYiAqICh0aGlzLmNvc2IxICogc2luYiAtIHRoaXMuc2luYjEgKiBjb3NiICogY29zbGFtKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICB5ID0gKGIgPSBNYXRoLnNxcnQoMiAvICgxICsgY29zYiAqIGNvc2xhbSkpKSAqIHNpbmIgKiB0aGlzLnltZjtcbiAgICAgIH1cbiAgICAgIHggPSB0aGlzLnhtZiAqIGIgKiBjb3NiICogc2lubGFtO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLk5fUE9MRTpcbiAgICBjYXNlIHRoaXMuU19QT0xFOlxuICAgICAgaWYgKHEgPj0gMCkge1xuICAgICAgICB4ID0gKGIgPSBNYXRoLnNxcnQocSkpICogc2lubGFtO1xuICAgICAgICB5ID0gY29zbGFtICogKCh0aGlzLm1vZGUgPT09IHRoaXMuU19QT0xFKSA/IGIgOiAtYik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgeCA9IHkgPSAwO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcC54ID0gdGhpcy5hICogeCArIHRoaXMueDA7XG4gIHAueSA9IHRoaXMuYSAqIHkgKyB0aGlzLnkwO1xuICByZXR1cm4gcDtcbn07XG5cbi8qIEludmVyc2UgZXF1YXRpb25zXG4gIC0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgcC54IC09IHRoaXMueDA7XG4gIHAueSAtPSB0aGlzLnkwO1xuICB2YXIgeCA9IHAueCAvIHRoaXMuYTtcbiAgdmFyIHkgPSBwLnkgLyB0aGlzLmE7XG4gIHZhciBsYW0sIHBoaSwgY0NlLCBzQ2UsIHEsIHJobywgYWI7XG5cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgdmFyIGNvc3ogPSAwLFxuICAgICAgcmgsIHNpbnogPSAwO1xuXG4gICAgcmggPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7XG4gICAgcGhpID0gcmggKiAwLjU7XG4gICAgaWYgKHBoaSA+IDEpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBwaGkgPSAyICogTWF0aC5hc2luKHBoaSk7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gdGhpcy5PQkxJUSB8fCB0aGlzLm1vZGUgPT09IHRoaXMuRVFVSVQpIHtcbiAgICAgIHNpbnogPSBNYXRoLnNpbihwaGkpO1xuICAgICAgY29zeiA9IE1hdGguY29zKHBoaSk7XG4gICAgfVxuICAgIHN3aXRjaCAodGhpcy5tb2RlKSB7XG4gICAgY2FzZSB0aGlzLkVRVUlUOlxuICAgICAgcGhpID0gKE1hdGguYWJzKHJoKSA8PSBFUFNMTikgPyAwIDogTWF0aC5hc2luKHkgKiBzaW56IC8gcmgpO1xuICAgICAgeCAqPSBzaW56O1xuICAgICAgeSA9IGNvc3ogKiByaDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgdGhpcy5PQkxJUTpcbiAgICAgIHBoaSA9IChNYXRoLmFicyhyaCkgPD0gRVBTTE4pID8gdGhpcy5waGkwIDogTWF0aC5hc2luKGNvc3ogKiB0aGlzLnNpbnBoMCArIHkgKiBzaW56ICogdGhpcy5jb3NwaDAgLyByaCk7XG4gICAgICB4ICo9IHNpbnogKiB0aGlzLmNvc3BoMDtcbiAgICAgIHkgPSAoY29zeiAtIE1hdGguc2luKHBoaSkgKiB0aGlzLnNpbnBoMCkgKiByaDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgdGhpcy5OX1BPTEU6XG4gICAgICB5ID0gLXk7XG4gICAgICBwaGkgPSBIQUxGX1BJIC0gcGhpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSB0aGlzLlNfUE9MRTpcbiAgICAgIHBoaSAtPSBIQUxGX1BJO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGxhbSA9ICh5ID09PSAwICYmICh0aGlzLm1vZGUgPT09IHRoaXMuRVFVSVQgfHwgdGhpcy5tb2RlID09PSB0aGlzLk9CTElRKSkgPyAwIDogTWF0aC5hdGFuMih4LCB5KTtcbiAgfVxuICBlbHNlIHtcbiAgICBhYiA9IDA7XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gdGhpcy5PQkxJUSB8fCB0aGlzLm1vZGUgPT09IHRoaXMuRVFVSVQpIHtcbiAgICAgIHggLz0gdGhpcy5kZDtcbiAgICAgIHkgKj0gdGhpcy5kZDtcbiAgICAgIHJobyA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICAgIGlmIChyaG8gPCBFUFNMTikge1xuICAgICAgICBwLnggPSAwO1xuICAgICAgICBwLnkgPSB0aGlzLnBoaTA7XG4gICAgICAgIHJldHVybiBwO1xuICAgICAgfVxuICAgICAgc0NlID0gMiAqIE1hdGguYXNpbigwLjUgKiByaG8gLyB0aGlzLnJxKTtcbiAgICAgIGNDZSA9IE1hdGguY29zKHNDZSk7XG4gICAgICB4ICo9IChzQ2UgPSBNYXRoLnNpbihzQ2UpKTtcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuT0JMSVEpIHtcbiAgICAgICAgYWIgPSBjQ2UgKiB0aGlzLnNpbmIxICsgeSAqIHNDZSAqIHRoaXMuY29zYjEgLyByaG87XG4gICAgICAgIHEgPSB0aGlzLnFwICogYWI7XG4gICAgICAgIHkgPSByaG8gKiB0aGlzLmNvc2IxICogY0NlIC0geSAqIHRoaXMuc2luYjEgKiBzQ2U7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgYWIgPSB5ICogc0NlIC8gcmhvO1xuICAgICAgICBxID0gdGhpcy5xcCAqIGFiO1xuICAgICAgICB5ID0gcmhvICogY0NlO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuTl9QT0xFIHx8IHRoaXMubW9kZSA9PT0gdGhpcy5TX1BPTEUpIHtcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09IHRoaXMuTl9QT0xFKSB7XG4gICAgICAgIHkgPSAteTtcbiAgICAgIH1cbiAgICAgIHEgPSAoeCAqIHggKyB5ICogeSk7XG4gICAgICBpZiAoIXEpIHtcbiAgICAgICAgcC54ID0gMDtcbiAgICAgICAgcC55ID0gdGhpcy5waGkwO1xuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH1cbiAgICAgIGFiID0gMSAtIHEgLyB0aGlzLnFwO1xuICAgICAgaWYgKHRoaXMubW9kZSA9PT0gdGhpcy5TX1BPTEUpIHtcbiAgICAgICAgYWIgPSAtYWI7XG4gICAgICB9XG4gICAgfVxuICAgIGxhbSA9IE1hdGguYXRhbjIoeCwgeSk7XG4gICAgcGhpID0gdGhpcy5hdXRobGF0KE1hdGguYXNpbihhYiksIHRoaXMuYXBhKTtcbiAgfVxuXG5cbiAgcC54ID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgbGFtKTtcbiAgcC55ID0gcGhpO1xuICByZXR1cm4gcDtcbn07XG5cbi8qIGRldGVybWluZSBsYXRpdHVkZSBmcm9tIGF1dGhhbGljIGxhdGl0dWRlICovXG5leHBvcnRzLlAwMCA9IDAuMzMzMzMzMzMzMzMzMzMzMzMzMzM7XG5leHBvcnRzLlAwMSA9IDAuMTcyMjIyMjIyMjIyMjIyMjIyMjI7XG5leHBvcnRzLlAwMiA9IDAuMTAyNTc5MzY1MDc5MzY1MDc5MzY7XG5leHBvcnRzLlAxMCA9IDAuMDYzODg4ODg4ODg4ODg4ODg4ODg7XG5leHBvcnRzLlAxMSA9IDAuMDY2NDAyMTE2NDAyMTE2NDAyMTE7XG5leHBvcnRzLlAyMCA9IDAuMDE2NDE1MDEyOTQyMTkxNTQ0NDM7XG5cbmV4cG9ydHMuYXV0aHNldCA9IGZ1bmN0aW9uKGVzKSB7XG4gIHZhciB0O1xuICB2YXIgQVBBID0gW107XG4gIEFQQVswXSA9IGVzICogdGhpcy5QMDA7XG4gIHQgPSBlcyAqIGVzO1xuICBBUEFbMF0gKz0gdCAqIHRoaXMuUDAxO1xuICBBUEFbMV0gPSB0ICogdGhpcy5QMTA7XG4gIHQgKj0gZXM7XG4gIEFQQVswXSArPSB0ICogdGhpcy5QMDI7XG4gIEFQQVsxXSArPSB0ICogdGhpcy5QMTE7XG4gIEFQQVsyXSA9IHQgKiB0aGlzLlAyMDtcbiAgcmV0dXJuIEFQQTtcbn07XG5cbmV4cG9ydHMuYXV0aGxhdCA9IGZ1bmN0aW9uKGJldGEsIEFQQSkge1xuICB2YXIgdCA9IGJldGEgKyBiZXRhO1xuICByZXR1cm4gKGJldGEgKyBBUEFbMF0gKiBNYXRoLnNpbih0KSArIEFQQVsxXSAqIE1hdGguc2luKHQgKyB0KSArIEFQQVsyXSAqIE1hdGguc2luKHQgKyB0ICsgdCkpO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJMYW1iZXJ0IEF6aW11dGhhbCBFcXVhbCBBcmVhXCIsIFwiTGFtYmVydF9BemltdXRoYWxfRXF1YWxfQXJlYVwiLCBcImxhZWFcIl07XG4iLCJ2YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIG1zZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL21zZm56Jyk7XG52YXIgdHNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vdHNmbnonKTtcbnZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIHNpZ24gPSByZXF1aXJlKCcuLi9jb21tb24vc2lnbicpO1xudmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIHBoaTJ6ID0gcmVxdWlyZSgnLi4vY29tbW9uL3BoaTJ6Jyk7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcblxuICAvLyBhcnJheSBvZjogIHJfbWFqLHJfbWluLGxhdDEsbGF0MixjX2xvbixjX2xhdCxmYWxzZV9lYXN0LGZhbHNlX25vcnRoXG4gIC8vZG91YmxlIGNfbGF0OyAgICAgICAgICAgICAgICAgICAvKiBjZW50ZXIgbGF0aXR1ZGUgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLy9kb3VibGUgY19sb247ICAgICAgICAgICAgICAgICAgIC8qIGNlbnRlciBsb25naXR1ZGUgICAgICAgICAgICAgICAgICAgICAqL1xuICAvL2RvdWJsZSBsYXQxOyAgICAgICAgICAgICAgICAgICAgLyogZmlyc3Qgc3RhbmRhcmQgcGFyYWxsZWwgICAgICAgICAgICAgICovXG4gIC8vZG91YmxlIGxhdDI7ICAgICAgICAgICAgICAgICAgICAvKiBzZWNvbmQgc3RhbmRhcmQgcGFyYWxsZWwgICAgICAgICAgICAgKi9cbiAgLy9kb3VibGUgcl9tYWo7ICAgICAgICAgICAgICAgICAgIC8qIG1ham9yIGF4aXMgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvL2RvdWJsZSByX21pbjsgICAgICAgICAgICAgICAgICAgLyogbWlub3IgYXhpcyAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4gIC8vZG91YmxlIGZhbHNlX2Vhc3Q7ICAgICAgICAgICAgICAvKiB4IG9mZnNldCBpbiBtZXRlcnMgICAgICAgICAgICAgICAgICAgKi9cbiAgLy9kb3VibGUgZmFsc2Vfbm9ydGg7ICAgICAgICAgICAgIC8qIHkgb2Zmc2V0IGluIG1ldGVycyAgICAgICAgICAgICAgICAgICAqL1xuXG4gIGlmICghdGhpcy5sYXQyKSB7XG4gICAgdGhpcy5sYXQyID0gdGhpcy5sYXQxO1xuICB9IC8vaWYgbGF0MiBpcyBub3QgZGVmaW5lZFxuICBpZiAoIXRoaXMuazApIHtcbiAgICB0aGlzLmswID0gMTtcbiAgfVxuICB0aGlzLngwID0gdGhpcy54MCB8fCAwO1xuICB0aGlzLnkwID0gdGhpcy55MCB8fCAwO1xuICAvLyBTdGFuZGFyZCBQYXJhbGxlbHMgY2Fubm90IGJlIGVxdWFsIGFuZCBvbiBvcHBvc2l0ZSBzaWRlcyBvZiB0aGUgZXF1YXRvclxuICBpZiAoTWF0aC5hYnModGhpcy5sYXQxICsgdGhpcy5sYXQyKSA8IEVQU0xOKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgdmFyIHRlbXAgPSB0aGlzLmIgLyB0aGlzLmE7XG4gIHRoaXMuZSA9IE1hdGguc3FydCgxIC0gdGVtcCAqIHRlbXApO1xuXG4gIHZhciBzaW4xID0gTWF0aC5zaW4odGhpcy5sYXQxKTtcbiAgdmFyIGNvczEgPSBNYXRoLmNvcyh0aGlzLmxhdDEpO1xuICB2YXIgbXMxID0gbXNmbnoodGhpcy5lLCBzaW4xLCBjb3MxKTtcbiAgdmFyIHRzMSA9IHRzZm56KHRoaXMuZSwgdGhpcy5sYXQxLCBzaW4xKTtcblxuICB2YXIgc2luMiA9IE1hdGguc2luKHRoaXMubGF0Mik7XG4gIHZhciBjb3MyID0gTWF0aC5jb3ModGhpcy5sYXQyKTtcbiAgdmFyIG1zMiA9IG1zZm56KHRoaXMuZSwgc2luMiwgY29zMik7XG4gIHZhciB0czIgPSB0c2Zueih0aGlzLmUsIHRoaXMubGF0Miwgc2luMik7XG5cbiAgdmFyIHRzMCA9IHRzZm56KHRoaXMuZSwgdGhpcy5sYXQwLCBNYXRoLnNpbih0aGlzLmxhdDApKTtcblxuICBpZiAoTWF0aC5hYnModGhpcy5sYXQxIC0gdGhpcy5sYXQyKSA+IEVQU0xOKSB7XG4gICAgdGhpcy5ucyA9IE1hdGgubG9nKG1zMSAvIG1zMikgLyBNYXRoLmxvZyh0czEgLyB0czIpO1xuICB9XG4gIGVsc2Uge1xuICAgIHRoaXMubnMgPSBzaW4xO1xuICB9XG4gIGlmIChpc05hTih0aGlzLm5zKSkge1xuICAgIHRoaXMubnMgPSBzaW4xO1xuICB9XG4gIHRoaXMuZjAgPSBtczEgLyAodGhpcy5ucyAqIE1hdGgucG93KHRzMSwgdGhpcy5ucykpO1xuICB0aGlzLnJoID0gdGhpcy5hICogdGhpcy5mMCAqIE1hdGgucG93KHRzMCwgdGhpcy5ucyk7XG4gIGlmICghdGhpcy50aXRsZSkge1xuICAgIHRoaXMudGl0bGUgPSBcIkxhbWJlcnQgQ29uZm9ybWFsIENvbmljXCI7XG4gIH1cbn07XG5cblxuLy8gTGFtYmVydCBDb25mb3JtYWwgY29uaWMgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuXG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG5cbiAgLy8gc2luZ3VsYXIgY2FzZXMgOlxuICBpZiAoTWF0aC5hYnMoMiAqIE1hdGguYWJzKGxhdCkgLSBNYXRoLlBJKSA8PSBFUFNMTikge1xuICAgIGxhdCA9IHNpZ24obGF0KSAqIChIQUxGX1BJIC0gMiAqIEVQU0xOKTtcbiAgfVxuXG4gIHZhciBjb24gPSBNYXRoLmFicyhNYXRoLmFicyhsYXQpIC0gSEFMRl9QSSk7XG4gIHZhciB0cywgcmgxO1xuICBpZiAoY29uID4gRVBTTE4pIHtcbiAgICB0cyA9IHRzZm56KHRoaXMuZSwgbGF0LCBNYXRoLnNpbihsYXQpKTtcbiAgICByaDEgPSB0aGlzLmEgKiB0aGlzLmYwICogTWF0aC5wb3codHMsIHRoaXMubnMpO1xuICB9XG4gIGVsc2Uge1xuICAgIGNvbiA9IGxhdCAqIHRoaXMubnM7XG4gICAgaWYgKGNvbiA8PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmgxID0gMDtcbiAgfVxuICB2YXIgdGhldGEgPSB0aGlzLm5zICogYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgcC54ID0gdGhpcy5rMCAqIChyaDEgKiBNYXRoLnNpbih0aGV0YSkpICsgdGhpcy54MDtcbiAgcC55ID0gdGhpcy5rMCAqICh0aGlzLnJoIC0gcmgxICogTWF0aC5jb3ModGhldGEpKSArIHRoaXMueTA7XG5cbiAgcmV0dXJuIHA7XG59O1xuXG4vLyBMYW1iZXJ0IENvbmZvcm1hbCBDb25pYyBpbnZlcnNlIGVxdWF0aW9ucy0tbWFwcGluZyB4LHkgdG8gbGF0L2xvbmdcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG5cbiAgdmFyIHJoMSwgY29uLCB0cztcbiAgdmFyIGxhdCwgbG9uO1xuICB2YXIgeCA9IChwLnggLSB0aGlzLngwKSAvIHRoaXMuazA7XG4gIHZhciB5ID0gKHRoaXMucmggLSAocC55IC0gdGhpcy55MCkgLyB0aGlzLmswKTtcbiAgaWYgKHRoaXMubnMgPiAwKSB7XG4gICAgcmgxID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xuICAgIGNvbiA9IDE7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmgxID0gLU1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICBjb24gPSAtMTtcbiAgfVxuICB2YXIgdGhldGEgPSAwO1xuICBpZiAocmgxICE9PSAwKSB7XG4gICAgdGhldGEgPSBNYXRoLmF0YW4yKChjb24gKiB4KSwgKGNvbiAqIHkpKTtcbiAgfVxuICBpZiAoKHJoMSAhPT0gMCkgfHwgKHRoaXMubnMgPiAwKSkge1xuICAgIGNvbiA9IDEgLyB0aGlzLm5zO1xuICAgIHRzID0gTWF0aC5wb3coKHJoMSAvICh0aGlzLmEgKiB0aGlzLmYwKSksIGNvbik7XG4gICAgbGF0ID0gcGhpMnoodGhpcy5lLCB0cyk7XG4gICAgaWYgKGxhdCA9PT0gLTk5OTkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBsYXQgPSAtSEFMRl9QSTtcbiAgfVxuICBsb24gPSBhZGp1c3RfbG9uKHRoZXRhIC8gdGhpcy5ucyArIHRoaXMubG9uZzApO1xuXG4gIHAueCA9IGxvbjtcbiAgcC55ID0gbGF0O1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMubmFtZXMgPSBbXCJMYW1iZXJ0IFRhbmdlbnRpYWwgQ29uZm9ybWFsIENvbmljIFByb2plY3Rpb25cIiwgXCJMYW1iZXJ0X0NvbmZvcm1hbF9Db25pY1wiLCBcIkxhbWJlcnRfQ29uZm9ybWFsX0NvbmljXzJTUFwiLCBcImxjY1wiXTtcbiIsImV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAvL25vLW9wIGZvciBsb25nbGF0XG59O1xuXG5mdW5jdGlvbiBpZGVudGl0eShwdCkge1xuICByZXR1cm4gcHQ7XG59XG5leHBvcnRzLmZvcndhcmQgPSBpZGVudGl0eTtcbmV4cG9ydHMuaW52ZXJzZSA9IGlkZW50aXR5O1xuZXhwb3J0cy5uYW1lcyA9IFtcImxvbmdsYXRcIiwgXCJpZGVudGl0eVwiXTtcbiIsInZhciBtc2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tc2ZueicpO1xudmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIFIyRCA9IDU3LjI5NTc3OTUxMzA4MjMyMDg4O1xudmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIEZPUlRQSSA9IE1hdGguUEkvNDtcbnZhciB0c2ZueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi90c2ZueicpO1xudmFyIHBoaTJ6ID0gcmVxdWlyZSgnLi4vY29tbW9uL3BoaTJ6Jyk7XG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIGNvbiA9IHRoaXMuYiAvIHRoaXMuYTtcbiAgdGhpcy5lcyA9IDEgLSBjb24gKiBjb247XG4gIGlmKCEoJ3gwJyBpbiB0aGlzKSl7XG4gICAgdGhpcy54MCA9IDA7XG4gIH1cbiAgaWYoISgneTAnIGluIHRoaXMpKXtcbiAgICB0aGlzLnkwID0gMDtcbiAgfVxuICB0aGlzLmUgPSBNYXRoLnNxcnQodGhpcy5lcyk7XG4gIGlmICh0aGlzLmxhdF90cykge1xuICAgIGlmICh0aGlzLnNwaGVyZSkge1xuICAgICAgdGhpcy5rMCA9IE1hdGguY29zKHRoaXMubGF0X3RzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmswID0gbXNmbnoodGhpcy5lLCBNYXRoLnNpbih0aGlzLmxhdF90cyksIE1hdGguY29zKHRoaXMubGF0X3RzKSk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGlmICghdGhpcy5rMCkge1xuICAgICAgaWYgKHRoaXMuaykge1xuICAgICAgICB0aGlzLmswID0gdGhpcy5rO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuazAgPSAxO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyogTWVyY2F0b3IgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuICAvLyBjb252ZXJ0IHRvIHJhZGlhbnNcbiAgaWYgKGxhdCAqIFIyRCA+IDkwICYmIGxhdCAqIFIyRCA8IC05MCAmJiBsb24gKiBSMkQgPiAxODAgJiYgbG9uICogUjJEIDwgLTE4MCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIHgsIHk7XG4gIGlmIChNYXRoLmFicyhNYXRoLmFicyhsYXQpIC0gSEFMRl9QSSkgPD0gRVBTTE4pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBlbHNlIHtcbiAgICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICAgIHggPSB0aGlzLngwICsgdGhpcy5hICogdGhpcy5rMCAqIGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gICAgICB5ID0gdGhpcy55MCArIHRoaXMuYSAqIHRoaXMuazAgKiBNYXRoLmxvZyhNYXRoLnRhbihGT1JUUEkgKyAwLjUgKiBsYXQpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2YXIgc2lucGhpID0gTWF0aC5zaW4obGF0KTtcbiAgICAgIHZhciB0cyA9IHRzZm56KHRoaXMuZSwgbGF0LCBzaW5waGkpO1xuICAgICAgeCA9IHRoaXMueDAgKyB0aGlzLmEgKiB0aGlzLmswICogYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgICAgIHkgPSB0aGlzLnkwIC0gdGhpcy5hICogdGhpcy5rMCAqIE1hdGgubG9nKHRzKTtcbiAgICB9XG4gICAgcC54ID0geDtcbiAgICBwLnkgPSB5O1xuICAgIHJldHVybiBwO1xuICB9XG59O1xuXG5cbi8qIE1lcmNhdG9yIGludmVyc2UgZXF1YXRpb25zLS1tYXBwaW5nIHgseSB0byBsYXQvbG9uZ1xuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG5cbiAgdmFyIHggPSBwLnggLSB0aGlzLngwO1xuICB2YXIgeSA9IHAueSAtIHRoaXMueTA7XG4gIHZhciBsb24sIGxhdDtcblxuICBpZiAodGhpcy5zcGhlcmUpIHtcbiAgICBsYXQgPSBIQUxGX1BJIC0gMiAqIE1hdGguYXRhbihNYXRoLmV4cCgteSAvICh0aGlzLmEgKiB0aGlzLmswKSkpO1xuICB9XG4gIGVsc2Uge1xuICAgIHZhciB0cyA9IE1hdGguZXhwKC15IC8gKHRoaXMuYSAqIHRoaXMuazApKTtcbiAgICBsYXQgPSBwaGkyeih0aGlzLmUsIHRzKTtcbiAgICBpZiAobGF0ID09PSAtOTk5OSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG4gIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIHggLyAodGhpcy5hICogdGhpcy5rMCkpO1xuXG4gIHAueCA9IGxvbjtcbiAgcC55ID0gbGF0O1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMubmFtZXMgPSBbXCJNZXJjYXRvclwiLCBcIlBvcHVsYXIgVmlzdWFsaXNhdGlvbiBQc2V1ZG8gTWVyY2F0b3JcIiwgXCJNZXJjYXRvcl8xU1BcIiwgXCJNZXJjYXRvcl9BdXhpbGlhcnlfU3BoZXJlXCIsIFwibWVyY1wiXTtcbiIsInZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbi8qXG4gIHJlZmVyZW5jZVxuICAgIFwiTmV3IEVxdWFsLUFyZWEgTWFwIFByb2plY3Rpb25zIGZvciBOb25jaXJjdWxhciBSZWdpb25zXCIsIEpvaG4gUC4gU255ZGVyLFxuICAgIFRoZSBBbWVyaWNhbiBDYXJ0b2dyYXBoZXIsIFZvbCAxNSwgTm8uIDQsIE9jdG9iZXIgMTk4OCwgcHAuIDM0MS0zNTUuXG4gICovXG5cblxuLyogSW5pdGlhbGl6ZSB0aGUgTWlsbGVyIEN5bGluZHJpY2FsIHByb2plY3Rpb25cbiAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgLy9uby1vcFxufTtcblxuXG4vKiBNaWxsZXIgQ3lsaW5kcmljYWwgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcbiAgLyogRm9yd2FyZCBlcXVhdGlvbnNcbiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgdmFyIGRsb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuICB2YXIgeCA9IHRoaXMueDAgKyB0aGlzLmEgKiBkbG9uO1xuICB2YXIgeSA9IHRoaXMueTAgKyB0aGlzLmEgKiBNYXRoLmxvZyhNYXRoLnRhbigoTWF0aC5QSSAvIDQpICsgKGxhdCAvIDIuNSkpKSAqIDEuMjU7XG5cbiAgcC54ID0geDtcbiAgcC55ID0geTtcbiAgcmV0dXJuIHA7XG59O1xuXG4vKiBNaWxsZXIgQ3lsaW5kcmljYWwgaW52ZXJzZSBlcXVhdGlvbnMtLW1hcHBpbmcgeCx5IHRvIGxhdC9sb25nXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgcC54IC09IHRoaXMueDA7XG4gIHAueSAtPSB0aGlzLnkwO1xuXG4gIHZhciBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBwLnggLyB0aGlzLmEpO1xuICB2YXIgbGF0ID0gMi41ICogKE1hdGguYXRhbihNYXRoLmV4cCgwLjggKiBwLnkgLyB0aGlzLmEpKSAtIE1hdGguUEkgLyA0KTtcblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIk1pbGxlcl9DeWxpbmRyaWNhbFwiLCBcIm1pbGxcIl07XG4iLCJ2YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7fTtcblxuLyogTW9sbHdlaWRlIGZvcndhcmQgZXF1YXRpb25zLS1tYXBwaW5nIGxhdCxsb25nIHRvIHgseVxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuXG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG5cbiAgdmFyIGRlbHRhX2xvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIHZhciB0aGV0YSA9IGxhdDtcbiAgdmFyIGNvbiA9IE1hdGguUEkgKiBNYXRoLnNpbihsYXQpO1xuXG4gIC8qIEl0ZXJhdGUgdXNpbmcgdGhlIE5ld3Rvbi1SYXBoc29uIG1ldGhvZCB0byBmaW5kIHRoZXRhXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gIGZvciAodmFyIGkgPSAwOyB0cnVlOyBpKyspIHtcbiAgICB2YXIgZGVsdGFfdGhldGEgPSAtKHRoZXRhICsgTWF0aC5zaW4odGhldGEpIC0gY29uKSAvICgxICsgTWF0aC5jb3ModGhldGEpKTtcbiAgICB0aGV0YSArPSBkZWx0YV90aGV0YTtcbiAgICBpZiAoTWF0aC5hYnMoZGVsdGFfdGhldGEpIDwgRVBTTE4pIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICB0aGV0YSAvPSAyO1xuXG4gIC8qIElmIHRoZSBsYXRpdHVkZSBpcyA5MCBkZWcsIGZvcmNlIHRoZSB4IGNvb3JkaW5hdGUgdG8gYmUgXCIwICsgZmFsc2UgZWFzdGluZ1wiXG4gICAgICAgdGhpcyBpcyBkb25lIGhlcmUgYmVjYXVzZSBvZiBwcmVjaXNpb24gcHJvYmxlbXMgd2l0aCBcImNvcyh0aGV0YSlcIlxuICAgICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgaWYgKE1hdGguUEkgLyAyIC0gTWF0aC5hYnMobGF0KSA8IEVQU0xOKSB7XG4gICAgZGVsdGFfbG9uID0gMDtcbiAgfVxuICB2YXIgeCA9IDAuOTAwMzE2MzE2MTU4ICogdGhpcy5hICogZGVsdGFfbG9uICogTWF0aC5jb3ModGhldGEpICsgdGhpcy54MDtcbiAgdmFyIHkgPSAxLjQxNDIxMzU2MjM3MzEgKiB0aGlzLmEgKiBNYXRoLnNpbih0aGV0YSkgKyB0aGlzLnkwO1xuXG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG4gIHJldHVybiBwO1xufTtcblxuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICB2YXIgdGhldGE7XG4gIHZhciBhcmc7XG5cbiAgLyogSW52ZXJzZSBlcXVhdGlvbnNcbiAgICAgIC0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgcC54IC09IHRoaXMueDA7XG4gIHAueSAtPSB0aGlzLnkwO1xuICBhcmcgPSBwLnkgLyAoMS40MTQyMTM1NjIzNzMxICogdGhpcy5hKTtcblxuICAvKiBCZWNhdXNlIG9mIGRpdmlzaW9uIGJ5IHplcm8gcHJvYmxlbXMsICdhcmcnIGNhbiBub3QgYmUgMS4gIFRoZXJlZm9yZVxuICAgICAgIGEgbnVtYmVyIHZlcnkgY2xvc2UgdG8gb25lIGlzIHVzZWQgaW5zdGVhZC5cbiAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgaWYgKE1hdGguYWJzKGFyZykgPiAwLjk5OTk5OTk5OTk5OSkge1xuICAgIGFyZyA9IDAuOTk5OTk5OTk5OTk5O1xuICB9XG4gIHRoZXRhID0gTWF0aC5hc2luKGFyZyk7XG4gIHZhciBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyAocC54IC8gKDAuOTAwMzE2MzE2MTU4ICogdGhpcy5hICogTWF0aC5jb3ModGhldGEpKSkpO1xuICBpZiAobG9uIDwgKC1NYXRoLlBJKSkge1xuICAgIGxvbiA9IC1NYXRoLlBJO1xuICB9XG4gIGlmIChsb24gPiBNYXRoLlBJKSB7XG4gICAgbG9uID0gTWF0aC5QSTtcbiAgfVxuICBhcmcgPSAoMiAqIHRoZXRhICsgTWF0aC5zaW4oMiAqIHRoZXRhKSkgLyBNYXRoLlBJO1xuICBpZiAoTWF0aC5hYnMoYXJnKSA+IDEpIHtcbiAgICBhcmcgPSAxO1xuICB9XG4gIHZhciBsYXQgPSBNYXRoLmFzaW4oYXJnKTtcblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIk1vbGx3ZWlkZVwiLCBcIm1vbGxcIl07XG4iLCJ2YXIgU0VDX1RPX1JBRCA9IDQuODQ4MTM2ODExMDk1MzU5OTM1ODk5MTQxMDIzNTdlLTY7XG4vKlxuICByZWZlcmVuY2VcbiAgICBEZXBhcnRtZW50IG9mIExhbmQgYW5kIFN1cnZleSBUZWNobmljYWwgQ2lyY3VsYXIgMTk3My8zMlxuICAgICAgaHR0cDovL3d3dy5saW56LmdvdnQubnovZG9jcy9taXNjZWxsYW5lb3VzL256LW1hcC1kZWZpbml0aW9uLnBkZlxuICAgIE9TRyBUZWNobmljYWwgUmVwb3J0IDQuMVxuICAgICAgaHR0cDovL3d3dy5saW56LmdvdnQubnovZG9jcy9taXNjZWxsYW5lb3VzL256bWcucGRmXG4gICovXG5cbi8qKlxuICogaXRlcmF0aW9uczogTnVtYmVyIG9mIGl0ZXJhdGlvbnMgdG8gcmVmaW5lIGludmVyc2UgdHJhbnNmb3JtLlxuICogICAgIDAgLT4ga20gYWNjdXJhY3lcbiAqICAgICAxIC0+IG0gYWNjdXJhY3kgLS0gc3VpdGFibGUgZm9yIG1vc3QgbWFwcGluZyBhcHBsaWNhdGlvbnNcbiAqICAgICAyIC0+IG1tIGFjY3VyYWN5XG4gKi9cbmV4cG9ydHMuaXRlcmF0aW9ucyA9IDE7XG5cbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICB0aGlzLkEgPSBbXTtcbiAgdGhpcy5BWzFdID0gMC42Mzk5MTc1MDczO1xuICB0aGlzLkFbMl0gPSAtMC4xMzU4Nzk3NjEzO1xuICB0aGlzLkFbM10gPSAwLjA2MzI5NDQwOTtcbiAgdGhpcy5BWzRdID0gLTAuMDI1MjY4NTM7XG4gIHRoaXMuQVs1XSA9IDAuMDExNzg3OTtcbiAgdGhpcy5BWzZdID0gLTAuMDA1NTE2MTtcbiAgdGhpcy5BWzddID0gMC4wMDI2OTA2O1xuICB0aGlzLkFbOF0gPSAtMC4wMDEzMzM7XG4gIHRoaXMuQVs5XSA9IDAuMDAwNjc7XG4gIHRoaXMuQVsxMF0gPSAtMC4wMDAzNDtcblxuICB0aGlzLkJfcmUgPSBbXTtcbiAgdGhpcy5CX2ltID0gW107XG4gIHRoaXMuQl9yZVsxXSA9IDAuNzU1Nzg1MzIyODtcbiAgdGhpcy5CX2ltWzFdID0gMDtcbiAgdGhpcy5CX3JlWzJdID0gMC4yNDkyMDQ2NDY7XG4gIHRoaXMuQl9pbVsyXSA9IDAuMDAzMzcxNTA3O1xuICB0aGlzLkJfcmVbM10gPSAtMC4wMDE1NDE3Mzk7XG4gIHRoaXMuQl9pbVszXSA9IDAuMDQxMDU4NTYwO1xuICB0aGlzLkJfcmVbNF0gPSAtMC4xMDE2MjkwNztcbiAgdGhpcy5CX2ltWzRdID0gMC4wMTcyNzYwOTtcbiAgdGhpcy5CX3JlWzVdID0gLTAuMjY2MjM0ODk7XG4gIHRoaXMuQl9pbVs1XSA9IC0wLjM2MjQ5MjE4O1xuICB0aGlzLkJfcmVbNl0gPSAtMC42ODcwOTgzO1xuICB0aGlzLkJfaW1bNl0gPSAtMS4xNjUxOTY3O1xuXG4gIHRoaXMuQ19yZSA9IFtdO1xuICB0aGlzLkNfaW0gPSBbXTtcbiAgdGhpcy5DX3JlWzFdID0gMS4zMjMxMjcwNDM5O1xuICB0aGlzLkNfaW1bMV0gPSAwO1xuICB0aGlzLkNfcmVbMl0gPSAtMC41NzcyNDU3ODk7XG4gIHRoaXMuQ19pbVsyXSA9IC0wLjAwNzgwOTU5ODtcbiAgdGhpcy5DX3JlWzNdID0gMC41MDgzMDc1MTM7XG4gIHRoaXMuQ19pbVszXSA9IC0wLjExMjIwODk1MjtcbiAgdGhpcy5DX3JlWzRdID0gLTAuMTUwOTQ3NjI7XG4gIHRoaXMuQ19pbVs0XSA9IDAuMTgyMDA2MDI7XG4gIHRoaXMuQ19yZVs1XSA9IDEuMDE0MTgxNzk7XG4gIHRoaXMuQ19pbVs1XSA9IDEuNjQ0OTc2OTY7XG4gIHRoaXMuQ19yZVs2XSA9IDEuOTY2MDU0OTtcbiAgdGhpcy5DX2ltWzZdID0gMi41MTI3NjQ1O1xuXG4gIHRoaXMuRCA9IFtdO1xuICB0aGlzLkRbMV0gPSAxLjU2MjcwMTQyNDM7XG4gIHRoaXMuRFsyXSA9IDAuNTE4NTQwNjM5ODtcbiAgdGhpcy5EWzNdID0gLTAuMDMzMzMwOTg7XG4gIHRoaXMuRFs0XSA9IC0wLjEwNTI5MDY7XG4gIHRoaXMuRFs1XSA9IC0wLjAzNjg1OTQ7XG4gIHRoaXMuRFs2XSA9IDAuMDA3MzE3O1xuICB0aGlzLkRbN10gPSAwLjAxMjIwO1xuICB0aGlzLkRbOF0gPSAwLjAwMzk0O1xuICB0aGlzLkRbOV0gPSAtMC4wMDEzO1xufTtcblxuLyoqXG4gICAgTmV3IFplYWxhbmQgTWFwIEdyaWQgRm9yd2FyZCAgLSBsb25nL2xhdCB0byB4L3lcbiAgICBsb25nL2xhdCBpbiByYWRpYW5zXG4gICovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBuO1xuICB2YXIgbG9uID0gcC54O1xuICB2YXIgbGF0ID0gcC55O1xuXG4gIHZhciBkZWx0YV9sYXQgPSBsYXQgLSB0aGlzLmxhdDA7XG4gIHZhciBkZWx0YV9sb24gPSBsb24gLSB0aGlzLmxvbmcwO1xuXG4gIC8vIDEuIENhbGN1bGF0ZSBkX3BoaSBhbmQgZF9wc2kgICAgLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhbmQgZF9sYW1iZGFcbiAgLy8gRm9yIHRoaXMgYWxnb3JpdGhtLCBkZWx0YV9sYXRpdHVkZSBpcyBpbiBzZWNvbmRzIG9mIGFyYyB4IDEwLTUsIHNvIHdlIG5lZWQgdG8gc2NhbGUgdG8gdGhvc2UgdW5pdHMuIExvbmdpdHVkZSBpcyByYWRpYW5zLlxuICB2YXIgZF9waGkgPSBkZWx0YV9sYXQgLyBTRUNfVE9fUkFEICogMUUtNTtcbiAgdmFyIGRfbGFtYmRhID0gZGVsdGFfbG9uO1xuICB2YXIgZF9waGlfbiA9IDE7IC8vIGRfcGhpXjBcblxuICB2YXIgZF9wc2kgPSAwO1xuICBmb3IgKG4gPSAxOyBuIDw9IDEwOyBuKyspIHtcbiAgICBkX3BoaV9uID0gZF9waGlfbiAqIGRfcGhpO1xuICAgIGRfcHNpID0gZF9wc2kgKyB0aGlzLkFbbl0gKiBkX3BoaV9uO1xuICB9XG5cbiAgLy8gMi4gQ2FsY3VsYXRlIHRoZXRhXG4gIHZhciB0aF9yZSA9IGRfcHNpO1xuICB2YXIgdGhfaW0gPSBkX2xhbWJkYTtcblxuICAvLyAzLiBDYWxjdWxhdGUgelxuICB2YXIgdGhfbl9yZSA9IDE7XG4gIHZhciB0aF9uX2ltID0gMDsgLy8gdGhldGFeMFxuICB2YXIgdGhfbl9yZTE7XG4gIHZhciB0aF9uX2ltMTtcblxuICB2YXIgel9yZSA9IDA7XG4gIHZhciB6X2ltID0gMDtcbiAgZm9yIChuID0gMTsgbiA8PSA2OyBuKyspIHtcbiAgICB0aF9uX3JlMSA9IHRoX25fcmUgKiB0aF9yZSAtIHRoX25faW0gKiB0aF9pbTtcbiAgICB0aF9uX2ltMSA9IHRoX25faW0gKiB0aF9yZSArIHRoX25fcmUgKiB0aF9pbTtcbiAgICB0aF9uX3JlID0gdGhfbl9yZTE7XG4gICAgdGhfbl9pbSA9IHRoX25faW0xO1xuICAgIHpfcmUgPSB6X3JlICsgdGhpcy5CX3JlW25dICogdGhfbl9yZSAtIHRoaXMuQl9pbVtuXSAqIHRoX25faW07XG4gICAgel9pbSA9IHpfaW0gKyB0aGlzLkJfaW1bbl0gKiB0aF9uX3JlICsgdGhpcy5CX3JlW25dICogdGhfbl9pbTtcbiAgfVxuXG4gIC8vIDQuIENhbGN1bGF0ZSBlYXN0aW5nIGFuZCBub3J0aGluZ1xuICBwLnggPSAoel9pbSAqIHRoaXMuYSkgKyB0aGlzLngwO1xuICBwLnkgPSAoel9yZSAqIHRoaXMuYSkgKyB0aGlzLnkwO1xuXG4gIHJldHVybiBwO1xufTtcblxuXG4vKipcbiAgICBOZXcgWmVhbGFuZCBNYXAgR3JpZCBJbnZlcnNlICAtICB4L3kgdG8gbG9uZy9sYXRcbiAgKi9cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIG47XG4gIHZhciB4ID0gcC54O1xuICB2YXIgeSA9IHAueTtcblxuICB2YXIgZGVsdGFfeCA9IHggLSB0aGlzLngwO1xuICB2YXIgZGVsdGFfeSA9IHkgLSB0aGlzLnkwO1xuXG4gIC8vIDEuIENhbGN1bGF0ZSB6XG4gIHZhciB6X3JlID0gZGVsdGFfeSAvIHRoaXMuYTtcbiAgdmFyIHpfaW0gPSBkZWx0YV94IC8gdGhpcy5hO1xuXG4gIC8vIDJhLiBDYWxjdWxhdGUgdGhldGEgLSBmaXJzdCBhcHByb3hpbWF0aW9uIGdpdmVzIGttIGFjY3VyYWN5XG4gIHZhciB6X25fcmUgPSAxO1xuICB2YXIgel9uX2ltID0gMDsgLy8gel4wXG4gIHZhciB6X25fcmUxO1xuICB2YXIgel9uX2ltMTtcblxuICB2YXIgdGhfcmUgPSAwO1xuICB2YXIgdGhfaW0gPSAwO1xuICBmb3IgKG4gPSAxOyBuIDw9IDY7IG4rKykge1xuICAgIHpfbl9yZTEgPSB6X25fcmUgKiB6X3JlIC0gel9uX2ltICogel9pbTtcbiAgICB6X25faW0xID0gel9uX2ltICogel9yZSArIHpfbl9yZSAqIHpfaW07XG4gICAgel9uX3JlID0gel9uX3JlMTtcbiAgICB6X25faW0gPSB6X25faW0xO1xuICAgIHRoX3JlID0gdGhfcmUgKyB0aGlzLkNfcmVbbl0gKiB6X25fcmUgLSB0aGlzLkNfaW1bbl0gKiB6X25faW07XG4gICAgdGhfaW0gPSB0aF9pbSArIHRoaXMuQ19pbVtuXSAqIHpfbl9yZSArIHRoaXMuQ19yZVtuXSAqIHpfbl9pbTtcbiAgfVxuXG4gIC8vIDJiLiBJdGVyYXRlIHRvIHJlZmluZSB0aGUgYWNjdXJhY3kgb2YgdGhlIGNhbGN1bGF0aW9uXG4gIC8vICAgICAgICAwIGl0ZXJhdGlvbnMgZ2l2ZXMga20gYWNjdXJhY3lcbiAgLy8gICAgICAgIDEgaXRlcmF0aW9uIGdpdmVzIG0gYWNjdXJhY3kgLS0gZ29vZCBlbm91Z2ggZm9yIG1vc3QgbWFwcGluZyBhcHBsaWNhdGlvbnNcbiAgLy8gICAgICAgIDIgaXRlcmF0aW9ucyBiaXZlcyBtbSBhY2N1cmFjeVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaXRlcmF0aW9uczsgaSsrKSB7XG4gICAgdmFyIHRoX25fcmUgPSB0aF9yZTtcbiAgICB2YXIgdGhfbl9pbSA9IHRoX2ltO1xuICAgIHZhciB0aF9uX3JlMTtcbiAgICB2YXIgdGhfbl9pbTE7XG5cbiAgICB2YXIgbnVtX3JlID0gel9yZTtcbiAgICB2YXIgbnVtX2ltID0gel9pbTtcbiAgICBmb3IgKG4gPSAyOyBuIDw9IDY7IG4rKykge1xuICAgICAgdGhfbl9yZTEgPSB0aF9uX3JlICogdGhfcmUgLSB0aF9uX2ltICogdGhfaW07XG4gICAgICB0aF9uX2ltMSA9IHRoX25faW0gKiB0aF9yZSArIHRoX25fcmUgKiB0aF9pbTtcbiAgICAgIHRoX25fcmUgPSB0aF9uX3JlMTtcbiAgICAgIHRoX25faW0gPSB0aF9uX2ltMTtcbiAgICAgIG51bV9yZSA9IG51bV9yZSArIChuIC0gMSkgKiAodGhpcy5CX3JlW25dICogdGhfbl9yZSAtIHRoaXMuQl9pbVtuXSAqIHRoX25faW0pO1xuICAgICAgbnVtX2ltID0gbnVtX2ltICsgKG4gLSAxKSAqICh0aGlzLkJfaW1bbl0gKiB0aF9uX3JlICsgdGhpcy5CX3JlW25dICogdGhfbl9pbSk7XG4gICAgfVxuXG4gICAgdGhfbl9yZSA9IDE7XG4gICAgdGhfbl9pbSA9IDA7XG4gICAgdmFyIGRlbl9yZSA9IHRoaXMuQl9yZVsxXTtcbiAgICB2YXIgZGVuX2ltID0gdGhpcy5CX2ltWzFdO1xuICAgIGZvciAobiA9IDI7IG4gPD0gNjsgbisrKSB7XG4gICAgICB0aF9uX3JlMSA9IHRoX25fcmUgKiB0aF9yZSAtIHRoX25faW0gKiB0aF9pbTtcbiAgICAgIHRoX25faW0xID0gdGhfbl9pbSAqIHRoX3JlICsgdGhfbl9yZSAqIHRoX2ltO1xuICAgICAgdGhfbl9yZSA9IHRoX25fcmUxO1xuICAgICAgdGhfbl9pbSA9IHRoX25faW0xO1xuICAgICAgZGVuX3JlID0gZGVuX3JlICsgbiAqICh0aGlzLkJfcmVbbl0gKiB0aF9uX3JlIC0gdGhpcy5CX2ltW25dICogdGhfbl9pbSk7XG4gICAgICBkZW5faW0gPSBkZW5faW0gKyBuICogKHRoaXMuQl9pbVtuXSAqIHRoX25fcmUgKyB0aGlzLkJfcmVbbl0gKiB0aF9uX2ltKTtcbiAgICB9XG5cbiAgICAvLyBDb21wbGV4IGRpdmlzaW9uXG4gICAgdmFyIGRlbjIgPSBkZW5fcmUgKiBkZW5fcmUgKyBkZW5faW0gKiBkZW5faW07XG4gICAgdGhfcmUgPSAobnVtX3JlICogZGVuX3JlICsgbnVtX2ltICogZGVuX2ltKSAvIGRlbjI7XG4gICAgdGhfaW0gPSAobnVtX2ltICogZGVuX3JlIC0gbnVtX3JlICogZGVuX2ltKSAvIGRlbjI7XG4gIH1cblxuICAvLyAzLiBDYWxjdWxhdGUgZF9waGkgICAgICAgICAgICAgIC4uLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuZCBkX2xhbWJkYVxuICB2YXIgZF9wc2kgPSB0aF9yZTtcbiAgdmFyIGRfbGFtYmRhID0gdGhfaW07XG4gIHZhciBkX3BzaV9uID0gMTsgLy8gZF9wc2leMFxuXG4gIHZhciBkX3BoaSA9IDA7XG4gIGZvciAobiA9IDE7IG4gPD0gOTsgbisrKSB7XG4gICAgZF9wc2lfbiA9IGRfcHNpX24gKiBkX3BzaTtcbiAgICBkX3BoaSA9IGRfcGhpICsgdGhpcy5EW25dICogZF9wc2lfbjtcbiAgfVxuXG4gIC8vIDQuIENhbGN1bGF0ZSBsYXRpdHVkZSBhbmQgbG9uZ2l0dWRlXG4gIC8vIGRfcGhpIGlzIGNhbGN1YXRlZCBpbiBzZWNvbmQgb2YgYXJjICogMTBeLTUsIHNvIHdlIG5lZWQgdG8gc2NhbGUgYmFjayB0byByYWRpYW5zLiBkX2xhbWJkYSBpcyBpbiByYWRpYW5zLlxuICB2YXIgbGF0ID0gdGhpcy5sYXQwICsgKGRfcGhpICogU0VDX1RPX1JBRCAqIDFFNSk7XG4gIHZhciBsb24gPSB0aGlzLmxvbmcwICsgZF9sYW1iZGE7XG5cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG5cbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIk5ld19aZWFsYW5kX01hcF9HcmlkXCIsIFwibnptZ1wiXTsiLCJ2YXIgdHNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vdHNmbnonKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBwaGkyeiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9waGkyeicpO1xudmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG52YXIgRk9SVFBJID0gTWF0aC5QSS80O1xudmFyIEVQU0xOID0gMS4wZS0xMDtcblxuLyogSW5pdGlhbGl6ZSB0aGUgT2JsaXF1ZSBNZXJjYXRvciAgcHJvamVjdGlvblxuICAgIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5ub19vZmYgPSB0aGlzLm5vX29mZiB8fCBmYWxzZTtcbiAgdGhpcy5ub19yb3QgPSB0aGlzLm5vX3JvdCB8fCBmYWxzZTtcblxuICBpZiAoaXNOYU4odGhpcy5rMCkpIHtcbiAgICB0aGlzLmswID0gMTtcbiAgfVxuICB2YXIgc2lubGF0ID0gTWF0aC5zaW4odGhpcy5sYXQwKTtcbiAgdmFyIGNvc2xhdCA9IE1hdGguY29zKHRoaXMubGF0MCk7XG4gIHZhciBjb24gPSB0aGlzLmUgKiBzaW5sYXQ7XG5cbiAgdGhpcy5ibCA9IE1hdGguc3FydCgxICsgdGhpcy5lcyAvICgxIC0gdGhpcy5lcykgKiBNYXRoLnBvdyhjb3NsYXQsIDQpKTtcbiAgdGhpcy5hbCA9IHRoaXMuYSAqIHRoaXMuYmwgKiB0aGlzLmswICogTWF0aC5zcXJ0KDEgLSB0aGlzLmVzKSAvICgxIC0gY29uICogY29uKTtcbiAgdmFyIHQwID0gdHNmbnoodGhpcy5lLCB0aGlzLmxhdDAsIHNpbmxhdCk7XG4gIHZhciBkbCA9IHRoaXMuYmwgLyBjb3NsYXQgKiBNYXRoLnNxcnQoKDEgLSB0aGlzLmVzKSAvICgxIC0gY29uICogY29uKSk7XG4gIGlmIChkbCAqIGRsIDwgMSkge1xuICAgIGRsID0gMTtcbiAgfVxuICB2YXIgZmw7XG4gIHZhciBnbDtcbiAgaWYgKCFpc05hTih0aGlzLmxvbmdjKSkge1xuICAgIC8vQ2VudHJhbCBwb2ludCBhbmQgYXppbXV0aCBtZXRob2RcblxuICAgIGlmICh0aGlzLmxhdDAgPj0gMCkge1xuICAgICAgZmwgPSBkbCArIE1hdGguc3FydChkbCAqIGRsIC0gMSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgZmwgPSBkbCAtIE1hdGguc3FydChkbCAqIGRsIC0gMSk7XG4gICAgfVxuICAgIHRoaXMuZWwgPSBmbCAqIE1hdGgucG93KHQwLCB0aGlzLmJsKTtcbiAgICBnbCA9IDAuNSAqIChmbCAtIDEgLyBmbCk7XG4gICAgdGhpcy5nYW1tYTAgPSBNYXRoLmFzaW4oTWF0aC5zaW4odGhpcy5hbHBoYSkgLyBkbCk7XG4gICAgdGhpcy5sb25nMCA9IHRoaXMubG9uZ2MgLSBNYXRoLmFzaW4oZ2wgKiBNYXRoLnRhbih0aGlzLmdhbW1hMCkpIC8gdGhpcy5ibDtcblxuICB9XG4gIGVsc2Uge1xuICAgIC8vMiBwb2ludHMgbWV0aG9kXG4gICAgdmFyIHQxID0gdHNmbnoodGhpcy5lLCB0aGlzLmxhdDEsIE1hdGguc2luKHRoaXMubGF0MSkpO1xuICAgIHZhciB0MiA9IHRzZm56KHRoaXMuZSwgdGhpcy5sYXQyLCBNYXRoLnNpbih0aGlzLmxhdDIpKTtcbiAgICBpZiAodGhpcy5sYXQwID49IDApIHtcbiAgICAgIHRoaXMuZWwgPSAoZGwgKyBNYXRoLnNxcnQoZGwgKiBkbCAtIDEpKSAqIE1hdGgucG93KHQwLCB0aGlzLmJsKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmVsID0gKGRsIC0gTWF0aC5zcXJ0KGRsICogZGwgLSAxKSkgKiBNYXRoLnBvdyh0MCwgdGhpcy5ibCk7XG4gICAgfVxuICAgIHZhciBobCA9IE1hdGgucG93KHQxLCB0aGlzLmJsKTtcbiAgICB2YXIgbGwgPSBNYXRoLnBvdyh0MiwgdGhpcy5ibCk7XG4gICAgZmwgPSB0aGlzLmVsIC8gaGw7XG4gICAgZ2wgPSAwLjUgKiAoZmwgLSAxIC8gZmwpO1xuICAgIHZhciBqbCA9ICh0aGlzLmVsICogdGhpcy5lbCAtIGxsICogaGwpIC8gKHRoaXMuZWwgKiB0aGlzLmVsICsgbGwgKiBobCk7XG4gICAgdmFyIHBsID0gKGxsIC0gaGwpIC8gKGxsICsgaGwpO1xuICAgIHZhciBkbG9uMTIgPSBhZGp1c3RfbG9uKHRoaXMubG9uZzEgLSB0aGlzLmxvbmcyKTtcbiAgICB0aGlzLmxvbmcwID0gMC41ICogKHRoaXMubG9uZzEgKyB0aGlzLmxvbmcyKSAtIE1hdGguYXRhbihqbCAqIE1hdGgudGFuKDAuNSAqIHRoaXMuYmwgKiAoZGxvbjEyKSkgLyBwbCkgLyB0aGlzLmJsO1xuICAgIHRoaXMubG9uZzAgPSBhZGp1c3RfbG9uKHRoaXMubG9uZzApO1xuICAgIHZhciBkbG9uMTAgPSBhZGp1c3RfbG9uKHRoaXMubG9uZzEgLSB0aGlzLmxvbmcwKTtcbiAgICB0aGlzLmdhbW1hMCA9IE1hdGguYXRhbihNYXRoLnNpbih0aGlzLmJsICogKGRsb24xMCkpIC8gZ2wpO1xuICAgIHRoaXMuYWxwaGEgPSBNYXRoLmFzaW4oZGwgKiBNYXRoLnNpbih0aGlzLmdhbW1hMCkpO1xuICB9XG5cbiAgaWYgKHRoaXMubm9fb2ZmKSB7XG4gICAgdGhpcy51YyA9IDA7XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKHRoaXMubGF0MCA+PSAwKSB7XG4gICAgICB0aGlzLnVjID0gdGhpcy5hbCAvIHRoaXMuYmwgKiBNYXRoLmF0YW4yKE1hdGguc3FydChkbCAqIGRsIC0gMSksIE1hdGguY29zKHRoaXMuYWxwaGEpKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnVjID0gLTEgKiB0aGlzLmFsIC8gdGhpcy5ibCAqIE1hdGguYXRhbjIoTWF0aC5zcXJ0KGRsICogZGwgLSAxKSwgTWF0aC5jb3ModGhpcy5hbHBoYSkpO1xuICAgIH1cbiAgfVxuXG59O1xuXG5cbi8qIE9ibGlxdWUgTWVyY2F0b3IgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIHZhciBkbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgdmFyIHVzLCB2cztcbiAgdmFyIGNvbjtcbiAgaWYgKE1hdGguYWJzKE1hdGguYWJzKGxhdCkgLSBIQUxGX1BJKSA8PSBFUFNMTikge1xuICAgIGlmIChsYXQgPiAwKSB7XG4gICAgICBjb24gPSAtMTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb24gPSAxO1xuICAgIH1cbiAgICB2cyA9IHRoaXMuYWwgLyB0aGlzLmJsICogTWF0aC5sb2coTWF0aC50YW4oRk9SVFBJICsgY29uICogdGhpcy5nYW1tYTAgKiAwLjUpKTtcbiAgICB1cyA9IC0xICogY29uICogSEFMRl9QSSAqIHRoaXMuYWwgLyB0aGlzLmJsO1xuICB9XG4gIGVsc2Uge1xuICAgIHZhciB0ID0gdHNmbnoodGhpcy5lLCBsYXQsIE1hdGguc2luKGxhdCkpO1xuICAgIHZhciBxbCA9IHRoaXMuZWwgLyBNYXRoLnBvdyh0LCB0aGlzLmJsKTtcbiAgICB2YXIgc2wgPSAwLjUgKiAocWwgLSAxIC8gcWwpO1xuICAgIHZhciB0bCA9IDAuNSAqIChxbCArIDEgLyBxbCk7XG4gICAgdmFyIHZsID0gTWF0aC5zaW4odGhpcy5ibCAqIChkbG9uKSk7XG4gICAgdmFyIHVsID0gKHNsICogTWF0aC5zaW4odGhpcy5nYW1tYTApIC0gdmwgKiBNYXRoLmNvcyh0aGlzLmdhbW1hMCkpIC8gdGw7XG4gICAgaWYgKE1hdGguYWJzKE1hdGguYWJzKHVsKSAtIDEpIDw9IEVQU0xOKSB7XG4gICAgICB2cyA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB2cyA9IDAuNSAqIHRoaXMuYWwgKiBNYXRoLmxvZygoMSAtIHVsKSAvICgxICsgdWwpKSAvIHRoaXMuYmw7XG4gICAgfVxuICAgIGlmIChNYXRoLmFicyhNYXRoLmNvcyh0aGlzLmJsICogKGRsb24pKSkgPD0gRVBTTE4pIHtcbiAgICAgIHVzID0gdGhpcy5hbCAqIHRoaXMuYmwgKiAoZGxvbik7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdXMgPSB0aGlzLmFsICogTWF0aC5hdGFuMihzbCAqIE1hdGguY29zKHRoaXMuZ2FtbWEwKSArIHZsICogTWF0aC5zaW4odGhpcy5nYW1tYTApLCBNYXRoLmNvcyh0aGlzLmJsICogZGxvbikpIC8gdGhpcy5ibDtcbiAgICB9XG4gIH1cblxuICBpZiAodGhpcy5ub19yb3QpIHtcbiAgICBwLnggPSB0aGlzLngwICsgdXM7XG4gICAgcC55ID0gdGhpcy55MCArIHZzO1xuICB9XG4gIGVsc2Uge1xuXG4gICAgdXMgLT0gdGhpcy51YztcbiAgICBwLnggPSB0aGlzLngwICsgdnMgKiBNYXRoLmNvcyh0aGlzLmFscGhhKSArIHVzICogTWF0aC5zaW4odGhpcy5hbHBoYSk7XG4gICAgcC55ID0gdGhpcy55MCArIHVzICogTWF0aC5jb3ModGhpcy5hbHBoYSkgLSB2cyAqIE1hdGguc2luKHRoaXMuYWxwaGEpO1xuICB9XG4gIHJldHVybiBwO1xufTtcblxuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICB2YXIgdXMsIHZzO1xuICBpZiAodGhpcy5ub19yb3QpIHtcbiAgICB2cyA9IHAueSAtIHRoaXMueTA7XG4gICAgdXMgPSBwLnggLSB0aGlzLngwO1xuICB9XG4gIGVsc2Uge1xuICAgIHZzID0gKHAueCAtIHRoaXMueDApICogTWF0aC5jb3ModGhpcy5hbHBoYSkgLSAocC55IC0gdGhpcy55MCkgKiBNYXRoLnNpbih0aGlzLmFscGhhKTtcbiAgICB1cyA9IChwLnkgLSB0aGlzLnkwKSAqIE1hdGguY29zKHRoaXMuYWxwaGEpICsgKHAueCAtIHRoaXMueDApICogTWF0aC5zaW4odGhpcy5hbHBoYSk7XG4gICAgdXMgKz0gdGhpcy51YztcbiAgfVxuICB2YXIgcXAgPSBNYXRoLmV4cCgtMSAqIHRoaXMuYmwgKiB2cyAvIHRoaXMuYWwpO1xuICB2YXIgc3AgPSAwLjUgKiAocXAgLSAxIC8gcXApO1xuICB2YXIgdHAgPSAwLjUgKiAocXAgKyAxIC8gcXApO1xuICB2YXIgdnAgPSBNYXRoLnNpbih0aGlzLmJsICogdXMgLyB0aGlzLmFsKTtcbiAgdmFyIHVwID0gKHZwICogTWF0aC5jb3ModGhpcy5nYW1tYTApICsgc3AgKiBNYXRoLnNpbih0aGlzLmdhbW1hMCkpIC8gdHA7XG4gIHZhciB0cyA9IE1hdGgucG93KHRoaXMuZWwgLyBNYXRoLnNxcnQoKDEgKyB1cCkgLyAoMSAtIHVwKSksIDEgLyB0aGlzLmJsKTtcbiAgaWYgKE1hdGguYWJzKHVwIC0gMSkgPCBFUFNMTikge1xuICAgIHAueCA9IHRoaXMubG9uZzA7XG4gICAgcC55ID0gSEFMRl9QSTtcbiAgfVxuICBlbHNlIGlmIChNYXRoLmFicyh1cCArIDEpIDwgRVBTTE4pIHtcbiAgICBwLnggPSB0aGlzLmxvbmcwO1xuICAgIHAueSA9IC0xICogSEFMRl9QSTtcbiAgfVxuICBlbHNlIHtcbiAgICBwLnkgPSBwaGkyeih0aGlzLmUsIHRzKTtcbiAgICBwLnggPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgLSBNYXRoLmF0YW4yKHNwICogTWF0aC5jb3ModGhpcy5nYW1tYTApIC0gdnAgKiBNYXRoLnNpbih0aGlzLmdhbW1hMCksIE1hdGguY29zKHRoaXMuYmwgKiB1cyAvIHRoaXMuYWwpKSAvIHRoaXMuYmwpO1xuICB9XG4gIHJldHVybiBwO1xufTtcblxuZXhwb3J0cy5uYW1lcyA9IFtcIkhvdGluZV9PYmxpcXVlX01lcmNhdG9yXCIsIFwiSG90aW5lIE9ibGlxdWUgTWVyY2F0b3JcIiwgXCJIb3RpbmVfT2JsaXF1ZV9NZXJjYXRvcl9BemltdXRoX05hdHVyYWxfT3JpZ2luXCIsIFwiSG90aW5lX09ibGlxdWVfTWVyY2F0b3JfQXppbXV0aF9DZW50ZXJcIiwgXCJvbWVyY1wiXTsiLCJ2YXIgZTBmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMGZuJyk7XG52YXIgZTFmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMWZuJyk7XG52YXIgZTJmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lMmZuJyk7XG52YXIgZTNmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9lM2ZuJyk7XG52YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgYWRqdXN0X2xhdCA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbGF0Jyk7XG52YXIgbWxmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9tbGZuJyk7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIGdOID0gcmVxdWlyZSgnLi4vY29tbW9uL2dOJyk7XG52YXIgTUFYX0lURVIgPSAyMDtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICAvKiBQbGFjZSBwYXJhbWV0ZXJzIGluIHN0YXRpYyBzdG9yYWdlIGZvciBjb21tb24gdXNlXG4gICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiAgdGhpcy50ZW1wID0gdGhpcy5iIC8gdGhpcy5hO1xuICB0aGlzLmVzID0gMSAtIE1hdGgucG93KHRoaXMudGVtcCwgMik7IC8vIGRldmFpdCBldHJlIGRhbnMgdG1lcmMuanMgbWFpcyBuIHkgZXN0IHBhcyBkb25jIGplIGNvbW1lbnRlIHNpbm9uIHJldG91ciBkZSB2YWxldXJzIG51bGxlc1xuICB0aGlzLmUgPSBNYXRoLnNxcnQodGhpcy5lcyk7XG4gIHRoaXMuZTAgPSBlMGZuKHRoaXMuZXMpO1xuICB0aGlzLmUxID0gZTFmbih0aGlzLmVzKTtcbiAgdGhpcy5lMiA9IGUyZm4odGhpcy5lcyk7XG4gIHRoaXMuZTMgPSBlM2ZuKHRoaXMuZXMpO1xuICB0aGlzLm1sMCA9IHRoaXMuYSAqIG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgdGhpcy5sYXQwKTsgLy9zaSBxdWUgZGVzIHplcm9zIGxlIGNhbGN1bCBuZSBzZSBmYWl0IHBhc1xufTtcblxuXG4vKiBQb2x5Y29uaWMgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG4gICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcbiAgdmFyIHgsIHksIGVsO1xuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG4gIGVsID0gZGxvbiAqIE1hdGguc2luKGxhdCk7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGlmIChNYXRoLmFicyhsYXQpIDw9IEVQU0xOKSB7XG4gICAgICB4ID0gdGhpcy5hICogZGxvbjtcbiAgICAgIHkgPSAtMSAqIHRoaXMuYSAqIHRoaXMubGF0MDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB4ID0gdGhpcy5hICogTWF0aC5zaW4oZWwpIC8gTWF0aC50YW4obGF0KTtcbiAgICAgIHkgPSB0aGlzLmEgKiAoYWRqdXN0X2xhdChsYXQgLSB0aGlzLmxhdDApICsgKDEgLSBNYXRoLmNvcyhlbCkpIC8gTWF0aC50YW4obGF0KSk7XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIGlmIChNYXRoLmFicyhsYXQpIDw9IEVQU0xOKSB7XG4gICAgICB4ID0gdGhpcy5hICogZGxvbjtcbiAgICAgIHkgPSAtMSAqIHRoaXMubWwwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHZhciBubCA9IGdOKHRoaXMuYSwgdGhpcy5lLCBNYXRoLnNpbihsYXQpKSAvIE1hdGgudGFuKGxhdCk7XG4gICAgICB4ID0gbmwgKiBNYXRoLnNpbihlbCk7XG4gICAgICB5ID0gdGhpcy5hICogbWxmbih0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzLCBsYXQpIC0gdGhpcy5tbDAgKyBubCAqICgxIC0gTWF0aC5jb3MoZWwpKTtcbiAgICB9XG5cbiAgfVxuICBwLnggPSB4ICsgdGhpcy54MDtcbiAgcC55ID0geSArIHRoaXMueTA7XG4gIHJldHVybiBwO1xufTtcblxuXG4vKiBJbnZlcnNlIGVxdWF0aW9uc1xuICAtLS0tLS0tLS0tLS0tLS0tLSovXG5leHBvcnRzLmludmVyc2UgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBsb24sIGxhdCwgeCwgeSwgaTtcbiAgdmFyIGFsLCBibDtcbiAgdmFyIHBoaSwgZHBoaTtcbiAgeCA9IHAueCAtIHRoaXMueDA7XG4gIHkgPSBwLnkgLSB0aGlzLnkwO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGlmIChNYXRoLmFicyh5ICsgdGhpcy5hICogdGhpcy5sYXQwKSA8PSBFUFNMTikge1xuICAgICAgbG9uID0gYWRqdXN0X2xvbih4IC8gdGhpcy5hICsgdGhpcy5sb25nMCk7XG4gICAgICBsYXQgPSAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGFsID0gdGhpcy5sYXQwICsgeSAvIHRoaXMuYTtcbiAgICAgIGJsID0geCAqIHggLyB0aGlzLmEgLyB0aGlzLmEgKyBhbCAqIGFsO1xuICAgICAgcGhpID0gYWw7XG4gICAgICB2YXIgdGFucGhpO1xuICAgICAgZm9yIChpID0gTUFYX0lURVI7IGk7IC0taSkge1xuICAgICAgICB0YW5waGkgPSBNYXRoLnRhbihwaGkpO1xuICAgICAgICBkcGhpID0gLTEgKiAoYWwgKiAocGhpICogdGFucGhpICsgMSkgLSBwaGkgLSAwLjUgKiAocGhpICogcGhpICsgYmwpICogdGFucGhpKSAvICgocGhpIC0gYWwpIC8gdGFucGhpIC0gMSk7XG4gICAgICAgIHBoaSArPSBkcGhpO1xuICAgICAgICBpZiAoTWF0aC5hYnMoZHBoaSkgPD0gRVBTTE4pIHtcbiAgICAgICAgICBsYXQgPSBwaGk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIChNYXRoLmFzaW4oeCAqIE1hdGgudGFuKHBoaSkgLyB0aGlzLmEpKSAvIE1hdGguc2luKGxhdCkpO1xuICAgIH1cbiAgfVxuICBlbHNlIHtcbiAgICBpZiAoTWF0aC5hYnMoeSArIHRoaXMubWwwKSA8PSBFUFNMTikge1xuICAgICAgbGF0ID0gMDtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIHggLyB0aGlzLmEpO1xuICAgIH1cbiAgICBlbHNlIHtcblxuICAgICAgYWwgPSAodGhpcy5tbDAgKyB5KSAvIHRoaXMuYTtcbiAgICAgIGJsID0geCAqIHggLyB0aGlzLmEgLyB0aGlzLmEgKyBhbCAqIGFsO1xuICAgICAgcGhpID0gYWw7XG4gICAgICB2YXIgY2wsIG1sbiwgbWxucCwgbWE7XG4gICAgICB2YXIgY29uO1xuICAgICAgZm9yIChpID0gTUFYX0lURVI7IGk7IC0taSkge1xuICAgICAgICBjb24gPSB0aGlzLmUgKiBNYXRoLnNpbihwaGkpO1xuICAgICAgICBjbCA9IE1hdGguc3FydCgxIC0gY29uICogY29uKSAqIE1hdGgudGFuKHBoaSk7XG4gICAgICAgIG1sbiA9IHRoaXMuYSAqIG1sZm4odGhpcy5lMCwgdGhpcy5lMSwgdGhpcy5lMiwgdGhpcy5lMywgcGhpKTtcbiAgICAgICAgbWxucCA9IHRoaXMuZTAgLSAyICogdGhpcy5lMSAqIE1hdGguY29zKDIgKiBwaGkpICsgNCAqIHRoaXMuZTIgKiBNYXRoLmNvcyg0ICogcGhpKSAtIDYgKiB0aGlzLmUzICogTWF0aC5jb3MoNiAqIHBoaSk7XG4gICAgICAgIG1hID0gbWxuIC8gdGhpcy5hO1xuICAgICAgICBkcGhpID0gKGFsICogKGNsICogbWEgKyAxKSAtIG1hIC0gMC41ICogY2wgKiAobWEgKiBtYSArIGJsKSkgLyAodGhpcy5lcyAqIE1hdGguc2luKDIgKiBwaGkpICogKG1hICogbWEgKyBibCAtIDIgKiBhbCAqIG1hKSAvICg0ICogY2wpICsgKGFsIC0gbWEpICogKGNsICogbWxucCAtIDIgLyBNYXRoLnNpbigyICogcGhpKSkgLSBtbG5wKTtcbiAgICAgICAgcGhpIC09IGRwaGk7XG4gICAgICAgIGlmIChNYXRoLmFicyhkcGhpKSA8PSBFUFNMTikge1xuICAgICAgICAgIGxhdCA9IHBoaTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvL2xhdD1waGk0eih0aGlzLmUsdGhpcy5lMCx0aGlzLmUxLHRoaXMuZTIsdGhpcy5lMyxhbCxibCwwLDApO1xuICAgICAgY2wgPSBNYXRoLnNxcnQoMSAtIHRoaXMuZXMgKiBNYXRoLnBvdyhNYXRoLnNpbihsYXQpLCAyKSkgKiBNYXRoLnRhbihsYXQpO1xuICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hc2luKHggKiBjbCAvIHRoaXMuYSkgLyBNYXRoLnNpbihsYXQpKTtcbiAgICB9XG4gIH1cblxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIlBvbHljb25pY1wiLCBcInBvbHlcIl07IiwidmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xudmFyIGFkanVzdF9sYXQgPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xhdCcpO1xudmFyIHBqX2VuZm4gPSByZXF1aXJlKCcuLi9jb21tb24vcGpfZW5mbicpO1xudmFyIE1BWF9JVEVSID0gMjA7XG52YXIgcGpfbWxmbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9wal9tbGZuJyk7XG52YXIgcGpfaW52X21sZm4gPSByZXF1aXJlKCcuLi9jb21tb24vcGpfaW52X21sZm4nKTtcbnZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBhc2lueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hc2lueicpO1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIC8qIFBsYWNlIHBhcmFtZXRlcnMgaW4gc3RhdGljIHN0b3JhZ2UgZm9yIGNvbW1vbiB1c2VcbiAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXG4gIGlmICghdGhpcy5zcGhlcmUpIHtcbiAgICB0aGlzLmVuID0gcGpfZW5mbih0aGlzLmVzKTtcbiAgfVxuICBlbHNlIHtcbiAgICB0aGlzLm4gPSAxO1xuICAgIHRoaXMubSA9IDA7XG4gICAgdGhpcy5lcyA9IDA7XG4gICAgdGhpcy5DX3kgPSBNYXRoLnNxcnQoKHRoaXMubSArIDEpIC8gdGhpcy5uKTtcbiAgICB0aGlzLkNfeCA9IHRoaXMuQ195IC8gKHRoaXMubSArIDEpO1xuICB9XG5cbn07XG5cbi8qIFNpbnVzb2lkYWwgZm9yd2FyZCBlcXVhdGlvbnMtLW1hcHBpbmcgbGF0LGxvbmcgdG8geCx5XG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHgsIHk7XG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG4gIC8qIEZvcndhcmQgZXF1YXRpb25zXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICBsb24gPSBhZGp1c3RfbG9uKGxvbiAtIHRoaXMubG9uZzApO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGlmICghdGhpcy5tKSB7XG4gICAgICBsYXQgPSB0aGlzLm4gIT09IDEgPyBNYXRoLmFzaW4odGhpcy5uICogTWF0aC5zaW4obGF0KSkgOiBsYXQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdmFyIGsgPSB0aGlzLm4gKiBNYXRoLnNpbihsYXQpO1xuICAgICAgZm9yICh2YXIgaSA9IE1BWF9JVEVSOyBpOyAtLWkpIHtcbiAgICAgICAgdmFyIFYgPSAodGhpcy5tICogbGF0ICsgTWF0aC5zaW4obGF0KSAtIGspIC8gKHRoaXMubSArIE1hdGguY29zKGxhdCkpO1xuICAgICAgICBsYXQgLT0gVjtcbiAgICAgICAgaWYgKE1hdGguYWJzKFYpIDwgRVBTTE4pIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB4ID0gdGhpcy5hICogdGhpcy5DX3ggKiBsb24gKiAodGhpcy5tICsgTWF0aC5jb3MobGF0KSk7XG4gICAgeSA9IHRoaXMuYSAqIHRoaXMuQ195ICogbGF0O1xuXG4gIH1cbiAgZWxzZSB7XG5cbiAgICB2YXIgcyA9IE1hdGguc2luKGxhdCk7XG4gICAgdmFyIGMgPSBNYXRoLmNvcyhsYXQpO1xuICAgIHkgPSB0aGlzLmEgKiBwal9tbGZuKGxhdCwgcywgYywgdGhpcy5lbik7XG4gICAgeCA9IHRoaXMuYSAqIGxvbiAqIGMgLyBNYXRoLnNxcnQoMSAtIHRoaXMuZXMgKiBzICogcyk7XG4gIH1cblxuICBwLnggPSB4O1xuICBwLnkgPSB5O1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxhdCwgdGVtcCwgbG9uLCBzO1xuXG4gIHAueCAtPSB0aGlzLngwO1xuICBsb24gPSBwLnggLyB0aGlzLmE7XG4gIHAueSAtPSB0aGlzLnkwO1xuICBsYXQgPSBwLnkgLyB0aGlzLmE7XG5cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgbGF0IC89IHRoaXMuQ195O1xuICAgIGxvbiA9IGxvbiAvICh0aGlzLkNfeCAqICh0aGlzLm0gKyBNYXRoLmNvcyhsYXQpKSk7XG4gICAgaWYgKHRoaXMubSkge1xuICAgICAgbGF0ID0gYXNpbnooKHRoaXMubSAqIGxhdCArIE1hdGguc2luKGxhdCkpIC8gdGhpcy5uKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodGhpcy5uICE9PSAxKSB7XG4gICAgICBsYXQgPSBhc2lueihNYXRoLnNpbihsYXQpIC8gdGhpcy5uKTtcbiAgICB9XG4gICAgbG9uID0gYWRqdXN0X2xvbihsb24gKyB0aGlzLmxvbmcwKTtcbiAgICBsYXQgPSBhZGp1c3RfbGF0KGxhdCk7XG4gIH1cbiAgZWxzZSB7XG4gICAgbGF0ID0gcGpfaW52X21sZm4ocC55IC8gdGhpcy5hLCB0aGlzLmVzLCB0aGlzLmVuKTtcbiAgICBzID0gTWF0aC5hYnMobGF0KTtcbiAgICBpZiAocyA8IEhBTEZfUEkpIHtcbiAgICAgIHMgPSBNYXRoLnNpbihsYXQpO1xuICAgICAgdGVtcCA9IHRoaXMubG9uZzAgKyBwLnggKiBNYXRoLnNxcnQoMSAtIHRoaXMuZXMgKiBzICogcykgLyAodGhpcy5hICogTWF0aC5jb3MobGF0KSk7XG4gICAgICAvL3RlbXAgPSB0aGlzLmxvbmcwICsgcC54IC8gKHRoaXMuYSAqIE1hdGguY29zKGxhdCkpO1xuICAgICAgbG9uID0gYWRqdXN0X2xvbih0ZW1wKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoKHMgLSBFUFNMTikgPCBIQUxGX1BJKSB7XG4gICAgICBsb24gPSB0aGlzLmxvbmcwO1xuICAgIH1cbiAgfVxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIlNpbnVzb2lkYWxcIiwgXCJzaW51XCJdOyIsIi8qXG4gIHJlZmVyZW5jZXM6XG4gICAgRm9ybXVsZXMgZXQgY29uc3RhbnRlcyBwb3VyIGxlIENhbGN1bCBwb3VyIGxhXG4gICAgcHJvamVjdGlvbiBjeWxpbmRyaXF1ZSBjb25mb3JtZSDDoCBheGUgb2JsaXF1ZSBldCBwb3VyIGxhIHRyYW5zZm9ybWF0aW9uIGVudHJlXG4gICAgZGVzIHN5c3TDqG1lcyBkZSByw6lmw6lyZW5jZS5cbiAgICBodHRwOi8vd3d3LnN3aXNzdG9wby5hZG1pbi5jaC9pbnRlcm5ldC9zd2lzc3RvcG8vZnIvaG9tZS90b3BpY3Mvc3VydmV5L3N5cy9yZWZzeXMvc3dpdHplcmxhbmQucGFyc3lzcmVsYXRlZDEuMzEyMTYuZG93bmxvYWRMaXN0Ljc3MDA0LkRvd25sb2FkRmlsZS50bXAvc3dpc3Nwcm9qZWN0aW9uZnIucGRmXG4gICovXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBoeTAgPSB0aGlzLmxhdDA7XG4gIHRoaXMubGFtYmRhMCA9IHRoaXMubG9uZzA7XG4gIHZhciBzaW5QaHkwID0gTWF0aC5zaW4ocGh5MCk7XG4gIHZhciBzZW1pTWFqb3JBeGlzID0gdGhpcy5hO1xuICB2YXIgaW52RiA9IHRoaXMucmY7XG4gIHZhciBmbGF0dGVuaW5nID0gMSAvIGludkY7XG4gIHZhciBlMiA9IDIgKiBmbGF0dGVuaW5nIC0gTWF0aC5wb3coZmxhdHRlbmluZywgMik7XG4gIHZhciBlID0gdGhpcy5lID0gTWF0aC5zcXJ0KGUyKTtcbiAgdGhpcy5SID0gdGhpcy5rMCAqIHNlbWlNYWpvckF4aXMgKiBNYXRoLnNxcnQoMSAtIGUyKSAvICgxIC0gZTIgKiBNYXRoLnBvdyhzaW5QaHkwLCAyKSk7XG4gIHRoaXMuYWxwaGEgPSBNYXRoLnNxcnQoMSArIGUyIC8gKDEgLSBlMikgKiBNYXRoLnBvdyhNYXRoLmNvcyhwaHkwKSwgNCkpO1xuICB0aGlzLmIwID0gTWF0aC5hc2luKHNpblBoeTAgLyB0aGlzLmFscGhhKTtcbiAgdmFyIGsxID0gTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAvIDQgKyB0aGlzLmIwIC8gMikpO1xuICB2YXIgazIgPSBNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJIC8gNCArIHBoeTAgLyAyKSk7XG4gIHZhciBrMyA9IE1hdGgubG9nKCgxICsgZSAqIHNpblBoeTApIC8gKDEgLSBlICogc2luUGh5MCkpO1xuICB0aGlzLksgPSBrMSAtIHRoaXMuYWxwaGEgKiBrMiArIHRoaXMuYWxwaGEgKiBlIC8gMiAqIGszO1xufTtcblxuXG5leHBvcnRzLmZvcndhcmQgPSBmdW5jdGlvbihwKSB7XG4gIHZhciBTYTEgPSBNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJIC8gNCAtIHAueSAvIDIpKTtcbiAgdmFyIFNhMiA9IHRoaXMuZSAvIDIgKiBNYXRoLmxvZygoMSArIHRoaXMuZSAqIE1hdGguc2luKHAueSkpIC8gKDEgLSB0aGlzLmUgKiBNYXRoLnNpbihwLnkpKSk7XG4gIHZhciBTID0gLXRoaXMuYWxwaGEgKiAoU2ExICsgU2EyKSArIHRoaXMuSztcblxuICAvLyBzcGhlcmljIGxhdGl0dWRlXG4gIHZhciBiID0gMiAqIChNYXRoLmF0YW4oTWF0aC5leHAoUykpIC0gTWF0aC5QSSAvIDQpO1xuXG4gIC8vIHNwaGVyaWMgbG9uZ2l0dWRlXG4gIHZhciBJID0gdGhpcy5hbHBoYSAqIChwLnggLSB0aGlzLmxhbWJkYTApO1xuXG4gIC8vIHBzb2V1ZG8gZXF1YXRvcmlhbCByb3RhdGlvblxuICB2YXIgcm90SSA9IE1hdGguYXRhbihNYXRoLnNpbihJKSAvIChNYXRoLnNpbih0aGlzLmIwKSAqIE1hdGgudGFuKGIpICsgTWF0aC5jb3ModGhpcy5iMCkgKiBNYXRoLmNvcyhJKSkpO1xuXG4gIHZhciByb3RCID0gTWF0aC5hc2luKE1hdGguY29zKHRoaXMuYjApICogTWF0aC5zaW4oYikgLSBNYXRoLnNpbih0aGlzLmIwKSAqIE1hdGguY29zKGIpICogTWF0aC5jb3MoSSkpO1xuXG4gIHAueSA9IHRoaXMuUiAvIDIgKiBNYXRoLmxvZygoMSArIE1hdGguc2luKHJvdEIpKSAvICgxIC0gTWF0aC5zaW4ocm90QikpKSArIHRoaXMueTA7XG4gIHAueCA9IHRoaXMuUiAqIHJvdEkgKyB0aGlzLngwO1xuICByZXR1cm4gcDtcbn07XG5cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIFkgPSBwLnggLSB0aGlzLngwO1xuICB2YXIgWCA9IHAueSAtIHRoaXMueTA7XG5cbiAgdmFyIHJvdEkgPSBZIC8gdGhpcy5SO1xuICB2YXIgcm90QiA9IDIgKiAoTWF0aC5hdGFuKE1hdGguZXhwKFggLyB0aGlzLlIpKSAtIE1hdGguUEkgLyA0KTtcblxuICB2YXIgYiA9IE1hdGguYXNpbihNYXRoLmNvcyh0aGlzLmIwKSAqIE1hdGguc2luKHJvdEIpICsgTWF0aC5zaW4odGhpcy5iMCkgKiBNYXRoLmNvcyhyb3RCKSAqIE1hdGguY29zKHJvdEkpKTtcbiAgdmFyIEkgPSBNYXRoLmF0YW4oTWF0aC5zaW4ocm90SSkgLyAoTWF0aC5jb3ModGhpcy5iMCkgKiBNYXRoLmNvcyhyb3RJKSAtIE1hdGguc2luKHRoaXMuYjApICogTWF0aC50YW4ocm90QikpKTtcblxuICB2YXIgbGFtYmRhID0gdGhpcy5sYW1iZGEwICsgSSAvIHRoaXMuYWxwaGE7XG5cbiAgdmFyIFMgPSAwO1xuICB2YXIgcGh5ID0gYjtcbiAgdmFyIHByZXZQaHkgPSAtMTAwMDtcbiAgdmFyIGl0ZXJhdGlvbiA9IDA7XG4gIHdoaWxlIChNYXRoLmFicyhwaHkgLSBwcmV2UGh5KSA+IDAuMDAwMDAwMSkge1xuICAgIGlmICgrK2l0ZXJhdGlvbiA+IDIwKSB7XG4gICAgICAvLy4uLnJlcG9ydEVycm9yKFwib21lcmNGd2RJbmZpbml0eVwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy9TID0gTWF0aC5sb2coTWF0aC50YW4oTWF0aC5QSSAvIDQgKyBwaHkgLyAyKSk7XG4gICAgUyA9IDEgLyB0aGlzLmFscGhhICogKE1hdGgubG9nKE1hdGgudGFuKE1hdGguUEkgLyA0ICsgYiAvIDIpKSAtIHRoaXMuSykgKyB0aGlzLmUgKiBNYXRoLmxvZyhNYXRoLnRhbihNYXRoLlBJIC8gNCArIE1hdGguYXNpbih0aGlzLmUgKiBNYXRoLnNpbihwaHkpKSAvIDIpKTtcbiAgICBwcmV2UGh5ID0gcGh5O1xuICAgIHBoeSA9IDIgKiBNYXRoLmF0YW4oTWF0aC5leHAoUykpIC0gTWF0aC5QSSAvIDI7XG4gIH1cblxuICBwLnggPSBsYW1iZGE7XG4gIHAueSA9IHBoeTtcbiAgcmV0dXJuIHA7XG59O1xuXG5leHBvcnRzLm5hbWVzID0gW1wic29tZXJjXCJdO1xuIiwidmFyIEhBTEZfUEkgPSBNYXRoLlBJLzI7XG52YXIgRVBTTE4gPSAxLjBlLTEwO1xudmFyIHNpZ24gPSByZXF1aXJlKCcuLi9jb21tb24vc2lnbicpO1xudmFyIG1zZm56ID0gcmVxdWlyZSgnLi4vY29tbW9uL21zZm56Jyk7XG52YXIgdHNmbnogPSByZXF1aXJlKCcuLi9jb21tb24vdHNmbnonKTtcbnZhciBwaGkyeiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9waGkyeicpO1xudmFyIGFkanVzdF9sb24gPSByZXF1aXJlKCcuLi9jb21tb24vYWRqdXN0X2xvbicpO1xuZXhwb3J0cy5zc2ZuXyA9IGZ1bmN0aW9uKHBoaXQsIHNpbnBoaSwgZWNjZW4pIHtcbiAgc2lucGhpICo9IGVjY2VuO1xuICByZXR1cm4gKE1hdGgudGFuKDAuNSAqIChIQUxGX1BJICsgcGhpdCkpICogTWF0aC5wb3coKDEgLSBzaW5waGkpIC8gKDEgKyBzaW5waGkpLCAwLjUgKiBlY2NlbikpO1xufTtcblxuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIHRoaXMuY29zbGF0MCA9IE1hdGguY29zKHRoaXMubGF0MCk7XG4gIHRoaXMuc2lubGF0MCA9IE1hdGguc2luKHRoaXMubGF0MCk7XG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIGlmICh0aGlzLmswID09PSAxICYmICFpc05hTih0aGlzLmxhdF90cykgJiYgTWF0aC5hYnModGhpcy5jb3NsYXQwKSA8PSBFUFNMTikge1xuICAgICAgdGhpcy5rMCA9IDAuNSAqICgxICsgc2lnbih0aGlzLmxhdDApICogTWF0aC5zaW4odGhpcy5sYXRfdHMpKTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKE1hdGguYWJzKHRoaXMuY29zbGF0MCkgPD0gRVBTTE4pIHtcbiAgICAgIGlmICh0aGlzLmxhdDAgPiAwKSB7XG4gICAgICAgIC8vTm9ydGggcG9sZVxuICAgICAgICAvL3RyYWNlKCdzdGVyZTpub3J0aCBwb2xlJyk7XG4gICAgICAgIHRoaXMuY29uID0gMTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICAvL1NvdXRoIHBvbGVcbiAgICAgICAgLy90cmFjZSgnc3RlcmU6c291dGggcG9sZScpO1xuICAgICAgICB0aGlzLmNvbiA9IC0xO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmNvbnMgPSBNYXRoLnNxcnQoTWF0aC5wb3coMSArIHRoaXMuZSwgMSArIHRoaXMuZSkgKiBNYXRoLnBvdygxIC0gdGhpcy5lLCAxIC0gdGhpcy5lKSk7XG4gICAgaWYgKHRoaXMuazAgPT09IDEgJiYgIWlzTmFOKHRoaXMubGF0X3RzKSAmJiBNYXRoLmFicyh0aGlzLmNvc2xhdDApIDw9IEVQU0xOKSB7XG4gICAgICB0aGlzLmswID0gMC41ICogdGhpcy5jb25zICogbXNmbnoodGhpcy5lLCBNYXRoLnNpbih0aGlzLmxhdF90cyksIE1hdGguY29zKHRoaXMubGF0X3RzKSkgLyB0c2Zueih0aGlzLmUsIHRoaXMuY29uICogdGhpcy5sYXRfdHMsIHRoaXMuY29uICogTWF0aC5zaW4odGhpcy5sYXRfdHMpKTtcbiAgICB9XG4gICAgdGhpcy5tczEgPSBtc2Zueih0aGlzLmUsIHRoaXMuc2lubGF0MCwgdGhpcy5jb3NsYXQwKTtcbiAgICB0aGlzLlgwID0gMiAqIE1hdGguYXRhbih0aGlzLnNzZm5fKHRoaXMubGF0MCwgdGhpcy5zaW5sYXQwLCB0aGlzLmUpKSAtIEhBTEZfUEk7XG4gICAgdGhpcy5jb3NYMCA9IE1hdGguY29zKHRoaXMuWDApO1xuICAgIHRoaXMuc2luWDAgPSBNYXRoLnNpbih0aGlzLlgwKTtcbiAgfVxufTtcblxuLy8gU3RlcmVvZ3JhcGhpYyBmb3J3YXJkIGVxdWF0aW9ucy0tbWFwcGluZyBsYXQsbG9uZyB0byB4LHlcbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcbiAgdmFyIHNpbmxhdCA9IE1hdGguc2luKGxhdCk7XG4gIHZhciBjb3NsYXQgPSBNYXRoLmNvcyhsYXQpO1xuICB2YXIgQSwgWCwgc2luWCwgY29zWCwgdHMsIHJoO1xuICB2YXIgZGxvbiA9IGFkanVzdF9sb24obG9uIC0gdGhpcy5sb25nMCk7XG5cbiAgaWYgKE1hdGguYWJzKE1hdGguYWJzKGxvbiAtIHRoaXMubG9uZzApIC0gTWF0aC5QSSkgPD0gRVBTTE4gJiYgTWF0aC5hYnMobGF0ICsgdGhpcy5sYXQwKSA8PSBFUFNMTikge1xuICAgIC8vY2FzZSBvZiB0aGUgb3JpZ2luZSBwb2ludFxuICAgIC8vdHJhY2UoJ3N0ZXJlOnRoaXMgaXMgdGhlIG9yaWdpbiBwb2ludCcpO1xuICAgIHAueCA9IE5hTjtcbiAgICBwLnkgPSBOYU47XG4gICAgcmV0dXJuIHA7XG4gIH1cbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgLy90cmFjZSgnc3RlcmU6c3BoZXJlIGNhc2UnKTtcbiAgICBBID0gMiAqIHRoaXMuazAgLyAoMSArIHRoaXMuc2lubGF0MCAqIHNpbmxhdCArIHRoaXMuY29zbGF0MCAqIGNvc2xhdCAqIE1hdGguY29zKGRsb24pKTtcbiAgICBwLnggPSB0aGlzLmEgKiBBICogY29zbGF0ICogTWF0aC5zaW4oZGxvbikgKyB0aGlzLngwO1xuICAgIHAueSA9IHRoaXMuYSAqIEEgKiAodGhpcy5jb3NsYXQwICogc2lubGF0IC0gdGhpcy5zaW5sYXQwICogY29zbGF0ICogTWF0aC5jb3MoZGxvbikpICsgdGhpcy55MDtcbiAgICByZXR1cm4gcDtcbiAgfVxuICBlbHNlIHtcbiAgICBYID0gMiAqIE1hdGguYXRhbih0aGlzLnNzZm5fKGxhdCwgc2lubGF0LCB0aGlzLmUpKSAtIEhBTEZfUEk7XG4gICAgY29zWCA9IE1hdGguY29zKFgpO1xuICAgIHNpblggPSBNYXRoLnNpbihYKTtcbiAgICBpZiAoTWF0aC5hYnModGhpcy5jb3NsYXQwKSA8PSBFUFNMTikge1xuICAgICAgdHMgPSB0c2Zueih0aGlzLmUsIGxhdCAqIHRoaXMuY29uLCB0aGlzLmNvbiAqIHNpbmxhdCk7XG4gICAgICByaCA9IDIgKiB0aGlzLmEgKiB0aGlzLmswICogdHMgLyB0aGlzLmNvbnM7XG4gICAgICBwLnggPSB0aGlzLngwICsgcmggKiBNYXRoLnNpbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgICAgIHAueSA9IHRoaXMueTAgLSB0aGlzLmNvbiAqIHJoICogTWF0aC5jb3MobG9uIC0gdGhpcy5sb25nMCk7XG4gICAgICAvL3RyYWNlKHAudG9TdHJpbmcoKSk7XG4gICAgICByZXR1cm4gcDtcbiAgICB9XG4gICAgZWxzZSBpZiAoTWF0aC5hYnModGhpcy5zaW5sYXQwKSA8IEVQU0xOKSB7XG4gICAgICAvL0VxXG4gICAgICAvL3RyYWNlKCdzdGVyZTplcXVhdGV1cicpO1xuICAgICAgQSA9IDIgKiB0aGlzLmEgKiB0aGlzLmswIC8gKDEgKyBjb3NYICogTWF0aC5jb3MoZGxvbikpO1xuICAgICAgcC55ID0gQSAqIHNpblg7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy9vdGhlciBjYXNlXG4gICAgICAvL3RyYWNlKCdzdGVyZTpub3JtYWwgY2FzZScpO1xuICAgICAgQSA9IDIgKiB0aGlzLmEgKiB0aGlzLmswICogdGhpcy5tczEgLyAodGhpcy5jb3NYMCAqICgxICsgdGhpcy5zaW5YMCAqIHNpblggKyB0aGlzLmNvc1gwICogY29zWCAqIE1hdGguY29zKGRsb24pKSk7XG4gICAgICBwLnkgPSBBICogKHRoaXMuY29zWDAgKiBzaW5YIC0gdGhpcy5zaW5YMCAqIGNvc1ggKiBNYXRoLmNvcyhkbG9uKSkgKyB0aGlzLnkwO1xuICAgIH1cbiAgICBwLnggPSBBICogY29zWCAqIE1hdGguc2luKGRsb24pICsgdGhpcy54MDtcbiAgfVxuICAvL3RyYWNlKHAudG9TdHJpbmcoKSk7XG4gIHJldHVybiBwO1xufTtcblxuXG4vLyogU3RlcmVvZ3JhcGhpYyBpbnZlcnNlIGVxdWF0aW9ucy0tbWFwcGluZyB4LHkgdG8gbGF0L2xvbmdcbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgcC54IC09IHRoaXMueDA7XG4gIHAueSAtPSB0aGlzLnkwO1xuICB2YXIgbG9uLCBsYXQsIHRzLCBjZSwgQ2hpO1xuICB2YXIgcmggPSBNYXRoLnNxcnQocC54ICogcC54ICsgcC55ICogcC55KTtcbiAgaWYgKHRoaXMuc3BoZXJlKSB7XG4gICAgdmFyIGMgPSAyICogTWF0aC5hdGFuKHJoIC8gKDAuNSAqIHRoaXMuYSAqIHRoaXMuazApKTtcbiAgICBsb24gPSB0aGlzLmxvbmcwO1xuICAgIGxhdCA9IHRoaXMubGF0MDtcbiAgICBpZiAocmggPD0gRVBTTE4pIHtcbiAgICAgIHAueCA9IGxvbjtcbiAgICAgIHAueSA9IGxhdDtcbiAgICAgIHJldHVybiBwO1xuICAgIH1cbiAgICBsYXQgPSBNYXRoLmFzaW4oTWF0aC5jb3MoYykgKiB0aGlzLnNpbmxhdDAgKyBwLnkgKiBNYXRoLnNpbihjKSAqIHRoaXMuY29zbGF0MCAvIHJoKTtcbiAgICBpZiAoTWF0aC5hYnModGhpcy5jb3NsYXQwKSA8IEVQU0xOKSB7XG4gICAgICBpZiAodGhpcy5sYXQwID4gMCkge1xuICAgICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBNYXRoLmF0YW4yKHAueCwgLSAxICogcC55KSk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgbG9uID0gYWRqdXN0X2xvbih0aGlzLmxvbmcwICsgTWF0aC5hdGFuMihwLngsIHAueSkpO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGxvbiA9IGFkanVzdF9sb24odGhpcy5sb25nMCArIE1hdGguYXRhbjIocC54ICogTWF0aC5zaW4oYyksIHJoICogdGhpcy5jb3NsYXQwICogTWF0aC5jb3MoYykgLSBwLnkgKiB0aGlzLnNpbmxhdDAgKiBNYXRoLnNpbihjKSkpO1xuICAgIH1cbiAgICBwLnggPSBsb247XG4gICAgcC55ID0gbGF0O1xuICAgIHJldHVybiBwO1xuICB9XG4gIGVsc2Uge1xuICAgIGlmIChNYXRoLmFicyh0aGlzLmNvc2xhdDApIDw9IEVQU0xOKSB7XG4gICAgICBpZiAocmggPD0gRVBTTE4pIHtcbiAgICAgICAgbGF0ID0gdGhpcy5sYXQwO1xuICAgICAgICBsb24gPSB0aGlzLmxvbmcwO1xuICAgICAgICBwLnggPSBsb247XG4gICAgICAgIHAueSA9IGxhdDtcbiAgICAgICAgLy90cmFjZShwLnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gcDtcbiAgICAgIH1cbiAgICAgIHAueCAqPSB0aGlzLmNvbjtcbiAgICAgIHAueSAqPSB0aGlzLmNvbjtcbiAgICAgIHRzID0gcmggKiB0aGlzLmNvbnMgLyAoMiAqIHRoaXMuYSAqIHRoaXMuazApO1xuICAgICAgbGF0ID0gdGhpcy5jb24gKiBwaGkyeih0aGlzLmUsIHRzKTtcbiAgICAgIGxvbiA9IHRoaXMuY29uICogYWRqdXN0X2xvbih0aGlzLmNvbiAqIHRoaXMubG9uZzAgKyBNYXRoLmF0YW4yKHAueCwgLSAxICogcC55KSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY2UgPSAyICogTWF0aC5hdGFuKHJoICogdGhpcy5jb3NYMCAvICgyICogdGhpcy5hICogdGhpcy5rMCAqIHRoaXMubXMxKSk7XG4gICAgICBsb24gPSB0aGlzLmxvbmcwO1xuICAgICAgaWYgKHJoIDw9IEVQU0xOKSB7XG4gICAgICAgIENoaSA9IHRoaXMuWDA7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgQ2hpID0gTWF0aC5hc2luKE1hdGguY29zKGNlKSAqIHRoaXMuc2luWDAgKyBwLnkgKiBNYXRoLnNpbihjZSkgKiB0aGlzLmNvc1gwIC8gcmgpO1xuICAgICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBNYXRoLmF0YW4yKHAueCAqIE1hdGguc2luKGNlKSwgcmggKiB0aGlzLmNvc1gwICogTWF0aC5jb3MoY2UpIC0gcC55ICogdGhpcy5zaW5YMCAqIE1hdGguc2luKGNlKSkpO1xuICAgICAgfVxuICAgICAgbGF0ID0gLTEgKiBwaGkyeih0aGlzLmUsIE1hdGgudGFuKDAuNSAqIChIQUxGX1BJICsgQ2hpKSkpO1xuICAgIH1cbiAgfVxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcblxuICAvL3RyYWNlKHAudG9TdHJpbmcoKSk7XG4gIHJldHVybiBwO1xuXG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcInN0ZXJlXCIsIFwiU3RlcmVvZ3JhcGhpY19Tb3V0aF9Qb2xlXCIsIFwiUG9sYXIgU3RlcmVvZ3JhcGhpYyAodmFyaWFudCBCKVwiXTtcbiIsInZhciBnYXVzcyA9IHJlcXVpcmUoJy4vZ2F1c3MnKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICBnYXVzcy5pbml0LmFwcGx5KHRoaXMpO1xuICBpZiAoIXRoaXMucmMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhpcy5zaW5jMCA9IE1hdGguc2luKHRoaXMucGhpYzApO1xuICB0aGlzLmNvc2MwID0gTWF0aC5jb3ModGhpcy5waGljMCk7XG4gIHRoaXMuUjIgPSAyICogdGhpcy5yYztcbiAgaWYgKCF0aGlzLnRpdGxlKSB7XG4gICAgdGhpcy50aXRsZSA9IFwiT2JsaXF1ZSBTdGVyZW9ncmFwaGljIEFsdGVybmF0aXZlXCI7XG4gIH1cbn07XG5cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIHNpbmMsIGNvc2MsIGNvc2wsIGs7XG4gIHAueCA9IGFkanVzdF9sb24ocC54IC0gdGhpcy5sb25nMCk7XG4gIGdhdXNzLmZvcndhcmQuYXBwbHkodGhpcywgW3BdKTtcbiAgc2luYyA9IE1hdGguc2luKHAueSk7XG4gIGNvc2MgPSBNYXRoLmNvcyhwLnkpO1xuICBjb3NsID0gTWF0aC5jb3MocC54KTtcbiAgayA9IHRoaXMuazAgKiB0aGlzLlIyIC8gKDEgKyB0aGlzLnNpbmMwICogc2luYyArIHRoaXMuY29zYzAgKiBjb3NjICogY29zbCk7XG4gIHAueCA9IGsgKiBjb3NjICogTWF0aC5zaW4ocC54KTtcbiAgcC55ID0gayAqICh0aGlzLmNvc2MwICogc2luYyAtIHRoaXMuc2luYzAgKiBjb3NjICogY29zbCk7XG4gIHAueCA9IHRoaXMuYSAqIHAueCArIHRoaXMueDA7XG4gIHAueSA9IHRoaXMuYSAqIHAueSArIHRoaXMueTA7XG4gIHJldHVybiBwO1xufTtcblxuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICB2YXIgc2luYywgY29zYywgbG9uLCBsYXQsIHJobztcbiAgcC54ID0gKHAueCAtIHRoaXMueDApIC8gdGhpcy5hO1xuICBwLnkgPSAocC55IC0gdGhpcy55MCkgLyB0aGlzLmE7XG5cbiAgcC54IC89IHRoaXMuazA7XG4gIHAueSAvPSB0aGlzLmswO1xuICBpZiAoKHJobyA9IE1hdGguc3FydChwLnggKiBwLnggKyBwLnkgKiBwLnkpKSkge1xuICAgIHZhciBjID0gMiAqIE1hdGguYXRhbjIocmhvLCB0aGlzLlIyKTtcbiAgICBzaW5jID0gTWF0aC5zaW4oYyk7XG4gICAgY29zYyA9IE1hdGguY29zKGMpO1xuICAgIGxhdCA9IE1hdGguYXNpbihjb3NjICogdGhpcy5zaW5jMCArIHAueSAqIHNpbmMgKiB0aGlzLmNvc2MwIC8gcmhvKTtcbiAgICBsb24gPSBNYXRoLmF0YW4yKHAueCAqIHNpbmMsIHJobyAqIHRoaXMuY29zYzAgKiBjb3NjIC0gcC55ICogdGhpcy5zaW5jMCAqIHNpbmMpO1xuICB9XG4gIGVsc2Uge1xuICAgIGxhdCA9IHRoaXMucGhpYzA7XG4gICAgbG9uID0gMDtcbiAgfVxuXG4gIHAueCA9IGxvbjtcbiAgcC55ID0gbGF0O1xuICBnYXVzcy5pbnZlcnNlLmFwcGx5KHRoaXMsIFtwXSk7XG4gIHAueCA9IGFkanVzdF9sb24ocC54ICsgdGhpcy5sb25nMCk7XG4gIHJldHVybiBwO1xufTtcblxuZXhwb3J0cy5uYW1lcyA9IFtcIlN0ZXJlb2dyYXBoaWNfTm9ydGhfUG9sZVwiLCBcIk9ibGlxdWVfU3RlcmVvZ3JhcGhpY1wiLCBcIlBvbGFyX1N0ZXJlb2dyYXBoaWNcIiwgXCJzdGVyZWFcIixcIk9ibGlxdWUgU3RlcmVvZ3JhcGhpYyBBbHRlcm5hdGl2ZVwiXTtcbiIsInZhciBlMGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UwZm4nKTtcbnZhciBlMWZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UxZm4nKTtcbnZhciBlMmZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UyZm4nKTtcbnZhciBlM2ZuID0gcmVxdWlyZSgnLi4vY29tbW9uL2UzZm4nKTtcbnZhciBtbGZuID0gcmVxdWlyZSgnLi4vY29tbW9uL21sZm4nKTtcbnZhciBhZGp1c3RfbG9uID0gcmVxdWlyZSgnLi4vY29tbW9uL2FkanVzdF9sb24nKTtcbnZhciBIQUxGX1BJID0gTWF0aC5QSS8yO1xudmFyIEVQU0xOID0gMS4wZS0xMDtcbnZhciBzaWduID0gcmVxdWlyZSgnLi4vY29tbW9uL3NpZ24nKTtcbnZhciBhc2lueiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hc2lueicpO1xuXG5leHBvcnRzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgdGhpcy5lMCA9IGUwZm4odGhpcy5lcyk7XG4gIHRoaXMuZTEgPSBlMWZuKHRoaXMuZXMpO1xuICB0aGlzLmUyID0gZTJmbih0aGlzLmVzKTtcbiAgdGhpcy5lMyA9IGUzZm4odGhpcy5lcyk7XG4gIHRoaXMubWwwID0gdGhpcy5hICogbWxmbih0aGlzLmUwLCB0aGlzLmUxLCB0aGlzLmUyLCB0aGlzLmUzLCB0aGlzLmxhdDApO1xufTtcblxuLyoqXG4gICAgVHJhbnN2ZXJzZSBNZXJjYXRvciBGb3J3YXJkICAtIGxvbmcvbGF0IHRvIHgveVxuICAgIGxvbmcvbGF0IGluIHJhZGlhbnNcbiAgKi9cbmV4cG9ydHMuZm9yd2FyZCA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGxvbiA9IHAueDtcbiAgdmFyIGxhdCA9IHAueTtcblxuICB2YXIgZGVsdGFfbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgdmFyIGNvbjtcbiAgdmFyIHgsIHk7XG4gIHZhciBzaW5fcGhpID0gTWF0aC5zaW4obGF0KTtcbiAgdmFyIGNvc19waGkgPSBNYXRoLmNvcyhsYXQpO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHZhciBiID0gY29zX3BoaSAqIE1hdGguc2luKGRlbHRhX2xvbik7XG4gICAgaWYgKChNYXRoLmFicyhNYXRoLmFicyhiKSAtIDEpKSA8IDAuMDAwMDAwMDAwMSkge1xuICAgICAgcmV0dXJuICg5Myk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgeCA9IDAuNSAqIHRoaXMuYSAqIHRoaXMuazAgKiBNYXRoLmxvZygoMSArIGIpIC8gKDEgLSBiKSk7XG4gICAgICBjb24gPSBNYXRoLmFjb3MoY29zX3BoaSAqIE1hdGguY29zKGRlbHRhX2xvbikgLyBNYXRoLnNxcnQoMSAtIGIgKiBiKSk7XG4gICAgICBpZiAobGF0IDwgMCkge1xuICAgICAgICBjb24gPSAtY29uO1xuICAgICAgfVxuICAgICAgeSA9IHRoaXMuYSAqIHRoaXMuazAgKiAoY29uIC0gdGhpcy5sYXQwKTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7XG4gICAgdmFyIGFsID0gY29zX3BoaSAqIGRlbHRhX2xvbjtcbiAgICB2YXIgYWxzID0gTWF0aC5wb3coYWwsIDIpO1xuICAgIHZhciBjID0gdGhpcy5lcDIgKiBNYXRoLnBvdyhjb3NfcGhpLCAyKTtcbiAgICB2YXIgdHEgPSBNYXRoLnRhbihsYXQpO1xuICAgIHZhciB0ID0gTWF0aC5wb3codHEsIDIpO1xuICAgIGNvbiA9IDEgLSB0aGlzLmVzICogTWF0aC5wb3coc2luX3BoaSwgMik7XG4gICAgdmFyIG4gPSB0aGlzLmEgLyBNYXRoLnNxcnQoY29uKTtcbiAgICB2YXIgbWwgPSB0aGlzLmEgKiBtbGZuKHRoaXMuZTAsIHRoaXMuZTEsIHRoaXMuZTIsIHRoaXMuZTMsIGxhdCk7XG5cbiAgICB4ID0gdGhpcy5rMCAqIG4gKiBhbCAqICgxICsgYWxzIC8gNiAqICgxIC0gdCArIGMgKyBhbHMgLyAyMCAqICg1IC0gMTggKiB0ICsgTWF0aC5wb3codCwgMikgKyA3MiAqIGMgLSA1OCAqIHRoaXMuZXAyKSkpICsgdGhpcy54MDtcbiAgICB5ID0gdGhpcy5rMCAqIChtbCAtIHRoaXMubWwwICsgbiAqIHRxICogKGFscyAqICgwLjUgKyBhbHMgLyAyNCAqICg1IC0gdCArIDkgKiBjICsgNCAqIE1hdGgucG93KGMsIDIpICsgYWxzIC8gMzAgKiAoNjEgLSA1OCAqIHQgKyBNYXRoLnBvdyh0LCAyKSArIDYwMCAqIGMgLSAzMzAgKiB0aGlzLmVwMikpKSkpICsgdGhpcy55MDtcblxuICB9XG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG4gIHJldHVybiBwO1xufTtcblxuLyoqXG4gICAgVHJhbnN2ZXJzZSBNZXJjYXRvciBJbnZlcnNlICAtICB4L3kgdG8gbG9uZy9sYXRcbiAgKi9cbmV4cG9ydHMuaW52ZXJzZSA9IGZ1bmN0aW9uKHApIHtcbiAgdmFyIGNvbiwgcGhpO1xuICB2YXIgZGVsdGFfcGhpO1xuICB2YXIgaTtcbiAgdmFyIG1heF9pdGVyID0gNjtcbiAgdmFyIGxhdCwgbG9uO1xuXG4gIGlmICh0aGlzLnNwaGVyZSkge1xuICAgIHZhciBmID0gTWF0aC5leHAocC54IC8gKHRoaXMuYSAqIHRoaXMuazApKTtcbiAgICB2YXIgZyA9IDAuNSAqIChmIC0gMSAvIGYpO1xuICAgIHZhciB0ZW1wID0gdGhpcy5sYXQwICsgcC55IC8gKHRoaXMuYSAqIHRoaXMuazApO1xuICAgIHZhciBoID0gTWF0aC5jb3ModGVtcCk7XG4gICAgY29uID0gTWF0aC5zcXJ0KCgxIC0gaCAqIGgpIC8gKDEgKyBnICogZykpO1xuICAgIGxhdCA9IGFzaW56KGNvbik7XG4gICAgaWYgKHRlbXAgPCAwKSB7XG4gICAgICBsYXQgPSAtbGF0O1xuICAgIH1cbiAgICBpZiAoKGcgPT09IDApICYmIChoID09PSAwKSkge1xuICAgICAgbG9uID0gdGhpcy5sb25nMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBsb24gPSBhZGp1c3RfbG9uKE1hdGguYXRhbjIoZywgaCkgKyB0aGlzLmxvbmcwKTtcbiAgICB9XG4gIH1cbiAgZWxzZSB7IC8vIGVsbGlwc29pZGFsIGZvcm1cbiAgICB2YXIgeCA9IHAueCAtIHRoaXMueDA7XG4gICAgdmFyIHkgPSBwLnkgLSB0aGlzLnkwO1xuXG4gICAgY29uID0gKHRoaXMubWwwICsgeSAvIHRoaXMuazApIC8gdGhpcy5hO1xuICAgIHBoaSA9IGNvbjtcbiAgICBmb3IgKGkgPSAwOyB0cnVlOyBpKyspIHtcbiAgICAgIGRlbHRhX3BoaSA9ICgoY29uICsgdGhpcy5lMSAqIE1hdGguc2luKDIgKiBwaGkpIC0gdGhpcy5lMiAqIE1hdGguc2luKDQgKiBwaGkpICsgdGhpcy5lMyAqIE1hdGguc2luKDYgKiBwaGkpKSAvIHRoaXMuZTApIC0gcGhpO1xuICAgICAgcGhpICs9IGRlbHRhX3BoaTtcbiAgICAgIGlmIChNYXRoLmFicyhkZWx0YV9waGkpIDw9IEVQU0xOKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGkgPj0gbWF4X2l0ZXIpIHtcbiAgICAgICAgcmV0dXJuICg5NSk7XG4gICAgICB9XG4gICAgfSAvLyBmb3IoKVxuICAgIGlmIChNYXRoLmFicyhwaGkpIDwgSEFMRl9QSSkge1xuICAgICAgdmFyIHNpbl9waGkgPSBNYXRoLnNpbihwaGkpO1xuICAgICAgdmFyIGNvc19waGkgPSBNYXRoLmNvcyhwaGkpO1xuICAgICAgdmFyIHRhbl9waGkgPSBNYXRoLnRhbihwaGkpO1xuICAgICAgdmFyIGMgPSB0aGlzLmVwMiAqIE1hdGgucG93KGNvc19waGksIDIpO1xuICAgICAgdmFyIGNzID0gTWF0aC5wb3coYywgMik7XG4gICAgICB2YXIgdCA9IE1hdGgucG93KHRhbl9waGksIDIpO1xuICAgICAgdmFyIHRzID0gTWF0aC5wb3codCwgMik7XG4gICAgICBjb24gPSAxIC0gdGhpcy5lcyAqIE1hdGgucG93KHNpbl9waGksIDIpO1xuICAgICAgdmFyIG4gPSB0aGlzLmEgLyBNYXRoLnNxcnQoY29uKTtcbiAgICAgIHZhciByID0gbiAqICgxIC0gdGhpcy5lcykgLyBjb247XG4gICAgICB2YXIgZCA9IHggLyAobiAqIHRoaXMuazApO1xuICAgICAgdmFyIGRzID0gTWF0aC5wb3coZCwgMik7XG4gICAgICBsYXQgPSBwaGkgLSAobiAqIHRhbl9waGkgKiBkcyAvIHIpICogKDAuNSAtIGRzIC8gMjQgKiAoNSArIDMgKiB0ICsgMTAgKiBjIC0gNCAqIGNzIC0gOSAqIHRoaXMuZXAyIC0gZHMgLyAzMCAqICg2MSArIDkwICogdCArIDI5OCAqIGMgKyA0NSAqIHRzIC0gMjUyICogdGhpcy5lcDIgLSAzICogY3MpKSk7XG4gICAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyAoZCAqICgxIC0gZHMgLyA2ICogKDEgKyAyICogdCArIGMgLSBkcyAvIDIwICogKDUgLSAyICogYyArIDI4ICogdCAtIDMgKiBjcyArIDggKiB0aGlzLmVwMiArIDI0ICogdHMpKSkgLyBjb3NfcGhpKSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgbGF0ID0gSEFMRl9QSSAqIHNpZ24oeSk7XG4gICAgICBsb24gPSB0aGlzLmxvbmcwO1xuICAgIH1cbiAgfVxuICBwLnggPSBsb247XG4gIHAueSA9IGxhdDtcbiAgcmV0dXJuIHA7XG59O1xuZXhwb3J0cy5uYW1lcyA9IFtcIlRyYW5zdmVyc2VfTWVyY2F0b3JcIiwgXCJUcmFuc3ZlcnNlIE1lcmNhdG9yXCIsIFwidG1lcmNcIl07XG4iLCJ2YXIgRDJSID0gMC4wMTc0NTMyOTI1MTk5NDMyOTU3NztcbnZhciB0bWVyYyA9IHJlcXVpcmUoJy4vdG1lcmMnKTtcbmV4cG9ydHMuZGVwZW5kc09uID0gJ3RtZXJjJztcbmV4cG9ydHMuaW5pdCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIXRoaXMuem9uZSkge1xuICAgIHJldHVybjtcbiAgfVxuICB0aGlzLmxhdDAgPSAwO1xuICB0aGlzLmxvbmcwID0gKCg2ICogTWF0aC5hYnModGhpcy56b25lKSkgLSAxODMpICogRDJSO1xuICB0aGlzLngwID0gNTAwMDAwO1xuICB0aGlzLnkwID0gdGhpcy51dG1Tb3V0aCA/IDEwMDAwMDAwIDogMDtcbiAgdGhpcy5rMCA9IDAuOTk5NjtcblxuICB0bWVyYy5pbml0LmFwcGx5KHRoaXMpO1xuICB0aGlzLmZvcndhcmQgPSB0bWVyYy5mb3J3YXJkO1xuICB0aGlzLmludmVyc2UgPSB0bWVyYy5pbnZlcnNlO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJVbml2ZXJzYWwgVHJhbnN2ZXJzZSBNZXJjYXRvciBTeXN0ZW1cIiwgXCJ1dG1cIl07XG4iLCJ2YXIgYWRqdXN0X2xvbiA9IHJlcXVpcmUoJy4uL2NvbW1vbi9hZGp1c3RfbG9uJyk7XG52YXIgSEFMRl9QSSA9IE1hdGguUEkvMjtcbnZhciBFUFNMTiA9IDEuMGUtMTA7XG52YXIgYXNpbnogPSByZXF1aXJlKCcuLi9jb21tb24vYXNpbnonKTtcbi8qIEluaXRpYWxpemUgdGhlIFZhbiBEZXIgR3JpbnRlbiBwcm9qZWN0aW9uXG4gIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gIC8vdGhpcy5SID0gNjM3MDk5NzsgLy9SYWRpdXMgb2YgZWFydGhcbiAgdGhpcy5SID0gdGhpcy5hO1xufTtcblxuZXhwb3J0cy5mb3J3YXJkID0gZnVuY3Rpb24ocCkge1xuXG4gIHZhciBsb24gPSBwLng7XG4gIHZhciBsYXQgPSBwLnk7XG5cbiAgLyogRm9yd2FyZCBlcXVhdGlvbnNcbiAgICAtLS0tLS0tLS0tLS0tLS0tLSovXG4gIHZhciBkbG9uID0gYWRqdXN0X2xvbihsb24gLSB0aGlzLmxvbmcwKTtcbiAgdmFyIHgsIHk7XG5cbiAgaWYgKE1hdGguYWJzKGxhdCkgPD0gRVBTTE4pIHtcbiAgICB4ID0gdGhpcy54MCArIHRoaXMuUiAqIGRsb247XG4gICAgeSA9IHRoaXMueTA7XG4gIH1cbiAgdmFyIHRoZXRhID0gYXNpbnooMiAqIE1hdGguYWJzKGxhdCAvIE1hdGguUEkpKTtcbiAgaWYgKChNYXRoLmFicyhkbG9uKSA8PSBFUFNMTikgfHwgKE1hdGguYWJzKE1hdGguYWJzKGxhdCkgLSBIQUxGX1BJKSA8PSBFUFNMTikpIHtcbiAgICB4ID0gdGhpcy54MDtcbiAgICBpZiAobGF0ID49IDApIHtcbiAgICAgIHkgPSB0aGlzLnkwICsgTWF0aC5QSSAqIHRoaXMuUiAqIE1hdGgudGFuKDAuNSAqIHRoZXRhKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB5ID0gdGhpcy55MCArIE1hdGguUEkgKiB0aGlzLlIgKiAtTWF0aC50YW4oMC41ICogdGhldGEpO1xuICAgIH1cbiAgICAvLyAgcmV0dXJuKE9LKTtcbiAgfVxuICB2YXIgYWwgPSAwLjUgKiBNYXRoLmFicygoTWF0aC5QSSAvIGRsb24pIC0gKGRsb24gLyBNYXRoLlBJKSk7XG4gIHZhciBhc3EgPSBhbCAqIGFsO1xuICB2YXIgc2ludGggPSBNYXRoLnNpbih0aGV0YSk7XG4gIHZhciBjb3N0aCA9IE1hdGguY29zKHRoZXRhKTtcblxuICB2YXIgZyA9IGNvc3RoIC8gKHNpbnRoICsgY29zdGggLSAxKTtcbiAgdmFyIGdzcSA9IGcgKiBnO1xuICB2YXIgbSA9IGcgKiAoMiAvIHNpbnRoIC0gMSk7XG4gIHZhciBtc3EgPSBtICogbTtcbiAgdmFyIGNvbiA9IE1hdGguUEkgKiB0aGlzLlIgKiAoYWwgKiAoZyAtIG1zcSkgKyBNYXRoLnNxcnQoYXNxICogKGcgLSBtc3EpICogKGcgLSBtc3EpIC0gKG1zcSArIGFzcSkgKiAoZ3NxIC0gbXNxKSkpIC8gKG1zcSArIGFzcSk7XG4gIGlmIChkbG9uIDwgMCkge1xuICAgIGNvbiA9IC1jb247XG4gIH1cbiAgeCA9IHRoaXMueDAgKyBjb247XG4gIC8vY29uID0gTWF0aC5hYnMoY29uIC8gKE1hdGguUEkgKiB0aGlzLlIpKTtcbiAgdmFyIHEgPSBhc3EgKyBnO1xuICBjb24gPSBNYXRoLlBJICogdGhpcy5SICogKG0gKiBxIC0gYWwgKiBNYXRoLnNxcnQoKG1zcSArIGFzcSkgKiAoYXNxICsgMSkgLSBxICogcSkpIC8gKG1zcSArIGFzcSk7XG4gIGlmIChsYXQgPj0gMCkge1xuICAgIC8veSA9IHRoaXMueTAgKyBNYXRoLlBJICogdGhpcy5SICogTWF0aC5zcXJ0KDEgLSBjb24gKiBjb24gLSAyICogYWwgKiBjb24pO1xuICAgIHkgPSB0aGlzLnkwICsgY29uO1xuICB9XG4gIGVsc2Uge1xuICAgIC8veSA9IHRoaXMueTAgLSBNYXRoLlBJICogdGhpcy5SICogTWF0aC5zcXJ0KDEgLSBjb24gKiBjb24gLSAyICogYWwgKiBjb24pO1xuICAgIHkgPSB0aGlzLnkwIC0gY29uO1xuICB9XG4gIHAueCA9IHg7XG4gIHAueSA9IHk7XG4gIHJldHVybiBwO1xufTtcblxuLyogVmFuIERlciBHcmludGVuIGludmVyc2UgZXF1YXRpb25zLS1tYXBwaW5nIHgseSB0byBsYXQvbG9uZ1xuICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuZXhwb3J0cy5pbnZlcnNlID0gZnVuY3Rpb24ocCkge1xuICB2YXIgbG9uLCBsYXQ7XG4gIHZhciB4eCwgeXksIHh5cywgYzEsIGMyLCBjMztcbiAgdmFyIGExO1xuICB2YXIgbTE7XG4gIHZhciBjb247XG4gIHZhciB0aDE7XG4gIHZhciBkO1xuXG4gIC8qIGludmVyc2UgZXF1YXRpb25zXG4gICAgLS0tLS0tLS0tLS0tLS0tLS0qL1xuICBwLnggLT0gdGhpcy54MDtcbiAgcC55IC09IHRoaXMueTA7XG4gIGNvbiA9IE1hdGguUEkgKiB0aGlzLlI7XG4gIHh4ID0gcC54IC8gY29uO1xuICB5eSA9IHAueSAvIGNvbjtcbiAgeHlzID0geHggKiB4eCArIHl5ICogeXk7XG4gIGMxID0gLU1hdGguYWJzKHl5KSAqICgxICsgeHlzKTtcbiAgYzIgPSBjMSAtIDIgKiB5eSAqIHl5ICsgeHggKiB4eDtcbiAgYzMgPSAtMiAqIGMxICsgMSArIDIgKiB5eSAqIHl5ICsgeHlzICogeHlzO1xuICBkID0geXkgKiB5eSAvIGMzICsgKDIgKiBjMiAqIGMyICogYzIgLyBjMyAvIGMzIC8gYzMgLSA5ICogYzEgKiBjMiAvIGMzIC8gYzMpIC8gMjc7XG4gIGExID0gKGMxIC0gYzIgKiBjMiAvIDMgLyBjMykgLyBjMztcbiAgbTEgPSAyICogTWF0aC5zcXJ0KC1hMSAvIDMpO1xuICBjb24gPSAoKDMgKiBkKSAvIGExKSAvIG0xO1xuICBpZiAoTWF0aC5hYnMoY29uKSA+IDEpIHtcbiAgICBpZiAoY29uID49IDApIHtcbiAgICAgIGNvbiA9IDE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uID0gLTE7XG4gICAgfVxuICB9XG4gIHRoMSA9IE1hdGguYWNvcyhjb24pIC8gMztcbiAgaWYgKHAueSA+PSAwKSB7XG4gICAgbGF0ID0gKC1tMSAqIE1hdGguY29zKHRoMSArIE1hdGguUEkgLyAzKSAtIGMyIC8gMyAvIGMzKSAqIE1hdGguUEk7XG4gIH1cbiAgZWxzZSB7XG4gICAgbGF0ID0gLSgtbTEgKiBNYXRoLmNvcyh0aDEgKyBNYXRoLlBJIC8gMykgLSBjMiAvIDMgLyBjMykgKiBNYXRoLlBJO1xuICB9XG5cbiAgaWYgKE1hdGguYWJzKHh4KSA8IEVQU0xOKSB7XG4gICAgbG9uID0gdGhpcy5sb25nMDtcbiAgfVxuICBlbHNlIHtcbiAgICBsb24gPSBhZGp1c3RfbG9uKHRoaXMubG9uZzAgKyBNYXRoLlBJICogKHh5cyAtIDEgKyBNYXRoLnNxcnQoMSArIDIgKiAoeHggKiB4eCAtIHl5ICogeXkpICsgeHlzICogeHlzKSkgLyAyIC8geHgpO1xuICB9XG5cbiAgcC54ID0gbG9uO1xuICBwLnkgPSBsYXQ7XG4gIHJldHVybiBwO1xufTtcbmV4cG9ydHMubmFtZXMgPSBbXCJWYW5fZGVyX0dyaW50ZW5fSVwiLCBcIlZhbkRlckdyaW50ZW5cIiwgXCJ2YW5kZ1wiXTsiLCJ2YXIgRDJSID0gMC4wMTc0NTMyOTI1MTk5NDMyOTU3NztcbnZhciBSMkQgPSA1Ny4yOTU3Nzk1MTMwODIzMjA4ODtcbnZhciBQSkRfM1BBUkFNID0gMTtcbnZhciBQSkRfN1BBUkFNID0gMjtcbnZhciBkYXR1bV90cmFuc2Zvcm0gPSByZXF1aXJlKCcuL2RhdHVtX3RyYW5zZm9ybScpO1xudmFyIGFkanVzdF9heGlzID0gcmVxdWlyZSgnLi9hZGp1c3RfYXhpcycpO1xudmFyIHByb2ogPSByZXF1aXJlKCcuL1Byb2onKTtcbnZhciB0b1BvaW50ID0gcmVxdWlyZSgnLi9jb21tb24vdG9Qb2ludCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB0cmFuc2Zvcm0oc291cmNlLCBkZXN0LCBwb2ludCkge1xuICB2YXIgd2dzODQ7XG4gIGlmIChBcnJheS5pc0FycmF5KHBvaW50KSkge1xuICAgIHBvaW50ID0gdG9Qb2ludChwb2ludCk7XG4gIH1cbiAgZnVuY3Rpb24gY2hlY2tOb3RXR1Moc291cmNlLCBkZXN0KSB7XG4gICAgcmV0dXJuICgoc291cmNlLmRhdHVtLmRhdHVtX3R5cGUgPT09IFBKRF8zUEFSQU0gfHwgc291cmNlLmRhdHVtLmRhdHVtX3R5cGUgPT09IFBKRF83UEFSQU0pICYmIGRlc3QuZGF0dW1Db2RlICE9PSBcIldHUzg0XCIpO1xuICB9XG5cbiAgLy8gV29ya2Fyb3VuZCBmb3IgZGF0dW0gc2hpZnRzIHRvd2dzODQsIGlmIGVpdGhlciBzb3VyY2Ugb3IgZGVzdGluYXRpb24gcHJvamVjdGlvbiBpcyBub3Qgd2dzODRcbiAgaWYgKHNvdXJjZS5kYXR1bSAmJiBkZXN0LmRhdHVtICYmIChjaGVja05vdFdHUyhzb3VyY2UsIGRlc3QpIHx8IGNoZWNrTm90V0dTKGRlc3QsIHNvdXJjZSkpKSB7XG4gICAgd2dzODQgPSBuZXcgcHJvaignV0dTODQnKTtcbiAgICB0cmFuc2Zvcm0oc291cmNlLCB3Z3M4NCwgcG9pbnQpO1xuICAgIHNvdXJjZSA9IHdnczg0O1xuICB9XG4gIC8vIERHUiwgMjAxMC8xMS8xMlxuICBpZiAoc291cmNlLmF4aXMgIT09IFwiZW51XCIpIHtcbiAgICBhZGp1c3RfYXhpcyhzb3VyY2UsIGZhbHNlLCBwb2ludCk7XG4gIH1cbiAgLy8gVHJhbnNmb3JtIHNvdXJjZSBwb2ludHMgdG8gbG9uZy9sYXQsIGlmIHRoZXkgYXJlbid0IGFscmVhZHkuXG4gIGlmIChzb3VyY2UucHJvak5hbWUgPT09IFwibG9uZ2xhdFwiKSB7XG4gICAgcG9pbnQueCAqPSBEMlI7IC8vIGNvbnZlcnQgZGVncmVlcyB0byByYWRpYW5zXG4gICAgcG9pbnQueSAqPSBEMlI7XG4gIH1cbiAgZWxzZSB7XG4gICAgaWYgKHNvdXJjZS50b19tZXRlcikge1xuICAgICAgcG9pbnQueCAqPSBzb3VyY2UudG9fbWV0ZXI7XG4gICAgICBwb2ludC55ICo9IHNvdXJjZS50b19tZXRlcjtcbiAgICB9XG4gICAgc291cmNlLmludmVyc2UocG9pbnQpOyAvLyBDb252ZXJ0IENhcnRlc2lhbiB0byBsb25nbGF0XG4gIH1cbiAgLy8gQWRqdXN0IGZvciB0aGUgcHJpbWUgbWVyaWRpYW4gaWYgbmVjZXNzYXJ5XG4gIGlmIChzb3VyY2UuZnJvbV9ncmVlbndpY2gpIHtcbiAgICBwb2ludC54ICs9IHNvdXJjZS5mcm9tX2dyZWVud2ljaDtcbiAgfVxuXG4gIC8vIENvbnZlcnQgZGF0dW1zIGlmIG5lZWRlZCwgYW5kIGlmIHBvc3NpYmxlLlxuICBwb2ludCA9IGRhdHVtX3RyYW5zZm9ybShzb3VyY2UuZGF0dW0sIGRlc3QuZGF0dW0sIHBvaW50KTtcblxuICAvLyBBZGp1c3QgZm9yIHRoZSBwcmltZSBtZXJpZGlhbiBpZiBuZWNlc3NhcnlcbiAgaWYgKGRlc3QuZnJvbV9ncmVlbndpY2gpIHtcbiAgICBwb2ludC54IC09IGRlc3QuZnJvbV9ncmVlbndpY2g7XG4gIH1cblxuICBpZiAoZGVzdC5wcm9qTmFtZSA9PT0gXCJsb25nbGF0XCIpIHtcbiAgICAvLyBjb252ZXJ0IHJhZGlhbnMgdG8gZGVjaW1hbCBkZWdyZWVzXG4gICAgcG9pbnQueCAqPSBSMkQ7XG4gICAgcG9pbnQueSAqPSBSMkQ7XG4gIH1cbiAgZWxzZSB7IC8vIGVsc2UgcHJvamVjdFxuICAgIGRlc3QuZm9yd2FyZChwb2ludCk7XG4gICAgaWYgKGRlc3QudG9fbWV0ZXIpIHtcbiAgICAgIHBvaW50LnggLz0gZGVzdC50b19tZXRlcjtcbiAgICAgIHBvaW50LnkgLz0gZGVzdC50b19tZXRlcjtcbiAgICB9XG4gIH1cblxuICAvLyBER1IsIDIwMTAvMTEvMTJcbiAgaWYgKGRlc3QuYXhpcyAhPT0gXCJlbnVcIikge1xuICAgIGFkanVzdF9heGlzKGRlc3QsIHRydWUsIHBvaW50KTtcbiAgfVxuXG4gIHJldHVybiBwb2ludDtcbn07IiwidmFyIEQyUiA9IDAuMDE3NDUzMjkyNTE5OTQzMjk1Nzc7XG52YXIgZXh0ZW5kID0gcmVxdWlyZSgnLi9leHRlbmQnKTtcblxuZnVuY3Rpb24gbWFwaXQob2JqLCBrZXksIHYpIHtcbiAgb2JqW2tleV0gPSB2Lm1hcChmdW5jdGlvbihhYSkge1xuICAgIHZhciBvID0ge307XG4gICAgc0V4cHIoYWEsIG8pO1xuICAgIHJldHVybiBvO1xuICB9KS5yZWR1Y2UoZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBleHRlbmQoYSwgYik7XG4gIH0sIHt9KTtcbn1cblxuZnVuY3Rpb24gc0V4cHIodiwgb2JqKSB7XG4gIHZhciBrZXk7XG4gIGlmICghQXJyYXkuaXNBcnJheSh2KSkge1xuICAgIG9ialt2XSA9IHRydWU7XG4gICAgcmV0dXJuO1xuICB9XG4gIGVsc2Uge1xuICAgIGtleSA9IHYuc2hpZnQoKTtcbiAgICBpZiAoa2V5ID09PSAnUEFSQU1FVEVSJykge1xuICAgICAga2V5ID0gdi5zaGlmdCgpO1xuICAgIH1cbiAgICBpZiAodi5sZW5ndGggPT09IDEpIHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZbMF0pKSB7XG4gICAgICAgIG9ialtrZXldID0ge307XG4gICAgICAgIHNFeHByKHZbMF0sIG9ialtrZXldKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBvYmpba2V5XSA9IHZbMF07XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKCF2Lmxlbmd0aCkge1xuICAgICAgb2JqW2tleV0gPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIGlmIChrZXkgPT09ICdUT1dHUzg0Jykge1xuICAgICAgb2JqW2tleV0gPSB2O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIG9ialtrZXldID0ge307XG4gICAgICBpZiAoWydVTklUJywgJ1BSSU1FTScsICdWRVJUX0RBVFVNJ10uaW5kZXhPZihrZXkpID4gLTEpIHtcbiAgICAgICAgb2JqW2tleV0gPSB7XG4gICAgICAgICAgbmFtZTogdlswXS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIGNvbnZlcnQ6IHZbMV1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHYubGVuZ3RoID09PSAzKSB7XG4gICAgICAgICAgb2JqW2tleV0uYXV0aCA9IHZbMl07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGtleSA9PT0gJ1NQSEVST0lEJykge1xuICAgICAgICBvYmpba2V5XSA9IHtcbiAgICAgICAgICBuYW1lOiB2WzBdLFxuICAgICAgICAgIGE6IHZbMV0sXG4gICAgICAgICAgcmY6IHZbMl1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHYubGVuZ3RoID09PSA0KSB7XG4gICAgICAgICAgb2JqW2tleV0uYXV0aCA9IHZbM107XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKFsnR0VPR0NTJywgJ0dFT0NDUycsICdEQVRVTScsICdWRVJUX0NTJywgJ0NPTVBEX0NTJywgJ0xPQ0FMX0NTJywgJ0ZJVFRFRF9DUycsICdMT0NBTF9EQVRVTSddLmluZGV4T2Yoa2V5KSA+IC0xKSB7XG4gICAgICAgIHZbMF0gPSBbJ25hbWUnLCB2WzBdXTtcbiAgICAgICAgbWFwaXQob2JqLCBrZXksIHYpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAodi5ldmVyeShmdW5jdGlvbihhYSkge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhYSk7XG4gICAgICB9KSkge1xuICAgICAgICBtYXBpdChvYmosIGtleSwgdik7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc0V4cHIodiwgb2JqW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZW5hbWUob2JqLCBwYXJhbXMpIHtcbiAgdmFyIG91dE5hbWUgPSBwYXJhbXNbMF07XG4gIHZhciBpbk5hbWUgPSBwYXJhbXNbMV07XG4gIGlmICghKG91dE5hbWUgaW4gb2JqKSAmJiAoaW5OYW1lIGluIG9iaikpIHtcbiAgICBvYmpbb3V0TmFtZV0gPSBvYmpbaW5OYW1lXTtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMykge1xuICAgICAgb2JqW291dE5hbWVdID0gcGFyYW1zWzJdKG9ialtvdXROYW1lXSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGQycihpbnB1dCkge1xuICByZXR1cm4gaW5wdXQgKiBEMlI7XG59XG5cbmZ1bmN0aW9uIGNsZWFuV0tUKHdrdCkge1xuICBpZiAod2t0LnR5cGUgPT09ICdHRU9HQ1MnKSB7XG4gICAgd2t0LnByb2pOYW1lID0gJ2xvbmdsYXQnO1xuICB9XG4gIGVsc2UgaWYgKHdrdC50eXBlID09PSAnTE9DQUxfQ1MnKSB7XG4gICAgd2t0LnByb2pOYW1lID0gJ2lkZW50aXR5JztcbiAgICB3a3QubG9jYWwgPSB0cnVlO1xuICB9XG4gIGVsc2Uge1xuICAgIGlmICh0eXBlb2Ygd2t0LlBST0pFQ1RJT04gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgIHdrdC5wcm9qTmFtZSA9IE9iamVjdC5rZXlzKHdrdC5QUk9KRUNUSU9OKVswXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB3a3QucHJvak5hbWUgPSB3a3QuUFJPSkVDVElPTjtcbiAgICB9XG4gIH1cbiAgaWYgKHdrdC5VTklUKSB7XG4gICAgd2t0LnVuaXRzID0gd2t0LlVOSVQubmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh3a3QudW5pdHMgPT09ICdtZXRyZScpIHtcbiAgICAgIHdrdC51bml0cyA9ICdtZXRlcic7XG4gICAgfVxuICAgIGlmICh3a3QuVU5JVC5jb252ZXJ0KSB7XG4gICAgICB3a3QudG9fbWV0ZXIgPSBwYXJzZUZsb2F0KHdrdC5VTklULmNvbnZlcnQsIDEwKTtcbiAgICB9XG4gIH1cblxuICBpZiAod2t0LkdFT0dDUykge1xuICAgIC8vaWYod2t0LkdFT0dDUy5QUklNRU0mJndrdC5HRU9HQ1MuUFJJTUVNLmNvbnZlcnQpe1xuICAgIC8vICB3a3QuZnJvbV9ncmVlbndpY2g9d2t0LkdFT0dDUy5QUklNRU0uY29udmVydCpEMlI7XG4gICAgLy99XG4gICAgaWYgKHdrdC5HRU9HQ1MuREFUVU0pIHtcbiAgICAgIHdrdC5kYXR1bUNvZGUgPSB3a3QuR0VPR0NTLkRBVFVNLm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB3a3QuZGF0dW1Db2RlID0gd2t0LkdFT0dDUy5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIGlmICh3a3QuZGF0dW1Db2RlLnNsaWNlKDAsIDIpID09PSAnZF8nKSB7XG4gICAgICB3a3QuZGF0dW1Db2RlID0gd2t0LmRhdHVtQ29kZS5zbGljZSgyKTtcbiAgICB9XG4gICAgaWYgKHdrdC5kYXR1bUNvZGUgPT09ICduZXdfemVhbGFuZF9nZW9kZXRpY19kYXR1bV8xOTQ5JyB8fCB3a3QuZGF0dW1Db2RlID09PSAnbmV3X3plYWxhbmRfMTk0OScpIHtcbiAgICAgIHdrdC5kYXR1bUNvZGUgPSAnbnpnZDQ5JztcbiAgICB9XG4gICAgaWYgKHdrdC5kYXR1bUNvZGUgPT09IFwid2dzXzE5ODRcIikge1xuICAgICAgaWYgKHdrdC5QUk9KRUNUSU9OID09PSAnTWVyY2F0b3JfQXV4aWxpYXJ5X1NwaGVyZScpIHtcbiAgICAgICAgd2t0LnNwaGVyZSA9IHRydWU7XG4gICAgICB9XG4gICAgICB3a3QuZGF0dW1Db2RlID0gJ3dnczg0JztcbiAgICB9XG4gICAgaWYgKHdrdC5kYXR1bUNvZGUuc2xpY2UoLTYpID09PSAnX2ZlcnJvJykge1xuICAgICAgd2t0LmRhdHVtQ29kZSA9IHdrdC5kYXR1bUNvZGUuc2xpY2UoMCwgLSA2KTtcbiAgICB9XG4gICAgaWYgKHdrdC5kYXR1bUNvZGUuc2xpY2UoLTgpID09PSAnX2pha2FydGEnKSB7XG4gICAgICB3a3QuZGF0dW1Db2RlID0gd2t0LmRhdHVtQ29kZS5zbGljZSgwLCAtIDgpO1xuICAgIH1cbiAgICBpZiAofndrdC5kYXR1bUNvZGUuaW5kZXhPZignYmVsZ2UnKSkge1xuICAgICAgd2t0LmRhdHVtQ29kZSA9IFwicm5iNzJcIjtcbiAgICB9XG4gICAgaWYgKHdrdC5HRU9HQ1MuREFUVU0gJiYgd2t0LkdFT0dDUy5EQVRVTS5TUEhFUk9JRCkge1xuICAgICAgd2t0LmVsbHBzID0gd2t0LkdFT0dDUy5EQVRVTS5TUEhFUk9JRC5uYW1lLnJlcGxhY2UoJ18xOScsICcnKS5yZXBsYWNlKC9bQ2NdbGFya2VcXF8xOC8sICdjbHJrJyk7XG4gICAgICBpZiAod2t0LmVsbHBzLnRvTG93ZXJDYXNlKCkuc2xpY2UoMCwgMTMpID09PSBcImludGVybmF0aW9uYWxcIikge1xuICAgICAgICB3a3QuZWxscHMgPSAnaW50bCc7XG4gICAgICB9XG5cbiAgICAgIHdrdC5hID0gd2t0LkdFT0dDUy5EQVRVTS5TUEhFUk9JRC5hO1xuICAgICAgd2t0LnJmID0gcGFyc2VGbG9hdCh3a3QuR0VPR0NTLkRBVFVNLlNQSEVST0lELnJmLCAxMCk7XG4gICAgfVxuICAgIGlmICh+d2t0LmRhdHVtQ29kZS5pbmRleE9mKCdvc2diXzE5MzYnKSkge1xuICAgICAgd2t0LmRhdHVtQ29kZSA9IFwib3NnYjM2XCI7XG4gICAgfVxuICB9XG4gIGlmICh3a3QuYiAmJiAhaXNGaW5pdGUod2t0LmIpKSB7XG4gICAgd2t0LmIgPSB3a3QuYTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvTWV0ZXIoaW5wdXQpIHtcbiAgICB2YXIgcmF0aW8gPSB3a3QudG9fbWV0ZXIgfHwgMTtcbiAgICByZXR1cm4gcGFyc2VGbG9hdChpbnB1dCwgMTApICogcmF0aW87XG4gIH1cbiAgdmFyIHJlbmFtZXIgPSBmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIHJlbmFtZSh3a3QsIGEpO1xuICB9O1xuICB2YXIgbGlzdCA9IFtcbiAgICBbJ3N0YW5kYXJkX3BhcmFsbGVsXzEnLCAnU3RhbmRhcmRfUGFyYWxsZWxfMSddLFxuICAgIFsnc3RhbmRhcmRfcGFyYWxsZWxfMicsICdTdGFuZGFyZF9QYXJhbGxlbF8yJ10sXG4gICAgWydmYWxzZV9lYXN0aW5nJywgJ0ZhbHNlX0Vhc3RpbmcnXSxcbiAgICBbJ2ZhbHNlX25vcnRoaW5nJywgJ0ZhbHNlX05vcnRoaW5nJ10sXG4gICAgWydjZW50cmFsX21lcmlkaWFuJywgJ0NlbnRyYWxfTWVyaWRpYW4nXSxcbiAgICBbJ2xhdGl0dWRlX29mX29yaWdpbicsICdMYXRpdHVkZV9PZl9PcmlnaW4nXSxcbiAgICBbJ2xhdGl0dWRlX29mX29yaWdpbicsICdDZW50cmFsX1BhcmFsbGVsJ10sXG4gICAgWydzY2FsZV9mYWN0b3InLCAnU2NhbGVfRmFjdG9yJ10sXG4gICAgWydrMCcsICdzY2FsZV9mYWN0b3InXSxcbiAgICBbJ2xhdGl0dWRlX29mX2NlbnRlcicsICdMYXRpdHVkZV9vZl9jZW50ZXInXSxcbiAgICBbJ2xhdDAnLCAnbGF0aXR1ZGVfb2ZfY2VudGVyJywgZDJyXSxcbiAgICBbJ2xvbmdpdHVkZV9vZl9jZW50ZXInLCAnTG9uZ2l0dWRlX09mX0NlbnRlciddLFxuICAgIFsnbG9uZ2MnLCAnbG9uZ2l0dWRlX29mX2NlbnRlcicsIGQycl0sXG4gICAgWyd4MCcsICdmYWxzZV9lYXN0aW5nJywgdG9NZXRlcl0sXG4gICAgWyd5MCcsICdmYWxzZV9ub3J0aGluZycsIHRvTWV0ZXJdLFxuICAgIFsnbG9uZzAnLCAnY2VudHJhbF9tZXJpZGlhbicsIGQycl0sXG4gICAgWydsYXQwJywgJ2xhdGl0dWRlX29mX29yaWdpbicsIGQycl0sXG4gICAgWydsYXQwJywgJ3N0YW5kYXJkX3BhcmFsbGVsXzEnLCBkMnJdLFxuICAgIFsnbGF0MScsICdzdGFuZGFyZF9wYXJhbGxlbF8xJywgZDJyXSxcbiAgICBbJ2xhdDInLCAnc3RhbmRhcmRfcGFyYWxsZWxfMicsIGQycl0sXG4gICAgWydhbHBoYScsICdhemltdXRoJywgZDJyXSxcbiAgICBbJ3Nyc0NvZGUnLCAnbmFtZSddXG4gIF07XG4gIGxpc3QuZm9yRWFjaChyZW5hbWVyKTtcbiAgaWYgKCF3a3QubG9uZzAgJiYgd2t0LmxvbmdjICYmICh3a3QucHJvak5hbWUgPT09ICdBbGJlcnNfQ29uaWNfRXF1YWxfQXJlYScgfHwgd2t0LnByb2pOYW1lID09PSBcIkxhbWJlcnRfQXppbXV0aGFsX0VxdWFsX0FyZWFcIikpIHtcbiAgICB3a3QubG9uZzAgPSB3a3QubG9uZ2M7XG4gIH1cbiAgaWYgKCF3a3QubGF0X3RzICYmIHdrdC5sYXQxICYmICh3a3QucHJvak5hbWUgPT09ICdTdGVyZW9ncmFwaGljX1NvdXRoX1BvbGUnIHx8IHdrdC5wcm9qTmFtZSA9PT0gJ1BvbGFyIFN0ZXJlb2dyYXBoaWMgKHZhcmlhbnQgQiknKSkge1xuICAgIHdrdC5sYXQwID0gZDJyKHdrdC5sYXQxID4gMCA/IDkwIDogLTkwKTtcbiAgICB3a3QubGF0X3RzID0gd2t0LmxhdDE7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24od2t0LCBzZWxmKSB7XG4gIHZhciBsaXNwID0gSlNPTi5wYXJzZSgoXCIsXCIgKyB3a3QpLnJlcGxhY2UoL1xccypcXCxcXHMqKFtBLVpfMC05XSs/KShcXFspL2csICcsW1wiJDFcIiwnKS5zbGljZSgxKS5yZXBsYWNlKC9cXHMqXFwsXFxzKihbQS1aXzAtOV0rPylcXF0vZywgJyxcIiQxXCJdJykucmVwbGFjZSgvLFxcW1wiVkVSVENTXCIuKy8sJycpKTtcbiAgdmFyIHR5cGUgPSBsaXNwLnNoaWZ0KCk7XG4gIHZhciBuYW1lID0gbGlzcC5zaGlmdCgpO1xuICBsaXNwLnVuc2hpZnQoWyduYW1lJywgbmFtZV0pO1xuICBsaXNwLnVuc2hpZnQoWyd0eXBlJywgdHlwZV0pO1xuICBsaXNwLnVuc2hpZnQoJ291dHB1dCcpO1xuICB2YXIgb2JqID0ge307XG4gIHNFeHByKGxpc3AsIG9iaik7XG4gIGNsZWFuV0tUKG9iai5vdXRwdXQpO1xuICByZXR1cm4gZXh0ZW5kKHNlbGYsIG9iai5vdXRwdXQpO1xufTtcbiIsIm1vZHVsZS5leHBvcnRzPXtcbiAgXCJfYXJnc1wiOiBbXG4gICAgW1xuICAgICAge1xuICAgICAgICBcInJhd1wiOiBcInByb2o0QDIuMy4xMFwiLFxuICAgICAgICBcInNjb3BlXCI6IG51bGwsXG4gICAgICAgIFwiZXNjYXBlZE5hbWVcIjogXCJwcm9qNFwiLFxuICAgICAgICBcIm5hbWVcIjogXCJwcm9qNFwiLFxuICAgICAgICBcInJhd1NwZWNcIjogXCIyLjMuMTBcIixcbiAgICAgICAgXCJzcGVjXCI6IFwiMi4zLjEwXCIsXG4gICAgICAgIFwidHlwZVwiOiBcInZlcnNpb25cIlxuICAgICAgfSxcbiAgICAgIFwiQzpcXFxcVXR2XFxcXG9yaWdvXCJcbiAgICBdXG4gIF0sXG4gIFwiX2Zyb21cIjogXCJwcm9qNEAyLjMuMTBcIixcbiAgXCJfaWRcIjogXCJwcm9qNEAyLjMuMTBcIixcbiAgXCJfaW5DYWNoZVwiOiB0cnVlLFxuICBcIl9sb2NhdGlvblwiOiBcIi9wcm9qNFwiLFxuICBcIl9ub2RlVmVyc2lvblwiOiBcIjAuMTIuNVwiLFxuICBcIl9ucG1Vc2VyXCI6IHtcbiAgICBcIm5hbWVcIjogXCJhaG9jZXZhclwiLFxuICAgIFwiZW1haWxcIjogXCJhbmRyZWFzLmhvY2V2YXJAZ21haWwuY29tXCJcbiAgfSxcbiAgXCJfbnBtVmVyc2lvblwiOiBcIjIuMTEuMlwiLFxuICBcIl9waGFudG9tQ2hpbGRyZW5cIjoge30sXG4gIFwiX3JlcXVlc3RlZFwiOiB7XG4gICAgXCJyYXdcIjogXCJwcm9qNEAyLjMuMTBcIixcbiAgICBcInNjb3BlXCI6IG51bGwsXG4gICAgXCJlc2NhcGVkTmFtZVwiOiBcInByb2o0XCIsXG4gICAgXCJuYW1lXCI6IFwicHJvajRcIixcbiAgICBcInJhd1NwZWNcIjogXCIyLjMuMTBcIixcbiAgICBcInNwZWNcIjogXCIyLjMuMTBcIixcbiAgICBcInR5cGVcIjogXCJ2ZXJzaW9uXCJcbiAgfSxcbiAgXCJfcmVxdWlyZWRCeVwiOiBbXG4gICAgXCIvXCJcbiAgXSxcbiAgXCJfcmVzb2x2ZWRcIjogXCJodHRwczovL3JlZ2lzdHJ5Lm5wbWpzLm9yZy9wcm9qNC8tL3Byb2o0LTIuMy4xMC50Z3pcIixcbiAgXCJfc2hhc3VtXCI6IFwiZjZlNjZiZGNjYTMzMmMyNWE1ZTNkOGVmMjY1Y2ZjOWQ3YjYwZmQwY1wiLFxuICBcIl9zaHJpbmt3cmFwXCI6IG51bGwsXG4gIFwiX3NwZWNcIjogXCJwcm9qNEAyLjMuMTBcIixcbiAgXCJfd2hlcmVcIjogXCJDOlxcXFxVdHZcXFxcb3JpZ29cIixcbiAgXCJhdXRob3JcIjogXCJcIixcbiAgXCJidWdzXCI6IHtcbiAgICBcInVybFwiOiBcImh0dHBzOi8vZ2l0aHViLmNvbS9wcm9qNGpzL3Byb2o0anMvaXNzdWVzXCJcbiAgfSxcbiAgXCJjb250cmlidXRvcnNcIjogW1xuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIk1pa2UgQWRhaXJcIixcbiAgICAgIFwiZW1haWxcIjogXCJtYWRhaXJAZG1zb2x1dGlvbnMuY2FcIlxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiUmljaGFyZCBHcmVlbndvb2RcIixcbiAgICAgIFwiZW1haWxcIjogXCJyaWNoQGdyZWVud29vZG1hcC5jb21cIlxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiQ2FsdmluIE1ldGNhbGZcIixcbiAgICAgIFwiZW1haWxcIjogXCJjYWx2aW4ubWV0Y2FsZkBnbWFpbC5jb21cIlxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiUmljaGFyZCBNYXJzZGVuXCIsXG4gICAgICBcInVybFwiOiBcImh0dHA6Ly93d3cud2lud2FlZC5jb21cIlxuICAgIH0sXG4gICAge1xuICAgICAgXCJuYW1lXCI6IFwiVC4gTWl0dGFuXCJcbiAgICB9LFxuICAgIHtcbiAgICAgIFwibmFtZVwiOiBcIkQuIFN0ZWlud2FuZFwiXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJTLiBOZWxzb25cIlxuICAgIH1cbiAgXSxcbiAgXCJkZXBlbmRlbmNpZXNcIjoge1xuICAgIFwibWdyc1wiOiBcIn4wLjAuMlwiXG4gIH0sXG4gIFwiZGVzY3JpcHRpb25cIjogXCJQcm9qNGpzIGlzIGEgSmF2YVNjcmlwdCBsaWJyYXJ5IHRvIHRyYW5zZm9ybSBwb2ludCBjb29yZGluYXRlcyBmcm9tIG9uZSBjb29yZGluYXRlIHN5c3RlbSB0byBhbm90aGVyLCBpbmNsdWRpbmcgZGF0dW0gdHJhbnNmb3JtYXRpb25zLlwiLFxuICBcImRldkRlcGVuZGVuY2llc1wiOiB7XG4gICAgXCJicm93c2VyaWZ5XCI6IFwifjMuMjQuNVwiLFxuICAgIFwiY2hhaVwiOiBcIn4xLjguMVwiLFxuICAgIFwiY3VybFwiOiBcImdpdDovL2dpdGh1Yi5jb20vY3Vqb2pzL2N1cmwuZ2l0XCIsXG4gICAgXCJncnVudFwiOiBcIn4wLjQuMlwiLFxuICAgIFwiZ3J1bnQtYnJvd3NlcmlmeVwiOiBcIn4xLjMuMFwiLFxuICAgIFwiZ3J1bnQtY2xpXCI6IFwifjAuMS4xM1wiLFxuICAgIFwiZ3J1bnQtY29udHJpYi1jb25uZWN0XCI6IFwifjAuNi4wXCIsXG4gICAgXCJncnVudC1jb250cmliLWpzaGludFwiOiBcIn4wLjguMFwiLFxuICAgIFwiZ3J1bnQtY29udHJpYi11Z2xpZnlcIjogXCJ+MC4zLjJcIixcbiAgICBcImdydW50LW1vY2hhLXBoYW50b21qc1wiOiBcIn4wLjQuMFwiLFxuICAgIFwiaXN0YW5idWxcIjogXCJ+MC4yLjRcIixcbiAgICBcIm1vY2hhXCI6IFwifjEuMTcuMVwiLFxuICAgIFwidGluXCI6IFwifjAuNC4wXCJcbiAgfSxcbiAgXCJkaXJlY3Rvcmllc1wiOiB7XG4gICAgXCJ0ZXN0XCI6IFwidGVzdFwiLFxuICAgIFwiZG9jXCI6IFwiZG9jc1wiXG4gIH0sXG4gIFwiZGlzdFwiOiB7XG4gICAgXCJzaGFzdW1cIjogXCJmNmU2NmJkY2NhMzMyYzI1YTVlM2Q4ZWYyNjVjZmM5ZDdiNjBmZDBjXCIsXG4gICAgXCJ0YXJiYWxsXCI6IFwiaHR0cHM6Ly9yZWdpc3RyeS5ucG1qcy5vcmcvcHJvajQvLS9wcm9qNC0yLjMuMTAudGd6XCJcbiAgfSxcbiAgXCJnaXRIZWFkXCI6IFwiYWMwM2QxNDM5NDkxZGMzMTNkYTgwOTg1MTkzZjcwMmNhNDcxYjNkMFwiLFxuICBcImhvbWVwYWdlXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL3Byb2o0anMvcHJvajRqcyNyZWFkbWVcIixcbiAgXCJqYW1cIjoge1xuICAgIFwibWFpblwiOiBcImRpc3QvcHJvajQuanNcIixcbiAgICBcImluY2x1ZGVcIjogW1xuICAgICAgXCJkaXN0L3Byb2o0LmpzXCIsXG4gICAgICBcIlJFQURNRS5tZFwiLFxuICAgICAgXCJBVVRIT1JTXCIsXG4gICAgICBcIkxJQ0VOU0UubWRcIlxuICAgIF1cbiAgfSxcbiAgXCJsaWNlbnNlXCI6IFwiTUlUXCIsXG4gIFwibWFpblwiOiBcImxpYi9pbmRleC5qc1wiLFxuICBcIm1haW50YWluZXJzXCI6IFtcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJjd21tYVwiLFxuICAgICAgXCJlbWFpbFwiOiBcImNhbHZpbi5tZXRjYWxmQGdtYWlsLmNvbVwiXG4gICAgfSxcbiAgICB7XG4gICAgICBcIm5hbWVcIjogXCJhaG9jZXZhclwiLFxuICAgICAgXCJlbWFpbFwiOiBcImFuZHJlYXMuaG9jZXZhckBnbWFpbC5jb21cIlxuICAgIH1cbiAgXSxcbiAgXCJuYW1lXCI6IFwicHJvajRcIixcbiAgXCJvcHRpb25hbERlcGVuZGVuY2llc1wiOiB7fSxcbiAgXCJyZWFkbWVcIjogXCJFUlJPUjogTm8gUkVBRE1FIGRhdGEgZm91bmQhXCIsXG4gIFwicmVwb3NpdG9yeVwiOiB7XG4gICAgXCJ0eXBlXCI6IFwiZ2l0XCIsXG4gICAgXCJ1cmxcIjogXCJnaXQ6Ly9naXRodWIuY29tL3Byb2o0anMvcHJvajRqcy5naXRcIlxuICB9LFxuICBcInNjcmlwdHNcIjoge1xuICAgIFwidGVzdFwiOiBcIi4vbm9kZV9tb2R1bGVzL2lzdGFuYnVsL2xpYi9jbGkuanMgdGVzdCAuL25vZGVfbW9kdWxlcy9tb2NoYS9iaW4vX21vY2hhIHRlc3QvdGVzdC5qc1wiXG4gIH0sXG4gIFwidmVyc2lvblwiOiBcIjIuMy4xMFwiXG59XG4iLCIvKiFcbiAqIHR5cGVhaGVhZC5qcyAwLjExLjBcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS90d2l0dGVyL3R5cGVhaGVhZC5qc1xuICogQ29weXJpZ2h0IDIwMTMtMjAxNSBUd2l0dGVyLCBJbmMuIGFuZCBvdGhlciBjb250cmlidXRvcnM7IExpY2Vuc2VkIE1JVFxuICovXG5cbihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShcImJsb29kaG91bmRcIiwgWyBcImpxdWVyeVwiIF0sIGZ1bmN0aW9uKGEwKSB7XG4gICAgICAgICAgICByZXR1cm4gcm9vdFtcIkJsb29kaG91bmRcIl0gPSBmYWN0b3J5KGEwKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImpxdWVyeVwiKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdFtcIkJsb29kaG91bmRcIl0gPSBmYWN0b3J5KGpRdWVyeSk7XG4gICAgfVxufSkodGhpcywgZnVuY3Rpb24oJCkge1xuICAgIHZhciBfID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaXNNc2llOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLyhtc2llfHRyaWRlbnQpL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSA/IG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhtc2llIHxydjopKFxcZCsoLlxcZCspPykvaSlbMl0gOiBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0JsYW5rU3RyaW5nOiBmdW5jdGlvbihzdHIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXN0ciB8fCAvXlxccyokLy50ZXN0KHN0cik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXNjYXBlUmVnRXhDaGFyczogZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZywgXCJcXFxcJCZcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNTdHJpbmc6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInN0cmluZ1wiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzTnVtYmVyOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJudW1iZXJcIjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0FycmF5OiAkLmlzQXJyYXksXG4gICAgICAgICAgICBpc0Z1bmN0aW9uOiAkLmlzRnVuY3Rpb24sXG4gICAgICAgICAgICBpc09iamVjdDogJC5pc1BsYWluT2JqZWN0LFxuICAgICAgICAgICAgaXNVbmRlZmluZWQ6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcInVuZGVmaW5lZFwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzRWxlbWVudDogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhKG9iaiAmJiBvYmoubm9kZVR5cGUgPT09IDEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzSlF1ZXJ5OiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqIGluc3RhbmNlb2YgJDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0b1N0cjogZnVuY3Rpb24gdG9TdHIocykge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLmlzVW5kZWZpbmVkKHMpIHx8IHMgPT09IG51bGwgPyBcIlwiIDogcyArIFwiXCI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmluZDogJC5wcm94eSxcbiAgICAgICAgICAgIGVhY2g6IGZ1bmN0aW9uKGNvbGxlY3Rpb24sIGNiKSB7XG4gICAgICAgICAgICAgICAgJC5lYWNoKGNvbGxlY3Rpb24sIHJldmVyc2VBcmdzKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZXZlcnNlQXJncyhpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNiKHZhbHVlLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1hcDogJC5tYXAsXG4gICAgICAgICAgICBmaWx0ZXI6ICQuZ3JlcCxcbiAgICAgICAgICAgIGV2ZXJ5OiBmdW5jdGlvbihvYmosIHRlc3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAoIW9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkLmVhY2gob2JqLCBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIShyZXN1bHQgPSB0ZXN0LmNhbGwobnVsbCwgdmFsLCBrZXksIG9iaikpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc29tZTogZnVuY3Rpb24ob2JqLCB0ZXN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICghb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQuZWFjaChvYmosIGZ1bmN0aW9uKGtleSwgdmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgPSB0ZXN0LmNhbGwobnVsbCwgdmFsLCBrZXksIG9iaikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiAhIXJlc3VsdDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtaXhpbjogJC5leHRlbmQsXG4gICAgICAgICAgICBpZGVudGl0eTogZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsb25lOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJC5leHRlbmQodHJ1ZSwge30sIG9iaik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0SWRHZW5lcmF0b3I6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBjb3VudGVyID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3VudGVyKys7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0ZW1wbGF0aWZ5OiBmdW5jdGlvbiB0ZW1wbGF0aWZ5KG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiAkLmlzRnVuY3Rpb24ob2JqKSA/IG9iaiA6IHRlbXBsYXRlO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRlbXBsYXRlKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKG9iaik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmVyOiBmdW5jdGlvbihmbikge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZm4sIDApO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlYm91bmNlOiBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGltZW91dCwgcmVzdWx0O1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRleHQgPSB0aGlzLCBhcmdzID0gYXJndW1lbnRzLCBsYXRlciwgY2FsbE5vdztcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbW1lZGlhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBjYWxsTm93ID0gaW1tZWRpYXRlICYmICF0aW1lb3V0O1xuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxOb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRocm90dGxlOiBmdW5jdGlvbihmdW5jLCB3YWl0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnRleHQsIGFyZ3MsIHRpbWVvdXQsIHJlc3VsdCwgcHJldmlvdXMsIGxhdGVyO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzID0gMDtcbiAgICAgICAgICAgICAgICBsYXRlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBwcmV2aW91cyA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKSwgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHQgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCF0aW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RyaW5naWZ5OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5pc1N0cmluZyh2YWwpID8gdmFsIDogSlNPTi5zdHJpbmdpZnkodmFsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBub29wOiBmdW5jdGlvbigpIHt9XG4gICAgICAgIH07XG4gICAgfSgpO1xuICAgIHZhciBWRVJTSU9OID0gXCIwLjExLjBcIjtcbiAgICB2YXIgdG9rZW5pemVycyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5vbndvcmQ6IG5vbndvcmQsXG4gICAgICAgICAgICB3aGl0ZXNwYWNlOiB3aGl0ZXNwYWNlLFxuICAgICAgICAgICAgb2JqOiB7XG4gICAgICAgICAgICAgICAgbm9ud29yZDogZ2V0T2JqVG9rZW5pemVyKG5vbndvcmQpLFxuICAgICAgICAgICAgICAgIHdoaXRlc3BhY2U6IGdldE9ialRva2VuaXplcih3aGl0ZXNwYWNlKVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiB3aGl0ZXNwYWNlKHN0cikge1xuICAgICAgICAgICAgc3RyID0gXy50b1N0cihzdHIpO1xuICAgICAgICAgICAgcmV0dXJuIHN0ciA/IHN0ci5zcGxpdCgvXFxzKy8pIDogW107XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbm9ud29yZChzdHIpIHtcbiAgICAgICAgICAgIHN0ciA9IF8udG9TdHIoc3RyKTtcbiAgICAgICAgICAgIHJldHVybiBzdHIgPyBzdHIuc3BsaXQoL1xcVysvKSA6IFtdO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldE9ialRva2VuaXplcih0b2tlbml6ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiBzZXRLZXkoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRva2VuaXplKG8pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBfLmVhY2goYXJncywgZnVuY3Rpb24oaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG9rZW5zID0gdG9rZW5zLmNvbmNhdCh0b2tlbml6ZXIoXy50b1N0cihvW2tdKSkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRva2VucztcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgTHJ1Q2FjaGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIGZ1bmN0aW9uIExydUNhY2hlKG1heFNpemUpIHtcbiAgICAgICAgICAgIHRoaXMubWF4U2l6ZSA9IF8uaXNOdW1iZXIobWF4U2l6ZSkgPyBtYXhTaXplIDogMTAwO1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMubWF4U2l6ZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQgPSB0aGlzLmdldCA9ICQubm9vcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKExydUNhY2hlLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoa2V5LCB2YWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGFpbEl0ZW0gPSB0aGlzLmxpc3QudGFpbCwgbm9kZTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaXplID49IHRoaXMubWF4U2l6ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3QucmVtb3ZlKHRhaWxJdGVtKTtcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGFzaFt0YWlsSXRlbS5rZXldO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpemUtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUgPSB0aGlzLmhhc2hba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLnZhbCA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Lm1vdmVUb0Zyb250KG5vZGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgTm9kZShrZXksIHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdC5hZGQobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzaFtrZXldID0gbm9kZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaXplKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KGtleSkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gdGhpcy5oYXNoW2tleV07XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0Lm1vdmVUb0Zyb250KG5vZGUpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZS52YWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMuaGFzaCA9IHt9O1xuICAgICAgICAgICAgICAgIHRoaXMubGlzdCA9IG5ldyBMaXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBMaXN0KCkge1xuICAgICAgICAgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKExpc3QucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBhZGQ6IGZ1bmN0aW9uIGFkZChub2RlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaGVhZCkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLm5leHQgPSB0aGlzLmhlYWQ7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGVhZC5wcmV2ID0gbm9kZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5oZWFkID0gbm9kZTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhaWwgPSB0aGlzLnRhaWwgfHwgbm9kZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShub2RlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5wcmV2ID8gbm9kZS5wcmV2Lm5leHQgPSBub2RlLm5leHQgOiB0aGlzLmhlYWQgPSBub2RlLm5leHQ7XG4gICAgICAgICAgICAgICAgbm9kZS5uZXh0ID8gbm9kZS5uZXh0LnByZXYgPSBub2RlLnByZXYgOiB0aGlzLnRhaWwgPSBub2RlLnByZXY7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbW92ZVRvRnJvbnQ6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShub2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIE5vZGUoa2V5LCB2YWwpIHtcbiAgICAgICAgICAgIHRoaXMua2V5ID0ga2V5O1xuICAgICAgICAgICAgdGhpcy52YWwgPSB2YWw7XG4gICAgICAgICAgICB0aGlzLnByZXYgPSB0aGlzLm5leHQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBMcnVDYWNoZTtcbiAgICB9KCk7XG4gICAgdmFyIFBlcnNpc3RlbnRTdG9yYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgTE9DQUxfU1RPUkFHRTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIExPQ0FMX1NUT1JBR0UgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgICAgICAgICAgTE9DQUxfU1RPUkFHRS5zZXRJdGVtKFwifn5+XCIsIFwiIVwiKTtcbiAgICAgICAgICAgIExPQ0FMX1NUT1JBR0UucmVtb3ZlSXRlbShcIn5+flwiKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBMT0NBTF9TVE9SQUdFID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBQZXJzaXN0ZW50U3RvcmFnZShuYW1lc3BhY2UsIG92ZXJyaWRlKSB7XG4gICAgICAgICAgICB0aGlzLnByZWZpeCA9IFsgXCJfX1wiLCBuYW1lc3BhY2UsIFwiX19cIiBdLmpvaW4oXCJcIik7XG4gICAgICAgICAgICB0aGlzLnR0bEtleSA9IFwiX190dGxfX1wiO1xuICAgICAgICAgICAgdGhpcy5rZXlNYXRjaGVyID0gbmV3IFJlZ0V4cChcIl5cIiArIF8uZXNjYXBlUmVnRXhDaGFycyh0aGlzLnByZWZpeCkpO1xuICAgICAgICAgICAgdGhpcy5scyA9IG92ZXJyaWRlIHx8IExPQ0FMX1NUT1JBR0U7XG4gICAgICAgICAgICBpZiAoIXRoaXMubHMgfHwgIXdpbmRvdy5KU09OKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5nZXQgPSB0aGlzLnNldCA9IHRoaXMucmVtb3ZlID0gdGhpcy5jbGVhciA9IHRoaXMuaXNFeHBpcmVkID0gXy5ub29wO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF8ubWl4aW4oUGVyc2lzdGVudFN0b3JhZ2UucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBfcHJlZml4OiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wcmVmaXggKyBrZXk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3R0bEtleTogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByZWZpeChrZXkpICsgdGhpcy50dGxLZXk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0V4cGlyZWQoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShrZXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVjb2RlKHRoaXMubHMuZ2V0SXRlbSh0aGlzLl9wcmVmaXgoa2V5KSkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24oa2V5LCB2YWwsIHR0bCkge1xuICAgICAgICAgICAgICAgIGlmIChfLmlzTnVtYmVyKHR0bCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5scy5zZXRJdGVtKHRoaXMuX3R0bEtleShrZXkpLCBlbmNvZGUobm93KCkgKyB0dGwpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxzLnJlbW92ZUl0ZW0odGhpcy5fdHRsS2V5KGtleSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5scy5zZXRJdGVtKHRoaXMuX3ByZWZpeChrZXkpLCBlbmNvZGUodmFsKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxzLnJlbW92ZUl0ZW0odGhpcy5fdHRsS2V5KGtleSkpO1xuICAgICAgICAgICAgICAgIHRoaXMubHMucmVtb3ZlSXRlbSh0aGlzLl9wcmVmaXgoa2V5KSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciBpLCBrZXksIGtleXMgPSBbXSwgbGVuID0gdGhpcy5scy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoa2V5ID0gdGhpcy5scy5rZXkoaSkpLm1hdGNoKHRoaXMua2V5TWF0Y2hlcikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkucmVwbGFjZSh0aGlzLmtleU1hdGNoZXIsIFwiXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBrZXlzLmxlbmd0aDsgaS0tOyApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmUoa2V5c1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzRXhwaXJlZDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHR0bCA9IGRlY29kZSh0aGlzLmxzLmdldEl0ZW0odGhpcy5fdHRsS2V5KGtleSkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5pc051bWJlcih0dGwpICYmIG5vdygpID4gdHRsID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFBlcnNpc3RlbnRTdG9yYWdlO1xuICAgICAgICBmdW5jdGlvbiBub3coKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZW5jb2RlKHZhbCkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KF8uaXNVbmRlZmluZWQodmFsKSA/IG51bGwgOiB2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGRlY29kZSh2YWwpIHtcbiAgICAgICAgICAgIHJldHVybiAkLnBhcnNlSlNPTih2YWwpO1xuICAgICAgICB9XG4gICAgfSgpO1xuICAgIHZhciBUcmFuc3BvcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBwZW5kaW5nUmVxdWVzdHNDb3VudCA9IDAsIHBlbmRpbmdSZXF1ZXN0cyA9IHt9LCBtYXhQZW5kaW5nUmVxdWVzdHMgPSA2LCBzaGFyZWRDYWNoZSA9IG5ldyBMcnVDYWNoZSgxMCk7XG4gICAgICAgIGZ1bmN0aW9uIFRyYW5zcG9ydChvKSB7XG4gICAgICAgICAgICBvID0gbyB8fCB7fTtcbiAgICAgICAgICAgIHRoaXMuY2FuY2VsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmxhc3RSZXEgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5fc2VuZCA9IG8udHJhbnNwb3J0O1xuICAgICAgICAgICAgdGhpcy5fZ2V0ID0gby5saW1pdGVyID8gby5saW1pdGVyKHRoaXMuX2dldCkgOiB0aGlzLl9nZXQ7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZSA9IG8uY2FjaGUgPT09IGZhbHNlID8gbmV3IExydUNhY2hlKDApIDogc2hhcmVkQ2FjaGU7XG4gICAgICAgIH1cbiAgICAgICAgVHJhbnNwb3J0LnNldE1heFBlbmRpbmdSZXF1ZXN0cyA9IGZ1bmN0aW9uIHNldE1heFBlbmRpbmdSZXF1ZXN0cyhudW0pIHtcbiAgICAgICAgICAgIG1heFBlbmRpbmdSZXF1ZXN0cyA9IG51bTtcbiAgICAgICAgfTtcbiAgICAgICAgVHJhbnNwb3J0LnJlc2V0Q2FjaGUgPSBmdW5jdGlvbiByZXNldENhY2hlKCkge1xuICAgICAgICAgICAgc2hhcmVkQ2FjaGUucmVzZXQoKTtcbiAgICAgICAgfTtcbiAgICAgICAgXy5taXhpbihUcmFuc3BvcnQucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBfZmluZ2VycHJpbnQ6IGZ1bmN0aW9uIGZpbmdlcnByaW50KG8pIHtcbiAgICAgICAgICAgICAgICBvID0gbyB8fCB7fTtcbiAgICAgICAgICAgICAgICByZXR1cm4gby51cmwgKyBvLnR5cGUgKyAkLnBhcmFtKG8uZGF0YSB8fCB7fSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2dldDogZnVuY3Rpb24obywgY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIGZpbmdlcnByaW50LCBqcVhocjtcbiAgICAgICAgICAgICAgICBmaW5nZXJwcmludCA9IHRoaXMuX2ZpbmdlcnByaW50KG8pO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbmNlbGxlZCB8fCBmaW5nZXJwcmludCAhPT0gdGhpcy5sYXN0UmVxKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGpxWGhyID0gcGVuZGluZ1JlcXVlc3RzW2ZpbmdlcnByaW50XSkge1xuICAgICAgICAgICAgICAgICAgICBqcVhoci5kb25lKGRvbmUpLmZhaWwoZmFpbCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwZW5kaW5nUmVxdWVzdHNDb3VudCA8IG1heFBlbmRpbmdSZXF1ZXN0cykge1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUmVxdWVzdHNDb3VudCsrO1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUmVxdWVzdHNbZmluZ2VycHJpbnRdID0gdGhpcy5fc2VuZChvKS5kb25lKGRvbmUpLmZhaWwoZmFpbCkuYWx3YXlzKGFsd2F5cyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRlY2tSZXF1ZXN0QXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZG9uZShyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHJlc3ApO1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9jYWNoZS5zZXQoZmluZ2VycHJpbnQsIHJlc3ApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBmYWlsKCkge1xuICAgICAgICAgICAgICAgICAgICBjYih0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYWx3YXlzKCkge1xuICAgICAgICAgICAgICAgICAgICBwZW5kaW5nUmVxdWVzdHNDb3VudC0tO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgcGVuZGluZ1JlcXVlc3RzW2ZpbmdlcnByaW50XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoYXQub25EZWNrUmVxdWVzdEFyZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX2dldC5hcHBseSh0aGF0LCB0aGF0Lm9uRGVja1JlcXVlc3RBcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQub25EZWNrUmVxdWVzdEFyZ3MgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24obywgY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzcCwgZmluZ2VycHJpbnQ7XG4gICAgICAgICAgICAgICAgY2IgPSBjYiB8fCAkLm5vb3A7XG4gICAgICAgICAgICAgICAgbyA9IF8uaXNTdHJpbmcobykgPyB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogb1xuICAgICAgICAgICAgICAgIH0gOiBvIHx8IHt9O1xuICAgICAgICAgICAgICAgIGZpbmdlcnByaW50ID0gdGhpcy5fZmluZ2VycHJpbnQobyk7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWxsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RSZXEgPSBmaW5nZXJwcmludDtcbiAgICAgICAgICAgICAgICBpZiAocmVzcCA9IHRoaXMuX2NhY2hlLmdldChmaW5nZXJwcmludCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2IobnVsbCwgcmVzcCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2V0KG8sIGNiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gVHJhbnNwb3J0O1xuICAgIH0oKTtcbiAgICB2YXIgU2VhcmNoSW5kZXggPSB3aW5kb3cuU2VhcmNoSW5kZXggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBDSElMRFJFTiA9IFwiY1wiLCBJRFMgPSBcImlcIjtcbiAgICAgICAgZnVuY3Rpb24gU2VhcmNoSW5kZXgobykge1xuICAgICAgICAgICAgbyA9IG8gfHwge307XG4gICAgICAgICAgICBpZiAoIW8uZGF0dW1Ub2tlbml6ZXIgfHwgIW8ucXVlcnlUb2tlbml6ZXIpIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKFwiZGF0dW1Ub2tlbml6ZXIgYW5kIHF1ZXJ5VG9rZW5pemVyIGFyZSBib3RoIHJlcXVpcmVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pZGVudGlmeSA9IG8uaWRlbnRpZnkgfHwgXy5zdHJpbmdpZnk7XG4gICAgICAgICAgICB0aGlzLmRhdHVtVG9rZW5pemVyID0gby5kYXR1bVRva2VuaXplcjtcbiAgICAgICAgICAgIHRoaXMucXVlcnlUb2tlbml6ZXIgPSBvLnF1ZXJ5VG9rZW5pemVyO1xuICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB9XG4gICAgICAgIF8ubWl4aW4oU2VhcmNoSW5kZXgucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBib290c3RyYXA6IGZ1bmN0aW9uIGJvb3RzdHJhcChvKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXR1bXMgPSBvLmRhdHVtcztcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWUgPSBvLnRyaWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgICAgIGRhdGEgPSBfLmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogWyBkYXRhIF07XG4gICAgICAgICAgICAgICAgXy5lYWNoKGRhdGEsIGZ1bmN0aW9uKGRhdHVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCwgdG9rZW5zO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmRhdHVtc1tpZCA9IHRoYXQuaWRlbnRpZnkoZGF0dW0pXSA9IGRhdHVtO1xuICAgICAgICAgICAgICAgICAgICB0b2tlbnMgPSBub3JtYWxpemVUb2tlbnModGhhdC5kYXR1bVRva2VuaXplcihkYXR1bSkpO1xuICAgICAgICAgICAgICAgICAgICBfLmVhY2godG9rZW5zLCBmdW5jdGlvbih0b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUsIGNoYXJzLCBjaDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSB0aGF0LnRyaWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFycyA9IHRva2VuLnNwbGl0KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgd2hpbGUgKGNoID0gY2hhcnMuc2hpZnQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBub2RlW0NISUxEUkVOXVtjaF0gfHwgKG5vZGVbQ0hJTERSRU5dW2NoXSA9IG5ld05vZGUoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9kZVtJRFNdLnB1c2goaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldChpZHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8ubWFwKGlkcywgZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuZGF0dW1zW2lkXTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWFyY2g6IGZ1bmN0aW9uIHNlYXJjaChxdWVyeSkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgdG9rZW5zLCBtYXRjaGVzO1xuICAgICAgICAgICAgICAgIHRva2VucyA9IG5vcm1hbGl6ZVRva2Vucyh0aGlzLnF1ZXJ5VG9rZW5pemVyKHF1ZXJ5KSk7XG4gICAgICAgICAgICAgICAgXy5lYWNoKHRva2VucywgZnVuY3Rpb24odG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUsIGNoYXJzLCBjaCwgaWRzO1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hlcyAmJiBtYXRjaGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSB0aGF0LnRyaWU7XG4gICAgICAgICAgICAgICAgICAgIGNoYXJzID0gdG9rZW4uc3BsaXQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChub2RlICYmIChjaCA9IGNoYXJzLnNoaWZ0KCkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlID0gbm9kZVtDSElMRFJFTl1bY2hdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChub2RlICYmIGNoYXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWRzID0gbm9kZVtJRFNdLnNsaWNlKDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcyA9IG1hdGNoZXMgPyBnZXRJbnRlcnNlY3Rpb24obWF0Y2hlcywgaWRzKSA6IGlkcztcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoZXMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGVzID8gXy5tYXAodW5pcXVlKG1hdGNoZXMpLCBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5kYXR1bXNbaWRdO1xuICAgICAgICAgICAgICAgIH0pIDogW107XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWxsOiBmdW5jdGlvbiBhbGwoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmRhdHVtcykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMucHVzaCh0aGlzLmRhdHVtc1trZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXR1bXMgPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWUgPSBuZXdOb2RlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VyaWFsaXplOiBmdW5jdGlvbiBzZXJpYWxpemUoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0dW1zOiB0aGlzLmRhdHVtcyxcbiAgICAgICAgICAgICAgICAgICAgdHJpZTogdGhpcy50cmllXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBTZWFyY2hJbmRleDtcbiAgICAgICAgZnVuY3Rpb24gbm9ybWFsaXplVG9rZW5zKHRva2Vucykge1xuICAgICAgICAgICAgdG9rZW5zID0gXy5maWx0ZXIodG9rZW5zLCBmdW5jdGlvbih0b2tlbikge1xuICAgICAgICAgICAgICAgIHJldHVybiAhIXRva2VuO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0b2tlbnMgPSBfLm1hcCh0b2tlbnMsIGZ1bmN0aW9uKHRva2VuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRva2VuLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbmV3Tm9kZSgpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0ge307XG4gICAgICAgICAgICBub2RlW0lEU10gPSBbXTtcbiAgICAgICAgICAgIG5vZGVbQ0hJTERSRU5dID0ge307XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB1bmlxdWUoYXJyYXkpIHtcbiAgICAgICAgICAgIHZhciBzZWVuID0ge30sIHVuaXF1ZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghc2VlblthcnJheVtpXV0pIHtcbiAgICAgICAgICAgICAgICAgICAgc2VlblthcnJheVtpXV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWVzLnB1c2goYXJyYXlbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmlxdWVzO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldEludGVyc2VjdGlvbihhcnJheUEsIGFycmF5Qikge1xuICAgICAgICAgICAgdmFyIGFpID0gMCwgYmkgPSAwLCBpbnRlcnNlY3Rpb24gPSBbXTtcbiAgICAgICAgICAgIGFycmF5QSA9IGFycmF5QS5zb3J0KCk7XG4gICAgICAgICAgICBhcnJheUIgPSBhcnJheUIuc29ydCgpO1xuICAgICAgICAgICAgdmFyIGxlbkFycmF5QSA9IGFycmF5QS5sZW5ndGgsIGxlbkFycmF5QiA9IGFycmF5Qi5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoYWkgPCBsZW5BcnJheUEgJiYgYmkgPCBsZW5BcnJheUIpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyYXlBW2FpXSA8IGFycmF5QltiaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgYWkrKztcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGFycmF5QVthaV0gPiBhcnJheUJbYmldKSB7XG4gICAgICAgICAgICAgICAgICAgIGJpKys7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0aW9uLnB1c2goYXJyYXlBW2FpXSk7XG4gICAgICAgICAgICAgICAgICAgIGFpKys7XG4gICAgICAgICAgICAgICAgICAgIGJpKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGludGVyc2VjdGlvbjtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgUHJlZmV0Y2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBrZXlzO1xuICAgICAgICBrZXlzID0ge1xuICAgICAgICAgICAgZGF0YTogXCJkYXRhXCIsXG4gICAgICAgICAgICBwcm90b2NvbDogXCJwcm90b2NvbFwiLFxuICAgICAgICAgICAgdGh1bWJwcmludDogXCJ0aHVtYnByaW50XCJcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gUHJlZmV0Y2gobykge1xuICAgICAgICAgICAgdGhpcy51cmwgPSBvLnVybDtcbiAgICAgICAgICAgIHRoaXMudHRsID0gby50dGw7XG4gICAgICAgICAgICB0aGlzLmNhY2hlID0gby5jYWNoZTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gby50cmFuc2Zvcm07XG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydCA9IG8udHJhbnNwb3J0O1xuICAgICAgICAgICAgdGhpcy50aHVtYnByaW50ID0gby50aHVtYnByaW50O1xuICAgICAgICAgICAgdGhpcy5zdG9yYWdlID0gbmV3IFBlcnNpc3RlbnRTdG9yYWdlKG8uY2FjaGVLZXkpO1xuICAgICAgICB9XG4gICAgICAgIF8ubWl4aW4oUHJlZmV0Y2gucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBfc2V0dGluZ3M6IGZ1bmN0aW9uIHNldHRpbmdzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogdGhpcy51cmwsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIlxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3RvcmU6IGZ1bmN0aW9uIHN0b3JlKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0KGtleXMuZGF0YSwgZGF0YSwgdGhpcy50dGwpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5zZXQoa2V5cy5wcm90b2NvbCwgbG9jYXRpb24ucHJvdG9jb2wsIHRoaXMudHRsKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0KGtleXMudGh1bWJwcmludCwgdGhpcy50aHVtYnByaW50LCB0aGlzLnR0bCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnJvbUNhY2hlOiBmdW5jdGlvbiBmcm9tQ2FjaGUoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0b3JlZCA9IHt9LCBpc0V4cGlyZWQ7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmNhY2hlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzdG9yZWQuZGF0YSA9IHRoaXMuc3RvcmFnZS5nZXQoa2V5cy5kYXRhKTtcbiAgICAgICAgICAgICAgICBzdG9yZWQucHJvdG9jb2wgPSB0aGlzLnN0b3JhZ2UuZ2V0KGtleXMucHJvdG9jb2wpO1xuICAgICAgICAgICAgICAgIHN0b3JlZC50aHVtYnByaW50ID0gdGhpcy5zdG9yYWdlLmdldChrZXlzLnRodW1icHJpbnQpO1xuICAgICAgICAgICAgICAgIGlzRXhwaXJlZCA9IHN0b3JlZC50aHVtYnByaW50ICE9PSB0aGlzLnRodW1icHJpbnQgfHwgc3RvcmVkLnByb3RvY29sICE9PSBsb2NhdGlvbi5wcm90b2NvbDtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVkLmRhdGEgJiYgIWlzRXhwaXJlZCA/IHN0b3JlZC5kYXRhIDogbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmcm9tTmV0d29yazogZnVuY3Rpb24oY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgaWYgKCFjYikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0KHRoaXMuX3NldHRpbmdzKCkpLmZhaWwob25FcnJvcikuZG9uZShvblJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbkVycm9yKCkge1xuICAgICAgICAgICAgICAgICAgICBjYih0cnVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25SZXNwb25zZShyZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNiKG51bGwsIHRoYXQudHJhbnNmb3JtKHJlc3ApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5jbGVhcigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFByZWZldGNoO1xuICAgIH0oKTtcbiAgICB2YXIgUmVtb3RlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICBmdW5jdGlvbiBSZW1vdGUobykge1xuICAgICAgICAgICAgdGhpcy51cmwgPSBvLnVybDtcbiAgICAgICAgICAgIHRoaXMucHJlcGFyZSA9IG8ucHJlcGFyZTtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtID0gby50cmFuc2Zvcm07XG4gICAgICAgICAgICB0aGlzLnRyYW5zcG9ydCA9IG5ldyBUcmFuc3BvcnQoe1xuICAgICAgICAgICAgICAgIGNhY2hlOiBvLmNhY2hlLFxuICAgICAgICAgICAgICAgIGxpbWl0ZXI6IG8ubGltaXRlcixcbiAgICAgICAgICAgICAgICB0cmFuc3BvcnQ6IG8udHJhbnNwb3J0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKFJlbW90ZS5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIF9zZXR0aW5nczogZnVuY3Rpb24gc2V0dGluZ3MoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXJsOiB0aGlzLnVybCxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIGdldChxdWVyeSwgY2IpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIHNldHRpbmdzO1xuICAgICAgICAgICAgICAgIGlmICghY2IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBxdWVyeSA9IHF1ZXJ5IHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MgPSB0aGlzLnByZXBhcmUocXVlcnksIHRoaXMuX3NldHRpbmdzKCkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zcG9ydC5nZXQoc2V0dGluZ3MsIG9uUmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uUmVzcG9uc2UoZXJyLCByZXNwKSB7XG4gICAgICAgICAgICAgICAgICAgIGVyciA/IGNiKFtdKSA6IGNiKHRoYXQudHJhbnNmb3JtKHJlc3ApKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsTGFzdFJlcXVlc3Q6IGZ1bmN0aW9uIGNhbmNlbExhc3RSZXF1ZXN0KCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwb3J0LmNhbmNlbCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFJlbW90ZTtcbiAgICB9KCk7XG4gICAgdmFyIG9QYXJzZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBwYXJzZShvKSB7XG4gICAgICAgICAgICB2YXIgZGVmYXVsdHMsIHNvcnRlcjtcbiAgICAgICAgICAgIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgIGluaXRpYWxpemU6IHRydWUsXG4gICAgICAgICAgICAgICAgaWRlbnRpZnk6IF8uc3RyaW5naWZ5LFxuICAgICAgICAgICAgICAgIGRhdHVtVG9rZW5pemVyOiBudWxsLFxuICAgICAgICAgICAgICAgIHF1ZXJ5VG9rZW5pemVyOiBudWxsLFxuICAgICAgICAgICAgICAgIHN1ZmZpY2llbnQ6IDUsXG4gICAgICAgICAgICAgICAgc29ydGVyOiBudWxsLFxuICAgICAgICAgICAgICAgIGxvY2FsOiBbXSxcbiAgICAgICAgICAgICAgICBwcmVmZXRjaDogbnVsbCxcbiAgICAgICAgICAgICAgICByZW1vdGU6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvID0gXy5taXhpbihkZWZhdWx0cywgbyB8fCB7fSk7XG4gICAgICAgICAgICAhby5kYXR1bVRva2VuaXplciAmJiAkLmVycm9yKFwiZGF0dW1Ub2tlbml6ZXIgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgICAgICAhby5xdWVyeVRva2VuaXplciAmJiAkLmVycm9yKFwicXVlcnlUb2tlbml6ZXIgaXMgcmVxdWlyZWRcIik7XG4gICAgICAgICAgICBzb3J0ZXIgPSBvLnNvcnRlcjtcbiAgICAgICAgICAgIG8uc29ydGVyID0gc29ydGVyID8gZnVuY3Rpb24oeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4LnNvcnQoc29ydGVyKTtcbiAgICAgICAgICAgIH0gOiBfLmlkZW50aXR5O1xuICAgICAgICAgICAgby5sb2NhbCA9IF8uaXNGdW5jdGlvbihvLmxvY2FsKSA/IG8ubG9jYWwoKSA6IG8ubG9jYWw7XG4gICAgICAgICAgICBvLnByZWZldGNoID0gcGFyc2VQcmVmZXRjaChvLnByZWZldGNoKTtcbiAgICAgICAgICAgIG8ucmVtb3RlID0gcGFyc2VSZW1vdGUoby5yZW1vdGUpO1xuICAgICAgICAgICAgcmV0dXJuIG87XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlUHJlZmV0Y2gobykge1xuICAgICAgICAgICAgdmFyIGRlZmF1bHRzO1xuICAgICAgICAgICAgaWYgKCFvKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0cyA9IHtcbiAgICAgICAgICAgICAgICB1cmw6IG51bGwsXG4gICAgICAgICAgICAgICAgdHRsOiAyNCAqIDYwICogNjAgKiAxZTMsXG4gICAgICAgICAgICAgICAgY2FjaGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY2FjaGVLZXk6IG51bGwsXG4gICAgICAgICAgICAgICAgdGh1bWJwcmludDogXCJcIixcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IF8uaWRlbnRpdHksXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0OiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbyA9IF8uaXNTdHJpbmcobykgPyB7XG4gICAgICAgICAgICAgICAgdXJsOiBvXG4gICAgICAgICAgICB9IDogbztcbiAgICAgICAgICAgIG8gPSBfLm1peGluKGRlZmF1bHRzLCBvKTtcbiAgICAgICAgICAgICFvLnVybCAmJiAkLmVycm9yKFwicHJlZmV0Y2ggcmVxdWlyZXMgdXJsIHRvIGJlIHNldFwiKTtcbiAgICAgICAgICAgIG8udHJhbnNmb3JtID0gby5maWx0ZXIgfHwgby50cmFuc2Zvcm07XG4gICAgICAgICAgICBvLmNhY2hlS2V5ID0gby5jYWNoZUtleSB8fCBvLnVybDtcbiAgICAgICAgICAgIG8udGh1bWJwcmludCA9IFZFUlNJT04gKyBvLnRodW1icHJpbnQ7XG4gICAgICAgICAgICBvLnRyYW5zcG9ydCA9IG8udHJhbnNwb3J0ID8gY2FsbGJhY2tUb0RlZmVycmVkKG8udHJhbnNwb3J0KSA6ICQuYWpheDtcbiAgICAgICAgICAgIHJldHVybiBvO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlUmVtb3RlKG8pIHtcbiAgICAgICAgICAgIHZhciBkZWZhdWx0cztcbiAgICAgICAgICAgIGlmICghbykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgICAgIHVybDogbnVsbCxcbiAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBwcmVwYXJlOiBudWxsLFxuICAgICAgICAgICAgICAgIHJlcGxhY2U6IG51bGwsXG4gICAgICAgICAgICAgICAgd2lsZGNhcmQ6IG51bGwsXG4gICAgICAgICAgICAgICAgbGltaXRlcjogbnVsbCxcbiAgICAgICAgICAgICAgICByYXRlTGltaXRCeTogXCJkZWJvdW5jZVwiLFxuICAgICAgICAgICAgICAgIHJhdGVMaW1pdFdhaXQ6IDMwMCxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IF8uaWRlbnRpdHksXG4gICAgICAgICAgICAgICAgdHJhbnNwb3J0OiBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbyA9IF8uaXNTdHJpbmcobykgPyB7XG4gICAgICAgICAgICAgICAgdXJsOiBvXG4gICAgICAgICAgICB9IDogbztcbiAgICAgICAgICAgIG8gPSBfLm1peGluKGRlZmF1bHRzLCBvKTtcbiAgICAgICAgICAgICFvLnVybCAmJiAkLmVycm9yKFwicmVtb3RlIHJlcXVpcmVzIHVybCB0byBiZSBzZXRcIik7XG4gICAgICAgICAgICBvLnRyYW5zZm9ybSA9IG8uZmlsdGVyIHx8IG8udHJhbnNmb3JtO1xuICAgICAgICAgICAgby5wcmVwYXJlID0gdG9QcmVwYXJlKG8pO1xuICAgICAgICAgICAgby5saW1pdGVyID0gdG9MaW1pdGVyKG8pO1xuICAgICAgICAgICAgby50cmFuc3BvcnQgPSBvLnRyYW5zcG9ydCA/IGNhbGxiYWNrVG9EZWZlcnJlZChvLnRyYW5zcG9ydCkgOiAkLmFqYXg7XG4gICAgICAgICAgICBkZWxldGUgby5yZXBsYWNlO1xuICAgICAgICAgICAgZGVsZXRlIG8ud2lsZGNhcmQ7XG4gICAgICAgICAgICBkZWxldGUgby5yYXRlTGltaXRCeTtcbiAgICAgICAgICAgIGRlbGV0ZSBvLnJhdGVMaW1pdFdhaXQ7XG4gICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB0b1ByZXBhcmUobykge1xuICAgICAgICAgICAgdmFyIHByZXBhcmUsIHJlcGxhY2UsIHdpbGRjYXJkO1xuICAgICAgICAgICAgcHJlcGFyZSA9IG8ucHJlcGFyZTtcbiAgICAgICAgICAgIHJlcGxhY2UgPSBvLnJlcGxhY2U7XG4gICAgICAgICAgICB3aWxkY2FyZCA9IG8ud2lsZGNhcmQ7XG4gICAgICAgICAgICBpZiAocHJlcGFyZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmVwYXJlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgICAgICAgICBwcmVwYXJlID0gcHJlcGFyZUJ5UmVwbGFjZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoby53aWxkY2FyZCkge1xuICAgICAgICAgICAgICAgIHByZXBhcmUgPSBwcmVwYXJlQnlXaWxkY2FyZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHJlcGFyZSA9IGlkZW5pdHlQcmVwYXJlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByZXBhcmU7XG4gICAgICAgICAgICBmdW5jdGlvbiBwcmVwYXJlQnlSZXBsYWNlKHF1ZXJ5LCBzZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLnVybCA9IHJlcGxhY2Uoc2V0dGluZ3MudXJsLCBxdWVyeSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gcHJlcGFyZUJ5V2lsZGNhcmQocXVlcnksIHNldHRpbmdzKSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MudXJsID0gc2V0dGluZ3MudXJsLnJlcGxhY2Uod2lsZGNhcmQsIGVuY29kZVVSSUNvbXBvbmVudChxdWVyeSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXR0aW5ncztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGlkZW5pdHlQcmVwYXJlKHF1ZXJ5LCBzZXR0aW5ncykge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXR0aW5ncztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiB0b0xpbWl0ZXIobykge1xuICAgICAgICAgICAgdmFyIGxpbWl0ZXIsIG1ldGhvZCwgd2FpdDtcbiAgICAgICAgICAgIGxpbWl0ZXIgPSBvLmxpbWl0ZXI7XG4gICAgICAgICAgICBtZXRob2QgPSBvLnJhdGVMaW1pdEJ5O1xuICAgICAgICAgICAgd2FpdCA9IG8ucmF0ZUxpbWl0V2FpdDtcbiAgICAgICAgICAgIGlmICghbGltaXRlcikge1xuICAgICAgICAgICAgICAgIGxpbWl0ZXIgPSAvXnRocm90dGxlJC9pLnRlc3QobWV0aG9kKSA/IHRocm90dGxlKHdhaXQpIDogZGVib3VuY2Uod2FpdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbGltaXRlcjtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGRlYm91bmNlKHdhaXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gZGVib3VuY2UoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF8uZGVib3VuY2UoZm4sIHdhaXQpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiB0aHJvdHRsZSh3YWl0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHRocm90dGxlKGZuKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfLnRocm90dGxlKGZuLCB3YWl0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGNhbGxiYWNrVG9EZWZlcnJlZChmbikge1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHdyYXBwZXIobykge1xuICAgICAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICBmbihvLCBvblN1Y2Nlc3MsIG9uRXJyb3IpO1xuICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZDtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvblN1Y2Nlc3MocmVzcCkge1xuICAgICAgICAgICAgICAgICAgICBfLmRlZmVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXNwKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICB2YXIgQmxvb2Rob3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG9sZDtcbiAgICAgICAgb2xkID0gd2luZG93ICYmIHdpbmRvdy5CbG9vZGhvdW5kO1xuICAgICAgICBmdW5jdGlvbiBCbG9vZGhvdW5kKG8pIHtcbiAgICAgICAgICAgIG8gPSBvUGFyc2VyKG8pO1xuICAgICAgICAgICAgdGhpcy5zb3J0ZXIgPSBvLnNvcnRlcjtcbiAgICAgICAgICAgIHRoaXMuaWRlbnRpZnkgPSBvLmlkZW50aWZ5O1xuICAgICAgICAgICAgdGhpcy5zdWZmaWNpZW50ID0gby5zdWZmaWNpZW50O1xuICAgICAgICAgICAgdGhpcy5sb2NhbCA9IG8ubG9jYWw7XG4gICAgICAgICAgICB0aGlzLnJlbW90ZSA9IG8ucmVtb3RlID8gbmV3IFJlbW90ZShvLnJlbW90ZSkgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy5wcmVmZXRjaCA9IG8ucHJlZmV0Y2ggPyBuZXcgUHJlZmV0Y2goby5wcmVmZXRjaCkgOiBudWxsO1xuICAgICAgICAgICAgdGhpcy5pbmRleCA9IG5ldyBTZWFyY2hJbmRleCh7XG4gICAgICAgICAgICAgICAgaWRlbnRpZnk6IHRoaXMuaWRlbnRpZnksXG4gICAgICAgICAgICAgICAgZGF0dW1Ub2tlbml6ZXI6IG8uZGF0dW1Ub2tlbml6ZXIsXG4gICAgICAgICAgICAgICAgcXVlcnlUb2tlbml6ZXI6IG8ucXVlcnlUb2tlbml6ZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgby5pbml0aWFsaXplICE9PSBmYWxzZSAmJiB0aGlzLmluaXRpYWxpemUoKTtcbiAgICAgICAgfVxuICAgICAgICBCbG9vZGhvdW5kLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgICAgICAgICAgd2luZG93ICYmICh3aW5kb3cuQmxvb2Rob3VuZCA9IG9sZCk7XG4gICAgICAgICAgICByZXR1cm4gQmxvb2Rob3VuZDtcbiAgICAgICAgfTtcbiAgICAgICAgQmxvb2Rob3VuZC50b2tlbml6ZXJzID0gdG9rZW5pemVycztcbiAgICAgICAgXy5taXhpbihCbG9vZGhvdW5kLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgX190dEFkYXB0ZXI6IGZ1bmN0aW9uIHR0QWRhcHRlcigpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlID8gd2l0aEFzeW5jIDogd2l0aG91dEFzeW5jO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdpdGhBc3luYyhxdWVyeSwgc3luYywgYXN5bmMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuc2VhcmNoKHF1ZXJ5LCBzeW5jLCBhc3luYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHdpdGhvdXRBc3luYyhxdWVyeSwgc3luYykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5zZWFyY2gocXVlcnksIHN5bmMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfbG9hZFByZWZldGNoOiBmdW5jdGlvbiBsb2FkUHJlZmV0Y2goKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLCBkZWZlcnJlZCwgc2VyaWFsaXplZDtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucHJlZmV0Y2gpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2VyaWFsaXplZCA9IHRoaXMucHJlZmV0Y2guZnJvbUNhY2hlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmRleC5ib290c3RyYXAoc2VyaWFsaXplZCk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWZldGNoLmZyb21OZXR3b3JrKGRvbmUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZSgpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRvbmUoZXJyLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5yZWplY3QoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5wcmVmZXRjaC5zdG9yZSh0aGF0LmluZGV4LnNlcmlhbGl6ZSgpKTtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIGRlZmVycmVkO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAodGhpcy5pbml0UHJvbWlzZSA9IHRoaXMuX2xvYWRQcmVmZXRjaCgpKS5kb25lKGFkZExvY2FsVG9JbmRleCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5pdFByb21pc2U7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYWRkTG9jYWxUb0luZGV4KCkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmFkZCh0aGF0LmxvY2FsKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gaW5pdGlhbGl6ZShmb3JjZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAhdGhpcy5pbml0UHJvbWlzZSB8fCBmb3JjZSA/IHRoaXMuX2luaXRpYWxpemUoKSA6IHRoaXMuaW5pdFByb21pc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWRkOiBmdW5jdGlvbiBhZGQoZGF0YSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXguYWRkKGRhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KGlkcykge1xuICAgICAgICAgICAgICAgIGlkcyA9IF8uaXNBcnJheShpZHMpID8gaWRzIDogW10uc2xpY2UuY2FsbChhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4LmdldChpZHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24gc2VhcmNoKHF1ZXJ5LCBzeW5jLCBhc3luYykge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgbG9jYWw7XG4gICAgICAgICAgICAgICAgbG9jYWwgPSB0aGlzLnNvcnRlcih0aGlzLmluZGV4LnNlYXJjaChxdWVyeSkpO1xuICAgICAgICAgICAgICAgIHN5bmModGhpcy5yZW1vdGUgPyBsb2NhbC5zbGljZSgpIDogbG9jYWwpO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlbW90ZSAmJiBsb2NhbC5sZW5ndGggPCB0aGlzLnN1ZmZpY2llbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdGUuZ2V0KHF1ZXJ5LCBwcm9jZXNzUmVtb3RlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3RlLmNhbmNlbExhc3RSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHByb2Nlc3NSZW1vdGUocmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBub25EdXBsaWNhdGVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChyZW1vdGUsIGZ1bmN0aW9uKHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICFfLnNvbWUobG9jYWwsIGZ1bmN0aW9uKGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5pZGVudGlmeShyKSA9PT0gdGhhdC5pZGVudGlmeShsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pICYmIG5vbkR1cGxpY2F0ZXMucHVzaChyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jICYmIGFzeW5jKG5vbkR1cGxpY2F0ZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGw6IGZ1bmN0aW9uIGFsbCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pbmRleC5hbGwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleC5yZXNldCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFyUHJlZmV0Y2hDYWNoZTogZnVuY3Rpb24gY2xlYXJQcmVmZXRjaENhY2hlKCkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJlZmV0Y2ggJiYgdGhpcy5wcmVmZXRjaC5jbGVhcigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFyUmVtb3RlQ2FjaGU6IGZ1bmN0aW9uIGNsZWFyUmVtb3RlQ2FjaGUoKSB7XG4gICAgICAgICAgICAgICAgVHJhbnNwb3J0LnJlc2V0Q2FjaGUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0dEFkYXB0ZXI6IGZ1bmN0aW9uIHR0QWRhcHRlcigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fX3R0QWRhcHRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEJsb29kaG91bmQ7XG4gICAgfSgpO1xuICAgIHJldHVybiBCbG9vZGhvdW5kO1xufSk7XG5cbihmdW5jdGlvbihyb290LCBmYWN0b3J5KSB7XG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgIGRlZmluZShcInR5cGVhaGVhZC5qc1wiLCBbIFwianF1ZXJ5XCIgXSwgZnVuY3Rpb24oYTApIHtcbiAgICAgICAgICAgIHJldHVybiBmYWN0b3J5KGEwKTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImpxdWVyeVwiKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeShqUXVlcnkpO1xuICAgIH1cbn0pKHRoaXMsIGZ1bmN0aW9uKCQpIHtcbiAgICB2YXIgXyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlzTXNpZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC8obXNpZXx0cmlkZW50KS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgPyBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC8obXNpZSB8cnY6KShcXGQrKC5cXGQrKT8pL2kpWzJdIDogZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNCbGFua1N0cmluZzogZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFzdHIgfHwgL15cXHMqJC8udGVzdChzdHIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVzY2FwZVJlZ0V4Q2hhcnM6IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1xcLVxcW1xcXVxcL1xce1xcfVxcKFxcKVxcKlxcK1xcP1xcLlxcXFxcXF5cXCRcXHxdL2csIFwiXFxcXCQmXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzU3RyaW5nOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJzdHJpbmdcIjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc051bWJlcjogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT09IFwibnVtYmVyXCI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNBcnJheTogJC5pc0FycmF5LFxuICAgICAgICAgICAgaXNGdW5jdGlvbjogJC5pc0Z1bmN0aW9uLFxuICAgICAgICAgICAgaXNPYmplY3Q6ICQuaXNQbGFpbk9iamVjdCxcbiAgICAgICAgICAgIGlzVW5kZWZpbmVkOiBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJ1bmRlZmluZWRcIjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0VsZW1lbnQ6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0pRdWVyeTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iaiBpbnN0YW5jZW9mICQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdG9TdHI6IGZ1bmN0aW9uIHRvU3RyKHMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5pc1VuZGVmaW5lZChzKSB8fCBzID09PSBudWxsID8gXCJcIiA6IHMgKyBcIlwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJpbmQ6ICQucHJveHksXG4gICAgICAgICAgICBlYWNoOiBmdW5jdGlvbihjb2xsZWN0aW9uLCBjYikge1xuICAgICAgICAgICAgICAgICQuZWFjaChjb2xsZWN0aW9uLCByZXZlcnNlQXJncyk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmV2ZXJzZUFyZ3MoaW5kZXgsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYih2YWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYXA6ICQubWFwLFxuICAgICAgICAgICAgZmlsdGVyOiAkLmdyZXAsXG4gICAgICAgICAgICBldmVyeTogZnVuY3Rpb24ob2JqLCB0ZXN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKCFvYmopIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJC5lYWNoKG9iaiwgZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEocmVzdWx0ID0gdGVzdC5jYWxsKG51bGwsIHZhbCwga2V5LCBvYmopKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhcmVzdWx0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNvbWU6IGZ1bmN0aW9uKG9iaiwgdGVzdCkge1xuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBpZiAoIW9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkLmVhY2gob2JqLCBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID0gdGVzdC5jYWxsKG51bGwsIHZhbCwga2V5LCBvYmopKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gISFyZXN1bHQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbWl4aW46ICQuZXh0ZW5kLFxuICAgICAgICAgICAgaWRlbnRpdHk6IGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbG9uZTogZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQuZXh0ZW5kKHRydWUsIHt9LCBvYmopO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldElkR2VuZXJhdG9yOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgY291bnRlciA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY291bnRlcisrO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdGVtcGxhdGlmeTogZnVuY3Rpb24gdGVtcGxhdGlmeShvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gJC5pc0Z1bmN0aW9uKG9iaikgPyBvYmogOiB0ZW1wbGF0ZTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB0ZW1wbGF0ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyhvYmopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZlcjogZnVuY3Rpb24oZm4pIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZuLCAwKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWJvdW5jZTogZnVuY3Rpb24oZnVuYywgd2FpdCwgaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRpbWVvdXQsIHJlc3VsdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cywgbGF0ZXIsIGNhbGxOb3c7XG4gICAgICAgICAgICAgICAgICAgIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB0aHJvdHRsZTogZnVuY3Rpb24oZnVuYywgd2FpdCkge1xuICAgICAgICAgICAgICAgIHZhciBjb250ZXh0LCBhcmdzLCB0aW1lb3V0LCByZXN1bHQsIHByZXZpb3VzLCBsYXRlcjtcbiAgICAgICAgICAgICAgICBwcmV2aW91cyA9IDA7XG4gICAgICAgICAgICAgICAgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXMgPSBuZXcgRGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCksIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzID0gbm93O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0cmluZ2lmeTogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uaXNTdHJpbmcodmFsKSA/IHZhbCA6IEpTT04uc3RyaW5naWZ5KHZhbCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgbm9vcDogZnVuY3Rpb24oKSB7fVxuICAgICAgICB9O1xuICAgIH0oKTtcbiAgICB2YXIgV1dXID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgZGVmYXVsdENsYXNzTmFtZXMgPSB7XG4gICAgICAgICAgICB3cmFwcGVyOiBcInR3aXR0ZXItdHlwZWFoZWFkXCIsXG4gICAgICAgICAgICBpbnB1dDogXCJ0dC1pbnB1dFwiLFxuICAgICAgICAgICAgaGludDogXCJ0dC1oaW50XCIsXG4gICAgICAgICAgICBtZW51OiBcInR0LW1lbnVcIixcbiAgICAgICAgICAgIGRhdGFzZXQ6IFwidHQtZGF0YXNldFwiLFxuICAgICAgICAgICAgc3VnZ2VzdGlvbjogXCJ0dC1zdWdnZXN0aW9uXCIsXG4gICAgICAgICAgICBzZWxlY3RhYmxlOiBcInR0LXNlbGVjdGFibGVcIixcbiAgICAgICAgICAgIGVtcHR5OiBcInR0LWVtcHR5XCIsXG4gICAgICAgICAgICBvcGVuOiBcInR0LW9wZW5cIixcbiAgICAgICAgICAgIGN1cnNvcjogXCJ0dC1jdXJzb3JcIixcbiAgICAgICAgICAgIGhpZ2hsaWdodDogXCJ0dC1oaWdobGlnaHRcIlxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gYnVpbGQ7XG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkKG8pIHtcbiAgICAgICAgICAgIHZhciB3d3csIGNsYXNzZXM7XG4gICAgICAgICAgICBjbGFzc2VzID0gXy5taXhpbih7fSwgZGVmYXVsdENsYXNzTmFtZXMsIG8pO1xuICAgICAgICAgICAgd3d3ID0ge1xuICAgICAgICAgICAgICAgIGNzczogYnVpbGRDc3MoKSxcbiAgICAgICAgICAgICAgICBjbGFzc2VzOiBjbGFzc2VzLFxuICAgICAgICAgICAgICAgIGh0bWw6IGJ1aWxkSHRtbChjbGFzc2VzKSxcbiAgICAgICAgICAgICAgICBzZWxlY3RvcnM6IGJ1aWxkU2VsZWN0b3JzKGNsYXNzZXMpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBjc3M6IHd3dy5jc3MsXG4gICAgICAgICAgICAgICAgaHRtbDogd3d3Lmh0bWwsXG4gICAgICAgICAgICAgICAgY2xhc3Nlczogd3d3LmNsYXNzZXMsXG4gICAgICAgICAgICAgICAgc2VsZWN0b3JzOiB3d3cuc2VsZWN0b3JzLFxuICAgICAgICAgICAgICAgIG1peGluOiBmdW5jdGlvbihvKSB7XG4gICAgICAgICAgICAgICAgICAgIF8ubWl4aW4obywgd3d3KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkSHRtbChjKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHdyYXBwZXI6ICc8c3BhbiBjbGFzcz1cIicgKyBjLndyYXBwZXIgKyAnXCI+PC9zcGFuPicsXG4gICAgICAgICAgICAgICAgbWVudTogJzxkaXYgY2xhc3M9XCInICsgYy5tZW51ICsgJ1wiPjwvZGl2PidcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYnVpbGRTZWxlY3RvcnMoY2xhc3Nlcykge1xuICAgICAgICAgICAgdmFyIHNlbGVjdG9ycyA9IHt9O1xuICAgICAgICAgICAgXy5lYWNoKGNsYXNzZXMsIGZ1bmN0aW9uKHYsIGspIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RvcnNba10gPSBcIi5cIiArIHY7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBzZWxlY3RvcnM7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gYnVpbGRDc3MoKSB7XG4gICAgICAgICAgICB2YXIgY3NzID0ge1xuICAgICAgICAgICAgICAgIHdyYXBwZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogXCJpbmxpbmUtYmxvY2tcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaGludDoge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IFwiMFwiLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBcIjBcIixcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6IFwidHJhbnNwYXJlbnRcIixcbiAgICAgICAgICAgICAgICAgICAgYm94U2hhZG93OiBcIm5vbmVcIixcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogXCIxXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBcInJlbGF0aXZlXCIsXG4gICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsQWxpZ246IFwidG9wXCIsXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ0cmFuc3BhcmVudFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpbnB1dFdpdGhOb0hpbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmVsYXRpdmVcIixcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogXCJ0b3BcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWVudToge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IFwiMTAwJVwiLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBcIjBcIixcbiAgICAgICAgICAgICAgICAgICAgekluZGV4OiBcIjEwMFwiLFxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBcIm5vbmVcIlxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbHRyOiB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IFwiMFwiLFxuICAgICAgICAgICAgICAgICAgICByaWdodDogXCJhdXRvXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJ0bDoge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBcImF1dG9cIixcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IFwiIDBcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoXy5pc01zaWUoKSkge1xuICAgICAgICAgICAgICAgIF8ubWl4aW4oY3NzLmlucHV0LCB7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmRJbWFnZTogXCJ1cmwoZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUE3KVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3NzO1xuICAgICAgICB9XG4gICAgfSgpO1xuICAgIHZhciBFdmVudEJ1cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIG5hbWVzcGFjZSwgZGVwcmVjYXRpb25NYXA7XG4gICAgICAgIG5hbWVzcGFjZSA9IFwidHlwZWFoZWFkOlwiO1xuICAgICAgICBkZXByZWNhdGlvbk1hcCA9IHtcbiAgICAgICAgICAgIHJlbmRlcjogXCJyZW5kZXJlZFwiLFxuICAgICAgICAgICAgY3Vyc29yY2hhbmdlOiBcImN1cnNvcmNoYW5nZWRcIixcbiAgICAgICAgICAgIHNlbGVjdDogXCJzZWxlY3RlZFwiLFxuICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiBcImF1dG9jb21wbGV0ZWRcIlxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBFdmVudEJ1cyhvKSB7XG4gICAgICAgICAgICBpZiAoIW8gfHwgIW8uZWwpIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKFwiRXZlbnRCdXMgaW5pdGlhbGl6ZWQgd2l0aG91dCBlbFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGVsID0gJChvLmVsKTtcbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKEV2ZW50QnVzLnByb3RvdHlwZSwge1xuICAgICAgICAgICAgX3RyaWdnZXI6IGZ1bmN0aW9uKHR5cGUsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGU7XG4gICAgICAgICAgICAgICAgJGUgPSAkLkV2ZW50KG5hbWVzcGFjZSArIHR5cGUpO1xuICAgICAgICAgICAgICAgIChhcmdzID0gYXJncyB8fCBbXSkudW5zaGlmdCgkZSk7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwudHJpZ2dlci5hcHBseSh0aGlzLiRlbCwgYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJlZm9yZTogZnVuY3Rpb24odHlwZSkge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzLCAkZTtcbiAgICAgICAgICAgICAgICBhcmdzID0gW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICAgICAgICAgICRlID0gdGhpcy5fdHJpZ2dlcihcImJlZm9yZVwiICsgdHlwZSwgYXJncyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRlLmlzRGVmYXVsdFByZXZlbnRlZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyaWdnZXI6IGZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVwcmVjYXRlZFR5cGU7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJpZ2dlcih0eXBlLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICAgICAgICAgIGlmIChkZXByZWNhdGVkVHlwZSA9IGRlcHJlY2F0aW9uTWFwW3R5cGVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RyaWdnZXIoZGVwcmVjYXRlZFR5cGUsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIEV2ZW50QnVzO1xuICAgIH0oKTtcbiAgICB2YXIgRXZlbnRFbWl0dGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgc3BsaXR0ZXIgPSAvXFxzKy8sIG5leHRUaWNrID0gZ2V0TmV4dFRpY2soKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG9uU3luYzogb25TeW5jLFxuICAgICAgICAgICAgb25Bc3luYzogb25Bc3luYyxcbiAgICAgICAgICAgIG9mZjogb2ZmLFxuICAgICAgICAgICAgdHJpZ2dlcjogdHJpZ2dlclxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBvbihtZXRob2QsIHR5cGVzLCBjYiwgY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgICAgICBpZiAoIWNiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0eXBlcyA9IHR5cGVzLnNwbGl0KHNwbGl0dGVyKTtcbiAgICAgICAgICAgIGNiID0gY29udGV4dCA/IGJpbmRDb250ZXh0KGNiLCBjb250ZXh0KSA6IGNiO1xuICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzIHx8IHt9O1xuICAgICAgICAgICAgd2hpbGUgKHR5cGUgPSB0eXBlcy5zaGlmdCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzW3R5cGVdID0gdGhpcy5fY2FsbGJhY2tzW3R5cGVdIHx8IHtcbiAgICAgICAgICAgICAgICAgICAgc3luYzogW10sXG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5fY2FsbGJhY2tzW3R5cGVdW21ldGhvZF0ucHVzaChjYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBvbkFzeW5jKHR5cGVzLCBjYiwgY29udGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIG9uLmNhbGwodGhpcywgXCJhc3luY1wiLCB0eXBlcywgY2IsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uU3luYyh0eXBlcywgY2IsIGNvbnRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBvbi5jYWxsKHRoaXMsIFwic3luY1wiLCB0eXBlcywgY2IsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9mZih0eXBlcykge1xuICAgICAgICAgICAgdmFyIHR5cGU7XG4gICAgICAgICAgICBpZiAoIXRoaXMuX2NhbGxiYWNrcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdHlwZXMgPSB0eXBlcy5zcGxpdChzcGxpdHRlcik7XG4gICAgICAgICAgICB3aGlsZSAodHlwZSA9IHR5cGVzLnNoaWZ0KCkpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fY2FsbGJhY2tzW3R5cGVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gdHJpZ2dlcih0eXBlcykge1xuICAgICAgICAgICAgdmFyIHR5cGUsIGNhbGxiYWNrcywgYXJncywgc3luY0ZsdXNoLCBhc3luY0ZsdXNoO1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9jYWxsYmFja3MpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHR5cGVzID0gdHlwZXMuc3BsaXQoc3BsaXR0ZXIpO1xuICAgICAgICAgICAgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgICAgIHdoaWxlICgodHlwZSA9IHR5cGVzLnNoaWZ0KCkpICYmIChjYWxsYmFja3MgPSB0aGlzLl9jYWxsYmFja3NbdHlwZV0pKSB7XG4gICAgICAgICAgICAgICAgc3luY0ZsdXNoID0gZ2V0Rmx1c2goY2FsbGJhY2tzLnN5bmMsIHRoaXMsIFsgdHlwZSBdLmNvbmNhdChhcmdzKSk7XG4gICAgICAgICAgICAgICAgYXN5bmNGbHVzaCA9IGdldEZsdXNoKGNhbGxiYWNrcy5hc3luYywgdGhpcywgWyB0eXBlIF0uY29uY2F0KGFyZ3MpKTtcbiAgICAgICAgICAgICAgICBzeW5jRmx1c2goKSAmJiBuZXh0VGljayhhc3luY0ZsdXNoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldEZsdXNoKGNhbGxiYWNrcywgY29udGV4dCwgYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGZsdXNoO1xuICAgICAgICAgICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNhbmNlbGxlZDtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gY2FsbGJhY2tzLmxlbmd0aDsgIWNhbmNlbGxlZCAmJiBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsbGVkID0gY2FsbGJhY2tzW2ldLmFwcGx5KGNvbnRleHQsIGFyZ3MpID09PSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuICFjYW5jZWxsZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gZ2V0TmV4dFRpY2soKSB7XG4gICAgICAgICAgICB2YXIgbmV4dFRpY2tGbjtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuc2V0SW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgICAgbmV4dFRpY2tGbiA9IGZ1bmN0aW9uIG5leHRUaWNrU2V0SW1tZWRpYXRlKGZuKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldEltbWVkaWF0ZShmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5leHRUaWNrRm4gPSBmdW5jdGlvbiBuZXh0VGlja1NldFRpbWVvdXQoZm4pIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV4dFRpY2tGbjtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBiaW5kQ29udGV4dChmbiwgY29udGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIGZuLmJpbmQgPyBmbi5iaW5kKGNvbnRleHQpIDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgZm4uYXBwbHkoY29udGV4dCwgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9KCk7XG4gICAgdmFyIGhpZ2hsaWdodCA9IGZ1bmN0aW9uKGRvYykge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIGRlZmF1bHRzID0ge1xuICAgICAgICAgICAgbm9kZTogbnVsbCxcbiAgICAgICAgICAgIHBhdHRlcm46IG51bGwsXG4gICAgICAgICAgICB0YWdOYW1lOiBcInN0cm9uZ1wiLFxuICAgICAgICAgICAgY2xhc3NOYW1lOiBudWxsLFxuICAgICAgICAgICAgd29yZHNPbmx5OiBmYWxzZSxcbiAgICAgICAgICAgIGNhc2VTZW5zaXRpdmU6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBoaWdodGxpZ2h0KG8pIHtcbiAgICAgICAgICAgIHZhciByZWdleDtcbiAgICAgICAgICAgIG8gPSBfLm1peGluKHt9LCBkZWZhdWx0cywgbyk7XG4gICAgICAgICAgICBpZiAoIW8ubm9kZSB8fCAhby5wYXR0ZXJuKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgby5wYXR0ZXJuID0gXy5pc0FycmF5KG8ucGF0dGVybikgPyBvLnBhdHRlcm4gOiBbIG8ucGF0dGVybiBdO1xuICAgICAgICAgICAgcmVnZXggPSBnZXRSZWdleChvLnBhdHRlcm4sIG8uY2FzZVNlbnNpdGl2ZSwgby53b3Jkc09ubHkpO1xuICAgICAgICAgICAgdHJhdmVyc2Uoby5ub2RlLCBoaWdodGxpZ2h0VGV4dE5vZGUpO1xuICAgICAgICAgICAgZnVuY3Rpb24gaGlnaHRsaWdodFRleHROb2RlKHRleHROb2RlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoLCBwYXR0ZXJuTm9kZSwgd3JhcHBlck5vZGU7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoID0gcmVnZXguZXhlYyh0ZXh0Tm9kZS5kYXRhKSkge1xuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyTm9kZSA9IGRvYy5jcmVhdGVFbGVtZW50KG8udGFnTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIG8uY2xhc3NOYW1lICYmICh3cmFwcGVyTm9kZS5jbGFzc05hbWUgPSBvLmNsYXNzTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm5Ob2RlID0gdGV4dE5vZGUuc3BsaXRUZXh0KG1hdGNoLmluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgcGF0dGVybk5vZGUuc3BsaXRUZXh0KG1hdGNoWzBdLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHdyYXBwZXJOb2RlLmFwcGVuZENoaWxkKHBhdHRlcm5Ob2RlLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgICAgICAgICAgICAgICAgIHRleHROb2RlLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHdyYXBwZXJOb2RlLCBwYXR0ZXJuTm9kZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhIW1hdGNoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gdHJhdmVyc2UoZWwsIGhpZ2h0bGlnaHRUZXh0Tm9kZSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGlsZE5vZGUsIFRFWFRfTk9ERV9UWVBFID0gMztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgY2hpbGROb2RlID0gZWwuY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoaWxkTm9kZS5ub2RlVHlwZSA9PT0gVEVYVF9OT0RFX1RZUEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gaGlnaHRsaWdodFRleHROb2RlKGNoaWxkTm9kZSkgPyAxIDogMDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYXZlcnNlKGNoaWxkTm9kZSwgaGlnaHRsaWdodFRleHROb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gZ2V0UmVnZXgocGF0dGVybnMsIGNhc2VTZW5zaXRpdmUsIHdvcmRzT25seSkge1xuICAgICAgICAgICAgdmFyIGVzY2FwZWRQYXR0ZXJucyA9IFtdLCByZWdleFN0cjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBwYXR0ZXJucy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGVzY2FwZWRQYXR0ZXJucy5wdXNoKF8uZXNjYXBlUmVnRXhDaGFycyhwYXR0ZXJuc1tpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVnZXhTdHIgPSB3b3Jkc09ubHkgPyBcIlxcXFxiKFwiICsgZXNjYXBlZFBhdHRlcm5zLmpvaW4oXCJ8XCIpICsgXCIpXFxcXGJcIiA6IFwiKFwiICsgZXNjYXBlZFBhdHRlcm5zLmpvaW4oXCJ8XCIpICsgXCIpXCI7XG4gICAgICAgICAgICByZXR1cm4gY2FzZVNlbnNpdGl2ZSA/IG5ldyBSZWdFeHAocmVnZXhTdHIpIDogbmV3IFJlZ0V4cChyZWdleFN0ciwgXCJpXCIpO1xuICAgICAgICB9XG4gICAgfSh3aW5kb3cuZG9jdW1lbnQpO1xuICAgIHZhciBJbnB1dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHNwZWNpYWxLZXlDb2RlTWFwO1xuICAgICAgICBzcGVjaWFsS2V5Q29kZU1hcCA9IHtcbiAgICAgICAgICAgIDk6IFwidGFiXCIsXG4gICAgICAgICAgICAyNzogXCJlc2NcIixcbiAgICAgICAgICAgIDM3OiBcImxlZnRcIixcbiAgICAgICAgICAgIDM5OiBcInJpZ2h0XCIsXG4gICAgICAgICAgICAxMzogXCJlbnRlclwiLFxuICAgICAgICAgICAgMzg6IFwidXBcIixcbiAgICAgICAgICAgIDQwOiBcImRvd25cIlxuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBJbnB1dChvLCB3d3cpIHtcbiAgICAgICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICAgICAgaWYgKCFvLmlucHV0KSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcihcImlucHV0IGlzIG1pc3NpbmdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3d3cubWl4aW4odGhpcyk7XG4gICAgICAgICAgICB0aGlzLiRoaW50ID0gJChvLmhpbnQpO1xuICAgICAgICAgICAgdGhpcy4kaW5wdXQgPSAkKG8uaW5wdXQpO1xuICAgICAgICAgICAgdGhpcy5xdWVyeSA9IHRoaXMuJGlucHV0LnZhbCgpO1xuICAgICAgICAgICAgdGhpcy5xdWVyeVdoZW5Gb2N1c2VkID0gdGhpcy5oYXNGb2N1cygpID8gdGhpcy5xdWVyeSA6IG51bGw7XG4gICAgICAgICAgICB0aGlzLiRvdmVyZmxvd0hlbHBlciA9IGJ1aWxkT3ZlcmZsb3dIZWxwZXIodGhpcy4kaW5wdXQpO1xuICAgICAgICAgICAgdGhpcy5fY2hlY2tMYW5ndWFnZURpcmVjdGlvbigpO1xuICAgICAgICAgICAgaWYgKHRoaXMuJGhpbnQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRIaW50ID0gdGhpcy5nZXRIaW50ID0gdGhpcy5jbGVhckhpbnQgPSB0aGlzLmNsZWFySGludElmSW52YWxpZCA9IF8ubm9vcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBJbnB1dC5ub3JtYWxpemVRdWVyeSA9IGZ1bmN0aW9uKHN0cikge1xuICAgICAgICAgICAgcmV0dXJuIChzdHIgfHwgXCJcIikucmVwbGFjZSgvXlxccyovZywgXCJcIikucmVwbGFjZSgvXFxzezIsfS9nLCBcIiBcIik7XG4gICAgICAgIH07XG4gICAgICAgIF8ubWl4aW4oSW5wdXQucHJvdG90eXBlLCBFdmVudEVtaXR0ZXIsIHtcbiAgICAgICAgICAgIF9vbkJsdXI6IGZ1bmN0aW9uIG9uQmx1cigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0SW5wdXRWYWx1ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcImJsdXJyZWRcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRm9jdXM6IGZ1bmN0aW9uIG9uRm9jdXMoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVyeVdoZW5Gb2N1c2VkID0gdGhpcy5xdWVyeTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJmb2N1c2VkXCIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbktleWRvd246IGZ1bmN0aW9uIG9uS2V5ZG93bigkZSkge1xuICAgICAgICAgICAgICAgIHZhciBrZXlOYW1lID0gc3BlY2lhbEtleUNvZGVNYXBbJGUud2hpY2ggfHwgJGUua2V5Q29kZV07XG4gICAgICAgICAgICAgICAgdGhpcy5fbWFuYWdlUHJldmVudERlZmF1bHQoa2V5TmFtZSwgJGUpO1xuICAgICAgICAgICAgICAgIGlmIChrZXlOYW1lICYmIHRoaXMuX3Nob3VsZFRyaWdnZXIoa2V5TmFtZSwgJGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihrZXlOYW1lICsgXCJLZXllZFwiLCAkZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbklucHV0OiBmdW5jdGlvbiBvbklucHV0KCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldFF1ZXJ5KHRoaXMuZ2V0SW5wdXRWYWx1ZSgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFySGludElmSW52YWxpZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrTGFuZ3VhZ2VEaXJlY3Rpb24oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfbWFuYWdlUHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uIG1hbmFnZVByZXZlbnREZWZhdWx0KGtleU5hbWUsICRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByZXZlbnREZWZhdWx0O1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5TmFtZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcInVwXCI6XG4gICAgICAgICAgICAgICAgICBjYXNlIFwiZG93blwiOlxuICAgICAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdCA9ICF3aXRoTW9kaWZpZXIoJGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcHJldmVudERlZmF1bHQgJiYgJGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvdWxkVHJpZ2dlcjogZnVuY3Rpb24gc2hvdWxkVHJpZ2dlcihrZXlOYW1lLCAkZSkge1xuICAgICAgICAgICAgICAgIHZhciB0cmlnZ2VyO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5TmFtZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcInRhYlwiOlxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyID0gIXdpdGhNb2RpZmllcigkZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2NoZWNrTGFuZ3VhZ2VEaXJlY3Rpb246IGZ1bmN0aW9uIGNoZWNrTGFuZ3VhZ2VEaXJlY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRpciA9ICh0aGlzLiRpbnB1dC5jc3MoXCJkaXJlY3Rpb25cIikgfHwgXCJsdHJcIikudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kaXIgIT09IGRpcikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpciA9IGRpcjtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaGludC5hdHRyKFwiZGlyXCIsIGRpcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcImxhbmdEaXJDaGFuZ2VkXCIsIGRpcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9zZXRRdWVyeTogZnVuY3Rpb24gc2V0UXVlcnkodmFsLCBzaWxlbnQpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJlRXF1aXZhbGVudCwgaGFzRGlmZmVyZW50V2hpdGVzcGFjZTtcbiAgICAgICAgICAgICAgICBhcmVFcXVpdmFsZW50ID0gYXJlUXVlcmllc0VxdWl2YWxlbnQodmFsLCB0aGlzLnF1ZXJ5KTtcbiAgICAgICAgICAgICAgICBoYXNEaWZmZXJlbnRXaGl0ZXNwYWNlID0gYXJlRXF1aXZhbGVudCA/IHRoaXMucXVlcnkubGVuZ3RoICE9PSB2YWwubGVuZ3RoIDogZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVyeSA9IHZhbDtcbiAgICAgICAgICAgICAgICBpZiAoIXNpbGVudCAmJiAhYXJlRXF1aXZhbGVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJxdWVyeUNoYW5nZWRcIiwgdGhpcy5xdWVyeSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghc2lsZW50ICYmIGhhc0RpZmZlcmVudFdoaXRlc3BhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwid2hpdGVzcGFjZUNoYW5nZWRcIiwgdGhpcy5xdWVyeSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJpbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgb25CbHVyLCBvbkZvY3VzLCBvbktleWRvd24sIG9uSW5wdXQ7XG4gICAgICAgICAgICAgICAgb25CbHVyID0gXy5iaW5kKHRoaXMuX29uQmx1ciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgb25Gb2N1cyA9IF8uYmluZCh0aGlzLl9vbkZvY3VzLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBvbktleWRvd24gPSBfLmJpbmQodGhpcy5fb25LZXlkb3duLCB0aGlzKTtcbiAgICAgICAgICAgICAgICBvbklucHV0ID0gXy5iaW5kKHRoaXMuX29uSW5wdXQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGlucHV0Lm9uKFwiYmx1ci50dFwiLCBvbkJsdXIpLm9uKFwiZm9jdXMudHRcIiwgb25Gb2N1cykub24oXCJrZXlkb3duLnR0XCIsIG9uS2V5ZG93bik7XG4gICAgICAgICAgICAgICAgaWYgKCFfLmlzTXNpZSgpIHx8IF8uaXNNc2llKCkgPiA5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJGlucHV0Lm9uKFwiaW5wdXQudHRcIiwgb25JbnB1dCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kaW5wdXQub24oXCJrZXlkb3duLnR0IGtleXByZXNzLnR0IGN1dC50dCBwYXN0ZS50dFwiLCBmdW5jdGlvbigkZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNwZWNpYWxLZXlDb2RlTWFwWyRlLndoaWNoIHx8ICRlLmtleUNvZGVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXy5kZWZlcihfLmJpbmQodGhhdC5fb25JbnB1dCwgdGhhdCwgJGUpKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZvY3VzOiBmdW5jdGlvbiBmb2N1cygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kaW5wdXQuYmx1cigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldExhbmdEaXI6IGZ1bmN0aW9uIGdldExhbmdEaXIoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFF1ZXJ5OiBmdW5jdGlvbiBnZXRRdWVyeSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVyeSB8fCBcIlwiO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldFF1ZXJ5OiBmdW5jdGlvbiBzZXRRdWVyeSh2YWwsIHNpbGVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSh2YWwpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3NldFF1ZXJ5KHZhbCwgc2lsZW50KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYXNRdWVyeUNoYW5nZWRTaW5jZUxhc3RGb2N1czogZnVuY3Rpb24gaGFzUXVlcnlDaGFuZ2VkU2luY2VMYXN0Rm9jdXMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVlcnkgIT09IHRoaXMucXVlcnlXaGVuRm9jdXNlZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRJbnB1dFZhbHVlOiBmdW5jdGlvbiBnZXRJbnB1dFZhbHVlKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRpbnB1dC52YWwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRJbnB1dFZhbHVlOiBmdW5jdGlvbiBzZXRJbnB1dFZhbHVlKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kaW5wdXQudmFsKHZhbHVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNsZWFySGludElmSW52YWxpZCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrTGFuZ3VhZ2VEaXJlY3Rpb24oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZXNldElucHV0VmFsdWU6IGZ1bmN0aW9uIHJlc2V0SW5wdXRWYWx1ZSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldElucHV0VmFsdWUodGhpcy5xdWVyeSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0SGludDogZnVuY3Rpb24gZ2V0SGludCgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kaGludC52YWwoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRIaW50OiBmdW5jdGlvbiBzZXRIaW50KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kaGludC52YWwodmFsdWUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsZWFySGludDogZnVuY3Rpb24gY2xlYXJIaW50KCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0SGludChcIlwiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbGVhckhpbnRJZkludmFsaWQ6IGZ1bmN0aW9uIGNsZWFySGludElmSW52YWxpZCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsLCBoaW50LCB2YWxJc1ByZWZpeE9mSGludCwgaXNWYWxpZDtcbiAgICAgICAgICAgICAgICB2YWwgPSB0aGlzLmdldElucHV0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICBoaW50ID0gdGhpcy5nZXRIaW50KCk7XG4gICAgICAgICAgICAgICAgdmFsSXNQcmVmaXhPZkhpbnQgPSB2YWwgIT09IGhpbnQgJiYgaGludC5pbmRleE9mKHZhbCkgPT09IDA7XG4gICAgICAgICAgICAgICAgaXNWYWxpZCA9IHZhbCAhPT0gXCJcIiAmJiB2YWxJc1ByZWZpeE9mSGludCAmJiAhdGhpcy5oYXNPdmVyZmxvdygpO1xuICAgICAgICAgICAgICAgICFpc1ZhbGlkICYmIHRoaXMuY2xlYXJIaW50KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaGFzRm9jdXM6IGZ1bmN0aW9uIGhhc0ZvY3VzKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRpbnB1dC5pcyhcIjpmb2N1c1wiKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBoYXNPdmVyZmxvdzogZnVuY3Rpb24gaGFzT3ZlcmZsb3coKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbnN0cmFpbnQgPSB0aGlzLiRpbnB1dC53aWR0aCgpIC0gMjtcbiAgICAgICAgICAgICAgICB0aGlzLiRvdmVyZmxvd0hlbHBlci50ZXh0KHRoaXMuZ2V0SW5wdXRWYWx1ZSgpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kb3ZlcmZsb3dIZWxwZXIud2lkdGgoKSA+PSBjb25zdHJhaW50O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzQ3Vyc29yQXRFbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWx1ZUxlbmd0aCwgc2VsZWN0aW9uU3RhcnQsIHJhbmdlO1xuICAgICAgICAgICAgICAgIHZhbHVlTGVuZ3RoID0gdGhpcy4kaW5wdXQudmFsKCkubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHNlbGVjdGlvblN0YXJ0ID0gdGhpcy4kaW5wdXRbMF0uc2VsZWN0aW9uU3RhcnQ7XG4gICAgICAgICAgICAgICAgaWYgKF8uaXNOdW1iZXIoc2VsZWN0aW9uU3RhcnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3Rpb25TdGFydCA9PT0gdmFsdWVMZW5ndGg7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkb2N1bWVudC5zZWxlY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UgPSBkb2N1bWVudC5zZWxlY3Rpb24uY3JlYXRlUmFuZ2UoKTtcbiAgICAgICAgICAgICAgICAgICAgcmFuZ2UubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsIC12YWx1ZUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZUxlbmd0aCA9PT0gcmFuZ2UudGV4dC5sZW5ndGg7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kaGludC5vZmYoXCIudHRcIik7XG4gICAgICAgICAgICAgICAgdGhpcy4kaW5wdXQub2ZmKFwiLnR0XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuJG92ZXJmbG93SGVscGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGhpbnQgPSB0aGlzLiRpbnB1dCA9IHRoaXMuJG92ZXJmbG93SGVscGVyID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBJbnB1dDtcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRPdmVyZmxvd0hlbHBlcigkaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiAkKCc8cHJlIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvcHJlPicpLmNzcyh7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwiYWJzb2x1dGVcIixcbiAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBcImhpZGRlblwiLFxuICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6IFwicHJlXCIsXG4gICAgICAgICAgICAgICAgZm9udEZhbWlseTogJGlucHV0LmNzcyhcImZvbnQtZmFtaWx5XCIpLFxuICAgICAgICAgICAgICAgIGZvbnRTaXplOiAkaW5wdXQuY3NzKFwiZm9udC1zaXplXCIpLFxuICAgICAgICAgICAgICAgIGZvbnRTdHlsZTogJGlucHV0LmNzcyhcImZvbnQtc3R5bGVcIiksXG4gICAgICAgICAgICAgICAgZm9udFZhcmlhbnQ6ICRpbnB1dC5jc3MoXCJmb250LXZhcmlhbnRcIiksXG4gICAgICAgICAgICAgICAgZm9udFdlaWdodDogJGlucHV0LmNzcyhcImZvbnQtd2VpZ2h0XCIpLFxuICAgICAgICAgICAgICAgIHdvcmRTcGFjaW5nOiAkaW5wdXQuY3NzKFwid29yZC1zcGFjaW5nXCIpLFxuICAgICAgICAgICAgICAgIGxldHRlclNwYWNpbmc6ICRpbnB1dC5jc3MoXCJsZXR0ZXItc3BhY2luZ1wiKSxcbiAgICAgICAgICAgICAgICB0ZXh0SW5kZW50OiAkaW5wdXQuY3NzKFwidGV4dC1pbmRlbnRcIiksXG4gICAgICAgICAgICAgICAgdGV4dFJlbmRlcmluZzogJGlucHV0LmNzcyhcInRleHQtcmVuZGVyaW5nXCIpLFxuICAgICAgICAgICAgICAgIHRleHRUcmFuc2Zvcm06ICRpbnB1dC5jc3MoXCJ0ZXh0LXRyYW5zZm9ybVwiKVxuICAgICAgICAgICAgfSkuaW5zZXJ0QWZ0ZXIoJGlucHV0KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBhcmVRdWVyaWVzRXF1aXZhbGVudChhLCBiKSB7XG4gICAgICAgICAgICByZXR1cm4gSW5wdXQubm9ybWFsaXplUXVlcnkoYSkgPT09IElucHV0Lm5vcm1hbGl6ZVF1ZXJ5KGIpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHdpdGhNb2RpZmllcigkZSkge1xuICAgICAgICAgICAgcmV0dXJuICRlLmFsdEtleSB8fCAkZS5jdHJsS2V5IHx8ICRlLm1ldGFLZXkgfHwgJGUuc2hpZnRLZXk7XG4gICAgICAgIH1cbiAgICB9KCk7XG4gICAgdmFyIERhdGFzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgICAgIHZhciBrZXlzLCBuYW1lR2VuZXJhdG9yO1xuICAgICAgICBrZXlzID0ge1xuICAgICAgICAgICAgdmFsOiBcInR0LXNlbGVjdGFibGUtZGlzcGxheVwiLFxuICAgICAgICAgICAgb2JqOiBcInR0LXNlbGVjdGFibGUtb2JqZWN0XCJcbiAgICAgICAgfTtcbiAgICAgICAgbmFtZUdlbmVyYXRvciA9IF8uZ2V0SWRHZW5lcmF0b3IoKTtcbiAgICAgICAgZnVuY3Rpb24gRGF0YXNldChvLCB3d3cpIHtcbiAgICAgICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICAgICAgby50ZW1wbGF0ZXMgPSBvLnRlbXBsYXRlcyB8fCB7fTtcbiAgICAgICAgICAgIG8udGVtcGxhdGVzLm5vdEZvdW5kID0gby50ZW1wbGF0ZXMubm90Rm91bmQgfHwgby50ZW1wbGF0ZXMuZW1wdHk7XG4gICAgICAgICAgICBpZiAoIW8uc291cmNlKSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcihcIm1pc3Npbmcgc291cmNlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFvLm5vZGUpIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKFwibWlzc2luZyBub2RlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG8ubmFtZSAmJiAhaXNWYWxpZE5hbWUoby5uYW1lKSkge1xuICAgICAgICAgICAgICAgICQuZXJyb3IoXCJpbnZhbGlkIGRhdGFzZXQgbmFtZTogXCIgKyBvLm5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd3d3Lm1peGluKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5oaWdobGlnaHQgPSAhIW8uaGlnaGxpZ2h0O1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gby5uYW1lIHx8IG5hbWVHZW5lcmF0b3IoKTtcbiAgICAgICAgICAgIHRoaXMubGltaXQgPSBvLmxpbWl0IHx8IDU7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlGbiA9IGdldERpc3BsYXlGbihvLmRpc3BsYXkgfHwgby5kaXNwbGF5S2V5KTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGVzID0gZ2V0VGVtcGxhdGVzKG8udGVtcGxhdGVzLCB0aGlzLmRpc3BsYXlGbik7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZSA9IG8uc291cmNlLl9fdHRBZGFwdGVyID8gby5zb3VyY2UuX190dEFkYXB0ZXIoKSA6IG8uc291cmNlO1xuICAgICAgICAgICAgdGhpcy5hc3luYyA9IF8uaXNVbmRlZmluZWQoby5hc3luYykgPyB0aGlzLnNvdXJjZS5sZW5ndGggPiAyIDogISFvLmFzeW5jO1xuICAgICAgICAgICAgdGhpcy5fcmVzZXRMYXN0U3VnZ2VzdGlvbigpO1xuICAgICAgICAgICAgdGhpcy4kZWwgPSAkKG8ubm9kZSkuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmRhdGFzZXQpLmFkZENsYXNzKHRoaXMuY2xhc3Nlcy5kYXRhc2V0ICsgXCItXCIgKyB0aGlzLm5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIERhdGFzZXQuZXh0cmFjdERhdGEgPSBmdW5jdGlvbiBleHRyYWN0RGF0YShlbCkge1xuICAgICAgICAgICAgdmFyICRlbCA9ICQoZWwpO1xuICAgICAgICAgICAgaWYgKCRlbC5kYXRhKGtleXMub2JqKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbDogJGVsLmRhdGEoa2V5cy52YWwpIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIG9iajogJGVsLmRhdGEoa2V5cy5vYmopIHx8IG51bGxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH07XG4gICAgICAgIF8ubWl4aW4oRGF0YXNldC5wcm90b3R5cGUsIEV2ZW50RW1pdHRlciwge1xuICAgICAgICAgICAgX292ZXJ3cml0ZTogZnVuY3Rpb24gb3ZlcndyaXRlKHF1ZXJ5LCBzdWdnZXN0aW9ucykge1xuICAgICAgICAgICAgICAgIHN1Z2dlc3Rpb25zID0gc3VnZ2VzdGlvbnMgfHwgW107XG4gICAgICAgICAgICAgICAgaWYgKHN1Z2dlc3Rpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXJTdWdnZXN0aW9ucyhxdWVyeSwgc3VnZ2VzdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5hc3luYyAmJiB0aGlzLnRlbXBsYXRlcy5wZW5kaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlclBlbmRpbmcocXVlcnkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuYXN5bmMgJiYgdGhpcy50ZW1wbGF0ZXMubm90Rm91bmQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyTm90Rm91bmQocXVlcnkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VtcHR5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcInJlbmRlcmVkXCIsIHRoaXMubmFtZSwgc3VnZ2VzdGlvbnMsIGZhbHNlKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYXBwZW5kOiBmdW5jdGlvbiBhcHBlbmQocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucyB8fCBbXTtcbiAgICAgICAgICAgICAgICBpZiAoc3VnZ2VzdGlvbnMubGVuZ3RoICYmIHRoaXMuJGxhc3RTdWdnZXN0aW9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hcHBlbmRTdWdnZXN0aW9ucyhxdWVyeSwgc3VnZ2VzdGlvbnMpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3VnZ2VzdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlclN1Z2dlc3Rpb25zKHF1ZXJ5LCBzdWdnZXN0aW9ucyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy4kbGFzdFN1Z2dlc3Rpb24ubGVuZ3RoICYmIHRoaXMudGVtcGxhdGVzLm5vdEZvdW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3JlbmRlck5vdEZvdW5kKHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwicmVuZGVyZWRcIiwgdGhpcy5uYW1lLCBzdWdnZXN0aW9ucywgdHJ1ZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlbmRlclN1Z2dlc3Rpb25zOiBmdW5jdGlvbiByZW5kZXJTdWdnZXN0aW9ucyhxdWVyeSwgc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgJGZyYWdtZW50O1xuICAgICAgICAgICAgICAgICRmcmFnbWVudCA9IHRoaXMuX2dldFN1Z2dlc3Rpb25zRnJhZ21lbnQocXVlcnksIHN1Z2dlc3Rpb25zKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRsYXN0U3VnZ2VzdGlvbiA9ICRmcmFnbWVudC5jaGlsZHJlbigpLmxhc3QoKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5odG1sKCRmcmFnbWVudCkucHJlcGVuZCh0aGlzLl9nZXRIZWFkZXIocXVlcnksIHN1Z2dlc3Rpb25zKSkuYXBwZW5kKHRoaXMuX2dldEZvb3RlcihxdWVyeSwgc3VnZ2VzdGlvbnMpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfYXBwZW5kU3VnZ2VzdGlvbnM6IGZ1bmN0aW9uIGFwcGVuZFN1Z2dlc3Rpb25zKHF1ZXJ5LCBzdWdnZXN0aW9ucykge1xuICAgICAgICAgICAgICAgIHZhciAkZnJhZ21lbnQsICRsYXN0U3VnZ2VzdGlvbjtcbiAgICAgICAgICAgICAgICAkZnJhZ21lbnQgPSB0aGlzLl9nZXRTdWdnZXN0aW9uc0ZyYWdtZW50KHF1ZXJ5LCBzdWdnZXN0aW9ucyk7XG4gICAgICAgICAgICAgICAgJGxhc3RTdWdnZXN0aW9uID0gJGZyYWdtZW50LmNoaWxkcmVuKCkubGFzdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGxhc3RTdWdnZXN0aW9uLmFmdGVyKCRmcmFnbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy4kbGFzdFN1Z2dlc3Rpb24gPSAkbGFzdFN1Z2dlc3Rpb247XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlbmRlclBlbmRpbmc6IGZ1bmN0aW9uIHJlbmRlclBlbmRpbmcocXVlcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlcy5wZW5kaW5nO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0TGFzdFN1Z2dlc3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSAmJiB0aGlzLiRlbC5odG1sKHRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0OiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3JlbmRlck5vdEZvdW5kOiBmdW5jdGlvbiByZW5kZXJOb3RGb3VuZChxdWVyeSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZW1wbGF0ZSA9IHRoaXMudGVtcGxhdGVzLm5vdEZvdW5kO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0TGFzdFN1Z2dlc3Rpb24oKTtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZSAmJiB0aGlzLiRlbC5odG1sKHRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0OiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2VtcHR5OiBmdW5jdGlvbiBlbXB0eSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbC5lbXB0eSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc2V0TGFzdFN1Z2dlc3Rpb24oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0U3VnZ2VzdGlvbnNGcmFnbWVudDogZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbnNGcmFnbWVudChxdWVyeSwgc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGhhdCA9IHRoaXMsIGZyYWdtZW50O1xuICAgICAgICAgICAgICAgIGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgICAgICAgICAgICAgIF8uZWFjaChzdWdnZXN0aW9ucywgZnVuY3Rpb24gZ2V0U3VnZ2VzdGlvbk5vZGUoc3VnZ2VzdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJGVsLCBjb250ZXh0O1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0gdGhhdC5faW5qZWN0UXVlcnkocXVlcnksIHN1Z2dlc3Rpb24pO1xuICAgICAgICAgICAgICAgICAgICAkZWwgPSAkKHRoYXQudGVtcGxhdGVzLnN1Z2dlc3Rpb24oY29udGV4dCkpLmRhdGEoa2V5cy5vYmosIHN1Z2dlc3Rpb24pLmRhdGEoa2V5cy52YWwsIHRoYXQuZGlzcGxheUZuKHN1Z2dlc3Rpb24pKS5hZGRDbGFzcyh0aGF0LmNsYXNzZXMuc3VnZ2VzdGlvbiArIFwiIFwiICsgdGhhdC5jbGFzc2VzLnNlbGVjdGFibGUpO1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCgkZWxbMF0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuaGlnaGxpZ2h0ICYmIGhpZ2hsaWdodCh7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogdGhpcy5jbGFzc2VzLmhpZ2hsaWdodCxcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogZnJhZ21lbnQsXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IHF1ZXJ5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICQoZnJhZ21lbnQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9nZXRGb290ZXI6IGZ1bmN0aW9uIGdldEZvb3RlcihxdWVyeSwgc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50ZW1wbGF0ZXMuZm9vdGVyID8gdGhpcy50ZW1wbGF0ZXMuZm9vdGVyKHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uczogc3VnZ2VzdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGRhdGFzZXQ6IHRoaXMubmFtZVxuICAgICAgICAgICAgICAgIH0pIDogbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfZ2V0SGVhZGVyOiBmdW5jdGlvbiBnZXRIZWFkZXIocXVlcnksIHN1Z2dlc3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudGVtcGxhdGVzLmhlYWRlciA/IHRoaXMudGVtcGxhdGVzLmhlYWRlcih7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSxcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnM6IHN1Z2dlc3Rpb25zLFxuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0OiB0aGlzLm5hbWVcbiAgICAgICAgICAgICAgICB9KSA6IG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Jlc2V0TGFzdFN1Z2dlc3Rpb246IGZ1bmN0aW9uIHJlc2V0TGFzdFN1Z2dlc3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbGFzdFN1Z2dlc3Rpb24gPSAkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2luamVjdFF1ZXJ5OiBmdW5jdGlvbiBpbmplY3RRdWVyeShxdWVyeSwgb2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF8uaXNPYmplY3Qob2JqKSA/IF8ubWl4aW4oe1xuICAgICAgICAgICAgICAgICAgICBfcXVlcnk6IHF1ZXJ5XG4gICAgICAgICAgICAgICAgfSwgb2JqKSA6IG9iajtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShxdWVyeSkge1xuICAgICAgICAgICAgICAgIHZhciB0aGF0ID0gdGhpcywgY2FuY2VsZWQgPSBmYWxzZSwgc3luY0NhbGxlZCA9IGZhbHNlLCByZW5kZXJlZCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbCA9IGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FuY2VsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGF0LmNhbmNlbCA9ICQubm9vcDtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5hc3luYyAmJiB0aGF0LnRyaWdnZXIoXCJhc3luY0NhbmNlbGVkXCIsIHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuc291cmNlKHF1ZXJ5LCBzeW5jLCBhc3luYyk7XG4gICAgICAgICAgICAgICAgIXN5bmNDYWxsZWQgJiYgc3luYyhbXSk7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gc3luYyhzdWdnZXN0aW9ucykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3luY0NhbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHN5bmNDYWxsZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9ucyA9IChzdWdnZXN0aW9ucyB8fCBbXSkuc2xpY2UoMCwgdGhhdC5saW1pdCk7XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVkID0gc3VnZ2VzdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB0aGF0Ll9vdmVyd3JpdGUocXVlcnksIHN1Z2dlc3Rpb25zKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlbmRlcmVkIDwgdGhhdC5saW1pdCAmJiB0aGF0LmFzeW5jKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGF0LnRyaWdnZXIoXCJhc3luY1JlcXVlc3RlZFwiLCBxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gYXN5bmMoc3VnZ2VzdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucyB8fCBbXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjYW5jZWxlZCAmJiByZW5kZXJlZCA8IHRoYXQubGltaXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuY2FuY2VsID0gJC5ub29wO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZWQgKz0gc3VnZ2VzdGlvbnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhhdC5fYXBwZW5kKHF1ZXJ5LCBzdWdnZXN0aW9ucy5zbGljZSgwLCB0aGF0LmxpbWl0IC0gcmVuZGVyZWQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuYXN5bmMgJiYgdGhhdC50cmlnZ2VyKFwiYXN5bmNSZWNlaXZlZFwiLCBxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2FuY2VsOiAkLm5vb3AsXG4gICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1wdHkoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcImNsZWFyZWRcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNFbXB0eTogZnVuY3Rpb24gaXNFbXB0eSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kZWwuaXMoXCI6ZW1wdHlcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRlbCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gRGF0YXNldDtcbiAgICAgICAgZnVuY3Rpb24gZ2V0RGlzcGxheUZuKGRpc3BsYXkpIHtcbiAgICAgICAgICAgIGRpc3BsYXkgPSBkaXNwbGF5IHx8IF8uc3RyaW5naWZ5O1xuICAgICAgICAgICAgcmV0dXJuIF8uaXNGdW5jdGlvbihkaXNwbGF5KSA/IGRpc3BsYXkgOiBkaXNwbGF5Rm47XG4gICAgICAgICAgICBmdW5jdGlvbiBkaXNwbGF5Rm4ob2JqKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ialtkaXNwbGF5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBnZXRUZW1wbGF0ZXModGVtcGxhdGVzLCBkaXNwbGF5Rm4pIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbm90Rm91bmQ6IHRlbXBsYXRlcy5ub3RGb3VuZCAmJiBfLnRlbXBsYXRpZnkodGVtcGxhdGVzLm5vdEZvdW5kKSxcbiAgICAgICAgICAgICAgICBwZW5kaW5nOiB0ZW1wbGF0ZXMucGVuZGluZyAmJiBfLnRlbXBsYXRpZnkodGVtcGxhdGVzLnBlbmRpbmcpLFxuICAgICAgICAgICAgICAgIGhlYWRlcjogdGVtcGxhdGVzLmhlYWRlciAmJiBfLnRlbXBsYXRpZnkodGVtcGxhdGVzLmhlYWRlciksXG4gICAgICAgICAgICAgICAgZm9vdGVyOiB0ZW1wbGF0ZXMuZm9vdGVyICYmIF8udGVtcGxhdGlmeSh0ZW1wbGF0ZXMuZm9vdGVyKSxcbiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uOiB0ZW1wbGF0ZXMuc3VnZ2VzdGlvbiB8fCBzdWdnZXN0aW9uVGVtcGxhdGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmdW5jdGlvbiBzdWdnZXN0aW9uVGVtcGxhdGUoY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcIjxkaXY+PHA+XCIgKyBkaXNwbGF5Rm4oY29udGV4dCkgKyBcIjwvcD48L2Rpdj5cIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBpc1ZhbGlkTmFtZShzdHIpIHtcbiAgICAgICAgICAgIHJldHVybiAvXltfYS16QS1aMC05LV0rJC8udGVzdChzdHIpO1xuICAgICAgICB9XG4gICAgfSgpO1xuICAgIHZhciBNZW51ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICBmdW5jdGlvbiBNZW51KG8sIHd3dykge1xuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgICAgICAgbyA9IG8gfHwge307XG4gICAgICAgICAgICBpZiAoIW8ubm9kZSkge1xuICAgICAgICAgICAgICAgICQuZXJyb3IoXCJub2RlIGlzIHJlcXVpcmVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd3d3Lm1peGluKHRoaXMpO1xuICAgICAgICAgICAgdGhpcy4kbm9kZSA9ICQoby5ub2RlKTtcbiAgICAgICAgICAgIHRoaXMucXVlcnkgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5kYXRhc2V0cyA9IF8ubWFwKG8uZGF0YXNldHMsIGluaXRpYWxpemVEYXRhc2V0KTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGluaXRpYWxpemVEYXRhc2V0KG9EYXRhc2V0KSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGUgPSB0aGF0LiRub2RlLmZpbmQob0RhdGFzZXQubm9kZSkuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICBvRGF0YXNldC5ub2RlID0gbm9kZS5sZW5ndGggPyBub2RlIDogJChcIjxkaXY+XCIpLmFwcGVuZFRvKHRoYXQuJG5vZGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRGF0YXNldChvRGF0YXNldCwgd3d3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKE1lbnUucHJvdG90eXBlLCBFdmVudEVtaXR0ZXIsIHtcbiAgICAgICAgICAgIF9vblNlbGVjdGFibGVDbGljazogZnVuY3Rpb24gb25TZWxlY3RhYmxlQ2xpY2soJGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJzZWxlY3RhYmxlQ2xpY2tlZFwiLCAkKCRlLmN1cnJlbnRUYXJnZXQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25SZW5kZXJlZDogZnVuY3Rpb24gb25SZW5kZXJlZCh0eXBlLCBkYXRhc2V0LCBzdWdnZXN0aW9ucywgYXN5bmMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRub2RlLnRvZ2dsZUNsYXNzKHRoaXMuY2xhc3Nlcy5lbXB0eSwgdGhpcy5fYWxsRGF0YXNldHNFbXB0eSgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJkYXRhc2V0UmVuZGVyZWRcIiwgZGF0YXNldCwgc3VnZ2VzdGlvbnMsIGFzeW5jKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25DbGVhcmVkOiBmdW5jdGlvbiBvbkNsZWFyZWQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbm9kZS50b2dnbGVDbGFzcyh0aGlzLmNsYXNzZXMuZW1wdHksIHRoaXMuX2FsbERhdGFzZXRzRW1wdHkoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwiZGF0YXNldENsZWFyZWRcIik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX3Byb3BhZ2F0ZTogZnVuY3Rpb24gcHJvcGFnYXRlKCkge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9hbGxEYXRhc2V0c0VtcHR5OiBmdW5jdGlvbiBhbGxEYXRhc2V0c0VtcHR5KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBfLmV2ZXJ5KHRoaXMuZGF0YXNldHMsIGlzRGF0YXNldEVtcHR5KTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBpc0RhdGFzZXRFbXB0eShkYXRhc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhc2V0LmlzRW1wdHkoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2dldFNlbGVjdGFibGVzOiBmdW5jdGlvbiBnZXRTZWxlY3RhYmxlcygpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy4kbm9kZS5maW5kKHRoaXMuc2VsZWN0b3JzLnNlbGVjdGFibGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9yZW1vdmVDdXJzb3I6IGZ1bmN0aW9uIF9yZW1vdmVDdXJzb3IoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzZWxlY3RhYmxlID0gdGhpcy5nZXRBY3RpdmVTZWxlY3RhYmxlKCk7XG4gICAgICAgICAgICAgICAgJHNlbGVjdGFibGUgJiYgJHNlbGVjdGFibGUucmVtb3ZlQ2xhc3ModGhpcy5jbGFzc2VzLmN1cnNvcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX2Vuc3VyZVZpc2libGU6IGZ1bmN0aW9uIGVuc3VyZVZpc2libGUoJGVsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsVG9wLCBlbEJvdHRvbSwgbm9kZVNjcm9sbFRvcCwgbm9kZUhlaWdodDtcbiAgICAgICAgICAgICAgICBlbFRvcCA9ICRlbC5wb3NpdGlvbigpLnRvcDtcbiAgICAgICAgICAgICAgICBlbEJvdHRvbSA9IGVsVG9wICsgJGVsLm91dGVySGVpZ2h0KHRydWUpO1xuICAgICAgICAgICAgICAgIG5vZGVTY3JvbGxUb3AgPSB0aGlzLiRub2RlLnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgICAgIG5vZGVIZWlnaHQgPSB0aGlzLiRub2RlLmhlaWdodCgpICsgcGFyc2VJbnQodGhpcy4kbm9kZS5jc3MoXCJwYWRkaW5nVG9wXCIpLCAxMCkgKyBwYXJzZUludCh0aGlzLiRub2RlLmNzcyhcInBhZGRpbmdCb3R0b21cIiksIDEwKTtcbiAgICAgICAgICAgICAgICBpZiAoZWxUb3AgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUuc2Nyb2xsVG9wKG5vZGVTY3JvbGxUb3AgKyBlbFRvcCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChub2RlSGVpZ2h0IDwgZWxCb3R0b20pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbm9kZS5zY3JvbGxUb3Aobm9kZVNjcm9sbFRvcCArIChlbEJvdHRvbSAtIG5vZGVIZWlnaHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYmluZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLCBvblNlbGVjdGFibGVDbGljaztcbiAgICAgICAgICAgICAgICBvblNlbGVjdGFibGVDbGljayA9IF8uYmluZCh0aGlzLl9vblNlbGVjdGFibGVDbGljaywgdGhpcyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kbm9kZS5vbihcImNsaWNrLnR0XCIsIHRoaXMuc2VsZWN0b3JzLnNlbGVjdGFibGUsIG9uU2VsZWN0YWJsZUNsaWNrKTtcbiAgICAgICAgICAgICAgICBfLmVhY2godGhpcy5kYXRhc2V0cywgZnVuY3Rpb24oZGF0YXNldCkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhc2V0Lm9uU3luYyhcImFzeW5jUmVxdWVzdGVkXCIsIHRoYXQuX3Byb3BhZ2F0ZSwgdGhhdCkub25TeW5jKFwiYXN5bmNDYW5jZWxlZFwiLCB0aGF0Ll9wcm9wYWdhdGUsIHRoYXQpLm9uU3luYyhcImFzeW5jUmVjZWl2ZWRcIiwgdGhhdC5fcHJvcGFnYXRlLCB0aGF0KS5vblN5bmMoXCJyZW5kZXJlZFwiLCB0aGF0Ll9vblJlbmRlcmVkLCB0aGF0KS5vblN5bmMoXCJjbGVhcmVkXCIsIHRoYXQuX29uQ2xlYXJlZCwgdGhhdCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaXNPcGVuOiBmdW5jdGlvbiBpc09wZW4oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJG5vZGUuaGFzQ2xhc3ModGhpcy5jbGFzc2VzLm9wZW4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kbm9kZS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMub3Blbik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUucmVtb3ZlQ2xhc3ModGhpcy5jbGFzc2VzLm9wZW4pO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUN1cnNvcigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldExhbmd1YWdlRGlyZWN0aW9uOiBmdW5jdGlvbiBzZXRMYW5ndWFnZURpcmVjdGlvbihkaXIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRub2RlLmF0dHIoXCJkaXJcIiwgZGlyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWxlY3RhYmxlUmVsYXRpdmVUb0N1cnNvcjogZnVuY3Rpb24gc2VsZWN0YWJsZVJlbGF0aXZlVG9DdXJzb3IoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHNlbGVjdGFibGVzLCAkb2xkQ3Vyc29yLCBvbGRJbmRleCwgbmV3SW5kZXg7XG4gICAgICAgICAgICAgICAgJG9sZEN1cnNvciA9IHRoaXMuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpO1xuICAgICAgICAgICAgICAgICRzZWxlY3RhYmxlcyA9IHRoaXMuX2dldFNlbGVjdGFibGVzKCk7XG4gICAgICAgICAgICAgICAgb2xkSW5kZXggPSAkb2xkQ3Vyc29yID8gJHNlbGVjdGFibGVzLmluZGV4KCRvbGRDdXJzb3IpIDogLTE7XG4gICAgICAgICAgICAgICAgbmV3SW5kZXggPSBvbGRJbmRleCArIGRlbHRhO1xuICAgICAgICAgICAgICAgIG5ld0luZGV4ID0gKG5ld0luZGV4ICsgMSkgJSAoJHNlbGVjdGFibGVzLmxlbmd0aCArIDEpIC0gMTtcbiAgICAgICAgICAgICAgICBuZXdJbmRleCA9IG5ld0luZGV4IDwgLTEgPyAkc2VsZWN0YWJsZXMubGVuZ3RoIC0gMSA6IG5ld0luZGV4O1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXdJbmRleCA9PT0gLTEgPyBudWxsIDogJHNlbGVjdGFibGVzLmVxKG5ld0luZGV4KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXRDdXJzb3I6IGZ1bmN0aW9uIHNldEN1cnNvcigkc2VsZWN0YWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbW92ZUN1cnNvcigpO1xuICAgICAgICAgICAgICAgIGlmICgkc2VsZWN0YWJsZSA9ICRzZWxlY3RhYmxlICYmICRzZWxlY3RhYmxlLmZpcnN0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNlbGVjdGFibGUuYWRkQ2xhc3ModGhpcy5jbGFzc2VzLmN1cnNvcik7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2Vuc3VyZVZpc2libGUoJHNlbGVjdGFibGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRTZWxlY3RhYmxlRGF0YTogZnVuY3Rpb24gZ2V0U2VsZWN0YWJsZURhdGEoJGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRlbCAmJiAkZWwubGVuZ3RoID8gRGF0YXNldC5leHRyYWN0RGF0YSgkZWwpIDogbnVsbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBnZXRBY3RpdmVTZWxlY3RhYmxlOiBmdW5jdGlvbiBnZXRBY3RpdmVTZWxlY3RhYmxlKCkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0YWJsZSA9IHRoaXMuX2dldFNlbGVjdGFibGVzKCkuZmlsdGVyKHRoaXMuc2VsZWN0b3JzLmN1cnNvcikuZmlyc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNlbGVjdGFibGUubGVuZ3RoID8gJHNlbGVjdGFibGUgOiBudWxsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFRvcFNlbGVjdGFibGU6IGZ1bmN0aW9uIGdldFRvcFNlbGVjdGFibGUoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRzZWxlY3RhYmxlID0gdGhpcy5fZ2V0U2VsZWN0YWJsZXMoKS5maXJzdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiAkc2VsZWN0YWJsZS5sZW5ndGggPyAkc2VsZWN0YWJsZSA6IG51bGw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUocXVlcnkpIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNWYWxpZFVwZGF0ZSA9IHF1ZXJ5ICE9PSB0aGlzLnF1ZXJ5O1xuICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKHRoaXMuZGF0YXNldHMsIHVwZGF0ZURhdGFzZXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gaXNWYWxpZFVwZGF0ZTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVEYXRhc2V0KGRhdGFzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldC51cGRhdGUocXVlcnkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlbXB0eTogZnVuY3Rpb24gZW1wdHkoKSB7XG4gICAgICAgICAgICAgICAgXy5lYWNoKHRoaXMuZGF0YXNldHMsIGNsZWFyRGF0YXNldCk7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWVyeSA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy4kbm9kZS5hZGRDbGFzcyh0aGlzLmNsYXNzZXMuZW1wdHkpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNsZWFyRGF0YXNldChkYXRhc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFzZXQuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRub2RlLm9mZihcIi50dFwiKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRub2RlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBfLmVhY2godGhpcy5kYXRhc2V0cywgZGVzdHJveURhdGFzZXQpO1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRlc3Ryb3lEYXRhc2V0KGRhdGFzZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNldC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIE1lbnU7XG4gICAgfSgpO1xuICAgIHZhciBEZWZhdWx0TWVudSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgdmFyIHMgPSBNZW51LnByb3RvdHlwZTtcbiAgICAgICAgZnVuY3Rpb24gRGVmYXVsdE1lbnUoKSB7XG4gICAgICAgICAgICBNZW51LmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICAgIH1cbiAgICAgICAgXy5taXhpbihEZWZhdWx0TWVudS5wcm90b3R5cGUsIE1lbnUucHJvdG90eXBlLCB7XG4gICAgICAgICAgICBvcGVuOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICAgICAgICAgICF0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkgJiYgdGhpcy5fc2hvdygpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzLm9wZW4uYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGlkZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBzLmNsb3NlLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uUmVuZGVyZWQ6IGZ1bmN0aW9uIG9uUmVuZGVyZWQoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2FsbERhdGFzZXRzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc09wZW4oKSAmJiB0aGlzLl9zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBzLl9vblJlbmRlcmVkLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uQ2xlYXJlZDogZnVuY3Rpb24gb25DbGVhcmVkKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9hbGxEYXRhc2V0c0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGlkZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNPcGVuKCkgJiYgdGhpcy5fc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcy5fb25DbGVhcmVkLmFwcGx5KHRoaXMsIFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0TGFuZ3VhZ2VEaXJlY3Rpb246IGZ1bmN0aW9uIHNldExhbmd1YWdlRGlyZWN0aW9uKGRpcikge1xuICAgICAgICAgICAgICAgIHRoaXMuJG5vZGUuY3NzKGRpciA9PT0gXCJsdHJcIiA/IHRoaXMuY3NzLmx0ciA6IHRoaXMuY3NzLnJ0bCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHMuc2V0TGFuZ3VhZ2VEaXJlY3Rpb24uYXBwbHkodGhpcywgW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDApKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfaGlkZTogZnVuY3Rpb24gaGlkZSgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRub2RlLmhpZGUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfc2hvdzogZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLiRub2RlLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBEZWZhdWx0TWVudTtcbiAgICB9KCk7XG4gICAgdmFyIFR5cGVhaGVhZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgZnVuY3Rpb24gVHlwZWFoZWFkKG8sIHd3dykge1xuICAgICAgICAgICAgdmFyIG9uRm9jdXNlZCwgb25CbHVycmVkLCBvbkVudGVyS2V5ZWQsIG9uVGFiS2V5ZWQsIG9uRXNjS2V5ZWQsIG9uVXBLZXllZCwgb25Eb3duS2V5ZWQsIG9uTGVmdEtleWVkLCBvblJpZ2h0S2V5ZWQsIG9uUXVlcnlDaGFuZ2VkLCBvbldoaXRlc3BhY2VDaGFuZ2VkO1xuICAgICAgICAgICAgbyA9IG8gfHwge307XG4gICAgICAgICAgICBpZiAoIW8uaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAkLmVycm9yKFwibWlzc2luZyBpbnB1dFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghby5tZW51KSB7XG4gICAgICAgICAgICAgICAgJC5lcnJvcihcIm1pc3NpbmcgbWVudVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghby5ldmVudEJ1cykge1xuICAgICAgICAgICAgICAgICQuZXJyb3IoXCJtaXNzaW5nIGV2ZW50IGJ1c1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHd3dy5taXhpbih0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMgPSBvLmV2ZW50QnVzO1xuICAgICAgICAgICAgdGhpcy5taW5MZW5ndGggPSBfLmlzTnVtYmVyKG8ubWluTGVuZ3RoKSA/IG8ubWluTGVuZ3RoIDogMTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXQgPSBvLmlucHV0O1xuICAgICAgICAgICAgdGhpcy5tZW51ID0gby5tZW51O1xuICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmlucHV0Lmhhc0ZvY3VzKCkgJiYgdGhpcy5hY3RpdmF0ZSgpO1xuICAgICAgICAgICAgdGhpcy5kaXIgPSB0aGlzLmlucHV0LmdldExhbmdEaXIoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhY2tzKCk7XG4gICAgICAgICAgICB0aGlzLm1lbnUuYmluZCgpLm9uU3luYyhcInNlbGVjdGFibGVDbGlja2VkXCIsIHRoaXMuX29uU2VsZWN0YWJsZUNsaWNrZWQsIHRoaXMpLm9uU3luYyhcImFzeW5jUmVxdWVzdGVkXCIsIHRoaXMuX29uQXN5bmNSZXF1ZXN0ZWQsIHRoaXMpLm9uU3luYyhcImFzeW5jQ2FuY2VsZWRcIiwgdGhpcy5fb25Bc3luY0NhbmNlbGVkLCB0aGlzKS5vblN5bmMoXCJhc3luY1JlY2VpdmVkXCIsIHRoaXMuX29uQXN5bmNSZWNlaXZlZCwgdGhpcykub25TeW5jKFwiZGF0YXNldFJlbmRlcmVkXCIsIHRoaXMuX29uRGF0YXNldFJlbmRlcmVkLCB0aGlzKS5vblN5bmMoXCJkYXRhc2V0Q2xlYXJlZFwiLCB0aGlzLl9vbkRhdGFzZXRDbGVhcmVkLCB0aGlzKTtcbiAgICAgICAgICAgIG9uRm9jdXNlZCA9IGModGhpcywgXCJhY3RpdmF0ZVwiLCBcIm9wZW5cIiwgXCJfb25Gb2N1c2VkXCIpO1xuICAgICAgICAgICAgb25CbHVycmVkID0gYyh0aGlzLCBcImRlYWN0aXZhdGVcIiwgXCJfb25CbHVycmVkXCIpO1xuICAgICAgICAgICAgb25FbnRlcktleWVkID0gYyh0aGlzLCBcImlzQWN0aXZlXCIsIFwiaXNPcGVuXCIsIFwiX29uRW50ZXJLZXllZFwiKTtcbiAgICAgICAgICAgIG9uVGFiS2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJpc09wZW5cIiwgXCJfb25UYWJLZXllZFwiKTtcbiAgICAgICAgICAgIG9uRXNjS2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJfb25Fc2NLZXllZFwiKTtcbiAgICAgICAgICAgIG9uVXBLZXllZCA9IGModGhpcywgXCJpc0FjdGl2ZVwiLCBcIm9wZW5cIiwgXCJfb25VcEtleWVkXCIpO1xuICAgICAgICAgICAgb25Eb3duS2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJvcGVuXCIsIFwiX29uRG93bktleWVkXCIpO1xuICAgICAgICAgICAgb25MZWZ0S2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJpc09wZW5cIiwgXCJfb25MZWZ0S2V5ZWRcIik7XG4gICAgICAgICAgICBvblJpZ2h0S2V5ZWQgPSBjKHRoaXMsIFwiaXNBY3RpdmVcIiwgXCJpc09wZW5cIiwgXCJfb25SaWdodEtleWVkXCIpO1xuICAgICAgICAgICAgb25RdWVyeUNoYW5nZWQgPSBjKHRoaXMsIFwiX29wZW5JZkFjdGl2ZVwiLCBcIl9vblF1ZXJ5Q2hhbmdlZFwiKTtcbiAgICAgICAgICAgIG9uV2hpdGVzcGFjZUNoYW5nZWQgPSBjKHRoaXMsIFwiX29wZW5JZkFjdGl2ZVwiLCBcIl9vbldoaXRlc3BhY2VDaGFuZ2VkXCIpO1xuICAgICAgICAgICAgdGhpcy5pbnB1dC5iaW5kKCkub25TeW5jKFwiZm9jdXNlZFwiLCBvbkZvY3VzZWQsIHRoaXMpLm9uU3luYyhcImJsdXJyZWRcIiwgb25CbHVycmVkLCB0aGlzKS5vblN5bmMoXCJlbnRlcktleWVkXCIsIG9uRW50ZXJLZXllZCwgdGhpcykub25TeW5jKFwidGFiS2V5ZWRcIiwgb25UYWJLZXllZCwgdGhpcykub25TeW5jKFwiZXNjS2V5ZWRcIiwgb25Fc2NLZXllZCwgdGhpcykub25TeW5jKFwidXBLZXllZFwiLCBvblVwS2V5ZWQsIHRoaXMpLm9uU3luYyhcImRvd25LZXllZFwiLCBvbkRvd25LZXllZCwgdGhpcykub25TeW5jKFwibGVmdEtleWVkXCIsIG9uTGVmdEtleWVkLCB0aGlzKS5vblN5bmMoXCJyaWdodEtleWVkXCIsIG9uUmlnaHRLZXllZCwgdGhpcykub25TeW5jKFwicXVlcnlDaGFuZ2VkXCIsIG9uUXVlcnlDaGFuZ2VkLCB0aGlzKS5vblN5bmMoXCJ3aGl0ZXNwYWNlQ2hhbmdlZFwiLCBvbldoaXRlc3BhY2VDaGFuZ2VkLCB0aGlzKS5vblN5bmMoXCJsYW5nRGlyQ2hhbmdlZFwiLCB0aGlzLl9vbkxhbmdEaXJDaGFuZ2VkLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBfLm1peGluKFR5cGVhaGVhZC5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIF9oYWNrczogZnVuY3Rpb24gaGFja3MoKSB7XG4gICAgICAgICAgICAgICAgdmFyICRpbnB1dCwgJG1lbnU7XG4gICAgICAgICAgICAgICAgJGlucHV0ID0gdGhpcy5pbnB1dC4kaW5wdXQgfHwgJChcIjxkaXY+XCIpO1xuICAgICAgICAgICAgICAgICRtZW51ID0gdGhpcy5tZW51LiRub2RlIHx8ICQoXCI8ZGl2PlwiKTtcbiAgICAgICAgICAgICAgICAkaW5wdXQub24oXCJibHVyLnR0XCIsIGZ1bmN0aW9uKCRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhY3RpdmUsIGlzQWN0aXZlLCBoYXNBY3RpdmU7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlzQWN0aXZlID0gJG1lbnUuaXMoYWN0aXZlKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzQWN0aXZlID0gJG1lbnUuaGFzKGFjdGl2ZSkubGVuZ3RoID4gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNNc2llKCkgJiYgKGlzQWN0aXZlIHx8IGhhc0FjdGl2ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlucHV0LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICRtZW51Lm9uKFwibW91c2Vkb3duLnR0XCIsIGZ1bmN0aW9uKCRlKSB7XG4gICAgICAgICAgICAgICAgICAgICRlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uU2VsZWN0YWJsZUNsaWNrZWQ6IGZ1bmN0aW9uIG9uU2VsZWN0YWJsZUNsaWNrZWQodHlwZSwgJGVsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3QoJGVsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25EYXRhc2V0Q2xlYXJlZDogZnVuY3Rpb24gb25EYXRhc2V0Q2xlYXJlZCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVIaW50KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRGF0YXNldFJlbmRlcmVkOiBmdW5jdGlvbiBvbkRhdGFzZXRSZW5kZXJlZCh0eXBlLCBkYXRhc2V0LCBzdWdnZXN0aW9ucywgYXN5bmMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVIaW50KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwicmVuZGVyXCIsIHN1Z2dlc3Rpb25zLCBhc3luYywgZGF0YXNldCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uQXN5bmNSZXF1ZXN0ZWQ6IGZ1bmN0aW9uIG9uQXN5bmNSZXF1ZXN0ZWQodHlwZSwgZGF0YXNldCwgcXVlcnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJhc3luY3JlcXVlc3RcIiwgcXVlcnksIGRhdGFzZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkFzeW5jQ2FuY2VsZWQ6IGZ1bmN0aW9uIG9uQXN5bmNDYW5jZWxlZCh0eXBlLCBkYXRhc2V0LCBxdWVyeSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcImFzeW5jY2FuY2VsXCIsIHF1ZXJ5LCBkYXRhc2V0KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25Bc3luY1JlY2VpdmVkOiBmdW5jdGlvbiBvbkFzeW5jUmVjZWl2ZWQodHlwZSwgZGF0YXNldCwgcXVlcnkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJhc3luY3JlY2VpdmVcIiwgcXVlcnksIGRhdGFzZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkZvY3VzZWQ6IGZ1bmN0aW9uIG9uRm9jdXNlZCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9taW5MZW5ndGhNZXQoKSAmJiB0aGlzLm1lbnUudXBkYXRlKHRoaXMuaW5wdXQuZ2V0UXVlcnkoKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uQmx1cnJlZDogZnVuY3Rpb24gb25CbHVycmVkKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlucHV0Lmhhc1F1ZXJ5Q2hhbmdlZFNpbmNlTGFzdEZvY3VzKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiY2hhbmdlXCIsIHRoaXMuaW5wdXQuZ2V0UXVlcnkoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkVudGVyS2V5ZWQ6IGZ1bmN0aW9uIG9uRW50ZXJLZXllZCh0eXBlLCAkZSkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0YWJsZTtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGVjdGFibGUgPSB0aGlzLm1lbnUuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KCRzZWxlY3RhYmxlKSAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25UYWJLZXllZDogZnVuY3Rpb24gb25UYWJLZXllZCh0eXBlLCAkZSkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0YWJsZTtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGVjdGFibGUgPSB0aGlzLm1lbnUuZ2V0QWN0aXZlU2VsZWN0YWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0KCRzZWxlY3RhYmxlKSAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoJHNlbGVjdGFibGUgPSB0aGlzLm1lbnUuZ2V0VG9wU2VsZWN0YWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlKCRzZWxlY3RhYmxlKSAmJiAkZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25Fc2NLZXllZDogZnVuY3Rpb24gb25Fc2NLZXllZCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uVXBLZXllZDogZnVuY3Rpb24gb25VcEtleWVkKCkge1xuICAgICAgICAgICAgICAgIHRoaXMubW92ZUN1cnNvcigtMSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uRG93bktleWVkOiBmdW5jdGlvbiBvbkRvd25LZXllZCgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3IoKzEpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkxlZnRLZXllZDogZnVuY3Rpb24gb25MZWZ0S2V5ZWQoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlyID09PSBcInJ0bFwiICYmIHRoaXMuaW5wdXQuaXNDdXJzb3JBdEVuZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlKHRoaXMubWVudS5nZXRUb3BTZWxlY3RhYmxlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25SaWdodEtleWVkOiBmdW5jdGlvbiBvblJpZ2h0S2V5ZWQoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGlyID09PSBcImx0clwiICYmIHRoaXMuaW5wdXQuaXNDdXJzb3JBdEVuZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlKHRoaXMubWVudS5nZXRUb3BTZWxlY3RhYmxlKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfb25RdWVyeUNoYW5nZWQ6IGZ1bmN0aW9uIG9uUXVlcnlDaGFuZ2VkKGUsIHF1ZXJ5KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fbWluTGVuZ3RoTWV0KHF1ZXJ5KSA/IHRoaXMubWVudS51cGRhdGUocXVlcnkpIDogdGhpcy5tZW51LmVtcHR5KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29uV2hpdGVzcGFjZUNoYW5nZWQ6IGZ1bmN0aW9uIG9uV2hpdGVzcGFjZUNoYW5nZWQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlSGludCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9vbkxhbmdEaXJDaGFuZ2VkOiBmdW5jdGlvbiBvbkxhbmdEaXJDaGFuZ2VkKGUsIGRpcikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpciAhPT0gZGlyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlyID0gZGlyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbnUuc2V0TGFuZ3VhZ2VEaXJlY3Rpb24oZGlyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX29wZW5JZkFjdGl2ZTogZnVuY3Rpb24gb3BlbklmQWN0aXZlKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNBY3RpdmUoKSAmJiB0aGlzLm9wZW4oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBfbWluTGVuZ3RoTWV0OiBmdW5jdGlvbiBtaW5MZW5ndGhNZXQocXVlcnkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IF8uaXNTdHJpbmcocXVlcnkpID8gcXVlcnkgOiB0aGlzLmlucHV0LmdldFF1ZXJ5KCkgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnkubGVuZ3RoID49IHRoaXMubWluTGVuZ3RoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF91cGRhdGVIaW50OiBmdW5jdGlvbiB1cGRhdGVIaW50KCkge1xuICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0YWJsZSwgZGF0YSwgdmFsLCBxdWVyeSwgZXNjYXBlZFF1ZXJ5LCBmcm9udE1hdGNoUmVnRXgsIG1hdGNoO1xuICAgICAgICAgICAgICAgICRzZWxlY3RhYmxlID0gdGhpcy5tZW51LmdldFRvcFNlbGVjdGFibGUoKTtcbiAgICAgICAgICAgICAgICBkYXRhID0gdGhpcy5tZW51LmdldFNlbGVjdGFibGVEYXRhKCRzZWxlY3RhYmxlKTtcbiAgICAgICAgICAgICAgICB2YWwgPSB0aGlzLmlucHV0LmdldElucHV0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YSAmJiAhXy5pc0JsYW5rU3RyaW5nKHZhbCkgJiYgIXRoaXMuaW5wdXQuaGFzT3ZlcmZsb3coKSkge1xuICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IElucHV0Lm5vcm1hbGl6ZVF1ZXJ5KHZhbCk7XG4gICAgICAgICAgICAgICAgICAgIGVzY2FwZWRRdWVyeSA9IF8uZXNjYXBlUmVnRXhDaGFycyhxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgIGZyb250TWF0Y2hSZWdFeCA9IG5ldyBSZWdFeHAoXCJeKD86XCIgKyBlc2NhcGVkUXVlcnkgKyBcIikoLiskKVwiLCBcImlcIik7XG4gICAgICAgICAgICAgICAgICAgIG1hdGNoID0gZnJvbnRNYXRjaFJlZ0V4LmV4ZWMoZGF0YS52YWwpO1xuICAgICAgICAgICAgICAgICAgICBtYXRjaCAmJiB0aGlzLmlucHV0LnNldEhpbnQodmFsICsgbWF0Y2hbMV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQuY2xlYXJIaW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzRW5hYmxlZDogZnVuY3Rpb24gaXNFbmFibGVkKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVuYWJsZWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZW5hYmxlOiBmdW5jdGlvbiBlbmFibGUoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbiBkaXNhYmxlKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzQWN0aXZlOiBmdW5jdGlvbiBpc0FjdGl2ZSgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYWN0aXZhdGU6IGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5pc0VuYWJsZWQoKSB8fCB0aGlzLmV2ZW50QnVzLmJlZm9yZShcImFjdGl2ZVwiKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJhY3RpdmVcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWFjdGl2YXRlOiBmdW5jdGlvbiBkZWFjdGl2YXRlKCkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5pc0FjdGl2ZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5ldmVudEJ1cy5iZWZvcmUoXCJpZGxlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcImlkbGVcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc09wZW46IGZ1bmN0aW9uIGlzT3BlbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tZW51LmlzT3BlbigpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzT3BlbigpICYmICF0aGlzLmV2ZW50QnVzLmJlZm9yZShcIm9wZW5cIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW51Lm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlSGludCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJvcGVuXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc09wZW4oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjbG9zZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNPcGVuKCkgJiYgIXRoaXMuZXZlbnRCdXMuYmVmb3JlKFwiY2xvc2VcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZW51LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQuY2xlYXJIaW50KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQucmVzZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRCdXMudHJpZ2dlcihcImNsb3NlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gIXRoaXMuaXNPcGVuKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0VmFsOiBmdW5jdGlvbiBzZXRWYWwodmFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5zZXRRdWVyeShfLnRvU3RyKHZhbCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFZhbDogZnVuY3Rpb24gZ2V0VmFsKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlucHV0LmdldFF1ZXJ5KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VsZWN0OiBmdW5jdGlvbiBzZWxlY3QoJHNlbGVjdGFibGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMubWVudS5nZXRTZWxlY3RhYmxlRGF0YSgkc2VsZWN0YWJsZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEgJiYgIXRoaXMuZXZlbnRCdXMuYmVmb3JlKFwic2VsZWN0XCIsIGRhdGEub2JqKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlucHV0LnNldFF1ZXJ5KGRhdGEudmFsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwic2VsZWN0XCIsIGRhdGEub2JqKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogZnVuY3Rpb24gYXV0b2NvbXBsZXRlKCRzZWxlY3RhYmxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5LCBkYXRhLCBpc1ZhbGlkO1xuICAgICAgICAgICAgICAgIHF1ZXJ5ID0gdGhpcy5pbnB1dC5nZXRRdWVyeSgpO1xuICAgICAgICAgICAgICAgIGRhdGEgPSB0aGlzLm1lbnUuZ2V0U2VsZWN0YWJsZURhdGEoJHNlbGVjdGFibGUpO1xuICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBkYXRhICYmIHF1ZXJ5ICE9PSBkYXRhLnZhbDtcbiAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZCAmJiAhdGhpcy5ldmVudEJ1cy5iZWZvcmUoXCJhdXRvY29tcGxldGVcIiwgZGF0YS5vYmopKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQuc2V0UXVlcnkoZGF0YS52YWwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50QnVzLnRyaWdnZXIoXCJhdXRvY29tcGxldGVcIiwgZGF0YS5vYmopO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vdmVDdXJzb3I6IGZ1bmN0aW9uIG1vdmVDdXJzb3IoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgcXVlcnksICRjYW5kaWRhdGUsIGRhdGEsIHBheWxvYWQsIGNhbmNlbE1vdmU7XG4gICAgICAgICAgICAgICAgcXVlcnkgPSB0aGlzLmlucHV0LmdldFF1ZXJ5KCk7XG4gICAgICAgICAgICAgICAgJGNhbmRpZGF0ZSA9IHRoaXMubWVudS5zZWxlY3RhYmxlUmVsYXRpdmVUb0N1cnNvcihkZWx0YSk7XG4gICAgICAgICAgICAgICAgZGF0YSA9IHRoaXMubWVudS5nZXRTZWxlY3RhYmxlRGF0YSgkY2FuZGlkYXRlKTtcbiAgICAgICAgICAgICAgICBwYXlsb2FkID0gZGF0YSA/IGRhdGEub2JqIDogbnVsbDtcbiAgICAgICAgICAgICAgICBjYW5jZWxNb3ZlID0gdGhpcy5fbWluTGVuZ3RoTWV0KCkgJiYgdGhpcy5tZW51LnVwZGF0ZShxdWVyeSk7XG4gICAgICAgICAgICAgICAgaWYgKCFjYW5jZWxNb3ZlICYmICF0aGlzLmV2ZW50QnVzLmJlZm9yZShcImN1cnNvcmNoYW5nZVwiLCBwYXlsb2FkKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lbnUuc2V0Q3Vyc29yKCRjYW5kaWRhdGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5zZXRJbnB1dFZhbHVlKGRhdGEudmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXQucmVzZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVIaW50KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEJ1cy50cmlnZ2VyKFwiY3Vyc29yY2hhbmdlXCIsIHBheWxvYWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlc3Ryb3k6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5tZW51LmRlc3Ryb3koKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBUeXBlYWhlYWQ7XG4gICAgICAgIGZ1bmN0aW9uIGMoY3R4KSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kcyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICBfLmVhY2gobWV0aG9kcywgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHhbbWV0aG9kXS5hcHBseShjdHgsIGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0oKTtcbiAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgb2xkLCBrZXlzLCBtZXRob2RzO1xuICAgICAgICBvbGQgPSAkLmZuLnR5cGVhaGVhZDtcbiAgICAgICAga2V5cyA9IHtcbiAgICAgICAgICAgIHd3dzogXCJ0dC13d3dcIixcbiAgICAgICAgICAgIGF0dHJzOiBcInR0LWF0dHJzXCIsXG4gICAgICAgICAgICB0eXBlYWhlYWQ6IFwidHQtdHlwZWFoZWFkXCJcbiAgICAgICAgfTtcbiAgICAgICAgbWV0aG9kcyA9IHtcbiAgICAgICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIGluaXRpYWxpemUobywgZGF0YXNldHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgd3d3O1xuICAgICAgICAgICAgICAgIGRhdGFzZXRzID0gXy5pc0FycmF5KGRhdGFzZXRzKSA/IGRhdGFzZXRzIDogW10uc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgICAgICAgICAgIG8gPSBvIHx8IHt9O1xuICAgICAgICAgICAgICAgIHd3dyA9IFdXVyhvLmNsYXNzTmFtZXMpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goYXR0YWNoKTtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhdHRhY2goKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkaW5wdXQsICR3cmFwcGVyLCAkaGludCwgJG1lbnUsIGRlZmF1bHRIaW50LCBkZWZhdWx0TWVudSwgZXZlbnRCdXMsIGlucHV0LCBtZW51LCB0eXBlYWhlYWQsIE1lbnVDb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKGRhdGFzZXRzLCBmdW5jdGlvbihkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkLmhpZ2hsaWdodCA9ICEhby5oaWdobGlnaHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAkaW5wdXQgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAkd3JhcHBlciA9ICQod3d3Lmh0bWwud3JhcHBlcik7XG4gICAgICAgICAgICAgICAgICAgICRoaW50ID0gJGVsT3JOdWxsKG8uaGludCk7XG4gICAgICAgICAgICAgICAgICAgICRtZW51ID0gJGVsT3JOdWxsKG8ubWVudSk7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRIaW50ID0gby5oaW50ICE9PSBmYWxzZSAmJiAhJGhpbnQ7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRNZW51ID0gby5tZW51ICE9PSBmYWxzZSAmJiAhJG1lbnU7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHRIaW50ICYmICgkaGludCA9IGJ1aWxkSGludEZyb21JbnB1dCgkaW5wdXQsIHd3dykpO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0TWVudSAmJiAoJG1lbnUgPSAkKHd3dy5odG1sLm1lbnUpLmNzcyh3d3cuY3NzLm1lbnUpKTtcbiAgICAgICAgICAgICAgICAgICAgJGhpbnQgJiYgJGhpbnQudmFsKFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAkaW5wdXQgPSBwcmVwSW5wdXQoJGlucHV0LCB3d3cpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVmYXVsdEhpbnQgfHwgZGVmYXVsdE1lbnUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICR3cmFwcGVyLmNzcyh3d3cuY3NzLndyYXBwZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGlucHV0LmNzcyhkZWZhdWx0SGludCA/IHd3dy5jc3MuaW5wdXQgOiB3d3cuY3NzLmlucHV0V2l0aE5vSGludCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW5wdXQud3JhcCgkd3JhcHBlcikucGFyZW50KCkucHJlcGVuZChkZWZhdWx0SGludCA/ICRoaW50IDogbnVsbCkuYXBwZW5kKGRlZmF1bHRNZW51ID8gJG1lbnUgOiBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBNZW51Q29uc3RydWN0b3IgPSBkZWZhdWx0TWVudSA/IERlZmF1bHRNZW51IDogTWVudTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZWw6ICRpbnB1dFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQgPSBuZXcgSW5wdXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaGludDogJGhpbnQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dDogJGlucHV0XG4gICAgICAgICAgICAgICAgICAgIH0sIHd3dyk7XG4gICAgICAgICAgICAgICAgICAgIG1lbnUgPSBuZXcgTWVudUNvbnN0cnVjdG9yKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGU6ICRtZW51LFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldHM6IGRhdGFzZXRzXG4gICAgICAgICAgICAgICAgICAgIH0sIHd3dyk7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVhaGVhZCA9IG5ldyBUeXBlYWhlYWQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGlucHV0LFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudTogbWVudSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50QnVzOiBldmVudEJ1cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbkxlbmd0aDogby5taW5MZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgfSwgd3d3KTtcbiAgICAgICAgICAgICAgICAgICAgJGlucHV0LmRhdGEoa2V5cy53d3csIHd3dyk7XG4gICAgICAgICAgICAgICAgICAgICRpbnB1dC5kYXRhKGtleXMudHlwZWFoZWFkLCB0eXBlYWhlYWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0VuYWJsZWQ6IGZ1bmN0aW9uIGlzRW5hYmxlZCgpIHtcbiAgICAgICAgICAgICAgICB2YXIgZW5hYmxlZDtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQgPSB0LmlzRW5hYmxlZCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBlbmFibGVkO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVuYWJsZTogZnVuY3Rpb24gZW5hYmxlKCkge1xuICAgICAgICAgICAgICAgIHR0RWFjaCh0aGlzLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHQuZW5hYmxlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGlzYWJsZTogZnVuY3Rpb24gZGlzYWJsZSgpIHtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICB0LmRpc2FibGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc0FjdGl2ZTogZnVuY3Rpb24gaXNBY3RpdmUoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFjdGl2ZTtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IHQuaXNBY3RpdmUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWN0aXZlO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFjdGl2YXRlOiBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICB0LmFjdGl2YXRlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVhY3RpdmF0ZTogZnVuY3Rpb24gZGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICB0LmRlYWN0aXZhdGUoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc09wZW46IGZ1bmN0aW9uIGlzT3BlbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3BlbjtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIG9wZW4gPSB0LmlzT3BlbigpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBvcGVuO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgICAgICAgICAgdHRFYWNoKHRoaXMsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdC5vcGVuKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICAgICAgICAgIHR0RWFjaCh0aGlzLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZWxlY3Q6IGZ1bmN0aW9uIHNlbGVjdChlbCkge1xuICAgICAgICAgICAgICAgIHZhciBzdWNjZXNzID0gZmFsc2UsICRlbCA9ICQoZWwpO1xuICAgICAgICAgICAgICAgIHR0RWFjaCh0aGlzLmZpcnN0KCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IHQuc2VsZWN0KCRlbCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiBmdW5jdGlvbiBhdXRvY29tcGxldGUoZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlLCAkZWwgPSAkKGVsKTtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3MgPSB0LmF1dG9jb21wbGV0ZSgkZWwpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBzdWNjZXNzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1vdmVDdXJzb3I6IGZ1bmN0aW9uIG1vdmVDdXJzb2UoZGVsdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgc3VjY2VzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHR0RWFjaCh0aGlzLmZpcnN0KCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzcyA9IHQubW92ZUN1cnNvcihkZWx0YSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgdmFsOiBmdW5jdGlvbiB2YWwobmV3VmFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHF1ZXJ5O1xuICAgICAgICAgICAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0dEVhY2godGhpcy5maXJzdCgpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeSA9IHQuZ2V0VmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHRFYWNoKHRoaXMsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHQuc2V0VmFsKG5ld1ZhbCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGVzdHJveTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgICAgICB0dEVhY2godGhpcywgZnVuY3Rpb24odHlwZWFoZWFkLCAkaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV2ZXJ0KCRpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIHR5cGVhaGVhZC5kZXN0cm95KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgICQuZm4udHlwZWFoZWFkID0gZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgICAgICAgICBpZiAobWV0aG9kc1ttZXRob2RdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ldGhvZHNbbWV0aG9kXS5hcHBseSh0aGlzLCBbXS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbWV0aG9kcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgICQuZm4udHlwZWFoZWFkLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiBub0NvbmZsaWN0KCkge1xuICAgICAgICAgICAgJC5mbi50eXBlYWhlYWQgPSBvbGQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gdHRFYWNoKCRlbHMsIGZuKSB7XG4gICAgICAgICAgICAkZWxzLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyICRpbnB1dCA9ICQodGhpcyksIHR5cGVhaGVhZDtcbiAgICAgICAgICAgICAgICAodHlwZWFoZWFkID0gJGlucHV0LmRhdGEoa2V5cy50eXBlYWhlYWQpKSAmJiBmbih0eXBlYWhlYWQsICRpbnB1dCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBidWlsZEhpbnRGcm9tSW5wdXQoJGlucHV0LCB3d3cpIHtcbiAgICAgICAgICAgIHJldHVybiAkaW5wdXQuY2xvbmUoKS5hZGRDbGFzcyh3d3cuY2xhc3Nlcy5oaW50KS5yZW1vdmVEYXRhKCkuY3NzKHd3dy5jc3MuaGludCkuY3NzKGdldEJhY2tncm91bmRTdHlsZXMoJGlucHV0KSkucHJvcChcInJlYWRvbmx5XCIsIHRydWUpLnJlbW92ZUF0dHIoXCJpZCBuYW1lIHBsYWNlaG9sZGVyIHJlcXVpcmVkXCIpLmF0dHIoe1xuICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogXCJvZmZcIixcbiAgICAgICAgICAgICAgICBzcGVsbGNoZWNrOiBcImZhbHNlXCIsXG4gICAgICAgICAgICAgICAgdGFiaW5kZXg6IC0xXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBwcmVwSW5wdXQoJGlucHV0LCB3d3cpIHtcbiAgICAgICAgICAgICRpbnB1dC5kYXRhKGtleXMuYXR0cnMsIHtcbiAgICAgICAgICAgICAgICBkaXI6ICRpbnB1dC5hdHRyKFwiZGlyXCIpLFxuICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZTogJGlucHV0LmF0dHIoXCJhdXRvY29tcGxldGVcIiksXG4gICAgICAgICAgICAgICAgc3BlbGxjaGVjazogJGlucHV0LmF0dHIoXCJzcGVsbGNoZWNrXCIpLFxuICAgICAgICAgICAgICAgIHN0eWxlOiAkaW5wdXQuYXR0cihcInN0eWxlXCIpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRpbnB1dC5hZGRDbGFzcyh3d3cuY2xhc3Nlcy5pbnB1dCkuYXR0cih7XG4gICAgICAgICAgICAgICAgYXV0b2NvbXBsZXRlOiBcIm9mZlwiLFxuICAgICAgICAgICAgICAgIHNwZWxsY2hlY2s6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgISRpbnB1dC5hdHRyKFwiZGlyXCIpICYmICRpbnB1dC5hdHRyKFwiZGlyXCIsIFwiYXV0b1wiKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgICAgICByZXR1cm4gJGlucHV0O1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIGdldEJhY2tncm91bmRTdHlsZXMoJGVsKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmRBdHRhY2htZW50OiAkZWwuY3NzKFwiYmFja2dyb3VuZC1hdHRhY2htZW50XCIpLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDbGlwOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1jbGlwXCIpLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJGVsLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiksXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZEltYWdlOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiKSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kT3JpZ2luOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1vcmlnaW5cIiksXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiAkZWwuY3NzKFwiYmFja2dyb3VuZC1wb3NpdGlvblwiKSxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kUmVwZWF0OiAkZWwuY3NzKFwiYmFja2dyb3VuZC1yZXBlYXRcIiksXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZFNpemU6ICRlbC5jc3MoXCJiYWNrZ3JvdW5kLXNpemVcIilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcmV2ZXJ0KCRpbnB1dCkge1xuICAgICAgICAgICAgdmFyIHd3dywgJHdyYXBwZXI7XG4gICAgICAgICAgICB3d3cgPSAkaW5wdXQuZGF0YShrZXlzLnd3dyk7XG4gICAgICAgICAgICAkd3JhcHBlciA9ICRpbnB1dC5wYXJlbnQoKS5maWx0ZXIod3d3LnNlbGVjdG9ycy53cmFwcGVyKTtcbiAgICAgICAgICAgIF8uZWFjaCgkaW5wdXQuZGF0YShrZXlzLmF0dHJzKSwgZnVuY3Rpb24odmFsLCBrZXkpIHtcbiAgICAgICAgICAgICAgICBfLmlzVW5kZWZpbmVkKHZhbCkgPyAkaW5wdXQucmVtb3ZlQXR0cihrZXkpIDogJGlucHV0LmF0dHIoa2V5LCB2YWwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkaW5wdXQucmVtb3ZlRGF0YShrZXlzLnR5cGVhaGVhZCkucmVtb3ZlRGF0YShrZXlzLnd3dykucmVtb3ZlRGF0YShrZXlzLmF0dHIpLnJlbW92ZUNsYXNzKHd3dy5jbGFzc2VzLmlucHV0KTtcbiAgICAgICAgICAgIGlmICgkd3JhcHBlci5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAkaW5wdXQuZGV0YWNoKCkuaW5zZXJ0QWZ0ZXIoJHdyYXBwZXIpO1xuICAgICAgICAgICAgICAgICR3cmFwcGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uICRlbE9yTnVsbChvYmopIHtcbiAgICAgICAgICAgIHZhciBpc1ZhbGlkLCAkZWw7XG4gICAgICAgICAgICBpc1ZhbGlkID0gXy5pc0pRdWVyeShvYmopIHx8IF8uaXNFbGVtZW50KG9iaik7XG4gICAgICAgICAgICAkZWwgPSBpc1ZhbGlkID8gJChvYmopLmZpcnN0KCkgOiBbXTtcbiAgICAgICAgICAgIHJldHVybiAkZWwubGVuZ3RoID8gJGVsIDogbnVsbDtcbiAgICAgICAgfVxuICAgIH0pKCk7XG59KTsiLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbndpbmRvdy5wcm9qNCA9IHJlcXVpcmUoJ3Byb2o0Jyk7XHJcbmdsb2JhbC5qUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vc3JjL3ZpZXdlcicpO1xyXG52YXIgbWFwTG9hZGVyID0gcmVxdWlyZSgnLi9zcmMvbWFwbG9hZGVyJyk7XHJcbnZhciBjb250cm9sSW5pdGlhbGlzZXIgPSByZXF1aXJlKCcuL3NyYy9jb250cm9saW5pdGlhbGlzZXInKTtcclxuXHJcbnZhciBvcmlnbyA9IHt9O1xyXG5vcmlnby5tYXAgPSB7fTtcclxub3JpZ28uY29uZmlnID0gcmVxdWlyZSgnLi9jb25mL29yaWdvQ29uZmlnJyk7XHJcbm9yaWdvLmNvbnRyb2xzID0gcmVxdWlyZSgnLi9jb25mL29yaWdvQ29udHJvbHMnKTtcclxuXHJcbm9yaWdvLm1hcC5pbml0ID0gZnVuY3Rpb24ob3B0aW9ucywgb3B0X2NvbmZpZykge1xyXG4gIHZhciBjb25maWcgPSBvcHRfY29uZmlnID8gJC5leHRlbmQob3JpZ28uY29uZmlnLCBvcHRfY29uZmlnKSA6IG9yaWdvLmNvbmZpZztcclxuXHJcbiAgdmFyIG1hcCA9IG1hcExvYWRlcihvcHRpb25zLCBjb25maWcpO1xyXG4gIGlmIChtYXApIHtcclxuICAgIG1hcC50aGVuKGZ1bmN0aW9uKGNvbmZpZykge1xyXG4gICAgICBpbml0KGNvbmZpZyk7XHJcbiAgICB9KVxyXG4gICAgcmV0dXJuIFZpZXdlcjtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGluaXQoY29uZmlnKSB7XHJcbiAgVmlld2VyLmluaXQoY29uZmlnLmVsLCBjb25maWcub3B0aW9ucyk7XHJcblxyXG4gIC8vSW5pdCBjb250cm9sc1xyXG4gIGNvbnRyb2xJbml0aWFsaXNlcihjb25maWcub3B0aW9ucy5jb250cm9scyk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gb3JpZ287XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XG52YXIgVXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgTW9kYWwgPSByZXF1aXJlKCcuL21vZGFsJyk7XG5cbnZhciAkYWJvdXRCdXR0b247XG52YXIgYnV0dG9uVGV4dDtcbnZhciB0aXRsZTtcbnZhciBjb250ZW50O1xuXG5mdW5jdGlvbiBpbml0KG9wdF9vcHRpb25zKSB7XG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XG4gIGJ1dHRvblRleHQgPSBvcHRpb25zLmJ1dHRvblRleHQgfHwgJ09tIGthcnRhbic7XG4gIHRpdGxlID0gb3B0aW9ucy50aXRsZSB8fCAnT20ga2FydGFuJztcbiAgY29udGVudCA9IG9wdGlvbnMuY29udGVudCB8fCAnPHA+PC9wPic7XG5cbiAgcmVuZGVyKCk7XG4gIGJpbmRVSUFjdGlvbnMoKTtcbn1cblxuZnVuY3Rpb24gcmVuZGVyKCkge1xuICB2YXIgZWwgPSBVdGlscy5jcmVhdGVMaXN0QnV0dG9uKHtcbiAgICBpZDogJ28tYWJvdXQnLFxuICAgIGljb25DbHM6ICdvLWljb24tZmEtaW5mby1jaXJjbGUnLFxuICAgIHNyYzogJ2Nzcy9zdmcvZmEtaWNvbnMuc3ZnI2ZhLWluZm8tY2lyY2xlJyxcbiAgICB0ZXh0OiBidXR0b25UZXh0XG4gIH0pO1xuICAkKCcjby1tZW51dG9vbHMnKS5hcHBlbmQoZWwpO1xuICAkYWJvdXRCdXR0b24gPSAkKCcjby1hYm91dC1idXR0b24nKTtcbn1cblxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcbiAgJGFib3V0QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICBNb2RhbC5jcmVhdGVNb2RhbCgnI28tbWFwJywge1xuICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgY29udGVudDogY29udGVudFxuICAgIH0pO1xuXG4gICAgTW9kYWwuc2hvd01vZGFsKCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcblxyXG52YXIgbWFwO1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIGJyZWFrUG9pbnQgPSBvcHRpb25zLmJyZWFrUG9pbnQgfHwgWzc2OCwgNTAwXTtcclxuICB2YXIgYXR0cmlidXRpb247XHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG5cclxuICBhdHRyaWJ1dGlvbiA9IG5ldyBvbC5jb250cm9sLkF0dHJpYnV0aW9uKHtcclxuICAgIGNvbGxhcHNpYmxlOiBmYWxzZVxyXG4gIH0pO1xyXG5cclxuICBtYXAuYWRkQ29udHJvbChhdHRyaWJ1dGlvbik7XHJcblxyXG4gICQod2luZG93KS5vbigncmVzaXplJywgY2hlY2tTaXplKTtcclxuICBjaGVja1NpemUoKTtcclxuXHJcbiAgZnVuY3Rpb24gY2hlY2tTaXplKCkge1xyXG4gICAgdmFyIG1hcFNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xyXG4gICAgdmFyIGNvbGxhcHNlZCA9IChtYXBTaXplWzBdIDw9IGJyZWFrUG9pbnRbMF0gfHwgbWFwU2l6ZVsxXSA8PSBicmVha1BvaW50WzFdKTtcclxuICAgIGF0dHJpYnV0aW9uLnNldENvbGxhcHNpYmxlKGNvbGxhcHNlZCk7XHJcbiAgICBhdHRyaWJ1dGlvbi5zZXRDb2xsYXBzZWQoY29sbGFwc2VkKTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiPHN2ZyB3aWR0aD0nMzJweCcgaGVpZ2h0PSczMnB4JyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgMCAxMDAgMTAwXFxcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVxcXCJ4TWlkWU1pZFxcXCIgY2xhc3M9XFxcInVpbC1yaXBwbGVcXFwiPlxcclxcbiAgPHJlY3QgeD1cXFwiMFxcXCIgeT1cXFwiMFxcXCIgd2lkdGg9XFxcIjEwMFxcXCIgaGVpZ2h0PVxcXCIxMDBcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIGNsYXNzPVxcXCJia1xcXCI+PC9yZWN0PlxcclxcbiAgPGc+XFxyXFxuICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9XFxcIm9wYWNpdHlcXFwiIGR1cj1cXFwiMnNcXFwiIHJlcGVhdENvdW50PVxcXCJpbmRlZmluaXRlXFxcIiBiZWdpbj1cXFwiMHNcXFwiIGtleVRpbWVzPVxcXCIwOzAuMzM7MVxcXCIgdmFsdWVzPVxcXCIxOzE7MFxcXCI+PC9hbmltYXRlPlxcclxcbiAgICAgIDxjaXJjbGUgY3g9XFxcIjUwXFxcIiBjeT1cXFwiNTBcXFwiIHI9XFxcIjQwXFxcIiBzdHJva2U9XFxcIiMwMDAwMDBcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHN0cm9rZS13aWR0aD1cXFwiNlxcXCIgc3Ryb2tlLWxpbmVjYXA9XFxcInJvdW5kXFxcIj5cXHJcXG4gICAgICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9XFxcInJcXFwiIGR1cj1cXFwiMnNcXFwiIHJlcGVhdENvdW50PVxcXCJpbmRlZmluaXRlXFxcIiBiZWdpbj1cXFwiMHNcXFwiIGtleVRpbWVzPVxcXCIwOzAuMzM7MVxcXCIgdmFsdWVzPVxcXCIwOzIyOzQ0XFxcIj48L2FuaW1hdGU+XFxyXFxuICAgICAgPC9jaXJjbGU+XFxyXFxuICA8L2c+XFxyXFxuICAgICAgPGc+XFxyXFxuICAgICAgICA8YW5pbWF0ZSBhdHRyaWJ1dGVOYW1lPVxcXCJvcGFjaXR5XFxcIiBkdXI9XFxcIjJzXFxcIiByZXBlYXRDb3VudD1cXFwiaW5kZWZpbml0ZVxcXCIgYmVnaW49XFxcIjFzXFxcIiBrZXlUaW1lcz1cXFwiMDswLjMzOzFcXFwiIHZhbHVlcz1cXFwiMTsxOzBcXFwiPjwvYW5pbWF0ZT5cXHJcXG4gICAgICAgIDxjaXJjbGUgY3g9XFxcIjUwXFxcIiBjeT1cXFwiNTBcXFwiIHI9XFxcIjQwXFxcIiBzdHJva2U9XFxcIiMwMDBcXFwiIGZpbGw9XFxcIm5vbmVcXFwiIHN0cm9rZS13aWR0aD1cXFwiNlxcXCIgc3Ryb2tlLWxpbmVjYXA9XFxcInJvdW5kXFxcIj5cXHJcXG4gICAgICAgICAgPGFuaW1hdGUgYXR0cmlidXRlTmFtZT1cXFwiclxcXCIgZHVyPVxcXCIyc1xcXCIgcmVwZWF0Q291bnQ9XFxcImluZGVmaW5pdGVcXFwiIGJlZ2luPVxcXCIxc1xcXCIga2V5VGltZXM9XFxcIjA7MC4zMzsxXFxcIiB2YWx1ZXM9XFxcIjA7MjI7NDRcXFwiPjwvYW5pbWF0ZT5cXHJcXG4gICAgICAgIDwvY2lyY2xlPlxcclxcbiAgICAgIDwvZz5cXHJcXG48L3N2Zz5cXHJcXG5cIjtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgY29udHJvbEluaXRpYWxpc2VyID0gZnVuY3Rpb24oY29udHJvbHMpIHtcclxuICAgIHZhciBjb250cm9sTmFtZSwgY29udHJvbE9wdGlvbnM7XHJcbiAgICBjb250cm9scy5mb3JFYWNoKGZ1bmN0aW9uKGNvbnRyb2wpIHtcclxuICAgICAgICBjb250cm9sTmFtZSA9IGNvbnRyb2wubmFtZTtcclxuICAgICAgICBjb250cm9sT3B0aW9ucyA9IGNvbnRyb2wub3B0aW9ucyB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgaWYgKG9yaWdvLmNvbnRyb2xzLmhhc093blByb3BlcnR5KGNvbnRyb2xOYW1lKSkge1xyXG4gICAgICAgICAgICBjb250cm9sT3B0aW9ucyA/IG9yaWdvLmNvbnRyb2xzW2NvbnRyb2xOYW1lXS5pbml0KGNvbnRyb2xPcHRpb25zKSA6IG9yaWdvLmNvbnRyb2xzW2NvbnRyb2xOYW1lXS5pbml0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRyb2xJbml0aWFsaXNlcjtcclxuIiwiIFwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbih0YXJnZXQsIGl0ZW1zLCBvcHRpb25zKSB7XHJcbiAgdmFyIGRhdGFBdHRyaWJ1dGUgPSAnZGF0YS0nICsgb3B0aW9ucy5kYXRhQXR0cmlidXRlIHx8ICdkZWZhdWx0JztcclxuICB2YXIgJHRhcmdldCA9ICQoJyMnICsgdGFyZ2V0KTtcclxuICB2YXIgYWN0aXZlSXRlbSA9IG9wdGlvbnMuYWN0aXZlIHx8IHVuZGVmaW5lZDtcclxuICB2YXIgYWN0aXZlQ2xzID0gJ28tYWN0aXZlJztcclxuICB2YXIgdWw7XHJcbiAgdmFyIGxpID0gW107XHJcbiAgdmFyIGNscyA9ICdvLWRyb3Bkb3duLWxpJztcclxuICB2YXIgaWNvbiA9IHV0aWxzLmNyZWF0ZVN2Zyh7XHJcbiAgICBocmVmOiAnI2ljX2NoZWNrXzI0cHgnLFxyXG4gICAgY2xzOiAnby1pY29uLTI0J1xyXG4gIH0pO1xyXG4gIHJlbmRlcigpO1xyXG4gIGFkZExpc3RlbmVyKCk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaW5kZXgpIHtcclxuICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICBjbHM6IGNsc1xyXG4gICAgICB9O1xyXG4gICAgICB2YXIgYWN0aXZlID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnc3BhbicsIGljb24sIHtcclxuICAgICAgICBjbHM6ICdvLWljb24nXHJcbiAgICAgIH0pO1xyXG4gICAgICBvYmpbZGF0YUF0dHJpYnV0ZV0gPSBpdGVtLnZhbHVlO1xyXG4gICAgICBpZiAoaXRlbS52YWx1ZSA9PT0gYWN0aXZlSXRlbSkge1xyXG4gICAgICAgIG9iai5jbHMgPSBhY3RpdmVDbHM7XHJcbiAgICAgIH1cclxuICAgICAgbGlbaW5kZXhdID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnbGknLCBpdGVtLm5hbWUgKyBhY3RpdmUsIG9iaik7XHJcbiAgICB9KTtcclxuICAgIHVsID0gdXRpbHMuY3JlYXRlRWxlbWVudCgndWwnLCBsaS5qb2luKCcnKSwge1xyXG4gICAgICBjbHM6ICdvLWRyb3Bkb3duJ1xyXG4gICAgfSk7XHJcbiAgICAkdGFyZ2V0LmFwcGVuZCh1bCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhZGRMaXN0ZW5lcigpIHtcclxuICAgICR0YXJnZXQub24oJ2NsaWNrJywgJ3VsJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICB2YXIgJGFjdGl2ZSA9ICQoZS50YXJnZXQpO1xyXG4gICAgICAkdGFyZ2V0LnRyaWdnZXIoe1xyXG4gICAgICAgIHR5cGU6ICdjaGFuZ2VEcm9wZG93bicsXHJcbiAgICAgICAgZGF0YUF0dHJpYnV0ZTogJChlLnRhcmdldCkuZGF0YShvcHRpb25zLmRhdGFBdHRyaWJ1dGUpXHJcbiAgICAgIH0pO1xyXG4gICAgICB0b2dnbGVBY3RpdmUoJGFjdGl2ZSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHRvZ2dsZUFjdGl2ZSgkYWN0aXZlKSB7XHJcbiAgICAkdGFyZ2V0LmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xzKTtcclxuICAgICRhY3RpdmUuYWRkQ2xhc3MoYWN0aXZlQ2xzKTtcclxuICB9XHJcbn07XHJcbiIsIiBcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbnZhciBlZGl0b3JUb29sYmFyID0gcmVxdWlyZSgnLi9lZGl0b3IvZWRpdG9ydG9vbGJhcicpO1xyXG5cclxudmFyICRlZGl0b3JCdXR0b247XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogSW5pdFxyXG4gIH07XHJcbn0oKTtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciBlZGl0YWJsZUxheWVycyA9IHZpZXdlci5nZXRMYXllcnNCeVByb3BlcnR5KCdlZGl0YWJsZScsIHRydWUsIHRydWUpO1xyXG4gIGlmIChlZGl0YWJsZUxheWVycy5sZW5ndGgpIHtcclxuICAgIG9wdGlvbnMuZWRpdGFibGVMYXllcnMgPSBlZGl0YWJsZUxheWVycztcclxuICB9ICBcclxuICBvcHRpb25zLmF1dG9TYXZlID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnYXV0b1NhdmUnKSA/IG9wdGlvbnMuYXV0b1NhdmUgOiB0cnVlO1xyXG4gIG9wdGlvbnMuYXV0b0Zvcm0gPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdhdXRvRm9ybScpID8gb3B0aW9ucy5hdXRvRm9ybSA6IGZhbHNlO1xyXG4gIG9wdGlvbnMuY3VycmVudExheWVyID0gb3B0aW9ucy5kZWZhdWx0TGF5ZXIgfHwgb3B0aW9ucy5lZGl0YWJsZUxheWVyc1swXTtcclxuICBlZGl0b3JUb29sYmFyLmluaXQob3B0aW9ucyk7XHJcbiAgcmVuZGVyKCk7XHJcbiAgJGVkaXRvckJ1dHRvbiA9ICQoJyNvLWVkaXRvci1idXR0b24nKTtcclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgJGVkaXRvckJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAkKCcuby1tYXAnKS5maXJzdCgpLnRyaWdnZXIoe1xyXG4gICAgICB0eXBlOiAnZW5hYmxlSW50ZXJhY3Rpb24nLFxyXG4gICAgICBpbnRlcmFjdGlvbjogJ2VkaXRvcidcclxuICAgIH0pO1xyXG4gICAgdGhpcy5ibHVyKCk7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgdmFyIGVsID0gdXRpbHMuY3JlYXRlTGlzdEJ1dHRvbih7XHJcbiAgICBpZDogJ28tZWRpdG9yJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tZmEtcGVuY2lsJyxcclxuICAgIHNyYzogJyNmYS1wZW5jaWwnLFxyXG4gICAgdGV4dDogJ1JlZGlnZXJhJ1xyXG4gIH0pO1xyXG4gICQoJyNvLW1lbnV0b29scycpLmFwcGVuZChlbCk7XHJcbn1cclxuIiwiLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAqIENvcHlyaWdodCAyMDE2IE9yaWdvXHJcbiAqIExpY2Vuc2VkIHVuZGVyIEJTRCAyLUNsYXVzZSAoaHR0cHM6Ly9naXRodWIuY29tL29yaWdvLW1hcC9vcmlnby9ibG9iL21hc3Rlci9MSUNFTlNFLnR4dClcclxuICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBlZGl0c1N0b3JlID0gcmVxdWlyZSgnLi9lZGl0c3N0b3JlJykoKTtcclxudmFyIGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL2VkaXREaXNwYXRjaGVyJyk7XHJcblxyXG52YXIgZm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5Fc3JpSlNPTigpO1xyXG52YXIgdXJsU3VmZml4ID0ge1xyXG4gIHVwZGF0ZTogJ3VwZGF0ZUZlYXR1cmVzJyxcclxuICBpbnNlcnQ6ICdhZGRGZWF0dXJlcycsXHJcbiAgZGVsZXRlOiAnZGVsZXRlRmVhdHVyZXMnXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRyYW5zT2JqLCBsYXllck5hbWUpIHtcclxuICBhZ3NUcmFuc2FjdGlvbih0cmFuc09iaiwgbGF5ZXJOYW1lKTtcclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVBZ3NUcmFuc2FjdGlvbihmZWF0dXJlcywgb3B0aW9ucykge1xyXG4gIHZhciBkYXRhID0ge307XHJcblxyXG4gIGlmIChvcHRpb25zLnR5cGUgPT09ICdkZWxldGUnKSB7XHJcbiAgICB2YXIgb2JqZWN0SWRzID0gZmVhdHVyZXMubWFwKGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgcmV0dXJuIGZlYXR1cmUuZ2V0SWQoKTtcclxuICAgIH0pO1xyXG4gICAgZGF0YS5vYmplY3RJZHMgPSBvYmplY3RJZHMuam9pbignLCcpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB2YXIgYWdzRmVhdHVyZXMgPSBmZWF0dXJlcy5tYXAoZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICByZXR1cm4gZm9ybWF0LndyaXRlRmVhdHVyZShmZWF0dXJlLCB7XHJcbiAgICAgICAgZmVhdHVyZVByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvblxyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgZGF0YS5mZWF0dXJlcyA9ICdbJyArIGFnc0ZlYXR1cmVzICsgJ10nO1xyXG4gIH1cclxuICBkYXRhLmYgPSAnanNvbic7XHJcbiAgcmV0dXJuIGRhdGE7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFnc1RyYW5zYWN0aW9uKHRyYW5zT2JqLCBsYXllck5hbWUpIHtcclxuICB2YXIgcHJvamVjdGlvbiA9IHZpZXdlci5nZXRQcm9qZWN0aW9uKCk7XHJcbiAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgdmFyIGlkID0gbGF5ZXIuZ2V0KCdpZCcpO1xyXG4gIHZhciBzb3VyY2UgPSB2aWV3ZXIuZ2V0TWFwU291cmNlKClbbGF5ZXIuZ2V0KCdzb3VyY2VOYW1lJyldO1xyXG4gIHZhciB0eXBlcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRyYW5zT2JqKTtcclxuICB2YXIgY2IgPSB7XHJcbiAgICB1cGRhdGU6IHVwZGF0ZVN1Y2Nlc3MsXHJcbiAgICBpbnNlcnQ6IGluc2VydFN1Y2Nlc3MsXHJcbiAgICBkZWxldGU6IGRlbGV0ZVN1Y2Nlc3NcclxuICB9O1xyXG4gIHR5cGVzLmZvckVhY2goZnVuY3Rpb24odHlwZSkge1xyXG4gICAgaWYgKHRyYW5zT2JqW3R5cGVdKSB7XHJcbiAgICAgIHZhciB1cmwgPSBzb3VyY2UudXJsICArICcvJyArIGlkICsgJy8nICsgdXJsU3VmZml4W3R5cGVdO1xyXG4gICAgICB2YXIgZGF0YXQgPSB3cml0ZUFnc1RyYW5zYWN0aW9uKHRyYW5zT2JqW3R5cGVdLCB7XHJcbiAgICAgICAgcHJvamVjdGlvbjogcHJvamVjdGlvbixcclxuICAgICAgICB0eXBlOiB0eXBlXHJcbiAgICAgIH0pO1xyXG4gICAgICAkLmFqYXgoe1xyXG4gICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGRhdGE6IGRhdGF0LFxyXG4gICAgICAgIHN1Y2Nlc3M6IGNiW3R5cGVdLFxyXG4gICAgICAgIGVycm9yOiBlcnJvcixcclxuICAgICAgICBjb250ZXh0OiB0aGlzXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBmdW5jdGlvbiB1cGRhdGVTdWNjZXNzKGRhdGEpIHtcclxuICAgIHZhciBmZWF0dXJlID0gdHJhbnNPYmoudXBkYXRlO1xyXG4gICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UoZGF0YSk7XHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIGlmIChyZXN1bHQudXBkYXRlUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgcmVzdWx0LnVwZGF0ZVJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbih1cGRhdGUsIGluZGV4KSB7XHJcbiAgICAgICAgICBpZiAodXBkYXRlLnN1Y2Nlc3MgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhyb3dTZXJ2ZXJFcnJvcih1cGRhdGUuZXJyb3IpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRmVhdHVyZSh7XHJcbiAgICAgICAgICAgICAgZmVhdHVyZTogW2ZlYXR1cmVbaW5kZXhdXSxcclxuICAgICAgICAgICAgICBsYXllck5hbWU6IGxheWVyTmFtZSxcclxuICAgICAgICAgICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXHJcbiAgICAgICAgICAgICAgYWN0aW9uOiAndXBkYXRlJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZXJyb3IoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGluc2VydFN1Y2Nlc3MoZGF0YSkge1xyXG4gICAgdmFyIGZlYXR1cmUgPSB0cmFuc09iai5pbnNlcnQ7XHJcbiAgICB2YXIgcmVzdWx0ID0gSlNPTi5wYXJzZShkYXRhKTtcclxuICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgaWYgKHJlc3VsdC5hZGRSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICByZXN1bHQuYWRkUmVzdWx0cy5mb3JFYWNoKGZ1bmN0aW9uKGluc2VydCwgaW5kZXgpIHtcclxuICAgICAgICAgIGlmIChpbnNlcnQuc3VjY2VzcyAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICB0aHJvd1NlcnZlckVycm9yKGluc2VydC5lcnJvcik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VGZWF0dXJlKHtcclxuICAgICAgICAgICAgICBmZWF0dXJlOiBbZmVhdHVyZVtpbmRleF1dLFxyXG4gICAgICAgICAgICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLFxyXG4gICAgICAgICAgICAgIHN0YXR1czogJ2ZpbmlzaGVkJyxcclxuICAgICAgICAgICAgICBhY3Rpb246ICdpbnNlcnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBmZWF0dXJlW2luZGV4XS5zZXQoJ29iamVjdElkJyxpbnNlcnQub2JqZWN0SWQpO1xyXG4gICAgICAgICAgICBmZWF0dXJlW2luZGV4XS5zZXRJZChpbnNlcnQub2JqZWN0SWQpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlcnJvcigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZGVsZXRlU3VjY2VzcyhkYXRhKSB7XHJcbiAgICB2YXIgZmVhdHVyZSA9IHRyYW5zT2JqLmRlbGV0ZTtcclxuICAgIHZhciByZXN1bHQgPSBKU09OLnBhcnNlKGRhdGEpO1xyXG4gICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICBpZiAocmVzdWx0LmRlbGV0ZVJlc3VsdHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJlc3VsdC5kZWxldGVSZXN1bHRzLmZvckVhY2goZnVuY3Rpb24oZGVsZXRlZCwgaW5kZXgpIHtcclxuICAgICAgICAgIGlmIChkZWxldGVkLnN1Y2Nlc3MgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgdGhyb3dTZXJ2ZXJFcnJvcihkZWxldGVkLmVycm9yKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUZlYXR1cmUoe1xyXG4gICAgICAgICAgICAgIGZlYXR1cmU6IFtmZWF0dXJlW2luZGV4XV0sXHJcbiAgICAgICAgICAgICAgbGF5ZXJOYW1lOiBsYXllck5hbWUsXHJcbiAgICAgICAgICAgICAgc3RhdHVzOiAnZmluaXNoZWQnLFxyXG4gICAgICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9yKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICB2YXIgZXJyb3JNc2cgPSBlID8gKGUuc3RhdHVzICsgJyAnICsgZS5zdGF0dXNUZXh0KSA6IFwiXCI7XHJcbiAgICBhbGVydCgnRGV0IGludHLDpGZmYWRlIGV0dCBmZWwgbsOkciDDpG5kcmluZ2FybmEgc2t1bGxlIHNwYXJhcyB0aWxsIHNlcnZlcm4uLi48YnI+PGJyPicgK1xyXG4gICAgICBlcnJvck1zZyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiB0aHJvd1NlcnZlckVycm9yKGVycm9yKSB7XHJcbiAgICBhbGVydChlcnJvci5kZXNjcmlwdGlvbiArICcgKCcgKyBlcnJvci5jb2RlICsgJyknKTtcclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBkcm9wRG93biA9IHJlcXVpcmUoJy4uL2Ryb3Bkb3duJyk7XHJcbnZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9lZGl0ZGlzcGF0Y2hlcicpO1xyXG52YXIgY3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoJy4uL3V0aWxzJykuY3JlYXRlRWxlbWVudDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZHJhd1Rvb2xzKHRvb2xzLCBkZWZhdWx0TGF5ZXIpIHtcclxuICB2YXIgdG9vbE5hbWVzID0ge1xyXG4gICAgUG9seWdvbjogJ1BvbHlnb24nLFxyXG4gICAgUG9pbnQ6ICdQdW5rdCcsXHJcbiAgICBMaW5lOiAnTGluamUnLFxyXG4gICAgYm94OiAnUmVrdGFuZ2VsJ1xyXG4gIH07XHJcbiAgdmFyIGRlZmF1bHRUb29scyA9IHRvb2xzIHx8IHt9O1xyXG4gIHZhciBkcmF3VG9vbHMgPSB1bmRlZmluZWQ7XHJcbiAgdmFyIGN1cnJlbnRMYXllciA9IGRlZmF1bHRMYXllcjtcclxuICB2YXIgbWFwID0gdmlld2VyLmdldE1hcCgpO1xyXG4gIHZhciBhY3RpdmUgPSBmYWxzZTtcclxuICB2YXIgYWN0aXZlQ2xzID0gJ28tYWN0aXZlJztcclxuICB2YXIgdGFyZ2V0ID0gJ2VkaXRvci10b29sYmFyLWRyYXctZHJvcGRvd24nO1xyXG4gIHJlbmRlcigpO1xyXG4gIGFkZExpc3RlbmVyKCk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICAgIHZhciBwb3BvdmVyID0gY3JlYXRlRWxlbWVudCgnZGl2JywgJycsIHtcclxuICAgICAgaWQ6IHRhcmdldCxcclxuICAgICAgY2xzOiAnby1wb3BvdmVyJ1xyXG4gICAgfSk7XHJcbiAgICAkKCcjJyArICdvLWVkaXRvci1kcmF3JykuYWZ0ZXIocG9wb3Zlcik7XHJcbiAgICBzZXRBY3RpdmUoZmFsc2UpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYWRkRHJvcERvd24ob3B0aW9ucykge1xyXG4gICAgZHJvcERvd24ob3B0aW9ucy50YXJnZXQsIG9wdGlvbnMuc2VsZWN0T3B0aW9ucywge1xyXG4gICAgICBkYXRhQXR0cmlidXRlOiAnc2hhcGUnLFxyXG4gICAgICBhY3RpdmU6IG9wdGlvbnMuYWN0aXZlVG9vbFxyXG4gICAgfSk7XHJcbiAgICAkKCcjJyArIHRhcmdldCkub24oJ2NoYW5nZURyb3Bkb3duJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbihlKTtcclxuICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRWRpdG9yU2hhcGVzKGUuZGF0YUF0dHJpYnV0ZSk7XHJcbiAgICAgIGNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZExpc3RlbmVyKCkge1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZUVkaXQnLCBvbkNoYW5nZUVkaXQpO1xyXG4gICAgJChkb2N1bWVudCkub24oJ3RvZ2dsZUVkaXQnLCBvblRvZ2dsZUVkaXQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0QWN0aXZlKHN0YXRlKSB7XHJcbiAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgaWYgKGRyYXdUb29scy5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAkKCcjJyArIHRhcmdldCArICcgdWwnKS5yZW1vdmUoKTtcclxuICAgICAgICBhZGREcm9wRG93bihjcmVhdGVEcm9wRG93bk9wdGlvbnMoKSk7XHJcbiAgICAgICAgJCgnIycgKyB0YXJnZXQpLmFkZENsYXNzKGFjdGl2ZUNscyk7XHJcbiAgICAgICAgbWFwLm9uY2UoJ2NsaWNrJywgY2xvc2UpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBhY3RpdmUgPSBmYWxzZTtcclxuICAgICAgJCgnIycgKyB0YXJnZXQpLnJlbW92ZUNsYXNzKGFjdGl2ZUNscyk7XHJcbiAgICAgIG1hcC51bignY2xpY2snLCBjbG9zZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbG9zZSgpIHtcclxuICAgIGlmIChhY3RpdmUpIHtcclxuICAgICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uQ2hhbmdlRWRpdChlKSB7XHJcbiAgICBpZiAoZS50b29sID09PSAnZHJhdycgJiYgZS5hY3RpdmUgPT09IHRydWUpIHtcclxuICAgICAgc2V0RHJhd1Rvb2xzKGN1cnJlbnRMYXllcik7XHJcbiAgICAgIHNldEFjdGl2ZSh0cnVlKTtcclxuICAgIH0gZWxzZSBpZiAoZS50b29sID09PSAnZHJhdycgJiYgZS5hY3RpdmUgPT09IGZhbHNlKSB7XHJcbiAgICAgIHNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICB9XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25Ub2dnbGVFZGl0KGUpIHtcclxuICAgIGlmIChlLnRvb2wgPT09ICdlZGl0JyAmJiBlLmN1cnJlbnRMYXllcikge1xyXG4gICAgICBjdXJyZW50TGF5ZXIgPSBlLmN1cnJlbnRMYXllcjtcclxuICAgIH1cclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXREcmF3VG9vbHMobGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZhciBnZW9tZXRyeVR5cGU7XHJcbiAgICBkcmF3VG9vbHMgPSBsYXllci5nZXQoJ2RyYXdUb29scycpIHx8IFtdO1xyXG4gICAgaWYgKGxheWVyLmdldCgnZHJhd1Rvb2xzJykpIHtcclxuICAgICAgZHJhd1Rvb2xzID0gbGF5ZXIuZ2V0KCdkcmF3VG9vbHMnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGdlb21ldHJ5VHlwZSA9IGxheWVyLmdldCgnZ2VvbWV0cnlUeXBlJyk7XHJcbiAgICAgIGRyYXdUb29scyA9IGRlZmF1bHRUb29sc1tnZW9tZXRyeVR5cGVdID8gZGVmYXVsdFRvb2xzW2dlb21ldHJ5VHlwZV0uc2xpY2UoMCkgOiBbXTtcclxuICAgICAgZHJhd1Rvb2xzLnVuc2hpZnQoZ2VvbWV0cnlUeXBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZURyb3BEb3duT3B0aW9ucygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHRhcmdldDogdGFyZ2V0LFxyXG4gICAgICBzZWxlY3RPcHRpb25zOiBzZWxlY3Rpb25Nb2RlbChkcmF3VG9vbHMpLFxyXG4gICAgICBhY3RpdmVUb29sOiBkcmF3VG9vbHNbMF1cclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZWxlY3Rpb25Nb2RlbChkcmF3VG9vbHMpIHtcclxuICAgIHZhciBzZWxlY3RPcHRpb25zID0gZHJhd1Rvb2xzLm1hcChmdW5jdGlvbihkcmF3VG9vbCkge1xyXG4gICAgICB2YXIgb2JqID0ge307XHJcbiAgICAgIG9iai5uYW1lID0gdG9vbE5hbWVzW2RyYXdUb29sXTtcclxuICAgICAgb2JqLnZhbHVlID0gZHJhd1Rvb2w7XHJcbiAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBzZWxlY3RPcHRpb25zO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBlbWl0Q2hhbmdlRWRpdDogZW1pdENoYW5nZUVkaXQsXHJcbiAgZW1pdENoYW5nZUZlYXR1cmU6IGVtaXRDaGFuZ2VGZWF0dXJlLFxyXG4gIGVtaXRUb2dnbGVFZGl0OiBlbWl0VG9nZ2xlRWRpdCxcclxuICBlbWl0RW5hYmxlSW50ZXJhY3Rpb246IGVtaXRFbmFibGVJbnRlcmFjdGlvbixcclxuICBlbWl0RWRpdHNDaGFuZ2U6IGVtaXRFZGl0c0NoYW5nZSxcclxuICBlbWl0Q2hhbmdlRWRpdG9yU2hhcGVzOiBlbWl0Q2hhbmdlRWRpdG9yU2hhcGVzLFxyXG4gIGVtaXRDaGFuZ2VPZmZsaW5lRWRpdHM6IGVtaXRDaGFuZ2VPZmZsaW5lRWRpdHNcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdENoYW5nZUVkaXQodG9vbCwgc3RhdGUpIHtcclxuICAkLmV2ZW50LnRyaWdnZXIoe1xyXG4gICAgdHlwZTogJ2NoYW5nZUVkaXQnLFxyXG4gICAgdG9vbDogdG9vbCxcclxuICAgIGFjdGl2ZTogc3RhdGVcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdENoYW5nZUZlYXR1cmUoY2hhbmdlKSB7XHJcbiAgJC5ldmVudC50cmlnZ2VyKHtcclxuICAgIHR5cGU6ICdjaGFuZ2VGZWF0dXJlJyxcclxuICAgIGZlYXR1cmU6IGNoYW5nZS5mZWF0dXJlLFxyXG4gICAgbGF5ZXJOYW1lOiBjaGFuZ2UubGF5ZXJOYW1lLFxyXG4gICAgYWN0aW9uOiBjaGFuZ2UuYWN0aW9uLFxyXG4gICAgc3RhdHVzOiBjaGFuZ2Uuc3RhdHVzIHx8ICdwZW5kaW5nJ1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0VG9nZ2xlRWRpdCh0b29sLCBvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIGUgPSB7XHJcbiAgICB0eXBlOiAndG9nZ2xlRWRpdCcsXHJcbiAgICB0b29sOiB0b29sXHJcbiAgfTtcclxuICAkLmV4dGVuZChlLCBvcHRpb25zKTtcclxuICAkLmV2ZW50LnRyaWdnZXIoZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRFbmFibGVJbnRlcmFjdGlvbigpIHtcclxuICAkLmV2ZW50LnRyaWdnZXIoe1xyXG4gICAgdHlwZTogJ2VuYWJsZUludGVyYWN0aW9uJyxcclxuICAgIGludGVyYWN0aW9uOiAnZWRpdG9yJ1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0RWRpdHNDaGFuZ2UoZWRpdHMpIHtcclxuICAkLmV2ZW50LnRyaWdnZXIoe1xyXG4gICAgdHlwZTogJ2VkaXRzQ2hhbmdlJyxcclxuICAgIGVkaXRzOiBlZGl0c1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0Q2hhbmdlRWRpdG9yU2hhcGVzKHNoYXBlKSB7XHJcbiAgJC5ldmVudC50cmlnZ2VyKHtcclxuICAgIHR5cGU6ICdlZGl0b3JTaGFwZXMnLFxyXG4gICAgc2hhcGU6IHNoYXBlXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRDaGFuZ2VPZmZsaW5lRWRpdHMoZWRpdHMsIGxheWVyTmFtZSkge1xyXG4gICQuZXZlbnQudHJpZ2dlcih7XHJcbiAgICB0eXBlOiAnY2hhbmdlT2ZmbGluZUVkaXRzJyxcclxuICAgIGVkaXRzOiBlZGl0cyxcclxuICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lXHJcbiAgfSk7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNyZWF0ZUZvcm0ob2JqKSB7XHJcbiAgdmFyIGlkID0gb2JqLmVsSWQuc2xpY2UoMSk7XHJcbiAgdmFyIGNscyA9IG9iai5jbHMgfHwgJyc7XHJcbiAgY2xzICs9IGlkO1xyXG4gIGNscyArPSBvYmouaXNWaXNpYmxlID8gXCJcIiA6IFwiIG8taGlkZGVuXCI7XHJcbiAgdmFyIGxhYmVsID0gb2JqLnRpdGxlO1xyXG4gIHZhciB2YWwgPSBvYmouaXNWaXNpYmxlID8gb2JqLnZhbCA6ICcnO1xyXG4gIHZhciB0eXBlID0gb2JqLnR5cGU7XHJcbiAgdmFyIG1heExlbmd0aCA9IG9iai5tYXhMZW5ndGggPyAnIG1heGxlbmd0aD1cIicgKyBvYmoubWF4TGVuZ3RoICsgJ1wiICcgOiAnJztcclxuICB2YXIgZHJvcGRvd25PcHRpb25zID0gb2JqLm9wdGlvbnMgfHwgW107XHJcbiAgdmFyIGVsO1xyXG4gIHZhciBjaGVja2VkO1xyXG4gIHZhciBmaXJzdE9wdGlvbjtcclxuICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgIGNhc2UgJ3RleHQnOlxyXG4gICAgICBlbCA9ICc8ZGl2PjxsYWJlbD4nICsgbGFiZWwgKyAnPC9sYWJlbD48YnI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgaWQ9XCInICsgaWQgKyAnXCIgdmFsdWU9XCInICsgdmFsICsgJ1wiJyArIG1heExlbmd0aCArICc+PC9kaXY+JztcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICd0ZXh0YXJlYSc6XHJcbiAgICAgIGVsID0gJzxkaXY+PGxhYmVsPicgKyBsYWJlbCArICc8L2xhYmVsPjxicj48dGV4dGFyZWEgaWQ9XCInICsgaWQgKyAnXCInICsgbWF4TGVuZ3RoICsgJ3Jvd3M9XCIzXCI+JyArIHZhbCArICc8L3RleHRhcmVhPjwvZGl2Pic7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnY2hlY2tib3gnOlxyXG4gICAgICBjaGVja2VkID0gdmFsID8gJyBjaGVja2VkJyA6ICcnO1xyXG4gICAgICBlbCA9ICc8ZGl2IGNsYXNzPVwiby1mb3JtLWNoZWNrYm94XCI+PGxhYmVsPicgKyBsYWJlbCArICc8L2xhYmVsPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cIicgKyBpZCArICdcIiB2YWx1ZT1cIicgKyB2YWwgKyAnXCInICsgY2hlY2tlZCArICc+PC9kaXY+JztcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdkcm9wZG93bic6XHJcbiAgICAgIGZpcnN0T3B0aW9uO1xyXG4gICAgICBpZiAodmFsKSB7XHJcbiAgICAgICAgZmlyc3RPcHRpb24gPSAnPG9wdGlvbiB2YWx1ZT1cIicgKyB2YWwgKyAnXCIgc2VsZWN0ZWQ+JyArIHZhbCArICc8L29wdGlvbj4nO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGZpcnN0T3B0aW9uID0gJzxvcHRpb24gdmFsdWU9XCJcIiBzZWxlY3RlZD5Ww6Rsajwvb3B0aW9uPic7XHJcbiAgICAgIH1cclxuICAgICAgZWwgPSAnPGRpdiBjbGFzcz1cIicgKyBjbHMgKyAnXCI+PGxhYmVsPicgKyBsYWJlbCArICc8L2xhYmVsPjxicj48c2VsZWN0IGlkPScgKyBpZCArICc+JyArIGZpcnN0T3B0aW9uO1xyXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRyb3Bkb3duT3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGVsICs9ICc8b3B0aW9uIHZhbHVlPVwiJyArIGRyb3Bkb3duT3B0aW9uc1tpXSArICdcIj4nICsgZHJvcGRvd25PcHRpb25zW2ldICsgJzwvb3B0aW9uPic7XHJcbiAgICAgIH1cclxuICAgICAgZWwgKz0gJzwvc2VsZWN0PjwvZGl2Pic7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnaW1hZ2UnOlxyXG4gICAgICB2YXIgaW1hZ2VDbGFzcyA9IHZhbCA/ICcnIDogJ28taGlkZGVuJztcclxuICAgICAgZWwgPSAnPGRpdiBjbGFzcz1cIicgKyBjbHMgKyAnXCI+PGxhYmVsPicgKyBsYWJlbCArICc8L2xhYmVsPjxicj4nO1xyXG4gICAgICBlbCArPSAnPGltZyBzcmM9XCInICsgdmFsICsgJ1wiIGlkPVwiaW1hZ2UtdXBsb2FkXCIgY2xhc3M9XCInICsgaW1hZ2VDbGFzcyArICdcIi8+JztcclxuICAgICAgZWwgKz0gJzxpbnB1dCB0eXBlPVwiZmlsZVwiIGlkPVwiJyArIGlkICsgJ1wiIHZhbHVlPVwiJyArIHZhbCArICdcIiBhY2NlcHQ9XCJpbWFnZS8qXCI+JztcclxuICAgICAgZWwgKz0gJzxpbnB1dCBpZD1cIm8tZGVsZXRlLWltYWdlLWJ1dHRvblwiIGNsYXNzPVwiJyArIGltYWdlQ2xhc3MgKyAnXCIgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiVGEgYm9ydCBiaWxkXCI+JztcclxuICAgICAgZWwgKz0gJzwvZGl2Pic7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxuICByZXR1cm4gZWw7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIG1vZGFsID0gcmVxdWlyZSgnLi4vbW9kYWwnKTtcclxudmFyIGZlYXR1cmVJbmZvID0gcmVxdWlyZSgnLi4vZmVhdHVyZWluZm8nKTtcclxudmFyIGVkaXRzU3RvcmUgPSByZXF1aXJlKCcuL2VkaXRzc3RvcmUnKSgpO1xyXG52YXIgZ2VuZXJhdGVVVUlEID0gcmVxdWlyZSgnLi4vdXRpbHMvZ2VuZXJhdGV1dWlkJyk7XHJcbnZhciB0cmFuc2FjdGlvbkhhbmRsZXIgPSByZXF1aXJlKCcuL3RyYW5zYWN0aW9uaGFuZGxlcicpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZWRpdGRpc3BhdGNoZXInKTtcclxudmFyIGVkaXRGb3JtID0gcmVxdWlyZSgnLi9lZGl0Zm9ybScpO1xyXG52YXIgaW1hZ2VyZXNpemVyID0gcmVxdWlyZSgnLi4vdXRpbHMvaW1hZ2VyZXNpemVyJyk7XHJcbnZhciBnZXRJbWFnZU9yaWVudGF0aW9uID0gcmVxdWlyZSgnLi4vdXRpbHMvZ2V0aW1hZ2VvcmllbnRhdGlvbicpO1xyXG52YXIgc2hhcGVzID0gcmVxdWlyZSgnLi9zaGFwZXMnKTtcclxuXHJcbnZhciBlZGl0TGF5ZXJzID0ge307XHJcbnZhciBhdXRvU2F2ZSA9IHVuZGVmaW5lZDtcclxudmFyIGF1dG9Gb3JtID0gdW5kZWZpbmVkO1xyXG52YXIgZWRpdFNvdXJjZSA9IHVuZGVmaW5lZDtcclxudmFyIGdlb21ldHJ5VHlwZSA9IHVuZGVmaW5lZDtcclxudmFyIGdlb21ldHJ5TmFtZSA9IHVuZGVmaW5lZDtcclxudmFyIG1hcCA9IHVuZGVmaW5lZDtcclxudmFyIGN1cnJlbnRMYXllciA9IHVuZGVmaW5lZDtcclxudmFyIGVkaXRhYmxlTGF5ZXJzID0gdW5kZWZpbmVkO1xyXG52YXIgYXR0cmlidXRlcyA9IHVuZGVmaW5lZDtcclxudmFyIHRpdGxlID0gdW5kZWZpbmVkO1xyXG52YXIgZHJhdyA9IHVuZGVmaW5lZDtcclxudmFyIGhhc0RyYXcgPSB1bmRlZmluZWQ7XHJcbnZhciBoYXNBdHRyaWJ1dGUgPSB1bmRlZmluZWQ7XHJcbnZhciBoYXNTbmFwID0gdW5kZWZpbmVkO1xyXG52YXIgc2VsZWN0ID0gdW5kZWZpbmVkO1xyXG52YXIgbW9kaWZ5ID0gdW5kZWZpbmVkO1xyXG52YXIgc25hcCA9IHVuZGVmaW5lZDtcclxudmFyIHRvb2xzID0gdW5kZWZpbmVkO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgbWFwID0gdmlld2VyLmdldE1hcCgpO1xyXG4gIGN1cnJlbnRMYXllciA9IG9wdGlvbnMuY3VycmVudExheWVyO1xyXG4gIGVkaXRhYmxlTGF5ZXJzID0gb3B0aW9ucy5lZGl0YWJsZUxheWVycztcclxuICB0b29scyA9IG9wdGlvbnMuZHJhd1Rvb2xzIHx8IFtdO1xyXG5cclxuICAvL3NldCBlZGl0IHByb3BlcnRpZXMgZm9yIGVkaXRhYmxlIGxheWVyc1xyXG4gIGVkaXRMYXllcnMgPSBzZXRFZGl0UHJvcHMob3B0aW9ucyk7XHJcbiAgZWRpdGFibGVMYXllcnMuZm9yRWFjaChmdW5jdGlvbihsYXllck5hbWUpIHtcclxuICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmVyaWZ5TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIGlmIChsYXllck5hbWUgPT09IGN1cnJlbnRMYXllciAmJiBvcHRpb25zLmlzQWN0aXZlKSB7XHJcbiAgICAgIGRpc3BhdGNoZXIuZW1pdEVuYWJsZUludGVyYWN0aW9uKCk7XHJcbiAgICAgIHNldEVkaXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBhdXRvU2F2ZSA9IG9wdGlvbnMuYXV0b1NhdmU7XHJcbiAgYXV0b0Zvcm0gPSBvcHRpb25zLmF1dG9Gb3JtO1xyXG4gICQoZG9jdW1lbnQpLm9uKCd0b2dnbGVFZGl0Jywgb25Ub2dnbGVFZGl0KTtcclxuICAkKGRvY3VtZW50KS5vbignY2hhbmdlRWRpdCcsIG9uQ2hhbmdlRWRpdCk7XHJcbiAgJChkb2N1bWVudCkub24oJ2VkaXRvclNoYXBlcycsIG9uQ2hhbmdlU2hhcGUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRFZGl0TGF5ZXIobGF5ZXJOYW1lKSB7XHJcbiAgY3VycmVudExheWVyID0gbGF5ZXJOYW1lO1xyXG4gIHNldEludGVyYWN0aW9ucygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRJbnRlcmFjdGlvbnMoZHJhd1R5cGUpIHtcclxuICB2YXIgZWRpdExheWVyID0gZWRpdExheWVyc1tjdXJyZW50TGF5ZXJdO1xyXG4gIHZhciBkcmF3T3B0aW9ucztcclxuICBlZGl0U291cmNlID0gZWRpdExheWVyLmdldFNvdXJjZSgpO1xyXG4gIGF0dHJpYnV0ZXMgPSBlZGl0TGF5ZXIuZ2V0KCdhdHRyaWJ1dGVzJyk7XHJcbiAgdGl0bGUgPSBlZGl0TGF5ZXIuZ2V0KCd0aXRsZScpIHx8ICdJbmZvcm1hdGlvbic7XHJcbiAgZHJhd09wdGlvbnMgPSB7XHJcbiAgICBzb3VyY2U6IGVkaXRTb3VyY2UsXHJcbiAgICB0eXBlOiBlZGl0TGF5ZXIuZ2V0KCdnZW9tZXRyeVR5cGUnKSxcclxuICAgIGdlb21ldHJ5TmFtZTogZWRpdExheWVyLmdldCgnZ2VvbWV0cnlOYW1lJylcclxuICB9O1xyXG4gIGlmIChkcmF3VHlwZSkge1xyXG4gICAgJC5leHRlbmQoZHJhd09wdGlvbnMsIHNoYXBlcyhkcmF3VHlwZSkpO1xyXG4gIH1cclxuICByZW1vdmVJbnRlcmFjdGlvbnMoKTtcclxuICBkcmF3ID0gbmV3IG9sLmludGVyYWN0aW9uLkRyYXcoZHJhd09wdGlvbnMpO1xyXG4gIGhhc0RyYXcgPSBmYWxzZTtcclxuICBoYXNBdHRyaWJ1dGUgPSBmYWxzZTtcclxuICBzZWxlY3QgPSBuZXcgb2wuaW50ZXJhY3Rpb24uU2VsZWN0KHtcclxuICAgIGxheWVyczogW2VkaXRMYXllcl1cclxuICB9KTtcclxuICBtb2RpZnkgPSBuZXcgb2wuaW50ZXJhY3Rpb24uTW9kaWZ5KHtcclxuICAgIGZlYXR1cmVzOiBzZWxlY3QuZ2V0RmVhdHVyZXMoKVxyXG4gIH0pO1xyXG4gIG1hcC5hZGRJbnRlcmFjdGlvbihzZWxlY3QpO1xyXG4gIG1hcC5hZGRJbnRlcmFjdGlvbihtb2RpZnkpO1xyXG4gIG1hcC5hZGRJbnRlcmFjdGlvbihkcmF3KTtcclxuICBtb2RpZnkub24oJ21vZGlmeWVuZCcsIG9uTW9kaWZ5RW5kLCB0aGlzKTtcclxuICBkcmF3Lm9uKCdkcmF3ZW5kJywgb25EcmF3RW5kLCB0aGlzKTtcclxuICBzZXRBY3RpdmUoKTtcclxuXHJcbiAgLy9JZiBzbmFwIHNob3VsZCBiZSBhY3RpdmUgdGhlbiBhZGQgc25hcCBpbnRlcm5hY3Rpb25zIGZvciBhbGwgc25hcCBsYXllcnNcclxuICBoYXNTbmFwID0gZWRpdExheWVyLmdldCgnc25hcCcpO1xyXG4gIGlmIChoYXNTbmFwKSB7XHJcbiAgICB2YXIgc2VsZWN0aW9uU291cmNlID0gZmVhdHVyZUluZm8uZ2V0U2VsZWN0aW9uTGF5ZXIoKS5nZXRTb3VyY2UoKTtcclxuICAgIHZhciBzbmFwU291cmNlcyA9IGVkaXRMYXllci5nZXQoJ3NuYXBMYXllcnMnKSA/IGdldFNuYXBTb3VyY2VzKGVkaXRMYXllci5nZXQoJ3NuYXBMYXllcnMnKSkgOiBbZWRpdExheWVyLmdldCgnc291cmNlJyldO1xyXG4gICAgc25hcFNvdXJjZXMucHVzaChzZWxlY3Rpb25Tb3VyY2UpO1xyXG4gICAgc25hcCA9IGFkZFNuYXBJbnRlcmFjdGlvbihzbmFwU291cmNlcyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB2ZXJpZnlMYXllcihsYXllck5hbWUpIHtcclxuICBpZiAoIShlZGl0TGF5ZXJzW2xheWVyTmFtZV0uZ2V0KCdnZW9tZXRyeVR5cGUnKSkpIHtcclxuICAgIGFkZEZlYXR1cmVBZGRMaXN0ZW5lcihsYXllck5hbWUpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc2V0R2VvbWV0cnlQcm9wcyhsYXllcikge1xyXG4gIHZhciBsYXllck5hbWUgPSBsYXllci5nZXQoJ25hbWUnKTtcclxuICBlZGl0TGF5ZXJzW2xheWVyTmFtZV0uc2V0KCdnZW9tZXRyeVR5cGUnLCBsYXllci5nZXRTb3VyY2UoKS5nZXRGZWF0dXJlcygpWzBdLmdldEdlb21ldHJ5KCkuZ2V0VHlwZSgpKTtcclxuICBpZiAobGF5ZXJOYW1lID09PSBjdXJyZW50TGF5ZXIpIHtcclxuICAgIHNldEVkaXRMYXllcihsYXllck5hbWUpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkRmVhdHVyZUFkZExpc3RlbmVyKGxheWVyTmFtZSkge1xyXG4gIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gIGxheWVyLmdldFNvdXJjZSgpLm9uY2UoJ2FkZGZlYXR1cmUnLCBmdW5jdGlvbihlKSB7XHJcbiAgICBzZXRHZW9tZXRyeVByb3BzKGxheWVyKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0RWRpdFByb3BzKG9wdGlvbnMpIHtcclxuICB2YXIgaW5pdGlhbFZhbHVlID0ge307XHJcbiAgdmFyIHJlc3VsdCA9IGVkaXRhYmxlTGF5ZXJzLnJlZHVjZShmdW5jdGlvbihsYXllclByb3BzLCBsYXllck5hbWUpIHtcclxuICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmFyIHNuYXAgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdzbmFwJykgPyBvcHRpb25zLnNuYXAgOiB0cnVlO1xyXG4gICAgdmFyIHNuYXBMYXllcnMgPSBvcHRpb25zLnNuYXBMYXllcnMgfHwgZWRpdGFibGVMYXllcnM7XHJcbiAgICBsYXllci5zZXQoJ3NuYXAnLCBzbmFwKTtcclxuICAgIGxheWVyLnNldCgnc25hcExheWVycycsIHNuYXBMYXllcnMpO1xyXG4gICAgbGF5ZXJQcm9wc1tsYXllck5hbWVdID0gbGF5ZXI7XHJcbiAgICByZXR1cm4gbGF5ZXJQcm9wcztcclxuICB9LCBpbml0aWFsVmFsdWUpO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzQWN0aXZlKCkge1xyXG4gIGlmIChtb2RpZnkgPT09IHVuZGVmaW5lZCB8fCBzZWxlY3QgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uRGVsZXRlU2VsZWN0ZWQoKSB7XHJcbiAgdmFyIGZlYXR1cmVzID0gc2VsZWN0LmdldEZlYXR1cmVzKCk7XHJcblxyXG4gIC8vIE1ha2Ugc3VyZSBhbGwgZmVhdHVyZXMgYXJlIGxvYWRlZCBpbiB0aGUgc291cmNlXHJcbiAgZWRpdFNvdXJjZSA9IGVkaXRMYXllcnNbY3VycmVudExheWVyXS5nZXRTb3VyY2UoKTtcclxuICBpZiAoZmVhdHVyZXMuZ2V0TGVuZ3RoKCkgPT09IDEpIHtcclxuICAgIHZhciBmZWF0dXJlID0gZmVhdHVyZXMuaXRlbSgwKTtcclxuICAgIHZhciByID0gY29uZmlybSgnw4RyIGR1IHPDpGtlciBww6UgYXR0IGR1IHZpbGwgdGEgYm9ydCBkZXQgaMOkciBvYmpla3RldD8nKTtcclxuICAgIGlmIChyID09PSB0cnVlKSB7XHJcbiAgICAgIHNhdmVGZWF0dXJlKHtcclxuICAgICAgICBmZWF0dXJlOiBmZWF0dXJlLFxyXG4gICAgICAgIGxheWVyTmFtZTogY3VycmVudExheWVyLFxyXG4gICAgICAgIGFjdGlvbjogJ2RlbGV0ZSdcclxuICAgICAgfSk7XHJcbiAgICAgIHNlbGVjdC5nZXRGZWF0dXJlcygpLmNsZWFyKCk7XHJcbiAgICAgIGVkaXRTb3VyY2UucmVtb3ZlRmVhdHVyZShlZGl0U291cmNlLmdldEZlYXR1cmVCeUlkKGZlYXR1cmUuZ2V0SWQoKSkpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gb25Nb2RpZnlFbmQoZXZ0KSB7XHJcbiAgdmFyIGZlYXR1cmUgPSBldnQuZmVhdHVyZXMuaXRlbSgwKTtcclxuICBzYXZlRmVhdHVyZSh7XHJcbiAgICBmZWF0dXJlOiBmZWF0dXJlLFxyXG4gICAgbGF5ZXJOYW1lOiBjdXJyZW50TGF5ZXIsXHJcbiAgICBhY3Rpb246ICd1cGRhdGUnXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uRHJhd0VuZChldnQpIHtcclxuICB2YXIgZmVhdHVyZSA9IGV2dC5mZWF0dXJlO1xyXG4gIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihjdXJyZW50TGF5ZXIpO1xyXG4gIHZhciBhdHRyaWJ1dGVzID0gZ2V0RGVmYXVsdFZhbHVlcyhsYXllci5nZXQoJ2F0dHJpYnV0ZXMnKSk7XHJcbiAgZmVhdHVyZS5zZXRQcm9wZXJ0aWVzKGF0dHJpYnV0ZXMpO1xyXG4gIGZlYXR1cmUuc2V0SWQoZ2VuZXJhdGVVVUlEKCkpO1xyXG4gIGVkaXRTb3VyY2UuYWRkRmVhdHVyZShmZWF0dXJlKTtcclxuICBzZXRBY3RpdmUoKTtcclxuICBoYXNEcmF3ID0gZmFsc2U7XHJcbiAgc2F2ZUZlYXR1cmUoe1xyXG4gICAgZmVhdHVyZTogZmVhdHVyZSxcclxuICAgIGxheWVyTmFtZTogY3VycmVudExheWVyLFxyXG4gICAgYWN0aW9uOiAnaW5zZXJ0J1xyXG4gIH0pO1xyXG4gIGRpc3BhdGNoZXIuZW1pdENoYW5nZUVkaXQoJ2RyYXcnLCBmYWxzZSk7XHJcbiAgaWYgKGF1dG9Gb3JtKSB7XHJcbiAgICBlZGl0QXR0cmlidXRlcyhmZWF0dXJlKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNhbmNlbERyYXcoKSB7XHJcbiAgc2V0QWN0aXZlKCk7XHJcbiAgaGFzRHJhdyA9IGZhbHNlO1xyXG4gIGRpc3BhdGNoZXIuZW1pdENoYW5nZUVkaXQoJ2RyYXcnLCBmYWxzZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQ2hhbmdlU2hhcGUoZSkge1xyXG4gIHNldEludGVyYWN0aW9ucyhlLnNoYXBlKTtcclxuICBzdGFydERyYXcoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FuY2VsQXR0cmlidXRlKCkge1xyXG4gIG1vZGFsLmNsb3NlTW9kYWwoKTtcclxuICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VFZGl0KCdhdHRyaWJ1dGUnLCBmYWxzZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQXR0cmlidXRlc1NhdmUoZmVhdHVyZSwgYXR0cmlidXRlcykge1xyXG4gICQoJyNvLXNhdmUtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgdmFyIGVkaXRFbCA9IHt9O1xyXG4gICAgdmFyIGZpbGVSZWFkZXI7XHJcbiAgICB2YXIgaW1hZ2VEYXRhO1xyXG4gICAgdmFyIGlucHV0O1xyXG4gICAgdmFyIGZpbGU7XHJcbiAgICB2YXIgb3JpZW50YXRpb247XHJcblxyXG4gICAgLy9SZWFkIHZhbHVlcyBmcm9tIGZvcm1cclxuICAgIGF0dHJpYnV0ZXMuZm9yRWFjaChmdW5jdGlvbihhdHRyaWJ1dGUpIHtcclxuXHJcbiAgICAgIC8vR2V0IHRoZSBpbnB1dCBjb250YWluZXIgY2xhc3NcclxuICAgICAgdmFyIGNvbnRhaW5lckNsYXNzID0gJy4nICsgYXR0cmlidXRlLmVsSWQuc2xpY2UoMSk7XHJcblxyXG4gICAgICAvLyBJZiBoaWRkZW4gZWxlbWVudCBpdCBzaG91bGQgYmUgZXhjbHVkZWRcclxuICAgICAgaWYgKCQoY29udGFpbmVyQ2xhc3MpLmhhc0NsYXNzKCdvLWhpZGRlbicpID09PSBmYWxzZSkge1xyXG5cclxuICAgICAgICAvL0NoZWNrIGlmIGNoZWNrYm94LiBJZiBjaGVja2JveCByZWFkIHN0YXRlLlxyXG4gICAgICAgIGlmICgkKGF0dHJpYnV0ZS5lbElkKS5hdHRyKCd0eXBlJykgPT09ICdjaGVja2JveCcpIHtcclxuICAgICAgICAgIGVkaXRFbFthdHRyaWJ1dGUubmFtZV0gPSAkKGF0dHJpYnV0ZS5lbElkKS5pcygnOmNoZWNrZWQnKSA/IDEgOiAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9SZWFkIHZhbHVlIGZyb20gaW5wdXQgdGV4dCwgdGV4dGFyZWEgb3Igc2VsZWN0XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICBlZGl0RWxbYXR0cmlidXRlLm5hbWVdID0gJChhdHRyaWJ1dGUuZWxJZCkudmFsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcblxyXG4gICAgICAvL0NoZWNrIGlmIGZpbGUuIElmIGZpbGUsIHJlYWQgYW5kIHRyaWdnZXIgcmVzaXplXHJcbiAgICAgIGlmICgkKGF0dHJpYnV0ZS5lbElkKS5hdHRyKCd0eXBlJykgPT09ICdmaWxlJykge1xyXG4gICAgICAgIGlucHV0ID0gJChhdHRyaWJ1dGUuZWxJZClbMF07XHJcbiAgICAgICAgZmlsZSA9IGlucHV0LmZpbGVzWzBdO1xyXG5cclxuICAgICAgICBpZiAoZmlsZSkge1xyXG4gICAgICAgICAgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBnZXRJbWFnZU9yaWVudGF0aW9uKGZpbGUsIGZ1bmN0aW9uKG9yaWVudGF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgaW1hZ2VyZXNpemVyKGZpbGVSZWFkZXIucmVzdWx0LCBhdHRyaWJ1dGUsIG9yaWVudGF0aW9uLCBmdW5jdGlvbihyZXNpemVkKSB7XHJcbiAgICAgICAgICAgICAgICBlZGl0RWxbYXR0cmlidXRlLm5hbWVdID0gcmVzaXplZDtcclxuICAgICAgICAgICAgICAgICQoZG9jdW1lbnQpLnRyaWdnZXIoJ2ltYWdlcmVzaXplZCcpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGVkaXRFbFthdHRyaWJ1dGUubmFtZV0gPSAkKGF0dHJpYnV0ZS5lbElkKS5hdHRyKCd2YWx1ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGZpbGVSZWFkZXIgJiYgZmlsZVJlYWRlci5yZWFkeVN0YXRlID09IDEpIHtcclxuICAgICAgJChkb2N1bWVudCkub24oJ2ltYWdlcmVzaXplZCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGF0dHJpYnV0ZXNTYXZlSGFuZGxlcihmZWF0dXJlLCBlZGl0RWwpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGF0dHJpYnV0ZXNTYXZlSGFuZGxlcihmZWF0dXJlLCBlZGl0RWwpO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZGFsLmNsb3NlTW9kYWwoKTtcclxuICAgICQoJyNvLXNhdmUtYnV0dG9uJykuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhdHRyaWJ1dGVzU2F2ZUhhbmRsZXIoZmVhdHVyZSwgZm9ybUVsKSB7XHJcblxyXG4gIC8vZ2V0IERPTSB2YWx1ZXMgYW5kIHNldCBhdHRyaWJ1dGUgdmFsdWVzIHRvIGZlYXR1cmVcclxuICBhdHRyaWJ1dGVzLmZvckVhY2goZnVuY3Rpb24oYXR0cmlidXRlKSB7XHJcbiAgICBpZiAoZm9ybUVsLmhhc093blByb3BlcnR5KGF0dHJpYnV0ZS5uYW1lKSkge1xyXG4gICAgICBmZWF0dXJlLnNldChhdHRyaWJ1dGUubmFtZSwgZm9ybUVsW2F0dHJpYnV0ZS5uYW1lXSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgc2F2ZUZlYXR1cmUoe1xyXG4gICAgZmVhdHVyZTogZmVhdHVyZSxcclxuICAgIGxheWVyTmFtZTogY3VycmVudExheWVyLFxyXG4gICAgYWN0aW9uOiAndXBkYXRlJ1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW1vdmVJbnRlcmFjdGlvbnMoKSB7XHJcbiAgaWYgKGlzQWN0aXZlKCkpIHtcclxuICAgIG1hcC5yZW1vdmVJbnRlcmFjdGlvbihtb2RpZnkpO1xyXG4gICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKHNlbGVjdCk7XHJcbiAgICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24oZHJhdyk7XHJcbiAgICBpZiAoc25hcCkge1xyXG4gICAgICBzbmFwLmZvckVhY2goZnVuY3Rpb24oc25hcEludGVyYWN0aW9uKSB7XHJcbiAgICAgICAgbWFwLnJlbW92ZUludGVyYWN0aW9uKHNuYXBJbnRlcmFjdGlvbik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG1vZGlmeSA9IHVuZGVmaW5lZDtcclxuICAgIHNlbGVjdCA9IHVuZGVmaW5lZDtcclxuICAgIGRyYXcgPSB1bmRlZmluZWQ7XHJcbiAgICBzbmFwID0gdW5kZWZpbmVkO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gc3RhcnREcmF3KCkge1xyXG4gIGlmIChoYXNEcmF3ICE9PSB0cnVlICYmIGlzQWN0aXZlKCkpIHtcclxuICAgIHNldEFjdGl2ZSgnZHJhdycpO1xyXG4gICAgaGFzRHJhdyA9IHRydWU7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VFZGl0KCdkcmF3JywgdHJ1ZSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRMaXN0ZW5lcigpIHtcclxuICB2YXIgZm4gPSBmdW5jdGlvbihvYmopIHtcclxuICAgICQob2JqLmVsRGVwZW5kZW5jeUlkKS5vbihvYmouZXZlbnRUeXBlLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgIHZhciBjb250YWluZXJDbGFzcyA9ICcuJyArIG9iai5lbElkLnNsaWNlKDEpO1xyXG4gICAgICBpZiAoJChvYmouZWxEZXBlbmRlbmN5SWQgKyAoJyBvcHRpb246c2VsZWN0ZWQnKSkudGV4dCgpID09PSBvYmoucmVxdWlyZWRWYWwpIHtcclxuICAgICAgICAkKGNvbnRhaW5lckNsYXNzKS5yZW1vdmVDbGFzcygnby1oaWRkZW4nKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKGNvbnRhaW5lckNsYXNzKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZm47XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFkZEltYWdlTGlzdGVuZXIoKSB7XHJcbiAgdmFyIGZuID0gZnVuY3Rpb24ob2JqKSB7XHJcbiAgICB2YXIgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICB2YXIgY29udGFpbmVyQ2xhc3MgPSAnLicgKyBvYmouZWxJZC5zbGljZSgxKTtcclxuICAgICQob2JqLmVsSWQpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICQoY29udGFpbmVyQ2xhc3MgKyAnIGltZycpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG4gICAgICAkKGNvbnRhaW5lckNsYXNzICsgJyBpbnB1dFt0eXBlPWJ1dHRvbl0nKS5yZW1vdmVDbGFzcygnby1oaWRkZW4nKTtcclxuXHJcbiAgICAgIGlmICh0aGlzLmZpbGVzICYmIHRoaXMuZmlsZXNbMF0pIHtcclxuICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAkKGNvbnRhaW5lckNsYXNzICsgJyBpbWcnKS5hdHRyKCdzcmMnLCBlLnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGZpbGVSZWFkZXIucmVhZEFzRGF0YVVSTCh0aGlzLmZpbGVzWzBdKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJChjb250YWluZXJDbGFzcyArICcgaW5wdXRbdHlwZT1idXR0b25dJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAkKG9iai5lbElkKS5hdHRyKCd2YWx1ZScsICcnKTtcclxuICAgICAgJChjb250YWluZXJDbGFzcyArICcgaW1nJykuYWRkQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJldHVybiBmbjtcclxufVxyXG5cclxuZnVuY3Rpb24gb25Ub2dnbGVFZGl0KGUpIHtcclxuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIGlmIChlLnRvb2wgPT09ICdkcmF3Jykge1xyXG4gICAgaWYgKGhhc0RyYXcgPT09IGZhbHNlKSB7XHJcbiAgICAgIHNldEludGVyYWN0aW9ucygpO1xyXG4gICAgICBzdGFydERyYXcoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhbmNlbERyYXcoKTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGUudG9vbCA9PT0gJ2F0dHJpYnV0ZScpIHtcclxuICAgIGlmIChoYXNBdHRyaWJ1dGUgPT09IGZhbHNlKSB7XHJcbiAgICAgIGVkaXRBdHRyaWJ1dGVzKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjYW5jZWxBdHRyaWJ1dGUoKTtcclxuICAgIH1cclxuICB9IGVsc2UgaWYgKGUudG9vbCA9PT0gJ2RlbGV0ZScpIHtcclxuICAgICAgb25EZWxldGVTZWxlY3RlZCgpO1xyXG4gIH0gZWxzZSBpZiAoZS50b29sID09PSAnZWRpdCcpIHtcclxuICAgICAgc2V0RWRpdExheWVyKGUuY3VycmVudExheWVyKTtcclxuICB9IGVsc2UgaWYgKGUudG9vbCA9PT0gJ2NhbmNlbCcpIHtcclxuICAgICAgcmVtb3ZlSW50ZXJhY3Rpb25zKCk7XHJcbiAgfSBlbHNlIGlmIChlLnRvb2wgPT09ICdzYXZlJykge1xyXG4gICAgICBzYXZlRmVhdHVyZXMoKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uQ2hhbmdlRWRpdChlKSB7XHJcbiAgaWYgKGUudG9vbCE9PSAnZHJhdycgJiYgZS5hY3RpdmUpIHtcclxuICAgIGNhbmNlbERyYXcoKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFNuYXBTb3VyY2VzKGxheWVycykge1xyXG4gIHZhciBzb3VyY2VzID0gbGF5ZXJzLm1hcChmdW5jdGlvbihsYXllcikge1xyXG4gICAgcmV0dXJuIHZpZXdlci5nZXRMYXllcihsYXllcikuZ2V0U291cmNlKCk7XHJcbiAgfSk7XHJcblxyXG4gIHJldHVybiBzb3VyY2VzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRTbmFwSW50ZXJhY3Rpb24oc291cmNlcykge1xyXG4gIHZhciBzbmFwSW50ZXJhY3Rpb25zID0gW107XHJcbiAgc291cmNlcy5mb3JFYWNoKGZ1bmN0aW9uKHNvdXJjZSkge1xyXG4gICAgdmFyIGludGVyYWN0aW9uID0gbmV3IG9sLmludGVyYWN0aW9uLlNuYXAoe1xyXG4gICAgICBzb3VyY2U6IHNvdXJjZVxyXG4gICAgfSk7XHJcbiAgICBzbmFwSW50ZXJhY3Rpb25zLnB1c2goaW50ZXJhY3Rpb24pO1xyXG4gICAgbWFwLmFkZEludGVyYWN0aW9uKGludGVyYWN0aW9uKTtcclxuICB9KTtcclxuICByZXR1cm4gc25hcEludGVyYWN0aW9ucztcclxufVxyXG5cclxuZnVuY3Rpb24gc2V0QWN0aXZlKGVkaXRUeXBlKSB7XHJcbiAgc3dpdGNoIChlZGl0VHlwZSkge1xyXG4gICAgY2FzZSAnbW9kaWZ5JzpcclxuICAgICAgZHJhdy5zZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgICBtb2RpZnkuc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgICBzZWxlY3Quc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2RyYXcnOlxyXG4gICAgICBkcmF3LnNldEFjdGl2ZSh0cnVlKTtcclxuICAgICAgbW9kaWZ5LnNldEFjdGl2ZSh0cnVlKTtcclxuICAgICAgc2VsZWN0LnNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgZHJhdy5zZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgICBoYXNEcmF3ID0gZmFsc2U7XHJcbiAgICAgIG1vZGlmeS5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgIHNlbGVjdC5zZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgIGJyZWFrO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZWRpdEF0dHJpYnV0ZXMoZmVhdHVyZSkge1xyXG4gIHZhciBhdHRyaWJ1dGVPYmplY3RzO1xyXG4gIHZhciBmZWF0dXJlcztcclxuXHJcbiAgLy9HZXQgYXR0cmlidXRlcyBmcm9tIHRoZSBjcmVhdGVkLCBvciB0aGUgc2VsZWN0ZWQsIGZlYXR1cmUgYW5kIGZpbGwgRE9NIGVsZW1lbnRzIHdpdGggdGhlIHZhbHVlc1xyXG4gIGlmIChmZWF0dXJlKSB7XHJcbiAgICBmZWF0dXJlcyA9IG5ldyBvbC5Db2xsZWN0aW9uKCk7XHJcbiAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBmZWF0dXJlcyA9IHNlbGVjdC5nZXRGZWF0dXJlcygpO1xyXG4gIH1cclxuICBpZiAoZmVhdHVyZXMuZ2V0TGVuZ3RoKCkgPT09IDEpIHtcclxuICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUVkaXQoJ2F0dHJpYnV0ZScsIHRydWUpO1xyXG4gICAgdmFyIGZlYXR1cmUgPSBmZWF0dXJlcy5pdGVtKDApO1xyXG4gICAgaWYgKGF0dHJpYnV0ZXMubGVuZ3RoID4gMCkge1xyXG5cclxuICAgICAgLy9DcmVhdGUgYW4gYXJyYXkgb2YgZGVmaW5lZCBhdHRyaWJ1dGVzIGFuZCBjb3JyZXNwb25kaW5nIHZhbHVlcyBmcm9tIHNlbGVjdGVkIGZlYXR1cmVcclxuICAgICAgYXR0cmlidXRlT2JqZWN0cyA9IGF0dHJpYnV0ZXMubWFwKGZ1bmN0aW9uKGF0dHJpYnV0ZU9iamVjdCkge1xyXG4gICAgICAgIHZhciBvYmogPSB7fTtcclxuICAgICAgICAkLmV4dGVuZChvYmosIGF0dHJpYnV0ZU9iamVjdCk7XHJcbiAgICAgICAgb2JqLnZhbCA9IGZlYXR1cmUuZ2V0KG9iai5uYW1lKSB8fCAnJztcclxuICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KCdjb25zdHJhaW50JykpIHtcclxuICAgICAgICAgIHZhciBjb25zdHJhaW50UHJvcHMgPSBvYmouY29uc3RyYWludC5zcGxpdCgnOicpO1xyXG4gICAgICAgICAgaWYgKGNvbnN0cmFpbnRQcm9wcy5sZW5ndGggPT09IDMpIHtcclxuICAgICAgICAgICAgb2JqLmV2ZW50VHlwZSA9IGNvbnN0cmFpbnRQcm9wc1swXTtcclxuICAgICAgICAgICAgb2JqLmRlcGVuZGVuY3lWYWwgPSBmZWF0dXJlLmdldChjb25zdHJhaW50UHJvcHNbMV0pO1xyXG4gICAgICAgICAgICBvYmoucmVxdWlyZWRWYWwgPSBjb25zdHJhaW50UHJvcHNbMl07XHJcbiAgICAgICAgICAgIG9iai5kZXBlbmRlbmN5VmFsID09PSBvYmoucmVxdWlyZWRWYWwgPyBvYmouaXNWaXNpYmxlID0gdHJ1ZSA6IG9iai5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgb2JqLmFkZExpc3RlbmVyID0gYWRkTGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgb2JqLmVsSWQgPSAnI2lucHV0LScgKyBvYmoubmFtZSArICctJyArIG9iai5yZXF1aXJlZFZhbDtcclxuICAgICAgICAgICAgb2JqLmVsRGVwZW5kZW5jeUlkID0gJyNpbnB1dC0nICsgY29uc3RyYWludFByb3BzWzFdO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWxlcnQoJ1ZpbGxrb3IgdmVya2FyIGludGUgdmFyYSByw6R0dCBmb3JtdWxlcmF0LiBWaWxsa29yIGZvcm11bGVyYXMgZW5saWd0IHByaW5jaXBlbiBjaGFuZ2U6YXR0cmlidXRlOnZhbHVlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChvYmoudHlwZSA9PT0gJ2ltYWdlJykge1xyXG4gICAgICAgICAgb2JqLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICBvYmouZWxJZCA9ICcjaW5wdXQtJyArIG9iai5uYW1lO1xyXG4gICAgICAgICAgb2JqLmFkZExpc3RlbmVyID0gYWRkSW1hZ2VMaXN0ZW5lcigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBvYmouaXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgIG9iai5lbElkID0gJyNpbnB1dC0nICsgb2JqLm5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvYmouZm9ybUVsZW1lbnQgPSBlZGl0Rm9ybShvYmopO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuICAgIHZhciBmb3JtRWxlbWVudCA9IGF0dHJpYnV0ZU9iamVjdHMucmVkdWNlKGZ1bmN0aW9uKHByZXYsIG5leHQpIHtcclxuICAgICAgcmV0dXJuIHByZXYgKyBuZXh0LmZvcm1FbGVtZW50O1xyXG4gICAgfSwgJycpO1xyXG4gICAgdmFyIGZvcm0gPSAnPGZvcm0+JyArIGZvcm1FbGVtZW50ICsgJzxicj48ZGl2IGNsYXNzPVwiby1mb3JtLXNhdmVcIj48aW5wdXQgaWQ9XCJvLXNhdmUtYnV0dG9uXCIgdHlwZT1cImJ1dHRvblwiIHZhbHVlPVwiT2tcIj48L2lucHV0PjwvZGl2PjwvZm9ybT4nO1xyXG4gICAgbW9kYWwuY3JlYXRlTW9kYWwoJyNvLW1hcCcsIHtcclxuICAgICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgICBjb250ZW50OiBmb3JtLFxyXG4gICAgICBzdGF0aWM6IHRydWVcclxuICAgIH0pO1xyXG4gICAgbW9kYWwuc2hvd01vZGFsKCk7XHJcblxyXG4gICAgYXR0cmlidXRlT2JqZWN0cy5mb3JFYWNoKGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KCdhZGRMaXN0ZW5lcicpKSB7XHJcbiAgICAgICAgb2JqLmFkZExpc3RlbmVyKG9iaik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIG9uQXR0cmlidXRlc1NhdmUoZmVhdHVyZSwgYXR0cmlidXRlT2JqZWN0cyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzYXZlRmVhdHVyZShjaGFuZ2UpIHtcclxuICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VGZWF0dXJlKGNoYW5nZSk7XHJcbiAgaWYgKGF1dG9TYXZlKSB7XHJcbiAgICBzYXZlRmVhdHVyZXMoY2hhbmdlKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNhdmVGZWF0dXJlcygpIHtcclxuICB2YXIgZWRpdHMgPSBlZGl0c1N0b3JlLmdldEVkaXRzKCk7XHJcbiAgdmFyIGxheWVyTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlZGl0cyk7XHJcbiAgbGF5ZXJOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIHRyYW5zYWN0aW9uID0ge1xyXG4gICAgICBpbnNlcnQ6IG51bGwsXHJcbiAgICAgIGRlbGV0ZTogbnVsbCxcclxuICAgICAgdXBkYXRlOiBudWxsXHJcbiAgICB9O1xyXG4gICAgdmFyIGVkaXRUeXBlcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGVkaXRzW2xheWVyTmFtZV0pO1xyXG4gICAgZWRpdFR5cGVzLmZvckVhY2goZnVuY3Rpb24oZWRpdFR5cGUpIHtcclxuICAgICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICAgIHZhciBpZHMgPSBlZGl0c1tsYXllck5hbWVdW2VkaXRUeXBlXTtcclxuICAgICAgdmFyIGZlYXR1cmVzO1xyXG4gICAgICBmZWF0dXJlcyA9IGdldEZlYXR1cmVzQnlJZHMoZWRpdFR5cGUsIGxheWVyLCBpZHMpO1xyXG4gICAgICBpZiAoZmVhdHVyZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgdHJhbnNhY3Rpb25bZWRpdFR5cGVdID0gZmVhdHVyZXM7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHRyYW5zYWN0aW9uSGFuZGxlcih0cmFuc2FjdGlvbiwgbGF5ZXJOYW1lKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0RmVhdHVyZXNCeUlkcyh0eXBlLCBsYXllciwgaWRzKSB7XHJcbiAgdmFyIHNvdXJjZSA9IGxheWVyLmdldFNvdXJjZSgpO1xyXG4gIHZhciBmZWF0dXJlcyA9IFtdO1xyXG4gIGlmICh0eXBlID09PSAnZGVsZXRlJykge1xyXG4gICAgaWRzLmZvckVhY2goZnVuY3Rpb24oaWQpIHtcclxuICAgICAgdmFyIGR1bW15ID0gbmV3IG9sLkZlYXR1cmUoKTtcclxuICAgICAgZHVtbXkuc2V0SWQoaWQpO1xyXG4gICAgICBmZWF0dXJlcy5wdXNoKGR1bW15KTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpZHMuZm9yRWFjaChmdW5jdGlvbihpZCkge1xyXG4gICAgICB2YXIgZmVhdHVyZTtcclxuICAgICAgaWYgKHNvdXJjZS5nZXRGZWF0dXJlQnlJZChpZCkpIHtcclxuICAgICAgICAgZmVhdHVyZSA9IHNvdXJjZS5nZXRGZWF0dXJlQnlJZChpZCk7XHJcbiAgICAgICAgIGZlYXR1cmUudW5zZXQoJ2Jib3gnKTtcclxuICAgICAgICAgZmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZmVhdHVyZXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldERlZmF1bHRWYWx1ZXMoYXR0cmlidXRlcykge1xyXG4gIHJldHVybiBhdHRyaWJ1dGVzLmZpbHRlcihmdW5jdGlvbihhdHRyaWJ1dGUpIHtcclxuICAgICAgaWYgKGF0dHJpYnV0ZS5uYW1lICYmIGF0dHJpYnV0ZS5kZWZhdWx0VmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gYXR0cmlidXRlO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gICAgLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyKSB7XHJcbiAgICAgIHByZXZbY3Vyci5uYW1lXSA9IGN1cnIuZGVmYXVsdFZhbHVlXHJcbiAgICAgIHJldHVybiBwcmV2O1xyXG4gICAgfSx7fSk7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBkcm9wRG93biA9IHJlcXVpcmUoJy4uL2Ryb3Bkb3duJyk7XHJcbnZhciBkaXNwYXRjaGVyID0gcmVxdWlyZSgnLi9lZGl0ZGlzcGF0Y2hlcicpO1xyXG52YXIgY3JlYXRlRWxlbWVudCA9IHJlcXVpcmUoJy4uL3V0aWxzJykuY3JlYXRlRWxlbWVudDtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZWRpdG9yTGF5ZXJzKGVkaXRhYmxlTGF5ZXJzLCBvcHRfb3B0aW9ucykge1xyXG4gIHZhciBhY3RpdmUgPSBmYWxzZTtcclxuICB2YXIgYWN0aXZlQ2xzID0gJ28tYWN0aXZlJztcclxuICB2YXIgdGFyZ2V0ID0gJ2VkaXRvci10b29sYmFyLWxheWVycy1kcm9wZG93bic7XHJcbiAgdmFyIGRlZmF1bHRPcHRpb25zID0ge1xyXG4gICAgdGFyZ2V0OiB0YXJnZXQsXHJcbiAgICBzZWxlY3RPcHRpb25zOiBzZWxlY3Rpb25Nb2RlbChlZGl0YWJsZUxheWVycyksXHJcbiAgICBhY3RpdmVMYXllcjogZWRpdGFibGVMYXllcnNbMF1cclxuICB9O1xyXG4gIHZhciByZW5kZXJPcHRpb25zID0gJC5leHRlbmQoZGVmYXVsdE9wdGlvbnMsIG9wdF9vcHRpb25zKTtcclxuXHJcbiAgcmVuZGVyKHJlbmRlck9wdGlvbnMpO1xyXG4gIGFkZExpc3RlbmVyKHRhcmdldCk7XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlcihvcHRpb25zKSB7XHJcbiAgICB2YXIgcG9wb3ZlciA9IGNyZWF0ZUVsZW1lbnQoJ2RpdicsICcnLCB7XHJcbiAgICAgIGlkOiBvcHRpb25zLnRhcmdldCxcclxuICAgICAgY2xzOiAnby1wb3BvdmVyJ1xyXG4gICAgfSk7XHJcbiAgICAkKCcjJyArICdvLWVkaXRvci1sYXllcnMnKS5hZnRlcihwb3BvdmVyKTtcclxuICAgIGRyb3BEb3duKG9wdGlvbnMudGFyZ2V0LCBvcHRpb25zLnNlbGVjdE9wdGlvbnMsIHtcclxuICAgICAgZGF0YUF0dHJpYnV0ZTogJ2xheWVyJyxcclxuICAgICAgYWN0aXZlOiBvcHRpb25zLmFjdGl2ZUxheWVyXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZExpc3RlbmVyKCkge1xyXG4gICAgJCgnIycgKyB0YXJnZXQpLm9uKCdjaGFuZ2VEcm9wZG93bicsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oZSk7XHJcbiAgICAgIHNldEFjdGl2ZShmYWxzZSk7XHJcbiAgICAgIGRpc3BhdGNoZXIuZW1pdFRvZ2dsZUVkaXQoJ2VkaXQnLCB7XHJcbiAgICAgICAgY3VycmVudExheWVyOiBlLmRhdGFBdHRyaWJ1dGVcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCd0b2dnbGVFZGl0Jywgb25Ub2dnbGVFZGl0KTtcclxuICAgICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VFZGl0Jywgb25DaGFuZ2VFZGl0KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uVG9nZ2xlRWRpdChlKSB7XHJcbiAgICBpZiAoZS50b29sID09PSAnbGF5ZXJzJykge1xyXG4gICAgICBpZiAoYWN0aXZlKSB7XHJcbiAgICAgICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBzZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvbkNoYW5nZUVkaXQoZSkge1xyXG4gICAgaWYgKGUudG9vbCAhPT0gJ2xheWVycycgJiYgZS5hY3RpdmUgPT09IHRydWUpIHtcclxuICAgICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgIH1cclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUpIHtcclxuICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICBhY3RpdmUgPSB0cnVlO1xyXG4gICAgICAkKCcjJyArIHRhcmdldCkuYWRkQ2xhc3MoYWN0aXZlQ2xzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAkKCcjJyArIHRhcmdldCkucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xzKTtcclxuICAgIH1cclxuICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUVkaXQoJ2xheWVycycsIGFjdGl2ZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbG9zZSgpIHtcclxuICAgIGlmIChhY3RpdmUpIHtcclxuICAgICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNlbGVjdGlvbk1vZGVsKGxheWVyTmFtZXMpIHtcclxuICAgIHZhciBzZWxlY3RPcHRpb25zID0gbGF5ZXJOYW1lcy5tYXAoZnVuY3Rpb24obGF5ZXJOYW1lKSB7XHJcbiAgICAgIHZhciBvYmogPSB7fTtcclxuICAgICAgb2JqLm5hbWUgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKS5nZXQoJ3RpdGxlJyk7XHJcbiAgICAgIG9iai52YWx1ZSA9IGxheWVyTmFtZTtcclxuICAgICAgcmV0dXJuIG9iajtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHNlbGVjdE9wdGlvbnM7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciBlZGl0b3J0ZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi90ZW1wbGF0ZXMvZWRpdG9ydG9vbGJhci50ZW1wbGF0ZS5oYW5kbGViYXJzXCIpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZWRpdGRpc3BhdGNoZXInKTtcclxudmFyIGVkaXRIYW5kbGVyID0gcmVxdWlyZSgnLi9lZGl0aGFuZGxlcicpO1xyXG52YXIgZWRpdG9yTGF5ZXJzID0gcmVxdWlyZSgnLi9lZGl0b3JsYXllcnMnKTtcclxudmFyIGRyYXdUb29scyA9IHJlcXVpcmUoJy4vZHJhd3Rvb2xzJyk7XHJcblxyXG52YXIgYWN0aXZlQ2xhc3MgPSAnby1jb250cm9sLWFjdGl2ZSc7XHJcbnZhciBkaXNhYmxlQ2xhc3MgPSAnby1kaXNhYmxlZCc7XHJcbnZhciBjdXJyZW50TGF5ZXIgPSB1bmRlZmluZWQ7XHJcbnZhciBlZGl0YWJsZUxheWVycyA9IHVuZGVmaW5lZDtcclxudmFyICRlZGl0QXR0cmlidXRlID0gdW5kZWZpbmVkO1xyXG52YXIgJGVkaXREcmF3ID0gdW5kZWZpbmVkO1xyXG52YXIgJGVkaXREZWxldGUgPSB1bmRlZmluZWQ7XHJcbnZhciAkZWRpdExheWVycyA9IHVuZGVmaW5lZDtcclxudmFyICRlZGl0U2F2ZSA9IHVuZGVmaW5lZDtcclxudmFyICRlZGl0Q2xvc2UgPSB1bmRlZmluZWQ7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaW5pdDogSW5pdFxyXG4gIH07XHJcbn0oKVxyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRpb25zKSB7XHJcbiAgY3VycmVudExheWVyID0gb3B0aW9ucy5jdXJyZW50TGF5ZXI7XHJcbiAgZWRpdGFibGVMYXllcnMgPSBvcHRpb25zLmVkaXRhYmxlTGF5ZXJzO1xyXG5cclxuICBlZGl0SGFuZGxlcihvcHRpb25zKTtcclxuICByZW5kZXIoKTtcclxuICBlZGl0b3JMYXllcnMoZWRpdGFibGVMYXllcnMsIHtcclxuICAgIGFjdGl2ZUxheWVyOiBjdXJyZW50TGF5ZXJcclxuICB9KTtcclxuICBkcmF3VG9vbHMob3B0aW9ucy5kcmF3VG9vbHMsIGN1cnJlbnRMYXllcik7XHJcblxyXG4gICQoZG9jdW1lbnQpLm9uKCdlbmFibGVJbnRlcmFjdGlvbicsIG9uRW5hYmxlSW50ZXJhY3Rpb24pO1xyXG4gICQoZG9jdW1lbnQpLm9uKCdjaGFuZ2VFZGl0Jywgb25DaGFuZ2VFZGl0KTtcclxuICAkKGRvY3VtZW50KS5vbignZWRpdHNDaGFuZ2UnLCB0b2dnbGVTYXZlKTtcclxuXHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG5cclxuICBpZiAob3B0aW9ucy5pc0FjdGl2ZSkge1xyXG4gICAgc2V0QWN0aXZlKHRydWUpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICQoXCIjby10b29scy1ib3R0b21cIikuYXBwZW5kKGVkaXRvcnRlbXBsYXRlKCkpO1xyXG4gICRlZGl0QXR0cmlidXRlID0gJCgnI28tZWRpdG9yLWF0dHJpYnV0ZScpO1xyXG4gICRlZGl0RHJhdyA9ICQoJyNvLWVkaXRvci1kcmF3Jyk7XHJcbiAgJGVkaXREZWxldGUgPSAkKCcjby1lZGl0b3ItZGVsZXRlJyk7XHJcbiAgJGVkaXRMYXllcnMgPSAkKCcjby1lZGl0b3ItbGF5ZXJzJyk7XHJcbiAgJGVkaXRTYXZlID0gJCgnI28tZWRpdG9yLXNhdmUnKTtcclxuICAkZWRpdENsb3NlID0gJCgnI28tZWRpdG9yLWNsb3NlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICRlZGl0RHJhdy5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRUb2dnbGVFZGl0KCdkcmF3Jyk7XHJcbiAgICAkZWRpdERyYXcuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH0pO1xyXG4gICRlZGl0QXR0cmlidXRlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGRpc3BhdGNoZXIuZW1pdFRvZ2dsZUVkaXQoJ2F0dHJpYnV0ZScpO1xyXG4gICAgJGVkaXRBdHRyaWJ1dGUuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG4gICRlZGl0RGVsZXRlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGRpc3BhdGNoZXIuZW1pdFRvZ2dsZUVkaXQoJ2RlbGV0ZScpO1xyXG4gICAgJGVkaXREZWxldGUuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG4gICRlZGl0TGF5ZXJzLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGRpc3BhdGNoZXIuZW1pdFRvZ2dsZUVkaXQoJ2xheWVycycpO1xyXG4gICAgJGVkaXRMYXllcnMuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG4gICRlZGl0U2F2ZS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICBkaXNwYXRjaGVyLmVtaXRUb2dnbGVFZGl0KCdzYXZlJyk7XHJcbiAgICAkZWRpdFNhdmUuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG4gICRlZGl0Q2xvc2Uub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgJCgnLm8tbWFwJykuZmlyc3QoKS50cmlnZ2VyKHtcclxuICAgICAgdHlwZTogJ2VuYWJsZUludGVyYWN0aW9uJyxcclxuICAgICAgaW50ZXJhY3Rpb246ICdmZWF0dXJlSW5mbydcclxuICAgIH0pO1xyXG4gICAgJGVkaXRDbG9zZS5ibHVyKCk7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkVuYWJsZUludGVyYWN0aW9uKGUpIHtcclxuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gIGlmIChlLmludGVyYWN0aW9uID09PSAnZWRpdG9yJykge1xyXG4gICAgc2V0QWN0aXZlKHRydWUpO1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0VG9nZ2xlRWRpdCgnZWRpdCcsIHtcclxuICAgICAgY3VycmVudExheWVyOiBjdXJyZW50TGF5ZXJcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBzZXRBY3RpdmUoZmFsc2UpO1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0VG9nZ2xlRWRpdCgnY2FuY2VsJyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUpIHtcclxuICBpZiAoc3RhdGUgPT09IHRydWUpIHtcclxuICAgICQoJyNvLWVkaXRvci10b29sYmFyJykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgICQoJyNvLWVkaXRvci10b29sYmFyJykuYWRkQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvbkNoYW5nZUVkaXQoZSkge1xyXG4gIGlmIChlLnRvb2wgPT09ICdkcmF3Jykge1xyXG4gICAgaWYgKGUuYWN0aXZlID09PSBmYWxzZSkge1xyXG4gICAgICAkZWRpdERyYXcucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJGVkaXREcmF3LmFkZENsYXNzKGFjdGl2ZUNsYXNzKTtcclxuICAgIH1cclxuICB9XHJcbiAgaWYgKGUudG9vbCA9PT0gJ2xheWVycycpIHtcclxuICAgIGlmIChlLmFjdGl2ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgJGVkaXRMYXllcnMucmVtb3ZlQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgJGVkaXRMYXllcnMuYWRkQ2xhc3MoYWN0aXZlQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSBpZiAoZS5hY3RpdmUpIHtcclxuICAgICRlZGl0TGF5ZXJzLnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVNhdmUoZSkge1xyXG4gIGlmIChlLmVkaXRzKSB7XHJcbiAgICBpZiAoJGVkaXRTYXZlLmhhc0NsYXNzKGRpc2FibGVDbGFzcykpIHtcclxuICAgICAgJGVkaXRTYXZlLnJlbW92ZUNsYXNzKGRpc2FibGVDbGFzcyk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIHtcclxuICAgICRlZGl0U2F2ZS5hZGRDbGFzcyhkaXNhYmxlQ2xhc3MpO1xyXG4gIH1cclxufVxyXG4iLCJ2YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL2VkaXRkaXNwYXRjaGVyJyk7XHJcblxyXG52YXIgZWRpdHNTdG9yZSA9IGZ1bmN0aW9uIGZlYXR1cmVTdG9yZSgpIHtcclxuICB2YXIgZWRpdHMgPSB7fTtcclxuXHJcbiAgJChkb2N1bWVudCkub24oJ2NoYW5nZUZlYXR1cmUnLCBmZWF0dXJlQ2hhbmdlKTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdldEVkaXRzOiBnZXRFZGl0cyxcclxuICAgIGhhc0ZlYXR1cmU6IGhhc0ZlYXR1cmVcclxuICB9O1xyXG5cclxuICBmdW5jdGlvbiBhZGRFZGl0KGUpIHtcclxuICAgIGlmIChlLmFjdGlvbiA9PT0gJ2luc2VydCcpIHtcclxuICAgICAgYWRkRmVhdHVyZSgnaW5zZXJ0JywgZS5mZWF0dXJlLCBlLmxheWVyTmFtZSk7XHJcbiAgICB9IGVsc2UgaWYgKGUuYWN0aW9uID09PSAndXBkYXRlJykge1xyXG4gICAgICBpZiAoaGFzRmVhdHVyZSgnaW5zZXJ0JywgZS5mZWF0dXJlLCBlLmxheWVyTmFtZSkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgYWRkRmVhdHVyZSgndXBkYXRlJywgZS5mZWF0dXJlLCBlLmxheWVyTmFtZSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdkZWxldGUnKSB7XHJcbiAgICAgIGlmIChyZW1vdmVGZWF0dXJlKCdpbnNlcnQnLCBlLmZlYXR1cmUsIGUubGF5ZXJOYW1lKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICByZW1vdmVGZWF0dXJlKCd1cGRhdGUnLCBlLmZlYXR1cmUsIGUubGF5ZXJOYW1lKTtcclxuICAgICAgICBhZGRGZWF0dXJlKCdkZWxldGUnLCBlLmZlYXR1cmUsIGUubGF5ZXJOYW1lKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGhhc0VkaXRzKCkgPT09IHRydWUpIHtcclxuICAgICAgZGlzcGF0Y2hlci5lbWl0RWRpdHNDaGFuZ2UoMSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkaXNwYXRjaGVyLmVtaXRFZGl0c0NoYW5nZSgwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZUVkaXQoZSkge1xyXG4gICAgaWYgKGUuZmVhdHVyZS5sZW5ndGgpIHtcclxuICAgICAgZS5mZWF0dXJlLmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICAgIHJlbW92ZUZlYXR1cmUoZS5hY3Rpb24sIGZlYXR1cmUsIGUubGF5ZXJOYW1lKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGlmIChoYXNFZGl0cygpID09PSBmYWxzZSkge1xyXG4gICAgICBkaXNwYXRjaGVyLmVtaXRFZGl0c0NoYW5nZSgwKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldEVkaXRzKCkge1xyXG4gICAgcmV0dXJuIGVkaXRzO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZmVhdHVyZUNoYW5nZShlKSB7XHJcbiAgICBpZiAoZS5zdGF0dXMgPT09ICdwZW5kaW5nJykge1xyXG4gICAgICBhZGRFZGl0KGUpO1xyXG4gICAgfSBlbHNlIGlmIChlLnN0YXR1cyA9PT0gJ2ZpbmlzaGVkJykge1xyXG4gICAgICByZW1vdmVFZGl0KGUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gaGFzRmVhdHVyZSh0eXBlLCBmZWF0dXJlLCBsYXllck5hbWUpIHtcclxuICAgIGlmIChlZGl0cy5oYXNPd25Qcm9wZXJ0eShsYXllck5hbWUpKSB7XHJcbiAgICAgIGlmIChlZGl0c1tsYXllck5hbWVdW3R5cGVdLmluZGV4T2YoZmVhdHVyZS5nZXRJZCgpKSA+IC0xKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFkZEZlYXR1cmUodHlwZSwgZmVhdHVyZSwgbGF5ZXJOYW1lKSB7XHJcbiAgICBpZiAoZWRpdHMuaGFzT3duUHJvcGVydHkobGF5ZXJOYW1lKSA9PT0gZmFsc2UpIHtcclxuICAgICAgZWRpdHNbbGF5ZXJOYW1lXSA9IGNyZWF0ZUVkaXRzT2JqKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoaGFzRmVhdHVyZSh0eXBlLCBmZWF0dXJlLCBsYXllck5hbWUpID09PSBmYWxzZSkge1xyXG4gICAgICBlZGl0c1tsYXllck5hbWVdW3R5cGVdLnB1c2goZmVhdHVyZS5nZXRJZCgpKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbW92ZUZlYXR1cmUodHlwZSwgZmVhdHVyZSwgbGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgaW5kZXggPSAwO1xyXG4gICAgaWYgKGVkaXRzLmhhc093blByb3BlcnR5KGxheWVyTmFtZSkpIHtcclxuICAgICAgaW5kZXggPSBlZGl0c1tsYXllck5hbWVdW3R5cGVdLmluZGV4T2YoZmVhdHVyZS5nZXRJZCgpKTtcclxuICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICBlZGl0c1tsYXllck5hbWVdW3R5cGVdLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgaXNGaW5pc2hlZChsYXllck5hbWUpO1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBpc0ZpbmlzaGVkKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGVkaXRUeXBlcztcclxuICAgIHZhciBmaW5pc2hlZCA9IHRydWU7XHJcbiAgICBpZiAoZWRpdHMuaGFzT3duUHJvcGVydHkobGF5ZXJOYW1lKSkge1xyXG4gICAgICBlZGl0VHlwZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlZGl0c1tsYXllck5hbWVdKTtcclxuICAgICAgZWRpdFR5cGVzLmZvckVhY2goZnVuY3Rpb24oZWRpdFR5cGUpIHtcclxuICAgICAgICBpZiAoZWRpdHNbbGF5ZXJOYW1lXVtlZGl0VHlwZV0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICBmaW5pc2hlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgcmV0dXJuIGZpbmlzaGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICAgIGlmIChmaW5pc2hlZCkge1xyXG4gICAgICAgIGRlbGV0ZSBlZGl0c1tsYXllck5hbWVdO1xyXG4gICAgICAgIHJldHVybiBmaW5pc2hlZDtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZpbmlzaGVkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlRWRpdHNPYmooKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1cGRhdGU6IFtdLFxyXG4gICAgICBpbnNlcnQ6IFtdLFxyXG4gICAgICBkZWxldGU6IFtdXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBoYXNFZGl0cygpIHtcclxuICAgIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlZGl0cykubGVuZ3RoKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBlZGl0c1N0b3JlO1xyXG4iLCJ2YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZWRpdGRpc3BhdGNoZXInKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSkge1xyXG4gIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmVFZGl0cyh0cmFuc09iaiwgbGF5ZXJOYW1lKTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oZHJhd1R5cGUpIHtcclxuICB2YXIgdHlwZXMgPSB7XHJcbiAgICBib3g6IHtcclxuICAgICAgdHlwZTogJ0NpcmNsZScsXHJcbiAgICAgIGdlb21ldHJ5RnVuY3Rpb246IG9sLmludGVyYWN0aW9uLkRyYXcuY3JlYXRlQm94KClcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBpZiAodHlwZXMuaGFzT3duUHJvcGVydHkoZHJhd1R5cGUpKSB7XHJcbiAgICByZXR1cm4gdHlwZXNbZHJhd1R5cGVdO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4ge307XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgd2ZzVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL3dmc3RyYW5zYWN0aW9uJyk7XHJcbnZhciBhZ3NUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vYWdzdHJhbnNhY3Rpb24nKTtcclxudmFyIGluZGV4ZWREYiA9IHJlcXVpcmUoJy4vaW5kZXhlZGRiJyk7XHJcbnZhciB0cmFuc2FjdGlvbnMgPSB7XHJcbiAgV0ZTOiB3ZnNUcmFuc2FjdGlvbixcclxuICBBR1NfRkVBVFVSRTogYWdzVHJhbnNhY3Rpb24sXHJcbiAgT0ZGTElORTogaW5kZXhlZERiXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRyYW5zYWN0aW9uLCBsYXllck5hbWUpIHtcclxuICB2YXIgdHlwZSA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpLmdldCgndHlwZScpO1xyXG4gIGlmICh0cmFuc2FjdGlvbnMuaGFzT3duUHJvcGVydHkodHlwZSkpIHtcclxuICAgIHRyYW5zYWN0aW9uc1t0eXBlXSh0cmFuc2FjdGlvbiwgbGF5ZXJOYW1lKTtcclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGVkaXRzU3RvcmUgPSByZXF1aXJlKCcuL2VkaXRzc3RvcmUnKSgpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vZWRpdGRpc3BhdGNoZXInKTtcclxuXHJcbnZhciBmb3JtYXQgPSBuZXcgb2wuZm9ybWF0LldGUygpO1xyXG52YXIgc2VyaWFsaXplciA9IG5ldyBYTUxTZXJpYWxpemVyKCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKHRyYW5zT2JqLCBsYXllck5hbWUpIHtcclxuICByZXR1cm4gd2ZzVHJhbnNhY3Rpb24odHJhbnNPYmosIGxheWVyTmFtZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlV2ZzVHJhbnNhY3Rpb24odHJhbnNPYmosIG9wdGlvbnMpIHtcclxuICB2YXIgbm9kZSA9IGZvcm1hdC53cml0ZVRyYW5zYWN0aW9uKHRyYW5zT2JqLmluc2VydCwgdHJhbnNPYmoudXBkYXRlLCB0cmFuc09iai5kZWxldGUsIG9wdGlvbnMpO1xyXG4gIHJldHVybiBub2RlO1xyXG59XHJcblxyXG5mdW5jdGlvbiB3ZnNUcmFuc2FjdGlvbih0cmFuc09iaiwgbGF5ZXJOYW1lKSB7XHJcbiAgdmFyIHNyc05hbWUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICB2YXIgZmVhdHVyZVR5cGUgPSBsYXllci5nZXQoJ2ZlYXR1cmVUeXBlJyk7XHJcbiAgdmFyIHNvdXJjZSA9IHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllci5nZXQoJ3NvdXJjZU5hbWUnKV07XHJcbiAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICBnbWxPcHRpb25zOiB7XHJcbiAgICAgIHNyc05hbWU6IHNyc05hbWVcclxuICAgIH0sXHJcbiAgICBmZWF0dXJlTlM6IHNvdXJjZS53b3Jrc3BhY2UsXHJcbiAgICBmZWF0dXJlUHJlZml4OiBzb3VyY2UucHJlZml4IHx8IHNvdXJjZS53b3Jrc3BhY2UsXHJcbiAgICBmZWF0dXJlVHlwZTogZmVhdHVyZVR5cGVcclxuICB9O1xyXG4gIHZhciBub2RlID0gd3JpdGVXZnNUcmFuc2FjdGlvbih0cmFuc09iaiwgb3B0aW9ucyk7XHJcbiAgcmV0dXJuICQuYWpheCh7XHJcbiAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgIHVybDogc291cmNlLnVybCxcclxuICAgIGRhdGE6IHNlcmlhbGl6ZXIuc2VyaWFsaXplVG9TdHJpbmcobm9kZSksXHJcbiAgICBjb250ZW50VHlwZTogJ3RleHQveG1sJyxcclxuICAgIHN1Y2Nlc3M6IHN1Y2Nlc3MsXHJcbiAgICBlcnJvcjogZXJyb3IsXHJcbiAgICBjb250ZXh0OiB0aGlzXHJcbiAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgdmFyIHJlc3VsdCA9IHJlYWRSZXNwb25zZShkYXRhKTtcclxuICAgICAgdmFyIG5yID0gMDtcclxuICAgICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgIG5yICs9IHJlc3VsdC50cmFuc2FjdGlvblN1bW1hcnkudG90YWxVcGRhdGVkO1xyXG4gICAgICAgIG5yICs9IHJlc3VsdC50cmFuc2FjdGlvblN1bW1hcnkudG90YWxEZWxldGVkO1xyXG4gICAgICAgIG5yICs9IHJlc3VsdC50cmFuc2FjdGlvblN1bW1hcnkudG90YWxJbnNlcnRlZDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gbnI7XHJcbiAgICB9KTtcclxuXHJcbiAgZnVuY3Rpb24gc3VjY2VzcyhkYXRhKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0gcmVhZFJlc3BvbnNlKGRhdGEpO1xyXG4gICAgdmFyIGZlYXR1cmU7XHJcbiAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgIGlmIChyZXN1bHQudHJhbnNhY3Rpb25TdW1tYXJ5LnRvdGFsVXBkYXRlZCA+IDApIHtcclxuICAgICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VGZWF0dXJlKHtcclxuICAgICAgICAgIGZlYXR1cmU6IHRyYW5zT2JqLnVwZGF0ZSxcclxuICAgICAgICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lLFxyXG4gICAgICAgICAgc3RhdHVzOiAnZmluaXNoZWQnLFxyXG4gICAgICAgICAgYWN0aW9uOiAndXBkYXRlJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAocmVzdWx0LnRyYW5zYWN0aW9uU3VtbWFyeS50b3RhbERlbGV0ZWQgPiAwKSB7XHJcbiAgICAgICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlRmVhdHVyZSh7XHJcbiAgICAgICAgICBmZWF0dXJlOiB0cmFuc09iai5kZWxldGUsXHJcbiAgICAgICAgICBsYXllck5hbWU6IGxheWVyTmFtZSxcclxuICAgICAgICAgIHN0YXR1czogJ2ZpbmlzaGVkJyxcclxuICAgICAgICAgIGFjdGlvbjogJ2RlbGV0ZSdcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG5cclxuICAgICAgaWYgKHJlc3VsdC50cmFuc2FjdGlvblN1bW1hcnkudG90YWxJbnNlcnRlZCA+IDApIHtcclxuICAgICAgICBmZWF0dXJlID0gdHJhbnNPYmouaW5zZXJ0O1xyXG4gICAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZUZlYXR1cmUoe1xyXG4gICAgICAgICAgZmVhdHVyZTogdHJhbnNPYmouaW5zZXJ0LFxyXG4gICAgICAgICAgbGF5ZXJOYW1lOiBsYXllck5hbWUsXHJcbiAgICAgICAgICBzdGF0dXM6ICdmaW5pc2hlZCcsXHJcbiAgICAgICAgICBhY3Rpb246ICdpbnNlcnQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGluc2VydElkcyA9IHJlc3VsdC5pbnNlcnRJZHM7XHJcbiAgICAgICAgaW5zZXJ0SWRzLmZvckVhY2goZnVuY3Rpb24oaW5zZXJ0SWQsIGluZGV4KSB7XHJcbiAgICAgICAgICBmZWF0dXJlW2luZGV4XS5zZXRJZChpbnNlcnRJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9yKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBlcnJvcihlKSB7XHJcbiAgICB2YXIgZXJyb3JNc2cgPSBlID8gKGUuc3RhdHVzICsgJyAnICsgZS5zdGF0dXNUZXh0KSA6IFwiXCI7XHJcbiAgICBhbGVydCgnRGV0IGludHLDpGZmYWRlIGV0dCBmZWwgbsOkciDDpG5kcmluZ2FybmEgc2t1bGxlIHNwYXJhcyB0aWxsIHNlcnZlcm4uLi5cXG4nICtcclxuICAgICAgZXJyb3JNc2cpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVhZFJlc3BvbnNlKGRhdGEpIHtcclxuICB2YXIgcmVzdWx0O1xyXG4gIGlmICh3aW5kb3cuRG9jdW1lbnQgJiYgZGF0YSBpbnN0YW5jZW9mIERvY3VtZW50ICYmIGRhdGEuZG9jdW1lbnRFbGVtZW50ICYmXHJcbiAgICBkYXRhLmRvY3VtZW50RWxlbWVudC5sb2NhbE5hbWUgPT09ICdFeGNlcHRpb25SZXBvcnQnKSB7XHJcbiAgICBhbGVydChkYXRhLmdldEVsZW1lbnRzQnlUYWdOYW1lTlMoXHJcbiAgICAgICdodHRwOi8vd3d3Lm9wZW5naXMubmV0L293cycsICdFeGNlcHRpb25UZXh0JykuaXRlbSgwKS50ZXh0Q29udGVudCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlc3VsdCA9IGZvcm1hdC5yZWFkVHJhbnNhY3Rpb25SZXNwb25zZShkYXRhKTtcclxuICB9XHJcblxyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgUG9wdXAgPSByZXF1aXJlKCcuL3BvcHVwJyk7XHJcbnZhciBzaWRlYmFyID0gcmVxdWlyZSgnLi9zaWRlYmFyJyk7XHJcbnZhciBtYXB1dGlscyA9IHJlcXVpcmUoJy4vbWFwdXRpbHMnKTtcclxudmFyIGZlYXR1cmVsYXllciA9IHJlcXVpcmUoJy4vZmVhdHVyZWxheWVyJyk7XHJcbnZhciBzdHlsZSA9IHJlcXVpcmUoJy4vc3R5bGUnKSgpO1xyXG52YXIgc3R5bGVUeXBlcyA9IHJlcXVpcmUoJy4vc3R5bGUvc3R5bGV0eXBlcycpO1xyXG52YXIgZ2V0RmVhdHVyZUluZm8gPSByZXF1aXJlKCcuL2dldGZlYXR1cmVpbmZvJyk7XHJcbnZhciBvd2xDYXJvdXNlbCA9IHJlcXVpcmUoJy4uL2V4dGVybnMvb3dsY2Fyb3VzZWwtYnJvd3NlcmlmeScpO1xyXG5vd2xDYXJvdXNlbC5sb2FkalF1ZXJ5UGx1Z2luKCk7XHJcblxyXG52YXIgc2VsZWN0aW9uTGF5ZXIgPSB1bmRlZmluZWQ7XHJcbnZhciBzYXZlZFBpbiA9IHVuZGVmaW5lZDtcclxudmFyIG9wdGlvbnM7XHJcbnZhciBtYXA7XHJcbnZhciBwaW5uaW5nO1xyXG52YXIgcGluU3R5bGU7XHJcbnZhciBzZWxlY3Rpb25TdHlsZXM7XHJcbnZhciBzaG93T3ZlcmxheTtcclxudmFyIGlkZW50aWZ5VGFyZ2V0O1xyXG52YXIgY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWw7XHJcbnZhciBvdmVybGF5O1xyXG52YXIgaGl0VG9sZXJhbmNlO1xyXG5cclxuZnVuY3Rpb24gaW5pdChvcHRfb3B0aW9ucykge1xyXG4gIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuXHJcbiAgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG5cclxuICBwaW5uaW5nID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgncGlubmluZycpID8gb3B0aW9ucy5waW5uaW5nIDogdHJ1ZTtcclxuICB2YXIgcGluU3R5bGVPcHRpb25zID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgncGluU3R5bGUnKSA/IG9wdGlvbnMucGluU3R5bGUgOiBzdHlsZVR5cGVzLmdldFN0eWxlKCdwaW4nKTtcclxuICBwaW5TdHlsZSA9IHN0eWxlLmNyZWF0ZVN0eWxlUnVsZShwaW5TdHlsZU9wdGlvbnMpWzBdO1xyXG4gIHNhdmVkUGluID0gb3B0aW9ucy5zYXZlZFBpbiA/IG1hcHV0aWxzLmNyZWF0ZVBvaW50RmVhdHVyZShvcHRfb3B0aW9ucy5zYXZlZFBpbiwgcGluU3R5bGUpIDogdW5kZWZpbmVkO1xyXG5cclxuICBzZWxlY3Rpb25TdHlsZXMgPSBzdHlsZS5jcmVhdGVFZGl0U3R5bGUoKTtcclxuXHJcbiAgdmFyIHNhdmVkU2VsZWN0aW9uID0gb3B0aW9ucy5zYXZlZFNlbGVjdGlvbiB8fCB1bmRlZmluZWQ7XHJcbiAgdmFyIHNhdmVkRmVhdHVyZSA9IHNhdmVkUGluIHx8IHNhdmVkU2VsZWN0aW9uIHx8IHVuZGVmaW5lZDtcclxuICBzZWxlY3Rpb25MYXllciA9IGZlYXR1cmVsYXllcihzYXZlZEZlYXR1cmUsIG1hcCk7XHJcblxyXG4gIHNob3dPdmVybGF5ID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnb3ZlcmxheScpID8gb3B0aW9ucy5vdmVybGF5IDogdHJ1ZTtcclxuXHJcbiAgaWYoc2hvd092ZXJsYXkpIHtcclxuICAgIGlkZW50aWZ5VGFyZ2V0ID0gJ292ZXJsYXknO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIHNpZGViYXIuaW5pdCgpO1xyXG4gICAgaWRlbnRpZnlUYXJnZXQgPSAnc2lkZWJhcic7XHJcbiAgfVxyXG5cclxuICBjbHVzdGVyRmVhdHVyZWluZm9MZXZlbCA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2NsdXN0ZXJGZWF0dXJlaW5mb0xldmVsJykgPyBvcHRpb25zLmNsdXN0ZXJGZWF0dXJlaW5mb0xldmVsIDogMTtcclxuXHJcbiAgaGl0VG9sZXJhbmNlID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaGl0VG9sZXJhbmNlJykgPyBvcHRpb25zLmhpdFRvbGVyYW5jZSA6IDA7XHJcblxyXG4gIG1hcC5vbignY2xpY2snLCBvbkNsaWNrKTtcclxuICAkKGRvY3VtZW50KS5vbignZW5hYmxlSW50ZXJhY3Rpb24nLCBvbkVuYWJsZUludGVyYWN0aW9uKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFNlbGVjdGlvbkxheWVyKCkge1xyXG4gIHJldHVybiBzZWxlY3Rpb25MYXllci5nZXRGZWF0dXJlTGF5ZXIoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U2VsZWN0aW9uKCkge1xyXG4gIHZhciBzZWxlY3Rpb24gPSB7fTtcclxuICBzZWxlY3Rpb24uZ2VvbWV0cnlUeXBlID0gc2VsZWN0aW9uTGF5ZXIuZ2V0RmVhdHVyZXMoKVswXS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKTtcclxuICBzZWxlY3Rpb24uY29vcmRpbmF0ZXMgPSBzZWxlY3Rpb25MYXllci5nZXRGZWF0dXJlcygpWzBdLmdldEdlb21ldHJ5KCkuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICByZXR1cm4gc2VsZWN0aW9uO1xyXG59XHJcbmZ1bmN0aW9uIGdldFBpbigpIHtcclxuICByZXR1cm4gc2F2ZWRQaW47XHJcbn1cclxuZnVuY3Rpb24gZ2V0SGl0VG9sZXJhbmNlKCkge1xyXG4gIHJldHVybiBoaXRUb2xlcmFuY2U7XHJcbn1cclxuZnVuY3Rpb24gaWRlbnRpZnkoaXRlbXMsIHRhcmdldCwgY29vcmRpbmF0ZSkge1xyXG4gIGNsZWFyKCk7XHJcbiAgdmFyIGNvbnRlbnQgPSBpdGVtcy5tYXAoZnVuY3Rpb24oaSl7XHJcbiAgICByZXR1cm4gaS5jb250ZW50O1xyXG4gIH0pLmpvaW4oJycpO1xyXG4gIGNvbnRlbnQgPSAnPGRpdiBpZD1cIm8taWRlbnRpZnlcIj48ZGl2IGlkPVwiby1pZGVudGlmeS1jYXJvdXNlbFwiIGNsYXNzPVwib3dsLWNhcm91c2VsIG93bC10aGVtZVwiPicgKyBjb250ZW50ICsgJzwvZGl2PjwvZGl2Pic7XHJcbiAgc3dpdGNoICh0YXJnZXQpIHtcclxuICAgIGNhc2UgJ292ZXJsYXknOlxyXG4gICAgICB2YXIgcG9wdXAgPSBQb3B1cCgnI28tbWFwJyk7XHJcbiAgICAgIG92ZXJsYXkgPSBuZXcgb2wuT3ZlcmxheSh7XHJcbiAgICAgICAgZWxlbWVudDogcG9wdXAuZ2V0RWwoKVxyXG4gICAgICB9KTtcclxuICAgICAgbWFwLmFkZE92ZXJsYXkob3ZlcmxheSk7XHJcbiAgICAgIHZhciBnZW9tZXRyeSA9IGl0ZW1zWzBdLmZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcclxuICAgICAgdmFyIGNvb3JkO1xyXG4gICAgICBnZW9tZXRyeS5nZXRUeXBlKCkgPT0gJ1BvaW50JyA/IGNvb3JkID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKSA6IGNvb3JkID0gY29vcmRpbmF0ZTtcclxuICAgICAgb3ZlcmxheS5zZXRQb3NpdGlvbihjb29yZCk7XHJcbiAgICAgIHBvcHVwLnNldENvbnRlbnQoe2NvbnRlbnQ6IGNvbnRlbnQsIHRpdGxlOiBpdGVtc1swXS50aXRsZX0pO1xyXG4gICAgICBwb3B1cC5zZXRWaXNpYmlsaXR5KHRydWUpO1xyXG4gICAgICB2YXIgb3dsID0gaW5pdENhcm91c2VsKCcjby1pZGVudGlmeS1jYXJvdXNlbCcsIHVuZGVmaW5lZCwgZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSB0aGlzLm93bC5jdXJyZW50SXRlbTtcclxuICAgICAgICBzZWxlY3Rpb25MYXllci5jbGVhckFuZEFkZChpdGVtc1tjdXJyZW50SXRlbV0uZmVhdHVyZS5jbG9uZSgpLCBzZWxlY3Rpb25TdHlsZXNbaXRlbXNbY3VycmVudEl0ZW1dLmZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRUeXBlKCldKTtcclxuICAgICAgICBwb3B1cC5zZXRUaXRsZShpdGVtc1tjdXJyZW50SXRlbV0udGl0bGUpO1xyXG4gICAgICB9KTtcclxuICAgICAgVmlld2VyLmF1dG9QYW4oKTtcclxuICAgICAgYnJlYWs7XHJcbiAgICBjYXNlICdzaWRlYmFyJzpcclxuICAgICAgc2lkZWJhci5zZXRDb250ZW50KHtjb250ZW50OiBjb250ZW50LCB0aXRsZTogaXRlbXNbMF0udGl0bGV9KTtcclxuICAgICAgc2lkZWJhci5zZXRWaXNpYmlsaXR5KHRydWUpO1xyXG4gICAgICB2YXIgb3dsID0gaW5pdENhcm91c2VsKCcjby1pZGVudGlmeS1jYXJvdXNlbCcsIHVuZGVmaW5lZCwgZnVuY3Rpb24oKXtcclxuICAgICAgICB2YXIgY3VycmVudEl0ZW0gPSB0aGlzLm93bC5jdXJyZW50SXRlbTtcclxuICAgICAgICBzZWxlY3Rpb25MYXllci5jbGVhckFuZEFkZChpdGVtc1tjdXJyZW50SXRlbV0uZmVhdHVyZS5jbG9uZSgpLCBzZWxlY3Rpb25TdHlsZXNbaXRlbXNbY3VycmVudEl0ZW1dLmZlYXR1cmUuZ2V0R2VvbWV0cnkoKS5nZXRUeXBlKCldKTtcclxuICAgICAgICBzaWRlYmFyLnNldFRpdGxlKGl0ZW1zW2N1cnJlbnRJdGVtXS50aXRsZSk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gb25DbGljayhldnQpIHtcclxuICBzYXZlZFBpbiA9IHVuZGVmaW5lZDtcclxuICAvL0ZlYXR1cmluZm8gaW4gdHdvIHN0ZXBzLiBDb25jYXQgc2VydmVyc2lkZSBhbmQgY2xpZW50c2lkZSB3aGVuIHNlcnZlcnNpZGUgaXMgZmluaXNoZWRcclxuICB2YXIgY2xpZW50UmVzdWx0ID0gZ2V0RmVhdHVyZUluZm8uZ2V0RmVhdHVyZXNBdFBpeGVsKGV2dCwgY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWwpO1xyXG4gIC8vQWJvcnQgaWYgY2xpZW50UmVzdWx0IGlzIGZhbHNlXHJcbiAgaWYoY2xpZW50UmVzdWx0ICE9PSBmYWxzZSkge1xyXG4gICAgZ2V0RmVhdHVyZUluZm8uZ2V0RmVhdHVyZXNGcm9tUmVtb3RlKGV2dClcclxuICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIHZhciBzZXJ2ZXJSZXN1bHQgPSBkYXRhIHx8IFtdO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSBzZXJ2ZXJSZXN1bHQuY29uY2F0KGNsaWVudFJlc3VsdCk7XHJcbiAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBzZWxlY3Rpb25MYXllci5jbGVhcigpO1xyXG4gICAgICAgICAgaWRlbnRpZnkocmVzdWx0LCBpZGVudGlmeVRhcmdldCwgZXZ0LmNvb3JkaW5hdGUpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYoc2VsZWN0aW9uTGF5ZXIuZ2V0RmVhdHVyZXMoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBjbGVhcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmKHBpbm5pbmcpe1xyXG4gICAgICAgICAgc2lkZWJhci5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcclxuICAgICAgICAgIHZhciByZXNvbHV0aW9uID0gbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XHJcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZighbWFwdXRpbHMuY2hlY2tab29tQ2hhbmdlKHJlc29sdXRpb24sIG1hcC5nZXRWaWV3KCkuZ2V0UmVzb2x1dGlvbigpKSkge1xyXG4gICAgICAgICAgICAgIHNhdmVkUGluID0gbWFwdXRpbHMuY3JlYXRlUG9pbnRGZWF0dXJlKGV2dC5jb29yZGluYXRlLCBwaW5TdHlsZSk7XHJcbiAgICAgICAgICAgICAgc2VsZWN0aW9uTGF5ZXIuYWRkRmVhdHVyZShzYXZlZFBpbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0sIDI1MCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIGZlYXR1cmVzIGlkZW50aWZpZWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5mdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUpIHtcclxuICBpZihzdGF0ZSA9PT0gdHJ1ZSkge1xyXG4gICAgbWFwLm9uKCdjbGljaycsIG9uQ2xpY2spO1xyXG4gIH1cclxuICBlbHNlIHtcclxuICAgIGNsZWFyKCk7XHJcbiAgICBtYXAudW4oJ2NsaWNrJywgb25DbGljayk7XHJcbiAgfVxyXG59XHJcbmZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gIHNlbGVjdGlvbkxheWVyLmNsZWFyKCk7XHJcbiAgc2lkZWJhci5zZXRWaXNpYmlsaXR5KGZhbHNlKTtcclxuICBpZiAob3ZlcmxheSkge1xyXG4gICAgVmlld2VyLnJlbW92ZU92ZXJsYXlzKG92ZXJsYXkpOyAgICAgIFxyXG4gIH1cclxuICBjb25zb2xlLmxvZyhcIkNsZWFyaW5nIHNlbGVjdGlvblwiKTtcclxufVxyXG5mdW5jdGlvbiBvbkVuYWJsZUludGVyYWN0aW9uKGUpIHtcclxuICBpZihlLmludGVyYWN0aW9uID09PSAnZmVhdHVyZUluZm8nKSB7XHJcbiAgICBzZXRBY3RpdmUodHJ1ZSk7XHJcbiAgfVxyXG4gIGVsc2Uge1xyXG4gICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICB9XHJcbn1cclxuZnVuY3Rpb24gaW5pdENhcm91c2VsKGlkLCBvcHRpb25zLCBjYikge1xyXG4gIHZhciBjYXJvdXNlbE9wdGlvbnMgPSBvcHRpb25zIHx8IHtcclxuICAgIG5hdmlnYXRpb24gOiB0cnVlLCAvLyBTaG93IG5leHQgYW5kIHByZXYgYnV0dG9uc1xyXG4gICAgc2xpZGVTcGVlZCA6IDMwMCxcclxuICAgIHBhZ2luYXRpb25TcGVlZCA6IDQwMCxcclxuICAgIHNpbmdsZUl0ZW06dHJ1ZSxcclxuICAgIHJld2luZFNwZWVkOjIwMCxcclxuICAgIG5hdmlnYXRpb25UZXh0OiBbJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hldnJvbi1sZWZ0XCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWNoZXZyb24tbGVmdFwiPjwvdXNlPjwvc3ZnPicsICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZXZyb24tcmlnaHRcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtY2hldnJvbi1yaWdodFwiPjwvdXNlPjwvc3ZnPiddLFxyXG4gICAgYWZ0ZXJBY3Rpb246IGNiXHJcbiAgfTtcclxuICByZXR1cm4gJChpZCkub3dsQ2Fyb3VzZWwoY2Fyb3VzZWxPcHRpb25zKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbm1vZHVsZS5leHBvcnRzLmNsZWFyID0gY2xlYXI7XHJcbm1vZHVsZS5leHBvcnRzLmdldFNlbGVjdGlvbkxheWVyID0gZ2V0U2VsZWN0aW9uTGF5ZXI7XHJcbm1vZHVsZS5leHBvcnRzLmdldFNlbGVjdGlvbiA9IGdldFNlbGVjdGlvbjtcclxubW9kdWxlLmV4cG9ydHMuZ2V0UGluID0gZ2V0UGluO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRIaXRUb2xlcmFuY2UgPSBnZXRIaXRUb2xlcmFuY2U7XHJcbm1vZHVsZS5leHBvcnRzLmlkZW50aWZ5ID0gaWRlbnRpZnk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgdGVtcGxhdGVzID0ge307XHJcbnRlbXBsYXRlcy5kZWZhdWx0ID0gcmVxdWlyZShcIi4vdGVtcGxhdGVzL2ZlYXR1cmVpbmZvdGVtcGxhdGVzL2RlZmF1bHRcIik7XHJcblxyXG5mdW5jdGlvbiBmZWF0dXJlaW5mb3RlbXBsYXRlcyh0ZW1wbGF0ZSwgYXR0cmlidXRlcykge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlc1t0ZW1wbGF0ZV0oYXR0cmlidXRlcyk7XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBmZWF0dXJlaW5mb3RlbXBsYXRlcztcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcblxyXG4vL2NyZWF0ZSB1bm1hbmFnZWQgbGF5ZXJcclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmZWF0dXJlcywgbWFwKSB7XHJcbiAgdmFyIGNvbGxlY3Rpb24gPSBmZWF0dXJlcyA/IFtmZWF0dXJlc10gOiBbXTtcclxuICB2YXIgZmVhdHVyZUxheWVyU3RvcmUgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgIGZlYXR1cmVzOiBjb2xsZWN0aW9uXHJcbiAgfSk7XHJcbiAgdmFyIGZlYXR1cmVMYXllciA9IG5ldyBvbC5sYXllci5WZWN0b3Ioe1xyXG4gICAgc291cmNlOiBmZWF0dXJlTGF5ZXJTdG9yZSxcclxuICAgIG1hcDogbWFwXHJcbiAgfSk7XHJcbiAgcmV0dXJuIHtcclxuICAgICAgYWRkRmVhdHVyZTogZnVuY3Rpb24gYWRkRmVhdHVyZShmZWF0dXJlKSB7XHJcbiAgICAgICAgICBmZWF0dXJlTGF5ZXJTdG9yZS5hZGRGZWF0dXJlKGZlYXR1cmUpO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRGZWF0dXJlczogZnVuY3Rpb24gZ2V0RmVhdHVyZXMoKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmVhdHVyZUxheWVyU3RvcmUuZ2V0RmVhdHVyZXMoKTtcclxuICAgICAgfSxcclxuICAgICAgZ2V0RmVhdHVyZUxheWVyOiBmdW5jdGlvbiBnZXRGZWF0dXJlTGF5ZXIoKSB7XHJcbiAgICAgICAgICByZXR1cm4gZmVhdHVyZUxheWVyO1xyXG4gICAgICB9LFxyXG4gICAgICBnZXRGZWF0dXJlU3RvcmU6IGZ1bmN0aW9uIGdldEZlYXR1cmVTdG9yZSgpIHtcclxuICAgICAgICAgIHJldHVybiBmZWF0dXJlTGF5ZXJTdG9yZTtcclxuICAgICAgfSxcclxuICAgICAgY2xlYXI6IGZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gICAgICAgICAgZmVhdHVyZUxheWVyU3RvcmUuY2xlYXIoKTtcclxuICAgICAgfSxcclxuICAgICAgY2xlYXJBbmRBZGQ6IGZ1bmN0aW9uIGNsZWFyQW5kQWRkKGZlYXR1cmUsIHN0eWxlKSB7XHJcbiAgICAgICAgICBmZWF0dXJlTGF5ZXJTdG9yZS5jbGVhcigpO1xyXG4gICAgICAgICAgZmVhdHVyZUxheWVyLnNldFN0eWxlKHN0eWxlKTtcclxuICAgICAgICAgIGZlYXR1cmVMYXllclN0b3JlLmFkZEZlYXR1cmUoZmVhdHVyZSk7XHJcbiAgICAgIH1cclxuICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbnZhciBwZXJtYWxpbmsgPSByZXF1aXJlKCcuL3Blcm1hbGluay9wZXJtYWxpbmsnKTtcclxudmFyIGlzRW1iZWRkZWQgPSByZXF1aXJlKCcuL3V0aWxzL2lzZW1iZWRkZWQnKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcblxyXG52YXIgdG9vbHRpcDtcclxudmFyIG1hcFRhcmdldDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCAnI28tdG9vbGJhci1uYXZpZ2F0aW9uJztcclxuICBtYXBUYXJnZXQgPSB2aWV3ZXIuZ2V0VGFyZ2V0KCk7XHJcbiAgdG9vbHRpcCA9IG9wdGlvbnMudG9vbHRpcFRleHQgfHwgJ1Zpc2Egc3RvciBrYXJ0YSc7XHJcblxyXG4gIHJlbmRlcih0YXJnZXQpO1xyXG4gIGJpbmRVSUFjdGlvbnMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKHRhcmdldCkge1xyXG4gIHZhciBlbCA9IHV0aWxzLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICBpZDogJ28tZnVsbHNjcmVlbi1idXR0b24nLFxyXG4gICAgY2xzOiAnby1mdWxsc2NyZWVuLWJ1dHRvbicsXHJcbiAgICBpY29uQ2xzOiAnby1pY29uLWZhLWV4cGFuZCcsXHJcbiAgICBzcmM6ICcjZmEtZXhwYW5kJyxcclxuICAgIHRvb2x0aXBUZXh0OiB0b29sdGlwLFxyXG4gICAgdG9vbHRpcFBsYWNlbWVudDogJ2Vhc3QnXHJcbiAgfSk7XHJcbiAgaWYgKGlzRW1iZWRkZWQobWFwVGFyZ2V0KSkge1xyXG4gICAgJCh0YXJnZXQpLmFwcGVuZChlbCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICQoJyNvLWZ1bGxzY3JlZW4tYnV0dG9uIGJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGdvRnVsbFNjcmVlbigpO1xyXG4gICAgJCgnI28tZnVsbHNjcmVlbi1idXR0b24gYnV0dG9uJykuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdvRnVsbFNjcmVlbigpIHtcclxuICB2YXIgdXJsID0gcGVybWFsaW5rLmdldFBlcm1hbGluaygpO1xyXG4gIHdpbmRvdy5vcGVuKHVybCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCJ2YXIgZ2V0Y2VudGVyID0gcmVxdWlyZSgnLi9nZW9tZXRyeS9nZXRjZW50ZXInKTtcclxudmFyIGdldGFyZWEgPSByZXF1aXJlKCcuL2dlb21ldHJ5L2dldGFyZWEnKTtcclxuXHJcbnZhciBnZW9tID0ge307XHJcbmdlb20uY2VudGVyID0gZ2V0Y2VudGVyO1xyXG5nZW9tLmFyZWEgPSBnZXRhcmVhO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZW9tO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciByb3VuZCA9IHJlcXVpcmUoJy4uL3V0aWxzL3JvdW5kJyk7XHJcblxyXG52YXIgZ2V0QXJlYSA9IGZ1bmN0aW9uIGdldEFyZWEoZ2VvbWV0cnlfaW4sIGRlY2ltYWxzKSB7XHJcbiAgdmFyIGFyZWEgPSBnZW9tZXRyeV9pbi5nZXRBcmVhID8gZ2VvbWV0cnlfaW4uZ2V0QXJlYSgpIDogMDtcclxuICBpZiAoZGVjaW1hbHMpIHtcclxuICAgIGFyZWEgPSByb3VuZChhcmVhLCBkZWNpbWFscyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGFyZWEgPSByb3VuZChhcmVhLCAnMicpO1xyXG4gIH1cclxuICByZXR1cm4gYXJlYTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZXRBcmVhO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG5cclxudmFyIGdldENlbnRlciA9IGZ1bmN0aW9uIGdldENlbnRlcihnZW9tZXRyeV9pbiwgZGVzdGluYXRpb24sIGF4aXNPcmllbnRhdGlvbikge1xyXG4gICAgdmFyIGdlb21ldHJ5ID0gZ2VvbWV0cnlfaW4uY2xvbmUoKTtcclxuXHJcbiAgICBpZiAoZGVzdGluYXRpb24pIHtcclxuICAgICAgZ2VvbWV0cnkudHJhbnNmb3JtKFZpZXdlci5nZXRNYXAoKS5nZXRWaWV3KCkuZ2V0UHJvamVjdGlvbigpLCBkZXN0aW5hdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHR5cGUgPSBnZW9tZXRyeS5nZXRUeXBlKCk7XHJcbiAgICB2YXIgY2VudGVyO1xyXG4gICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgY2FzZSBcIlBvbHlnb25cIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0SW50ZXJpb3JQb2ludCgpLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJNdWx0aVBvbHlnb25cIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0SW50ZXJpb3JQb2ludHMoKS5nZXRDb29yZGluYXRlcygpWzBdO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiUG9pbnRcIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIk11bHRpUG9pbnRcIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnlbMF0uZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIkxpbmVTdHJpbmdcIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZUF0KDAuNSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJNdWx0aUxpbmVTdHJpbmdcIjpcclxuICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0TGluZVN0cmluZ3MoKVswXS5nZXRDb29yZGluYXRlQXQoMC41KTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIkNpcmNsZVwiOlxyXG4gICAgICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeS5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGF4aXNPcmllbnRhdGlvbikge1xyXG4gICAgICBpZiAoYXhpc09yaWVudGF0aW9uID09PSAncmV2ZXJzZScpIHtcclxuICAgICAgICBjZW50ZXIucmV2ZXJzZSgpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGNlbnRlcjtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZXRDZW50ZXI7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxudmFyICRnZW9sb2NhdGVCdXR0b25JZCA9IHVuZGVmaW5lZDtcclxudmFyICRnZW9sb2NhdGVCdXR0b24gPSB1bmRlZmluZWQ7XHJcbnZhciBlbmFibGVkID0gZmFsc2U7XHJcbnZhciBtYXAgPSB1bmRlZmluZWQ7XHJcbnZhciBnZW9sb2NhdGlvbiA9IHVuZGVmaW5lZDtcclxudmFyIG1hcmtlciA9IHVuZGVmaW5lZDtcclxudmFyIG1hcmtlckVsID0gdW5kZWZpbmVkO1xyXG52YXIgYmFzZVVybCA9IHVuZGVmaW5lZDtcclxudmFyIHpvb21MZXZlbDtcclxuXHJcbmZ1bmN0aW9uIGluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCAnI28tdG9vbGJhci1uYXZpZ2F0aW9uJztcclxuICBtYXAgPSB2aWV3ZXIuZ2V0TWFwKCk7XHJcbiAgYmFzZVVybCA9IHZpZXdlci5nZXRCYXNlVXJsKCk7XHJcbiAgem9vbUxldmVsID0gb3B0aW9ucy56b29tTGV2ZWwgfHwgdmlld2VyLmdldFJlc29sdXRpb25zKCkubGVuZ3RoIC0gMyB8fCAwO1xyXG5cclxuICByZW5kZXIodGFyZ2V0KTtcclxuXHJcbiAgJGdlb2xvY2F0ZUJ1dHRvbklkID0gJCgnI28tZ2VvbG9jYXRpb24tYnV0dG9uJyk7XHJcbiAgJGdlb2xvY2F0ZUJ1dHRvbiA9ICQoJyNvLWdlb2xvY2F0aW9uLWJ1dHRvbiBidXR0b24nKTtcclxuXHJcbiAgbWFya2VyRWwgPSAkKCcjby1nZW9sb2NhdGlvbl9tYXJrZXInKS5nZXQoMCk7XHJcbiAgbWFya2VyID0gbmV3IG9sLk92ZXJsYXkoe1xyXG4gICAgcG9zaXRpb25pbmc6ICdjZW50ZXItY2VudGVyJyxcclxuICAgIGVsZW1lbnQ6IG1hcmtlckVsLFxyXG4gICAgc3RvcEV2ZW50OiBmYWxzZVxyXG4gIH0pO1xyXG5cclxuICBnZW9sb2NhdGlvbiA9IG5ldyBvbC5HZW9sb2NhdGlvbigoe1xyXG4gICAgcHJvamVjdGlvbjogbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCksXHJcbiAgICB0cmFja2luZ09wdGlvbnM6IHtcclxuICAgICAgbWF4aW11bUFnZTogMTAwMDAsXHJcbiAgICAgIGVuYWJsZUhpZ2hBY2N1cmFjeTogdHJ1ZSxcclxuICAgICAgdGltZW91dDogNjAwMDAwXHJcbiAgICB9XHJcbiAgfSkpO1xyXG5cclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcih0YXJnZXQpIHtcclxuICB2YXIgdG9vbHRpcFRleHQgPSAnVmlzYSBudXZhcmFuZGUgcG9zaXRpb24gaSBrYXJ0YW4nO1xyXG4gIHZhciBzcmMgPSBiYXNlVXJsICsgJ2ltZy9nZW9sb2NhdGlvbl9tYXJrZXIucG5nJztcclxuICB2YXIgbWFya2VySW1nID0gJzxpbWcgaWQ9XCJvLWdlb2xvY2F0aW9uX21hcmtlclwiIHNyYz1cIicgKyBzcmMgKyAnXCIvPic7XHJcblxyXG4gIC8vRWxlbWVudCBmb3IgY29udHJvbFxyXG4gIHZhciBlbCA9IHV0aWxzLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICBpZDogJ28tZ2VvbG9jYXRpb24tYnV0dG9uJyxcclxuICAgIGNsczogJ28tZ2VvbG9jYXRpb24tYnV0dG9uJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tZmEtbG9jYXRpb24tYXJyb3cnLFxyXG4gICAgc3JjOiAnI2ZhLWxvY2F0aW9uLWFycm93JyxcclxuICAgIHRvb2x0aXBUZXh0OiB0b29sdGlwVGV4dCxcclxuICAgIHRvb2x0aXBQbGFjZW1lbnQ6ICdlYXN0J1xyXG4gIH0pO1xyXG4gICQodGFyZ2V0KS5hcHBlbmQoZWwpO1xyXG4gICQoJyNvLW1hcCcpLnByZXBlbmQobWFya2VySW1nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkZ2VvbG9jYXRlQnV0dG9uSWQub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgZW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgdG9nZ2xlKCk7XHJcbiAgICAkZ2VvbG9jYXRlQnV0dG9uLmJsdXIoKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlKCkge1xyXG4gIGlmICgkZ2VvbG9jYXRlQnV0dG9uLmhhc0NsYXNzKCdvLWdlb2xvY2F0aW9uLWJ1dHRvbi10cnVlJykpIHtcclxuICAgICRnZW9sb2NhdGVCdXR0b24ucmVtb3ZlQ2xhc3MoJ28tZ2VvbG9jYXRpb24tYnV0dG9uLXRydWUnKTtcclxuICAgIGdlb2xvY2F0aW9uLnNldFRyYWNraW5nKGZhbHNlKTtcclxuXHJcbiAgICBnZW9sb2NhdGlvbi51bignY2hhbmdlJywgdXBkYXRlUG9zaXRpb24pO1xyXG4gICAgbWFwLnJlbW92ZU92ZXJsYXkobWFya2VyKTtcclxuICB9IGVsc2Uge1xyXG4gICAgJGdlb2xvY2F0ZUJ1dHRvbi5hZGRDbGFzcygnby1nZW9sb2NhdGlvbi1idXR0b24tdHJ1ZScpO1xyXG4gICAgbWFwLmFkZE92ZXJsYXkobWFya2VyKTtcclxuXHJcbiAgICAvLyBMaXN0ZW4gdG8gcG9zaXRpb24gY2hhbmdlc1xyXG4gICAgZ2VvbG9jYXRpb24ub24oJ2NoYW5nZScsIHVwZGF0ZVBvc2l0aW9uKTtcclxuICAgIGdlb2xvY2F0aW9uLnNldFRyYWNraW5nKHRydWUpOyAvLyBTdGFydCBwb3NpdGlvbiB0cmFja2luZ1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlUG9zaXRpb24oKSB7XHJcbiAgYWRkUG9zaXRpb24oZ2V0UG9zaXRpb25WYWwoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFBvc2l0aW9uVmFsKCkge1xyXG4gIHZhciBjdXJyZW50ID0ge307XHJcbiAgY3VycmVudC5wb3NpdGlvbiA9IGdlb2xvY2F0aW9uLmdldFBvc2l0aW9uKCk7XHJcbiAgY3VycmVudC5hY2N1cmFjeSA9IGdlb2xvY2F0aW9uLmdldEFjY3VyYWN5KCk7XHJcbiAgY3VycmVudC5oZWFkaW5nID0gZ2VvbG9jYXRpb24uZ2V0SGVhZGluZygpIHx8IDA7XHJcbiAgY3VycmVudC5zcGVlZCA9IGdlb2xvY2F0aW9uLmdldFNwZWVkKCkgfHwgMDtcclxuICBjdXJyZW50Lm0gPSBEYXRlLm5vdygpO1xyXG4gIHJldHVybiBjdXJyZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRQb3NpdGlvbihjdXJyZW50KSB7XHJcbiAgdmFyIHBvc2l0aW9uID0gY3VycmVudC5wb3NpdGlvbjtcclxuXHJcbiAgaWYgKGVuYWJsZWQgPT09IGZhbHNlICYmIGdlb2xvY2F0aW9uLmdldFRyYWNraW5nKCkpIHtcclxuICAgIG1hcmtlci5zZXRQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICBtYXAuZ2V0VmlldygpLmFuaW1hdGUoe1xyXG4gICAgICBjZW50ZXI6IHBvc2l0aW9uLFxyXG4gICAgICB6b29tOiB6b29tTGV2ZWxcclxuICAgIH0pO1xyXG4gICAgZW5hYmxlZCA9IHRydWU7XHJcbiAgfSBlbHNlIGlmIChnZW9sb2NhdGlvbi5nZXRUcmFja2luZygpKSB7XHJcbiAgICBtYXJrZXIuc2V0UG9zaXRpb24ocG9zaXRpb24pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgZmVhdHVyZWluZm90ZW1wbGF0ZXMgPSByZXF1aXJlKCcuL2ZlYXR1cmVpbmZvdGVtcGxhdGVzJyk7XHJcbnZhciByZXBsYWNlciA9IHJlcXVpcmUoJy4uL3NyYy91dGlscy9yZXBsYWNlcicpO1xyXG52YXIgZ2VvbSA9IHJlcXVpcmUoJy4vZ2VvbScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihmZWF0dXJlLCBsYXllcikge1xyXG4gICAgdmFyIGNvbnRlbnQgPSAnPGRpdj48dWw+JztcclxuICAgIHZhciBhdHRyaWJ1dGUsIGxpID0gJycsIHRpdGxlLCB2YWw7XHJcbiAgICAvL0lmIGxheWVyIGlzIGNvbmZpZ3VyZWQgd2l0aCBhdHRyaWJ1dGVzXHJcbiAgICBpZihsYXllci5nZXQoJ2F0dHJpYnV0ZXMnKSkge1xyXG4gICAgICAgICAgLy9JZiBhdHRyaWJ1dGVzIGlzIHN0cmluZyB0aGVuIHVzZSB0ZW1wbGF0ZSBuYW1lZCB3aXRoIHRoZSBzdHJpbmdcclxuICAgICAgICAgIGlmKHR5cGVvZiBsYXllci5nZXQoJ2F0dHJpYnV0ZXMnKSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAvL1VzZSBhdHRyaWJ1dGVzIHdpdGggdGhlIHRlbXBsYXRlXHJcbiAgICAgICAgICAgICAgbGkgPSBmZWF0dXJlaW5mb3RlbXBsYXRlcyhsYXllci5nZXQoJ2F0dHJpYnV0ZXMnKSxmZWF0dXJlLmdldFByb3BlcnRpZXMoKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICBmb3IodmFyIGk9MDsgaTxsYXllci5nZXQoJ2F0dHJpYnV0ZXMnKS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlID0gbGF5ZXIuZ2V0KCdhdHRyaWJ1dGVzJylbaV07XHJcbiAgICAgICAgICAgICAgICB0aXRsZSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgdmFsID0gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlWyduYW1lJ10pIHtcclxuICAgICAgICAgICAgICAgICAgaWYoZmVhdHVyZS5nZXQoYXR0cmlidXRlWyduYW1lJ10pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB2YWwgPSBmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ25hbWUnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlWyd0aXRsZSddKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlID0gJzxiPicgKyBhdHRyaWJ1dGVbJ3RpdGxlJ10gKyAnPC9iPic7XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlWyd1cmwnXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ3VybCddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gY3JlYXRlVXJsKGF0dHJpYnV0ZVsndXJsUHJlZml4J10sIGF0dHJpYnV0ZVsndXJsU3VmZml4J10sIHJlcGxhY2VyLnJlcGxhY2UoZmVhdHVyZS5nZXQoYXR0cmlidXRlWyd1cmwnXSksIGZlYXR1cmUuZ2V0UHJvcGVydGllcygpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9ICc8YSBocmVmPVwiJyArIHVybCArICdcIiB0YXJnZXQ9XCJfYmxhbmtcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5nZXQoYXR0cmlidXRlWyduYW1lJ10pICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvYT4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZVsndXJsJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ3VybCddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IGF0dHJpYnV0ZVsnaHRtbCddIHx8IGF0dHJpYnV0ZVsndXJsJ107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBjcmVhdGVVcmwoYXR0cmlidXRlWyd1cmxQcmVmaXgnXSwgYXR0cmlidXRlWyd1cmxTdWZmaXgnXSwgcmVwbGFjZXIucmVwbGFjZShmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ3VybCddKSwgZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCkpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsID0gJzxhIGhyZWY9XCInICsgdXJsICsgJ1wiIHRhcmdldD1cIl9ibGFua1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvYT4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZVsnaW1nJ10pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihmZWF0dXJlLmdldChhdHRyaWJ1dGVbJ2ltZyddKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gY3JlYXRlVXJsKGF0dHJpYnV0ZVsndXJsUHJlZml4J10sIGF0dHJpYnV0ZVsndXJsU3VmZml4J10sIHJlcGxhY2VyLnJlcGxhY2UoZmVhdHVyZS5nZXQoYXR0cmlidXRlWydpbWcnXSksIGZlYXR1cmUuZ2V0UHJvcGVydGllcygpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGlvbiA9IGF0dHJpYnV0ZVsnYXR0cmlidXRpb24nXSA/ICc8ZGl2IGNsYXNzPVwiby1pbWFnZS1hdHRyaWJ1dGlvblwiPicgKyBhdHRyaWJ1dGVbJ2F0dHJpYnV0aW9uJ10gKyAnPC9kaXY+JyA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWwgPSAnPGRpdiBjbGFzcz1cIm8taW1hZ2UtY29udGFpbmVyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBzcmM9XCInICsgdXJsICsgJ1wiPicgKyBhdHRyaWJ1dGlvbiArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGF0dHJpYnV0ZVsnaHRtbCddKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhbCA9IHJlcGxhY2VyLnJlcGxhY2UoYXR0cmlidXRlWydodG1sJ10sIGZlYXR1cmUuZ2V0UHJvcGVydGllcygpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVscGVyOiBnZW9tLFxyXG4gICAgICAgICAgICAgICAgICAgIGhlbHBlckFyZzogZmVhdHVyZS5nZXRHZW9tZXRyeSgpXHJcbiAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjbHMgPSAnIGNsYXNzPVwiJyArIGF0dHJpYnV0ZVsnY2xzJ10gKyAnXCIgJyB8fCAnJztcclxuXHJcbiAgICAgICAgICAgICAgICBsaSArPSAnPGxpJyArIGNscyArJz4nICsgdGl0bGUgKyB2YWwgKyAnPC9saT4nO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgLy9DbGVhbiBmZWF0dXJlIGF0dHJpYnV0ZXMgZnJvbSBub24td2FudGVkIHByb3BlcnRpZXNcclxuICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBmaWx0ZXJPYmplY3QoZmVhdHVyZS5nZXRQcm9wZXJ0aWVzKCksIFsnRklEXycsICdnZW9tZXRyeSddKTtcclxuICAgICAgLy9Vc2UgYXR0cmlidXRlcyB3aXRoIHRoZSB0ZW1wbGF0ZVxyXG4gICAgICBsaSA9IGZlYXR1cmVpbmZvdGVtcGxhdGVzKCdkZWZhdWx0JyxhdHRyaWJ1dGVzKTtcclxuICAgIH1cclxuICAgIGNvbnRlbnQgKz0gbGkgKyAnPC91bD48L2Rpdj4nO1xyXG4gICAgcmV0dXJuIGNvbnRlbnQ7XHJcbn1cclxuZnVuY3Rpb24gZmlsdGVyT2JqZWN0KG9iaiwgZXhjbHVkZWRLZXlzKSB7XHJcbiAgICB2YXIgcmVzdWx0ID0ge30sIGtleTtcclxuICAgIGZvciAoa2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmKGV4Y2x1ZGVkS2V5cy5pbmRleE9mKGtleSkgPT09IC0xKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFtrZXldID0gb2JqW2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVVcmwocHJlZml4LCBzdWZmaXgsIHVybCkge1xyXG4gICAgdmFyIHAgPSBwcmVmaXggfHwgJyc7XHJcbiAgICB2YXIgcyA9IHN1ZmZpeCB8fCAnJztcclxuICAgIHJldHVybiBwICsgdXJsICsgcztcclxufVxyXG4iLCJ2YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG5cclxudmFyIHNvdXJjZVR5cGUgPSB7fTtcclxudmFyIHByb2plY3Rpb25Db2RlO1xyXG52YXIgc291cmNlO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpZCwgbGF5ZXIpIHtcclxuICAgIHByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgICBzb3VyY2UgPSB2aWV3ZXIuZ2V0TWFwU291cmNlKCk7XHJcbiAgICB2YXIgc2VydmVyVXJsID0gc291cmNlW2xheWVyLmdldCgnc291cmNlTmFtZScpXS51cmw7XHJcbiAgICB2YXIgdHlwZSA9IGxheWVyLmdldCgndHlwZScpO1xyXG4gICAgLy9yZXR1cm5zIGEgcHJvbWlzZSB3aXRoIGZlYXR1cmVzIGFzIHJlc3VsdFxyXG4gICAgcmV0dXJuIHNvdXJjZVR5cGVbdHlwZV0oaWQsIGxheWVyLCBzZXJ2ZXJVcmwpO1xyXG59XHJcblxyXG5zb3VyY2VUeXBlLkFHU19GRUFUVVJFID0gZnVuY3Rpb24gYWdzRmVhdHVyZShpZCwgbGF5ZXIsIHNlcnZlclVybCkge1xyXG4gIHZhciBlc3JpU3JzID0gcHJvamVjdGlvbkNvZGUuc3BsaXQoJzonKS5wb3AoKTtcclxuICB2YXIgbGF5ZXJJZCA9IGxheWVyLmdldCgnaWQnKTtcclxuICB2YXIgZXNyaWpzb25Gb3JtYXQgPSBuZXcgb2wuZm9ybWF0LkVzcmlKU09OKCk7XHJcblxyXG4gIHZhciB1cmwgPSBzZXJ2ZXJVcmwgKyAnLycgKyBsYXllcklkICtcclxuICAgICAgJy9xdWVyeT9mPWpzb24mJyArXHJcbiAgICAgICdyZXR1cm5HZW9tZXRyeT10cnVlJyArXHJcbiAgICAgICcmb2JqZWN0SWRzPScgKyBpZCArXHJcbiAgICAgICcmZ2VvbWV0cnlUeXBlPWVzcmlHZW9tZXRyeUVudmVsb3BlJytcclxuICAgICAgJyZpblNSPScgKyBlc3JpU3JzICtcclxuICAgICAgJyZvdXRGaWVsZHM9KicgK1xyXG4gICAgICAnJnJldHVybklkc09ubHk9ZmFsc2UnICtcclxuICAgICAgJyZyZXR1cm5Db3VudE9ubHk9ZmFsc2UnICtcclxuICAgICAgJyZnZW9tZXRyeVByZWNpc2lvbj0yJyArXHJcbiAgICAgICcmb3V0U1I9JyArIGVzcmlTcnM7XHJcblxyXG4gIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbnAnXHJcbiAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgaWYocmVzcG9uc2UuZXJyb3IpIHtcclxuICAgICAgICAgICAgZmFpbChyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IGVzcmlqc29uRm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVQcm9qZWN0aW9uOiB2aWV3ZXIuZ2V0UHJvamVjdGlvbigpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZmVhdHVyZXM7XHJcbiAgICAgICAgfVxyXG4gICAgfSwgZmFpbFxyXG4gICAgKTtcclxufVxyXG5cclxuc291cmNlVHlwZS5XRlMgPSBmdW5jdGlvbihpZCwgbGF5ZXIsIHNlcnZlclVybCkge1xyXG4gIHZhciBnZW9tZXRyeU5hbWUgPSBsYXllci5nZXQoJ2dlb21ldHJ5TmFtZScpO1xyXG4gIHZhciBmb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oe2dlb21ldHJ5TmFtZTogZ2VvbWV0cnlOYW1lfSk7XHJcbiAgdmFyIHVybCA9IHNlcnZlclVybCArJz8nO1xyXG4gIHZhciBkYXRhID0gJ3NlcnZpY2U9V0ZTJyArXHJcbiAgICAgICcmdmVyc2lvbj0xLjAuMCcgK1xyXG4gICAgICAnJnJlcXVlc3Q9R2V0RmVhdHVyZSZ0eXBlTmFtZT0nICsgbGF5ZXIuZ2V0KCduYW1lJykgK1xyXG4gICAgICAnJm91dHB1dEZvcm1hdD1qc29uJyArXHJcbiAgICAgICcmZmVhdHVyZUlkPScgKyBpZDtcclxuICByZXR1cm4gJC5hamF4KHtcclxuICAgIHVybDogdXJsLFxyXG4gICAgZGF0YTogZGF0YSxcclxuICAgIHR5cGU6ICdQT1NUJyxcclxuICAgIGRhdGFUeXBlOiAnanNvbidcclxuICB9KVxyXG4gICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gZm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZmFpbChyZXNwb25zZSkge1xyXG4gICAgaWYocmVzcG9uc2UuZXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5lcnJvci5tZXNzYWdlICsgJ1xcbicgK1xyXG4gICAgICAgICAgICByZXNwb25zZS5lcnJvci5kZXRhaWxzLmpvaW4oJ1xcbicpKTtcclxuICAgIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIG1hcHV0aWxzID0gcmVxdWlyZSgnLi9tYXB1dGlscycpO1xyXG52YXIgZ2V0QXR0cmlidXRlcyA9IHJlcXVpcmUoJy4vZ2V0YXR0cmlidXRlcycpO1xyXG52YXIgZmVhdHVyZUluZm8gPSByZXF1aXJlKCcuL2ZlYXR1cmVpbmZvJyk7XHJcblxyXG52YXIgbWFwO1xyXG5cclxuZnVuY3Rpb24gZ2V0RmVhdHVyZXNGcm9tUmVtb3RlKGV2dCkge1xyXG4gICAgICAgIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuICAgICAgICB2YXIgcmVxdWVzdFJlc3VsdCA9IFtdO1xyXG4gICAgICAgIHZhciByZXF1ZXN0UHJvbWlzZXMgPSBnZXRGZWF0dXJlSW5mb1JlcXVlc3RzKGV2dCkubWFwKGZ1bmN0aW9uKHJlcXVlc3QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QuZm4udGhlbihmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbGF5ZXIgPSBWaWV3ZXIuZ2V0TGF5ZXIocmVxdWVzdC5sYXllcik7XHJcbiAgICAgICAgICAgICAgICBpZihmZWF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFJlc3VsdC5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGxheWVyLmdldCgndGl0bGUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZTogZmVhdHVyZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogZ2V0QXR0cmlidXRlcyhmZWF0dXJlLCBsYXllcilcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuICQud2hlbi5hcHBseSgkLCByZXF1ZXN0UHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVxdWVzdFJlc3VsdDtcclxuICAgICAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRGZWF0dXJlSW5mb1JlcXVlc3RzKGV2dCkge1xyXG4gICAgdmFyIHJlcXVlc3RzID0gW107XHJcbiAgICAvL0NoZWNrIGZvciBzdXBwb3J0IG9mIGNyb3NzT3JpZ2luIGluIGltYWdlLCBhYnNlbnQgaW4gSUUgOCBhbmQgOVxyXG4gICAgaWYoJ2Nyb3NzT3JpZ2luJyBpbiBuZXcoSW1hZ2UpKSB7XHJcbiAgICAgICAgbWFwLmZvckVhY2hMYXllckF0UGl4ZWwoZXZ0LnBpeGVsLCBmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgICAgICBpZiAobGF5ZXIuZ2V0KCdxdWVyeWFibGUnKSkge1xyXG4gICAgICAgICAgICAgIHZhciBpdGVtID0gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGxheWVyLCBldnQuY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgICAgaWYoaXRlbSkge3JlcXVlc3RzLnB1c2goaXRlbSl9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvL0lmIGNhbnZhcyBpcyB0YWludGVkXHJcbiAgICBlbHNlIGlmKGlzVGFpbnRlZChldnQucGl4ZWwpKSB7XHJcbiAgICAgICAgdmFyIGxheWVycyA9IFZpZXdlci5nZXRRdWVyeWFibGVMYXllcnMoKTtcclxuICAgICAgICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgICAgICBpZiAobGF5ZXIuZ2V0KCdxdWVyeWFibGUnKSkge1xyXG5cclxuICAgICAgICAgICAgICAvL0lmIGxheWVyIGlzIHRhaW50ZWQsIHRoZW4gY3JlYXRlIHJlcXVlc3QgZm9yIGxheWVyXHJcbiAgICAgICAgICAgICAgaWYoaXNUYWludGVkKGV2dC5waXhlbCwgbGF5ZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGxheWVyLCBldnQuY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgIGlmKGl0ZW0pIHtyZXF1ZXN0cy5wdXNoKGl0ZW0pfTtcclxuICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgIC8vSWYgbGF5ZXIgaXMgbm90IHRhaW50ZWQsIHRlc3QgaWYgbGF5ZXIgaGl0IGF0IHBpeGVsXHJcbiAgICAgICAgICAgICAgZWxzZSBpZihsYXllckF0UGl4ZWwoZXZ0LnBpeGVsLCBsYXllcikpe1xyXG4gICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IGdldEdldEZlYXR1cmVJbmZvUmVxdWVzdChsYXllciwgZXZ0LmNvb3JkaW5hdGUpO1xyXG4gICAgICAgICAgICAgICAgICBpZihpdGVtKSB7cmVxdWVzdHMucHVzaChpdGVtKX07XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvL0lmIGNyb3NzT3JpZ2luIGlzIG5vdCBzdXBwb3J0ZWQgYW5kIGNhbnZhcyBub3QgdGFpbnRlZFxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgbWFwLmZvckVhY2hMYXllckF0UGl4ZWwoZXZ0LnBpeGVsLCBmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgICAgICBpZiAobGF5ZXIuZ2V0KCdxdWVyeWFibGUnKSA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgIHZhciBpdGVtID0gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGxheWVyLCBldnQuY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgICAgaWYgKGl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RzLnB1c2goaXRlbSlcclxuICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVxdWVzdHM7XHJcbn1cclxuZnVuY3Rpb24gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGxheWVyLCBjb29yZGluYXRlKSB7XHJcbiAgICB2YXIgbGF5ZXJUeXBlID0gbGF5ZXIuZ2V0KCd0eXBlJyksXHJcbiAgICBvYmogPSB7fTtcclxuICAgIG9iai5sYXllciA9IGxheWVyLmdldCgnbmFtZScpO1xyXG5cclxuICAgIHN3aXRjaCAobGF5ZXJUeXBlKSB7XHJcbiAgICAgIGNhc2UgJ1dNVFMnOlxyXG4gICAgICAgIGlmKGxheWVyLmdldCgnZmVhdHVyZWluZm9MYXllcicpKSB7XHJcbiAgICAgICAgICAgIHZhciBmZWF0dXJlaW5mb0xheWVyTmFtZSA9IGxheWVyLmdldCgnZmVhdHVyZWluZm9MYXllcicpLFxyXG4gICAgICAgICAgICBmZWF0dXJlaW5mb0xheWVyID0gVmlld2VyLmdldExheWVyKGZlYXR1cmVpbmZvTGF5ZXJOYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEdldEZlYXR1cmVJbmZvUmVxdWVzdChmZWF0dXJlaW5mb0xheWVyLCBjb29yZGluYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlICdXTVMnOlxyXG4gICAgICAgIGlmKGxheWVyLmdldCgnZmVhdHVyZWluZm9MYXllcicpKSB7XHJcbiAgICAgICAgICAgIHZhciBmZWF0dXJlaW5mb0xheWVyTmFtZSA9IGxheWVyLmdldCgnZmVhdHVyZWluZm9MYXllcicpLFxyXG4gICAgICAgICAgICBmZWF0dXJlaW5mb0xheWVyID0gVmlld2VyLmdldExheWVyKGZlYXR1cmVpbmZvTGF5ZXJOYW1lKTtcclxuICAgICAgICAgICAgcmV0dXJuIGdldEdldEZlYXR1cmVJbmZvUmVxdWVzdChmZWF0dXJlaW5mb0xheWVyLCBjb29yZGluYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9iai5jYiA9IFwiR0VPSlNPTlwiO1xyXG4gICAgICAgICAgICBvYmouZm4gPSBnZXRHZXRGZWF0dXJlSW5mb1VybChsYXllciwgY29vcmRpbmF0ZSk7XHJcbiAgICAgICAgICAgIHJldHVybiBvYmo7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhc2UgJ0FHU19USUxFJzpcclxuICAgICAgICAgICAgaWYobGF5ZXIuZ2V0KCdmZWF0dXJlaW5mb0xheWVyJykpIHtcclxuICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlaW5mb0xheWVyTmFtZSA9IGxheWVyLmdldCgnZmVhdHVyZWluZm9MYXllcicpLFxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZWluZm9MYXllciA9IFZpZXdlci5nZXRMYXllcihmZWF0dXJlaW5mb0xheWVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2V0R2V0RmVhdHVyZUluZm9SZXF1ZXN0KGZlYXR1cmVpbmZvTGF5ZXIsIGNvb3JkaW5hdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgb2JqLmZuID0gZ2V0QUdTSWRlbnRpZnlVcmwobGF5ZXIsIGNvb3JkaW5hdGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICAgICAgfVxyXG4gICAgICBkZWZhdWx0OlxyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNUYWludGVkKHBpeGVsLCBsYXllckZpbHRlcikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBpZihsYXllckZpbHRlcikge1xyXG4gICAgICAgICAgICBtYXAuZm9yRWFjaExheWVyQXRQaXhlbChwaXhlbCwgZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBsYXllckZpbHRlciA9PT0gbGF5ZXI7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgbWFwLmZvckVhY2hMYXllckF0UGl4ZWwocGl4ZWwsIGZ1bmN0aW9uKGxheWVyKSB7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNhdGNoKGUpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBsYXllckF0UGl4ZWwocGl4ZWwsIG1hdGNoTGF5ZXIpIHtcclxuICAgIG1hcC5mb3JFYWNoTGF5ZXJBdFBpeGVsKHBpeGVsLCBmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgIHJldHVybiBtYXRjaExheWVyID09PSBsYXllcjtcclxuICAgIH0pXHJcbn1cclxuZnVuY3Rpb24gZ2V0RmVhdHVyZXNBdFBpeGVsKGV2dCwgY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWwpIHtcclxuICAgIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuICAgIHZhciByZXN1bHQgPSBbXSxcclxuICAgIGNsdXN0ZXIgPSBmYWxzZTtcclxuICAgIG1hcC5mb3JFYWNoRmVhdHVyZUF0UGl4ZWwoZXZ0LnBpeGVsLFxyXG4gICAgICAgIGZ1bmN0aW9uKGZlYXR1cmUsIGxheWVyKSB7XHJcbiAgICAgICAgICB2YXIgbCA9IGxheWVyO1xyXG4gICAgICAgICAgdmFyIHF1ZXJ5YWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgaWYobGF5ZXIpIHtcclxuICAgICAgICAgICAgICBxdWVyeWFibGUgPSBsYXllci5nZXQoJ3F1ZXJ5YWJsZScpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoZmVhdHVyZS5nZXQoJ2ZlYXR1cmVzJykpIHtcclxuICAgICAgICAgICAgICAvL0lmIGNsdXN0ZXJcclxuICAgICAgICAgICAgICB2YXIgY29sbGVjdGlvbiA9IGZlYXR1cmUuZ2V0KCdmZWF0dXJlcycpO1xyXG4gICAgICAgICAgICAgIGlmIChjb2xsZWN0aW9uLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHZhciB6b29tID0gbWFwLmdldFZpZXcoKS5nZXRab29tKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgem9vbUxpbWl0ID0gY2x1c3RlckZlYXR1cmVpbmZvTGV2ZWwgPT09IC0xID8gVmlld2VyLmdldFJlc29sdXRpb25zKCkubGVuZ3RoIDogem9vbSArIGNsdXN0ZXJGZWF0dXJlaW5mb0xldmVsO1xyXG4gICAgICAgICAgICAgICAgaWYoem9vbUxpbWl0IDwgVmlld2VyLmdldFJlc29sdXRpb25zKCkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFwLmdldFZpZXcoKS5zZXRDZW50ZXIoZXZ0LmNvb3JkaW5hdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcC5nZXRWaWV3KCkuc2V0Wm9vbSh6b29tICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2x1c3RlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmZvckVhY2goZnVuY3Rpb24oZikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS50aXRsZSA9IGwuZ2V0KCd0aXRsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uZmVhdHVyZSA9IGY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5jb250ZW50ID0gIGdldEF0dHJpYnV0ZXMoZixsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSBpZihjb2xsZWN0aW9uLmxlbmd0aCA9PSAxICYmIHF1ZXJ5YWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICBpdGVtLnRpdGxlID0gbC5nZXQoJ3RpdGxlJyk7XHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0uZmVhdHVyZSA9IGNvbGxlY3Rpb25bMF07XHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0uY29udGVudCA9IGdldEF0dHJpYnV0ZXMoY29sbGVjdGlvblswXSxsKTtcclxuICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZWxzZSBpZihxdWVyeWFibGUpIHtcclxuICAgICAgICAgICAgICB2YXIgaXRlbSA9IHt9O1xyXG4gICAgICAgICAgICAgIGl0ZW0udGl0bGUgPSBsLmdldCgndGl0bGUnKTtcclxuICAgICAgICAgICAgICBpdGVtLmZlYXR1cmUgPSBmZWF0dXJlO1xyXG4gICAgICAgICAgICAgIGl0ZW0uY29udGVudCA9IGdldEF0dHJpYnV0ZXMoZmVhdHVyZSxsKVxyXG4gICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaGl0VG9sZXJhbmNlOiBmZWF0dXJlSW5mby5nZXRIaXRUb2xlcmFuY2UoKVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIGlmKGNsdXN0ZXIpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldEdldEZlYXR1cmVJbmZvVXJsKGxheWVyLCBjb29yZGluYXRlKSB7XHJcbiAgICB2YXIgdXJsID0gbGF5ZXIuZ2V0U291cmNlKCkuZ2V0R2V0RmVhdHVyZUluZm9VcmwoXHJcbiAgICBjb29yZGluYXRlLCBtYXAuZ2V0VmlldygpLmdldFJlc29sdXRpb24oKSwgVmlld2VyLmdldFByb2plY3Rpb24oKSxcclxuICAgIHsnSU5GT19GT1JNQVQnOiAnYXBwbGljYXRpb24vanNvbid9KTtcclxuXHJcbiAgICByZXR1cm4gJC5hamF4KHVybCwge1xyXG4gICAgICB0eXBlOiAncG9zdCdcclxuICAgIH0pXHJcbiAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIGlmKHJlc3BvbnNlLmVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXB1dGlscy5nZW9qc29uVG9GZWF0dXJlKHJlc3BvbnNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICApO1xyXG59XHJcbmZ1bmN0aW9uIGdldEFHU0lkZW50aWZ5VXJsKGxheWVyLCBjb29yZGluYXRlKSB7XHJcbiAgdmFyIHByb2plY3Rpb25Db2RlID0gVmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgdmFyIGVzcmlTcnMgPSBwcm9qZWN0aW9uQ29kZS5zcGxpdCgnOicpLnBvcCgpO1xyXG4gIHZhciBsYXllcklkID0gbGF5ZXIuZ2V0KCdpZCcpO1xyXG4gIHZhciBzb3VyY2UgPSBWaWV3ZXIuZ2V0TWFwU291cmNlKClbbGF5ZXIuZ2V0KCdzb3VyY2VOYW1lJyldO1xyXG4gIHZhciBzZXJ2ZXJVcmwgPSBzb3VyY2UudXJsO1xyXG4gIHZhciBlc3JpanNvbkZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuRXNyaUpTT04oKTtcclxuICB2YXIgc2l6ZSA9IG1hcC5nZXRTaXplKCk7XHJcbiAgdmFyIHRvbGVyYW5jZSA9IHNvdXJjZS5oYXNPd25Qcm9wZXJ0eSgndG9sZXJhbmNlJykgPyBzb3VyY2UudG9sZXJhbmNlLnRvU3RyaW5nKCkgOiA1O1xyXG4gIHZhciBleHRlbnQgPSBtYXAuZ2V0VmlldygpLmNhbGN1bGF0ZUV4dGVudChzaXplKTtcclxuXHJcbiAgdmFyIHVybCA9IHNlcnZlclVybCArXHJcbiAgICAgICcvaWRlbnRpZnk/Zj1qc29uJicgK1xyXG4gICAgICAncmV0dXJuR2VvbWV0cnk9dHJ1ZScgK1xyXG4gICAgICAnJmdlb21ldHJ5VHlwZT1lc3JpR2VvbWV0cnlQb2ludCcrXHJcbiAgICAgICcmc3I9JyArIGVzcmlTcnMgK1xyXG4gICAgICAnJmdlb21ldHJ5PScgKyBjb29yZGluYXRlICtcclxuICAgICAgJyZvdXRGaWVsZHM9KicgK1xyXG4gICAgICAnJmdlb21ldHJ5UHJlY2lzaW9uPTInICtcclxuICAgICAgJyZ0b2xlcmFuY2U9JyArIHRvbGVyYW5jZSArXHJcbiAgICAgICcmbGF5ZXJzPWFsbDonICsgbGF5ZXJJZCArXHJcbiAgICAgICcmbWFwRXh0ZW50PScgKyBleHRlbnQgK1xyXG4gICAgICAnJmltYWdlRGlzcGxheT0nICsgc2l6ZSArICcsJyArICc5Nic7XHJcblxyXG4gIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGRhdGFUeXBlOiAnanNvbnAnXHJcbiAgfSlcclxuICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgaWYocmVzcG9uc2UuZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgICAgICBvYmouZmVhdHVyZXMgPSByZXNwb25zZS5yZXN1bHRzO1xyXG4gICAgICAgICAgICB2YXIgZmVhdHVyZXMgPSBlc3JpanNvbkZvcm1hdC5yZWFkRmVhdHVyZXMob2JqLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZVByb2plY3Rpb246IFZpZXdlci5nZXRQcm9qZWN0aW9uKClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmZWF0dXJlc1swXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICApO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5nZXRGZWF0dXJlc0Zyb21SZW1vdGUgPSBnZXRGZWF0dXJlc0Zyb21SZW1vdGU7XHJcbm1vZHVsZS5leHBvcnRzLmdldEZlYXR1cmVzQXRQaXhlbCA9IGdldEZlYXR1cmVzQXRQaXhlbDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcblxyXG52YXIgbWFwO1xyXG52YXIgdG9vbHRpcDtcclxudmFyIGV4dGVudDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciB0YXJnZXQgPSBvcHRpb25zLnRhcmdldCB8fCAnI28tdG9vbGJhci1uYXZpZ2F0aW9uJztcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcbiAgdG9vbHRpcCA9IG9wdGlvbnMudG9vbHRpcFRleHQgfHwgJ1pvb21hIHRpbGwgaGVsYSBrYXJ0YW4nO1xyXG4gIGV4dGVudCA9IG9wdGlvbnMuZXh0ZW50IHx8IG1hcC5nZXRWaWV3KCkuY2FsY3VsYXRlRXh0ZW50KG1hcC5nZXRTaXplKCkpO1xyXG4gIHJlbmRlcih0YXJnZXQpO1xyXG4gIGJpbmRVSUFjdGlvbnMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKHRhcmdldCkge1xyXG4gIHZhciBlbCA9IHV0aWxzLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICBpZDogJ28taG9tZS1idXR0b24nLFxyXG4gICAgaWNvbkNsczogJ28taWNvbi1mYS1ob21lJyxcclxuICAgIHNyYzogJyNmYS1ob21lJyxcclxuICAgIHRvb2x0aXBUZXh0OiB0b29sdGlwXHJcbiAgfSk7XHJcbiAgJCh0YXJnZXQpLmFwcGVuZChlbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgJCgnI28taG9tZS1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICBtYXAuZ2V0VmlldygpLmZpdChleHRlbnQpO1xyXG4gICAgJCgnI28taG9tZS1idXR0b24gYnV0dG9uJykuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gSW5pdDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHZlY3RvciA9IHJlcXVpcmUoJy4vdmVjdG9yJyk7XHJcblxyXG52YXIgYWdzRmVhdHVyZSA9IGZ1bmN0aW9uIGFnc0ZlYXR1cmUobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIGFnc0RlZmF1bHQgPSB7XHJcbiAgICBsYXllclR5cGU6ICd2ZWN0b3InXHJcbiAgfTtcclxuICB2YXIgc291cmNlRGVmYXVsdCA9IHt9O1xyXG4gIHZhciBhZ3NPcHRpb25zID0gJC5leHRlbmQoYWdzRGVmYXVsdCwgbGF5ZXJPcHRpb25zKTtcclxuICB2YXIgc291cmNlT3B0aW9ucyA9ICQuZXh0ZW5kKHNvdXJjZURlZmF1bHQsIHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllck9wdGlvbnMuc291cmNlTmFtZV0pO1xyXG4gIHNvdXJjZU9wdGlvbnMuZ2VvbWV0cnlOYW1lID0gYWdzT3B0aW9ucy5nZW9tZXRyeU5hbWU7XHJcbiAgc291cmNlT3B0aW9ucy5maWx0ZXIgPSBhZ3NPcHRpb25zLmZpbHRlcjtcclxuICBzb3VyY2VPcHRpb25zLmF0dHJpYnV0aW9uID0gYWdzT3B0aW9ucy5hdHRyaWJ1dGlvbjtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgc291cmNlT3B0aW9ucy5pZCA9IGFnc09wdGlvbnMuaWQ7XHJcblxyXG4gIHZhciBhZ3NTb3VyY2UgPSBjcmVhdGVTb3VyY2Uoc291cmNlT3B0aW9ucyk7XHJcbiAgcmV0dXJuIHZlY3RvcihhZ3NPcHRpb25zLCBhZ3NTb3VyY2UpO1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVTb3VyY2Uob3B0aW9ucykge1xyXG4gICAgdmFyIHZlY3RvclNvdXJjZSA9IG51bGw7XHJcbiAgICB2YXIgZXNyaVNycyA9IG9wdGlvbnMucHJvamVjdGlvbkNvZGUuc3BsaXQoJzonKS5wb3AoKTtcclxuICAgIHZhciBxdWVyeUZpbHRlciA9IG9wdGlvbnMuZmlsdGVyID8gJyZ3aGVyZT0nICsgb3B0aW9ucy5maWx0ZXIgOiAnJztcclxuICAgIHZhciBlc3JpanNvbkZvcm1hdCA9IG5ldyBvbC5mb3JtYXQuRXNyaUpTT04oKTtcclxuICAgIHZlY3RvclNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuVmVjdG9yKHtcclxuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9uLFxyXG4gICAgICBsb2FkZXI6IGZ1bmN0aW9uKGV4dGVudCwgcmVzb2x1dGlvbiwgcHJvamVjdGlvbikge1xyXG4gICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICB2YXIgdXJsID0gb3B0aW9ucy51cmwgKyBvcHRpb25zLmlkICtcclxuICAgICAgICAgIGVuY29kZVVSSSgnL3F1ZXJ5P2Y9anNvbiYnICtcclxuICAgICAgICAgICAgJ3JldHVybkdlb21ldHJ5PXRydWUnICtcclxuICAgICAgICAgICAgJyZzcGF0aWFsUmVsPWVzcmlTcGF0aWFsUmVsSW50ZXJzZWN0cycgK1xyXG4gICAgICAgICAgICAnJmdlb21ldHJ5PScgKyAne1wieG1pblwiOicgKyBleHRlbnRbMF0gKyAnLFwieW1pblwiOicgK1xyXG4gICAgICAgICAgICAgIGV4dGVudFsxXSArICcsXCJ4bWF4XCI6JyArIGV4dGVudFsyXSArICcsXCJ5bWF4XCI6JyArIGV4dGVudFszXSArXHJcbiAgICAgICAgICAgICAgJyxcInNwYXRpYWxSZWZlcmVuY2VcIjp7XCJ3a2lkXCI6JyArIGVzcmlTcnMgKyAnfX0nICtcclxuICAgICAgICAgICAgJyZnZW9tZXRyeVR5cGU9ZXNyaUdlb21ldHJ5RW52ZWxvcGUnICtcclxuICAgICAgICAgICAgJyZpblNSPScgKyBlc3JpU3JzICsgJyZvdXRGaWVsZHM9KicgKyAnJyArXHJcbiAgICAgICAgICAgICcmcmV0dXJuSWRzT25seT1mYWxzZSZyZXR1cm5Db3VudE9ubHk9ZmFsc2UnICtcclxuICAgICAgICAgICAgJyZnZW9tZXRyeVByZWNpc2lvbj0yJyArXHJcbiAgICAgICAgICAgICcmb3V0U1I9JyArIGVzcmlTcnMgKyBxdWVyeUZpbHRlcik7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgZGF0YVR5cGU6ICdqc29ucCcsXHJcbiAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UuZXJyb3IpIHtcclxuICAgICAgICAgICAgICBhbGVydChyZXNwb25zZS5lcnJvci5tZXNzYWdlICsgJ1xcbicgK1xyXG4gICAgICAgICAgICAgICAgcmVzcG9uc2UuZXJyb3IuZGV0YWlscy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgIC8vIGRhdGFQcm9qZWN0aW9uIHdpbGwgYmUgcmVhZCBmcm9tIGRvY3VtZW50XHJcbiAgICAgICAgICAgICAgdmFyIGZlYXR1cmVzID0gZXNyaWpzb25Gb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlLCB7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlUHJvamVjdGlvbjogcHJvamVjdGlvblxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIGlmIChmZWF0dXJlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGF0LmFkZEZlYXR1cmVzKGZlYXR1cmVzKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgc3RyYXRlZ3k6IG9sLmxvYWRpbmdzdHJhdGVneS5iYm94XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB2ZWN0b3JTb3VyY2U7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGFnc0ZlYXR1cmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi4vdmlld2VyJyk7XHJcbnZhciB0aWxlID0gcmVxdWlyZSgnLi90aWxlJyk7XHJcblxyXG52YXIgYWdzVGlsZSA9IGZ1bmN0aW9uIGFnc1RpbGUobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIGFnc0RlZmF1bHQgPSB7XHJcbiAgICBsYXllclR5cGU6ICd0aWxlJyxcclxuICAgIGZlYXR1cmVpbmZvTGF5ZXI6IHVuZGVmaW5lZFxyXG4gIH07XHJcbiAgdmFyIHNvdXJjZURlZmF1bHQgPSB7fTtcclxuICB2YXIgYWdzT3B0aW9ucyA9ICQuZXh0ZW5kKGFnc0RlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSAkLmV4dGVuZChzb3VyY2VEZWZhdWx0LCB2aWV3ZXIuZ2V0TWFwU291cmNlKClbbGF5ZXJPcHRpb25zLnNvdXJjZV0pO1xyXG4gIHNvdXJjZU9wdGlvbnMuYXR0cmlidXRpb24gPSBhZ3NPcHRpb25zLmF0dHJpYnV0aW9uO1xyXG4gIHNvdXJjZU9wdGlvbnMucHJvamVjdGlvbkNvZGUgPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbkNvZGUoKTtcclxuICBzb3VyY2VPcHRpb25zLnBhcmFtcyA9IGFnc09wdGlvbnMucGFyYW1zIHx8IHt9O1xyXG4gIHNvdXJjZU9wdGlvbnMucGFyYW1zLmxheWVycyA9IFwic2hvdzpcIiArIGFnc09wdGlvbnMuaWQ7XHJcblxyXG4gIHZhciBhZ3NTb3VyY2UgPSBjcmVhdGVTb3VyY2Uoc291cmNlT3B0aW9ucyk7XHJcbiAgcmV0dXJuIHRpbGUoYWdzT3B0aW9ucywgYWdzU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgb2wuc291cmNlLlRpbGVBcmNHSVNSZXN0KHtcclxuICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9uLFxyXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb25Db2RlLFxyXG4gICAgICBjcm9zc09yaWdpbjogJ2Fub255bW91cycsXHJcbiAgICAgIHBhcmFtczogb3B0aW9ucy5wYXJhbXMsXHJcbiAgICAgIHVybDogb3B0aW9ucy51cmxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBhZ3NUaWxlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyIHZlY3RvciA9IHJlcXVpcmUoJy4vdmVjdG9yJyk7XHJcblxyXG52YXIgZmVhdHVyZUxheWVyID0gZnVuY3Rpb24gZmVhdHVyZUxheWVyKGxheWVyT3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gbGF5ZXJPcHRpb25zO1xyXG4gIHZhciBzb3VyY2VPcHRpb25zID0ge307XHJcbiAgdmFyIHZlY3RvclNvdXJjZTtcclxuICBzb3VyY2VPcHRpb25zLmF0dHJpYnV0aW9uID0gbGF5ZXJPcHRpb25zLmF0dHJpYnV0aW9uO1xyXG4gIHNvdXJjZU9wdGlvbnMuZmVhdHVyZXMgPSBsYXllck9wdGlvbnMuZmVhdHVyZXM7XHJcblxyXG4gIHZlY3RvclNvdXJjZSA9IGNyZWF0ZVNvdXJjZShzb3VyY2VPcHRpb25zKTtcclxuICByZXR1cm4gdmVjdG9yKG9wdGlvbnMsIHZlY3RvclNvdXJjZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVNvdXJjZShvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xyXG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb24sXHJcbiAgICAgIGZlYXR1cmVzOiBvcHRpb25zLmZlYXR1cmVzXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZmVhdHVyZUxheWVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgdmVjdG9yID0gcmVxdWlyZSgnLi92ZWN0b3InKTtcclxudmFyIGlzVXJsID0gcmVxdWlyZSgnLi4vdXRpbHMvaXN1cmwnKTtcclxuXHJcbnZhciBnZW9qc29uID0gZnVuY3Rpb24gZ2VvanNvbihsYXllck9wdGlvbnMpIHtcclxuICB2YXIgYmFzZVVybCA9IHZpZXdlci5nZXRCYXNlVXJsKCk7XHJcbiAgdmFyIGdlb2pzb25EZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAndmVjdG9yJ1xyXG4gIH07XHJcbiAgdmFyIGdlb2pzb25PcHRpb25zID0gJC5leHRlbmQoZ2VvanNvbkRlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgdmFyIGdlb2pzb25Tb3VyY2U7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSB7fTtcclxuICBzb3VyY2VPcHRpb25zLmF0dHJpYnV0aW9uID0gZ2VvanNvbk9wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uQ29kZSA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG4gIHNvdXJjZU9wdGlvbnMuc291cmNlTmFtZSA9IGxheWVyT3B0aW9ucy5zb3VyY2U7XHJcbiAgaWYgKGlzVXJsKGdlb2pzb25PcHRpb25zLnNvdXJjZSkpIHtcclxuICAgIHNvdXJjZU9wdGlvbnMudXJsID0gZ2VvanNvbk9wdGlvbnMuc291cmNlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBnZW9qc29uT3B0aW9ucy5zb3VyY2VOYW1lID0gYmFzZVVybCArIGdlb2pzb25PcHRpb25zLnNvdXJjZTtcclxuICAgIHNvdXJjZU9wdGlvbnMudXJsID0gZ2VvanNvbk9wdGlvbnMuc291cmNlO1xyXG4gIH1cclxuXHJcbiAgZ2VvanNvblNvdXJjZSA9IGNyZWF0ZVNvdXJjZShzb3VyY2VPcHRpb25zKTtcclxuICByZXR1cm4gdmVjdG9yKGdlb2pzb25PcHRpb25zLCBnZW9qc29uU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgdXJsOiBvcHRpb25zLnVybCxcclxuICAgICAgZm9ybWF0OiBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oKVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGdlb2pzb247XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5cclxudmFyIGdyb3VwID0gZnVuY3Rpb24gZ3JvdXAobGF5ZXJPcHRpb25zKSB7XHJcbiAgdmFyIGdyb3VwRGVmYXVsdCA9IHtcclxuICAgIGxheWVyVHlwZTogJ2dyb3VwJyxcclxuICAgIHN0eWxlTmFtZTogJ2RlZmF1bHQnXHJcbiAgfTtcclxuICB2YXIgZ3JvdXBPcHRpb25zID0gJC5leHRlbmQoZ3JvdXBEZWZhdWx0LCBsYXllck9wdGlvbnMpO1xyXG4gIHJldHVybiBuZXcgb2wubGF5ZXIuR3JvdXAoZ3JvdXBPcHRpb25zKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBncm91cDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB0aWxlID0gcmVxdWlyZSgnLi90aWxlJyk7XHJcblxyXG52YXIgb3NtID0gZnVuY3Rpb24gb3NtKGxheWVyT3B0aW9ucykge1xyXG4gIHZhciBvc21EZWZhdWx0ID0ge307XHJcbiAgdmFyIG9zbU9wdGlvbnMgPSAkLmV4dGVuZChvc21EZWZhdWx0LCBsYXllck9wdGlvbnMpO1xyXG5cclxuICB2YXIgb3NtU291cmNlID0gY3JlYXRlU291cmNlKCk7XHJcbiAgcmV0dXJuIHRpbGUob3NtT3B0aW9ucywgb3NtU291cmNlKTtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlU291cmNlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBvbC5zb3VyY2UuT1NNKClcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gb3NtO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdGlsZShvcHRpb25zLCBzb3VyY2UpIHtcclxuICBvcHRpb25zLnNvdXJjZSA9IHNvdXJjZTtcclxuICByZXR1cm4gbmV3IG9sLmxheWVyLlRpbGUob3B0aW9ucyk7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHZlY3RvciA9IHJlcXVpcmUoJy4vdmVjdG9yJyk7XHJcbnZhciBpc1VybCA9IHJlcXVpcmUoJy4uL3V0aWxzL2lzdXJsJyk7XHJcblxyXG52YXIgdG9wb2pzb24gPSBmdW5jdGlvbiB0b3BvanNvbihsYXllck9wdGlvbnMpIHtcclxuICB2YXIgYmFzZVVybCA9IHZpZXdlci5nZXRCYXNlVXJsKCk7XHJcbiAgdmFyIHRvcG9qc29uRGVmYXVsdCA9IHtcclxuICAgIGxheWVyVHlwZTogJ3ZlY3RvcidcclxuICB9O1xyXG4gIHZhciB0b3BvanNvbk9wdGlvbnMgPSAkLmV4dGVuZCh0b3BvanNvbkRlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgdmFyIHRvcG9qc29uU291cmNlO1xyXG4gIHZhciBzb3VyY2VPcHRpb25zID0ge307XHJcbiAgc291cmNlT3B0aW9ucy5hdHRyaWJ1dGlvbiA9IHRvcG9qc29uT3B0aW9ucy5hdHRyaWJ1dGlvbjtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcbiAgc291cmNlT3B0aW9ucy5zb3VyY2VOYW1lID0gbGF5ZXJPcHRpb25zLnNvdXJjZTtcclxuICBpZiAoaXNVcmwodG9wb2pzb25PcHRpb25zLnNvdXJjZSkpIHtcclxuICAgIHNvdXJjZU9wdGlvbnMudXJsID0gdG9wb2pzb25PcHRpb25zLnNvdXJjZTtcclxuICB9IGVsc2Uge1xyXG4gICAgdG9wb2pzb25PcHRpb25zLnNvdXJjZU5hbWUgPSBiYXNlVXJsICsgdG9wb2pzb25PcHRpb25zLnNvdXJjZTtcclxuICAgIHNvdXJjZU9wdGlvbnMudXJsID0gdG9wb2pzb25PcHRpb25zLnNvdXJjZTtcclxuICB9XHJcblxyXG4gIHRvcG9qc29uU291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB2ZWN0b3IodG9wb2pzb25PcHRpb25zLCB0b3BvanNvblNvdXJjZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVNvdXJjZShvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gbmV3IG9sLnNvdXJjZS5WZWN0b3Ioe1xyXG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb24sXHJcbiAgICAgIHVybDogb3B0aW9ucy51cmwsXHJcbiAgICAgIGZvcm1hdDogbmV3IG9sLmZvcm1hdC5Ub3BvSlNPTih7XHJcbiAgICAgICAgZGVmYXVsdERhdGFQcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb25Db2RlXHJcbiAgICAgIH0pXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdG9wb2pzb247XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgc3R5bGUgPSByZXF1aXJlKCcuLi9zdHlsZScpKCk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHZlY3RvcihvcHRpb25zLCBzb3VyY2UpIHtcclxuICB2YXIgdmVjdG9yTGF5ZXI7XHJcbiAgc3dpdGNoIChvcHRpb25zLmxheWVyVHlwZSkge1xyXG4gICAgY2FzZSAndmVjdG9yJzpcclxuICAgICAgb3B0aW9ucy5zb3VyY2UgPSBzb3VyY2U7XHJcbiAgICAgIG9wdGlvbnMuc3R5bGUgPSBzdHlsZS5jcmVhdGVTdHlsZShvcHRpb25zLnN0eWxlKTtcclxuICAgICAgdmVjdG9yTGF5ZXIgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKG9wdGlvbnMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2NsdXN0ZXInOlxyXG4gICAgICBvcHRpb25zLnNvdXJjZSA9IG5ldyBvbC5zb3VyY2UuQ2x1c3Rlcih7XHJcbiAgICAgICAgYXR0cmlidXRpb25zOiBvcHRpb25zLmF0dHJpYnV0aW9uLFxyXG4gICAgICAgIHNvdXJjZTogc291cmNlLFxyXG4gICAgICAgIGRpc3RhbmNlOiA2MFxyXG4gICAgICB9KTtcclxuICAgICAgb3B0aW9ucy5zdHlsZSA9IHN0eWxlLmNyZWF0ZVN0eWxlKG9wdGlvbnMuc3R5bGUsIG9wdGlvbnMuY2x1c3RlclN0eWxlKTtcclxuICAgICAgdmVjdG9yTGF5ZXIgPSBuZXcgb2wubGF5ZXIuVmVjdG9yKG9wdGlvbnMpO1xyXG4gICAgICBicmVhaztcclxuICAgIGNhc2UgJ2ltYWdlJzpcclxuICAgICAgb3B0aW9ucy5zb3VyY2UgPSBuZXcgb2wuc291cmNlLkltYWdlVmVjdG9yKHtcclxuICAgICAgICBzb3VyY2U6IHNvdXJjZSxcclxuICAgICAgICBzdHlsZTogc3R5bGUuY3JlYXRlU3R5bGUob3B0aW9ucy5zdHlsZSlcclxuICAgICAgfSk7XHJcbiAgICAgIHZlY3RvckxheWVyID0gbmV3IG9sLmxheWVyLkltYWdlKG9wdGlvbnMpO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbiAgcmV0dXJuIHZlY3RvckxheWVyO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHZlY3RvciA9IHJlcXVpcmUoJy4vdmVjdG9yJyk7XHJcblxyXG52YXIgd2ZzID0gZnVuY3Rpb24gd2ZzKGxheWVyT3B0aW9ucykge1xyXG4gIHZhciB3ZnNEZWZhdWx0ID0ge1xyXG4gICAgbGF5ZXJUeXBlOiAndmVjdG9yJ1xyXG4gIH07XHJcbiAgdmFyIHNvdXJjZURlZmF1bHQgPSB7fTtcclxuICB2YXIgd2ZzT3B0aW9ucyA9ICQuZXh0ZW5kKHdmc0RlZmF1bHQsIGxheWVyT3B0aW9ucyk7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSAkLmV4dGVuZChzb3VyY2VEZWZhdWx0LCB2aWV3ZXIuZ2V0TWFwU291cmNlKClbbGF5ZXJPcHRpb25zLnNvdXJjZU5hbWVdKTtcclxuICB3ZnNPcHRpb25zLmZlYXR1cmVUeXBlID0gc291cmNlT3B0aW9ucy5mZWF0dXJlVHlwZSA9IHdmc09wdGlvbnMuaWQ7XHJcbiAgc291cmNlT3B0aW9ucy5nZW9tZXRyeU5hbWUgPSB3ZnNPcHRpb25zLmdlb21ldHJ5TmFtZTtcclxuICBzb3VyY2VPcHRpb25zLmZpbHRlciA9IHdmc09wdGlvbnMuZmlsdGVyO1xyXG4gIHNvdXJjZU9wdGlvbnMuYXR0cmlidXRpb24gPSB3ZnNPcHRpb25zLmF0dHJpYnV0aW9uO1xyXG4gIHNvdXJjZU9wdGlvbnMucmVzb2x1dGlvbnMgPSB2aWV3ZXIuZ2V0UmVzb2x1dGlvbnMoKTtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcblxyXG4gIHNvdXJjZU9wdGlvbnMuc3RyYXRlZ3kgPSBsYXllck9wdGlvbnMuc3RyYXRlZ3kgPyBsYXllck9wdGlvbnMuc3RyYXRlZ3kgOiBzb3VyY2VPcHRpb25zLnN0cmF0ZWd5O1xyXG4gIHN3aXRjaCAoc291cmNlT3B0aW9ucy5zdHJhdGVneSkge1xyXG4gICAgY2FzZSAnYWxsJzpcclxuICAgICAgc291cmNlT3B0aW9ucy5sb2FkaW5nc3RyYXRlZ3kgPSBvbC5sb2FkaW5nc3RyYXRlZ3kuYWxsO1xyXG4gICAgYnJlYWs7XHJcbiAgICBjYXNlICd0aWxlJzpcclxuICAgIHNvdXJjZU9wdGlvbnMubG9hZGluZ3N0cmF0ZWd5ID0gb2wubG9hZGluZ3N0cmF0ZWd5LnRpbGUob2wudGlsZWdyaWQuY3JlYXRlWFlaKHtcclxuICAgICAgICBtYXhab29tOiBzb3VyY2VPcHRpb25zLnJlc29sdXRpb25zLmxlbmd0aFxyXG4gICAgICB9KSk7XHJcbiAgICBicmVhaztcclxuICAgIGRlZmF1bHQ6XHJcbiAgICBzb3VyY2VPcHRpb25zLmxvYWRpbmdzdHJhdGVneSA9IG9sLmxvYWRpbmdzdHJhdGVneS5iYm94O1xyXG4gICAgYnJlYWs7XHJcbiAgfVxyXG4gIHZhciB3ZnNTb3VyY2UgPSBjcmVhdGVTb3VyY2Uoc291cmNlT3B0aW9ucyk7XHJcbiAgcmV0dXJuIHZlY3Rvcih3ZnNPcHRpb25zLCB3ZnNTb3VyY2UpO1xyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVTb3VyY2Uob3B0aW9ucykge1xyXG4gICAgdmFyIHZlY3RvclNvdXJjZSA9IG51bGw7XHJcbiAgICB2YXIgc2VydmVyVXJsID0gb3B0aW9ucy51cmw7XHJcbiAgICB2YXIgcXVlcnlGaWx0ZXI7XHJcblxyXG4gICAgLy9JZiBjcWwgZmlsdGVyIHRoZW4gYmJveCBtdXN0IGJlIHVzZWQgaW4gdGhlIGZpbHRlci5cclxuICAgIGlmKG9wdGlvbnMuc3RyYXRlZ3kgPT09ICdhbGwnKXtcclxuICAgICAgcXVlcnlGaWx0ZXIgPSBvcHRpb25zLmZpbHRlciA/ICcmQ1FMX0ZJTFRFUj0nICsgb3B0aW9ucy5maWx0ZXIgOiAnJztcclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgIHF1ZXJ5RmlsdGVyID0gb3B0aW9ucy5maWx0ZXIgPyAnJkNRTF9GSUxURVI9JyArIG9wdGlvbnMuZmlsdGVyICsgJyBBTkQgQkJPWCgnICsgb3B0aW9ucy5nZW9tZXRyeU5hbWUgKyAnLCcgOiAnJkJCT1g9JztcclxuICAgIH1cclxuICAgIHZhciBiYm94UHJvamVjdGlvbkNvZGUgPSBvcHRpb25zLmZpbHRlciA/IFwiJ1wiICsgb3B0aW9ucy5wcm9qZWN0aW9uQ29kZSArIFwiJylcIiA6IG9wdGlvbnMucHJvamVjdGlvbkNvZGU7XHJcbiAgICB2ZWN0b3JTb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgZm9ybWF0OiBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oe1xyXG4gICAgICAgIGdlb21ldHJ5TmFtZTogb3B0aW9ucy5nZW9tZXRyeU5hbWVcclxuICAgICAgfSksXHJcbiAgICAgIGxvYWRlcjogZnVuY3Rpb24oZXh0ZW50LCByZXNvbHV0aW9uLCBwcm9qZWN0aW9uKSB7XHJcbiAgICAgICAgdmFyIHVybCA9IHNlcnZlclVybCArXHJcbiAgICAgICAgICAnP3NlcnZpY2U9V0ZTJicgK1xyXG4gICAgICAgICAgJ3ZlcnNpb249MS4xLjAmcmVxdWVzdD1HZXRGZWF0dXJlJnR5cGVOYW1lPScgKyBvcHRpb25zLmZlYXR1cmVUeXBlICtcclxuICAgICAgICAgICcmb3V0cHV0Rm9ybWF0PWFwcGxpY2F0aW9uL2pzb24nICtcclxuICAgICAgICAgICcmc3JzbmFtZT0nICsgb3B0aW9ucy5wcm9qZWN0aW9uQ29kZTtcclxuICAgICAgICB1cmwgKz0gb3B0aW9ucy5zdHJhdGVneSA9PT0gJ2FsbCcgPyBxdWVyeUZpbHRlciA6IHF1ZXJ5RmlsdGVyICsgZXh0ZW50LmpvaW4oJywnKSArICcsJyArIGJib3hQcm9qZWN0aW9uQ29kZTtcclxuICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgY2FjaGU6IGZhbHNlXHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgdmVjdG9yU291cmNlLmFkZEZlYXR1cmVzKHZlY3RvclNvdXJjZS5nZXRGb3JtYXQoKS5yZWFkRmVhdHVyZXMocmVzcG9uc2UpKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBzdHJhdGVneTogb3B0aW9ucy5sb2FkaW5nc3RyYXRlZ3lcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHZlY3RvclNvdXJjZTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gd2ZzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgdGlsZSA9IHJlcXVpcmUoJy4vdGlsZScpO1xyXG5cclxudmFyIHdtcyA9IGZ1bmN0aW9uIHdtcyhsYXllck9wdGlvbnMpIHtcclxuICB2YXIgd21zRGVmYXVsdCA9IHtcclxuICAgIGxheWVyVHlwZTogJ3RpbGUnLFxyXG4gICAgZmVhdHVyZWluZm9MYXllcjogdW5kZWZpbmVkXHJcbiAgfTtcclxuICB2YXIgc291cmNlRGVmYXVsdCA9IHtcclxuICAgIHZlcnNpb246ICcxLjEuMScsXHJcbiAgICBndXR0ZXI6IDBcclxuICB9O1xyXG4gIHZhciB3bXNPcHRpb25zID0gJC5leHRlbmQod21zRGVmYXVsdCwgbGF5ZXJPcHRpb25zKTtcclxuICB3bXNPcHRpb25zLm5hbWUuc3BsaXQoJzonKS5wb3AoKTtcclxuICB2YXIgc291cmNlT3B0aW9ucyA9ICQuZXh0ZW5kKHNvdXJjZURlZmF1bHQsIHZpZXdlci5nZXRNYXBTb3VyY2UoKVtsYXllck9wdGlvbnMuc291cmNlXSk7XHJcbiAgc291cmNlT3B0aW9ucy5hdHRyaWJ1dGlvbiA9IHdtc09wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uQ29kZSA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG4gIHNvdXJjZU9wdGlvbnMuaWQgPSB3bXNPcHRpb25zLmlkO1xyXG5cclxuICB2YXIgd21zU291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB0aWxlKHdtc09wdGlvbnMsIHdtc1NvdXJjZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVNvdXJjZShvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gbmV3IG9sLnNvdXJjZS5UaWxlV01TKCh7XHJcbiAgICAgIGF0dHJpYnV0aW9uczogb3B0aW9ucy5hdHRyaWJ1dGlvbixcclxuICAgICAgdXJsOiBvcHRpb25zLnVybCxcclxuICAgICAgZ3V0dGVyOiBvcHRpb25zLmd1dHRlcixcclxuICAgICAgY3Jvc3NPcmlnaW46ICdhbm9ueW1vdXMnLFxyXG4gICAgICBwcm9qZWN0aW9uOiBvcHRpb25zLnByb2plY3Rpb25Db2RlLFxyXG4gICAgICBwYXJhbXM6IHtcclxuICAgICAgICAnTEFZRVJTJzogb3B0aW9ucy5pZCxcclxuICAgICAgICAnVElMRUQnOiB0cnVlLFxyXG4gICAgICAgIFZFUlNJT046IG9wdGlvbnMudmVyc2lvblxyXG4gICAgICB9XHJcbiAgICB9KSlcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gd21zO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgdGlsZSA9IHJlcXVpcmUoJy4vdGlsZScpO1xyXG5cclxudmFyIHdtdHMgPSBmdW5jdGlvbiB3bXRzKGxheWVyT3B0aW9ucykge1xyXG4gIHZhciB3bXRzRGVmYXVsdCA9IHtcclxuICAgIGxheWVyVHlwZTogJ3RpbGUnLFxyXG4gICAgZmVhdHVyZWluZm9MYXllcjogdW5kZWZpbmVkXHJcbiAgfTtcclxuICB2YXIgc291cmNlRGVmYXVsdCA9IHtcclxuICAgIG1hdHJpeFNldDogdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCksXHJcbiAgICBtYXRyaXhJZHNQcmVmaXg6IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpICsgJzonLFxyXG4gICAgZm9ybWF0OiAnaW1hZ2UvcG5nJyxcclxuICAgIHJlc29sdXRpb25zOiB2aWV3ZXIuZ2V0UmVzb2x1dGlvbnMoKSxcclxuICAgIHRpbGVTaXplOiBbMjU2LCAyNTZdXHJcbiAgfTtcclxuICB2YXIgd210c09wdGlvbnMgPSAkLmV4dGVuZCh3bXRzRGVmYXVsdCwgbGF5ZXJPcHRpb25zKTtcclxuICB3bXRzT3B0aW9ucy5uYW1lLnNwbGl0KCc6JykucG9wKCk7XHJcbiAgd210c09wdGlvbnMuc291cmNlTmFtZSA9IHdtdHNPcHRpb25zLm5hbWU7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSAkLmV4dGVuZChzb3VyY2VEZWZhdWx0LCB2aWV3ZXIuZ2V0TWFwU291cmNlKClbbGF5ZXJPcHRpb25zLnNvdXJjZV0pO1xyXG4gIGlmICh3bXRzT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnZm9ybWF0JykpIHtcclxuICAgIHNvdXJjZU9wdGlvbnMuZm9ybWF0ID0gd210c09wdGlvbnMuZm9ybWF0O1xyXG4gIH1cclxuICBzb3VyY2VPcHRpb25zLmF0dHJpYnV0aW9uID0gd210c09wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uQ29kZSA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG4gIHNvdXJjZU9wdGlvbnMubWF0cml4SWRzID0gW107XHJcbiAgc291cmNlT3B0aW9ucy5yZXNvbHV0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKHJlc29sdXRpb24sIGkpIHtcclxuICAgIHNvdXJjZU9wdGlvbnMubWF0cml4SWRzW2ldID0gc291cmNlT3B0aW9ucy5tYXRyaXhJZHNQcmVmaXggKyBpO1xyXG4gIH0pO1xyXG4gIHNvdXJjZU9wdGlvbnMucHJvamVjdGlvbkV4dGVudCA9IHZpZXdlci5nZXRQcm9qZWN0aW9uKCkuZ2V0RXh0ZW50KCk7XHJcbiAgc291cmNlT3B0aW9ucy5pZCA9IHdtdHNPcHRpb25zLmlkO1xyXG5cclxuICB2YXIgd210c1NvdXJjZSA9IGNyZWF0ZVNvdXJjZShzb3VyY2VPcHRpb25zKTtcclxuICByZXR1cm4gdGlsZSh3bXRzT3B0aW9ucywgd210c1NvdXJjZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVNvdXJjZShvcHRpb25zKSB7XHJcbiAgICByZXR1cm4gbmV3IG9sLnNvdXJjZS5XTVRTKHtcclxuICAgICAgY3Jvc3NPcmlnaW46ICdhbm9ueW1vdXMnLFxyXG4gICAgICBhdHRyaWJ1dGlvbnM6IG9wdGlvbnMuYXR0cmlidXRpb24sXHJcbiAgICAgIHVybDogb3B0aW9ucy51cmwsXHJcbiAgICAgIHByb2plY3Rpb246IG9wdGlvbnMucHJvamVjdGlvbkNvZGUsXHJcbiAgICAgIGxheWVyOiBvcHRpb25zLmlkLFxyXG4gICAgICBtYXRyaXhTZXQ6IG9wdGlvbnMubWF0cml4U2V0LFxyXG4gICAgICBmb3JtYXQ6IG9wdGlvbnMuZm9ybWF0LFxyXG4gICAgICB0aWxlR3JpZDogbmV3IG9sLnRpbGVncmlkLldNVFMoe1xyXG4gICAgICAgIG9yaWdpbjogb3B0aW9ucy5vcmlnaW4gfHwgb2wuZXh0ZW50LmdldFRvcExlZnQob3B0aW9ucy5wcm9qZWN0aW9uRXh0ZW50KSxcclxuICAgICAgICByZXNvbHV0aW9uczogb3B0aW9ucy5yZXNvbHV0aW9ucyxcclxuICAgICAgICBtYXRyaXhJZHM6IG9wdGlvbnMubWF0cml4SWRzLFxyXG4gICAgICAgIHRpbGVTaXplOiBvcHRpb25zLnRpbGVTaXplXHJcbiAgICAgIH0pLFxyXG4gICAgICBzdHlsZTogJ2RlZmF1bHQnXHJcbiAgICB9KVxyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB3bXRzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgdGlsZSA9IHJlcXVpcmUoJy4vdGlsZScpO1xyXG5cclxudmFyIHh5eiA9IGZ1bmN0aW9uIHh5eihsYXllck9wdGlvbnMpIHtcclxuICB2YXIgeHl6RGVmYXVsdCA9IHtcclxuICAgIGxheWVyVHlwZTogJ3RpbGUnLFxyXG4gICAgZmVhdHVyZWluZm9MYXllcjogdW5kZWZpbmVkXHJcbiAgfTtcclxuICB2YXIgc291cmNlRGVmYXVsdCA9IHt9O1xyXG4gIHZhciB4eXpPcHRpb25zID0gJC5leHRlbmQoeHl6RGVmYXVsdCwgbGF5ZXJPcHRpb25zKTtcclxuICB4eXpPcHRpb25zLnNvdXJjZU5hbWUgPSB4eXpPcHRpb25zLmlkO1xyXG4gIHZhciBzb3VyY2VPcHRpb25zID0gJC5leHRlbmQoc291cmNlRGVmYXVsdCwgdmlld2VyLmdldE1hcFNvdXJjZSgpW2xheWVyT3B0aW9ucy5zb3VyY2VdKTtcclxuICBzb3VyY2VPcHRpb25zLmF0dHJpYnV0aW9ucyA9IHh5ek9wdGlvbnMuYXR0cmlidXRpb247XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCkgfHwgJ0VQU0c6Mzg1Nyc7XHJcbiAgc291cmNlT3B0aW9ucy50aWxlR3JpZCA9IHZpZXdlci5nZXRUaWxlR3JpZCgpO1xyXG5cclxuICB2YXIgeHl6U291cmNlID0gY3JlYXRlU291cmNlKHNvdXJjZU9wdGlvbnMpO1xyXG4gIHJldHVybiB0aWxlKHh5ek9wdGlvbnMsIHh5elNvdXJjZSk7XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZVNvdXJjZShvcHRpb25zKSB7XHJcbiAgICB2YXIgZm9ybWF0ID0gb3B0aW9ucy5zb3VyY2VOYW1lLnNwbGl0KCcuJylbMV0sXHJcbiAgICAgIHVybCA9IG9wdGlvbnMuc291cmNlTmFtZS5zcGxpdCgnLicpWzBdICsgJy97en0ve3h9L3t5fS4nO1xyXG4gICAgdXJsICs9IGZvcm1hdDtcclxuICAgIG9wdGlvbnMudXJsID0gZm9ybWF0O1xyXG4gICAgcmV0dXJuIG5ldyBvbC5zb3VyY2UuWFlaKG9wdGlvbnMpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB4eXo7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciBtYXBVdGlscyA9IHJlcXVpcmUoJy4vbWFwdXRpbHMnKTtcclxudmFyIGdyb3VwID0gcmVxdWlyZSgnLi9sYXllci9ncm91cCcpO1xyXG52YXIgdHlwZSA9IHt9O1xyXG52YXIgbGF5ZXJDcmVhdG9yO1xyXG50eXBlLldGUyA9IHJlcXVpcmUoJy4vbGF5ZXIvd2ZzJyk7XHJcbnR5cGUuQUdTX0ZFQVRVUkUgPSByZXF1aXJlKCcuL2xheWVyL2Fnc2ZlYXR1cmUnKTtcclxudHlwZS5UT1BPSlNPTiA9IHJlcXVpcmUoJy4vbGF5ZXIvdG9wb2pzb24nKTtcclxudHlwZS5HRU9KU09OID0gcmVxdWlyZSgnLi9sYXllci9nZW9qc29uJyk7XHJcbnR5cGUuV01TID0gcmVxdWlyZSgnLi9sYXllci93bXMnKTtcclxudHlwZS5XTVRTID0gcmVxdWlyZSgnLi9sYXllci93bXRzJyk7XHJcbnR5cGUuQUdTX1RJTEUgPSByZXF1aXJlKCcuL2xheWVyL2Fnc3RpbGUnKTtcclxudHlwZS5YWVogPSByZXF1aXJlKCcuL2xheWVyL3h5eicpO1xyXG50eXBlLk9TTSA9IHJlcXVpcmUoJy4vbGF5ZXIvb3NtJyk7XHJcbnR5cGUuRkVBVFVSRSA9IHJlcXVpcmUoJy4vbGF5ZXIvZmVhdHVyZWxheWVyJyk7O1xyXG50eXBlLkdST1VQID0gZ3JvdXBMYXllcjtcclxuXHJcbmxheWVyQ3JlYXRvciA9IGZ1bmN0aW9uIGxheWVyQ3JlYXRvcihvcHRfb3B0aW9ucykge1xyXG4gIHZhciBkZWZhdWx0T3B0aW9ucyA9IHtcclxuICAgIG5hbWU6IHVuZGVmaW5lZCxcclxuICAgIGlkOiB1bmRlZmluZWQsXHJcbiAgICB0aXRsZTogdW5kZWZpbmVkLFxyXG4gICAgZ3JvdXA6ICdub25lJyxcclxuICAgIG9wYWNpdHk6IDEsXHJcbiAgICBnZW9tZXRyeU5hbWU6ICdnZW9tJyxcclxuICAgIGdlb21ldHJ5VHlwZTogdW5kZWZpbmVkLFxyXG4gICAgZmlsdGVyOiB1bmRlZmluZWQsXHJcbiAgICBsYXllclR5cGU6IHVuZGVmaW5lZCxcclxuICAgIGxlZ2VuZDogZmFsc2UsXHJcbiAgICBzb3VyY2VOYW1lOiB1bmRlZmluZWQsXHJcbiAgICBhdHRyaWJ1dGlvbjogdW5kZWZpbmVkLFxyXG4gICAgc3R5bGU6ICdkZWZhdWx0JyxcclxuICAgIHN0eWxlTmFtZTogdW5kZWZpbmVkLFxyXG4gICAgcXVlcnlhYmxlOiB0cnVlLFxyXG4gICAgbWluUmVzb2x1dGlvbjogdW5kZWZpbmVkLFxyXG4gICAgbWF4UmVzb2x1dGlvbjogdW5kZWZpbmVkLFxyXG4gICAgdmlzaWJsZTogZmFsc2UsXHJcbiAgICB0eXBlOiB1bmRlZmluZWQsXHJcbiAgICBleHRlbnQ6IHVuZGVmaW5lZCxcclxuICAgIGF0dHJpYnV0ZXM6IHVuZGVmaW5lZFxyXG4gIH07XHJcbiAgdmFyIHByb2plY3Rpb24gPSB2aWV3ZXIuZ2V0UHJvamVjdGlvbigpO1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIGxheWVyT3B0aW9ucyA9ICQuZXh0ZW5kKGRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcclxuICB2YXIgbmFtZSA9IGxheWVyT3B0aW9ucy5uYW1lO1xyXG4gIGxheWVyT3B0aW9ucy5taW5SZXNvbHV0aW9uID0gbGF5ZXJPcHRpb25zLmhhc093blByb3BlcnR5KCdtaW5TY2FsZScpID8gbWFwVXRpbHMuc2NhbGVUb1Jlc29sdXRpb24obGF5ZXJPcHRpb25zLm1pblNjYWxlLCBwcm9qZWN0aW9uKTogdW5kZWZpbmVkO1xyXG4gIGxheWVyT3B0aW9ucy5tYXhSZXNvbHV0aW9uID0gbGF5ZXJPcHRpb25zLmhhc093blByb3BlcnR5KCdtYXhTY2FsZScpID8gbWFwVXRpbHMuc2NhbGVUb1Jlc29sdXRpb24obGF5ZXJPcHRpb25zLm1heFNjYWxlLCBwcm9qZWN0aW9uKTogdW5kZWZpbmVkO1xyXG4gIGxheWVyT3B0aW9ucy5leHRlbnQgPSBsYXllck9wdGlvbnMuZXh0ZW50IHx8IHZpZXdlci5nZXRFeHRlbnQoKTtcclxuICBsYXllck9wdGlvbnMuc291cmNlTmFtZSA9IGxheWVyT3B0aW9ucy5zb3VyY2U7XHJcbiAgbGF5ZXJPcHRpb25zLnN0eWxlTmFtZSA9IGxheWVyT3B0aW9ucy5zdHlsZTtcclxuICBpZiAobGF5ZXJPcHRpb25zLmlkID09PSB1bmRlZmluZWQpIHtcclxuICAgIGxheWVyT3B0aW9ucy5pZCA9IG5hbWUuc3BsaXQoJ19fJykuc2hpZnQoKTtcclxuICB9XHJcblxyXG4gIGxheWVyT3B0aW9ucy5uYW1lID0gbmFtZS5zcGxpdCgnOicpLnBvcCgpO1xyXG5cclxuICBpZiAodHlwZS5oYXNPd25Qcm9wZXJ0eShsYXllck9wdGlvbnMudHlwZSkpIHtcclxuICAgIHJldHVybiB0eXBlW2xheWVyT3B0aW9ucy50eXBlXShsYXllck9wdGlvbnMsIGxheWVyQ3JlYXRvcik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKCdMYXllciB0eXBlIGlzIG1pc3Npbmcgb3IgbGF5ZXIgdHlwZSBpcyBub3QgY29ycmVjdC4gQ2hlY2sgeW91ciBsYXllciBkZWZpbml0aW9uOiAnKTtcclxuICAgIGNvbnNvbGUubG9nKGxheWVyT3B0aW9ucyk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBncm91cExheWVyKG9wdGlvbnMpIHtcclxuICB2YXIgbGF5ZXJzO1xyXG4gIHZhciBsYXllck9wdGlvbnM7XHJcbiAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2xheWVycycpKSB7XHJcbiAgICBsYXllcnMgPSBvcHRpb25zLmxheWVycy5tYXAoZnVuY3Rpb24obGF5ZXIpIHtcclxuICAgICAgcmV0dXJuIGxheWVyQ3JlYXRvcihsYXllcik7XHJcbiAgICB9KTtcclxuXHJcbiAgICBsYXllck9wdGlvbnMgPSB7fTtcclxuICAgIGxheWVyT3B0aW9ucy5sYXllcnMgPSBsYXllcnM7XHJcbiAgICByZXR1cm4gZ3JvdXAoJC5leHRlbmQob3B0aW9ucywgbGF5ZXJPcHRpb25zKSk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUubG9nKCdHcm91cCBsYXllciBoYXMgbm8gbGF5ZXJzJyk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGxheWVyQ3JlYXRvcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG52YXIgbW9kYWwgPSByZXF1aXJlKCcuL21vZGFsJyk7XHJcbnZhciB2YWxpZGF0ZVVybCA9IHJlcXVpcmUoJy4vdXRpbHMvdmFsaWRhdGV1cmwnKTtcclxuXHJcbnZhciBzeW1ib2xTaXplID0gMjA7XHJcbnZhciBzdHlsZVNldHRpbmdzO1xyXG52YXIgYmFzZVVybDtcclxudmFyIGhhc01hcExlZ2VuZDtcclxuXHJcbmZ1bmN0aW9uIGluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG5cclxuICBiYXNlVXJsID0gdmlld2VyLmdldEJhc2VVcmwoKTtcclxuICBoYXNNYXBMZWdlbmQgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdoYXNNYXBMZWdlbmQnKSA/IG9wdGlvbnMuaGFzTWFwTGVnZW5kIDogdHJ1ZTtcclxuICBzdHlsZVNldHRpbmdzID0gdmlld2VyLmdldFN0eWxlU2V0dGluZ3MoKTtcclxuXHJcbiAgcmVuZGVyKCk7XHJcbiAgYWRkTGVnZW5kKHZpZXdlci5nZXRHcm91cHMoJ3RvcCcpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gICQoJyNvLW1lbnV0b29scycpLmFwcGVuZCgnPGxpIGNsYXNzPVwiby1tZW51LWl0ZW1cIj48ZGl2IGNsYXNzPVwiby1tZW51LWl0ZW0tZGl2aWRlclwiPjwvZGl2PjxsaT4nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U3ltYm9sKHN0eWxlKSB7XHJcbiAgdmFyIHN5bWJvbD0nJztcclxuICB2YXIgcyA9IHN0eWxlWzBdO1xyXG4gIGlmIChzWzBdLmhhc093blByb3BlcnR5KCdpY29uJykpIHtcclxuICAgIHZhciBzcmMgPSB2YWxpZGF0ZVVybChzWzBdLmljb24uc3JjLCBiYXNlVXJsKTtcclxuICAgIC8vIHZhciBzY2FsZSA9IHN0eWxlLmljb24uc2NhbGUgfHwgdW5kZWZpbmVkO1xyXG4gICAgdmFyIGZvcm1hdCA9IHNbMF0uZm9ybWF0IHx8ICdwbmcnO1xyXG4gICAgaWYgKGZvcm1hdCA9PSAncG5nJykge1xyXG4gICAgICBzeW1ib2wgPSAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0taW1nXCI+PGltZyBzdHlsZT1cIndpZHRoOiBhdXRvOyBoZWlnaHQ6IDIwcHg7XCIgc3JjPVwiJyArIHNyYyArICdcIj48L2Rpdj4nXHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChmb3JtYXQgPT0gJ3N2ZycpIHtcclxuICAgICAgdmFyIG8gPSAnPG9iamVjdCB0eXBlPVwiaW1hZ2Uvc3ZnK3htbFwiIGRhdGE9XCInICsgc3JjICsgJ1wiIHN0eWxlPVwid2lkdGg6IDIwcHg7XCI+PC9vYmplY3Q+JztcclxuICAgICAgdmFyIGlubGluZVN0eWxlID0gJ2JhY2tncm91bmQ6IHVybCgnICsgc3JjICsgJykgbm8tcmVwZWF0O3dpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHg7YmFja2dyb3VuZC1zaXplOiAyMHB4Oyc7XHJcbiAgICAgIHN5bWJvbCA9ICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS1pbWdcIj4nICsgbyArICc8L2Rpdj4nO1xyXG4gICAgfVxyXG4gIH1cclxuICBlbHNlIGlmIChzWzBdLmhhc093blByb3BlcnR5KCdmaWxsJykpIHtcclxuICAgIHZhciBmaWxsID0gJyc7XHJcbiAgICBmb3IodmFyIGk9MDsgaTxzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGZpbGwgKz0gY3JlYXRlRmlsbChzW2ldKTtcclxuICAgIH1cclxuICAgIHN5bWJvbCArPSAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0taW1nXCI+PHN2ZyBoZWlnaHQ9XCInICsgc3ltYm9sU2l6ZSArICdcIiB3aWR0aD1cIicgKyBzeW1ib2xTaXplICsgJ1wiPic7XHJcbiAgICBzeW1ib2wgKz0gZmlsbDtcclxuICAgIHN5bWJvbCArPSAnPC9zdmc+PC9kaXY+JztcclxuICB9XHJcbiAgZWxzZSBpZiAoc1swXS5oYXNPd25Qcm9wZXJ0eSgnc3Ryb2tlJykpIHtcclxuICAgIHZhciBzdHJva2UgPSAnJztcclxuICAgIGZvcih2YXIgaT0wOyBpPHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgc3Ryb2tlICs9IGNyZWF0ZVN0cm9rZShzW2ldKTtcclxuICAgIH1cclxuICAgIHN5bWJvbCArPSAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0taW1nXCI+PHN2ZyBoZWlnaHQ9XCInICsgc3ltYm9sU2l6ZSArICdcIiB3aWR0aD1cIicgKyBzeW1ib2xTaXplICsgJ1wiPic7XHJcbiAgICBzeW1ib2wgKz0gc3Ryb2tlO1xyXG4gICAgc3ltYm9sICs9ICc8L3N2Zz48L2Rpdj4nO1xyXG4gIH1cclxuICBlbHNlIGlmIChzWzBdLmhhc093blByb3BlcnR5KCdjaXJjbGUnKSkge1xyXG4gICAgdmFyIGNpcmNsZSA9ICcnO1xyXG4gICAgZm9yKHZhciBpPTA7IGk8cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICBjaXJjbGUgKz0gY3JlYXRlQ2lyY2xlKHNbaV0pO1xyXG4gICAgfVxyXG4gICAgc3ltYm9sICs9ICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS1pbWdcIj48c3ZnIGhlaWdodD1cIicgKyBzeW1ib2xTaXplICsgJ1wiIHdpZHRoPVwiJyArIHN5bWJvbFNpemUgKyAnXCI+JztcclxuICAgIHN5bWJvbCArPSBjaXJjbGU7XHJcbiAgICBzeW1ib2wgKz0gJzwvc3ZnPjwvZGl2Pic7XHJcbiAgfVxyXG4gIGVsc2UgaWYgKHNbMF0uaGFzT3duUHJvcGVydHkoJ2ltYWdlJykpIHtcclxuICAgIHZhciBzcmMgPSB2YWxpZGF0ZVVybChzWzBdLmltYWdlLnNyYywgYmFzZVVybCk7XHJcbiAgICB2YXIgaW5saW5lU3R5bGUgPSAnYmFja2dyb3VuZDogdXJsKCcgKyBzcmMgKyAnKSBuby1yZXBlYXQ7d2lkdGg6IDMwcHg7IGhlaWdodDogMzBweDtiYWNrZ3JvdW5kLXNpemU6IDMwcHg7JztcclxuICAgIHN5bWJvbCA9ICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS1pbWdcIiBzdHlsZT1cIicgKyBpbmxpbmVTdHlsZSArJ1wiPjwvZGl2Pic7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gc3ltYm9sO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVGaWxsKGZpbGxQcm9wZXJ0aWVzKSB7XHJcbiAgdmFyIGYgPSBmaWxsUHJvcGVydGllcztcclxuICB2YXIgc3Ryb2tlV2lkdGggPSAwO1xyXG5cclxuICBpZihmLmhhc093blByb3BlcnR5KCdzdHJva2UnKSkge1xyXG4gICAgc3Ryb2tlV2lkdGggPSBmLnN0cm9rZS53aWR0aCA+PTMgPyAzIDogZi5zdHJva2Uud2lkdGg7XHJcbiAgICB2YXIgc3Ryb2tlID0gJ3N0cm9rZTonICsgZi5zdHJva2UuY29sb3IgKyAnOycgfHwgJ3N0cm9rZTpub25lOyc7XHJcbiAgICBzdHJva2UgKz0gJ3N0cm9rZS13aWR0aDonICsgc3Ryb2tlV2lkdGggKyAnOycgfHwgJyc7XHJcbiAgICBzdHJva2UgKz0gJ3N0cm9rZS1kYXNoYXJyYXk6JyArIGYuc3Ryb2tlLmxpbmVEYXNoICsgJzsnIHx8ICcnO1xyXG4gIH1cclxuXHJcbiAgdmFyIGZpbGxTaXplID0gc3ltYm9sU2l6ZSAtIDQ7IC8vLTItMlxyXG4gIHZhciBmaWxsID0gJzxyZWN0IHg9XCIyXCIgeT1cIjJcIiByeD1cIjJcIiByeT1cIjJcIiB3aWR0aD1cIicgKyBmaWxsU2l6ZSArICdcIiBoZWlnaHQ9XCInICsgZmlsbFNpemUgKyAnXCIgJztcclxuICBmaWxsICs9IGYuaGFzT3duUHJvcGVydHkoJ2ZpbGwnKSA/ICdzdHlsZT1cImZpbGw6JyArIGYuZmlsbC5jb2xvciArICc7JyA6ICdzdHlsZT1cImZpbGw6bm9uZTsnO1xyXG4gIGZpbGwgKz0gc3Ryb2tlO1xyXG4gIGZpbGwgKz0gJ1wiPjwvcmVjdD4nO1xyXG5cclxuICByZXR1cm4gZmlsbDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2lyY2xlKGNpcmNsZVByb3BlcnRpZXMpIHtcclxuICB2YXIgYyA9IGNpcmNsZVByb3BlcnRpZXMuY2lyY2xlO1xyXG4gIHZhciBzdHJva2VXaWR0aCA9IDA7XHJcblxyXG4gIGlmKGMuaGFzT3duUHJvcGVydHkoJ3N0cm9rZScpKSB7XHJcbiAgICBzdHJva2VXaWR0aCA9IGMuc3Ryb2tlLndpZHRoID49MyA/IDMgOiBjLnN0cm9rZS53aWR0aDtcclxuICAgIHZhciBzdHJva2UgPSAnc3Ryb2tlOicgKyBjLnN0cm9rZS5jb2xvciArICc7JyB8fCAnc3Ryb2tlOm5vbmU7JztcclxuICAgIHN0cm9rZSArPSAnc3Ryb2tlLXdpZHRoOicgKyBzdHJva2VXaWR0aCArICc7JyB8fCAnJztcclxuICB9XHJcblxyXG4gIHZhciBzaXplID0gc3ltYm9sU2l6ZS8yO1xyXG4gIHZhciBmaWxsID0gJzxjaXJjbGUgY3g9XCInICsgc2l6ZSArICdcIiBjeT1cIicgKyBzaXplICsgJ1wiIHI9XCInICsgYy5yYWRpdXMgKyAnXCIgJztcclxuICBmaWxsICs9IGMuaGFzT3duUHJvcGVydHkoJ2ZpbGwnKSA/ICdzdHlsZT1cImZpbGw6JyArIGMuZmlsbC5jb2xvciArICc7JyA6ICdzdHlsZT1cImZpbGw6bm9uZTsnO1xyXG4gIGZpbGwgKz0gc3Ryb2tlO1xyXG4gIGZpbGwgKz0gJ1wiPjwvY2lyY2xlPic7XHJcblxyXG4gIHJldHVybiBmaWxsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTdHJva2Uoc3Ryb2tlUHJvcGVydGllcykge1xyXG4gIHZhciBzID0gc3Ryb2tlUHJvcGVydGllcztcclxuICB2YXIgc3Ryb2tlV2lkdGggPSBzLnN0cm9rZS53aWR0aCA+IDQgPyA0IDogcy5zdHJva2Uud2lkdGg7XHJcbiAgc3Ryb2tlV2lkdGggPSBzLnN0cm9rZS53aWR0aCA8IDIgPyAyIDogc3Ryb2tlV2lkdGg7XHJcbiAgdmFyIHN0cm9rZSA9ICc8bGluZSB4MSA9IFwiMlwiIHkxPSBcIicgKyAoc3ltYm9sU2l6ZS00KS50b1N0cmluZygpICsgJ1wiIHgyPVwiJyArIChzeW1ib2xTaXplLTQpLnRvU3RyaW5nKCkgKyAnXCIgeTI9XCIyXCIgJztcclxuICBzdHJva2UgKz0gJ3N0eWxlPVwiJztcclxuICBzdHJva2UgKz0gJ3N0cm9rZTonICsgcy5zdHJva2UuY29sb3IgKyAnOycgfHwgJ3N0cm9rZTpub25lOyc7XHJcbiAgc3Ryb2tlICs9ICdzdHJva2Utd2lkdGg6JyArIHN0cm9rZVdpZHRoICsgJzsnIHx8ICcnO1xyXG4gIHN0cm9rZSArPSAnc3Ryb2tlLWRhc2hhcnJheTonICsgcy5zdHJva2UubGluZURhc2ggKyAnOycgfHwgJyc7XHJcbiAgc3Ryb2tlICs9ICdcIi8+JztcclxuXHJcbiAgcmV0dXJuIHN0cm9rZTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQWJzdHJhY3RCdXR0b24oaXRlbSkge1xyXG4gIHZhciBpbmZvVGV4dEJ1dHRvbiA9ICAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0taW5mbyBvLWFic3RyYWN0XCIgaWQ9XCJvLWxlZ2VuZC1pdGVtLWluZm8tJyArIGl0ZW0gKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtaW5mby1jaXJjbGVcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtaW5mby1jaXJjbGVcIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgcmV0dXJuIGluZm9UZXh0QnV0dG9uO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVMZWdlbmRJdGVtKGxheWVyaWQsIGxheWVyU3R5bGUsIGluU3ViZ3JvdXApIHtcclxuICB2YXIgbGF5ZXJuYW1lID0gbGF5ZXJpZC5zcGxpdCgnby1sZWdlbmQtJykucG9wKCk7XHJcbiAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVybmFtZSk7XHJcbiAgdmFyIHN1YkNsYXNzID0gaW5TdWJncm91cCA/ICcgby1sZWdlbmQtc3ViaXRlbScgOiAnJztcclxuICB2YXIgbGVnZW5kSXRlbSA9ICcnO1xyXG5cclxuICBpZiAobGF5ZXJTdHlsZSAmJiBsYXllclN0eWxlWzBdWzBdLmhhc093blByb3BlcnR5KCdmaWx0ZXInKSkge1xyXG5cclxuICAgIGlmIChsYXllclN0eWxlWzBdWzBdLmhhc093blByb3BlcnR5KCdsZWdlbmQnKSkge1xyXG4gICAgICBsZWdlbmRJdGVtICs9ICc8bGkgY2xhc3M9XCJvLWxlZ2VuZCAnICsgbGF5ZXJuYW1lICsgJ1wiPic7XHJcbiAgICAgIGxlZ2VuZEl0ZW0gKz0gJzx1bCBpZD1cIm8tZ3JvdXAtJyArIGxheWVybmFtZSArICdcIiBjbGFzcz1cIm8tbGVnZW5kLWdyb3VwIG8tdWwtZXhwYW5kLWZhbHNlXCI+PGxpIGNsYXNzPVwiJyArIGxheWVybmFtZSArICdcIiBpZD1cIicgKyBsYXllcmlkICsgJ1wiPic7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBsZWdlbmRJdGVtICs9ICc8bGkgY2xhc3M9XCJvLWxlZ2VuZCAnICsgbGF5ZXJuYW1lICsgJ1wiIGlkPVwiJyArIGxheWVyaWQgKyAnXCI+JztcclxuICAgIH1cclxuXHJcbiAgICBsZWdlbmRJdGVtICs9ICc8ZGl2IGNsYXNzID1cIm8tbGVnZW5kLWl0ZW0nICsgc3ViQ2xhc3MgKyAnXCI+PGRpdiBjbGFzcz1cIm8tY2hlY2tib3hcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1zcXVhcmUtb1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1zcXVhcmUtb1wiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZWNrLXNxdWFyZS1vXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWNoZWNrLXNxdWFyZS1vXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgbGVnZW5kSXRlbSArPSAnPGRpdiBjbGFzcz1cIm8tbGVnZW5kLWl0ZW0tdGl0bGUgby10cnVuY2F0ZVwiPicgKyBsYXllci5nZXQoJ3RpdGxlJykgKyAnPC9kaXY+JztcclxuXHJcbiAgICBpZihsYXllci5nZXQoJ2Fic3RyYWN0Jykpe1xyXG4gICAgICBsZWdlbmRJdGVtICs9IGFkZEFic3RyYWN0QnV0dG9uKGxheWVybmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGxheWVyU3R5bGVbMF1bMF0uaGFzT3duUHJvcGVydHkoJ2xlZ2VuZCcpKSB7XHJcbiAgICAgIGxlZ2VuZEl0ZW0gKz0gJzxkaXYgY2xhc3M9XCJvLWljb24tZXhwYW5kIG8taWNvbi1leHBhbmQtZmFsc2VcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZXZyb24tcmlnaHRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzx1c2UgeGxpbms6aHJlZj1cIiNmYS1hbmdsZS1kb3VibGUtcmlnaHRcIj48L3VzZT4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICc8L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZXZyb24tZG93blwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHVzZSB4bGluazpocmVmPVwiI2ZhLWFuZ2xlLWRvdWJsZS1kb3duXCI+PC91c2U+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgIGxlZ2VuZEl0ZW0gKz0gJzwvZGl2PjwvbGk+JztcclxuXHJcbiAgICAgIGxheWVyU3R5bGUuZm9yRWFjaChmdW5jdGlvbiAoc3R5bGVBcnJheSkge1xyXG4gICAgICAgIGxlZ2VuZEl0ZW0gKz0gJzxsaSBjbGFzcz1cIm8tbGVnZW5kICcgKyBsYXllcm5hbWUgKyAnXCIgaWQ9XCInICsgbGF5ZXJuYW1lICsgJ1wiPjxkaXYgY2xhc3MgPVwiby1sZWdlbmQtc3ViaXRlbVwiPic7XHJcbiAgICAgICAgbGVnZW5kSXRlbSArPSAnPGRpdiBjbGFzcz1cIm8tY2hlY2tib3ggby1jaGVja2JveC1mYWxzZVwiPjwvZGl2Pic7XHJcbiAgICAgICAgbGVnZW5kSXRlbSArPSBsYXllci5nZXQoJ3N0eWxlTmFtZScpID8gZ2V0U3ltYm9sKFtzdHlsZUFycmF5XSkgOiAnJztcclxuICAgICAgICBsZWdlbmRJdGVtICs9ICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtc3ViaXRlbS10aXRsZVwiPicgKyBzdHlsZUFycmF5WzBdLmxlZ2VuZCArICc8L2Rpdj48L2Rpdj48L2xpPic7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgbGVnZW5kSXRlbSArPSAnPC91bD48L2xpPidcclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG4gICAgbGVnZW5kSXRlbSArPSAnPGxpIGNsYXNzPVwiby1sZWdlbmQgJyArIGxheWVybmFtZSArICdcIiBpZD1cIicgKyBsYXllcmlkICsgJ1wiPjxkaXYgY2xhc3MgPVwiby1sZWdlbmQtaXRlbScgKyBzdWJDbGFzcyArICdcIj48ZGl2IGNsYXNzPVwiby1jaGVja2JveFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLXNxdWFyZS1vXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLXNxdWFyZS1vXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hlY2stc3F1YXJlLW9cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtY2hlY2stc3F1YXJlLW9cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICBsZWdlbmRJdGVtICs9ICBsYXllci5nZXQoJ3N0eWxlTmFtZScpID8gZ2V0U3ltYm9sKHN0eWxlU2V0dGluZ3NbbGF5ZXIuZ2V0KCdzdHlsZU5hbWUnKV0pIDogJyc7XHJcbiAgICBsZWdlbmRJdGVtICs9ICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS10aXRsZSBvLXRydW5jYXRlXCI+JyArIGxheWVyLmdldCgndGl0bGUnKSArICc8L2Rpdj4nO1xyXG5cclxuICAgIGlmKGxheWVyLmdldCgnYWJzdHJhY3QnKSl7XHJcbiAgICAgIGxlZ2VuZEl0ZW0gKz0gYWRkQWJzdHJhY3RCdXR0b24obGF5ZXJuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBsZWdlbmRJdGVtICs9ICc8L2Rpdj48L2xpPic7XHJcbiAgfVxyXG5cclxuICByZXR1cm4gbGVnZW5kSXRlbTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlR3JvdXAoZ3JvdXAsIHBhcmVudEdyb3VwKSB7XHJcbiAgdmFyIGxlZ2VuZEdyb3VwO1xyXG4gIHZhciBvdmVybGF5R3JvdXA7XHJcbiAgdmFyIGFic3RyYWN0ID0gJyc7XHJcblxyXG4gIGlmIChncm91cC5oYXNPd25Qcm9wZXJ0eSgnb3ZlcmxheUdyb3VwJykpIHtcclxuICAgIG92ZXJsYXlHcm91cCA9IGdyb3VwLm5hbWU7XHJcbiAgfVxyXG5cclxuICBpZiAoZ3JvdXAuYWJzdHJhY3QpIHtcclxuICAgIGFic3RyYWN0ICs9IGFkZEFic3RyYWN0QnV0dG9uKGdyb3VwLm5hbWUpO1xyXG4gIH1cclxuXHJcbiAgaWYgKHBhcmVudEdyb3VwKSB7XHJcbiAgICB2YXIgaW5kZW50ID0gJChwYXJlbnRHcm91cCkucGFyZW50KCkuY2xvc2VzdCgndWwnKS5oYXNDbGFzcygnby1sZWdlbmQtZ3JvdXAnKSA/ICdvLWxlZ2VuZC1pbmRlbnQnIDogJyc7XHJcblxyXG4gICAgbGVnZW5kR3JvdXAgPSAnPGxpIGNsYXNzPVwiby1sZWdlbmQgJyArIGdyb3VwLm5hbWUgKyAnIG8tdG9wLWl0ZW1cIiBpZD1cIicgKyBncm91cC5uYW1lICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8dWwgaWQ9XCJvLWdyb3VwLScgKyBncm91cC5uYW1lICsgJ1wiIGNsYXNzPVwiby1sZWdlbmQtZ3JvdXAgby1sZWdlbmQtc3ViZ3JvdXAgJyArIGluZGVudCArJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJzxsaSBjbGFzcz1cIm8tbGVnZW5kLWhlYWRlciBvLWxlZ2VuZC1zdWJoZWFkZXIgJyArIGdyb3VwLm5hbWUgKyAnXCIgaWQ9XCInICsgZ3JvdXAubmFtZSArICdcIj48ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbVwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8tY2hlY2tib3hcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1zcXVhcmUtb1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1zcXVhcmUtb1wiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZWNrLXNxdWFyZS1vXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWNoZWNrLXNxdWFyZS1vXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1zdWJncm91cC10aXRsZSBvLXRydW5jYXRlXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JvdXAudGl0bGUgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiby1pY29uLWV4cGFuZFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLWNoZXZyb24tcmlnaHRcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtYW5nbGUtZG91YmxlLXJpZ2h0XCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hldnJvbi1kb3duXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWFuZ2xlLWRvdWJsZS1kb3duXCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICsgYWJzdHJhY3QgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PjwvbGk+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvdWw+JyArXHJcbiAgICAgICAgICAgICAgICAgICc8L2xpPic7XHJcbiAgICBwYXJlbnRHcm91cC5hcHBlbmQobGVnZW5kR3JvdXApO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBsZWdlbmRHcm91cCA9ICc8bGk+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJzx1bCBpZD1cIm8tZ3JvdXAtJyArIGdyb3VwLm5hbWUgKyAnXCIgY2xhc3M9XCJvLWxlZ2VuZC1ncm91cFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgJzxsaSBjbGFzcz1cIm8tbGVnZW5kLWhlYWRlclwiPjxkaXYgY2xhc3M9XCJvLWxlZ2VuZC1pdGVtXCI+JyArIGdyb3VwLnRpdGxlICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWljb24tZXhwYW5kXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hldnJvbi1yaWdodFwiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1jaGV2cm9uLXJpZ2h0XCI+PC91c2U+PC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hldnJvbi1kb3duXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWNoZXZyb24tZG93blwiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArIGFic3RyYWN0ICtcclxuICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2xpPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3VsPicgK1xyXG4gICAgICAgICAgICAgICAgICAnPC9saT4nO1xyXG4gICAgJCgnI28tbGVnZW5kbGlzdCAuby1sZWdlbmRsaXN0JykuYXBwZW5kKGxlZ2VuZEdyb3VwKTtcclxuICB9XHJcblxyXG4gIGlmIChncm91cC5leHBhbmRlZCA9PSB0cnVlKSB7XHJcbiAgICAkKCcjby1ncm91cC0nICsgZ3JvdXAubmFtZSArJyAuby1pY29uLWV4cGFuZCcpLmFkZENsYXNzKCdvLWljb24tZXhwYW5kLXRydWUnKTtcclxuICAgICQoJyNvLWdyb3VwLScgKyBncm91cC5uYW1lICsnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2tib3gtZmFsc2UnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgJCgnI28tZ3JvdXAtJyArIGdyb3VwLm5hbWUgKycgLm8taWNvbi1leHBhbmQnKS5hZGRDbGFzcygnby1pY29uLWV4cGFuZC1mYWxzZScpO1xyXG4gICAgJCgnI28tZ3JvdXAtJyArIGdyb3VwLm5hbWUgKycgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG4gICAgJCgnI28tZ3JvdXAtJyArIGdyb3VwLm5hbWUpLmFkZENsYXNzKCdvLXVsLWV4cGFuZC1mYWxzZScpO1xyXG4gIH1cclxuXHJcbiAgJCgnI28tZ3JvdXAtJyArIGdyb3VwLm5hbWUgKyAnIC5vLWxlZ2VuZC1oZWFkZXInKS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuXHJcbiAgICBpZiAoJChldnQudGFyZ2V0KS5jbG9zZXN0KCdkaXYnKS5oYXNDbGFzcygnby1jaGVja2JveCcpKSB7XHJcbiAgICAgIHRvZ2dsZVN1Ykdyb3VwQ2hlY2soJCh0aGlzKS5wYXJlbnQoKSwgdHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKCQoZXZ0LnRhcmdldCkuY2xvc2VzdCgnZGl2JykuaGFzQ2xhc3MoJ28tYWJzdHJhY3QnKSkge1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRvZ2dsZUdyb3VwKCQodGhpcykpO1xyXG4gICAgfVxyXG5cclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG5cclxuICBpZiAoZ3JvdXAuaGFzT3duUHJvcGVydHkoJ2dyb3VwcycpKSB7XHJcbiAgICBncm91cC5ncm91cHMuZm9yRWFjaChmdW5jdGlvbihzdWJncm91cCkge1xyXG4gICAgICBjcmVhdGVHcm91cChzdWJncm91cCwgJCgnI28tZ3JvdXAtJyArIGdyb3VwLm5hbWUpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkTGVnZW5kKGdyb3Vwcykge1xyXG4gIHZhciBsYXllcnMgPSB2aWV3ZXIuZ2V0TWFwKCkuZ2V0TGF5ZXJzKCkuZ2V0QXJyYXkoKTtcclxuICB2YXIgb3ZlcmxheUdyb3VwO1xyXG4gIHZhciBpdGVtID0gJyc7XHJcblxyXG4gIC8vQWRkIGxlZ2VuZCBncm91cHNcclxuICB2YXIgbGVnZW5kID0gJzxkaXYgaWQ9XCJvLWxlZ2VuZGxpc3RcIj48dWwgY2xhc3M9XCJvLWxlZ2VuZGxpc3RcIj48L3VsPjwvZGl2Pic7XHJcbiAgJCgnI28tbWFwbWVudScpLmFwcGVuZChsZWdlbmQpO1xyXG5cclxuICBncm91cHMuZm9yRWFjaChmdW5jdGlvbihncm91cCkge1xyXG4gICAgY3JlYXRlR3JvdXAoZ3JvdXApO1xyXG4gIH0pO1xyXG5cclxuICAvL0FkZCBtYXAgbGVnZW5kIHVubGVzcyBzZXQgdG8gZmFsc2VcclxuICBpZihoYXNNYXBMZWdlbmQpIHtcclxuICAgIHZhciBtYXBMZWdlbmQgPSAnPGRpdiBpZD1cIm8tbWFwLWxlZ2VuZFwiPjx1bCBpZD1cIm8tbGVnZW5kLW92ZXJsYXlcIj48bGkgY2xhc3M9XCJvLWxlZ2VuZCBvLWhpZGRlblwiPjxkaXYgY2xhc3MgPVwiby10b2dnbGUtYnV0dG9uIG8tdG9nZ2xlLWJ1dHRvbi1tYXhcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtYW5nbGUtZG91YmxlLWRvd25cIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtYW5nbGUtZG91YmxlLWRvd25cIj48L3VzZT48L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtYW5nbGUtZG91YmxlLXVwXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLWFuZ2xlLWRvdWJsZS11cFwiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj48L2xpPjxsaT48dWwgaWQ9XCJvLW92ZXJsYXktbGlzdFwiPjwvbGk+PC91bD48L3VsPjx1bCBpZD1cIm8tbWFwLWxlZ2VuZC1iYWNrZ3JvdW5kXCI+PC91bD48L2Rpdj4nO1xyXG4gICAgJCgnI28tbWFwJykuYXBwZW5kKG1hcExlZ2VuZCk7XHJcblxyXG4gICAgLy9BZGQgZGl2aWRlciB0byBtYXAgbGVnZW5kIGlmIG5vdCBvbmx5IGJhY2tncm91bmRcclxuICAgIGlmKG92ZXJsYXlHcm91cCkge1xyXG4gICAgICAkKCcjby1tYXAtbGVnZW5kLWJhY2tncm91bmQnKS5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS1kaXZpZGVyXCI+PC9kaXY+Jyk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLy9BZGQgbGF5ZXJzIHRvIGxlZ2VuZFxyXG4gIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XHJcblxyXG4gICAgdmFyIG5hbWUgPSAobGF5ZXIuZ2V0KCduYW1lJykpO1xyXG4gICAgdmFyIGxheWVyU3R5bGUgPSBzdHlsZVNldHRpbmdzW2xheWVyLmdldCgnc3R5bGVOYW1lJyldO1xyXG4gICAgLy9DaGVjayBpZiBsYXllciBiZWxvbmdzIHRvIHN1Ymdyb3VwXHJcbiAgICB2YXIgaW5TdWJncm91cCA9ICQoJyNvLWdyb3VwLScgKyBsYXllci5nZXQoJ2dyb3VwJykpLmNsb3Nlc3QoJ3VsJykucGFyZW50KCkuY2xvc2VzdCgndWwnKS5oYXNDbGFzcygnby1sZWdlbmQtZ3JvdXAnKTtcclxuICAgIHZhciB0aXRsZSA9ICc8ZGl2IGNsYXNzPVwiby1sZWdlbmQtaXRlbS10aXRsZSBvLXRydW5jYXRlXCI+JyArIGxheWVyLmdldCgndGl0bGUnKSArICc8L2Rpdj4nO1xyXG5cclxuICAgIC8vQWRkIGFic3RyYWN0IGJ1dHRvblxyXG4gICAgaWYobGF5ZXIuZ2V0KCdhYnN0cmFjdCcpKXtcclxuICAgICAgdGl0bGUgKz0gYWRkQWJzdHJhY3RCdXR0b24obmFtZSk7XHJcbiAgICB9XHJcbiAgICB0aXRsZSArPSAnPC9kaXY+PC9saT4nO1xyXG5cclxuICAgIC8vQXBwZW5kIGxheWVyIHRvIGdyb3VwIGluIGxlZ2VuZC4gQWRkIHRvIGRlZmF1bHQgZ3JvdXAgaWYgbm90IGRlZmluZWQuXHJcbiAgICBpZihsYXllci5nZXQoJ2dyb3VwJykgPT0gJ2JhY2tncm91bmQnKSB7XHJcblxyXG4gICAgICAvL0FwcGVuZCBiYWNrZ3JvdW5kIGxheWVycyB0byBtZW51XHJcbiAgICAgIGl0ZW0gPSAnPGxpIGNsYXNzPVwiby1sZWdlbmQgJyArIG5hbWUgKyAnXCIgaWQ9XCInICsgbmFtZSArICdcIj48ZGl2IGNsYXNzID1cIm8tbGVnZW5kLWl0ZW1cIj48ZGl2IGNsYXNzPVwiby1jaGVja2JveFwiPjxzdmcgY2xhc3M9XCJvLWljb24tZmEtY2hlY2tcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtY2hlY2tcIj48L3VzZT48L3N2Zz48L2Rpdj4nO1xyXG4gICAgICBpdGVtICs9IHRpdGxlO1xyXG4gICAgICAkKCcjby1ncm91cC1iYWNrZ3JvdW5kIC5vLWxlZ2VuZC1oZWFkZXInKS5hZnRlcihpdGVtKTtcclxuXHJcbiAgICAgIC8vQXBwZW5kIGJhY2tncm91bmQgbGF5ZXJzIHRvIG1hcCBsZWdlbmRcclxuICAgICAgaXRlbSA9ICc8bGkgY2xhc3M9XCJvLWxlZ2VuZCAnICsgbmFtZSArICdcIiBpZD1cIm8tbGVnZW5kLScgKyBuYW1lICsgJ1wiPjxkaXYgY2xhc3MgPVwiby1sZWdlbmQtaXRlbVwiPidcclxuICAgICAgaXRlbSArPSBsYXllci5nZXQoJ3N0eWxlTmFtZScpID8gZ2V0U3ltYm9sKHN0eWxlU2V0dGluZ3NbbGF5ZXIuZ2V0KCdzdHlsZU5hbWUnKV0pIDogJyc7XHJcbiAgICAgIGl0ZW0gKz0gJzwvZGl2Pic7XHJcbiAgICAgICQoJyNvLW1hcC1sZWdlbmQtYmFja2dyb3VuZCcpLnByZXBlbmQoaXRlbSk7XHJcblxyXG4gICAgfSBlbHNlIGlmKGxheWVyLmdldCgnZ3JvdXAnKSAmJiAoKGxheWVyLmdldCgnZ3JvdXAnKSAhPSAnbm9uZScpKSkge1xyXG5cclxuICAgICAgLy9BcHBlbmQgbGF5ZXIgdG8gZ3JvdXBcclxuICAgICAgaXRlbSA9IGNyZWF0ZUxlZ2VuZEl0ZW0obmFtZSwgbGF5ZXJTdHlsZSwgaW5TdWJncm91cCk7XHJcbiAgICAgIGlmICgkKCcjby1ncm91cC0nICsgbGF5ZXIuZ2V0KCdncm91cCcpKS5maW5kKCdsaS5vLXRvcC1pdGVtOmxhc3QnKS5sZW5ndGgpIHtcclxuICAgICAgICAkKCcjby1ncm91cC0nICsgbGF5ZXIuZ2V0KCdncm91cCcpKS5maW5kKCdsaS5vLXRvcC1pdGVtOmxhc3QnKS5hZnRlcihpdGVtKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcjby1ncm91cC0nICsgbGF5ZXIuZ2V0KCdncm91cCcpICsgJyAuby1sZWdlbmQtaGVhZGVyJykuYWZ0ZXIoaXRlbSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGlmKGxheWVyLmdldCgnbGVnZW5kJykgPT0gdHJ1ZSB8fCBsYXllci5nZXRWaXNpYmxlKHRydWUpKSB7XHJcbiAgICAgICAgLy9BcHBlbmQgdG8gbWFwIGxlZ2VuZFxyXG4gICAgICAgIGl0ZW0gPSAnPGxpIGNsYXNzPVwiby1sZWdlbmQgJyArIG5hbWUgKyAnXCIgaWQ9XCJvLWxlZ2VuZC0nICsgbmFtZSArICdcIj48ZGl2IGNsYXNzID1cIm8tbGVnZW5kLWl0ZW1cIj48ZGl2IGNsYXNzPVwiby1jaGVja2JveFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1zcXVhcmUtb1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1zcXVhcmUtb1wiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIm8taWNvbi1mYS1jaGVjay1zcXVhcmUtb1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1jaGVjay1zcXVhcmUtb1wiPjwvdXNlPjwvc3ZnPicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgaXRlbSArPSBsYXllci5nZXQoJ3N0eWxlTmFtZScpID8gZ2V0U3ltYm9sKHN0eWxlU2V0dGluZ3NbbGF5ZXIuZ2V0KCdzdHlsZU5hbWUnKV0pIDogJyc7XHJcbiAgICAgICAgaXRlbSArPSB0aXRsZTtcclxuICAgICAgICAkKCcjby1vdmVybGF5LWxpc3QnKS5wcmVwZW5kKGl0ZW0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9DaGVjayBtYXAgbGVnZW5kIHRvIG1ha2Ugc3VyZSBtaW5pbWl6ZSBidXR0b24gYXBwZWFyc1xyXG4gICAgY2hlY2tUb2dnbGVPdmVybGF5KCk7XHJcblxyXG4gICAgLy9BcHBlbmQgY2xhc3MgYWNjb3JkaW5nIHRvIHZpc2libGl0eSBhbmQgaWYgZ3JvdXAgaXMgYmFja2dyb3VuZFxyXG4gICAgaWYgKGxheWVyLmdldCgnZ3JvdXAnKSA9PSAnYmFja2dyb3VuZCcpIHtcclxuICAgICAgaWYgKGxheWVyLmdldFZpc2libGUoKT09dHJ1ZSkge1xyXG4gICAgICAgICQoJyMnICsgbmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVjay10cnVlJyk7XHJcbiAgICAgICAgJCgnI28tbGVnZW5kLScgKyBuYW1lKS5hZGRDbGFzcygnby1jaGVjay10cnVlLWltZycpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyMnICsgbmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVjay1mYWxzZScpO1xyXG4gICAgICAgICQoJyNvLWxlZ2VuZC0nICsgbmFtZSkuYWRkQ2xhc3MoJ28tY2hlY2stZmFsc2UtaW1nJyk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGlmIChsYXllci5nZXRWaXNpYmxlKCk9PXRydWUpIHtcclxuICAgICAgICAkKCcuJyArIG5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2tib3gtdHJ1ZScpO1xyXG5cclxuICAgICAgICBpZiAoaW5TdWJncm91cCkge1xyXG4gICAgICAgICAgdmFyIHBhcmVudEdyb3VwcyA9ICQoJyMnICsgbmFtZSkucGFyZW50cygndWwgW2lkXj1vLWdyb3VwLV0nKTtcclxuICAgICAgICAgIFtdLmZvckVhY2guY2FsbChwYXJlbnRHcm91cHMsIGZ1bmN0aW9uKGVsKSB7XHJcbiAgICAgICAgICAgIHRvZ2dsZUdyb3VwKCQoZWwpLmZpbmQoJ2xpOmZpcnN0JykpO1xyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgdG9nZ2xlU3ViR3JvdXBDaGVjaygkKCcjJyArIG5hbWUpLnBhcmVudHMoJ3VsJykuaGFzKCcuby1sZWdlbmQtaGVhZGVyJykuZmlyc3QoKSwgZmFsc2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAkKCcjby1ncm91cC0nICsgbGF5ZXIuZ2V0KCdncm91cCcpICsnIC5vLWljb24tZXhwYW5kJykucmVtb3ZlQ2xhc3MoJ28taWNvbi1leHBhbmQtZmFsc2UnKTtcclxuICAgICAgICAgICQoJyNvLWdyb3VwLScgKyBsYXllci5nZXQoJ2dyb3VwJykgKycgLm8taWNvbi1leHBhbmQnKS5hZGRDbGFzcygnby1pY29uLWV4cGFuZC10cnVlJyk7XHJcbiAgICAgICAgICAkKCcjby1ncm91cC0nICsgbGF5ZXIuZ2V0KCdncm91cCcpKS5yZW1vdmVDbGFzcygnby11bC1leHBhbmQtZmFsc2UnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJy4nICsgbmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy9FdmVudCBsaXN0ZW5lciBmb3IgdGljayBsYXllclxyXG4gICAgJCgnIycgKyBuYW1lKS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuICAgICAgaWYgKCQoZXZ0LnRhcmdldCkuY2xvc2VzdCgnZGl2JykuaGFzQ2xhc3MoJ28taWNvbi1leHBhbmQnKSkge1xyXG4gICAgICAgIHRvZ2dsZUdyb3VwKCQodGhpcykpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgICQodGhpcykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgICAgIHRvZ2dsZUNoZWNrKCQodGhhdCkuYXR0cihcImlkXCIpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgICQoJyNvLWxlZ2VuZC0nICsgbmFtZSkub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICQodGhpcykuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XHJcbiAgICAgICAgdG9nZ2xlQ2hlY2soJCh0aGF0KS5hdHRyKFwiaWRcIikpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gICQoJy5vLWFic3RyYWN0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgc2hvd0Fic3RyYWN0KCQodGhhdCkpO1xyXG4gICAgfSk7XHJcbiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxuXHJcbiAgLy9Ub2dnbGUgbWFwIGxlZ2VuZFxyXG4gICQoJyNvLWxlZ2VuZC1vdmVybGF5IC5vLXRvZ2dsZS1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuICAgIHRvZ2dsZU92ZXJsYXkoKTtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvblRvZ2dsZUNoZWNrKGxheWVybmFtZSkge1xyXG4gIC8vRXZlbnQgbGlzdGVuZXIgZm9yIHRpY2sgbGF5ZXJcclxuICAkKCcjJyArIGxheWVybmFtZSkub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdG9nZ2xlQ2hlY2soJCh0aGF0KS5hdHRyKFwiaWRcIikpO1xyXG4gICAgfSk7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gb2ZmVG9nZ2xlQ2hlY2sobGF5ZXJuYW1lKSB7XHJcbiAgLy9FdmVudCBsaXN0ZW5lciBmb3IgdGljayBsYXllclxyXG4gICQoJyMnICsgbGF5ZXJuYW1lKS5vZmYoJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAkKHRoaXMpLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcclxuICAgICAgdG9nZ2xlQ2hlY2soJCh0aGF0KS5hdHRyKFwiaWRcIikpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8vRXhwYW5kIGFuZCBtaW5pbWl6ZSBncm91cFxyXG5mdW5jdGlvbiB0b2dnbGVHcm91cChncm91cGhlYWRlcikge1xyXG4gIHZhciBncm91cCA9IGdyb3VwaGVhZGVyLnBhcmVudCgnLm8tbGVnZW5kLWdyb3VwJyk7XHJcbiAgdmFyIGdyb3VwaWNvbiA9ICQoJyMnICsgZ3JvdXAuYXR0cignaWQnKSArICcgLm8taWNvbi1leHBhbmQ6Zmlyc3QnKTtcclxuXHJcbiAgaWYgKGdyb3VwaWNvbi5oYXNDbGFzcygnby1pY29uLWV4cGFuZC1mYWxzZScpKSB7XHJcbiAgICBncm91cGljb24ucmVtb3ZlQ2xhc3MoJ28taWNvbi1leHBhbmQtZmFsc2UnKTtcclxuICAgIGdyb3VwaWNvbi5hZGRDbGFzcygnby1pY29uLWV4cGFuZC10cnVlJyk7XHJcbiAgICBncm91cC5yZW1vdmVDbGFzcygnby11bC1leHBhbmQtZmFsc2UnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgZ3JvdXBpY29uLnJlbW92ZUNsYXNzKCdvLWljb24tZXhwYW5kLXRydWUnKTtcclxuICAgIGdyb3VwaWNvbi5hZGRDbGFzcygnby1pY29uLWV4cGFuZC1mYWxzZScpO1xyXG4gICAgZ3JvdXAuYWRkQ2xhc3MoJ28tdWwtZXhwYW5kLWZhbHNlJyk7XHJcbiAgfVxyXG59XHJcblxyXG4vL1RvZ2dsZSBzdWJncm91cHNcclxuZnVuY3Rpb24gdG9nZ2xlU3ViR3JvdXBDaGVjayhzdWJncm91cCwgdG9nZ2xlQWxsKSB7XHJcbiAgdmFyIHN1Ykdyb3VwID0gJChzdWJncm91cCk7XHJcbiAgdmFyIHN1YkxheWVycyA9IHN1Ykdyb3VwLmZpbmQoJy5vLWxlZ2VuZC1pdGVtLm8tbGVnZW5kLXN1Yml0ZW0nKTtcclxuICB2YXIgZ3JvdXBMaXN0ID0gJCgnLm8tbGVnZW5kLWdyb3VwJyk7XHJcblxyXG4gIGlmICh0b2dnbGVBbGwpIHtcclxuXHJcbiAgICBzdWJMYXllcnMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGxheWVybmFtZSA9ICQodGhpcykucGFyZW50KCkuYXR0cignaWQnKTtcclxuICAgICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVybmFtZSk7XHJcbiAgICAgIHZhciBsYXllcmlkID0gJCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdjbGFzcycpO1xyXG4gICAgICB2YXIgaW5NYXBMZWdlbmQgPSBsYXllcmlkLnNwbGl0KCdvLWxlZ2VuZC0nKS5sZW5ndGggPiAxID8gdHJ1ZSA6IGZhbHNlO1xyXG5cclxuICAgICAgaWYgKHN1Ykdyb3VwLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLmhhc0NsYXNzKCdvLWNoZWNrYm94LXRydWUnKSkge1xyXG4gICAgICAgICQoJy4nICsgbGF5ZXJuYW1lICsgJyAuby1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdvLWNoZWNrYm94LXRydWUnKTtcclxuICAgICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG5cclxuICAgICAgICBpZiAoaW5NYXBMZWdlbmQgPT0gZmFsc2UpIHtcclxuICAgICAgICAgIG9mZlRvZ2dsZUNoZWNrKCdvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKTtcclxuICAgICAgICAgICQoJyNvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKS5yZW1vdmUoKTtcclxuICAgICAgICAgIGxheWVyLnNldCgnbGVnZW5kJywgZmFsc2UpO1xyXG4gICAgICAgICAgY2hlY2tUb2dnbGVPdmVybGF5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsYXllci5zZXRWaXNpYmxlKGZhbHNlKTtcclxuICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgaWYgKGluTWFwTGVnZW5kID09IGZhbHNlICYmICQoJyNvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgJCgnI28tb3ZlcmxheS1saXN0JykucHJlcGVuZChjcmVhdGVMZWdlbmRJdGVtKCdvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKSk7XHJcbiAgICAgICAgICBvblRvZ2dsZUNoZWNrKCdvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKTtcclxuICAgICAgICAgIGNoZWNrVG9nZ2xlT3ZlcmxheSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnLicgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2tib3gtZmFsc2UnKTtcclxuICAgICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC10cnVlJyk7XHJcbiAgICAgICAgbGF5ZXIuc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICBsYXllci5zZXQoJ2xlZ2VuZCcsIHRydWUpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdyb3VwTGlzdC5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHN1Ykxpc3QgPSAkKHRoaXMpLmZpbmQoJy5vLWxlZ2VuZC1pdGVtLm8tbGVnZW5kLXN1Yml0ZW0nKS5oYXMoJy5vLWNoZWNrYm94Jyk7XHJcbiAgICB2YXIgc3ViTGlzdENoZWNrZWQgPSAkKHRoaXMpLmZpbmQoJy5vLWxlZ2VuZC1pdGVtLm8tbGVnZW5kLXN1Yml0ZW0nKS5oYXMoJy5vLWNoZWNrYm94Lm8tY2hlY2tib3gtdHJ1ZScpO1xyXG5cclxuICAgIGlmIChzdWJMaXN0Q2hlY2tlZC5sZW5ndGgpIHtcclxuICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmZpcnN0KCkuZmluZCgnLm8tY2hlY2tib3gnKS5yZW1vdmVDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG4gICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrYm94LXRydWUnKTtcclxuXHJcbiAgICAgIGlmIChzdWJMaXN0Lmxlbmd0aCAhPSBzdWJMaXN0Q2hlY2tlZC5sZW5ndGgpIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrYm94LXNlbWknKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdvLWNoZWNrYm94LXNlbWknKTtcclxuICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQodGhpcykuY2hpbGRyZW4oKS5maXJzdCgpLmZpbmQoJy5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2tib3gtdHJ1ZScpO1xyXG4gICAgICAkKHRoaXMpLmNoaWxkcmVuKCkuZmlyc3QoKS5maW5kKCcuby1jaGVja2JveCcpLnJlbW92ZUNsYXNzKCdvLWNoZWNrYm94LXNlbWknKTtcclxuICAgICAgJCh0aGlzKS5jaGlsZHJlbigpLmZpcnN0KCkuZmluZCgnLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG4vL1RvZ2dsZSBsYXllcnNcclxuZnVuY3Rpb24gdG9nZ2xlQ2hlY2sobGF5ZXJpZCkge1xyXG4gIHZhciBsYXllcm5hbWUgPSBsYXllcmlkLnNwbGl0KCdvLWxlZ2VuZC0nKS5wb3AoKTtcclxuICB2YXIgaW5NYXBMZWdlbmQgPSBsYXllcmlkLnNwbGl0KCdvLWxlZ2VuZC0nKS5sZW5ndGggPiAxID8gdHJ1ZSA6IGZhbHNlO1xyXG4gIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllcm5hbWUpO1xyXG5cclxuICAvL1JhZGlvIHRvZ2dsZSBmb3IgYmFja2dyb3VuZFxyXG4gIGlmIChsYXllci5nZXQoJ2dyb3VwJykgPT0gJ2JhY2tncm91bmQnKSB7XHJcbiAgICB2YXIgZ3JvdXBzID0gdmlld2VyLmdldEdyb3VwKCdiYWNrZ3JvdW5kJyk7XHJcblxyXG4gICAgZ3JvdXBzLmZvckVhY2goZnVuY3Rpb24oZ3JvdXApIHtcclxuICAgICAgZ3JvdXAuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICQoJyMnICsgZ3JvdXAuZ2V0KCduYW1lJykgKyAnIC5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2stdHJ1ZScpO1xyXG4gICAgICAkKCcjJyArIGdyb3VwLmdldCgnbmFtZScpICsgJyAuby1jaGVja2JveCcpLmFkZENsYXNzKCdvLWNoZWNrLWZhbHNlJyk7XHJcbiAgICAgIC8vbWFwIGxlZ2VuZFxyXG4gICAgICAkKCcjby1sZWdlbmQtJyArIGdyb3VwLmdldCgnbmFtZScpKS5yZW1vdmVDbGFzcygnby1jaGVjay10cnVlLWltZycpO1xyXG4gICAgICAkKCcjby1sZWdlbmQtJyArIGdyb3VwLmdldCgnbmFtZScpKS5hZGRDbGFzcygnby1jaGVjay1mYWxzZS1pbWcnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGxheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAkKCcjJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5yZW1vdmVDbGFzcygnby1jaGVjay1mYWxzZScpO1xyXG4gICAgJCgnIycgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykuYWRkQ2xhc3MoJ28tY2hlY2stdHJ1ZScpO1xyXG4gICAgLy9tYXAgbGVnZW5kXHJcbiAgICAkKCcjby1sZWdlbmQtJyArIGxheWVybmFtZSkucmVtb3ZlQ2xhc3MoJ28tY2hlY2stZmFsc2UtaW1nJyk7XHJcbiAgICAkKCcjby1sZWdlbmQtJyArIGxheWVybmFtZSkuYWRkQ2xhc3MoJ28tY2hlY2stdHJ1ZS1pbWcnKTtcclxuICB9IGVsc2UgeyAvL1RvZ2dsZSBjaGVjayBmb3IgYWxsIGdyb3VwcyBleGNlcHQgYmFja2dyb3VuZFxyXG5cclxuICAgIGlmICgkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5oYXNDbGFzcygnby1jaGVja2JveC10cnVlJykpIHtcclxuICAgICAgJCgnLicgKyBsYXllcm5hbWUgKyAnIC5vLWNoZWNrYm94JykucmVtb3ZlQ2xhc3MoJ28tY2hlY2tib3gtdHJ1ZScpO1xyXG4gICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG5cclxuICAgICAgaWYgKGluTWFwTGVnZW5kID09IGZhbHNlKSB7XHJcbiAgICAgICAgb2ZmVG9nZ2xlQ2hlY2soJ28tbGVnZW5kLScgKyBsYXllcm5hbWUpO1xyXG4gICAgICAgICQoJyNvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKS5yZW1vdmUoKTtcclxuICAgICAgICBsYXllci5zZXQoJ2xlZ2VuZCcsIGZhbHNlKTtcclxuICAgICAgICBjaGVja1RvZ2dsZU92ZXJsYXkoKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGF5ZXIuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgaWYgKGluTWFwTGVnZW5kID09IGZhbHNlICYmICQoJyNvLWxlZ2VuZC0nICsgbGF5ZXJuYW1lKS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICQoJyNvLW92ZXJsYXktbGlzdCcpLnByZXBlbmQoY3JlYXRlTGVnZW5kSXRlbSgnby1sZWdlbmQtJyArIGxheWVybmFtZSkpO1xyXG4gICAgICAgIG9uVG9nZ2xlQ2hlY2soJ28tbGVnZW5kLScgKyBsYXllcm5hbWUpO1xyXG4gICAgICAgIGNoZWNrVG9nZ2xlT3ZlcmxheSgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5yZW1vdmVDbGFzcygnby1jaGVja2JveC1mYWxzZScpO1xyXG4gICAgICAkKCcuJyArIGxheWVybmFtZSArICcgLm8tY2hlY2tib3gnKS5hZGRDbGFzcygnby1jaGVja2JveC10cnVlJyk7XHJcbiAgICAgIGxheWVyLnNldFZpc2libGUodHJ1ZSk7XHJcbiAgICAgIGxheWVyLnNldCgnbGVnZW5kJywgdHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCQoJyMnICsgbGF5ZXJuYW1lKS5maW5kKCcuby1sZWdlbmQtc3ViaXRlbScpLmxlbmd0aCA+IDApIHtcclxuICAgICAgdG9nZ2xlU3ViR3JvdXBDaGVjaygkKCcjJyArIGxheWVybmFtZSkucGFyZW50cygndWwnKS5oYXMoJy5vLWxlZ2VuZC1oZWFkZXInKS5maXJzdCgpLCBmYWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1RvZ2dsZU92ZXJsYXkoKSB7XHJcbiAgaWYoJCgnI28tb3ZlcmxheS1saXN0IGxpJykubGVuZ3RoID4gMSAmJiAkKCcjby1sZWdlbmQtb3ZlcmxheSA+bGk6Zmlyc3QtY2hpbGQnKS5oYXNDbGFzcygnby1oaWRkZW4nKSkge1xyXG4gICAgJCgnI28tbGVnZW5kLW92ZXJsYXkgPiBsaTpmaXJzdC1jaGlsZCcpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG4gIH0gZWxzZSBpZigkKCcjby1vdmVybGF5LWxpc3QgbGknKS5sZW5ndGggPCAyKSB7XHJcbiAgICAkKCcjby1sZWdlbmQtb3ZlcmxheSA+IGxpOmZpcnN0LWNoaWxkJykuYWRkQ2xhc3MoJ28taGlkZGVuJyk7XHJcblxyXG4gICAgaWYoJCgnI28tb3ZlcmxheS1saXN0JykubGVuZ3RoID09IDEgJiYgJCgnI28tb3ZlcmxheS1saXN0JykuaGFzQ2xhc3MoJ28taGlkZGVuJykpIHtcclxuICAgICAgJCgnI28tb3ZlcmxheS1saXN0JykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICAgIHRvZ2dsZU92ZXJsYXkoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZU92ZXJsYXkoKSB7XHJcbiAgaWYoJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLmhhc0NsYXNzKCdvLXRvZ2dsZS1idXR0b24tbWF4JykpIHtcclxuICAgICQoJyNvLWxlZ2VuZC1vdmVybGF5IC5vLXRvZ2dsZS1idXR0b24nKS5yZW1vdmVDbGFzcygnby10b2dnbGUtYnV0dG9uLW1heCcpO1xyXG4gICAgJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLmFkZENsYXNzKCdvLXRvZ2dsZS1idXR0b24tbWluJyk7XHJcbiAgICAkKCcjby1vdmVybGF5LWxpc3QnKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxuICB9IGVsc2Uge1xyXG4gICAgJCgnI28tbGVnZW5kLW92ZXJsYXkgLm8tdG9nZ2xlLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCdvLXRvZ2dsZS1idXR0b24tbWluJyk7XHJcbiAgICAkKCcjby1sZWdlbmQtb3ZlcmxheSAuby10b2dnbGUtYnV0dG9uJykuYWRkQ2xhc3MoJ28tdG9nZ2xlLWJ1dHRvbi1tYXgnKTtcclxuICAgICQoJyNvLW92ZXJsYXktbGlzdCcpLnJlbW92ZUNsYXNzKCdvLWhpZGRlbicpO1xyXG4gIH1cclxufVxyXG5cclxuLy9TZXQgY29udGVudCBmb3IgaW5mbyBidXR0b24gcG9wdXBcclxuZnVuY3Rpb24gc2hvd0Fic3RyYWN0KCRhYnN0cmFjdEJ1dHRvbikge1xyXG4gIHZhciBsYXllcjtcclxuICB2YXIgJGl0ZW0gPSAkYWJzdHJhY3RCdXR0b24uY2xvc2VzdCgnbGknKTtcclxuICB2YXIgbGF5ZXJuYW1lID0gJGFic3RyYWN0QnV0dG9uLmF0dHIoJ2lkJykuc3BsaXQoJ28tbGVnZW5kLWl0ZW0taW5mby0nKS5wb3AoKTtcclxuICB2YXIgYWJzdHJhY3QgPSB7XHJcbiAgICB0aXRsZTogJycsXHJcbiAgICBjb250ZW50OiAnJ1xyXG4gIH07XHJcblxyXG4gIC8vSWYgaW5mbyBidXR0b24gaXMgY29ubmVjdGVkIGdyb3VwXHJcbiAgaWYgKCRpdGVtLmhhc0NsYXNzKCdvLWxlZ2VuZC1oZWFkZXInKSkge1xyXG4gICAgdmFyIGdyb3VwcyA9IHZpZXdlci5nZXRHcm91cHMoKTtcclxuXHJcbiAgICB2YXIgZ3JvdXAgPSAkLmdyZXAoZ3JvdXBzLCBmdW5jdGlvbihvYmopIHtcclxuICAgICAgcmV0dXJuIChvYmoubmFtZSA9PSBsYXllcm5hbWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgYWJzdHJhY3QudGl0bGUgPSBncm91cFswXS50aXRsZTtcclxuICAgIGFic3RyYWN0LmNvbnRlbnQgPSBncm91cFswXS5hYnN0cmFjdFxyXG4gIH0gZWxzZSB7IC8vIElmIGluZm8gYnV0dG9uIGlzIGNvbm5lY3RlZCB0byBsYXllclxyXG4gICAgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJuYW1lKTtcclxuICAgIGFic3RyYWN0LnRpdGxlID0gbGF5ZXIuZ2V0KCd0aXRsZScpO1xyXG4gICAgYWJzdHJhY3QuY29udGVudCA9IGxheWVyLmdldCgnYWJzdHJhY3QnKTtcclxuICB9XHJcblxyXG4gIG1vZGFsLmNyZWF0ZU1vZGFsKCcjby1tYXAnLCB7dGl0bGU6IGFic3RyYWN0LnRpdGxlLCBjb250ZW50OiBhYnN0cmFjdC5jb250ZW50fSk7XHJcbiAgbW9kYWwuc2hvd01vZGFsKCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBpbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbnZhciB1cmw7XHJcbnZhciB0aXRsZTtcclxudmFyICRsaW5rQnV0dG9uO1xyXG5cclxuZnVuY3Rpb24gaW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdXJsID0gb3B0aW9ucy51cmw7XHJcbiAgdGl0bGUgPSBvcHRpb25zLnRpdGxlO1xyXG5cclxuICByZW5kZXIoKTtcclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICB2YXIgZWwgPSB1dGlscy5jcmVhdGVMaXN0QnV0dG9uKHtcclxuICAgIGlkOiAnby1saW5rJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tZmEtZXh0ZXJuYWwtbGluaycsXHJcbiAgICBzcmM6ICcjZmEtZXh0ZXJuYWwtbGluaycsXHJcbiAgICB0ZXh0OiB0aXRsZVxyXG5cclxuICB9KTtcclxuICAkKCcjby1tZW51dG9vbHMnKS5hcHBlbmQoZWwpO1xyXG4gICRsaW5rQnV0dG9uID0gJCgnI28tbGluay1idXR0b24nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkbGlua0J1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgIHdpbmRvdy5vcGVuKHVybCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBpbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHN1cHBvcnRzID0gcmVxdWlyZSgnLi91dGlscy9zdXBwb3J0cycpO1xyXG52YXIgcGVybWFsaW5rID0gcmVxdWlyZSgnLi9wZXJtYWxpbmsvcGVybWFsaW5rJyk7XHJcbnZhciBnZXRVcmwgPSByZXF1aXJlKCcuL3V0aWxzL2dldHVybCcpO1xyXG52YXIgaXNVcmwgPSByZXF1aXJlKCcuL3V0aWxzL2lzdXJsJyk7XHJcbnZhciB0cmltVXJsID0gcmVxdWlyZSgnLi91dGlscy90cmltdXJsJyk7XHJcblxyXG52YXIgbWFwTG9hZGVyID0gZnVuY3Rpb24obWFwT3B0aW9ucywgY29uZmlnKSB7XHJcblxyXG4gIHZhciBtYXAgPSB7fTtcclxuICB2YXIgbWFwRWwgPSBjb25maWcudGFyZ2V0O1xyXG4gIHZhciBmb3JtYXQgPSAnanNvbic7XHJcbiAgdmFyIGNvcnMgPSBjb25maWcuY3Jvc3NPcmlnaW47XHJcblxyXG4gIHZhciB1cmxQYXJhbXMgPSB1bmRlZmluZWQ7XHJcblxyXG4gIGlmIChtYXBFbC5zdWJzdHJpbmcoMCwgMSkgIT09ICcjJykge1xyXG4gICAgbWFwRWwgPSAnIycgKyBtYXBFbDtcclxuICB9XHJcbiAgbWFwLmVsID0gbWFwRWw7XHJcblxyXG4gIC8vIENoZWNrIGJyb3dzZXIgc3VwcG9ydFxyXG4gIGlmIChzdXBwb3J0cygnYnJvd3NlcicsIG1hcEVsKSA9PT0gZmFsc2UpIHtcclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICAvLyBDaGVjayBpZiBhdXRob3JpemF0aW9uIGlzIHJlcXVpcmVkIGJlZm9yZSBtYXAgb3B0aW9ucyBpcyBsb2FkZWRcclxuICBpZiAoY29uZmlnLmF1dGhvcml6YXRpb25VcmwpIHtcclxuICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogY29uZmlnLmF1dGhvcml6YXRpb25VcmxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBsb2FkTWFwT3B0aW9ucygpO1xyXG4gICAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGxvYWRNYXBPcHRpb25zKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBsb2FkTWFwT3B0aW9ucygpIHtcclxuICAgIGlmICh0eXBlb2YobWFwT3B0aW9ucykgPT09ICdvYmplY3QnKSB7XHJcbiAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaGFzaCkge1xyXG4gICAgICAgIHVybFBhcmFtcyA9IHBlcm1hbGluay5wYXJzZVBlcm1hbGluayh3aW5kb3cubG9jYXRpb24uaHJlZik7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGJhc2VVcmwgPSBjb25maWcuYmFzZVVybCB8fCAnJztcclxuICAgICAgbWFwLm9wdGlvbnMgPSAkLmV4dGVuZChjb25maWcsIG1hcE9wdGlvbnMpO1xyXG4gICAgICBpZiAobWFwT3B0aW9ucy5jb250cm9scykge1xyXG4gICAgICAgIG1hcC5vcHRpb25zLmNvbnRyb2xzID0gY29uZmlnLmRlZmF1bHRDb250cm9scy5jb25jYXQobWFwT3B0aW9ucy5jb250cm9scyk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbWFwLm9wdGlvbnMuY29udHJvbHMgPSBjb25maWcuZGVmYXVsdENvbnRyb2xzO1xyXG4gICAgICB9XHJcbiAgICAgIG1hcC5vcHRpb25zLnVybCA9IGdldFVybCgpO1xyXG4gICAgICBtYXAub3B0aW9ucy5tYXAgPSB1bmRlZmluZWQ7XHJcbiAgICAgIG1hcC5vcHRpb25zLnBhcmFtcyA9IHVybFBhcmFtcztcclxuICAgICAgbWFwLm9wdGlvbnMuYmFzZVVybCA9IGJhc2VVcmw7XHJcblxyXG4gICAgICByZXR1cm4gJC53aGVuLmFwcGx5KCQsIGxvYWRTdmdTcHJpdGVzKGJhc2VVcmwsIGNvbmZpZykpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc3ByaXRlcykge1xyXG4gICAgICAgICAgcmV0dXJuIG1hcDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZihtYXBPcHRpb25zKSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgaWYgKGlzVXJsKG1hcE9wdGlvbnMpKSB7XHJcbiAgICAgICAgdXJsUGFyYW1zID0gcGVybWFsaW5rLnBhcnNlUGVybWFsaW5rKG1hcE9wdGlvbnMpO1xyXG4gICAgICAgIHZhciB1cmwgPSBtYXBPcHRpb25zLnNwbGl0KCcjJylbMF07XHJcblxyXG4gICAgICAgIC8vcmVtb3YgZmlsZSBuYW1lIGlmIGluY2x1ZGVkIGluXHJcbiAgICAgICAgdXJsID0gdHJpbVVybCh1cmwpO1xyXG5cclxuICAgICAgICB2YXIgYmFzZVVybCA9IGNvbmZpZy5iYXNlVXJsIHx8IHVybDtcclxuICAgICAgICB2YXIganNvbiA9IHVybFBhcmFtcy5tYXAgKyAnLmpzb24nO1xyXG4gICAgICAgIHZhciBtYXBVcmwgPSB1cmw7XHJcbiAgICAgICAgdXJsICs9IGpzb247XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5oYXNoKSB7XHJcbiAgICAgICAgICB1cmxQYXJhbXMgPSBwZXJtYWxpbmsucGFyc2VQZXJtYWxpbmsod2luZG93LmxvY2F0aW9uLmhyZWYpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYmFzZVVybCA9IGNvbmZpZy5iYXNlVXJsIHx8ICcnO1xyXG4gICAgICAgIHZhciBqc29uID0gbWFwT3B0aW9ucztcclxuICAgICAgICB2YXIgdXJsID0gYmFzZVVybCArIGpzb247XHJcbiAgICAgICAgdmFyIG1hcFVybCA9IGdldFVybCgpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICByZXR1cm4gJC53aGVuLmFwcGx5KCQsIGxvYWRTdmdTcHJpdGVzKGJhc2VVcmwsIGNvbmZpZykpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oc3ByaXRlcykge1xyXG4gICAgICAgICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgZGF0YVR5cGU6IGZvcm1hdFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgbWFwLm9wdGlvbnMgPSAkLmV4dGVuZChjb25maWcsIGRhdGEpO1xyXG4gICAgICAgICAgICAgIGlmIChkYXRhLmNvbnRyb2xzKSB7XHJcbiAgICAgICAgICAgICAgICBtYXAub3B0aW9ucy5jb250cm9scyA9IGNvbmZpZy5kZWZhdWx0Q29udHJvbHMuY29uY2F0KGRhdGEuY29udHJvbHMpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtYXAub3B0aW9ucy5jb250cm9scyA9IGNvbmZpZy5kZWZhdWx0Q29udHJvbHM7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIG1hcC5vcHRpb25zLnVybCA9IG1hcFVybDtcclxuICAgICAgICAgICAgICBtYXAub3B0aW9ucy5tYXAgPSBqc29uO1xyXG4gICAgICAgICAgICAgIG1hcC5vcHRpb25zLnBhcmFtcyA9IHVybFBhcmFtcztcclxuICAgICAgICAgICAgICBtYXAub3B0aW9ucy5iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICAgICAgICByZXR1cm4gbWFwO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRTdmdTcHJpdGVzKGJhc2VVcmwsIGNvbmZpZykge1xyXG4gIHZhciBzdmdTcHJpdGVzID0gY29uZmlnLnN2Z1Nwcml0ZXM7XHJcbiAgdmFyIHN2Z1BhdGggPSBjb25maWcuc3ZnU3ByaXRlUGF0aDtcclxuICB2YXIgc3ZnUHJvbWlzZXMgPSBbXTtcclxuICBzdmdTcHJpdGVzLmZvckVhY2goZnVuY3Rpb24oc3ByaXRlKSB7XHJcbiAgICB2YXIgcHJvbWlzZSA9ICQuZ2V0KGJhc2VVcmwgKyBzdmdQYXRoICsgc3ByaXRlLCBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcbiAgICAgICAgZGl2LmlubmVySFRNTCA9IG5ldyBYTUxTZXJpYWxpemVyKCkuc2VyaWFsaXplVG9TdHJpbmcoZGF0YS5kb2N1bWVudEVsZW1lbnQpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QmVmb3JlKGRpdiwgZG9jdW1lbnQuYm9keS5jaGlsZE5vZGVzWzBdKTtcclxuICAgICAgfSk7XHJcbiAgICBzdmdQcm9taXNlcy5wdXNoKHByb21pc2UpO1xyXG4gICAgcmV0dXJuIHN2Z1Byb21pc2VzO1xyXG4gIH0pO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1hcExvYWRlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxudmFyICRtZW51QnV0dG9uLCAkY2xvc2VCdXR0b24sICRtYXBNZW51O1xyXG5cclxudmFyIHN5bWJvbFNpemUgPSAyMDtcclxudmFyIHN0eWxlU2V0dGluZ3M7XHJcblxyXG5mdW5jdGlvbiBpbml0KCkge1xyXG4gICAgc3R5bGVTZXR0aW5ncyA9IHZpZXdlci5nZXRTdHlsZVNldHRpbmdzKCk7XHJcbiAgICB2YXIgZWwgPSB1dGlscy5jcmVhdGVCdXR0b24oe1xyXG4gICAgICAgIHRleHQ6ICdNZW55JyxcclxuICAgICAgICBpZDogJ28tbWFwbWVudS1idXR0b24nLFxyXG4gICAgICAgIGNsczogJ28tbWFwbWVudS1idXR0b24tdHJ1ZScsXHJcbiAgICAgICAgaWNvbkNsczogJ28taWNvbi1mYS1iYXJzJyxcclxuICAgICAgICBzcmM6ICcjZmEtYmFycycsXHJcbiAgICAgICAgdG9vbHRpcFRleHQ6ICdNZW55JyxcclxuICAgICAgICB0b29sdGlwUGxhY2VtZW50OiAnd2VzdCdcclxuICAgIH0pO1xyXG4gICAgJCgnI28tbWFwJykuYXBwZW5kKGVsKTtcclxuICAgICRtZW51QnV0dG9uID0gJCgnI28tbWFwbWVudS1idXR0b24gYnV0dG9uJyk7XHJcblxyXG4gICAgdmFyIG1lbnVFbCA9ICc8ZGl2IGlkPVwiby1tYXBtZW51XCIgY2xhc3M9XCJvLW1hcG1lbnVcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8tYmxvY2tcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICc8dWwgaWQ9XCJvLW1lbnV0b29sc1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGxpPjwvbGk+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAnPC91bD4nXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICQoJyNvLW1hcCcpLmFwcGVuZChtZW51RWwpO1xyXG4gICAgJG1hcE1lbnUgPSAkKCcjby1tYXBtZW51Jyk7XHJcblxyXG4gICAgdmFyIGNsb3NlQnV0dG9uID0gdXRpbHMuY3JlYXRlQnV0dG9uKHtcclxuICAgICAgICBpZDogJ28tbWFwbWVudS1idXR0b24tY2xvc2UnLFxyXG4gICAgICAgIGNsczogJ28tbm8tYm94c2hhZG93JyxcclxuICAgICAgICBpY29uQ2xzOiAnby1pY29uLW1lbnUtZmEtdGltZXMnLFxyXG4gICAgICAgIHNyYzogJyNmYS10aW1lcycsXHJcbiAgICAgICAgdG9vbHRpcFRleHQ6ICdTdMOkbmcgbWVueScsXHJcbiAgICAgICAgdG9vbHRpcFBsYWNlbWVudDogJ3dlc3QnXHJcbiAgICB9KTtcclxuICAgICQoJyNvLW1lbnV0b29scycpLmFwcGVuZChjbG9zZUJ1dHRvbik7XHJcbiAgICAkY2xvc2VCdXR0b24gPSAkKCcjby1tYXBtZW51LWJ1dHRvbi1jbG9zZScpO1xyXG5cclxuICAgIGJpbmRVSUFjdGlvbnMoKTtcclxufVxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICAgJG1lbnVCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICBcdHRvZ2dsZU1lbnUoKTtcclxuICAgICAgICAkbWVudUJ1dHRvbi5ibHVyKCk7XHJcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICAkY2xvc2VCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICBcdHRvZ2dsZU1lbnUoKTtcclxuICAgICAgICAkY2xvc2VCdXR0b24uYmx1cigpO1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHRvZ2dsZU1lbnUoKSB7XHJcbiAgICBpZigkbWFwTWVudS5oYXNDbGFzcygnby1tYXBtZW51LXNob3cnKSl7XHJcbiAgICAgICRtYXBNZW51LnJlbW92ZUNsYXNzKCdvLW1hcG1lbnUtc2hvdycpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICRtYXBNZW51LmFkZENsYXNzKCdvLW1hcG1lbnUtc2hvdycpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFRhcmdldCgpIHtcclxuICAgIHJldHVybiAkbWFwTWVudTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbm1vZHVsZS5leHBvcnRzLnRvZ2dsZU1lbnUgPSB0b2dnbGVNZW51O1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRUYXJnZXQgPSBnZXRUYXJnZXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0ge1xyXG4gIGN1c3RvbVByb2plY3Rpb246IGZ1bmN0aW9uKHByb2plY3Rpb25Db2RlLCBleHRlbnQpIHtcclxuICAgICAgcmV0dXJuIG5ldyBvbC5wcm9qLlByb2plY3Rpb24oe1xyXG4gICAgICAgICAgY29kZTogcHJvamVjdGlvbkNvZGUsXHJcbiAgICAgICAgICBleHRlbnQ6IGV4dGVudFxyXG4gICAgICB9KTtcclxuICB9LFxyXG4gIHRpbGVHcmlkOiBmdW5jdGlvbihleHRlbnQsIHJlc29sdXRpb25zKSB7XHJcbiAgICAgIHZhciBvcmlnaW4gPSBvbC5leHRlbnQuZ2V0VG9wTGVmdChleHRlbnQpO1xyXG4gICAgICByZXR1cm4gbmV3IG9sLnRpbGVncmlkLlRpbGVHcmlkKHtcclxuICAgICAgICAgIGV4dGVudDogZXh0ZW50LFxyXG4gICAgICAgICAgb3JpZ2luOiBvcmlnaW4sXHJcbiAgICAgICAgICByZXNvbHV0aW9uczogcmVzb2x1dGlvbnNcclxuICAgICAgfSk7XHJcbiAgfSxcclxuICBjaGVja1pvb21DaGFuZ2U6IGZ1bmN0aW9uIGNoZWNrWm9vbUNoYW5nZShyZXNvbHV0aW9uLCBjdXJyZW50UmVzb2x1dGlvbikge1xyXG4gICAgICBpZihyZXNvbHV0aW9uICE9PSBjdXJyZW50UmVzb2x1dGlvbikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfVxyXG4gIH0sXHJcbiAgY3JlYXRlUG9pbnRGZWF0dXJlOiBmdW5jdGlvbiBjcmVhdGVQb2ludEZlYXR1cmUoY29vcmRpbmF0ZSwgc3R5bGUpIHtcclxuICAgICAgdmFyIGZlYXR1cmUgPSBuZXcgb2wuRmVhdHVyZSh7XHJcbiAgICAgICAgICBnZW9tZXRyeTogbmV3IG9sLmdlb20uUG9pbnQoY29vcmRpbmF0ZSlcclxuICAgICAgfSk7XHJcbiAgICAgIGZlYXR1cmUuc2V0U3R5bGUoc3R5bGUpO1xyXG4gICAgICByZXR1cm4gZmVhdHVyZTtcclxuICB9LFxyXG4gIGdlb2pzb25Ub0ZlYXR1cmU6IGZ1bmN0aW9uIGdlb2pzb25Ub0ZlYXR1cmUob2JqKSB7XHJcbiAgICAgIHZhciB2ZWN0b3JTb3VyY2UgPSBuZXcgb2wuc291cmNlLlZlY3Rvcih7XHJcbiAgICAgICAgZmVhdHVyZXM6IChuZXcgb2wuZm9ybWF0Lkdlb0pTT04oKSkucmVhZEZlYXR1cmVzKG9iailcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiB2ZWN0b3JTb3VyY2UuZ2V0RmVhdHVyZXMoKVswXTtcclxuICB9LFxyXG4gIHdrdFRvRmVhdHVyZTogZnVuY3Rpb24gd2t0VG9GZWF0dXJlKHdrdCwgc3JzTmFtZSkge1xyXG4gICAgICB2YXIgZm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5XS1QoKTtcclxuICAgICAgdmFyIGZlYXR1cmUgPSBmb3JtYXQucmVhZEZlYXR1cmUod2t0LCB7XHJcbiAgICAgICAgZGF0YVByb2plY3Rpb246IHNyc05hbWUsXHJcbiAgICAgICAgZmVhdHVyZVByb2plY3Rpb246IHNyc05hbWVcclxuICAgICAgfSk7XHJcbiAgICAgIHJldHVybiBmZWF0dXJlO1xyXG4gIH0sXHJcbiAgem9vbVRvRXhlbnQ6IGZ1bmN0aW9uIHpvb21Ub0V4ZW50KGdlb21ldHJ5LCBsZXZlbCkge1xyXG4gICAgICB2YXIgbWFwID0gdmlld2VyLmdldE1hcCgpO1xyXG4gICAgICB2YXIgdmlldyA9IG1hcC5nZXRWaWV3KCk7XHJcbiAgICAgIHZhciBtYXhab29tID0gbGV2ZWw7XHJcbiAgICAgIHZhciBleHRlbnQgPSBnZW9tZXRyeS5nZXRFeHRlbnQoKTtcclxuICAgICAgaWYoZXh0ZW50KSB7XHJcbiAgICAgICAgICB2aWV3LmZpdChleHRlbnQsIHttYXhab29tOiBtYXhab29tfSk7XHJcbiAgICAgICAgICByZXR1cm4gZXh0ZW50O1xyXG4gICAgICB9XHJcbiAgICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgIH1cclxuICB9LFxyXG4gIGdldENlbnRlcjogZnVuY3Rpb24gZ2V0Q2VudGVyKGdlb21ldHJ5KSB7XHJcbiAgICAgIHZhciB0eXBlID0gZ2VvbWV0cnkuZ2V0VHlwZSgpO1xyXG4gICAgICB2YXIgY2VudGVyO1xyXG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgIGNhc2UgXCJQb2x5Z29uXCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0SW50ZXJpb3JQb2ludCgpLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiTXVsdGlQb2x5Z29uXCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0SW50ZXJpb3JQb2ludHMoKVswXS5nZXRDb29yZGluYXRlcygpO1xyXG4gICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgY2FzZSBcIlBvaW50XCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJNdWx0aVBvaW50XCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnlbMF0uZ2V0Q29vcmRpbmF0ZXMoKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJMaW5lU3RyaW5nXCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0Q29vcmRpbmF0ZUF0KDAuNSk7XHJcbiAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICBjYXNlIFwiTXVsdGlMaW5lU3RyaW5nXCI6XHJcbiAgICAgICAgICAgICAgY2VudGVyID0gZ2VvbWV0cnkuZ2V0TGluZVN0cmluZ3MoKVswXS5nZXRDb29yZGluYXRlQXQoMC41KTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgIGNhc2UgXCJDaXJjbGVcIjpcclxuICAgICAgICAgICAgICBjZW50ZXIgPSBnZW9tZXRyeS5nZXRDZW50ZXIoKTtcclxuICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gY2VudGVyO1xyXG4gIH0sXHJcbiAgc2NhbGVUb1Jlc29sdXRpb246IGZ1bmN0aW9uIHNjYWxlVG9SZXNvbHV0aW9uKHNjYWxlLCBwcm9qZWN0aW9uKSB7XHJcbiAgICB2YXIgZHBpID0gMjUuNCAvIDAuMjg7XHJcbiAgICB2YXIgbXB1ID0gcHJvamVjdGlvbi5nZXRNZXRlcnNQZXJVbml0KCk7XHJcbiAgICB2YXIgcmVzb2x1dGlvbiA9IHNjYWxlIC8gKG1wdSAqIDM5LjM3ICogZHBpKTtcclxuICAgIHJldHVybiByZXNvbHV0aW9uO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIHN0eWxlID0gcmVxdWlyZSgnLi9zdHlsZScpKCk7XHJcbnZhciBzdHlsZVR5cGVzID0gcmVxdWlyZSgnLi9zdHlsZS9zdHlsZXR5cGVzJyk7XHJcblxyXG52YXIgbWFwO1xyXG52YXIgYWN0aXZlQnV0dG9uO1xyXG52YXIgZGVmYXVsdEJ1dHRvbjtcclxudmFyIG1lYXN1cmU7XHJcbnZhciB0eXBlO1xyXG52YXIgc2tldGNoO1xyXG52YXIgbWVhc3VyZVRvb2x0aXA7XHJcbnZhciBtZWFzdXJlVG9vbHRpcEVsZW1lbnQ7XHJcbnZhciBtZWFzdXJlU3R5bGVPcHRpb25zO1xyXG52YXIgaGVscFRvb2x0aXA7XHJcbnZhciBoZWxwVG9vbHRpcEVsZW1lbnQ7XHJcbnZhciB2ZWN0b3I7XHJcbnZhciBzb3VyY2U7XHJcbnZhciBsYWJlbDtcclxudmFyIG92ZXJsYXlBcnJheSA9IFtdO1xyXG52YXIgZHJhd1N0YXJ0ID0gZmFsc2U7XHJcbnZhciBpc0FjdGl2ZSA9IGZhbHNlO1xyXG52YXIgd2dzODRTcGhlcmUgPSBuZXcgb2wuU3BoZXJlKDYzNzgxMzcpO1xyXG5cclxuZnVuY3Rpb24gaW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8ICcjby10b29sYmFyLW1hcHRvb2xzJztcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcbiAgc291cmNlID0gbmV3IG9sLnNvdXJjZS5WZWN0b3IoKTtcclxuICBtZWFzdXJlU3R5bGVPcHRpb25zID0gc3R5bGVUeXBlcy5nZXRTdHlsZSgnbWVhc3VyZScpO1xyXG5cclxuICAvL0RyYXduIGZlYXR1cmVzXHJcbiAgdmVjdG9yID0gbmV3IG9sLmxheWVyLlZlY3Rvcih7XHJcbiAgICBzb3VyY2U6IHNvdXJjZSxcclxuICAgIG5hbWU6ICdtZWFzdXJlJyxcclxuICAgIHZpc2libGU6IGZhbHNlLFxyXG4gICAgekluZGV4OiA2XHJcbiAgfSk7XHJcblxyXG4gIG1hcC5hZGRMYXllcih2ZWN0b3IpO1xyXG5cclxuICAkKCcuby1tYXAnKS5vbignZW5hYmxlSW50ZXJhY3Rpb24nLCBvbkVuYWJsZUludGVyYWN0aW9uKTtcclxuXHJcbiAgcmVuZGVyKHRhcmdldCk7XHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG5cclxuICBkZWZhdWx0QnV0dG9uID0gJCgnI28tbWVhc3VyZS1saW5lLWJ1dHRvbiBidXR0b24nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25FbmFibGVJbnRlcmFjdGlvbihlKSB7XHJcbiAgaWYoZS5pbnRlcmFjdGlvbiA9PT0gJ21lYXN1cmUnKSB7XHJcbiAgICAkKCcjby1tZWFzdXJlLWJ1dHRvbiBidXR0b24nKS5hZGRDbGFzcygnby1tZWFzdXJlLWJ1dHRvbi10cnVlJyk7XHJcbiAgICAkKCcjby1tZWFzdXJlLWxpbmUtYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICAkKCcjby1tZWFzdXJlLXBvbHlnb24tYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgICAkKCcjby1tZWFzdXJlLWJ1dHRvbicpLnJlbW92ZUNsYXNzKCd0b29sdGlwJyk7XHJcbiAgICBzZXRBY3RpdmUodHJ1ZSk7XHJcbiAgICBkZWZhdWx0QnV0dG9uLnRyaWdnZXIoJ2NsaWNrJyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGlmIChhY3RpdmVCdXR0b24pIHtcclxuICAgICAgYWN0aXZlQnV0dG9uLnJlbW92ZUNsYXNzKCdvLW1lYXN1cmUtYnV0dG9uLXRydWUnKTtcclxuICAgIH07XHJcblxyXG4gICAgJCgnI28tbWVhc3VyZS1idXR0b24gYnV0dG9uJykucmVtb3ZlQ2xhc3MoJ28tbWVhc3VyZS1idXR0b24tdHJ1ZScpO1xyXG4gICAgJCgnI28tbWVhc3VyZS1saW5lLWJ1dHRvbicpLmFkZENsYXNzKCdvLWhpZGRlbicpO1xyXG4gICAgJCgnI28tbWVhc3VyZS1wb2x5Z29uLWJ1dHRvbicpLmFkZENsYXNzKCdvLWhpZGRlbicpO1xyXG4gICAgJCgnI28tbWVhc3VyZS1idXR0b24nKS5hZGRDbGFzcygndG9vbHRpcCcpO1xyXG5cclxuICAgIG1hcC51bigncG9pbnRlcm1vdmUnLCBwb2ludGVyTW92ZUhhbmRsZXIpO1xyXG4gICAgbWFwLnVuKCdjbGljaycsIHBvaW50ZXJNb3ZlSGFuZGxlcik7XHJcbiAgICBtYXAucmVtb3ZlSW50ZXJhY3Rpb24obWVhc3VyZSk7XHJcbiAgICB2ZWN0b3Iuc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICBWaWV3ZXIucmVtb3ZlT3ZlcmxheXMob3ZlcmxheUFycmF5KTtcclxuICAgIHZlY3Rvci5nZXRTb3VyY2UoKS5jbGVhcigpO1xyXG4gICAgc2V0QWN0aXZlKGZhbHNlKTtcclxuICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBzZXRBY3RpdmUoc3RhdGUpIHtcclxuICBpZihzdGF0ZSA9PT0gdHJ1ZSkge1xyXG4gICAgaXNBY3RpdmUgPSB0cnVlO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBpc0FjdGl2ZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcih0YXJnZXQpIHtcclxuXHJcbiAgdmFyIHRvb2xiYXIgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCAnJywge1xyXG4gICAgaWQ6ICdvLW1lYXN1cmUtdG9vbGJhcicsXHJcbiAgICBjbHM6ICdvLXRvb2xiYXItaG9yaXpvbnRhbCdcclxuICB9KTtcclxuXHJcbiAgJCh0YXJnZXQpLmFwcGVuZCh0b29sYmFyKTtcclxuXHJcbiAgdmFyIG1iID0gdXRpbHMuY3JlYXRlQnV0dG9uKHtcclxuICAgIGlkOiAnby1tZWFzdXJlLWJ1dHRvbicsXHJcbiAgICBjbHM6ICdvLW1lYXN1cmUtYnV0dG9uJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tc3RlYWR5LW1lYXN1cmUnLFxyXG4gICAgc3JjOiAnI3N0ZWFkeS1tZWFzdXJlJyxcclxuICAgIHRvb2x0aXBUZXh0OiAnTcOkdCBpIGthcnRhbidcclxuICB9KTtcclxuICAkKCcjJyArICdvLW1lYXN1cmUtdG9vbGJhcicpLmFwcGVuZChtYik7XHJcblxyXG4gIHZhciBsYiA9IHV0aWxzLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICBpZDogJ28tbWVhc3VyZS1saW5lLWJ1dHRvbicsXHJcbiAgICBjbHM6ICdvLW1lYXN1cmUtdHlwZS1idXR0b24nLFxyXG4gICAgaWNvbkNsczogJ28taWNvbi1taW5pY29ucy1saW5lLXZlY3RvcicsXHJcbiAgICBzcmM6ICcjbWluaWNvbnMtbGluZS12ZWN0b3InLFxyXG4gICAgdG9vbHRpcFRleHQ6ICdMaW5qZScsXHJcbiAgICB0b29sdGlwUGxhY2VtZW50OiAnbm9ydGgnXHJcbiAgfSk7XHJcbiAgJCgnIycgKyAnby1tZWFzdXJlLXRvb2xiYXInKS5hcHBlbmQobGIpO1xyXG5cclxuICAkKCcjby1tZWFzdXJlLWxpbmUtYnV0dG9uJykuYWRkQ2xhc3MoJ28taGlkZGVuJyk7XHJcblxyXG4gIHZhciBwYiA9IHV0aWxzLmNyZWF0ZUJ1dHRvbih7XHJcbiAgICBpZDogJ28tbWVhc3VyZS1wb2x5Z29uLWJ1dHRvbicsXHJcbiAgICBjbHM6ICdvLW1lYXN1cmUtdHlwZS1idXR0b24nLFxyXG4gICAgaWNvbkNsczogJ28taWNvbi1taW5pY29ucy1zcXVhcmUtdmVjdG9yJyxcclxuICAgIHNyYzogJyNtaW5pY29ucy1zcXVhcmUtdmVjdG9yJyxcclxuICAgIHRvb2x0aXBUZXh0OiAnWXRhJyxcclxuICAgIHRvb2x0aXBQbGFjZW1lbnQ6ICdub3J0aCdcclxuICB9KTtcclxuXHJcbiAgJCgnIycgKyAnby1tZWFzdXJlLXRvb2xiYXInKS5hcHBlbmQocGIpO1xyXG4gICQoJyNvLW1lYXN1cmUtcG9seWdvbi1idXR0b24nKS5hZGRDbGFzcygnby1oaWRkZW4nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkKCcjby1tZWFzdXJlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIHRvZ2dsZU1lYXN1cmUoKTtcclxuICAgICQoJyNvLW1lYXN1cmUtYnV0dG9uIGJ1dHRvbicpLmJsdXIoKTtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICB9KTtcclxuXHJcbiAgJCgnI28tbWVhc3VyZS1saW5lLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIHR5cGUgPSAnTGluZVN0cmluZyc7XHJcbiAgICB0b2dnbGVUeXBlKCQoJyNvLW1lYXN1cmUtbGluZS1idXR0b24gYnV0dG9uJykpO1xyXG4gICAgJCgnI28tbWVhc3VyZS1saW5lLWJ1dHRvbiBidXR0b24nKS5ibHVyKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcblxyXG4gICQoJyNvLW1lYXN1cmUtcG9seWdvbi1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICB0eXBlID0gJ1BvbHlnb24nO1xyXG4gICAgdG9nZ2xlVHlwZSgkKCcjby1tZWFzdXJlLXBvbHlnb24tYnV0dG9uIGJ1dHRvbicpKTtcclxuICAgICQoJyNvLW1lYXN1cmUtcG9seWdvbi1idXR0b24gYnV0dG9uJykuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlU3R5bGUoZmVhdHVyZSwgbGFiZWxUZXh0KSB7XHJcbiAgdmFyIGZlYXR1cmVUeXBlID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldFR5cGUoKTtcclxuICB2YXIgbWVhc3VyZVN0eWxlID0gZmVhdHVyZVR5cGUgPT0gJ0xpbmVTdHJpbmcnID8gc3R5bGUuY3JlYXRlU3R5bGVSdWxlKG1lYXN1cmVTdHlsZU9wdGlvbnMubGluZXN0cmluZykgOiBzdHlsZS5jcmVhdGVTdHlsZVJ1bGUobWVhc3VyZVN0eWxlT3B0aW9ucy5wb2x5Z29uKTtcclxuXHJcbiAgcmV0dXJuIG1lYXN1cmVTdHlsZTtcclxufVxyXG5cclxuLy9EaXNwbGF5IGFuZCBtb3ZlIHRvb2x0aXBzIHdpdGggcG9pbnRlclxyXG5mdW5jdGlvbiBwb2ludGVyTW92ZUhhbmRsZXIoZXZ0KSB7XHJcbiAgaWYgKGV2dC5kcmFnZ2luZykge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgdmFyIGhlbHBNc2cgPSAnS2xpY2thIGbDtnIgYXR0IGLDtnJqYSBtw6R0YSc7XHJcbiAgdmFyIHRvb2x0aXBDb29yZCA9IGV2dC5jb29yZGluYXRlO1xyXG5cclxuICBpZiAoc2tldGNoKSB7XHJcbiAgICB2YXIgb3V0cHV0O1xyXG4gICAgdmFyIGdlb20gPSAoc2tldGNoLmdldEdlb21ldHJ5KCkpO1xyXG5cclxuICAgIGlmIChnZW9tIGluc3RhbmNlb2Ygb2wuZ2VvbS5Qb2x5Z29uKSB7XHJcbiAgICAgIG91dHB1dCA9IGZvcm1hdEFyZWEoLyoqIEB0eXBlIHtvbC5nZW9tLlBvbHlnb259ICovIChnZW9tKSk7XHJcbiAgICAgIHRvb2x0aXBDb29yZCA9IGdlb20uZ2V0SW50ZXJpb3JQb2ludCgpLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICB9IGVsc2UgaWYgKGdlb20gaW5zdGFuY2VvZiBvbC5nZW9tLkxpbmVTdHJpbmcpIHtcclxuICAgICAgb3V0cHV0ID0gZm9ybWF0TGVuZ3RoKCAvKiogQHR5cGUge29sLmdlb20uTGluZVN0cmluZ30gKi8gKGdlb20pKTtcclxuICAgICAgdG9vbHRpcENvb3JkID0gZ2VvbS5nZXRMYXN0Q29vcmRpbmF0ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudC5pbm5lckhUTUwgPSBvdXRwdXQ7XHJcbiAgICBsYWJlbCA9IG91dHB1dDtcclxuICAgIG1lYXN1cmVUb29sdGlwLnNldFBvc2l0aW9uKHRvb2x0aXBDb29yZCk7XHJcbiAgfVxyXG5cclxuICBpZiAoZXZ0LnR5cGUgPT0gJ3BvaW50ZXJtb3ZlJykge1xyXG4gICAgaGVscFRvb2x0aXBFbGVtZW50LmlubmVySFRNTCA9IGhlbHBNc2c7XHJcbiAgICBoZWxwVG9vbHRpcC5zZXRQb3NpdGlvbihldnQuY29vcmRpbmF0ZSk7XHJcbiAgfVxyXG5cclxufTtcclxuXHJcbmZ1bmN0aW9uIGFkZEludGVyYWN0aW9uKCkge1xyXG4gIHZlY3Rvci5zZXRWaXNpYmxlKHRydWUpO1xyXG5cclxuICBtZWFzdXJlID0gbmV3IG9sLmludGVyYWN0aW9uLkRyYXcoe1xyXG4gICAgc291cmNlOiBzb3VyY2UsXHJcbiAgICB0eXBlOiB0eXBlLFxyXG4gICAgc3R5bGU6IHN0eWxlLmNyZWF0ZVN0eWxlUnVsZShtZWFzdXJlU3R5bGVPcHRpb25zLmludGVyYWN0aW9uKVxyXG4gIH0pO1xyXG5cclxuICBtYXAuYWRkSW50ZXJhY3Rpb24obWVhc3VyZSk7XHJcblxyXG4gIGNyZWF0ZU1lYXN1cmVUb29sdGlwKCk7XHJcbiAgY3JlYXRlSGVscFRvb2x0aXAoKTtcclxuXHJcbiAgbWFwLm9uKCdwb2ludGVybW92ZScsIHBvaW50ZXJNb3ZlSGFuZGxlcik7XHJcbiAgbWFwLm9uKCdjbGljaycsIHBvaW50ZXJNb3ZlSGFuZGxlcik7XHJcblxyXG4gIG1lYXN1cmUub24oJ2RyYXdzdGFydCcsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgLy8gc2V0IHNrZXRjaFxyXG4gICAgZHJhd1N0YXJ0ID0gdHJ1ZTtcclxuICAgIHNrZXRjaCA9IGV2dC5mZWF0dXJlO1xyXG4gICAgJChoZWxwVG9vbHRpcEVsZW1lbnQpLmFkZENsYXNzKCdvLWhpZGRlbicpO1xyXG4gIH0sIHRoaXMpO1xyXG5cclxuICBtZWFzdXJlLm9uKCdkcmF3ZW5kJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICB2YXIgZmVhdHVyZSA9IGV2dC5mZWF0dXJlO1xyXG4gICAgZmVhdHVyZS5zZXRTdHlsZShjcmVhdGVTdHlsZShmZWF0dXJlKSk7XHJcbiAgICBmZWF0dXJlLmdldFN0eWxlKClbMF0uZ2V0VGV4dCgpLnNldFRleHQobGFiZWwpO1xyXG4gICAgJChtZWFzdXJlVG9vbHRpcEVsZW1lbnQpLnJlbW92ZSgpO1xyXG4gICAgLy8gdW5zZXQgc2tldGNoXHJcbiAgICBza2V0Y2ggPSBudWxsO1xyXG4gICAgLy8gdW5zZXQgdG9vbHRpcCBzbyB0aGF0IGEgbmV3IG9uZSBjYW4gYmUgY3JlYXRlZFxyXG4gICAgbWVhc3VyZVRvb2x0aXBFbGVtZW50ID0gbnVsbDtcclxuICAgIGNyZWF0ZU1lYXN1cmVUb29sdGlwKCk7XHJcbiAgICAkKGhlbHBUb29sdGlwRWxlbWVudCkucmVtb3ZlQ2xhc3MoJ28taGlkZGVuJyk7XHJcbiAgfSwgdGhpcyk7XHJcblxyXG59O1xyXG5cclxuZnVuY3Rpb24gY3JlYXRlSGVscFRvb2x0aXAoKSB7XHJcbiAgaWYgKGhlbHBUb29sdGlwRWxlbWVudCkge1xyXG4gICAgaGVscFRvb2x0aXBFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoaGVscFRvb2x0aXBFbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGhlbHBUb29sdGlwRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gIGhlbHBUb29sdGlwRWxlbWVudC5jbGFzc05hbWUgPSAnby10b29sdGlwIG8tdG9vbHRpcC1tZWFzdXJlJztcclxuXHJcbiAgaGVscFRvb2x0aXAgPSBuZXcgb2wuT3ZlcmxheSh7XHJcbiAgICBlbGVtZW50OiBoZWxwVG9vbHRpcEVsZW1lbnQsXHJcbiAgICBvZmZzZXQ6IFsxNSwgMF0sXHJcbiAgICBwb3NpdGlvbmluZzogJ2NlbnRlci1sZWZ0JyxcclxuICB9KTtcclxuXHJcbiAgb3ZlcmxheUFycmF5LnB1c2goaGVscFRvb2x0aXApO1xyXG4gIG1hcC5hZGRPdmVybGF5KGhlbHBUb29sdGlwKTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZU1lYXN1cmVUb29sdGlwKCkge1xyXG4gIGlmIChtZWFzdXJlVG9vbHRpcEVsZW1lbnQpIHtcclxuICAgIG1lYXN1cmVUb29sdGlwRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG1lYXN1cmVUb29sdGlwRWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBtZWFzdXJlVG9vbHRpcEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICBtZWFzdXJlVG9vbHRpcEVsZW1lbnQuY2xhc3NOYW1lID0gJ28tdG9vbHRpcCBvLXRvb2x0aXAtbWVhc3VyZSc7XHJcblxyXG4gIG1lYXN1cmVUb29sdGlwID0gbmV3IG9sLk92ZXJsYXkoe1xyXG4gICAgZWxlbWVudDogbWVhc3VyZVRvb2x0aXBFbGVtZW50LFxyXG4gICAgb2Zmc2V0OiBbMCwgLTE1XSxcclxuICAgIHBvc2l0aW9uaW5nOiAnYm90dG9tLWNlbnRlcicsXHJcbiAgICBzdG9wRXZlbnQ6IGZhbHNlXHJcbiAgfSk7XHJcblxyXG4gIG92ZXJsYXlBcnJheS5wdXNoKG1lYXN1cmVUb29sdGlwKTtcclxuICBtYXAuYWRkT3ZlcmxheShtZWFzdXJlVG9vbHRpcCk7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBmb3JtYXRMZW5ndGgobGluZSkge1xyXG4gIHZhciBsZW5ndGgsIG91dHB1dDtcclxuICB2YXIgY29vcmRpbmF0ZXMgPSBsaW5lLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgbGVuZ3RoID0gY29vcmRpbmF0ZXMucmVkdWNlKGdldExlbmd0aCwwKTtcclxuXHJcbiAgaWYgKGxlbmd0aCA+IDEwMCkge1xyXG4gICAgb3V0cHV0ID0gKE1hdGgucm91bmQobGVuZ3RoIC8gMTAwMCAqIDEwMCkgLyAxMDApICtcclxuICAgICAgJyAnICsgJ2ttJztcclxuICB9IGVsc2Uge1xyXG4gICAgb3V0cHV0ID0gKE1hdGgucm91bmQobGVuZ3RoICogMTAwKSAvIDEwMCkgK1xyXG4gICAgICAnICcgKyAnbSc7XHJcbiAgfVxyXG4gIHJldHVybiBvdXRwdXQ7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXRMZW5ndGgodG90YWwsIHZhbHVlLCBpbmRleCwgYXJyKXtcclxuICBpZihpbmRleDxhcnIubGVuZ3RoLTEpe1xyXG4gICAgdmFyIHNvdXJjZVByb2ogPSBtYXAuZ2V0VmlldygpLmdldFByb2plY3Rpb24oKTtcclxuICAgIHZhciBjMSA9IG9sLnByb2oudHJhbnNmb3JtKGFycltpbmRleF0sIHNvdXJjZVByb2osICdFUFNHOjQzMjYnKTtcclxuICAgIHZhciBjMiA9IG9sLnByb2oudHJhbnNmb3JtKGFycltpbmRleCArIDFdLCBzb3VyY2VQcm9qLCAnRVBTRzo0MzI2Jyk7XHJcbiAgICB0b3RhbCArPSB3Z3M4NFNwaGVyZS5oYXZlcnNpbmVEaXN0YW5jZShjMSwgYzIpO1xyXG4gIH1cclxuICByZXR1cm4gdG90YWw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZvcm1hdEFyZWEocG9seWdvbikge1xyXG4gIHZhciBhcmVhO1xyXG4gIHZhciBzb3VyY2VQcm9qID0gbWFwLmdldFZpZXcoKS5nZXRQcm9qZWN0aW9uKCk7XHJcbiAgdmFyIGdlb20gPSAvKiogQHR5cGUge29sLmdlb20uUG9seWdvbn0gKi8ocG9seWdvbi5jbG9uZSgpLnRyYW5zZm9ybShzb3VyY2VQcm9qLCAnRVBTRzo0MzI2JykpO1xyXG4gIHZhciBjb29yZGluYXRlcyA9IGdlb20uZ2V0TGluZWFyUmluZygwKS5nZXRDb29yZGluYXRlcygpO1xyXG4gIGFyZWEgPSBNYXRoLmFicyh3Z3M4NFNwaGVyZS5nZW9kZXNpY0FyZWEoY29vcmRpbmF0ZXMpKTtcclxuICB2YXIgb3V0cHV0O1xyXG5cclxuICBpZiAoYXJlYSA+IDEwMDAwMDAwKSB7XHJcbiAgICBvdXRwdXQgPSAoTWF0aC5yb3VuZChhcmVhIC8gMTAwMDAwMCAqIDEwMCkgLyAxMDApICtcclxuICAgICAgJyAnICsgJ2ttPHN1cD4yPC9zdXA+JztcclxuICB9IGVsc2UgaWYgKGFyZWEgPiAxMDAwMCkge1xyXG4gICAgb3V0cHV0ID0gKE1hdGgucm91bmQoYXJlYSAvIDEwMDAwICogMTAwKSAvIDEwMCkgK1xyXG4gICAgICAnICcgKyAnaGEnO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBvdXRwdXQgPSAoTWF0aC5yb3VuZChhcmVhICogMTAwKSAvIDEwMCkgK1xyXG4gICAgICAnICcgKyAnbTxzdXA+Mjwvc3VwPic7XHJcbiAgfVxyXG5cclxuICB2YXIgaHRtbEVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgaHRtbEVsZW0uaW5uZXJIVE1MID0gb3V0cHV0O1xyXG5cclxuICBbXS5mb3JFYWNoLmNhbGwoaHRtbEVsZW0uY2hpbGRyZW4sIGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgIGlmIChlbGVtZW50LnRhZ05hbWUgPT09ICdTVVAnKSB7XHJcbiAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGVsZW1lbnQudGV4dENvbnRlbnQuY2hhckNvZGVBdCgwKSArIDEyOCk7XHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgcmV0dXJuIGh0bWxFbGVtLnRleHRDb250ZW50O1xyXG59O1xyXG5cclxuZnVuY3Rpb24gdG9nZ2xlTWVhc3VyZSAoKSB7XHJcbiAgaWYgKGlzQWN0aXZlKSB7XHJcbiAgICAkKCcuby1tYXAnKS50cmlnZ2VyKHtcclxuICAgICAgdHlwZTogJ2VuYWJsZUludGVyYWN0aW9uJyxcclxuICAgICAgaW50ZXJhY3Rpb246ICdmZWF0dXJlSW5mbydcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAkKCcuby1tYXAnKS50cmlnZ2VyKHtcclxuICAgICAgdHlwZTogJ2VuYWJsZUludGVyYWN0aW9uJyxcclxuICAgICAgaW50ZXJhY3Rpb246ICdtZWFzdXJlJ1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxufTtcclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVR5cGUoYnV0dG9uKSB7XHJcbiAgaWYgKGFjdGl2ZUJ1dHRvbikge1xyXG4gICAgYWN0aXZlQnV0dG9uLnJlbW92ZUNsYXNzKCdvLW1lYXN1cmUtYnV0dG9uLXRydWUnKTtcclxuICB9XHJcblxyXG4gIGJ1dHRvbi5hZGRDbGFzcygnby1tZWFzdXJlLWJ1dHRvbi10cnVlJyk7XHJcbiAgYWN0aXZlQnV0dG9uID0gYnV0dG9uO1xyXG4gIG1hcC5yZW1vdmVJbnRlcmFjdGlvbihtZWFzdXJlKTtcclxuICBhZGRJbnRlcmFjdGlvbigpO1xyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5cclxudmFyIG1vZGFsID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gIHZhciBpc1N0YXRpYyA9IHVuZGVmaW5lZDtcclxuICB2YXIgJHRhcmdldCA9IHVuZGVmaW5lZDtcclxuICB2YXIgbW9kYWxFbCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGNyZWF0ZU1vZGFsOiBjcmVhdGVNb2RhbCxcclxuICAgIHNob3dNb2RhbDogc2hvd01vZGFsLFxyXG4gICAgY2xvc2VNb2RhbDogY2xvc2VNb2RhbFxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlcih0aXRsZSwgY29udGVudCwgY2xzKSB7XHJcbiAgICBtb2RhbEVsID0gJzxkaXYgaWQ9XCJvLW1vZGFsXCIgJyArICdjbGFzcz1cIicgKyBjbHMgKyAnXCI+JyArXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiby1tb2RhbC1zY3JlZW5cIj48L2Rpdj4nICtcclxuICAgICAgJzxkaXYgY2xhc3M9XCJvLW1vZGFsXCI+JyArXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiby1jbG9zZS1idXR0b25cIj48c3ZnIGNsYXNzPVwiby1pY29uLWZhLXRpbWVzXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLXRpbWVzXCI+PC91c2U+PC9zdmc+PC9kaXY+JyArXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiby1tb2RhbC10aXRsZVwiPicgKyB0aXRsZSArICc8L2Rpdj4nICtcclxuICAgICAgJzxkaXYgY2xhc3M9XCJvLW1vZGFsLWNvbnRlbnRcIj4nICsgY29udGVudCArICc8L2Rpdj4nICtcclxuICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAnPC9kaXY+JztcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgICBpZiAoaXNTdGF0aWMgPT09IGZhbHNlKSB7XHJcbiAgICAgICQoJy5vLW1vZGFsLXNjcmVlbiwgLm8tY2xvc2UtYnV0dG9uJykuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgY2xvc2VNb2RhbCgpO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICQoJy5vLWNsb3NlLWJ1dHRvbicpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNsb3NlTW9kYWwoKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVNb2RhbChtb2RhbFRhcmdldCwgb3B0aW9ucykge1xyXG4gICAgdmFyIHRpdGxlID0gb3B0aW9ucy50aXRsZSB8fCAnJztcclxuICAgIHZhciBjb250ZW50ID0gb3B0aW9ucy5jb250ZW50IHx8ICcnO1xyXG4gICAgdmFyIGNscyA9IG9wdGlvbnMuY2xzIHx8ICcnO1xyXG4gICAgaWYgKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3N0YXRpYycpKSB7XHJcbiAgICAgIGlzU3RhdGljID0gb3B0aW9ucy5zdGF0aWM7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpc1N0YXRpYyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKHRpdGxlLCBjb250ZW50LCBjbHMpO1xyXG4gICAgJHRhcmdldCA9ICQobW9kYWxUYXJnZXQpO1xyXG5cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNob3dNb2RhbCgpIHtcclxuICAgICR0YXJnZXQucHJlcGVuZChtb2RhbEVsKTtcclxuICAgIGJpbmRVSUFjdGlvbnMoKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNsb3NlTW9kYWwoKSB7XHJcbiAgICAkKCcjby1tb2RhbCcpLnJlbW92ZSgpO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBtb2RhbCgpO1xyXG4iLCIvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICogQ29weXJpZ2h0IDIwMTYgT3JpZ29cclxuICogTGljZW5zZWQgdW5kZXIgQlNEIDItQ2xhdXNlIChodHRwczovL2dpdGh1Yi5jb20vb3JpZ28tbWFwL29yaWdvL2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0KVxyXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG52YXIgZG93bmxvYWRlciA9IHJlcXVpcmUoJy4vb2ZmbGluZS9kb3dubG9hZGVyJyk7XHJcbnZhciBkb3dubG9hZEhhbmRsZXIgPSByZXF1aXJlKCcuL29mZmxpbmUvZG93bmxvYWRoYW5kbGVyJyk7XHJcbnZhciBvZmZsaW5lU3RvcmUgPSByZXF1aXJlKCcuL29mZmxpbmUvb2ZmbGluZXN0b3JlJykoKTtcclxuXHJcbnZhciBtYXAgPSB1bmRlZmluZWQ7XHJcbnZhciBiYXNlVXJsID0gdW5kZWZpbmVkO1xyXG52YXIgJG9mZmxpbmVCdXR0b24gPSB1bmRlZmluZWQ7XHJcblxyXG5mdW5jdGlvbiBJbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcbiAgYmFzZVVybCA9IFZpZXdlci5nZXRCYXNlVXJsKCk7XHJcblxyXG4gIGRvd25sb2FkSGFuZGxlcigpO1xyXG5cclxuICByZW5kZXIoKTtcclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlcigpIHtcclxuICB2YXIgZWwgPSB1dGlscy5jcmVhdGVMaXN0QnV0dG9uKHtcclxuICAgIGlkOiAnby1vZmZsaW5lJyxcclxuICAgIGljb25DbHM6ICdvLWljb24tZmEtZG93bmxvYWQnLFxyXG4gICAgc3JjOiAnI2ZhLWRvd25sb2FkJyxcclxuICAgIHRleHQ6ICdOZWRsYWRkbmluZ2FyJ1xyXG4gIH0pO1xyXG4gICQoJyNvLW1lbnV0b29scycpLmFwcGVuZChlbCk7XHJcbiAgJG9mZmxpbmVCdXR0b24gPSAkKCcjby1vZmZsaW5lLWJ1dHRvbicpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICRvZmZsaW5lQnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgIGRvd25sb2FkZXIob2ZmbGluZVN0b3JlLmdldE9mZmxpbmVMYXllcnMoKSk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4vZG93bmxvYWRlci50ZW1wbGF0ZS5oYW5kbGViYXJzXCIpO1xyXG52YXIgc3Bpbm5lciA9IHJlcXVpcmUoXCIuLi9jb21wb25lbnRzL3NwaW5uZXIuaGFuZGxlYmFyc1wiKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi4vdXRpbHMnKTtcclxudmFyIGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL29mZmxpbmVkaXNwYXRjaGVyJyk7XHJcblxyXG52YXIgdG9vbGJhclByZWZpeCA9ICdvLWRvd25sb2FkZXItdGQtdG9vbGJhci0nO1xyXG5cclxudmFyIERvd25sb2FkZXIgPSBmdW5jdGlvbiBEb3dubG9hZGVyKGxheWVyc09iaikge1xyXG4gIHJlbmRlcihsYXllcnNPYmopO1xyXG4gIGFkZExpc3RlbmVycygpO1xyXG5cclxuICBmdW5jdGlvbiByZW5kZXIobGF5ZXJzT2JqKSB7XHJcbiAgICAkKCcjby1tYXAnKS5wcmVwZW5kKHRlbXBsYXRlKTtcclxuICAgIHJlbmRlclJvd3MobGF5ZXJzT2JqKTtcclxuXHJcbiAgICBiaW5kVUlBY3Rpb25zKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBhZGRMaXN0ZW5lcnMoKSB7XHJcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlT2ZmbGluZVN0YXJ0Jywgb25DaGFuZ2VPZmZsaW5lU3RhcnQpO1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZU9mZmxpbmVFbmQnLCBvbkNoYW5nZU9mZmxpbmVFbmQpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25DaGFuZ2VPZmZsaW5lU3RhcnQoZSkge1xyXG4gICAgcmVuZGVyQnV0dG9ucygnIycgKyB0b29sYmFyUHJlZml4ICsgZS5sYXllck5hbWUsICdwZW5kaW5nJywgZS5sYXllck5hbWUpO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25DaGFuZ2VPZmZsaW5lRW5kKGUpIHtcclxuICAgIHJlbmRlckJ1dHRvbnMoJyMnICsgdG9vbGJhclByZWZpeCArIGUubGF5ZXJOYW1lLCBlLnN0YXRlLCBlLmxheWVyTmFtZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBiaW5kVUlBY3Rpb25zKCkge1xyXG4gICAgJCgnLm8tZG93bmxvYWRlciAuby1jbG9zZS1idXR0b24nKS5vbignY2xpY2snLCBmdW5jdGlvbihldnQpIHtcclxuICAgICAgICBjbG9zZURvd25sb2FkZXIoKTtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyUm93cyhsYXllcnNPYmopIHtcclxuICAgIHZhciBsYXllck5hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobGF5ZXJzT2JqKTtcclxuICAgIGxheWVyTmFtZXMuZm9yRWFjaChmdW5jdGlvbihsYXllck5hbWUpIHtcclxuICAgICAgcmVuZGVyUm93KGxheWVyTmFtZSwgbGF5ZXJzT2JqKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyUm93KGxheWVyTmFtZSwgbGF5ZXJzT2JqKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSBWaWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZhciB0ZFRpdGxlID0gdXRpbHMuY3JlYXRlRWxlbWVudCgndGQnLCBsYXllci5nZXQoJ3RpdGxlJykse30pO1xyXG4gICAgdmFyIHRvb2xiYXJJZCA9IHRvb2xiYXJQcmVmaXggKyBsYXllck5hbWU7XHJcbiAgICB2YXIgdG9vbGJhciA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsICcnLCB7XHJcbiAgICAgIGNsczogJ28tdG9vbGJhci1ob3Jpem9udGFsJyxcclxuICAgICAgc3R5bGU6ICd0ZXh0LWFsaWduOiByaWdodDsgZmxvYXQ6IHJpZ2h0OycsXHJcbiAgICAgIGlkOiB0b29sYmFySWRcclxuICAgIH0pO1xyXG4gICAgdmFyIHRkVG9vbGJhciA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ3RkJywgdG9vbGJhciwge30pO1xyXG4gICAgdmFyIHJvdyA9IHRkVGl0bGUgKyB0ZFRvb2xiYXI7XHJcbiAgICB2YXIgY2xzID0gJ28tZG93bmxvYWRlci10ci0nICsgbGF5ZXJOYW1lO1xyXG4gICAgdmFyIHRyID0gdXRpbHMuY3JlYXRlRWxlbWVudCgndHInLCByb3csIHtcclxuICAgICAgY2xzOiBjbHNcclxuICAgIH0pO1xyXG4gICAgdmFyIHN0YXRlO1xyXG4gICAgJCgnLm8tZG93bmxvYWRlciAuby10YWJsZScpLmFwcGVuZCh0cik7XHJcbiAgICBzdGF0ZSA9ICBsYXllcnNPYmpbbGF5ZXJOYW1lXS5kb3dubG9hZGVkID09PSB0cnVlID8gJ29mZmxpbmUnIDogJ2Rvd25sb2FkJztcclxuICAgIHJlbmRlckJ1dHRvbnMoJyMnICsgdG9vbGJhcklkLCBzdGF0ZSwgbGF5ZXJOYW1lKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckJ1dHRvbnModGFyZ2V0LCBzdGF0ZSwgbGF5ZXJOYW1lKSB7XHJcbiAgICAkKHRhcmdldCkuZW1wdHkoKTtcclxuICAgIGlmIChzdGF0ZSA9PT0gJ29mZmxpbmUnKSB7XHJcbiAgICAgIHJlbmRlclN5bmModGFyZ2V0LCBsYXllck5hbWUpO1xyXG4gICAgICByZW5kZXJSZW1vdmUodGFyZ2V0LCBsYXllck5hbWUpO1xyXG4gICAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gJ2Rvd25sb2FkJykge1xyXG4gICAgICByZW5kZXJEb3dubG9hZCh0YXJnZXQsIGxheWVyTmFtZSk7XHJcbiAgICB9IGVsc2UgaWYgKHN0YXRlID09PSAncGVuZGluZycpIHtcclxuICAgICAgcmVuZGVyUGVuZGluZyh0YXJnZXQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVuZGVyU3luYyh0YXJnZXQsIGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGlkID0gJ28tZG93bmxvYWRlci1yZWZyZXNoLScgKyBsYXllck5hbWU7XHJcbiAgICB2YXIgcmVmcmVzaCA9IGNyZWF0ZUJ1dHRvbih7XHJcbiAgICAgIGhyZWY6ICcjZmEtcmVmcmVzaCcsXHJcbiAgICAgIGNsczogJ28taWNvbi1mYS1yZWZyZXNoJyxcclxuICAgICAgaWQ6IGlkXHJcbiAgICB9KTtcclxuICAgICQodGFyZ2V0KS5hcHBlbmQocmVmcmVzaCk7XHJcbiAgICBiaW5kQWN0aW9uKCcjJyArIGlkLCBsYXllck5hbWUsICdzeW5jJyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJSZW1vdmUodGFyZ2V0LCBsYXllck5hbWUpIHtcclxuICAgIHZhciBpZCA9ICdvLWRvd25sb2FkZXItdHJhc2gtJyArIGxheWVyTmFtZTtcclxuICAgIHZhciB0cmFzaCA9IGNyZWF0ZUJ1dHRvbih7XHJcbiAgICAgIGhyZWY6ICcjZmEtdHJhc2gnLFxyXG4gICAgICBjbHM6ICdvLWljb24tZmEtdHJhc2gnLFxyXG4gICAgICBpZDogaWRcclxuICAgIH0pO1xyXG4gICAgJCh0YXJnZXQpLmFwcGVuZCh0cmFzaCk7XHJcbiAgICBiaW5kQWN0aW9uKCcjJyArIGlkLCBsYXllck5hbWUsICdyZW1vdmUnKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlckRvd25sb2FkKHRhcmdldCwgbGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgaWQgPSAnby1kb3dubG9hZGVyLWRvd25sb2FkLScgKyBsYXllck5hbWU7XHJcbiAgICB2YXIgZG93bmxvYWQgPSBjcmVhdGVCdXR0b24oe1xyXG4gICAgICBocmVmOiAnI2ZhLWRvd25sb2FkJyxcclxuICAgICAgY2xzOiAnby1pY29uLWZhLWRvd25sb2FkJyxcclxuICAgICAgaWQ6IGlkXHJcbiAgICB9KTtcclxuICAgICQodGFyZ2V0KS5hcHBlbmQoZG93bmxvYWQpO1xyXG4gICAgYmluZEFjdGlvbignIycgKyBpZCwgbGF5ZXJOYW1lLCAnZG93bmxvYWQnKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclBlbmRpbmcodGFyZ2V0KSB7XHJcbiAgICB2YXIgc3Bpbm5lckJ1dHRvbiA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsICcnLCB7XHJcbiAgICAgIGNsczogJ28tc3Bpbm5lcidcclxuICAgIH0pO1xyXG4gICAgJCh0YXJnZXQpLmFwcGVuZChzcGlubmVyQnV0dG9uKTtcclxuICAgICQoJy5vLXNwaW5uZXInKS5hcHBlbmQoc3Bpbm5lcik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVCdXR0b24ob2JqKSB7XHJcbiAgICB2YXIgaWNvbiA9IHV0aWxzLmNyZWF0ZVN2Zyh7XHJcbiAgICAgIGhyZWY6IG9iai5ocmVmLFxyXG4gICAgICBjbHM6IG9iai5jbHNcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIGljb24sIHtcclxuICAgICAgaWQ6IG9iai5pZFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbG9zZURvd25sb2FkZXIoKSB7XHJcbiAgICAkKCcuby1kb3dubG9hZGVyJykucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBiaW5kQWN0aW9uKHRhcmdldCwgbGF5ZXJOYW1lLCB0eXBlKSB7XHJcbiAgICAkKHRhcmdldCkub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZURvd25sb2FkKGxheWVyTmFtZSwgdHlwZSk7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IERvd25sb2FkZXI7XHJcbiIsIi8vIGhic2Z5IGNvbXBpbGVkIEhhbmRsZWJhcnMgdGVtcGxhdGVcbnZhciBIYW5kbGViYXJzQ29tcGlsZXIgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnNDb21waWxlci50ZW1wbGF0ZSh7XCJjb21waWxlclwiOls3LFwiPj0gNC4wLjBcIl0sXCJtYWluXCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJvLWNvbnRhaW5lci1mbHVpZCBvLWRvd25sb2FkZXJcXFwiPlxcclxcbiAgPGRpdiBjbGFzcz1cXFwiby1jYXJkXFxcIj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiby1jYXJkLWhlYWRlciBvLXRleHQtY2VudGVyXFxcIj5cXHJcXG4gICAgICA8aDYgY2xhc3M9XFxcIm8tY2FyZC1oZWFkaW5nXFxcIj5OZWRsYWRkbmluZ2FyPC9oNj5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJvLWNsb3NlLWJ1dHRvblxcXCI+XFxyXFxuICAgICAgICA8c3ZnIGNsYXNzPVxcXCJvLWljb24tZmEtdGltZXNcXFwiPjx1c2UgeGxpbms6aHJlZj1cXFwiI2ZhLXRpbWVzXFxcIj48L3VzZT48L3N2Zz5cXHJcXG4gICAgICA8L2Rpdj5cXHJcXG4gICAgPC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcIm8tY2FyZC1jb250ZW50XFxcIj5cXHJcXG4gICAgICA8dGFibGUgY2xhc3MgPVxcXCJvLXRhYmxlXFxcIj5cXHJcXG5cXHJcXG4gICAgICA8L3RhYmxlPlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgbGF5ZXJDcmVhdG9yID0gcmVxdWlyZSgnLi4vbGF5ZXJjcmVhdG9yJyk7XHJcbnZhciBvZmZsaW5lTGF5ZXIgPSByZXF1aXJlKCcuL29mZmxpbmVsYXllcicpKCk7XHJcbnZhciBkb3dubG9hZFNvdXJjZXMgPSByZXF1aXJlKCcuL2Rvd25sb2Fkc291cmNlcycpO1xyXG52YXIgZGlzcGF0Y2hlciA9IHJlcXVpcmUoJy4vb2ZmbGluZWRpc3BhdGNoZXInKTtcclxudmFyIG9mZmxpbmVTdG9yZSA9IHJlcXVpcmUoJy4vb2ZmbGluZXN0b3JlJykoKTtcclxuXHJcbnZhciBkb3dubG9hZEVycm9yTXNnID0gJ0RldCBpbnRyw6RmZmFkZSBldHQgZmVsIG7DpHIgbGFncmV0IHNrdWxsZSBow6RtdGFzLiDDhHIgZHUgYW5zbHV0ZW4gdGlsbCBpbnRlcm5ldD8nXHJcbnZhciBzYXZlRXJyb3JNc2cgPSAnRGV0IGludHLDpGZmYWRlIGV0dCBmZWwgbsOkciBmw7Zyw6RuZHJpbmdhcm5hIHNrdWxsZSBzcGFyYXMuIEbDtnJzw7ZrIGlnZW4gc2VuYXJlLic7XHJcbnZhciBpbnZhbGlkRm9ybWF0TXNnID0gJ0ludmFsaWQgZm9ybWF0OiAnO1xyXG5cclxudmFyIGRvd25sb2FkSGFuZGxlciA9IGZ1bmN0aW9uIGRvd25sb2FkSGFuZGxlcigpIHtcclxuICAkKGRvY3VtZW50KS5vbignY2hhbmdlRG93bmxvYWQnLCBvbkNoYW5nZURvd25sb2FkKTtcclxuICBvZmZsaW5lU3RvcmUuaW5pdCgpO1xyXG5cclxuICBmdW5jdGlvbiBvbkNoYW5nZURvd25sb2FkKGUpIHtcclxuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICBpZiAoZS5hY3Rpb24gPT09ICdkb3dubG9hZCcpIHtcclxuICAgICAgZG93bmxvYWQoZS5sYXllck5hbWUpO1xyXG4gICAgfSBlbHNlIGlmIChlLmFjdGlvbiA9PT0gJ3N5bmMnKSB7XHJcbiAgICAgIHN5bmMoZS5sYXllck5hbWUpO1xyXG4gICAgfSBlbHNlIGlmIChlLmFjdGlvbiA9PT0gJ3JlbW92ZScpIHtcclxuICAgICAgcmVtb3ZlRG93bmxvYWRlZChlLmxheWVyTmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW1vdmVEb3dubG9hZGVkKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2YXIgcHJvcHMgPSBsYXllci5nZXRQcm9wZXJ0aWVzKCk7XHJcbiAgICB2YXIgc291cmNlO1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlT2ZmbGluZVN0YXJ0KGxheWVyTmFtZSk7XHJcbiAgICBwcm9wcy5zdHlsZSA9IHByb3BzLnN0eWxlTmFtZTtcclxuICAgIHByb3BzLnNvdXJjZSA9IHByb3BzLnNvdXJjZU5hbWU7XHJcbiAgICBwcm9wcy50eXBlID0gcHJvcHMub25saW5lVHlwZTtcclxuICAgIHNvdXJjZSA9IGxheWVyQ3JlYXRvcihwcm9wcykuZ2V0U291cmNlKCk7XHJcbiAgICBsYXllci5zZXRTb3VyY2Uoc291cmNlKTtcclxuICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmUobGF5ZXIuZ2V0KCduYW1lJyksICdyZW1vdmUnKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHN5bmMobGF5ZXJOYW1lKSB7XHJcbiAgICB2YXIgb2ZmbGluZUVkaXRzID0gb2ZmbGluZVN0b3JlLmdldE9mZmxpbmVFZGl0cyhsYXllck5hbWUpO1xyXG4gICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlT2ZmbGluZVN0YXJ0KGxheWVyTmFtZSk7XHJcbiAgICBpZiAob2ZmbGluZUVkaXRzKSB7XHJcbiAgICAgIG9mZmxpbmVFZGl0c1xyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGVkaXRJdGVtcykge1xyXG4gICAgICAgICAgc2F2ZVRvUmVtb3RlKGVkaXRJdGVtcywgbGF5ZXJOYW1lKVxyXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICBkb3dubG9hZChsYXllck5hbWUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmFpbChmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgICAgICBhYm9ydChsYXllck5hbWUsIHNhdmVFcnJvck1zZywgJ2FsZXJ0Jyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZG93bmxvYWQobGF5ZXJOYW1lKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNhdmVUb1JlbW90ZShlZGl0SXRlbXMsIGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICB2YXIgdHJhbnNPYmogPSB7XHJcbiAgICAgIGRlbGV0ZTogW10sXHJcbiAgICAgIGluc2VydDogW10sXHJcbiAgICAgIHVwZGF0ZTogW11cclxuICAgIH07XHJcbiAgICB2YXIgaWRzID0gW107XHJcbiAgICBlZGl0SXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgIHZhciBpZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGl0ZW0pWzBdO1xyXG4gICAgICB2YXIgZmVhdHVyZSA9IGxheWVyLmdldFNvdXJjZSgpLmdldEZlYXR1cmVCeUlkKGlkKTtcclxuICAgICAgdmFyIGR1bW15O1xyXG4gICAgICBpZiAoZmVhdHVyZSkge1xyXG4gICAgICAgIHRyYW5zT2JqW2l0ZW1baWRdXS5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICAgIGlkcy5wdXNoKGlkKTtcclxuICAgICAgfSBlbHNlIGlmIChpdGVtW2lkXSA9PT0gJ2RlbGV0ZScpIHtcclxuICAgICAgICBkdW1teSA9IG5ldyBvbC5GZWF0dXJlKCk7XHJcbiAgICAgICAgZHVtbXkuc2V0SWQoaWQpO1xyXG4gICAgICAgIHRyYW5zT2JqW2l0ZW1baWRdXS5wdXNoKGR1bW15KTtcclxuICAgICAgICBpZHMucHVzaChpZCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiBkb3dubG9hZFNvdXJjZXNbbGF5ZXIuZ2V0KCdvbmxpbmVUeXBlJyldLnRyYW5zYWN0aW9uKHRyYW5zT2JqLCBsYXllck5hbWUpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgIGlmIChyZXN1bHQgPiAwKSB7XHJcbiAgICAgICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VPZmZsaW5lKGxheWVyLmdldCgnbmFtZScpLCAnZWRpdHMnLCBpZHMpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBkb3dubG9hZChsYXllck5hbWUpIHtcclxuICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmFyIHR5cGUgPSBsYXllci5nZXQoJ29ubGluZVR5cGUnKTtcclxuICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmVTdGFydChsYXllck5hbWUpO1xyXG4gICAgaWYgKGRvd25sb2FkU291cmNlcy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSkge1xyXG4gICAgICBkb3dubG9hZFNvdXJjZXNbdHlwZV0ucmVxdWVzdChsYXllcilcclxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgIG9mZmxpbmVMYXllci5zZXRPZmZsaW5lU291cmNlKGxheWVyTmFtZSwgcmVzdWx0KTtcclxuICAgICAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmUobGF5ZXIuZ2V0KCduYW1lJyksICdkb3dubG9hZCcpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICAgIGFib3J0KGxheWVyTmFtZSwgZG93bmxvYWRFcnJvck1zZywgJ2FsZXJ0Jyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBlcnJvciA9ICdTb3JyeSwgJyArIHR5cGUgKyAnIGlzIG5vdCBhdmFpbGFibGUgYXMgb24gb2ZmbGluZSBmb3JtYXQnO1xyXG4gICAgICBhYm9ydChsYXllck5hbWUsIGludmFsaWRGb3JtYXRNc2cgKyB0eXBlKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGFib3J0KGxheWVyTmFtZSwgZXJyb3IsIGlzQWxlcnQpIHtcclxuICAgIHZhciBhY3Rpb247XHJcbiAgICBpZiAob2ZmbGluZVN0b3JlLmdldE9mZmxpbmVMYXllcihsYXllck5hbWUpLmRvd25sb2FkZWQpIHtcclxuICAgICAgYWN0aW9uID0gJ29mZmxpbmUnO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYWN0aW9uID0gJ2Rvd25sb2FkJztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoaXNBbGVydCkge1xyXG4gICAgICBhbGVydChlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICB9XHJcblxyXG4gICAgZGlzcGF0Y2hlci5lbWl0Q2hhbmdlT2ZmbGluZUVuZChsYXllck5hbWUsIGFjdGlvbik7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGRvd25sb2FkSGFuZGxlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgc291cmNlcyA9IHt9O1xyXG5zb3VyY2VzLldGUyA9IHJlcXVpcmUoJy4vd2ZzJyk7XHJcbnNvdXJjZXMuR0VPSlNPTiA9IHJlcXVpcmUoJy4vZ2VvanNvbicpO1xyXG5zb3VyY2VzLlRPUE9KU09OID0gcmVxdWlyZSgnLi90b3BvanNvbicpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBzb3VyY2VzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdmVyaWZ5RmVhdHVyZUlkcyA9IHJlcXVpcmUoJy4vdmVyaWZ5ZmVhdHVyZWlkcycpO1xyXG5cclxudmFyIGdlb2pzb24gPSB7fTtcclxuZ2VvanNvbi5yZXF1ZXN0ID0gZnVuY3Rpb24gcmVxdWVzdChsYXllcikge1xyXG4gIHZhciBzb3VyY2UgPSBsYXllci5nZXQoJ3NvdXJjZU5hbWUnKTtcclxuICB2YXIgcmVxdWVzdCA9IGNyZWF0ZVJlcXVlc3Qoc291cmNlKTtcclxuICByZXR1cm4gcmVxdWVzdDtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlUmVxdWVzdChzb3VyY2UpIHtcclxuICAgIHZhciBmb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oKTtcclxuICAgIHZhciB1cmwgPSBzb3VyY2U7XHJcblxyXG4gICAgcmV0dXJuICQuYWpheCh7XHJcbiAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgY2FjaGU6IGZhbHNlXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgdmFyIGZlYXR1cmVzID0gZm9ybWF0LnJlYWRGZWF0dXJlcyhyZXNwb25zZSk7XHJcbiAgICAgICAgZmVhdHVyZXMgPSB2ZXJpZnlGZWF0dXJlSWRzKGZlYXR1cmVzKTtcclxuICAgICAgICByZXR1cm4gZmVhdHVyZXM7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZW9qc29uO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICBlbWl0Q2hhbmdlT2ZmbGluZTogZW1pdENoYW5nZU9mZmxpbmUsXHJcbiAgZW1pdENoYW5nZURvd25sb2FkOiBlbWl0Q2hhbmdlRG93bmxvYWQsXHJcbiAgZW1pdENoYW5nZU9mZmxpbmVTdGFydDogZW1pdENoYW5nZU9mZmxpbmVTdGFydCxcclxuICBlbWl0Q2hhbmdlT2ZmbGluZUVuZDogZW1pdENoYW5nZU9mZmxpbmVFbmRcclxufVxyXG5cclxuZnVuY3Rpb24gZW1pdENoYW5nZU9mZmxpbmUobGF5ZXJOYW1lLCBhY3Rpb24sIGlkcykge1xyXG4gICQuZXZlbnQudHJpZ2dlcih7XHJcbiAgICB0eXBlOiAnY2hhbmdlT2ZmbGluZScsXHJcbiAgICBsYXllck5hbWU6IGxheWVyTmFtZSxcclxuICAgIGFjdGlvbjogYWN0aW9uLFxyXG4gICAgaWRzOiBpZHMgfHwgdW5kZWZpbmVkXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRDaGFuZ2VEb3dubG9hZChsYXllck5hbWUsIGFjdGlvbikge1xyXG4gICQuZXZlbnQudHJpZ2dlcih7XHJcbiAgICB0eXBlOiAnY2hhbmdlRG93bmxvYWQnLFxyXG4gICAgbGF5ZXJOYW1lOiBsYXllck5hbWUsXHJcbiAgICBhY3Rpb246IGFjdGlvblxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbWl0Q2hhbmdlT2ZmbGluZVN0YXJ0KGxheWVyTmFtZSkge1xyXG4gICQuZXZlbnQudHJpZ2dlcih7XHJcbiAgICB0eXBlOiAnY2hhbmdlT2ZmbGluZVN0YXJ0JyxcclxuICAgIGxheWVyTmFtZTogbGF5ZXJOYW1lXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVtaXRDaGFuZ2VPZmZsaW5lRW5kKGxheWVyTmFtZSwgc3RhdGUpIHtcclxuICAkLmV2ZW50LnRyaWdnZXIoe1xyXG4gICAgdHlwZTogJ2NoYW5nZU9mZmxpbmVFbmQnLFxyXG4gICAgbGF5ZXJOYW1lOiBsYXllck5hbWUsXHJcbiAgICBzdGF0ZTogc3RhdGVcclxuICB9KTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGxheWVyQ3JlYXRvciA9IHJlcXVpcmUoJy4uL2xheWVyY3JlYXRvcicpO1xyXG5cclxudmFyIG9mZmxpbmVMYXllciA9IGZ1bmN0aW9uIG9mZmxpbmVMYXllcigpIHtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIHNldE9mZmxpbmVTb3VyY2U6IHNldE9mZmxpbmVTb3VyY2UsXHJcbiAgICBzZXRPbmxpbmVTb3VyY2U6IHNldE9ubGluZVNvdXJjZVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0T2ZmbGluZVNvdXJjZShsYXllck5hbWUsIGZlYXR1cmVzKSB7XHJcbiAgICB2YXIgbGF5ZXIgPSB2aWV3ZXIuZ2V0TGF5ZXIobGF5ZXJOYW1lKTtcclxuICAgIHZhciBzb3VyY2U7XHJcbiAgICB2YXIgb3B0aW9ucztcclxuICAgIGxheWVyLnNldCgndHlwZScsICdPRkZMSU5FJyk7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGEgZmVhdHVyZSBsYXllciBhbmQgZ2V0IHRoZSBzb3VyY2VcclxuICAgIG9wdGlvbnMgPSBsYXllci5nZXRQcm9wZXJ0aWVzKCk7XHJcbiAgICBvcHRpb25zLnR5cGUgPSAnRkVBVFVSRSc7XHJcbiAgICBvcHRpb25zLmZlYXR1cmVzID0gZmVhdHVyZXM7XHJcbiAgICBvcHRpb25zLnN0eWxlID0gb3B0aW9ucy5zdHlsZU5hbWU7XHJcbiAgICBzb3VyY2UgPSBsYXllckNyZWF0b3Iob3B0aW9ucykuZ2V0U291cmNlKCk7XHJcbiAgICBsYXllci5zZXRTb3VyY2Uoc291cmNlKTtcclxuICAgIHJldHVybiBsYXllcjtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldE9ubGluZVNvdXJjZShsYXllck5hbWUpIHtcclxuICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmFyIHNvdXJjZTtcclxuICAgIHZhciBvcHRpb25zO1xyXG5cclxuICAgIC8vIENyZWF0ZSBhIGxheWVyIHdpdGggdGhlIG9ubGluZSBzb3VyY2UgYW5kIGdldCB0aGUgc291cmNlXHJcbiAgICBsYXllci5zZXQoJ3R5cGUnLCBsYXllci5nZXQoJ29ubGluZVR5cGUnKSk7XHJcbiAgICBvcHRpb25zID0gbGF5ZXIuZ2V0UHJvcGVydGllcygpO1xyXG4gICAgb3B0aW9ucy5zb3VyY2UgPSBvcHRpb25zLnNvdXJjZU5hbWU7XHJcbiAgICBvcHRpb25zLnN0eWxlID0gb3B0aW9ucy5zdHlsZU5hbWU7XHJcbiAgICBzb3VyY2UgPSBsYXllckNyZWF0b3Iob3B0aW9ucykuZ2V0U291cmNlKCk7XHJcbiAgICBsYXllci5zZXRTb3VyY2Uoc291cmNlKTtcclxuICAgIHJldHVybiBsYXllcjtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gb2ZmbGluZUxheWVyO1xyXG4iLCJ2YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciB2aWV3ZXIgPSByZXF1aXJlKCcuLi92aWV3ZXInKTtcclxudmFyIGxvY2FsZm9yYWdlID0gcmVxdWlyZSgnbG9jYWxmb3JhZ2UnKTtcclxudmFyIG9mZmxpbmVMYXllciA9IHJlcXVpcmUoJy4vb2ZmbGluZWxheWVyJykoKTtcclxudmFyIGRpc3BhdGNoZXIgPSByZXF1aXJlKCcuL29mZmxpbmVkaXNwYXRjaGVyJyk7XHJcbnZhciBlZGl0b3JEaXNwYXRjaGVyID0gcmVxdWlyZSgnLi4vZWRpdG9yL2VkaXRkaXNwYXRjaGVyJyk7XHJcbnZhciBmb3JtYXQgPSBuZXcgb2wuZm9ybWF0Lkdlb0pTT04oKTtcclxudmFyIHN0b3JhZ2UgPSB7fTtcclxudmFyIGVkaXRzU3RvcmFnZSA9IHt9O1xyXG52YXIgb2ZmbGluZUxheWVycyA9IHt9O1xyXG52YXIgc3RvcmFnZU5hbWU7XHJcbnZhciBlZGl0c1N0b3JhZ2VOYW1lO1xyXG52YXIgbWFwO1xyXG5cclxuZnVuY3Rpb24gb2ZmbGluZVN0b3JlKCkge1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgZ2V0T2ZmbGluZUxheWVyczogZ2V0T2ZmbGluZUxheWVycyxcclxuICAgIGdldE9mZmxpbmVMYXllcjogZ2V0T2ZmbGluZUxheWVyLFxyXG4gICAgZ2V0T2ZmbGluZUVkaXRzOiBnZXRPZmZsaW5lRWRpdHMsXHJcbiAgICBnZXRFZGl0c0l0ZW1zOiBnZXRFZGl0c0l0ZW1zLFxyXG4gICAgaW5pdDogSW5pdFxyXG4gIH07XHJcblxyXG4gIGZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgICB2YXIgbGF5ZXJOYW1lcztcclxuICAgIG1hcCA9IHZpZXdlci5nZXRNYXAoKTtcclxuICAgIHN0b3JhZ2VOYW1lID0gb3B0aW9ucy5uYW1lIHx8ICdvcmlnby1sYXllcnMnO1xyXG4gICAgZWRpdHNTdG9yYWdlTmFtZSA9IG9wdGlvbnMuZWRpdHNOYW1lIHx8ICdvcmlnby1sYXllcnMtZWRpdHMnO1xyXG4gICAgbGF5ZXJOYW1lcyA9IHZpZXdlci5nZXRMYXllcnNCeVByb3BlcnR5KCdvZmZsaW5lJywgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICBzZXRPZmZsaW5lTGF5ZXJzKGxheWVyTmFtZXMpO1xyXG4gICAgc3RvcmFnZSA9IGNyZWF0ZUluc3RhbmNlcyhsYXllck5hbWVzLCBzdG9yYWdlTmFtZSk7XHJcbiAgICBlZGl0c1N0b3JhZ2UgPSBjcmVhdGVJbnN0YW5jZXMobGF5ZXJOYW1lcywgZWRpdHNTdG9yYWdlTmFtZSk7XHJcbiAgICBpbml0TGF5ZXJzKCk7XHJcblxyXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZU9mZmxpbmUnLCBvbkNoYW5nZU9mZmxpbmUpO1xyXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZU9mZmxpbmVFZGl0cycsIG9uQ2hhbmdlT2ZmbGluZUVkaXRzKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNyZWF0ZUluc3RhbmNlcyhsYXllck5hbWVzLCBuYW1lKSB7XHJcbiAgICB2YXIgaW5zdGFuY2VzID0ge307XHJcbiAgICBsYXllck5hbWVzLmZvckVhY2goZnVuY3Rpb24obGF5ZXJOYW1lKSB7XHJcbiAgICAgIGluc3RhbmNlc1tsYXllck5hbWVdID0gbG9jYWxmb3JhZ2UuY3JlYXRlSW5zdGFuY2Uoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgc3RvcmVOYW1lOiBsYXllck5hbWVcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gaW5zdGFuY2VzO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0T2ZmbGluZUxheWVycygpIHtcclxuICAgIHJldHVybiBvZmZsaW5lTGF5ZXJzO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0T2ZmbGluZUxheWVyKGxheWVyTmFtZSkge1xyXG4gICAgcmV0dXJuIG9mZmxpbmVMYXllcnNbbGF5ZXJOYW1lXTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGdldE9mZmxpbmVFZGl0cyhsYXllck5hbWUpIHtcclxuICAgIGlmIChvZmZsaW5lTGF5ZXJzW2xheWVyTmFtZV0uZWRpdHMpIHtcclxuICAgICAgcmV0dXJuIGdldEVkaXRzSXRlbXMobGF5ZXJOYW1lKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRPZmZsaW5lTGF5ZXJzKGxheWVyTmFtZXMpIHtcclxuICAgIGxheWVyTmFtZXMuZm9yRWFjaChmdW5jdGlvbihsYXllck5hbWUpIHtcclxuICAgICAgdmFyIGxheWVyID0gdmlld2VyLmdldExheWVyKGxheWVyTmFtZSk7XHJcbiAgICAgIGxheWVyLnNldCgnb25saW5lVHlwZScsIGxheWVyLmdldCgndHlwZScpKTtcclxuICAgICAgb2ZmbGluZUxheWVyc1tsYXllck5hbWVdID0gY3JlYXRlT2ZmbGluZU9iaigpO1xyXG4gICAgICBvZmZsaW5lTGF5ZXIuc2V0T2ZmbGluZVNvdXJjZShsYXllck5hbWUsIFtdKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25DaGFuZ2VPZmZsaW5lKGUpIHtcclxuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICBpZiAoZS5hY3Rpb24gPT09ICdkb3dubG9hZCcpIHtcclxuICAgICAgb25Eb3dubG9hZChlLmxheWVyTmFtZSlcclxuICAgIH0gZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdlZGl0cycpIHtcclxuICAgICAgb25kRWRpdHMoZS5sYXllck5hbWUsIGUuaWRzKTtcclxuICAgIH0gZWxzZSBpZiAoZS5hY3Rpb24gPT09ICdyZW1vdmUnKSB7XHJcbiAgICAgIG9uUmVtb3ZlKGUubGF5ZXJOYW1lKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uQ2hhbmdlT2ZmbGluZUVkaXRzKGUpIHtcclxuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICBpZiAoZWRpdHNTdG9yYWdlW2UubGF5ZXJOYW1lXSkge1xyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVkaXRzU3RvcmFnZVtlLmxheWVyTmFtZV0gPSBsb2NhbGZvcmFnZS5jcmVhdGVJbnN0YW5jZSh7XHJcbiAgICAgICAgbmFtZTogZWRpdHNTdG9yYWdlTmFtZSxcclxuICAgICAgICBzdG9yZU5hbWU6IGUubGF5ZXJOYW1lXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKGUuZWRpdHMudXBkYXRlKSB7XHJcbiAgICAgIHNhdmVVcGRhdGUoZS5lZGl0cy51cGRhdGUsIGUubGF5ZXJOYW1lKTtcclxuICAgIH1cclxuICAgIGlmIChlLmVkaXRzLmluc2VydCkge1xyXG4gICAgICBzYXZlSW5zZXJ0KGUuZWRpdHMuaW5zZXJ0LCBlLmxheWVyTmFtZSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZS5lZGl0cy5kZWxldGUpIHtcclxuICAgICAgc2F2ZURlbGV0ZShlLmVkaXRzLmRlbGV0ZSwgZS5sYXllck5hbWUpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gb25Eb3dubG9hZChsYXllck5hbWUpIHtcclxuICAgIGlmIChvZmZsaW5lTGF5ZXJzW2xheWVyTmFtZV0uZG93bmxvYWRlZCkge1xyXG4gICAgICBzdG9yYWdlW2xheWVyTmFtZV0uY2xlYXIoKVxyXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgc2F2ZUZlYXR1cmVzVG9TdG9yYWdlKGxheWVyTmFtZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzYXZlRmVhdHVyZXNUb1N0b3JhZ2UobGF5ZXJOYW1lKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIG9uZEVkaXRzKGxheWVyTmFtZSwgaWRzKSB7XHJcbiAgICB2YXIgcHJvbWlzZXMgPSBpZHMubWFwKGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgIHJldHVybiByZW1vdmVGcm9tRWRpdHNTdG9yYWdlKGlkLCBsYXllck5hbWUpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBvblJlbW92ZShsYXllck5hbWUpIHtcclxuICAgIGlmIChvZmZsaW5lTGF5ZXJzW2xheWVyTmFtZV0uZWRpdHMpIHtcclxuICAgICAgdmFyIHByb2NlZWQgPSBjb25maXJtKCdEdSBoYXIgZm9ydGZhcmFuZGUgb2ZmbGluZS3DpG5kcmluZ2FyIHNvbSBpbnRlIMOkciBzcGFyYWRlLiBPbSBkdSBmb3J0c8OkdHRlciBrb21tZXIgZGVzc2EgYXR0IGbDtnJzdmlubmEuJyk7XHJcbiAgICAgIGlmIChwcm9jZWVkKSB7XHJcbiAgICAgICAgcmVtb3ZlRG93bmxvYWRlZChsYXllck5hbWUpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZW1vdmVEb3dubG9hZGVkKGxheWVyTmFtZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW1vdmVEb3dubG9hZGVkKGxheWVyTmFtZSkge1xyXG4gICAgaWYgKG9mZmxpbmVMYXllcnNbbGF5ZXJOYW1lXSkge1xyXG4gICAgICByZXR1cm4gc3RvcmFnZVtsYXllck5hbWVdLmNsZWFyKClcclxuICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHNldExheWVyT25saW5lKGxheWVyTmFtZSk7XHJcbiAgICAgICAgICBkaXNwYXRjaGVyLmVtaXRDaGFuZ2VPZmZsaW5lRW5kKGxheWVyTmFtZSwgJ2Rvd25sb2FkJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjcmVhdGVPZmZsaW5lT2JqKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZG93bmxvYWRlZDogZmFsc2UsXHJcbiAgICAgIGVkaXRzOiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2V0RG93bmxvYWRlZChsYXllck5hbWUsIGRvd25sb2FkZWQpIHtcclxuICAgIGlmIChkb3dubG9hZGVkKSB7XHJcbiAgICAgIG9mZmxpbmVMYXllcnNbbGF5ZXJOYW1lXS5kb3dubG9hZGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9mZmxpbmVMYXllcnNbbGF5ZXJOYW1lXS5kb3dubG9hZGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRFZGl0cyhsYXllck5hbWUsIGVkaXRzKSB7XHJcbiAgICBpZiAoZWRpdHMpIHtcclxuICAgICAgb2ZmbGluZUxheWVyc1tsYXllck5hbWVdLmVkaXRzID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIG9mZmxpbmVMYXllcnNbbGF5ZXJOYW1lXS5lZGl0cyA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2F2ZUZlYXR1cmVzVG9TdG9yYWdlKGxheWVyTmFtZSkge1xyXG4gICAgdmFyIGZlYXR1cmVzO1xyXG4gICAgaWYgKHN0b3JhZ2VbbGF5ZXJOYW1lXSkge1xyXG4gICAgICBmZWF0dXJlcyA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpLmdldFNvdXJjZSgpLmdldEZlYXR1cmVzKCk7XHJcbiAgICAgIHNldEl0ZW1zKGxheWVyTmFtZSwgZmVhdHVyZXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc29sZS5sb2cobGF5ZXJOYW1lICsgJyBpcyBtaXNzaW5nIGluIHN0b3JhZ2UnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNldEl0ZW1zKGxheWVyTmFtZSwgZmVhdHVyZXMpIHtcclxuICAgIHZhciBwcm9taXNlcyA9IGZlYXR1cmVzLm1hcChmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgIHZhciBpZCA9IGZlYXR1cmUuZ2V0SWQoKTtcclxuICAgICAgdmFyIG9iaiA9IGZvcm1hdC53cml0ZUZlYXR1cmVPYmplY3QoZmVhdHVyZSk7XHJcbiAgICAgIHJldHVybiBzdG9yYWdlW2xheWVyTmFtZV0uc2V0SXRlbShpZCwgb2JqKTtcclxuICAgIH0pO1xyXG4gICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24ocmVzdWx0cykge1xyXG4gICAgICBzZXRMYXllck9mZmxpbmUobGF5ZXJOYW1lLCBmZWF0dXJlcyk7XHJcbiAgICAgIGRpc3BhdGNoZXIuZW1pdENoYW5nZU9mZmxpbmVFbmQobGF5ZXJOYW1lLCAnb2ZmbGluZScpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBnZXRJdGVtcyhsYXllck5hbWUpIHtcclxuICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmFyIGdlb21ldHJ5TmFtZSA9IGxheWVyLmdldCgnZ2VvbWV0cnlOYW1lJyk7XHJcbiAgICB2YXIgZmVhdHVyZXMgPSBbXTtcclxuICAgIHJldHVybiBzdG9yYWdlW2xheWVyTmFtZV0uaXRlcmF0ZShmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCkge1xyXG4gICAgICAgIHZhciBzdG9yZWRGZWF0dXJlID0gZm9ybWF0LnJlYWRGZWF0dXJlKHZhbHVlKTtcclxuICAgICAgICB2YXIgZmVhdHVyZSA9IHJlc3RvcmVHZW9tZXRyeU5hbWUoc3RvcmVkRmVhdHVyZSwgZ2VvbWV0cnlOYW1lKTtcclxuICAgICAgICBmZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gZmVhdHVyZXM7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0RWRpdHNJdGVtcyhsYXllck5hbWUpIHtcclxuICAgIHZhciBsYXllciA9IHZpZXdlci5nZXRMYXllcihsYXllck5hbWUpO1xyXG4gICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICByZXR1cm4gZWRpdHNTdG9yYWdlW2xheWVyTmFtZV0uaXRlcmF0ZShmdW5jdGlvbih2YWx1ZSwga2V5LCBpbmRleCkge1xyXG4gICAgICAgIHZhciBvYmogPSB7fTtcclxuICAgICAgICBvYmpba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIGl0ZW1zLnB1c2gob2JqKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW1zO1xyXG4gICAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGluaXRMYXllcnMoKSB7XHJcbiAgICB2YXIgbGF5ZXJOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHN0b3JhZ2UpO1xyXG4gICAgbGF5ZXJOYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyTmFtZSkge1xyXG4gICAgICBnZXRJdGVtcyhsYXllck5hbWUpLnRoZW4oZnVuY3Rpb24oZmVhdHVyZXMpIHtcclxuICAgICAgICB2YXIgbGF5ZXI7XHJcbiAgICAgICAgaWYgKGZlYXR1cmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgc2V0TGF5ZXJPZmZsaW5lKGxheWVyTmFtZSwgZmVhdHVyZXMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZXRMYXllck9ubGluZShsYXllck5hbWUsIGZlYXR1cmVzKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICBnZXRFZGl0c0l0ZW1zKGxheWVyTmFtZSkudGhlbihmdW5jdGlvbihpdGVtcykge1xyXG4gICAgICAgIHZhciBsYXllcjtcclxuICAgICAgICBpZiAoaXRlbXMubGVuZ3RoKSB7XHJcbiAgICAgICAgICBzZXRFZGl0cyhsYXllck5hbWUsIHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzZXRFZGl0cyhsYXllck5hbWUsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRMYXllck9mZmxpbmUobGF5ZXJOYW1lLCBmZWF0dXJlcykge1xyXG4gICAgb2ZmbGluZUxheWVyLnNldE9mZmxpbmVTb3VyY2UobGF5ZXJOYW1lLCBmZWF0dXJlcyk7XHJcbiAgICBzZXREb3dubG9hZGVkKGxheWVyTmFtZSwgdHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzZXRMYXllck9ubGluZShsYXllck5hbWUpIHtcclxuICAgIG9mZmxpbmVMYXllci5zZXRPbmxpbmVTb3VyY2UobGF5ZXJOYW1lKTtcclxuICAgIHNldERvd25sb2FkZWQobGF5ZXJOYW1lLCBmYWxzZSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzYXZlVXBkYXRlKHVwZGF0ZXMsIGxheWVyTmFtZSkge1xyXG4gICAgdXBkYXRlcy5mb3JFYWNoKGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgdmFyIGlkID0gZmVhdHVyZS5nZXRJZCgpO1xyXG4gICAgICB2YXIgYWN0aW9uID0gJ3VwZGF0ZSc7XHJcbiAgICAgIGVkaXRzU3RvcmFnZVtsYXllck5hbWVdLmdldEl0ZW0oaWQpXHJcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHNhdmVUb0VkaXRzU3RvcmFnZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbik7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBzYXZlRmVhdHVyZVRvU3RvcmFnZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNhdmVJbnNlcnQoaW5zZXJ0cywgbGF5ZXJOYW1lKSB7XHJcbiAgICBpbnNlcnRzLmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICB2YXIgYWN0aW9uID0gJ2luc2VydCc7XHJcbiAgICAgIHNhdmVUb0VkaXRzU3RvcmFnZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIHNhdmVEZWxldGUoZGVsZXRlcywgbGF5ZXJOYW1lKSB7XHJcbiAgICBkZWxldGVzLmZvckVhY2goZnVuY3Rpb24oZmVhdHVyZSkge1xyXG4gICAgICB2YXIgaWQgPSBmZWF0dXJlLmdldElkKCk7XHJcbiAgICAgIHZhciBhY3Rpb24gPSAnZGVsZXRlJztcclxuICAgICAgZWRpdHNTdG9yYWdlW2xheWVyTmFtZV0uZ2V0SXRlbShpZClcclxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXN1bHQpIHtcclxuICAgICAgICAgIGlmIChyZXN1bHQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgc2F2ZVRvRWRpdHNTdG9yYWdlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKTtcclxuICAgICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ID09PSAnaW5zZXJ0Jykge1xyXG4gICAgICAgICAgICByZW1vdmVGcm9tRWRpdHNTdG9yYWdlKGZlYXR1cmUuZ2V0SWQoKSwgbGF5ZXJOYW1lKVxyXG4gICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgZW1pdENoYW5nZUZlYXR1cmUoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2F2ZUZlYXR1cmVUb1N0b3JhZ2UoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzYXZlVG9FZGl0c1N0b3JhZ2UoZmVhdHVyZSwgbGF5ZXJOYW1lLCBhY3Rpb24pIHtcclxuICAgIHZhciBpZCA9IGZlYXR1cmUuZ2V0SWQoKTtcclxuICAgIGVkaXRzU3RvcmFnZVtsYXllck5hbWVdLnNldEl0ZW0oaWQsIGFjdGlvbilcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgc2V0RWRpdHMobGF5ZXJOYW1lLCB0cnVlKTtcclxuICAgICAgICBzYXZlRmVhdHVyZVRvU3RvcmFnZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbik7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVtb3ZlRnJvbUVkaXRzU3RvcmFnZShpZCwgbGF5ZXJOYW1lKSB7XHJcbiAgICByZXR1cm4gZWRpdHNTdG9yYWdlW2xheWVyTmFtZV0ucmVtb3ZlSXRlbShpZClcclxuICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgZWRpdHNTdG9yYWdlW2xheWVyTmFtZV0ubGVuZ3RoKClcclxuICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG5yKSB7XHJcbiAgICAgICAgICAgIGlmIChuciA+IDApIHtcclxuICAgICAgICAgICAgICBzZXRFZGl0cyhsYXllck5hbWUsIHRydWUpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgIHNldEVkaXRzKGxheWVyTmFtZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzYXZlRmVhdHVyZVRvU3RvcmFnZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbikge1xyXG4gICAgdmFyIGlkID0gZmVhdHVyZS5nZXRJZCgpO1xyXG4gICAgc3RvcmFnZVtsYXllck5hbWVdLnNldEl0ZW0oaWQsIGZvcm1hdC53cml0ZUZlYXR1cmVPYmplY3QoZmVhdHVyZSkpXHJcbiAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGVtaXRDaGFuZ2VGZWF0dXJlKGZlYXR1cmUsIGxheWVyTmFtZSwgYWN0aW9uKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBlbWl0Q2hhbmdlRmVhdHVyZShmZWF0dXJlLCBsYXllck5hbWUsIGFjdGlvbikge1xyXG4gICAgZWRpdG9yRGlzcGF0Y2hlci5lbWl0Q2hhbmdlRmVhdHVyZSh7XHJcbiAgICAgIGZlYXR1cmU6IFtmZWF0dXJlXSxcclxuICAgICAgbGF5ZXJOYW1lOiBsYXllck5hbWUsXHJcbiAgICAgIHN0YXR1czogJ2ZpbmlzaGVkJyxcclxuICAgICAgYWN0aW9uOiBhY3Rpb25cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gcmVzdG9yZUdlb21ldHJ5TmFtZShmZWF0dXJlLCBnZW9tZXRyeU5hbWUpIHtcclxuICAgIHZhciBnZW9tZXRyeSA9IGZlYXR1cmUuZ2V0R2VvbWV0cnkoKTtcclxuICAgIGZlYXR1cmUudW5zZXQoZmVhdHVyZS5nZXRHZW9tZXRyeU5hbWUoKSk7XHJcbiAgICBmZWF0dXJlLnNldEdlb21ldHJ5TmFtZShnZW9tZXRyeU5hbWUpO1xyXG4gICAgZmVhdHVyZS5zZXRHZW9tZXRyeShnZW9tZXRyeSk7XHJcbiAgICByZXR1cm4gZmVhdHVyZTtcclxuICB9XHJcblxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG9mZmxpbmVTdG9yZTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZlcmlmeUZlYXR1cmVJZHMgPSByZXF1aXJlKCcuL3ZlcmlmeWZlYXR1cmVpZHMnKTtcclxuXHJcbnZhciB0b3BvSnNvbiA9IHt9O1xyXG50b3BvSnNvbi5yZXF1ZXN0ID0gZnVuY3Rpb24gcmVxdWVzdChsYXllcikge1xyXG4gIHZhciBzb3VyY2UgPSBsYXllci5nZXQoJ3NvdXJjZU5hbWUnKTtcclxuICB2YXIgcmVxdWVzdCA9IGNyZWF0ZVJlcXVlc3Qoc291cmNlKTtcclxuICByZXR1cm4gcmVxdWVzdDtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlUmVxdWVzdChzb3VyY2UpIHtcclxuICAgIHZhciBmb3JtYXQgPSBuZXcgb2wuZm9ybWF0LlRvcG9KU09OKCk7XHJcbiAgICB2YXIgdXJsID0gc291cmNlO1xyXG5cclxuICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIHZhciBmZWF0dXJlcyA9IGZvcm1hdC5yZWFkRmVhdHVyZXMocmVzcG9uc2UpO1xyXG4gICAgICAgIGZlYXR1cmVzID0gdmVyaWZ5RmVhdHVyZUlkcyhmZWF0dXJlcyk7XHJcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xyXG4gICAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdG9wb0pzb247XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgZ2VuZXJhdGVVVUlEID0gcmVxdWlyZSgnLi4vdXRpbHMvZ2VuZXJhdGV1dWlkJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHZlcmlmeUZlYXR1cmVJZHMoZmVhdHVyZXMpIHtcclxuICBpZiAoZmVhdHVyZXNbMF0pIHtcclxuICAgIGlmIChmZWF0dXJlc1swXS5nZXRJZCgpID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgICAgZmVhdHVyZS5zZXRJZChnZW5lcmF0ZVVVSUQoKSk7XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICByZXR1cm4gZmVhdHVyZXM7XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgd2ZzVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuLi9lZGl0b3Ivd2ZzdHJhbnNhY3Rpb24nKTtcclxuXHJcbnZhciB3ZnMgPSB7fTtcclxud2ZzLnJlcXVlc3QgPSBmdW5jdGlvbiByZXF1ZXN0KGxheWVyKSB7XHJcbiAgdmFyIHNvdXJjZU9wdGlvbnMgPSB2aWV3ZXIuZ2V0TWFwU291cmNlKClbbGF5ZXIuZ2V0KCdzb3VyY2VOYW1lJyldO1xyXG4gIHNvdXJjZU9wdGlvbnMuZmVhdHVyZVR5cGUgPSBsYXllci5nZXQoJ25hbWUnKS5zcGxpdCgnX18nKS5zaGlmdCgpO1xyXG4gIHNvdXJjZU9wdGlvbnMuZ2VvbWV0cnlOYW1lID0gbGF5ZXIuZ2V0KCdnZW9tZXRyeU5hbWUnKTtcclxuICBzb3VyY2VPcHRpb25zLmZpbHRlciA9IGxheWVyLmdldCgnZmlsdGVyJyk7XHJcbiAgc291cmNlT3B0aW9ucy5wcm9qZWN0aW9uQ29kZSA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG4gIHNvdXJjZU9wdGlvbnMuZXh0ZW50ID0gbGF5ZXIuZ2V0KCdleHRlbnQnKTtcclxuICBzb3VyY2VPcHRpb25zLnByb2plY3Rpb25Db2RlID0gdmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcblxyXG4gIHZhciByZXF1ZXN0ID0gY3JlYXRlUmVxdWVzdChzb3VyY2VPcHRpb25zKTtcclxuICByZXR1cm4gcmVxdWVzdDtcclxuXHJcbiAgZnVuY3Rpb24gY3JlYXRlUmVxdWVzdChvcHRpb25zKSB7XHJcbiAgICB2YXIgZm9ybWF0ID0gbmV3IG9sLmZvcm1hdC5HZW9KU09OKHtcclxuICAgICAgZ2VvbWV0cnlOYW1lOiBvcHRpb25zLmdlb21ldHJ5TmFtZVxyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIHNlcnZlclVybCA9IG9wdGlvbnMudXJsO1xyXG4gICAgdmFyIHF1ZXJ5RmlsdGVyO1xyXG4gICAgdmFyIHVybDtcclxuXHJcbiAgICAvL0lmIGNxbCBmaWx0ZXIgdGhlbiBiYm94IG11c3QgYmUgdXNlZCBpbiB0aGUgZmlsdGVyLlxyXG4gICAgaWYgKG9wdGlvbnMuZmlsdGVyKSB7XHJcbiAgICAgIHF1ZXJ5RmlsdGVyID0gJyZDUUxfRklMVEVSPScgKyBvcHRpb25zLmZpbHRlciArXHJcbiAgICAgICAgJyBBTkQgQkJPWCgnICsgb3B0aW9ucy5nZW9tZXRyeU5hbWUgKyAnLCcgK1xyXG4gICAgICAgIG9wdGlvbnMuZXh0ZW50LmpvaW4oJywnKSArICcsJyArXHJcbiAgICAgICAgXCInXCIgKyBvcHRpb25zLnByb2plY3Rpb25Db2RlICsgXCInKVwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcXVlcnlGaWx0ZXIgPSAnJkJCT1g9JyArXHJcbiAgICAgICAgb3B0aW9ucy5leHRlbnQuam9pbignLCcpICsgJywnICsgb3B0aW9ucy5wcm9qZWN0aW9uQ29kZTtcclxuICAgIH1cclxuXHJcbiAgICB1cmwgPSBzZXJ2ZXJVcmwgK1xyXG4gICAgICAnP3NlcnZpY2U9V0ZTJicgK1xyXG4gICAgICAndmVyc2lvbj0xLjEuMCZyZXF1ZXN0PUdldEZlYXR1cmUmdHlwZU5hbWU9JyArIG9wdGlvbnMuZmVhdHVyZVR5cGUgK1xyXG4gICAgICAnJm91dHB1dEZvcm1hdD1hcHBsaWNhdGlvbi9qc29uJyArXHJcbiAgICAgICcmc3JzbmFtZT0nICsgb3B0aW9ucy5wcm9qZWN0aW9uQ29kZSArXHJcbiAgICAgIHF1ZXJ5RmlsdGVyO1xyXG5cclxuICAgIHJldHVybiAkLmFqYXgoe1xyXG4gICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgIGNhY2hlOiBmYWxzZVxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBmb3JtYXQucmVhZEZlYXR1cmVzKHJlc3BvbnNlKTtcclxuICAgICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG53ZnMudHJhbnNhY3Rpb24gPSBmdW5jdGlvbih0cmFuc09iaiwgbGF5ZXJOYW1lKSB7XHJcbiAgcmV0dXJuIHdmc1RyYW5zYWN0aW9uKHRyYW5zT2JqLCBsYXllck5hbWUpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHdmcztcclxuIiwiLypyZXF1aXJlcyBNb2RhbC5qcyovXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHBlcm1hbGlua1BhcnNlciA9IHJlcXVpcmUoJy4vcGVybWFsaW5rcGFyc2VyJyk7XHJcbnZhciBwZXJtYWxpbmtTdG9yZSA9IHJlcXVpcmUoJy4vcGVybWFsaW5rc3RvcmUnKTtcclxudmFyIHVybHBhcnNlciA9cmVxdWlyZSgnLi4vdXRpbHMvdXJscGFyc2VyJyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cclxucmV0dXJuIHtcclxuICAgIGdldFBlcm1hbGluazogZnVuY3Rpb24gZ2V0UGVybWFsaW5rKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgaGFzaCA9IHVybHBhcnNlci5mb3JtYXRVcmwocGVybWFsaW5rU3RvcmUuZ2V0U3RhdGUoKSk7XHJcbiAgICAgICAgdmFyIHVybCA9IHBlcm1hbGlua1N0b3JlLmdldFVybCgpICsgXCIjXCIgKyBoYXNoO1xyXG4gICAgICAgIHJldHVybih1cmwpO1xyXG4gICAgfSxcclxuICAgIHBhcnNlUGVybWFsaW5rOiBmdW5jdGlvbiBwYXJzZVBlcm1hbGluayh1cmwpIHtcclxuICAgICAgICBpZih1cmwuaW5kZXhPZignIycpID4gLTEpIHtcclxuICAgICAgICAgICAgdmFyIHVybFNlYXJjaCA9IHVybC5zcGxpdCgnIycpWzFdO1xyXG4gICAgICAgICAgICB2YXIgdXJsUGFydHMgPSB1cmxTZWFyY2guc3BsaXQoJyYnKTtcclxuICAgICAgICAgICAgdmFyIHVybEFzT2JqID0ge307XHJcbiAgICAgICAgICAgIHVybFBhcnRzLmZvckVhY2goZnVuY3Rpb24ocGFydCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IHBhcnQuc3BsaXQoJz0nKVswXTtcclxuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBwYXJ0LnNwbGl0KCc9JylbMV07XHJcbiAgICAgICAgICAgICAgICBpZihwZXJtYWxpbmtQYXJzZXIuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybEFzT2JqW2tleV0gPSBwZXJtYWxpbmtQYXJzZXJba2V5XSh2YWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHVybEFzT2JqO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxufSgpO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIHVybHBhcnNlciA9IHJlcXVpcmUoJy4uL3V0aWxzL3VybHBhcnNlcicpO1xyXG5cclxudmFyIGxheWVyTW9kZWwgPSB7XHJcbiAgICB2OiB7XHJcbiAgICAgIG5hbWU6IFwidmlzaWJsZVwiLFxyXG4gICAgICBkYXRhVHlwZTogXCJib29sZWFuXCJcclxuICAgIH0sXHJcbiAgICBzOiB7XHJcbiAgICAgIG5hbWU6IFwibGVnZW5kXCIsXHJcbiAgICAgIGRhdGFUeXBlOiBcImJvb2xlYW5cIlxyXG4gICAgfSxcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSB7XHJcbiAgbGF5ZXJzOiBmdW5jdGlvbihsYXllcnNTdHIpIHtcclxuICAgICAgdmFyIGxheWVycyA9IGxheWVyc1N0ci5zcGxpdCgnLCcpO1xyXG4gICAgICB2YXIgbGF5ZXJPYmplY3RzID0ge307XHJcbiAgICAgIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgICAgICB2YXIgb2JqID0ge307XHJcbiAgICAgICAgICB2YXIgbGF5ZXJPYmplY3QgPSB1cmxwYXJzZXIub2JqZWN0aWZ5KGxheWVyLHt0b3Btb3N0OiBcIm5hbWVcIn0pO1xyXG4gICAgICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobGF5ZXJPYmplY3QpLmZvckVhY2goZnVuY3Rpb24ocHJvcCkge1xyXG4gICAgICAgICAgICAgIHZhciB2YWwgPSBsYXllck9iamVjdFtwcm9wXTtcclxuICAgICAgICAgICAgICBpZihsYXllck1vZGVsLmhhc093blByb3BlcnR5KHByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJ1dGUgPSBsYXllck1vZGVsW3Byb3BdO1xyXG4gICAgICAgICAgICAgICAgICBvYmpbYXR0cmlidXRlLm5hbWVdID0gdXJscGFyc2VyLnN0ckJvb2xlYW4odmFsKTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIG9ialtwcm9wXSA9IHZhbDtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGxheWVyT2JqZWN0c1tvYmoubmFtZV0gPSBvYmo7XHJcblxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGxheWVyT2JqZWN0cztcclxuICB9LFxyXG4gIHpvb206IGZ1bmN0aW9uKHpvb21TdHIpIHtcclxuICAgICAgcmV0dXJuIHBhcnNlSW50KHpvb21TdHIpO1xyXG4gIH0sXHJcbiAgY2VudGVyOiBmdW5jdGlvbihjZW50ZXJTdHIpIHtcclxuICAgICAgdmFyIGNlbnRlciA9IGNlbnRlclN0ci5zcGxpdChcIixcIikubWFwKGZ1bmN0aW9uKGNvb3JkKSB7XHJcbiAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoY29vcmQpO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGNlbnRlcjtcclxuICB9LFxyXG4gIHNlbGVjdGlvbjogZnVuY3Rpb24oc2VsZWN0aW9uU3RyKSB7XHJcbiAgICAgIHJldHVybiB1cmxwYXJzZXIuc3RyQXJyYXlpZnkoc2VsZWN0aW9uU3RyLCB7XHJcbiAgICAgICAgdG9wbW9zdE5hbWU6IFwiZ2VvbWV0cnlUeXBlXCIsXHJcbiAgICAgICAgYXJyTmFtZTogXCJjb29yZGluYXRlc1wifVxyXG4gICAgICApO1xyXG4gIH0sXHJcbiAgcGluOiBmdW5jdGlvbihwaW5TdHIpIHtcclxuICAgICAgcmV0dXJuIHVybHBhcnNlci5zdHJJbnRpZnkocGluU3RyKTtcclxuICB9LFxyXG4gIG1hcDogZnVuY3Rpb24obWFwU3RyKSB7XHJcbiAgICAgIHJldHVybiBtYXBTdHI7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4uL3ZpZXdlcicpO1xyXG52YXIgc2VsZWN0aW9uID0gcmVxdWlyZSgnLi4vZmVhdHVyZWluZm8nKVsnZ2V0U2VsZWN0aW9uJ107XHJcbnZhciBnZXRQaW4gPSByZXF1aXJlKCcuLi9mZWF0dXJlaW5mbycpWydnZXRQaW4nXTtcclxudmFyIHVybHBhcnNlciA9cmVxdWlyZSgnLi4vdXRpbHMvdXJscGFyc2VyJyk7XHJcblxyXG52YXIgcGVybWFsaW5rU3RvcmUgPSB7fTtcclxudmFyIHN0YXRlO1xyXG52YXIgdXJsO1xyXG5cclxucGVybWFsaW5rU3RvcmUuZ2V0U3RhdGUgPSBmdW5jdGlvbiBnZXRTdGF0ZSgpIHtcclxuICAgIHN0YXRlID0ge307XHJcbiAgICB2YXIgdmlldyA9IHZpZXdlci5nZXRNYXAoKS5nZXRWaWV3KCk7XHJcbiAgICB2YXIgbGF5ZXJzID0gdmlld2VyLmdldExheWVycygpO1xyXG4gICAgc3RhdGUubGF5ZXJzID0gZ2V0U2F2ZUxheWVycyhsYXllcnMpO1xyXG4gICAgc3RhdGUuY2VudGVyID0gdmlldy5nZXRDZW50ZXIoKS5tYXAoZnVuY3Rpb24oY29vcmQpIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZChjb29yZCk7XHJcbiAgICB9KS5qb2luKCk7XHJcbiAgICBzdGF0ZS56b29tID0gdmlldy5nZXRab29tKCkudG9TdHJpbmcoKTtcclxuICAgIC8vIHN0YXRlLnNlbGVjdGlvbiA9IGdldFNhdmVTZWxlY3Rpb24oc2VsZWN0aW9uKCkpO1xyXG4gICAgaWYgKGdldFBpbigpKSB7XHJcbiAgICAgICAgc3RhdGUucGluID0gZ2V0UGluKCkuZ2V0R2VvbWV0cnkoKS5nZXRDb29yZGluYXRlcygpLm1hcChmdW5jdGlvbihjb29yZCkge1xyXG4gICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoY29vcmQpO1xyXG4gICAgICAgIH0pLmpvaW4oKTtcclxuICAgIH1cclxuICAgIGlmICh2aWV3ZXIuZ2V0TWFwTmFtZSgpKSB7XHJcbiAgICAgICAgc3RhdGUubWFwID0gdmlld2VyLmdldE1hcE5hbWUoKS5zcGxpdCgnLicpWzBdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHN0YXRlO1xyXG59XHJcbnBlcm1hbGlua1N0b3JlLmdldFVybCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgdXJsID0gdmlld2VyLmdldFVybCgpO1xyXG4gICAgcmV0dXJuIHVybDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0U2F2ZUxheWVycyhsYXllcnMpIHtcclxuICAgIHZhciBzYXZlTGF5ZXJzID0gW107XHJcbiAgICBsYXllcnMuZm9yRWFjaChmdW5jdGlvbihsYXllcikge1xyXG4gICAgICAgIHZhciBzYXZlTGF5ZXIgPSB7fTtcclxuICAgICAgICBzYXZlTGF5ZXIudiA9IGxheWVyLmdldFZpc2libGUoKSA9PT0gdHJ1ZSA/IDEgOiAwO1xyXG4gICAgICAgIHNhdmVMYXllci5zID0gbGF5ZXIuZ2V0KCdsZWdlbmQnKSA9PT0gdHJ1ZSA/IDEgOiAwO1xyXG4gICAgICAgIGlmIChzYXZlTGF5ZXIucyB8fCBzYXZlTGF5ZXIudikge1xyXG4gICAgICAgICAgICBzYXZlTGF5ZXIubmFtZSA9IGxheWVyLmdldCgnbmFtZScpO1xyXG4gICAgICAgICAgICBzYXZlTGF5ZXJzLnB1c2godXJscGFyc2VyLnN0cmluZ2lmeShzYXZlTGF5ZXIsIHt0b3Btb3N0OiAnbmFtZSd9KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc2F2ZUxheWVycztcclxufVxyXG5mdW5jdGlvbiBnZXRTYXZlU2VsZWN0aW9uKHNlbGVjdGlvbikge1xyXG4gICAgcmV0dXJuIHVybHBhcnNlci5hcnJTdHJpbmdpZnkoc2VsZWN0aW9uLmNvb3JkaW5hdGVzLCB7dG9wbW9zdDogc2VsZWN0aW9uLmdlb21ldHJ5VHlwZX0pO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHBlcm1hbGlua1N0b3JlO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24odGFyZ2V0KSB7XHJcbiAgICByZW5kZXIodGFyZ2V0KTtcclxuICAgIGJpbmRVSUFjdGlvbnMoKTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZ2V0RWw6IGdldEVsLFxyXG4gICAgICAgIHNldFZpc2liaWxpdHk6IHNldFZpc2liaWxpdHksXHJcbiAgICAgICAgc2V0VGl0bGU6IHNldFRpdGxlLFxyXG4gICAgICAgIHNldENvbnRlbnQ6IHNldENvbnRlbnQsXHJcbiAgICAgICAgY2xvc2VQb3B1cDogY2xvc2VQb3B1cFxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlbmRlcih0YXJnZXQpIHtcclxuICB2YXIgcG9wID0gJzxkaXYgaWQ9XCJvLXBvcHVwXCI+JyArXHJcbiAgICAgICc8ZGl2IGNsYXNzPVwiby1wb3B1cCBvLWNhcmRcIj4nICtcclxuICAgICAgICAnPGRpdiBjbGFzcz1cIm8tY2xvc2UtYnV0dG9uXCI+PHN2ZyBjbGFzcz1cIm8taWNvbi1mYS10aW1lc1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS10aW1lc1wiPjwvdXNlPjwvc3ZnPjwvZGl2PicgK1xyXG4gICAgICAgICc8ZGl2IGNsYXNzPVwiby1jYXJkLXRpdGxlXCI+PC9kaXY+JyArXHJcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWNhcmQtY29udGVudFwiPjwvZGl2PicgK1xyXG4gICAgICAnPC9kaXY+JyArXHJcbiAgICAnPC9kaXY+JztcclxuICAkKHRhcmdldCkuYXBwZW5kKHBvcCk7XHJcbn1cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAgICQoJyNvLXBvcHVwIC5vLXBvcHVwIC5vLWNsb3NlLWJ1dHRvbicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2dCkge1xyXG4gICAgICAgIGNsb3NlUG9wdXAoKTtcclxuICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIGdldEVsKCkge1xyXG4gICAgcmV0dXJuICQoXCIjby1wb3B1cFwiKS5nZXQoMCk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VmlzaWJpbGl0eSh2aXNpYmxlKSB7XHJcbiAgICB2aXNpYmxlID09IHRydWUgPyAkKCcjby1wb3B1cCAuby1wb3B1cCcpLmNzcygnZGlzcGxheScsICdibG9jaycpIDogJCgnI28tcG9wdXAgLm8tcG9wdXAnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xyXG59XHJcbmZ1bmN0aW9uIHNldFRpdGxlKHRpdGxlKSB7XHJcbiAgICAkKCcjby1wb3B1cCAuby1jYXJkLXRpdGxlJykuaHRtbCh0aXRsZSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0Q29udGVudChjb25maWcpIHtcclxuICAgIGNvbmZpZy50aXRsZSA/ICQoJyNvLXBvcHVwIC5vLXBvcHVwIC5vLWNhcmQtdGl0bGUnKS5odG1sKGNvbmZpZy50aXRsZSk6ICQoJyNvLXBvcHVwIC5vLXBvcHVwIC5vLWNhcmQtdGl0bGUnKS5odG1sKCcnKTtcclxuICAgIGNvbmZpZy5jb250ZW50ID8gJCgnI28tcG9wdXAgLm8tcG9wdXAgLm8tY2FyZC1jb250ZW50JykuaHRtbChjb25maWcuY29udGVudCk6ICQoJyNvLXBvcHVwIC5vLXBvcHVwIC5vLWNhcmQtY29udGVudCcpLmh0bWwoJycpO1xyXG59XHJcbmZ1bmN0aW9uIGNsb3NlUG9wdXAoKSB7XHJcbiAgICBzZXRWaXNpYmlsaXR5KGZhbHNlKTtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbnZhciBjb250cm9sSWQgPSAnby1wb3NpdGlvbic7XHJcbnZhciBtYXJrZXJJZCA9ICdvLXBvc2l0aW9uLW1hcmtlcic7XHJcbnZhciB0b2dnbGVQcm9qSWQgPSAnby1wb3NpdGlvbi10b2dnbGUtcHJvaic7XHJcbnZhciBjb29yZHNJZCA9ICdvLXBvc2l0aW9uLWNvb3Jkcyc7XHJcbnZhciBjb29yZHNGaW5kSWQgPSAnby1wb3NpdGlvbi1maW5kJztcclxudmFyIHRvZ2dsZVBvc2l0aW9uSWQgPSAnby10b2dnbGUtcG9zaXRpb24nO1xyXG52YXIgY2hhcmFjdGVyRXJyb3IgPSAnT2dpbHRpZ3QgdGVja2VuIGbDtnIga29vcmRpbmF0LCB2w6RubGlnZW4gZsO2cnPDtmsgaWdlbi4nO1xyXG52YXIgZXh0ZW50RXJyb3IgPSAnQW5naXZuYSBrb29yZGluYXRlciBsaWdnZXIgaW50ZSBpbm9tIGthcnRhbnMgdXRzdHLDpGNrbmluZywgdsOkbmxpZ2VuIGbDtnJzw7ZrIGlnZW4uJztcclxudmFyIG1hcCA9IHVuZGVmaW5lZDtcclxudmFyIHZpZXcgPSB1bmRlZmluZWQ7XHJcbnZhciBjb25zb2xlSWQgPSB1bmRlZmluZWQ7XHJcbnZhciBzdWZmaXggPSB1bmRlZmluZWQ7XHJcbnZhciBjdXJyZW50UHJvamVjdGlvbiA9IHVuZGVmaW5lZDtcclxudmFyIHByb2plY3Rpb25zID0gdW5kZWZpbmVkO1xyXG52YXIgcHJvamVjdGlvbkNvZGVzID0gdW5kZWZpbmVkO1xyXG52YXIgcHJvamVjdGlvbiA9IHVuZGVmaW5lZDtcclxudmFyIG1hcFByb2plY3Rpb24gPSB1bmRlZmluZWQ7XHJcbnZhciBwcmVjaXNpb24gPSB1bmRlZmluZWQ7XHJcbnZhciBtb3VzZVBvc2l0aW9uQWN0aXZlID0gZmFsc2U7XHJcbnZhciBtb3VzZVBvc2l0aW9uQ29udHJvbDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciB0aXRsZSA9IG9wdGlvbnMudGl0bGUgfHwgdW5kZWZpbmVkO1xyXG4gIHN1ZmZpeCA9IG9wdGlvbnMuc3VmZml4IHx8ICcnO1xyXG4gIG1hcCA9IHZpZXdlci5nZXRNYXAoKTtcclxuICB2aWV3ID0gbWFwLmdldFZpZXcoKTtcclxuICBwcm9qZWN0aW9uID0gdmlldy5nZXRQcm9qZWN0aW9uKCk7XHJcbiAgbWFwUHJvamVjdGlvbiA9IHZpZXdlci5nZXRQcm9qZWN0aW9uQ29kZSgpO1xyXG4gIGNvbnNvbGVJZCA9IHZpZXdlci5nZXRDb25zb2xlSWQoKTtcclxuICBwcm9qZWN0aW9ucyA9IG9wdGlvbnMucHJvamVjdGlvbnMgfHwge307XHJcbiAgcHJvamVjdGlvbkNvZGVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMocHJvamVjdGlvbnMpO1xyXG4gIGlmICh0aXRsZSkge1xyXG4gICAgY3VycmVudFByb2plY3Rpb24gPSBtYXBQcm9qZWN0aW9uO1xyXG4gICAgcHJvamVjdGlvbnNbY3VycmVudFByb2plY3Rpb25dID0gdGl0bGU7XHJcbiAgICBwcm9qZWN0aW9uQ29kZXMudW5zaGlmdChtYXBQcm9qZWN0aW9uKTtcclxuICB9IGVsc2UgaWYgKHByb2plY3Rpb25Db2Rlcy5sZW5ndGgpIHtcclxuICAgIGN1cnJlbnRQcm9qZWN0aW9uID0gcHJvamVjdGlvbkNvZGVzWzBdO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhbGVydCgnTm8gdGl0bGUgb3IgcHJvamVjdGlvbiBpcyBzZXQgZm9yIHBvc2l0aW9uJyk7XHJcbiAgfVxyXG4gIHNldFByZWNpc2lvbigpO1xyXG5cclxuICByZW5kZXIoKTtcclxuICBiaW5kVUlBY3Rpb25zKCk7XHJcblxyXG4gIGFkZE1vdXNlUG9zaXRpb24oKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gIHZhciBpY29uID0gdXRpbHMuY3JlYXRlU3ZnKHtcclxuICAgIGhyZWY6ICcjb19jZW50ZXJwb3NpdGlvbl8yNHB4JyxcclxuICAgIGNsczogJ28taWNvbi1wb3NpdGlvbidcclxuICB9KTtcclxuICB2YXIgdG9nZ2xlQnV0dG9ucyA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicsIGljb24sIHtcclxuICAgIGNsczogJ28tcG9zaXRpb24tY2VudGVyLWJ1dHRvbicsXHJcbiAgICBpZDogdG9nZ2xlUG9zaXRpb25JZFxyXG4gIH0pO1xyXG4gIHRvZ2dsZUJ1dHRvbnMgKz0gdXRpbHMuY3JlYXRlRWxlbWVudCgnYnV0dG9uJywgcHJvamVjdGlvbnNbY3VycmVudFByb2plY3Rpb25dLCB7XHJcbiAgICBpZDogdG9nZ2xlUHJvaklkLFxyXG4gICAgY2xzOiAnby1wb3NpdGlvbi1idXR0b24nLFxyXG4gICAgdmFsdWU6IGN1cnJlbnRQcm9qZWN0aW9uXHJcbiAgfSk7XHJcbiAgdmFyIGNvb3Jkc0RpdiA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsICcnLCB7XHJcbiAgICBpZDogY29vcmRzSWQsXHJcbiAgICBjbHM6IGNvb3Jkc0lkLFxyXG4gICAgc3R5bGU6ICdwYWRkaW5nLWxlZnQ6IDVweDsnXHJcbiAgfSk7XHJcbiAgdmFyIGNvb3Jkc0ZpbmQgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdpbnB1dCcsICcnLCB7XHJcbiAgICBpZDogY29vcmRzRmluZElkLFxyXG4gICAgY2xzOiBjb29yZHNGaW5kSWQsXHJcbiAgICB0eXBlOiAndGV4dCcsXHJcbiAgICBuYW1lOiBjb29yZHNGaW5kSWQsXHJcbiAgICBzdHlsZTogJ3BhZGRpbmctbGVmdDogNXB4OydcclxuICB9KTtcclxuICB2YXIgY29udHJvbENvbnRhaW5lciA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIHRvZ2dsZUJ1dHRvbnMgKyBjb29yZHNEaXYgKyBjb29yZHNGaW5kLCB7XHJcbiAgICBpZDogY29udHJvbElkLFxyXG4gICAgY2xzOiBjb250cm9sSWQsXHJcbiAgICBzdHlsZTogJ2Rpc3BsYXk6IGlubGluZS1ibG9jazsnXHJcbiAgfSk7XHJcbiAgJCgnIycgKyBjb25zb2xlSWQpLmFwcGVuZChjb250cm9sQ29udGFpbmVyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkKCcjJyArIHRvZ2dsZVByb2pJZCkub24oJ2NsaWNrJywgb25Ub2dnbGVQcm9qZWN0aW9uKTtcclxuICAkKCcjJyArIHRvZ2dsZVBvc2l0aW9uSWQpLm9uKCdjbGljaycsIG9uVG9nZ2xlUG9zaXRpb24pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRNb3VzZVBvc2l0aW9uKCkge1xyXG4gIG1vdXNlUG9zaXRpb25Db250cm9sID0gbmV3IG9sLmNvbnRyb2wuTW91c2VQb3NpdGlvbih7XHJcbiAgICBjb29yZGluYXRlRm9ybWF0OiBvbC5jb29yZGluYXRlLmNyZWF0ZVN0cmluZ1hZKHByZWNpc2lvbiksXHJcbiAgICBwcm9qZWN0aW9uOiBjdXJyZW50UHJvamVjdGlvbixcclxuICAgIHRhcmdldDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29vcmRzSWQpLFxyXG4gICAgdW5kZWZpbmVkSFRNTDogJyZuYnNwOydcclxuICB9KTtcclxuICBtYXAuYWRkQ29udHJvbChtb3VzZVBvc2l0aW9uQ29udHJvbCk7XHJcbiAgbW91c2VQb3NpdGlvbkFjdGl2ZSA9IHRydWU7XHJcbiAgJCgnIycgKyBjb29yZHNJZCkuYWRkQ2xhc3MoJ28tYWN0aXZlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZU1vdXNlUG9zaXRpb24oKSB7XHJcbiAgbWFwLnJlbW92ZUNvbnRyb2wobW91c2VQb3NpdGlvbkNvbnRyb2wpO1xyXG4gICQoJyMnICsgY29vcmRzSWQpLnJlbW92ZUNsYXNzKCdvLWFjdGl2ZScpO1xyXG4gIG1vdXNlUG9zaXRpb25BY3RpdmUgPSBmYWxzZTtcclxufVxyXG5cclxuZnVuY3Rpb24gYWRkQ2VudGVyUG9zaXRpb24oKSB7XHJcbiAgcmVuZGVyTWFya2VyKCk7XHJcbiAgJCgnIycgKyB0b2dnbGVQb3NpdGlvbklkKS5hZGRDbGFzcygnby1hY3RpdmUnKTtcclxuICAkKCcjJyArIGNvb3Jkc0ZpbmRJZCkuYWRkQ2xhc3MoJ28tYWN0aXZlJyk7XHJcbiAgdXBkYXRlQ29vcmRzKHZpZXcuZ2V0Q2VudGVyKCkpO1xyXG4gIHZpZXcub24oJ2NoYW5nZTpjZW50ZXInLCBvbkNoYW5nZUNlbnRlcik7XHJcbiAgJCgnIycgKyBjb29yZHNGaW5kSWQpLm9uKCdrZXlwcmVzcycsIG9uRmluZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUNlbnRlclBvc2l0aW9uKCkge1xyXG4gIHZpZXcudW4oJ2NoYW5nZTpjZW50ZXInLCBvbkNoYW5nZUNlbnRlcik7XHJcbiAgY2xlYXIoKTtcclxuICAkKCcjJyArIGNvb3Jkc0ZpbmRJZCkub2ZmKCdrZXlwcmVzcycsIG9uRmluZCk7XHJcbiAgJCgnIycgKyBtYXJrZXJJZCkucmVtb3ZlKCk7XHJcbiAgJCgnIycgKyB0b2dnbGVQb3NpdGlvbklkKS5yZW1vdmVDbGFzcygnby1hY3RpdmUnKTtcclxuICAkKCcjJyArIGNvb3Jkc0ZpbmRJZCkucmVtb3ZlQ2xhc3MoJ28tYWN0aXZlJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlbmRlck1hcmtlcigpIHtcclxuICB2YXIgaWNvbiA9IHV0aWxzLmNyZWF0ZVN2Zyh7XHJcbiAgICBocmVmOiAnI29fY2VudGVycG9zaXRpb25fMjRweCcsXHJcbiAgICBjbHM6ICdvLWljb24tcG9zaXRpb24tbWFya2VyJ1xyXG4gIH0pO1xyXG4gIHZhciBtYXJrZXIgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCBpY29uLCB7XHJcbiAgICBpZDogbWFya2VySWQsXHJcbiAgICBjbHM6IG1hcmtlcklkXHJcbiAgfSk7XHJcbiAgJCgnI28tbWFwJykuYXBwZW5kKG1hcmtlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGZpbmRDb29yZGluYXRlKCkge1xyXG4gIHZhciBjb29yZHMgPSAkKCcjJyArIGNvb3Jkc0ZpbmRJZCkudmFsKCk7XHJcbiAgdmFyIHZhbGlkYXRlZCA9IHZhbGlkYXRlQ29vcmRpbmF0ZShjb29yZHMpO1xyXG4gIGlmICh2YWxpZGF0ZWQubGVuZ3RoID09PSAyKSB7XHJcbiAgICBtYXAuZ2V0VmlldygpLmFuaW1hdGUoe1xyXG4gICAgICBjZW50ZXI6IHZhbGlkYXRlZCxcclxuICAgICAgem9vbTogKHZpZXdlci5nZXRSZXNvbHV0aW9ucygpLmxlbmd0aCAtIDMpXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29vcmRpbmF0ZShzdHJDb29yZHMpIHtcclxuICB2YXIgZXh0ZW50ID0gdmlld2VyLmdldEV4dGVudCgpIHx8IHZpZXcuZ2V0UHJvamVjdGlvbigpLmdldEV4dGVudCgpO1xyXG4gIHZhciBpbkV4dGVudDtcclxuXHJcbiAgLy92YWxpZGF0ZSBudW1iZXJzXHJcbiAgdmFyIGNvb3JkcyA9IHN0ckNvb3Jkcy5zcGxpdCgnLCcpLm1hcChmdW5jdGlvbihjb29yZCkge1xyXG4gICAgICByZXR1cm4gcGFyc2VGbG9hdChjb29yZCk7XHJcbiAgICB9KVxyXG4gICAgLmZpbHRlcihmdW5jdGlvbihjb29yZCkge1xyXG4gICAgICBpZiAoY29vcmQgIT09IE5hTikge1xyXG4gICAgICAgIHJldHVybiBjb29yZDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgaWYgKGNvb3Jkcy5sZW5ndGggIT09IDIpIHtcclxuICAgIGFsZXJ0KGNoYXJhY3RlckVycm9yKTtcclxuICAgIHJldHVybiBbXTtcclxuICB9XHJcblxyXG4gIC8vIHRyYW5zZm9ybVxyXG4gIGlmIChjdXJyZW50UHJvamVjdGlvbiAhPT0gbWFwUHJvamVjdGlvbikge1xyXG4gICAgY29vcmRzID0gdHJhbnNmb3JtQ29vcmRzKGNvb3JkcywgY3VycmVudFByb2plY3Rpb24sIG1hcFByb2plY3Rpb24pO1xyXG4gIH1cclxuXHJcbiAgLy8gdmFsaWRhdGUgY29vcmRzIHdpdGhpbiBleHRlbnRcclxuICBpbkV4dGVudCA9IGNvb3Jkc1swXSA+PSBleHRlbnRbMF0gJiYgY29vcmRzWzFdID49IGV4dGVudFsxXTtcclxuICBpbkV4dGVudCA9IGluRXh0ZW50ICYmIChjb29yZHNbMF0gPD0gZXh0ZW50WzJdKSAmJiAoY29vcmRzWzFdIDw9IGV4dGVudFszXSk7XHJcbiAgaWYgKGluRXh0ZW50KSB7XHJcbiAgICByZXR1cm4gY29vcmRzO1xyXG4gIH0gZWxzZSB7XHJcbiAgICBhbGVydChleHRlbnRFcnJvcik7XHJcbiAgICByZXR1cm4gW107XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVQcm9qZWN0aW9uVmFsKHZhbCkge1xyXG4gIHZhciBpbmRleDtcclxuICB2YXIgcHJvaiA9IHVuZGVmaW5lZDtcclxuICBpbmRleCA9IHByb2plY3Rpb25Db2Rlcy5pbmRleE9mKHZhbCk7XHJcbiAgaWYgKGluZGV4ID09PSBwcm9qZWN0aW9uQ29kZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgcHJvaiA9IHByb2plY3Rpb25Db2Rlc1swXTtcclxuICB9IGVsc2UgaWYgKGluZGV4IDwgcHJvamVjdGlvbkNvZGVzLmxlbmd0aCAtIDEpIHtcclxuICAgIHByb2ogPSBwcm9qZWN0aW9uQ29kZXNbaW5kZXggKyAxXTtcclxuICB9XHJcbiAgcmV0dXJuIHByb2o7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyKCkge1xyXG4gIHdyaXRlQ29vcmRzKCcnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb25Ub2dnbGVQb3NpdGlvbigpIHtcclxuICBpZiAobW91c2VQb3NpdGlvbkFjdGl2ZSkge1xyXG4gICAgcmVtb3ZlTW91c2VQb3NpdGlvbigpO1xyXG4gICAgYWRkQ2VudGVyUG9zaXRpb24oKTtcclxuICB9IGVsc2Uge1xyXG4gICAgYWRkTW91c2VQb3NpdGlvbigpOyAgICBcclxuICAgIHJlbW92ZUNlbnRlclBvc2l0aW9uKCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvblRvZ2dsZVByb2plY3Rpb24oZSkge1xyXG4gIHJldHVybiBmdW5jdGlvbihldmVudCkge1xyXG4gICAgY3VycmVudFByb2plY3Rpb24gPSB0b2dnbGVQcm9qZWN0aW9uVmFsKHRoaXMudmFsdWUpO1xyXG4gICAgc2V0UHJlY2lzaW9uKCk7XHJcbiAgICB3cml0ZVByb2plY3Rpb24oY3VycmVudFByb2plY3Rpb24pO1xyXG4gICAgaWYgKG1vdXNlUG9zaXRpb25BY3RpdmUpIHtcclxuICAgICAgcmVtb3ZlTW91c2VQb3NpdGlvbigpO1xyXG4gICAgICBhZGRNb3VzZVBvc2l0aW9uKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB1cGRhdGVDb29yZHModmlldy5nZXRDZW50ZXIoKSk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmJsdXIoKTtcclxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfS5iaW5kKHRoaXMpKGUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkNoYW5nZUNlbnRlcigpIHtcclxuICB1cGRhdGVDb29yZHModmlldy5nZXRDZW50ZXIoKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9uRmluZChlKSB7XHJcbiAgaWYgKGUud2hpY2ggPT09IDEzKSB7XHJcbiAgICBmaW5kQ29vcmRpbmF0ZSgpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcm91bmQoY29vcmRzKSB7XHJcbiAgaWYgKHByZWNpc2lvbikge1xyXG4gICAgcmV0dXJuIGNvb3Jkcy5tYXAoZnVuY3Rpb24oY29vcmQpIHtcclxuICAgICAgcmV0dXJuIGNvb3JkLnRvRml4ZWQocHJlY2lzaW9uKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gY29vcmRzLm1hcChmdW5jdGlvbihjb29yZCkge1xyXG4gICAgICByZXR1cm4gTWF0aC5yb3VuZChjb29yZCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldFByZWNpc2lvbigpIHtcclxuICBpZiAoY3VycmVudFByb2plY3Rpb24gPT09ICdFUFNHOjQzMjYnKSB7XHJcbiAgICBwcmVjaXNpb24gPSA1O1xyXG4gIH0gZWxzZSB7XHJcbiAgICBwcmVjaXNpb24gPSAwO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVQcm9qZWN0aW9uKCkge1xyXG4gICQoJyMnICsgdG9nZ2xlUHJvaklkKS52YWwoY3VycmVudFByb2plY3Rpb24pO1xyXG4gICQoJyMnICsgdG9nZ2xlUHJvaklkKS50ZXh0KHByb2plY3Rpb25zW2N1cnJlbnRQcm9qZWN0aW9uXSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRyYW5zZm9ybUNvb3Jkcyhjb29yZHMsIHNvdXJjZSwgZGVzdGluYXRpb24pIHtcclxuICB2YXIgZ2VvbWV0cnkgPSBuZXcgb2wuRmVhdHVyZSh7XHJcbiAgICBnZW9tZXRyeTogbmV3IG9sLmdlb20uUG9pbnQoY29vcmRzKVxyXG4gIH0pLmdldEdlb21ldHJ5KCk7XHJcbiAgcmV0dXJuIGdlb21ldHJ5LnRyYW5zZm9ybShzb3VyY2UsIGRlc3RpbmF0aW9uKS5nZXRDb29yZGluYXRlcygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVDb29yZHMoc291cmNlQ29vcmRzKSB7XHJcbiAgdmFyIGNvb3JkcyA9IHNvdXJjZUNvb3JkcztcclxuICB2YXIgY2VudGVyO1xyXG4gIGlmIChjdXJyZW50UHJvamVjdGlvbiAhPT0gbWFwUHJvamVjdGlvbikge1xyXG4gICAgY29vcmRzID0gdHJhbnNmb3JtQ29vcmRzKGNvb3JkcywgcHJvamVjdGlvbiwgY3VycmVudFByb2plY3Rpb24pO1xyXG4gIH1cclxuICBjb29yZHMgPSByb3VuZChjb29yZHMpO1xyXG4gIGNlbnRlciA9IGNvb3Jkcy5qb2luKCcsICcpICsgc3VmZml4O1xyXG4gIHdyaXRlQ29vcmRzKGNlbnRlcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlQ29vcmRzKGNvb3Jkcykge1xyXG4gICQoJyMnICsgY29vcmRzRmluZElkKS52YWwoY29vcmRzKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IEluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4vdGVtcGxhdGVzL3ByaW50LmhhbmRsZWJhcnNcIik7XHJcblxyXG52YXIgcHJpbnRXaXRoID0gODAwO1xyXG52YXIgJHByaW50QnV0dG9uO1xyXG52YXIgYXR0cmlidXRpb247XHJcbnZhciBtYXA7XHJcbnZhciBiYXNlVXJsO1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgYXR0cmlidXRpb24gPSBvcHRpb25zLmF0dHJpYnV0aW9uIHx8ICfCqSBMYW50bcOkdGVyaWV0IEdlb2RhdGFzYW12ZXJrYW4nO1xyXG4gIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuICBiYXNlVXJsID0gVmlld2VyLmdldEJhc2VVcmwoKTtcclxuXHJcbiAgcmVuZGVyKCk7XHJcbiAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZW5kZXIoKSB7XHJcbiAgdmFyIGVsID0gdXRpbHMuY3JlYXRlTGlzdEJ1dHRvbih7XHJcbiAgICBpZDogJ28tcHJpbnQnLFxyXG4gICAgaWNvbkNsczogJ28taWNvbi1mYS1wcmludCcsXHJcbiAgICBzcmM6ICcjZmEtcHJpbnQnLFxyXG4gICAgdGV4dDogJ1Nrcml2IHV0J1xyXG4gIH0pO1xyXG4gICQoJyNvLW1lbnV0b29scycpLmFwcGVuZChlbCk7XHJcbiAgJHByaW50QnV0dG9uID0gJCgnI28tcHJpbnQtYnV0dG9uJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgJHByaW50QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICQoJyNhcHAtd3JhcHBlcicpLmFwcGVuZCgnPGNhbnZhcyBpZD1cIm8tcHJpbnRcIiBzdHlsZT1cImRpc3BsYXk6IG5vbmVcIj48L2NhbnZhcz4nKTtcclxuICAgIGNyZWF0ZUltYWdlKCk7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGltYWdlVG9QcmludCgkcHJpbnRDYW52YXMpIHtcclxuICB2YXIgaW1hZ2VDcm9wID0gbmV3IEltYWdlKCk7XHJcbiAgdHJ5IHtcclxuICAgIGltYWdlQ3JvcC5zcmMgPSAkcHJpbnRDYW52YXMuZ2V0KDApLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlKTtcclxuICB9IGZpbmFsbHkge1xyXG4gICAgdmFyIHRlbXBsYXRlT3B0aW9ucyA9IHt9O1xyXG4gICAgdGVtcGxhdGVPcHRpb25zLnNyYyA9IGltYWdlQ3JvcC5zcmM7XHJcbiAgICB0ZW1wbGF0ZU9wdGlvbnMuYXR0cmlidXRpb24gPSBhdHRyaWJ1dGlvbjtcclxuICAgIHRlbXBsYXRlT3B0aW9ucy5sb2dvU3JjID0gYmFzZVVybCArICdjc3MvcG5nL2xvZ29fcHJpbnQucG5nJztcclxuICAgIHZhciBwdyA9IHRlbXBsYXRlKHRlbXBsYXRlT3B0aW9ucyk7XHJcbiAgICB2YXIgcHJpbnRXaW5kb3cgPSB3aW5kb3cub3BlbignJywgJycsICd3aWR0aD04MDAsaGVpZ2h0PTgyMCcpO1xyXG4gICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQud3JpdGUocHcpO1xyXG4gICAgcHJpbnRXaW5kb3cuZG9jdW1lbnQuY2xvc2UoKTtcclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgIHByaW50V2luZG93LnByaW50KCk7XHJcbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcHJpbnRXaW5kb3cuY2xvc2UoKTtcclxuICAgICAgICAkKCcjby1wcmludCcpLnJlbW92ZSgpO1xyXG4gICAgICB9LCAxMCk7XHJcbiAgICB9LCAyMDApO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlSW1hZ2UoKSB7XHJcbiAgdmFyICRjYW52YXMgPSAkKCdjYW52YXMnKTtcclxuICB2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHJcbiAgdHJ5IHtcclxuICAgIHZhciBpbWFnZVVybCA9ICRjYW52YXMuZ2V0KDApLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmxvZyhlKTtcclxuICB9IGZpbmFsbHkge1xyXG5cclxuICAgIC8vICRwcmludENhbnZhcyA9IGNvcHkgb2Ygb3JpZ2luYWwgbWFwIGNhbnZhc1xyXG4gICAgdmFyICRwcmludENhbnZhcyA9ICQoJyNvLXByaW50Jyk7XHJcbiAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGN0eENhbnZhcyA9ICRwcmludENhbnZhc1swXS5nZXRDb250ZXh0KCcyZCcpO1xyXG5cclxuICAgICAgIC8vd2lkdGggb2YgbWFwIGNhbnZhc1xyXG4gICAgICB2YXIgc291cmNlV2lkdGggPSAkY2FudmFzWzBdLndpZHRoO1xyXG5cclxuICAgICAgLy9oZWlnaHQgb2YgbWFwIGNhbnZhc1xyXG4gICAgICB2YXIgc291cmNlSGVpZ2h0ID0gJGNhbnZhc1swXS5oZWlnaHQ7XHJcblxyXG4gICAgICAvL3NldCB0aGUgd2lkdGggb2YgcHJpbnQgY2FudmFzXHJcbiAgICAgIGlmIChzb3VyY2VXaWR0aCA8IHByaW50V2l0aCkge1xyXG4gICAgICAgICRwcmludENhbnZhc1swXS53aWR0aCA9IHNvdXJjZVdpZHRoO1xyXG4gICAgICB9IGVsc2UgaWYgKHNvdXJjZVdpZHRoID49IHByaW50V2l0aCkge1xyXG4gICAgICAgICRwcmludENhbnZhc1swXS53aWR0aCA9IHByaW50V2l0aDtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy9zZXQgdGhlIGhlaWdodCBvZiBwcmludCBjYW52YXNcclxuICAgICAgaWYgKHNvdXJjZUhlaWdodCA8IHByaW50V2l0aCkge1xyXG4gICAgICAgICRwcmludENhbnZhc1swXS5oZWlnaHQgPSBzb3VyY2VIZWlnaHQ7XHJcbiAgICAgIH0gZWxzZSBpZiAoc291cmNlV2lkdGggPj0gcHJpbnRXaXRoKSB7XHJcbiAgICAgICAgJHByaW50Q2FudmFzWzBdLmhlaWdodCA9IHByaW50V2l0aDtcclxuICAgICAgfVxyXG5cclxuICAgICAgY3R4Q2FudmFzLmRyYXdJbWFnZShpbWFnZSwgKHNvdXJjZVdpZHRoIC8gMiAtICRwcmludENhbnZhc1swXS53aWR0aCAvIDIpLCAwLCAkcHJpbnRDYW52YXNbMF0ud2lkdGgsICRwcmludENhbnZhc1swXS5oZWlnaHQsIDAsIDAsICRwcmludENhbnZhc1swXS53aWR0aCwgJHByaW50Q2FudmFzWzBdLmhlaWdodCk7XHJcbiAgICAgIGltYWdlVG9QcmludCgkcHJpbnRDYW52YXMpO1xyXG4gICAgfTtcclxuICAgIGltYWdlLnNyYyA9IGltYWdlVXJsO1xyXG4gIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IEluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG5cclxudmFyIG1hcDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciByb3RhdGVDb250cm9sO1xyXG4gIHZhciBpY29uID0gdXRpbHMuY3JlYXRlU3ZnKHtcclxuICAgIGhyZWY6ICcjb3JpZ28tY29tcGFzcycsXHJcbiAgICBjbHM6ICdvLWljb24tY29tcGFzcydcclxuICB9KTtcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcblxyXG4gIHJvdGF0ZUNvbnRyb2wgPSBuZXcgb2wuY29udHJvbC5Sb3RhdGUoe1xyXG4gICAgbGFiZWw6ICQucGFyc2VIVE1MKCc8c3Bhbj4nICsgaWNvbiArICc8L3NwYW4+JylbMF0sXHJcbiAgICB0aXBMYWJlbDogJyAnLFxyXG4gICAgdGFyZ2V0OiAnby10b29sYmFyLW1pc2MnXHJcbiAgfSk7XHJcbiAgbWFwLmFkZENvbnRyb2wocm90YXRlQ29udHJvbCk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XHJcbnZhciBudW1iZXJGb3JtYXR0ZXIgPSByZXF1aXJlKCcuL3V0aWxzL251bWJlcmZvcm1hdHRlcicpO1xyXG5cclxudmFyIGNvbnRyb2xJZCA9ICdvLXNjYWxlJztcclxudmFyIGNvbnNvbGVJZDtcclxudmFyIG1hcDtcclxudmFyICRjb25zb2xlO1xyXG52YXIgaXNBY3RpdmU7XHJcbnZhciBzY2FsZVRleHQ7XHJcblxyXG5mdW5jdGlvbiBJbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcbiAgY29uc29sZUlkID0gVmlld2VyLmdldENvbnNvbGVJZCgpO1xyXG4gIHNjYWxlVGV4dCA9IG9wdGlvbnMuc2NhbGVUZXh0IHx8ICdTa2FsYSAxOic7XHJcbiAgdmFyIGluaXRpYWxTdGF0ZSA9IG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2lzQWN0aXZlJykgPyBvcHRpb25zLmlzQWN0aXZlIDogdHJ1ZTtcclxuXHJcbiAgc2V0QWN0aXZlKGluaXRpYWxTdGF0ZSk7XHJcbiAgcmVuZGVyKCk7XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBzZXRBY3RpdmU6IHNldEFjdGl2ZVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKCkge1xyXG4gIHZhciBjb250YWluZXIgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCAnJywge1xyXG4gICAgaWQ6IGNvbnRyb2xJZCxcclxuICAgIHN0eWxlOiAnZGlzcGxheTogaW5saW5lLWJsb2NrOydcclxuICB9KTtcclxuICAkKCcjJyArIGNvbnNvbGVJZCkuYXBwZW5kKGNvbnRhaW5lcik7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNldEFjdGl2ZShzdGF0ZSkge1xyXG4gIGlmIChzdGF0ZSA9PT0gdHJ1ZSkge1xyXG4gICAgbWFwLmdldFZpZXcoKS5vbignY2hhbmdlOnJlc29sdXRpb24nLCBvblpvb21DaGFuZ2UpO1xyXG4gICAgb25ab29tQ2hhbmdlKCk7XHJcbiAgICBpc0FjdGl2ZSA9IHRydWU7XHJcbiAgfSBlbHNlIGlmIChzdGF0ZSA9PT0gZmFsc2UpIHtcclxuICAgIG1hcC5nZXRWaWV3KCkudW4oJ2NoYW5nZTpyZXNvbHV0aW9uJywgb25ab29tQ2hhbmdlKTtcclxuICAgIGlzQWN0aXZlID0gZmFsc2U7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBvblpvb21DaGFuZ2UoZSkge1xyXG4gIHZhciByZXNvbHV0aW9uID0gZSA/IGUudGFyZ2V0LmdldChlLmtleSkgOiBtYXAuZ2V0VmlldygpLmdldFJlc29sdXRpb24oKTtcclxuICB2YXIgc2NhbGUgPSBWaWV3ZXIuZ2V0U2NhbGUocmVzb2x1dGlvbik7XHJcbiAgJCgnIycgKyBjb250cm9sSWQpLnRleHQoc2NhbGVUZXh0ICsgbnVtYmVyRm9ybWF0dGVyKHNjYWxlKSk7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzLmluaXQgPSBJbml0O1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyIFZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcblxyXG52YXIgbWFwO1xyXG5cclxuZnVuY3Rpb24gSW5pdChvcHRfb3B0aW9ucykge1xyXG4gIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgdmFyIHRhcmdldCA9IG9wdGlvbnMudGFyZ2V0IHx8ICdvLXRvb2xzLWJvdHRvbSc7XHJcbiAgbWFwID0gVmlld2VyLmdldE1hcCgpO1xyXG5cclxuICB2YXIgc2NhbGVMaW5lID0gbmV3IG9sLmNvbnRyb2wuU2NhbGVMaW5lKHtcclxuICAgIHRhcmdldDogdGFyZ2V0XHJcbiAgfSk7XHJcbiAgbWFwLmFkZENvbnRyb2woc2NhbGVMaW5lKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IEluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHdrdFRvRmVhdHVyZSA9IHJlcXVpcmUoJy4vbWFwdXRpbHMnKS53a3RUb0ZlYXR1cmU7XHJcbnZhciBQb3B1cCA9IHJlcXVpcmUoJy4vcG9wdXAnKTtcclxudmFyIHR5cGVhaGVhZCA9IHJlcXVpcmUoJ3R5cGVhaGVhZC5qcycpO1xyXG52YXIgZ2V0RmVhdHVyZSA9IHJlcXVpcmUoJy4vZ2V0ZmVhdHVyZScpO1xyXG52YXIgZ2V0QXR0cmlidXRlcyA9IHJlcXVpcmUoJy4vZ2V0YXR0cmlidXRlcycpO1xyXG52YXIgZmVhdHVyZUluZm8gPSByZXF1aXJlKCcuL2ZlYXR1cmVpbmZvJyk7XHJcbnZhciBtYXBVdGlscyA9IHJlcXVpcmUoJy4vbWFwdXRpbHMnKTtcclxudmFyIGdldENlbnRlciA9IHJlcXVpcmUoJy4vZ2VvbWV0cnkvZ2V0Y2VudGVyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIG1hcDtcclxudmFyIG5hbWU7XHJcbnZhciBub3J0aGluZztcclxudmFyIGVhc3Rpbmc7XHJcbnZhciBnZW9tZXRyeUF0dHJpYnV0ZTtcclxudmFyIGlkQXR0cmlidXRlO1xyXG52YXIgbGF5ZXJOYW1lQXR0cmlidXRlO1xyXG52YXIgbGF5ZXJOYW1lO1xyXG52YXIgdGl0bGVBdHRyaWJ1dGU7XHJcbnZhciBjb250ZW50QXR0cmlidXRlO1xyXG52YXIgbWF4Wm9vbUxldmVsO1xyXG52YXIgdXJsO1xyXG52YXIgdGl0bGU7XHJcbnZhciBoaW50VGV4dDtcclxudmFyIGhpbnQ7XHJcbnZhciBoaWdobGlnaHQ7XHJcbnZhciBwcm9qZWN0aW9uQ29kZTtcclxudmFyIG92ZXJsYXk7XHJcbnZhciBsaW1pdDtcclxudmFyIG1pbkxlbmd0aDtcclxuXHJcbmZ1bmN0aW9uIGluaXQob3B0aW9ucykge1xyXG4gIHZhciBlbDtcclxuICBuYW1lID0gb3B0aW9ucy5zZWFyY2hBdHRyaWJ1dGU7XHJcbiAgbm9ydGhpbmcgPSBvcHRpb25zLm5vcnRoaW5nIHx8IHVuZGVmaW5lZDtcclxuICBlYXN0aW5nID0gb3B0aW9ucy5lYXN0aW5nIHx8IHVuZGVmaW5lZDtcclxuICBnZW9tZXRyeUF0dHJpYnV0ZSA9IG9wdGlvbnMuZ2VvbWV0cnlBdHRyaWJ1dGU7XHJcblxyXG4gIC8qKiBpZEF0dHJpYnV0ZSBpbiBjb21iaW5hdGlvbiB3aXRoIGxheWVyTmFtZUF0dHJpYnV0ZVxyXG4gIG11c3QgYmUgZGVmaW5lZCBpZiBzZWFyY2ggcmVzdWx0IHNob3VsZCBiZSBzZWxlY3RlZCAqL1xyXG4gIGlkQXR0cmlidXRlID0gb3B0aW9ucy5pZEF0dHJpYnV0ZTtcclxuICBsYXllck5hbWVBdHRyaWJ1dGUgPSBvcHRpb25zLmxheWVyTmFtZUF0dHJpYnV0ZSB8fCB1bmRlZmluZWQ7XHJcbiAgbGF5ZXJOYW1lID0gb3B0aW9ucy5sYXllck5hbWUgfHwgdW5kZWZpbmVkO1xyXG4gIHVybCA9IG9wdGlvbnMudXJsO1xyXG4gIHRpdGxlID0gb3B0aW9ucy50aXRsZSB8fCAnJztcclxuICB0aXRsZUF0dHJpYnV0ZSA9IG9wdGlvbnMudGl0bGVBdHRyaWJ1dGUgfHwgdW5kZWZpbmVkO1xyXG4gIGNvbnRlbnRBdHRyaWJ1dGUgPSBvcHRpb25zLmNvbnRlbnRBdHRyaWJ1dGUgfHwgdW5kZWZpbmVkO1xyXG4gIG1heFpvb21MZXZlbCA9IG9wdGlvbnMubWF4Wm9vbUxldmVsIHx8IFZpZXdlci5nZXRSZXNvbHV0aW9ucygpLmxlbmd0aCAtIDIgfHwgVmlld2VyLmdldFJlc29sdXRpb25zKCk7XHJcbiAgbGltaXQgPSBvcHRpb25zLmxpbWl0IHx8IDk7XHJcbiAgaGludFRleHQgPSBvcHRpb25zLmhpbnRUZXh0IHx8ICdTw7ZrLi4uJztcclxuICBoaW50ID0gb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnaGludCcpID8gb3B0aW9ucy5oaW50IDogdHJ1ZTtcclxuICBoaWdobGlnaHQgPSBvcHRpb25zLmhhc093blByb3BlcnR5KCdoaWdobGlnaHQnKSA/IG9wdGlvbnMuaGlnaGxpZ2h0IDogdHJ1ZTtcclxuICBtaW5MZW5ndGggPSBvcHRpb25zLm1pbkxlbmd0aCB8fCA0O1xyXG4gIHByb2plY3Rpb25Db2RlID0gVmlld2VyLmdldFByb2plY3Rpb25Db2RlKCk7XHJcblxyXG4gIG1hcCA9IFZpZXdlci5nZXRNYXAoKTtcclxuXHJcbiAgZWwgPSAnPGRpdiBpZD1cIm8tc2VhcmNoLXdyYXBwZXJcIj4nICtcclxuICAgICc8ZGl2IGlkPVwiby1zZWFyY2hcIiBjbGFzcz1cIm8tc2VhcmNoIG8tc2VhcmNoLWZhbHNlXCI+JyArXHJcbiAgICAnPGlucHV0IGNsYXNzPVwiby1zZWFyY2gtZmllbGQgdHlwZWFoZWFkIGZvcm0tY29udHJvbFwiIHR5cGU9XCJ0ZXh0XCIgcGxhY2Vob2xkZXI9XCInICsgaGludFRleHQgKyAnXCI+JyArXHJcbiAgICAnPGJ1dHRvbiBpZD1cIm8tc2VhcmNoLWJ1dHRvblwiPicgK1xyXG4gICAgJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtc2VhcmNoXCI+JyArXHJcbiAgICAnPHVzZSB4bGluazpocmVmPVwiI2ZhLXNlYXJjaFwiPjwvdXNlPicgK1xyXG4gICAgJzwvc3ZnPicgK1xyXG4gICAgJzwvYnV0dG9uPicgK1xyXG4gICAgJzxidXR0b24gaWQ9XCJvLXNlYXJjaC1idXR0b24tY2xvc2VcIj4nICtcclxuICAgICc8c3ZnIGNsYXNzPVwiby1pY29uLXNlYXJjaC1mYS10aW1lc1wiPicgK1xyXG4gICAgJzx1c2UgeGxpbms6aHJlZj1cIiNmYS10aW1lc1wiPjwvdXNlPicgK1xyXG4gICAgJzwvc3ZnPicgK1xyXG4gICAgJzwvYnV0dG9uPicgK1xyXG4gICAgJzwvZGl2PicgK1xyXG4gICAgJzwvZGl2Pic7XHJcbiAgJCgnI28tbWFwJykuYXBwZW5kKGVsKTtcclxuXHJcbiAgLy8gZml4IGZvciBpbnRlcm5ldCBleHBsb3JlclxyXG4gICQuc3VwcG9ydC5jb3JzID0gdHJ1ZTtcclxuXHJcbiAgJCgnLnR5cGVhaGVhZCcpLnR5cGVhaGVhZCh7XHJcbiAgICBhdXRvU2VsZWN0OiB0cnVlLFxyXG4gICAgaGludDogaGludCxcclxuICAgIGhpZ2hsaWdodDogaGlnaGxpZ2h0LFxyXG4gICAgbWluTGVuZ3RoOiBtaW5MZW5ndGhcclxuICB9LCB7XHJcbiAgICBuYW1lOiAnYWRyZXNzJyxcclxuICAgIGxpbWl0OiBsaW1pdCxcclxuICAgIGRpc3BsYXlLZXk6IG5hbWUsXHJcbiAgICBzb3VyY2U6IGZ1bmN0aW9uKHF1ZXJ5LCBzeW5jUmVzdWx0cywgYXN5bmNSZXN1bHRzKSB7XHJcbiAgICAgICQuZ2V0KHVybCArICc/cT0nICsgZW5jb2RlVVJJKHF1ZXJ5KSwgZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGFzeW5jUmVzdWx0cyhkYXRhKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGJpbmRVSUFjdGlvbnMoKTtcclxufVxyXG5cclxuZnVuY3Rpb24gYmluZFVJQWN0aW9ucygpIHtcclxuICAkKCcudHlwZWFoZWFkJykub24oJ3R5cGVhaGVhZDpzZWxlY3RlZCcsIHNlbGVjdEhhbmRsZXIpO1xyXG5cclxuICAkKCcjby1zZWFyY2ggLm8tc2VhcmNoLWZpZWxkJykub24oJ2lucHV0JywgZnVuY3Rpb24oKSB7XHJcbiAgICBpZiAoJCgnI28tc2VhcmNoIC5vLXNlYXJjaC1maWVsZC50dC1pbnB1dCcpLnZhbCgpICYmICQoJyNvLXNlYXJjaCcpLmhhc0NsYXNzKCdvLXNlYXJjaC1mYWxzZScpKSB7XHJcbiAgICAgICQoJyNvLXNlYXJjaCcpLnJlbW92ZUNsYXNzKCdvLXNlYXJjaC1mYWxzZScpO1xyXG4gICAgICAkKCcjby1zZWFyY2gnKS5hZGRDbGFzcygnby1zZWFyY2gtdHJ1ZScpO1xyXG4gICAgICBvbkNsZWFyU2VhcmNoKCk7XHJcbiAgICB9IGVsc2UgaWYgKCEoJCgnI28tc2VhcmNoIC5vLXNlYXJjaC1maWVsZC50dC1pbnB1dCcpLnZhbCgpKSAmJiAkKCcjby1zZWFyY2gnKS5oYXNDbGFzcygnby1zZWFyY2gtdHJ1ZScpKSB7XHJcbiAgICAgICQoJyNvLXNlYXJjaCcpLnJlbW92ZUNsYXNzKCdvLXNlYXJjaC10cnVlJyk7XHJcbiAgICAgICQoJyNvLXNlYXJjaCcpLmFkZENsYXNzKCdvLXNlYXJjaC1mYWxzZScpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvbkNsZWFyU2VhcmNoKCkge1xyXG4gICQoJyNvLXNlYXJjaC1idXR0b24tY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAkKCcudHlwZWFoZWFkJykudHlwZWFoZWFkKCd2YWwnLCAnJyk7XHJcbiAgICBmZWF0dXJlSW5mby5jbGVhcigpO1xyXG4gICAgJCgnI28tc2VhcmNoJykucmVtb3ZlQ2xhc3MoJ28tc2VhcmNoLXRydWUnKTtcclxuICAgICQoJyNvLXNlYXJjaCcpLmFkZENsYXNzKCdvLXNlYXJjaC1mYWxzZScpO1xyXG4gICAgJCgnI28tc2VhcmNoIC5vLXNlYXJjaC1maWVsZC50dC1pbnB1dCcpLnZhbCgnJyk7XHJcbiAgICAkKCcjby1zZWFyY2gtYnV0dG9uJykuYmx1cigpO1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93T3ZlcmxheShkYXRhLCBjb29yZCkge1xyXG4gIHZhciBwb3B1cDtcclxuICB2YXIgY29udGVudDtcclxuICBmZWF0dXJlSW5mby5jbGVhcigpO1xyXG4gIGNsZWFyKCk7XHJcbiAgcG9wdXAgPSBQb3B1cCgnI28tbWFwJyk7XHJcbiAgb3ZlcmxheSA9IG5ldyBvbC5PdmVybGF5KHtcclxuICAgIGVsZW1lbnQ6IHBvcHVwLmdldEVsKClcclxuICB9KTtcclxuXHJcbiAgbWFwLmFkZE92ZXJsYXkob3ZlcmxheSk7XHJcblxyXG4gIG92ZXJsYXkuc2V0UG9zaXRpb24oY29vcmQpO1xyXG4gIGNvbnRlbnQgPSBkYXRhW25hbWVdO1xyXG4gIHBvcHVwLnNldENvbnRlbnQoe1xyXG4gICAgY29udGVudDogY29udGVudCxcclxuICAgIHRpdGxlOiB0aXRsZVxyXG4gIH0pO1xyXG4gIHBvcHVwLnNldFZpc2liaWxpdHkodHJ1ZSk7XHJcbiAgbWFwVXRpbHMuem9vbVRvRXhlbnQobmV3IG9sLmdlb20uUG9pbnQoY29vcmQpLCBtYXhab29tTGV2ZWwpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93RmVhdHVyZUluZm8oZmVhdHVyZXMsIHRpdGxlLCBjb250ZW50KSB7XHJcbiAgdmFyIG9iaiA9IHt9O1xyXG4gIG9iai5mZWF0dXJlID0gZmVhdHVyZXNbMF07XHJcbiAgb2JqLnRpdGxlID0gdGl0bGU7XHJcbiAgb2JqLmNvbnRlbnQgPSBjb250ZW50O1xyXG4gIGZlYXR1cmVJbmZvLmlkZW50aWZ5KFtvYmpdLCAnb3ZlcmxheScsIGdldENlbnRlcihmZWF0dXJlc1swXS5nZXRHZW9tZXRyeSgpKSk7XHJcbiAgbWFwVXRpbHMuem9vbVRvRXhlbnQoZmVhdHVyZXNbMF0uZ2V0R2VvbWV0cnkoKSwgbWF4Wm9vbUxldmVsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xlYXIoKSB7XHJcbiAgVmlld2VyLnJlbW92ZU92ZXJsYXlzKG92ZXJsYXkpO1xyXG59XHJcblxyXG4vKiogVGhlcmUgYXJlIHNldmVyYWwgZGlmZmVyZW50IHdheXMgdG8gaGFuZGxlIHNlbGVjdGVkIHNlYXJjaCByZXN1bHQuXHJcbiAqIE9wdGlvbiAxLiBGZWF0dXJlIGluZm8gaXMgcmVxdWVzdGVkIGZyb20gYSBtYXAgc2VydmljZS5cclxuICogSW4gdGhpcyBjYXNlIGlkQXR0cmlidXRlIGFuZCBsYXllck5hbWVBdHRyaWJ1dGUgbXVzdCBiZSBwcm92aWRlZC5cclxuICogQSBtYXAgc2VydmljZSBpcyB1c2VkIHRvIGdldCB0aGUgZ2VvbWV0cnkgYW5kIGF0dHJpYnV0ZXMuIFRoZSBsYXllciBpcyBkZWZpbmVkXHJcbiAqIGFzIGFuIG9yZGluYXJ5IGxheWVyIGluIHRoZSBsYXllciBjb25maWcgc2VjdGlvbi5cclxuICogT3B0aW9uIDIuIFNhbWUgYXMgb3B0aW9uIDEgYnV0IGZvciBzaW5nbGUgbGF5ZXIgc2VhcmNoLiBsYXllck5hbWUgaXMgZGVmaW5lZFxyXG4gKiBhcyBhbiBvcHRpb24gYW5kIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgc2VhcmNoIHJlc3BvbnNlLlxyXG4gKiBJbiB0aGlzIGNhc2UgZ2VvbWV0cnlBdHRyaWJ1dGUgYW5kIGxheWVyTmFtZSBtdXN0IGJlIHByb3ZpZGVkLlxyXG4gKiBPcHRpb24gMy4gQ29tcGxldGUgZmVhdHVyZSBpbmZvIGlzIGluY2x1ZGVkIGluIHRoZSBzZWFyY2ggcmVzdWx0LlxyXG4gKiBJbiB0aGlzIGNhc2UgdGl0bGVBdHRyaWJ1dGUsIGNvbnRlbnRBdHRyaWJ1dGUgYW5kIGdlb21ldHJ5QXR0cmlidXRlIG11c3QgYmUgcHJvdmlkZWQuXHJcbiAqIE9wdGlvbiA0LiBUaGlzIGlzIGEgc2luZ2xlIHRhYmxlIHNlYXJjaC4gTm8gbGF5ZXIgaXMgZGVmaW5lZC5cclxuICogSW4gdGhpcyBjYXNlIGdlb21ldHJ5QXR0cmlidXRlIGFuZCB0aXRsZSBtdXN0IGJlIGRlZmluZWQuXHJcbiAqIE9wdGlvbiA1LiBGZWF0dXJlIGluZm8gaXMgc2hvd24gd2l0aG91dCBzZWxlY3Rpb24gaW4gdGhlIG1hcC5cclxuICogVGhpcyBpcyBhIHNpbXBsZSBzaW5nbGUgdGFibGUgc2VhcmNoLiBJbiB0aGlzIGNhc2UgdGl0bGUsIG5vcnRoaW5nIGFuZCBlYXN0aW5nXHJcbiAqIG11c3QgYmUgZGVmaW5lZC4gKi9cclxuXHJcbmZ1bmN0aW9uIHNlbGVjdEhhbmRsZXIoZXZ0LCBkYXRhKSB7XHJcbiAgdmFyIGxheWVyO1xyXG4gIHZhciBpZDtcclxuICB2YXIgZmVhdHVyZTtcclxuICB2YXIgY29udGVudDtcclxuICB2YXIgY29vcmQ7XHJcbiAgaWYgKGxheWVyTmFtZUF0dHJpYnV0ZSAmJiBpZEF0dHJpYnV0ZSkge1xyXG4gICAgbGF5ZXIgPSBWaWV3ZXIuZ2V0TGF5ZXIoZGF0YVtsYXllck5hbWVBdHRyaWJ1dGVdKTtcclxuICAgIGlkID0gZGF0YVtpZEF0dHJpYnV0ZV07XHJcbiAgICBnZXRGZWF0dXJlKGlkLCBsYXllcilcclxuICAgICAgLmRvbmUoZnVuY3Rpb24ocmVzKSB7XHJcbiAgICAgICAgdmFyIGZlYXR1cmVXa3Q7XHJcbiAgICAgICAgdmFyIGNvb3JkV2t0O1xyXG4gICAgICAgIGlmIChyZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgc2hvd0ZlYXR1cmVJbmZvKHJlcywgbGF5ZXIuZ2V0KCd0aXRsZScpLCBnZXRBdHRyaWJ1dGVzKHJlc1swXSwgbGF5ZXIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEZhbGxiYWNrIGlmIG5vIGdlb21ldHJ5IGluIHJlc3BvbnNlXHJcbiAgICAgICAgZWxzZSBpZiAoZ2VvbWV0cnlBdHRyaWJ1dGUpIHtcclxuICAgICAgICAgIGZlYXR1cmVXa3QgPSB3a3RUb0ZlYXR1cmUoZGF0YVtnZW9tZXRyeUF0dHJpYnV0ZV0sIHByb2plY3Rpb25Db2RlKTtcclxuICAgICAgICAgIGNvb3JkV2t0ID0gZmVhdHVyZVdrdC5nZXRHZW9tZXRyeSgpLmdldENvb3JkaW5hdGVzKCk7XHJcbiAgICAgICAgICBzaG93T3ZlcmxheShkYXRhLCBjb29yZFdrdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICB9IGVsc2UgaWYgKGdlb21ldHJ5QXR0cmlidXRlICYmIGxheWVyTmFtZSkge1xyXG4gICAgZmVhdHVyZSA9IHdrdFRvRmVhdHVyZShkYXRhW2dlb21ldHJ5QXR0cmlidXRlXSwgcHJvamVjdGlvbkNvZGUpO1xyXG4gICAgbGF5ZXIgPSBWaWV3ZXIuZ2V0TGF5ZXIoZGF0YVtsYXllck5hbWVdKTtcclxuICAgIHNob3dGZWF0dXJlSW5mbyhbZmVhdHVyZV0sIGxheWVyLmdldCgndGl0bGUnKSwgZ2V0QXR0cmlidXRlcyhmZWF0dXJlLCBsYXllcikpO1xyXG4gIH0gZWxzZSBpZiAodGl0bGVBdHRyaWJ1dGUgJiYgY29udGVudEF0dHJpYnV0ZSAmJiBnZW9tZXRyeUF0dHJpYnV0ZSkge1xyXG4gICAgZmVhdHVyZSA9IHdrdFRvRmVhdHVyZShkYXRhW2dlb21ldHJ5QXR0cmlidXRlXSwgcHJvamVjdGlvbkNvZGUpO1xyXG5cclxuICAgIC8vIE1ha2Ugc3VyZSB0aGUgcmVzcG9uc2UgaXMgd3JhcHBlZCBpbiBhIGh0bWwgZWxlbWVudFxyXG4gICAgY29udGVudCA9IHV0aWxzLmNyZWF0ZUVsZW1lbnQoJ2RpdicsIGRhdGFbY29udGVudEF0dHJpYnV0ZV0pO1xyXG4gICAgc2hvd0ZlYXR1cmVJbmZvKFtmZWF0dXJlXSwgZGF0YVt0aXRsZUF0dHJpYnV0ZV0sIGNvbnRlbnQpO1xyXG4gIH0gZWxzZSBpZiAoZ2VvbWV0cnlBdHRyaWJ1dGUgJiYgdGl0bGUpIHtcclxuICAgIGZlYXR1cmUgPSB3a3RUb0ZlYXR1cmUoZGF0YVtnZW9tZXRyeUF0dHJpYnV0ZV0sIHByb2plY3Rpb25Db2RlKTtcclxuICAgIGNvbnRlbnQgPSB1dGlscy5jcmVhdGVFbGVtZW50KCdkaXYnLCBkYXRhW25hbWVdKTtcclxuICAgIHNob3dGZWF0dXJlSW5mbyhbZmVhdHVyZV0sIHRpdGxlLCBjb250ZW50KTtcclxuICB9IGVsc2UgaWYgKGVhc3RpbmcgJiYgbm9ydGhpbmcgJiYgdGl0bGUpIHtcclxuICAgIGNvb3JkID0gW2RhdGFbZWFzdGluZ10sIGRhdGFbbm9ydGhpbmddXTtcclxuICAgIHNob3dPdmVybGF5KGRhdGEsIGNvb3JkKTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29uc29sZS5sb2coJ1NlYXJjaCBvcHRpb25zIGFyZSBtaXNzaW5nJyk7XHJcbiAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gaW5pdDtcclxuIiwiLypyZXF1aXJlcyBNb2RhbC5qcyovXHJcblwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciBtb2RhbCA9IHJlcXVpcmUoJy4vbW9kYWwnKTtcclxudmFyIG1hcG1lbnUgPSByZXF1aXJlKCcuL21hcG1lbnUnKTtcclxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi91dGlscycpO1xyXG52YXIgcGVybWFsaW5rID0gcmVxdWlyZSgnLi9wZXJtYWxpbmsvcGVybWFsaW5rJyk7XHJcblxyXG52YXIgc2hhcmVCdXR0b247XHJcblxyXG5mdW5jdGlvbiBpbml0KCl7XHJcbiAgICB2YXIgZWwgPSB1dGlscy5jcmVhdGVMaXN0QnV0dG9uKHtcclxuICAgICAgICBpZDogJ28tc2hhcmUnLFxyXG4gICAgICAgIGljb25DbHM6ICdvLWljb24tZmEtc2hhcmUtc3F1YXJlLW8nLFxyXG4gICAgICAgIHNyYzogJyNmYS1zaGFyZS1zcXVhcmUtbycsXHJcbiAgICAgICAgdGV4dDogJ0RlbGEga2FydGEnXHJcbiAgICB9KTtcclxuICAgICQoJyNvLW1lbnV0b29scycpLmFwcGVuZChlbCk7XHJcbiAgICBzaGFyZUJ1dHRvbiA9ICQoJyNvLXNoYXJlLWJ1dHRvbicpO1xyXG4gICAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgICBzaGFyZUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgbW9kYWwuY3JlYXRlTW9kYWwoJyNvLW1hcCcsIHt0aXRsZTogJ0zDpG5rIHRpbGwga2FydGEnLCBjb250ZW50OiBjcmVhdGVDb250ZW50KCl9KTtcclxuICAgICAgICBtb2RhbC5zaG93TW9kYWwoKTtcclxuICAgICAgICBjcmVhdGVMaW5rKCk7IC8vQWRkIGxpbmsgdG8gaW5wdXRcclxuICAgICAgICBtYXBtZW51LnRvZ2dsZU1lbnUoKTtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVDb250ZW50KCkge1xyXG4gICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwiby1zaGFyZS1saW5rXCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCI+PC9kaXY+JyArXHJcbiAgICAgICAgICAgJzxpPktvcGllcmEgb2NoIGtsaXN0cmEgaW4gbMOkbmtlbiBmw7ZyIGF0dCBkZWxhIGthcnRhbi48L2k+JztcclxufVxyXG5mdW5jdGlvbiBjcmVhdGVMaW5rKCkge1xyXG4gICAgdmFyIHVybCA9IHBlcm1hbGluay5nZXRQZXJtYWxpbmsoKTtcclxuICAgICQoJy5vLXNoYXJlLWxpbmsgaW5wdXQnKS52YWwodXJsKS5zZWxlY3QoKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxuXHJcbnZhciBzaWRlYmFyO1xyXG5cclxuZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgIHZhciBlbCA9ICc8ZGl2IGlkPVwiby1zaWRlYmFyXCI+JyArXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm8tc2lkZWJhciBvLWNhcmRcIj4nICtcclxuICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWNsb3NlLWJ1dHRvblwiPjxzdmcgY2xhc3M9XCJvLWljb24tZmEtdGltZXNcIj48dXNlIHhsaW5rOmhyZWY9XCIjZmEtdGltZXNcIj48L3VzZT48L3N2Zz48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWNhcmQtdGl0bGVcIj48L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJvLWNhcmQtY29udGVudFwiPjwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgJCgnI28tbWFwJykuYXBwZW5kKGVsKTtcclxuICAgIHNpZGViYXIgPSAkKCcjby1zaWRlYmFyJyk7XHJcblxyXG4gICAgYmluZFVJQWN0aW9ucygpO1xyXG59XHJcbmZ1bmN0aW9uIGJpbmRVSUFjdGlvbnMoKSB7XHJcbiAgICAkKCcjby1zaWRlYmFyIC5vLXNpZGViYXIgLm8tY2xvc2UtYnV0dG9uJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZ0KSB7XHJcbiAgICAgICAgY2xvc2VTaWRlYmFyKCk7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBzZXRWaXNpYmlsaXR5KHZpc2libGUpIHtcclxuICAgIHZpc2libGUgPT0gdHJ1ZSA/ICQoJyNvLXNpZGViYXInKS5hZGRDbGFzcygnby1zaWRlYmFyLXNob3cnKSA6ICQoJyNvLXNpZGViYXInKS5yZW1vdmVDbGFzcygnby1zaWRlYmFyLXNob3cnKTtcclxufVxyXG5mdW5jdGlvbiBzZXRUaXRsZSh0aXRsZSkge1xyXG4gICAgJCgnI28tc2lkZWJhciAuby1jYXJkLXRpdGxlJykuaHRtbCh0aXRsZSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0Q29udGVudChjb25maWcpIHtcclxuICAgIGNvbmZpZy50aXRsZSA/ICQoJyNvLXNpZGViYXIgLm8tc2lkZWJhciAuby1jYXJkLXRpdGxlJykuaHRtbChjb25maWcudGl0bGUpOiAkKCcjby1zaWRlYmFyIC5vLXNpZGViYXIgLm8tY2FyZC10aXRsZScpLmh0bWwoJycpO1xyXG4gICAgY29uZmlnLmNvbnRlbnQgPyAkKCcjby1zaWRlYmFyIC5vLXNpZGViYXIgLm8tY2FyZC1jb250ZW50JykuaHRtbChjb25maWcuY29udGVudCk6ICQoJyNvLXNpZGViYXIgLm8tc2lkZWJhciAuby1jYXJkLWNvbnRlbnQnKS5odG1sKCcnKTtcclxufVxyXG5mdW5jdGlvbiBjbG9zZVNpZGViYXIoKSB7XHJcbiAgICBzZXRWaXNpYmlsaXR5KGZhbHNlKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbm1vZHVsZS5leHBvcnRzLnNldFZpc2liaWxpdHkgPSBzZXRWaXNpYmlsaXR5O1xyXG5tb2R1bGUuZXhwb3J0cy5zZXRUaXRsZSA9IHNldFRpdGxlO1xyXG5tb2R1bGUuZXhwb3J0cy5zZXRDb250ZW50ID0gc2V0Q29udGVudDtcclxubW9kdWxlLmV4cG9ydHMuY2xvc2VTaWRlYmFyID0gY2xvc2VTaWRlYmFyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBNb2RhbCA9IHJlcXVpcmUoJy4vbW9kYWwnKTtcclxudmFyIHZpZXdlciA9IHJlcXVpcmUoJy4vdmlld2VyJyk7XHJcblxyXG52YXIgZGVmYXVsdFRpdGxlID0gJ09tIGthcnRhbic7XHJcbnZhciBkZWZhdWx0Q29udGVudCA9ICc8cD48L3A+JztcclxudmFyIGNscyA9ICdvLXNwbGFzaCc7XHJcbnZhciB0aXRsZTtcclxudmFyIGNvbnRlbnQ7XHJcblxyXG5mdW5jdGlvbiBpbml0KG9wdF9vcHRpb25zKSB7XHJcbiAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICB2YXIgdXJsO1xyXG4gIHRpdGxlID0gb3B0aW9ucy50aXRsZSB8fCBkZWZhdWx0VGl0bGU7XHJcbiAgaWYgKG9wdGlvbnMudXJsKSB7XHJcbiAgICB1cmwgPSB2aWV3ZXIuZ2V0QmFzZVVybCgpICsgb3B0aW9ucy51cmw7XHJcbiAgICBnZXRDb250ZW50KHVybClcclxuICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGNvbnRlbnQgPSBkYXRhO1xyXG4gICAgICAgIG9wZW5Nb2RhbCgpO1xyXG4gICAgICB9KTtcclxuICB9IGVsc2Uge1xyXG4gICAgY29udGVudCA9IG9wdGlvbnMuY29udGVudCB8fCBkZWZhdWx0Q29udGVudDtcclxuICAgIG9wZW5Nb2RhbCgpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29udGVudCh1cmwpIHtcclxuICByZXR1cm4gJC5nZXQodXJsKTtcclxufVxyXG5cclxuZnVuY3Rpb24gb3Blbk1vZGFsKCkge1xyXG4gIE1vZGFsLmNyZWF0ZU1vZGFsKCcjby1tYXAnLCB7XHJcbiAgICB0aXRsZTogdGl0bGUsXHJcbiAgICBjb250ZW50OiBjb250ZW50LFxyXG4gICAgY2xzOiBjbHNcclxuICB9KTtcclxuICBNb2RhbC5zaG93TW9kYWwoKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IGluaXQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIG9sID0gcmVxdWlyZSgnb3BlbmxheWVycycpO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgVmlld2VyID0gcmVxdWlyZSgnLi92aWV3ZXInKTtcclxudmFyIHZhbGlkYXRlVXJsID0gcmVxdWlyZSgnLi91dGlscy92YWxpZGF0ZXVybCcpO1xyXG52YXIgcmVwbGFjZXIgPSByZXF1aXJlKCcuLi9zcmMvdXRpbHMvcmVwbGFjZXInKTtcclxuXHJcbnZhciBiYXNlVXJsO1xyXG5cclxudmFyIHdoaXRlID0gWzI1NSwgMjU1LCAyNTUsIDFdO1xyXG52YXIgYmx1ZSA9IFswLCAxNTMsIDI1NSwgMV07XHJcbnZhciB3aWR0aCA9IDM7XHJcblxyXG4vL2RlZmF1bHQgZWRpdCBzdHlsZSBvcHRpb25zXHJcbnZhciBlZGl0U3R5bGVPcHRpb25zID0ge1xyXG4gICAgJ1BvaW50JzogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgXCJjaXJjbGVcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJyYWRpdXNcIjogMSxcclxuICAgICAgICAgICAgICAgIFwic3Ryb2tlXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IGJsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJ3aWR0aFwiOiAwXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXCJmaWxsXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICBcImNvbG9yXCI6IGJsdWVcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIF0sXHJcbiAgICAnTGluZVN0cmluZyc6IFtcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGUsXHJcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGggKyAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgJ3N0cm9rZSc6IHtcclxuICAgICAgICAgICAgICAgIGNvbG9yOiBibHVlLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICBdLFxyXG4gICAgJ1BvbHlnb24nOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAnc3Ryb2tlJzoge1xyXG4gICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlLFxyXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoICsgMlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgICAgICAgICBjb2xvcjogYmx1ZSxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgXVxyXG59O1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGluaXQ6IEluaXQsXHJcbiAgICAgICAgY3JlYXRlU3R5bGVPcHRpb25zOiBjcmVhdGVTdHlsZU9wdGlvbnMsXHJcbiAgICAgICAgY3JlYXRlU3R5bGVMaXN0OiBjcmVhdGVTdHlsZUxpc3QsXHJcbiAgICAgICAgY3JlYXRlU3R5bGVSdWxlOiBjcmVhdGVTdHlsZVJ1bGUsXHJcbiAgICAgICAgY3JlYXRlU3R5bGU6IGNyZWF0ZVN0eWxlLFxyXG4gICAgICAgIHN0eWxlRnVuY3Rpb246IHN0eWxlRnVuY3Rpb24sXHJcbiAgICAgICAgY3JlYXRlRWRpdFN0eWxlOiBjcmVhdGVFZGl0U3R5bGVcclxuICAgIH1cclxufTtcclxuXHJcbmZ1bmN0aW9uIEluaXQoKSB7XHJcbiAgYmFzZVVybCA9IFZpZXdlci5nZXRCYXNlVXJsKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlT3B0aW9ucyhzdHlsZVBhcmFtcykge1xyXG4gICAgdmFyIHN0eWxlT3B0aW9ucyA9IHt9O1xyXG4gICAgaWYoc3R5bGVQYXJhbXMuaGFzT3duUHJvcGVydHkoJ2dlb21ldHJ5JykpIHtcclxuICAgICAgICBzd2l0Y2ggKHN0eWxlUGFyYW1zLmdlb21ldHJ5KSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NlbnRlclBvaW50JzpcclxuICAgICAgICAgICAgICAgIHN0eWxlT3B0aW9ucy5nZW9tZXRyeSA9IGZ1bmN0aW9uKGZlYXR1cmUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgY29vcmRpbmF0ZXMgPSBmZWF0dXJlLmdldEdlb21ldHJ5KCkuZ2V0SW50ZXJpb3JQb2ludHMoKS5nZXRGaXJzdENvb3JkaW5hdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IG9sLmdlb20uUG9pbnQoY29vcmRpbmF0ZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdlbmRQb2ludCc6XHJcbiAgICAgICAgICAgICAgICBzdHlsZU9wdGlvbnMuZ2VvbWV0cnkgPSBmdW5jdGlvbihmZWF0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvb3JkaW5hdGVzID0gZmVhdHVyZS5nZXRHZW9tZXRyeSgpLmdldExhc3RDb29yZGluYXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBvbC5nZW9tLlBvaW50KGNvb3JkaW5hdGVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYoc3R5bGVQYXJhbXMuaGFzT3duUHJvcGVydHkoJ3pJbmRleCcpKSB7XHJcbiAgICAgICAgc3R5bGVPcHRpb25zLnpJbmRleCA9IHN0eWxlUGFyYW1zLnpJbmRleDtcclxuICAgIH1cclxuICAgIGlmKHN0eWxlUGFyYW1zLmhhc093blByb3BlcnR5KCdmaWxsJykpIHtcclxuICAgICAgICBzdHlsZU9wdGlvbnMuZmlsbCA9IG5ldyBvbC5zdHlsZS5GaWxsKHN0eWxlUGFyYW1zLmZpbGwpO1xyXG4gICAgfVxyXG4gICAgaWYoc3R5bGVQYXJhbXMuaGFzT3duUHJvcGVydHkoJ3N0cm9rZScpKSB7XHJcbiAgICAgICAgc3R5bGVPcHRpb25zLnN0cm9rZSA9IG5ldyBvbC5zdHlsZS5TdHJva2Uoc3R5bGVQYXJhbXMuc3Ryb2tlKTtcclxuICAgIH1cclxuICAgIGlmKHN0eWxlUGFyYW1zLmhhc093blByb3BlcnR5KCd0ZXh0JykpIHtcclxuICAgICAgICBzdHlsZU9wdGlvbnMudGV4dCA9IG5ldyBvbC5zdHlsZS5UZXh0KHN0eWxlUGFyYW1zLnRleHQpO1xyXG4gICAgICAgIGlmKHN0eWxlUGFyYW1zLnRleHQuaGFzT3duUHJvcGVydHkoJ2ZpbGwnKSkge1xyXG4gICAgICAgICAgICBzdHlsZU9wdGlvbnMudGV4dC5zZXRGaWxsKG5ldyBvbC5zdHlsZS5GaWxsKHN0eWxlUGFyYW1zLnRleHQuZmlsbCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihzdHlsZVBhcmFtcy50ZXh0Lmhhc093blByb3BlcnR5KCdzdHJva2UnKSkge1xyXG4gICAgICAgICAgICBzdHlsZU9wdGlvbnMudGV4dC5zZXRTdHJva2UobmV3IG9sLnN0eWxlLlN0cm9rZShzdHlsZVBhcmFtcy50ZXh0LnN0cm9rZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKHN0eWxlUGFyYW1zLmhhc093blByb3BlcnR5KCdpY29uJykpIHtcclxuICAgICAgICBpZiAoc3R5bGVQYXJhbXMuaWNvbi5oYXNPd25Qcm9wZXJ0eSgnc3JjJykpIHtcclxuICAgICAgICAgIHN0eWxlUGFyYW1zLmljb24uc3JjID0gdmFsaWRhdGVVcmwoc3R5bGVQYXJhbXMuaWNvbi5zcmMsIGJhc2VVcmwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdHlsZU9wdGlvbnMuaW1hZ2UgPSBuZXcgb2wuc3R5bGUuSWNvbihzdHlsZVBhcmFtcy5pY29uKTtcclxuICAgIH1cclxuICAgIGlmKHN0eWxlUGFyYW1zLmhhc093blByb3BlcnR5KCdjaXJjbGUnKSkge1xyXG4gICAgICAgIHN0eWxlT3B0aW9ucy5pbWFnZSA9IG5ldyBvbC5zdHlsZS5DaXJjbGUoe1xyXG4gICAgICAgICAgICByYWRpdXM6IHN0eWxlUGFyYW1zLmNpcmNsZS5yYWRpdXMsXHJcbiAgICAgICAgICAgIGZpbGw6IG5ldyBvbC5zdHlsZS5GaWxsKHN0eWxlUGFyYW1zLmNpcmNsZS5maWxsKSB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHN0cm9rZTogbmV3IG9sLnN0eWxlLlN0cm9rZShzdHlsZVBhcmFtcy5jaXJjbGUuc3Ryb2tlKSB8fCB1bmRlZmluZWRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdHlsZU9wdGlvbnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlTGlzdChzdHlsZU9wdGlvbnMpIHtcclxuICAgIHZhciBzdHlsZUxpc3Q9W107XHJcbiAgICAvL0NyZWF0ZSBzdHlsZSBmb3IgZWFjaCBydWxlXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0eWxlT3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZhciBzdHlsZVJ1bGUgPSBbXTtcclxuICAgICAgICB2YXIgc3R5bGVPcHRpb247XHJcbiAgICAgICAgLy9DaGVjayBpZiBydWxlIGlzIGFycmF5LCBpZSBtdWx0aXBsZSBzdHlsZXMgZm9yIHRoZSBydWxlXHJcbiAgICAgICAgaWYoc3R5bGVPcHRpb25zW2ldLmNvbnN0cnVjdG9yID09PSBBcnJheSkge1xyXG4gICAgICAgICAgICBmb3IodmFyIGo9MDsgaiA8IHN0eWxlT3B0aW9uc1tpXS5sZW5ndGg7IGorKykge1xyXG4gICAgICAgICAgICAgICAgc3R5bGVPcHRpb24gPSBjcmVhdGVTdHlsZU9wdGlvbnMoc3R5bGVPcHRpb25zW2ldW2pdKTtcclxuICAgICAgICAgICAgICAgIHN0eWxlUnVsZS5wdXNoKG5ldyBvbC5zdHlsZS5TdHlsZShzdHlsZU9wdGlvbikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vSWYgc2luZ2xlIHN0eWxlIGZvciBydWxlXHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHN0eWxlT3B0aW9uID0gY3JlYXRlU3R5bGVPcHRpb25zKHN0eWxlT3B0aW9uc1tpXSk7XHJcbiAgICAgICAgICAgIHN0eWxlUnVsZSA9IFtuZXcgb2wuc3R5bGUuU3R5bGUoc3R5bGVPcHRpb24pXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHN0eWxlTGlzdC5wdXNoKHN0eWxlUnVsZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc3R5bGVMaXN0O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVTdHlsZShzdHlsZU5hbWUsIGNsdXN0ZXJTdHlsZU5hbWUpIHtcclxuICAgICAgdmFyIHN0eWxlU2V0dGluZ3MgPSBWaWV3ZXIuZ2V0U3R5bGVTZXR0aW5ncygpW3N0eWxlTmFtZV07XHJcbiAgICAgIGlmKCQuaXNFbXB0eU9iamVjdChzdHlsZVNldHRpbmdzKSkge1xyXG4gICAgICAgICAgYWxlcnQoJ1N0eWxlICcgKyBzdHlsZU5hbWUgKyAnIGlzIG5vdCBkZWZpbmVkJyk7XHJcbiAgICAgIH1cclxuICAgICAgdmFyIGNsdXN0ZXJTdHlsZVNldHRpbmdzID0gVmlld2VyLmdldFN0eWxlU2V0dGluZ3MoKVtjbHVzdGVyU3R5bGVOYW1lXTtcclxuICAgICAgdmFyIHN0eWxlID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIC8vQ3JlYXRlIHN0eWxlIGZvciBlYWNoIHJ1bGVcclxuICAgICAgICB2YXIgc3R5bGVMaXN0ID0gY3JlYXRlU3R5bGVMaXN0KHN0eWxlU2V0dGluZ3MpO1xyXG4gICAgICAgIGlmKGNsdXN0ZXJTdHlsZVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHZhciBjbHVzdGVyU3R5bGVMaXN0ID0gY3JlYXRlU3R5bGVMaXN0KGNsdXN0ZXJTdHlsZVNldHRpbmdzKTtcclxuICAgICAgICAgICAgcmV0dXJuIHN0eWxlRnVuY3Rpb24oc3R5bGVTZXR0aW5ncywgc3R5bGVMaXN0LCBjbHVzdGVyU3R5bGVTZXR0aW5ncywgY2x1c3RlclN0eWxlTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc3R5bGVGdW5jdGlvbihzdHlsZVNldHRpbmdzLHN0eWxlTGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSkoKVxyXG4gICAgICByZXR1cm4gc3R5bGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlUnVsZShvcHRpb25zKSB7XHJcbiAgICB2YXIgc3R5bGVSdWxlID0gW10sXHJcbiAgICBzdHlsZU9wdGlvbjtcclxuICAgIGlmKG9wdGlvbnMuY29uc3RydWN0b3IgPT09IEFycmF5KSB7XHJcbiAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBvcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBzdHlsZU9wdGlvbiA9IGNyZWF0ZVN0eWxlT3B0aW9ucyhvcHRpb25zW2ldKTtcclxuICAgICAgICAgICAgc3R5bGVSdWxlLnB1c2gobmV3IG9sLnN0eWxlLlN0eWxlKHN0eWxlT3B0aW9uKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy9JZiBzaW5nbGUgc3R5bGUgZm9yIHJ1bGVcclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHN0eWxlT3B0aW9uID0gY3JlYXRlU3R5bGVPcHRpb25zKG9wdGlvbnMpO1xyXG4gICAgICAgIHN0eWxlUnVsZSA9IFtuZXcgb2wuc3R5bGUuU3R5bGUoc3R5bGVPcHRpb24pXTtcclxuICAgIH1cclxuICAgIHJldHVybiBzdHlsZVJ1bGU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHN0eWxlRnVuY3Rpb24oc3R5bGVTZXR0aW5ncywgc3R5bGVMaXN0LCBjbHVzdGVyU3R5bGVTZXR0aW5ncywgY2x1c3RlclN0eWxlTGlzdCkge1xyXG4gICAgdmFyIHMgPSBzdHlsZVNldHRpbmdzO1xyXG4gICAgdmFyIHJlc29sdXRpb25zID0gVmlld2VyLmdldFJlc29sdXRpb25zKCk7XHJcbiAgICB2YXIgZm4gPSBmdW5jdGlvbihmZWF0dXJlLHJlc29sdXRpb24pIHtcclxuICAgICAgICB2YXIgc2NhbGUgPSBWaWV3ZXIuZ2V0U2NhbGUocmVzb2x1dGlvbik7XHJcbiAgICAgICAgdmFyIHN0eWxlTDtcclxuICAgICAgICAvL0lmIHNpemUgaXMgbGFyZ2VyIHRoYW4sIGl0IGlzIGEgY2x1c3RlclxyXG4gICAgICAgIHZhciBzaXplID0gY2x1c3RlclN0eWxlTGlzdCA/IGZlYXR1cmUuZ2V0KCdmZWF0dXJlcycpLmxlbmd0aCA6IDE7XHJcbiAgICAgICAgaWYoc2l6ZSA+IDEgJiYgcmVzb2x1dGlvbiE9IHJlc29sdXRpb25zW3Jlc29sdXRpb25zLmxlbmd0aCsxXSkge1xyXG4gICAgICAgICAgICBzdHlsZUwgPSBjaGVja09wdGlvbnMoZmVhdHVyZSwgc2NhbGUsIGNsdXN0ZXJTdHlsZVNldHRpbmdzLCBjbHVzdGVyU3R5bGVMaXN0LCBzaXplLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAvLyBjbHVzdGVyU3R5bGVMaXN0WzBdLnNldFRleHQoc2l6ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBzdHlsZUwgPSBjaGVja09wdGlvbnMoZmVhdHVyZSwgc2NhbGUsIHN0eWxlU2V0dGluZ3MsIHN0eWxlTGlzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzdHlsZUw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZm47XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUVkaXRTdHlsZSgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgJ1BvaW50JzogY3JlYXRlU3R5bGVSdWxlKGVkaXRTdHlsZU9wdGlvbnNbJ1BvaW50J10pLFxyXG4gICAgICAgICdNdWx0aVBvaW50JzogY3JlYXRlU3R5bGVSdWxlKGVkaXRTdHlsZU9wdGlvbnNbJ1BvaW50J10pLFxyXG4gICAgICAgICdMaW5lU3RyaW5nJzogY3JlYXRlU3R5bGVSdWxlKGVkaXRTdHlsZU9wdGlvbnNbJ0xpbmVTdHJpbmcnXSksXHJcbiAgICAgICAgJ011bHRpTGluZVN0cmluZyc6IGNyZWF0ZVN0eWxlUnVsZShlZGl0U3R5bGVPcHRpb25zWydMaW5lU3RyaW5nJ10pLFxyXG4gICAgICAgICdQb2x5Z29uJzogY3JlYXRlU3R5bGVSdWxlKGVkaXRTdHlsZU9wdGlvbnNbJ1BvbHlnb24nXSksXHJcbiAgICAgICAgJ011bHRpUG9seWdvbic6IGNyZWF0ZVN0eWxlUnVsZShlZGl0U3R5bGVPcHRpb25zWydQb2x5Z29uJ10pXHJcbiAgICB9O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja09wdGlvbnMoZmVhdHVyZSwgc2NhbGUsIHN0eWxlU2V0dGluZ3MsIHN0eWxlTGlzdCwgc2l6ZSkge1xyXG4gICAgdmFyIHMgPSBzdHlsZVNldHRpbmdzO1xyXG4gICAgZm9yICh2YXIgaj0wOyBqPHMubGVuZ3RoOyBqKyspIHtcclxuICAgICAgdmFyIHN0eWxlTDtcclxuICAgICAgaWYoVmlld2VyLmNoZWNrU2NhbGUoc2NhbGUsIHNbal1bMF0ubWF4U2NhbGUsIHNbal1bMF0ubWluU2NhbGUpKSB7XHJcbiAgICAgICAgc1tqXS5zb21lKGZ1bmN0aW9uKGVsZW1lbnQsIGluZGV4LCBhcnJheSkge1xyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5oYXNPd25Qcm9wZXJ0eSgndGV4dCcpICYmIHNpemUpIHtcclxuICAgICAgICAgICAgICAgIHN0eWxlTGlzdFtqXVtpbmRleF0uZ2V0VGV4dCgpLnNldFRleHQoc2l6ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5oYXNPd25Qcm9wZXJ0eSgndGV4dCcpKSB7XHJcbiAgICAgICAgICAgICAgc3R5bGVMaXN0W2pdW2luZGV4XS5nZXRUZXh0KCkuc2V0VGV4dChyZXBsYWNlci5yZXBsYWNlKGVsZW1lbnQudGV4dC50ZXh0LCBmZWF0dXJlLmdldFByb3BlcnRpZXMoKSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHNbal1bMF0uaGFzT3duUHJvcGVydHkoJ2ZpbHRlcicpKSB7XHJcbiAgICAgICAgICAvL2ZpbmQgYXR0cmlidXRlIHZhbGUgYmV0d2VlbiBbXSBkZWZpbmVkIGluIHN0eWxlc1xyXG4gICAgICAgICAgdmFyIGZlYXRBdHRyLCBleHByLCBmZWF0TWF0Y2g7XHJcbiAgICAgICAgICB2YXIgbWF0Y2hlcyA9IHNbal1bMF0uZmlsdGVyLm1hdGNoKC9cXFsoLio/KVxcXS8pO1xyXG4gICAgICAgICAgaWYgKG1hdGNoZXMpIHtcclxuICAgICAgICAgICAgICBpZiAoZmVhdHVyZS5nZXQoJ2ZlYXR1cmVzJykpIHtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUgPSBmZWF0dXJlLmdldCgnZmVhdHVyZXMnKVswXTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgZmVhdEF0dHIgPSBtYXRjaGVzWzFdO1xyXG4gICAgICAgICAgICAgIGV4cHIgPSBzW2pdWzBdLmZpbHRlci5zcGxpdCgnXScpWzFdO1xyXG4gICAgICAgICAgICAgIGZlYXRNYXRjaCA9IGZlYXR1cmUuZ2V0KGZlYXRBdHRyKTtcclxuICAgICAgICAgICAgICBleHByID0gdHlwZW9mIGZlYXRNYXRjaCA9PSAnbnVtYmVyJyA/IGZlYXRNYXRjaCArIGV4cHIgOiAnXCInICsgZmVhdE1hdGNoICsgJ1wiJyArIGV4cHIgO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYoZXZhbChleHByKSkge1xyXG4gICAgICAgICAgICBzdHlsZUwgPSBzdHlsZUxpc3Rbal07XHJcbiAgICAgICAgICAgIHJldHVybiBzdHlsZUw7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgc3R5bGVMID0gc3R5bGVMaXN0W2pdO1xyXG4gICAgICAgICAgcmV0dXJuIHN0eWxlTDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBtZWFzdXJlID0ge1xyXG4gIGxpbmVzdHJpbmc6IFtcclxuICAgIHtcclxuICAgICAgJ2dlb21ldHJ5JzogJ2VuZFBvaW50JyxcclxuICAgICAgJ2NpcmNsZSc6IHtcclxuICAgICAgICBmaWxsOiB7XHJcbiAgICAgICAgICBjb2xvcjogWzAsIDE1MywgMjU1LCAxXVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3Ryb2tlOiB7XHJcbiAgICAgICAgICBjb2xvcjogWzAsIDE1MywgMjU1LCAxXSxcclxuICAgICAgICAgIHdpZHRoOiAxXHJcbiAgICAgICAgfSxcclxuICAgICAgICByYWRpdXM6IDNcclxuICAgICAgfSxcclxuICAgICAgJ3RleHQnOiB7XHJcbiAgICAgICAgZm9udDogJ2JvbGQgMTNweCBcIkhlbHZldGljYSBOZXVlXCIsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWYnLFxyXG4gICAgICAgIHRleHRCYXNlbGluZTogJ2JvdHRvbScsXHJcbiAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICBvZmZzZXRZOiAtNCxcclxuICAgICAgICBmaWxsOiB7Y29sb3I6IFswLCAxNTMsIDI1NSwgMV19LFxyXG4gICAgICAgIHN0cm9rZToge2NvbG9yOiBbMjU1LCAyNTUsIDI1NSwgMC44XSwgd2lkdGg6IDR9XHJcbiAgICAgIH1cclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgY29sb3I6IFswLCAxNTMsIDI1NSwgMV0sXHJcbiAgICAgICAgd2lkdGg6IDJcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF0sXHJcbiAgcG9seWdvbjogW1xyXG4gICAge1xyXG4gICAgICAnZmlsbCc6IHtcclxuICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDAuNF1cclxuICAgICAgfSxcclxuICAgICAgJ3N0cm9rZSc6IHtcclxuICAgICAgICBjb2xvcjogWzAsIDE1MywgMjU1LCAxXSxcclxuICAgICAgICB3aWR0aDogMlxyXG4gICAgICB9LFxyXG4gICAgICAndGV4dCc6IHtcclxuICAgICAgICBmb250OiAnYm9sZCAxM3B4IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZicsXHJcbiAgICAgICAgdGV4dEJhc2VsaW5lOiAnbWlkZGxlJyxcclxuICAgICAgICB0ZXh0QWxpZ246ICdjZW50ZXInLFxyXG4gICAgICAgIGZpbGw6IHtjb2xvcjogWzAsIDE1MywgMjU1LCAxXX0sXHJcbiAgICAgICAgc3Ryb2tlOiB7Y29sb3I6IFsyNTUsIDI1NSwgMjU1LCAwLjhdLCB3aWR0aDogNH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIF0sXHJcbiAgaW50ZXJhY3Rpb246IFtcclxuICAgIHtcclxuICAgICAgJ2ZpbGwnOiB7XHJcbiAgICAgICAgY29sb3I6IFsyNTUsIDI1NSwgMjU1LCAwLjJdXHJcbiAgICAgIH0sXHJcbiAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgJ2NvbG9yJzogWzAsIDAsIDAsIDAuNV0sXHJcbiAgICAgICAgJ2xpbmVEYXNoJzogWzEwLCAxMF0sXHJcbiAgICAgICAgJ3dpZHRoJzogMlxyXG4gICAgICB9LFxyXG4gICAgICAnY2lyY2xlJzoge1xyXG4gICAgICAgICdyYWRpdXMnOiA1LFxyXG4gICAgICAgICdzdHJva2UnOiB7XHJcbiAgICAgICAgICAnY29sb3InOiBbMCwgMCwgMCwgMC43XVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ2ZpbGwnOiB7XHJcbiAgICAgICAgICBjb2xvcjogWzI1NSwgMjU1LCAyNTUsIDAuMl1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH1cclxuICBdXHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IG1lYXN1cmU7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHBpbiA9IFtcclxuICAgIHtcclxuICAgICAgJ2ljb24nOiB7XHJcbiAgICAgICAgICBhbmNob3I6IFswLjUsIDMyXSxcclxuICAgICAgICAgIGFuY2hvclhVbml0czogJ2ZyYWN0aW9uJyxcclxuICAgICAgICAgIGFuY2hvcllVbml0czogJ3BpeGVscycsXHJcbiAgICAgICAgICBzcmM6ICdpbWcvcG5nL2Ryb3BfYmx1ZS5wbmcnXHJcbiAgICAgIH1cclxuICAgIH1cclxuXTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gcGluO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBwaW4gPSByZXF1aXJlKCcuL3BpbicpO1xyXG52YXIgbWVhc3VyZSA9IHJlcXVpcmUoJy4vbWVhc3VyZScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgdmFyIHN0eWxlVHlwZXMgPSB7fTtcclxuXHJcbiAgc3R5bGVUeXBlcy5waW4gPSBwaW47XHJcbiAgc3R5bGVUeXBlcy5tZWFzdXJlID0gbWVhc3VyZTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGdldFN0eWxlOiBmdW5jdGlvbiBnZXRTdHlsZSh0eXBlKSB7XHJcbiAgICAgIGlmKHR5cGUpIHtcclxuICAgICAgICByZXR1cm4gc3R5bGVUeXBlc1t0eXBlXTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyh0eXBlICsgJyBpcyBub3QgYSBkZWZhdWx0IHN0eWxlJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbn0oKTtcclxuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnNDb21waWxlciA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFyc0NvbXBpbGVyLnRlbXBsYXRlKHtcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHJldHVybiBcIjxkaXYgaWQ9XFxcIm8tZWRpdG9yLXRvb2xiYXJcXFwiIGNsYXNzPVxcXCJvLWVkaXRvci10b29sYmFyIG8tdG9vbGJhciBvLXRvb2xiYXItaG9yaXpvbnRhbCBvLXBhZGRpbmctaG9yaXpvbnRhbC04IG8tcm91bmRlZC10b3Agby1oaWRkZW5cXFwiPlxcclxcbiAgICA8ZGl2IGlkPVxcXCJvLWVkaXRvci10b29sYmFyLWRyYXd0b29sc1xcXCIgY2xhc3M9XFxcIm8tdG9vbGJhci1ob3Jpem9udGFsXFxcIj5cXHJcXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJvLXBvcG92ZXItY29udGFpbmVyXFxcIj5cXHJcXG4gICAgICAgIDxidXR0b24gaWQ9XFxcIm8tZWRpdG9yLWRyYXdcXFwiIGNsYXNzPVxcXCJvLWJ1dHRvbi1sZ1xcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBuYW1lPVxcXCJidXR0b25cXFwiPlxcclxcbiAgICAgICAgICA8c3ZnIGNsYXNzPVxcXCJvLWljb24tMjRcXFwiPlxcclxcbiAgICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVxcXCIjaWNfbW9kZV9lZGl0XzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgICAgICA8L3N2Zz5cXHJcXG4gICAgICAgIDwvYnV0dG9uPlxcclxcbiAgICAgIDwvZGl2PlxcclxcbiAgICA8L2Rpdj5cXHJcXG4gICAgPGJ1dHRvbiBpZD1cXFwiby1lZGl0b3ItYXR0cmlidXRlXFxcIiBjbGFzcz1cXFwiby1idXR0b24tbGdcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgbmFtZT1cXFwiYnV0dG9uXFxcIj5cXHJcXG4gICAgICA8c3ZnIGNsYXNzPVxcXCJvLWljb24tMjRcXFwiPlxcclxcbiAgICAgICAgICA8dXNlIHhsaW5rOmhyZWY9XFxcIiNpY190aXRsZV8yNHB4XFxcIj48L3VzZT5cXHJcXG4gICAgICA8L3N2Zz5cXHJcXG4gICAgPC9idXR0b24+XFxyXFxuICAgIDxidXR0b24gaWQ9XFxcIm8tZWRpdG9yLWRlbGV0ZVxcXCIgY2xhc3M9XFxcIm8tYnV0dG9uLWxnXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIG5hbWU9XFxcImJ1dHRvblxcXCI+XFxyXFxuICAgICAgPHN2ZyBjbGFzcz1cXFwiby1pY29uLTI0XFxcIj5cXHJcXG4gICAgICAgICAgPHVzZSB4bGluazpocmVmPVxcXCIjaWNfZGVsZXRlXzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgIDwvc3ZnPlxcclxcbiAgICA8L2J1dHRvbj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiby1wb3BvdmVyLWNvbnRhaW5lclxcXCI+XFxyXFxuICAgICAgPGJ1dHRvbiBpZD1cXFwiby1lZGl0b3ItbGF5ZXJzXFxcIiBjbGFzcz1cXFwiby1idXR0b24tbGdcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgbmFtZT1cXFwiYnV0dG9uXFxcIj5cXHJcXG4gICAgICAgIDxzdmcgY2xhc3M9XFxcIm8taWNvbi0yNFxcXCI+XFxyXFxuICAgICAgICAgICAgPHVzZSB4bGluazpocmVmPVxcXCIjaWNfbGF5ZXJzXzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgICAgPC9zdmc+XFxyXFxuICAgICAgPC9idXR0b24+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8YnV0dG9uIGlkPVxcXCJvLWVkaXRvci1zYXZlXFxcIiBjbGFzcz1cXFwiby1idXR0b24tbGcgby1kaXNhYmxlZFxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiBuYW1lPVxcXCJidXR0b25cXFwiPlxcclxcbiAgICAgIDxzdmcgY2xhc3M9XFxcIm8taWNvbi0yNFxcXCI+XFxyXFxuICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cXFwiI2ljX3NhdmVfMjRweFxcXCI+PC91c2U+XFxyXFxuICAgICAgPC9zdmc+XFxyXFxuICAgIDwvYnV0dG9uPlxcclxcbiAgICA8YnV0dG9uIGlkPVxcXCJvLWVkaXRvci1jbG9zZVxcXCIgY2xhc3M9XFxcIm8tYnV0dG9uLWxnXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIG5hbWU9XFxcImJ1dHRvblxcXCI+XFxyXFxuICAgICAgICA8c3ZnIGNsYXNzPVxcXCJvLWljb24tMjRcXFwiPlxcclxcbiAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj1cXFwiI2ljX2Nsb3NlXzI0cHhcXFwiPjwvdXNlPlxcclxcbiAgICAgICAgPC9zdmc+XFxyXFxuICAgIDwvYnV0dG9uPlxcclxcbjwvZGl2PlxcclxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGhlbHBlciwgYWxpYXMxPWNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uO1xuXG4gIHJldHVybiBcIiAgICAgIDxsaT48Yj5cIlxuICAgICsgYWxpYXMxKCgoaGVscGVyID0gKGhlbHBlciA9IGhlbHBlcnMua2V5IHx8IChkYXRhICYmIGRhdGEua2V5KSkgIT0gbnVsbCA/IGhlbHBlciA6IGhlbHBlcnMuaGVscGVyTWlzc2luZyksKHR5cGVvZiBoZWxwZXIgPT09IFwiZnVuY3Rpb25cIiA/IGhlbHBlci5jYWxsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwIDoge30se1wibmFtZVwiOlwia2V5XCIsXCJoYXNoXCI6e30sXCJkYXRhXCI6ZGF0YX0pIDogaGVscGVyKSkpXG4gICAgKyBcIjwvYj4gOiBcIlxuICAgICsgYWxpYXMxKGNvbnRhaW5lci5sYW1iZGEoZGVwdGgwLCBkZXB0aDApKVxuICAgICsgXCI8L2xpPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazE7XG5cbiAgcmV0dXJuICgoc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAgOiB7fSxkZXB0aDAse1wibmFtZVwiOlwiZWFjaFwiLFwiaGFzaFwiOnt9LFwiZm5cIjpjb250YWluZXIucHJvZ3JhbSgxLCBkYXRhLCAwKSxcImludmVyc2VcIjpjb250YWluZXIubm9vcCxcImRhdGFcIjpkYXRhfSkpICE9IG51bGwgPyBzdGFjazEgOiBcIlwiKTtcbn0sXCJ1c2VEYXRhXCI6dHJ1ZX0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgZGVmYXVsdFRlbXBsYXRlID0gcmVxdWlyZShcIi4vZGVmYXVsdC5oYW5kbGViYXJzXCIpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihhdHRyaWJ1dGVzKSB7XHJcbiAgcmV0dXJuIGRlZmF1bHRUZW1wbGF0ZShhdHRyaWJ1dGVzKTtcclxufVxyXG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiY29tcGlsZXJcIjpbNyxcIj49IDQuMC4wXCJdLFwibWFpblwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiPGh0bWw+XFxyXFxuICA8aGVhZD5cXHJcXG4gICAgPGxpbmsgaHJlZj1cXFwiY3NzL3ByaW50LmNzc1xcXCIgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIj5cXHJcXG4gIDwvaGVhZD5cXHJcXG4gIDxib2R5PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJvLXByaW50LWxvZ29cXFwiPjxpbWcgc3JjPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAubG9nb1NyYyA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+PC9kaXY+XFxyXFxuICAgIDxkaXYgY2xhc3M9XFxcIm8tbWFwLWNhbnZhc1xcXCI+PGltZyBzcmM9XFxcIlwiXG4gICAgKyBhbGlhczIoYWxpYXMxKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC5zcmMgOiBkZXB0aDApLCBkZXB0aDApKVxuICAgICsgXCJcXFwiLz48L2Rpdj5cXHJcXG4gICAgPGRpdiBjbGFzcz1cXFwiby1wcmludC1hdHRyaWJ1dGlvblxcXCI+XCJcbiAgICArIGFsaWFzMihhbGlhczEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmF0dHJpYnV0aW9uIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiPC9kaXY+XFxyXFxuICA8L2JvZHk+XFxyXFxuPC9odG1sPlxcclxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFyc0NvbXBpbGVyID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzQ29tcGlsZXIudGVtcGxhdGUoe1wiMVwiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgcmV0dXJuIFwiICAgICAgICA8aW1nIHNyYz1cXFwiXCJcbiAgICArIGNvbnRhaW5lci5lc2NhcGVFeHByZXNzaW9uKGNvbnRhaW5lci5sYW1iZGEoKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmltZyA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIlxcXCI+XFxyXFxuXCI7XG59LFwiM1wiOmZ1bmN0aW9uKGNvbnRhaW5lcixkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gICAgdmFyIGFsaWFzMT1jb250YWluZXIubGFtYmRhLCBhbGlhczI9Y29udGFpbmVyLmVzY2FwZUV4cHJlc3Npb247XG5cbiAgcmV0dXJuIFwiICAgICAgICA8YSBocmVmPVxcXCJcIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAudXJsIDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiXFxcIj5cIlxuICAgICsgYWxpYXMyKGFsaWFzMSgoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAudXJsVGV4dCA6IGRlcHRoMCksIGRlcHRoMCkpXG4gICAgKyBcIjwvYT5cXHJcXG5cIjtcbn0sXCI1XCI6ZnVuY3Rpb24oY29udGFpbmVyLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgICByZXR1cm4gXCIgICAgICAgIDxwPlwiXG4gICAgKyBjb250YWluZXIuZXNjYXBlRXhwcmVzc2lvbihjb250YWluZXIubGFtYmRhKChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC50ZXh0IDogZGVwdGgwKSwgZGVwdGgwKSlcbiAgICArIFwiPC9wPlxcclxcblwiO1xufSxcImNvbXBpbGVyXCI6WzcsXCI+PSA0LjAuMFwiXSxcIm1haW5cIjpmdW5jdGlvbihjb250YWluZXIsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICAgIHZhciBzdGFjazEsIGFsaWFzMT1kZXB0aDAgIT0gbnVsbCA/IGRlcHRoMCA6IHt9O1xuXG4gIHJldHVybiBcIjxkaXYgaWQ9XFxcIm8tbWFwXFxcIiBjbGFzcz1cXFwiby1tYXAgby1tYXAtZ3JpZFxcXCI+XFxyXFxuICA8ZGl2IGlkPVxcXCJvLXRvb2xzLWxlZnRcXFwiIGNsYXNzPVxcXCJvLWNvbnRhaW5lci1hYnNvbHV0ZSBvLXRvb2xzLWxlZnRcXFwiPlxcclxcbiAgICA8ZGl2IGlkPVxcXCJvLXRvb2xiYXItbmF2aWdhdGlvblxcXCIgY2xhc3M9XFxcIm8tdG9vbGJhci12ZXJ0aWNhbCBvLXRvb2xiYXItbmF2aWdhdGlvblxcXCI+PC9kaXY+XFxyXFxuICAgIDxkaXYgaWQ9XFxcIm8tdG9vbGJhci1tYXB0b29sc1xcXCIgY2xhc3M9XFxcIm8tdG9vbGJhci12ZXJ0aWNhbCBvLXRvb2xiYXItbWFwdG9vbHNcXFwiPjwvZGl2PlxcclxcbiAgICA8ZGl2IGlkPVxcXCJvLXRvb2xiYXItbWlzY1xcXCIgY2xhc3M9XFxcIm8tdG9vbGJhci12ZXJ0aWNhbCBvLXRvb2xiYXItbWlzY1xcXCI+PC9kaXY+XFxyXFxuICA8L2Rpdj5cXHJcXG4gIDxkaXYgaWQ9XFxcIm8tdG9vbHMtYm90dG9tXFxcIiBjbGFzcz1cXFwiby10b29scy1ib3R0b21cXFwiPjwvZGl2PlxcclxcbiAgPGRpdiBpZD1cXFwiby1mb290ZXJcXFwiIGNsYXNzPVxcXCJvLWZvb3RlclxcXCI+XFxyXFxuICAgIDxkaXYgaWQ9XFxcIm8tY29uc29sZVxcXCIgY2xhc3M9XFxcIm8tZm9vdGVyLWxlZnRcXFwiPiZuYnNwOzwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJvLWZvb3Rlci1taWRkbGVcXFwiPlxcclxcbiAgICAgIDxkaXYgY2xhc3M9XFxcIm8tZm9vdGVyLW1pZGRsZS1jb250ZW50XFxcIj5cXHJcXG5cIlxuICAgICsgKChzdGFjazEgPSBoZWxwZXJzW1wiaWZcIl0uY2FsbChhbGlhczEsKGRlcHRoMCAhPSBudWxsID8gZGVwdGgwLmltZyA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oMSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArICgoc3RhY2sxID0gaGVscGVyc1tcImlmXCJdLmNhbGwoYWxpYXMxLChkZXB0aDAgIT0gbnVsbCA/IGRlcHRoMC51cmwgOiBkZXB0aDApLHtcIm5hbWVcIjpcImlmXCIsXCJoYXNoXCI6e30sXCJmblwiOmNvbnRhaW5lci5wcm9ncmFtKDMsIGRhdGEsIDApLFwiaW52ZXJzZVwiOmNvbnRhaW5lci5ub29wLFwiZGF0YVwiOmRhdGF9KSkgIT0gbnVsbCA/IHN0YWNrMSA6IFwiXCIpXG4gICAgKyAoKHN0YWNrMSA9IGhlbHBlcnNbXCJpZlwiXS5jYWxsKGFsaWFzMSwoZGVwdGgwICE9IG51bGwgPyBkZXB0aDAudGV4dCA6IGRlcHRoMCkse1wibmFtZVwiOlwiaWZcIixcImhhc2hcIjp7fSxcImZuXCI6Y29udGFpbmVyLnByb2dyYW0oNSwgZGF0YSwgMCksXCJpbnZlcnNlXCI6Y29udGFpbmVyLm5vb3AsXCJkYXRhXCI6ZGF0YX0pKSAhPSBudWxsID8gc3RhY2sxIDogXCJcIilcbiAgICArIFwiICAgICAgPC9kaXY+XFxyXFxuICAgIDwvZGl2PlxcclxcbiAgICA8ZGl2IGNsYXNzPVxcXCJvLWZvb3Rlci1yaWdodFxcXCI+XFxyXFxuICAgIDwvZGl2PlxcclxcbjwvZGl2PlxcclxcblwiO1xufSxcInVzZURhdGFcIjp0cnVlfSk7XG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICAgIGNyZWF0ZUJ1dHRvbjogZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgICAgIHZhciB0b29sdGlwID0nJztcclxuICAgICAgICB2YXIgdGV4dCA9Jyc7XHJcbiAgICAgICAgdmFyIGNscyA9IG9wdGlvbnMuY2xzIHx8ICcnO1xyXG4gICAgICAgIHZhciBpY29uQ2xzID0gb3B0aW9ucy5pY29uQ2xzIHx8ICcnO1xyXG4gICAgICAgIHZhciBwbGFjZW1lbnQgPSBvcHRpb25zLnRvb2x0aXBQbGFjZW1lbnQgfHwgJ2Vhc3QnO1xyXG4gICAgICAgIGlmKG9wdGlvbnMudGV4dCkge1xyXG4gICAgICAgICAgICB0ZXh0ID0gJzxzcGFuIGNsYXNzPVwiby1idXR0b24tdGV4dFwiPicgKyBvcHRpb25zLnRleHQgKyAnPC9zcGFuPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG9wdGlvbnMudG9vbHRpcFRleHQpIHtcclxuICAgICAgICAgICAgdG9vbHRpcCA9ICc8c3BhbiBkYXRhLXRvb2x0aXA9XCInICsgb3B0aW9ucy50b29sdGlwVGV4dCArICdcIiBkYXRhLXBsYWNlbWVudD1cIicgKyBwbGFjZW1lbnQgKyAnXCI+PC9zcGFuPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBlbCA9ICc8ZGl2IGlkPVwiJyArIG9wdGlvbnMuaWQgKyAnXCIgY2xhc3M9XCJvLWJ1dHRvbi1jb250YWluZXIgby10b29sdGlwXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgJzxidXR0b24gY2xhc3M9XCJvLWJ1dHRvbiAnICsgY2xzICsgJ1wiPicgKyB0ZXh0ICtcclxuICAgICAgICAgICAgICAgICAgICAnPHN2ZyBjbGFzcz1cIicgKyBpY29uQ2xzICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHVzZSB4bGluazpocmVmPVwiJyArIG9wdGlvbnMuc3JjICsgJ1wiPjwvdXNlPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L3N2Zz4nICtcclxuICAgICAgICAgICAgICAgICAnPC9idXR0b24+JyArXHJcbiAgICAgICAgICAgICAgICAgdG9vbHRpcCArXHJcbiAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgfSxcclxuICAgIGNyZWF0ZUxpc3RCdXR0b246IGZ1bmN0aW9uKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgZWwgPSAnPGxpPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGlkPVwiJyArIG9wdGlvbnMuaWQgKyAnLWJ1dHRvblwiIGNsYXNzPVwiby1tZW51LWJ1dHRvblwiJyArICc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiby1idXR0b24taWNvblwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICc8c3ZnIGNsYXNzPVwiJyArIG9wdGlvbnMuaWNvbkNscyArICdcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx1c2UgeGxpbms6aHJlZj1cIicgKyBvcHRpb25zLnNyYyArICdcIj48L3VzZT4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9zdmc+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudGV4dCArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICc8L2xpPic7XHJcbiAgICAgICAgcmV0dXJuIGVsO1xyXG4gICAgfSxcclxuICAgIGNyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uKGVsLCB2YWwsIGF0dHJpYnV0ZXMpIHtcclxuICAgICAgICB2YXIgcHJlZml4ID0gJzwnICsgZWw7XHJcbiAgICAgICAgdmFyIHN1ZmZpeCA9ICc8LycgKyBlbCAgKyAnPic7XHJcbiAgICAgICAgdmFyIGF0dHJpYnV0ZU5hbWVzID0gYXR0cmlidXRlcyA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGF0dHJpYnV0ZXMpIDogW107XHJcbiAgICAgICAgdmFyIGF0dHJpYnV0ZUxpc3QgPSBhdHRyaWJ1dGVOYW1lcy5tYXAoZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICAgICB2YXIgcmVzID0gJyc7XHJcbiAgICAgICAgICAgIGlmIChuYW1lID09PSBcImNsc1wiKSB7XHJcbiAgICAgICAgICAgICAgICByZXMgPSAnICcgKyAnY2xhc3MnLmNvbmNhdCgnPScsICdcIicsIGF0dHJpYnV0ZXNbbmFtZV0sICdcIicpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzID0gJyAnICsgbmFtZS5jb25jYXQoJz0nLCAnXCInLCBhdHRyaWJ1dGVzW25hbWVdLCdcIicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBwcmVmaXguY29uY2F0KGF0dHJpYnV0ZUxpc3Quam9pbignICcpLCAnPicsIHZhbCwgc3VmZml4KTtcclxuICAgICAgICByZXR1cm4gZWxlbWVudDtcclxuICAgIH0sXHJcbiAgICBjcmVhdGVTdmc6IGZ1bmN0aW9uKHByb3BzKSB7XHJcbiAgICAgICAgdmFyIHVzZSA9IHRoaXMuY3JlYXRlRWxlbWVudCgndXNlJywgJycsIHtcclxuICAgICAgICAgICAgJ3hsaW5rOmhyZWYnOiBwcm9wcy5ocmVmXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRWxlbWVudCgnc3ZnJywgdXNlLCB7XHJcbiAgICAgICAgICAgIGNsczogcHJvcHMuY2xzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBlbFF1ZXJ5KHRhcmdldE9iaiwgb3B0aW9ucykge1xyXG4gIHZhciB0YXJnZXQgPSAnLm8tbWFwJztcclxuICB2YXIgcHJlZml4ID0gb3B0aW9ucy5icmVha1BvaW50c1ByZWZpeDtcclxuICB2YXIgYnJlYWtQb2ludHMgPSBvcHRpb25zLmJyZWFrUG9pbnRzO1xyXG4gIHZhciBicmVha05hbWVzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYnJlYWtQb2ludHMpO1xyXG4gIHZhciBicmVha0NscyA9IGFyclRvT2JqKGJyZWFrTmFtZXMsIHByZWZpeCk7XHJcbiAgdmFyIGJyZWFrQ2xzTmFtZXMgPSBicmVha05hbWVzLm1hcChmdW5jdGlvbihicmVha1NpemUpIHtcclxuICAgIHJldHVybiBicmVha0Nsc1ticmVha1NpemVdO1xyXG4gIH0pO1xyXG5cclxuICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsIG9uU2l6ZUNoYW5nZSk7XHJcbiAgb25TaXplQ2hhbmdlKCk7XHJcblxyXG4gIGZ1bmN0aW9uIG9uU2l6ZUNoYW5nZSgpIHtcclxuICAgIHZhciBtYXBTaXplID0gdGFyZ2V0T2JqLmdldFNpemUoKTtcclxuICAgIHZhciB2YWwgPSBicmVha05hbWVzLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyKSB7XHJcbiAgICAgIHZhciBoZWlnaHQgPSBicmVha1BvaW50c1tjdXJyXVsxXTtcclxuICAgICAgdmFyIHdpZHRoID0gYnJlYWtQb2ludHNbY3Vycl1bMF07XHJcbiAgICAgIGlmIChtYXBTaXplWzBdIDw9IHdpZHRoIHx8IG1hcFNpemVbMV0gPD0gaGVpZ2h0KSB7XHJcbiAgICAgICAgaWYgKCFwcmV2KSB7XHJcbiAgICAgICAgICByZXR1cm4gY3VycjtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIHByZXY7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBwcmV2O1xyXG4gICAgICB9XHJcbiAgICB9LCB1bmRlZmluZWQpO1xyXG4gICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKGJyZWFrQ2xzTmFtZXMuam9pbignICcpKTtcclxuICAgIGlmICh2YWwpIHtcclxuICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKGJyZWFrQ2xzW3ZhbF0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gYXJyVG9PYmooYXJyLCBzdGFydCkge1xyXG4gICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgdmFyIHZhbCA9IHN0YXJ0O1xyXG4gICAgYXJyLnNsaWNlKCkucmV2ZXJzZSgpLmZvckVhY2goZnVuY3Rpb24oY3Vycikge1xyXG4gICAgICB2YWwgKz0gJy0nICsgY3VycjtcclxuICAgICAgb2JqW2N1cnJdID0gdmFsO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcblxyXG4vKipcclxuRnVuY3Rpb24gdG8gZ2VuZXJhdGUgYSB1bmlxdWUgaWQuXHJcbkZyb20gQnJpZ3V5MzcgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMDUwMzQvY3JlYXRlLWd1aWQtdXVpZC1pbi1qYXZhc2NyaXB0XHJcbiovXHJcbnZhciBnZW5lcmF0ZVVVSUQgPSBmdW5jdGlvbiBnZW5lcmF0ZVVVSUQoKSB7XHJcbiAgdmFyIGQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICBpZiAod2luZG93LnBlcmZvcm1hbmNlICYmIHR5cGVvZiB3aW5kb3cucGVyZm9ybWFuY2Uubm93ID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgIGQgKz0gcGVyZm9ybWFuY2Uubm93KCk7IC8vdXNlIGhpZ2gtcHJlY2lzaW9uIHRpbWVyIGlmIGF2YWlsYWJsZVxyXG4gIH1cclxuICB2YXIgdXVpZCA9ICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24oYykge1xyXG4gICAgdmFyIHIgPSAoZCArIE1hdGgucmFuZG9tKCkgKiAxNikgJSAxNiB8IDA7XHJcbiAgICBkID0gTWF0aC5mbG9vcihkIC8gMTYpO1xyXG4gICAgcmV0dXJuIChjID09ICd4JyA/IHIgOiAociAmIDB4MyB8IDB4OCkpLnRvU3RyaW5nKDE2KTtcclxuICB9KTtcclxuICByZXR1cm4gdXVpZDtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBnZW5lcmF0ZVVVSUQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRpbWFnZW9yaWVudGF0aW9uKGZpbGUsIGNhbGxiYWNrKSB7XHJcbiAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpIHtcclxuICAgIHZhciB2aWV3ID0gbmV3IERhdGFWaWV3KGUudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICB2YXIgbGVuZ3RoO1xyXG4gICAgdmFyIG9mZnNldDtcclxuICAgIHZhciBtYXJrZXI7XHJcbiAgICB2YXIgbGl0dGxlO1xyXG4gICAgdmFyIHRhZ3M7XHJcblxyXG4gICAgaWYgKHZpZXcuZ2V0VWludDE2KDAsIGZhbHNlKSAhPSAweEZGRDgpIHtcclxuICAgICAgcmV0dXJuIGNhbGxiYWNrKC0yKTtcclxuICAgIH1cclxuXHJcbiAgICBsZW5ndGggPSB2aWV3LmJ5dGVMZW5ndGg7XHJcbiAgICBvZmZzZXQgPSAyO1xyXG4gICAgd2hpbGUgKG9mZnNldCA8IGxlbmd0aCkge1xyXG4gICAgICBtYXJrZXIgPSB2aWV3LmdldFVpbnQxNihvZmZzZXQsIGZhbHNlKTtcclxuICAgICAgb2Zmc2V0ICs9IDI7XHJcbiAgICAgIGlmIChtYXJrZXIgPT0gMHhGRkUxKSB7XHJcbiAgICAgICAgaWYgKHZpZXcuZ2V0VWludDMyKG9mZnNldCArPSAyLCBmYWxzZSkgIT0gMHg0NTc4Njk2Nikge1xyXG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKC0xKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxpdHRsZSA9IHZpZXcuZ2V0VWludDE2KG9mZnNldCArPSA2LCBmYWxzZSkgPT0gMHg0OTQ5O1xyXG4gICAgICAgIG9mZnNldCArPSB2aWV3LmdldFVpbnQzMihvZmZzZXQgKyA0LCBsaXR0bGUpO1xyXG4gICAgICAgIHRhZ3MgPSB2aWV3LmdldFVpbnQxNihvZmZzZXQsIGxpdHRsZSk7XHJcbiAgICAgICAgb2Zmc2V0ICs9IDI7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWdzOyBpKyspIHtcclxuICAgICAgICAgIGlmICh2aWV3LmdldFVpbnQxNihvZmZzZXQgKyAoaSAqIDEyKSwgbGl0dGxlKSA9PSAweDAxMTIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKHZpZXcuZ2V0VWludDE2KG9mZnNldCArIChpICogMTIpICsgOCwgbGl0dGxlKSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgfSBlbHNlIGlmICgobWFya2VyICYgMHhGRjAwKSAhPSAweEZGMDApIHtcclxuICAgICAgICBicmVhaztcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBvZmZzZXQgKz0gdmlldy5nZXRVaW50MTYob2Zmc2V0LCBmYWxzZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY2FsbGJhY2soLTEpO1xyXG4gIH07XHJcbiAgcmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUpO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZXRVcmwoKSB7XHJcbiAgICByZXR1cm4gbG9jYXRpb24ucHJvdG9jb2wgKycvLycrXHJcbiAgICAgICAgICAgIGxvY2F0aW9uLmhvc3RuYW1lICtcclxuICAgICAgICAgICAgKGxvY2F0aW9uLnBvcnQ/XCI6XCIrbG9jYXRpb24ucG9ydDpcIlwiKSArXHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnBhdGhuYW1lO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbWFnZXJlc2l6ZXIoaW1hZ2VEYXRhLCBvcHRfb3B0aW9ucywgb3JpZW50YXRpb24sIGNhbGxiYWNrKSB7XHJcbiAgdmFyIGZpbGVUeXBlID0gaW1hZ2VEYXRhLnNwbGl0KCc7JylbMF0uc3BsaXQoJy8nKVsxXTtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zO1xyXG4gIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5cclxuICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbihpbWFnZUV2ZW50KSB7XHJcbiAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcbiAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xyXG4gICAgdmFyIG1heF9zaXplID0gb3B0aW9ucy5tYXhTaXplIHx8IDYwMDtcclxuICAgIHZhciB3aWR0aCA9IGltYWdlLndpZHRoO1xyXG4gICAgdmFyIGhlaWdodCA9IGltYWdlLmhlaWdodDtcclxuICAgIHZhciB0cmFuc2xhdGVXaWR0aDtcclxuICAgIHZhciB0cmFuc2xhdGVIZWlnaHQ7XHJcbiAgICB2YXIgcm90YXRpb247XHJcbiAgICB2YXIgZGF0YVVybDtcclxuXHJcbiAgICBpZiAod2lkdGggPiBoZWlnaHQpIHtcclxuICAgICAgaWYgKHdpZHRoID4gbWF4X3NpemUpIHtcclxuICAgICAgICBoZWlnaHQgKj0gbWF4X3NpemUgLyB3aWR0aDtcclxuICAgICAgICB3aWR0aCA9IG1heF9zaXplO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBpZiAoaGVpZ2h0ID4gbWF4X3NpemUpIHtcclxuICAgICAgICB3aWR0aCAqPSBtYXhfc2l6ZSAvIGhlaWdodDtcclxuICAgICAgICBoZWlnaHQgPSBtYXhfc2l6ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuXHJcbiAgICBpZiAob3JpZW50YXRpb24lMiA9PT0gMCkge1xyXG4gICAgICBjYW52YXMud2lkdGggPSBoZWlnaHQ7XHJcbiAgICAgIGNhbnZhcy5oZWlnaHQgPSB3aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBzd2l0Y2ggKG9yaWVudGF0aW9uKSB7XHJcbiAgICAgIGNhc2UgMTpcclxuICAgICAgICB0cmFuc2xhdGVXaWR0aCA9IDA7XHJcbiAgICAgICAgdHJhbnNsYXRlSGVpZ2h0ID0gMDtcclxuICAgICAgICByb3RhdGlvbiA9IDA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGNhc2UgMzpcclxuICAgICAgICB0cmFuc2xhdGVXaWR0aCA9IGNhbnZhcy53aWR0aDtcclxuICAgICAgICB0cmFuc2xhdGVIZWlnaHQgPSBjYW52YXMuaGVpZ2h0O1xyXG4gICAgICAgIHJvdGF0aW9uID0gMTgwO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDY6XHJcbiAgICAgICAgdHJhbnNsYXRlV2lkdGggPSBjYW52YXMud2lkdGg7XHJcbiAgICAgICAgdHJhbnNsYXRlSGVpZ2h0ID0gMDtcclxuICAgICAgICByb3RhdGlvbiA9IDkwO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDg6XHJcbiAgICAgICAgdHJhbnNsYXRlV2lkdGggPSAwO1xyXG4gICAgICAgIHRyYW5zbGF0ZUhlaWdodCA9IGNhbnZhcy5oZWlnaHQ7XHJcbiAgICAgICAgcm90YXRpb24gPSAyNzA7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgdHJhbnNsYXRlV2lkdGggPSAwO1xyXG4gICAgICAgIHRyYW5zbGF0ZUhlaWdodCA9IDA7XHJcbiAgICAgICAgcm90YXRpb24gPSAwO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnRleHQudHJhbnNsYXRlKHRyYW5zbGF0ZVdpZHRoLHRyYW5zbGF0ZUhlaWdodCk7XHJcbiAgICBjb250ZXh0LnJvdGF0ZShyb3RhdGlvbipNYXRoLlBJLzE4MCk7XHJcbiAgICBjb250ZXh0LmRyYXdJbWFnZShpbWFnZSwgMCwgMCwgd2lkdGgsIGhlaWdodCk7XHJcbiAgICBkYXRhVXJsID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvJyArIGZpbGVUeXBlKTtcclxuICAgIGNhbGxiYWNrKGRhdGFVcmwpO1xyXG4gIH1cclxuXHJcbiAgaW1hZ2Uuc3JjID0gaW1hZ2VEYXRhO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNFbWJlZGRlZCh0YXJnZXQpIHtcclxuICBpZiAod2luZG93LnRvcCAhPT0gd2luZG93LnNlbGYgfHwgJCh0YXJnZXQpLnBhcmVudCgpLmlzKCdCT0RZJykgPT09IGZhbHNlKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaXNVcmwocykge1xyXG4gICB2YXIgcmVnZXhwID0gbmV3IFJlZ0V4cCgnXig/OlthLXpdKzopPy8vJywgJ2knKTtcclxuICAgcmV0dXJuIHJlZ2V4cC50ZXN0KHMpO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBudW1iZXJGb3JtYXR0ZXIobnVtYmVyVG9Gb3JtYXQpIHtcclxuICB2YXIgbnIgPSBudW1iZXJUb0Zvcm1hdDtcclxuICB2YXIgbGVuZ3RoID0gbnIudG9TdHJpbmcoKS5sZW5ndGg7XHJcbiAgaWYgKGxlbmd0aCA+IDMpIHtcclxuICAgIHZhciBkZWxpbWl0ZXIgPSAnICc7IC8vd2hpdGUgc3BhY2UgYXMgZGVsaW1pdGVyXHJcblxyXG4gICAgLy9Sb3VuZCBieSBmYWN0b3JcclxuICAgIGlmIChuciA+PSAxMDAwKSB7XHJcbiAgICAgIHZhciBmYWN0b3IgPSBNYXRoLnBvdygxMCwgbGVuZ3RoKSAvIDEwMDAwO1xyXG4gICAgICBuciA9IE1hdGgucm91bmQobnIgLyBmYWN0b3IpICogZmFjdG9yO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBuclN0ciA9IG5yLnRvU3RyaW5nKCk7XHJcbiAgICB2YXIgYSA9IFtdO1xyXG4gICAgd2hpbGUgKG5yU3RyLmxlbmd0aCA+IDMpIHtcclxuICAgICAgdmFyIG4gPSBuclN0ci5zdWJzdHIobnJTdHIubGVuZ3RoIC0gMyk7XHJcbiAgICAgIGEudW5zaGlmdChuKTtcclxuICAgICAgbnJTdHIgPSBuclN0ci5zdWJzdHIoMCwgbnJTdHIubGVuZ3RoIC0gMyk7XHJcbiAgICB9XHJcbiAgICBpZiAobnJTdHIubGVuZ3RoID4gMCkge1xyXG4gICAgICBhLnVuc2hpZnQobnJTdHIpO1xyXG4gICAgfVxyXG4gICAgbnJTdHIgPSBhLmpvaW4oZGVsaW1pdGVyKTtcclxuICAgIHJldHVybiBuclN0cjtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIG5yLnRvU3RyaW5nKCk7XHJcbiAgfVxyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgJCA9IHJlcXVpcmUoJ2pxdWVyeScpO1xyXG52YXIgdXRpbHMgPSByZXF1aXJlKCcuLi91dGlscycpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiByZW5kZXJFcnJvcih0eXBlLCBlbCkge1xyXG4gIGlmICh0eXBlID09PSAnYnJvd3NlcicpIHtcclxuICAgIHJlbmRlckJyb3dzZXJFcnJvcihlbCk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiByZW5kZXJCcm93c2VyRXJyb3IoZWwpIHtcclxuICAgIHZhciBtZXNzYWdlID0gJ0RldCBzZXIgdXQgc29tIGF0dCBkdSBhbnbDpG5kZXIgZW4gZsO2csOlbGRyYWQgd2ViYmzDpHNhcmUuIFByb3ZhIGF0dCB1cHBncmFkZXJhIGRpbiB3ZWJibMOkc2FyZSBmw7ZyIGF0dCB2aXNhIGthcnRhbi4nXHJcbiAgICB2YXIgZWxNZXNzYWdlID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2JywgbWVzc2FnZSwge1xyXG4gICAgICBjbHM6ICdvLW5vLW1hcC1tZXNzYWdlJ1xyXG4gICAgfSk7XHJcbiAgICB2YXIgY29udGFpbmVyID0gdXRpbHMuY3JlYXRlRWxlbWVudCgnZGl2JywgZWxNZXNzYWdlLCB7XHJcbiAgICAgIGNsczogJ28tbm8tbWFwJ1xyXG4gICAgfSk7XHJcbiAgICAkKGZ1bmN0aW9uKCkge1xyXG4gICAgICAkKGVsKS5hcHBlbmQoY29udGFpbmVyKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBSZXBsYWNlciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICB2YXIgc3RhcnQgPSB1bmRlZmluZWQ7XHJcbiAgdmFyIGVuZCA9IHVuZGVmaW5lZDtcclxuICB2YXIgaGVscGVyID0gdW5kZWZpbmVkO1xyXG4gIHZhciBoZWxwZXJOUyA9IHVuZGVmaW5lZDtcclxuICB2YXIgaGVscGVyQXJnID0gdW5kZWZpbmVkO1xyXG5cclxuICBmdW5jdGlvbiByZXBsYWNlKG5hbWUsIG9iaiwgb3B0aW9ucykge1xyXG4gICAgICBzdGFydCA9IG9wdGlvbnMuc3RhcnQgfHwgJ3t7JztcclxuICAgICAgZW5kID0gb3B0aW9ucy5lbmQgfHwgJ319JztcclxuICAgICAgaGVscGVyID0gb3B0aW9ucy5oZWxwZXIgfHwge307XHJcbiAgICAgIGhlbHBlck5TID0gb3B0aW9ucy5oZWxwZXJOUyB8fCAnQCc7XHJcbiAgICAgIGhlbHBlckFyZyA9IFtvcHRpb25zLmhlbHBlckFyZ10gfHwgW107XHJcblxyXG4gICAgICB2YXIgcmVzdWx0ID0gc2VhcmNoQW5kUmVwbGFjZShuYW1lLCBvYmopO1xyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2VhcmNoQW5kUmVwbGFjZShuYW1lLCBvYmopIHtcclxuICAgICAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cChzdGFydCArICcoLio/KScgKyAgZW5kLCBcImdcIik7XHJcbiAgICAgIHZhciBtYXRjaGVzID0gcmVnZXguZXhlYyhuYW1lKTtcclxuICAgICAgaWYobWF0Y2hlcykge1xyXG4gICAgICAgICAgdmFyIHZhbCA9IG9iai5oYXNPd25Qcm9wZXJ0eShtYXRjaGVzWzFdKSA/IG9ialttYXRjaGVzWzFdXSA6ICcnO1xyXG4gICAgICAgICAgaWYgKCF2YWwpIHtcclxuICAgICAgICAgICAgdmFyIG5zSW5kZXggPSBtYXRjaGVzWzBdLmluZGV4T2YoaGVscGVyTlMpO1xyXG4gICAgICAgICAgICBpZiAobnNJbmRleCkge1xyXG4gICAgICAgICAgICAgIHZhciBoZWxwZXJQYXJ0cyA9IGdldEFyZ3MobWF0Y2hlc1sxXSk7XHJcbiAgICAgICAgICAgICAgdmFyIGhlbHBlck5hbWUgPSBoZWxwZXJQYXJ0c1sxXS5zdWJzdHJpbmcobnNJbmRleCAtIDEpO1xyXG4gICAgICAgICAgICAgIHZhciBhcmdzID0gaGVscGVyQXJnLmNvbmNhdChoZWxwZXJQYXJ0c1swXSk7XHJcbiAgICAgICAgICAgICAgdmFsID0gaGVscGVyLmhhc093blByb3BlcnR5KGhlbHBlck5hbWUpID8gaGVscGVyW2hlbHBlck5hbWVdLmFwcGx5KG51bGwsIGFyZ3MpLnRvU3RyaW5nKCkgOiAnJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgcmV0dXJuIHNlYXJjaEFuZFJlcGxhY2UobmFtZS5yZXBsYWNlKG1hdGNoZXNbMF0sIHZhbCksIG9iaik7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gbmFtZTtcclxuICAgICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gZ2V0QXJncyhzdHIpIHtcclxuICAgIHZhciBhcmdzID0gc3RyLm1hdGNoKC9cXCgoLio/KVxcKS8pO1xyXG4gICAgaWYgKGFyZ3MpIHtcclxuICAgICAgcmV0dXJuIFthcmdzWzFdLnNwbGl0KCcsJyksIHN0ci5zdWJzdHJpbmcoMCwgYXJncy5pbmRleCldO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIFsnJyxzdHJdO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcblx0cmV0dXJuIHtcclxuICBcdFx0cmVwbGFjZTogZnVuY3Rpb24obmFtZSwgb2JqLCBvcHRpb25zKSB7XHJcbiAgICAgICAgICB2YXIgb3B0ID0gb3B0aW9ucyB8fCB7fTtcclxuICAgICAgICAgIHJldHVybiAocmVwbGFjZShuYW1lLCBvYmosIG9wdCkpO1xyXG4gIFx0XHR9XHJcblx0fTtcclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUmVwbGFjZXIoKTtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgcm91bmQgPSBmdW5jdGlvbiByb3VuZCh2YWx1ZSwgZGVjaW1hbHMpIHtcclxuICByZXR1cm4gTnVtYmVyKE1hdGgucm91bmQodmFsdWUgKyAnZScgKyBkZWNpbWFscykgKyAnZS0nICsgZGVjaW1hbHMpO1xyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHJvdW5kO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIHJlbmRlckVycm9yID0gcmVxdWlyZSgnLi9yZW5kZXJlcnJvcicpO1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzdXBwb3J0cyh0eXBlLCBlbCkge1xyXG4gIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKS5nZXRDb250ZXh0O1xyXG4gIHZhciByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG4gIGlmICghIWNhbnZhcyAmJiAhIXJlcXVlc3RBbmltYXRpb25GcmFtZSkge1xyXG4gICAgcmV0dXJuIHRydWU7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJlbmRlckVycm9yKCdicm93c2VyJywgZWwpO1xyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdHJpbVVybCh1cmwpIHtcclxuICB2YXIgdHJpbW1lZDtcclxuICBpZiAodXJsLnN1YnN0cmluZyh1cmwubGFzdEluZGV4T2YoJy8nKSkuaW5kZXhPZignLmh0bScpICE9PSAtMSkge1xyXG4gICAgdHJpbW1lZCA9IHVybC5zdWJzdHJpbmcoMCwgdXJsLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcclxuICB9IGVsc2UgaWYgKHVybC5zdWJzdHIodXJsLmxlbmd0aCAtIDEpICE9PSAnLycpIHtcclxuICAgIHRyaW1tZWQgPSB1cmwgKyAnLyc7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRyaW1tZWQgPSB1cmw7XHJcbiAgfVxyXG4gIHJldHVybiB0cmltbWVkO1xyXG59XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5cclxudmFyIHVybHBhcnNlciA9IHt9O1xyXG5cclxudXJscGFyc2VyLm9iamVjdGlmeSA9IGZ1bmN0aW9uKG9ialN0cmluZywgb3B0X29wdGlvbnMpIHtcclxuICAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgICB2YXIgZGVsaW1ldGVyID0gb3B0aW9ucy5kZWxpbWV0ZXIgfHwgJy8nO1xyXG4gICAgdmFyIHRvcG1vc3QgPSBvcHRpb25zLnRvcG1vc3QgfHwgJ25hbWUnO1xyXG4gICAgdmFyIHBhcnRzID0gb2JqU3RyaW5nLnNwbGl0KGRlbGltZXRlcik7XHJcbiAgICB2YXIgb2JqID0ge307XHJcbiAgICBpZihvcHRpb25zLnRvcG1vc3QpIHtcclxuICAgICAgICBpZihwYXJ0c1swXSAgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUb3Btb3N0IHZhbHVlIGlzIG1pc3NpbmcnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ialt0b3Btb3N0XSA9IHBhcnRzWzBdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmKHBhcnRzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICBmb3IgKHZhciBpID0gMSwgaWkgPSBwYXJ0cy5sZW5ndGg7IGkgPCBpaTsgaSArPSAyKSB7XHJcbiAgICAgICAgICAgIG9ialtwYXJ0c1tpXV0gPSBwYXJ0c1tpICsgMV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG51cmxwYXJzZXIuc3RyaW5naWZ5ID0gZnVuY3Rpb24ob2JqLCBvcHRfb3B0aW9ucykge1xyXG4gICAgdmFyIG9wdGlvbnMgPSBvcHRfb3B0aW9ucyB8fCB7fTtcclxuICAgIHZhciBkZWxpbWV0ZXIgPSBvcHRpb25zLmRlbGltZXRlciB8fCAnLyc7XHJcbiAgICB2YXIgdG9wbW9zdCA9IG9wdGlvbnMudG9wbW9zdCB8fCB1bmRlZmluZWQ7XHJcbiAgICB2YXIgb2JqU3RyaW5nID0gdG9wbW9zdCA/IG9ialt0b3Btb3N0XSA6ICcnO1xyXG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmKGtleSAhPT0gdG9wbW9zdClcclxuICAgICAgICBvYmpTdHJpbmcgKz0gZGVsaW1ldGVyICsga2V5ICsgZGVsaW1ldGVyICsgb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqU3RyaW5nO1xyXG59XHJcbnVybHBhcnNlci5hcnJTdHJpbmdpZnkgPSBmdW5jdGlvbihhcnIsIG9wdF9vcHRpb25zKSB7XHJcbiAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgIHZhciBkZWxpbWV0ZXIgPSBvcHRpb25zLmRlbGltZXRlciB8fCAnLyc7XHJcbiAgIHZhciB0b3Btb3N0ID0gb3B0aW9ucy50b3Btb3N0IHx8ICcnO1xyXG4gICB2YXIgYXJyU3RyaW5nID0gdG9wbW9zdCA/IHRvcG1vc3QgKyBkZWxpbWV0ZXIgOiAnJztcclxuICAgaWYodHlwZW9mIGFyclswXVswXSA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgYXJyU3RyaW5nICs9IGFyci5qb2luKCcsJyk7XHJcbiAgIH1cclxuICAgZWxzZSB7XHJcbiAgICAgIHZhciBvdXRlciA9IGFyci5tYXAoZnVuY3Rpb24oaW5uZXIpIHtcclxuICAgICAgICAgIHZhciByZXMgPSBpbm5lci5tYXAoZnVuY3Rpb24oaW5uZXJwYXJ0KSB7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIGlubmVycGFydC5qb2luKCchJyk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qb2luKCcsJyk7XHJcbiAgICAgIH0pO1xyXG4gICAgICBhcnJTdHJpbmcgKz0gb3V0ZXIuam9pbihvcHRpb25zLmRlbGltZXRlcik7XHJcbiAgIH1cclxuICAgcmV0dXJuIGFyclN0cmluZztcclxufVxyXG51cmxwYXJzZXIuc3RyQXJyYXlpZnkgPSBmdW5jdGlvbihzdHIsIG9wdF9vcHRpb25zKSB7XHJcbiAgIHZhciBvcHRpb25zID0gb3B0X29wdGlvbnMgfHwge307XHJcbiAgIHZhciBkZWxpbWV0ZXIgPSBvcHRpb25zLmRlbGltZXRlciB8fCAnLyc7XHJcbiAgIHZhciB0b3Btb3N0TmFtZSA9IG9wdF9vcHRpb25zLnRvcG1vc3ROYW1lIHx8ICd0b3Btb3N0JztcclxuICAgdmFyIGFyck5hbWUgPSBvcHRfb3B0aW9ucy5hcnJOYW1lIHx8ICdhcnInO1xyXG4gICB2YXIgdG9wbW9zdCA9IHN0ci5zdWJzdHJpbmcoMCwgc3RyLmluZGV4T2YoZGVsaW1ldGVyKSk7XHJcbiAgIHZhciBhcnJTdHIgPSBzdHIuc3Vic3RyaW5nKHN0ci5pbmRleE9mKGRlbGltZXRlcikgKyAxKTtcclxuICAgdmFyIGFyciA9IGFyclN0ci5zcGxpdChkZWxpbWV0ZXIpLm1hcChmdW5jdGlvbihlbCkge1xyXG4gICAgICAgIHJldHVybiBlbC5zcGxpdCgnIScpO1xyXG4gICB9KTtcclxuICAgdmFyIG9iaiA9IHt9O1xyXG4gICBvYmpbdG9wbW9zdE5hbWVdID0gdG9wbW9zdDtcclxuICAgb2JqW2Fyck5hbWVdID0gYXJyO1xyXG4gICByZXR1cm4gb2JqO1xyXG59XHJcbnVybHBhcnNlci5zdHJJbnRpZnkgPSBmdW5jdGlvbihzdHIsIG9wdF9vcHRpb25zKSB7XHJcbiAgICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gICAgdmFyIGRlbGltaXRlciA9IG9wdGlvbnMuZGVsaW1pdGVyIHx8ICcsJztcclxuICAgIHZhciBhcnIgPSBzdHIuc3BsaXQoZGVsaW1pdGVyKTtcclxuICAgIHZhciBzdHJUb0ludCA9IGFyci5tYXAoZnVuY3Rpb24oZWwpIHtcclxuICAgICAgICByZXR1cm4gcGFyc2VJbnQoZWwpO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gc3RyVG9JbnQ7XHJcbn1cclxudXJscGFyc2VyLnN0ckJvb2xlYW4gPSBmdW5jdGlvbihzdHIpIHtcclxuICAgIGlmKHN0ciA9PT0gXCIxXCIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYoc3RyID09PSBcIjBcIikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiU3RyaW5nIGlzIG5vdCAxIG9yIDBcIik7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbnVybHBhcnNlci5mb3JtYXRVcmwgPSBmdW5jdGlvbihvYmopIHtcclxuICAgIHZhciB1cmwgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopLnJlZHVjZShmdW5jdGlvbihwcmV2LCBjdXJyZW50KSB7XHJcbiAgICAgICAgY3VycmVudCA9IHByZXYgPyBcIiZcIiArIGN1cnJlbnQgKyBcIj1cIiArIG9ialtjdXJyZW50XSA6IGN1cnJlbnQgKyBcIj1cIiArIG9ialtjdXJyZW50XTtcclxuICAgICAgICByZXR1cm4gcHJldiArIGN1cnJlbnQ7XHJcbiAgICB9LCBcIlwiKTtcclxuICAgIHJldHVybiB1cmw7XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gdXJscGFyc2VyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxudmFyIGlzVXJsID0gcmVxdWlyZSgnLi9pc3VybCcpO1xyXG5cclxuLy9DaGVja3MgaWYgc3RyIGlzIGEgdmFsaWQgdXJsLiBJZiBub3QgYXBwZW5kIHN0ciB0byBiYXNlVXJsXHJcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdmFsaWRhdGVVcmwoc3RyLCBiYXNlVXJsKSB7XHJcbiAgIHZhciB1cmwgPSBpc1VybChzdHIpID8gc3RyIDogYmFzZVVybCArIHN0cjtcclxuICAgcmV0dXJuIHVybDtcclxufVxyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuXHJcbnZhciBvbCA9IHJlcXVpcmUoJ29wZW5sYXllcnMnKTtcclxudmFyICQgPSByZXF1aXJlKCdqcXVlcnknKTtcclxudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4vdGVtcGxhdGVzL3ZpZXdlci5oYW5kbGViYXJzXCIpO1xyXG52YXIgTW9kYWwgPSByZXF1aXJlKCcuL21vZGFsJyk7XHJcbnZhciB1dGlscyA9IHJlcXVpcmUoJy4vdXRpbHMnKTtcclxudmFyIGlzVXJsID0gcmVxdWlyZSgnLi91dGlscy9pc3VybCcpO1xyXG52YXIgZWxRdWVyeSA9IHJlcXVpcmUoJy4vdXRpbHMvZWxxdWVyeScpO1xyXG52YXIgZmVhdHVyZWluZm8gPSByZXF1aXJlKCcuL2ZlYXR1cmVpbmZvJyk7XHJcbnZhciBtYXB1dGlscyA9IHJlcXVpcmUoJy4vbWFwdXRpbHMnKTtcclxudmFyIHN0eWxlID0gcmVxdWlyZSgnLi9zdHlsZScpKCk7XHJcbnZhciBsYXllckNyZWF0b3IgPSByZXF1aXJlKCcuL2xheWVyY3JlYXRvcicpO1xyXG5cclxudmFyIG1hcDtcclxudmFyIHRlbXBsYXRlO1xyXG52YXIgc2V0dGluZ3MgPSB7XHJcbiAgcHJvamVjdGlvbjogJycsXHJcbiAgcHJvamVjdGlvbkNvZGU6ICcnLFxyXG4gIHByb2plY3Rpb25FeHRlbnQ6ICcnLFxyXG4gIGV4dGVudDogW10sXHJcbiAgY2VudGVyOiBbMCwgMF0sXHJcbiAgem9vbTogMCxcclxuICByZXNvbHV0aW9uczogbnVsbCxcclxuICBzb3VyY2U6IHt9LFxyXG4gIGdyb3VwOiBbXSxcclxuICBsYXllcnM6IFtdLFxyXG4gIHN0eWxlczoge30sXHJcbiAgY29udHJvbHM6IFtdLFxyXG4gIGZlYXR1cmVJbmZvT3ZlcmxheTogdW5kZWZpbmVkLFxyXG4gIGVkaXRMYXllcjogbnVsbFxyXG59O1xyXG52YXIgdXJsUGFyYW1zO1xyXG52YXIgZm9vdGVyVGVtcGxhdGUgPSB7fTtcclxuXHJcbmZ1bmN0aW9uIGluaXQoZWwsIG1hcE9wdGlvbnMpIHtcclxuICByZW5kZXIoZWwsIG1hcE9wdGlvbnMpO1xyXG5cclxuICAvLyBSZWFkIGFuZCBzZXQgcHJvamVjdGlvblxyXG4gIGlmIChtYXBPcHRpb25zLmhhc093blByb3BlcnR5KCdwcm9qNERlZnMnKSAmJiB3aW5kb3cucHJvajQpIHtcclxuICAgIHZhciBwcm9qID0gbWFwT3B0aW9uc1sncHJvajREZWZzJ107XHJcblxyXG4gICAgLy9SZWdpc3RlciBwcm9qNCBwcm9qZWN0aW9uIGRlZmluaXRpb25zXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb2oubGVuZ3RoOyBpKyspIHtcclxuICAgICAgcHJvajQuZGVmcyhwcm9qW2ldLmNvZGUsIHByb2pbaV0ucHJvamVjdGlvbik7XHJcbiAgICAgIGlmIChwcm9qW2ldLmhhc093blByb3BlcnR5KCdhbGlhcycpKSB7XHJcbiAgICAgICAgcHJvajQuZGVmcyhwcm9qW2ldLmFsaWFzLCBwcm9qNC5kZWZzKHByb2pbaV0uY29kZSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHNldHRpbmdzLnBhcmFtcyA9IHVybFBhcmFtcyA9IG1hcE9wdGlvbnMucGFyYW1zIHx8IHt9O1xyXG4gIHNldHRpbmdzLm1hcCA9IG1hcE9wdGlvbnMubWFwO1xyXG4gIHNldHRpbmdzLnVybCA9IG1hcE9wdGlvbnMudXJsO1xyXG4gIHNldHRpbmdzLnRhcmdldCA9IG1hcE9wdGlvbnMudGFyZ2V0O1xyXG4gIHNldHRpbmdzLmJhc2VVcmwgPSBtYXBPcHRpb25zLmJhc2VVcmw7XHJcbiAgaWYgKG1hcE9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3Byb2o0RGVmcycpIHx8IG1hcE9wdGlvbnMucHJvamVjdGlvbkNvZGU9PVwiRVBTRzozODU3XCIgfHwgbWFwT3B0aW9ucy5wcm9qZWN0aW9uQ29kZT09XCJFUFNHOjQzMjZcIikge1xyXG4gICAgLy8gUHJvamVjdGlvbiB0byBiZSB1c2VkIGluIG1hcFxyXG4gICAgc2V0dGluZ3MucHJvamVjdGlvbkNvZGUgPSBtYXBPcHRpb25zLnByb2plY3Rpb25Db2RlIHx8IHVuZGVmaW5lZDtcclxuICAgIHNldHRpbmdzLnByb2plY3Rpb25FeHRlbnQgPSBtYXBPcHRpb25zLnByb2plY3Rpb25FeHRlbnQ7XHJcbiAgICBzZXR0aW5ncy5wcm9qZWN0aW9uID0gbmV3IG9sLnByb2ouUHJvamVjdGlvbih7XHJcbiAgICAgIGNvZGU6IHNldHRpbmdzLnByb2plY3Rpb25Db2RlLFxyXG4gICAgICBleHRlbnQ6IHNldHRpbmdzLnByb2plY3Rpb25FeHRlbnQsXHJcbiAgICAgIHVuaXRzOiBnZXRVbml0cyhzZXR0aW5ncy5wcm9qZWN0aW9uQ29kZSlcclxuICAgIH0pO1xyXG4gICAgc2V0dGluZ3MucmVzb2x1dGlvbnMgPSBtYXBPcHRpb25zLnJlc29sdXRpb25zIHx8IHVuZGVmaW5lZDtcclxuICAgIHNldHRpbmdzLnRpbGVHcmlkID0gbWFwdXRpbHMudGlsZUdyaWQoc2V0dGluZ3MucHJvamVjdGlvbkV4dGVudCwgc2V0dGluZ3MucmVzb2x1dGlvbnMpO1xyXG4gIH1cclxuXHJcbiAgc2V0dGluZ3MuZXh0ZW50ID0gbWFwT3B0aW9ucy5leHRlbnQgfHwgdW5kZWZpbmVkO1xyXG4gIHNldHRpbmdzLmNlbnRlciA9IHVybFBhcmFtcy5jZW50ZXIgfHwgbWFwT3B0aW9ucy5jZW50ZXI7XHJcbiAgc2V0dGluZ3Muem9vbSA9IHVybFBhcmFtcy56b29tIHx8IG1hcE9wdGlvbnMuem9vbTtcclxuICBzZXR0aW5ncy5zb3VyY2UgPSBtYXBPcHRpb25zLnNvdXJjZTtcclxuICBzZXR0aW5ncy5ncm91cHMgPSBtYXBPcHRpb25zLmdyb3VwcztcclxuICBzZXR0aW5ncy5lZGl0TGF5ZXIgPSBtYXBPcHRpb25zLmVkaXRMYXllcjtcclxuICBzZXR0aW5ncy5zdHlsZXMgPSBtYXBPcHRpb25zLnN0eWxlcztcclxuICBzdHlsZS5pbml0KCk7XHJcbiAgc2V0dGluZ3MubGF5ZXJzID0gY3JlYXRlTGF5ZXJzKG1hcE9wdGlvbnMubGF5ZXJzLCB1cmxQYXJhbXMubGF5ZXJzKTtcclxuICBzZXR0aW5ncy5jb250cm9scyA9IG1hcE9wdGlvbnMuY29udHJvbHM7XHJcbiAgc2V0dGluZ3MuY29uc29sZUlkID0gbWFwT3B0aW9ucy5jb25zb2xlSWQgfHwgJ28tY29uc29sZSc7XHJcbiAgc2V0dGluZ3MuZmVhdHVyZWluZm9PcHRpb25zID0gbWFwT3B0aW9ucy5mZWF0dXJlaW5mb09wdGlvbnMgfHwge307XHJcblxyXG4gIC8vSWYgdXJsIGFyZ3VtZW50cywgcGFyc2UgdGhpcyBzZXR0aW5nc1xyXG4gIGlmICh3aW5kb3cubG9jYXRpb24uc2VhcmNoKSB7XHJcbiAgICBwYXJzZUFyZygpO1xyXG4gIH1cclxuXHJcbiAgbG9hZE1hcCgpO1xyXG5cclxuICBlbFF1ZXJ5KG1hcCwge1xyXG4gICAgYnJlYWtQb2ludHM6IG1hcE9wdGlvbnMuYnJlYWtQb2ludHMsXHJcbiAgICBicmVha1BvaW50c1ByZWZpeDogbWFwT3B0aW9ucy5icmVha1BvaW50c1ByZWZpeCxcclxuICB9KTtcclxuXHJcbiAgaWYgKHVybFBhcmFtcy5waW4pIHtcclxuICAgIHNldHRpbmdzLmZlYXR1cmVpbmZvT3B0aW9ucy5zYXZlZFBpbiA9IHVybFBhcmFtcy5waW47XHJcbiAgfVxyXG5cclxuICAvL1RoaXMgbmVlZHMgZnVydGhlciBkZXZlbG9wbWVudCBmb3IgcHJvcGVyIGhhbmRsaW5nIGluIHBlcm1hbGlua1xyXG4gIGVsc2UgaWYgKHVybFBhcmFtcy5zZWxlY3Rpb24pIHtcclxuICAgIHNldHRpbmdzLmZlYXR1cmVpbmZvT3B0aW9ucy5zYXZlZFNlbGVjdGlvbiA9IG5ldyBvbC5GZWF0dXJlKHtcclxuICAgICAgZ2VvbWV0cnk6IG5ldyBvbC5nZW9tW3VybFBhcmFtcy5zZWxlY3Rpb24uZ2VvbWV0cnlUeXBlXSh1cmxQYXJhbXMuc2VsZWN0aW9uLmNvb3JkaW5hdGVzKVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGZlYXR1cmVpbmZvLmluaXQoc2V0dGluZ3MuZmVhdHVyZWluZm9PcHRpb25zKTtcclxuXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUxheWVycyhsYXllcmxpc3QsIHNhdmVkTGF5ZXJzKSB7XHJcbiAgdmFyIGxheWVycyA9IFtdO1xyXG4gIGZvciAodmFyIGkgPSBsYXllcmxpc3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgIHZhciBzYXZlZExheWVyID0ge307XHJcbiAgICBpZiAoc2F2ZWRMYXllcnMpIHtcclxuICAgICAgc2F2ZWRMYXllciA9IHNhdmVkTGF5ZXJzW2xheWVybGlzdFtpXS5uYW1lLnNwbGl0KCc6JykucG9wKCldIHx8IHtcclxuICAgICAgICB2aXNpYmxlOiBmYWxzZSxcclxuICAgICAgICBsZWdlbmQ6IGZhbHNlXHJcbiAgICAgIH07XHJcbiAgICAgIHNhdmVkTGF5ZXIubmFtZSA9IGxheWVybGlzdFtpXS5uYW1lO1xyXG4gICAgfVxyXG4gICAgdmFyIGxheWVyID0gJC5leHRlbmQobGF5ZXJsaXN0W2ldLCBzYXZlZExheWVyKTtcclxuICAgIGxheWVycy5wdXNoKGxheWVyQ3JlYXRvcihsYXllcikpO1xyXG4gIH1cclxuICByZXR1cm4gbGF5ZXJzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkTWFwKCkge1xyXG4gIG1hcCA9IG5ldyBvbC5NYXAoe1xyXG4gICAgdGFyZ2V0OiAnby1tYXAnLFxyXG4gICAgbGF5ZXJzOiBzZXR0aW5ncy5sYXllcnMsXHJcbiAgICBjb250cm9sczogW10sXHJcbiAgICB2aWV3OiBuZXcgb2wuVmlldyh7XHJcbiAgICAgIGV4dGVudDogc2V0dGluZ3MuZXh0ZW50IHx8IHVuZGVmaW5lZCxcclxuICAgICAgcHJvamVjdGlvbjogc2V0dGluZ3MucHJvamVjdGlvbiB8fCB1bmRlZmluZWQsXHJcbiAgICAgIGNlbnRlcjogc2V0dGluZ3MuY2VudGVyLFxyXG4gICAgICByZXNvbHV0aW9uczogc2V0dGluZ3MucmVzb2x1dGlvbnMgfHwgdW5kZWZpbmVkLFxyXG4gICAgICB6b29tOiBzZXR0aW5ncy56b29tXHJcbiAgICB9KVxyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwYXJzZUFyZygpIHtcclxuICB2YXIgc3RyID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSk7XHJcbiAgdmFyIGVsZW1lbnRzID0gc3RyLnNwbGl0KFwiJlwiKTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykge1xyXG5cclxuICAgIC8vY2VudGVyIGNvb3JkaW5hdGVzXHJcbiAgICBpZiAoaSA9PSAwKSB7XHJcbiAgICAgIHZhciB6ID0gZWxlbWVudHNbaV0uc3BsaXQoXCIsXCIpO1xyXG4gICAgICBzZXR0aW5ncy5jZW50ZXJbMF0gPSBwYXJzZUludCh6WzBdKTtcclxuICAgICAgc2V0dGluZ3MuY2VudGVyWzFdID0gcGFyc2VJbnQoelsxXSk7XHJcbiAgICB9IGVsc2UgaWYgKGkgPT0gMSkge1xyXG4gICAgICBzZXR0aW5ncy56b29tID0gcGFyc2VJbnQoZWxlbWVudHNbaV0pO1xyXG4gICAgfSBlbHNlIGlmIChpID09IDIpIHtcclxuICAgICAgdmFyIGwgPSBlbGVtZW50c1tpXS5zcGxpdChcIjtcIik7XHJcbiAgICAgIHZhciBsYXllcnMgPSBzZXR0aW5ncy5sYXllcnM7XHJcbiAgICAgIHZhciBsYSwgbWF0Y2g7XHJcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGF5ZXJzLmxlbmd0aDsgaisrKSB7XHJcbiAgICAgICAgbWF0Y2ggPSAwO1xyXG4gICAgICAgICQuZWFjaChsLCBmdW5jdGlvbihpbmRleCwgZWwpIHtcclxuICAgICAgICAgIGxhID0gZWwuc3BsaXQoXCIsXCIpO1xyXG4gICAgICAgICAgaWYgKGxheWVyc1tqXS5nZXQoJ2dyb3VwJykpIHtcclxuICAgICAgICAgICAgaWYgKChsYXllcnNbal0uZ2V0KCdncm91cCcpID09ICdiYWNrZ3JvdW5kJykgJiYgKGxhWzBdID09IGxheWVyc1tqXS5nZXQoJ25hbWUnKSkpIHtcclxuICAgICAgICAgICAgICBsYXllcnNbal0uc2V0VmlzaWJsZSh0cnVlKTtcclxuICAgICAgICAgICAgICBtYXRjaCA9IDE7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoKGxheWVyc1tqXS5nZXQoJ2dyb3VwJykgPT0gJ2JhY2tncm91bmQnKSAmJiAobWF0Y2ggPT0gMCkpIHtcclxuICAgICAgICAgICAgICBsYXllcnNbal0uc2V0VmlzaWJsZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGFbMF0gPT0gbGF5ZXJzW2pdLmdldCgnbmFtZScpKSB7XHJcbiAgICAgICAgICAgICAgaWYgKGxhWzFdID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGxheWVyc1tqXS5zZXQoJ2xlZ2VuZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgbGF5ZXJzW2pdLnNldFZpc2libGUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsYXllcnNbal0uc2V0KCdsZWdlbmQnLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGxheWVyc1tqXS5zZXRWaXNpYmxlKHRydWUpO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTZXR0aW5ncygpIHtcclxuICByZXR1cm4gc2V0dGluZ3M7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEV4dGVudCgpIHtcclxuICByZXR1cm4gc2V0dGluZ3MuZXh0ZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRCYXNlVXJsKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5iYXNlVXJsO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNYXBOYW1lKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5tYXA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRpbGVHcmlkKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy50aWxlR3JpZDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VXJsKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy51cmw7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFN0eWxlU2V0dGluZ3MoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnN0eWxlcztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UmVzb2x1dGlvbnMoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnJlc29sdXRpb25zO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNYXBVcmwoKSB7XHJcbiAgdmFyIGxheWVyTmFtZXMgPSAnJztcclxuICB2YXIgdXJsO1xyXG5cclxuICAvL2RlbGV0ZSBzZWFyY2ggYXJndW1lbnRzIGlmIHByZXNlbnRcclxuICBpZiAod2luZG93LmxvY2F0aW9uLnNlYXJjaCkge1xyXG4gICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYucmVwbGFjZSh3aW5kb3cubG9jYXRpb24uc2VhcmNoLCAnPycpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB1cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZiArICc/JztcclxuICB9XHJcbiAgdmFyIG1hcFZpZXcgPSBtYXAuZ2V0VmlldygpO1xyXG4gIHZhciBjZW50ZXIgPSBtYXBWaWV3LmdldENlbnRlcigpO1xyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgMjsgaSsrKSB7XHJcbiAgICBjZW50ZXJbaV0gPSBwYXJzZUludChjZW50ZXJbaV0pOyAvL2Nvb3JkaW5hdGVzIGluIGludGVnZXJzXHJcbiAgfVxyXG4gIHZhciB6b29tID0gbWFwVmlldy5nZXRab29tKCk7XHJcbiAgdmFyIGxheWVycyA9IG1hcC5nZXRMYXllcnMoKTtcclxuXHJcbiAgLy9hZGQgbGF5ZXIgaWYgdmlzaWJsZVxyXG4gIGxheWVycy5mb3JFYWNoKGZ1bmN0aW9uKGVsKSB7XHJcbiAgICBpZiAoZWwuZ2V0VmlzaWJsZSgpID09IHRydWUpIHtcclxuICAgICAgbGF5ZXJOYW1lcyArPSBlbC5nZXQoJ25hbWUnKSArICc7JztcclxuICAgIH0gZWxzZSBpZiAoZWwuZ2V0KCdsZWdlbmQnKSA9PSB0cnVlKSB7XHJcbiAgICAgIGxheWVyTmFtZXMgKz0gZWwuZ2V0KCduYW1lJykgKyAnLDE7JztcclxuICAgIH1cclxuICB9KVxyXG4gIHJldHVybiB1cmwgKyBjZW50ZXIgKyAnJicgKyB6b29tICsgJyYnICsgbGF5ZXJOYW1lcy5zbGljZSgwLCBsYXllck5hbWVzLmxhc3RJbmRleE9mKFwiO1wiKSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldE1hcCgpIHtcclxuICByZXR1cm4gbWFwO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRMYXllcnMoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLmxheWVycztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TGF5ZXJzQnlQcm9wZXJ0eShrZXksIHZhbCwgYnlOYW1lKSB7XHJcbiAgdmFyIGxheWVycyA9IG1hcC5nZXRMYXllcnMoKS5nZXRBcnJheSgpLmZpbHRlcihmdW5jdGlvbihsYXllcikge1xyXG4gICAgaWYgKGxheWVyLmdldChrZXkpKSB7XHJcbiAgICAgIGlmIChsYXllci5nZXQoa2V5KSA9PT0gdmFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGxheWVyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGlmIChieU5hbWUpIHtcclxuICAgIHJldHVybiBsYXllcnMubWFwKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICAgIHJldHVybiBsYXllci5nZXQoJ25hbWUnKTtcclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gbGF5ZXJzO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0TGF5ZXIobGF5ZXJuYW1lKSB7XHJcbiAgdmFyIGxheWVyID0gJC5ncmVwKHNldHRpbmdzLmxheWVycywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICByZXR1cm4gKG9iai5nZXQoJ25hbWUnKSA9PSBsYXllcm5hbWUpO1xyXG4gIH0pO1xyXG4gIHJldHVybiBsYXllclswXTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UXVlcnlhYmxlTGF5ZXJzKCkge1xyXG4gIHZhciBxdWVyeWFibGVMYXllcnMgPSBzZXR0aW5ncy5sYXllcnMuZmlsdGVyKGZ1bmN0aW9uKGxheWVyKSB7XHJcbiAgICBpZiAobGF5ZXIuZ2V0KCdxdWVyeWFibGUnKSAmJiBsYXllci5nZXRWaXNpYmxlKCkpIHtcclxuICAgICAgcmV0dXJuIGxheWVyO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiBxdWVyeWFibGVMYXllcnM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldEdyb3VwKGdyb3VwKSB7XHJcbiAgdmFyIGdyb3VwID0gJC5ncmVwKHNldHRpbmdzLmxheWVycywgZnVuY3Rpb24ob2JqKSB7XHJcbiAgICByZXR1cm4gKG9iai5nZXQoJ2dyb3VwJykgPT0gZ3JvdXApO1xyXG4gIH0pO1xyXG4gIHJldHVybiBncm91cDtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0R3JvdXBzKG9wdCkge1xyXG4gIGlmKG9wdCA9PSAndG9wJykge1xyXG4gICAgcmV0dXJuIHNldHRpbmdzLmdyb3VwcztcclxuICB9IGVsc2UgaWYgKG9wdCA9PSAnc3ViJykge1xyXG4gICAgcmV0dXJuIGdldFN1Ymdyb3VwcygpO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gc2V0dGluZ3MuZ3JvdXBzLmNvbmNhdChnZXRTdWJncm91cHMoKSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRTdWJncm91cHMoKSB7XHJcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdO1xyXG5cclxuICBmdW5jdGlvbiBmaW5kU3ViZ3JvdXBzKGdyb3Vwcywgbikge1xyXG4gICAgaWYgKG4gPj0gZ3JvdXBzLmxlbmd0aCkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGdyb3Vwc1tuXS5ncm91cHMpIHtcclxuICAgICAgZ3JvdXBzW25dLmdyb3Vwcy5mb3JFYWNoKGZ1bmN0aW9uKHN1Ymdyb3VwKSB7XHJcbiAgICAgICAgc3ViZ3JvdXBzLnB1c2goc3ViZ3JvdXApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGZpbmRTdWJncm91cHMoZ3JvdXBzW25dLmdyb3VwcywgMCk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZFN1Ymdyb3Vwcyhncm91cHMsIG4rMSk7XHJcbiAgfVxyXG5cclxuICBmaW5kU3ViZ3JvdXBzKHNldHRpbmdzLmdyb3VwcywgMCk7XHJcbiAgcmV0dXJuIHN1Ymdyb3VwcztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0UHJvamVjdGlvbkNvZGUoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnByb2plY3Rpb25Db2RlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQcm9qZWN0aW9uKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5wcm9qZWN0aW9uO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRNYXBTb3VyY2UoKSB7XHJcbiAgcmV0dXJuIHNldHRpbmdzLnNvdXJjZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29udHJvbE5hbWVzKCkge1xyXG4gIHZhciBjb250cm9sTmFtZXMgPSBzZXR0aW5ncy5jb250cm9scy5tYXAoZnVuY3Rpb24ob2JqKSB7XHJcbiAgICByZXR1cm4gb2JqLm5hbWU7XHJcbiAgfSk7XHJcbiAgcmV0dXJuIGNvbnRyb2xOYW1lcztcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VGFyZ2V0KCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy50YXJnZXQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrU2NhbGUoc2NhbGUsIG1heFNjYWxlLCBtaW5TY2FsZSkge1xyXG4gIGlmIChtYXhTY2FsZSB8fCBtaW5TY2FsZSkge1xyXG5cclxuICAgIC8vIEFsdGVyIDE6IG1heHNjYWxlIGFuZCBtaW5zY2FsZVxyXG4gICAgaWYgKG1heFNjYWxlICYmIG1pblNjYWxlKSB7XHJcbiAgICAgIGlmICgoc2NhbGUgPiBtYXhTY2FsZSkgJiYgKHNjYWxlIDwgbWluU2NhbGUpKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBBbHRlciAyOiBvbmx5IG1heHNjYWxlXHJcbiAgICBlbHNlIGlmIChtYXhTY2FsZSkge1xyXG4gICAgICBpZiAoc2NhbGUgPiBtYXhTY2FsZSkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQWx0ZXIgMzogb25seSBtaW5zY2FsZVxyXG4gICAgZWxzZSBpZiAobWluU2NhbGUpIHtcclxuICAgICAgaWYgKHNjYWxlIDwgbWluU2NhbGUpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gQWx0ZXIgNDogbm8gc2NhbGUgbGltaXRcclxuICBlbHNlIHtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q29uc29sZUlkKCkge1xyXG4gIHJldHVybiBzZXR0aW5ncy5jb25zb2xlSWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFNjYWxlKHJlc29sdXRpb24pIHtcclxuICB2YXIgZHBpID0gMjUuNCAvIDAuMjg7XHJcbiAgdmFyIG1wdSA9IHNldHRpbmdzLnByb2plY3Rpb24uZ2V0TWV0ZXJzUGVyVW5pdCgpO1xyXG4gIHZhciBzY2FsZSA9IHJlc29sdXRpb24gKiBtcHUgKiAzOS4zNyAqIGRwaTtcclxuICBzY2FsZSA9IE1hdGgucm91bmQoc2NhbGUpO1xyXG4gIHJldHVybiBzY2FsZTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VW5pdHMocHJvaikge1xyXG4gIHZhciB1bml0cztcclxuICBzd2l0Y2gocHJvaikge1xyXG4gICAgY2FzZSAnRVBTRzozODU3JzpcclxuICAgICAgdW5pdHMgPSAnbSc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgY2FzZSAnRVBTRzo0MzI2JzpcclxuICAgICAgdW5pdHMgPSAnZGVncmVlcyc7XHJcbiAgICAgIGJyZWFrO1xyXG4gICAgZGVmYXVsdDpcclxuICAgICAgdW5pdHMgPSBwcm9qNC5kZWZzKHByb2opID8gcHJvajQuZGVmcyhwcm9qKS51bml0cyA6IHVuZGVmaW5lZDtcclxuICB9XHJcbiAgcmV0dXJuIHVuaXRzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhdXRvUGFuKCkge1xyXG4gIC8qV29ya2Fyb3VuZCB0byByZW1vdmUgd2hlbiBhdXRvcGFuIGltcGxlbWVudGVkIGZvciBvdmVybGF5cyAqL1xyXG4gIHZhciBlbCA9ICQoJy5vLXBvcHVwJyk7XHJcbiAgdmFyIGNlbnRlciA9IG1hcC5nZXRWaWV3KCkuZ2V0Q2VudGVyKCk7XHJcbiAgdmFyIHBvcHVwT2Zmc2V0ID0gJChlbCkub2Zmc2V0KCk7XHJcbiAgdmFyIG1hcE9mZnNldCA9ICQoJyMnICsgbWFwLmdldFRhcmdldCgpKS5vZmZzZXQoKTtcclxuICB2YXIgb2Zmc2V0WSA9IHBvcHVwT2Zmc2V0LnRvcCAtIG1hcE9mZnNldC50b3A7XHJcbiAgdmFyIG1hcFNpemUgPSBtYXAuZ2V0U2l6ZSgpO1xyXG4gIHZhciBvZmZzZXRYID0gKG1hcE9mZnNldC5sZWZ0ICsgbWFwU2l6ZVswXSkgLSAocG9wdXBPZmZzZXQubGVmdCArICQoZWwpLm91dGVyV2lkdGgodHJ1ZSkpO1xyXG5cclxuICAvLyBDaGVjayBpZiBtYXBtZW51IHdpZGdldCBpcyB1c2VkIGFuZCBvcGVuZWRcclxuICB2YXIgbWVudVNpemUgPSAwO1xyXG4gIGlmIChzZXR0aW5ncy5jb250cm9scy5oYXNPd25Qcm9wZXJ0eSgnbWFwbWVudScpKSB7XHJcbiAgICBtZW51U2l6ZSA9IHNldHRpbmdzLmNvbnRyb2xzLm1hcG1lbnUuZ2V0VGFyZ2V0KCkub2Zmc2V0KCkubGVmdCA+IDAgPyBtYXBTaXplWzBdIC0gc2V0dGluZ3MuY29udHJvbHMubWFwbWVudS5nZXRUYXJnZXQoKS5vZmZzZXQoKS5sZWZ0IDogbWVudVNpemUgPSAwO1xyXG4gIH1cclxuICBpZiAob2Zmc2V0WSA8IDAgfHwgb2Zmc2V0WCA8IDAgKyBtZW51U2l6ZSB8fCBvZmZzZXRYID4gKG1hcFNpemVbMF0gLSAkKGVsKS5vdXRlcldpZHRoKHRydWUpKSkge1xyXG4gICAgdmFyIGR4ID0gMCxcclxuICAgICAgZHkgPSAwO1xyXG4gICAgaWYgKG9mZnNldFggPCAwICsgbWVudVNpemUpIHtcclxuICAgICAgZHggPSAoLW9mZnNldFggKyBtZW51U2l6ZSkgKiBtYXAuZ2V0VmlldygpLmdldFJlc29sdXRpb24oKTtcclxuICAgIH1cclxuICAgIGlmIChvZmZzZXRYID4gKG1hcFNpemVbMF0gLSAkKGVsKS5vdXRlcldpZHRoKHRydWUpKSkge1xyXG4gICAgICBkeCA9IC0oJChlbCkub3V0ZXJXaWR0aCh0cnVlKSAtIChtYXBTaXplWzBdIC0gb2Zmc2V0WCkpICogbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBpZiAob2Zmc2V0WSA8IDApIHtcclxuICAgICAgZHkgPSAoLW9mZnNldFkpICogbWFwLmdldFZpZXcoKS5nZXRSZXNvbHV0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBtYXAuZ2V0VmlldygpLmFuaW1hdGUoe1xyXG4gICAgICBjZW50ZXI6IChbY2VudGVyWzBdICsgZHgsIGNlbnRlclsxXSArIGR5XSksXHJcblx0ICBkdXJhdGlvbjozMDBcclxuICAgIH0pO1xyXG4gIH1cclxuICAvKkVuZCB3b3JrYXJvdW5kKi9cclxufVxyXG5cclxuZnVuY3Rpb24gcmVtb3ZlT3ZlcmxheXMob3ZlcmxheXMpIHtcclxuICBpZiAob3ZlcmxheXMpIHtcclxuICAgIGlmIChvdmVybGF5cy5jb25zdHJ1Y3RvciA9PT0gQXJyYXkgfHwgb3ZlcmxheXMgaW5zdGFuY2VvZiBvbC5Db2xsZWN0aW9uKSB7XHJcbiAgICAgIG92ZXJsYXlzLmZvckVhY2goZnVuY3Rpb24ob3ZlcmxheSkge1xyXG4gICAgICAgIG1hcC5yZW1vdmVPdmVybGF5KG92ZXJsYXkpO1xyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbWFwLnJlbW92ZU92ZXJsYXkob3ZlcmxheXMpO1xyXG4gICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICBtYXAuZ2V0T3ZlcmxheXMoKS5jbGVhcigpO1xyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gcmVuZGVyKGVsLCBtYXBPcHRpb25zKSB7XHJcbiAgICBpZiAobWFwT3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgnZm9vdGVyJykpIHtcclxuICAgICAgaWYgKG1hcE9wdGlvbnMuZm9vdGVyWzBdLmhhc093blByb3BlcnR5KCdpbWcnKSkge1xyXG4gICAgICAgIGZvb3RlclRlbXBsYXRlLmltZyA9IG1hcE9wdGlvbnMuZm9vdGVyWzBdLmltZztcclxuICAgICAgfVxyXG4gICAgICBpZiAobWFwT3B0aW9ucy5mb290ZXJbMF0uaGFzT3duUHJvcGVydHkoJ3RleHQnKSkge1xyXG4gICAgICAgIGZvb3RlclRlbXBsYXRlLnRleHQgPSBtYXBPcHRpb25zLmZvb3RlclswXS50ZXh0O1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChtYXBPcHRpb25zLmZvb3RlclswXS5oYXNPd25Qcm9wZXJ0eSgndXJsJykpIHtcclxuICAgICAgICBmb290ZXJUZW1wbGF0ZS51cmwgPSBtYXBPcHRpb25zLmZvb3RlclswXS51cmw7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG1hcE9wdGlvbnMuZm9vdGVyWzBdLmhhc093blByb3BlcnR5KCd1cmxUZXh0JykpIHtcclxuICAgICAgICBmb290ZXJUZW1wbGF0ZS51cmxUZXh0ID0gbWFwT3B0aW9ucy5mb290ZXJbMF0udXJsVGV4dDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgICQoZWwpLmh0bWwodGVtcGxhdGUoZm9vdGVyVGVtcGxhdGUpKTtcclxuICB9XHJcblxyXG5tb2R1bGUuZXhwb3J0cy5pbml0ID0gaW5pdDtcclxubW9kdWxlLmV4cG9ydHMuY3JlYXRlTGF5ZXJzID0gY3JlYXRlTGF5ZXJzO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRCYXNlVXJsID0gZ2V0QmFzZVVybDtcclxubW9kdWxlLmV4cG9ydHMuZ2V0RXh0ZW50ID0gZ2V0RXh0ZW50O1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRTZXR0aW5ncyA9IGdldFNldHRpbmdzO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRTdHlsZVNldHRpbmdzID0gZ2V0U3R5bGVTZXR0aW5ncztcclxubW9kdWxlLmV4cG9ydHMuZ2V0TWFwVXJsID0gZ2V0TWFwVXJsO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRNYXAgPSBnZXRNYXA7XHJcbm1vZHVsZS5leHBvcnRzLmdldExheWVycyA9IGdldExheWVycztcclxubW9kdWxlLmV4cG9ydHMuZ2V0TGF5ZXJzQnlQcm9wZXJ0eSA9IGdldExheWVyc0J5UHJvcGVydHk7XHJcbm1vZHVsZS5leHBvcnRzLmdldExheWVyID0gZ2V0TGF5ZXI7XHJcbm1vZHVsZS5leHBvcnRzLmdldENvbnRyb2xOYW1lcyA9IGdldENvbnRyb2xOYW1lcztcclxubW9kdWxlLmV4cG9ydHMuZ2V0UXVlcnlhYmxlTGF5ZXJzID0gZ2V0UXVlcnlhYmxlTGF5ZXJzO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRHcm91cCA9IGdldEdyb3VwO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRHcm91cHMgPSBnZXRHcm91cHM7XHJcbm1vZHVsZS5leHBvcnRzLmdldFByb2plY3Rpb25Db2RlID0gZ2V0UHJvamVjdGlvbkNvZGU7XHJcbm1vZHVsZS5leHBvcnRzLmdldFByb2plY3Rpb24gPSBnZXRQcm9qZWN0aW9uO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRNYXBTb3VyY2UgPSBnZXRNYXBTb3VyY2U7XHJcbm1vZHVsZS5leHBvcnRzLmdldFJlc29sdXRpb25zID0gZ2V0UmVzb2x1dGlvbnM7XHJcbm1vZHVsZS5leHBvcnRzLmdldFNjYWxlID0gZ2V0U2NhbGU7XHJcbm1vZHVsZS5leHBvcnRzLmdldFRhcmdldCA9IGdldFRhcmdldDtcclxubW9kdWxlLmV4cG9ydHMuZ2V0VGlsZUdyaWQgPSBnZXRUaWxlR3JpZDtcclxubW9kdWxlLmV4cG9ydHMuYXV0b1BhbiA9IGF1dG9QYW47XHJcbm1vZHVsZS5leHBvcnRzLnJlbW92ZU92ZXJsYXlzID0gcmVtb3ZlT3ZlcmxheXM7XHJcbm1vZHVsZS5leHBvcnRzLmNoZWNrU2NhbGU9IGNoZWNrU2NhbGU7XHJcbm1vZHVsZS5leHBvcnRzLmdldE1hcE5hbWUgPSBnZXRNYXBOYW1lO1xyXG5tb2R1bGUuZXhwb3J0cy5nZXRDb25zb2xlSWQgPSBnZXRDb25zb2xlSWQ7XHJcbm1vZHVsZS5leHBvcnRzLmdldFVybCA9IGdldFVybDtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG52YXIgb2wgPSByZXF1aXJlKCdvcGVubGF5ZXJzJyk7XHJcbnZhciAkID0gcmVxdWlyZSgnanF1ZXJ5Jyk7XHJcbnZhciBWaWV3ZXIgPSByZXF1aXJlKCcuL3ZpZXdlcicpO1xyXG5cclxudmFyIG1hcDtcclxuXHJcbmZ1bmN0aW9uIEluaXQob3B0X29wdGlvbnMpIHtcclxuICB2YXIgb3B0aW9ucyA9IG9wdF9vcHRpb25zIHx8IHt9O1xyXG4gIHZhciB6b29tQ29udHJvbDtcclxuICB2YXIgdGFyZ2V0ID0gb3B0aW9ucy50YXJnZXQgfHwgJ28tdG9vbGJhci1uYXZpZ2F0aW9uJztcclxuICBtYXAgPSBWaWV3ZXIuZ2V0TWFwKCk7XHJcblxyXG4gIHpvb21Db250cm9sID0gbmV3IG9sLmNvbnRyb2wuWm9vbSh7XHJcbiAgICB6b29tSW5UaXBMYWJlbDogJyAnLFxyXG4gICAgem9vbU91dFRpcExhYmVsOiAnICcsXHJcbiAgICB6b29tSW5MYWJlbDogJC5wYXJzZUhUTUwoJzxzdmcgY2xhc3M9XCJvLWljb24tZmEtcGx1c1wiPjx1c2UgeGxpbms6aHJlZj1cIiNmYS1wbHVzXCI+PC91c2U+PC9zdmc+JylbMF0sXHJcbiAgICB6b29tT3V0TGFiZWw6ICQucGFyc2VIVE1MKCc8c3ZnIGNsYXNzPVwiby1pY29uLWZhLW1pbnVzXCI+PHVzZSB4bGluazpocmVmPVwiI2ZhLW1pbnVzXCI+PC91c2U+PC9zdmc+JylbMF0sXHJcbiAgICB0YXJnZXQ6IHRhcmdldFxyXG4gIH0pO1xyXG4gIG1hcC5hZGRDb250cm9sKHpvb21Db250cm9sKTtcclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMuaW5pdCA9IEluaXQ7XHJcbiJdfQ==
