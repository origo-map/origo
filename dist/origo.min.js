!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.origo=f()}}(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"function"!=typeof Object.create&&(Object.create=function(f){function g(){}return g.prototype=f,new g}),function(f,g,k){var l={init:function(a,b){this.$elem=f(b),this.options=f.extend({},f.fn.owlCarousel.options,this.$elem.data(),a),this.userOptions=a,this.loadContent()},loadContent:function(){function a(a){var d,e="";if("function"==typeof b.options.jsonSuccess)b.options.jsonSuccess.apply(this,[a]);else{for(d in a.owl)a.owl.hasOwnProperty(d)&&(e+=a.owl[d].item);b.$elem.html(e)}b.logIn()}var e,b=this;"function"==typeof b.options.beforeInit&&b.options.beforeInit.apply(this,[b.$elem]),"string"==typeof b.options.jsonPath?(e=b.options.jsonPath,f.getJSON(e,a)):b.logIn()},logIn:function(){this.$elem.data("owl-originalStyles",this.$elem.attr("style")),this.$elem.data("owl-originalClasses",this.$elem.attr("class")),this.$elem.css({opacity:0}),this.orignalItems=this.options.items,this.checkBrowser(),this.wrapperWidth=0,this.checkVisible=null,this.setVars()},setVars:function(){return 0===this.$elem.children().length?!1:(this.baseClass(),this.eventTypes(),this.$userItems=this.$elem.children(),this.itemsAmount=this.$userItems.length,this.wrapItems(),this.$owlItems=this.$elem.find(".owl-item"),this.$owlWrapper=this.$elem.find(".owl-wrapper"),this.playDirection="next",this.prevItem=0,this.prevArr=[0],this.currentItem=0,this.customEvents(),void this.onStartup())},onStartup:function(){this.updateItems(),this.calculateAll(),this.buildControls(),this.updateControls(),this.response(),this.moveEvents(),this.stopOnHover(),this.owlStatus(),!1!==this.options.transitionStyle&&this.transitionTypes(this.options.transitionStyle),!0===this.options.autoPlay&&(this.options.autoPlay=5e3),this.play(),this.$elem.find(".owl-wrapper").css("display","block"),this.$elem.is(":visible")?this.$elem.css("opacity",1):this.watchVisibility(),this.onstartup=!1,this.eachMoveUpdate(),"function"==typeof this.options.afterInit&&this.options.afterInit.apply(this,[this.$elem])},eachMoveUpdate:function(){!0===this.options.lazyLoad&&this.lazyLoad(),!0===this.options.autoHeight&&this.autoHeight(),this.onVisibleItems(),"function"==typeof this.options.afterAction&&this.options.afterAction.apply(this,[this.$elem])},updateVars:function(){"function"==typeof this.options.beforeUpdate&&this.options.beforeUpdate.apply(this,[this.$elem]),this.watchVisibility(),this.updateItems(),this.calculateAll(),this.updatePosition(),this.updateControls(),this.eachMoveUpdate(),"function"==typeof this.options.afterUpdate&&this.options.afterUpdate.apply(this,[this.$elem])},reload:function(){var a=this;g.setTimeout(function(){a.updateVars()},0)},watchVisibility:function(){var a=this;return!1!==a.$elem.is(":visible")?!1:(a.$elem.css({opacity:0}),g.clearInterval(a.autoPlayInterval),g.clearInterval(a.checkVisible),void(a.checkVisible=g.setInterval(function(){a.$elem.is(":visible")&&(a.reload(),a.$elem.animate({opacity:1},200),g.clearInterval(a.checkVisible))},500)))},wrapItems:function(){this.$userItems.wrapAll('<div class="owl-wrapper">').wrap('<div class="owl-item"></div>'),this.$elem.find(".owl-wrapper").wrap('<div class="owl-wrapper-outer">'),this.wrapperOuter=this.$elem.find(".owl-wrapper-outer"),this.$elem.css("display","block")},baseClass:function(){var a=this.$elem.hasClass(this.options.baseClass),b=this.$elem.hasClass(this.options.theme);a||this.$elem.addClass(this.options.baseClass),b||this.$elem.addClass(this.options.theme)},updateItems:function(){var a,b;if(!1===this.options.responsive)return!1;if(!0===this.options.singleItem)return this.options.items=this.orignalItems=1,this.options.itemsCustom=!1,this.options.itemsDesktop=!1,this.options.itemsDesktopSmall=!1,this.options.itemsTablet=!1,this.options.itemsTabletSmall=!1,this.options.itemsMobile=!1;if(a=f(this.options.responsiveBaseWidth).width(),a>(this.options.itemsDesktop[0]||this.orignalItems)&&(this.options.items=this.orignalItems),!1!==this.options.itemsCustom)for(this.options.itemsCustom.sort(function(a,b){return a[0]-b[0]}),b=0;b<this.options.itemsCustom.length;b+=1)this.options.itemsCustom[b][0]<=a&&(this.options.items=this.options.itemsCustom[b][1]);else a<=this.options.itemsDesktop[0]&&!1!==this.options.itemsDesktop&&(this.options.items=this.options.itemsDesktop[1]),a<=this.options.itemsDesktopSmall[0]&&!1!==this.options.itemsDesktopSmall&&(this.options.items=this.options.itemsDesktopSmall[1]),a<=this.options.itemsTablet[0]&&!1!==this.options.itemsTablet&&(this.options.items=this.options.itemsTablet[1]),a<=this.options.itemsTabletSmall[0]&&!1!==this.options.itemsTabletSmall&&(this.options.items=this.options.itemsTabletSmall[1]),a<=this.options.itemsMobile[0]&&!1!==this.options.itemsMobile&&(this.options.items=this.options.itemsMobile[1]);this.options.items>this.itemsAmount&&!0===this.options.itemsScaleUp&&(this.options.items=this.itemsAmount)},response:function(){var b,e,a=this;return!0!==a.options.responsive?!1:(e=f(g).width(),a.resizer=function(){f(g).width()!==e&&(!1!==a.options.autoPlay&&g.clearInterval(a.autoPlayInterval),g.clearTimeout(b),b=g.setTimeout(function(){e=f(g).width(),a.updateVars()},a.options.responsiveRefreshRate))},void f(g).resize(a.resizer))},updatePosition:function(){this.jumpTo(this.currentItem),!1!==this.options.autoPlay&&this.checkAp()},appendItemsSizes:function(){var a=this,b=0,e=a.itemsAmount-a.options.items;a.$owlItems.each(function(c){var d=f(this);d.css({width:a.itemWidth}).data("owl-item",Number(c)),(0===c%a.options.items||c===e)&&(c>e||(b+=1)),d.data("owl-roundPages",b)})},appendWrapperSizes:function(){this.$owlWrapper.css({width:this.$owlItems.length*this.itemWidth*2,left:0}),this.appendItemsSizes()},calculateAll:function(){this.calculateWidth(),this.appendWrapperSizes(),this.loops(),this.max()},calculateWidth:function(){this.itemWidth=Math.round(this.$elem.width()/this.options.items)},max:function(){var a=-1*(this.itemsAmount*this.itemWidth-this.options.items*this.itemWidth);return this.options.items>this.itemsAmount?this.maximumPixels=a=this.maximumItem=0:(this.maximumItem=this.itemsAmount-this.options.items,this.maximumPixels=a),a},min:function(){return 0},loops:function(){var e,c,a=0,b=0;for(this.positionsInArray=[0],this.pagesInArray=[],e=0;e<this.itemsAmount;e+=1)b+=this.itemWidth,this.positionsInArray.push(-b),!0===this.options.scrollPerPage&&(c=f(this.$owlItems[e]),c=c.data("owl-roundPages"),c!==a&&(this.pagesInArray[a]=this.positionsInArray[e],a=c))},buildControls:function(){(!0===this.options.navigation||!0===this.options.pagination)&&(this.owlControls=f('<div class="owl-controls"/>').toggleClass("clickable",!this.browser.isTouch).appendTo(this.$elem)),!0===this.options.pagination&&this.buildPagination(),!0===this.options.navigation&&this.buildButtons()},buildButtons:function(){var a=this,b=f('<div class="owl-buttons"/>');a.owlControls.append(b),a.buttonPrev=f("<div/>",{"class":"owl-prev",html:a.options.navigationText[0]||""}),a.buttonNext=f("<div/>",{"class":"owl-next",html:a.options.navigationText[1]||""}),b.append(a.buttonPrev).append(a.buttonNext),b.on("touchstart.owlControls mousedown.owlControls",'div[class^="owl"]',function(a){a.preventDefault()}),b.on("touchend.owlControls mouseup.owlControls",'div[class^="owl"]',function(b){b.preventDefault(),f(this).hasClass("owl-next")?a.next():a.prev()})},buildPagination:function(){var a=this;a.paginationWrapper=f('<div class="owl-pagination"/>'),a.owlControls.append(a.paginationWrapper),a.paginationWrapper.on("touchend.owlControls mouseup.owlControls",".owl-page",function(b){b.preventDefault(),Number(f(this).data("owl-page"))!==a.currentItem&&a.goTo(Number(f(this).data("owl-page")),!0)})},updatePagination:function(){var a,b,e,c,d,g;if(!1===this.options.pagination)return!1;for(this.paginationWrapper.html(""),a=0,b=this.itemsAmount-this.itemsAmount%this.options.items,c=0;c<this.itemsAmount;c+=1)0===c%this.options.items&&(a+=1,b===c&&(e=this.itemsAmount-this.options.items),d=f("<div/>",{"class":"owl-page"}),g=f("<span></span>",{text:!0===this.options.paginationNumbers?a:"","class":!0===this.options.paginationNumbers?"owl-numbers":""}),d.append(g),d.data("owl-page",b===c?e:c),d.data("owl-roundPages",a),this.paginationWrapper.append(d));this.checkPagination()},checkPagination:function(){var a=this;return!1===a.options.pagination?!1:void a.paginationWrapper.find(".owl-page").each(function(){f(this).data("owl-roundPages")===f(a.$owlItems[a.currentItem]).data("owl-roundPages")&&(a.paginationWrapper.find(".owl-page").removeClass("active"),f(this).addClass("active"))})},checkNavigation:function(){return!1===this.options.navigation?!1:void(!1===this.options.rewindNav&&(0===this.currentItem&&0===this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.addClass("disabled")):0===this.currentItem&&0!==this.maximumItem?(this.buttonPrev.addClass("disabled"),this.buttonNext.removeClass("disabled")):this.currentItem===this.maximumItem?(this.buttonPrev.removeClass("disabled"),this.buttonNext.addClass("disabled")):0!==this.currentItem&&this.currentItem!==this.maximumItem&&(this.buttonPrev.removeClass("disabled"),this.buttonNext.removeClass("disabled"))))},updateControls:function(){this.updatePagination(),this.checkNavigation(),this.owlControls&&(this.options.items>=this.itemsAmount?this.owlControls.hide():this.owlControls.show())},destroyControls:function(){this.owlControls&&this.owlControls.remove()},next:function(a){if(this.isTransition)return!1;if(this.currentItem+=!0===this.options.scrollPerPage?this.options.items:1,this.currentItem>this.maximumItem+(!0===this.options.scrollPerPage?this.options.items-1:0)){if(!0!==this.options.rewindNav)return this.currentItem=this.maximumItem,!1;this.currentItem=0,a="rewind"}this.goTo(this.currentItem,a)},prev:function(a){if(this.isTransition)return!1;if(this.currentItem=!0===this.options.scrollPerPage&&0<this.currentItem&&this.currentItem<this.options.items?0:this.currentItem-(!0===this.options.scrollPerPage?this.options.items:1),0>this.currentItem){if(!0!==this.options.rewindNav)return this.currentItem=0,!1;this.currentItem=this.maximumItem,a="rewind"}this.goTo(this.currentItem,a)},goTo:function(a,b,e){var c=this;return c.isTransition?!1:("function"==typeof c.options.beforeMove&&c.options.beforeMove.apply(this,[c.$elem]),a>=c.maximumItem?a=c.maximumItem:0>=a&&(a=0),c.currentItem=c.owl.currentItem=a,!1!==c.options.transitionStyle&&"drag"!==e&&1===c.options.items&&!0===c.browser.support3d?(c.swapSpeed(0),!0===c.browser.support3d?c.transition3d(c.positionsInArray[a]):c.css2slide(c.positionsInArray[a],1),c.afterGo(),c.singleItemTransition(),!1):(a=c.positionsInArray[a],!0===c.browser.support3d?(c.isCss3Finish=!1,!0===b?(c.swapSpeed("paginationSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.paginationSpeed)):"rewind"===b?(c.swapSpeed(c.options.rewindSpeed),g.setTimeout(function(){c.isCss3Finish=!0},c.options.rewindSpeed)):(c.swapSpeed("slideSpeed"),g.setTimeout(function(){c.isCss3Finish=!0},c.options.slideSpeed)),c.transition3d(a)):!0===b?c.css2slide(a,c.options.paginationSpeed):"rewind"===b?c.css2slide(a,c.options.rewindSpeed):c.css2slide(a,c.options.slideSpeed),void c.afterGo()))},jumpTo:function(a){"function"==typeof this.options.beforeMove&&this.options.beforeMove.apply(this,[this.$elem]),a>=this.maximumItem||-1===a?a=this.maximumItem:0>=a&&(a=0),this.swapSpeed(0),!0===this.browser.support3d?this.transition3d(this.positionsInArray[a]):this.css2slide(this.positionsInArray[a],1),this.currentItem=this.owl.currentItem=a,this.afterGo()},afterGo:function(){this.prevArr.push(this.currentItem),this.prevItem=this.owl.prevItem=this.prevArr[this.prevArr.length-2],this.prevArr.shift(0),this.prevItem!==this.currentItem&&(this.checkPagination(),this.checkNavigation(),this.eachMoveUpdate(),!1!==this.options.autoPlay&&this.checkAp()),"function"==typeof this.options.afterMove&&this.prevItem!==this.currentItem&&this.options.afterMove.apply(this,[this.$elem])},stop:function(){this.apStatus="stop",g.clearInterval(this.autoPlayInterval)},checkAp:function(){"stop"!==this.apStatus&&this.play()},play:function(){var a=this;return a.apStatus="play",!1===a.options.autoPlay?!1:(g.clearInterval(a.autoPlayInterval),void(a.autoPlayInterval=g.setInterval(function(){a.next(!0)},a.options.autoPlay)))},swapSpeed:function(a){"slideSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.slideSpeed)):"paginationSpeed"===a?this.$owlWrapper.css(this.addCssSpeed(this.options.paginationSpeed)):"string"!=typeof a&&this.$owlWrapper.css(this.addCssSpeed(a))},addCssSpeed:function(a){return{"-webkit-transition":"all "+a+"ms ease","-moz-transition":"all "+a+"ms ease","-o-transition":"all "+a+"ms ease",transition:"all "+a+"ms ease"}},removeTransition:function(){return{"-webkit-transition":"","-moz-transition":"","-o-transition":"",transition:""}},doTranslate:function(a){return{"-webkit-transform":"translate3d("+a+"px, 0px, 0px)","-moz-transform":"translate3d("+a+"px, 0px, 0px)","-o-transform":"translate3d("+a+"px, 0px, 0px)","-ms-transform":"translate3d("+a+"px, 0px, 0px)",transform:"translate3d("+a+"px, 0px,0px)"}},transition3d:function(a){this.$owlWrapper.css(this.doTranslate(a))},css2move:function(a){this.$owlWrapper.css({left:a})},css2slide:function(a,b){var e=this;e.isCssFinish=!1,e.$owlWrapper.stop(!0,!0).animate({left:a},{duration:b||e.options.slideSpeed,complete:function(){e.isCssFinish=!0}})},checkBrowser:function(){var a=k.createElement("div");a.style.cssText="  -moz-transform:translate3d(0px, 0px, 0px); -ms-transform:translate3d(0px, 0px, 0px); -o-transform:translate3d(0px, 0px, 0px); -webkit-transform:translate3d(0px, 0px, 0px); transform:translate3d(0px, 0px, 0px)",a=a.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g),this.browser={support3d:null!==a&&1===a.length,isTouch:"ontouchstart"in g||g.navigator.msMaxTouchPoints}},moveEvents:function(){(!1!==this.options.mouseDrag||!1!==this.options.touchDrag)&&(this.gestures(),this.disabledEvents())},eventTypes:function(){var a=["s","e","x"];this.ev_types={},!0===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl mousedown.owl","touchmove.owl mousemove.owl","touchend.owl touchcancel.owl mouseup.owl"]:!1===this.options.mouseDrag&&!0===this.options.touchDrag?a=["touchstart.owl","touchmove.owl","touchend.owl touchcancel.owl"]:!0===this.options.mouseDrag&&!1===this.options.touchDrag&&(a=["mousedown.owl","mousemove.owl","mouseup.owl"]),this.ev_types.start=a[0],this.ev_types.move=a[1],this.ev_types.end=a[2]},disabledEvents:function(){this.$elem.on("dragstart.owl",function(a){a.preventDefault()}),this.$elem.on("mousedown.disableTextSelect",function(a){return f(a.target).is("input, textarea, select, option")})},gestures:function(){function a(a){if(void 0!==a.touches)return{x:a.touches[0].pageX,y:a.touches[0].pageY};if(void 0===a.touches){if(void 0!==a.pageX)return{x:a.pageX,y:a.pageY};if(void 0===a.pageX)return{x:a.clientX,y:a.clientY}}}function b(a){"on"===a?(f(k).on(d.ev_types.move,e),f(k).on(d.ev_types.end,c)):"off"===a&&(f(k).off(d.ev_types.move),f(k).off(d.ev_types.end))}function e(b){b=b.originalEvent||b||g.event,d.newPosX=a(b).x-h.offsetX,d.newPosY=a(b).y-h.offsetY,d.newRelativeX=d.newPosX-h.relativePos,"function"==typeof d.options.startDragging&&!0!==h.dragging&&0!==d.newRelativeX&&(h.dragging=!0,d.options.startDragging.apply(d,[d.$elem])),(8<d.newRelativeX||-8>d.newRelativeX)&&!0===d.browser.isTouch&&(void 0!==b.preventDefault?b.preventDefault():b.returnValue=!1,h.sliding=!0),(10<d.newPosY||-10>d.newPosY)&&!1===h.sliding&&f(k).off("touchmove.owl"),d.newPosX=Math.max(Math.min(d.newPosX,d.newRelativeX/5),d.maximumPixels+d.newRelativeX/5),!0===d.browser.support3d?d.transition3d(d.newPosX):d.css2move(d.newPosX)}function c(a){a=a.originalEvent||a||g.event;var c;a.target=a.target||a.srcElement,h.dragging=!1,!0!==d.browser.isTouch&&d.$owlWrapper.removeClass("grabbing"),d.dragDirection=0>d.newRelativeX?d.owl.dragDirection="left":d.owl.dragDirection="right",0!==d.newRelativeX&&(c=d.getNewPosition(),d.goTo(c,!1,"drag"),h.targetElement===a.target&&!0!==d.browser.isTouch&&(f(a.target).on("click.disable",function(a){a.stopImmediatePropagation(),a.stopPropagation(),a.preventDefault(),f(a.target).off("click.disable")}),a=f._data(a.target,"events").click,c=a.pop(),a.splice(0,0,c))),b("off")}var d=this,h={offsetX:0,offsetY:0,baseElWidth:0,relativePos:0,position:null,minSwipe:null,maxSwipe:null,sliding:null,dargging:null,targetElement:null};d.isCssFinish=!0,d.$elem.on(d.ev_types.start,".owl-wrapper",function(c){c=c.originalEvent||c||g.event;var e;if(3===c.which)return!1;if(!(d.itemsAmount<=d.options.items)){if(!1===d.isCssFinish&&!d.options.dragBeforeAnimFinish||!1===d.isCss3Finish&&!d.options.dragBeforeAnimFinish)return!1;!1!==d.options.autoPlay&&g.clearInterval(d.autoPlayInterval),!0===d.browser.isTouch||d.$owlWrapper.hasClass("grabbing")||d.$owlWrapper.addClass("grabbing"),d.newPosX=0,d.newRelativeX=0,f(this).css(d.removeTransition()),e=f(this).position(),h.relativePos=e.left,h.offsetX=a(c).x-e.left,h.offsetY=a(c).y-e.top,b("on"),h.sliding=!1,h.targetElement=c.target||c.srcElement}})},getNewPosition:function(){var a=this.closestItem();return a>this.maximumItem?a=this.currentItem=this.maximumItem:0<=this.newPosX&&(this.currentItem=a=0),a},closestItem:function(){var a=this,b=!0===a.options.scrollPerPage?a.pagesInArray:a.positionsInArray,e=a.newPosX,c=null;return f.each(b,function(d,g){e-a.itemWidth/20>b[d+1]&&e-a.itemWidth/20<g&&"left"===a.moveDirection()?(c=g,a.currentItem=!0===a.options.scrollPerPage?f.inArray(c,a.positionsInArray):d):e+a.itemWidth/20<g&&e+a.itemWidth/20>(b[d+1]||b[d]-a.itemWidth)&&"right"===a.moveDirection()&&(!0===a.options.scrollPerPage?(c=b[d+1]||b[b.length-1],a.currentItem=f.inArray(c,a.positionsInArray)):(c=b[d+1],a.currentItem=d+1))}),a.currentItem},moveDirection:function(){var a;return 0>this.newRelativeX?(a="right",this.playDirection="next"):(a="left",this.playDirection="prev"),a},customEvents:function(){var a=this;a.$elem.on("owl.next",function(){a.next()}),a.$elem.on("owl.prev",function(){a.prev()}),a.$elem.on("owl.play",function(b,e){a.options.autoPlay=e,a.play(),a.hoverStatus="play"}),a.$elem.on("owl.stop",function(){a.stop(),a.hoverStatus="stop"}),a.$elem.on("owl.goTo",function(b,e){a.goTo(e)}),a.$elem.on("owl.jumpTo",function(b,e){a.jumpTo(e)})},stopOnHover:function(){var a=this;!0===a.options.stopOnHover&&!0!==a.browser.isTouch&&!1!==a.options.autoPlay&&(a.$elem.on("mouseover",function(){a.stop()}),a.$elem.on("mouseout",function(){"stop"!==a.hoverStatus&&a.play()}))},lazyLoad:function(){var a,b,e,c,d;if(!1===this.options.lazyLoad)return!1;for(a=0;a<this.itemsAmount;a+=1)b=f(this.$owlItems[a]),"loaded"!==b.data("owl-loaded")&&(e=b.data("owl-item"),c=b.find(".lazyOwl"),"string"!=typeof c.data("src")?b.data("owl-loaded","loaded"):(void 0===b.data("owl-loaded")&&(c.hide(),b.addClass("loading").data("owl-loaded","checked")),(d=!0===this.options.lazyFollow?e>=this.currentItem:!0)&&e<this.currentItem+this.options.items&&c.length&&this.lazyPreload(b,c)))},lazyPreload:function(a,b){function e(){a.data("owl-loaded","loaded").removeClass("loading"),b.removeAttr("data-src"),"fade"===d.options.lazyEffect?b.fadeIn(400):b.show(),"function"==typeof d.options.afterLazyLoad&&d.options.afterLazyLoad.apply(this,[d.$elem])}function c(){f+=1,d.completeImg(b.get(0))||!0===k?e():100>=f?g.setTimeout(c,100):e()}var k,d=this,f=0;"DIV"===b.prop("tagName")?(b.css("background-image","url("+b.data("src")+")"),k=!0):b[0].src=b.data("src"),c()},autoHeight:function(){function a(){var a=f(e.$owlItems[e.currentItem]).height();e.wrapperOuter.css("height",a+"px"),e.wrapperOuter.hasClass("autoHeight")||g.setTimeout(function(){e.wrapperOuter.addClass("autoHeight")},0)}function b(){d+=1,e.completeImg(c.get(0))?a():100>=d?g.setTimeout(b,100):e.wrapperOuter.css("height","")}var d,e=this,c=f(e.$owlItems[e.currentItem]).find("img");void 0!==c.get(0)?(d=0,b()):a()},completeImg:function(a){return!a.complete||"undefined"!=typeof a.naturalWidth&&0===a.naturalWidth?!1:!0},onVisibleItems:function(){var a;for(!0===this.options.addClassActive&&this.$owlItems.removeClass("active"),this.visibleItems=[],a=this.currentItem;a<this.currentItem+this.options.items;a+=1)this.visibleItems.push(a),!0===this.options.addClassActive&&f(this.$owlItems[a]).addClass("active");this.owl.visibleItems=this.visibleItems},transitionTypes:function(a){this.outClass="owl-"+a+"-out",this.inClass="owl-"+a+"-in"},singleItemTransition:function(){var a=this,b=a.outClass,e=a.inClass,c=a.$owlItems.eq(a.currentItem),d=a.$owlItems.eq(a.prevItem),f=Math.abs(a.positionsInArray[a.currentItem])+a.positionsInArray[a.prevItem],g=Math.abs(a.positionsInArray[a.currentItem])+a.itemWidth/2;a.isTransition=!0,a.$owlWrapper.addClass("owl-origin").css({"-webkit-transform-origin":g+"px","-moz-perspective-origin":g+"px","perspective-origin":g+"px"}),d.css({position:"relative",left:f+"px"}).addClass(b).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endPrev=!0,d.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),a.clearTransStyle(d,b)}),c.addClass(e).on("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend",function(){a.endCurrent=!0,c.off("webkitAnimationEnd oAnimationEnd MSAnimationEnd animationend"),a.clearTransStyle(c,e)})},clearTransStyle:function(a,b){a.css({position:"",left:""}).removeClass(b),this.endPrev&&this.endCurrent&&(this.$owlWrapper.removeClass("owl-origin"),this.isTransition=this.endCurrent=this.endPrev=!1)},owlStatus:function(){this.owl={userOptions:this.userOptions,baseElement:this.$elem,userItems:this.$userItems,owlItems:this.$owlItems,currentItem:this.currentItem,prevItem:this.prevItem,visibleItems:this.visibleItems,isTouch:this.browser.isTouch,browser:this.browser,dragDirection:this.dragDirection}},clearEvents:function(){this.$elem.off(".owl owl mousedown.disableTextSelect"),f(k).off(".owl owl"),f(g).off("resize",this.resizer)},unWrap:function(){0!==this.$elem.children().length&&(this.$owlWrapper.unwrap(),this.$userItems.unwrap().unwrap(),this.owlControls&&this.owlControls.remove()),this.clearEvents(),this.$elem.attr("style",this.$elem.data("owl-originalStyles")||"").attr("class",this.$elem.data("owl-originalClasses"))},destroy:function(){this.stop(),g.clearInterval(this.checkVisible),this.unWrap(),this.$elem.removeData()},reinit:function(a){a=f.extend({},this.userOptions,a),this.unWrap(),this.init(a,this.$elem)},addItem:function(a,b){var e;return a?0===this.$elem.children().length?(this.$elem.append(a),this.setVars(),!1):(this.unWrap(),e=void 0===b||-1===b?-1:b,e>=this.$userItems.length||-1===e?this.$userItems.eq(-1).after(a):this.$userItems.eq(e).before(a),void this.setVars()):!1},removeItem:function(a){return 0===this.$elem.children().length?!1:(a=void 0===a||-1===a?-1:a,this.unWrap(),this.$userItems.eq(a).remove(),void this.setVars())}};f.fn.owlCarousel=function(a){return this.each(function(){if(!0===f(this).data("owl-init"))return!1;f(this).data("owl-init",!0);var b=Object.create(l);b.init(a,this),f.data(this,"owlCarousel",b)})},f.fn.owlCarousel.options={items:5,itemsCustom:!1,itemsDesktop:[1199,4],itemsDesktopSmall:[979,3],itemsTablet:[768,2],itemsTabletSmall:!1,itemsMobile:[479,1],singleItem:!1,itemsScaleUp:!1,slideSpeed:200,paginationSpeed:800,rewindSpeed:1e3,autoPlay:!1,stopOnHover:!1,navigation:!1,navigationText:["prev","next"],rewindNav:!0,scrollPerPage:!1,pagination:!0,paginationNumbers:!1,responsive:!0,responsiveRefreshRate:200,responsiveBaseWidth:g,baseClass:"owl-carousel",theme:"owl-theme",lazyLoad:!1,lazyFollow:!0,lazyEffect:"fade",autoHeight:!1,jsonPath:!1,jsonSuccess:!1,dragBeforeAnimFinish:!0,mouseDrag:!0,touchDrag:!0,addClassActive:!1,transitionStyle:!1,beforeUpdate:!1,afterUpdate:!1,beforeInit:!1,afterInit:!1,beforeMove:!1,afterMove:!1,afterAction:!1,startDragging:!1,afterLazyLoad:!1}}(jQuery,window,document)},{}],2:[function(require,module,exports){module.exports={loadjQueryPlugin:function(){require("./owl.carousel.min.js")}}},{"./owl.carousel.min.js":1}],3:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function create(){var hb=new base.HandlebarsEnvironment;return Utils.extend(hb,base),hb.SafeString=_handlebarsSafeString2["default"],hb.Exception=_handlebarsException2["default"],hb.Utils=Utils,hb.escapeExpression=Utils.escapeExpression,hb.VM=runtime,hb.template=function(spec){return runtime.template(spec,hb)},hb}exports.__esModule=!0;var _handlebarsBase=require("./handlebars/base"),base=_interopRequireWildcard(_handlebarsBase),_handlebarsSafeString=require("./handlebars/safe-string"),_handlebarsSafeString2=_interopRequireDefault(_handlebarsSafeString),_handlebarsException=require("./handlebars/exception"),_handlebarsException2=_interopRequireDefault(_handlebarsException),_handlebarsUtils=require("./handlebars/utils"),Utils=_interopRequireWildcard(_handlebarsUtils),_handlebarsRuntime=require("./handlebars/runtime"),runtime=_interopRequireWildcard(_handlebarsRuntime),_handlebarsNoConflict=require("./handlebars/no-conflict"),_handlebarsNoConflict2=_interopRequireDefault(_handlebarsNoConflict),inst=create();inst.create=create,_handlebarsNoConflict2["default"](inst),inst["default"]=inst,exports["default"]=inst,module.exports=exports["default"]},{"./handlebars/base":4,"./handlebars/exception":7,"./handlebars/no-conflict":17,"./handlebars/runtime":18,"./handlebars/safe-string":19,"./handlebars/utils":20}],4:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function HandlebarsEnvironment(helpers,partials,decorators){this.helpers=helpers||{},this.partials=partials||{},this.decorators=decorators||{},_helpers.registerDefaultHelpers(this),_decorators.registerDefaultDecorators(this)}exports.__esModule=!0,exports.HandlebarsEnvironment=HandlebarsEnvironment;var _utils=require("./utils"),_exception=require("./exception"),_exception2=_interopRequireDefault(_exception),_helpers=require("./helpers"),_decorators=require("./decorators"),_logger=require("./logger"),_logger2=_interopRequireDefault(_logger),VERSION="4.0.5";exports.VERSION=VERSION;var COMPILER_REVISION=7;exports.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};exports.REVISION_CHANGES=REVISION_CHANGES;var objectType="[object Object]";HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:_logger2["default"],log:_logger2["default"].log,registerHelper:function(name,fn){if(_utils.toString.call(name)===objectType){if(fn)throw new _exception2["default"]("Arg not supported with multiple helpers");_utils.extend(this.helpers,name)}else this.helpers[name]=fn},unregisterHelper:function(name){delete this.helpers[name]},registerPartial:function(name,partial){if(_utils.toString.call(name)===objectType)_utils.extend(this.partials,name);else{if("undefined"==typeof partial)throw new _exception2["default"]('Attempting to register a partial called "'+name+'" as undefined');this.partials[name]=partial}},unregisterPartial:function(name){delete this.partials[name]},registerDecorator:function(name,fn){if(_utils.toString.call(name)===objectType){if(fn)throw new _exception2["default"]("Arg not supported with multiple decorators");_utils.extend(this.decorators,name)}else this.decorators[name]=fn},unregisterDecorator:function(name){delete this.decorators[name]}};var log=_logger2["default"].log;exports.log=log,exports.createFrame=_utils.createFrame,exports.logger=_logger2["default"]},{"./decorators":5,"./exception":7,"./helpers":8,"./logger":16,"./utils":20}],5:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function registerDefaultDecorators(instance){_decoratorsInline2["default"](instance)}exports.__esModule=!0,exports.registerDefaultDecorators=registerDefaultDecorators;var _decoratorsInline=require("./decorators/inline"),_decoratorsInline2=_interopRequireDefault(_decoratorsInline)},{"./decorators/inline":6}],6:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("../utils");exports["default"]=function(instance){instance.registerDecorator("inline",function(fn,props,container,options){var ret=fn;return props.partials||(props.partials={},ret=function(context,options){var original=container.partials;container.partials=_utils.extend({},original,props.partials);var ret=fn(context,options);return container.partials=original,ret}),props.partials[options.args[0]]=options.fn,ret})},module.exports=exports["default"]},{"../utils":20}],7:[function(require,module,exports){"use strict";function Exception(message,node){var loc=node&&node.loc,line=void 0,column=void 0;loc&&(line=loc.start.line,column=loc.start.column,message+=" - "+line+":"+column);for(var tmp=Error.prototype.constructor.call(this,message),idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];Error.captureStackTrace&&Error.captureStackTrace(this,Exception),loc&&(this.lineNumber=line,this.column=column)}exports.__esModule=!0;var errorProps=["description","fileName","lineNumber","message","name","number","stack"];Exception.prototype=new Error,exports["default"]=Exception,module.exports=exports["default"]},{}],8:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function registerDefaultHelpers(instance){_helpersBlockHelperMissing2["default"](instance),_helpersEach2["default"](instance),_helpersHelperMissing2["default"](instance),_helpersIf2["default"](instance),_helpersLog2["default"](instance),_helpersLookup2["default"](instance),_helpersWith2["default"](instance)}exports.__esModule=!0,exports.registerDefaultHelpers=registerDefaultHelpers;var _helpersBlockHelperMissing=require("./helpers/block-helper-missing"),_helpersBlockHelperMissing2=_interopRequireDefault(_helpersBlockHelperMissing),_helpersEach=require("./helpers/each"),_helpersEach2=_interopRequireDefault(_helpersEach),_helpersHelperMissing=require("./helpers/helper-missing"),_helpersHelperMissing2=_interopRequireDefault(_helpersHelperMissing),_helpersIf=require("./helpers/if"),_helpersIf2=_interopRequireDefault(_helpersIf),_helpersLog=require("./helpers/log"),_helpersLog2=_interopRequireDefault(_helpersLog),_helpersLookup=require("./helpers/lookup"),_helpersLookup2=_interopRequireDefault(_helpersLookup),_helpersWith=require("./helpers/with"),_helpersWith2=_interopRequireDefault(_helpersWith)},{"./helpers/block-helper-missing":9,"./helpers/each":10,"./helpers/helper-missing":11,"./helpers/if":12,"./helpers/log":13,"./helpers/lookup":14,"./helpers/with":15}],9:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("../utils");exports["default"]=function(instance){instance.registerHelper("blockHelperMissing",function(context,options){
var inverse=options.inverse,fn=options.fn;if(context===!0)return fn(this);if(context===!1||null==context)return inverse(this);if(_utils.isArray(context))return context.length>0?(options.ids&&(options.ids=[options.name]),instance.helpers.each(context,options)):inverse(this);if(options.data&&options.ids){var data=_utils.createFrame(options.data);data.contextPath=_utils.appendContextPath(options.data.contextPath,options.name),options={data:data}}return fn(context,options)})},module.exports=exports["default"]},{"../utils":20}],10:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _utils=require("../utils"),_exception=require("../exception"),_exception2=_interopRequireDefault(_exception);exports["default"]=function(instance){instance.registerHelper("each",function(context,options){function execIteration(field,index,last){data&&(data.key=field,data.index=index,data.first=0===index,data.last=!!last,contextPath&&(data.contextPath=contextPath+field)),ret+=fn(context[field],{data:data,blockParams:_utils.blockParams([context[field],field],[contextPath+field,null])})}if(!options)throw new _exception2["default"]("Must pass iterator to #each");var fn=options.fn,inverse=options.inverse,i=0,ret="",data=void 0,contextPath=void 0;if(options.data&&options.ids&&(contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])+"."),_utils.isFunction(context)&&(context=context.call(this)),options.data&&(data=_utils.createFrame(options.data)),context&&"object"==typeof context)if(_utils.isArray(context))for(var j=context.length;j>i;i++)i in context&&execIteration(i,i,i===context.length-1);else{var priorKey=void 0;for(var key in context)context.hasOwnProperty(key)&&(void 0!==priorKey&&execIteration(priorKey,i-1),priorKey=key,i++);void 0!==priorKey&&execIteration(priorKey,i-1,!0)}return 0===i&&(ret=inverse(this)),ret})},module.exports=exports["default"]},{"../exception":7,"../utils":20}],11:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}exports.__esModule=!0;var _exception=require("../exception"),_exception2=_interopRequireDefault(_exception);exports["default"]=function(instance){instance.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new _exception2["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},module.exports=exports["default"]},{"../exception":7}],12:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("../utils");exports["default"]=function(instance){instance.registerHelper("if",function(conditional,options){return _utils.isFunction(conditional)&&(conditional=conditional.call(this)),!options.hash.includeZero&&!conditional||_utils.isEmpty(conditional)?options.inverse(this):options.fn(this)}),instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})})},module.exports=exports["default"]},{"../utils":20}],13:[function(require,module,exports){"use strict";exports.__esModule=!0,exports["default"]=function(instance){instance.registerHelper("log",function(){for(var args=[void 0],options=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)args.push(arguments[i]);var level=1;null!=options.hash.level?level=options.hash.level:options.data&&null!=options.data.level&&(level=options.data.level),args[0]=level,instance.log.apply(instance,args)})},module.exports=exports["default"]},{}],14:[function(require,module,exports){"use strict";exports.__esModule=!0,exports["default"]=function(instance){instance.registerHelper("lookup",function(obj,field){return obj&&obj[field]})},module.exports=exports["default"]},{}],15:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("../utils");exports["default"]=function(instance){instance.registerHelper("with",function(context,options){_utils.isFunction(context)&&(context=context.call(this));var fn=options.fn;if(_utils.isEmpty(context))return options.inverse(this);var data=options.data;return options.data&&options.ids&&(data=_utils.createFrame(options.data),data.contextPath=_utils.appendContextPath(options.data.contextPath,options.ids[0])),fn(context,{data:data,blockParams:_utils.blockParams([context],[data&&data.contextPath])})})},module.exports=exports["default"]},{"../utils":20}],16:[function(require,module,exports){"use strict";exports.__esModule=!0;var _utils=require("./utils"),logger={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(level){if("string"==typeof level){var levelMap=_utils.indexOf(logger.methodMap,level.toLowerCase());level=levelMap>=0?levelMap:parseInt(level,10)}return level},log:function(level){if(level=logger.lookupLevel(level),"undefined"!=typeof console&&logger.lookupLevel(logger.level)<=level){var method=logger.methodMap[level];console[method]||(method="log");for(var _len=arguments.length,message=Array(_len>1?_len-1:0),_key=1;_len>_key;_key++)message[_key-1]=arguments[_key];console[method].apply(console,message)}}};exports["default"]=logger,module.exports=exports["default"]},{"./utils":20}],17:[function(require,module,exports){(function(global){"use strict";exports.__esModule=!0,exports["default"]=function(Handlebars){var root="undefined"!=typeof global?global:window,$Handlebars=root.Handlebars;Handlebars.noConflict=function(){return root.Handlebars===Handlebars&&(root.Handlebars=$Handlebars),Handlebars}},module.exports=exports["default"]}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj["default"]=obj,newObj}function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=_base.COMPILER_REVISION;if(compilerRevision!==currentRevision){if(currentRevision>compilerRevision){var runtimeVersions=_base.REVISION_CHANGES[currentRevision],compilerVersions=_base.REVISION_CHANGES[compilerRevision];throw new _exception2["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}throw new _exception2["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+compilerInfo[1]+").")}}function template(templateSpec,env){function invokePartialWrapper(partial,context,options){options.hash&&(context=Utils.extend({},context,options.hash),options.ids&&(options.ids[0]=!0)),partial=env.VM.resolvePartial.call(this,partial,context,options);var result=env.VM.invokePartial.call(this,partial,context,options);if(null==result&&env.compile&&(options.partials[options.name]=env.compile(partial,templateSpec.compilerOptions,env),result=options.partials[options.name](context,options)),null!=result){if(options.indent){for(var lines=result.split("\n"),i=0,l=lines.length;l>i&&(lines[i]||i+1!==l);i++)lines[i]=options.indent+lines[i];result=lines.join("\n")}return result}throw new _exception2["default"]("The partial "+options.name+" could not be compiled when running in runtime-only mode")}function ret(context){function main(context){return""+templateSpec.main(container,context,container.helpers,container.partials,data,blockParams,depths)}var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],data=options.data;ret._setup(options),!options.partial&&templateSpec.useData&&(data=initData(context,data));var depths=void 0,blockParams=templateSpec.useBlockParams?[]:void 0;return templateSpec.useDepths&&(depths=options.depths?context!==options.depths[0]?[context].concat(options.depths):options.depths:[context]),(main=executeDecorators(templateSpec.main,main,container,options.depths||[],data,blockParams))(context,options)}if(!env)throw new _exception2["default"]("No environment passed to template");if(!templateSpec||!templateSpec.main)throw new _exception2["default"]("Unknown template object: "+typeof templateSpec);templateSpec.main.decorator=templateSpec.main_d,env.VM.checkRevision(templateSpec.compiler);var container={strict:function(obj,name){if(!(name in obj))throw new _exception2["default"]('"'+name+'" not defined in '+obj);return obj[name]},lookup:function(depths,name){for(var len=depths.length,i=0;len>i;i++)if(depths[i]&&null!=depths[i][name])return depths[i][name]},lambda:function(current,context){return"function"==typeof current?current.call(context):current},escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,fn:function(i){var ret=templateSpec[i];return ret.decorator=templateSpec[i+"_d"],ret},programs:[],program:function(i,data,declaredBlockParams,blockParams,depths){var programWrapper=this.programs[i],fn=this.fn(i);return data||depths||blockParams||declaredBlockParams?programWrapper=wrapProgram(this,i,fn,data,declaredBlockParams,blockParams,depths):programWrapper||(programWrapper=this.programs[i]=wrapProgram(this,i,fn)),programWrapper},data:function(value,depth){for(;value&&depth--;)value=value._parent;return value},merge:function(param,common){var obj=param||common;return param&&common&&param!==common&&(obj=Utils.extend({},common,param)),obj},noop:env.VM.noop,compilerInfo:templateSpec.compiler};return ret.isTop=!0,ret._setup=function(options){options.partial?(container.helpers=options.helpers,container.partials=options.partials,container.decorators=options.decorators):(container.helpers=container.merge(options.helpers,env.helpers),templateSpec.usePartial&&(container.partials=container.merge(options.partials,env.partials)),(templateSpec.usePartial||templateSpec.useDecorators)&&(container.decorators=container.merge(options.decorators,env.decorators)))},ret._child=function(i,data,blockParams,depths){if(templateSpec.useBlockParams&&!blockParams)throw new _exception2["default"]("must pass block params");if(templateSpec.useDepths&&!depths)throw new _exception2["default"]("must pass parent depths");return wrapProgram(container,i,templateSpec[i],data,0,blockParams,depths)},ret}function wrapProgram(container,i,fn,data,declaredBlockParams,blockParams,depths){function prog(context){var options=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],currentDepths=depths;return depths&&context!==depths[0]&&(currentDepths=[context].concat(depths)),fn(container,context,container.helpers,container.partials,options.data||data,blockParams&&[options.blockParams].concat(blockParams),currentDepths)}return prog=executeDecorators(fn,prog,container,depths,data,blockParams),prog.program=i,prog.depth=depths?depths.length:0,prog.blockParams=declaredBlockParams||0,prog}function resolvePartial(partial,context,options){return partial?partial.call||options.name||(options.name=partial,partial=options.partials[partial]):partial="@partial-block"===options.name?options.data["partial-block"]:options.partials[options.name],partial}function invokePartial(partial,context,options){options.partial=!0,options.ids&&(options.data.contextPath=options.ids[0]||options.data.contextPath);var partialBlock=void 0;if(options.fn&&options.fn!==noop&&(options.data=_base.createFrame(options.data),partialBlock=options.data["partial-block"]=options.fn,partialBlock.partials&&(options.partials=Utils.extend({},options.partials,partialBlock.partials))),void 0===partial&&partialBlock&&(partial=partialBlock),void 0===partial)throw new _exception2["default"]("The partial "+options.name+" could not be found");return partial instanceof Function?partial(context,options):void 0}function noop(){return""}function initData(context,data){return data&&"root"in data||(data=data?_base.createFrame(data):{},data.root=context),data}function executeDecorators(fn,prog,container,depths,data,blockParams){if(fn.decorator){var props={};prog=fn.decorator(prog,props,container,depths&&depths[0],data,blockParams,depths),Utils.extend(prog,props)}return prog}exports.__esModule=!0,exports.checkRevision=checkRevision,exports.template=template,exports.wrapProgram=wrapProgram,exports.resolvePartial=resolvePartial,exports.invokePartial=invokePartial,exports.noop=noop;var _utils=require("./utils"),Utils=_interopRequireWildcard(_utils),_exception=require("./exception"),_exception2=_interopRequireDefault(_exception),_base=require("./base")},{"./base":4,"./exception":7,"./utils":20}],19:[function(require,module,exports){"use strict";function SafeString(string){this.string=string}exports.__esModule=!0,SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string},exports["default"]=SafeString,module.exports=exports["default"]},{}],20:[function(require,module,exports){"use strict";function escapeChar(chr){return escape[chr]}function extend(obj){for(var i=1;i<arguments.length;i++)for(var key in arguments[i])Object.prototype.hasOwnProperty.call(arguments[i],key)&&(obj[key]=arguments[i][key]);return obj}function indexOf(array,value){for(var i=0,len=array.length;len>i;i++)if(array[i]===value)return i;return-1}function escapeExpression(string){if("string"!=typeof string){if(string&&string.toHTML)return string.toHTML();if(null==string)return"";if(!string)return string+"";string=""+string}return possible.test(string)?string.replace(badChars,escapeChar):string}function isEmpty(value){return value||0===value?isArray(value)&&0===value.length?!0:!1:!0}function createFrame(object){var frame=extend({},object);return frame._parent=object,frame}function blockParams(params,ids){return params.path=ids,params}function appendContextPath(contextPath,id){return(contextPath?contextPath+".":"")+id}exports.__esModule=!0,exports.extend=extend,exports.indexOf=indexOf,exports.escapeExpression=escapeExpression,exports.isEmpty=isEmpty,exports.createFrame=createFrame,exports.blockParams=blockParams,exports.appendContextPath=appendContextPath;var escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},badChars=/[&<>"'`=]/g,possible=/[&<>"'`=]/,toString=Object.prototype.toString;exports.toString=toString;var isFunction=function(value){return"function"==typeof value};isFunction(/x/)&&(exports.isFunction=isFunction=function(value){return"function"==typeof value&&"[object Function]"===toString.call(value)}),exports.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&"object"==typeof value?"[object Array]"===toString.call(value):!1};exports.isArray=isArray},{}],21:[function(require,module,exports){module.exports=require("./dist/cjs/handlebars.runtime")["default"]},{"./dist/cjs/handlebars.runtime":3}],22:[function(require,module,exports){module.exports=require("handlebars/runtime")["default"]},{"handlebars/runtime":21}],23:[function(require,module,exports){!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}function D(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function Fb(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;e--;)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function qc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rc(a,b,c,d){function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}var e={},f=a===mc;return g(b.dataTypes[0])||!e["*"]&&g("*")}function sc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tc(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function uc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function Ac(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wc.test(a)?d(a,e):Ac(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ac(a+"["+e+"]",b[e],c,d)}function Jc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.3",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g)for(;f>e&&(d=b.apply(a[e],c),d!==!1);e++);else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g)for(;f>e&&(d=b.call(a[e],e,a[e]),d!==!1);e++);else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});var t=function(a){function gb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){for(o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;l--;)o[l]=s+rb(o[l]);w=ab.test(a)&&pb(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function hb(){function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}var a=[];return b}function ib(a){return a[u]=!0,a}function jb(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function kb(a,b){for(var c=a.split("|"),e=a.length;e--;)d.attrHandle[c[e]]=b}function lb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function nb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function ob(a){return ib(function(b){return b=+b,ib(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pb(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function qb(){}function rb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function tb(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ub(a,b,c){for(var d=0,e=b.length;e>d;d++)gb(a,b[d],c);return c}function vb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wb(a,b,c,d,e,f){return d&&!d[u]&&(d=wb(d)),e&&!e[u]&&(e=wb(e,f)),ib(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ub(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:vb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d)for(j=vb(r,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l));if(f){if(e||a){if(e){for(j=[],k=r.length;k--;)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}for(k=r.length;k--;)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=vb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sb(function(a){return a===b},h,!0),l=sb(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sb(tb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),
c[u]){for(e=++i;f>e&&!d.relative[a[e].type];e++);return wb(i>1&&tb(m),i>1&&rb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xb(a.slice(i,e)),f>e&&xb(a=a.slice(e)),f>e&&rb(a))}m.push(c)}return tb(m)}function yb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){for(m=0;o=a[m++];)if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){for(m=0;o=b[m++];)o(r,s,g,h);if(f){if(p>0)for(;q--;)r[q]||s[q]||(s[q]=F.call(i));s=vb(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&gb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ib(f):f}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=hb(),z=hb(),A=hb(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},eb=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fb){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}c=gb.support={},f=gb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=gb.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",eb,!1):e.attachEvent&&e.attachEvent("onunload",eb)),p=!f(g),c.attributes=jb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=jb(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=jb(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(jb(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),jb(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&jb(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return lb(a,b);for(c=a;c=c.parentNode;)h.unshift(c);for(c=b;c=c.parentNode;)i.unshift(c);for(;h[d]===i[d];)d++;return d?lb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},gb.matches=function(a,b){return gb(a,null,null,b)},gb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return gb(b,n,null,[a]).length>0},gb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},gb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},gb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},gb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){for(;b=a[f++];)b===a[f]&&(e=d.push(f));for(;e--;)a.splice(d[e],1)}return k=null,a},e=gb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else for(;b=a[d++];)c+=e(b);return c},d=gb.selectors={cacheLength:50,createPseudo:ib,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||gb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&gb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=gb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[u]||(l[u]={}))[a]=[w,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||gb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ib(function(a,c){for(var d,f=e(a,b),g=f.length;g--;)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ib(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ib(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ib(function(a){return function(b){return gb(a,b).length>0}}),contains:ib(function(a){return a=a.replace(cb,db),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ib(function(a){return W.test(a||"")||gb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:ob(function(){return[0]}),last:ob(function(a,b){return[b-1]}),eq:ob(function(a,b,c){return[0>c?c+b:c]}),even:ob(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:ob(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:ob(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:ob(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=mb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=nb(b);return qb.prototype=d.filters=d.pseudos,d.setFilters=new qb,g=gb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=d.preFilter;h;){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?gb.error(a):z(a,i).slice(0)},h=gb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){for(b||(b=g(a)),c=b.length;c--;)f=xb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,yb(e,d)),f.selector=a}return f},i=gb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}for(i=X.needsContext.test(a)?0:j.length;i--&&(k=j[i],!d.relative[l=k.type]);)if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&pb(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&rb(j),!a)return H.apply(e,f),e;break}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&pb(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=jb(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),jb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||kb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&jb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||kb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),jb(function(a){return null==a.getAttribute("disabled")})||kb(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),gb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){for(var c;(c=n.inArray(b,h,c))>-1;)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var i,j,k,b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}};if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}}),n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;j--;)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){for(b=(b||"").match(E)||[""],j=b.length;j--;)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){for(l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=p[f++])&&!b.isPropagationStopped();)b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=n.event.handlers.call(this,a,j),b=0;(f=h[b++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,c=0;(g=f.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,
originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td,n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c))for(j=0;e=f[j++];)fb.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={},ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");f.style&&(f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f),a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}}))}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),void(null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}}),n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;return a&&3!==f&&8!==f&&2!==f?typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)for(;c=f[e++];)d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;return a&&3!==g&&8!==g&&2!==g?(f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]):void 0},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=n(this),f=a.match(E)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)):void 0}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=n.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec=/#.*$/,fc=/([?&])_=[^&]*/,gc=/^(.*?):[ \t]*([^\r\n]*)$/gm,hc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ic=/^(?:GET|HEAD)$/,jc=/^\/\//,kc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lc={},mc={},nc="*/".concat("*"),oc=a.location.href,pc=kc.exec(oc.toLowerCase())||[];n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oc,type:"GET",isLocal:hc.test(pc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sc(sc(a,n.ajaxSettings),b):sc(n.ajaxSettings,a)},ajaxPrefilter:qc(lc),ajaxTransport:qc(mc),ajax:function(a,b){function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tc(k,v,f)),u=uc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f)for(f={};b=gc.exec(e);)f[b[1].toLowerCase()]=b[2];b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||oc)+"").replace(ec,"").replace(jc,pc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pc[1]&&h[2]===pc[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pc[3]||("http:"===pc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rc(lc,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ic.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fc.test(d)?d.replace(fc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rc(mc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vc=/%20/g,wc=/\[\]$/,xc=/\r?\n/g,yc=/^(?:submit|button|image|reset|file)$/i,zc=/^(?:input|select|textarea|keygen)/i;n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ac(c,a[c],b,e);return d.join("&").replace(vc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zc.test(this.nodeName)&&!yc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xc,"\r\n")}}):{name:b.name,value:c.replace(xc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bc=0,Cc={},Dc={0:200,1223:204},Ec=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cc)Cc[a]()}),k.cors=!!Ec&&"withCredentials"in Ec,k.ajax=Ec=!!Ec,n.ajaxTransport(function(a){var b;return k.cors||Ec&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Dc[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fc=[],Gc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hc=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hc)return Hc.apply(this,arguments);
var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ic=a.document.documentElement;n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;return f?(b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e):void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Ic;a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position");)a=a.offsetParent;return a||Ic})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kc=a.jQuery,Lc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lc),b&&a.jQuery===n&&(a.jQuery=Kc),n},typeof b===U&&(a.jQuery=a.$=n),n})},{}],24:[function(require,module,exports){(function(global){!function(root,factory){"object"==typeof exports?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):root.ol=factory()}(this,function(){function w(a,b,c){a=a.split("."),c=c||aa,a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c=c[d]?c[d]:c[d]={}:c[d]=b}function ba(a){var b=typeof a;if("object"==b){if(!a)return"null";if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ca(a){return"number"==typeof a}function da(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function y(a){return a[ea]||(a[ea]=++fa)}function ga(a,b,c){return a.call.apply(a.bind,arguments)}function ha(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,d),a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ia(a,b,c){return ia=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ga:ha,ia.apply(null,arguments)}function C(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a}function ja(){}function ka(a,b,c){return Math.min(Math.max(a,b),c)}function ma(a,b){var c=a%b;return 0>c*b?c+b:c}function na(a){return function(b){return b?[ka(b[0],a[0],a[2]),ka(b[1],a[1],a[3])]:void 0}}function oa(a){return a}function pa(a,b,c){this.center=a,this.resolution=b,this.rotation=c}function ra(a){for(var b in a)delete a[b]}function ta(a){var c,b=[];for(c in a)b.push(a[c]);return b}function ua(a){for(var b in a)return!1;return!b}function xa(a){function b(b){var d=a.listener,e=a.rc||a.target;return a.tc&&F(a),d.call(e,b)}return a.sc=b}function ya(a,b,c,d){for(var e,f=0,g=a.length;g>f;++f)if(e=a[f],e.listener===b&&e.rc===c)return d&&(e.deleteIndex=f),e}function za(a,b){var c=a[wa];return c?c[b]:void 0}function Aa(a){var b=a[wa];return b||(b=a[wa]={}),b}function Ba(a,b){var c=za(a,b);if(c){for(var d=0,e=c.length;e>d;++d)a.removeEventListener(b,c[d].sc),ra(c[d]);c.length=0,(c=a[wa])&&(delete c[b],0===Object.keys(c).length&&delete a[wa])}}function I(a,b,c,d,e){var f=Aa(a),g=f[b];return g||(g=f[b]=[]),(f=ya(g,c,d,!1))?e||(f.tc=!1):(f={rc:d,tc:!!e,listener:c,target:a,type:b},a.addEventListener(b,xa(f)),g.push(f)),f}function Ca(a,b,c,d){(a=za(a,b))&&(c=ya(a,c,d,!0))&&F(c)}function F(a){if(a&&a.target){a.target.removeEventListener(a.type,a.sc);var b=za(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1),0===b.length&&Ba(a.target,a.type)}ra(a)}}function Da(){}function Ea(a){a.Qa||(a.Qa=!0,a.Y())}function Fa(a,b){this.type=a,this.target=b||null}function Ga(a){a.stopPropagation()}function Ha(){this.ha={},this.U={},this.T={}}function O(a,b){var c="string"==typeof b?new Fa(b):b,d=c.type;c.target=a;var f,e=a.T[d];if(e){d in a.U||(a.U[d]=0,a.ha[d]=0),++a.U[d];for(var g=0,h=e.length;h>g;++g)if(!1===e[g].call(a,c)||c.Cf){f=!1;break}if(--a.U[d],0===a.U[d]){for(c=a.ha[d],delete a.ha[d];c--;)a.removeEventListener(d,ja);delete a.U[d]}return f}}function Ia(a,b){return b?b in a.T:0<Object.keys(a.T).length}function Ja(){Ha.call(this),this.i=0}function Ka(a,b,c){Fa.call(this,a),this.key=b,this.oldValue=c}function R(a){Ja.call(this),y(this),this.P={},void 0!==a&&La(this,a)}function Na(a){return Ma.hasOwnProperty(a)?Ma[a]:Ma[a]="change:"+a}function La(a,b){for(var c in b)a.set(c,b[c],void 0)}function Oa(a,b){return a>b?1:b>a?-1:0}function Pa(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(c>0){for(c=1;d>c;++c)if(a[c]<b)return c-1}else if(0>c){for(c=1;d>c;++c)if(a[c]<=b)return c}else for(c=1;d>c;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1}function Qa(a){return a.reduce(function(a,c){return Array.isArray(c)?a.concat(Qa(c)):a.concat(c)},[])}function Ra(a,b){var c;c=ba(b);var d="array"==c||"object"==c&&"number"==typeof b.length?b:[b],e=d.length;for(c=0;e>c;c++)a[a.length]=d[c]}function Sa(a,b){var c=a.indexOf(b),d=c>-1;return d&&a.splice(c,1),d}function Ta(a,b){var c=a.length;if(c!==b.length)return!1;for(var d=0;c>d;d++)if(a[d]!==b[d])return!1;return!0}function Ua(a){var e,b=Va,c=a.length,d=Array(a.length);for(e=0;c>e;e++)d[e]={index:e,value:a[e]};for(d.sort(function(a,c){return b(a.value,c.value)||a.index-c.index}),e=0;e<a.length;e++)a[e]=d[e].value}function Wa(a){return function(b,c,d){return void 0!==b?(b=Pa(a,b,d),b=ka(b+c,0,a.length-1),a[b]):void 0}}function Xa(a,b,c){return function(d,e,f){return void 0!==d?(d=Math.max(Math.floor(Math.log(b/d)/Math.log(a)+(f>0?0:0>f?1:.5))+e,0),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)):void 0}}function Ya(a){return void 0!==a?0:void 0}function Za(a,b){return void 0!==a?a+b:void 0}function $a(a){var b=2*Math.PI/a;return function(a,d){return void 0!==a?a=Math.floor((a+d)/b+.5)*b:void 0}}function ab(){var a=5*Math.PI/180;return function(b,c){return void 0!==b?Math.abs(b+c)<=a?0:b+c:void 0}}function bb(a,b){a[0]+=b[0],a[1]+=b[1]}function cb(a,b){var c=a[0],d=a[1],e=b[0],f=b[1],g=e[0],e=e[1],h=f[0],f=f[1],k=h-g,l=f-e,c=0===k&&0===l?0:(k*(c-g)+l*(d-e))/(k*k+l*l||0);return 0>=c||(c>=1?(g=h,e=f):(g+=c*k,e+=c*l)),[g,e]}function db(a,b){for(var c=!0,d=a.length-1;d>=0;--d)if(a[d]!=b[d]){c=!1;break}return c}function eb(a,b){var c=Math.cos(b),d=Math.sin(b),e=a[1]*c+a[0]*d;a[0]=a[0]*c-a[1]*d,a[1]=e}function fb(a,b){var c=a[0]-b[0],d=a[1]-b[1];return c*c+d*d}function gb(a){for(var b=hb(),c=0,d=a.length;d>c;++c)ib(b,a[c]);return b}function jb(a,b,c){return c?(c[0]=a[0]-b,c[1]=a[1]-b,c[2]=a[2]+b,c[3]=a[3]+b,c):[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}function kb(a,b){return b?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):a.slice()}function lb(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]}function hb(){return[1/0,1/0,-(1/0),-(1/0)]}function mb(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function nb(a){return mb(1/0,1/0,-(1/0),-(1/0),a)}function ob(a,b){var c=a[0],d=a[1];return mb(c,d,c,d,b)}function pb(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]}function rb(a,b){b[0]<a[0]&&(a[0]=b[0]),b[2]>a[2]&&(a[2]=b[2]),b[1]<a[1]&&(a[1]=b[1]),b[3]>a[3]&&(a[3]=b[3])}function ib(a,b){b[0]<a[0]&&(a[0]=b[0]),b[0]>a[2]&&(a[2]=b[0]),b[1]<a[1]&&(a[1]=b[1]),b[1]>a[3]&&(a[3]=b[1])}function sb(a,b,c,d,e){for(;d>c;c+=e){var f=a,g=b[c],h=b[c+1];f[0]=Math.min(f[0],g),f[1]=Math.min(f[1],h),f[2]=Math.max(f[2],g),f[3]=Math.max(f[3],h)}return a}function tb(a){var b=0;return a[2]<a[0]||a[3]<a[1]||(b=ub(a)*vb(a)),b}function wb(a){return[a[0],a[1]]}function xb(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}function yb(a,b,c,d,e){var f=b*d[0]/2;d=b*d[1]/2,b=Math.cos(c);var g=Math.sin(c);c=f*b,f*=g,b*=d;var h=d*g,k=a[0],l=a[1];a=k-c+h,d=k-c-h,g=k+c-h,c=k+c+h;var h=l-f-b,k=l-f+b,n=l+f+b,f=l+f-b;return mb(Math.min(a,d,g,c),Math.min(h,k,n,f),Math.max(a,d,g,c),Math.max(h,k,n,f),e)}function vb(a){return a[3]-a[1]}function zb(a,b){var c=hb();return Ab(a,b)&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]),c}function Bb(a){return[a[0],a[3]]}function ub(a){return a[2]-a[0]}function Ab(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]}function Cb(){return!0}function Db(){return!1}function Eb(a){this.radius=a}function Fb(a,b){var c=a[1]*Math.PI/180,d=b[1]*Math.PI/180,e=(d-c)/2,f=(b[0]-a[0])*Math.PI/180/2,c=Math.sin(e)*Math.sin(e)+Math.sin(f)*Math.sin(f)*Math.cos(c)*Math.cos(d);return 2*Gb.radius*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}function Ib(a){this.ua=a.code,this.i=a.units,this.h=void 0!==a.extent?a.extent:null,this.a=void 0!==a.axisOrientation?a.axisOrientation:"enu",this.b=void 0!==a.global?a.global:!1,this.c=!(!this.b||!this.h),this.s=void 0!==a.getPointResolution?a.getPointResolution:this.ke,this.g=null,this.f=a.metersPerUnit;var b=Jb,c=a.code,d=Kb||E.proj4;if("function"==typeof d&&void 0===b[c]){var e=d.defs(c);if(void 0!==e){void 0!==e.axis&&void 0===a.axisOrientation&&(this.a=e.axis),void 0===a.metersPerUnit&&(this.f=e.to_meter),void 0===a.units&&(this.i=e.units);var f,g;for(f in b)if(a=d.defs(f),void 0!==a)if(b=S(f),a===e)Lb([b,this]);else{g=d(f,c),a=g.forward,g=g.inverse;var b=S(b),h=S(this);Mb(b,h,Nb(a)),Mb(h,b,Nb(g))}}}}function Lb(a){Qb(a),a.forEach(function(b){a.forEach(function(a){b!==a&&Mb(b,a,Rb)})})}function Sb(a){Jb[a.ua]=a,Mb(a,a,Rb)}function Qb(a){var b=[];a.forEach(function(a){b.push(Sb(a))})}function Tb(a){return a?"string"==typeof a?S(a):a:S("EPSG:3857")}function Mb(a,b,c){a=a.ua,b=b.ua,a in Pb||(Pb[a]={}),Pb[a][b]=c}function Nb(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2,c=void 0!==c?c:Array(e);var f,g;for(g=0;e>g;g+=d)for(f=a([b[g],b[g+1]]),c[g]=f[0],c[g+1]=f[1],f=d-1;f>=2;--f)c[g+f]=b[g+f];return c}}function S(a){var b;if(a instanceof Ib)b=a;else if("string"==typeof a){b=Jb[a];var c=Kb||E.proj4;void 0===b&&"function"==typeof c&&void 0!==c.defs(a)&&(b=new Ib({code:a}),Sb(b))}else b=null;return b}function Ub(a,b){if(a===b)return!0;var c=a.$a()===b.$a();return a.ua===b.ua?c:Ob(a,b)===Rb&&c}function Vb(a,b){var c=S(a),d=S(b);return Ob(c,d)}function Ob(a,b){var e,c=a.ua,d=b.ua;return c in Pb&&d in Pb[c]&&(e=Pb[c][d]),void 0===e&&(e=Wb),e}function Wb(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;d>c;++c)b[c]=a[c];a=b}return a}function Rb(a,b){var c;if(void 0!==b){c=0;for(var d=a.length;d>c;++c)b[c]=a[c];c=b}else c=a.slice();return c}function Xb(a,b,c){b=Vb(b,c),a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]],b(a,a,2),c=[a[0],a[2],a[4],a[6]];var d=[a[1],a[3],a[5],a[7]];return a=Math.min.apply(null,c),b=Math.min.apply(null,d),c=Math.max.apply(null,c),d=Math.max.apply(null,d),mb(a,b,c,d,void 0)}function Yb(){R.call(this),this.w=hb(),this.v=-1,this.h={},this.o=this.j=0}function Zb(a,b,c){return a.Sa(Vb(b,c)),a}function $b(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}function ac(a){this.length=a.length||a;for(var b=0;b<this.length;b++)this[b]=a[b]||0}function bc(){var a=Array(16);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=0,a}function cc(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],l=a[7],n=a[8],p=a[9],q=a[10],t=a[11],u=a[12],x=a[13],r=a[14],B=a[15],z=c*h-d*g,v=c*k-e*g,D=c*l-f*g,M=d*k-e*h,N=d*l-f*h,G=e*l-f*k,H=n*x-p*u,A=n*r-q*u,K=n*B-t*u,Q=p*r-q*x,L=p*B-t*x,P=q*B-t*r,J=z*P-v*L+D*Q+M*K-N*A+G*H;0!=J&&(J=1/J,b[0]=(h*P-k*L+l*Q)*J,b[1]=(-d*P+e*L-f*Q)*J,b[2]=(x*G-r*N+B*M)*J,b[3]=(-p*G+q*N-t*M)*J,b[4]=(-g*P+k*K-l*A)*J,b[5]=(c*P-e*K+f*A)*J,b[6]=(-u*G+r*D-B*v)*J,b[7]=(n*G-q*D+t*v)*J,b[8]=(g*L-h*K+l*H)*J,b[9]=(-c*L+d*K-f*H)*J,b[10]=(u*N-x*D+B*z)*J,b[11]=(-n*N+p*D-t*z)*J,b[12]=(-g*Q+h*A-k*H)*J,b[13]=(c*Q-d*A+e*H)*J,b[14]=(-u*M+x*v-r*z)*J,b[15]=(n*M-p*v+q*z)*J)}function dc(a,b,c){var d=a[1]*b+a[5]*c+0*a[9]+a[13],e=a[2]*b+a[6]*c+0*a[10]+a[14],f=a[3]*b+a[7]*c+0*a[11]+a[15];a[12]=a[0]*b+a[4]*c+0*a[8]+a[12],a[13]=d,a[14]=e,a[15]=f}function ec(a,b,c,d,e,f){var g=e[0],h=e[1],k=e[4],l=e[5],n=e[12];e=e[13];for(var p=f?f:[],q=0;c>b;b+=d){var t=a[b],u=a[b+1];p[q++]=g*t+k*u+n,p[q++]=h*t+l*u+e}return f&&p.length!=q&&(p.length=q),p}function fc(){Yb.call(this),this.b="XY",this.u=2,this.a=null}function gc(a){return"XY"==a?2:"XYZ"==a||"XYM"==a?3:"XYZM"==a?4:void 0}function hc(a,b,c){a.u=gc(b),a.b=b,a.a=c}function ic(a,b,c,d){if(b)c=gc(b);else{for(b=0;d>b;++b){if(0===c.length)return a.b="XY",void(a.u=2);c=c[0]}c=c.length,b=2==c?"XY":3==c?"XYZ":4==c?"XYZM":void 0}a.b=b,a.u=c}function jc(a,b){var d,e,c=0;for(d=0,e=b.length;e>d;++d)a[c++]=b[d];return c}function kc(a,b,c,d){var e,f;for(e=0,f=c.length;f>e;++e){var h,g=c[e];for(h=0;d>h;++h)a[b++]=g[h]}return b}function lc(a,b,c,d,e){e=e?e:[];var g,h,f=0;for(g=0,h=c.length;h>g;++g)b=kc(a,b,c[g],d),e[f++]=b;return e.length=f,e}function mc(a,b,c,d,e){e=void 0!==e?e:[];for(var f=0;c>b;b+=d)e[f++]=a.slice(b,b+d);return e.length=f,e}function nc(a,b,c,d,e){e=void 0!==e?e:[];var g,h,f=0;for(g=0,h=c.length;h>g;++g){var k=c[g];e[f++]=mc(a,b,k,d,e[f]),b=k}return e.length=f,e}function oc(a,b,c,d,e,f,g){var h=(c-b)/d;if(3>h){for(;c>b;b+=d)f[g++]=a[b],f[g++]=a[b+1];return g}var k=Array(h);k[0]=1,k[h-1]=1,c=[b,c-d];for(var n,l=0;0<c.length;){var p=c.pop(),q=c.pop(),t=0,u=a[q],x=a[q+1],r=a[p],B=a[p+1];for(n=q+d;p>n;n+=d){var z,v=a[n];z=a[n+1];var D=u,M=x,N=r-D,G=B-M;if(0!==N||0!==G){var H=((v-D)*N+(z-M)*G)/(N*N+G*G);H>1?(D=r,M=B):H>0&&(D+=N*H,M+=G*H)}v=D-v,z=M-z,z=v*v+z*z,z>t&&(l=n,t=z)}t>e&&(k[(l-b)/d]=1,l>q+d&&c.push(q,l),p>l+d&&c.push(l,p))}for(n=0;h>n;++n)k[n]&&(f[g++]=a[b+n*d],f[g++]=a[b+n*d+1]);return g}function pc(a,b,c,d,e,f,g,h){var k,l;for(k=0,l=c.length;l>k;++k){var n=c[k];a:{var p=a,q=n,t=d,u=e,x=f;if(b!=q){var r=u*Math.round(p[b]/u),B=u*Math.round(p[b+1]/u);b+=t,x[g++]=r,x[g++]=B;var z,v;do if(z=u*Math.round(p[b]/u),v=u*Math.round(p[b+1]/u),b+=t,b==q){x[g++]=z,x[g++]=v;break a}while(z==r&&v==B);for(;q>b;){var D,M;if(D=u*Math.round(p[b]/u),M=u*Math.round(p[b+1]/u),b+=t,D!=z||M!=v){var N=z-r,G=v-B,H=D-r,A=M-B;N*A==G*H&&(0>N&&N>H||N==H||N>0&&H>N)&&(0>G&&G>A||G==A||G>0&&A>G)||(x[g++]=z,x[g++]=v,r=z,B=v),z=D,v=M}}x[g++]=z,x[g++]=v}}h.push(g),b=n}return g}function qc(a,b){fc.call(this),this.O(a,b)}function rc(a,b,c){hc(a,b,c),a.c()}function sc(a,b){fc.call(this),this.O(a,b)}function tc(a,b,c,d,e,f){for(var g=!1,h=a[c-d],k=a[c-d+1];c>b;b+=d){var l=a[b],n=a[b+1];k>f!=n>f&&(l-h)*(f-k)/(n-k)+h>e&&(g=!g),h=l,k=n}return g}function uc(a,b,c,d,e,f,g){var h,k,l,n,p,q=e[f+1],t=[],u=c[0];for(l=a[u-d],p=a[u-d+1],h=b;u>h;h+=d)n=a[h],k=a[h+1],(p>=q&&q>=k||q>=p&&k>=q)&&(l=(q-p)/(k-p)*(n-l)+l,t.push(l)),l=n,p=k;for(u=NaN,p=-(1/0),t.sort(Oa),l=t[0],h=1,k=t.length;k>h;++h){n=t[h];var x=Math.abs(n-l);if(x>p){l=(l+n)/2;var r;a:if(0!==c.length&&tc(a,b,c[0],d,l,q)){var B;for(r=1,B=c.length;B>r;++r)if(tc(a,c[r-1],c[r],d,l,q)){r=!1;break a}r=!0}else r=!1;r&&(u=l,p=x)}l=n}return isNaN(u)&&(u=e[f]),g?(g.push(u,q),g):[u,q]}function vc(a,b,c,d){for(var e=0,f=a[c-d],g=a[c-d+1];c>b;b+=d)var h=a[b],k=a[b+1],e=e+(h-f)*(k+g),f=h,g=k;return e>0}function wc(a,b,c,d){var e=0;d=void 0!==d?d:!1;var f,g;for(f=0,g=b.length;g>f;++f){var h=b[f],e=vc(a,e,h,c);if(0===f){if(d&&e||!d&&!e)return!1}else if(d&&!e||!d&&e)return!1;e=h}return!0}function xc(a,b,c,d,e){e=void 0!==e?e:!1;var f,g;for(f=0,g=c.length;g>f;++f){var h=c[f],k=vc(a,b,h,d);if(0===f?e&&k||!e&&!k:e&&!k||!e&&k)for(var k=a,l=h,n=d;l-n>b;){var p;for(p=0;n>p;++p){var q=k[b+p];k[b+p]=k[l-n+p],k[l-n+p]=q}b+=n,l-=n}b=h}return b}function yc(a,b,c,d){var f,g,e=0;for(f=0,g=b.length;g>f;++f)e=xc(a,e,b[f],c,d);return e}function T(a,b){fc.call(this),this.f=[],this.A=-1,this.C=null,this.B=-1,this.l=null,this.O(a,b)}function Bc(a){if(a.A!=a.i){var b=xb(a.D());a.C=uc(Ac(a),0,a.f,a.u,b,0),a.A=a.i}return a.C}function Ac(a){if(a.B!=a.i){var b=a.a;wc(b,a.f,a.u)?a.l=b:(a.l=b.slice(),a.l.length=xc(a.l,0,a.f,a.u)),a.B=a.i}return a.l}function zc(a,b,c,d){hc(a,b,c),a.f=d,a.c()}function Cc(a){R.call(this),a=a||{},this.b=[0,0];var b={};b.center=void 0!==a.center?a.center:null,this.h=Tb(a.projection);var c,d,e,f=void 0!==a.minZoom?a.minZoom:0;c=void 0!==a.maxZoom?a.maxZoom:28;var g=void 0!==a.zoomFactor?a.zoomFactor:2;if(void 0!==a.resolutions)c=a.resolutions,d=c[0],e=c[c.length-1],c=Wa(c);else{d=Tb(a.projection),e=d.D();var h=(e?Math.max(ub(e),vb(e)):360*Hb.degrees/d.Aa())/256/Math.pow(2,0),k=h/Math.pow(2,28);d=a.maxResolution,void 0!==d?f=0:d=h/Math.pow(g,f),e=a.minResolution,void 0===e&&(e=void 0!==a.maxZoom?void 0!==a.maxResolution?d/Math.pow(g,c):h/Math.pow(g,c):k),c=f+Math.floor(Math.log(d/e)/Math.log(g)),e=d/Math.pow(g,c-f),c=Xa(g,d,c-f)}this.g=d,this.j=e,this.l=a.resolutions,this.f=f,f=void 0!==a.extent?na(a.extent):oa,(void 0!==a.enableRotation?a.enableRotation:1)?(d=a.constrainRotation,d=void 0===d||!0===d?ab():!1===d?Za:ca(d)?$a(d):Za):d=Ya,this.a=new pa(f,c,d),void 0!==a.resolution?b.resolution=a.resolution:void 0!==a.zoom&&(b.resolution=this.constrainResolution(this.g,a.zoom-this.f)),b.rotation=void 0!==a.rotation?a.rotation:0,La(this,b)}function Dc(a,b){return void 0!==b?(b[0]=a.b[0],b[1]=a.b[1],b):a.b.slice()}function Ec(a,b){return Math.max(ub(a)/b[0],vb(a)/b[1])}function Fc(a){return a.get("rotation")}function Hc(a,b){a.b[1]+=b}function Gc(a,b){a.set("resolution",b)}function Ic(a){return 1-Math.pow(1-a,3)}function Jc(a){return 3*a*a-2*a*a*a}function Kc(a){return a}function Lc(a){var b=a.source,c=a.start?a.start:Date.now(),d=b[0],e=b[1],f=void 0!==a.duration?a.duration:1e3,g=a.easing?a.easing:Jc;return function(a,b){if(b.time<c)return b.animate=!0,b.viewHints[0]+=1,!0;if(b.time<c+f){var l=1-g((b.time-c)/f),n=d-b.viewState.center[0],p=e-b.viewState.center[1];return b.animate=!0,b.viewState.center[0]+=l*n,b.viewState.center[1]+=l*p,b.viewHints[0]+=1,!0}return!1}}function Mc(a){var b=a.rotation?a.rotation:0,c=a.start?a.start:Date.now(),d=void 0!==a.duration?a.duration:1e3,e=a.easing?a.easing:Jc,f=a.anchor?a.anchor:null;return function(a,h){if(h.time<c)return h.animate=!0,h.viewHints[0]+=1,!0;if(h.time<c+d){var k=1-e((h.time-c)/d),k=(b-h.viewState.rotation)*k;if(h.animate=!0,h.viewState.rotation+=k,f){var l=h.viewState.center;l[0]-=f[0],l[1]-=f[1],eb(l,k),bb(l,f)}return h.viewHints[0]+=1,!0}return!1}}function Nc(a){var b=a.resolution,c=a.start?a.start:Date.now(),d=void 0!==a.duration?a.duration:1e3,e=a.easing?a.easing:Jc;return function(a,g){if(g.time<c)return g.animate=!0,g.viewHints[0]+=1,!0;if(g.time<c+d){var h=1-e((g.time-c)/d),k=b-g.viewState.resolution;return g.animate=!0,g.viewState.resolution+=h*k,g.viewHints[0]+=1,!0}return!1}}function Oc(a,b,c,d){this.G=a,this.H=b,this.I=c,this.J=d}function Pc(a,b,c){return a.G<=b&&b<=a.H&&a.I<=c&&c<=a.J}function Qc(a,b){return a.G<=b.H&&a.H>=b.G&&a.I<=b.J&&a.J>=b.I}function Rc(a){this.c=a.html,this.a=a.tileRanges?a.tileRanges:null}function Sc(a,b,c){Fa.call(this,a,c),this.element=b}function Tc(a){R.call(this),this.a=a?a:[],Uc(this)}function Vc(a,b){var c,d;for(c=0,d=b.length;d>c;++c)a.push(b[c])}function Wc(a,b){var c=a.a[b];return a.a.splice(b,1),Uc(a),O(a,new Sc("remove",c,a)),c}function Uc(a){a.set("length",a.a.length)}function Xc(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function ad(a){if("string"!=typeof a){var b=a[0];b!=(0|b)&&(b=b+.5|0);var c=a[1];c!=(0|c)&&(c=c+.5|0);var d=a[2];d!=(0|d)&&(d=d+.5|0),a="rgba("+b+","+c+","+d+","+(void 0===a[3]?1:a[3])+")"}return a}function bd(a,b){var c=b||[];return c[0]=ka(a[0]+.5|0,0,255),c[1]=ka(a[1]+.5|0,0,255),c[2]=ka(a[2]+.5|0,0,255),c[3]=ka(a[3],0,1),c}function dd(a){return"string"==typeof a||a instanceof CanvasPattern||a instanceof CanvasGradient?a:ad(a)}function id(a,b){var c=document.createElement("CANVAS");return a&&(c.width=a),b&&(c.height=b),c.getContext("2d")}function jd(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function kd(a,b,c){Fa.call(this,a),this.map=b,this.frameState=void 0!==c?c:null}function ld(a){R.call(this),this.element=a.element?a.element:null,this.o=this.C=null,this.w=[],this.render=a.render?a.render:ja,a.target&&(a=a.target,this.C="string"==typeof a?document.getElementById(a):a)}function md(){this.i=0,this.b={},this.c=this.a=null}function nd(a){md.call(this),this.g=void 0!==a?a:2048}function od(a){return a.i>a.g}function pd(a,b){Ha.call(this),this.pa=a,this.state=b,this.a=null,this.key=""}function qd(a){O(a,"change")}function rd(a,b,c){return void 0===c&&(c=[0,0]),c[0]=a[0]+2*b,c[1]=a[1]+2*b,c}function sd(a,b,c){return void 0===c&&(c=[0,0]),c[0]=a[0]*b+.5|0,c[1]=a[1]*b+.5|0,c}function td(a,b){return Array.isArray(a)?a:(void 0===b?b=[a,a]:(b[0]=a,b[1]=a),b)}function ud(a){R.call(this),this.f=S(a.projection),this.X=vd(a.attributions),this.fa=a.logo,this.ia=void 0!==a.state?a.state:"ready",this.A=void 0!==a.wrapX?a.wrapX:!1}function vd(a){if("string"==typeof a)return[new Rc({html:a})];if(a instanceof Rc)return[a];if(Array.isArray(a)){for(var b=a.length,c=Array(b),d=0;b>d;d++){var e=a[d];c[d]="string"==typeof e?new Rc({html:e}):e}return c}return null}function wd(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0,this.a=a.resolutions,this.maxZoom=this.a.length-1,this.b=void 0!==a.origin?a.origin:null,this.g=null,void 0!==a.origins&&(this.g=a.origins);var b=a.extent;void 0===b||this.b||this.g||(this.b=Bb(b)),this.f=null,void 0!==a.tileSizes&&(this.f=a.tileSizes),this.h=void 0!==a.tileSize?a.tileSize:this.f?null:256,this.j=void 0!==b?b:null,this.c=null,this.i=[0,0],void 0!==a.sizes?this.c=a.sizes.map(function(a){return new Oc(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):b&&xd(this,b)}function zd(a,b,c,d,e){for(e=Ad(a,b,e),b=b[0]-1;b>=a.minZoom;){if(c.call(null,b,Bd(a,e,b,d)))return!0;--b}return!1}function Cd(a,b,c,d){return b[0]<a.maxZoom?(d=Ad(a,b,d),Bd(a,d,b[0]+1,c)):null}function Dd(a,b,c,d){Ed(a,b[0],b[1],c,!1,yd);var e=yd[1],f=yd[2];return Ed(a,b[2],b[3],c,!0,yd),a=yd[1],b=yd[2],void 0!==d?(d.G=e,d.H=a,d.I=f,d.J=b):d=new Oc(e,a,f,b),d}function Bd(a,b,c,d){return c=a.R(c),Dd(a,b,c,d)}function Fd(a,b){var c=a.Ba(b[0]),d=a.R(b[0]),e=td(Gd(a,b[0]),a.i);return[c[0]+(b[1]+.5)*e[0]*d,c[1]+(b[2]+.5)*e[1]*d]}function Ad(a,b,c){var d=a.Ba(b[0]),e=a.R(b[0]);a=td(Gd(a,b[0]),a.i);var f=d[0]+b[1]*a[0]*e;return b=d[1]+b[2]*a[1]*e,mb(f,b,f+a[0]*e,b+a[1]*e,c)}function Ed(a,b,c,d,e,f){var g=Hd(a,d),h=d/a.R(g),k=a.Ba(g);return a=td(Gd(a,g),a.i),b=h*Math.floor((b-k[0])/d+(e?.5:0))/a[0],c=h*Math.floor((c-k[1])/d+(e?0:.5))/a[1],e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c)),e=b,void 0!==f?(f[0]=g,f[1]=e,f[2]=c):f=[g,e,c],f}function Id(a,b,c,d){return c=a.R(c),Ed(a,b[0],b[1],c,!1,d)}function Gd(a,b){return a.h?a.h:a.f[b]}function Hd(a,b,c){return b=Pa(a.a,b,c||0),ka(b,a.minZoom,a.maxZoom)}function xd(a,b){for(var c=a.a.length,d=Array(c),e=a.minZoom;c>e;++e)d[e]=Bd(a,b,e);a.c=d}function Jd(a){var b=a.g;if(!b){var b=Kd(a),c=Ld(b,void 0,void 0),b=new wd({extent:b,origin:Bb(b),resolutions:c,tileSize:void 0});a.g=b}return b}function Md(a){var b={};return qa(b,void 0!==a?a:{}),void 0===b.extent&&(b.extent=S("EPSG:3857").D()),b.resolutions=Ld(b.extent,b.maxZoom,b.tileSize),delete b.maxZoom,new wd(b)}function Ld(a,b,c){b=void 0!==b?b:42;var d=vb(a);for(a=ub(a),c=td(void 0!==c?c:256),c=Math.max(a/c[0],d/c[1]),b+=1,d=Array(b),a=0;b>a;++a)d[a]=c/Math.pow(2,a);return d}function Kd(a){a=S(a);var b=a.D();return b||(a=180*Hb.degrees/a.Aa(),b=mb(-a,-a,a,a)),b}function Nd(a){ud.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state,wrapX:a.wrapX}),this.V=void 0!==a.opaque?a.opaque:!1,this.ca=void 0!==a.tilePixelRatio?a.tilePixelRatio:1,this.tileGrid=void 0!==a.tileGrid?a.tileGrid:null,this.a=new nd(a.cacheSize),this.b=[0,0],this.Ka=""}function Od(a,b,c,d,e){if(b=a.Za(b),!b)return!1;for(var g,h,f=!0,k=d.G;k<=d.H;++k)for(var l=d.I;l<=d.J;++l)g=a.Ha(c,k,l),h=!1,b.b.hasOwnProperty(g)&&(g=b.get(g),(h=2===g.aa())&&(h=!1!==e(g))),h||(f=!1);return f}function Pd(a,b){a.Ka!==b&&(a.Ka=b,a.c())}function Qd(a,b,c,d){return d=a.na(d),c=a.ib(c),b=td(Gd(d,b),a.b),1==c?b:sd(b,c,a.b)}function Rd(a,b,c){var d=void 0!==c?c:a.f;if(c=a.na(d),a.A&&d.b){var e=b;b=e[0],a=Fd(c,e);var d=Kd(d),f=a[0],g=a[1];d[0]<=f&&f<=d[2]&&d[1]<=g&&g<=d[3]?b=e:(e=ub(d),a[0]+=e*Math.ceil((d[0]-a[0])/e),b=Id(c,a,b))}return d=b[0],a=b[1],e=b[2],c=c.minZoom>d||d>c.maxZoom?!1:(c=(f=c.D())?Bd(c,f,d):c.c?c.c[d]:null)?Pc(c,a,e):!0,c?b:null}function Sd(a,b){Fa.call(this,a),this.tile=b}function Td(a){a=a?a:{},this.A=document.createElement("UL"),this.j=document.createElement("LI"),this.A.appendChild(this.j),this.j.style.display="none",this.b=void 0!==a.collapsed?a.collapsed:!0,this.f=void 0!==a.collapsible?a.collapsible:!0,this.f||(this.b=!1);var b=void 0!==a.className?a.className:"ol-attribution",c=void 0!==a.tipLabel?a.tipLabel:"Attributions",d=void 0!==a.collapseLabel?a.collapseLabel:"»";"string"==typeof d?(this.h=document.createElement("span"),this.h.textContent=d):this.h=d,d=void 0!==a.label?a.label:"i","string"==typeof d?(this.l=document.createElement("span"),this.l.textContent=d):this.l=d;var e=this.f&&!this.b?this.h:this.l,d=document.createElement("button");d.setAttribute("type","button"),d.title=c,d.appendChild(e),I(d,"click",this.L,this),c=document.createElement("div"),c.className=b+" ol-unselectable ol-control"+(this.b&&this.f?" ol-collapsed":"")+(this.f?"":" ol-uncollapsible"),c.appendChild(this.A),c.appendChild(d),ld.call(this,{element:c,render:a.render?a.render:Ud,target:a.target}),this.v=!0,this.g={},this.a={},this.B={}}function Ud(a){if(a=a.frameState){var b,c,d,e,f,g,h,k,l,n,p,q=a.layerStatesArray,t=qa({},a.attributions),u={},x=a.viewState.projection;for(c=0,b=q.length;b>c;c++)if((g=q[c].layer.Z())&&(n=y(g).toString(),l=g.X))for(d=0,e=l.length;e>d;d++)if(h=l[d],k=y(h).toString(),!(k in t)){if(f=a.usedTiles[n]){var r=g.na(x);a:{p=h;var B=x;if(p.a){var z,v,D,M=void 0;for(M in f)if(M in p.a){D=f[M];var N;for(z=0,v=p.a[M].length;v>z;++z){if(N=p.a[M][z],Qc(N,D)){p=!0;break a}var G=Bd(r,Kd(B),parseInt(M,10)),H=G.H-G.G+1;if((D.G<G.G||D.H>G.H)&&(Qc(N,new Oc(ma(D.G,H),ma(D.H,H),D.I,D.J))||D.H-D.G+1>H&&Qc(N,G))){p=!0;break a}}}p=!1}else p=!0}}else p=!1;p?(k in u&&delete u[k],t[k]=h):u[k]=h}b=[t,u],c=b[0],b=b[1];for(var A in this.g)A in c?(this.a[A]||(this.g[A].style.display="",this.a[A]=!0),delete c[A]):A in b?(this.a[A]&&(this.g[A].style.display="none",delete this.a[A]),delete b[A]):(jd(this.g[A]),delete this.g[A],delete this.a[A]);for(A in c)d=document.createElement("LI"),d.innerHTML=c[A].c,this.A.appendChild(d),this.g[A]=d,this.a[A]=!0;for(A in b)d=document.createElement("LI"),d.innerHTML=b[A].c,d.style.display="none",this.A.appendChild(d),this.g[A]=d;A=!ua(this.a)||!ua(a.logos),this.v!=A&&(this.element.style.display=A?"":"none",this.v=A),A&&ua(this.a)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only");var K;a=a.logos,A=this.B;for(K in A)K in a||(jd(A[K]),delete A[K]);for(var Q in a)b=a[Q],b instanceof HTMLElement&&(this.j.appendChild(b),A[Q]=b),Q in A||(K=new Image,K.src=Q,""===b?c=K:(c=document.createElement("a"),c.href=b,c.appendChild(K)),this.j.appendChild(c),A[Q]=c);this.j.style.display=ua(a)?"none":""}else this.v&&(this.element.style.display="none",this.v=!1)}function Vd(a){if(a.element.classList.toggle("ol-collapsed"),a.b){var b=a.l,c=b.parentNode;c&&c.replaceChild(a.h,b)}else b=a.h,(c=b.parentNode)&&c.replaceChild(a.l,b);a.b=!a.b}function Wd(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-rotate",c=void 0!==a.label?a.label:"⇧";this.a=null,"string"==typeof c?(this.a=document.createElement("span"),this.a.className="ol-compass",this.a.textContent=c):(this.a=c,this.a.classList.add("ol-compass"));var d=a.tipLabel?a.tipLabel:"Reset rotation",c=document.createElement("button");c.className=b+"-reset",c.setAttribute("type","button"),c.title=d,c.appendChild(this.a),I(c,"click",Wd.prototype.j,this),d=document.createElement("div"),d.className=b+" ol-unselectable ol-control",d.appendChild(c),b=a.render?a.render:Xd,this.g=a.resetNorth?a.resetNorth:void 0,ld.call(this,{element:d,render:b,target:a.target}),this.f=void 0!==a.duration?a.duration:250,this.b=void 0!==a.autoHide?a.autoHide:!0,this.h=void 0,this.b&&this.element.classList.add("ol-hidden")}function Xd(a){if(a=a.frameState){if(a=a.viewState.rotation,a!=this.h){var b="rotate("+a+"rad)";if(this.b){var c=this.element.classList.contains("ol-hidden");c||0!==a?c&&0!==a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.a.style.msTransform=b,this.a.style.webkitTransform=b,this.a.style.transform=b}this.h=a}}function Yd(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-zoom",c=void 0!==a.delta?a.delta:1,d=void 0!==a.zoomInLabel?a.zoomInLabel:"+",e=void 0!==a.zoomOutLabel?a.zoomOutLabel:"−",f=void 0!==a.zoomInTipLabel?a.zoomInTipLabel:"Zoom in",g=void 0!==a.zoomOutTipLabel?a.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=b+"-in",h.setAttribute("type","button"),h.title=f,h.appendChild("string"==typeof d?document.createTextNode(d):d),I(h,"click",Yd.prototype.b.bind(this,c)),d=document.createElement("button"),d.className=b+"-out",d.setAttribute("type","button"),d.title=g,d.appendChild("string"==typeof e?document.createTextNode(e):e),I(d,"click",Yd.prototype.b.bind(this,-c)),c=document.createElement("div"),c.className=b+" ol-unselectable ol-control",
c.appendChild(h),c.appendChild(d),ld.call(this,{element:c,target:a.target}),this.a=void 0!==a.duration?a.duration:250}function Zd(a){a=a?a:{};var b=new Tc;return(void 0!==a.zoom?a.zoom:1)&&b.push(new Yd(a.zoomOptions)),(void 0!==a.rotate?a.rotate:1)&&b.push(new Wd(a.rotateOptions)),(void 0!==a.attribution?a.attribution:1)&&b.push(new Td(a.attributionOptions)),b}function ae(){var a=aa.MessageChannel;if("undefined"==typeof a&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&-1==ed.indexOf("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none",a.src="",document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open(),a.write(""),a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=ia(function(a){"*"!=d&&a.origin!=d||a.data!=c||this.port1.onmessage()},this);b.addEventListener("message",a,!1),this.port1={},this.port2={postMessage:function(){b.postMessage(c,d)}}}),"undefined"!=typeof a&&-1==ed.indexOf("Trident")&&-1==ed.indexOf("MSIE")){var b=new a,c={},d=c;return b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var a=c.uc;c.uc=null,a()}},function(a){d.next={uc:a},d=d.next,b.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null,b.parentNode.removeChild(b),b=null,a(),a=null},document.documentElement.appendChild(b)}:function(a){aa.setTimeout(a,0)}}function be(a,b,c){Fa.call(this,a),this.a=b,a=c?c:{},this.buttons=ce(a),this.pressure=de(a,this.buttons),this.bubbles="bubbles"in a?a.bubbles:!1,this.cancelable="cancelable"in a?a.cancelable:!1,this.view="view"in a?a.view:null,this.detail="detail"in a?a.detail:null,this.screenX="screenX"in a?a.screenX:0,this.screenY="screenY"in a?a.screenY:0,this.clientX="clientX"in a?a.clientX:0,this.clientY="clientY"in a?a.clientY:0,this.button="button"in a?a.button:0,this.relatedTarget="relatedTarget"in a?a.relatedTarget:null,this.pointerId="pointerId"in a?a.pointerId:0,this.width="width"in a?a.width:0,this.height="height"in a?a.height:0,this.pointerType="pointerType"in a?a.pointerType:"",this.isPrimary="isPrimary"in a?a.isPrimary:!1,b.preventDefault&&(this.preventDefault=function(){b.preventDefault()})}function ce(a){if(a.buttons||ee)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}function de(a,b){var c=0;return c=a.pressure?a.pressure:b?.5:0}function qe(a,b){this.a=a,this.g=b}function re(a){qe.call(this,a,{mousedown:this.Re,mousemove:this.Se,mouseup:this.Ve,mouseover:this.Ue,mouseout:this.Te}),this.c=a.c,this.b=[]}function se(a,b){for(var h,c=a.b,d=b.clientX,e=b.clientY,f=0,g=c.length;g>f&&(h=c[f]);f++){var k=Math.abs(e-h[1]);if(25>=Math.abs(d-h[0])&&25>=k)return!0}return!1}function te(a){var b=ue(a,a),c=b.preventDefault;return b.preventDefault=function(){a.preventDefault(),c()},b.pointerId=1,b.isPrimary=!0,b.pointerType="mouse",b}function Ce(a){qe.call(this,a,{MSPointerDown:this.$e,MSPointerMove:this.af,MSPointerUp:this.df,MSPointerOut:this.bf,MSPointerOver:this.cf,MSPointerCancel:this.Ze,MSGotPointerCapture:this.Xe,MSLostPointerCapture:this.Ye}),this.c=a.c,this.b=["","unavailable","touch","pen","mouse"]}function De(a,b){var c=b;return ca(b.pointerType)&&(c=ue(b,b),c.pointerType=a.b[b.pointerType]),c}function Ee(a){qe.call(this,a,{pointerdown:this.vf,pointermove:this.wf,pointerup:this.zf,pointerout:this.xf,pointerover:this.yf,pointercancel:this.uf,gotpointercapture:this.oe,lostpointercapture:this.Qe})}function Ge(a,b){qe.call(this,a,{touchstart:this.cg,touchmove:this.bg,touchend:this.ag,touchcancel:this.$f}),this.c=a.c,this.h=b,this.b=void 0,this.f=0,this.i=void 0}function He(a,b,c){return b=ue(b,c),b.pointerId=c.identifier+2,b.bubbles=!0,b.cancelable=!0,b.detail=a.f,b.button=0,b.buttons=1,b.width=c.webkitRadiusX||c.radiusX||0,b.height=c.webkitRadiusY||c.radiusY||0,b.pressure=c.webkitForce||c.force||.5,b.isPrimary=a.b===c.identifier,b.pointerType="touch",b.clientX=c.clientX,b.clientY=c.clientY,b.screenX=c.screenX,b.screenY=c.screenY,b}function Ie(a,b,c){function d(){b.preventDefault()}var g,h,e=Array.prototype.slice.call(b.changedTouches),f=e.length;for(g=0;f>g;++g)h=He(a,b,e[g]),h.preventDefault=d,c.call(a,b,h)}function Je(a,b){var c=a.h.b,d=b.changedTouches[0];if(a.b===d.identifier){var e=[d.clientX,d.clientY];c.push(e),E.setTimeout(function(){Sa(c,e)},2500)}}function Ne(a){Ha.call(this),this.g=a,this.c={},this.i={},this.a=[],oe?Oe(this,new Ee(this)):pe?Oe(this,new Ce(this)):(a=new re(this),Oe(this,a),ne&&Oe(this,new Ge(this,a))),a=this.a.length;for(var b,c=0;a>c;c++)b=this.a[c],Pe(this,Object.keys(b.g))}function Oe(a,b){var c=Object.keys(b.g);c&&(c.forEach(function(a){var c=b.g[a];c&&(this.i[a]=c.bind(b))},a),a.a.push(b))}function Pe(a,b){b.forEach(function(a){I(this.g,a,this.b,this)},a)}function Qe(a,b){b.forEach(function(a){Ca(this.g,a,this.b,this)},a)}function ue(a,b){for(var d,c={},e=0,f=Re.length;f>e;e++)d=Re[e][0],c[d]=a[d]||b[d]||Re[e][1];return c}function Be(a,b,c){a.out(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||(b.bubbles=!1,ve(a,Me,b,c))}function Ae(a,b,c){b.bubbles=!0,ve(a,Ke,b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||(b.bubbles=!1,ve(a,Le,b,c))}function ve(a,b,c,d){O(a,new be(b,d,c))}function Fe(a,b){O(a,new be(b.type,b,b))}function Te(a,b,c,d,e){kd.call(this,a,b,e),this.originalEvent=c,a=b.a.getBoundingClientRect(),c=c.changedTouches?c.changedTouches[0]:c,this.pixel=[c.clientX-a.left,c.clientY-a.top],this.coordinate=b.ra(this.pixel),this.dragging=void 0!==d?d:!1}function Ue(a,b,c,d,e){Te.call(this,a,b,c.a,d,e),this.a=c}function Ve(a){Ha.call(this),this.b=a,this.f=0,this.h=!1,this.i=[],this.c=null,a=this.b.a,this.o=0,this.l={},this.g=new Ne(a),this.a=null,this.s=I(this.g,xe,this.Ce,this),this.j=I(this.g,ye,this.Rf,this)}function We(a,b){var c;c=new Ue(Xe,a.b,b),O(a,c),0!==a.f?(E.clearTimeout(a.f),a.f=0,c=new Ue(Ye,a.b,b),O(a,c)):a.f=E.setTimeout(function(){this.f=0;var a=new Ue(Ze,this.b,b);O(this,a)}.bind(a),250)}function $e(a,b){b.type==af||b.type==bf?delete a.l[b.pointerId]:b.type==cf&&(a.l[b.pointerId]=!0),a.o=Object.keys(a.l).length}function gf(a){R.call(this);var b=qa({},a);b.opacity=void 0!==a.opacity?a.opacity:1,b.visible=void 0!==a.visible?a.visible:!0,b.zIndex=void 0!==a.zIndex?a.zIndex:0,b.maxResolution=void 0!==a.maxResolution?a.maxResolution:1/0,b.minResolution=void 0!==a.minResolution?a.minResolution:0,La(this,b)}function hf(a){var b=a.get("opacity"),c=a.Pb(),d=a.b(),e=a.D(),f=a.get("zIndex"),g=a.get("maxResolution"),h=a.get("minResolution");return{layer:a,opacity:ka(b,0,1),Zf:c,visible:d,Tb:!0,extent:e,zIndex:f,maxResolution:g,minResolution:Math.max(h,0)}}function jf(){}function kf(a,b,c,d,e,f){Fa.call(this,a,b),this.vectorContext=c,this.frameState=d,this.context=e,this.glContext=f}function lf(a){var b=qa({},a);delete b.source,gf.call(this,b),this.f=this.g=this.a=null,a.map&&this.setMap(a.map),I(this,Na("source"),this.Ie,this),this.set("source",a.source?a.source:null)}function mf(a,b,c,d,e,f,g,h){if(a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,0===b&&0===c||dc(a,b,c),1!=d||1!=e){b=a[1]*d,c=a[2]*d;var k=a[3]*d,l=a[4]*e,n=a[5]*e,p=a[6]*e;e=a[7]*e;var q=1*a[8],t=1*a[9],u=1*a[10],x=1*a[11],r=a[12],B=a[13],z=a[14],v=a[15];a[0]*=d,a[1]=b,a[2]=c,a[3]=k,a[4]=l,a[5]=n,a[6]=p,a[7]=e,a[8]=q,a[9]=t,a[10]=u,a[11]=x,a[12]=r,a[13]=B,a[14]=z,a[15]=v}return 0!==f&&(d=a[0],b=a[1],c=a[2],k=a[3],l=a[4],n=a[5],p=a[6],e=a[7],q=Math.cos(f),f=Math.sin(f),a[0]=d*q+l*f,a[1]=b*q+n*f,a[2]=c*q+p*f,a[3]=k*q+e*f,a[4]=d*-f+l*q,a[5]=b*-f+n*q,a[6]=c*-f+p*q,a[7]=k*-f+e*q),0===g&&0===h||dc(a,g,h),a}function nf(a,b,c){var d=a[1],e=a[5],f=a[13],g=b[0];return b=b[1],c[0]=a[0]*g+a[4]*b+a[12],c[1]=d*g+e*b+f,c}function of(a){Ja.call(this),this.a=a}function pf(a,b,c){return function(d,e){return Od(a,b,d,e,function(a){c[d]||(c[d]={}),c[d][a.pa.toString()]=a})}}function qf(a,b){b.Uc()&&a.postRenderFunctions.push(function(a,b,e){b=y(a).toString(),a.Fa(e.viewState.projection,e.usedTiles[b])}.bind(null,b))}function rf(a,b){if(b){var c,d,e;for(d=0,e=b.length;e>d;++d)c=b[d],a[y(c).toString()]=c}}function sf(a,b){var c=b.fa;void 0!==c&&("string"==typeof c?a.logos[c]="":da(c)&&(a.logos[c.src]=c.href))}function tf(a,b,c,d){b=y(b).toString(),c=c.toString(),b in a?c in a[b]?(a=a[b][c],d.G<a.G&&(a.G=d.G),d.H>a.H&&(a.H=d.H),d.I<a.I&&(a.I=d.I),d.J>a.J&&(a.J=d.J)):a[b][c]=d:(a[b]={},a[b][c]=d)}function uf(a,b,c){return[b*(Math.round(a[0]/b)+c[0]%2/2),b*(Math.round(a[1]/b)+c[1]%2/2)]}function vf(a,b,c,d,e,f,g,h){var k=y(b).toString();k in a.wantedTiles||(a.wantedTiles[k]={});var l=a.wantedTiles[k];a=a.tileQueue;var p,q,t,u,x,r,n=c.minZoom;for(r=g;r>=n;--r)for(q=Bd(c,f,r,q),t=c.R(r),u=q.G;u<=q.H;++u)for(x=q.I;x<=q.J;++x)h>=g-r?(p=wf(b,r,u,x,d,e),0==p.aa()&&(l[p.pa.toString()]=!0,p.getKey()in a.b||a.h([p,k,Fd(c,p.pa),t]))):b.od(r,u,x,e)}function xf(a){this.l=a.opacity,this.o=a.rotateWithView,this.T=a.rotation,this.w=a.scale,this.P=a.snapToPixel}function yf(a){a=a||{},this.g=void 0!==a.anchor?a.anchor:[.5,.5],this.i=null,this.c=void 0!==a.anchorOrigin?a.anchorOrigin:"top-left",this.h=void 0!==a.anchorXUnits?a.anchorXUnits:"fraction",this.s=void 0!==a.anchorYUnits?a.anchorYUnits:"fraction";var b=void 0!==a.crossOrigin?a.crossOrigin:null,c=void 0!==a.img?a.img:null,d=void 0!==a.imgSize?a.imgSize:null,e=a.src;void 0!==e&&0!==e.length||!c||(e=c.src||y(c).toString());var g,f=void 0!==a.src?0:2;void 0!==a.color?(g=a.color,g=Array.isArray(g)?g:cd(g)):g=null;var h=zf.Ic(),k=h.get(e,b,g);k||(k=new Af(c,e,d,b,f,g),h.set(e,b,g,k)),this.a=k,this.U=void 0!==a.offset?a.offset:[0,0],this.b=void 0!==a.offsetOrigin?a.offsetOrigin:"top-left",this.f=null,this.j=void 0!==a.size?a.size:null,xf.call(this,{opacity:void 0!==a.opacity?a.opacity:1,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:!0,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1})}function Af(a,b,c,d,e,f){Ha.call(this),this.h=null,this.a=a?a:new Image,null!==d&&(this.a.crossOrigin=d),this.i=f?document.createElement("CANVAS"):null,this.f=f,this.g=null,this.b=e,this.c=c,this.l=b,this.s=!1,2==this.b&&Bf(this)}function Bf(a){var b=id(1,1);try{b.drawImage(a.a,0,0),b.getImageData(0,0,1,1)}catch(c){a.s=!0}}function zf(){this.a={},this.c=0}function Cf(a,b){this.f=b,this.c={},this.i={}}function Df(){var a=zf.Ic();if(32<a.c){var c,d,b=0;for(c in a.a)d=a.a[c],0!==(3&b++)||Ia(d)||(delete a.a[c],--a.c)}}function Ef(a,b){var c=y(b).toString();if(c in a.c)return a.c[c];var d;return d=b instanceof Ff?new Gf(b):b instanceof Hf?new If(b):null,a.c[c]=d,a.i[c]=I(d,"change",a.we,a),d}function Va(a,b){return a.zIndex-b.zIndex}function Jf(a,b){this.j=a,this.f=b,this.a=[],this.c=[],this.b={}}function Lf(a,b){for(var c=a.a,d=a.c,e=c.length,f=c[b],g=d[b],h=b;e>>1>b;){var k=2*b+1,l=2*b+2,k=e>l&&d[l]<d[k]?l:k;c[b]=c[k],d[b]=d[k],b=k}c[b]=f,d[b]=g,Kf(a,h,b)}function Kf(a,b,c){var d=a.a;a=a.c;for(var e=d[c],f=a[c];c>b;){var g=c-1>>1;if(!(a[g]>f))break;d[c]=d[g],a[c]=a[g],c=g}d[c]=e,a[c]=f}function Mf(a,b){Jf.call(this,function(b){return a.apply(null,b)},function(a){return a[0].getKey()}),this.l=b,this.g=0,this.i={}}function Nf(){this.a=[],this.c=this.b=0}function Of(a,b){var c=a.c,d=.05-c,e=Math.log(.05/a.c)/-.005;return Lc({source:b,duration:e,easing:function(a){return c*(Math.exp(-.005*a*e)-1)/d}})}function Pf(a){R.call(this),this.w=null,this.set("active",!0),this.handleEvent=a.handleEvent}function Qf(a,b,c,d,e){if(void 0!==c){var f=Fc(b),g=b.la();void 0!==f&&g&&e&&e>0&&(a.ka(Mc({rotation:f,duration:e,easing:Ic})),d&&a.ka(Lc({source:g,duration:e,easing:Ic}))),b.rotate(c,d)}}function Rf(a,b,c,d,e){var f=b.R();c=b.constrainResolution(f,c,0),Sf(a,b,c,d,e)}function Sf(a,b,c,d,e){if(c){var f=b.R(),g=b.la();if(void 0!==f&&g&&c!==f&&e&&e>0&&(a.ka(Nc({resolution:f,duration:e,easing:Ic})),d&&a.ka(Lc({source:g,duration:e,easing:Ic}))),d){var h;a=b.la(),e=b.R(),void 0!==a&&void 0!==e&&(h=[d[0]-c*(d[0]-a[0])/e,d[1]-c*(d[1]-a[1])/e]),b.ta(h)}Gc(b,c)}}function Tf(a){a=a?a:{},this.a=a.delta?a.delta:1,Pf.call(this,{handleEvent:Uf}),this.b=void 0!==a.duration?a.duration:250}function Uf(a){var b=!1,c=a.originalEvent;if(a.type==Ye){var b=a.map,d=a.coordinate,c=c.shiftKey?-this.a:this.a,e=b.S();Rf(b,e,c,d,this.b),a.preventDefault(),b=!0}return!b}function Vf(a){return a=a.originalEvent,a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Wf(a){return a=a.originalEvent,0==a.button&&!(hd&&ie&&a.ctrlKey)}function Xf(a){return a.type==Ze}function Zf(a){return a=a.originalEvent,!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function $f(a){return a=a.originalEvent,!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function ag(a){return a=a.originalEvent.target.tagName,"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}function bg(a){return"mouse"==a.a.pointerType}function cg(a){return a=a.a,a.isPrimary&&0===a.button}function dg(a){a=a?a:{},Pf.call(this,{handleEvent:a.handleEvent?a.handleEvent:eg}),this.Bb=a.handleDownEvent?a.handleDownEvent:Db,this.yb=a.handleDragEvent?a.handleDragEvent:ja,this.Db=a.handleMoveEvent?a.handleMoveEvent:ja,this.Eb=a.handleUpEvent?a.handleUpEvent:Db,this.o=!1,this.X={},this.g=[]}function fg(a){for(var b=a.length,c=0,d=0,e=0;b>e;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}function eg(a){if(!(a instanceof Ue))return!0;var b=!1,c=a.type;return(c===cf||c===ef||c===af)&&(c=a.a,a.type==af?delete this.X[c.pointerId]:a.type==cf?this.X[c.pointerId]=c:c.pointerId in this.X&&(this.X[c.pointerId]=c),this.g=ta(this.X)),this.o&&(a.type==ef?this.yb(a):a.type==af&&(this.o=this.Eb(a))),a.type==cf?(this.o=a=this.Bb(a),b=this.C(a)):a.type==df&&this.Db(a),!b}function gg(a){dg.call(this,{handleDownEvent:hg,handleDragEvent:ig,handleUpEvent:jg}),a=a?a:{},this.a=a.kinetic,this.b=this.f=null,this.j=a.condition?a.condition:Zf,this.h=!1}function ig(a){var b=fg(this.g);if(this.a&&this.a.a.push(b[0],b[1],Date.now()),this.b){var c=this.b[0]-b[0],d=b[1]-this.b[1];a=a.map;var e=a.S(),f=e.aa(),d=c=[c,d],g=f.resolution;d[0]*=g,d[1]*=g,eb(c,f.rotation),bb(c,f.center),c=e.a.center(c),a.render(),e.ta(c)}this.b=b}function jg(a){a=a.map;var b=a.S();if(0===this.g.length){var c;if(c=!this.h&&this.a)if(c=this.a,6>c.a.length)c=!1;else{var d=Date.now()-100,e=c.a.length-3;if(c.a[e+2]<d)c=!1;else{for(var f=e-3;f>0&&c.a[f+2]>d;)f-=3;var d=c.a[e+2]-c.a[f+2],g=c.a[e]-c.a[f],e=c.a[e+1]-c.a[f+1];c.b=Math.atan2(e,g),c.c=Math.sqrt(g*g+e*e)/d,c=.05<c.c}}return c&&(c=(.05-this.a.c)/-.005,e=this.a.b,f=b.la(),this.f=Of(this.a,f),a.ka(this.f),f=kg(a,f),c=a.ra([f[0]-c*Math.cos(e),f[1]-c*Math.sin(e)]),c=b.a.center(c),b.ta(c)),Hc(b,-1),a.render(),!1}return this.b=null,!0}function hg(a){if(0<this.g.length&&this.j(a)){var b=a.map,c=b.S();return this.b=null,this.o||Hc(c,1),b.render(),this.f&&Sa(b.A,this.f)&&(c.ta(a.frameState.viewState.center),this.f=null),this.a&&(a=this.a,a.a.length=0,a.b=0,a.c=0),this.h=1<this.g.length,!0}return!1}function lg(a){a=a?a:{},dg.call(this,{handleDownEvent:mg,handleDragEvent:ng,handleUpEvent:og}),this.b=a.condition?a.condition:Vf,this.a=void 0,this.f=void 0!==a.duration?a.duration:250}function ng(a){if(bg(a)){var b=a.map,c=b.Ma();if(a=a.pixel,c=Math.atan2(c[1]/2-a[1],a[0]-c[0]/2),void 0!==this.a){a=c-this.a;var d=b.S(),e=Fc(d);b.render(),Qf(b,d,e-a)}this.a=c}}function og(a){if(!bg(a))return!0;a=a.map;var b=a.S();Hc(b,-1);var c=Fc(b),d=this.f,c=b.constrainRotation(c,0);return Qf(a,b,c,void 0,d),!1}function mg(a){return bg(a)&&Wf(a)&&this.b(a)?(a=a.map,Hc(a.S(),1),a.render(),this.a=void 0,!0):!1}function pg(a){this.i=null,this.c=document.createElement("div"),this.c.style.position="absolute",this.c.className="ol-box "+a,this.b=this.g=this.a=null}function qg(a){var b=a.g,c=a.b;a=a.c.style,a.left=Math.min(b[0],c[0])+"px",a.top=Math.min(b[1],c[1])+"px",a.width=Math.abs(c[0]-b[0])+"px",a.height=Math.abs(c[1]-b[1])+"px"}function rg(a){var b=a.g,c=a.b,b=[b,[b[0],c[1]],c,[c[0],b[1]]].map(a.a.ra,a.a);b[4]=b[0].slice(),a.i?a.i.O([b]):a.i=new T([b])}function sg(a,b,c){Fa.call(this,a),this.coordinate=b,this.mapBrowserEvent=c}function tg(a){dg.call(this,{handleDownEvent:ug,handleDragEvent:vg,handleUpEvent:wg}),a=a?a:{},this.a=new pg(a.className||"ol-dragbox"),this.b=null,this.l=a.condition?a.condition:Cb,this.j=a.boxEndCondition?a.boxEndCondition:xg}function xg(a,b,c){return a=c[0]-b[0],b=c[1]-b[1],a*a+b*b>=64}function vg(a){if(bg(a)){var b=this.a,c=a.pixel;b.g=this.b,b.b=c,rg(b),qg(b),O(this,new sg("boxdrag",a.coordinate,a))}}function wg(a){return bg(a)?(this.a.setMap(null),this.j(a,this.b,a.pixel)&&(this.h(a),O(this,new sg("boxend",a.coordinate,a))),!1):!0}function ug(a){if(bg(a)&&Wf(a)&&this.l(a)){this.b=a.pixel,this.a.setMap(a.map);var b=this.a,c=this.b;return b.g=this.b,b.b=c,rg(b),qg(b),O(this,new sg("boxstart",a.coordinate,a)),!0}return!1}function yg(a){a=a?a:{};var b=a.condition?a.condition:$f;this.f=void 0!==a.duration?a.duration:200,this.v=void 0!==a.out?a.out:!1,tg.call(this,{condition:b,className:a.className||"ol-dragzoom"})}function zg(a){Pf.call(this,{handleEvent:Ag}),a=a||{},this.a=function(a){return Zf(a)&&ag(a)},this.b=void 0!==a.condition?a.condition:this.a,this.g=void 0!==a.duration?a.duration:100,this.f=void 0!==a.pixelDelta?a.pixelDelta:128}function Ag(a){var b=!1;if("keydown"==a.type){var c=a.originalEvent.keyCode;if(this.b(a)&&(40==c||37==c||39==c||38==c)){var d=a.map,b=d.S(),e=b.R()*this.f,f=0,g=0;40==c?g=-e:37==c?f=-e:39==c?f=e:g=e,c=[f,g],eb(c,Fc(b)),e=this.g,(f=b.la())&&(e&&e>0&&d.ka(Lc({source:f,duration:e,easing:Kc})),d=b.a.center([f[0]+c[0],f[1]+c[1]]),b.ta(d)),a.preventDefault(),b=!0}}return!b}function Bg(a){Pf.call(this,{handleEvent:Cg}),a=a?a:{},this.b=a.condition?a.condition:ag,this.a=a.delta?a.delta:1,this.g=void 0!==a.duration?a.duration:100}function Cg(a){var b=!1;if("keydown"==a.type||"keypress"==a.type){var c=a.originalEvent.charCode;if(this.b(a)&&(43==c||45==c)){b=a.map,c=43==c?this.a:-this.a,b.render();var d=b.S();Rf(b,d,c,void 0,this.g),a.preventDefault(),b=!0}}return!b}function Dg(a){Pf.call(this,{handleEvent:Eg}),a=a||{},this.a=0,this.j=void 0!==a.duration?a.duration:250,this.l=void 0!==a.useAnchor?a.useAnchor:!0,this.g=null,this.f=this.b=void 0}function Eg(a){var b=!1;if("wheel"==a.type||"mousewheel"==a.type){var b=a.map,c=a.originalEvent;this.l&&(this.g=a.coordinate);var d;"wheel"==a.type?(d=c.deltaY,ge&&c.deltaMode===E.WheelEvent.DOM_DELTA_PIXEL&&(d/=je),c.deltaMode===E.WheelEvent.DOM_DELTA_LINE&&(d*=40)):"mousewheel"==a.type&&(d=-c.wheelDeltaY,he&&(d/=3)),this.a+=d,void 0===this.b&&(this.b=Date.now()),d=Math.max(80-(Date.now()-this.b),0),E.clearTimeout(this.f),this.f=E.setTimeout(this.h.bind(this,b),d),a.preventDefault(),b=!0}return!b}function Fg(a){dg.call(this,{handleDownEvent:Gg,handleDragEvent:Hg,handleUpEvent:Ig}),a=a||{},this.b=null,this.f=void 0,this.a=!1,this.h=0,this.l=void 0!==a.threshold?a.threshold:.3,this.j=void 0!==a.duration?a.duration:250}function Hg(a){var b=0,c=this.g[0],d=this.g[1],c=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);void 0!==this.f&&(b=c-this.f,this.h+=b,!this.a&&Math.abs(this.h)>this.l&&(this.a=!0)),this.f=c,a=a.map,c=a.a.getBoundingClientRect(),d=fg(this.g),d[0]-=c.left,d[1]-=c.top,this.b=a.ra(d),this.a&&(c=a.S(),d=Fc(c),a.render(),Qf(a,c,d+b,this.b))}function Ig(a){if(2>this.g.length){a=a.map;var b=a.S();if(Hc(b,-1),this.a){var c=Fc(b),d=this.b,e=this.j,c=b.constrainRotation(c,0);Qf(a,b,c,d,e)}return!1}return!0}function Gg(a){return 2<=this.g.length?(a=a.map,this.b=null,this.f=void 0,this.a=!1,this.h=0,this.o||Hc(a.S(),1),a.render(),!0):!1}function Jg(a){dg.call(this,{handleDownEvent:Kg,handleDragEvent:Lg,handleUpEvent:Mg}),a=a?a:{},this.b=null,this.h=void 0!==a.duration?a.duration:400,this.a=void 0,this.f=1}function Lg(a){var b=1,c=this.g[0],d=this.g[1],e=c.clientX-d.clientX,c=c.clientY-d.clientY,e=Math.sqrt(e*e+c*c);void 0!==this.a&&(b=this.a/e),this.a=e,1!=b&&(this.f=b),a=a.map;var e=a.S(),c=e.R(),d=a.a.getBoundingClientRect(),f=fg(this.g);f[0]-=d.left,f[1]-=d.top,this.b=a.ra(f),a.render(),Sf(a,e,c*b,this.b)}function Mg(a){if(2>this.g.length){a=a.map;var b=a.S();Hc(b,-1);var c=b.R(),d=this.b,e=this.h,c=b.constrainResolution(c,0,this.f-1);return Sf(a,b,c,d,e),!1}return!0}function Kg(a){return 2<=this.g.length?(a=a.map,this.b=null,this.a=void 0,this.f=1,this.o||Hc(a.S(),1),a.render(),!0):!1}function Ng(a){var b=a||{};a=qa({},b),delete a.layers,b=b.layers,gf.call(this,a),this.g=[],this.a={},I(this,Na("layers"),this.ye,this),b?Array.isArray(b)&&(b=new Tc(b.slice())):b=new Tc,this.set("layers",b)}function Og(a){Ib.call(this,{code:a,units:"m",extent:Pg,global:!0,worldExtent:Qg})}function Tg(a,b,c){var d=a.length;c=c>1?c:2,void 0===b&&(b=c>2?a.slice():Array(d));for(var e=0;d>e;e+=c)b[e]=6378137*Math.PI*a[e]/180,b[e+1]=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));return b}function Ug(a,b,c){var d=a.length;c=c>1?c:2,void 0===b&&(b=c>2?a.slice():Array(d));for(var e=0;d>e;e+=c)b[e]=180*a[e]/(6378137*Math.PI),b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b}function Wg(a,b){Ib.call(this,{code:a,units:"degrees",extent:Xg,axisOrientation:b,global:!0,metersPerUnit:Yg,worldExtent:Xg})}function Ff(a){a=a?a:{};var b=qa({},a);delete b.preload,delete b.useInterimTilesOnError,lf.call(this,b),this.set("preload",void 0!==a.preload?a.preload:0),this.set("useInterimTilesOnError",void 0!==a.useInterimTilesOnError?a.useInterimTilesOnError:!0)}function ch(a,b,c,d){0!==b&&(a.translate(c,d),a.rotate(b),a.translate(-c,-d))}function dh(a){a=a||{},this.a=void 0!==a.color?a.color:null,this.c=void 0}function eh(){this.c=-1}function fh(){this.c=64,this.a=Array(4),this.g=Array(this.c),this.a[0]=1732584193,this.a[1]=4023233417,this.a[2]=2562383102,this.a[3]=271733878,this.i=this.b=0}function gh(a,b,c){c||(c=0);var d=Array(16);if("string"==typeof b)for(var e=0;16>e;++e)d[e]=b.charCodeAt(c++)|b.charCodeAt(c++)<<8|b.charCodeAt(c++)<<16|b.charCodeAt(c++)<<24;else for(e=0;16>e;++e)d[e]=b[c++]|b[c++]<<8|b[c++]<<16|b[c++]<<24;b=a.a[0],c=a.a[1];var g,e=a.a[2],f=a.a[3];g=b+(f^c&(e^f))+d[0]+3614090360&4294967295,b=c+(g<<7&4294967295|g>>>25),g=f+(e^b&(c^e))+d[1]+3905402710&4294967295,f=b+(g<<12&4294967295|g>>>20),g=e+(c^f&(b^c))+d[2]+606105819&4294967295,e=f+(g<<17&4294967295|g>>>15),g=c+(b^e&(f^b))+d[3]+3250441966&4294967295,c=e+(g<<22&4294967295|g>>>10),g=b+(f^c&(e^f))+d[4]+4118548399&4294967295,b=c+(g<<7&4294967295|g>>>25),g=f+(e^b&(c^e))+d[5]+1200080426&4294967295,f=b+(g<<12&4294967295|g>>>20),g=e+(c^f&(b^c))+d[6]+2821735955&4294967295,e=f+(g<<17&4294967295|g>>>15),g=c+(b^e&(f^b))+d[7]+4249261313&4294967295,c=e+(g<<22&4294967295|g>>>10),g=b+(f^c&(e^f))+d[8]+1770035416&4294967295,b=c+(g<<7&4294967295|g>>>25),g=f+(e^b&(c^e))+d[9]+2336552879&4294967295,f=b+(g<<12&4294967295|g>>>20),g=e+(c^f&(b^c))+d[10]+4294925233&4294967295,e=f+(g<<17&4294967295|g>>>15),g=c+(b^e&(f^b))+d[11]+2304563134&4294967295,c=e+(g<<22&4294967295|g>>>10),g=b+(f^c&(e^f))+d[12]+1804603682&4294967295,b=c+(g<<7&4294967295|g>>>25),g=f+(e^b&(c^e))+d[13]+4254626195&4294967295,f=b+(g<<12&4294967295|g>>>20),g=e+(c^f&(b^c))+d[14]+2792965006&4294967295,e=f+(g<<17&4294967295|g>>>15),g=c+(b^e&(f^b))+d[15]+1236535329&4294967295,c=e+(g<<22&4294967295|g>>>10),g=b+(e^f&(c^e))+d[1]+4129170786&4294967295,b=c+(g<<5&4294967295|g>>>27),g=f+(c^e&(b^c))+d[6]+3225465664&4294967295,f=b+(g<<9&4294967295|g>>>23),g=e+(b^c&(f^b))+d[11]+643717713&4294967295,e=f+(g<<14&4294967295|g>>>18),g=c+(f^b&(e^f))+d[0]+3921069994&4294967295,c=e+(g<<20&4294967295|g>>>12),g=b+(e^f&(c^e))+d[5]+3593408605&4294967295,b=c+(g<<5&4294967295|g>>>27),g=f+(c^e&(b^c))+d[10]+38016083&4294967295,f=b+(g<<9&4294967295|g>>>23),g=e+(b^c&(f^b))+d[15]+3634488961&4294967295,e=f+(g<<14&4294967295|g>>>18),g=c+(f^b&(e^f))+d[4]+3889429448&4294967295,c=e+(g<<20&4294967295|g>>>12),g=b+(e^f&(c^e))+d[9]+568446438&4294967295,b=c+(g<<5&4294967295|g>>>27),g=f+(c^e&(b^c))+d[14]+3275163606&4294967295,f=b+(g<<9&4294967295|g>>>23),g=e+(b^c&(f^b))+d[3]+4107603335&4294967295,e=f+(g<<14&4294967295|g>>>18),g=c+(f^b&(e^f))+d[8]+1163531501&4294967295,c=e+(g<<20&4294967295|g>>>12),g=b+(e^f&(c^e))+d[13]+2850285829&4294967295,b=c+(g<<5&4294967295|g>>>27),g=f+(c^e&(b^c))+d[2]+4243563512&4294967295,f=b+(g<<9&4294967295|g>>>23),g=e+(b^c&(f^b))+d[7]+1735328473&4294967295,e=f+(g<<14&4294967295|g>>>18),g=c+(f^b&(e^f))+d[12]+2368359562&4294967295,c=e+(g<<20&4294967295|g>>>12),g=b+(c^e^f)+d[5]+4294588738&4294967295,b=c+(g<<4&4294967295|g>>>28),g=f+(b^c^e)+d[8]+2272392833&4294967295,f=b+(g<<11&4294967295|g>>>21),g=e+(f^b^c)+d[11]+1839030562&4294967295,e=f+(g<<16&4294967295|g>>>16),g=c+(e^f^b)+d[14]+4259657740&4294967295,c=e+(g<<23&4294967295|g>>>9),g=b+(c^e^f)+d[1]+2763975236&4294967295,b=c+(g<<4&4294967295|g>>>28),g=f+(b^c^e)+d[4]+1272893353&4294967295,f=b+(g<<11&4294967295|g>>>21),g=e+(f^b^c)+d[7]+4139469664&4294967295,e=f+(g<<16&4294967295|g>>>16),g=c+(e^f^b)+d[10]+3200236656&4294967295,c=e+(g<<23&4294967295|g>>>9),g=b+(c^e^f)+d[13]+681279174&4294967295,b=c+(g<<4&4294967295|g>>>28),g=f+(b^c^e)+d[0]+3936430074&4294967295,f=b+(g<<11&4294967295|g>>>21),g=e+(f^b^c)+d[3]+3572445317&4294967295,e=f+(g<<16&4294967295|g>>>16),g=c+(e^f^b)+d[6]+76029189&4294967295,c=e+(g<<23&4294967295|g>>>9),g=b+(c^e^f)+d[9]+3654602809&4294967295,b=c+(g<<4&4294967295|g>>>28),g=f+(b^c^e)+d[12]+3873151461&4294967295,f=b+(g<<11&4294967295|g>>>21),g=e+(f^b^c)+d[15]+530742520&4294967295,e=f+(g<<16&4294967295|g>>>16),g=c+(e^f^b)+d[2]+3299628645&4294967295,c=e+(g<<23&4294967295|g>>>9),g=b+(e^(c|~f))+d[0]+4096336452&4294967295,b=c+(g<<6&4294967295|g>>>26),g=f+(c^(b|~e))+d[7]+1126891415&4294967295,f=b+(g<<10&4294967295|g>>>22),g=e+(b^(f|~c))+d[14]+2878612391&4294967295,e=f+(g<<15&4294967295|g>>>17),g=c+(f^(e|~b))+d[5]+4237533241&4294967295,c=e+(g<<21&4294967295|g>>>11),g=b+(e^(c|~f))+d[12]+1700485571&4294967295,b=c+(g<<6&4294967295|g>>>26),g=f+(c^(b|~e))+d[3]+2399980690&4294967295,f=b+(g<<10&4294967295|g>>>22),g=e+(b^(f|~c))+d[10]+4293915773&4294967295,e=f+(g<<15&4294967295|g>>>17),g=c+(f^(e|~b))+d[1]+2240044497&4294967295,c=e+(g<<21&4294967295|g>>>11),g=b+(e^(c|~f))+d[8]+1873313359&4294967295,b=c+(g<<6&4294967295|g>>>26),g=f+(c^(b|~e))+d[15]+4264355552&4294967295,f=b+(g<<10&4294967295|g>>>22),g=e+(b^(f|~c))+d[6]+2734768916&4294967295,e=f+(g<<15&4294967295|g>>>17),g=c+(f^(e|~b))+d[13]+1309151649&4294967295,c=e+(g<<21&4294967295|g>>>11),g=b+(e^(c|~f))+d[4]+4149444226&4294967295,b=c+(g<<6&4294967295|g>>>26),g=f+(c^(b|~e))+d[11]+3174756917&4294967295,f=b+(g<<10&4294967295|g>>>22),g=e+(b^(f|~c))+d[2]+718787259&4294967295,e=f+(g<<15&4294967295|g>>>17),g=c+(f^(e|~b))+d[9]+3951481745&4294967295,a.a[0]=a.a[0]+b&4294967295,a.a[1]=a.a[1]+(e+(g<<21&4294967295|g>>>11))&4294967295,a.a[2]=a.a[2]+e&4294967295,a.a[3]=a.a[3]+f&4294967295}function hh(a,b){var c;void 0===c&&(c=b.length);for(var d=c-a.c,e=a.g,f=a.b,g=0;c>g;){if(0==f)for(;d>=g;)gh(a,b,g),g+=a.c;if("string"==typeof b){for(;c>g;)if(e[f++]=b.charCodeAt(g++),f==a.c){gh(a,e),f=0;break}}else for(;c>g;)if(e[f++]=b[g++],f==a.c){gh(a,e),f=0;break}}a.b=f,a.i+=c}function ih(a){a=a||{},this.c=void 0!==a.color?a.color:null,this.i=a.lineCap,this.a=void 0!==a.lineDash?a.lineDash:null,this.g=a.lineJoin,this.f=a.miterLimit,this.b=a.width,this.h=void 0}function jh(a){a=a||{},this.f=this.i=this.b=null,this.g=void 0!==a.fill?a.fill:null,this.a=void 0!==a.stroke?a.stroke:null,this.c=a.radius,this.s=[0,0],this.j=this.h=null;var d,b=a.atlasManager,c=null,e=0;this.a&&(d=ad(this.a.c),e=this.a.b,void 0===e&&(e=1),c=this.a.a,ke||(c=null));var f=2*(this.c+e)+1;if(d={strokeStyle:d,jd:e,size:f,lineDash:c},void 0===b){var g=id(f,f);this.i=g.canvas,f=this.i.width,this.Fc(d,g,0,0),this.g?this.f=this.i:(g=id(d.size,d.size),this.f=g.canvas,this.yc(d,g,0,0))}else{if(f=Math.round(f),(c=!this.g)&&(g=this.yc.bind(this,d)),this.a){if(e=this.a,void 0===e.h){var h="s"+(e.c?ad(e.c):"-")+","+(void 0!==e.i?e.i.toString():"-")+","+(e.a?e.a.toString():"-")+","+(void 0!==e.g?e.g:"-")+","+(void 0!==e.f?e.f.toString():"-")+","+(void 0!==e.b?e.b.toString():"-"),k=new fh;hh(k,h);var l=Array((56>k.b?k.c:2*k.c)-k.b);for(l[0]=128,h=1;h<l.length-8;++h)l[h]=0;for(var n=8*k.i,h=l.length-8;h<l.length;++h)l[h]=255&n,n/=256;for(hh(k,l),l=Array(16),h=n=0;4>h;++h)for(var p=0;32>p;p+=8)l[n++]=k.a[h]>>>p&255;if(8192>=l.length)k=String.fromCharCode.apply(null,l);else for(k="",h=0;h<l.length;h+=8192)k+=String.fromCharCode.apply(null,Xc(l,h,h+8192));e.h=k}e=e.h}else e="-";this.g?(k=this.g,void 0===k.c&&(k.c=k.a instanceof CanvasPattern||k.a instanceof CanvasGradient?y(k.a).toString():"f"+(k.a?ad(k.a):"-")),k=k.c):k="-",this.b&&e==this.b[1]&&k==this.b[2]&&this.c==this.b[3]||(this.b=["c"+e+k+(void 0!==this.c?this.c.toString():"-"),e,k,this.c]),g=b.add(this.b[0],f,f,this.Fc.bind(this,d),g),this.i=g.image,this.s=[g.offsetX,g.offsetY],c?this.f=g.Ag:this.f=this.i}this.h=[f/2,f/2],this.j=[f,f],xf.call(this,{opacity:1,rotateWithView:!1,rotation:0,scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:!0})}function kh(a){a=a||{},this.f=null,this.b=lh,void 0!==a.geometry&&mh(this,a.geometry),this.g=void 0!==a.fill?a.fill:null,this.h=void 0!==a.image?a.image:null,this.i=void 0!==a.stroke?a.stroke:null,this.c=void 0!==a.text?a.text:null,this.a=a.zIndex}function mh(a,b){"function"==typeof b?a.b=b:"string"==typeof b?a.b=function(a){return a.get(b)}:b?b&&(a.b=function(){return b}):a.b=lh,a.f=b}function nh(a){if("function"!=typeof a){var b;b=Array.isArray(a)?a:[a],a=function(){return b}}return a}function ph(){if(!oh){var a=new dh({color:"rgba(255,255,255,0.4)"}),b=new ih({color:"#3399CC",width:1.25});oh=[new kh({image:new jh({fill:a,stroke:b,radius:5}),fill:a,stroke:b})]}return oh}function qh(){var a={},b=[255,255,255,1],c=[0,153,255,1];return a.Polygon=[new kh({fill:new dh({color:[255,255,255,.5]})})],a.MultiPolygon=a.Polygon,a.LineString=[new kh({stroke:new ih({color:b,width:5})}),new kh({stroke:new ih({color:c,width:3})})],a.MultiLineString=a.LineString,a.Circle=a.Polygon.concat(a.LineString),a.Point=[new kh({image:new jh({radius:6,fill:new dh({color:c}),stroke:new ih({color:b,width:1.5})}),zIndex:1/0})],a.MultiPoint=a.Point,a.GeometryCollection=a.Polygon.concat(a.LineString,a.Point),a}function lh(a){return a.N()}function Hf(a){a=a?a:{};var b=qa({},a);delete b.style,delete b.renderBuffer,delete b.updateWhileAnimating,delete b.updateWhileInteracting,lf.call(this,b),this.h=void 0!==a.renderBuffer?a.renderBuffer:100,this.l=null,this.j=void 0,this.o(a.style),this.v=void 0!==a.updateWhileAnimating?a.updateWhileAnimating:!1,this.A=void 0!==a.updateWhileInteracting?a.updateWhileInteracting:!1}function rh(a,b,c,d,e){this.i=a,this.w=b,this.h=c,this.U=d,this.qa=e,this.g=this.a=this.c=this.ma=this.X=this.ha=null,this.va=this.V=this.o=this.C=this.A=this.v=0,this.$=!1,this.f=this.Qa=0,this.ca=!1,this.B=0,this.b="",this.j=this.P=this.ia=this.fa=0,this.L=this.l=this.s=null,this.T=[],this.ja=bc()}function sh(a,b,c){if(a.g){b=ec(b,0,c,2,a.U,a.T),c=a.i;var d=a.ja,e=c.globalAlpha;1!=a.o&&(c.globalAlpha=e*a.o);var f=a.Qa;a.$&&(f+=a.qa);var g,h;for(g=0,h=b.length;h>g;g+=2){var k=b[g]-a.v,l=b[g+1]-a.A;if(a.ca&&(k=Math.round(k),l=Math.round(l)),0!==f||1!=a.f){var n=k+a.v,p=l+a.A;mf(d,n,p,a.f,a.f,f,-n,-p),c.setTransform(d[0],d[1],d[4],d[5],d[12],d[13])}c.drawImage(a.g,a.V,a.va,a.B,a.C,k,l,a.B,a.C)}0===f&&1==a.f||c.setTransform(1,0,0,1,0,0),1!=a.o&&(c.globalAlpha=e)}}function th(a,b,c,d){var e=0;if(a.L&&""!==a.b){a.s&&uh(a,a.s),a.l&&vh(a,a.l);var f=a.L,g=a.i,h=a.ma;for(h?(h.font!=f.font&&(h.font=g.font=f.font),h.textAlign!=f.textAlign&&(h.textAlign=g.textAlign=f.textAlign),h.textBaseline!=f.textBaseline&&(h.textBaseline=g.textBaseline=f.textBaseline)):(g.font=f.font,g.textAlign=f.textAlign,g.textBaseline=f.textBaseline,a.ma={font:f.font,textAlign:f.textAlign,textBaseline:f.textBaseline}),b=ec(b,e,c,d,a.U,a.T),f=a.i;c>e;e+=d){if(g=b[e]+a.fa,h=b[e+1]+a.ia,0!==a.P||1!=a.j){var k=mf(a.ja,g,h,a.j,a.j,a.P,-g,-h);
f.setTransform(k[0],k[1],k[4],k[5],k[12],k[13])}a.l&&f.strokeText(a.b,g,h),a.s&&f.fillText(a.b,g,h)}0===a.P&&1==a.j||f.setTransform(1,0,0,1,0,0)}}function wh(a,b,c,d,e,f){var g=a.i;for(a=ec(b,c,d,e,a.U,a.T),g.moveTo(a[0],a[1]),b=a.length,f&&(b-=2),c=2;b>c;c+=2)g.lineTo(a[c],a[c+1]);return f&&g.closePath(),d}function xh(a,b,c,d,e){var f,g;for(f=0,g=d.length;g>f;++f)c=wh(a,b,c,d[f],e,!0);return c}function uh(a,b){var c=a.i,d=a.ha;d?d.fillStyle!=b.fillStyle&&(d.fillStyle=c.fillStyle=b.fillStyle):(c.fillStyle=b.fillStyle,a.ha={fillStyle:b.fillStyle})}function vh(a,b){var c=a.i,d=a.X;d?(d.lineCap!=b.lineCap&&(d.lineCap=c.lineCap=b.lineCap),ke&&!Ta(d.lineDash,b.lineDash)&&c.setLineDash(d.lineDash=b.lineDash),d.lineJoin!=b.lineJoin&&(d.lineJoin=c.lineJoin=b.lineJoin),d.lineWidth!=b.lineWidth&&(d.lineWidth=c.lineWidth=b.lineWidth),d.miterLimit!=b.miterLimit&&(d.miterLimit=c.miterLimit=b.miterLimit),d.strokeStyle!=b.strokeStyle&&(d.strokeStyle=c.strokeStyle=b.strokeStyle)):(c.lineCap=b.lineCap,ke&&c.setLineDash(b.lineDash),c.lineJoin=b.lineJoin,c.lineWidth=b.lineWidth,c.miterLimit=b.miterLimit,c.strokeStyle=b.strokeStyle,a.X={lineCap:b.lineCap,lineDash:b.lineDash,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle})}function Ch(a){of.call(this,a),this.C=bc()}function Dh(a,b,c,d,e){var f=a.a;if(Ia(f,b)){var g=d.size[0]*d.pixelRatio,h=d.size[1]*d.pixelRatio,k=d.viewState.rotation;ch(c,-k,g/2,h/2),a=void 0!==e?e:Eh(a,d,0),a=new rh(c,d.pixelRatio,d.extent,a,d.viewState.rotation),O(f,new kf(b,f,a,d,c,null)),ch(c,k,g/2,h/2)}}function Eh(a,b,c){var d=b.viewState,e=b.pixelRatio;return mf(a.C,e*b.size[0]/2,e*b.size[1]/2,e/d.resolution,-e/d.resolution,-d.rotation,-d.center[0]+c,-d.center[1])}function Gh(a,b,c){this.$=a,this.ha=b,this.i=null,this.g=0,this.resolution=c,this.B=this.C=null,this.c=[],this.coordinates=[],this.ma=bc(),this.a=[],this.X=[],this.V=bc(),this.va=bc()}function Hh(a,b,c,d,e,f){var p,q,t,g=a.coordinates.length,h=a.Kb(),k=[b[c],b[c+1]],l=[NaN,NaN],n=!0;for(p=c+e;d>p;p+=e){l[0]=b[p],l[1]=b[p+1],t=h[1];var u=h[2],x=h[3],r=l[0],B=l[1],z=0;r<h[0]?z|=16:r>u&&(z|=4),t>B?z|=8:B>x&&(z|=2),0===z&&(z=1),t=z,t!==q?(n&&(a.coordinates[g++]=k[0],a.coordinates[g++]=k[1]),a.coordinates[g++]=l[0],a.coordinates[g++]=l[1],n=!1):1===t?(a.coordinates[g++]=l[0],a.coordinates[g++]=l[1],n=!1):n=!0,k[0]=l[0],k[1]=l[1],q=t}return p===c+e&&(a.coordinates[g++]=k[0],a.coordinates[g++]=k[1]),f&&(a.coordinates[g++]=b[c],a.coordinates[g++]=b[c+1]),g}function Ih(a,b){a.C=[0,b,0],a.c.push(a.C),a.B=[0,b,0],a.a.push(a.B)}function Jh(a,b,c,d,e,f,g,h,k){var l;if(l=a.ma,d[0]==l[0]&&d[1]==l[1]&&d[4]==l[4]&&d[5]==l[5]&&d[12]==l[12]&&d[13]==l[13])l=a.X;else{l=ec(a.coordinates,0,a.coordinates.length,2,d,a.X);var n=a.ma;n[0]=d[0],n[1]=d[1],n[2]=d[2],n[3]=d[3],n[4]=d[4],n[5]=d[5],n[6]=d[6],n[7]=d[7],n[8]=d[8],n[9]=d[9],n[10]=d[10],n[11]=d[11],n[12]=d[12],n[13]=d[13],n[14]=d[14],n[15]=d[15]}d=!ua(f);var q,t,n=0,p=g.length,u=a.V;a=a.va;for(var x,r,B,z;p>n;){var D,M,N,G,v=g[n];switch(v[0]){case 0:q=v[1],d&&f[y(q).toString()]||!q.N()?n=v[2]:void 0===k||Ab(k,q.N().D())?++n:n=v[2];break;case 1:b.beginPath(),++n;break;case 2:q=v[1],t=l[q],v=l[q+1],B=l[q+2]-t,q=l[q+3]-v,b.arc(t,v,Math.sqrt(B*B+q*q),0,2*Math.PI,!0),++n;break;case 3:b.closePath(),++n;break;case 4:q=v[1],t=v[2],D=v[3],N=v[4]*c;var H=v[5]*c,A=v[6];M=v[7];var K=v[8],Q=v[9];B=v[11],z=v[12];var L=v[13],P=v[14];for(v[10]&&(B+=e);t>q;q+=2){if(v=l[q]-N,G=l[q+1]-H,L&&(v=Math.round(v),G=Math.round(G)),1!=z||0!==B){var J=v+N,va=G+H;mf(u,J,va,z,z,B,-J,-va),b.transform(u[0],u[1],u[4],u[5],u[12],u[13])}J=b.globalAlpha,1!=M&&(b.globalAlpha=J*M);var va=P+K>D.width?D.width-K:P,sa=A+Q>D.height?D.height-Q:A;b.drawImage(D,K,Q,va,sa,v,G,va*c,sa*c),1!=M&&(b.globalAlpha=J),(1!=z||0!==B)&&(cc(u,a),b.transform(a[0],a[1],a[4],a[5],a[12],a[13]))}++n;break;case 5:for(q=v[1],t=v[2],N=v[3],H=v[4]*c,A=v[5]*c,B=v[6],z=v[7]*c,D=v[8],M=v[9];t>q;q+=2){for(v=l[q]+H,G=l[q+1]+A,(1!=z||0!==B)&&(mf(u,v,G,z,z,B,-v,-G),b.transform(u[0],u[1],u[4],u[5],u[12],u[13])),K=N.split("\n"),Q=K.length,Q>1?(L=Math.round(1.5*b.measureText("M").width),G-=(Q-1)/2*L):L=0,P=0;Q>P;P++)J=K[P],M&&b.strokeText(J,v,G),D&&b.fillText(J,v,G),G+=L;(1!=z||0!==B)&&(cc(u,a),b.transform(a[0],a[1],a[4],a[5],a[12],a[13]))}++n;break;case 6:if(void 0!==h&&(q=v[1],q=h(q)))return q;++n;break;case 7:b.fill(),++n;break;case 8:for(q=v[1],t=v[2],v=l[q],G=l[q+1],B=v+.5|0,z=G+.5|0,(B!==x||z!==r)&&(b.moveTo(v,G),x=B,r=z),q+=2;t>q;q+=2)v=l[q],G=l[q+1],B=v+.5|0,z=G+.5|0,(q==t-2||B!==x||z!==r)&&(b.lineTo(v,G),x=B,r=z);++n;break;case 9:b.fillStyle=v[1],++n;break;case 10:x=void 0!==v[7]?v[7]:!0,r=v[2],b.strokeStyle=v[1],b.lineWidth=x?r*c:r,b.lineCap=v[3],b.lineJoin=v[4],b.miterLimit=v[5],ke&&b.setLineDash(v[6]),r=x=NaN,++n;break;case 11:b.font=v[1],b.textAlign=v[2],b.textBaseline=v[3],++n;break;case 12:b.stroke(),++n;break;default:++n}}}function Kh(a){var b=a.a;b.reverse();var c,e,f,d=b.length,g=-1;for(c=0;d>c;++c)if(e=b[c],f=e[0],6==f)g=c;else if(0==f){for(e[2]=c,e=a.a,f=c;f>g;){var h=e[g];e[g]=e[f],e[f]=h,++g,--f}g=-1}}function Lh(a,b){a.C[2]=a.c.length,a.C=null,a.B[2]=a.a.length,a.B=null;var c=[6,b];a.c.push(c),a.a.push(c)}function Mh(a,b,c){Gh.call(this,a,b,c),this.s=this.L=null,this.v=this.U=this.P=this.w=this.T=this.o=this.l=this.j=this.h=this.f=this.b=void 0}function Nh(a,b,c){Gh.call(this,a,b,c),this.b={Ya:void 0,Ta:void 0,Ua:null,Va:void 0,Wa:void 0,Xa:void 0,Rb:0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}function Oh(a,b,c,d,e){var f=a.coordinates.length;return b=Hh(a,b,c,d,e,!1),f=[8,f,b],a.c.push(f),a.a.push(f),d}function Ph(a){var b=a.b,c=b.strokeStyle,d=b.lineCap,e=b.lineDash,f=b.lineJoin,g=b.lineWidth,h=b.miterLimit;b.Ya==c&&b.Ta==d&&Ta(b.Ua,e)&&b.Va==f&&b.Wa==g&&b.Xa==h||(b.Rb!=a.coordinates.length&&(a.c.push([12]),b.Rb=a.coordinates.length),a.c.push([10,c,g,d,f,h,e],[1]),b.Ya=c,b.Ta=d,b.Ua=e,b.Va=f,b.Wa=g,b.Xa=h)}function Qh(a,b,c){Gh.call(this,a,b,c),this.b={vc:void 0,Ya:void 0,Ta:void 0,Ua:null,Va:void 0,Wa:void 0,Xa:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}function Rh(a,b,c,d,e){var f=a.b,g=[1];a.c.push(g),a.a.push(g);var h,g=0;for(h=d.length;h>g;++g){var k=d[g],l=a.coordinates.length;c=Hh(a,b,c,k,e,!0),c=[8,l,c],l=[3],a.c.push(c,l),a.a.push(c,l),c=k}return b=[7],a.a.push(b),void 0!==f.fillStyle&&a.c.push(b),void 0!==f.strokeStyle&&(f=[12],a.c.push(f),a.a.push(f)),c}function Sh(a){var b=a.b,c=b.fillStyle,d=b.strokeStyle,e=b.lineCap,f=b.lineDash,g=b.lineJoin,h=b.lineWidth,k=b.miterLimit;void 0!==c&&b.vc!=c&&(a.c.push([9,c]),b.vc=b.fillStyle),void 0===d||b.Ya==d&&b.Ta==e&&b.Ua==f&&b.Va==g&&b.Wa==h&&b.Xa==k||(a.c.push([10,d,h,e,g,k,f]),b.Ya=d,b.Ta=e,b.Ua=f,b.Va=g,b.Wa=h,b.Xa=k)}function Th(a,b,c){Gh.call(this,a,b,c),this.U=this.P=this.w=null,this.s="",this.T=this.o=this.l=this.j=0,this.h=this.f=this.b=null}function Uh(a,b,c,d,e){if(""!==a.s&&a.h&&(a.b||a.f)){if(a.b){var f=a.b,g=a.w;if(!g||g.fillStyle!=f.fillStyle){var h=[9,f.fillStyle];a.c.push(h),a.a.push(h),g?g.fillStyle=f.fillStyle:a.w={fillStyle:f.fillStyle}}}a.f&&(f=a.f,g=a.P,g&&g.lineCap==f.lineCap&&g.lineDash==f.lineDash&&g.lineJoin==f.lineJoin&&g.lineWidth==f.lineWidth&&g.miterLimit==f.miterLimit&&g.strokeStyle==f.strokeStyle||(h=[10,f.strokeStyle,f.lineWidth,f.lineCap,f.lineJoin,f.miterLimit,f.lineDash,!1],a.c.push(h),a.a.push(h),g?(g.lineCap=f.lineCap,g.lineDash=f.lineDash,g.lineJoin=f.lineJoin,g.lineWidth=f.lineWidth,g.miterLimit=f.miterLimit,g.strokeStyle=f.strokeStyle):a.P={lineCap:f.lineCap,lineDash:f.lineDash,lineJoin:f.lineJoin,lineWidth:f.lineWidth,miterLimit:f.miterLimit,strokeStyle:f.strokeStyle})),f=a.h,g=a.U,g&&g.font==f.font&&g.textAlign==f.textAlign&&g.textBaseline==f.textBaseline||(h=[11,f.font,f.textAlign,f.textBaseline],a.c.push(h),a.a.push(h),g?(g.font=f.font,g.textAlign=f.textAlign,g.textBaseline=f.textBaseline):a.U={font:f.font,textAlign:f.textAlign,textBaseline:f.textBaseline}),Ih(a,e),f=a.coordinates.length,b=Hh(a,b,0,c,d,!1),b=[5,f,b,a.s,a.j,a.l,a.o,a.T,!!a.b,!!a.f],a.c.push(b),a.a.push(b),Lh(a,e)}}function Vh(a,b,c,d){this.h=a,this.c=b,this.f=c,this.b=d,this.a={},this.i=id(1,1),this.g=bc()}function Wh(a){for(var b in a.a){var d,c=a.a[b];for(d in c)c[d].mb()}}function Yh(a,b,c){var d=void 0!==b?b.toString():"0";return b=a.a[d],void 0===b&&(b={},a.a[d]=b),d=b[c],void 0===d&&(d=new Zh[c](a.h,a.c,a.f),b[c]=d),d}function Xh(a,b,c,d,e,f,g){var h=Object.keys(a.a).map(Number);h.sort(function(a,b){return b-a});var k,l,n,p,q;for(k=0,l=h.length;l>k;++k)for(p=a.a[h[k].toString()],n=Fh.length-1;n>=0;--n)if(q=p[Fh[n]],void 0!==q&&(q=Jh(q,b,1,c,d,e,q.a,f,g)))return q}function $h(a,b){return y(a)-y(b)}function ai(a,b){var c=.5*a/b;return c*c}function bi(a,b,c,d,e,f){var h,k,g=!1;return(h=c.da())&&(k=h.nb(),2==k||3==k?h.ld(e,f):(0==k&&h.load(),h.Oc(e,f),g=!0)),(e=c.b(b))&&(d=e.Ob(d),ci[d.K()](a,d,c,b)),g}function ii(a,b,c,d){a=c-a,b=d-b;var e=Math.sqrt(a*a+b*b);return[Math.round(c+a/e),Math.round(d+b/e)]}function ji(a,b,c,d,e,f,g,h,k,l,n){var p=id(Math.round(c*a),Math.round(c*b));if(0===k.length)return p.canvas;p.scale(c,c);var q=hb();k.forEach(function(a){rb(q,a.extent)});var t=id(Math.round(c*ub(q)/d),Math.round(c*vb(q)/d)),u=c/d;k.forEach(function(a){t.drawImage(a.image,l,l,a.image.width-2*l,a.image.height-2*l,(a.extent[0]-q[0])*u,-(a.extent[3]-q[3])*u,ub(a.extent)*u,vb(a.extent)*u)});var x=Bb(g);return h.i.forEach(function(a){var b=a.source,e=a.target,g=b[1][0],h=b[1][1],k=b[2][0],l=b[2][1];a=(e[0][0]-x[0])/f;var n=-(e[0][1]-x[1])/f,u=(e[1][0]-x[0])/f,A=-(e[1][1]-x[1])/f,K=(e[2][0]-x[0])/f,Q=-(e[2][1]-x[1])/f,e=b[0][0],b=b[0][1],g=g-e,h=h-b,k=k-e,l=l-b;a:{for(g=[[g,h,0,0,u-a],[k,l,0,0,K-a],[0,0,g,h,A-n],[0,0,k,l,Q-n]],h=g.length,k=0;h>k;k++){for(var l=k,L=Math.abs(g[k][k]),P=k+1;h>P;P++){var J=Math.abs(g[P][k]);J>L&&(L=J,l=P)}if(0===L){g=null;break a}for(L=g[l],g[l]=g[k],g[k]=L,l=k+1;h>l;l++)for(L=-g[l][k]/g[k][k],P=k;h+1>P;P++)g[l][P]=k==P?0:g[l][P]+L*g[k][P]}for(k=Array(h),l=h-1;l>=0;l--)for(k[l]=g[l][h]/g[l][l],L=l-1;L>=0;L--)g[L][h]-=g[L][l]*k[l];g=k}g&&(p.save(),p.beginPath(),di?(k=(a+u+K)/3,l=(n+A+Q)/3,h=ii(k,l,a,n),u=ii(k,l,u,A),K=ii(k,l,K,Q),p.moveTo(h[0],h[1]),p.lineTo(u[0],u[1]),p.lineTo(K[0],K[1])):(p.moveTo(a,n),p.lineTo(u,A),p.lineTo(K,Q)),p.closePath(),p.clip(),p.transform(g[0],g[2],g[1],g[3],a,n),p.translate(q[0]-e,q[3]-b),p.scale(d/c,-d/c),p.drawImage(t.canvas,0,0),p.restore())}),n&&(p.save(),p.strokeStyle="black",p.lineWidth=1,h.i.forEach(function(a){var b=a.target;a=(b[0][0]-x[0])/f;var c=-(b[0][1]-x[1])/f,d=(b[1][0]-x[0])/f,e=-(b[1][1]-x[1])/f,g=(b[2][0]-x[0])/f,b=-(b[2][1]-x[1])/f;p.beginPath(),p.moveTo(a,c),p.lineTo(d,e),p.lineTo(g,b),p.closePath(),p.stroke()}),p.restore()),p.canvas}function ki(a,b,c,d,e){this.b=a,this.g=b;var f={},g=Vb(this.g,this.b);this.c=function(a){var b=a[0]+"/"+a[1];return f[b]||(f[b]=g(a)),f[b]},this.f=d,this.l=e*e,this.i=[],this.s=!1,this.j=this.b.c&&!!d&&!!this.b.D()&&ub(d)==ub(this.b.D()),this.a=this.b.D()?ub(this.b.D()):null,this.h=this.g.D()?ub(this.g.D()):null,a=Bb(c),b=[c[2],c[3]],d=[c[2],c[1]],c=wb(c),e=this.c(a);var h=this.c(b),k=this.c(d),l=this.c(c);if(li(this,a,b,d,c,e,h,k,l,10),this.s){var n=1/0;this.i.forEach(function(a){n=Math.min(n,a.source[0][0],a.source[1][0],a.source[2][0])}),this.i.forEach(function(a){if(Math.max(a.source[0][0],a.source[1][0],a.source[2][0])-n>this.a/2){var b=[[a.source[0][0],a.source[0][1]],[a.source[1][0],a.source[1][1]],[a.source[2][0],a.source[2][1]]];b[0][0]-n>this.a/2&&(b[0][0]-=this.a),b[1][0]-n>this.a/2&&(b[1][0]-=this.a),b[2][0]-n>this.a/2&&(b[2][0]-=this.a),Math.max(b[0][0],b[1][0],b[2][0])-Math.min(b[0][0],b[1][0],b[2][0])<this.a/2&&(a.source=b)}},this)}f={}}function li(a,b,c,d,e,f,g,h,k,l){var n=gb([f,g,h,k]),p=a.a?ub(n)/a.a:null,q=a.b.c&&p>.5&&1>p,t=!1;if(l>0){if(a.g.b&&a.h)var u=gb([b,c,d,e]),t=t|.25<ub(u)/a.h;!q&&a.b.b&&p&&(t|=p>.25)}if(t||!a.f||Ab(n,a.f)){if(!(t||isFinite(f[0])&&isFinite(f[1])&&isFinite(g[0])&&isFinite(g[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1]))){if(!(l>0))return;t=!0}if(l>0&&(t||(p=a.c([(b[0]+d[0])/2,(b[1]+d[1])/2]),n=q?(ma(f[0],a.a)+ma(h[0],a.a))/2-ma(p[0],a.a):(f[0]+h[0])/2-p[0],p=(f[1]+h[1])/2-p[1],t=n*n+p*p>a.l),t))return void(Math.abs(b[0]-d[0])<=Math.abs(b[1]-d[1])?(q=[(c[0]+d[0])/2,(c[1]+d[1])/2],n=a.c(q),p=[(e[0]+b[0])/2,(e[1]+b[1])/2],t=a.c(p),li(a,b,c,q,p,f,g,n,t,l-1),li(a,p,q,d,e,t,n,h,k,l-1)):(q=[(b[0]+c[0])/2,(b[1]+c[1])/2],n=a.c(q),p=[(d[0]+e[0])/2,(d[1]+e[1])/2],t=a.c(p),li(a,b,q,p,e,f,n,t,k,l-1),li(a,q,c,d,p,n,g,h,t,l-1)));if(q){if(!a.j)return;a.s=!0}a.i.push({source:[f,h,k],target:[b,d,e]}),a.i.push({source:[f,g,h],target:[b,c,d]})}}function mi(a){var b=hb();return a.i.forEach(function(a){a=a.source,ib(b,a[0]),ib(b,a[1]),ib(b,a[2])}),b}function U(a){R.call(this),this.g=void 0,this.a="geometry",this.h=null,this.f=void 0,this.b=null,I(this,Na(this.a),this.jb,this),void 0!==a&&(a instanceof Yb||!a?ni(this,a):La(this,a))}function ni(a,b){a.set(a.a,b)}function oi(a,b){Ca(a,Na(a.a),a.jb,a),a.a=b,I(a,Na(a.a),a.jb,a),a.jb()}function pi(a){if("function"!=typeof a){var b;b=Array.isArray(a)?a:[a],a=function(){return b}}return a}function ri(a,b){return qi.createElementNS(a,b)}function si(a){return ti(a,!1,[]).join("")}function ti(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)ti(a,b,c);return c}function ui(a){return(new DOMParser).parseFromString(a,"application/xml")}function vi(a,b){return function(c,d){var e=a.call(void 0!==b?b:this,c,d);void 0!==e&&d[d.length-1].push(e)}}function wi(a,b){return function(c,d){var e=a.call(void 0!==b?b:this,c,d);void 0!==e&&(d[d.length-1]=e)}}function xi(a,b){return function(c,d){var e=a.call(this,c,d);void 0!==e&&(d[d.length-1][void 0!==b?b:c.localName]=e)}}function V(a,b){return function(c,d,e){a.call(void 0!==b?b:this,c,d,e),e[e.length-1].node.appendChild(c)}}function yi(a,b){return function(c,d,e){return c=d[d.length-1].node,d=a,void 0===d&&(d=e),e=b,void 0===b&&(e=c.namespaceURI),ri(e,d)}}function Ai(a,b,c,d){for(b=b.firstElementChild;b;b=b.nextElementSibling){var e=a[b.namespaceURI];void 0!==e&&(e=e[b.localName])&&e.call(d,b,c)}}function W(a,b,c,d,e){return d.push(a),Ai(b,c,d,e),d.pop()}function Bi(a,b,c,d,e,f,g){e.push(a),a=(void 0!==f?f:d).length;for(var h,k,l=0;a>l;++l)h=d[l],void 0!==h&&(k=c.call(g,h,e,void 0!==f?f[l]:void 0),void 0!==k&&b[k.namespaceURI][k.localName].call(g,k,h,e));e.pop()}function Ci(a,b,c){return function(d,e,f){var g=new XMLHttpRequest;g.open("GET","function"==typeof a?a(d,e,f):a,!0),"arraybuffer"==b.K()&&(g.responseType="arraybuffer"),g.onload=function(){if(200<=g.status&&300>g.status){var d,a=b.K();"json"==a||"text"==a?d=g.responseText:"xml"==a?(d=g.responseXML)||(d=ui(g.responseText)):"arraybuffer"==a&&(d=g.response),d&&c.call(this,b.Ca(d,{featureProjection:f}),b.qb(d))}}.bind(this),g.send()}}function Di(a,b){return Ci(a,b,function(a){this.Ra(a)})}function Ei(){return[[-(1/0),-(1/0),1/0,1/0]]}function Gi(a){this.a=Fi(a),this.c={}}function Hi(a,b,c){var d=y(c),d=a.c[d];pb([d.G,d.I,d.H,d.J],b)||(a.remove(c),a.ba(b,c))}function Ii(a){return a.a.all().map(function(a){return a.value})}function Ji(a,b){return a.a.search({G:b[0],I:b[1],H:b[2],J:b[3]}).map(function(a){return a.value})}function Li(a,b,c,d){return Ki(Ji(a,b),c,d)}function Ki(a,b,c){for(var d,e=0,f=a.length;f>e&&!(d=b.call(c,a[e]));e++);return d}function Mi(a){a=a||{},ud.call(this,{attributions:a.attributions,logo:a.logo,projection:void 0,state:"ready",wrapX:void 0!==a.wrapX?a.wrapX:!0}),this.C=ja,this.V=a.format,this.$=a.url,void 0!==a.loader?this.C=a.loader:void 0!==this.$&&(this.C=Di(this.$,this.V)),this.qa=void 0!==a.strategy?a.strategy:Ei;var b=void 0!==a.useSpatialIndex?a.useSpatialIndex:!0;this.a=b?new Gi:null,this.B=new Gi,this.b={},this.h={},this.j={},this.l={},this.g=null;var c,d;a.features instanceof Tc?(c=a.features,d=c.a):Array.isArray(a.features)&&(d=a.features),b||void 0!==c||(c=new Tc(d)),void 0!==d&&Ni(this,d),void 0!==c&&Oi(this,c)}function Qi(a,b,c){a.l[b]=[I(c,"change",a.Wc,a),I(c,"propertychange",a.Wc,a)]}function Pi(a,b,c){var d=!0,e=c.sa();return void 0!==e?e.toString()in a.h?d=!1:a.h[e.toString()]=c:a.j[b]=c,d}function Ni(a,b){var c,d,e,f,g=[],h=[],k=[];for(d=0,e=b.length;e>d;d++)f=b[d],c=y(f).toString(),Pi(a,c,f)&&h.push(f);for(d=0,e=h.length;e>d;d++){f=h[d],c=y(f).toString(),Qi(a,c,f);var l=f.N();l?(c=l.D(),g.push(c),k.push(f)):a.b[c]=f}for(a.a&&a.a.load(g,k),d=0,e=h.length;e>d;d++)O(a,new Ri("addfeature",h[d]))}function Oi(a,b){var c=!1;I(a,"addfeature",function(a){c||(c=!0,b.push(a.feature),c=!1)}),I(a,"removefeature",function(a){c||(c=!0,b.remove(a.feature),c=!1)}),I(b,"add",function(a){c||(a=a.element,c=!0,this.fb(a),c=!1)},a),I(b,"remove",function(a){c||(a=a.element,c=!0,this.bb(a),c=!1)},a),a.g=b}function Si(a,b,c,d){a.a?Li(a.a,b,c,d):a.g&&a.g.forEach(c,d)}function Ti(a,b){for(var c in a.h)if(a.h[c]===b){delete a.h[c];break}}function Ri(a,b){Fa.call(this,a),this.feature=b}function Gf(a){Ch.call(this,a),this.b=id(),this.g=null,this.o=hb(),this.w=[0,0,0],this.h=bc()}function If(a){Ch.call(this,a),this.b=!1,this.v=-1,this.P=NaN,this.o=hb(),this.g=this.w=null,this.h=id()}function Ui(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(g){return g?a.replace(c,g[0].toString()).replace(d,g[1].toString()).replace(e,function(){return(-g[2]-1).toString()}).replace(f,function(){var a=b.c?b.c[g[0]]:null;return(a.J-a.I+1+g[2]).toString()}):void 0}}function Vi(a,b){for(var c=a.length,d=Array(c),e=0;c>e;++e)d[e]=Ui(a[e],b);return Wi(d)}function Wi(a){return 1===a.length?a[0]:function(b,c,d){return b?a[ma((b[1]<<b[0])+b[2],a.length)](b,c,d):void 0}}function Xi(){}function Yi(a){var b=[],c=/\{(\d)-(\d)\}/.exec(a)||/\{([a-z])-([a-z])\}/.exec(a);if(c){var e,d=c[2].charCodeAt(0);for(e=c[1].charCodeAt(0);d>=e;++e)b.push(a.replace(c[0],String.fromCharCode(e)))}else b.push(a);return b}function Zi(a){if(Nd.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX}),this.tileLoadFunction=a.tileLoadFunction,this.tileUrlFunction=this.za?this.za.bind(this):Xi,this.urls=null,a.urls){var b=a.urls;this.urls=b;var c=b.join("\n");$i(this,this.za?this.za.bind(this):Vi(b,this.tileGrid),c)}else a.url&&(b=a.url,c=this.urls=Yi(b),$i(this,this.za?this.za.bind(this):Vi(c,this.tileGrid),b));a.tileUrlFunction&&$i(this,a.tileUrlFunction)}function $i(a,b,c){a.tileUrlFunction=b,"undefined"!=typeof c?Pd(a,c):a.c()}function aj(a,b){Cf.call(this,0,b),this.g=id(),this.a=this.g.canvas,this.a.style.width="100%",this.a.style.height="100%",this.a.className="ol-unselectable",a.insertBefore(this.a,a.childNodes[0]||null),this.b=!0,this.h=bc()}function bj(a,b,c){var d=a.f,e=a.g;if(Ia(d,b)){var f=c.extent,g=c.pixelRatio,h=c.viewState.rotation,k=c.pixelRatio,l=c.viewState,n=l.resolution;a=mf(a.h,a.a.width/2,a.a.height/2,k/n,-k/n,-l.rotation,-l.center[0],-l.center[1]),f=new rh(e,g,f,a,h),O(d,new kf(b,d,f,c,e,null))}}function X(a){R.call(this);var b=dj(a);this.Ab=void 0!==a.loadTilesWhileAnimating?a.loadTilesWhileAnimating:!1,this.Bb=void 0!==a.loadTilesWhileInteracting?a.loadTilesWhileInteracting:!1,this.Db=void 0!==a.pixelRatio?a.pixelRatio:je,this.yb=b.logos,this.qa=function(){this.j=void 0,this.Vf.call(this,Date.now())}.bind(this),this.cb=bc(),this.Eb=bc(),this.eb=0,this.b=null,this.ia=hb(),this.v=this.B=null,this.a=document.createElement("DIV"),this.a.className="ol-viewport"+(ne?" ol-touch":""),this.a.style.position="relative",this.a.style.overflow="hidden",this.a.style.width="100%",this.a.style.height="100%",this.a.style.msTouchAction="none",this.a.style.touchAction="none",this.w=document.createElement("DIV"),this.w.className="ol-overlaycontainer",this.a.appendChild(this.w),this.o=document.createElement("DIV"),this.o.className="ol-overlaycontainer-stopevent",a=["click","dblclick","mousedown","touchstart","mspointerdown",cf,"mousewheel","wheel"];for(var c=0,d=a.length;d>c;++c)I(this.o,a[c],Ga);this.a.appendChild(this.o),this.ca=new Ve(this);for(var e in ff)I(this.ca,ff[e],this.Kc,this);this.$=b.keyboardEventTarget,this.l=null,I(this.a,"wheel",this.Ja,this),I(this.a,"mousewheel",this.Ja,this),this.L=b.controls,this.f=b.interactions,this.h=b.overlays,this.Zc={},this.C=new b.Wf(this.a,this),this.X=null,this.A=[],this.fa=[],this.ja=new Mf(this.me.bind(this),this.Ke.bind(this)),this.V={},I(this,Na("layergroup"),this.te,this),I(this,Na("view"),this.Me,this),I(this,Na("size"),this.He,this),I(this,Na("target"),this.Je,this),La(this,b.values),this.L.forEach(function(a){a.setMap(this)},this),I(this.L,"add",function(a){a.element.setMap(this)},this),I(this.L,"remove",function(a){a.element.setMap(null)},this),this.f.forEach(function(a){a.setMap(this)},this),I(this.f,"add",function(a){a.element.setMap(this)},this),I(this.f,"remove",function(a){a.element.setMap(null)},this),this.h.forEach(this.qc,this),I(this.h,"add",function(a){this.qc(a.element)},this),I(this.h,"remove",function(a){var b=a.element.sa();void 0!==b&&delete this.Zc[b.toString()],a.element.setMap(null)},this)}function ej(a){return a=a.Ub(),void 0!==a?"string"==typeof a?document.getElementById(a):a:null}function kg(a,b){var c=a.b;if(c){var d=b.slice(0,2);return nf(c.coordinateToPixelMatrix,d,d)}return null}function dj(a){var b=null;void 0!==a.keyboardEventTarget&&(b="string"==typeof a.keyboardEventTarget?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);var c={},d={};if(void 0===a.logo||"boolean"==typeof a.logo&&a.logo)d["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="http://openlayers.org/";else{var e=a.logo;"string"==typeof e?d[e]="":e instanceof HTMLElement?d[y(e).toString()]=e:da(e)&&(d[e.src]=e.href)}e=a.layers instanceof Ng?a.layers:new Ng({layers:a.layers}),c.layergroup=e,c.target=a.target,c.view=void 0!==a.view?a.view:new Cc;var f,e=Cf;void 0!==a.renderer?Array.isArray(a.renderer)?f=a.renderer:"string"==typeof a.renderer&&(f=[a.renderer]):f=cj;var g,h;for(g=0,h=f.length;h>g;++g)if("canvas"==f[g]&&le){e=aj;break}var k;return k=void 0!==a.controls?Array.isArray(a.controls)?new Tc(a.controls.slice()):a.controls:Zd(),void 0!==a.interactions?f=Array.isArray(a.interactions)?new Tc(a.interactions.slice()):a.interactions:(f={},g=new Tc,h=new Nf,(void 0!==f.altShiftDragRotate?f.altShiftDragRotate:1)&&g.push(new lg),(void 0!==f.doubleClickZoom?f.doubleClickZoom:1)&&g.push(new Tf({delta:f.zoomDelta,duration:f.zoomDuration})),(void 0!==f.dragPan?f.dragPan:1)&&g.push(new gg({kinetic:h})),(void 0!==f.pinchRotate?f.pinchRotate:1)&&g.push(new Fg),(void 0!==f.pinchZoom?f.pinchZoom:1)&&g.push(new Jg({duration:f.zoomDuration})),(void 0!==f.keyboard?f.keyboard:1)&&(g.push(new zg),g.push(new Bg({delta:f.zoomDelta,duration:f.zoomDuration}))),(void 0!==f.mouseWheelZoom?f.mouseWheelZoom:1)&&g.push(new Dg({duration:f.zoomDuration})),(void 0!==f.shiftDragZoom?f.shiftDragZoom:1)&&g.push(new yg({duration:f.zoomDuration})),f=g),a=void 0!==a.overlays?Array.isArray(a.overlays)?new Tc(a.overlays.slice()):a.overlays:new Tc,{controls:k,interactions:f,keyboardEventTarget:b,logos:d,overlays:a,Wf:e,values:c}}function fj(a){R.call(this),this.l=a.id,this.j=void 0!==a.insertFirst?a.insertFirst:!0,this.o=void 0!==a.stopEvent?a.stopEvent:!0,this.b=document.createElement("DIV"),this.b.className="ol-overlay-container",this.b.style.position="absolute",this.autoPan=void 0!==a.autoPan?a.autoPan:!1,this.f=void 0!==a.autoPanAnimation?a.autoPanAnimation:{},this.h=void 0!==a.autoPanMargin?a.autoPanMargin:20,this.a={gb:"",lb:"",sb:"",vb:"",visible:!0},this.g=null,I(this,Na("element"),this.pe,this),I(this,Na("map"),this.Ae,this),I(this,Na("offset"),this.Be,this),I(this,Na("position"),this.De,this),I(this,Na("positioning"),this.Ee,this),void 0!==a.element&&this.set("element",a.element),this.set("offset",void 0!==a.offset?a.offset:[0,0]),this.set("positioning",void 0!==a.positioning?a.positioning:"top-left"),void 0!==a.position&&this.Rc(a.position)}function hj(a,b){var c=a.getBoundingClientRect(),d=c.left+E.pageXOffset,c=c.top+E.pageYOffset;return[d,c,d+b[0],c+b[1]]}function ij(a,b){a.a.visible!==b&&(a.b.style.display=b?"":"none",a.a.visible=b)}function gj(a){var b=a.get("map"),c=a.get("position");if(void 0!==b&&b.b&&void 0!==c){var c=kg(b,c),d=b.Ma(),b=a.b.style,e=a.get("offset"),f=a.get("positioning"),g=e[0],e=e[1];"bottom-right"==f||"center-right"==f||"top-right"==f?(""!==a.a.lb&&(a.a.lb=b.left=""),g=Math.round(d[0]-c[0]-g)+"px",a.a.sb!=g&&(a.a.sb=b.right=g)):(""!==a.a.sb&&(a.a.sb=b.right=""),("bottom-center"==f||"center-center"==f||"top-center"==f)&&(g-=a.b.offsetWidth/2),g=Math.round(c[0]+g)+"px",a.a.lb!=g&&(a.a.lb=b.left=g)),"bottom-left"==f||"bottom-center"==f||"bottom-right"==f?(""!==a.a.vb&&(a.a.vb=b.top=""),c=Math.round(d[1]-c[1]-e)+"px",a.a.gb!=c&&(a.a.gb=b.bottom=c)):(""!==a.a.gb&&(a.a.gb=b.bottom=""),("center-left"==f||"center-center"==f||"center-right"==f)&&(e-=a.b.offsetHeight/2),c=Math.round(c[1]+e)+"px",a.a.vb!=c&&(a.a.vb=b.top=c)),ij(a,!0)}else ij(a,!1)}function jj(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-scale-line";this.g=document.createElement("DIV"),this.g.className=b+"-inner",this.a=document.createElement("DIV"),this.a.className=b+" ol-unselectable",this.a.appendChild(this.g),this.h=null,this.f=void 0!==a.minWidth?a.minWidth:64,this.b=!1,this.l=void 0,this.j="",ld.call(this,{element:this.a,render:a.render?a.render:kj,target:a.target}),I(this,Na("units"),this.v,this),this.set("units",a.units||"metric")}function kj(a){(a=a.frameState)?this.h=a.viewState:this.h=null,mj(this)}function mj(a){var b=a.h;if(b){var c=b.projection,d=c.Aa(),b=c.getPointResolution(b.resolution,b.center)*d,d=a.f*b,c="",e=a.$a();"degrees"==e?(c=Hb.degrees,b/=c,c/60>d?(c="″",b*=3600):c>d?(c="′",b*=60):c="°"):"imperial"==e?.9144>d?(c="in",b/=.0254):1609.344>d?(c="ft",b/=.3048):(c="mi",b/=1609.344):"nautical"==e?(b/=1852,c="nm"):"metric"==e?1>d?(c="mm",b*=1e3):1e3>d?c="m":(c="km",b/=1e3):"us"==e&&(.9144>d?(c="in",b*=39.37):1609.344>d?(c="ft",b/=.30480061):(c="mi",b/=1609.3472));for(var f,e=3*Math.floor(Math.log(a.f*b)/Math.log(10));;){if(f=lj[(e%3+3)%3]*Math.pow(10,Math.floor(e/3)),d=Math.round(f/b),isNaN(d))return a.a.style.display="none",void(a.b=!1);if(d>=a.f)break;++e}b=f+" "+c,a.j!=b&&(a.g.innerHTML=b,a.j=b),a.l!=d&&(a.g.style.width=d+"px",a.l=d),a.b||(a.a.style.display="",a.b=!0)}else a.b&&(a.a.style.display="none",a.b=!1)}function nj(){this.defaultDataProjection=null}function oj(a,b,c){var d;return c&&(d={dataProjection:c.dataProjection?c.dataProjection:a.qb(b),featureProjection:c.featureProjection}),pj(a,d)}function pj(a,b){var c;return b&&(c={featureProjection:b.featureProjection,dataProjection:b.dataProjection?b.dataProjection:a.defaultDataProjection,rightHanded:b.rightHanded},b.decimals&&(c.decimals=b.decimals)),c}function qj(a,b,c){var f,d=c?S(c.featureProjection):null,e=c?S(c.dataProjection):null;if(f=d&&e&&!Ub(d,e)?a instanceof Yb?Zb(b?a.clone():a,b?d:e,b?e:d):Xb(b?a.slice():a,b?d:e,b?e:d):a,b&&c&&c.decimals){var g=Math.pow(10,c.decimals);a=function(a){for(var b=0,c=a.length;c>b;++b)a[b]=Math.round(a[b]*g)/g;return a},Array.isArray(f)?a(f):f.Sa(a)}return f}function rj(){this.defaultDataProjection=null}function sj(a){return da(a)?a:"string"==typeof a&&(a=JSON.parse(a))?a:null}function tj(a,b,c,d,e,f){var g=NaN,h=NaN,k=(c-b)/d;if(0!==k)if(1==k)g=a[b],h=a[b+1];else if(2==k)g=(1-e)*a[b]+e*a[b+d],h=(1-e)*a[b+1]+e*a[b+d+1];else{var n,h=a[b],k=a[b+1],l=0,g=[0];for(n=b+d;c>n;n+=d){var p=a[n],q=a[n+1],l=l+Math.sqrt((p-h)*(p-h)+(q-k)*(q-k));g.push(l),h=p,k=q}for(c=e*l,k=0,l=g.length,n=!1;l>k;)e=k+(l-k>>1),h=+Oa(g[e],c),0>h?k=e+1:(l=e,n=!h);e=n?k:~k,0>e?(c=(c-g[-e-2])/(g[-e-1]-g[-e-2]),b+=(-e-2)*d,g=a[b],g+=c*(a[b+d]-g),e=a[b+1],h=e+c*(a[b+d+1]-e)):(g=a[b+e*d],h=a[b+e*d+1])}return f?(f[0]=g,f[1]=h,f):[g,h]}function uj(a,b,c,d,e){if(0==b)return null;if(d<a[0+c-1])return e?(b=a.slice(0,0+c),b[c-1]=d,b):null;if(a[b-1]<d)return e?(b=a.slice(b-c,b),b[c-1]=d,b):null;if(d==a[0+c-1])return a.slice(0,0+c);for(e=0/c,b/=c;b>e;){var f=e+b>>1;d<a[(f+1)*c-1]?b=f:e=f+1}if(b=a[e*c-1],d==b)return a.slice((e-1)*c,(e-1)*c+c);f=(d-b)/(a[(e+1)*c-1]-b),b=[];var g;for(g=0;c-1>g;++g){var h=a[(e-1)*c+g];b.push(h+f*(a[e*c+g]-h))}return b.push(d),b}function Y(a,b){fc.call(this),this.f=null,this.l=-1,this.O(a,b)}function yh(a){return a.l!=a.i&&(a.f=a.Gc(.5,a.f),a.l=a.i),a.f}function vj(a,b,c){hc(a,b,c),a.c()}function wj(a,b){fc.call(this),this.f=[],this.O(a,b)}function zh(a){var b=[],c=a.a,d=0,e=a.f;a=a.u;var f,g;for(f=0,g=e.length;g>f;++f){var h=e[f],d=tj(c,d,h,a,.5);Ra(b,d),d=h}return b}function xj(a,b,c,d){hc(a,b,c),a.f=d,a.c()}function yj(a,b){var f,g,c=a.b,d=[],e=[];for(f=0,g=b.length;g>f;++f){var h=b[f];0===f&&(c=h.b),Ra(d,h.a),e.push(d.length)}xj(a,c,d,e)}function zj(a,b){fc.call(this),this.O(a,b)}function Aj(a,b){fc.call(this),this.f=[],this.A=-1,this.C=null,this.B=-1,this.l=null,this.O(a,b)}function Bh(a){if(a.A!=a.i){var g,h,k,b=a.a,c=a.f,d=a.u,e=0,f=[];for(g=0,h=c.length;h>g;++g){var l=c[g];k=b;var n=l[0],p=d,q=nb(void 0);k=sb(q,k,e,n,p),f.push((k[0]+k[2])/2,(k[1]+k[3])/2),e=l[l.length-1]}for(b=Ah(a),c=a.f,d=a.u,g=0,h=[],l=0,k=c.length;k>l;++l)e=c[l],h=uc(b,g,e,d,f,2*l,h),g=e[e.length-1];a.C=h,a.A=a.i}return a.C}function Ah(a){if(a.B!=a.i){var c,b=a.a;a:{c=a.f;var d,e;for(d=0,e=c.length;e>d;++d)if(!wc(b,c[d],a.u,void 0)){c=!1;break a}c=!0}c?a.l=b:(a.l=b.slice(),a.l.length=yc(a.l,a.f,a.u)),a.B=a.i}return a.l}function Bj(a,b,c,d){hc(a,b,c),a.f=d,a.c()}function Cj(a,b){var f,g,h,c=a.b,d=[],e=[];for(f=0,g=b.length;g>f;++f){var k=b[f];0===f&&(c=k.b);var l=d.length;h=k.Ga();var n,p;for(n=0,p=h.length;p>n;++n)h[n]+=l;Ra(d,k.a),e.push(h)}Bj(a,c,d,e)}function Dj(a){a=a?a:{},this.defaultDataProjection=null,this.c=a.geometryName}function Ej(a){var b="XY";return!0===a.hasZ&&!0===a.hasM?b="XYZM":!0===a.hasZ?b="XYZ":!0===a.hasM&&(b="XYM"),b}function Gj(a){Yb.call(this),this.g=a?a:null,Hj(this)}function Ij(a){var b,c;if(a.g)for(b=0,c=a.g.length;c>b;++b)Ca(a.g[b],"change",a.c,a)}function Hj(a){var b,c;if(a.g)for(b=0,c=a.g.length;c>b;++b)I(a.g[b],"change",a.c,a)}function Jj(a){a=a?a:{},this.defaultDataProjection=null,this.defaultDataProjection=S(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326"),this.c=a.geometryName}function Kj(a,b){return a?qj(Lj[a.type](a),!1,b):null}function Mj(){new XMLSerializer,
this.defaultDataProjection=null}function Nj(a,b,c){return a=Oj(a,b,c),0<a.length?a[0]:null}function Oj(a,b,c){var d=[];for(b=b.firstChild;b;b=b.nextSibling)b.nodeType==Node.ELEMENT_NODE&&Ra(d,a.ac(b,c));return d}function Pj(a){a=a?a:{},this.featureType=a.featureType,this.featureNS=a.featureNS,this.srsName=a.srsName,this.schemaLocation="",this.a={},this.a["http://www.opengis.net/gml"]={featureMember:wi(Pj.prototype.ob),featureMembers:wi(Pj.prototype.ob)},Mj.call(this)}function Rj(a,b,c){var d=c[0];return d.srsName=b.firstElementChild.getAttribute("srsName"),(a=W(null,a.Bd,b,c,a))?qj(a,!1,d):void 0}function Sj(a){return a=si(a),Tj(a)}function Tj(a){return(a=/^\s*(\d+)\s*$/.exec(a))?parseInt(a[1],10):void 0}function Uj(a,b){a.appendChild(qi.createTextNode(b))}function Z(a){a=a?a:{},Pj.call(this,a),this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd"}function Vj(a,b,c){c=c[c.length-1].srsName,b=b.M();for(var f,d=b.length,e=Array(d),g=0;d>g;++g){f=b[g];var h=g,k="enu";c&&(k=S(c).a),e[h]="en"===k.substr(0,2)?f[0]+" "+f[1]:f[1]+" "+f[0]}Uj(a,e.join(" "))}function dk(){this.defaultDataProjection=null}function ek(a){return"string"==typeof a?a:""}function gk(a){a=a?a:{},this.b=a.featureType,this.c=a.featureNS,this.a=a.gmlFormat?a.gmlFormat:new Z,this.g=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd",Mj.call(this)}function hk(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return W({},ik,a,[])}function mk(a,b){var c=ri("http://www.opengis.net/ogc","Filter"),d=ri("http://www.opengis.net/ogc","FeatureId");c.appendChild(d),d.setAttribute("fid",b),a.appendChild(c)}function ok(a){a=a?a:{},this.defaultDataProjection=null,this.a=void 0!==a.splitCollection?a.splitCollection:!1}function fk(a,b){var c;return c=new pk(new qk(a)),c.a=rk(c.c),(c=sk(c))?qj(c,!1,b):null}function qk(a){this.c=a,this.a=-1}function rk(a){var b=a.c.charAt(++a.a),c={position:a.a,value:b};if("("==b)c.type=2;else if(","==b)c.type=5;else if(")"==b)c.type=3;else if(b>="0"&&"9">=b||"."==b||"-"==b){c.type=4;var d,b=a.a,e=!1,f=!1;do"."==d?e=!0:("e"==d||"E"==d)&&(f=!0),d=a.c.charAt(++a.a);while(d>="0"&&"9">=d||"."==d&&(void 0===e||!e)||!f&&("e"==d||"E"==d)||f&&("-"==d||"+"==d));a=parseFloat(a.c.substring(b,a.a--)),c.value=a}else if(b>="a"&&"z">=b||b>="A"&&"Z">=b){c.type=1,b=a.a;do d=a.c.charAt(++a.a);while(d>="a"&&"z">=d||d>="A"&&"Z">=d);a=a.c.substring(b,a.a--).toUpperCase(),c.value=a}else{if(" "==b||"	"==b||"\r"==b||"\n"==b)return rk(a);if(""!==b)throw Error("Unexpected character: "+b);c.type=6}return c}function pk(a){this.c=a}function sk(a){var b=a.a;if(a.match(1)){var c=b.value;if("GEOMETRYCOLLECTION"==c){a:{if(a.match(2)){b=[];do b.push(sk(a));while(a.match(5));if(a.match(3)){a=b;break a}}else if(tk(a)){a=[];break a}throw Error(uk(a))}return new Gj(a)}var d=vk[c],b=wk[c];if(!d||!b)throw Error("Invalid geometry type: "+c);return a=d.call(a),new b(a)}throw Error(uk(a))}function xk(a){for(var b=[],c=0;2>c;++c){var d=a.a;if(!a.match(4))break;b.push(d.value)}if(2==b.length)return b;throw Error(uk(a))}function yk(a){for(var b=[xk(a)];a.match(5);)b.push(xk(a));return b}function zk(a){for(var b=[a.Xb()];a.match(5);)b.push(a.Xb());return b}function tk(a){var b=1==a.a.type&&"EMPTY"==a.a.value;return b&&(a.a=rk(a.c)),b}function uk(a){return"Unexpected `"+a.a.value+"` at position "+a.a.position+" in `"+a.c.c+"`"}function Ak(a){if(R.call(this),a=a||{},this.a=null,this.g=Wb,this.b=void 0,I(this,Na("projection"),this.Ge,this),I(this,Na("tracking"),this.Le,this),void 0!==a.projection){var b=S(a.projection);this.set("projection",b)}void 0!==a.trackingOptions&&this.set("trackingOptions",a.trackingOptions),this.ub(void 0!==a.tracking?a.tracking:!1)}function Bk(a,b,c){fc.call(this),Ck(this,a,b?b:0,c)}function Ck(a,b,c,d){if(b){ic(a,d,b,0),a.a||(a.a=[]),d=a.a,b=jc(d,b),d[b++]=d[0]+c;var e;for(c=1,e=a.u;e>c;++c)d[b++]=d[c];d.length=b}else hc(a,"XY",null);a.c()}function Dk(a,b,c,d,e){pd.call(this,a,b),this.g=c,this.c=new Image,null!==d&&(this.c.crossOrigin=d),this.b={},this.i=null,this.f=e}function Ek(a){a.i.forEach(F),a.i=null}function Fk(a,b){Fa.call(this,a),this.feature=b}function Gk(a){dg.call(this,{handleDownEvent:Hk,handleEvent:Ik,handleUpEvent:Jk}),this.V=null,this.v=!1,this.cb=a.source?a.source:null,this.ja=a.features?a.features:null,this.$d=a.snapTolerance?a.snapTolerance:12,this.L=a.type,this.b=Kk(this.L),this.ia=a.minPoints?a.minPoints:this.b===Lk?3:2,this.fa=a.maxPoints?a.maxPoints:1/0,this.Ab=a.finishCondition?a.finishCondition:Cb;var b=a.geometryFunction;if(!b)if("Circle"===this.L)b=function(a,b){var c=b?b:new Bk([NaN,NaN]);return Ck(c,a[0],Math.sqrt(fb(a[0],a[1]))),c};else{var c,b=this.b;b===Mk?c=sc:b===Nk?c=Y:b===Lk&&(c=T),b=function(a,b){var f=b;return f?f.O(a):f=new c(a),f}}this.A=b,this.B=this.j=this.a=this.l=this.f=this.h=null,this.ae=a.clickTolerance?a.clickTolerance*a.clickTolerance:36,this.$=new Hf({source:new Mi({useSpatialIndex:!1,wrapX:a.wrapX?a.wrapX:!1}),style:a.style?a.style:Ok()}),this.qa=a.geometryName,this.Zd=a.condition?a.condition:Zf,this.ca=a.freehandCondition?a.freehandCondition:$f,I(this,Na("active"),this.eb,this)}function Ok(){var a=qh();return function(b){return a[b.N().K()]}}function Ik(a){this.b!==Nk&&this.b!==Lk||!this.ca(a)||(this.v=!0);var b=!this.v;return this.v&&a.type===ef?(Pk(this,a),b=!1):a.type===df?b=Qk(this,a):a.type===Ye&&(b=!1),eg.call(this,a)&&b}function Hk(a){return this.Zd(a)?(this.V=a.pixel,!0):this.v?(this.V=a.pixel,this.h||Rk(this,a),!0):!1}function Jk(a){this.v=!1;var b=this.V,c=a.pixel,d=b[0]-c[0],b=b[1]-c[1],c=!0;return d*d+b*b<=this.ae&&(Qk(this,a),this.h?this.b===Sk?Uk(this):Vk(this,a)?this.Ab(a)&&Uk(this):Pk(this,a):(Rk(this,a),this.b===Mk&&Uk(this)),c=!1),c}function Qk(a,b){if(a.h){var e,c=b.coordinate,d=a.f.N();a.b===Mk?e=a.a:a.b===Lk?(e=a.a[0],e=e[e.length-1],Vk(a,b)&&(c=a.h.slice())):(e=a.a,e=e[e.length-1]),e[0]=c[0],e[1]=c[1],a.A(a.a,d),a.l&&a.l.N().O(c),d instanceof T&&a.b!==Lk?(a.j||(a.j=new U(new Y(null))),0>=d.f.length?c=null:(c=new qc(null),rc(c,d.b,d.a.slice(0,d.f[0]))),d=a.j.N(),vj(d,c.b,c.a)):a.B&&(d=a.j.N(),d.O(a.B)),Wk(a)}else d=b.coordinate.slice(),a.l?a.l.N().O(d):(a.l=new U(new sc(d)),Wk(a));return!0}function Vk(a,b){var c=!1;if(a.f){var d=!1,e=[a.h];if(a.b===Nk?d=a.a.length>a.ia:a.b===Lk&&(d=a.a[0].length>a.ia,e=[a.a[0][0],a.a[0][a.a[0].length-2]]),d)for(var d=b.map,f=0,g=e.length;g>f;f++){var h=e[f],k=kg(d,h),l=b.pixel,c=l[0]-k[0],k=l[1]-k[1],l=a.v&&a.ca(b)?1:a.$d;if(c=Math.sqrt(c*c+k*k)<=l){a.h=h;break}}}return c}function Rk(a,b){var c=b.coordinate;a.h=c,a.b===Mk?a.a=c.slice():a.b===Lk?(a.a=[[c.slice(),c.slice()]],a.B=a.a[0]):(a.a=[c.slice(),c.slice()],a.b===Sk&&(a.B=a.a)),a.B&&(a.j=new U(new Y(a.B))),c=a.A(a.a),a.f=new U,a.qa&&oi(a.f,a.qa),ni(a.f,c),Wk(a),O(a,new Fk("drawstart",a.f))}function Pk(a,b){var e,f,c=b.coordinate,d=a.f.N();a.b===Nk?(a.h=c.slice(),f=a.a,f.push(c.slice()),e=f.length>a.fa,a.A(f,d)):a.b===Lk&&(f=a.a[0],f.push(c.slice()),(e=f.length>a.fa)&&(a.h=f[0]),a.A(a.a,d)),Wk(a),e&&Uk(a)}function Uk(a){var b=Xk(a),c=a.a,d=b.N();a.b===Nk?(c.pop(),a.A(c,d)):a.b===Lk&&(c[0].pop(),c[0].push(c[0][0]),a.A(c,d)),"MultiPoint"===a.L?ni(b,new zj([c])):"MultiLineString"===a.L?ni(b,new wj([c])):"MultiPolygon"===a.L&&ni(b,new Aj([c])),O(a,new Fk("drawend",b)),a.ja&&a.ja.push(b),a.cb&&a.cb.fb(b)}function Xk(a){a.h=null;var b=a.f;return b&&(a.f=null,a.l=null,a.j=null,a.$.Z().clear(!0)),b}function Wk(a){var b=[];a.f&&b.push(a.f),a.j&&b.push(a.j),a.l&&b.push(a.l),a=a.$.Z(),a.clear(!0),a.Ra(b)}function Kk(a){var b;return"Point"===a||"MultiPoint"===a?b=Mk:"LineString"===a||"MultiLineString"===a?b=Nk:"Polygon"===a||"MultiPolygon"===a?b=Lk:"Circle"===a&&(b=Sk),b}function Yk(a,b,c){Fa.call(this,a),this.features=b,this.mapBrowserEvent=c}function Zk(a){dg.call(this,{handleDownEvent:$k,handleDragEvent:al,handleEvent:bl,handleUpEvent:cl}),this.qa=a.condition?a.condition:cg,this.ia=function(a){return Zf(a)&&Xf(a)},this.ja=a.deleteCondition?a.deleteCondition:this.ia,this.fa=this.b=null,this.$=[0,0],this.l=this.B=!1,this.a=new Gi,this.v=void 0!==a.pixelTolerance?a.pixelTolerance:10,this.h=this.ca=!1,this.f=[],this.A=new Hf({source:new Mi({useSpatialIndex:!1,wrapX:!!a.wrapX}),style:a.style?a.style:dl(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.V={Point:this.lg,LineString:this.qd,LinearRing:this.qd,Polygon:this.ng,MultiPoint:this.ig,MultiLineString:this.hg,MultiPolygon:this.kg,GeometryCollection:this.gg},this.j=a.features,this.j.forEach(this.Wb,this),I(this.j,"add",this.qe,this),I(this.j,"remove",this.re,this),this.L=null}function fl(a,b){a.l||(a.l=!0,O(a,new Yk("modifystart",a.j,b)))}function gl(a,b){hl(a,b),a.b&&0===a.j.La()&&(a.A.Z().bb(a.b),a.b=null),Ca(b,"change",a.Tc,a)}function hl(a,b){var c=a.a,d=[];c.forEach(function(a){b===a.feature&&d.push(a)});for(var e=d.length-1;e>=0;--e)c.remove(d[e])}function il(a,b){var c=a.b;c?c.N().O(b):(c=new U(new sc(b)),a.b=c,a.A.Z().fb(c))}function jl(a,b){return a.index-b.index}function $k(a){if(!this.qa(a))return!1;el(this,a.pixel,a.map),this.f.length=0,this.l=!1;var b=this.b;if(b){var c=[],b=b.N().M(),d=gb([b]),d=Ji(this.a,d),e={};d.sort(jl);for(var f=0,g=d.length;g>f;++f){var h=d[f],k=h.W,l=y(h.feature),n=h.depth;n&&(l+="-"+n.join("-")),e[l]||(e[l]=Array(2)),db(k[0],b)&&!e[l][0]?(this.f.push([h,0]),e[l][0]=h):db(k[1],b)&&!e[l][1]?("LineString"!==h.geometry.K()&&"MultiLineString"!==h.geometry.K()||!e[l][0]||0!==e[l][0].index)&&(this.f.push([h,1]),e[l][1]=h):y(k)in this.fa&&!e[l][0]&&!e[l][1]&&c.push([h,b])}for(c.length&&fl(this,a),a=c.length-1;a>=0;--a)this.Oe.apply(this,c[a])}return!!this.b}function al(a){this.B=!1,fl(this,a),a=a.coordinate;for(var b=0,c=this.f.length;c>b;++b){for(var d=this.f[b],e=d[0],f=e.depth,g=e.geometry,h=g.M(),k=e.W,d=d[1];a.length<g.u;)a.push(0);switch(g.K()){case"Point":h=a,k[0]=k[1]=a;break;case"MultiPoint":h[e.index]=a,k[0]=k[1]=a;break;case"LineString":h[e.index+d]=a,k[d]=a;break;case"MultiLineString":h[f[0]][e.index+d]=a,k[d]=a;break;case"Polygon":h[f[0]][e.index+d]=a,k[d]=a;break;case"MultiPolygon":h[f[1]][f[0]][e.index+d]=a,k[d]=a}e=g,this.h=!0,e.O(h),this.h=!1}il(this,a)}function cl(a){for(var b,c=this.f.length-1;c>=0;--c)b=this.f[c][0],Hi(this.a,gb(b.W),b);return this.l&&(O(this,new Yk("modifyend",this.j,a)),this.l=!1),!1}function bl(a){if(!(a instanceof Ue))return!0;this.L=a;var b;if(Dc(a.map.S())[1]||a.type!=df||this.o||(this.$=a.pixel,el(this,a.pixel,a.map)),this.b&&this.ja(a))if(a.type==Ze&&this.B)b=!0;else{this.b.N();var c=!1;if(this.L&&this.L.type!=ef){b=this.L,fl(this,b);var e,f,g,h,k,l,n,p,q,d=this.f,c={};for(h=d.length-1;h>=0;--h)g=d[h],n=g[0],p=y(n.feature),n.depth&&(p+="-"+n.depth.join("-")),p in c||(c[p]={}),0===g[1]?(c[p].right=n,c[p].index=n.index):1==g[1]&&(c[p].left=n,c[p].index=n.index+1);for(p in c){switch(l=c[p].right,h=c[p].left,g=c[p].index,k=g-1,n=void 0!==h?h:l,0>k&&(k=0),d=n.geometry,e=f=d.M(),q=!1,d.K()){case"MultiLineString":2<f[n.depth[0]].length&&(f[n.depth[0]].splice(g,1),q=!0);break;case"LineString":2<f.length&&(f.splice(g,1),q=!0);break;case"MultiPolygon":e=e[n.depth[1]];case"Polygon":e=e[n.depth[0]],4<e.length&&(g==e.length-1&&(g=0),e.splice(g,1),q=!0,0===g&&(e.pop(),e.push(e[0]),k=e.length-1))}q&&(e=d,this.h=!0,e.O(f),this.h=!1,f=[],void 0!==h&&(this.a.remove(h),f.push(h.W[0])),void 0!==l&&(this.a.remove(l),f.push(l.W[1])),void 0!==h&&void 0!==l&&(h={depth:n.depth,feature:n.feature,geometry:n.geometry,index:k,W:f},this.a.ba(gb(h.W),h)),kl(this,d,g,n.depth,-1),this.b&&(this.A.Z().bb(this.b),this.b=null))}c=!0,O(this,new Yk("modifyend",this.j,b)),this.l=!1}b=c}return a.type==Ze&&(this.B=!1),eg.call(this,a)&&!b}function el(a,b,c){function d(a,b){return fb(e,cb(e,a.W))-fb(e,cb(e,b.W))}var e=c.ra(b),f=c.ra([b[0]-a.v,b[1]+a.v]),g=c.ra([b[0]+a.v,b[1]-a.v]),f=gb([f,g]),f=Ji(a.a,f);if(0<f.length){f.sort(d);var g=f[0].W,h=cb(e,g),k=kg(c,h);if(Math.sqrt(fb(b,k))<=a.v){for(b=kg(c,g[0]),c=kg(c,g[1]),b=fb(k,b),c=fb(k,c),a.ca=Math.sqrt(Math.min(b,c))<=a.v,a.ca&&(h=b>c?g[1]:g[0]),il(a,h),c={},c[y(g)]=!0,b=1,k=f.length;k>b&&(h=f[b].W,db(g[0],h[0])&&db(g[1],h[1])||db(g[0],h[1])&&db(g[1],h[0]));++b)c[y(h)]=!0;return void(a.fa=c)}}a.b&&(a.A.Z().bb(a.b),a.b=null)}function kl(a,b,c,d,e){Li(a.a,b.D(),function(a){a.geometry===b&&(void 0===d||void 0===a.depth||Ta(a.depth,d))&&a.index>c&&(a.index+=e)})}function dl(){var a=qh();return function(){return a.Point}}function ll(a,b,c,d){Fa.call(this,a),this.selected=b,this.deselected=c,this.mapBrowserEvent=d}function ml(a){Pf.call(this,{handleEvent:nl});var b=a?a:{};if(this.l=b.condition?b.condition:Xf,this.j=b.addCondition?b.addCondition:Db,this.C=b.removeCondition?b.removeCondition:Db,this.B=b.toggleCondition?b.toggleCondition:$f,this.h=b.multi?b.multi:!1,this.g=b.filter?b.filter:Cb,this.a=new Hf({source:new Mi({useSpatialIndex:!1,features:b.features,wrapX:b.wrapX}),style:b.style?b.style:pl(),updateWhileAnimating:!0,updateWhileInteracting:!0}),b.layers)if("function"==typeof b.layers)a=function(a){return b.layers(a)};else{var c=b.layers;a=function(a){return 0<=c.indexOf(a)}}else a=Cb;this.f=a,this.b={},a=this.a.Z().g,I(a,"add",this.o,this),I(a,"remove",this.A,this)}function nl(a){if(!this.l(a))return!0;var b=this.j(a),c=this.C(a),d=this.B(a),e=!b&&!c&&!d,f=a.map,g=this.a.Z().g,h=[],k=[];if(e)ra(this.b),f.Ib(a.pixel,function(a,b){if(this.g(a,b)){k.push(a);var c=y(a);return this.b[c]=b,!this.h}},this,this.f),0<k.length&&1==g.La()&&g.Pc(0)==k[0]?k.length=0:(0!==g.La()&&(h=Array.prototype.concat(g.a),g.clear()),Vc(g,k));else{for(f.Ib(a.pixel,function(a,e){if(this.g(a,e)){if(!b&&!d||0<=g.a.indexOf(a))(c||d)&&0<=g.a.indexOf(a)&&(h.push(a),f=y(a),delete this.b[f]);else{k.push(a);var f=y(a);this.b[f]=e}return!this.h}},this,this.f),e=h.length-1;e>=0;--e)g.remove(h[e]);Vc(g,k)}return(0<k.length||0<h.length)&&O(this,new ll("select",k,h,a)),"pointermove"==a.type}function pl(){var a=qh();return Ra(a.Polygon,a.LineString),Ra(a.GeometryCollection,a.LineString),function(b){return a[b.N().K()]}}function ql(a,b,c,d,e,f,g,h,k,l,n){if(pd.call(this,e,0),this.w=void 0!==n?n:!1,this.o=g,this.l=h,this.i=null,this.b={},this.g=b,this.h=d,this.s=f?f:e,this.c=[],this.Oa=null,this.f=0,f=Ad(d,this.s),h=this.h.D(),e=this.g.D(),f=h?zb(f,h):f,0===tb(f))this.state=4;else if((h=a.D())&&(e=e?zb(e,h):h),h=d.R(this.s[0]),n=xb(f),d=Vb(c,a)(n,void 0,n.length),h=c.getPointResolution(h,n),n=c.Aa(),void 0!==n&&(h*=n),n=a.Aa(),void 0!==n&&(h/=n),d=a.getPointResolution(h,d)/h,isFinite(d)&&d>0&&(h/=d),d=h,!isFinite(d)||0>=d)this.state=4;else if(this.j=new ki(a,c,f,e,d*(void 0!==l?l:.5)),0===this.j.i.length)this.state=4;else if(this.f=Hd(b,d),c=mi(this.j),e&&(a.c?(c[1]=ka(c[1],e[1],e[3]),c[3]=ka(c[3],e[1],e[3])):c=zb(c,e)),tb(c))if(a=Bd(b,c,this.f),100>(a.H-a.G+1)*(a.J-a.I+1)){for(b=a.G;b<=a.H;b++)for(c=a.I;c<=a.J;c++)(l=k(this.f,b,c,g))&&this.c.push(l);0===this.c.length&&(this.state=4)}else this.state=3;else this.state=4}function rl(a){Zi.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:sl,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX}),this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null,this.tileClass=void 0!==a.tileClass?a.tileClass:Dk,this.h={},this.w={},this.$=a.reprojectionErrorThreshold}function tl(a,b,c,d,e,f,g){return b=[b,c,d],e=(c=Rd(a,b,f))?a.tileUrlFunction(c,e,f):void 0,e=new a.tileClass(b,void 0!==e?0:4,void 0!==e?e:"",a.crossOrigin,a.tileLoadFunction),e.key=g,I(e,"change",a.L,a),e}function wf(a,b,c,d,e,f){if(a.f&&f&&!Ub(a.f,f)){var g=a.Za(f);if(c=[b,c,d],b=a.Ha.apply(a,c),g.b.hasOwnProperty(b))return g.get(b);var h=a.f;d=a.na(h);var k=a.na(f),l=Rd(a,c,f);return a=new ql(h,d,f,k,c,l,a.ib(e),a.Lb(),function(a,b,c,d){return ul(this,a,b,c,d,h)}.bind(a),a.$,!1),g.set(b,a),a}return ul(a,b,c,d,e,f)}function ul(a,b,c,d,e,f){var g,h=a.Ha(b,c,d),k=a.getKey();if(a.a.b.hasOwnProperty(h)){if(g=a.a.get(h),g.key!=k){var l=g;g.a&&g.a.key==k?(g=g.a,2==l.aa()&&(g.a=l)):(g=tl(a,b,c,d,e,f,k),2==l.aa()?g.a=l:l.a&&2==l.a.aa()&&(g.a=l.a,l.a=null)),g.a&&(g.a.a=null),a.a.replace(h,g)}}else g=tl(a,b,c,d,e,f,k),a.a.set(h,g);return g}function sl(a,b){a.da().src=b}function vl(a){a=a||{};var b=void 0!==a.projection?a.projection:"EPSG:3857",c=void 0!==a.tileGrid?a.tileGrid:Md({extent:Kd(b),maxZoom:a.maxZoom,minZoom:a.minZoom,tileSize:a.tileSize});rl.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:a.opaque,projection:b,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:c,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0})}function wl(a){Mi.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,wrapX:a.wrapX}),this.w=void 0,this.ca=void 0!==a.distance?a.distance:20,this.o=[],this.L=a.geometryFunction||function(a){return a.N()},this.v=a.source,this.v.s("change",wl.prototype.ja,this)}function xl(a){if(void 0!==a.w){a.o.length=0;for(var b=hb(),c=a.ca*a.w,d=a.v.Vc(),e={},f=0,g=d.length;g>f;f++){var h=d[f];y(h).toString()in e||!(h=a.L(h))||(h=h.M(),ob(h,b),jb(b,c,b),h=Ji(a.v.a,b),h=h.filter(function(a){return a=y(a).toString(),a in e?!1:e[a]=!0}),a.o.push(yl(a,h)))}}}function yl(a,b){for(var c=[0,0],d=b.length-1;d>=0;--d){var e=a.L(b[d]);e?bb(c,e.M()):b.splice(d,1)}return d=1/b.length,c[0]*=d,c[1]*=d,c=new U(new sc(c)),c.set("features",b),c}function zl(a,b){var c=Object.keys(b).map(function(a){return a+"="+encodeURIComponent(b[a])}).join("&");return a=a.replace(/[?&]$/,""),a=-1===a.indexOf("?")?a+"?":a+"&",a+c}function Al(a){a=a||{};var b;b=void 0!==a.attributions?a.attributions:[Bl],vl.call(this,{attributions:b,cacheSize:a.cacheSize,crossOrigin:void 0!==a.crossOrigin?a.crossOrigin:"anonymous",opaque:void 0!==a.opaque?a.opaque:!0,maxZoom:void 0!==a.maxZoom?a.maxZoom:19,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileLoadFunction:a.tileLoadFunction,url:void 0!==a.url?a.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:a.wrapX})}function Cl(a){a=a||{},rl.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0}),this.g=a.params||{},this.j=hb()}function Dl(a){a=a||{};var b=a.params||{};if(rl.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:!("TRANSPARENT"in b?b.TRANSPARENT:1),projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0}),this.l=void 0!==a.gutter?a.gutter:0,this.g=b,this.j=!0,this.o=a.serverType,this.C=void 0!==a.hidpi?a.hidpi:!0,this.v="",a=0,b=[],this.urls){var c,d;for(c=0,d=this.urls.length;d>c;++c)b[a++]=this.urls[c]}this.v=b.join("#"),this.B=hb();a:{for(a=(""+(this.g.VERSION||"1.3.0")).split("."),b=["1","3"],c=0;c<Math.max(a.length,b.length);c++){d=parseInt(a[c]||"0",10);var e=parseInt(b[c]||"0",10);if(d>e){a=1;break a}if(e>d){a=-1;break a}}a=0}this.j=a>=0,a=0;var f,b=[];for(f in this.g)b[a++]=f+"-"+this.g[f];Pd(this,b.join("/"))}function El(a,b,c,d,e,f,g){var h=a.urls;if(h){if(g.WIDTH=c[0],g.HEIGHT=c[1],g[a.j?"CRS":"SRS"]=f.ua,"STYLES"in a.g||(g.STYLES=""),1!=e)switch(a.o){case"geoserver":c=90*e+.5|0,g.FORMAT_OPTIONS="FORMAT_OPTIONS"in g?g.FORMAT_OPTIONS+(";dpi:"+c):"dpi:"+c;break;case"mapserver":g.MAP_RESOLUTION=90*e;break;case"carmentaserver":case"qgis":g.DPI=90*e}return f=f.a,a.j&&"ne"==f.substr(0,2)&&(a=d[0],d[0]=d[1],d[1]=a,a=d[2],d[2]=d[3],d[3]=a),g.BBOX=d.join(","),zl(1==h.length?h[0]:h[ma((b[1]<<b[0])+b[2],h.length)],g)}}function Fl(a){this.s=a.matrixIds,wd.call(this,{extent:a.extent,origin:a.origin,origins:a.origins,resolutions:a.resolutions,tileSize:a.tileSize,tileSizes:a.tileSizes,sizes:a.sizes})}function Gl(a){function b(a){return a="KVP"==d?zl(a,f):a.replace(/\{(\w+?)\}/g,function(a,b){return b.toLowerCase()in f?f[b.toLowerCase()]:a}),function(b){if(b){var c={TileMatrix:e.s[b[0]],TileCol:b[1],TileRow:-b[2]-1};return qa(c,g),b=a,b="KVP"==d?zl(b,c):b.replace(/\{(\w+?)\}/g,function(a,b){return c[b]})}}}this.B=void 0!==a.version?a.version:"1.0.0",this.l=void 0!==a.format?a.format:"image/jpeg",this.g=void 0!==a.dimensions?a.dimensions:{},this.o=a.layer,this.j=a.matrixSet,this.v=a.style;var c=a.urls;void 0===c&&void 0!==a.url&&(c=Yi(a.url));var d=this.C=void 0!==a.requestEncoding?a.requestEncoding:"KVP",e=a.tileGrid,f={layer:this.o,style:this.v,tilematrixset:this.j};"KVP"==d&&qa(f,{Service:"WMTS",Request:"GetTile",Version:this.B,Format:this.l});var g=this.g,h=c&&0<c.length?Wi(c.map(b)):Xi;rl.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:e,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:h,urls:c,wrapX:void 0!==a.wrapX?a.wrapX:!1}),Pd(this,Hl(this))}function Hl(a){var d,b=0,c=[];for(d in a.g)c[b++]=d+"-"+a.g[d];return c.join("/")}var m,OPENLAYERS={},aa=this,ea="closure_uid_"+(1e9*Math.random()>>>0),fa=0,E=Function("return this")(),la=function(){var a;return a="cosh"in Math?Math.cosh:function(a){return a=Math.exp(a),(a+1/a)/2}}(),qa="function"==typeof Object.assign?Object.assign:function(a,b){if(!a||!a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;e>d;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c},wa="olm_"+(1e4*Math.random()|0);Da.prototype.Qa=!1,Da.prototype.Y=ja,Fa.prototype.preventDefault=Fa.prototype.stopPropagation=function(){this.Cf=!0},C(Ha,Da),Ha.prototype.addEventListener=function(a,b){var c=this.T[a];c||(c=this.T[a]=[]),-1===c.indexOf(b)&&c.push(b)},Ha.prototype.Y=function(){var b,a=Aa(this);for(b in a)Ba(this,b)},Ha.prototype.removeEventListener=function(a,b){var c=this.T[a];if(c){var d=c.indexOf(b);a in this.ha?(c[d]=ja,++this.ha[a]):(c.splice(d,1),0===c.length&&delete this.T[a])}},C(Ja,Ha),Ja.prototype.c=function(){++this.i,O(this,"change")},Ja.prototype.s=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;d>f;++f)e[f]=I(this,a[f],b,c);return e}return I(this,a,b,c)},Ja.prototype.jc=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;d>f;++f)e[f]=I(this,a[f],b,c,!0);return e}return I(this,a,b,c,!0)},Ja.prototype.ma=function(a,b,c){if(Array.isArray(a))for(var d=0,e=a.length;e>d;++d)Ca(this,a[d],b,c);else Ca(this,a,b,c)},C(Ka,Fa),C(R,Ja);var Ma={};R.prototype.get=function(a){var b;return this.P.hasOwnProperty(a)&&(b=this.P[a]),b},R.prototype.va=function(){return qa({},this.P)},R.prototype.set=function(a,b,c){c?this.P[a]=b:(c=this.P[a],this.P[a]=b,c!==b&&(b=Na(a),O(this,new Ka(b,a,c)),O(this,new Ka("propertychange",a,c))))},Eb.prototype.offset=function(a,b,c){var d=a[1]*Math.PI/180;b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(a[0]*Math.PI/180+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};var Gb=new Eb(6370997),Hb={};Hb.degrees=2*Math.PI*Gb.radius/360,Hb.ft=.3048,Hb.m=1,Hb["us-ft"]=1200/3937,m=Ib.prototype,m.D=function(){return this.h},m.$a=function(){return this.i},m.Aa=function(){return this.f||Hb[this.i]},m.ke=function(a,b){if("degrees"==this.$a())return a;var c=Ob(this,S("EPSG:4326")),d=[b[0]-a/2,b[1],b[0]+a/2,b[1],b[0],b[1]-a/2,b[0],b[1]+a/2],d=c(d,d,2),c=(Fb(d.slice(0,2),d.slice(2,4))+Fb(d.slice(4,6),d.slice(6,8)))/2,d=this.Aa();return void 0!==d&&(c/=d),c},m.getPointResolution=function(a,b){return this.s(a,b)};var Jb={},Pb={},Kb=null;if(C(Yb,R),Yb.prototype.D=function(a){this.v!=this.i&&(this.w=this.hb(this.w),this.v=this.i);var b=this.w;return a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b,a},$b.prototype.BYTES_PER_ELEMENT=4,$b.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]},$b.prototype.toString=Array.prototype.join,"undefined"==typeof Float32Array&&($b.BYTES_PER_ELEMENT=4,$b.prototype.BYTES_PER_ELEMENT=$b.prototype.BYTES_PER_ELEMENT,$b.prototype.set=$b.prototype.set,$b.prototype.toString=$b.prototype.toString,w("Float32Array",$b,void 0)),ac.prototype.BYTES_PER_ELEMENT=8,ac.prototype.set=function(a,b){b=b||0;for(var c=0;c<a.length&&b+c<this.length;c++)this[b+c]=a[c]},ac.prototype.toString=Array.prototype.join,"undefined"==typeof Float64Array){try{ac.BYTES_PER_ELEMENT=8}catch(a){}ac.prototype.BYTES_PER_ELEMENT=ac.prototype.BYTES_PER_ELEMENT,ac.prototype.set=ac.prototype.set,ac.prototype.toString=ac.prototype.toString,w("Float64Array",ac,void 0)}new Float64Array(3),new Float64Array(3),new Float64Array(4),new Float64Array(4),new Float64Array(4),new Float64Array(16),C(fc,Yb),m=fc.prototype,m.hb=function(a){var b=this.a,c=this.a.length,d=this.u;return a=nb(a),sb(a,b,0,c,d)},m.Ob=function(a){if(this.o!=this.i&&(ra(this.h),this.j=0,this.o=this.i),0>a||0!==this.j&&a<=this.j)return this;var b=a.toString();if(this.h.hasOwnProperty(b))return this.h[b];var c=this.Ia(a);return c.a.length<this.a.length?this.h[b]=c:(this.j=a,this)},m.Ia=function(){return this},m.Sa=function(a){this.a&&(a(this.a,this.a,this.u),this.c())},m.rotate=function(a,b){var c=this.a;if(c){for(var d=c.length,e=this.u,f=c?c:[],g=Math.cos(a),h=Math.sin(a),k=b[0],l=b[1],n=0,p=0;d>p;p+=e){var q=c[p]-k,t=c[p+1]-l;for(f[n++]=k+q*g-t*h,f[n++]=l+q*h+t*g,q=p+2;p+e>q;++q)f[n++]=c[q]}c&&f.length!=n&&(f.length=n),this.c()}},C(qc,fc),m=qc.prototype,m.clone=function(){var a=new qc(null);return rc(a,this.b,this.a.slice()),a},m.M=function(){return mc(this.a,0,this.a.length,this.u)},m.Ia=function(a){var b=[];return b.length=oc(this.a,0,this.a.length,this.u,a,b,0),a=new qc(null),rc(a,"XY",b),a},m.K=function(){return"LinearRing"},m.O=function(a,b){a?(ic(this,b,a,1),this.a||(this.a=[]),this.a.length=kc(this.a,0,a,this.u),this.c()):rc(this,"XY",null)},C(sc,fc),m=sc.prototype,m.clone=function(){var a=new sc(null);return hc(a,this.b,this.a.slice()),a.c(),a},m.M=function(){return this.a?this.a.slice():[]},m.hb=function(a){return ob(this.a,a)},m.K=function(){return"Point"},m.O=function(a,b){a?(ic(this,b,a,0),this.a||(this.a=[]),this.a.length=jc(this.a,a)):hc(this,"XY",null),this.c()},C(T,fc),m=T.prototype,m.clone=function(){var a=new T(null);return zc(a,this.b,this.a.slice(),this.f.slice()),a},m.M=function(a){var b;return void 0!==a?(b=Ac(this).slice(),xc(b,0,this.f,this.u,a)):b=this.a,nc(b,0,this.f,this.u)},m.Ga=function(){return this.f},m.he=function(){return new sc(Bc(this))},m.Ia=function(a){var b=[],c=[];return b.length=pc(this.a,0,this.f,this.u,Math.sqrt(a),b,0,c),a=new T(null),zc(a,"XY",b,c),a},m.K=function(){return"Polygon"},m.O=function(a,b){if(a){ic(this,b,a,2),this.a||(this.a=[]);var c=lc(this.a,0,a,this.u,this.f);this.a.length=0===c.length?0:c[c.length-1],this.c()}else zc(this,"XY",null,this.f)},C(Cc,R),m=Cc.prototype,m.constrainResolution=function(a,b,c){return this.a.resolution(a,b||0,c||0)},m.constrainRotation=function(a,b){return this.a.rotation(a,b||0)},m.la=function(){return this.get("center")},m.kf=function(){return this.h},m.R=function(){return this.get("resolution")},m.lf=function(){return this.l},m.aa=function(){var a=this.la(),b=this.h,c=this.R(),d=Fc(this);return{center:[Math.round(a[0]/c)*c,Math.round(a[1]/c)*c],projection:void 0!==b?b:null,resolution:c,rotation:d}},m.ne=function(){var a,b=this.R();if(void 0!==b){var c,d=0;do{if(c=this.constrainResolution(this.g,d),c==b){a=d;break}++d}while(c>this.j)}return void 0!==a?this.f+a:a},m.ce=function(a,b,c){if(!(a instanceof fc)){var d=a[0],e=a[1],f=a[2],g=a[3],d=[d,e,d,g,f,g,f,e,d,e],e=new T(null);zc(e,"XY",d,[d.length]),a=e}d=c||{},c=void 0!==d.padding?d.padding:[0,0,0,0];var h,g=void 0!==d.constrainResolution?d.constrainResolution:!0,e=void 0!==d.nearest?d.nearest:!1;h=void 0!==d.minResolution?d.minResolution:void 0!==d.maxZoom?this.constrainResolution(this.g,d.maxZoom-this.f,0):0;var k=a.a,f=Fc(this),d=Math.cos(-f),f=Math.sin(-f),l=1/0,n=1/0,p=-(1/0),q=-(1/0);a=a.u;for(var t=0,u=k.length;u>t;t+=a)var x=k[t]*d-k[t+1]*f,r=k[t]*f+k[t+1]*d,l=Math.min(l,x),n=Math.min(n,r),p=Math.max(p,x),q=Math.max(q,r);b=Ec([l,n,p,q],[b[0]-c[1]-c[3],b[1]-c[0]-c[2]]),b=isNaN(b)?h:Math.max(b,h),g&&(h=this.constrainResolution(b,0,0),!e&&b>h&&(h=this.constrainResolution(h,-1,0)),b=h),Gc(this,b),f=-f,h=(l+p)/2+(c[1]-c[3])/2*b,b=(n+q)/2+(c[0]-c[2])/2*b,this.ta([h*d-b*f,b*d+h*f])},m.rotate=function(a,b){if(void 0!==b){var c,d=this.la();void 0!==d&&(c=[d[0]-b[0],d[1]-b[1]],eb(c,a-Fc(this)),bb(c,b)),this.ta(c)}this.set("rotation",a)},m.ta=function(a){this.set("center",a)},m.Yf=function(a){a=this.constrainResolution(this.g,a-this.f,0),Gc(this,a)},C(Sc,Fa),C(Tc,R),m=Tc.prototype,m.clear=function(){for(;0<this.La();)this.pop()},m.forEach=function(a,b){this.a.forEach(a,b)},m.Pc=function(a){return this.a[a]},m.La=function(){return this.get("length")},m.pop=function(){return Wc(this,this.La()-1)},m.push=function(a){var b=this.a.length;return this.a.splice(b,0,a),Uc(this),O(this,new Sc("add",a,this)),b},m.remove=function(a){var c,d,b=this.a;for(c=0,d=b.length;d>c;++c)if(b[c]===a)return Wc(this,c)};var ed,Yc=/^#(?:[0-9a-f]{3}){1,2}$/i,Zc=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i,$c=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i,cd=function(){var a={},b=0;return function(c){var d;if(a.hasOwnProperty(c))d=a[c];else{if(b>=1024){d=0;for(var e in a)0===(3&d++)&&(delete a[e],--b)}var f,g;Yc.exec(c)?(g=3==c.length-1?1:2,d=parseInt(c.substr(1+0*g,g),16),e=parseInt(c.substr(1+1*g,g),16),f=parseInt(c.substr(1+2*g,g),16),1==g&&(d=(d<<4)+d,e=(e<<4)+e,f=(f<<4)+f),d=[d,e,f,1]):(g=$c.exec(c))?(d=Number(g[1]),e=Number(g[2]),f=Number(g[3]),g=Number(g[4]),d=[d,e,f,g],d=bd(d,d)):(g=Zc.exec(c))?(d=Number(g[1]),e=Number(g[2]),f=Number(g[3]),d=[d,e,f,1],d=bd(d,d)):d=void 0,a[c]=d,++b}return d}}();a:{var fd=aa.navigator;if(fd){var gd=fd.userAgent;if(gd){ed=gd;break a}}ed=""}var hd=-1!=ed.toLowerCase().indexOf("webkit")&&-1==ed.indexOf("Edge");C(kd,Fa),C(ld,R),ld.prototype.Y=function(){jd(this.element),R.prototype.Y.call(this)},ld.prototype.setMap=function(a){this.o&&jd(this.element);for(var b=0,c=this.w.length;c>b;++b)F(this.w[b]);this.w.length=0,(this.o=a)&&((this.C?this.C:a.o).appendChild(this.element),this.render!==ja&&this.w.push(I(a,"postrender",this.render,this)),a.render())},m=md.prototype,m.clear=function(){this.i=0,this.b={},this.c=this.a=null},m.forEach=function(a,b){for(var c=this.a;c;)a.call(b,c.Pa,c.Ka,this),c=c.oa},m.get=function(a){return a=this.b[a],a===this.c?a.Pa:(a===this.a?(this.a=this.a.oa,this.a.Na=null):(a.oa.Na=a.Na,a.Na.oa=a.oa),a.oa=null,a.Na=this.c,this.c=this.c.oa=a,a.Pa)},m.pop=function(){var a=this.a;return delete this.b[a.Ka],a.oa&&(a.oa.Na=null),this.a=a.oa,this.a||(this.c=null),--this.i,a.Pa},m.replace=function(a,b){this.get(a),this.b[a].Pa=b},m.set=function(a,b){var c={Ka:a,oa:null,Na:this.c,Pa:b};this.c?this.c.oa=c:this.a=c,this.c=c,this.b[a]=c,++this.i},C(nd,md),nd.prototype.Fa=function(a){for(var b,c;od(this);){b=this.a.Pa,c=b.pa[0].toString();var d;if((d=c in a)&&(b=b.pa,d=Pc(a[c],b[1],b[2])),d)break;Ea(this.pop())}},C(pd,Ha),pd.prototype.getKey=function(){return y(this).toString()},pd.prototype.aa=function(){return this.state},C(ud,R),ud.prototype.xa=ja,ud.prototype.aa=function(){return this.ia};var yd=[0,0,0];wd.prototype.D=function(){return this.j},wd.prototype.Ba=function(a){return this.b?this.b:this.g[a]},wd.prototype.R=function(a){
return this.a[a]},C(Nd,ud),m=Nd.prototype,m.Uc=function(){return od(this.a)},m.Fa=function(a,b){var c=this.Za(a);c&&c.Fa(b)},m.Hc=function(){return 0},m.getKey=function(){return this.Ka},m.Ha=function(a,b,c){return a+"/"+b+"/"+c},m.Nb=function(){return this.V},m.na=function(a){return this.tileGrid?this.tileGrid:Jd(a)},m.Za=function(a){var b=this.f;return b&&!Ub(b,a)?null:this.a},m.ib=function(){return this.ca},m.od=ja,C(Sd,Fa),C(Td,ld),Td.prototype.L=function(a){a.preventDefault(),Vd(this)},Td.prototype.V=function(a){this.f!==a&&(this.f=a,this.element.classList.toggle("ol-uncollapsible"),!a&&this.b&&Vd(this))},Td.prototype.X=function(a){this.f&&this.b!==a&&Vd(this)},C(Wd,ld),Wd.prototype.j=function(a){if(a.preventDefault(),void 0!==this.g)this.g();else{a=this.o;var b=a.S();if(b){var c=Fc(b);void 0!==c&&(0<this.f&&(c%=2*Math.PI,c<-Math.PI&&(c+=2*Math.PI),c>Math.PI&&(c-=2*Math.PI),a.ka(Mc({rotation:c,duration:this.f,easing:Ic}))),b.set("rotation",0))}}},C(Yd,ld),Yd.prototype.b=function(a,b){b.preventDefault();var c=this.o,d=c.S();if(d){var e=d.R();e&&(0<this.a&&c.ka(Nc({resolution:e,duration:this.a,easing:Ic})),c=d.constrainResolution(e,a),Gc(d,c))}};var $d;C(be,Fa);var ee=!1;try{ee=1===new MouseEvent("click",{buttons:1}).buttons}catch(a){}var fe="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",ge=-1!==fe.indexOf("firefox"),he=-1!==fe.indexOf("safari")&&-1===fe.indexOf("chrom"),ie=-1!==fe.indexOf("macintosh"),je=E.devicePixelRatio||1,ke=!1,le=function(){if(!("HTMLCanvasElement"in E))return!1;try{var a=id();return a?(a.setLineDash&&(ke=!0),!0):!1}catch(b){return!1}}(),me="geolocation"in E.navigator,ne="ontouchstart"in E,oe="PointerEvent"in E,pe=!!E.navigator.msPointerEnabled;C(re,qe),m=re.prototype,m.Re=function(a){if(!se(this,a)){if(1..toString()in this.c){var b=te(a);ve(this.a,we,b,a),delete this.c[1..toString()]}b=te(a),this.c[1..toString()]=a,ve(this.a,xe,b,a)}},m.Se=function(a){if(!se(this,a)){var b=te(a);ve(this.a,ye,b,a)}},m.Ve=function(a){if(!se(this,a)){var b=this.c[1..toString()];b&&b.button===a.button&&(b=te(a),ve(this.a,ze,b,a),delete this.c[1..toString()])}},m.Ue=function(a){if(!se(this,a)){var b=te(a);Ae(this.a,b,a)}},m.Te=function(a){if(!se(this,a)){var b=te(a);Be(this.a,b,a)}},C(Ce,qe),m=Ce.prototype,m.$e=function(a){this.c[a.pointerId.toString()]=a;var b=De(this,a);ve(this.a,xe,b,a)},m.af=function(a){var b=De(this,a);ve(this.a,ye,b,a)},m.df=function(a){var b=De(this,a);ve(this.a,ze,b,a),delete this.c[a.pointerId.toString()]},m.bf=function(a){var b=De(this,a);Be(this.a,b,a)},m.cf=function(a){var b=De(this,a);Ae(this.a,b,a)},m.Ze=function(a){var b=De(this,a);ve(this.a,we,b,a),delete this.c[a.pointerId.toString()]},m.Ye=function(a){O(this.a,new be("lostpointercapture",a,a))},m.Xe=function(a){O(this.a,new be("gotpointercapture",a,a))},C(Ee,qe),m=Ee.prototype,m.vf=function(a){Fe(this.a,a)},m.wf=function(a){Fe(this.a,a)},m.zf=function(a){Fe(this.a,a)},m.xf=function(a){Fe(this.a,a)},m.yf=function(a){Fe(this.a,a)},m.uf=function(a){Fe(this.a,a)},m.Qe=function(a){Fe(this.a,a)},m.oe=function(a){Fe(this.a,a)},C(Ge,qe),m=Ge.prototype,m.gd=function(){this.f=0,this.i=void 0},m.cg=function(a){var b=a.touches,c=Object.keys(this.c),d=c.length;if(d>=b.length){var f,g,h,e=[];for(f=0;d>f;++f){g=c[f],h=this.c[g];var k;if(!(k=1==g))a:{k=b.length;for(var l,n=0;k>n;n++)if(l=b[n],l.identifier===g-2){k=!0;break a}k=!1}k||e.push(h.out)}for(f=0;f<e.length;++f)this.Fb(a,e[f])}b=a.changedTouches[0],c=Object.keys(this.c).length,(0===c||1===c&&1..toString()in this.c)&&(this.b=b.identifier,void 0!==this.i&&E.clearTimeout(this.i)),Je(this,a),this.f++,Ie(this,a,this.qf)},m.qf=function(a,b){this.c[b.pointerId]={target:b.target,out:b,Yc:b.target};var c=this.a;b.bubbles=!0,ve(c,Ke,b,a),c=this.a,b.bubbles=!1,ve(c,Le,b,a),ve(this.a,xe,b,a)},m.bg=function(a){a.preventDefault(),Ie(this,a,this.We)},m.We=function(a,b){var c=this.c[b.pointerId];if(c){var d=c.out,e=c.Yc;ve(this.a,ye,b,a),d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(Be(this.a,d,a),Ae(this.a,b,a)):(b.target=e,b.relatedTarget=null,this.Fb(a,b))),c.out=b,c.Yc=b.target}},m.ag=function(a){Je(this,a),Ie(this,a,this.dg)},m.dg=function(a,b){ve(this.a,ze,b,a),this.a.out(b,a);var c=this.a;b.bubbles=!1,ve(c,Me,b,a),delete this.c[b.pointerId],b.isPrimary&&(this.b=void 0,this.i=E.setTimeout(this.gd.bind(this),200))},m.$f=function(a){Ie(this,a,this.Fb)},m.Fb=function(a,b){ve(this.a,we,b,a),this.a.out(b,a);var c=this.a;b.bubbles=!1,ve(c,Me,b,a),delete this.c[b.pointerId],b.isPrimary&&(this.b=void 0,this.i=E.setTimeout(this.gd.bind(this),200))},C(Ne,Ha),Ne.prototype.b=function(a){var b=this.i[a.type];b&&b(a)},Ne.prototype.out=function(a,b){a.bubbles=!0,ve(this,Se,a,b)},Ne.prototype.Y=function(){for(var b,a=this.a.length,c=0;a>c;c++)b=this.a[c],Qe(this,Object.keys(b.g));Ha.prototype.Y.call(this)};var ye="pointermove",xe="pointerdown",ze="pointerup",Ke="pointerover",Se="pointerout",Le="pointerenter",Me="pointerleave",we="pointercancel",Re=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];C(Te,kd),Te.prototype.preventDefault=function(){kd.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},Te.prototype.stopPropagation=function(){kd.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()},C(Ue,Te),C(Ve,Ha),m=Ve.prototype,m.Lc=function(a){$e(this,a);var b=new Ue(af,this.b,a);O(this,b),!this.h&&0===a.button&&We(this,this.c),0===this.o&&(this.i.forEach(F),this.i.length=0,this.h=!1,this.c=null,Ea(this.a),this.a=null)},m.Ce=function(a){$e(this,a);var b=new Ue(cf,this.b,a);O(this,b),this.c=a,0===this.i.length&&(this.a=new Ne(document),this.i.push(I(this.a,df,this.hf,this),I(this.a,af,this.Lc,this),I(this.g,bf,this.Lc,this)))},m.hf=function(a){if(a.clientX!=this.c.clientX||a.clientY!=this.c.clientY){this.h=!0;var b=new Ue(ef,this.b,a,this.h);O(this,b)}a.preventDefault()},m.Rf=function(a){O(this,new Ue(a.type,this.b,a,!(!this.c||a.clientX==this.c.clientX&&a.clientY==this.c.clientY)))},m.Y=function(){this.j&&(F(this.j),this.j=null),this.s&&(F(this.s),this.s=null),this.i.forEach(F),this.i.length=0,this.a&&(Ea(this.a),this.a=null),this.g&&(Ea(this.g),this.g=null),Ha.prototype.Y.call(this)};var Ze="singleclick",Xe="click",Ye="dblclick",ef="pointerdrag",df="pointermove",cf="pointerdown",af="pointerup",bf="pointercancel",ff={zg:Ze,og:Xe,pg:Ye,sg:ef,vg:df,rg:cf,yg:af,xg:"pointerover",wg:"pointerout",tg:"pointerenter",ug:"pointerleave",qg:bf};C(gf,R),gf.prototype.D=function(){return this.get("extent")},gf.prototype.b=function(){return this.get("visible")},gf.prototype.w=function(a){this.set("visible",a)},C(kf,Fa),C(lf,gf),m=lf.prototype,m.Mb=function(a){return a=a?a:[],a.push(hf(this)),a},m.Z=function(){return this.get("source")||null},m.Pb=function(){var a=this.Z();return a?a.aa():"undefined"},m.nf=function(){this.c()},m.Ie=function(){this.f&&(F(this.f),this.f=null);var a=this.Z();a&&(this.f=I(a,"change",this.nf,this)),this.c()},m.setMap=function(a){this.a&&(F(this.a),this.a=null),a||this.c(),this.g&&(F(this.g),this.g=null),a&&(this.a=I(a,"precompose",function(a){var c=hf(this);c.Tb=!1,c.zIndex=1/0,a.frameState.layerStatesArray.push(c),a.frameState.layerStates[y(this)]=c},this),this.g=I(this,"change",a.render,a),this.c())},C(of,Ja),of.prototype.xa=ja,of.prototype.j=function(a,b,c,d){return a=a.slice(),nf(b.pixelToCoordinateMatrix,a,a),this.xa(a,b,Cb,this)?c.call(d,this.a):void 0},C(yf,xf),m=yf.prototype,m.Jb=function(){if(this.i)return this.i;var a=this.g,b=this.ab();if("fraction"==this.h||"fraction"==this.s){if(!b)return null;a=this.g.slice(),"fraction"==this.h&&(a[0]*=b[0]),"fraction"==this.s&&(a[1]*=b[1])}if("top-left"!=this.c){if(!b)return null;a===this.g&&(a=this.g.slice()),("top-right"==this.c||"bottom-right"==this.c)&&(a[0]=-a[0]+b[0]),("bottom-left"==this.c||"bottom-right"==this.c)&&(a[1]=-a[1]+b[1])}return this.i=a},m.da=function(a){return this.a.da(a)},m.nb=function(){return this.a.b},m.Xc=function(){var a=this.a;if(!a.h)if(a.s){var b=a.c[0],c=a.c[1],d=id(b,c);d.fillRect(0,0,b,c),a.h=d.canvas}else a.h=a.a;return a.h},m.Ba=function(){if(this.f)return this.f;var a=this.U;if("top-left"!=this.b){var b=this.ab(),c=this.a.c;if(!b||!c)return null;a=a.slice(),("top-right"==this.b||"bottom-right"==this.b)&&(a[0]=c[0]-b[0]-a[0]),("bottom-left"==this.b||"bottom-right"==this.b)&&(a[1]=c[1]-b[1]-a[1])}return this.f=a},m.ab=function(){return this.j?this.j:this.a.c},m.Oc=function(a,b){return I(this.a,"change",a,b)},m.load=function(){this.a.load()},m.ld=function(a,b){Ca(this.a,"change",a,b)},C(Af,Ha),Af.prototype.j=function(){this.b=3,this.g.forEach(F),this.g=null,O(this,"change")},Af.prototype.o=function(){if(this.b=2,this.c&&(this.a.width=this.c[0],this.a.height=this.c[1]),this.c=[this.a.width,this.a.height],this.g.forEach(F),this.g=null,Bf(this),!this.s&&null!==this.f){this.i.width=this.a.width,this.i.height=this.a.height;var a=this.i.getContext("2d");a.drawImage(this.a,0,0);for(var b=a.getImageData(0,0,this.a.width,this.a.height),c=b.data,d=this.f[0]/255,e=this.f[1]/255,f=this.f[2]/255,g=0,h=c.length;h>g;g+=4)c[g]*=d,c[g+1]*=e,c[g+2]*=f;a.putImageData(b,0,0)}O(this,"change")},Af.prototype.da=function(){return this.i?this.i:this.a},Af.prototype.load=function(){if(0==this.b){this.b=1,this.g=[I(this.a,"error",this.j,this,!0),I(this.a,"load",this.o,this,!0)];try{this.a.src=this.l}catch(a){this.j()}}},function(){var a=zf;a.Ic=function(){return a.Mc?a.Mc:a.Mc=new a}}(),zf.prototype.clear=function(){this.a={},this.c=0},zf.prototype.get=function(a,b,c){return a=b+":"+a+":"+(c?ad(c):"null"),a in this.a?this.a[a]:null},zf.prototype.set=function(a,b,c,d){this.a[b+":"+a+":"+(c?ad(c):"null")]=d,++this.c},C(Cf,Da),m=Cf.prototype,m.Y=function(){for(var a in this.c)Ea(this.c[a])},m.xa=function(a,b,c,d,e,f){function g(a,e){var f=y(a).toString(),g=b.layerStates[y(e)].Tb;return f in b.skippedFeatureUids&&!g?void 0:c.call(d,a,g?e:null)}var h,k=b.viewState,l=k.resolution,n=k.projection,k=a;if(n.c){var n=n.D(),p=ub(n),q=a[0];(q<n[0]||q>n[2])&&(k=[q+p*Math.ceil((n[0]-q)/p),a[1]])}for(n=b.layerStatesArray,p=n.length-1;p>=0;--p){var t=n[p],q=t.layer;if(t.visible&&l>=t.minResolution&&l<t.maxResolution&&e.call(f,q)&&(t=Ef(this,q),q.Z()&&(h=t.xa(q.Z().A?k:a,b,g,d)),h))return h}},m.we=function(){this.f.render()},m.ed=ja,m.Uf=function(a,b){for(var c in this.c)if(!(b&&c in b.layerStates)){var d=c,e=this.c[d];delete this.c[d],F(this.i[d]),delete this.i[d],Ea(e)}},Jf.prototype.clear=function(){this.a.length=0,this.c.length=0,ra(this.b)},Jf.prototype.h=function(a){var b=this.j(a);return 1/0!=b?(this.a.push(a),this.c.push(b),this.b[this.f(a)]=!0,Kf(this,0,this.a.length-1),!0):!1},C(Mf,Jf),Mf.prototype.h=function(a){var b=Jf.prototype.h.call(this,a);return b&&I(a[0],"change",this.s,this),b},Mf.prototype.s=function(a){a=a.target;var b=a.aa();(2===b||3===b||4===b||5===b)&&(Ca(a,"change",this.s,this),a=a.getKey(),a in this.i&&(delete this.i[a],--this.g),this.l())},C(Pf,R),Pf.prototype.setMap=function(a){this.w=a},C(Tf,Pf),C(dg,Pf),dg.prototype.C=function(a){return a},C(gg,dg),gg.prototype.C=Db,C(lg,dg),lg.prototype.C=Db,C(pg,Da),pg.prototype.Y=function(){this.setMap(null)},pg.prototype.setMap=function(a){if(this.a){this.a.w.removeChild(this.c);var b=this.c.style;b.left=b.top=b.width=b.height="inherit"}(this.a=a)&&this.a.w.appendChild(this.c)},pg.prototype.N=function(){return this.i},C(sg,Fa),C(tg,dg),tg.prototype.N=function(){return this.a.N()},tg.prototype.h=ja,C(yg,tg),yg.prototype.h=function(){var a=this.w,b=a.S(),c=a.Ma(),d=this.N().D();if(this.v){var e;e=b.la();var f=b.R(),g=Fc(b);e=yb(e,f,g,c);var h,d=[kg(a,wb(d)),kg(a,[d[2],d[3]])],f=nb(void 0),g=0;for(h=d.length;h>g;++g)ib(f,d[g]);f=1/Ec(f,c),d=(e[2]-e[0])/2*(f-1),f=(e[3]-e[1])/2*(f-1),e[0]-=d,e[2]+=d,e[1]-=f,e[3]+=f,d=e}c=b.constrainResolution(Ec(d,c)),e=b.R(),f=b.la(),a.ka(Nc({resolution:e,duration:this.f,easing:Ic})),a.ka(Lc({source:f,duration:this.f,easing:Ic})),b.ta(xb(d)),Gc(b,c)},C(zg,Pf),C(Bg,Pf),C(Dg,Pf),Dg.prototype.h=function(a){var b=ka(this.a,-1,1),c=a.S();a.render(),Rf(a,c,-b,this.g,this.j),this.a=0,this.g=null,this.f=this.b=void 0},C(Fg,dg),Fg.prototype.C=Db,C(Jg,dg),Jg.prototype.C=Db,C(Ng,gf),m=Ng.prototype,m.kb=function(){this.b()&&this.c()},m.ye=function(){this.g.forEach(F),this.g.length=0;var a=this.get("layers");this.g.push(I(a,"add",this.xe,this),I(a,"remove",this.ze,this));for(var b in this.a)this.a[b].forEach(F);ra(this.a);var c,d,a=a.a;for(b=0,c=a.length;c>b;b++)d=a[b],this.a[y(d).toString()]=[I(d,"propertychange",this.kb,this),I(d,"change",this.kb,this)];this.c()},m.xe=function(a){a=a.element;var b=y(a).toString();this.a[b]=[I(a,"propertychange",this.kb,this),I(a,"change",this.kb,this)],this.c()},m.ze=function(a){a=y(a.element).toString(),this.a[a].forEach(F),delete this.a[a],this.c()},m.Mb=function(a){var b=void 0!==a?a:[],c=b.length;this.get("layers").forEach(function(a){a.Mb(b)}),a=hf(this);var d,e;for(d=b.length;d>c;c++)e=b[c],e.opacity*=a.opacity,e.visible=e.visible&&a.visible,e.maxResolution=Math.min(e.maxResolution,a.maxResolution),e.minResolution=Math.max(e.minResolution,a.minResolution),void 0!==a.extent&&(e.extent=void 0!==e.extent?zb(e.extent,a.extent):a.extent);return b},m.Pb=function(){return"ready"},C(Og,Ib),Og.prototype.getPointResolution=function(a,b){return a/la(b[1]/6378137)};var Rg=6378137*Math.PI,Pg=[-Rg,-Rg,Rg,Rg],Qg=[-180,-85,180,85],Sg="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(a){return new Og(a)}),Vg=new Eb(6378137);C(Wg,Ib),Wg.prototype.getPointResolution=function(a){return a};var Xg=[-180,-90,180,90],Yg=Math.PI*Vg.radius/180,Zg=[new Wg("CRS:84"),new Wg("EPSG:4326","neu"),new Wg("urn:ogc:def:crs:EPSG::4326","neu"),new Wg("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new Wg("urn:ogc:def:crs:OGC:1.3:CRS84"),new Wg("urn:ogc:def:crs:OGC:2:84"),new Wg("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Wg("urn:x-ogc:def:crs:EPSG:4326","neu")];C(Ff,lf);var $g=[0,0,0,1],ah=[],bh=[0,0,0,1];!function(){function a(){}a.prototype=eh.prototype,fh.c=eh.prototype,fh.prototype=new a,fh.prototype.constructor=fh,fh.a=function(a,c,d){for(var e=Array(arguments.length-2),f=2;f<arguments.length;f++)e[f-2]=arguments[f];return eh.prototype[c].apply(a,e)}}(),C(jh,xf),m=jh.prototype,m.Jb=function(){return this.h},m.Xc=function(){return this.f},m.da=function(){return this.i},m.nb=function(){return 2},m.Ba=function(){return this.s},m.ab=function(){return this.j},m.Oc=ja,m.load=ja,m.ld=ja,m.Fc=function(a,b,c,d){b.setTransform(1,0,0,1,0,0),b.translate(c,d),b.beginPath(),b.arc(a.size/2,a.size/2,this.c,0,2*Math.PI,!0),this.g&&(b.fillStyle=dd(this.g.a),b.fill()),this.a&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.jd,a.lineDash&&b.setLineDash(a.lineDash),b.stroke()),b.closePath()},m.yc=function(a,b,c,d){b.setTransform(1,0,0,1,0,0),b.translate(c,d),b.beginPath(),b.arc(a.size/2,a.size/2,this.c,0,2*Math.PI,!0),b.fillStyle=ad($g),b.fill(),this.a&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.jd,a.lineDash&&b.setLineDash(a.lineDash),b.stroke()),b.closePath()},kh.prototype.N=function(){return this.f},kh.prototype.da=function(){return this.h};var oh=null;C(Hf,lf),Hf.prototype.o=function(a){this.l=void 0!==a?a:ph,this.j=null===a?void 0:nh(this.l),this.c()},C(rh,jf),m=rh.prototype,m.xc=function(a){if(Ab(this.h,a.D())){if(this.c||this.a){this.c&&uh(this,this.c),this.a&&vh(this,this.a);var b;b=this.U;var c=this.T,d=a.a;b=d?ec(d,0,d.length,a.u,b,c):null,c=b[2]-b[0],d=b[3]-b[1],c=Math.sqrt(c*c+d*d),d=this.i,d.beginPath(),d.arc(b[0],b[1],c,0,2*Math.PI),this.c&&d.fill(),this.a&&d.stroke()}""!==this.b&&th(this,a.Vb(),2,2)}},m.Dc=function(a){var b=a.a;a=a.u,this.g&&sh(this,b,b.length),""!==this.b&&th(this,b,b.length,a)},m.Bc=function(a){var b=a.a;a=a.u,this.g&&sh(this,b,b.length),""!==this.b&&th(this,b,b.length,a)},m.zc=function(a){if(Ab(this.h,a.D())){if(this.a){vh(this,this.a);var b=this.i,c=a.a;b.beginPath(),wh(this,c,0,c.length,a.u,!1),b.stroke()}""!==this.b&&(a=yh(a),th(this,a,2,2))}},m.Ac=function(a){var b=a.D();if(Ab(this.h,b)){if(this.a){vh(this,this.a);var b=this.i,c=a.a,d=0,e=a.Ga(),f=a.u;b.beginPath();var g,h;for(g=0,h=e.length;h>g;++g)d=wh(this,c,d,e[g],f,!1);b.stroke()}""!==this.b&&(a=zh(a),th(this,a,a.length,2))}},m.Ec=function(a){if(Ab(this.h,a.D())){if(this.a||this.c){this.c&&uh(this,this.c),this.a&&vh(this,this.a);var b=this.i;b.beginPath(),xh(this,Ac(a),0,a.Ga(),a.u),this.c&&b.fill(),this.a&&b.stroke()}""!==this.b&&(a=Bc(a),th(this,a,2,2))}},m.Cc=function(a){if(Ab(this.h,a.D())){if(this.a||this.c){this.c&&uh(this,this.c),this.a&&vh(this,this.a);var g,h,b=this.i,c=Ah(a),d=0,e=a.f,f=a.u;for(g=0,h=e.length;h>g;++g){var k=e[g];b.beginPath(),d=xh(this,c,d,k,f),this.c&&b.fill(),this.a&&b.stroke()}}""!==this.b&&(a=Bh(a),th(this,a,a.length,2))}},m.Ea=function(a,b){if(a){var c=a.a;this.c={fillStyle:dd(c?c:$g)}}else this.c=null;if(b){var c=b.c,d=b.i,e=b.a,f=b.g,g=b.b,h=b.f;this.a={lineCap:void 0!==d?d:"round",lineDash:e?e:ah,lineJoin:void 0!==f?f:"round",lineWidth:this.w*(void 0!==g?g:1),miterLimit:void 0!==h?h:10,strokeStyle:ad(c?c:bh)}}else this.a=null},m.gc=function(a){if(a){var b=a.Jb(),c=a.da(1),d=a.Ba(),e=a.ab();this.v=b[0],this.A=b[1],this.C=e[1],this.g=c,this.o=a.l,this.V=d[0],this.va=d[1],this.$=a.o,this.Qa=a.T,this.f=a.w,this.ca=a.P,this.B=e[0]}else this.g=null},m.ya=function(a){if(a){var b=a.i;b?(b=b.a,this.s={fillStyle:dd(b?b:$g)}):this.s=null;var c=a.h;if(c){var b=c.c,d=c.i,e=c.a,f=c.g,g=c.b,c=c.f;this.l={lineCap:void 0!==d?d:"round",lineDash:e?e:ah,lineJoin:void 0!==f?f:"round",lineWidth:void 0!==g?g:1,miterLimit:void 0!==c?c:10,strokeStyle:ad(b?b:bh)}}else this.l=null;var b=a.a,d=a.c,e=a.b,f=a.g,g=a.f,c=a.s,h=a.j;a=a.l,this.L={font:void 0!==b?b:"10px sans-serif",textAlign:void 0!==h?h:"center",textBaseline:void 0!==a?a:"middle"},this.b=void 0!==c?c:"",this.fa=void 0!==d?this.w*d:0,this.ia=void 0!==e?this.w*e:0,this.P=void 0!==f?f:0,this.j=this.w*(void 0!==g?g:1)}else this.b=""},C(Ch,of),Ch.prototype.f=function(a,b,c){Dh(this,"precompose",c,a,void 0);var d=this.da();if(d){var e=b.extent,f=void 0!==e;if(f){var g=a.pixelRatio,h=a.size[0]*g,k=a.size[1]*g,l=a.viewState.rotation,n=Bb(e),p=[e[2],e[3]],q=[e[2],e[1]],e=wb(e);nf(a.coordinateToPixelMatrix,n,n),nf(a.coordinateToPixelMatrix,p,p),nf(a.coordinateToPixelMatrix,q,q),nf(a.coordinateToPixelMatrix,e,e),c.save(),ch(c,-l,h/2,k/2),c.beginPath(),c.moveTo(n[0]*g,n[1]*g),c.lineTo(p[0]*g,p[1]*g),c.lineTo(q[0]*g,q[1]*g),c.lineTo(e[0]*g,e[1]*g),c.clip(),ch(c,l,h/2,k/2)}g=this.B(),h=c.globalAlpha,c.globalAlpha=b.opacity,c.drawImage(d,0,0,+d.width,+d.height,Math.round(g[12]),Math.round(g[13]),Math.round(d.width*g[0]),Math.round(d.height*g[5])),c.globalAlpha=h,f&&c.restore()}Dh(this,"postcompose",c,a,void 0)};var Fh=["Polygon","LineString","Image","Text"];C(Gh,jf),Gh.prototype.A=function(a,b,c,d,e){Jh(this,a,b,c,d,e,this.c,void 0)},Gh.prototype.mb=ja,Gh.prototype.Kb=function(){return this.ha},C(Mh,Gh),Mh.prototype.Dc=function(a,b){if(this.s){Ih(this,b);var c=a.a,d=this.coordinates.length,c=Hh(this,c,0,c.length,a.u,!1);this.c.push([4,d,c,this.s,this.b,this.f,this.h,this.j,this.l,this.o,this.T,this.w,this.P,this.U,this.v]),this.a.push([4,d,c,this.L,this.b,this.f,this.h,this.j,this.l,this.o,this.T,this.w,this.P,this.U,this.v]),Lh(this,b)}},Mh.prototype.Bc=function(a,b){if(this.s){Ih(this,b);var c=a.a,d=this.coordinates.length,c=Hh(this,c,0,c.length,a.u,!1);this.c.push([4,d,c,this.s,this.b,this.f,this.h,this.j,this.l,this.o,this.T,this.w,this.P,this.U,this.v]),this.a.push([4,d,c,this.L,this.b,this.f,this.h,this.j,this.l,this.o,this.T,this.w,this.P,this.U,this.v]),Lh(this,b)}},Mh.prototype.mb=function(){Kh(this),this.f=this.b=void 0,this.s=this.L=null,this.v=this.U=this.w=this.T=this.o=this.l=this.j=this.P=this.h=void 0},Mh.prototype.gc=function(a){var b=a.Jb(),c=a.ab(),d=a.Xc(1),e=a.da(1),f=a.Ba();this.b=b[0],this.f=b[1],this.L=d,this.s=e,this.h=c[1],this.j=a.l,this.l=f[0],this.o=f[1],this.T=a.o,this.w=a.T,this.P=a.w,this.U=a.P,this.v=c[0]},C(Nh,Gh),m=Nh.prototype,m.Kb=function(){return this.i||(this.i=kb(this.ha),0<this.g&&jb(this.i,this.resolution*(this.g+1)/2,this.i)),this.i},m.zc=function(a,b){var c=this.b,d=c.lineWidth;void 0!==c.strokeStyle&&void 0!==d&&(Ph(this),Ih(this,b),this.a.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash],[1]),c=a.a,Oh(this,c,0,c.length,a.u),this.a.push([12]),Lh(this,b))},m.Ac=function(a,b){var c=this.b,d=c.lineWidth;if(void 0!==c.strokeStyle&&void 0!==d){Ph(this),Ih(this,b),this.a.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash],[1]);var g,h,c=a.Ga(),d=a.a,e=a.u,f=0;for(g=0,h=c.length;h>g;++g)f=Oh(this,d,f,c[g],e);this.a.push([12]),Lh(this,b)}},m.mb=function(){this.b.Rb!=this.coordinates.length&&this.c.push([12]),Kh(this),this.b=null},m.Ea=function(a,b){var c=b.c;this.b.strokeStyle=ad(c?c:bh),c=b.i,this.b.lineCap=void 0!==c?c:"round",c=b.a,this.b.lineDash=c?c:ah,c=b.g,this.b.lineJoin=void 0!==c?c:"round",c=b.b,this.b.lineWidth=void 0!==c?c:1,c=b.f,this.b.miterLimit=void 0!==c?c:10,this.b.lineWidth>this.g&&(this.g=this.b.lineWidth,this.i=null)},C(Qh,Gh),m=Qh.prototype,m.xc=function(a,b){var c=this.b,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){Sh(this),Ih(this,b),this.a.push([9,ad($g)]),void 0!==c.strokeStyle&&this.a.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash]);var e=a.a,d=this.coordinates.length;Hh(this,e,0,e.length,a.u,!1),e=[1],d=[2,d],this.c.push(e,d),this.a.push(e,d),d=[7],this.a.push(d),void 0!==c.fillStyle&&this.c.push(d),void 0!==c.strokeStyle&&(c=[12],this.c.push(c),this.a.push(c)),Lh(this,b)}},m.Ec=function(a,b){var c=this.b,d=c.strokeStyle;(void 0!==c.fillStyle||void 0!==d)&&(Sh(this),Ih(this,b),this.a.push([9,ad($g)]),void 0!==c.strokeStyle&&this.a.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash]),c=a.Ga(),d=Ac(a),Rh(this,d,0,c,a.u),Lh(this,b))},m.Cc=function(a,b){var c=this.b,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){Sh(this),Ih(this,b),this.a.push([9,ad($g)]),void 0!==c.strokeStyle&&this.a.push([10,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash]);var g,h,c=a.f,d=Ah(a),e=a.u,f=0;for(g=0,h=c.length;h>g;++g)f=Rh(this,d,f,c[g],e);Lh(this,b)}},m.mb=function(){Kh(this),this.b=null;var a=this.$;if(0!==a){var c,d,b=this.coordinates;for(c=0,d=b.length;d>c;++c)b[c]=a*Math.round(b[c]/a)}},m.Kb=function(){return this.i||(this.i=kb(this.ha),0<this.g&&jb(this.i,this.resolution*(this.g+1)/2,this.i)),this.i},m.Ea=function(a,b){var c=this.b;if(a){var d=a.a;c.fillStyle=dd(d?d:$g)}else c.fillStyle=void 0;b?(d=b.c,c.strokeStyle=ad(d?d:bh),d=b.i,c.lineCap=void 0!==d?d:"round",d=b.a,c.lineDash=d?d.slice():ah,d=b.g,c.lineJoin=void 0!==d?d:"round",d=b.b,c.lineWidth=void 0!==d?d:1,d=b.f,c.miterLimit=void 0!==d?d:10,c.lineWidth>this.g&&(this.g=c.lineWidth,this.i=null)):(c.strokeStyle=void 0,c.lineCap=void 0,c.lineDash=null,c.lineJoin=void 0,c.lineWidth=void 0,c.miterLimit=void 0)},C(Th,Gh),Th.prototype.ya=function(a){if(a){var b=a.i;b?(b=b.a,b=dd(b?b:$g),this.b?this.b.fillStyle=b:this.b={fillStyle:b}):this.b=null;var c=a.h;if(c){var b=c.c,d=c.i,e=c.a,f=c.g,g=c.b,c=c.f,d=void 0!==d?d:"round",e=e?e.slice():ah,f=void 0!==f?f:"round",g=void 0!==g?g:1,c=void 0!==c?c:10,b=ad(b?b:bh);if(this.f){var h=this.f;h.lineCap=d,h.lineDash=e,h.lineJoin=f,h.lineWidth=g,h.miterLimit=c,h.strokeStyle=b}else this.f={lineCap:d,lineDash:e,lineJoin:f,lineWidth:g,miterLimit:c,strokeStyle:b}}else this.f=null;var k=a.a,b=a.c,d=a.b,e=a.g,g=a.f,c=a.s,f=a.j,h=a.l;a=void 0!==k?k:"10px sans-serif",f=void 0!==f?f:"center",h=void 0!==h?h:"middle",this.h?(k=this.h,k.font=a,k.textAlign=f,k.textBaseline=h):this.h={font:a,textAlign:f,textBaseline:h},this.s=void 0!==c?c:"",this.j=void 0!==b?b:0,this.l=void 0!==d?d:0,this.o=void 0!==e?e:0,this.T=void 0!==g?g:1}else this.s=""},Vh.prototype.xa=function(a,b,c,d,e){var f=this.g;mf(f,.5,.5,1/b,-1/b,-c,-a[0],-a[1]);var g=this.i;g.clearRect(0,0,1,1);var h;return void 0!==this.b&&(h=hb(),ib(h,a),jb(h,b*this.b,h)),Xh(this,g,f,c,d,function(a){if(0<g.getImageData(0,0,1,1).data[3]){if(a=e(a))return a;g.clearRect(0,0,1,1)}},h)},Vh.prototype.A=function(a,b,c,d,e,f){var g=Object.keys(this.a).map(Number);g.sort(Oa);var h=this.c,k=h[0],l=h[1],n=h[2],h=h[3],k=[k,l,k,h,n,h,n,l];ec(k,0,8,2,c,k),a.save(),a.beginPath(),a.moveTo(k[0],k[1]),a.lineTo(k[2],k[3]),a.lineTo(k[4],k[5]),a.lineTo(k[6],k[7]),a.closePath(),a.clip(),f=f?f:Fh;for(var p,q,k=0,l=g.length;l>k;++k)for(p=this.a[g[k].toString()],n=0,h=f.length;h>n;++n)q=p[f[n]],void 0!==q&&q.A(a,b,c,d,e);a.restore()};var di,Zh={Image:Mh,LineString:Nh,Polygon:Qh,Text:Th},ci={Point:function(a,b,c,d){var e=c.da();if(e){if(2!=e.nb())return;var f=Yh(a,c.a,"Image");f.gc(e),f.Dc(b,d)}(e=c.c)&&(a=Yh(a,c.a,"Text"),a.ya(e),Uh(a,b.a,2,2,d))},LineString:function(a,b,c,d){var e=c.i;if(e){var f=Yh(a,c.a,"LineString");f.Ea(null,e),f.zc(b,d)}(e=c.c)&&(a=Yh(a,c.a,"Text"),a.ya(e),Uh(a,yh(b),2,2,d))},Polygon:function(a,b,c,d){var e=c.g,f=c.i;if(e||f){var g=Yh(a,c.a,"Polygon");g.Ea(e,f),g.Ec(b,d)}(e=c.c)&&(a=Yh(a,c.a,"Text"),a.ya(e),Uh(a,Bc(b),2,2,d))},MultiPoint:function(a,b,c,d){var e=c.da();if(e){if(2!=e.nb())return;var f=Yh(a,c.a,"Image");f.gc(e),f.Bc(b,d)}(e=c.c)&&(a=Yh(a,c.a,"Text"),a.ya(e),c=b.a,Uh(a,c,c.length,b.u,d))},MultiLineString:function(a,b,c,d){var e=c.i;if(e){var f=Yh(a,c.a,"LineString");f.Ea(null,e),f.Ac(b,d)}(e=c.c)&&(a=Yh(a,c.a,"Text"),a.ya(e),b=zh(b),Uh(a,b,b.length,2,d))},MultiPolygon:function(a,b,c,d){var e=c.g,f=c.i;if(f||e){var g=Yh(a,c.a,"Polygon");g.Ea(e,f),g.Cc(b,d)}(e=c.c)&&(a=Yh(a,c.a,"Text"),a.ya(e),b=Bh(b),Uh(a,b,b.length,2,d))},GeometryCollection:function(a,b,c,d){b=b.g;var e,f;for(e=0,f=b.length;f>e;++e)ci[b[e].K()](a,b[e],c,d)},Circle:function(a,b,c,d){var e=c.g,f=c.i;if(e||f){var g=Yh(a,c.a,"Polygon");g.Ea(e,f),g.xc(b,d)}(e=c.c)&&(a=Yh(a,c.a,"Text"),a.ya(e),Uh(a,b.Vb(),2,2,d))}},ei=E.navigator,fi=E.chrome,gi=-1<ei.userAgent.indexOf("OPR"),hi=-1<ei.userAgent.indexOf("Edge");di=!(!ei.userAgent.match("CriOS")&&null!==fi&&void 0!==fi&&"Google Inc."===ei.vendor&&0==gi&&0==hi),C(U,R),m=U.prototype,m.clone=function(){var a=new U(this.va());oi(a,this.a);var b=this.N();return b&&ni(a,b.clone()),(b=this.h)&&a.Qc(b),a},m.N=function(){return this.get(this.a)},m.sa=function(){return this.g},m.ee=function(){return this.a},m.se=function(){this.c()},m.jb=function(){this.b&&(F(this.b),this.b=null);var a=this.N();a&&(this.b=I(a,"change",this.se,this)),this.c()},m.Qc=function(a){this.f=(this.h=a)?pi(a):void 0,this.c()},m.tb=function(a){this.g=a,this.c()};var Fi,qi=document.implementation.createDocument("","",null),zi=yi();!function(){var a={},b={wa:a};!function(c){if("object"==typeof a&&"undefined"!=typeof b)b.wa=c();else{var d;d="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,d.Bg=c()}}(function(){return function d(a,b,g){function h(l,p){if(!b[l]){if(!a[l]){var q="function"==typeof require&&require;if(!p&&q)return q(l,!0);if(k)return k(l,!0);throw q=Error("Cannot find module '"+l+"'"),q.code="MODULE_NOT_FOUND",q}q=b[l]={wa:{}},a[l][0].call(q.wa,function(b){var d=a[l][1][b];return h(d?d:b)},q,q.wa,d,a,b,g)}return b[l].wa}for(var k="function"==typeof require&&require,l=0;l<g.length;l++)h(g[l]);return h}({1:[function(a,b){function f(a,b){return this instanceof f?(this.Cb=Math.max(4,a||9),this.oc=Math.max(2,Math.ceil(.4*this.Cb)),b&&this.Ud(b),void this.clear()):new f(a,b)}function g(a,b){h(a,0,a.children.length,b,a)}function h(a,b,d,e,f){f||(f=x(null)),f.G=1/0,f.I=1/0,f.H=-(1/0),f.J=-(1/0);for(var g;d>b;b++)g=a.children[b],k(f,a.ea?e(g):g);return f}function k(a,b){a.G=Math.min(a.G,b.G),a.I=Math.min(a.I,b.I),a.H=Math.max(a.H,b.H),a.J=Math.max(a.J,b.J)}function l(a,b){return a.G-b.G}function n(a,b){return a.I-b.I}function p(a){return(a.H-a.G)*(a.J-a.I)}function q(a){return a.H-a.G+(a.J-a.I)}function t(a,b){return a.G<=b.G&&a.I<=b.I&&b.H<=a.H&&b.J<=a.J}function u(a,b){return b.G<=a.H&&b.I<=a.J&&b.H>=a.G&&b.J>=a.I}function x(a){return{children:a,height:1,ea:!0,G:1/0,I:1/0,H:-(1/0),J:-(1/0)}}function r(a,b,d,e,f){for(var h,g=[b,d];g.length;)d=g.pop(),b=g.pop(),e>=d-b||(h=b+Math.ceil((d-b)/e/2)*e,B(a,h,b,d,f),g.push(b,h,h,d))}b.wa=f;var B=a("quickselect");f.prototype={all:function(){return this.kc(this.data,[])},search:function(a){var b=this.data,d=[],e=this.ga;if(!u(a,b))return d;for(var g,h,k,l,f=[];b;){for(g=0,h=b.children.length;h>g;g++)k=b.children[g],l=b.ea?e(k):k,u(a,l)&&(b.ea?d.push(k):t(a,l)?this.kc(k,d):f.push(k));b=f.pop()}return d},load:function(a){if(!a||!a.length)return this;if(a.length<this.oc){for(var b=0,d=a.length;d>b;b++)this.ba(a[b]);return this}return a=this.mc(a.slice(),0,a.length-1,0),this.data.children.length?this.data.height===a.height?this.pc(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.nc(a,this.data.height-a.height-1,!0)):this.data=a,this},ba:function(a){return a&&this.nc(a,this.data.height-1),this},clear:function(){return this.data=x([]),this},remove:function(a,b){if(!a)return this;for(var h,k,l,n,d=this.data,e=this.ga(a),f=[],g=[];d||f.length;){if(d||(d=f.pop(),k=f[f.length-1],h=g.pop(),n=!0),d.ea){a:{l=a;var p=d.children,q=b;if(q){for(var r=0;r<p.length;r++)if(q(l,p[r])){l=r;break a}l=-1}else l=p.indexOf(l)}if(-1!==l){d.children.splice(l,1),f.push(d),this.Td(f);break}}n||d.ea||!t(d,e)?k?(h++,d=k.children[h],n=!1):d=null:(f.push(d),g.push(h),h=0,k=d,d=d.children[0])}return this},ga:function(a){return a},Gb:l,Hb:n,toJSON:function(){return this.data},kc:function(a,b){for(var d=[];a;)a.ea?b.push.apply(b,a.children):d.push.apply(d,a.children),a=d.pop();return b},mc:function(a,b,d,e){var k,f=d-b+1,h=this.Cb;if(h>=f)return k=x(a.slice(b,d+1)),g(k,this.ga),k;e||(e=Math.ceil(Math.log(f)/Math.log(h)),h=Math.ceil(f/Math.pow(h,e-1))),k=x([]),k.ea=!1,k.height=e;var l,n,p,f=Math.ceil(f/h),h=f*Math.ceil(Math.sqrt(h));for(r(a,b,d,h,this.Gb);d>=b;b+=h)for(n=Math.min(b+h-1,d),r(a,b,n,f,this.Hb),l=b;n>=l;l+=f)p=Math.min(l+f-1,n),k.children.push(this.mc(a,l,p,e-1));return g(k,this.ga),k},Sd:function(a,b,d,e){for(var f,g,h,k,l,n,q,r;e.push(b),!b.ea&&e.length-1!==d;){for(q=r=1/0,f=0,g=b.children.length;g>f;f++)h=b.children[f],l=p(h),n=(Math.max(h.H,a.H)-Math.min(h.G,a.G))*(Math.max(h.J,a.J)-Math.min(h.I,a.I))-l,r>n?(r=n,q=q>l?l:q,k=h):n===r&&q>l&&(q=l,k=h);b=k||b.children[0]}return b},nc:function(a,b,d){var e=this.ga;d=d?a:e(a);var e=[],f=this.Sd(d,this.data,b,e);for(f.children.push(a),k(f,d);b>=0&&e[b].children.length>this.Cb;)this.Vd(e,b),b--;this.Pd(d,e,b)},Vd:function(a,b){var d=a[b],e=d.children.length,f=this.oc;this.Qd(d,f,e),e=this.Rd(d,f,e),e=x(d.children.splice(e,d.children.length-e)),e.height=d.height,e.ea=d.ea,g(d,this.ga),g(e,this.ga),b?a[b-1].children.push(e):this.pc(d,e)},pc:function(a,b){this.data=x([a,b]),this.data.height=a.height+1,this.data.ea=!1,g(this.data,this.ga)},Rd:function(a,b,d){var e,f,g,k,l,n,q;for(l=n=1/0,e=b;d-b>=e;e++)f=h(a,0,e,this.ga),g=h(a,e,d,this.ga),k=Math.max(0,Math.min(f.H,g.H)-Math.max(f.G,g.G))*Math.max(0,Math.min(f.J,g.J)-Math.max(f.I,g.I)),f=p(f)+p(g),l>k?(l=k,q=e,n=n>f?f:n):k===l&&n>f&&(n=f,q=e);return q},Qd:function(a,b,d){var e=a.ea?this.Gb:l,f=a.ea?this.Hb:n,g=this.lc(a,b,d,e);b=this.lc(a,b,d,f),b>g&&a.children.sort(e)},lc:function(a,b,d,e){a.children.sort(e),e=this.ga;var n,p,f=h(a,0,b,e),g=h(a,d-b,d,e),l=q(f)+q(g);for(n=b;d-b>n;n++)p=a.children[n],k(f,a.ea?e(p):p),l+=q(f);for(n=d-b-1;n>=b;n--)p=a.children[n],k(g,a.ea?e(p):p),l+=q(g);return l},Pd:function(a,b,d){for(;d>=0;d--)k(b[d],a)},Td:function(a){for(var d,b=a.length-1;b>=0;b--)0===a[b].children.length?b>0?(d=a[b-1].children,
d.splice(d.indexOf(a[b]),1)):this.clear():g(a[b],this.ga)},Ud:function(a){var b=["return a"," - b",";"];this.Gb=new Function("a","b",b.join(a[0])),this.Hb=new Function("a","b",b.join(a[1])),this.ga=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}}},{quickselect:2}],2:[function(a,b){function f(a,b,d,e,q){for(d=d||0,e=e||a.length-1,q=q||h;e>d;){if(e-d>600){var t=e-d+1,u=b-d+1,x=Math.log(t),r=.5*Math.exp(2*x/3),x=.5*Math.sqrt(x*r*(t-r)/t)*(0>u-t/2?-1:1);f(a,b,Math.max(d,Math.floor(b-u*r/t+x)),Math.min(e,Math.floor(b+(t-u)*r/t+x)),q)}for(t=a[b],u=d,r=e,g(a,d,b),0<q(a[e],t)&&g(a,d,e);r>u;){for(g(a,u,r),u++,r--;0>q(a[u],t);)u++;for(;0<q(a[r],t);)r--}0===q(a[d],t)?g(a,d,r):(r++,g(a,r,e)),b>=r&&(d=r+1),r>=b&&(e=r-1)}}function g(a,b,d){var e=a[b];a[b]=a[d],a[d]=e}function h(a,b){return b>a?-1:a>b?1:0}b.wa=f},{}]},{},[1])(1)}),Fi=b.wa}(),m=Gi.prototype,m.ba=function(a,b){var c={G:a[0],I:a[1],H:a[2],J:a[3],value:b};this.a.ba(c),this.c[y(b)]=c},m.load=function(a,b){for(var c=Array(b.length),d=0,e=b.length;e>d;d++){var f=a[d],g=b[d],f={G:f[0],I:f[1],H:f[2],J:f[3],value:g};c[d]=f,this.c[y(g)]=f}this.a.load(c)},m.remove=function(a){a=y(a);var b=this.c[a];return delete this.c[a],null!==this.a.remove(b)},m.forEach=function(a,b){return Ki(Ii(this),a,b)},m.clear=function(){this.a.clear(),this.c={}},m.D=function(){var a=this.a.data;return[a.G,a.I,a.H,a.J]},C(Mi,ud),m=Mi.prototype,m.fb=function(a){var b=y(a).toString();if(Pi(this,b,a)){Qi(this,b,a);var c=a.N();c?(b=c.D(),this.a&&this.a.ba(b,a)):this.b[b]=a,O(this,new Ri("addfeature",a))}this.c()},m.Ra=function(a){Ni(this,a),this.c()},m.clear=function(a){if(a){for(var b in this.l)this.l[b].forEach(F);this.g||(this.l={},this.h={},this.j={})}else if(this.a){this.a.forEach(this.fc,this);for(var c in this.b)this.fc(this.b[c])}this.g&&this.g.clear(),this.a&&this.a.clear(),this.B.clear(),this.b={},O(this,new Ri("clear")),this.c()},m.Vc=function(){var a;return this.g?a=this.g.a:this.a&&(a=Ii(this.a),ua(this.b)||Ra(a,ta(this.b))),a},m.D=function(){return this.a.D()},m.pf=function(){return this.V},m.Wc=function(a){a=a.target;var b=y(a).toString(),c=a.N();c?(c=c.D(),b in this.b?(delete this.b[b],this.a&&this.a.ba(c,a)):this.a&&Hi(this.a,c,a)):b in this.b||(this.a&&this.a.remove(a),this.b[b]=a),c=a.sa(),void 0!==c?(c=c.toString(),b in this.j?(delete this.j[b],this.h[c]=a):this.h[c]!==a&&(Ti(this,a),this.h[c]=a)):b in this.j||(Ti(this,a),this.j[b]=a),this.c(),O(this,new Ri("changefeature",a))},m.Sb=function(a,b,c){var d=this.B;a=this.qa(a,b);var e,f;for(e=0,f=a.length;f>e;++e){var g=a[e];Li(d,g,function(a){return lb(a.extent,g)})||(this.C.call(this,g,b,c),d.ba(g,{extent:g.slice()}))}},m.bb=function(a){var b=y(a).toString();b in this.b?delete this.b[b]:this.a&&this.a.remove(a),this.fc(a),this.c()},m.fc=function(a){var b=y(a).toString();this.l[b].forEach(F),delete this.l[b];var c=a.sa();void 0!==c?delete this.h[c.toString()]:delete this.j[b],O(this,new Ri("removefeature",a))},C(Ri,Fa),C(Gf,Ch),Gf.prototype.f=function(a,b,c){var d=Eh(this,a,0);Dh(this,"precompose",c,a,d);var B,z,v,D,e=a.pixelRatio,f=a.viewState,g=f.center,h=f.projection,k=f.resolution,f=f.rotation,l=a.size,n=Math.round(e*l[0]/2),p=Math.round(e*l[1]/2),l=e/k,q=this.a,t=q.Z(),u=t.Hc(h),x=t.na(h),q=Ia(q,"render"),r=c;(f||q)&&(r=this.b,B=r.canvas,D=Hd(x,k),v=Qd(t,D,e,h),D=td(Gd(x,D)),v=v[0]/D[0],k=c.canvas.width*v,z=c.canvas.height*v,D=Math.round(Math.sqrt(k*k+z*z)),B.width!=D?B.width=B.height=D:r.clearRect(0,0,D,D),B=(D-k)/2/v,z=(D-z)/2/v,l*=v,n=Math.round(v*(n+B)),p=Math.round(v*(p+z))),k=r.globalAlpha,r.globalAlpha=b.opacity;var N,M=this.g,G=t.Nb(h)&&1==b.opacity;G||(M.reverse(),N=[]);var H=b.extent;if(b=void 0!==H){var A=Bb(H),K=[H[2],H[3]],Q=[H[2],H[1]],H=wb(H);nf(a.coordinateToPixelMatrix,A,A),nf(a.coordinateToPixelMatrix,K,K),nf(a.coordinateToPixelMatrix,Q,Q),nf(a.coordinateToPixelMatrix,H,H);var L=B||0,P=z||0;r.save();var J=r.canvas.width*e/2,va=r.canvas.height*e/2;ch(r,-f,J,va),r.beginPath(),r.moveTo(A[0]*e+L,A[1]*e+P),r.lineTo(K[0]*e+L,K[1]*e+P),r.lineTo(Q[0]*e+L,Q[1]*e+P),r.lineTo(H[0]*e+L,H[1]*e+P),r.clip(),ch(r,f,J,va)}for(A=0,K=M.length;K>A;++A){var Q=M[A],H=Q.pa,va=Ad(x,H,this.o),J=H[0],sa=wb(Ad(x,Id(x,g,J,this.w))),H=Math.round(ub(va)*l),L=Math.round(vb(va)*l),P=Math.round((va[0]-sa[0])*l/H)*H+n+Math.round((sa[0]-g[0])*l),va=Math.round((sa[1]-va[3])*l/L)*L+p+Math.round((g[1]-sa[1])*l);if(!G){sa=[P,va,P+H,va+L],r.save();for(var Yf=0,Tk=N.length;Tk>Yf;++Yf){var qb=N[Yf];Ab(sa,qb)&&(r.beginPath(),r.moveTo(sa[0],sa[1]),r.lineTo(sa[0],sa[3]),r.lineTo(sa[2],sa[3]),r.lineTo(sa[2],sa[1]),r.moveTo(qb[0],qb[1]),r.lineTo(qb[2],qb[1]),r.lineTo(qb[2],qb[3]),r.lineTo(qb[0],qb[3]),r.closePath(),r.clip())}N.push(sa)}J=Qd(t,J,e,h),r.drawImage(Q.da(),u,u,J[0],J[1],P,va,H,L),G||r.restore()}b&&r.restore(),q&&(e=B-n/v+n,h=z-p/v+p,g=mf(this.h,D/2-e,D/2-h,l,-l,-f,-g[0]+e/l,-g[1]-h/l),Dh(this,"render",r,a,g)),(f||q)&&c.drawImage(r.canvas,-Math.round(B),-Math.round(z),D/v,D/v),r.globalAlpha=k,Dh(this,"postcompose",c,a,d)},Gf.prototype.l=function(a,b){function c(a){return a=a.aa(),2==a||4==a||3==a&&!t}var d=a.pixelRatio,e=a.viewState,f=e.projection,g=this.a,h=g.Z(),k=h.na(f),l=Hd(k,e.resolution,0),n=k.R(l),p=e.center;if(n==e.resolution?(p=uf(p,n,a.size),e=yb(p,n,e.rotation,a.size)):e=a.extent,void 0!==b.extent&&(e=zb(e,b.extent)),e[2]<e[0]||e[3]<e[1])return!1;n=Dd(k,e,n),p={},p[l]={};var r,B,z,v,q=pf(h,f,p),t=g.get("useInterimTilesOnError"),u=hb(),x=new Oc(0,0,0,0);for(z=n.G;z<=n.H;++z)for(v=n.I;v<=n.J;++v)r=wf(h,l,z,v,d,f),!c(r)&&r.a&&(r=r.a),c(r)?p[l][r.pa.toString()]=r:(B=zd(k,r.pa,q,x,u),B||(r=Cd(k,r.pa,x,u))&&q(l+1,r));q=Object.keys(p).map(Number),q.sort(Oa);var D,u=[],x=0;for(z=q.length;z>x;++x)for(D in r=q[x],v=p[r])r=v[D],2==r.aa()&&u.push(r);return this.g=u,tf(a.usedTiles,h,l,n),vf(a,h,k,d,f,e,l,g.get("preload")),qf(a,h),sf(a,h),!0},Gf.prototype.j=function(a,b,c,d){var e=this.b.canvas,f=b.size;return e.width=f[0],e.height=f[1],this.f(b,hf(this.a),this.b),0<this.b.getImageData(a[0],a[1],1,1).data[3]?c.call(d,this.a):void 0},C(If,Ch),If.prototype.f=function(a,b,c){var d=a.extent,e=a.pixelRatio,f=b.Tb?a.skippedFeatureUids:{},g=a.viewState,h=g.projection,g=g.rotation,k=h.D(),l=this.a.Z(),n=Eh(this,a,0);Dh(this,"precompose",c,a,n);var p=this.g;if(p&&!ua(p.a)){var q;Ia(this.a,"render")?(this.h.canvas.width=c.canvas.width,this.h.canvas.height=c.canvas.height,q=this.h):q=c;var t=q.globalAlpha;q.globalAlpha=b.opacity,b=a.size[0]*e;var u=a.size[1]*e;if(ch(q,-g,b/2,u/2),p.A(q,e,n,g,f),l.A&&h.c&&!lb(k,d)){for(var h=d[0],l=ub(k),x=0;h<k[0];)--x,n=l*x,n=Eh(this,a,n),p.A(q,e,n,g,f),h+=l;for(x=0,h=d[2];h>k[2];)++x,n=l*x,n=Eh(this,a,n),p.A(q,e,n,g,f),h-=l;n=Eh(this,a,0)}ch(q,g,b/2,u/2),q!=c&&(Dh(this,"render",q,a,n),c.drawImage(q.canvas,0,0)),q.globalAlpha=t}Dh(this,"postcompose",c,a,n)},If.prototype.xa=function(a,b,c,d){if(this.g){var e=this.a,f={};return this.g.xa(a,b.viewState.resolution,b.viewState.rotation,{},function(a){var b=y(a).toString();return b in f?void 0:(f[b]=!0,c.call(d,a,e))})}},If.prototype.A=function(){var a=this.a;a.b()&&"ready"==a.Pb()&&this.c()},If.prototype.l=function(a){function b(a){var b,d=a.f;if(d?b=d.call(a,l):(d=c.j)&&(b=d(a,l)),b){if(b){if(d=!1,Array.isArray(b))for(var e=0,f=b.length;f>e;++e)d=bi(q,a,b[e],ai(l,n),this.A,this)||d;else d=bi(q,a,b,ai(l,n),this.A,this)||d;a=d}else a=!1;this.b=this.b||a}}var c=this.a,d=c.Z();rf(a.attributions,d.X),sf(a,d);var e=a.viewHints[0],f=a.viewHints[1],g=c.v,h=c.A;if(!this.b&&!g&&e||!h&&f)return!0;var k=a.extent,h=a.viewState,e=h.projection,l=h.resolution,n=a.pixelRatio,f=c.i,p=c.h,g=c.get("renderOrder");if(void 0===g&&(g=$h),k=jb(k,p*l),p=h.projection.D(),d.A&&h.projection.c&&!lb(p,a.extent)&&(a=Math.max(ub(k)/2,ub(p)),k[0]=p[0]-a,k[2]=p[2]+a),!this.b&&this.P==l&&this.v==f&&this.w==g&&lb(this.o,k))return!0;this.g=null,this.b=!1;var q=new Vh(.5*l/n,k,l,c.h);if(d.Sb(k,l,e),g){var t=[];Si(d,k,function(a){t.push(a)},this),t.sort(g),t.forEach(b,this)}else Si(d,k,b,this);return Wh(q),this.P=l,this.v=f,this.w=g,this.o=k,this.g=q,!0},C(Zi,Nd),Zi.prototype.L=function(a){switch(a=a.target,a.aa()){case 1:O(this,new Sd("tileloadstart",a));break;case 2:O(this,new Sd("tileloadend",a));break;case 3:O(this,new Sd("tileloaderror",a))}},Zi.prototype.od=function(a,b,c){a=this.Ha(a,b,c),this.a.b.hasOwnProperty(a)&&this.a.get(a)},C(aj,Cf),aj.prototype.K=function(){return"canvas"},aj.prototype.ed=function(a){if(a){var b=this.g,c=a.pixelRatio,d=Math.round(a.size[0]*c),c=Math.round(a.size[1]*c);this.a.width!=d||this.a.height!=c?(this.a.width=d,this.a.height=c):b.clearRect(0,0,d,c);var e=a.viewState.rotation,f=a.viewState,g=a.coordinateToPixelMatrix;mf(g,a.size[0]/2,a.size[1]/2,1/f.resolution,-1/f.resolution,-f.rotation,-f.center[0],-f.center[1]),cc(g,a.pixelToCoordinateMatrix),bj(this,"precompose",a),f=a.layerStatesArray,Ua(f),ch(b,e,d/2,c/2);var h,k,l,n,g=a.viewState.resolution;for(h=0,k=f.length;k>h;++h)n=f[h],l=n.layer,l=Ef(this,l),n.visible&&g>=n.minResolution&&g<n.maxResolution&&"ready"==n.Zf&&l.l(a,n)&&l.f(a,n,b);ch(b,-e,d/2,c/2),bj(this,"postcompose",a),this.b||(this.a.style.display="",this.b=!0);for(var p in this.c)if(!(p in a.layerStates)){a.postRenderFunctions.push(this.Uf.bind(this));break}a.postRenderFunctions.push(Df)}else this.b&&(this.a.style.display="none",this.b=!1)};var cj=["canvas","webgl","dom"];C(X,R),m=X.prototype,m.Wd=function(a){this.f.push(a)},m.Xd=function(a){this.h.push(a)},m.qc=function(a){var b=a.sa();void 0!==b&&(this.Zc[b.toString()]=a),a.setMap(this)},m.ka=function(a){this.render(),Array.prototype.push.apply(this.A,arguments)},m.Y=function(){Ea(this.ca),Ea(this.C),Ca(this.a,"wheel",this.Ja,this),Ca(this.a,"mousewheel",this.Ja,this),void 0!==this.g&&(E.removeEventListener("resize",this.g,!1),this.g=void 0),this.j&&(E.cancelAnimationFrame(this.j),this.j=void 0),this.set("target",null),R.prototype.Y.call(this)},m.Ib=function(a,b,c,d,e){return this.b?(a=this.ra(a),this.C.xa(a,this.b,b,void 0!==c?c:null,void 0!==d?d:Cb,void 0!==e?e:null)):void 0},m.jf=function(a,b,c,d,e){if(this.b){a:{var f=this.C,g=this.b;c=void 0!==c?c:null,d=void 0!==d?d:Cb,e=void 0!==e?e:null;var h,n,k=g.viewState.resolution,l=g.layerStatesArray;for(n=l.length-1;n>=0;--n){h=l[n];var p=h.layer;if(h.visible&&k>=h.minResolution&&k<h.maxResolution&&d.call(e,p)&&(h=Ef(f,p).j(a,g,b,c))){a=h;break a}}a=void 0}return a}},m.Ub=function(){return this.get("target")},m.ra=function(a){var b=this.b;return b?(a=a.slice(),nf(b.pixelToCoordinateMatrix,a,a)):null},m.je=function(){return this.h},m.Ma=function(){return this.get("size")},m.S=function(){return this.get("view")},m.me=function(a,b,c,d){var e=this.b;return e&&b in e.wantedTiles&&e.wantedTiles[b][a.pa.toString()]?(a=c[0]-e.focus[0],c=c[1]-e.focus[1],65536*Math.log(d)+Math.sqrt(a*a+c*c)/d):1/0},m.Ja=function(a,b){var c=new Te(b||a.type,this,a);this.Kc(c)},m.Kc=function(a){if(this.b){this.X=a.coordinate,a.frameState=this.b;var c,b=this.f.a;if(!1!==O(this,a))for(c=b.length-1;c>=0;c--){var d=b[c];if(d.get("active")&&!d.handleEvent(a))break}}},m.Fe=function(){var a=this.b,b=this.ja;if(0!==b.a.length){var c=16,d=c;if(a){var e=a.viewHints;e[0]&&(c=this.Ab?8:0,d=2),e[1]&&(c=this.Bb?8:0,d=2)}if(b.g<c){var l,n,p,e=b.j,f=b.a,g=b.c,h=0,k=f.length;for(n=0;k>n;++n)l=f[n],p=e(l),1/0==p?delete b.b[b.f(l)]:(g[h]=p,f[h++]=l);for(f.length=h,g.length=h,e=(b.a.length>>1)-1;e>=0;e--)Lf(b,e);for(e=0;b.g<c&&d>e&&0<b.a.length;)f=b,h=f.a,k=f.c,g=h[0],1==h.length?(h.length=0,k.length=0):(h[0]=h.pop(),k[0]=k.pop(),Lf(f,0)),h=f.f(g),delete f.b[h],f=g[0],g=f.getKey(),0!==f.aa()||g in b.i||(b.i[g]=!0,++b.g,++e,f.load())}}for(b=this.fa,d=0,c=b.length;c>d;++d)b[d](this,a);b.length=0},m.He=function(){this.render()},m.Je=function(){var a;if(this.Ub()&&(a=ej(this)),this.l){for(var b=0,c=this.l.length;c>b;++b)F(this.l[b]);this.l=null}a?(a.appendChild(this.a),a=this.$?this.$:a,this.l=[I(a,"keydown",this.Ja,this),I(a,"keypress",this.Ja,this)],this.g||(this.g=this.nd.bind(this),E.addEventListener("resize",this.g,!1))):(jd(this.a),void 0!==this.g&&(E.removeEventListener("resize",this.g,!1),this.g=void 0)),this.nd()},m.Ke=function(){this.render()},m.Ne=function(){this.render()},m.Me=function(){this.B&&(F(this.B),this.B=null);var a=this.S();a&&(this.B=I(a,"propertychange",this.Ne,this)),this.render()},m.ue=function(){this.render()},m.ve=function(){this.render()},m.te=function(){this.v&&(this.v.forEach(F),this.v=null);var a=this.get("layergroup");a&&(this.v=[I(a,"propertychange",this.ve,this),I(a,"change",this.ue,this)]),this.render()},m.render=function(){void 0===this.j&&(this.j=E.requestAnimationFrame(this.qa))},m.Sf=function(a){return this.f.remove(a)},m.Tf=function(a){return this.h.remove(a)},m.Vf=function(a){var b,c,d,e=this.Ma(),f=this.S(),g=hb(),h=null;if((b=void 0!==e&&0<e[0]&&0<e[1]&&f)&&(b=!!f.la()&&void 0!==f.R()),b){var h=Dc(f,this.b?this.b.viewHints:void 0),k=this.get("layergroup").Mb(),l={};for(b=0,c=k.length;c>b;++b)l[y(k[b].layer)]=k[b];d=f.aa(),h={animate:!1,attributions:{},coordinateToPixelMatrix:this.cb,extent:g,focus:this.X?this.X:d.center,index:this.eb++,layerStates:l,layerStatesArray:k,logos:qa({},this.yb),pixelRatio:this.Db,pixelToCoordinateMatrix:this.Eb,postRenderFunctions:[],size:e,skippedFeatureUids:this.V,tileQueue:this.ja,time:a,usedTiles:{},viewState:d,viewHints:h,wantedTiles:{}}}if(h){for(a=this.A,b=e=0,c=a.length;c>b;++b)f=a[b],f(this,h)&&(a[e++]=f);a.length=e,h.extent=yb(d.center,d.resolution,d.rotation,h.size,g)}this.b=h,this.C.ed(h),h&&(h.animate&&this.render(),Array.prototype.push.apply(this.fa,h.postRenderFunctions),0!==this.A.length||h.viewHints[0]||h.viewHints[1]||pb(h.extent,this.ia)||(O(this,new kd("moveend",this,h)),kb(h.extent,this.ia))),O(this,new kd("postrender",this,h)),g=d=this.Fe,this&&(g=ia(d,this)),"function"!=ba(aa.setImmediate)||aa.Window&&aa.Window.prototype&&-1==ed.indexOf("Edge")&&aa.Window.prototype.setImmediate==aa.setImmediate?($d||($d=ae()),$d(g)):aa.setImmediate(g)},m.hd=function(a){a=y(a).toString(),this.V[a]=!0,this.render()},m.nd=function(){var a=ej(this);if(a){var b=E.getComputedStyle(a);this.set("size",[a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)])}else this.set("size",void 0)},m.md=function(a){a=y(a).toString(),delete this.V[a],this.render()},Lb(Sg),Lb(Zg),Zg.forEach(function(a){Sg.forEach(function(b){Mb(a,b,Tg),Mb(b,a,Ug)})}),C(fj,R),m=fj.prototype,m.sa=function(){return this.l},m.pe=function(){for(var a=this.b;a.lastChild;)a.removeChild(a.lastChild);(a=this.get("element"))&&this.b.appendChild(a)},m.Ae=function(){this.g&&(jd(this.b),F(this.g),this.g=null);var a=this.get("map");a&&(this.g=I(a,"postrender",this.render,this),gj(this),a=this.o?a.o:a.w,this.j?a.insertBefore(this.b,a.childNodes[0]||null):a.appendChild(this.b))},m.render=function(){gj(this)},m.Be=function(){gj(this)},m.De=function(){if(gj(this),void 0!==this.get("position")&&this.autoPan){var a=this.get("map");if(void 0!==a&&ej(a)){var b=hj(ej(a),a.Ma()),c=this.get("element"),d=c.offsetWidth,e=c.currentStyle||E.getComputedStyle(c),d=d+(parseInt(e.marginLeft,10)+parseInt(e.marginRight,10)),e=c.offsetHeight,f=c.currentStyle||E.getComputedStyle(c),e=e+(parseInt(f.marginTop,10)+parseInt(f.marginBottom,10)),g=hj(c,[d,e]),c=this.h;lb(b,g)||(d=g[0]-b[0],e=b[2]-g[2],f=g[1]-b[1],g=b[3]-g[3],b=[0,0],0>d?b[0]=d-c:0>e&&(b[0]=Math.abs(e)+c),0>f?b[1]=f-c:0>g&&(b[1]=Math.abs(g)+c),0===b[0]&&0===b[1])||(c=a.S().la(),d=kg(a,c),b=[d[0]+b[0],d[1]+b[1]],this.f&&(this.f.source=c,a.ka(Lc(this.f))),a.S().ta(a.ra(b)))}}},m.Ee=function(){gj(this)},m.setMap=function(a){this.set("map",a)},m.Rc=function(a){this.set("position",a)},C(jj,ld);var lj=[1,2,5];jj.prototype.$a=function(){return this.get("units")},jj.prototype.v=function(){mj(this)},C(rj,nj),rj.prototype.K=function(){return"json"},rj.prototype.$b=function(a,b){return this.a(sj(a),oj(this,a,b))},rj.prototype.Ca=function(a,b){return this.b(sj(a),oj(this,a,b))},rj.prototype.qb=function(a){return this.i(sj(a))},C(Y,fc),m=Y.prototype,m.Yd=function(a){this.a?Ra(this.a,a):this.a=a.slice(),this.c()},m.clone=function(){var a=new Y(null);return vj(a,this.b,this.a.slice()),a},m.Sc=function(a,b){return"XYM"!=this.b&&"XYZM"!=this.b?null:uj(this.a,this.a.length,this.u,a,void 0!==b?b:!1)},m.M=function(){return mc(this.a,0,this.a.length,this.u)},m.Gc=function(a,b){return tj(this.a,0,this.a.length,this.u,a,b)},m.Ia=function(a){var b=[];return b.length=oc(this.a,0,this.a.length,this.u,a,b,0),a=new Y(null),vj(a,"XY",b),a},m.K=function(){return"LineString"},m.O=function(a,b){a?(ic(this,b,a,1),this.a||(this.a=[]),this.a.length=kc(this.a,0,a,this.u),this.c()):vj(this,"XY",null)},C(wj,fc),m=wj.prototype,m.clone=function(){var a=new wj(null);return xj(a,this.b,this.a.slice(),this.f.slice()),a},m.M=function(){return nc(this.a,0,this.f,this.u)},m.Ga=function(){return this.f},m.Ia=function(a){var k,l,b=[],c=[],d=this.a,e=this.f,f=this.u,g=0,h=0;for(k=0,l=e.length;l>k;++k){var n=e[k],h=oc(d,g,n,f,a,b,h);c.push(h),g=n}return b.length=h,a=new wj(null),xj(a,"XY",b,c),a},m.K=function(){return"MultiLineString"},m.O=function(a,b){if(a){ic(this,b,a,2),this.a||(this.a=[]);var c=lc(this.a,0,a,this.u,this.f);this.a.length=0===c.length?0:c[c.length-1],this.c()}else xj(this,"XY",null,this.f)},C(zj,fc),zj.prototype.clone=function(){var a=new zj(null);return hc(a,this.b,this.a.slice()),a.c(),a},zj.prototype.M=function(){return mc(this.a,0,this.a.length,this.u)},zj.prototype.K=function(){return"MultiPoint"},zj.prototype.O=function(a,b){a?(ic(this,b,a,1),this.a||(this.a=[]),this.a.length=kc(this.a,0,a,this.u)):hc(this,"XY",null),this.c()},C(Aj,fc),m=Aj.prototype,m.clone=function(){for(var a=new Aj(null),b=this.f.length,c=Array(b),d=0;b>d;++d)c[d]=this.f[d].slice();return Bj(a,this.b,this.a.slice(),c),a},m.M=function(a){var b;void 0!==a?(b=Ah(this).slice(),yc(b,this.f,this.u,a)):b=this.a,a=b,b=this.f;var g,h,c=this.u,d=0,e=[],f=0;for(g=0,h=b.length;h>g;++g){var k=b[g];e[f++]=nc(a,d,k,c,e[f]),d=k[k.length-1]}return e.length=f,e},m.ie=function(){var a=new zj(null),b=Bh(this).slice();return hc(a,"XY",b),a.c(),a},m.Ia=function(a){var b=[],c=[],d=this.a,e=this.f,f=this.u;a=Math.sqrt(a);var k,l,g=0,h=0;for(k=0,l=e.length;l>k;++k){var n=e[k],p=[],h=pc(d,g,n,f,a,b,h,p);c.push(p),g=n[n.length-1]}return b.length=h,d=new Aj(null),Bj(d,"XY",b,c),d},m.K=function(){return"MultiPolygon"},m.O=function(a,b){if(a){ic(this,b,a,3),this.a||(this.a=[]);var h,k,c=this.a,d=this.u,e=this.f,f=0,e=e?e:[],g=0;for(h=0,k=a.length;k>h;++h)f=lc(c,f,a[h],d,e[g]),e[g++]=f,f=f[f.length-1];e.length=g,0===e.length?this.a.length=0:(c=e[e.length-1],this.a.length=0===c.length?0:c[c.length-1]),this.c()}else Bj(this,"XY",null,this.f)},C(Dj,rj);var Fj={Point:function(a){return void 0!==a.m&&void 0!==a.z?new sc([a.x,a.y,a.z,a.m],"XYZM"):void 0!==a.z?new sc([a.x,a.y,a.z],"XYZ"):void 0!==a.m?new sc([a.x,a.y,a.m],"XYM"):new sc([a.x,a.y])},LineString:function(a){return new Y(a.paths[0],Ej(a))},Polygon:function(a){return new T(a.rings,Ej(a))},MultiPoint:function(a){return new zj(a.points,Ej(a))},MultiLineString:function(a){return new wj(a.paths,Ej(a))},MultiPolygon:function(a){return new Aj(a.rings,Ej(a))}};Dj.prototype.a=function(a,b){var c;if(c=a.geometry){var d;if(ca(c.x)&&ca(c.y))d="Point";else if(c.points)d="MultiPoint";else if(c.paths)d=1===c.paths.length?"LineString":"MultiLineString";else if(c.rings){var e=c.rings,f=Ej(c),g=[];d=[];var h,k;for(h=0,k=e.length;k>h;++h){var l=Qa(e[h]);vc(l,0,l.length,f.length)?g.push([e[h]]):d.push(e[h])}for(;d.length;){for(e=d.shift(),f=!1,h=g.length-1;h>=0;h--)if(lb(new qc(g[h][0]).D(),new qc(e).D())){g[h].push(e),f=!0;break}f||g.push([e.reverse()])}c=qa({},c),1===g.length?(d="Polygon",c.rings=g[0]):(d="MultiPolygon",c.rings=g)}c=qj(Fj[d](c),!1,b)}else c=null;return g=new U,this.c&&oi(g,this.c),ni(g,c),b&&b.Qb&&a.attributes[b.Qb]&&g.tb(a.attributes[b.Qb]),a.attributes&&La(g,a.attributes),g},Dj.prototype.b=function(a,b){var c=b?b:{};if(a.features){var f,g,d=[],e=a.features;for(c.Qb=a.objectIdFieldName,f=0,g=e.length;g>f;++f)d.push(this.a(e[f],c));return d}return[this.a(a,c)]},Dj.prototype.i=function(a){return a.spatialReference&&a.spatialReference.wkid?S("EPSG:"+a.spatialReference.wkid):null},C(Gj,Yb),m=Gj.prototype,m.clone=function(){var d,e,a=new Gj(null),b=this.g,c=[];for(d=0,e=b.length;e>d;++d)c.push(b[d].clone());return Ij(a),a.g=c,Hj(a),a.c(),a},m.hb=function(a){nb(a);for(var b=this.g,c=0,d=b.length;d>c;++c)rb(a,b[c].D());return a},m.Ob=function(a){if(this.o!=this.i&&(ra(this.h),this.j=0,this.o=this.i),0>a||0!==this.j&&a<this.j)return this;var b=a.toString();if(this.h.hasOwnProperty(b))return this.h[b];var f,g,c=[],d=this.g,e=!1;for(f=0,g=d.length;g>f;++f){var h=d[f],k=h.Ob(a);c.push(k),k!==h&&(e=!0)}return e?(a=new Gj(null),Ij(a),a.g=c,Hj(a),a.c(),this.h[b]=a):(this.j=a,this)},m.K=function(){return"GeometryCollection"},m.rotate=function(a,b){for(var c=this.g,d=0,e=c.length;e>d;++d)c[d].rotate(a,b);this.c()},m.Sa=function(a){var c,d,b=this.g;for(c=0,d=b.length;d>c;++c)b[c].Sa(a);this.c()},m.Y=function(){Ij(this),Yb.prototype.Y.call(this)},C(Jj,rj);var Lj={Point:function(a){return new sc(a.coordinates)},LineString:function(a){return new Y(a.coordinates)},Polygon:function(a){return new T(a.coordinates)},MultiPoint:function(a){return new zj(a.coordinates)},MultiLineString:function(a){return new wj(a.coordinates)},MultiPolygon:function(a){return new Aj(a.coordinates)},GeometryCollection:function(a,b){var c=a.geometries.map(function(a){return Kj(a,b)});return new Gj(c)}};Jj.prototype.a=function(a,b){var c=Kj(a.geometry,b),d=new U;return this.c&&oi(d,this.c),ni(d,c),void 0!==a.id&&d.tb(a.id),a.properties&&La(d,a.properties),d},Jj.prototype.b=function(a,b){if("Feature"==a.type)return[this.a(a,b)];if("FeatureCollection"==a.type){var e,f,c=[],d=a.features;for(e=0,f=d.length;f>e;++e)c.push(this.a(d[e],b));return c}return[]},Jj.prototype.i=function(a){return(a=a.crs)?"name"==a.type?S(a.properties.name):"EPSG"==a.type?S("EPSG:"+a.properties.code):null:this.defaultDataProjection},C(Mj,nj),m=Mj.prototype,m.K=function(){return"xml"},m.$b=function(a,b){if(a instanceof Document)return Nj(this,a,b);if(a instanceof Node)return this.h(a,b);if("string"==typeof a){var c=ui(a);return Nj(this,c,b)}return null},m.Ca=function(a,b){if(a instanceof Document)return Oj(this,a,b);if(a instanceof Node)return this.ac(a,b);if("string"==typeof a){var c=ui(a);return Oj(this,c,b)}return[]},m.qb=function(a){return a instanceof Document?this.ec(a):a instanceof Node?this.rb(a):"string"==typeof a?(a=ui(a),this.ec(a)):null},m.ec=function(){return this.defaultDataProjection},m.rb=function(){return this.defaultDataProjection},C(Pj,Mj);var Qj=/^[\s\xa0]*$/;m=Pj.prototype,m.ob=function(a,b){var c=a.localName,d=null;if("FeatureCollection"==c)d="http://www.opengis.net/wfs"===a.namespaceURI?W([],this.a,a,b,this):W(null,this.a,a,b,this);else if("featureMembers"==c||"featureMember"==c){var h,k,e=b[0],f=e.featureType,g=e.featureNS;if(!f&&a.childNodes){for(f=[],g={},h=0,k=a.childNodes.length;k>h;++h){var l=a.childNodes[h];if(1===l.nodeType){var n=l.nodeName.split(":").pop();if(-1===f.indexOf(n)){var t,p="",q=0,l=l.namespaceURI;for(t in g){if(g[t]===l){p=t;break}++q}p||(p="p"+q,g[p]=l),f.push(p+":"+n)}}}"featureMember"!=c&&(e.featureType=f,e.featureNS=g)}"string"==typeof g&&(h=g,g={},g.p0=h);var u,e={},f=Array.isArray(f)?f:[f];for(u in g){for(n={},h=0,k=f.length;k>h;++h)(-1===f[h].indexOf(":")?"p0":f[h].split(":")[0])===u&&(n[f[h].split(":").pop()]="featureMembers"==c?vi(this.cd,this):wi(this.cd,this));e[g[u]]=n}d="featureMember"==c?W(void 0,e,a,b):W([],e,a,b)}return null===d&&(d=[]),d},m.cd=function(a,b){var c,d;(d=a.getAttribute("fid"))||(d=a.getAttributeNS("http://www.opengis.net/gml","id")||"");var f,e={};for(c=a.firstElementChild;c;c=c.nextElementSibling){var g=c.localName;if(0===c.childNodes.length||1===c.childNodes.length&&(3===c.firstChild.nodeType||4===c.firstChild.nodeType)){var h=si(c);Qj.test(h)&&(h=void 0),e[g]=h}else"boundedBy"!==g&&(f=g),e[g]=Rj(this,c,b)}return c=new U(e),f&&oi(c,f),d&&c.tb(d),c},m.Of=function(a,b){var c=this.pb(a,b);if(c){var d=new sc(null);return hc(d,"XYZ",c),d.c(),d}},m.Kf=function(a,b){var c=W([],this.Fd,a,b,this);return c?new zj(c):void 0},m.Jf=function(a,b){var c=W([],this.Ed,a,b,this);if(c){var d=new wj(null);return yj(d,c),d}},m.Lf=function(a,b){var c=W([],this.Gd,a,b,this);if(c){var d=new Aj(null);return Cj(d,c),d}},m.$c=function(a,b){Ai(this.Jd,a,b,this)},m.Nc=function(a,b){Ai(this.Cd,a,b,this)},m.ad=function(a,b){Ai(this.Kd,a,b,this)},m.cc=function(a,b){var c=this.pb(a,b);if(c){var d=new Y(null);return vj(d,"XYZ",c),d}},m.Ef=function(a,b){var c=W(null,this.zb,a,b,this);return c?c:void 0},m.Hf=function(a,b){var c=this.pb(a,b);if(c){var d=new qc(null);return rc(d,"XYZ",c),d}},m.dc=function(a,b){var c=W([null],this.hc,a,b,this);if(c&&c[0]){var g,h,d=new T(null),e=c[0],f=[e.length];for(g=1,h=c.length;h>g;++g)Ra(e,c[g]),f.push(e.length);return zc(d,"XYZ",e,f),d}},m.pb=function(a,b){return W(null,this.zb,a,b,this)},m.Fd={"http://www.opengis.net/gml":{pointMember:vi(Pj.prototype.$c),pointMembers:vi(Pj.prototype.$c)}},m.Ed={"http://www.opengis.net/gml":{lineStringMember:vi(Pj.prototype.Nc),lineStringMembers:vi(Pj.prototype.Nc)}},m.Gd={"http://www.opengis.net/gml":{polygonMember:vi(Pj.prototype.ad),polygonMembers:vi(Pj.prototype.ad)}},m.Jd={"http://www.opengis.net/gml":{Point:vi(Pj.prototype.pb)}},m.Cd={"http://www.opengis.net/gml":{LineString:vi(Pj.prototype.cc)}},m.Kd={"http://www.opengis.net/gml":{Polygon:vi(Pj.prototype.dc)}},m.ic={"http://www.opengis.net/gml":{LinearRing:wi(Pj.prototype.Ef)}},m.ac=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};return b&&qa(c,oj(this,a,b)),this.ob(a,[c])||[]},m.rb=function(a){return S(this.srsName?this.srsName:a.firstElementChild.getAttribute("srsName"))},C(Z,Pj),m=Z.prototype,m.If=function(a,b){var c=W([],this.Dd,a,b,this);if(c){var d=new wj(null);return yj(d,c),d}},m.Mf=function(a,b){var c=W([],this.Hd,a,b,this);if(c){var d=new Aj(null);return Cj(d,c),d}},m.wc=function(a,b){Ai(this.yd,a,b,this)},m.kd=function(a,b){Ai(this.Nd,a,b,this)},m.Nf=function(a,b){return W([null],this.Id,a,b,this)},m.Qf=function(a,b){return W([null],this.Md,a,b,this)},m.Pf=function(a,b){return W([null],this.hc,a,b,this)},m.Gf=function(a,b){return W([null],this.zb,a,b,this)},m.Pe=function(a,b){var c=W(void 0,this.ic,a,b,this);c&&b[b.length-1].push(c)},m.be=function(a,b){var c=W(void 0,this.ic,a,b,this);c&&(b[b.length-1][0]=c)},m.dd=function(a,b){var c=W([null],this.Od,a,b,this);if(c&&c[0]){var g,h,d=new T(null),e=c[0],f=[e.length];for(g=1,h=c.length;h>g;++g)Ra(e,c[g]),f.push(e.length);return zc(d,"XYZ",e,f),d}},m.bd=function(a,b){var c=W([null],this.zd,a,b,this);if(c){var d=new Y(null);return vj(d,"XYZ",c),d}},m.Df=function(a,b){var c=W([null],this.Ad,a,b,this);return mb(c[1][0],c[1][1],c[2][0],c[2][1])},m.Ff=function(a,b){for(var f,c=si(a),d=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,e=[];f=d.exec(c);)e.push(parseFloat(f[1])),c=c.substr(f[0].length);if(""===c){if(c=b[0].srsName,d="enu",c&&(d=S(c).a),"neu"===d)for(c=0,d=e.length;d>c;c+=3)f=e[c],e[c]=e[c+1],e[c+1]=f;return c=e.length,2==c&&e.push(0),0===c?void 0:e}},m.bc=function(a,b){var c=si(a).replace(/^\s*|\s*$/g,""),d=b[0].srsName,e=a.parentNode.getAttribute("srsDimension"),f="enu";d&&(f=S(d).a),c=c.split(/\s+/),d=2,a.getAttribute("srsDimension")?d=Tj(a.getAttribute("srsDimension")):a.getAttribute("dimension")?d=Tj(a.getAttribute("dimension")):e&&(d=Tj(e));for(var g,h,k=[],l=0,n=c.length;n>l;l+=d)e=parseFloat(c[l]),g=parseFloat(c[l+1]),h=3===d?parseFloat(c[l+2]):0,"en"===f.substr(0,2)?k.push(e,g,h):k.push(g,e,h);return k},m.zb={"http://www.opengis.net/gml":{pos:wi(Z.prototype.Ff),posList:wi(Z.prototype.bc)}},m.hc={"http://www.opengis.net/gml":{interior:Z.prototype.Pe,exterior:Z.prototype.be}},m.Bd={"http://www.opengis.net/gml":{Point:wi(Pj.prototype.Of),MultiPoint:wi(Pj.prototype.Kf),LineString:wi(Pj.prototype.cc),MultiLineString:wi(Pj.prototype.Jf),LinearRing:wi(Pj.prototype.Hf),Polygon:wi(Pj.prototype.dc),MultiPolygon:wi(Pj.prototype.Lf),Surface:wi(Z.prototype.dd),MultiSurface:wi(Z.prototype.Mf),Curve:wi(Z.prototype.bd),MultiCurve:wi(Z.prototype.If),Envelope:wi(Z.prototype.Df)}},m.Dd={"http://www.opengis.net/gml":{curveMember:vi(Z.prototype.wc),curveMembers:vi(Z.prototype.wc)}},m.Hd={"http://www.opengis.net/gml":{surfaceMember:vi(Z.prototype.kd),surfaceMembers:vi(Z.prototype.kd)}},m.yd={"http://www.opengis.net/gml":{LineString:vi(Pj.prototype.cc),Curve:vi(Z.prototype.bd)}},m.Nd={"http://www.opengis.net/gml":{Polygon:vi(Pj.prototype.dc),Surface:vi(Z.prototype.dd)}},m.Od={"http://www.opengis.net/gml":{patches:wi(Z.prototype.Nf)}},m.zd={"http://www.opengis.net/gml":{segments:wi(Z.prototype.Qf)}},m.Ad={"http://www.opengis.net/gml":{lowerCorner:vi(Z.prototype.bc),upperCorner:vi(Z.prototype.bc)}},m.Id={"http://www.opengis.net/gml":{PolygonPatch:wi(Z.prototype.Pf)}},m.Md={"http://www.opengis.net/gml":{LineStringSegment:wi(Z.prototype.Gf)}},m.vd=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d),d=ri(a.namespaceURI,"pos"),a.appendChild(d),c=c[c.length-1].srsName,a="enu",c&&(a=S(c).a),b=b.M(),Uj(d,"en"===a.substr(0,2)?b[0]+" "+b[1]:b[1]+" "+b[0])};var Wj={"http://www.opengis.net/gml":{lowerCorner:V(Uj),upperCorner:V(Uj)}};m=Z.prototype,m.fg=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d),Bi({node:a},Wj,zi,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)},m.sd=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d),d=ri(a.namespaceURI,"posList"),a.appendChild(d),Vj(d,b,c)},m.Ld=function(a,b){var c=b[b.length-1],d=c.node,e=c.exteriorWritten;return void 0===e&&(c.exteriorWritten=!0),ri(d.namespaceURI,void 0!==e?"interior":"exterior")},m.xb=function(a,b,c){var d=c[c.length-1].srsName;if("PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d),"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName){var e=b.b,f=b.a;b=b.f;var k,l,g=[],h=0;for(k=0,l=b.length;l>k;++k){var n=b[k],p=new qc(null);rc(p,e,f.slice(h,n)),g.push(p),h=n}Bi({node:a,srsName:d},Xj,this.Ld,g,c,void 0,this)}else"Surface"===a.nodeName&&(d=ri(a.namespaceURI,"patches"),a.appendChild(d),a=ri(d.namespaceURI,"PolygonPatch"),d.appendChild(a),this.xb(a,b,c))},m.wb=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d),"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=ri(a.namespaceURI,"posList"),a.appendChild(d),Vj(d,b,c)):"Curve"===a.nodeName&&(d=ri(a.namespaceURI,"segments"),a.appendChild(d),a=ri(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.wb(a,b,c))},m.ud=function(a,b,c){var d=c[c.length-1],e=d.srsName,d=d.surface;e&&a.setAttribute("srsName",e);var f=b.b,g=b.a;b=b.f;var l,n,p,q,h=[],k=0;for(l=0,n=b.length;n>l;++l){var t=b[l].slice(),u=t[t.length-1];if(0!==k)for(p=0,q=t.length;q>p;++p)t[p]-=k;p=new T(null),zc(p,f,g.slice(k,u),t),h.push(p),k=u}Bi({node:a,srsName:e,surface:d},Yj,this.b,h,c,void 0,this)},m.jg=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);var e=b.a,f=b.b;b=b.u;var h,k,g=[];for(h=0,k=e.length;k>h;h+=b){var l=new sc(null),n=l;hc(n,f,e.slice(h,h+b)),n.c(),g.push(l)}Bi({node:a,srsName:d},Zj,yi("pointMember"),g,c,void 0,this)},m.td=function(a,b,c){var d=c[c.length-1],e=d.srsName,d=d.curve;e&&a.setAttribute("srsName",e);var f=b.a,g=b.f;b=b.b;var l,n,h=[],k=0;for(l=0,n=g.length;n>l;++l){var p=g[l],q=new Y(null);vj(q,b,f.slice(k,p)),h.push(q),k=p}Bi({node:a,srsName:e,curve:d},ak,this.b,h,c,void 0,this)},m.wd=function(a,b,c){var d=ri(a.namespaceURI,"LinearRing");a.appendChild(d),this.sd(d,b,c)},m.xd=function(a,b,c){var d=this.c(b,c);d&&(a.appendChild(d),this.xb(d,b,c))},m.mg=function(a,b,c){var d=ri(a.namespaceURI,"Point");a.appendChild(d),this.vd(d,b,c)},m.rd=function(a,b,c){var d=this.c(b,c);
d&&(a.appendChild(d),this.wb(d,b,c))},m.pd=function(a,b,c){var d=c[c.length-1],e=qa({},d);e.node=a;var f;f=Array.isArray(b)?d.dataProjection?Xb(b,d.featureProjection,d.dataProjection):b:qj(b,!0,d),Bi(e,bk,this.c,[f],c,void 0,this)};var Yj={"http://www.opengis.net/gml":{surfaceMember:V(Z.prototype.xd),polygonMember:V(Z.prototype.xd)}},Zj={"http://www.opengis.net/gml":{pointMember:V(Z.prototype.mg)}},ak={"http://www.opengis.net/gml":{lineStringMember:V(Z.prototype.rd),curveMember:V(Z.prototype.rd)}},Xj={"http://www.opengis.net/gml":{exterior:V(Z.prototype.wd),interior:V(Z.prototype.wd)}},bk={"http://www.opengis.net/gml":{Curve:V(Z.prototype.wb),MultiCurve:V(Z.prototype.td),Point:V(Z.prototype.vd),MultiPoint:V(Z.prototype.jg),LineString:V(Z.prototype.wb),MultiLineString:V(Z.prototype.td),LinearRing:V(Z.prototype.sd),Polygon:V(Z.prototype.xb),MultiPolygon:V(Z.prototype.ud),Surface:V(Z.prototype.xb),MultiSurface:V(Z.prototype.ud),Envelope:V(Z.prototype.fg)}},ck={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};Z.prototype.b=function(a,b){return ri("http://www.opengis.net/gml",ck[b[b.length-1].node.nodeName])},Z.prototype.c=function(a,b){var g,c=b[b.length-1],d=c.multiSurface,e=c.surface,f=c.curve,c=c.multiCurve;return Array.isArray(a)?g="Envelope":(g=a.K(),"MultiPolygon"===g&&!0===d?g="MultiSurface":"Polygon"===g&&!0===e?g="Surface":"LineString"===g&&!0===f?g="Curve":"MultiLineString"===g&&!0===c&&(g="MultiCurve")),ri("http://www.opengis.net/gml",g)},C(dk,nj),dk.prototype.K=function(){return"text"},dk.prototype.$b=function(a,b){var c;if(c=ek(a),c=fk(c,pj(this,b))){var d=new U;ni(d,c),c=d}else c=null;return c},dk.prototype.Ca=function(a,b){var c=ek(a),d=[],c=fk(c,pj(this,b));d=this.a&&"GeometryCollection"==c.K()?c.g:[c];for(var e=[],f=0,g=d.length;g>f;++f)c=new U,ni(c,d[f]),e.push(c);return e},dk.prototype.qb=function(a){return ek(a),this.defaultDataProjection},C(gk,Mj),gk.prototype.ac=function(a,b){var c={featureType:this.b,featureNS:this.c};return qa(c,oj(this,a,b?b:{})),c=[c],this.a.a["http://www.opengis.net/gml"].featureMember=vi(Pj.prototype.ob),(c=W([],this.a.a,a,c,this.a))||(c=[]),c},gk.prototype.i=function(a){return a instanceof Document?hk(a):a instanceof Node?W({},ik,a,[]):"string"==typeof a?(a=ui(a),hk(a)):void 0};var jk={"http://www.opengis.net/wfs":{totalInserted:xi(Sj),totalUpdated:xi(Sj),totalDeleted:xi(Sj)}},kk={"http://www.opengis.net/ogc":{FeatureId:vi(function(a){return a.getAttribute("fid")})}},lk={"http://www.opengis.net/wfs":{Feature:function(a,b){Ai(kk,a,b)}}},ik={"http://www.opengis.net/wfs":{TransactionSummary:xi(function(a,b){return W({},jk,a,b)},"transactionSummary"),InsertResults:xi(function(a,b){return W([],lk,a,b)},"insertIds")}},nk={"http://www.opengis.net/wfs":{Insert:V(function(a,b,c){var d=c[c.length-1],d=ri(d.featureNS,d.featureType);a.appendChild(d),a=Z.prototype;var e=b.sa();e&&d.setAttribute("fid",e);var e=c[c.length-1],f=e.featureNS,g=b.a;e.Da||(e.Da={},e.Da[f]={});var h=b.va();b=[];var l,k=[];for(l in h){var n=h[l];null!==n&&(b.push(l),k.push(n),l==g||n instanceof Yb?l in e.Da[f]||(e.Da[f][l]=V(a.pd,a)):l in e.Da[f]||(e.Da[f][l]=V(Uj)))}l=qa({},e),l.node=d,Bi(l,e.Da,yi(void 0,f),k,c,b)}),Update:V(function(a,b,c){var d=c[c.length-1],e=d.featureType,f=d.featurePrefix,f=f?f:"feature",g=d.featureNS;if(a.setAttribute("typeName",f+":"+e),a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+f,g),e=b.sa(),void 0!==e){for(var f=Object.keys(b.P),g=[],h=0,k=f.length;k>h;h++){var l=b.get(f[h]);void 0!==l&&g.push({name:f[h],value:l})}Bi({node:a,srsName:d.srsName},nk,yi("Property"),g,c),mk(a,e)}}),Delete:V(function(a,b,c){var d=c[c.length-1];c=d.featureType;var e=d.featurePrefix,e=e?e:"feature",d=d.featureNS;a.setAttribute("typeName",e+":"+c),a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+e,d),b=b.sa(),void 0!==b&&mk(a,b)}),Property:V(function(a,b,c){var d=ri("http://www.opengis.net/wfs","Name");a.appendChild(d),Uj(d,b.name),void 0!==b.value&&null!==b.value&&(d=ri("http://www.opengis.net/wfs","Value"),a.appendChild(d),b.value instanceof Yb?Z.prototype.pd(d,b.value,c):Uj(d,b.value))}),Native:V(function(a,b){b.eg&&a.setAttribute("vendorId",b.eg),void 0!==b.Xf&&a.setAttribute("safeToIgnore",b.Xf),void 0!==b.value&&Uj(a,b.value)})}};gk.prototype.f=function(a,b,c,d){var e=[],f=ri("http://www.opengis.net/wfs","Transaction");f.setAttribute("service","WFS"),f.setAttribute("version","1.1.0");var g,h;return d&&(g=d.gmlOptions?d.gmlOptions:{},d.handle&&f.setAttribute("handle",d.handle)),f.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.g),a&&(h={node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix,srsName:d.srsName},qa(h,g),Bi(h,nk,yi("Insert"),a,e)),b&&(h={node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix,srsName:d.srsName},qa(h,g),Bi(h,nk,yi("Update"),b,e)),c&&Bi({node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix,srsName:d.srsName},nk,yi("Delete"),c,e),d.nativeElements&&Bi({node:f,featureNS:d.featureNS,featureType:d.featureType,featurePrefix:d.featurePrefix,srsName:d.srsName},nk,yi("Native"),d.nativeElements,e),f},gk.prototype.ec=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.rb(a);return null},gk.prototype.rb=function(a){if(a.firstElementChild&&a.firstElementChild.firstElementChild)for(a=a.firstElementChild.firstElementChild,a=a.firstElementChild;a;a=a.nextElementSibling)if(0!==a.childNodes.length&&(1!==a.childNodes.length||3!==a.firstChild.nodeType)){var b=[{}];return Rj(this.a,a,b),S(b.pop().srsName)}return null},C(ok,dk),m=pk.prototype,m.match=function(a){return(a=this.a.type==a)&&(this.a=rk(this.c)),a},m.Yb=function(){if(this.match(2)){var a=xk(this);if(this.match(3))return a}else if(tk(this))return null;throw Error(uk(this))},m.Xb=function(){if(this.match(2)){var a=yk(this);if(this.match(3))return a}else if(tk(this))return[];throw Error(uk(this))},m.Zb=function(){if(this.match(2)){var a=zk(this);if(this.match(3))return a}else if(tk(this))return[];throw Error(uk(this))},m.sf=function(){if(this.match(2)){var a;if(2==this.a.type)for(a=[this.Yb()];this.match(5);)a.push(this.Yb());else a=yk(this);if(this.match(3))return a}else if(tk(this))return[];throw Error(uk(this))},m.rf=function(){if(this.match(2)){var a=zk(this);if(this.match(3))return a}else if(tk(this))return[];throw Error(uk(this))},m.tf=function(){if(this.match(2)){for(var a=[this.Zb()];this.match(5);)a.push(this.Zb());if(this.match(3))return a}else if(tk(this))return[];throw Error(uk(this))};var wk={POINT:sc,LINESTRING:Y,POLYGON:T,MULTIPOINT:zj,MULTILINESTRING:wj,MULTIPOLYGON:Aj},vk={POINT:pk.prototype.Yb,LINESTRING:pk.prototype.Xb,POLYGON:pk.prototype.Zb,MULTIPOINT:pk.prototype.sf,MULTILINESTRING:pk.prototype.rf,MULTIPOLYGON:pk.prototype.tf};C(Ak,R),m=Ak.prototype,m.Y=function(){this.ub(!1),R.prototype.Y.call(this)},m.Ge=function(){var a=this.get("projection");a&&(this.g=Ob(S("EPSG:4326"),a),this.a&&this.set("position",this.g(this.a)))},m.Le=function(){if(me){var a=this.Jc();a&&void 0===this.b?this.b=E.navigator.geolocation.watchPosition(this.Af.bind(this),this.Bf.bind(this),this.get("trackingOptions")):a||void 0===this.b||(E.navigator.geolocation.clearWatch(this.b),this.b=void 0)}},m.Af=function(a){var b=a.coords;this.set("accuracy",b.accuracy),this.set("altitude",null===b.altitude?void 0:b.altitude),this.set("altitudeAccuracy",null===b.altitudeAccuracy?void 0:b.altitudeAccuracy),this.set("heading",null===b.heading?void 0:b.heading*Math.PI/180),this.a?(this.a[0]=b.longitude,this.a[1]=b.latitude):this.a=[b.longitude,b.latitude],a=this.g(this.a),this.set("position",a),this.set("speed",null===b.speed?void 0:b.speed),a=this.a;var d,c=b.accuracy,b=[];for(d=0;32>d;++d)Ra(b,Vg.offset(a,c,2*Math.PI*d/32));b.push(b[0],b[1]),a=new T(null),zc(a,"XY",b,[b.length]),a.Sa(this.g),this.set("accuracyGeometry",a),this.c()},m.Bf=function(a){a.type="error",this.ub(!1),O(this,a)},m.de=function(){return this.get("accuracy")},m.ge=function(){return this.get("heading")},m.ef=function(){return this.get("position")},m.le=function(){return this.get("speed")},m.Jc=function(){return this.get("tracking")},m.ub=function(a){this.set("tracking",a)},C(Bk,fc),m=Bk.prototype,m.clone=function(){var a=new Bk(null);return hc(a,this.b,this.a.slice()),a.c(),a},m.Vb=function(){return this.a.slice(0,this.u)},m.hb=function(a){var b=this.a,c=b[this.u]-b[0];return mb(b[0]-c,b[1]-c,b[0]+c,b[1]+c,a)},m.mf=function(){var a=this.a[this.u]-this.a[0],b=this.a[this.u+1]-this.a[1];return Math.sqrt(a*a+b*b)},m.K=function(){return"Circle"},C(Dk,pd),m=Dk.prototype,m.Y=function(){1==this.state&&Ek(this),this.a&&Ea(this.a),this.state=5,qd(this),pd.prototype.Y.call(this)},m.da=function(a){if(void 0!==a){var b=y(a);return b in this.b?this.b[b]:(a=ua(this.b)?this.c:this.c.cloneNode(!1),this.b[b]=a)}return this.c},m.getKey=function(){return this.g},m.ff=function(){this.state=3,Ek(this),qd(this)},m.gf=function(){this.state=this.c.naturalWidth&&this.c.naturalHeight?2:4,Ek(this),qd(this)},m.load=function(){(0==this.state||3==this.state)&&(this.state=1,qd(this),this.i=[I(this.c,"error",this.ff,this,!0),I(this.c,"load",this.gf,this,!0)],this.f(this,this.g))},C(Fk,Fa),C(Gk,dg),Gk.prototype.setMap=function(a){dg.prototype.setMap.call(this,a),this.eb()},Gk.prototype.C=Db,Gk.prototype.eb=function(){var a=this.w,b=this.get("active");a&&b||Xk(this),this.$.setMap(b?a:null)};var Mk="Point",Nk="LineString",Lk="Polygon",Sk="Circle";C(Yk,Fa),C(Zk,dg),m=Zk.prototype,m.Wb=function(a){var b=a.N();b.K()in this.V&&this.V[b.K()].call(this,a,b),(b=this.w)&&el(this,this.$,b),I(a,"change",this.Tc,this)},m.setMap=function(a){this.A.setMap(a),dg.prototype.setMap.call(this,a)},m.qe=function(a){this.Wb(a.element)},m.Tc=function(a){this.h||(a=a.target,gl(this,a),this.Wb(a))},m.re=function(a){gl(this,a.element)},m.lg=function(a,b){var c=b.M(),c={feature:a,geometry:b,W:[c,c]};this.a.ba(b.D(),c)},m.ig=function(a,b){var d,e,f,c=b.M();for(e=0,f=c.length;f>e;++e)d=c[e],d={feature:a,geometry:b,depth:[e],index:e,W:[d,d]},this.a.ba(b.D(),d)},m.qd=function(a,b){var d,e,f,g,c=b.M();for(d=0,e=c.length-1;e>d;++d)f=c.slice(d,d+2),g={feature:a,geometry:b,index:d,W:f},this.a.ba(gb(f),g)},m.hg=function(a,b){var d,e,f,g,h,k,l,c=b.M();for(g=0,h=c.length;h>g;++g)for(d=c[g],e=0,f=d.length-1;f>e;++e)k=d.slice(e,e+2),l={feature:a,geometry:b,depth:[g],index:e,W:k},this.a.ba(gb(k),l)},m.ng=function(a,b){var d,e,f,g,h,k,l,c=b.M();for(g=0,h=c.length;h>g;++g)for(d=c[g],e=0,f=d.length-1;f>e;++e)k=d.slice(e,e+2),l={feature:a,geometry:b,depth:[g],index:e,W:k},this.a.ba(gb(k),l)},m.kg=function(a,b){var d,e,f,g,h,k,l,n,p,q,c=b.M();for(k=0,l=c.length;l>k;++k)for(n=c[k],g=0,h=n.length;h>g;++g)for(d=n[g],e=0,f=d.length-1;f>e;++e)p=d.slice(e,e+2),q={feature:a,geometry:b,depth:[g,k],index:e,W:p},this.a.ba(gb(p),q)},m.gg=function(a,b){var c,d=b.g;for(c=0;c<d.length;++c)this.V[d[c].K()].call(this,a,d[c])},m.Oe=function(a,b){for(var h,c=a.W,d=a.feature,e=a.geometry,f=a.depth,g=a.index;b.length<e.u;)b.push(0);switch(e.K()){case"MultiLineString":h=e.M(),h[f[0]].splice(g+1,0,b);break;case"Polygon":h=e.M(),h[f[0]].splice(g+1,0,b);break;case"MultiPolygon":h=e.M(),h[f[1]][f[0]].splice(g+1,0,b);break;case"LineString":h=e.M(),h.splice(g+1,0,b);break;default:return}this.h=!0,e.O(h),this.h=!1,h=this.a,h.remove(a),kl(this,e,g,f,1);var k={W:[c[0],b],feature:d,geometry:e,depth:f,index:g};h.ba(gb(k.W),k),this.f.push([k,1]),c={W:[b,c[1]],feature:d,geometry:e,depth:f,index:g+1},h.ba(gb(c.W),c),this.f.push([c,0]),this.B=!0},C(ll,Fa),C(ml,Pf),ml.prototype.v=function(){return this.a.Z().g},ml.prototype.setMap=function(a){var b=this.w,c=this.a.Z().g;b&&c.forEach(b.md,b),Pf.prototype.setMap.call(this,a),this.a.setMap(a),a&&c.forEach(a.hd,a)},ml.prototype.o=function(a){a=a.element;var b=this.w;b&&b.hd(a)},ml.prototype.A=function(a){a=a.element;var b=this.w;b&&b.md(a)},C(ql,pd),ql.prototype.Y=function(){1==this.state&&(this.Oa.forEach(F),this.Oa=null),pd.prototype.Y.call(this)},ql.prototype.da=function(a){if(void 0!==a){var b=y(a);return b in this.b?this.b[b]:(a=ua(this.b)?this.i:this.i.cloneNode(!1),this.b[b]=a)}return this.i},ql.prototype.fd=function(){var a=[];if(this.c.forEach(function(b){b&&2==b.aa()&&a.push({extent:Ad(this.g,b.pa),image:b.da()})},this),this.c.length=0,0===a.length)this.state=3;else{var b=this.s[0],c=Gd(this.h,b),d=ca(c)?c:c[0],c=ca(c)?c:c[1],b=this.h.R(b),e=this.g.R(this.f),f=Ad(this.h,this.s);this.i=ji(d,c,this.o,e,this.g.D(),b,f,this.j,a,this.l,this.w),this.state=2}qd(this)},ql.prototype.load=function(){if(0==this.state){this.state=1,qd(this);var a=0;this.Oa=[],this.c.forEach(function(b){var c=b.aa();if(0==c||1==c){a++;var d;d=I(b,"change",function(){var c=b.aa();(2==c||3==c||4==c)&&(F(d),a--,0===a&&(this.Oa.forEach(F),this.Oa=null,this.fd()))},this),this.Oa.push(d)}},this),this.c.forEach(function(a){0==a.aa()&&a.load()}),0===a&&E.setTimeout(this.fd.bind(this),0)}},C(rl,Zi),m=rl.prototype,m.Uc=function(){if(od(this.a))return!0;for(var a in this.h)if(od(this.h[a]))return!0;return!1},m.Fa=function(a,b){var c=this.Za(a);this.a.Fa(this.a==c?b:{});for(var d in this.h){var e=this.h[d];e.Fa(e==c?b:{})}},m.Hc=function(a){return this.f&&a&&!Ub(this.f,a)?0:this.Lb()},m.Lb=function(){return 0},m.Nb=function(a){return this.f&&a&&!Ub(this.f,a)?!1:Zi.prototype.Nb.call(this,a)},m.na=function(a){var b=this.f;return!this.tileGrid||b&&!Ub(b,a)?(b=y(a).toString(),b in this.w||(this.w[b]=Jd(a)),this.w[b]):this.tileGrid},m.Za=function(a){var b=this.f;return!b||Ub(b,a)?this.a:(a=y(a).toString(),a in this.h||(this.h[a]=new nd),this.h[a])},C(vl,rl),C(wl,Mi),wl.prototype.Sb=function(a,b,c){this.v.Sb(a,b,c),b!==this.w&&(this.clear(),this.w=b,xl(this),this.Ra(this.o))},wl.prototype.ja=function(){this.clear(),xl(this),this.Ra(this.o),this.c()},C(Al,vl);var Bl=new Rc({html:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'});return C(Cl,rl),Cl.prototype.ib=function(a){return a},Cl.prototype.za=function(a,b,c){var d=this.tileGrid;if(d||(d=this.na(c)),!(d.a.length<=a[0])){var e=Ad(d,a,this.j),f=td(Gd(d,a[0]),this.b);1!=b&&(f=sd(f,b,this.b)),d={F:"image",FORMAT:"PNG32",TRANSPARENT:!0},qa(d,this.g);var g=this.urls;return g?(c=c.ua.split(":").pop(),d.SIZE=f[0]+","+f[1],d.BBOX=e.join(","),d.BBOXSR=c,d.IMAGESR=c,d.DPI=Math.round(d.DPI?d.DPI*b:90*b),a=(1==g.length?g[0]:g[ma((a[1]<<a[0])+a[2],g.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),a=zl(a,d)):a=void 0,a}},C(Dl,rl),m=Dl.prototype,m.fe=function(a,b,c,d){c=S(c);var e=this.tileGrid;if(e||(e=this.na(c)),b=Ed(e,a[0],a[1],b,!1,void 0),!(e.a.length<=b[0])){var f=e.R(b[0]),g=Ad(e,b,this.B),e=td(Gd(e,b[0]),this.b),h=this.l;return 0!==h&&(e=rd(e,h,this.b),g=jb(g,f*h,g)),h={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.g.LAYERS},qa(h,this.g,d),d=Math.floor((g[3]-a[1])/f),h[this.j?"I":"X"]=Math.floor((a[0]-g[0])/f),h[this.j?"J":"Y"]=d,El(this,b,e,g,1,c,h)}},m.Lb=function(){return this.l},m.Ha=function(a,b,c){return this.v+rl.prototype.Ha.call(this,a,b,c)},m.ib=function(a){return this.C&&void 0!==this.o?a:1},m.za=function(a,b,c){var d=this.tileGrid;if(d||(d=this.na(c)),!(d.a.length<=a[0])){1==b||this.C&&void 0!==this.o||(b=1);var e=d.R(a[0]),f=Ad(d,a,this.B),d=td(Gd(d,a[0]),this.b),g=this.l;return 0!==g&&(d=rd(d,g,this.b),f=jb(f,e*g,f)),1!=b&&(d=sd(d,b,this.b)),e={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0},qa(e,this.g),El(this,a,d,f,b,c,e)}},C(Fl,wd),C(Gl,rl),w("ol.Map",X,OPENLAYERS),X.prototype.addInteraction=X.prototype.Wd,X.prototype.addOverlay=X.prototype.Xd,X.prototype.beforeRender=X.prototype.ka,X.prototype.forEachFeatureAtPixel=X.prototype.Ib,X.prototype.forEachLayerAtPixel=X.prototype.jf,X.prototype.getSize=X.prototype.Ma,X.prototype.getTarget=X.prototype.Ub,X.prototype.getOverlays=X.prototype.je,X.prototype.getView=X.prototype.S,X.prototype.removeInteraction=X.prototype.Sf,X.prototype.removeOverlay=X.prototype.Tf,X.prototype.on=X.prototype.s,X.prototype.un=X.prototype.ma,w("ol.proj.Projection",Ib,OPENLAYERS),Ib.prototype.getMetersPerUnit=Ib.prototype.Aa,w("ol.View",Cc,OPENLAYERS),Cc.prototype.getCenter=Cc.prototype.la,Cc.prototype.getProjection=Cc.prototype.kf,Cc.prototype.getResolution=Cc.prototype.R,Cc.prototype.getResolutions=Cc.prototype.lf,Cc.prototype.getZoom=Cc.prototype.ne,Cc.prototype.setCenter=Cc.prototype.ta,Cc.prototype.setZoom=Cc.prototype.Yf,Cc.prototype.fit=Cc.prototype.ce,w("ol.extent.getTopLeft",Bb,OPENLAYERS),w("ol.tilegrid.TileGrid",wd,OPENLAYERS),w("ol.tilegrid.WMTS",Fl,OPENLAYERS),w("ol.tilegrid.createXYZ",Md,OPENLAYERS),w("ol.style.Style",kh,OPENLAYERS),w("ol.style.Circle",jh,OPENLAYERS),w("ol.style.Fill",dh,OPENLAYERS),w("ol.style.Icon",yf,OPENLAYERS),w("ol.style.Image",xf,OPENLAYERS),w("ol.style.Stroke",ih,OPENLAYERS),w("ol.style.Text",function(a){a=a||{},this.a=a.font,this.g=a.rotation,this.f=a.scale,this.s=a.text,this.j=a.textAlign,this.l=a.textBaseline,this.i=void 0!==a.fill?a.fill:new dh({color:"#333"}),this.h=void 0!==a.stroke?a.stroke:null,this.c=void 0!==a.offsetX?a.offsetX:0,this.b=void 0!==a.offsetY?a.offsetY:0},OPENLAYERS),w("ol.Attribution",Rc,OPENLAYERS),w("ol.Geolocation",Ak,OPENLAYERS),Ak.prototype.on=Ak.prototype.s,Ak.prototype.un=Ak.prototype.ma,Ak.prototype.getAccuracy=Ak.prototype.de,Ak.prototype.getHeading=Ak.prototype.ge,Ak.prototype.getPosition=Ak.prototype.ef,Ak.prototype.getSpeed=Ak.prototype.le,Ak.prototype.getTracking=Ak.prototype.Jc,Ak.prototype.setTracking=Ak.prototype.ub,w("ol.Overlay",fj,OPENLAYERS),fj.prototype.setPosition=fj.prototype.Rc,w("ol.control.Attribution",Td,OPENLAYERS),Td.prototype.setCollapsed=Td.prototype.X,Td.prototype.setCollapsible=Td.prototype.V,w("ol.control.Zoom",Yd,OPENLAYERS),w("ol.control.Rotate",Wd,OPENLAYERS),w("ol.control.ScaleLine",jj,OPENLAYERS),w("ol.control.defaults",Zd,OPENLAYERS),w("ol.interaction.Draw",Gk,OPENLAYERS),Gk.prototype.on=Gk.prototype.s,Gk.prototype.un=Gk.prototype.ma,w("ol.interaction.Modify",Zk,OPENLAYERS),Zk.prototype.on=Zk.prototype.s,Zk.prototype.un=Zk.prototype.ma,w("ol.interaction.Select",ml,OPENLAYERS),ml.prototype.on=ml.prototype.s,ml.prototype.un=ml.prototype.ma,ml.prototype.getFeatures=ml.prototype.v,w("ol.source.Source",ud,OPENLAYERS),ud.prototype.on=ud.prototype.s,ud.prototype.once=ud.prototype.jc,w("ol.source.OSM",Al,OPENLAYERS),w("ol.source.Tile",Nd,OPENLAYERS),w("ol.source.TileArcGISRest",Cl,OPENLAYERS),w("ol.source.TileWMS",Dl,OPENLAYERS),Dl.prototype.getGetFeatureInfoUrl=Dl.prototype.fe,w("ol.source.Vector",Mi,OPENLAYERS),Mi.prototype.addFeature=Mi.prototype.fb,Mi.prototype.addFeatures=Mi.prototype.Ra,Mi.prototype.getFeatures=Mi.prototype.Vc,Mi.prototype.getFormat=Mi.prototype.pf,Mi.prototype.removeFeature=Mi.prototype.bb,w("ol.source.WMTS",Gl,OPENLAYERS),w("ol.source.XYZ",vl,OPENLAYERS),w("ol.source.Cluster",wl,OPENLAYERS),lf.prototype.getSource=lf.prototype.Z,gf.prototype.getVisible=gf.prototype.b,gf.prototype.setVisible=gf.prototype.w,gf.prototype.on=gf.prototype.s,gf.prototype.once=gf.prototype.jc,w("ol.layer.Tile",Ff,OPENLAYERS),w("ol.layer.Vector",Hf,OPENLAYERS),Hf.prototype.setStyle=Hf.prototype.o,w("ol.layer.Group",Ng,OPENLAYERS),w("ol.Feature",U,OPENLAYERS),U.prototype.getGeometry=U.prototype.N,U.prototype.getGeometryName=U.prototype.ee,U.prototype.getId=U.prototype.sa,U.prototype.getProperties=U.prototype.va,U.prototype.setId=U.prototype.tb,U.prototype.setStyle=U.prototype.Qc,U.prototype.on=U.prototype.s,w("ol.Collection",Tc,OPENLAYERS),Tc.prototype.getLength=Tc.prototype.La,Tc.prototype.item=Tc.prototype.Pc,Tc.prototype.on=Tc.prototype.s,w("ol.format.EsriJSON",Dj,OPENLAYERS),Dj.prototype.readFeatures=Dj.prototype.Ca,w("ol.format.GeoJSON",Jj,OPENLAYERS),Jj.prototype.readFeatures=Jj.prototype.Ca,w("ol.format.WKT",ok,OPENLAYERS),ok.prototype.readFeature=ok.prototype.$b,ok.prototype.readFeatures=ok.prototype.Ca,w("ol.format.WFS",gk,OPENLAYERS),gk.prototype.readFeatures=gk.prototype.Ca,gk.prototype.readTransactionResponse=gk.prototype.i,gk.prototype.writeTransaction=gk.prototype.f,w("ol.geom.Circle",Bk,OPENLAYERS),Bk.prototype.clone=Bk.prototype.clone,Bk.prototype.getCenter=Bk.prototype.Vb,Bk.prototype.getRadius=Bk.prototype.mf,Bk.prototype.getType=Bk.prototype.K,w("ol.geom.Geometry",Yb,OPENLAYERS),Yb.prototype.getExtent=Yb.prototype.D,w("ol.geom.GeometryCollection",Gj,OPENLAYERS),w("ol.geom.LineString",Y,OPENLAYERS),Y.prototype.appendCoordinate=Y.prototype.Yd,Y.prototype.clone=Y.prototype.clone,Y.prototype.getCoordinateAt=Y.prototype.Gc,Y.prototype.getCoordinateAtM=Y.prototype.Sc,Y.prototype.getCoordinates=Y.prototype.M,Y.prototype.getType=Y.prototype.K,Y.prototype.setCoordinates=Y.prototype.O,w("ol.geom.MultiLineString",wj,OPENLAYERS),wj.prototype.clone=wj.prototype.clone,Y.prototype.getCoordinateAtM=Y.prototype.Sc,wj.prototype.getCoordinates=wj.prototype.M,wj.prototype.getType=wj.prototype.K,wj.prototype.setCoordinates=wj.prototype.O,w("ol.geom.MultiPoint",zj,OPENLAYERS),zj.prototype.clone=zj.prototype.clone,zj.prototype.getCoordinates=zj.prototype.M,zj.prototype.getType=zj.prototype.K,zj.prototype.setCoordinates=zj.prototype.O,w("ol.geom.MultiPolygon",Aj,OPENLAYERS),Aj.prototype.clone=Aj.prototype.clone,Aj.prototype.getCoordinates=Aj.prototype.M,Aj.prototype.getInteriorPoints=Aj.prototype.ie,Aj.prototype.getType=Aj.prototype.K,Aj.prototype.setCoordinates=Aj.prototype.O,w("ol.geom.Point",sc,OPENLAYERS),sc.prototype.clone=sc.prototype.clone,sc.prototype.getCoordinates=sc.prototype.M,sc.prototype.getType=sc.prototype.K,sc.prototype.setCoordinates=sc.prototype.O,w("ol.geom.Polygon",T,OPENLAYERS),T.prototype.clone=T.prototype.clone,T.prototype.getCoordinates=T.prototype.M,T.prototype.getInteriorPoint=T.prototype.he,T.prototype.getType=T.prototype.K,T.prototype.setCoordinates=T.prototype.O,w("ol.loadingstrategy.all",Ei,OPENLAYERS),w("ol.loadingstrategy.bbox",function(a){return[a]},OPENLAYERS),w("ol.loadingstrategy.tile",function(a){return function(b,c){var d=Hd(a,c),e=Bd(a,b,d),f=[],d=[d,0,0];for(d[1]=e.G;d[1]<=e.H;++d[1])for(d[2]=e.I;d[2]<=e.J;++d[2])f.push(Ad(a,d));return f}},OPENLAYERS),OPENLAYERS.ol})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(require,module,exports){function Point(x,y,z){if(!(this instanceof Point))return new Point(x,y,z);if(Array.isArray(x))this.x=x[0],this.y=x[1],this.z=x[2]||0;else if("object"==typeof x)this.x=x.x,this.y=x.y,this.z=x.z||0;else if("string"==typeof x&&"undefined"==typeof y){var coords=x.split(",");this.x=parseFloat(coords[0],10),this.y=parseFloat(coords[1],10),this.z=parseFloat(coords[2],10)||0}else this.x=x,this.y=y,this.z=z||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var mgrs=require("mgrs");Point.fromMGRS=function(mgrsStr){return new Point(mgrs.toPoint(mgrsStr))},Point.prototype.toMGRS=function(accuracy){return mgrs.forward([this.x,this.y],accuracy)},module.exports=Point},{mgrs:92}],26:[function(require,module,exports){function Projection(srsCode,callback){if(!(this instanceof Projection))return new Projection(srsCode);callback=callback||function(error){if(error)throw error};var json=parseCode(srsCode);if("object"!=typeof json)return void callback(srsCode);var modifiedJSON=deriveConstants(json),ourProj=Projection.projections.get(modifiedJSON.projName);ourProj?(extend(this,modifiedJSON),extend(this,ourProj),this.init(),callback(null,this)):callback(srsCode)}var parseCode=require("./parseCode"),extend=require("./extend"),projections=require("./projections"),deriveConstants=require("./deriveConstants");Projection.projections=projections,Projection.projections.start(),module.exports=Projection},{"./deriveConstants":57,"./extend":58,"./parseCode":62,"./projections":64}],27:[function(require,module,exports){module.exports=function(crs,denorm,point){var v,t,i,xin=point.x,yin=point.y,zin=point.z||0;for(i=0;3>i;i++)if(!denorm||2!==i||void 0!==point.z)switch(0===i?(v=xin,t="x"):1===i?(v=yin,t="y"):(v=zin,t="z"),crs.axis[i]){case"e":point[t]=v;break;case"w":point[t]=-v;break;case"n":point[t]=v;break;case"s":point[t]=-v;break;case"u":void 0!==point[t]&&(point.z=v);break;case"d":void 0!==point[t]&&(point.z=-v);break;default:return null}return point}},{}],28:[function(require,module,exports){var HALF_PI=Math.PI/2,sign=require("./sign");module.exports=function(x){return Math.abs(x)<HALF_PI?x:x-sign(x)*Math.PI}},{"./sign":45}],29:[function(require,module,exports){var TWO_PI=2*Math.PI,SPI=3.14159265359,sign=require("./sign");module.exports=function(x){return Math.abs(x)<=SPI?x:x-sign(x)*TWO_PI}},{"./sign":45}],30:[function(require,module,exports){module.exports=function(x){return Math.abs(x)>1&&(x=x>1?1:-1),Math.asin(x)}},{}],31:[function(require,module,exports){module.exports=function(x){return 1-.25*x*(1+x/16*(3+1.25*x))}},{}],32:[function(require,module,exports){module.exports=function(x){return.375*x*(1+.25*x*(1+.46875*x))}},{}],33:[function(require,module,exports){module.exports=function(x){return.05859375*x*x*(1+.75*x)}},{}],34:[function(require,module,exports){module.exports=function(x){return x*x*x*(35/3072)}},{}],35:[function(require,module,exports){module.exports=function(a,e,sinphi){var temp=e*sinphi;return a/Math.sqrt(1-temp*temp)}},{}],36:[function(require,module,exports){module.exports=function(ml,e0,e1,e2,e3){var phi,dphi;phi=ml/e0;for(var i=0;15>i;i++)if(dphi=(ml-(e0*phi-e1*Math.sin(2*phi)+e2*Math.sin(4*phi)-e3*Math.sin(6*phi)))/(e0-2*e1*Math.cos(2*phi)+4*e2*Math.cos(4*phi)-6*e3*Math.cos(6*phi)),phi+=dphi,Math.abs(dphi)<=1e-10)return phi;return NaN}},{}],37:[function(require,module,exports){var HALF_PI=Math.PI/2;module.exports=function(eccent,q){var temp=1-(1-eccent*eccent)/(2*eccent)*Math.log((1-eccent)/(1+eccent));if(Math.abs(Math.abs(q)-temp)<1e-6)return 0>q?-1*HALF_PI:HALF_PI;for(var dphi,sin_phi,cos_phi,con,phi=Math.asin(.5*q),i=0;30>i;i++)if(sin_phi=Math.sin(phi),cos_phi=Math.cos(phi),con=eccent*sin_phi,dphi=Math.pow(1-con*con,2)/(2*cos_phi)*(q/(1-eccent*eccent)-sin_phi/(1-con*con)+.5/eccent*Math.log((1-con)/(1+con))),phi+=dphi,Math.abs(dphi)<=1e-10)return phi;return NaN}},{}],38:[function(require,module,exports){module.exports=function(e0,e1,e2,e3,phi){return e0*phi-e1*Math.sin(2*phi)+e2*Math.sin(4*phi)-e3*Math.sin(6*phi)}},{}],39:[function(require,module,exports){module.exports=function(eccent,sinphi,cosphi){var con=eccent*sinphi;return cosphi/Math.sqrt(1-con*con)}},{}],40:[function(require,module,exports){var HALF_PI=Math.PI/2;module.exports=function(eccent,ts){for(var con,dphi,eccnth=.5*eccent,phi=HALF_PI-2*Math.atan(ts),i=0;15>=i;i++)if(con=eccent*Math.sin(phi),dphi=HALF_PI-2*Math.atan(ts*Math.pow((1-con)/(1+con),eccnth))-phi,phi+=dphi,Math.abs(dphi)<=1e-10)return phi;return-9999}},{}],41:[function(require,module,exports){var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;module.exports=function(es){var en=[];en[0]=C00-es*(C02+es*(C04+es*(C06+es*C08))),en[1]=es*(C22-es*(C04+es*(C06+es*C08)));var t=es*es;return en[2]=t*(C44-es*(C46+es*C48)),t*=es,en[3]=t*(C66-es*C68),en[4]=t*es*C88,en}},{}],42:[function(require,module,exports){var pj_mlfn=require("./pj_mlfn"),EPSLN=1e-10,MAX_ITER=20;module.exports=function(arg,es,en){for(var k=1/(1-es),phi=arg,i=MAX_ITER;i;--i){var s=Math.sin(phi),t=1-es*s*s;if(t=(pj_mlfn(phi,s,Math.cos(phi),en)-arg)*(t*Math.sqrt(t))*k,phi-=t,Math.abs(t)<EPSLN)return phi}return phi}},{"./pj_mlfn":43}],43:[function(require,module,exports){module.exports=function(phi,sphi,cphi,en){return cphi*=sphi,sphi*=sphi,en[0]*phi-cphi*(en[1]+sphi*(en[2]+sphi*(en[3]+sphi*en[4])))}},{}],44:[function(require,module,exports){module.exports=function(eccent,sinphi){var con;return eccent>1e-7?(con=eccent*sinphi,(1-eccent*eccent)*(sinphi/(1-con*con)-.5/eccent*Math.log((1-con)/(1+con)))):2*sinphi}},{}],45:[function(require,module,exports){module.exports=function(x){return 0>x?-1:1}},{}],46:[function(require,module,exports){module.exports=function(esinp,exp){return Math.pow((1-esinp)/(1+esinp),exp)}},{}],47:[function(require,module,exports){module.exports=function(array){var out={x:array[0],y:array[1]};return array.length>2&&(out.z=array[2]),array.length>3&&(out.m=array[3]),out}},{}],48:[function(require,module,exports){var HALF_PI=Math.PI/2;module.exports=function(eccent,phi,sinphi){var con=eccent*sinphi,com=.5*eccent;return con=Math.pow((1-con)/(1+con),com),Math.tan(.5*(HALF_PI-phi))/con}},{}],49:[function(require,module,exports){exports.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},exports.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},exports.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},exports.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},exports.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},exports.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},exports.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},exports.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},exports.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},exports.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},exports.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},exports.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},exports.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},exports.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},exports.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},exports.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],50:[function(require,module,exports){exports.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},exports.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},exports.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},exports.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},exports.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},exports.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},exports.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},exports.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},exports.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},exports.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},exports.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},exports.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},exports.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},exports.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},exports.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},exports.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},exports.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},exports.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},exports.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},exports.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},exports.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},exports.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"
},exports.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},exports.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},exports.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},exports.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},exports.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},exports.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},exports.hough={a:6378270,rf:297,ellipseName:"Hough"},exports.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},exports.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},exports.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},exports.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},exports.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},exports.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},exports.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},exports.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},exports.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},exports.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},exports.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},exports.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},exports.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},exports.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],51:[function(require,module,exports){exports.greenwich=0,exports.lisbon=-9.131906111111,exports.paris=2.337229166667,exports.bogota=-74.080916666667,exports.madrid=-3.687938888889,exports.rome=12.452333333333,exports.bern=7.439583333333,exports.jakarta=106.807719444444,exports.ferro=-17.666666666667,exports.brussels=4.367975,exports.stockholm=18.058277777778,exports.athens=23.7163375,exports.oslo=10.722916666667},{}],52:[function(require,module,exports){exports.ft={to_meter:.3048},exports["us-ft"]={to_meter:1200/3937}},{}],53:[function(require,module,exports){function transformer(from,to,coords){var transformedArray;return Array.isArray(coords)?(transformedArray=transform(from,to,coords),3===coords.length?[transformedArray.x,transformedArray.y,transformedArray.z]:[transformedArray.x,transformedArray.y]):transform(from,to,coords)}function checkProj(item){return item instanceof proj?item:item.oProj?item.oProj:proj(item)}function proj4(fromProj,toProj,coord){fromProj=checkProj(fromProj);var obj,single=!1;return"undefined"==typeof toProj?(toProj=fromProj,fromProj=wgs84,single=!0):("undefined"!=typeof toProj.x||Array.isArray(toProj))&&(coord=toProj,toProj=fromProj,fromProj=wgs84,single=!0),toProj=checkProj(toProj),coord?transformer(fromProj,toProj,coord):(obj={forward:function(coords){return transformer(fromProj,toProj,coords)},inverse:function(coords){return transformer(toProj,fromProj,coords)}},single&&(obj.oProj=toProj),obj)}var proj=require("./Proj"),transform=require("./transform"),wgs84=proj("WGS84");module.exports=proj4},{"./Proj":26,"./transform":90}],54:[function(require,module,exports){var HALF_PI=Math.PI/2,PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SEC_TO_RAD=484813681109536e-20,AD_C=1.0026,COS_67P5=.3826834323650898,datum=function(proj){if(!(this instanceof datum))return new datum(proj);if(this.datum_type=PJD_WGS84,proj){if(proj.datumCode&&"none"===proj.datumCode&&(this.datum_type=PJD_NODATUM),proj.datum_params){for(var i=0;i<proj.datum_params.length;i++)proj.datum_params[i]=parseFloat(proj.datum_params[i]);(0!==proj.datum_params[0]||0!==proj.datum_params[1]||0!==proj.datum_params[2])&&(this.datum_type=PJD_3PARAM),proj.datum_params.length>3&&(0!==proj.datum_params[3]||0!==proj.datum_params[4]||0!==proj.datum_params[5]||0!==proj.datum_params[6])&&(this.datum_type=PJD_7PARAM,proj.datum_params[3]*=SEC_TO_RAD,proj.datum_params[4]*=SEC_TO_RAD,proj.datum_params[5]*=SEC_TO_RAD,proj.datum_params[6]=proj.datum_params[6]/1e6+1)}this.datum_type=proj.grids?PJD_GRIDSHIFT:this.datum_type,this.a=proj.a,this.b=proj.b,this.es=proj.es,this.ep2=proj.ep2,this.datum_params=proj.datum_params,this.datum_type===PJD_GRIDSHIFT&&(this.grids=proj.grids)}};datum.prototype={compare_datums:function(dest){return this.datum_type!==dest.datum_type?!1:this.a!==dest.a||Math.abs(this.es-dest.es)>5e-11?!1:this.datum_type===PJD_3PARAM?this.datum_params[0]===dest.datum_params[0]&&this.datum_params[1]===dest.datum_params[1]&&this.datum_params[2]===dest.datum_params[2]:this.datum_type===PJD_7PARAM?this.datum_params[0]===dest.datum_params[0]&&this.datum_params[1]===dest.datum_params[1]&&this.datum_params[2]===dest.datum_params[2]&&this.datum_params[3]===dest.datum_params[3]&&this.datum_params[4]===dest.datum_params[4]&&this.datum_params[5]===dest.datum_params[5]&&this.datum_params[6]===dest.datum_params[6]:this.datum_type===PJD_GRIDSHIFT||dest.datum_type===PJD_GRIDSHIFT?this.nadgrids===dest.nadgrids:!0},geodetic_to_geocentric:function(p){var X,Y,Z,Rn,Sin_Lat,Sin2_Lat,Cos_Lat,Longitude=p.x,Latitude=p.y,Height=p.z?p.z:0,Error_Code=0;if(-HALF_PI>Latitude&&Latitude>-1.001*HALF_PI)Latitude=-HALF_PI;else if(Latitude>HALF_PI&&1.001*HALF_PI>Latitude)Latitude=HALF_PI;else if(-HALF_PI>Latitude||Latitude>HALF_PI)return null;return Longitude>Math.PI&&(Longitude-=2*Math.PI),Sin_Lat=Math.sin(Latitude),Cos_Lat=Math.cos(Latitude),Sin2_Lat=Sin_Lat*Sin_Lat,Rn=this.a/Math.sqrt(1-this.es*Sin2_Lat),X=(Rn+Height)*Cos_Lat*Math.cos(Longitude),Y=(Rn+Height)*Cos_Lat*Math.sin(Longitude),Z=(Rn*(1-this.es)+Height)*Sin_Lat,p.x=X,p.y=Y,p.z=Z,Error_Code},geocentric_to_geodetic:function(p){var P,RR,CT,ST,RX,RK,RN,CPHI0,SPHI0,CPHI,SPHI,SDPHI,At_Pole,iter,Longitude,Latitude,Height,genau=1e-12,genau2=genau*genau,maxiter=30,X=p.x,Y=p.y,Z=p.z?p.z:0;if(At_Pole=!1,P=Math.sqrt(X*X+Y*Y),RR=Math.sqrt(X*X+Y*Y+Z*Z),P/this.a<genau){if(At_Pole=!0,Longitude=0,RR/this.a<genau)return Latitude=HALF_PI,void(Height=-this.b)}else Longitude=Math.atan2(Y,X);CT=Z/RR,ST=P/RR,RX=1/Math.sqrt(1-this.es*(2-this.es)*ST*ST),CPHI0=ST*(1-this.es)*RX,SPHI0=CT*RX,iter=0;do iter++,RN=this.a/Math.sqrt(1-this.es*SPHI0*SPHI0),Height=P*CPHI0+Z*SPHI0-RN*(1-this.es*SPHI0*SPHI0),RK=this.es*RN/(RN+Height),RX=1/Math.sqrt(1-RK*(2-RK)*ST*ST),CPHI=ST*(1-RK)*RX,SPHI=CT*RX,SDPHI=SPHI*CPHI0-CPHI*SPHI0,CPHI0=CPHI,SPHI0=SPHI;while(SDPHI*SDPHI>genau2&&maxiter>iter);return Latitude=Math.atan(SPHI/Math.abs(CPHI)),p.x=Longitude,p.y=Latitude,p.z=Height,p},geocentric_to_geodetic_noniter:function(p){var Longitude,Latitude,Height,W,W2,T0,T1,S0,S1,Sin_B0,Sin3_B0,Cos_B0,Sin_p1,Cos_p1,Rn,Sum,At_Pole,X=p.x,Y=p.y,Z=p.z?p.z:0;if(X=parseFloat(X),Y=parseFloat(Y),Z=parseFloat(Z),At_Pole=!1,0!==X)Longitude=Math.atan2(Y,X);else if(Y>0)Longitude=HALF_PI;else if(0>Y)Longitude=-HALF_PI;else if(At_Pole=!0,Longitude=0,Z>0)Latitude=HALF_PI;else{if(!(0>Z))return Latitude=HALF_PI,void(Height=-this.b);Latitude=-HALF_PI}return W2=X*X+Y*Y,W=Math.sqrt(W2),T0=Z*AD_C,S0=Math.sqrt(T0*T0+W2),Sin_B0=T0/S0,Cos_B0=W/S0,Sin3_B0=Sin_B0*Sin_B0*Sin_B0,T1=Z+this.b*this.ep2*Sin3_B0,Sum=W-this.a*this.es*Cos_B0*Cos_B0*Cos_B0,S1=Math.sqrt(T1*T1+Sum*Sum),Sin_p1=T1/S1,Cos_p1=Sum/S1,Rn=this.a/Math.sqrt(1-this.es*Sin_p1*Sin_p1),Height=Cos_p1>=COS_67P5?W/Cos_p1-Rn:-COS_67P5>=Cos_p1?W/-Cos_p1-Rn:Z/Sin_p1+Rn*(this.es-1),At_Pole===!1&&(Latitude=Math.atan(Sin_p1/Cos_p1)),p.x=Longitude,p.y=Latitude,p.z=Height,p},geocentric_to_wgs84:function(p){if(this.datum_type===PJD_3PARAM)p.x+=this.datum_params[0],p.y+=this.datum_params[1],p.z+=this.datum_params[2];else if(this.datum_type===PJD_7PARAM){var Dx_BF=this.datum_params[0],Dy_BF=this.datum_params[1],Dz_BF=this.datum_params[2],Rx_BF=this.datum_params[3],Ry_BF=this.datum_params[4],Rz_BF=this.datum_params[5],M_BF=this.datum_params[6],x_out=M_BF*(p.x-Rz_BF*p.y+Ry_BF*p.z)+Dx_BF,y_out=M_BF*(Rz_BF*p.x+p.y-Rx_BF*p.z)+Dy_BF,z_out=M_BF*(-Ry_BF*p.x+Rx_BF*p.y+p.z)+Dz_BF;p.x=x_out,p.y=y_out,p.z=z_out}},geocentric_from_wgs84:function(p){if(this.datum_type===PJD_3PARAM)p.x-=this.datum_params[0],p.y-=this.datum_params[1],p.z-=this.datum_params[2];else if(this.datum_type===PJD_7PARAM){var Dx_BF=this.datum_params[0],Dy_BF=this.datum_params[1],Dz_BF=this.datum_params[2],Rx_BF=this.datum_params[3],Ry_BF=this.datum_params[4],Rz_BF=this.datum_params[5],M_BF=this.datum_params[6],x_tmp=(p.x-Dx_BF)/M_BF,y_tmp=(p.y-Dy_BF)/M_BF,z_tmp=(p.z-Dz_BF)/M_BF;p.x=x_tmp+Rz_BF*y_tmp-Ry_BF*z_tmp,p.y=-Rz_BF*x_tmp+y_tmp+Rx_BF*z_tmp,p.z=Ry_BF*x_tmp-Rx_BF*y_tmp+z_tmp}}},module.exports=datum},{}],55:[function(require,module,exports){var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_ESQUARED=.006694379990141316;module.exports=function(source,dest,point){function checkParams(fallback){return fallback===PJD_3PARAM||fallback===PJD_7PARAM}var wp,i,l;if(source.compare_datums(dest))return point;if(source.datum_type===PJD_NODATUM||dest.datum_type===PJD_NODATUM)return point;var src_a=source.a,src_es=source.es,dst_a=dest.a,dst_es=dest.es,fallback=source.datum_type;if(fallback===PJD_GRIDSHIFT)if(0===this.apply_gridshift(source,0,point))source.a=SRS_WGS84_SEMIMAJOR,source.es=SRS_WGS84_ESQUARED;else{if(!source.datum_params)return source.a=src_a,source.es=source.es,point;for(wp=1,i=0,l=source.datum_params.length;l>i;i++)wp*=source.datum_params[i];if(0===wp)return source.a=src_a,source.es=source.es,point;fallback=source.datum_params.length>3?PJD_7PARAM:PJD_3PARAM}return dest.datum_type===PJD_GRIDSHIFT&&(dest.a=SRS_WGS84_SEMIMAJOR,dest.es=SRS_WGS84_ESQUARED),(source.es!==dest.es||source.a!==dest.a||checkParams(fallback)||checkParams(dest.datum_type))&&(source.geodetic_to_geocentric(point),checkParams(source.datum_type)&&source.geocentric_to_wgs84(point),checkParams(dest.datum_type)&&dest.geocentric_from_wgs84(point),dest.geocentric_to_geodetic(point)),dest.datum_type===PJD_GRIDSHIFT&&this.apply_gridshift(dest,1,point),source.a=src_a,source.es=src_es,dest.a=dst_a,dest.es=dst_es,point}},{}],56:[function(require,module,exports){function defs(name){var that=this;if(2===arguments.length){var def=arguments[1];"string"==typeof def?"+"===def.charAt(0)?defs[name]=parseProj(arguments[1]):defs[name]=wkt(arguments[1]):defs[name]=def}else if(1===arguments.length){if(Array.isArray(name))return name.map(function(v){Array.isArray(v)?defs.apply(that,v):defs(v)});if("string"==typeof name){if(name in defs)return defs[name]}else"EPSG"in name?defs["EPSG:"+name.EPSG]=name:"ESRI"in name?defs["ESRI:"+name.ESRI]=name:"IAU2000"in name?defs["IAU2000:"+name.IAU2000]=name:console.log(name);return}}var globals=require("./global"),parseProj=require("./projString"),wkt=require("./wkt");globals(defs),module.exports=defs},{"./global":59,"./projString":63,"./wkt":91}],57:[function(require,module,exports){var Datum=require("./constants/Datum"),Ellipsoid=require("./constants/Ellipsoid"),extend=require("./extend"),datum=require("./datum"),EPSLN=1e-10,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655;module.exports=function(json){if(json.datumCode&&"none"!==json.datumCode){var datumDef=Datum[json.datumCode];datumDef&&(json.datum_params=datumDef.towgs84?datumDef.towgs84.split(","):null,json.ellps=datumDef.ellipse,json.datumName=datumDef.datumName?datumDef.datumName:json.datumCode)}if(!json.a){var ellipse=Ellipsoid[json.ellps]?Ellipsoid[json.ellps]:Ellipsoid.WGS84;extend(json,ellipse)}return json.rf&&!json.b&&(json.b=(1-1/json.rf)*json.a),(0===json.rf||Math.abs(json.a-json.b)<EPSLN)&&(json.sphere=!0,json.b=json.a),json.a2=json.a*json.a,json.b2=json.b*json.b,json.es=(json.a2-json.b2)/json.a2,json.e=Math.sqrt(json.es),json.R_A&&(json.a*=1-json.es*(SIXTH+json.es*(RA4+json.es*RA6)),json.a2=json.a*json.a,json.b2=json.b*json.b,json.es=0),json.ep2=(json.a2-json.b2)/json.b2,json.k0||(json.k0=1),json.axis||(json.axis="enu"),json.datum||(json.datum=datum(json)),json}},{"./constants/Datum":49,"./constants/Ellipsoid":50,"./datum":54,"./extend":58}],58:[function(require,module,exports){module.exports=function(destination,source){destination=destination||{};var value,property;if(!source)return destination;for(property in source)value=source[property],void 0!==value&&(destination[property]=value);return destination}},{}],59:[function(require,module,exports){module.exports=function(defs){defs("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),defs("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),defs("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),defs.WGS84=defs["EPSG:4326"],defs["EPSG:3785"]=defs["EPSG:3857"],defs.GOOGLE=defs["EPSG:3857"],defs["EPSG:900913"]=defs["EPSG:3857"],defs["EPSG:102113"]=defs["EPSG:3857"]}},{}],60:[function(require,module,exports){var projs=[require("./projections/tmerc"),require("./projections/utm"),require("./projections/sterea"),require("./projections/stere"),require("./projections/somerc"),require("./projections/omerc"),require("./projections/lcc"),require("./projections/krovak"),require("./projections/cass"),require("./projections/laea"),require("./projections/aea"),require("./projections/gnom"),require("./projections/cea"),require("./projections/eqc"),require("./projections/poly"),require("./projections/nzmg"),require("./projections/mill"),require("./projections/sinu"),require("./projections/moll"),require("./projections/eqdc"),require("./projections/vandg"),require("./projections/aeqd")];module.exports=function(proj4){projs.forEach(function(proj){proj4.Proj.projections.add(proj)})}},{"./projections/aea":65,"./projections/aeqd":66,"./projections/cass":67,"./projections/cea":68,"./projections/eqc":69,"./projections/eqdc":70,"./projections/gnom":72,"./projections/krovak":73,"./projections/laea":74,"./projections/lcc":75,"./projections/mill":78,"./projections/moll":79,"./projections/nzmg":80,"./projections/omerc":81,"./projections/poly":82,"./projections/sinu":83,"./projections/somerc":84,"./projections/stere":85,"./projections/sterea":86,"./projections/tmerc":87,"./projections/utm":88,"./projections/vandg":89}],61:[function(require,module,exports){var proj4=require("./core");proj4.defaultDatum="WGS84",proj4.Proj=require("./Proj"),proj4.WGS84=new proj4.Proj("WGS84"),proj4.Point=require("./Point"),proj4.toPoint=require("./common/toPoint"),proj4.defs=require("./defs"),proj4.transform=require("./transform"),proj4.mgrs=require("mgrs"),proj4.version=require("../package.json").version,require("./includedProjections")(proj4),module.exports=proj4},{"../package.json":93,"./Point":25,"./Proj":26,"./common/toPoint":47,"./core":53,"./defs":56,"./includedProjections":60,"./transform":90,mgrs:92}],62:[function(require,module,exports){function testObj(code){return"string"==typeof code}function testDef(code){return code in defs}function testWKT(code){var codeWords=["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"];return codeWords.reduce(function(a,b){return a+1+code.indexOf(b)},0)}function testProj(code){return"+"===code[0]}function parse(code){return testObj(code)?testDef(code)?defs[code]:testWKT(code)?wkt(code):testProj(code)?projStr(code):void 0:code}var defs=require("./defs"),wkt=require("./wkt"),projStr=require("./projString");module.exports=parse},{"./defs":56,"./projString":63,"./wkt":91}],63:[function(require,module,exports){var D2R=.017453292519943295,PrimeMeridian=require("./constants/PrimeMeridian"),units=require("./constants/units");module.exports=function(defData){var self={},paramObj={};defData.split("+").map(function(v){return v.trim()}).filter(function(a){return a}).forEach(function(a){var split=a.split("=");split.push(!0),paramObj[split[0].toLowerCase()]=split[1]});var paramName,paramVal,paramOutname,params={proj:"projName",datum:"datumCode",rf:function(v){self.rf=parseFloat(v)},lat_0:function(v){self.lat0=v*D2R},lat_1:function(v){self.lat1=v*D2R},lat_2:function(v){self.lat2=v*D2R},lat_ts:function(v){self.lat_ts=v*D2R},lon_0:function(v){self.long0=v*D2R},lon_1:function(v){self.long1=v*D2R},lon_2:function(v){self.long2=v*D2R},alpha:function(v){self.alpha=parseFloat(v)*D2R},lonc:function(v){self.longc=v*D2R},x_0:function(v){self.x0=parseFloat(v)},y_0:function(v){self.y0=parseFloat(v)},k_0:function(v){self.k0=parseFloat(v)},k:function(v){self.k0=parseFloat(v)},a:function(v){self.a=parseFloat(v)},b:function(v){self.b=parseFloat(v)},r_a:function(){self.R_A=!0},zone:function(v){self.zone=parseInt(v,10)},south:function(){self.utmSouth=!0},towgs84:function(v){self.datum_params=v.split(",").map(function(a){return parseFloat(a)})},to_meter:function(v){self.to_meter=parseFloat(v)},units:function(v){self.units=v,units[v]&&(self.to_meter=units[v].to_meter)},from_greenwich:function(v){self.from_greenwich=v*D2R},pm:function(v){self.from_greenwich=(PrimeMeridian[v]?PrimeMeridian[v]:parseFloat(v))*D2R},nadgrids:function(v){"@null"===v?self.datumCode="none":self.nadgrids=v},axis:function(v){var legalAxis="ewnsud";3===v.length&&-1!==legalAxis.indexOf(v.substr(0,1))&&-1!==legalAxis.indexOf(v.substr(1,1))&&-1!==legalAxis.indexOf(v.substr(2,1))&&(self.axis=v)}};for(paramName in paramObj)paramVal=paramObj[paramName],paramName in params?(paramOutname=params[paramName],"function"==typeof paramOutname?paramOutname(paramVal):self[paramOutname]=paramVal):self[paramName]=paramVal;return"string"==typeof self.datumCode&&"WGS84"!==self.datumCode&&(self.datumCode=self.datumCode.toLowerCase()),self}},{"./constants/PrimeMeridian":51,"./constants/units":52}],64:[function(require,module,exports){function add(proj,i){var len=projStore.length;return proj.names?(projStore[len]=proj,proj.names.forEach(function(n){names[n.toLowerCase()]=len}),this):(console.log(i),!0)}var projs=[require("./projections/merc"),require("./projections/longlat")],names={},projStore=[];exports.add=add,exports.get=function(name){if(!name)return!1;var n=name.toLowerCase();return"undefined"!=typeof names[n]&&projStore[names[n]]?projStore[names[n]]:void 0},exports.start=function(){projs.forEach(add)}},{"./projections/longlat":76,"./projections/merc":77}],65:[function(require,module,exports){var EPSLN=1e-10,msfnz=require("../common/msfnz"),qsfnz=require("../common/qsfnz"),adjust_lon=require("../common/adjust_lon"),asinz=require("../common/asinz");exports.init=function(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},exports.forward=function(p){var lon=p.x,lat=p.y;this.sin_phi=Math.sin(lat),this.cos_phi=Math.cos(lat);var qs=qsfnz(this.e3,this.sin_phi,this.cos_phi),rh1=this.a*Math.sqrt(this.c-this.ns0*qs)/this.ns0,theta=this.ns0*adjust_lon(lon-this.long0),x=rh1*Math.sin(theta)+this.x0,y=this.rh-rh1*Math.cos(theta)+this.y0;return p.x=x,p.y=y,p},exports.inverse=function(p){var rh1,qs,con,theta,lon,lat;return p.x-=this.x0,p.y=this.rh-p.y+this.y0,this.ns0>=0?(rh1=Math.sqrt(p.x*p.x+p.y*p.y),con=1):(rh1=-Math.sqrt(p.x*p.x+p.y*p.y),con=-1),theta=0,0!==rh1&&(theta=Math.atan2(con*p.x,con*p.y)),con=rh1*this.ns0/this.a,this.sphere?lat=Math.asin((this.c-con*con)/(2*this.ns0)):(qs=(this.c-con*con)/this.ns0,lat=this.phi1z(this.e3,qs)),lon=adjust_lon(theta/this.ns0+this.long0),p.x=lon,p.y=lat,p},exports.phi1z=function(eccent,qs){var sinphi,cosphi,con,com,dphi,phi=asinz(.5*qs);if(EPSLN>eccent)return phi;for(var eccnts=eccent*eccent,i=1;25>=i;i++)if(sinphi=Math.sin(phi),cosphi=Math.cos(phi),con=eccent*sinphi,com=1-con*con,dphi=.5*com*com/cosphi*(qs/(1-eccnts)-sinphi/com+.5/eccent*Math.log((1-con)/(1+con))),phi+=dphi,Math.abs(dphi)<=1e-7)return phi;return null},exports.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":29,"../common/asinz":30,"../common/msfnz":39,"../common/qsfnz":44}],66:[function(require,module,exports){var adjust_lon=require("../common/adjust_lon"),HALF_PI=Math.PI/2,EPSLN=1e-10,mlfn=require("../common/mlfn"),e0fn=require("../common/e0fn"),e1fn=require("../common/e1fn"),e2fn=require("../common/e2fn"),e3fn=require("../common/e3fn"),gN=require("../common/gN"),asinz=require("../common/asinz"),imlfn=require("../common/imlfn");exports.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},exports.forward=function(p){var e0,e1,e2,e3,Mlp,Ml,tanphi,Nl1,Nl,psi,Az,G,H,GH,Hs,c,kp,cos_c,s,s2,s3,s4,s5,lon=p.x,lat=p.y,sinphi=Math.sin(p.y),cosphi=Math.cos(p.y),dlon=adjust_lon(lon-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(p.x=this.x0+this.a*(HALF_PI-lat)*Math.sin(dlon),p.y=this.y0-this.a*(HALF_PI-lat)*Math.cos(dlon),p):Math.abs(this.sin_p12+1)<=EPSLN?(p.x=this.x0+this.a*(HALF_PI+lat)*Math.sin(dlon),p.y=this.y0+this.a*(HALF_PI+lat)*Math.cos(dlon),p):(cos_c=this.sin_p12*sinphi+this.cos_p12*cosphi*Math.cos(dlon),c=Math.acos(cos_c),kp=c/Math.sin(c),p.x=this.x0+this.a*kp*cosphi*Math.sin(dlon),p.y=this.y0+this.a*kp*(this.cos_p12*sinphi-this.sin_p12*cosphi*Math.cos(dlon)),p):(e0=e0fn(this.es),e1=e1fn(this.es),e2=e2fn(this.es),e3=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(Mlp=this.a*mlfn(e0,e1,e2,e3,HALF_PI),Ml=this.a*mlfn(e0,e1,e2,e3,lat),p.x=this.x0+(Mlp-Ml)*Math.sin(dlon),p.y=this.y0-(Mlp-Ml)*Math.cos(dlon),p):Math.abs(this.sin_p12+1)<=EPSLN?(Mlp=this.a*mlfn(e0,e1,e2,e3,HALF_PI),Ml=this.a*mlfn(e0,e1,e2,e3,lat),p.x=this.x0+(Mlp+Ml)*Math.sin(dlon),p.y=this.y0+(Mlp+Ml)*Math.cos(dlon),p):(tanphi=sinphi/cosphi,Nl1=gN(this.a,this.e,this.sin_p12),Nl=gN(this.a,this.e,sinphi),psi=Math.atan((1-this.es)*tanphi+this.es*Nl1*this.sin_p12/(Nl*cosphi)),Az=Math.atan2(Math.sin(dlon),this.cos_p12*Math.tan(psi)-this.sin_p12*Math.cos(dlon)),s=0===Az?Math.asin(this.cos_p12*Math.sin(psi)-this.sin_p12*Math.cos(psi)):Math.abs(Math.abs(Az)-Math.PI)<=EPSLN?-Math.asin(this.cos_p12*Math.sin(psi)-this.sin_p12*Math.cos(psi)):Math.asin(Math.sin(dlon)*Math.cos(psi)/Math.sin(Az)),G=this.e*this.sin_p12/Math.sqrt(1-this.es),H=this.e*this.cos_p12*Math.cos(Az)/Math.sqrt(1-this.es),GH=G*H,Hs=H*H,s2=s*s,s3=s2*s,s4=s3*s,s5=s4*s,c=Nl1*s*(1-s2*Hs*(1-Hs)/6+s3/8*GH*(1-2*Hs)+s4/120*(Hs*(4-7*Hs)-3*G*G*(1-7*Hs))-s5/48*GH),p.x=this.x0+c*Math.sin(Az),p.y=this.y0+c*Math.cos(Az),p))},exports.inverse=function(p){p.x-=this.x0,p.y-=this.y0;var rh,z,sinz,cosz,lon,lat,con,e0,e1,e2,e3,Mlp,M,N1,psi,Az,cosAz,tmp,A,B,D,Ee,F;if(this.sphere){if(rh=Math.sqrt(p.x*p.x+p.y*p.y),rh>2*HALF_PI*this.a)return;return z=rh/this.a,sinz=Math.sin(z),cosz=Math.cos(z),lon=this.long0,Math.abs(rh)<=EPSLN?lat=this.lat0:(lat=asinz(cosz*this.sin_p12+p.y*sinz*this.cos_p12/rh),con=Math.abs(this.lat0)-HALF_PI,lon=adjust_lon(Math.abs(con)<=EPSLN?this.lat0>=0?this.long0+Math.atan2(p.x,-p.y):this.long0-Math.atan2(-p.x,p.y):this.long0+Math.atan2(p.x*sinz,rh*this.cos_p12*cosz-p.y*this.sin_p12*sinz))),p.x=lon,p.y=lat,p}return e0=e0fn(this.es),e1=e1fn(this.es),e2=e2fn(this.es),e3=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(Mlp=this.a*mlfn(e0,e1,e2,e3,HALF_PI),rh=Math.sqrt(p.x*p.x+p.y*p.y),M=Mlp-rh,lat=imlfn(M/this.a,e0,e1,e2,e3),lon=adjust_lon(this.long0+Math.atan2(p.x,-1*p.y)),p.x=lon,p.y=lat,p):Math.abs(this.sin_p12+1)<=EPSLN?(Mlp=this.a*mlfn(e0,e1,e2,e3,HALF_PI),rh=Math.sqrt(p.x*p.x+p.y*p.y),M=rh-Mlp,lat=imlfn(M/this.a,e0,e1,e2,e3),lon=adjust_lon(this.long0+Math.atan2(p.x,p.y)),p.x=lon,p.y=lat,p):(rh=Math.sqrt(p.x*p.x+p.y*p.y),Az=Math.atan2(p.x,p.y),N1=gN(this.a,this.e,this.sin_p12),cosAz=Math.cos(Az),tmp=this.e*this.cos_p12*cosAz,A=-tmp*tmp/(1-this.es),B=3*this.es*(1-A)*this.sin_p12*this.cos_p12*cosAz/(1-this.es),D=rh/N1,Ee=D-A*(1+A)*Math.pow(D,3)/6-B*(1+3*A)*Math.pow(D,4)/24,F=1-A*Ee*Ee/2-D*Ee*Ee*Ee/6,psi=Math.asin(this.sin_p12*Math.cos(Ee)+this.cos_p12*Math.sin(Ee)*cosAz),lon=adjust_lon(this.long0+Math.asin(Math.sin(Az)*Math.sin(Ee)/Math.cos(psi))),lat=Math.atan((1-this.es*F*this.sin_p12/Math.sin(psi))*Math.tan(psi)/(1-this.es)),p.x=lon,p.y=lat,p)},exports.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":29,"../common/asinz":30,"../common/e0fn":31,"../common/e1fn":32,"../common/e2fn":33,"../common/e3fn":34,"../common/gN":35,"../common/imlfn":36,"../common/mlfn":38}],67:[function(require,module,exports){var mlfn=require("../common/mlfn"),e0fn=require("../common/e0fn"),e1fn=require("../common/e1fn"),e2fn=require("../common/e2fn"),e3fn=require("../common/e3fn"),gN=require("../common/gN"),adjust_lon=require("../common/adjust_lon"),adjust_lat=require("../common/adjust_lat"),imlfn=require("../common/imlfn"),HALF_PI=Math.PI/2,EPSLN=1e-10;exports.init=function(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))},exports.forward=function(p){var x,y,lam=p.x,phi=p.y;if(lam=adjust_lon(lam-this.long0),this.sphere)x=this.a*Math.asin(Math.cos(phi)*Math.sin(lam)),y=this.a*(Math.atan2(Math.tan(phi),Math.cos(lam))-this.lat0);else{var sinphi=Math.sin(phi),cosphi=Math.cos(phi),nl=gN(this.a,this.e,sinphi),tl=Math.tan(phi)*Math.tan(phi),al=lam*Math.cos(phi),asq=al*al,cl=this.es*cosphi*cosphi/(1-this.es),ml=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,phi);x=nl*al*(1-asq*tl*(1/6-(8-tl+8*cl)*asq/120)),y=ml-this.ml0+nl*sinphi/cosphi*asq*(.5+(5-tl+6*cl)*asq/24)}return p.x=x+this.x0,p.y=y+this.y0,p},exports.inverse=function(p){p.x-=this.x0,p.y-=this.y0;var phi,lam,x=p.x/this.a,y=p.y/this.a;if(this.sphere){var dd=y+this.lat0;phi=Math.asin(Math.sin(dd)*Math.cos(x)),lam=Math.atan2(Math.tan(x),Math.cos(dd))}else{var ml1=this.ml0/this.a+y,phi1=imlfn(ml1,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(phi1)-HALF_PI)<=EPSLN)return p.x=this.long0,p.y=HALF_PI,0>y&&(p.y*=-1),p;var nl1=gN(this.a,this.e,Math.sin(phi1)),rl1=nl1*nl1*nl1/this.a/this.a*(1-this.es),tl1=Math.pow(Math.tan(phi1),2),dl=x*this.a/nl1,dsq=dl*dl;phi=phi1-nl1*Math.tan(phi1)/rl1*dl*dl*(.5-(1+3*tl1)*dl*dl/24),lam=dl*(1-dsq*(tl1/3+(1+3*tl1)*tl1*dsq/15))/Math.cos(phi1)}return p.x=adjust_lon(lam+this.long0),p.y=adjust_lat(phi),p},exports.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":28,"../common/adjust_lon":29,"../common/e0fn":31,"../common/e1fn":32,"../common/e2fn":33,"../common/e3fn":34,"../common/gN":35,"../common/imlfn":36,"../common/mlfn":38}],68:[function(require,module,exports){var adjust_lon=require("../common/adjust_lon"),qsfnz=require("../common/qsfnz"),msfnz=require("../common/msfnz"),iqsfnz=require("../common/iqsfnz");exports.init=function(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},exports.forward=function(p){var x,y,lon=p.x,lat=p.y,dlon=adjust_lon(lon-this.long0);if(this.sphere)x=this.x0+this.a*dlon*Math.cos(this.lat_ts),y=this.y0+this.a*Math.sin(lat)/Math.cos(this.lat_ts);else{var qs=qsfnz(this.e,Math.sin(lat));x=this.x0+this.a*this.k0*dlon,y=this.y0+this.a*qs*.5/this.k0}return p.x=x,p.y=y,p},exports.inverse=function(p){p.x-=this.x0,p.y-=this.y0;var lon,lat;return this.sphere?(lon=adjust_lon(this.long0+p.x/this.a/Math.cos(this.lat_ts)),lat=Math.asin(p.y/this.a*Math.cos(this.lat_ts))):(lat=iqsfnz(this.e,2*p.y*this.k0/this.a),lon=adjust_lon(this.long0+p.x/(this.a*this.k0))),p.x=lon,p.y=lat,p},exports.names=["cea"]},{"../common/adjust_lon":29,"../common/iqsfnz":37,"../common/msfnz":39,"../common/qsfnz":44}],69:[function(require,module,exports){var adjust_lon=require("../common/adjust_lon"),adjust_lat=require("../common/adjust_lat");exports.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},exports.forward=function(p){var lon=p.x,lat=p.y,dlon=adjust_lon(lon-this.long0),dlat=adjust_lat(lat-this.lat0);return p.x=this.x0+this.a*dlon*this.rc,p.y=this.y0+this.a*dlat,p},exports.inverse=function(p){var x=p.x,y=p.y;return p.x=adjust_lon(this.long0+(x-this.x0)/(this.a*this.rc)),p.y=adjust_lat(this.lat0+(y-this.y0)/this.a),p},exports.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":28,"../common/adjust_lon":29}],70:[function(require,module,exports){var e0fn=require("../common/e0fn"),e1fn=require("../common/e1fn"),e2fn=require("../common/e2fn"),e3fn=require("../common/e3fn"),msfnz=require("../common/msfnz"),mlfn=require("../common/mlfn"),adjust_lon=require("../common/adjust_lon"),adjust_lat=require("../common/adjust_lat"),imlfn=require("../common/imlfn"),EPSLN=1e-10;exports.init=function(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},exports.forward=function(p){var rh1,lon=p.x,lat=p.y;if(this.sphere)rh1=this.a*(this.g-lat);else{var ml=mlfn(this.e0,this.e1,this.e2,this.e3,lat);rh1=this.a*(this.g-ml)}var theta=this.ns*adjust_lon(lon-this.long0),x=this.x0+rh1*Math.sin(theta),y=this.y0+this.rh-rh1*Math.cos(theta);return p.x=x,p.y=y,p},exports.inverse=function(p){p.x-=this.x0,p.y=this.rh-p.y+this.y0;var con,rh1,lat,lon;this.ns>=0?(rh1=Math.sqrt(p.x*p.x+p.y*p.y),con=1):(rh1=-Math.sqrt(p.x*p.x+p.y*p.y),con=-1);var theta=0;if(0!==rh1&&(theta=Math.atan2(con*p.x,con*p.y)),this.sphere)return lon=adjust_lon(this.long0+theta/this.ns),lat=adjust_lat(this.g-rh1/this.a),p.x=lon,p.y=lat,p;var ml=this.g-rh1/this.a;return lat=imlfn(ml,this.e0,this.e1,this.e2,this.e3),lon=adjust_lon(this.long0+theta/this.ns),p.x=lon,p.y=lat,p},exports.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":28,"../common/adjust_lon":29,"../common/e0fn":31,"../common/e1fn":32,"../common/e2fn":33,"../common/e3fn":34,"../common/imlfn":36,"../common/mlfn":38,"../common/msfnz":39}],71:[function(require,module,exports){var FORTPI=Math.PI/4,srat=require("../common/srat"),HALF_PI=Math.PI/2,MAX_ITER=20;exports.init=function(){var sphi=Math.sin(this.lat0),cphi=Math.cos(this.lat0);cphi*=cphi,this.rc=Math.sqrt(1-this.es)/(1-this.es*sphi*sphi),this.C=Math.sqrt(1+this.es*cphi*cphi/(1-this.es)),this.phic0=Math.asin(sphi/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*sphi,this.ratexp))},exports.forward=function(p){var lon=p.x,lat=p.y;return p.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*lat+FORTPI),this.C)*srat(this.e*Math.sin(lat),this.ratexp))-HALF_PI,p.x=this.C*lon,p},exports.inverse=function(p){for(var DEL_TOL=1e-14,lon=p.x/this.C,lat=p.y,num=Math.pow(Math.tan(.5*lat+FORTPI)/this.K,1/this.C),i=MAX_ITER;i>0&&(lat=2*Math.atan(num*srat(this.e*Math.sin(p.y),-.5*this.e))-HALF_PI,!(Math.abs(lat-p.y)<DEL_TOL));--i)p.y=lat;return i?(p.x=lon,p.y=lat,p):null},exports.names=["gauss"]},{"../common/srat":46}],72:[function(require,module,exports){var adjust_lon=require("../common/adjust_lon"),EPSLN=1e-10,asinz=require("../common/asinz");exports.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),
this.infinity_dist=1e3*this.a,this.rc=1},exports.forward=function(p){var sinphi,cosphi,dlon,coslon,ksp,g,x,y,lon=p.x,lat=p.y;return dlon=adjust_lon(lon-this.long0),sinphi=Math.sin(lat),cosphi=Math.cos(lat),coslon=Math.cos(dlon),g=this.sin_p14*sinphi+this.cos_p14*cosphi*coslon,ksp=1,g>0||Math.abs(g)<=EPSLN?(x=this.x0+this.a*ksp*cosphi*Math.sin(dlon)/g,y=this.y0+this.a*ksp*(this.cos_p14*sinphi-this.sin_p14*cosphi*coslon)/g):(x=this.x0+this.infinity_dist*cosphi*Math.sin(dlon),y=this.y0+this.infinity_dist*(this.cos_p14*sinphi-this.sin_p14*cosphi*coslon)),p.x=x,p.y=y,p},exports.inverse=function(p){var rh,sinc,cosc,c,lon,lat;return p.x=(p.x-this.x0)/this.a,p.y=(p.y-this.y0)/this.a,p.x/=this.k0,p.y/=this.k0,(rh=Math.sqrt(p.x*p.x+p.y*p.y))?(c=Math.atan2(rh,this.rc),sinc=Math.sin(c),cosc=Math.cos(c),lat=asinz(cosc*this.sin_p14+p.y*sinc*this.cos_p14/rh),lon=Math.atan2(p.x*sinc,rh*this.cos_p14*cosc-p.y*this.sin_p14*sinc),lon=adjust_lon(this.long0+lon)):(lat=this.phic0,lon=0),p.x=lon,p.y=lat,p},exports.names=["gnom"]},{"../common/adjust_lon":29,"../common/asinz":30}],73:[function(require,module,exports){var adjust_lon=require("../common/adjust_lon");exports.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},exports.forward=function(p){var gfi,u,deltav,s,d,eps,ro,lon=p.x,lat=p.y,delta_lon=adjust_lon(lon-this.long0);return gfi=Math.pow((1+this.e*Math.sin(lat))/(1-this.e*Math.sin(lat)),this.alfa*this.e/2),u=2*(Math.atan(this.k*Math.pow(Math.tan(lat/2+this.s45),this.alfa)/gfi)-this.s45),deltav=-delta_lon*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(u)+Math.sin(this.ad)*Math.cos(u)*Math.cos(deltav)),d=Math.asin(Math.cos(u)*Math.sin(deltav)/Math.cos(s)),eps=this.n*d,ro=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),p.y=ro*Math.cos(eps)/1,p.x=ro*Math.sin(eps)/1,this.czech||(p.y*=-1,p.x*=-1),p},exports.inverse=function(p){var u,deltav,s,d,eps,ro,fi1,ok,tmp=p.x;p.x=p.y,p.y=tmp,this.czech||(p.y*=-1,p.x*=-1),ro=Math.sqrt(p.x*p.x+p.y*p.y),eps=Math.atan2(p.y,p.x),d=eps/Math.sin(this.s0),s=2*(Math.atan(Math.pow(this.ro0/ro,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),u=Math.asin(Math.cos(this.ad)*Math.sin(s)-Math.sin(this.ad)*Math.cos(s)*Math.cos(d)),deltav=Math.asin(Math.cos(s)*Math.sin(d)/Math.cos(u)),p.x=this.long0-deltav/this.alfa,fi1=u,ok=0;var iter=0;do p.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(u/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(fi1))/(1-this.e*Math.sin(fi1)),this.e/2))-this.s45),Math.abs(fi1-p.y)<1e-10&&(ok=1),fi1=p.y,iter+=1;while(0===ok&&15>iter);return iter>=15?null:p},exports.names=["Krovak","krovak"]},{"../common/adjust_lon":29}],74:[function(require,module,exports){var HALF_PI=Math.PI/2,FORTPI=Math.PI/4,EPSLN=1e-10,qsfnz=require("../common/qsfnz"),adjust_lon=require("../common/adjust_lon");exports.S_POLE=1,exports.N_POLE=2,exports.EQUIT=3,exports.OBLIQ=4,exports.init=function(){var t=Math.abs(this.lat0);if(Math.abs(t-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var sinphi;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),sinphi=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,sinphi)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*sinphi*sinphi)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},exports.forward=function(p){var x,y,coslam,sinlam,sinphi,q,sinb,cosb,b,cosphi,lam=p.x,phi=p.y;if(lam=adjust_lon(lam-this.long0),this.sphere){if(sinphi=Math.sin(phi),cosphi=Math.cos(phi),coslam=Math.cos(lam),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(y=this.mode===this.EQUIT?1+cosphi*coslam:1+this.sinph0*sinphi+this.cosph0*cosphi*coslam,EPSLN>=y)return null;y=Math.sqrt(2/y),x=y*cosphi*Math.sin(lam),y*=this.mode===this.EQUIT?sinphi:this.cosph0*sinphi-this.sinph0*cosphi*coslam}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(coslam=-coslam),Math.abs(phi+this.phi0)<EPSLN)return null;y=FORTPI-.5*phi,y=2*(this.mode===this.S_POLE?Math.cos(y):Math.sin(y)),x=y*Math.sin(lam),y*=coslam}}else{switch(sinb=0,cosb=0,b=0,coslam=Math.cos(lam),sinlam=Math.sin(lam),sinphi=Math.sin(phi),q=qsfnz(this.e,sinphi),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(sinb=q/this.qp,cosb=Math.sqrt(1-sinb*sinb)),this.mode){case this.OBLIQ:b=1+this.sinb1*sinb+this.cosb1*cosb*coslam;break;case this.EQUIT:b=1+cosb*coslam;break;case this.N_POLE:b=HALF_PI+phi,q=this.qp-q;break;case this.S_POLE:b=phi-HALF_PI,q=this.qp+q}if(Math.abs(b)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:b=Math.sqrt(2/b),y=this.mode===this.OBLIQ?this.ymf*b*(this.cosb1*sinb-this.sinb1*cosb*coslam):(b=Math.sqrt(2/(1+cosb*coslam)))*sinb*this.ymf,x=this.xmf*b*cosb*sinlam;break;case this.N_POLE:case this.S_POLE:q>=0?(x=(b=Math.sqrt(q))*sinlam,y=coslam*(this.mode===this.S_POLE?b:-b)):x=y=0}}return p.x=this.a*x+this.x0,p.y=this.a*y+this.y0,p},exports.inverse=function(p){p.x-=this.x0,p.y-=this.y0;var lam,phi,cCe,sCe,q,rho,ab,x=p.x/this.a,y=p.y/this.a;if(this.sphere){var rh,cosz=0,sinz=0;if(rh=Math.sqrt(x*x+y*y),phi=.5*rh,phi>1)return null;switch(phi=2*Math.asin(phi),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(sinz=Math.sin(phi),cosz=Math.cos(phi)),this.mode){case this.EQUIT:phi=Math.abs(rh)<=EPSLN?0:Math.asin(y*sinz/rh),x*=sinz,y=cosz*rh;break;case this.OBLIQ:phi=Math.abs(rh)<=EPSLN?this.phi0:Math.asin(cosz*this.sinph0+y*sinz*this.cosph0/rh),x*=sinz*this.cosph0,y=(cosz-Math.sin(phi)*this.sinph0)*rh;break;case this.N_POLE:y=-y,phi=HALF_PI-phi;break;case this.S_POLE:phi-=HALF_PI}lam=0!==y||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(x,y):0}else{if(ab=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(x/=this.dd,y*=this.dd,rho=Math.sqrt(x*x+y*y),EPSLN>rho)return p.x=0,p.y=this.phi0,p;sCe=2*Math.asin(.5*rho/this.rq),cCe=Math.cos(sCe),x*=sCe=Math.sin(sCe),this.mode===this.OBLIQ?(ab=cCe*this.sinb1+y*sCe*this.cosb1/rho,q=this.qp*ab,y=rho*this.cosb1*cCe-y*this.sinb1*sCe):(ab=y*sCe/rho,q=this.qp*ab,y=rho*cCe)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(y=-y),q=x*x+y*y,!q)return p.x=0,p.y=this.phi0,p;ab=1-q/this.qp,this.mode===this.S_POLE&&(ab=-ab)}lam=Math.atan2(x,y),phi=this.authlat(Math.asin(ab),this.apa)}return p.x=adjust_lon(this.long0+lam),p.y=phi,p},exports.P00=.3333333333333333,exports.P01=.17222222222222222,exports.P02=.10257936507936508,exports.P10=.06388888888888888,exports.P11=.0664021164021164,exports.P20=.016415012942191543,exports.authset=function(es){var t,APA=[];return APA[0]=es*this.P00,t=es*es,APA[0]+=t*this.P01,APA[1]=t*this.P10,t*=es,APA[0]+=t*this.P02,APA[1]+=t*this.P11,APA[2]=t*this.P20,APA},exports.authlat=function(beta,APA){var t=beta+beta;return beta+APA[0]*Math.sin(t)+APA[1]*Math.sin(t+t)+APA[2]*Math.sin(t+t+t)},exports.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":29,"../common/qsfnz":44}],75:[function(require,module,exports){var EPSLN=1e-10,msfnz=require("../common/msfnz"),tsfnz=require("../common/tsfnz"),HALF_PI=Math.PI/2,sign=require("../common/sign"),adjust_lon=require("../common/adjust_lon"),phi2z=require("../common/phi2z");exports.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var temp=this.b/this.a;this.e=Math.sqrt(1-temp*temp);var sin1=Math.sin(this.lat1),cos1=Math.cos(this.lat1),ms1=msfnz(this.e,sin1,cos1),ts1=tsfnz(this.e,this.lat1,sin1),sin2=Math.sin(this.lat2),cos2=Math.cos(this.lat2),ms2=msfnz(this.e,sin2,cos2),ts2=tsfnz(this.e,this.lat2,sin2),ts0=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(ms1/ms2)/Math.log(ts1/ts2):this.ns=sin1,isNaN(this.ns)&&(this.ns=sin1),this.f0=ms1/(this.ns*Math.pow(ts1,this.ns)),this.rh=this.a*this.f0*Math.pow(ts0,this.ns),this.title||(this.title="Lambert Conformal Conic")}},exports.forward=function(p){var lon=p.x,lat=p.y;Math.abs(2*Math.abs(lat)-Math.PI)<=EPSLN&&(lat=sign(lat)*(HALF_PI-2*EPSLN));var ts,rh1,con=Math.abs(Math.abs(lat)-HALF_PI);if(con>EPSLN)ts=tsfnz(this.e,lat,Math.sin(lat)),rh1=this.a*this.f0*Math.pow(ts,this.ns);else{if(con=lat*this.ns,0>=con)return null;rh1=0}var theta=this.ns*adjust_lon(lon-this.long0);return p.x=this.k0*(rh1*Math.sin(theta))+this.x0,p.y=this.k0*(this.rh-rh1*Math.cos(theta))+this.y0,p},exports.inverse=function(p){var rh1,con,ts,lat,lon,x=(p.x-this.x0)/this.k0,y=this.rh-(p.y-this.y0)/this.k0;this.ns>0?(rh1=Math.sqrt(x*x+y*y),con=1):(rh1=-Math.sqrt(x*x+y*y),con=-1);var theta=0;if(0!==rh1&&(theta=Math.atan2(con*x,con*y)),0!==rh1||this.ns>0){if(con=1/this.ns,ts=Math.pow(rh1/(this.a*this.f0),con),lat=phi2z(this.e,ts),-9999===lat)return null}else lat=-HALF_PI;return lon=adjust_lon(theta/this.ns+this.long0),p.x=lon,p.y=lat,p},exports.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":29,"../common/msfnz":39,"../common/phi2z":40,"../common/sign":45,"../common/tsfnz":48}],76:[function(require,module,exports){function identity(pt){return pt}exports.init=function(){},exports.forward=identity,exports.inverse=identity,exports.names=["longlat","identity"]},{}],77:[function(require,module,exports){var msfnz=require("../common/msfnz"),HALF_PI=Math.PI/2,EPSLN=1e-10,R2D=57.29577951308232,adjust_lon=require("../common/adjust_lon"),FORTPI=Math.PI/4,tsfnz=require("../common/tsfnz"),phi2z=require("../common/phi2z");exports.init=function(){var con=this.b/this.a;this.es=1-con*con,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},exports.forward=function(p){var lon=p.x,lat=p.y;if(lat*R2D>90&&-90>lat*R2D&&lon*R2D>180&&-180>lon*R2D)return null;var x,y;if(Math.abs(Math.abs(lat)-HALF_PI)<=EPSLN)return null;if(this.sphere)x=this.x0+this.a*this.k0*adjust_lon(lon-this.long0),y=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*lat));else{var sinphi=Math.sin(lat),ts=tsfnz(this.e,lat,sinphi);x=this.x0+this.a*this.k0*adjust_lon(lon-this.long0),y=this.y0-this.a*this.k0*Math.log(ts)}return p.x=x,p.y=y,p},exports.inverse=function(p){var lon,lat,x=p.x-this.x0,y=p.y-this.y0;if(this.sphere)lat=HALF_PI-2*Math.atan(Math.exp(-y/(this.a*this.k0)));else{var ts=Math.exp(-y/(this.a*this.k0));if(lat=phi2z(this.e,ts),-9999===lat)return null}return lon=adjust_lon(this.long0+x/(this.a*this.k0)),p.x=lon,p.y=lat,p},exports.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":29,"../common/msfnz":39,"../common/phi2z":40,"../common/tsfnz":48}],78:[function(require,module,exports){var adjust_lon=require("../common/adjust_lon");exports.init=function(){},exports.forward=function(p){var lon=p.x,lat=p.y,dlon=adjust_lon(lon-this.long0),x=this.x0+this.a*dlon,y=this.y0+this.a*Math.log(Math.tan(Math.PI/4+lat/2.5))*1.25;return p.x=x,p.y=y,p},exports.inverse=function(p){p.x-=this.x0,p.y-=this.y0;var lon=adjust_lon(this.long0+p.x/this.a),lat=2.5*(Math.atan(Math.exp(.8*p.y/this.a))-Math.PI/4);return p.x=lon,p.y=lat,p},exports.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":29}],79:[function(require,module,exports){var adjust_lon=require("../common/adjust_lon"),EPSLN=1e-10;exports.init=function(){},exports.forward=function(p){for(var lon=p.x,lat=p.y,delta_lon=adjust_lon(lon-this.long0),theta=lat,con=Math.PI*Math.sin(lat),i=0;!0;i++){var delta_theta=-(theta+Math.sin(theta)-con)/(1+Math.cos(theta));if(theta+=delta_theta,Math.abs(delta_theta)<EPSLN)break}theta/=2,Math.PI/2-Math.abs(lat)<EPSLN&&(delta_lon=0);var x=.900316316158*this.a*delta_lon*Math.cos(theta)+this.x0,y=1.4142135623731*this.a*Math.sin(theta)+this.y0;return p.x=x,p.y=y,p},exports.inverse=function(p){var theta,arg;p.x-=this.x0,p.y-=this.y0,arg=p.y/(1.4142135623731*this.a),Math.abs(arg)>.999999999999&&(arg=.999999999999),theta=Math.asin(arg);var lon=adjust_lon(this.long0+p.x/(.900316316158*this.a*Math.cos(theta)));lon<-Math.PI&&(lon=-Math.PI),lon>Math.PI&&(lon=Math.PI),arg=(2*theta+Math.sin(2*theta))/Math.PI,Math.abs(arg)>1&&(arg=1);var lat=Math.asin(arg);return p.x=lon,p.y=lat,p},exports.names=["Mollweide","moll"]},{"../common/adjust_lon":29}],80:[function(require,module,exports){var SEC_TO_RAD=484813681109536e-20;exports.iterations=1,exports.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},exports.forward=function(p){var n,lon=p.x,lat=p.y,delta_lat=lat-this.lat0,delta_lon=lon-this.long0,d_phi=delta_lat/SEC_TO_RAD*1e-5,d_lambda=delta_lon,d_phi_n=1,d_psi=0;for(n=1;10>=n;n++)d_phi_n*=d_phi,d_psi+=this.A[n]*d_phi_n;var th_n_re1,th_n_im1,th_re=d_psi,th_im=d_lambda,th_n_re=1,th_n_im=0,z_re=0,z_im=0;for(n=1;6>=n;n++)th_n_re1=th_n_re*th_re-th_n_im*th_im,th_n_im1=th_n_im*th_re+th_n_re*th_im,th_n_re=th_n_re1,th_n_im=th_n_im1,z_re=z_re+this.B_re[n]*th_n_re-this.B_im[n]*th_n_im,z_im=z_im+this.B_im[n]*th_n_re+this.B_re[n]*th_n_im;return p.x=z_im*this.a+this.x0,p.y=z_re*this.a+this.y0,p},exports.inverse=function(p){var n,z_n_re1,z_n_im1,x=p.x,y=p.y,delta_x=x-this.x0,delta_y=y-this.y0,z_re=delta_y/this.a,z_im=delta_x/this.a,z_n_re=1,z_n_im=0,th_re=0,th_im=0;for(n=1;6>=n;n++)z_n_re1=z_n_re*z_re-z_n_im*z_im,z_n_im1=z_n_im*z_re+z_n_re*z_im,z_n_re=z_n_re1,z_n_im=z_n_im1,th_re=th_re+this.C_re[n]*z_n_re-this.C_im[n]*z_n_im,th_im=th_im+this.C_im[n]*z_n_re+this.C_re[n]*z_n_im;for(var i=0;i<this.iterations;i++){var th_n_re1,th_n_im1,th_n_re=th_re,th_n_im=th_im,num_re=z_re,num_im=z_im;for(n=2;6>=n;n++)th_n_re1=th_n_re*th_re-th_n_im*th_im,th_n_im1=th_n_im*th_re+th_n_re*th_im,th_n_re=th_n_re1,th_n_im=th_n_im1,num_re+=(n-1)*(this.B_re[n]*th_n_re-this.B_im[n]*th_n_im),num_im+=(n-1)*(this.B_im[n]*th_n_re+this.B_re[n]*th_n_im);th_n_re=1,th_n_im=0;var den_re=this.B_re[1],den_im=this.B_im[1];for(n=2;6>=n;n++)th_n_re1=th_n_re*th_re-th_n_im*th_im,th_n_im1=th_n_im*th_re+th_n_re*th_im,th_n_re=th_n_re1,th_n_im=th_n_im1,den_re+=n*(this.B_re[n]*th_n_re-this.B_im[n]*th_n_im),den_im+=n*(this.B_im[n]*th_n_re+this.B_re[n]*th_n_im);var den2=den_re*den_re+den_im*den_im;th_re=(num_re*den_re+num_im*den_im)/den2,th_im=(num_im*den_re-num_re*den_im)/den2}var d_psi=th_re,d_lambda=th_im,d_psi_n=1,d_phi=0;for(n=1;9>=n;n++)d_psi_n*=d_psi,d_phi+=this.D[n]*d_psi_n;var lat=this.lat0+d_phi*SEC_TO_RAD*1e5,lon=this.long0+d_lambda;return p.x=lon,p.y=lat,p},exports.names=["New_Zealand_Map_Grid","nzmg"]},{}],81:[function(require,module,exports){var tsfnz=require("../common/tsfnz"),adjust_lon=require("../common/adjust_lon"),phi2z=require("../common/phi2z"),HALF_PI=Math.PI/2,FORTPI=Math.PI/4,EPSLN=1e-10;exports.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var sinlat=Math.sin(this.lat0),coslat=Math.cos(this.lat0),con=this.e*sinlat;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(coslat,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-con*con);var t0=tsfnz(this.e,this.lat0,sinlat),dl=this.bl/coslat*Math.sqrt((1-this.es)/(1-con*con));1>dl*dl&&(dl=1);var fl,gl;if(isNaN(this.longc)){var t1=tsfnz(this.e,this.lat1,Math.sin(this.lat1)),t2=tsfnz(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(dl+Math.sqrt(dl*dl-1))*Math.pow(t0,this.bl):this.el=(dl-Math.sqrt(dl*dl-1))*Math.pow(t0,this.bl);var hl=Math.pow(t1,this.bl),ll=Math.pow(t2,this.bl);fl=this.el/hl,gl=.5*(fl-1/fl);var jl=(this.el*this.el-ll*hl)/(this.el*this.el+ll*hl),pl=(ll-hl)/(ll+hl),dlon12=adjust_lon(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(jl*Math.tan(.5*this.bl*dlon12)/pl)/this.bl,this.long0=adjust_lon(this.long0);var dlon10=adjust_lon(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*dlon10)/gl),this.alpha=Math.asin(dl*Math.sin(this.gamma0))}else fl=this.lat0>=0?dl+Math.sqrt(dl*dl-1):dl-Math.sqrt(dl*dl-1),this.el=fl*Math.pow(t0,this.bl),gl=.5*(fl-1/fl),this.gamma0=Math.asin(Math.sin(this.alpha)/dl),this.long0=this.longc-Math.asin(gl*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(dl*dl-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(dl*dl-1),Math.cos(this.alpha))},exports.forward=function(p){var us,vs,con,lon=p.x,lat=p.y,dlon=adjust_lon(lon-this.long0);if(Math.abs(Math.abs(lat)-HALF_PI)<=EPSLN)con=lat>0?-1:1,vs=this.al/this.bl*Math.log(Math.tan(FORTPI+con*this.gamma0*.5)),us=-1*con*HALF_PI*this.al/this.bl;else{var t=tsfnz(this.e,lat,Math.sin(lat)),ql=this.el/Math.pow(t,this.bl),sl=.5*(ql-1/ql),tl=.5*(ql+1/ql),vl=Math.sin(this.bl*dlon),ul=(sl*Math.sin(this.gamma0)-vl*Math.cos(this.gamma0))/tl;vs=Math.abs(Math.abs(ul)-1)<=EPSLN?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-ul)/(1+ul))/this.bl,us=Math.abs(Math.cos(this.bl*dlon))<=EPSLN?this.al*this.bl*dlon:this.al*Math.atan2(sl*Math.cos(this.gamma0)+vl*Math.sin(this.gamma0),Math.cos(this.bl*dlon))/this.bl}return this.no_rot?(p.x=this.x0+us,p.y=this.y0+vs):(us-=this.uc,p.x=this.x0+vs*Math.cos(this.alpha)+us*Math.sin(this.alpha),p.y=this.y0+us*Math.cos(this.alpha)-vs*Math.sin(this.alpha)),p},exports.inverse=function(p){var us,vs;this.no_rot?(vs=p.y-this.y0,us=p.x-this.x0):(vs=(p.x-this.x0)*Math.cos(this.alpha)-(p.y-this.y0)*Math.sin(this.alpha),us=(p.y-this.y0)*Math.cos(this.alpha)+(p.x-this.x0)*Math.sin(this.alpha),us+=this.uc);var qp=Math.exp(-1*this.bl*vs/this.al),sp=.5*(qp-1/qp),tp=.5*(qp+1/qp),vp=Math.sin(this.bl*us/this.al),up=(vp*Math.cos(this.gamma0)+sp*Math.sin(this.gamma0))/tp,ts=Math.pow(this.el/Math.sqrt((1+up)/(1-up)),1/this.bl);return Math.abs(up-1)<EPSLN?(p.x=this.long0,p.y=HALF_PI):Math.abs(up+1)<EPSLN?(p.x=this.long0,p.y=-1*HALF_PI):(p.y=phi2z(this.e,ts),p.x=adjust_lon(this.long0-Math.atan2(sp*Math.cos(this.gamma0)-vp*Math.sin(this.gamma0),Math.cos(this.bl*us/this.al))/this.bl)),p},exports.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":29,"../common/phi2z":40,"../common/tsfnz":48}],82:[function(require,module,exports){var e0fn=require("../common/e0fn"),e1fn=require("../common/e1fn"),e2fn=require("../common/e2fn"),e3fn=require("../common/e3fn"),adjust_lon=require("../common/adjust_lon"),adjust_lat=require("../common/adjust_lat"),mlfn=require("../common/mlfn"),EPSLN=1e-10,gN=require("../common/gN"),MAX_ITER=20;exports.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},exports.forward=function(p){var x,y,el,lon=p.x,lat=p.y,dlon=adjust_lon(lon-this.long0);if(el=dlon*Math.sin(lat),this.sphere)Math.abs(lat)<=EPSLN?(x=this.a*dlon,y=-1*this.a*this.lat0):(x=this.a*Math.sin(el)/Math.tan(lat),y=this.a*(adjust_lat(lat-this.lat0)+(1-Math.cos(el))/Math.tan(lat)));else if(Math.abs(lat)<=EPSLN)x=this.a*dlon,y=-1*this.ml0;else{var nl=gN(this.a,this.e,Math.sin(lat))/Math.tan(lat);x=nl*Math.sin(el),y=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,lat)-this.ml0+nl*(1-Math.cos(el))}return p.x=x+this.x0,p.y=y+this.y0,p},exports.inverse=function(p){var lon,lat,x,y,i,al,bl,phi,dphi;if(x=p.x-this.x0,y=p.y-this.y0,this.sphere)if(Math.abs(y+this.a*this.lat0)<=EPSLN)lon=adjust_lon(x/this.a+this.long0),lat=0;else{al=this.lat0+y/this.a,bl=x*x/this.a/this.a+al*al,phi=al;var tanphi;for(i=MAX_ITER;i;--i)if(tanphi=Math.tan(phi),dphi=-1*(al*(phi*tanphi+1)-phi-.5*(phi*phi+bl)*tanphi)/((phi-al)/tanphi-1),phi+=dphi,Math.abs(dphi)<=EPSLN){lat=phi;break}lon=adjust_lon(this.long0+Math.asin(x*Math.tan(phi)/this.a)/Math.sin(lat))}else if(Math.abs(y+this.ml0)<=EPSLN)lat=0,lon=adjust_lon(this.long0+x/this.a);else{al=(this.ml0+y)/this.a,bl=x*x/this.a/this.a+al*al,phi=al;var cl,mln,mlnp,ma,con;for(i=MAX_ITER;i;--i)if(con=this.e*Math.sin(phi),cl=Math.sqrt(1-con*con)*Math.tan(phi),mln=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,phi),mlnp=this.e0-2*this.e1*Math.cos(2*phi)+4*this.e2*Math.cos(4*phi)-6*this.e3*Math.cos(6*phi),ma=mln/this.a,dphi=(al*(cl*ma+1)-ma-.5*cl*(ma*ma+bl))/(this.es*Math.sin(2*phi)*(ma*ma+bl-2*al*ma)/(4*cl)+(al-ma)*(cl*mlnp-2/Math.sin(2*phi))-mlnp),phi-=dphi,Math.abs(dphi)<=EPSLN){lat=phi;break}cl=Math.sqrt(1-this.es*Math.pow(Math.sin(lat),2))*Math.tan(lat),lon=adjust_lon(this.long0+Math.asin(x*cl/this.a)/Math.sin(lat))}return p.x=lon,p.y=lat,p},exports.names=["Polyconic","poly"]},{"../common/adjust_lat":28,"../common/adjust_lon":29,"../common/e0fn":31,"../common/e1fn":32,"../common/e2fn":33,"../common/e3fn":34,"../common/gN":35,"../common/mlfn":38}],83:[function(require,module,exports){var adjust_lon=require("../common/adjust_lon"),adjust_lat=require("../common/adjust_lat"),pj_enfn=require("../common/pj_enfn"),MAX_ITER=20,pj_mlfn=require("../common/pj_mlfn"),pj_inv_mlfn=require("../common/pj_inv_mlfn"),HALF_PI=Math.PI/2,EPSLN=1e-10,asinz=require("../common/asinz");exports.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)},exports.forward=function(p){var x,y,lon=p.x,lat=p.y;if(lon=adjust_lon(lon-this.long0),this.sphere){if(this.m)for(var k=this.n*Math.sin(lat),i=MAX_ITER;i;--i){var V=(this.m*lat+Math.sin(lat)-k)/(this.m+Math.cos(lat));if(lat-=V,Math.abs(V)<EPSLN)break}else lat=1!==this.n?Math.asin(this.n*Math.sin(lat)):lat;x=this.a*this.C_x*lon*(this.m+Math.cos(lat)),y=this.a*this.C_y*lat}else{var s=Math.sin(lat),c=Math.cos(lat);y=this.a*pj_mlfn(lat,s,c,this.en),x=this.a*lon*c/Math.sqrt(1-this.es*s*s)}return p.x=x,p.y=y,p},exports.inverse=function(p){var lat,temp,lon,s;return p.x-=this.x0,lon=p.x/this.a,p.y-=this.y0,lat=p.y/this.a,this.sphere?(lat/=this.C_y,lon/=this.C_x*(this.m+Math.cos(lat)),this.m?lat=asinz((this.m*lat+Math.sin(lat))/this.n):1!==this.n&&(lat=asinz(Math.sin(lat)/this.n)),lon=adjust_lon(lon+this.long0),lat=adjust_lat(lat)):(lat=pj_inv_mlfn(p.y/this.a,this.es,this.en),s=Math.abs(lat),HALF_PI>s?(s=Math.sin(lat),temp=this.long0+p.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(lat)),lon=adjust_lon(temp)):HALF_PI>s-EPSLN&&(lon=this.long0)),p.x=lon,p.y=lat,p},exports.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":28,"../common/adjust_lon":29,"../common/asinz":30,"../common/pj_enfn":41,"../common/pj_inv_mlfn":42,"../common/pj_mlfn":43}],84:[function(require,module,exports){exports.init=function(){var phy0=this.lat0;this.lambda0=this.long0;var sinPhy0=Math.sin(phy0),semiMajorAxis=this.a,invF=this.rf,flattening=1/invF,e2=2*flattening-Math.pow(flattening,2),e=this.e=Math.sqrt(e2);this.R=this.k0*semiMajorAxis*Math.sqrt(1-e2)/(1-e2*Math.pow(sinPhy0,2)),this.alpha=Math.sqrt(1+e2/(1-e2)*Math.pow(Math.cos(phy0),4)),this.b0=Math.asin(sinPhy0/this.alpha);var k1=Math.log(Math.tan(Math.PI/4+this.b0/2)),k2=Math.log(Math.tan(Math.PI/4+phy0/2)),k3=Math.log((1+e*sinPhy0)/(1-e*sinPhy0));this.K=k1-this.alpha*k2+this.alpha*e/2*k3},exports.forward=function(p){var Sa1=Math.log(Math.tan(Math.PI/4-p.y/2)),Sa2=this.e/2*Math.log((1+this.e*Math.sin(p.y))/(1-this.e*Math.sin(p.y))),S=-this.alpha*(Sa1+Sa2)+this.K,b=2*(Math.atan(Math.exp(S))-Math.PI/4),I=this.alpha*(p.x-this.lambda0),rotI=Math.atan(Math.sin(I)/(Math.sin(this.b0)*Math.tan(b)+Math.cos(this.b0)*Math.cos(I))),rotB=Math.asin(Math.cos(this.b0)*Math.sin(b)-Math.sin(this.b0)*Math.cos(b)*Math.cos(I));return p.y=this.R/2*Math.log((1+Math.sin(rotB))/(1-Math.sin(rotB)))+this.y0,p.x=this.R*rotI+this.x0,p},exports.inverse=function(p){for(var Y=p.x-this.x0,X=p.y-this.y0,rotI=Y/this.R,rotB=2*(Math.atan(Math.exp(X/this.R))-Math.PI/4),b=Math.asin(Math.cos(this.b0)*Math.sin(rotB)+Math.sin(this.b0)*Math.cos(rotB)*Math.cos(rotI)),I=Math.atan(Math.sin(rotI)/(Math.cos(this.b0)*Math.cos(rotI)-Math.sin(this.b0)*Math.tan(rotB))),lambda=this.lambda0+I/this.alpha,S=0,phy=b,prevPhy=-1e3,iteration=0;Math.abs(phy-prevPhy)>1e-7;){if(++iteration>20)return;S=1/this.alpha*(Math.log(Math.tan(Math.PI/4+b/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(phy))/2)),prevPhy=phy,phy=2*Math.atan(Math.exp(S))-Math.PI/2}return p.x=lambda,p.y=phy,p},exports.names=["somerc"]},{}],85:[function(require,module,exports){var HALF_PI=Math.PI/2,EPSLN=1e-10,sign=require("../common/sign"),msfnz=require("../common/msfnz"),tsfnz=require("../common/tsfnz"),phi2z=require("../common/phi2z"),adjust_lon=require("../common/adjust_lon");exports.ssfn_=function(phit,sinphi,eccen){return sinphi*=eccen,Math.tan(.5*(HALF_PI+phit))*Math.pow((1-sinphi)/(1+sinphi),.5*eccen)},exports.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},exports.forward=function(p){var A,X,sinX,cosX,ts,rh,lon=p.x,lat=p.y,sinlat=Math.sin(lat),coslat=Math.cos(lat),dlon=adjust_lon(lon-this.long0);return Math.abs(Math.abs(lon-this.long0)-Math.PI)<=EPSLN&&Math.abs(lat+this.lat0)<=EPSLN?(p.x=NaN,p.y=NaN,p):this.sphere?(A=2*this.k0/(1+this.sinlat0*sinlat+this.coslat0*coslat*Math.cos(dlon)),p.x=this.a*A*coslat*Math.sin(dlon)+this.x0,p.y=this.a*A*(this.coslat0*sinlat-this.sinlat0*coslat*Math.cos(dlon))+this.y0,p):(X=2*Math.atan(this.ssfn_(lat,sinlat,this.e))-HALF_PI,cosX=Math.cos(X),sinX=Math.sin(X),Math.abs(this.coslat0)<=EPSLN?(ts=tsfnz(this.e,lat*this.con,this.con*sinlat),rh=2*this.a*this.k0*ts/this.cons,p.x=this.x0+rh*Math.sin(lon-this.long0),p.y=this.y0-this.con*rh*Math.cos(lon-this.long0),p):(Math.abs(this.sinlat0)<EPSLN?(A=2*this.a*this.k0/(1+cosX*Math.cos(dlon)),p.y=A*sinX):(A=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*sinX+this.cosX0*cosX*Math.cos(dlon))),p.y=A*(this.cosX0*sinX-this.sinX0*cosX*Math.cos(dlon))+this.y0),p.x=A*cosX*Math.sin(dlon)+this.x0,p))},exports.inverse=function(p){p.x-=this.x0,p.y-=this.y0;var lon,lat,ts,ce,Chi,rh=Math.sqrt(p.x*p.x+p.y*p.y);if(this.sphere){var c=2*Math.atan(rh/(.5*this.a*this.k0));return lon=this.long0,lat=this.lat0,EPSLN>=rh?(p.x=lon,p.y=lat,p):(lat=Math.asin(Math.cos(c)*this.sinlat0+p.y*Math.sin(c)*this.coslat0/rh),lon=adjust_lon(Math.abs(this.coslat0)<EPSLN?this.lat0>0?this.long0+Math.atan2(p.x,-1*p.y):this.long0+Math.atan2(p.x,p.y):this.long0+Math.atan2(p.x*Math.sin(c),rh*this.coslat0*Math.cos(c)-p.y*this.sinlat0*Math.sin(c))),p.x=lon,p.y=lat,p)}if(Math.abs(this.coslat0)<=EPSLN){if(EPSLN>=rh)return lat=this.lat0,lon=this.long0,p.x=lon,p.y=lat,p;p.x*=this.con,p.y*=this.con,ts=rh*this.cons/(2*this.a*this.k0),lat=this.con*phi2z(this.e,ts),lon=this.con*adjust_lon(this.con*this.long0+Math.atan2(p.x,-1*p.y))}else ce=2*Math.atan(rh*this.cosX0/(2*this.a*this.k0*this.ms1)),lon=this.long0,EPSLN>=rh?Chi=this.X0:(Chi=Math.asin(Math.cos(ce)*this.sinX0+p.y*Math.sin(ce)*this.cosX0/rh),lon=adjust_lon(this.long0+Math.atan2(p.x*Math.sin(ce),rh*this.cosX0*Math.cos(ce)-p.y*this.sinX0*Math.sin(ce)))),lat=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+Chi)));return p.x=lon,p.y=lat,p},exports.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},{"../common/adjust_lon":29,"../common/msfnz":39,"../common/phi2z":40,"../common/sign":45,"../common/tsfnz":48}],86:[function(require,module,exports){var gauss=require("./gauss"),adjust_lon=require("../common/adjust_lon");exports.init=function(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},exports.forward=function(p){var sinc,cosc,cosl,k;return p.x=adjust_lon(p.x-this.long0),gauss.forward.apply(this,[p]),sinc=Math.sin(p.y),cosc=Math.cos(p.y),cosl=Math.cos(p.x),k=this.k0*this.R2/(1+this.sinc0*sinc+this.cosc0*cosc*cosl),p.x=k*cosc*Math.sin(p.x),p.y=k*(this.cosc0*sinc-this.sinc0*cosc*cosl),p.x=this.a*p.x+this.x0,p.y=this.a*p.y+this.y0,p},exports.inverse=function(p){var sinc,cosc,lon,lat,rho;if(p.x=(p.x-this.x0)/this.a,p.y=(p.y-this.y0)/this.a,p.x/=this.k0,p.y/=this.k0,rho=Math.sqrt(p.x*p.x+p.y*p.y)){var c=2*Math.atan2(rho,this.R2);sinc=Math.sin(c),cosc=Math.cos(c),lat=Math.asin(cosc*this.sinc0+p.y*sinc*this.cosc0/rho),lon=Math.atan2(p.x*sinc,rho*this.cosc0*cosc-p.y*this.sinc0*sinc)}else lat=this.phic0,lon=0;return p.x=lon,p.y=lat,gauss.inverse.apply(this,[p]),p.x=adjust_lon(p.x+this.long0),p},exports.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":29,"./gauss":71}],87:[function(require,module,exports){var e0fn=require("../common/e0fn"),e1fn=require("../common/e1fn"),e2fn=require("../common/e2fn"),e3fn=require("../common/e3fn"),mlfn=require("../common/mlfn"),adjust_lon=require("../common/adjust_lon"),HALF_PI=Math.PI/2,EPSLN=1e-10,sign=require("../common/sign"),asinz=require("../common/asinz");exports.init=function(){this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)},exports.forward=function(p){var con,x,y,lon=p.x,lat=p.y,delta_lon=adjust_lon(lon-this.long0),sin_phi=Math.sin(lat),cos_phi=Math.cos(lat);if(this.sphere){var b=cos_phi*Math.sin(delta_lon);if(Math.abs(Math.abs(b)-1)<1e-10)return 93;x=.5*this.a*this.k0*Math.log((1+b)/(1-b)),
con=Math.acos(cos_phi*Math.cos(delta_lon)/Math.sqrt(1-b*b)),0>lat&&(con=-con),y=this.a*this.k0*(con-this.lat0)}else{var al=cos_phi*delta_lon,als=Math.pow(al,2),c=this.ep2*Math.pow(cos_phi,2),tq=Math.tan(lat),t=Math.pow(tq,2);con=1-this.es*Math.pow(sin_phi,2);var n=this.a/Math.sqrt(con),ml=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,lat);x=this.k0*n*al*(1+als/6*(1-t+c+als/20*(5-18*t+Math.pow(t,2)+72*c-58*this.ep2)))+this.x0,y=this.k0*(ml-this.ml0+n*tq*(als*(.5+als/24*(5-t+9*c+4*Math.pow(c,2)+als/30*(61-58*t+Math.pow(t,2)+600*c-330*this.ep2)))))+this.y0}return p.x=x,p.y=y,p},exports.inverse=function(p){var con,phi,delta_phi,i,lat,lon,max_iter=6;if(this.sphere){var f=Math.exp(p.x/(this.a*this.k0)),g=.5*(f-1/f),temp=this.lat0+p.y/(this.a*this.k0),h=Math.cos(temp);con=Math.sqrt((1-h*h)/(1+g*g)),lat=asinz(con),0>temp&&(lat=-lat),lon=0===g&&0===h?this.long0:adjust_lon(Math.atan2(g,h)+this.long0)}else{var x=p.x-this.x0,y=p.y-this.y0;for(con=(this.ml0+y/this.k0)/this.a,phi=con,i=0;!0&&(delta_phi=(con+this.e1*Math.sin(2*phi)-this.e2*Math.sin(4*phi)+this.e3*Math.sin(6*phi))/this.e0-phi,phi+=delta_phi,!(Math.abs(delta_phi)<=EPSLN));i++)if(i>=max_iter)return 95;if(Math.abs(phi)<HALF_PI){var sin_phi=Math.sin(phi),cos_phi=Math.cos(phi),tan_phi=Math.tan(phi),c=this.ep2*Math.pow(cos_phi,2),cs=Math.pow(c,2),t=Math.pow(tan_phi,2),ts=Math.pow(t,2);con=1-this.es*Math.pow(sin_phi,2);var n=this.a/Math.sqrt(con),r=n*(1-this.es)/con,d=x/(n*this.k0),ds=Math.pow(d,2);lat=phi-n*tan_phi*ds/r*(.5-ds/24*(5+3*t+10*c-4*cs-9*this.ep2-ds/30*(61+90*t+298*c+45*ts-252*this.ep2-3*cs))),lon=adjust_lon(this.long0+d*(1-ds/6*(1+2*t+c-ds/20*(5-2*c+28*t-3*cs+8*this.ep2+24*ts)))/cos_phi)}else lat=HALF_PI*sign(y),lon=this.long0}return p.x=lon,p.y=lat,p},exports.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":29,"../common/asinz":30,"../common/e0fn":31,"../common/e1fn":32,"../common/e2fn":33,"../common/e3fn":34,"../common/mlfn":38,"../common/sign":45}],88:[function(require,module,exports){var D2R=.017453292519943295,tmerc=require("./tmerc");exports.dependsOn="tmerc",exports.init=function(){this.zone&&(this.lat0=0,this.long0=(6*Math.abs(this.zone)-183)*D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse)},exports.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":87}],89:[function(require,module,exports){var adjust_lon=require("../common/adjust_lon"),HALF_PI=Math.PI/2,EPSLN=1e-10,asinz=require("../common/asinz");exports.init=function(){this.R=this.a},exports.forward=function(p){var x,y,lon=p.x,lat=p.y,dlon=adjust_lon(lon-this.long0);Math.abs(lat)<=EPSLN&&(x=this.x0+this.R*dlon,y=this.y0);var theta=asinz(2*Math.abs(lat/Math.PI));(Math.abs(dlon)<=EPSLN||Math.abs(Math.abs(lat)-HALF_PI)<=EPSLN)&&(x=this.x0,y=lat>=0?this.y0+Math.PI*this.R*Math.tan(.5*theta):this.y0+Math.PI*this.R*-Math.tan(.5*theta));var al=.5*Math.abs(Math.PI/dlon-dlon/Math.PI),asq=al*al,sinth=Math.sin(theta),costh=Math.cos(theta),g=costh/(sinth+costh-1),gsq=g*g,m=g*(2/sinth-1),msq=m*m,con=Math.PI*this.R*(al*(g-msq)+Math.sqrt(asq*(g-msq)*(g-msq)-(msq+asq)*(gsq-msq)))/(msq+asq);0>dlon&&(con=-con),x=this.x0+con;var q=asq+g;return con=Math.PI*this.R*(m*q-al*Math.sqrt((msq+asq)*(asq+1)-q*q))/(msq+asq),y=lat>=0?this.y0+con:this.y0-con,p.x=x,p.y=y,p},exports.inverse=function(p){var lon,lat,xx,yy,xys,c1,c2,c3,a1,m1,con,th1,d;return p.x-=this.x0,p.y-=this.y0,con=Math.PI*this.R,xx=p.x/con,yy=p.y/con,xys=xx*xx+yy*yy,c1=-Math.abs(yy)*(1+xys),c2=c1-2*yy*yy+xx*xx,c3=-2*c1+1+2*yy*yy+xys*xys,d=yy*yy/c3+(2*c2*c2*c2/c3/c3/c3-9*c1*c2/c3/c3)/27,a1=(c1-c2*c2/3/c3)/c3,m1=2*Math.sqrt(-a1/3),con=3*d/a1/m1,Math.abs(con)>1&&(con=con>=0?1:-1),th1=Math.acos(con)/3,lat=p.y>=0?(-m1*Math.cos(th1+Math.PI/3)-c2/3/c3)*Math.PI:-(-m1*Math.cos(th1+Math.PI/3)-c2/3/c3)*Math.PI,lon=Math.abs(xx)<EPSLN?this.long0:adjust_lon(this.long0+Math.PI*(xys-1+Math.sqrt(1+2*(xx*xx-yy*yy)+xys*xys))/2/xx),p.x=lon,p.y=lat,p},exports.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":29,"../common/asinz":30}],90:[function(require,module,exports){var D2R=.017453292519943295,R2D=57.29577951308232,PJD_3PARAM=1,PJD_7PARAM=2,datum_transform=require("./datum_transform"),adjust_axis=require("./adjust_axis"),proj=require("./Proj"),toPoint=require("./common/toPoint");module.exports=function transform(source,dest,point){function checkNotWGS(source,dest){return(source.datum.datum_type===PJD_3PARAM||source.datum.datum_type===PJD_7PARAM)&&"WGS84"!==dest.datumCode}var wgs84;return Array.isArray(point)&&(point=toPoint(point)),source.datum&&dest.datum&&(checkNotWGS(source,dest)||checkNotWGS(dest,source))&&(wgs84=new proj("WGS84"),transform(source,wgs84,point),source=wgs84),"enu"!==source.axis&&adjust_axis(source,!1,point),"longlat"===source.projName?(point.x*=D2R,point.y*=D2R):(source.to_meter&&(point.x*=source.to_meter,point.y*=source.to_meter),source.inverse(point)),source.from_greenwich&&(point.x+=source.from_greenwich),point=datum_transform(source.datum,dest.datum,point),dest.from_greenwich&&(point.x-=dest.from_greenwich),"longlat"===dest.projName?(point.x*=R2D,point.y*=R2D):(dest.forward(point),dest.to_meter&&(point.x/=dest.to_meter,point.y/=dest.to_meter)),"enu"!==dest.axis&&adjust_axis(dest,!0,point),point}},{"./Proj":26,"./adjust_axis":27,"./common/toPoint":47,"./datum_transform":55}],91:[function(require,module,exports){function mapit(obj,key,v){obj[key]=v.map(function(aa){var o={};return sExpr(aa,o),o}).reduce(function(a,b){return extend(a,b)},{})}function sExpr(v,obj){var key;return Array.isArray(v)?(key=v.shift(),"PARAMETER"===key&&(key=v.shift()),1===v.length?Array.isArray(v[0])?(obj[key]={},sExpr(v[0],obj[key])):obj[key]=v[0]:v.length?"TOWGS84"===key?obj[key]=v:(obj[key]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(key)>-1?(obj[key]={name:v[0].toLowerCase(),convert:v[1]},3===v.length&&(obj[key].auth=v[2])):"SPHEROID"===key?(obj[key]={name:v[0],a:v[1],rf:v[2]},4===v.length&&(obj[key].auth=v[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(key)>-1?(v[0]=["name",v[0]],mapit(obj,key,v)):v.every(function(aa){return Array.isArray(aa)})?mapit(obj,key,v):sExpr(v,obj[key])):obj[key]=!0,void 0):void(obj[v]=!0)}function rename(obj,params){var outName=params[0],inName=params[1];!(outName in obj)&&inName in obj&&(obj[outName]=obj[inName],3===params.length&&(obj[outName]=params[2](obj[outName])))}function d2r(input){return input*D2R}function cleanWKT(wkt){function toMeter(input){var ratio=wkt.to_meter||1;return parseFloat(input,10)*ratio}"GEOGCS"===wkt.type?wkt.projName="longlat":"LOCAL_CS"===wkt.type?(wkt.projName="identity",wkt.local=!0):"object"==typeof wkt.PROJECTION?wkt.projName=Object.keys(wkt.PROJECTION)[0]:wkt.projName=wkt.PROJECTION,wkt.UNIT&&(wkt.units=wkt.UNIT.name.toLowerCase(),"metre"===wkt.units&&(wkt.units="meter"),wkt.UNIT.convert&&(wkt.to_meter=parseFloat(wkt.UNIT.convert,10))),wkt.GEOGCS&&(wkt.GEOGCS.DATUM?wkt.datumCode=wkt.GEOGCS.DATUM.name.toLowerCase():wkt.datumCode=wkt.GEOGCS.name.toLowerCase(),"d_"===wkt.datumCode.slice(0,2)&&(wkt.datumCode=wkt.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===wkt.datumCode||"new_zealand_1949"===wkt.datumCode)&&(wkt.datumCode="nzgd49"),"wgs_1984"===wkt.datumCode&&("Mercator_Auxiliary_Sphere"===wkt.PROJECTION&&(wkt.sphere=!0),wkt.datumCode="wgs84"),"_ferro"===wkt.datumCode.slice(-6)&&(wkt.datumCode=wkt.datumCode.slice(0,-6)),"_jakarta"===wkt.datumCode.slice(-8)&&(wkt.datumCode=wkt.datumCode.slice(0,-8)),~wkt.datumCode.indexOf("belge")&&(wkt.datumCode="rnb72"),wkt.GEOGCS.DATUM&&wkt.GEOGCS.DATUM.SPHEROID&&(wkt.ellps=wkt.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===wkt.ellps.toLowerCase().slice(0,13)&&(wkt.ellps="intl"),wkt.a=wkt.GEOGCS.DATUM.SPHEROID.a,wkt.rf=parseFloat(wkt.GEOGCS.DATUM.SPHEROID.rf,10)),~wkt.datumCode.indexOf("osgb_1936")&&(wkt.datumCode="osgb36")),wkt.b&&!isFinite(wkt.b)&&(wkt.b=wkt.a);var renamer=function(a){return rename(wkt,a)},list=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",d2r],["x0","false_easting",toMeter],["y0","false_northing",toMeter],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["alpha","azimuth",d2r],["srsCode","name"]];list.forEach(renamer),wkt.long0||!wkt.longc||"Albers_Conic_Equal_Area"!==wkt.projName&&"Lambert_Azimuthal_Equal_Area"!==wkt.projName||(wkt.long0=wkt.longc),wkt.lat_ts||!wkt.lat1||"Stereographic_South_Pole"!==wkt.projName&&"Polar Stereographic (variant B)"!==wkt.projName||(wkt.lat0=d2r(wkt.lat1>0?90:-90),wkt.lat_ts=wkt.lat1)}var D2R=.017453292519943295,extend=require("./extend");module.exports=function(wkt,self){var lisp=JSON.parse((","+wkt).replace(/\s*\,\s*([A-Z_0-9]+?)(\[)/g,',["$1",').slice(1).replace(/\s*\,\s*([A-Z_0-9]+?)\]/g,',"$1"]').replace(/,\["VERTCS".+/,"")),type=lisp.shift(),name=lisp.shift();lisp.unshift(["name",name]),lisp.unshift(["type",type]),lisp.unshift("output");var obj={};return sExpr(lisp,obj),cleanWKT(obj.output),extend(self,obj.output)}},{"./extend":58}],92:[function(require,module,exports){function degToRad(deg){return deg*(Math.PI/180)}function radToDeg(rad){return 180*(rad/Math.PI)}function LLtoUTM(ll){var LongOrigin,eccPrimeSquared,N,T,C,A,M,LongOriginRad,ZoneNumber,Lat=ll.lat,Long=ll.lon,a=6378137,eccSquared=.00669438,k0=.9996,LatRad=degToRad(Lat),LongRad=degToRad(Long);ZoneNumber=Math.floor((Long+180)/6)+1,180===Long&&(ZoneNumber=60),Lat>=56&&64>Lat&&Long>=3&&12>Long&&(ZoneNumber=32),Lat>=72&&84>Lat&&(Long>=0&&9>Long?ZoneNumber=31:Long>=9&&21>Long?ZoneNumber=33:Long>=21&&33>Long?ZoneNumber=35:Long>=33&&42>Long&&(ZoneNumber=37)),LongOrigin=6*(ZoneNumber-1)-180+3,LongOriginRad=degToRad(LongOrigin),eccPrimeSquared=eccSquared/(1-eccSquared),N=a/Math.sqrt(1-eccSquared*Math.sin(LatRad)*Math.sin(LatRad)),T=Math.tan(LatRad)*Math.tan(LatRad),C=eccPrimeSquared*Math.cos(LatRad)*Math.cos(LatRad),A=Math.cos(LatRad)*(LongRad-LongOriginRad),M=a*((1-eccSquared/4-3*eccSquared*eccSquared/64-5*eccSquared*eccSquared*eccSquared/256)*LatRad-(3*eccSquared/8+3*eccSquared*eccSquared/32+45*eccSquared*eccSquared*eccSquared/1024)*Math.sin(2*LatRad)+(15*eccSquared*eccSquared/256+45*eccSquared*eccSquared*eccSquared/1024)*Math.sin(4*LatRad)-35*eccSquared*eccSquared*eccSquared/3072*Math.sin(6*LatRad));var UTMEasting=k0*N*(A+(1-T+C)*A*A*A/6+(5-18*T+T*T+72*C-58*eccPrimeSquared)*A*A*A*A*A/120)+5e5,UTMNorthing=k0*(M+N*Math.tan(LatRad)*(A*A/2+(5-T+9*C+4*C*C)*A*A*A*A/24+(61-58*T+T*T+600*C-330*eccPrimeSquared)*A*A*A*A*A*A/720));return 0>Lat&&(UTMNorthing+=1e7),{northing:Math.round(UTMNorthing),easting:Math.round(UTMEasting),zoneNumber:ZoneNumber,zoneLetter:getLetterDesignator(Lat)}}function UTMtoLL(utm){var UTMNorthing=utm.northing,UTMEasting=utm.easting,zoneLetter=utm.zoneLetter,zoneNumber=utm.zoneNumber;if(0>zoneNumber||zoneNumber>60)return null;var eccPrimeSquared,N1,T1,C1,R1,D,M,LongOrigin,mu,phi1Rad,k0=.9996,a=6378137,eccSquared=.00669438,e1=(1-Math.sqrt(1-eccSquared))/(1+Math.sqrt(1-eccSquared)),x=UTMEasting-5e5,y=UTMNorthing;"N">zoneLetter&&(y-=1e7),LongOrigin=6*(zoneNumber-1)-180+3,eccPrimeSquared=eccSquared/(1-eccSquared),M=y/k0,mu=M/(a*(1-eccSquared/4-3*eccSquared*eccSquared/64-5*eccSquared*eccSquared*eccSquared/256)),phi1Rad=mu+(3*e1/2-27*e1*e1*e1/32)*Math.sin(2*mu)+(21*e1*e1/16-55*e1*e1*e1*e1/32)*Math.sin(4*mu)+151*e1*e1*e1/96*Math.sin(6*mu),N1=a/Math.sqrt(1-eccSquared*Math.sin(phi1Rad)*Math.sin(phi1Rad)),T1=Math.tan(phi1Rad)*Math.tan(phi1Rad),C1=eccPrimeSquared*Math.cos(phi1Rad)*Math.cos(phi1Rad),R1=a*(1-eccSquared)/Math.pow(1-eccSquared*Math.sin(phi1Rad)*Math.sin(phi1Rad),1.5),D=x/(N1*k0);var lat=phi1Rad-N1*Math.tan(phi1Rad)/R1*(D*D/2-(5+3*T1+10*C1-4*C1*C1-9*eccPrimeSquared)*D*D*D*D/24+(61+90*T1+298*C1+45*T1*T1-252*eccPrimeSquared-3*C1*C1)*D*D*D*D*D*D/720);lat=radToDeg(lat);var lon=(D-(1+2*T1+C1)*D*D*D/6+(5-2*C1+28*T1-3*C1*C1+8*eccPrimeSquared+24*T1*T1)*D*D*D*D*D/120)/Math.cos(phi1Rad);lon=LongOrigin+radToDeg(lon);var result;if(utm.accuracy){var topRight=UTMtoLL({northing:utm.northing+utm.accuracy,easting:utm.easting+utm.accuracy,zoneLetter:utm.zoneLetter,zoneNumber:utm.zoneNumber});result={top:topRight.lat,right:topRight.lon,bottom:lat,left:lon}}else result={lat:lat,lon:lon};return result}function getLetterDesignator(lat){var LetterDesignator="Z";return 84>=lat&&lat>=72?LetterDesignator="X":72>lat&&lat>=64?LetterDesignator="W":64>lat&&lat>=56?LetterDesignator="V":56>lat&&lat>=48?LetterDesignator="U":48>lat&&lat>=40?LetterDesignator="T":40>lat&&lat>=32?LetterDesignator="S":32>lat&&lat>=24?LetterDesignator="R":24>lat&&lat>=16?LetterDesignator="Q":16>lat&&lat>=8?LetterDesignator="P":8>lat&&lat>=0?LetterDesignator="N":0>lat&&lat>=-8?LetterDesignator="M":-8>lat&&lat>=-16?LetterDesignator="L":-16>lat&&lat>=-24?LetterDesignator="K":-24>lat&&lat>=-32?LetterDesignator="J":-32>lat&&lat>=-40?LetterDesignator="H":-40>lat&&lat>=-48?LetterDesignator="G":-48>lat&&lat>=-56?LetterDesignator="F":-56>lat&&lat>=-64?LetterDesignator="E":-64>lat&&lat>=-72?LetterDesignator="D":-72>lat&&lat>=-80&&(LetterDesignator="C"),LetterDesignator}function encode(utm,accuracy){var seasting="00000"+utm.easting,snorthing="00000"+utm.northing;return utm.zoneNumber+utm.zoneLetter+get100kID(utm.easting,utm.northing,utm.zoneNumber)+seasting.substr(seasting.length-5,accuracy)+snorthing.substr(snorthing.length-5,accuracy)}function get100kID(easting,northing,zoneNumber){var setParm=get100kSetForZone(zoneNumber),setColumn=Math.floor(easting/1e5),setRow=Math.floor(northing/1e5)%20;return getLetter100kID(setColumn,setRow,setParm)}function get100kSetForZone(i){var setParm=i%NUM_100K_SETS;return 0===setParm&&(setParm=NUM_100K_SETS),setParm}function getLetter100kID(column,row,parm){var index=parm-1,colOrigin=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index),rowOrigin=SET_ORIGIN_ROW_LETTERS.charCodeAt(index),colInt=colOrigin+column-1,rowInt=rowOrigin+row,rollover=!1;colInt>Z&&(colInt=colInt-Z+A-1,rollover=!0),(colInt===I||I>colOrigin&&colInt>I||(colInt>I||I>colOrigin)&&rollover)&&colInt++,(colInt===O||O>colOrigin&&colInt>O||(colInt>O||O>colOrigin)&&rollover)&&(colInt++,colInt===I&&colInt++),colInt>Z&&(colInt=colInt-Z+A-1),rowInt>V?(rowInt=rowInt-V+A-1,rollover=!0):rollover=!1,(rowInt===I||I>rowOrigin&&rowInt>I||(rowInt>I||I>rowOrigin)&&rollover)&&rowInt++,(rowInt===O||O>rowOrigin&&rowInt>O||(rowInt>O||O>rowOrigin)&&rollover)&&(rowInt++,rowInt===I&&rowInt++),rowInt>V&&(rowInt=rowInt-V+A-1);var twoLetter=String.fromCharCode(colInt)+String.fromCharCode(rowInt);return twoLetter}function decode(mgrsString){if(mgrsString&&0===mgrsString.length)throw"MGRSPoint coverting from nothing";for(var testChar,length=mgrsString.length,hunK=null,sb="",i=0;!/[A-Z]/.test(testChar=mgrsString.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+mgrsString;sb+=testChar,i++}var zoneNumber=parseInt(sb,10);if(0===i||i+3>length)throw"MGRSPoint bad conversion from: "+mgrsString;var zoneLetter=mgrsString.charAt(i++);if("A">=zoneLetter||"B"===zoneLetter||"Y"===zoneLetter||zoneLetter>="Z"||"I"===zoneLetter||"O"===zoneLetter)throw"MGRSPoint zone letter "+zoneLetter+" not handled: "+mgrsString;hunK=mgrsString.substring(i,i+=2);for(var set=get100kSetForZone(zoneNumber),east100k=getEastingFromChar(hunK.charAt(0),set),north100k=getNorthingFromChar(hunK.charAt(1),set);north100k<getMinNorthing(zoneLetter);)north100k+=2e6;var remainder=length-i;if(remainder%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+mgrsString;var accuracyBonus,sepEastingString,sepNorthingString,easting,northing,sep=remainder/2,sepEasting=0,sepNorthing=0;return sep>0&&(accuracyBonus=1e5/Math.pow(10,sep),sepEastingString=mgrsString.substring(i,i+sep),sepEasting=parseFloat(sepEastingString)*accuracyBonus,sepNorthingString=mgrsString.substring(i+sep),sepNorthing=parseFloat(sepNorthingString)*accuracyBonus),easting=sepEasting+east100k,northing=sepNorthing+north100k,{easting:easting,northing:northing,zoneLetter:zoneLetter,zoneNumber:zoneNumber,accuracy:accuracyBonus}}function getEastingFromChar(e,set){for(var curCol=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set-1),eastingValue=1e5,rewindMarker=!1;curCol!==e.charCodeAt(0);){if(curCol++,curCol===I&&curCol++,curCol===O&&curCol++,curCol>Z){if(rewindMarker)throw"Bad character: "+e;curCol=A,rewindMarker=!0}eastingValue+=1e5}return eastingValue}function getNorthingFromChar(n,set){if(n>"V")throw"MGRSPoint given invalid Northing "+n;for(var curRow=SET_ORIGIN_ROW_LETTERS.charCodeAt(set-1),northingValue=0,rewindMarker=!1;curRow!==n.charCodeAt(0);){if(curRow++,curRow===I&&curRow++,curRow===O&&curRow++,curRow>V){if(rewindMarker)throw"Bad character: "+n;curRow=A,rewindMarker=!0}northingValue+=1e5}return northingValue}function getMinNorthing(zoneLetter){var northing;switch(zoneLetter){case"C":northing=11e5;break;case"D":northing=2e6;break;case"E":northing=28e5;break;case"F":northing=37e5;break;case"G":northing=46e5;break;case"H":northing=55e5;break;case"J":northing=64e5;break;case"K":northing=73e5;break;case"L":northing=82e5;break;case"M":northing=91e5;break;case"N":northing=0;break;case"P":northing=8e5;break;case"Q":northing=17e5;break;case"R":northing=26e5;break;case"S":northing=35e5;break;case"T":northing=44e5;break;case"U":northing=53e5;break;case"V":northing=62e5;break;case"W":northing=7e6;break;case"X":northing=79e5;break;default:northing=-1}if(northing>=0)return northing;throw"Invalid zone letter: "+zoneLetter}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90;exports.forward=function(ll,accuracy){return accuracy=accuracy||5,encode(LLtoUTM({lat:ll[1],lon:ll[0]}),accuracy)},exports.inverse=function(mgrs){var bbox=UTMtoLL(decode(mgrs.toUpperCase()));return bbox.lat&&bbox.lon?[bbox.lon,bbox.lat,bbox.lon,bbox.lat]:[bbox.left,bbox.bottom,bbox.right,bbox.top]},exports.toPoint=function(mgrs){var bbox=UTMtoLL(decode(mgrs.toUpperCase()));return bbox.lat&&bbox.lon?[bbox.lon,bbox.lat]:[(bbox.left+bbox.right)/2,(bbox.top+bbox.bottom)/2]}},{}],93:[function(require,module,exports){module.exports={name:"proj4",version:"2.3.10",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4.js",include:["dist/proj4.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~3.24.5","grunt-browserify":"~1.3.0","grunt-contrib-uglify":"~0.3.2",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"~0.0.2"},contributors:[{name:"Mike Adair",email:"madair@dmsolutions.ca"},{name:"Richard Greenwood",email:"rich@greenwoodmap.com"},{name:"Calvin Metcalf",email:"calvin.metcalf@gmail.com"},{name:"Richard Marsden",url:"http://www.winwaed.com"},{name:"T. Mittan"},{name:"D. Steinwand"},{name:"S. Nelson"}],gitHead:"ac03d1439491dc313da80985193f702ca471b3d0",bugs:{url:"https://github.com/proj4js/proj4js/issues"},homepage:"https://github.com/proj4js/proj4js#readme",_id:"proj4@2.3.10",_shasum:"f6e66bdcca332c25a5e3d8ef265cfc9d7b60fd0c",_from:"proj4@2.3.10",_npmVersion:"2.11.2",_nodeVersion:"0.12.5",_npmUser:{name:"ahocevar",email:"andreas.hocevar@gmail.com"},maintainers:[{name:"cwmma",email:"calvin.metcalf@gmail.com"},{name:"ahocevar",email:"andreas.hocevar@gmail.com"}],dist:{shasum:"f6e66bdcca332c25a5e3d8ef265cfc9d7b60fd0c",tarball:"https://registry.npmjs.org/proj4/-/proj4-2.3.10.tgz"},_resolved:"https://registry.npmjs.org/proj4/-/proj4-2.3.10.tgz"}},{}],94:[function(require,module,exports){!function(root,factory){"function"==typeof define&&define.amd?define([],function(){return root.svg4everybody=factory()}):"object"==typeof exports?module.exports=factory():root.svg4everybody=factory()}(this,function(){function embed(svg,target){if(target){var fragment=document.createDocumentFragment(),viewBox=!svg.getAttribute("viewBox")&&target.getAttribute("viewBox");viewBox&&svg.setAttribute("viewBox",viewBox);for(var clone=target.cloneNode(!0);clone.childNodes.length;)fragment.appendChild(clone.firstChild);svg.appendChild(fragment)}}function loadreadystatechange(xhr){xhr.onreadystatechange=function(){if(4===xhr.readyState){var cachedDocument=xhr._cachedDocument;cachedDocument||(cachedDocument=xhr._cachedDocument=document.implementation.createHTMLDocument(""),cachedDocument.body.innerHTML=xhr.responseText,xhr._cachedTarget={}),xhr._embeds.splice(0).map(function(item){var target=xhr._cachedTarget[item.id];target||(target=xhr._cachedTarget[item.id]=cachedDocument.getElementById(item.id)),embed(item.svg,target)})}},xhr.onreadystatechange()}function svg4everybody(rawopts){function oninterval(){for(var index=0;index<uses.length;){var use=uses[index],svg=use.parentNode;if(svg&&/svg/i.test(svg.nodeName)){var src=use.getAttribute("xlink:href");if(polyfill&&(!opts.validate||opts.validate(src,svg,use))){svg.removeChild(use);var srcSplit=src.split("#"),url=srcSplit.shift(),id=srcSplit.join("#");if(url.length){var xhr=requests[url];xhr||(xhr=requests[url]=new XMLHttpRequest,xhr.open("GET",url),xhr.send(),xhr._embeds=[]),xhr._embeds.push({svg:svg,id:id}),loadreadystatechange(xhr)}else embed(svg,document.getElementById(id))}}else++index}requestAnimationFrame(oninterval,67)}var polyfill,opts=Object(rawopts),newerIEUA=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,webkitUA=/\bAppleWebKit\/(\d+)\b/,olderEdgeUA=/\bEdge\/12\.(\d+)\b/;polyfill="polyfill"in opts?opts.polyfill:newerIEUA.test(navigator.userAgent)||(navigator.userAgent.match(olderEdgeUA)||[])[1]<10547||(navigator.userAgent.match(webkitUA)||[])[1]<537;var requests={},requestAnimationFrame=window.requestAnimationFrame||setTimeout,uses=document.getElementsByTagName("use");polyfill&&oninterval()}return svg4everybody})},{}],95:[function(require,module,exports){module.exports={Bloodhound:require("typeahead.js/dist/bloodhound.js"),loadjQueryPlugin:function(){require("typeahead.js")}}},{"typeahead.js":97,"typeahead.js/dist/bloodhound.js":96}],96:[function(require,module,exports){!function(root,factory){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(a0){return root.Bloodhound=factory(a0)}):"object"==typeof exports?module.exports=factory(require("jquery")):root.Bloodhound=factory(jQuery)}(this,function($){var _=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(str){return!str||/^\s*$/.test(str)},escapeRegExChars:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(obj){return"string"==typeof obj},isNumber:function(obj){return"number"==typeof obj},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(obj){return"undefined"==typeof obj},isElement:function(obj){return!(!obj||1!==obj.nodeType)},isJQuery:function(obj){return obj instanceof $},toStr:function(s){return _.isUndefined(s)||null===s?"":s+""},bind:$.proxy,each:function(collection,cb){function reverseArgs(index,value){return cb(value,index)}$.each(collection,reverseArgs)},map:$.map,filter:$.grep,every:function(obj,test){var result=!0;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?void 0:!1}),!!result):result},some:function(obj,test){var result=!1;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?!1:void 0}),!!result):result},mixin:$.extend,identity:function(x){return x},clone:function(obj){return $.extend(!0,{},obj)},getIdGenerator:function(){var counter=0;return function(){return counter++}},templatify:function(obj){function template(){return String(obj)}return $.isFunction(obj)?obj:template},defer:function(fn){setTimeout(fn,0)},debounce:function(func,wait,immediate){var timeout,result;return function(){var later,callNow,context=this,args=arguments;return later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout,clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&(result=func.apply(context,args)),result}},throttle:function(func,wait){var context,args,timeout,result,previous,later;return previous=0,later=function(){previous=new Date,timeout=null,result=func.apply(context,args)},function(){var now=new Date,remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||(timeout=setTimeout(later,remaining)),result}},stringify:function(val){return _.isString(val)?val:JSON.stringify(val)},noop:function(){}}}(),VERSION="0.11.1",tokenizers=function(){"use strict";function whitespace(str){return str=_.toStr(str),str?str.split(/\s+/):[]}function nonword(str){return str=_.toStr(str),str?str.split(/\W+/):[]}function getObjTokenizer(tokenizer){return function(keys){return keys=_.isArray(keys)?keys:[].slice.call(arguments,0),function(o){var tokens=[];return _.each(keys,function(k){tokens=tokens.concat(tokenizer(_.toStr(o[k])))}),tokens}}}return{nonword:nonword,whitespace:whitespace,obj:{nonword:getObjTokenizer(nonword),whitespace:getObjTokenizer(whitespace)}}}(),LruCache=function(){"use strict";function LruCache(maxSize){this.maxSize=_.isNumber(maxSize)?maxSize:100,this.reset(),this.maxSize<=0&&(this.set=this.get=$.noop)}function List(){this.head=this.tail=null}function Node(key,val){this.key=key,this.val=val,this.prev=this.next=null}return _.mixin(LruCache.prototype,{set:function(key,val){var node,tailItem=this.list.tail;this.size>=this.maxSize&&(this.list.remove(tailItem),delete this.hash[tailItem.key],this.size--),(node=this.hash[key])?(node.val=val,this.list.moveToFront(node)):(node=new Node(key,val),this.list.add(node),this.hash[key]=node,this.size++)},get:function(key){var node=this.hash[key];return node?(this.list.moveToFront(node),node.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new List}}),_.mixin(List.prototype,{add:function(node){this.head&&(node.next=this.head,this.head.prev=node),this.head=node,this.tail=this.tail||node},remove:function(node){node.prev?node.prev.next=node.next:this.head=node.next,node.next?node.next.prev=node.prev:this.tail=node.prev},moveToFront:function(node){this.remove(node),this.add(node)}}),LruCache}(),PersistentStorage=function(){"use strict";function PersistentStorage(namespace,override){this.prefix=["__",namespace,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+_.escapeRegExChars(this.prefix)),this.ls=override||LOCAL_STORAGE,!this.ls&&this._noop()}function now(){return(new Date).getTime()}function encode(val){return JSON.stringify(_.isUndefined(val)?null:val)}function decode(val){return $.parseJSON(val)}function gatherMatchingKeys(keyMatcher){var i,key,keys=[],len=LOCAL_STORAGE.length;for(i=0;len>i;i++)(key=LOCAL_STORAGE.key(i)).match(keyMatcher)&&keys.push(key.replace(keyMatcher,""));return keys}var LOCAL_STORAGE;try{LOCAL_STORAGE=window.localStorage,LOCAL_STORAGE.setItem("~~~","!"),LOCAL_STORAGE.removeItem("~~~")}catch(err){LOCAL_STORAGE=null}return _.mixin(PersistentStorage.prototype,{_prefix:function(key){return this.prefix+key},_ttlKey:function(key){return this._prefix(key)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=_.noop},_safeSet:function(key,val){try{this.ls.setItem(key,val)}catch(err){"QuotaExceededError"===err.name&&(this.clear(),this._noop())}},get:function(key){return this.isExpired(key)&&this.remove(key),decode(this.ls.getItem(this._prefix(key)))},set:function(key,val,ttl){return _.isNumber(ttl)?this._safeSet(this._ttlKey(key),encode(now()+ttl)):this.ls.removeItem(this._ttlKey(key)),this._safeSet(this._prefix(key),encode(val))},remove:function(key){return this.ls.removeItem(this._ttlKey(key)),this.ls.removeItem(this._prefix(key)),this},clear:function(){var i,keys=gatherMatchingKeys(this.keyMatcher);for(i=keys.length;i--;)this.remove(keys[i]);return this},isExpired:function(key){var ttl=decode(this.ls.getItem(this._ttlKey(key)));return _.isNumber(ttl)&&now()>ttl?!0:!1}}),PersistentStorage}(),Transport=function(){"use strict";function Transport(o){o=o||{},this.cancelled=!1,this.lastReq=null,this._send=o.transport,this._get=o.limiter?o.limiter(this._get):this._get,this._cache=o.cache===!1?new LruCache(0):sharedCache}var pendingRequestsCount=0,pendingRequests={},maxPendingRequests=6,sharedCache=new LruCache(10);return Transport.setMaxPendingRequests=function(num){maxPendingRequests=num},Transport.resetCache=function(){sharedCache.reset()},_.mixin(Transport.prototype,{_fingerprint:function(o){return o=o||{},o.url+o.type+$.param(o.data||{})},_get:function(o,cb){function done(resp){cb(null,resp),that._cache.set(fingerprint,resp)}function fail(){cb(!0)}function always(){pendingRequestsCount--,delete pendingRequests[fingerprint],that.onDeckRequestArgs&&(that._get.apply(that,that.onDeckRequestArgs),that.onDeckRequestArgs=null)}var fingerprint,jqXhr,that=this;fingerprint=this._fingerprint(o),this.cancelled||fingerprint!==this.lastReq||((jqXhr=pendingRequests[fingerprint])?jqXhr.done(done).fail(fail):maxPendingRequests>pendingRequestsCount?(pendingRequestsCount++,pendingRequests[fingerprint]=this._send(o).done(done).fail(fail).always(always)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(o,cb){var resp,fingerprint;cb=cb||$.noop,o=_.isString(o)?{url:o}:o||{},fingerprint=this._fingerprint(o),this.cancelled=!1,this.lastReq=fingerprint,(resp=this._cache.get(fingerprint))?cb(null,resp):this._get(o,cb)},cancel:function(){this.cancelled=!0}}),Transport}(),SearchIndex=window.SearchIndex=function(){"use strict";function SearchIndex(o){o=o||{},o.datumTokenizer&&o.queryTokenizer||$.error("datumTokenizer and queryTokenizer are both required"),this.identify=o.identify||_.stringify,this.datumTokenizer=o.datumTokenizer,this.queryTokenizer=o.queryTokenizer,this.reset()}function normalizeTokens(tokens){return tokens=_.filter(tokens,function(token){return!!token}),tokens=_.map(tokens,function(token){return token.toLowerCase()})}function newNode(){var node={};return node[IDS]=[],node[CHILDREN]={},node}function unique(array){for(var seen={},uniques=[],i=0,len=array.length;len>i;i++)seen[array[i]]||(seen[array[i]]=!0,uniques.push(array[i]));return uniques}function getIntersection(arrayA,arrayB){var ai=0,bi=0,intersection=[];arrayA=arrayA.sort(),arrayB=arrayB.sort();for(var lenArrayA=arrayA.length,lenArrayB=arrayB.length;lenArrayA>ai&&lenArrayB>bi;)arrayA[ai]<arrayB[bi]?ai++:arrayA[ai]>arrayB[bi]?bi++:(intersection.push(arrayA[ai]),ai++,bi++);return intersection}var CHILDREN="c",IDS="i";return _.mixin(SearchIndex.prototype,{bootstrap:function(o){this.datums=o.datums,this.trie=o.trie},add:function(data){var that=this;data=_.isArray(data)?data:[data],_.each(data,function(datum){var id,tokens;that.datums[id=that.identify(datum)]=datum,tokens=normalizeTokens(that.datumTokenizer(datum)),_.each(tokens,function(token){var node,chars,ch;for(node=that.trie,
chars=token.split("");ch=chars.shift();)node=node[CHILDREN][ch]||(node[CHILDREN][ch]=newNode()),node[IDS].push(id)})})},get:function(ids){var that=this;return _.map(ids,function(id){return that.datums[id]})},search:function(query){var tokens,matches,that=this;return tokens=normalizeTokens(this.queryTokenizer(query)),_.each(tokens,function(token){var node,chars,ch,ids;if(matches&&0===matches.length)return!1;for(node=that.trie,chars=token.split("");node&&(ch=chars.shift());)node=node[CHILDREN][ch];return node&&0===chars.length?(ids=node[IDS].slice(0),void(matches=matches?getIntersection(matches,ids):ids)):(matches=[],!1)}),matches?_.map(unique(matches),function(id){return that.datums[id]}):[]},all:function(){var values=[];for(var key in this.datums)values.push(this.datums[key]);return values},reset:function(){this.datums={},this.trie=newNode()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),SearchIndex}(),Prefetch=function(){"use strict";function Prefetch(o){this.url=o.url,this.ttl=o.ttl,this.cache=o.cache,this.prepare=o.prepare,this.transform=o.transform,this.transport=o.transport,this.thumbprint=o.thumbprint,this.storage=new PersistentStorage(o.cacheKey)}var keys;return keys={data:"data",protocol:"protocol",thumbprint:"thumbprint"},_.mixin(Prefetch.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(data){this.cache&&(this.storage.set(keys.data,data,this.ttl),this.storage.set(keys.protocol,location.protocol,this.ttl),this.storage.set(keys.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var isExpired,stored={};return this.cache?(stored.data=this.storage.get(keys.data),stored.protocol=this.storage.get(keys.protocol),stored.thumbprint=this.storage.get(keys.thumbprint),isExpired=stored.thumbprint!==this.thumbprint||stored.protocol!==location.protocol,stored.data&&!isExpired?stored.data:null):null},fromNetwork:function(cb){function onError(){cb(!0)}function onResponse(resp){cb(null,that.transform(resp))}var settings,that=this;cb&&(settings=this.prepare(this._settings()),this.transport(settings).fail(onError).done(onResponse))},clear:function(){return this.storage.clear(),this}}),Prefetch}(),Remote=function(){"use strict";function Remote(o){this.url=o.url,this.prepare=o.prepare,this.transform=o.transform,this.transport=new Transport({cache:o.cache,limiter:o.limiter,transport:o.transport})}return _.mixin(Remote.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(query,cb){function onResponse(err,resp){cb(err?[]:that.transform(resp))}var settings,that=this;if(cb)return query=query||"",settings=this.prepare(query,this._settings()),this.transport.get(settings,onResponse)},cancelLastRequest:function(){this.transport.cancel()}}),Remote}(),oParser=function(){"use strict";function parsePrefetch(o){var defaults;return o?(defaults={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:_.identity,transform:_.identity,transport:null},o=_.isString(o)?{url:o}:o,o=_.mixin(defaults,o),!o.url&&$.error("prefetch requires url to be set"),o.transform=o.filter||o.transform,o.cacheKey=o.cacheKey||o.url,o.thumbprint=VERSION+o.thumbprint,o.transport=o.transport?callbackToDeferred(o.transport):$.ajax,o):null}function parseRemote(o){var defaults;if(o)return defaults={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:_.identity,transport:null},o=_.isString(o)?{url:o}:o,o=_.mixin(defaults,o),!o.url&&$.error("remote requires url to be set"),o.transform=o.filter||o.transform,o.prepare=toRemotePrepare(o),o.limiter=toLimiter(o),o.transport=o.transport?callbackToDeferred(o.transport):$.ajax,delete o.replace,delete o.wildcard,delete o.rateLimitBy,delete o.rateLimitWait,o}function toRemotePrepare(o){function prepareByReplace(query,settings){return settings.url=replace(settings.url,query),settings}function prepareByWildcard(query,settings){return settings.url=settings.url.replace(wildcard,encodeURIComponent(query)),settings}function idenityPrepare(query,settings){return settings}var prepare,replace,wildcard;return prepare=o.prepare,replace=o.replace,wildcard=o.wildcard,prepare?prepare:prepare=replace?prepareByReplace:o.wildcard?prepareByWildcard:idenityPrepare}function toLimiter(o){function debounce(wait){return function(fn){return _.debounce(fn,wait)}}function throttle(wait){return function(fn){return _.throttle(fn,wait)}}var limiter,method,wait;return limiter=o.limiter,method=o.rateLimitBy,wait=o.rateLimitWait,limiter||(limiter=/^throttle$/i.test(method)?throttle(wait):debounce(wait)),limiter}function callbackToDeferred(fn){return function(o){function onSuccess(resp){_.defer(function(){deferred.resolve(resp)})}function onError(err){_.defer(function(){deferred.reject(err)})}var deferred=$.Deferred();return fn(o,onSuccess,onError),deferred}}return function(o){var defaults,sorter;return defaults={initialize:!0,identify:_.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},o=_.mixin(defaults,o||{}),!o.datumTokenizer&&$.error("datumTokenizer is required"),!o.queryTokenizer&&$.error("queryTokenizer is required"),sorter=o.sorter,o.sorter=sorter?function(x){return x.sort(sorter)}:_.identity,o.local=_.isFunction(o.local)?o.local():o.local,o.prefetch=parsePrefetch(o.prefetch),o.remote=parseRemote(o.remote),o}}(),Bloodhound=function(){"use strict";function Bloodhound(o){o=oParser(o),this.sorter=o.sorter,this.identify=o.identify,this.sufficient=o.sufficient,this.local=o.local,this.remote=o.remote?new Remote(o.remote):null,this.prefetch=o.prefetch?new Prefetch(o.prefetch):null,this.index=new SearchIndex({identify:this.identify,datumTokenizer:o.datumTokenizer,queryTokenizer:o.queryTokenizer}),o.initialize!==!1&&this.initialize()}var old;return old=window&&window.Bloodhound,Bloodhound.noConflict=function(){return window&&(window.Bloodhound=old),Bloodhound},Bloodhound.tokenizers=tokenizers,_.mixin(Bloodhound.prototype,{__ttAdapter:function(){function withAsync(query,sync,async){return that.search(query,sync,async)}function withoutAsync(query,sync){return that.search(query,sync)}var that=this;return this.remote?withAsync:withoutAsync},_loadPrefetch:function(){function done(err,data){return err?deferred.reject():(that.add(data),that.prefetch.store(that.index.serialize()),void deferred.resolve())}var deferred,serialized,that=this;return deferred=$.Deferred(),this.prefetch?(serialized=this.prefetch.fromCache())?(this.index.bootstrap(serialized),deferred.resolve()):this.prefetch.fromNetwork(done):deferred.resolve(),deferred.promise()},_initialize:function(){function addLocalToIndex(){that.add(that.local)}var that=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(addLocalToIndex),this.initPromise},initialize:function(force){return!this.initPromise||force?this._initialize():this.initPromise},add:function(data){return this.index.add(data),this},get:function(ids){return ids=_.isArray(ids)?ids:[].slice.call(arguments),this.index.get(ids)},search:function(query,sync,async){function processRemote(remote){var nonDuplicates=[];_.each(remote,function(r){!_.some(local,function(l){return that.identify(r)===that.identify(l)})&&nonDuplicates.push(r)}),async&&async(nonDuplicates)}var local,that=this;return local=this.sorter(this.index.search(query)),sync(this.remote?local.slice():local),this.remote&&local.length<this.sufficient?this.remote.get(query,processRemote):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return Transport.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),Bloodhound}();return Bloodhound})},{jquery:23}],97:[function(require,module,exports){!function(root,factory){"function"==typeof define&&define.amd?define("bloodhound",["jquery"],function(a0){return root.Bloodhound=factory(a0)}):"object"==typeof exports?module.exports=factory(require("jquery")):root.Bloodhound=factory(jQuery)}(this,function($){var _=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(str){return!str||/^\s*$/.test(str)},escapeRegExChars:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(obj){return"string"==typeof obj},isNumber:function(obj){return"number"==typeof obj},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(obj){return"undefined"==typeof obj},isElement:function(obj){return!(!obj||1!==obj.nodeType)},isJQuery:function(obj){return obj instanceof $},toStr:function(s){return _.isUndefined(s)||null===s?"":s+""},bind:$.proxy,each:function(collection,cb){function reverseArgs(index,value){return cb(value,index)}$.each(collection,reverseArgs)},map:$.map,filter:$.grep,every:function(obj,test){var result=!0;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?void 0:!1}),!!result):result},some:function(obj,test){var result=!1;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?!1:void 0}),!!result):result},mixin:$.extend,identity:function(x){return x},clone:function(obj){return $.extend(!0,{},obj)},getIdGenerator:function(){var counter=0;return function(){return counter++}},templatify:function(obj){function template(){return String(obj)}return $.isFunction(obj)?obj:template},defer:function(fn){setTimeout(fn,0)},debounce:function(func,wait,immediate){var timeout,result;return function(){var later,callNow,context=this,args=arguments;return later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout,clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&(result=func.apply(context,args)),result}},throttle:function(func,wait){var context,args,timeout,result,previous,later;return previous=0,later=function(){previous=new Date,timeout=null,result=func.apply(context,args)},function(){var now=new Date,remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||(timeout=setTimeout(later,remaining)),result}},stringify:function(val){return _.isString(val)?val:JSON.stringify(val)},noop:function(){}}}(),VERSION="0.11.1",tokenizers=function(){"use strict";function whitespace(str){return str=_.toStr(str),str?str.split(/\s+/):[]}function nonword(str){return str=_.toStr(str),str?str.split(/\W+/):[]}function getObjTokenizer(tokenizer){return function(keys){return keys=_.isArray(keys)?keys:[].slice.call(arguments,0),function(o){var tokens=[];return _.each(keys,function(k){tokens=tokens.concat(tokenizer(_.toStr(o[k])))}),tokens}}}return{nonword:nonword,whitespace:whitespace,obj:{nonword:getObjTokenizer(nonword),whitespace:getObjTokenizer(whitespace)}}}(),LruCache=function(){"use strict";function LruCache(maxSize){this.maxSize=_.isNumber(maxSize)?maxSize:100,this.reset(),this.maxSize<=0&&(this.set=this.get=$.noop)}function List(){this.head=this.tail=null}function Node(key,val){this.key=key,this.val=val,this.prev=this.next=null}return _.mixin(LruCache.prototype,{set:function(key,val){var node,tailItem=this.list.tail;this.size>=this.maxSize&&(this.list.remove(tailItem),delete this.hash[tailItem.key],this.size--),(node=this.hash[key])?(node.val=val,this.list.moveToFront(node)):(node=new Node(key,val),this.list.add(node),this.hash[key]=node,this.size++)},get:function(key){var node=this.hash[key];return node?(this.list.moveToFront(node),node.val):void 0},reset:function(){this.size=0,this.hash={},this.list=new List}}),_.mixin(List.prototype,{add:function(node){this.head&&(node.next=this.head,this.head.prev=node),this.head=node,this.tail=this.tail||node},remove:function(node){node.prev?node.prev.next=node.next:this.head=node.next,node.next?node.next.prev=node.prev:this.tail=node.prev},moveToFront:function(node){this.remove(node),this.add(node)}}),LruCache}(),PersistentStorage=function(){"use strict";function PersistentStorage(namespace,override){this.prefix=["__",namespace,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+_.escapeRegExChars(this.prefix)),this.ls=override||LOCAL_STORAGE,!this.ls&&this._noop()}function now(){return(new Date).getTime()}function encode(val){return JSON.stringify(_.isUndefined(val)?null:val)}function decode(val){return $.parseJSON(val)}function gatherMatchingKeys(keyMatcher){var i,key,keys=[],len=LOCAL_STORAGE.length;for(i=0;len>i;i++)(key=LOCAL_STORAGE.key(i)).match(keyMatcher)&&keys.push(key.replace(keyMatcher,""));return keys}var LOCAL_STORAGE;try{LOCAL_STORAGE=window.localStorage,LOCAL_STORAGE.setItem("~~~","!"),LOCAL_STORAGE.removeItem("~~~")}catch(err){LOCAL_STORAGE=null}return _.mixin(PersistentStorage.prototype,{_prefix:function(key){return this.prefix+key},_ttlKey:function(key){return this._prefix(key)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=_.noop},_safeSet:function(key,val){try{this.ls.setItem(key,val)}catch(err){"QuotaExceededError"===err.name&&(this.clear(),this._noop())}},get:function(key){return this.isExpired(key)&&this.remove(key),decode(this.ls.getItem(this._prefix(key)))},set:function(key,val,ttl){return _.isNumber(ttl)?this._safeSet(this._ttlKey(key),encode(now()+ttl)):this.ls.removeItem(this._ttlKey(key)),this._safeSet(this._prefix(key),encode(val))},remove:function(key){return this.ls.removeItem(this._ttlKey(key)),this.ls.removeItem(this._prefix(key)),this},clear:function(){var i,keys=gatherMatchingKeys(this.keyMatcher);for(i=keys.length;i--;)this.remove(keys[i]);return this},isExpired:function(key){var ttl=decode(this.ls.getItem(this._ttlKey(key)));return _.isNumber(ttl)&&now()>ttl?!0:!1}}),PersistentStorage}(),Transport=function(){"use strict";function Transport(o){o=o||{},this.cancelled=!1,this.lastReq=null,this._send=o.transport,this._get=o.limiter?o.limiter(this._get):this._get,this._cache=o.cache===!1?new LruCache(0):sharedCache}var pendingRequestsCount=0,pendingRequests={},maxPendingRequests=6,sharedCache=new LruCache(10);return Transport.setMaxPendingRequests=function(num){maxPendingRequests=num},Transport.resetCache=function(){sharedCache.reset()},_.mixin(Transport.prototype,{_fingerprint:function(o){return o=o||{},o.url+o.type+$.param(o.data||{})},_get:function(o,cb){function done(resp){cb(null,resp),that._cache.set(fingerprint,resp)}function fail(){cb(!0)}function always(){pendingRequestsCount--,delete pendingRequests[fingerprint],that.onDeckRequestArgs&&(that._get.apply(that,that.onDeckRequestArgs),that.onDeckRequestArgs=null)}var fingerprint,jqXhr,that=this;fingerprint=this._fingerprint(o),this.cancelled||fingerprint!==this.lastReq||((jqXhr=pendingRequests[fingerprint])?jqXhr.done(done).fail(fail):maxPendingRequests>pendingRequestsCount?(pendingRequestsCount++,pendingRequests[fingerprint]=this._send(o).done(done).fail(fail).always(always)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(o,cb){var resp,fingerprint;cb=cb||$.noop,o=_.isString(o)?{url:o}:o||{},fingerprint=this._fingerprint(o),this.cancelled=!1,this.lastReq=fingerprint,(resp=this._cache.get(fingerprint))?cb(null,resp):this._get(o,cb)},cancel:function(){this.cancelled=!0}}),Transport}(),SearchIndex=window.SearchIndex=function(){"use strict";function SearchIndex(o){o=o||{},o.datumTokenizer&&o.queryTokenizer||$.error("datumTokenizer and queryTokenizer are both required"),this.identify=o.identify||_.stringify,this.datumTokenizer=o.datumTokenizer,this.queryTokenizer=o.queryTokenizer,this.reset()}function normalizeTokens(tokens){return tokens=_.filter(tokens,function(token){return!!token}),tokens=_.map(tokens,function(token){return token.toLowerCase()})}function newNode(){var node={};return node[IDS]=[],node[CHILDREN]={},node}function unique(array){for(var seen={},uniques=[],i=0,len=array.length;len>i;i++)seen[array[i]]||(seen[array[i]]=!0,uniques.push(array[i]));return uniques}function getIntersection(arrayA,arrayB){var ai=0,bi=0,intersection=[];arrayA=arrayA.sort(),arrayB=arrayB.sort();for(var lenArrayA=arrayA.length,lenArrayB=arrayB.length;lenArrayA>ai&&lenArrayB>bi;)arrayA[ai]<arrayB[bi]?ai++:arrayA[ai]>arrayB[bi]?bi++:(intersection.push(arrayA[ai]),ai++,bi++);return intersection}var CHILDREN="c",IDS="i";return _.mixin(SearchIndex.prototype,{bootstrap:function(o){this.datums=o.datums,this.trie=o.trie},add:function(data){var that=this;data=_.isArray(data)?data:[data],_.each(data,function(datum){var id,tokens;that.datums[id=that.identify(datum)]=datum,tokens=normalizeTokens(that.datumTokenizer(datum)),_.each(tokens,function(token){var node,chars,ch;for(node=that.trie,chars=token.split("");ch=chars.shift();)node=node[CHILDREN][ch]||(node[CHILDREN][ch]=newNode()),node[IDS].push(id)})})},get:function(ids){var that=this;return _.map(ids,function(id){return that.datums[id]})},search:function(query){var tokens,matches,that=this;return tokens=normalizeTokens(this.queryTokenizer(query)),_.each(tokens,function(token){var node,chars,ch,ids;if(matches&&0===matches.length)return!1;for(node=that.trie,chars=token.split("");node&&(ch=chars.shift());)node=node[CHILDREN][ch];return node&&0===chars.length?(ids=node[IDS].slice(0),void(matches=matches?getIntersection(matches,ids):ids)):(matches=[],!1)}),matches?_.map(unique(matches),function(id){return that.datums[id]}):[]},all:function(){var values=[];for(var key in this.datums)values.push(this.datums[key]);return values},reset:function(){this.datums={},this.trie=newNode()},serialize:function(){return{datums:this.datums,trie:this.trie}}}),SearchIndex}(),Prefetch=function(){"use strict";function Prefetch(o){this.url=o.url,this.ttl=o.ttl,this.cache=o.cache,this.prepare=o.prepare,this.transform=o.transform,this.transport=o.transport,this.thumbprint=o.thumbprint,this.storage=new PersistentStorage(o.cacheKey)}var keys;return keys={data:"data",protocol:"protocol",thumbprint:"thumbprint"},_.mixin(Prefetch.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},store:function(data){this.cache&&(this.storage.set(keys.data,data,this.ttl),this.storage.set(keys.protocol,location.protocol,this.ttl),this.storage.set(keys.thumbprint,this.thumbprint,this.ttl))},fromCache:function(){var isExpired,stored={};return this.cache?(stored.data=this.storage.get(keys.data),stored.protocol=this.storage.get(keys.protocol),stored.thumbprint=this.storage.get(keys.thumbprint),isExpired=stored.thumbprint!==this.thumbprint||stored.protocol!==location.protocol,stored.data&&!isExpired?stored.data:null):null},fromNetwork:function(cb){function onError(){cb(!0)}function onResponse(resp){cb(null,that.transform(resp))}var settings,that=this;cb&&(settings=this.prepare(this._settings()),this.transport(settings).fail(onError).done(onResponse))},clear:function(){return this.storage.clear(),this}}),Prefetch}(),Remote=function(){"use strict";function Remote(o){this.url=o.url,this.prepare=o.prepare,this.transform=o.transform,this.transport=new Transport({cache:o.cache,limiter:o.limiter,transport:o.transport})}return _.mixin(Remote.prototype,{_settings:function(){return{url:this.url,type:"GET",dataType:"json"}},get:function(query,cb){function onResponse(err,resp){cb(err?[]:that.transform(resp))}var settings,that=this;if(cb)return query=query||"",settings=this.prepare(query,this._settings()),this.transport.get(settings,onResponse)},cancelLastRequest:function(){this.transport.cancel()}}),Remote}(),oParser=function(){"use strict";function parsePrefetch(o){var defaults;return o?(defaults={url:null,ttl:864e5,cache:!0,cacheKey:null,thumbprint:"",prepare:_.identity,transform:_.identity,transport:null},o=_.isString(o)?{url:o}:o,o=_.mixin(defaults,o),!o.url&&$.error("prefetch requires url to be set"),o.transform=o.filter||o.transform,o.cacheKey=o.cacheKey||o.url,o.thumbprint=VERSION+o.thumbprint,o.transport=o.transport?callbackToDeferred(o.transport):$.ajax,o):null}function parseRemote(o){var defaults;if(o)return defaults={url:null,cache:!0,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:_.identity,transport:null},o=_.isString(o)?{url:o}:o,o=_.mixin(defaults,o),!o.url&&$.error("remote requires url to be set"),o.transform=o.filter||o.transform,o.prepare=toRemotePrepare(o),o.limiter=toLimiter(o),o.transport=o.transport?callbackToDeferred(o.transport):$.ajax,delete o.replace,delete o.wildcard,delete o.rateLimitBy,delete o.rateLimitWait,o}function toRemotePrepare(o){function prepareByReplace(query,settings){return settings.url=replace(settings.url,query),settings}function prepareByWildcard(query,settings){return settings.url=settings.url.replace(wildcard,encodeURIComponent(query)),settings}function idenityPrepare(query,settings){return settings}var prepare,replace,wildcard;return prepare=o.prepare,replace=o.replace,wildcard=o.wildcard,prepare?prepare:prepare=replace?prepareByReplace:o.wildcard?prepareByWildcard:idenityPrepare}function toLimiter(o){function debounce(wait){return function(fn){return _.debounce(fn,wait)}}function throttle(wait){return function(fn){return _.throttle(fn,wait)}}var limiter,method,wait;return limiter=o.limiter,method=o.rateLimitBy,wait=o.rateLimitWait,limiter||(limiter=/^throttle$/i.test(method)?throttle(wait):debounce(wait)),limiter}function callbackToDeferred(fn){return function(o){function onSuccess(resp){_.defer(function(){deferred.resolve(resp)})}function onError(err){_.defer(function(){deferred.reject(err)})}var deferred=$.Deferred();return fn(o,onSuccess,onError),deferred}}return function(o){var defaults,sorter;return defaults={initialize:!0,identify:_.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null},o=_.mixin(defaults,o||{}),!o.datumTokenizer&&$.error("datumTokenizer is required"),!o.queryTokenizer&&$.error("queryTokenizer is required"),sorter=o.sorter,o.sorter=sorter?function(x){return x.sort(sorter)}:_.identity,o.local=_.isFunction(o.local)?o.local():o.local,o.prefetch=parsePrefetch(o.prefetch),o.remote=parseRemote(o.remote),o}}(),Bloodhound=function(){"use strict";function Bloodhound(o){o=oParser(o),this.sorter=o.sorter,this.identify=o.identify,this.sufficient=o.sufficient,this.local=o.local,this.remote=o.remote?new Remote(o.remote):null,this.prefetch=o.prefetch?new Prefetch(o.prefetch):null,this.index=new SearchIndex({identify:this.identify,datumTokenizer:o.datumTokenizer,queryTokenizer:o.queryTokenizer}),o.initialize!==!1&&this.initialize()}var old;return old=window&&window.Bloodhound,Bloodhound.noConflict=function(){return window&&(window.Bloodhound=old),Bloodhound},Bloodhound.tokenizers=tokenizers,_.mixin(Bloodhound.prototype,{__ttAdapter:function(){function withAsync(query,sync,async){return that.search(query,sync,async)}function withoutAsync(query,sync){return that.search(query,sync)}var that=this;return this.remote?withAsync:withoutAsync},_loadPrefetch:function(){function done(err,data){return err?deferred.reject():(that.add(data),that.prefetch.store(that.index.serialize()),void deferred.resolve())}var deferred,serialized,that=this;return deferred=$.Deferred(),this.prefetch?(serialized=this.prefetch.fromCache())?(this.index.bootstrap(serialized),deferred.resolve()):this.prefetch.fromNetwork(done):deferred.resolve(),deferred.promise()},_initialize:function(){function addLocalToIndex(){that.add(that.local)}var that=this;return this.clear(),(this.initPromise=this._loadPrefetch()).done(addLocalToIndex),this.initPromise},initialize:function(force){return!this.initPromise||force?this._initialize():this.initPromise},add:function(data){return this.index.add(data),this},get:function(ids){return ids=_.isArray(ids)?ids:[].slice.call(arguments),this.index.get(ids)},search:function(query,sync,async){function processRemote(remote){var nonDuplicates=[];_.each(remote,function(r){!_.some(local,function(l){return that.identify(r)===that.identify(l)})&&nonDuplicates.push(r)}),async&&async(nonDuplicates)}var local,that=this;return local=this.sorter(this.index.search(query)),sync(this.remote?local.slice():local),this.remote&&local.length<this.sufficient?this.remote.get(query,processRemote):this.remote&&this.remote.cancelLastRequest(),this},all:function(){return this.index.all()},clear:function(){return this.index.reset(),this},clearPrefetchCache:function(){return this.prefetch&&this.prefetch.clear(),this},clearRemoteCache:function(){return Transport.resetCache(),this},ttAdapter:function(){return this.__ttAdapter()}}),Bloodhound}();return Bloodhound}),function(root,factory){"function"==typeof define&&define.amd?define("typeahead.js",["jquery"],function(a0){return factory(a0)}):"object"==typeof exports?module.exports=factory(require("jquery")):factory(jQuery)}(this,function($){var _=function(){"use strict";return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:!1},isBlankString:function(str){return!str||/^\s*$/.test(str)},escapeRegExChars:function(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(obj){return"string"==typeof obj},isNumber:function(obj){return"number"==typeof obj},isArray:$.isArray,isFunction:$.isFunction,isObject:$.isPlainObject,isUndefined:function(obj){return"undefined"==typeof obj},isElement:function(obj){return!(!obj||1!==obj.nodeType)},isJQuery:function(obj){return obj instanceof $},toStr:function(s){return _.isUndefined(s)||null===s?"":s+""},bind:$.proxy,each:function(collection,cb){function reverseArgs(index,value){return cb(value,index)}$.each(collection,reverseArgs)},map:$.map,filter:$.grep,every:function(obj,test){var result=!0;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?void 0:!1}),!!result):result},some:function(obj,test){var result=!1;return obj?($.each(obj,function(key,val){return(result=test.call(null,val,key,obj))?!1:void 0}),!!result):result},mixin:$.extend,identity:function(x){return x},clone:function(obj){return $.extend(!0,{},obj)},getIdGenerator:function(){var counter=0;return function(){return counter++}},templatify:function(obj){function template(){return String(obj)}return $.isFunction(obj)?obj:template},defer:function(fn){setTimeout(fn,0)},debounce:function(func,wait,immediate){var timeout,result;return function(){var later,callNow,context=this,args=arguments;return later=function(){timeout=null,immediate||(result=func.apply(context,args))},callNow=immediate&&!timeout,clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&(result=func.apply(context,args)),result}},throttle:function(func,wait){var context,args,timeout,result,previous,later;return previous=0,later=function(){previous=new Date,timeout=null,result=func.apply(context,args)},function(){var now=new Date,remaining=wait-(now-previous);return context=this,args=arguments,0>=remaining?(clearTimeout(timeout),timeout=null,previous=now,result=func.apply(context,args)):timeout||(timeout=setTimeout(later,remaining)),result}},stringify:function(val){return _.isString(val)?val:JSON.stringify(val)},noop:function(){}}}(),WWW=function(){"use strict";function build(o){var www,classes;return classes=_.mixin({},defaultClassNames,o),www={css:buildCss(),classes:classes,html:buildHtml(classes),selectors:buildSelectors(classes)},{css:www.css,html:www.html,classes:www.classes,selectors:www.selectors,mixin:function(o){_.mixin(o,www)}}}function buildHtml(c){return{wrapper:'<span class="'+c.wrapper+'"></span>',menu:'<div class="'+c.menu+'"></div>'}}function buildSelectors(classes){var selectors={};return _.each(classes,function(v,k){selectors[k]="."+v}),selectors}function buildCss(){var css={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},menu:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return _.isMsie()&&_.mixin(css.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),css}var defaultClassNames={wrapper:"twitter-typeahead",input:"tt-input",hint:"tt-hint",menu:"tt-menu",dataset:"tt-dataset",suggestion:"tt-suggestion",selectable:"tt-selectable",empty:"tt-empty",open:"tt-open",cursor:"tt-cursor",highlight:"tt-highlight"};return build}(),EventBus=function(){"use strict";function EventBus(o){o&&o.el||$.error("EventBus initialized without el"),this.$el=$(o.el)}var namespace,deprecationMap;return namespace="typeahead:",deprecationMap={render:"rendered",cursorchange:"cursorchanged",select:"selected",autocomplete:"autocompleted"},_.mixin(EventBus.prototype,{_trigger:function(type,args){var $e;return $e=$.Event(namespace+type),(args=args||[]).unshift($e),this.$el.trigger.apply(this.$el,args),$e},before:function(type){var args,$e;return args=[].slice.call(arguments,1),$e=this._trigger("before"+type,args),$e.isDefaultPrevented()},trigger:function(type){var deprecatedType;this._trigger(type,[].slice.call(arguments,1)),(deprecatedType=deprecationMap[type])&&this._trigger(deprecatedType,[].slice.call(arguments,1))}}),EventBus}(),EventEmitter=function(){"use strict";function on(method,types,cb,context){var type;if(!cb)return this;for(types=types.split(splitter),cb=context?bindContext(cb,context):cb,this._callbacks=this._callbacks||{};type=types.shift();)this._callbacks[type]=this._callbacks[type]||{sync:[],async:[]},this._callbacks[type][method].push(cb);return this}function onAsync(types,cb,context){return on.call(this,"async",types,cb,context)}function onSync(types,cb,context){return on.call(this,"sync",types,cb,context)}function off(types){var type;if(!this._callbacks)return this;for(types=types.split(splitter);type=types.shift();)delete this._callbacks[type];return this}function trigger(types){var type,callbacks,args,syncFlush,asyncFlush;if(!this._callbacks)return this;for(types=types.split(splitter),args=[].slice.call(arguments,1);(type=types.shift())&&(callbacks=this._callbacks[type]);)syncFlush=getFlush(callbacks.sync,this,[type].concat(args)),asyncFlush=getFlush(callbacks.async,this,[type].concat(args)),syncFlush()&&nextTick(asyncFlush);return this}function getFlush(callbacks,context,args){function flush(){for(var cancelled,i=0,len=callbacks.length;!cancelled&&len>i;i+=1)cancelled=callbacks[i].apply(context,args)===!1;return!cancelled}return flush}function getNextTick(){var nextTickFn;return nextTickFn=window.setImmediate?function(fn){setImmediate(function(){fn()})}:function(fn){setTimeout(function(){fn()},0)}}function bindContext(fn,context){return fn.bind?fn.bind(context):function(){fn.apply(context,[].slice.call(arguments,0))}}var splitter=/\s+/,nextTick=getNextTick();return{onSync:onSync,onAsync:onAsync,off:off,trigger:trigger}}(),highlight=function(doc){"use strict";function getRegex(patterns,caseSensitive,wordsOnly){for(var regexStr,escapedPatterns=[],i=0,len=patterns.length;len>i;i++)escapedPatterns.push(_.escapeRegExChars(patterns[i]));return regexStr=wordsOnly?"\\b("+escapedPatterns.join("|")+")\\b":"("+escapedPatterns.join("|")+")",caseSensitive?new RegExp(regexStr):new RegExp(regexStr,"i")}var defaults={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function(o){function hightlightTextNode(textNode){var match,patternNode,wrapperNode;return(match=regex.exec(textNode.data))&&(wrapperNode=doc.createElement(o.tagName),o.className&&(wrapperNode.className=o.className),patternNode=textNode.splitText(match.index),patternNode.splitText(match[0].length),wrapperNode.appendChild(patternNode.cloneNode(!0)),
textNode.parentNode.replaceChild(wrapperNode,patternNode)),!!match}function traverse(el,hightlightTextNode){for(var childNode,TEXT_NODE_TYPE=3,i=0;i<el.childNodes.length;i++)childNode=el.childNodes[i],childNode.nodeType===TEXT_NODE_TYPE?i+=hightlightTextNode(childNode)?1:0:traverse(childNode,hightlightTextNode)}var regex;o=_.mixin({},defaults,o),o.node&&o.pattern&&(o.pattern=_.isArray(o.pattern)?o.pattern:[o.pattern],regex=getRegex(o.pattern,o.caseSensitive,o.wordsOnly),traverse(o.node,hightlightTextNode))}}(window.document),Input=function(){"use strict";function Input(o,www){o=o||{},o.input||$.error("input is missing"),www.mixin(this),this.$hint=$(o.hint),this.$input=$(o.input),this.query=this.$input.val(),this.queryWhenFocused=this.hasFocus()?this.query:null,this.$overflowHelper=buildOverflowHelper(this.$input),this._checkLanguageDirection(),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=_.noop)}function buildOverflowHelper($input){return $('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:$input.css("font-family"),fontSize:$input.css("font-size"),fontStyle:$input.css("font-style"),fontVariant:$input.css("font-variant"),fontWeight:$input.css("font-weight"),wordSpacing:$input.css("word-spacing"),letterSpacing:$input.css("letter-spacing"),textIndent:$input.css("text-indent"),textRendering:$input.css("text-rendering"),textTransform:$input.css("text-transform")}).insertAfter($input)}function areQueriesEquivalent(a,b){return Input.normalizeQuery(a)===Input.normalizeQuery(b)}function withModifier($e){return $e.altKey||$e.ctrlKey||$e.metaKey||$e.shiftKey}var specialKeyCodeMap;return specialKeyCodeMap={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},Input.normalizeQuery=function(str){return _.toStr(str).replace(/^\s*/g,"").replace(/\s{2,}/g," ")},_.mixin(Input.prototype,EventEmitter,{_onBlur:function(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function(){this.queryWhenFocused=this.query,this.trigger("focused")},_onKeydown:function($e){var keyName=specialKeyCodeMap[$e.which||$e.keyCode];this._managePreventDefault(keyName,$e),keyName&&this._shouldTrigger(keyName,$e)&&this.trigger(keyName+"Keyed",$e)},_onInput:function(){this._setQuery(this.getInputValue()),this.clearHintIfInvalid(),this._checkLanguageDirection()},_managePreventDefault:function(keyName,$e){var preventDefault;switch(keyName){case"up":case"down":preventDefault=!withModifier($e);break;default:preventDefault=!1}preventDefault&&$e.preventDefault()},_shouldTrigger:function(keyName,$e){var trigger;switch(keyName){case"tab":trigger=!withModifier($e);break;default:trigger=!0}return trigger},_checkLanguageDirection:function(){var dir=(this.$input.css("direction")||"ltr").toLowerCase();this.dir!==dir&&(this.dir=dir,this.$hint.attr("dir",dir),this.trigger("langDirChanged",dir))},_setQuery:function(val,silent){var areEquivalent,hasDifferentWhitespace;areEquivalent=areQueriesEquivalent(val,this.query),hasDifferentWhitespace=areEquivalent?this.query.length!==val.length:!1,this.query=val,silent||areEquivalent?!silent&&hasDifferentWhitespace&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},bind:function(){var onBlur,onFocus,onKeydown,onInput,that=this;return onBlur=_.bind(this._onBlur,this),onFocus=_.bind(this._onFocus,this),onKeydown=_.bind(this._onKeydown,this),onInput=_.bind(this._onInput,this),this.$input.on("blur.tt",onBlur).on("focus.tt",onFocus).on("keydown.tt",onKeydown),!_.isMsie()||_.isMsie()>9?this.$input.on("input.tt",onInput):this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function($e){specialKeyCodeMap[$e.which||$e.keyCode]||_.defer(_.bind(that._onInput,that,$e))}),this},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getLangDir:function(){return this.dir},getQuery:function(){return this.query||""},setQuery:function(val,silent){this.setInputValue(val),this._setQuery(val,silent)},hasQueryChangedSinceLastFocus:function(){return this.query!==this.queryWhenFocused},getInputValue:function(){return this.$input.val()},setInputValue:function(value){this.$input.val(value),this.clearHintIfInvalid(),this._checkLanguageDirection()},resetInputValue:function(){this.setInputValue(this.query)},getHint:function(){return this.$hint.val()},setHint:function(value){this.$hint.val(value)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var val,hint,valIsPrefixOfHint,isValid;val=this.getInputValue(),hint=this.getHint(),valIsPrefixOfHint=val!==hint&&0===hint.indexOf(val),isValid=""!==val&&valIsPrefixOfHint&&!this.hasOverflow(),!isValid&&this.clearHint()},hasFocus:function(){return this.$input.is(":focus")},hasOverflow:function(){var constraint=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=constraint},isCursorAtEnd:function(){var valueLength,selectionStart,range;return valueLength=this.$input.val().length,selectionStart=this.$input[0].selectionStart,_.isNumber(selectionStart)?selectionStart===valueLength:document.selection?(range=document.selection.createRange(),range.moveStart("character",-valueLength),valueLength===range.text.length):!0},destroy:function(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$overflowHelper.remove(),this.$hint=this.$input=this.$overflowHelper=$("<div>")}}),Input}(),Dataset=function(){"use strict";function Dataset(o,www){o=o||{},o.templates=o.templates||{},o.templates.notFound=o.templates.notFound||o.templates.empty,o.source||$.error("missing source"),o.node||$.error("missing node"),o.name&&!isValidName(o.name)&&$.error("invalid dataset name: "+o.name),www.mixin(this),this.highlight=!!o.highlight,this.name=o.name||nameGenerator(),this.limit=o.limit||5,this.displayFn=getDisplayFn(o.display||o.displayKey),this.templates=getTemplates(o.templates,this.displayFn),this.source=o.source.__ttAdapter?o.source.__ttAdapter():o.source,this.async=_.isUndefined(o.async)?this.source.length>2:!!o.async,this._resetLastSuggestion(),this.$el=$(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset+"-"+this.name)}function getDisplayFn(display){function displayFn(obj){return obj[display]}return display=display||_.stringify,_.isFunction(display)?display:displayFn}function getTemplates(templates,displayFn){function suggestionTemplate(context){return $("<div>").text(displayFn(context))}return{notFound:templates.notFound&&_.templatify(templates.notFound),pending:templates.pending&&_.templatify(templates.pending),header:templates.header&&_.templatify(templates.header),footer:templates.footer&&_.templatify(templates.footer),suggestion:templates.suggestion||suggestionTemplate}}function isValidName(str){return/^[_a-zA-Z0-9-]+$/.test(str)}var keys,nameGenerator;return keys={val:"tt-selectable-display",obj:"tt-selectable-object"},nameGenerator=_.getIdGenerator(),Dataset.extractData=function(el){var $el=$(el);return $el.data(keys.obj)?{val:$el.data(keys.val)||"",obj:$el.data(keys.obj)||null}:null},_.mixin(Dataset.prototype,EventEmitter,{_overwrite:function(query,suggestions){suggestions=suggestions||[],suggestions.length?this._renderSuggestions(query,suggestions):this.async&&this.templates.pending?this._renderPending(query):!this.async&&this.templates.notFound?this._renderNotFound(query):this._empty(),this.trigger("rendered",this.name,suggestions,!1)},_append:function(query,suggestions){suggestions=suggestions||[],suggestions.length&&this.$lastSuggestion.length?this._appendSuggestions(query,suggestions):suggestions.length?this._renderSuggestions(query,suggestions):!this.$lastSuggestion.length&&this.templates.notFound&&this._renderNotFound(query),this.trigger("rendered",this.name,suggestions,!0)},_renderSuggestions:function(query,suggestions){var $fragment;$fragment=this._getSuggestionsFragment(query,suggestions),this.$lastSuggestion=$fragment.children().last(),this.$el.html($fragment).prepend(this._getHeader(query,suggestions)).append(this._getFooter(query,suggestions))},_appendSuggestions:function(query,suggestions){var $fragment,$lastSuggestion;$fragment=this._getSuggestionsFragment(query,suggestions),$lastSuggestion=$fragment.children().last(),this.$lastSuggestion.after($fragment),this.$lastSuggestion=$lastSuggestion},_renderPending:function(query){var template=this.templates.pending;this._resetLastSuggestion(),template&&this.$el.html(template({query:query,dataset:this.name}))},_renderNotFound:function(query){var template=this.templates.notFound;this._resetLastSuggestion(),template&&this.$el.html(template({query:query,dataset:this.name}))},_empty:function(){this.$el.empty(),this._resetLastSuggestion()},_getSuggestionsFragment:function(query,suggestions){var fragment,that=this;return fragment=document.createDocumentFragment(),_.each(suggestions,function(suggestion){var $el,context;context=that._injectQuery(query,suggestion),$el=$(that.templates.suggestion(context)).data(keys.obj,suggestion).data(keys.val,that.displayFn(suggestion)).addClass(that.classes.suggestion+" "+that.classes.selectable),fragment.appendChild($el[0])}),this.highlight&&highlight({className:this.classes.highlight,node:fragment,pattern:query}),$(fragment)},_getFooter:function(query,suggestions){return this.templates.footer?this.templates.footer({query:query,suggestions:suggestions,dataset:this.name}):null},_getHeader:function(query,suggestions){return this.templates.header?this.templates.header({query:query,suggestions:suggestions,dataset:this.name}):null},_resetLastSuggestion:function(){this.$lastSuggestion=$()},_injectQuery:function(query,obj){return _.isObject(obj)?_.mixin({_query:query},obj):obj},update:function(query){function sync(suggestions){syncCalled||(syncCalled=!0,suggestions=(suggestions||[]).slice(0,that.limit),rendered=suggestions.length,that._overwrite(query,suggestions),rendered<that.limit&&that.async&&that.trigger("asyncRequested",query))}function async(suggestions){suggestions=suggestions||[],!canceled&&rendered<that.limit&&(that.cancel=$.noop,rendered+=suggestions.length,that._append(query,suggestions.slice(0,that.limit-rendered)),that.async&&that.trigger("asyncReceived",query))}var that=this,canceled=!1,syncCalled=!1,rendered=0;this.cancel(),this.cancel=function(){canceled=!0,that.cancel=$.noop,that.async&&that.trigger("asyncCanceled",query)},this.source(query,sync,async),!syncCalled&&sync([])},cancel:$.noop,clear:function(){this._empty(),this.cancel(),this.trigger("cleared")},isEmpty:function(){return this.$el.is(":empty")},destroy:function(){this.$el=$("<div>")}}),Dataset}(),Menu=function(){"use strict";function Menu(o,www){function initializeDataset(oDataset){var node=that.$node.find(oDataset.node).first();return oDataset.node=node.length?node:$("<div>").appendTo(that.$node),new Dataset(oDataset,www)}var that=this;o=o||{},o.node||$.error("node is required"),www.mixin(this),this.$node=$(o.node),this.query=null,this.datasets=_.map(o.datasets,initializeDataset),this.autoSelect=!!o.autoSelect}return _.mixin(Menu.prototype,EventEmitter,{_onSelectableClick:function($e){this.trigger("selectableClicked",$($e.currentTarget))},_onRendered:function(type,dataset,suggestions,async){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetRendered",dataset,suggestions,async)},_onCleared:function(){this.$node.toggleClass(this.classes.empty,this._allDatasetsEmpty()),this.trigger("datasetCleared")},_propagate:function(){this.trigger.apply(this,arguments)},_allDatasetsEmpty:function(){function isDatasetEmpty(dataset){return dataset.isEmpty()}return _.every(this.datasets,isDatasetEmpty)},_getSelectables:function(){return this.$node.find(this.selectors.selectable)},_removeCursor:function(){var $selectable=this.getActiveSelectable();$selectable&&$selectable.removeClass(this.classes.cursor)},_ensureVisible:function($el){var elTop,elBottom,nodeScrollTop,nodeHeight;elTop=$el.position().top,elBottom=elTop+$el.outerHeight(!0),nodeScrollTop=this.$node.scrollTop(),nodeHeight=this.$node.height()+parseInt(this.$node.css("paddingTop"),10)+parseInt(this.$node.css("paddingBottom"),10),0>elTop?this.$node.scrollTop(nodeScrollTop+elTop):elBottom>nodeHeight&&this.$node.scrollTop(nodeScrollTop+(elBottom-nodeHeight))},bind:function(){var onSelectableClick,that=this;return onSelectableClick=_.bind(this._onSelectableClick,this),this.$node.on("click.tt",this.selectors.selectable,onSelectableClick),_.each(this.datasets,function(dataset){dataset.onSync("asyncRequested",that._propagate,that).onSync("asyncCanceled",that._propagate,that).onSync("asyncReceived",that._propagate,that).onSync("rendered",that._onRendered,that).onSync("cleared",that._onCleared,that)}),this},isOpen:function(){return this.$node.hasClass(this.classes.open)},open:function(){var $suggestionList=$(this.$node[0].children[0]).find(this.selectors.suggestion+this.selectors.selectable);this.autoSelect&&$suggestionList.length>0&&$suggestionList.first().addClass(this.classes.cursor),this.$node.addClass(this.classes.open)},close:function(){this.$node.removeClass(this.classes.open),this._removeCursor()},setLanguageDirection:function(dir){this.$node.attr("dir",dir)},selectableRelativeToCursor:function(delta){var $selectables,$oldCursor,oldIndex,newIndex;return $oldCursor=this.getActiveSelectable(),$selectables=this._getSelectables(),oldIndex=$oldCursor?$selectables.index($oldCursor):-1,newIndex=oldIndex+delta,newIndex=(newIndex+1)%($selectables.length+1)-1,newIndex=-1>newIndex?$selectables.length-1:newIndex,-1===newIndex?null:$selectables.eq(newIndex)},setCursor:function($selectable){this._removeCursor(),($selectable=$selectable&&$selectable.first())&&($selectable.addClass(this.classes.cursor),this._ensureVisible($selectable))},getSelectableData:function($el){return $el&&$el.length?Dataset.extractData($el):null},getActiveSelectable:function(){var $selectable=this._getSelectables().filter(this.selectors.cursor).first();return $selectable.length?$selectable:null},getTopSelectable:function(){var $selectable=this._getSelectables().first();return $selectable.length?$selectable:null},update:function(query){function updateDataset(dataset){dataset.update(query)}var isValidUpdate=query!==this.query;return isValidUpdate&&(this.query=query,_.each(this.datasets,updateDataset)),isValidUpdate},empty:function(){function clearDataset(dataset){dataset.clear()}_.each(this.datasets,clearDataset),this.query=null,this.$node.addClass(this.classes.empty)},destroy:function(){function destroyDataset(dataset){dataset.destroy()}this.$node.off(".tt"),this.$node=$("<div>"),_.each(this.datasets,destroyDataset)}}),Menu}(),DefaultMenu=function(){"use strict";function DefaultMenu(){Menu.apply(this,[].slice.call(arguments,0))}var s=Menu.prototype;return _.mixin(DefaultMenu.prototype,Menu.prototype,{open:function(){return!this._allDatasetsEmpty()&&this._show(),s.open.apply(this,[].slice.call(arguments,0))},close:function(){return this._hide(),s.close.apply(this,[].slice.call(arguments,0))},_onRendered:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),s._onRendered.apply(this,[].slice.call(arguments,0))},_onCleared:function(){return this._allDatasetsEmpty()?this._hide():this.isOpen()&&this._show(),s._onCleared.apply(this,[].slice.call(arguments,0))},setLanguageDirection:function(dir){return this.$node.css("ltr"===dir?this.css.ltr:this.css.rtl),s.setLanguageDirection.apply(this,[].slice.call(arguments,0))},_hide:function(){this.$node.hide()},_show:function(){this.$node.css("display","block")}}),DefaultMenu}(),Typeahead=function(){"use strict";function Typeahead(o,www){var onFocused,onBlurred,onEnterKeyed,onTabKeyed,onEscKeyed,onUpKeyed,onDownKeyed,onLeftKeyed,onRightKeyed,onQueryChanged,onWhitespaceChanged;o=o||{},o.input||$.error("missing input"),o.menu||$.error("missing menu"),o.eventBus||$.error("missing event bus"),www.mixin(this),this.eventBus=o.eventBus,this.minLength=_.isNumber(o.minLength)?o.minLength:1,this.input=o.input,this.menu=o.menu,this.enabled=!0,this.active=!1,this.input.hasFocus()&&this.activate(),this.dir=this.input.getLangDir(),this._hacks(),this.menu.bind().onSync("selectableClicked",this._onSelectableClicked,this).onSync("asyncRequested",this._onAsyncRequested,this).onSync("asyncCanceled",this._onAsyncCanceled,this).onSync("asyncReceived",this._onAsyncReceived,this).onSync("datasetRendered",this._onDatasetRendered,this).onSync("datasetCleared",this._onDatasetCleared,this),onFocused=c(this,"activate","open","_onFocused"),onBlurred=c(this,"deactivate","_onBlurred"),onEnterKeyed=c(this,"isActive","isOpen","_onEnterKeyed"),onTabKeyed=c(this,"isActive","isOpen","_onTabKeyed"),onEscKeyed=c(this,"isActive","_onEscKeyed"),onUpKeyed=c(this,"isActive","open","_onUpKeyed"),onDownKeyed=c(this,"isActive","open","_onDownKeyed"),onLeftKeyed=c(this,"isActive","isOpen","_onLeftKeyed"),onRightKeyed=c(this,"isActive","isOpen","_onRightKeyed"),onQueryChanged=c(this,"_openIfActive","_onQueryChanged"),onWhitespaceChanged=c(this,"_openIfActive","_onWhitespaceChanged"),this.input.bind().onSync("focused",onFocused,this).onSync("blurred",onBlurred,this).onSync("enterKeyed",onEnterKeyed,this).onSync("tabKeyed",onTabKeyed,this).onSync("escKeyed",onEscKeyed,this).onSync("upKeyed",onUpKeyed,this).onSync("downKeyed",onDownKeyed,this).onSync("leftKeyed",onLeftKeyed,this).onSync("rightKeyed",onRightKeyed,this).onSync("queryChanged",onQueryChanged,this).onSync("whitespaceChanged",onWhitespaceChanged,this).onSync("langDirChanged",this._onLangDirChanged,this)}function c(ctx){var methods=[].slice.call(arguments,1);return function(){var args=[].slice.call(arguments);_.each(methods,function(method){return ctx[method].apply(ctx,args)})}}return _.mixin(Typeahead.prototype,{_hacks:function(){var $input,$menu;$input=this.input.$input||$("<div>"),$menu=this.menu.$node||$("<div>"),$input.on("blur.tt",function($e){var active,isActive,hasActive;active=document.activeElement,isActive=$menu.is(active),hasActive=$menu.has(active).length>0,_.isMsie()&&(isActive||hasActive)&&($e.preventDefault(),$e.stopImmediatePropagation(),_.defer(function(){$input.focus()}))}),$menu.on("mousedown.tt",function($e){$e.preventDefault()})},_onSelectableClicked:function(type,$el){this.select($el)},_onDatasetCleared:function(){this._updateHint()},_onDatasetRendered:function(type,dataset,suggestions,async){this._updateHint(),this.eventBus.trigger("render",suggestions,async,dataset)},_onAsyncRequested:function(type,dataset,query){this.eventBus.trigger("asyncrequest",query,dataset)},_onAsyncCanceled:function(type,dataset,query){this.eventBus.trigger("asynccancel",query,dataset)},_onAsyncReceived:function(type,dataset,query){this.eventBus.trigger("asyncreceive",query,dataset)},_onFocused:function(){this._minLengthMet()&&this.menu.update(this.input.getQuery())},_onBlurred:function(){this.input.hasQueryChangedSinceLastFocus()&&this.eventBus.trigger("change",this.input.getQuery())},_onEnterKeyed:function(type,$e){var $selectable;($selectable=this.menu.getActiveSelectable())&&this.select($selectable)&&$e.preventDefault()},_onTabKeyed:function(type,$e){var $selectable;($selectable=this.menu.getActiveSelectable())?this.select($selectable)&&$e.preventDefault():($selectable=this.menu.getTopSelectable())&&this.autocomplete($selectable)&&$e.preventDefault()},_onEscKeyed:function(){this.close()},_onUpKeyed:function(){this.moveCursor(-1)},_onDownKeyed:function(){this.moveCursor(1)},_onLeftKeyed:function(){"rtl"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onRightKeyed:function(){"ltr"===this.dir&&this.input.isCursorAtEnd()&&this.autocomplete(this.menu.getTopSelectable())},_onQueryChanged:function(e,query){this._minLengthMet(query)?this.menu.update(query):this.menu.empty()},_onWhitespaceChanged:function(){this._updateHint()},_onLangDirChanged:function(e,dir){this.dir!==dir&&(this.dir=dir,this.menu.setLanguageDirection(dir))},_openIfActive:function(){this.isActive()&&this.open()},_minLengthMet:function(query){return query=_.isString(query)?query:this.input.getQuery()||"",query.length>=this.minLength},_updateHint:function(){var $selectable,data,val,query,escapedQuery,frontMatchRegEx,match;$selectable=this.menu.getTopSelectable(),data=this.menu.getSelectableData($selectable),val=this.input.getInputValue(),!data||_.isBlankString(val)||this.input.hasOverflow()?this.input.clearHint():(query=Input.normalizeQuery(val),escapedQuery=_.escapeRegExChars(query),frontMatchRegEx=new RegExp("^(?:"+escapedQuery+")(.+$)","i"),match=frontMatchRegEx.exec(data.val),match&&this.input.setHint(val+match[1]),this.menu.autoSelect&&!$selectable.hasClass(this.classes.cursor)&&$selectable.addClass(this.classes.cursor))},isEnabled:function(){return this.enabled},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},isActive:function(){return this.active},activate:function(){return this.isActive()?!0:!this.isEnabled()||this.eventBus.before("active")?!1:(this.active=!0,this.eventBus.trigger("active"),!0)},deactivate:function(){return this.isActive()?this.eventBus.before("idle")?!1:(this.active=!1,this.close(),this.eventBus.trigger("idle"),!0):!0},isOpen:function(){return this.menu.isOpen()},open:function(){return this.isOpen()||this.eventBus.before("open")||(this.menu.open(),this._updateHint(),this.eventBus.trigger("open")),this.isOpen()},close:function(){return this.isOpen()&&!this.eventBus.before("close")&&(this.menu.close(),this.input.clearHint(),this.input.resetInputValue(),this.eventBus.trigger("close")),!this.isOpen()},setVal:function(val){this.input.setQuery(_.toStr(val))},getVal:function(){return this.input.getQuery()},select:function($selectable){var data=this.menu.getSelectableData($selectable);return data&&!this.eventBus.before("select",data.obj)?(this.input.setQuery(data.val,!0),this.eventBus.trigger("select",data.obj),this.close(),!0):!1},autocomplete:function($selectable){var query,data,isValid;return query=this.input.getQuery(),data=this.menu.getSelectableData($selectable),isValid=data&&query!==data.val,isValid&&!this.eventBus.before("autocomplete",data.obj)?(this.input.setQuery(data.val),this.eventBus.trigger("autocomplete",data.obj),!0):!1},moveCursor:function(delta){var query,$candidate,data,payload,cancelMove;return query=this.input.getQuery(),$candidate=this.menu.selectableRelativeToCursor(delta),data=this.menu.getSelectableData($candidate),payload=data?data.obj:null,cancelMove=this._minLengthMet()&&this.menu.update(query),cancelMove||this.eventBus.before("cursorchange",payload)?!1:(this.menu.setCursor($candidate),data?this.input.setInputValue(data.val):(this.input.resetInputValue(),this._updateHint()),this.eventBus.trigger("cursorchange",payload),!0)},destroy:function(){this.input.destroy(),this.menu.destroy()}}),Typeahead}();!function(){"use strict";function ttEach($els,fn){$els.each(function(){var typeahead,$input=$(this);(typeahead=$input.data(keys.typeahead))&&fn(typeahead,$input)})}function buildHintFromInput($input,www){return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop("readonly",!0).removeAttr("id name placeholder required").attr({autocomplete:"off",spellcheck:"false",tabindex:-1})}function prepInput($input,www){$input.data(keys.attrs,{dir:$input.attr("dir"),autocomplete:$input.attr("autocomplete"),spellcheck:$input.attr("spellcheck"),style:$input.attr("style")}),$input.addClass(www.classes.input).attr({autocomplete:"off",spellcheck:!1});try{!$input.attr("dir")&&$input.attr("dir","auto")}catch(e){}return $input}function getBackgroundStyles($el){return{backgroundAttachment:$el.css("background-attachment"),backgroundClip:$el.css("background-clip"),backgroundColor:$el.css("background-color"),backgroundImage:$el.css("background-image"),backgroundOrigin:$el.css("background-origin"),backgroundPosition:$el.css("background-position"),backgroundRepeat:$el.css("background-repeat"),backgroundSize:$el.css("background-size")}}function revert($input){var www,$wrapper;www=$input.data(keys.www),$wrapper=$input.parent().filter(www.selectors.wrapper),_.each($input.data(keys.attrs),function(val,key){_.isUndefined(val)?$input.removeAttr(key):$input.attr(key,val)}),$input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input),$wrapper.length&&($input.detach().insertAfter($wrapper),$wrapper.remove())}function $elOrNull(obj){var isValid,$el;return isValid=_.isJQuery(obj)||_.isElement(obj),$el=isValid?$(obj).first():[],$el.length?$el:null}var old,keys,methods;old=$.fn.typeahead,keys={www:"tt-www",attrs:"tt-attrs",typeahead:"tt-typeahead"},methods={initialize:function(o,datasets){function attach(){var $input,$wrapper,$hint,$menu,defaultHint,defaultMenu,eventBus,input,menu,typeahead,MenuConstructor;_.each(datasets,function(d){d.highlight=!!o.highlight}),$input=$(this),$wrapper=$(www.html.wrapper),$hint=$elOrNull(o.hint),$menu=$elOrNull(o.menu),defaultHint=o.hint!==!1&&!$hint,defaultMenu=o.menu!==!1&&!$menu,defaultHint&&($hint=buildHintFromInput($input,www)),defaultMenu&&($menu=$(www.html.menu).css(www.css.menu)),$hint&&$hint.val(""),$input=prepInput($input,www),(defaultHint||defaultMenu)&&($wrapper.css(www.css.wrapper),$input.css(defaultHint?www.css.input:www.css.inputWithNoHint),$input.wrap($wrapper).parent().prepend(defaultHint?$hint:null).append(defaultMenu?$menu:null)),MenuConstructor=defaultMenu?DefaultMenu:Menu,eventBus=new EventBus({el:$input}),input=new Input({hint:$hint,input:$input},www),menu=new MenuConstructor({node:$menu,autoSelect:!!o.autoSelect,datasets:datasets},www),typeahead=new Typeahead({input:input,menu:menu,eventBus:eventBus,minLength:o.minLength},www),$input.data(keys.www,www),$input.data(keys.typeahead,typeahead)}var www;return datasets=_.isArray(datasets)?datasets:[].slice.call(arguments,1),o=o||{},www=WWW(o.classNames),this.each(attach)},isEnabled:function(){var enabled;return ttEach(this.first(),function(t){enabled=t.isEnabled()}),enabled},enable:function(){return ttEach(this,function(t){t.enable()}),this},disable:function(){return ttEach(this,function(t){t.disable()}),this},isActive:function(){var active;return ttEach(this.first(),function(t){active=t.isActive()}),active},activate:function(){return ttEach(this,function(t){t.activate()}),this},deactivate:function(){return ttEach(this,function(t){t.deactivate()}),this},isOpen:function(){var open;return ttEach(this.first(),function(t){open=t.isOpen()}),open},open:function(){return ttEach(this,function(t){t.open()}),this},close:function(){return ttEach(this,function(t){t.close()}),this},select:function(el){var success=!1,$el=$(el);return ttEach(this.first(),function(t){success=t.select($el)}),success},autocomplete:function(el){var success=!1,$el=$(el);return ttEach(this.first(),function(t){success=t.autocomplete($el)}),success},moveCursor:function(delta){var success=!1;return ttEach(this.first(),function(t){success=t.moveCursor(delta)}),success},val:function(newVal){var query;return arguments.length?(ttEach(this,function(t){t.setVal(newVal)}),this):(ttEach(this.first(),function(t){query=t.getVal()}),query)},destroy:function(){return ttEach(this,function(typeahead,$input){revert($input),typeahead.destroy()}),this}},$.fn.typeahead=function(method){return methods[method]?methods[method].apply(this,[].slice.call(arguments,1)):methods.initialize.apply(this,arguments)},$.fn.typeahead.noConflict=function(){return $.fn.typeahead=old,this}}()})},{jquery:23}],98:[function(require,module,exports){(function(global){"use strict";function init(config){viewer.init(config.el,config.options);var controls=config.options.controls||[];controlInitialiser(controls)}window.proj4=require("proj4");var svg4everybody=require("svg4everybody");svg4everybody(),global.jQuery=require("jquery");var viewer=(require("jquery"),require("./src/viewer")),mapLoader=require("./src/maploader"),controlInitialiser=require("./src/controlinitialiser"),origo={};origo.map={},origo.controls={},origo.controls.geoposition=require("./src/geoposition"),origo.controls.mapmenu=require("./src/mapmenu"),origo.controls.print=require("./src/print"),origo.controls.sharemap=require("./src/sharemap"),origo.controls.legend=require("./src/legend"),origo.controls.search=require("./src/search"),origo.controls.editor=require("./src/editor"),origo.map.init=function(el,options){var map=mapLoader(el,options);return"function"==typeof map.then?map.then(function(config){init(config)}):init(map),viewer},module.exports=origo}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./src/controlinitialiser":99,"./src/editor":100,"./src/geoposition":105,"./src/legend":109,"./src/maploader":110,"./src/mapmenu":111,"./src/print":119,"./src/search":120,"./src/sharemap":121,"./src/viewer":136,jquery:23,proj4:61,svg4everybody:94}],99:[function(require,module,exports){"use strict";var controlInitialiser=function(controls){var controlName,controlOptions;controls.forEach(function(control){controlName=control.name,controlOptions=control.options||void 0,origo.controls.hasOwnProperty(controlName)&&(controlOptions?origo.controls[controlName].init(controlOptions):origo.controls[controlName].init())})};module.exports=controlInitialiser},{}],100:[function(require,module,exports){"use strict";var $=require("jquery"),utils=require("./utils"),editortoolbar=require("./editortoolbar");module.exports=function(){function bindUIActions(){$editorButton.on("click",function(e){$(".o-map").trigger({type:"enableInteraction",interaction:"editor"}),this.blur(),e.preventDefault()})}function render(){var el=utils.createListButton({id:"o-editor",iconCls:"o-icon-fa-pencil",src:"css/svg/fa-icons.svg#fa-pencil",text:"Redigera"});$("#menutools").append(el)}var $editorButton;return{init:function(options){render(),$editorButton=$("#o-editor-button"),bindUIActions(),editortoolbar.init(options)}}}()},{"./editortoolbar":101,"./utils":131,jquery:23}],101:[function(require,module,exports){"use strict";var $=(require("openlayers"),require("jquery")),viewer=require("./viewer"),transactionhandler=require("./transactionhandler"),editortemplate=require("./templates/editortoolbar.template.handlebars");module.exports=function(){function render(selectOptions){$("#map").append(editortemplate(selectOptions))}function onEnableInteraction(e){"editor"===e.interaction?(setActive(!0),transactionhandler.onSetEditLayer(editableLayers[defaultLayer])):(setActive(!1),transactionhandler.removeInteractions())}function setActive(state){state===!0?$("#o-editor-toolbar").removeClass("hidden"):$("#o-editor-toolbar").addClass("hidden")}function emitEnableInteraction(){$(".o-map").trigger({type:"enableInteraction",interaction:"editor"})}function selectionModel(layerNames){var selectOptions=layerNames.map(function(layerName){var obj={};return obj.name=viewer.getLayer(layerName).get("title"),obj.value=layerName,obj});return selectOptions}function setEditProps(layerNames,map,srsName){var initialValue={},result=layerNames.reduce(function(layerProps,layerName){var layer=viewer.getLayer(layerName),source=viewer.getMapSource()[layer.get("sourceName")];return layerProps[layerName]={editableLayer:layer,source:layer.getSource(),geometryType:layer.get("geometryType")||void 0,geometryName:layer.get("geometryName")||void 0,srsName:srsName,featureNS:source.workspace,featureType:layer.get("featureType"),attributes:layer.get("attributes"),title:layer.get("title")||"Information",url:source.url,map:map},layerProps},initialValue);return result}var defaultLayer,options={},editableLayers={};return{init:function(opt_options){$.extend(options,opt_options),defaultLayer=options.defaultLayer||options.editableLayers[0];var map=viewer.getMap(),srsName=viewer.getProjectionCode();render(selectionModel(options.editableLayers)),$(".o-map").on("enableInteraction",onEnableInteraction),editableLayers=setEditProps(options.editableLayers,map,srsName),options.editableLayers.forEach(function(layerName){
var layer=viewer.getLayer(layerName);layer.getSource().once("addfeature",function(e){editableLayers[layerName].geometryType=layer.getSource().getFeatures()[0].getGeometry().getType(),editableLayers[layerName].geometryName=layer.getSource().getFeatures()[0].getGeometryName(),layerName===defaultLayer&&options.isActive&&emitEnableInteraction()})}),this.bindUIActions(),options.isActive&&setActive(!0)},deleteFeature:function(){transactionhandler.deleteSelected()},attributeFeature:function(){transactionhandler.onAttributes()},drawFeature:function(){transactionhandler.activateInsert()},bindUIActions:function(){var self=this;$("#o-editor-draw").on("touchend click",function(e){self.drawFeature(),$("#o-editor-draw").blur(),e.preventDefault()}),$("#o-editor-attribute").on("touchend click",function(e){self.attributeFeature(),$("#o-editor-attribute").blur(),e.preventDefault()}),$("#o-editor-delete").on("touchend click",function(e){self.deleteFeature(),$("#o-editor-delete").blur(),e.preventDefault()}),$("#o-editor-close").on("click",function(e){$(".o-map").trigger({type:"enableInteraction",interaction:"featureInfo"}),$("#o-editor-close").blur(),e.preventDefault()}),$('select[name="layer-dropdown"]').change(function(){transactionhandler.removeInteractions(),transactionhandler.onSetEditLayer(editableLayers[$(this).val()])})}}}()},{"./templates/editortoolbar.template.handlebars":126,"./transactionhandler":130,"./viewer":136,jquery:23,openlayers:24}],102:[function(require,module,exports){"use strict";function init(opt_options){map=Viewer.getMap(),options=opt_options||{},pinning=options.hasOwnProperty("pinning")?options.pinning:!0;var pinStyleOptions=options.hasOwnProperty("pinStyle")?options.pinStyle:styleTypes.getStyle("pin");pinStyle=style.createStyleRule(pinStyleOptions)[0],savedPin=options.savedPin?maputils.createPointFeature(opt_options.savedPin,pinStyle):void 0,selectionStyles=style.createEditStyle();var savedSelection=options.savedSelection||void 0,savedFeature=savedPin||savedSelection||void 0;selectionLayer=featurelayer(savedFeature,map),showOverlay=options.hasOwnProperty("overlay")?options.overlay:!0,showOverlay?(Popup.init("#map"),identifyTarget="overlay"):(sidebar.init(),identifyTarget="sidebar"),clusterFeatureinfoLevel=options.hasOwnProperty("clusterFeatureinfoLevel")?options.clusterFeatureinfoLevel:1,map.on("click",onClick),$(".o-map").on("enableInteraction",onEnableInteraction)}function getSelection(){var selection={};return selection.geometryType=selectionLayer.getFeatures()[0].getGeometry().getType(),selection.coordinates=selectionLayer.getFeatures()[0].getGeometry().getCoordinates(),selection}function getPin(){return savedPin}function identify(items,target,coordinate){var content=items.map(function(i){return i.content}).join("");switch(content='<div id="identify"><div id="mdk-identify-carousel" class="owl-carousel owl-theme">'+content+"</div></div>",target){case"overlay":var overlay=new ol.Overlay({element:$("#popup").get(0)});map.addOverlay(overlay);var coord,geometry=items[0].feature.getGeometry();coord="Point"==geometry.getType()?geometry.getCoordinates():coordinate,overlay.setPosition(coord),Popup.setContent({content:content,title:items[0].title}),Popup.setVisibility(!0);initCarousel("#mdk-identify-carousel",void 0,function(){var currentItem=this.owl.currentItem;selectionLayer.clearAndAdd(items[currentItem].feature.clone(),selectionStyles[items[currentItem].feature.getGeometry().getType()]),Popup.setTitle(items[currentItem].title)});Viewer.autoPan();break;case"sidebar":sidebar.setContent({content:content,title:items[0].title}),sidebar.setVisibility(!0);initCarousel("#mdk-identify-carousel",void 0,function(){var currentItem=this.owl.currentItem;selectionLayer.clearAndAdd(items[currentItem].feature.clone(),selectionStyles[items[currentItem].feature.getGeometry().getType()]),sidebar.setTitle(items[currentItem].title)})}}function onClick(evt){Popup.setVisibility(!1),Viewer.removeOverlays(),savedPin=void 0;var clientResult=getFeatureInfo.getFeaturesAtPixel(evt,clusterFeatureinfoLevel);clientResult!==!1&&getFeatureInfo.getFeaturesFromRemote(evt).done(function(data){var serverResult=data||[],result=serverResult.concat(clientResult);if(result.length>0)selectionLayer.clear(),identify(result,identifyTarget,evt.coordinate);else if(selectionLayer.getFeatures().length>0)clear();else if(pinning){sidebar.setVisibility(!1);var resolution=map.getView().getResolution();setTimeout(function(){maputils.checkZoomChange(resolution,map.getView().getResolution())||(savedPin=maputils.createPointFeature(evt.coordinate,pinStyle),selectionLayer.addFeature(savedPin))},250)}else console.log("No features identified")})}function setActive(state){state===!0?map.on("click",onClick):(selectionLayer.clear(),Popup.setVisibility(!1),map.un("click",onClick))}function clear(){selectionLayer.clear(),sidebar.setVisibility(!1),Popup.setVisibility(!1),console.log("Clearing selection")}function onEnableInteraction(e){setActive("featureInfo"===e.interaction?!0:!1)}function initCarousel(id,options,cb){var carouselOptions=options||{navigation:!0,slideSpeed:300,paginationSpeed:400,singleItem:!0,rewindSpeed:200,navigationText:['<svg class="mdk-icon-fa-chevron-left"><use xlink:href="css/svg/fa-icons.svg#fa-chevron-left"></use></svg>','<svg class="mdk-icon-fa-chevron-right"><use xlink:href="css/svg/fa-icons.svg#fa-chevron-right"></use></svg>'],afterAction:cb};return $(id).owlCarousel(carouselOptions)}var ol=require("openlayers"),$=require("jquery"),Viewer=require("./viewer"),Popup=require("./popup"),sidebar=require("./sidebar"),maputils=require("./maputils"),featurelayer=require("./featurelayer"),style=require("./style"),styleTypes=require("./style/styletypes"),getFeatureInfo=require("./getfeatureinfo"),owlCarousel=require("../externs/owlcarousel-browserify");owlCarousel.loadjQueryPlugin();var options,map,pinning,pinStyle,selectionStyles,showOverlay,identifyTarget,clusterFeatureinfoLevel,selectionLayer=void 0,savedPin=void 0;module.exports.init=init,module.exports.clear=clear,module.exports.getSelection=getSelection,module.exports.getPin=getPin,module.exports.identify=identify},{"../externs/owlcarousel-browserify":2,"./featurelayer":104,"./getfeatureinfo":108,"./maputils":112,"./popup":118,"./sidebar":122,"./style":123,"./style/styletypes":125,"./viewer":136,jquery:23,openlayers:24}],103:[function(require,module,exports){"use strict";function featureinfotemplates(template,attributes){return templates[template](attributes)}var templates={};templates["default"]=require("./templates/featureinfotemplates/default"),module.exports=featureinfotemplates},{"./templates/featureinfotemplates/default":128}],104:[function(require,module,exports){"use strict";var ol=require("openlayers");module.exports=function(features,map){var collection=features?[features]:[],featureLayerStore=new ol.source.Vector({features:collection}),featureLayer=new ol.layer.Vector({source:featureLayerStore,map:map});return{addFeature:function(feature){featureLayerStore.addFeature(feature)},getFeatures:function(){return featureLayerStore.getFeatures()},getFeatureLayer:function(){return featurelayer},getFeatureStore:function(){return featureLayerStore},clear:function(){featureLayerStore.clear()},clearAndAdd:function(feature,style){featureLayerStore.clear(),featureLayer.setStyle(style),featureLayerStore.addFeature(feature)}}}},{openlayers:24}],105:[function(require,module,exports){"use strict";function init(){map=viewer.getMap();var tooltipText="Visa nuvarande position i kartan",el=utils.createButton({id:"geolocation-button",cls:"geolocation-button",iconCls:"mdk-icon-fa-location-arrow",src:"css/svg/fa-icons.svg#fa-location-arrow",tooltipText:tooltipText,tooltipPlacement:"east"});$("#map").append(el),settings.geolocateButtonId=$("#geolocation-button"),settings.geolocateButton=$("#geolocation-button button");var markerImg='<img id="geolocation_marker" src="img/geolocation_marker.png" />';$("#map").prepend(markerImg),markerEl=$("#geolocation_marker").get(0),marker=new ol.Overlay({positioning:"center-center",element:markerEl,stopEvent:!1}),positions=new ol.geom.LineString([],"XYZM"),geolocation=new ol.Geolocation({projection:map.getView().getProjection(),trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),bindUIActions()}function bindUIActions(){settings.geolocateButtonId.on("touchend click",function(e){enabled=!1,toggle(),settings.geolocateButton.blur(),e.preventDefault()})}function toggle(){settings.geolocateButton.hasClass("geolocation-button-true")?(settings.geolocateButton.removeClass("geolocation-button-true"),geolocation.setTracking(!1),geolocation.un("change",getPositionVal),map.un("postcompose",render),map.removeOverlay(marker)):(settings.geolocateButton.addClass("geolocation-button-true"),map.addOverlay(marker),geolocation.on("change",getPositionVal),geolocation.setTracking(!0),map.on("postcompose",render),map.render())}function getPositionVal(){var position=geolocation.getPosition(),heading=(geolocation.getAccuracy(),geolocation.getHeading()||0),speed=geolocation.getSpeed()||0,m=Date.now();addPosition(position,heading,m,speed)}function addPosition(position,heading,m,speed){var x=position[0],y=position[1],fCoords=positions.getCoordinates(),previous=fCoords[fCoords.length-1],prevHeading=previous&&previous[2];if(prevHeading){var headingDiff=heading-this.mod(prevHeading);if(Math.abs(headingDiff)>Math.PI){var sign=headingDiff>=0?1:-1;headingDiff=-sign*(2*Math.PI-Math.abs(headingDiff))}heading=prevHeading+headingDiff}positions.appendCoordinate([x,y,heading,m]),positions.setCoordinates(positions.getCoordinates().slice(-20)),heading&&speed?markerEl.src="img/geolocation_marker_heading.png":markerEl.src="img/geolocation_marker.png";var previousM=0;map.beforeRender(function(map,frameState){if(null!==frameState){var m=frameState.time-1.5*settings.deltaMean;m=Math.max(m,previousM),previousM=m;var c=positions.getCoordinateAtM(m,!0);frameState.viewState;c&&0==enabled&&geolocation.getTracking()?(marker.setPosition(c),map.getView().setCenter(c),map.getView().setZoom(10),enabled=!0):c&&geolocation.getTracking()&&marker.setPosition(c)}return!0})}function mod(n){return(n%(2*Math.PI)+2*Math.PI)%(2*Math.PI)}function getCenterWithHeading(position,rotation,resolution){var size=map.getSize(),height=size[1];return[position[0]-Math.sin(rotation)*height*resolution*1/4,position[1]+Math.cos(rotation)*height*resolution*1/4]}function render(){map.render}var map,geolocation,marker,markerEl,positions,ol=require("openlayers"),$=require("jquery"),viewer=require("./viewer"),utils=require("./utils"),settings={geolocateButtonId:void 0,geolocateButton:void 0,deltaMean:500},enabled=!1;module.exports.init=init,module.exports.bindUIActions=bindUIActions,module.exports.toggle=toggle,module.exports.getPositionVal=getPositionVal,module.exports.addPosition=addPosition,module.exports.mod=mod,module.exports.getCenterWithHeading=getCenterWithHeading,module.exports.render=render},{"./utils":131,"./viewer":136,jquery:23,openlayers:24}],106:[function(require,module,exports){"use strict";function filterObject(obj,excludedKeys){var key,result={};for(key in obj)-1===excludedKeys.indexOf(key)&&(result[key]=obj[key]);return result}function createUrl(prefix,suffix,url){var p=prefix||"",s=suffix||"";return p+url+s}var featureinfotemplates=require("./featureinfotemplates"),replacer=require("../src/utils/replacer");module.exports=function(feature,layer){var attribute,title,val,content="<div><ul>",li="";if(layer.get("attributes"))if("string"==typeof layer.get("attributes"))li=featureinfotemplates(layer.get("attributes"),feature.getProperties());else for(var i=0;i<layer.get("attributes").length;i++){if(attribute=layer.get("attributes")[i],title="",val="",attribute.name){if(feature.get(attribute.name)&&(val=feature.get(attribute.name),attribute.title&&(title="<b>"+attribute.title+"</b>"),attribute.url&&feature.get(attribute.url))){var url=createUrl(attribute.urlPrefix,attribute.urlSuffix,replacer.replace(feature.get(attribute.url),feature.getProperties()));val='<a href="'+url+'" target="_blank">'+feature.get(attribute.name)+"</a>"}}else if(attribute.url){if(feature.get(attribute.url)){var text=attribute.html||attribute.url,url=createUrl(attribute.urlPrefix,attribute.urlSuffix,replacer.replace(feature.get(attribute.url),feature.getProperties()));val='<a href="'+url+'" target="_blank">'+text+"</a>"}}else if(attribute.img){if(feature.get(attribute.img)){var url=createUrl(attribute.urlPrefix,attribute.urlSuffix,replacer.replace(feature.get(attribute.img),feature.getProperties())),attribution=attribute.attribution?'<div class="image-attribution">'+attribute.attribution+"</div>":"";val='<div class="image-container"><img src="'+url+'">'+attribution+"</div>"}}else attribute.html&&(val=replacer.replace(attribute.html,feature.getProperties()));var cls=' class="'+attribute.cls+'" '||"";li+="<li"+cls+">"+title+val+"</li>"}else{var attributes=filterObject(feature.getProperties(),["FID_","geometry"]);li=featureinfotemplates("default",attributes)}return content+=li+"</ul></div>"}},{"../src/utils/replacer":134,"./featureinfotemplates":103}],107:[function(require,module,exports){function fail(response){response.error&&console.log(response.error.message+"\n"+response.error.details.join("\n"))}var projectionCode,source,ol=require("openlayers"),$=require("jquery"),viewer=require("./viewer"),sourceType={};module.exports=function(id,layer){projectionCode=viewer.getProjectionCode(),source=viewer.getMapSource();var serverUrl=source[layer.get("sourceName")].url,type=layer.get("type");return sourceType[type](id,layer,serverUrl)},sourceType.AGS_FEATURE=function(id,layer,serverUrl){var esriSrs=projectionCode.split(":").pop(),layerId=layer.get("id"),esrijsonFormat=new ol.format.EsriJSON,url=serverUrl+"/"+layerId+"/query?f=json&returnGeometry=true&objectIds="+id+"&geometryType=esriGeometryEnvelope&inSR="+esriSrs+"&outFields=*&returnIdsOnly=false&returnCountOnly=false&geometryPrecision=2&outSR="+esriSrs;return $.ajax({url:url,dataType:"jsonp"}).then(function(response){if(response.error)return fail(response),[];var features=esrijsonFormat.readFeatures(response,{featureProjection:viewer.getProjection()});return features},fail)},sourceType.WFS=function(id,layer,serverUrl){var geometryName=layer.get("geometryName"),format=new ol.format.GeoJSON({geometryName:geometryName}),url=serverUrl+"?",data="service=WFS&version=1.0.0&request=GetFeature&typeName="+layer.get("name")+"&outputFormat=json&featureId="+id;return $.ajax({url:url,data:data,type:"POST",dataType:"json"}).then(function(response){return format.readFeatures(response)})}},{"./viewer":136,jquery:23,openlayers:24}],108:[function(require,module,exports){"use strict";function getFeaturesFromRemote(evt){map=Viewer.getMap();var requestResult=[],requestPromises=getFeatureInfoRequests(evt).map(function(request){return request.fn.then(function(feature){var layer=Viewer.getLayer(request.layer);return feature?(requestResult.push({title:layer.get("title"),feature:feature,content:getAttributes(feature,layer)}),requestResult):void 0})});return $.when.apply($,requestPromises).then(function(data){return requestResult})}function getFeatureInfoRequests(evt){var requests=[];if("crossOrigin"in new Image)map.forEachLayerAtPixel(evt.pixel,function(layer){var item=getGetFeatureInfoRequest(layer,evt.coordinate);item&&requests.push(item)});else if(isTainted(evt.pixel)){var layers=Viewer.getQueryableLayers();layers.forEach(function(layer){if(isTainted(evt.pixel,layer)){var item=getGetFeatureInfoRequest(layer,evt.coordinate);item&&requests.push(item)}else if(layerAtPixel(evt.pixel,layer)){var item=getGetFeatureInfoRequest(layer,evt.coordinate);item&&requests.push(item)}})}else map.forEachLayerAtPixel(evt.pixel,function(layer){var item=getGetFeatureInfoRequest(layer,evt.coordinate);item&&requests.push(item)});return requests}function getGetFeatureInfoRequest(layer,coordinate){var layerType=layer.get("type"),obj={};switch(obj.layer=layer.get("name"),layerType){case"WMTS":if(layer.get("featureinfoLayer")){var featureinfoLayerName=layer.get("featureinfoLayer"),featureinfoLayer=Viewer.getLayer(featureinfoLayerName);return getGetFeatureInfoRequest(featureinfoLayer,coordinate)}return void 0;case"WMS":if(layer.get("featureinfoLayer")){var featureinfoLayerName=layer.get("featureinfoLayer"),featureinfoLayer=Viewer.getLayer(featureinfoLayerName);return getGetFeatureInfoRequest(featureinfoLayer,coordinate)}return obj.cb="GEOJSON",obj.fn=getGetFeatureInfoUrl(layer,coordinate),obj;case"AGS_TILE":if(layer.get("featureinfoLayer")){var featureinfoLayerName=layer.get("featureinfoLayer"),featureinfoLayer=Viewer.getLayer(featureinfoLayerName);return getGetFeatureInfoRequest(featureinfoLayer,coordinate)}return obj.fn=getAGSIdentifyUrl(layer,coordinate),obj;default:return void 0}}function isTainted(pixel,layerFilter){try{return layerFilter?map.forEachLayerAtPixel(pixel,function(layer){return layerFilter===layer}):map.forEachLayerAtPixel(pixel,function(layer){}),!1}catch(e){return console.log(e),!0}}function layerAtPixel(pixel,matchLayer){map.forEachLayerAtPixel(pixel,function(layer){return matchLayer===layer})}function getFeaturesAtPixel(evt,clusterFeatureinfoLevel){map=Viewer.getMap();var result=[],cluster=!1;return map.forEachFeatureAtPixel(evt.pixel,function(feature,layer){var l=layer,queryable=!1;if(layer&&(queryable=layer.get("queryable")),feature.get("features")){var collection=feature.get("features");if(collection.length>1){var zoom=map.getView().getZoom(),zoomLimit=-1===clusterFeatureinfoLevel?Viewer.getResolutions().length:zoom+clusterFeatureinfoLevel;if(zoomLimit<Viewer.getResolutions().length)return map.getView().setCenter(evt.coordinate),map.getView().setZoom(zoom+1),cluster=!0,!0;collection.forEach(function(f){var item={};item.title=l.get("title"),item.feature=f,item.content=getAttributes(f,l),result.push(item)})}else if(1==collection.length&&queryable){var item={};item.title=l.get("title"),item.feature=collection[0],item.content=getAttributes(collection[0],l),result.push(item)}}else if(queryable){var item={};item.title=l.get("title"),item.feature=feature,item.content=getAttributes(feature,l),result.push(item)}}),cluster?!1:result}function getGetFeatureInfoUrl(layer,coordinate){var url=layer.getSource().getGetFeatureInfoUrl(coordinate,map.getView().getResolution(),Viewer.getProjection(),{INFO_FORMAT:"application/json"});return $.ajax(url,{type:"post"}).then(function(response){return response.error?[]:maputils.geojsonToFeature(response)})}function getAGSIdentifyUrl(layer,coordinate){var projectionCode=Viewer.getProjectionCode(),esriSrs=projectionCode.split(":").pop(),layerId=layer.get("id"),source=Viewer.getMapSource()[layer.get("sourceName")],serverUrl=source.url,esrijsonFormat=new ol.format.EsriJSON,size=map.getSize(),tolerance=source.hasOwnProperty("tolerance")?source.tolerance.toString():5,extent=map.getView().calculateExtent(size),url=serverUrl+"/identify?f=json&returnGeometry=true&geometryType=esriGeometryPoint&sr="+esriSrs+"&geometry="+coordinate+"&outFields=*&geometryPrecision=2&tolerance="+tolerance+"&layers=all:"+layerId+"&mapExtent="+extent+"&imageDisplay="+size+",96";return $.ajax({url:url,dataType:"jsonp"}).then(function(response){if(response.error)return[];var obj={};obj.features=response.results;var features=esrijsonFormat.readFeatures(obj,{featureProjection:Viewer.getProjection()});return features[0]})}var map,ol=require("openlayers"),$=require("jquery"),Viewer=require("./viewer"),maputils=require("./maputils"),getAttributes=require("./getattributes");module.exports.getFeaturesFromRemote=getFeaturesFromRemote,module.exports.getFeaturesAtPixel=getFeaturesAtPixel},{"./getattributes":106,"./maputils":112,"./viewer":136,jquery:23,openlayers:24}],109:[function(require,module,exports){"use strict";function init(opt_options){var options=opt_options||{};hasMapLegend=options.hasOwnProperty("hasMapLegend")?options.hasMapLegend:!0,styleSettings=viewer.getStyleSettings(),mapMenu=$("#mapmenu"),$("#menutools").append('<li class="menu-item"><div class="menu-item-divider"></div><li>'),addLegend(viewer.getGroups())}function getSymbol(style){var symbol="",s=style[0];if(s[0].hasOwnProperty("icon")){var src=s[0].icon.src,format=s[0].format||"png";if("png"==format)symbol='<div class="legend-item-img"><img style="width: auto; height: 20px;" src="'+src+'"></div>';else if("svg"==format){var o='<object type="image/svg+xml" data="'+src+'" style="width: 20px;"></object>',inlineStyle="background: url("+src+") no-repeat;width: 20px; height: 20px;background-size: 20px;";symbol='<div class="legend-item-img">'+o+"</div>"}}else if(s[0].hasOwnProperty("fill")){for(var fill="",i=0;i<s.length;i++)fill+=createFill(s[i]);symbol+='<div class="legend-item-img"><svg height="'+symbolSize+'" width="'+symbolSize+'">',symbol+=fill,symbol+="</svg></div>"}else if(s[0].hasOwnProperty("stroke")){for(var stroke="",i=0;i<s.length;i++)stroke+=createStroke(s[i]);symbol+='<div class="legend-item-img"><svg height="'+symbolSize+'" width="'+symbolSize+'">',symbol+=stroke,symbol+="</svg></div>"}else if(s[0].hasOwnProperty("circle")){for(var circle="",i=0;i<s.length;i++)circle+=createCircle(s[i]);symbol+='<div class="legend-item-img"><svg height="'+symbolSize+'" width="'+symbolSize+'">',symbol+=circle,symbol+="</svg></div>"}else if(s[0].hasOwnProperty("image")){var src=s[0].image.src,inlineStyle="background: url("+src+") no-repeat;width: 30px; height: 30px;background-size: 30px;";symbol='<div class="legend-item-img" style="'+inlineStyle+'"></div>'}return symbol}function createFill(fillProperties){var f=fillProperties,strokeWidth=0;if(f.hasOwnProperty("stroke")){strokeWidth=f.stroke.width>=3?3:f.stroke.width;var stroke="stroke:"+f.stroke.color+";"||"stroke:none;";stroke+="stroke-width:"+strokeWidth+";"||"",stroke+="stroke-dasharray:"+f.stroke.lineDash+";"||""}var fillSize=symbolSize-4,fill='<rect x="2" y="2" rx="2" ry="2" width="'+fillSize+'" height="'+fillSize+'" ';return fill+=f.hasOwnProperty("fill")?'style="fill:'+f.fill.color+";":'style="fill:none;',fill+=stroke,fill+='"></rect>'}function createCircle(circleProperties){var c=circleProperties.circle,strokeWidth=0;if(c.hasOwnProperty("stroke")){strokeWidth=c.stroke.width>=3?3:c.stroke.width;var stroke="stroke:"+c.stroke.color+";"||"stroke:none;";stroke+="stroke-width:"+strokeWidth+";"||""}var size=symbolSize/2,fill='<circle cx="'+size+'" cy="'+size+'" r="'+c.radius+'" ';return fill+=c.hasOwnProperty("fill")?'style="fill:'+c.fill.color+";":'style="fill:none;',fill+=stroke,fill+='"></circle>'}function createStroke(strokeProperties){var s=strokeProperties,strokeWidth=s.stroke.width>4?4:s.stroke.width;strokeWidth=s.stroke.width<2?2:strokeWidth;var stroke='<line x1 = "2" y1= "'+(symbolSize-4).toString()+'" x2="'+(symbolSize-4).toString()+'" y2="2" ';return stroke+='style="',stroke+="stroke:"+s.stroke.color+";"||"stroke:none;",stroke+="stroke-width:"+strokeWidth+";"||"",stroke+="stroke-dasharray:"+s.stroke.lineDash+";"||"",stroke+='"/>'}function createLegendItem(layerid){var layername=layerid.split("legend-").pop(),layer=viewer.getLayer(layername),legendItem='<li class="legend '+layername+'" id="'+layerid+'"><div class ="legend-item"><div class="checkbox"><svg class="mdk-icon-fa-square-o"><use xlink:href="css/svg/fa-icons.svg#fa-square-o"></use></svg><svg class="mdk-icon-fa-check-square-o"><use xlink:href="css/svg/fa-icons.svg#fa-check-square-o"></use></svg></div>';legendItem+=layer.get("styleName")?getSymbol(styleSettings[layer.get("styleName")]):"";var title='<div class="legend-item-title">'+layer.get("title")+"</div></div></li>";return legendItem+=title}function addLegend(groups){var legendGroup,overlayGroup,layers=viewer.getLayers(),item="",legend='<div id="legendlist"><ul class="legendlist"></ul></div>';$("#mapmenu").append(legend);for(var i=0;i<groups.length;i++)groups[i].hasOwnProperty("overlayGroup")&&(overlayGroup=groups[i].name),legendGroup='<li><ul id="group-'+groups[i].name+'" class="legend-group"><li class="legend-header"><div class="legend-item">'+groups[i].title+'<div class="icon-expand"><svg class="mdk-icon-fa-chevron-right"><use xlink:href="css/svg/fa-icons.svg#fa-chevron-right"></use></svg><svg class="mdk-icon-fa-chevron-down"><use xlink:href="css/svg/fa-icons.svg#fa-chevron-down"></use></svg></div></div></li></ul></li>',$("#legendlist .legendlist").append(legendGroup),1==groups[i].expanded?$("#group-"+groups[i].name+" .icon-expand").addClass("icon-expand-true"):($("#group-"+groups[i].name+" .icon-expand").addClass("icon-expand-false"),$("#group-"+groups[i].name).addClass("ul-expand-false")),$("#group-"+groups[i].name+" .legend-header").on("touchend click",function(evt){toggleGroup($(this)),evt.preventDefault()});if(hasMapLegend){var mapLegend='<div id="map-legend"><ul id="legend-overlay"><li class="legend hidden"><div class ="toggle-button toggle-button-max"><svg class="mdk-icon-fa-angle-double-down"><use xlink:href="css/svg/fa-icons.svg#fa-angle-double-down"></use></svg><svg class="mdk-icon-fa-angle-double-up"><use xlink:href="css/svg/fa-icons.svg#fa-angle-double-up"></use></svg></div></li><li><ul id="overlay-list"></li></ul></ul><ul id="map-legend-background"></ul></div>';$("#map").append(mapLegend),overlayGroup&&$("#map-legend-background").prepend('<div class="legend-item-divider"></div>')}for(var i=layers.length-1;i>=0;i--){var name=layers[i].get("name"),title='<div class="legend-item-title">'+layers[i].get("title")+"</div></div></li>";"background"==layers[i].get("group")?(item='<li class="legend '+name+'" id="'+name+'"><div class ="legend-item"><div class="checkbox"><svg class="mdk-icon-fa-check"><use xlink:href="css/svg/fa-icons.svg#fa-check"></use></svg></div>',item+=title,$("#group-"+layers[i].get("group")).append(item),item='<li class="legend '+name+'" id="legend-'+name+'"><div class ="legend-item">',item+=layers[i].get("styleName")?getSymbol(styleSettings[layers[i].get("styleName")]):"",item+="</div>",$("#map-legend-background").append(item)):layers[i].get("group")&&"none"!=layers[i].get("group")&&(item='<li class="legend '+name+'" id="'+name+'"><div class ="legend-item"><div class="checkbox"><svg class="mdk-icon-fa-square-o"><use xlink:href="css/svg/fa-icons.svg#fa-square-o"></use></svg><svg class="mdk-icon-fa-check-square-o"><use xlink:href="css/svg/fa-icons.svg#fa-check-square-o"></use></svg></div>',item+=layers[i].get("styleName")?getSymbol(styleSettings[layers[i].get("styleName")]):"",item+=title,$("#group-"+layers[i].get("group")).append(item),(1==layers[i].get("legend")||layers[i].getVisible(!0))&&(item='<li class="legend '+name+'" id="legend-'+name+'"><div class ="legend-item"><div class="checkbox"><svg class="mdk-icon-fa-square-o"><use xlink:href="css/svg/fa-icons.svg#fa-square-o"></use></svg><svg class="mdk-icon-fa-check-square-o"><use xlink:href="css/svg/fa-icons.svg#fa-check-square-o"></use></svg></div>',item+=layers[i].get("styleName")?getSymbol(styleSettings[layers[i].get("styleName")]):"",item+=title,$("#overlay-list").append(item))),checkToggleOverlay(),"background"==layers[i].get("group")?1==layers[i].getVisible()?($("#"+name+" .checkbox").addClass("check-true"),$("#legend-"+name).addClass("check-true-img")):($("#"+name+" .checkbox").addClass("check-false"),$("#legend-"+name).addClass("check-false-img")):1==layers[i].getVisible()?$("."+name+" .checkbox").addClass("checkbox-true"):$("."+name+" .checkbox").addClass("checkbox-false"),$("#"+name).on("touchend click",function(evt){$(this).each(function(){var that=this;toggleCheck($(that).attr("id"))}),evt.preventDefault()}),$("#legend-"+name).on("touchend click",function(evt){$(this).each(function(){var that=this;toggleCheck($(that).attr("id"))}),evt.preventDefault()})}$("#legend-overlay .toggle-button").on("touchend click",function(evt){toggleOverlay(),evt.preventDefault()})}function onToggleCheck(layername){$("#"+layername).on("touchend click",function(evt){$(this).each(function(){var that=this;toggleCheck($(that).attr("id"))}),evt.preventDefault()})}function offToggleCheck(layername){$("#"+layername).off("touchend click",function(evt){$(this).each(function(){var that=this;toggleCheck($(that).attr("id"))}),evt.preventDefault()})}function toggleGroup(groupheader){var group=groupheader.parent(".legend-group"),groupicon=$("#"+group.attr("id")+" .icon-expand");groupicon.hasClass("icon-expand-false")?(groupicon.removeClass("icon-expand-false"),groupicon.addClass("icon-expand-true"),group.removeClass("ul-expand-false")):(groupicon.removeClass("icon-expand-true"),groupicon.addClass("icon-expand-false"),group.addClass("ul-expand-false"))}function toggleCheck(layerid){var layername=layerid.split("legend-").pop(),inMapLegend=layerid.split("legend-").length>1?!0:!1,layer=viewer.getLayer(layername);if("background"==layer.get("group")){for(var group=viewer.getGroup("background"),i=0;i<group.length;i++)group[i].setVisible(!1),$("#"+group[i].get("name")+" .checkbox").removeClass("check-true"),$("#"+group[i].get("name")+" .checkbox").addClass("check-false"),$("#legend-"+group[i].get("name")).removeClass("check-true-img"),$("#legend-"+group[i].get("name")).addClass("check-false-img");layer.setVisible(!0),$("#"+layername+" .checkbox").removeClass("check-false"),$("#"+layername+" .checkbox").addClass("check-true"),$("#legend-"+layername).removeClass("check-false-img"),$("#legend-"+layername).addClass("check-true-img")}else $("."+layername+" .checkbox").hasClass("checkbox-true")?($("."+layername+" .checkbox").removeClass("checkbox-true"),$("."+layername+" .checkbox").addClass("checkbox-false"),0==inMapLegend&&(offToggleCheck("legend-"+layername),$("#legend-"+layername).remove(),layer.set("legend",!1),checkToggleOverlay()),layer.setVisible(!1)):(0==inMapLegend&&0==$("#legend-"+layername).length&&($("#overlay-list").append(createLegendItem("legend-"+layername)),onToggleCheck("legend-"+layername),checkToggleOverlay()),$("."+layername+" .checkbox").removeClass("checkbox-false"),$("."+layername+" .checkbox").addClass("checkbox-true"),layer.setVisible(!0),layer.set("legend",!0))}function checkToggleOverlay(){$("#overlay-list li").length>1&&$("#legend-overlay >li:first-child").hasClass("hidden")?$("#legend-overlay > li:first-child").removeClass("hidden"):$("#overlay-list li").length<2&&($("#legend-overlay > li:first-child").addClass("hidden"),1==$("#overlay-list").length&&$("#overlay-list").hasClass("hidden")&&($("#overlay-list").removeClass("hidden"),toggleOverlay()))}function toggleOverlay(){$("#legend-overlay .toggle-button").hasClass("toggle-button-max")?($("#legend-overlay .toggle-button").removeClass("toggle-button-max"),$("#legend-overlay .toggle-button").addClass("toggle-button-min"),$("#overlay-list").addClass("hidden")):($("#legend-overlay .toggle-button").removeClass("toggle-button-min"),$("#legend-overlay .toggle-button").addClass("toggle-button-max"),$("#overlay-list").removeClass("hidden"))}var styleSettings,mapMenu,hasMapLegend,$=require("jquery"),viewer=require("./viewer"),symbolSize=(require("./utils"),20);module.exports.init=init},{"./utils":131,"./viewer":136,jquery:23}],110:[function(require,module,exports){"use strict";var $=require("jquery"),permalink=require("./permalink/permalink"),getUrl=require("./utils/geturl"),isUrl=require("./utils/isurl"),mapLoader=function(el,mapOptions){var map={},mapEl="#app-wrapper",urlParams=void 0;if(mapOptions?"#"!==mapEl.substring(0,0)?mapEl="#"+el:"#"===mapEl.substring(0,0)&&(mapEl=el):mapOptions=el,map.el=mapEl,"object"==typeof mapOptions)return window.location.hash&&(urlParams=permalink.parsePermalink(window.location.href)),map.options=mapOptions,map.options.url=getUrl(),map.options.map=void 0,map.options.params=urlParams,map;if("string"==typeof mapOptions){if(isUrl(mapOptions)){urlParams=permalink.parsePermalink(mapOptions);var url=mapOptions.split("#")[0];-1!==url.substring(url.lastIndexOf("/")).indexOf(".htm")?url=url.substring(0,url.lastIndexOf("/")+1):"/"!==url.substr(url.length-1)&&(url+="/");
var json=urlParams.map+".json";return url+=json,$.getJSON(url).then(function(data){return map.options=data,map.options.url=url,map.options.map=json,map.options.params=urlParams,map})}return window.location.hash&&(urlParams=permalink.parsePermalink(window.location.href)),$.getJSON(mapOptions).then(function(data){return map.options=data,map.options.url=getUrl(),map.options.map=mapOptions,map.options.params=urlParams,map})}};module.exports=mapLoader},{"./permalink/permalink":115,"./utils/geturl":132,"./utils/isurl":133,jquery:23}],111:[function(require,module,exports){"use strict";function init(){styleSettings=viewer.getStyleSettings();var el=utils.createButton({text:"Meny",id:"mapmenu-button",cls:"mapmenu-button-true",iconCls:"mdk-icon-fa-bars",src:"css/svg/fa-icons.svg#fa-bars",tooltipText:"Meny",tooltipPlacement:"west"});$("#map").append(el),$menuButton=$("#mapmenu-button button");var menuEl='<div id="mapmenu"><div class="block"><ul id="menutools"><li></li></ul>';$("#map").append(menuEl),$mapMenu=$("#mapmenu");var closeButton=utils.createButton({id:"mapmenu-button-close",cls:"no-boxshadow",iconCls:"mdk-icon-menu-fa-times",src:"css/svg/fa-icons.svg#fa-times",tooltipText:"Stäng meny",tooltipPlacement:"west"});$("#menutools").append(closeButton),$closeButton=$("#mapmenu-button-close"),bindUIActions()}function bindUIActions(){$menuButton.on("touchend click",function(e){toggleMenu(),$menuButton.blur(),e.preventDefault()}),$closeButton.on("click",function(e){toggleMenu(),$closeButton.blur(),e.preventDefault()})}function toggleMenu(){$mapMenu.hasClass("mapmenu-show")?($mapMenu.removeClass("mapmenu-show"),$menuButton.removeClass("mapmenu-button-false"),$menuButton.addClass("mapmenu-button-true")):($mapMenu.addClass("mapmenu-show"),$menuButton.removeClass("mapmenu-button-true"),$menuButton.addClass("mapmenu-button-false"))}function getTarget(){return $mapMenu}var $menuButton,$closeButton,$mapMenu,styleSettings,$=require("jquery"),viewer=require("./viewer"),utils=require("./utils");module.exports.init=init,module.exports.toggleMenu=toggleMenu,module.exports.getTarget=getTarget},{"./utils":131,"./viewer":136,jquery:23}],112:[function(require,module,exports){"use strict";var ol=require("openlayers"),viewer=(require("jquery"),require("./viewer"));module.exports={customProjection:function(projectionCode,extent){return new ol.proj.Projection({code:projectionCode,extent:extent})},tileGrid:function(extent,resolutions){var origin=ol.extent.getTopLeft(extent);return new ol.tilegrid.TileGrid({extent:extent,origin:origin,resolutions:resolutions})},checkZoomChange:function(resolution,currentResolution){return resolution!==currentResolution?!0:!1},createPointFeature:function(coordinate,style){var feature=new ol.Feature({geometry:new ol.geom.Point(coordinate)});return feature.setStyle(style),feature},geojsonToFeature:function(obj){var vectorSource=new ol.source.Vector({features:(new ol.format.GeoJSON).readFeatures(obj)});return vectorSource.getFeatures()[0]},wktToFeature:function(wkt,srsName){var format=new ol.format.WKT,feature=format.readFeature(wkt,{dataProjection:srsName,featureProjection:srsName});return feature},zoomToExent:function(geometry,level){var map=viewer.getMap(),view=map.getView(),maxZoom=level,extent=geometry.getExtent();return extent?(view.fit(extent,map.getSize(),{maxZoom:maxZoom}),extent):void 0},getCenter:function(geometry){var center,type=geometry.getType();switch(type){case"Polygon":center=geometry.getInteriorPoint().getCoordinates(),console.log(center);break;case"MultiPolygon":center=geometry.getInteriorPoints()[0].getCoordinates();break;case"Point":center=geometry.getCoordinates();break;case"MultiPoint":center=geometry[0].getCoordinates();break;case"LineString":center=geometry.getCoordinateAt(.5);break;case"MultiLineString":center=geometry.getLineStrings()[0].getCoordinateAt(.5);break;case"Circle":center=geometry.getCenter()}return center}}},{"./viewer":136,jquery:23,openlayers:24}],113:[function(require,module,exports){"use strict";function init(){createButton(),bindUIActions()}function bindUIActions(){$("#window-button button").click(function(){$("#window-button button").blur(),openMapWindow()})}function createButton(){var tooltipText="Visa kartan i nytt fönster",el=utils.createButton({id:"window-button",cls:"mapwindow-button",iconCls:"mdk-icon-fa-expand",src:"css/svg/fa-icons.svg#fa-expand",tooltipText:tooltipText,tooltipPlacement:"east"});$("#map").append(el)}function openMapWindow(){var url=viewer.getMapUrl();window.open(url)}var $=require("jquery"),utils=require("./utils"),viewer=require("./viewer");({windowButton:$("#window-button button")});module.exports.init=init},{"./utils":131,"./viewer":136,jquery:23}],114:[function(require,module,exports){function init(){}function bindUIActions(){$(".mdk-modal-screen, .mdk-close-button").click(function(){closeModal()})}function createModal(modalTarget,options){var title=options.title||void 0,content=options.content||void 0;options.footer||void 0;settings.target=$(modalTarget),settings.modal='<div id="mdk-modal"><div class="mdk-modal-screen"></div><div class="mdk-modal"><div class="mdk-close-button"><svg class="mdk-icon-fa-times"><use xlink:href="css/svg/fa-icons.svg#fa-times"></use></svg></div><div class="mdk-modal-title">'+title+'</div><div class="mdk-modal-content">'+content+"</div></div></div>"}function showModal(){settings.target.prepend(settings.modal),bindUIActions()}function closeModal(){$("#mdk-modal").remove()}var $=require("jquery"),settings={target:void 0,modal:void 0};module.exports.init=init,module.exports.createModal=createModal,module.exports.showModal=showModal,module.exports.closeModal=closeModal},{jquery:23}],115:[function(require,module,exports){"use strict";var permalinkParser=require("./permalinkparser"),permalinkStore=require("./permalinkstore"),urlparser=require("../utils/urlparser");module.exports=function(){return{getPermalink:function(options){var hash=urlparser.formatUrl(permalinkStore.getState()),url=permalinkStore.getUrl()+"#"+hash;return url},parsePermalink:function(url){if(url.indexOf("#")>-1){var urlSearch=url.split("#")[1],urlParts=urlSearch.split("&"),urlAsObj={};return urlParts.forEach(function(part){var key=part.split("=")[0],val=part.split("=")[1];permalinkParser.hasOwnProperty(key)&&(urlAsObj[key]=permalinkParser[key](val))}),urlAsObj}return!1}}}()},{"../utils/urlparser":135,"./permalinkparser":116,"./permalinkstore":117}],116:[function(require,module,exports){"use strict";var urlparser=require("../utils/urlparser"),layerModel={v:{name:"visible",dataType:"boolean"},s:{name:"legend",dataType:"boolean"}};module.exports={layers:function(layersStr){var layers=layersStr.split(","),layerObjects={};return layers.forEach(function(layer){var obj={},layerObject=urlparser.objectify(layer,{topmost:"name"});Object.getOwnPropertyNames(layerObject).forEach(function(prop){var val=layerObject[prop];if(layerModel.hasOwnProperty(prop)){var attribute=layerModel[prop];obj[attribute.name]=urlparser.strBoolean(val)}else obj[prop]=val}),layerObjects[obj.name]=obj}),layerObjects},zoom:function(zoomStr){return parseInt(zoomStr)},center:function(centerStr){var center=centerStr.split(",").map(function(coord){return parseInt(coord)});return center},selection:function(selectionStr){return urlparser.strArrayify(selectionStr,{topmostName:"geometryType",arrName:"coordinates"})},pin:function(pinStr){return urlparser.strIntify(pinStr)},map:function(mapStr){return mapStr}}},{"../utils/urlparser":135}],117:[function(require,module,exports){"use strict";function getSaveLayers(layers){var saveLayers=[];return layers.forEach(function(layer){var saveLayer={};saveLayer.v=layer.getVisible()===!0?1:0,saveLayer.s=layer.get("legend")===!0?1:0,(saveLayer.s||saveLayer.v)&&(saveLayer.name=layer.get("name"),saveLayers.push(urlparser.stringify(saveLayer,{topmost:"name"})))}),saveLayers}var state,url,viewer=require("../viewer"),getPin=(require("../featureinfo").getSelection,require("../featureinfo").getPin),urlparser=require("../utils/urlparser"),permalinkStore={};permalinkStore.getState=function(){state={};var view=viewer.getMap().getView(),layers=viewer.getLayers();return state.layers=getSaveLayers(layers),state.center=view.getCenter().map(function(coord){return Math.round(coord)}).join(),state.zoom=view.getZoom().toString(),getPin()&&(state.pin=getPin().getGeometry().getCoordinates().map(function(coord){return Math.round(coord)}).join()),viewer.getMapName()&&(state.map=viewer.getMapName().split(".")[0]),state},permalinkStore.getUrl=function(){return url=viewer.getUrl()},module.exports=permalinkStore},{"../featureinfo":102,"../utils/urlparser":135,"../viewer":136}],118:[function(require,module,exports){function init(target){var pop='<div id="popup"><div class="popup"><div class="mdk-close-button"><svg class="mdk-icon-fa-times"><use xlink:href="css/svg/fa-icons.svg#fa-times"></use></svg></div><div class="popup-title"></div><div class="popup-content"></div></div></div>';$(target).append(pop),bindUIActions()}function bindUIActions(){$("#popup .popup .mdk-close-button").on("touchend click",function(evt){closePopup(),evt.preventDefault()})}function setVisibility(visible){1==visible?$("#popup .popup").css("display","block"):$("#popup .popup").css("display","none")}function setTitle(title){$("#popup .popup-title").html(title)}function setContent(config){config.title?$("#popup .popup .popup-title").html(config.title):$("#popup .popup .popup-title").html(""),config.content?$("#popup .popup .popup-content").html(config.content):$("#popup .popup .popup-content").html("")}function closePopup(){setVisibility(!1)}var $=require("jquery");module.exports.init=init,module.exports.setVisibility=setVisibility,module.exports.setTitle=setTitle,module.exports.setContent=setContent,module.exports.closePopup=closePopup},{jquery:23}],119:[function(require,module,exports){"use strict";function init(){map=viewer.getMap();var el=utils.createListButton({id:"print",iconCls:"mdk-icon-fa-print",src:"css/svg/fa-icons.svg#fa-print",text:"Skriv ut"});$("#menutools").append(el),printButton=$("#print-button"),bindUIActions()}function bindUIActions(){printButton.on("touchend click",function(e){$("#app-wrapper").append('<canvas id="print" style="display: none"></canvas>'),createImage(),e.preventDefault()})}function imageToPrint(printCanvas){var imageCrop=new Image;try{imageCrop.src=printCanvas.get(0).toDataURL("image/png")}catch(e){console.log(e)}finally{var pw='<html><head><link href="img/print.css" rel="stylesheet"></head><body>';pw+='<div class="print-logo"><img src="print/logo_print.png"></div>',pw+='<div class="map-canvas"><img src="'+imageCrop.src+'"/></div>',pw+='<div class="print-attribution">&copy&nbsp;Lantmäteriet&nbsp;Geodatasamverkan</div>',pw+="</body></html>";var printWindow=window.open("","","width=800,height=820");printWindow.document.write(pw),printWindow.document.close(),setTimeout(function(){printWindow.print(),setTimeout(function(){printWindow.close(),$("#print").remove()},10)},200)}}function createImage(){var canvas=$("canvas"),image=new Image;try{var imageUrl=canvas.get(0).toDataURL("image/png")}catch(e){console.log(e)}finally{var printCanvas=$("#print");image.onload=function(){var ctxCanvas=printCanvas[0].getContext("2d"),sourceWidth=canvas[0].width,sourceHeight=canvas[0].height;sourceWidth<settings.printWith?printCanvas[0].width=sourceWidth:sourceWidth>=settings.printWith&&(printCanvas[0].width=settings.printWith),sourceHeight<settings.printWith?printCanvas[0].height=sourceHeight:sourceWidth>=settings.printWith&&(printCanvas[0].height=settings.printWith),ctxCanvas.drawImage(image,sourceWidth/2-printCanvas[0].width/2,0,printCanvas[0].width,printCanvas[0].height,0,0,printCanvas[0].width,printCanvas[0].height),imageToPrint(printCanvas)},image.src=imageUrl}}var printButton,map,$=require("jquery"),viewer=require("./viewer"),utils=require("./utils"),settings={printWith:800};module.exports.init=init},{"./utils":131,"./viewer":136,jquery:23}],120:[function(require,module,exports){"use strict";function init(options){name=options.searchAttribute,northing=options.northing||void 0,easting=options.easting||void 0,geometryAttribute=options.geometryAttribute,idAttribute=options.idAttribute,layerNameAttribute=options.layerNameAttribute||void 0,layerName=options.layerName||void 0,url=options.url,title=options.title||"",titleAttribute=options.titleAttribute||void 0,contentAttribute=options.contentAttribute||void 0,options.maxZoomLevel||2,hintText=options.hintText||"Sök...",hint=options.hasOwnProperty("hint")?options.hint:!0,highlight=options.hasOwnProperty("highlight")?options.highlight:!0,projectionCode=Viewer.getProjectionCode(),map=Viewer.getMap();var el='<div id="search-wrapper"><div id="search" class="search search-false"><input class="search-field typeahead form-control" type="text" placeholder="'+hintText+'"><button id="search-button"><svg class="mdk-icon-fa-search"><use xlink:href="css/svg/fa-icons.svg#fa-search"></use></svg></button><button id="search-button-close"><svg class="mdk-icon-search-fa-times"><use xlink:href="css/svg/fa-icons.svg#fa-times"></use></svg></button></div></div>';$("#map").append(el),$.support.cors=!0,adress=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace(name),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,remote:{url:url+"?q=&QUERY",wildcard:"&QUERY",ajax:{contentType:"application/json",type:"POST",crossDomain:!0,success:function(data){data.sort(function(a,b){return a[name].localeCompare(b[name])})},error:function(jqXHR,textStatus,errorThrown){console.log(errorThrown)}}}}),adress.initialize(),$(".typeahead").typeahead({autoSelect:!0,hint:hint,highlight:highlight,minLength:4},{name:"adress",limit:9,displayKey:name,source:adress.ttAdapter()}),bindUIActions()}function bindUIActions(){$(".typeahead").on("typeahead:selected",selectHandler),$("#search .search-field").on("input",function(){$("#search .search-field.tt-input").val()&&$("#search").hasClass("search-false")?($("#search").removeClass("search-false"),$("#search").addClass("search-true"),onClearSearch()):!$("#search .search-field.tt-input").val()&&$("#search").hasClass("search-true")&&($("#search").removeClass("search-true"),$("#search").addClass("search-false"),offClearSearch())})}function onClearSearch(){$("#search-button-close").on("touchend click",function(e){$(".typeahead").typeahead("val",""),featureInfo.clear(),Viewer.removeOverlays(),$("#search").removeClass("search-true"),$("#search").addClass("search-false"),$("#search .search-field.tt-input").val(""),$("#search-button").blur(),e.preventDefault()})}function offClearSearch(){console.log("offClearSearch")}function showOverlay(data,coord){Viewer.removeOverlays();var overlay=new ol.Overlay({element:$("#popup").get(0)});map.addOverlay(overlay),overlay.setPosition(coord);var content=data[name];Popup.setContent({content:content,title:title}),Popup.setVisibility(!0),mapUtils.zoomToExent(new ol.geom.Point(coord),maxZoomLevel)}function showFeatureInfo(features,title,content){var obj={};obj.feature=features[0],obj.title=title,obj.content=content,featureInfo.identify([obj],"overlay",mapUtils.getCenter(features[0].getGeometry())),mapUtils.zoomToExent(features[0].getGeometry(),maxZoomLevel)}function selectHandler(evt,data){if(layerNameAttribute&&idAttribute){var layer=Viewer.getLayer(data[layerNameAttribute]),id=data[idAttribute];getFeature(id,layer).done(function(res){if(res.length>0)showFeatureInfo(res,layer.get("title"),getAttributes(res[0],layer));else if(geometryAttribute){var feature=wktToFeature(data[geometryAttribute],projectionCode),coord=feature.getGeometry().getCoordinates();showOverlay(data,coord)}})}else if(geometryAttribute&&layerName){var feature=wktToFeature(data[geometryAttribute],projectionCode),layer=Viewer.getLayer(data[layerName]);showFeatureInfo([feature],layer.get("title"),getAttributes(feature,layer))}else if(titleAttribute&&contentAttribute&&geometryAttribute){var feature=wktToFeature(data[geometryAttribute],projectionCode),content=utils.createElement("div",data[contentAttribute]);showFeatureInfo([feature],data[titleAttribute],content)}else if(geometryAttribute&&title){var feature=wktToFeature(data[geometryAttribute],projectionCode);showFeatureInfo([feature],title,data)}else if(easting&&northing&&title){var coord=[data[easting],data[northing]];showOverlay(data,coord)}else console.log("Search options are missing")}var ol=require("openlayers"),$=require("jquery"),Viewer=require("./viewer"),wktToFeature=require("./maputils").wktToFeature,Popup=require("./popup"),typeahead=require("typeahead.js-browserify");typeahead.loadjQueryPlugin();var adress,map,name,northing,easting,geometryAttribute,idAttribute,layerNameAttribute,layerName,titleAttribute,contentAttribute,maxZoomLevel,url,title,hintText,hint,highlight,projectionCode,Bloodhound=require("typeahead.js-browserify").Bloodhound,getFeature=require("./getfeature"),getAttributes=require("./getattributes"),featureInfo=require("./featureinfo"),mapUtils=require("./maputils"),utils=require("./utils");module.exports.init=init},{"./featureinfo":102,"./getattributes":106,"./getfeature":107,"./maputils":112,"./popup":118,"./utils":131,"./viewer":136,jquery:23,openlayers:24,"typeahead.js-browserify":95}],121:[function(require,module,exports){"use strict";function init(){var el=utils.createListButton({id:"share",iconCls:"mdk-icon-fa-share-square-o",src:"css/svg/fa-icons.svg#fa-share-square-o",text:"Dela karta"});$("#menutools").append(el),shareButton=$("#share-button"),bindUIActions()}function bindUIActions(){shareButton.on("touchend click",function(e){modal.createModal("#map",{title:"Länk till karta",content:createContent()}),modal.showModal(),createLink(),mapmenu.toggleMenu(),e.preventDefault()})}function createContent(){return'<div class="share-link"><input type="text"></div><i>Kopiera och klistra in länken för att dela kartan.</i>'}function createLink(){var url=permalink.getPermalink();$(".share-link input").val(url).select()}var shareButton,$=require("jquery"),modal=(require("./viewer"),require("./modal")),mapmenu=require("./mapmenu"),utils=require("./utils"),permalink=require("./permalink/permalink");module.exports.init=init},{"./mapmenu":111,"./modal":114,"./permalink/permalink":115,"./utils":131,"./viewer":136,jquery:23}],122:[function(require,module,exports){"use strict";function init(){var el='<div id="sidebar"><div class="sidebar"><div class="mdk-close-button"><svg class="mdk-icon-fa-times"><use xlink:href="css/svg/fa-icons.svg#fa-times"></use></svg></div><div class="sidebar-title"></div><div class="sidebar-content"></div></div></div>';$("#map").append(el),sidebar=$("#sidebar"),bindUIActions()}function bindUIActions(){$("#sidebar .sidebar .mdk-close-button").on("touchend click",function(evt){closeSidebar(),evt.preventDefault()})}function setVisibility(visible){1==visible?$("#sidebar").addClass("sidebar-show"):$("#sidebar").removeClass("sidebar-show")}function setTitle(title){$("#sidebar .sidebar-title").html(title)}function setContent(config){config.title?$("#sidebar .sidebar .sidebar-title").html(config.title):$("#sidebar .sidebar .sidebar-title").html(""),config.content?$("#sidebar .sidebar .sidebar-content").html(config.content):$("#sidebar .sidebar .sidebar-content").html("")}function closeSidebar(){setVisibility(!1)}var sidebar,$=require("jquery");require("./viewer"),require("./utils");module.exports.init=init,module.exports.setVisibility=setVisibility,module.exports.setTitle=setTitle,module.exports.setContent=setContent,module.exports.closeSidebar=closeSidebar},{"./utils":131,"./viewer":136,jquery:23}],123:[function(require,module,exports){"use strict";var ol=require("openlayers");module.exports=function(){var white=[255,255,255,1],blue=[0,153,255,1],width=3,editStyleOptions={Point:[{circle:{radius:1,stroke:{color:blue,width:0},fill:{color:blue}}}],LineString:[{stroke:{color:white,width:width+2}},{stroke:{color:blue,width:width}}],Polygon:[{stroke:{color:white,width:width+2}},{stroke:{color:blue,width:width}}]};return{createStyleOptions:function(styleParams){var styleOptions={};if(styleParams.hasOwnProperty("geometry"))switch(styleParams.geometry){case"centerPoint":styleOptions.geometry=function(feature){var coordinates=feature.getGeometry().getInteriorPoints().getFirstCoordinate();return new ol.geom.Point(coordinates)}}return styleParams.hasOwnProperty("zIndex")&&(styleOptions.zIndex=styleParams.zIndex),styleParams.hasOwnProperty("fill")&&(styleOptions.fill=new ol.style.Fill(styleParams.fill)),styleParams.hasOwnProperty("stroke")&&(styleOptions.stroke=new ol.style.Stroke(styleParams.stroke)),styleParams.hasOwnProperty("text")&&(styleOptions.text=new ol.style.Text(styleParams.text),styleParams.text.hasOwnProperty("fill")&&styleOptions.text.setFill(new ol.style.Fill(styleParams.text.fill)),styleParams.text.hasOwnProperty("stroke")&&styleOptions.text.setStroke(new ol.style.Stroke(styleParams.text.stroke))),styleParams.hasOwnProperty("icon")&&(styleOptions.image=new ol.style.Icon(styleParams.icon)),styleParams.hasOwnProperty("circle")&&(styleOptions.image=new ol.style.Circle({radius:styleParams.circle.radius,fill:new ol.style.Fill(styleParams.circle.fill)||void 0,stroke:new ol.style.Stroke(styleParams.circle.stroke)||void 0})),styleOptions},createStyleList:function(styleOptions){for(var styleList=[],i=0;i<styleOptions.length;i++){var styleOption,styleRule=[];if(styleOptions[i].constructor===Array)for(var j=0;j<styleOptions[i].length;j++)styleOption=this.createStyleOptions(styleOptions[i][j]),styleRule.push(new ol.style.Style(styleOption));else styleOption=this.createStyleOptions(styleOptions[i]),styleRule=[new ol.style.Style(styleOption)];styleList.push(styleRule)}return styleList},createStyleRule:function(options){var styleOption,styleRule=[];if(options.constructor===Array)for(var i=0;i<options.length;i++){var styleOption=this.createStyleOptions(options[i]);styleRule.push(new ol.style.Style(styleOption))}else styleOption=this.createStyleOptions(options),styleRule=[new ol.style.Style(styleOption)];return styleRule},styleFunction:function(styleSettings,styleList,clusterStyleSettings,clusterStyleList){var fn=function(feature,resolution){var styleL,scale=getScale(resolution),size=clusterStyleList?feature.get("features").length:1;return styleL=size>1&&map.getView().getResolution()!=settings.resolutions[settings.resolutions.length-1]?checkOptions(feature,scale,clusterStyleSettings,clusterStyleList,size.toString()):checkOptions(feature,scale,styleSettings,styleList)};return fn},createEditStyle:function(){return{Point:this.createStyleRule(editStyleOptions.Point),MultiPoint:this.createStyleRule(editStyleOptions.Point),LineString:this.createStyleRule(editStyleOptions.LineString),MultiLineString:this.createStyleRule(editStyleOptions.LineString),Polygon:this.createStyleRule(editStyleOptions.Polygon),MultiPolygon:this.createStyleRule(editStyleOptions.Polygon)}}}}()},{openlayers:24}],124:[function(require,module,exports){"use strict";var pin=[{icon:{anchor:[.5,32],anchorXUnits:"fraction",anchorYUnits:"pixels",src:"img/png/drop_blue.png"}}];module.exports=pin},{}],125:[function(require,module,exports){"use strict";var pin=require("./pin");module.exports=function(){var styleTypes={};return styleTypes.pin=pin,{getStyle:function(type){return type?styleTypes[type]:void console.log(type+" is not a default style")}}}()},{"./pin":124}],126:[function(require,module,exports){var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({1:function(container,depth0,helpers,partials,data){var alias1=container.lambda,alias2=container.escapeExpression;return'        <option value="'+alias2(alias1(null!=depth0?depth0.value:depth0,depth0))+'">'+alias2(alias1(null!=depth0?depth0.name:depth0,depth0))+"</option>\r\n"},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){var stack1;return'<div id="o-editor-toolbar" class="o-control o-padding-horizontal-8 o-rounded-top hidden">\r\n    <select name="layer-dropdown">\r\n'+(null!=(stack1=helpers.each.call(null!=depth0?depth0:{},depth0,{name:"each",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data}))?stack1:"")+'    </select>\r\n    <button id="o-editor-draw" class="o-btn-3" type="button" name="button">\r\n        <svg class="o-icon-fa-pencil">\r\n            <use xlink:href="css/svg/fa-icons.svg#fa-pencil"></use>\r\n        </svg>\r\n    </button>\r\n    <button id="o-editor-attribute" class="o-btn-3" type="button" name="button">\r\n      <svg class="o-icon-fa-font">\r\n          <use xlink:href="css/svg/fa-icons.svg#fa-font"></use>\r\n      </svg>\r\n    </button>\r\n    <button id="o-editor-delete" class="o-btn-3" type="button" name="button">\r\n      <svg class="o-icon-fa-trash">\r\n          <use xlink:href="css/svg/fa-icons.svg#fa-trash"></use>\r\n      </svg>\r\n    </button>\r\n    <button id="o-editor-close" class="o-btn-3" type="button" name="button">\r\n        <svg class="o-icon-fa-times">\r\n            <use xlink:href="css/svg/fa-icons.svg#fa-times"></use>\r\n        </svg>\r\n    </button>\r\n</div>\r\n'},useData:!0})},{"hbsfy/runtime":22}],127:[function(require,module,exports){var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({1:function(container,depth0,helpers,partials,data){var helper,alias1=container.escapeExpression;return"      <li><b>"+alias1((helper=null!=(helper=helpers.key||data&&data.key)?helper:helpers.helperMissing,"function"==typeof helper?helper.call(null!=depth0?depth0:{},{name:"key",hash:{},data:data}):helper))+"</b> : "+alias1(container.lambda(depth0,depth0))+"</li>\r\n"},compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){var stack1;return null!=(stack1=helpers.each.call(null!=depth0?depth0:{},depth0,{name:"each",hash:{},fn:container.program(1,data,0),inverse:container.noop,data:data}))?stack1:""},useData:!0})},{"hbsfy/runtime":22}],128:[function(require,module,exports){"use strict";var defaultTemplate=require("./default.handlebars");module.exports=function(attributes){return defaultTemplate(attributes)}},{"./default.handlebars":127}],129:[function(require,module,exports){var HandlebarsCompiler=require("hbsfy/runtime");module.exports=HandlebarsCompiler.template({compiler:[7,">= 4.0.0"],main:function(container,depth0,helpers,partials,data){return'<div id="no-map"><div class="no-map-message">Du använder en föråldrad webbläsare. Uppgradera din webbläsare för att visa kartan.</div></div>\r\n<div id="wrapper" class="o-map o-grid">\r\n  <div id="map" class="map">\r\n    <div id="bottom-tools"></div>\r\n    <div id="footer">\r\n      <div class="footer-left">&nbsp;</div>\r\n      <div class="footer-middle">\r\n      </div>\r\n      <div class="footer-right">\r\n      </div>\r\n  </div>\r\n</div>\r\n'},useData:!0})},{"hbsfy/runtime":22}],130:[function(require,module,exports){"use strict";var ol=require("openlayers"),$=require("jquery"),modal=(require("./viewer"),require("./modal"));module.exports=function(){var settings={srsName:void 0,source:void 0,geometryType:void 0,geometryName:void 0,url:void 0,map:void 0,featureNS:void 0,featureType:void 0,draw:void 0,hasDraw:void 0,select:void 0,modify:void 0,dirty:void 0,format:void 0,serializer:void 0};return{onSetEditLayer:function(options){settings.srsName=options.srsName,settings.source=options.source,settings.geometryType=options.geometryType,settings.geometryName=options.geometryName,settings.url=options.url,settings.map=options.map,settings.featureNS=options.featureNS,settings.featureType=options.featureType,settings.attributes=options.attributes,settings.title=options.title,settings.draw=new ol.interaction.Draw({source:settings.source,type:settings.geometryType,geometryName:settings.geometryName}),settings.hasDraw=!1,settings.select=new ol.interaction.Select({layers:[options.editableLayer]}),settings.modify=new ol.interaction.Modify({features:settings.select.getFeatures()}),settings.select.getFeatures().on("add",this.onSelectAdd,this),settings.select.getFeatures().on("remove",this.onSelectRemove,this),settings.dirty={},settings.map.addInteraction(settings.select),settings.map.addInteraction(settings.modify),settings.format=new ol.format.WFS,settings.serializer=new XMLSerializer,settings.draw.on("drawend",this.onDrawEnd,this)},readResponse:function(data){var result;return window.Document&&data instanceof Document&&data.documentElement&&"ExceptionReport"==data.documentElement.localName?alert(data.getElementsByTagNameNS("http://www.opengis.net/ows","ExceptionText").item(0).textContent):result=settings.format.readTransactionResponse(data),result},getSelect:function(){return settings.select},onSelectAdd:function(evt){var feature=evt.element;feature.getId();feature.on("change",function(evt){settings.dirty[evt.target.getId()]=!0},this)},onSelectRemove:function(evt){var feature=evt.element,fid=feature.getId();if(settings.dirty[fid]){var properties=feature.getProperties();console.log(properties),delete properties.bbox;var clone=new ol.Feature(properties);clone.setId(fid);var node=settings.format.writeTransaction(null,[clone],null,{gmlOptions:{srsName:settings.srsName},featureNS:settings.featureNS,featureType:settings.featureType});$.ajax({type:"POST",url:settings.url,data:settings.serializer.serializeToString(node),contentType:"text/xml",success:function(data){var result=this.readResponse(data);result&&1===result.transactionSummary.totalUpdated&&delete settings.dirty[fid]},context:this})}},onDrawEnd:function(evt){var feature=evt.feature,node=settings.format.writeTransaction([feature],null,null,{gmlOptions:{srsName:settings.srsName},featureNS:settings.featureNS,featureType:settings.featureType});$.ajax({type:"POST",url:settings.url,data:settings.serializer.serializeToString(node),contentType:"text/xml",success:function(data){var result=this.readResponse(data);if(result){var insertId=result.insertIds[0];"new0"==insertId?settings.source.clear():feature.setId(insertId)}settings.map.removeInteraction(settings.draw),settings.hasDraw=!1},error:function(e){settings.map.removeInteraction(settings.draw),settings.hasDraw=!1;var errorMsg=e?e.status+" "+e.statusText:"";alert("Error saving this feature to GeoServer.<br><br>"+errorMsg)},context:this})},onAttributesSave:function(feature,attributes){var self=this;$("#mdk-save-button").on("touchend click",function(e){for(var editEl={},i=0;i<attributes.length;i++){var containerClass="."+attributes[i].elId.slice(1);$(containerClass).hasClass("hidden")===!1&&("checkbox"==$(attributes[i].elId).attr("type")?editEl[attributes[i].name]=$(attributes[i].elId).is(":checked")?1:0:editEl[attributes[i].name]=$(attributes[i].elId).val())}modal.closeModal(),self.attributesSaveHandler(feature,editEl),$("#mdk-save-button").blur(),e.preventDefault()})},attributesSaveHandler:function(f,el){var formEl=el,feature=f,fid=feature.getId(),clone=new ol.Feature;clone.setId(fid);for(var i=0;i<settings.attributes.length;i++)formEl.hasOwnProperty(settings.attributes[i].name)&&(feature.set(settings.attributes[i].name,formEl[settings.attributes[i].name]),clone.set(settings.attributes[i].name,formEl[settings.attributes[i].name]));var node=settings.format.writeTransaction(null,[clone],null,{gmlOptions:{srsName:settings.srsName},featureNS:settings.featureNS,featureType:settings.featureType});$.ajax({type:"POST",url:settings.url,data:settings.serializer.serializeToString(node),contentType:"text/xml",success:function(data){},error:function(e){var errorMsg=e?e.status+" "+e.statusText:"";alert("Error saving this feature to GeoServer.<br><br>"+errorMsg)},context:this})},removeInteractions:function(){settings.map.removeInteraction(settings.modify),settings.map.removeInteraction(settings.select)},activateInsert:function(){settings.hasDraw!==!0&&(settings.map.addInteraction(settings.draw),settings.hasDraw=!0)},addListener:function(){var fn=function(obj){$(obj.elDependencyId).on(obj.eventType,function(e){var containerClass="."+obj.elId.slice(1);
$(obj.elDependencyId+" option:selected").text()===obj.requiredVal?$(containerClass).removeClass("hidden"):$(containerClass).addClass("hidden")})};return fn},onAttributes:function(){var self=this,features=settings.select.getFeatures();if(1===features.getLength()){var feature=features.item(0);if(settings.attributes.length>0)var attributeObjects=settings.attributes.map(function(attributeObject){var obj={};if($.extend(obj,attributeObject),obj.val=feature.get(obj.name)||"",obj.hasOwnProperty("constraint")){var constraintProps=obj.constraint.split(":");3===constraintProps.length?(obj.eventType=constraintProps[0],obj.dependencyVal=feature.get(constraintProps[1]),obj.requiredVal=constraintProps[2],obj.dependencyVal===obj.requiredVal?obj.isVisible=!0:obj.isVisible=!1,obj.addListener=self.addListener(),obj.elId="#input-"+obj.name+"-"+obj.requiredVal,obj.elDependencyId="#input-"+constraintProps[1]):alert("Constraint properties are not written correct, it should written as for example change:attribute:value")}else obj.isVisible=!0,obj.elId="#input-"+obj.name;return obj.formElement=self.createFormElement(obj),obj});var formElement=attributeObjects.reduce(function(prev,next){return prev+next.formElement},""),title=settings.title,form="<form>"+formElement+'<br><div class="mdk-form-save"><input id="mdk-save-button" type="button" value="Spara"></input></div></form>';modal.createModal("#map",{title:title,content:form}),modal.showModal(),attributeObjects.forEach(function(obj){obj.hasOwnProperty("addListener")&&obj.addListener(obj)}),this.onAttributesSave(feature,attributeObjects)}},deleteSelected:function(){var features=settings.select.getFeatures();if(1===features.getLength()){var feature=features.item(0),r=confirm("Är du säker på att du vill ta bort det här objektet?");if(r===!0){var node=settings.format.writeTransaction(null,null,[feature],{featureNS:settings.featureNS,featureType:settings.featureType});$.ajax({type:"POST",url:settings.url,data:settings.serializer.serializeToString(node),contentType:"text/xml",success:function(data){var result=this.readResponse(data);result&&(1===result.transactionSummary.totalDeleted?(settings.select.getFeatures().clear(),settings.source.removeFeature(feature)):alert("There was an issue deleting the feature."))},context:this})}}},createFormElement:function(obj){var id=obj.elId.slice(1),cls=obj.cls||"";cls+=id,cls+=obj.isVisible?"":" hidden";var el,label=obj.title,val=obj.isVisible?obj.val:"",type=obj.type,maxLength=obj.maxLength?' maxlength="'+obj.maxLength+'" ':"",dropdownOptions=obj.options||[];switch(type){case"text":el="<div><label>"+label+'</label><br><input type="text" id="'+id+'" value="'+val+'"'+maxLength+"></div>";break;case"textarea":el="<div><label>"+label+'</label><br><textarea id="'+id+'"'+maxLength+'rows="3">'+val+"</textarea></div>";break;case"checkbox":var checked=1==val?" checked":"";el='<div class="mdk-form-checkbox"><label>'+label+'</label><input type="checkbox" id="'+id+'" value="'+val+'"'+checked+"></div>";break;case"dropdown":var firstOption;firstOption=val?'<option value="'+val+'" selected>'+val+"</option>":'<option value="" selected>Välj</option>',el='<div class="'+cls+'"><label>'+label+"</label><br><select id="+id+">"+firstOption;for(var i=0;i<dropdownOptions.length;i++)el+='<option value="'+dropdownOptions[i]+'">'+dropdownOptions[i]+"</option>";el+="</select></div>"}return el}}}()},{"./modal":114,"./viewer":136,jquery:23,openlayers:24}],131:[function(require,module,exports){"use strict";require("jquery");module.exports={createButton:function(options){var tooltip="",text="",cls=options.cls||"",iconCls=options.iconCls||"",placement=options.tooltipPlacement||"east";options.text&&(text='<span class="mdk-button-text">'+options.text+"</span>"),options.tooltipText&&(tooltip='<span data-tooltip="'+options.tooltipText+'" data-placement="'+placement+'"></span>');var el='<div id="'+options.id+'" class="mdk-button-container mdk-tooltip"><button class="mdk-button '+cls+'">'+text+'<svg class="'+iconCls+'"><use xlink:href="'+options.src+'"></use></svg></button>'+tooltip+"</div>";return el},createListButton:function(options){var el='<li><div id="'+options.id+'-button" class="menu-button"><div class="button-icon"><svg class="'+options.iconCls+'"><use xlink:href="'+options.src+'"></use></svg></div>'+options.text+"</div></li>";return el},createElement:function(el,val,attributes){var prefix="<"+el,suffix="</"+el+">",attributeNames=attributes?attributes.getOwnProperties():[],attributeList=attributeNames.map(function(name){return name+"="+attributes[name]}),element=prefix.concat(attributeList.join(" "),">",val,suffix);return element}}},{jquery:23}],132:[function(require,module,exports){"use strict";module.exports=function(){return location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+location.pathname}},{}],133:[function(require,module,exports){"use strict";module.exports=function(s){var regexp=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return regexp.test(s)}},{}],134:[function(require,module,exports){"use strict";var Replacer=function(){function replace(name,obj,options){var start=options.start||defaultOptions.start,end=options.end||defaultOptions.end,result=searchAndReplace(name,obj,start,end);return result}function searchAndReplace(name,obj,start,end){var regex=new RegExp(start+"(.*?)"+end,"g"),matches=regex.exec(name);if(matches){var val=obj.hasOwnProperty(matches[1])?obj[matches[1]]:"";return searchAndReplace(name.replace(matches[0],val),obj,start,end)}return name}var defaultOptions={start:"{{",end:"}}"};return{replace:function(name,obj,options){var opt=options||{};return replace(name,obj,opt)}}};module.exports=Replacer()},{}],135:[function(require,module,exports){"use strict";var urlparser={};urlparser.objectify=function(objString,opt_options){var options=opt_options||{},delimeter=options.delimeter||"/",topmost=options.topmost||"name",parts=objString.split(delimeter),obj={};if(options.topmost&&(""===parts[0]?console.log("Topmost value is missing"):obj[topmost]=parts[0]),parts.length>1)for(var i=1,ii=parts.length;ii>i;i+=2)obj[parts[i]]=parts[i+1];return obj},urlparser.stringify=function(obj,opt_options){var options=opt_options||{},delimeter=options.delimeter||"/",topmost=options.topmost||void 0,objString=topmost?obj[topmost]:"";for(var key in obj)key!==topmost&&(objString+=delimeter+key+delimeter+obj[key]);return objString},urlparser.arrStringify=function(arr,opt_options){var options=opt_options||{},delimeter=options.delimeter||"/",topmost=options.topmost||"",arrString=topmost?topmost+delimeter:"";if("undefined"==typeof arr[0][0])arrString+=arr.join(",");else{var outer=arr.map(function(inner){var res=inner.map(function(innerpart){return innerpart.join("!")});return res.join(",")});arrString+=outer.join(options.delimeter)}return arrString},urlparser.strArrayify=function(str,opt_options){var options=opt_options||{},delimeter=options.delimeter||"/",topmostName=opt_options.topmostName||"topmost",arrName=opt_options.arrName||"arr",topmost=str.substring(0,str.indexOf(delimeter)),arrStr=str.substring(str.indexOf(delimeter)+1),arr=arrStr.split(delimeter).map(function(el){return el.split("!")}),obj={};return obj[topmostName]=topmost,obj[arrName]=arr,obj},urlparser.strIntify=function(str,opt_options){var options=opt_options||{},delimiter=options.delimiter||",",arr=str.split(delimiter),strToInt=arr.map(function(el){return parseInt(el)});return strToInt},urlparser.strBoolean=function(str){return"1"===str?!0:"0"===str?!1:(console.log("String is not 1 or 0"),!1)},urlparser.formatUrl=function(obj){var url=Object.getOwnPropertyNames(obj).reduce(function(prev,current){return current=prev?"&"+current+"="+obj[current]:current+"="+obj[current],prev+current},"");return url},module.exports=urlparser},{}],136:[function(require,module,exports){"use strict";function init(el,mapOptions){if($(el).html(template),mapOptions.hasOwnProperty("proj4Defs")&&proj4)for(var proj=mapOptions.proj4Defs,i=0;i<proj.length;i++)proj4.defs(proj[i].code,proj[i].projection),proj[i].hasOwnProperty("alias")&&proj4.defs(proj[i].alias,proj4.defs(proj[i].code));settings.params=urlParams=mapOptions.params||{},settings.map=mapOptions.map,settings.url=mapOptions.url,mapOptions.hasOwnProperty("proj4Defs")&&(settings.projectionCode=mapOptions.projectionCode||void 0,settings.projectionExtent=mapOptions.projectionExtent,settings.projection=new ol.proj.Projection({code:settings.projectionCode,extent:settings.projectionExtent}),settings.resolutions=mapOptions.resolutions||void 0,settings.tileGrid=maputils.tileGrid(settings.projectionExtent,settings.resolutions)),settings.extent=mapOptions.extent||void 0,settings.center=urlParams.center||mapOptions.center,settings.zoom=urlParams.zoom||mapOptions.zoom,settings.source=mapOptions.source,settings.home=mapOptions.home,settings.groups=mapOptions.groups,settings.editLayer=mapOptions.editLayer,settings.styles=mapOptions.styles,createLayers(mapOptions.layers,settings.layers,urlParams.layers),settings.controls=mapOptions.controls,settings.featureinfoOptions=mapOptions.featureinfoOptions||{},window.location.search&&parseArg(),attribution=new ol.control.Attribution({collapsible:!1});var zoomControl=new ol.control.Zoom({zoomInTipLabel:" ",zoomOutTipLabel:" ",zoomInLabel:$.parseHTML('<svg class="mdk-icon-fa-plus"><use xlink:href="css/svg/fa-icons.svg#fa-plus"></use></svg>')[0],zoomOutLabel:$.parseHTML('<svg class="mdk-icon-fa-minus"><use xlink:href="css/svg/fa-icons.svg#fa-minus"></use></svg>')[0]});mapControls=[zoomControl,attribution,new ol.control.Rotate({label:""}),new ol.control.ScaleLine({target:"bottom-tools"})],window.top!=window.self&&mapwindow.init(),createHome(settings.home),loadMap(),$(window).on("resize",checkSize),checkSize(),urlParams.pin?settings.featureinfoOptions.savedPin=urlParams.pin:urlParams.selection&&(settings.featureinfoOptions.savedSelection=new ol.Feature({geometry:new ol.geom[urlParams.selection.geometryType](urlParams.selection.coordinates)})),featureinfo.init(settings.featureinfoOptions)}function createLayers(layerlist,layers,savedLayers){for(var i=layerlist.length-1;i>=0;i--){var savedLayer={};savedLayers&&(savedLayer=savedLayers[layerlist[i].name.split(":").pop()]||{visible:!1,legend:!1},savedLayer.name=layerlist[i].name);var layer=$.extend(layerlist[i],savedLayer),layerOptions=setLayerOptions(layer);if("WMTS"==layer.type)layers.push(addWMTS(layer));else if("WMS"==layer.type)layers.push(addWMS(layer));else if("WFS"==layer.type){var wfsSource=wfs(layerOptions);layers.push(createVectorLayer(layerOptions,wfsSource))}else if("AGS_FEATURE"==layer.type){var agsFeatureSource=agsFeature(layerOptions);layers.push(createVectorLayer(layerOptions,agsFeatureSource))}else if("AGS_TILE"==layer.type){var agsTileSource=agsTile(layerOptions);layers.push(createTileLayer(layerOptions,agsTileSource))}else if("GEOJSON"==layer.type){var geojsonSource=geojson(layerOptions);layers.push(createVectorLayer(layerOptions,geojsonSource))}else if("XYZ"==layer.type){var xyzSource=xyz(layerOptions);layers.push(createTileLayer(layerOptions,xyzSource))}else"GROUP"==layer.type&&layers.push(createLayerGroup(layer.layers,layer))}return layers}function setLayerOptions(options){var attr,geometryName=options.hasOwnProperty("geometryName")?options.geometryName:"geom",featureType=options.name.split("__").shift();options.hasOwnProperty("attribution")?attr=[new ol.Attribution({html:options.attribution})]:[attr=null];var layerOptions={featureType:featureType.split("__").shift(),name:options.name.split(":").pop(),id:options.id||void 0,title:options.title,group:options.group||"none",opacity:options.opacity||1,geometryName:geometryName,filter:options.filter||void 0,relations:options.relations||void 0,layerType:options.layerType||"vector",legend:options.legend||!1,sourceName:options.source,attribution:attr,style:options.style||"default",styleName:options.style,tileGrid:options.tileGrid||void 0,queryable:options.hasOwnProperty("queryable")?options.queryable:!0,minResolution:options.hasOwnProperty("minScale")?scaleToResolution(options.minScale):void 0,maxResolution:options.hasOwnProperty("maxScale")?scaleToResolution(options.maxScale):void 0,visible:options.visible,type:options.type||void 0,extent:options.extent||void 0,attributes:options.attributes};return options.hasOwnProperty("clusterStyle")&&(layerOptions.clusterStyle=options.clusterStyle),layerOptions}function createLayerGroup(layers,layersConfig){var group=[];return group=createLayers(layers,group),new ol.layer.Group({name:layersConfig.name,group:layersConfig.group,title:layersConfig.title,styleName:layersConfig.style||"default",layers:group,sourceName:layersConfig.source,visible:layersConfig.visible})}function loadMap(){map=new ol.Map({target:"map",controls:mapControls,layers:settings.layers,view:new ol.View({extent:settings.extent||void 0,projection:settings.projection||void 0,center:settings.center,resolutions:settings.resolutions||void 0,zoom:settings.zoom})})}function parseArg(){for(var str=window.location.search.substring(1),elements=str.split("&"),i=0;i<elements.length;i++)if(0==i){var z=elements[i].split(",");settings.center[0]=parseInt(z[0]),settings.center[1]=parseInt(z[1])}else if(1==i)settings.zoom=parseInt(elements[i]);else if(2==i)for(var la,match,l=elements[i].split(";"),layers=settings.layers,j=0;j<layers.length;j++)match=0,$.each(l,function(index,el){la=el.split(","),layers[j].get("group")&&("background"==layers[j].get("group")&&la[0]==layers[j].get("name")?(layers[j].setVisible(!0),match=1):"background"==layers[j].get("group")&&0==match?layers[j].setVisible(!1):la[0]==layers[j].get("name")&&(1==la[1]?(layers[j].set("legend",!0),layers[j].setVisible(!1)):(layers[j].set("legend",!0),layers[j].setVisible(!0))))})}function getSettings(){return settings}function getMapName(){return settings.map}function getUrl(){return settings.url}function getStyleSettings(){return settings.styles}function getResolutions(){return settings.resolutions}function getMapUrl(){var url,layerNames="";url=window.location.search?window.location.href.replace(window.location.search,"?"):window.location.href+"?";for(var mapView=map.getView(),center=mapView.getCenter(),i=0;2>i;i++)center[i]=parseInt(center[i]);var zoom=mapView.getZoom(),layers=map.getLayers();return layers.forEach(function(el){1==el.getVisible()?layerNames+=el.get("name")+";":1==el.get("legend")&&(layerNames+=el.get("name")+",1;")}),url+center+"&"+zoom+"&"+layerNames.slice(0,layerNames.lastIndexOf(";"))}function getMap(){return map}function getLayers(){return settings.layers}function getLayer(layername){var layer=$.grep(settings.layers,function(obj){return obj.get("name")==layername});return layer[0]}function getQueryableLayers(){var queryableLayers=settings.layers.filter(function(layer){return layer.get("queryable")&&layer.getVisible()?layer:void 0});return queryableLayers}function getEditLayer(){return settings.editLayer}function getGroup(group){var group=$.grep(settings.layers,function(obj){return obj.get("group")==group});return group}function getGroups(){return settings.groups}function getProjectionCode(){return settings.projectionCode}function getProjection(){return settings.projection}function getMapSource(){return settings.source}function getControlNames(){var controlNames=settings.controls.map(function(obj){return obj.name});return controlNames}function createTileLayer(options,source){var tileLayer;return options.source=source,tileLayer=new ol.layer.Tile(options)}function createVectorLayer(options,source){var vectorLayer;switch(options.layerType){case"vector":options.source=source,options.style=createStyle(options.style),vectorLayer=new ol.layer.Vector(options);break;case"cluster":options.source=new ol.source.Cluster({attributions:options.attribution,source:source,distance:60}),options.style=createStyle(options.style,options.clusterStyle),vectorLayer=new ol.layer.Vector(options);break;case"image":options.source=new ol.source.ImageVector({source:source,style:createStyle(options.style)}),vectorLayer=new ol.layer.Image(options)}return vectorLayer}function addWMS(layersConfig){var attr;return layersConfig.hasOwnProperty("attribution")?attr=[new ol.Attribution({html:layersConfig.attribution})]:[attr=null],new ol.layer.Tile({name:layersConfig.name.split(":").pop(),group:layersConfig.group||"default",opacity:layersConfig.opacity||1,title:layersConfig.title,styleName:layersConfig.style||"default",extent:layersConfig.extent||void 0,minResolution:layersConfig.hasOwnProperty("minScale")?scaleToResolution(layersConfig.minScale):void 0,maxResolution:layersConfig.hasOwnProperty("maxScale")?scaleToResolution(layersConfig.maxScale):void 0,type:layersConfig.type,visible:layersConfig.visible,attributes:layersConfig.attributes,queryable:!0,featureinfoLayer:layersConfig.featureinfoLayer||void 0,legend:!1,sourceName:layersConfig.source,source:new ol.source.TileWMS({attributions:attr,url:settings.source[layersConfig.source].url,gutter:layersConfig.gutter||0,crossOrigin:"anonymous",projection:settings.projection,params:{LAYERS:layersConfig.name,TILED:!0,VERSION:settings.source[layersConfig.source].version}})})}function addWMTS(layersConfig){for(var matrixIds=[],attr=null,layerSource=settings.source[layersConfig.source],matrixSet=layerSource.hasOwnProperty("matrixSetName")?layerSource.matrixSetName:settings.projectionCode,matrixIdsPrefix=layerSource.hasOwnProperty("matrixIdsPrefix")?layerSource.matrixIdsPrefix:settings.projectionCode+":",z=0;z<settings.resolutions.length;++z)matrixIds[z]=matrixIdsPrefix+z;return layersConfig.hasOwnProperty("attribution")?attr=[new ol.Attribution({html:layersConfig.attribution})]:[attr=null],new ol.layer.Tile({group:layersConfig.group||"background",name:layersConfig.name.split(":").pop(),opacity:layersConfig.opacity||1,title:layersConfig.title,styleName:layersConfig.style||"default",minResolution:layersConfig.hasOwnProperty("minScale")?scaleToResolution(layersConfig.minScale):void 0,maxResolution:layersConfig.hasOwnProperty("maxScale")?scaleToResolution(layersConfig.maxScale):void 0,visible:layersConfig.visible,type:layersConfig.type,queryable:layersConfig.queryable||!1,featureinfoLayer:layersConfig.featureinfoLayer||void 0,extent:layersConfig.extent||settings.extent,sourceName:layersConfig.name,source:new ol.source.WMTS({crossOrigin:"anonymous",attributions:attr,url:layerSource.url,projection:settings.projection,layer:layersConfig.name,matrixSet:matrixSet,format:layersConfig.format,tileGrid:new ol.tilegrid.WMTS({origin:ol.extent.getTopLeft(settings.projectionExtent),resolutions:settings.resolutions,matrixIds:matrixIds}),style:"default"})})}function geojson(options){return new ol.source.Vector({attributions:options.attribution,url:options.sourceName,format:new ol.format.GeoJSON})}function wfs(options){var vectorSource=null,serverUrl=settings.source[options.sourceName].url,geometryName=options.geometryName,queryFilter=options.filter?"&CQL_FILTER="+options.filter+" AND BBOX("+geometryName+",":"&BBOX=",bboxProjectionCode=options.filter?"'"+settings.projectionCode+"')":settings.projectionCode;return vectorSource=new ol.source.Vector({attributions:options.attribution,format:new ol.format.GeoJSON({geometryName:options.geometryName}),loader:function(extent,resolution,projection){var url=serverUrl+"?service=WFS&version=1.1.0&request=GetFeature&typeName="+options.featureType+"&outputFormat=application/json&srsname="+settings.projectionCode+queryFilter+extent.join(",")+","+bboxProjectionCode;$.ajax({url:url,cache:!1}).done(function(response){vectorSource.addFeatures(vectorSource.getFormat().readFeatures(response))})},strategy:ol.loadingstrategy.tile(ol.tilegrid.createXYZ({maxZoom:settings.resolutions.length}))})}function agsFeature(options){var vectorSource=null,esriSrs=settings.projectionCode.split(":").pop(),serverUrl=settings.source[options.sourceName].url,queryFilter=options.filter?"&where="+options.filter:"",esrijsonFormat=new ol.format.EsriJSON;return vectorSource=new ol.source.Vector({attributions:options.attribution,loader:function(extent,resolution,projection){var that=this,url=serverUrl+options.id+"/query?f=json&returnGeometry=true&spatialRel=esriSpatialRelIntersects&geometry="+encodeURIComponent('{"xmin":'+extent[0]+',"ymin":'+extent[1]+',"xmax":'+extent[2]+',"ymax":'+extent[3]+',"spatialReference":{"wkid":'+esriSrs+"}}")+"&geometryType=esriGeometryEnvelope&inSR="+esriSrs+"&outFields=*&returnIdsOnly=false&returnCountOnly=false&geometryPrecision=2&outSR="+esriSrs+queryFilter;$.ajax({url:url,dataType:"jsonp",success:function(response){if(response.error)alert(response.error.message+"\n"+response.error.details.join("\n"));else{var features=esrijsonFormat.readFeatures(response,{featureProjection:projection});features.length>0&&that.addFeatures(features)}}})},strategy:ol.loadingstrategy.bbox})}function agsTile(options){var url=settings.source[options.sourceName].url,params=options.params||{};params.layers="show:"+options.id;var tileSource=new ol.source.TileArcGISRest({attributions:options.attribution,projection:settings.projection,params:params,url:url});return tileSource}function xyz(options){var format=options.sourceName.split(".")[1],url=options.sourceName.split(".")[0]+"/{z}/{x}/{y}.";url+=format;var tileSource=new ol.source.XYZ({attributions:options.attribution,projection:settings.projection||"EPSG:3857",tileGrid:settings.tileGrid||void 0,url:url});return tileSource}function wfsCql(relations,coordinates){var url,finishedQueries=0;cqlQuery=[];for(var i=0;i<relations.length;i++)!function(index){var layer=relations[index].layer,mapServer=settings.source[getLayer(layer).get("sourceName")].url;url=mapServer+"?",data="service=WFS&version=1.0.0&request=GetFeature&typeName="+layer+"&outputFormat=json&CQL_FILTER=INTERSECTS(geom,"+coordinates+")&outputFormat=json",$.ajax({url:url,type:"POST",data:data,dataType:"json",success:function(response){var result={};result.layer=relations[index].layer,result.url=relations[index].url||void 0,result.features=[];for(var j=0;j<response.features.length;j++){var f={};f.attribute=response.features[j].properties[relations[index].attribute],f.url=response.features[j].properties[relations[index].url]||void 0,result.features.push(f)}cqlQuery.push(result),finishedQueries++,finishedQueries>=relations.length&&(queryFinished=!0)},error:function(jqXHR,textStatus,errorThrown){console.log(errorThrown)}})}(i)}function getCqlQuery(){return cqlQuery}function modalMoreInfo(){function checkQuery(){return queryFinished?(appendQuery(),void(queryFinished=!1)):void setTimeout(function(){tries>=nrTries&&(nrTries++,checkQuery())},100)}function appendQuery(){cqlQuery.sort(function(a,b){return a.layer.localeCompare(b.layer)});for(var i=0;i<cqlQuery.length;i++)if(cqlQuery[i].features.length){var l=getLayer(cqlQuery[i].layer);queryListItems+="<ul><li>"+l.get("title")+"</li>";for(var j=0;j<cqlQuery[i].features.length;j++){var attr=cqlQuery[i].features[j].attribute;queryListItems+=cqlQuery[i].features[j].url?'<li><div class="query-item"><a href="'+cqlQuery[i].features[j].url+'" target="_blank">'+attr+"</a></div></li>":'<li><div class="query-item">'+attr+"</div></li>"}queryListItems+="</ul>"}$("#querylist").append(queryListItems)}var content=$("#identify").html(),title=$(".popup-title").html();Popup.setVisibility(!1);var queryList='<ul id="querylist">';queryList+="</ul>";var modal=Modal("#map",{title:title,content:content+queryList});modal.showModal(),$(".modal li").removeClass("hidden");var queryListItems="",tries=10,nrTries=0;checkQuery()}function createStyle(styleName,clusterStyleName){var styleSettings=settings.styles[styleName];$.isEmptyObject(styleSettings)&&alert("Style "+styleName+" is not defined");var clusterStyleSettings=settings.styles[clusterStyleName],style=function(){var styleList=createStyleList(styleSettings);if(clusterStyleSettings){var clusterStyleList=createStyleList(clusterStyleSettings);return styleFunction(styleSettings,styleList,clusterStyleSettings,clusterStyleList)}return styleFunction(styleSettings,styleList)}();return style}function createStyleList(styleSettings){for(var styleList=[],i=0;i<styleSettings.length;i++){var styleOptions,styleRule=[];if(styleSettings[i].constructor===Array)for(var j=0;j<styleSettings[i].length;j++)styleOptions=createStyleOptions(styleSettings[i][j]),styleRule.push(new ol.style.Style(styleOptions));else styleOptions=createStyleOptions(styleSettings[i]),styleRule=[new ol.style.Style(styleOptions)];styleList.push(styleRule)}return styleList}function styleFunction(styleSettings,styleList,clusterStyleSettings,clusterStyleList){var fn=function(feature,resolution){var styleL,scale=getScale(resolution),size=clusterStyleList?feature.get("features").length:1;return styleL=size>1&&map.getView().getResolution()!=settings.resolutions[settings.resolutions.length+1]?checkOptions(feature,scale,clusterStyleSettings,clusterStyleList,size.toString()):checkOptions(feature,scale,styleSettings,styleList)};return fn}function checkScale(scale,maxScale,minScale){if(!maxScale&&!minScale)return!0;if(maxScale&&minScale){if(scale>maxScale&&minScale>scale)return!0}else if(maxScale){if(scale>maxScale)return!0}else if(minScale&&minScale>scale)return!0}function checkOptions(feature,scale,styleSettings,styleList,size){for(var s=styleSettings,j=0;j<s.length;j++){var styleL;if(checkScale(scale,s[j][0].maxScale,s[j][0].minScale)){if(s[j].some(function(element,index,array){element.hasOwnProperty("text")&&size&&styleList[j][index].getText().setText(size)}),!s[j][0].hasOwnProperty("filter"))return styleL=styleList[j];var featAttr,expr,featMatch,matches=s[j][0].filter.match(/\[(.*?)\]/);if(matches&&(featAttr=matches[1],expr=s[j][0].filter.split("]")[1],featMatch=feature.get(featAttr),expr="number"==typeof featMatch?featMatch+expr:'"'+featMatch+'"'+expr),eval(expr))return styleL=styleList[j]}}}function createStyleOptions(styleParams){var styleOptions={};if(styleParams.hasOwnProperty("geometry"))switch(styleParams.geometry){case"centerPoint":styleOptions.geometry=function(feature){if("Polygon"===feature.getGeometry().getType()){var coordinates=feature.getGeometry().getInteriorPoint().getFirstCoordinate();return new ol.geom.Point(coordinates)}if("MultiPolygon"===feature.getGeometry().getType()){var coordinates=feature.getGeometry().getInteriorPoints().getFirstCoordinate();return new ol.geom.Point(coordinates)}}}return styleParams.hasOwnProperty("zIndex")&&(styleOptions.zIndex=styleParams.zIndex),styleParams.hasOwnProperty("fill")&&(styleOptions.fill=new ol.style.Fill(styleParams.fill)),styleParams.hasOwnProperty("stroke")&&(styleOptions.stroke=new ol.style.Stroke(styleParams.stroke)),styleParams.hasOwnProperty("text")&&(styleOptions.text=new ol.style.Text(styleParams.text),styleParams.text.hasOwnProperty("fill")&&styleOptions.text.setFill(new ol.style.Fill(styleParams.text.fill)),styleParams.text.hasOwnProperty("stroke")&&styleOptions.text.setStroke(new ol.style.Stroke(styleParams.text.stroke))),styleParams.hasOwnProperty("icon")&&(styleOptions.image=new ol.style.Icon(styleParams.icon)),styleParams.hasOwnProperty("circle")&&(styleOptions.image=new ol.style.Circle({radius:styleParams.circle.radius,fill:new ol.style.Fill(styleParams.circle.fill)||void 0,stroke:new ol.style.Stroke(styleParams.circle.stroke)||void 0})),styleOptions}function getScale(resolution){var dpi=25.4/.28,mpu=settings.projection.getMetersPerUnit(),scale=resolution*mpu*39.37*dpi;return scale=Math.round(scale)}function scaleToResolution(scale){var dpi=25.4/.28,mpu=settings.projection.getMetersPerUnit(),resolution=scale/(39.37*mpu*dpi);return resolution}function autoPan(){var el=$(".popup"),center=map.getView().getCenter(),popupOffset=$(el).offset(),mapOffset=$("#"+map.getTarget()).offset(),offsetY=popupOffset.top-mapOffset.top,mapSize=map.getSize(),offsetX=mapOffset.left+mapSize[0]-(popupOffset.left+$(el).outerWidth(!0)),menuSize=0;if(settings.controls.hasOwnProperty("mapmenu")&&(menuSize=settings.controls.mapmenu.getTarget().offset().left>0?mapSize[0]-settings.controls.mapmenu.getTarget().offset().left:menuSize=0),0>offsetY||0+menuSize>offsetX||offsetX>mapSize[0]-$(el).outerWidth(!0)){var dx=0,dy=0;0+menuSize>offsetX&&(dx=(-offsetX+menuSize)*map.getView().getResolution()),offsetX>mapSize[0]-$(el).outerWidth(!0)&&(dx=-($(el).outerWidth(!0)-(mapSize[0]-offsetX))*map.getView().getResolution()),0>offsetY&&(dy=-offsetY*map.getView().getResolution());var pan=ol.animation.pan({duration:300,source:center});map.beforeRender(pan),map.getView().setCenter([center[0]+dx,center[1]+dy])}}function removeOverlays(){var overlays=map.getOverlays();if(overlays.length>0)for(var i=0;i<overlays.length;i++)map.removeOverlay(overlays[i])}function createHome(home){var el=utils.createButton({id:"home-button",iconCls:"mdk-icon-fa-home",src:"css/svg/fa-icons.svg#fa-home",tooltipText:"Zooma till hela kartan"});$("#map").append(el),$("#home-button").on("touchend click",function(e){map.getView().fit(home,map.getSize()),$("#home-button button").blur(),e.preventDefault()})}function checkSize(){var small=map.getSize()[0]<768;attribution.setCollapsible(small),attribution.setCollapsed(small)}var ol=require("openlayers"),$=require("jquery"),template=require("./templates/viewer.handlebars"),Popup=require("./popup"),Modal=require("./modal"),utils=require("./utils"),featureinfo=require("./featureinfo"),mapwindow=require("./mapwindow"),maputils=require("./maputils"),map,mapControls,attribution,template,settings={projection:"",projectionCode:"",projectionExtent:"",extent:[],center:[0,0],zoom:0,resolutions:null,source:{},group:[],layers:[],styles:{},controls:[],featureInfoOverlay:void 0,editLayer:null},cqlQuery,queryFinished=!1,urlParams;module.exports.init=init,module.exports.createLayers=createLayers,module.exports.createLayerGroup=createLayerGroup,module.exports.loadMap=loadMap,module.exports.parseArg=parseArg,module.exports.getSettings=getSettings,module.exports.getStyleSettings=getStyleSettings,module.exports.getMapUrl=getMapUrl,module.exports.getMap=getMap,module.exports.getLayers=getLayers,module.exports.getLayer=getLayer,module.exports.getControlNames=getControlNames,module.exports.getQueryableLayers=getQueryableLayers,module.exports.getEditLayer=getEditLayer,module.exports.getGroup=getGroup,module.exports.getGroups=getGroups,module.exports.getProjectionCode=getProjectionCode,module.exports.getProjection=getProjection,module.exports.getMapSource=getMapSource,module.exports.getResolutions=getResolutions,module.exports.addWMS=addWMS,module.exports.addWMTS=addWMTS,module.exports.geojson=geojson,module.exports.wfs=wfs,module.exports.wfsCql=wfsCql,module.exports.getCqlQuery=getCqlQuery,module.exports.modalMoreInfo=modalMoreInfo,module.exports.createStyle=createStyle,module.exports.styleFunction=styleFunction,module.exports.createStyleOptions=createStyleOptions,module.exports.getScale=getScale,module.exports.scaleToResolution=scaleToResolution,module.exports.autoPan=autoPan,module.exports.removeOverlays=removeOverlays,module.exports.checkSize=checkSize,module.exports.getMapName=getMapName,module.exports.getUrl=getUrl},{"./featureinfo":102,"./maputils":112,"./mapwindow":113,"./modal":114,"./popup":118,"./templates/viewer.handlebars":129,"./utils":131,jquery:23,openlayers:24}]},{},[98])(98)});